<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>ANTLR Python API: antlr3.TokenRewriteStream Class Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.5 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="namespaces.html"><span>Packages</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
      <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
    </ul>
  </div>
  <div class="navpath"><a class="el" href="namespaceantlr3.html">antlr3</a>.<a class="el" href="classantlr3_1_1_token_rewrite_stream.html">TokenRewriteStream</a>
  </div>
</div>
<div class="contents">
<h1>antlr3.TokenRewriteStream Class Reference</h1><!-- doxytag: class="antlr3::TokenRewriteStream" --><!-- doxytag: inherits="antlr3::CommonTokenStream" --><a class="el" href="classantlr3_1_1_common_token_stream.html" title="The most common stream of tokens.">CommonTokenStream</a> that can be modified.  
<a href="#_details">More...</a>
<p>
<div class="dynheader">
Inheritance diagram for antlr3.TokenRewriteStream:</div>
<div class="dynsection">
<p><center><img src="classantlr3_1_1_token_rewrite_stream__inherit__graph.png" border="0" usemap="#antlr3_8_token_rewrite_stream__inherit__map" alt="Inheritance graph"></center>
<map name="antlr3_8_token_rewrite_stream__inherit__map">
<area shape="rect" href="classantlr3_1_1_common_token_stream.html" title="The most common stream of tokens." alt="" coords="5,155,203,181"><area shape="rect" href="classantlr3_1_1_token_stream.html" title="A stream of tokens accessing tokens from a TokenSource." alt="" coords="33,80,175,107"><area shape="rect" href="classantlr3_1_1_int_stream.html" title="Base interface for streams of integer values." alt="" coords="44,5,164,32"></map>
<center><font size="2">[<a href="graph_legend.html">legend</a>]</font></center></div>
<div class="dynheader">
Collaboration diagram for antlr3.TokenRewriteStream:</div>
<div class="dynsection">
<p><center><img src="classantlr3_1_1_token_rewrite_stream__coll__graph.png" border="0" usemap="#antlr3_8_token_rewrite_stream__coll__map" alt="Collaboration graph"></center>
<map name="antlr3_8_token_rewrite_stream__coll__map">
<area shape="rect" href="classantlr3_1_1_common_token_stream.html" title="The most common stream of tokens." alt="" coords="5,155,203,181"><area shape="rect" href="classantlr3_1_1_token_stream.html" title="A stream of tokens accessing tokens from a TokenSource." alt="" coords="33,80,175,107"><area shape="rect" href="classantlr3_1_1_int_stream.html" title="Base interface for streams of integer values." alt="" coords="44,5,164,32"></map>
<center><font size="2">[<a href="graph_legend.html">legend</a>]</font></center></div>

<p>
<a href="classantlr3_1_1_token_rewrite_stream-members.html">List of all members.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">def&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classantlr3_1_1_token_rewrite_stream.html#7c332b3f6930dc4e35173a036730d9af">__init__</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">def&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classantlr3_1_1_token_rewrite_stream.html#0e119015ca619e0f7b022f0d7632bc20">rollback</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Rollback the instruction stream for a program so that the indicated instruction (via instructionIndex) is no longer in the stream.  <a href="#0e119015ca619e0f7b022f0d7632bc20"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">def&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classantlr3_1_1_token_rewrite_stream.html#99d8304a9309c1fd4fb0e01bc580f086">deleteProgram</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Reset the program so that no instructions exist.  <a href="#99d8304a9309c1fd4fb0e01bc580f086"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">def&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classantlr3_1_1_token_rewrite_stream.html#0c89013df76541e88d5ae8a28ec9e41b">insertAfter</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">def&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classantlr3_1_1_token_rewrite_stream.html#dd101bc84de130caa87d3294626caaf1">insertBefore</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">def&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classantlr3_1_1_token_rewrite_stream.html#a53e867c2bebcee93a1b7cb000ce40dc">replace</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">def&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classantlr3_1_1_token_rewrite_stream.html#fb0bc761bf06f424cfea9c37d064eb9e">delete</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">def&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classantlr3_1_1_token_rewrite_stream.html#8a3354ceb6358794a9cff90d7625b23f">getLastRewriteTokenIndex</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">def&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classantlr3_1_1_token_rewrite_stream.html#85c259099df7caddce305832f08030de">setLastRewriteTokenIndex</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">def&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classantlr3_1_1_token_rewrite_stream.html#efb3cf072db2dc913fdc76fed73046a1">getProgram</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">def&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classantlr3_1_1_token_rewrite_stream.html#511721eeb8579c127bee6ba8067aac8d">initializeProgram</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">def&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classantlr3_1_1_token_rewrite_stream.html#0221e67961412ec70417191dcc176d9c">toOriginalString</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">def&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classantlr3_1_1_token_rewrite_stream.html#7c5a7d74c3849c00fd3bfc5a0a6884b1">toString</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">def&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classantlr3_1_1_token_rewrite_stream.html#d84a6342573b28f0fe78cb1ba554b021">reduceToSingleOperationPerIndex</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">We need to combine operations and report invalid operations (like overlapping replaces that are not completed nested).  <a href="#d84a6342573b28f0fe78cb1ba554b021"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">def&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classantlr3_1_1_token_rewrite_stream.html#9370e95b1937fdf6bcd1f91ecdb06530">catOpText</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">def&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classantlr3_1_1_token_rewrite_stream.html#1ee79bb7a45cca1097a18b6bd055a54c">getKindOfOps</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">def&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classantlr3_1_1_token_rewrite_stream.html#e98ce92ef2d20919d58157e1cbb95515">toDebugString</a></td></tr>

<tr><td colspan="2"><br><h2>Public Attributes</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classantlr3_1_1_token_rewrite_stream.html#d9af9757501a0560aac563d4310b8d50">programs</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classantlr3_1_1_token_rewrite_stream.html#a71d0a5e1dc95d60a7daf2eb8e631718">lastRewriteTokenIndexes</a></td></tr>

<tr><td colspan="2"><br><h2>Static Public Attributes</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">string&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classantlr3_1_1_token_rewrite_stream.html#aa81b930220030347aa1edbc0bf8e682">DEFAULT_PROGRAM_NAME</a> = &quot;default&quot;</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classantlr3_1_1_token_rewrite_stream.html#422c887ca04c05773792c23669a3fa52">MIN_TOKEN_INDEX</a> = 0</td></tr>

<tr><td colspan="2"><br><h2>Static Private Attributes</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classantlr3_1_1_token_rewrite_stream.html#33b787c7519c68129b72d0789c9a88e8">__str__</a> = toString</td></tr>

</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
<a class="el" href="classantlr3_1_1_common_token_stream.html" title="The most common stream of tokens.">CommonTokenStream</a> that can be modified. 
<p>
Useful for dumping out the input stream after doing some augmentation or other manipulations.<p>
You can insert stuff, replace, and delete chunks. Note that the operations are done lazily--only if you convert the buffer to a String. This is very efficient because you are not moving data around all the time. As the buffer of tokens is converted to strings, the <a class="el" href="classantlr3_1_1_token_rewrite_stream.html#7c5a7d74c3849c00fd3bfc5a0a6884b1">toString()</a> method(s) check to see if there is an operation at the current index. If so, the operation is done and then normal String rendering continues on the buffer. This is like having multiple Turing machine instruction streams (programs) operating on a single input tape. :)<p>
Since the operations are done lazily at toString-time, operations do not screw up the token index values. That is, an insert operation at token index i does not change the index values for tokens i+1..n-1.<p>
Because operations never actually alter the buffer, you may always get the original token stream back without undoing anything. Since the instructions are queued up, you can easily simulate transactions and roll back any changes if there is an error just by removing instructions. For example,<p>
<a class="el" href="classantlr3_1_1_char_stream.html" title="A source of characters for an ANTLR lexer.">CharStream</a> input = new <a class="el" href="classantlr3_1_1_a_n_t_l_r_file_stream.html" title="CharStream that opens a file to read the data.">ANTLRFileStream</a>("input"); TLexer lex = new TLexer(input); <a class="el" href="classantlr3_1_1_token_rewrite_stream.html" title="CommonTokenStream that can be modified.">TokenRewriteStream</a> tokens = new TokenRewriteStream(lex); T parser = new T(tokens); parser.startRule();<p>
Then in the rules, you can execute <a class="el" href="classantlr3_1_1_token.html" title="Abstract token baseclass.">Token</a> t,u; ... input.insertAfter(t, "text to put after t");} input.insertAfter(u, "text after u");} System.out.println(tokens.toString());<p>
Actually, you have to cast the 'input' to a <a class="el" href="classantlr3_1_1_token_rewrite_stream.html" title="CommonTokenStream that can be modified.">TokenRewriteStream</a>. :(<p>
You can also have multiple "instruction streams" and get multiple rewrites from a single pass over the input. Just name the instruction streams and use that name again when printing the buffer. This could be useful for generating a C file and also its header file--all from the same buffer:<p>
tokens.insertAfter("pass1", t, "text to put after t");} tokens.insertAfter("pass2", u, "text after u");} System.out.println(tokens.toString("pass1")); System.out.println(tokens.toString("pass2"));<p>
If you don't use named rewrite streams, a "default" stream is used as the first example shows. 
<p>Definition at line <a class="el" href="antlr3_8py-source.html#l02025">2025</a> of file <a class="el" href="antlr3_8py-source.html">antlr3.py</a>.</p>
<hr><h2>Member Function Documentation</h2>
<a class="anchor" name="7c332b3f6930dc4e35173a036730d9af"></a><!-- doxytag: member="antlr3::TokenRewriteStream::__init__" ref="7c332b3f6930dc4e35173a036730d9af" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def antlr3.TokenRewriteStream.__init__           </td>
          <td>(</td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>tokenSource</em> = <code>None</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>channel</em> = <code><a class="el" href="namespaceantlr3.html#1dc3ab7cca55610a7a3e33545c75e6de">DEFAULT_CHANNEL</a></code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>tokenSource</em>&nbsp;</td><td>A <a class="el" href="classantlr3_1_1_token_source.html" title="Abstract baseclass for token producers.">TokenSource</a> instance (usually a <a class="el" href="classantlr3_1_1_lexer.html" title="Baseclass for generated lexer classes.">Lexer</a>) to pull the tokens from.</td></tr>
    <tr><td valign="top"></td><td valign="top"><em>channel</em>&nbsp;</td><td>Skip tokens on any channel but this one; this is how we skip whitespace... </td></tr>
  </table>
</dl>

<p>Reimplemented from <a class="el" href="classantlr3_1_1_common_token_stream.html#7383fe1cf5fa5d787205fae665a75d25">antlr3.CommonTokenStream</a>.</p>

<p>Definition at line <a class="el" href="antlr3_8py-source.html#l02030">2030</a> of file <a class="el" href="antlr3_8py-source.html">antlr3.py</a>.</p>

</div>
</div><p>
<a class="anchor" name="0e119015ca619e0f7b022f0d7632bc20"></a><!-- doxytag: member="antlr3::TokenRewriteStream::rollback" ref="0e119015ca619e0f7b022f0d7632bc20" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def antlr3.TokenRewriteStream.rollback           </td>
          <td>(</td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>args</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Rollback the instruction stream for a program so that the indicated instruction (via instructionIndex) is no longer in the stream. 
<p>
UNTESTED! 
<p>Definition at line <a class="el" href="antlr3_8py-source.html#l02049">2049</a> of file <a class="el" href="antlr3_8py-source.html">antlr3.py</a>.</p>

</div>
</div><p>
<a class="anchor" name="99d8304a9309c1fd4fb0e01bc580f086"></a><!-- doxytag: member="antlr3::TokenRewriteStream::deleteProgram" ref="99d8304a9309c1fd4fb0e01bc580f086" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def antlr3.TokenRewriteStream.deleteProgram           </td>
          <td>(</td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>programName</em> = <code><a class="el" href="classantlr3_1_1_token_rewrite_stream.html#aa81b930220030347aa1edbc0bf8e682">DEFAULT_PROGRAM_NAME</a></code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Reset the program so that no instructions exist. 
<p>

<p>Definition at line <a class="el" href="antlr3_8py-source.html#l02068">2068</a> of file <a class="el" href="antlr3_8py-source.html">antlr3.py</a>.</p>

</div>
</div><p>
<a class="anchor" name="0c89013df76541e88d5ae8a28ec9e41b"></a><!-- doxytag: member="antlr3::TokenRewriteStream::insertAfter" ref="0c89013df76541e88d5ae8a28ec9e41b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def antlr3.TokenRewriteStream.insertAfter           </td>
          <td>(</td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>args</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="antlr3_8py-source.html#l02073">2073</a> of file <a class="el" href="antlr3_8py-source.html">antlr3.py</a>.</p>

</div>
</div><p>
<a class="anchor" name="dd101bc84de130caa87d3294626caaf1"></a><!-- doxytag: member="antlr3::TokenRewriteStream::insertBefore" ref="dd101bc84de130caa87d3294626caaf1" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def antlr3.TokenRewriteStream.insertBefore           </td>
          <td>(</td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>args</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="antlr3_8py-source.html#l02095">2095</a> of file <a class="el" href="antlr3_8py-source.html">antlr3.py</a>.</p>

</div>
</div><p>
<a class="anchor" name="a53e867c2bebcee93a1b7cb000ce40dc"></a><!-- doxytag: member="antlr3::TokenRewriteStream::replace" ref="a53e867c2bebcee93a1b7cb000ce40dc" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def antlr3.TokenRewriteStream.replace           </td>
          <td>(</td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>args</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="antlr3_8py-source.html#l02118">2118</a> of file <a class="el" href="antlr3_8py-source.html">antlr3.py</a>.</p>

</div>
</div><p>
<a class="anchor" name="fb0bc761bf06f424cfea9c37d064eb9e"></a><!-- doxytag: member="antlr3::TokenRewriteStream::delete" ref="fb0bc761bf06f424cfea9c37d064eb9e" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def antlr3.TokenRewriteStream.delete           </td>
          <td>(</td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>args</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="antlr3_8py-source.html#l02158">2158</a> of file <a class="el" href="antlr3_8py-source.html">antlr3.py</a>.</p>

</div>
</div><p>
<a class="anchor" name="8a3354ceb6358794a9cff90d7625b23f"></a><!-- doxytag: member="antlr3::TokenRewriteStream::getLastRewriteTokenIndex" ref="8a3354ceb6358794a9cff90d7625b23f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def antlr3.TokenRewriteStream.getLastRewriteTokenIndex           </td>
          <td>(</td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>programName</em> = <code><a class="el" href="classantlr3_1_1_token_rewrite_stream.html#aa81b930220030347aa1edbc0bf8e682">DEFAULT_PROGRAM_NAME</a></code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="antlr3_8py-source.html#l02162">2162</a> of file <a class="el" href="antlr3_8py-source.html">antlr3.py</a>.</p>

</div>
</div><p>
<a class="anchor" name="85c259099df7caddce305832f08030de"></a><!-- doxytag: member="antlr3::TokenRewriteStream::setLastRewriteTokenIndex" ref="85c259099df7caddce305832f08030de" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def antlr3.TokenRewriteStream.setLastRewriteTokenIndex           </td>
          <td>(</td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>programName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>i</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="antlr3_8py-source.html#l02166">2166</a> of file <a class="el" href="antlr3_8py-source.html">antlr3.py</a>.</p>

</div>
</div><p>
<a class="anchor" name="efb3cf072db2dc913fdc76fed73046a1"></a><!-- doxytag: member="antlr3::TokenRewriteStream::getProgram" ref="efb3cf072db2dc913fdc76fed73046a1" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def antlr3.TokenRewriteStream.getProgram           </td>
          <td>(</td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>name</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="antlr3_8py-source.html#l02170">2170</a> of file <a class="el" href="antlr3_8py-source.html">antlr3.py</a>.</p>

</div>
</div><p>
<a class="anchor" name="511721eeb8579c127bee6ba8067aac8d"></a><!-- doxytag: member="antlr3::TokenRewriteStream::initializeProgram" ref="511721eeb8579c127bee6ba8067aac8d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def antlr3.TokenRewriteStream.initializeProgram           </td>
          <td>(</td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>name</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="antlr3_8py-source.html#l02178">2178</a> of file <a class="el" href="antlr3_8py-source.html">antlr3.py</a>.</p>

</div>
</div><p>
<a class="anchor" name="0221e67961412ec70417191dcc176d9c"></a><!-- doxytag: member="antlr3::TokenRewriteStream::toOriginalString" ref="0221e67961412ec70417191dcc176d9c" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def antlr3.TokenRewriteStream.toOriginalString           </td>
          <td>(</td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>start</em> = <code>None</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>end</em> = <code>None</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="antlr3_8py-source.html#l02184">2184</a> of file <a class="el" href="antlr3_8py-source.html">antlr3.py</a>.</p>

</div>
</div><p>
<a class="anchor" name="7c5a7d74c3849c00fd3bfc5a0a6884b1"></a><!-- doxytag: member="antlr3::TokenRewriteStream::toString" ref="7c5a7d74c3849c00fd3bfc5a0a6884b1" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def antlr3.TokenRewriteStream.toString           </td>
          <td>(</td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>args</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="antlr3_8py-source.html#l02199">2199</a> of file <a class="el" href="antlr3_8py-source.html">antlr3.py</a>.</p>

</div>
</div><p>
<a class="anchor" name="d84a6342573b28f0fe78cb1ba554b021"></a><!-- doxytag: member="antlr3::TokenRewriteStream::reduceToSingleOperationPerIndex" ref="d84a6342573b28f0fe78cb1ba554b021" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def antlr3.TokenRewriteStream.reduceToSingleOperationPerIndex           </td>
          <td>(</td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>rewrites</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
We need to combine operations and report invalid operations (like overlapping replaces that are not completed nested). 
<p>
Inserts to same index need to be combined etc... Here are the cases:<p>
I.i.u I.j.v leave alone, nonoverlapping I.i.u I.i.v combine: Iivu<p>
R.i-j.u R.x-y.v | i-j in x-y delete first R R.i-j.u R.i-j.v delete first R R.i-j.u R.x-y.v | x-y in i-j ERROR R.i-j.u R.x-y.v | boundaries overlap ERROR<p>
I.i.u R.x-y.v | i in x-y delete I I.i.u R.x-y.v | i not in x-y leave alone, nonoverlapping R.x-y.v I.i.u | i in x-y ERROR R.x-y.v I.x.u R.x-y.uv (combine, delete I) R.x-y.v I.i.u | i not in x-y leave alone, nonoverlapping<p>
I.i.u = insert u before op @ index i R.x-y.u = replace x-y indexed tokens with u<p>
First we need to examine replaces. For any replace op:<p>
1. wipe out any insertions before op within that range. 2. Drop any replace op before that is contained completely within that range. 3. Throw exception upon boundary overlap with any previous replace.<p>
Then we can deal with inserts:<p>
1. for any inserts to same index, combine even if not adjacent. 2. for any prior replace with same left boundary, combine this insert with replace and delete this replace. 3. throw exception if index in same range as previous replace<p>
Don't actually delete; make op null in list. Easier to walk list. Later we can throw as we add to index -&gt; op map.<p>
Note that I.2 R.2-2 will wipe out I.2 even though, technically, the inserted stuff would be before the replace range. But, if you add tokens in front of a method body '{' and then delete the method body, I think the stuff before the '{' you added should disappear too.<p>
Return a map from token index to operation. 
<p>Definition at line <a class="el" href="antlr3_8py-source.html#l02324">2324</a> of file <a class="el" href="antlr3_8py-source.html">antlr3.py</a>.</p>

</div>
</div><p>
<a class="anchor" name="9370e95b1937fdf6bcd1f91ecdb06530"></a><!-- doxytag: member="antlr3::TokenRewriteStream::catOpText" ref="9370e95b1937fdf6bcd1f91ecdb06530" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def antlr3.TokenRewriteStream.catOpText           </td>
          <td>(</td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>a</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>b</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="antlr3_8py-source.html#l02396">2396</a> of file <a class="el" href="antlr3_8py-source.html">antlr3.py</a>.</p>

</div>
</div><p>
<a class="anchor" name="1ee79bb7a45cca1097a18b6bd055a54c"></a><!-- doxytag: member="antlr3::TokenRewriteStream::getKindOfOps" ref="1ee79bb7a45cca1097a18b6bd055a54c" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def antlr3.TokenRewriteStream.getKindOfOps           </td>
          <td>(</td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>rewrites</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>kind</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>before</em> = <code>None</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="antlr3_8py-source.html#l02406">2406</a> of file <a class="el" href="antlr3_8py-source.html">antlr3.py</a>.</p>

</div>
</div><p>
<a class="anchor" name="e98ce92ef2d20919d58157e1cbb95515"></a><!-- doxytag: member="antlr3::TokenRewriteStream::toDebugString" ref="e98ce92ef2d20919d58157e1cbb95515" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def antlr3.TokenRewriteStream.toDebugString           </td>
          <td>(</td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>start</em> = <code>None</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>end</em> = <code>None</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="antlr3_8py-source.html#l02420">2420</a> of file <a class="el" href="antlr3_8py-source.html">antlr3.py</a>.</p>

</div>
</div><p>
<hr><h2>Member Data Documentation</h2>
<a class="anchor" name="aa81b930220030347aa1edbc0bf8e682"></a><!-- doxytag: member="antlr3::TokenRewriteStream::DEFAULT_PROGRAM_NAME" ref="aa81b930220030347aa1edbc0bf8e682" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">string <a class="el" href="classantlr3_1_1_token_rewrite_stream.html#aa81b930220030347aa1edbc0bf8e682">antlr3.TokenRewriteStream.DEFAULT_PROGRAM_NAME</a> = &quot;default&quot;<code> [static]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="antlr3_8py-source.html#l02027">2027</a> of file <a class="el" href="antlr3_8py-source.html">antlr3.py</a>.</p>

</div>
</div><p>
<a class="anchor" name="422c887ca04c05773792c23669a3fa52"></a><!-- doxytag: member="antlr3::TokenRewriteStream::MIN_TOKEN_INDEX" ref="422c887ca04c05773792c23669a3fa52" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classantlr3_1_1_token_rewrite_stream.html#422c887ca04c05773792c23669a3fa52">antlr3.TokenRewriteStream.MIN_TOKEN_INDEX</a> = 0<code> [static]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="antlr3_8py-source.html#l02028">2028</a> of file <a class="el" href="antlr3_8py-source.html">antlr3.py</a>.</p>

</div>
</div><p>
<a class="anchor" name="33b787c7519c68129b72d0789c9a88e8"></a><!-- doxytag: member="antlr3::TokenRewriteStream::__str__" ref="33b787c7519c68129b72d0789c9a88e8" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classantlr3_1_1_token_rewrite_stream.html#33b787c7519c68129b72d0789c9a88e8">antlr3.TokenRewriteStream.__str__</a> = toString<code> [static, private]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="antlr3_8py-source.html#l02274">2274</a> of file <a class="el" href="antlr3_8py-source.html">antlr3.py</a>.</p>

</div>
</div><p>
<a class="anchor" name="d9af9757501a0560aac563d4310b8d50"></a><!-- doxytag: member="antlr3::TokenRewriteStream::programs" ref="d9af9757501a0560aac563d4310b8d50" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classantlr3_1_1_token_rewrite_stream.html#d9af9757501a0560aac563d4310b8d50">antlr3.TokenRewriteStream.programs</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="antlr3_8py-source.html#l02036">2036</a> of file <a class="el" href="antlr3_8py-source.html">antlr3.py</a>.</p>

</div>
</div><p>
<a class="anchor" name="a71d0a5e1dc95d60a7daf2eb8e631718"></a><!-- doxytag: member="antlr3::TokenRewriteStream::lastRewriteTokenIndexes" ref="a71d0a5e1dc95d60a7daf2eb8e631718" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classantlr3_1_1_token_rewrite_stream.html#a71d0a5e1dc95d60a7daf2eb8e631718">antlr3.TokenRewriteStream.lastRewriteTokenIndexes</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="antlr3_8py-source.html#l02040">2040</a> of file <a class="el" href="antlr3_8py-source.html">antlr3.py</a>.</p>

</div>
</div><p>
<hr>The documentation for this class was generated from the following file:<ul>
<li><a class="el" href="antlr3_8py-source.html">antlr3.py</a></ul>
</div>
<hr size="1"><address style="text-align: right;"><small>Generated on Mon Nov 29 17:24:28 2010 for ANTLR Python API by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.5 </small></address>
</body>
</html>
