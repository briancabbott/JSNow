<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>ANTLR Python API: antlr3/tree.py Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.5 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="namespaces.html"><span>Packages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
<h1>antlr3/tree.py</h1><a href="tree_8py.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a><a class="code" href="namespaceantlr3_1_1tree.html">00001</a> <span class="comment">##</span>
<a name="l00002"></a>00002 <span class="comment">#  @package antlr3.tree</span>
<a name="l00003"></a>00003 <span class="comment"># @brief ANTLR3 runtime package, tree module</span>
<a name="l00004"></a>00004 <span class="comment"># </span>
<a name="l00005"></a>00005 <span class="comment"># This module contains all support classes for AST construction and tree parsers.</span>
<a name="l00006"></a>00006 <span class="comment"># </span>
<a name="l00007"></a>00007 <span class="comment"># </span>
<a name="l00008"></a>00008 
<a name="l00009"></a>00009 <span class="comment"># begin[licence]</span>
<a name="l00010"></a>00010 <span class="comment">#</span>
<a name="l00011"></a>00011 <span class="comment"># [The "BSD licence"]</span>
<a name="l00012"></a>00012 <span class="comment"># Copyright (c) 2005-2008 Terence Parr</span>
<a name="l00013"></a>00013 <span class="comment"># All rights reserved.</span>
<a name="l00014"></a>00014 <span class="comment">#</span>
<a name="l00015"></a>00015 <span class="comment"># Redistribution and use in source and binary forms, with or without</span>
<a name="l00016"></a>00016 <span class="comment"># modification, are permitted provided that the following conditions</span>
<a name="l00017"></a>00017 <span class="comment"># are met:</span>
<a name="l00018"></a>00018 <span class="comment"># 1. Redistributions of source code must retain the above copyright</span>
<a name="l00019"></a>00019 <span class="comment">#    notice, this list of conditions and the following disclaimer.</span>
<a name="l00020"></a>00020 <span class="comment"># 2. Redistributions in binary form must reproduce the above copyright</span>
<a name="l00021"></a>00021 <span class="comment">#    notice, this list of conditions and the following disclaimer in the</span>
<a name="l00022"></a>00022 <span class="comment">#    documentation and/or other materials provided with the distribution.</span>
<a name="l00023"></a>00023 <span class="comment"># 3. The name of the author may not be used to endorse or promote products</span>
<a name="l00024"></a>00024 <span class="comment">#    derived from this software without specific prior written permission.</span>
<a name="l00025"></a>00025 <span class="comment">#</span>
<a name="l00026"></a>00026 <span class="comment"># THIS SOFTWARE IS PROVIDED BY THE AUTHOR ``AS IS'' AND ANY EXPRESS OR</span>
<a name="l00027"></a>00027 <span class="comment"># IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES</span>
<a name="l00028"></a>00028 <span class="comment"># OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.</span>
<a name="l00029"></a>00029 <span class="comment"># IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY DIRECT, INDIRECT,</span>
<a name="l00030"></a>00030 <span class="comment"># INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT</span>
<a name="l00031"></a>00031 <span class="comment"># NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,</span>
<a name="l00032"></a>00032 <span class="comment"># DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY</span>
<a name="l00033"></a>00033 <span class="comment"># THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT</span>
<a name="l00034"></a>00034 <span class="comment"># (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF</span>
<a name="l00035"></a>00035 <span class="comment"># THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.</span>
<a name="l00036"></a>00036 <span class="comment">#</span>
<a name="l00037"></a>00037 <span class="comment"># end[licence]</span>
<a name="l00038"></a>00038 
<a name="l00039"></a>00039 <span class="comment"># lot's of docstrings are missing, don't complain for now...</span>
<a name="l00040"></a>00040 <span class="comment"># pylint: disable-msg=C0111</span>
<a name="l00041"></a>00041 
<a name="l00042"></a>00042 <span class="keyword">import</span> re
<a name="l00043"></a>00043 
<a name="l00044"></a>00044 <span class="keyword">from</span> antlr3.constants <span class="keyword">import</span> UP, DOWN, EOF, INVALID_TOKEN_TYPE
<a name="l00045"></a>00045 <span class="keyword">from</span> antlr3.recognizers <span class="keyword">import</span> BaseRecognizer, RuleReturnScope
<a name="l00046"></a>00046 <span class="keyword">from</span> antlr3.streams <span class="keyword">import</span> IntStream
<a name="l00047"></a>00047 <span class="keyword">from</span> antlr3.tokens <span class="keyword">import</span> CommonToken, Token, INVALID_TOKEN
<a name="l00048"></a>00048 <span class="keyword">from</span> antlr3.exceptions <span class="keyword">import</span> MismatchedTreeNodeException, \
<a name="l00049"></a>00049      MissingTokenException, UnwantedTokenException, MismatchedTokenException, \
<a name="l00050"></a>00050      NoViableAltException
<a name="l00051"></a>00051 
<a name="l00052"></a>00052 
<a name="l00053"></a>00053 <span class="comment">############################################################################</span>
<a name="l00054"></a>00054 <span class="comment">#</span>
<a name="l00055"></a>00055 <span class="comment"># tree related exceptions</span>
<a name="l00056"></a>00056 <span class="comment">#</span>
<a name="l00057"></a>00057 <span class="comment">############################################################################</span>
<a name="l00058"></a>00058 
<a name="l00059"></a>00059 
<a name="l00060"></a>00060 <span class="comment">##</span>
<a name="l00061"></a>00061 <span class="comment"># </span>
<a name="l00062"></a>00062 <span class="comment">#     @brief Base class for all exceptions thrown during AST rewrite construction.</span>
<a name="l00063"></a>00063 <span class="comment"># </span>
<a name="l00064"></a>00064 <span class="comment">#     This signifies a case where the cardinality of two or more elements</span>
<a name="l00065"></a>00065 <span class="comment">#     in a subrule are different: (ID INT)+ where |ID|!=|INT|</span>
<a name="l00066"></a>00066 <span class="comment">#     </span>
<a name="l00067"></a><a class="code" href="classantlr3_1_1tree_1_1_rewrite_cardinality_exception.html">00067</a> <span class="keyword">class </span><a class="code" href="classantlr3_1_1tree_1_1_rewrite_cardinality_exception.html" title="Base class for all exceptions thrown during AST rewrite construction.">RewriteCardinalityException</a>(RuntimeError):
<a name="l00068"></a>00068 
<a name="l00069"></a><a class="code" href="classantlr3_1_1tree_1_1_rewrite_cardinality_exception.html#23bf610099d73257e2904179c38bf5c2">00069</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_rewrite_cardinality_exception.html#23bf610099d73257e2904179c38bf5c2">__init__</a>(self, elementDescription):
<a name="l00070"></a>00070         RuntimeError.__init__(self, elementDescription)
<a name="l00071"></a>00071 
<a name="l00072"></a><a class="code" href="classantlr3_1_1tree_1_1_rewrite_cardinality_exception.html#a995d348618df5db9edd4f9488382389">00072</a>         self.<a class="code" href="classantlr3_1_1tree_1_1_rewrite_cardinality_exception.html#a995d348618df5db9edd4f9488382389">elementDescription</a> = elementDescription
<a name="l00073"></a>00073 
<a name="l00074"></a>00074 
<a name="l00075"></a><a class="code" href="classantlr3_1_1tree_1_1_rewrite_cardinality_exception.html#300e6d18c3ee93e5d93720f41aafab7e">00075</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_rewrite_cardinality_exception.html#300e6d18c3ee93e5d93720f41aafab7e">getMessage</a>(self):
<a name="l00076"></a>00076         <span class="keywordflow">return</span> self.<a class="code" href="classantlr3_1_1tree_1_1_rewrite_cardinality_exception.html#a995d348618df5db9edd4f9488382389">elementDescription</a>
<a name="l00077"></a>00077 
<a name="l00078"></a>00078 
<a name="l00079"></a>00079 <span class="comment">##</span>
<a name="l00080"></a>00080 <span class="comment"># @brief No elements within a (...)+ in a rewrite rule</span>
<a name="l00081"></a><a class="code" href="classantlr3_1_1tree_1_1_rewrite_early_exit_exception.html">00081</a> <span class="keyword">class </span><a class="code" href="classantlr3_1_1tree_1_1_rewrite_early_exit_exception.html" title="No elements within a (.">RewriteEarlyExitException</a>(<a class="code" href="classantlr3_1_1tree_1_1_rewrite_cardinality_exception.html" title="Base class for all exceptions thrown during AST rewrite construction.">RewriteCardinalityException</a>):
<a name="l00082"></a>00082 
<a name="l00083"></a><a class="code" href="classantlr3_1_1tree_1_1_rewrite_early_exit_exception.html#66e526757345679523c1314fea4d2f8c">00083</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_rewrite_early_exit_exception.html#66e526757345679523c1314fea4d2f8c">__init__</a>(self, elementDescription=None):
<a name="l00084"></a>00084         RewriteCardinalityException.__init__(self, elementDescription)
<a name="l00085"></a>00085 
<a name="l00086"></a>00086 
<a name="l00087"></a>00087 <span class="comment">##</span>
<a name="l00088"></a>00088 <span class="comment"># </span>
<a name="l00089"></a>00089 <span class="comment">#     @brief Ref to ID or expr but no tokens in ID stream or subtrees in expr stream</span>
<a name="l00090"></a>00090 <span class="comment">#     </span>
<a name="l00091"></a><a class="code" href="classantlr3_1_1tree_1_1_rewrite_empty_stream_exception.html">00091</a> <span class="keyword">class </span><a class="code" href="classantlr3_1_1tree_1_1_rewrite_empty_stream_exception.html" title="Ref to ID or expr but no tokens in ID stream or subtrees in expr stream.">RewriteEmptyStreamException</a>(<a class="code" href="classantlr3_1_1tree_1_1_rewrite_cardinality_exception.html" title="Base class for all exceptions thrown during AST rewrite construction.">RewriteCardinalityException</a>):
<a name="l00092"></a>00092 
<a name="l00093"></a>00093     <span class="keywordflow">pass</span>
<a name="l00094"></a>00094 
<a name="l00095"></a>00095 
<a name="l00096"></a>00096 <span class="comment">############################################################################</span>
<a name="l00097"></a>00097 <span class="comment">#</span>
<a name="l00098"></a>00098 <span class="comment"># basic Tree and TreeAdaptor interfaces</span>
<a name="l00099"></a>00099 <span class="comment">#</span>
<a name="l00100"></a>00100 <span class="comment">############################################################################</span>
<a name="l00101"></a>00101 
<a name="l00102"></a>00102 <span class="comment">##</span>
<a name="l00103"></a>00103 <span class="comment"># </span>
<a name="l00104"></a>00104 <span class="comment">#     @brief Abstract baseclass for tree nodes.</span>
<a name="l00105"></a>00105 <span class="comment">#     </span>
<a name="l00106"></a>00106 <span class="comment">#     What does a tree look like?  ANTLR has a number of support classes</span>
<a name="l00107"></a>00107 <span class="comment">#     such as CommonTreeNodeStream that work on these kinds of trees.  You</span>
<a name="l00108"></a>00108 <span class="comment">#     don't have to make your trees implement this interface, but if you do,</span>
<a name="l00109"></a>00109 <span class="comment">#     you'll be able to use more support code.</span>
<a name="l00110"></a>00110 <span class="comment"># </span>
<a name="l00111"></a>00111 <span class="comment">#     NOTE: When constructing trees, ANTLR can build any kind of tree; it can</span>
<a name="l00112"></a>00112 <span class="comment">#     even use Token objects as trees if you add a child list to your tokens.</span>
<a name="l00113"></a>00113 <span class="comment">#     </span>
<a name="l00114"></a>00114 <span class="comment">#     This is a tree node without any payload; just navigation and factory stuff.</span>
<a name="l00115"></a>00115 <span class="comment">#     </span>
<a name="l00116"></a><a class="code" href="classantlr3_1_1tree_1_1_tree.html">00116</a> <span class="keyword">class </span><a class="code" href="classantlr3_1_1tree_1_1_tree.html" title="Abstract baseclass for tree nodes.">Tree</a>(object):
<a name="l00117"></a>00117 
<a name="l00118"></a>00118 
<a name="l00119"></a><a class="code" href="classantlr3_1_1tree_1_1_tree.html#7ba6e931813592accbb1905c97e17c15">00119</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_tree.html#7ba6e931813592accbb1905c97e17c15">getChild</a>(self, i):
<a name="l00120"></a>00120         <span class="keywordflow">raise</span> NotImplementedError
<a name="l00121"></a>00121     
<a name="l00122"></a>00122 
<a name="l00123"></a><a class="code" href="classantlr3_1_1tree_1_1_tree.html#e7c44b790a8004f88e4d0245401354bb">00123</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_tree.html#e7c44b790a8004f88e4d0245401354bb">getChildCount</a>(self):
<a name="l00124"></a>00124         <span class="keywordflow">raise</span> NotImplementedError
<a name="l00125"></a>00125     
<a name="l00126"></a>00126 
<a name="l00127"></a>00127     <span class="comment">##</span>
<a name="l00128"></a>00128     <span class="comment"># Tree tracks parent and child index now &gt; 3.0</span>
<a name="l00129"></a><a class="code" href="classantlr3_1_1tree_1_1_tree.html#11d2a84e613edfb4f6c99ba6bb6902c6">00129</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_tree.html#11d2a84e613edfb4f6c99ba6bb6902c6" title="Tree tracks parent and child index now &amp;gt; 3.0.">getParent</a>(self):
<a name="l00130"></a>00130 
<a name="l00131"></a>00131         <span class="keywordflow">raise</span> NotImplementedError
<a name="l00132"></a>00132     
<a name="l00133"></a>00133     <span class="comment">##</span>
<a name="l00134"></a>00134     <span class="comment"># Tree tracks parent and child index now &gt; 3.0</span>
<a name="l00135"></a><a class="code" href="classantlr3_1_1tree_1_1_tree.html#585ce3a65f5accc292ab6cc8694db928">00135</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_tree.html#585ce3a65f5accc292ab6cc8694db928" title="Tree tracks parent and child index now &amp;gt; 3.0.">setParent</a>(self, t):
<a name="l00136"></a>00136 
<a name="l00137"></a>00137         <span class="keywordflow">raise</span> NotImplementedError
<a name="l00138"></a>00138     
<a name="l00139"></a>00139 
<a name="l00140"></a>00140     <span class="comment">##</span>
<a name="l00141"></a>00141     <span class="comment"># Walk upwards looking for ancestor with this token type.</span>
<a name="l00142"></a><a class="code" href="classantlr3_1_1tree_1_1_tree.html#38fe2e1814cccfe88e8dab54a4001486">00142</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_tree.html#38fe2e1814cccfe88e8dab54a4001486" title="Walk upwards looking for ancestor with this token type.">hasAncestor</a>(self, ttype):
<a name="l00143"></a>00143 
<a name="l00144"></a>00144         <span class="keywordflow">raise</span> NotImplementedError
<a name="l00145"></a>00145 
<a name="l00146"></a>00146     <span class="comment">##</span>
<a name="l00147"></a>00147     <span class="comment"># Walk upwards and get first ancestor with this token type.</span>
<a name="l00148"></a><a class="code" href="classantlr3_1_1tree_1_1_tree.html#fdc7ba986e44a8e0b5e48fecbdd58492">00148</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_tree.html#fdc7ba986e44a8e0b5e48fecbdd58492" title="Walk upwards and get first ancestor with this token type.">getAncestor</a>(self, ttype):
<a name="l00149"></a>00149 
<a name="l00150"></a>00150         <span class="keywordflow">raise</span> NotImplementedError
<a name="l00151"></a>00151 
<a name="l00152"></a>00152     <span class="comment">##</span>
<a name="l00153"></a>00153     <span class="comment"># Return a list of all ancestors of this node.</span>
<a name="l00154"></a>00154     <span class="comment"># </span>
<a name="l00155"></a>00155     <span class="comment">#         The first node of list is the root and the last is the parent of</span>
<a name="l00156"></a>00156     <span class="comment">#         this node.</span>
<a name="l00157"></a>00157     <span class="comment">#         </span>
<a name="l00158"></a><a class="code" href="classantlr3_1_1tree_1_1_tree.html#d0532ddba285a038c4b34fc8626cad68">00158</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_tree.html#d0532ddba285a038c4b34fc8626cad68" title="Return a list of all ancestors of this node.">getAncestors</a>(self):
<a name="l00159"></a>00159 
<a name="l00160"></a>00160         <span class="keywordflow">raise</span> NotImplementedError
<a name="l00161"></a>00161 
<a name="l00162"></a>00162 
<a name="l00163"></a>00163     <span class="comment">##</span>
<a name="l00164"></a>00164     <span class="comment"># This node is what child index? 0..n-1</span>
<a name="l00165"></a><a class="code" href="classantlr3_1_1tree_1_1_tree.html#480ff2ae58fcf56c7dc5af7ee8c05cca">00165</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_tree.html#480ff2ae58fcf56c7dc5af7ee8c05cca" title="This node is what child index? 0.">getChildIndex</a>(self):
<a name="l00166"></a>00166 
<a name="l00167"></a>00167         <span class="keywordflow">raise</span> NotImplementedError
<a name="l00168"></a>00168         
<a name="l00169"></a>00169     <span class="comment">##</span>
<a name="l00170"></a>00170     <span class="comment"># This node is what child index? 0..n-1</span>
<a name="l00171"></a><a class="code" href="classantlr3_1_1tree_1_1_tree.html#b76182629c7a52b26a4d55871d141b26">00171</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_tree.html#b76182629c7a52b26a4d55871d141b26" title="This node is what child index? 0.">setChildIndex</a>(self, index):
<a name="l00172"></a>00172 
<a name="l00173"></a>00173         <span class="keywordflow">raise</span> NotImplementedError
<a name="l00174"></a>00174         
<a name="l00175"></a>00175 
<a name="l00176"></a>00176     <span class="comment">##</span>
<a name="l00177"></a>00177     <span class="comment"># Set the parent and child index values for all children</span>
<a name="l00178"></a><a class="code" href="classantlr3_1_1tree_1_1_tree.html#cbd8dc3d51b0cf71449df5720d22a8dd">00178</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_tree.html#cbd8dc3d51b0cf71449df5720d22a8dd" title="Set the parent and child index values for all children.">freshenParentAndChildIndexes</a>(self):
<a name="l00179"></a>00179         
<a name="l00180"></a>00180         <span class="keywordflow">raise</span> NotImplementedError
<a name="l00181"></a>00181 
<a name="l00182"></a>00182         
<a name="l00183"></a>00183     <span class="comment">##</span>
<a name="l00184"></a>00184     <span class="comment"># </span>
<a name="l00185"></a>00185     <span class="comment">#         Add t as a child to this node.  If t is null, do nothing.  If t</span>
<a name="l00186"></a>00186     <span class="comment">#         is nil, add all children of t to this' children.</span>
<a name="l00187"></a>00187     <span class="comment">#         </span>
<a name="l00188"></a><a class="code" href="classantlr3_1_1tree_1_1_tree.html#7a597d7dd301263fcc397fed377410cb">00188</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_tree.html#7a597d7dd301263fcc397fed377410cb" title="Add t as a child to this node.">addChild</a>(self, t):
<a name="l00189"></a>00189 
<a name="l00190"></a>00190         <span class="keywordflow">raise</span> NotImplementedError
<a name="l00191"></a>00191     
<a name="l00192"></a>00192 
<a name="l00193"></a>00193     <span class="comment">##</span>
<a name="l00194"></a>00194     <span class="comment"># Set ith child (0..n-1) to t; t must be non-null and non-nil node</span>
<a name="l00195"></a><a class="code" href="classantlr3_1_1tree_1_1_tree.html#b177812f74db09fef79d5921e946ae50">00195</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_tree.html#b177812f74db09fef79d5921e946ae50" title="Set ith child (0.">setChild</a>(self, i, t):
<a name="l00196"></a>00196 
<a name="l00197"></a>00197         <span class="keywordflow">raise</span> NotImplementedError
<a name="l00198"></a>00198 
<a name="l00199"></a>00199             
<a name="l00200"></a><a class="code" href="classantlr3_1_1tree_1_1_tree.html#db895c5934330f88e49f92b12ee88e97">00200</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_tree.html#db895c5934330f88e49f92b12ee88e97">deleteChild</a>(self, i):
<a name="l00201"></a>00201         <span class="keywordflow">raise</span> NotImplementedError
<a name="l00202"></a>00202         
<a name="l00203"></a>00203  
<a name="l00204"></a>00204     <span class="comment">##</span>
<a name="l00205"></a>00205     <span class="comment"># </span>
<a name="l00206"></a>00206     <span class="comment">#         Delete children from start to stop and replace with t even if t is</span>
<a name="l00207"></a>00207     <span class="comment">#         a list (nil-root tree).  num of children can increase or decrease.</span>
<a name="l00208"></a>00208     <span class="comment">#         For huge child lists, inserting children can force walking rest of</span>
<a name="l00209"></a>00209     <span class="comment">#         children to set their childindex; could be slow.</span>
<a name="l00210"></a>00210     <span class="comment">#         </span>
<a name="l00211"></a><a class="code" href="classantlr3_1_1tree_1_1_tree.html#77bf26395658693723ea0612da8fc9af">00211</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_tree.html#77bf26395658693723ea0612da8fc9af" title="Delete children from start to stop and replace with t even if t is a list (nil-root...">replaceChildren</a>(self, startChildIndex, stopChildIndex, t):
<a name="l00212"></a>00212 
<a name="l00213"></a>00213         <span class="keywordflow">raise</span> NotImplementedError
<a name="l00214"></a>00214 
<a name="l00215"></a>00215 
<a name="l00216"></a>00216     <span class="comment">##</span>
<a name="l00217"></a>00217     <span class="comment"># </span>
<a name="l00218"></a>00218     <span class="comment">#         Indicates the node is a nil node but may still have children, meaning</span>
<a name="l00219"></a>00219     <span class="comment">#         the tree is a flat list.</span>
<a name="l00220"></a>00220     <span class="comment">#         </span>
<a name="l00221"></a><a class="code" href="classantlr3_1_1tree_1_1_tree.html#a51e9dcece652866e97872060440e7a2">00221</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_tree.html#a51e9dcece652866e97872060440e7a2" title="Indicates the node is a nil node but may still have children, meaning the tree is...">isNil</a>(self):
<a name="l00222"></a>00222 
<a name="l00223"></a>00223         <span class="keywordflow">raise</span> NotImplementedError
<a name="l00224"></a>00224     
<a name="l00225"></a>00225 
<a name="l00226"></a>00226     <span class="comment">##</span>
<a name="l00227"></a>00227     <span class="comment"># </span>
<a name="l00228"></a>00228     <span class="comment">#         What is the smallest token index (indexing from 0) for this node</span>
<a name="l00229"></a>00229     <span class="comment">#            and its children?</span>
<a name="l00230"></a>00230     <span class="comment">#         </span>
<a name="l00231"></a><a class="code" href="classantlr3_1_1tree_1_1_tree.html#161b3052809bf63b4658362d482a54e4">00231</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_tree.html#161b3052809bf63b4658362d482a54e4" title="What is the smallest token index (indexing from 0) for this node and its children...">getTokenStartIndex</a>(self):
<a name="l00232"></a>00232 
<a name="l00233"></a>00233         <span class="keywordflow">raise</span> NotImplementedError
<a name="l00234"></a>00234 
<a name="l00235"></a>00235 
<a name="l00236"></a><a class="code" href="classantlr3_1_1tree_1_1_tree.html#faeb20ff83dfb97d3dbd4a9196c48a37">00236</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_tree.html#faeb20ff83dfb97d3dbd4a9196c48a37">setTokenStartIndex</a>(self, index):
<a name="l00237"></a>00237         <span class="keywordflow">raise</span> NotImplementedError
<a name="l00238"></a>00238 
<a name="l00239"></a>00239 
<a name="l00240"></a>00240     <span class="comment">##</span>
<a name="l00241"></a>00241     <span class="comment"># </span>
<a name="l00242"></a>00242     <span class="comment">#         What is the largest token index (indexing from 0) for this node</span>
<a name="l00243"></a>00243     <span class="comment">#         and its children?</span>
<a name="l00244"></a>00244     <span class="comment">#         </span>
<a name="l00245"></a><a class="code" href="classantlr3_1_1tree_1_1_tree.html#8340aa8509cb036df6912b357be0578a">00245</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_tree.html#8340aa8509cb036df6912b357be0578a" title="What is the largest token index (indexing from 0) for this node and its children...">getTokenStopIndex</a>(self):
<a name="l00246"></a>00246 
<a name="l00247"></a>00247         <span class="keywordflow">raise</span> NotImplementedError
<a name="l00248"></a>00248 
<a name="l00249"></a>00249 
<a name="l00250"></a><a class="code" href="classantlr3_1_1tree_1_1_tree.html#a24eefa144ba67bf56a077b9ede04fdc">00250</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_tree.html#a24eefa144ba67bf56a077b9ede04fdc">setTokenStopIndex</a>(self, index):
<a name="l00251"></a>00251         <span class="keywordflow">raise</span> NotImplementedError
<a name="l00252"></a>00252 
<a name="l00253"></a>00253 
<a name="l00254"></a><a class="code" href="classantlr3_1_1tree_1_1_tree.html#00f4c191ff674cbb501529ee648cb3db">00254</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_tree.html#00f4c191ff674cbb501529ee648cb3db">dupNode</a>(self):
<a name="l00255"></a>00255         <span class="keywordflow">raise</span> NotImplementedError
<a name="l00256"></a>00256     
<a name="l00257"></a>00257     
<a name="l00258"></a>00258     <span class="comment">##</span>
<a name="l00259"></a>00259     <span class="comment"># Return a token type; needed for tree parsing.</span>
<a name="l00260"></a><a class="code" href="classantlr3_1_1tree_1_1_tree.html#c449bbae9053d9616996ef9d5eac8551">00260</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_tree.html#c449bbae9053d9616996ef9d5eac8551" title="Return a token type; needed for tree parsing.">getType</a>(self):
<a name="l00261"></a>00261 
<a name="l00262"></a>00262         <span class="keywordflow">raise</span> NotImplementedError
<a name="l00263"></a>00263     
<a name="l00264"></a>00264 
<a name="l00265"></a><a class="code" href="classantlr3_1_1tree_1_1_tree.html#d38eb263112889106a95c958ab165f02">00265</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_tree.html#d38eb263112889106a95c958ab165f02">getText</a>(self):
<a name="l00266"></a>00266         <span class="keywordflow">raise</span> NotImplementedError
<a name="l00267"></a>00267     
<a name="l00268"></a>00268 
<a name="l00269"></a>00269     <span class="comment">##</span>
<a name="l00270"></a>00270     <span class="comment"># </span>
<a name="l00271"></a>00271     <span class="comment">#         In case we don't have a token payload, what is the line for errors?</span>
<a name="l00272"></a>00272     <span class="comment">#         </span>
<a name="l00273"></a><a class="code" href="classantlr3_1_1tree_1_1_tree.html#e4fd46c43ff99ef0bd9a1fa49aca4309">00273</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_tree.html#e4fd46c43ff99ef0bd9a1fa49aca4309" title="In case we don&amp;#39;t have a token payload, what is the line for errors?">getLine</a>(self):
<a name="l00274"></a>00274 
<a name="l00275"></a>00275         <span class="keywordflow">raise</span> NotImplementedError
<a name="l00276"></a>00276     
<a name="l00277"></a>00277 
<a name="l00278"></a><a class="code" href="classantlr3_1_1tree_1_1_tree.html#f9a77e760fc2f8339a3b0edae4a0c70f">00278</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_tree.html#f9a77e760fc2f8339a3b0edae4a0c70f">getCharPositionInLine</a>(self):
<a name="l00279"></a>00279         <span class="keywordflow">raise</span> NotImplementedError
<a name="l00280"></a>00280 
<a name="l00281"></a>00281 
<a name="l00282"></a><a class="code" href="classantlr3_1_1tree_1_1_tree.html#789154a28ee4a99ab7cf97fec8cf55fa">00282</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_tree.html#789154a28ee4a99ab7cf97fec8cf55fa">toStringTree</a>(self):
<a name="l00283"></a>00283         <span class="keywordflow">raise</span> NotImplementedError
<a name="l00284"></a>00284 
<a name="l00285"></a>00285 
<a name="l00286"></a><a class="code" href="classantlr3_1_1tree_1_1_tree.html#cbad99ab170f04a7d0e989dfe697fe4b">00286</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_tree.html#cbad99ab170f04a7d0e989dfe697fe4b">toString</a>(self):
<a name="l00287"></a>00287         <span class="keywordflow">raise</span> NotImplementedError
<a name="l00288"></a>00288 
<a name="l00289"></a>00289 
<a name="l00290"></a>00290 
<a name="l00291"></a>00291 <span class="comment">##</span>
<a name="l00292"></a>00292 <span class="comment"># </span>
<a name="l00293"></a>00293 <span class="comment">#     @brief Abstract baseclass for tree adaptors.</span>
<a name="l00294"></a>00294 <span class="comment">#     </span>
<a name="l00295"></a>00295 <span class="comment">#     How to create and navigate trees.  Rather than have a separate factory</span>
<a name="l00296"></a>00296 <span class="comment">#     and adaptor, I've merged them.  Makes sense to encapsulate.</span>
<a name="l00297"></a>00297 <span class="comment"># </span>
<a name="l00298"></a>00298 <span class="comment">#     This takes the place of the tree construction code generated in the</span>
<a name="l00299"></a>00299 <span class="comment">#     generated code in 2.x and the ASTFactory.</span>
<a name="l00300"></a>00300 <span class="comment"># </span>
<a name="l00301"></a>00301 <span class="comment">#     I do not need to know the type of a tree at all so they are all</span>
<a name="l00302"></a>00302 <span class="comment">#     generic Objects.  This may increase the amount of typecasting needed. :(</span>
<a name="l00303"></a>00303 <span class="comment">#     </span>
<a name="l00304"></a><a class="code" href="classantlr3_1_1tree_1_1_tree_adaptor.html">00304</a> <span class="keyword">class </span><a class="code" href="classantlr3_1_1tree_1_1_tree_adaptor.html" title="Abstract baseclass for tree adaptors.">TreeAdaptor</a>(object):
<a name="l00305"></a>00305     
<a name="l00306"></a>00306     <span class="comment"># C o n s t r u c t i o n</span>
<a name="l00307"></a>00307 
<a name="l00308"></a>00308     <span class="comment">##</span>
<a name="l00309"></a>00309     <span class="comment"># </span>
<a name="l00310"></a>00310     <span class="comment">#         Create a tree node from Token object; for CommonTree type trees,</span>
<a name="l00311"></a>00311     <span class="comment">#         then the token just becomes the payload.  This is the most</span>
<a name="l00312"></a>00312     <span class="comment">#         common create call.</span>
<a name="l00313"></a>00313     <span class="comment"># </span>
<a name="l00314"></a>00314     <span class="comment">#         Override if you want another kind of node to be built.</span>
<a name="l00315"></a>00315     <span class="comment">#         </span>
<a name="l00316"></a><a class="code" href="classantlr3_1_1tree_1_1_tree_adaptor.html#682a616c7553335c2f01c0f55fc53bd1">00316</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_tree_adaptor.html#682a616c7553335c2f01c0f55fc53bd1" title="Create a tree node from Token object; for CommonTree type trees, then the token just...">createWithPayload</a>(self, payload):
<a name="l00317"></a>00317 
<a name="l00318"></a>00318         <span class="keywordflow">raise</span> NotImplementedError
<a name="l00319"></a>00319     
<a name="l00320"></a>00320 
<a name="l00321"></a>00321     <span class="comment">##</span>
<a name="l00322"></a>00322     <span class="comment"># Duplicate a single tree node.</span>
<a name="l00323"></a>00323     <span class="comment"># </span>
<a name="l00324"></a>00324     <span class="comment">#         Override if you want another kind of node to be built.</span>
<a name="l00325"></a><a class="code" href="classantlr3_1_1tree_1_1_tree_adaptor.html#5ea3e888660352592a50ead7173d426a">00325</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_tree_adaptor.html#5ea3e888660352592a50ead7173d426a" title="Duplicate a single tree node.">dupNode</a>(self, treeNode):
<a name="l00326"></a>00326 
<a name="l00327"></a>00327         <span class="keywordflow">raise</span> NotImplementedError
<a name="l00328"></a>00328 
<a name="l00329"></a>00329 
<a name="l00330"></a>00330     <span class="comment">##</span>
<a name="l00331"></a>00331     <span class="comment"># Duplicate tree recursively, using dupNode() for each node</span>
<a name="l00332"></a><a class="code" href="classantlr3_1_1tree_1_1_tree_adaptor.html#67b7580e9a8b38a16fda782ce752677e">00332</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_tree_adaptor.html#67b7580e9a8b38a16fda782ce752677e" title="Duplicate tree recursively, using dupNode() for each node.">dupTree</a>(self, tree):
<a name="l00333"></a>00333 
<a name="l00334"></a>00334         <span class="keywordflow">raise</span> NotImplementedError
<a name="l00335"></a>00335 
<a name="l00336"></a>00336 
<a name="l00337"></a>00337     <span class="comment">##</span>
<a name="l00338"></a>00338     <span class="comment"># </span>
<a name="l00339"></a>00339     <span class="comment">#         Return a nil node (an empty but non-null node) that can hold</span>
<a name="l00340"></a>00340     <span class="comment">#         a list of element as the children.  If you want a flat tree (a list)</span>
<a name="l00341"></a>00341     <span class="comment">#         use "t=adaptor.nil(); t.addChild(x); t.addChild(y);"</span>
<a name="l00342"></a>00342     <span class="comment">#         </span>
<a name="l00343"></a><a class="code" href="classantlr3_1_1tree_1_1_tree_adaptor.html#47b53ee1077ddf6c8a11fea98096fe97">00343</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_tree_adaptor.html#47b53ee1077ddf6c8a11fea98096fe97" title="Return a nil node (an empty but non-null node) that can hold a list of element as...">nil</a>(self):
<a name="l00344"></a>00344 
<a name="l00345"></a>00345         <span class="keywordflow">raise</span> NotImplementedError
<a name="l00346"></a>00346 
<a name="l00347"></a>00347 
<a name="l00348"></a>00348     <span class="comment">##</span>
<a name="l00349"></a>00349     <span class="comment"># </span>
<a name="l00350"></a>00350     <span class="comment">#         Return a tree node representing an error.  This node records the</span>
<a name="l00351"></a>00351     <span class="comment">#         tokens consumed during error recovery.  The start token indicates the</span>
<a name="l00352"></a>00352     <span class="comment">#         input symbol at which the error was detected.  The stop token indicates</span>
<a name="l00353"></a>00353     <span class="comment">#         the last symbol consumed during recovery.</span>
<a name="l00354"></a>00354     <span class="comment"># </span>
<a name="l00355"></a>00355     <span class="comment">#         You must specify the input stream so that the erroneous text can</span>
<a name="l00356"></a>00356     <span class="comment">#         be packaged up in the error node.  The exception could be useful</span>
<a name="l00357"></a>00357     <span class="comment">#         to some applications; default implementation stores ptr to it in</span>
<a name="l00358"></a>00358     <span class="comment">#         the CommonErrorNode.</span>
<a name="l00359"></a>00359     <span class="comment"># </span>
<a name="l00360"></a>00360     <span class="comment">#         This only makes sense during token parsing, not tree parsing.</span>
<a name="l00361"></a>00361     <span class="comment">#         Tree parsing should happen only when parsing and tree construction</span>
<a name="l00362"></a>00362     <span class="comment">#         succeed.</span>
<a name="l00363"></a>00363     <span class="comment">#         </span>
<a name="l00364"></a><a class="code" href="classantlr3_1_1tree_1_1_tree_adaptor.html#042c907ffaae55472b118a8f746cc2c8">00364</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_tree_adaptor.html#042c907ffaae55472b118a8f746cc2c8" title="Return a tree node representing an error.">errorNode</a>(self, input, start, stop, exc):
<a name="l00365"></a>00365 
<a name="l00366"></a>00366         <span class="keywordflow">raise</span> NotImplementedError
<a name="l00367"></a>00367 
<a name="l00368"></a>00368 
<a name="l00369"></a>00369     <span class="comment">##</span>
<a name="l00370"></a>00370     <span class="comment"># Is tree considered a nil node used to make lists of child nodes?</span>
<a name="l00371"></a><a class="code" href="classantlr3_1_1tree_1_1_tree_adaptor.html#929a45d4681599627288ddb4e89e59dc">00371</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_tree_adaptor.html#929a45d4681599627288ddb4e89e59dc" title="Is tree considered a nil node used to make lists of child nodes?">isNil</a>(self, tree):
<a name="l00372"></a>00372 
<a name="l00373"></a>00373         <span class="keywordflow">raise</span> NotImplementedError
<a name="l00374"></a>00374 
<a name="l00375"></a>00375 
<a name="l00376"></a>00376     <span class="comment">##</span>
<a name="l00377"></a>00377     <span class="comment"># </span>
<a name="l00378"></a>00378     <span class="comment">#         Add a child to the tree t.  If child is a flat tree (a list), make all</span>
<a name="l00379"></a>00379     <span class="comment">#         in list children of t.  Warning: if t has no children, but child does</span>
<a name="l00380"></a>00380     <span class="comment">#         and child isNil then you can decide it is ok to move children to t via</span>
<a name="l00381"></a>00381     <span class="comment">#         t.children = child.children; i.e., without copying the array.  Just</span>
<a name="l00382"></a>00382     <span class="comment">#         make sure that this is consistent with have the user will build</span>
<a name="l00383"></a>00383     <span class="comment">#         ASTs. Do nothing if t or child is null.</span>
<a name="l00384"></a>00384     <span class="comment">#         </span>
<a name="l00385"></a><a class="code" href="classantlr3_1_1tree_1_1_tree_adaptor.html#8a49f74636934303e0800a8bed6b7c09">00385</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_tree_adaptor.html#8a49f74636934303e0800a8bed6b7c09" title="Add a child to the tree t.">addChild</a>(self, t, child):
<a name="l00386"></a>00386 
<a name="l00387"></a>00387         <span class="keywordflow">raise</span> NotImplementedError
<a name="l00388"></a>00388 
<a name="l00389"></a>00389 
<a name="l00390"></a>00390     <span class="comment">##</span>
<a name="l00391"></a>00391     <span class="comment"># </span>
<a name="l00392"></a>00392     <span class="comment">#         If oldRoot is a nil root, just copy or move the children to newRoot.</span>
<a name="l00393"></a>00393     <span class="comment">#         If not a nil root, make oldRoot a child of newRoot.</span>
<a name="l00394"></a>00394     <span class="comment">#         </span>
<a name="l00395"></a>00395     <span class="comment">#            old=^(nil a b c), new=r yields ^(r a b c)</span>
<a name="l00396"></a>00396     <span class="comment">#            old=^(a b c), new=r yields ^(r ^(a b c))</span>
<a name="l00397"></a>00397     <span class="comment"># </span>
<a name="l00398"></a>00398     <span class="comment">#         If newRoot is a nil-rooted single child tree, use the single</span>
<a name="l00399"></a>00399     <span class="comment">#         child as the new root node.</span>
<a name="l00400"></a>00400     <span class="comment"># </span>
<a name="l00401"></a>00401     <span class="comment">#            old=^(nil a b c), new=^(nil r) yields ^(r a b c)</span>
<a name="l00402"></a>00402     <span class="comment">#            old=^(a b c), new=^(nil r) yields ^(r ^(a b c))</span>
<a name="l00403"></a>00403     <span class="comment"># </span>
<a name="l00404"></a>00404     <span class="comment">#         If oldRoot was null, it's ok, just return newRoot (even if isNil).</span>
<a name="l00405"></a>00405     <span class="comment"># </span>
<a name="l00406"></a>00406     <span class="comment">#            old=null, new=r yields r</span>
<a name="l00407"></a>00407     <span class="comment">#            old=null, new=^(nil r) yields ^(nil r)</span>
<a name="l00408"></a>00408     <span class="comment"># </span>
<a name="l00409"></a>00409     <span class="comment">#         Return newRoot.  Throw an exception if newRoot is not a</span>
<a name="l00410"></a>00410     <span class="comment">#         simple node or nil root with a single child node--it must be a root</span>
<a name="l00411"></a>00411     <span class="comment">#         node.  If newRoot is ^(nil x) return x as newRoot.</span>
<a name="l00412"></a>00412     <span class="comment"># </span>
<a name="l00413"></a>00413     <span class="comment">#         Be advised that it's ok for newRoot to point at oldRoot's</span>
<a name="l00414"></a>00414     <span class="comment">#         children; i.e., you don't have to copy the list.  We are</span>
<a name="l00415"></a>00415     <span class="comment">#         constructing these nodes so we should have this control for</span>
<a name="l00416"></a>00416     <span class="comment">#         efficiency.</span>
<a name="l00417"></a>00417     <span class="comment">#         </span>
<a name="l00418"></a><a class="code" href="classantlr3_1_1tree_1_1_tree_adaptor.html#090f7370269f3dfedffaa935b0901ce9">00418</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_tree_adaptor.html#090f7370269f3dfedffaa935b0901ce9" title="If oldRoot is a nil root, just copy or move the children to newRoot.">becomeRoot</a>(self, newRoot, oldRoot):
<a name="l00419"></a>00419 
<a name="l00420"></a>00420         <span class="keywordflow">raise</span> NotImplementedError
<a name="l00421"></a>00421 
<a name="l00422"></a>00422 
<a name="l00423"></a>00423     <span class="comment">##</span>
<a name="l00424"></a>00424     <span class="comment"># </span>
<a name="l00425"></a>00425     <span class="comment">#         Given the root of the subtree created for this rule, post process</span>
<a name="l00426"></a>00426     <span class="comment">#         it to do any simplifications or whatever you want.  A required</span>
<a name="l00427"></a>00427     <span class="comment">#         behavior is to convert ^(nil singleSubtree) to singleSubtree</span>
<a name="l00428"></a>00428     <span class="comment">#         as the setting of start/stop indexes relies on a single non-nil root</span>
<a name="l00429"></a>00429     <span class="comment">#         for non-flat trees.</span>
<a name="l00430"></a>00430     <span class="comment"># </span>
<a name="l00431"></a>00431     <span class="comment">#         Flat trees such as for lists like "idlist : ID+ ;" are left alone</span>
<a name="l00432"></a>00432     <span class="comment">#         unless there is only one ID.  For a list, the start/stop indexes</span>
<a name="l00433"></a>00433     <span class="comment">#         are set in the nil node.</span>
<a name="l00434"></a>00434     <span class="comment"># </span>
<a name="l00435"></a>00435     <span class="comment">#         This method is executed after all rule tree construction and right</span>
<a name="l00436"></a>00436     <span class="comment">#         before setTokenBoundaries().</span>
<a name="l00437"></a>00437     <span class="comment">#         </span>
<a name="l00438"></a><a class="code" href="classantlr3_1_1tree_1_1_tree_adaptor.html#9602c56344f43b40bca1d70f1287d233">00438</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_tree_adaptor.html#9602c56344f43b40bca1d70f1287d233" title="Given the root of the subtree created for this rule, post process it to do any simplifications...">rulePostProcessing</a>(self, root):
<a name="l00439"></a>00439 
<a name="l00440"></a>00440         <span class="keywordflow">raise</span> NotImplementedError
<a name="l00441"></a>00441 
<a name="l00442"></a>00442 
<a name="l00443"></a>00443     <span class="comment">##</span>
<a name="l00444"></a>00444     <span class="comment"># For identifying trees.</span>
<a name="l00445"></a>00445     <span class="comment"># </span>
<a name="l00446"></a>00446     <span class="comment">#         How to identify nodes so we can say "add node to a prior node"?</span>
<a name="l00447"></a>00447     <span class="comment">#         Even becomeRoot is an issue.  Use System.identityHashCode(node)</span>
<a name="l00448"></a>00448     <span class="comment">#         usually.</span>
<a name="l00449"></a>00449     <span class="comment">#         </span>
<a name="l00450"></a><a class="code" href="classantlr3_1_1tree_1_1_tree_adaptor.html#a7c9680010cdec58578614bbfe1cc2ea">00450</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_tree_adaptor.html#a7c9680010cdec58578614bbfe1cc2ea" title="For identifying trees.">getUniqueID</a>(self, node):
<a name="l00451"></a>00451 
<a name="l00452"></a>00452         <span class="keywordflow">raise</span> NotImplementedError
<a name="l00453"></a>00453 
<a name="l00454"></a>00454 
<a name="l00455"></a>00455     <span class="comment"># R e w r i t e  R u l e s</span>
<a name="l00456"></a>00456 
<a name="l00457"></a>00457     <span class="comment">##</span>
<a name="l00458"></a>00458     <span class="comment"># </span>
<a name="l00459"></a>00459     <span class="comment">#         Create a new node derived from a token, with a new token type and</span>
<a name="l00460"></a>00460     <span class="comment">#         (optionally) new text.</span>
<a name="l00461"></a>00461     <span class="comment"># </span>
<a name="l00462"></a>00462     <span class="comment">#         This is invoked from an imaginary node ref on right side of a</span>
<a name="l00463"></a>00463     <span class="comment">#         rewrite rule as IMAG[$tokenLabel] or IMAG[$tokenLabel "IMAG"].</span>
<a name="l00464"></a>00464     <span class="comment"># </span>
<a name="l00465"></a>00465     <span class="comment">#         This should invoke createToken(Token).</span>
<a name="l00466"></a>00466     <span class="comment">#         </span>
<a name="l00467"></a><a class="code" href="classantlr3_1_1tree_1_1_tree_adaptor.html#07ec90b9d3671a5139dd102b7eaf708a">00467</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_tree_adaptor.html#07ec90b9d3671a5139dd102b7eaf708a" title="Create a new node derived from a token, with a new token type and (optionally) new...">createFromToken</a>(self, tokenType, fromToken, text=None):
<a name="l00468"></a>00468 
<a name="l00469"></a>00469         <span class="keywordflow">raise</span> NotImplementedError
<a name="l00470"></a>00470 
<a name="l00471"></a>00471 
<a name="l00472"></a>00472     <span class="comment">##</span>
<a name="l00473"></a>00473     <span class="comment"># Create a new node derived from a token, with a new token type.</span>
<a name="l00474"></a>00474     <span class="comment"># </span>
<a name="l00475"></a>00475     <span class="comment">#         This is invoked from an imaginary node ref on right side of a</span>
<a name="l00476"></a>00476     <span class="comment">#         rewrite rule as IMAG["IMAG"].</span>
<a name="l00477"></a>00477     <span class="comment"># </span>
<a name="l00478"></a>00478     <span class="comment">#         This should invoke createToken(int,String).</span>
<a name="l00479"></a>00479     <span class="comment">#         </span>
<a name="l00480"></a><a class="code" href="classantlr3_1_1tree_1_1_tree_adaptor.html#98ffc6414d55885bf24135db2107b8a0">00480</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_tree_adaptor.html#98ffc6414d55885bf24135db2107b8a0" title="Create a new node derived from a token, with a new token type.">createFromType</a>(self, tokenType, text):
<a name="l00481"></a>00481 
<a name="l00482"></a>00482         <span class="keywordflow">raise</span> NotImplementedError
<a name="l00483"></a>00483 
<a name="l00484"></a>00484 
<a name="l00485"></a>00485     <span class="comment"># C o n t e n t</span>
<a name="l00486"></a>00486 
<a name="l00487"></a>00487     <span class="comment">##</span>
<a name="l00488"></a>00488     <span class="comment"># For tree parsing, I need to know the token type of a node</span>
<a name="l00489"></a><a class="code" href="classantlr3_1_1tree_1_1_tree_adaptor.html#4efd1c05356bd33d3b80a3e9ff615613">00489</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_tree_adaptor.html#4efd1c05356bd33d3b80a3e9ff615613" title="For tree parsing, I need to know the token type of a node.">getType</a>(self, t):
<a name="l00490"></a>00490 
<a name="l00491"></a>00491         <span class="keywordflow">raise</span> NotImplementedError
<a name="l00492"></a>00492 
<a name="l00493"></a>00493 
<a name="l00494"></a>00494     <span class="comment">##</span>
<a name="l00495"></a>00495     <span class="comment"># Node constructors can set the type of a node</span>
<a name="l00496"></a><a class="code" href="classantlr3_1_1tree_1_1_tree_adaptor.html#db9cf2afe5da43c7ee4cb47f4c05b4bd">00496</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_tree_adaptor.html#db9cf2afe5da43c7ee4cb47f4c05b4bd" title="Node constructors can set the type of a node.">setType</a>(self, t, type):
<a name="l00497"></a>00497 
<a name="l00498"></a>00498         <span class="keywordflow">raise</span> NotImplementedError
<a name="l00499"></a>00499 
<a name="l00500"></a>00500 
<a name="l00501"></a><a class="code" href="classantlr3_1_1tree_1_1_tree_adaptor.html#3472ea47c91de3705676def75e0e8503">00501</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_tree_adaptor.html#3472ea47c91de3705676def75e0e8503">getText</a>(self, t):
<a name="l00502"></a>00502         <span class="keywordflow">raise</span> NotImplementedError
<a name="l00503"></a>00503 
<a name="l00504"></a>00504     <span class="comment">##</span>
<a name="l00505"></a>00505     <span class="comment"># Node constructors can set the text of a node</span>
<a name="l00506"></a><a class="code" href="classantlr3_1_1tree_1_1_tree_adaptor.html#22fb8325982b118dc1e42b3b8356d6a5">00506</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_tree_adaptor.html#22fb8325982b118dc1e42b3b8356d6a5" title="Node constructors can set the text of a node.">setText</a>(self, t, text):
<a name="l00507"></a>00507 
<a name="l00508"></a>00508         <span class="keywordflow">raise</span> NotImplementedError
<a name="l00509"></a>00509 
<a name="l00510"></a>00510 
<a name="l00511"></a>00511     <span class="comment">##</span>
<a name="l00512"></a>00512     <span class="comment"># Return the token object from which this node was created.</span>
<a name="l00513"></a>00513     <span class="comment"># </span>
<a name="l00514"></a>00514     <span class="comment">#         Currently used only for printing an error message.</span>
<a name="l00515"></a>00515     <span class="comment">#         The error display routine in BaseRecognizer needs to</span>
<a name="l00516"></a>00516     <span class="comment">#         display where the input the error occurred. If your</span>
<a name="l00517"></a>00517     <span class="comment">#         tree of limitation does not store information that can</span>
<a name="l00518"></a>00518     <span class="comment">#         lead you to the token, you can create a token filled with</span>
<a name="l00519"></a>00519     <span class="comment">#         the appropriate information and pass that back.  See</span>
<a name="l00520"></a>00520     <span class="comment">#         BaseRecognizer.getErrorMessage().</span>
<a name="l00521"></a>00521     <span class="comment">#         </span>
<a name="l00522"></a><a class="code" href="classantlr3_1_1tree_1_1_tree_adaptor.html#6bd19ddc9bff74c82514e50552d3b177">00522</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_tree_adaptor.html#6bd19ddc9bff74c82514e50552d3b177" title="Return the token object from which this node was created.">getToken</a>(self, t):
<a name="l00523"></a>00523 
<a name="l00524"></a>00524         <span class="keywordflow">raise</span> NotImplementedError
<a name="l00525"></a>00525 
<a name="l00526"></a>00526 
<a name="l00527"></a>00527     <span class="comment">##</span>
<a name="l00528"></a>00528     <span class="comment"># </span>
<a name="l00529"></a>00529     <span class="comment">#         Where are the bounds in the input token stream for this node and</span>
<a name="l00530"></a>00530     <span class="comment">#         all children?  Each rule that creates AST nodes will call this</span>
<a name="l00531"></a>00531     <span class="comment">#         method right before returning.  Flat trees (i.e., lists) will</span>
<a name="l00532"></a>00532     <span class="comment">#         still usually have a nil root node just to hold the children list.</span>
<a name="l00533"></a>00533     <span class="comment">#         That node would contain the start/stop indexes then.</span>
<a name="l00534"></a>00534     <span class="comment">#         </span>
<a name="l00535"></a><a class="code" href="classantlr3_1_1tree_1_1_tree_adaptor.html#cf8f869e71e88fa928922c2fa930e0ee">00535</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_tree_adaptor.html#cf8f869e71e88fa928922c2fa930e0ee" title="Where are the bounds in the input token stream for this node and all children? Each...">setTokenBoundaries</a>(self, t, startToken, stopToken):
<a name="l00536"></a>00536 
<a name="l00537"></a>00537         <span class="keywordflow">raise</span> NotImplementedError
<a name="l00538"></a>00538 
<a name="l00539"></a>00539 
<a name="l00540"></a>00540     <span class="comment">##</span>
<a name="l00541"></a>00541     <span class="comment"># </span>
<a name="l00542"></a>00542     <span class="comment">#         Get the token start index for this subtree; return -1 if no such index</span>
<a name="l00543"></a>00543     <span class="comment">#         </span>
<a name="l00544"></a><a class="code" href="classantlr3_1_1tree_1_1_tree_adaptor.html#07231d9f24325e0ebd73e2d51f4f409a">00544</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_tree_adaptor.html#07231d9f24325e0ebd73e2d51f4f409a" title="Get the token start index for this subtree; return -1 if no such index.">getTokenStartIndex</a>(self, t):
<a name="l00545"></a>00545 
<a name="l00546"></a>00546         <span class="keywordflow">raise</span> NotImplementedError
<a name="l00547"></a>00547 
<a name="l00548"></a>00548         
<a name="l00549"></a>00549     <span class="comment">##</span>
<a name="l00550"></a>00550     <span class="comment"># </span>
<a name="l00551"></a>00551     <span class="comment">#         Get the token stop index for this subtree; return -1 if no such index</span>
<a name="l00552"></a>00552     <span class="comment">#         </span>
<a name="l00553"></a><a class="code" href="classantlr3_1_1tree_1_1_tree_adaptor.html#2473b9650ba7e25afd87ecf5a8c66747">00553</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_tree_adaptor.html#2473b9650ba7e25afd87ecf5a8c66747" title="Get the token stop index for this subtree; return -1 if no such index.">getTokenStopIndex</a>(self, t):
<a name="l00554"></a>00554 
<a name="l00555"></a>00555         <span class="keywordflow">raise</span> NotImplementedError
<a name="l00556"></a>00556         
<a name="l00557"></a>00557 
<a name="l00558"></a>00558     <span class="comment"># N a v i g a t i o n  /  T r e e  P a r s i n g</span>
<a name="l00559"></a>00559 
<a name="l00560"></a>00560     <span class="comment">##</span>
<a name="l00561"></a>00561     <span class="comment"># Get a child 0..n-1 node</span>
<a name="l00562"></a><a class="code" href="classantlr3_1_1tree_1_1_tree_adaptor.html#ae45592980cd6619defc81732d4a00b0">00562</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_tree_adaptor.html#ae45592980cd6619defc81732d4a00b0" title="Get a child 0.">getChild</a>(self, t, i):
<a name="l00563"></a>00563 
<a name="l00564"></a>00564         <span class="keywordflow">raise</span> NotImplementedError
<a name="l00565"></a>00565 
<a name="l00566"></a>00566 
<a name="l00567"></a>00567     <span class="comment">##</span>
<a name="l00568"></a>00568     <span class="comment"># Set ith child (0..n-1) to t; t must be non-null and non-nil node</span>
<a name="l00569"></a><a class="code" href="classantlr3_1_1tree_1_1_tree_adaptor.html#5413b1e6d876e6cffa53f118a44ab9f2">00569</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_tree_adaptor.html#5413b1e6d876e6cffa53f118a44ab9f2" title="Set ith child (0.">setChild</a>(self, t, i, child):
<a name="l00570"></a>00570 
<a name="l00571"></a>00571         <span class="keywordflow">raise</span> NotImplementedError
<a name="l00572"></a>00572 
<a name="l00573"></a>00573 
<a name="l00574"></a>00574     <span class="comment">##</span>
<a name="l00575"></a>00575     <span class="comment"># Remove ith child and shift children down from right.</span>
<a name="l00576"></a><a class="code" href="classantlr3_1_1tree_1_1_tree_adaptor.html#4d7e07b165e7065b5a5e79f83c31e244">00576</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_tree_adaptor.html#4d7e07b165e7065b5a5e79f83c31e244" title="Remove ith child and shift children down from right.">deleteChild</a>(self, t, i):
<a name="l00577"></a>00577         
<a name="l00578"></a>00578         <span class="keywordflow">raise</span> NotImplementedError
<a name="l00579"></a>00579 
<a name="l00580"></a>00580 
<a name="l00581"></a>00581     <span class="comment">##</span>
<a name="l00582"></a>00582     <span class="comment"># How many children?  If 0, then this is a leaf node</span>
<a name="l00583"></a><a class="code" href="classantlr3_1_1tree_1_1_tree_adaptor.html#134280e76cd18697f17472ef8721cfca">00583</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_tree_adaptor.html#134280e76cd18697f17472ef8721cfca" title="How many children? If 0, then this is a leaf node.">getChildCount</a>(self, t):
<a name="l00584"></a>00584 
<a name="l00585"></a>00585         <span class="keywordflow">raise</span> NotImplementedError
<a name="l00586"></a>00586 
<a name="l00587"></a>00587 
<a name="l00588"></a>00588     <span class="comment">##</span>
<a name="l00589"></a>00589     <span class="comment"># </span>
<a name="l00590"></a>00590     <span class="comment">#         Who is the parent node of this node; if null, implies node is root.</span>
<a name="l00591"></a>00591     <span class="comment">#         If your node type doesn't handle this, it's ok but the tree rewrites</span>
<a name="l00592"></a>00592     <span class="comment">#         in tree parsers need this functionality.</span>
<a name="l00593"></a>00593     <span class="comment">#         </span>
<a name="l00594"></a><a class="code" href="classantlr3_1_1tree_1_1_tree_adaptor.html#3b8e8ec3d5cea3620290d28ee5e7a9d1">00594</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_tree_adaptor.html#3b8e8ec3d5cea3620290d28ee5e7a9d1" title="Who is the parent node of this node; if null, implies node is root.">getParent</a>(self, t):
<a name="l00595"></a>00595         
<a name="l00596"></a>00596         <span class="keywordflow">raise</span> NotImplementedError
<a name="l00597"></a>00597 
<a name="l00598"></a>00598 
<a name="l00599"></a>00599     <span class="comment">##</span>
<a name="l00600"></a>00600     <span class="comment"># </span>
<a name="l00601"></a>00601     <span class="comment">#         Who is the parent node of this node; if null, implies node is root.</span>
<a name="l00602"></a>00602     <span class="comment">#         If your node type doesn't handle this, it's ok but the tree rewrites</span>
<a name="l00603"></a>00603     <span class="comment">#         in tree parsers need this functionality.</span>
<a name="l00604"></a>00604     <span class="comment">#         </span>
<a name="l00605"></a><a class="code" href="classantlr3_1_1tree_1_1_tree_adaptor.html#cc4c45893ea0fd0369f3fb2b0602018c">00605</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_tree_adaptor.html#cc4c45893ea0fd0369f3fb2b0602018c" title="Who is the parent node of this node; if null, implies node is root.">setParent</a>(self, t, parent):
<a name="l00606"></a>00606 
<a name="l00607"></a>00607         <span class="keywordflow">raise</span> NotImplementedError
<a name="l00608"></a>00608 
<a name="l00609"></a>00609 
<a name="l00610"></a>00610     <span class="comment">##</span>
<a name="l00611"></a>00611     <span class="comment"># </span>
<a name="l00612"></a>00612     <span class="comment">#         What index is this node in the child list? Range: 0..n-1</span>
<a name="l00613"></a>00613     <span class="comment">#         If your node type doesn't handle this, it's ok but the tree rewrites</span>
<a name="l00614"></a>00614     <span class="comment">#         in tree parsers need this functionality.</span>
<a name="l00615"></a>00615     <span class="comment">#         </span>
<a name="l00616"></a><a class="code" href="classantlr3_1_1tree_1_1_tree_adaptor.html#2094c10353269137a861123de1703f9e">00616</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_tree_adaptor.html#2094c10353269137a861123de1703f9e" title="What index is this node in the child list? Range: 0.">getChildIndex</a>(self, t):
<a name="l00617"></a>00617 
<a name="l00618"></a>00618         <span class="keywordflow">raise</span> NotImplementedError
<a name="l00619"></a>00619 
<a name="l00620"></a>00620         
<a name="l00621"></a>00621     <span class="comment">##</span>
<a name="l00622"></a>00622     <span class="comment"># </span>
<a name="l00623"></a>00623     <span class="comment">#         What index is this node in the child list? Range: 0..n-1</span>
<a name="l00624"></a>00624     <span class="comment">#         If your node type doesn't handle this, it's ok but the tree rewrites</span>
<a name="l00625"></a>00625     <span class="comment">#         in tree parsers need this functionality.</span>
<a name="l00626"></a>00626     <span class="comment">#         </span>
<a name="l00627"></a><a class="code" href="classantlr3_1_1tree_1_1_tree_adaptor.html#4dc63b305b471503254f5ecde8f6ee8d">00627</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_tree_adaptor.html#4dc63b305b471503254f5ecde8f6ee8d" title="What index is this node in the child list? Range: 0.">setChildIndex</a>(self, t, index):
<a name="l00628"></a>00628 
<a name="l00629"></a>00629         <span class="keywordflow">raise</span> NotImplementedError
<a name="l00630"></a>00630 
<a name="l00631"></a>00631 
<a name="l00632"></a>00632     <span class="comment">##</span>
<a name="l00633"></a>00633     <span class="comment"># </span>
<a name="l00634"></a>00634     <span class="comment">#         Replace from start to stop child index of parent with t, which might</span>
<a name="l00635"></a>00635     <span class="comment">#         be a list.  Number of children may be different</span>
<a name="l00636"></a>00636     <span class="comment">#         after this call.</span>
<a name="l00637"></a>00637     <span class="comment"># </span>
<a name="l00638"></a>00638     <span class="comment">#         If parent is null, don't do anything; must be at root of overall tree.</span>
<a name="l00639"></a>00639     <span class="comment">#         Can't replace whatever points to the parent externally.  Do nothing.</span>
<a name="l00640"></a>00640     <span class="comment">#         </span>
<a name="l00641"></a><a class="code" href="classantlr3_1_1tree_1_1_tree_adaptor.html#48e5e7956c8cadee80d62e10c16dcd26">00641</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_tree_adaptor.html#48e5e7956c8cadee80d62e10c16dcd26" title="Replace from start to stop child index of parent with t, which might be a list.">replaceChildren</a>(self, parent, startChildIndex, stopChildIndex, t):
<a name="l00642"></a>00642 
<a name="l00643"></a>00643         <span class="keywordflow">raise</span> NotImplementedError
<a name="l00644"></a>00644 
<a name="l00645"></a>00645 
<a name="l00646"></a>00646     <span class="comment"># Misc</span>
<a name="l00647"></a>00647 
<a name="l00648"></a>00648     <span class="comment">##</span>
<a name="l00649"></a>00649     <span class="comment"># </span>
<a name="l00650"></a>00650     <span class="comment">#         Deprecated, use createWithPayload, createFromToken or createFromType.</span>
<a name="l00651"></a>00651     <span class="comment"># </span>
<a name="l00652"></a>00652     <span class="comment">#         This method only exists to mimic the Java interface of TreeAdaptor.</span>
<a name="l00653"></a>00653     <span class="comment">#         </span>
<a name="l00654"></a>00654     <span class="comment">#         </span>
<a name="l00655"></a><a class="code" href="classantlr3_1_1tree_1_1_tree_adaptor.html#b485eb418883173e9b919390a83f9a3c">00655</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_tree_adaptor.html#b485eb418883173e9b919390a83f9a3c" title="Deprecated, use createWithPayload, createFromToken or createFromType.">create</a>(self, *args):
<a name="l00656"></a>00656 
<a name="l00657"></a>00657         <span class="keywordflow">if</span> len(args) == 1 <span class="keywordflow">and</span> isinstance(args[0], Token):
<a name="l00658"></a>00658             <span class="comment"># Object create(Token payload);</span>
<a name="l00659"></a>00659 <span class="comment">##             warnings.warn(</span>
<a name="l00660"></a>00660 <span class="comment">##                 "Using create() is deprecated, use createWithPayload()",</span>
<a name="l00661"></a>00661 <span class="comment">##                 DeprecationWarning,</span>
<a name="l00662"></a>00662 <span class="comment">##                 stacklevel=2</span>
<a name="l00663"></a>00663 <span class="comment">##                 )</span>
<a name="l00664"></a>00664             <span class="keywordflow">return</span> self.<a class="code" href="classantlr3_1_1tree_1_1_tree_adaptor.html#682a616c7553335c2f01c0f55fc53bd1" title="Create a tree node from Token object; for CommonTree type trees, then the token just...">createWithPayload</a>(args[0])
<a name="l00665"></a>00665 
<a name="l00666"></a>00666         <span class="keywordflow">if</span> (len(args) == 2
<a name="l00667"></a>00667             <span class="keywordflow">and</span> isinstance(args[0], (int, long))
<a name="l00668"></a>00668             <span class="keywordflow">and</span> isinstance(args[1], Token)
<a name="l00669"></a>00669             ):
<a name="l00670"></a>00670             <span class="comment"># Object create(int tokenType, Token fromToken);</span>
<a name="l00671"></a>00671 <span class="comment">##             warnings.warn(</span>
<a name="l00672"></a>00672 <span class="comment">##                 "Using create() is deprecated, use createFromToken()",</span>
<a name="l00673"></a>00673 <span class="comment">##                 DeprecationWarning,</span>
<a name="l00674"></a>00674 <span class="comment">##                 stacklevel=2</span>
<a name="l00675"></a>00675 <span class="comment">##                 )</span>
<a name="l00676"></a>00676             <span class="keywordflow">return</span> self.<a class="code" href="classantlr3_1_1tree_1_1_tree_adaptor.html#07ec90b9d3671a5139dd102b7eaf708a" title="Create a new node derived from a token, with a new token type and (optionally) new...">createFromToken</a>(args[0], args[1])
<a name="l00677"></a>00677 
<a name="l00678"></a>00678         <span class="keywordflow">if</span> (len(args) == 3
<a name="l00679"></a>00679             <span class="keywordflow">and</span> isinstance(args[0], (int, long))
<a name="l00680"></a>00680             <span class="keywordflow">and</span> isinstance(args[1], Token)
<a name="l00681"></a>00681             <span class="keywordflow">and</span> isinstance(args[2], basestring)
<a name="l00682"></a>00682             ):
<a name="l00683"></a>00683             <span class="comment"># Object create(int tokenType, Token fromToken, String text);</span>
<a name="l00684"></a>00684 <span class="comment">##             warnings.warn(</span>
<a name="l00685"></a>00685 <span class="comment">##                 "Using create() is deprecated, use createFromToken()",</span>
<a name="l00686"></a>00686 <span class="comment">##                 DeprecationWarning,</span>
<a name="l00687"></a>00687 <span class="comment">##                 stacklevel=2</span>
<a name="l00688"></a>00688 <span class="comment">##                 )</span>
<a name="l00689"></a>00689             <span class="keywordflow">return</span> self.<a class="code" href="classantlr3_1_1tree_1_1_tree_adaptor.html#07ec90b9d3671a5139dd102b7eaf708a" title="Create a new node derived from a token, with a new token type and (optionally) new...">createFromToken</a>(args[0], args[1], args[2])
<a name="l00690"></a>00690 
<a name="l00691"></a>00691         <span class="keywordflow">if</span> (len(args) == 2
<a name="l00692"></a>00692             <span class="keywordflow">and</span> isinstance(args[0], (int, long))
<a name="l00693"></a>00693             <span class="keywordflow">and</span> isinstance(args[1], basestring)
<a name="l00694"></a>00694             ):
<a name="l00695"></a>00695             <span class="comment"># Object create(int tokenType, String text);</span>
<a name="l00696"></a>00696 <span class="comment">##             warnings.warn(</span>
<a name="l00697"></a>00697 <span class="comment">##                 "Using create() is deprecated, use createFromType()",</span>
<a name="l00698"></a>00698 <span class="comment">##                 DeprecationWarning,</span>
<a name="l00699"></a>00699 <span class="comment">##                 stacklevel=2</span>
<a name="l00700"></a>00700 <span class="comment">##                 )</span>
<a name="l00701"></a>00701             <span class="keywordflow">return</span> self.<a class="code" href="classantlr3_1_1tree_1_1_tree_adaptor.html#98ffc6414d55885bf24135db2107b8a0" title="Create a new node derived from a token, with a new token type.">createFromType</a>(args[0], args[1])
<a name="l00702"></a>00702 
<a name="l00703"></a>00703         <span class="keywordflow">raise</span> TypeError(
<a name="l00704"></a>00704             <span class="stringliteral">"No create method with this signature found: %s"</span>
<a name="l00705"></a>00705             % (<span class="stringliteral">', '</span>.join(type(v).__name__ <span class="keywordflow">for</span> v <span class="keywordflow">in</span> args))
<a name="l00706"></a>00706             )
<a name="l00707"></a>00707     
<a name="l00708"></a>00708 
<a name="l00709"></a>00709 <span class="comment">############################################################################</span>
<a name="l00710"></a>00710 <span class="comment">#</span>
<a name="l00711"></a>00711 <span class="comment"># base implementation of Tree and TreeAdaptor</span>
<a name="l00712"></a>00712 <span class="comment">#</span>
<a name="l00713"></a>00713 <span class="comment"># Tree</span>
<a name="l00714"></a>00714 <span class="comment"># \- BaseTree</span>
<a name="l00715"></a>00715 <span class="comment">#</span>
<a name="l00716"></a>00716 <span class="comment"># TreeAdaptor</span>
<a name="l00717"></a>00717 <span class="comment"># \- BaseTreeAdaptor</span>
<a name="l00718"></a>00718 <span class="comment">#</span>
<a name="l00719"></a>00719 <span class="comment">############################################################################</span>
<a name="l00720"></a>00720 
<a name="l00721"></a>00721 
<a name="l00722"></a>00722 <span class="comment">##</span>
<a name="l00723"></a>00723 <span class="comment"># </span>
<a name="l00724"></a>00724 <span class="comment">#     @brief A generic tree implementation with no payload.</span>
<a name="l00725"></a>00725 <span class="comment"># </span>
<a name="l00726"></a>00726 <span class="comment">#     You must subclass to</span>
<a name="l00727"></a>00727 <span class="comment">#     actually have any user data.  ANTLR v3 uses a list of children approach</span>
<a name="l00728"></a>00728 <span class="comment">#     instead of the child-sibling approach in v2.  A flat tree (a list) is</span>
<a name="l00729"></a>00729 <span class="comment">#     an empty node whose children represent the list.  An empty, but</span>
<a name="l00730"></a>00730 <span class="comment">#     non-null node is called "nil".</span>
<a name="l00731"></a>00731 <span class="comment">#     </span>
<a name="l00732"></a><a class="code" href="classantlr3_1_1tree_1_1_base_tree.html">00732</a> <span class="keyword">class </span><a class="code" href="classantlr3_1_1tree_1_1_base_tree.html" title="warnings.warn( &amp;quot;Using create() is deprecated, use createWithPayload()&amp;quot;...">BaseTree</a>(<a class="code" href="classantlr3_1_1tree_1_1_tree.html" title="Abstract baseclass for tree nodes.">Tree</a>):
<a name="l00733"></a>00733 
<a name="l00734"></a>00734     <span class="comment"># BaseTree is abstract, no need to complain about not implemented abstract</span>
<a name="l00735"></a>00735     <span class="comment"># methods</span>
<a name="l00736"></a>00736     <span class="comment"># pylint: disable-msg=W0223</span>
<a name="l00737"></a>00737     
<a name="l00738"></a>00738     <span class="comment">##</span>
<a name="l00739"></a>00739     <span class="comment"># </span>
<a name="l00740"></a>00740     <span class="comment">#         Create a new node from an existing node does nothing for BaseTree</span>
<a name="l00741"></a>00741     <span class="comment">#         as there are no fields other than the children list, which cannot</span>
<a name="l00742"></a>00742     <span class="comment">#         be copied as the children are not considered part of this node. </span>
<a name="l00743"></a>00743     <span class="comment">#         </span>
<a name="l00744"></a><a class="code" href="classantlr3_1_1tree_1_1_base_tree.html#9ee99592e3400718843fca254a2f3707">00744</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_base_tree.html#9ee99592e3400718843fca254a2f3707" title="Create a new node from an existing node does nothing for BaseTree as there are no...">__init__</a>(self, node=None):
<a name="l00745"></a>00745         
<a name="l00746"></a>00746         Tree.__init__(self)
<a name="l00747"></a><a class="code" href="classantlr3_1_1tree_1_1_base_tree.html#e57f832d27acc44a0830d7ec7d8c4bd5">00747</a>         self.<a class="code" href="classantlr3_1_1tree_1_1_base_tree.html#e57f832d27acc44a0830d7ec7d8c4bd5">children</a> = []
<a name="l00748"></a><a class="code" href="classantlr3_1_1tree_1_1_base_tree.html#bf8c55b884d50d4323178e0828af3996">00748</a>         self.<a class="code" href="classantlr3_1_1tree_1_1_base_tree.html#bf8c55b884d50d4323178e0828af3996">parent</a> = <span class="keywordtype">None</span>
<a name="l00749"></a><a class="code" href="classantlr3_1_1tree_1_1_base_tree.html#7c99bd4ddca8b3b7d41d968ac14dea5a">00749</a>         self.<a class="code" href="classantlr3_1_1tree_1_1_base_tree.html#7c99bd4ddca8b3b7d41d968ac14dea5a">childIndex</a> = 0
<a name="l00750"></a>00750         
<a name="l00751"></a>00751 
<a name="l00752"></a><a class="code" href="classantlr3_1_1tree_1_1_base_tree.html#be143bdc63142ee9c0e1aaedf9430e27">00752</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_base_tree.html#be143bdc63142ee9c0e1aaedf9430e27">getChild</a>(self, i):
<a name="l00753"></a>00753         <span class="keywordflow">try</span>:
<a name="l00754"></a>00754             <span class="keywordflow">return</span> self.<a class="code" href="classantlr3_1_1tree_1_1_base_tree.html#e57f832d27acc44a0830d7ec7d8c4bd5">children</a>[i]
<a name="l00755"></a>00755         <span class="keywordflow">except</span> IndexError:
<a name="l00756"></a>00756             <span class="keywordflow">return</span> <span class="keywordtype">None</span>
<a name="l00757"></a>00757 
<a name="l00758"></a>00758 
<a name="l00759"></a>00759     <span class="comment">##</span>
<a name="l00760"></a>00760     <span class="comment"># @brief Get the children internal List</span>
<a name="l00761"></a>00761     <span class="comment"># </span>
<a name="l00762"></a>00762     <span class="comment">#         Note that if you directly mess with</span>
<a name="l00763"></a>00763     <span class="comment">#         the list, do so at your own risk.</span>
<a name="l00764"></a>00764     <span class="comment">#         </span>
<a name="l00765"></a><a class="code" href="classantlr3_1_1tree_1_1_base_tree.html#945b2a3f9ea929b830c182b9c4d48d20">00765</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_base_tree.html#945b2a3f9ea929b830c182b9c4d48d20" title="Get the children internal List.">getChildren</a>(self):
<a name="l00766"></a>00766         
<a name="l00767"></a>00767         <span class="comment"># FIXME: mark as deprecated</span>
<a name="l00768"></a>00768         <span class="keywordflow">return</span> self.<a class="code" href="classantlr3_1_1tree_1_1_base_tree.html#e57f832d27acc44a0830d7ec7d8c4bd5">children</a>
<a name="l00769"></a>00769 
<a name="l00770"></a>00770 
<a name="l00771"></a><a class="code" href="classantlr3_1_1tree_1_1_base_tree.html#88fe2fe4731fc908ba80698b3be7a517">00771</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_base_tree.html#88fe2fe4731fc908ba80698b3be7a517">getFirstChildWithType</a>(self, treeType):
<a name="l00772"></a>00772         <span class="keywordflow">for</span> child <span class="keywordflow">in</span> self.<a class="code" href="classantlr3_1_1tree_1_1_base_tree.html#e57f832d27acc44a0830d7ec7d8c4bd5">children</a>:
<a name="l00773"></a>00773             <span class="keywordflow">if</span> child.getType() == treeType:
<a name="l00774"></a>00774                 <span class="keywordflow">return</span> child
<a name="l00775"></a>00775 
<a name="l00776"></a>00776         <span class="keywordflow">return</span> <span class="keywordtype">None</span>
<a name="l00777"></a>00777 
<a name="l00778"></a>00778 
<a name="l00779"></a><a class="code" href="classantlr3_1_1tree_1_1_base_tree.html#cfb389224e651f7f3dad2c4160ba87d5">00779</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_base_tree.html#cfb389224e651f7f3dad2c4160ba87d5">getChildCount</a>(self):
<a name="l00780"></a>00780         <span class="keywordflow">return</span> len(self.<a class="code" href="classantlr3_1_1tree_1_1_base_tree.html#e57f832d27acc44a0830d7ec7d8c4bd5">children</a>)
<a name="l00781"></a>00781 
<a name="l00782"></a>00782 
<a name="l00783"></a>00783     <span class="comment">##</span>
<a name="l00784"></a>00784     <span class="comment"># Add t as child of this node.</span>
<a name="l00785"></a>00785     <span class="comment"># </span>
<a name="l00786"></a>00786     <span class="comment">#         Warning: if t has no children, but child does</span>
<a name="l00787"></a>00787     <span class="comment">#         and child isNil then this routine moves children to t via</span>
<a name="l00788"></a>00788     <span class="comment">#         t.children = child.children; i.e., without copying the array.</span>
<a name="l00789"></a>00789     <span class="comment">#         </span>
<a name="l00790"></a><a class="code" href="classantlr3_1_1tree_1_1_base_tree.html#c3247b8119a46417831e13fab631a06d">00790</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_base_tree.html#c3247b8119a46417831e13fab631a06d" title="Add t as child of this node.">addChild</a>(self, childTree):
<a name="l00791"></a>00791 
<a name="l00792"></a>00792         <span class="comment"># this implementation is much simpler and probably less efficient</span>
<a name="l00793"></a>00793         <span class="comment"># than the mumbo-jumbo that Ter did for the Java runtime.</span>
<a name="l00794"></a>00794         
<a name="l00795"></a>00795         <span class="keywordflow">if</span> childTree <span class="keywordflow">is</span> <span class="keywordtype">None</span>:
<a name="l00796"></a>00796             <span class="keywordflow">return</span>
<a name="l00797"></a>00797 
<a name="l00798"></a>00798         <span class="keywordflow">if</span> childTree.isNil():
<a name="l00799"></a>00799             <span class="comment"># t is an empty node possibly with children</span>
<a name="l00800"></a>00800 
<a name="l00801"></a>00801             <span class="keywordflow">if</span> self.<a class="code" href="classantlr3_1_1tree_1_1_base_tree.html#e57f832d27acc44a0830d7ec7d8c4bd5">children</a> <span class="keywordflow">is</span> childTree.children:
<a name="l00802"></a>00802                 <span class="keywordflow">raise</span> ValueError(<span class="stringliteral">"attempt to add child list to itself"</span>)
<a name="l00803"></a>00803 
<a name="l00804"></a>00804             <span class="comment"># fix parent pointer and childIndex for new children</span>
<a name="l00805"></a>00805             <span class="keywordflow">for</span> idx, child <span class="keywordflow">in</span> enumerate(childTree.children):
<a name="l00806"></a>00806                 child.parent = self
<a name="l00807"></a>00807                 child.childIndex = len(self.<a class="code" href="classantlr3_1_1tree_1_1_base_tree.html#e57f832d27acc44a0830d7ec7d8c4bd5">children</a>) + idx
<a name="l00808"></a>00808                 
<a name="l00809"></a>00809             self.<a class="code" href="classantlr3_1_1tree_1_1_base_tree.html#e57f832d27acc44a0830d7ec7d8c4bd5">children</a> += childTree.children
<a name="l00810"></a>00810 
<a name="l00811"></a>00811         <span class="keywordflow">else</span>:
<a name="l00812"></a>00812             <span class="comment"># child is not nil (don't care about children)</span>
<a name="l00813"></a>00813             self.<a class="code" href="classantlr3_1_1tree_1_1_base_tree.html#e57f832d27acc44a0830d7ec7d8c4bd5">children</a>.append(childTree)
<a name="l00814"></a>00814             childTree.parent = self
<a name="l00815"></a>00815             childTree.childIndex = len(self.<a class="code" href="classantlr3_1_1tree_1_1_base_tree.html#e57f832d27acc44a0830d7ec7d8c4bd5">children</a>) - 1
<a name="l00816"></a>00816 
<a name="l00817"></a>00817 
<a name="l00818"></a>00818     <span class="comment">##</span>
<a name="l00819"></a>00819     <span class="comment"># Add all elements of kids list as children of this node</span>
<a name="l00820"></a><a class="code" href="classantlr3_1_1tree_1_1_base_tree.html#8829dbb9e053143222becd53525c5707">00820</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_base_tree.html#8829dbb9e053143222becd53525c5707" title="Add all elements of kids list as children of this node.">addChildren</a>(self, children):
<a name="l00821"></a>00821 
<a name="l00822"></a>00822         self.<a class="code" href="classantlr3_1_1tree_1_1_base_tree.html#e57f832d27acc44a0830d7ec7d8c4bd5">children</a> += children
<a name="l00823"></a>00823 
<a name="l00824"></a>00824 
<a name="l00825"></a><a class="code" href="classantlr3_1_1tree_1_1_base_tree.html#cb19ec4b82c9c12a8215e89ad92d5b2f">00825</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_base_tree.html#cb19ec4b82c9c12a8215e89ad92d5b2f" title="Set ith child (0.">setChild</a>(self, i, t):
<a name="l00826"></a>00826         <span class="keywordflow">if</span> t <span class="keywordflow">is</span> <span class="keywordtype">None</span>:
<a name="l00827"></a>00827             <span class="keywordflow">return</span>
<a name="l00828"></a>00828 
<a name="l00829"></a>00829         <span class="keywordflow">if</span> t.isNil():
<a name="l00830"></a>00830             <span class="keywordflow">raise</span> ValueError(<span class="stringliteral">"Can't set single child to a list"</span>)
<a name="l00831"></a>00831         
<a name="l00832"></a>00832         self.<a class="code" href="classantlr3_1_1tree_1_1_base_tree.html#e57f832d27acc44a0830d7ec7d8c4bd5">children</a>[i] = t
<a name="l00833"></a>00833         t.parent = self
<a name="l00834"></a>00834         t.childIndex = i
<a name="l00835"></a>00835         
<a name="l00836"></a>00836 
<a name="l00837"></a><a class="code" href="classantlr3_1_1tree_1_1_base_tree.html#ecbf9e2edfa322a498345d753e419a8b">00837</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_base_tree.html#ecbf9e2edfa322a498345d753e419a8b">deleteChild</a>(self, i):
<a name="l00838"></a>00838         killed = self.<a class="code" href="classantlr3_1_1tree_1_1_base_tree.html#e57f832d27acc44a0830d7ec7d8c4bd5">children</a>[i]
<a name="l00839"></a>00839         
<a name="l00840"></a>00840         del self.<a class="code" href="classantlr3_1_1tree_1_1_base_tree.html#e57f832d27acc44a0830d7ec7d8c4bd5">children</a>[i]
<a name="l00841"></a>00841         
<a name="l00842"></a>00842         <span class="comment"># walk rest and decrement their child indexes</span>
<a name="l00843"></a>00843         <span class="keywordflow">for</span> idx, child <span class="keywordflow">in</span> enumerate(self.<a class="code" href="classantlr3_1_1tree_1_1_base_tree.html#e57f832d27acc44a0830d7ec7d8c4bd5">children</a>[i:]):
<a name="l00844"></a>00844             child.childIndex = i + idx
<a name="l00845"></a>00845             
<a name="l00846"></a>00846         <span class="keywordflow">return</span> killed
<a name="l00847"></a>00847 
<a name="l00848"></a>00848     
<a name="l00849"></a>00849     <span class="comment">##</span>
<a name="l00850"></a>00850     <span class="comment"># </span>
<a name="l00851"></a>00851     <span class="comment">#         Delete children from start to stop and replace with t even if t is</span>
<a name="l00852"></a>00852     <span class="comment">#         a list (nil-root tree).  num of children can increase or decrease.</span>
<a name="l00853"></a>00853     <span class="comment">#         For huge child lists, inserting children can force walking rest of</span>
<a name="l00854"></a>00854     <span class="comment">#         children to set their childindex; could be slow.</span>
<a name="l00855"></a>00855     <span class="comment">#         </span>
<a name="l00856"></a><a class="code" href="classantlr3_1_1tree_1_1_base_tree.html#9366555b57816bd40c728931f5997642">00856</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_base_tree.html#9366555b57816bd40c728931f5997642" title="Delete children from start to stop and replace with t even if t is a list (nil-root...">replaceChildren</a>(self, startChildIndex, stopChildIndex, newTree):
<a name="l00857"></a>00857 
<a name="l00858"></a>00858         <span class="keywordflow">if</span> (startChildIndex &gt;= len(self.<a class="code" href="classantlr3_1_1tree_1_1_base_tree.html#e57f832d27acc44a0830d7ec7d8c4bd5">children</a>)
<a name="l00859"></a>00859             <span class="keywordflow">or</span> stopChildIndex &gt;= len(self.<a class="code" href="classantlr3_1_1tree_1_1_base_tree.html#e57f832d27acc44a0830d7ec7d8c4bd5">children</a>)
<a name="l00860"></a>00860             ):
<a name="l00861"></a>00861             <span class="keywordflow">raise</span> IndexError(<span class="stringliteral">"indexes invalid"</span>)
<a name="l00862"></a>00862 
<a name="l00863"></a>00863         replacingHowMany = stopChildIndex - startChildIndex + 1
<a name="l00864"></a>00864 
<a name="l00865"></a>00865         <span class="comment"># normalize to a list of children to add: newChildren</span>
<a name="l00866"></a>00866         <span class="keywordflow">if</span> newTree.isNil():
<a name="l00867"></a>00867             newChildren = newTree.children
<a name="l00868"></a>00868 
<a name="l00869"></a>00869         <span class="keywordflow">else</span>:
<a name="l00870"></a>00870             newChildren = [newTree]
<a name="l00871"></a>00871 
<a name="l00872"></a>00872         replacingWithHowMany = len(newChildren)
<a name="l00873"></a>00873         delta = replacingHowMany - replacingWithHowMany
<a name="l00874"></a>00874         
<a name="l00875"></a>00875         
<a name="l00876"></a>00876         <span class="keywordflow">if</span> delta == 0:
<a name="l00877"></a>00877             <span class="comment"># if same number of nodes, do direct replace</span>
<a name="l00878"></a>00878             <span class="keywordflow">for</span> idx, child <span class="keywordflow">in</span> enumerate(newChildren):
<a name="l00879"></a>00879                 self.<a class="code" href="classantlr3_1_1tree_1_1_base_tree.html#e57f832d27acc44a0830d7ec7d8c4bd5">children</a>[idx + startChildIndex] = child
<a name="l00880"></a>00880                 child.parent = self
<a name="l00881"></a>00881                 child.childIndex = idx + startChildIndex
<a name="l00882"></a>00882 
<a name="l00883"></a>00883         <span class="keywordflow">else</span>:
<a name="l00884"></a>00884             <span class="comment"># length of children changes...</span>
<a name="l00885"></a>00885 
<a name="l00886"></a>00886             <span class="comment"># ...delete replaced segment...</span>
<a name="l00887"></a>00887             del self.<a class="code" href="classantlr3_1_1tree_1_1_base_tree.html#e57f832d27acc44a0830d7ec7d8c4bd5">children</a>[startChildIndex:stopChildIndex+1]
<a name="l00888"></a>00888 
<a name="l00889"></a>00889             <span class="comment"># ...insert new segment...</span>
<a name="l00890"></a>00890             self.<a class="code" href="classantlr3_1_1tree_1_1_base_tree.html#e57f832d27acc44a0830d7ec7d8c4bd5">children</a>[startChildIndex:startChildIndex] = newChildren
<a name="l00891"></a>00891 
<a name="l00892"></a>00892             <span class="comment"># ...and fix indeces</span>
<a name="l00893"></a>00893             self.<a class="code" href="classantlr3_1_1tree_1_1_base_tree.html#ccf9fb214032ae18ae6532dd33248166">freshenParentAndChildIndexes</a>(startChildIndex)
<a name="l00894"></a>00894             
<a name="l00895"></a>00895 
<a name="l00896"></a><a class="code" href="classantlr3_1_1tree_1_1_base_tree.html#536da7cf52e161feca1738ab0eb5d90e">00896</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_base_tree.html#536da7cf52e161feca1738ab0eb5d90e" title="Indicates the node is a nil node but may still have children, meaning the tree is...">isNil</a>(self):
<a name="l00897"></a>00897         <span class="keywordflow">return</span> <span class="keyword">False</span>
<a name="l00898"></a>00898 
<a name="l00899"></a>00899 
<a name="l00900"></a><a class="code" href="classantlr3_1_1tree_1_1_base_tree.html#ccf9fb214032ae18ae6532dd33248166">00900</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_base_tree.html#ccf9fb214032ae18ae6532dd33248166">freshenParentAndChildIndexes</a>(self, offset=0):
<a name="l00901"></a>00901         <span class="keywordflow">for</span> idx, child <span class="keywordflow">in</span> enumerate(self.<a class="code" href="classantlr3_1_1tree_1_1_base_tree.html#e57f832d27acc44a0830d7ec7d8c4bd5">children</a>[offset:]):
<a name="l00902"></a>00902             child.childIndex = idx + offset
<a name="l00903"></a>00903             child.parent = self
<a name="l00904"></a>00904 
<a name="l00905"></a>00905 
<a name="l00906"></a><a class="code" href="classantlr3_1_1tree_1_1_base_tree.html#3c3a24bc897684a81a46319f213df798">00906</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_base_tree.html#3c3a24bc897684a81a46319f213df798">sanityCheckParentAndChildIndexes</a>(self, parent=None, i=-1):
<a name="l00907"></a>00907         <span class="keywordflow">if</span> parent != self.<a class="code" href="classantlr3_1_1tree_1_1_base_tree.html#bf8c55b884d50d4323178e0828af3996">parent</a>:
<a name="l00908"></a>00908             <span class="keywordflow">raise</span> ValueError(
<a name="l00909"></a>00909                 <span class="stringliteral">"parents don't match; expected %r found %r"</span>
<a name="l00910"></a>00910                 % (parent, self.<a class="code" href="classantlr3_1_1tree_1_1_base_tree.html#bf8c55b884d50d4323178e0828af3996">parent</a>)
<a name="l00911"></a>00911                 )
<a name="l00912"></a>00912         
<a name="l00913"></a>00913         <span class="keywordflow">if</span> i != self.<a class="code" href="classantlr3_1_1tree_1_1_base_tree.html#7c99bd4ddca8b3b7d41d968ac14dea5a">childIndex</a>:
<a name="l00914"></a>00914             <span class="keywordflow">raise</span> ValueError(
<a name="l00915"></a>00915                 <span class="stringliteral">"child indexes don't match; expected %d found %d"</span>
<a name="l00916"></a>00916                 % (i, self.<a class="code" href="classantlr3_1_1tree_1_1_base_tree.html#7c99bd4ddca8b3b7d41d968ac14dea5a">childIndex</a>)
<a name="l00917"></a>00917                 )
<a name="l00918"></a>00918 
<a name="l00919"></a>00919         <span class="keywordflow">for</span> idx, child <span class="keywordflow">in</span> enumerate(self.<a class="code" href="classantlr3_1_1tree_1_1_base_tree.html#e57f832d27acc44a0830d7ec7d8c4bd5">children</a>):
<a name="l00920"></a>00920             child.sanityCheckParentAndChildIndexes(self, idx)
<a name="l00921"></a>00921 
<a name="l00922"></a>00922 
<a name="l00923"></a>00923     <span class="comment">##</span>
<a name="l00924"></a>00924     <span class="comment"># BaseTree doesn't track child indexes.</span>
<a name="l00925"></a><a class="code" href="classantlr3_1_1tree_1_1_base_tree.html#bd8f381d064baabd854764e6fcdc8c9c">00925</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_base_tree.html#bd8f381d064baabd854764e6fcdc8c9c" title="BaseTree doesn&amp;#39;t track child indexes.">getChildIndex</a>(self):
<a name="l00926"></a>00926         
<a name="l00927"></a>00927         <span class="keywordflow">return</span> 0
<a name="l00928"></a>00928 
<a name="l00929"></a>00929 
<a name="l00930"></a>00930     <span class="comment">##</span>
<a name="l00931"></a>00931     <span class="comment"># BaseTree doesn't track child indexes.</span>
<a name="l00932"></a><a class="code" href="classantlr3_1_1tree_1_1_base_tree.html#ea9f2a8676ecd4705dfa8b07e9fa2b93">00932</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_base_tree.html#ea9f2a8676ecd4705dfa8b07e9fa2b93" title="BaseTree doesn&amp;#39;t track child indexes.">setChildIndex</a>(self, index):
<a name="l00933"></a>00933 
<a name="l00934"></a>00934         <span class="keywordflow">pass</span>
<a name="l00935"></a>00935     
<a name="l00936"></a>00936 
<a name="l00937"></a>00937     <span class="comment">##</span>
<a name="l00938"></a>00938     <span class="comment"># BaseTree doesn't track parent pointers.</span>
<a name="l00939"></a><a class="code" href="classantlr3_1_1tree_1_1_base_tree.html#4ee6a77b32fc16aff18a298fdcb5f0b5">00939</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_base_tree.html#4ee6a77b32fc16aff18a298fdcb5f0b5" title="BaseTree doesn&amp;#39;t track parent pointers.">getParent</a>(self):
<a name="l00940"></a>00940 
<a name="l00941"></a>00941         <span class="keywordflow">return</span> <span class="keywordtype">None</span>
<a name="l00942"></a>00942 
<a name="l00943"></a>00943     <span class="comment">##</span>
<a name="l00944"></a>00944     <span class="comment"># BaseTree doesn't track parent pointers.</span>
<a name="l00945"></a><a class="code" href="classantlr3_1_1tree_1_1_base_tree.html#415a3e8539c4984f4c18a91caa6b2971">00945</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_base_tree.html#415a3e8539c4984f4c18a91caa6b2971" title="BaseTree doesn&amp;#39;t track parent pointers.">setParent</a>(self, t):
<a name="l00946"></a>00946 
<a name="l00947"></a>00947         <span class="keywordflow">pass</span>
<a name="l00948"></a>00948 
<a name="l00949"></a>00949 
<a name="l00950"></a>00950     <span class="comment">##</span>
<a name="l00951"></a>00951     <span class="comment"># Walk upwards looking for ancestor with this token type.</span>
<a name="l00952"></a><a class="code" href="classantlr3_1_1tree_1_1_base_tree.html#e66663d40ab9229f1bed929d5c3dad15">00952</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_base_tree.html#e66663d40ab9229f1bed929d5c3dad15" title="Walk upwards looking for ancestor with this token type.">hasAncestor</a>(self, ttype):
<a name="l00953"></a>00953         <span class="keywordflow">return</span> self.<a class="code" href="classantlr3_1_1tree_1_1_base_tree.html#a074430c79b3adf269d7387eda6ec8d6" title="Walk upwards and get first ancestor with this token type.">getAncestor</a>(ttype) <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span>
<a name="l00954"></a>00954 
<a name="l00955"></a>00955     <span class="comment">##</span>
<a name="l00956"></a>00956     <span class="comment"># Walk upwards and get first ancestor with this token type.</span>
<a name="l00957"></a><a class="code" href="classantlr3_1_1tree_1_1_base_tree.html#a074430c79b3adf269d7387eda6ec8d6">00957</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_base_tree.html#a074430c79b3adf269d7387eda6ec8d6" title="Walk upwards and get first ancestor with this token type.">getAncestor</a>(self, ttype):
<a name="l00958"></a>00958         t = self.<a class="code" href="classantlr3_1_1tree_1_1_base_tree.html#4ee6a77b32fc16aff18a298fdcb5f0b5" title="BaseTree doesn&amp;#39;t track parent pointers.">getParent</a>()
<a name="l00959"></a>00959         <span class="keywordflow">while</span> t <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span>:
<a name="l00960"></a>00960             <span class="keywordflow">if</span> t.getType() == ttype:
<a name="l00961"></a>00961                 <span class="keywordflow">return</span> t
<a name="l00962"></a>00962             t = t.getParent()
<a name="l00963"></a>00963 
<a name="l00964"></a>00964         <span class="keywordflow">return</span> <span class="keywordtype">None</span>
<a name="l00965"></a>00965 
<a name="l00966"></a>00966     <span class="comment">##</span>
<a name="l00967"></a>00967     <span class="comment"># Return a list of all ancestors of this node.</span>
<a name="l00968"></a>00968     <span class="comment"># </span>
<a name="l00969"></a>00969     <span class="comment">#         The first node of list is the root and the last is the parent of</span>
<a name="l00970"></a>00970     <span class="comment">#         this node.</span>
<a name="l00971"></a>00971     <span class="comment">#         </span>
<a name="l00972"></a><a class="code" href="classantlr3_1_1tree_1_1_base_tree.html#4acedaf53c03118513dcd4e3f586089b">00972</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_base_tree.html#4acedaf53c03118513dcd4e3f586089b" title="Return a list of all ancestors of this node.">getAncestors</a>(self):
<a name="l00973"></a>00973         <span class="keywordflow">if</span> selfgetParent() <span class="keywordflow">is</span> <span class="keywordtype">None</span>:
<a name="l00974"></a>00974             <span class="keywordflow">return</span> <span class="keywordtype">None</span>
<a name="l00975"></a>00975 
<a name="l00976"></a>00976         ancestors = []
<a name="l00977"></a>00977         t = self.<a class="code" href="classantlr3_1_1tree_1_1_base_tree.html#4ee6a77b32fc16aff18a298fdcb5f0b5" title="BaseTree doesn&amp;#39;t track parent pointers.">getParent</a>()
<a name="l00978"></a>00978         <span class="keywordflow">while</span> t <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span>:
<a name="l00979"></a>00979             ancestors.insert(0, t) <span class="comment"># insert at start</span>
<a name="l00980"></a>00980             t = t.getParent()
<a name="l00981"></a>00981 
<a name="l00982"></a>00982         <span class="keywordflow">return</span> ancestors
<a name="l00983"></a>00983 
<a name="l00984"></a>00984 
<a name="l00985"></a>00985     <span class="comment">##</span>
<a name="l00986"></a>00986     <span class="comment"># Print out a whole tree not just a node</span>
<a name="l00987"></a><a class="code" href="classantlr3_1_1tree_1_1_base_tree.html#bfaaf63355d3734396b92f00ff0e4255">00987</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_base_tree.html#bfaaf63355d3734396b92f00ff0e4255" title="Print out a whole tree not just a node.">toStringTree</a>(self):
<a name="l00988"></a>00988 
<a name="l00989"></a>00989         <span class="keywordflow">if</span> len(self.<a class="code" href="classantlr3_1_1tree_1_1_base_tree.html#e57f832d27acc44a0830d7ec7d8c4bd5">children</a>) == 0:
<a name="l00990"></a>00990             <span class="keywordflow">return</span> self.<a class="code" href="classantlr3_1_1tree_1_1_base_tree.html#443cf4d49d2fc08e2b060d05094b392d" title="Override to say how a node (not a tree) should look as text.">toString</a>()
<a name="l00991"></a>00991 
<a name="l00992"></a>00992         buf = []
<a name="l00993"></a>00993         <span class="keywordflow">if</span> <span class="keywordflow">not</span> self.<a class="code" href="classantlr3_1_1tree_1_1_base_tree.html#536da7cf52e161feca1738ab0eb5d90e" title="Indicates the node is a nil node but may still have children, meaning the tree is...">isNil</a>():
<a name="l00994"></a>00994             buf.append(<span class="stringliteral">'('</span>)
<a name="l00995"></a>00995             buf.append(self.<a class="code" href="classantlr3_1_1tree_1_1_base_tree.html#443cf4d49d2fc08e2b060d05094b392d" title="Override to say how a node (not a tree) should look as text.">toString</a>())
<a name="l00996"></a>00996             buf.append(<span class="stringliteral">' '</span>)
<a name="l00997"></a>00997 
<a name="l00998"></a>00998         <span class="keywordflow">for</span> i, child <span class="keywordflow">in</span> enumerate(self.<a class="code" href="classantlr3_1_1tree_1_1_base_tree.html#e57f832d27acc44a0830d7ec7d8c4bd5">children</a>):
<a name="l00999"></a>00999             <span class="keywordflow">if</span> i &gt; 0:
<a name="l01000"></a>01000                 buf.append(<span class="stringliteral">' '</span>)
<a name="l01001"></a>01001             buf.append(child.toStringTree())
<a name="l01002"></a>01002 
<a name="l01003"></a>01003         <span class="keywordflow">if</span> <span class="keywordflow">not</span> self.<a class="code" href="classantlr3_1_1tree_1_1_base_tree.html#536da7cf52e161feca1738ab0eb5d90e" title="Indicates the node is a nil node but may still have children, meaning the tree is...">isNil</a>():
<a name="l01004"></a>01004             buf.append(<span class="stringliteral">')'</span>)
<a name="l01005"></a>01005 
<a name="l01006"></a>01006         <span class="keywordflow">return</span> <span class="stringliteral">''</span>.join(buf)
<a name="l01007"></a>01007 
<a name="l01008"></a>01008 
<a name="l01009"></a><a class="code" href="classantlr3_1_1tree_1_1_base_tree.html#6ccf985a93f94ba0b28be0a89e80757d">01009</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_base_tree.html#6ccf985a93f94ba0b28be0a89e80757d" title="In case we don&amp;#39;t have a token payload, what is the line for errors?">getLine</a>(self):
<a name="l01010"></a>01010         <span class="keywordflow">return</span> 0
<a name="l01011"></a>01011 
<a name="l01012"></a>01012 
<a name="l01013"></a><a class="code" href="classantlr3_1_1tree_1_1_base_tree.html#9c1448c772ecbf991d90a33857b99dfb">01013</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_base_tree.html#9c1448c772ecbf991d90a33857b99dfb">getCharPositionInLine</a>(self):
<a name="l01014"></a>01014         <span class="keywordflow">return</span> 0
<a name="l01015"></a>01015 
<a name="l01016"></a>01016 
<a name="l01017"></a>01017     <span class="comment">##</span>
<a name="l01018"></a>01018     <span class="comment"># Override to say how a node (not a tree) should look as text</span>
<a name="l01019"></a><a class="code" href="classantlr3_1_1tree_1_1_base_tree.html#443cf4d49d2fc08e2b060d05094b392d">01019</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_base_tree.html#443cf4d49d2fc08e2b060d05094b392d" title="Override to say how a node (not a tree) should look as text.">toString</a>(self):
<a name="l01020"></a>01020 
<a name="l01021"></a>01021         <span class="keywordflow">raise</span> NotImplementedError
<a name="l01022"></a>01022 
<a name="l01023"></a>01023 
<a name="l01024"></a>01024 
<a name="l01025"></a>01025 <span class="comment">##</span>
<a name="l01026"></a>01026 <span class="comment"># </span>
<a name="l01027"></a>01027 <span class="comment">#     @brief A TreeAdaptor that works with any Tree implementation.</span>
<a name="l01028"></a>01028 <span class="comment">#     </span>
<a name="l01029"></a><a class="code" href="classantlr3_1_1tree_1_1_base_tree_adaptor.html">01029</a> <span class="keyword">class </span><a class="code" href="classantlr3_1_1tree_1_1_base_tree_adaptor.html" title="A TreeAdaptor that works with any Tree implementation.">BaseTreeAdaptor</a>(<a class="code" href="classantlr3_1_1tree_1_1_tree_adaptor.html" title="Abstract baseclass for tree adaptors.">TreeAdaptor</a>):
<a name="l01030"></a>01030     
<a name="l01031"></a>01031     <span class="comment"># BaseTreeAdaptor is abstract, no need to complain about not implemented</span>
<a name="l01032"></a>01032     <span class="comment"># abstract methods</span>
<a name="l01033"></a>01033     <span class="comment"># pylint: disable-msg=W0223</span>
<a name="l01034"></a>01034     
<a name="l01035"></a><a class="code" href="classantlr3_1_1tree_1_1_base_tree_adaptor.html#f83faf5ea6340aa862a2b6743e2c12f1">01035</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_base_tree_adaptor.html#f83faf5ea6340aa862a2b6743e2c12f1" title="Return a nil node (an empty but non-null node) that can hold a list of element as...">nil</a>(self):
<a name="l01036"></a>01036         <span class="keywordflow">return</span> self.createWithPayload(<span class="keywordtype">None</span>)
<a name="l01037"></a>01037 
<a name="l01038"></a>01038 
<a name="l01039"></a>01039     <span class="comment">##</span>
<a name="l01040"></a>01040     <span class="comment"># </span>
<a name="l01041"></a>01041     <span class="comment">#         create tree node that holds the start and stop tokens associated</span>
<a name="l01042"></a>01042     <span class="comment">#         with an error.</span>
<a name="l01043"></a>01043     <span class="comment"># </span>
<a name="l01044"></a>01044     <span class="comment">#         If you specify your own kind of tree nodes, you will likely have to</span>
<a name="l01045"></a>01045     <span class="comment">#         override this method. CommonTree returns Token.INVALID_TOKEN_TYPE</span>
<a name="l01046"></a>01046     <span class="comment">#         if no token payload but you might have to set token type for diff</span>
<a name="l01047"></a>01047     <span class="comment">#         node type.</span>
<a name="l01048"></a>01048     <span class="comment"># </span>
<a name="l01049"></a>01049     <span class="comment">#         You don't have to subclass CommonErrorNode; you will likely need to</span>
<a name="l01050"></a>01050     <span class="comment">#         subclass your own tree node class to avoid class cast exception.</span>
<a name="l01051"></a>01051     <span class="comment">#         </span>
<a name="l01052"></a><a class="code" href="classantlr3_1_1tree_1_1_base_tree_adaptor.html#afaa5774c60a9543eb9d49d01098c922">01052</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_base_tree_adaptor.html#afaa5774c60a9543eb9d49d01098c922" title="create tree node that holds the start and stop tokens associated with an error.">errorNode</a>(self, input, start, stop, exc):
<a name="l01053"></a>01053         
<a name="l01054"></a>01054         <span class="keywordflow">return</span> CommonErrorNode(input, start, stop, exc)
<a name="l01055"></a>01055     
<a name="l01056"></a>01056 
<a name="l01057"></a><a class="code" href="classantlr3_1_1tree_1_1_base_tree_adaptor.html#24c20114b5aa313420418d223c09f242">01057</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_base_tree_adaptor.html#24c20114b5aa313420418d223c09f242" title="Is tree considered a nil node used to make lists of child nodes?">isNil</a>(self, tree):
<a name="l01058"></a>01058         <span class="keywordflow">return</span> tree.isNil()
<a name="l01059"></a>01059 
<a name="l01060"></a>01060 
<a name="l01061"></a>01061     <span class="comment">##</span>
<a name="l01062"></a>01062     <span class="comment"># </span>
<a name="l01063"></a>01063     <span class="comment">#         This is generic in the sense that it will work with any kind of</span>
<a name="l01064"></a>01064     <span class="comment">#         tree (not just Tree interface).  It invokes the adaptor routines</span>
<a name="l01065"></a>01065     <span class="comment">#         not the tree node routines to do the construction.</span>
<a name="l01066"></a>01066     <span class="comment">#         </span>
<a name="l01067"></a><a class="code" href="classantlr3_1_1tree_1_1_base_tree_adaptor.html#64a8476401b691af379092dcda8311d5">01067</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_base_tree_adaptor.html#64a8476401b691af379092dcda8311d5" title="This is generic in the sense that it will work with any kind of tree (not just Tree...">dupTree</a>(self, t, parent=None):
<a name="l01068"></a>01068 
<a name="l01069"></a>01069         <span class="keywordflow">if</span> t <span class="keywordflow">is</span> <span class="keywordtype">None</span>:
<a name="l01070"></a>01070             <span class="keywordflow">return</span> <span class="keywordtype">None</span>
<a name="l01071"></a>01071 
<a name="l01072"></a>01072         newTree = self.dupNode(t)
<a name="l01073"></a>01073         
<a name="l01074"></a>01074         <span class="comment"># ensure new subtree root has parent/child index set</span>
<a name="l01075"></a>01075 
<a name="l01076"></a>01076         <span class="comment"># same index in new tree</span>
<a name="l01077"></a>01077         self.setChildIndex(newTree, self.getChildIndex(t))
<a name="l01078"></a>01078         
<a name="l01079"></a>01079         self.setParent(newTree, parent)
<a name="l01080"></a>01080 
<a name="l01081"></a>01081         <span class="keywordflow">for</span> i <span class="keywordflow">in</span> range(self.<a class="code" href="classantlr3_1_1tree_1_1_base_tree_adaptor.html#4b7a88d343b1d34d616ae046b5135bfd" title="How many children? If 0, then this is a leaf node.">getChildCount</a>(t)):
<a name="l01082"></a>01082             child = self.<a class="code" href="classantlr3_1_1tree_1_1_base_tree_adaptor.html#cdb1b1b0a6f32d026e1ca5003898a4c9" title="Get a child 0.">getChild</a>(t, i)
<a name="l01083"></a>01083             newSubTree = self.<a class="code" href="classantlr3_1_1tree_1_1_base_tree_adaptor.html#64a8476401b691af379092dcda8311d5" title="This is generic in the sense that it will work with any kind of tree (not just Tree...">dupTree</a>(child, t)
<a name="l01084"></a>01084             self.<a class="code" href="classantlr3_1_1tree_1_1_base_tree_adaptor.html#d66fd37542444b01f2419a8ecfa21109" title="Add a child to the tree t.">addChild</a>(newTree, newSubTree)
<a name="l01085"></a>01085 
<a name="l01086"></a>01086         <span class="keywordflow">return</span> newTree
<a name="l01087"></a>01087 
<a name="l01088"></a>01088 
<a name="l01089"></a>01089     <span class="comment">##</span>
<a name="l01090"></a>01090     <span class="comment"># </span>
<a name="l01091"></a>01091     <span class="comment">#         Add a child to the tree t.  If child is a flat tree (a list), make all</span>
<a name="l01092"></a>01092     <span class="comment">#         in list children of t.  Warning: if t has no children, but child does</span>
<a name="l01093"></a>01093     <span class="comment">#         and child isNil then you can decide it is ok to move children to t via</span>
<a name="l01094"></a>01094     <span class="comment">#         t.children = child.children; i.e., without copying the array.  Just</span>
<a name="l01095"></a>01095     <span class="comment">#         make sure that this is consistent with have the user will build</span>
<a name="l01096"></a>01096     <span class="comment">#         ASTs.</span>
<a name="l01097"></a>01097     <span class="comment">#         </span>
<a name="l01098"></a><a class="code" href="classantlr3_1_1tree_1_1_base_tree_adaptor.html#d66fd37542444b01f2419a8ecfa21109">01098</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_base_tree_adaptor.html#d66fd37542444b01f2419a8ecfa21109" title="Add a child to the tree t.">addChild</a>(self, tree, child):
<a name="l01099"></a>01099 
<a name="l01100"></a>01100         <span class="comment">#if isinstance(child, Token):</span>
<a name="l01101"></a>01101         <span class="comment">#    child = self.createWithPayload(child)</span>
<a name="l01102"></a>01102         
<a name="l01103"></a>01103         <span class="keywordflow">if</span> tree <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span> <span class="keywordflow">and</span> child <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span>:
<a name="l01104"></a>01104             tree.addChild(child)
<a name="l01105"></a>01105 
<a name="l01106"></a>01106 
<a name="l01107"></a>01107     <span class="comment">##</span>
<a name="l01108"></a>01108     <span class="comment"># </span>
<a name="l01109"></a>01109     <span class="comment">#         If oldRoot is a nil root, just copy or move the children to newRoot.</span>
<a name="l01110"></a>01110     <span class="comment">#         If not a nil root, make oldRoot a child of newRoot.</span>
<a name="l01111"></a>01111     <span class="comment"># </span>
<a name="l01112"></a>01112     <span class="comment">#           old=^(nil a b c), new=r yields ^(r a b c)</span>
<a name="l01113"></a>01113     <span class="comment">#           old=^(a b c), new=r yields ^(r ^(a b c))</span>
<a name="l01114"></a>01114     <span class="comment"># </span>
<a name="l01115"></a>01115     <span class="comment">#         If newRoot is a nil-rooted single child tree, use the single</span>
<a name="l01116"></a>01116     <span class="comment">#         child as the new root node.</span>
<a name="l01117"></a>01117     <span class="comment"># </span>
<a name="l01118"></a>01118     <span class="comment">#           old=^(nil a b c), new=^(nil r) yields ^(r a b c)</span>
<a name="l01119"></a>01119     <span class="comment">#           old=^(a b c), new=^(nil r) yields ^(r ^(a b c))</span>
<a name="l01120"></a>01120     <span class="comment"># </span>
<a name="l01121"></a>01121     <span class="comment">#         If oldRoot was null, it's ok, just return newRoot (even if isNil).</span>
<a name="l01122"></a>01122     <span class="comment"># </span>
<a name="l01123"></a>01123     <span class="comment">#           old=null, new=r yields r</span>
<a name="l01124"></a>01124     <span class="comment">#           old=null, new=^(nil r) yields ^(nil r)</span>
<a name="l01125"></a>01125     <span class="comment"># </span>
<a name="l01126"></a>01126     <span class="comment">#         Return newRoot.  Throw an exception if newRoot is not a</span>
<a name="l01127"></a>01127     <span class="comment">#         simple node or nil root with a single child node--it must be a root</span>
<a name="l01128"></a>01128     <span class="comment">#         node.  If newRoot is ^(nil x) return x as newRoot.</span>
<a name="l01129"></a>01129     <span class="comment"># </span>
<a name="l01130"></a>01130     <span class="comment">#         Be advised that it's ok for newRoot to point at oldRoot's</span>
<a name="l01131"></a>01131     <span class="comment">#         children; i.e., you don't have to copy the list.  We are</span>
<a name="l01132"></a>01132     <span class="comment">#         constructing these nodes so we should have this control for</span>
<a name="l01133"></a>01133     <span class="comment">#         efficiency.</span>
<a name="l01134"></a>01134     <span class="comment">#         </span>
<a name="l01135"></a><a class="code" href="classantlr3_1_1tree_1_1_base_tree_adaptor.html#735e937b6f4c8c35f0c8bf6acf1f8fc0">01135</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_base_tree_adaptor.html#735e937b6f4c8c35f0c8bf6acf1f8fc0" title="If oldRoot is a nil root, just copy or move the children to newRoot.">becomeRoot</a>(self, newRoot, oldRoot):
<a name="l01136"></a>01136 
<a name="l01137"></a>01137         <span class="keywordflow">if</span> isinstance(newRoot, Token):
<a name="l01138"></a>01138             newRoot = self.create(newRoot)
<a name="l01139"></a>01139 
<a name="l01140"></a>01140         <span class="keywordflow">if</span> oldRoot <span class="keywordflow">is</span> <span class="keywordtype">None</span>:
<a name="l01141"></a>01141             <span class="keywordflow">return</span> newRoot
<a name="l01142"></a>01142         
<a name="l01143"></a>01143         <span class="keywordflow">if</span> <span class="keywordflow">not</span> isinstance(newRoot, CommonTree):
<a name="l01144"></a>01144             newRoot = self.createWithPayload(newRoot)
<a name="l01145"></a>01145 
<a name="l01146"></a>01146         <span class="comment"># handle ^(nil real-node)</span>
<a name="l01147"></a>01147         <span class="keywordflow">if</span> newRoot.isNil():
<a name="l01148"></a>01148             nc = newRoot.getChildCount()
<a name="l01149"></a>01149             <span class="keywordflow">if</span> nc == 1:
<a name="l01150"></a>01150                 newRoot = newRoot.getChild(0)
<a name="l01151"></a>01151                 
<a name="l01152"></a>01152             <span class="keywordflow">elif</span> nc &gt; 1:
<a name="l01153"></a>01153                 <span class="comment"># TODO: make tree run time exceptions hierarchy</span>
<a name="l01154"></a>01154                 <span class="keywordflow">raise</span> RuntimeError(<span class="stringliteral">"more than one node as root"</span>)
<a name="l01155"></a>01155 
<a name="l01156"></a>01156         <span class="comment"># add oldRoot to newRoot; addChild takes care of case where oldRoot</span>
<a name="l01157"></a>01157         <span class="comment"># is a flat list (i.e., nil-rooted tree).  All children of oldRoot</span>
<a name="l01158"></a>01158         <span class="comment"># are added to newRoot.</span>
<a name="l01159"></a>01159         newRoot.addChild(oldRoot)
<a name="l01160"></a>01160         <span class="keywordflow">return</span> newRoot
<a name="l01161"></a>01161 
<a name="l01162"></a>01162 
<a name="l01163"></a>01163     <span class="comment">##</span>
<a name="l01164"></a>01164     <span class="comment"># Transform ^(nil x) to x and nil to null</span>
<a name="l01165"></a><a class="code" href="classantlr3_1_1tree_1_1_base_tree_adaptor.html#7cfebe8c02d068eb7100ef9d13030e1c">01165</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_base_tree_adaptor.html#7cfebe8c02d068eb7100ef9d13030e1c" title="Transform ^(nil x) to x and nil to null.">rulePostProcessing</a>(self, root):
<a name="l01166"></a>01166         
<a name="l01167"></a>01167         <span class="keywordflow">if</span> root <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span> <span class="keywordflow">and</span> root.isNil():
<a name="l01168"></a>01168             <span class="keywordflow">if</span> root.getChildCount() == 0:
<a name="l01169"></a>01169                 root = <span class="keywordtype">None</span>
<a name="l01170"></a>01170 
<a name="l01171"></a>01171             <span class="keywordflow">elif</span> root.getChildCount() == 1:
<a name="l01172"></a>01172                 root = root.getChild(0)
<a name="l01173"></a>01173                 <span class="comment"># whoever invokes rule will set parent and child index</span>
<a name="l01174"></a>01174                 root.setParent(<span class="keywordtype">None</span>)
<a name="l01175"></a>01175                 root.setChildIndex(-1)
<a name="l01176"></a>01176 
<a name="l01177"></a>01177         <span class="keywordflow">return</span> root
<a name="l01178"></a>01178 
<a name="l01179"></a>01179 
<a name="l01180"></a><a class="code" href="classantlr3_1_1tree_1_1_base_tree_adaptor.html#828d6c1658b70a0af4fbc1bad9126e30">01180</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_base_tree_adaptor.html#828d6c1658b70a0af4fbc1bad9126e30" title="Create a new node derived from a token, with a new token type and (optionally) new...">createFromToken</a>(self, tokenType, fromToken, text=None):
<a name="l01181"></a>01181         <span class="keyword">assert</span> isinstance(tokenType, (int, long)), type(tokenType).__name__
<a name="l01182"></a>01182         <span class="keyword">assert</span> isinstance(fromToken, Token), type(fromToken).__name__
<a name="l01183"></a>01183         <span class="keyword">assert</span> text <span class="keywordflow">is</span> <span class="keywordtype">None</span> <span class="keywordflow">or</span> isinstance(text, basestring), type(text).__name__
<a name="l01184"></a>01184 
<a name="l01185"></a>01185         fromToken = self.<a class="code" href="classantlr3_1_1tree_1_1_base_tree_adaptor.html#53d59e8e425d7594ec5b9dbf4241d155" title="Tell me how to create a token for use with imaginary token nodes.">createToken</a>(fromToken)
<a name="l01186"></a>01186         fromToken.type = tokenType
<a name="l01187"></a>01187         <span class="keywordflow">if</span> text <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span>:
<a name="l01188"></a>01188             fromToken.text = text
<a name="l01189"></a>01189         t = self.createWithPayload(fromToken)
<a name="l01190"></a>01190         <span class="keywordflow">return</span> t
<a name="l01191"></a>01191 
<a name="l01192"></a>01192 
<a name="l01193"></a><a class="code" href="classantlr3_1_1tree_1_1_base_tree_adaptor.html#c4d60734f368bc56e737d45df5afb7c1">01193</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_base_tree_adaptor.html#c4d60734f368bc56e737d45df5afb7c1" title="Create a new node derived from a token, with a new token type.">createFromType</a>(self, tokenType, text):
<a name="l01194"></a>01194         <span class="keyword">assert</span> isinstance(tokenType, (int, long)), type(tokenType).__name__
<a name="l01195"></a>01195         <span class="keyword">assert</span> isinstance(text, basestring) <span class="keywordflow">or</span> text <span class="keywordflow">is</span> <span class="keywordtype">None</span>, type(text).__name__
<a name="l01196"></a>01196                           
<a name="l01197"></a>01197         fromToken = self.<a class="code" href="classantlr3_1_1tree_1_1_base_tree_adaptor.html#53d59e8e425d7594ec5b9dbf4241d155" title="Tell me how to create a token for use with imaginary token nodes.">createToken</a>(tokenType=tokenType, text=text)
<a name="l01198"></a>01198         t = self.createWithPayload(fromToken)
<a name="l01199"></a>01199         <span class="keywordflow">return</span> t
<a name="l01200"></a>01200 
<a name="l01201"></a>01201 
<a name="l01202"></a><a class="code" href="classantlr3_1_1tree_1_1_base_tree_adaptor.html#ce1ff2871a8704f2542014afbd65e0fc">01202</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_base_tree_adaptor.html#ce1ff2871a8704f2542014afbd65e0fc" title="For tree parsing, I need to know the token type of a node.">getType</a>(self, t):
<a name="l01203"></a>01203         <span class="keywordflow">return</span> t.getType()
<a name="l01204"></a>01204 
<a name="l01205"></a>01205 
<a name="l01206"></a><a class="code" href="classantlr3_1_1tree_1_1_base_tree_adaptor.html#65d960851514d881e6b39b8fe3ac9f94">01206</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_base_tree_adaptor.html#65d960851514d881e6b39b8fe3ac9f94" title="Node constructors can set the type of a node.">setType</a>(self, t, type):
<a name="l01207"></a>01207         <span class="keywordflow">raise</span> RuntimeError(<span class="stringliteral">"don't know enough about Tree node"</span>)
<a name="l01208"></a>01208 
<a name="l01209"></a>01209 
<a name="l01210"></a><a class="code" href="classantlr3_1_1tree_1_1_base_tree_adaptor.html#5707e7c6868041a822d2960e2790bd76">01210</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_base_tree_adaptor.html#5707e7c6868041a822d2960e2790bd76">getText</a>(self, t):
<a name="l01211"></a>01211         <span class="keywordflow">return</span> t.getText()
<a name="l01212"></a>01212 
<a name="l01213"></a>01213 
<a name="l01214"></a><a class="code" href="classantlr3_1_1tree_1_1_base_tree_adaptor.html#ccc0c70cc6daa8ce2b1b4d0dcb33733d">01214</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_base_tree_adaptor.html#ccc0c70cc6daa8ce2b1b4d0dcb33733d" title="Node constructors can set the text of a node.">setText</a>(self, t, text):
<a name="l01215"></a>01215         <span class="keywordflow">raise</span> RuntimeError(<span class="stringliteral">"don't know enough about Tree node"</span>)
<a name="l01216"></a>01216 
<a name="l01217"></a>01217 
<a name="l01218"></a><a class="code" href="classantlr3_1_1tree_1_1_base_tree_adaptor.html#cdb1b1b0a6f32d026e1ca5003898a4c9">01218</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_base_tree_adaptor.html#cdb1b1b0a6f32d026e1ca5003898a4c9" title="Get a child 0.">getChild</a>(self, t, i):
<a name="l01219"></a>01219         <span class="keywordflow">return</span> t.getChild(i)
<a name="l01220"></a>01220 
<a name="l01221"></a>01221 
<a name="l01222"></a><a class="code" href="classantlr3_1_1tree_1_1_base_tree_adaptor.html#26c578012006586701fe512b9c88cebe">01222</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_base_tree_adaptor.html#26c578012006586701fe512b9c88cebe" title="Set ith child (0.">setChild</a>(self, t, i, child):
<a name="l01223"></a>01223         t.setChild(i, child)
<a name="l01224"></a>01224 
<a name="l01225"></a>01225 
<a name="l01226"></a><a class="code" href="classantlr3_1_1tree_1_1_base_tree_adaptor.html#58cfa09f185314093f07cc10f231d3c6">01226</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_base_tree_adaptor.html#58cfa09f185314093f07cc10f231d3c6" title="Remove ith child and shift children down from right.">deleteChild</a>(self, t, i):
<a name="l01227"></a>01227         <span class="keywordflow">return</span> t.deleteChild(i)
<a name="l01228"></a>01228 
<a name="l01229"></a>01229 
<a name="l01230"></a><a class="code" href="classantlr3_1_1tree_1_1_base_tree_adaptor.html#4b7a88d343b1d34d616ae046b5135bfd">01230</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_base_tree_adaptor.html#4b7a88d343b1d34d616ae046b5135bfd" title="How many children? If 0, then this is a leaf node.">getChildCount</a>(self, t):
<a name="l01231"></a>01231         <span class="keywordflow">return</span> t.getChildCount()
<a name="l01232"></a>01232 
<a name="l01233"></a>01233 
<a name="l01234"></a><a class="code" href="classantlr3_1_1tree_1_1_base_tree_adaptor.html#01f84e9e38a3f904f71cc03e20825336">01234</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_base_tree_adaptor.html#01f84e9e38a3f904f71cc03e20825336" title="For identifying trees.">getUniqueID</a>(self, node):
<a name="l01235"></a>01235         <span class="keywordflow">return</span> hash(node)
<a name="l01236"></a>01236 
<a name="l01237"></a>01237 
<a name="l01238"></a>01238     <span class="comment">##</span>
<a name="l01239"></a>01239     <span class="comment"># </span>
<a name="l01240"></a>01240     <span class="comment">#         Tell me how to create a token for use with imaginary token nodes.</span>
<a name="l01241"></a>01241     <span class="comment">#         For example, there is probably no input symbol associated with imaginary</span>
<a name="l01242"></a>01242     <span class="comment">#         token DECL, but you need to create it as a payload or whatever for</span>
<a name="l01243"></a>01243     <span class="comment">#         the DECL node as in ^(DECL type ID).</span>
<a name="l01244"></a>01244     <span class="comment"># </span>
<a name="l01245"></a>01245     <span class="comment">#         If you care what the token payload objects' type is, you should</span>
<a name="l01246"></a>01246     <span class="comment">#         override this method and any other createToken variant.</span>
<a name="l01247"></a>01247     <span class="comment">#         </span>
<a name="l01248"></a><a class="code" href="classantlr3_1_1tree_1_1_base_tree_adaptor.html#53d59e8e425d7594ec5b9dbf4241d155">01248</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_base_tree_adaptor.html#53d59e8e425d7594ec5b9dbf4241d155" title="Tell me how to create a token for use with imaginary token nodes.">createToken</a>(self, fromToken=None, tokenType=None, text=None):
<a name="l01249"></a>01249 
<a name="l01250"></a>01250         <span class="keywordflow">raise</span> NotImplementedError
<a name="l01251"></a>01251 
<a name="l01252"></a>01252 
<a name="l01253"></a>01253 <span class="comment">############################################################################</span>
<a name="l01254"></a>01254 <span class="comment">#</span>
<a name="l01255"></a>01255 <span class="comment"># common tree implementation</span>
<a name="l01256"></a>01256 <span class="comment">#</span>
<a name="l01257"></a>01257 <span class="comment"># Tree</span>
<a name="l01258"></a>01258 <span class="comment"># \- BaseTree</span>
<a name="l01259"></a>01259 <span class="comment">#    \- CommonTree</span>
<a name="l01260"></a>01260 <span class="comment">#       \- CommonErrorNode</span>
<a name="l01261"></a>01261 <span class="comment">#</span>
<a name="l01262"></a>01262 <span class="comment"># TreeAdaptor</span>
<a name="l01263"></a>01263 <span class="comment"># \- BaseTreeAdaptor</span>
<a name="l01264"></a>01264 <span class="comment">#    \- CommonTreeAdaptor</span>
<a name="l01265"></a>01265 <span class="comment">#</span>
<a name="l01266"></a>01266 <span class="comment">############################################################################</span>
<a name="l01267"></a>01267 
<a name="l01268"></a>01268 
<a name="l01269"></a>01269 <span class="comment">##</span>
<a name="l01270"></a>01270 <span class="comment"># @brief A tree node that is wrapper for a Token object.</span>
<a name="l01271"></a>01271 <span class="comment"># </span>
<a name="l01272"></a>01272 <span class="comment">#     After 3.0 release</span>
<a name="l01273"></a>01273 <span class="comment">#     while building tree rewrite stuff, it became clear that computing</span>
<a name="l01274"></a>01274 <span class="comment">#     parent and child index is very difficult and cumbersome.  Better to</span>
<a name="l01275"></a>01275 <span class="comment">#     spend the space in every tree node.  If you don't want these extra</span>
<a name="l01276"></a>01276 <span class="comment">#     fields, it's easy to cut them out in your own BaseTree subclass.</span>
<a name="l01277"></a>01277 <span class="comment">#     </span>
<a name="l01278"></a>01278 <span class="comment">#     </span>
<a name="l01279"></a><a class="code" href="classantlr3_1_1tree_1_1_common_tree.html">01279</a> <span class="keyword">class </span><a class="code" href="classantlr3_1_1tree_1_1_common_tree.html" title="A tree node that is wrapper for a Token object.">CommonTree</a>(<a class="code" href="classantlr3_1_1tree_1_1_base_tree.html" title="warnings.warn( &amp;quot;Using create() is deprecated, use createWithPayload()&amp;quot;...">BaseTree</a>):
<a name="l01280"></a>01280 
<a name="l01281"></a><a class="code" href="classantlr3_1_1tree_1_1_common_tree.html#ce6effc0673ff8ce16b53f28f88e712a">01281</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_common_tree.html#ce6effc0673ff8ce16b53f28f88e712a" title="Create a new node from an existing node does nothing for BaseTree as there are no...">__init__</a>(self, payload):
<a name="l01282"></a>01282         BaseTree.__init__(self)
<a name="l01283"></a>01283         
<a name="l01284"></a>01284         <span class="comment"># What token indexes bracket all tokens associated with this node</span>
<a name="l01285"></a>01285         <span class="comment"># and below?</span>
<a name="l01286"></a><a class="code" href="classantlr3_1_1tree_1_1_common_tree.html#6b863b18f99e2bf5da53b699a5f6e7c7">01286</a>         self.<a class="code" href="classantlr3_1_1tree_1_1_common_tree.html#6b863b18f99e2bf5da53b699a5f6e7c7">startIndex</a> = -1
<a name="l01287"></a><a class="code" href="classantlr3_1_1tree_1_1_common_tree.html#712cda9a4387ca19c202b656001b12a5">01287</a>         self.<a class="code" href="classantlr3_1_1tree_1_1_common_tree.html#712cda9a4387ca19c202b656001b12a5">stopIndex</a> = -1
<a name="l01288"></a>01288 
<a name="l01289"></a>01289         <span class="comment"># Who is the parent node of this node; if null, implies node is root</span>
<a name="l01290"></a><a class="code" href="classantlr3_1_1tree_1_1_common_tree.html#3410ab55ed392a9e70105d063b6b0d7b">01290</a>         self.<a class="code" href="classantlr3_1_1tree_1_1_common_tree.html#3410ab55ed392a9e70105d063b6b0d7b">parent</a> = <span class="keywordtype">None</span>
<a name="l01291"></a>01291         
<a name="l01292"></a>01292         <span class="comment"># What index is this node in the child list? Range: 0..n-1</span>
<a name="l01293"></a><a class="code" href="classantlr3_1_1tree_1_1_common_tree.html#faf0d3c8f7c04c83e0f02b5e224886da">01293</a>         self.<a class="code" href="classantlr3_1_1tree_1_1_common_tree.html#faf0d3c8f7c04c83e0f02b5e224886da">childIndex</a> = -1
<a name="l01294"></a>01294 
<a name="l01295"></a>01295         <span class="comment"># A single token is the payload</span>
<a name="l01296"></a>01296         <span class="keywordflow">if</span> payload <span class="keywordflow">is</span> <span class="keywordtype">None</span>:
<a name="l01297"></a><a class="code" href="classantlr3_1_1tree_1_1_common_tree.html#52d2619b2cf0f6a1962c53cc71eeb51b">01297</a>             self.<a class="code" href="classantlr3_1_1tree_1_1_common_tree.html#52d2619b2cf0f6a1962c53cc71eeb51b">token</a> = <span class="keywordtype">None</span>
<a name="l01298"></a>01298             
<a name="l01299"></a>01299         <span class="keywordflow">elif</span> isinstance(payload, CommonTree):
<a name="l01300"></a>01300             self.<a class="code" href="classantlr3_1_1tree_1_1_common_tree.html#52d2619b2cf0f6a1962c53cc71eeb51b">token</a> = payload.token
<a name="l01301"></a>01301             self.<a class="code" href="classantlr3_1_1tree_1_1_common_tree.html#6b863b18f99e2bf5da53b699a5f6e7c7">startIndex</a> = payload.startIndex
<a name="l01302"></a>01302             self.<a class="code" href="classantlr3_1_1tree_1_1_common_tree.html#712cda9a4387ca19c202b656001b12a5">stopIndex</a> = payload.stopIndex
<a name="l01303"></a>01303             
<a name="l01304"></a>01304         <span class="keywordflow">elif</span> payload <span class="keywordflow">is</span> <span class="keywordtype">None</span> <span class="keywordflow">or</span> isinstance(payload, Token):
<a name="l01305"></a>01305             self.<a class="code" href="classantlr3_1_1tree_1_1_common_tree.html#52d2619b2cf0f6a1962c53cc71eeb51b">token</a> = payload
<a name="l01306"></a>01306             
<a name="l01307"></a>01307         <span class="keywordflow">else</span>:
<a name="l01308"></a>01308             <span class="keywordflow">raise</span> TypeError(type(payload).__name__)
<a name="l01309"></a>01309 
<a name="l01310"></a>01310 
<a name="l01311"></a>01311 
<a name="l01312"></a><a class="code" href="classantlr3_1_1tree_1_1_common_tree.html#2742e7ec10f0d125dc88a6e4d628c7b9">01312</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_common_tree.html#2742e7ec10f0d125dc88a6e4d628c7b9">getToken</a>(self):
<a name="l01313"></a>01313         <span class="keywordflow">return</span> self.<a class="code" href="classantlr3_1_1tree_1_1_common_tree.html#52d2619b2cf0f6a1962c53cc71eeb51b">token</a>
<a name="l01314"></a>01314 
<a name="l01315"></a>01315 
<a name="l01316"></a><a class="code" href="classantlr3_1_1tree_1_1_common_tree.html#41568e966b41256494f8cd0040d50e97">01316</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_common_tree.html#41568e966b41256494f8cd0040d50e97">dupNode</a>(self):
<a name="l01317"></a>01317         <span class="keywordflow">return</span> CommonTree(self)
<a name="l01318"></a>01318 
<a name="l01319"></a>01319 
<a name="l01320"></a><a class="code" href="classantlr3_1_1tree_1_1_common_tree.html#c129b26d27bbefade07900b1de216aba">01320</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_common_tree.html#c129b26d27bbefade07900b1de216aba" title="Indicates the node is a nil node but may still have children, meaning the tree is...">isNil</a>(self):
<a name="l01321"></a>01321         <span class="keywordflow">return</span> self.<a class="code" href="classantlr3_1_1tree_1_1_common_tree.html#52d2619b2cf0f6a1962c53cc71eeb51b">token</a> <span class="keywordflow">is</span> <span class="keywordtype">None</span>
<a name="l01322"></a>01322 
<a name="l01323"></a>01323 
<a name="l01324"></a><a class="code" href="classantlr3_1_1tree_1_1_common_tree.html#526325996f50f592766b6d83e8db7e55">01324</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_common_tree.html#526325996f50f592766b6d83e8db7e55" title="Return a token type; needed for tree parsing.">getType</a>(self):
<a name="l01325"></a>01325         <span class="keywordflow">if</span> self.<a class="code" href="classantlr3_1_1tree_1_1_common_tree.html#52d2619b2cf0f6a1962c53cc71eeb51b">token</a> <span class="keywordflow">is</span> <span class="keywordtype">None</span>:
<a name="l01326"></a>01326             <span class="keywordflow">return</span> INVALID_TOKEN_TYPE
<a name="l01327"></a>01327 
<a name="l01328"></a>01328         <span class="keywordflow">return</span> self.<a class="code" href="classantlr3_1_1tree_1_1_common_tree.html#52d2619b2cf0f6a1962c53cc71eeb51b">token</a>.getType()
<a name="l01329"></a>01329 
<a name="l01330"></a><a class="code" href="classantlr3_1_1tree_1_1_common_tree.html#e71f9945280382d2a7216c0fe09e02e9">01330</a>     type = property(getType)
<a name="l01331"></a>01331     
<a name="l01332"></a>01332 
<a name="l01333"></a><a class="code" href="classantlr3_1_1tree_1_1_common_tree.html#637821d28776178e94b3ae98a29b5375">01333</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_common_tree.html#637821d28776178e94b3ae98a29b5375">getText</a>(self):
<a name="l01334"></a>01334         <span class="keywordflow">if</span> self.<a class="code" href="classantlr3_1_1tree_1_1_common_tree.html#52d2619b2cf0f6a1962c53cc71eeb51b">token</a> <span class="keywordflow">is</span> <span class="keywordtype">None</span>:
<a name="l01335"></a>01335             <span class="keywordflow">return</span> <span class="keywordtype">None</span>
<a name="l01336"></a>01336         
<a name="l01337"></a>01337         <span class="keywordflow">return</span> self.<a class="code" href="classantlr3_1_1tree_1_1_common_tree.html#52d2619b2cf0f6a1962c53cc71eeb51b">token</a>.text
<a name="l01338"></a>01338 
<a name="l01339"></a><a class="code" href="classantlr3_1_1tree_1_1_common_tree.html#c2a198af6aad6928bca3bc2a054a016e">01339</a>     text = property(getText)
<a name="l01340"></a>01340     
<a name="l01341"></a>01341 
<a name="l01342"></a><a class="code" href="classantlr3_1_1tree_1_1_common_tree.html#533d809d37bf1f42b9ef06ac907fe554">01342</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_common_tree.html#533d809d37bf1f42b9ef06ac907fe554" title="In case we don&amp;#39;t have a token payload, what is the line for errors?">getLine</a>(self):
<a name="l01343"></a>01343         <span class="keywordflow">if</span> self.<a class="code" href="classantlr3_1_1tree_1_1_common_tree.html#52d2619b2cf0f6a1962c53cc71eeb51b">token</a> <span class="keywordflow">is</span> <span class="keywordtype">None</span> <span class="keywordflow">or</span> self.<a class="code" href="classantlr3_1_1tree_1_1_common_tree.html#52d2619b2cf0f6a1962c53cc71eeb51b">token</a>.getLine() == 0:
<a name="l01344"></a>01344             <span class="keywordflow">if</span> self.getChildCount():
<a name="l01345"></a>01345                 <span class="keywordflow">return</span> self.getChild(0).getLine()
<a name="l01346"></a>01346             <span class="keywordflow">else</span>:
<a name="l01347"></a>01347                 <span class="keywordflow">return</span> 0
<a name="l01348"></a>01348 
<a name="l01349"></a>01349         <span class="keywordflow">return</span> self.<a class="code" href="classantlr3_1_1tree_1_1_common_tree.html#52d2619b2cf0f6a1962c53cc71eeb51b">token</a>.getLine()
<a name="l01350"></a>01350 
<a name="l01351"></a><a class="code" href="classantlr3_1_1tree_1_1_common_tree.html#ea6ce84c8d71de4dd94cfb6d21984d0c">01351</a>     line = property(getLine)
<a name="l01352"></a>01352     
<a name="l01353"></a>01353 
<a name="l01354"></a><a class="code" href="classantlr3_1_1tree_1_1_common_tree.html#3b3fef22918ef6d7a83a7b15e0a921d2">01354</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_common_tree.html#3b3fef22918ef6d7a83a7b15e0a921d2">getCharPositionInLine</a>(self):
<a name="l01355"></a>01355         <span class="keywordflow">if</span> self.<a class="code" href="classantlr3_1_1tree_1_1_common_tree.html#52d2619b2cf0f6a1962c53cc71eeb51b">token</a> <span class="keywordflow">is</span> <span class="keywordtype">None</span> <span class="keywordflow">or</span> self.<a class="code" href="classantlr3_1_1tree_1_1_common_tree.html#52d2619b2cf0f6a1962c53cc71eeb51b">token</a>.getCharPositionInLine() == -1:
<a name="l01356"></a>01356             <span class="keywordflow">if</span> self.getChildCount():
<a name="l01357"></a>01357                 <span class="keywordflow">return</span> self.getChild(0).getCharPositionInLine()
<a name="l01358"></a>01358             <span class="keywordflow">else</span>:
<a name="l01359"></a>01359                 <span class="keywordflow">return</span> 0
<a name="l01360"></a>01360 
<a name="l01361"></a>01361         <span class="keywordflow">else</span>:
<a name="l01362"></a>01362             <span class="keywordflow">return</span> self.<a class="code" href="classantlr3_1_1tree_1_1_common_tree.html#52d2619b2cf0f6a1962c53cc71eeb51b">token</a>.getCharPositionInLine()
<a name="l01363"></a>01363 
<a name="l01364"></a><a class="code" href="classantlr3_1_1tree_1_1_common_tree.html#a6361f24df81dea163facd357a30fa19">01364</a>     charPositionInLine = property(getCharPositionInLine)
<a name="l01365"></a>01365     
<a name="l01366"></a>01366 
<a name="l01367"></a><a class="code" href="classantlr3_1_1tree_1_1_common_tree.html#a7672c1d714a5960340d0d04ced87c49">01367</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_common_tree.html#a7672c1d714a5960340d0d04ced87c49" title="What is the smallest token index (indexing from 0) for this node and its children...">getTokenStartIndex</a>(self):
<a name="l01368"></a>01368         <span class="keywordflow">if</span> self.<a class="code" href="classantlr3_1_1tree_1_1_common_tree.html#6b863b18f99e2bf5da53b699a5f6e7c7">startIndex</a> == -1 <span class="keywordflow">and</span> self.<a class="code" href="classantlr3_1_1tree_1_1_common_tree.html#52d2619b2cf0f6a1962c53cc71eeb51b">token</a> <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span>:
<a name="l01369"></a>01369             <span class="keywordflow">return</span> self.<a class="code" href="classantlr3_1_1tree_1_1_common_tree.html#52d2619b2cf0f6a1962c53cc71eeb51b">token</a>.getTokenIndex()
<a name="l01370"></a>01370         
<a name="l01371"></a>01371         <span class="keywordflow">return</span> self.<a class="code" href="classantlr3_1_1tree_1_1_common_tree.html#6b863b18f99e2bf5da53b699a5f6e7c7">startIndex</a>
<a name="l01372"></a>01372     
<a name="l01373"></a><a class="code" href="classantlr3_1_1tree_1_1_common_tree.html#1612c964a1aaf08936db3574acbdd3c0">01373</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_common_tree.html#1612c964a1aaf08936db3574acbdd3c0">setTokenStartIndex</a>(self, index):
<a name="l01374"></a>01374         self.<a class="code" href="classantlr3_1_1tree_1_1_common_tree.html#6b863b18f99e2bf5da53b699a5f6e7c7">startIndex</a> = index
<a name="l01375"></a>01375 
<a name="l01376"></a><a class="code" href="classantlr3_1_1tree_1_1_common_tree.html#b96f64f0a3574f47366797e95106390c">01376</a>     tokenStartIndex = property(getTokenStartIndex, setTokenStartIndex)
<a name="l01377"></a>01377 
<a name="l01378"></a>01378 
<a name="l01379"></a><a class="code" href="classantlr3_1_1tree_1_1_common_tree.html#4d26979dd94349445033c3dbae95dbb0">01379</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_common_tree.html#4d26979dd94349445033c3dbae95dbb0" title="What is the largest token index (indexing from 0) for this node and its children...">getTokenStopIndex</a>(self):
<a name="l01380"></a>01380         <span class="keywordflow">if</span> self.<a class="code" href="classantlr3_1_1tree_1_1_common_tree.html#712cda9a4387ca19c202b656001b12a5">stopIndex</a> == -1 <span class="keywordflow">and</span> self.<a class="code" href="classantlr3_1_1tree_1_1_common_tree.html#52d2619b2cf0f6a1962c53cc71eeb51b">token</a> <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span>:
<a name="l01381"></a>01381             <span class="keywordflow">return</span> self.<a class="code" href="classantlr3_1_1tree_1_1_common_tree.html#52d2619b2cf0f6a1962c53cc71eeb51b">token</a>.getTokenIndex()
<a name="l01382"></a>01382         
<a name="l01383"></a>01383         <span class="keywordflow">return</span> self.<a class="code" href="classantlr3_1_1tree_1_1_common_tree.html#712cda9a4387ca19c202b656001b12a5">stopIndex</a>
<a name="l01384"></a>01384 
<a name="l01385"></a><a class="code" href="classantlr3_1_1tree_1_1_common_tree.html#41157c4f0c2dde146a4e183e63830f17">01385</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_common_tree.html#41157c4f0c2dde146a4e183e63830f17">setTokenStopIndex</a>(self, index):
<a name="l01386"></a>01386         self.<a class="code" href="classantlr3_1_1tree_1_1_common_tree.html#712cda9a4387ca19c202b656001b12a5">stopIndex</a> = index
<a name="l01387"></a>01387 
<a name="l01388"></a><a class="code" href="classantlr3_1_1tree_1_1_common_tree.html#32cefa6ad4842efffd0ff9ffe26f8751">01388</a>     tokenStopIndex = property(getTokenStopIndex, setTokenStopIndex)
<a name="l01389"></a>01389 
<a name="l01390"></a>01390 
<a name="l01391"></a>01391     <span class="comment">##</span>
<a name="l01392"></a>01392     <span class="comment"># For every node in this subtree, make sure it's start/stop token's</span>
<a name="l01393"></a>01393     <span class="comment">#         are set.  Walk depth first, visit bottom up.  Only updates nodes</span>
<a name="l01394"></a>01394     <span class="comment">#         with at least one token index &lt; 0.</span>
<a name="l01395"></a>01395     <span class="comment">#         </span>
<a name="l01396"></a><a class="code" href="classantlr3_1_1tree_1_1_common_tree.html#146ceaaedb844d99f97160f38175e423">01396</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_common_tree.html#146ceaaedb844d99f97160f38175e423" title="For every node in this subtree, make sure it&amp;#39;s start/stop token&amp;#39;s are set...">setUnknownTokenBoundaries</a>(self):
<a name="l01397"></a>01397 
<a name="l01398"></a>01398         <span class="keywordflow">if</span> self.children <span class="keywordflow">is</span> <span class="keywordtype">None</span>:
<a name="l01399"></a>01399             <span class="keywordflow">if</span> self.<a class="code" href="classantlr3_1_1tree_1_1_common_tree.html#6b863b18f99e2bf5da53b699a5f6e7c7">startIndex</a> &lt; 0 <span class="keywordflow">or</span> self.<a class="code" href="classantlr3_1_1tree_1_1_common_tree.html#712cda9a4387ca19c202b656001b12a5">stopIndex</a> &lt; 0:
<a name="l01400"></a>01400                 self.<a class="code" href="classantlr3_1_1tree_1_1_common_tree.html#6b863b18f99e2bf5da53b699a5f6e7c7">startIndex</a> = self.<a class="code" href="classantlr3_1_1tree_1_1_common_tree.html#712cda9a4387ca19c202b656001b12a5">stopIndex</a> = self.<a class="code" href="classantlr3_1_1tree_1_1_common_tree.html#52d2619b2cf0f6a1962c53cc71eeb51b">token</a>.getTokenIndex()
<a name="l01401"></a>01401 
<a name="l01402"></a>01402             <span class="keywordflow">return</span>
<a name="l01403"></a>01403  
<a name="l01404"></a>01404         <span class="keywordflow">for</span> child <span class="keywordflow">in</span> self.children:
<a name="l01405"></a>01405             child.setUnknownTokenBoundaries()
<a name="l01406"></a>01406 
<a name="l01407"></a>01407         <span class="keywordflow">if</span> self.<a class="code" href="classantlr3_1_1tree_1_1_common_tree.html#6b863b18f99e2bf5da53b699a5f6e7c7">startIndex</a> &gt;= 0 <span class="keywordflow">and</span> self.<a class="code" href="classantlr3_1_1tree_1_1_common_tree.html#712cda9a4387ca19c202b656001b12a5">stopIndex</a> &gt;= 0:
<a name="l01408"></a>01408             <span class="comment"># already set</span>
<a name="l01409"></a>01409             <span class="keywordflow">return</span>
<a name="l01410"></a>01410 
<a name="l01411"></a>01411         <span class="keywordflow">if</span> self.children:
<a name="l01412"></a>01412             firstChild = self.children[0]
<a name="l01413"></a>01413             lastChild = self.children[-1]
<a name="l01414"></a>01414             self.<a class="code" href="classantlr3_1_1tree_1_1_common_tree.html#6b863b18f99e2bf5da53b699a5f6e7c7">startIndex</a> = firstChild.getTokenStartIndex()
<a name="l01415"></a>01415             self.<a class="code" href="classantlr3_1_1tree_1_1_common_tree.html#712cda9a4387ca19c202b656001b12a5">stopIndex</a> = lastChild.getTokenStopIndex()
<a name="l01416"></a>01416 
<a name="l01417"></a>01417 
<a name="l01418"></a><a class="code" href="classantlr3_1_1tree_1_1_common_tree.html#2de5433fa5629dfffd5ffd051ea7304d">01418</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_common_tree.html#2de5433fa5629dfffd5ffd051ea7304d" title="BaseTree doesn&amp;#39;t track child indexes.">getChildIndex</a>(self):
<a name="l01419"></a>01419         <span class="comment">#FIXME: mark as deprecated</span>
<a name="l01420"></a>01420         <span class="keywordflow">return</span> self.<a class="code" href="classantlr3_1_1tree_1_1_common_tree.html#faf0d3c8f7c04c83e0f02b5e224886da">childIndex</a>
<a name="l01421"></a>01421 
<a name="l01422"></a>01422 
<a name="l01423"></a><a class="code" href="classantlr3_1_1tree_1_1_common_tree.html#3d27b46132c2329e92653ed8301b67f3">01423</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_common_tree.html#3d27b46132c2329e92653ed8301b67f3" title="BaseTree doesn&amp;#39;t track child indexes.">setChildIndex</a>(self, idx):
<a name="l01424"></a>01424         <span class="comment">#FIXME: mark as deprecated</span>
<a name="l01425"></a>01425         self.<a class="code" href="classantlr3_1_1tree_1_1_common_tree.html#faf0d3c8f7c04c83e0f02b5e224886da">childIndex</a> = idx
<a name="l01426"></a>01426 
<a name="l01427"></a>01427 
<a name="l01428"></a><a class="code" href="classantlr3_1_1tree_1_1_common_tree.html#7d51b70ce4767246a26ef595aaed4cde">01428</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_common_tree.html#7d51b70ce4767246a26ef595aaed4cde" title="BaseTree doesn&amp;#39;t track parent pointers.">getParent</a>(self):
<a name="l01429"></a>01429         <span class="comment">#FIXME: mark as deprecated</span>
<a name="l01430"></a>01430         <span class="keywordflow">return</span> self.<a class="code" href="classantlr3_1_1tree_1_1_common_tree.html#3410ab55ed392a9e70105d063b6b0d7b">parent</a>
<a name="l01431"></a>01431 
<a name="l01432"></a>01432 
<a name="l01433"></a><a class="code" href="classantlr3_1_1tree_1_1_common_tree.html#322031fdd7e6621b3084b63a8b7753ff">01433</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_common_tree.html#322031fdd7e6621b3084b63a8b7753ff" title="BaseTree doesn&amp;#39;t track parent pointers.">setParent</a>(self, t):
<a name="l01434"></a>01434         <span class="comment">#FIXME: mark as deprecated</span>
<a name="l01435"></a>01435         self.<a class="code" href="classantlr3_1_1tree_1_1_common_tree.html#3410ab55ed392a9e70105d063b6b0d7b">parent</a> = t
<a name="l01436"></a>01436 
<a name="l01437"></a>01437         
<a name="l01438"></a><a class="code" href="classantlr3_1_1tree_1_1_common_tree.html#17f93423e6a79cccfdb34a7b052769d6">01438</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_common_tree.html#17f93423e6a79cccfdb34a7b052769d6" title="Override to say how a node (not a tree) should look as text.">toString</a>(self):
<a name="l01439"></a>01439         <span class="keywordflow">if</span> self.<a class="code" href="classantlr3_1_1tree_1_1_common_tree.html#c129b26d27bbefade07900b1de216aba" title="Indicates the node is a nil node but may still have children, meaning the tree is...">isNil</a>():
<a name="l01440"></a>01440             <span class="keywordflow">return</span> <span class="stringliteral">"nil"</span>
<a name="l01441"></a>01441 
<a name="l01442"></a>01442         <span class="keywordflow">if</span> self.<a class="code" href="classantlr3_1_1tree_1_1_common_tree.html#526325996f50f592766b6d83e8db7e55" title="Return a token type; needed for tree parsing.">getType</a>() == INVALID_TOKEN_TYPE:
<a name="l01443"></a>01443             <span class="keywordflow">return</span> <span class="stringliteral">"&lt;errornode&gt;"</span>
<a name="l01444"></a>01444 
<a name="l01445"></a>01445         <span class="keywordflow">return</span> self.<a class="code" href="classantlr3_1_1tree_1_1_common_tree.html#52d2619b2cf0f6a1962c53cc71eeb51b">token</a>.text
<a name="l01446"></a>01446 
<a name="l01447"></a><a class="code" href="classantlr3_1_1tree_1_1_common_tree.html#178b965ad4652bc973bc50144ec6766c">01447</a>     __str__ = toString   
<a name="l01448"></a>01448 
<a name="l01449"></a>01449 
<a name="l01450"></a>01450 
<a name="l01451"></a><a class="code" href="classantlr3_1_1tree_1_1_common_tree.html#0ce76b03072a6099564fd50155889522">01451</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_common_tree.html#0ce76b03072a6099564fd50155889522" title="Print out a whole tree not just a node.">toStringTree</a>(self):
<a name="l01452"></a>01452         <span class="keywordflow">if</span> <span class="keywordflow">not</span> self.children:
<a name="l01453"></a>01453             <span class="keywordflow">return</span> self.<a class="code" href="classantlr3_1_1tree_1_1_common_tree.html#17f93423e6a79cccfdb34a7b052769d6" title="Override to say how a node (not a tree) should look as text.">toString</a>()
<a name="l01454"></a>01454 
<a name="l01455"></a>01455         ret = <span class="stringliteral">''</span>
<a name="l01456"></a>01456         <span class="keywordflow">if</span> <span class="keywordflow">not</span> self.<a class="code" href="classantlr3_1_1tree_1_1_common_tree.html#c129b26d27bbefade07900b1de216aba" title="Indicates the node is a nil node but may still have children, meaning the tree is...">isNil</a>():
<a name="l01457"></a>01457             ret += <span class="stringliteral">'(%s '</span> % (self.<a class="code" href="classantlr3_1_1tree_1_1_common_tree.html#17f93423e6a79cccfdb34a7b052769d6" title="Override to say how a node (not a tree) should look as text.">toString</a>())
<a name="l01458"></a>01458         
<a name="l01459"></a>01459         ret += <span class="stringliteral">' '</span>.join([child.toStringTree() <span class="keywordflow">for</span> child <span class="keywordflow">in</span> self.children])
<a name="l01460"></a>01460 
<a name="l01461"></a>01461         <span class="keywordflow">if</span> <span class="keywordflow">not</span> self.<a class="code" href="classantlr3_1_1tree_1_1_common_tree.html#c129b26d27bbefade07900b1de216aba" title="Indicates the node is a nil node but may still have children, meaning the tree is...">isNil</a>():
<a name="l01462"></a>01462             ret += <span class="stringliteral">')'</span>
<a name="l01463"></a>01463 
<a name="l01464"></a>01464         <span class="keywordflow">return</span> ret
<a name="l01465"></a>01465 
<a name="l01466"></a>01466 
<a name="l01467"></a><a class="code" href="namespaceantlr3_1_1tree.html#808854e6499a51981a2dd75387c13e03">01467</a> INVALID_NODE = CommonTree(INVALID_TOKEN)
<a name="l01468"></a>01468 
<a name="l01469"></a>01469 
<a name="l01470"></a>01470 <span class="comment">##</span>
<a name="l01471"></a>01471 <span class="comment"># A node representing erroneous token range in token stream</span>
<a name="l01472"></a><a class="code" href="classantlr3_1_1tree_1_1_common_error_node.html">01472</a> <span class="keyword">class </span><a class="code" href="classantlr3_1_1tree_1_1_common_error_node.html" title="A node representing erroneous token range in token stream.">CommonErrorNode</a>(<a class="code" href="classantlr3_1_1tree_1_1_common_tree.html" title="A tree node that is wrapper for a Token object.">CommonTree</a>):
<a name="l01473"></a>01473 
<a name="l01474"></a><a class="code" href="classantlr3_1_1tree_1_1_common_error_node.html#edaa46f31573b9d88bd11c407220465c">01474</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_common_error_node.html#edaa46f31573b9d88bd11c407220465c">__init__</a>(self, input, start, stop, exc):
<a name="l01475"></a>01475         CommonTree.__init__(self, <span class="keywordtype">None</span>)
<a name="l01476"></a>01476 
<a name="l01477"></a>01477         <span class="keywordflow">if</span> (stop <span class="keywordflow">is</span> <span class="keywordtype">None</span> <span class="keywordflow">or</span>
<a name="l01478"></a>01478             (stop.getTokenIndex() &lt; start.getTokenIndex() <span class="keywordflow">and</span>
<a name="l01479"></a>01479              stop.getType() != EOF
<a name="l01480"></a>01480              )
<a name="l01481"></a>01481             ):
<a name="l01482"></a>01482             <span class="comment"># sometimes resync does not consume a token (when LT(1) is</span>
<a name="l01483"></a>01483             <span class="comment"># in follow set.  So, stop will be 1 to left to start. adjust.</span>
<a name="l01484"></a>01484             <span class="comment"># Also handle case where start is the first token and no token</span>
<a name="l01485"></a>01485             <span class="comment"># is consumed during recovery; LT(-1) will return null.</span>
<a name="l01486"></a>01486             stop = start
<a name="l01487"></a>01487 
<a name="l01488"></a><a class="code" href="classantlr3_1_1tree_1_1_common_error_node.html#27ce9b49ae65381788c1e03679e2c8f3">01488</a>         self.<a class="code" href="classantlr3_1_1tree_1_1_common_error_node.html#27ce9b49ae65381788c1e03679e2c8f3">input</a> = input
<a name="l01489"></a><a class="code" href="classantlr3_1_1tree_1_1_common_error_node.html#4f32ff05961be85424acb2d9ccb266dd">01489</a>         self.<a class="code" href="classantlr3_1_1tree_1_1_common_error_node.html#4f32ff05961be85424acb2d9ccb266dd">start</a> = start
<a name="l01490"></a><a class="code" href="classantlr3_1_1tree_1_1_common_error_node.html#291f8772e51f6e9614af1e3a0b887831">01490</a>         self.<a class="code" href="classantlr3_1_1tree_1_1_common_error_node.html#291f8772e51f6e9614af1e3a0b887831">stop</a> = stop
<a name="l01491"></a><a class="code" href="classantlr3_1_1tree_1_1_common_error_node.html#41fd1eb50ff8d4de289d1b79047c5999">01491</a>         self.<a class="code" href="classantlr3_1_1tree_1_1_common_error_node.html#41fd1eb50ff8d4de289d1b79047c5999">trappedException</a> = exc
<a name="l01492"></a>01492 
<a name="l01493"></a>01493 
<a name="l01494"></a><a class="code" href="classantlr3_1_1tree_1_1_common_error_node.html#036cd08be8a0218e4e1eaf6b5d218c77">01494</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_common_error_node.html#036cd08be8a0218e4e1eaf6b5d218c77" title="Indicates the node is a nil node but may still have children, meaning the tree is...">isNil</a>(self):
<a name="l01495"></a>01495         <span class="keywordflow">return</span> <span class="keyword">False</span>
<a name="l01496"></a>01496 
<a name="l01497"></a>01497 
<a name="l01498"></a><a class="code" href="classantlr3_1_1tree_1_1_common_error_node.html#38d0e820d2b2f66f054f983e646106dc">01498</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_common_error_node.html#38d0e820d2b2f66f054f983e646106dc" title="Return a token type; needed for tree parsing.">getType</a>(self):
<a name="l01499"></a>01499         <span class="keywordflow">return</span> INVALID_TOKEN_TYPE
<a name="l01500"></a>01500 
<a name="l01501"></a>01501 
<a name="l01502"></a><a class="code" href="classantlr3_1_1tree_1_1_common_error_node.html#b74351a8c1d2df25dc2775728bda16ff">01502</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_common_error_node.html#b74351a8c1d2df25dc2775728bda16ff">getText</a>(self):
<a name="l01503"></a>01503         <span class="keywordflow">if</span> isinstance(self.<a class="code" href="classantlr3_1_1tree_1_1_common_error_node.html#4f32ff05961be85424acb2d9ccb266dd">start</a>, Token):
<a name="l01504"></a>01504             i = self.<a class="code" href="classantlr3_1_1tree_1_1_common_error_node.html#4f32ff05961be85424acb2d9ccb266dd">start</a>.getTokenIndex()
<a name="l01505"></a>01505             j = self.<a class="code" href="classantlr3_1_1tree_1_1_common_error_node.html#291f8772e51f6e9614af1e3a0b887831">stop</a>.getTokenIndex()
<a name="l01506"></a>01506             <span class="keywordflow">if</span> self.<a class="code" href="classantlr3_1_1tree_1_1_common_error_node.html#291f8772e51f6e9614af1e3a0b887831">stop</a>.getType() == EOF:
<a name="l01507"></a>01507                 j = self.<a class="code" href="classantlr3_1_1tree_1_1_common_error_node.html#27ce9b49ae65381788c1e03679e2c8f3">input</a>.size()
<a name="l01508"></a>01508 
<a name="l01509"></a>01509             badText = self.<a class="code" href="classantlr3_1_1tree_1_1_common_error_node.html#27ce9b49ae65381788c1e03679e2c8f3">input</a>.toString(i, j)
<a name="l01510"></a>01510 
<a name="l01511"></a>01511         <span class="keywordflow">elif</span> isinstance(self.<a class="code" href="classantlr3_1_1tree_1_1_common_error_node.html#4f32ff05961be85424acb2d9ccb266dd">start</a>, Tree):
<a name="l01512"></a>01512             badText = self.<a class="code" href="classantlr3_1_1tree_1_1_common_error_node.html#27ce9b49ae65381788c1e03679e2c8f3">input</a>.toString(self.<a class="code" href="classantlr3_1_1tree_1_1_common_error_node.html#4f32ff05961be85424acb2d9ccb266dd">start</a>, self.<a class="code" href="classantlr3_1_1tree_1_1_common_error_node.html#291f8772e51f6e9614af1e3a0b887831">stop</a>)
<a name="l01513"></a>01513 
<a name="l01514"></a>01514         <span class="keywordflow">else</span>:
<a name="l01515"></a>01515             <span class="comment"># people should subclass if they alter the tree type so this</span>
<a name="l01516"></a>01516             <span class="comment"># next one is for sure correct.</span>
<a name="l01517"></a>01517             badText = <span class="stringliteral">"&lt;unknown&gt;"</span>
<a name="l01518"></a>01518 
<a name="l01519"></a>01519         <span class="keywordflow">return</span> badText
<a name="l01520"></a>01520 
<a name="l01521"></a>01521 
<a name="l01522"></a><a class="code" href="classantlr3_1_1tree_1_1_common_error_node.html#e5c3d3ce0829035e5b47c7f5a3e59f02">01522</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_common_error_node.html#e5c3d3ce0829035e5b47c7f5a3e59f02" title="Override to say how a node (not a tree) should look as text.">toString</a>(self):
<a name="l01523"></a>01523         <span class="keywordflow">if</span> isinstance(self.<a class="code" href="classantlr3_1_1tree_1_1_common_error_node.html#41fd1eb50ff8d4de289d1b79047c5999">trappedException</a>, MissingTokenException):
<a name="l01524"></a>01524             <span class="keywordflow">return</span> (<span class="stringliteral">"&lt;missing type: "</span>
<a name="l01525"></a>01525                     + str(self.<a class="code" href="classantlr3_1_1tree_1_1_common_error_node.html#41fd1eb50ff8d4de289d1b79047c5999">trappedException</a>.getMissingType())
<a name="l01526"></a>01526                     + <span class="stringliteral">"&gt;"</span>)
<a name="l01527"></a>01527 
<a name="l01528"></a>01528         <span class="keywordflow">elif</span> isinstance(self.<a class="code" href="classantlr3_1_1tree_1_1_common_error_node.html#41fd1eb50ff8d4de289d1b79047c5999">trappedException</a>, UnwantedTokenException):
<a name="l01529"></a>01529             <span class="keywordflow">return</span> (<span class="stringliteral">"&lt;extraneous: "</span>
<a name="l01530"></a>01530                     + str(self.<a class="code" href="classantlr3_1_1tree_1_1_common_error_node.html#41fd1eb50ff8d4de289d1b79047c5999">trappedException</a>.getUnexpectedToken())
<a name="l01531"></a>01531                     + <span class="stringliteral">", resync="</span> + self.<a class="code" href="classantlr3_1_1tree_1_1_common_error_node.html#b74351a8c1d2df25dc2775728bda16ff">getText</a>() + <span class="stringliteral">"&gt;"</span>)
<a name="l01532"></a>01532 
<a name="l01533"></a>01533         <span class="keywordflow">elif</span> isinstance(self.<a class="code" href="classantlr3_1_1tree_1_1_common_error_node.html#41fd1eb50ff8d4de289d1b79047c5999">trappedException</a>, MismatchedTokenException):
<a name="l01534"></a>01534             <span class="keywordflow">return</span> (<span class="stringliteral">"&lt;mismatched token: "</span>
<a name="l01535"></a>01535                     + str(self.<a class="code" href="classantlr3_1_1tree_1_1_common_error_node.html#41fd1eb50ff8d4de289d1b79047c5999">trappedException</a>.token)
<a name="l01536"></a>01536                     + <span class="stringliteral">", resync="</span> + self.<a class="code" href="classantlr3_1_1tree_1_1_common_error_node.html#b74351a8c1d2df25dc2775728bda16ff">getText</a>() + <span class="stringliteral">"&gt;"</span>)
<a name="l01537"></a>01537 
<a name="l01538"></a>01538         <span class="keywordflow">elif</span> isinstance(self.<a class="code" href="classantlr3_1_1tree_1_1_common_error_node.html#41fd1eb50ff8d4de289d1b79047c5999">trappedException</a>, NoViableAltException):
<a name="l01539"></a>01539             <span class="keywordflow">return</span> (<span class="stringliteral">"&lt;unexpected: "</span>
<a name="l01540"></a>01540                     + str(self.<a class="code" href="classantlr3_1_1tree_1_1_common_error_node.html#41fd1eb50ff8d4de289d1b79047c5999">trappedException</a>.token)
<a name="l01541"></a>01541                     + <span class="stringliteral">", resync="</span> + self.<a class="code" href="classantlr3_1_1tree_1_1_common_error_node.html#b74351a8c1d2df25dc2775728bda16ff">getText</a>() + <span class="stringliteral">"&gt;"</span>)
<a name="l01542"></a>01542 
<a name="l01543"></a>01543         <span class="keywordflow">return</span> <span class="stringliteral">"&lt;error: "</span>+self.<a class="code" href="classantlr3_1_1tree_1_1_common_error_node.html#b74351a8c1d2df25dc2775728bda16ff">getText</a>()+<span class="stringliteral">"&gt;"</span>
<a name="l01544"></a>01544 
<a name="l01545"></a>01545 
<a name="l01546"></a>01546 <span class="comment">##</span>
<a name="l01547"></a>01547 <span class="comment"># </span>
<a name="l01548"></a>01548 <span class="comment">#     @brief A TreeAdaptor that works with any Tree implementation.</span>
<a name="l01549"></a>01549 <span class="comment">#     </span>
<a name="l01550"></a>01550 <span class="comment">#     It provides</span>
<a name="l01551"></a>01551 <span class="comment">#     really just factory methods; all the work is done by BaseTreeAdaptor.</span>
<a name="l01552"></a>01552 <span class="comment">#     If you would like to have different tokens created than ClassicToken</span>
<a name="l01553"></a>01553 <span class="comment">#     objects, you need to override this and then set the parser tree adaptor to</span>
<a name="l01554"></a>01554 <span class="comment">#     use your subclass.</span>
<a name="l01555"></a>01555 <span class="comment"># </span>
<a name="l01556"></a>01556 <span class="comment">#     To get your parser to build nodes of a different type, override</span>
<a name="l01557"></a>01557 <span class="comment">#     create(Token), errorNode(), and to be safe, YourTreeClass.dupNode().</span>
<a name="l01558"></a>01558 <span class="comment">#     dupNode is called to duplicate nodes during rewrite operations.</span>
<a name="l01559"></a>01559 <span class="comment">#     </span>
<a name="l01560"></a><a class="code" href="classantlr3_1_1tree_1_1_common_tree_adaptor.html">01560</a> <span class="keyword">class </span><a class="code" href="classantlr3_1_1tree_1_1_common_tree_adaptor.html" title="A TreeAdaptor that works with any Tree implementation.">CommonTreeAdaptor</a>(<a class="code" href="classantlr3_1_1tree_1_1_base_tree_adaptor.html" title="A TreeAdaptor that works with any Tree implementation.">BaseTreeAdaptor</a>):
<a name="l01561"></a>01561     
<a name="l01562"></a>01562     <span class="comment">##</span>
<a name="l01563"></a>01563     <span class="comment"># </span>
<a name="l01564"></a>01564     <span class="comment">#         Duplicate a node.  This is part of the factory;</span>
<a name="l01565"></a>01565     <span class="comment">#         override if you want another kind of node to be built.</span>
<a name="l01566"></a>01566     <span class="comment"># </span>
<a name="l01567"></a>01567     <span class="comment">#         I could use reflection to prevent having to override this</span>
<a name="l01568"></a>01568     <span class="comment">#         but reflection is slow.</span>
<a name="l01569"></a>01569     <span class="comment">#         </span>
<a name="l01570"></a><a class="code" href="classantlr3_1_1tree_1_1_common_tree_adaptor.html#66caf45b7bc321a41f232381c3953922">01570</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_common_tree_adaptor.html#66caf45b7bc321a41f232381c3953922" title="Duplicate a node.">dupNode</a>(self, treeNode):
<a name="l01571"></a>01571 
<a name="l01572"></a>01572         <span class="keywordflow">if</span> treeNode <span class="keywordflow">is</span> <span class="keywordtype">None</span>:
<a name="l01573"></a>01573             <span class="keywordflow">return</span> <span class="keywordtype">None</span>
<a name="l01574"></a>01574         
<a name="l01575"></a>01575         <span class="keywordflow">return</span> treeNode.dupNode()
<a name="l01576"></a>01576 
<a name="l01577"></a>01577 
<a name="l01578"></a><a class="code" href="classantlr3_1_1tree_1_1_common_tree_adaptor.html#efdc2d40c9fa9cf02f6bee961d2484cf">01578</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_common_tree_adaptor.html#efdc2d40c9fa9cf02f6bee961d2484cf" title="Create a tree node from Token object; for CommonTree type trees, then the token just...">createWithPayload</a>(self, payload):
<a name="l01579"></a>01579         <span class="keywordflow">return</span> CommonTree(payload)
<a name="l01580"></a>01580 
<a name="l01581"></a>01581 
<a name="l01582"></a>01582     <span class="comment">##</span>
<a name="l01583"></a>01583     <span class="comment"># </span>
<a name="l01584"></a>01584     <span class="comment">#         Tell me how to create a token for use with imaginary token nodes.</span>
<a name="l01585"></a>01585     <span class="comment">#         For example, there is probably no input symbol associated with imaginary</span>
<a name="l01586"></a>01586     <span class="comment">#         token DECL, but you need to create it as a payload or whatever for</span>
<a name="l01587"></a>01587     <span class="comment">#         the DECL node as in ^(DECL type ID).</span>
<a name="l01588"></a>01588     <span class="comment"># </span>
<a name="l01589"></a>01589     <span class="comment">#         If you care what the token payload objects' type is, you should</span>
<a name="l01590"></a>01590     <span class="comment">#         override this method and any other createToken variant.</span>
<a name="l01591"></a>01591     <span class="comment">#         </span>
<a name="l01592"></a><a class="code" href="classantlr3_1_1tree_1_1_common_tree_adaptor.html#cacb85b9bf6e7c352d2c3917027c9035">01592</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_common_tree_adaptor.html#cacb85b9bf6e7c352d2c3917027c9035" title="Tell me how to create a token for use with imaginary token nodes.">createToken</a>(self, fromToken=None, tokenType=None, text=None):
<a name="l01593"></a>01593         
<a name="l01594"></a>01594         <span class="keywordflow">if</span> fromToken <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span>:
<a name="l01595"></a>01595             <span class="keywordflow">return</span> CommonToken(oldToken=fromToken)
<a name="l01596"></a>01596 
<a name="l01597"></a>01597         <span class="keywordflow">return</span> CommonToken(type=tokenType, text=text)
<a name="l01598"></a>01598 
<a name="l01599"></a>01599 
<a name="l01600"></a>01600     <span class="comment">##</span>
<a name="l01601"></a>01601     <span class="comment"># </span>
<a name="l01602"></a>01602     <span class="comment">#         Track start/stop token for subtree root created for a rule.</span>
<a name="l01603"></a>01603     <span class="comment">#         Only works with Tree nodes.  For rules that match nothing,</span>
<a name="l01604"></a>01604     <span class="comment">#         seems like this will yield start=i and stop=i-1 in a nil node.</span>
<a name="l01605"></a>01605     <span class="comment">#         Might be useful info so I'll not force to be i..i.</span>
<a name="l01606"></a>01606     <span class="comment">#         </span>
<a name="l01607"></a><a class="code" href="classantlr3_1_1tree_1_1_common_tree_adaptor.html#c647518e328b72b9685b597075a1ca7d">01607</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_common_tree_adaptor.html#c647518e328b72b9685b597075a1ca7d" title="Track start/stop token for subtree root created for a rule.">setTokenBoundaries</a>(self, t, startToken, stopToken):
<a name="l01608"></a>01608         
<a name="l01609"></a>01609         <span class="keywordflow">if</span> t <span class="keywordflow">is</span> <span class="keywordtype">None</span>:
<a name="l01610"></a>01610             <span class="keywordflow">return</span>
<a name="l01611"></a>01611 
<a name="l01612"></a>01612         start = 0
<a name="l01613"></a>01613         stop = 0
<a name="l01614"></a>01614         
<a name="l01615"></a>01615         <span class="keywordflow">if</span> startToken <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span>:
<a name="l01616"></a>01616             start = startToken.index
<a name="l01617"></a>01617                 
<a name="l01618"></a>01618         <span class="keywordflow">if</span> stopToken <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span>:
<a name="l01619"></a>01619             stop = stopToken.index
<a name="l01620"></a>01620 
<a name="l01621"></a>01621         t.setTokenStartIndex(start)
<a name="l01622"></a>01622         t.setTokenStopIndex(stop)
<a name="l01623"></a>01623 
<a name="l01624"></a>01624 
<a name="l01625"></a><a class="code" href="classantlr3_1_1tree_1_1_common_tree_adaptor.html#40312ba2e965a0cbb9d754469523c5a7">01625</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_common_tree_adaptor.html#40312ba2e965a0cbb9d754469523c5a7" title="Get the token start index for this subtree; return -1 if no such index.">getTokenStartIndex</a>(self, t):
<a name="l01626"></a>01626         <span class="keywordflow">if</span> t <span class="keywordflow">is</span> <span class="keywordtype">None</span>:
<a name="l01627"></a>01627             <span class="keywordflow">return</span> -1
<a name="l01628"></a>01628         <span class="keywordflow">return</span> t.getTokenStartIndex()
<a name="l01629"></a>01629 
<a name="l01630"></a>01630 
<a name="l01631"></a><a class="code" href="classantlr3_1_1tree_1_1_common_tree_adaptor.html#fcada31780b7ef73b8cee1aa9ee612f8">01631</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_common_tree_adaptor.html#fcada31780b7ef73b8cee1aa9ee612f8" title="Get the token stop index for this subtree; return -1 if no such index.">getTokenStopIndex</a>(self, t):
<a name="l01632"></a>01632         <span class="keywordflow">if</span> t <span class="keywordflow">is</span> <span class="keywordtype">None</span>:
<a name="l01633"></a>01633             <span class="keywordflow">return</span> -1
<a name="l01634"></a>01634         <span class="keywordflow">return</span> t.getTokenStopIndex()
<a name="l01635"></a>01635 
<a name="l01636"></a>01636 
<a name="l01637"></a><a class="code" href="classantlr3_1_1tree_1_1_common_tree_adaptor.html#ec68c9489c03f72a5d1a816b9d87a116">01637</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_common_tree_adaptor.html#ec68c9489c03f72a5d1a816b9d87a116">getText</a>(self, t):
<a name="l01638"></a>01638         <span class="keywordflow">if</span> t <span class="keywordflow">is</span> <span class="keywordtype">None</span>:
<a name="l01639"></a>01639             <span class="keywordflow">return</span> <span class="keywordtype">None</span>
<a name="l01640"></a>01640         <span class="keywordflow">return</span> t.getText()
<a name="l01641"></a>01641 
<a name="l01642"></a>01642 
<a name="l01643"></a><a class="code" href="classantlr3_1_1tree_1_1_common_tree_adaptor.html#c33be816096f42f9aac4742051081a9f">01643</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_common_tree_adaptor.html#c33be816096f42f9aac4742051081a9f" title="For tree parsing, I need to know the token type of a node.">getType</a>(self, t):
<a name="l01644"></a>01644         <span class="keywordflow">if</span> t <span class="keywordflow">is</span> <span class="keywordtype">None</span>:
<a name="l01645"></a>01645             <span class="keywordflow">return</span> INVALID_TOKEN_TYPE
<a name="l01646"></a>01646         
<a name="l01647"></a>01647         <span class="keywordflow">return</span> t.getType()
<a name="l01648"></a>01648 
<a name="l01649"></a>01649 
<a name="l01650"></a>01650     <span class="comment">##</span>
<a name="l01651"></a>01651     <span class="comment"># </span>
<a name="l01652"></a>01652     <span class="comment">#         What is the Token associated with this node?  If</span>
<a name="l01653"></a>01653     <span class="comment">#         you are not using CommonTree, then you must</span>
<a name="l01654"></a>01654     <span class="comment">#         override this in your own adaptor.</span>
<a name="l01655"></a>01655     <span class="comment">#         </span>
<a name="l01656"></a><a class="code" href="classantlr3_1_1tree_1_1_common_tree_adaptor.html#a7d9b4e580e4d37018027d521018062a">01656</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_common_tree_adaptor.html#a7d9b4e580e4d37018027d521018062a" title="What is the Token associated with this node? If you are not using CommonTree, then...">getToken</a>(self, t):
<a name="l01657"></a>01657 
<a name="l01658"></a>01658         <span class="keywordflow">if</span> isinstance(t, CommonTree):
<a name="l01659"></a>01659             <span class="keywordflow">return</span> t.getToken()
<a name="l01660"></a>01660 
<a name="l01661"></a>01661         <span class="keywordflow">return</span> <span class="keywordtype">None</span> <span class="comment"># no idea what to do</span>
<a name="l01662"></a>01662 
<a name="l01663"></a>01663 
<a name="l01664"></a><a class="code" href="classantlr3_1_1tree_1_1_common_tree_adaptor.html#0fe0c48417e0377437d3f77940473bc6">01664</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_common_tree_adaptor.html#0fe0c48417e0377437d3f77940473bc6" title="Get a child 0.">getChild</a>(self, t, i):
<a name="l01665"></a>01665         <span class="keywordflow">if</span> t <span class="keywordflow">is</span> <span class="keywordtype">None</span>:
<a name="l01666"></a>01666             <span class="keywordflow">return</span> <span class="keywordtype">None</span>
<a name="l01667"></a>01667         <span class="keywordflow">return</span> t.getChild(i)
<a name="l01668"></a>01668 
<a name="l01669"></a>01669 
<a name="l01670"></a><a class="code" href="classantlr3_1_1tree_1_1_common_tree_adaptor.html#be3337e5d51734b9b351ba41285fcaf2">01670</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_common_tree_adaptor.html#be3337e5d51734b9b351ba41285fcaf2" title="How many children? If 0, then this is a leaf node.">getChildCount</a>(self, t):
<a name="l01671"></a>01671         <span class="keywordflow">if</span> t <span class="keywordflow">is</span> <span class="keywordtype">None</span>:
<a name="l01672"></a>01672             <span class="keywordflow">return</span> 0
<a name="l01673"></a>01673         <span class="keywordflow">return</span> t.getChildCount()
<a name="l01674"></a>01674 
<a name="l01675"></a>01675 
<a name="l01676"></a><a class="code" href="classantlr3_1_1tree_1_1_common_tree_adaptor.html#f40743012d3a72f2a723a76b8295c8da">01676</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_common_tree_adaptor.html#f40743012d3a72f2a723a76b8295c8da" title="Who is the parent node of this node; if null, implies node is root.">getParent</a>(self, t):
<a name="l01677"></a>01677         <span class="keywordflow">return</span> t.getParent()
<a name="l01678"></a>01678 
<a name="l01679"></a>01679 
<a name="l01680"></a><a class="code" href="classantlr3_1_1tree_1_1_common_tree_adaptor.html#2fd8d4b67f085fa15500d3e28424d5ae">01680</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_common_tree_adaptor.html#2fd8d4b67f085fa15500d3e28424d5ae" title="Who is the parent node of this node; if null, implies node is root.">setParent</a>(self, t, parent):
<a name="l01681"></a>01681         t.setParent(parent)
<a name="l01682"></a>01682 
<a name="l01683"></a>01683 
<a name="l01684"></a><a class="code" href="classantlr3_1_1tree_1_1_common_tree_adaptor.html#be25f16bea9db67ebc9b33b785bdc493">01684</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_common_tree_adaptor.html#be25f16bea9db67ebc9b33b785bdc493" title="What index is this node in the child list? Range: 0.">getChildIndex</a>(self, t):
<a name="l01685"></a>01685         <span class="keywordflow">if</span> t <span class="keywordflow">is</span> <span class="keywordtype">None</span>:
<a name="l01686"></a>01686             <span class="keywordflow">return</span> 0
<a name="l01687"></a>01687         <span class="keywordflow">return</span> t.getChildIndex()
<a name="l01688"></a>01688 
<a name="l01689"></a>01689 
<a name="l01690"></a><a class="code" href="classantlr3_1_1tree_1_1_common_tree_adaptor.html#8f18a6d37d173f60fc31ad8a0488d08c">01690</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_common_tree_adaptor.html#8f18a6d37d173f60fc31ad8a0488d08c" title="What index is this node in the child list? Range: 0.">setChildIndex</a>(self, t, index):
<a name="l01691"></a>01691         t.setChildIndex(index)
<a name="l01692"></a>01692 
<a name="l01693"></a>01693 
<a name="l01694"></a><a class="code" href="classantlr3_1_1tree_1_1_common_tree_adaptor.html#b08b04c331ae2ba461a553f7d2d7cc86">01694</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_common_tree_adaptor.html#b08b04c331ae2ba461a553f7d2d7cc86" title="Replace from start to stop child index of parent with t, which might be a list.">replaceChildren</a>(self, parent, startChildIndex, stopChildIndex, t):
<a name="l01695"></a>01695         <span class="keywordflow">if</span> parent <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span>:
<a name="l01696"></a>01696             parent.replaceChildren(startChildIndex, stopChildIndex, t)
<a name="l01697"></a>01697 
<a name="l01698"></a>01698 
<a name="l01699"></a>01699 <span class="comment">############################################################################</span>
<a name="l01700"></a>01700 <span class="comment">#</span>
<a name="l01701"></a>01701 <span class="comment"># streams</span>
<a name="l01702"></a>01702 <span class="comment">#</span>
<a name="l01703"></a>01703 <span class="comment"># TreeNodeStream</span>
<a name="l01704"></a>01704 <span class="comment"># \- BaseTree</span>
<a name="l01705"></a>01705 <span class="comment">#    \- CommonTree</span>
<a name="l01706"></a>01706 <span class="comment">#</span>
<a name="l01707"></a>01707 <span class="comment"># TreeAdaptor</span>
<a name="l01708"></a>01708 <span class="comment"># \- BaseTreeAdaptor</span>
<a name="l01709"></a>01709 <span class="comment">#    \- CommonTreeAdaptor</span>
<a name="l01710"></a>01710 <span class="comment">#</span>
<a name="l01711"></a>01711 <span class="comment">############################################################################</span>
<a name="l01712"></a>01712 
<a name="l01713"></a>01713 
<a name="l01714"></a>01714 
<a name="l01715"></a>01715 <span class="comment">##</span>
<a name="l01716"></a>01716 <span class="comment"># @brief A stream of tree nodes</span>
<a name="l01717"></a>01717 <span class="comment"># </span>
<a name="l01718"></a>01718 <span class="comment">#     It accessing nodes from a tree of some kind.</span>
<a name="l01719"></a>01719 <span class="comment">#     </span>
<a name="l01720"></a><a class="code" href="classantlr3_1_1tree_1_1_tree_node_stream.html">01720</a> <span class="keyword">class </span><a class="code" href="classantlr3_1_1tree_1_1_tree_node_stream.html" title="A stream of tree nodes.">TreeNodeStream</a>(IntStream):
<a name="l01721"></a>01721     
<a name="l01722"></a>01722     <span class="comment"># TreeNodeStream is abstract, no need to complain about not implemented</span>
<a name="l01723"></a>01723     <span class="comment"># abstract methods</span>
<a name="l01724"></a>01724     <span class="comment"># pylint: disable-msg=W0223</span>
<a name="l01725"></a>01725     
<a name="l01726"></a>01726     <span class="comment">##</span>
<a name="l01727"></a>01727     <span class="comment"># Get a tree node at an absolute index i; 0..n-1.</span>
<a name="l01728"></a>01728     <span class="comment">#         If you don't want to buffer up nodes, then this method makes no</span>
<a name="l01729"></a>01729     <span class="comment">#         sense for you.</span>
<a name="l01730"></a>01730     <span class="comment">#         </span>
<a name="l01731"></a><a class="code" href="classantlr3_1_1tree_1_1_tree_node_stream.html#888ae5ac8a0919bda008e39a63844621">01731</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_tree_node_stream.html#888ae5ac8a0919bda008e39a63844621" title="Get a tree node at an absolute index i; 0.">get</a>(self, i):
<a name="l01732"></a>01732 
<a name="l01733"></a>01733         <span class="keywordflow">raise</span> NotImplementedError
<a name="l01734"></a>01734 
<a name="l01735"></a>01735 
<a name="l01736"></a>01736     <span class="comment">##</span>
<a name="l01737"></a>01737     <span class="comment"># </span>
<a name="l01738"></a>01738     <span class="comment">#         Get tree node at current input pointer + i ahead where i=1 is next node.</span>
<a name="l01739"></a>01739     <span class="comment">#         i&lt;0 indicates nodes in the past.  So LT(-1) is previous node, but</span>
<a name="l01740"></a>01740     <span class="comment">#         implementations are not required to provide results for k &lt; -1.</span>
<a name="l01741"></a>01741     <span class="comment">#         LT(0) is undefined.  For i&gt;=n, return null.</span>
<a name="l01742"></a>01742     <span class="comment">#         Return null for LT(0) and any index that results in an absolute address</span>
<a name="l01743"></a>01743     <span class="comment">#         that is negative.</span>
<a name="l01744"></a>01744     <span class="comment"># </span>
<a name="l01745"></a>01745     <span class="comment">#         This is analogus to the LT() method of the TokenStream, but this</span>
<a name="l01746"></a>01746     <span class="comment">#         returns a tree node instead of a token.  Makes code gen identical</span>
<a name="l01747"></a>01747     <span class="comment">#         for both parser and tree grammars. :)</span>
<a name="l01748"></a>01748     <span class="comment">#         </span>
<a name="l01749"></a><a class="code" href="classantlr3_1_1tree_1_1_tree_node_stream.html#b3f67327938e377dbfb295bfa6754b3a">01749</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_tree_node_stream.html#b3f67327938e377dbfb295bfa6754b3a" title="Get tree node at current input pointer + i ahead where i=1 is next node.">LT</a>(self, k):
<a name="l01750"></a>01750 
<a name="l01751"></a>01751         <span class="keywordflow">raise</span> NotImplementedError
<a name="l01752"></a>01752 
<a name="l01753"></a>01753 
<a name="l01754"></a>01754     <span class="comment">##</span>
<a name="l01755"></a>01755     <span class="comment"># </span>
<a name="l01756"></a>01756     <span class="comment">#         Where is this stream pulling nodes from?  This is not the name, but</span>
<a name="l01757"></a>01757     <span class="comment">#         the object that provides node objects.</span>
<a name="l01758"></a>01758     <span class="comment">#         </span>
<a name="l01759"></a><a class="code" href="classantlr3_1_1tree_1_1_tree_node_stream.html#c1e276e8d018f8f3c7704e08a3e0db6a">01759</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_tree_node_stream.html#c1e276e8d018f8f3c7704e08a3e0db6a" title="Where is this stream pulling nodes from? This is not the name, but the object that...">getTreeSource</a>(self):
<a name="l01760"></a>01760 
<a name="l01761"></a>01761         <span class="keywordflow">raise</span> NotImplementedError
<a name="l01762"></a>01762     
<a name="l01763"></a>01763 
<a name="l01764"></a>01764     <span class="comment">##</span>
<a name="l01765"></a>01765     <span class="comment"># </span>
<a name="l01766"></a>01766     <span class="comment">#         If the tree associated with this stream was created from a TokenStream,</span>
<a name="l01767"></a>01767     <span class="comment">#         you can specify it here.  Used to do rule $text attribute in tree</span>
<a name="l01768"></a>01768     <span class="comment">#         parser.  Optional unless you use tree parser rule text attribute</span>
<a name="l01769"></a>01769     <span class="comment">#         or output=template and rewrite=true options.</span>
<a name="l01770"></a>01770     <span class="comment">#         </span>
<a name="l01771"></a><a class="code" href="classantlr3_1_1tree_1_1_tree_node_stream.html#ff4142514c3c7901a3312061a590dff9">01771</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_tree_node_stream.html#ff4142514c3c7901a3312061a590dff9" title="If the tree associated with this stream was created from a TokenStream, you can specify...">getTokenStream</a>(self):
<a name="l01772"></a>01772 
<a name="l01773"></a>01773         <span class="keywordflow">raise</span> NotImplementedError
<a name="l01774"></a>01774 
<a name="l01775"></a>01775 
<a name="l01776"></a>01776     <span class="comment">##</span>
<a name="l01777"></a>01777     <span class="comment"># </span>
<a name="l01778"></a>01778     <span class="comment">#         What adaptor can tell me how to interpret/navigate nodes and</span>
<a name="l01779"></a>01779     <span class="comment">#         trees.  E.g., get text of a node.</span>
<a name="l01780"></a>01780     <span class="comment">#         </span>
<a name="l01781"></a><a class="code" href="classantlr3_1_1tree_1_1_tree_node_stream.html#56e2d05209dea56a9cbc7afd19c353ff">01781</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_tree_node_stream.html#56e2d05209dea56a9cbc7afd19c353ff" title="What adaptor can tell me how to interpret/navigate nodes and trees.">getTreeAdaptor</a>(self):
<a name="l01782"></a>01782 
<a name="l01783"></a>01783         <span class="keywordflow">raise</span> NotImplementedError
<a name="l01784"></a>01784         
<a name="l01785"></a>01785 
<a name="l01786"></a>01786     <span class="comment">##</span>
<a name="l01787"></a>01787     <span class="comment"># </span>
<a name="l01788"></a>01788     <span class="comment">#         As we flatten the tree, we use UP, DOWN nodes to represent</span>
<a name="l01789"></a>01789     <span class="comment">#         the tree structure.  When debugging we need unique nodes</span>
<a name="l01790"></a>01790     <span class="comment">#         so we have to instantiate new ones.  When doing normal tree</span>
<a name="l01791"></a>01791     <span class="comment">#         parsing, it's slow and a waste of memory to create unique</span>
<a name="l01792"></a>01792     <span class="comment">#         navigation nodes.  Default should be false;</span>
<a name="l01793"></a>01793     <span class="comment">#         </span>
<a name="l01794"></a><a class="code" href="classantlr3_1_1tree_1_1_tree_node_stream.html#01e024e07cde0d1ec7b196e10684d154">01794</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_tree_node_stream.html#01e024e07cde0d1ec7b196e10684d154" title="As we flatten the tree, we use UP, DOWN nodes to represent the tree structure.">setUniqueNavigationNodes</a>(self, uniqueNavigationNodes):
<a name="l01795"></a>01795 
<a name="l01796"></a>01796         <span class="keywordflow">raise</span> NotImplementedError
<a name="l01797"></a>01797         
<a name="l01798"></a>01798 
<a name="l01799"></a>01799     <span class="comment">##</span>
<a name="l01800"></a>01800     <span class="comment"># </span>
<a name="l01801"></a>01801     <span class="comment">#         Return the text of all nodes from start to stop, inclusive.</span>
<a name="l01802"></a>01802     <span class="comment">#         If the stream does not buffer all the nodes then it can still</span>
<a name="l01803"></a>01803     <span class="comment">#         walk recursively from start until stop.  You can always return</span>
<a name="l01804"></a>01804     <span class="comment">#         null or "" too, but users should not access $ruleLabel.text in</span>
<a name="l01805"></a>01805     <span class="comment">#         an action of course in that case.</span>
<a name="l01806"></a>01806     <span class="comment">#         </span>
<a name="l01807"></a><a class="code" href="classantlr3_1_1tree_1_1_tree_node_stream.html#54f278615392d03a5a3985329ecf3627">01807</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_tree_node_stream.html#54f278615392d03a5a3985329ecf3627" title="Return the text of all nodes from start to stop, inclusive.">toString</a>(self, start, stop):
<a name="l01808"></a>01808 
<a name="l01809"></a>01809         <span class="keywordflow">raise</span> NotImplementedError
<a name="l01810"></a>01810 
<a name="l01811"></a>01811 
<a name="l01812"></a>01812     <span class="comment"># REWRITING TREES (used by tree parser)</span>
<a name="l01813"></a>01813     <span class="comment">##</span>
<a name="l01814"></a>01814     <span class="comment"># </span>
<a name="l01815"></a>01815     <span class="comment">#   Replace from start to stop child index of parent with t, which might</span>
<a name="l01816"></a>01816     <span class="comment">#         be a list.  Number of children may be different</span>
<a name="l01817"></a>01817     <span class="comment">#         after this call.  The stream is notified because it is walking the</span>
<a name="l01818"></a>01818     <span class="comment">#         tree and might need to know you are monkeying with the underlying</span>
<a name="l01819"></a>01819     <span class="comment">#         tree.  Also, it might be able to modify the node stream to avoid</span>
<a name="l01820"></a>01820     <span class="comment">#         restreaming for future phases.</span>
<a name="l01821"></a>01821     <span class="comment"># </span>
<a name="l01822"></a>01822     <span class="comment">#         If parent is null, don't do anything; must be at root of overall tree.</span>
<a name="l01823"></a>01823     <span class="comment">#         Can't replace whatever points to the parent externally.  Do nothing.</span>
<a name="l01824"></a>01824     <span class="comment">#         </span>
<a name="l01825"></a><a class="code" href="classantlr3_1_1tree_1_1_tree_node_stream.html#5706504890e239b801f6f864bdda46a1">01825</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_tree_node_stream.html#5706504890e239b801f6f864bdda46a1" title="Replace from start to stop child index of parent with t, which might be a list.">replaceChildren</a>(self, parent, startChildIndex, stopChildIndex, t):
<a name="l01826"></a>01826 
<a name="l01827"></a>01827         <span class="keywordflow">raise</span> NotImplementedError
<a name="l01828"></a>01828 
<a name="l01829"></a>01829 
<a name="l01830"></a>01830 <span class="comment">##</span>
<a name="l01831"></a>01831 <span class="comment"># @brief A buffered stream of tree nodes.</span>
<a name="l01832"></a>01832 <span class="comment"># </span>
<a name="l01833"></a>01833 <span class="comment">#     Nodes can be from a tree of ANY kind.</span>
<a name="l01834"></a>01834 <span class="comment"># </span>
<a name="l01835"></a>01835 <span class="comment">#     This node stream sucks all nodes out of the tree specified in</span>
<a name="l01836"></a>01836 <span class="comment">#     the constructor during construction and makes pointers into</span>
<a name="l01837"></a>01837 <span class="comment">#     the tree using an array of Object pointers. The stream necessarily</span>
<a name="l01838"></a>01838 <span class="comment">#     includes pointers to DOWN and UP and EOF nodes.</span>
<a name="l01839"></a>01839 <span class="comment"># </span>
<a name="l01840"></a>01840 <span class="comment">#     This stream knows how to mark/release for backtracking.</span>
<a name="l01841"></a>01841 <span class="comment"># </span>
<a name="l01842"></a>01842 <span class="comment">#     This stream is most suitable for tree interpreters that need to</span>
<a name="l01843"></a>01843 <span class="comment">#     jump around a lot or for tree parsers requiring speed (at cost of memory).</span>
<a name="l01844"></a>01844 <span class="comment">#     There is some duplicated functionality here with UnBufferedTreeNodeStream</span>
<a name="l01845"></a>01845 <span class="comment">#     but just in bookkeeping, not tree walking etc...</span>
<a name="l01846"></a>01846 <span class="comment"># </span>
<a name="l01847"></a>01847 <span class="comment">#     @see UnBufferedTreeNodeStream</span>
<a name="l01848"></a>01848 <span class="comment">#     </span>
<a name="l01849"></a><a class="code" href="classantlr3_1_1tree_1_1_common_tree_node_stream.html">01849</a> <span class="keyword">class </span><a class="code" href="classantlr3_1_1tree_1_1_common_tree_node_stream.html" title="A buffered stream of tree nodes.">CommonTreeNodeStream</a>(<a class="code" href="classantlr3_1_1tree_1_1_tree_node_stream.html" title="A stream of tree nodes.">TreeNodeStream</a>):
<a name="l01850"></a>01850     
<a name="l01851"></a><a class="code" href="classantlr3_1_1tree_1_1_common_tree_node_stream.html#82bf272b64fa224e56ef8362a1e4ca42">01851</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_common_tree_node_stream.html#82bf272b64fa224e56ef8362a1e4ca42">__init__</a>(self, *args):
<a name="l01852"></a>01852         TreeNodeStream.__init__(self)
<a name="l01853"></a>01853 
<a name="l01854"></a>01854         <span class="keywordflow">if</span> len(args) == 1:
<a name="l01855"></a>01855             adaptor = CommonTreeAdaptor()
<a name="l01856"></a>01856             tree = args[0]
<a name="l01857"></a>01857 
<a name="l01858"></a>01858             nodes = <span class="keywordtype">None</span>
<a name="l01859"></a>01859             down = <span class="keywordtype">None</span>
<a name="l01860"></a>01860             up = <span class="keywordtype">None</span>
<a name="l01861"></a>01861             eof = <span class="keywordtype">None</span>
<a name="l01862"></a>01862 
<a name="l01863"></a>01863         <span class="keywordflow">elif</span> len(args) == 2:
<a name="l01864"></a>01864             adaptor = args[0]
<a name="l01865"></a>01865             tree = args[1]
<a name="l01866"></a>01866 
<a name="l01867"></a>01867             nodes = <span class="keywordtype">None</span>
<a name="l01868"></a>01868             down = <span class="keywordtype">None</span>
<a name="l01869"></a>01869             up = <span class="keywordtype">None</span>
<a name="l01870"></a>01870             eof = <span class="keywordtype">None</span>
<a name="l01871"></a>01871 
<a name="l01872"></a>01872         <span class="keywordflow">elif</span> len(args) == 3:
<a name="l01873"></a>01873             parent = args[0]
<a name="l01874"></a>01874             start = args[1]
<a name="l01875"></a>01875             stop = args[2]
<a name="l01876"></a>01876 
<a name="l01877"></a>01877             adaptor = parent.adaptor
<a name="l01878"></a>01878             tree = parent.root
<a name="l01879"></a>01879 
<a name="l01880"></a>01880             nodes = parent.nodes[start:stop]
<a name="l01881"></a>01881             down = parent.down
<a name="l01882"></a>01882             up = parent.up
<a name="l01883"></a>01883             eof = parent.eof
<a name="l01884"></a>01884 
<a name="l01885"></a>01885         <span class="keywordflow">else</span>:
<a name="l01886"></a>01886             <span class="keywordflow">raise</span> TypeError(<span class="stringliteral">"Invalid arguments"</span>)
<a name="l01887"></a>01887         
<a name="l01888"></a>01888         <span class="comment"># all these navigation nodes are shared and hence they</span>
<a name="l01889"></a>01889         <span class="comment"># cannot contain any line/column info</span>
<a name="l01890"></a>01890         <span class="keywordflow">if</span> down <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span>:
<a name="l01891"></a><a class="code" href="classantlr3_1_1tree_1_1_common_tree_node_stream.html#857fee2c9576529b8adb63fe5175d42d">01891</a>             self.<a class="code" href="classantlr3_1_1tree_1_1_common_tree_node_stream.html#857fee2c9576529b8adb63fe5175d42d">down</a> = down
<a name="l01892"></a>01892         <span class="keywordflow">else</span>:
<a name="l01893"></a>01893             self.<a class="code" href="classantlr3_1_1tree_1_1_common_tree_node_stream.html#857fee2c9576529b8adb63fe5175d42d">down</a> = adaptor.createFromType(DOWN, <span class="stringliteral">"DOWN"</span>)
<a name="l01894"></a>01894 
<a name="l01895"></a>01895         <span class="keywordflow">if</span> up <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span>:
<a name="l01896"></a><a class="code" href="classantlr3_1_1tree_1_1_common_tree_node_stream.html#18c9c5fbe03bf3805db2628da48f85d3">01896</a>             self.<a class="code" href="classantlr3_1_1tree_1_1_common_tree_node_stream.html#18c9c5fbe03bf3805db2628da48f85d3">up</a> = up
<a name="l01897"></a>01897         <span class="keywordflow">else</span>:
<a name="l01898"></a>01898             self.<a class="code" href="classantlr3_1_1tree_1_1_common_tree_node_stream.html#18c9c5fbe03bf3805db2628da48f85d3">up</a> = adaptor.createFromType(UP, <span class="stringliteral">"UP"</span>)
<a name="l01899"></a>01899 
<a name="l01900"></a>01900         <span class="keywordflow">if</span> eof <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span>:
<a name="l01901"></a><a class="code" href="classantlr3_1_1tree_1_1_common_tree_node_stream.html#11a51527ece6ace6380d05ece5d01237">01901</a>             self.<a class="code" href="classantlr3_1_1tree_1_1_common_tree_node_stream.html#11a51527ece6ace6380d05ece5d01237">eof</a> = eof
<a name="l01902"></a>01902         <span class="keywordflow">else</span>:
<a name="l01903"></a>01903             self.<a class="code" href="classantlr3_1_1tree_1_1_common_tree_node_stream.html#11a51527ece6ace6380d05ece5d01237">eof</a> = adaptor.createFromType(EOF, <span class="stringliteral">"EOF"</span>)
<a name="l01904"></a>01904 
<a name="l01905"></a>01905         <span class="comment"># The complete mapping from stream index to tree node.</span>
<a name="l01906"></a>01906         <span class="comment"># This buffer includes pointers to DOWN, UP, and EOF nodes.</span>
<a name="l01907"></a>01907         <span class="comment"># It is built upon ctor invocation.  The elements are type</span>
<a name="l01908"></a>01908         <span class="comment">#  Object as we don't what the trees look like.</span>
<a name="l01909"></a>01909 
<a name="l01910"></a>01910         <span class="comment"># Load upon first need of the buffer so we can set token types</span>
<a name="l01911"></a>01911         <span class="comment"># of interest for reverseIndexing.  Slows us down a wee bit to</span>
<a name="l01912"></a>01912         <span class="comment"># do all of the if p==-1 testing everywhere though.</span>
<a name="l01913"></a>01913         <span class="keywordflow">if</span> nodes <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span>:
<a name="l01914"></a><a class="code" href="classantlr3_1_1tree_1_1_common_tree_node_stream.html#6fd4769bfd8467ba997c070d44a6f969">01914</a>             self.<a class="code" href="classantlr3_1_1tree_1_1_common_tree_node_stream.html#6fd4769bfd8467ba997c070d44a6f969">nodes</a> = nodes
<a name="l01915"></a>01915         <span class="keywordflow">else</span>:
<a name="l01916"></a>01916             self.<a class="code" href="classantlr3_1_1tree_1_1_common_tree_node_stream.html#6fd4769bfd8467ba997c070d44a6f969">nodes</a> = []
<a name="l01917"></a>01917 
<a name="l01918"></a>01918         <span class="comment"># Pull nodes from which tree?</span>
<a name="l01919"></a><a class="code" href="classantlr3_1_1tree_1_1_common_tree_node_stream.html#f29fbf5f7ba9359bcba318df28f01cbb">01919</a>         self.<a class="code" href="classantlr3_1_1tree_1_1_common_tree_node_stream.html#f29fbf5f7ba9359bcba318df28f01cbb">root</a> = tree
<a name="l01920"></a>01920 
<a name="l01921"></a>01921         <span class="comment"># IF this tree (root) was created from a token stream, track it.</span>
<a name="l01922"></a>01922         self.<a class="code" href="classantlr3_1_1tree_1_1_common_tree_node_stream.html">tokens</a> = <span class="keywordtype">None</span>
<a name="l01923"></a>01923 
<a name="l01924"></a>01924         <span class="comment"># What tree adaptor was used to build these trees</span>
<a name="l01925"></a><a class="code" href="classantlr3_1_1tree_1_1_common_tree_node_stream.html#4cb8d24591d660ede853683715d9c259">01925</a>         self.<a class="code" href="classantlr3_1_1tree_1_1_common_tree_node_stream.html#4cb8d24591d660ede853683715d9c259">adaptor</a> = adaptor
<a name="l01926"></a>01926 
<a name="l01927"></a>01927         <span class="comment"># Reuse same DOWN, UP navigation nodes unless this is true</span>
<a name="l01928"></a><a class="code" href="classantlr3_1_1tree_1_1_common_tree_node_stream.html#d392bb479eb28af2daeaeb7e38746c1e">01928</a>         self.<a class="code" href="classantlr3_1_1tree_1_1_common_tree_node_stream.html#d392bb479eb28af2daeaeb7e38746c1e">uniqueNavigationNodes</a> = <span class="keyword">False</span>
<a name="l01929"></a>01929 
<a name="l01930"></a>01930         <span class="comment"># The index into the nodes list of the current node (next node</span>
<a name="l01931"></a>01931         <span class="comment"># to consume).  If -1, nodes array not filled yet.</span>
<a name="l01932"></a><a class="code" href="classantlr3_1_1tree_1_1_common_tree_node_stream.html#f952ea7c71fee9a7e1cd69d582cb03fa">01932</a>         self.<a class="code" href="classantlr3_1_1tree_1_1_common_tree_node_stream.html#f952ea7c71fee9a7e1cd69d582cb03fa">p</a> = -1
<a name="l01933"></a>01933 
<a name="l01934"></a>01934         <span class="comment"># Track the last mark() call result value for use in rewind().</span>
<a name="l01935"></a><a class="code" href="classantlr3_1_1tree_1_1_common_tree_node_stream.html#466ba4f77dbcbd567811c994d70d6831">01935</a>         self.<a class="code" href="classantlr3_1_1tree_1_1_common_tree_node_stream.html#466ba4f77dbcbd567811c994d70d6831">lastMarker</a> = <span class="keywordtype">None</span>
<a name="l01936"></a>01936 
<a name="l01937"></a>01937         <span class="comment"># Stack of indexes used for push/pop calls</span>
<a name="l01938"></a><a class="code" href="classantlr3_1_1tree_1_1_common_tree_node_stream.html#29a39b423a21e9a94522a5cfeab3af8e">01938</a>         self.<a class="code" href="classantlr3_1_1tree_1_1_common_tree_node_stream.html#29a39b423a21e9a94522a5cfeab3af8e">calls</a> = []
<a name="l01939"></a>01939 
<a name="l01940"></a>01940 
<a name="l01941"></a>01941     <span class="comment">##</span>
<a name="l01942"></a>01942     <span class="comment"># Walk tree with depth-first-search and fill nodes buffer.</span>
<a name="l01943"></a>01943     <span class="comment">#         Don't do DOWN, UP nodes if its a list (t is isNil).</span>
<a name="l01944"></a>01944     <span class="comment">#         </span>
<a name="l01945"></a><a class="code" href="classantlr3_1_1tree_1_1_common_tree_node_stream.html#c424d30723912fdecf2fefff67d5dabe">01945</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_common_tree_node_stream.html#c424d30723912fdecf2fefff67d5dabe" title="Walk tree with depth-first-search and fill nodes buffer.">fillBuffer</a>(self):
<a name="l01946"></a>01946 
<a name="l01947"></a>01947         self.<a class="code" href="classantlr3_1_1tree_1_1_common_tree_node_stream.html#a23c2bfc8c858fc1de46abfa1c94391c">_fillBuffer</a>(self.<a class="code" href="classantlr3_1_1tree_1_1_common_tree_node_stream.html#f29fbf5f7ba9359bcba318df28f01cbb">root</a>)
<a name="l01948"></a>01948         self.<a class="code" href="classantlr3_1_1tree_1_1_common_tree_node_stream.html#f952ea7c71fee9a7e1cd69d582cb03fa">p</a> = 0 <span class="comment"># buffer of nodes intialized now</span>
<a name="l01949"></a>01949 
<a name="l01950"></a>01950 
<a name="l01951"></a><a class="code" href="classantlr3_1_1tree_1_1_common_tree_node_stream.html#a23c2bfc8c858fc1de46abfa1c94391c">01951</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_common_tree_node_stream.html#a23c2bfc8c858fc1de46abfa1c94391c">_fillBuffer</a>(self, t):
<a name="l01952"></a>01952         nil = self.<a class="code" href="classantlr3_1_1tree_1_1_common_tree_node_stream.html#4cb8d24591d660ede853683715d9c259">adaptor</a>.isNil(t)
<a name="l01953"></a>01953         
<a name="l01954"></a>01954         <span class="keywordflow">if</span> <span class="keywordflow">not</span> nil:
<a name="l01955"></a>01955             self.<a class="code" href="classantlr3_1_1tree_1_1_common_tree_node_stream.html#6fd4769bfd8467ba997c070d44a6f969">nodes</a>.append(t) <span class="comment"># add this node</span>
<a name="l01956"></a>01956 
<a name="l01957"></a>01957         <span class="comment"># add DOWN node if t has children</span>
<a name="l01958"></a>01958         n = self.<a class="code" href="classantlr3_1_1tree_1_1_common_tree_node_stream.html#4cb8d24591d660ede853683715d9c259">adaptor</a>.getChildCount(t)
<a name="l01959"></a>01959         <span class="keywordflow">if</span> <span class="keywordflow">not</span> nil <span class="keywordflow">and</span> n &gt; 0:
<a name="l01960"></a>01960             self.<a class="code" href="classantlr3_1_1tree_1_1_common_tree_node_stream.html#5dd8312f14f00a200538008e280d58a4" title="As we flatten the tree, we use UP, DOWN nodes to represent the tree structure.">addNavigationNode</a>(DOWN)
<a name="l01961"></a>01961 
<a name="l01962"></a>01962         <span class="comment"># and now add all its children</span>
<a name="l01963"></a>01963         <span class="keywordflow">for</span> c <span class="keywordflow">in</span> range(n):
<a name="l01964"></a>01964             self.<a class="code" href="classantlr3_1_1tree_1_1_common_tree_node_stream.html#a23c2bfc8c858fc1de46abfa1c94391c">_fillBuffer</a>(self.<a class="code" href="classantlr3_1_1tree_1_1_common_tree_node_stream.html#4cb8d24591d660ede853683715d9c259">adaptor</a>.getChild(t, c))
<a name="l01965"></a>01965 
<a name="l01966"></a>01966         <span class="comment"># add UP node if t has children</span>
<a name="l01967"></a>01967         <span class="keywordflow">if</span> <span class="keywordflow">not</span> nil <span class="keywordflow">and</span> n &gt; 0:
<a name="l01968"></a>01968             self.<a class="code" href="classantlr3_1_1tree_1_1_common_tree_node_stream.html#5dd8312f14f00a200538008e280d58a4" title="As we flatten the tree, we use UP, DOWN nodes to represent the tree structure.">addNavigationNode</a>(UP)
<a name="l01969"></a>01969 
<a name="l01970"></a>01970 
<a name="l01971"></a>01971     <span class="comment">##</span>
<a name="l01972"></a>01972     <span class="comment"># What is the stream index for node? 0..n-1</span>
<a name="l01973"></a>01973     <span class="comment">#         Return -1 if node not found.</span>
<a name="l01974"></a>01974     <span class="comment">#         </span>
<a name="l01975"></a><a class="code" href="classantlr3_1_1tree_1_1_common_tree_node_stream.html#ecfd6f2d6341e965e89414e2619bca51">01975</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_common_tree_node_stream.html#ecfd6f2d6341e965e89414e2619bca51" title="What is the stream index for node? 0.">getNodeIndex</a>(self, node):
<a name="l01976"></a>01976         
<a name="l01977"></a>01977         <span class="keywordflow">if</span> self.<a class="code" href="classantlr3_1_1tree_1_1_common_tree_node_stream.html#f952ea7c71fee9a7e1cd69d582cb03fa">p</a> == -1:
<a name="l01978"></a>01978             self.<a class="code" href="classantlr3_1_1tree_1_1_common_tree_node_stream.html#c424d30723912fdecf2fefff67d5dabe" title="Walk tree with depth-first-search and fill nodes buffer.">fillBuffer</a>()
<a name="l01979"></a>01979 
<a name="l01980"></a>01980         <span class="keywordflow">for</span> i, t <span class="keywordflow">in</span> enumerate(self.<a class="code" href="classantlr3_1_1tree_1_1_common_tree_node_stream.html#6fd4769bfd8467ba997c070d44a6f969">nodes</a>):
<a name="l01981"></a>01981             <span class="keywordflow">if</span> t == node:
<a name="l01982"></a>01982                 <span class="keywordflow">return</span> i
<a name="l01983"></a>01983 
<a name="l01984"></a>01984         <span class="keywordflow">return</span> -1
<a name="l01985"></a>01985 
<a name="l01986"></a>01986 
<a name="l01987"></a>01987     <span class="comment">##</span>
<a name="l01988"></a>01988     <span class="comment"># </span>
<a name="l01989"></a>01989     <span class="comment">#         As we flatten the tree, we use UP, DOWN nodes to represent</span>
<a name="l01990"></a>01990     <span class="comment">#         the tree structure.  When debugging we need unique nodes</span>
<a name="l01991"></a>01991     <span class="comment">#         so instantiate new ones when uniqueNavigationNodes is true.</span>
<a name="l01992"></a>01992     <span class="comment">#         </span>
<a name="l01993"></a><a class="code" href="classantlr3_1_1tree_1_1_common_tree_node_stream.html#5dd8312f14f00a200538008e280d58a4">01993</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_common_tree_node_stream.html#5dd8312f14f00a200538008e280d58a4" title="As we flatten the tree, we use UP, DOWN nodes to represent the tree structure.">addNavigationNode</a>(self, ttype):
<a name="l01994"></a>01994         
<a name="l01995"></a>01995         navNode = <span class="keywordtype">None</span>
<a name="l01996"></a>01996         
<a name="l01997"></a>01997         <span class="keywordflow">if</span> ttype == DOWN:
<a name="l01998"></a>01998             <span class="keywordflow">if</span> self.<a class="code" href="classantlr3_1_1tree_1_1_common_tree_node_stream.html#2da28cd67fa34607674c174bab4681fb">hasUniqueNavigationNodes</a>():
<a name="l01999"></a>01999                 navNode = self.<a class="code" href="classantlr3_1_1tree_1_1_common_tree_node_stream.html#4cb8d24591d660ede853683715d9c259">adaptor</a>.createFromType(DOWN, <span class="stringliteral">"DOWN"</span>)
<a name="l02000"></a>02000 
<a name="l02001"></a>02001             <span class="keywordflow">else</span>:
<a name="l02002"></a>02002                 navNode = self.<a class="code" href="classantlr3_1_1tree_1_1_common_tree_node_stream.html#857fee2c9576529b8adb63fe5175d42d">down</a>
<a name="l02003"></a>02003 
<a name="l02004"></a>02004         <span class="keywordflow">else</span>:
<a name="l02005"></a>02005             <span class="keywordflow">if</span> self.<a class="code" href="classantlr3_1_1tree_1_1_common_tree_node_stream.html#2da28cd67fa34607674c174bab4681fb">hasUniqueNavigationNodes</a>():
<a name="l02006"></a>02006                 navNode = self.<a class="code" href="classantlr3_1_1tree_1_1_common_tree_node_stream.html#4cb8d24591d660ede853683715d9c259">adaptor</a>.createFromType(UP, <span class="stringliteral">"UP"</span>)
<a name="l02007"></a>02007                 
<a name="l02008"></a>02008             <span class="keywordflow">else</span>:
<a name="l02009"></a>02009                 navNode = self.<a class="code" href="classantlr3_1_1tree_1_1_common_tree_node_stream.html#18c9c5fbe03bf3805db2628da48f85d3">up</a>
<a name="l02010"></a>02010 
<a name="l02011"></a>02011         self.<a class="code" href="classantlr3_1_1tree_1_1_common_tree_node_stream.html#6fd4769bfd8467ba997c070d44a6f969">nodes</a>.append(navNode)
<a name="l02012"></a>02012 
<a name="l02013"></a>02013 
<a name="l02014"></a><a class="code" href="classantlr3_1_1tree_1_1_common_tree_node_stream.html#209ef3752d60c11954e0d107684fa2ab">02014</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_common_tree_node_stream.html#209ef3752d60c11954e0d107684fa2ab" title="Get a tree node at an absolute index i; 0.">get</a>(self, i):
<a name="l02015"></a>02015         <span class="keywordflow">if</span> self.<a class="code" href="classantlr3_1_1tree_1_1_common_tree_node_stream.html#f952ea7c71fee9a7e1cd69d582cb03fa">p</a> == -1:
<a name="l02016"></a>02016             self.<a class="code" href="classantlr3_1_1tree_1_1_common_tree_node_stream.html#c424d30723912fdecf2fefff67d5dabe" title="Walk tree with depth-first-search and fill nodes buffer.">fillBuffer</a>()
<a name="l02017"></a>02017 
<a name="l02018"></a>02018         <span class="keywordflow">return</span> self.<a class="code" href="classantlr3_1_1tree_1_1_common_tree_node_stream.html#6fd4769bfd8467ba997c070d44a6f969">nodes</a>[i]
<a name="l02019"></a>02019 
<a name="l02020"></a>02020 
<a name="l02021"></a><a class="code" href="classantlr3_1_1tree_1_1_common_tree_node_stream.html#27553e8dd95fda1fd4d53667577d2a97">02021</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_common_tree_node_stream.html#27553e8dd95fda1fd4d53667577d2a97" title="Get tree node at current input pointer + i ahead where i=1 is next node.">LT</a>(self, k):
<a name="l02022"></a>02022         <span class="keywordflow">if</span> self.<a class="code" href="classantlr3_1_1tree_1_1_common_tree_node_stream.html#f952ea7c71fee9a7e1cd69d582cb03fa">p</a> == -1:
<a name="l02023"></a>02023             self.<a class="code" href="classantlr3_1_1tree_1_1_common_tree_node_stream.html#c424d30723912fdecf2fefff67d5dabe" title="Walk tree with depth-first-search and fill nodes buffer.">fillBuffer</a>()
<a name="l02024"></a>02024 
<a name="l02025"></a>02025         <span class="keywordflow">if</span> k == 0:
<a name="l02026"></a>02026             <span class="keywordflow">return</span> <span class="keywordtype">None</span>
<a name="l02027"></a>02027 
<a name="l02028"></a>02028         <span class="keywordflow">if</span> k &lt; 0:
<a name="l02029"></a>02029             <span class="keywordflow">return</span> self.<a class="code" href="classantlr3_1_1tree_1_1_common_tree_node_stream.html#e16f9f389e69b63e3744a1db4d123bf7" title="Look backwards k nodes.">LB</a>(-k)
<a name="l02030"></a>02030 
<a name="l02031"></a>02031         <span class="keywordflow">if</span> self.<a class="code" href="classantlr3_1_1tree_1_1_common_tree_node_stream.html#f952ea7c71fee9a7e1cd69d582cb03fa">p</a> + k - 1 &gt;= len(self.<a class="code" href="classantlr3_1_1tree_1_1_common_tree_node_stream.html#6fd4769bfd8467ba997c070d44a6f969">nodes</a>):
<a name="l02032"></a>02032             <span class="keywordflow">return</span> self.<a class="code" href="classantlr3_1_1tree_1_1_common_tree_node_stream.html#11a51527ece6ace6380d05ece5d01237">eof</a>
<a name="l02033"></a>02033 
<a name="l02034"></a>02034         <span class="keywordflow">return</span> self.<a class="code" href="classantlr3_1_1tree_1_1_common_tree_node_stream.html#6fd4769bfd8467ba997c070d44a6f969">nodes</a>[self.<a class="code" href="classantlr3_1_1tree_1_1_common_tree_node_stream.html#f952ea7c71fee9a7e1cd69d582cb03fa">p</a> + k - 1]
<a name="l02035"></a>02035     
<a name="l02036"></a>02036 
<a name="l02037"></a><a class="code" href="classantlr3_1_1tree_1_1_common_tree_node_stream.html#358784a92a76ff1abdb0fa987aafeb11">02037</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_common_tree_node_stream.html#358784a92a76ff1abdb0fa987aafeb11">getCurrentSymbol</a>(self):
<a name="l02038"></a>02038         <span class="keywordflow">return</span> self.<a class="code" href="classantlr3_1_1tree_1_1_common_tree_node_stream.html#27553e8dd95fda1fd4d53667577d2a97" title="Get tree node at current input pointer + i ahead where i=1 is next node.">LT</a>(1)
<a name="l02039"></a>02039 
<a name="l02040"></a>02040 
<a name="l02041"></a>02041     <span class="comment">##</span>
<a name="l02042"></a>02042     <span class="comment"># Look backwards k nodes</span>
<a name="l02043"></a><a class="code" href="classantlr3_1_1tree_1_1_common_tree_node_stream.html#e16f9f389e69b63e3744a1db4d123bf7">02043</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_common_tree_node_stream.html#e16f9f389e69b63e3744a1db4d123bf7" title="Look backwards k nodes.">LB</a>(self, k):
<a name="l02044"></a>02044         
<a name="l02045"></a>02045         <span class="keywordflow">if</span> k == 0:
<a name="l02046"></a>02046             <span class="keywordflow">return</span> <span class="keywordtype">None</span>
<a name="l02047"></a>02047 
<a name="l02048"></a>02048         <span class="keywordflow">if</span> self.<a class="code" href="classantlr3_1_1tree_1_1_common_tree_node_stream.html#f952ea7c71fee9a7e1cd69d582cb03fa">p</a> - k &lt; 0:
<a name="l02049"></a>02049             <span class="keywordflow">return</span> <span class="keywordtype">None</span>
<a name="l02050"></a>02050 
<a name="l02051"></a>02051         <span class="keywordflow">return</span> self.<a class="code" href="classantlr3_1_1tree_1_1_common_tree_node_stream.html#6fd4769bfd8467ba997c070d44a6f969">nodes</a>[self.<a class="code" href="classantlr3_1_1tree_1_1_common_tree_node_stream.html#f952ea7c71fee9a7e1cd69d582cb03fa">p</a> - k]
<a name="l02052"></a>02052 
<a name="l02053"></a>02053 
<a name="l02054"></a><a class="code" href="classantlr3_1_1tree_1_1_common_tree_node_stream.html#425e1afef2a44d9504151d3ed42893bf">02054</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_common_tree_node_stream.html#425e1afef2a44d9504151d3ed42893bf" title="Where is this stream pulling nodes from? This is not the name, but the object that...">getTreeSource</a>(self):
<a name="l02055"></a>02055         <span class="keywordflow">return</span> self.<a class="code" href="classantlr3_1_1tree_1_1_common_tree_node_stream.html#f29fbf5f7ba9359bcba318df28f01cbb">root</a>
<a name="l02056"></a>02056 
<a name="l02057"></a>02057 
<a name="l02058"></a><a class="code" href="classantlr3_1_1tree_1_1_common_tree_node_stream.html#96c8f7e6ea372927453d31754f81c87d">02058</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_common_tree_node_stream.html#96c8f7e6ea372927453d31754f81c87d">getSourceName</a>(self):
<a name="l02059"></a>02059         <span class="keywordflow">return</span> self.<a class="code" href="classantlr3_1_1tree_1_1_common_tree_node_stream.html#a81cef07b061b5a5e0bb66033bd9fa01" title="If the tree associated with this stream was created from a TokenStream, you can specify...">getTokenStream</a>().getSourceName()
<a name="l02060"></a>02060 
<a name="l02061"></a>02061 
<a name="l02062"></a><a class="code" href="classantlr3_1_1tree_1_1_common_tree_node_stream.html#a81cef07b061b5a5e0bb66033bd9fa01">02062</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_common_tree_node_stream.html#a81cef07b061b5a5e0bb66033bd9fa01" title="If the tree associated with this stream was created from a TokenStream, you can specify...">getTokenStream</a>(self):
<a name="l02063"></a>02063         <span class="keywordflow">return</span> self.<a class="code" href="classantlr3_1_1tree_1_1_common_tree_node_stream.html">tokens</a>
<a name="l02064"></a>02064 
<a name="l02065"></a>02065 
<a name="l02066"></a><a class="code" href="classantlr3_1_1tree_1_1_common_tree_node_stream.html#921bce70ba37d0c9b5b7d526cb9472e4">02066</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_common_tree_node_stream.html#921bce70ba37d0c9b5b7d526cb9472e4">setTokenStream</a>(self, tokens):
<a name="l02067"></a>02067         self.<a class="code" href="classantlr3_1_1tree_1_1_common_tree_node_stream.html">tokens</a> = tokens
<a name="l02068"></a>02068 
<a name="l02069"></a>02069 
<a name="l02070"></a><a class="code" href="classantlr3_1_1tree_1_1_common_tree_node_stream.html#92e3da545c94935a9d5b24a7fa8dcf1d">02070</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_common_tree_node_stream.html#92e3da545c94935a9d5b24a7fa8dcf1d" title="What adaptor can tell me how to interpret/navigate nodes and trees.">getTreeAdaptor</a>(self):
<a name="l02071"></a>02071         <span class="keywordflow">return</span> self.<a class="code" href="classantlr3_1_1tree_1_1_common_tree_node_stream.html#4cb8d24591d660ede853683715d9c259">adaptor</a>
<a name="l02072"></a>02072 
<a name="l02073"></a>02073 
<a name="l02074"></a><a class="code" href="classantlr3_1_1tree_1_1_common_tree_node_stream.html#2da28cd67fa34607674c174bab4681fb">02074</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_common_tree_node_stream.html#2da28cd67fa34607674c174bab4681fb">hasUniqueNavigationNodes</a>(self):
<a name="l02075"></a>02075         <span class="keywordflow">return</span> self.<a class="code" href="classantlr3_1_1tree_1_1_common_tree_node_stream.html#d392bb479eb28af2daeaeb7e38746c1e">uniqueNavigationNodes</a>
<a name="l02076"></a>02076 
<a name="l02077"></a>02077 
<a name="l02078"></a><a class="code" href="classantlr3_1_1tree_1_1_common_tree_node_stream.html#a9c9b231bf096a658bae96be8bd7a18b">02078</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_common_tree_node_stream.html#a9c9b231bf096a658bae96be8bd7a18b" title="As we flatten the tree, we use UP, DOWN nodes to represent the tree structure.">setUniqueNavigationNodes</a>(self, uniqueNavigationNodes):
<a name="l02079"></a>02079         self.<a class="code" href="classantlr3_1_1tree_1_1_common_tree_node_stream.html#d392bb479eb28af2daeaeb7e38746c1e">uniqueNavigationNodes</a> = uniqueNavigationNodes
<a name="l02080"></a>02080 
<a name="l02081"></a>02081 
<a name="l02082"></a><a class="code" href="classantlr3_1_1tree_1_1_common_tree_node_stream.html#fdf79e897017e74e0d15141755841120">02082</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_common_tree_node_stream.html#fdf79e897017e74e0d15141755841120">consume</a>(self):
<a name="l02083"></a>02083         <span class="keywordflow">if</span> self.<a class="code" href="classantlr3_1_1tree_1_1_common_tree_node_stream.html#f952ea7c71fee9a7e1cd69d582cb03fa">p</a> == -1:
<a name="l02084"></a>02084             self.<a class="code" href="classantlr3_1_1tree_1_1_common_tree_node_stream.html#c424d30723912fdecf2fefff67d5dabe" title="Walk tree with depth-first-search and fill nodes buffer.">fillBuffer</a>()
<a name="l02085"></a>02085             
<a name="l02086"></a>02086         self.<a class="code" href="classantlr3_1_1tree_1_1_common_tree_node_stream.html#f952ea7c71fee9a7e1cd69d582cb03fa">p</a> += 1
<a name="l02087"></a>02087 
<a name="l02088"></a>02088         
<a name="l02089"></a><a class="code" href="classantlr3_1_1tree_1_1_common_tree_node_stream.html#dd0af0e1682af0bfe78c6f9a126ee9d2">02089</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_common_tree_node_stream.html#dd0af0e1682af0bfe78c6f9a126ee9d2">LA</a>(self, i):
<a name="l02090"></a>02090         <span class="keywordflow">return</span> self.<a class="code" href="classantlr3_1_1tree_1_1_common_tree_node_stream.html#4cb8d24591d660ede853683715d9c259">adaptor</a>.getType(self.<a class="code" href="classantlr3_1_1tree_1_1_common_tree_node_stream.html#27553e8dd95fda1fd4d53667577d2a97" title="Get tree node at current input pointer + i ahead where i=1 is next node.">LT</a>(i))
<a name="l02091"></a>02091 
<a name="l02092"></a>02092 
<a name="l02093"></a><a class="code" href="classantlr3_1_1tree_1_1_common_tree_node_stream.html#d01201400a7771e08f49d21ba977628e">02093</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_common_tree_node_stream.html#d01201400a7771e08f49d21ba977628e">mark</a>(self):
<a name="l02094"></a>02094         <span class="keywordflow">if</span> self.<a class="code" href="classantlr3_1_1tree_1_1_common_tree_node_stream.html#f952ea7c71fee9a7e1cd69d582cb03fa">p</a> == -1:
<a name="l02095"></a>02095             self.<a class="code" href="classantlr3_1_1tree_1_1_common_tree_node_stream.html#c424d30723912fdecf2fefff67d5dabe" title="Walk tree with depth-first-search and fill nodes buffer.">fillBuffer</a>()
<a name="l02096"></a>02096 
<a name="l02097"></a>02097         
<a name="l02098"></a>02098         self.<a class="code" href="classantlr3_1_1tree_1_1_common_tree_node_stream.html#466ba4f77dbcbd567811c994d70d6831">lastMarker</a> = self.<a class="code" href="classantlr3_1_1tree_1_1_common_tree_node_stream.html#6f2d2860bf10160ce2e0932027f831a0">index</a>()
<a name="l02099"></a>02099         <span class="keywordflow">return</span> self.<a class="code" href="classantlr3_1_1tree_1_1_common_tree_node_stream.html#466ba4f77dbcbd567811c994d70d6831">lastMarker</a>
<a name="l02100"></a>02100 
<a name="l02101"></a>02101 
<a name="l02102"></a><a class="code" href="classantlr3_1_1tree_1_1_common_tree_node_stream.html#f6f1e34aebe0cbabcf50d7e4f70ce949">02102</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_common_tree_node_stream.html#f6f1e34aebe0cbabcf50d7e4f70ce949">release</a>(self, marker=None):
<a name="l02103"></a>02103         <span class="comment"># no resources to release</span>
<a name="l02104"></a>02104 
<a name="l02105"></a>02105         <span class="keywordflow">pass</span>
<a name="l02106"></a>02106 
<a name="l02107"></a>02107 
<a name="l02108"></a><a class="code" href="classantlr3_1_1tree_1_1_common_tree_node_stream.html#6f2d2860bf10160ce2e0932027f831a0">02108</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_common_tree_node_stream.html#6f2d2860bf10160ce2e0932027f831a0">index</a>(self):
<a name="l02109"></a>02109         <span class="keywordflow">return</span> self.p
<a name="l02110"></a>02110 
<a name="l02111"></a>02111 
<a name="l02112"></a><a class="code" href="classantlr3_1_1tree_1_1_common_tree_node_stream.html#95ec76703d4bed88250863ec7e101972">02112</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_common_tree_node_stream.html#95ec76703d4bed88250863ec7e101972">rewind</a>(self, marker=None):
<a name="l02113"></a>02113         <span class="keywordflow">if</span> marker <span class="keywordflow">is</span> <span class="keywordtype">None</span>:
<a name="l02114"></a>02114             marker = self.<a class="code" href="classantlr3_1_1tree_1_1_common_tree_node_stream.html#466ba4f77dbcbd567811c994d70d6831">lastMarker</a>
<a name="l02115"></a>02115             
<a name="l02116"></a>02116         self.<a class="code" href="classantlr3_1_1tree_1_1_common_tree_node_stream.html#6969e96b961fe00dad7fed37865dc6e2">seek</a>(marker)
<a name="l02117"></a>02117 
<a name="l02118"></a>02118 
<a name="l02119"></a><a class="code" href="classantlr3_1_1tree_1_1_common_tree_node_stream.html#6969e96b961fe00dad7fed37865dc6e2">02119</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_common_tree_node_stream.html#6969e96b961fe00dad7fed37865dc6e2">seek</a>(self, index):
<a name="l02120"></a>02120         <span class="keywordflow">if</span> self.<a class="code" href="classantlr3_1_1tree_1_1_common_tree_node_stream.html#f952ea7c71fee9a7e1cd69d582cb03fa">p</a> == -1:
<a name="l02121"></a>02121             self.<a class="code" href="classantlr3_1_1tree_1_1_common_tree_node_stream.html#c424d30723912fdecf2fefff67d5dabe" title="Walk tree with depth-first-search and fill nodes buffer.">fillBuffer</a>()
<a name="l02122"></a>02122 
<a name="l02123"></a>02123         self.<a class="code" href="classantlr3_1_1tree_1_1_common_tree_node_stream.html#f952ea7c71fee9a7e1cd69d582cb03fa">p</a> = index
<a name="l02124"></a>02124 
<a name="l02125"></a>02125 
<a name="l02126"></a>02126     <span class="comment">##</span>
<a name="l02127"></a>02127     <span class="comment"># </span>
<a name="l02128"></a>02128     <span class="comment">#         Make stream jump to a new location, saving old location.</span>
<a name="l02129"></a>02129     <span class="comment">#         Switch back with pop().</span>
<a name="l02130"></a>02130     <span class="comment">#         </span>
<a name="l02131"></a><a class="code" href="classantlr3_1_1tree_1_1_common_tree_node_stream.html#63f0c6b23d9b62fcd2c3b231e256ffd7">02131</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_common_tree_node_stream.html#63f0c6b23d9b62fcd2c3b231e256ffd7" title="Make stream jump to a new location, saving old location.">push</a>(self, index):
<a name="l02132"></a>02132 
<a name="l02133"></a>02133         self.<a class="code" href="classantlr3_1_1tree_1_1_common_tree_node_stream.html#29a39b423a21e9a94522a5cfeab3af8e">calls</a>.append(self.<a class="code" href="classantlr3_1_1tree_1_1_common_tree_node_stream.html#f952ea7c71fee9a7e1cd69d582cb03fa">p</a>) <span class="comment"># save current index</span>
<a name="l02134"></a>02134         self.<a class="code" href="classantlr3_1_1tree_1_1_common_tree_node_stream.html#6969e96b961fe00dad7fed37865dc6e2">seek</a>(index)
<a name="l02135"></a>02135 
<a name="l02136"></a>02136 
<a name="l02137"></a>02137     <span class="comment">##</span>
<a name="l02138"></a>02138     <span class="comment"># </span>
<a name="l02139"></a>02139     <span class="comment">#         Seek back to previous index saved during last push() call.</span>
<a name="l02140"></a>02140     <span class="comment">#         Return top of stack (return index).</span>
<a name="l02141"></a>02141     <span class="comment">#         </span>
<a name="l02142"></a><a class="code" href="classantlr3_1_1tree_1_1_common_tree_node_stream.html#c70e111551ce45d037bf3c7fd509c589">02142</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_common_tree_node_stream.html#c70e111551ce45d037bf3c7fd509c589" title="Seek back to previous index saved during last push() call.">pop</a>(self):
<a name="l02143"></a>02143 
<a name="l02144"></a>02144         ret = self.<a class="code" href="classantlr3_1_1tree_1_1_common_tree_node_stream.html#29a39b423a21e9a94522a5cfeab3af8e">calls</a>.pop(-1)
<a name="l02145"></a>02145         self.<a class="code" href="classantlr3_1_1tree_1_1_common_tree_node_stream.html#6969e96b961fe00dad7fed37865dc6e2">seek</a>(ret)
<a name="l02146"></a>02146         <span class="keywordflow">return</span> ret
<a name="l02147"></a>02147 
<a name="l02148"></a>02148 
<a name="l02149"></a><a class="code" href="classantlr3_1_1tree_1_1_common_tree_node_stream.html#90e9bece43e46878cdaccb66b6a5158c">02149</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_common_tree_node_stream.html#90e9bece43e46878cdaccb66b6a5158c">reset</a>(self):
<a name="l02150"></a>02150         self.<a class="code" href="classantlr3_1_1tree_1_1_common_tree_node_stream.html#f952ea7c71fee9a7e1cd69d582cb03fa">p</a> = 0
<a name="l02151"></a>02151         self.<a class="code" href="classantlr3_1_1tree_1_1_common_tree_node_stream.html#466ba4f77dbcbd567811c994d70d6831">lastMarker</a> = 0
<a name="l02152"></a>02152         self.<a class="code" href="classantlr3_1_1tree_1_1_common_tree_node_stream.html#29a39b423a21e9a94522a5cfeab3af8e">calls</a> = []
<a name="l02153"></a>02153 
<a name="l02154"></a>02154         
<a name="l02155"></a><a class="code" href="classantlr3_1_1tree_1_1_common_tree_node_stream.html#6338be69baa1f8de4aa8b3aa2ebe8ead">02155</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_common_tree_node_stream.html#6338be69baa1f8de4aa8b3aa2ebe8ead">size</a>(self):
<a name="l02156"></a>02156         <span class="keywordflow">if</span> self.<a class="code" href="classantlr3_1_1tree_1_1_common_tree_node_stream.html#f952ea7c71fee9a7e1cd69d582cb03fa">p</a> == -1:
<a name="l02157"></a>02157             self.<a class="code" href="classantlr3_1_1tree_1_1_common_tree_node_stream.html#c424d30723912fdecf2fefff67d5dabe" title="Walk tree with depth-first-search and fill nodes buffer.">fillBuffer</a>()
<a name="l02158"></a>02158 
<a name="l02159"></a>02159         <span class="keywordflow">return</span> len(self.<a class="code" href="classantlr3_1_1tree_1_1_common_tree_node_stream.html#6fd4769bfd8467ba997c070d44a6f969">nodes</a>)
<a name="l02160"></a>02160 
<a name="l02161"></a>02161 
<a name="l02162"></a>02162     <span class="comment"># TREE REWRITE INTERFACE</span>
<a name="l02163"></a>02163 
<a name="l02164"></a><a class="code" href="classantlr3_1_1tree_1_1_common_tree_node_stream.html#eeacf4be486b0f32f59d68c1392855e4">02164</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_common_tree_node_stream.html#eeacf4be486b0f32f59d68c1392855e4" title="Replace from start to stop child index of parent with t, which might be a list.">replaceChildren</a>(self, parent, startChildIndex, stopChildIndex, t):
<a name="l02165"></a>02165         <span class="keywordflow">if</span> parent <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span>:
<a name="l02166"></a>02166             self.<a class="code" href="classantlr3_1_1tree_1_1_common_tree_node_stream.html#4cb8d24591d660ede853683715d9c259">adaptor</a>.replaceChildren(
<a name="l02167"></a>02167                 parent, startChildIndex, stopChildIndex, t
<a name="l02168"></a>02168                 )
<a name="l02169"></a>02169 
<a name="l02170"></a>02170 
<a name="l02171"></a>02171     <span class="comment">##</span>
<a name="l02172"></a>02172     <span class="comment"># Used for testing, just return the token type stream</span>
<a name="l02173"></a><a class="code" href="classantlr3_1_1tree_1_1_common_tree_node_stream.html#f09cb0a46c9719766e2916d829d6988b">02173</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_common_tree_node_stream.html#f09cb0a46c9719766e2916d829d6988b" title="Used for testing, just return the token type stream.">__str__</a>(self):
<a name="l02174"></a>02174 
<a name="l02175"></a>02175         <span class="keywordflow">if</span> self.<a class="code" href="classantlr3_1_1tree_1_1_common_tree_node_stream.html#f952ea7c71fee9a7e1cd69d582cb03fa">p</a> == -1:
<a name="l02176"></a>02176             self.<a class="code" href="classantlr3_1_1tree_1_1_common_tree_node_stream.html#c424d30723912fdecf2fefff67d5dabe" title="Walk tree with depth-first-search and fill nodes buffer.">fillBuffer</a>()
<a name="l02177"></a>02177 
<a name="l02178"></a>02178         <span class="keywordflow">return</span> <span class="stringliteral">' '</span>.join([str(self.<a class="code" href="classantlr3_1_1tree_1_1_common_tree_node_stream.html#4cb8d24591d660ede853683715d9c259">adaptor</a>.getType(node))
<a name="l02179"></a>02179                          <span class="keywordflow">for</span> node <span class="keywordflow">in</span> self.<a class="code" href="classantlr3_1_1tree_1_1_common_tree_node_stream.html#6fd4769bfd8467ba997c070d44a6f969">nodes</a>
<a name="l02180"></a>02180                          ])
<a name="l02181"></a>02181 
<a name="l02182"></a>02182 
<a name="l02183"></a><a class="code" href="classantlr3_1_1tree_1_1_common_tree_node_stream.html#b80083f88bb34faf900e2cc60097b2ce">02183</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_common_tree_node_stream.html#b80083f88bb34faf900e2cc60097b2ce" title="Return the text of all nodes from start to stop, inclusive.">toString</a>(self, start, stop):
<a name="l02184"></a>02184         <span class="keywordflow">if</span> start <span class="keywordflow">is</span> <span class="keywordtype">None</span> <span class="keywordflow">or</span> stop <span class="keywordflow">is</span> <span class="keywordtype">None</span>:
<a name="l02185"></a>02185             <span class="keywordflow">return</span> <span class="keywordtype">None</span>
<a name="l02186"></a>02186 
<a name="l02187"></a>02187         <span class="keywordflow">if</span> self.<a class="code" href="classantlr3_1_1tree_1_1_common_tree_node_stream.html#f952ea7c71fee9a7e1cd69d582cb03fa">p</a> == -1:
<a name="l02188"></a>02188             self.<a class="code" href="classantlr3_1_1tree_1_1_common_tree_node_stream.html#c424d30723912fdecf2fefff67d5dabe" title="Walk tree with depth-first-search and fill nodes buffer.">fillBuffer</a>()
<a name="l02189"></a>02189 
<a name="l02190"></a>02190         <span class="comment">#System.out.println("stop: "+stop);</span>
<a name="l02191"></a>02191         <span class="comment">#if ( start instanceof CommonTree )</span>
<a name="l02192"></a>02192         <span class="comment">#    System.out.print("toString: "+((CommonTree)start).getToken()+", ");</span>
<a name="l02193"></a>02193         <span class="comment">#else</span>
<a name="l02194"></a>02194         <span class="comment">#    System.out.println(start);</span>
<a name="l02195"></a>02195         <span class="comment">#if ( stop instanceof CommonTree )</span>
<a name="l02196"></a>02196         <span class="comment">#    System.out.println(((CommonTree)stop).getToken());</span>
<a name="l02197"></a>02197         <span class="comment">#else</span>
<a name="l02198"></a>02198         <span class="comment">#    System.out.println(stop);</span>
<a name="l02199"></a>02199             
<a name="l02200"></a>02200         <span class="comment"># if we have the token stream, use that to dump text in order</span>
<a name="l02201"></a>02201         <span class="keywordflow">if</span> self.<a class="code" href="classantlr3_1_1tree_1_1_common_tree_node_stream.html">tokens</a> <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span>:
<a name="l02202"></a>02202             beginTokenIndex = self.<a class="code" href="classantlr3_1_1tree_1_1_common_tree_node_stream.html#4cb8d24591d660ede853683715d9c259">adaptor</a>.getTokenStartIndex(start)
<a name="l02203"></a>02203             endTokenIndex = self.<a class="code" href="classantlr3_1_1tree_1_1_common_tree_node_stream.html#4cb8d24591d660ede853683715d9c259">adaptor</a>.getTokenStopIndex(stop)
<a name="l02204"></a>02204             
<a name="l02205"></a>02205             <span class="comment"># if it's a tree, use start/stop index from start node</span>
<a name="l02206"></a>02206             <span class="comment"># else use token range from start/stop nodes</span>
<a name="l02207"></a>02207             <span class="keywordflow">if</span> self.<a class="code" href="classantlr3_1_1tree_1_1_common_tree_node_stream.html#4cb8d24591d660ede853683715d9c259">adaptor</a>.getType(stop) == UP:
<a name="l02208"></a>02208                 endTokenIndex = self.<a class="code" href="classantlr3_1_1tree_1_1_common_tree_node_stream.html#4cb8d24591d660ede853683715d9c259">adaptor</a>.getTokenStopIndex(start)
<a name="l02209"></a>02209 
<a name="l02210"></a>02210             <span class="keywordflow">elif</span> self.<a class="code" href="classantlr3_1_1tree_1_1_common_tree_node_stream.html#4cb8d24591d660ede853683715d9c259">adaptor</a>.getType(stop) == EOF:
<a name="l02211"></a>02211                 endTokenIndex = self.<a class="code" href="classantlr3_1_1tree_1_1_common_tree_node_stream.html#6338be69baa1f8de4aa8b3aa2ebe8ead">size</a>() -2 <span class="comment"># don't use EOF</span>
<a name="l02212"></a>02212 
<a name="l02213"></a>02213             <span class="keywordflow">return</span> self.<a class="code" href="classantlr3_1_1tree_1_1_common_tree_node_stream.html">tokens</a>.toString(beginTokenIndex, endTokenIndex)
<a name="l02214"></a>02214 
<a name="l02215"></a>02215         <span class="comment"># walk nodes looking for start</span>
<a name="l02216"></a>02216         i, t = 0, <span class="keywordtype">None</span>
<a name="l02217"></a>02217         <span class="keywordflow">for</span> i, t <span class="keywordflow">in</span> enumerate(self.<a class="code" href="classantlr3_1_1tree_1_1_common_tree_node_stream.html#6fd4769bfd8467ba997c070d44a6f969">nodes</a>):
<a name="l02218"></a>02218             <span class="keywordflow">if</span> t == start:
<a name="l02219"></a>02219                 <span class="keywordflow">break</span>
<a name="l02220"></a>02220 
<a name="l02221"></a>02221         <span class="comment"># now walk until we see stop, filling string buffer with text</span>
<a name="l02222"></a>02222         buf = []
<a name="l02223"></a>02223         t = self.<a class="code" href="classantlr3_1_1tree_1_1_common_tree_node_stream.html#6fd4769bfd8467ba997c070d44a6f969">nodes</a>[i]
<a name="l02224"></a>02224         <span class="keywordflow">while</span> t != stop:
<a name="l02225"></a>02225             text = self.<a class="code" href="classantlr3_1_1tree_1_1_common_tree_node_stream.html#4cb8d24591d660ede853683715d9c259">adaptor</a>.getText(t)
<a name="l02226"></a>02226             <span class="keywordflow">if</span> text <span class="keywordflow">is</span> <span class="keywordtype">None</span>:
<a name="l02227"></a>02227                 text = <span class="stringliteral">" "</span> + self.<a class="code" href="classantlr3_1_1tree_1_1_common_tree_node_stream.html#4cb8d24591d660ede853683715d9c259">adaptor</a>.getType(t)
<a name="l02228"></a>02228 
<a name="l02229"></a>02229             buf.append(text)
<a name="l02230"></a>02230             i += 1
<a name="l02231"></a>02231             t = self.<a class="code" href="classantlr3_1_1tree_1_1_common_tree_node_stream.html#6fd4769bfd8467ba997c070d44a6f969">nodes</a>[i]
<a name="l02232"></a>02232 
<a name="l02233"></a>02233         <span class="comment"># include stop node too</span>
<a name="l02234"></a>02234         text = self.<a class="code" href="classantlr3_1_1tree_1_1_common_tree_node_stream.html#4cb8d24591d660ede853683715d9c259">adaptor</a>.getText(stop)
<a name="l02235"></a>02235         <span class="keywordflow">if</span> text <span class="keywordflow">is</span> <span class="keywordtype">None</span>:
<a name="l02236"></a>02236             text = <span class="stringliteral">" "</span> +self.<a class="code" href="classantlr3_1_1tree_1_1_common_tree_node_stream.html#4cb8d24591d660ede853683715d9c259">adaptor</a>.getType(stop)
<a name="l02237"></a>02237 
<a name="l02238"></a>02238         buf.append(text)
<a name="l02239"></a>02239         
<a name="l02240"></a>02240         <span class="keywordflow">return</span> <span class="stringliteral">''</span>.join(buf)
<a name="l02241"></a>02241     
<a name="l02242"></a>02242 
<a name="l02243"></a>02243     <span class="comment">## iterator interface</span>
<a name="l02244"></a><a class="code" href="classantlr3_1_1tree_1_1_common_tree_node_stream.html#c33f406fccff656cb9e9a2a831d7907f">02244</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_common_tree_node_stream.html#c33f406fccff656cb9e9a2a831d7907f" title="iterator interface">__iter__</a>(self):
<a name="l02245"></a>02245         <span class="keywordflow">if</span> self.<a class="code" href="classantlr3_1_1tree_1_1_common_tree_node_stream.html#f952ea7c71fee9a7e1cd69d582cb03fa">p</a> == -1:
<a name="l02246"></a>02246             self.<a class="code" href="classantlr3_1_1tree_1_1_common_tree_node_stream.html#c424d30723912fdecf2fefff67d5dabe" title="Walk tree with depth-first-search and fill nodes buffer.">fillBuffer</a>()
<a name="l02247"></a>02247 
<a name="l02248"></a>02248         <span class="keywordflow">for</span> node <span class="keywordflow">in</span> self.<a class="code" href="classantlr3_1_1tree_1_1_common_tree_node_stream.html#6fd4769bfd8467ba997c070d44a6f969">nodes</a>:
<a name="l02249"></a>02249             <span class="keywordflow">yield</span> node
<a name="l02250"></a>02250 
<a name="l02251"></a>02251 
<a name="l02252"></a>02252 <span class="comment">#############################################################################</span>
<a name="l02253"></a>02253 <span class="comment">#</span>
<a name="l02254"></a>02254 <span class="comment"># tree parser</span>
<a name="l02255"></a>02255 <span class="comment">#</span>
<a name="l02256"></a>02256 <span class="comment">#############################################################################</span>
<a name="l02257"></a>02257 
<a name="l02258"></a>02258 <span class="comment">##</span>
<a name="l02259"></a>02259 <span class="comment"># @brief Baseclass for generated tree parsers.</span>
<a name="l02260"></a>02260 <span class="comment">#     </span>
<a name="l02261"></a>02261 <span class="comment">#     A parser for a stream of tree nodes.  "tree grammars" result in a subclass</span>
<a name="l02262"></a>02262 <span class="comment">#     of this.  All the error reporting and recovery is shared with Parser via</span>
<a name="l02263"></a>02263 <span class="comment">#     the BaseRecognizer superclass.</span>
<a name="l02264"></a>02264 <span class="comment">#     </span>
<a name="l02265"></a><a class="code" href="classantlr3_1_1tree_1_1_tree_parser.html">02265</a> <span class="keyword">class </span><a class="code" href="classantlr3_1_1tree_1_1_tree_parser.html" title="Baseclass for generated tree parsers.">TreeParser</a>(BaseRecognizer):
<a name="l02266"></a>02266 
<a name="l02267"></a><a class="code" href="classantlr3_1_1tree_1_1_tree_parser.html#fe27f0a4f9bb81b8b5a468407f3fbdb0">02267</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_tree_parser.html#fe27f0a4f9bb81b8b5a468407f3fbdb0">__init__</a>(self, input, state=None):
<a name="l02268"></a>02268         BaseRecognizer.__init__(self, state)
<a name="l02269"></a>02269 
<a name="l02270"></a><a class="code" href="classantlr3_1_1tree_1_1_tree_parser.html#32c04ddcf8760fcb3a275d81e02f6ada">02270</a>         self.<a class="code" href="classantlr3_1_1tree_1_1_tree_parser.html#32c04ddcf8760fcb3a275d81e02f6ada">input</a> = <span class="keywordtype">None</span>
<a name="l02271"></a>02271         self.<a class="code" href="classantlr3_1_1tree_1_1_tree_parser.html#1a2234bbe74526544f8b72c9f74eae19" title="Set the input stream.">setTreeNodeStream</a>(input)
<a name="l02272"></a>02272 
<a name="l02273"></a>02273 
<a name="l02274"></a><a class="code" href="classantlr3_1_1tree_1_1_tree_parser.html#04c095d82f80170937d880ba133f5eb7">02274</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_tree_parser.html#04c095d82f80170937d880ba133f5eb7">reset</a>(self):
<a name="l02275"></a>02275         BaseRecognizer.reset(self) <span class="comment"># reset all recognizer state variables</span>
<a name="l02276"></a>02276         <span class="keywordflow">if</span> self.<a class="code" href="classantlr3_1_1tree_1_1_tree_parser.html#32c04ddcf8760fcb3a275d81e02f6ada">input</a> <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span>:
<a name="l02277"></a>02277             self.<a class="code" href="classantlr3_1_1tree_1_1_tree_parser.html#32c04ddcf8760fcb3a275d81e02f6ada">input</a>.seek(0) <span class="comment"># rewind the input</span>
<a name="l02278"></a>02278 
<a name="l02279"></a>02279 
<a name="l02280"></a>02280     <span class="comment">##</span>
<a name="l02281"></a>02281     <span class="comment"># Set the input stream</span>
<a name="l02282"></a><a class="code" href="classantlr3_1_1tree_1_1_tree_parser.html#1a2234bbe74526544f8b72c9f74eae19">02282</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_tree_parser.html#1a2234bbe74526544f8b72c9f74eae19" title="Set the input stream.">setTreeNodeStream</a>(self, input):
<a name="l02283"></a>02283 
<a name="l02284"></a>02284         self.<a class="code" href="classantlr3_1_1tree_1_1_tree_parser.html#32c04ddcf8760fcb3a275d81e02f6ada">input</a> = input
<a name="l02285"></a>02285 
<a name="l02286"></a>02286 
<a name="l02287"></a><a class="code" href="classantlr3_1_1tree_1_1_tree_parser.html#c14fc749d67788793219006cfdbb3029">02287</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_tree_parser.html#c14fc749d67788793219006cfdbb3029">getTreeNodeStream</a>(self):
<a name="l02288"></a>02288         <span class="keywordflow">return</span> self.<a class="code" href="classantlr3_1_1tree_1_1_tree_parser.html#32c04ddcf8760fcb3a275d81e02f6ada">input</a>
<a name="l02289"></a>02289 
<a name="l02290"></a>02290 
<a name="l02291"></a><a class="code" href="classantlr3_1_1tree_1_1_tree_parser.html#660184367439dacc3d1dfe9e26388f5e">02291</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_tree_parser.html#660184367439dacc3d1dfe9e26388f5e">getSourceName</a>(self):
<a name="l02292"></a>02292         <span class="keywordflow">return</span> self.<a class="code" href="classantlr3_1_1tree_1_1_tree_parser.html#32c04ddcf8760fcb3a275d81e02f6ada">input</a>.getSourceName()
<a name="l02293"></a>02293 
<a name="l02294"></a>02294 
<a name="l02295"></a><a class="code" href="classantlr3_1_1tree_1_1_tree_parser.html#da1f025d56c40bc4504f19ab400c727f">02295</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_tree_parser.html#da1f025d56c40bc4504f19ab400c727f">getCurrentInputSymbol</a>(self, input):
<a name="l02296"></a>02296         <span class="keywordflow">return</span> input.LT(1)
<a name="l02297"></a>02297 
<a name="l02298"></a>02298 
<a name="l02299"></a><a class="code" href="classantlr3_1_1tree_1_1_tree_parser.html#adc883c293b9ddce3326dd2d91d4ee1a">02299</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_tree_parser.html#adc883c293b9ddce3326dd2d91d4ee1a">getMissingSymbol</a>(self, input, e, expectedTokenType, follow):
<a name="l02300"></a>02300         tokenText = <span class="stringliteral">"&lt;missing "</span> + self.tokenNames[expectedTokenType] + <span class="stringliteral">"&gt;"</span>
<a name="l02301"></a>02301         <span class="keywordflow">return</span> CommonTree(CommonToken(type=expectedTokenType, text=tokenText))
<a name="l02302"></a>02302 
<a name="l02303"></a>02303 
<a name="l02304"></a>02304     <span class="comment"># precompiled regex used by inContext</span>
<a name="l02305"></a><a class="code" href="classantlr3_1_1tree_1_1_tree_parser.html#304483d0b15153f3466bac4a646dc1c9">02305</a>     dotdot = <span class="stringliteral">".*[^.]\\.\\.[^.].*"</span>
<a name="l02306"></a><a class="code" href="classantlr3_1_1tree_1_1_tree_parser.html#8ded9981e92506666bd89e55249c47b5">02306</a>     doubleEtc = <span class="stringliteral">".*\\.\\.\\.\\s+\\.\\.\\..*"</span>
<a name="l02307"></a><a class="code" href="classantlr3_1_1tree_1_1_tree_parser.html#039bf20c009d4ceeb0b57352c890d47f">02307</a>     dotdotPattern = re.compile(dotdot)
<a name="l02308"></a><a class="code" href="classantlr3_1_1tree_1_1_tree_parser.html#066ebb44179011398632841bef7b2ca2">02308</a>     doubleEtcPattern = re.compile(doubleEtc)
<a name="l02309"></a>02309 
<a name="l02310"></a>02310     <span class="comment">##</span>
<a name="l02311"></a>02311     <span class="comment"># Check if current node in input has a context.</span>
<a name="l02312"></a>02312     <span class="comment"># </span>
<a name="l02313"></a>02313     <span class="comment">#         Context means sequence of nodes towards root of tree.  For example,</span>
<a name="l02314"></a>02314     <span class="comment">#         you might say context is "MULT" which means my parent must be MULT.</span>
<a name="l02315"></a>02315     <span class="comment">#         "CLASS VARDEF" says current node must be child of a VARDEF and whose</span>
<a name="l02316"></a>02316     <span class="comment">#         parent is a CLASS node.  You can use "..." to mean zero-or-more nodes.</span>
<a name="l02317"></a>02317     <span class="comment">#         "METHOD ... VARDEF" means my parent is VARDEF and somewhere above</span>
<a name="l02318"></a>02318     <span class="comment">#         that is a METHOD node.  The first node in the context is not</span>
<a name="l02319"></a>02319     <span class="comment">#         necessarily the root.  The context matcher stops matching and returns</span>
<a name="l02320"></a>02320     <span class="comment">#         true when it runs out of context.  There is no way to force the first</span>
<a name="l02321"></a>02321     <span class="comment">#         node to be the root. </span>
<a name="l02322"></a>02322     <span class="comment">#         </span>
<a name="l02323"></a><a class="code" href="classantlr3_1_1tree_1_1_tree_parser.html#9b7585ccf939309b3e015f1456a642ca">02323</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_tree_parser.html#9b7585ccf939309b3e015f1456a642ca" title="Check if current node in input has a context.">inContext</a>(self, context, adaptor=None, tokenName=None, t=None):
<a name="l02324"></a>02324 
<a name="l02325"></a>02325         <span class="keywordflow">return</span> _inContext(
<a name="l02326"></a>02326             self.<a class="code" href="classantlr3_1_1tree_1_1_tree_parser.html#32c04ddcf8760fcb3a275d81e02f6ada">input</a>.getTreeAdaptor(), self.getTokenNames(), 
<a name="l02327"></a>02327             self.<a class="code" href="classantlr3_1_1tree_1_1_tree_parser.html#32c04ddcf8760fcb3a275d81e02f6ada">input</a>.LT(1), context)
<a name="l02328"></a>02328 
<a name="l02329"></a>02329     @classmethod
<a name="l02330"></a>02330     <span class="comment">##</span>
<a name="l02331"></a>02331     <span class="comment"># The worker for inContext.</span>
<a name="l02332"></a>02332     <span class="comment"># </span>
<a name="l02333"></a>02333     <span class="comment">#         It's static and full of parameters for testing purposes.</span>
<a name="l02334"></a>02334     <span class="comment">#         </span>
<a name="l02335"></a><a class="code" href="classantlr3_1_1tree_1_1_tree_parser.html#71657ab482f95606c0424e45dbde5d29">02335</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_tree_parser.html#71657ab482f95606c0424e45dbde5d29" title="The worker for inContext.">_inContext</a>(cls, adaptor, tokenNames, t, context):
<a name="l02336"></a>02336 
<a name="l02337"></a>02337         <span class="keywordflow">if</span> cls.dotdotPattern.match(context):
<a name="l02338"></a>02338             <span class="comment"># don't allow "..", must be "..."</span>
<a name="l02339"></a>02339             <span class="keywordflow">raise</span> ValueError(<span class="stringliteral">"invalid syntax: .."</span>)
<a name="l02340"></a>02340 
<a name="l02341"></a>02341         <span class="keywordflow">if</span> cls.doubleEtcPattern.match(context):
<a name="l02342"></a>02342             <span class="comment"># don't allow double "..."</span>
<a name="l02343"></a>02343             <span class="keywordflow">raise</span> ValueError(<span class="stringliteral">"invalid syntax: ... ..."</span>)
<a name="l02344"></a>02344 
<a name="l02345"></a>02345         <span class="comment"># ensure spaces around ...</span>
<a name="l02346"></a>02346         context = context.replace(<span class="stringliteral">"..."</span>, <span class="stringliteral">" ... "</span>)
<a name="l02347"></a>02347         context = context.strip()
<a name="l02348"></a>02348         nodes = context.split()
<a name="l02349"></a>02349 
<a name="l02350"></a>02350         ni = len(nodes) - 1
<a name="l02351"></a>02351         t = adaptor.getParent(t)
<a name="l02352"></a>02352         <span class="keywordflow">while</span> ni &gt;= 0 <span class="keywordflow">and</span> t <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span>:
<a name="l02353"></a>02353             <span class="keywordflow">if</span> nodes[ni] == <span class="stringliteral">"..."</span>:
<a name="l02354"></a>02354                 <span class="comment"># walk upwards until we see nodes[ni-1] then continue walking</span>
<a name="l02355"></a>02355                 <span class="keywordflow">if</span> ni == 0:
<a name="l02356"></a>02356                     <span class="comment"># ... at start is no-op</span>
<a name="l02357"></a>02357                     <span class="keywordflow">return</span> <span class="keyword">True</span>
<a name="l02358"></a>02358                 goal = nodes[ni-1]
<a name="l02359"></a>02359                 ancestor = cls._getAncestor(adaptor, tokenNames, t, goal)
<a name="l02360"></a>02360                 <span class="keywordflow">if</span> ancestor <span class="keywordflow">is</span> <span class="keywordtype">None</span>:
<a name="l02361"></a>02361                     <span class="keywordflow">return</span> <span class="keyword">False</span>
<a name="l02362"></a>02362                 t = ancestor
<a name="l02363"></a>02363                 ni -= 1
<a name="l02364"></a>02364 
<a name="l02365"></a>02365             name = tokenNames[adaptor.getType(t)]
<a name="l02366"></a>02366             <span class="keywordflow">if</span> name != nodes[ni]:
<a name="l02367"></a>02367                 <span class="keywordflow">return</span> <span class="keyword">False</span>
<a name="l02368"></a>02368 
<a name="l02369"></a>02369             <span class="comment"># advance to parent and to previous element in context node list</span>
<a name="l02370"></a>02370             ni -= 1
<a name="l02371"></a>02371             t = adaptor.getParent(t)
<a name="l02372"></a>02372 
<a name="l02373"></a>02373         <span class="comment"># at root but more nodes to match</span>
<a name="l02374"></a>02374         <span class="keywordflow">if</span> t <span class="keywordflow">is</span> <span class="keywordtype">None</span> <span class="keywordflow">and</span> ni &gt;= 0:
<a name="l02375"></a>02375             <span class="keywordflow">return</span> <span class="keyword">False</span>
<a name="l02376"></a>02376 
<a name="l02377"></a>02377         <span class="keywordflow">return</span> <span class="keyword">True</span>
<a name="l02378"></a>02378 
<a name="l02379"></a>02379     @staticmethod
<a name="l02380"></a>02380     <span class="comment">##</span>
<a name="l02381"></a>02381     <span class="comment"># Helper for static inContext.</span>
<a name="l02382"></a><a class="code" href="classantlr3_1_1tree_1_1_tree_parser.html#7e1905fa644500cb88686353e09a98a9">02382</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_tree_parser.html#7e1905fa644500cb88686353e09a98a9" title="Helper for static inContext.">_getAncestor</a>(adaptor, tokenNames, t, goal):
<a name="l02383"></a>02383         <span class="keywordflow">while</span> t <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span>:
<a name="l02384"></a>02384             name = tokenNames[adaptor.getType(t)]
<a name="l02385"></a>02385             <span class="keywordflow">if</span> name == goal:
<a name="l02386"></a>02386                 <span class="keywordflow">return</span> t
<a name="l02387"></a>02387             t = adaptor.getParent(t)
<a name="l02388"></a>02388 
<a name="l02389"></a>02389         <span class="keywordflow">return</span> <span class="keywordtype">None</span>
<a name="l02390"></a>02390 
<a name="l02391"></a>02391 
<a name="l02392"></a>02392     <span class="comment">##</span>
<a name="l02393"></a>02393     <span class="comment"># </span>
<a name="l02394"></a>02394     <span class="comment">#         Match '.' in tree parser has special meaning.  Skip node or</span>
<a name="l02395"></a>02395     <span class="comment">#         entire tree if node has children.  If children, scan until</span>
<a name="l02396"></a>02396     <span class="comment">#         corresponding UP node.</span>
<a name="l02397"></a>02397     <span class="comment">#         </span>
<a name="l02398"></a><a class="code" href="classantlr3_1_1tree_1_1_tree_parser.html#0df24b9a12bf68219de24e9403dad432">02398</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_tree_parser.html#0df24b9a12bf68219de24e9403dad432" title="Match &amp;#39;.">matchAny</a>(self, ignore): <span class="comment"># ignore stream, copy of this.input</span>
<a name="l02399"></a>02399         
<a name="l02400"></a>02400         self._state.errorRecovery = <span class="keyword">False</span>
<a name="l02401"></a>02401 
<a name="l02402"></a>02402         look = self.<a class="code" href="classantlr3_1_1tree_1_1_tree_parser.html#32c04ddcf8760fcb3a275d81e02f6ada">input</a>.LT(1)
<a name="l02403"></a>02403         <span class="keywordflow">if</span> self.<a class="code" href="classantlr3_1_1tree_1_1_tree_parser.html#32c04ddcf8760fcb3a275d81e02f6ada">input</a>.getTreeAdaptor().getChildCount(look) == 0:
<a name="l02404"></a>02404             self.<a class="code" href="classantlr3_1_1tree_1_1_tree_parser.html#32c04ddcf8760fcb3a275d81e02f6ada">input</a>.consume() <span class="comment"># not subtree, consume 1 node and return</span>
<a name="l02405"></a>02405             <span class="keywordflow">return</span>
<a name="l02406"></a>02406 
<a name="l02407"></a>02407         <span class="comment"># current node is a subtree, skip to corresponding UP.</span>
<a name="l02408"></a>02408         <span class="comment"># must count nesting level to get right UP</span>
<a name="l02409"></a>02409         level = 0
<a name="l02410"></a>02410         tokenType = self.<a class="code" href="classantlr3_1_1tree_1_1_tree_parser.html#32c04ddcf8760fcb3a275d81e02f6ada">input</a>.getTreeAdaptor().getType(look)
<a name="l02411"></a>02411         <span class="keywordflow">while</span> tokenType != EOF <span class="keywordflow">and</span> <span class="keywordflow">not</span> (tokenType == UP <span class="keywordflow">and</span> level==0):
<a name="l02412"></a>02412             self.<a class="code" href="classantlr3_1_1tree_1_1_tree_parser.html#32c04ddcf8760fcb3a275d81e02f6ada">input</a>.consume()
<a name="l02413"></a>02413             look = self.<a class="code" href="classantlr3_1_1tree_1_1_tree_parser.html#32c04ddcf8760fcb3a275d81e02f6ada">input</a>.LT(1)
<a name="l02414"></a>02414             tokenType = self.<a class="code" href="classantlr3_1_1tree_1_1_tree_parser.html#32c04ddcf8760fcb3a275d81e02f6ada">input</a>.getTreeAdaptor().getType(look)
<a name="l02415"></a>02415             <span class="keywordflow">if</span> tokenType == DOWN:
<a name="l02416"></a>02416                 level += 1
<a name="l02417"></a>02417 
<a name="l02418"></a>02418             <span class="keywordflow">elif</span> tokenType == UP:
<a name="l02419"></a>02419                 level -= 1
<a name="l02420"></a>02420 
<a name="l02421"></a>02421         self.<a class="code" href="classantlr3_1_1tree_1_1_tree_parser.html#32c04ddcf8760fcb3a275d81e02f6ada">input</a>.consume() <span class="comment"># consume UP</span>
<a name="l02422"></a>02422 
<a name="l02423"></a>02423 
<a name="l02424"></a>02424     <span class="comment">##</span>
<a name="l02425"></a>02425     <span class="comment"># </span>
<a name="l02426"></a>02426     <span class="comment">#         We have DOWN/UP nodes in the stream that have no line info; override.</span>
<a name="l02427"></a>02427     <span class="comment">#         plus we want to alter the exception type. Don't try to recover</span>
<a name="l02428"></a>02428     <span class="comment">#         from tree parser errors inline...</span>
<a name="l02429"></a>02429     <span class="comment">#         </span>
<a name="l02430"></a><a class="code" href="classantlr3_1_1tree_1_1_tree_parser.html#9510e6343ae1c769ebc983fae3da3740">02430</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_tree_parser.html#9510e6343ae1c769ebc983fae3da3740" title="We have DOWN/UP nodes in the stream that have no line info; override.">mismatch</a>(self, input, ttype, follow):
<a name="l02431"></a>02431 
<a name="l02432"></a>02432         <span class="keywordflow">raise</span> MismatchedTreeNodeException(ttype, input)
<a name="l02433"></a>02433 
<a name="l02434"></a>02434 
<a name="l02435"></a>02435     <span class="comment">##</span>
<a name="l02436"></a>02436     <span class="comment"># </span>
<a name="l02437"></a>02437     <span class="comment">#         Prefix error message with the grammar name because message is</span>
<a name="l02438"></a>02438     <span class="comment">#         always intended for the programmer because the parser built</span>
<a name="l02439"></a>02439     <span class="comment">#         the input tree not the user.</span>
<a name="l02440"></a>02440     <span class="comment">#         </span>
<a name="l02441"></a><a class="code" href="classantlr3_1_1tree_1_1_tree_parser.html#7ebc446342274466f2b28fb440d85d82">02441</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_tree_parser.html#7ebc446342274466f2b28fb440d85d82" title="Prefix error message with the grammar name because message is always intended for...">getErrorHeader</a>(self, e):
<a name="l02442"></a>02442 
<a name="l02443"></a>02443         <span class="keywordflow">return</span> (self.getGrammarFileName() +
<a name="l02444"></a>02444                 <span class="stringliteral">": node from %sline %s:%s"</span>
<a name="l02445"></a>02445                 % ([<span class="stringliteral">''</span>, <span class="stringliteral">"after "</span>][e.approximateLineInfo],
<a name="l02446"></a>02446                    e.line,
<a name="l02447"></a>02447                    e.charPositionInLine
<a name="l02448"></a>02448                    )
<a name="l02449"></a>02449                 )
<a name="l02450"></a>02450 
<a name="l02451"></a>02451     <span class="comment">##</span>
<a name="l02452"></a>02452     <span class="comment"># </span>
<a name="l02453"></a>02453     <span class="comment">#         Tree parsers parse nodes they usually have a token object as</span>
<a name="l02454"></a>02454     <span class="comment">#         payload. Set the exception token and do the default behavior.</span>
<a name="l02455"></a>02455     <span class="comment">#         </span>
<a name="l02456"></a><a class="code" href="classantlr3_1_1tree_1_1_tree_parser.html#2d38936290cd078fdcb0dd9fdcccd4cd">02456</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_tree_parser.html#2d38936290cd078fdcb0dd9fdcccd4cd" title="Tree parsers parse nodes they usually have a token object as payload.">getErrorMessage</a>(self, e, tokenNames):
<a name="l02457"></a>02457 
<a name="l02458"></a>02458         <span class="keywordflow">if</span> isinstance(self, TreeParser):
<a name="l02459"></a>02459             adaptor = e.input.getTreeAdaptor()
<a name="l02460"></a>02460             e.token = adaptor.getToken(e.node)
<a name="l02461"></a>02461             <span class="keywordflow">if</span> e.token <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span>: <span class="comment"># could be an UP/DOWN node</span>
<a name="l02462"></a>02462                 e.token = CommonToken(
<a name="l02463"></a>02463                     type=adaptor.getType(e.node),
<a name="l02464"></a>02464                     text=adaptor.getText(e.node)
<a name="l02465"></a>02465                     )
<a name="l02466"></a>02466 
<a name="l02467"></a>02467         <span class="keywordflow">return</span> BaseRecognizer.getErrorMessage(self, e, tokenNames)
<a name="l02468"></a>02468 
<a name="l02469"></a>02469 
<a name="l02470"></a><a class="code" href="classantlr3_1_1tree_1_1_tree_parser.html#156465a90c58b8b38616dc976047753e">02470</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_tree_parser.html#156465a90c58b8b38616dc976047753e">traceIn</a>(self, ruleName, ruleIndex):
<a name="l02471"></a>02471         BaseRecognizer.traceIn(self, ruleName, ruleIndex, self.<a class="code" href="classantlr3_1_1tree_1_1_tree_parser.html#32c04ddcf8760fcb3a275d81e02f6ada">input</a>.LT(1))
<a name="l02472"></a>02472 
<a name="l02473"></a>02473 
<a name="l02474"></a><a class="code" href="classantlr3_1_1tree_1_1_tree_parser.html#77fe230fd80b7fa99887518089aa4699">02474</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_tree_parser.html#77fe230fd80b7fa99887518089aa4699">traceOut</a>(self, ruleName, ruleIndex):
<a name="l02475"></a>02475         BaseRecognizer.traceOut(self, ruleName, ruleIndex, self.<a class="code" href="classantlr3_1_1tree_1_1_tree_parser.html#32c04ddcf8760fcb3a275d81e02f6ada">input</a>.LT(1))
<a name="l02476"></a>02476 
<a name="l02477"></a>02477 
<a name="l02478"></a>02478 <span class="comment">#############################################################################</span>
<a name="l02479"></a>02479 <span class="comment">#</span>
<a name="l02480"></a>02480 <span class="comment"># tree visitor</span>
<a name="l02481"></a>02481 <span class="comment">#</span>
<a name="l02482"></a>02482 <span class="comment">#############################################################################</span>
<a name="l02483"></a>02483 
<a name="l02484"></a>02484 <span class="comment">##</span>
<a name="l02485"></a>02485 <span class="comment"># Do a depth first walk of a tree, applying pre() and post() actions</span>
<a name="l02486"></a>02486 <span class="comment">#     we go.</span>
<a name="l02487"></a>02487 <span class="comment">#     </span>
<a name="l02488"></a><a class="code" href="classantlr3_1_1tree_1_1_tree_visitor.html">02488</a> <span class="keyword">class </span><a class="code" href="classantlr3_1_1tree_1_1_tree_visitor.html" title="Do a depth first walk of a tree, applying pre() and post() actions we go.">TreeVisitor</a>(object):
<a name="l02489"></a>02489 
<a name="l02490"></a><a class="code" href="classantlr3_1_1tree_1_1_tree_visitor.html#a74e0ff1ca9b0284d103de0bcafc7957">02490</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_tree_visitor.html#a74e0ff1ca9b0284d103de0bcafc7957">__init__</a>(self, adaptor=None):
<a name="l02491"></a>02491         <span class="keywordflow">if</span> adaptor <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span>:
<a name="l02492"></a><a class="code" href="classantlr3_1_1tree_1_1_tree_visitor.html#c87ae7d9c414a93557fee05a26e3966d">02492</a>             self.<a class="code" href="classantlr3_1_1tree_1_1_tree_visitor.html#c87ae7d9c414a93557fee05a26e3966d">adaptor</a> = adaptor
<a name="l02493"></a>02493         <span class="keywordflow">else</span>:
<a name="l02494"></a>02494             self.<a class="code" href="classantlr3_1_1tree_1_1_tree_visitor.html#c87ae7d9c414a93557fee05a26e3966d">adaptor</a> = CommonTreeAdaptor()
<a name="l02495"></a>02495     
<a name="l02496"></a>02496     <span class="comment">##</span>
<a name="l02497"></a>02497     <span class="comment"># Visit every node in tree t and trigger an action for each node</span>
<a name="l02498"></a>02498     <span class="comment">#         before/after having visited all of its children.  Bottom up walk.</span>
<a name="l02499"></a>02499     <span class="comment">#         Execute both actions even if t has no children.  Ignore return</span>
<a name="l02500"></a>02500     <span class="comment">#         results from transforming children since they will have altered</span>
<a name="l02501"></a>02501     <span class="comment">#         the child list of this node (their parent).  Return result of</span>
<a name="l02502"></a>02502     <span class="comment">#         applying post action to this node.</span>
<a name="l02503"></a>02503     <span class="comment"># </span>
<a name="l02504"></a>02504     <span class="comment">#         The Python version differs from the Java version by taking two</span>
<a name="l02505"></a>02505     <span class="comment">#         callables 'pre_action' and 'post_action' instead of a class instance</span>
<a name="l02506"></a>02506     <span class="comment">#         that wraps those methods. Those callables must accept a TreeNode as</span>
<a name="l02507"></a>02507     <span class="comment">#         their single argument and return the (potentially transformed or</span>
<a name="l02508"></a>02508     <span class="comment">#         replaced) TreeNode.</span>
<a name="l02509"></a>02509     <span class="comment">#         </span>
<a name="l02510"></a><a class="code" href="classantlr3_1_1tree_1_1_tree_visitor.html#8cbd5e0f191085465a902c454528ae29">02510</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_tree_visitor.html#8cbd5e0f191085465a902c454528ae29" title="Visit every node in tree t and trigger an action for each node before/after having...">visit</a>(self, t, pre_action=None, post_action=None):
<a name="l02511"></a>02511 
<a name="l02512"></a>02512         isNil = self.<a class="code" href="classantlr3_1_1tree_1_1_tree_visitor.html#c87ae7d9c414a93557fee05a26e3966d">adaptor</a>.isNil(t)
<a name="l02513"></a>02513         <span class="keywordflow">if</span> pre_action <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span> <span class="keywordflow">and</span> <span class="keywordflow">not</span> isNil:
<a name="l02514"></a>02514             <span class="comment"># if rewritten, walk children of new t</span>
<a name="l02515"></a>02515             t = pre_action(t)
<a name="l02516"></a>02516 
<a name="l02517"></a>02517         <span class="keywordflow">for</span> idx <span class="keywordflow">in</span> xrange(self.<a class="code" href="classantlr3_1_1tree_1_1_tree_visitor.html#c87ae7d9c414a93557fee05a26e3966d">adaptor</a>.getChildCount(t)):
<a name="l02518"></a>02518             child = self.<a class="code" href="classantlr3_1_1tree_1_1_tree_visitor.html#c87ae7d9c414a93557fee05a26e3966d">adaptor</a>.getChild(t, idx)
<a name="l02519"></a>02519             self.<a class="code" href="classantlr3_1_1tree_1_1_tree_visitor.html#8cbd5e0f191085465a902c454528ae29" title="Visit every node in tree t and trigger an action for each node before/after having...">visit</a>(child, pre_action, post_action)
<a name="l02520"></a>02520 
<a name="l02521"></a>02521         <span class="keywordflow">if</span> post_action <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span> <span class="keywordflow">and</span> <span class="keywordflow">not</span> isNil:
<a name="l02522"></a>02522             t = post_action(t)
<a name="l02523"></a>02523 
<a name="l02524"></a>02524         <span class="keywordflow">return</span> t
<a name="l02525"></a>02525 
<a name="l02526"></a>02526 
<a name="l02527"></a>02527 <span class="comment">#############################################################################</span>
<a name="l02528"></a>02528 <span class="comment">#</span>
<a name="l02529"></a>02529 <span class="comment"># streams for rule rewriting</span>
<a name="l02530"></a>02530 <span class="comment">#</span>
<a name="l02531"></a>02531 <span class="comment">#############################################################################</span>
<a name="l02532"></a>02532 
<a name="l02533"></a>02533 <span class="comment">##</span>
<a name="l02534"></a>02534 <span class="comment"># @brief Internal helper class.</span>
<a name="l02535"></a>02535 <span class="comment">#     </span>
<a name="l02536"></a>02536 <span class="comment">#     A generic list of elements tracked in an alternative to be used in</span>
<a name="l02537"></a>02537 <span class="comment">#     a -&gt; rewrite rule.  We need to subclass to fill in the next() method,</span>
<a name="l02538"></a>02538 <span class="comment">#     which returns either an AST node wrapped around a token payload or</span>
<a name="l02539"></a>02539 <span class="comment">#     an existing subtree.</span>
<a name="l02540"></a>02540 <span class="comment"># </span>
<a name="l02541"></a>02541 <span class="comment">#     Once you start next()ing, do not try to add more elements.  It will</span>
<a name="l02542"></a>02542 <span class="comment">#     break the cursor tracking I believe.</span>
<a name="l02543"></a>02543 <span class="comment"># </span>
<a name="l02544"></a>02544 <span class="comment">#     @see org.antlr.runtime.tree.RewriteRuleSubtreeStream</span>
<a name="l02545"></a>02545 <span class="comment">#     @see org.antlr.runtime.tree.RewriteRuleTokenStream</span>
<a name="l02546"></a>02546 <span class="comment">#     </span>
<a name="l02547"></a>02547 <span class="comment">#     TODO: add mechanism to detect/puke on modification after reading from</span>
<a name="l02548"></a>02548 <span class="comment">#     stream</span>
<a name="l02549"></a>02549 <span class="comment">#     </span>
<a name="l02550"></a><a class="code" href="classantlr3_1_1tree_1_1_rewrite_rule_element_stream.html">02550</a> <span class="keyword">class </span><a class="code" href="classantlr3_1_1tree_1_1_rewrite_rule_element_stream.html" title="Internal helper class.">RewriteRuleElementStream</a>(object):
<a name="l02551"></a>02551 
<a name="l02552"></a><a class="code" href="classantlr3_1_1tree_1_1_rewrite_rule_element_stream.html#1e5c9acb5122beebf9aa06cce0486fba">02552</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_rewrite_rule_element_stream.html#1e5c9acb5122beebf9aa06cce0486fba">__init__</a>(self, adaptor, elementDescription, elements=None):
<a name="l02553"></a>02553         <span class="comment"># Cursor 0..n-1.  If singleElement!=null, cursor is 0 until you next(),</span>
<a name="l02554"></a>02554         <span class="comment"># which bumps it to 1 meaning no more elements.</span>
<a name="l02555"></a><a class="code" href="classantlr3_1_1tree_1_1_rewrite_rule_element_stream.html#b7720593daba777f3ae15d56793776a2">02555</a>         self.<a class="code" href="classantlr3_1_1tree_1_1_rewrite_rule_element_stream.html#b7720593daba777f3ae15d56793776a2">cursor</a> = 0
<a name="l02556"></a>02556 
<a name="l02557"></a>02557         <span class="comment"># Track single elements w/o creating a list.  Upon 2nd add, alloc list</span>
<a name="l02558"></a><a class="code" href="classantlr3_1_1tree_1_1_rewrite_rule_element_stream.html#80d4b0074e312bde99c0a7ba996a7039">02558</a>         self.<a class="code" href="classantlr3_1_1tree_1_1_rewrite_rule_element_stream.html#80d4b0074e312bde99c0a7ba996a7039">singleElement</a> = <span class="keywordtype">None</span>
<a name="l02559"></a>02559 
<a name="l02560"></a>02560         <span class="comment"># The list of tokens or subtrees we are tracking</span>
<a name="l02561"></a><a class="code" href="classantlr3_1_1tree_1_1_rewrite_rule_element_stream.html#4f44a36648d533375d2c603737dd54e0">02561</a>         self.<a class="code" href="classantlr3_1_1tree_1_1_rewrite_rule_element_stream.html#4f44a36648d533375d2c603737dd54e0">elements</a> = <span class="keywordtype">None</span>
<a name="l02562"></a>02562 
<a name="l02563"></a>02563         <span class="comment"># Once a node / subtree has been used in a stream, it must be dup'd</span>
<a name="l02564"></a>02564         <span class="comment"># from then on.  Streams are reset after subrules so that the streams</span>
<a name="l02565"></a>02565         <span class="comment"># can be reused in future subrules.  So, reset must set a dirty bit.</span>
<a name="l02566"></a>02566         <span class="comment"># If dirty, then next() always returns a dup.</span>
<a name="l02567"></a><a class="code" href="classantlr3_1_1tree_1_1_rewrite_rule_element_stream.html#6adb12dab568a982c6dc345b4da5912b">02567</a>         self.<a class="code" href="classantlr3_1_1tree_1_1_rewrite_rule_element_stream.html#6adb12dab568a982c6dc345b4da5912b">dirty</a> = <span class="keyword">False</span>
<a name="l02568"></a>02568         
<a name="l02569"></a>02569         <span class="comment"># The element or stream description; usually has name of the token or</span>
<a name="l02570"></a>02570         <span class="comment"># rule reference that this list tracks.  Can include rulename too, but</span>
<a name="l02571"></a>02571         <span class="comment"># the exception would track that info.</span>
<a name="l02572"></a><a class="code" href="classantlr3_1_1tree_1_1_rewrite_rule_element_stream.html#c337b1f7d4eb07566fa1b12a4de336b0">02572</a>         self.<a class="code" href="classantlr3_1_1tree_1_1_rewrite_rule_element_stream.html#c337b1f7d4eb07566fa1b12a4de336b0">elementDescription</a> = elementDescription
<a name="l02573"></a>02573 
<a name="l02574"></a><a class="code" href="classantlr3_1_1tree_1_1_rewrite_rule_element_stream.html#22a35f58d720f6e1a5cd0c4e3289c507">02574</a>         self.<a class="code" href="classantlr3_1_1tree_1_1_rewrite_rule_element_stream.html#22a35f58d720f6e1a5cd0c4e3289c507">adaptor</a> = adaptor
<a name="l02575"></a>02575 
<a name="l02576"></a>02576         <span class="keywordflow">if</span> isinstance(elements, (list, tuple)):
<a name="l02577"></a>02577             <span class="comment"># Create a stream, but feed off an existing list</span>
<a name="l02578"></a>02578             self.<a class="code" href="classantlr3_1_1tree_1_1_rewrite_rule_element_stream.html#80d4b0074e312bde99c0a7ba996a7039">singleElement</a> = <span class="keywordtype">None</span>
<a name="l02579"></a>02579             self.<a class="code" href="classantlr3_1_1tree_1_1_rewrite_rule_element_stream.html#4f44a36648d533375d2c603737dd54e0">elements</a> = elements
<a name="l02580"></a>02580 
<a name="l02581"></a>02581         <span class="keywordflow">else</span>:
<a name="l02582"></a>02582             <span class="comment"># Create a stream with one element</span>
<a name="l02583"></a>02583             self.<a class="code" href="classantlr3_1_1tree_1_1_rewrite_rule_element_stream.html#1eaccc2e005ce71bd61b2ed553c4f469">add</a>(elements)
<a name="l02584"></a>02584 
<a name="l02585"></a>02585 
<a name="l02586"></a>02586     <span class="comment">##</span>
<a name="l02587"></a>02587     <span class="comment"># </span>
<a name="l02588"></a>02588     <span class="comment">#         Reset the condition of this stream so that it appears we have</span>
<a name="l02589"></a>02589     <span class="comment">#         not consumed any of its elements.  Elements themselves are untouched.</span>
<a name="l02590"></a>02590     <span class="comment">#         Once we reset the stream, any future use will need duplicates.  Set</span>
<a name="l02591"></a>02591     <span class="comment">#         the dirty bit.</span>
<a name="l02592"></a>02592     <span class="comment">#         </span>
<a name="l02593"></a><a class="code" href="classantlr3_1_1tree_1_1_rewrite_rule_element_stream.html#0e67dfdbe1092341146a6fed3eeb5ffb">02593</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_rewrite_rule_element_stream.html#0e67dfdbe1092341146a6fed3eeb5ffb" title="Reset the condition of this stream so that it appears we have not consumed any of...">reset</a>(self):
<a name="l02594"></a>02594         
<a name="l02595"></a>02595         self.<a class="code" href="classantlr3_1_1tree_1_1_rewrite_rule_element_stream.html#b7720593daba777f3ae15d56793776a2">cursor</a> = 0
<a name="l02596"></a>02596         self.<a class="code" href="classantlr3_1_1tree_1_1_rewrite_rule_element_stream.html#6adb12dab568a982c6dc345b4da5912b">dirty</a> = <span class="keyword">True</span>
<a name="l02597"></a>02597 
<a name="l02598"></a>02598         
<a name="l02599"></a><a class="code" href="classantlr3_1_1tree_1_1_rewrite_rule_element_stream.html#1eaccc2e005ce71bd61b2ed553c4f469">02599</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_rewrite_rule_element_stream.html#1eaccc2e005ce71bd61b2ed553c4f469">add</a>(self, el):
<a name="l02600"></a>02600         <span class="keywordflow">if</span> el <span class="keywordflow">is</span> <span class="keywordtype">None</span>:
<a name="l02601"></a>02601             <span class="keywordflow">return</span>
<a name="l02602"></a>02602 
<a name="l02603"></a>02603         <span class="keywordflow">if</span> self.<a class="code" href="classantlr3_1_1tree_1_1_rewrite_rule_element_stream.html#4f44a36648d533375d2c603737dd54e0">elements</a> <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span>: <span class="comment"># if in list, just add</span>
<a name="l02604"></a>02604             self.<a class="code" href="classantlr3_1_1tree_1_1_rewrite_rule_element_stream.html#4f44a36648d533375d2c603737dd54e0">elements</a>.append(el)
<a name="l02605"></a>02605             <span class="keywordflow">return</span>
<a name="l02606"></a>02606 
<a name="l02607"></a>02607         <span class="keywordflow">if</span> self.<a class="code" href="classantlr3_1_1tree_1_1_rewrite_rule_element_stream.html#80d4b0074e312bde99c0a7ba996a7039">singleElement</a> <span class="keywordflow">is</span> <span class="keywordtype">None</span>: <span class="comment"># no elements yet, track w/o list</span>
<a name="l02608"></a>02608             self.<a class="code" href="classantlr3_1_1tree_1_1_rewrite_rule_element_stream.html#80d4b0074e312bde99c0a7ba996a7039">singleElement</a> = el
<a name="l02609"></a>02609             <span class="keywordflow">return</span>
<a name="l02610"></a>02610 
<a name="l02611"></a>02611         <span class="comment"># adding 2nd element, move to list</span>
<a name="l02612"></a>02612         self.<a class="code" href="classantlr3_1_1tree_1_1_rewrite_rule_element_stream.html#4f44a36648d533375d2c603737dd54e0">elements</a> = []
<a name="l02613"></a>02613         self.<a class="code" href="classantlr3_1_1tree_1_1_rewrite_rule_element_stream.html#4f44a36648d533375d2c603737dd54e0">elements</a>.append(self.<a class="code" href="classantlr3_1_1tree_1_1_rewrite_rule_element_stream.html#80d4b0074e312bde99c0a7ba996a7039">singleElement</a>)
<a name="l02614"></a>02614         self.<a class="code" href="classantlr3_1_1tree_1_1_rewrite_rule_element_stream.html#80d4b0074e312bde99c0a7ba996a7039">singleElement</a> = <span class="keywordtype">None</span>
<a name="l02615"></a>02615         self.<a class="code" href="classantlr3_1_1tree_1_1_rewrite_rule_element_stream.html#4f44a36648d533375d2c603737dd54e0">elements</a>.append(el)
<a name="l02616"></a>02616 
<a name="l02617"></a>02617 
<a name="l02618"></a>02618     <span class="comment">##</span>
<a name="l02619"></a>02619     <span class="comment"># </span>
<a name="l02620"></a>02620     <span class="comment">#         Return the next element in the stream.  If out of elements, throw</span>
<a name="l02621"></a>02621     <span class="comment">#         an exception unless size()==1.  If size is 1, then return elements[0].</span>
<a name="l02622"></a>02622     <span class="comment">#         </span>
<a name="l02623"></a>02623     <span class="comment">#         Return a duplicate node/subtree if stream is out of elements and</span>
<a name="l02624"></a>02624     <span class="comment">#         size==1. If we've already used the element, dup (dirty bit set).</span>
<a name="l02625"></a>02625     <span class="comment">#         </span>
<a name="l02626"></a><a class="code" href="classantlr3_1_1tree_1_1_rewrite_rule_element_stream.html#93c082e0cce9691e1ba3f8974224f1af">02626</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_rewrite_rule_element_stream.html#93c082e0cce9691e1ba3f8974224f1af" title="Return the next element in the stream.">nextTree</a>(self):
<a name="l02627"></a>02627         
<a name="l02628"></a>02628         <span class="keywordflow">if</span> (self.<a class="code" href="classantlr3_1_1tree_1_1_rewrite_rule_element_stream.html#6adb12dab568a982c6dc345b4da5912b">dirty</a>
<a name="l02629"></a>02629             <span class="keywordflow">or</span> (self.<a class="code" href="classantlr3_1_1tree_1_1_rewrite_rule_element_stream.html#b7720593daba777f3ae15d56793776a2">cursor</a> &gt;= len(self) <span class="keywordflow">and</span> len(self) == 1)
<a name="l02630"></a>02630             ):
<a name="l02631"></a>02631             <span class="comment"># if out of elements and size is 1, dup</span>
<a name="l02632"></a>02632             el = self.<a class="code" href="classantlr3_1_1tree_1_1_rewrite_rule_element_stream.html#2bfadee0f8b6eb7e5f59222cf76ddc29" title="do the work of getting the next element, making sure that it&amp;#39;s a tree node or...">_next</a>()
<a name="l02633"></a>02633             <span class="keywordflow">return</span> self.<a class="code" href="classantlr3_1_1tree_1_1_rewrite_rule_element_stream.html#a72bea7045ccd7464365d0dae6cf1bd0" title="When constructing trees, sometimes we need to dup a token or AST subtree.">dup</a>(el)
<a name="l02634"></a>02634 
<a name="l02635"></a>02635         <span class="comment"># test size above then fetch</span>
<a name="l02636"></a>02636         el = self.<a class="code" href="classantlr3_1_1tree_1_1_rewrite_rule_element_stream.html#2bfadee0f8b6eb7e5f59222cf76ddc29" title="do the work of getting the next element, making sure that it&amp;#39;s a tree node or...">_next</a>()
<a name="l02637"></a>02637         <span class="keywordflow">return</span> el
<a name="l02638"></a>02638 
<a name="l02639"></a>02639 
<a name="l02640"></a>02640     <span class="comment">##</span>
<a name="l02641"></a>02641     <span class="comment"># </span>
<a name="l02642"></a>02642     <span class="comment">#         do the work of getting the next element, making sure that it's</span>
<a name="l02643"></a>02643     <span class="comment">#         a tree node or subtree.  Deal with the optimization of single-</span>
<a name="l02644"></a>02644     <span class="comment">#         element list versus list of size &gt; 1.  Throw an exception</span>
<a name="l02645"></a>02645     <span class="comment">#         if the stream is empty or we're out of elements and size&gt;1.</span>
<a name="l02646"></a>02646     <span class="comment">#         protected so you can override in a subclass if necessary.</span>
<a name="l02647"></a>02647     <span class="comment">#         </span>
<a name="l02648"></a><a class="code" href="classantlr3_1_1tree_1_1_rewrite_rule_element_stream.html#2bfadee0f8b6eb7e5f59222cf76ddc29">02648</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_rewrite_rule_element_stream.html#2bfadee0f8b6eb7e5f59222cf76ddc29" title="do the work of getting the next element, making sure that it&amp;#39;s a tree node or...">_next</a>(self):
<a name="l02649"></a>02649 
<a name="l02650"></a>02650         <span class="keywordflow">if</span> len(self) == 0:
<a name="l02651"></a>02651             <span class="keywordflow">raise</span> RewriteEmptyStreamException(self.<a class="code" href="classantlr3_1_1tree_1_1_rewrite_rule_element_stream.html#c337b1f7d4eb07566fa1b12a4de336b0">elementDescription</a>)
<a name="l02652"></a>02652             
<a name="l02653"></a>02653         <span class="keywordflow">if</span> self.<a class="code" href="classantlr3_1_1tree_1_1_rewrite_rule_element_stream.html#b7720593daba777f3ae15d56793776a2">cursor</a> &gt;= len(self): <span class="comment"># out of elements?</span>
<a name="l02654"></a>02654             <span class="keywordflow">if</span> len(self) == 1: <span class="comment"># if size is 1, it's ok; return and we'll dup </span>
<a name="l02655"></a>02655                 <span class="keywordflow">return</span> self.<a class="code" href="classantlr3_1_1tree_1_1_rewrite_rule_element_stream.html#e106421857d4a8b8620a2f9c56d2c543" title="Ensure stream emits trees; tokens must be converted to AST nodes.">toTree</a>(self.<a class="code" href="classantlr3_1_1tree_1_1_rewrite_rule_element_stream.html#80d4b0074e312bde99c0a7ba996a7039">singleElement</a>)
<a name="l02656"></a>02656 
<a name="l02657"></a>02657             <span class="comment"># out of elements and size was not 1, so we can't dup</span>
<a name="l02658"></a>02658             <span class="keywordflow">raise</span> RewriteCardinalityException(self.<a class="code" href="classantlr3_1_1tree_1_1_rewrite_rule_element_stream.html#c337b1f7d4eb07566fa1b12a4de336b0">elementDescription</a>)
<a name="l02659"></a>02659 
<a name="l02660"></a>02660         <span class="comment"># we have elements</span>
<a name="l02661"></a>02661         <span class="keywordflow">if</span> self.<a class="code" href="classantlr3_1_1tree_1_1_rewrite_rule_element_stream.html#80d4b0074e312bde99c0a7ba996a7039">singleElement</a> <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span>:
<a name="l02662"></a>02662             self.<a class="code" href="classantlr3_1_1tree_1_1_rewrite_rule_element_stream.html#b7720593daba777f3ae15d56793776a2">cursor</a> += 1 <span class="comment"># move cursor even for single element list</span>
<a name="l02663"></a>02663             <span class="keywordflow">return</span> self.<a class="code" href="classantlr3_1_1tree_1_1_rewrite_rule_element_stream.html#e106421857d4a8b8620a2f9c56d2c543" title="Ensure stream emits trees; tokens must be converted to AST nodes.">toTree</a>(self.<a class="code" href="classantlr3_1_1tree_1_1_rewrite_rule_element_stream.html#80d4b0074e312bde99c0a7ba996a7039">singleElement</a>)
<a name="l02664"></a>02664 
<a name="l02665"></a>02665         <span class="comment"># must have more than one in list, pull from elements</span>
<a name="l02666"></a>02666         o = self.<a class="code" href="classantlr3_1_1tree_1_1_rewrite_rule_element_stream.html#e106421857d4a8b8620a2f9c56d2c543" title="Ensure stream emits trees; tokens must be converted to AST nodes.">toTree</a>(self.<a class="code" href="classantlr3_1_1tree_1_1_rewrite_rule_element_stream.html#4f44a36648d533375d2c603737dd54e0">elements</a>[self.<a class="code" href="classantlr3_1_1tree_1_1_rewrite_rule_element_stream.html#b7720593daba777f3ae15d56793776a2">cursor</a>])
<a name="l02667"></a>02667         self.<a class="code" href="classantlr3_1_1tree_1_1_rewrite_rule_element_stream.html#b7720593daba777f3ae15d56793776a2">cursor</a> += 1
<a name="l02668"></a>02668         <span class="keywordflow">return</span> o
<a name="l02669"></a>02669 
<a name="l02670"></a>02670 
<a name="l02671"></a>02671     <span class="comment">##</span>
<a name="l02672"></a>02672     <span class="comment"># </span>
<a name="l02673"></a>02673     <span class="comment">#         When constructing trees, sometimes we need to dup a token or AST</span>
<a name="l02674"></a>02674     <span class="comment">#         subtree.  Dup'ing a token means just creating another AST node</span>
<a name="l02675"></a>02675     <span class="comment">#         around it.  For trees, you must call the adaptor.dupTree() unless</span>
<a name="l02676"></a>02676     <span class="comment">#         the element is for a tree root; then it must be a node dup.</span>
<a name="l02677"></a>02677     <span class="comment">#         </span>
<a name="l02678"></a><a class="code" href="classantlr3_1_1tree_1_1_rewrite_rule_element_stream.html#a72bea7045ccd7464365d0dae6cf1bd0">02678</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_rewrite_rule_element_stream.html#a72bea7045ccd7464365d0dae6cf1bd0" title="When constructing trees, sometimes we need to dup a token or AST subtree.">dup</a>(self, el):
<a name="l02679"></a>02679 
<a name="l02680"></a>02680         <span class="keywordflow">raise</span> NotImplementedError
<a name="l02681"></a>02681     
<a name="l02682"></a>02682 
<a name="l02683"></a>02683     <span class="comment">##</span>
<a name="l02684"></a>02684     <span class="comment"># </span>
<a name="l02685"></a>02685     <span class="comment">#         Ensure stream emits trees; tokens must be converted to AST nodes.</span>
<a name="l02686"></a>02686     <span class="comment">#         AST nodes can be passed through unmolested.</span>
<a name="l02687"></a>02687     <span class="comment">#         </span>
<a name="l02688"></a><a class="code" href="classantlr3_1_1tree_1_1_rewrite_rule_element_stream.html#e106421857d4a8b8620a2f9c56d2c543">02688</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_rewrite_rule_element_stream.html#e106421857d4a8b8620a2f9c56d2c543" title="Ensure stream emits trees; tokens must be converted to AST nodes.">toTree</a>(self, el):
<a name="l02689"></a>02689 
<a name="l02690"></a>02690         <span class="keywordflow">return</span> el
<a name="l02691"></a>02691 
<a name="l02692"></a>02692 
<a name="l02693"></a><a class="code" href="classantlr3_1_1tree_1_1_rewrite_rule_element_stream.html#17486ebb0c08cfb722c27b4a29f57b8b">02693</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_rewrite_rule_element_stream.html#17486ebb0c08cfb722c27b4a29f57b8b">hasNext</a>(self):
<a name="l02694"></a>02694         <span class="keywordflow">return</span> ( (self.<a class="code" href="classantlr3_1_1tree_1_1_rewrite_rule_element_stream.html#80d4b0074e312bde99c0a7ba996a7039">singleElement</a> <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span> <span class="keywordflow">and</span> self.<a class="code" href="classantlr3_1_1tree_1_1_rewrite_rule_element_stream.html#b7720593daba777f3ae15d56793776a2">cursor</a> &lt; 1)
<a name="l02695"></a>02695                  <span class="keywordflow">or</span> (self.<a class="code" href="classantlr3_1_1tree_1_1_rewrite_rule_element_stream.html#4f44a36648d533375d2c603737dd54e0">elements</a> <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span>
<a name="l02696"></a>02696                      <span class="keywordflow">and</span> self.<a class="code" href="classantlr3_1_1tree_1_1_rewrite_rule_element_stream.html#b7720593daba777f3ae15d56793776a2">cursor</a> &lt; len(self.<a class="code" href="classantlr3_1_1tree_1_1_rewrite_rule_element_stream.html#4f44a36648d533375d2c603737dd54e0">elements</a>)
<a name="l02697"></a>02697                      )
<a name="l02698"></a>02698                  )
<a name="l02699"></a>02699 
<a name="l02700"></a>02700                  
<a name="l02701"></a><a class="code" href="classantlr3_1_1tree_1_1_rewrite_rule_element_stream.html#fa4c9fa7796f02262404045d849f6652">02701</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_rewrite_rule_element_stream.html#fa4c9fa7796f02262404045d849f6652">size</a>(self):
<a name="l02702"></a>02702         <span class="keywordflow">if</span> self.<a class="code" href="classantlr3_1_1tree_1_1_rewrite_rule_element_stream.html#80d4b0074e312bde99c0a7ba996a7039">singleElement</a> <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span>:
<a name="l02703"></a>02703             <span class="keywordflow">return</span> 1
<a name="l02704"></a>02704 
<a name="l02705"></a>02705         <span class="keywordflow">if</span> self.<a class="code" href="classantlr3_1_1tree_1_1_rewrite_rule_element_stream.html#4f44a36648d533375d2c603737dd54e0">elements</a> <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span>:
<a name="l02706"></a>02706             <span class="keywordflow">return</span> len(self.<a class="code" href="classantlr3_1_1tree_1_1_rewrite_rule_element_stream.html#4f44a36648d533375d2c603737dd54e0">elements</a>)
<a name="l02707"></a>02707 
<a name="l02708"></a>02708         <span class="keywordflow">return</span> 0
<a name="l02709"></a>02709 
<a name="l02710"></a><a class="code" href="classantlr3_1_1tree_1_1_rewrite_rule_element_stream.html#b9a9d88408ba48e35d8b5e13d47b5b57">02710</a>     __len__ = size
<a name="l02711"></a>02711     
<a name="l02712"></a>02712 
<a name="l02713"></a>02713     <span class="comment">##</span>
<a name="l02714"></a>02714     <span class="comment"># Deprecated. Directly access elementDescription attribute</span>
<a name="l02715"></a><a class="code" href="classantlr3_1_1tree_1_1_rewrite_rule_element_stream.html#a617986f1a27286951e9efdc22277a8d">02715</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_rewrite_rule_element_stream.html#a617986f1a27286951e9efdc22277a8d" title="Deprecated.">getDescription</a>(self):
<a name="l02716"></a>02716         
<a name="l02717"></a>02717         <span class="keywordflow">return</span> self.<a class="code" href="classantlr3_1_1tree_1_1_rewrite_rule_element_stream.html#c337b1f7d4eb07566fa1b12a4de336b0">elementDescription</a>
<a name="l02718"></a>02718 
<a name="l02719"></a>02719 
<a name="l02720"></a>02720 <span class="comment">##</span>
<a name="l02721"></a>02721 <span class="comment"># @brief Internal helper class.</span>
<a name="l02722"></a><a class="code" href="classantlr3_1_1tree_1_1_rewrite_rule_token_stream.html">02722</a> <span class="keyword">class </span><a class="code" href="classantlr3_1_1tree_1_1_rewrite_rule_token_stream.html" title="Internal helper class.">RewriteRuleTokenStream</a>(<a class="code" href="classantlr3_1_1tree_1_1_rewrite_rule_element_stream.html" title="Internal helper class.">RewriteRuleElementStream</a>):
<a name="l02723"></a>02723 
<a name="l02724"></a><a class="code" href="classantlr3_1_1tree_1_1_rewrite_rule_token_stream.html#5fd0901373f2490fef82f903bb96ed6d">02724</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_rewrite_rule_token_stream.html#5fd0901373f2490fef82f903bb96ed6d" title="Ensure stream emits trees; tokens must be converted to AST nodes.">toTree</a>(self, el):
<a name="l02725"></a>02725         <span class="comment"># Don't convert to a tree unless they explicitly call nextTree.</span>
<a name="l02726"></a>02726         <span class="comment"># This way we can do hetero tree nodes in rewrite.</span>
<a name="l02727"></a>02727         <span class="keywordflow">return</span> el
<a name="l02728"></a>02728 
<a name="l02729"></a>02729 
<a name="l02730"></a><a class="code" href="classantlr3_1_1tree_1_1_rewrite_rule_token_stream.html#a14d2fbeb5634f7d8cc9c79193dec7f5">02730</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_rewrite_rule_token_stream.html#a14d2fbeb5634f7d8cc9c79193dec7f5">nextNode</a>(self):
<a name="l02731"></a>02731         t = self._next()
<a name="l02732"></a>02732         <span class="keywordflow">return</span> self.adaptor.createWithPayload(t)
<a name="l02733"></a>02733 
<a name="l02734"></a>02734     
<a name="l02735"></a><a class="code" href="classantlr3_1_1tree_1_1_rewrite_rule_token_stream.html#9f3d5c447c4214c292c72b1f866adbe0">02735</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_rewrite_rule_token_stream.html#9f3d5c447c4214c292c72b1f866adbe0">nextToken</a>(self):
<a name="l02736"></a>02736         <span class="keywordflow">return</span> self._next()
<a name="l02737"></a>02737 
<a name="l02738"></a>02738     
<a name="l02739"></a><a class="code" href="classantlr3_1_1tree_1_1_rewrite_rule_token_stream.html#18160f7d3ee73d8b3361755d925dd205">02739</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_rewrite_rule_token_stream.html#18160f7d3ee73d8b3361755d925dd205" title="When constructing trees, sometimes we need to dup a token or AST subtree.">dup</a>(self, el):
<a name="l02740"></a>02740         <span class="keywordflow">raise</span> TypeError(<span class="stringliteral">"dup can't be called for a token stream."</span>)
<a name="l02741"></a>02741 
<a name="l02742"></a>02742 
<a name="l02743"></a>02743 <span class="comment">##</span>
<a name="l02744"></a>02744 <span class="comment"># @brief Internal helper class.</span>
<a name="l02745"></a><a class="code" href="classantlr3_1_1tree_1_1_rewrite_rule_subtree_stream.html">02745</a> <span class="keyword">class </span><a class="code" href="classantlr3_1_1tree_1_1_rewrite_rule_subtree_stream.html" title="Internal helper class.">RewriteRuleSubtreeStream</a>(<a class="code" href="classantlr3_1_1tree_1_1_rewrite_rule_element_stream.html" title="Internal helper class.">RewriteRuleElementStream</a>):
<a name="l02746"></a>02746 
<a name="l02747"></a>02747     <span class="comment">##</span>
<a name="l02748"></a>02748     <span class="comment"># </span>
<a name="l02749"></a>02749     <span class="comment">#         Treat next element as a single node even if it's a subtree.</span>
<a name="l02750"></a>02750     <span class="comment">#         This is used instead of next() when the result has to be a</span>
<a name="l02751"></a>02751     <span class="comment">#         tree root node.  Also prevents us from duplicating recently-added</span>
<a name="l02752"></a>02752     <span class="comment">#         children; e.g., ^(type ID)+ adds ID to type and then 2nd iteration</span>
<a name="l02753"></a>02753     <span class="comment">#         must dup the type node, but ID has been added.</span>
<a name="l02754"></a>02754     <span class="comment"># </span>
<a name="l02755"></a>02755     <span class="comment">#         Referencing a rule result twice is ok; dup entire tree as</span>
<a name="l02756"></a>02756     <span class="comment">#         we can't be adding trees as root; e.g., expr expr.</span>
<a name="l02757"></a>02757     <span class="comment"># </span>
<a name="l02758"></a>02758     <span class="comment">#         Hideous code duplication here with super.next().  Can't think of</span>
<a name="l02759"></a>02759     <span class="comment">#         a proper way to refactor.  This needs to always call dup node</span>
<a name="l02760"></a>02760     <span class="comment">#         and super.next() doesn't know which to call: dup node or dup tree.</span>
<a name="l02761"></a>02761     <span class="comment">#         </span>
<a name="l02762"></a><a class="code" href="classantlr3_1_1tree_1_1_rewrite_rule_subtree_stream.html#fb92a99a80adaa81b2e267e8aa8404e7">02762</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_rewrite_rule_subtree_stream.html#fb92a99a80adaa81b2e267e8aa8404e7" title="Treat next element as a single node even if it&amp;#39;s a subtree.">nextNode</a>(self):
<a name="l02763"></a>02763         
<a name="l02764"></a>02764         <span class="keywordflow">if</span> (self.dirty
<a name="l02765"></a>02765             <span class="keywordflow">or</span> (self.cursor &gt;= len(self) <span class="keywordflow">and</span> len(self) == 1)
<a name="l02766"></a>02766             ):
<a name="l02767"></a>02767             <span class="comment"># if out of elements and size is 1, dup (at most a single node</span>
<a name="l02768"></a>02768             <span class="comment"># since this is for making root nodes).</span>
<a name="l02769"></a>02769             el = self._next()
<a name="l02770"></a>02770             <span class="keywordflow">return</span> self.adaptor.dupNode(el)
<a name="l02771"></a>02771 
<a name="l02772"></a>02772         <span class="comment"># test size above then fetch</span>
<a name="l02773"></a>02773         el = self._next()
<a name="l02774"></a>02774         <span class="keywordflow">return</span> el
<a name="l02775"></a>02775 
<a name="l02776"></a>02776 
<a name="l02777"></a><a class="code" href="classantlr3_1_1tree_1_1_rewrite_rule_subtree_stream.html#1a7cd8caf16e92b371312f3071e15252">02777</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_rewrite_rule_subtree_stream.html#1a7cd8caf16e92b371312f3071e15252" title="When constructing trees, sometimes we need to dup a token or AST subtree.">dup</a>(self, el):
<a name="l02778"></a>02778         <span class="keywordflow">return</span> self.adaptor.dupTree(el)
<a name="l02779"></a>02779 
<a name="l02780"></a>02780 
<a name="l02781"></a>02781 
<a name="l02782"></a>02782 <span class="comment">##</span>
<a name="l02783"></a>02783 <span class="comment"># </span>
<a name="l02784"></a>02784 <span class="comment">#     Queues up nodes matched on left side of -&gt; in a tree parser. This is</span>
<a name="l02785"></a>02785 <span class="comment">#     the analog of RewriteRuleTokenStream for normal parsers. </span>
<a name="l02786"></a>02786 <span class="comment">#     </span>
<a name="l02787"></a><a class="code" href="classantlr3_1_1tree_1_1_rewrite_rule_node_stream.html">02787</a> <span class="keyword">class </span><a class="code" href="classantlr3_1_1tree_1_1_rewrite_rule_node_stream.html" title="Queues up nodes matched on left side of -&amp;gt; in a tree parser.">RewriteRuleNodeStream</a>(<a class="code" href="classantlr3_1_1tree_1_1_rewrite_rule_element_stream.html" title="Internal helper class.">RewriteRuleElementStream</a>):
<a name="l02788"></a>02788     
<a name="l02789"></a><a class="code" href="classantlr3_1_1tree_1_1_rewrite_rule_node_stream.html#1a8a4b38aaa356daa99d4f9b5ce37e04">02789</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_rewrite_rule_node_stream.html#1a8a4b38aaa356daa99d4f9b5ce37e04">nextNode</a>(self):
<a name="l02790"></a>02790         <span class="keywordflow">return</span> self._next()
<a name="l02791"></a>02791 
<a name="l02792"></a>02792 
<a name="l02793"></a><a class="code" href="classantlr3_1_1tree_1_1_rewrite_rule_node_stream.html#c9d01e5f805f3920e6b0fceff5333f08">02793</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_rewrite_rule_node_stream.html#c9d01e5f805f3920e6b0fceff5333f08" title="Ensure stream emits trees; tokens must be converted to AST nodes.">toTree</a>(self, el):
<a name="l02794"></a>02794         <span class="keywordflow">return</span> self.adaptor.dupNode(el)
<a name="l02795"></a>02795 
<a name="l02796"></a>02796 
<a name="l02797"></a><a class="code" href="classantlr3_1_1tree_1_1_rewrite_rule_node_stream.html#340e7046aa7551976b058da89e831745">02797</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_rewrite_rule_node_stream.html#340e7046aa7551976b058da89e831745" title="When constructing trees, sometimes we need to dup a token or AST subtree.">dup</a>(self, el):
<a name="l02798"></a>02798         <span class="comment"># we dup every node, so don't have to worry about calling dup; short-</span>
<a name="l02799"></a>02799         <span class="comment">#circuited next() so it doesn't call.</span>
<a name="l02800"></a>02800         <span class="keywordflow">raise</span> TypeError(<span class="stringliteral">"dup can't be called for a node stream."</span>)
<a name="l02801"></a>02801 
<a name="l02802"></a>02802 
<a name="l02803"></a>02803 <span class="comment">##</span>
<a name="l02804"></a>02804 <span class="comment"># </span>
<a name="l02805"></a>02805 <span class="comment">#     This is identical to the ParserRuleReturnScope except that</span>
<a name="l02806"></a>02806 <span class="comment">#     the start property is a tree nodes not Token object</span>
<a name="l02807"></a>02807 <span class="comment">#     when you are parsing trees.  To be generic the tree node types</span>
<a name="l02808"></a>02808 <span class="comment">#     have to be Object.</span>
<a name="l02809"></a>02809 <span class="comment">#     </span>
<a name="l02810"></a><a class="code" href="classantlr3_1_1tree_1_1_tree_rule_return_scope.html">02810</a> <span class="keyword">class </span><a class="code" href="classantlr3_1_1tree_1_1_tree_rule_return_scope.html" title="This is identical to the ParserRuleReturnScope except that the start property is...">TreeRuleReturnScope</a>(<a class="code" href="classantlr3_1_1_rule_return_scope.html" title="Rules can return start/stop info as well as possible trees and templates.">RuleReturnScope</a>):
<a name="l02811"></a>02811 
<a name="l02812"></a><a class="code" href="classantlr3_1_1tree_1_1_tree_rule_return_scope.html#bdf98b9635c9f44e40092405da1bf725">02812</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_tree_rule_return_scope.html#bdf98b9635c9f44e40092405da1bf725">__init__</a>(self):
<a name="l02813"></a><a class="code" href="classantlr3_1_1tree_1_1_tree_rule_return_scope.html#38376b1d36c6e28d8c14555740645257">02813</a>         self.<a class="code" href="classantlr3_1_1tree_1_1_tree_rule_return_scope.html#38376b1d36c6e28d8c14555740645257">start</a> = <span class="keywordtype">None</span>
<a name="l02814"></a><a class="code" href="classantlr3_1_1tree_1_1_tree_rule_return_scope.html#558d70ec74053973ce4e8c400980e32c">02814</a>         self.<a class="code" href="classantlr3_1_1tree_1_1_tree_rule_return_scope.html#558d70ec74053973ce4e8c400980e32c">tree</a> = <span class="keywordtype">None</span>
<a name="l02815"></a>02815         
<a name="l02816"></a>02816     
<a name="l02817"></a><a class="code" href="classantlr3_1_1tree_1_1_tree_rule_return_scope.html#ab347c000ac9fea1c2a7c5c437dad65d">02817</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_tree_rule_return_scope.html#ab347c000ac9fea1c2a7c5c437dad65d" title="Return the start token or tree.">getStart</a>(self):
<a name="l02818"></a>02818         <span class="keywordflow">return</span> self.<a class="code" href="classantlr3_1_1tree_1_1_tree_rule_return_scope.html#38376b1d36c6e28d8c14555740645257">start</a>
<a name="l02819"></a>02819 
<a name="l02820"></a>02820     
<a name="l02821"></a><a class="code" href="classantlr3_1_1tree_1_1_tree_rule_return_scope.html#f345c7630ea0d4758970b2696020db44">02821</a>     <span class="keyword">def </span><a class="code" href="classantlr3_1_1tree_1_1_tree_rule_return_scope.html#f345c7630ea0d4758970b2696020db44" title="Has a value potentially if output=AST.">getTree</a>(self):
<a name="l02822"></a>02822         <span class="keywordflow">return</span> self.<a class="code" href="classantlr3_1_1tree_1_1_tree_rule_return_scope.html#558d70ec74053973ce4e8c400980e32c">tree</a>
<a name="l02823"></a>02823 
<a name="l02824"></a>02824 
<a name="l02825"></a>02825 
</pre></div></div>
<hr size="1"><address style="text-align: right;"><small>Generated on Mon Nov 29 17:24:24 2010 for ANTLR Python API by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.5 </small></address>
</body>
</html>
