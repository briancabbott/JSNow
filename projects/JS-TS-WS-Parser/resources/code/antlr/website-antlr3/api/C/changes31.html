<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>ANTLR3C: Changes in 3.1 from 3.0</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.5 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="classes.html"><span>Data&nbsp;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    </ul>
  </div>
  <div class="navpath"><a class="el" href="main.html">ANTLR3 C Runtime API and Usage Guide.</a>
  </div>
</div>
<div class="contents">
<h1><a class="anchor" name="changes31">Changes in 3.1 from 3.0 </a></h1>The following changes have taken place from 3.0 to 3.1.<p>
Some of them may require minor changes to your grammar files or the programs that invoke your grammar. Please take the time to read through this list as it may save you time later.<h2><a class="anchor" name="returns">
Constructor Return Values</a></h2>
In previous releases the return value from both the generated constructors and built in constructor functions would return a value of -1 or -2 if a problem occurred. However, the only problem that can really occur is lack of memory, hence to avoid the remote change that some memory allocation scheme would return an address of -1 for a pointer, the return address is now NULL if there was no memory available. The old macros for this mechanism have been removed which will force you to read this information. You now need only check the return address for NULL, or you could not bother doing that and join with 95% of the world's C code.<h2><a class="anchor" name="trees">
Tree Parser Rewrites</a></h2>
The 3.1 runtime now supports tree rewrites from tree parsers. See the main ANTLR documentation for more details. This beta version contains <a class="el" href="knownissues.html">Known Issues</a> regarding the release of mmeory allocated to tree nodes when they are rewritten in some combinations of re-writing tree parsers. These issues will be corrected before release.<h2><a class="anchor" name="debugger">
ANTLRWorks Debugger</a></h2>
The ANTLRWorks debugger is now fully supported by this version of the runtime. It supports remote debugging only (you cannot generate C, compile and debug it from the ANTLRWorks IDE.) However both parser and tree parser debugging is supported providing you are using a version of ANTLRWorks that supports tree parser debugging. Generate the C code with the -debug option of the ANTLR tool, as per any other target.<p>
Note that when you invoke your debugging version of the parser, it will appear to hang but is in fact waiting on a local TCP socket connection from the ANTLRWorks debugger. As the target environment is unknown, it is not prudent to generate notification status messages using something like printf, as the target environment may not have a console or implement printf.<h2><a class="anchor" name="macros">
Macro Changes</a></h2>
Prior to the 3.1 release, accessing the token source of a lexer required knowledge of where the token source pointer was located wihtin the lexer. In 3.1, the token source was burried further in the innards of the C runtime and such knowledge is considerd irreleavant and confusing. Hence, when creating a token stream from a token source, it is now mandatory to use the new C macro TOKENSOURCE(lxr), which will expand to point at the token source interface. This MACRO will be maintained across future versions. You can see how to use it in the downloadable examples, avaiable from the downloads page of the ANTLR web site. Here is the relevant code for creating a token stream, extracted from those examples:<p>
<div class="fragment"><pre class="fragment"> tstream = <a class="code" href="antlr3tokenstream_8c.html#d4ef5baa73e1fdd0f0c2fc4cce4277cb">antlr3CommonTokenStreamSourceNew</a>(<a class="code" href="antlr3defs_8h.html#0f089eaab6993865d3d5daab26f8db98">ANTLR3_SIZE_HINT</a>, TOKENSOURCE(lxr));
</pre></div> </div>
<hr size="1"><address style="text-align: right;"><small>Generated on Mon Nov 29 17:23:56 2010 for ANTLR3C by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.5 </small></address>
</body>
</html>
