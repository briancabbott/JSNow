<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [antlr-interest] Making a translator with C runtime and no string	templates
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20Making%20a%20translator%20with%20C%20runtime%20and%20no%20string%0A%09templates&In-Reply-To=%3CBANLkTik%2BfFZZJ%2BTu3DHSfnBNTh8pwMR%3DVA%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   
   <LINK REL="Next"  HREF="041985.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[antlr-interest] Making a translator with C runtime and no string	templates</H1>
    <B>Neha V. Karanjkar</B> 
    <A HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20Making%20a%20translator%20with%20C%20runtime%20and%20no%20string%0A%09templates&In-Reply-To=%3CBANLkTik%2BfFZZJ%2BTu3DHSfnBNTh8pwMR%3DVA%40mail.gmail.com%3E"
       TITLE="[antlr-interest] Making a translator with C runtime and no string	templates">neha.karanjkar at gmail.com
       </A><BR>
    <I>Fri Jul  1 00:05:07 PDT 2011</I>
    <P><UL>
        
        <LI>Next message: <A HREF="041985.html">[antlr-interest] Ambiguous lexer rules
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#41984">[ date ]</a>
              <a href="thread.html#41984">[ thread ]</a>
              <a href="subject.html#41984">[ subject ]</a>
              <a href="author.html#41984">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi.


I'm making a translator using antlr (with C runtime)
for a small language, which is somewhat like a hardware
description language(VHDL/Verilog).

I'm new to antlr, and (I think) string templates cannot be used
with a C target, so I'm using a scheme(described below)  to generate code.

I'm not sure if this is the best way to go.
 I'd appreciate any advice/comments.

----------
The input consists of a set of module descriptions.
Each module description should get translated to a C++ class
into a .cpp and a .h file.

As I cannot use string templates, I'm using 2 sets of Lexer+Parser.
One parses the input and fills up a data structure.
The second parses a template for generating the
.cpp/.h files and uses this template, along with the data structure,
 to generate code.


The first parser has to instruct the second one
to dump code, after parsing *each* module description
as follows:
input : (module_description    //fill up some data structure
                {ask code generator to dump code}
            ) + &lt;EOF&gt;;


The template can have:
 *plain text to be dumped as it is
 *fields whose values have to be looked up from the data structure,
 *instructions to take certain actions, like change destination file

I have the following questions:

1. Is  there a better way of doing this?
  (I don't want to use a lot of printfs to generate code)

2. For the code generation part, the template remains unchanged.
is there a way to reuse the token stream?
I'm using 3.1.4 SNAPSHOT of the C runtime.
I tried tstream-&gt;reset(), CodeGenerator_psr-&gt;reset(),
but it doesn't work.


Thanks,
-Neha Karanjkar
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	
	<LI>Next message: <A HREF="041985.html">[antlr-interest] Ambiguous lexer rules
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#41984">[ date ]</a>
              <a href="thread.html#41984">[ thread ]</a>
              <a href="subject.html#41984">[ subject ]</a>
              <a href="author.html#41984">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.antlr.org/mailman/listinfo/antlr-interest">More information about the antlr-interest
mailing list</a><br>
</body></html>
