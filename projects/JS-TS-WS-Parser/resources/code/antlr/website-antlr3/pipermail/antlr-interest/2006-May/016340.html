<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [antlr-interest] MSVC 6.0 Compiler accuracy?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:antlr-interest%40antlr.org?Subject=%5Bantlr-interest%5D%20MSVC%206.0%20Compiler%20accuracy%3F&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="016336.html">
   <LINK REL="Next"  HREF="016341.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[antlr-interest] MSVC 6.0 Compiler accuracy?</H1>
    <B>Wigg, J D</B> 
    <A HREF="mailto:antlr-interest%40antlr.org?Subject=%5Bantlr-interest%5D%20MSVC%206.0%20Compiler%20accuracy%3F&In-Reply-To="
       TITLE="[antlr-interest] MSVC 6.0 Compiler accuracy?">wiggjd at lsbu.ac.uk
       </A><BR>
    <I>Mon May 22 06:29:50 PDT 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="016336.html">[antlr-interest] released Mantra prototype 0.1 as ANTLR v3 example
</A></li>
        <LI>Next message: <A HREF="016341.html">[antlr-interest] MSVC 6.0 Compiler accuracy?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16340">[ date ]</a>
              <a href="thread.html#16340">[ thread ]</a>
              <a href="subject.html#16340">[ subject ]</a>
              <a href="author.html#16340">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I am the latest author of the C++ parser available from the Antlr
website.
 
It has been brought to my attention that it does not parse the
following properly because of declarations in conditions,
 
bool fun()
 {
 int i, j, k, l = 0;
 
 if(int i = 1)   // MSVC++ 6.0 accepts declaration and redefinition of
i.
  {
  printf(&quot;%d &quot;,i);
  }
 
 switch(int j = 1)   // MSVC++ 6.0 accepts declaration and
redefinition of j.    
  {
 case 1:
  return true;
 default:
  return false;
  }
 
 while(int k = 2)   // MSVC++ 6.0 accepts declaration and redefinition
of k.
  {
  k--;
  printf(&quot;%d &quot;,k);
  }
 
 for(int i = 5; int l = i; i--) // MSVC++ 6.0 rejects redefinition of
i and
  {                                // declaration in condition   
  printf(&quot;%d &quot;,l);
  } 
 
I have not made allowance for the apparently legal possibility
according to reliable grammar definitions of declaring a variable in
the condition statement of these four statements.
 
I am told that gcc 3.3.3 accepts the declaration in the above &quot;for&quot;
statement.
 
It therefore looks as though MSVC++ 6.0 is incorrect in this instance.
I would be grateful if someone would confirm this. Perhaps there is a
later version of MSVC which parses this &quot;for&quot; statement correctly?
 
I presume that each of these four statements opens a new scope.
 
I have been parsing various C++ programs for some years now and never
come across the declaration of variables in conditions. I suppose this
is not surprising. I can't think why one would want to do it. It seems
illogical to allow this in iteration statements since the condition
would appear to redeclare the variable on each iteration!
 
It would be interesting to hear of any use for this feature.
 
David
Centre for Systems and Software Engineering
London South Bank University
UK.
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://www.antlr.org/pipermail/antlr-interest/attachments/20060522/4ccf35d3/attachment.html">http://www.antlr.org/pipermail/antlr-interest/attachments/20060522/4ccf35d3/attachment.html</A>
</PRE>





<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="016336.html">[antlr-interest] released Mantra prototype 0.1 as ANTLR v3 example
</A></li>
	<LI>Next message: <A HREF="016341.html">[antlr-interest] MSVC 6.0 Compiler accuracy?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16340">[ date ]</a>
              <a href="thread.html#16340">[ thread ]</a>
              <a href="subject.html#16340">[ subject ]</a>
              <a href="author.html#16340">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.antlr.org/mailman/listinfo/antlr-interest">More information about the antlr-interest
mailing list</a><br>
</body></html>
