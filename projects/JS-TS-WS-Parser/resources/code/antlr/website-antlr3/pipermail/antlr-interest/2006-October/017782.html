<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [antlr-interest] How to do a specific operation once on every token	in the _parser_?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:antlr-interest%40antlr.org?Subject=%5Bantlr-interest%5D%20How%20to%20do%20a%20specific%20operation%20once%20on%20every%20token%0A%09in%20the%20_parser_%3F&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="017793.html">
   <LINK REL="Next"  HREF="017787.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[antlr-interest] How to do a specific operation once on every token	in the _parser_?</H1>
    <B>Jan Harder</B> 
    <A HREF="mailto:antlr-interest%40antlr.org?Subject=%5Bantlr-interest%5D%20How%20to%20do%20a%20specific%20operation%20once%20on%20every%20token%0A%09in%20the%20_parser_%3F&In-Reply-To="
       TITLE="[antlr-interest] How to do a specific operation once on every token	in the _parser_?">harder at tzi.de
       </A><BR>
    <I>Wed Oct  4 07:18:22 PDT 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="017793.html">[antlr-interest] Grammar inheritance?
</A></li>
        <LI>Next message: <A HREF="017787.html">[antlr-interest] How to do a specific operation once on every	token in the _parser_?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17782">[ date ]</a>
              <a href="thread.html#17782">[ thread ]</a>
              <a href="subject.html#17782">[ subject ]</a>
              <a href="author.html#17782">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello,

I wrote a parser for visual basic using ANTLR 2.7.6 and I want to 
compute the halstead metric for parts of the code. Basically, this means 
that I need to classify all tokens in two groups (identifiers, literals 
vs. everything else) and count the occurrences of tokens with the same 
text. The classification and the counting is very easy to do, but my 
problem is that I am not sure _where_ to do this. The main problem is 
that it must be ensured that each token is counted only once. This 
metric is of interest for each function in the code, so I need to this 
in the parser, where I know where functions start and where they end. 
Unfortunately I can't do the measurement on the AST tree because it does 
not contain all tokens. Things like brackets are not added to the tree. 
It is not an option to change the tree.

Of course I don't want to insert an counting action for every token that 
can appear in a function. What I need is a place where each token comes 
along exactly once and can be counted easily. I thought of using the 
parsers consume() function. My idea was to overwirte it and add the 
classification counting code for the metric there by inspecting LT(1) 
after the consume-implementation from LLKParser was called. I guess this 
way ensures that every token is inspected exactly once, but I'm not sure 
about that. Is it safe to do it that way or is the consume method 
affected be the rewind operation on the token stream so that the same 
token can be handeled by consume() more than once?

Thanks for your help.

Jan Harder

PS: I generate C++ code


</PRE>


























<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="017793.html">[antlr-interest] Grammar inheritance?
</A></li>
	<LI>Next message: <A HREF="017787.html">[antlr-interest] How to do a specific operation once on every	token in the _parser_?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17782">[ date ]</a>
              <a href="thread.html#17782">[ thread ]</a>
              <a href="subject.html#17782">[ subject ]</a>
              <a href="author.html#17782">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.antlr.org/mailman/listinfo/antlr-interest">More information about the antlr-interest
mailing list</a><br>
</body></html>
