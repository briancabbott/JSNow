From macromliu at yahoo.com.cn  Wed Jan  1 01:26:54 2003
From: macromliu at yahoo.com.cn (macromliu <macromliu@yahoo.com.cn>)
Date: Mon Dec 20 16:15:13 2004
Subject: [antlr-interest] How to override the default reportError of Parser
Message-ID: <auuc8u+qcp8@eGroups.com>



 Enviroment:
  VC++ 6.0 Enterprise(SP5) Win2k SP3(en) JDK 1.3 ANTLR2.7.2RC1

 when i tried to override the reportError of the Parser like this:
//--------------------------------------
header{ 
#include <afxcoll.h>	//CPtrList
#include <iostream>
#include "antlr/RecognitionException.hpp"
}
options{
	language="Cpp";
}
class GMSPassParser extends Parser;
options {
     exportVocab=GMSPass;
     k = 1;
}
{
void reportError(RecognitionException &ex )
	{
	AfxMessageBox(ex.toString().c_str() );
	}

}
.........
..........
//---------------------------
i got the following compile error:
error C2061: syntax error : identifier 'RecognitionException'

how to get ride of this compile error???
 



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From macromliu at yahoo.com.cn  Wed Jan  1 03:39:55 2003
From: macromliu at yahoo.com.cn (macromliu <macromliu@yahoo.com.cn>)
Date: Mon Dec 20 16:15:13 2004
Subject: [antlr-interest] Re: How to override the default reportError of Parser
In-Reply-To: <auuc8u+qcp8@eGroups.com>
Message-ID: <auuk2b+arfg@eGroups.com>

  Enviroment:
   VC++ 6.0 Enterprise(SP5) Win2k SP3(en) JDK 1.3 ANTLR2.7.2RC1
  i've solve this problem... just like the following...
 //--------------------------------------
 header{ 
 #include <afxcoll.h>	//CPtrList
 #include <iostream>
 #include "antlr/RecognitionException.hpp"
 ANTLR_USING_NAMESPACE(antlr) //********and this line***********
 }
 options{
 	language="Cpp";
 }
 class GMSPassParser extends Parser;
 options {
      exportVocab=GMSPass;
      k = 1;
 }
 {
 void reportError(RecognitionException &ex )
 	{
 	AfxMessageBox(ex.toString().c_str() );
 	}
 
 }
 ...
 rules.
...
 //---------------------------



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From parrt at jguru.com  Thu Jan  2 15:27:52 2003
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:15:13 2004
Subject: [antlr-interest] New Language Glossary
Message-ID: <D06D3212-1EA9-11D7-867C-0030653DE0D6@jguru.com>

Folks,

Just finished the doc for 2.7.2 update, which includes a glossary since 
people complained  (rightfully) that I didn't define terms before using 
them.  Actually, I think I just didn't define them. ;)  In an effort to 
correct this, I have made the glossary.  You can take a peek at:

http://www.antlr.org/doc/glossary.html

What terms have I missed?  I've just slammed this out so I'm guessing 
it's not very complete, but here ya go....

I'm waiting to hear from people about the release candidate (probably 
Monday people will be back).  Then we push!  I have to start preparing 
for my grad language class that starts at the end of this Month at USF! 
:)

I'll thinking about the build process at this point.  Boy do I hate 
Ant. :(  Icky poo.  I think I'll just keep my stupid shell script that 
rebuilds everything since it only takes like 2 seconds on my old OS X 
box. ;)

Ter
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org
Lecturer in Comp. Sci., University of San Francisco


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From rjc at trump.net.au  Thu Jan  2 16:10:36 2003
From: rjc at trump.net.au (Robert Colquhoun)
Date: Mon Dec 20 16:15:13 2004
Subject: [antlr-interest] New Language Glossary
In-Reply-To: <D06D3212-1EA9-11D7-867C-0030653DE0D6@jguru.com>
Message-ID: <4.2.0.58.20030103104334.01197f80@postoffice.trump.net.au>

Hello,

At 03:27 PM 2/01/2003 -0800, Terence Parr wrote:
>I'm waiting to hear from people about the release candidate (probably
>Monday people will be back).  Then we push!  I have to start preparing
>for my grad language class that starts at the end of this Month at USF!
>:)

I have tried it with my BASIC compiler and everything has worked so 
far...got a couple of deprecation warnings on compiling which were easily 
fixed(setASTNodeType->setASTNodeClass).


>I'll thinking about the build process at this point.  Boy do I hate
>Ant. :(  Icky poo.  I think I'll just keep my stupid shell script that
>rebuilds everything since it only takes like 2 seconds on my old OS X
>box. ;)

Surely 10e6 people have sent you ant scripts for antlr by now....maybe just 
copy one of them in and put the authors email address at the top to handle 
all the problems and complaints.

The problem with ant alternatives is for java projects that have to work 
across windows/unix is how unportable they are.  Make and Gmake exec 
processes for so much of their functionality ie 'find', 'grep', 'touch' 
which are a real pain to get working reliably across platforms.  Using 
shell scripts and batch files means maintaining at least 2 versions which 
always seem to get out of sync.

I have heard the people in the java world that don't like ant are often 
using the javamake tool from a  shell script or 
something(http://www.experimentalstuff.com/Technologies/JavaMake/)

As well as build process how are you going to package antlr?  At the moment 
there is a 'antlr.jar' for runtime and need to include the antlr home 
directory in the classpath to run the tool. Alot of people seem to rebuild 
antlr.jar to include everything.

  - Robert


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From djplists at arrowsash.com  Thu Jan  2 20:27:25 2003
From: djplists at arrowsash.com (David Penton)
Date: Mon Dec 20 16:15:13 2004
Subject: [antlr-interest] New Language Glossary
In-Reply-To: <D06D3212-1EA9-11D7-867C-0030653DE0D6@jguru.com>
References: <D06D3212-1EA9-11D7-867C-0030653DE0D6@jguru.com>
Message-ID: <1041568046.1698.6.camel@linux2>

Thanks a million zillion for working on a glossary. I just read through
the manual once again earlier this evening.  My understanding of antlr
is increasing, but coincidentally, as I read this time I actually
started noting glossary problems (i.e. references to undefined
terms/concepts). I logged on to the forum with the intention of asking
politely whether it might be useful to do a glossary, but am delighted
to see that you are already on it.  It will help shorten the learning
process, I am positive.

Thanks again.

On Thu, 2003-01-02 at 18:27, Terence Parr wrote:
> Folks,
> 
> Just finished the doc for 2.7.2 update, which includes a glossary since 
> people complained  (rightfully) that I didn't define terms before using 
> them.  Actually, I think I just didn't define them. ;)  In an effort to 
> correct this, I have made the glossary.  You can take a peek at:
> 
> http://www.antlr.org/doc/glossary.html
> 
> What terms have I missed?  I've just slammed this out so I'm guessing 
> it's not very complete, but here ya go....
> 
> I'm waiting to hear from people about the release candidate (probably 
> Monday people will be back).  Then we push!  I have to start preparing 
> for my grad language class that starts at the end of this Month at USF! 
> :)
> 
> I'll thinking about the build process at this point.  Boy do I hate 
> Ant. :(  Icky poo.  I think I'll just keep my stupid shell script that 
> rebuilds everything since it only takes like 2 seconds on my old OS X 
> box. ;)
> 
> Ter
> --
> Co-founder, http://www.jguru.com
> Creator, ANTLR Parser Generator: http://www.antlr.org
> Lecturer in Comp. Sci., University of San Francisco
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 
> 
> 



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From rjc at trump.net.au  Fri Jan  3 03:28:57 2003
From: rjc at trump.net.au (Robert Colquhoun)
Date: Mon Dec 20 16:15:13 2004
Subject: [antlr-interest] Small Bug
Message-ID: <4.2.0.58.20030103221233.01266e50@postoffice.trump.net.au>

Hi,

I just noticed a small inefficiency in the generated parser code, antlr was 
creating a method like:

     protected void buildTokenTypeASTClassMap() {
         tokenTypeToASTClassMap = new Hashtable();
         tokenTypeToASTClassMap=null;
     };

The problem is in the antlr.JavaCodeGenerator.getTokenASTNodeMap(), 
attached is a version of JavaCodeGenerator which creates:

    protected void buildTokenTypeASTClassMap() {
         tokenTypeToASTClassMap=null;
     };

PS For some reason the first method caused kaffe, which i dont normally 
use, to crash!

  - Robert
 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

-------------- next part --------------
A non-text attachment was scrubbed...
Name: JavaCodeGenerator.java.gz
Type: application/octet-stream
Size: 27348 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20030103/f4bb5cb2/JavaCodeGenerator.java.obj
From vijay at mindspring.com  Fri Jan  3 11:29:10 2003
From: vijay at mindspring.com (dharbari2 <vijay@mindspring.com>)
Date: Mon Dec 20 16:15:13 2004
Subject: [antlr-interest] Basic Java code parsing/modification
Message-ID: <av4oa6+ssra@eGroups.com>


Hi!
I'm looking for some simple examples using antlr that will help me do 
the following kinds of things to parse and modify a given .java file:
* add getter/setter methods for all non-public data members
* remove certain data members and associated getter/setter methods

If someone can point me to any examples that would be great. As you 
can probably tell I'm new to antlr.
Thanks

Vijay



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From parrt at jguru.com  Fri Jan  3 11:49:15 2003
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:15:13 2004
Subject: [antlr-interest] Small Bug
In-Reply-To: <1041568046.1698.6.camel@linux2>
Message-ID: <708C5BE4-1F54-11D7-9E24-0030653DE0D6@jguru.com>


On Friday, January 3, 2003, at 03:28  AM, Robert Colquhoun wrote:

> Thanks a million zillion for working on a glossary. I just read through
> the manual once again earlier this evening.  My understanding of antlr
> is increasing, but coincidentally, as I read this time I actually
> started noting glossary problems (i.e. references to undefined
> terms/concepts). I logged on to the forum with the intention of asking
> politely whether it might be useful to do a glossary, but am delighted
> to see that you are already on it.  It will help shorten the learning
> process, I am positive.
>
> Thanks again.
>

Cool!  Glad the glossary is helping.  Please let me know what I'm 
missing. :)

> I just noticed a small inefficiency in the generated parser code, 
> antlr was
> creating a method like:
>
>      protected void buildTokenTypeASTClassMap() {
>          tokenTypeToASTClassMap = new Hashtable();
>          tokenTypeToASTClassMap=null;
>      };
>
> The problem is in the antlr.JavaCodeGenerator.getTokenASTNodeMap(),
> attached is a version of JavaCodeGenerator which creates:
>
>     protected void buildTokenTypeASTClassMap() {
>          tokenTypeToASTClassMap=null;
>      };
>
> PS For some reason the first method caused kaffe, which i dont normally
> use, to crash!

Ok, I think I've fixed this.  hashtable only generated if there is a 
mapping to add.

Ter
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org
Lecturer in Comp. Sci., University of San Francisco


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From parrt at jguru.com  Fri Jan  3 11:54:49 2003
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:15:13 2004
Subject: [antlr-interest] New Language Glossary
In-Reply-To: <4.2.0.58.20030103104334.01197f80@postoffice.trump.net.au>
Message-ID: <3749268E-1F55-11D7-9E24-0030653DE0D6@jguru.com>


On Thursday, January 2, 2003, at 08:27  PM, David Penton wrote:

> Hello,
>
> At 03:27 PM 2/01/2003 -0800, Terence Parr wrote:
>> I'm waiting to hear from people about the release candidate (probably
>> Monday people will be back).  Then we push!  I have to start preparing
>> for my grad language class that starts at the end of this Month at 
>> USF!
>> :)
>
> I have tried it with my BASIC compiler and everything has worked so
> far...got a couple of deprecation warnings on compiling which were 
> easily
> fixed(setASTNodeType->setASTNodeClass).

Oh crap.  I think I've got all this stuff mixed up.  Most stuff is 
setASTNodeType and there are a few setASTNodeClass methods.  The 
setASTNodeType method says deprecated.  Damn.

Anybody have any thoughts about which way it should be?  grep shows 
...NodeType to be the most popular version in the system. :(

>> I'll thinking about the build process at this point.  Boy do I hate
>> Ant. :(  Icky poo.  I think I'll just keep my stupid shell script that
>> rebuilds everything since it only takes like 2 seconds on my old OS X
>> box. ;)
>
> Surely 10e6 people have sent you ant scripts for antlr by now....maybe 
> just
> copy one of them in and put the authors email address at the top to 
> handle
> all the problems and complaints.

I was thinking of doing just that.

>
> The problem with ant alternatives is for java projects that have to 
> work
> across windows/unix is how unportable they are.  Make and Gmake exec
> processes for so much of their functionality ie 'find', 'grep', 'touch'
> which are a real pain to get working reliably across platforms.  Using
> shell scripts and batch files means maintaining at least 2 versions 
> which
> always seem to get out of sync.

Yeah, scripts are just not portable :(


> As well as build process how are you going to package antlr?  At the 
> moment
> there is a 'antlr.jar' for runtime and need to include the antlr home
> directory in the classpath to run the tool. Alot of people seem to 
> rebuild
> antlr.jar to include everything.

I'm going to build antlr.jar with all .class files this time.  It'll be 
pretty small, so no biggie.

Ter
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org
Lecturer in Comp. Sci., University of San Francisco


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From djplists at arrowsash.com  Sat Jan  4 10:24:08 2003
From: djplists at arrowsash.com (David Penton)
Date: Mon Dec 20 16:15:13 2004
Subject: [antlr-interest] ant & antlr
Message-ID: <1041704655.2949.18.camel@linux2>

This may properly be a question about ant.  I posted (not cross-posted)
a similar question to the ant mailing list, but I suppose I may be more
likely to get an answer here than there.

The question is, can anyone tell me how to get ant to recognize
dependencies on exported/imported token vocabularies?  The antlr task in
ant does not seem to know (and perhaps cannot know) that a parser or
lexer should be regenerated if its imported token vocabulary changes. Is
there a good way to set ant up to handle this?

I spent a frustrating hour last night looking for an error in my
grammars or input files which turned out to stem from the fact that my
lexer was using an outdated input vocabulary, i.e. my parser had changed
but ant did not run my lexer grammar through antlr again.

Terence, if you read this, I note your recent comment that you hate
ant.  I am pretty new to ant, but so far I sure as hell don't love it
either.  I'm stuck with it on my project for now, though.

- Dave -




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From Matthew.Ford at forward.com.au  Sat Jan  4 13:55:57 2003
From: Matthew.Ford at forward.com.au (Matthew Ford)
Date: Mon Dec 20 16:15:13 2004
Subject: [antlr-interest] ant & antlr
References: <1041704655.2949.18.camel@linux2>
Message-ID: <000401c2b43c$10000770$0200a8c0@NOTEBOOK>

Here is the bit of Ant that I use to compile a translator.  I am not expert
but this seems to work.  I look at the Parser (or Walker or what ever is
your toplevel translator file) and retranslate all files if I find it is out
of date.

BTW Ant cannot seem to tell if the antlr flags in the build.xml file have
been updated.  If I change the ${copyGlobalTrace} setting I have to do
something dramatic (like delete the Parser) to get Ant to retranslate with
this new setting.

<target name="checkTranslatorsUpToDate" >
    <uptodate property="TranslatorsBuild.notRequired"
targetfile="${translatorsSrc}/CopyGlobalParser.java">
      <srcfiles dir= "${translatorsSrc}" includes="**/*.g"/>
    </uptodate>
  </target>

  <target name="translate" depends="checkTranslatorsUpToDate"
unless="TranslatorsBuild.notRequired">
    <!-- run antlr -->
    <delete file="${translatorsSrc}/CopyGlobalLexer.java"/>
    <delete file="${translatorsSrc}/CopyGlobalParser.java"/>
    <delete>
     <fileset dir="${translatorsSrc}" includes="*.txt"/>
     </delete>

    <antlr target="${translatorsSrc}/CopyGlobalLexer.g"
        trace="${copyGlobalTrace}">
      <classpath>
        <pathelement path="${classpath}/antlr.jar"/>
      </classpath>
    </antlr>

    <antlr target="${translatorsSrc}/CopyGlobalParser.g"
        trace="${copyGlobalTrace}">
      <classpath>
        <pathelement path="${classpath}/antlr.jar"/>
      </classpath>
    </antlr>
  </target>

matthew
----- Original Message -----
From: "David Penton" <djplists@arrowsash.com>
To: <antlr-interest@yahoogroups.com>
Sent: Sunday, January 05, 2003 5:24 AM
Subject: [antlr-interest] ant & antlr


> This may properly be a question about ant.  I posted (not cross-posted)
> a similar question to the ant mailing list, but I suppose I may be more
> likely to get an answer here than there.
>
> The question is, can anyone tell me how to get ant to recognize
> dependencies on exported/imported token vocabularies?  The antlr task in
> ant does not seem to know (and perhaps cannot know) that a parser or
> lexer should be regenerated if its imported token vocabulary changes. Is
> there a good way to set ant up to handle this?
>
> I spent a frustrating hour last night looking for an error in my
> grammars or input files which turned out to stem from the fact that my
> lexer was using an outdated input vocabulary, i.e. my parser had changed
> but ant did not run my lexer grammar through antlr again.
>
> Terence, if you read this, I note your recent comment that you hate
> ant.  I am pretty new to ant, but so far I sure as hell don't love it
> either.  I'm stuck with it on my project for now, though.
>
> - Dave -
>
>
>
>
>
>
> Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
>
>
>


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From djplists at arrowsash.com  Sat Jan  4 14:00:37 2003
From: djplists at arrowsash.com (David Penton)
Date: Mon Dec 20 16:15:13 2004
Subject: [antlr-interest] ant & antlr
In-Reply-To: <000401c2b43c$10000770$0200a8c0@NOTEBOOK>
References: <1041704655.2949.18.camel@linux2> 
	<000401c2b43c$10000770$0200a8c0@NOTEBOOK>
Message-ID: <1041717648.1214.0.camel@linux2>

Thank you Matthew.

- Dave -

On Sat, 2003-01-04 at 16:55, Matthew Ford wrote:
> Here is the bit of Ant that I use to compile a translator.  I am not expert
> but this seems to work.  I look at the Parser (or Walker or what ever is
> your toplevel translator file) and retranslate all files if I find it is out
> of date.
> 
> BTW Ant cannot seem to tell if the antlr flags in the build.xml file have
> been updated.  If I change the ${copyGlobalTrace} setting I have to do
> something dramatic (like delete the Parser) to get Ant to retranslate with
> this new setting.
> 
> <target name="checkTranslatorsUpToDate" >
>     <uptodate property="TranslatorsBuild.notRequired"
> targetfile="${translatorsSrc}/CopyGlobalParser.java">
>       <srcfiles dir= "${translatorsSrc}" includes="**/*.g"/>
>     </uptodate>
>   </target>
> 
>   <target name="translate" depends="checkTranslatorsUpToDate"
> unless="TranslatorsBuild.notRequired">
>     <!-- run antlr -->
>     <delete file="${translatorsSrc}/CopyGlobalLexer.java"/>
>     <delete file="${translatorsSrc}/CopyGlobalParser.java"/>
>     <delete>
>      <fileset dir="${translatorsSrc}" includes="*.txt"/>
>      </delete>
> 
>     <antlr target="${translatorsSrc}/CopyGlobalLexer.g"
>         trace="${copyGlobalTrace}">
>       <classpath>
>         <pathelement path="${classpath}/antlr.jar"/>
>       </classpath>
>     </antlr>
> 
>     <antlr target="${translatorsSrc}/CopyGlobalParser.g"
>         trace="${copyGlobalTrace}">
>       <classpath>
>         <pathelement path="${classpath}/antlr.jar"/>
>       </classpath>
>     </antlr>
>   </target>
> 
> matthew
> ----- Original Message -----
> From: "David Penton" <djplists@arrowsash.com>
> To: <antlr-interest@yahoogroups.com>
> Sent: Sunday, January 05, 2003 5:24 AM
> Subject: [antlr-interest] ant & antlr
> 
> 
> > This may properly be a question about ant.  I posted (not cross-posted)
> > a similar question to the ant mailing list, but I suppose I may be more
> > likely to get an answer here than there.
> >
> > The question is, can anyone tell me how to get ant to recognize
> > dependencies on exported/imported token vocabularies?  The antlr task in
> > ant does not seem to know (and perhaps cannot know) that a parser or
> > lexer should be regenerated if its imported token vocabulary changes. Is
> > there a good way to set ant up to handle this?
> >
> > I spent a frustrating hour last night looking for an error in my
> > grammars or input files which turned out to stem from the fact that my
> > lexer was using an outdated input vocabulary, i.e. my parser had changed
> > but ant did not run my lexer grammar through antlr again.
> >
> > Terence, if you read this, I note your recent comment that you hate
> > ant.  I am pretty new to ant, but so far I sure as hell don't love it
> > either.  I'm stuck with it on my project for now, though.
> >
> > - Dave -
> >
> >
> >
> >
> >
> >
> > Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
> >
> >
> >
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 
> 
> 



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From bob at werken.com  Sat Jan  4 14:06:40 2003
From: bob at werken.com (bob mcwhirter)
Date: Mon Dec 20 16:15:13 2004
Subject: maven & antlr (was Re: [antlr-interest] ant & antlr)
In-Reply-To: <1041717648.1214.0.camel@linux2>
Message-ID: <Pine.LNX.3.96.1030104170534.13822I-100000@exeter.exeter.org>



btw, I'm also maintaining an ANTLR plugin for maven.

Simply enumerate the grammars in your project, in the order you want
them built, and they get built before maven compiles your sources.

granted, maven is still a tad immature, but I'm using it for everything
now.  

	-bob


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From alexkuznet at yahoo.com  Sat Jan  4 14:42:57 2003
From: alexkuznet at yahoo.com (Alex Kuznetsov <alexkuznet@yahoo.com>)
Date: Mon Dec 20 16:15:13 2004
Subject: [antlr-interest] What version of ANTLR for C++ output?
Message-ID: <av7o1h+4s5m@eGroups.com>

What ANTLR and Java SDK versions do I need to download to be able to 
generate c++ output?


 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From parrt at jguru.com  Sun Jan  5 15:02:55 2003
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:15:13 2004
Subject: [antlr-interest] antlr 2.7.2 release candidate 2 available
Message-ID: <D3269920-2101-11D7-9E24-0030653DE0D6@jguru.com>

Folks,

I have updated the download area with rc2 that has the updated 
documentation and so on.  I have not yet responded to a few problems 
reported by you folks, but I wanted to get the doc up and also to test 
my new build procedure.

I don't like having to download yet another tool just to build 
something (e.g., Ant or python).  Further, XML should not be used for 
human consumption (e.g., Ant).  What I want is a stupid build script 
that just compiles everything and then jar's it up.  When it only takes 
a few seconds to rebuild the whole 50k line program, why on earth would 
we bother with dependencies and other junk.  Problem is that scripts 
are not portable...Java is however.  So, I added a simple means for 
ANTLR to self-compile and build a jar.  package antlr/build has a 
simple Tool in it that lets me say:

java antlr.build.Tool build

This uses property antlr.build.root to figure out where the antlr dir 
associated with the antlr package resides.  It defaults to "." (current 
directory).  You may also set the compiler as in:

java -Dantlr.build.compiler=jikes antlr.build.Tool build

I have tested this on win2k (cmd shell and bash from GNU) and Mac OS X.
Further, I have removed all of the build shell scripts and mkjar type
scripts I had since there is only one all encompassing antlr.jar now 
(450k) and a self-
build tool.  Main dir is now clear of my build stuff...just C++ and C# 
stuff in there now.

I'm assuming there will be an uproar over my introducing yet another 
build type thing, but having ANTLR build itself just makes sense and 
doesn't depend on anything else.

Oh, the build procedure ignores antlr/util package as I have stuff in 
there I'm not sure is ready for prime time and depends on my groovy 
StringTemplate stuff.  I'll probably just remove this for this release.

Ter
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org
Lecturer in Comp. Sci., University of San Francisco


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From dougo at ccs.neu.edu  Sun Jan  5 23:00:34 2003
From: dougo at ccs.neu.edu (Doug Orleans)
Date: Mon Dec 20 16:15:13 2004
Subject: [antlr-interest] matching identifiers in JavaLexer
Message-ID: <15897.10642.52287.336564@vega.ccs.neu.edu>

Hi, I just switched over to ANTLR after a long time with JavaCC.  Open 
source rules!

Anyway, in the sample Java grammar provided with ANTLR (in
examples/java/java/java.g), the IDENT rule probably ought to use
java.lang.Character.isJavaIdentifierStart(char) and
java.lang.Character.isJavaIdentifierPart(char).
I just ran across them myself, and they look useful for Unicode
lexing.

--Doug Orleans
Northeastern University
dougo@ccs.neu.edu

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From klaren at cs.utwente.nl  Mon Jan  6 00:55:15 2003
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:15:13 2004
Subject: [antlr-interest] What version of ANTLR for C++ output?
In-Reply-To: <av7o1h+4s5m@eGroups.com>; from alexkuznet@yahoo.com on Sat, Jan 04, 2003 at 10:42:57PM -0000
References: <av7o1h+4s5m@eGroups.com>
Message-ID: <20030106095515.A13956@cs.utwente.nl>

On Sat, Jan 04, 2003 at 10:42:57PM -0000, Alex Kuznetsov <alexkuznet@yahoo.com> wrote:
> What ANTLR and Java SDK versions do I need to download to be able to 
> generate c++ output?

JDK 1.2 and higher should do. For ANTLR itself I'd grab the prerelease
2.7.2 version or the final when it is released.

Ric
-- 
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- klaren@cs.utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
 Time what is time - I wish I knew how to tell You why - It hurts to know -
          Aren't we machines - Time what is time - Unlock the door
               - And see the truth - Then time is time again
                From: 'Time what is Time' by Blind Guardian


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From rjc at trump.net.au  Mon Jan  6 04:54:43 2003
From: rjc at trump.net.au (Robert Colquhoun)
Date: Mon Dec 20 16:15:13 2004
Subject: [antlr-interest] antlr 2.7.2 release candidate 2 available
In-Reply-To: <D3269920-2101-11D7-9E24-0030653DE0D6@jguru.com>
Message-ID: <4.2.0.58.20030106232437.01700d08@postoffice.trump.net.au>

At 03:02 PM 5/01/2003 -0800, Terence Parr wrote:
>I have tested this on win2k (cmd shell and bash from GNU) and Mac OS X.
>Further, I have removed all of the build shell scripts and mkjar type
>scripts I had since there is only one all encompassing antlr.jar now
>(450k) and a self-
>build tool.  Main dir is now clear of my build stuff...just C++ and C#
>stuff in there now.
.....

There is a 300k java_deps file in the base directory, is that supposed to 
be there?

With respect to the setASTNodeType/setASTNodeClass issue setASTNodeClass 
wasn't available till recently so i guess most people used 
setASTNodeType....on the other hand the user of setASTNodeType could easily 
get confused with the Token Types and not sure exactly what type of String 
the method takes.

Note TreeParser.java doesnt deprecate setASTNodeType but Parser.java does, 
also the lexer/charscanner has setTokenObjectClass() for similar operation 
so setASTNodeClass i guess is more consistent..

PS buildTokenTypeASTClassMap() is no longer unnecessarily creating a 
Hashtable, Thanks!

  - Robert


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From gudnabrsam at yahoo.com  Mon Jan  6 06:52:39 2003
From: gudnabrsam at yahoo.com (Matt Benson)
Date: Mon Dec 20 16:15:13 2004
Subject: [antlr-interest] antlr 2.7.2 release candidate 2 available
In-Reply-To: <D3269920-2101-11D7-9E24-0030653DE0D6@jguru.com>
Message-ID: <20030106145239.27463.qmail@web20421.mail.yahoo.com>

I think any build process will be fine as long as it's
simple to execute, which I believe, after portability,
is the main fascination of Ant.  People don't mind
working a bit at setup (to a point) if it means
convenience later.  If you've got simplicity and
portability then you ought not to find too many
dissenters.

-Matt


--- Terence Parr <parrt@jguru.com> wrote:
> Folks,
> 
> I have updated the download area with rc2 that has
> the updated 
> documentation and so on.  I have not yet responded
> to a few problems 
> reported by you folks, but I wanted to get the doc
> up and also to test 
> my new build procedure.
> 
> I don't like having to download yet another tool
> just to build 
> something (e.g., Ant or python).  Further, XML
> should not be used for 
> human consumption (e.g., Ant).  What I want is a
> stupid build script 
> that just compiles everything and then jar's it up. 
> When it only takes 
> a few seconds to rebuild the whole 50k line program,
> why on earth would 
> we bother with dependencies and other junk.  Problem
> is that scripts 
> are not portable...Java is however.  So, I added a
> simple means for 
> ANTLR to self-compile and build a jar.  package
> antlr/build has a 
> simple Tool in it that lets me say:
> 
> java antlr.build.Tool build
> 
> This uses property antlr.build.root to figure out
> where the antlr dir 
> associated with the antlr package resides.  It
> defaults to "." (current 
> directory).  You may also set the compiler as in:
> 
> java -Dantlr.build.compiler=jikes antlr.build.Tool
> build
> 
> I have tested this on win2k (cmd shell and bash from
> GNU) and Mac OS X.
> Further, I have removed all of the build shell
> scripts and mkjar type
> scripts I had since there is only one all
> encompassing antlr.jar now 
> (450k) and a self-
> build tool.  Main dir is now clear of my build
> stuff...just C++ and C# 
> stuff in there now.
> 
> I'm assuming there will be an uproar over my
> introducing yet another 
> build type thing, but having ANTLR build itself just
> makes sense and 
> doesn't depend on anything else.
> 
> Oh, the build procedure ignores antlr/util package
> as I have stuff in 
> there I'm not sure is ready for prime time and
> depends on my groovy 
> StringTemplate stuff.  I'll probably just remove
> this for this release.
> 
> Ter
> --
> Co-founder, http://www.jguru.com
> Creator, ANTLR Parser Generator:
> http://www.antlr.org
> Lecturer in Comp. Sci., University of San Francisco
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to
> http://docs.yahoo.com/info/terms/ 
> 
> 


__________________________________________________
Do you Yahoo!?
Yahoo! Mail Plus - Powerful. Affordable. Sign up now.
http://mailplus.yahoo.com

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From sander at aqris.com  Mon Jan  6 07:30:25 2003
From: sander at aqris.com (=?iso-8859-1?Q?Sander_M=E4gi?=)
Date: Mon Dec 20 16:15:13 2004
Subject: [antlr-interest] antlr 2.7.2 release candidate 2 available
References: <20030106145239.27463.qmail@web20421.mail.yahoo.com>
Message-ID: <016901c2b598$88b142d0$1200a8c0@sander>

Hi,

Maybe there are other concerns about licenses and redistributions, but at
the place I work we have found it very useful just to include the ant
libraries (427Kb) inside each of our internal project.

So no matter what project you checkout you can be sure you can just type
build.sh (or build.bat) and it builds - also no hassles for project
requiring some specific version of ant etc...

We began to use this way when we had to patch ant's tar task to get a bugfix
we needed very quickly - I guess ant has matured by now so these problems do
not exist any more but haven't seen reason to change the system because
extra 427Kb does not hurt anybody nowadays.

Just my 0.02 EUR,
Sander M?gi

----- Original Message -----
From: "Matt Benson" <gudnabrsam@yahoo.com>
To: <antlr-interest@yahoogroups.com>
Sent: Monday, January 06, 2003 4:52 PM
Subject: Re: [antlr-interest] antlr 2.7.2 release candidate 2 available


> I think any build process will be fine as long as it's
> simple to execute, which I believe, after portability,
> is the main fascination of Ant.  People don't mind
> working a bit at setup (to a point) if it means
> convenience later.  If you've got simplicity and
> portability then you ought not to find too many
> dissenters.
>
> -Matt
>
>
> --- Terence Parr <parrt@jguru.com> wrote:
> > Folks,
> >
> > I have updated the download area with rc2 that has
> > the updated
> > documentation and so on.  I have not yet responded
> > to a few problems
> > reported by you folks, but I wanted to get the doc
> > up and also to test
> > my new build procedure.
> >
> > I don't like having to download yet another tool
> > just to build
> > something (e.g., Ant or python).  Further, XML
> > should not be used for
> > human consumption (e.g., Ant).  What I want is a
> > stupid build script
> > that just compiles everything and then jar's it up.
> > When it only takes
> > a few seconds to rebuild the whole 50k line program,
> > why on earth would
> > we bother with dependencies and other junk.  Problem
> > is that scripts
> > are not portable...Java is however.  So, I added a
> > simple means for
> > ANTLR to self-compile and build a jar.  package
> > antlr/build has a
> > simple Tool in it that lets me say:
> >
> > java antlr.build.Tool build
> >
> > This uses property antlr.build.root to figure out
> > where the antlr dir
> > associated with the antlr package resides.  It
> > defaults to "." (current
> > directory).  You may also set the compiler as in:
> >
> > java -Dantlr.build.compiler=jikes antlr.build.Tool
> > build
> >
> > I have tested this on win2k (cmd shell and bash from
> > GNU) and Mac OS X.
> > Further, I have removed all of the build shell
> > scripts and mkjar type
> > scripts I had since there is only one all
> > encompassing antlr.jar now
> > (450k) and a self-
> > build tool.  Main dir is now clear of my build
> > stuff...just C++ and C#
> > stuff in there now.
> >
> > I'm assuming there will be an uproar over my
> > introducing yet another
> > build type thing, but having ANTLR build itself just
> > makes sense and
> > doesn't depend on anything else.
> >
> > Oh, the build procedure ignores antlr/util package
> > as I have stuff in
> > there I'm not sure is ready for prime time and
> > depends on my groovy
> > StringTemplate stuff.  I'll probably just remove
> > this for this release.
> >
> > Ter
> > --
> > Co-founder, http://www.jguru.com
> > Creator, ANTLR Parser Generator:
> > http://www.antlr.org
> > Lecturer in Comp. Sci., University of San Francisco
> >
> >
> >
> >
> > Your use of Yahoo! Groups is subject to
> > http://docs.yahoo.com/info/terms/
> >
> >
>
>
> __________________________________________________
> Do you Yahoo!?
> Yahoo! Mail Plus - Powerful. Affordable. Sign up now.
> http://mailplus.yahoo.com
>
>
>
> Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
>
>
>


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From mzukowski at yci.com  Mon Jan  6 08:03:48 2003
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:15:13 2004
Subject: [antlr-interest] ant & antlr
Message-ID: <170826586F3BD511910D0200C110AAA8054020C6@memail03.bco-home.com>

To my understanding ant doesn't have any notion of dependencies, it relies
on the java compiler to handle them for .java files and doesn't otherwise
deal with them for other types of files.

Monty

-----Original Message-----
From: David Penton [mailto:djplists@arrowsash.com]
Sent: Saturday, January 04, 2003 10:24 AM
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] ant & antlr


This may properly be a question about ant.  I posted (not cross-posted)
a similar question to the ant mailing list, but I suppose I may be more
likely to get an answer here than there.

The question is, can anyone tell me how to get ant to recognize
dependencies on exported/imported token vocabularies?  The antlr task in
ant does not seem to know (and perhaps cannot know) that a parser or
lexer should be regenerated if its imported token vocabulary changes. Is
there a good way to set ant up to handle this?

I spent a frustrating hour last night looking for an error in my
grammars or input files which turned out to stem from the fact that my
lexer was using an outdated input vocabulary, i.e. my parser had changed
but ant did not run my lexer grammar through antlr again.

Terence, if you read this, I note your recent comment that you hate
ant.  I am pretty new to ant, but so far I sure as hell don't love it
either.  I'm stuck with it on my project for now, though.

- Dave -




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From klaren at cs.utwente.nl  Mon Jan  6 08:21:20 2003
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:15:13 2004
Subject: [antlr-interest] antlr 2.7.2 release candidate 2 available
In-Reply-To: <4.2.0.58.20030106232437.01700d08@postoffice.trump.net.au>; from rjc@trump.net.au on Mon, Jan 06, 2003 at 11:54:43PM +1100
References: <D3269920-2101-11D7-9E24-0030653DE0D6@jguru.com> <4.2.0.58.20030106232437.01700d08@postoffice.trump.net.au>
Message-ID: <20030106172120.C13956@cs.utwente.nl>

Hi,

On Mon, Jan 06, 2003 at 11:54:43PM +1100, Robert Colquhoun wrote:
> There is a 300k java_deps file in the base directory, is that supposed to 
> be there?

The Makefile build uses it.

Cheers,

Ric
--
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- klaren@cs.utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
  "You can't expect to wield supreme executive power just because some
   watery tot throws a sword at you!"
  --- Monty Python and the Holy Grail


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From jmochel at foliage.com  Mon Jan  6 07:18:27 2003
From: jmochel at foliage.com (Jim Mochel)
Date: Mon Dec 20 16:15:13 2004
Subject: [antlr-interest] ant & antlr
In-Reply-To: <170826586F3BD511910D0200C110AAA8054020C6@memail03.bco-home.com>
Message-ID: <BAEPJILLDMOHFGEJMLNKEEMLGIAA.jmochel@foliage.com>

The <depends> task will allow you to create dependencies 

Jim Mochel 

> -----Original Message-----
> From: mzukowski@yci.com [mailto:mzukowski@yci.com]
> Sent: Monday, January 06, 2003 11:04 AM
> To: antlr-interest@yahoogroups.com
> Subject: RE: [antlr-interest] ant & antlr
> 
> 
> To my understanding ant doesn't have any notion of dependencies, it relies
> on the java compiler to handle them for .java files and doesn't otherwise
> deal with them for other types of files.
> 
> Monty
> 
> -----Original Message-----
> From: David Penton [mailto:djplists@arrowsash.com]
> Sent: Saturday, January 04, 2003 10:24 AM
> To: antlr-interest@yahoogroups.com
> Subject: [antlr-interest] ant & antlr
> 
> 
> This may properly be a question about ant.  I posted (not cross-posted)
> a similar question to the ant mailing list, but I suppose I may be more
> likely to get an answer here than there.
> 
> The question is, can anyone tell me how to get ant to recognize
> dependencies on exported/imported token vocabularies?  The antlr task in
> ant does not seem to know (and perhaps cannot know) that a parser or
> lexer should be regenerated if its imported token vocabulary changes. Is
> there a good way to set ant up to handle this?
> 
> I spent a frustrating hour last night looking for an error in my
> grammars or input files which turned out to stem from the fact that my
> lexer was using an outdated input vocabulary, i.e. my parser had changed
> but ant did not run my lexer grammar through antlr again.
> 
> Terence, if you read this, I note your recent comment that you hate
> ant.  I am pretty new to ant, but so far I sure as hell don't love it
> either.  I'm stuck with it on my project for now, though.
> 
> - Dave -
> 
> 
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 
> 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From tomdz at cs.tu-berlin.de  Tue Jan  7 02:23:31 2003
From: tomdz at cs.tu-berlin.de (Thomas Dudziak)
Date: Mon Dec 20 16:15:13 2004
Subject: [antlr-interest] matching identifiers in JavaLexer
Message-ID: <Pine.SOL.4.44.0301071119240.13160-101000@freno.cs.tu-berlin.de>

I tried that once, but was unsuccessful in using the two methods in a
lexer rule. However, you can use the methods to generate lists of unicode
characters that are usable for ANTLR (see attachment), though I guess that
makes parsing slower.

Tom

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

-------------- next part --------------
A non-text attachment was scrubbed...
Name: ident.zip
Type: application/zip
Size: 1945 bytes
Desc: 
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20030107/f93b6fb2/ident.zip
From parrt at jguru.com  Tue Jan  7 11:19:35 2003
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:15:13 2004
Subject: [antlr-interest] matching identifiers in JavaLexer
In-Reply-To: <Pine.SOL.4.44.0301071119240.13160-101000@freno.cs.tu-berlin.de>
Message-ID: <F5640D87-2274-11D7-9E24-0030653DE0D6@jguru.com>


On Tuesday, January 7, 2003, at 02:23  AM, Thomas Dudziak wrote:

> I tried that once, but was unsuccessful in using the two methods in a
> lexer rule. However, you can use the methods to generate lists of 
> unicode
> characters that are usable for ANTLR (see attachment), though I guess 
> that
> makes parsing slower.

Hi Guys,

Take a peek back a few weeks in the list archive and you'll see that I 
got some interesting UNICODE stuff planned...gotta get 2.7.2 out first 
though.

Ter
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org
Lecturer in Comp. Sci., University of San Francisco


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From xdji at ustc.edu  Tue Jan  7 18:29:32 2003
From: xdji at ustc.edu (xdjicn <xdji@ustc.edu>)
Date: Mon Dec 20 16:15:13 2004
Subject: [antlr-interest] How to get the line information while parser throwing TokenStreamException
Message-ID: <avg2ec+tgoi@eGroups.com>

In antlr 2.7.1,the class TokenStreamException has no methods to 
supply the detailed exception information,such as getLine
(),getFileName().


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From open.zone at virgin.net  Wed Jan  8 00:58:30 2003
From: open.zone at virgin.net (micheal_jor <open.zone@virgin.net>)
Date: Mon Dec 20 16:15:13 2004
Subject: [antlr-interest] Re: How to get the line information while parser throwing TokenStreamException
In-Reply-To: <avg2ec+tgoi@eGroups.com>
Message-ID: <avgp7m+rv1u@eGroups.com>

--- In antlr-interest@yahoogroups.com, "xdjicn <xdji@u...>" 
<xdji@u...> wrote:
> In antlr 2.7.1,the class TokenStreamException has no methods to 
> supply the detailed exception information,such as getLine
> (),getFileName().

You shouldn't be using ANTLR v2.7.1 in preference to the latest 2.7.2 
pre-release versions. Does ANTLR 2.7.2-rc2 fix this issue for you?

Micheal



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From open.zone at virgin.net  Wed Jan  8 01:03:43 2003
From: open.zone at virgin.net (micheal_jor <open.zone@virgin.net>)
Date: Mon Dec 20 16:15:13 2004
Subject: [antlr-interest] How to interpret the trace file?
Message-ID: <avgphf+imlo@eGroups.com>

Hi All,

Is there any documentation that details how to use the trace [and/or 
diagnostic] output file to diagnose recognition problems?.

Does it give any more information than a persistent call stack trace?

Micheal



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From open.zone at virgin.net  Wed Jan  8 01:36:10 2003
From: open.zone at virgin.net (micheal_jor <open.zone@virgin.net>)
Date: Mon Dec 20 16:15:13 2004
Subject: [antlr-interest] Re: antlr 2.7.2 release candidate 2 available
In-Reply-To: <D3269920-2101-11D7-9E24-0030653DE0D6@jguru.com>
Message-ID: <avgrea+li1r@eGroups.com>

--- In antlr-interest@yahoogroups.com, Terence Parr <parrt@j...> 
wrote:

> I don't like having to download yet another tool just to build 
> something (e.g., Ant or python).  Further, XML should not be used 
for 
> human consumption (e.g., Ant).

You may be right but, I use Nant, rather lazily I might add, for the 
C# build requirements because it solves that problem rather nicely. 
For the examples, I use it to build the executable and then run a 
simple test using a supplied sample input file (I should probably 
make it check that the runtime library has been built first). I also 
supply a VS.NET project file for the library itself [I might add a 
project file for #Develop too].

My rationale is that most .NET shops know of and, indeed, have NAnt. 
It is a familiar tool, used in a familiar way within ANTLR-C# to 
address the build problem - a familiar problem.

> What I want is a stupid build script 
> that just compiles everything and then jar's it up.

I use Windows batch files for building the java bits simply because 
there isn't an Ant build script for ANTLR itself [I should probaby 
just write one or incorporate one of the many contributions that will 
pour in once this post hits the list ;-) ].

> When it only takes 
> a few seconds to rebuild the whole 50k line program, why on earth 
would 
> we bother with dependencies and other junk.

Because we can do so much more than just compile the source files 
with this infrastructure -- and we can do it portably. We can run 
standard tests when we have them, build and package ANTLR's runtime, 
debug and full (including source) distribution archives, invoke ANTLR 
on itself whenever included grammar files such as anrlt.g, and 
XXX/action.g are updated etc.

Basically, we can specify and codify the knowledge required to do 
this tasks unamiguously in the build scripts - once only and in one 
place - and never have to tend to them again until we need to change 
them. Of course a lot of this would be even more powerful if we can 
extend ANTLR itself with the ideas about inheritance, cleaner 
dependency handling etc that floats through this list every once in a 
while.

My only regret is no freely available, widely used tool seems capable 
of addressing the diverse requirements of Java, C#/.NET and C++ build 
issues simultaneously. Until then, we have Ant, NAnt and [N]Make. 

And your new tool for those that just can't wait to get it on with it 
ANTLR  ;-)


Cheers,

Micheal



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From djplists at arrowsash.com  Wed Jan  8 07:58:14 2003
From: djplists at arrowsash.com (David Penton)
Date: Mon Dec 20 16:15:13 2004
Subject: maven & antlr (was Re: [antlr-interest] ant & antlr)
In-Reply-To: <Pine.LNX.3.96.1030104170534.13822I-100000@exeter.exeter.org>
References: <Pine.LNX.3.96.1030104170534.13822I-100000@exeter.exeter.org>
Message-ID: <1042041495.2307.1.camel@linux2>

On Sat, 2003-01-04 at 17:06, bob mcwhirter wrote:
> 
> 
> btw, I'm also maintaining an ANTLR plugin for maven.
> 
> Simply enumerate the grammars in your project, in the order you want
> them built, and they get built before maven compiles your sources.
> 
> granted, maven is still a tad immature, but I'm using it for everything
> now.  
> 
> 	-bob
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 
> 
> 
 Thanks Bob.  I am not familiar with maven - I took a quick look at the web page, but I need to learn more.

- Dave -


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From kevin.vanhorn at ndsu.nodak.edu  Wed Jan  8 08:52:33 2003
From: kevin.vanhorn at ndsu.nodak.edu (ksvanhorn <kevin.vanhorn@ndsu.nodak.edu>)
Date: Mon Dec 20 16:15:13 2004
Subject: [antlr-interest] Why ANTLR 2.x?
Message-ID: <avhl0h+qi7r@eGroups.com>

I am planning to use PCCTS 1.33 in a compiler course I am teaching. 
The reasons I am using this instead of ANTLR 2.x are

- PCCTS 1.33 comes standard with RedHat Linux 7.3.

- PCCTS 1.33 has a comprehensive manual (Language Translation Using
PCCTS and C++), whereas ANTLR 2.x has no such comprehensive
documentation, to my knowledge.

- ANTRL 2.x is a Java application.  It has been my experience that
Java apps are painfully slow, awkward to use, and difficult to
install.  (I always run into problems with having the right version of
Java required for an app, and then you have to worry about getting
CLASSPATH set correctly, etc.)

Are there any compelling reasons to use ANTRL 2.x over 1.33?


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From kevin.vanhorn at ndsu.nodak.edu  Wed Jan  8 08:53:49 2003
From: kevin.vanhorn at ndsu.nodak.edu (ksvanhorn <kevin.vanhorn@ndsu.nodak.edu>)
Date: Mon Dec 20 16:15:13 2004
Subject: [antlr-interest] smenatic vs. syntactic predicates
Message-ID: <avhl2t+vq8u@eGroups.com>

Why is it that semantic predicates are hoisted but syntactic
predicates are not?


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From johnm-antlr at non.net  Wed Jan  8 10:14:47 2003
From: johnm-antlr at non.net (John D. Mitchell)
Date: Mon Dec 20 16:15:13 2004
Subject: [antlr-interest] Why ANTLR 2.x?
In-Reply-To: <avhl0h+qi7r@eGroups.com>
References: <avhl0h+qi7r@eGroups.com>
Message-ID: <15900.27287.688105.952763@non.non.net>

>>>>> "ksvanhorn" == ksvanhorn <kevin vanhorn@ndsu nodak edu> <kevin.vanhorn@ndsu.nodak.edu> writes:
[...]
> I am planning to use PCCTS 1.33 in a compiler course I am teaching.

I've used both for a long time. [Wow, has it really been a decade?]

What's the nature of your course?  I.e., is it a basic undergraduate
introduction to languages and translators (grammars, LR, pred-LL(k),
lexing, syntax directed translation, etc.) or is it more of a graduate
level course (multi-phasic, IR building and optimization, code generation,
etc.)?


> The reasons I am using this instead of ANTLR 2.x are

> - PCCTS 1.33 comes standard with RedHat Linux 7.3.

So? Antlr is a free download. 


> - PCCTS 1.33 has a comprehensive manual (Language Translation Using PCCTS
> and C++), whereas ANTLR 2.x has no such comprehensive documentation, to
> my knowledge.

Hmm... Is the PCCTS book even still in print and available?

Have you looke at the antlr.org web site?  There's documentation, examples,
the FAQ on the site and then there's this mailing list.


> - ANTRL 2.x is a Java application.  It has been my experience that Java
> apps are painfully slow, awkward to use, and difficult to install.  (I
> always run into problems with having the right version of Java required
> for an app, and then you have to worry about getting CLASSPATH set
> correctly, etc.)

Sounds like you're stuck in C-land. :-)  Trying moving up to Java v1.4.1.

Personally speaking, I'm a bit scared of programmers who (try to) write
translators but can't be relied upon to install the necessary toolchains
(whether that's GCC + flex + yacc + homegrown or GCC + pccts + sorcerer or
Java + Antlr).

In terms of "benchmark" performance, the speed differences really depend on
what you're doing -- Swing-based GUI application in Java tend to really
suck performance-wise (unless y'all are running Mac OS/X machines -- which
has hardware-accelerated drivers for Swing :-).  For me, in building real
translators, the productivity gains in using Java vastly outweigh any
purported performance differences.  [ObKnuth: "Premature optimization is
the root of all evil in computer science."]


> Are there any compelling reasons to use ANTRL 2.x over 1.33?

The (vast?) majority of people available to help, including Ter, are using
Antlr rather than the old PCCTS stuff.

Garbage-collection.  Java has it, plain C doesn't.

Antlr also has support for writing your code in Java or C++ or... Which
would give you or your students the flexibility to choose which one they'd
e.g., feel more comfortable using.  More work for the graders but I've
always found that flexibility to be particularly nice in courses.  As the
instructor, this is an easy lead-in to interoperability. :-)


IMHO, the only reason to use the old PCCTS stuff is if you want to really
get into hoisting and that's a weak argument.

Hope this helps,
		John

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From mzukowski at yci.com  Wed Jan  8 10:51:55 2003
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:15:13 2004
Subject: [antlr-interest] smenatic vs. syntactic predicates
Message-ID: <170826586F3BD511910D0200C110AAA8054020D7@memail03.bco-home.com>

Semantic predicates are not hoisted, except in lexers, for antlr 2, which
this mailing list is about.  comp.lang.pccts is still active for PCCTS.  

For a thorough discussion of hoisting read Ter's thesis.

Monty

-----Original Message-----
From: ksvanhorn <kevin.vanhorn@ndsu.nodak.edu>
[mailto:kevin.vanhorn@ndsu.nodak.edu]
Sent: Wednesday, January 08, 2003 8:54 AM
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] smenatic vs. syntactic predicates


Why is it that semantic predicates are hoisted but syntactic
predicates are not?


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From mzukowski at yci.com  Wed Jan  8 10:56:02 2003
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:15:13 2004
Subject: [antlr-interest] How to interpret the trace file?
Message-ID: <170826586F3BD511910D0200C110AAA8054020D8@memail03.bco-home.com>

Mostly you get rule entry and exit plus you can see the lookahead at the
time of each match.  You still need to look at the generated code to figure
out what is going on.  The gcc translator project has some nice traceIn and
traceOut methods which will indent properly and print token names instead of
numbers.  http://www.codetransform.com/gcc.html

Monty

-----Original Message-----
From: micheal_jor <open.zone@virgin.net> [mailto:open.zone@virgin.net]
Sent: Wednesday, January 08, 2003 1:04 AM
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] How to interpret the trace file?


Hi All,

Is there any documentation that details how to use the trace [and/or 
diagnostic] output file to diagnose recognition problems?.

Does it give any more information than a persistent call stack trace?

Micheal



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From open.zone at virgin.net  Wed Jan  8 12:07:02 2003
From: open.zone at virgin.net (micheal_jor <open.zone@virgin.net>)
Date: Mon Dec 20 16:15:13 2004
Subject: [antlr-interest] Re: Why ANTLR 2.x?
In-Reply-To: <15900.27287.688105.952763@non.non.net>
Message-ID: <avi0d7+lns@eGroups.com>


> > - PCCTS 1.33 has a comprehensive manual (Language Translation 
Using PCCTS
> > and C++), whereas ANTLR 2.x has no such comprehensive 
documentation, to
> > my knowledge.
> 
> Hmm... Is the PCCTS book even still in print and available?

In any case, the contents would be broadly applicable to ANTLR 2.x as 
well. Right?

> > Are there any compelling reasons to use ANTRL 2.x over 1.33?
> 
> The (vast?) majority of people available to help, including Ter, 
are using
> Antlr rather than the old PCCTS stuff.

This is a real biggie. If it's good enough for ObiWanTer, ObiWanRic 
and ObiWanJohn....


> Antlr also has support for writing your code in Java or C++ or... 

...C# for the .NET platform (and potentially the Mono platform) ;-)


Cheers,

Micheal



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From tmoog at polhode.com  Wed Jan  8 16:40:15 2003
From: tmoog at polhode.com (Tom Moog)
Date: Mon Dec 20 16:15:13 2004
Subject: [antlr-interest] Re: Why ANTLR 2.x?
In-Reply-To: <avi0d7+lns@eGroups.com>
Message-ID: <Pine.WNT.4.44.0301081821200.692-100000@polhode3>


The Book is available online in .pdf format. There
is a link to it from my web page.  The "Notes for
New Users" have been updated since the Book was
published.

pccts supports semantic predicate hoisting and has
had a lot of related improvements.

pccts supports k>1 grammars, not just linear approximation.

pccts supports C++ and C (but the C code is rather ugly).

pccts integration with the sorcerer tree walker
is inferior to the integration of antlr 2
with its tree walker

pccts is hobbled by the need for backward
compatibility, and the source code shows its age.

pccts has what I think are good tools for tracking down
ambiguities in grammars ("ambiguity aid").  I think this
may be the best reason for it to be adopted for students.

antlr2 has a more active community, and more examples
available.

On Wed, 8 Jan 2003, micheal_jor <open.zone@virgin.net> wrote:

> > Hmm... Is the PCCTS book even still in print and available?


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From johnm-antlr at non.net  Thu Jan  9 19:17:13 2003
From: johnm-antlr at non.net (John D. Mitchell)
Date: Mon Dec 20 16:15:13 2004
Subject: [antlr-interest] Re: Why ANTLR 2.x?
In-Reply-To: <avi0d7+lns@eGroups.com>
References: <15900.27287.688105.952763@non.non.net>
	<avi0d7+lns@eGroups.com>
Message-ID: <15902.15161.157589.783814@non.non.net>

>>>>> "micheal" == micheal jor <open zone@virgin net> <open.zone@virgin.net> writes:
[...]

>> Hmm... Is the PCCTS book even still in print and available?

> In any case, the contents would be broadly applicable to ANTLR 2.x as
> well. Right?

I'm sorta ambivalent on that point.  For beginners, I very strongly prefer
that the course materials match (since, for example, students already have
enough problems without adding any extras :-).  For advanced students, I
prefer variety so that they can see and use a number of different
approaches.

Happy New Year,
		John

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From lgc at mail1.jpl.nasa.gov  Fri Jan 10 18:13:42 2003
From: lgc at mail1.jpl.nasa.gov (lgcraymer <lgc@mail1.jpl.nasa.gov>)
Date: Mon Dec 20 16:15:14 2004
Subject: [antlr-interest] Re: Why ANTLR 2.x?
In-Reply-To: <15900.27287.688105.952763@non.non.net>
Message-ID: <avnukm+kqeu@eGroups.com>

Just to throw in my 2 cents.  PCCTS has a definite documentation 
advantage over ANTLR 2 for teaching purposes; that should change after 
Ter puts together a set of lecture notes for his course.

I must also note that Ter's book is not really a comprehensive manual. 
 There is material in the PCCTS release notes that did not make it 
into the book (I can't remember what just offhand, but it was enough 
to make the release notes a required reference), and the latest 
version of Tom Moog's "Notes for New Users" is a definite must.

The disadvantages of PCCTS are
    1.) it's a dead-end product--there is a definite advantage to 
starting students on a path that they might immediately pursue as 
hobby (Java is everywhere) along the way to using 
ANTLR professionally.
    2.) The EBNF notations for ANTLR 2 and PCCTS are different.
    3.) SORCERER is an add-on, not an integrated component.

--Loring


--- In antlr-interest@yahoogroups.com, "John D. Mitchell" 
<johnm-antlr@n...> wrote:
> >>>>> "ksvanhorn" == ksvanhorn <kevin vanhorn@ndsu nodak edu> 
<kevin.vanhorn@n...> writes:
> [...]
> > I am planning to use PCCTS 1.33 in a compiler course I am 
teaching.
> 
> I've used both for a long time. [Wow, has it really been a decade?]
> 
> What's the nature of your course?  I.e., is it a basic undergraduate
> introduction to languages and translators (grammars, LR, pred-LL(k),
> lexing, syntax directed translation, etc.) or is it more of a 
graduate
> level course (multi-phasic, IR building and optimization, code 
generation,
> etc.)?
> 
> 
> > The reasons I am using this instead of ANTLR 2.x are
> 
> > - PCCTS 1.33 comes standard with RedHat Linux 7.3.
> 
> So? Antlr is a free download. 
> 
> 
> > - PCCTS 1.33 has a comprehensive manual (Language Translation 
Using PCCTS
> > and C++), whereas ANTLR 2.x has no such comprehensive 
documentation, to
> > my knowledge.
> 
> Hmm... Is the PCCTS book even still in print and available?
> 
> Have you looke at the antlr.org web site?  There's documentation, 
examples,
> the FAQ on the site and then there's this mailing list.
> 
> 
> > - ANTRL 2.x is a Java application.  It has been my experience that 
Java
> > apps are painfully slow, awkward to use, and difficult to install. 
 (I
> > always run into problems with having the right version of Java 
required
> > for an app, and then you have to worry about getting CLASSPATH set
> > correctly, etc.)
> 
> Sounds like you're stuck in C-land. :-)  Trying moving up to Java 
v1.4.1.
> 
> Personally speaking, I'm a bit scared of programmers who (try to) 
write
> translators but can't be relied upon to install the necessary 
toolchains
> (whether that's GCC + flex + yacc + homegrown or GCC + pccts + 
sorcerer or
> Java + Antlr).
> 
> In terms of "benchmark" performance, the speed differences really 
depend on
> what you're doing -- Swing-based GUI application in Java tend to 
really
> suck performance-wise (unless y'all are running Mac OS/X machines -- 
which
> has hardware-accelerated drivers for Swing :-).  For me, in building 
real
> translators, the productivity gains in using Java vastly outweigh 
any
> purported performance differences.  [ObKnuth: "Premature 
optimization is
> the root of all evil in computer science."]
> 
> 
> > Are there any compelling reasons to use ANTRL 2.x over 1.33?
> 
> The (vast?) majority of people available to help, including Ter, are 
using
> Antlr rather than the old PCCTS stuff.
> 
> Garbage-collection.  Java has it, plain C doesn't.
> 
> Antlr also has support for writing your code in Java or C++ or... 
Which
> would give you or your students the flexibility to choose which one 
they'd
> e.g., feel more comfortable using.  More work for the graders but 
I've
> always found that flexibility to be particularly nice in courses.  
As the
> instructor, this is an easy lead-in to interoperability. :-)
> 
> 
> IMHO, the only reason to use the old PCCTS stuff is if you want to 
really
> get into hoisting and that's a weak argument.
> 
> Hope this helps,
> 		John


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From cintyram at yahoo.com  Sat Jan 11 08:12:51 2003
From: cintyram at yahoo.com (cintyram <cintyram@yahoo.com>)
Date: Mon Dec 20 16:15:14 2004
Subject: [antlr-interest] Seperating Grammar and Actions..
In-Reply-To: <avnukm+kqeu@eGroups.com>
Message-ID: <avpfq3+3edr@eGroups.com>

hi ,
 this is with reference to the discussion on this list a few weeks ago
on the same topic. then i was of the opinion that, using an abstract
class could help. but now having dipped my fingers into mfc to write
some user interface for my translator , i have begun wondering if some
thing like message maps works for antlr too ; 
 each rule match can fire an event/message , which can be handled by
the assigned event-handler . the information on which handler handles
which event can be put in message-maps ;

when writing the grammar we can exclude all action code from the
grammar [ whose purpose is to match the input stream ( of tokens,chars
or whatever ) ], but fire events ..

how to name the events if we want to have seperate events for each
subrule ? other wise as antlr generated code now has, the name of the
rule can be the name of the event also [now it is the name of the
function ]

how to handle cases where rules return values?

also passing the matched content thru the event to the handler , can
be an implementation  decision . [ passing by copy might not be a very
attractive option etc .. ]
 
also now we will have more flexibility .. we can pass around the
grammar exclusively of the actions taken, and the handlers can be
completely  decoupled from the grammar! 

your views please,

/e
cheers
ram





 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From sunshine at public.kherson.ua  Sun Jan 12 02:57:58 2003
From: sunshine at public.kherson.ua (Ruslan Zasukhin)
Date: Mon Dec 20 16:15:14 2004
Subject: [antlr-interest] Seperating Grammar and Actions..
In-Reply-To: <avpfq3+3edr@eGroups.com>
Message-ID: <BA4716D6.1DBC4%sunshine@public.kherson.ua>

on 1/11/03 6:12 PM, cintyram <cintyram@yahoo.com> at cintyram@yahoo.com
wrote:

> hi ,
> this is with reference to the discussion on this list a few weeks ago
> on the same topic. then i was of the opinion that, using an abstract
> class could help. but now having dipped my fingers into mfc to write
> some user interface for my translator , i have begun wondering if some
> thing like message maps works for antlr too ;
> each rule match can fire an event/message , which can be handled by
> the assigned event-handler . the information on which handler handles
> which event can be put in message-maps ;
> 
> when writing the grammar we can exclude all action code from the
> grammar [ whose purpose is to match the input stream ( of tokens,chars
> or whatever ) ], but fire events ..
> 
> how to name the events if we want to have seperate events for each
> subrule ? other wise as antlr generated code now has, the name of the
> rule can be the name of the event also [now it is the name of the
> function ]
> 
> how to handle cases where rules return values?
> 
> also passing the matched content thru the event to the handler , can
> be an implementation  decision . [ passing by copy might not be a very
> attractive option etc .. ]
> 
> also now we will have more flexibility .. we can pass around the
> grammar exclusively of the actions taken, and the handlers can be
> completely  decoupled from the grammar!
> 
> your views please,

Interesting idea, and it may works I think.
Payment slow down on each call, because we will have switch with about
100-500 cases.

Then I'd prefer little modification of your idea.
-- We write actions in separate file,
-- We write them using special name, okay let this will be Events, or may be
the same tokens...
-- So we get the next structure of files
        MyGrammar.g
        MyTreeGrammar.g
        MyCppActions    -- on events from Tree grammar
        myJavaActions   -- on events from Tree grammar

And now ANTLR can take TreeGrammar and Action files parse them. And produce
THE SAME output as it do now. I.e. We do not get penalty for big switch and
additional indirect call.

------
But As you have note self problem is how do in this way thing as

Rule
    : n1 = rule2 { use n1 here }
    
-- 
Best regards,
Ruslan Zasukhin      [ I feel the need...the need for speed ]
-------------------------------------------------------------
e-mail: ruslan@paradigmasoft.com
web: http://www.paradigmasoft.com

To subscribe to the Valentina mail list
send a letter to valentina-on@lists.macserve.net
-------------------------------------------------------------


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From decoret at graphics.lcs.mit.edu  Sat Jan 11 21:25:05 2003
From: decoret at graphics.lcs.mit.edu (xadeck <decoret@graphics.lcs.mit.edu>)
Date: Mon Dec 20 16:15:14 2004
Subject: [antlr-interest] Parsing a quoted string
Message-ID: <avqu7h+il6v@eGroups.com>

I am trying to parse quoted atring, that is "lfkgslfkhg"

My basic rule is:
STRING: '"' ~'"'+ '"'
 
How can I do to allow protected quote inside a STRING, that is parse
values like "Joe \"Kid\" Banana"?

And then how can I also handle protected \, that is parse values like
"welcome to my \\home"

Thanks for any hint.


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From decoret at graphics.lcs.mit.edu  Sun Jan 12 02:34:34 2003
From: decoret at graphics.lcs.mit.edu (Xavier Decoret)
Date: Mon Dec 20 16:15:14 2004
Subject: [antlr-interest] Getting parser to know line number
Message-ID: <3E2144BA.8010108@graphics.lcs.mit.edu>

I have actions in my parser that throw SemanticException (used to 
identify context dependent errors). I would like to provide this 
Exception with a line number but I cannot get the line number from the 
parser. The only objects that seems to "know" it, that is have a 
getLine() method are CharScanner and Token.

Thanks.


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From johnm-antlr at non.net  Sun Jan 12 18:25:57 2003
From: johnm-antlr at non.net (John D. Mitchell)
Date: Mon Dec 20 16:15:14 2004
Subject: [antlr-interest] Parsing a quoted string
In-Reply-To: <avqu7h+il6v@eGroups.com>
References: <avqu7h+il6v@eGroups.com>
Message-ID: <15906.9141.593084.848633@non.non.net>

>>>>> "xadeck" == xadeck <decoret@graphics lcs mit edu> <decoret@graphics.lcs.mit.edu> writes:
> I am trying to parse quoted atring, that is "lfkgslfkhg"

> My basic rule is: STRING: '"' ~'"'+ '"'

> How can I do to allow protected quote inside a STRING, that is parse
> values like "Joe \"Kid\" Banana"?

> And then how can I also handle protected \, that is parse values like
> "welcome to my \\home"

Check out the various examples such as the C lexer.

John

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From johnm-antlr at non.net  Sun Jan 12 18:29:44 2003
From: johnm-antlr at non.net (John D. Mitchell)
Date: Mon Dec 20 16:15:14 2004
Subject: [antlr-interest] Seperating Grammar and Actions..
In-Reply-To: <BA4716D6.1DBC4%sunshine@public.kherson.ua>
References: <avpfq3+3edr@eGroups.com>
	<BA4716D6.1DBC4%sunshine@public.kherson.ua>
Message-ID: <15906.9368.603484.353698@non.non.net>

>>>>> "Ruslan" == Ruslan Zasukhin <sunshine@public.kherson.ua> writes:
[...]

> And now ANTLR can take TreeGrammar and Action files parse them. And
> produce THE SAME output as it do now. I.e. We do not get penalty for big
> switch and additional indirect call.

I must be missing something...  I don't understand how that's any better
than using e.g., a macro preprocessor.

Happy New Year,
		John

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From a_rueckert at gmx.net  Mon Jan 13 01:01:07 2003
From: a_rueckert at gmx.net (Andreas Rueckert)
Date: Mon Dec 20 16:15:14 2004
Subject: [antlr-interest] PGN grammar anyone?
Message-ID: <03011310032200.00770@hun.bre.de>

Hi!

Are you aware of a PGN grammar for Antlr? (Portable Game Notation, a format to
store chess games).

Ciao,
Andreas

PS: ArgoUML now uses the Antlr classfile (Java bytecode) grammar to reverse
engineer and it seems the antlr site does not list it yet in the resource
section.

http://argouml.tigris.org/source/browse/argouml/modules/classfile/src/org/argouml/uml/reveng/classfile/

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From cintyram at yahoo.com  Mon Jan 13 05:55:04 2003
From: cintyram at yahoo.com (cintyram <cintyram@yahoo.com>)
Date: Mon Dec 20 16:15:14 2004
Subject: [antlr-interest] Re: Seperating Grammar and Actions..
In-Reply-To: <15906.9368.603484.353698@non.non.net>
Message-ID: <avugfo+phct@eGroups.com>

--- In antlr-interest@yahoogroups.com, "John D. Mitchell"
<johnm-antlr@n...> wrote:
> >>>>> "Ruslan" == Ruslan Zasukhin <sunshine@p...> writes:
> [...]
> 
> > And now ANTLR can take TreeGrammar and Action files parse them. And
> > produce THE SAME output as it do now. I.e. We do not get penalty
for big
> > switch and additional indirect call.
> 
> I must be missing something...  I don't understand how that's any better
> than using e.g., a macro preprocessor.
> 
> Happy New Year,
> 		John

actually that [ macro preprocessor ] is what i had in mind for an
initial  implementation . because to generate target code in different
languages, we should be able to specify the target language
independently of the grammar. with the decoupling in place, we can use
antlr to generate target code for a given grammar in the same language
as teh action code is written in. and a grammar need not be tied up to
one language . so we can write a macro for the " language = " option
and replace it before running antlr.Tool  [ also since antlr does not
have any options specific to a given language, it should be possible ]

i dont know how any additional switch statements will result . 
if
  we follow the convention of using the rule name for the handler,
then all we need is a list of funtion prototypes to be available for
the generated source file , as it has to resolve and link to the
action functions .
else
 we have to use a map to findout which function is handling which events
endif

but  here the problem will be that we cannot write seperate funtions
for subrules, where as in antlr we can embed action , and semantic
predicates etc ..  near the rule itself .

if this is resolved, complete decoupling is achieved , and for a given
grammar we can have multiple action code modules, and some of them can
be even in compiled form [ which might be useful for commercial tools ]
so they can supply a new action module which is better etc .. 

all the problem lies in finding a way to seperate the code for
subrules  .. the initial idea i got was to substitute with macros ,
and define those macros in a different file, [may be along with the
action ] ;

when antlr.Tool is used, it should substitute names with defns, and
then proceed, or we can do it ourselves now without modifying antlr
source files , by passing the grammar and action files thru a macro
pre processor before giving them to antlr .

cheers
ram





 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From sunshine at public.kherson.ua  Mon Jan 13 06:02:53 2003
From: sunshine at public.kherson.ua (Ruslan Zasukhin)
Date: Mon Dec 20 16:15:14 2004
Subject: [antlr-interest] Seperating Grammar and Actions..
In-Reply-To: <15906.9368.603484.353698@non.non.net>
Message-ID: <BA4893AD.1DC52%sunshine@public.kherson.ua>

on 1/13/03 4:29 AM, John D. Mitchell at johnm-antlr@non.net wrote:

>>>>>> "Ruslan" == Ruslan Zasukhin <sunshine@public.kherson.ua> writes:
> [...]
> 
>> And now ANTLR can take TreeGrammar and Action files parse them. And
>> produce THE SAME output as it do now. I.e. We do not get penalty for big
>> switch and additional indirect call.
> 
> I must be missing something...  I don't understand how that's any better
> than using e.g., a macro preprocessor.

Excuse me.

You want to say that exists some macro preprocessor that can do this ?
    I.e. Join TreeParser grammar with Action grammar of C++ or Java ?
    and then I  can send its result to ANTL ?

Where this preprocessor?
Why it is not included into ANTLR archive and examples of at least one
grammar splinted on 2 files ?

-- 
Best regards,
Ruslan Zasukhin      [ I feel the need...the need for speed ]
-------------------------------------------------------------
e-mail: ruslan@paradigmasoft.com
web: http://www.paradigmasoft.com

To subscribe to the Valentina mail list
send a letter to valentina-on@lists.macserve.net
-------------------------------------------------------------


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From amejdi at ertonline.gr  Mon Jan 13 06:08:47 2003
From: amejdi at ertonline.gr (Anakreon Mejdi)
Date: Mon Dec 20 16:15:14 2004
Subject: [antlr-interest] Seperating Grammar and Actions..
References: <BA4893AD.1DC52%sunshine@public.kherson.ua>
Message-ID: <3E22C86F.5040401@ertonline.gr>

There is annotation-20020416.zip in the files section at yahoo.
Here is an example:

class CalcTreeWalker extends TreeParser;

expr <init>
     :   #(PLUS <p1>expr <p2>expr)   <p3>
     |   #(STAR <s1>expr <s2>expr)   <s3>
     |   <i1>INT                   <i2>
     ;

in a separate file (say file.act) you can define:
@init: code in the desired  language
@p3: some other code
call java annotation.Insert -s your_grama_file -i file.act -d output.g

output.g is parsable by antlr and has antlr code with tags replaced by 
the code defined in @init, @p3 ,...

For more information see the readme.txt file included in the archive.


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From sunshine at public.kherson.ua  Mon Jan 13 06:21:19 2003
From: sunshine at public.kherson.ua (Ruslan Zasukhin)
Date: Mon Dec 20 16:15:14 2004
Subject: [antlr-interest] Seperating Grammar and Actions..
In-Reply-To: <3E22C86F.5040401@ertonline.gr>
Message-ID: <BA4897FF.1DC61%sunshine@public.kherson.ua>

on 1/13/03 4:08 PM, Anakreon Mejdi at amejdi@ertonline.gr wrote:

> There is annotation-20020416.zip in the files section at yahoo.
> Here is an example:
> 
> class CalcTreeWalker extends TreeParser;
> 
> expr <init>
>    :   #(PLUS <p1>expr <p2>expr)   <p3>
>    |   #(STAR <s1>expr <s2>expr)   <s3>
>    |   <i1>INT                   <i2>
>    ;
> 
> in a separate file (say file.act) you can define:
> @init: code in the desired  language
> @p3: some other code
> call java annotation.Insert -s your_grama_file -i file.act -d output.g
> 
> output.g is parsable by antlr and has antlr code with tags replaced by
> the code defined in @init, @p3 ,...
> 
> For more information see the readme.txt file included in the archive.

But if names as <init> must be unique in the global scope ?

I.e. Can I in the next rule use it again ?
 (it seems I cannot)

And I wonder, if exists info about this feature on ANTLR site or archive?
How on earth new visitor can find this info ?!

-- 
Best regards,
Ruslan Zasukhin      [ I feel the need...the need for speed ]
-------------------------------------------------------------
e-mail: ruslan@paradigmasoft.com
web: http://www.paradigmasoft.com

To subscribe to the Valentina mail list
send a letter to valentina-on@lists.macserve.net
-------------------------------------------------------------


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From amejdi at ertonline.gr  Mon Jan 13 06:23:35 2003
From: amejdi at ertonline.gr (Anakreon Mejdi)
Date: Mon Dec 20 16:15:14 2004
Subject: [antlr-interest] Seperating Grammar and Actions..
References: <BA4897FF.1DC61%sunshine@public.kherson.ua>
Message-ID: <3E22CBE7.1040100@ertonline.gr>

<init> is replaced with the code put in the file.act after @init
You can write <init> as many times as you wish.
If the code which coresponds to <init> is applicable everything should 
be fine.

I am not the author of this program.
It would be better to consult the readme file in the archive i poited to.

Ruslan Zasukhin wrote:
> on 1/13/03 4:08 PM, Anakreon Mejdi at amejdi@ertonline.gr wrote:
> 
> 
>>There is annotation-20020416.zip in the files section at yahoo.
>>Here is an example:
>>
>>class CalcTreeWalker extends TreeParser;
>>
>>expr <init>
>>   :   #(PLUS <p1>expr <p2>expr)   <p3>
>>   |   #(STAR <s1>expr <s2>expr)   <s3>
>>   |   <i1>INT                   <i2>
>>   ;
>>
>>in a separate file (say file.act) you can define:
>>@init: code in the desired  language
>>@p3: some other code
>>call java annotation.Insert -s your_grama_file -i file.act -d output.g
>>
>>output.g is parsable by antlr and has antlr code with tags replaced by
>>the code defined in @init, @p3 ,...
>>
>>For more information see the readme.txt file included in the archive.
> 
> 
> But if names as <init> must be unique in the global scope ?
> 
> I.e. Can I in the next rule use it again ?
>  (it seems I cannot)
> 
> And I wonder, if exists info about this feature on ANTLR site or archive?
> How on earth new visitor can find this info ?!
> 



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From cintyram at yahoo.com  Mon Jan 13 07:59:59 2003
From: cintyram at yahoo.com (cintyram <cintyram@yahoo.com>)
Date: Mon Dec 20 16:15:14 2004
Subject: [antlr-interest] Re: Seperating Grammar and Actions..
In-Reply-To: <3E22CBE7.1040100@ertonline.gr>
Message-ID: <avunpv+hnvp@eGroups.com>

Thank you for pointing me to the tool .
essentially this is what i was going to do too!! may be i would have
chosen different symbols instead of @ etc .. ; but every thing else
same :)

Now that it is already there i saved some time , and also thanks to
bogdan mitu :) !
i hope to be able to provide some more examples for that in the next
week or so! 

cheers
ram


--- In antlr-interest@yahoogroups.com, Anakreon Mejdi <amejdi@e...> wrote:
> <init> is replaced with the code put in the file.act after @init
> You can write <init> as many times as you wish.
> If the code which coresponds to <init> is applicable everything should 
> be fine.
> 
> I am not the author of this program.
> It would be better to consult the readme file in the archive i
poited to.
> 
> Ruslan Zasukhin wrote:
> > on 1/13/03 4:08 PM, Anakreon Mejdi at amejdi@e... wrote:
> > 
> > 
> >>There is annotation-20020416.zip in the files section at yahoo.
> >>Here is an example:
> >>
> >>class CalcTreeWalker extends TreeParser;
> >>
> >>expr <init>
> >>   :   #(PLUS <p1>expr <p2>expr)   <p3>
> >>   |   #(STAR <s1>expr <s2>expr)   <s3>
> >>   |   <i1>INT                   <i2>
> >>   ;
> >>
> >>in a separate file (say file.act) you can define:
> >>@init: code in the desired  language
> >>@p3: some other code
> >>call java annotation.Insert -s your_grama_file -i file.act -d output.g
> >>
> >>output.g is parsable by antlr and has antlr code with tags replaced by
> >>the code defined in @init, @p3 ,...
> >>
> >>For more information see the readme.txt file included in the archive.
> > 
> > 
> > But if names as <init> must be unique in the global scope ?
> > 
> > I.e. Can I in the next rule use it again ?
> >  (it seems I cannot)
> > 
> > And I wonder, if exists info about this feature on ANTLR site or
archive?
> > How on earth new visitor can find this info ?!
> >


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From mzukowski at yci.com  Mon Jan 13 08:25:49 2003
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:15:14 2004
Subject: [antlr-interest] Parsing a quoted string
Message-ID: <170826586F3BD511910D0200C110AAA8054020EA@memail03.bco-home.com>

Take a look at the java grammar or the gcc grammar for examples of string
parsing.

Monty

-----Original Message-----
From: xadeck <decoret@graphics.lcs.mit.edu>
[mailto:decoret@graphics.lcs.mit.edu]
Sent: Saturday, January 11, 2003 9:25 PM
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] Parsing a quoted string


I am trying to parse quoted atring, that is "lfkgslfkhg"

My basic rule is:
STRING: '"' ~'"'+ '"'
 
How can I do to allow protected quote inside a STRING, that is parse
values like "Joe \"Kid\" Banana"?

And then how can I also handle protected \, that is parse values like
"welcome to my \\home"

Thanks for any hint.


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From johnm-antlr at non.net  Mon Jan 13 11:22:04 2003
From: johnm-antlr at non.net (John D. Mitchell)
Date: Mon Dec 20 16:15:14 2004
Subject: [antlr-interest] Seperating Grammar and Actions..
In-Reply-To: <BA4893AD.1DC52%sunshine@public.kherson.ua>
References: <15906.9368.603484.353698@non.non.net>
	<BA4893AD.1DC52%sunshine@public.kherson.ua>
Message-ID: <15907.4572.26772.178838@non.non.net>

>>>>> "Ruslan" == Ruslan Zasukhin <sunshine@public.kherson.ua> writes:
>>>>>> on 1/13/03 4:29 AM, John D. Mitchell at johnm-antlr@non.net writes:
[...]

>> I must be missing something...  I don't understand how that's any
>> better than using e.g., a macro preprocessor.

> Excuse me.

> You want to say that exists some macro preprocessor that can do this ?
> I.e. Join TreeParser grammar with Action grammar of C++ or Java ?  and
> then I can send its result to ANTL ?

> Where this preprocessor?  Why it is not included into ANTLR archive and
> examples of at least one grammar splinted on 2 files ?

Well, besides the one already mentioned:

	* Write one yourself

	* Use something crappy like CPP

	* Use something like M4

	* Use something like Tcl

	* Use something like Noweb (ala the Antlr GCC stuff)

Geez,
	John

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From johnm-antlr at non.net  Mon Jan 13 11:36:26 2003
From: johnm-antlr at non.net (John D. Mitchell)
Date: Mon Dec 20 16:15:14 2004
Subject: [antlr-interest] Re: Seperating Grammar and Actions..
In-Reply-To: <avugfo+phct@eGroups.com>
References: <15906.9368.603484.353698@non.non.net>
	<avugfo+phct@eGroups.com>
Message-ID: <15907.5434.518536.122182@non.non.net>

>>>>> "cintyram" == cintyram <cintyram@yahoo com> <cintyram@yahoo.com> writes:
[...]

> actually that [ macro preprocessor ] is what i had in mind for an initial
> implementation . because to generate target code in different languages,
> we should be able to specify the target language independently of the
> grammar. with the decoupling in place, we can use antlr to generate
> target code for a given grammar in the same language as teh action code
> is written in. and a grammar need not be tied up to one language . so we
> can write a macro for the " language = " option and replace it before
> running antlr.Tool [ also since antlr does not have any options specific
> to a given language, it should be possible ]

I've remarked on this before but not in a year or two so... :-)

I'm very much of the opinion that for any non-trivial translator, the only
thing that the parser should do is to build the AST and any auxiliary data
structures that only it can build and nothing else.  I.e., no
syntax-directed, parser translators for anything that's non-trivial.

My arguments for this are analogous as to why we (in this forum anyways),
use lexers and grammar-based parsers instead of simplistic (though often
disgustingly complex :-) regular expresisons.  The key is that just as the
lexer takes a simplistic stream and chunks it into lexemes, the parser is
the bridge between the lexemes and a rich, abstract IR.  Similarly we can
look at the initial AST as the starting point to get us to the IR that we
want.  For many translators, that's just making passes over the AST and
doing annotation, pruning, rearrangement, and some insertions.  For others,
that's a basis from which to build additional auxiliary structures
(e.g., def-use, use-def chains) or more specialized IRs (e.g., machine
specific tuple formats).

FWIW,
	John


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From mzukowski at yci.com  Mon Jan 13 11:49:06 2003
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:15:14 2004
Subject: [antlr-interest] Re: Seperating Grammar and Actions..
Message-ID: <170826586F3BD511910D0200C110AAA8054020F2@memail03.bco-home.com>

Getting into the deeper issue of AST design, I highly recommend studying the
CIL project.  http://manju.cs.berkeley.edu/cil/.  They parse C and GCC and
MSVC into a subset of C.  All loops are reduced to one form, etc.  Makes for
a very clean way to do a wide variety of transformations in as simple a way
as possible.  Although it is not written in antlr the ideas behind it are
very strong and I recommend studying that approach to building a
transformation framework.

Monty

-----Original Message-----
From: John D. Mitchell [mailto:johnm-antlr@non.net]
Sent: Monday, January 13, 2003 11:36 AM
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] Re: Seperating Grammar and Actions..


>>>>> "cintyram" == cintyram <cintyram@yahoo com> <cintyram@yahoo.com>
writes:
[...]

> actually that [ macro preprocessor ] is what i had in mind for an initial
> implementation . because to generate target code in different languages,
> we should be able to specify the target language independently of the
> grammar. with the decoupling in place, we can use antlr to generate
> target code for a given grammar in the same language as teh action code
> is written in. and a grammar need not be tied up to one language . so we
> can write a macro for the " language = " option and replace it before
> running antlr.Tool [ also since antlr does not have any options specific
> to a given language, it should be possible ]

I've remarked on this before but not in a year or two so... :-)

I'm very much of the opinion that for any non-trivial translator, the only
thing that the parser should do is to build the AST and any auxiliary data
structures that only it can build and nothing else.  I.e., no
syntax-directed, parser translators for anything that's non-trivial.

My arguments for this are analogous as to why we (in this forum anyways),
use lexers and grammar-based parsers instead of simplistic (though often
disgustingly complex :-) regular expresisons.  The key is that just as the
lexer takes a simplistic stream and chunks it into lexemes, the parser is
the bridge between the lexemes and a rich, abstract IR.  Similarly we can
look at the initial AST as the starting point to get us to the IR that we
want.  For many translators, that's just making passes over the AST and
doing annotation, pruning, rearrangement, and some insertions.  For others,
that's a basis from which to build additional auxiliary structures
(e.g., def-use, use-def chains) or more specialized IRs (e.g., machine
specific tuple formats).

FWIW,
	John


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From open.zone at virgin.net  Mon Jan 13 16:18:29 2003
From: open.zone at virgin.net (micheal_jor <open.zone@virgin.net>)
Date: Mon Dec 20 16:15:14 2004
Subject: [antlr-interest] Can Resolvers etc be written as ANTLR tree parsers?
Message-ID: <avvl0l+f6it@eGroups.com>

Hi,

I am a total ANTLR TreeParser newbie. Having read the docs again, I 
felt that Resolvers and SymbolTale population are things that it 
should be possible for a TreeParser to do. Am I right or have I 
missed something fundamentally?

If there are examples of resolvers etc written as ANTLR tree parsers, 
I'd appreciate a link/sample.

Cheers,

Micheal



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From open.zone at virgin.net  Mon Jan 13 16:24:08 2003
From: open.zone at virgin.net (micheal_jor <open.zone@virgin.net>)
Date: Mon Dec 20 16:15:14 2004
Subject: [antlr-interest] Re: Seperating Grammar and Actions..
In-Reply-To: <170826586F3BD511910D0200C110AAA8054020F2@memail03.bco-home.com>
Message-ID: <avvlb8+qdk4@eGroups.com>

--- In antlr-interest@yahoogroups.com, mzukowski@y... wrote:
> Getting into the deeper issue of AST design, I highly recommend 
studying the
> CIL project.  http://manju.cs.berkeley.edu/cil/.  They parse C and 
GCC and
> MSVC into a subset of C.  All loops are reduced to one form, etc.

The extent of the C->CIL transforms does seem a bit extreme in many 
places (just flicked thru the info on the site).

I'd be worried that any code that results from any source-to-source 
translator (e. C-to-C++ or C-to-C#) built on this would be just 
as "alien" as comparing some of the C-source and CIL-output fragments.

Am I missing some bigger picture here?

Micheal


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From open.zone at virgin.net  Mon Jan 13 16:32:13 2003
From: open.zone at virgin.net (micheal_jor <open.zone@virgin.net>)
Date: Mon Dec 20 16:15:14 2004
Subject: [antlr-interest] Re: Seperating Grammar and Actions..
In-Reply-To: <15907.5434.518536.122182@non.non.net>
Message-ID: <avvlqd+qcv0@eGroups.com>


> I've remarked on this before but not in a year or two so... :-)
> 
> I'm very much of the opinion that for any non-trivial translator, 
the only
> thing that the parser should do is to build the AST and any 
auxiliary data
> structures that only it can build and nothing else.  I.e., no
> syntax-directed, parser translators for anything that's non-trivial.

This can be interpreted as "strive for no [minimal?] embedded action 
code in parsers for non-trivial translators". Is this what you meant?

<SNIPPED-stuff-I-agree-with/>

> For many translators, that's just making passes over the AST and
> doing annotation, pruning, rearrangement, and some insertions.  For 
others,
> that's a basis from which to build additional auxiliary structures
> (e.g., def-use, use-def chains) or more specialized IRs (e.g., 
machine
> specific tuple formats).

Can all the remaining work be specified as ANTLR tree parsers (this 
is related to my other post about resolvers-etc-as-treeparsers I 
guess) ?.

Any links/cites to information (particularly practical implementation 
related info) on some of these other passes and auxilliary structures 
please?

Micheal



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From johnm-antlr at non.net  Mon Jan 13 17:18:10 2003
From: johnm-antlr at non.net (John D. Mitchell)
Date: Mon Dec 20 16:15:14 2004
Subject: [antlr-interest] Re: Seperating Grammar and Actions..
In-Reply-To: <avvlqd+qcv0@eGroups.com>
References: <15907.5434.518536.122182@non.non.net>
	<avvlqd+qcv0@eGroups.com>
Message-ID: <15907.25938.915603.995648@non.non.net>

>>>>> "micheal" == micheal jor <open zone@virgin net> <open.zone@virgin.net> writes:

>> I'm very much of the opinion that for any non-trivial translator, the
>> only thing that the parser should do is to build the AST and any
>> auxiliary data structures that only it can build and nothing else.
>> I.e., no syntax-directed, parser translators for anything that's
>> non-trivial.

> This can be interpreted as "strive for no [minimal?] embedded action code
> in parsers for non-trivial translators". Is this what you meant?

Basically.  The actions should only do what is necessary and sufficient so
as to be able build the initial AST (and any necessary auxiliary data
structures).  It's arguable whether things like symbol tables are really
necessary to build during the parse phase but, IMHO, that mostly depends on
the nature of the source language.


> <SNIPPED-stuff-I-agree-with/>

>> For many translators, that's just making passes over the AST and doing
>> annotation, pruning, rearrangement, and some insertions.  For others,
>> that's a basis from which to build additional auxiliary structures
>> (e.g., def-use, use-def chains) or more specialized IRs (e.g., machine
>> specific tuple formats).

> Can all the remaining work be specified as ANTLR tree parsers (this is
> related to my other post about resolvers-etc-as-treeparsers I guess) ?.

IME, that depends on the nature of your languages and what you want to do
the source.  For some projects, it's necessary to work with other back-end
libraries, etc. so it can depend on what they require.  For (most?) source
to source translators, the AST+ approach has been all that's needed.

Personally, I like having an AST as the primary IR and then create extra
data structures when they will make some particular task significantly
easier/faster/safer/etc.  That allows me to rely on the discipline and
rigor of grammar-based treewalkers as the backbone of the system.

[Aside: If you want to learn a lot of bad ways to deal with trees, look at
all of the flailing crap floating around in the XML world.  Ugh.]


> Any links/cites to information (particularly practical implementation
> related info) on some of these other passes and auxilliary structures
> please?

There are tons of papers floating around on stuff like this.  The various
books on compilers are very hit or miss depending on what you're looking
for.  The comp.compilers newsgroup is a great resource.

Note that very few of the papers and book deal with source to source
translation.  Most deal with the traditional compiler from source to object
code.  Though, with the popularity of Java, Perl, etc. more are playing
with the notion of executable IRs such as the Java Virtual Machine's
bytecode (.class) format and thinks like Just-In-Time and dynamic
compilers.  They all have slightly (or wildly) different usage constraints
and so solutions that make no sense in one context can be perfect for
another.

Hope this helps,
		John

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From johnm-antlr at non.net  Mon Jan 13 17:24:43 2003
From: johnm-antlr at non.net (John D. Mitchell)
Date: Mon Dec 20 16:15:14 2004
Subject: [antlr-interest] Can Resolvers etc be written as ANTLR tree parsers?
In-Reply-To: <avvl0l+f6it@eGroups.com>
References: <avvl0l+f6it@eGroups.com>
Message-ID: <15907.26331.62205.12571@non.non.net>

>>>>> "micheal" == micheal jor <open zone@virgin net> <open.zone@virgin.net> writes:
> Hi,
[...]

> I am a total ANTLR TreeParser newbie. Having read the docs again, I felt
> that Resolvers and SymbolTale population are things that it should be
> possible for a TreeParser to do. Am I right or have I missed something
> fundamentally?

That sounds like a tautology...

Sure, you can walk a tree and gather whatever information is available from
the tree.

The trick is to build the initial AST with sufficient information. :-)
A canonical example seems to be mapping back to the source with position
information.

Remember that you can:

	* make multiple passes over the tree

	* transform the tree into "better" trees

	* create auxiliary structues that you thread through the tree


> If there are examples of resolvers etc written as ANTLR tree parsers, I'd
> appreciate a link/sample.

In this context, what do you mean by "resolvers"?

Take care,
	John

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From johnm-antlr at non.net  Mon Jan 13 17:29:57 2003
From: johnm-antlr at non.net (John D. Mitchell)
Date: Mon Dec 20 16:15:14 2004
Subject: [antlr-interest] Re: Seperating Grammar and Actions..
In-Reply-To: <avvlb8+qdk4@eGroups.com>
References: <170826586F3BD511910D0200C110AAA8054020F2@memail03.bco-home.com>
	<avvlb8+qdk4@eGroups.com>
Message-ID: <15907.26645.648082.61155@non.non.net>

>>>>> "micheal" == micheal jor <open zone@virgin net> <open.zone@virgin.net> writes:
[...]

> I'd be worried that any code that results from any source-to-source
> translator (e. C-to-C++ or C-to-C#) built on this would be just as
> "alien" as comparing some of the C-source and CIL-output fragments.

Well, um, er, are you wanting to use it as a human language or as a
language that is used as an IR so that you can do transformations to it and
still generate valid C code (so you can piggy-back off of the C compilers
for basic optimization and code generation)?

> Am I missing some bigger picture here?

A simple, well-defined, less-/non-ambiguous IR means that your translator
or optimizer doesn't have to deal with as much silly variation which can
mean that they can be faster, safer, more aggressive, etc.

Take care,
	John

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From open.zone at virgin.net  Mon Jan 13 20:53:53 2003
From: open.zone at virgin.net (micheal_jor <open.zone@virgin.net>)
Date: Mon Dec 20 16:15:14 2004
Subject: [antlr-interest] Re: Can Resolvers etc be written as ANTLR tree parsers?
In-Reply-To: <15907.26331.62205.12571@non.non.net>
Message-ID: <b00551+38d0@eGroups.com>


> > I am a total ANTLR TreeParser newbie. Having read the docs again, 
I felt
> > that Resolvers and SymbolTale population are things that it 
should be
> > possible for a TreeParser to do. Am I right or have I missed 
something
> > fundamentally?
> 
> That sounds like a tautology...

Perhaps not to a treeparser newbie?  ;-)

> Sure, you can walk a tree and gather whatever information is 
available from
> the tree.

OK.

> The trick is to build the initial AST with sufficient 
information. :-)
> A canonical example seems to be mapping back to the source with 
position
> information.

Isn't this a Lexer issue?. Ensuring the info is captured by the lexer 
in the first place?

> Remember that you can:
> 
> 	* make multiple passes over the tree
> 
> 	* transform the tree into "better" trees
> 
> 	* create auxiliary structues that you thread through the tree

An example would be?

> > If there are examples of resolvers etc written as ANTLR tree 
parsers, I'd
> > appreciate a link/sample.
> 
> In this context, what do you mean by "resolvers"?

A processing entity that traverses an AST and links ID nodes to their 
defining occurences, resolving overloads and expression types. [Might 
make mutiple traversals.]

Micheal



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From open.zone at virgin.net  Mon Jan 13 21:02:01 2003
From: open.zone at virgin.net (micheal_jor <open.zone@virgin.net>)
Date: Mon Dec 20 16:15:14 2004
Subject: [antlr-interest] Re: Seperating Grammar and Actions..
In-Reply-To: <15907.26645.648082.61155@non.non.net>
Message-ID: <b005k9+bbcd@eGroups.com>


> > I'd be worried that any code that results from any source-to-
source
> > translator (e. C-to-C++ or C-to-C#) built on this would be just as
> > "alien" as comparing some of the C-source and CIL-output 
fragments.
> 
> Well, um, er, are you wanting to use it as a human language or as a
> language that is used as an IR so that you can do transformations 
to it and
> still generate valid C code (so you can piggy-back off of the C 
compilers
> for basic optimization and code generation)?

Well, somewhere in between I guess. It's source-to-source translation 
and the resulting files would be read and edited by people. If it's 
anything like [some of] the CIL transforms, it seems readability 
would be seriously impaired. 

I'm cool with the general idea of a stripped down IR (e.g. all 
looping constructs collapsed into 'for' in C) but some of the CIL 
transforms are....well scary  ;-).

Cheers,

Micheal



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From gackle at shaw.ca  Mon Jan 13 23:51:18 2003
From: gackle at shaw.ca (Daniel Gackle)
Date: Mon Dec 20 16:15:14 2004
Subject: [antlr-interest] Bug in C# codegen: initializeASTFactory
Message-ID: <NEBBKKODFMOCLEEIOELFMEDACKAA.gackle@shaw.ca>

The initializeASTFactory in my generated parser appears to have a bug.
Simplified, the method looks like this:

protected internal void initializeASTFactory( ASTFactory factory )
{
	factory.setMaxNodeType(219);
	astFactory.registerFactory(MYTYPE, "MyTypeOfNode");
	// ... followed by a bunch of other calls to registerFactory
}

The method signature, and the first line, clearly suggest that it is the
parameter "factory" that is to be initialized.  But the bulk of the method
initializes the member variable "astFactory" instead.

Regards,
Daniel





 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From open.zone at virgin.net  Tue Jan 14 02:07:05 2003
From: open.zone at virgin.net (micheal_jor <open.zone@virgin.net>)
Date: Mon Dec 20 16:15:14 2004
Subject: [antlr-interest] Re: Bug in C# codegen: initializeASTFactory
In-Reply-To: <NEBBKKODFMOCLEEIOELFMEDACKAA.gackle@shaw.ca>
Message-ID: <b00ng9+68gu@eGroups.com>

Arrgh!!,

> The initializeASTFactory in my generated parser appears to have a 
bug.

> The method signature, and the first line, clearly suggest that it 
is the
> parameter "factory" that is to be initialized.  But the bulk of the 
method
> initializes the member variable "astFactory" instead.

Thanks for the report. It will be fixed for the release.

<scratches-head>Now, just exactly how does one write a simple NUnit 
test for this report?. Ideas pls people...</scratches-head>

Micheal




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From pete.forman at westerngeco.com  Tue Jan 14 02:32:17 2003
From: pete.forman at westerngeco.com (Pete Forman)
Date: Mon Dec 20 16:15:14 2004
Subject: [antlr-interest] Bug in tree construction generated code
Message-ID: <5.1.1.1.2.20030114103122.03ebf878@wgmail2.gatwick.eur.slb.com>

There is a bug in the code generated from a tree constructor
illustrated by the following example.

class P extends Parser;
options {buildAST = true;}
input: (text | NUMBER)* EOF!;
text: STRING
     { ## = #([STRING, "foo"], #STRING);
     }
   ;

class L extends Lexer;
NUMBER: ('0'..'9')+;
STRING: '\''! (~'\'')* '\''!;

The generated code does not compile.  What has happened is that the
STRING in [STRING, "foo"] is replaced by a temporary AST from the line
above instead of an int token.  The #STRING correctly references the
temporary AST.


A workaround is to alias the token name.

     { int STRING2 = STRING; // establish alias
       ## = #([STRING2, "foo"], #STRING);


I came across this problem in 2.7.1 generating Java.  It is still
present in 2.7.2rc2.


BTW, the use of ## in tree construction does not appear to be in the
documentation.  It is described in */action.g.

-- 
Pete Forman                -./\.-  Disclaimer: This post is originated
WesternGeco                  -./\.-   by myself and does not represent
pete.forman@westerngeco.com    -./\.-   opinion of Schlumberger, Baker
http://petef.port5.com           -./\.-   Hughes or their divisions.


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From cintyram at yahoo.com  Tue Jan 14 07:18:34 2003
From: cintyram at yahoo.com (cintyram <cintyram@yahoo.com>)
Date: Mon Dec 20 16:15:14 2004
Subject: [antlr-interest] Re: Seperating Grammar and Actions..
In-Reply-To: <b005k9+bbcd@eGroups.com>
Message-ID: <b019oa+u6m1@eGroups.com>


 
> I'm cool with the general idea of a stripped down IR (e.g. all 
> looping constructs collapsed into 'for' in C) but some of the CIL 
> transforms are....well scary  ;-).
..

Leaving  the penchant for genericity aside for a moment , if we
consider teh real world, teh reason any one would want to start
writing a grammar is to solve an immediate problem. teh chances of
extension might not be apparent then [ sarcastic .. but a java grammar
with different actions , actions here is a broad brush for the whole
gamut of things that happens after the parsing or token stream
identification,  could be used for a game!! ] 
While im all for the ability to generate a tree with the parser
itself, developing our own tree gives us more flexibility .
since we any way have to do multiple passes to get something done, a
different set of actions [ lets say a different path ] taken could
result in an entirely different application . if such a different path
seems possible we should already have enough information to make it
even easier. agian we can argue in two ways .. if the first tree [ir]
is always generated by teh tool , we have a standard reference,
alternatively if the ir is generated by us we have enough flexibility
to decide and plan for what exactly suits our applications
possibilities . 
 by properly providing standard components which can still generate
behaviour like what we have now, without a significant loss in cost ,
we can default to one standard behaviour, but by providing our own
componetns we can extend it or over ride it .by seperating action ,
including that of the initial tree constrution , from the grammar we
achieve this decoupling ..
like if there are easy ways of building  binary/m-ary trees instead of 
child -sibling, and appropriate tools for writing those tree grammars
and tree walkers ..wouldnt one want to have an option of specifying
what format of tree to be generated ?

however i still maintain that this should only be an option as, for
almost all practical purposes, the best thing would be to let teh tool
do as much work for us, and get the job at hand done easily.

also seperating action doesnt mean that we can handle only
syntaxdirected etc [ sorry if i was not clear there ]; action ,
atleast what i meant by that term ,is  what ever we do after
recognizing the input  to generate the required output , irrespective
of the number of stages involved.

cheers
ram




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From mzukowski at yci.com  Tue Jan 14 08:10:05 2003
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:15:14 2004
Subject: [antlr-interest] Re: Seperating Grammar and Actions..
Message-ID: <170826586F3BD511910D0200C110AAA8054020F8@memail03.bco-home.com>

CIL's approach is not for translation so much as for a certain set of
transformations, particularly those transformations which would not ever be
propagated back into the original source code.  Their application CCured,
which does pointer analysis and boxing, is the type of thing that it's good
at.

You're right, there is a whole class of translation problems that would not
be amenable to that approach.

Monty

-----Original Message-----
From: micheal_jor <open.zone@virgin.net> [mailto:open.zone@virgin.net]
Sent: Monday, January 13, 2003 4:24 PM
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] Re: Seperating Grammar and Actions..


--- In antlr-interest@yahoogroups.com, mzukowski@y... wrote:
> Getting into the deeper issue of AST design, I highly recommend 
studying the
> CIL project.  http://manju.cs.berkeley.edu/cil/.  They parse C and 
GCC and
> MSVC into a subset of C.  All loops are reduced to one form, etc.

The extent of the C->CIL transforms does seem a bit extreme in many 
places (just flicked thru the info on the site).

I'd be worried that any code that results from any source-to-source 
translator (e. C-to-C++ or C-to-C#) built on this would be just 
as "alien" as comparing some of the C-source and CIL-output fragments.

Am I missing some bigger picture here?

Micheal


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From mzukowski at yci.com  Tue Jan 14 08:16:06 2003
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:15:14 2004
Subject: [antlr-interest] Re: Seperating Grammar and Actions..
Message-ID: <170826586F3BD511910D0200C110AAA8054020F9@memail03.bco-home.com>

See www.codetransform.com/fun_with_antlr.html for a summary of some
practical passes in an antlr translator.  Poke around the rest of the site.
The GCC translator has a symbol table implemented, built in the parser.
Also see the page on Translation Project Planning, it has a good overview of
how to organize your passes.

What is a resolver?

Monty

-----Original Message-----
From: micheal_jor <open.zone@virgin.net> [mailto:open.zone@virgin.net]
Sent: Monday, January 13, 2003 4:32 PM
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] Re: Seperating Grammar and Actions..

...

Can all the remaining work be specified as ANTLR tree parsers (this 
is related to my other post about resolvers-etc-as-treeparsers I 
guess) ?.

Any links/cites to information (particularly practical implementation 
related info) on some of these other passes and auxilliary structures 
please?

Micheal



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From johnm-antlr at non.net  Tue Jan 14 10:45:11 2003
From: johnm-antlr at non.net (John D. Mitchell)
Date: Mon Dec 20 16:15:14 2004
Subject: [antlr-interest] Re: Can Resolvers etc be written as ANTLR tree parsers?
In-Reply-To: <b00551+38d0@eGroups.com>
References: <15907.26331.62205.12571@non.non.net>
	<b00551+38d0@eGroups.com>
Message-ID: <15908.23223.185560.658216@non.non.net>

>>>>> "micheal" == micheal jor <open zone@virgin net> <open.zone@virgin.net> writes:

[...]

>> The trick is to build the initial AST with sufficient information. :-) A
>> canonical example seems to be mapping back to the source with position
>> information.

> Isn't this a Lexer issue?. Ensuring the info is captured by the lexer in
> the first place?

There's two primary facets to the problem:

	* Gathering the information in the first place

	* Propagating the information through the intervening stages
	to where you need it.

[...]

>> * create auxiliary structues that you thread through the tree

> An example would be?

Use-def/def-use chains.  [I.e., chaining together all of the uses of e.g.,
a variable with the definition of that variable.]


>>> If there are examples of resolvers etc written as ANTLR tree parsers,
>>> I'd appreciate a link/sample.

>> In this context, what do you mean by "resolvers"?

> A processing entity that traverses an AST and links ID nodes to their
> defining occurences, resolving overloads and expression types. [Might
> make mutiple traversals.]

Use an auxiliarly stack to track scoping.  Of course, that can become more
complicated depending on your source language.

For use before definition, you can create a lookaside list per scope where
you save the references to those uses and resolve them either when you come
to the definition or when you leave the scope or when you've completed the
traversal -- again, it depends a lot on the semantics of your language.

Take care,
	John


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From johnm-antlr at non.net  Tue Jan 14 10:53:30 2003
From: johnm-antlr at non.net (John D. Mitchell)
Date: Mon Dec 20 16:15:14 2004
Subject: [antlr-interest] Re: Seperating Grammar and Actions..
In-Reply-To: <b005k9+bbcd@eGroups.com>
References: <15907.26645.648082.61155@non.non.net>
	<b005k9+bbcd@eGroups.com>
Message-ID: <15908.23722.904824.46666@non.non.net>

Administrivia: Is it possible to fix your mail program to do the quoting
correctly?  Currently, I have to go through and fix the quoting of your
posts so that my replies will correctly quote.  Thanks!

>>>>> "micheal" == micheal jor <open zone@virgin net> <open.zone@virgin.net> writes:

[...]

>> Well, um, er, are you wanting to use it as a human language or as a
>> language that is used as an IR so that you can do transformations to it
>> and still generate valid C code (so you can piggy-back off of the C
>> compilers for basic optimization and code generation)?

> Well, somewhere in between I guess. It's source-to-source translation and
> the resulting files would be read and edited by people. If it's anything
> like [some of] the CIL transforms, it seems readability would be
> seriously impaired.

As Monty noted, CIL isn't geared towards a "flat"/"equal" source-to-source
translation.  CIL is more geared towards more of a one-way, source to
annotated & augmented source.

One way to look at the difference is whether or not people are going to
have to eventually, manually maintain the generated, output source code or
not.

Hope this helps,
		John

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From johnm-antlr at non.net  Tue Jan 14 11:11:48 2003
From: johnm-antlr at non.net (John D. Mitchell)
Date: Mon Dec 20 16:15:14 2004
Subject: [antlr-interest] Re: Seperating Grammar and Actions..
In-Reply-To: <b019oa+u6m1@eGroups.com>
References: <b005k9+bbcd@eGroups.com>
	<b019oa+u6m1@eGroups.com>
Message-ID: <15908.24820.249267.979389@non.non.net>

>>>>> "cintyram" == cintyram <cintyram@yahoo com> <cintyram@yahoo.com> writes:

>> I'm cool with the general idea of a stripped down IR (e.g. all looping
>> constructs collapsed into 'for' in C) but some of the CIL transforms
>> are....well scary ;-).
> ..

> Leaving the penchant for genericity aside for a moment , if we consider
> teh real world, teh reason any one would want to start writing a grammar
> is to solve an immediate problem. teh chances of extension might not be
> apparent then

Depends on the project.  Some are clearly quick and dirty to begin with
while others are clearly large, multi-use projects -- and then there's the
big gray area in-between.  :-)


> While im all for the ability to generate a tree with the parser itself,
> developing our own tree gives us more flexibility .  since we any way
> have to do multiple passes to get something done, a different set of
> actions [ lets say a different path ] taken could result in an entirely
> different application . if such a different path seems possible we should
> already have enough information to make it even easier. agian we can
> argue in two ways .. if the first tree [ir] is always generated by teh
> tool , we have a standard reference, alternatively if the ir is generated
> by us we have enough flexibility to decide and plan for what exactly
> suits our applications possibilities .

I guess that I'm missing your point(s).

Antlr currently gives you help in building your trees in the parser while
giving you the freedom to override it.  Given some of the recent bug fixes,
the flexibility has been improved.

My point is that building a useful initial AST along with any necessary
auxilliary data structures should be the goal of the parser.  [The only
other primary activity should, of course, be giving good error messages to
the user when there are errors.]


> By properly providing standard components which can still generate
> behaviour like what we have now, without a significant loss in cost , we
> can default to one standard behaviour, but by providing our own
> componetns we can extend it or over ride it .by seperating action ,
> including that of the initial tree constrution , from the grammar we
> achieve this decoupling ..  like if there are easy ways of building
> binary/m-ary trees instead of child -sibling, and appropriate tools for
> writing those tree grammars and tree walkers ..wouldnt one want to have
> an option of specifying what format of tree to be generated ?

Sorry, again I'm confused by your writing.

What does the implementation choice of direct, n-ary tree nodes versus the
current child-sibling node structure have to do with what you can achieve
with tree walkers?

I'm not saying that building an good, useful, initial AST is or should be
trivial for the vast majority of languages.  IME, trivially (nee
frivolously :-) made AST are a PITA to deal with.  I am saying that the
parser should be the bridge between the, all too often, messy token stream
and a rich, useful intial AST. Explication and normalization being the two
key structural criteria.

Take care,
	John

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From cintyram at yahoo.com  Tue Jan 14 12:04:49 2003
From: cintyram at yahoo.com (cintyram <cintyram@yahoo.com>)
Date: Mon Dec 20 16:15:14 2004
Subject: [antlr-interest] Re: Seperating Grammar and Actions..
In-Reply-To: <15908.24820.249267.979389@non.non.net>
Message-ID: <b01qh1+3gfu@eGroups.com>

> 
> Depends on the project.  Some are clearly quick and dirty to begin with
> while others are clearly large, multi-use projects -- and then
there's the
> big gray area in-between.  :-)

yeah ;

 
> > While im all for the ability ...   plan for what exactly
> > suits our applications possibilities .
> 
> I guess that I'm missing your point(s).
> 

please excuse me if im not able to express my view properly. i am not
pointing out any deficiencies in antlr or any other tool, 
i just made a comment on an idea that struck me;  

> Antlr currently gives you help in building your trees in the parser
while
> giving you the freedom to override it.  Given some of the recent bug
fixes,
> the flexibility has been improved.
> 
> My point is that building a useful initial AST along with any necessary
> auxilliary data structures should be the goal of the parser.  [The only
> other primary activity should, of course, be giving good error
messages to
> the user when there are errors.]
> 
> 
> What does the implementation choice of direct, n-ary tree nodes
versus the
> current child-sibling node structure have to do with what you can
achieve
> with tree walkers?


 if a different application requires a different processing , it would
only be a little less difficult starting with the wrongly structured
tree than starting with teh original token stream ;

i wanted to say that even the initial AST and auxilliary structures if
any are not written in stone for all possible applications that can be
based on the same parser/lexer etc .. lets look at it like this :
Let us assign the rank 0 to Lexer ,
1 to Parser ,
2 to any immediately subsequent phase [like tree walker or tree Maker]  
3 for a first pass over the tree ..

assume there are many such stages upto rank say 15 or more ..

if say rank 5 op[operation] is only to act as a bridge between the
tree output by rank4 op, and a different format expected by rank6 op ,
and it is possible to write one simple processing unit which does this
without making a tree which is any way not used .. but directly by
making a tree that is expected by rank6 op from the input to the rank4
op ; we should have an easy framework where we can do this ;

if we "brack project" this idea to the initial stages ie  rank 0 and 1, 
we find that generalisation is only possible to some extent , but by
being able to recognize and express that possibility we can have a
toolset which is more suitable for a case where the higher ranked ops
, can be replaced to achieve a different target/application ;

for example if say we start with a java compiler with 5 ranks ,
now if we replace say rank 4 and rank 5 ops with some other operations
may be three new processing units, and end up with a code analyzer,
which just detects the pattern of use of white space .. etc .. or
looks for some pattern of use of comments [ just as an example ]
if we had started out with a different ir , which makes it easier to
access the white space and comments rather than the actual code, may
be  we end up with a faster app ;

another example is if we want regular expression based syntax
highliting in the source editor, which can also act as compiler's
front end etc ..we want two sets of output one which can be used by
teh renderer and the other for the compiler.  this might be a bad
example but now im not able to come with anything better ;

again, i am sorry if i had written in a confusin way, and hope this
helps  you in understanding what i wanted to say .
please do comment ;

cheers
ram














 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From gackle at shaw.ca  Tue Jan 14 12:53:01 2003
From: gackle at shaw.ca (slightlynew <gackle@shaw.ca>)
Date: Mon Dec 20 16:15:14 2004
Subject: [antlr-interest] Re: Bug in C# codegen: initializeASTFactory
In-Reply-To: <b00ng9+68gu@eGroups.com>
Message-ID: <b01tbd+5lo3@eGroups.com>

> <scratches-head>Now, just exactly how does one write a simple NUnit 
> test for this report?. Ideas pls people...</scratches-head>
> 
> Micheal

With a code-generation program, you can either write tests to verify 
that the expected code is generated, or tests to verify that the 
generated code behaves as expected.  The second kind of test is 
fairly easy.  In the case of this particular bug, your test would 
initialize a new AST factory, then make sure that factory behaved as 
expected.  The key point is that at first, the test would fail 
(because of the bug), and then pass when the bug is fixed.

Of course, you'd have to write a test grammar to go with this test.  
My approach in a similar situation has been to write a small test 
grammar that is just enough to demonstrate whatever feature I'm 
trying to test, then write the tests to verify that feature.  I keep 
the small test grammars as orthogonal as possible, trying to test one 
thing at a time.  Then there is a higher-level set of acceptance 
tests that involve complex grammars, to make sure that all the 
individual features work together.

As a matter of fact it was tests of this sort that caught the bug.  
My existing tests stopped working when I tried to replace the default 
AST factory with a different one.  By looking at which tests failed, 
it was easy to see that the new factory didn't know about its own 
node types.  The whole process, from breaking the tests to tracking 
down the bug to figuring out a workaround, took about 15 minutes.

Ciao,
Daniel


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From johnm-antlr at non.net  Tue Jan 14 13:30:37 2003
From: johnm-antlr at non.net (John D. Mitchell)
Date: Mon Dec 20 16:15:14 2004
Subject: [antlr-interest] Re: Seperating Grammar and Actions..
In-Reply-To: <b01qh1+3gfu@eGroups.com>
References: <15908.24820.249267.979389@non.non.net>
	<b01qh1+3gfu@eGroups.com>
Message-ID: <15908.33149.979431.988042@non.non.net>

>>>>> "cintyram" == cintyram <cintyram@yahoo com> <cintyram@yahoo.com> writes:

[...]

>> What does the implementation choice of direct, n-ary tree nodes versus
>> the current child-sibling node structure have to do with what you can
>> achieve with tree walkers?

> if a different application requires a different processing , it would
> only be a little less difficult starting with the wrongly structured tree
> than starting with teh original token stream ;

(A) The direct n-ary vs. child-sibling implementation detail has nothing to
do with that issue.

(B) I'm not saying that the parser should be elided or otherwise does not
still need to do (potentially) a good bit of work to create good, useful
initial ASTs and what not.  I am saying that that is basically all the
parser should do.

(C) Good ASTs make things explicit and regular.  Doing a good job of that
in creating the initial AST in the parser makes for fewer clean up
treewalkers.  Where to draw the line depends on a lot of factors.


> i wanted to say that even the initial AST and auxilliary structures if
> any are not written in stone for all possible applications that can be
> based on the same parser/lexer

Of course! That's one of the main points that started this thread --
separate the actions from the grammar itself.

I've never said that we should only develop a single, fixed AST from a
parser.  Of course that depends on what your needs are.  I will, however,
say that for a given source language, developing a good initial AST will
provide you with the flexibility to do almost everything.

> etc .. lets look at it like this : Let us assign the rank 0 to Lexer , 1
> to Parser , 2 to any immediately subsequent phase [like tree walker or
> tree Maker] 3 for a first pass over the tree ..

> assume there are many such stages upto rank say 15 or more ..

Been there, don't that. :-)


> if say rank 5 op[operation] is only to act as a bridge between the tree
> output by rank4 op, and a different format expected by rank6 op , and it
> is possible to write one simple processing unit which does this without
> making a tree which is any way not used .. but directly by making a tree
> that is expected by rank6 op from the input to the rank4 op ; we should
> have an easy framework where we can do this ;

You should play around more with the capabilities of treewalkers.  You can
do what you're talking about now.

IME, in building systems with many treewalker phases, most of the phases
end up using the same AST structure.  Many peephole and local optimizations
will simplify the actual tree but the tree grammar hasn't/doesn't, a
priori, need to be changed for every phase.

In fact, having a number of e.g., optimization phases that all use the same
grammar and auxiliary structures is actually a boon since some types of
optimizations interact with others in various ways so being able to
re-order the phases and/or run particular phases more than once can be a
good thing.

That leads back to a basic guideline that each phase should have one
primary job and do that well.  [I think one of the problems that so many
parser generators have with complexity is that they are trying to do (or
allow) too damn many things at the same time.  Remember, pipelines are your
friends. :-)]


> if we "brack project" this idea to the initial stages ie rank 0 and 1, we
> find that generalisation is only possible to some extent , but by being
> able to recognize and express that possibility we can have a toolset
> which is more suitable for a case where the higher ranked ops , can be
> replaced to achieve a different target/application ;

I must be missing something because, as I understand what you're trying to
say, you can already do that.  Perhaps it would help if you had or can
create some additional, simple examples to illustrate what you're talking
about.


> for example if say we start with a java compiler with 5 ranks , now if we
> replace say rank 4 and rank 5 ops with some other operations may be three
> new processing units, and end up with a code analyzer, which just detects
> the pattern of use of white space .. etc .. or looks for some pattern of
> use of comments [ just as an example ] if we had started out with a
> different ir , which makes it easier to access the white space and
> comments rather than the actual code, may be we end up with a faster app
> ;

You can already do that.

> another example is if we want regular expression based syntax highliting
> in the source editor, which can also act as compiler's front end etc ..we
> want two sets of output one which can be used by teh renderer and the
> other for the compiler.  this might be a bad example but now im not able
> to come with anything better ;

No, that's fine.  You can do that now too.  However, hooking it into a IDE
to try to do that as you're typing doesn't fit well into ANTLR's current
way of processing (-- which is pull-based streams at the lexer level).

However, if you want to talk about building better code editors, that's a
different topic.  :-)

Take care,
	John

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From cintyram at yahoo.com  Tue Jan 14 13:51:53 2003
From: cintyram at yahoo.com (cintyram <cintyram@yahoo.com>)
Date: Mon Dec 20 16:15:14 2004
Subject: [antlr-interest] Re: Seperating Grammar and Actions..
In-Reply-To: <15908.33149.979431.988042@non.non.net>
Message-ID: <b020pp+rnl8@eGroups.com>

 
> I must be missing something because, as I understand what you're
trying to

Actually i was missing somehting.  and thanks for making it more clear
for me now. 

> say, you can already do that.  Perhaps it would help if you had or can
> create some additional, simple examples to illustrate what you're
talking
> about.
> 

you are right, i did not try the new changes . for that matter,  i
initially had tried to create a simple calc example with my own type
of tree  following the example of  ian kaplan on bearcave.com 
i got an idea how to create the trees and how to write the tree
grammars.  but will defly have to work more to understand better.

thanks ,
cheers
ram



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From open.zone at virgin.net  Tue Jan 14 15:30:08 2003
From: open.zone at virgin.net (micheal_jor <open.zone@virgin.net>)
Date: Mon Dec 20 16:15:14 2004
Subject: [antlr-interest] Re: Bug in C# codegen: initializeASTFactory
In-Reply-To: <b01tbd+5lo3@eGroups.com>
Message-ID: <b026i0+ajrr@eGroups.com>


> As a matter of fact it was tests of this sort that caught the bug.  
> My existing tests stopped working when I tried to replace the 
default 
> AST factory with a different one.  By looking at which tests 
failed, 
> it was easy to see that the new factory didn't know about its own 
> node types.  The whole process, from breaking the tests to tracking 
> down the bug to figuring out a workaround, took about 15 minutes.

...which is still about 14.5 minutes longer than it took to fix   ;-)
Really, thanks for the report.

Are you able/willing to share more info/code about your testing 
environment, tools and configuration?. I haven't quite nailed this 
down yet for ANTLR-C# itself and projects that use ANTLR.

Micheal



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From Matthew.Ford at forward.com.au  Tue Jan 14 18:28:47 2003
From: Matthew.Ford at forward.com.au (Matthew Ford)
Date: Mon Dec 20 16:15:14 2004
Subject: AST with Scope Re: [antlr-interest] Re: Can Resolvers etc be written as ANTLR tree parsers?
References: <15907.26331.62205.12571@non.non.net><b00551+38d0@eGroups.com> <15908.23223.185560.658216@non.non.net>
Message-ID: <001001c2bc3d$d792e330$0200a8c0@NOTEBOOK>

See below for an example of carrying around the scope with the AST node.

(Sorry the code has some other specific stuff in it also)


/* AD V1.0
 * (c)Forward Computing and Control Pty. Ltd.
 */
package au.com.forward.gaussAD.translators;

import antlr.CommonAST;
import antlr.Token;
import antlr.collections.AST;

import au.com.forward.gaussAD.symbolTable.*;

/** A CommonAST which also stores scope
 * also adds flag to indicate if
 * result of this node is optimized diagonal matrix
 *
 */
public class CommonASTWithScope extends CommonAST
       implements GAUSS_AD_PARSERTokenTypes {

    protected Scope scope=null; // save the scope

    protected SymbolTableEntry tableEntry = null;

    static private GaussADWalkerPrinter printer = new
GaussADWalkerPrinter();

    private int line = 0;  // for line numbers

    public int getLine(){
         return line;
    }


    public CommonASTWithScope() {
   super();
    }

    public CommonASTWithScope(Token tok) {
   super(tok);
   tableEntry = new SymbolTableEntry(tok.getText());
   setTokenType(tok.getType());
    }

    public void initialize(AST t) {
     super.initialize(t);
     if (t instanceof CommonASTWithScope) {
      // set scope and table entry
       Scope tmpScope = ((CommonASTWithScope)t).getScope();
        line=((CommonASTWithScope)t).getLine();
       if (tmpScope != null) {
        //scope = tmpScope.cloneScope();
        scope = tmpScope;  // should clone here but need to sort out
problems
       }
      // clone tableEntry
      tableEntry =
((CommonASTWithScope)t).getSymbolTableEntry().symbolTableEntryClone();
     }
    }


    public void initialize(int t, String txt) {
     super.initialize(t,txt);
     tableEntry = new SymbolTableEntry(txt);
     setTokenType(t);
    }

    // over rides entry text with this txt
    public void initialize(int t, String txt, SymbolTableEntry entry) {
     super.initialize(t,txt);
     tableEntry = new SymbolTableEntry(txt,entry);
     setTokenType(t);
    }

    private void setTokenType(int t) {
     if (t == ONE) {
      tableEntry.setONE();
     } else if (t==ZERO) {
      tableEntry.setZERO();
     } else if (t==NUM_FLOAT) {
      tableEntry.setNumber();
     }
    }

    public void initialize(Token t) {
     super.initialize(t);
     line=t.getLine();
     tableEntry = new SymbolTableEntry(t.getText());
     setTokenType(t.getType());
    }

    /**
    * Set the token text for this node
    * This clears the symbolTableEntry
    */
    public void setText(String text) {
     super.setText(text);
     tableEntry = new SymbolTableEntry(text);
  }



   /** Get the first child of this node; null if not children */
    public CommonASTWithScope getChild() {
    return (CommonASTWithScope) super.getFirstChild();
    }

    /** Get the next sibling in line after this one */
    public CommonASTWithScope getSibling() {
       return (CommonASTWithScope) super.getNextSibling();
    }

   /** Is node t equal to this in terms of token type and text?
    * use Scope identsEqual to control ignore Case
    */
    public boolean equals(AST t) {
   if ( t==null ) return false;
   return Scope.identsEqual(this.getText(),t.getText()) &&
         this.getType() == t.getType();
    }

   /** Is node t equal to this in terms of token type and text?
    * use Scope identsEqual to control ignore Case
    */
    public boolean identEquals(String str) {
   if ( str==null ) return false;
   return Scope.identsEqual(this.getText(),str);
    }

    public void setScope(Scope scope) {
     this.scope = scope;
    }

    public Scope getScope() {
     return(scope);
    }

    public void setSymbolTableEntry(SymbolTableEntry entry) {
      tableEntry = entry;  // don't clone
    }

    public SymbolTableEntry getSymbolTableEntry() {
     return tableEntry;
    }


    /**
     * return true if this node represents
     * a diagional matrix by only saving the
     * diagional vector.
     */
    public boolean isOptimizedDiag() {
     if (tableEntry == null) {
      return false;
     } // else {
     return tableEntry.isOptimizedDiag();
    }


  // walk along the siblings and for each sibling do all children
 public CommonASTWithScope replaceAll(CommonASTWithScope t,
CommonASTWithScope target, CommonASTWithScope replacement) {
  CommonASTWithScope result = null;
  if (t == null) {
   return t;
  }
//   System.out.println("input: " +t.toStringList());
//   System.out.println("target " +target.toStringList());
//   System.out.println("replacement " + replacement.toStringList());

    if (t.equalsTree(target)) {
     result = (CommonASTWithScope)AST_Utils.astFactory.dupTree(replacement);
//System.out.println(" root equals target result="+result.toStringList());
    } else {
     result = (CommonASTWithScope)AST_Utils.astFactory.dup(t);
//System.out.println(" root not equal check children of " +
t.toStringList());
    if ( t.getFirstChild()!=null ) {

result.setFirstChild(replaceAll(((CommonASTWithScope)t.getFirstChild()),
target, replacement));
     }
  }
//System.out.println(" finished root now do siblings");

  CommonASTWithScope nt = result; // now do siblings
   while (t != null) {      // for each sibling of the root
   t = (CommonASTWithScope)t.getNextSibling();
   if (t!= null) {
    nt.setNextSibling(replaceAll((CommonASTWithScope)t, target,
replacement));
    nt = (CommonASTWithScope)nt.getNextSibling();
   }
    }

// System.out.println("result "+ result.toStringList());
   return result;
  }

}
----- Original Message -----
From: "John D. Mitchell" <johnm-antlr@non.net>
To: <antlr-interest@yahoogroups.com>
Sent: Wednesday, January 15, 2003 5:45 AM
Subject: [antlr-interest] Re: Can Resolvers etc be written as ANTLR tree
parsers?


> >>>>> "micheal" == micheal jor <open zone@virgin net>
<open.zone@virgin.net> writes:
>
> [...]
>
> >> The trick is to build the initial AST with sufficient information. :-)
A
> >> canonical example seems to be mapping back to the source with position
> >> information.
>
> > Isn't this a Lexer issue?. Ensuring the info is captured by the lexer in
> > the first place?
>
> There's two primary facets to the problem:
>
> * Gathering the information in the first place
>
> * Propagating the information through the intervening stages
> to where you need it.
>
> [...]
>
> >> * create auxiliary structues that you thread through the tree
>
> > An example would be?
>
> Use-def/def-use chains.  [I.e., chaining together all of the uses of e.g.,
> a variable with the definition of that variable.]
>
>
> >>> If there are examples of resolvers etc written as ANTLR tree parsers,
> >>> I'd appreciate a link/sample.
>
> >> In this context, what do you mean by "resolvers"?
>
> > A processing entity that traverses an AST and links ID nodes to their
> > defining occurences, resolving overloads and expression types. [Might
> > make mutiple traversals.]
>
> Use an auxiliarly stack to track scoping.  Of course, that can become more
> complicated depending on your source language.
>
> For use before definition, you can create a lookaside list per scope where
> you save the references to those uses and resolve them either when you
come
> to the definition or when you leave the scope or when you've completed the
> traversal -- again, it depends a lot on the semantics of your language.
>
> Take care,
> John
>
>
>
>
> Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
>
>
>


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From parrt at jguru.com  Wed Jan 15 12:01:30 2003
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:15:14 2004
Subject: [antlr-interest] Bug in tree construction generated code
In-Reply-To: <5.1.1.1.2.20030114103122.03ebf878@wgmail2.gatwick.eur.slb.com>
Message-ID: <2333EDD8-28C4-11D7-A8BA-000393BB647E@jguru.com>

Hi Pete,

Unfortunately, this is a "feature" that I was uncomfortable with 
introducing way back when that has bitten us all.  STRING is a 
shorthand for a reference to that token in the rule's AST.  :(  I'd be 
happy to remove this ambiguous feature, but it would break a lot of 
code :(

Thanks for the report,
Terence

On Tuesday, January 14, 2003, at 02:32 AM, Pete Forman wrote:

> There is a bug in the code generated from a tree constructor
> illustrated by the following example.
>
> class P extends Parser;
> options {buildAST = true;}
> input: (text | NUMBER)* EOF!;
> text: STRING
>      { ## = #([STRING, "foo"], #STRING);
>      }
>    ;
>
> class L extends Lexer;
> NUMBER: ('0'..'9')+;
> STRING: '\''! (~'\'')* '\''!;
>
> The generated code does not compile.  What has happened is that the
> STRING in [STRING, "foo"] is replaced by a temporary AST from the line
> above instead of an int token.  The #STRING correctly references the
> temporary AST.
>
>
> A workaround is to alias the token name.
>
>      { int STRING2 = STRING; // establish alias
>        ## = #([STRING2, "foo"], #STRING);
>
>
> I came across this problem in 2.7.1 generating Java.  It is still
> present in 2.7.2rc2.
>
>
> BTW, the use of ## in tree construction does not appear to be in the
> documentation.  It is described in */action.g.
>
> -- 
> Pete Forman                -./\.-  Disclaimer: This post is originated
> WesternGeco                  -./\.-   by myself and does not represent
> pete.forman@westerngeco.com    -./\.-   opinion of Schlumberger, Baker
> http://petef.port5.com           -./\.-   Hughes or their divisions.
>
>
>
>
> Your use of Yahoo! Groups is subject to 
> http://docs.yahoo.com/info/terms/
>
>
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org
Lecturer in Comp. Sci., University of San Francisco


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From parrt at jguru.com  Wed Jan 15 12:14:29 2003
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:15:14 2004
Subject: [antlr-interest] PGN grammar anyone?
In-Reply-To: <03011310032200.00770@hun.bre.de>
Message-ID: <F3FEB0A2-28C5-11D7-A8BA-000393BB647E@jguru.com>


On Monday, January 13, 2003, at 01:01 AM, Andreas Rueckert wrote:

> Hi!
>
> Are you aware of a PGN grammar for Antlr? (Portable Game Notation, a  
> format to
> store chess games).
>
> Ciao,
> Andreas
>
> PS: ArgoUML now uses the Antlr classfile (Java bytecode) grammar to  
> reverse
> engineer and it seems the antlr site does not list it yet in the  
> resource
> section.
>
> http://argouml.tigris.org/source/browse/argouml/modules/classfile/src/ 
> org/argouml/uml/reveng/classfile/

THis is now at the resources page :)  Sorry for the delay.  Looks like  
great work.

Terence
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org
Lecturer in Comp. Sci., University of San Francisco


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From luke.evans at seagatesoftware.com  Wed Jan 15 13:49:16 2003
From: luke.evans at seagatesoftware.com (Luke Evans)
Date: Mon Dec 20 16:15:14 2004
Subject: [antlr-interest] Bug in tree construction generated code
Message-ID: <A399661DAF14DA46AAB21B088F3887DC066DDE5E@vanent14.crystald.net>

This might seem like overkill - and I guess there's plenty more to worry
about than this sort of minutia, however...

Have you thought of having a 'deprecated' flag which would be used to
control features of this sort?  Such a feature may, or may not, imply if or
when a 'legacy' feature might be removed from the product, but at the very
least it provides a 'large hint' as to what represents 'sanctioned' features
in a given version.  Probably it's nice to discourage new users/projects
from engaging features which are no longer considered 'best practice' or for
which there are better alternatives.

Lwe

> ----------
> From: 	Terence Parr
> Reply To: 	antlr-interest@yahoogroups.com
> Sent: 	Wednesday, January 15, 2003 12:01 PM
> To: 	antlr-interest@yahoogroups.com
> Subject: 	Re: [antlr-interest] Bug in tree construction generated code
> 
> Hi Pete,
> 
> Unfortunately, this is a "feature" that I was uncomfortable with 
> introducing way back when that has bitten us all.  STRING is a 
> shorthand for a reference to that token in the rule's AST.  :(  I'd be 
> happy to remove this ambiguous feature, but it would break a lot of 
> code :(
> 
> Thanks for the report,
> Terence
> 
> On Tuesday, January 14, 2003, at 02:32 AM, Pete Forman wrote:
> 
> > There is a bug in the code generated from a tree constructor
> > illustrated by the following example.
> >
> > class P extends Parser;
> > options {buildAST = true;}
> > input: (text | NUMBER)* EOF!;
> > text: STRING
> >      { ## = #([STRING, "foo"], #STRING);
> >      }
> >    ;
> >
> > class L extends Lexer;
> > NUMBER: ('0'..'9')+;
> > STRING: '\''! (~'\'')* '\''!;
> >
> > The generated code does not compile.  What has happened is that the
> > STRING in [STRING, "foo"] is replaced by a temporary AST from the line
> > above instead of an int token.  The #STRING correctly references the
> > temporary AST.
> >
> >
> > A workaround is to alias the token name.
> >
> >      { int STRING2 = STRING; // establish alias
> >        ## = #([STRING2, "foo"], #STRING);
> >
> >
> > I came across this problem in 2.7.1 generating Java.  It is still
> > present in 2.7.2rc2.
> >
> >
> > BTW, the use of ## in tree construction does not appear to be in the
> > documentation.  It is described in */action.g.
> >
> > -- 
> > Pete Forman                -./\.-  Disclaimer: This post is originated
> > WesternGeco                  -./\.-   by myself and does not represent
> > pete.forman@westerngeco.com    -./\.-   opinion of Schlumberger, Baker
> > http://petef.port5.com           -./\.-   Hughes or their divisions.
> >
> >
> >
> >
> > Your use of Yahoo! Groups is subject to 
> > http://docs.yahoo.com/info/terms/
> >
> >
> --
> Co-founder, http://www.jguru.com
> Creator, ANTLR Parser Generator: http://www.antlr.org
> Lecturer in Comp. Sci., University of San Francisco
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 
> 
> 
> 

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From parrt at jguru.com  Wed Jan 15 16:15:11 2003
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:15:14 2004
Subject: [antlr-interest] Bug in tree construction generated code
In-Reply-To: <A399661DAF14DA46AAB21B088F3887DC066DDE5E@vanent14.crystald.net>
Message-ID: <9403ACDC-28E7-11D7-A8BA-000393BB647E@jguru.com>


On Wednesday, January 15, 2003, at 01:49 PM, Luke Evans wrote:

> This might seem like overkill - and I guess there's plenty more to 
> worry
> about than this sort of minutia, however...
>
> Have you thought of having a 'deprecated' flag which would be used to
> control features of this sort?  Such a feature may, or may not, imply 
> if or
> when a 'legacy' feature might be removed from the product, but at the 
> very
> least it provides a 'large hint' as to what represents 'sanctioned' 
> features
> in a given version.  Probably it's nice to discourage new 
> users/projects
> from engaging features which are no longer considered 'best practice' 
> or for
> which there are better alternatives.

An interesting idea...probably too few revisions before a total rewrite 
for deprecation to make much difference though ;)

Ter
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org
Lecturer in Comp. Sci., University of San Francisco


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From reidr at bigfoot.com  Wed Jan 15 23:16:34 2003
From: reidr at bigfoot.com (reidr <reidr@bigfoot.com>)
Date: Mon Dec 20 16:15:14 2004
Subject: [antlr-interest] Re: ANTLR build and package layout
In-Reply-To: <1E0ABA7B578BCC40AA5EED022EFE32E601C22921@sca-can1it01.rational.com>
Message-ID: <b05m8i+gvca@eGroups.com>

--- In antlr-interest@yahoogroups.com, "Schaefer, Doug"
<dschaefer@r...> wrote:
> Hey all,
> 
> I did this a month or so ago.  The problem is that there is an
assumption in
> the configure script that the CLASSPATH separator was ":".  However
on
> Windows, it is ";" (to allow for drive letters, I guess).  If you
change the
> following line in the configure script, you'll be OK:
> 
> 	CLASSPATH=CLASSPATH:.
> 
> to
> 
> 	CLASSPATH=CLASSPATH;.

I just ran into this problem myself.  I normally run on Linux, but I'm
porting to cygwin.  Does anyone know of a good fix?  (Editing
configure just doesn't feel right!)  It sounds like more of an
autoconf problem.  Is that true?

Thanks,
Reid


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From chantal.ackermann at web.de  Thu Jan 16 02:21:50 2003
From: chantal.ackermann at web.de (thereisnofreeid <chantal.ackermann@web.de>)
Date: Mon Dec 20 16:15:14 2004
Subject: [antlr-interest] nondeterminism warning
Message-ID: <b0613u+9pr7@eGroups.com>

hello all,

I am very new to parser generators and ANTLR. I am trying to get my
first Lexer compiled.

The Lexer should recognize expressions for a search query:

- Phrases: in double quotes (like "one phrase"), any white space shall
be escaped (like "one\\ phrase").
- boolean operators: "AND", "OR", "NOT"
- single words (not "AND", "OR", "NOT" *sigh*)

outside a phrase white space shall be ignored.

this is my current Lexer which I am not able to improve further to get
rid of the warnings:

/******************** LEXER **************************/

class QueryLexer extends Lexer;

options
{
	charVocabulary = '\3'..'\377';
	k=3;
}

{
	private boolean isPhrase = false;
}

TERM
	:	PHRASE
	|	( AND ) => { $setType(Token.AND); }
	|	WORD
	|	WS { $setType(Token.SKIP); }
	|	{ System.out.println("error: " + $getText()); }
	;

AND
	:	{ this.isPhrase == false }? "AND"
	;

OR
	:	{ this.isPhrase == false }? "OR"
	;

NOT
	:	{ this.isPhrase == false }? "NOT"
	;

protected PHRASE
	:	'"'! { this.isPhrase = true; } WORD ( WS! { $append("\\ "); } WORD
)* (WS!)?
		'"'! { this.isPhrase = false; }
	;

protected WORD
	:	(LETTER)+
	;

protected WS
	:	(' ' | '\t')+
	;

protected LETTER
    :   '\u0024' |
        '\u0041'..'\u005a' |
        '\u005f' |
        '\u0061'..'\u007a' |
        '\u00c0'..'\u00d6' |
        '\u00d8'..'\u00f6' |
        '\u00f8'..'\u00ff' |
        '\u0100'..'\u1fff' |
        '\u3040'..'\u318f' |
        '\u3300'..'\u337f' |
        '\u3400'..'\u3d2d' |
        '\u4e00'..'\u9fff' |
        '\uf900'..'\ufaff'
    ;

/***************** LEXER END **********************/

I get these warnings:

antlr:
    [antlr] ANTLR Parser Generator   Version 2.7.2rc2 (20030105)  
1989-2003 jGuru.com
    [antlr] QueryParser.g: warning:lexical nondeterminism between
rules TERM and AND upon
    [antlr] QueryParser.g:     k==1:'A'
    [antlr] QueryParser.g:     k==2:'N'
    [antlr] QueryParser.g:     k==3:'D'
    [antlr] QueryParser.g: warning:lexical nondeterminism between
rules TERM and OR upon
    [antlr] QueryParser.g:     k==1:'O'
    [antlr] QueryParser.g:     k==2:'R'
    [antlr] QueryParser.g:     k==3:<end-of-token>
    [antlr] QueryParser.g: warning:lexical nondeterminism between
rules TERM and NOT upon
    [antlr] QueryParser.g:     k==1:'N'
    [antlr] QueryParser.g:     k==2:'O'
    [antlr] QueryParser.g:     k==3:'T'
    [antlr] warning: public lexical rule TERM is optional (can match
"nothing")
    [antlr] QueryParser.g:75: warning:lexical nondeterminism upon
    [antlr] QueryParser.g:75:     k==1:'\t',' '
    [antlr] QueryParser.g:75:     k==2:'\t',' '
    [antlr] QueryParser.g:75:     k==3:'\t',' ','"'
    [antlr] QueryParser.g:75:     between alt 1 and exit branch of block

+++++++++++++++++++++++

I changed k to 3 in hope it would solve the nondeterminism but that
changes basically nothing. It adds only the lines with k==2 and k==3
to the warning output.

I do understand that "AND", "OR", "NOT" can match as WORD but I'am not
able to tell antlr to first try to match AND, OR, NOT and then WORD. I
tried with syntactic predicates in different places, but that didn't
change anything.

The last warning is annoying: where is the error in the WS rule? I
can't find anything wrong in it?

I would greatly appreciate any hint, tip, suggestion, solution...!

regards,
Chantal


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From parrt at jguru.com  Thu Jan 16 11:36:23 2003
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:15:14 2004
Subject: [antlr-interest] Announcing a graduate computer language course at USF
Message-ID: <CB659B0F-2989-11D7-90A6-000393BB647E@jguru.com>

Howdy,

I haven't finished the outline or course description exactly yet, but 
in case anybody in the San Francisco Bay area is interested, I'll be 
teaching a graduate computer language course at the University of SF 
near Golden Gate Park.  Small class (<10 people) and everything you 
ever wanted to know about language implementation.  We'll do everything 
from garbage collection to source-to-source translation!  
Monday/Wednesday nights 6:15-8:00PM starting January 27th (as in a week 
from Monday).  You can probably audit the class for a few bucks...not 
sure how much tuition would cost to take it for a grade.

Let me know if anybody is interested in attending the class or heckling 
;)

Ter
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org
Lecturer in Comp. Sci., University of San Francisco


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From gackle at shaw.ca  Thu Jan 16 22:18:19 2003
From: gackle at shaw.ca (Daniel Gackle)
Date: Mon Dec 20 16:15:14 2004
Subject: [antlr-interest] When does AST construction go through factory?
Message-ID: <NEBBKKODFMOCLEEIOELFMEDLCKAA.gackle@shaw.ca>

Apologies if this has been discussed before.  I know there was a thread on
this a couple of months ago, but I can't find answers to my questions in the
archives.  I'm seeing different behavior with heterogeneous AST creation.
Sometimes the AST factory gets called and sometimes it doesn't.  For
example, suppose IDENT is a lexer token whereas TYPE is an imaginary token
used in an action statement like ## = #(#[TYPE,"TYPE"], ##).  I map each of
them to a specific AST type:

tokens {
	IDENT<AST=MyIdentifierNode>;
	TYPE<AST=MyTypeNode>;
}

What I'm seeing is that in one case the AST is created via the AST factory:

astFactory.create(TYPE,"TYPE")

while in the other it is not:

tmp277_AST = new MyIdentifierNode(LT(1));

This seems to be foiling my attempts to intercept the creation of each AST
node by means of a customized AST factory.  My questions are:

(1) When exactly does the AST factory get used, and when does new get used
instead? (Does it have to do with lexer tokens vs. imaginary tokens, or is
there some other criterion?)
(2) Is this the desired behavior?  If so, why?
(3) Any suggestions on a workaround that would allow me to "get at" the AST
construction of those non-factory nodes?

Many thanks,
Daniel


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From parrt at jguru.com  Thu Jan 16 23:31:02 2003
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:15:14 2004
Subject: [antlr-interest] When does AST construction go through factory?
In-Reply-To: <NEBBKKODFMOCLEEIOELFMEDLCKAA.gackle@shaw.ca>
Message-ID: <A19DCA94-29ED-11D7-90A6-000393BB647E@jguru.com>

Hi.  ANTLR 2.7.2 should be out tomorrow or over the weekend.  It fixes 
this so that all AST creation goes thru the factory. :)

Ter

On Thursday, January 16, 2003, at 10:18 PM, Daniel Gackle wrote:

> Apologies if this has been discussed before.  I know there was a 
> thread on
> this a couple of months ago, but I can't find answers to my questions 
> in the
> archives.  I'm seeing different behavior with heterogeneous AST 
> creation.
> Sometimes the AST factory gets called and sometimes it doesn't.  For
> example, suppose IDENT is a lexer token whereas TYPE is an imaginary 
> token
> used in an action statement like ## = #(#[TYPE,"TYPE"], ##).  I map 
> each of
> them to a specific AST type:
>
> tokens {
> 	IDENT<AST=MyIdentifierNode>;
> 	TYPE<AST=MyTypeNode>;
> }
>
> What I'm seeing is that in one case the AST is created via the AST 
> factory:
>
> astFactory.create(TYPE,"TYPE")
>
> while in the other it is not:
>
> tmp277_AST = new MyIdentifierNode(LT(1));
>
> This seems to be foiling my attempts to intercept the creation of each 
> AST
> node by means of a customized AST factory.  My questions are:
>
> (1) When exactly does the AST factory get used, and when does new get 
> used
> instead? (Does it have to do with lexer tokens vs. imaginary tokens, 
> or is
> there some other criterion?)
> (2) Is this the desired behavior?  If so, why?
> (3) Any suggestions on a workaround that would allow me to "get at" 
> the AST
> construction of those non-factory nodes?
>
> Many thanks,
> Daniel
>
>
>
>
> Your use of Yahoo! Groups is subject to 
> http://docs.yahoo.com/info/terms/
>
>
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org
Lecturer in Comp. Sci., University of San Francisco


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From gackle at shaw.ca  Thu Jan 16 23:51:05 2003
From: gackle at shaw.ca (Daniel Gackle)
Date: Mon Dec 20 16:15:14 2004
Subject: [antlr-interest] Re: When does AST construction go through factory?
Message-ID: <NEBBKKODFMOCLEEIOELFIEDMCKAA.gackle@shaw.ca>

Ter,

You beat me to the punch, I was just playing with antlr-2.7.2rc2 to see if
it changed the behavior.  Indeed it does!  But now I'm seeing two new
problems.  Perhaps they have to do with a version mismatch between RC2 and
the C# codegen? (The latest C# version if I am not mistaken is 2.7.2a4?)

My previous example was something like this (where IDENT is a lexer token
and MYTOKEN is not):

tokens {
 IDENT<AST=MyIdentifierNode>;
 MYTOKEN<AST=MyASTNode>;
}

(Problem 1) For IDENT, the parser does:

astFactory.create(LT(1), "MyIdentifierNode");

which is wonderful in that it is a call to the factory, but it fails to
compile against the C# runtime with an error that says "cannot convert Token
to int".

(Problem 2) For MYTOKEN, I don't see any generated code that maps to
MyASTNode.  The parser used to do this:

astFactory.registerFactory(MYTOKEN, "MyASTNode");

But that's gone, and I can't find anything in the generated code that
replaces it.  As a result, when the AST for MYTOKEN gets created, its type
is not MyASTNode but simply the default AST type.

Would anyone (Micheal? :) care to comment?  Based on a brief look at the
improved ASTFactory class, there appear to be methods I can call to set up
the mappings in my own code, and bypass the Tokens section altogether.  Does
that sound like a valid workaround for now?

Thanks,
Daniel

--- In antlr-interest@yahoogroups.com, Terence Parr <parrt@j...> wrote:
> Hi.  ANTLR 2.7.2 should be out tomorrow or over the weekend.  It fixes
> this so that all AST creation goes thru the factory. :)
>
> Ter
>


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From parrt at jguru.com  Thu Jan 16 23:52:53 2003
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:15:14 2004
Subject: [antlr-interest] Re: When does AST construction go through factory?
In-Reply-To: <NEBBKKODFMOCLEEIOELFIEDMCKAA.gackle@shaw.ca>
Message-ID: <AF1C6FB0-29F0-11D7-90A6-000393BB647E@jguru.com>


On Thursday, January 16, 2003, at 11:51 PM, Daniel Gackle wrote:

> Ter,
>
> You beat me to the punch, I was just playing with antlr-2.7.2rc2 to 
> see if
> it changed the behavior.  Indeed it does!  But now I'm seeing two new
> problems.  Perhaps they have to do with a version mismatch between RC2 
> and
> the C# codegen? (The latest C# version if I am not mistaken is 
> 2.7.2a4?)
>>

I'm waiting to hear from Michael on any changes for C# output for 2.7.2 
(there is at least one)...i'm ready to go except for that I believe.

Ter
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org
Lecturer in Comp. Sci., University of San Francisco


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From open.zone at virgin.net  Fri Jan 17 06:16:41 2003
From: open.zone at virgin.net (micheal_jor <open.zone@virgin.net>)
Date: Mon Dec 20 16:15:14 2004
Subject: [antlr-interest] Re: When does AST construction go through factory?
In-Reply-To: <NEBBKKODFMOCLEEIOELFIEDMCKAA.gackle@shaw.ca>
Message-ID: <b09389+edrt@eGroups.com>

> Perhaps they have to do with a version mismatch between RC2 and
> the C# codegen? (The latest C# version if I am not mistaken is 
2.7.2a4?)

ANTLR 2.7.2rc2 contains a matching C# codegen.

> My previous example was something like this (where IDENT is a lexer 
token
> and MYTOKEN is not):
> 
> tokens {
>  IDENT<AST=MyIdentifierNode>;
>  MYTOKEN<AST=MyASTNode>;
> }
> 
> (Problem 1) For IDENT, the parser does:
> 
> astFactory.create(LT(1), "MyIdentifierNode");

This would be a bug. ASTFactory.create(Token, string) doesn't exist
Can you post a simple repro-grammar please?

> which is wonderful in that it is a call to the factory, but it 
fails to
> compile against the C# runtime with an error that says "cannot 
convert Token
> to int".
> 
> (Problem 2) For MYTOKEN, I don't see any generated code that maps to
> MyASTNode.  The parser used to do this:
> 
> astFactory.registerFactory(MYTOKEN, "MyASTNode");
> 
> But that's gone, and I can't find anything in the generated code 
that
> replaces it.  As a result, when the AST for MYTOKEN gets created, 
its type
> is not MyASTNode but simply the default AST type.

Hmm...this isn't right. Please post a repro-grammar and I'll fix it 
before Ter's planned 2.7.2 release party  ;-)

> Would anyone (Micheal? :) care to comment?

Ahem..uh..well...

> Based on a brief look at the
> improved ASTFactory class, there appear to be methods I can call to 
set up
> the mappings in my own code, and bypass the Tokens section 
altogether.  Does
> that sound like a valid workaround for now?

Yes. Just remember that if the issues are reproducible here, they 
will be fixed asap and you won't need the workarounds.

Cheers,

Micheal



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From gackle at shaw.ca  Fri Jan 17 14:19:24 2003
From: gackle at shaw.ca (slightlynew <gackle@shaw.ca>)
Date: Mon Dec 20 16:15:14 2004
Subject: [antlr-interest] Re: When does AST construction go through factory?
In-Reply-To: <b09389+edrt@eGroups.com>
Message-ID: <b09vhc+grpk@eGroups.com>

Micheal,

Many thanks for the replies.  I will try to get something to you over 
the weekend.

Daniel

--- In antlr-interest@yahoogroups.com, "micheal_jor <open.zone@v...>" 
<open.zone@v...> wrote:
> > Perhaps they have to do with a version mismatch between RC2 and
> > the C# codegen? (The latest C# version if I am not mistaken is 
> 2.7.2a4?)
> 
> ANTLR 2.7.2rc2 contains a matching C# codegen.
> 
> > My previous example was something like this (where IDENT is a 
lexer 
> token
> > and MYTOKEN is not):
> > 
> > tokens {
> >  IDENT<AST=MyIdentifierNode>;
> >  MYTOKEN<AST=MyASTNode>;
> > }
> > 
> > (Problem 1) For IDENT, the parser does:
> > 
> > astFactory.create(LT(1), "MyIdentifierNode");
> 
> This would be a bug. ASTFactory.create(Token, string) doesn't exist
> Can you post a simple repro-grammar please?
> 
> > which is wonderful in that it is a call to the factory, but it 
> fails to
> > compile against the C# runtime with an error that says "cannot 
> convert Token
> > to int".
> > 
> > (Problem 2) For MYTOKEN, I don't see any generated code that maps 
to
> > MyASTNode.  The parser used to do this:
> > 
> > astFactory.registerFactory(MYTOKEN, "MyASTNode");
> > 
> > But that's gone, and I can't find anything in the generated code 
> that
> > replaces it.  As a result, when the AST for MYTOKEN gets created, 
> its type
> > is not MyASTNode but simply the default AST type.
> 
> Hmm...this isn't right. Please post a repro-grammar and I'll fix it 
> before Ter's planned 2.7.2 release party  ;-)
> 
> > Would anyone (Micheal? :) care to comment?
> 
> Ahem..uh..well...
> 
> > Based on a brief look at the
> > improved ASTFactory class, there appear to be methods I can call 
to 
> set up
> > the mappings in my own code, and bypass the Tokens section 
> altogether.  Does
> > that sound like a valid workaround for now?
> 
> Yes. Just remember that if the issues are reproducible here, they 
> will be fixed asap and you won't need the workarounds.
> 
> Cheers,
> 
> Micheal


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From parrt at jguru.com  Fri Jan 17 14:26:40 2003
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:15:14 2004
Subject: [antlr-interest] Re: When does AST construction go through factory?
In-Reply-To: <b09vhc+grpk@eGroups.com>
Message-ID: <C020AB01-2A6A-11D7-90A6-000393BB647E@jguru.com>

Hi Daniel,

We're hoping to release ASAP so anything you can do to expedite would 
be great! :D

Thanks,
Ter

On Friday, January 17, 2003, at 02:19 PM, slightlynew <gackle@shaw.ca> 
wrote:

> Micheal,
>
> Many thanks for the replies.  I will try to get something to you over
> the weekend.
>
> Daniel
>
> --- In antlr-interest@yahoogroups.com, "micheal_jor <open.zone@v...>"
> <open.zone@v...> wrote:
>>> Perhaps they have to do with a version mismatch between RC2 and
>>> the C# codegen? (The latest C# version if I am not mistaken is
>> 2.7.2a4?)
>>
>> ANTLR 2.7.2rc2 contains a matching C# codegen.
>>
>>> My previous example was something like this (where IDENT is a
> lexer
>> token
>>> and MYTOKEN is not):
>>>
>>> tokens {
>>>  IDENT<AST=MyIdentifierNode>;
>>>  MYTOKEN<AST=MyASTNode>;
>>> }
>>>
>>> (Problem 1) For IDENT, the parser does:
>>>
>>> astFactory.create(LT(1), "MyIdentifierNode");
>>
>> This would be a bug. ASTFactory.create(Token, string) doesn't exist
>> Can you post a simple repro-grammar please?
>>
>>> which is wonderful in that it is a call to the factory, but it
>> fails to
>>> compile against the C# runtime with an error that says "cannot
>> convert Token
>>> to int".
>>>
>>> (Problem 2) For MYTOKEN, I don't see any generated code that maps
> to
>>> MyASTNode.  The parser used to do this:
>>>
>>> astFactory.registerFactory(MYTOKEN, "MyASTNode");
>>>
>>> But that's gone, and I can't find anything in the generated code
>> that
>>> replaces it.  As a result, when the AST for MYTOKEN gets created,
>> its type
>>> is not MyASTNode but simply the default AST type.
>>
>> Hmm...this isn't right. Please post a repro-grammar and I'll fix it
>> before Ter's planned 2.7.2 release party  ;-)
>>
>>> Would anyone (Micheal? :) care to comment?
>>
>> Ahem..uh..well...
>>
>>> Based on a brief look at the
>>> improved ASTFactory class, there appear to be methods I can call
> to
>> set up
>>> the mappings in my own code, and bypass the Tokens section
>> altogether.  Does
>>> that sound like a valid workaround for now?
>>
>> Yes. Just remember that if the issues are reproducible here, they
>> will be fixed asap and you won't need the workarounds.
>>
>> Cheers,
>>
>> Micheal
>
>
>
>
> Your use of Yahoo! Groups is subject to 
> http://docs.yahoo.com/info/terms/
>
>
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org
Lecturer in Comp. Sci., University of San Francisco


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From angryal2000 at yahoo.ca  Fri Jan 17 14:50:00 2003
From: angryal2000 at yahoo.ca (angryal2000 <angryal2000@yahoo.ca>)
Date: Mon Dec 20 16:15:14 2004
Subject: [antlr-interest] Fixing grammar rule with trailing optional token
Message-ID: <b0a1ao+6ini@eGroups.com>

I am having difficulty trying to fix the following rule:

data_type: FLOAT (OPENBRACKET INTEGER CLOSEBRACKET)? ;

FLOAT="float";
OPENBRACKET='(';
CLOSEBRACKET=')';
INTEGER=('0'..'9')+;

e.g.
"float" is accept by the rule data_type
as is
"float(23)"


i know my rule is wrong, i am just not sure how to go about fixing it.
 any ideas?  thanks.


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From parrt at jguru.com  Fri Jan 17 15:16:04 2003
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:15:14 2004
Subject: [antlr-interest] Fixing grammar rule with trailing optional token
In-Reply-To: <b0a1ao+6ini@eGroups.com>
Message-ID: <A64DB526-2A71-11D7-90A6-000393BB647E@jguru.com>


On Friday, January 17, 2003, at 02:50 PM, angryal2000 
<angryal2000@yahoo.ca> wrote:

> I am having difficulty trying to fix the following rule:
>
> data_type: FLOAT (OPENBRACKET INTEGER CLOSEBRACKET)? ;
>
> FLOAT="float";
> OPENBRACKET='(';
> CLOSEBRACKET=')';
> INTEGER=('0'..'9')+;
>
> e.g.
> "float" is accept by the rule data_type
> as is
> "float(23)"
>
>
> i know my rule is wrong, i am just not sure how to go about fixing it.
>  any ideas?  thanks.

We'll need more data to help.  For example, is float(23) legal as a 
data_type or not?  Are you getting a nondeterminism warning?  I suspect 
that whoever is calling data_type can also match (... afterwards and 
you are getting a warning.  Is that it?

Terence
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org
Lecturer in Comp. Sci., University of San Francisco


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From decoret at graphics.lcs.mit.edu  Fri Jan 17 14:24:03 2003
From: decoret at graphics.lcs.mit.edu (Xavier Decoret)
Date: Mon Dec 20 16:15:14 2004
Subject: [antlr-interest] Short circuit of the lexer
Message-ID: <3E288283.90904@graphics.lcs.mit.edu>

I have a grammar with arrays of int defined as follow:

[ 12, 12, 4, 5, 6 ]

The number of numbers in an array can be quite large (several thousands) 
and I found that antlr (though it is *really* a cool stuff that 
simplified my life so much) is pretty slow at this. What I would like to 
do is entering a special loop when the parser figures out it has started 
a list. It would then consume by itself the int to read using fast code 
reading directly the flow of char until it finds a closing bracket which 
has to be put back in the flow.

My idea is to overide the lexer::nextToken class and use a state 
variable to decide in that function wether to use the nexttoken build by 
ANTLR or use a local loop that directly reads the input stream until it 
finds a closing bracket in which case it returns that Token, and 
everything continues as if nothing happens.

But I am not sure how this would fit with the LA() functions if I remove 
things of the input stream of the lexer without telling him.
Is what I want to do something known?
Are they any caveheat I will run into?
Is it the correct way to speed up this part of the parsing?

Thanks for any hint.


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From parrt at jguru.com  Fri Jan 17 22:34:04 2003
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:15:14 2004
Subject: [antlr-interest] Short circuit of the lexer
In-Reply-To: <3E288283.90904@graphics.lcs.mit.edu>
Message-ID: <D6D53422-2AAE-11D7-90A6-000393BB647E@jguru.com>


On Friday, January 17, 2003, at 02:24 PM, Xavier Decoret wrote:

> I have a grammar with arrays of int defined as follow:
>
> [ 12, 12, 4, 5, 6 ]
>
> The number of numbers in an array can be quite large (several 
> thousands)
> and I found that antlr (though it is *really* a cool stuff that
> simplified my life so much) is pretty slow at this. What I would like 
> to
> do is entering a special loop when the parser figures out it has 
> started
> a list. It would then consume by itself the int to read using fast code
> reading directly the flow of char until it finds a closing bracket 
> which
> has to be put back in the flow.

Hi.  First, can you give us the simple rules that matched the array?  
There may be a more efficient way to specify the language.

Terence
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org
Lecturer in Comp. Sci., University of San Francisco


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From gackle at shaw.ca  Fri Jan 17 22:48:35 2003
From: gackle at shaw.ca (Daniel Gackle)
Date: Mon Dec 20 16:15:14 2004
Subject: [antlr-interest] Example for Micheal (was: When does AST construction go through
 factory?)
Message-ID: <NEBBKKODFMOCLEEIOELFOEDPCKAA.gackle@shaw.ca>

Micheal,

> Hmm...this isn't right. Please post a repro-grammar and I'll fix it
> before Ter's planned 2.7.2 release party  ;-)

Ok, I modified calc.g that ships in the examples\csharp\calc folder of the
antlr-2.7.2rc2 distribution.  The modified grammar is copied below.  All I
did was:

(1) Added a tokens section with EXPR<AST=ExprNode> and STAR<AST=StarNode>;
(2) Defined the classes ExprNode and StarNode in an embedded code section;
(3) Added the following action to the expr rule: { ## = #(#[EXPR,"EXPR"],
##); }

On my machine this is enough to demonstrate both problems I wrote about:

(Problem 1) For STAR, which is a lexer token, the following code is
generated that does not compile:

tmp5_AST = (StarNode) astFactory.create(LT(1), "StarNode");

(Problem 2) For EXPR, which is an imaginary token, there is no code anywhere
that constructs an ExprNode or registers it with the factory.  The only
place that "ExprNode" appears in the parser code is its class declaration
mentioned in (2) above.

I hope this works for you.  Any other questions, feel free to e-mail me
privately.  (I get the digest, so my replies to the list are not always
prompt.)

Ciao,
Daniel

/////////////////////////////
// Start of modified Calc.g

options {
	language = "CSharp";
}

class CalcParser extends Parser;
options {
	buildAST = true;	// uses CommonAST by default
}

tokens {
	EXPR<AST=ExprNode>;
	STAR<AST=StarNode>;
}

{
	public class StarNode { }
	public class ExprNode { }
}

expr
	:	mexpr (PLUS^ mexpr)* SEMI!
		{ ## = #(#[EXPR,"EXPR"], ##); }
	;

mexpr
	:	atom (STAR^ atom)*
	;

atom:	INT
	;

class CalcLexer extends Lexer;

WS	:	(' '
	|	'\t'
	|	'\n'
	|	'\r')
		{ _ttype = Token.SKIP; }
	;

LPAREN:	'('
	;

RPAREN:	')'
	;

STAR:	'*'
	;

PLUS:	'+'
	;

SEMI:	';'
	;

protected
DIGIT
	:	'0'..'9'
	;

INT	:	(DIGIT)+
	;

class CalcTreeWalker extends TreeParser;

expr returns [float r]
{
	float a,b;
	r=0;
}
	:	#(PLUS a=expr b=expr)	{r = a+b;}
	|	#(STAR a=expr b=expr)	{r = a*b;}
	|	i:INT			{r = Convert.ToSingle(i.getText());}
	;

// End of modified Calc.g
/////////////////////////////


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From gackle at shaw.ca  Fri Jan 17 23:38:40 2003
From: gackle at shaw.ca (Daniel Gackle)
Date: Mon Dec 20 16:15:14 2004
Subject: [antlr-interest] Re: Example for Micheal (was: When does AST construction go through
 factory?)
Message-ID: <NEBBKKODFMOCLEEIOELFGEEACKAA.gackle@shaw.ca>

Micheal,

While we're at it, I just ran into a third problem.  I added a class called
IntNode to the calc.g example from my previous post, and changed the "atom"
rule to do this:

atom:	INT<AST=IntNode>;

In other words I made what I believe you referred to as a "per-tokenref
mapping".  The generated code looks right:

tmp6_AST = (IntNode) astFactory.create(LT(1), "IntNode");

But it generates a run time exception: "System.InvalidCastException:
Specified cast is not valid."  Keep in mind that in order to get this to
compile I had to get astFactory.create() to accept LT(1) as an int.  To do
this I added the following temporary workaround code to ASTFactory.cs:

/// <summary>Added by dg</summary>
public static implicit operator int(Token t)
{
	return t.Type;
}

That's all for now.  Below is the full text of the "modified modified
calc.g".

Daniel

///////////////////////////////////////////////////
// Start of modified Calc.g ver.2

options {
	language = "CSharp";
}

class CalcParser extends Parser;
options {
	buildAST = true;	// uses CommonAST by default
}

tokens {
	EXPR<AST=ExprNode>;
	STAR<AST=StarNode>;
}

{
	public class StarNode { }
	public class ExprNode { }
	public class IntNode { }
}

expr
	:	mexpr (PLUS^ mexpr)* SEMI!
		{ ## = #(#[EXPR,"EXPR"], ##); }
	;

mexpr
	:	atom (STAR^ atom)*
	;

atom:	INT<AST=IntNode>
	;

class CalcLexer extends Lexer;

WS	:	(' '
	|	'\t'
	|	'\n'
	|	'\r')
		{ _ttype = Token.SKIP; }
	;

LPAREN:	'('
	;

RPAREN:	')'
	;

STAR:	'*'
	;

PLUS:	'+'
	;

SEMI:	';'
	;

protected
DIGIT
	:	'0'..'9'
	;

INT	:	(DIGIT)+
	;

class CalcTreeWalker extends TreeParser;

expr returns [float r]
{
	float a,b;
	r=0;
}
	:	#(PLUS a=expr b=expr)	{r = a+b;}
	|	#(STAR a=expr b=expr)	{r = a*b;}
	|	i:INT			{r = Convert.ToSingle(i.getText());}
	;

// End of modified Calc.g ver.2
///////////////////////////////////////////////////


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From gackle at shaw.ca  Sat Jan 18 00:12:06 2003
From: gackle at shaw.ca (Daniel Gackle)
Date: Mon Dec 20 16:15:14 2004
Subject: [antlr-interest] Possible solution for Problems 1 and 3 (per-token and per-tokenref AST
 mappings)
Message-ID: <NEBBKKODFMOCLEEIOELFOEEACKAA.gackle@shaw.ca>

> That's all for now.

Uh, I lied, sorry :). I got one more thing for you.  The workaround I added
to ASTFactory.cs was all wrong. It made things compile, but not run.   I
think I understand a bit better now what the codegen is trying to do with
lexer tokens that get mapped to hetero ASTs.  It is trying to call a method
similar to create(Token tok) but override the AST node type at the same
time.  In other words, it wants something like this in ASTFactory.cs:

/// <summary>Added by dg</summary>
public virtual AST create(Token tok, string ASTNodeTypeName)
{
	AST newNode = createFromNodeName(ASTNodeTypeName);
	newNode.initialize(tok);
	return newNode;
}

Deleting my mistaken fix, and adding this, actually solves not only Problem
3 but Problem 1 as well.  Cool!  But Problem 2, the absence of type mappings
for non-lexer (imaginary) tokens, remains.

Daniel



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From Matthew.Ford at forward.com.au  Sat Jan 18 01:17:18 2003
From: Matthew.Ford at forward.com.au (Matthew Ford)
Date: Mon Dec 20 16:15:14 2004
Subject: [antlr-interest] nondeterminism warning
References: <b0613u+9pr7@eGroups.com>
Message-ID: <002601c2bed2$66763e30$0200a8c0@NOTEBOOK>

try the following
// test.in

"test c" and b or c not "d"

C:\temp\antlrTest>java -cp .;c:\antlr\antlr.jar Main <test.in
["test\ c",<7>,line=1,col=1]
["and",<7>,line=1,col=10]
["b",<7>,line=1,col=14]
["or",<7>,line=1,col=16]
["c",<7>,line=1,col=19]
["not",<7>,line=1,col=21]
["d",<7>,line=1,col=25]


// Main.java
import java.io.*;
import antlr.Token;

class Main implements QueryLexerTokenTypes {
 public static void main(String[] args) {
  try {
   QueryLexer lexer = new QueryLexer(new DataInputStream(System.in));
   Token t=lexer.nextToken();
   while (t.getType() != EOF) {
     System.out.println(t);
    t=lexer.nextToken();
   }
  } catch(Exception e) {
   System.err.println("exception: "+e);
   throw new RuntimeException(e);
  }
 }
}



//QueryLexer.g
class QueryLexer extends Lexer;

options
{
charVocabulary = '\3'..'\377';
k=3;
}

tokens {
  AND = "AND";
  OR = "OR";
  NOT = "NOT";
}


TERM
: PHRASE
| WORD
| (WS { $setType(Token.SKIP); })+
;


protected PHRASE
: '"'! WORD ( WS! {$append("\\ ");} (WORD)? )*
'"'!
;


protected WORD
: (LETTER)+
;

protected WS
: (' ' | '\t')
;

protected LETTER
    :   '\u0024' |
        '\u0041'..'\u005a' |
        '\u005f' |
        '\u0061'..'\u007a' |
        '\u00c0'..'\u00d6' |
        '\u00d8'..'\u00f6' |
        '\u00f8'..'\u00ff' |
        '\u0100'..'\u1fff' |
        '\u3040'..'\u318f' |
        '\u3300'..'\u337f' |
        '\u3400'..'\u3d2d' |
        '\u4e00'..'\u9fff' |
        '\uf900'..'\ufaff'
    ;


----- Original Message -----
From: <chantal.ackermann@web.de>
To: <antlr-interest@yahoogroups.com>
Sent: Thursday, January 16, 2003 9:21 PM
Subject: [antlr-interest] nondeterminism warning


> hello all,
>
> I am very new to parser generators and ANTLR. I am trying to get my
> first Lexer compiled.
>
> The Lexer should recognize expressions for a search query:
>
> - Phrases: in double quotes (like "one phrase"), any white space shall
> be escaped (like "one\\ phrase").
> - boolean operators: "AND", "OR", "NOT"
> - single words (not "AND", "OR", "NOT" *sigh*)
>
> outside a phrase white space shall be ignored.
>
> this is my current Lexer which I am not able to improve further to get
> rid of the warnings:
>
> /******************** LEXER **************************/
>
> class QueryLexer extends Lexer;
>
> options
> {
> charVocabulary = '\3'..'\377';
> k=3;
> }
>
> {
> private boolean isPhrase = false;
> }
>
> TERM
> : PHRASE
> | ( AND ) => { $setType(Token.AND); }
> | WORD
> | WS { $setType(Token.SKIP); }
> | { System.out.println("error: " + $getText()); }
> ;
>
> AND
> : { this.isPhrase == false }? "AND"
> ;
>
> OR
> : { this.isPhrase == false }? "OR"
> ;
>
> NOT
> : { this.isPhrase == false }? "NOT"
> ;
>
> protected PHRASE
> : '"'! { this.isPhrase = true; } WORD ( WS! { $append("\\ "); } WORD
> )* (WS!)?
> '"'! { this.isPhrase = false; }
> ;
>
> protected WORD
> : (LETTER)+
> ;
>
> protected WS
> : (' ' | '\t')+
> ;
>
> protected LETTER
>     :   '\u0024' |
>         '\u0041'..'\u005a' |
>         '\u005f' |
>         '\u0061'..'\u007a' |
>         '\u00c0'..'\u00d6' |
>         '\u00d8'..'\u00f6' |
>         '\u00f8'..'\u00ff' |
>         '\u0100'..'\u1fff' |
>         '\u3040'..'\u318f' |
>         '\u3300'..'\u337f' |
>         '\u3400'..'\u3d2d' |
>         '\u4e00'..'\u9fff' |
>         '\uf900'..'\ufaff'
>     ;
>
> /***************** LEXER END **********************/
>
> I get these warnings:
>
> antlr:
>     [antlr] ANTLR Parser Generator   Version 2.7.2rc2 (20030105)
> 1989-2003 jGuru.com
>     [antlr] QueryParser.g: warning:lexical nondeterminism between
> rules TERM and AND upon
>     [antlr] QueryParser.g:     k==1:'A'
>     [antlr] QueryParser.g:     k==2:'N'
>     [antlr] QueryParser.g:     k==3:'D'
>     [antlr] QueryParser.g: warning:lexical nondeterminism between
> rules TERM and OR upon
>     [antlr] QueryParser.g:     k==1:'O'
>     [antlr] QueryParser.g:     k==2:'R'
>     [antlr] QueryParser.g:     k==3:<end-of-token>
>     [antlr] QueryParser.g: warning:lexical nondeterminism between
> rules TERM and NOT upon
>     [antlr] QueryParser.g:     k==1:'N'
>     [antlr] QueryParser.g:     k==2:'O'
>     [antlr] QueryParser.g:     k==3:'T'
>     [antlr] warning: public lexical rule TERM is optional (can match
> "nothing")
>     [antlr] QueryParser.g:75: warning:lexical nondeterminism upon
>     [antlr] QueryParser.g:75:     k==1:'\t',' '
>     [antlr] QueryParser.g:75:     k==2:'\t',' '
>     [antlr] QueryParser.g:75:     k==3:'\t',' ','"'
>     [antlr] QueryParser.g:75:     between alt 1 and exit branch of block
>
> +++++++++++++++++++++++
>
> I changed k to 3 in hope it would solve the nondeterminism but that
> changes basically nothing. It adds only the lines with k==2 and k==3
> to the warning output.
>
> I do understand that "AND", "OR", "NOT" can match as WORD but I'am not
> able to tell antlr to first try to match AND, OR, NOT and then WORD. I
> tried with syntactic predicates in different places, but that didn't
> change anything.
>
> The last warning is annoying: where is the error in the WS rule? I
> can't find anything wrong in it?
>
> I would greatly appreciate any hint, tip, suggestion, solution...!
>
> regards,
> Chantal
>
>
>
>
> Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
>
>
>


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From open.zone at virgin.net  Sat Jan 18 02:10:17 2003
From: open.zone at virgin.net (micheal_jor <open.zone@virgin.net>)
Date: Mon Dec 20 16:15:14 2004
Subject: [antlr-interest] Re: Possible solution for Problems 1 and 3 (per-token and per-tokenref AST mappings)
In-Reply-To: <NEBBKKODFMOCLEEIOELFOEEACKAA.gackle@shaw.ca>
Message-ID: <b0b969+3pap@eGroups.com>

Hi Daniel,

Thanks for the detailed reports and suggestions. I'll get back to you 
once I've had a chance to run them through ANTLR here.

Cheers!

Micheal


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From decoret at graphics.lcs.mit.edu  Sat Jan 18 05:06:52 2003
From: decoret at graphics.lcs.mit.edu (xadeck <decoret@graphics.lcs.mit.edu>)
Date: Mon Dec 20 16:15:14 2004
Subject: [antlr-interest] Re: Short circuit of the lexer
In-Reply-To: <D6D53422-2AAE-11D7-90A6-000393BB647E@jguru.com>
Message-ID: <b0bjhc+u1f5@eGroups.com>

--- In antlr-interest@yahoogroups.com, Terence Parr <parrt@j...> wrote:
> 
> 
> 
> Hi.  First, can you give us the simple rules that matched the array?  
> There may be a more efficient way to specify the language.

The grammar is a complex stuff. I extracted the part for arrays:
I guess values rule could be write as (INT)* but then I don't know how
to push the integers read into my result vector. I don't want to build
an AST unless really necessary (some files I parse have 180 000 lines
and the AST may result in high memory cost).



options {
    language="Cpp";
}
{
#include <deque>

using namespace std;

static vector<int> result;

}
class MyParser extends Parser;
options
{
    k=2;
}
file:  (decl)*
    ;

decl : Id LBRACKET values RBRACKET
    ;

values: i1:INT
        {
            result.push_back(atoi(i1->getText().c_str()));
        }
    | i2:INT
        {           
            result.push_back(atoi(i2->getText().c_str()));
        }
        values
    ;
class MyLexer extends Lexer;
options
{
    k=2;
}
{
    protected:
    bool parsingList;
}
LBRACKET : '[';
RBRACKET : ']';

WS  :   (' '
    |   '\t'
    |   '\n'
    |   '\r')
        { $setType(ANTLR_USE_NAMESPACE(antlr)Token::SKIP); }
    ;

INT :   ('0'..'9')+
    ;

Id : ('a'..'z')+
    ;



> Terence
> --
> Co-founder, http://www.jguru.com
> Creator, ANTLR Parser Generator: http://www.antlr.org
> Lecturer in Comp. Sci., University of San Francisco


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From parrt at jguru.com  Sat Jan 18 11:03:01 2003
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:15:14 2004
Subject: [antlr-interest] Re: Short circuit of the lexer
In-Reply-To: <b0bjhc+u1f5@eGroups.com>
Message-ID: <7744D2E0-2B17-11D7-90A6-000393BB647E@jguru.com>


On Saturday, January 18, 2003, at 05:06 AM, xadeck 
<decoret@graphics.lcs.mit.edu> wrote:

> --- In antlr-interest@yahoogroups.com, Terence Parr <parrt@j...> wrote:
>>
>>
>>
>> Hi.  First, can you give us the simple rules that matched the array?
>> There may be a more efficient way to specify the language.
>
> The grammar is a complex stuff. I extracted the part for arrays:
> I guess values rule could be write as (INT)* but then I don't know how
> to push the integers read into my result vector. I don't want to build
> an AST unless really necessary (some files I parse have 180 000 lines
> and the AST may result in high memory cost).

Are you using the latest 2.7.2 stuff or 2.7.1?  I think 2.7.2 is faster 
:)

Also, (INT)* is definitely more efficient than the tail recursion you 
are using.  just add the action within the loop:

( i:INT {result.push_back(atoi(i->getText().c_str()));} )*

Put that in rule decl instead of referring to values and you should be 
good to go.  Let me know if this works.  The tail recursion will build 
a HUGE stack of method invocation records if you have 180k lines...very 
very inefficient.  Try the loop :)

Ter

> options {
>     language="Cpp";
> }
> {
> #include <deque>
>
> using namespace std;
>
> static vector<int> result;
>
> }
> class MyParser extends Parser;
> options
> {
>     k=2;
> }
> file:  (decl)*
>     ;
>
> decl : Id LBRACKET values RBRACKET
>     ;
>
> values: i1:INT
>         {
>             result.push_back(atoi(i1->getText().c_str()));
>         }
>     | i2:INT
>         {
>             result.push_back(atoi(i2->getText().c_str()));
>         }
>         values
>     ;
> class MyLexer extends Lexer;
> options
> {
>     k=2;
> }
> {
>     protected:
>     bool parsingList;
> }
> LBRACKET : '[';
> RBRACKET : ']';
>
> WS  :   (' '
>     |   '\t'
>     |   '\n'
>     |   '\r')
>         { $setType(ANTLR_USE_NAMESPACE(antlr)Token::SKIP); }
>     ;
>
> INT :   ('0'..'9')+
>     ;
>
> Id : ('a'..'z')+
>     ;
>
>
>
>> Terence
>> --
>> Co-founder, http://www.jguru.com
>> Creator, ANTLR Parser Generator: http://www.antlr.org
>> Lecturer in Comp. Sci., University of San Francisco
>
>
>
>
> Your use of Yahoo! Groups is subject to 
> http://docs.yahoo.com/info/terms/
>
>
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org
Lecturer in Comp. Sci., University of San Francisco


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From hastur4711 at bigfoot.com  Sat Jan 18 13:49:19 2003
From: hastur4711 at bigfoot.com (beeh1973 <hastur4711@bigfoot.com>)
Date: Mon Dec 20 16:15:15 2004
Subject: [antlr-interest] ambiguous grammar
Message-ID: <b0ci4v+bk2r@eGroups.com>

hi,

in my language i have float literals like .1 and
expressions like $.1

i am using the following lexer rule to recognize numbers

NUMBER
 : '.'        { _ttype = DOT; }            // a single dot
   (((DIGIT)+ { _ttype = FLOAT} )          // a float number
   ((EXPONENT))?)?
 |
   // some more cases for integers and floats > 1
  ...

DOLLAR : '$' ;


in the parser i try to match $.1 with this rule:

component:
  DOLLAR^ DOT NUMBER
  ;

while parsing $.1 i get an error that FLOAT is unexpected at that 
point.

while i understand why this is happening; a call to nextToken simply
returns the next token which is a FLOAT no DOT, i do not understand 
how to
fix the grammar. can anybody help me with this?

thanks in advance,
        alphonse bendt



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From decoret at graphics.lcs.mit.edu  Sat Jan 18 14:40:21 2003
From: decoret at graphics.lcs.mit.edu (xadeck <decoret@graphics.lcs.mit.edu>)
Date: Mon Dec 20 16:15:15 2004
Subject: [antlr-interest] Re: Short circuit of the lexer
In-Reply-To: <7744D2E0-2B17-11D7-90A6-000393BB647E@jguru.com>
Message-ID: <b0cl4l+8elg@eGroups.com>

--- In antlr-interest@yahoogroups.com, Terence Parr <parrt@j...> 
> 
> Are you using the latest 2.7.2 stuff or 2.7.1?  I think 2.7.2 is faster 
> :)

Of course I am ;-)

> 
> Also, (INT)* is definitely more efficient than the tail recursion you 
> are using.  just add the action within the loop:
> 
> ( i:INT {result.push_back(atoi(i->getText().c_str()));} )*
> 
> Put that in rule decl instead of referring to values and you should be 
> good to go.  Let me know if this works.  The tail recursion will build 
> a HUGE stack of method invocation records if you have 180k lines...very 
> very inefficient.  Try the loop :)
> 

Well, I switch from tail recursion to list and it is still slow. I
wrote a dummy version of my grammar keeping only the array stuff and I
t is quite pretty fast (10s for a test file) but when I add more
recognition token to the lexer it gets slower (30s) and when I use my
full grammar without any action (so C++ extra code cannot be
involved), it get quite slow (1m30 to 2min) and it even seems the tail
recursion is faster ?!?.

I am trying to figure out what is going one -> will investigate) cause
I know such files can be parsed pretty fast with antlr (I have seen
examples but I cannot use their grammar). I can send the full grammar
but it is pretty long (VRML2 grammar) and you would need the associate
library to compile it. I guess you have something else to do than
debugging other people's grammar.

Anyway, the original questions still holds for curiosity: will
Lexer::LA() be messed if I screw up the input stream within
lexer::nextToken()?

And by the way, thanks for the help.


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From johnm-antlr at non.net  Sat Jan 18 17:30:43 2003
From: johnm-antlr at non.net (John D. Mitchell)
Date: Mon Dec 20 16:15:15 2004
Subject: [antlr-interest] Re: Short circuit of the lexer
In-Reply-To: <b0cl4l+8elg@eGroups.com>
References: <7744D2E0-2B17-11D7-90A6-000393BB647E@jguru.com>
	<b0cl4l+8elg@eGroups.com>
Message-ID: <15913.65475.201505.702452@non.non.net>

>>>>> "xadeck" == xadeck <decoret@graphics lcs mit edu> <decoret@graphics.lcs.mit.edu> writes:
[...]

> Well, I switch from tail recursion to list and it is still slow. I wrote
> a dummy version of my grammar keeping only the array stuff and I t is
> quite pretty fast (10s for a test file)

So, the array recognition stuff is now fast but the rest of your lexer and
parser are slow?  I think the answer is pretty obvious... :-)

> but when I add more recognition token to the lexer it gets slower (30s)
> and when I use my full grammar without any action (so C++ extra code
> cannot be involved), it get quite slow (1m30 to 2min) and it even seems
> the tail recursion is faster ?!?.

I doubt it.

>>From what little you've said, it seems that your grammar is either for a
really nasty language or your implementation isn't very speedy or both.
Hmm... Ah, VRML2.  Alas, I don't recall much nitty-gritty about VRML (let
alone VRML2) so I don't have any off the cuff answer.


> I am trying to figure out what is going one -> will investigate) cause I
> know such files can be parsed pretty fast with antlr (I have seen
> examples but I cannot use their grammar). I can send the full grammar but
> it is pretty long (VRML2 grammar) and you would need the associate
> library to compile it. I guess you have something else to do than
> debugging other people's grammar.

Administrivia:  Do NOT make large posts to the newsgroup/mailing list.  Put
your stuff up on a web site and send out a message with a link to it so
that people who are up for it may go get it and look at it.

FYI, FWIW, there are a (small) number of people in this forum who offer
professional ANTLR consulting and development so if you really need it to
kick ass and don't have the time to become an ANTLR master yourself....


> Anyway, the original questions still holds for curiosity: will
> Lexer::LA() be messed if I screw up the input stream within
> lexer::nextToken()?

(A) I would suggest that you spend the time to really analyze your lexer
and parser grammars first.  For example, other places where you're using
calls/recursion rather than looping, abuse of syntactic predicates, etc.

(B) Are you sure that it's actually the lexing that's taking a long time?
Have you actually profiled your lexer and parser to determine that or are
you just guessing?

(C) If you're going to muck with nextToken(), you'll really need to make
sure that your aren't violating the various assumptions that are being made
about the state that things are in at any point.

Take care,
	John

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From johnm-antlr at non.net  Sat Jan 18 17:33:53 2003
From: johnm-antlr at non.net (John D. Mitchell)
Date: Mon Dec 20 16:15:15 2004
Subject: [antlr-interest] ambiguous grammar
In-Reply-To: <b0ci4v+bk2r@eGroups.com>
References: <b0ci4v+bk2r@eGroups.com>
Message-ID: <15914.129.526217.220779@non.non.net>

>>>>> "beeh1973" == beeh1973 <hastur4711@bigfoot com> <hastur4711@bigfoot.com> writes:
[...]

> while parsing $.1 i get an error that FLOAT is unexpected at that point.

> while i understand why this is happening; a call to nextToken simply
> returns the next token which is a FLOAT no DOT, i do not understand how
> to fix the grammar. can anybody help me with this?

[There's probably a FAQ for this.]

Look at the lexers in the Java and/or Standard C for working examples of
how to deal with this sort of thing.

Go wild,
	John

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From cintyram at yahoo.com  Sat Jan 18 19:11:57 2003
From: cintyram at yahoo.com (cintyram <cintyram@yahoo.com>)
Date: Mon Dec 20 16:15:15 2004
Subject: [antlr-interest] Re: Fixing grammar rule with trailing optional token
In-Reply-To: <b0a1ao+6ini@eGroups.com>
Message-ID: <b0d51t+hqen@eGroups.com>

did you write the rules as you gave here or did you use : instead of = ?

--- In antlr-interest@yahoogroups.com, "angryal2000
<angryal2000@y...>" <angryal2000@y...> wrote:
> I am having difficulty trying to fix the following rule:
> 
> data_type: FLOAT (OPENBRACKET INTEGER CLOSEBRACKET)? ;
> 
> FLOAT="float";
> OPENBRACKET='(';
> CLOSEBRACKET=')';
> INTEGER=('0'..'9')+;
> 
> e.g.
> "float" is accept by the rule data_type
> as is
> "float(23)"
> 
> 
> i know my rule is wrong, i am just not sure how to go about fixing it.
>  any ideas?  thanks.


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From cintyram at yahoo.com  Sat Jan 18 19:37:12 2003
From: cintyram at yahoo.com (cintyram <cintyram@yahoo.com>)
Date: Mon Dec 20 16:15:15 2004
Subject: [antlr-interest] Re: ambiguous grammar
In-Reply-To: <b0ci4v+bk2r@eGroups.com>
Message-ID: <b0d6h8+osdh@eGroups.com>

hi , i have included a small part from one of my previous grammars.
i followed the suggestions i got on this list and did not have a
seperate token type for '.' DOT but tried to match it where ever
required ;

also for your $.1 rule you might try 
rule : DOLLAR FLOATING ;

with k set appropriately , because now FLOATING is the expected token
for two rules.

please tell if this does not work ;

--- excerpt ---

protected  ALPHA : ('a'..'z' | 'A'..'Z'|'_')  ;
protected DIGIT : '0'..'9'   	;
ID
options {
	testLiterals = true;
}
	:	ALPHA (ALPHA|DIGIT)*	;

protected SUFFIX      :   ('k'|'M')   ; /// kilo mega etc. 
protected EXPONENT :   ( ('e')('+'|'-')?(DIGIT)+ )   ;
protected INT            :	(DIGIT) +    ;  /// match the integral part
 123
protected FLOATING  :   ( '.'  (DIGIT)+ ) ;
NUM   : INT ( FLOATING  ) ? ( SUFFIX )? (EXPONENT ) ? 
            | ( FLOATING  )  ( SUFFIX )? (EXPONENT ) ? 

--- end ---
cheers
ram



--- In antlr-interest@yahoogroups.com, "beeh1973 <hastur4711@b...>"
<hastur4711@b...> wrote:
> hi,
> 
> in my language i have float literals like .1 and
> expressions like $.1
> 
> i am using the following lexer rule to recognize numbers
> 
> NUMBER
>  : '.'        { _ttype = DOT; }            // a single dot
>    (((DIGIT)+ { _ttype = FLOAT} )          // a float number
>    ((EXPONENT))?)?
>  |
>    // some more cases for integers and floats > 1
>   ...
> 
> DOLLAR : '$' ;
> 
> 
> in the parser i try to match $.1 with this rule:
> 
> component:
>   DOLLAR^ DOT NUMBER
>   ;
> 
> while parsing $.1 i get an error that FLOAT is unexpected at that 
> point.
> 
> while i understand why this is happening; a call to nextToken simply
> returns the next token which is a FLOAT no DOT, i do not understand 
> how to
> fix the grammar. can anybody help me with this?
> 
> thanks in advance,
>         alphonse bendt


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From elim at tti-telecom.com  Sat Jan 18 23:09:17 2003
From: elim at tti-telecom.com (Eli Mesika)
Date: Mon Dec 20 16:15:15 2004
Subject: [antlr-interest] When does AST construction go through factor
	y?
Message-ID: <DD35EBCD142956489EF134414FABD1EE661ADF@exchange.tti-telecom.com>

Unsubscribe

-----Original Message-----
From: Daniel Gackle [mailto:gackle@shaw.ca]
Sent: Friday, January 17, 2003 8:18 AM
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] When does AST construction go through factory?


Apologies if this has been discussed before.  I know there was a thread on
this a couple of months ago, but I can't find answers to my questions in the
archives.  I'm seeing different behavior with heterogeneous AST creation.
Sometimes the AST factory gets called and sometimes it doesn't.  For
example, suppose IDENT is a lexer token whereas TYPE is an imaginary token
used in an action statement like ## = #(#[TYPE,"TYPE"], ##).  I map each of
them to a specific AST type:

tokens {
	IDENT<AST=MyIdentifierNode>;
	TYPE<AST=MyTypeNode>;
}

What I'm seeing is that in one case the AST is created via the AST factory:

astFactory.create(TYPE,"TYPE")

while in the other it is not:

tmp277_AST = new MyIdentifierNode(LT(1));

This seems to be foiling my attempts to intercept the creation of each AST
node by means of a customized AST factory.  My questions are:

(1) When exactly does the AST factory get used, and when does new get used
instead? (Does it have to do with lexer tokens vs. imaginary tokens, or is
there some other criterion?)
(2) Is this the desired behavior?  If so, why?
(3) Any suggestions on a workaround that would allow me to "get at" the AST
construction of those non-factory nodes?

Many thanks,
Daniel


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From srvg2003 at yahoo.com  Sun Jan 19 20:59:34 2003
From: srvg2003 at yahoo.com (srvg2003 <srvg2003@yahoo.com>)
Date: Mon Dec 20 16:15:15 2004
Subject: [antlr-interest] RPG grammar/parser..
Message-ID: <b0fvnm+6fc0@eGroups.com>

Hi,



Please let me know if anybody attempted to develop a grammar/parser 
for RPG; Is RPG a context free language?

regards,
venu



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From mornes at mosaicsoftware.com  Sun Jan 19 21:39:15 2003
From: mornes at mosaicsoftware.com (Morne Streicher)
Date: Mon Dec 20 16:15:15 2004
Subject: [antlr-interest] Line numbers
Message-ID: <C8B0B2010780F1439E5DAB4FF7DFFFD9010D915C@za-exchange.za.mosaicsoftware.net>

Dear All

I'm pretty new to compiler theory and parser generators. I've managed to successfully defined a language (and implemented the interpreter as well) using ANTLR. :-)

What I'm doing to interpret the source language is to walk the Abstract Syntax Tree (AST) generated by ANTLR, and "evaluate" that. 

The AST generated by the parser however do not include the line and column number for the token it represents. I need that information to customize run-time error messages, i.e. include line numbers.

Has anybody got an (simple) example of how I could do that - extend the .g file to make it include line numbers in the AST class? I believe I'll have to extend the AST class, which is fine.

Below, a the grammer I'm using.

Thanks,
Morne.


------------------------------------------------------------------
class otsParser extends Parser;

options {
	buildAST = true;	// uses CommonAST by default
	k = 2;
	
	defaultErrorHandler = false;     // Don't generate parser error handlers
}

otscript
		:	(command)*
		;
		
command :   assignment_statement
			|
			expression SEMI!
			|
			IMPORT^ text SEMI!
			|
			IDENTIFIER PLUS_EQUAL_TO^ expression SEMI!
			|
			variable_decleration SEMI!
			|
			foreach_statement
			|
			function_decleration
			|
			return_statement
			|
			if_statement
		;
		
if_statement :	IF^ expression if_body (optional_else|empty) END!
		;
		
if_body : BEGIN^ otscript 
		;
		
optional_else : ELSE^ otscript
		;
			
assignment_statement : IDENTIFIER EQUAL_TO^ expression SEMI! ;

foreach_statement : FOREACH^ IDENTIFIER IN! expression BEGIN! otscript END!
		;
		
function_decleration : FUNCTION^ IDENTIFIER function_parameters BEGIN! otscript END!
		;
		
function_parameters : LPAREN^ identifier_list RPAREN! ;

return_statement : RETURN^ (expression | empty) SEMI!
		;

text :  PCDATA^;

////////////////////////////////////////////////////////////////////////////////////
// Expressions

expression : simple_expression ( empty | ((EQUAL^ | NOT_EQUAL^ | LT^ | LE^ | GE^ | GT^ ) simple_expression)) 
;

simple_expression : term ( (PLUS^ | MINUS^ | OR^) term )*  ;

term : factor ( (MULT^ | DIV^ | MOD^ | AND^ | WITH^) factor )* ;

factor : identifier | unsigned_constant | NULL | UNDEFINED | TRUE | FALSE | structure_decleration | list_decleration | 
			function_call | LPAREN^ expression RPAREN! ;

identifier : IDENTIFIER    ;

unsigned_constant : unsigned_number | text;

unsigned_number : INTEGER;

sign : PLUS | MINUS ;

variable_decleration	: VAR^ IDENTIFIER (COMMA! IDENTIFIER)*
		;

function_call : IDENTIFIER^ LPAREN! expression_list RPAREN!
		;

structure_decleration :
				LCURL^ id_equals_expr_list RCURL!;

id_equals_expr_list : (id_equals_expr_pair | empty) (COMMA! id_equals_expr_pair)*
				;
				
id_equals_expr_pair : 
				IDENTIFIER EQUAL_TO! expression
			;
			
list_decleration : 
			LBRACK^ expression_list RBRACK!
		;
		
expression_list : (expression | empty) (COMMA! expression)*
				;
				
identifier_list : (IDENTIFIER | empty) (COMMA! IDENTIFIER)*
				;

empty : /* empty */ ;

class otsLexer extends Lexer;

options {	
	k = 3;
	caseSensitive=false;
	charVocabulary = '\0'..'\377';
}

tokens {
  	OR 					= "OR";

	AND 				= "and";
	
	NULL				= "null";
	
	UNDEFINED			= "undefined";
	
	TRUE				= "true";
	
	FALSE				= "false";
	
	WITH				= "WITH";
	
	IMPORT				= "IMPORT";
	
	VAR					= "VAR";
	
	FOREACH				= "FOREACH";
	
	IN					= "IN";
	
	BEGIN				= "BEGIN";
	
	END					= "END";
	
	FUNCTION			= "FUNCTION";
	
	RETURN				= "return";
	
	IF					= "IF";
	
	ELSE				= "ELSE";
}


WS      : ( ' '
		|	'\t'
		|	'\f'
		// handle newlines
		|	(	"\r\n"  // Evil DOS
			|	'\r'    // Macintosh
			|	'\n'    // Unix (the right way)
			)
			{ newline(); }
		)
		{ _ttype = Token.SKIP; }
	;
	
SL_COMMENT : 
	"//" 
	(~'\n')* '\n'
	{ _ttype = Token.SKIP; newline(); }
	;
	
ML_COMMENT
	:	"/*"
		(	{ LA(2)!='/' }? '*'
		|	'\n' { newline(); }
		|	~('*'|'\n')
		)*
		"*/"
			{ $setType(Token.SKIP); }
	;

POINT : ".";

COMMA : ",";

SEMI : ";";


LPAREN	:	'('	
		;		
RPAREN	:	')'
		;
		
LCURL	:	'{'	
		;		
RCURL	:	'}'
		;
LBRACK	:	'['	
		;		
RBRACK	:	']'
		;	

		

PLUS	:	'+' ;
MINUS 	:   '-';		
MULT    :   '*';
DIV     :   '/';



QUOTE	: '"';

EQUAL 		: "==";
NOT_EQUAL 		: "!=";
EQUAL_TO 	: "=";
PLUS_EQUAL_TO 	: "+=";
//NOT_EQUAL  	: "<>";
LT 			: '<';
LE 			: "<=";
GE 			: ">=";
GT 			: '>';

MOD : "%";



INTEGER  
	//options {testLiterals=true;}
	:	'0'..'9' ('0'..'9')*
	;

IDENTIFIER  
	options {testLiterals=true;}
	:	('a'..'z'|'_') ('a'..'z'|'0'..'9'|'_'|'.')*
	;

// string literals
PCDATA
	: '"'! ( ~('"'))* '"'!
	;

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From open.zone at virgin.net  Mon Jan 20 01:44:13 2003
From: open.zone at virgin.net (micheal_jor <open.zone@virgin.net>)
Date: Mon Dec 20 16:15:15 2004
Subject: [antlr-interest] Re: Line numbers
In-Reply-To: <C8B0B2010780F1439E5DAB4FF7DFFFD9010D915C@za-exchange.za.mosaicsoftware.net>
Message-ID: <b0ggdd+c4t3@eGroups.com>


> The AST generated by the parser however do not include the line and 
column number for the token it represents. I need that information to 
customize run-time error messages, i.e. include line numbers.
> 
> Has anybody got an (simple) example of how I could do that - extend 
the .g file to make it include line numbers in the AST class? I 
believe I'll have to extend the AST class, which is fine.

With the latest version of ANTLR, generated Lexers already track line 
and column information and they are preserved in Token objects. They 
can be accessible via getColumn() and getLine() in Token objects.

The Lexers also track File information intenally but that info isn't 
transferred to Tokens automatically. If you want to track line, 
column and file information and transfer them to your AST, you will 
need to:

- subclass the appropriate xxxToken class
  a. add a string member for filename (or add File/FileInfo fields)
  b. add accessor/mutator for the field (or use a C# property)

- override nextToken()/makeToken() in yourLexer using code like 
(example is for C#):
     protected internal override Token makeToken(int t)
     {
        YourToken newToken = (YourToken) base.makeToken(t);
        if (newToken != Token.batToken)
           newToken.setFilename(getFilename());
     }
  This could be added to your *.g grammar file.
- subclass the appropriate xxxAST class
  a. add fields (and related accessors/mutators) for line, column and 
file info
  b. override initialize(Token tok) to transfer the tracked info from 
the Token to your AST

I have literally just type this from memory but I think it does 
outline what needs to be done. Other ANTLR veterans would be able to 
advice you on which of nextToken() or makeToken() should be 
overridden in this instance - my gut feeling says nextToken().

Cheers,

Micheal


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From amejdi at ertonline.gr  Mon Jan 20 05:30:38 2003
From: amejdi at ertonline.gr (Anakreon Mejdi)
Date: Mon Dec 20 16:15:15 2004
Subject: [antlr-interest] ambiguous grammar
References: <b0ci4v+bk2r@eGroups.com>
Message-ID: <3E2BF9FE.5060203@ertonline.gr>

  component:
    DOLLAR^ FLOAT
    ;
This should work.
There is no DOT because in the NUMBER rule if an DIGIT is matched the 
type is made FLOAT and the DOT is consumed.
For the same reason there is no NUMBER Token.

beeh1973 wrote:
> hi,
> 
> in my language i have float literals like .1 and
> expressions like $.1
> 
> i am using the following lexer rule to recognize numbers
> 
> NUMBER
>  : '.'        { _ttype = DOT; }            // a single dot
>    (((DIGIT)+ { _ttype = FLOAT} )          // a float number
>    ((EXPONENT))?)?
>  |
>    // some more cases for integers and floats > 1
>   ...
> 
> DOLLAR : '$' ;
> 
> 
> in the parser i try to match $.1 with this rule:
> 
> component:
>   DOLLAR^ DOT NUMBER
>   ;
> 
> while parsing $.1 i get an error that FLOAT is unexpected at that 
> point.
> 
> while i understand why this is happening; a call to nextToken simply
> returns the next token which is a FLOAT no DOT, i do not understand 
> how to
> fix the grammar. can anybody help me with this?
> 
> thanks in advance,
>         alphonse bendt
> 
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 
> 
> 



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From hastur4711 at bigfoot.com  Mon Jan 20 07:23:05 2003
From: hastur4711 at bigfoot.com (beeh1973 <hastur4711@bigfoot.com>)
Date: Mon Dec 20 16:15:15 2004
Subject: [antlr-interest] Re: ambiguous grammar
In-Reply-To: <3E2BF9FE.5060203@ertonline.gr>
Message-ID: <b0h48p+pebs@eGroups.com>

--- In antlr-interest@yahoogroups.com, Anakreon Mejdi <amejdi@e...> 
wrote:
>   component:
>     DOLLAR^ FLOAT
>     ;
> This should work.
> There is no DOT because in the NUMBER rule if an DIGIT is matched 
the 
> type is made FLOAT and the DOT is consumed.
> For the same reason there is no NUMBER Token.
>
hi,

it works but does not produce the result i need.
this would create the tree
($ .1)
instead i need the tree
($ . 1)

in fact i do not need DOT to be part of the tree. just to display the
difference. ($ 1) would suffice.

.1 is just a float literal
$.1 is a positional notation: "the first element in $"

another reply gave me the hint to check the provided Java and C 
Grammars.
i will check this way.

thanks a lot,
  alphonse


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From abreneliere at telys.com  Mon Jan 20 09:17:18 2003
From: abreneliere at telys.com (anthony_breneliere <abreneliere@telys.com>)
Date: Mon Dec 20 16:15:15 2004
Subject: [antlr-interest] I cannot compile antlr-2.7.2rc2  cpp dll
Message-ID: <b0hauu+m1bm@eGroups.com>


I did the following steps

1. create a new W32 Static Libaray project with the name ANTLR in 
this folder lib\cpp folder, click next
2. check the MFC(it enable the RTTI)
3. and all .cpp .hpp files to the project
4. set the realease, and debug configurea
and ANTLR_EXPORTS to the Preprecessor
5. in file BaseASP.cpp and AST.hpp
modify the 
ANTLR_API AST* const nullASTptr=0; line to 
ANTLR_API AST* nullASTptr=0;

With the 5th step completed, i have no compiling error lefts.

But i have about 25 linking errors and 117 warning.

When compiling a static library i have no error.

The question is : how could i compile the .dll (after having selected 
dynamic dll) ??





 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From abreneliere at telys.com  Mon Jan 20 10:09:16 2003
From: abreneliere at telys.com (anthony_breneliere <abreneliere@telys.com>)
Date: Mon Dec 20 16:15:15 2004
Subject: [antlr-interest] I cannot execute html.exe
Message-ID: <b0he0c+jo33@eGroups.com>

version: antlr 2.7.2rc2
compiler used: VC++ .NET

As a first test with one of the examples, i tried to compile the 
html.exe parser.

I compiled html.exe, from which source code were generated with 
antlr.Tool (java command-line)

I used i static library antlr.lib from the current version (release 
version, 198 ko), imported in the html.exe film

When i execute html.exe, i have the floowing message box:
"html.exe - Unable to Locate Component" as title
"This application has failed to start because antlr.dll was not 
found. Re-installing the application may fix this problem"

The program should not be dependent on a dynamic library (.dll).

I searched for the message in the source code but could not find it.

Any idea about how to fix this problem ?

Cordially,
Anthony


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From parrt at jguru.com  Mon Jan 20 10:18:02 2003
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:15:15 2004
Subject: [antlr-interest] Line numbers
In-Reply-To: <C8B0B2010780F1439E5DAB4FF7DFFFD9010D915C@za-exchange.za.mosaicsoftware.net>
Message-ID: <83269DC0-2CA3-11D7-AACB-000393BB647E@jguru.com>


On Sunday, January 19, 2003, at 09:39 PM, Morne Streicher wrote:

> Dear All
>
> I'm pretty new to compiler theory and parser generators. I've managed 
> to successfully defined a language (and implemented the interpreter as 
> well) using ANTLR. :-)
>
> What I'm doing to interpret the source language is to walk the 
> Abstract Syntax Tree (AST) generated by ANTLR, and "evaluate" that.
>
> The AST generated by the parser however do not include the line and 
> column number for the token it represents. I need that information to 
> customize run-time error messages, i.e. include line numbers.
>
> Has anybody got an (simple) example of how I could do that - extend 
> the .g file to make it include line numbers in the AST class? I 
> believe I'll have to extend the AST class, which is fine.

Hi there.  I believe there was a quick thread previously where I 
decided to add getToken() method to the AST interface and then modify 
the AST factory method create(Token t) to just store the token not pull 
out the text/type and store it.  This way the tree will have a ref to 
the token and you can ask (and my tree parsers can ask) for the line 
number.

The problem will have to way for 2.7.3 as 2.7.2 will be out today I 
think.  The CPP and C# output would not have time to catch and I need 
to think about the problem a bit more.

I would do this yourself until all ANTLR does it. :)

Ter
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org
Lecturer in Comp. Sci., University of San Francisco


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From klaren at cs.utwente.nl  Mon Jan 20 11:23:01 2003
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:15:15 2004
Subject: [antlr-interest] I cannot compile antlr-2.7.2rc2  cpp dll
In-Reply-To: <b0hauu+m1bm@eGroups.com>; from abreneliere@telys.com on Mon, Jan 20, 2003 at 05:17:18PM -0000
References: <b0hauu+m1bm@eGroups.com>
Message-ID: <20030120202300.B11941@cs.utwente.nl>

Hi,

DLL build is mostly broken for MSVC. There are some posts in the archive
that may offer a solution. I recall that using STLPort as STL
implementation fixed a lot of the trouble. YMMV though.

Cheers,

Ric
-- 
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- klaren@cs.utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
  Wit is cultured insolence. --- Aristotle


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From open.zone at virgin.net  Mon Jan 20 11:59:36 2003
From: open.zone at virgin.net (micheal_jor <open.zone@virgin.net>)
Date: Mon Dec 20 16:15:15 2004
Subject: [antlr-interest] Re: Line numbers
In-Reply-To: <83269DC0-2CA3-11D7-AACB-000393BB647E@jguru.com>
Message-ID: <b0hkf8+2eno@eGroups.com>


> Hi there.  I believe there was a quick thread previously where I 
> decided to add getToken() method to the AST interface and then 
modify 
> the AST factory method create(Token t) to just store the token not 
pull 
> out the text/type and store it.  This way the tree will have a ref 
to 
> the token and you can ask (and my tree parsers can ask) for the 
line 
> number.

-1

With large files, the AST consumes lots of memory. More memory than 
I'd like usually. With lots of Token objects hanging around 
indefinitely, the problem would be compounded.

My humble alternatives:

1. Supply a new xxxAST class with ANTLR that overrides initialize
(Token) to copy the line/column/file values from the Token object. 

2. For those who have no memory issues or prefer having the Token 
objects around - Supply another new xxxAST class with ANTLR that has 
getToken() and overrides initialize(Token) to do what you described.

> I would do this yourself until all ANTLR does it. :)

ANTLR already makes it easy to do ;-)

Cheers,

Micheal
  -- "A-Day Near?". The Legion Rejoiced."



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From parrt at jguru.com  Mon Jan 20 12:13:34 2003
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:15:15 2004
Subject: [antlr-interest] Re: Line numbers
In-Reply-To: <b0hkf8+2eno@eGroups.com>
Message-ID: <A6E5D50A-2CB3-11D7-AACB-000393BB647E@jguru.com>


On Monday, January 20, 2003, at 11:59 AM, micheal_jor 
<open.zone@virgin.net> wrote:

>
>> Hi there.  I believe there was a quick thread previously where I
>> decided to add getToken() method to the AST interface and then
> modify
>> the AST factory method create(Token t) to just store the token not
> pull
>> out the text/type and store it.  This way the tree will have a ref
> to
>> the token and you can ask (and my tree parsers can ask) for the
> line
>> number.
>
> -1
>
> With large files, the AST consumes lots of memory. More memory than
> I'd like usually. With lots of Token objects hanging around
> indefinitely, the problem would be compounded.

This was the original reason I didn't just have the AST point at the 
token ;)

>
> My humble alternatives:
>
> 1. Supply a new xxxAST class with ANTLR that overrides initialize
> (Token) to copy the line/column/file values from the Token object.
>
> 2. For those who have no memory issues or prefer having the Token
> objects around - Supply another new xxxAST class with ANTLR that has
> getToken() and overrides initialize(Token) to do what you described.

Problem here is that they all use the AST interface...i'll have to add 
that method (can be dummy for old classes).

Yep, these kinds of things should work.  I'd like to see how i can 
integrate in by default though so that the tree parsers can provide 
meaningful errors.  Right now they don't ;)

>
>> I would do this yourself until all ANTLR does it. :)
>
> ANTLR already makes it easy to do ;-)

:)

Ter
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org
Lecturer in Comp. Sci., University of San Francisco


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From parrt at jguru.com  Mon Jan 20 13:55:08 2003
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:15:15 2004
Subject: [antlr-interest] 2.7.2 released: get it while it's hot!
Message-ID: <D767618D-2CC1-11D7-AACB-000393BB647E@jguru.com>

Folks,

Well, it only took a few years, but ANTLR 2.7.2 with lots of 
enhancements and bug fixes is ready for your enjoyment at 
http://www.antlr.org/download

-rw-r--r--    1 parrt    parrt     1557051 Jan 20 13:11 
antlr-2.7.2.tar.gz
-rw-r--r--    1 parrt    parrt     1943296 Jan 20 13:12 antlr-2.7.2.zip

Thanks goes to all of you for using ANTLR and for those maniacs that 
help(ed) implement it:

John Lilly helped build lots of the early version
C++ code generator by Peter Wells and Ric Klaren
C# code generation by Micheal Jordan, Kunle Odutola and Anthony 
Oguntimehin.
Infrastructure support from Perforce: The world's best source code 
control system
Substantial intellectual effort donated by
      Loring Craymer
      Monty Zukowski
      Jim Coker
      Scott Stanchfield
      John Mitchell
      Chapman Flack
Source changes for Eclipse and NetBeans by
      Marco van Meegen
      Brian Smith
Lots of little patches and stuff from the ANTLR community

The future: well, lots of little things like real UNICODE char set 
support and so on, but the big thing is a completely rebuilt web site 
(desperately needed).  I am paying to have it graphically designed and 
then I'll build a dynamic site based upon my experience implementing 
jGuru.  Lots of cool ideas :)

I'm also working on my CS652 programming languages course for 
USF...you'll be able to follow along with the class by following my 
lecture notes. :)

Terence
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org
Lecturer in Comp. Sci., University of San Francisco


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From djplists at arrowsash.com  Mon Jan 20 15:49:19 2003
From: djplists at arrowsash.com (David Penton)
Date: Mon Dec 20 16:15:15 2004
Subject: [antlr-interest] exceeding java class size limits with my lexer
Message-ID: <1043106560.1762.20.camel@linux2>

Hello all.  I just made my lexer too big to handle in java. I got a
ClassFormatError because the generated class size is greater than 65535
bytes.  As far as I know that's a limit that cannot be circumvented,
although I may be wrong about that. I actually did not know about the
limit until my antlr project ran into it.  I am sitting here fuming
about it.  If it really is a hard and fast limitation to java, I am
pissed off about it and will consider going back to C++.  Or maybe I
should just use SNOBOL after all. Har.

Reason the lexer is so damned big is that I am trying to get it to
handle the lexical parts of the XML 1.0 specification with its large set
of unicode character possibilities.  One of my design goals is to
preserve the EBNF productions in the XML 1.0 specification with as
little modification as possible. If I have to I will abandon the I18N
aspect, but I would like to avoid that. 

Does antlr have any kind of option similar to other parser/lexer
generators to reduce the size of the generated lexer, say by trading
size for speed? The 2.7.1 manual says that version has been optimized to
reduce size for unicode Or, is there anything else I can do to avoid
this problem? Am I overlooking a command line arg or something?

Thanks a whole bunch.

- Dave -




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From parrt at jguru.com  Mon Jan 20 15:55:13 2003
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:15:15 2004
Subject: [antlr-interest] exceeding java class size limits with my lexer
In-Reply-To: <1043106560.1762.20.camel@linux2>
Message-ID: <9DE5A4E0-2CD2-11D7-AACB-000393BB647E@jguru.com>

Dave,

Grab 2.7.2, just came out today.  It will remove this problem I 
believe.  I changed the way I generate the bit sets, which is what was 
pissing off Java.

Let us know if it solves the problem. :)

Terence

On Monday, January 20, 2003, at 03:49 PM, David Penton wrote:

> Hello all.  I just made my lexer too big to handle in java. I got a
> ClassFormatError because the generated class size is greater than 65535
> bytes.  As far as I know that's a limit that cannot be circumvented,
> although I may be wrong about that. I actually did not know about the
> limit until my antlr project ran into it.  I am sitting here fuming
> about it.  If it really is a hard and fast limitation to java, I am
> pissed off about it and will consider going back to C++.  Or maybe I
> should just use SNOBOL after all. Har.
>
> Reason the lexer is so damned big is that I am trying to get it to
> handle the lexical parts of the XML 1.0 specification with its large 
> set
> of unicode character possibilities.  One of my design goals is to
> preserve the EBNF productions in the XML 1.0 specification with as
> little modification as possible. If I have to I will abandon the I18N
> aspect, but I would like to avoid that.
>
> Does antlr have any kind of option similar to other parser/lexer
> generators to reduce the size of the generated lexer, say by trading
> size for speed? The 2.7.1 manual says that version has been optimized 
> to
> reduce size for unicode Or, is there anything else I can do to avoid
> this problem? Am I overlooking a command line arg or something?
>
> Thanks a whole bunch.
>
> - Dave -
>
>
>
>
>
>
> Your use of Yahoo! Groups is subject to 
> http://docs.yahoo.com/info/terms/
>
>
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org
Lecturer in Comp. Sci., University of San Francisco


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From djplists at arrowsash.com  Mon Jan 20 17:40:46 2003
From: djplists at arrowsash.com (David Penton)
Date: Mon Dec 20 16:15:15 2004
Subject: [antlr-interest] exceeding java class size limits with my lexer
In-Reply-To: <9DE5A4E0-2CD2-11D7-AACB-000393BB647E@jguru.com>
References: <9DE5A4E0-2CD2-11D7-AACB-000393BB647E@jguru.com>
Message-ID: <1043113247.2839.1.camel@linux2>

Thanks - I'll try that.

On Mon, 2003-01-20 at 18:55, Terence Parr wrote:
> Dave,
> 
> Grab 2.7.2, just came out today.  It will remove this problem I 
> believe.  I changed the way I generate the bit sets, which is what was 
> pissing off Java.
> 
> Let us know if it solves the problem. :)
> 
> Terence
> 
> On Monday, January 20, 2003, at 03:49 PM, David Penton wrote:
> 
> > Hello all.  I just made my lexer too big to handle in java. I got a
> > ClassFormatError because the generated class size is greater than 65535
> > bytes.  As far as I know that's a limit that cannot be circumvented,
> > although I may be wrong about that. I actually did not know about the
> > limit until my antlr project ran into it.  I am sitting here fuming
> > about it.  If it really is a hard and fast limitation to java, I am
> > pissed off about it and will consider going back to C++.  Or maybe I
> > should just use SNOBOL after all. Har.
> >
> > Reason the lexer is so damned big is that I am trying to get it to
> > handle the lexical parts of the XML 1.0 specification with its large 
> > set
> > of unicode character possibilities.  One of my design goals is to
> > preserve the EBNF productions in the XML 1.0 specification with as
> > little modification as possible. If I have to I will abandon the I18N
> > aspect, but I would like to avoid that.
> >
> > Does antlr have any kind of option similar to other parser/lexer
> > generators to reduce the size of the generated lexer, say by trading
> > size for speed? The 2.7.1 manual says that version has been optimized 
> > to
> > reduce size for unicode Or, is there anything else I can do to avoid
> > this problem? Am I overlooking a command line arg or something?
> >
> > Thanks a whole bunch.
> >
> > - Dave -
> >
> >
> >
> >
> >
> >
> > Your use of Yahoo! Groups is subject to 
> > http://docs.yahoo.com/info/terms/
> >
> >
> --
> Co-founder, http://www.jguru.com
> Creator, ANTLR Parser Generator: http://www.antlr.org
> Lecturer in Comp. Sci., University of San Francisco
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 
> 
> 



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From rmsanjivp at yahoo.com  Mon Jan 20 18:24:52 2003
From: rmsanjivp at yahoo.com (rmsanjivp <rmsanjivp@yahoo.com>)
Date: Mon Dec 20 16:15:15 2004
Subject: [antlr-interest] Is it because of buggy antlr?
Message-ID: <b0ib1k+892b@eGroups.com>

Consider the following rules:

expr
 : e1 (PLUS | MINUS e1)*
 ;

e1
 : e0 ( POWER e1)? // to make POWER tree as right associative
 ;

e0: ID;


For the following parser the generated code in C++ when compiled and 
run gives unexpected token for input "P1 + p2"

If the right associative part is changed to

e1
 : e0 ( POWER e0)*
 ;

then all works fine except that the operator POWER is treated as 
right associative.

Any idea how to make an operator left associative?

Thanks,
Sanjiv


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From luke.evans at seagatesoftware.com  Mon Jan 20 18:39:24 2003
From: luke.evans at seagatesoftware.com (Luke Evans)
Date: Mon Dec 20 16:15:15 2004
Subject: [antlr-interest] 2.7.2 released: get it while it's hot!
Message-ID: <A399661DAF14DA46AAB21B088F3887DC066DDE87@vanent14.crystald.net>

Congratulations Terence (and all those cited in the announcement).  
Antlr is a fantastic tool, and I just wanted to add my personal thanks to
this little community of people.

Here's to a bright future for Antlr.  May it slay many more dragons in its
illustrious career!

Luke

> ----------
> From: 	Terence Parr
> Reply To: 	antlr-interest@yahoogroups.com
> Sent: 	Monday, January 20, 2003 1:55 PM
> To: 	antlr-interest@yahoogroups.com
> Subject: 	[antlr-interest] 2.7.2 released: get it while it's hot!
> 
> Folks,
> 
> Well, it only took a few years, but ANTLR 2.7.2 with lots of 
> enhancements and bug fixes is ready for your enjoyment at 
> http://www.antlr.org/download
> 
> -rw-r--r--    1 parrt    parrt     1557051 Jan 20 13:11 
> antlr-2.7.2.tar.gz
> -rw-r--r--    1 parrt    parrt     1943296 Jan 20 13:12 antlr-2.7.2.zip
> 
> Thanks goes to all of you for using ANTLR and for those maniacs that 
> help(ed) implement it:
> 
> John Lilly helped build lots of the early version
> C++ code generator by Peter Wells and Ric Klaren
> C# code generation by Micheal Jordan, Kunle Odutola and Anthony 
> Oguntimehin.
> Infrastructure support from Perforce: The world's best source code 
> control system
> Substantial intellectual effort donated by
>       Loring Craymer
>       Monty Zukowski
>       Jim Coker
>       Scott Stanchfield
>       John Mitchell
>       Chapman Flack
> Source changes for Eclipse and NetBeans by
>       Marco van Meegen
>       Brian Smith
> Lots of little patches and stuff from the ANTLR community
> 
> The future: well, lots of little things like real UNICODE char set 
> support and so on, but the big thing is a completely rebuilt web site 
> (desperately needed).  I am paying to have it graphically designed and 
> then I'll build a dynamic site based upon my experience implementing 
> jGuru.  Lots of cool ideas :)
> 
> I'm also working on my CS652 programming languages course for 
> USF...you'll be able to follow along with the class by following my 
> lecture notes. :)
> 
> Terence
> --
> Co-founder, http://www.jguru.com
> Creator, ANTLR Parser Generator: http://www.antlr.org
> Lecturer in Comp. Sci., University of San Francisco
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 
> 
> 
> 

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From lgc at mail1.jpl.nasa.gov  Mon Jan 20 21:34:08 2003
From: lgc at mail1.jpl.nasa.gov (lgcraymer <lgc@mail1.jpl.nasa.gov>)
Date: Mon Dec 20 16:15:15 2004
Subject: [antlr-interest] Re: Is it because of buggy antlr?
In-Reply-To: <b0ib1k+892b@eGroups.com>
Message-ID: <b0im4g+gsqp@eGroups.com>

Sanjiv--

Actually, there is a bug in your grammar.  Change expr to

expr
   :
   e1 ( ( PLUS | MINUS ) e1 )*
   ;


and it might work.  "|" separates alternative blocks so that your 
version gives

expr
   :
   e1
   (      PLUS
   |      MINUS e1
   )+
   ;
so that P1 - p2 would work, but not P1 + p2.

--Loring

--- In antlr-interest@yahoogroups.com, "rmsanjivp <rmsanjivp@y...>" 
<rmsanjivp@y...> wrote:
> Consider the following rules:
> 
> expr
>  : e1 (PLUS | MINUS e1)*
>  ;
> 
> e1
>  : e0 ( POWER e1)? // to make POWER tree as right associative
>  ;
> 
> e0: ID;
> 
> 
> For the following parser the generated code in C++ when compiled and 
> run gives unexpected token for input "P1 + p2"
> 
> If the right associative part is changed to
> 
> e1
>  : e0 ( POWER e0)*
>  ;
> 
> then all works fine except that the operator POWER is treated as 
> right associative.
> 
> Any idea how to make an operator left associative?
> 
> Thanks,
> Sanjiv


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From rmsanjivp at yahoo.com  Mon Jan 20 21:44:15 2003
From: rmsanjivp at yahoo.com (rmsanjivp <rmsanjivp@yahoo.com>)
Date: Mon Dec 20 16:15:15 2004
Subject: [antlr-interest] Re: Is it because of buggy antlr?
In-Reply-To: <b0im4g+gsqp@eGroups.com>
Message-ID: <b0imnf+50bh@eGroups.com>

Thanks Loring,

But that was a typo from my side. I really had hard time figuring 
out the problem with the following grammar:


expr
 : e1 ((PLUS | MINUS) e1)*
 ;
 
 e1
  : e0 ( POWER e1)? // to make POWER tree as right associative
  ;

e0: ID;

If it is a small example like this then it works fine because in the 
c++ code generated by ANTLR does not throw an exception if the next 
token is the EOF.

But I have a grammar where I have a number of tokens and at least 11 
levels of descent like..

e1: e2 (OP1 e2)*;
e2: e3 (OP2 e3)*
...
e10: e11 (OP10 e10)?;
e11: ID;

On Observing the code generated for this bug grammar I figured out 
that in the method for rule e10 an exception is thrown if the next 
lookahead symbol is not any of OP1, op2, ..., OP10. Even when rule 
e11 can lead to the terminal the method for rule e10 throws an 
exception for EOF. And if I have "p1+p2" as an input then it 
recognizes upto p2 but then in rule e10 the next look ahead is EOF 
and hence it throws an exception.

Could anyone please throw some light on such behavior?

thanks,
Sanjiv




--- In antlr-interest@yahoogroups.com, "lgcraymer <lgc@m...>" 
<lgc@m...> wrote:
> Sanjiv--
> 
> Actually, there is a bug in your grammar.  Change expr to
> 
> expr
>    :
>    e1 ( ( PLUS | MINUS ) e1 )*
>    ;
> 
> 
> and it might work.  "|" separates alternative blocks so that your 
> version gives
> 
> expr
>    :
>    e1
>    (      PLUS
>    |      MINUS e1
>    )+
>    ;
> so that P1 - p2 would work, but not P1 + p2.
> 
> --Loring
> 
> --- In antlr-interest@yahoogroups.com, "rmsanjivp 
<rmsanjivp@y...>" 
> <rmsanjivp@y...> wrote:
> > Consider the following rules:
> > 
> > expr
> >  : e1 (PLUS | MINUS e1)*
> >  ;
> > 
> > e1
> >  : e0 ( POWER e1)? // to make POWER tree as right associative
> >  ;
> > 
> > e0: ID;
> > 
> > 
> > For the following parser the generated code in C++ when compiled 
and 
> > run gives unexpected token for input "P1 + p2"
> > 
> > If the right associative part is changed to
> > 
> > e1
> >  : e0 ( POWER e0)*
> >  ;
> > 
> > then all works fine except that the operator POWER is treated as 
> > right associative.
> > 
> > Any idea how to make an operator left associative?
> > 
> > Thanks,
> > Sanjiv


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From parrt at jguru.com  Mon Jan 20 22:43:35 2003
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:15:15 2004
Subject: [antlr-interest] Re: Is it because of buggy antlr?
In-Reply-To: <b0imnf+50bh@eGroups.com>
Message-ID: <AA03F659-2D0B-11D7-AACB-000393BB647E@jguru.com>


On Monday, January 20, 2003, at 09:44 PM, rmsanjivp 
<rmsanjivp@yahoo.com> wrote:

> Thanks Loring,
>
> But that was a typo from my side. I really had hard time figuring
> out the problem with the following grammar:
>
>
> expr
>  : e1 ((PLUS | MINUS) e1)*
>  ;
>
>  e1
>   : e0 ( POWER e1)? // to make POWER tree as right associative
>   ;
>
> e0: ID;
>
> If it is a small example like this then it works fine because in the
> c++ code generated by ANTLR does not throw an exception if the next
> token is the EOF.

EOF is added to FOLLOW any rule that is not referenced by any other 
rule...it is by definition a possible start rule.

>
> But I have a grammar where I have a number of tokens and at least 11
> levels of descent like..
>
> e1: e2 (OP1 e2)*;
> e2: e3 (OP2 e3)*
> ...
> e10: e11 (OP10 e10)?;
> e11: ID;
>
> On Observing the code generated for this bug grammar I figured out
> that in the method for rule e10 an exception is thrown if the next
> lookahead symbol is not any of OP1, op2, ..., OP10.

because FOLLOW(e10) is FOLLOW(e9) ... to FOLLOW(e1), which may be EOF.

>  Even when rule
> e11 can lead to the terminal the method for rule e10 throws an
> exception for EOF. And if I have "p1+p2" as an input then it
> recognizes upto p2 but then in rule e10 the next look ahead is EOF
> and hence it throws an exception.

What is the start symbol for parsing "p1+p2"?

Ter
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org
Lecturer in Comp. Sci., University of San Francisco


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From weberjn at yahoo.com  Tue Jan 21 08:00:22 2003
From: weberjn at yahoo.com (weberjn <weberjn@yahoo.com>)
Date: Mon Dec 20 16:15:15 2004
Subject: [antlr-interest] semantic predicate does not work
Message-ID: <b0jqqm+mips@eGroups.com>

Hi,

on Terence Parr's Getting Started With ANTLR there is a rule with
a semantic predicate

startRule
    :   n:NAME
        {System.out.println("Hi there, "+n.getText());};



I tried to insert something like that into the IDL grammar:

module
	:    "module" 	
	     d1:identifier 
         {System.out.println("found identifier "+d1.getText());}
 	     LCURLY definition_list RCURLY
	;


but the java compile complains of 

   [javac] C:\myjava\antlridl\gensrc\IDLParser.java:268: cannot
resolve symbol
   [javac] symbol  : variable d1
   [javac] location: class IDLParser
   [javac]                     System.out.println("found identifier
"+d1.getText());


What is the trick?

Thanks for any hints,
Juergen



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From mzukowski at yci.com  Tue Jan 21 08:46:43 2003
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:15:15 2004
Subject: [antlr-interest] Re: ambiguous grammar
Message-ID: <170826586F3BD511910D0200C110AAA805402101@memail03.bco-home.com>

The easiest way to get the tree you want will be to modify your lexer to
remember that you just saw a $ and that you need to produce DOT, not FLOAT.
"Lexer states" is one approach to this (see docs).  Another would be to use
semantic predicates in the lexer.

Monty

-----Original Message-----
From: beeh1973 <hastur4711@bigfoot.com> [mailto:hastur4711@bigfoot.com]
Sent: Monday, January 20, 2003 7:23 AM
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] Re: ambiguous grammar


--- In antlr-interest@yahoogroups.com, Anakreon Mejdi <amejdi@e...> 
wrote:
>   component:
>     DOLLAR^ FLOAT
>     ;
> This should work.
> There is no DOT because in the NUMBER rule if an DIGIT is matched 
the 
> type is made FLOAT and the DOT is consumed.
> For the same reason there is no NUMBER Token.
>
hi,

it works but does not produce the result i need.
this would create the tree
($ .1)
instead i need the tree
($ . 1)

in fact i do not need DOT to be part of the tree. just to display the
difference. ($ 1) would suffice.

.1 is just a float literal
$.1 is a positional notation: "the first element in $"

another reply gave me the hint to check the provided Java and C 
Grammars.
i will check this way.

thanks a lot,
  alphonse


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From mzukowski at yci.com  Tue Jan 21 09:10:41 2003
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:15:15 2004
Subject: [antlr-interest] semantic predicate does not work
Message-ID: <170826586F3BD511910D0200C110AAA805402102@memail03.bco-home.com>

Try putting spaces between your operators, like 
{System.out.println("found identifier " + d1.getText());}

Does that work?

Monty


-----Original Message-----
From: weberjn <weberjn@yahoo.com> [mailto:weberjn@yahoo.com]
Sent: Tuesday, January 21, 2003 8:00 AM
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] semantic predicate does not work


Hi,

on Terence Parr's Getting Started With ANTLR there is a rule with
a semantic predicate

startRule
    :   n:NAME
        {System.out.println("Hi there, "+n.getText());};



I tried to insert something like that into the IDL grammar:

module
	:    "module" 	
	     d1:identifier 
         {System.out.println("found identifier "+d1.getText());}
 	     LCURLY definition_list RCURLY
	;


but the java compile complains of 

   [javac] C:\myjava\antlridl\gensrc\IDLParser.java:268: cannot
resolve symbol
   [javac] symbol  : variable d1
   [javac] location: class IDLParser
   [javac]                     System.out.println("found identifier
"+d1.getText());


What is the trick?

Thanks for any hints,
Juergen



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From mzukowski at yci.com  Tue Jan 21 09:12:12 2003
From: mzukowski at yci.com (Zukowski, Monty)
Date: Mon Dec 20 16:15:15 2004
Subject: [antlr-interest] Re: Is it because of buggy antlr?
Message-ID: <170826586F3BD511910D0200C110AAA805402103@memail03.bco-home.com>

You can't just call a rule out of the blue if it is not a start rule.  Easy
enough to fix, just make a new rule that's not referenced by anything else:

topLevelExpr: expr;

Monty

-----Original Message-----
From: rmsanjivp <rmsanjivp@yahoo.com> [mailto:rmsanjivp@yahoo.com]
Sent: Monday, January 20, 2003 9:44 PM
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] Re: Is it because of buggy antlr?


Thanks Loring,

But that was a typo from my side. I really had hard time figuring 
out the problem with the following grammar:


expr
 : e1 ((PLUS | MINUS) e1)*
 ;
 
 e1
  : e0 ( POWER e1)? // to make POWER tree as right associative
  ;

e0: ID;

If it is a small example like this then it works fine because in the 
c++ code generated by ANTLR does not throw an exception if the next 
token is the EOF.

But I have a grammar where I have a number of tokens and at least 11 
levels of descent like..

e1: e2 (OP1 e2)*;
e2: e3 (OP2 e3)*
...
e10: e11 (OP10 e10)?;
e11: ID;

On Observing the code generated for this bug grammar I figured out 
that in the method for rule e10 an exception is thrown if the next 
lookahead symbol is not any of OP1, op2, ..., OP10. Even when rule 
e11 can lead to the terminal the method for rule e10 throws an 
exception for EOF. And if I have "p1+p2" as an input then it 
recognizes upto p2 but then in rule e10 the next look ahead is EOF 
and hence it throws an exception.

Could anyone please throw some light on such behavior?

thanks,
Sanjiv




--- In antlr-interest@yahoogroups.com, "lgcraymer <lgc@m...>" 
<lgc@m...> wrote:
> Sanjiv--
> 
> Actually, there is a bug in your grammar.  Change expr to
> 
> expr
>    :
>    e1 ( ( PLUS | MINUS ) e1 )*
>    ;
> 
> 
> and it might work.  "|" separates alternative blocks so that your 
> version gives
> 
> expr
>    :
>    e1
>    (      PLUS
>    |      MINUS e1
>    )+
>    ;
> so that P1 - p2 would work, but not P1 + p2.
> 
> --Loring
> 
> --- In antlr-interest@yahoogroups.com, "rmsanjivp 
<rmsanjivp@y...>" 
> <rmsanjivp@y...> wrote:
> > Consider the following rules:
> > 
> > expr
> >  : e1 (PLUS | MINUS e1)*
> >  ;
> > 
> > e1
> >  : e0 ( POWER e1)? // to make POWER tree as right associative
> >  ;
> > 
> > e0: ID;
> > 
> > 
> > For the following parser the generated code in C++ when compiled 
and 
> > run gives unexpected token for input "P1 + p2"
> > 
> > If the right associative part is changed to
> > 
> > e1
> >  : e0 ( POWER e0)*
> >  ;
> > 
> > then all works fine except that the operator POWER is treated as 
> > right associative.
> > 
> > Any idea how to make an operator left associative?
> > 
> > Thanks,
> > Sanjiv


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From ericsmith at windsor.com  Tue Jan 21 09:25:57 2003
From: ericsmith at windsor.com (Smith, Eric V.)
Date: Mon Dec 20 16:15:15 2004
Subject: [antlr-interest] semantic predicate does not work
Message-ID: <1D532F5C75B30A46A78D5107B635DF890E281F@edzell.windsor.com>

Doesn't it need to be
  d1=identifier 
since it's a non-terminal?

> -----Original Message-----
> From: mzukowski@yci.com [mailto:mzukowski@yci.com] 
> Sent: Tuesday, January 21, 2003 12:11 PM
> To: antlr-interest@yahoogroups.com
> Subject: RE: [antlr-interest] semantic predicate does not work
> 
> 
> Try putting spaces between your operators, like 
> {System.out.println("found identifier " + d1.getText());}
> 
> Does that work?
> 
> Monty
> 
> 
> -----Original Message-----
> From: weberjn <weberjn@yahoo.com> [mailto:weberjn@yahoo.com]
> Sent: Tuesday, January 21, 2003 8:00 AM
> To: antlr-interest@yahoogroups.com
> Subject: [antlr-interest] semantic predicate does not work
> 
> 
> Hi,
> 
> on Terence Parr's Getting Started With ANTLR there is a rule with
> a semantic predicate
> 
> startRule
>     :   n:NAME
>         {System.out.println("Hi there, "+n.getText());};
> 
> 
> 
> I tried to insert something like that into the IDL grammar:
> 
> module
> 	:    "module" 	
> 	     d1:identifier 
>          {System.out.println("found identifier "+d1.getText());}
>  	     LCURLY definition_list RCURLY
> 	;
> 
> 
> but the java compile complains of 
> 
>    [javac] C:\myjava\antlridl\gensrc\IDLParser.java:268: cannot
> resolve symbol
>    [javac] symbol  : variable d1
>    [javac] location: class IDLParser
>    [javac]                     System.out.println("found identifier
> "+d1.getText());
> 
> 
> What is the trick?
> 
> Thanks for any hints,
> Juergen
> 
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to 
> http://docs.yahoo.com/info/terms/ 
> 
> 
>  
> 
> Your use of Yahoo! 
> Groups is subject to http://docs.yahoo.com/info/terms/ 
> 
> 
> 

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From mzukowski at yci.com  Tue Jan 21 09:29:36 2003
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:15:15 2004
Subject: [antlr-interest] semantic predicate does not work
Message-ID: <170826586F3BD511910D0200C110AAA805402105@memail03.bco-home.com>

Doh!  You're right.  Still waking up here....

Thanks Eric!

Monty

-----Original Message-----
From: Smith, Eric V. [mailto:ericsmith@windsor.com]
Sent: Tuesday, January 21, 2003 9:26 AM
To: antlr-interest@yahoogroups.com
Subject: RE: [antlr-interest] semantic predicate does not work


Doesn't it need to be
  d1=identifier 
since it's a non-terminal?

> -----Original Message-----
> From: mzukowski@yci.com [mailto:mzukowski@yci.com] 
> Sent: Tuesday, January 21, 2003 12:11 PM
> To: antlr-interest@yahoogroups.com
> Subject: RE: [antlr-interest] semantic predicate does not work
> 
> 
> Try putting spaces between your operators, like 
> {System.out.println("found identifier " + d1.getText());}
> 
> Does that work?
> 
> Monty
> 
> 
> -----Original Message-----
> From: weberjn <weberjn@yahoo.com> [mailto:weberjn@yahoo.com]
> Sent: Tuesday, January 21, 2003 8:00 AM
> To: antlr-interest@yahoogroups.com
> Subject: [antlr-interest] semantic predicate does not work
> 
> 
> Hi,
> 
> on Terence Parr's Getting Started With ANTLR there is a rule with
> a semantic predicate
> 
> startRule
>     :   n:NAME
>         {System.out.println("Hi there, "+n.getText());};
> 
> 
> 
> I tried to insert something like that into the IDL grammar:
> 
> module
> 	:    "module" 	
> 	     d1:identifier 
>          {System.out.println("found identifier "+d1.getText());}
>  	     LCURLY definition_list RCURLY
> 	;
> 
> 
> but the java compile complains of 
> 
>    [javac] C:\myjava\antlridl\gensrc\IDLParser.java:268: cannot
> resolve symbol
>    [javac] symbol  : variable d1
>    [javac] location: class IDLParser
>    [javac]                     System.out.println("found identifier
> "+d1.getText());
> 
> 
> What is the trick?
> 
> Thanks for any hints,
> Juergen
> 
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to 
> http://docs.yahoo.com/info/terms/ 
> 
> 
>  
> 
> Your use of Yahoo! 
> Groups is subject to http://docs.yahoo.com/info/terms/ 
> 
> 
> 

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From open.zone at virgin.net  Tue Jan 21 09:31:53 2003
From: open.zone at virgin.net (micheal_jor <open.zone@virgin.net>)
Date: Mon Dec 20 16:15:15 2004
Subject: [antlr-interest] Does ANTLR TreeParsing [still] have these "flaws"?
Message-ID: <b0k069+u3is@eGroups.com>

Hi,

I came across this piece on flaws with ANTLR TreeParsers on my 
travels and wondered if anyone had an opinion.

http://www.cc.gatech.edu/classes/AY2000/cs4240_fall/ANTLR_Patch/

Cheers!,

Micheal
  -- ANTLR: "A Nible Tool. Lucid Parsing." 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From mzukowski at yci.com  Tue Jan 21 09:32:34 2003
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:15:15 2004
Subject: [antlr-interest] Re: Short circuit of the lexer
Message-ID: <170826586F3BD511910D0200C110AAA805402106@memail03.bco-home.com>

Yes, you should follow the LA() discipline.  You probably need to switch
into your custom array lexer, gobble the array, then switch back to the
other lexer and reset the lookahead buffer to clear out any cached values.
Inspect the code and ask specific questions, I don't have the time to go
spelunking right now....

Monty

-----Original Message-----
From: xadeck <decoret@graphics.lcs.mit.edu>
[mailto:decoret@graphics.lcs.mit.edu]
Sent: Saturday, January 18, 2003 2:40 PM
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] Re: Short circuit of the lexer


--- In antlr-interest@yahoogroups.com, Terence Parr <parrt@j...> 
> 
> Are you using the latest 2.7.2 stuff or 2.7.1?  I think 2.7.2 is faster 
> :)

Of course I am ;-)

> 
> Also, (INT)* is definitely more efficient than the tail recursion you 
> are using.  just add the action within the loop:
> 
> ( i:INT {result.push_back(atoi(i->getText().c_str()));} )*
> 
> Put that in rule decl instead of referring to values and you should be 
> good to go.  Let me know if this works.  The tail recursion will build 
> a HUGE stack of method invocation records if you have 180k lines...very 
> very inefficient.  Try the loop :)
> 

Well, I switch from tail recursion to list and it is still slow. I
wrote a dummy version of my grammar keeping only the array stuff and I
t is quite pretty fast (10s for a test file) but when I add more
recognition token to the lexer it gets slower (30s) and when I use my
full grammar without any action (so C++ extra code cannot be
involved), it get quite slow (1m30 to 2min) and it even seems the tail
recursion is faster ?!?.

I am trying to figure out what is going one -> will investigate) cause
I know such files can be parsed pretty fast with antlr (I have seen
examples but I cannot use their grammar). I can send the full grammar
but it is pretty long (VRML2 grammar) and you would need the associate
library to compile it. I guess you have something else to do than
debugging other people's grammar.

Anyway, the original questions still holds for curiosity: will
Lexer::LA() be messed if I screw up the input stream within
lexer::nextToken()?

And by the way, thanks for the help.


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From mzukowski at yci.com  Tue Jan 21 09:35:33 2003
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:15:15 2004
Subject: [antlr-interest] Does ANTLR TreeParsing [still] have these "f
	laws"?
Message-ID: <170826586F3BD511910D0200C110AAA805402107@memail03.bco-home.com>

Those aren't flaws, they are design decisions.  The author of that page
followed the design to customize his ASTs to do what he needed, just as I
did in the GCC translator framework http://www.codetransform.com/gcc.html.

Monty

-----Original Message-----
From: micheal_jor <open.zone@virgin.net> [mailto:open.zone@virgin.net]
Sent: Tuesday, January 21, 2003 9:32 AM
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] Does ANTLR TreeParsing [still] have these
"flaws"?


Hi,

I came across this piece on flaws with ANTLR TreeParsers on my 
travels and wondered if anyone had an opinion.

http://www.cc.gatech.edu/classes/AY2000/cs4240_fall/ANTLR_Patch/

Cheers!,

Micheal
  -- ANTLR: "A Nible Tool. Lucid Parsing." 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From rmsanjivp at yahoo.com  Tue Jan 21 09:42:25 2003
From: rmsanjivp at yahoo.com (rmsanjivp <rmsanjivp@yahoo.com>)
Date: Mon Dec 20 16:15:15 2004
Subject: [antlr-interest] Re: Is it because of buggy antlr?
In-Reply-To: <170826586F3BD511910D0200C110AAA805402103@memail03.bco-home.com>
Message-ID: <b0k0q1+9fn8@eGroups.com>

Thanks,

That solves my problem. Thanks to Ter also for his valuable peice of 
advice.

Sanjiv

--- In antlr-interest@yahoogroups.com, "Zukowski, Monty" 
<mzukowski@y...> wrote:
> You can't just call a rule out of the blue if it is not a start 
rule.  Easy
> enough to fix, just make a new rule that's not referenced by 
anything else:
> 
> topLevelExpr: expr;
> 
> Monty
> 
> -----Original Message-----
> From: rmsanjivp <rmsanjivp@y...> [mailto:rmsanjivp@y...]
> Sent: Monday, January 20, 2003 9:44 PM
> To: antlr-interest@yahoogroups.com
> Subject: [antlr-interest] Re: Is it because of buggy antlr?
> 
> 
> Thanks Loring,
> 
> But that was a typo from my side. I really had hard time figuring 
> out the problem with the following grammar:
> 
> 
> expr
>  : e1 ((PLUS | MINUS) e1)*
>  ;
>  
>  e1
>   : e0 ( POWER e1)? // to make POWER tree as right associative
>   ;
> 
> e0: ID;
> 
> If it is a small example like this then it works fine because in 
the 
> c++ code generated by ANTLR does not throw an exception if the next 
> token is the EOF.
> 
> But I have a grammar where I have a number of tokens and at least 
11 
> levels of descent like..
> 
> e1: e2 (OP1 e2)*;
> e2: e3 (OP2 e3)*
> ...
> e10: e11 (OP10 e10)?;
> e11: ID;
> 
> On Observing the code generated for this bug grammar I figured out 
> that in the method for rule e10 an exception is thrown if the next 
> lookahead symbol is not any of OP1, op2, ..., OP10. Even when rule 
> e11 can lead to the terminal the method for rule e10 throws an 
> exception for EOF. And if I have "p1+p2" as an input then it 
> recognizes upto p2 but then in rule e10 the next look ahead is EOF 
> and hence it throws an exception.
> 
> Could anyone please throw some light on such behavior?
> 
> thanks,
> Sanjiv
> 
> 
> 
> 
> --- In antlr-interest@yahoogroups.com, "lgcraymer <lgc@m...>" 
> <lgc@m...> wrote:
> > Sanjiv--
> > 
> > Actually, there is a bug in your grammar.  Change expr to
> > 
> > expr
> >    :
> >    e1 ( ( PLUS | MINUS ) e1 )*
> >    ;
> > 
> > 
> > and it might work.  "|" separates alternative blocks so that your 
> > version gives
> > 
> > expr
> >    :
> >    e1
> >    (      PLUS
> >    |      MINUS e1
> >    )+
> >    ;
> > so that P1 - p2 would work, but not P1 + p2.
> > 
> > --Loring
> > 
> > --- In antlr-interest@yahoogroups.com, "rmsanjivp 
> <rmsanjivp@y...>" 
> > <rmsanjivp@y...> wrote:
> > > Consider the following rules:
> > > 
> > > expr
> > >  : e1 (PLUS | MINUS e1)*
> > >  ;
> > > 
> > > e1
> > >  : e0 ( POWER e1)? // to make POWER tree as right associative
> > >  ;
> > > 
> > > e0: ID;
> > > 
> > > 
> > > For the following parser the generated code in C++ when 
compiled 
> and 
> > > run gives unexpected token for input "P1 + p2"
> > > 
> > > If the right associative part is changed to
> > > 
> > > e1
> > >  : e0 ( POWER e0)*
> > >  ;
> > > 
> > > then all works fine except that the operator POWER is treated 
as 
> > > right associative.
> > > 
> > > Any idea how to make an operator left associative?
> > > 
> > > Thanks,
> > > Sanjiv
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to 
http://docs.yahoo.com/info/terms/


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From rmsanjivp at yahoo.com  Tue Jan 21 09:45:50 2003
From: rmsanjivp at yahoo.com (rmsanjivp <rmsanjivp@yahoo.com>)
Date: Mon Dec 20 16:15:15 2004
Subject: [antlr-interest] Multiple lexers and parsers in one grammar file
Message-ID: <b0k10e+4m9k@eGroups.com>

Hi!

THe documentation for 2.7.1 shows that we can have multiple lexer and 
parser classes in one grammar file. But when I try to write two lexer 
classes and two parser classes in a file I get the error while 
generating the code that the grammar file may have only one lexer or 
parser.

Is it not possible to have multiple lexer and parser classes in one 
grammar file?

Thanks,
Sanjiv


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From open.zone at virgin.net  Tue Jan 21 10:39:44 2003
From: open.zone at virgin.net (micheal_jor <open.zone@virgin.net>)
Date: Mon Dec 20 16:15:15 2004
Subject: [antlr-interest] Re: Does ANTLR TreeParsing [still] have these "f laws"?
In-Reply-To: <170826586F3BD511910D0200C110AAA805402107@memail03.bco-home.com>
Message-ID: <b0k45g+nin4@eGroups.com>

--- In antlr-interest@yahoogroups.com, mzukowski@y... wrote:
> Those aren't flaws, they are design decisions.

I thought that might be the case (hence the quotes "flaws"). Similar 
to the filename tracking issues as well.

> The author of that page
> followed the design to customize his ASTs to do what he needed, 
just as I
> did in the GCC translator framework 
http://www.codetransform.com/gcc.html.

Does that (or any other available ANTLR project) implement 
SemanticAnalysers/TypeCheckers/Optimizers/CodeGenerator using ANTLR 
TreeParsers?.

Micheal



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From parrt at jguru.com  Tue Jan 21 10:49:01 2003
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:15:15 2004
Subject: [antlr-interest] Does ANTLR TreeParsing [still] have these "flaws"?
In-Reply-To: <b0k069+u3is@eGroups.com>
Message-ID: <01EAF148-2D71-11D7-AACB-000393BB647E@jguru.com>


On Tuesday, January 21, 2003, at 09:31 AM, micheal_jor 
<open.zone@virgin.net> wrote:

> Hi,
>
> I came across this piece on flaws with ANTLR TreeParsers on my
> travels and wondered if anyone had an opinion.
>
> http://www.cc.gatech.edu/classes/AY2000/cs4240_fall/ANTLR_Patch/

The problems are:

1    Token information is not retained, so you can't keep track of 
which line    number of the original source code a token came from, 
which makes    it impossible to give good typechecker error messages

This was just discussed on the list I think....can't do it yet.  I want 
to investigate more.

2   ANTLR's default rules for TreeParsers will "shave off" any 
decorations    you add to the tree

I'm not sure what he's getting at here...i think he means that trees 
weren't dup'd properly.  That is fixed.

Ter :)
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org
Lecturer in Comp. Sci., University of San Francisco


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From mzukowski at yci.com  Tue Jan 21 10:49:23 2003
From: mzukowski at yci.com (Zukowski, Monty)
Date: Mon Dec 20 16:15:15 2004
Subject: [antlr-interest] Re: Does ANTLR TreeParsing [still] have thes
	e "f laws"?
Message-ID: <170826586F3BD511910D0200C110AAA805402109@memail03.bco-home.com>

Well, you could say that it implements a code generator because it will
parse the AST and emit the code to a file.  It doesn't have any of the other
things you're looking for.  I've done those with commercial projects and am
available for consulting (www.codetransform.com), or ask away here and I
might find the time to respond (I usually do,as the archives show...)

Monty

-----Original Message-----
From: micheal_jor <open.zone@virgin.net> [mailto:open.zone@virgin.net]
Sent: Tuesday, January 21, 2003 10:40 AM
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] Re: Does ANTLR TreeParsing [still] have these
"f laws"?


--- In antlr-interest@yahoogroups.com, mzukowski@y... wrote:
> Those aren't flaws, they are design decisions.

I thought that might be the case (hence the quotes "flaws"). Similar 
to the filename tracking issues as well.

> The author of that page
> followed the design to customize his ASTs to do what he needed, 
just as I
> did in the GCC translator framework 
http://www.codetransform.com/gcc.html.

Does that (or any other available ANTLR project) implement 
SemanticAnalysers/TypeCheckers/Optimizers/CodeGenerator using ANTLR 
TreeParsers?.

Micheal



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From parrt at jguru.com  Tue Jan 21 10:50:28 2003
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:15:15 2004
Subject: [antlr-interest] Multiple lexers and parsers in one grammar file
In-Reply-To: <b0k10e+4m9k@eGroups.com>
Message-ID: <355840BC-2D71-11D7-AACB-000393BB647E@jguru.com>


On Tuesday, January 21, 2003, at 09:45 AM, rmsanjivp 
<rmsanjivp@yahoo.com> wrote:

> Hi!
>
> THe documentation for 2.7.1 shows that we can have multiple lexer and
> parser classes in one grammar file. But when I try to write two lexer
> classes and two parser classes in a file I get the error while
> generating the code that the grammar file may have only one lexer or
> parser.

I think you'd need to put a class prefix of "" to remove the default 
"public" or something.  That's a java limitation.

>
> Is it not possible to have multiple lexer and parser classes in one
> grammar file?

Hmm...haven't tried that in years ;)

Ter
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org
Lecturer in Comp. Sci., University of San Francisco


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From klaren at cs.utwente.nl  Tue Jan 21 11:17:08 2003
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:15:15 2004
Subject: [antlr-interest] Multiple lexers and parsers in one grammar file
In-Reply-To: <b0k10e+4m9k@eGroups.com>; from rmsanjivp@yahoo.com on Tue, Jan 21, 2003 at 05:45:50PM -0000
References: <b0k10e+4m9k@eGroups.com>
Message-ID: <20030121201708.A14389@cs.utwente.nl>

On Tue, Jan 21, 2003 at 05:45:50PM -0000, rmsanjivp <rmsanjivp@yahoo.com> wrote:
> THe documentation for 2.7.1 shows that we can have multiple lexer and 
> parser classes in one grammar file. But when I try to write two lexer 
> classes and two parser classes in a file I get the error while 
> generating the code that the grammar file may have only one lexer or 
> parser.
> 
> Is it not possible to have multiple lexer and parser classes in one 
> grammar file?

No this is a documentation bug. (thought I fixed it once.. prolly meant to
then ;) )

Cheers,

Ric
-- 
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- klaren@cs.utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
  Before they invented drawing boards, what did they go back to?


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From klaren at cs.utwente.nl  Tue Jan 21 11:39:10 2003
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:15:15 2004
Subject: [antlr-interest] Re: ANTLR build and package layout
In-Reply-To: <b05m8i+gvca@eGroups.com>; from reidr@bigfoot.com on Thu, Jan 16, 2003 at 07:16:34AM -0000
References: <1E0ABA7B578BCC40AA5EED022EFE32E601C22921@sca-can1it01.rational.com> <b05m8i+gvca@eGroups.com>
Message-ID: <20030121203910.D14389@cs.utwente.nl>

Hi,

On Thu, Jan 16, 2003 at 07:16:34AM -0000, reidr <reidr@bigfoot.com> wrote:
> --- In antlr-interest@yahoogroups.com, "Schaefer, Doug"
> <dschaefer@r...> wrote:
> > Hey all,
> > 
> > I did this a month or so ago.  The problem is that there is an
> assumption in
> > the configure script that the CLASSPATH separator was ":".  However
> on
> > Windows, it is ";" (to allow for drive letters, I guess).  If you
> change the
> > following line in the configure script, you'll be OK:
> > 
> > 	CLASSPATH=CLASSPATH:.
> > 
> > to
> > 
> > 	CLASSPATH=CLASSPATH;.
> 
> I just ran into this problem myself.  I normally run on Linux, but I'm
> porting to cygwin.  Does anyone know of a good fix?  (Editing
> configure just doesn't feel right!)  It sounds like more of an
> autoconf problem.  Is that true?

It probably needs some stuff in the configure.in. I suspect there might be
some autoconf using package around you can borrow a solution from. If you
get it to work under cygwin then I'd be much obliged with patches needed to
get it to work.

Cheers,

Ric
-- 
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- klaren@cs.utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
  Chaos often breeds life, when order breeds habit.
  --- Henry B. Adams, The Education of Henry Adams


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From sunshine at public.kherson.ua  Tue Jan 21 12:42:50 2003
From: sunshine at public.kherson.ua (Ruslan Zasukhin)
Date: Mon Dec 20 16:15:15 2004
Subject: Visualization of trees 
Message-ID: <BA537D6A.1E61B%sunshine@public.kherson.ua>

Hi guys,

As I understand old debugger for this is dead few years already.

But I wonder why nobody from this list (where present many Java developers)
have not pick up this idea?

Anybody going do such project ?

Also I think that it will be cool, integrate this Java - tree viewer to C++
also. It is quite possible via JNI calls.

So in ideal, I just call

    debugger_show( parser->getTree() )

And see in Java app my C++ tree.

Will we get such tool ?

Terrence, and I wonder why you can not put such tasks on your students?
This will be good for them and for ANTLR community.
:-)

-- 
Best regards,
Ruslan Zasukhin               [ I feel the need...the need for speed ]
----------------------------------------------------------------------
Paradigma Software                        http://www.paradigmasoft.com

Valentina is cross-platform, fantastic fast database engine, supports
C/C++,Java,JDBC,SQL,Director,REALbasic,PHP,XCMD,COM,Visual BASIC......
----------------------------------------------------------------------

From sunshine at public.kherson.ua  Tue Jan 21 12:42:50 2003
From: sunshine at public.kherson.ua (Ruslan Zasukhin)
Date: Mon Dec 20 16:15:15 2004
Subject: [antlr-interest] Visualization of trees
Message-ID: <BA537D6A.1E61B%sunshine@public.kherson.ua>

Hi guys,

As I understand old debugger for this is dead few years already.

But I wonder why nobody from this list (where present many Java developers)
have not pick up this idea?

Anybody going do such project ?

Also I think that it will be cool, integrate this Java - tree viewer to C++
also. It is quite possible via JNI calls.

So in ideal, I just call

    debugger_show( parser->getTree() )

And see in Java app my C++ tree.

Will we get such tool ?

Terrence, and I wonder why you can not put such tasks on your students?
This will be good for them and for ANTLR community.
:-)

-- 
Best regards,
Ruslan Zasukhin               [ I feel the need...the need for speed ]
----------------------------------------------------------------------
Paradigma Software                        http://www.paradigmasoft.com

Valentina is cross-platform, fantastic fast database engine, supports
C/C++,Java,JDBC,SQL,Director,REALbasic,PHP,XCMD,COM,Visual BASIC......
----------------------------------------------------------------------



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From mzukowski at yci.com  Tue Jan 21 12:46:19 2003
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:15:15 2004
Subject: [antlr-interest] Visualization of trees
Message-ID: <170826586F3BD511910D0200C110AAA80540210E@memail03.bco-home.com>

The easiest way to see your C++ trees would be to print them out and have a
little java parser that reconstructs the trees in Java to visualize them.
There is already some method in the antlr sources to display them in a swing
UI.

Monty

-----Original Message-----
From: Ruslan Zasukhin [mailto:sunshine@public.kherson.ua]
Sent: Tuesday, January 21, 2003 12:43 PM
To: antlr-interest@yahoogroups.com
Cc: Terence Parr
Subject: [antlr-interest] Visualization of trees


Hi guys,

As I understand old debugger for this is dead few years already.

But I wonder why nobody from this list (where present many Java developers)
have not pick up this idea?

Anybody going do such project ?

Also I think that it will be cool, integrate this Java - tree viewer to C++
also. It is quite possible via JNI calls.

So in ideal, I just call

    debugger_show( parser->getTree() )

And see in Java app my C++ tree.

Will we get such tool ?

Terrence, and I wonder why you can not put such tasks on your students?
This will be good for them and for ANTLR community.
:-)

-- 
Best regards,
Ruslan Zasukhin               [ I feel the need...the need for speed ]
----------------------------------------------------------------------
Paradigma Software                        http://www.paradigmasoft.com

Valentina is cross-platform, fantastic fast database engine, supports
C/C++,Java,JDBC,SQL,Director,REALbasic,PHP,XCMD,COM,Visual BASIC......
----------------------------------------------------------------------



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From sunshine at public.kherson.ua  Tue Jan 21 12:52:28 2003
From: sunshine at public.kherson.ua (Ruslan Zasukhin)
Date: Mon Dec 20 16:15:15 2004
Subject: [antlr-interest] Visualization of trees
In-Reply-To: <170826586F3BD511910D0200C110AAA80540210E@memail03.bco-home.com>
Message-ID: <BA537FAC.1E61F%sunshine@public.kherson.ua>

on 1/21/03 10:46 PM, mzukowski@yci.com at mzukowski@yci.com wrote:

> The easiest way to see your C++ trees would be to print them out and have a
> little java parser that reconstructs the trees in Java to visualize them.
> There is already some method in the antlr sources to display them in a swing
> UI.

This is not easiest way.
Easiest is which I did show below, I simply install debuger,
And add one function call into my main().

And since a lots of developers need this, why each must spend time and
efforts to write ANOTHER Java grammar to parse print output from C++ app?

I'd like to have debugger.

> Monty
> 
> -----Original Message-----
> From: Ruslan Zasukhin [mailto:sunshine@public.kherson.ua]
> Sent: Tuesday, January 21, 2003 12:43 PM
> To: antlr-interest@yahoogroups.com
> Cc: Terence Parr
> Subject: [antlr-interest] Visualization of trees
> 
> 
> Hi guys,
> 
> As I understand old debugger for this is dead few years already.
> 
> But I wonder why nobody from this list (where present many Java developers)
> have not pick up this idea?
> 
> Anybody going do such project ?
> 
> Also I think that it will be cool, integrate this Java - tree viewer to C++
> also. It is quite possible via JNI calls.
> 
> So in ideal, I just call
> 
>   debugger_show( parser->getTree() )
> 
> And see in Java app my C++ tree.
> 
> Will we get such tool ?
> 
> Terrence, and I wonder why you can not put such tasks on your students?
> This will be good for them and for ANTLR community.
> :-)

-- 
Best regards,
Ruslan Zasukhin      [ I feel the need...the need for speed ]
-------------------------------------------------------------
e-mail: ruslan@paradigmasoft.com
web: http://www.paradigmasoft.com

To subscribe to the Valentina mail list go to:
http://listserv.macserve.net/mailman/listinfo/valentina
-------------------------------------------------------------


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From dvleonid at land.ru  Tue Jan 21 14:35:22 2003
From: dvleonid at land.ru (Dvoryansky Leonid)
Date: Mon Dec 20 16:15:15 2004
Subject: [antlr-interest] Visualization of trees
Message-ID: <BLEAJDOHPMCDLGAGFDMPAEFCCCAA.DVLeonid@land.ru>


If there any profs whom want to take a talanted russian student to do a task
like that :)))
I'm at your service :)
And I want to know is there any university in the world which is specialized
on compiler-compilers
or something like that?


>Terrence, and I wonder why you can not put such tasks on your students?
>This will be good for them and for ANTLR community.
>:-)


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From parrt at jguru.com  Tue Jan 21 14:47:30 2003
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:15:15 2004
Subject: [antlr-interest] Visualization of trees
In-Reply-To: <BLEAJDOHPMCDLGAGFDMPAEFCCCAA.DVLeonid@land.ru>
Message-ID: <526C1DB3-2D92-11D7-AACB-000393BB647E@jguru.com>


On Tuesday, January 21, 2003, at 02:35 PM, Dvoryansky Leonid wrote:

>
> If there any profs whom want to take a talanted russian student to do 
> a task
> like that :)))
> I'm at your service :)
> And I want to know is there any university in the world which is 
> specialized
> on compiler-compilers
> or something like that?

Most universities have a class that use compiler-compilers, but the 
only class on how to build compiler-compilers I've seen was at Purdue 
(Hank Dietz taught it to me in the 80's). :)  No universities focus on 
this though.  Many are good at language research though.

Terence
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org
Lecturer in Comp. Sci., University of San Francisco


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From sunshine at public.kherson.ua  Tue Jan 21 15:02:09 2003
From: sunshine at public.kherson.ua (Ruslan Zasukhin)
Date: Mon Dec 20 16:15:15 2004
Subject: [antlr-interest] Visualization of trees
In-Reply-To: <526C1DB3-2D92-11D7-AACB-000393BB647E@jguru.com>
Message-ID: <BA539E11.1E659%sunshine@public.kherson.ua>

on 1/22/03 12:47 AM, Terence Parr at parrt@jguru.com wrote:

>> If there any profs whom want to take a talanted russian student to do
>> a task
>> like that :)))
>> I'm at your service :)

Terrence,

So may be you really can put on Leonid this task with Java Tree debugger?
Why not ?

Leonid,

Just you need understand that this is mainly Java project.
Do you know Java ?

In fact you can start this project self.
And step by step show it for current list members.

I am sure many people start to help you.

-- 
Best regards,
Ruslan Zasukhin      [ I feel the need...the need for speed ]
-------------------------------------------------------------
e-mail: ruslan@paradigmasoft.com
web: http://www.paradigmasoft.com

To subscribe to the Valentina mail list go to:
http://listserv.macserve.net/mailman/listinfo/valentina
-------------------------------------------------------------


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From parrt at jguru.com  Tue Jan 21 15:16:30 2003
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:15:15 2004
Subject: [antlr-interest] Visualization of trees
In-Reply-To: <BA539E11.1E659%sunshine@public.kherson.ua>
Message-ID: <5F73FA98-2D96-11D7-AACB-000393BB647E@jguru.com>


On Tuesday, January 21, 2003, at 03:02 PM, Ruslan Zasukhin wrote:

> on 1/22/03 12:47 AM, Terence Parr at parrt@jguru.com wrote:
>
>>> If there any profs whom want to take a talanted russian student to do
>>> a task
>>> like that :)))
>>> I'm at your service :)
>
> Terrence,
>
> So may be you really can put on Leonid this task with Java Tree 
> debugger?
> Why not ?

Well, I've no time to manage a student at this point.  Plus the 
ASTFrame does what you asked for now, doesn't it?  Not convenient for 
C++, but you are talking about Java here, right?

Terence

>
> Leonid,
>
> Just you need understand that this is mainly Java project.
> Do you know Java ?
>
> In fact you can start this project self.
> And step by step show it for current list members.
>
> I am sure many people start to help you.
>
> -- 
> Best regards,
> Ruslan Zasukhin      [ I feel the need...the need for speed ]
> -------------------------------------------------------------
> e-mail: ruslan@paradigmasoft.com
> web: http://www.paradigmasoft.com
>
> To subscribe to the Valentina mail list go to:
> http://listserv.macserve.net/mailman/listinfo/valentina
> -------------------------------------------------------------
>
>
>
>
> Your use of Yahoo! Groups is subject to 
> http://docs.yahoo.com/info/terms/
>
>
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org
Lecturer in Comp. Sci., University of San Francisco


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From open.zone at virgin.net  Tue Jan 21 15:53:05 2003
From: open.zone at virgin.net (micheal_jor <open.zone@virgin.net>)
Date: Mon Dec 20 16:15:15 2004
Subject: [antlr-interest] Re: Does ANTLR TreeParsing [still] have thes e "f laws"?
In-Reply-To: <170826586F3BD511910D0200C110AAA805402109@memail03.bco-home.com>
Message-ID: <b0kmh1+pvma@eGroups.com>


> Well, you could say that it implements a code generator because it 
will
> parse the AST and emit the code to a file.  It doesn't have any of 
the other
> things you're looking for.

Thanks for the reply.

> I've done those with commercial projects and am
> available for consulting (www.codetransform.com), or ask away here 
and I
> might find the time to respond (I usually do,as the archives 
show...)

It currently is just a personal quest to "figure out" TreeParsers but 
that might change...  ;-)

Micheal



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From mzukowski at yci.com  Tue Jan 21 15:55:34 2003
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:15:15 2004
Subject: [antlr-interest] Re: Does ANTLR TreeParsing [still] have thes
	 e "f laws"?
Message-ID: <170826586F3BD511910D0200C110AAA805402116@memail03.bco-home.com>

If you (or anyone) want to start doing some examples with the gcc
transformation toolkit I'd be happy to give you some guidance.

Monty

-----Original Message-----
From: micheal_jor <open.zone@virgin.net> [mailto:open.zone@virgin.net]
Sent: Tuesday, January 21, 2003 3:53 PM
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] Re: Does ANTLR TreeParsing [still] have thes e
"f laws"?



> Well, you could say that it implements a code generator because it 
will
> parse the AST and emit the code to a file.  It doesn't have any of 
the other
> things you're looking for.

Thanks for the reply.

> I've done those with commercial projects and am
> available for consulting (www.codetransform.com), or ask away here 
and I
> might find the time to respond (I usually do,as the archives 
show...)

It currently is just a personal quest to "figure out" TreeParsers but 
that might change...  ;-)

Micheal



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From open.zone at virgin.net  Tue Jan 21 16:17:59 2003
From: open.zone at virgin.net (micheal_jor <open.zone@virgin.net>)
Date: Mon Dec 20 16:15:15 2004
Subject: [antlr-interest] Re: Visualization of trees
In-Reply-To: <5F73FA98-2D96-11D7-AACB-000393BB647E@jguru.com>
Message-ID: <b0knvn+uqml@eGroups.com>


> > Terrence,
> >
> > So may be you really can put on Leonid this task with Java Tree 
> > debugger?
> > Why not ?
> 
> Well, I've no time to manage a student at this point.  Plus the 
> ASTFrame does what you asked for now, doesn't it?  Not convenient 
for 
> C++, but you are talking about Java here, right?
> 
> Terence

ANTLR C# runtime also has ASTFrame and might be easier for C++ 
integration on Windows. Should easy enough to wrap C#'s ASTFrame up 
for use from C/C++. 

Or, create an XMLReaderASTFrame (in Java/C#) that works off the AST's 
serialized XML. As long as all languages support XML serialization 
with the same format.

Personally, I find the improved ToStringTree() method in C# useful 
since it actually prints a tree. And I used to ask for debuggers...

Micheal



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From rmsanjivp at yahoo.com  Tue Jan 21 22:18:59 2003
From: rmsanjivp at yahoo.com (rmsanjivp <rmsanjivp@yahoo.com>)
Date: Mon Dec 20 16:15:15 2004
Subject: [antlr-interest] switching lexer while parsing
Message-ID: <b0ld4j+8taa@eGroups.com>

Hi!

can I switch lexer depending upon the context? I have a problem 
where in one mode a/b is to be treated as ID DIVIDE ID whereas in 
another place it must be treated as mere ID. I was thinking or 
having something that will switch the lexer while parsing depending 
upon the context.

Is it possible?

Thanks,
Sanjiv


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From parrt at jguru.com  Tue Jan 21 23:06:34 2003
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:15:15 2004
Subject: [antlr-interest] switching lexer while parsing
In-Reply-To: <b0ld4j+8taa@eGroups.com>
Message-ID: <0AE2ECA6-2DD8-11D7-AACB-000393BB647E@jguru.com>


On Tuesday, January 21, 2003, at 10:18 PM, rmsanjivp 
<rmsanjivp@yahoo.com> wrote:

> Hi!
>
> can I switch lexer depending upon the context? I have a problem
> where in one mode a/b is to be treated as ID DIVIDE ID whereas in
> another place it must be treated as mere ID. I was thinking or
> having something that will switch the lexer while parsing depending
> upon the context.
>
> Is it possible?

Sure.  Easiest way is to use token streams.  See my javadoc example to 
see how I switch lexers for an embedded language.

Terence
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org
Lecturer in Comp. Sci., University of San Francisco


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From sunshine at public.kherson.ua  Tue Jan 21 23:39:14 2003
From: sunshine at public.kherson.ua (Ruslan Zasukhin)
Date: Mon Dec 20 16:15:15 2004
Subject: [antlr-interest] Visualization of trees
In-Reply-To: <5F73FA98-2D96-11D7-AACB-000393BB647E@jguru.com>
Message-ID: <BA541741.1E692%sunshine@public.kherson.ua>

on 1/22/03 1:16 AM, Terence Parr at parrt@jguru.com wrote:

> Well, I've no time to manage a student at this point.  Plus the
> ASTFrame does what you asked for now, doesn't it?  Not convenient for
> C++, but you are talking about Java here, right?

ASTFrame ?

In 2.7.2 release ?

I will look later.

I talk about access to Java code from C++ code.
It is easy enough.

If ASTFrame really do what I need, may be I will add access to Java self.

-- 
Best regards,
Ruslan Zasukhin      [ I feel the need...the need for speed ]
-------------------------------------------------------------
e-mail: ruslan@paradigmasoft.com
web: http://www.paradigmasoft.com

To subscribe to the Valentina mail list go to:
http://listserv.macserve.net/mailman/listinfo/valentina
-------------------------------------------------------------


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From hushlee83 at yahoo.com.sg  Tue Jan 21 23:42:48 2003
From: hushlee83 at yahoo.com.sg (=?iso-8859-1?q?Sharon=20Li?=)
Date: Mon Dec 20 16:15:15 2004
Subject: [antlr-interest] Reading contents of file using Antlr
Message-ID: <20030122074248.15467.qmail@web40902.mail.yahoo.com>


Hi, 

I'm a Java programmer and relatively new to Antlr. I need to write Antlr code to read in a text file and extract only the necessary information. How can I go about doing that? An example of the contents of the file might look like that : 

angle focus : 0.0005
color : blue
line width : 12

I often get the error msg:
warning : lexical nondeterminism upon ...

Also when do we use the TreeParser and what is the different between a Parser and a TreeParser? When do we define tokens and what is it for ? Pls help! Thanks very much.

?Yahoo! Travel
- Get the latest travel deals in town!
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20030122/d63f3260/attachment.html
From weberjn at yahoo.com  Wed Jan 22 02:23:08 2003
From: weberjn at yahoo.com (weberjn <weberjn@yahoo.com>)
Date: Mon Dec 20 16:15:15 2004
Subject: [antlr-interest] Re: semantic predicate does not work
In-Reply-To: <1D532F5C75B30A46A78D5107B635DF890E281F@edzell.windsor.com>
Message-ID: <b0lrec+v5f9@eGroups.com>

Thanks for all the answers, I indeed did overlook that in Getting
Started a Terminal was printed out.
I tried to print out a non-terminal, which I probably should do as in
TinyBasic.g newFunction returns [int t]

More spaces in curly code sent to java shouldn't matter to javac.

Thank you all,
Juergen

--- In antlr-interest@yahoogroups.com, "Smith, Eric V."
<ericsmith@w...> wrote:
> Doesn't it need to be
>   d1=identifier 
> since it's a non-terminal?
> 



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From neukirchen at itm.mu-luebeck.de  Wed Jan 22 05:28:54 2003
From: neukirchen at itm.mu-luebeck.de (Helmut Neukirchen)
Date: Mon Dec 20 16:15:15 2004
Subject: [antlr-interest] Re: switching lexer while parsing
References: <1043237783.376.66001.m12@yahoogroups.com>
Message-ID: <3E2E9C96.7010001@itm.mu-luebeck.de>

> On Tuesday, January 21, 2003, at 10:18 PM, rmsanjivp 
> <rmsanjivp@yahoo.com> wrote:
 >
>>can I switch lexer depending upon the context? I have a problem
>>where in one mode a/b is to be treated as ID DIVIDE ID whereas in
>>another place it must be treated as mere ID. I was thinking or
>>having something that will switch the lexer while parsing depending
>>upon the context.
>>
>>Is it possible?
> 
> Sure.  Easiest way is to use token streams.  See my javadoc example to 
> see how I switch lexers for an embedded language.

I experienced problems, when switching lexers from *within parsers* due to
the lookahead. Switching lexers from within lexers is no problem, but
when you are inside the parser, the wrong lexer might already have
consumed characters and produced wrong tokens. (Worst case: not just
lookead k, but some some syntactic predicate.)

This was already discussed on this list in January 2002...

Since My problem was just academic, I simply stopped that project,
but until then I came to the followingconclusion:

Either move the relevant part which initiates the switch from the parser
into the lexer or implement some checkpointing/unwind mechanisms into
the streams of ANTLR.

Nevertheless, I would be happy to see more convenient solutions!

Best regards,
Helmut
-- 
Helmut Neukirchen                  mailto:neukirchen@itm.uni-luebeck.de
Institute for Telematics                  http://www.itm.uni-luebeck.de
University of Luebeck                           phone: +49 451 500 4867
Ratzeburger Allee 160, D-23538 Luebeck, Germany   fax: +49 451 500 3722


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From decoret at graphics.lcs.mit.edu  Wed Jan 22 07:35:21 2003
From: decoret at graphics.lcs.mit.edu (xadeck <decoret@graphics.lcs.mit.edu>)
Date: Mon Dec 20 16:15:15 2004
Subject: [antlr-interest] Re: 2.7.2 released: get it while it's hot!
In-Reply-To: <D767618D-2CC1-11D7-AACB-000393BB647E@jguru.com>
Message-ID: <b0mdnp+75gn@eGroups.com>


I would like to thank all of you too. It is really a great tool and
though It couls sound cool to work with lex and yacc cause you can
easily play the guru, I am so glad to give up with this tools of an
old age.

Of course I would still have suggestions ;-) since any good free tool
always seems to cause user to ask for more! But these are very minor,
minor suggestions and I almost feel ashame to propose.

1) it would be useful to have an empty virtual function init() called
at the end of each constructor of each base class (at least lexers and
parsers) so when you override them (one very nice feature of antlr)
you can overide this init() and ensure some initializiation (such as
for examples setting line number to 0,etc..) is performed. Right now
it seems to me you have to tell programmer using your derived lexer to
be sure to call init().

2) When generating grammar in C++ with AST disabled (using gcc-3.2)
there is a (annoying) warning due to the following code in parser.cpp
void parser::initializeASTFactory(
ANTLR_USE_NAMESPACE(antlr)ASTFactory& factory )
{
}
could just ensure that no argument name (factory) is given when
initializeASTFactory is empty. This way anltr code would compiled
nicelly without any warning.

Thanks again, I'll try to contribute soon with:
- a tutorial (for C++ users)
- an RPM for Mandrake of 2.7.2
- a release of the grammar I use for VRML2



--- In antlr-interest@yahoogroups.com, Terence Parr <parrt@j...> 
> Folks,
> 
> Well, it only took a few years, but ANTLR 2.7.2 with lots of 
> enhancements and bug fixes is ready for your enjoyment at 
> http://www.antlr.org/download
> 
> -rw-r--r--    1 parrt    parrt     1557051 Jan 20 13:11 
> antlr-2.7.2.tar.gz
> -rw-r--r--    1 parrt    parrt     1943296 Jan 20 13:12 antlr-2.7.2.zip
> 
> Thanks goes to all of you for using ANTLR and for those maniacs that 
> help(ed) implement it:
> 
> John Lilly helped build lots of the early version
> C++ code generator by Peter Wells and Ric Klaren
> C# code generation by Micheal Jordan, Kunle Odutola and Anthony 
> Oguntimehin.
> Infrastructure support from Perforce: The world's best source code 
> control system
> Substantial intellectual effort donated by
>       Loring Craymer
>       Monty Zukowski
>       Jim Coker
>       Scott Stanchfield
>       John Mitchell
>       Chapman Flack
> Source changes for Eclipse and NetBeans by
>       Marco van Meegen
>       Brian Smith
> Lots of little patches and stuff from the ANTLR community
> 
> The future: well, lots of little things like real UNICODE char set 
> support and so on, but the big thing is a completely rebuilt web site 
> (desperately needed).  I am paying to have it graphically designed and 
> then I'll build a dynamic site based upon my experience implementing 
> jGuru.  Lots of cool ideas :)
> 
> I'm also working on my CS652 programming languages course for 
> USF...you'll be able to follow along with the class by following my 
> lecture notes. :)
> 
> Terence
> --
> Co-founder, http://www.jguru.com
> Creator, ANTLR Parser Generator: http://www.antlr.org
> Lecturer in Comp. Sci., University of San Francisco


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From decoret at graphics.lcs.mit.edu  Wed Jan 22 07:51:48 2003
From: decoret at graphics.lcs.mit.edu (xadeck <decoret@graphics.lcs.mit.edu>)
Date: Mon Dec 20 16:15:15 2004
Subject: [antlr-interest] Re: Short circuit of the lexer
In-Reply-To: <15913.65475.201505.702452@non.non.net>
Message-ID: <b0memk+9tc5@eGroups.com>

--- In antlr-interest@yahoogroups.com, "John D. Mitchell"
<johnm-antlr@n...> wrote:

> 
> (B) Are you sure that it's actually the lexing that's taking a long
time?
> Have you actually profiled your lexer and parser to determine that
or are
> you just guessing?
> 
> (C) If you're going to muck with nextToken(), you'll really need to make
> sure that your aren't violating the various assumptions that are
being made
> about the state that things are in at any point.
> 
> Take care,
> 	John

Hi, I guessed it was the lexing (I had a look at the generated c++
code) and it was confirmed later. I used a trick inspired by OpenVRML
developers: I specify the grammar so I have something that compiles
ans parses nicely (but slowly ;-)) my files. Then I overide the lexer
and rewrite the nextToken() function. Here is an example of how things
are done faster in this rewritten function. To recognize a float or an
int, I recognize first a digit, then I read everything until the next
whitespace, then I use C standard functions strtol or strtof to try to
convert this string first to an INT (if succeeds, return a token of
that type) and second to an FLOAT. If both fails, these functions
returns the character on which it failed so I can raise an exception.

This is really faster (about x20) so I am happy. Except that I guess
ANTLR could do something very quick too and I probably messed up (or
complexifie too much) the rules of my lexer. But when I try to
simplify them I have ANTLR warnings about non determinism. Below is
the int/float part.

I'll keep on investigating and will watch this mailing list to improve
my understanding.

Thanks for the hints.

Take care,



// . is a token 
// 2.34 +2.34 -2.34 2. .34 2.34E+12 2.34E-12 are valid floats
// 2 0xff are valid ints

// We need the following to disambiguate INT and FLOAT, and DOT
protected
DOT : '.' ;
protected
ROOTFLOAT
    :
('+'|'-')?('0'..'9')+('.'('0'..'9')*)?(('e'|'E')('+'|'-')?('0'..'9')+)?
       
    ;
protected
NOROOTFLOAT
    : ('+'|'-')?'.'('0'..'9')+(('e'|'E')('+'|'-')?('0'..'9')+)?
    ;
protected
FLOAT
    : (('+'|'-')?'.'('0'..'9')) => f:NOROOTFLOAT
    | f1:ROOTFLOAT
    ;
protected
ABS_INT
    : ('0'..'9')+
    | '0'('x'|'X')('0'..'9'|'a'..'f'|'A'..'F')+        
    ;
protected
INT
    : ('+'|'-')? ABS_INT
    ;
FLOAT_OR_INT_OR_DOT
    : (('+'|'-')?('0'..'9')+('.'|'e'|'E')) => FLOAT { $setType(FLOAT); }
    | (('+'|'-')?'.'('0'..'9')) => FLOAT { $setType(FLOAT); }
    | ('.') => DOT { $setType(DOT); }
    | INT { $setType(INT); }
    ;









 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From mzukowski at yci.com  Wed Jan 22 08:21:26 2003
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:15:15 2004
Subject: [antlr-interest] switching lexer while parsing
Message-ID: <170826586F3BD511910D0200C110AAA80540211A@memail03.bco-home.com>

No.  You can't switch the lexer while parsing.  You have to figure out how
to handle it in the lexer or parser alone.

Monty

-----Original Message-----
From: rmsanjivp <rmsanjivp@yahoo.com> [mailto:rmsanjivp@yahoo.com]
Sent: Tuesday, January 21, 2003 10:19 PM
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] switching lexer while parsing


Hi!

can I switch lexer depending upon the context? I have a problem 
where in one mode a/b is to be treated as ID DIVIDE ID whereas in 
another place it must be treated as mere ID. I was thinking or 
having something that will switch the lexer while parsing depending 
upon the context.

Is it possible?

Thanks,
Sanjiv


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From mzukowski at yci.com  Wed Jan 22 08:23:51 2003
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:15:15 2004
Subject: [antlr-interest] switching lexer while parsing
Message-ID: <170826586F3BD511910D0200C110AAA80540211B@memail03.bco-home.com>

The question was if he could switch lexers from the parser, and the answer
is no (I think Ter read it wrong).  Try doing it from the lexer, with lexer
streams as Ter suggests.

Monty

-----Original Message-----
From: Terence Parr [mailto:parrt@jguru.com]
Sent: Tuesday, January 21, 2003 11:07 PM
To: antlr-interest@yahoogroups.com
Subject: Re: [antlr-interest] switching lexer while parsing



On Tuesday, January 21, 2003, at 10:18 PM, rmsanjivp 
<rmsanjivp@yahoo.com> wrote:

> Hi!
>
> can I switch lexer depending upon the context? I have a problem
> where in one mode a/b is to be treated as ID DIVIDE ID whereas in
> another place it must be treated as mere ID. I was thinking or
> having something that will switch the lexer while parsing depending
> upon the context.
>
> Is it possible?

Sure.  Easiest way is to use token streams.  See my javadoc example to 
see how I switch lexers for an embedded language.

Terence
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org
Lecturer in Comp. Sci., University of San Francisco


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From mzukowski at yci.com  Wed Jan 22 08:26:56 2003
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:15:15 2004
Subject: [antlr-interest] Reading contents of file using Antlr
Message-ID: <170826586F3BD511910D0200C110AAA80540211C@memail03.bco-home.com>

Lexical nondeterminism means you have two lexical rules that are in
conflict, meaning they have the same prefix.  Post a small but complete
example which has the error message and we'll be able to help you.  

Monty


-----Original Message-----
From: Sharon Li [mailto:hushlee83@yahoo.com.sg]
Sent: Tuesday, January 21, 2003 11:43 PM
To: Antlr Interest Group
Subject: [antlr-interest] Reading contents of file using Antlr


Hi, 
I'm a Java programmer and relatively new to Antlr. I need to write Antlr
code to read in a text file and extract only the necessary information. How
can I go about doing that? An example of the contents of the file might look
like that : 
angle focus : 0.0005
color : blue
line width : 12
I often get the error msg:
warning : lexical nondeterminism upon ...
Also when do we use the TreeParser and what is the different between a
Parser and a TreeParser? When do we define tokens and what is it for ? Pls
help! Thanks very much.
 Yahoo! Travel
- Get the latest travel deals in town! 
Your use of Yahoo! Groups is subject to the Yahoo! Terms of Service. 

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From mzukowski at yci.com  Wed Jan 22 08:28:08 2003
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:15:16 2004
Subject: [antlr-interest] Re: semantic predicate does not work
Message-ID: <170826586F3BD511910D0200C110AAA80540211D@memail03.bco-home.com>

Yes, but the spaces may matter to antlr (used to anyway), which is actually
parsing your action code to replace certain things like references to trees
and tree construction operators.

Monty

-----Original Message-----
From: weberjn <weberjn@yahoo.com> [mailto:weberjn@yahoo.com]
Sent: Wednesday, January 22, 2003 2:23 AM
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] Re: semantic predicate does not work


Thanks for all the answers, I indeed did overlook that in Getting
Started a Terminal was printed out.
I tried to print out a non-terminal, which I probably should do as in
TinyBasic.g newFunction returns [int t]

More spaces in curly code sent to java shouldn't matter to javac.

Thank you all,
Juergen

--- In antlr-interest@yahoogroups.com, "Smith, Eric V."
<ericsmith@w...> wrote:
> Doesn't it need to be
>   d1=identifier 
> since it's a non-terminal?
> 



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From parrt at jguru.com  Wed Jan 22 09:14:31 2003
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:15:16 2004
Subject: [antlr-interest] Re: 2.7.2 released: get it while it's hot!
In-Reply-To: <b0mdnp+75gn@eGroups.com>
Message-ID: <F8E2270E-2E2C-11D7-AACB-000393BB647E@jguru.com>

Hi there,

Thanks for the nice words and good suggestions.  Please let us know if 
you get a tutorial together and RPM etc... :)

Terence

On Wednesday, January 22, 2003, at 07:35 AM, xadeck 
<decoret@graphics.lcs.mit.edu> wrote:

>
> I would like to thank all of you too. It is really a great tool and
> though It couls sound cool to work with lex and yacc cause you can
> easily play the guru, I am so glad to give up with this tools of an
> old age.
>
> Of course I would still have suggestions ;-) since any good free tool
> always seems to cause user to ask for more! But these are very minor,
> minor suggestions and I almost feel ashame to propose.
>
> 1) it would be useful to have an empty virtual function init() called
> at the end of each constructor of each base class (at least lexers and
> parsers) so when you override them (one very nice feature of antlr)
> you can overide this init() and ensure some initializiation (such as
> for examples setting line number to 0,etc..) is performed. Right now
> it seems to me you have to tell programmer using your derived lexer to
> be sure to call init().
>
> 2) When generating grammar in C++ with AST disabled (using gcc-3.2)
> there is a (annoying) warning due to the following code in parser.cpp
> void parser::initializeASTFactory(
> ANTLR_USE_NAMESPACE(antlr)ASTFactory& factory )
> {
> }
> could just ensure that no argument name (factory) is given when
> initializeASTFactory is empty. This way anltr code would compiled
> nicelly without any warning.
>
> Thanks again, I'll try to contribute soon with:
> - a tutorial (for C++ users)
> - an RPM for Mandrake of 2.7.2
> - a release of the grammar I use for VRML2
>
>
>
> --- In antlr-interest@yahoogroups.com, Terence Parr <parrt@j...>
>> Folks,
>>
>> Well, it only took a few years, but ANTLR 2.7.2 with lots of
>> enhancements and bug fixes is ready for your enjoyment at
>> http://www.antlr.org/download
>>
>> -rw-r--r--    1 parrt    parrt     1557051 Jan 20 13:11
>> antlr-2.7.2.tar.gz
>> -rw-r--r--    1 parrt    parrt     1943296 Jan 20 13:12 
>> antlr-2.7.2.zip
>>
>> Thanks goes to all of you for using ANTLR and for those maniacs that
>> help(ed) implement it:
>>
>> John Lilly helped build lots of the early version
>> C++ code generator by Peter Wells and Ric Klaren
>> C# code generation by Micheal Jordan, Kunle Odutola and Anthony
>> Oguntimehin.
>> Infrastructure support from Perforce: The world's best source code
>> control system
>> Substantial intellectual effort donated by
>>       Loring Craymer
>>       Monty Zukowski
>>       Jim Coker
>>       Scott Stanchfield
>>       John Mitchell
>>       Chapman Flack
>> Source changes for Eclipse and NetBeans by
>>       Marco van Meegen
>>       Brian Smith
>> Lots of little patches and stuff from the ANTLR community
>>
>> The future: well, lots of little things like real UNICODE char set
>> support and so on, but the big thing is a completely rebuilt web site
>> (desperately needed).  I am paying to have it graphically designed and
>> then I'll build a dynamic site based upon my experience implementing
>> jGuru.  Lots of cool ideas :)
>>
>> I'm also working on my CS652 programming languages course for
>> USF...you'll be able to follow along with the class by following my
>> lecture notes. :)
>>
>> Terence
>> --
>> Co-founder, http://www.jguru.com
>> Creator, ANTLR Parser Generator: http://www.antlr.org
>> Lecturer in Comp. Sci., University of San Francisco
>
>
>
>
> Your use of Yahoo! Groups is subject to 
> http://docs.yahoo.com/info/terms/
>
>
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org
Lecturer in Comp. Sci., University of San Francisco


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From klaren at cs.utwente.nl  Wed Jan 22 09:27:34 2003
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:15:16 2004
Subject: [antlr-interest] Re: 2.7.2 released: get it while it's hot!
In-Reply-To: <b0mdnp+75gn@eGroups.com>; from decoret@graphics.lcs.mit.edu on Wed, Jan 22, 2003 at 03:35:21PM -0000
References: <D767618D-2CC1-11D7-AACB-000393BB647E@jguru.com> <b0mdnp+75gn@eGroups.com>
Message-ID: <20030122182734.A14956@cs.utwente.nl>

Hi,

On Wed, Jan 22, 2003 at 03:35:21PM -0000, xadeck <decoret@graphics.lcs.mit.edu> wrote:
> 1) it would be useful to have an empty virtual function init() called
> at the end of each constructor of each base class (at least lexers and
> parsers) so when you override them (one very nice feature of antlr)
> you can overide this init() and ensure some initializiation (such as
> for examples setting line number to 0,etc..) is performed. Right now
> it seems to me you have to tell programmer using your derived lexer to
> be sure to call init().

In the new version you can at least in C++ mode turn off the antlr
generated constructors. So you can nicely initialize stuff using
initalizers etc. (I did not enable this for java mode since this is less of
an issue with java since it has no concept of initializers (or use for the
concept so you'd want ;) ))

> 2) When generating grammar in C++ with AST disabled (using gcc-3.2)
> there is a (annoying) warning due to the following code in parser.cpp
> void parser::initializeASTFactory(
> ANTLR_USE_NAMESPACE(antlr)ASTFactory& factory )
> {
> }
> could just ensure that no argument name (factory) is given when
> initializeASTFactory is empty. This way anltr code would compiled
> nicelly without any warning.

AFAIK this is a gcc-ism. Not 100% sure if it's portable so I never bothered
about it. (read very low on my priority list)

Thanks for the input,

Ric
--
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- klaren@cs.utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
  Chaos is found in greatest abundance wherever order is being sought.
  --- Terry Pratchet


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From cintyram at yahoo.com  Wed Jan 22 13:40:39 2003
From: cintyram at yahoo.com (cintyram <cintyram@yahoo.com>)
Date: Mon Dec 20 16:15:16 2004
Subject: [antlr-interest] Re: 2.7.2 released: get it while it's hot!
In-Reply-To: <20030122182734.A14956@cs.utwente.nl>
Message-ID: <b0n34n+11sj@eGroups.com>

hi 
im trying to compile the static library for the new antlr2.7.2 release;
this is what i did, 
created a new win32 static library project ;
to that i added all the source files from C:\ad\antlr-2.7.2\lib\cpp\src
 and from  C:\ad\antlr-2.7.2\lib\cpp\antlr

enabled RTTI 

this is what i get;


also with the project that comes with the download, there are some
files included in the project which are not present in the downlaod
physically ;
if i remove references to those files from that project , i get only
the first error abt nullASTptr ;


please suggest any soln.

// as an aside, how would it be to put up the runtimes also in the
files section? those who are just interested in using the tool can
directly copy the lib or dll files, or the corresponding files, for
other platforms and use directly ..
this would be very useful for beginners and also for folks like me who
are not exactly beginners but do stumble all the time :(

cheers
ram



--------------------Configuration: 272asl - Win32
Debug--------------------
Compiling...
BaseAST.cpp
c:\ad\antlr-2.7.2\lib\cpp\src\baseast.cpp(312) : error C2491:
'nullASTptr' : definition of dllimport data not allowed
Token.cpp
c:\ad\antlr-2.7.2\lib\cpp\src\token.cpp(18) : error C2720: 'badToken'
: '__declspec(dllimport ) ' storage-class specifier illegal on members
c:\ad\antlr-2.7.2\lib\cpp\src\token.cpp(18) : error C2491:
'Token::badToken' : definition of dllimport static data member not allowed
TreeParser.cpp
c:\ad\antlr-2.7.2\lib\cpp\src\treeparser.cpp(39) : error C2491:
'TreeParser::ASTNULL' : definition of dllimport static data member not
allowed
Error executing cl.exe.

272asl.lib - 4 error(s), 0 warning(s)



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From s_mitra8 at yahoo.com  Wed Jan 22 14:42:22 2003
From: s_mitra8 at yahoo.com (s_mitra8 <s_mitra8@yahoo.com>)
Date: Mon Dec 20 16:15:16 2004
Subject: [antlr-interest] A BASIC ANTLR TUTORIAL SITE
Message-ID: <b0n6oe+10bgb@eGroups.com>

I made this site 
www.geocities.com/antlrtutorial

Could someone evaluate this and let me know where it lacks or how 
worthless it is.If its the worth will Terrence give me a link on to 
the site from ANTLR.ORG(BIGGGG ASK !!!) or someone who has a site 
that GOOGLE finds as a search for antle or grammar related stuff.

Regards,
Sudip.


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From parrt at jguru.com  Wed Jan 22 14:48:26 2003
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:15:16 2004
Subject: [antlr-interest] A BASIC ANTLR TUTORIAL SITE
In-Reply-To: <b0n6oe+10bgb@eGroups.com>
Message-ID: <9E9FFB92-2E5B-11D7-AACB-000393BB647E@jguru.com>

I'm adding to the doc/getting-started.html page now :)

Ter
On Wednesday, January 22, 2003, at 02:42 PM, s_mitra8 
<s_mitra8@yahoo.com> wrote:

> I made this site
> www.geocities.com/antlrtutorial
>
> Could someone evaluate this and let me know where it lacks or how
> worthless it is.If its the worth will Terrence give me a link on to
> the site from ANTLR.ORG(BIGGGG ASK !!!) or someone who has a site
> that GOOGLE finds as a search for antle or grammar related stuff.
>
> Regards,
> Sudip.
>
>
>
>
> Your use of Yahoo! Groups is subject to 
> http://docs.yahoo.com/info/terms/
>
>
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org
Lecturer in Comp. Sci., University of San Francisco


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From hushlee83 at yahoo.com.sg  Wed Jan 22 16:03:14 2003
From: hushlee83 at yahoo.com.sg (=?iso-8859-1?q?Sharon=20Li?=)
Date: Mon Dec 20 16:15:16 2004
Subject: [antlr-interest] Reading contents of file using Antlr
In-Reply-To: <170826586F3BD511910D0200C110AAA80540211C@memail03.bco-home.com>
Message-ID: <20030123000314.2188.qmail@web40903.mail.yahoo.com>


Hi,

Thanks for th help. Below is the code for my grammer file.
/***********************************************************************/
class CSVParser extends Parser;
options { k=4; }
{
 LsystemsString ls = new LsystemsString();
 
 public LsystemsString getLsystemsString(){
  return ls;
 }
}
file   : ( line (NEWLINE line)*(NEWLINE)? EOF)
       {System.out.println("file matched");}
       ;
line   : ((record)+ )
       ;
record : ((r:KEYWORD) (sc: SEMICOLON)? (n:RECORD)*  (COMMENT)?)
       {
    System.out.println("attribute = " + r.getText());
        System.out.println("value = "+n.getText());
    ls.addNext(r.getText(),n.getText());
    System.out.println("LS size: "+ls.getArrayListSize());
    }
    ;
    
class CSVLexer extends Lexer;
options { 
 charVocabulary='\3'..'\377'; 
 k = 4;
}
RECORD  : ('a'..'z' | 'A'..'Z'| NUMERIC)(!~('\r'|'\n'|':'))+ ;
KEYWORD 
 : "angle factor"
 | "initial color"
 | "color increment"
 | "initial line width"
 | "line width increment"
 | "viewpoint"
 | "view reference point"
 | "twist"
 | "projection"
 | "front distance"
 | "back distance"
 | "scale factor"
 | "z buffer"
 | "cue range"
 | "shade mode"
 | "line style"
 | "light direction"
 | "diffuse reflection"
 | "tropism direction"
 | "initial elasticity"
 | "elasticity increment"
 | "render mode"
 ;
NUMERIC : ('0'..'9'|','|'.'|'-')+;
SEMICOLON : ':';
BRACKET : ('(' | ')');
COMMENT : "/*" (options {greedy=false;} :.)* "*/" ;
NEWLINE : ('\r''\n')=> '\r''\n' //DOS
        | '\r'                  //MAC
        | '\n'                  //UNIX
        { newline(); }
        ;
    
WS      : (' '|'\t') { $setType(Token.SKIP); } ;
/************************************************************************************/
 mzukowski@yci.com wrote:Lexical nondeterminism means you have two lexical rules that are in
conflict, meaning they have the same prefix. Post a small but complete
example which has the error message and we'll be able to help you. 

Monty


-----Original Message-----
From: Sharon Li [mailto:hushlee83@yahoo.com.sg]
Sent: Tuesday, January 21, 2003 11:43 PM
To: Antlr Interest Group
Subject: [antlr-interest] Reading contents of file using Antlr


Hi, 
I'm a Java programmer and relatively new to Antlr. I need to write Antlr
code to read in a text file and extract only the necessary information. How
can I go about doing that? An example of the contents of the file might look
like that : 
angle focus : 0.0005
color : blue
line width : 12
I often get the error msg:
warning : lexical nondeterminism upon ...
Also when do we use the TreeParser and what is the different between a
Parser and a TreeParser? When do we define tokens and what is it for ? Pls
help! Thanks very much.
Yahoo! Travel
- Get the latest travel deals in town! 
Your use of Yahoo! Groups is subject to the Yahoo! Terms of Service. 



Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


?Yahoo! Travel
- Get the latest travel deals in town!
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20030123/dd95a8c4/attachment.html
From nk.truong at student.qut.edu.au  Wed Jan 22 17:50:09 2003
From: nk.truong at student.qut.edu.au (tdknghi <nk.truong@student.qut.edu.au>)
Date: Mon Dec 20 16:15:16 2004
Subject: [antlr-interest] ANTLR 2.7.2 Java grammar problem.
Message-ID: <b0nhoh+11c8s@eGroups.com>

  Hi all,

Have any of you try to run the java example in examples\java\java?

I have the following error message when attemp to run
   java Main -showtree myjava.java

parser exception: java.lang.NullPointerException
java.lang.NullPointerException
        at JavaRecognizer.importDefinition(JavaRecognizer.java:246)
        at JavaRecognizer.compilationUnit(JavaRecognizer.java:161)
        at Main.parseFile(Main.java:92)
        at Main.doFile(Main.java:64)
        at Main.main(Main.java:35)

Do you have any idea what goes wrong?

Many thanks for your help.

Cheers
MM



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From nk.truong at student.qut.edu.au  Wed Jan 22 17:56:21 2003
From: nk.truong at student.qut.edu.au (tdknghi <nk.truong@student.qut.edu.au>)
Date: Mon Dec 20 16:15:16 2004
Subject: [antlr-interest] Adding extra key words into Java programming language
Message-ID: <b0ni45+n8ss@eGroups.com>

  Hi,

I would like to add one extra keyword into the java grammar file so 
that the parser will recognize a java program with has my keyword. 
Do you have any idea how to do it? 

Thanks.

MM


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From parrt at jguru.com  Wed Jan 22 18:03:00 2003
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:15:16 2004
Subject: [antlr-interest] Adding extra key words into Java programming language
In-Reply-To: <b0ni45+n8ss@eGroups.com>
Message-ID: <CC7C4C04-2E76-11D7-9EE1-000393BB647E@jguru.com>


On Wednesday, January 22, 2003, at 05:56 PM, tdknghi 
<nk.truong@student.qut.edu.au> wrote:

>   Hi,
>
> I would like to add one extra keyword into the java grammar file so
> that the parser will recognize a java program with has my keyword.
> Do you have any idea how to do it?
>
Sure.  Just use the keyword where you want (Like I did with "assert").

I'm not sure what the problem is with the java stuff...works great for 
me.  Line 246 is:

                         if ( inputState.guessing==0 ) {

which implies that something is pretty screwy.  Did you modify 
Main.java or anything?

Terence

--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org
Lecturer in Comp. Sci., University of San Francisco


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From nk.truong at student.qut.edu.au  Wed Jan 22 18:03:40 2003
From: nk.truong at student.qut.edu.au (tdknghi <nk.truong@student.qut.edu.au>)
Date: Mon Dec 20 16:15:16 2004
Subject: [antlr-interest] grammar inheritance example
Message-ID: <b0nihs+3nal@eGroups.com>

  Hi all,

I would like to extends the java.g grammar. I attempt to extend the 
grammar with the grammar bellow and here is the error.

<grammar.g>

class MyJavaParser extends JavaRecognizer;
options
{
	k = 2;
	exportVocab=MyJava;
	importVocab=Java;
	buildAST = true;
}

gapDeclaration: B_GAP;

class MyJavaLexer extends JavaLexer;

options
{
	exportVocab=MyJava;
	importVocab=Java;
}
B_GAP : "GAP";

Here is the error messages when you run java antlr.Tool grammar.g

ANTLR Parser Generator   Version 2.7.1   1989-2000 jGuru.com
error: grammar JavaLexer not defined
error: grammar JavaRecognizer not defined

Do any of you have any idea what goes wrong?

Thanks.

MM


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From parrt at jguru.com  Wed Jan 22 18:05:50 2003
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:15:16 2004
Subject: [antlr-interest] grammar inheritance example
In-Reply-To: <b0nihs+3nal@eGroups.com>
Message-ID: <31E36876-2E77-11D7-9EE1-000393BB647E@jguru.com>

First upgrade to 2.7.2 then use -glib java.g option on antlr (or on 
2.7.1).

Terence

On Wednesday, January 22, 2003, at 06:03 PM, tdknghi 
<nk.truong@student.qut.edu.au> wrote:

>   Hi all,
>
> I would like to extends the java.g grammar. I attempt to extend the
> grammar with the grammar bellow and here is the error.
>
> <grammar.g>
>
> class MyJavaParser extends JavaRecognizer;
> options
> {
> 	k = 2;
> 	exportVocab=MyJava;
> 	importVocab=Java;
> 	buildAST = true;
> }
>
> gapDeclaration: B_GAP;
>
> class MyJavaLexer extends JavaLexer;
>
> options
> {
> 	exportVocab=MyJava;
> 	importVocab=Java;
> }
> B_GAP : "GAP";
>
> Here is the error messages when you run java antlr.Tool grammar.g
>
> ANTLR Parser Generator   Version 2.7.1   1989-2000 jGuru.com
> error: grammar JavaLexer not defined
> error: grammar JavaRecognizer not defined
>
> Do any of you have any idea what goes wrong?
>
> Thanks.
>
> MM
>
>
>
>
> Your use of Yahoo! Groups is subject to 
> http://docs.yahoo.com/info/terms/
>
>
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org
Lecturer in Comp. Sci., University of San Francisco


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From xeenman at yahoo.com  Wed Jan 22 18:22:36 2003
From: xeenman at yahoo.com (William Lam <xeenman@yahoo.com>)
Date: Mon Dec 20 16:15:16 2004
Subject: [antlr-interest] whitespaces in middle of rule
Message-ID: <b0njlc+ivq3@eGroups.com>

Sorry for this newbie question, but I wish to parse a grammar
such as a Java import statement i.e.

import aaaa.bbbb.cccc.*;

so I set up a grammar similar to this

import_statement:
    "import" IDENT (DOT (IDENT | STAR))* SEMI
    ;

The problem is that the rule will validate statments filled with 
spaces, such as this

import aaaa . bbbb . cccc . *;

How do I make sure my import statements do not have any spaces?  I 
notice that the example under antlr/examples/java exhibit this
problem.


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From s_mitra8 at yahoo.com  Wed Jan 22 18:45:02 2003
From: s_mitra8 at yahoo.com (sudip mitra)
Date: Mon Dec 20 16:15:16 2004
Subject: [antlr-interest] whitespaces in middle of rule
In-Reply-To: <b0njlc+ivq3@eGroups.com>
Message-ID: <20030123024502.76572.qmail@web10409.mail.yahoo.com>


will any newbee tell me about the how worthy that tutorial at www.geocities.com/antlrtutorial is. A lot of em are not newbees in this group but helps to know about any lack of 
explanation . There arent any newbee tutorials on ANTLR (I HAD A HECK OF A TIME FINDING THEM...THOUGH TERENCE'S DRAFT CHAPTERS HAD NOT APPEARED THEN...I FORGOT !!!THERE IS MATERIAL BORROWED  FROM TERENCE"S DRAFT CHAPTERS ...HOPE HE DOES NOT SUE ME FOR THIS ...)
and I am keen to take this forward or take it off the web.
 "William Lam <xeenman@yahoo.com>" <xeenman@yahoo.com> wrote:Sorry for this newbie question, but I wish to parse a grammar
such as a Java import statement i.e.

import aaaa.bbbb.cccc.*;

so I set up a grammar similar to this

import_statement:
"import" IDENT (DOT (IDENT | STAR))* SEMI
;

The problem is that the rule will validate statments filled with 
spaces, such as this

import aaaa . bbbb . cccc . *;

How do I make sure my import statements do not have any spaces? I 
notice that the example under antlr/examples/java exhibit this
problem.




Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 




---------------------------------
Do you Yahoo!?
Yahoo! Mail Plus - Powerful. Affordable. Sign up now
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20030122/3d61930c/attachment.html
From cintyram at yahoo.com  Wed Jan 22 19:05:58 2003
From: cintyram at yahoo.com (cintyram <cintyram@yahoo.com>)
Date: Mon Dec 20 16:15:16 2004
Subject: [antlr-interest] feed back on tutorial
In-Reply-To: <20030123024502.76572.qmail@web10409.mail.yahoo.com>
Message-ID: <b0nm6m+u5qm@eGroups.com>

hi sudip,
 first of all i must say thanks for coming up with a good tutorial ;
 and coupled with the examples is a very god resource ;
im sure as you said you wrote it in a hurry, you will find places to
improve it;  though i must confess i did spend some time initially and
bugged quite a few good souls on this list to understand all that
stuff; i find that it is very good and interesting to revise all the
concepts;
as of now i can only suggest changes to the cosmetics, which i hope
wont take a long time for you to incorporate,

plese highlight the more important material either with a different
light  colored background, or use bold and bigger font size, 

there are som eother tutorials also on the web, but i liked the
exhaustive nature of this one and also it is neatly classified ;

i hope once ter puts his lecture notes up , we will have some really
good material ;
 
my guess is most ppl who will want to read a tutorial are either
studetns or professionals seriously considering implementation . 

for students it will be good to provide easy instructions for runtime
environemnts also ; i had done a real dummies style write up on what i
did to compile a static lib for vc at
http://www.geocities.com/cintyram/antlr
but now im running into problems trying to build a staic lib for 
2.7.2 ; [please read my last post im sorry i did not change the
subject ]  my idea was that to learn how to wrtie a grammar file, one
can start easily by starting with a template..

i will go thru your tutorial once again over this week end and sed you
more detailed feed back; 
once again you did a very good job and by all means every one would
want you to continue  to improve that tutorial ;
all the best
cheers
ram




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From parrt at jguru.com  Wed Jan 22 19:45:44 2003
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:15:16 2004
Subject: [antlr-interest] whitespaces in middle of rule
In-Reply-To: <20030123024502.76572.qmail@web10409.mail.yahoo.com>
Message-ID: <2684F5CE-2E85-11D7-9EE1-000393BB647E@jguru.com>


On Wednesday, January 22, 2003, at 06:45 PM, sudip mitra wrote:

> will any newbee tell me about the how worthy that tutorial at 
> www.geocities.com/antlrtutorial is. A lot of em are not newbees in 
> this group but helps to know about any lack of
>
> explanation . There arent any newbee tutorials on?ANTLR (I HAD A HECK 
> OF A TIME FINDING THEM...THOUGH TERENCE'S?DRAFT CHAPTERS HAD NOT 
> APPEARED THEN...I FORGOT !!!THERE IS MATERIAL BORROWED ?FROM TERENCE"S 
> DRAFT CHAPTERS ...HOPE HE DOES NOT SUE ME FOR THIS ...)

Come to think of it...you should at least give my book chapters credit 
;)

Ter
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org
Lecturer in Comp. Sci., University of San Francisco


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From parrt at jguru.com  Wed Jan 22 19:46:07 2003
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:15:16 2004
Subject: [antlr-interest] whitespaces in middle of rule
In-Reply-To: <b0njlc+ivq3@eGroups.com>
Message-ID: <34525D1C-2E85-11D7-9EE1-000393BB647E@jguru.com>


On Wednesday, January 22, 2003, at 06:22 PM, William Lam 
<xeenman@yahoo.com> wrote:

> Sorry for this newbie question, but I wish to parse a grammar
> such as a Java import statement i.e.
>
> import aaaa.bbbb.cccc.*;
>
> so I set up a grammar similar to this
>
> import_statement:
>     "import" IDENT (DOT (IDENT | STAR))* SEMI
>     ;
>
> The problem is that the rule will validate statments filled with
> spaces, such as this
>
> import aaaa . bbbb . cccc . *;
>
> How do I make sure my import statements do not have any spaces?  I
> notice that the example under antlr/examples/java exhibit this
> problem.

Is it really illegal in Java?

Anyway, move it into the lexer if you need to.  Might be a 
context-sensitive problem though then matching ID.

Ter
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org
Lecturer in Comp. Sci., University of San Francisco


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From xeenman at yahoo.com  Wed Jan 22 19:57:15 2003
From: xeenman at yahoo.com (William Lam <xeenman@yahoo.com>)
Date: Mon Dec 20 16:15:16 2004
Subject: [antlr-interest] Re: whitespaces in middle of rule
In-Reply-To: <34525D1C-2E85-11D7-9EE1-000393BB647E@jguru.com>
Message-ID: <b0np6r+elko@eGroups.com>

good point and somewhat bad example, it is not illegal in java. 
Thanks!

--- In antlr-interest@yahoogroups.com, Terence Parr <parrt@j...> 
wrote:
> 
> On Wednesday, January 22, 2003, at 06:22 PM, William Lam 
> <xeenman@y...> wrote:
> 
> > Sorry for this newbie question, but I wish to parse a grammar
> > such as a Java import statement i.e.
> >
> > import aaaa.bbbb.cccc.*;
> >
> > so I set up a grammar similar to this
> >
> > import_statement:
> >     "import" IDENT (DOT (IDENT | STAR))* SEMI
> >     ;
> >
> > The problem is that the rule will validate statments filled with
> > spaces, such as this
> >
> > import aaaa . bbbb . cccc . *;
> >
> > How do I make sure my import statements do not have any spaces?  I
> > notice that the example under antlr/examples/java exhibit this
> > problem.
> 
> Is it really illegal in Java?
> 
> Anyway, move it into the lexer if you need to.  Might be a 
> context-sensitive problem though then matching ID.
> 
> Ter
> --
> Co-founder, http://www.jguru.com
> Creator, ANTLR Parser Generator: http://www.antlr.org
> Lecturer in Comp. Sci., University of San Francisco


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From s_mitra8 at yahoo.com  Wed Jan 22 20:07:06 2003
From: s_mitra8 at yahoo.com (sudip mitra)
Date: Mon Dec 20 16:15:16 2004
Subject: [antlr-interest] whitespaces in middle of rule
In-Reply-To: <2684F5CE-2E85-11D7-9EE1-000393BB647E@jguru.com>
Message-ID: <20030123040706.10652.qmail@web10404.mail.yahoo.com>


if I could only parse your comments terence ..:-)  ... would you mean I did not mention on the website about the book or ...dunno ???? I am completely at sea :-(...
... thanks cinty ...looking forward to your critical appraisal...should start work as soon as you let me know more and Dr.Parr's response to my latest query...
 Terence Parr <parrt@jguru.com> wrote:
On Wednesday, January 22, 2003, at 06:45 PM, sudip mitra wrote:

> will any newbee tell me about the how worthy that tutorial at 
> www.geocities.com/antlrtutorial is. A lot of em are not newbees in 
> this group but helps to know about any lack of
>
> explanation . There arent any newbee tutorials on ANTLR (I HAD A HECK 
> OF A TIME FINDING THEM...THOUGH TERENCE'S DRAFT CHAPTERS HAD NOT 
> APPEARED THEN...I FORGOT !!!THERE IS MATERIAL BORROWED  FROM TERENCE"S 
> DRAFT CHAPTERS ...HOPE HE DOES NOT SUE ME FOR THIS ...)

Come to think of it...you should at least give my book chapters credit 
;)

Ter
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org
Lecturer in Comp. Sci., University of San Francisco




Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 




---------------------------------
Do you Yahoo!?
Yahoo! Mail Plus - Powerful. Affordable. Sign up now
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20030122/e1c5fb08/attachment.html
From jbb at acm.org  Wed Jan 22 21:13:26 2003
From: jbb at acm.org (jbb@acm.org)
Date: Mon Dec 20 16:15:16 2004
Subject: [antlr-interest] Reading contents of file using Antlr
In-Reply-To: <20030123000314.2188.qmail@web40903.mail.yahoo.com> (message from
	=?iso-8859-1?q?Sharon=20Li?= on Thu, 23 Jan 2003 08:03:14 +0800 (CST))
References: <20030123000314.2188.qmail@web40903.mail.yahoo.com>
Message-ID: <E18bZg6-0005WI-00@gecko.home.org>

Hello :-

I am not sure that this reply to your lexical non-determinism question will
be of any help to you...

I strictly focused on the lexer, I think your parser has alot of problems but
I suspect that you are still working on the parser so I did not worry too
much about its problems.

I was able to remove some of the lexical non-determinism in your lexer (an
updated CSVLexer is attached). But I could not completely remove all of the
non-determinism.

The non-determinism in your lexer seems to be centered on your RECORD token.

The first problem I see is between RECORD and NUMERIC. Your rules are:

RECORD  : ('a'..'z' | 'A'..'Z'| NUMERIC)(!~('\r'|'\n'|':'))+ ;

NUMERIC : ('0'..'9'|','|'.'|'-')+;

the problem I see here is that when trying to recognize RECORD, and if the
lexer is given the sequence of characters 000000, the lexer is unable to
determine whether the second and subsequen 0's belong to the leading NUMERIC
sub-component of the RECORD token or belong to the trailing
(!~('\r'|'\n'|':'))+ sub-component of the RECORD token. So I would change
these token rule to be:

protected DIGIT : '0'..'9'|','|'.'|'-';

NUMERIC : ( DIGIT )+;

RECORD : ('a'..'z' | 'A'..'Z' | DIGIT) (!~('\r'|'\n'|':'))+;

and we now have just a single leading character for RECORD followed by any
number of non-(newline or colon) characters. But we still have some
non-determinism here. We have specified that the sequence of characters
000000 is to be recognized as either a NUMERIC token or a RECORD token and
the lexer has no way of knowing which token we really want.

The next problem I see is with the KEYWORD token. There is internal
non-determinism in this token's definition because your k=4 character look
ahead is not enough to uniquely identify all of the keywords. For example
"initial color" and "initial line width" are identical in the first 4
characters, these two keyword strings would need k=9 look ahead I think.

But I really hate look ahead and so I would replace your KEYWORD rule with:

KEYWORD
    : "angle factor"
    | "back distance"
    | "c" ( "olor increment" | "ue range" )
    | "diffuse reflection"
    | "elasticity increment"
    | "front distance"
    | "initial " ( "color" | "elasticity" | "line width" )
    | "li" ( "ght direction" | "ne " ( "style" | "width increment" ) )
    | "projection"
    | "render mode"
    | "s" ( "cale factor" | "hade mode" )
    | "t" ( "ropism direction" | "wist" )
    | "view" ( " reference point" | "point" )
    | "z buffer"
    ;

Unfortunately this still leaves us with lexical non-determinism between
KEYWORD and RECORD because we have specified that the character sequence (for
example):

				angle factor

is both a KEYWORD token and a RECORD token. The lexer has no way of knowing
which token we really want.

This is the complete modified lexer I tried:
//------------------
class CSVLexer extends Lexer;
options {
    charVocabulary='\3'..'\377';
    /*k = 4;*/
}

protected DIGIT : '0'..'9'|','|'.'|'-';

NUMERIC : ( DIGIT )+;

RECORD : ('a'..'z' | 'A'..'Z' | DIGIT) (!~('\r'|'\n'|':'))+;

KEYWORD
    : "angle factor"
    | "back distance"
    | "c" ( "olor increment" | "ue range" )
    | "diffuse reflection"
    | "elasticity increment"
    | "front distance"
    | "initial " ( "color" | "elasticity" | "line width" )
    | "li" ( "ght direction" | "ne " ( "style" | "width increment" ) )
    | "projection"
    | "render mode"
    | "s" ( "cale factor" | "hade mode" )
    | "t" ( "ropism direction" | "wist" )
    | "view" ( " reference point" | "point" )
    | "z buffer"
    ;

SEMICOLON : ':'; // ??? maybe should be ';', ':' is a COLON

BRACKET : ('(' | ')');

COMMENT : "/*" (options {greedy=false;} :.)* "*/" ;

NEWLINE : ('\r''\n')=> '\r''\n' //DOS
        | '\r'                  //MAC
        | '\n'                  //UNIX
        { newline(); }
        ;
   
WS      : (' '|'\t') { $setType(Token.SKIP); } ;
//--------------------

and these are the errors Antlr finds when processing the modified lexer:
//--------------------
java antlr.Tool CSVLexer.g
ANTLR Parser Generator   Version 2.7.2a4 (20021027-1)   1989-2002 jGuru.com
warning: lexical nondeterminism between rules NUMERIC and RECORD upon
CSVLexer.g: 	k==1:','..'.','0'..'9'
warning: lexical nondeterminism between rules RECORD and KEYWORD upon
CSVLexer.g: 	k==1:'a'..'f','i','l','p','r'..'t','v','z'
//--------------------

I suspect you could probably use lexical states to distinguish when NUMERIC,
KEYWORD, and RECORD are expected to be uniquely valid in the input stream of
characters from the file. But lexical states can get really nasty. I hope
that perhaps you are able to refine your parsing rules so that these three
ambiguous tokens can be re-defined to be unambigous.

Hope this helps...

-- 
	-jbb
----------------+----------------------------
 John B. Brodie | Email : jbrodie@cs.fit.edu
----------------+----------------------------

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From hushlee83 at yahoo.com.sg  Wed Jan 22 21:47:02 2003
From: hushlee83 at yahoo.com.sg (=?iso-8859-1?q?Sharon=20Li?=)
Date: Mon Dec 20 16:15:16 2004
Subject: [antlr-interest] Reading contents of file using Antlr
In-Reply-To: <E18bZg6-0005WI-00@gecko.home.org>
Message-ID: <20030123054702.42583.qmail@web40911.mail.yahoo.com>


G'day!
Thanks so much for helping and going into so much detail. I will make the necessary adjustments and will let you know if things work out. =) 
Cheers,
Sharon
 jbb@acm.org wrote:Hello :-

I am not sure that this reply to your lexical non-determinism question will
be of any help to you...

I strictly focused on the lexer, I think your parser has alot of problems but
I suspect that you are still working on the parser so I did not worry too
much about its problems.

I was able to remove some of the lexical non-determinism in your lexer (an
updated CSVLexer is attached). But I could not completely remove all of the
non-determinism.

The non-determinism in your lexer seems to be centered on your RECORD token.

The first problem I see is between RECORD and NUMERIC. Your rules are:

RECORD : ('a'..'z' | 'A'..'Z'| NUMERIC)(!~('\r'|'\n'|':'))+ ;

NUMERIC : ('0'..'9'|','|'.'|'-')+;

the problem I see here is that when trying to recognize RECORD, and if the
lexer is given the sequence of characters 000000, the lexer is unable to
determine whether the second and subsequen 0's belong to the leading NUMERIC
sub-component of the RECORD token or belong to the trailing
(!~('\r'|'\n'|':'))+ sub-component of the RECORD token. So I would change
these token rule to be:

protected DIGIT : '0'..'9'|','|'.'|'-';

NUMERIC : ( DIGIT )+;

RECORD : ('a'..'z' | 'A'..'Z' | DIGIT) (!~('\r'|'\n'|':'))+;

and we now have just a single leading character for RECORD followed by any
number of non-(newline or colon) characters. But we still have some
non-determinism here. We have specified that the sequence of characters
000000 is to be recognized as either a NUMERIC token or a RECORD token and
the lexer has no way of knowing which token we really want.

The next problem I see is with the KEYWORD token. There is internal
non-determinism in this token's definition because your k=4 character look
ahead is not enough to uniquely identify all of the keywords. For example
"initial color" and "initial line width" are identical in the first 4
characters, these two keyword strings would need k=9 look ahead I think.

But I really hate look ahead and so I would replace your KEYWORD rule with:

KEYWORD
: "angle factor"
| "back distance"
| "c" ( "olor increment" | "ue range" )
| "diffuse reflection"
| "elasticity increment"
| "front distance"
| "initial " ( "color" | "elasticity" | "line width" )
| "li" ( "ght direction" | "ne " ( "style" | "width increment" ) )
| "projection"
| "render mode"
| "s" ( "cale factor" | "hade mode" )
| "t" ( "ropism direction" | "wist" )
| "view" ( " reference point" | "point" )
| "z buffer"
;

Unfortunately this still leaves us with lexical non-determinism between
KEYWORD and RECORD because we have specified that the character sequence (for
example):

angle factor

is both a KEYWORD token and a RECORD token. The lexer has no way of knowing
which token we really want.

This is the complete modified lexer I tried:
//------------------
class CSVLexer extends Lexer;
options {
charVocabulary='\3'..'\377';
/*k = 4;*/
}

protected DIGIT : '0'..'9'|','|'.'|'-';

NUMERIC : ( DIGIT )+;

RECORD : ('a'..'z' | 'A'..'Z' | DIGIT) (!~('\r'|'\n'|':'))+;

KEYWORD
: "angle factor"
| "back distance"
| "c" ( "olor increment" | "ue range" )
| "diffuse reflection"
| "elasticity increment"
| "front distance"
| "initial " ( "color" | "elasticity" | "line width" )
| "li" ( "ght direction" | "ne " ( "style" | "width increment" ) )
| "projection"
| "render mode"
| "s" ( "cale factor" | "hade mode" )
| "t" ( "ropism direction" | "wist" )
| "view" ( " reference point" | "point" )
| "z buffer"
;

SEMICOLON : ':'; // ??? maybe should be ';', ':' is a COLON

BRACKET : ('(' | ')');

COMMENT : "/*" (options {greedy=false;} :.)* "*/" ;

NEWLINE : ('\r''\n')=> '\r''\n' //DOS
| '\r' //MAC
| '\n' //UNIX
{ newline(); }
;

WS : (' '|'\t') { $setType(Token.SKIP); } ;
//--------------------

and these are the errors Antlr finds when processing the modified lexer:
//--------------------
java antlr.Tool CSVLexer.g
ANTLR Parser Generator Version 2.7.2a4 (20021027-1) 1989-2002 jGuru.com
warning: lexical nondeterminism between rules NUMERIC and RECORD upon
CSVLexer.g: k==1:','..'.','0'..'9'
warning: lexical nondeterminism between rules RECORD and KEYWORD upon
CSVLexer.g: k==1:'a'..'f','i','l','p','r'..'t','v','z'
//--------------------

I suspect you could probably use lexical states to distinguish when NUMERIC,
KEYWORD, and RECORD are expected to be uniquely valid in the input stream of
characters from the file. But lexical states can get really nasty. I hope
that perhaps you are able to refine your parsing rules so that these three
ambiguous tokens can be re-defined to be unambigous.

Hope this helps...

-- 
-jbb
----------------+----------------------------
John B. Brodie | Email : jbrodie@cs.fit.edu
----------------+----------------------------



Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


?Yahoo! Travel
- Get the latest travel deals in town!
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20030123/d6deccb2/attachment.html
From hushlee83 at yahoo.com.sg  Wed Jan 22 22:21:22 2003
From: hushlee83 at yahoo.com.sg (=?iso-8859-1?q?Sharon=20Li?=)
Date: Mon Dec 20 16:15:16 2004
Subject: [antlr-interest] Error msg
Message-ID: <20030123062122.4926.qmail@web40901.mail.yahoo.com>


Hi, can someone tell me what does this following error imply? Thanks.

java.lang.NoClassDefFoundError: antlr/ANTLRGrammarParseBehavior
 at antlr.NoViableAltException.toString(NoViableAltException.java:58)
 at java.lang.String.valueOf(String.java:2177)
 at java.io.PrintStream.print(PrintStream.java:462)
 at java.io.PrintStream.println(PrintStream.java:599)
 at antlr.Parser.reportError(Parser.java:236)
 at AntlrParser.record(AntlrParser.java:210)
 at AntlrParser.line(AntlrParser.java:107)
 at AntlrParser.file(AntlrParser.java:56)
 at Main2.main(Main2.java:21)

 

?Yahoo! Travel
- Get the latest travel deals in town!
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20030123/eeb79730/attachment.html
From parrt at jguru.com  Wed Jan 22 22:35:54 2003
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:15:16 2004
Subject: [antlr-interest] whitespaces in middle of rule
In-Reply-To: <20030123040706.10652.qmail@web10404.mail.yahoo.com>
Message-ID: <EC5EF6BC-2E9C-11D7-9EE1-000393BB647E@jguru.com>


On Wednesday, January 22, 2003, at 08:07 PM, sudip mitra wrote:

> if?I could only parse your comments terence ..:-)? ... would you mean 
> I did not mention on the website about the book or?...dunno ???? I am 
> completely at sea?:-(...
>

Sorry...I just meant that typically people give reference to material 
they did not write so as not to pass it off as their work; 
unprofessional and then there is the whole copyright bugaboo ;)

Terence
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org
Lecturer in Comp. Sci., University of San Francisco


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From parrt at jguru.com  Wed Jan 22 22:37:47 2003
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:15:16 2004
Subject: [antlr-interest] Error msg
In-Reply-To: <20030123062122.4926.qmail@web40901.mail.yahoo.com>
Message-ID: <2FB3EF5A-2E9D-11D7-9EE1-000393BB647E@jguru.com>

Use the source, Luke! ;)  I suggest taking a peak at the input stream 
(i.e., your input grammar) and the source code.

Saying "i got an error" is not very useful to those that would lend 
aid. :)

Ter
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org
Lecturer in Comp. Sci., University of San Francisco


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From reidr at bigfoot.com  Wed Jan 22 22:42:50 2003
From: reidr at bigfoot.com (Reid Rivenburgh)
Date: Mon Dec 20 16:15:16 2004
Subject: [antlr-interest] Re: ANTLR build and package layout
Message-ID: <m2vg0ge38k.fsf@speakeasy.org>


 Ric Klaren writes:

 >> > I did this a month or so ago.  The problem is that there is an
 >> > assumption in the configure script that the CLASSPATH separator
 >> > was ":".  However on Windows, it is ";" (to allow for drive
 >> > letters, I guess).  If you change the following line in the
 >> > configure script, you'll be OK:
 >> > 
 >> > CLASSPATH=CLASSPATH:.
 >> > 
 >> > to
 >> > 
 >> > CLASSPATH=CLASSPATH;.
 >> 
 >> I just ran into this problem myself.  I normally run on Linux, but
 >> I'm porting to cygwin.  Does anyone know of a good fix?  (Editing
 >> configure just doesn't feel right!)  It sounds like more of an
 >> autoconf problem.  Is that true?

 RK> It probably needs some stuff in the configure.in. I suspect there
 RK> might be some autoconf using package around you can borrow a
 RK> solution from. If you get it to work under cygwin then I'd be
 RK> much obliged with patches needed to get it to work.

Hi, Ric!  I'm far from an autoconf expert, but after doing some
digging, it looks like the Java-related macros you're using are out of
date.  For example, if you look at the autoconf macro repository
definition of AC_CHECK_CLASSPATH at:

  http://www.gnu.org/software/ac-archive/htmldoc/ac_check_classpath.html

you'll see that it doesn't define CLASSPATH, unlike the contents of
aclocal.m4 in the ANTLR distribution.

I did a simple experiment and commented out the AC_CHECK_CLASSPATH in
the configure.in file, re-running autoconf.  Everything still built
properly on Linux, it seemed.  Is that macro even necessary?  I'm
unable to check on cygwin at the moment, but since it's the problem,
removing it certainly seems like it would fix things!

Apologies in advance if that's a naive solution....

Thanks,
Reid

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From open.zone at virgin.net  Thu Jan 23 01:43:25 2003
From: open.zone at virgin.net (micheal_jor <open.zone@virgin.net>)
Date: Mon Dec 20 16:15:16 2004
Subject: [antlr-interest] Re: ANTLR 2.7.2 Java grammar problem.
In-Reply-To: <b0nhoh+11c8s@eGroups.com>
Message-ID: <b0odft+i8n@eGroups.com>

> Have any of you try to run the java example in examples\java\java?
> 
> I have the following error message when attemp to run
>    java Main -showtree myjava.java

The java example runs fine AFAIK - the grammar is equally robust in 
C#/C++ mode.

If you haven't changed the example, perhaps the file 'myjava.java' is 
trigerring an error?. If your 'myjava.java' isn't too big, you may 
want to post it's contents too.

Micheal



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From open.zone at virgin.net  Thu Jan 23 03:03:12 2003
From: open.zone at virgin.net (micheal_jor <open.zone@virgin.net>)
Date: Mon Dec 20 16:15:16 2004
Subject: [antlr-interest] Re: Reading contents of file using Antlr
In-Reply-To: <20030123000314.2188.qmail@web40903.mail.yahoo.com>
Message-ID: <b0oi5g+g394@eGroups.com>

Hi Sharon,

I'll touch on a few areas where ANTLR can make your life easier. 
Completing the grammar should then be a much easier (and rewarding) 
experience.

[Caveat: I haven't run your example with ANTLR. Just looked at it on 
the site. I may have missed some issues.]

1. Keywords - See changes ###[1] below.

ANTLR provides the tokens {...} options to let you specify the 
keywords in your language. The assumption is that keywords can't also 
be identifiers.
NOTE: You can override that assumption in your Parser grammar for 
individual keywords as shown in:
http://groups.yahoo.com/group/antlr-interest/message/6503

2. NUMERIC rule - 

Are you sure this is what NUMERIC values look like in your system?. 
This rule will accept the following: 
-...,-
,,9-0,..
,,,
... etc.
Studying a few samples of what a NUMERIC looks like (and musn't look 
like) would help make it clearer. I did try to clean it up though be 
aware that RECORD and NUMERIC properly belongs in the Parser not the 
Lexer - where they would be re-named to start with a lower-case 
letter of course.

// Is this what you really meant?
protected LETTER  : ( 'a'..'z' | 'A'..'Z' ) ; 
protected DIGIT   : ( '0'..'9' ) ; 
protected NUMBER  : ('-')? ((DIGIT)* '.')? (DIGIT)+ ;
ID      : LETTER ( DIGIT | LETTER )* ;
NUMERIC : ( NUMBER ( ',' NUMBER )*; 
RECORD  : (ID | NUMERIC)(!~('\r'|'\n'|':'))+ ; 

// Your original
RECORD  : ('a'..'z' | 'A'..'Z'| NUMERIC)(!~('\r'|'\n'|':'))+ ; 
NUMERIC : ('0'..'9'|','|'.'|'-')+; 

3. RECORD rule

What does the trailing pattern '(!~('\r'|'\n'|':'))+' do?. What elase 
is part of a record that you are trying to match? Whitespace and 
SEMICOLON are already taken care of.

Anyways, good luck and be sure to give Ter's Getting started guide a 
good workover ;-)

Micheal

> 
> Hi,
> 
> Thanks for th help. Below is the code for my grammer file.
> /*******************************************************************
****/
> class CSVParser extends Parser;
> options { k=4; }
> {
>  LsystemsString ls = new LsystemsString();
>  
>  public LsystemsString getLsystemsString(){
>   return ls;
>  }
> }
> file   : ( line (NEWLINE line)*(NEWLINE)? EOF)
>        {System.out.println("file matched");}
>        ;
> line   : ((record)+ )
>        ;
> record : ((r:KEYWORD) (sc: SEMICOLON)? (n:RECORD)*  (COMMENT)?)
>        {
>     System.out.println("attribute = " + r.getText());
>         System.out.println("value = "+n.getText());
>     ls.addNext(r.getText(),n.getText());
>     System.out.println("LS size: "+ls.getArrayListSize());
>     }
>     ;
>     
> class CSVLexer extends Lexer;
> options { 
>  charVocabulary='\3'..'\377'; 
>  k = 4;
> }

// change ###[1] - use tokens for keywords
tokens
{
 ANGLE      = "angle";
 FACTOR     = "factor";
 INITIAL    = "initial";
 .........
 .........
 .........
 Z          = "z";
 ELASTICITY = "elasticity";
 INCREMENT  = "increment";
 RENDER     = "render";
 MODE       = "mode";
   
}

> RECORD  : ('a'..'z' | 'A'..'Z'| NUMERIC)(!~('\r'|'\n'|':'))+ ;
> NUMERIC : ('0'..'9'|','|'.'|'-')+;
> SEMICOLON : ':';
> BRACKET : ('(' | ')');
> COMMENT : "/*" (options {greedy=false;} :.)* "*/" ;
> NEWLINE : ('\r''\n')=> '\r''\n' //DOS
>         | '\r'                  //MAC
>         | '\n'                  //UNIX
>         { newline(); }
>         ;
>     
> WS      : (' '|'\t') { $setType(Token.SKIP); } ;
> /*******************************************************************
*****************/
>  mzukowski@y... wrote:Lexical nondeterminism means you have two 
lexical rules that are in
> conflict, meaning they have the same prefix. Post a small but 
complete
> example which has the error message and we'll be able to help you. 
> 
> Monty
> 
> 
> -----Original Message-----
> From: Sharon Li [mailto:hushlee83@y...]
> Sent: Tuesday, January 21, 2003 11:43 PM
> To: Antlr Interest Group
> Subject: [antlr-interest] Reading contents of file using Antlr
> 
> 
> Hi, 
> I'm a Java programmer and relatively new to Antlr. I need to write 
Antlr
> code to read in a text file and extract only the necessary 
information. How
> can I go about doing that? An example of the contents of the file 
might look
> like that : 
> angle focus : 0.0005
> color : blue
> line width : 12
> I often get the error msg:
> warning : lexical nondeterminism upon ...
> Also when do we use the TreeParser and what is the different 
between a
> Parser and a TreeParser? When do we define tokens and what is it 
for ? Pls
> help! Thanks very much.
> Yahoo! Travel
> - Get the latest travel deals in town! 
> Your use of Yahoo! Groups is subject to the Yahoo! Terms of 
Service. 
> 
> 
> 
> Your use of Yahoo! Groups is subject to 
http://docs.yahoo.com/info/terms/ 
> 
> 
> ?Yahoo! Travel
> - Get the latest travel deals in town!


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From open.zone at virgin.net  Thu Jan 23 05:39:48 2003
From: open.zone at virgin.net (micheal_jor <open.zone@virgin.net>)
Date: Mon Dec 20 16:15:16 2004
Subject: [antlr-interest] Re: Coversion of a C++ Parser from PCCTS to ANTLR
In-Reply-To: <3D63AA11.CDB7EADB@sbu.ac.uk>
Message-ID: <b0orb4+ta3h@eGroups.com>

Hi David,

You said this in the past in relation to your work on converting the 
old PCCTS C++ grammar/frontend to work with ANTLR:

> Date: Wed, Aug 21 2002 15:56
> From: David Wigg <wiggjd@s...> 
> Subject: RE: Conversion of a C++ Parser from PCCTS to ANT LR

> Yes, we can make this grammar available soon. Unfortunately most
> of our use of it was with C programs so it has fallen over when
> faced with something really challenging in C++ (CPPLexer.i no
> less!).
> 
> I will fix it soon but I've got some holiday coming up so don't
> hold your breath.

I was wondering if you would consider releasing this ANTLR C++ 
grammar/frontend in it's current state -- whatever that state might 
be. 

Having interested volunteers in the community here working on it in 
tandem would help all parties as any lingering issues will be 
resolved quicker.

Cheers,

Micheal



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From mzukowski at yci.com  Thu Jan 23 08:23:34 2003
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:15:16 2004
Subject: [antlr-interest] Error msg
Message-ID: <170826586F3BD511910D0200C110AAA805402128@memail03.bco-home.com>

Looks like you don't have the antlr jar in your classpath.

Monty

-----Original Message-----
From: Sharon Li [mailto:hushlee83@yahoo.com.sg]
Sent: Wednesday, January 22, 2003 10:21 PM
To: Antlr Interest Group
Subject: [antlr-interest] Error msg


Hi, can someone tell me what does this following error imply? Thanks.
java.lang.NoClassDefFoundError: antlr/ANTLRGrammarParseBehavior
 at antlr.NoViableAltException.toString(NoViableAltException.java:58)
 at java.lang.String.valueOf(String.java:2177)
 at java.io.PrintStream.print(PrintStream.java:462)
 at java.io.PrintStream.println(PrintStream.java:599)
 at antlr.Parser.reportError(Parser.java:236)
 at AntlrParser.record(AntlrParser.java:210)
 at AntlrParser.line(AntlrParser.java:107)
 at AntlrParser.file(AntlrParser.java:56)
 at Main2.main(Main2.java:21)

 Yahoo! Travel
- Get the latest travel deals in town! 
Your use of Yahoo! Groups is subject to the Yahoo! Terms of Service. 

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From weberjn at yahoo.com  Thu Jan 23 08:25:32 2003
From: weberjn at yahoo.com (weberjn <weberjn@yahoo.com>)
Date: Mon Dec 20 16:15:16 2004
Subject: [antlr-interest] How to easily parse a language into a tree ?
Message-ID: <b0p51s+69ub@eGroups.com>

I am trying to parse an IDL (using the grammar in the antlr package)
to extract struct information into a data structure I can work with.

First I tried buildAST=true;
but the resulting linked list does not really help me.

Second I thought of using a tree grammar, but the way to do that seems
difficult and as I userstand, I have to write an additional tree
grammar.

So I started including semantic predicates into the existing IDL
grammar:

member  returns [ Member m ]
{   m=new Member();
	LinkedList l=new LinkedList(); String s;}
	:   s=type_spec { m.type_spec=s; } declarators[l] { m.declarators=l;
}SEMI;
	
where Member is a user class. Basically this would be a tree with
Collections as containers and user defined classes as knodes.

I wonder if this is the most easy way? As it seems it is a lot of work
and clutters the grammar.

Thank you,
Juergen


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From open.zone at virgin.net  Thu Jan 23 08:36:30 2003
From: open.zone at virgin.net (micheal_jor <open.zone@virgin.net>)
Date: Mon Dec 20 16:15:16 2004
Subject: [antlr-interest] Re: How to easily parse a language into a tree ?
In-Reply-To: <b0p51s+69ub@eGroups.com>
Message-ID: <b0p5me+5t02@eGroups.com>


> I am trying to parse an IDL (using the grammar in the antlr package)
> to extract struct information into a data structure I can work with.
> 
> First I tried buildAST=true;
> but the resulting linked list does not really help me.

A few minutes studying the section of the ANTLR documentation on 
building ASTs in Parsers is all you need. The grammar needs 
decorations to specify the structure of the resulting tree.

http://www.antlr.org/doc/trees.html#_bb1

Cheers,

Micheal



PS   Please consider contributing your updated grammar to the vault.




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From johnm-antlr at non.net  Thu Jan 23 09:38:22 2003
From: johnm-antlr at non.net (John D. Mitchell)
Date: Mon Dec 20 16:15:16 2004
Subject: [antlr-interest] whitespaces in middle of rule
In-Reply-To: <b0njlc+ivq3@eGroups.com>
References: <b0njlc+ivq3@eGroups.com>
Message-ID: <15920.10382.940058.812485@non.non.net>

>>>>> "William" == William Lam <xeenman@yahoo com> <xeenman@yahoo.com> writes:
[...]

> Sorry for this newbie question, but I wish to parse a grammar such as a
> Java import statement i.e.

> import aaaa.bbbb.cccc.*;

So, is the language you want actually Java or just something like Java?


> so I set up a grammar similar to this

> import_statement: "import" IDENT (DOT (IDENT | STAR))* SEMI ;

Actually, that allows for invalid import statements to be constructed.
For example:

	import foo.*.*.bar.* ;

Basically, the dot-star construct is only allowable at the end of a package
or type name.

See:
http://java.sun.com/docs/books/jls/second_edition/html/packages.doc.html#70209
for more information from the JLS.


> The problem is that the rule will validate statments filled with spaces,
> such as this

> import aaaa . bbbb . cccc . *;

That's actually correct for Java.

Basically, the "input elements" are lexed and *then* whitespace and
comments are discarded -- resulting in the program's lexical token stream.

See:
http://java.sun.com/docs/books/jls/second_edition/html/lexical.doc.html#44591
http://java.sun.com/docs/books/jls/second_edition/html/names.doc.html#31692
http://java.sun.com/docs/books/jls/second_edition/html/names.doc.html#25430


> How do I make sure my import statements do not have any spaces?  I notice
> that the example under antlr/examples/java exhibit this problem.

I don't understand what you mean by the fact that the java examples exhibit
this problem.  That use of white space is quite legal in Java.  For
example, all of the following are legal.  Ugly, confusing, whatever but
legal:

import java . io . PrintWriter;

import java . io 
		.* ;
import java. /* foo . */ lang.* ;
import java./*foo.*/lang.*;


If want to restrict the uses of whitespace then you'll need to push those
constructs back into the lexer.  I.e., have the lexer recognize the
construct that you want without any use of whitespace.

Hmm... Now that I think about it for 3 seconds, you might be able to do it
by adding a whitespace token stream and having your parser check it when
you get to the constructs that you want.

Take care,
	John


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From philippe.lavoie at cactus.ca  Thu Jan 23 11:16:54 2003
From: philippe.lavoie at cactus.ca (Philippe Lavoie <philippe.lavoie@cactus.ca>)
Date: Mon Dec 20 16:15:16 2004
Subject: [antlr-interest] Please help with my first project
Message-ID: <b0pf36+87gi@eGroups.com>

Hi,

I'm running into several problems and if some kind sould wouldn't mind
helping out, I'd really appreciate it.

I have basically this problem:
  - how to declare context dependant grammar

I want to create a language to be used as an interface to my
mathematical mophology library (i.e. image processing operators). I
think that antlr is up to the challenge but unfortunately it seems I'm
not. I've read a lot of tutorials but it seems it's not enough :(

Here is an example of a program I'd like to parse

// Start
Image image;
Kernel k1;
Kernel k2;

k1 = disk(10);
k2 = matrix(3,3);
k2[0] = "001";
k2[1] = "010";
k2[2] = "100";

image.load("someimage.png");

Image result;
result = (image open k1) close k2;

result.save("result.png");
// End



I can't figure out how to restrict .load and .save to an image that
has been declared nor can I figure out how to differentiate between a
kernel and an image assignment since both k1 or result are viewed as
ID by the lexer.

I could do the above in C++, but I kind of would like to have an
interpreted syntax version like above to speed up my tests.

Thanks for any tips.

Phil


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From mzukowski at yci.com  Thu Jan 23 11:53:00 2003
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:15:16 2004
Subject: [antlr-interest] Please help with my first project
Message-ID: <170826586F3BD511910D0200C110AAA805402135@memail03.bco-home.com>

Those are questions of semantics and probably best handled in a tree parser.
After the syntax is ok the program is parsed and then represented as an AST.
Perhaps a symbol table is built at that point too.  Further passes over the
AST can do type checking.  In your case a further pass would actually
interpret the code and execute your image processing functions.

Monty

-----Original Message-----
From: Philippe Lavoie <philippe.lavoie@cactus.ca>
[mailto:philippe.lavoie@cactus.ca]
Sent: Thursday, January 23, 2003 11:17 AM
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] Please help with my first project


Hi,

I'm running into several problems and if some kind sould wouldn't mind
helping out, I'd really appreciate it.

I have basically this problem:
  - how to declare context dependant grammar

I want to create a language to be used as an interface to my
mathematical mophology library (i.e. image processing operators). I
think that antlr is up to the challenge but unfortunately it seems I'm
not. I've read a lot of tutorials but it seems it's not enough :(

Here is an example of a program I'd like to parse

// Start
Image image;
Kernel k1;
Kernel k2;

k1 = disk(10);
k2 = matrix(3,3);
k2[0] = "001";
k2[1] = "010";
k2[2] = "100";

image.load("someimage.png");

Image result;
result = (image open k1) close k2;

result.save("result.png");
// End



I can't figure out how to restrict .load and .save to an image that
has been declared nor can I figure out how to differentiate between a
kernel and an image assignment since both k1 or result are viewed as
ID by the lexer.

I could do the above in C++, but I kind of would like to have an
interpreted syntax version like above to speed up my tests.

Thanks for any tips.

Phil


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From cintyram at yahoo.com  Thu Jan 23 12:01:16 2003
From: cintyram at yahoo.com (cintyram <cintyram@yahoo.com>)
Date: Mon Dec 20 16:15:16 2004
Subject: [antlr-interest] Re: whitespaces in middle of rule
In-Reply-To: <b0np6r+elko@eGroups.com>
Message-ID: <b0phmc+i00p@eGroups.com>

hi  
 i compiled only one line .. 
import java.    lang  . * ; 

and it is fine .. but your grammar accepts * as a substitute for a
package name, so i tried
import  java.*.lang.* ;  and it cribs ..

basically you might want to change your grammar to  have an optinal 
(DOT STAR) ?

 import_statement:
     "import" IDENT (DOT IDENT )* ( DOT STAR ) ?  SEMI
    ;


as for spaces within the  import statement , i dont know why you want
to force the user to write like that!

cheers
ram

--- In antlr-interest@yahoogroups.com, "William Lam <xeenman@y...>"
<xeenman@y...> wrote:
> good point and somewhat bad example, it is not illegal in java. 
> Thanks!
> 
> --- In antlr-interest@yahoogroups.com, Terence Parr <parrt@j...> 
> wrote:
> > 
> > On Wednesday, January 22, 2003, at 06:22 PM, William Lam 
> > <xeenman@y...> wrote:
> > 
> > > Sorry for this newbie question, but I wish to parse a grammar
> > > such as a Java import statement i.e.
> > >
> > > import aaaa.bbbb.cccc.*;
> > >
> > > so I set up a grammar similar to this
> > >
> > > import_statement:
> > >     "import" IDENT (DOT (IDENT | STAR))* SEMI
> > >     ;
> > >
> > > The problem is that the rule will validate statments filled with
> > > spaces, such as this
> > >
> > > import aaaa . bbbb . cccc . *;
> > >
> > > How do I make sure my import statements do not have any spaces?  I
> > > notice that the example under antlr/examples/java exhibit this
> > > problem.
> > 
> > Is it really illegal in Java?
> > 
> > Anyway, move it into the lexer if you need to.  Might be a 
> > context-sensitive problem though then matching ID.
> > 
> > Ter
> > --
> > Co-founder, http://www.jguru.com
> > Creator, ANTLR Parser Generator: http://www.antlr.org
> > Lecturer in Comp. Sci., University of San Francisco


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From cintyram at yahoo.com  Thu Jan 23 12:24:39 2003
From: cintyram at yahoo.com (cintyram <cintyram@yahoo.com>)
Date: Mon Dec 20 16:15:16 2004
Subject: [antlr-interest] Re: Please help with my first project
In-Reply-To: <b0pf36+87gi@eGroups.com>
Message-ID: <b0pj27+p9so@eGroups.com>

hi ,
 there has been a long drawn discussion abt seperating grammar and
actions recently ;
It is best for you to just identify the syntax rules in one phase and
then check about their meaning [semantics ] in a later phase ;

regarding your language , i would suggest that you make open and close
follow a common syntax like other methods ..

> result = (image open k1) close k2;
result = (image.open(k1)).close(k2) ;

if you wanted to make them like operators, it is usually easier for
the user to figure out an operator if it is different from an id ;

I have never written a new language before, but since your code looks
like java, you might as well start with a java grammar, and clip off
parts which are not relevant; 

in any case, it is always a good idea to first write down in a natural
language [ english ] what you want the language to do, and liberally
provide both good and bad uses of the language ;

then you can figure out a pattern from that , and that will help you
write the grammar ;

also in the gammar, you might want to clearly delineate the duties of
each module , so lexer does just lexing, parser just checks syntax [
and also constructs a tree or fills other auxilliary structures ]

writing the lexer should be easy as you can almost copy from any
example ; 

for the parser, you might want to write only the rules with simple
statemetns for actions , so that initially you want to do only syntax
checking .. once you are sure that your grammar rules are fine, and
they check the syntax properly,
you can decide on how to handle the semantics and 
 you can start iteratively adding more actions ;


i havent written a whole lot of grammars , but i would advise you to
be prepared to change the parser rules frequently ; especially if you
are not clear on how you want to handle the semantics ,
so it is best to design backwards, setting the responsibilities of
each module for each case, and then implementing forwards ;

ie, theoretically it might be possible to write one big rule to match
all your input file ,
but you cannot use that information to do any thing easily :) 
so you want to write rules which give you pieces of information
grouped into easy chunks that are useful for a specific semantic action ;

and unless it is clearly defined before hand, what the actions expect
[ not necessarily what they do ] it is not easy to reduce the number
of iterations to the parser development phase;



well looks like im just ranting on abt common things .. but i felt it
might be useful as a reminder ;

cheers
ram



--- In antlr-interest@yahoogroups.com, "Philippe Lavoie
<philippe.lavoie@c...>" <philippe.lavoie@c...> wrote:
> Hi,
> 
> I'm running into several problems and if some kind sould wouldn't mind
> helping out, I'd really appreciate it.
> 
> I have basically this problem:
>   - how to declare context dependant grammar
> 
> I want to create a language to be used as an interface to my
> mathematical mophology library (i.e. image processing operators). I
> think that antlr is up to the challenge but unfortunately it seems I'm
> not. I've read a lot of tutorials but it seems it's not enough :(
> 
> Here is an example of a program I'd like to parse
> 
> // Start
> Image image;
> Kernel k1;
> Kernel k2;
> 
> k1 = disk(10);
> k2 = matrix(3,3);
> k2[0] = "001";
> k2[1] = "010";
> k2[2] = "100";
> 
> image.load("someimage.png");
> 
> Image result;
> result = (image open k1) close k2;
> 
> result.save("result.png");
> // End
> 
> 
> 
> I can't figure out how to restrict .load and .save to an image that
> has been declared nor can I figure out how to differentiate between a
> kernel and an image assignment since both k1 or result are viewed as
> ID by the lexer.
> 
> I could do the above in C++, but I kind of would like to have an
> interpreted syntax version like above to speed up my tests.
> 
> Thanks for any tips.
> 
> Phil


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From philippe.lavoie at cactus.ca  Thu Jan 23 12:37:14 2003
From: philippe.lavoie at cactus.ca (Philippe Lavoie)
Date: Mon Dec 20 16:15:16 2004
Subject: [antlr-interest] Re: Please help with my first project
Message-ID: <5F668484EA248D41A93034997332B6D605466B@exchange3.cactus.ca>

Thanks for the information.

I'll try to apply the tips :)

Phil

-----Original Message-----
From: cintyram <cintyram@yahoo.com> [mailto:cintyram@yahoo.com] 
Sent: Thursday, January 23, 2003 3:25 PM
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] Re: Please help with my first project

hi ,
 there has been a long drawn discussion abt seperating grammar and
actions recently ;
It is best for you to just identify the syntax rules in one phase and
then check about their meaning [semantics ] in a later phase ;

regarding your language , i would suggest that you make open and close
follow a common syntax like other methods ..

> result = (image open k1) close k2;
result = (image.open(k1)).close(k2) ;

if you wanted to make them like operators, it is usually easier for
the user to figure out an operator if it is different from an id ;

I have never written a new language before, but since your code looks
like java, you might as well start with a java grammar, and clip off
parts which are not relevant; 

in any case, it is always a good idea to first write down in a natural
language [ english ] what you want the language to do, and liberally
provide both good and bad uses of the language ;

then you can figure out a pattern from that , and that will help you
write the grammar ;

also in the gammar, you might want to clearly delineate the duties of
each module , so lexer does just lexing, parser just checks syntax [
and also constructs a tree or fills other auxilliary structures ]

writing the lexer should be easy as you can almost copy from any
example ; 

for the parser, you might want to write only the rules with simple
statemetns for actions , so that initially you want to do only syntax
checking .. once you are sure that your grammar rules are fine, and
they check the syntax properly,
you can decide on how to handle the semantics and 
 you can start iteratively adding more actions ;


i havent written a whole lot of grammars , but i would advise you to
be prepared to change the parser rules frequently ; especially if you
are not clear on how you want to handle the semantics ,
so it is best to design backwards, setting the responsibilities of
each module for each case, and then implementing forwards ;

ie, theoretically it might be possible to write one big rule to match
all your input file ,
but you cannot use that information to do any thing easily :) 
so you want to write rules which give you pieces of information
grouped into easy chunks that are useful for a specific semantic action
;

and unless it is clearly defined before hand, what the actions expect
[ not necessarily what they do ] it is not easy to reduce the number
of iterations to the parser development phase;



well looks like im just ranting on abt common things .. but i felt it
might be useful as a reminder ;

cheers
ram



--- In antlr-interest@yahoogroups.com, "Philippe Lavoie
<philippe.lavoie@c...>" <philippe.lavoie@c...> wrote:
> Hi,
> 
> I'm running into several problems and if some kind sould wouldn't mind
> helping out, I'd really appreciate it.
> 
> I have basically this problem:
>   - how to declare context dependant grammar
> 
> I want to create a language to be used as an interface to my
> mathematical mophology library (i.e. image processing operators). I
> think that antlr is up to the challenge but unfortunately it seems I'm
> not. I've read a lot of tutorials but it seems it's not enough :(
> 
> Here is an example of a program I'd like to parse
> 
> // Start
> Image image;
> Kernel k1;
> Kernel k2;
> 
> k1 = disk(10);
> k2 = matrix(3,3);
> k2[0] = "001";
> k2[1] = "010";
> k2[2] = "100";
> 
> image.load("someimage.png");
> 
> Image result;
> result = (image open k1) close k2;
> 
> result.save("result.png");
> // End
> 
> 
> 
> I can't figure out how to restrict .load and .save to an image that
> has been declared nor can I figure out how to differentiate between a
> kernel and an image assignment since both k1 or result are viewed as
> ID by the lexer.
> 
> I could do the above in C++, but I kind of would like to have an
> interpreted syntax version like above to speed up my tests.
> 
> Thanks for any tips.
> 
> Phil


 

Your use of Yahoo! Groups is subject to
http://docs.yahoo.com/info/terms/ 



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From pancx at iastate.edu  Thu Jan 23 12:49:44 2003
From: pancx at iastate.edu (Chunxia Pan)
Date: Mon Dec 20 16:15:16 2004
Subject: [antlr-interest] about the ANTLR run time library
Message-ID: <Thu23Jan2003144944@webmail-11.iastate.edu>

Hi there,
     I am just begin to learn the ANTLR, and I try to use it with Java, but I 
can't find the java library in the lib directory, even in the ANTLR 2.7.2. How 
do you program with java without the java library or it doesn't need java 
library at all?
Thanks very much!


---------------------------------------------
Chunxia Pan
Research Assistant
Dept.of Industrial Education and Technology
Iowa State University 
Ames, Iowa, USA, 50010
515-294-8582(O)
515-572-4728(H)






 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From s_mitra8 at yahoo.com  Thu Jan 23 12:54:47 2003
From: s_mitra8 at yahoo.com (sudip mitra)
Date: Mon Dec 20 16:15:16 2004
Subject: [antlr-interest] about the ANTLR run time library
In-Reply-To: <Thu23Jan2003144944@webmail-11.iastate.edu>
Message-ID: <20030123205447.1036.qmail@web10412.mail.yahoo.com>


would you try my tutorial at 
www.geocities.com/antlrtutorial 
and tell me if it was helpful at all...
Terence Sir the tutorial is free anyway !!! am not making any money out of it :-)!!!!
 Chunxia Pan <pancx@iastate.edu> wrote:Hi there,
I am just begin to learn the ANTLR, and I try to use it with Java, but I 
can't find the java library in the lib directory, even in the ANTLR 2.7.2. How 
do you program with java without the java library or it doesn't need java 
library at all?
Thanks very much!


---------------------------------------------
Chunxia Pan
Research Assistant
Dept.of Industrial Education and Technology
Iowa State University 
Ames, Iowa, USA, 50010
515-294-8582(O)
515-572-4728(H)








Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 




---------------------------------
Do you Yahoo!?
Yahoo! Mail Plus - Powerful. Affordable. Sign up now
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20030123/bafb2122/attachment.html
From philippe.lavoie at cactus.ca  Thu Jan 23 12:55:03 2003
From: philippe.lavoie at cactus.ca (Philippe Lavoie)
Date: Mon Dec 20 16:15:16 2004
Subject: [antlr-interest] Please help with my first project
Message-ID: <5F668484EA248D41A93034997332B6D6089DD9@exchange3.cactus.ca>

Thanks

Do you know if there is simple example of this somewhere?

I might change my syntax to be Perl like and use special symbols to
identify kernel or an image

$result = $image open #k1 close #k2

That might simplify things a bit. Still, I though I needed to embed the
actions inside the Parser or the TreeParser class.

I often see 'symbol table' mentioned. I have yet to see a tutorial or an
example that use them. Anybody knows where I can get more documentation
regarding this on the net, i.e. how I can set-up such a thing using
antlr?


Phil


-----Original Message-----
From: mzukowski@yci.com [mailto:mzukowski@yci.com] 
Sent: Thursday, January 23, 2003 2:53 PM
To: antlr-interest@yahoogroups.com
Subject: RE: [antlr-interest] Please help with my first project

Those are questions of semantics and probably best handled in a tree
parser.
After the syntax is ok the program is parsed and then represented as an
AST.
Perhaps a symbol table is built at that point too.  Further passes over
the
AST can do type checking.  In your case a further pass would actually
interpret the code and execute your image processing functions.

Monty

-----Original Message-----
From: Philippe Lavoie <philippe.lavoie@cactus.ca>
[mailto:philippe.lavoie@cactus.ca]
Sent: Thursday, January 23, 2003 11:17 AM
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] Please help with my first project


Hi,

I'm running into several problems and if some kind sould wouldn't mind
helping out, I'd really appreciate it.

I have basically this problem:
  - how to declare context dependant grammar

I want to create a language to be used as an interface to my
mathematical mophology library (i.e. image processing operators). I
think that antlr is up to the challenge but unfortunately it seems I'm
not. I've read a lot of tutorials but it seems it's not enough :(

Here is an example of a program I'd like to parse

// Start
Image image;
Kernel k1;
Kernel k2;

k1 = disk(10);
k2 = matrix(3,3);
k2[0] = "001";
k2[1] = "010";
k2[2] = "100";

image.load("someimage.png");

Image result;
result = (image open k1) close k2;

result.save("result.png");
// End



I can't figure out how to restrict .load and .save to an image that
has been declared nor can I figure out how to differentiate between a
kernel and an image assignment since both k1 or result are viewed as
ID by the lexer.

I could do the above in C++, but I kind of would like to have an
interpreted syntax version like above to speed up my tests.

Thanks for any tips.

Phil


 

Your use of Yahoo! Groups is subject to
http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to
http://docs.yahoo.com/info/terms/ 



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From s_mitra8 at yahoo.com  Thu Jan 23 12:57:03 2003
From: s_mitra8 at yahoo.com (sudip mitra)
Date: Mon Dec 20 16:15:16 2004
Subject: [antlr-interest] about the ANTLR run time library
In-Reply-To: <Thu23Jan2003144944@webmail-11.iastate.edu>
Message-ID: <20030123205703.89792.qmail@web10411.mail.yahoo.com>


well the classpath should have the antlr.jar in it and of course some JRE should have the java ...you can mention that in the class path and it should work BANG...
you will have pain initially getting something out of your grammars...if you do  not then you are lying...:-)
 Chunxia Pan <pancx@iastate.edu> wrote:Hi there,
I am just begin to learn the ANTLR, and I try to use it with Java, but I 
can't find the java library in the lib directory, even in the ANTLR 2.7.2. How 
do you program with java without the java library or it doesn't need java 
library at all?
Thanks very much!


---------------------------------------------
Chunxia Pan
Research Assistant
Dept.of Industrial Education and Technology
Iowa State University 
Ames, Iowa, USA, 50010
515-294-8582(O)
515-572-4728(H)








Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 




---------------------------------
Do you Yahoo!?
Yahoo! Mail Plus - Powerful. Affordable. Sign up now
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20030123/e144f7ff/attachment.html
From mzukowski at yci.com  Thu Jan 23 13:10:55 2003
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:15:16 2004
Subject: [antlr-interest] Please help with my first project
Message-ID: <170826586F3BD511910D0200C110AAA80540213B@memail03.bco-home.com>

The gcc translation toolkit has a symbol table integrated
(www.codetransform.com/gcc.html).  If I remember correctly the java example
grammar has one too.  I believe one of the links to an article on antlr.org
is also about building a symbol table for java.  Browse through and see.

Monty

-----Original Message-----
From: Philippe Lavoie [mailto:philippe.lavoie@cactus.ca]
Sent: Thursday, January 23, 2003 12:55 PM
To: antlr-interest@yahoogroups.com
Subject: RE: [antlr-interest] Please help with my first project


Thanks

Do you know if there is simple example of this somewhere?

I might change my syntax to be Perl like and use special symbols to
identify kernel or an image

$result = $image open #k1 close #k2

That might simplify things a bit. Still, I though I needed to embed the
actions inside the Parser or the TreeParser class.

I often see 'symbol table' mentioned. I have yet to see a tutorial or an
example that use them. Anybody knows where I can get more documentation
regarding this on the net, i.e. how I can set-up such a thing using
antlr?


Phil


-----Original Message-----
From: mzukowski@yci.com [mailto:mzukowski@yci.com] 
Sent: Thursday, January 23, 2003 2:53 PM
To: antlr-interest@yahoogroups.com
Subject: RE: [antlr-interest] Please help with my first project

Those are questions of semantics and probably best handled in a tree
parser.
After the syntax is ok the program is parsed and then represented as an
AST.
Perhaps a symbol table is built at that point too.  Further passes over
the
AST can do type checking.  In your case a further pass would actually
interpret the code and execute your image processing functions.

Monty

-----Original Message-----
From: Philippe Lavoie <philippe.lavoie@cactus.ca>
[mailto:philippe.lavoie@cactus.ca]
Sent: Thursday, January 23, 2003 11:17 AM
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] Please help with my first project


Hi,

I'm running into several problems and if some kind sould wouldn't mind
helping out, I'd really appreciate it.

I have basically this problem:
  - how to declare context dependant grammar

I want to create a language to be used as an interface to my
mathematical mophology library (i.e. image processing operators). I
think that antlr is up to the challenge but unfortunately it seems I'm
not. I've read a lot of tutorials but it seems it's not enough :(

Here is an example of a program I'd like to parse

// Start
Image image;
Kernel k1;
Kernel k2;

k1 = disk(10);
k2 = matrix(3,3);
k2[0] = "001";
k2[1] = "010";
k2[2] = "100";

image.load("someimage.png");

Image result;
result = (image open k1) close k2;

result.save("result.png");
// End



I can't figure out how to restrict .load and .save to an image that
has been declared nor can I figure out how to differentiate between a
kernel and an image assignment since both k1 or result are viewed as
ID by the lexer.

I could do the above in C++, but I kind of would like to have an
interpreted syntax version like above to speed up my tests.

Thanks for any tips.

Phil


 

Your use of Yahoo! Groups is subject to
http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to
http://docs.yahoo.com/info/terms/ 



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From hushlee83 at yahoo.com.sg  Thu Jan 23 15:46:28 2003
From: hushlee83 at yahoo.com.sg (=?iso-8859-1?q?Sharon=20Li?=)
Date: Mon Dec 20 16:15:16 2004
Subject: [antlr-interest] Re: Reading contents of file using Antlr
In-Reply-To: <b0oi5g+g394@eGroups.com>
Message-ID: <20030123234628.54106.qmail@web40902.mail.yahoo.com>


Hi Micheal,
G'day. Thanks for being a great help. I guess I understand Antlr a lot better now. I'm really still trying to understand the language so pls pardon my mistakes =P Ter's tutorial is a great source of information for beginers like me and I appreciate that. Hope to see more examples. 
Cheers,
Sharon
 "micheal_jor <open.zone@virgin.net>" <open.zone@virgin.net> wrote:Hi Sharon,

I'll touch on a few areas where ANTLR can make your life easier. 
Completing the grammar should then be a much easier (and rewarding) 
experience.

[Caveat: I haven't run your example with ANTLR. Just looked at it on 
the site. I may have missed some issues.]

1. Keywords - See changes ###[1] below.

ANTLR provides the tokens {...} options to let you specify the 
keywords in your language. The assumption is that keywords can't also 
be identifiers.
NOTE: You can override that assumption in your Parser grammar for 
individual keywords as shown in:
http://groups.yahoo.com/group/antlr-interest/message/6503

2. NUMERIC rule - 

Are you sure this is what NUMERIC values look like in your system?. 
This rule will accept the following: 
-...,-
,,9-0,..
,,,
... etc.
Studying a few samples of what a NUMERIC looks like (and musn't look 
like) would help make it clearer. I did try to clean it up though be 
aware that RECORD and NUMERIC properly belongs in the Parser not the 
Lexer - where they would be re-named to start with a lower-case 
letter of course.

// Is this what you really meant?
protected LETTER : ( 'a'..'z' | 'A'..'Z' ) ; 
protected DIGIT : ( '0'..'9' ) ; 
protected NUMBER : ('-')? ((DIGIT)* '.')? (DIGIT)+ ;
ID : LETTER ( DIGIT | LETTER )* ;
NUMERIC : ( NUMBER ( ',' NUMBER )*; 
RECORD : (ID | NUMERIC)(!~('\r'|'\n'|':'))+ ; 

// Your original
RECORD : ('a'..'z' | 'A'..'Z'| NUMERIC)(!~('\r'|'\n'|':'))+ ; 
NUMERIC : ('0'..'9'|','|'.'|'-')+; 

3. RECORD rule

What does the trailing pattern '(!~('\r'|'\n'|':'))+' do?. What elase 
is part of a record that you are trying to match? Whitespace and 
SEMICOLON are already taken care of.

Anyways, good luck and be sure to give Ter's Getting started guide a 
good workover ;-)

Micheal

> 
> Hi,
> 
> Thanks for th help. Below is the code for my grammer file.
> /*******************************************************************
****/
> class CSVParser extends Parser;
> options { k=4; }
> {
> LsystemsString ls = new LsystemsString();
> 
> public LsystemsString getLsystemsString(){
> return ls;
> }
> }
> file : ( line (NEWLINE line)*(NEWLINE)? EOF)
> {System.out.println("file matched");}
> ;
> line : ((record)+ )
> ;
> record : ((r:KEYWORD) (sc: SEMICOLON)? (n:RECORD)* (COMMENT)?)
> {
> System.out.println("attribute = " + r.getText());
> System.out.println("value = "+n.getText());
> ls.addNext(r.getText(),n.getText());
> System.out.println("LS size: "+ls.getArrayListSize());
> }
> ;
> 
> class CSVLexer extends Lexer;
> options { 
> charVocabulary='\3'..'\377'; 
> k = 4;
> }

// change ###[1] - use tokens for keywords
tokens
{
ANGLE = "angle";
FACTOR = "factor";
INITIAL = "initial";
.........
.........
.........
Z = "z";
ELASTICITY = "elasticity";
INCREMENT = "increment";
RENDER = "render";
MODE = "mode";

}

> RECORD : ('a'..'z' | 'A'..'Z'| NUMERIC)(!~('\r'|'\n'|':'))+ ;
> NUMERIC : ('0'..'9'|','|'.'|'-')+;
> SEMICOLON : ':';
> BRACKET : ('(' | ')');
> COMMENT : "/*" (options {greedy=false;} :.)* "*/" ;
> NEWLINE : ('\r''\n')=> '\r''\n' //DOS
> | '\r' //MAC
> | '\n' //UNIX
> { newline(); }
> ;
> 
> WS : (' '|'\t') { $setType(Token.SKIP); } ;
> /*******************************************************************
*****************/
> mzukowski@y... wrote:Lexical nondeterminism means you have two 
lexical rules that are in
> conflict, meaning they have the same prefix. Post a small but 
complete
> example which has the error message and we'll be able to help you. 
> 
> Monty
> 
> 
> -----Original Message-----
> From: Sharon Li [mailto:hushlee83@y...]
> Sent: Tuesday, January 21, 2003 11:43 PM
> To: Antlr Interest Group
> Subject: [antlr-interest] Reading contents of file using Antlr
> 
> 
> Hi, 
> I'm a Java programmer and relatively new to Antlr. I need to write 
Antlr
> code to read in a text file and extract only the necessary 
information. How
> can I go about doing that? An example of the contents of the file 
might look
> like that : 
> angle focus : 0.0005
> color : blue
> line width : 12
> I often get the error msg:
> warning : lexical nondeterminism upon ...
> Also when do we use the TreeParser and what is the different 
between a
> Parser and a TreeParser? When do we define tokens and what is it 
for ? Pls
> help! Thanks very much.
> Yahoo! Travel
> - Get the latest travel deals in town! 
> Your use of Yahoo! Groups is subject to the Yahoo! Terms of 
Service. 
> 
> 
> 
> Your use of Yahoo! Groups is subject to 
http://docs.yahoo.com/info/terms/ 
> 
> 
>  Yahoo! Travel
> - Get the latest travel deals in town!




Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


?Yahoo! Travel
- Get the latest travel deals in town!
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20030124/8a01f65e/attachment.html
From hushlee83 at yahoo.com.sg  Thu Jan 23 17:12:22 2003
From: hushlee83 at yahoo.com.sg (=?iso-8859-1?q?Sharon=20Li?=)
Date: Mon Dec 20 16:15:16 2004
Subject: [antlr-interest] Re: Reading contents of file using Antlr
In-Reply-To: <b0oi5g+g394@eGroups.com>
Message-ID: <20030124011222.43215.qmail@web40910.mail.yahoo.com>


Sorry another question,
Do I specify the tokens in the tokens {...} section anywhere in my code? What does specifiying the tokens do ? 
 "micheal_jor <open.zone@virgin.net>" <open.zone@virgin.net> wrote:Hi Sharon,

I'll touch on a few areas where ANTLR can make your life easier. 
Completing the grammar should then be a much easier (and rewarding) 
experience.

[Caveat: I haven't run your example with ANTLR. Just looked at it on 
the site. I may have missed some issues.]

1. Keywords - See changes ###[1] below.

ANTLR provides the tokens {...} options to let you specify the 
keywords in your language. The assumption is that keywords can't also 
be identifiers.
NOTE: You can override that assumption in your Parser grammar for 
individual keywords as shown in:
http://groups.yahoo.com/group/antlr-interest/message/6503

2. NUMERIC rule - 

Are you sure this is what NUMERIC values look like in your system?. 
This rule will accept the following: 
-...,-
,,9-0,..
,,,
... etc.
Studying a few samples of what a NUMERIC looks like (and musn't look 
like) would help make it clearer. I did try to clean it up though be 
aware that RECORD and NUMERIC properly belongs in the Parser not the 
Lexer - where they would be re-named to start with a lower-case 
letter of course.

// Is this what you really meant?
protected LETTER : ( 'a'..'z' | 'A'..'Z' ) ; 
protected DIGIT : ( '0'..'9' ) ; 
protected NUMBER : ('-')? ((DIGIT)* '.')? (DIGIT)+ ;
ID : LETTER ( DIGIT | LETTER )* ;
NUMERIC : ( NUMBER ( ',' NUMBER )*; 
RECORD : (ID | NUMERIC)(!~('\r'|'\n'|':'))+ ; 

// Your original
RECORD : ('a'..'z' | 'A'..'Z'| NUMERIC)(!~('\r'|'\n'|':'))+ ; 
NUMERIC : ('0'..'9'|','|'.'|'-')+; 

3. RECORD rule

What does the trailing pattern '(!~('\r'|'\n'|':'))+' do?. What elase 
is part of a record that you are trying to match? Whitespace and 
SEMICOLON are already taken care of.

Anyways, good luck and be sure to give Ter's Getting started guide a 
good workover ;-)

Micheal

> 
> Hi,
> 
> Thanks for th help. Below is the code for my grammer file.
> /*******************************************************************
****/
> class CSVParser extends Parser;
> options { k=4; }
> {
> LsystemsString ls = new LsystemsString();
> 
> public LsystemsString getLsystemsString(){
> return ls;
> }
> }
> file : ( line (NEWLINE line)*(NEWLINE)? EOF)
> {System.out.println("file matched");}
> ;
> line : ((record)+ )
> ;
> record : ((r:KEYWORD) (sc: SEMICOLON)? (n:RECORD)* (COMMENT)?)
> {
> System.out.println("attribute = " + r.getText());
> System.out.println("value = "+n.getText());
> ls.addNext(r.getText(),n.getText());
> System.out.println("LS size: "+ls.getArrayListSize());
> }
> ;
> 
> class CSVLexer extends Lexer;
> options { 
> charVocabulary='\3'..'\377'; 
> k = 4;
> }

// change ###[1] - use tokens for keywords
tokens
{
ANGLE = "angle";
FACTOR = "factor";
INITIAL = "initial";
.........
.........
.........
Z = "z";
ELASTICITY = "elasticity";
INCREMENT = "increment";
RENDER = "render";
MODE = "mode";

}

> RECORD : ('a'..'z' | 'A'..'Z'| NUMERIC)(!~('\r'|'\n'|':'))+ ;
> NUMERIC : ('0'..'9'|','|'.'|'-')+;
> SEMICOLON : ':';
> BRACKET : ('(' | ')');
> COMMENT : "/*" (options {greedy=false;} :.)* "*/" ;
> NEWLINE : ('\r''\n')=> '\r''\n' //DOS
> | '\r' //MAC
> | '\n' //UNIX
> { newline(); }
> ;
> 
> WS : (' '|'\t') { $setType(Token.SKIP); } ;
> /*******************************************************************
*****************/
> mzukowski@y... wrote:Lexical nondeterminism means you have two 
lexical rules that are in
> conflict, meaning they have the same prefix. Post a small but 
complete
> example which has the error message and we'll be able to help you. 
> 
> Monty
> 
> 
> -----Original Message-----
> From: Sharon Li [mailto:hushlee83@y...]
> Sent: Tuesday, January 21, 2003 11:43 PM
> To: Antlr Interest Group
> Subject: [antlr-interest] Reading contents of file using Antlr
> 
> 
> Hi, 
> I'm a Java programmer and relatively new to Antlr. I need to write 
Antlr
> code to read in a text file and extract only the necessary 
information. How
> can I go about doing that? An example of the contents of the file 
might look
> like that : 
> angle focus : 0.0005
> color : blue
> line width : 12
> I often get the error msg:
> warning : lexical nondeterminism upon ...
> Also when do we use the TreeParser and what is the different 
between a
> Parser and a TreeParser? When do we define tokens and what is it 
for ? Pls
> help! Thanks very much.
> Yahoo! Travel
> - Get the latest travel deals in town! 
> Your use of Yahoo! Groups is subject to the Yahoo! Terms of 
Service. 
> 
> 
> 
> Your use of Yahoo! Groups is subject to 
http://docs.yahoo.com/info/terms/ 
> 
> 
>  Yahoo! Travel
> - Get the latest travel deals in town!




Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


?Yahoo! Travel
- Get the latest travel deals in town!
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20030124/86776c98/attachment.html
From open.zone at virgin.net  Thu Jan 23 19:48:38 2003
From: open.zone at virgin.net (micheal_jor <open.zone@virgin.net>)
Date: Mon Dec 20 16:15:16 2004
Subject: [antlr-interest] Re: Reading contents of file using Antlr
In-Reply-To: <20030124011222.43215.qmail@web40910.mail.yahoo.com>
Message-ID: <b0qd2m+pjut@eGroups.com>

--- In antlr-interest@yahoogroups.com, Sharon Li <hushlee83@y...> 
wrote:
> 
> Sorry another question,
> Do I specify the tokens in the tokens {...} section anywhere in my 
code? What does specifiying the tokens do ? 

The placement of the tokens {...} section is as I have illustrated 
with ###[1] in your grammar (i.e. just after the "class" decaration 
and it's options {...} section.

Specifying the tokens identifies the respective sequence of 
characters as a Token (each Token has it's own integer Token-ID). You 
can then refer to the tokens directly in the parser e.g.: 

entry 
: ANGLE FACTOR 
| BACK DISTANCE
......
......
| RENDER MODE
| VIEW POINT
| Z BUFFER
;

record : ((r:entry) (sc: SEMICOLON)? (n:RECORD)* (COMMENT)?)

Ordinarily, all such strings would be lumped together as 
ID/IDENT/IDENTIFIER or whatever Token-ID is defined for identifiers. 
As I mentioned before, tokens{...} entries are assumed not to be 
identifers. If that isn't the case with your grammar, see the link in 
my original message for one solution.

Micheal




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From rmsanjivp at yahoo.com  Thu Jan 23 22:45:58 2003
From: rmsanjivp at yahoo.com (rmsanjivp <rmsanjivp@yahoo.com>)
Date: Mon Dec 20 16:15:16 2004
Subject: [antlr-interest] Extracting meaning out of Antlr's exceptions
Message-ID: <b0qnf7+c38r@eGroups.com>

Hi!

I am trying to make out a meaningful error message from the 
exception thrown by the Antlr. I am catching the exception in the 
grammar rule and trying to make out the meaning. Consider the 
following:

expr: m1:mult_expr ( (p:PLUS | m:MINUS) m2:mult_expr)*;
    exception
     catch[TokenStreamException ex]
     {
       // will this section catch unrecognized symbol from the lexer
     }
     catch[RecognitionException ex]
     {
       // I want to make a decision if the operator is missing or
       // operand is missing. Will the following code help??
       if( p == NULL && m == NULL)
         printf("Operator Missing\n")
       else if( (p != NULL || m != NULL) && #m2 == NULL)
         printf("OPerand Missing\n");
     }



Similar kind of exception handling for mult_expr rule.

I want to know how to make what is the real problem. I can have an 
input that has unrecognized symbol by lexer. How do I catch that in 
the exception handler in the grammar? I have gone through the list 
of ecception thrown on different problems. I found that 
RecognitionException handles both unrecognized input from the lexer 
and unexpected token from the input. How do I differentiate between 
them? Is there a way to catch these exception and generate really 
meaningfule messages??

Is the way I catch exception in the rule fine?

Kindly advise.

Thanks,
Sanjiv



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From ttsoris at yahoo.com  Fri Jan 24 03:22:54 2003
From: ttsoris at yahoo.com (ttsoris <ttsoris@yahoo.com>)
Date: Mon Dec 20 16:15:16 2004
Subject: [antlr-interest] Reading directly from a file and not from stdin
Message-ID: <b0r7me+9pdg@eGroups.com>

I have the following problem with ANTLR-2.7.0. I dont know an easy
way to read directly from a file and not std:cin. Redirection (e.g. 
Myparser <Myfile.in) does not solve my problem, because I want to 
debug Myparser. I am producing cpp code and I am trying to create a 
command like: "Myparser Myfile.in". Any suggestions?
Thank you,
Theofilos


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From klaren at cs.utwente.nl  Fri Jan 24 07:14:56 2003
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:15:16 2004
Subject: [antlr-interest] Reading directly from a file and not from stdin
In-Reply-To: <b0r7me+9pdg@eGroups.com>; from ttsoris@yahoo.com on Fri, Jan 24, 2003 at 11:22:54AM -0000
References: <b0r7me+9pdg@eGroups.com>
Message-ID: <20030124161455.F14956@cs.utwente.nl>

Hi,

On Fri, Jan 24, 2003 at 11:22:54AM -0000, ttsoris <ttsoris@yahoo.com> wrote:
> I have the following problem with ANTLR-2.7.0. I dont know an easy
> way to read directly from a file and not std:cin. Redirection (e.g. 
> Myparser <Myfile.in) does not solve my problem, because I want to 
> debug Myparser. I am producing cpp code and I am trying to create a 
> command like: "Myparser Myfile.in". Any suggestions?

You can use fstreams for that (check out your favourite C++ reference for
them). For a complete example you might want to download antlr-2.7.2 and
check out the calc example from examples/cpp. That one has three different
ways of getting input to your parser.

Cheers,

Ric
--
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- klaren@cs.utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
  Wo das Chaos auf die Ordnung trifft, gewinnt meist das Chaos, weil es
  besser organisiert ist. --- Friedrich Nietzsche


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From djplists at arrowsash.com  Fri Jan 24 07:32:23 2003
From: djplists at arrowsash.com (davidjpenton2002 <djplists@arrowsash.com>)
Date: Mon Dec 20 16:15:16 2004
Subject: [antlr-interest] catching an exception in the parser and continuing - will this work?
Message-ID: <b0rma7+ppmb@eGroups.com>

I am handling "include files" in my lexer, as in the java example 
provided with antlr.  This means that fact the lexer is in an 
included file is transparent to the parser.

However, it turns out that I want the parser to be made aware of the 
fact that the lexer is in an included file. (Kindly assume that I 
have a sound design reason for this ;-) Given the amount of lookahead 
that may occur, I am sure that the only safe way to do this is by 
putting the correct "notification" on the stream of tokens passed to 
the parser.

Is it possible to have the lexer pass a back a "bad" token (i.e. one 
that the parser can never recognize), catch a resultant exception, 
and then (here's the important part) force the parser to take up 
right where is was when it got the "bad" token?  It would amount to 
skipping over the "bad" token, except that the exception handling 
code would set a flag or two that would be available later to parser 
semantic actions.

I have looked at the exception handling documentation, and sifted 
through my generated parser.  It is not clear to me if my strategy 
will work.

BTW, I am still using antlr 2.7.1 - I want to try to finish what I am 
doing before trying the switch to 2.7.2.

Thanks.

- Dave Penton -


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From Anthony.Youngman at ECA-International.com  Fri Jan 24 08:06:10 2003
From: Anthony.Youngman at ECA-International.com (Anthony W. Youngman)
Date: Mon Dec 20 16:15:16 2004
Subject: [antlr-interest] One weird, one (hopefully) simple problem ... from a newbie
Message-ID: <0EF9DEABA42FE547BAE43D0298F146B23DD3D3@ESP.eca-international.local>

Skipped content of type multipart/alternative
From mzukowski at yci.com  Fri Jan 24 08:52:22 2003
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:15:16 2004
Subject: [antlr-interest] catching an exception in the parser and cont
	inuing - will this work?
Message-ID: <170826586F3BD511910D0200C110AAA805402143@memail03.bco-home.com>

What I do in the gcc project is have tokens aware of the file they came from
as well.  Then it is pretty easy to tell whether a new file has been
included or not.

There are other ways too, like Ter's fieldguide on whitespace preservation
by using a hidden token stream.

You'll have to be more specific about what you mean by making the parser
"aware" of the token change.  There are other ways to do this.  

Your way might work, but exceptions are expensive.  Wait, it won't work
because it will screw up lookahead.  No rule will know about your bad token
and that would be "bad".

If you don't like having the filename in the token, I would instead put that
"bad" token in a hidden token stream.  You can override consume() to check
the hidden token stream and set your state.  Or it can wait in the hidden
stream and everytime you check that state you could pull in the tokens from
the hidden stream and set state before returning it.

Monty

-----Original Message-----
From: davidjpenton2002 <djplists@arrowsash.com>
[mailto:djplists@arrowsash.com]
Sent: Friday, January 24, 2003 7:32 AM
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] catching an exception in the parser and
continuing - will this work?


I am handling "include files" in my lexer, as in the java example 
provided with antlr.  This means that fact the lexer is in an 
included file is transparent to the parser.

However, it turns out that I want the parser to be made aware of the 
fact that the lexer is in an included file. (Kindly assume that I 
have a sound design reason for this ;-) Given the amount of lookahead 
that may occur, I am sure that the only safe way to do this is by 
putting the correct "notification" on the stream of tokens passed to 
the parser.

Is it possible to have the lexer pass a back a "bad" token (i.e. one 
that the parser can never recognize), catch a resultant exception, 
and then (here's the important part) force the parser to take up 
right where is was when it got the "bad" token?  It would amount to 
skipping over the "bad" token, except that the exception handling 
code would set a flag or two that would be available later to parser 
semantic actions.

I have looked at the exception handling documentation, and sifted 
through my generated parser.  It is not clear to me if my strategy 
will work.

BTW, I am still using antlr 2.7.1 - I want to try to finish what I am 
doing before trying the switch to 2.7.2.

Thanks.

- Dave Penton -


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From djplists at arrowsash.com  Fri Jan 24 09:22:57 2003
From: djplists at arrowsash.com (davidjpenton2002 <djplists@arrowsash.com>)
Date: Mon Dec 20 16:15:16 2004
Subject: [antlr-interest] Re: catching an exception in the parser and cont inuing - will this work?
In-Reply-To: <170826586F3BD511910D0200C110AAA805402143@memail03.bco-home.com>
Message-ID: <b0rsph+juhg@eGroups.com>

Thanks for your help.

I had hoped that the "bad" token could be handled by a catch block 
somewhere.  The "somewhere" part may be the catch.  It appears to me 
that the normal behavior of an antlr parser is to report an 
unexpected token, and then to forge ahead.  That's the behavior I 
observe if I place a token (or rather a string that will match a 
known lexer rule) in the wrong spot in my input.  The parser reports 
it as an unexpected token, but continues to parse.  That is the 
behavior that I want to use by returning a "special" token unknown to 
any parser rule. I do not (yet) understand just where and how the 
normal processing happens in the parser code - I'm busy looking 
through it to find out, especially as regards exception handling.  
Any hints on this would help, although I am also re-reading the docs 
on exceptions.

The main thing that would make life easier for me is if I can 
identify a single spot to handle the information about source of 
tokens.  That is, it would be a pain in the neck if such processing 
had to be associated with each parser rule separately.  I'm not sure 
if I am being clear about that.

The other two strategies that you suggest (hidden token stream; 
embedding file information in the token) may also be fruitful for me, 
so I'll look into both. Thanks for the excellent insights.

- Dave Penton -

--- In antlr-interest@yahoogroups.com, mzukowski@y... wrote:
> What I do in the gcc project is have tokens aware of the file they 
came from
> as well.  Then it is pretty easy to tell whether a new file has been
> included or not.
> 
> There are other ways too, like Ter's fieldguide on whitespace 
preservation
> by using a hidden token stream.
> 
> You'll have to be more specific about what you mean by making the 
parser
> "aware" of the token change.  There are other ways to do this.  
> 
> Your way might work, but exceptions are expensive.  Wait, it won't 
work
> because it will screw up lookahead.  No rule will know about your 
bad token
> and that would be "bad".
> 
> If you don't like having the filename in the token, I would instead 
put that
> "bad" token in a hidden token stream.  You can override consume() 
to check
> the hidden token stream and set your state.  Or it can wait in the 
hidden
> stream and everytime you check that state you could pull in the 
tokens from
> the hidden stream and set state before returning it.
> 
> Monty
> 
> -----Original Message-----
> From: davidjpenton2002 <djplists@a...>
> [mailto:djplists@a...]
> Sent: Friday, January 24, 2003 7:32 AM
> To: antlr-interest@yahoogroups.com
> Subject: [antlr-interest] catching an exception in the parser and
> continuing - will this work?
> 
> 
> I am handling "include files" in my lexer, as in the java example 
> provided with antlr.  This means that fact the lexer is in an 
> included file is transparent to the parser.
> 
> However, it turns out that I want the parser to be made aware of 
the 
> fact that the lexer is in an included file. (Kindly assume that I 
> have a sound design reason for this ;-) Given the amount of 
lookahead 
> that may occur, I am sure that the only safe way to do this is by 
> putting the correct "notification" on the stream of tokens passed 
to 
> the parser.
> 
> Is it possible to have the lexer pass a back a "bad" token (i.e. 
one 
> that the parser can never recognize), catch a resultant exception, 
> and then (here's the important part) force the parser to take up 
> right where is was when it got the "bad" token?  It would amount to 
> skipping over the "bad" token, except that the exception handling 
> code would set a flag or two that would be available later to 
parser 
> semantic actions.
> 
> I have looked at the exception handling documentation, and sifted 
> through my generated parser.  It is not clear to me if my strategy 
> will work.
> 
> BTW, I am still using antlr 2.7.1 - I want to try to finish what I 
am 
> doing before trying the switch to 2.7.2.
> 
> Thanks.
> 
> - Dave Penton -
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to 
http://docs.yahoo.com/info/terms/


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From mzukowski at yci.com  Fri Jan 24 09:47:39 2003
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:15:17 2004
Subject: [antlr-interest] Re: catching an exception in the parser and 
	cont inuing - will this work?
Message-ID: <170826586F3BD511910D0200C110AAA805402144@memail03.bco-home.com>

The single spot you are asking about is the consume() method.  Everything
goes through there.  Look at the generated code.  

Monty

-----Original Message-----
From: davidjpenton2002 <djplists@arrowsash.com>
[mailto:djplists@arrowsash.com]
Sent: Friday, January 24, 2003 9:23 AM
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] Re: catching an exception in the parser and
cont inuing - will this work?


Thanks for your help.

I had hoped that the "bad" token could be handled by a catch block 
somewhere.  The "somewhere" part may be the catch.  It appears to me 
that the normal behavior of an antlr parser is to report an 
unexpected token, and then to forge ahead.  That's the behavior I 
observe if I place a token (or rather a string that will match a 
known lexer rule) in the wrong spot in my input.  The parser reports 
it as an unexpected token, but continues to parse.  That is the 
behavior that I want to use by returning a "special" token unknown to 
any parser rule. I do not (yet) understand just where and how the 
normal processing happens in the parser code - I'm busy looking 
through it to find out, especially as regards exception handling.  
Any hints on this would help, although I am also re-reading the docs 
on exceptions.

The main thing that would make life easier for me is if I can 
identify a single spot to handle the information about source of 
tokens.  That is, it would be a pain in the neck if such processing 
had to be associated with each parser rule separately.  I'm not sure 
if I am being clear about that.

The other two strategies that you suggest (hidden token stream; 
embedding file information in the token) may also be fruitful for me, 
so I'll look into both. Thanks for the excellent insights.

- Dave Penton -

--- In antlr-interest@yahoogroups.com, mzukowski@y... wrote:
> What I do in the gcc project is have tokens aware of the file they 
came from
> as well.  Then it is pretty easy to tell whether a new file has been
> included or not.
> 
> There are other ways too, like Ter's fieldguide on whitespace 
preservation
> by using a hidden token stream.
> 
> You'll have to be more specific about what you mean by making the 
parser
> "aware" of the token change.  There are other ways to do this.  
> 
> Your way might work, but exceptions are expensive.  Wait, it won't 
work
> because it will screw up lookahead.  No rule will know about your 
bad token
> and that would be "bad".
> 
> If you don't like having the filename in the token, I would instead 
put that
> "bad" token in a hidden token stream.  You can override consume() 
to check
> the hidden token stream and set your state.  Or it can wait in the 
hidden
> stream and everytime you check that state you could pull in the 
tokens from
> the hidden stream and set state before returning it.
> 
> Monty
> 
> -----Original Message-----
> From: davidjpenton2002 <djplists@a...>
> [mailto:djplists@a...]
> Sent: Friday, January 24, 2003 7:32 AM
> To: antlr-interest@yahoogroups.com
> Subject: [antlr-interest] catching an exception in the parser and
> continuing - will this work?
> 
> 
> I am handling "include files" in my lexer, as in the java example 
> provided with antlr.  This means that fact the lexer is in an 
> included file is transparent to the parser.
> 
> However, it turns out that I want the parser to be made aware of 
the 
> fact that the lexer is in an included file. (Kindly assume that I 
> have a sound design reason for this ;-) Given the amount of 
lookahead 
> that may occur, I am sure that the only safe way to do this is by 
> putting the correct "notification" on the stream of tokens passed 
to 
> the parser.
> 
> Is it possible to have the lexer pass a back a "bad" token (i.e. 
one 
> that the parser can never recognize), catch a resultant exception, 
> and then (here's the important part) force the parser to take up 
> right where is was when it got the "bad" token?  It would amount to 
> skipping over the "bad" token, except that the exception handling 
> code would set a flag or two that would be available later to 
parser 
> semantic actions.
> 
> I have looked at the exception handling documentation, and sifted 
> through my generated parser.  It is not clear to me if my strategy 
> will work.
> 
> BTW, I am still using antlr 2.7.1 - I want to try to finish what I 
am 
> doing before trying the switch to 2.7.2.
> 
> Thanks.
> 
> - Dave Penton -
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to 
http://docs.yahoo.com/info/terms/


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From sinan.karasu at boeing.com  Fri Jan 24 11:45:41 2003
From: sinan.karasu at boeing.com (Sinan)
Date: Mon Dec 20 16:15:17 2004
Subject: [antlr-interest] Bug in tree construction generated code
References: <2333EDD8-28C4-11D7-A8BA-000393BB647E@jguru.com>
Message-ID: <3E3197E5.EB0D40C3@boeing.com>

Terence Parr wrote:
> 
> Hi Pete,
> 
> Unfortunately, this is a "feature" that I was uncomfortable with
> introducing way back when that has bitten us all.  STRING is a
> shorthand for a reference to that token in the rule's AST.  :(  I'd be
> happy to remove this ambiguous feature, but it would break a lot of
> code :(
> 

terence,
 I submit that whatever this breaks would be almost inconsequential. ( A
lot of qualifiers there)

In these cases one almost always wants to access the derived AST , and
not the Base AST.
So, everyone ends up putting a # there anyway...

 FWIW..

Sinan

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From djplists at arrowsash.com  Fri Jan 24 12:48:17 2003
From: djplists at arrowsash.com (David Penton)
Date: Mon Dec 20 16:15:17 2004
Subject: [antlr-interest] Re: catching an exception in the parser and 
	cont inuing - will this work?
In-Reply-To: 
	<170826586F3BD511910D0200C110AAA805402144@memail03.bco-home.com>
References: <170826586F3BD511910D0200C110AAA805402144@memail03.bco-home.com>
Message-ID: <1043441298.3889.0.camel@linux2>

Thanks Monty.

- Dave -
On Fri, 2003-01-24 at 12:47, mzukowski@yci.com wrote:
> The single spot you are asking about is the consume() method.  Everything
> goes through there.  Look at the generated code.  
> 
> Monty
> 
> -----Original Message-----
> From: davidjpenton2002 <djplists@arrowsash.com>
> [mailto:djplists@arrowsash.com]
> Sent: Friday, January 24, 2003 9:23 AM
> To: antlr-interest@yahoogroups.com
> Subject: [antlr-interest] Re: catching an exception in the parser and
> cont inuing - will this work?
> 
> 
> Thanks for your help.
> 
> I had hoped that the "bad" token could be handled by a catch block 
> somewhere.  The "somewhere" part may be the catch.  It appears to me 
> that the normal behavior of an antlr parser is to report an 
> unexpected token, and then to forge ahead.  That's the behavior I 
> observe if I place a token (or rather a string that will match a 
> known lexer rule) in the wrong spot in my input.  The parser reports 
> it as an unexpected token, but continues to parse.  That is the 
> behavior that I want to use by returning a "special" token unknown to 
> any parser rule. I do not (yet) understand just where and how the 
> normal processing happens in the parser code - I'm busy looking 
> through it to find out, especially as regards exception handling.  
> Any hints on this would help, although I am also re-reading the docs 
> on exceptions.
> 
> The main thing that would make life easier for me is if I can 
> identify a single spot to handle the information about source of 
> tokens.  That is, it would be a pain in the neck if such processing 
> had to be associated with each parser rule separately.  I'm not sure 
> if I am being clear about that.
> 
> The other two strategies that you suggest (hidden token stream; 
> embedding file information in the token) may also be fruitful for me, 
> so I'll look into both. Thanks for the excellent insights.
> 
> - Dave Penton -
> 
> --- In antlr-interest@yahoogroups.com, mzukowski@y... wrote:
> > What I do in the gcc project is have tokens aware of the file they 
> came from
> > as well.  Then it is pretty easy to tell whether a new file has been
> > included or not.
> > 
> > There are other ways too, like Ter's fieldguide on whitespace 
> preservation
> > by using a hidden token stream.
> > 
> > You'll have to be more specific about what you mean by making the 
> parser
> > "aware" of the token change.  There are other ways to do this.  
> > 
> > Your way might work, but exceptions are expensive.  Wait, it won't 
> work
> > because it will screw up lookahead.  No rule will know about your 
> bad token
> > and that would be "bad".
> > 
> > If you don't like having the filename in the token, I would instead 
> put that
> > "bad" token in a hidden token stream.  You can override consume() 
> to check
> > the hidden token stream and set your state.  Or it can wait in the 
> hidden
> > stream and everytime you check that state you could pull in the 
> tokens from
> > the hidden stream and set state before returning it.
> > 
> > Monty
> > 
> > -----Original Message-----
> > From: davidjpenton2002 <djplists@a...>
> > [mailto:djplists@a...]
> > Sent: Friday, January 24, 2003 7:32 AM
> > To: antlr-interest@yahoogroups.com
> > Subject: [antlr-interest] catching an exception in the parser and
> > continuing - will this work?
> > 
> > 
> > I am handling "include files" in my lexer, as in the java example 
> > provided with antlr.  This means that fact the lexer is in an 
> > included file is transparent to the parser.
> > 
> > However, it turns out that I want the parser to be made aware of 
> the 
> > fact that the lexer is in an included file. (Kindly assume that I 
> > have a sound design reason for this ;-) Given the amount of 
> lookahead 
> > that may occur, I am sure that the only safe way to do this is by 
> > putting the correct "notification" on the stream of tokens passed 
> to 
> > the parser.
> > 
> > Is it possible to have the lexer pass a back a "bad" token (i.e. 
> one 
> > that the parser can never recognize), catch a resultant exception, 
> > and then (here's the important part) force the parser to take up 
> > right where is was when it got the "bad" token?  It would amount to 
> > skipping over the "bad" token, except that the exception handling 
> > code would set a flag or two that would be available later to 
> parser 
> > semantic actions.
> > 
> > I have looked at the exception handling documentation, and sifted 
> > through my generated parser.  It is not clear to me if my strategy 
> > will work.
> > 
> > BTW, I am still using antlr 2.7.1 - I want to try to finish what I 
> am 
> > doing before trying the switch to 2.7.2.
> > 
> > Thanks.
> > 
> > - Dave Penton -
> > 
> > 
> >  
> > 
> > Your use of Yahoo! Groups is subject to 
> http://docs.yahoo.com/info/terms/
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 
> 
> 



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From rjc at trump.net.au  Fri Jan 24 14:30:31 2003
From: rjc at trump.net.au (Robert Colquhoun)
Date: Mon Dec 20 16:15:17 2004
Subject: [antlr-interest] One weird, one (hopefully) simple problem
  ... from a newbie
In-Reply-To: <0EF9DEABA42FE547BAE43D0298F146B23DD3D3@ESP.eca-internation
 al.local>
Message-ID: <4.2.0.58.20030125085844.00b169e0@postoffice.trump.net.au>

Hello Anthony,

Since this looks like a strangely mutated version of something i wrote.... ;-)

In your lexer you are manually defining the WHILE token, in your parser you 
are trying to match the WLE token which doesn't appear to be defined 
anywhere.  Maybe a typo?

A better way for simple cases is in your parser define "WHILE", "UNTIL" etc 
literally in your parser rules and then in your lexer import the parser 
vocabulary and define "testLiterals" define in lexer IDENTIFIER rule.

ie
Lexer:

IDENT
         options {
                 testLiterals=true;
         }
     : (('a'..'z'|'A'..'Z') ('a'..'z'|'A'..'Z'|'_'|'0'..'9'|'.'|'$'|'%')*)

Parser:

while: "WHILE"
until: "UNTIL"

...and automatically there will be LITERAL_WHILE and LITERAL_UNTIL created 
by the lexer for use in parsers and tree walkers.

Because of evilness within the language(ARev/Pick BASIC) ie statements and 
variables clashed, both could be called "PRINT", "LOOP" etc the above 
didn't work, i had to do something more complicated in the lexer, lexer 
states to get the thing working.

PS For anyone interested the original grammar is 
http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/maverick/maverick/ 
src/org/maverickdbms/tools/BASIC.g?rev=HEAD&content-type=text/plain

  - Robert

At 04:06 PM 24/01/2003 +0000, Anthony W. Youngman wrote:

>I've got a minimal grammar attached, and am having two problems...
>
>When I feed the code (at the bottom) into the grammar (below) it works 
>fine. Prints out loads of trace stuff right the way down. But if I change 
>UNTIL to WHILE, it only appears to get as far as the LOOP. Having hit this 
>sort of thing earlier, is my "while" code clashing with a reserved word in 
>java/antlr? I don't really know either well enough. And I'm not getting 
>any error messages - it's just that my trace appears to work over the 
>entire file with "until", but stop as it hits "while". That's my weird problem.
>
>And as for the simple problem? How do I get the parser to print 
>"MULTIPLY", "DIVIDE" or whatever - by the way, it's got to be postfix.
>
>Bear in mind I'm an experienced programmer, but I've never used OO stuff 
>like Java or C++ in anger (or even hardly at all...).
>
>Cheers,
>Wol
>
>-----------------------------------------------------------
>
>class BASICLexer extends Lexer;
>
>options {
>         exportVocab=BASIC;
>         k=2;
>}
>
>tokens {
>         LABEL;
>         LOOP; WHILE; UNTIL; REPEAT;
>}
>
>{
>         // Are we in a statement or expression?
>         private final int STATEMENT = 0;
>         private final int EXPRESSION = 1;
>         int state = STATEMENT;
>}
>
>WS                      : ( ' '|'\t') { $setType(Token.SKIP); };
>EOL             : ( "\r\n"|'\r'|'\n' ) { newline(); state = STATEMENT; };
>
>protected ALPHA : ('a'..'z'|'A'..'Z') ;
>protected NUMERIC : ('0'..'9') ;
>IDENT
>         : ( ALPHA ( ALPHA|NUMERIC|'.'|'$'|'%')* )
>                 {
>                         if (state == STATEMENT) {
>             if (LA(1) == ':' ) {
>                                         int len=text.length();
>                                         consume();
>                                         text.setLength(len);
>                                         _ttype = LABEL;
>                                 } else {
>                                         // more stuff here
>                                         String txt = $getText.toUpperCase();
>                                         // cant use switch here - it 
> takes int. bummer
>                                         if (txt.equals("LOOP")) { _ttype 
> = LOOP;}
>                                         else if (txt.equals("WHILE")) { 
> _ttype = WHILE;}
>                                         else if (txt.equals("UNTIL")) { 
> _ttype = UNTIL;}
>                                         else if (txt.equals("REPEAT")) { 
> _ttype = REPEAT;};
>                                 }
>                         }
>                 }
>         ;
>
>INT              : (NUMERIC)+ ;
>DECIMAL : ('.') ;
>STRING_LITERAL   : '"' ('A'..'Z'|'a'..'z'|'0'..'9')* '"' ;
>
>PLUS    : ('+');
>MINUS   : ('-');
>DIVIDE  : ('/');
>MULTIPLY        : ('*') {System.out.println("MULTIPLY ");};
>ASSIGN  : ('=');
>
>class BASICParser extends Parser;
>
>options {
>         exportVocab=BASIC;
>         buildAST=true;
>         k=2;
>}
>
>ig    : ( i:INT {System.out.println("Integer "+i);});
>rg              : ( r:REAL {System.out.println("Real "+r);});
>sl    : ( slit:STRING_LITERAL {System.out.println("String "+slit);});
>id    : ( iden:IDENT {System.out.println("Ident "+iden);});
>nl    : ( EOL {System.out.println("New line");});
>lb              : (lbl:LABEL {System.out.println("Label "+lbl);});
>dc              : (dcm:DECIMAL {System.out.println("Decimal "+dcm);});
>lp              : (loop:LOOP {System.out.println("LOOP "+loop);});
>wl              : (wle:WLE {System.out.println("WHILE "+wle);});
>un              : (until:UNTIL {System.out.println("UNTIL "+until);});
>rp              : (repeat:REPEAT {System.out.println("REPEAT "+repeat);});
>
>atom    : ( i:INT {System.out.println("Integer "+i);});
>prodExpr        : atom ((MULTIPLY^|DIVIDE^) atom)* ;
>sumExpr : prodExpr ( (PLUS^|MINUS^) prodExpr)* ;
>expr    : sumExpr ;
>assign  : ( id:IDENT ASSIGN^ expr ) {System.out.println("ASSIGN 
>");System.out.println("INDENT "+id);} ;
>
>entry   :       (sl|ig|id|nl|rg|lb|dc|lp|wl|un|rp|assign)+;
>
>-----------------------------------------------------------------
>
>XYZ:
>B = 4 + 5
>C = 6 * 7
>LOOP UNTIL X = 4
>    A = 3
>REPEAT
>1234
>567.89
>ABCD:
>"abdcddf"
>RETURN
>END


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From jbb at acm.org  Fri Jan 24 14:47:02 2003
From: jbb at acm.org (jbb@acm.org)
Date: Mon Dec 20 16:15:17 2004
Subject: [antlr-interest] One weird, one (hopefully) simple problem ... from a newbie
In-Reply-To: 
	<0EF9DEABA42FE547BAE43D0298F146B23DD3D3@ESP.eca-international.local>
	(Anthony.Youngman@ECA-International.com)
References: <0EF9DEABA42FE547BAE43D0298F146B23DD3D3@ESP.eca-international.local>
Message-ID: <E18cCbG-0008Gb-00@gecko.home.org>

Mr. Youngman :-

You asked:

Wol>......if I change UNTIL to
Wol>WHILE, it only appears to get as far as the LOOP......
      
This is because of this rule:

wl		: (wle:WLE {System.out.println("WHILE "+wle);});
                       ^^^
                        |
                 should be WHILE (i think)

You also asked:

Wol>......And I'm not getting any
Wol>error messages - it's just that my trace appears to work over the entire
Wol>file with "until", but stop as it hits "while". That's my weird problem.

This is because of this rule:

entry	:	(sl|ig|id|nl|rg|lb|dc|lp|wl|un|rp|assign)+;

which tells your generated parser to simply stop when it sees an input
it does not recognize to be the begining of a phrase in the language
you are trying to parse. If you change this rule to:

entry : (sl|ig|id|nl|rg|lb|dc|lp|wl|un|rp|assign)+ EOF;

then your parser is instructed to correctly process the entire input
file until it sees the end-of-file. thus when an unrecognizable
leading token is seen an error message will be displayed.

And lastly, you asked:

Wol>And as for the simple problem? How do I get the parser to print "MULTIPLY",
Wol>"DIVIDE" or whatever - by the way, it's got to be postfix.

Here is a version of your grammar which accumulates expressions into a
String in postfix form and prints it. You, however, will probably
want to exploit Antlr's capabilities for constructing and traversing a
Abstract Syntax Tree (AST) and not use a string as an intermediate
format for your parse results.

-------------------------
class BASICLexer extends Lexer;

options {
    exportVocab=BASIC;
    k=2;
}

tokens {
    LABEL;
    LOOP; WHILE; UNTIL; REPEAT;
}

{
    // Are we in a statement or expression?
    private final int STATEMENT = 0;
    private final int EXPRESSION = 1;
    int state = STATEMENT;
}

WS  : ( ' '|'\t') { $setType(Token.SKIP); };
EOL : ( "\r\n"|'\r'|'\n' ) { newline(); state = STATEMENT; };

protected ALPHA : ('a'..'z'|'A'..'Z') ;
protected NUMERIC : ('0'..'9') ;
IDENT
    : ( ALPHA ( ALPHA|NUMERIC|'.'|'$'|'%')* )
        {
            if (state == STATEMENT) {
                if (LA(1) == ':' ) {
                    int len=text.length();
                    consume();
                    text.setLength(len);
                    _ttype = LABEL;
                } else {
                    // more stuff here
                    String txt = $getText.toUpperCase();
                    // cant use switch here - it takes int. bummer
                    if (txt.equals("LOOP")) { _ttype =
                        LOOP;}
                    else if (txt.equals("WHILE")) {
                        _ttype = WHILE;}
                    else if (txt.equals("UNTIL")) {
                        _ttype = UNTIL;}
                    else if (txt.equals("REPEAT")) {
                        _ttype = REPEAT;};
                }
            }
        }
    ;

INT     : (NUMERIC)+ ;
DECIMAL : ('.') ;
STRING_LITERAL : '"' ('A'..'Z'|'a'..'z'|'0'..'9')* '"' ;

PLUS    : ('+');
MINUS   : ('-');
DIVIDE  : ('/');
MULTIPLY: ('*');
ASSIGN  : ('=');

class BASICParser extends Parser;

options {
    exportVocab=BASIC;
    buildAST=true;
    k=2;
}

ig returns [String val=null] :
	i:INT
	{
	    System.out.println("Integer "+i);
	    val = i.getText();
	}
    ;

id returns [String ident=null] :
	iden:IDENT
	{
	    System.out.println("Ident "+iden);
	    ident = iden.getText();
	}
    ;

rg    : (r:REAL {System.out.println("Real "+r);});
sl    : (slit:STRING_LITERAL {System.out.println("String "+slit);});
nl    : (EOL {System.out.println("New line");});
lb    : (lbl:LABEL {System.out.println("Label "+lbl);});
dc    : (dcm:DECIMAL {System.out.println("Decimal "+dcm);});
lp    : (loop:LOOP {System.out.println("LOOP "+loop);});
wl    : (wle:WHILE {System.out.println("WHILE "+wle);});
un    : (until:UNTIL {System.out.println("UNTIL "+until);});
rp    : (repeat:REPEAT {System.out.println("REPEAT "+repeat);});

mulOp returns [String op=null] :
	MULTIPLY { op = "MUL"; }
    | DIVIDE { op = "DIV"; }
    ;

addOp returns [String op=null] :
	PLUS { op="ADD"; }
    | MINUS { op="SUB"; }
    ;

atom returns [String a=null] : a=ig | a=id ;

prodExpr returns [String prod=null] :
	prod=atom
	(
	    { String o, r; }
	    o=mulOp r=prodExpr { prod += " " + r + " " + o; }
	)?
    ;

sumExpr returns [String sum=null] :
	sum=prodExpr
	(
	    { String o, r; }
	    o=addOp r=sumExpr { sum += " " + r + " " + o; }
	)?
    ;

expr returns [String e=null] :
	e=sumExpr
    ;

assign :
	{ String ident, e; }
	ident=id ASSIGN e=expr
	{
	    System.out.println(e+" "+ident+" ASG");
	}
    ;

entry :
	(sl|ig|id|nl|rg|lb|dc|lp|wl|un|rp|assign)+ EOF
    ;
-------------------------

Hope this helps...

-- 
	-jbb
----------------+----------------------------
 John B. Brodie | Email : jbrodie@cs.fit.edu
----------------+----------------------------

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From rmsanjivp at yahoo.com  Fri Jan 24 18:06:03 2003
From: rmsanjivp at yahoo.com (rmsanjivp <rmsanjivp@yahoo.com>)
Date: Mon Dec 20 16:15:17 2004
Subject: [antlr-interest] No one knows about message 7182??
Message-ID: <b0sreb+6d2n@eGroups.com>

Hi I was wondering if someone can help me. I posted a message ( 
number 7182)  and no one has replied as yet. Does anyone know about 
thing that I am asking?

Thanks,
sanjiv


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From bendt at inf.fu-berlin.de  Sat Jan 25 06:51:41 2003
From: bendt at inf.fu-berlin.de (beeh1973 <bendt@inf.fu-berlin.de>)
Date: Mon Dec 20 16:15:17 2004
Subject: [antlr-interest] warning: redefinition of token in tokens (was Re: ambiguous grammar)
In-Reply-To: <170826586F3BD511910D0200C110AAA805402101@memail03.bco-home.com>
Message-ID: <b0u89u+reek@eGroups.com>

--- In antlr-interest@yahoogroups.com, mzukowski@y... wrote:
> The easiest way to get the tree you want will be to modify your 
lexer to
> remember that you just saw a $ and that you need to produce DOT, 
not FLOAT.
> "Lexer states" is one approach to this (see docs).  Another would 
be to use
> semantic predicates in the lexer.

thanks a lot. it took me some time to understand but this is exactly 
what i was looking for.

unfortunately i encountered a new problem, maybe someone can help me:

as both lexers need to share a common vocabulary i created a file 
CommonTokenTypes.txt, put in the common tokens and imported it in 
both lexers and the parser. compare with example below.

in the parser i am adding the AST Option to the imported Tokens.
this causes a warning for Example: 'warning:Redefinition of token in 
tokens {...}: AND'

The generated Parser works as expected. So maybe theres just a switch 
to turn the warning off?

example:

CommonTokenTypes.txt:

AND=4
...

lexer1.g:

options {
 importVocab=Common
}

...

parser.g:

options {
 importVocab=Common
}

tokens {
 AND <AST=AndOperator>;
}

...


> 
> Monty
> 
> -----Original Message-----
> From: beeh1973 <hastur4711@b...> [mailto:hastur4711@b...]
> Sent: Monday, January 20, 2003 7:23 AM
> To: antlr-interest@yahoogroups.com
> Subject: [antlr-interest] Re: ambiguous grammar
> 
> 
> --- In antlr-interest@yahoogroups.com, Anakreon Mejdi <amejdi@e...> 
> wrote:
> >   component:
> >     DOLLAR^ FLOAT
> >     ;
> > This should work.
> > There is no DOT because in the NUMBER rule if an DIGIT is matched 
> the 
> > type is made FLOAT and the DOT is consumed.
> > For the same reason there is no NUMBER Token.
> >
> hi,
> 
> it works but does not produce the result i need.
> this would create the tree
> ($ .1)
> instead i need the tree
> ($ . 1)
> 
> in fact i do not need DOT to be part of the tree. just to display 
the
> difference. ($ 1) would suffice.
> 
> .1 is just a float literal
> $.1 is a positional notation: "the first element in $"
> 
> another reply gave me the hint to check the provided Java and C 
> Grammars.
> i will check this way.
> 
> thanks a lot,
>   alphonse
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to 
http://docs.yahoo.com/info/terms/


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From klaren at cs.utwente.nl  Sat Jan 25 08:53:24 2003
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:15:17 2004
Subject: [antlr-interest] warning: redefinition of token in tokens (was Re: ambiguous grammar)
In-Reply-To: <b0u89u+reek@eGroups.com>; from bendt@inf.fu-berlin.de on Sat, Jan 25, 2003 at 02:51:41PM -0000
References: <170826586F3BD511910D0200C110AAA805402101@memail03.bco-home.com> <b0u89u+reek@eGroups.com>
Message-ID: <20030125175324.G14956@cs.utwente.nl>

Hi,

Didn't quite follow the thread but anyway ;)

On Sat, Jan 25, 2003 at 02:51:41PM -0000, beeh1973 <bendt@inf.fu-berlin.de> wrote:
> as both lexers need to share a common vocabulary i created a file
> CommonTokenTypes.txt, put in the common tokens and imported it in
> both lexers and the parser. compare with example below.
>
> in the parser i am adding the AST Option to the imported Tokens.
> this causes a warning for Example: 'warning:Redefinition of token in
> tokens {...}: AND'

This depends a little on your setup. If you have parser and lexer in one
file then you don't need to import/exportvocab (since they will share the
same vocabulary).  (only nice if you have small lexer/parser/treewalkers)
If you have them in separate files, then the best setup is to create a
chain of export/importVocabs.

E.g. in your lexer you do exportVocab = Lexer_ in your parser you do a
importVocab = Lexer_, and a exportVocab = Parser_ in the first tree walker
you'd do a importVocab = Parser_ and if you add new nodest to the tree
you'd do a new exportVocab.

You don't need to do exportVocab's if you don't define any additional
tokens/astnodes in a parser/treewalker. If you use this setup you have to
make sure you build things in the right order e.g. from the bottom up. If
you don't you might end up with parsers/treewalkers/lexers that have a
different understanding of a token/astnode.

Another option is to define all tokens/astnodes in one of your files and
exportvocab from there and importvocab from all the others. This is a
matter of taste kinda.

> The generated Parser works as expected. So maybe theres just a switch
> to turn the warning off?

Think we didn't add a switch for that... talked about it but it got
probably got lost somewhere.

HTH,

Ric
--
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- klaren@cs.utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
  Before they invented drawing boards, what did they go back to?


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From djplists at arrowsash.com  Sat Jan 25 09:12:57 2003
From: djplists at arrowsash.com (David Penton)
Date: Mon Dec 20 16:15:17 2004
Subject: [antlr-interest] Re: catching an exception in the parser and 
	cont inuing - will this work?
In-Reply-To: 
	<170826586F3BD511910D0200C110AAA805402144@memail03.bco-home.com>
References: <170826586F3BD511910D0200C110AAA805402144@memail03.bco-home.com>
Message-ID: <1043514779.1944.24.camel@linux2>

I checked out the generated code as Monty suggested.  If I understand
what I am looking at it appears to me that the receipt of an unexpected
token causes the parser attempt to re-sync by skipping the entire
current rule.  Is that right?

If so, it now appears that my best strategy is that adopted in the gcc
project & pass information about the current include file in the tokens.

Thanks.

- Dave Penton -


On Fri, 2003-01-24 at 12:47, mzukowski@yci.com wrote:
> The single spot you are asking about is the consume() method.  Everything
> goes through there.  Look at the generated code.  
> 
> Monty
> 
> -----Original Message-----
> From: davidjpenton2002 <djplists@arrowsash.com>
> [mailto:djplists@arrowsash.com]
> Sent: Friday, January 24, 2003 9:23 AM
> To: antlr-interest@yahoogroups.com
> Subject: [antlr-interest] Re: catching an exception in the parser and
> cont inuing - will this work?
> 
> 
> Thanks for your help.
> 
> I had hoped that the "bad" token could be handled by a catch block 
> somewhere.  The "somewhere" part may be the catch.  It appears to me 
> that the normal behavior of an antlr parser is to report an 
> unexpected token, and then to forge ahead.  That's the behavior I 
> observe if I place a token (or rather a string that will match a 
> known lexer rule) in the wrong spot in my input.  The parser reports 
> it as an unexpected token, but continues to parse.  That is the 
> behavior that I want to use by returning a "special" token unknown to 
> any parser rule. I do not (yet) understand just where and how the 
> normal processing happens in the parser code - I'm busy looking 
> through it to find out, especially as regards exception handling.  
> Any hints on this would help, although I am also re-reading the docs 
> on exceptions.
> 
> The main thing that would make life easier for me is if I can 
> identify a single spot to handle the information about source of 
> tokens.  That is, it would be a pain in the neck if such processing 
> had to be associated with each parser rule separately.  I'm not sure 
> if I am being clear about that.
> 
> The other two strategies that you suggest (hidden token stream; 
> embedding file information in the token) may also be fruitful for me, 
> so I'll look into both. Thanks for the excellent insights.
> 
> - Dave Penton -
> 
> --- In antlr-interest@yahoogroups.com, mzukowski@y... wrote:
> > What I do in the gcc project is have tokens aware of the file they 
> came from
> > as well.  Then it is pretty easy to tell whether a new file has been
> > included or not.
> > 
> > There are other ways too, like Ter's fieldguide on whitespace 
> preservation
> > by using a hidden token stream.
> > 
> > You'll have to be more specific about what you mean by making the 
> parser
> > "aware" of the token change.  There are other ways to do this.  
> > 
> > Your way might work, but exceptions are expensive.  Wait, it won't 
> work
> > because it will screw up lookahead.  No rule will know about your 
> bad token
> > and that would be "bad".
> > 
> > If you don't like having the filename in the token, I would instead 
> put that
> > "bad" token in a hidden token stream.  You can override consume() 
> to check
> > the hidden token stream and set your state.  Or it can wait in the 
> hidden
> > stream and everytime you check that state you could pull in the 
> tokens from
> > the hidden stream and set state before returning it.
> > 
> > Monty
> > 
> > -----Original Message-----
> > From: davidjpenton2002 <djplists@a...>
> > [mailto:djplists@a...]
> > Sent: Friday, January 24, 2003 7:32 AM
> > To: antlr-interest@yahoogroups.com
> > Subject: [antlr-interest] catching an exception in the parser and
> > continuing - will this work?
> > 
> > 
> > I am handling "include files" in my lexer, as in the java example 
> > provided with antlr.  This means that fact the lexer is in an 
> > included file is transparent to the parser.
> > 
> > However, it turns out that I want the parser to be made aware of 
> the 
> > fact that the lexer is in an included file. (Kindly assume that I 
> > have a sound design reason for this ;-) Given the amount of 
> lookahead 
> > that may occur, I am sure that the only safe way to do this is by 
> > putting the correct "notification" on the stream of tokens passed 
> to 
> > the parser.
> > 
> > Is it possible to have the lexer pass a back a "bad" token (i.e. 
> one 
> > that the parser can never recognize), catch a resultant exception, 
> > and then (here's the important part) force the parser to take up 
> > right where is was when it got the "bad" token?  It would amount to 
> > skipping over the "bad" token, except that the exception handling 
> > code would set a flag or two that would be available later to 
> parser 
> > semantic actions.
> > 
> > I have looked at the exception handling documentation, and sifted 
> > through my generated parser.  It is not clear to me if my strategy 
> > will work.
> > 
> > BTW, I am still using antlr 2.7.1 - I want to try to finish what I 
> am 
> > doing before trying the switch to 2.7.2.
> > 
> > Thanks.
> > 
> > - Dave Penton -
> > 
> > 
> >  
> > 
> > Your use of Yahoo! Groups is subject to 
> http://docs.yahoo.com/info/terms/
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 
> 
> 



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From abreneliere at telys.com  Sat Jan 25 10:47:44 2003
From: abreneliere at telys.com (anthony_breneliere <abreneliere@telys.com>)
Date: Mon Dec 20 16:15:17 2004
Subject: [antlr-interest] A tip to execute the "java.exe antlr.Tool" command from the Explorer
Message-ID: <b0um4g+ojp1@eGroups.com>

A tip to transform you grammar file with one doucle-click from the 
Windows Explorer?: 

1. Ensure the java.exe is in the system32 directory (or change the 
sJavaDir init value in the script)

2. Ensure the %classpath% environment variable is correctly 
configured.

3. Save that script in a .vbs text file, then execute it !

----------------
Option Explicit

Dim oShell
Dim sJavaDir, sClassPath, sCommand

Set oShell = CreateObject("WScript.Shell")

sJavaDir = _
    oShell.ExpandEnvironmentStrings("%SystemRoot%") & "\System32" 

sClassPath = _
    oShell.ExpandEnvironmentStrings("%classpath%")

sCommand = sJavaDir & "\java.exe -cp " & sClassPath & _
    " antlr.Tool " & Chr(34) & "%1" & Chr(34)

oShell.RegWrite "HKCR\.g\shell\Command\", "Compile &ANTLR grammar" 
oShell.RegWrite "HKCR\.g\shell\Command\command\", sCommand
----------------

4. Right-click on a .g file to test if it works !

If the %classpath% env variable changes, just execute that script 
again.

Cordially,
Anthony




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From nk.truong at student.qut.edu.au  Sat Jan 25 17:45:17 2003
From: nk.truong at student.qut.edu.au (tdknghi <nk.truong@student.qut.edu.au>)
Date: Mon Dec 20 16:15:17 2004
Subject: [antlr-interest] adding extra keyword to java languages
Message-ID: <b0vejd+f7gh@eGroups.com>

  Hi all,

I would like to modify the java grammar so that it will parse the 
following java program.

   public class A
   {
       public static void main(String[] args)
       {
           System.out.println("a");
           <gap>System.out.println("a gap");</gap>

       }
   }   
Do you have any idea how to do that? May you let me know.

Thanks.

Regards,
MiMi


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From chris at subtlety.com  Sat Jan 25 20:36:41 2003
From: chris at subtlety.com (Chris Bergstresser)
Date: Mon Dec 20 16:15:17 2004
Subject: [antlr-interest] Help with simple parser?
In-Reply-To: <000401c2b43c$10000770$0200a8c0@NOTEBOOK>
Message-ID: <DJEFIKPPDDMCNMFHCKGOEEMKCCAA.chris@subtlety.com>

Hi all --

   I've got a very simple grammar, but I keep getting recursion errors.  I
don't know enough to fix it.  My rules look like:

expr     : LPAREN! sumExpr RPAREN! ;
sumExpr  : prodExpr ((PLUS^|MINUS^) prodExpr)* ;
prodExpr : minMaxExpr ((MUL^|DIV^|MOD^) minMaxExpr)* ;
minMaxExpr:	((MIN^|MAX^) LPAREN! minMaxExpr COMMA! minMaxExpr RPAREN!) |
ifExp;
ifExp    : (IF^ LPAREN! ifExp COMMA! atom COMMA! atom RPAREN!) | atom;
atom     : INT | STAT | expr;

   ...but I don't want the parentheses around expr to be mandatory.  I'd
also like to enforce the same number of opening as closing parentheses.  As
it stands now equations like "(if(1, 2+3, 4))" won't parse, because the
"2+3" need wrapping parenthesis.  Obviously, I'd like "if(1, 2+3, 4)" to be
valid, as well.  I've wandered -- rather uselessly -- through most of the
examples.  Could someone help?

-- Chris


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From jbb at acm.org  Sat Jan 25 20:56:54 2003
From: jbb at acm.org (jbb@acm.org)
Date: Mon Dec 20 16:15:17 2004
Subject: [antlr-interest] Help with simple parser?
In-Reply-To: <DJEFIKPPDDMCNMFHCKGOEEMKCCAA.chris@subtlety.com>
References: <DJEFIKPPDDMCNMFHCKGOEEMKCCAA.chris@subtlety.com>
Message-ID: <E18ceqk-00034A-00@gecko.home.org>

Mr. Bergstresser :-

Have you tried:

expr     : sumExpr;
atom     : INT | STAT | ( LPAREN! expr RPAREN! );


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From chris at subtlety.com  Sun Jan 26 11:52:49 2003
From: chris at subtlety.com (Chris Bergstresser)
Date: Mon Dec 20 16:15:17 2004
Subject: [antlr-interest] Help with simple parser?
In-Reply-To: <DJEFIKPPDDMCNMFHCKGOEEMKCCAA.chris@subtlety.com>
Message-ID: <DJEFIKPPDDMCNMFHCKGOEENDCCAA.chris@subtlety.com>

> Have you tried:
>
> expr : sumExpr;
> atom : INT | STAT | ( LPAREN! expr RPAREN! );

   Doesn't work.  It keeps me from needing to wrap whole expressions with
parentheses (as in "1+2" rather than "(1+2)") but doesn't fix the "if(1,
2+3, 4)" problem -- it wants the center bit to be wrapped as well, and it
shouldn't *need* to be.

-- Chris


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From parrt at jguru.com  Sun Jan 26 15:15:15 2003
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:15:17 2004
Subject: [antlr-interest] project 0 for the USF language class
Message-ID: <06E1C078-3184-11D7-A114-000393BB647E@jguru.com>

Folks,

Anybody have any suggestions for this project before I give it to the  
students tomorrow (first day of class)?

http://www.cs.usfca.edu/~parrt/course/652/projects-Spring-2003/xml- 
byhand.html

My goal is to provide concrete examples of many of the concepts to be  
taught in the class.  Easier to think of the abstract stuff later if  
you have a real example in your head.

Ter
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org
Lecturer in Comp. Sci., University of San Francisco


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From s_mitra8 at yahoo.com  Sun Jan 26 17:24:16 2003
From: s_mitra8 at yahoo.com (sudip mitra)
Date: Mon Dec 20 16:15:17 2004
Subject: [antlr-interest] PERL VS ANTLR
In-Reply-To: <06E1C078-3184-11D7-A114-000393BB647E@jguru.com>
Message-ID: <20030127012416.75189.qmail@web10403.mail.yahoo.com>


I was wondering  how do Perl and Antlr compare .
Would Antlr be a superset of Perl ? 
Or is Perl THE language for text manipulation ?
Answers to this question should ignore the learning time .I just want to know if Antlr can do more than Perl even if its a language blah blah ...!!!



---------------------------------
Do you Yahoo!?
Yahoo! Mail Plus - Powerful. Affordable. Sign up now
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20030126/b58cb4af/attachment.html
From Anthony.Youngman at ECA-International.com  Mon Jan 27 00:16:03 2003
From: Anthony.Youngman at ECA-International.com (Anthony W. Youngman)
Date: Mon Dec 20 16:15:17 2004
Subject: [antlr-interest] One weird, one (hopefully) simple problem ..
	. from a newbie
Message-ID: <0EF9DEABA42FE547BAE43D0298F146B23DD3D7@ESP.eca-international.local>

Skipped content of type multipart/alternative
From rjc at trump.net.au  Mon Jan 27 04:11:04 2003
From: rjc at trump.net.au (Robert Colquhoun)
Date: Mon Dec 20 16:15:17 2004
Subject: [antlr-interest] One weird, one (hopefully) simple problem
  .. . from a newbie
In-Reply-To: <0EF9DEABA42FE547BAE43D0298F146B23DD3D7@ESP.eca-internation
 al.local>
Message-ID: <4.2.0.58.20030127215842.017096f0@postoffice.trump.net.au>

At 08:16 AM 27/01/2003 +0000, Anthony W. Youngman wrote:

>Hi Rob,
>
>I thought I'd meet you here.
>
>Yes it is based very heavily on your grammar. I thought the best way to 
>get to grips with both the grammar and Antlr was to tackle something where 
>I knew what it was supposed to be doing. And as a learning exercise, 
>redoing a worked example is always a good idea :-)

This BASIC version mightn't be the best one to learn stuff on, it has lots 
of bad stuff in it:
  - Predefined language identifiers may also be used for variable names
  - EOL is sometimes whitespace and sometimes significant to the parser
  - ';' can also be used to terminate statements as well as used as a 
separator within statements
  - Somebody defined a ' ' operator(a single space character) which does 
formatting.
  - Both arrays and functions use '(...)' for arguments ie A(B) could be 
call function or dereference A at index B.
  - * is sometimes multiply, sometimes start comment
  - ! is sometimes OR operator, sometimes start comment
  - REM is sometimes a variable, sometimes REMainder function, sometimes 
start comment
  - Has a second kind of array which uses < > for indexes, < > are also 
conditional operators freely mixed together in expressions.
  - ':' has been used for labels(goto targets), as a concatenation operator 
as well as adding special meaning to certain other statements
  - .....plus lots other things that caused late nights which i cant 
remember offhand!

It might be better to start with something like tinybasic(by Sinan i think) 
in the examples directory and try to build that up, especially if you are 
used to C and not particularly comfortable with java/C++ or parser 
generators in general.

>Plus I'm going to have another stab at my C code. See if I get any further 
>this time...

Rewrite the compiler/runtime to use C instead of java?

  - Robert


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From abreneliere at telys.com  Mon Jan 27 04:25:59 2003
From: abreneliere at telys.com (=?iso-8859-1?Q?Anthony_Breneli=E8re?=)
Date: Mon Dec 20 16:15:17 2004
Subject: [antlr-interest] What's the best way to differentiate identifiers and keywords in the lexer ?
Message-ID: <000001c2c5ff$3fc9d740$fe646464@lavaserver>

What's the best way to differentiate identifier and keywords in the
lexer ?

I have read the following solutions to avoid nondeterminism?:

--------
1. using the token list, or use the strings "(keyword)" in the parser,
for keywords.

..but the problem is that i need some rule to assign code to execute,
for each keyword.
--------
2. using the syntactic predicates in the lexer

..but the problem is that i have to send back a TOKEN that is not the
TOKEN od the keyword itself.

I would have something like:

KEY_OR_ID : (KEYWORD1)=> KEYWORD1 | ... | (KEYWORDn)=> KEYWORDn
;

ID : ('a'..'z'|'A'..'Z'|'_')
;

protected KEYWORD1 : "KEYWORD1" { my code 1 } ;
(...)
protected KEYWORDn : "KEYWORDn" { my code n } ;

..but I could not return the KEYWORDi token to the parser.
---------


Is there another third (good) solution with ANTLR ?

Cordially,
Anthony B.


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From amejdi at ertonline.gr  Mon Jan 27 04:50:28 2003
From: amejdi at ertonline.gr (Anakreon Mejdi)
Date: Mon Dec 20 16:15:17 2004
Subject: [antlr-interest] What's the best way to differentiate identifiers
 and keywords in the lexer ?
References: <000001c2c5ff$3fc9d740$fe646464@lavaserver>
Message-ID: <3E352B14.3010109@ertonline.gr>

I define all the keywords as imaginary Tokens in the Parser.
I could define them as empty protected rules int the Lexer,
for example( protected FINALLY:;) but ANTLR produces code for
empty rules as well.
Into a separate class (I do this for convinience) I create a Map
where the String value of the keyword is placed as the key and the int 
code given by antlr (in token types) as value;

And then I have the following rule in the Lexer:

IDENTIFIER_TYPES
   :
   id:IDENTIFIER {
       /*
         Since ASP uses ActiveX components
         and an ActiveX can have a method or attribute with
         name equal to some keyword, be sure that the last token
         wasn't DOT
       */
       if (lastToken != DOT) {
           String idText = id.getText().toUpperCase();
           Object intVal = VbsConstants.KEYWORDS.get(idText);
           if (intVal != null) {
               _ttype = ((Integer) intVal).intValue();
           } else {
               _ttype = IDENTIFIER;
           }
       } else {
           _ttype = IDENTIFIER;
       }
       if (_ttype != REM) {
           lastToken = _ttype;
       } else {
           mLINE(false);
           _ttype = Token.SKIP;
       }
   }
   ;

In this way you can perform various actions based on the keyword.

Anthony Breneli?re wrote:
> What's the best way to differentiate identifier and keywords in the
> lexer ?
> 
> I have read the following solutions to avoid nondeterminism :
> 
> --------
> 1. using the token list, or use the strings "(keyword)" in the parser,
> for keywords.
> 
> ..but the problem is that i need some rule to assign code to execute,
> for each keyword.
> --------
> 2. using the syntactic predicates in the lexer
> 
> ..but the problem is that i have to send back a TOKEN that is not the
> TOKEN od the keyword itself.
> 
> I would have something like:
> 
> KEY_OR_ID : (KEYWORD1)=> KEYWORD1 | ... | (KEYWORDn)=> KEYWORDn
> ;
> 
> ID : ('a'..'z'|'A'..'Z'|'_')
> ;
> 
> protected KEYWORD1 : "KEYWORD1" { my code 1 } ;
> (...)
> protected KEYWORDn : "KEYWORDn" { my code n } ;
> 
> ..but I could not return the KEYWORDi token to the parser.
> ---------
> 
> 
> Is there another third (good) solution with ANTLR ?
> 
> Cordially,
> Anthony B.
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 
> 
> 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

-------------- next part --------------
A non-text attachment was scrubbed...
Name: VbsConstants.java
Type: java/*
Size: 2602 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20030127/357bb29b/VbsConstants.bin
From Anthony.Youngman at ECA-International.com  Mon Jan 27 06:13:53 2003
From: Anthony.Youngman at ECA-International.com (Anthony W. Youngman)
Date: Mon Dec 20 16:15:17 2004
Subject: [antlr-interest] One weird, one (hopefully) simple problem ..
	 . from a newbie
Message-ID: <0EF9DEABA42FE547BAE43D0298F146B23DD3DD@ESP.eca-international.local>

Skipped content of type multipart/alternative
From johnm-antlr at non.net  Mon Jan 27 08:26:02 2003
From: johnm-antlr at non.net (John D. Mitchell)
Date: Mon Dec 20 16:15:17 2004
Subject: [antlr-interest] PERL VS ANTLR
In-Reply-To: <20030127012416.75189.qmail@web10403.mail.yahoo.com>
References: <06E1C078-3184-11D7-A114-000393BB647E@jguru.com>
	<20030127012416.75189.qmail@web10403.mail.yahoo.com>
Message-ID: <15925.23962.192312.930060@non.non.net>

Sounds like a troll but what the heck... :-)

>>>>> "sudip" == sudip mitra <s_mitra8@yahoo.com> writes:
[...]

> I was wondering how do Perl and Antlr compare .  Would Antlr be a
> superset of Perl ?  Or is Perl THE language for text manipulation ?
> Answers to this question should ignore the learning time .I just want to
> know if Antlr can do more than Perl even if its a language blah blah
> ...!!!

(A) Perl is a general purpose programming language.

(B) Perl programs for translation work tend very strongly to be based on
ad hoc, simplistic (though often ridiculously complex) use of regular
expressions.

(C) ANTLR is a grammar-based lexer/parser/walker generator.

Go wild,
	John

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From mzukowski at yci.com  Mon Jan 27 08:41:14 2003
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:15:17 2004
Subject: [antlr-interest] One weird, one (hopefully) simple problem ..
	. from a newbie
Message-ID: <170826586F3BD511910D0200C110AAA80540214B@memail03.bco-home.com>

There are other ways around these ambiguities.  See for instance
www.codetransform.com/filterexample.html.  Also if you are doing an AREV or
BASIC parser you might be interested in some of the other pages on my site
that tell how I did an AREV to VB translator.

Monty

-----Original Message-----
From: Robert Colquhoun [mailto:rjc@trump.net.au]
Sent: Friday, January 24, 2003 2:31 PM
To: 'antlr-interest@yahoogroups.com'
Subject: Re: [antlr-interest] One weird, one (hopefully) simple problem
... from a newbie


...

Because of evilness within the language(ARev/Pick BASIC) ie statements and 
variables clashed, both could be called "PRINT", "LOOP" etc the above 
didn't work, i had to do something more complicated in the lexer, lexer 
states to get the thing working.

PS For anyone interested the original grammar is 
http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/maverick/maverick/

src/org/maverickdbms/tools/BASIC.g?rev=HEAD&content-type=text/plain

...

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From mzukowski at yci.com  Mon Jan 27 08:45:21 2003
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:15:17 2004
Subject: [antlr-interest] Re: catching an exception in the parser and 
	 cont inuing - will this work?
Message-ID: <170826586F3BD511910D0200C110AAA80540214D@memail03.bco-home.com>

Note also that if an unexpected token is found you will probably get the
exception thrown "k" tokens ahead of where you would have thought the error
would occur because that unknown token would not be in the lookahead tests.

And yes, I recommend my approach in the gcc toolkit :)

Monty

-----Original Message-----
From: David Penton [mailto:djplists@arrowsash.com]
Sent: Saturday, January 25, 2003 9:13 AM
To: antlr-interest@yahoogroups.com
Subject: RE: [antlr-interest] Re: catching an exception in the parser
and cont inuing - will this work?


I checked out the generated code as Monty suggested.  If I understand
what I am looking at it appears to me that the receipt of an unexpected
token causes the parser attempt to re-sync by skipping the entire
current rule.  Is that right?

If so, it now appears that my best strategy is that adopted in the gcc
project & pass information about the current include file in the tokens.

Thanks.

- Dave Penton -


On Fri, 2003-01-24 at 12:47, mzukowski@yci.com wrote:
> The single spot you are asking about is the consume() method.  Everything
> goes through there.  Look at the generated code.  
> 
> Monty
> 
> -----Original Message-----
> From: davidjpenton2002 <djplists@arrowsash.com>
> [mailto:djplists@arrowsash.com]
> Sent: Friday, January 24, 2003 9:23 AM
> To: antlr-interest@yahoogroups.com
> Subject: [antlr-interest] Re: catching an exception in the parser and
> cont inuing - will this work?
> 
> 
> Thanks for your help.
> 
> I had hoped that the "bad" token could be handled by a catch block 
> somewhere.  The "somewhere" part may be the catch.  It appears to me 
> that the normal behavior of an antlr parser is to report an 
> unexpected token, and then to forge ahead.  That's the behavior I 
> observe if I place a token (or rather a string that will match a 
> known lexer rule) in the wrong spot in my input.  The parser reports 
> it as an unexpected token, but continues to parse.  That is the 
> behavior that I want to use by returning a "special" token unknown to 
> any parser rule. I do not (yet) understand just where and how the 
> normal processing happens in the parser code - I'm busy looking 
> through it to find out, especially as regards exception handling.  
> Any hints on this would help, although I am also re-reading the docs 
> on exceptions.
> 
> The main thing that would make life easier for me is if I can 
> identify a single spot to handle the information about source of 
> tokens.  That is, it would be a pain in the neck if such processing 
> had to be associated with each parser rule separately.  I'm not sure 
> if I am being clear about that.
> 
> The other two strategies that you suggest (hidden token stream; 
> embedding file information in the token) may also be fruitful for me, 
> so I'll look into both. Thanks for the excellent insights.
> 
> - Dave Penton -
> 
> --- In antlr-interest@yahoogroups.com, mzukowski@y... wrote:
> > What I do in the gcc project is have tokens aware of the file they 
> came from
> > as well.  Then it is pretty easy to tell whether a new file has been
> > included or not.
> > 
> > There are other ways too, like Ter's fieldguide on whitespace 
> preservation
> > by using a hidden token stream.
> > 
> > You'll have to be more specific about what you mean by making the 
> parser
> > "aware" of the token change.  There are other ways to do this.  
> > 
> > Your way might work, but exceptions are expensive.  Wait, it won't 
> work
> > because it will screw up lookahead.  No rule will know about your 
> bad token
> > and that would be "bad".
> > 
> > If you don't like having the filename in the token, I would instead 
> put that
> > "bad" token in a hidden token stream.  You can override consume() 
> to check
> > the hidden token stream and set your state.  Or it can wait in the 
> hidden
> > stream and everytime you check that state you could pull in the 
> tokens from
> > the hidden stream and set state before returning it.
> > 
> > Monty
> > 
> > -----Original Message-----
> > From: davidjpenton2002 <djplists@a...>
> > [mailto:djplists@a...]
> > Sent: Friday, January 24, 2003 7:32 AM
> > To: antlr-interest@yahoogroups.com
> > Subject: [antlr-interest] catching an exception in the parser and
> > continuing - will this work?
> > 
> > 
> > I am handling "include files" in my lexer, as in the java example 
> > provided with antlr.  This means that fact the lexer is in an 
> > included file is transparent to the parser.
> > 
> > However, it turns out that I want the parser to be made aware of 
> the 
> > fact that the lexer is in an included file. (Kindly assume that I 
> > have a sound design reason for this ;-) Given the amount of 
> lookahead 
> > that may occur, I am sure that the only safe way to do this is by 
> > putting the correct "notification" on the stream of tokens passed 
> to 
> > the parser.
> > 
> > Is it possible to have the lexer pass a back a "bad" token (i.e. 
> one 
> > that the parser can never recognize), catch a resultant exception, 
> > and then (here's the important part) force the parser to take up 
> > right where is was when it got the "bad" token?  It would amount to 
> > skipping over the "bad" token, except that the exception handling 
> > code would set a flag or two that would be available later to 
> parser 
> > semantic actions.
> > 
> > I have looked at the exception handling documentation, and sifted 
> > through my generated parser.  It is not clear to me if my strategy 
> > will work.
> > 
> > BTW, I am still using antlr 2.7.1 - I want to try to finish what I 
> am 
> > doing before trying the switch to 2.7.2.
> > 
> > Thanks.
> > 
> > - Dave Penton -
> > 
> > 
> >  
> > 
> > Your use of Yahoo! Groups is subject to 
> http://docs.yahoo.com/info/terms/
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 
> 
> 



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From mzukowski at yci.com  Mon Jan 27 08:56:20 2003
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:15:17 2004
Subject: [antlr-interest] What's the best way to differentiate identif
	iers and keywords in the lexer ?
Message-ID: <170826586F3BD511910D0200C110AAA80540214F@memail03.bco-home.com>

The GCC toolkit uses a handy approach.  Wrap the rule that tests for
literals in another rule.  That way you get the proper token type (since the
literals table isn't tested until the end of the rule).  Then in the calling
rule do your logic based on the real token type, and use $setType() to
preserve the returned type.

By the way, what exactly do you want to do in the lexer anyhow?  There might
be other solutions if we have more detail.

Monty

-----Original Message-----
From: Anthony Breneli?re [mailto:abreneliere@telys.com]
Sent: Monday, January 27, 2003 4:26 AM
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] What's the best way to differentiate
identifiers and keywords in the lexer ?


What's the best way to differentiate identifier and keywords in the
lexer ?

I have read the following solutions to avoid nondeterminism?:

--------
1. using the token list, or use the strings "(keyword)" in the parser,
for keywords.

..but the problem is that i need some rule to assign code to execute,
for each keyword.
--------
2. using the syntactic predicates in the lexer

..but the problem is that i have to send back a TOKEN that is not the
TOKEN od the keyword itself.

I would have something like:

KEY_OR_ID : (KEYWORD1)=> KEYWORD1 | ... | (KEYWORDn)=> KEYWORDn
;

ID : ('a'..'z'|'A'..'Z'|'_')
;

protected KEYWORD1 : "KEYWORD1" { my code 1 } ;
(...)
protected KEYWORDn : "KEYWORDn" { my code n } ;

..but I could not return the KEYWORDi token to the parser.
---------


Is there another third (good) solution with ANTLR ?

Cordially,
Anthony B.


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From medha at rocketmail.com  Mon Jan 27 10:09:37 2003
From: medha at rocketmail.com (medha.rm <medha@rocketmail.com>)
Date: Mon Dec 20 16:15:17 2004
Subject: [antlr-interest] Help: writing your own scanner with antlr
Message-ID: <b13sl1+vq2u@eGroups.com>

Hello,
For some reasons I need to interface my own scanner with my antlr 
grammar. The standard interface between scanner and parser in Antlr 
seems to be through an object Token and getToken() method that 
returns the next token within the stream.

I have problems achieving this. I use Token.setText() method to set 
the text field within the scanner but it does not work. I have no way 
to find out exactly how the antlr-generated scanner does it, because 
I only know that the tokens actually get created through base class 
that Antlr-scanner inherits so it happens "behind the scenes".

Can you please let me know any way to do this? If needed, I can 
provide more info, and we could take this discussion offline.

Thanks a lot for all the help,
Medha


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From medha at rocketmail.com  Mon Jan 27 10:43:14 2003
From: medha at rocketmail.com (medha.rm <medha@rocketmail.com>)
Date: Mon Dec 20 16:15:17 2004
Subject: [antlr-interest] Help: writing your own scanner with antlr
Message-ID: <b13uk2+anka@eGroups.com>

Hello,
For some reasons I need to interface my own scanner with my antlr 
grammar. The standard interface between scanner and parser in Antlr 
seems to be through an object Token and getToken() method that 
returns the next token within the stream.

I have problems achieving this. I use Token.setText() method to set 
the text field within the scanner but it does not work. I have no way 
to find out exactly how the antlr-generated scanner does it, because 
I only know that the tokens actually get created through base class 
that Antlr-scanner inherits so it happens "behind the scenes".

Can you please let me know any way to do this? If needed, I can 
provide more info, and we could take this discussion offline.

Thanks a lot for all the help,
Medha


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From mzukowski at yci.com  Mon Jan 27 10:46:05 2003
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:15:17 2004
Subject: [antlr-interest] Help: writing your own scanner with antlr
Message-ID: <170826586F3BD511910D0200C110AAA805402150@memail03.bco-home.com>

Java or C++?  The source is all there.  You should be able to dig into the
base class and see what it does.

Monty

-----Original Message-----
From: medha.rm <medha@rocketmail.com> [mailto:medha@rocketmail.com]
Sent: Monday, January 27, 2003 10:43 AM
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] Help: writing your own scanner with antlr


Hello,
For some reasons I need to interface my own scanner with my antlr 
grammar. The standard interface between scanner and parser in Antlr 
seems to be through an object Token and getToken() method that 
returns the next token within the stream.

I have problems achieving this. I use Token.setText() method to set 
the text field within the scanner but it does not work. I have no way 
to find out exactly how the antlr-generated scanner does it, because 
I only know that the tokens actually get created through base class 
that Antlr-scanner inherits so it happens "behind the scenes".

Can you please let me know any way to do this? If needed, I can 
provide more info, and we could take this discussion offline.

Thanks a lot for all the help,
Medha


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From cintyram at yahoo.com  Mon Jan 27 10:57:49 2003
From: cintyram at yahoo.com (cintyram <cintyram@yahoo.com>)
Date: Mon Dec 20 16:15:17 2004
Subject: [antlr-interest] Re: PERL VS ANTLR
In-Reply-To: <15925.23962.192312.930060@non.non.net>
Message-ID: <b13vfd+ndu0@eGroups.com>

well , in principle, antlr supports context free , which is a super
set of regular ;
but perl is a programming languge and helps you in doing specific
tasks which might be part of your solution, like making it easy to
read a file, etc .. also the pattern matching and other r.e functions
are very powerful and sufficient for most common tasks; for eg: if all
you have to do is read links out of a file, or simply search and
replace a specific patter with a specific other .. then perl might be
easier to use; 

on the other hand, if you try writing a system like monty's gcc
framework etc. in PERL you will find that it is easier to think and
specify in ebnf ;
so the comparison is actually case by case , and one should not
generalize ;


also with antlr, you generate code to do something, but with perl you
actually formulate the whole solution and code it!! 

so your question for the most part wants to compare apples and oranges.
/e
cheers
ram



--- In antlr-interest@yahoogroups.com, "John D. Mitchell"
<johnm-antlr@n...> wrote:
> Sounds like a troll but what the heck... :-)
> 
> >>>>> "sudip" == sudip mitra <s_mitra8@y...> writes:
> [...]
> 
> > I was wondering how do Perl and Antlr compare .  Would Antlr be a
> > superset of Perl ?  Or is Perl THE language for text manipulation ?
> > Answers to this question should ignore the learning time .I just
want to
> > know if Antlr can do more than Perl even if its a language blah blah
> > ...!!!
> 
> (A) Perl is a general purpose programming language.
> 
> (B) Perl programs for translation work tend very strongly to be based on
> ad hoc, simplistic (though often ridiculously complex) use of regular
> expressions.
> 
> (C) ANTLR is a grammar-based lexer/parser/walker generator.
> 
> Go wild,
> 	John


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From kreismeister at yahoo.de  Mon Jan 27 13:35:21 2003
From: kreismeister at yahoo.de (Gunnar Wagenknecht <kreismeister@yahoo.de>)
Date: Mon Dec 20 16:15:17 2004
Subject: [antlr-interest] Keywords with whitespaces
Message-ID: <b148mp+pg8c@eGroups.com>

Hi!

Any tips on how to recognize keywords with whitespaces? I think the 
literals options is not enough because it will match words as 
keywords that arn't keywords if not followed by another word.

example: "begin" (WS)+ "sequence" is _ONE_ keyword but only "begin" 
or "sequence" is handled as identifyer.

I'd like to try the following but get a lot of warnings.

ID options { 
	testLiterals = false; // we don't test for literals because 
all are defined here!
	}
	: 
	  "announce"            { $setType( ANNOUNCE         );}
	| "as" (WS)+ 	( "anytype" 	{ $setType(AS_VARIANT); }
					| "array"		{ 
$setType(AS_ARRAY); }
						( (WS)+ "of" (WS)+ (
						 	"anytype"
		{ $setType(AS_ARRAY); }
						 	| "array"
		{ $setType(AS_ARRAY_ARRAY); }
							| "character"
	{ $setType(AS_CHARACTER_ARRAY); }
							| "class"
		{ $setType(AS_CLASS_ARRAY); }
							| "codeblock"
	{ $setType(AS_BLOCK_ARRAY); }
							| "date"
		{ $setType(AS_DATE_ARRAY); }
						
	| "enumeration"	{ $setType(AS_ENUM_ARRAY); }
		                    | "logical"		{ $setType
(AS_LOGICAL_ARRAY); }
		                    | "numeric"		{ $setType
(AS_NUMERIC_ARRAY); }
		                    | "object" 		{ $setType
(AS_OBJECT_ARRAY); }
		                    | "string" 		{ $setType
(AS_CHARACTER_ARRAY); }
		                    | "usual" 		{ $setType
(AS_CHARACTER_ARRAY); }
		                    )
						)?
					| "character"	{ $setType
(AS_CHARACTER); }
					| "class"		{ 
$setType(AS_CLASS); }
					| "codeblock"	{ $setType
(AS_BLOCK); }
					| "date"		{ 
$setType(AS_DATE); }
					| "enumeration"	{ $setType
(AS_ENUM); }
                    | "logical"		{ $setType(AS_LOGICAL); }
                    | "numeric"		{ $setType(AS_NUMERIC); }
                    | "object" 		{ $setType(AS_OBJECT); }
                    | "string" 		{ $setType(AS_CHARACTER); }
                    | "usual" 		{ $setType(AS_CHARACTER); }
					)
	| "begin" (WS)+ "sequence"   { $setType( BEGINSEQ         );}
	| "break"               { $setType( BREAK            );}
	| "case"                { $setType( CASE             );}
	| "catch"               { $setType( CATCH            );}
	| "declare"             { $setType( DECLARE          );}
	| "do"                  { $setType( DO               );}
		( (WS)+ (
		  	"case"          { $setType( 
DOCASE           );}
			| "while"       { $setType( 
DO_WHILE         );}
			( (WS)+ 
			  	"with" 		{ $setType( 
DO_WHILE_WITH    );}
			)?
			)
		)?
	| "else"                { $setType( ELSE             );}
	  	( "if"              { $setType( ELSEIF           );}
	  	)?
	| "end"                 { $setType( END              );}
	| "endcase"             { $setType( ENDCASE          );}
	| "enddo"               { $setType( ENDDO            );}
	| "endif"               { $setType( ENDIF            );}
	| "enumeration"         { $setType( ENUM             );}
	| "exit"                { $setType( EXIT             );}
		( (WS)+ (
		  	  "function"    { $setType( 
HB_EXIT_FUNC     );}
			| "procedure"   { $setType( 
HB_EXIT_PROC     );}
			)
		)?
	| "external"            { $setType( EXTERN           );}
	| "field"				{ $setType( 
FIELD            );}
	| "for"                 { $setType( FOR              );}
		( (WS)+
		  "each"         	{ $setType( 
FOREACH          );}
		)?
	| "function"            { $setType( FUNCTION         );}
	| "global"              { $setType( GLOBAL           );}
		( (WS)+ "external"  { $setType( EXTERNGLOBAL     );}
		)?
	| "hb_inline"			{ $setType( 
HB_INLINE        );}
	| "if"                  { $setType( IF               );}
	| "iif"					{ $setType( 
IIF              );}
	| "in" (WS)+			{ $setType(IN); }
	| "init" (WS)+ (
		  "function"    	{ $setType( 
HB_INIT_FUNC     );}
		| "procedure"   	{ $setType( 
HB_INIT_PROC     );}
		)
	| "line"				{ $setType(LINE); }
	| "local"               { $setType( LOCAL            );}
	| "loop"                { $setType( LOOP             );}
	| "memvar"              { $setType( MEMVAR           );}
	| "next"                { $setType( NEXT             );}
	| "nil"					{ $setType(NIL); }
	| "optional"			{ $setType(OPTIONAL); }
	| "otherwise"           { $setType( OTHERWISE        );}
	| "parameters"          { $setType( PARAMETERS       );}
	| "private"             { $setType( PRIVATE          );}
	| "procedure"           { $setType( PROCEDURE        );}
	| "public"              { $setType( PUBLIC           );}
	| "qself"				{ $setType(QSELF); }
	| "recover"             { $setType( RECOVER          );}
		( (WS)+ "using"    	{ $setType( 
RECOVERUSING     );}
		)?
	| "return"              { $setType( RETURN           );}
	| "static"              { $setType( STATIC           );}
		( (WS)+ (
			  "function"  	{ $setType( 
HB_STATIC_FUNC   );}
			| "procedure" 	{ $setType( 
HB_STATIC_PROC   );}
			)
		)?
	| "step"				{ $setType(HB_STEP); }
	| "text"                { $setType( HB_TEXT          );}
	| "to"					{ $setType(HB_TO); }
	| "try"                 { $setType( TRY              );}
	| "while"               { $setType( WHILE            );}
	| "with"				{ $setType( 
HB_WITH          );}
		((WS)+ "object" 	{ $setType( 
WITHOBJ          );}
		)?
	| "_hb_"
	 	( "class"           { $setType( DECLARE_CLASS    );}
		| "member"          { $setType( DECLARE_MEMBER   );}
		)
	| "_procreq_"           { $setType( PROCREQ          );}
	| "_field"		{ $setType(FIELD); }
	| "_get"		{ $setType(GET); }
	| ('a'..'z'|'_'|'?') ('a'..'z'|'_'|'?'|'0'..'9')* 
	;



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From mzukowski at yci.com  Mon Jan 27 13:38:00 2003
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:15:17 2004
Subject: [antlr-interest] Keywords with whitespaces
Message-ID: <170826586F3BD511910D0200C110AAA805402154@memail03.bco-home.com>

Why not handle this in the parser?

rule: "begin" "sequence" ....;

Monty

-----Original Message-----
From: Gunnar Wagenknecht <kreismeister@yahoo.de>
[mailto:kreismeister@yahoo.de]
Sent: Monday, January 27, 2003 1:35 PM
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] Keywords with whitespaces


Hi!

Any tips on how to recognize keywords with whitespaces? I think the 
literals options is not enough because it will match words as 
keywords that arn't keywords if not followed by another word.

example: "begin" (WS)+ "sequence" is _ONE_ keyword but only "begin" 
or "sequence" is handled as identifyer.

I'd like to try the following but get a lot of warnings.

ID options { 
	testLiterals = false; // we don't test for literals because 
all are defined here!
	}
	: 
	  "announce"            { $setType( ANNOUNCE         );}
	| "as" (WS)+ 	( "anytype" 	{ $setType(AS_VARIANT); }
					| "array"		{ 
$setType(AS_ARRAY); }
						( (WS)+ "of" (WS)+ (
						 	"anytype"
		{ $setType(AS_ARRAY); }
						 	| "array"
		{ $setType(AS_ARRAY_ARRAY); }
							| "character"
	{ $setType(AS_CHARACTER_ARRAY); }
							| "class"
		{ $setType(AS_CLASS_ARRAY); }
							| "codeblock"
	{ $setType(AS_BLOCK_ARRAY); }
							| "date"
		{ $setType(AS_DATE_ARRAY); }
						
	| "enumeration"	{ $setType(AS_ENUM_ARRAY); }
		                    | "logical"		{ $setType
(AS_LOGICAL_ARRAY); }
		                    | "numeric"		{ $setType
(AS_NUMERIC_ARRAY); }
		                    | "object" 		{ $setType
(AS_OBJECT_ARRAY); }
		                    | "string" 		{ $setType
(AS_CHARACTER_ARRAY); }
		                    | "usual" 		{ $setType
(AS_CHARACTER_ARRAY); }
		                    )
						)?
					| "character"	{ $setType
(AS_CHARACTER); }
					| "class"		{ 
$setType(AS_CLASS); }
					| "codeblock"	{ $setType
(AS_BLOCK); }
					| "date"		{ 
$setType(AS_DATE); }
					| "enumeration"	{ $setType
(AS_ENUM); }
                    | "logical"		{ $setType(AS_LOGICAL); }
                    | "numeric"		{ $setType(AS_NUMERIC); }
                    | "object" 		{ $setType(AS_OBJECT); }
                    | "string" 		{ $setType(AS_CHARACTER); }
                    | "usual" 		{ $setType(AS_CHARACTER); }
					)
	| "begin" (WS)+ "sequence"   { $setType( BEGINSEQ         );}
	| "break"               { $setType( BREAK            );}
	| "case"                { $setType( CASE             );}
	| "catch"               { $setType( CATCH            );}
	| "declare"             { $setType( DECLARE          );}
	| "do"                  { $setType( DO               );}
		( (WS)+ (
		  	"case"          { $setType( 
DOCASE           );}
			| "while"       { $setType( 
DO_WHILE         );}
			( (WS)+ 
			  	"with" 		{ $setType( 
DO_WHILE_WITH    );}
			)?
			)
		)?
	| "else"                { $setType( ELSE             );}
	  	( "if"              { $setType( ELSEIF           );}
	  	)?
	| "end"                 { $setType( END              );}
	| "endcase"             { $setType( ENDCASE          );}
	| "enddo"               { $setType( ENDDO            );}
	| "endif"               { $setType( ENDIF            );}
	| "enumeration"         { $setType( ENUM             );}
	| "exit"                { $setType( EXIT             );}
		( (WS)+ (
		  	  "function"    { $setType( 
HB_EXIT_FUNC     );}
			| "procedure"   { $setType( 
HB_EXIT_PROC     );}
			)
		)?
	| "external"            { $setType( EXTERN           );}
	| "field"				{ $setType( 
FIELD            );}
	| "for"                 { $setType( FOR              );}
		( (WS)+
		  "each"         	{ $setType( 
FOREACH          );}
		)?
	| "function"            { $setType( FUNCTION         );}
	| "global"              { $setType( GLOBAL           );}
		( (WS)+ "external"  { $setType( EXTERNGLOBAL     );}
		)?
	| "hb_inline"			{ $setType( 
HB_INLINE        );}
	| "if"                  { $setType( IF               );}
	| "iif"					{ $setType( 
IIF              );}
	| "in" (WS)+			{ $setType(IN); }
	| "init" (WS)+ (
		  "function"    	{ $setType( 
HB_INIT_FUNC     );}
		| "procedure"   	{ $setType( 
HB_INIT_PROC     );}
		)
	| "line"				{ $setType(LINE); }
	| "local"               { $setType( LOCAL            );}
	| "loop"                { $setType( LOOP             );}
	| "memvar"              { $setType( MEMVAR           );}
	| "next"                { $setType( NEXT             );}
	| "nil"					{ $setType(NIL); }
	| "optional"			{ $setType(OPTIONAL); }
	| "otherwise"           { $setType( OTHERWISE        );}
	| "parameters"          { $setType( PARAMETERS       );}
	| "private"             { $setType( PRIVATE          );}
	| "procedure"           { $setType( PROCEDURE        );}
	| "public"              { $setType( PUBLIC           );}
	| "qself"				{ $setType(QSELF); }
	| "recover"             { $setType( RECOVER          );}
		( (WS)+ "using"    	{ $setType( 
RECOVERUSING     );}
		)?
	| "return"              { $setType( RETURN           );}
	| "static"              { $setType( STATIC           );}
		( (WS)+ (
			  "function"  	{ $setType( 
HB_STATIC_FUNC   );}
			| "procedure" 	{ $setType( 
HB_STATIC_PROC   );}
			)
		)?
	| "step"				{ $setType(HB_STEP); }
	| "text"                { $setType( HB_TEXT          );}
	| "to"					{ $setType(HB_TO); }
	| "try"                 { $setType( TRY              );}
	| "while"               { $setType( WHILE            );}
	| "with"				{ $setType( 
HB_WITH          );}
		((WS)+ "object" 	{ $setType( 
WITHOBJ          );}
		)?
	| "_hb_"
	 	( "class"           { $setType( DECLARE_CLASS    );}
		| "member"          { $setType( DECLARE_MEMBER   );}
		)
	| "_procreq_"           { $setType( PROCREQ          );}
	| "_field"		{ $setType(FIELD); }
	| "_get"		{ $setType(GET); }
	| ('a'..'z'|'_'|'?') ('a'..'z'|'_'|'?'|'0'..'9')* 
	;



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From kreismeister at yahoo.de  Mon Jan 27 13:45:32 2003
From: kreismeister at yahoo.de (Gunnar Wagenknecht <kreismeister@yahoo.de>)
Date: Mon Dec 20 16:15:17 2004
Subject: [antlr-interest] Re: Keywords with whitespaces
In-Reply-To: <170826586F3BD511910D0200C110AAA805402154@memail03.bco-home.com>
Message-ID: <b1499s+lmet@eGroups.com>


--- In antlr-interest@yahoogroups.com, mzukowski@y... wrote:
> Why not handle this in the parser?
> 
> rule: "begin" "sequence" ....;

I'm not sure. ANTLR will add word "begin" _AND_ word "sequence" to 
the table of literals but only the sequence "begin" "sequence" is one 
literal and not both single words.

Cu, Gunnar


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From s_mitra8 at yahoo.com  Mon Jan 27 14:59:33 2003
From: s_mitra8 at yahoo.com (sudip mitra)
Date: Mon Dec 20 16:15:17 2004
Subject: [antlr-interest] Re: PERL VS ANTLR
In-Reply-To: <b13vfd+ndu0@eGroups.com>
Message-ID: <20030127225933.93171.qmail@web10401.mail.yahoo.com>


wow ...!!! some explanation ... you think very clearly !!!
 "cintyram <cintyram@yahoo.com>" <cintyram@yahoo.com> wrote:well , in principle, antlr supports context free , which is a super
set of regular ;
but perl is a programming languge and helps you in doing specific
tasks which might be part of your solution, like making it easy to
read a file, etc .. also the pattern matching and other r.e functions
are very powerful and sufficient for most common tasks; for eg: if all
you have to do is read links out of a file, or simply search and
replace a specific patter with a specific other .. then perl might be
easier to use; 

on the other hand, if you try writing a system like monty's gcc
framework etc. in PERL you will find that it is easier to think and
specify in ebnf ;
so the comparison is actually case by case , and one should not
generalize ;


also with antlr, you generate code to do something, but with perl you
actually formulate the whole solution and code it!! 

so your question for the most part wants to compare apples and oranges.
/e
cheers
ram



--- In antlr-interest@yahoogroups.com, "John D. Mitchell"
wrote:
> Sounds like a troll but what the heck... :-)
> 
> >>>>> "sudip" == sudip mitra writes:
> [...]
> 
> > I was wondering how do Perl and Antlr compare . Would Antlr be a
> > superset of Perl ? Or is Perl THE language for text manipulation ?
> > Answers to this question should ignore the learning time .I just
want to
> > know if Antlr can do more than Perl even if its a language blah blah
> > ...!!!
> 
> (A) Perl is a general purpose programming language.
> 
> (B) Perl programs for translation work tend very strongly to be based on
> ad hoc, simplistic (though often ridiculously complex) use of regular
> expressions.
> 
> (C) ANTLR is a grammar-based lexer/parser/walker generator.
> 
> Go wild,
> John




Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 




---------------------------------
Do you Yahoo!?
Yahoo! Mail Plus - Powerful. Affordable. Sign up now
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20030127/24b3c052/attachment.html
From Matthew.Ford at forward.com.au  Mon Jan 27 15:04:07 2003
From: Matthew.Ford at forward.com.au (mail.ozemail.com.au)
Date: Mon Dec 20 16:15:17 2004
Subject: [antlr-interest] Keywords with whitespaces
References: <b148mp+pg8c@eGroups.com>
Message-ID: <000d01c2c658$667fabe0$0200a8c0@NOTEBOOK>

How about

What about in the Lexer.g

BEGIN_SEQUENCE: "begin"! (WS!)+ "sequence"!
    { $setText("begin sequence");}
;

----- Original Message -----
From: <kreismeister@yahoo.de>
To: <antlr-interest@yahoogroups.com>
Sent: Tuesday, January 28, 2003 8:35 AM
Subject: [antlr-interest] Keywords with whitespaces


> Hi!
>
> Any tips on how to recognize keywords with whitespaces? I think the
> literals options is not enough because it will match words as
> keywords that arn't keywords if not followed by another word.
>
> example: "begin" (WS)+ "sequence" is _ONE_ keyword but only "begin"
> or "sequence" is handled as identifyer.
>
> I'd like to try the following but get a lot of warnings.
>
> ID options {
> testLiterals = false; // we don't test for literals because
> all are defined here!
> }
> :
>   "announce"            { $setType( ANNOUNCE         );}
> | "as" (WS)+ ( "anytype" { $setType(AS_VARIANT); }
> | "array" {
> $setType(AS_ARRAY); }
> ( (WS)+ "of" (WS)+ (
> "anytype"
> { $setType(AS_ARRAY); }
> | "array"
> { $setType(AS_ARRAY_ARRAY); }
> | "character"
> { $setType(AS_CHARACTER_ARRAY); }
> | "class"
> { $setType(AS_CLASS_ARRAY); }
> | "codeblock"
> { $setType(AS_BLOCK_ARRAY); }
> | "date"
> { $setType(AS_DATE_ARRAY); }
>
> | "enumeration" { $setType(AS_ENUM_ARRAY); }
>                     | "logical" { $setType
> (AS_LOGICAL_ARRAY); }
>                     | "numeric" { $setType
> (AS_NUMERIC_ARRAY); }
>                     | "object" { $setType
> (AS_OBJECT_ARRAY); }
>                     | "string" { $setType
> (AS_CHARACTER_ARRAY); }
>                     | "usual" { $setType
> (AS_CHARACTER_ARRAY); }
>                     )
> )?
> | "character" { $setType
> (AS_CHARACTER); }
> | "class" {
> $setType(AS_CLASS); }
> | "codeblock" { $setType
> (AS_BLOCK); }
> | "date" {
> $setType(AS_DATE); }
> | "enumeration" { $setType
> (AS_ENUM); }
>                     | "logical" { $setType(AS_LOGICAL); }
>                     | "numeric" { $setType(AS_NUMERIC); }
>                     | "object" { $setType(AS_OBJECT); }
>                     | "string" { $setType(AS_CHARACTER); }
>                     | "usual" { $setType(AS_CHARACTER); }
> )
> | "begin" (WS)+ "sequence"   { $setType( BEGINSEQ         );}
> | "break"               { $setType( BREAK            );}
> | "case"                { $setType( CASE             );}
> | "catch"               { $setType( CATCH            );}
> | "declare"             { $setType( DECLARE          );}
> | "do"                  { $setType( DO               );}
> ( (WS)+ (
>   "case"          { $setType(
> DOCASE           );}
> | "while"       { $setType(
> DO_WHILE         );}
> ( (WS)+
>   "with" { $setType(
> DO_WHILE_WITH    );}
> )?
> )
> )?
> | "else"                { $setType( ELSE             );}
>   ( "if"              { $setType( ELSEIF           );}
>   )?
> | "end"                 { $setType( END              );}
> | "endcase"             { $setType( ENDCASE          );}
> | "enddo"               { $setType( ENDDO            );}
> | "endif"               { $setType( ENDIF            );}
> | "enumeration"         { $setType( ENUM             );}
> | "exit"                { $setType( EXIT             );}
> ( (WS)+ (
>     "function"    { $setType(
> HB_EXIT_FUNC     );}
> | "procedure"   { $setType(
> HB_EXIT_PROC     );}
> )
> )?
> | "external"            { $setType( EXTERN           );}
> | "field" { $setType(
> FIELD            );}
> | "for"                 { $setType( FOR              );}
> ( (WS)+
>   "each"         { $setType(
> FOREACH          );}
> )?
> | "function"            { $setType( FUNCTION         );}
> | "global"              { $setType( GLOBAL           );}
> ( (WS)+ "external"  { $setType( EXTERNGLOBAL     );}
> )?
> | "hb_inline" { $setType(
> HB_INLINE        );}
> | "if"                  { $setType( IF               );}
> | "iif" { $setType(
> IIF              );}
> | "in" (WS)+ { $setType(IN); }
> | "init" (WS)+ (
>   "function"    { $setType(
> HB_INIT_FUNC     );}
> | "procedure"   { $setType(
> HB_INIT_PROC     );}
> )
> | "line" { $setType(LINE); }
> | "local"               { $setType( LOCAL            );}
> | "loop"                { $setType( LOOP             );}
> | "memvar"              { $setType( MEMVAR           );}
> | "next"                { $setType( NEXT             );}
> | "nil" { $setType(NIL); }
> | "optional" { $setType(OPTIONAL); }
> | "otherwise"           { $setType( OTHERWISE        );}
> | "parameters"          { $setType( PARAMETERS       );}
> | "private"             { $setType( PRIVATE          );}
> | "procedure"           { $setType( PROCEDURE        );}
> | "public"              { $setType( PUBLIC           );}
> | "qself" { $setType(QSELF); }
> | "recover"             { $setType( RECOVER          );}
> ( (WS)+ "using"    { $setType(
> RECOVERUSING     );}
> )?
> | "return"              { $setType( RETURN           );}
> | "static"              { $setType( STATIC           );}
> ( (WS)+ (
>   "function"  { $setType(
> HB_STATIC_FUNC   );}
> | "procedure" { $setType(
> HB_STATIC_PROC   );}
> )
> )?
> | "step" { $setType(HB_STEP); }
> | "text"                { $setType( HB_TEXT          );}
> | "to" { $setType(HB_TO); }
> | "try"                 { $setType( TRY              );}
> | "while"               { $setType( WHILE            );}
> | "with" { $setType(
> HB_WITH          );}
> ((WS)+ "object" { $setType(
> WITHOBJ          );}
> )?
> | "_hb_"
> ( "class"           { $setType( DECLARE_CLASS    );}
> | "member"          { $setType( DECLARE_MEMBER   );}
> )
> | "_procreq_"           { $setType( PROCREQ          );}
> | "_field" { $setType(FIELD); }
> | "_get" { $setType(GET); }
> | ('a'..'z'|'_'|'?') ('a'..'z'|'_'|'?'|'0'..'9')*
> ;
>
>
>
>
>
> Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
>
>
>


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From hushlee83 at yahoo.com.sg  Mon Jan 27 16:39:05 2003
From: hushlee83 at yahoo.com.sg (=?iso-8859-1?q?Sharon=20Li?=)
Date: Mon Dec 20 16:15:17 2004
Subject: [antlr-interest] rules for complicated strings
Message-ID: <20030128003905.27606.qmail@web40910.mail.yahoo.com>


Hi,

How do I store a value read in from file, and reference the value later in the program?

my codes are as follow:

declaration
 : (HEX "define" (v:VARIABLE) (d:NUMERIC))
 { System.out.println("#define "+v.getText()+" "+d.getText()); } ;

The result of the parsing may look like this: #define DURATION 100

I need to store the v:VARIABLE (i.e. DURATION) read in from the input and its value (i.e. 100), as the variable will be referenced later in other parts of the code.

Next, is there a good way I can specify a rule to represent complicated strings like this:

P(age) --> {.g(1)[-(90)g(1).][g(MAX_P_LEN*func(2,age/DURATION)).][+(90)g(1).]} 

where parenthesis and brackets occur randomly and on both sides of the equation?

Somebody pls help. Thanks alot.

?Yahoo! Travel
- Get the latest travel deals in town!
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20030128/197f6052/attachment.html
From jbb at acm.org  Mon Jan 27 18:24:36 2003
From: jbb at acm.org (jbb@acm.org)
Date: Mon Dec 20 16:15:17 2004
Subject: [antlr-interest] rules for complicated strings
In-Reply-To: <20030128003905.27606.qmail@web40910.mail.yahoo.com> (message
	from =?iso-8859-1?q?Sharon=20Li?= on Tue, 28 Jan 2003 08:39:05 +0800
	(CST))
References: <20030128003905.27606.qmail@web40910.mail.yahoo.com>
Message-ID: <E18dLQS-00043y-00@gecko.home.org>


>How do I store a value read in from file, and reference the value later in
>the program?

I'd use a Hashtable, v is the key and d is its datum. And also study
the general Compiler literature regarding Symbol Tables and their use.

>Next, is there a good way I can specify a rule to represent complicated
>strings like this:
>
>P(age) --> {.g(1)[-(90)g(1).][g(MAX_P_LEN*func(2,age/DURATION)).][+(90)g(1).]}
>
>where parenthesis and brackets occur randomly and on both sides of the
>equation?

How 'bout this:
--------------------------------------------------
class hushlee83Parser extends Parser;
entry : expr EOF ;
expr :
	( OTHER
	| LPAREN expr RPAREN
	| LBRACE expr RBRACE
	| LBRACKET expr RBRACKET )+
    ;

class hushlee83Lexer extends Lexer;
options{charVocabulary='\3'..'\377';}
LPAREN : '(';
RPAREN : ')';
LBRACE : '{';
RBRACE : '}';
LBRACKET : '[';
RBRACKET : ']';
OTHER : (~('('|')'|'['|']'|'{'|'}'))+;

--------------------------------------------------
assuming that the parens, braces, and brackets must appear in pairs.

Hope this helps...

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From xeenman at yahoo.com  Mon Jan 27 18:39:07 2003
From: xeenman at yahoo.com (William Lam <xeenman@yahoo.com>)
Date: Mon Dec 20 16:15:17 2004
Subject: [antlr-interest] single line comment
Message-ID: <b14qgb+p1i0@eGroups.com>

Hi I am trying to implement a single line comment in my lexer.  I 
looked at the java.g single line comment.  It works great if a 
newline is at the end of the comment, but fails when an EOF is 
encountered, saying 

unexpected char: ?

I browsed through the archives and message 4617 talks about this 
problem.

SL_COMMENT
	:	"//"
		(~('\n'|'\r'))* ('\n'|'\r'('\n')?)
		{$setType(Token.SKIP); newline();}
	;


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From dvleonid at land.ru  Mon Jan 27 14:02:29 2003
From: dvleonid at land.ru (Dvoryansky Leonid)
Date: Mon Dec 20 16:15:17 2004
Subject: [antlr-interest] PERL VS ANTLR
References: <06E1C078-3184-11D7-A114-000393BB647E@jguru.com><20030127012416.75189.qmail@web10403.mail.yahoo.com> <15925.23962.192312.930060@non.non.net>
Message-ID: <000001c2c676$9425c8e0$0500a8c0@ZSHIP>

> > I was wondering how do Perl and Antlr compare .  Would Antlr be a
> > superset of Perl ?  Or is Perl THE language for text manipulation ?
> > Answers to this question should ignore the learning time .I just want to
> > know if Antlr can do more than Perl even if its a language blah blah
> > ...!!!

The main difference I think is that Perl is imerative language, but ANTLR
is declaretive (disregarding C semantic attributes).
So despite the fact that they have overlapping sets of solving tasks they
implement different ways for that.

By the way is it possible to write ANTLR in ANTLR-grammars? hmm....







 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From open.zone at virgin.net  Tue Jan 28 01:56:57 2003
From: open.zone at virgin.net (micheal_jor <open.zone@virgin.net>)
Date: Mon Dec 20 16:15:17 2004
Subject: [antlr-interest] Re: rules for complicated strings
In-Reply-To: <20030128003905.27606.qmail@web40910.mail.yahoo.com>
Message-ID: <b15k59+gmje@eGroups.com>


> Next, is there a good way I can specify a rule to represent 
complicated strings like this:
> 
> P(age) --> {.g(1)[-(90)g(1).][g(MAX_P_LEN*func(2,age/DURATION)).][+
(90)g(1).]} 
> 
> where parenthesis and brackets occur randomly and on both sides of 
the equation?

What does the above mean?. 

To answer your question, yes you can formulate rules for any 
structured input.  You already have "rules" for composing such 
expressions by hand (else you won't be able to determine their 
validity), you can specify those rules in ANTLR notation (I believe 
another poster has already supplied a starting point).

As for the above, I ask what it is/means because it seems to a layman 
like myself - who has no idea what it is for - that the expression 
syntax could be greatly simplified without loss of fidelity. In 
designing a parser one should strive for simplicity/clarity of 
expression - the language might survive for years.

Micheal



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From open.zone at virgin.net  Tue Jan 28 02:04:15 2003
From: open.zone at virgin.net (micheal_jor <open.zone@virgin.net>)
Date: Mon Dec 20 16:15:17 2004
Subject: [antlr-interest] Re: PERL VS ANTLR
In-Reply-To: <000001c2c676$9425c8e0$0500a8c0@ZSHIP>
Message-ID: <b15kiv+pf9s@eGroups.com>


> The main difference I think is that Perl is imerative language, but 
ANTLR
> is declaretive (disregarding C semantic attributes).
> So despite the fact that they have overlapping sets of solving 
tasks they
> implement different ways for that.
> 
> By the way is it possible to write ANTLR in ANTLR-grammars? hmm....

ANTLR is written with ANTLR. It's a self-booting system. 
Uufortunately it doesn't serve as a showcase of how to use ANTLR 
features such as AST-constrution (homo/hetero) or TreeParsers.

Micheal


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From rjc at trump.net.au  Tue Jan 28 03:05:58 2003
From: rjc at trump.net.au (Robert Colquhoun)
Date: Mon Dec 20 16:15:17 2004
Subject: [antlr-interest] One weird, one (hopefully) simple problem
  .. . from a newbie
In-Reply-To: <170826586F3BD511910D0200C110AAA80540214B@memail03.bco-home
 .com>
Message-ID: <4.2.0.58.20030128083716.00fbc300@postoffice.trump.net.au>

Hello Monty,

At 08:41 AM 27/01/2003 -0800, mzukowski@yci.com wrote:
>There are other ways around these ambiguities.  See for instance
>www.codetransform.com/filterexample.html. Also if you are doing an AREV or
>BASIC parser you might be interested in some of the other pages on my site
>that tell how I did an AREV to VB translator.

Yes i also tried to figure out a way to do this in the parser but did not 
quite get as far as you have.  Firstly the technique seemed to produce alot 
of ambiguity warnings which i could have silenced but was worried that i 
might miss something important by doing so.  This was only cosmetic though, 
the main problem  that i just could not solve using the above method was 
with the way comments worked:

1) Comments can begin at start of line, after a label or after a semi colon
2) Semi colons can also be used in argument lists, to shortcut optional params
3) Comments are started by '*' or '!' or 'REM'

I noticed in your solution you removed comments in the lexer, problems come 
from the above rules trying to parse something like:

A = INSERT(B, C ; REM) ; REM A comment

...the first REM is a variable the second REM is the start of a 
comment.  The problem was the lexer didn't know enough to distinguish 
between the 2 cases.  I considered letting comments flow through to the 
parser to solve this but all sorts of junk that wont even lex gets put into 
them.

Similar example with '*' comment char:
A = INSERT(B, C; 1 * 2); 1 * 2

The first '1 * 2' is a straight multiply, the second is a label '1' 
followed by a comment 2.

In the end i was forced into doing the work in the lexer, maintaining 
states, which was ugly but which gave me a relatively clean parser grammer.

PS I just checked the above 2 cases with the current grammer, and they 
don't quite work...need to add something to track bracket depth in the 
lexer aaarrghh!

  - Robert


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From rjc at trump.net.au  Tue Jan 28 04:10:07 2003
From: rjc at trump.net.au (Robert Colquhoun)
Date: Mon Dec 20 16:15:17 2004
Subject: [antlr-interest] One weird, one (hopefully) simple problem
  .. . from a newbie
In-Reply-To: <0EF9DEABA42FE547BAE43D0298F146B23DD3DD@ESP.eca-internation
 al.local>
Message-ID: <4.2.0.58.20030128220609.00375620@postoffice.trump.net.au>

At 02:13 PM 27/01/2003 +0000, Anthony W. Youngman wrote:

>I know all about the nasties in the language ... fortunately not from 
>having met them most of the time. INFOBASIC does not have the REMark 
>keyword - that killed some 80% of our code when we ported to UV :-( It 
>also doesn't have the ' ' operator.

Are you sure? i don't run universe but downloaded their basic manual which 
talks about REM as a comment and the REMainder function, maybe you cannot 
have REM as a valid variable name?  It also talks about the 'format 
expression'(look under FMT function) which i called the ' ' operator.

>I'm unlikely to try implementing most of those nasties ... and I have no 
>intention of rewriting the compiler in C! I've always got gcj for that :-) 
>Which I may well use also for the runtime.

I think my code and antlr runtime can be compiled under gcj, i believe 
people have done this for other antlr based compilers.

>As I say, at the moment I'm just using it as a base to learn Java and 
>Antlr. I think those skills will be worth having, even if I don't get any 
>further...
>
>I want to complete my native filesystem, and my vision was always to push 
>as much development into BASIC as possible. I think I speak for a lot of 
>traditionalists when I say I find MaVerick a bit too modern :-)

and then someone else comes along as tells me they want to write their 
webapp in basic and could i wrap the servlet api so they can throw away 
PHP.....

  - Robert


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From mzukowski at yci.com  Tue Jan 28 07:39:15 2003
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:15:17 2004
Subject: [antlr-interest] Re: Keywords with whitespaces
Message-ID: <170826586F3BD511910D0200C110AAA805402155@memail03.bco-home.com>

So if it doesn't match "begin" "sequence" then it is a parsing error.  When
you build your tree you don't need both tokens, just put your own token type
in there.  Call it BEGIN_SEQUENCE if you like.  It's going to be a lot
easier handling this in the parser than in the lexer.

Monty

-----Original Message-----
From: Gunnar Wagenknecht <kreismeister@yahoo.de>
[mailto:kreismeister@yahoo.de]
Sent: Monday, January 27, 2003 1:46 PM
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] Re: Keywords with whitespaces



--- In antlr-interest@yahoogroups.com, mzukowski@y... wrote:
> Why not handle this in the parser?
> 
> rule: "begin" "sequence" ....;

I'm not sure. ANTLR will add word "begin" _AND_ word "sequence" to 
the table of literals but only the sequence "begin" "sequence" is one 
literal and not both single words.

Cu, Gunnar


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From mzukowski at yci.com  Tue Jan 28 08:10:36 2003
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:15:17 2004
Subject: [antlr-interest] PERL VS ANTLR
Message-ID: <170826586F3BD511910D0200C110AAA805402158@memail03.bco-home.com>

Antlr's grammar is written in antlr.  Antlr's analysis is not written as a
grammar though, it is a complex algorithm (see Ter's thesis) that goes
beyond just walking a tree.

Monty

-----Original Message-----
From: Dvoryansky Leonid [mailto:dvleonid@land.ru]
Sent: Monday, January 27, 2003 2:02 PM
To: antlr-interest@yahoogroups.com
Subject: Re: [antlr-interest] PERL VS ANTLR


> > I was wondering how do Perl and Antlr compare .  Would Antlr be a
> > superset of Perl ?  Or is Perl THE language for text manipulation ?
> > Answers to this question should ignore the learning time .I just want to
> > know if Antlr can do more than Perl even if its a language blah blah
> > ...!!!

The main difference I think is that Perl is imerative language, but ANTLR
is declaretive (disregarding C semantic attributes).
So despite the fact that they have overlapping sets of solving tasks they
implement different ways for that.

By the way is it possible to write ANTLR in ANTLR-grammars? hmm....







 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From mzukowski at yci.com  Tue Jan 28 08:22:41 2003
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:15:17 2004
Subject: [antlr-interest] One weird, one (hopefully) simple problem ..
	 . from a newbie
Message-ID: <170826586F3BD511910D0200C110AAA805402159@memail03.bco-home.com>

I think those two problems could be solved with a filter between the lexer
and parser.  Consider this approach:

buffer a whole line
upon recognizing a newline, work backwards to see if there was a comment at
the end of the line by looking for '*', '!', or "REM".  If you see a ';'
then stop looking for a comment
discard the comment

now do a similar thing for a label following a ';'

What do you think?

Monty

-----Original Message-----
From: Robert Colquhoun [mailto:rjc@trump.net.au]
Sent: Tuesday, January 28, 2003 3:06 AM
To: antlr-interest@yahoogroups.com
Subject: RE: [antlr-interest] One weird, one (hopefully) simple problem
.. . from a newbie


Hello Monty,

At 08:41 AM 27/01/2003 -0800, mzukowski@yci.com wrote:
>There are other ways around these ambiguities.  See for instance
>www.codetransform.com/filterexample.html. Also if you are doing an AREV or
>BASIC parser you might be interested in some of the other pages on my site
>that tell how I did an AREV to VB translator.

Yes i also tried to figure out a way to do this in the parser but did not 
quite get as far as you have.  Firstly the technique seemed to produce alot 
of ambiguity warnings which i could have silenced but was worried that i 
might miss something important by doing so.  This was only cosmetic though, 
the main problem  that i just could not solve using the above method was 
with the way comments worked:

1) Comments can begin at start of line, after a label or after a semi colon
2) Semi colons can also be used in argument lists, to shortcut optional
params
3) Comments are started by '*' or '!' or 'REM'

I noticed in your solution you removed comments in the lexer, problems come 
from the above rules trying to parse something like:

A = INSERT(B, C ; REM) ; REM A comment

...the first REM is a variable the second REM is the start of a 
comment.  The problem was the lexer didn't know enough to distinguish 
between the 2 cases.  I considered letting comments flow through to the 
parser to solve this but all sorts of junk that wont even lex gets put into 
them.

Similar example with '*' comment char:
A = INSERT(B, C; 1 * 2); 1 * 2

The first '1 * 2' is a straight multiply, the second is a label '1' 
followed by a comment 2.

In the end i was forced into doing the work in the lexer, maintaining 
states, which was ugly but which gave me a relatively clean parser grammer.

PS I just checked the above 2 cases with the current grammer, and they 
don't quite work...need to add something to track bracket depth in the 
lexer aaarrghh!

  - Robert


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From mzukowski at yci.com  Tue Jan 28 08:08:51 2003
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:15:17 2004
Subject: [antlr-interest] single line comment
Message-ID: <170826586F3BD511910D0200C110AAA805402157@memail03.bco-home.com>

I believe you can explicitly match EOF in the lexer, I know you can in the
parser....
Try it and see.

Monty

-----Original Message-----
From: William Lam <xeenman@yahoo.com> [mailto:xeenman@yahoo.com]
Sent: Monday, January 27, 2003 6:39 PM
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] single line comment


Hi I am trying to implement a single line comment in my lexer.  I 
looked at the java.g single line comment.  It works great if a 
newline is at the end of the comment, but fails when an EOF is 
encountered, saying 

unexpected char: ?

I browsed through the archives and message 4617 talks about this 
problem.

SL_COMMENT
	:	"//"
		(~('\n'|'\r'))* ('\n'|'\r'('\n')?)
		{$setType(Token.SKIP); newline();}
	;


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From diver7 at mail.ru  Tue Jan 28 09:10:46 2003
From: diver7 at mail.ru (dk0879 <diver7@mail.ru>)
Date: Mon Dec 20 16:15:17 2004
Subject: [antlr-interest] FOR_INIT tree parser implementation
Message-ID: <b16dim+i725@eGroups.com>

  Help me please, in my trouble. I implement interpreter
  of JavaScript and I don't understand how to
  write FOR_INIT production of "for" statement correctly.

  I simplify java.tree.g for my tasks, but it doesn't work:

--- java.tree.g ---

stat:   typeDefinition
    |   variableDef
    ...
    |   #("for"
            #(FOR_INIT   (variableDef | elist)? ) // <- QUESTION?!
            #(FOR_CONDITION (expression)? )  
            #(FOR_ITERATOR  (elist)? )
            stat
    ...
---

    #(FOR_INIT (variableDef | elist)? )

    "FOR_INIT" rule works fine to process code like this:

    for (var i = 0; i < 10; ++i)
    {  
      invoke_something();
    }  

    but doesn't work with code below:

    for (var i = 0, j = 10; i < 10; ++i, --j)
    {  
      invoke_something(j);
    }  

    Described "FOR_INIT" rule doesn't handle
    second (and next) variable declarations (and
    initializations)

    How correctly write this rule?

    stupid example of needed semantic are:
    #(FOR_INIT ((variableDef)* | (elist)? | EMPTY_STATEMENT) )


    Thank you.


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From philippe.lavoie at cactus.ca  Tue Jan 28 09:23:30 2003
From: philippe.lavoie at cactus.ca (Philippe Lavoie)
Date: Mon Dec 20 16:15:17 2004
Subject: [antlr-interest] Help with simple parser?
Message-ID: <5F668484EA248D41A93034997332B6D6089DDD@exchange3.cactus.ca>

I tried to solve your problem as a way to learn antlr myself. Here is
what I came up with. Perhaps someone with more experience can show me
why my solution is not good (tm).

expr
    : sumExpr 
    | LPAREN! sumExpr RPAREN!
    | ifExp;
sumExpr  : prodExpr ((PLUS^|MINUS^) prodExpr)* ;
prodExpr : minMaxExpr ((MUL^|DIV^|MOD^) minMaxExpr)* ;
minMaxExpr:	((MIN^|MAX^) LPAREN! minMaxExpr COMMA! minMaxExpr
RPAREN!);
ifExp    : (IF^ LPAREN! ifExp COMMA! atom COMMA! atom RPAREN!);
atom     : INT | STAT | expr;

Basically, I removed the "|" part for both your minMaxExpr and ifExp. I
then explicitly stated what an expr can be.

I also found it boring that I can't do 2+3 and have to write (2+3) from
the example grammar. I'm not even sure my fix above works :) 

Let me know please.

Phil

-----Original Message-----
From: Chris Bergstresser [mailto:chris@subtlety.com] 
Sent: Saturday, January 25, 2003 11:37 PM
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] Help with simple parser?

Hi all --

   I've got a very simple grammar, but I keep getting recursion errors.
I
don't know enough to fix it.  My rules look like:

expr     : LPAREN! sumExpr RPAREN! ;
sumExpr  : prodExpr ((PLUS^|MINUS^) prodExpr)* ;
prodExpr : minMaxExpr ((MUL^|DIV^|MOD^) minMaxExpr)* ;
minMaxExpr:	((MIN^|MAX^) LPAREN! minMaxExpr COMMA! minMaxExpr
RPAREN!) |
ifExp;
ifExp    : (IF^ LPAREN! ifExp COMMA! atom COMMA! atom RPAREN!) | atom;
atom     : INT | STAT | expr;

   ...but I don't want the parentheses around expr to be mandatory.  I'd
also like to enforce the same number of opening as closing parentheses.
As
it stands now equations like "(if(1, 2+3, 4))" won't parse, because the
"2+3" need wrapping parenthesis.  Obviously, I'd like "if(1, 2+3, 4)" to
be
valid, as well.  I've wandered -- rather uselessly -- through most of
the
examples.  Could someone help?

-- Chris


 

Your use of Yahoo! Groups is subject to
http://docs.yahoo.com/info/terms/ 



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From johnm-antlr at non.net  Tue Jan 28 09:23:10 2003
From: johnm-antlr at non.net (John D. Mitchell)
Date: Mon Dec 20 16:15:17 2004
Subject: [antlr-interest] One weird, one (hopefully) simple problem ..
	 . from a newbie
In-Reply-To: <170826586F3BD511910D0200C110AAA805402159@memail03.bco-home.com>
References: <170826586F3BD511910D0200C110AAA805402159@memail03.bco-home.com>
Message-ID: <15926.48254.633930.73376@non.non.net>

>>>>> "mzukowski" == mzukowski  <mzukowski@yci.com> writes:
[...]
> If you see a ';' then stop looking for a comment discard the comment

Um, er, can't comments contain ";"?

Take care,
	John

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From mzukowski at yci.com  Tue Jan 28 09:50:52 2003
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:15:17 2004
Subject: [antlr-interest] One weird, one (hopefully) simple problem ..
	 . from a newbie
Message-ID: <170826586F3BD511910D0200C110AAA80540215B@memail03.bco-home.com>

Good question.  If so then it makes the whole problem much harder.  

Monty

-----Original Message-----
From: John D. Mitchell [mailto:johnm-antlr@non.net]
Sent: Tuesday, January 28, 2003 9:23 AM
To: antlr-interest@yahoogroups.com
Subject: RE: [antlr-interest] One weird, one (hopefully) simple problem
.. . from a newbie


>>>>> "mzukowski" == mzukowski  <mzukowski@yci.com> writes:
[...]
> If you see a ';' then stop looking for a comment discard the comment

Um, er, can't comments contain ";"?

Take care,
	John

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From cintyram at yahoo.com  Tue Jan 28 10:14:22 2003
From: cintyram at yahoo.com (cintyram <cintyram@yahoo.com>)
Date: Mon Dec 20 16:15:17 2004
Subject: [antlr-interest] Re: One weird, one (hopefully) simple problem .. . from a newbie
In-Reply-To: <170826586F3BD511910D0200C110AAA80540215B@memail03.bco-home.com>
Message-ID: <b16h9u+c81o@eGroups.com>

hi,
 i could not understand the problem to my satisfactin .. but from
whatever i understood , i was dealing with a similar problem ..
in my case , # is the SLcomment char, and can appear inside a string
constant in the statement part too!!

so first i loopout all the # s inside strings if any in teh statement
part,
then i look for the first # after the end of valid statement ;
and copy the rest into another temp buffer ;

it has many interesting cases , like there can be string constants in
the comment with comments within them :) ;

from  the rist mail in this thread ,
 since there seem to be too many overlaps , it is ideal to build
auxillary structures which encode the context appropriately ;
then it will be easier to handle these situations ;
like multiple uses for REM , ;  , ! etc ..

to isolate the comment part of the statement, non context dependent
method like i used might not be suitable; 
instead it is better to have a context [ data structure] and keep
updating it as the parse progresses ;
from that it should be easy to identify the statement part,
the rest of the line can be ignored as comment;


also , some improvements are possible, ie first do it the faster
,"direct" way but if it is ambiguous, revert to the context based method ;

Looks like a lot of work, i wouldnt have done it as a first time exercise;

cheers
ram


--- In antlr-interest@yahoogroups.com, mzukowski@y... wrote:
> Good question.  If so then it makes the whole problem much harder.  
> 
> Monty
> 
> -----Original Message-----
> From: John D. Mitchell [mailto:johnm-antlr@n...]
> Sent: Tuesday, January 28, 2003 9:23 AM
> To: antlr-interest@yahoogroups.com
> Subject: RE: [antlr-interest] One weird, one (hopefully) simple problem
> .. . from a newbie
> 
> 
> >>>>> "mzukowski" == mzukowski  <mzukowski@y...> writes:
> [...]
> > If you see a ';' then stop looking for a comment discard the comment
> 
> Um, er, can't comments contain ";"?
> 
> Take care,
> 	John
> 
>  
> 
> Your use of Yahoo! Groups is subject to
http://docs.yahoo.com/info/terms/


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From medha at rocketmail.com  Tue Jan 28 10:23:44 2003
From: medha at rocketmail.com (medha.rm <medha@rocketmail.com>)
Date: Mon Dec 20 16:15:17 2004
Subject: [antlr-interest] Resolved: Help: writing your own scanner with antlr
In-Reply-To: <170826586F3BD511910D0200C110AAA805402150@memail03.bco-home.com>
Message-ID: <b16hrg+b915@eGroups.com>

Hello everyone:

To support your own scanner, you need to extend Token class with your 
own token and implement getText() and setText() there. The rest of 
interfacing is pretty straightforward. 

Monty, Thanks for the pointer to the code!

Medha


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From xeenman at yahoo.com  Tue Jan 28 11:54:07 2003
From: xeenman at yahoo.com (William Lam <xeenman@yahoo.com>)
Date: Mon Dec 20 16:15:17 2004
Subject: [antlr-interest] Re: single line comment
In-Reply-To: <170826586F3BD511910D0200C110AAA805402157@memail03.bco-home.com>
Message-ID: <b16n4v+9rcn@eGroups.com>

antlr complains about not finding the EOF rule.

adding a final ? at the end seems to take care of things

SL_COMMENT
        :       "//"
                (~('\n'|'\r'))* ('\n'|'\r'('\n')?)?
                {$setType(Token.SKIP); newline();}
        ;


--- In antlr-interest@yahoogroups.com, mzukowski@y... wrote:
> I believe you can explicitly match EOF in the lexer, I know you can 
in the
> parser....
> Try it and see.
> 
> Monty
> 
> -----Original Message-----
> From: William Lam <xeenman@y...> [mailto:xeenman@y...]
> Sent: Monday, January 27, 2003 6:39 PM
> To: antlr-interest@yahoogroups.com
> Subject: [antlr-interest] single line comment
> 
> 
> Hi I am trying to implement a single line comment in my lexer.  I 
> looked at the java.g single line comment.  It works great if a 
> newline is at the end of the comment, but fails when an EOF is 
> encountered, saying 
> 
> unexpected char: ?
> 
> I browsed through the archives and message 4617 talks about this 
> problem.
> 
> SL_COMMENT
> 	:	"//"
> 		(~('\n'|'\r'))* ('\n'|'\r'('\n')?)
> 		{$setType(Token.SKIP); newline();}
> 	;
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to 
http://docs.yahoo.com/info/terms/


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From mzukowski at yci.com  Tue Jan 28 11:58:26 2003
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:15:17 2004
Subject: [antlr-interest] Re: single line comment
Message-ID: <170826586F3BD511910D0200C110AAA80540215E@memail03.bco-home.com>

I can't think of a situation that would break that, let us know if you ever
find a problem with it.

Monty

-----Original Message-----
From: William Lam <xeenman@yahoo.com> [mailto:xeenman@yahoo.com]
Sent: Tuesday, January 28, 2003 11:54 AM
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] Re: single line comment


antlr complains about not finding the EOF rule.

adding a final ? at the end seems to take care of things

SL_COMMENT
        :       "//"
                (~('\n'|'\r'))* ('\n'|'\r'('\n')?)?
                {$setType(Token.SKIP); newline();}
        ;


--- In antlr-interest@yahoogroups.com, mzukowski@y... wrote:
> I believe you can explicitly match EOF in the lexer, I know you can 
in the
> parser....
> Try it and see.
> 
> Monty
> 
> -----Original Message-----
> From: William Lam <xeenman@y...> [mailto:xeenman@y...]
> Sent: Monday, January 27, 2003 6:39 PM
> To: antlr-interest@yahoogroups.com
> Subject: [antlr-interest] single line comment
> 
> 
> Hi I am trying to implement a single line comment in my lexer.  I 
> looked at the java.g single line comment.  It works great if a 
> newline is at the end of the comment, but fails when an EOF is 
> encountered, saying 
> 
> unexpected char: ?
> 
> I browsed through the archives and message 4617 talks about this 
> problem.
> 
> SL_COMMENT
> 	:	"//"
> 		(~('\n'|'\r'))* ('\n'|'\r'('\n')?)
> 		{$setType(Token.SKIP); newline();}
> 	;
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to 
http://docs.yahoo.com/info/terms/


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From philippe.lavoie at cactus.ca  Tue Jan 28 12:09:55 2003
From: philippe.lavoie at cactus.ca (Philippe Lavoie)
Date: Mon Dec 20 16:15:17 2004
Subject: [antlr-interest] C++ generation doesn't work :(  (Or I'm lost)
Message-ID: <5F668484EA248D41A93034997332B6D6054678@exchange3.cactus.ca>


I'm using the following grammar. When I try to run it, it crash and
burns. My test program is simply

#k1 = disk(10);

Please help

Phil

PS I posted regarding this project earlier, I decided to add actions to
my grammars and nothing is working :(   Not that the grammar is complete
anyway... :)

The grammar follows and I'm including the main.cpp file too

======================================
options {
    language="Cpp";
}

{
#include <string>
#include <iostream>
}
class MorphyParser extends Parser;
options {
    buildAST=true;
}

program: (statement)* EOF!;

statement
    : kernelStatement SEMI!
    | assignment SEMI!
    ;

kernelStatement
    : kernelOperation
    | LPAREN! kernelOperation RPAREN!
    ;
    
assignment
    : KERNELIDENT EQUAL^ kernel;

kernelOperation
    : DISK^ LPAREN! INT RPAREN!
    ;

kernel
    : KERNELIDENT | kernelStatement;

{
#include <string>
}
class MorphyLexer extends Lexer;

options {
    exportVocab=Morphy;
    testLiterals=false;
    k=4;
}

tokens {
    DISK="disk";
}


WS	:	(	' '
		|	'\t'
		|	'\f'
			// handle newlines
		|	(	options {generateAmbigWarnings=false;}
			:	"\r\n"  // Evil DOS
			|	'\r'    // Macintosh
			|	'\n'    // Unix (the right way)
			)
			{ newline(); }
		)+
		{ $setType(ANTLR_USE_NAMESPACE(antlr)Token::SKIP); }
	;

IDENT
	options {testLiterals=true;}
	:	('a'..'z'|'A'..'Z'|'_'|'$')
('a'..'z'|'A'..'Z'|'_'|'0'..'9'|'$')*
	;

KERNELIDENT
    : '#' IDENT
    ;


SEMI: ";";
LPAREN: "(" ;
RPAREN: ")" ;
protected DIGIT: '0'..'9';

INT: (DIGIT)+;

{
#include <string>
#include <iostream>
}
class MorphyTreeParser extends TreeParser;


options {
	importVocab = Morphy;
}

kernelOperation 
    :
    #(DISK a:INT) { std::cerr << "disk of size " << a << std::endl; }
    ;



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

-------------- next part --------------
A non-text attachment was scrubbed...
Name: morphy.cpp
Type: application/octet-stream
Size: 1009 bytes
Desc: morphy.cpp
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20030128/5f77dd15/morphy.obj
From klaren at cs.utwente.nl  Tue Jan 28 12:19:06 2003
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:15:18 2004
Subject: [antlr-interest] C++ generation doesn't work :(  (Or I'm lost)
In-Reply-To: <5F668484EA248D41A93034997332B6D6054678@exchange3.cactus.ca>; from philippe.lavoie@cactus.ca on Tue, Jan 28, 2003 at 03:09:55PM -0500
References: <5F668484EA248D41A93034997332B6D6054678@exchange3.cactus.ca>
Message-ID: <20030128211906.B3587@cs.utwente.nl>

Hi,

On Tue, Jan 28, 2003 at 03:09:55PM -0500, Philippe Lavoie wrote:
> I'm using the following grammar. When I try to run it, it crash and
> burns. My test program is simply

Where did it crash? Do you have a stacktrace? What was the color of the
smoke?

Cheers,

Ric

PS try also catching an ANTLRException from the run. That would show any 
antlr exceptions breaking out of the parsers and stuff.
-- 
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- klaren@cs.utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
 'And this 'rebooting' business? Give it a good kicking, do you?' 'Oh, no,
  of course, we ... that is ... well, yes, in fact,' said Ponder. 'Adrian
    goes round the back and ... er ... prods it with his foot. But in a
     technical way,' he added. --- From: Hogfather by Terry Pratchett.

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From philippe.lavoie at cactus.ca  Tue Jan 28 12:48:48 2003
From: philippe.lavoie at cactus.ca (Philippe Lavoie)
Date: Mon Dec 20 16:15:18 2004
Subject: [antlr-interest] Trying to modify the getting started field guide to C++
Message-ID: <5F668484EA248D41A93034997332B6D6054679@exchange3.cactus.ca>


The following grammar file generates this error

E:\projects\morphy>java antlr.Tool basic.g
ANTLR Parser Generator   Version 2.7.2   1989-2003 jGuru.com
basic.g:12:5: expecting ASSIGN_RHS, found ':n:NAME
        { std::cerr << "Hi there, " << n.getText() << std::endl;}
    ;'
basic.g:3:1: rule grammar trapped:
basic.g:3:1: expecting SEMI, found '}'
Exiting due to errors.


Any idea why going from Java to C++ causes this error?

Thanks

Phil

options {
    language = "CPP"
}

{
#include <iostream>
#include <string>
}
class P extends Parser;

startRule
    :   n:NAME
        { std::cerr << "Hi there, " << n.getText() << std::endl; }
    ;

class L extends Lexer;

// one-or-more letters followed by a newline
NAME:   ( 'a'..'z'|'A'..'Z' )+ NEWLINE
    ;

NEWLINE
    :   '\r' '\n'   // DOS
    |   '\n'        // UNIX
    ;

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From mzukowski at yci.com  Tue Jan 28 16:34:04 2003
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:15:18 2004
Subject: [antlr-interest] project 0 for the USF language class
Message-ID: <170826586F3BD511910D0200C110AAA80540216D@memail03.bco-home.com>

Hey,
	I'm off to Hawaii!  Be back Feb 18th.  Have fun with your class.

Monty

-----Original Message-----
From: Terence Parr [mailto:parrt@jguru.com]
Sent: Sunday, January 26, 2003 3:15 PM
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] project 0 for the USF language class


Folks,

Anybody have any suggestions for this project before I give it to the  
students tomorrow (first day of class)?

http://www.cs.usfca.edu/~parrt/course/652/projects-Spring-2003/xml- 
byhand.html

My goal is to provide concrete examples of many of the concepts to be  
taught in the class.  Easier to think of the abstract stuff later if  
you have a real example in your head.

Ter
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org
Lecturer in Comp. Sci., University of San Francisco


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From hushlee83 at yahoo.com.sg  Tue Jan 28 16:35:30 2003
From: hushlee83 at yahoo.com.sg (=?iso-8859-1?q?Sharon=20Li?=)
Date: Mon Dec 20 16:15:18 2004
Subject: [antlr-interest] Help with Antlr
Message-ID: <20030129003530.7345.qmail@web40910.mail.yahoo.com>


Hi I seem to be running into problems with Antlr, so could some kind souls out there pls help. 

My program needs to read a file that looks something like that :

/*--------Begining of file ----------------------------------*/

#define DURATION 100
#define MAX_INT_LEN 10
#define MAX_P_LEN 2
Lsystem: 0 
/* number of steps in the simulation */
derivation length: 100
/* starting string or axiom */
/* I is an internode with parameter age,
 * L is a leaf, 
 * B is a blossom,
 * P is a petal with parameter age
 */
Axiom: I(1)[L]/(180)[L]I(1)I(1)I(1)B
I(age)-->I(age+1)
P(age)-->P(age+1)
R(ang)-->R(ang+3)
Decomposition
B --> R(1);(3)@o(1.5);(1)[P(1)]+(72)[P(1)]+(72)[P(1)]+(72)[P(1)]+(72)[P(1)]
Homomorphism
I(age)-->;(2)F(MAX_INT_LEN*func(1,age/DURATION))
L --> +(60);(4)F(1){.g(1)[-(90)g(1).][g(2).][+(90)g(1).]}
P(age) --> {.g(1)[-(90)g(1).][g(MAX_P_LEN*func(2,age/DURATION)).][+(90)g(1).]} 
R(ang)--> +(ang)
/* Label for end of L-system */
endlsystem

/*----------- ENd of file -------------------------------------*/

"#define DURATION 100" declares a variable identifier DURATION and assigns a literal 100 to it. This value will be stored and substituted into:

P(age) --> {.g(1)[-(90)g(1).][g(MAX_P_LEN*func(2,age/DURATION)).][+(90)g(1).]} 

The program should return me the substituted string. 

My codes are as follow:

class LfileParser extends Parser;

options { k=2; }
{
 LsystemFile file = new LsystemFile();
 
 public LsystemFile getLsystemFile(){
  return file;
 }
}

declaration
 : ((HEX)+ "define" (id:IDENT) (id2:IDENT))
  { 
   String attr = id.getText();
   String value = id2.getText();
   System.out.println("#define "+attr+" "+value); 
   file.declare(attr, value);
  } 
  ;

derivationLength
 : "derivation length" COLON (d : DIGIT)*
 { System.out.println("derivation length : "+d); } ;

lSystem
 : "LSystem" COLON (d : DIGIT)*
 ;

expr: IDENT
  | LPAREN expr RPAREN
  | LBRACK expr RBRACK
  | LCURLY expr RCURLY
  ;

axiom : "Axiom" "-->" (expr)
   ;
   
assign : expr "-->" (expr);

file   : ( line (NEWLINE line)*(NEWLINE)? EOF)
       {System.out.println("file matched");}
       ;

line   : ((record)+ )
       ;
    
record : (declaration)* (lSystem) (derivationLength) (axiom) (assign)* "Decomposition" (assign)* "Homomorphism" (assign)* "endlsystem"
    ;     

/********************************************* Lexer class *************************************************************************************/

class LfileLexer extends Lexer;

options{charVocabulary='\3'..'\377';}
      
protected LETTER : ( 'a'..'z' | 'A'..'Z' )+; 
protected DIGIT : ('0'..'9')+ ;
protected SYMBOL : ('.'|','|';'|'_') ;

IDENT : (LETTER | DIGIT | SYMBOL);

LPAREN   : '('  ;
RPAREN   : ')'  ;
LBRACK   : '['  ;
RBRACK   : ']'  ;
LCURLY   : '{'  ;
RCURLY   : '}'  ;
HEX     : '#'  ;
COLON    : ':'  ;

COMMENT : "/*" (options {greedy=false;} :.)* "*/" ;

NEWLINE : ('\r''\n')=> '\r''\n' //DOS
        | '\r'                  //MAC
        | '\n'                  //UNIX
        { newline(); }
        ;
    
WS      : (' '|'\t') { $setType(Token.SKIP); } ;

I'm actually pretty lost and help is very much appreciated. 
P.S thanks to those who have helped me with it.

 Yahoo! Travel
- Valentine surprise deals. Book now!
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20030129/7d724551/attachment.html
From hushlee83 at yahoo.com.sg  Tue Jan 28 21:09:29 2003
From: hushlee83 at yahoo.com.sg (=?iso-8859-1?q?Sharon=20Li?=)
Date: Mon Dec 20 16:15:18 2004
Subject: [antlr-interest] Differentiating keywords in parser and identifiers in lexers
Message-ID: <20030129050929.32959.qmail@web40903.mail.yahoo.com>


hi,

how do I prevent Antlr from recognising keywords to be identifiers? I can't think of a way in which i can specify which words can be identifiers and which should not. I have looked at previous messages but it still doesn't register. Perhaps someone can provide an example. 

Thanks in advance


 Yahoo! Travel
- Valentine surprise deals. Book now!
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20030129/889f0446/attachment.html
From brian-l-smith at uiowa.edu  Tue Jan 28 21:12:58 2003
From: brian-l-smith at uiowa.edu (Brian Smith)
Date: Mon Dec 20 16:15:18 2004
Subject: [antlr-interest] Re: PERL VS ANTLR
In-Reply-To: <20030127225933.93171.qmail@web10401.mail.yahoo.com>
References: <20030127225933.93171.qmail@web10401.mail.yahoo.com>
Message-ID: <3E3762DA.20300@uiowa.edu>

ANTLR doesn't support really support just any context free grammars. It 
handles predicated LL(k) grammars. Because of the LL(k), it cannot 
handle all context free grammars. Yet, because of the predicates, it can 
handle some grammars that are not context free, given the proper 
predicates. [Hmm, I wonder, if there is a mechanical transformation of 
LR(k) or GLR grammars to predicated LL(k) grammars?]

Also, Perl doesn't just handle regular grammars because Perl's "regular 
expressions" are really not "regular;" they are much more powerful. It 
is my understanding that in Perl 6, there is even a way to write Perl 
"regular expressions" in an EBNF style that is similar to the style used 
in parser-generator systems like ANTLR and YACC. I believe that Perl 
also has something analogous to ANTLR's predicates. I would be very 
interested to read a paper that attempts to define the class of grammars 
that Perl's "regular expressions" can handle.

Personally, I wouldn't use Perl for any situation for which the input is 
likely to contain syntax errors that I would be required to report on 
(e.g. a compiler). I would generally use Perl for cases where I could 
assume that the input is well-formed, and/or situations where I can 
ignore and easily recover from syntax errors (e.g. log files). But, 
maybe that just evidence of my lack of experience with Perl.

- Brian

sudip mitra wrote:
> wow ...!!! some explanation ... you think very clearly !!!
> 
>  */"cintyram <cintyram@yahoo.com>" <cintyram@yahoo.com>/* wrote:
> 
>     well , in principle, antlr supports context free , which is a super
>     set of regular ;
>     but perl is a programming languge and helps you in doing specific
>     tasks which might be part of your solution, like making it easy to
>     read a file, etc .. also the pattern matching and other r.e functions
>     are very powerful and sufficient for most common tasks; for eg: if all
>     you have to do is read links out of a file, or simply search and
>     replace a specific patter with a specific other .. then perl might be
>     easier to use;
> 
>     on the other hand, if you try writing a system like monty's gcc
>     framework etc. in PERL you will find that it is easier to think and
>     specify in ebnf ;
>     so the comparison is actually case by case , and one should not
>     generalize ;
> 
> 
>     also with antlr, you generate code to do something, but with perl you
>     actually formulate the whole solution! and code it!!
> 
>     so your question for the most part wants to compare apples and oranges.
>     /e
>     cheers
>     ram
> 
> 
> 
>     --- In antlr-interest@yahoogroups.com, "John D. Mitchell"
>     wrote:
>      > Sounds like a troll but what the heck... :-)
>      >
>      > >>>>> "sudip" == sudip mitra writes:
>      > [...]
>      >
>      > > I was wondering how do Perl and Antlr compare . Would Antlr be a
>      > > superset of Perl ? Or is Perl THE language for text manipulation ?
>      > > Answers to this question should ignore the learning time .I just
>     want to
>      > > know if Antlr can do more than Perl even if its a language blah
>     blah
>      > > ...!!!
>      >
>      > (A) Perl is a general purpose programming language.
>      >
>      > (B) Perl programs for translation work tend very strongly to be
>     based on
>      > ad hoc, simplistic (though often ridiculously complex) use of regular
>      > expressions.
>     ! >
>      > (C) ANTLR is a grammar-based lexer/parser/walker generator.
>      >
>      > Go wild,
>      > John
> 
> 
> 
> 
>     Your use of Yahoo! Groups is subject to
>     http://docs.yahoo.com/info/terms/
> 
> 
> ------------------------------------------------------------------------
> Do you Yahoo!?
> Yahoo! Mail Plus 
> <http://rd.yahoo.com/mail/mailsig/*http://mailplus.yahoo.com> - 
> Powerful. Affordable. Sign up now 
> <http://rd.yahoo.com/mail/mailsig/*http://mailplus.yahoo.com>
> Your use of Yahoo! Groups is subject to the Yahoo! Terms of Service 
> <http://docs.yahoo.com/info/terms/>.


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From rjc at trump.net.au  Tue Jan 28 22:48:16 2003
From: rjc at trump.net.au (Robert Colquhoun)
Date: Mon Dec 20 16:15:18 2004
Subject: [antlr-interest] One weird, one (hopefully) simple problem
  .. . from a newbie
In-Reply-To: <170826586F3BD511910D0200C110AAA805402159@memail03.bco-home
 .com>
Message-ID: <4.2.0.58.20030129173250.00b16810@postoffice.trump.net.au>

Hello,

At 08:22 AM 28/01/2003 -0800, mzukowski@yci.com wrote:
>I think those two problems could be solved with a filter between the lexer
>and parser.  Consider this approach:
>
>buffer a whole line
>upon recognizing a newline, work backwards to see if there was a comment at
>the end of the line by looking for '*', '!', or "REM".  If you see a ';'
>then stop looking for a comment
>discard the comment
>
>now do a similar thing for a label following a ';'
>
>What do you think?

The problem is that half the time the lexer chokes on the comments before 
they can reach the parser or intermediate filter.

For example the '?' character is not used in the basic grammer anywhere but 
is perfectly legal in the comments.  Upon trying to lex the comments as if 
it was a basic program you end with an exception ie: unexpected char: '?'

Obviously you could add a lexer rule in to handle that particular 
character, but if say the basic program is written in a foreign language 
pretty much any unicode character could be in there.

Would need some sort of catch all lexer rule which would match on 
everything else except what's defined in the other rules.

  - Robert



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From ttsoris at yahoo.com  Wed Jan 29 01:47:00 2003
From: ttsoris at yahoo.com (ttsoris <ttsoris@yahoo.com>)
Date: Mon Dec 20 16:15:18 2004
Subject: [antlr-interest] A "lexicon" for ANTLR
Message-ID: <b187uk+81pm@eGroups.com>

Hi,
I was wondering if it is possible to create a parser with ANTLR 
to parse simple english sentences. The problem that I am thinking of
is the amount of recognized words. If I create rules like:
NOUN_SIN : "ant" | "cat" | "mouse" .... ;
NOUN_PLU : "ants" | "cats" | "mice" .... ;
with thousands of alternatives for nouns and some more for verbs and 
other parts of speech, it will produce enormous source files
and an enormous executable (and probably completely inefficient).
Is there a way of specifing an external "lexicon" for the lexemes 
(words), that is more efficient? Or is there another way I haven't 
think of?

Thank you,
Theofilos


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From open.zone at virgin.net  Wed Jan 29 01:58:14 2003
From: open.zone at virgin.net (micheal_jor <open.zone@virgin.net>)
Date: Mon Dec 20 16:15:18 2004
Subject: [antlr-interest] Re: Differentiating keywords in parser and identifiers in lexers
In-Reply-To: <20030129050929.32959.qmail@web40903.mail.yahoo.com>
Message-ID: <b188jm+nr1a@eGroups.com>

--- In antlr-interest@yahoogroups.com, Sharon Li <hushlee83@y...> 
wrote:
> 
> hi,
> 
> how do I prevent Antlr from recognising keywords to be identifiers? 
I can't think of a way in which i can specify which words can be 
identifiers and which should not.

Have you actually tried the advice from my previous reply about the 
using the "tokens {...}" section in your grammar?

http://www.antlr.org/doc/metalang.html#TokensSection

> I have looked at previous messages but it still doesn't register. 
Perhaps someone can provide an example. 

The link above has one that shows "void" and "int" as "keywords" and 
not identifiers.

Micheal



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From gudnabrsam at yahoo.com  Wed Jan 29 06:44:06 2003
From: gudnabrsam at yahoo.com (Matt Benson)
Date: Mon Dec 20 16:15:18 2004
Subject: [antlr-interest] A "lexicon" for ANTLR
In-Reply-To: <b187uk+81pm@eGroups.com>
Message-ID: <20030129144406.51880.qmail@web20413.mail.yahoo.com>

Disclaimer:
  I have an extremely limited understanding of Antlr
myself, and haunt this list in an attempt to slowly
absorb related knowledge by constant bombardment.  
Also I am really looking forward to Ter's notes from
the class he's about to teach, but ANYWAY...

It occurs to me that it might be possible to write
your grammar almost as you present it here, with only
a few "sample" nouns/verbs/other parts of speech, then
modify the generated parser code to go match against a
database or something instead.  The experts will have
to say whether this approach is at all sensible.

Also, there is a Java natural-language processing
project called Grok on Sourceforge.  Again, I know
very little about it, but it might be worth checking
out as well.

-Matt

--- "ttsoris <ttsoris@yahoo.com>" <ttsoris@yahoo.com>
wrote:
> Hi,
> I was wondering if it is possible to create a parser
> with ANTLR 
> to parse simple english sentences. The problem that
> I am thinking of
> is the amount of recognized words. If I create rules
> like:
> NOUN_SIN : "ant" | "cat" | "mouse" .... ;
> NOUN_PLU : "ants" | "cats" | "mice" .... ;
> with thousands of alternatives for nouns and some
> more for verbs and 
> other parts of speech, it will produce enormous
> source files
> and an enormous executable (and probably completely
> inefficient).
> Is there a way of specifing an external "lexicon"
> for the lexemes 
> (words), that is more efficient? Or is there another
> way I haven't 
> think of?
> 
> Thank you,
> Theofilos
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to
> http://docs.yahoo.com/info/terms/ 
> 
> 


__________________________________________________
Do you Yahoo!?
Yahoo! Mail Plus - Powerful. Affordable. Sign up now.
http://mailplus.yahoo.com

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From klaren at cs.utwente.nl  Wed Jan 29 08:11:30 2003
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:15:18 2004
Subject: [antlr-interest] Help with Antlr
In-Reply-To: <20030129003530.7345.qmail@web40910.mail.yahoo.com>; from hushlee83@yahoo.com.sg on Wed, Jan 29, 2003 at 08:35:30AM +0800
References: <20030129003530.7345.qmail@web40910.mail.yahoo.com>
Message-ID: <20030129171130.D3587@cs.utwente.nl>

Hi,

On Wed, Jan 29, 2003 at 08:35:30AM +0800, Sharon Li wrote:
> Hi I seem to be running into problems with Antlr, so could some kind souls
> out there pls help. 
> 
> My program needs to read a file that looks something like that :
> 
> /*--------Begining of file ----------------------------------*/
> 
> #define DURATION 100
> #define MAX_INT_LEN 10
> #define MAX_P_LEN 2
> Lsystem: 0 
> /* number of steps in the simulation */
> derivation length: 100
> /* starting string or axiom */
> /* I is an internode with parameter age,
>  * L is a leaf, 
>  * B is a blossom,
>  * P is a petal with parameter age
>  */
> Axiom: I(1)[L]/(180)[L]I(1)I(1)I(1)B
> I(age)-->I(age+1)
> P(age)-->P(age+1)
> R(ang)-->R(ang+3)
> Decomposition
> B --> R(1);(3)@o(1.5);(1)[P(1)]+(72)[P(1)]+(72)[P(1)]+(72)[P(1)]+(72)[P(1)]
> Homomorphism
> I(age)-->;(2)F(MAX_INT_LEN*func(1,age/DURATION))
> L --> +(60);(4)F(1){.g(1)[-(90)g(1).][g(2).][+(90)g(1).]}
> P(age) --> {.g(1)[-(90)g(1).][g(MAX_P_LEN*func(2,age/DURATION)).][+(90)g(1).]} 
> R(ang)--> +(ang)
> /* Label for end of L-system */
> endlsystem
> 
> /*----------- ENd of file -------------------------------------*/
> 
> "#define DURATION 100" declares a variable identifier DURATION and assigns a literal 100 to it. This value will be stored and substituted into:
> 
> P(age) --> {.g(1)[-(90)g(1).][g(MAX_P_LEN*func(2,age/DURATION)).][+(90)g(1).]} 
> 
> The program should return me the substituted string. 

So you basically want your program to return the file with all the
#define's replaced? If so then you might be better off using the C
preprocessor (usually called cpp on unix systems, binaries for windows
should be available from lotsof places look for cygwin or mingw binaries)

If you want (have?) to do this with antlr you have two options. Ask
yourself do you need to know the structure of the whole thing. If not you
can write a filtering lexer that only replaces the keywords. E.g. you make
a rule that recognizes the #define x y lines stores keys and values in a
hashtable (think there was some java container for it) and have one rule
that recognizes identifiers and checks in the hashtable for known values
and replaces them in the output when encountered. You would have to modify
the example here: http://www.antlr.org/doc/lexer.html#ANTLR_Masquerading_as_SED
a bit for that.

If you do need to know the structure your current approach is better. But
what structure do you exactly need? Do you need a parse tree to transform
lateron? Do you only need some of the expressions with replacements?

Atm I don't have much time to look at bigger things, and I didn't quite
follow the previous threads. But a few tips in debugging things:

Use the -traceLexer, -traceParser options to antlr to turn on tracing in
the generated lexer/parsers so you can see where things go wrong. Easiest
is maybe to start with checking if your lexer does what it has to do. E.g.
make a testfile that just repeatedly calls nextToken and see if all tokens
come out as expected (see for instance the examples/java/filterWithRule
example for an example main.java) After you know the lexer works ok, then
you start looking at the parser with -traceParser turned on.

HTH,

Ric
-- 
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- klaren@cs.utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
  Wo das Chaos auf die Ordnung trifft, gewinnt meist das Chaos, weil es
  besser organisiert ist. --- Friedrich Nietzsche


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From parrt at jguru.com  Wed Jan 29 10:51:50 2003
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:15:18 2004
Subject: [antlr-interest] A "lexicon" for ANTLR
In-Reply-To: <b187uk+81pm@eGroups.com>
Message-ID: <B9EDD077-33BA-11D7-A114-000393BB647E@jguru.com>


On Wednesday, January 29, 2003, at 01:47 AM, ttsoris 
<ttsoris@yahoo.com> wrote:

> Hi,
> I was wondering if it is possible to create a parser with ANTLR
> to parse simple english sentences.

Sure...i've done it for a simple adventure-game like interface.  Simple.


>  The problem that I am thinking of
> is the amount of recognized words. If I create rules like:
> NOUN_SIN : "ant" | "cat" | "mouse" .... ;
> NOUN_PLU : "ants" | "cats" | "mice" .... ;
> with thousands of alternatives for nouns and some more for verbs and

except this part...

> other parts of speech, it will produce enormous source files
> and an enormous executable (and probably completely inefficient).
> Is there a way of specifing an external "lexicon" for the lexemes
> (words), that is more efficient? Or is there another way I haven't
> think of?

You have to create a data base that has the verbs then nouns etc...  
You must load that in at lexer start up, turn off global literals 
checking probably and then say:

ID : ('a'..'z')+ {$setType(lookupWord($getText));} ;

or something where the lookupWord() method just looks in the various 
tables to see what the "part of speech" that word is.

Don't do the vocabulary thing literally in ANTLR rules, use a few text 
files with the right words in them :)

Your problem is going to be ambiguities before you get too far.  Let's 
see...what's an example...a "bed" is a noun and a verb ;)

Ter
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org
Lecturer in Comp. Sci., University of San Francisco


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From cintyram at yahoo.com  Wed Jan 29 11:10:05 2003
From: cintyram at yahoo.com (cintyram <cintyram@yahoo.com>)
Date: Mon Dec 20 16:15:18 2004
Subject: [antlr-interest] Re: PERL VS ANTLR
In-Reply-To: <3E3762DA.20300@uiowa.edu>
Message-ID: <b198ud+9hcc@eGroups.com>

you are right, and i stand corrected ;
my answer was not comprehensive enough to state that antlr does not
support all cfgs but only predicated LL ; on the other hand , though i
must admit to my being not the expert on this, LR grammars can be
represented by an equivalent LL grammar ;
i remember having done some exercises on this in the compiler theory
class ;

also since regular grammars are based on finite automata , and cfgs
are based on pushdown automata [ like stack ] , any finite automaton
can be modeled by an infinite automaton , that is to say any table
based machine can also be implemented by a stack based machine as in
principle the stack can grow upto infinite ; but the converse is not
true as the dfa's state space is limited ;

as for perl, im sorry i have only a limited knowledge of the language
, that too from my meagre experience of havbing used it for some cgi
scripts and for some small tools for preprocessing the input for a
simulator ; maybe some one who has more knowledge on this can help ;

i also agree that parsers , and by extension parser generators,
especially antlr] provide a far better and easier to use mechanism for
defining exception conditions and reporting them or recovering from them ;

cheers
ram

--- In antlr-interest@yahoogroups.com, Brian Smith
<brian-l-smith@u...> wrote:
> ANTLR doesn't support really support just any context free grammars. It 
> handles predicated LL(k) grammars. Because of the LL(k), it cannot 
> handle all context free grammars. Yet, because of the predicates, it
can 
> handle some grammars that are not context free, given the proper 
> predicates. [Hmm, I wonder, if there is a mechanical transformation of 
> LR(k) or GLR grammars to predicated LL(k) grammars?]
> 
> Also, Perl doesn't just handle regular grammars because Perl's "regular 
> expressions" are really not "regular;" they are much more powerful. It 
> is my understanding that in Perl 6, there is even a way to write Perl 
> "regular expressions" in an EBNF style that is similar to the style
used 
> in parser-generator systems like ANTLR and YACC. I believe that Perl 
> also has something analogous to ANTLR's predicates. I would be very 
> interested to read a paper that attempts to define the class of
grammars 
> that Perl's "regular expressions" can handle.
> 
> Personally, I wouldn't use Perl for any situation for which the
input is 
> likely to contain syntax errors that I would be required to report on 
> (e.g. a compiler). I would generally use Perl for cases where I could 
> assume that the input is well-formed, and/or situations where I can 
> ignore and easily recover from syntax errors (e.g. log files). But, 
> maybe that just evidence of my lack of experience with Perl.
> 
> - Brian
> 
> sudip mitra wrote:
> > wow ...!!! some explanation ... you think very clearly !!!
> > 
> >  */"cintyram <cintyram@y...>" <cintyram@y...>/* wrote:
> > 
> >     well , in principle, antlr supports context free , which is a
super
> >     set of regular ;
> >     but perl is a programming languge and helps you in doing specific
> >     tasks which might be part of your solution, like making it easy to
> >     read a file, etc .. also the pattern matching and other r.e
functions
> >     are very powerful and sufficient for most common tasks; for
eg: if all
> >     you have to do is read links out of a file, or simply search and
> >     replace a specific patter with a specific other .. then perl
might be
> >     easier to use;
> > 
> >     on the other hand, if you try writing a system like monty's gcc
> >     framework etc. in PERL you will find that it is easier to
think and
> >     specify in ebnf ;
> >     so the comparison is actually case by case , and one should not
> >     generalize ;
> > 
> > 
> >     also with antlr, you generate code to do something, but with
perl you
> >     actually formulate the whole solution! and code it!!
> > 
> >     so your question for the most part wants to compare apples and
oranges.
> >     /e
> >     cheers
> >     ram
> > 
> > 
> > 
> >     --- In antlr-interest@yahoogroups.com, "John D. Mitchell"
> >     wrote:
> >      > Sounds like a troll but what the heck... :-)
> >      >
> >      > >>>>> "sudip" == sudip mitra writes:
> >      > [...]
> >      >
> >      > > I was wondering how do Perl and Antlr compare . Would
Antlr be a
> >      > > superset of Perl ? Or is Perl THE language for text
manipulation ?
> >      > > Answers to this question should ignore the learning time
.I just
> >     want to
> >      > > know if Antlr can do more than Perl even if its a
language blah
> >     blah
> >      > > ...!!!
> >      >
> >      > (A) Perl is a general purpose programming language.
> >      >
> >      > (B) Perl programs for translation work tend very strongly to be
> >     based on
> >      > ad hoc, simplistic (though often ridiculously complex) use
of regular
> >      > expressions.
> >     ! >
> >      > (C) ANTLR is a grammar-based lexer/parser/walker generator.
> >      >
> >      > Go wild,
> >      > John
> > 
> > 
> > 
> > 
> >     Your use of Yahoo! Groups is subject to
> >     http://docs.yahoo.com/info/terms/
> > 
> > 
> >
------------------------------------------------------------------------
> > Do you Yahoo!?
> > Yahoo! Mail Plus 
> > <http://rd.yahoo.com/mail/mailsig/*http://mailplus.yahoo.com> - 
> > Powerful. Affordable. Sign up now 
> > <http://rd.yahoo.com/mail/mailsig/*http://mailplus.yahoo.com>
> > Your use of Yahoo! Groups is subject to the Yahoo! Terms of Service 
> > <http://docs.yahoo.com/info/terms/>.


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From parrt at jguru.com  Wed Jan 29 11:24:40 2003
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:15:18 2004
Subject: [antlr-interest] Re: PERL VS ANTLR
In-Reply-To: <b198ud+9hcc@eGroups.com>
Message-ID: <504C2759-33BF-11D7-A114-000393BB647E@jguru.com>


On Wednesday, January 29, 2003, at 11:10 AM, cintyram 
<cintyram@yahoo.com> wrote:

> you are right, and i stand corrected ;
> my answer was not comprehensive enough to state that antlr does not
> support all cfgs but only predicated LL ; on the other hand , though i
> must admit to my being not the expert on this, LR grammars can be
> represented by an equivalent LL grammar ;
> i remember having done some exercises on this in the compiler theory
> class ;

Actually LR(k) is only as strong as LL(k) if you put actions on the 
left-edge of every production, forcing the LR parser to know where it's 
at on the left-edge just like an LL(k) parser.

The thing to remember is that all languages are "turing complete" so 
can implement pretty much anything, however, you should focus on 
efficiency of expression.  ANTLR is a domain-specific language designed 
to make building parsers/translators easier.  PERL for the most part 
makes you implement parsers by hand.  Also, isn't PERL optimized to 
work on a line-by-line basis?  Can it easily match an HTML tag, for 
example, spanning 5 lines?

Ter
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org
Lecturer in Comp. Sci., University of San Francisco


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From cintyram at yahoo.com  Wed Jan 29 13:18:42 2003
From: cintyram at yahoo.com (cintyram <cintyram@yahoo.com>)
Date: Mon Dec 20 16:15:18 2004
Subject: [antlr-interest] XML output .
Message-ID: <b19gfi+3q2h@eGroups.com>

hi ,
 this post actually addresses two related issues , so i did not post
them in seperate mails

i am trying to visualise the ast constructed by my parser,
and the easiest way i felt was to output it in xml and view it in a
browser;

1. i wanted the outpout in a string istead of in a strem , so i
modified the method  in baseast.cpp as follows  ;
 actually i wanted to put the token names but i dont know how to
access them from the baseast class ; they are available to the parser
and tree parser ; since wanting to know the token names from the ast
or from any where a token is available seems to me to be a useful
feature, what would be a standard way to do it? 
[eg: put a static pointer to the table in Token class , and provide
methods to assign to it when ever we need names? ]


ANTLR_USE_NAMESPACE(std)string BaseAST::toStringList() const
{
    ANTLR_USE_NAMESPACE(std)string ts="";
    int type;
    
    char str[10] ;
    
    ts += "\n<NODE_" ;
    ts += itoa(this->getType() , str , 10  );
    ts += ">\n" ; 
        
    if (getFirstChild())
    {
        /// ts+=" ( ";
        ts+=toString();
        ts+=getFirstChild()->toStringList();
        /// ts+=" )\n";
    }
    else
    {
        ts+=" ";
        ts+=toString();
    }
        
     ts += "\n</NODE_" ;
     ts += itoa(this->getType() , str , 10  );
     ts += ">\n" ; 
    

    if (getNextSibling())
        ts+=getNextSibling()->toStringList();

    return ts;
}

2. in my method xml out put like 

 <tag>
 <
</tag>
is not being accepted as valid by the browser ;

even if i enclose it in double quotes.. 
how do i over come this ?
thanks in advance
ram



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From hushlee83 at yahoo.com.sg  Wed Jan 29 14:52:55 2003
From: hushlee83 at yahoo.com.sg (=?iso-8859-1?q?Sharon=20Li?=)
Date: Mon Dec 20 16:15:18 2004
Subject: [antlr-interest] Re: Differentiating keywords in parser and identifiers in lexers
In-Reply-To: <b188jm+nr1a@eGroups.com>
Message-ID: <20030129225255.68757.qmail@web40908.mail.yahoo.com>


yup i did. my codes are as follows:
class AntlrParser extends Parser;
options { k=4; }
{
 ViewFileInfo file = new ViewFileInfo();
 
 public ViewFileInfo getViewFileInfo(){
  return file;
 }
}
keyword : ANGLE FACTOR 
     {
      System.out.println("Keyword: angle factor");
     }
    | INITIAL COLOR 
     {
      System.out.println("Keyword: initial color");
     }
    | COLOR INCREMENT
     {
      System.out.println("Keyword: color increment");
     }
    | INITIAL LINE WIDTH
     {
      System.out.println("Keyword: initial line width");
     }
    | LINE WIDTH INCREMENT 
     {
      System.out.println("Keyword: line width increment");
     }
    | VIEWPOINT
     {
      System.out.println("Keyword: viewpoint");
     }
    | VIEW REFERENCE POINT
     {
      System.out.println("Keyword: view reference point");
     }
    | TWIST
     {
      System.out.println("Keyword: twist");
     }
    | PROJECTION
     {
      System.out.println("Keyword: projection");
     }
    | FRONT DISTANCE
     {
      System.out.println("Keyword: front distance");
     }
    | BACK DISTANCE
     {
      System.out.println("Keyword: back distance");
     }
    | SCALE FACTOR
     {
      System.out.println("Keyword: scale factor");
     }
    | Z BUFFER
     {
      System.out.println("Keyword: z buffer");
     }
    | CUE RANGE
     {
      System.out.println("Keyword: cue range");
     }
    | RENDER MODE
     {
      System.out.println("Keyword: render mode");
     }
    | LINE STYLE
     {
      System.out.println("Keyword: line style");
     }
    | LIGHT DIRECTION
     {
      System.out.println("Keyword: light direction");
     }
    | DIFFUSE REFLECTION
     {
      System.out.println("Keyword: diffuse reflection");
     }
    | TROPISM DIRECTION
     {
      System.out.println("Keyword: tropism direction");
     }
    | INITIAL ELASTICITY
     {
      System.out.println("Keyword: initial elasticity");
     }
    | ELASTICITY INCREMENT
     {
      System.out.println("Keyword: elasticity increment");
     }
    | FUNCTION
     {
      System.out.println("Keyword: function");
     }
    ;
    
value : IDENT | NUMERIC (SYMBOL NUMERIC)? (IDENT)? 
    ;
file   : ( line (NEWLINE line)*(NEWLINE)? EOF)
       {System.out.println("file matched");}
       ;
line   : ((record)+ )
       ;
record : ((keyword) (c:COLON)? (value) (COMMENT)?)
      ;
    
/**---------------------------------- Lexer class ------------------------------------------------**/
class AntlrLexer extends Lexer;
options { 
 charVocabulary='\3'..'\377'; 
 k = 4;
}
tokens
{
 ANGLE       = "angle";
 FACTOR      = "factor";
  INITIAL     = "initial";
  COLOR    = "color";
  LINE    = "line";
  WIDTH    = "width";
  VIEWPOINT   = "viewpoint";
  VIEW    = "view";
  REFERENCE  = "reference";
 POINT    = "point";
 TWIST    = "twist";
 PROJECTION = "projection";
 FRONT    = "front";
 DISTANCE  = "distance";
 BACK    = "back";
 SCALE    = "scale";
 Z           = "z";
 BUFFER   = "buffer";
 CUE     = "cue";
 RANGE    = "range";
 RENDER      = "render";
 MODE        = "mode";
 STYLE    = "style";
 LIGHT    = "light";
 DIRECTION  = "direction";
 DIFFUSE   = "diffuse";
 REFLECTION = "reflection";
 TROPISM   = "tropism";
 FUNCTION  = "function";
 ELASTICITY  = "elasticity";
 INCREMENT   = "increment";
}
protected SYMBOL : ('-'|'+'|'%'|'/'|'.'|',')+;
protected DIGIT   : ( '0'..'9' ) ; 
protected LETTER  : ( 'a'..'z' | 'A'..'Z' ) ; 
NUMERIC :(SYMBOL)? (DIGIT)+ (SYMBOL DIGIT)* 
    {
     System.out.println("Printed in lexer NUMERIC: "+getText());
    }
    ;
IDENT  options { testLiterals = true; }:  LETTER ((SYMBOL)? LETTER)* 
   {
    System.out.println("Printed in lexer IDENT: "+getText());
   }
   ;
COLON : ':' {System.out.println(getText());};
COMMENT : "/*" (options {greedy=false;} :.)* "*/" ;
NEWLINE : ('\r''\n')=> '\r''\n' //DOS
        | '\r'                  //MAC
        | '\n'                  //UNIX
        { newline(); }
        ;
    
WS      : (' '|'\t') { $setType(Token.SKIP); } ;
 
 "micheal_jor <open.zone@virgin.net>" <open.zone@virgin.net> wrote:--- In antlr-interest@yahoogroups.com, Sharon Li 
wrote:
> 
> hi,
> 
> how do I prevent Antlr from recognising keywords to be identifiers? 
I can't think of a way in which i can specify which words can be 
identifiers and which should not.

Have you actually tried the advice from my previous reply about the 
using the "tokens {...}" section in your grammar?

http://www.antlr.org/doc/metalang.html#TokensSection

> I have looked at previous messages but it still doesn't register. 
Perhaps someone can provide an example. 

The link above has one that shows "void" and "int" as "keywords" and 
not identifiers.

Micheal





Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 Yahoo! Travel
- Valentine surprise deals. Book now!
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20030130/82d390a8/attachment.html
From s_mitra8 at yahoo.com  Wed Jan 29 14:53:07 2003
From: s_mitra8 at yahoo.com (sudip mitra)
Date: Mon Dec 20 16:15:18 2004
Subject: [antlr-interest] Re: PERL VS ANTLR
In-Reply-To: <504C2759-33BF-11D7-A114-000393BB647E@jguru.com>
Message-ID: <20030129225307.56357.qmail@web10408.mail.yahoo.com>


I had this data format for a text file director/ age /title /remuneration in one part of the file ... here is the interesting part :
donald / 34/ ceo,cfo, this,that / $4578900 
mcdonald/67/ titles......................................................titles ........still more titles/ $567888
the first one  is a nice line delimited very well with '/'  and so easy pickings by simple file i/o
the second line which follows it and occupies the next line for the same format... this is the problem ..so can perl solve this ??? or ANTLR is better ...(I am not using it as a language blah blah ....:-)  )
 
 Terence Parr <parrt@jguru.com> wrote:
On Wednesday, January 29, 2003, at 11:10 AM, cintyram 
wrote:

> you are right, and i stand corrected ;
> my answer was not comprehensive enough to state that antlr does not
> support all cfgs but only predicated LL ; on the other hand , though i
> must admit to my being not the expert on this, LR grammars can be
> represented by an equivalent LL grammar ;
> i remember having done some exercises on this in the compiler theory
> class ;

Actually LR(k) is only as strong as LL(k) if you put actions on the 
left-edge of every production, forcing the LR parser to know where it's 
at on the left-edge just like an LL(k) parser.

The thing to remember is that all languages are "turing complete" so 
can implement pretty much anything, however, you should focus on 
efficiency of expression. ANTLR is a domain-specific language designed 
to make building parsers/translators easier. PERL for the most part 
makes you implement parsers by hand. Also, isn't PERL optimized to 
work on a line-by-line basis? Can it easily match an HTML tag, for 
example, spanning 5 lines?

Ter
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org
Lecturer in Comp. Sci., University of San Francisco




Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 




---------------------------------
Do you Yahoo!?
Yahoo! Mail Plus - Powerful. Affordable. Sign up now
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20030129/dfb4c7b4/attachment.html
From cow_jumped_moon at hotmail.com  Wed Jan 29 15:07:51 2003
From: cow_jumped_moon at hotmail.com (queengiraffe <cow_jumped_moon@hotmail.com>)
Date: Mon Dec 20 16:15:18 2004
Subject: [antlr-interest] Token Stream.
Message-ID: <b19ms7+l4b2@eGroups.com>

Sorry a help call from an absolute novice to compiler design. I'm 
using Cpp. 

I understand that to pass the information into the lexer you use:

CalcLexer lexer(cin);

But I cannot figure out how you can dump the tokens onto screen by 
using the lexer class. I wish to do this for testing purpose, so I 
know what tokens are being generated by the lexer.



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From hushlee83 at yahoo.com.sg  Wed Jan 29 15:13:13 2003
From: hushlee83 at yahoo.com.sg (=?iso-8859-1?q?Sharon=20Li?=)
Date: Mon Dec 20 16:15:18 2004
Subject: [antlr-interest] Help with Antlr
In-Reply-To: <20030129171130.D3587@cs.utwente.nl>
Message-ID: <20030129231313.87613.qmail@web40910.mail.yahoo.com>


Thanks for advicing Ric. Basically, I need to recognize variables defined in the first few statements (i.e. #define  VARIABLE_NAME  VALUE). Next all the values assignmed after the word Homomorphism :
for example :  I(age)-->;(2)F(MAX_INT_LEN*func(1,age/DURATION)))
should be substituted into the equation as well. So the above statement should be have "age" substituted by the value in I( ?? ) and the MAX_INT_LEN and DURATION should be substituted by the value defined at the beginning of the file. 

I'm not too sure if I would require knowledge of the structure of the file to recognize the above mentioned. However the program should be flexible enough to recognize the "expr --> equation" statements for future requirements. The final equation with all the necessary substitution is what we will be looking for. Pls advice. Thanks.

Cheers,
Sharon
 Ric Klaren <klaren@cs.utwente.nl> wrote:Hi,

On Wed, Jan 29, 2003 at 08:35:30AM +0800, Sharon Li wrote:
> Hi I seem to be running into problems with Antlr, so could some kind souls
> out there pls help. 
> 
> My program needs to read a file that looks something like that :
> 
> /*--------Begining of file ----------------------------------*/
> 
> #define DURATION 100
> #define MAX_INT_LEN 10
> #define MAX_P_LEN 2
> Lsystem: 0 
> /* number of steps in the simulation */
> derivation length: 100
> /* starting string or axiom */
> /* I is an internode with parameter age,
> * L is a leaf, 
> * B is a blossom,
> * P is a petal with parameter age
> */
> Axiom: I(1)[L]/(180)[L]I(1)I(1)I(1)B
> I(age)-->I(age+1)
> P(age)-->P(age+1)
> R(ang)-->R(ang+3)
> Decomposition
> B --> R(1);(3)@o(1.5);(1)[P(1)]+(72)[P(1)]+(72)[P(1)]+(72)[P(1)]+(72)[P(1)]
> Homomorphism
> I(age)-->;(2)F(MAX_INT_LEN*func(1,age/DURATION))
> L --> +(60);(4)F(1){.g(1)[-(90)g(1).][g(2).][+(90)g(1).]}
> P(age) --> {.g(1)[-(90)g(1).][g(MAX_P_LEN*func(2,age/DURATION)).][+(90)g(1).]} 
> R(ang)--> +(ang)
> /* Label for end of L-system */
> endlsystem
> 
> /*----------- ENd of file -------------------------------------*/
> 
> "#define DURATION 100" declares a variable identifier DURATION and assigns a literal 100 to it. This value will be stored and substituted into:
> 
> P(age) --> {.g(1)[-(90)g(1).][g(MAX_P_LEN*func(2,age/DURATION)).][+(90)g(1).]} 
> 
> The program should return me the substituted string. 

So you basically want your program to return the file with all the
#define's replaced? If so then you might be better off using the C
preprocessor (usually called cpp on unix systems, binaries for windows
should be available from lotsof places look for cygwin or mingw binaries)

If you want (have?) to do this with antlr you have two options. Ask
yourself do you need to know the structure of the whole thing. If not you
can write a filtering lexer that only replaces the keywords. E.g. you make
a rule that recognizes the #define x y lines stores keys and values in a
hashtable (think there was some java container for it) and have one rule
that recognizes identifiers and checks in the hashtable for known values
and replaces them in the output when encountered. You would have to modify
the example here: http://www.antlr.org/doc/lexer.html#ANTLR_Masquerading_as_SED
a bit for that.

If you do need to know the structure your current approach is better. But
what structure do you exactly need? Do you need a parse tree to transform
lateron? Do you only need some of the expressions with replacements?

Atm I don't have much time to look at bigger things, and I didn't quite
follow the previous threads. But a few tips in debugging things:

Use the -traceLexer, -traceParser options to antlr to turn on tracing in
the generated lexer/parsers so you can see where things go wrong. Easiest
is maybe to start with checking if your lexer does what it has to do. E.g.
make a testfile that just repeatedly calls nextToken and see if all tokens
come out as expected (see for instance the examples/java/filterWithRule
example for an example main.java) After you know the lexer works ok, then
you start looking at the parser with -traceParser turned on.

HTH,

Ric
-- 
-----+++++*****************************************************+++++++++-------
---- Ric Klaren ----- klaren@cs.utwente.nl ----- +31 53 4893722 ----
-----+++++*****************************************************+++++++++-------
Wo das Chaos auf die Ordnung trifft, gewinnt meist das Chaos, weil es
besser organisiert ist. --- Friedrich Nietzsche




Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 Yahoo! Travel
- Valentine surprise deals. Book now!
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20030130/4b888d6a/attachment.html
From cintyram at yahoo.com  Wed Jan 29 15:52:20 2003
From: cintyram at yahoo.com (cintyram <cintyram@yahoo.com>)
Date: Mon Dec 20 16:15:18 2004
Subject: [antlr-interest] Re: PERL VS ANTLR
In-Reply-To: <20030129225307.56357.qmail@web10408.mail.yahoo.com>
Message-ID: <b19pfk+4s1c@eGroups.com>

i am sure perl can be used for this ..
you simply have to match every thing between  a specified number of
slashes .. doesnt matter even if it is a newline ;
also perl allows you to red the whole file as one string ;
and you can do such gymnastics;
ofcourse it is  easy to write an antlr grammar for this too; 
are you just comparing or really trying to solve the problem ?
cheers
ram

--- In antlr-interest@yahoogroups.com, sudip mitra <s_mitra8@y...> wrote:
> 
> I had this data format for a text file director/ age /title
/remuneration in one part of the file ... here is the interesting part :
> donald / 34/ ceo,cfo, this,that / $4578900 
> mcdonald/67/
titles......................................................titles
........still more titles/ $567888
> the first one  is a nice line delimited very well with '/'  and so
easy pickings by simple file i/o
> the second line which follows it and occupies the next line for the
same format... this is the problem ..so can perl solve this ??? or
ANTLR is better ...(I am not using it as a language blah blah ....:-)  )
>  
>  Terence Parr <parrt@j...> wrote:
> On Wednesday, January 29, 2003, at 11:10 AM, cintyram 
> wrote:
> 
> > you are right, and i stand corrected ;
> > my answer was not comprehensive enough to state that antlr does not
> > support all cfgs but only predicated LL ; on the other hand , though i
> > must admit to my being not the expert on this, LR grammars can be
> > represented by an equivalent LL grammar ;
> > i remember having done some exercises on this in the compiler theory
> > class ;
> 
> Actually LR(k) is only as strong as LL(k) if you put actions on the 
> left-edge of every production, forcing the LR parser to know where it's 
> at on the left-edge just like an LL(k) parser.
> 
> The thing to remember is that all languages are "turing complete" so 
> can implement pretty much anything, however, you should focus on 
> efficiency of expression. ANTLR is a domain-specific language designed 
> to make building parsers/translators easier. PERL for the most part 
> makes you implement parsers by hand. Also, isn't PERL optimized to 
> work on a line-by-line basis? Can it easily match an HTML tag, for 
> example, spanning 5 lines?
> 
> Ter
> --
> Co-founder, http://www.jguru.com
> Creator, ANTLR Parser Generator: http://www.antlr.org
> Lecturer in Comp. Sci., University of San Francisco
> 
> 
> 
> 
> Your use of Yahoo! Groups is subject to
http://docs.yahoo.com/info/terms/ 
> 
> 
> 
> 
> ---------------------------------
> Do you Yahoo!?
> Yahoo! Mail Plus - Powerful. Affordable. Sign up now


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From s_mitra8 at yahoo.com  Wed Jan 29 19:24:02 2003
From: s_mitra8 at yahoo.com (sudip mitra)
Date: Mon Dec 20 16:15:18 2004
Subject: [antlr-interest] Re: PERL VS ANTLR
In-Reply-To: <b19pfk+4s1c@eGroups.com>
Message-ID: <20030130032402.5378.qmail@web10411.mail.yahoo.com>


I am comparing ... want to put on the tutorial as to what else smart things we can do using ANTLR ... always looked powerful to me...
 "cintyram <cintyram@yahoo.com>" <cintyram@yahoo.com> wrote:i am sure perl can be used for this ..
you simply have to match every thing between a specified number of
slashes .. doesnt matter even if it is a newline ;
also perl allows you to red the whole file as one string ;
and you can do such gymnastics;
ofcourse it is easy to write an antlr grammar for this too; 
are you just comparing or really trying to solve the problem ?
cheers
ram

--- In antlr-interest@yahoogroups.com, sudip mitra wrote:
> 
> I had this data format for a text file director/ age /title
/remuneration in one part of the file ... here is the interesting part :
> donald / 34/ ceo,cfo, this,that / $4578900 
> mcdonald/67/
titles......................................................titles
........still more titles/ $567888
> the first one is a nice line delimited very well with '/' and so
easy pickings by simple file i/o
> the second line which follows it and occupies the next line for the
same format... this is the problem ..so can perl solve this ??? or
ANTLR is better ...(I am not using it as a language blah blah ....:-) )
> 
> Terence Parr 
wrote:
> On Wednesday, January 29, 2003, at 11:10 AM, cintyram 
> wrote:
> 
> > you are right, and i stand corrected ;
> > my answer was not comprehensive enough to state that antlr does not
> > support all cfgs but only predicated LL ; on the other hand , though i
> > must admit to my being not the expert on this, LR grammars can be
> > represented by an equivalent LL grammar ;
> > i remember having done some exercises on this in the compiler theory
> > class ;
> 
> Actually LR(k) is only as strong as LL(k) if you put actions on the 
> left-edge of every production, forcing the LR parser to know where it's 
> at on the left-edge just like an LL(k) parser.
> 
> The thing to remember is that all languages are "turing complete" so 
> can implement pretty much anything, however, you should focus on 
> efficiency of expression. ANTLR is a domain-specific language designed 
> to make building parsers/translators easier. PERL for the most part 
> makes you implement parsers by hand. Also, isn't PERL optimized to 
> work on a line-by-line basis? Can it easily match an HTML tag, for 
> example, spanning 5 lines?
> 
> Ter
> --
> Co-founder, http://www.jguru.com
> Creator, ANTLR Parser Generator: http://www.antlr.org
> Lecturer in Comp. Sci., University of San Francisco
> 
> 
> 
> 
> Your use of Yahoo! Groups is subject to
http://docs.yahoo.com/info/terms/ 
> 
> 
> 
> 
> ---------------------------------
> Do you Yahoo!?
> Yahoo! Mail Plus - Powerful. Affordable. Sign up now




Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 




---------------------------------
Do you Yahoo!?
Yahoo! Mail Plus - Powerful. Affordable. Sign up now
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20030129/43a12b50/attachment.html
From s_mitra8 at yahoo.com  Wed Jan 29 19:47:25 2003
From: s_mitra8 at yahoo.com (sudip mitra)
Date: Mon Dec 20 16:15:18 2004
Subject: [antlr-interest] Re: PERL VS ANTLR
In-Reply-To: <20030130032402.5378.qmail@web10411.mail.yahoo.com>
Message-ID: <20030130034725.3457.qmail@web10403.mail.yahoo.com>


think abt this 
line 1- donald/45/ title /$78900
line2- mcdonald/ 67/ t............i......tles/ $890
line3- 456 billgates/32/smartest ass ever/$ 8900000
well what has happened is 890456 is gone onto line three and is between two slashes still ... so I was wondering and wondering what would Perl do here ....
 
 sudip mitra <s_mitra8@yahoo.com> wrote:
I am comparing ... want to put on the tutorial as to what else smart things we can do using ANTLR ... always looked powerful to me... 
 "cintyram <cintyram@yahoo.com>" <cintyram@yahoo.com> wrote: i am sure perl can be used for this ..
you simply have to match every thing between a specified number of
slashes .. doesnt matter even if it is a newline ;
also perl allows you to red the whole file as one string ;
and you can do such gymnastics;
ofcourse it is easy to write an antlr grammar for this too; 
are you just comparing or really trying to solve the problem ?
cheers
ram

--- In antlr-interest@yahoogroups.com, sudip mitra wrote:
> 
> I had this data format for a text file director/ age /title
/remuneration in one part of the file ... here is the interesting part :
> donald / 34/ ceo,cfo, this,that / $4578900 
> mcdonald/67/
titles......................................................titles
........still more titles/ $567888
> the first one is a nice line delimited very well with '/' and so
easy pickings by simple file i/o
> the second line which follows it and occupies the next line for the
same format... this is the problem ..so can perl solve this ??? or
ANTLR is better ...(I am not using it as a language blah blah ....:-) )
> 
> Terence Parr 
wrote:
> On Wednesday, January 29, 2003, at 11:10 AM, cintyram 
> wrote:
> 
> > you are right, and i stand corrected ;
> > my answer was not comprehensive enough to state that antlr does not
> > support all cfgs but only predicated LL ; on the other hand , though i
> > must admit to my being not the expert on this, LR grammars can be
> > represented by an equivalent LL grammar ;
> > i remember having done some exercises on this in the compiler theory
> > class ;
> 
> Actually LR(k) is only as strong as LL(k) if you put actions on the 
> left-edge of every production, forcing the LR parser to know where it's 
> at on the left-edge just like an LL(k) parser.
> 
> The thing to remember is that all languages are "turing complete" so 
> can implement pretty much anything, however, you should focus on 
> efficiency of expression. ANTLR is a domain-specific language designed 
> to make building parsers/translators easier. PERL for the most part 
> makes you implement parsers by hand. Also, isn't PERL optimized to 
> work on a line-by-line basis? Can it easily match an HTML tag, for 
> example, spanning 5 lines?
> 
> Ter
> --
> Co-founder, http://www.jguru.com
> Creator, ANTLR Parser Generator: http://www.antlr.org
> Lecturer in Comp. Sci., University of San Francisco
> 
> 
> 
> 
> Your use of Yahoo! Groups is subject to
http://docs.yahoo.com/info/terms/ 
> 
> 
> 
> 
> ---------------------------------
> Do you Yahoo!?
> Yahoo! Mail Plus - Powerful. Affordable. Sign up now




Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 




---------------------------------
Do you Yahoo!?
Yahoo! Mail Plus - Powerful. Affordable. Sign up now 
Your use of Yahoo! Groups is subject to the Yahoo! Terms of Service. 



---------------------------------
Do you Yahoo!?
Yahoo! Mail Plus - Powerful. Affordable. Sign up now
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20030129/3a1c87fa/attachment.html
From nk.truong at student.qut.edu.au  Wed Jan 29 20:31:28 2003
From: nk.truong at student.qut.edu.au (tdknghi <nk.truong@student.qut.edu.au>)
Date: Mon Dec 20 16:15:18 2004
Subject: [antlr-interest] Line number
Message-ID: <b1a9r0+o2bp@eGroups.com>

  Hi all,

I have seen a lot of post regarding about display the line number in the 
AST vew. However, there is no clear and example of how to do it. I am 
currently using antlr 2-7.2.
   Could you please let me know how to get it done. Thanks.

Regards,
MiMi



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From rmsanjivp at yahoo.com  Wed Jan 29 21:45:59 2003
From: rmsanjivp at yahoo.com (rmsanjivp <rmsanjivp@yahoo.com>)
Date: Mon Dec 20 16:15:18 2004
Subject: [antlr-interest] Where is the problem??
Message-ID: <b1ae6n+63ft@eGroups.com>

Hi! 

Consider the following grammar

topLevel : expr;

expr : mult_expr ( (PLUS | MINUS) mult_expr)*;

mult_expr : primary_expr ((MULT | DIV) primary_expr)*;

primary_expr: ID | (LPAREN ID RPAREN);


FOr this simple grammar if I give input as (1+2)) then even though 
it is a case of unmatched paranthesis there is no exception 
generated. The problem is that RPAREN is coming as a valid expected 
token in one of the rule. Could you please tell me if there is a bug 
somethere??

Thanks,
Sanjiv


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From rmsanjivp at yahoo.com  Wed Jan 29 22:13:37 2003
From: rmsanjivp at yahoo.com (rmsanjivp <rmsanjivp@yahoo.com>)
Date: Mon Dec 20 16:15:18 2004
Subject: [antlr-interest] Rephrasing message 7267 ( Where is the error?)
Message-ID: <b1afqh+nccj@eGroups.com>

the grammar is actually


topLevel : expr;

expr : mult_expr ( (PLUS | MINUS) mult_expr)*;

mult_expr : pow_expr ((MULT | DIV) pow_expr)*;

pow_expr: primary_expr ( POWER pow_expr)?;

primary_expr: ID | (LPAREN expr RPAREN) | NUM
;

THe problem is that in the method for pow_expr because I made it 
right associative I have RPAREN as a valid lookahead after the match 
of ID. THis should not be the case as only an operator can follow 
ID. Can anyone please tell me why this is happening? If my grammar 
is wrong then where it is wrong?


I think the problem is coming because of rule (LPAREN expr RPAREN) 
because if I have this as (LPAREN ID RPAREN) then RPAREN is not 
coming as a valid token after pow_expr(). 

Kindly help me soon.

Thanks,
Sanjiv


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From open.zone at virgin.net  Thu Jan 30 00:30:39 2003
From: open.zone at virgin.net (micheal_jor <open.zone@virgin.net>)
Date: Mon Dec 20 16:15:18 2004
Subject: [antlr-interest] Re: Line number
In-Reply-To: <b1a9r0+o2bp@eGroups.com>
Message-ID: <b1anrf+3d5t@eGroups.com>


>   Hi all,
> 
> I have seen a lot of post regarding about display the line number 
in the 
> AST vew. However, there is no clear and example of how to do it. I 
am 
> currently using antlr 2-7.2.
>    Could you please let me know how to get it done. Thanks.
> 
> Regards,
> MiMi

If you are using Java or C# and, if by "AST view" you mean the 
ASTFrame mechanism for viewing your ASTs then you can do the 
following:

1. Create a subclass of the appropriate standard Common***AST class 
(if you haven't already)
2. Override toString()/ToString() to print line numbers as well
3. Instruct your parser to use your new AST class with 
parser.setASTNodeType(string) or by using the "ASTLableType" option 
in your grammar.

Run your app as usual  ;-)

Micheal



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From pete.forman at westerngeco.com  Thu Jan 30 00:40:39 2003
From: pete.forman at westerngeco.com (Pete Forman)
Date: Mon Dec 20 16:15:18 2004
Subject: [antlr-interest] XML output .
In-Reply-To: <b19gfi+3q2h@eGroups.com>
Message-ID: <5.1.1.1.2.20030130082037.01eb7b10@wgmail2.gatwick.eur.slb.com>

At 2003-01-29 21:18 +0000, cintyram <cintyram@yahoo.com> wrote:
>  this post actually addresses two related issues , so i did not post
>them in seperate mails
>
>i am trying to visualise the ast constructed by my parser,
>and the easiest way i felt was to output it in xml and view it in a
>browser;
>
>1. i wanted the outpout in a string istead of in a strem , so i
>modified the method  in baseast.cpp as follows  ;
>  actually i wanted to put the token names but i dont know how to
>access them from the baseast class ; they are available to the parser
>and tree parser ; since wanting to know the token names from the ast
>or from any where a token is available seems to me to be a useful
>feature, what would be a standard way to do it?
>[eg: put a static pointer to the table in Token class , and provide
>methods to assign to it when ever we need names? ]


I published a way to output XML such that the elements correspond to
tokens in http://groups.yahoo.com/group/antlr-interest/message/3808


Ter, in that message there was a small patch to BaseAST.java to add a
getTokenNames() method.  Any chance of adding that to 2.7.3?


Back to the original question, there is no need to rewrite BaseAST.
Just call xmlSerialize on a StringWriter.


>2. in my method xml out put like
>
>  <tag>
>  <
></tag>
>is not being accepted as valid by the browser ;

Presumably the solitary "<" is a typo in your message.

I found no problem using IE to interpret the XML generated by ANTLR.
Make sure that you call the file something.xml.

-- 
Pete Forman                -./\.-  Disclaimer: This post is originated
WesternGeco                  -./\.-   by myself and does not represent
pete.forman@westerngeco.com    -./\.-   opinion of Schlumberger, Baker
http://petef.port5.com           -./\.-   Hughes or their divisions.


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From open.zone at virgin.net  Thu Jan 30 00:45:15 2003
From: open.zone at virgin.net (micheal_jor <open.zone@virgin.net>)
Date: Mon Dec 20 16:15:18 2004
Subject: [antlr-interest] Re: Token Stream.
In-Reply-To: <b19ms7+l4b2@eGroups.com>
Message-ID: <b1aomr+kecg@eGroups.com>

--- In antlr-interest@yahoogroups.com, "queengiraffe 
<cow_jumped_moon@h...>" <cow_jumped_moon@h...> wrote:
> Sorry a help call from an absolute novice to compiler design. I'm 
> using Cpp. 
> 
> I understand that to pass the information into the lexer you use:
> 
> CalcLexer lexer(cin);
> 
> But I cannot figure out how you can dump the tokens onto screen by 
> using the lexer class. I wish to do this for testing purpose, so I 
> know what tokens are being generated by the lexer.

Use a loop similar to:

for(;;)
{
    RefToken tok = lexer.nextToken();

    if ( tok->getType() == Token::EOF_TYPE )
        break;

    cout << "Token: " << tok->toString() << endl;
}

You should really wrap this in a try...catch. Also see the some of 
the projects in the examples/cpp directory.

Micheal




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From open.zone at virgin.net  Thu Jan 30 03:45:18 2003
From: open.zone at virgin.net (micheal_jor <open.zone@virgin.net>)
Date: Mon Dec 20 16:15:18 2004
Subject: [antlr-interest] Re: Differentiating keywords in parser and identifiers in lexers
In-Reply-To: <20030129225255.68757.qmail@web40908.mail.yahoo.com>
Message-ID: <b1b38e+bluo@eGroups.com>

> yup i did. my codes are as follows:

OK.

[Once again, I have just looked at the code so I might have missed 
something.]

I looked at the code and applied it to the only sample you've given 
of the data you wish to parse (from Msg# 7128):

angle focus : 0.0005
color : blue
line width : 12

Looking at your grammar, this data generate errors because:
1. "angle focus" is not a keyword (keyphrase?), but "angle factor" is.
2. "color" is not a keyword, but "initial color" is.
3. "line width" is not a keyword, but "initial line width" is.
4. "0.0005" will be matched as two NUMERIC tokens.

The problem in [4] above lies within the following rules (I assume 
that [1], [2] and [3] are obvious):

protected SYMBOL : ('-'|'+'|'%'|'/'|'.'|',')+;
protected DIGIT   : ( '0'..'9' ) ; 
NUMERIC :(SYMBOL)? (DIGIT)+ (SYMBOL DIGIT)* 

This says that a NUMERIC has:
a) an optional leading SYMBOL followed by
b) one or more DIGITs followed by
c) zero or more SYMBOL-DIGIT sequences

e.g: (In examples SY means SYMBOL and DG means DIGIT)

Hence the following are VALID numerics:
1) %0000.9+8/%..+7 ==> %=[SY] 0000=[(DG)+] .9+8/%..+7=[(SY DG)*]
                       { since .9=[SY DG] +8=[SY DG] /%..+7=[SY DG] }

2) 10 ==> no-leading-SY 10=[(DG+)]

3) -10 ==> -=[SY] 10=[(DG+)]

4) /+,,-%..10 ==> /+,,-%..=[SY] 10=[(DG+)]

And the following are INVALID numerics:
1) 0.0005 ==> no-leading-SY 0=[(DG)+] .0=[(DG)*] <NUMERIC-MATCHED>
              no-leading-SY 005=[(DG+)]          <NUMERIC-MATCHED>

2) -10.10 ==> -=[SY] 10=[(DG)+] .1=[(DG)*] <NUMERIC-MATCHED>
              no-leading-SY 0=[(DG+)]      <NUMERIC-MATCHED>

So, the keywords are being correctly indentified as keywords and not 
identifiers but some of your rules need more work to better reflect 
the true syntax/semantics of the language (i.e data) you are trying 
to parse.

I suspect for instance that NUMERIC would be better written as:

protected SIGN   : ('-'|'+');
protected SYMBOL : (SIGN|'%'|'/'|'.');
protected DIGIT  : ( '0'..'9' ) ; 
NUMERIC          : (SIGN)? (DIGIT)+ (SYMBOL (DIGIT)+)* 

This says that a NUMERIC has:
a) an optional leading SIGN followed by
b) one or more DIGITs followed by
c) zero or more sequences of: a SYMBOL followed by one or more DIGITs

I removed ',' from SYMBOL, because I didn't know what it meant. You 
would know that and should put it back in the right place. If it 
means "comma-separated list of NUMERIC", perhaps it should be handled 
in the parser?

Once again, have a look at Ter's Getting started guide and the 
tutorials it links to. Also look at the examples directory for ideas. 
The java grammar for instance has a good, well-tested rule for C/C++-
style multiline comments. Your version would report incorrect line 
numbers for all rules after a multiline comment.

Micheal




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From open.zone at virgin.net  Thu Jan 30 03:45:20 2003
From: open.zone at virgin.net (micheal_jor <open.zone@virgin.net>)
Date: Mon Dec 20 16:15:18 2004
Subject: [antlr-interest] Re: Differentiating keywords in parser and identifiers in lexers
In-Reply-To: <20030129225255.68757.qmail@web40908.mail.yahoo.com>
Message-ID: <b1b38g+n9tj@eGroups.com>

> yup i did. my codes are as follows:

OK.

[Once again, I have just looked at the code so I might have missed 
something.]

I looked at the code and applied it to the only sample you've given 
of the data you wish to parse (from Msg# 7128):

angle focus : 0.0005
color : blue
line width : 12

Looking at your grammar, this data generate errors because:
1. "angle focus" is not a keyword (keyphrase?), but "angle factor" is.
2. "color" is not a keyword, but "initial color" is.
3. "line width" is not a keyword, but "initial line width" is.
4. "0.0005" will be matched as two NUMERIC tokens.

The problem in [4] above lies within the following rules (I assume 
that [1], [2] and [3] are obvious):

protected SYMBOL : ('-'|'+'|'%'|'/'|'.'|',')+;
protected DIGIT   : ( '0'..'9' ) ; 
NUMERIC :(SYMBOL)? (DIGIT)+ (SYMBOL DIGIT)* 

This says that a NUMERIC has:
a) an optional leading SYMBOL followed by
b) one or more DIGITs followed by
c) zero or more SYMBOL-DIGIT sequences

e.g: (In examples SY means SYMBOL and DG means DIGIT)

Hence the following are VALID numerics:
1) %0000.9+8/%..+7 ==> %=[SY] 0000=[(DG)+] .9+8/%..+7=[(SY DG)*]
                       { since .9=[SY DG] +8=[SY DG] /%..+7=[SY DG] }

2) 10 ==> no-leading-SY 10=[(DG+)]

3) -10 ==> -=[SY] 10=[(DG+)]

4) /+,,-%..10 ==> /+,,-%..=[SY] 10=[(DG+)]

And the following are INVALID numerics:
1) 0.0005 ==> no-leading-SY 0=[(DG)+] .0=[(DG)*] <NUMERIC-MATCHED>
              no-leading-SY 005=[(DG+)]          <NUMERIC-MATCHED>

2) -10.10 ==> -=[SY] 10=[(DG)+] .1=[(DG)*] <NUMERIC-MATCHED>
              no-leading-SY 0=[(DG+)]      <NUMERIC-MATCHED>

So, the keywords are being correctly indentified as keywords and not 
identifiers but some of your rules need more work to better reflect 
the true syntax/semantics of the language (i.e data) you are trying 
to parse.

I suspect for instance that NUMERIC would be better written as:

protected SIGN   : ('-'|'+');
protected SYMBOL : (SIGN|'%'|'/'|'.');
protected DIGIT  : ( '0'..'9' ) ; 
NUMERIC          : (SIGN)? (DIGIT)+ (SYMBOL (DIGIT)+)* 

This says that a NUMERIC has:
a) an optional leading SIGN followed by
b) one or more DIGITs followed by
c) zero or more sequences of: a SYMBOL followed by one or more DIGITs

I removed ',' from SYMBOL, because I didn't know what it meant. You 
would know that and should put it back in the right place. If it 
means "comma-separated list of NUMERIC", perhaps it should be handled 
in the parser?

Once again, have a look at Ter's Getting started guide and the 
tutorials it links to. Also look at the examples directory for ideas. 
The java grammar for instance has a good, well-tested rule for C/C++-
style multiline comments. Your version would report incorrect line 
numbers for all rules after a multiline comment.

Micheal




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From diver7 at mail.ru  Thu Jan 30 03:55:26 2003
From: diver7 at mail.ru (dk0879 <diver7@mail.ru>)
Date: Mon Dec 20 16:15:18 2004
Subject: [antlr-interest] separating code and  everything else
Message-ID: <b1b3re+bvek@eGroups.com>

Hi, help beginner, please.
I write a lexer than must separate script code and HTML code
Lexer consists of two rules:

-------------------------------------
class TemplateLexer extends Lexer;

options {
    exportVocab = Template;
    testLiterals = false;
    k = 5;
}

SCRIPT_CODE
    :  "<?php"
        (   options { generateAmbigWarnings = false; }
        :   { LA(2)!='>' }? '?'
        |   '\r' '\n'       {newline();}
        |   '\r'            {newline();}
        |   '\n'            {newline();}
        |   ~('?'|'\n'|'\r')
        )*
        "?>"

HTML_CODE
    : // How to define "everything else" in this rule
    ;

Thank you



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From ngormley at hotmail.com  Thu Jan 30 04:36:51 2003
From: ngormley at hotmail.com (ngormley1974 <ngormley@hotmail.com>)
Date: Mon Dec 20 16:15:18 2004
Subject: [antlr-interest] Tracking absolute Lexer Position
Message-ID: <b1b693+dn64@eGroups.com>

Hi,

I have a problem where I need to parse a file in a case insensitive  
way, and need to copy the input to the output as is, except for a 
small number of rules, where I need to process the token.

Its a clever SED by any other name...

I'm using the filtering/SCARFing technique to parse the file and 
identity the small parts I'm after. When I use caseSensitive=false, 
and match '.' in the SCARF rule the character returned is in lower 
case?

I tried subclassing the CharScanner to try to keep track of the 
actual position in the source, with limited success, i.e i am missing 
small portions of the text. I've overridden consume and rewind to 
manage the loction from the start of the file, but I missing the odd 
character here, and there... Is there anywhere else that I need to 
manage increment/decrement the file position counter?

Am I barking up the wrong tree. Has anyone else solved this problem.

Thanks,
Niall


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From cow_jumped_moon at hotmail.com  Thu Jan 30 05:05:35 2003
From: cow_jumped_moon at hotmail.com (queengiraffe <cow_jumped_moon@hotmail.com>)
Date: Mon Dec 20 16:15:18 2004
Subject: [antlr-interest] Re: Token Stream.
In-Reply-To: <b1aomr+kecg@eGroups.com>
Message-ID: <b1b7uv+l194@eGroups.com>

> Use a loop similar to:
> 
> for(;;)
> {
>     RefToken tok = lexer.nextToken();
> 
>     if ( tok->getType() == Token::EOF_TYPE )
>         break;
> 
>     cout << "Token: " << tok->toString() << endl;
> }
> 
> You should really wrap this in a try...catch. Also see the some of 
> the projects in the examples/cpp directory.
> 
> Micheal

Thank you very much for your help. I'm afraid I'm still a little 
stuck, the loop you supplied does give me the type for the tokens, 
however it seems to get stuck right afterwards and will not move onto 
the parser part.

I am trying to apdapt the calc program supplied in examples for cpp. 
I've looked at the other examples and I'm afraid I am still stuck.

Have I done the coding wrong, I'm really sorry, I am very new to this.

void main()
{
	ANTLR_USING_NAMESPACE(std)
	ANTLR_USING_NAMESPACE(antlr)
	try
	{
		CalcLexer lexer(cin);
		lexer.setFilename("Lexer");

		for(;;)
		{
			RefToken tok = lexer.nextToken();
                         if ( tok->getType() == Token::EOF_TYPE )
                          break;

			cout << "Token: " << tok->getText() << endl;

		}
		
		CalcParser parser(lexer);
		parser.setFilename("Parser");

		// Parse the input expression
		parser.expr();
		RefAST t = parser.getAST();
		if( t )
		{
		// Print the resulting tree out in LISP notation
			cout << t->toStringTree() << endl;
			CalcTreeWalker walker;

			// Traverse the tree created by the parser
			float r = walker.expr(t);
			cout << "value is " << r << endl;
		}
		else
			cout << "No tree produced" << endl;

		
	}
	catch(exception& e)
	{
		cerr << "exception: " << e.what() << endl;
	}
}


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From tomdz at cs.tu-berlin.de  Thu Jan 30 05:27:11 2003
From: tomdz at cs.tu-berlin.de (Thomas Dudziak)
Date: Mon Dec 20 16:15:18 2004
Subject: [antlr-interest] Tracking absolute Lexer Position
Message-ID: <Pine.SOL.4.44.0301301421150.19223-100000@freno.cs.tu-berlin.de>

Have you tried using a special input Reader (java) or fstream (C++)? When
I need absolute (byte) file position, then I simply count the read bytes in the
stream and expose this information to a special token stream which can
store this in the generated tokens if necessary. This way you shouldn't
have problems with lookahead and similar.

Tom



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From open.zone at virgin.net  Thu Jan 30 06:55:02 2003
From: open.zone at virgin.net (micheal_jor <open.zone@virgin.net>)
Date: Mon Dec 20 16:15:18 2004
Subject: [antlr-interest] Re: Token Stream.
In-Reply-To: <b1b7uv+l194@eGroups.com>
Message-ID: <b1bec6+q06o@eGroups.com>

--- In antlr-interest@yahoogroups.com, "queengiraffe 
<cow_jumped_moon@h...>" <cow_jumped_moon@h...> wrote:
> > Use a loop similar to:
> > 
> > for(;;)
> > {
> >     RefToken tok = lexer.nextToken();
> > 
> >     if ( tok->getType() == Token::EOF_TYPE )
> >         break;
> > 
> >     cout << "Token: " << tok->toString() << endl;
> > }
> > 
> > You should really wrap this in a try...catch. Also see the some 
of 
> > the projects in the examples/cpp directory.
> > 
> > Micheal
> 
> Thank you very much for your help. I'm afraid I'm still a little 
> stuck, the loop you supplied does give me the type for the tokens, 
> however it seems to get stuck right afterwards and will not move 
onto 
> the parser part.

The loop simply sucks out all the tokens that the lexer finds in it's 
input in the order they were seen. You wanted to see the stream of 
tokens for testing purposes if I remember correctly.

If you want the parser to do it's job, you have to pass the lexer to 
it and let it - the parser - suck the tokens from the lexer. The 
parser drives the process by sucking tokens from a supplied 
Lexer/TokenStream as needed. If you have already done that with the 
for-loop, there would be nothing for the parser to recognize!.

> I am trying to apdapt the calc program supplied in examples for 
cpp. 

Calc is a good example to adapt. To adapt Calc's Main.cpp for your 
own Lexer/Parser:
1. Change all occurences of CalcLexer to your lexer's classname.

2. Change all occurences of CalcParser to your parser's classname.

3. Change the starting rule - expr() in this case - on the following 
line to the starting rule for your parser:

		// Parse the input expression
		parser.expr();

4. If you don't have a a TreeParser to test, remove or comment out 
all references to CalcTreeWalker. That would be the following in the 
body of the "if ( t )" statement:

			CalcTreeWalker walker;

			// Traverse the tree created by the parser
			float r = walker.expr(t);
			cout << "value is " << r << endl;

When you compile and run the resulting app, it will take as input 
either stream of chars fed to it's standard input

In the code you posted, the for-loop should be there. Best to start 
with Calc's Main.cpp and follow the steps above.

Micheal



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From open.zone at virgin.net  Thu Jan 30 07:04:30 2003
From: open.zone at virgin.net (micheal_jor <open.zone@virgin.net>)
Date: Mon Dec 20 16:15:18 2004
Subject: [antlr-interest] Re: Token Stream. (Ooops!)
In-Reply-To: <b1bec6+q06o@eGroups.com>
Message-ID: <b1betu+6s9u@eGroups.com>


> When you compile and run the resulting app, it will take as input 
> either stream of chars fed to it's standard input
> 
> In the code you posted, the for-loop should be there. Best to start 
> with Calc's Main.cpp and follow the steps above.
> 
> Micheal

SHOULD BE:

When you compile and run the resulting app, it will take as input a 
stream of chars fed to it's standard input:

e.g. YourParser < test.data

In the code you posted, the for-loop should **NOT** be there. Best to 
start with Calc's Main.cpp and follow the steps above.


Micheal



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From open.zone at virgin.net  Thu Jan 30 07:24:43 2003
From: open.zone at virgin.net (micheal_jor <open.zone@virgin.net>)
Date: Mon Dec 20 16:15:18 2004
Subject: [antlr-interest] It's Official: The busiest month in ANTLRSphere
Message-ID: <b1bg3r+bec1@eGroups.com>

Hi All,

Judging from the stats about the monthly volume of messages on this 
list, this month has become the busiest since the list began - 
Whoopee!!

I put it down to the fact that Santa Parr and some very smart elves 
promised and delivered a whole host of goodies before the New 
Year....well...erm....the Chinese New Year at least  ;-)

With an upcoming website overhaul, a 3.0 version to look forward to 
(and maybe 2.x interim releases on the way) and, an ongoing effort to 
improve on the already substantial documentation and tutorials, who's 
to say next month won't be even busier?

A big "Thank you!" to all the helpful veterans whose answers and 
pointers make this list a real resource. And "Welcome!" to the new 
faces. Good luck too, you are tommorrow's veterans ;-)

Cheers,

Micheal



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From abreneliere at telys.com  Thu Jan 30 08:57:33 2003
From: abreneliere at telys.com (=?iso-8859-1?Q?Anthony_Breneli=E8re?=)
Date: Mon Dec 20 16:15:18 2004
Subject: [antlr-interest] Beginner Question: What are the steps to get a rules's corresponding text in the parser ?
Message-ID: <000c01c2c880$afb72660$cd646464@lavaserver>

I did not see how does tree parsers mecanism work.
 
I made a lexer and a parser, it compiles well and it seems to work.
 
I know to have a token?s corresponding text in the lexer we use the
.getText() method.
 
What are the steps to get a rules?s corresponding text in the parser ?
Is ?buildAST = true? option needed ?
 
Cordially,
Anthony
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20030130/b54e505a/attachment.html
From open.zone at virgin.net  Thu Jan 30 09:32:59 2003
From: open.zone at virgin.net (micheal_jor <open.zone@virgin.net>)
Date: Mon Dec 20 16:15:18 2004
Subject: [antlr-interest] Re: Beginner Question: What are the steps to get a rules's corresponding text in the parser ?
In-Reply-To: <000c01c2c880$afb72660$cd646464@lavaserver>
Message-ID: <b1bnkb+5if4@eGroups.com>


> I did not see how does tree parsers mecanism work.

These should help:
http://www.antlr.org/doc/sor.html#_bb1
http://www.jguru.com/faq/view.jsp?EID=818959

> I made a lexer and a parser, it compiles well and it seems to work.
>  
> I know to have a token's corresponding text in the lexer we use the
> .getText() method.
>  
> What are the steps to get a rules's corresponding text in the 
parser ?
> Is "buildAST = true" option needed ?

"buildAST = true" must be set in the global options section for a 
Parser if you want ANTLR to build an AST for you. If it is false (or 
missing), no AST/tree is built.

You can tell ANTLR waht sort of tree to build by annotating your 
grammar elements appropriately. See:
http://www.antlr.org/doc/trees.html#_bb1

To get an AST node's corresponding text in the Parser/TreeParser, use 
getText() on the AST node object.

AFAIK, there isn't a facility to print the text of a rule, you can 
use a basic TreeParser that walks your tree and calls getText() on 
each node in your desired order if you really want to do this.


Cheers!,

Micheal


PS   The C# codegen's ToStringTree() method does print a tree-like 
representation of your AST. You use that if you can't or don't want 
to use an ASTFrame to visualize your AST. See 'java' sample for 
example of using ASTFrame. Also see:

http://www.antlr.org/doc/sor.html#Examining_Debugging%20ASTs




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From parrt at jguru.com  Thu Jan 30 10:04:59 2003
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:15:18 2004
Subject: [antlr-interest] XML output .
In-Reply-To: <5.1.1.1.2.20030130082037.01eb7b10@wgmail2.gatwick.eur.slb.com>
Message-ID: <5887570A-347D-11D7-A114-000393BB647E@jguru.com>


On Thursday, January 30, 2003, at 12:40 AM, Pete Forman wrote:
> Ter, in that message there was a small patch to BaseAST.java to add a
> getTokenNames() method.  Any chance of adding that to 2.7.3?

It has been added to main line of BaseAST.java :)

Ter
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org
Lecturer in Comp. Sci., University of San Francisco


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From parrt at jguru.com  Thu Jan 30 10:08:11 2003
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:15:18 2004
Subject: [antlr-interest] It's Official: The busiest month in ANTLRSphere
In-Reply-To: <b1bg3r+bec1@eGroups.com>
Message-ID: <CB30E396-347D-11D7-A114-000393BB647E@jguru.com>


On Thursday, January 30, 2003, at 07:24 AM, micheal_jor  
<open.zone@virgin.net> wrote:

> Hi All,
>
> Judging from the stats about the monthly volume of messages on this
> list, this month has become the busiest since the list began -
> Whoopee!!

Yeah!!!

> I put it down to the fact that Santa Parr and some very smart elves
> promised and delivered a whole host of goodies before the New
> Year....well...erm....the Chinese New Year at least  ;-)

You're one of the elves! ;)

> With an upcoming website overhaul, a 3.0 version to look forward to
> (and maybe 2.x interim releases on the way) and, an ongoing effort to
> improve on the already substantial documentation and tutorials, who's
> to say next month won't be even busier?

Yep, everybody that is interested should follow along with the USF  
course...we're on day 2. :)

The first project is a great one for beginners so they can see very  
easily how scanners, parsers, and tree parsers should be built (and you  
only have to write about 150 lines of code!).

http://www.cs.usfca.edu/~parrt/course/652/projects-Spring-2003/xml- 
byhand.html

>
> A big "Thank you!" to all the helpful veterans whose answers and
> pointers make this list a real resource. And "Welcome!" to the new
> faces. Good luck too, you are tommorrow's veterans ;-)

Yeah!


Ter
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org
Lecturer in Comp. Sci., University of San Francisco


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From gudnabrsam at yahoo.com  Thu Jan 30 10:37:42 2003
From: gudnabrsam at yahoo.com (Matt Benson)
Date: Mon Dec 20 16:15:18 2004
Subject: [antlr-interest] It's Official: The busiest month in ANTLRSphere
In-Reply-To: <CB30E396-347D-11D7-A114-000393BB647E@jguru.com>
Message-ID: <20030130183742.14405.qmail@web20419.mail.yahoo.com>

So is monitoring that parent directory the best way to
follow along with the course?

-Matt

--- Terence Parr <parrt@jguru.com> wrote:
> 
> On Thursday, January 30, 2003, at 07:24 AM,
> micheal_jor  
> <open.zone@virgin.net> wrote:
> 
> > Hi All,
> >
> > Judging from the stats about the monthly volume of
> messages on this
> > list, this month has become the busiest since the
> list began -
> > Whoopee!!
> 
> Yeah!!!
> 
> > I put it down to the fact that Santa Parr and some
> very smart elves
> > promised and delivered a whole host of goodies
> before the New
> > Year....well...erm....the Chinese New Year at
> least  ;-)
> 
> You're one of the elves! ;)
> 
> > With an upcoming website overhaul, a 3.0 version
> to look forward to
> > (and maybe 2.x interim releases on the way) and,
> an ongoing effort to
> > improve on the already substantial documentation
> and tutorials, who's
> > to say next month won't be even busier?
> 
> Yep, everybody that is interested should follow
> along with the USF  
> course...we're on day 2. :)
> 
> The first project is a great one for beginners so
> they can see very  
> easily how scanners, parsers, and tree parsers
> should be built (and you  
> only have to write about 150 lines of code!).
> 
>
http://www.cs.usfca.edu/~parrt/course/652/projects-Spring-2003/xml-
> 
> byhand.html
> 
> >
> > A big "Thank you!" to all the helpful veterans
> whose answers and
> > pointers make this list a real resource. And
> "Welcome!" to the new
> > faces. Good luck too, you are tommorrow's veterans
> ;-)
> 
> Yeah!
> 
> 
> Ter
> --
> Co-founder, http://www.jguru.com
> Creator, ANTLR Parser Generator:
> http://www.antlr.org
> Lecturer in Comp. Sci., University of San Francisco
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to
> http://docs.yahoo.com/info/terms/ 
> 
> 


__________________________________________________
Do you Yahoo!?
Yahoo! Mail Plus - Powerful. Affordable. Sign up now.
http://mailplus.yahoo.com

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From parrt at jguru.com  Thu Jan 30 10:43:53 2003
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:15:18 2004
Subject: [antlr-interest] following Ter's USF course
In-Reply-To: <20030130183742.14405.qmail@web20419.mail.yahoo.com>
Message-ID: <C7AE2135-3482-11D7-A114-000393BB647E@jguru.com>


On Thursday, January 30, 2003, at 10:37 AM, Matt Benson wrote:

> So is monitoring that parent directory the best way to
> follow along with the course?

Yeah, i think so, if you watch

http://www.cs.usfca.edu/~parrt/course/652/index.html

then you are sure to see all the notes as they appear :)

I typically write the notes, put them up, then go give the lecture.

You'll see project solutions etc... too.

Ter
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org
Lecturer in Comp. Sci., University of San Francisco


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From kreismeister at yahoo.de  Thu Jan 30 11:21:09 2003
From: kreismeister at yahoo.de (Gunnar Wagenknecht <kreismeister@yahoo.de>)
Date: Mon Dec 20 16:15:18 2004
Subject: [antlr-interest] Re: Keywords with whitespaces
In-Reply-To: <170826586F3BD511910D0200C110AAA805402155@memail03.bco-home.com>
Message-ID: <b1btv5+5ojb@eGroups.com>

--- In antlr-interest@yahoogroups.com, mzukowski@y... wrote:
> So if it doesn't match "begin" "sequence" then it is a parsing 
error. 

not really. It it only matches "begin" or "sequence" it might be an 
identifyer. I want to ensure, that a single "begin" or a 
single "sequence" is not recognized as a keyword but as an identifyer.




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From rmsanjivp at yahoo.com  Thu Jan 30 11:52:57 2003
From: rmsanjivp at yahoo.com (rmsanjivp <rmsanjivp@yahoo.com>)
Date: Mon Dec 20 16:15:18 2004
Subject: [antlr-interest] How to write parenthesized expression grammar??
Message-ID: <b1bvqp+3qph@eGroups.com>

Hi for the following grammar:

topLevel : expr;

expr : mult_expr ( (PLUS | MINUS) mult_expr)*;

mult_expr : pow_expr ((MULT | DIV) pow_expr)*;

pow_expr: primary_expr ( POWER pow_expr)?;

primary_expr: ID | (LPAREN! expr RPAREN!) | NUM
;



If I give input as (1+2)) then it is taken as a legal input and ast 
gives nodes for 1, 2, and +. This is wrong as there is unmatched 
right paranthesis. The problem is happening because of RPAREN being a 
valid look ahead in method pow_expr() in the generated file after 
method primary_expr().

What grammar should I write for paranthesized expression That can 
support (1+2)*(3+4 - (4*5))+4


Please help.

Thanks,
Sanjiv


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From johnm-antlr at non.net  Thu Jan 30 12:12:12 2003
From: johnm-antlr at non.net (John D. Mitchell)
Date: Mon Dec 20 16:15:18 2004
Subject: [antlr-interest] How to write parenthesized expression grammar??
In-Reply-To: <b1bvqp+3qph@eGroups.com>
References: <b1bvqp+3qph@eGroups.com>
Message-ID: <15929.34588.143560.565281@non.non.net>

>>>>> "rmsanjivp" == rmsanjivp <rmsanjivp@yahoo com> <rmsanjivp@yahoo.com> writes:
[...]

> What grammar should I write for paranthesized expression That can support
> (1+2)*(3+4 - (4*5))+4

Check out the Java or C grammars.

Take care,
	John

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From richard.ney at aspect.com  Thu Jan 30 12:21:29 2003
From: richard.ney at aspect.com (Ney, Richard)
Date: Mon Dec 20 16:15:18 2004
Subject: [antlr-interest] How to write parenthesized expression gramma
	r??
Message-ID: <0F9CBE7F81945C4BB7A32BE6E7656EE07228A5@sac1exch3.aspect.com>

I recommend looking at the Java grammar since it contains a real nice set of
rules for expression evaluation and there is the tree grammar to go with it.

-Richard


-----Original Message-----
From: rmsanjivp <rmsanjivp@yahoo.com> [mailto:rmsanjivp@yahoo.com] 
Sent: Thursday, January 30, 2003 11:53 AM
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] How to write parenthesized expression grammar??


Hi for the following grammar:

topLevel : expr;

expr : mult_expr ( (PLUS | MINUS) mult_expr)*;

mult_expr : pow_expr ((MULT | DIV) pow_expr)*;

pow_expr: primary_expr ( POWER pow_expr)?;

primary_expr: ID | (LPAREN! expr RPAREN!) | NUM
;



If I give input as (1+2)) then it is taken as a legal input and ast 
gives nodes for 1, 2, and +. This is wrong as there is unmatched 
right paranthesis. The problem is happening because of RPAREN being a 
valid look ahead in method pow_expr() in the generated file after 
method primary_expr().

What grammar should I write for paranthesized expression That can 
support (1+2)*(3+4 - (4*5))+4


Please help.

Thanks,
Sanjiv


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From parrt at jguru.com  Thu Jan 30 13:53:21 2003
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:15:18 2004
Subject: [antlr-interest] example where backtracking fails
Message-ID: <3F88A468-349D-11D7-A114-000393BB647E@jguru.com>

Folks,

I remember that years ago there was a nice example of a backtracking LL 
parser failing to correctly match the input.  Naturally this must be 
because use of lookahead myopically removes a path in the parse that 
will eventually lead to the correct parse.  Intuitively that sort of 
makes sense, but I can't remember where I saw that grammar.  Since a 
backtracker always tries all possibilities, i was surprised to find an 
example that didn't work (now I conclude it must be because of 
lookahead).

Can anybody help find that thing.  I've spent an hour in google and 
yahoogroups.com and dejanews.com :(

Thanks,
Ter
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org
Lecturer in Comp. Sci., University of San Francisco


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From kchoi_80 at yahoo.com  Thu Jan 30 18:11:50 2003
From: kchoi_80 at yahoo.com (kchoi_80 <kchoi_80@yahoo.com>)
Date: Mon Dec 20 16:15:18 2004
Subject: [antlr-interest] Newbie Question: C# parser for W3C log files
Message-ID: <b1cm16+e1h3@eGroups.com>

Hello!

I have a Java background, so ANTLR and C# are both very new to me...
My problem is that I have to create a simple parser for W3C log files 
using ANTLR and C#, and I don't have a lot of time.

I have gone through a number of tutorials and introductory material, 
but can't seem to find the answer to my questions. My main difficulty 
is with the grammar, which I believe is going to be rather tricky, 
given the typical format of these log files.

If anyone who has had experience with this is willing to point me in 
the right direction; offer tips, suggetions etc...  I would be 
EXTREMELY grateful. I need to have this done by Monday

THANKS!

Karen


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From rmsanjivp at yahoo.com  Thu Jan 30 22:52:56 2003
From: rmsanjivp at yahoo.com (rmsanjivp <rmsanjivp@yahoo.com>)
Date: Mon Dec 20 16:15:18 2004
Subject: [antlr-interest] Re: How to write parenthesized expression gramma r??
In-Reply-To: <0F9CBE7F81945C4BB7A32BE6E7656EE07228A5@sac1exch3.aspect.com>
Message-ID: <b1d6g8+90gj@eGroups.com>

All the grammars say that the primary expressin could be like

primary_expr: NUM | ID | (LPAREN expr RPAREN);

where expr is the top level rule for expression. I am using the same 
for my small grammar. Does that mean LL(k) parser can't handle 
paranthesized expression and doesn't throw exception for input 
(1+2))?? Is it a bug in antlr?

Thanks,
Sanjiv


--- In antlr-interest@yahoogroups.com, "Ney, Richard" 
<richard.ney@a...> wrote:
> I recommend looking at the Java grammar since it contains a real 
nice set of
> rules for expression evaluation and there is the tree grammar to 
go with it.
> 
> -Richard
> 
> 
> -----Original Message-----
> From: rmsanjivp <rmsanjivp@y...> [mailto:rmsanjivp@y...] 
> Sent: Thursday, January 30, 2003 11:53 AM
> To: antlr-interest@yahoogroups.com
> Subject: [antlr-interest] How to write parenthesized expression 
grammar??
> 
> 
> Hi for the following grammar:
> 
> topLevel : expr;
> 
> expr : mult_expr ( (PLUS | MINUS) mult_expr)*;
> 
> mult_expr : pow_expr ((MULT | DIV) pow_expr)*;
> 
> pow_expr: primary_expr ( POWER pow_expr)?;
> 
> primary_expr: ID | (LPAREN! expr RPAREN!) | NUM
> ;
> 
> 
> 
> If I give input as (1+2)) then it is taken as a legal input and 
ast 
> gives nodes for 1, 2, and +. This is wrong as there is unmatched 
> right paranthesis. The problem is happening because of RPAREN 
being a 
> valid look ahead in method pow_expr() in the generated file after 
> method primary_expr().
> 
> What grammar should I write for paranthesized expression That can 
> support (1+2)*(3+4 - (4*5))+4
> 
> 
> Please help.
> 
> Thanks,
> Sanjiv
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to 
http://docs.yahoo.com/info/terms/


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From hrvoje.nezic at envox-lab.hr  Fri Jan 31 02:39:35 2003
From: hrvoje.nezic at envox-lab.hr (Hrvoje Nezic)
Date: Mon Dec 20 16:15:18 2004
Subject: [antlr-interest] Re: How to write parenthesized expression gramma r??
References: <b1d6g8+90gj@eGroups.com>
Message-ID: <00b601c2c915$127f6430$1301a8c0@envox.local.hr>

----- Original Message -----
From: <rmsanjivp@yahoo.com>
To: <antlr-interest@yahoogroups.com>
Sent: Friday, January 31, 2003 7:52 AM
Subject: [antlr-interest] Re: How to write parenthesized expression gramma
r??


> All the grammars say that the primary expressin could be like
>
> primary_expr: NUM | ID | (LPAREN expr RPAREN);
>
> where expr is the top level rule for expression. I am using the same
> for my small grammar. Does that mean LL(k) parser can't handle
> paranthesized expression and doesn't throw exception for input
> (1+2))??

Generally, LL(k) parsers can certainly handle paranthesized
expressions.

> Is it a bug in antlr?
>

In my view this is certainly a bug.

Your program works as expected if you write topLevel like this:

topLevel :  expr EOF ;

I think that ANTLR-generated parsers should implicitly
include an EOF at the end of the starting rule.

The problem with input
    1+2)
is that 1+2 is a valid expression and that RPAREN is among the tokens
that can follow pow_expr. So, the parser matches 1+2 and doesn't
check if the current token is EOF.

The same effect can be seen in case of the input:
    1 + 2 )  1 + 3 + 5 + 6 * 7 / 6 * (3 -1 )
Here the parser also matches 1+2. RPAREN is also among
the tokens that can follow pow_expr, so the parser
happily ends and ignores the rest of input.

Regards,
Hrvoje Nezic

> Thanks,
> Sanjiv



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From dmuller at creativesolutions.com  Fri Jan 31 04:25:11 2003
From: dmuller at creativesolutions.com (Dan Muller)
Date: Mon Dec 20 16:15:18 2004
Subject: [antlr-interest] 2.7.2 C++ library problems
Message-ID: <C3C2C0D32584044FACBFCA005479770206A22003@exchsrv.creativesol.com>

I just downloaded antlr 2.7.2, the zip file version. I'm trying to build it
with VC7, which by itself is not too difficult, starting from the existing
VC6 .dsp file. I've run into a few minor annoyances that were easily fixed.
Once I've gotten further along and verified the changes, I'd be happy to
send a diff if someone will tell me where to send it and how to generate it.
(I have the cygwin tools handy, I'm just not conversant with generate patch
diffs.)

Problems fixed so far:

1. The DSP file was apparently badly out of date. It referenced .cpp files
that no longer existed (the classes were all inline) and was missing one
.cpp file. (Might be missing more, I'll find out soon.)

2. The ANTLR_API macro is used on classes to provide VC++'s
_declspec(import/export) modifier. This causes various warnings when such
classes participate in inheritance trees with non-exported classes, or if
the exported classes contain data members of non-exported classes. After
years of dealing with VC++ DLL construction, I've determined that the best
way to do deal with this is to never use these modifiers on classes.
Instead, I apply them to all public non-inline member functions, and to
protected member functions if it's expected that code outside of the DLL
will inherit from a class. This allows the exported classes to be used much
more flexibly without warnings, and probably also reduces export library
sizes. (The latter's not a big issue for this small library.)

3. The non-standard "extern template instantiation" construct causes
warnings. In one case it wasn't necessary, because the class template in
question is entirely inline. (Note that member functions defined in a class
body are alway inline; at least one of the library authors seemed unsure
about this.)  In the other two cases, I think these were needed due to do
problems with the VC6 std lib, so I augmented the #ifdefs to exclude these
constructs for VC7.

I've gotten the library to compile and link cleanly. Remains to be seen if
it works; I have to come back up to speed on ANTLR, since I haven't used it
in a couple of years.

- Dan Muller


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From open.zone at virgin.net  Fri Jan 31 05:07:58 2003
From: open.zone at virgin.net (micheal_jor <open.zone@virgin.net>)
Date: Mon Dec 20 16:15:18 2004
Subject: [antlr-interest] Re: 2.7.2 C++ library problems
In-Reply-To: <C3C2C0D32584044FACBFCA005479770206A22003@exchsrv.creativesol.com>
Message-ID: <b1dsfe+17n9@eGroups.com>

Hi Dan,

> I just downloaded antlr 2.7.2, the zip file version. I'm trying to 
build it
> with VC7, which by itself is not too difficult, starting from the 
existing
> VC6 .dsp file. I've run into a few minor annoyances that were 
easily fixed.
> Once I've gotten further along and verified the changes, I'd be 
happy to
> send a diff if someone will tell me where to send it and how to 
generate it.
> (I have the cygwin tools handy, I'm just not conversant with 
generate patch
> diffs.)

A /tar/gzip/zip/etc archive with:
1. all changed files
2. all new files
3. instructions for updating a copy of antlr-2.7.2 
would be one useful way of submitting it. 

If your new archive can simply be extracted over a 2.7.2 installation 
(i.e the archived files contained paths relative to a 2.7.2 top-level 
dir), all the better. That's how C# support was added to ANTLR 
initially - grab the C# zipfile, extract into the ANTLR directory 
and.. done!.

Once you have that, just post it to the list and Ric (or one of us) 
would pick it up to test/integrate. Sample build-and-run scripts to 
allow straight forward testing of the changes would be great.

<SNIP>

> I've gotten the library to compile and link cleanly. Remains to be 
seen if
> it works; I have to come back up to speed on ANTLR, since I haven't 
used it
> in a couple of years.

A few words about your experiences with 2.7.2 compared to whatever 
version you were using before would be much appreciated. Perhaps try 
it on projects initially developed with the previous version?

Cheers,

Micheal



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From open.zone at virgin.net  Fri Jan 31 05:46:21 2003
From: open.zone at virgin.net (micheal_jor <open.zone@virgin.net>)
Date: Mon Dec 20 16:15:18 2004
Subject: [antlr-interest] Parsing a TokenStream in piecemeal fashion
Message-ID: <b1dund+an6i@eGroups.com>

Hi,

Any ideas on how to create a Parser instance and use it to parse a 
few tokens at a time from a TokenStream repeatedly. Obviously there 
wouldn't be an EOF condition/character most of the time.

If it's relevant, each invocation of the Parser builds an AST 
fragment that is fed to TreeParser(s).

Micheal



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From dmuller at creativesolutions.com  Fri Jan 31 05:51:09 2003
From: dmuller at creativesolutions.com (dwmuller2003 <dmuller@creativesolutions.com>)
Date: Mon Dec 20 16:15:18 2004
Subject: [antlr-interest] Re: 2.7.2 C++ library problems
In-Reply-To: <b1dsfe+17n9@eGroups.com>
Message-ID: <b1dv0d+qrn2@eGroups.com>

--- In antlr-interest@yahoogroups.com, "micheal_jor <open.zone@v...>" 
<open.zone@v...> wrote:
[instructions on submitting changes elided]

Thanks. As soon as I have some confidence in the changes, I'll 
provide them as suggested.

> > I've gotten the library to compile and link cleanly. Remains to 
be 
> seen if
> > it works; I have to come back up to speed on ANTLR, since I 
haven't 
> used it
> > in a couple of years.
> 
> A few words about your experiences with 2.7.2 compared to whatever 
> version you were using before would be much appreciated. Perhaps 
try 
> it on projects initially developed with the previous version?
> 

Don't know how much detail I'll remember from the previous work, but 
if it comes back to me, I'll oblige. I have to look for the old 
project; that was at home on a Linux box, whereas the new stuff I'm 
starting is at work on Win2k.



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From philippe.lavoie at cactus.ca  Fri Jan 31 08:47:18 2003
From: philippe.lavoie at cactus.ca (Philippe Lavoie)
Date: Mon Dec 20 16:15:18 2004
Subject: [antlr-interest] [BUG] Adding options language = Cpp cause Antlr to return an error
Message-ID: <5F668484EA248D41A93034997332B6D6089DE2@exchange3.cactus.ca>


When I run the following

////////////////
options {
    language="Cpp" // remove this and it works
}

class P extends Parser;

startRule
    :   n:NAME EOF!
        { ; }
    ;

class L extends Lexer;

// one-or-more letters followed by a newline
NAME:   ( 'a'..'z'|'A'..'Z' )+ NEWLINE
    ;

NEWLINE
    :   '\r' '\n'   // DOS
    |   '\n'        // UNIX
    ;
////////////

I get the following output

 E:\projects\morphy>java antlr.Tool basic.g
 ANTLR Parser Generator   Version 2.7.2   1989-2003 jGuru.com
 basic.g:8:5: expecting ASSIGN_RHS, found ':n:NAME EOF!
         { ; }
     ;'
 basic.g:3:1: rule grammar trapped:
 basic.g:3:1: expecting SEMI, found '}'
 Exiting due to errors.

When I remove the "language=Cpp" line, everything works correctly.

I think this is a bug in antlr2.7.2.

Please help, I'd like to have C++ generation working. Thanks.

Phil

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From klaren at cs.utwente.nl  Fri Jan 31 09:08:36 2003
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:15:18 2004
Subject: [antlr-interest] [BUG] Adding options language = Cpp cause Antlr to return an error
In-Reply-To: <5F668484EA248D41A93034997332B6D6089DE2@exchange3.cactus.ca>; from philippe.lavoie@cactus.ca on Fri, Jan 31, 2003 at 11:47:18AM -0500
References: <5F668484EA248D41A93034997332B6D6089DE2@exchange3.cactus.ca>
Message-ID: <20030131180836.E3587@cs.utwente.nl>

Hi,

On Fri, Jan 31, 2003 at 11:47:18AM -0500, Philippe Lavoie wrote:
> ////////////////
> options {
>     language="Cpp" // remove this and it works
> }

Try language="Cpp";

>  ANTLR Parser Generator   Version 2.7.2   1989-2003 jGuru.com
>  basic.g:8:5: expecting ASSIGN_RHS, found ':n:NAME EOF!
>          { ; }
>      ;'
>  basic.g:3:1: rule grammar trapped:
>  basic.g:3:1: expecting SEMI, found '}'
>  Exiting due to errors.

This is standard mumbojumbo from antlr when there's something wrong with a
';' somewhere.

Cheers,

Ric
-- 
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- klaren@cs.utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
  Xander: "Buffy, we need to do something *now*"
  Angel: "We need a distraction."
  Buffy: "Right."
  Angel: "What are you going to do?"
  Buffy: "I'm going to kill them all. That oughtta distract 'em..."


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From klaren at cs.utwente.nl  Fri Jan 31 09:15:47 2003
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:15:19 2004
Subject: [antlr-interest] 2.7.2 C++ library problems
In-Reply-To: <C3C2C0D32584044FACBFCA005479770206A22003@exchsrv.creativesol.com>; from dmuller@creativesolutions.com on Fri, Jan 31, 2003 at 07:25:11AM -0500
References: <C3C2C0D32584044FACBFCA005479770206A22003@exchsrv.creativesol.com>
Message-ID: <20030131181547.F3587@cs.utwente.nl>

Hi,

On Fri, Jan 31, 2003 at 07:25:11AM -0500, Dan Muller wrote:
> I just downloaded antlr 2.7.2, the zip file version. I'm trying to build it
> with VC7, which by itself is not too difficult, starting from the existing
> VC6 .dsp file. I've run into a few minor annoyances that were easily fixed.
> Once I've gotten further along and verified the changes, I'd be happy to
> send a diff if someone will tell me where to send it and how to generate it.
> (I have the cygwin tools handy, I'm just not conversant with generate patch
> diffs.)

Thomas Dudziak (tomdz@cs.tu-berlin.de) is also working on this. Maybe you
guys could coordinate efforts?

Just sent the stuff to me (diff or complete tarball/zipfile), when I get
back from my trip to the states I'll incorporate it and put up a devel
snapshot.

Cheers,

Ric
-- 
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- klaren@cs.utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
  Wo das Chaos auf die Ordnung trifft, gewinnt meist das Chaos, weil es
  besser organisiert ist. --- Friedrich Nietzsche


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From jbb at acm.org  Fri Jan 31 09:23:57 2003
From: jbb at acm.org (jbb@acm.org)
Date: Mon Dec 20 16:15:19 2004
Subject: [antlr-interest] [BUG] Adding options language = Cpp cause Antlr to return an error
In-Reply-To: <5F668484EA248D41A93034997332B6D6089DE2@exchange3.cactus.ca>
	(philippe.lavoie@cactus.ca)
References: <5F668484EA248D41A93034997332B6D6089DE2@exchange3.cactus.ca>
Message-ID: <E18eetR-0001h1-00@gecko.home.org>

Mr. Lavoie :-

This message from Antlr

 basic.g:3:1: expecting SEMI, found '}'

means that the tool parsed your file basic.g upto line number three
and in character position one it found a '}' when it was expected to
find a SEMI (e.g. ';').

What does the above interpretation of that last Antlr error message
suggest to you?

Did you try this?

options {
    language="Cpp";
}

Hope this helps...

	-jbb

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From cormier at u-picardie.fr  Fri Jan 31 10:07:16 2003
From: cormier at u-picardie.fr (CC)
Date: Mon Dec 20 16:15:19 2004
Subject: [antlr-interest] xmlSerialize
Message-ID: <5.2.0.9.0.20030131190537.00a9c7a0@mailx.u-picardie.fr>

Hi,
With antlr.jar, I have:

Sources\DefOntoAntlr\Main.java:48: cannot resolve symbol
symbol  : method xmlSerialize (java.io.Writer)
location: interface antlr.collections.AST
	  ast.xmlSerialize(w);
              ^
1 error
Why ?
Thanks a lot for help.


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From cormier at u-picardie.fr  Fri Jan 31 10:13:01 2003
From: cormier at u-picardie.fr (CC)
Date: Mon Dec 20 16:15:19 2004
Subject: [antlr-interest] xmlSerialize more code
Message-ID: <5.2.0.9.0.20030131191201.00aa76e8@mailx.u-picardie.fr>

Hi,
Main.java
...
	  Writer w = new OutputStreamWriter(System.out);
	  ast.xmlSerialize(w);
	  w.write("\n");
	  w.flush();
...

With antlr.jar, I have:

Sources\DefOntoAntlr\Main.java:48: cannot resolve symbol
symbol  : method xmlSerialize (java.io.Writer)
location: interface antlr.collections.AST
	  ast.xmlSerialize(w);
              ^
1 error
Why ?
Thanks a lot for help. 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From cormier at u-picardie.fr  Fri Jan 31 10:23:12 2003
From: cormier at u-picardie.fr (CC)
Date: Mon Dec 20 16:15:19 2004
Subject: [antlr-interest] xmlSerialize more code witn 2.7.2
Message-ID: <5.2.0.9.0.20030131192250.00a95de8@mailx.u-picardie.fr>

Hi,
Main.java
...
	  Writer w = new OutputStreamWriter(System.out);
	  ast.xmlSerialize(w);
	  w.write("\n");
	  w.flush();
...

With antlr.jar, I have:

Sources\DefOntoAntlr\Main.java:48: cannot resolve symbol
symbol  : method xmlSerialize (java.io.Writer)
location: interface antlr.collections.AST
	  ast.xmlSerialize(w);
               ^
1 error
Why ?
Thanks a lot for help.




Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From rmsanjivp at yahoo.com  Fri Jan 31 18:28:35 2003
From: rmsanjivp at yahoo.com (rmsanjivp <rmsanjivp@yahoo.com>)
Date: Mon Dec 20 16:15:19 2004
Subject: [antlr-interest] compilation problem on unix for 2..7.1
Message-ID: <b1fbcj+s2dq@eGroups.com>

Hi!

Does anyone know why I get the error like

prototype needed for function exit 

when I try to build antlr library on sun with forte 6.2 compiler?

Thanks,
sanjiv


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

