<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [antlr-interest] Problem with carriage returns
	in	c#	stringtemplate
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:antlr-interest%40antlr.org?Subject=%5Bantlr-interest%5D%20Problem%20with%20carriage%20returns%0A%09in%09c%23%09stringtemplate&In-Reply-To=MPEMLILMNEOKCPPBGEMKCEIGCIAA.luisl%40scarab.co.za">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="014094.html">
   <LINK REL="Next"  HREF="014097.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[antlr-interest] Problem with carriage returns
	in	c#	stringtemplate</H1>
    <B>Tech</B> 
    <A HREF="mailto:antlr-interest%40antlr.org?Subject=%5Bantlr-interest%5D%20Problem%20with%20carriage%20returns%0A%09in%09c%23%09stringtemplate&In-Reply-To=MPEMLILMNEOKCPPBGEMKCEIGCIAA.luisl%40scarab.co.za"
       TITLE="[antlr-interest] Problem with carriage returns
	in	c#	stringtemplate">tech at swingkid.fsnet.co.uk
       </A><BR>
    <I>Mon Oct 24 23:39:08 PDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="014094.html">[antlr-interest] Problem with carriage returns in
	c#	stringtemplate
</A></li>
        <LI>Next message: <A HREF="014097.html">[antlr-interest] Problem with carriage returns
	in	c#	stringtemplate
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14095">[ date ]</a>
              <a href="thread.html#14095">[ thread ]</a>
              <a href="subject.html#14095">[ subject ]</a>
              <a href="author.html#14095">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Thanks Luis,
                I've just tried downloading the patch, but the link is 
broken. Thanks for the explanation though, it's always good to know 
about these kinds of subtle differences.

Mark

Luis Leal wrote:

&gt;<i>Hi Mark,
</I>&gt;<i>
</I>&gt;<i>Some investigation has revealed the following:
</I>&gt;<i>
</I>&gt;<i>1. When you use a string literal the template actually contains a carriage
</I>&gt;<i>return and a new line
</I>&gt;<i>2. When you read the template from an embedded resource the template
</I>&gt;<i>contains &quot;\r\n&quot; instead of a carriage return and a new line
</I>&gt;<i>
</I>&gt;<i>The second case sends the lexer down a path where \r is not defined as a
</I>&gt;<i>valid escape character. I've just uploaded a new C# version to
</I>&gt;<i>www.stringtemplate.org which fixes this problem.
</I>&gt;<i>
</I>&gt;<i>Regards
</I>&gt;<i>
</I>&gt;<i>Luis
</I>&gt;<i>
</I>&gt;<i>-----Original Message-----
</I>&gt;<i>From: Tech [mailto:<A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">tech at swingkid.fsnet.co.uk</A>]
</I>&gt;<i>Sent: 23 October 2005 11:32 PM
</I>&gt;<i>To: <A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">antlr-interest at antlr.org</A>
</I>&gt;<i>Subject: [antlr-interest] Problem with carriage returns in c#
</I>&gt;<i>stringtemplate
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>Thanks for your reply Luis.
</I>&gt;<i>
</I>&gt;<i>No, this is not my whole template group, but I was trying to reduce the
</I>&gt;<i>problem. I agree with you that your code works. However, if you copy the
</I>&gt;<i>string into a text file (removing the escape characters from the
</I>&gt;<i>quotation marks) and include it as an embedded resource, it doesn't work!
</I>&gt;<i>
</I>&gt;<i>     //StringReader sr = new StringReader(&quot;group TestOutput;
</I>&gt;<i>    program(statements)::= &lt;&lt; class Wrapper { &lt;statements;
</I>&gt;<i>    separator=\&quot;\r\n\&quot;&gt; } &gt;&gt;&quot;);
</I>&gt;<i>     Stream s =
</I>&gt;<i>    typeof(Class1).Assembly.GetManifestResourceStream(&quot;Project1.Test.stg&quot;);
</I>&gt;<i>    StreamReader sr = new StreamReader(s);
</I>&gt;<i>    StringTemplateGroup stg = new StringTemplateGroup(sr,
</I>&gt;<i>    typeof(antlr.stringtemplate.language.AngleBracketTemplateLexer));
</I>&gt;<i>
</I>&gt;<i>where Test.stg contains
</I>&gt;<i>
</I>&gt;<i>    group TestOutput; program(statements)::= &lt;&lt; class Wrapper {
</I>&gt;<i>    &lt;statements; separator=&quot;\r\n&quot;&gt; } &gt;&gt;
</I>&gt;<i>
</I>&gt;<i>I have tried copying the StreamReader contents into a string before
</I>&gt;<i>constructing the StringTemplateGroup, but that doesn't help. It seems
</I>&gt;<i>more like a .Net issue than a StringTemplate issue, but I can't figure
</I>&gt;<i>it out. I wonder if it is an encoding thing?
</I>&gt;<i>
</I>&gt;<i>Always curious,
</I>&gt;<i>
</I>&gt;<i>Mark
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>--
</I>&gt;<i>No virus found in this outgoing message.
</I>&gt;<i>Checked by AVG Free Edition.
</I>&gt;<i>Version: 7.1.361 / Virus Database: 267.12.4/146 - Release Date: 21/10/2005
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>  
</I>&gt;<i>
</I>

-- 
No virus found in this outgoing message.
Checked by AVG Free Edition.
Version: 7.1.361 / Virus Database: 267.12.5/147 - Release Date: 24/10/2005


</PRE>






<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="014094.html">[antlr-interest] Problem with carriage returns in
	c#	stringtemplate
</A></li>
	<LI>Next message: <A HREF="014097.html">[antlr-interest] Problem with carriage returns
	in	c#	stringtemplate
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14095">[ date ]</a>
              <a href="thread.html#14095">[ thread ]</a>
              <a href="subject.html#14095">[ subject ]</a>
              <a href="author.html#14095">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.antlr.org/mailman/listinfo/antlr-interest">More information about the antlr-interest
mailing list</a><br>
</body></html>
