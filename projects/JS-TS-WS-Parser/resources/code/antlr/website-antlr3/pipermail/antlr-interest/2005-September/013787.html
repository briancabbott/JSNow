<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [antlr-interest] Java code generator memory optimization
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:antlr-interest%40antlr.org?Subject=%5Bantlr-interest%5D%20Java%20code%20generator%20memory%20optimization&In-Reply-To=80265E8E-F66B-4D21-A2D3-E0CB9519235C%40cs.usfca.edu">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="013783.html">
   <LINK REL="Next"  HREF="013790.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[antlr-interest] Java code generator memory optimization</H1>
    <B>Akhilesh Mritunjai</B> 
    <A HREF="mailto:antlr-interest%40antlr.org?Subject=%5Bantlr-interest%5D%20Java%20code%20generator%20memory%20optimization&In-Reply-To=80265E8E-F66B-4D21-A2D3-E0CB9519235C%40cs.usfca.edu"
       TITLE="[antlr-interest] Java code generator memory optimization">virtualaspirin at yahoo.com
       </A><BR>
    <I>Sun Sep 25 08:25:10 PDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="013783.html">[antlr-interest] Java code generator memory optimization
</A></li>
        <LI>Next message: <A HREF="013790.html">[antlr-interest] Java code generator memory optimization
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13787">[ date ]</a>
              <a href="thread.html#13787">[ thread ]</a>
              <a href="subject.html#13787">[ subject ]</a>
              <a href="author.html#13787">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Terence

My comments inline:

--- Terence Parr &lt;<A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">parrt at cs.usfca.edu</A>&gt; wrote:
&gt;<i> In the ANTLR v3 version, I have tokens point at the
</I>&gt;<i> start/stop index  
</I>&gt;<i> into a single char buffer that has the entire input
</I>&gt;<i> text (well, that  
</I>&gt;<i> is the default anyway).  So, you have a duplicates
</I>&gt;<i> still in the sense  
</I>&gt;<i> that all references to identifier &quot;salary&quot; are not
</I>&gt;<i> shared, but at  
</I>&gt;<i> least there are not multiple copies as there are now
</I>&gt;<i> by default. :)   
</I>
afaik, thats how the current one works too. Lexer
makes strings from chars it gets from input stream. So
for every identifier in stream you get entirely
different string objects with separate char arrays. Of
course, they won't be duplicated more than they occur
in input stream... and there is no sharing at all and
won't be with that approach in v3.0

&gt;<i> If your file is 1M, it's probably pretty big and
</I>&gt;<i> that's just not  
</I>&gt;<i> enough memory to worry about this days.  Wow, I
</I>
Um... The certification for mine will happen on an
input file set around 37 MB in size, and then some
people out there must be doing continuous stream
parsing.

The current suggestion comes from my observation of
processing an 8MB automatically generated sadist
pathological example made by me for which the parse
tree contains total of 5.7M nodes... 40% are
identifier subtree nodes and every one has a string
object. I intern'ed the node texts and, bam!!, it
saved me 150MB of memory  :)

Uh, I dunno how to put it, but somehow Terence, you
seem to underestimate the reach, potential and
influence of all the kickass tools you've made. I did
a lot of research and will have a solid testimony once
I complete this thing... one being making difference
between product ending in success or a sad failure.

&gt;<i> remember when my 16k  
</I>&gt;<i> machine was great! ;)  Anybody remember which
</I>&gt;<i> processor was 1.077 mhz  
</I>
God I'm young... my first was a 640k, 16 something MHz
on which I learnt BASIC and MSDOS 3.3 &amp; 5.0 more than
a decade back :)

- Akhilesh


__________________________________________________
Do You Yahoo!?
Tired of spam?  Yahoo! Mail has the best spam protection around 
<A HREF="http://mail.yahoo.com">http://mail.yahoo.com</A> 
</PRE>




<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="013783.html">[antlr-interest] Java code generator memory optimization
</A></li>
	<LI>Next message: <A HREF="013790.html">[antlr-interest] Java code generator memory optimization
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13787">[ date ]</a>
              <a href="thread.html#13787">[ thread ]</a>
              <a href="subject.html#13787">[ subject ]</a>
              <a href="author.html#13787">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.antlr.org/mailman/listinfo/antlr-interest">More information about the antlr-interest
mailing list</a><br>
</body></html>
