<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [antlr-interest] ANTLR 2.7.6 C# race condition fix
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:antlr-interest%40antlr.org?Subject=%5Bantlr-interest%5D%20ANTLR%202.7.6%20C%23%20race%20condition%20fix&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="015545.html">
   <LINK REL="Next"  HREF="015547.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[antlr-interest] ANTLR 2.7.6 C# race condition fix</H1>
    <B>Philip Heede</B> 
    <A HREF="mailto:antlr-interest%40antlr.org?Subject=%5Bantlr-interest%5D%20ANTLR%202.7.6%20C%23%20race%20condition%20fix&In-Reply-To="
       TITLE="[antlr-interest] ANTLR 2.7.6 C# race condition fix">philip at catinet.dk
       </A><BR>
    <I>Wed Mar  1 04:10:17 PST 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="015545.html">[antlr-interest] Ignore\recover from errors
</A></li>
        <LI>Next message: <A HREF="015547.html">[antlr-interest] ANTLR 2.7.6 C# race condition fix
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15546">[ date ]</a>
              <a href="thread.html#15546">[ thread ]</a>
              <a href="subject.html#15546">[ subject ]</a>
              <a href="author.html#15546">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi all,
 
We are using ANTLR in an ASP.NET (C#) application with great success.
However, we are experiencing some random crashes in situations with high
memory usage, where the stack trace indicates that the crash originated
in

antlr.ASTFactory.makeASTRoot(ASTPair currentAST, AST root)
 
We've been tracking the problem for some time now without any ideas to
what might be causing it besides the fact that the servers are being
stressed when the problem occurs. The general consensus so far has been,
that the problem is because of the high memory usage rather than ANTLR
(even though the exception originates here).

However, we are at v2.7.5 and I've just noticed the following entry in
the 2.7.6 changelog regarding C#-specific changes:
 
***BREAKING CHANGE*** ASTPair object pool had a race condition in
multi-threaded environments. ASTPair is now a struct.

I wanted to hear if anyone could give some more information on this fix
before I get my hopes up. Does our problem sound like it might be caused
by the race condition mentioned in this fix? We'll be testing 2.7.6
shortly, but I hope to hear any comments you might have. Thanks! 
 
-- 
Sincerely
Philip

</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="015545.html">[antlr-interest] Ignore\recover from errors
</A></li>
	<LI>Next message: <A HREF="015547.html">[antlr-interest] ANTLR 2.7.6 C# race condition fix
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15546">[ date ]</a>
              <a href="thread.html#15546">[ thread ]</a>
              <a href="subject.html#15546">[ subject ]</a>
              <a href="author.html#15546">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.antlr.org/mailman/listinfo/antlr-interest">More information about the antlr-interest
mailing list</a><br>
</body></html>
