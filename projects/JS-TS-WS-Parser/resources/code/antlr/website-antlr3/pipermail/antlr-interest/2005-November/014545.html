<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [antlr-interest] Henry Butowsky wrote: &gt;&gt; Hi Guys,
	&gt;&gt;   Im using a vary basic C grammer for a scientific application
	&gt;&gt;   I want to be able to use &quot;hyper-slabs&quot;
	on the left and right hand side &gt;&gt;   of an assignment statement &gt;&gt; 
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:antlr-interest%40antlr.org?Subject=%5Bantlr-interest%5D%20Henry%20Butowsky%20wrote%3A%20%3E%3E%20Hi%20Guys%2C%0A%09%3E%3E%20%20%20Im%20using%20a%20vary%20basic%20C%20grammer%20for%20a%20scientific%20application%0A%09%3E%3E%20%20%20I%20want%20to%20be%20able%20to%20use%20%22hyper-slabs%22%0A%09on%20the%20left%20and%20right%20hand%20side%20%3E%3E%20%20%20of%20an%20assignment%20statement%20%3E%3E%20&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="014543.html">
   <LINK REL="Next"  HREF="014546.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[antlr-interest] Henry Butowsky wrote: &gt;&gt; Hi Guys,
	&gt;&gt;   Im using a vary basic C grammer for a scientific application
	&gt;&gt;   I want to be able to use &quot;hyper-slabs&quot;
	on the left and right hand side &gt;&gt;   of an assignment statement &gt;&gt; </H1>
    <B>Henry Butowsky</B> 
    <A HREF="mailto:antlr-interest%40antlr.org?Subject=%5Bantlr-interest%5D%20Henry%20Butowsky%20wrote%3A%20%3E%3E%20Hi%20Guys%2C%0A%09%3E%3E%20%20%20Im%20using%20a%20vary%20basic%20C%20grammer%20for%20a%20scientific%20application%0A%09%3E%3E%20%20%20I%20want%20to%20be%20able%20to%20use%20%22hyper-slabs%22%0A%09on%20the%20left%20and%20right%20hand%20side%20%3E%3E%20%20%20of%20an%20assignment%20statement%20%3E%3E%20&In-Reply-To="
       TITLE="[antlr-interest] Henry Butowsky wrote: &gt;&gt; Hi Guys,
	&gt;&gt;   Im using a vary basic C grammer for a scientific application
	&gt;&gt;   I want to be able to use &quot;hyper-slabs&quot;
	on the left and right hand side &gt;&gt;   of an assignment statement &gt;&gt; ">henryb at ntlworld.com
       </A><BR>
    <I>Tue Nov 29 09:00:46 PST 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="014543.html">[antlr-interest] hyperslabs
</A></li>
        <LI>Next message: <A HREF="014546.html">[antlr-interest] Re: hyperslabs
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14545">[ date ]</a>
              <a href="thread.html#14545">[ thread ]</a>
              <a href="subject.html#14545">[ subject ]</a>
              <a href="author.html#14545">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE> &gt;&gt;   var1(expr,expr,expr)   
	&gt;&gt; 
	&gt;&gt;    The relevent grammar is:
	&gt;&gt;
 
	&gt;&gt; assign_statement:
	&gt;&gt;         hyper_slb  ASSIGN^ expr SEMI!
	&gt;&gt; 
     ;
	&gt;&gt; 
	&gt;&gt; 
	&gt;&gt; hyper_slb: VAR_ID (arg_list)?
	&gt;&gt;      ;
	&gt;&gt; 

 &gt;&gt; arg_list
	&gt;&gt;   : LPAREN! expr ( COMMA! expr )* RPAREN!
	&gt;&gt;    { #arg_list
 = #( [ARG_LIST, &quot;arg_list&quot;], #arg_list ); }
	&gt;&gt;   ;
	&gt;&gt;           
	&gt;&gt;
      
	&gt;&gt; so for say  temperaure(2,3,10*2)=100;
	&gt;&gt; I want to get the tree
 to be something like
	&gt;&gt; 
	&gt;&gt; ( = temperature ( arg_list (20),(3), (*(10,2)
 ) )  100)
	&gt;&gt; 
	&gt;&gt; At the momnet Im only getting only the first argument
 in the tree.
	&gt;&gt; Any Ideas ?
	
	
	Yeah, what's your tree grammar?
	

 Also, it would be good to print out the the tree you actually are
	producing
 using toStringList (or is it toStringTree)?
	
	Hyperslabs
Content-Type: multipart/mixed;
 boundary=&quot;------------080905080509040709030407&quot;

This is a multi-part message in MIME format.
--------------080905080509040709030407
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit

Henry Butowsky wrote:

 &gt;&gt; Hi Guys,
 &gt;&gt;   Im using a vary basic C grammer for a scientific application
 &gt;&gt;   I want to be able to use &quot;hyper-slabs&quot; on the left and right hand side
 &gt;&gt;   of an assignment statement
 &gt;&gt;
 &gt;&gt;   var1(expr,expr,expr)
 &gt;&gt;
 &gt;&gt;    The relevent grammar is:
 &gt;&gt;
 &gt;&gt; assign_statement:
 &gt;&gt;         hyper_slb  ASSIGN^ expr SEMI!
 &gt;&gt;      ;
 &gt;&gt;
 &gt;&gt;
 &gt;&gt; hyper_slb: VAR_ID (arg_list)?
 &gt;&gt;      ;
 &gt;&gt;
 &gt;&gt; arg_list
 &gt;&gt;   : LPAREN! expr ( COMMA! expr )* RPAREN!
 &gt;&gt;    { #arg_list = #( [ARG_LIST, &quot;arg_list&quot;], #arg_list ); }
 &gt;&gt;   ;
 &gt;&gt;
 &gt;&gt;
 &gt;&gt; so for say  temperaure(2,3,10*2)=100;
 &gt;&gt; I want to get the tree to be something like
 &gt;&gt;
 &gt;&gt; ( = temperature ( arg_list (20),(3), (*(10,2) ) )  100)
 &gt;&gt;
 &gt;&gt; At the momnet Im only getting only the first argument in the tree.
 &gt;&gt; Any Ideas ?


Yeah, what's your tree grammar?

Also, it would be good to print out the the tree you actually are
producing using toStringList (or is it toStringTree)?

Monty
----------------------------------------------------------------------

Hi Monty

With the following script

a=10.12-20-30-40;
b=-20*-100.987;
c=-100e2/20;
d=10S+20b;
e=1.25f+1e2f+1f;
f=1.25d+1e2+1d;
g=.12;
h=.2e4f+.2e-1f+.2d;
i=2;
j(10)=1-19;

toStringTree() produces

( = a ( - ( - ( - 10.12 20 ) 30 ) 40 ) )
  ( = b ( * ( - 20 ) ( - 100.987 ) ) )
  ( = c ( / ( - 100e2 ) 20 ) )
  ( = d ( + 10S 20b ) )
  ( = e ( + ( + 1.25f 1e2f ) 1f ) )
  ( = f ( + ( + 1.25d 1e2 ) 1d ) )
  ( = g .12 )
  ( = h ( + ( + .2e4f .2e-1f ) .2d ) )
  ( = i 2 )
  ( = j ( arg_list 10 ) ( - 1 19 ) )

---------------------
Parser barfs when j has more than one argument

Attached is my tree grammer

Regards Henry





--------------080905080509040709030407
Content-Type: text/plain;
 name=&quot;tree.g&quot;
Content-Transfer-Encoding: 7bit
Content-Disposition: inline;
 filename=&quot;tree.g&quot;


class CalcTreeWalker extends TreeParser;



assign 
{
  double r;
}
   :#(ASSIGN  v:VAR_ID  r=out ) {
       Symbol *sp;
       const char* var;                  
       var =v-&gt;getText().c_str();

 	   if( (sp=lookup(var)) ) {
		 sp-&gt;type=1;
		 sp-&gt;u.val=r;
	   }else{
		 sp=install(var,1,r);
	   }
            
      }
   ;

out returns [double r]
{
	double a,b;
	r=0;
}  
    // arithmetic operators 

    :  (#(PLUS out out)) =&gt;  #( PLUS  a=out b=out)	{r = a+b;}
	|  (#(MINUS out out)) =&gt; #( MINUS a=out b=out)	{r = a-b;}
	|	#(TIMES a=out b=out)	{r = a*b;}
	|	#(DIVIDE a=out b=out)	{r = a/b;}
	|	#(MOD a=out b=out)	    {r = fmod(a, fabs(b) );}
    |   #(CARET a=out b=out)    {r= pow(a,b); }

    //unary Operators
    |   #(LNOT a=out )        { r=!a; }
	|   #(MINUS a=out )       {r=-a;}
    |   #(PLUS a=out )        {r=+a;}
    
    // math functions 
   |  #(m:FUNC a=out)         { Symbol *sp;
                                const char *var;
                                var =m-&gt;getText().c_str();
                                if( (sp=lookup(var)) ) {
                                    r=(sp-&gt;u.ptr)(a);
                                }else{
                cout &lt;&lt; &quot;Function  &quot; &lt;&lt; m-&gt;getText() &lt;&lt; &quot; not found&quot; &lt;&lt; endl;
                exit(1);
                           }
                               }
                                

    // Logical Operators
    | #(LAND a=out b=out)   {r = (a &amp;&amp; b); }
    | #(LOR  a=out b=out)   { r = (a || b);   }

    // Comparison Operators
    | #(LTHAN  a=out b=out) { r = (a &lt; b);   }
    | #(GTHAN  a=out b=out) { r = (a &gt;  b);   }
    | #(GEQ  a=out b=out)   { r = (a &gt;= b);   }
    | #(LEQ  a=out b=out)   { r = (a &lt;= b);   }
    | #(EQ  a=out b=out)    { r = (a == b);   }
    | #(NEQ  a=out b=out)   { r = (a != b);   }


    // Naked numbers
	|	c:BYTE			{ 
                         r = atof(c-&gt;getText().c_str());
                         //cout &lt;&lt; &quot;lexing byte=&quot; &lt;&lt; r&lt;&lt; endl;           
                        }
	|	s:SHORT			{r = atof(s-&gt;getText().c_str());
                         //cout &lt;&lt; &quot;lexing short=&quot; &lt;&lt; r&lt;&lt; endl;           
                        }
	|	i:INT			{r = atof(i-&gt;getText().c_str());
                         //cout &lt;&lt; &quot;lexing int=&quot; &lt;&lt; r&lt;&lt; endl;           
                        }
    |   f:FLOAT        { r=strtod(f-&gt;getText().c_str(),(char**)NULL); 
                        //cout &lt;&lt; &quot;lexing float=&quot; &lt;&lt; r&lt;&lt; endl;           
                        }
    |   d:DOUBLE        { r=strtod(d-&gt;getText().c_str(),(char**)NULL);
                        //cout &lt;&lt; &quot;lexing double=&quot; &lt;&lt; r&lt;&lt; endl;           
                        }

    // variables &amp; attributes
	|   v:VAR_ID       { Symbol *sp;
                         const char *var;
                         var =v-&gt;getText().c_str();
                           if( (sp=lookup(var)) ) {
                             r=sp-&gt;u.val;
                           }else{
                cout &lt;&lt; &quot;var &quot; &lt;&lt; v-&gt;getText() &lt;&lt; &quot; not found&quot; &lt;&lt; endl;
                exit(1);
                           }
                       }

    |   t:ATT_ID       { Symbol *sp;
                         const char *var;
                         var =t-&gt;getText().c_str();
                           if( (sp=lookup(var)) ) {
                             r=sp-&gt;u.val;
                           }else{
                cout &lt;&lt; &quot;Attribute &quot; &lt;&lt; v-&gt;getText() &lt;&lt; &quot; not found&quot; &lt;&lt; endl;
                exit(1);
                           }
                       }
    ;








--------------080905080509040709030407--

</PRE>









<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="014543.html">[antlr-interest] hyperslabs
</A></li>
	<LI>Next message: <A HREF="014546.html">[antlr-interest] Re: hyperslabs
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14545">[ date ]</a>
              <a href="thread.html#14545">[ thread ]</a>
              <a href="subject.html#14545">[ subject ]</a>
              <a href="author.html#14545">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.antlr.org/mailman/listinfo/antlr-interest">More information about the antlr-interest
mailing list</a><br>
</body></html>
