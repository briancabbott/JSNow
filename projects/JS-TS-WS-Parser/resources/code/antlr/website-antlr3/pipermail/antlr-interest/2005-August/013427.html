<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [antlr-interest] Transformation to new grammar
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:antlr-interest%40antlr.org?Subject=%5Bantlr-interest%5D%20Transformation%20to%20new%20grammar&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="013425.html">
   <LINK REL="Next"  HREF="013428.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[antlr-interest] Transformation to new grammar</H1>
    <B>Monty Zukowski</B> 
    <A HREF="mailto:antlr-interest%40antlr.org?Subject=%5Bantlr-interest%5D%20Transformation%20to%20new%20grammar&In-Reply-To="
       TITLE="[antlr-interest] Transformation to new grammar">monty at codetransform.com
       </A><BR>
    <I>Mon Aug 15 11:41:53 PDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="013425.html">[antlr-interest] Need help with lexer rules
</A></li>
        <LI>Next message: <A HREF="013428.html">[antlr-interest] Need help with lexer rules
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13427">[ date ]</a>
              <a href="thread.html#13427">[ thread ]</a>
              <a href="subject.html#13427">[ subject ]</a>
              <a href="author.html#13427">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Aug 15, 2005, at 5:03 AM, Barry McGillin wrote:


&gt;<i> I have a grammar for one version of SQL that I'm mapping into  
</I>&gt;<i> Oracle SQL.
</I>&gt;<i> We can walk the trees and generate what we need to however,  I have  
</I>&gt;<i> a full version of the target grammar available.  Is is possible to  
</I>&gt;<i> map from one grammar to another, so that it is possible to verify  
</I>&gt;<i> that tree n is correct wrt the target grammar as shown below.
</I>&gt;<i>
</I>&gt;<i> |Source Grammar |  tree 1 | ... | tree n | Target grammar|
</I>&gt;<i> |    o          |    o    |     |    o   |       o       |
</I>&gt;<i> |   / \         |   / \   |     |   / \  |      / \      |
</I>&gt;<i> |  o   o        |  o   o  |     |  o   o |     o   o     |
</I>&gt;<i> |     / \       | /     \ |     | / \    |    / \        |
</I>&gt;<i> |    o   o      |o       o|     |o   o   |   o   o       |
</I>&gt;<i>
</I>&gt;<i> Today, we can walk the source tree and make transformations to it  
</I>&gt;<i> to move us from tree 1 towards tree n, but when do we know we're  
</I>&gt;<i> finished and correct? I'm not looking for a specific solution, but  
</I>&gt;<i> rather some ideas about how this can be done efficiently if at all :-)
</I>&gt;<i>
</I>

To test the transformations done by a certain pass, I would run the  
result tree through a basic tree grammar with no actions in it, just  
to make sure it was still grammatically valid.  I structured all of  
my transformations to conform to a &quot;super&quot; grammar which was really  
the union of the input tree grammar and the output tree grammar.   
That's impossible to do with a regular grammar, but with a tree  
grammar it is quite convenient.  All you have to do is make sure that  
each language uses it's own unique token types.

As far as knowing you are finished and correct, write tests!  For  
each mini translation you do, write a complete example program and  
what you expect upon output.  Write a test program to do your  
transformation and diff the result of that against what you expect.   
It's really handy and important to do, because it's so easy to change  
something in one place and see the effect of it somewhere else when  
you are dealing with grammars.

By the way, I'm an ANTLR consultant and could give much more in depth  
advice if you hire me.  Also come to the ANTLR conference this year.   
I'll be there, as will many other experts, and we just sit around and  
complain until someone smarter comes up with a good solution :)

Monty



</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="013425.html">[antlr-interest] Need help with lexer rules
</A></li>
	<LI>Next message: <A HREF="013428.html">[antlr-interest] Need help with lexer rules
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13427">[ date ]</a>
              <a href="thread.html#13427">[ thread ]</a>
              <a href="subject.html#13427">[ subject ]</a>
              <a href="author.html#13427">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.antlr.org/mailman/listinfo/antlr-interest">More information about the antlr-interest
mailing list</a><br>
</body></html>
