<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [antlr-interest] regarding substring error
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20regarding%20substring%20error&In-Reply-To=%3C1FE9A296676737419A8912A6FD22AE1D028DA13AEF%40alvxmbw04.prod.quest.corp%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="039553.html">
   <LINK REL="Next"  HREF="039558.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[antlr-interest] regarding substring error</H1>
    <B>Gordon Tyler</B> 
    <A HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20regarding%20substring%20error&In-Reply-To=%3C1FE9A296676737419A8912A6FD22AE1D028DA13AEF%40alvxmbw04.prod.quest.corp%3E"
       TITLE="[antlr-interest] regarding substring error">Gordon.Tyler at quest.com
       </A><BR>
    <I>Mon Aug 23 13:35:11 PDT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="039553.html">[antlr-interest] regarding substring error
</A></li>
        <LI>Next message: <A HREF="039558.html">[antlr-interest] Lexer Rules How to
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#39555">[ date ]</a>
              <a href="thread.html#39555">[ thread ]</a>
              <a href="subject.html#39555">[ subject ]</a>
              <a href="author.html#39555">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Your definition of STRING assumes that ANTLR is generating Java code. You will need to replace the code inside the {} with the appropriate C code.

-----Original Message-----
From: <A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">antlr-interest-bounces at antlr.org</A> [mailto:<A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">antlr-interest-bounces at antlr.org</A>] On Behalf Of J.R Karthikeyan
Sent: August 23, 2010 2:28 PM
To: <A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">antlr-interest at antlr.org</A>
Subject: [antlr-interest] regarding substring error

Hi,

  I have used the token STRING whose definition is 

fragment
QUOTE    :    '\&quot;'
    ;
    
STRING    :    QUOTE (options {greedy=false;} : .)* QUOTE { 
setText(getText().substring(0, getText().length())); }
    ;

I generated the C code and I tried to compile with visual studio. Without this 
STRING token definition it is working fine. But when I include this token 
definition it is giving the compilation error as below

Error    7    error C2224: left of '.substring' must have struct/union type    
c:\documents and settings\kjambura\my documents\visual studio 
2005\projects\wrap\wrap\project1lexer.c    3210    


Error    8    error C2224: left of '.length' must have struct/union type    
c:\documents and settings\kjambura\my documents\visual studio 
2005\projects\wrap\wrap\project1lexer.c    3210    


those lines are in Lexer file (highlighted in red)

void mSTRING(pproject1Lexer ctx)
{
    ANTLR3_UINT32    _type;

    _type        = STRING;
       
    
    // C:\\Documents and Settings\\kjambura\\My 
Documents\\parser\\project1.g:243:8: ( QUOTE ( options {greedy=false; } : . )* 
QUOTE )
    // C:\\Documents and Settings\\kjambura\\My 
Documents\\parser\\project1.g:243:10: QUOTE ( options {greedy=false; } : . )* 
QUOTE
    {
        /* 243:10: QUOTE ( options {greedy=false; } : . )* QUOTE */
        mQUOTE(ctx ); 
        if  (HASEXCEPTION())
        {
            goto ruleSTRINGEx;
        }


        // C:\\Documents and Settings\\kjambura\\My 
Documents\\parser\\project1.g:243:16: ( options {greedy=false; } : . )*

        for (;;)
        {
            int alt10=2;
            {
               /* 
dfaLoopbackState(k,edges,eotPredictsAlt,description,stateNumber,semPredState)
                */
                int LA10_0 = LA(1);
                if ( (LA10_0 == '&quot;') ) 
                {
                    alt10=2;
                }
                else if ( (((LA10_0 &gt;= 0x0000) &amp;&amp; (LA10_0 &lt;= '!')) || ((LA10_0 
&gt;<i>= '#') &amp;&amp; (LA10_0 &lt;= 0xFFFF))) ) 
</I>
                {
                    alt10=1;
                }

            }
            switch (alt10) 
            {
            case 1:
                // C:\\Documents and Settings\\kjambura\\My 
Documents\\parser\\project1.g:243:43: .
                {
                    MATCHANY(); 
                    if  (HASEXCEPTION())
                    {
                        goto ruleSTRINGEx;
                    }


                }
                break;

            default:
                goto loop10;    /* break out of the loop */
                break;
            }
        }
        loop10: ; /* Jump out to here if this rule does not match */

        /* 243:10: QUOTE ( options {greedy=false; } : . )* QUOTE */
        mQUOTE(ctx ); 
        if  (HASEXCEPTION())
        {
            goto ruleSTRINGEx;
        }

        {
            
             setText(getText().substring(0, getText().length())); 
        }

    }

    LEXSTATE-&gt;type = _type;

    // This is where rules clean up and exit
    //
    goto ruleSTRINGEx; /* Prevent compiler warnings */
    ruleSTRINGEx: ;

}

Can you please suggest me how to deal with this error.


Thanks,
Jrk



List: <A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">http://www.antlr.org/mailman/listinfo/antlr-interest</A>
Unsubscribe: <A HREF="http://www.antlr.org/mailman/options/antlr-interest/your-email-address">http://www.antlr.org/mailman/options/antlr-interest/your-email-address</A>
</PRE>






<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="039553.html">[antlr-interest] regarding substring error
</A></li>
	<LI>Next message: <A HREF="039558.html">[antlr-interest] Lexer Rules How to
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#39555">[ date ]</a>
              <a href="thread.html#39555">[ thread ]</a>
              <a href="subject.html#39555">[ subject ]</a>
              <a href="author.html#39555">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.antlr.org/mailman/listinfo/antlr-interest">More information about the antlr-interest
mailing list</a><br>
</body></html>
