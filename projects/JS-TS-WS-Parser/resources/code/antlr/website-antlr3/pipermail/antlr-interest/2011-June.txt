From jayaniw at ecollege.com  Wed Jun  1 04:02:49 2011
From: jayaniw at ecollege.com (Jayani Withanawasam)
Date: Wed, 1 Jun 2011 16:32:49 +0530
Subject: [antlr-interest] Memory issue with ANTLR
Message-ID: <1BD3AB91969DC74DA1F872AA45E5208B067C7975@SRIMBCL01.eclg.org>

Hi,

 

I get a java.lang.OutOfMemoryError: (Java heap space) in ANTLR 3.3 and
ANTLR 3.1.3. (Project properties)

I need to increase the max heap size of the JVM.

 

So, I used the following command in Visual Studio pre-build event
command line:

 

java -cp
"D:\Jay_CC\P4\user\brettp\SQLStandardsChecker\Ecollege\CodeStandards\ext
\ANTLR\lib\antlr-3.3-complete.jar" -Xms32M -Xmx512M org.antlr.Tool
-message-format vs2005 -Xconversiontimeout 30000
"D:\Jay_CC\P4\user\brettp\SQLStandardsChecker\Ecollege\CodeStandards\Par
ser\tsqllexer.g"
"D:\Jay_CC\P4\user\brettp\SQLStandardsChecker\Ecollege\CodeStandards\Par
ser\tsql.g"
"D:\Jay_CC\P4\user\brettp\SQLStandardsChecker\Ecollege\CodeStandards\Par
ser\tsqlwalker.g"

 

When I applied this I get namespace/ reference issues related to grammar
files.

Ex: 

The type or namespace name 'IAstRuleReturnScope' could not be found (are
you missing a using directive or an assembly reference?)
D:\Jay_CC\P4\user\brettp\SQLStandardsChecker\Ecollege\CodeStandards\Pars
er\tsql_tsqlcursors.cs  875                69           Parser

 

Also, I tried following command in the command prompt.

 

Java -Xms32M -Xmx512M org.antlr.tool
"D:\Jay_CC\P4\user\brettp\SQLStandardsChecker\Ecollege\CodeStandards\Par
ser\tsqllexer.g"
"D:\Jay_CC\P4\user\brettp\SQLStandardsChecker\Ecollege\CodeStandards\Par
ser\tsql.g"
"D:\Jay_CC\P4\user\brettp\SQLStandardsChecker\Ecollege\CodeStandards\Par
ser\tsqlwalker.g"

 

There I got a timeout issue.

 

Is the given command incorrect? If so, what is the correct command I
should give to,

1.       Set the class path variable

2.       Increase the JVM heap size

 

Is there any other solution/ workaround for this time out issue?

Do you have any thoughts on this? Appreciate your help.

 

Regards,

Jayani 

 


From markwright at internode.on.net  Wed Jun  1 04:47:57 2011
From: markwright at internode.on.net (Mark Wright)
Date: Wed, 01 Jun 2011 21:47:57 +1000
Subject: [antlr-interest] Memory issue with ANTLR
In-Reply-To: <1BD3AB91969DC74DA1F872AA45E5208B067C7975@SRIMBCL01.eclg.org>
References: <1BD3AB91969DC74DA1F872AA45E5208B067C7975@SRIMBCL01.eclg.org>
Message-ID: <yma7h957oya.fsf@internode.on.net>

Hi Jayani,

For the timeout issue you need to read the ANTLR documentation to find
out the command line parameter to the antlr tool to increase the timeout,
the default is too short for complex grammars.

Thanks, Mark

From jayaniw at ecollege.com  Wed Jun  1 04:54:21 2011
From: jayaniw at ecollege.com (Jayani Withanawasam)
Date: Wed, 1 Jun 2011 17:24:21 +0530
Subject: [antlr-interest] Memory issue with ANTLR
References: <1BD3AB91969DC74DA1F872AA45E5208B067C7975@SRIMBCL01.eclg.org>
	<yma7h957oya.fsf@internode.on.net>
Message-ID: <1BD3AB91969DC74DA1F872AA45E5208B067C79A7@SRIMBCL01.eclg.org>

Thanks Mark,

The issue is the following command seems to be incorrect:

java -cp
"D:\Jay_CC\P4\user\brettp\SQLStandardsChecker\Ecollege\CodeStandards\ext
\ANTLR\lib\antlr-3.3-complete.jar" -Xms32M -Xmx512M org.antlr.Tool
-message-format vs2005 -Xconversiontimeout 30000
"D:\Jay_CC\P4\user\brettp\SQLStandardsChecker\Ecollege\CodeStandards\Par
ser\tsqllexer.g"
"D:\Jay_CC\P4\user\brettp\SQLStandardsChecker\Ecollege\CodeStandards\Par
ser\tsql.g"
"D:\Jay_CC\P4\user\brettp\SQLStandardsChecker\Ecollege\CodeStandards\Par
ser\tsqlwalker.g"

The timeout is set to 30000 here. But how to increase the max heap size
in this command?

Regards,
Jayani.


-----Original Message-----
From: Mark Wright [mailto:markwright at internode.on.net] 
Sent: Wednesday, June 01, 2011 5:18 PM
To: Jayani Withanawasam; antlr-interest at antlr.org
Subject: Re: [antlr-interest] Memory issue with ANTLR

Hi Jayani,

For the timeout issue you need to read the ANTLR documentation to find
out the command line parameter to the antlr tool to increase the
timeout,
the default is too short for complex grammars.

Thanks, Mark

From markwright at internode.on.net  Wed Jun  1 05:30:35 2011
From: markwright at internode.on.net (Mark Wright)
Date: Wed, 01 Jun 2011 22:30:35 +1000
Subject: [antlr-interest] Memory issue with ANTLR
In-Reply-To: <1BD3AB91969DC74DA1F872AA45E5208B067C79A7@SRIMBCL01.eclg.org>
References: <1BD3AB91969DC74DA1F872AA45E5208B067C7975@SRIMBCL01.eclg.org>
	<yma7h957oya.fsf@internode.on.net>
	<1BD3AB91969DC74DA1F872AA45E5208B067C79A7@SRIMBCL01.eclg.org>
Message-ID: <yma4o497mz8.fsf@internode.on.net>

On Wed, 1 Jun 2011 17:24:21 +0530, Jayani Withanawasam <jayaniw at ecollege.com> wrote:
> Thanks Mark,
> 
> The issue is the following command seems to be incorrect:
> 
> java -cp
> "D:\Jay_CC\P4\user\brettp\SQLStandardsChecker\Ecollege\CodeStandards\ext
> \ANTLR\lib\antlr-3.3-complete.jar" -Xms32M -Xmx512M org.antlr.Tool
> -message-format vs2005 -Xconversiontimeout 30000
> "D:\Jay_CC\P4\user\brettp\SQLStandardsChecker\Ecollege\CodeStandards\Par
> ser\tsqllexer.g"
> "D:\Jay_CC\P4\user\brettp\SQLStandardsChecker\Ecollege\CodeStandards\Par
> ser\tsql.g"
> "D:\Jay_CC\P4\user\brettp\SQLStandardsChecker\Ecollege\CodeStandards\Par
> ser\tsqlwalker.g"
> 
> The timeout is set to 30000 here. But how to increase the max heap size
> in this command?
> 
> Regards,
> Jayani.

Hi Jayani,

It looks like you may have already increased the max heap size with the
-Xms32M -Xmx512M options, I guess java does not care if its M or m for
megabytes, I use m, like:

java -Xmx512m -classpath $(ANTLR_CLASSPATH) org.antlr.Tool -Xconversiontimeout 1200000 -report mygrammar.g

Anyway back in your first email, it looked like you sort of got past
that when running it in visual studio, and instead got this error:

> When I applied this I get namespace/ reference issues related to grammar
> files.

> Ex: 

> The type or namespace name 'IAstRuleReturnScope' could not be found (are
> you missing a using directive or an assembly reference?)
> D:\Jay_CC\P4\user\brettp\SQLStandardsChecker\Ecollege\CodeStandards\Pars
> er\tsql_tsqlcursors.cs  875                69           Parser

But I don't know how to fix this error (I don't know if IAstRuleReturnScope is
something in your code or the C# ANTLR runtime).

Regards, Mark

From jayaniw at ecollege.com  Wed Jun  1 06:13:31 2011
From: jayaniw at ecollege.com (Jayani Withanawasam)
Date: Wed, 1 Jun 2011 18:43:31 +0530
Subject: [antlr-interest] Memory issue with ANTLR
References: <1BD3AB91969DC74DA1F872AA45E5208B067C7975@SRIMBCL01.eclg.org>
	<yma7h957oya.fsf@internode.on.net>
	<1BD3AB91969DC74DA1F872AA45E5208B067C79A7@SRIMBCL01.eclg.org>
	<yma4o497mz8.fsf@internode.on.net>
Message-ID: <1BD3AB91969DC74DA1F872AA45E5208B067C79D6@SRIMBCL01.eclg.org>

Thanks Mark,

If I do not increase the max heap size, I will not get the reference
issues.
So, as you have mentioned, this can be something to do with the C# ANTLR
runtime and grammar files.

I tried the command you sent also.(To increase heap size) But still I
get the same error.

Regards,
Jayani.


-----Original Message-----
From: Mark Wright [mailto:markwright at internode.on.net] 
Sent: Wednesday, June 01, 2011 6:01 PM
To: Jayani Withanawasam; antlr-interest at antlr.org
Subject: RE: [antlr-interest] Memory issue with ANTLR

On Wed, 1 Jun 2011 17:24:21 +0530, Jayani Withanawasam
<jayaniw at ecollege.com> wrote:
> Thanks Mark,
> 
> The issue is the following command seems to be incorrect:
> 
> java -cp
>
"D:\Jay_CC\P4\user\brettp\SQLStandardsChecker\Ecollege\CodeStandards\ext
> \ANTLR\lib\antlr-3.3-complete.jar" -Xms32M -Xmx512M org.antlr.Tool
> -message-format vs2005 -Xconversiontimeout 30000
>
"D:\Jay_CC\P4\user\brettp\SQLStandardsChecker\Ecollege\CodeStandards\Par
> ser\tsqllexer.g"
>
"D:\Jay_CC\P4\user\brettp\SQLStandardsChecker\Ecollege\CodeStandards\Par
> ser\tsql.g"
>
"D:\Jay_CC\P4\user\brettp\SQLStandardsChecker\Ecollege\CodeStandards\Par
> ser\tsqlwalker.g"
> 
> The timeout is set to 30000 here. But how to increase the max heap
size
> in this command?
> 
> Regards,
> Jayani.

Hi Jayani,

It looks like you may have already increased the max heap size with the
-Xms32M -Xmx512M options, I guess java does not care if its M or m for
megabytes, I use m, like:

java -Xmx512m -classpath $(ANTLR_CLASSPATH) org.antlr.Tool
-Xconversiontimeout 1200000 -report mygrammar.g

Anyway back in your first email, it looked like you sort of got past
that when running it in visual studio, and instead got this error:

> When I applied this I get namespace/ reference issues related to
grammar
> files.

> Ex: 

> The type or namespace name 'IAstRuleReturnScope' could not be found
(are
> you missing a using directive or an assembly reference?)
>
D:\Jay_CC\P4\user\brettp\SQLStandardsChecker\Ecollege\CodeStandards\Pars
> er\tsql_tsqlcursors.cs  875                69           Parser

But I don't know how to fix this error (I don't know if
IAstRuleReturnScope is
something in your code or the C# ANTLR runtime).

Regards, Mark

From markwright at internode.on.net  Wed Jun  1 06:45:58 2011
From: markwright at internode.on.net (Mark Wright)
Date: Wed, 01 Jun 2011 23:45:58 +1000
Subject: [antlr-interest] Memory issue with ANTLR
In-Reply-To: <1BD3AB91969DC74DA1F872AA45E5208B067C79D6@SRIMBCL01.eclg.org>
References: <1BD3AB91969DC74DA1F872AA45E5208B067C7975@SRIMBCL01.eclg.org>
	<yma7h957oya.fsf@internode.on.net>
	<1BD3AB91969DC74DA1F872AA45E5208B067C79A7@SRIMBCL01.eclg.org>
	<yma4o497mz8.fsf@internode.on.net>
	<1BD3AB91969DC74DA1F872AA45E5208B067C79D6@SRIMBCL01.eclg.org>
Message-ID: <yma1uzd7jhl.fsf@internode.on.net>

On Wed, 1 Jun 2011 18:43:31 +0530, Jayani Withanawasam <jayaniw at ecollege.com> wrote:
> Thanks Mark,
> 
> If I do not increase the max heap size, I will not get the reference
> issues.
> So, as you have mentioned, this can be something to do with the C# ANTLR
> runtime and grammar files.
> 
> I tried the command you sent also.(To increase heap size) But still I
> get the same error.
> 
> Regards,
> Jayani.

Hi Jayani,

Right so you still get this error:
 
> > When I applied this I get namespace/ reference issues related to grammar files.
> 
> > Ex: 
> 
> > The type or namespace name 'IAstRuleReturnScope' could not be found (are
> > you missing a using directive or an assembly reference?)
> >
> D:\Jay_CC\P4\user\brettp\SQLStandardsChecker\Ecollege\CodeStandards\Parser\tsql_tsqlcursors.cs  875                69           Parser

IAstRuleReturnScope sounds like it might be something in your
code, or in the C# code that was generated by the antlr tool
from the .g files, or maybe something in the C# antlr runtime.

You could try:

- checking the C# files generated from the antlr tool are linked into the
  application
- searching for IAstRuleReturnScope in the generated C# files, and in the .g
  files
- searching for IAstRuleReturnScope in the C# runtime
- searching for IAstRuleReturnScope in the string template files (.stg) for
  the C# runtime in the antlr tool source code

Actually its in there, maybe that gives some more hints:

% grep IAstRuleReturnScope **/*.stg
tool/src/main/resources/org/antlr/codegen/templates/CSharp2/AST.stg:, IAstRuleReturnScope\<<ASTLabelType>\>
tool/src/main/resources/org/antlr/codegen/templates/CSharp3/AST.stg:, IAstRuleReturnScope\<<ASTLabelType>\>
tool/target/classes/org/antlr/codegen/templates/CSharp2/AST.stg:, IAstRuleReturnScope\<<ASTLabelType>\>
tool/target/classes/org/antlr/codegen/templates/CSharp3/AST.stg:, IAstRuleReturnScope\<<ASTLabelType>\>
% 

Regards, Mark

From nilopaim at gmail.com  Wed Jun  1 13:53:52 2011
From: nilopaim at gmail.com (Nilo Roberto C Paim)
Date: Wed, 1 Jun 2011 17:53:52 -0300
Subject: [antlr-interest] Accentuated chars in brazilian portuguese
In-Reply-To: <yma1uzd7jhl.fsf@internode.on.net>
References: <1BD3AB91969DC74DA1F872AA45E5208B067C7975@SRIMBCL01.eclg.org>	<yma7h957oya.fsf@internode.on.net>	<1BD3AB91969DC74DA1F872AA45E5208B067C79A7@SRIMBCL01.eclg.org>	<yma4o497mz8.fsf@internode.on.net>	<1BD3AB91969DC74DA1F872AA45E5208B067C79D6@SRIMBCL01.eclg.org>
	<yma1uzd7jhl.fsf@internode.on.net>
Message-ID: <016e01cc209e$068e4350$13aac9f0$@com>

Hi all,

I'm newbie using Antlr and I'm facing a problem when trying to parse a text
that contains accentuated chars in Brazilian Portuguese.

I've put a word definition on my grammar as follows:

		WORD :			( '\u00c0'..'\u00ff' | 'a'..'z' |
'A'..'Z' | '-' )+ ;

But have no success on parsing. Words like "n?o" ("no" in Portuguese) causes
lexar throws "Antlr.Runtime.NoViableAltException".

I'm trying to use C#.

Any hint?

TIA

Nilo, from Brasil...


From bkiers at gmail.com  Wed Jun  1 13:59:46 2011
From: bkiers at gmail.com (Bart Kiers)
Date: Wed, 1 Jun 2011 22:59:46 +0200
Subject: [antlr-interest] Accentuated chars in brazilian portuguese
In-Reply-To: <016e01cc209e$068e4350$13aac9f0$@com>
References: <1BD3AB91969DC74DA1F872AA45E5208B067C7975@SRIMBCL01.eclg.org>
	<yma7h957oya.fsf@internode.on.net>
	<1BD3AB91969DC74DA1F872AA45E5208B067C79A7@SRIMBCL01.eclg.org>
	<yma4o497mz8.fsf@internode.on.net>
	<1BD3AB91969DC74DA1F872AA45E5208B067C79D6@SRIMBCL01.eclg.org>
	<yma1uzd7jhl.fsf@internode.on.net>
	<016e01cc209e$068e4350$13aac9f0$@com>
Message-ID: <BANLkTi=mVuKdOniMYEX4OrOpFxNQrfJbWg@mail.gmail.com>

Hi Nilo,

The grammar:

grammar Brasil;

parse
  :  WORD EOF
  ;

 WORD
   :  ('\u00c0'..'\u00ff' | 'a'..'z' | 'A'..'Z' | '-')+
   ;


parses the input "n?o" just fine in ANTLRWorks.

I'm not really familiar with C#, but for those who are, could you perhaps
post *how* you are testing it? (post a test rig that shows the behavior you
describe)

Regards,

Bart.



On Wed, Jun 1, 2011 at 10:53 PM, Nilo Roberto C Paim <nilopaim at gmail.com>wrote:

> Hi all,
>
> I'm newbie using Antlr and I'm facing a problem when trying to parse a text
> that contains accentuated chars in Brazilian Portuguese.
>
> I've put a word definition on my grammar as follows:
>
>                WORD :                  ( '\u00c0'..'\u00ff' | 'a'..'z' |
> 'A'..'Z' | '-' )+ ;
>
> But have no success on parsing. Words like "n?o" ("no" in Portuguese)
> causes
> lexar throws "Antlr.Runtime.NoViableAltException".
>
> I'm trying to use C#.
>
> Any hint?
>
> TIA
>
> Nilo, from Brasil...
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>

From arthernan at hotmail.com  Wed Jun  1 14:21:57 2011
From: arthernan at hotmail.com (Arturo Hernandez)
Date: Wed, 1 Jun 2011 16:21:57 -0500
Subject: [antlr-interest] Random code generator
In-Reply-To: <A97A4C7D-5504-4CED-9882-FEF6DEB71C4E@cs.usfca.edu>
References: <BLU152-w65A09703B0721E8B82BB03B67A0@phx.gbl>,
	<BANLkTikbWLSOg=f8=svT-QHRO+B8-D4LLQ@mail.gmail.com>,
	<A97A4C7D-5504-4CED-9882-FEF6DEB71C4E@cs.usfca.edu>
Message-ID: <BLU152-w51E010780875DD5B18B3B0B67D0@phx.gbl>


Thank you both,

I did take a dive in the RandomPhrase.java
It looked like it relies on randomly falling into terminating rules to exit. If I read the code correctly. Makes sense that complex grammars would
Before I read your response I found Peter Maurer DGL. And it implements the features I mentioned and more. But I am not sure I want to dilute my learning at this point. I am learning ANTLR just so I can isolate my code from soo many language/framework/IDE options.
Before I read about Ralf's work. I wanted to mention a couple of ideas.
	I thought some extra actions inside of a given ANTLR grammar could introduce bias. The actions sideffects could be picked up in the RandomPhrase.java code.
	Also some high level constructs (patterns) could be added as rules, and an alternative head could be introduced for pseudorandom generation.	Thanks again.
> From: parrt at cs.usfca.edu
> To: antlr-interest at antlr.org
> Date: Wed, 1 Jun 2011 08:52:53 +0200
> Subject: Re: [antlr-interest] Random code generator
> 
> hi. Ralf L?mmel has done good work inthis area.
> Ter
> 
> On Jun 1, 2011, at 2:50 AM, The Researcher wrote:
> 
> > Hi Arturo,
> >
> > If you are referening to generating test phrases for input to your  
> > parser,
> > then
> >
> > Ter did a quick take on this.
> > http://www.antlr.org/wiki/display/ANTLR3/Random+phrase+generation+using+an+ANTLR+grammar
> >
> > which will lead you to the RandomPhrase.java in the distribution  
> > with the
> > following note.
> >
> > NOTE: this does not work well for large grammars...it tends to  
> > recurse too
> > much and build really long strings.
> >
> > I did a quick search on the Internet with the requirements that it  
> > be open
> > source, free, documented and produced valid code for a compiler; I  
> > found
> > nothing. That doesn' t mean it doesn't exist, I just didn't find it..
> >
> > I am currently writing my own, but it is not based on any random  
> > seed or
> > statistics. It is designed to generate fully valid phrases for the  
> > grammar.
> > As a specific example, if I want to test method phrases in a class,  
> > the
> > methods will be wrapped in a class and be capable of being compiled,  
> > it
> > won't be a list of methods that need special code to test. One big  
> > caveat
> > with my program is that the grammar must be converted to BNF, which  
> > means
> > only two operators  ab  or  a | b, no ?, + or *.
> >
> > Eric
> >
> > List: http://www.antlr.org/mailman/listinfo/antlr-interest
> > Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
> 
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
 		 	   		  

From omar.mohssen at yahoo.com  Wed Jun  1 18:20:00 2011
From: omar.mohssen at yahoo.com (Omar Mohssen)
Date: Wed, 1 Jun 2011 18:20:00 -0700 (PDT)
Subject: [antlr-interest] help
Message-ID: <801730.24746.qm@web57405.mail.re1.yahoo.com>



hello
i have a problem using the grammar "ANSI C ANTLR v3 grammar" (on the link 
http://www.antlr.org/grammar/1153358328744/C.g) 
the problem is that i couldn't find the start state from which i start the 
interpreter to test examples like
void main(){

}
or any other simple examples ..
actually i don't know if this is exactly the problem i have the latest version 
of antlrworks i am getting "FailedPredicateException..." 
I appreciate any help 
thanks in advance                

From jbb at acm.org  Wed Jun  1 18:51:20 2011
From: jbb at acm.org (John B. Brodie)
Date: Wed, 01 Jun 2011 21:51:20 -0400
Subject: [antlr-interest] help
In-Reply-To: <801730.24746.qm@web57405.mail.re1.yahoo.com>
References: <801730.24746.qm@web57405.mail.re1.yahoo.com>
Message-ID: <1306979480.28073.4.camel@gecko>

Greetings!

On Wed, 2011-06-01 at 18:20 -0700, Omar Mohssen wrote:
> 
> hello
> i have a problem using the grammar "ANSI C ANTLR v3 grammar" (on the link 
> http://www.antlr.org/grammar/1153358328744/C.g) 
> the problem is that i couldn't find the start state from which i start the 
> interpreter to test examples like
> void main(){
> 
> }
> or any other simple examples ..
> actually i don't know if this is exactly the problem i have the latest version 
> of antlrworks i am getting "FailedPredicateException..." 
> I appreciate any help 
> thanks in advance                
> 

I do not use ANTLRWorks so my advice may be bogus....

Do not use the ANTLRWorks Interpreter -- it does not handle grammars
with predicates (and also apparently has other issues...)

Looks like the start symbol is translation_unit but that determination
is only after a very brief scan of the grammar (apparently, no rule
mentions EOF so it is kinda hard to tell...)

Hope this helps...
   -jbb



From douglasgodfrey at gmail.com  Thu Jun  2 00:48:13 2011
From: douglasgodfrey at gmail.com (Douglas Godfrey)
Date: Thu, 2 Jun 2011 03:48:13 -0400
Subject: [antlr-interest] Accentuated chars in brazilian portuguese
In-Reply-To: <016e01cc209e$068e4350$13aac9f0$@com>
References: <1BD3AB91969DC74DA1F872AA45E5208B067C7975@SRIMBCL01.eclg.org>
	<yma7h957oya.fsf@internode.on.net>
	<1BD3AB91969DC74DA1F872AA45E5208B067C79A7@SRIMBCL01.eclg.org>
	<yma4o497mz8.fsf@internode.on.net>
	<1BD3AB91969DC74DA1F872AA45E5208B067C79D6@SRIMBCL01.eclg.org>
	<yma1uzd7jhl.fsf@internode.on.net>
	<016e01cc209e$068e4350$13aac9f0$@com>
Message-ID: <BANLkTimcnNxQsY0d531V6zujGeFUH-k3+w@mail.gmail.com>

Lookup the latin Unicode code pages on Wikipedia and add the Unicode code
points for
accented Latin1 to your rule WORD.

fragmen
Latin1_Supplement                   :   '\u00A0' .. '\u00FF';
fragment
Latin_ExtendedA                     :   '\u0100' .. '\u017F';
fragment
Latin_ExtendedB                     :   '\u0180' .. '\u024F';


On Wed, Jun 1, 2011 at 4:53 PM, Nilo Roberto C Paim <nilopaim at gmail.com>wrote:

> Hi all,
>
> I'm newbie using Antlr and I'm facing a problem when trying to parse a text
> that contains accentuated chars in Brazilian Portuguese.
>
> I've put a word definition on my grammar as follows:
>
>                WORD :                  ( '\u00c0'..'\u00ff' | 'a'..'z' |
> 'A'..'Z' | '-' )+ ;
>
> But have no success on parsing. Words like "n?o" ("no" in Portuguese)
> causes
> lexar throws "Antlr.Runtime.NoViableAltException".
>
> I'm trying to use C#.
>
> Any hint?
>
> TIA
>
> Nilo, from Brasil...
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>

From jayaniw at ecollege.com  Thu Jun  2 21:57:12 2011
From: jayaniw at ecollege.com (Jayani Withanawasam)
Date: Fri, 3 Jun 2011 10:27:12 +0530
Subject: [antlr-interest] Memory issue with ANTLR
References: <1BD3AB91969DC74DA1F872AA45E5208B067C7975@SRIMBCL01.eclg.org>
	<yma7h957oya.fsf@internode.on.net>
	<1BD3AB91969DC74DA1F872AA45E5208B067C79A7@SRIMBCL01.eclg.org>
	<yma4o497mz8.fsf@internode.on.net>
	<1BD3AB91969DC74DA1F872AA45E5208B067C79D6@SRIMBCL01.eclg.org>
	<yma1uzd7jhl.fsf@internode.on.net>
Message-ID: <1BD3AB91969DC74DA1F872AA45E5208B067C7D6D@SRIMBCL01.eclg.org>

Thanks Mark,

I could resolve this after increasing the max heap size of the JVM using
the following command:
java -Xmx750M -cp "c:\antlr\antlr-3.1.3.jar" org.antlr.Tool
-Xconversiontimeout 30000 *.g

I have not build the grammer files correctly and that is why I got
reference issues.

Regards,
Jayani.


-----Original Message-----
From: Mark Wright [mailto:markwright at internode.on.net] 
Sent: Wednesday, June 01, 2011 7:16 PM
To: Jayani Withanawasam; antlr-interest at antlr.org
Subject: RE: [antlr-interest] Memory issue with ANTLR

On Wed, 1 Jun 2011 18:43:31 +0530, Jayani Withanawasam
<jayaniw at ecollege.com> wrote:
> Thanks Mark,
> 
> If I do not increase the max heap size, I will not get the reference
> issues.
> So, as you have mentioned, this can be something to do with the C#
ANTLR
> runtime and grammar files.
> 
> I tried the command you sent also.(To increase heap size) But still I
> get the same error.
> 
> Regards,
> Jayani.

Hi Jayani,

Right so you still get this error:
 
> > When I applied this I get namespace/ reference issues related to
grammar files.
> 
> > Ex: 
> 
> > The type or namespace name 'IAstRuleReturnScope' could not be found
(are
> > you missing a using directive or an assembly reference?)
> >
>
D:\Jay_CC\P4\user\brettp\SQLStandardsChecker\Ecollege\CodeStandards\Pars
er\tsql_tsqlcursors.cs  875                69           Parser

IAstRuleReturnScope sounds like it might be something in your
code, or in the C# code that was generated by the antlr tool
from the .g files, or maybe something in the C# antlr runtime.

You could try:

- checking the C# files generated from the antlr tool are linked into
the
  application
- searching for IAstRuleReturnScope in the generated C# files, and in
the .g
  files
- searching for IAstRuleReturnScope in the C# runtime
- searching for IAstRuleReturnScope in the string template files (.stg)
for
  the C# runtime in the antlr tool source code

Actually its in there, maybe that gives some more hints:

% grep IAstRuleReturnScope **/*.stg
tool/src/main/resources/org/antlr/codegen/templates/CSharp2/AST.stg:,
IAstRuleReturnScope\<<ASTLabelType>\>
tool/src/main/resources/org/antlr/codegen/templates/CSharp3/AST.stg:,
IAstRuleReturnScope\<<ASTLabelType>\>
tool/target/classes/org/antlr/codegen/templates/CSharp2/AST.stg:,
IAstRuleReturnScope\<<ASTLabelType>\>
tool/target/classes/org/antlr/codegen/templates/CSharp3/AST.stg:,
IAstRuleReturnScope\<<ASTLabelType>\>
% 

Regards, Mark

From david.smith at cc.gatech.edu  Fri Jun  3 14:37:27 2011
From: david.smith at cc.gatech.edu (David Smith)
Date: Fri, 03 Jun 2011 17:37:27 -0400
Subject: [antlr-interest] Serializing a CommonTree
Message-ID: <E1QSc3e-0002DJ-77@elasmtp-curtail.atl.sa.earthlink.net>

I am really appreciative of the speed and expertise of the answers 
from this list.  Hopefully, this is not as rudimentary as some of my 
earlier questions.

For fairly obvious reasons, I would like to write out and read in a 
CommonTree. Is it possible to serialize one?  I don't think i can 
reconstruct a tree from the result of a toStringTree() call.  If so, how?

                                 DMS

David M. Smith http://www.cc.gatech.edu/fac/David.Smith
Georgia Institute of Technology, College of Computing
Sent from my ASR-33 Teletype 


From knifed at gmail.com  Sat Jun  4 06:03:24 2011
From: knifed at gmail.com (Jeff Hair)
Date: Sat, 4 Jun 2011 09:03:24 -0400
Subject: [antlr-interest] Serializing a CommonTree
In-Reply-To: <E1QSc3e-0002DJ-77@elasmtp-curtail.atl.sa.earthlink.net>
References: <E1QSc3e-0002DJ-77@elasmtp-curtail.atl.sa.earthlink.net>
Message-ID: <BANLkTimyyLM=gAH7+0LU=q4=zcgApfwpWw@mail.gmail.com>

Doesn't look they implement Serializable.

https://github.com/antlr/antlr/tree/master/runtime/Java/src/main/java/org/antlr/runtime/tree

<https://github.com/antlr/antlr/tree/master/runtime/Java/src/main/java/org/antlr/runtime/tree>So
you will have to serialize through whatever voodoo allows one to serialize a
non-Serializable class (I'm sure it's possible some way or another).

(Sorry, forgot to Reply to All)

On Fri, Jun 3, 2011 at 5:37 PM, David Smith <david.smith at cc.gatech.edu>wrote:

> I am really appreciative of the speed and expertise of the answers
> from this list.  Hopefully, this is not as rudimentary as some of my
> earlier questions.
>
> For fairly obvious reasons, I would like to write out and read in a
> CommonTree. Is it possible to serialize one?  I don't think i can
> reconstruct a tree from the result of a toStringTree() call.  If so, how?
>
>                                 DMS
>
> David M. Smith http://www.cc.gatech.edu/fac/David.Smith
> Georgia Institute of Technology, College of Computing
> Sent from my ASR-33 Teletype
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>

From david.smith at cc.gatech.edu  Sat Jun  4 08:15:16 2011
From: david.smith at cc.gatech.edu (David Smith)
Date: Sat, 04 Jun 2011 11:15:16 -0400
Subject: [antlr-interest] Serializing a CommonTree
In-Reply-To: <BANLkTimyyLM=gAH7+0LU=q4=zcgApfwpWw@mail.gmail.com>
References: <E1QSc3e-0002DJ-77@elasmtp-curtail.atl.sa.earthlink.net>
	<BANLkTimyyLM=gAH7+0LU=q4=zcgApfwpWw@mail.gmail.com>
Message-ID: <E1QSsZK-0000aI-Fm@elasmtp-masked.atl.sa.earthlink.net>

OK, just thought I'd check.  Since toStringTree() goes through the 
appropriate motions, this has to be possible.  I need to create this 
capability; when it's working, I'll submit it to the team.

                                 DMS
At 09:03 AM 6/4/2011, Jeff Hair wrote:
>Doesn't look they implement Serializable.
>
><https://github.com/antlr/antlr/tree/master/runtime/Java/src/main/java/org/antlr/runtime/tree>https://github.com/antlr/antlr/tree/master/runtime/Java/src/main/java/org/antlr/runtime/tree
>
>So you will have to serialize through whatever voodoo allows one to 
>serialize a non-Serializable class (I'm sure it's possible some way 
>or another).
>
>(Sorry, forgot to Reply to All)
>
>On Fri, Jun 3, 2011 at 5:37 PM, David Smith 
><<mailto:david.smith at cc.gatech.edu>david.smith at cc.gatech.edu> wrote:
>I am really appreciative of the speed and expertise of the answers
>from this list.  Hopefully, this is not as rudimentary as some of my
>earlier questions.
>
>For fairly obvious reasons, I would like to write out and read in a
>CommonTree. Is it possible to serialize one?  I don't think i can
>reconstruct a tree from the result of a toStringTree() call.  If so, how?
>
>                                 DMS
>
>David M. Smith 
><http://www.cc.gatech.edu/fac/David.Smith>http://www.cc.gatech.edu/fac/David.Smith
>Georgia Institute of Technology, College of Computing
>Sent from my ASR-33 Teletype
>
>
>List: 
><http://www.antlr.org/mailman/listinfo/antlr-interest>http://www.antlr.org/mailman/listinfo/antlr-interest
>Unsubscribe: 
><http://www.antlr.org/mailman/options/antlr-interest/your-email-address>http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>

David M. Smith http://www.cc.gatech.edu/fac/David.Smith
Georgia Institute of Technology, College of Computing
Sent from my ASR-33 Teletype 


From nilopaim at gmail.com  Sat Jun  4 08:19:00 2011
From: nilopaim at gmail.com (Nilo Roberto C Paim)
Date: Sat, 4 Jun 2011 12:19:00 -0300
Subject: [antlr-interest] RES:  Accentuated chars in brazilian portuguese
In-Reply-To: <BANLkTimcnNxQsY0d531V6zujGeFUH-k3+w@mail.gmail.com>
References: <1BD3AB91969DC74DA1F872AA45E5208B067C7975@SRIMBCL01.eclg.org>	<yma7h957oya.fsf@internode.on.net>	<1BD3AB91969DC74DA1F872AA45E5208B067C79A7@SRIMBCL01.eclg.org>	<yma4o497mz8.fsf@internode.on.net>	<1BD3AB91969DC74DA1F872AA45E5208B067C79D6@SRIMBCL01.eclg.org>	<yma1uzd7jhl.fsf@internode.on.net>	<016e01cc209e$068e4350$13aac9f0$@com>
	<BANLkTimcnNxQsY0d531V6zujGeFUH-k3+w@mail.gmail.com>
Message-ID: <002201cc22ca$bdd6c950$39845bf0$@com>

Thanks to Bart and Douglas for the hints.

 

I?ve discovered a lot of things in this process, including the encoding of
my input file.

 

I?m on the way now


 

Thanks all.

 

 

De: Douglas Godfrey [mailto:douglasgodfrey at gmail.com] 
Enviada em: quinta-feira, 2 de junho de 2011 04:48
Para: Nilo Roberto C Paim
Cc: antlr-interest at antlr.org
Assunto: Re: [antlr-interest] Accentuated chars in brazilian portuguese

 

Lookup the latin Unicode code pages on Wikipedia and add the Unicode code
points for 
accented Latin1 to your rule WORD.

fragmen
Latin1_Supplement                   :   '\u00A0' .. '\u00FF';
fragment
Latin_ExtendedA                     :   '\u0100' .. '\u017F';
fragment
Latin_ExtendedB                     :   '\u0180' .. '\u024F';



On Wed, Jun 1, 2011 at 4:53 PM, Nilo Roberto C Paim <nilopaim at gmail.com>
wrote:

Hi all,

I'm newbie using Antlr and I'm facing a problem when trying to parse a text
that contains accentuated chars in Brazilian Portuguese.

I've put a word definition on my grammar as follows:

               WORD :                  ( '\u00c0'..'\u00ff' | 'a'..'z' |
'A'..'Z' | '-' )+ ;

But have no success on parsing. Words like "n?o" ("no" in Portuguese) causes
lexar throws "Antlr.Runtime.NoViableAltException".

I'm trying to use C#.

Any hint?

TIA

Nilo, from Brasil...


List: http://www.antlr.org/mailman/listinfo/antlr-interest
Unsubscribe:
http://www.antlr.org/mailman/options/antlr-interest/your-email-address

 


From petrov.ilya at gmail.com  Sat Jun  4 08:39:19 2011
From: petrov.ilya at gmail.com (=?UTF-8?B?0J/QtdGC0YDQvtCyINCY0LvRjNGP?=)
Date: Sat, 4 Jun 2011 21:39:19 +0600
Subject: [antlr-interest] Serializing a CommonTree
In-Reply-To: <E1QSsZK-0000aI-Fm@elasmtp-masked.atl.sa.earthlink.net>
References: <E1QSc3e-0002DJ-77@elasmtp-curtail.atl.sa.earthlink.net>
	<BANLkTimyyLM=gAH7+0LU=q4=zcgApfwpWw@mail.gmail.com>
	<E1QSsZK-0000aI-Fm@elasmtp-masked.atl.sa.earthlink.net>
Message-ID: <BANLkTinJGUZkcLk83C7+StTSu_sW2+G=mg@mail.gmail.com>

> Doesn't look they implement Serializable.

CommonTree doesn't know anything about it's tokens,
it may hold tokens which are not Serializable.
I don't know where can someone ever want to have
such tokens, but maybe there is such a case. Supply
one if you can.

> I need to create this
> capability; when it's working, I'll submit it to the team.

You have to create CommonTree which restricts the type
of the token it holds, something like SerializableCommonTree.
There is CommonToken which is already Serializable and
could be used as a restriction on `Token token` attribute of
the CommonTree class.

To this letter I've attached an implementation that I've tried
to make and which doesn't work due to the problem described
in the second question here:
[ http://www.antlr.org/pipermail/antlr-interest/2006-July/016831.html ].
Feel free to make use of it.
-------------- next part --------------
A non-text attachment was scrubbed...
Name: ast_serialization.7z
Type: application/octet-stream
Size: 3914 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20110604/959a6fe0/attachment.obj 

From george at woh.rr.com  Sun Jun  5 06:00:21 2011
From: george at woh.rr.com (George Spears)
Date: Sun, 5 Jun 2011 09:00:21 -0400
Subject: [antlr-interest] New Guy Question...
Message-ID: <000901cc2380$87307e30$95917a90$@woh.rr.com>

 

Hi everyone,

Just dipping my toes in the ANTLR waters do to speak..  In other words, I am
definitely new at this, so a couple quick questions.

1)       Is this list/email address the best way to ask questions?  

2)      Any idea when "The Definitive ANTLR book" will be updated?  It
appears to be based on 3.0, whereas the ANTLR product is 3.3. I still
purchased the book, and it is helping tremendously.

3)       My language of choice is Delphi.  Does anyone have a sample grammar
and the Delphi equiv of Test.java that they could send me.?  (George at woh
dot rr dot com)

4)      How do I handle case insensitivity?  For example, assume in the
following grammar that the token 'CALL' can be all caps, all lower letters,
or a mix.  How do I recognize it?

 

 

grammar T;

/** Match things like "call foo;" */

 

CALL      :               'CALL';

ID  :   ('a'..'z'|'A'..'Z')+ ;

INT :   '0'..'9'+ ;

NEWLINE:'\r'? '\n' ;

WS  :   (' '|'\t')+ { $channel=HIDDEN; } ;

MULT:   '*';

ASSIGN:               '=';

PLUS:    '+';

MINUS:                '-';

 

 

r : CALL ID ';' {System.out.println("invoke "+$ID.text);} ;

 

 

 

 

Thanks,

George Spears

 


From vinicius.durelli at gmail.com  Sun Jun  5 06:37:10 2011
From: vinicius.durelli at gmail.com (Vinicius Durelli)
Date: Sun, 5 Jun 2011 10:37:10 -0300
Subject: [antlr-interest] New Guy Question...
In-Reply-To: <000901cc2380$87307e30$95917a90$@woh.rr.com>
References: <000901cc2380$87307e30$95917a90$@woh.rr.com>
Message-ID: <BANLkTindcOc-n5V39AUFmnk8CLhMT8MC+A@mail.gmail.com>

Hi George,
I can properly answer most of your questions, as for the tougher/trickier
one I will

1) AFAIK, yes.
2) I think Terence has been working on it.
3) AFAIK, there is just a Pascal grammar. However, you'd better wait for the
veterans' reply.
4) I would solve this like that:

call : C A L L
      ;

fragment C :  ('c' | 'C');
fragment A :  ('a' | 'A');
fragment L :  ('l' | 'L');

I don't know if it is the best approach though.

Best regards,
Vinicius Durelli

On Sun, Jun 5, 2011 at 10:00 AM, George Spears <george at woh.rr.com> wrote:

>
>
> Hi everyone,
>
> Just dipping my toes in the ANTLR waters do to speak..  In other words, I
> am
> definitely new at this, so a couple quick questions.
>
> 1)       Is this list/email address the best way to ask questions?
>
> 2)      Any idea when "The Definitive ANTLR book" will be updated?  It
> appears to be based on 3.0, whereas the ANTLR product is 3.3. I still
> purchased the book, and it is helping tremendously.
>
> 3)       My language of choice is Delphi.  Does anyone have a sample
> grammar
> and the Delphi equiv of Test.java that they could send me.?  (George at woh
> dot rr dot com)
>
> 4)      How do I handle case insensitivity?  For example, assume in the
> following grammar that the token 'CALL' can be all caps, all lower letters,
> or a mix.  How do I recognize it?
>
>
>
>
>
> grammar T;
>
> /** Match things like "call foo;" */
>
>
>
> CALL      :               'CALL';
>
> ID  :   ('a'..'z'|'A'..'Z')+ ;
>
> INT :   '0'..'9'+ ;
>
> NEWLINE:'\r'? '\n' ;
>
> WS  :   (' '|'\t')+ { $channel=HIDDEN; } ;
>
> MULT:   '*';
>
> ASSIGN:               '=';
>
> PLUS:    '+';
>
> MINUS:                '-';
>
>
>
>
>
> r : CALL ID ';' {System.out.println("invoke "+$ID.text);} ;
>
>
>
>
>
>
>
>
>
> Thanks,
>
> George Spears
>
>
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>

From george at woh.rr.com  Sun Jun  5 06:59:51 2011
From: george at woh.rr.com (George Spears)
Date: Sun, 5 Jun 2011 09:59:51 -0400
Subject: [antlr-interest] Any way to search the ANTLR interest archives?
Message-ID: <000601cc2388$d74f61d0$85ee2570$@woh.rr.com>

 

Hello,

 

The ANTLR interest archives have a lot of valuable information in them..
(http://www.antlr.org/pipermail/antlr-interest/ )  Is there any way to
search them?  (Other than downloading everything to my local computer?

 

If not, this would be a nice feature to have.

 

Thanks,

George Spears

 


From bkiers at gmail.com  Sun Jun  5 07:04:51 2011
From: bkiers at gmail.com (Bart Kiers)
Date: Sun, 5 Jun 2011 16:04:51 +0200
Subject: [antlr-interest] Any way to search the ANTLR interest archives?
In-Reply-To: <000601cc2388$d74f61d0$85ee2570$@woh.rr.com>
References: <000601cc2388$d74f61d0$85ee2570$@woh.rr.com>
Message-ID: <BANLkTi=y=UQ8JdcH7jLehqY+J0tHY7Ce7w@mail.gmail.com>

Hi George,

Sure, use Markmail: http://antlr.markmail.org/

<http://antlr.markmail.org/>Regards,

Bart.


On Sun, Jun 5, 2011 at 3:59 PM, George Spears <george at woh.rr.com> wrote:

>
>
> Hello,
>
>
>
> The ANTLR interest archives have a lot of valuable information in them..
> (http://www.antlr.org/pipermail/antlr-interest/ )  Is there any way to
> search them?  (Other than downloading everything to my local computer?
>
>
>
> If not, this would be a nice feature to have.
>
>
>
> Thanks,
>
> George Spears
>
>
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>

From WeikEngOff at aol.com  Sun Jun  5 13:30:22 2011
From: WeikEngOff at aol.com (Udo Weik)
Date: Sun, 05 Jun 2011 22:30:22 +0200
Subject: [antlr-interest] New Guy Question...
In-Reply-To: <000901cc2380$87307e30$95917a90$@woh.rr.com>
References: <000901cc2380$87307e30$95917a90$@woh.rr.com>
Message-ID: <4DEBE75E.1030300@aol.com>

Hello George,

> Just dipping my toes in the ANTLR waters do to speak..  In other words, I am
> definitely new at this, so a couple quick questions.

my name is Udo, same situation.

> 1)       Is this list/email address the best way to ask questions?

Yep.

> 2)      Any idea when "The Definitive ANTLR book" will be updated?  It
> appears to be based on 3.0, whereas the ANTLR product is 3.3. I still
> purchased the book, and it is helping tremendously.

I bought both books from Terence and I hope that they will be updated, too.

> 3)       My language of choice is Delphi.  Does anyone have a sample grammar
> and the Delphi equiv of Test.java that they could send me.?  (George at woh
> dot rr dot com)

I'm a C++Builder user. Because I'm a hardware guy and due to some historical
reasons, Delphi (Pascal) isn't MY programming language at all. But of course
I'm interested to get ANTLR working with Delphi, too.

> 4)      How do I handle case insensitivity?  For example, assume in the
> following grammar that the token 'CALL' can be all caps, all lower letters,
> or a mix.  How do I recognize it?

At the moment, I'm still busy to get all my development tools working, so
I can't help you with that ANTLR problem. What I have done so far:
- Tried to get the C target language working with C++Builder
   - Problems with missing Object-files. That's an typical C++Builder-issue.
     I installed now Visual C++ 2010 Express, but no progress at the moment
     because my focus moved to Eclipse temporarily.
- Eclipse
   - installed
   - ANTLR-plug in installed
   - Python-plug in PyDev installed

When you look in the ANTLR interest archives (yep, I looked for an search
option, too) you will find some questions related to C++Builder and Delphi
from me. But until now no echo out of the universe.

Pls. send me a PM, so we can discuss our further cooperation.


Greetings
Udo

From douglasgodfrey at gmail.com  Sun Jun  5 14:47:12 2011
From: douglasgodfrey at gmail.com (Douglas Godfrey)
Date: Sun, 5 Jun 2011 17:47:12 -0400
Subject: [antlr-interest] New Guy Question...
In-Reply-To: <4DEBE75E.1030300@aol.com>
References: <000901cc2380$87307e30$95917a90$@woh.rr.com>
	<4DEBE75E.1030300@aol.com>
Message-ID: <BANLkTims0w44spP+ZfRe22A5CjmG0HFpog@mail.gmail.com>

You have to handle case insensitivity the hard way:

fragment A
    :    'A' | 'a';

fragment B
    :    'B' | 'b';

fragment C
    :    'C' | 'c';

fragment D
    :    'D' | 'd';

fragment E
    :    'E' | 'e';

fragment F
    :    'F' | 'f';

fragment G
    :    'G' | 'g';

fragment H
    :    'H' | 'h';

fragment I
    :    'I' | 'i';

fragment J
    :    'J' | 'j';

fragment K
    :    'K' | 'k';

fragment L
    :    'L' | 'l';

fragment M
    :    'M' | 'm';

fragment N
    :    'N' | 'n';

fragment O
    :    'O' | 'o';

fragment P
    :    'P' | 'p';

fragment Q
    :    'Q' | 'q';

fragment R
    :    'R' | 'r';

fragment S
    :    'S' | 's';

fragment T
    :    'T' | 't';

fragment U
    :    'U' | 'u';

fragment V
    :    'V' | 'v';

fragment W
    :    'W' | 'w';

fragment X
    :    'X' | 'x';

fragment Y
    :    'Y' | 'y';

fragment Z
    :    'Z' | 'z';

    ADD                         :   A D D;
    ALLOCATE              :   A L L O C A T E;
    ALL                          :   A L L;




On Sun, Jun 5, 2011 at 4:30 PM, Udo Weik <WeikEngOff at aol.com> wrote:

> Hello George,
>
> > Just dipping my toes in the ANTLR waters do to speak..  In other words, I
> am
> > definitely new at this, so a couple quick questions.
>
> my name is Udo, same situation.
>
> > 1)       Is this list/email address the best way to ask questions?
>
> Yep.
>
> > 2)      Any idea when "The Definitive ANTLR book" will be updated?  It
> > appears to be based on 3.0, whereas the ANTLR product is 3.3. I still
> > purchased the book, and it is helping tremendously.
>
> I bought both books from Terence and I hope that they will be updated, too.
>
> > 3)       My language of choice is Delphi.  Does anyone have a sample
> grammar
> > and the Delphi equiv of Test.java that they could send me.?  (George at
> woh
> > dot rr dot com)
>
> I'm a C++Builder user. Because I'm a hardware guy and due to some
> historical
> reasons, Delphi (Pascal) isn't MY programming language at all. But of
> course
> I'm interested to get ANTLR working with Delphi, too.
>
> > 4)      How do I handle case insensitivity?  For example, assume in the
> > following grammar that the token 'CALL' can be all caps, all lower
> letters,
> > or a mix.  How do I recognize it?
>
> At the moment, I'm still busy to get all my development tools working, so
> I can't help you with that ANTLR problem. What I have done so far:
> - Tried to get the C target language working with C++Builder
>   - Problems with missing Object-files. That's an typical C++Builder-issue.
>     I installed now Visual C++ 2010 Express, but no progress at the moment
>     because my focus moved to Eclipse temporarily.
> - Eclipse
>   - installed
>   - ANTLR-plug in installed
>   - Python-plug in PyDev installed
>
> When you look in the ANTLR interest archives (yep, I looked for an search
> option, too) you will find some questions related to C++Builder and Delphi
> from me. But until now no echo out of the universe.
>
> Pls. send me a PM, so we can discuss our further cooperation.
>
>
> Greetings
> Udo
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>

From devel at hunsicker.de  Sun Jun  5 14:58:49 2011
From: devel at hunsicker.de (Marco Hunsicker)
Date: Sun, 05 Jun 2011 23:58:49 +0200
Subject: [antlr-interest] New Guy Question...
In-Reply-To: <BANLkTims0w44spP+ZfRe22A5CjmG0HFpog@mail.gmail.com>
References: <000901cc2380$87307e30$95917a90$@woh.rr.com>	<4DEBE75E.1030300@aol.com>
	<BANLkTims0w44spP+ZfRe22A5CjmG0HFpog@mail.gmail.com>
Message-ID: <4DEBFC19.5090003@hunsicker.de>

> You have to handle case insensitivity the hard way:
>
> fragment A
>      :    'A' | 'a';
>
>[...]

I don't think it's a necessity to do it this way. Actually, I think it 
would be better using a specialized input stream that does any necessary 
transformation. Your mileage may vary ;)

Cheers,

Marco

From laguest at archeia.com  Sun Jun  5 18:36:53 2011
From: laguest at archeia.com (Luke A. Guest)
Date: Mon, 06 Jun 2011 02:36:53 +0100
Subject: [antlr-interest] Any way to search the ANTLR interest archives?
In-Reply-To: <000601cc2388$d74f61d0$85ee2570$@woh.rr.com>
References: <000601cc2388$d74f61d0$85ee2570$@woh.rr.com>
Message-ID: <1307324213.3429.2.camel@rogue>

On Sun, 2011-06-05 at 09:59 -0400, George Spears wrote:
> 
> Hello,
> 
>  
> 
> The ANTLR interest archives have a lot of valuable information in them..
> (http://www.antlr.org/pipermail/antlr-interest/ )  Is there any way to
> search them?  (Other than downloading everything to my local computer?

go to googly:

  <input terms> site:http://www.antlr.org/pipermail/antlr-interest/

Luke.




From mauricio.2203 at gmail.com  Sun Jun  5 21:03:54 2011
From: mauricio.2203 at gmail.com (Mauricio)
Date: Mon, 6 Jun 2011 01:03:54 -0300
Subject: [antlr-interest] advices about phrase generation
Message-ID: <BANLkTikUZ=La3ejn4BSdm++oNR3BditgdA@mail.gmail.com>

hi all,

just wondering... about the org.antlr.tool.RandomPhrase source...
can someone help me to adapt it to generate a JMenu ? it should be something
like the image in syntax diagram window from antlrworks.. but navegable by
menus, so I can select a decision/path to follow, instead of the random one
used in that example.

cheers,
Mauricio Chicalski

From p4rst2 at gmail.com  Sun Jun  5 22:24:09 2011
From: p4rst2 at gmail.com (preitz sharma)
Date: Mon, 6 Jun 2011 10:54:09 +0530
Subject: [antlr-interest] Error in the method specialStateTransition(int,
	IntStream)
In-Reply-To: <6418b6b9fc75fa9829de715e0bec030b@mail.gmail.com>
References: <BANLkTi=6kxVbuqkuDv9=H6cgGEAS6NkfLA@mail.gmail.com>
	<6418b6b9fc75fa9829de715e0bec030b@mail.gmail.com>
Message-ID: <BANLkTi=v6ZX96qhx_hXMpsLc+vtNNq9q7A@mail.gmail.com>

Hi Jim,
Thanks for the solution..
But I am facing one problem.

If I say

expr: SET VALUE ( i = Int  { setValue($i.getText());} |
                            v = SPL_CHARS+ {
displayErrorMessage($v.getText());})
       ;
SPL_CHARS  :  ('\U0000' .. '\UFFFF')+;

When I give some non numeric input and call the method
displayErrorMessage($v.getText()) , I get a null pointer exception. It says
that v is null.
What should I do?
I need to capture this value and display the error message..

PS: It is not a simple grammar for SET command. In our product, we are
migrating from manual parsing to ANTLR Parser. So I don't think it is an
over kill :)

On Fri, May 20, 2011 at 9:34 PM, Jim Idle <jimi at temporal-wave.com> wrote:

> SPL_CHARS  :  ('\U0000' .. '\UFFFF')+;
>
>
> The '+' in this means match everything and keep matching everything. You
> cannot use + here, you need:
>
> SPL_CHARS  : .;
>
> Then use SPL_CHARS+ in your grammar not (.)+
>
> Though I think you would be better writing a small piece of code to
> process this really; ANTLR is a bit overkill for "set x y"
>
> Jim
>
> > -----Original Message-----
> > From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> > bounces at antlr.org] On Behalf Of preitz sharma
> > Sent: Friday, May 20, 2011 1:28 AM
> > To: antlr-interest at antlr.org
> > Subject: [antlr-interest] Error in the method
> > specialStateTransition(int, IntStream)
> >
> > Hi,
> > I need to develop a grammar with the following structure:
> >
> > set <Param-Name> <Param-Val>
> >
> > The grammar which I have developed is working fine except for one
> > Problem:
> >
> > -> If the Param-Val does not match the constraints defined for certain
> > Param_Name, then I need to throw an error.
> >
> >     I am doing it like this:
> >
> >     command:    SET ARRAYSIZE ( Int  {/*Process the arraysize*/}
> >                     | (.)+ {/*Display eror message*/})
> >                   ;
> >     Int:    ('0'..'9')+;
> >     Char:    ('a'..'z');
> >     SPL_CHARS  :  ('\U0000' .. '\UFFFF')+;
> >
> > The problem is that I am getting an error: "The code of method
> > specialStateTransition(int, IntStream) is exceeding the 65535 bytes
> > limit"
> > What should I do?
> > PS: The grammar which I have to write is pretty big.. If I make
> > SPL_CHARS
> > :  ('\U0000' .. '\UFFFF')  then its working fine Please suggest some
> > solution..
> >
> > Thanks
> > Preeti Sharma
> >
> > List: http://www.antlr.org/mailman/listinfo/antlr-interest
> > Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
> > email-address
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>



-- 
Regards
Preeti Sharma

From jasperfloor at gmail.com  Mon Jun  6 05:32:21 2011
From: jasperfloor at gmail.com (Jasper Floor)
Date: Mon, 6 Jun 2011 14:32:21 +0200
Subject: [antlr-interest] gunit failing on update to ANTLR 3.3
Message-ID: <BANLkTikWAyKpg4zZV57ZDFvzhGaUyh-YbA@mail.gmail.com>

Dear All,

I have a small DSL for the company I work for. I have used gunit to
make some tests. I also have my own tests next to this but operating
on a higher level.

I recently made a small change to the language and decided to update
Antlr to the latest version.

Unfortunately most of my (g)unit tests broke.

The reason in one case is that the following test (the first test in
the file for whatever that is worth):

"$1=#1;" OK

Does not return OK. The output says parsing stopped at character 4.
Tracing through the generated junit code I found out that the return
value is not OK but the AST. So the test should pass with OK.
This isn't consistent however. Or rather. FAIL seems to work and some AST pass.

All tests pass with antlr 3.2. They also pass my own test suite which
tests at a higher level from gunit.
This implies a problem with gunit.

mvg,
Jasper

From jimi at temporal-wave.com  Mon Jun  6 10:19:59 2011
From: jimi at temporal-wave.com (Jim Idle)
Date: Mon, 6 Jun 2011 10:19:59 -0700
Subject: [antlr-interest] New Guy Question...
In-Reply-To: <BANLkTims0w44spP+ZfRe22A5CjmG0HFpog@mail.gmail.com>
References: <000901cc2380$87307e30$95917a90$@woh.rr.com>	<4DEBE75E.1030300@aol.com>
	<BANLkTims0w44spP+ZfRe22A5CjmG0HFpog@mail.gmail.com>
Message-ID: <ca26c9aa4162622c2e2b621a84181670@mail.gmail.com>

That is a really inefficient way to do it. Please follow the guidelines in
the wiki instead:

http://antlr.org/wiki/pages/viewpage.action?pageId=1782

Jimi

> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of Douglas Godfrey
> Sent: Sunday, June 05, 2011 2:47 PM
> To: Udo Weik
> Cc: George Spears; antlr-interest at antlr.org
> Subject: Re: [antlr-interest] New Guy Question...
>
> You have to handle case insensitivity the hard way:
>
> fragment A
>     :    'A' | 'a';
>
> fragment B
>     :    'B' | 'b';
>
> fragment C
>     :    'C' | 'c';
>
> fragment D
>     :    'D' | 'd';
>
> fragment E
>     :    'E' | 'e';
>
> fragment F
>     :    'F' | 'f';
>
> fragment G
>     :    'G' | 'g';
>
> fragment H
>     :    'H' | 'h';
>
> fragment I
>     :    'I' | 'i';
>
> fragment J
>     :    'J' | 'j';
>
> fragment K
>     :    'K' | 'k';
>
> fragment L
>     :    'L' | 'l';
>
> fragment M
>     :    'M' | 'm';
>
> fragment N
>     :    'N' | 'n';
>
> fragment O
>     :    'O' | 'o';
>
> fragment P
>     :    'P' | 'p';
>
> fragment Q
>     :    'Q' | 'q';
>
> fragment R
>     :    'R' | 'r';
>
> fragment S
>     :    'S' | 's';
>
> fragment T
>     :    'T' | 't';
>
> fragment U
>     :    'U' | 'u';
>
> fragment V
>     :    'V' | 'v';
>
> fragment W
>     :    'W' | 'w';
>
> fragment X
>     :    'X' | 'x';
>
> fragment Y
>     :    'Y' | 'y';
>
> fragment Z
>     :    'Z' | 'z';
>
>     ADD                         :   A D D;
>     ALLOCATE              :   A L L O C A T E;
>     ALL                          :   A L L;
>
>
>
>
> On Sun, Jun 5, 2011 at 4:30 PM, Udo Weik <WeikEngOff at aol.com> wrote:
>
> > Hello George,
> >
> > > Just dipping my toes in the ANTLR waters do to speak..  In other
> > > words, I
> > am
> > > definitely new at this, so a couple quick questions.
> >
> > my name is Udo, same situation.
> >
> > > 1)       Is this list/email address the best way to ask questions?
> >
> > Yep.
> >
> > > 2)      Any idea when "The Definitive ANTLR book" will be updated?
> It
> > > appears to be based on 3.0, whereas the ANTLR product is 3.3. I
> > > still purchased the book, and it is helping tremendously.
> >
> > I bought both books from Terence and I hope that they will be
> updated, too.
> >
> > > 3)       My language of choice is Delphi.  Does anyone have a
> sample
> > grammar
> > > and the Delphi equiv of Test.java that they could send me.?
> (George
> > > at
> > woh
> > > dot rr dot com)
> >
> > I'm a C++Builder user. Because I'm a hardware guy and due to some
> > historical reasons, Delphi (Pascal) isn't MY programming language at
> > all. But of course I'm interested to get ANTLR working with Delphi,
> > too.
> >
> > > 4)      How do I handle case insensitivity?  For example, assume in
> the
> > > following grammar that the token 'CALL' can be all caps, all lower
> > letters,
> > > or a mix.  How do I recognize it?
> >
> > At the moment, I'm still busy to get all my development tools
> working,
> > so I can't help you with that ANTLR problem. What I have done so far:
> > - Tried to get the C target language working with C++Builder
> >   - Problems with missing Object-files. That's an typical C++Builder-
> issue.
> >     I installed now Visual C++ 2010 Express, but no progress at the
> moment
> >     because my focus moved to Eclipse temporarily.
> > - Eclipse
> >   - installed
> >   - ANTLR-plug in installed
> >   - Python-plug in PyDev installed
> >
> > When you look in the ANTLR interest archives (yep, I looked for an
> > search option, too) you will find some questions related to
> C++Builder
> > and Delphi from me. But until now no echo out of the universe.
> >
> > Pls. send me a PM, so we can discuss our further cooperation.
> >
> >
> > Greetings
> > Udo
> >
> > List: http://www.antlr.org/mailman/listinfo/antlr-interest
> > Unsubscribe:
> > http://www.antlr.org/mailman/options/antlr-interest/your-email-
> address
> >
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
> email-address

From douglasgodfrey at gmail.com  Mon Jun  6 12:40:32 2011
From: douglasgodfrey at gmail.com (Douglas Godfrey)
Date: Mon, 6 Jun 2011 15:40:32 -0400
Subject: [antlr-interest] New Guy Question...
In-Reply-To: <4DEBFC19.5090003@hunsicker.de>
References: <000901cc2380$87307e30$95917a90$@woh.rr.com>
	<4DEBE75E.1030300@aol.com>
	<BANLkTims0w44spP+ZfRe22A5CjmG0HFpog@mail.gmail.com>
	<4DEBFC19.5090003@hunsicker.de>
Message-ID: <BANLkTinVvF3ZUWinLcDq+d8Ls=mSNigxrw@mail.gmail.com>

When you implement case insensitive keywords, you may still want case
sensitive identifiers.
If the input stream does case folding, you can't use case sensitive
identifiers.

On Sun, Jun 5, 2011 at 5:58 PM, Marco Hunsicker <devel at hunsicker.de> wrote:

> > You have to handle case insensitivity the hard way:
> >
> > fragment A
> >      :    'A' | 'a';
> >
> >[...]
>
> I don't think it's a necessity to do it this way. Actually, I think it
> would be better using a specialized input stream that does any necessary
> transformation. Your mileage may vary ;)
>
> Cheers,
>
> Marco
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>

From jimi at temporal-wave.com  Mon Jun  6 15:56:24 2011
From: jimi at temporal-wave.com (Jim Idle)
Date: Mon, 6 Jun 2011 15:56:24 -0700
Subject: [antlr-interest] New Guy Question...
In-Reply-To: <BANLkTinVvF3ZUWinLcDq+d8Ls=mSNigxrw@mail.gmail.com>
References: <000901cc2380$87307e30$95917a90$@woh.rr.com>	<4DEBE75E.1030300@aol.com>
	<BANLkTims0w44spP+ZfRe22A5CjmG0HFpog@mail.gmail.com>	<4DEBFC19.5090003@hunsicker.de>
	<BANLkTinVvF3ZUWinLcDq+d8Ls=mSNigxrw@mail.gmail.com>
Message-ID: <e8352bc59263377ff572e69941eaf9a1@mail.gmail.com>

No, that is not correct, please look at the WIKI article. The input stream
merely MATCHES in upper case, it does NOT change the input stream itself,
hence both the keywords and anything else are case preserved when you ask
for their text; that is the whole point of doing it that way. Then you
specify the tokens in the lexer using upper case only and it has the side
effect of simplifying the lexer rules as well as not creating a method
call to match every letter of every keyword (which is a bad idea even with
JIT inlining).

Jim

> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of Douglas Godfrey
> Sent: Monday, June 06, 2011 12:41 PM
> To: Marco Hunsicker
> Cc: antlr-interest at antlr.org
> Subject: Re: [antlr-interest] New Guy Question...
>
> When you implement case insensitive keywords, you may still want case
> sensitive identifiers.
> If the input stream does case folding, you can't use case sensitive
> identifiers.
>
> On Sun, Jun 5, 2011 at 5:58 PM, Marco Hunsicker <devel at hunsicker.de>
> wrote:
>
> > > You have to handle case insensitivity the hard way:
> > >
> > > fragment A
> > >      :    'A' | 'a';
> > >
> > >[...]
> >
> > I don't think it's a necessity to do it this way. Actually, I think
> it
> > would be better using a specialized input stream that does any
> > necessary transformation. Your mileage may vary ;)
> >
> > Cheers,
> >
> > Marco
> >
> > List: http://www.antlr.org/mailman/listinfo/antlr-interest
> > Unsubscribe:
> > http://www.antlr.org/mailman/options/antlr-interest/your-email-
> address
> >
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
> email-address

From simon.marchi at polymtl.ca  Mon Jun  6 16:47:32 2011
From: simon.marchi at polymtl.ca (Simon Marchi)
Date: Mon, 6 Jun 2011 19:47:32 -0400
Subject: [antlr-interest] gunit failing on update to ANTLR 3.3
In-Reply-To: <BANLkTikWAyKpg4zZV57ZDFvzhGaUyh-YbA@mail.gmail.com>
References: <BANLkTikWAyKpg4zZV57ZDFvzhGaUyh-YbA@mail.gmail.com>
Message-ID: <BANLkTimuym=HnNfZqXbOF5fm0wnFC9jAyg@mail.gmail.com>

I also have experienced some strange behavior with gunit, although it
is the first time I use it. I sent a message about this on May 20
(http://www.antlr.org/pipermail/antlr-interest/2011-May/041650.html)
and have seen one or two other on the same subject. I would really
like a follow-up on this !

Thanks,

Simon

On Mon, Jun 6, 2011 at 08:32, Jasper Floor <jasperfloor at gmail.com> wrote:
> Dear All,
>
> I have a small DSL for the company I work for. I have used gunit to
> make some tests. I also have my own tests next to this but operating
> on a higher level.
>
> I recently made a small change to the language and decided to update
> Antlr to the latest version.
>
> Unfortunately most of my (g)unit tests broke.
>
> The reason in one case is that the following test (the first test in
> the file for whatever that is worth):
>
> "$1=#1;" OK
>
> Does not return OK. The output says parsing stopped at character 4.
> Tracing through the generated junit code I found out that the return
> value is not OK but the AST. So the test should pass with OK.
> This isn't consistent however. Or rather. FAIL seems to work and some AST pass.
>
> All tests pass with antlr 3.2. They also pass my own test suite which
> tests at a higher level from gunit.
> This implies a problem with gunit.
>
> mvg,
> Jasper
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>

From parrt at cs.usfca.edu  Mon Jun  6 16:52:26 2011
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon, 6 Jun 2011 16:52:26 -0700
Subject: [antlr-interest] gunit failing on update to ANTLR 3.3
In-Reply-To: <BANLkTimuym=HnNfZqXbOF5fm0wnFC9jAyg@mail.gmail.com>
References: <BANLkTikWAyKpg4zZV57ZDFvzhGaUyh-YbA@mail.gmail.com>
	<BANLkTimuym=HnNfZqXbOF5fm0wnFC9jAyg@mail.gmail.com>
Message-ID: <46ACBC8D-36C1-4F53-B716-7200B1241AE9@cs.usfca.edu>

hi guys. at a conference for another day or two. if no response this  
week, ping me!

a simple grammar / gunit test that fails should yield a quick fix :)

Ter
On Jun 6, 2011, at 4:47 PM, Simon Marchi wrote:

> I also have experienced some strange behavior with gunit, although it
> is the first time I use it. I sent a message about this on May 20
> (http://www.antlr.org/pipermail/antlr-interest/2011-May/041650.html)
> and have seen one or two other on the same subject. I would really
> like a follow-up on this !
>
> Thanks,
>
> Simon
>
> On Mon, Jun 6, 2011 at 08:32, Jasper Floor <jasperfloor at gmail.com>  
> wrote:
>> Dear All,
>>
>> I have a small DSL for the company I work for. I have used gunit to
>> make some tests. I also have my own tests next to this but operating
>> on a higher level.
>>
>> I recently made a small change to the language and decided to update
>> Antlr to the latest version.
>>
>> Unfortunately most of my (g)unit tests broke.
>>
>> The reason in one case is that the following test (the first test in
>> the file for whatever that is worth):
>>
>> "$1=#1;" OK
>>
>> Does not return OK. The output says parsing stopped at character 4.
>> Tracing through the generated junit code I found out that the return
>> value is not OK but the AST. So the test should pass with OK.
>> This isn't consistent however. Or rather. FAIL seems to work and  
>> some AST pass.
>>
>> All tests pass with antlr 3.2. They also pass my own test suite which
>> tests at a higher level from gunit.
>> This implies a problem with gunit.
>>
>> mvg,
>> Jasper
>>
>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address


From peter.nabbefeld at gmx.de  Tue Jun  7 01:32:10 2011
From: peter.nabbefeld at gmx.de (P.N.)
Date: Tue, 07 Jun 2011 10:32:10 +0200
Subject: [antlr-interest] error(208)
Message-ID: <isknoj$sm7$1@dough.gmane.org>

Hello!

Using the following rules for grammar (ESC_SEQ defined as fragment):

root	:	 object;
object	:	'{' props '}';
props	:	prop (',' prop)*;
prop	:	ID ('=' PV | '+' | '-');
PV 	:	STRING | object | INT;
ID	:	('a'..'z'|'A'..'Z') ('a'..'z'|'A'..'Z'|'0'..'9'|'_')*;
INT	:	'0' | ('1'..'9') ('0'..'9')*;
WS	:	(' '|'\t'|'\r'|'\n') {$channel=HIDDEN;};
STRING	:	'"' (ESC_SEQ | ~('\\'|'"'))* '"';

When I try to generate the Java code, the following error message is shown:
"error(208):  The following token definitions can never be matched 
because prior tokens match the same input: INT,STRING"

Why do I get this message, as every lexical rule has its own starting 
character?

Kind regards

Peter


From ranco.marcus at epirion.nl  Tue Jun  7 01:57:22 2011
From: ranco.marcus at epirion.nl (Ranco Marcus)
Date: Tue, 7 Jun 2011 08:57:22 +0000
Subject: [antlr-interest] error(208)
In-Reply-To: <isknoj$sm7$1@dough.gmane.org>
References: <isknoj$sm7$1@dough.gmane.org>
Message-ID: <2B65C901391C804DBB9CF9E6FE30C6F969AC4CFA@sun.epirion.local>

Hello Peter,

You should probably change the name of rule PV to lowercase pv, because it is a parser rule and not a lexer rule. 

Best regards, 

Ranco

________________________________________
From: antlr-interest-bounces at antlr.org [antlr-interest-bounces at antlr.org] on behalf of P.N. [peter.nabbefeld at gmx.de]
Sent: Tuesday, June 07, 2011 10:32 AM
To: antlr-interest at antlr.org
Subject: [antlr-interest] error(208)

Hello!

Using the following rules for grammar (ESC_SEQ defined as fragment):

root    :        object;
object  :       '{' props '}';
props   :       prop (',' prop)*;
prop    :       ID ('=' PV | '+' | '-');
PV      :       STRING | object | INT;
ID      :       ('a'..'z'|'A'..'Z') ('a'..'z'|'A'..'Z'|'0'..'9'|'_')*;
INT     :       '0' | ('1'..'9') ('0'..'9')*;
WS      :       (' '|'\t'|'\r'|'\n') {$channel=HIDDEN;};
STRING  :       '"' (ESC_SEQ | ~('\\'|'"'))* '"';

When I try to generate the Java code, the following error message is shown:
"error(208):  The following token definitions can never be matched
because prior tokens match the same input: INT,STRING"

Why do I get this message, as every lexical rule has its own starting
character?

Kind regards

Peter


List: http://www.antlr.org/mailman/listinfo/antlr-interest
Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address

From peter.nabbefeld at gmx.de  Tue Jun  7 02:07:18 2011
From: peter.nabbefeld at gmx.de (P.N.)
Date: Tue, 07 Jun 2011 11:07:18 +0200
Subject: [antlr-interest] error(208)
In-Reply-To: <2B65C901391C804DBB9CF9E6FE30C6F969AC4CFA@sun.epirion.local>
References: <isknoj$sm7$1@dough.gmane.org>
	<2B65C901391C804DBB9CF9E6FE30C6F969AC4CFA@sun.epirion.local>
Message-ID: <iskpqe$abd$1@dough.gmane.org>

Thank You, works great now!
I'm not used to writing parsers and/or lexers, so I'm still confusing 
about it.

Kind regards
Peter


Ranco Marcus schrieb:
> Hello Peter,
>
> You should probably change the name of rule PV to lowercase pv, because it is a parser rule and not a lexer rule.
>
> Best regards,
>
> Ranco
>
> ________________________________________
> From: antlr-interest-bounces at antlr.org [antlr-interest-bounces at antlr.org] on behalf of P.N. [peter.nabbefeld-Mmb7MZpHnFY at public.gmane.org]
> Sent: Tuesday, June 07, 2011 10:32 AM
> To: antlr-interest at antlr.org
> Subject: [antlr-interest] error(208)
>
> Hello!
>
> Using the following rules for grammar (ESC_SEQ defined as fragment):
>
> root    :        object;
> object  :       '{' props '}';
> props   :       prop (',' prop)*;
> prop    :       ID ('=' PV | '+' | '-');
> PV      :       STRING | object | INT;
> ID      :       ('a'..'z'|'A'..'Z') ('a'..'z'|'A'..'Z'|'0'..'9'|'_')*;
> INT     :       '0' | ('1'..'9') ('0'..'9')*;
> WS      :       (' '|'\t'|'\r'|'\n') {$channel=HIDDEN;};
> STRING  :       '"' (ESC_SEQ | ~('\\'|'"'))* '"';
>
> When I try to generate the Java code, the following error message is shown:
> "error(208):  The following token definitions can never be matched
> because prior tokens match the same input: INT,STRING"
>
> Why do I get this message, as every lexical rule has its own starting
> character?
>
> Kind regards
>
> Peter
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>



From ranco.marcus at epirion.nl  Tue Jun  7 02:17:31 2011
From: ranco.marcus at epirion.nl (Ranco Marcus)
Date: Tue, 7 Jun 2011 09:17:31 +0000
Subject: [antlr-interest] error(208)
In-Reply-To: <iskpqe$abd$1@dough.gmane.org>
References: <isknoj$sm7$1@dough.gmane.org>
	<2B65C901391C804DBB9CF9E6FE30C6F969AC4CFA@sun.epirion.local>,
	<iskpqe$abd$1@dough.gmane.org>
Message-ID: <2B65C901391C804DBB9CF9E6FE30C6F969AC4D1A@sun.epirion.local>

Yes, it takes quite a bit of practise, but you will find a great help in Terence Parr's books.

See the links below.

http://pragprog.com/titles/tpantlr/the-definitive-antlr-reference 

http://pragprog.com/titles/tpdsl/language-implementation-patterns 

Best regards, Ranco

________________________________________
From: antlr-interest-bounces at antlr.org [antlr-interest-bounces at antlr.org] on behalf of P.N. [peter.nabbefeld at gmx.de]
Sent: Tuesday, June 07, 2011 11:07 AM
To: antlr-interest at antlr.org
Subject: Re: [antlr-interest] error(208)

Thank You, works great now!
I'm not used to writing parsers and/or lexers, so I'm still confusing
about it.

Kind regards
Peter


Ranco Marcus schrieb:
> Hello Peter,
>
> You should probably change the name of rule PV to lowercase pv, because it is a parser rule and not a lexer rule.
>
> Best regards,
>
> Ranco
>
> ________________________________________
> From: antlr-interest-bounces at antlr.org [antlr-interest-bounces at antlr.org] on behalf of P.N. [peter.nabbefeld-Mmb7MZpHnFY at public.gmane.org]
> Sent: Tuesday, June 07, 2011 10:32 AM
> To: antlr-interest at antlr.org
> Subject: [antlr-interest] error(208)
>
> Hello!
>
> Using the following rules for grammar (ESC_SEQ defined as fragment):
>
> root    :        object;
> object  :       '{' props '}';
> props   :       prop (',' prop)*;
> prop    :       ID ('=' PV | '+' | '-');
> PV      :       STRING | object | INT;
> ID      :       ('a'..'z'|'A'..'Z') ('a'..'z'|'A'..'Z'|'0'..'9'|'_')*;
> INT     :       '0' | ('1'..'9') ('0'..'9')*;
> WS      :       (' '|'\t'|'\r'|'\n') {$channel=HIDDEN;};
> STRING  :       '"' (ESC_SEQ | ~('\\'|'"'))* '"';
>
> When I try to generate the Java code, the following error message is shown:
> "error(208):  The following token definitions can never be matched
> because prior tokens match the same input: INT,STRING"
>
> Why do I get this message, as every lexical rule has its own starting
> character?
>
> Kind regards
>
> Peter
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>



List: http://www.antlr.org/mailman/listinfo/antlr-interest
Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address

From ranco.marcus at epirion.nl  Tue Jun  7 02:56:51 2011
From: ranco.marcus at epirion.nl (Ranco Marcus)
Date: Tue, 7 Jun 2011 09:56:51 +0000
Subject: [antlr-interest] [CSharp3] rule visibility in composite grammars
In-Reply-To: <000b01cc1ddf$dd84c440$988e4cc0$@pixelminegames.com>
References: <2B65C901391C804DBB9CF9E6FE30C6F95608DE64@sun.epirion.local>
	<001001cbf46e$1b490020$51db0060$@pixelminegames.com>
	<2B65C901391C804DBB9CF9E6FE30C6F9610C9BAC@sun.epirion.local>
	<00cb01cbf52b$99eebd30$cdcc3790$@pixelminegames.com>
	<2B65C901391C804DBB9CF9E6FE30C6F969ABB7F1@sun.epirion.local>
	<000b01cc1ddf$dd84c440$988e4cc0$@pixelminegames.com>
Message-ID: <2B65C901391C804DBB9CF9E6FE30C6F969AC4DC9@sun.epirion.local>

Yes, that sounds like a good idea. I would definitely be in favour of merging the grammars before generating the code. My only concern is that this approach would deviate from the general ANTLR approach.
 
In general, I have found ANTLR to be a great tool for parser generation, but never really liked the way target specific actions are mixed with the grammar definition. Ideally, I would like my grammars to be _completely_ target agnostic (no actions, no visibility modifiers, members, headers, superClass definitions, etc.) and have an abstract mechanism that we can use to hookup actions and implementation specific stuff to the generated grammar.

Do you know if there are plans to redesign the composite grammar feature in v4?

Best regards,

Ranco


> -----Original Message-----
> From: Sam Harwell [mailto:sharwell at pixelminegames.com]
> Sent: Sunday, May 29, 2011 11:08 AM
> To: Ranco Marcus; antlr-interest at antlr.org
> Subject: RE: [antlr-interest] [CSharp3] rule visibility in composite grammars
> 
> I'm not going to be able to address this issue until the second week of June.
> 
> That said, it seems the best way to handle all these issues with delegate
> grammars is to inline their rules before code generation. Suppose you have
> grammar C importing A and B, and you also have D importing A and B. The
> code generation will result in classes C, C_A, C_B, D, D_A, and D_B. Clearly
> the independent generation of C_A and D_A during code generation does
> not allow a single instance of the imported A grammar to be shared by C and
> D. If we instead "flatten" the imported grammar hierarchy and only generate
> classes C and D, then everything behaves like it was written in a single
> grammar. Do you see any immediate problems with this potential approach?
> 
> -----Original Message-----
> From: Ranco Marcus [mailto:ranco.marcus at epirion.nl]
> Sent: Wednesday, May 25, 2011 4:26 PM
> To: Sam Harwell; antlr-interest at antlr.org
> Subject: RE: [antlr-interest] [CSharp3] rule visibility in composite grammars
> 
> Hi Sam/all,
> 
> When a (tree) grammar C imports (tree) grammars A and B, where grammar
> A calls a rule R from grammar B, a call is being made from delegate parser C_A
> to a delegate rule R (targeting C_B) in the composite parser C (its parent).
> 
> Now that the visibility of the delegate rules in C match the visibility of the
> imported grammar, the rule R has to be made public for the above to work.
> In our grammars, we build up internal structures that are subsequently
> processed. In our case, that means that all those internal structures have to
> be made public as well. This could be solved by allowing ANTLR rules to have
> 'internal' visibility. Also, imported grammars can probably remain internal as
> well.
> 
> What are your thoughts on this?
> 
> Thanks, Ranco
> 
> > -----Original Message-----
> > From: Sam Harwell [mailto:sharwell at pixelminegames.com]
> > Sent: Thursday, April 07, 2011 3:57 PM
> > To: Ranco Marcus; antlr-interest at antlr.org
> > Subject: RE: [antlr-interest] [CSharp3] rule visibility in composite
> > grammars
> >
> > The visibility of delegated rules now matches the way they're declared
> > in the imported grammar. Since some of them return nested classes
> > declared in the delegate grammar, I had to make the delegate grammar
> > 'public' and all its rules 'internal'.
> >
> > I fixed the reserved names issue right after releasing 3.3.1, so it'll
> > be included when I release 3.3.2. Note that rule parameters and return
> > values need to include an explicit '@' in their declarations in the
> > grammar, as follows. Labels and rule names do not need the '@'.
> >
> > namespace[int @in] returns [int @out] : as=A B;
> >
> > Sam
> >
> > -----Original Message-----
> > From: Ranco Marcus [mailto:ranco.marcus at epirion.nl]
> > Sent: Thursday, April 07, 2011 6:49 AM
> > To: Sam Harwell; antlr-interest at antlr.org
> > Subject: RE: [antlr-interest] [CSharp3] rule visibility in composite
> > grammars
> >
> > Sounds great, Sam!
> >
> > What will be the visibility of the methods in the 'Delegated rules'
> > region now that the class of the imported grammar is internal? Private
> > or
> internal?
> >
> > Another small suggestion is to prefix variable names (at least those
> > that are reserved in C#) with an at-sign. The generated class for the
> > grammar below has a compile error since 'as' is not a valid variable
> > name
> while '@as' is.
> >
> > name : as=firstName lastName;
> >
> > Are you planning to release new binaries any time soon?
> >
> > Thanks again,
> >
> > Ranco Marcus
> >
> > > -----Original Message-----
> > > From: Sam Harwell [mailto:sharwell at pixelminegames.com]
> > > Sent: woensdag 6 april 2011 17:20
> > > To: Ranco Marcus; antlr-interest at antlr.org
> > > Subject: RE: [antlr-interest] [CSharp3] rule visibility in composite
> > > grammars
> > >
> > > Hi Ranco,
> > >
> > > I made the following changes so far:
> > >
> > > * An imported grammar is always generated as an internal class
> > > instead of a public class.
> > > * Rules within the imported grammar are always declared public since
> > > they are only called by the root grammar.
> > >
> > > How does that sound?
> > >
> > > Sam
> > >
> > > -----Original Message-----
> > > From: antlr-interest-bounces at antlr.org
> > > [mailto:antlr-interest-bounces at antlr.org] On Behalf Of Ranco Marcus
> > > Sent: Wednesday, March 23, 2011 6:40 AM
> > > To: antlr-interest at antlr.org
> > > Subject: [antlr-interest] [CSharp3] rule visibility in composite
> > > grammars
> > >
> > > Hi all/Sam,
> > >
> > > While using the CSharp3 target on a composite grammar, I came across
> > > a few issues regarding rule visibility.
> > >
> > > If no modifier (private, protected, public, ...) is specified for a
> > > rule, the Java target generates public methods (since it is not
> > > implemented IIRC) and the
> > > CSharp3 target generates private methods.
> > >
> > > I like the idea to explicitly specify which rules are callable (by
> > > making them public). However, for composite grammars the generated
> > > parser contains delegate rules for every rule of the imported
> > > grammar, even for rules in the imported grammar that aren't public
> > > (causing compile errors). This can solved this adding a public
> > > modifier to every rule of the imported grammar, but I was wondering
> > > if there's a more
> > convenient way of doing this.
> > >
> > > Furthermore, the methods for the delegate rules in the composite
> > > grammars are all public, regardless of the visibility of the rule in
> > > the
> > imported grammar.
> > > IMHO, it would be better to make them private and use the composite
> > > grammar to explicitly specify the rules that are externally visible.
> > > What are your thoughts on this?
> > >
> > > Btw, the CSharp3 templates are also included in the original Java
> > > tool. Does that mean that we don't need the .NET version of the tool
> > anymore?
> > >
> > >
> > > Best regards,
> > >
> > > Ranco Marcus
> > > Epirion Knowledge Solutions B.V.
> > >
> > >
> > > List: http://www.antlr.org/mailman/listinfo/antlr-interest
> > > Unsubscribe:
> > > http://www.antlr.org/mailman/options/antlr-interest/your-email-addre
> > > ss
> >
> 


From david.smith at cc.gatech.edu  Tue Jun  7 04:41:11 2011
From: david.smith at cc.gatech.edu (David Smith)
Date: Tue, 07 Jun 2011 07:41:11 -0400
Subject: [antlr-interest] AST with optional parameters
Message-ID: <E1QTuen-00028Y-KO@elasmtp-galgo.atl.sa.earthlink.net>

I'm parsing a grammar in which the semicolon on the end of a line is 
optional. So two of the statement rules might be:
    |   (ID GETS expr SEMI) => ID GETS expr SEMI -> ^(GETS ID expr SEMI)
    |   (ID GETS) => ID GETS expr -> ^(GETS ID expr)
Since this occurs with a number of different assignment statements, I 
would really like to collapse this into one rule that looks something 
like this:
    |   (ID GETS) => ID GETS e=expr (s=SEMI)? -> ^(GETS ID $e $s)
but every implementation I can think of either refuses to generate 
the grammar or, as in the case above, generates the grammar but 
decides that the variable 's' is unknown.
Is there a any way to achieve this?

                                 DMS

David M. Smith http://www.cc.gatech.edu/fac/David.Smith
Georgia Institute of Technology, College of Computing
Sent from my ASR-33 Teletype 


From jbb at acm.org  Tue Jun  7 05:22:31 2011
From: jbb at acm.org (John B. Brodie)
Date: Tue, 07 Jun 2011 08:22:31 -0400
Subject: [antlr-interest] AST with optional parameters
In-Reply-To: <E1QTuen-00028Y-KO@elasmtp-galgo.atl.sa.earthlink.net>
References: <E1QTuen-00028Y-KO@elasmtp-galgo.atl.sa.earthlink.net>
Message-ID: <1307449351.12093.2.camel@gecko>

Greetings!

On Tue, 2011-06-07 at 07:41 -0400, David Smith wrote:
> I'm parsing a grammar in which the semicolon on the end of a line is 
> optional. So two of the statement rules might be:
>     |   (ID GETS expr SEMI) => ID GETS expr SEMI -> ^(GETS ID expr SEMI)
>     |   (ID GETS) => ID GETS expr -> ^(GETS ID expr)
> Since this occurs with a number of different assignment statements, I 
> would really like to collapse this into one rule that looks something 
> like this:
>     |   (ID GETS) => ID GETS e=expr (s=SEMI)? -> ^(GETS ID $e $s)
> but every implementation I can think of either refuses to generate 
> the grammar or, as in the case above, generates the grammar but 
> decides that the variable 's' is unknown.
> Is there a any way to achieve this?

Have you tried:

    |   (ID GETS) => ID GETS e=expr (s=SEMI)? -> ^(GETS ID $e $s?)

is the semicolon really necessary in the tree? (e.g. does the presence
of the semicolon actually change the meaning of of the statement?)

perhaps:

    | (ID GETS) => ID GETS^ expr SEMI!?


Hope this helps...
   -jbb



From bkiers at gmail.com  Tue Jun  7 05:23:48 2011
From: bkiers at gmail.com (Bart Kiers)
Date: Tue, 7 Jun 2011 14:23:48 +0200
Subject: [antlr-interest] AST with optional parameters
In-Reply-To: <E1QTuen-00028Y-KO@elasmtp-galgo.atl.sa.earthlink.net>
References: <E1QTuen-00028Y-KO@elasmtp-galgo.atl.sa.earthlink.net>
Message-ID: <BANLkTinQvMsCP922PbUom3eY-dHpG53o3g@mail.gmail.com>

Hi David,

Try this:

(ID GETS) => ID GETS expr SEMI? -> ^(GETS ID expr SEMI?)


Regards,

Bart.


On Tue, Jun 7, 2011 at 1:41 PM, David Smith <david.smith at cc.gatech.edu>wrote:

> I'm parsing a grammar in which the semicolon on the end of a line is
> optional. So two of the statement rules might be:
>    |   (ID GETS expr SEMI) => ID GETS expr SEMI -> ^(GETS ID expr SEMI)
>    |   (ID GETS) => ID GETS expr -> ^(GETS ID expr)
> Since this occurs with a number of different assignment statements, I
> would really like to collapse this into one rule that looks something
> like this:
>    |   (ID GETS) => ID GETS e=expr (s=SEMI)? -> ^(GETS ID $e $s)
> but every implementation I can think of either refuses to generate
> the grammar or, as in the case above, generates the grammar but
> decides that the variable 's' is unknown.
> Is there a any way to achieve this?
>
>                                 DMS
>
> David M. Smith http://www.cc.gatech.edu/fac/David.Smith
> Georgia Institute of Technology, College of Computing
> Sent from my ASR-33 Teletype
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>

From bkiers at gmail.com  Tue Jun  7 05:26:15 2011
From: bkiers at gmail.com (Bart Kiers)
Date: Tue, 7 Jun 2011 14:26:15 +0200
Subject: [antlr-interest] AST with optional parameters
In-Reply-To: <1307449351.12093.2.camel@gecko>
References: <E1QTuen-00028Y-KO@elasmtp-galgo.atl.sa.earthlink.net>
	<1307449351.12093.2.camel@gecko>
Message-ID: <BANLkTin49EyZ7w6+R3dZWxTqLSMEmY9qEw@mail.gmail.com>

Hi John,


> Have you tried:
>
>    |   (ID GETS) => ID GETS e=expr (s=SEMI)? -> ^(GETS ID $e $s?)
>
> is the semicolon really necessary in the tree? (e.g. does the presence
> of the semicolon actually change the meaning of of the statement?)
>

Exactly my thought after I sent my previous e-mail!


> perhaps:
>
>    | (ID GETS) => ID GETS^ expr SEMI!?
>

Or the equivalent rewrite rule:

(ID GETS) => ID GETS expr SEMI? -> ^(GETS ID expr)


Regards,

Bart.



> Hope this helps...
>    -jbb
>
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>

From david.smith at cc.gatech.edu  Tue Jun  7 07:33:29 2011
From: david.smith at cc.gatech.edu (David Smith)
Date: Tue, 07 Jun 2011 10:33:29 -0400
Subject: [antlr-interest] AST with optional parameters
In-Reply-To: <BANLkTin49EyZ7w6+R3dZWxTqLSMEmY9qEw@mail.gmail.com>
References: <E1QTuen-00028Y-KO@elasmtp-galgo.atl.sa.earthlink.net>
	<1307449351.12093.2.camel@gecko>
	<BANLkTin49EyZ7w6+R3dZWxTqLSMEmY9qEw@mail.gmail.com>
Message-ID: <E1QTxLY-0005ym-Jn@elasmtp-banded.atl.sa.earthlink.net>

Yes, the language is Matlab and a semicolon on the end of an 
assignment expression suppresses display of the result of the assignment.
Bart, I appreciate the suggestion; I haven't tried that (much 
simpler) solution - I'll let you know.

                                 DMS
At 08:26 AM 6/7/2011, Bart Kiers wrote:
>Hi John,
>
>Have you tried:
>
>    |   (ID GETS) => ID GETS e=expr (s=SEMI)? -> ^(GETS ID $e $s?)
>
>is the semicolon really necessary in the tree? (e.g. does the presence
>of the semicolon actually change the meaning of of the statement?)
>
>
>Exactly my thought after I sent my previous e-mail!
>
>perhaps:
>
>    | (ID GETS) => ID GETS^ expr SEMI!?
>
>
>Or the equivalent rewrite rule:
>
>(ID GETS) => ID GETS expr SEMI? -> ^(GETS ID expr)
>
>
>Regards,
>
>Bart.
>
>
>
>Hope this helps...
>   -jbb
>
>
>
>List: 
><http://www.antlr.org/mailman/listinfo/antlr-interest>http://www.antlr.org/mailman/listinfo/antlr-interest
>Unsubscribe: 
><http://www.antlr.org/mailman/options/antlr-interest/your-email-address>http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>

David M. Smith http://www.cc.gatech.edu/fac/David.Smith
Georgia Institute of Technology, College of Computing
Sent from my ASR-33 Teletype 


From jbb at acm.org  Tue Jun  7 07:57:49 2011
From: jbb at acm.org (John B. Brodie)
Date: Tue, 07 Jun 2011 10:57:49 -0400
Subject: [antlr-interest] AST with optional parameters
In-Reply-To: <E1QTxLY-0005ym-Jn@elasmtp-banded.atl.sa.earthlink.net>
References: <E1QTuen-00028Y-KO@elasmtp-galgo.atl.sa.earthlink.net>
	<1307449351.12093.2.camel@gecko>
	<BANLkTin49EyZ7w6+R3dZWxTqLSMEmY9qEw@mail.gmail.com>
	<E1QTxLY-0005ym-Jn@elasmtp-banded.atl.sa.earthlink.net>
Message-ID: <1307458669.14067.9.camel@gecko>

On Tue, 2011-06-07 at 10:33 -0400, David Smith wrote:
> Yes, the language is Matlab and a semicolon on the end of an 
> assignment expression suppresses display of the result of the assignment.
> Bart, I appreciate the suggestion; I haven't tried that (much 
> simpler) solution - I'll let you know.


you didn't ask about this but may i suggest an alternative tree form in
this case.

i believe you said that the optional semicolon occurs on many statements
(i am not that familiar with Matlab so sorry if this is obvious). so
rather than having the semicolon on every statement in the tree forcing
the tree processor to check for it on every statement; make the display
operator explicit in the tree at parse-time. something like

...
    | (ID GETS) => gets
...
    ;

gets :
  (ID GETS expr -> ^(GETS ID expr)) (SEMI -> ^(DISPLAY[$SEMI] gets))? ;

where DISPLAY is an imaginary token (i may have the meta-syntax wrong
but i hope you get the idea).

now you have separated the notion of assignment from the notion of
displaying a result. and thereby, i suspect, life becomes easier.

Just my unsolicited 2 cents worth...
   -jbb

> At 08:26 AM 6/7/2011, Bart Kiers wrote:
> >Hi John,
> >
> >Have you tried:
> >
> >    |   (ID GETS) => ID GETS e=expr (s=SEMI)? -> ^(GETS ID $e $s?)
> >
> >is the semicolon really necessary in the tree? (e.g. does the presence
> >of the semicolon actually change the meaning of of the statement?)
> >
> >
> >Exactly my thought after I sent my previous e-mail!
> >
> >perhaps:
> >
> >    | (ID GETS) => ID GETS^ expr SEMI!?
> >
> >
> >Or the equivalent rewrite rule:
> >
> >(ID GETS) => ID GETS expr SEMI? -> ^(GETS ID expr)
> >
> >
> >Regards,
> >
> >Bart.
> >
> >
> >
> >Hope this helps...
> >   -jbb
> >
> >
> >
> >List: 
> ><http://www.antlr.org/mailman/listinfo/antlr-interest>http://www.antlr.org/mailman/listinfo/antlr-interest
> >Unsubscribe: 
> ><http://www.antlr.org/mailman/options/antlr-interest/your-email-address>http://www.antlr.org/mailman/options/antlr-interest/your-email-address
> >
> 
> David M. Smith http://www.cc.gatech.edu/fac/David.Smith
> Georgia Institute of Technology, College of Computing
> Sent from my ASR-33 Teletype 
> 




From douglasgodfrey at gmail.com  Tue Jun  7 08:08:40 2011
From: douglasgodfrey at gmail.com (Douglas Godfrey)
Date: Tue, 7 Jun 2011 11:08:40 -0400
Subject: [antlr-interest] [CSharp3] rule visibility in composite grammars
In-Reply-To: <2B65C901391C804DBB9CF9E6FE30C6F969AC4DC9@sun.epirion.local>
References: <2B65C901391C804DBB9CF9E6FE30C6F95608DE64@sun.epirion.local>
	<001001cbf46e$1b490020$51db0060$@pixelminegames.com>
	<2B65C901391C804DBB9CF9E6FE30C6F9610C9BAC@sun.epirion.local>
	<00cb01cbf52b$99eebd30$cdcc3790$@pixelminegames.com>
	<2B65C901391C804DBB9CF9E6FE30C6F969ABB7F1@sun.epirion.local>
	<000b01cc1ddf$dd84c440$988e4cc0$@pixelminegames.com>
	<2B65C901391C804DBB9CF9E6FE30C6F969AC4DC9@sun.epirion.local>
Message-ID: <BANLkTikDDm75G4u0sRYSY3NvvNhAFsh7Kg@mail.gmail.com>

2 months ago I submitted a feature request for an Antlr built-in symbol
table to support the common
requirements of the majority of block-structured languages. By making the
SymbolTable part of the
Antlr grammar language the interface can be much cleaner. The implementation
of the SymbolTable
classes would be part of the target runtime(s).

i.e.

new_variable_name:
    (Identifier.IsNewSymbol()) => Identifier.AddSymbol();

SymbolTable -> NameSpace -> SymbolScope -> Symbol -> Attribute-List {
optional for structs -> NameSpace }

On Tue, Jun 7, 2011 at 5:56 AM, Ranco Marcus <ranco.marcus at epirion.nl>wrote:

> Yes, that sounds like a good idea. I would definitely be in favour of
> merging the grammars before generating the code. My only concern is that
> this approach would deviate from the general ANTLR approach.
>
> In general, I have found ANTLR to be a great tool for parser generation,
> but never really liked the way target specific actions are mixed with the
> grammar definition. Ideally, I would like my grammars to be _completely_
> target agnostic (no actions, no visibility modifiers, members, headers,
> superClass definitions, etc.) and have an abstract mechanism that we can use
> to hookup actions and implementation specific stuff to the generated
> grammar.
>
> Do you know if there are plans to redesign the composite grammar feature in
> v4?
>
> Best regards,
>
> Ranco
>
>
> > -----Original Message-----
> > From: Sam Harwell [mailto:sharwell at pixelminegames.com]
> > Sent: Sunday, May 29, 2011 11:08 AM
> > To: Ranco Marcus; antlr-interest at antlr.org
> > Subject: RE: [antlr-interest] [CSharp3] rule visibility in composite
> grammars
> >
> > I'm not going to be able to address this issue until the second week of
> June.
> >
> > That said, it seems the best way to handle all these issues with delegate
> > grammars is to inline their rules before code generation. Suppose you
> have
> > grammar C importing A and B, and you also have D importing A and B. The
> > code generation will result in classes C, C_A, C_B, D, D_A, and D_B.
> Clearly
> > the independent generation of C_A and D_A during code generation does
> > not allow a single instance of the imported A grammar to be shared by C
> and
> > D. If we instead "flatten" the imported grammar hierarchy and only
> generate
> > classes C and D, then everything behaves like it was written in a single
> > grammar. Do you see any immediate problems with this potential approach?
> >
> > -----Original Message-----
> > From: Ranco Marcus [mailto:ranco.marcus at epirion.nl]
> > Sent: Wednesday, May 25, 2011 4:26 PM
> > To: Sam Harwell; antlr-interest at antlr.org
> > Subject: RE: [antlr-interest] [CSharp3] rule visibility in composite
> grammars
> >
> > Hi Sam/all,
> >
> > When a (tree) grammar C imports (tree) grammars A and B, where grammar
> > A calls a rule R from grammar B, a call is being made from delegate
> parser C_A
> > to a delegate rule R (targeting C_B) in the composite parser C (its
> parent).
> >
> > Now that the visibility of the delegate rules in C match the visibility
> of the
> > imported grammar, the rule R has to be made public for the above to work.
> > In our grammars, we build up internal structures that are subsequently
> > processed. In our case, that means that all those internal structures
> have to
> > be made public as well. This could be solved by allowing ANTLR rules to
> have
> > 'internal' visibility. Also, imported grammars can probably remain
> internal as
> > well.
> >
> > What are your thoughts on this?
> >
> > Thanks, Ranco
> >
> > > -----Original Message-----
> > > From: Sam Harwell [mailto:sharwell at pixelminegames.com]
> > > Sent: Thursday, April 07, 2011 3:57 PM
> > > To: Ranco Marcus; antlr-interest at antlr.org
> > > Subject: RE: [antlr-interest] [CSharp3] rule visibility in composite
> > > grammars
> > >
> > > The visibility of delegated rules now matches the way they're declared
> > > in the imported grammar. Since some of them return nested classes
> > > declared in the delegate grammar, I had to make the delegate grammar
> > > 'public' and all its rules 'internal'.
> > >
> > > I fixed the reserved names issue right after releasing 3.3.1, so it'll
> > > be included when I release 3.3.2. Note that rule parameters and return
> > > values need to include an explicit '@' in their declarations in the
> > > grammar, as follows. Labels and rule names do not need the '@'.
> > >
> > > namespace[int @in] returns [int @out] : as=A B;
> > >
> > > Sam
> > >
> > > -----Original Message-----
> > > From: Ranco Marcus [mailto:ranco.marcus at epirion.nl]
> > > Sent: Thursday, April 07, 2011 6:49 AM
> > > To: Sam Harwell; antlr-interest at antlr.org
> > > Subject: RE: [antlr-interest] [CSharp3] rule visibility in composite
> > > grammars
> > >
> > > Sounds great, Sam!
> > >
> > > What will be the visibility of the methods in the 'Delegated rules'
> > > region now that the class of the imported grammar is internal? Private
> > > or
> > internal?
> > >
> > > Another small suggestion is to prefix variable names (at least those
> > > that are reserved in C#) with an at-sign. The generated class for the
> > > grammar below has a compile error since 'as' is not a valid variable
> > > name
> > while '@as' is.
> > >
> > > name : as=firstName lastName;
> > >
> > > Are you planning to release new binaries any time soon?
> > >
> > > Thanks again,
> > >
> > > Ranco Marcus
> > >
> > > > -----Original Message-----
> > > > From: Sam Harwell [mailto:sharwell at pixelminegames.com]
> > > > Sent: woensdag 6 april 2011 17:20
> > > > To: Ranco Marcus; antlr-interest at antlr.org
> > > > Subject: RE: [antlr-interest] [CSharp3] rule visibility in composite
> > > > grammars
> > > >
> > > > Hi Ranco,
> > > >
> > > > I made the following changes so far:
> > > >
> > > > * An imported grammar is always generated as an internal class
> > > > instead of a public class.
> > > > * Rules within the imported grammar are always declared public since
> > > > they are only called by the root grammar.
> > > >
> > > > How does that sound?
> > > >
> > > > Sam
> > > >
> > > > -----Original Message-----
> > > > From: antlr-interest-bounces at antlr.org
> > > > [mailto:antlr-interest-bounces at antlr.org] On Behalf Of Ranco Marcus
> > > > Sent: Wednesday, March 23, 2011 6:40 AM
> > > > To: antlr-interest at antlr.org
> > > > Subject: [antlr-interest] [CSharp3] rule visibility in composite
> > > > grammars
> > > >
> > > > Hi all/Sam,
> > > >
> > > > While using the CSharp3 target on a composite grammar, I came across
> > > > a few issues regarding rule visibility.
> > > >
> > > > If no modifier (private, protected, public, ...) is specified for a
> > > > rule, the Java target generates public methods (since it is not
> > > > implemented IIRC) and the
> > > > CSharp3 target generates private methods.
> > > >
> > > > I like the idea to explicitly specify which rules are callable (by
> > > > making them public). However, for composite grammars the generated
> > > > parser contains delegate rules for every rule of the imported
> > > > grammar, even for rules in the imported grammar that aren't public
> > > > (causing compile errors). This can solved this adding a public
> > > > modifier to every rule of the imported grammar, but I was wondering
> > > > if there's a more
> > > convenient way of doing this.
> > > >
> > > > Furthermore, the methods for the delegate rules in the composite
> > > > grammars are all public, regardless of the visibility of the rule in
> > > > the
> > > imported grammar.
> > > > IMHO, it would be better to make them private and use the composite
> > > > grammar to explicitly specify the rules that are externally visible.
> > > > What are your thoughts on this?
> > > >
> > > > Btw, the CSharp3 templates are also included in the original Java
> > > > tool. Does that mean that we don't need the .NET version of the tool
> > > anymore?
> > > >
> > > >
> > > > Best regards,
> > > >
> > > > Ranco Marcus
> > > > Epirion Knowledge Solutions B.V.
> > > >
> > > >
> > > > List: http://www.antlr.org/mailman/listinfo/antlr-interest
> > > > Unsubscribe:
> > > > http://www.antlr.org/mailman/options/antlr-interest/your-email-addre
> > > > ss
> > >
> >
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>

From jimi at temporal-wave.com  Tue Jun  7 09:30:03 2011
From: jimi at temporal-wave.com (Jim Idle)
Date: Tue, 7 Jun 2011 09:30:03 -0700
Subject: [antlr-interest] AST with optional parameters
In-Reply-To: <E1QTuen-00028Y-KO@elasmtp-galgo.atl.sa.earthlink.net>
References: <E1QTuen-00028Y-KO@elasmtp-galgo.atl.sa.earthlink.net>
Message-ID: <0465d6147c5b90871539b5388115e7dd@mail.gmail.com>

Why do you want the SEMI in your AST?

Jim

> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of David Smith
> Sent: Tuesday, June 07, 2011 4:41 AM
> To: antlr-interest at antlr.org
> Subject: [antlr-interest] AST with optional parameters
>
> I'm parsing a grammar in which the semicolon on the end of a line is
> optional. So two of the statement rules might be:
>     |   (ID GETS expr SEMI) => ID GETS expr SEMI -> ^(GETS ID expr
> SEMI)
>     |   (ID GETS) => ID GETS expr -> ^(GETS ID expr)
> Since this occurs with a number of different assignment statements, I
> would really like to collapse this into one rule that looks something
> like this:
>     |   (ID GETS) => ID GETS e=expr (s=SEMI)? -> ^(GETS ID $e $s)
> but every implementation I can think of either refuses to generate the
> grammar or, as in the case above, generates the grammar but decides
> that the variable 's' is unknown.
> Is there a any way to achieve this?
>
>                                  DMS
>
> David M. Smith http://www.cc.gatech.edu/fac/David.Smith
> Georgia Institute of Technology, College of Computing Sent from my ASR-
> 33 Teletype
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
> email-address

From bkiers at gmail.com  Tue Jun  7 10:14:05 2011
From: bkiers at gmail.com (Bart Kiers)
Date: Tue, 7 Jun 2011 19:14:05 +0200
Subject: [antlr-interest] AST with optional parameters
In-Reply-To: <0465d6147c5b90871539b5388115e7dd@mail.gmail.com>
References: <E1QTuen-00028Y-KO@elasmtp-galgo.atl.sa.earthlink.net>
	<0465d6147c5b90871539b5388115e7dd@mail.gmail.com>
Message-ID: <BANLkTi=FizySpSw2J50qZ3cw+MTX5UsV-g@mail.gmail.com>

Jim,

>From an earlier message, David wrote: *"Yes, the language is Matlab and a
semicolon on the end of an assignment expression suppresses display of the
result of the assignment. ..."*

Bart.


On Tue, Jun 7, 2011 at 6:30 PM, Jim Idle <jimi at temporal-wave.com> wrote:

> Why do you want the SEMI in your AST?
>
> Jim
>
> > -----Original Message-----
> > From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> > bounces at antlr.org] On Behalf Of David Smith
> > Sent: Tuesday, June 07, 2011 4:41 AM
> > To: antlr-interest at antlr.org
> > Subject: [antlr-interest] AST with optional parameters
> >
> > I'm parsing a grammar in which the semicolon on the end of a line is
> > optional. So two of the statement rules might be:
> >     |   (ID GETS expr SEMI) => ID GETS expr SEMI -> ^(GETS ID expr
> > SEMI)
> >     |   (ID GETS) => ID GETS expr -> ^(GETS ID expr)
> > Since this occurs with a number of different assignment statements, I
> > would really like to collapse this into one rule that looks something
> > like this:
> >     |   (ID GETS) => ID GETS e=expr (s=SEMI)? -> ^(GETS ID $e $s)
> > but every implementation I can think of either refuses to generate the
> > grammar or, as in the case above, generates the grammar but decides
> > that the variable 's' is unknown.
> > Is there a any way to achieve this?
> >
> >                                  DMS
> >
> > David M. Smith http://www.cc.gatech.edu/fac/David.Smith
> > Georgia Institute of Technology, College of Computing Sent from my ASR-
> > 33 Teletype
> >
> >
> > List: http://www.antlr.org/mailman/listinfo/antlr-interest
> > Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
> > email-address
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>

From jimi at temporal-wave.com  Tue Jun  7 10:57:12 2011
From: jimi at temporal-wave.com (Jim Idle)
Date: Tue, 7 Jun 2011 10:57:12 -0700
Subject: [antlr-interest] AST with optional parameters
In-Reply-To: <BANLkTi=FizySpSw2J50qZ3cw+MTX5UsV-g@mail.gmail.com>
References: <E1QTuen-00028Y-KO@elasmtp-galgo.atl.sa.earthlink.net>
	<0465d6147c5b90871539b5388115e7dd@mail.gmail.com>
	<BANLkTi=FizySpSw2J50qZ3cw+MTX5UsV-g@mail.gmail.com>
Message-ID: <921eeb90df8cbbd0287859eb4411e321@mail.gmail.com>

It was not in any earlier message than the one I replied to. MATLAB is such
an abysmal language ;-)



Jim



*From:* Bart Kiers [mailto:bkiers at gmail.com]
*Sent:* Tuesday, June 07, 2011 10:14 AM
*To:* Jim Idle
*Cc:* antlr-interest at antlr.org
*Subject:* Re: [antlr-interest] AST with optional parameters



Jim,



>From an earlier message, David wrote: *"**Yes, the language is Matlab and a
semicolon on the end of an assignment expression suppresses display of the
result of the assignment. ...**"*



Bart.





On Tue, Jun 7, 2011 at 6:30 PM, Jim Idle <jimi at temporal-wave.com> wrote:

Why do you want the SEMI in your AST?

Jim

> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of David Smith
> Sent: Tuesday, June 07, 2011 4:41 AM
> To: antlr-interest at antlr.org
> Subject: [antlr-interest] AST with optional parameters

>
> I'm parsing a grammar in which the semicolon on the end of a line is
> optional. So two of the statement rules might be:
>     |   (ID GETS expr SEMI) => ID GETS expr SEMI -> ^(GETS ID expr
> SEMI)
>     |   (ID GETS) => ID GETS expr -> ^(GETS ID expr)
> Since this occurs with a number of different assignment statements, I
> would really like to collapse this into one rule that looks something
> like this:
>     |   (ID GETS) => ID GETS e=expr (s=SEMI)? -> ^(GETS ID $e $s)
> but every implementation I can think of either refuses to generate the
> grammar or, as in the case above, generates the grammar but decides
> that the variable 's' is unknown.
> Is there a any way to achieve this?
>
>                                  DMS
>
> David M. Smith http://www.cc.gatech.edu/fac/David.Smith
> Georgia Institute of Technology, College of Computing Sent from my ASR-
> 33 Teletype
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
> email-address

List: http://www.antlr.org/mailman/listinfo/antlr-interest
Unsubscribe:
http://www.antlr.org/mailman/options/antlr-interest/your-email-address

From olivier.sallou at irisa.fr  Wed Jun  8 02:23:26 2011
From: olivier.sallou at irisa.fr (Olivier Sallou)
Date: Wed, 08 Jun 2011 11:23:26 +0200
Subject: [antlr-interest] issue with antlr requiring a whitespace at a
	specific place
Message-ID: <4DEF3F8E.1080702@irisa.fr>

Hi,
I have an issue with antlrworks (1.4.2), where for a specific grammar,
it requires a whitespace.
I upgraded from antlrworks 1.1.7 where the same did not asked for the
whitespace.

example:
        '?' string
        | '%' string ':' percentage=INT
        | ...

string    : '"' LOWID '"';
LOWID    : ('a'..'z'|'\-')+;
INT :   ('0'..'9')+ ;

If I call my example rules with:
  ?\"acgt\"
it works fine
but if I call
 %\"acgt\":30

If fails.

At least if I add a whitespace between % and \"acgt\", it works:
 % \"acgt\":30

I really can't understand why a whitespace is required here, and only
here....

Thanks for your help

Olivier


-- 
gpg key id: 4096R/326D8438  (pgp.mit.edu)
Key fingerprint = 5FB4 6F83 D3B9 5204 6335  D26D 78DC 68DB 326D 8438



From bkiers at gmail.com  Wed Jun  8 03:58:14 2011
From: bkiers at gmail.com (Bart Kiers)
Date: Wed, 8 Jun 2011 12:58:14 +0200
Subject: [antlr-interest] issue with antlr requiring a whitespace at a
 specific place
In-Reply-To: <4DEF3F8E.1080702@irisa.fr>
References: <4DEF3F8E.1080702@irisa.fr>
Message-ID: <BANLkTik8qYdEwN=D5NJjzW12n2XuuPPOjg@mail.gmail.com>

Hi Olivier,

I can't reproduce it. I tested with ANTLRWorks 1.4.2 as well.
See the attached screenshot.

Regards,

Bart.


On Wed, Jun 8, 2011 at 11:23 AM, Olivier Sallou <olivier.sallou at irisa.fr>wrote:

> Hi,
> I have an issue with antlrworks (1.4.2), where for a specific grammar,
> it requires a whitespace.
> I upgraded from antlrworks 1.1.7 where the same did not asked for the
> whitespace.
>
> example:
>        '?' string
>        | '%' string ':' percentage=INT
>        | ...
>
> string    : '"' LOWID '"';
> LOWID    : ('a'..'z'|'\-')+;
> INT :   ('0'..'9')+ ;
>
> If I call my example rules with:
>  ?\"acgt\"
> it works fine
> but if I call
>  %\"acgt\":30
>
> If fails.
>
> At least if I add a whitespace between % and \"acgt\", it works:
>  % \"acgt\":30
>
> I really can't understand why a whitespace is required here, and only
> here....
>
> Thanks for your help
>
> Olivier
>
>
> --
> gpg key id: 4096R/326D8438  (pgp.mit.edu)
> Key fingerprint = 5FB4 6F83 D3B9 5204 6335  D26D 78DC 68DB 326D 8438
>
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: aw.png
Type: image/png
Size: 36008 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20110608/7d69138d/attachment.png 

From olivier.sallou at irisa.fr  Wed Jun  8 04:04:54 2011
From: olivier.sallou at irisa.fr (Olivier Sallou)
Date: Wed, 08 Jun 2011 13:04:54 +0200
Subject: [antlr-interest] issue with antlr requiring a whitespace at a
 specific place
In-Reply-To: <BANLkTik8qYdEwN=D5NJjzW12n2XuuPPOjg@mail.gmail.com>
References: <4DEF3F8E.1080702@irisa.fr>
	<BANLkTik8qYdEwN=D5NJjzW12n2XuuPPOjg@mail.gmail.com>
Message-ID: <4DEF5756.6090300@irisa.fr>

For the same, I have mismatched token. I simplified it to maximum (see
first line of attached screenshot)

However I see in my editor (antlrworks) in interpreter tab: "Ignore
rules: WHITESPACE".

I wonder why, I did not ask for such ignore, and I do not see how to
remove this.

Maybe this occurs in generated code too.

Olivier

Le 6/8/11 12:58 PM, Bart Kiers a ?crit :
> Hi Olivier,
>
> I can't reproduce it. I tested with ANTLRWorks 1.4.2 as well.
> See the attached screenshot.
>
> Regards,
>
> Bart.
>
>
> On Wed, Jun 8, 2011 at 11:23 AM, Olivier Sallou <olivier.sallou at irisa.fr>wrote:
>
>> Hi,
>> I have an issue with antlrworks (1.4.2), where for a specific grammar,
>> it requires a whitespace.
>> I upgraded from antlrworks 1.1.7 where the same did not asked for the
>> whitespace.
>>
>> example:
>>        '?' string
>>        | '%' string ':' percentage=INT
>>        | ...
>>
>> string    : '"' LOWID '"';
>> LOWID    : ('a'..'z'|'\-')+;
>> INT :   ('0'..'9')+ ;
>>
>> If I call my example rules with:
>>  ?\"acgt\"
>> it works fine
>> but if I call
>>  %\"acgt\":30
>>
>> If fails.
>>
>> At least if I add a whitespace between % and \"acgt\", it works:
>>  % \"acgt\":30
>>
>> I really can't understand why a whitespace is required here, and only
>> here....
>>
>> Thanks for your help
>>
>> Olivier
>>
>>
>> --
>> gpg key id: 4096R/326D8438  (pgp.mit.edu)
>> Key fingerprint = 5FB4 6F83 D3B9 5204 6335  D26D 78DC 68DB 326D 8438
>>
>>
>>
>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>> Unsubscribe:
>> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>>

-- 
gpg key id: 4096R/326D8438  (pgp.mit.edu)
Key fingerprint = 5FB4 6F83 D3B9 5204 6335  D26D 78DC 68DB 326D 8438


-------------- next part --------------
A non-text attachment was scrubbed...
Name: Screen shot 2011-06-08 at 1.03.33 PM.png
Type: image/png
Size: 107520 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20110608/d4a58023/attachment.png 

From bkiers at gmail.com  Wed Jun  8 05:39:37 2011
From: bkiers at gmail.com (Bart Kiers)
Date: Wed, 8 Jun 2011 14:39:37 +0200
Subject: [antlr-interest] issue with antlr requiring a whitespace at a
 specific place
In-Reply-To: <4DEF5756.6090300@irisa.fr>
References: <4DEF3F8E.1080702@irisa.fr>
	<BANLkTik8qYdEwN=D5NJjzW12n2XuuPPOjg@mail.gmail.com>
	<4DEF5756.6090300@irisa.fr>
Message-ID: <BANLkTikhSWy48FjZPLOmkh+wobHnqWjj5g@mail.gmail.com>

Well, your grammar is now quite different than the few rule you posted (more
rules, and not everything is visible, so I can't test it myself).
All I can say is that the interpreter from ANTLRWorks has (quite some)
odd quirks, so best not use it. If something seems odd in the interpreter,
either create a little test rig yourself, or use ANTLRWorks' debugger to be
sure if the error lies in your grammar, or the interpreter.

Good luck!

Regards,

Bart.


On Wed, Jun 8, 2011 at 1:04 PM, Olivier Sallou <olivier.sallou at irisa.fr>wrote:

> For the same, I have mismatched token. I simplified it to maximum (see
> first line of attached screenshot)
>
> However I see in my editor (antlrworks) in interpreter tab: "Ignore
> rules: WHITESPACE".
>
> I wonder why, I did not ask for such ignore, and I do not see how to
> remove this.
>
> Maybe this occurs in generated code too.
>
> Olivier
>
> Le 6/8/11 12:58 PM, Bart Kiers a ?crit :
> > Hi Olivier,
> >
> > I can't reproduce it. I tested with ANTLRWorks 1.4.2 as well.
> > See the attached screenshot.
> >
> > Regards,
> >
> > Bart.
> >
> >
> > On Wed, Jun 8, 2011 at 11:23 AM, Olivier Sallou <olivier.sallou at irisa.fr
> >wrote:
> >
> >> Hi,
> >> I have an issue with antlrworks (1.4.2), where for a specific grammar,
> >> it requires a whitespace.
> >> I upgraded from antlrworks 1.1.7 where the same did not asked for the
> >> whitespace.
> >>
> >> example:
> >>        '?' string
> >>        | '%' string ':' percentage=INT
> >>        | ...
> >>
> >> string    : '"' LOWID '"';
> >> LOWID    : ('a'..'z'|'\-')+;
> >> INT :   ('0'..'9')+ ;
> >>
> >> If I call my example rules with:
> >>  ?\"acgt\"
> >> it works fine
> >> but if I call
> >>  %\"acgt\":30
> >>
> >> If fails.
> >>
> >> At least if I add a whitespace between % and \"acgt\", it works:
> >>  % \"acgt\":30
> >>
> >> I really can't understand why a whitespace is required here, and only
> >> here....
> >>
> >> Thanks for your help
> >>
> >> Olivier
> >>
> >>
> >> --
> >> gpg key id: 4096R/326D8438  (pgp.mit.edu)
> >> Key fingerprint = 5FB4 6F83 D3B9 5204 6335  D26D 78DC 68DB 326D 8438
> >>
> >>
> >>
> >> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> >> Unsubscribe:
> >> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
> >>
>
> --
> gpg key id: 4096R/326D8438  (pgp.mit.edu)
> Key fingerprint = 5FB4 6F83 D3B9 5204 6335  D26D 78DC 68DB 326D 8438
>
>
>

From arthernan at hotmail.com  Wed Jun  8 07:20:42 2011
From: arthernan at hotmail.com (Arturo Hernandez)
Date: Wed, 8 Jun 2011 09:20:42 -0500
Subject: [antlr-interest] Something in my little grammar throws an Unable to
 cast CommonTree to type GrammarAST
Message-ID: <BLU152-w375E963690B6710D6494A2B6620@phx.gbl>


This is a modified version of the xml example from the ANTLR website. Eventually I want to extract data from XHTML.
I probably just need a second to spot a simple mistake. I have the reference book, not finished it yet, but did spend plenty of time on this and I am stuck.
error(100): XMLParser.g:29:11: syntax error: antlr: NoViableAltException(72@[475:4: ( ( id ( ASSIGN | PLUS_ASSIGN ) ( atom | block ) ) (sub= ebnfSuffix[root_0,false] )? |a= atom (sub2= ebnfSuffix[$a.tree,false] )? | ebnf | FORCED_ACTION | ACTION |p= SEMPRED ( IMPLIES )? |t3= tree_ )])error(100): XMLParser.g:29:11: syntax error: antlr: NoViableAltException(72@[475:4: ( ( id ( ASSIGN | PLUS_ASSIGN ) ( atom | block ) ) (sub= ebnfSuffix[root_0,false] )? |a= atom (sub2= ebnfSuffix[$a.tree,false] )? | ebnf | FORCED_ACTION | ACTION |p= SEMPRED ( IMPLIES )? |t3= tree_ )])error(100): XMLParser.g:0:1: syntax error: assign.types: MismatchedTreeNodeException(0!=32)error(100): XMLParser.g:0:1: syntax error: assign.types: MismatchedTreeNodeException(3!=33)error(100): XMLParser.g:0:1: syntax error: assign.types: MismatchedTreeNodeException(3!=34)error(10):  internal error: XMLParser.g : System.InvalidCastException: Unable to cast object of type 'Antlr.Runtime.Tree.CommonTree' to type 'Antlr3.Tool.GrammarAST'.


parser  grammar XMLParser;options{    language=CSharp3;    tokenVocab=XMLLexer;}
@header {using System;}@namespace { XMLParserN }
document  : element ;
element    : startTag         (element        | PCDATA        )*        endTag    | emptyElement    ;
startTag  	: TAG_START_OPEN GENERIC_ID {Console.Write(@"<" + $GENERIC_ID.text); }	  (attribute {if $attribute.cl!=@"" then Console.Write(@" class=\"" + $attribute.cl + @"\"");}	  	)* 	  TAG_CLOSE {Console.Write(@">" + $GENERIC_ID.text); }
attribute returns [string cl]	: GENERIC_ID ATTR_EQ ATTR_VALUE 		{ if ($GENERIC_ID.text==@"class") $cl = $ATTR_VALUE.text else $cl = @""; } ;
endTag 	: TAG_END_OPEN GENERIC_ID TAG_CLOSE 	{Console.Write(@"</" + $GENERIC_ID.text + @">"); };		
emptyElement : TAG_START_OPEN GENERIC_ID  (attribute)* TAG_EMPTY_CLOSE ; 		 	   		  

From jimi at temporal-wave.com  Wed Jun  8 09:01:44 2011
From: jimi at temporal-wave.com (Jim Idle)
Date: Wed, 8 Jun 2011 09:01:44 -0700
Subject: [antlr-interest] Something in my little grammar throws an
 Unable to cast CommonTree to type GrammarAST
In-Reply-To: <BLU152-w375E963690B6710D6494A2B6620@phx.gbl>
References: <BLU152-w375E963690B6710D6494A2B6620@phx.gbl>
Message-ID: <35f8296f013d247a6f3177132ab876ab@mail.gmail.com>

You are looking too far down the error message list. Fix the error at:


> error(100): XMLParser.g:29:11: syntax error: antlr:


First.

Jim

> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of Arturo Hernandez
> Sent: Wednesday, June 08, 2011 7:21 AM
> To: AN TLR
> Subject: [antlr-interest] Something in my little grammar throws an
> Unable to cast CommonTree to type GrammarAST
>
>
> This is a modified version of the xml example from the ANTLR website.
> Eventually I want to extract data from XHTML.
> I probably just need a second to spot a simple mistake. I have the
> reference book, not finished it yet, but did spend plenty of time on
> this and I am stuck.
> error(100): XMLParser.g:29:11: syntax error: antlr:
> NoViableAltException(72@[475:4: ( ( id ( ASSIGN | PLUS_ASSIGN ) ( atom
> | block ) ) (sub= ebnfSuffix[root_0,false] )? |a= atom (sub2=
> ebnfSuffix[$a.tree,false] )? | ebnf | FORCED_ACTION | ACTION |p=
> SEMPRED ( IMPLIES )? |t3= tree_ )])error(100): XMLParser.g:29:11:
> syntax error: antlr: NoViableAltException(72@[475:4: ( ( id ( ASSIGN |
> PLUS_ASSIGN ) ( atom | block ) ) (sub= ebnfSuffix[root_0,false] )? |a=
> atom (sub2= ebnfSuffix[$a.tree,false] )? | ebnf | FORCED_ACTION |
> ACTION |p= SEMPRED ( IMPLIES )? |t3= tree_ )])error(100):
> XMLParser.g:0:1: syntax error: assign.types:
> MismatchedTreeNodeException(0!=32)error(100): XMLParser.g:0:1: syntax
> error: assign.types: MismatchedTreeNodeException(3!=33)error(100):
> XMLParser.g:0:1: syntax error: assign.types:
> MismatchedTreeNodeException(3!=34)error(10):  internal error:
> XMLParser.g : System.InvalidCastException: Unable to cast object of
> type 'Antlr.Runtime.Tree.CommonTree' to type 'Antlr
> 3.Tool.GrammarAST'.
>
>
> parser  grammar XMLParser;options{    language=CSharp3;
> tokenVocab=XMLLexer;}
> @header {using System;}@namespace { XMLParserN } document  : element ;
> element    : startTag         (element        | PCDATA        )*
> endTag    | emptyElement    ;
> startTag  	: TAG_START_OPEN GENERIC_ID {Console.Write(@"<" +
> $GENERIC_ID.text); }	  (attribute {if $attribute.cl!=@"" then
> Console.Write(@" class=\"" + $attribute.cl + @"\"");}	  	)*
> TAG_CLOSE {Console.Write(@">" + $GENERIC_ID.text); }
> attribute returns [string cl]	: GENERIC_ID ATTR_EQ ATTR_VALUE
> 	{ if ($GENERIC_ID.text==@"class") $cl = $ATTR_VALUE.text else $cl
> = @""; } ;
> endTag 	: TAG_END_OPEN GENERIC_ID TAG_CLOSE
{Console.Write(@"</" +
> $GENERIC_ID.text + @">"); };
> emptyElement : TAG_START_OPEN GENERIC_ID  (attribute)* TAG_EMPTY_CLOSE
> ;
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
> email-address

From arthernan at hotmail.com  Wed Jun  8 11:09:00 2011
From: arthernan at hotmail.com (Arturo Hernandez)
Date: Wed, 8 Jun 2011 13:09:00 -0500
Subject: [antlr-interest] Something in my little grammar throws an
 Unable to cast CommonTree to type GrammarAST
In-Reply-To: <BLU152-w30976F4FEC91FAACEEC765B6620@phx.gbl>
References: <BLU152-w375E963690B6710D6494A2B6620@phx.gbl>,
	<35f8296f013d247a6f3177132ab876ab@mail.gmail.com>,
	<BLU152-w30976F4FEC91FAACEEC765B6620@phx.gbl>
Message-ID: <blu152-w503BD1D96D5EF560B0E7C3B6620@phx.gbl>











Thanks Jim,
I looked at " XMLParser.g:29:11" before doing the first post. That pointed me to "returns" in this rule. My only idea is that there is something I need to do at the top of the grammar definition, like set output to AST. Before using "returns". At that point I started to "backtrack" and looked at the rest of the stack.
I am still stuck.
attribute returns [string cl]	: GENERIC_ID ATTR_EQ ATTR_VALUE


> From: jimi at temporal-wave.com
> Date: Wed, 8 Jun 2011 09:01:44 -0700
> To: antlr-interest at antlr.org
> Subject: Re: [antlr-interest] Something in my little grammar throws an Unable to cast CommonTree to type GrammarAST
> 
> You are looking too far down the error message list. Fix the error at:
> 
> 
> > error(100): XMLParser.g:29:11: syntax error: antlr:
> 
> 
> First.
> 
> Jim
> 
> > -----Original Message-----
> > From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> > bounces at antlr.org] On Behalf Of Arturo Hernandez
> > Sent: Wednesday, June 08, 2011 7:21 AM
> > To: AN TLR
> > Subject: [antlr-interest] Something in my little grammar throws an
> > Unable to cast CommonTree to type GrammarAST
> >
> >
> > This is a modified version of the xml example from the ANTLR website.
> > Eventually I want to extract data from XHTML.
> > I probably just need a second to spot a simple mistake. I have the
> > reference book, not finished it yet, but did spend plenty of time on
> > this and I am stuck.
> > error(100): XMLParser.g:29:11: syntax error: antlr:
> > NoViableAltException(72@[475:4: ( ( id ( ASSIGN | PLUS_ASSIGN ) ( atom
> > | block ) ) (sub= ebnfSuffix[root_0,false] )? |a= atom (sub2=
> > ebnfSuffix[$a.tree,false] )? | ebnf | FORCED_ACTION | ACTION |p=
> > SEMPRED ( IMPLIES )? |t3= tree_ )])error(100): XMLParser.g:29:11:
> > syntax error: antlr: NoViableAltException(72@[475:4: ( ( id ( ASSIGN |
> > PLUS_ASSIGN ) ( atom | block ) ) (sub= ebnfSuffix[root_0,false] )? |a=
> > atom (sub2= ebnfSuffix[$a.tree,false] )? | ebnf | FORCED_ACTION |
> > ACTION |p= SEMPRED ( IMPLIES )? |t3= tree_ )])error(100):
> > XMLParser.g:0:1: syntax error: assign.types:
> > MismatchedTreeNodeException(0!=32)error(100): XMLParser.g:0:1: syntax
> > error: assign.types: MismatchedTreeNodeException(3!=33)error(100):
> > XMLParser.g:0:1: syntax error: assign.types:
> > MismatchedTreeNodeException(3!=34)error(10):  internal error:
> > XMLParser.g : System.InvalidCastException: Unable to cast object of
> > type 'Antlr.Runtime.Tree.CommonTree' to type 'Antlr
> > 3.Tool.GrammarAST'.
> >
> >
> > parser  grammar XMLParser;options{    language=CSharp3;
> > tokenVocab=XMLLexer;}
> > @header {using System;}@namespace { XMLParserN } document  : element ;
> > element    : startTag         (element        | PCDATA        )*
> > endTag    | emptyElement    ;
> > startTag  	: TAG_START_OPEN GENERIC_ID {Console.Write(@"<" +
> > $GENERIC_ID.text); }	  (attribute {if $attribute.cl!=@"" then
> > Console.Write(@" class=\"" + $attribute.cl + @"\"");}	  	)*
> > TAG_CLOSE {Console.Write(@">" + $GENERIC_ID.text); }
> > attribute returns [string cl]	: GENERIC_ID ATTR_EQ ATTR_VALUE
> > 	{ if ($GENERIC_ID.text==@"class") $cl = $ATTR_VALUE.text else $cl
> > = @""; } ;
> > endTag 	: TAG_END_OPEN GENERIC_ID TAG_CLOSE
> {Console.Write(@"</" +
> > $GENERIC_ID.text + @">"); };
> > emptyElement : TAG_START_OPEN GENERIC_ID  (attribute)* TAG_EMPTY_CLOSE
> > ;
> >
> > List: http://www.antlr.org/mailman/listinfo/antlr-interest
> > Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
> > email-address
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
 		 	   		  

From arthernan at hotmail.com  Wed Jun  8 21:57:18 2011
From: arthernan at hotmail.com (Arturo Hernandez)
Date: Wed, 8 Jun 2011 23:57:18 -0500
Subject: [antlr-interest] Something in my little grammar throws an
 Unable to cast CommonTree to type GrammarAST
In-Reply-To: <blu152-w503BD1D96D5EF560B0E7C3B6620@phx.gbl>
References: <BLU152-w375E963690B6710D6494A2B6620@phx.gbl>, ,
	<35f8296f013d247a6f3177132ab876ab@mail.gmail.com>, ,
	<BLU152-w30976F4FEC91FAACEEC765B6620@phx.gbl>,
	<blu152-w503BD1D96D5EF560B0E7C3B6620@phx.gbl>
Message-ID: <BLU152-w1896D613EF2F299F42F8CFB6650@phx.gbl>


Came home and tried again with a clearer head.
And this time I found my missing ';' plus many other syntax errors ;)
The build action for VS2010 MSBuild works great too!!! All compiled and executed perfectly!!

parser  grammar XMLParser;options{    language=CSharp3;    tokenVocab=XMLLexer;}
@header {using System;}@namespace { XMLParserN }
public document  : element ;
element    : startTag         (element        | PCDATA        )*        endTag    | emptyElement    ;
startTag  	: TAG_START_OPEN GENERIC_ID {Console.Write(@"<" + $GENERIC_ID.text); } (attribute )* 	  TAG_CLOSE {Console.Write(@">"); }	;
attribute	: GENERIC_ID ATTR_EQ ATTR_VALUE 		{ if ($GENERIC_ID.text=="class") Console.Write(@" class=" + $ATTR_VALUE.text); } 	;
endTag 	: TAG_END_OPEN GENERIC_ID TAG_CLOSE 	{Console.WriteLine(@"</" + $GENERIC_ID.text + @">"); } 	;		
emptyElement : TAG_START_OPEN GENERIC_ID  (attribute)* TAG_EMPTY_CLOSE ;
> From: arthernan at hotmail.com
> To: antlr-interest at antlr.org
> Date: Wed, 8 Jun 2011 13:09:00 -0500
> Subject: Re: [antlr-interest] Something in my little grammar throws an Unable to cast CommonTree to type GrammarAST
> 
> 
> Thanks Jim,
> I looked at " XMLParser.g:29:11" before doing the first post. That pointed me to "returns" in this rule. My only idea is that there is something I need to do at the top of the grammar definition, like set output to AST. Before using "returns". At that point I started to "backtrack" and looked at the rest of the stack.
> I am still stuck.
> attribute returns [string cl]	: GENERIC_ID ATTR_EQ ATTR_VALUE
> 
> 
 		 	   		  

From wclodius at los-alamos.net  Wed Jun  8 22:44:07 2011
From: wclodius at los-alamos.net (William Clodius)
Date: Wed, 8 Jun 2011 23:44:07 -0600
Subject: [antlr-interest] New Guy Question...
In-Reply-To: <e8352bc59263377ff572e69941eaf9a1@mail.gmail.com>
References: <000901cc2380$87307e30$95917a90$@woh.rr.com>	<4DEBE75E.1030300@aol.com>
	<BANLkTims0w44spP+ZfRe22A5CjmG0HFpog@mail.gmail.com>	<4DEBFC19.5090003@hunsicker.de>
	<BANLkTinVvF3ZUWinLcDq+d8Ls=mSNigxrw@mail.gmail.com>
	<e8352bc59263377ff572e69941eaf9a1@mail.gmail.com>
Message-ID: <8D15377D-A583-4F6B-A512-5751ABD0A113@los-alamos.net>

Note that matching in terms of UPPER case is generally a bad idea. There are languages with characters that do not appear at the start of words. As upper case has come to be primarily used to indicate the start of words in selective contexts, such characters need not have a proper mapping to upper case. The German ? is the best known such character in languages with latin based character sets, but it is not the only such example. However if a language has a notion of case, there is always a mapping to lower case and for simple case folding that is to be preferred.

In many ways the problem of dealing with case is similar to the problem of dealing with normalization, where the same character can be represented by more than one combination of code points. As part of its process of dealing with normalization, for programming languages the UNICODE consortium recommended a couple of straightforward means of dealing identifier uniqueness.These are covered in "Unicode Standard Annex #31, Unicode Identifier and Pattern Syntax"
http://www.unicode.org/reports/tr31/
These have a straightforward implementation in terms of the UNICODE character property tables, and it is a small matter of programming to implement their lexical classes for identifiers.

On Jun 6, 2011, at 4:56 PM, Jim Idle wrote:

> No, that is not correct, please look at the WIKI article. The input stream
> merely MATCHES in upper case, it does NOT change the input stream itself,
> hence both the keywords and anything else are case preserved when you ask
> for their text; that is the whole point of doing it that way. Then you
> specify the tokens in the lexer using upper case only and it has the side
> effect of simplifying the lexer rules as well as not creating a method
> call to match every letter of every keyword (which is a bad idea even with
> JIT inlining).
> 
> Jim
> 
>> -----Original Message-----
>> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
>> bounces at antlr.org] On Behalf Of Douglas Godfrey
>> Sent: Monday, June 06, 2011 12:41 PM
>> To: Marco Hunsicker
>> Cc: antlr-interest at antlr.org
>> Subject: Re: [antlr-interest] New Guy Question...
>> 
>> When you implement case insensitive keywords, you may still want case
>> sensitive identifiers.
>> If the input stream does case folding, you can't use case sensitive
>> identifiers.
>> 
>> On Sun, Jun 5, 2011 at 5:58 PM, Marco Hunsicker <devel at hunsicker.de>
>> wrote:
>> 
>>>> You have to handle case insensitivity the hard way:
>>>> 
>>>> fragment A
>>>>     :    'A' | 'a';
>>>> 
>>>> [...]
>>> 
>>> I don't think it's a necessity to do it this way. Actually, I think
>> it
>>> would be better using a specialized input stream that does any
>>> necessary transformation. Your mileage may vary ;)
>>> 
>>> Cheers,
>>> 
>>> Marco
>>> 
>>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>>> Unsubscribe:
>>> http://www.antlr.org/mailman/options/antlr-interest/your-email-
>> address
>>> 
>> 
>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
>> email-address
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address


From sharwell at pixelminegames.com  Wed Jun  8 22:53:18 2011
From: sharwell at pixelminegames.com (Sam Harwell)
Date: Wed, 8 Jun 2011 22:53:18 -0700
Subject: [antlr-interest] [CSharp3] rule visibility in composite grammars
In-Reply-To: <BANLkTikDDm75G4u0sRYSY3NvvNhAFsh7Kg@mail.gmail.com>
References: <2B65C901391C804DBB9CF9E6FE30C6F95608DE64@sun.epirion.local>	<001001cbf46e$1b490020$51db0060$@pixelminegames.com>	<2B65C901391C804DBB9CF9E6FE30C6F9610C9BAC@sun.epirion.local>	<00cb01cbf52b$99eebd30$cdcc3790$@pixelminegames.com>	<2B65C901391C804DBB9CF9E6FE30C6F969ABB7F1@sun.epirion.local>	<000b01cc1ddf$dd84c440$988e4cc0$@pixelminegames.com>	<2B65C901391C804DBB9CF9E6FE30C6F969AC4DC9@sun.epirion.local>
	<BANLkTikDDm75G4u0sRYSY3NvvNhAFsh7Kg@mail.gmail.com>
Message-ID: <000301cc2669$8b33c870$a19b5950$@pixelminegames.com>

I'm also very interested in ways to make ANTLR grammars
target-language-agnostic. I know ANTLR version 4 will provide more
consistent semantics across a number of language features, but I'm not sure
if a specific symbol table support like you mention will be included. The
problem with such a feature is it increases the complexity of the grammar
language specification, increases the size of the runtime and/or the
complexity of the code generation templates (making things more difficult
for target developers), and only meets the semantic language features of a
small number of users.

 

One idea I had is for a target-agnostic "call" syntax that could be used in
semantic predicates and actions. It could use a form such as the following:

 

@{FunctionName(arg1,arg2,arg3)}

 

Where an argument can be one of the following:

 

.         A reference to a token, rule return value, or label in the rule.

.         A reference to an argument passed to the rule.

.         A reference to a value in an attribute scope.

 

The target would then declare a user-definable method with the appropriate
parameter types. The Java and CSharp2 targets could create an abstract
method, the CSharp3 target could create a partial method, and a C/C++
targets could declare the method in a generated header.

 

Sam

 

From: Douglas Godfrey [mailto:douglasgodfrey at gmail.com] 
Sent: Tuesday, June 07, 2011 8:09 AM
To: Ranco Marcus
Cc: Sam Harwell; antlr-interest at antlr.org
Subject: Re: [antlr-interest] [CSharp3] rule visibility in composite
grammars

 

2 months ago I submitted a feature request for an Antlr built-in symbol
table to support the common 
requirements of the majority of block-structured languages. By making the
SymbolTable part of the
Antlr grammar language the interface can be much cleaner. The implementation
of the SymbolTable
classes would be part of the target runtime(s).

i.e. 

new_variable_name:
    (Identifier.IsNewSymbol()) => Identifier.AddSymbol();

SymbolTable -> NameSpace -> SymbolScope -> Symbol -> Attribute-List {
optional for structs -> NameSpace }  

On Tue, Jun 7, 2011 at 5:56 AM, Ranco Marcus <ranco.marcus at epirion.nl>
wrote:

Yes, that sounds like a good idea. I would definitely be in favour of
merging the grammars before generating the code. My only concern is that
this approach would deviate from the general ANTLR approach.

In general, I have found ANTLR to be a great tool for parser generation, but
never really liked the way target specific actions are mixed with the
grammar definition. Ideally, I would like my grammars to be _completely_
target agnostic (no actions, no visibility modifiers, members, headers,
superClass definitions, etc.) and have an abstract mechanism that we can use
to hookup actions and implementation specific stuff to the generated
grammar.

Do you know if there are plans to redesign the composite grammar feature in
v4?

Best regards,

Ranco


> -----Original Message-----
> From: Sam Harwell [mailto:sharwell at pixelminegames.com]
> Sent: Sunday, May 29, 2011 11:08 AM
> To: Ranco Marcus; antlr-interest at antlr.org
> Subject: RE: [antlr-interest] [CSharp3] rule visibility in composite
grammars
>
> I'm not going to be able to address this issue until the second week of
June.
>
> That said, it seems the best way to handle all these issues with delegate
> grammars is to inline their rules before code generation. Suppose you have
> grammar C importing A and B, and you also have D importing A and B. The
> code generation will result in classes C, C_A, C_B, D, D_A, and D_B.
Clearly
> the independent generation of C_A and D_A during code generation does
> not allow a single instance of the imported A grammar to be shared by C
and
> D. If we instead "flatten" the imported grammar hierarchy and only
generate
> classes C and D, then everything behaves like it was written in a single
> grammar. Do you see any immediate problems with this potential approach?
>
> -----Original Message-----
> From: Ranco Marcus [mailto:ranco.marcus at epirion.nl]
> Sent: Wednesday, May 25, 2011 4:26 PM
> To: Sam Harwell; antlr-interest at antlr.org
> Subject: RE: [antlr-interest] [CSharp3] rule visibility in composite
grammars
>
> Hi Sam/all,
>
> When a (tree) grammar C imports (tree) grammars A and B, where grammar
> A calls a rule R from grammar B, a call is being made from delegate parser
C_A
> to a delegate rule R (targeting C_B) in the composite parser C (its
parent).
>
> Now that the visibility of the delegate rules in C match the visibility of
the
> imported grammar, the rule R has to be made public for the above to work.
> In our grammars, we build up internal structures that are subsequently
> processed. In our case, that means that all those internal structures have
to
> be made public as well. This could be solved by allowing ANTLR rules to
have
> 'internal' visibility. Also, imported grammars can probably remain
internal as
> well.
>
> What are your thoughts on this?
>
> Thanks, Ranco
>
> > -----Original Message-----
> > From: Sam Harwell [mailto:sharwell at pixelminegames.com]
> > Sent: Thursday, April 07, 2011 3:57 PM
> > To: Ranco Marcus; antlr-interest at antlr.org
> > Subject: RE: [antlr-interest] [CSharp3] rule visibility in composite
> > grammars
> >
> > The visibility of delegated rules now matches the way they're declared
> > in the imported grammar. Since some of them return nested classes
> > declared in the delegate grammar, I had to make the delegate grammar
> > 'public' and all its rules 'internal'.
> >
> > I fixed the reserved names issue right after releasing 3.3.1, so it'll
> > be included when I release 3.3.2. Note that rule parameters and return
> > values need to include an explicit '@' in their declarations in the
> > grammar, as follows. Labels and rule names do not need the '@'.
> >
> > namespace[int @in] returns [int @out] : as=A B;
> >
> > Sam
> >
> > -----Original Message-----
> > From: Ranco Marcus [mailto:ranco.marcus at epirion.nl]
> > Sent: Thursday, April 07, 2011 6:49 AM
> > To: Sam Harwell; antlr-interest at antlr.org
> > Subject: RE: [antlr-interest] [CSharp3] rule visibility in composite
> > grammars
> >
> > Sounds great, Sam!
> >
> > What will be the visibility of the methods in the 'Delegated rules'
> > region now that the class of the imported grammar is internal? Private
> > or
> internal?
> >
> > Another small suggestion is to prefix variable names (at least those
> > that are reserved in C#) with an at-sign. The generated class for the
> > grammar below has a compile error since 'as' is not a valid variable
> > name
> while '@as' is.
> >
> > name : as=firstName lastName;
> >
> > Are you planning to release new binaries any time soon?
> >
> > Thanks again,
> >
> > Ranco Marcus
> >
> > > -----Original Message-----
> > > From: Sam Harwell [mailto:sharwell at pixelminegames.com]
> > > Sent: woensdag 6 april 2011 17:20
> > > To: Ranco Marcus; antlr-interest at antlr.org
> > > Subject: RE: [antlr-interest] [CSharp3] rule visibility in composite
> > > grammars
> > >
> > > Hi Ranco,
> > >
> > > I made the following changes so far:
> > >
> > > * An imported grammar is always generated as an internal class
> > > instead of a public class.
> > > * Rules within the imported grammar are always declared public since
> > > they are only called by the root grammar.
> > >
> > > How does that sound?
> > >
> > > Sam
> > >
> > > -----Original Message-----
> > > From: antlr-interest-bounces at antlr.org
> > > [mailto:antlr-interest-bounces at antlr.org] On Behalf Of Ranco Marcus
> > > Sent: Wednesday, March 23, 2011 6:40 AM
> > > To: antlr-interest at antlr.org
> > > Subject: [antlr-interest] [CSharp3] rule visibility in composite
> > > grammars
> > >
> > > Hi all/Sam,
> > >
> > > While using the CSharp3 target on a composite grammar, I came across
> > > a few issues regarding rule visibility.
> > >
> > > If no modifier (private, protected, public, ...) is specified for a
> > > rule, the Java target generates public methods (since it is not
> > > implemented IIRC) and the
> > > CSharp3 target generates private methods.
> > >
> > > I like the idea to explicitly specify which rules are callable (by
> > > making them public). However, for composite grammars the generated
> > > parser contains delegate rules for every rule of the imported
> > > grammar, even for rules in the imported grammar that aren't public
> > > (causing compile errors). This can solved this adding a public
> > > modifier to every rule of the imported grammar, but I was wondering
> > > if there's a more
> > convenient way of doing this.
> > >
> > > Furthermore, the methods for the delegate rules in the composite
> > > grammars are all public, regardless of the visibility of the rule in
> > > the
> > imported grammar.
> > > IMHO, it would be better to make them private and use the composite
> > > grammar to explicitly specify the rules that are externally visible.
> > > What are your thoughts on this?
> > >
> > > Btw, the CSharp3 templates are also included in the original Java
> > > tool. Does that mean that we don't need the .NET version of the tool
> > anymore?
> > >
> > >
> > > Best regards,
> > >
> > > Ranco Marcus
> > > Epirion Knowledge Solutions B.V.
> > >
> > >
> > > List: http://www.antlr.org/mailman/listinfo/antlr-interest
> > > Unsubscribe:
> > > http://www.antlr.org/mailman/options/antlr-interest/your-email-addre
> > > ss
> >
>


List: http://www.antlr.org/mailman/listinfo/antlr-interest
Unsubscribe:
http://www.antlr.org/mailman/options/antlr-interest/your-email-address

 


From douglasgodfrey at gmail.com  Thu Jun  9 01:49:07 2011
From: douglasgodfrey at gmail.com (Douglas Godfrey)
Date: Thu, 9 Jun 2011 04:49:07 -0400
Subject: [antlr-interest] [CSharp3] rule visibility in composite grammars
In-Reply-To: <000301cc2669$8b33c870$a19b5950$@pixelminegames.com>
References: <2B65C901391C804DBB9CF9E6FE30C6F95608DE64@sun.epirion.local>
	<001001cbf46e$1b490020$51db0060$@pixelminegames.com>
	<2B65C901391C804DBB9CF9E6FE30C6F9610C9BAC@sun.epirion.local>
	<00cb01cbf52b$99eebd30$cdcc3790$@pixelminegames.com>
	<2B65C901391C804DBB9CF9E6FE30C6F969ABB7F1@sun.epirion.local>
	<000b01cc1ddf$dd84c440$988e4cc0$@pixelminegames.com>
	<2B65C901391C804DBB9CF9E6FE30C6F969AC4DC9@sun.epirion.local>
	<BANLkTikDDm75G4u0sRYSY3NvvNhAFsh7Kg@mail.gmail.com>
	<000301cc2669$8b33c870$a19b5950$@pixelminegames.com>
Message-ID: <BANLkTingGYCVUeXUumP9SOr2skBKaTSEjg@mail.gmail.com>

Almost all complex languages require a SymbolTable to resolve semantics and
grammar ambiguities.
Some languages only need a global scope while many need a NameSpaces and
nested Scopes.
Antlr itself has a SymbolTable with NameSpaces and nested Scopes. My
proposal would be to
generalize the Antlr SymbolTable and make it available to the grammar and
the generated parsers.

A Generalized call mechanism would help for code generation and combined
with a built-in SymbolTable
could eliminate most target specific code in productions.

To completely eliminate the need for target specific productions Antlr would
need a target independent
way to manipulate the Antlr class objects [Tokens, Streams, AST nodes,
etc.], basic assignment
statements, expressions and I/O. The underlying code to do the these
functions already exists in each
target.

What would need to be added to the Antlr grammar would be the equivalent of
a Java or C++ interpreter.
There are many available interpreter grammars with the required BSD license
that could be integrated
with Antlr. The interpreter grammar itself would be built for each target
and the generated code would be
part of the target runtime. All of the added functionality would be in the
interpreter grammar.



On Thu, Jun 9, 2011 at 1:53 AM, Sam Harwell <sharwell at pixelminegames.com>wrote:

> I?m also very interested in ways to make ANTLR grammars
> target-language-agnostic. I know ANTLR version 4 will provide more
> consistent semantics across a number of language features, but I?m not sure
> if a specific symbol table support like you mention will be included. The
> problem with such a feature is it increases the complexity of the grammar
> language specification, increases the size of the runtime and/or the
> complexity of the code generation templates (making things more difficult
> for target developers), and only meets the semantic language features of a
> small number of users.
>
>
>
> One idea I had is for a target-agnostic ?call? syntax that could be used in
> semantic predicates and actions. It could use a form such as the following:
>
>
>
> @{FunctionName(arg1,arg2,arg3)}
>
>
>
> Where an argument can be one of the following:
>
>
>
> ?         A reference to a token, rule return value, or label in the rule.
>
> ?         A reference to an argument passed to the rule.
>
> ?         A reference to a value in an attribute scope.
>
>
>
> The target would then declare a user-definable method with the appropriate
> parameter types. The Java and CSharp2 targets could create an abstract
> method, the CSharp3 target could create a partial method, and a C/C++
> targets could declare the method in a generated header.
>
>
>
> Sam
>
>
>
> *From:* Douglas Godfrey [mailto:douglasgodfrey at gmail.com]
> *Sent:* Tuesday, June 07, 2011 8:09 AM
> *To:* Ranco Marcus
> *Cc:* Sam Harwell; antlr-interest at antlr.org
> *Subject:* Re: [antlr-interest] [CSharp3] rule visibility in composite
> grammars
>
>
>
> 2 months ago I submitted a feature request for an Antlr built-in symbol
> table to support the common
> requirements of the majority of block-structured languages. By making the
> SymbolTable part of the
> Antlr grammar language the interface can be much cleaner. The
> implementation of the SymbolTable
> classes would be part of the target runtime(s).
>
> i.e.
>
> new_variable_name:
>     (Identifier.IsNewSymbol()) => Identifier.AddSymbol();
>
> SymbolTable -> NameSpace -> SymbolScope -> Symbol -> Attribute-List {
> optional for structs -> NameSpace }
>
> On Tue, Jun 7, 2011 at 5:56 AM, Ranco Marcus <ranco.marcus at epirion.nl>
> wrote:
>
> Yes, that sounds like a good idea. I would definitely be in favour of
> merging the grammars before generating the code. My only concern is that
> this approach would deviate from the general ANTLR approach.
>
> In general, I have found ANTLR to be a great tool for parser generation,
> but never really liked the way target specific actions are mixed with the
> grammar definition. Ideally, I would like my grammars to be _completely_
> target agnostic (no actions, no visibility modifiers, members, headers,
> superClass definitions, etc.) and have an abstract mechanism that we can use
> to hookup actions and implementation specific stuff to the generated
> grammar.
>
> Do you know if there are plans to redesign the composite grammar feature in
> v4?
>
> Best regards,
>
> Ranco
>
>
> > -----Original Message-----
> > From: Sam Harwell [mailto:sharwell at pixelminegames.com]
> > Sent: Sunday, May 29, 2011 11:08 AM
> > To: Ranco Marcus; antlr-interest at antlr.org
> > Subject: RE: [antlr-interest] [CSharp3] rule visibility in composite
> grammars
> >
> > I'm not going to be able to address this issue until the second week of
> June.
> >
> > That said, it seems the best way to handle all these issues with delegate
> > grammars is to inline their rules before code generation. Suppose you
> have
> > grammar C importing A and B, and you also have D importing A and B. The
> > code generation will result in classes C, C_A, C_B, D, D_A, and D_B.
> Clearly
> > the independent generation of C_A and D_A during code generation does
> > not allow a single instance of the imported A grammar to be shared by C
> and
> > D. If we instead "flatten" the imported grammar hierarchy and only
> generate
> > classes C and D, then everything behaves like it was written in a single
> > grammar. Do you see any immediate problems with this potential approach?
> >
> > -----Original Message-----
> > From: Ranco Marcus [mailto:ranco.marcus at epirion.nl]
> > Sent: Wednesday, May 25, 2011 4:26 PM
> > To: Sam Harwell; antlr-interest at antlr.org
> > Subject: RE: [antlr-interest] [CSharp3] rule visibility in composite
> grammars
> >
> > Hi Sam/all,
> >
> > When a (tree) grammar C imports (tree) grammars A and B, where grammar
> > A calls a rule R from grammar B, a call is being made from delegate
> parser C_A
> > to a delegate rule R (targeting C_B) in the composite parser C (its
> parent).
> >
> > Now that the visibility of the delegate rules in C match the visibility
> of the
> > imported grammar, the rule R has to be made public for the above to work.
> > In our grammars, we build up internal structures that are subsequently
> > processed. In our case, that means that all those internal structures
> have to
> > be made public as well. This could be solved by allowing ANTLR rules to
> have
> > 'internal' visibility. Also, imported grammars can probably remain
> internal as
> > well.
> >
> > What are your thoughts on this?
> >
> > Thanks, Ranco
> >
> > > -----Original Message-----
> > > From: Sam Harwell [mailto:sharwell at pixelminegames.com]
> > > Sent: Thursday, April 07, 2011 3:57 PM
> > > To: Ranco Marcus; antlr-interest at antlr.org
> > > Subject: RE: [antlr-interest] [CSharp3] rule visibility in composite
> > > grammars
> > >
> > > The visibility of delegated rules now matches the way they're declared
> > > in the imported grammar. Since some of them return nested classes
> > > declared in the delegate grammar, I had to make the delegate grammar
> > > 'public' and all its rules 'internal'.
> > >
> > > I fixed the reserved names issue right after releasing 3.3.1, so it'll
> > > be included when I release 3.3.2. Note that rule parameters and return
> > > values need to include an explicit '@' in their declarations in the
> > > grammar, as follows. Labels and rule names do not need the '@'.
> > >
> > > namespace[int @in] returns [int @out] : as=A B;
> > >
> > > Sam
> > >
> > > -----Original Message-----
> > > From: Ranco Marcus [mailto:ranco.marcus at epirion.nl]
> > > Sent: Thursday, April 07, 2011 6:49 AM
> > > To: Sam Harwell; antlr-interest at antlr.org
> > > Subject: RE: [antlr-interest] [CSharp3] rule visibility in composite
> > > grammars
> > >
> > > Sounds great, Sam!
> > >
> > > What will be the visibility of the methods in the 'Delegated rules'
> > > region now that the class of the imported grammar is internal? Private
> > > or
> > internal?
> > >
> > > Another small suggestion is to prefix variable names (at least those
> > > that are reserved in C#) with an at-sign. The generated class for the
> > > grammar below has a compile error since 'as' is not a valid variable
> > > name
> > while '@as' is.
> > >
> > > name : as=firstName lastName;
> > >
> > > Are you planning to release new binaries any time soon?
> > >
> > > Thanks again,
> > >
> > > Ranco Marcus
> > >
> > > > -----Original Message-----
> > > > From: Sam Harwell [mailto:sharwell at pixelminegames.com]
> > > > Sent: woensdag 6 april 2011 17:20
> > > > To: Ranco Marcus; antlr-interest at antlr.org
> > > > Subject: RE: [antlr-interest] [CSharp3] rule visibility in composite
> > > > grammars
> > > >
> > > > Hi Ranco,
> > > >
> > > > I made the following changes so far:
> > > >
> > > > * An imported grammar is always generated as an internal class
> > > > instead of a public class.
> > > > * Rules within the imported grammar are always declared public since
> > > > they are only called by the root grammar.
> > > >
> > > > How does that sound?
> > > >
> > > > Sam
> > > >
> > > > -----Original Message-----
> > > > From: antlr-interest-bounces at antlr.org
> > > > [mailto:antlr-interest-bounces at antlr.org] On Behalf Of Ranco Marcus
> > > > Sent: Wednesday, March 23, 2011 6:40 AM
> > > > To: antlr-interest at antlr.org
> > > > Subject: [antlr-interest] [CSharp3] rule visibility in composite
> > > > grammars
> > > >
> > > > Hi all/Sam,
> > > >
> > > > While using the CSharp3 target on a composite grammar, I came across
> > > > a few issues regarding rule visibility.
> > > >
> > > > If no modifier (private, protected, public, ...) is specified for a
> > > > rule, the Java target generates public methods (since it is not
> > > > implemented IIRC) and the
> > > > CSharp3 target generates private methods.
> > > >
> > > > I like the idea to explicitly specify which rules are callable (by
> > > > making them public). However, for composite grammars the generated
> > > > parser contains delegate rules for every rule of the imported
> > > > grammar, even for rules in the imported grammar that aren't public
> > > > (causing compile errors). This can solved this adding a public
> > > > modifier to every rule of the imported grammar, but I was wondering
> > > > if there's a more
> > > convenient way of doing this.
> > > >
> > > > Furthermore, the methods for the delegate rules in the composite
> > > > grammars are all public, regardless of the visibility of the rule in
> > > > the
> > > imported grammar.
> > > > IMHO, it would be better to make them private and use the composite
> > > > grammar to explicitly specify the rules that are externally visible.
> > > > What are your thoughts on this?
> > > >
> > > > Btw, the CSharp3 templates are also included in the original Java
> > > > tool. Does that mean that we don't need the .NET version of the tool
> > > anymore?
> > > >
> > > >
> > > > Best regards,
> > > >
> > > > Ranco Marcus
> > > > Epirion Knowledge Solutions B.V.
> > > >
> > > >
> > > > List: http://www.antlr.org/mailman/listinfo/antlr-interest
> > > > Unsubscribe:
> > > > http://www.antlr.org/mailman/options/antlr-interest/your-email-addre
> > > > ss
> > >
> >
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>
>
>

From kcarroll at signmgmt.com  Thu Jun  9 08:40:02 2011
From: kcarroll at signmgmt.com (Kevin Carroll)
Date: Thu, 9 Jun 2011 10:40:02 -0500
Subject: [antlr-interest] C# Upgrade Woes
Message-ID: <80A5CDD2686EA042AE41C526324D4455A5F7AF37F7@EXCHANGE2007.signmgmt.local>

I am attempting to update a set of grammar files for the C# version of ANTLR.  The files work correctly with version 3.3.0.7239.
When I attempt to use the same files with version 3.3.3.8388, I get the following error:

error(100): PrimisScript.g:0:1: syntax error: antlr.print: MismatchedTreeNodeException(33!=2)

Can anyone point me to where to start looking for the problem based on the above message?

Thanks,
Kevin Carroll

From jimi at temporal-wave.com  Thu Jun  9 11:50:15 2011
From: jimi at temporal-wave.com (Jim Idle)
Date: Thu, 9 Jun 2011 11:50:15 -0700
Subject: [antlr-interest] New Guy Question...
In-Reply-To: <8D15377D-A583-4F6B-A512-5751ABD0A113@los-alamos.net>
References: <000901cc2380$87307e30$95917a90$@woh.rr.com>	<4DEBE75E.1030300@aol.com>
	<BANLkTims0w44spP+ZfRe22A5CjmG0HFpog@mail.gmail.com>	<4DEBFC19.5090003@hunsicker.de>
	<BANLkTinVvF3ZUWinLcDq+d8Ls=mSNigxrw@mail.gmail.com>	<e8352bc59263377ff572e69941eaf9a1@mail.gmail.com>
	<8D15377D-A583-4F6B-A512-5751ABD0A113@los-alamos.net>
Message-ID: <da28c7bfffe49291a939955f4a898e82@mail.gmail.com>

The article describes a general method, not a universal solution. If you
have a language where the such semantics apply, you will need a specific
solution. In general these semantics are ignored for programming languages
though, so this is somewhat pedantic.

Jim

> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of William Clodius
> Sent: Wednesday, June 08, 2011 10:44 PM
> To: antlr-interest interest
> Subject: Re: [antlr-interest] New Guy Question...
>
> Note that matching in terms of UPPER case is generally a bad idea.
> There are languages with characters that do not appear at the start of
> words. As upper case has come to be primarily used to indicate the
> start of words in selective contexts, such characters need not have a
> proper mapping to upper case. The German ? is the best known such
> character in languages with latin based character sets, but it is not
> the only such example. However if a language has a notion of case,
> there is always a mapping to lower case and for simple case folding
> that is to be preferred.
>
> In many ways the problem of dealing with case is similar to the problem
> of dealing with normalization, where the same character can be
> represented by more than one combination of code points. As part of its
> process of dealing with normalization, for programming languages the
> UNICODE consortium recommended a couple of straightforward means of
> dealing identifier uniqueness.These are covered in "Unicode Standard
> Annex #31, Unicode Identifier and Pattern Syntax"
> http://www.unicode.org/reports/tr31/
> These have a straightforward implementation in terms of the UNICODE
> character property tables, and it is a small matter of programming to
> implement their lexical classes for identifiers.
>
> On Jun 6, 2011, at 4:56 PM, Jim Idle wrote:
>
> > No, that is not correct, please look at the WIKI article. The input
> > stream merely MATCHES in upper case, it does NOT change the input
> > stream itself, hence both the keywords and anything else are case
> > preserved when you ask for their text; that is the whole point of
> > doing it that way. Then you specify the tokens in the lexer using
> > upper case only and it has the side effect of simplifying the lexer
> > rules as well as not creating a method call to match every letter of
> > every keyword (which is a bad idea even with JIT inlining).
> >
> > Jim
> >
> >> -----Original Message-----
> >> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> >> bounces at antlr.org] On Behalf Of Douglas Godfrey
> >> Sent: Monday, June 06, 2011 12:41 PM
> >> To: Marco Hunsicker
> >> Cc: antlr-interest at antlr.org
> >> Subject: Re: [antlr-interest] New Guy Question...
> >>
> >> When you implement case insensitive keywords, you may still want
> case
> >> sensitive identifiers.
> >> If the input stream does case folding, you can't use case sensitive
> >> identifiers.
> >>
> >> On Sun, Jun 5, 2011 at 5:58 PM, Marco Hunsicker <devel at hunsicker.de>
> >> wrote:
> >>
> >>>> You have to handle case insensitivity the hard way:
> >>>>
> >>>> fragment A
> >>>>     :    'A' | 'a';
> >>>>
> >>>> [...]
> >>>
> >>> I don't think it's a necessity to do it this way. Actually, I think
> >> it
> >>> would be better using a specialized input stream that does any
> >>> necessary transformation. Your mileage may vary ;)
> >>>
> >>> Cheers,
> >>>
> >>> Marco
> >>>
> >>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> >>> Unsubscribe:
> >>> http://www.antlr.org/mailman/options/antlr-interest/your-email-
> >> address
> >>>
> >>
> >> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> >> Unsubscribe:
> >> http://www.antlr.org/mailman/options/antlr-interest/your-
> >> email-address
> >
> > List: http://www.antlr.org/mailman/listinfo/antlr-interest
> > Unsubscribe:
> > http://www.antlr.org/mailman/options/antlr-interest/your-email-
> address
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
> email-address

From ruslan_zasukhin at valentina-db.com  Thu Jun  9 11:52:37 2011
From: ruslan_zasukhin at valentina-db.com (Ruslan Zasukhin)
Date: Thu, 09 Jun 2011 21:52:37 +0300
Subject: [antlr-interest] Extract all rules/lexems/keywords of a Language.g
	into XML format?
Message-ID: <CA16F125.EC6C3%ruslan_zasukhin@valentina-db.com>

Hi All,
Hi Terrence,

We have meet task, where we may want be able extract from
    ANY ANTLR grammar

Description of all Rules, Keywords, Lexems, Imaginary Tokens ...
and put that info into e.g. XML format.


Actually this can be considered as transformation of ANTLR grammar into XML
form.

I believe will be possible and reverse task ... That XML back into ANTLR .g
grammar.


-------
We think next way is possible:

* you already have PARSER of any ANTLR grammar.

* it parses .g grammar and produce AST...

* it looks not to be difficult walk by that AST and output XML in this or
that form ...

* Or may be string templates can be used ...

* actually you already produce C, Java, C# outputs for a grammar.g
Why not add XML - as a general format?

What you think?



----------
Also we have see cTag tools, which can parse many languages,
And produce text output even without XML.
As you may know this tool targeted as Editor App helper library.
    
But I think, why ANTLR cannot be improved to produce similar output,
and kill cTag as a project :-)


--------
Another example of special but not wide tool is GCC-XML
    http://www.gccxml.org/HTML/Index.html


IMO, will be great to extend ANTLR in this way.
This will open new roads for its usage probably.

And this can be for us - users of ANTLR as easy as

    Option output = XML


What you think ?





-- 
Best regards,

Ruslan Zasukhin
VP Engineering and New Technology
Paradigma Software, Inc

Valentina - Joining Worlds of Information
http://www.paradigmasoft.com

[I feel the need: the need for speed]




From parrt at cs.usfca.edu  Thu Jun  9 14:37:53 2011
From: parrt at cs.usfca.edu (Terence Parr)
Date: Thu, 9 Jun 2011 14:37:53 -0700
Subject: [antlr-interest] Extract all rules/lexems/keywords of a
	Language.g into XML format?
In-Reply-To: <CA16F125.EC6C3%ruslan_zasukhin@valentina-db.com>
References: <CA16F125.EC6C3%ruslan_zasukhin@valentina-db.com>
Message-ID: <1A4557BA-94F9-4BDE-8D5F-E04A023017F8@cs.usfca.edu>

i have something like this but am not done. v4 will have a syntax highlighting editor as a standard widget.
T
On Jun 9, 2011, at 11:52 AM, Ruslan Zasukhin wrote:

> Hi All,
> Hi Terrence,
> 
> We have meet task, where we may want be able extract from
>    ANY ANTLR grammar
> 
> Description of all Rules, Keywords, Lexems, Imaginary Tokens ...
> and put that info into e.g. XML format.
> 
> 
> Actually this can be considered as transformation of ANTLR grammar into XML
> form.
> 
> I believe will be possible and reverse task ... That XML back into ANTLR .g
> grammar.
> 
> 
> -------
> We think next way is possible:
> 
> * you already have PARSER of any ANTLR grammar.
> 
> * it parses .g grammar and produce AST...
> 
> * it looks not to be difficult walk by that AST and output XML in this or
> that form ...
> 
> * Or may be string templates can be used ...
> 
> * actually you already produce C, Java, C# outputs for a grammar.g
> Why not add XML - as a general format?
> 
> What you think?
> 
> 
> 
> ----------
> Also we have see cTag tools, which can parse many languages,
> And produce text output even without XML.
> As you may know this tool targeted as Editor App helper library.
> 
> But I think, why ANTLR cannot be improved to produce similar output,
> and kill cTag as a project :-)
> 
> 
> --------
> Another example of special but not wide tool is GCC-XML
>    http://www.gccxml.org/HTML/Index.html
> 
> 
> IMO, will be great to extend ANTLR in this way.
> This will open new roads for its usage probably.
> 
> And this can be for us - users of ANTLR as easy as
> 
>    Option output = XML
> 
> 
> What you think ?
> 
> 
> 
> 
> 
> -- 
> Best regards,
> 
> Ruslan Zasukhin
> VP Engineering and New Technology
> Paradigma Software, Inc
> 
> Valentina - Joining Worlds of Information
> http://www.paradigmasoft.com
> 
> [I feel the need: the need for speed]
> 
> 
> 
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address


From ruslan_zasukhin at valentina-db.com  Fri Jun 10 02:22:42 2011
From: ruslan_zasukhin at valentina-db.com (Ruslan Zasukhin)
Date: Fri, 10 Jun 2011 12:22:42 +0300
Subject: [antlr-interest] Extract all rules/lexems/keywords of a
 Language.g into XML format?
In-Reply-To: <1A4557BA-94F9-4BDE-8D5F-E04A023017F8@cs.usfca.edu>
Message-ID: <CA17BD12.EC74B%ruslan_zasukhin@valentina-db.com>

On 6/10/11 12:37 AM, "Terence Parr" <parrt at cs.usfca.edu> wrote:

Hi Terence, 

> i have something like this but am not done.

AST of any grammar into XML ?

Great!

Just keep in mind please that cTAG and GCC-XML products and their tasks.
I believe ANTLR is a goold-tool to do same -- even better -- even more.


This do not presents in the v4 betas yet?
Any chance on "early access"?  :-)


> v4 will have a syntax highlighting  editor as a standard widget.

Can you explain this in more details?

You mean syntax highlighting editor where?
  in ANTLRworks? 

Or ANTLR will be able produce something what
  any EDITOR app can use later ?


-- 
Best regards,

Ruslan Zasukhin
VP Engineering and New Technology
Paradigma Software, Inc

Valentina - Joining Worlds of Information
http://www.paradigmasoft.com

[I feel the need: the need for speed]



From parrt at cs.usfca.edu  Fri Jun 10 11:03:36 2011
From: parrt at cs.usfca.edu (Terence Parr)
Date: Fri, 10 Jun 2011 11:03:36 -0700
Subject: [antlr-interest] [antlr-dev] Need help with tree traversing in
	ANTLR 3.3!
In-Reply-To: <416917.28680.qm@web161601.mail.bf1.yahoo.com>
References: <416917.28680.qm@web161601.mail.bf1.yahoo.com>
Message-ID: <628CE17C-D0B9-46F5-878C-720109A39F16@cs.usfca.edu>

[resending to proper list]
On Jun 10, 2011, at 10:01 AM, Payam Fard wrote:

> Dear all,
> 
> I have a grammar for a fairly small and simple language that I have created for our project. Once every command in this language is parsed through this grammar, a Java object is returned. Everything is working fine.
> 
> Now, I have a requirement to read all the available rules/commands of the language (I am only interested in the command/rule names). In order to do so, I have been trying to get the AST tree working by adding options to my grammar for AST tree. For some reason, when I add these options to my grammar, I am getting compilation error complaining that my grammar rules cannot return any Java objects! Can I have commands/rules of my grammar return some Java objects and at the same time be able to build an AST tree off of my grammar?
> 
> Is there an easy way to read these grammar command/rule names using antlr runtime API's?
> 
> Any code sample out there that shows how do to the above (namely returning objects from grammar rules and building the tree at the same time)?
> 
> Any help here would be greatly appreciate.
> _______________________________________________
> antlr-dev mailing list
> antlr-dev at antlr.org
> http://www.antlr.org/mailman/listinfo/antlr-dev


From sharwell at pixelminegames.com  Fri Jun 10 12:06:38 2011
From: sharwell at pixelminegames.com (Sam Harwell)
Date: Fri, 10 Jun 2011 14:06:38 -0500
Subject: [antlr-interest] [antlr-dev] Need help with tree traversing
	in	ANTLR 3.3!
In-Reply-To: <628CE17C-D0B9-46F5-878C-720109A39F16@cs.usfca.edu>
References: <416917.28680.qm@web161601.mail.bf1.yahoo.com>
	<628CE17C-D0B9-46F5-878C-720109A39F16@cs.usfca.edu>
Message-ID: <020201cc27a1$86d22a40$94767ec0$@pixelminegames.com>

Hi Payam,

Any rule in a parser or tree parser can return 0 or more items. Since the
Java method implementing a rule can only return 0 or 1 items, some special
handling is in place to allow you to do what you're after. Consider a rule
"foo" which currently returns a single int:

foo returns [int x] : {$x = 3;} ;

In a regular parser (non-AST), the rule will be generated as:

private int foo();

When you add the "output=AST" option, the rule now returns 4 values:

options {
output=AST;
ASTLabelType=CommonTree;
LabelType=CommonToken;
}

1. int x
2. ASTLabelType tree
3. LabelType start
4. LabelType stop

The function is generated as follows:

foo_return foo();

Which you can call like this to get the return values:

foo_return result = parser.foo();
int x = result.x;
CommonTree tree = result.tree;

Sam

On Jun 10, 2011, at 10:01 AM, Payam Fard wrote:

> Dear all,
> 
> I have a grammar for a fairly small and simple language that I have
created for our project. Once every command in this language is parsed
through this grammar, a Java object is returned. Everything is working fine.
> 
> Now, I have a requirement to read all the available rules/commands of the
language (I am only interested in the command/rule names). In order to do
so, I have been trying to get the AST tree working by adding options to my
grammar for AST tree. For some reason, when I add these options to my
grammar, I am getting compilation error complaining that my grammar rules
cannot return any Java objects! Can I have commands/rules of my grammar
return some Java objects and at the same time be able to build an AST tree
off of my grammar?
> 
> Is there an easy way to read these grammar command/rule names using antlr
runtime API's?
> 
> Any code sample out there that shows how do to the above (namely returning
objects from grammar rules and building the tree at the same time)?
> 
> Any help here would be greatly appreciate.
> _______________________________________________
> antlr-dev mailing list
> antlr-dev at antlr.org
> http://www.antlr.org/mailman/listinfo/antlr-dev


List: http://www.antlr.org/mailman/listinfo/antlr-interest
Unsubscribe:
http://www.antlr.org/mailman/options/antlr-interest/your-email-address


From Waverly.Edwards at genesys.com  Fri Jun 10 15:43:49 2011
From: Waverly.Edwards at genesys.com (Edwards, Waverly)
Date: Fri, 10 Jun 2011 17:43:49 -0500
Subject: [antlr-interest] object oriented compiler implementation
Message-ID: <4A454A950FB157459B59AA50C146C07901E3033902@OMA00CEXMBX02.corp.westworlds.com>

This is not directly ANTLR related but have any of you come across a guide, tutorial or book (preferably) for implementing an compiler for an object oriented language.  I don't mean the compiler is created using an object oriented languages, though that would be good.  I mean what goes into implementing subclassing, method overriding, hybrid language type safety such as objective-c (static and dynamic type) enforcement.  Also things like implementing exceptions and polymorphic variables.  I've used them in languages but I haven't read how you might go about go about implementing them.  I have a few compiler books but interestingly enough, they all deal with procedural languages like C or Pascal.  None of them talk about the innards of making compilers for object oriented languages.  I do own "Language Implementation Patterns", which helped me understand scopes for object languages.
I'm hoping to start with a book that lets you know what to do, what not to do and why you don't want to do it that way.  I'd like to start with making fresh mistakes versus ones that have been made over and over again.
Thank you kindly,

Waverly


From JALuber at gmx.de  Fri Jun 10 16:12:21 2011
From: JALuber at gmx.de (Johannes Luber)
Date: Sat, 11 Jun 2011 01:12:21 +0200
Subject: [antlr-interest] C# Upgrade Woes
Message-ID: <20110610231221.200740@gmx.net>

Hi,

the Chsarp2 target is currently non-functional for 3.3. Did you try CSharp3 yet?

Johannes

> ----- Urspr?ngliche Nachricht -----
> Von: Kevin Carroll
> Gesendet: 09.06.11 17:40 Uhr
> An: antlr-interest at antlr.org
> Betreff: [antlr-interest] C# Upgrade Woes
> 
> I am attempting to update a set of grammar files for the C# version of ANTLR. The files work correctly with version 3.3.0.7239.
> When I attempt to use the same files with version 3.3.3.8388, I get the following error:
> 
> error(100): PrimisScript.g:0:1: syntax error: antlr.print: MismatchedTreeNodeException(33!=2)
> 
> Can anyone point me to where to start looking for the problem based on the above message?
> 
> Thanks,
> Kevin Carroll
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address


From ronburk at gmail.com  Fri Jun 10 16:58:30 2011
From: ronburk at gmail.com (Ron Burk)
Date: Fri, 10 Jun 2011 16:58:30 -0700
Subject: [antlr-interest] object oriented compiler implementation
In-Reply-To: <4A454A950FB157459B59AA50C146C07901E3033902@OMA00CEXMBX02.corp.westworlds.com>
References: <4A454A950FB157459B59AA50C146C07901E3033902@OMA00CEXMBX02.corp.westworlds.com>
Message-ID: <BANLkTi=RaswJGkZEp9vkm7x0X_zU=NOQOQ@mail.gmail.com>

IME, that aspect tends to not be strictly viewed
in the category of a compilation problem, but rather
runtime design. The only thing that leaps off my shelf
in this category is "Inside the C++ Object Model" by
Stanley B. Lippman. ISBN 0-201-83454-5

From parrt at cs.usfca.edu  Fri Jun 10 17:16:37 2011
From: parrt at cs.usfca.edu (Terence Parr)
Date: Fri, 10 Jun 2011 17:16:37 -0700
Subject: [antlr-interest] Extract all rules/lexems/keywords of a
	Language.g into XML format?
In-Reply-To: <CA17BD12.EC74B%ruslan_zasukhin@valentina-db.com>
References: <CA17BD12.EC74B%ruslan_zasukhin@valentina-db.com>
Message-ID: <5534165F-FEA3-458C-BA15-E4A0EEBB9659@cs.usfca.edu>

Hi. Let me be more specific...I am going to serialize entire grammar as an augmented transition network into any generated parser or lexer. This will improve your recovery and error messages. There will be an API to figure out what could've come next.  I won't be using XML.

As for the GUI widget, I'm providing a simple widget that, using reflection if I remember correctly, pulls out the appropriate information from a parser/lexer and then manages to automatically syntax highlight and flag erroneous syntax. For semantics, the programmer would be on their own. It is a cheap way for someone to get an editor for their DSL.

sometime late this summer I am hoping to have early access

Ter
On Jun 10, 2011, at 2:22 AM, Ruslan Zasukhin wrote:

> On 6/10/11 12:37 AM, "Terence Parr" <parrt at cs.usfca.edu> wrote:
> 
> Hi Terence, 
> 
>> i have something like this but am not done.
> 
> AST of any grammar into XML ?
> 
> Great!
> 
> Just keep in mind please that cTAG and GCC-XML products and their tasks.
> I believe ANTLR is a goold-tool to do same -- even better -- even more.
> 
> 
> This do not presents in the v4 betas yet?
> Any chance on "early access"?  :-)
> 
> 
>> v4 will have a syntax highlighting  editor as a standard widget.
> 
> Can you explain this in more details?
> 
> You mean syntax highlighting editor where?
>  in ANTLRworks? 
> 
> Or ANTLR will be able produce something what
>  any EDITOR app can use later ?
> 
> 
> -- 
> Best regards,
> 
> Ruslan Zasukhin
> VP Engineering and New Technology
> Paradigma Software, Inc
> 
> Valentina - Joining Worlds of Information
> http://www.paradigmasoft.com
> 
> [I feel the need: the need for speed]
> 
> 


From srinivasan.karthikeyan.pitchai at oracle.com  Sat Jun 11 00:53:34 2011
From: srinivasan.karthikeyan.pitchai at oracle.com (srinivasan karthikeyan pitchai)
Date: Sat, 11 Jun 2011 13:23:34 +0530
Subject: [antlr-interest] AST rewrite
In-Reply-To: <628CE17C-D0B9-46F5-878C-720109A39F16@cs.usfca.edu>
References: <416917.28680.qm@web161601.mail.bf1.yahoo.com>
	<628CE17C-D0B9-46F5-878C-720109A39F16@cs.usfca.edu>
Message-ID: <4DF31EFE.8030907@oracle.com>

Hi Gurus,
I'm a novice using ANTLR for a development project.  I am at a stage 
where I need to rewrite AST so that the transformed AST renders itself 
more easy for me to walk and emit the translation that I need.  In this 
context I've a concept question.

In general,  can I use the *same*  tree adapter,  used by the 
InputNodeStream used by the walker,  in a java method that I code to 
restructure the tree without using the rewrite rule?  That is can I add, 
delete, replace nodes at will in the source tree?  I am looking at this 
option as I need to move up a subtree from deep down to a much higher 
level.   In particular would manipulating the source tree mess up the 
iterator used by the ANTLR AST walker  to parse the tree?


(eg)  Just want to know if I can effect this in JAVA.   I am sure we can 
make it happen using rewrite rule.  However I want to conceptually know 
if what I desire above is a feasibility or it it a totally wrong approach.

^(ROOT a  b ^(ROOT c d  ^(ROOT e f g)))

I need to restructure the tree like, say,

^(ROOT a  b ^(ROOT c d ) ^(ROOT e f g))

Based on your input I need to chalk the future course of my coding.

Thanks in advance.

Regards,
Vasan



From tijet at mac.com  Sat Jun 11 07:01:01 2011
From: tijet at mac.com (Trevor John Thompson)
Date: Sat, 11 Jun 2011 07:01:01 -0700
Subject: [antlr-interest] AST rewrite
In-Reply-To: <4DF31EFE.8030907@oracle.com>
References: <416917.28680.qm@web161601.mail.bf1.yahoo.com>
	<628CE17C-D0B9-46F5-878C-720109A39F16@cs.usfca.edu>
	<4DF31EFE.8030907@oracle.com>
Message-ID: <27900E57-D254-465E-A10C-2F045C14C07A@mac.com>

The short answer is "yes", you can manipulate the tree (before walking, not during).
I am using tree adapter manipulations to reorganize the AST, and then handing the tree to the standard tree walker.

The only caution is that TreeIterator depends on parent pointers. I am contemplating a version that does not have this dependency, so i can base my trees on BaseTree, rather than CommonTree.

On 2011 Jun 11, at 00:53, srinivasan karthikeyan pitchai wrote:

> Hi Gurus,
> I'm a novice using ANTLR for a development project.  I am at a stage 
> where I need to rewrite AST so that the transformed AST renders itself 
> more easy for me to walk and emit the translation that I need.  In this 
> context I've a concept question.
> 
> In general,  can I use the *same*  tree adapter,  used by the 
> InputNodeStream used by the walker,  in a java method that I code to 
> restructure the tree without using the rewrite rule?  That is can I add, 
> delete, replace nodes at will in the source tree?  I am looking at this 
> option as I need to move up a subtree from deep down to a much higher 
> level.   In particular would manipulating the source tree mess up the 
> iterator used by the ANTLR AST walker  to parse the tree?
> 
> 
> (eg)  Just want to know if I can effect this in JAVA.   I am sure we can 
> make it happen using rewrite rule.  However I want to conceptually know 
> if what I desire above is a feasibility or it it a totally wrong approach.
> 
> ^(ROOT a  b ^(ROOT c d  ^(ROOT e f g)))
> 
> I need to restructure the tree like, say,
> 
> ^(ROOT a  b ^(ROOT c d ) ^(ROOT e f g))
> 
> Based on your input I need to chalk the future course of my coding.
> 
> Thanks in advance.
> 
> Regards,
> Vasan
> 
> 
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address

--
Trevor John Thompson    (425) 246-4023
net: tijet at me.com
Quidquid Latine dictum sit, altum videtur.


From ruslan_zasukhin at valentina-db.com  Sat Jun 11 07:40:49 2011
From: ruslan_zasukhin at valentina-db.com (Ruslan Zasukhin)
Date: Sat, 11 Jun 2011 17:40:49 +0300
Subject: [antlr-interest] Extract all rules/lexems/keywords of a
 Language.g into XML format?
In-Reply-To: <5534165F-FEA3-458C-BA15-E4A0EEBB9659@cs.usfca.edu>
Message-ID: <CA195921.EC827%ruslan_zasukhin@valentina-db.com>

On 6/11/11 3:16 AM, "Terence Parr" <parrt at cs.usfca.edu> wrote:

Hi Terrence,

> Hi. Let me be more specific...I am going to serialize entire grammar as an
> augmented transition network into any generated parser or lexer. This will
> improve your recovery and error messages. There will be an API to figure out
> what could've come next.  I won't be using XML.

Okay, this sounds like feature, which will help us build
a smart auto-completion list of next token ...  Right?

Very nice. 

> As for the GUI widget, I'm providing a simple widget that, using reflection if
> I remember correctly, pulls out the appropriate information from a
> parser/lexer and then manages to automatically syntax highlight and flag
> erroneous syntax. For semantics, the programmer would be on their own. It is a
> cheap way for someone to get an editor for their DSL.

I do not catch ... Widget Java only?
   What will do C++ developers :-)

Actually we think not about GUI widget, but about
Feature of ANTLR to produce XML file from any grammar

Example:

Exists  
        cpp.g
        sql.g
        php.g

We add into that .g   or into  antlr -switch
    output=xml

and 
   > antlr  putput=xml  cpp.g

Will produce   cpp.g.xml (or sql.g.xml,  php.g.xml )

Which will contain language from .g expressed in XML format...
And may be reverse task XML to .g

Strange task?   :)   I know ...

 
> sometime late this summer I am hoping to have early access
> 
> Ter
> On Jun 10, 2011, at 2:22 AM, Ruslan Zasukhin wrote:
> 
>> On 6/10/11 12:37 AM, "Terence Parr" <parrt at cs.usfca.edu> wrote:
>> 
>> Hi Terence, 
>> 
>>> i have something like this but am not done.
>> 
>> AST of any grammar into XML ?
>> 
>> Great!
>> 
>> Just keep in mind please that cTAG and GCC-XML products and their tasks.
>> I believe ANTLR is a goold-tool to do same -- even better -- even more.
>> 
>> 
>> This do not presents in the v4 betas yet?
>> Any chance on "early access"?  :-)
>> 
>> 
>>> v4 will have a syntax highlighting  editor as a standard widget.
>> 
>> Can you explain this in more details?
>> 
>> You mean syntax highlighting editor where?
>>  in ANTLRworks? 
>> 
>> Or ANTLR will be able produce something what
>>  any EDITOR app can use later ?

-- 
Best regards,

Ruslan Zasukhin
VP Engineering and New Technology
Paradigma Software, Inc

Valentina - Joining Worlds of Information
http://www.paradigmasoft.com

[I feel the need: the need for speed]



From parrt at cs.usfca.edu  Sat Jun 11 09:33:17 2011
From: parrt at cs.usfca.edu (Terence Parr)
Date: Sat, 11 Jun 2011 09:33:17 -0700
Subject: [antlr-interest] Extract all rules/lexems/keywords of a
	Language.g into XML format?
In-Reply-To: <CA195921.EC827%ruslan_zasukhin@valentina-db.com>
References: <CA195921.EC827%ruslan_zasukhin@valentina-db.com>
Message-ID: <E6A96BD5-8881-48CA-BB01-3A5152FF78C0@cs.usfca.edu>


On Jun 11, 2011, at 7:40 AM, Ruslan Zasukhin wrote:

> On 6/11/11 3:16 AM, "Terence Parr" <parrt at cs.usfca.edu> wrote:
> 
> Hi Terrence,
> 
>> Hi. Let me be more specific...I am going to serialize entire grammar as an
>> augmented transition network into any generated parser or lexer. This will
>> improve your recovery and error messages. There will be an API to figure out
>> what could've come next.  I won't be using XML.
> 
> Okay, this sounds like feature, which will help us build
> a smart auto-completion list of next token ...  Right?

yep.

>> As for the GUI widget, I'm providing a simple widget that, using reflection if
>> I remember correctly, pulls out the appropriate information from a
>> parser/lexer and then manages to automatically syntax highlight and flag
>> erroneous syntax. For semantics, the programmer would be on their own. It is a
>> cheap way for someone to get an editor for their DSL.
> 
> I do not catch ... Widget Java only?
>   What will do C++ developers :-)

Make their own. ;)  It could be hooked up via sockets I guess.

> Actually we think not about GUI widget, but about
> Feature of ANTLR to produce XML file from any grammar
> 
> Example:
> 
> Exists  
>        cpp.g
>        sql.g
>        php.g
> 
> We add into that .g   or into  antlr -switch
>    output=xml
> 
> and 
>> antlr  putput=xml  cpp.g
> 
> Will produce   cpp.g.xml (or sql.g.xml,  php.g.xml )
> 
> Which will contain language from .g expressed in XML format...
> And may be reverse task XML to .g
> 
> Strange task?   :)   I know ...

What is the goal?
Ter

From srinivasan.karthikeyan.pitchai at oracle.com  Sat Jun 11 09:53:54 2011
From: srinivasan.karthikeyan.pitchai at oracle.com (srinivasan karthikeyan pitchai)
Date: Sat, 11 Jun 2011 22:23:54 +0530
Subject: [antlr-interest] AST rewrite
In-Reply-To: <27900E57-D254-465E-A10C-2F045C14C07A@mac.com>
References: <416917.28680.qm@web161601.mail.bf1.yahoo.com>
	<628CE17C-D0B9-46F5-878C-720109A39F16@cs.usfca.edu>
	<4DF31EFE.8030907@oracle.com>
	<27900E57-D254-465E-A10C-2F045C14C07A@mac.com>
Message-ID: <4DF39DA2.7020507@oracle.com>

Thanks for sharing your input.  I am able to do some pretty complex AST 
manipulation as stated initially.  First results are very encouraging,  
I am getting an end to end translation successfully.

Regards,
Vasan

On 6/11/2011 7:31 PM, Trevor John Thompson wrote:
> The short answer is "yes", you can manipulate the tree (before walking, not during).
> I am using tree adapter manipulations to reorganize the AST, and then handing the tree to the standard tree walker.
>
> The only caution is that TreeIterator depends on parent pointers. I am contemplating a version that does not have this dependency, so i can base my trees on BaseTree, rather than CommonTree.
>
> On 2011 Jun 11, at 00:53, srinivasan karthikeyan pitchai wrote:
>
>> Hi Gurus,
>> I'm a novice using ANTLR for a development project.  I am at a stage
>> where I need to rewrite AST so that the transformed AST renders itself
>> more easy for me to walk and emit the translation that I need.  In this
>> context I've a concept question.
>>
>> In general,  can I use the *same*  tree adapter,  used by the
>> InputNodeStream used by the walker,  in a java method that I code to
>> restructure the tree without using the rewrite rule?  That is can I add,
>> delete, replace nodes at will in the source tree?  I am looking at this
>> option as I need to move up a subtree from deep down to a much higher
>> level.   In particular would manipulating the source tree mess up the
>> iterator used by the ANTLR AST walker  to parse the tree?
>>
>>
>> (eg)  Just want to know if I can effect this in JAVA.   I am sure we can
>> make it happen using rewrite rule.  However I want to conceptually know
>> if what I desire above is a feasibility or it it a totally wrong approach.
>>
>> ^(ROOT a  b ^(ROOT c d  ^(ROOT e f g)))
>>
>> I need to restructure the tree like, say,
>>
>> ^(ROOT a  b ^(ROOT c d ) ^(ROOT e f g))
>>
>> Based on your input I need to chalk the future course of my coding.
>>
>> Thanks in advance.
>>
>> Regards,
>> Vasan
>>
>>
>>
>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
> --
> Trevor John Thompson    (425) 246-4023
> net: tijet at me.com
> Quidquid Latine dictum sit, altum videtur.
>

From dmp0x7c5 at gmail.com  Sat Jun 11 17:07:07 2011
From: dmp0x7c5 at gmail.com (dmp)
Date: Sun, 12 Jun 2011 02:07:07 +0200
Subject: [antlr-interest] Comments in Tcl - Lexer
Message-ID: <BANLkTi=Y-yh7t0+s1H8FZJL=MyZGqUzr3A@mail.gmail.com>

Hello,

I'm working with Antlr to provide syntax highlight for Tcl (in
Netbeans). I have a problem with COMMENT token.
Basic version for one line comment looks like this:

COMMENT :
     '#' (options {greedy=false;} : .)* NEWLINE
;

But comment in Tcl starts only at the beginning of a line with
optional whitespace or after ";" also with optional whitespace.
How can I handle this using antlr grammar and lexer?

I've already allowed to use '#' in IDs:
ID :
     ('a'..'z'|'A'..'Z'|'0'..'9'|'_'|'#')+
;

It's difficult to find simple solution because char stream provided
from Netbeans it's not full source but only parts displayed/edited. I
followed some tips from this mailing list for example:
http://wklej.org/id/544171/ but It doesn't solve my problem.

I would be grateful if someone could give me some advices.

Thanks,
dmp

From s.barnett-cormack at lancaster.ac.uk  Sun Jun 12 05:17:22 2011
From: s.barnett-cormack at lancaster.ac.uk (Sam Barnett-Cormack)
Date: Sun, 12 Jun 2011 13:17:22 +0100
Subject: [antlr-interest] object oriented compiler implementation
In-Reply-To: <4A454A950FB157459B59AA50C146C07901E3033902@OMA00CEXMBX02.corp.westworlds.com>
References: <4A454A950FB157459B59AA50C146C07901E3033902@OMA00CEXMBX02.corp.westworlds.com>
Message-ID: <4DF4AE52.1000800@lancaster.ac.uk>

On 10/06/2011 23:43, Edwards, Waverly wrote:
> This is not directly ANTLR related but have any of you come across a
> guide, tutorial or book (preferably) for implementing an compiler for
> an object oriented language.  I don't mean the compiler is created
> using an object oriented languages, though that would be good.  I
> mean what goes into implementing subclassing, method overriding,
> hybrid language type safety such as objective-c (static and dynamic
> type) enforcement.  Also things like implementing exceptions and
> polymorphic variables.  I've used them in languages but I haven't
> read how you might go about go about implementing them.  I have a few
> compiler books but interestingly enough, they all deal with
> procedural languages like C or Pascal.  None of them talk about the
> innards of making compilers for object oriented languages.  I do own
> "Language Implementation Patterns", which helped me understand scopes
> for object languages. I'm hoping to start with a book that lets you
> know what to do, what not to do and why you don't want to do it that
> way.  I'd like to start with making fresh mistakes versus ones that
> have been made over and over again.
Smalltalk is often used as a teaching language for OO implementation...
there ought to be some literature out there. However, when I studied it
(which I remember barely) it was all about the runtime and VMing, rather
than compilation

Sam

From ranco.marcus at epirion.nl  Sun Jun 12 05:36:03 2011
From: ranco.marcus at epirion.nl (Ranco Marcus)
Date: Sun, 12 Jun 2011 12:36:03 +0000
Subject: [antlr-interest] object oriented compiler implementation
In-Reply-To: <4A454A950FB157459B59AA50C146C07901E3033902@OMA00CEXMBX02.corp.westworlds.com>
References: <4A454A950FB157459B59AA50C146C07901E3033902@OMA00CEXMBX02.corp.westworlds.com>
Message-ID: <2B65C901391C804DBB9CF9E6FE30C6F969ACA447@sun.epirion.local>

Hello Waverly,

You may find "Compiler Design" by Renhard Wilhelm and Dieter Maurer helpful. It explains the basics of compiler design with separate chapters for imperative, functional, logic and object-oriented languages.

See http://www.amazon.com/Compiler-Design-International-Computer-Science/dp/0201422905

Best regards,

Ranco Marcus
Epirion Knowledge Solutions B.V.


> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of Edwards, Waverly
> Sent: Saturday, June 11, 2011 12:44 AM
> To: antlr
> Subject: [antlr-interest] object oriented compiler implementation
> 
> This is not directly ANTLR related but have any of you come across a guide,
> tutorial or book (preferably) for implementing an compiler for an object
> oriented language.  I don't mean the compiler is created using an object
> oriented languages, though that would be good.  I mean what goes into
> implementing subclassing, method overriding, hybrid language type safety
> such as objective-c (static and dynamic type) enforcement.  Also things like
> implementing exceptions and polymorphic variables.  I've used them in
> languages but I haven't read how you might go about go about implementing
> them.  I have a few compiler books but interestingly enough, they all deal
> with procedural languages like C or Pascal.  None of them talk about the
> innards of making compilers for object oriented languages.  I do own
> "Language Implementation Patterns", which helped me understand scopes
> for object languages.
> I'm hoping to start with a book that lets you know what to do, what not to do
> and why you don't want to do it that way.  I'd like to start with making fresh
> mistakes versus ones that have been made over and over again.
> Thank you kindly,
> 
> Waverly
> 
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
> email-address

From jean-christophe.lelann at orange.fr  Sun Jun 12 05:36:26 2011
From: jean-christophe.lelann at orange.fr (Jean-Christophe Le Lann)
Date: Sun, 12 Jun 2011 14:36:26 +0200
Subject: [antlr-interest] object oriented compiler implementation
In-Reply-To: <4DF4AE52.1000800@lancaster.ac.uk>
References: <4A454A950FB157459B59AA50C146C07901E3033902@OMA00CEXMBX02.corp.westworlds.com>
	<4DF4AE52.1000800@lancaster.ac.uk>
Message-ID: <4DF4B2CA.2090002@orange.fr>

Le 12/06/2011 14:17, Sam Barnett-Cormack a ?crit :

> Smalltalk is often used as a teaching language for OO implementation...
> there ought to be some literature out there. However, when I studied it
> (which I remember barely) it was all about the runtime and VMing, rather
> than compilation
>
> Sam
>

The reference book for Smalltalk is "Smalltalk-80: The Language and its 
Implementation; Adele Goldberg and DavidRobson".

It is now free of charge : 
http://stephane.ducasse.free.fr/FreeBooks/BlueBook/

Hope this helps

Jean-Christophe

From bill.andersen at mac.com  Mon Jun 13 06:32:23 2011
From: bill.andersen at mac.com (Bill Andersen)
Date: Mon, 13 Jun 2011 09:32:23 -0400
Subject: [antlr-interest] ANTLR tree construction - list
Message-ID: <9C26CAB9-B4DB-4C51-B8C9-FAB7C9BB9B8F@mac.com>

Folks,

Ought to be a pretty simple question.  I have the following production in a combined grammar with tree output

collection returns [CommonTree name]
@init {
  List<CommonTree> rest = new LinkedList<CommonTree>();
}
  : OPEN { $name = pushName(newName()); } 
      ( term { rest.add($term.rest); })+ 
    CLOSE { popName(); }
    -> ^(COL { $name } term+) ????
  ;

This production is supposed to match a "collection" - An open paren followed by a non-zero-length sequence of <term> followed by a close paren.  Each <term> has two outputs - the default tree return, and the "rest" tree.  I want the output of this production to be the sequence of the COL tree prepended to all the "rest"s which are accumulated in the @init list.

I know, for example, that I can do stuff like this:

test
  :  foo bar baz
    -> foo baz
  ;

to have the list of 'foo' and 'baz' trees as output.  Thing is I don't know what to do with the 'rest' list above to have its elements appear in the output tree.

Can someone tell me what needs to go in place of ????

Thanks!

	.bill



From Waverly.Edwards at genesys.com  Mon Jun 13 06:47:27 2011
From: Waverly.Edwards at genesys.com (Edwards, Waverly)
Date: Mon, 13 Jun 2011 08:47:27 -0500
Subject: [antlr-interest] object oriented compiler implementation
In-Reply-To: <BANLkTi=RaswJGkZEp9vkm7x0X_zU=NOQOQ@mail.gmail.com>
References: <4A454A950FB157459B59AA50C146C07901E3033902@OMA00CEXMBX02.corp.westworlds.com>
	<BANLkTi=RaswJGkZEp9vkm7x0X_zU=NOQOQ@mail.gmail.com>
Message-ID: <4A454A950FB157459B59AA50C146C07901E3033903@OMA00CEXMBX02.corp.westworlds.com>


I thank you for anything that leaps :-)


Waverly


-----Original Message-----
From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-bounces at antlr.org] On Behalf Of Ron Burk
Sent: Friday, June 10, 2011 7:59 PM
To: Edwards, Waverly
Cc: antlr
Subject: Re: [antlr-interest] object oriented compiler implementation

IME, that aspect tends to not be strictly viewed
in the category of a compilation problem, but rather
runtime design. The only thing that leaps off my shelf
in this category is "Inside the C++ Object Model" by
Stanley B. Lippman. ISBN 0-201-83454-5

List: http://www.antlr.org/mailman/listinfo/antlr-interest
Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address

From Waverly.Edwards at genesys.com  Mon Jun 13 06:52:05 2011
From: Waverly.Edwards at genesys.com (Edwards, Waverly)
Date: Mon, 13 Jun 2011 08:52:05 -0500
Subject: [antlr-interest] object oriented compiler implementation
In-Reply-To: <4DF4AE52.1000800@lancaster.ac.uk>
References: <4A454A950FB157459B59AA50C146C07901E3033902@OMA00CEXMBX02.corp.westworlds.com>
	<4DF4AE52.1000800@lancaster.ac.uk>
Message-ID: <4A454A950FB157459B59AA50C146C07901E3033904@OMA00CEXMBX02.corp.westworlds.com>

I've been having a hard time distinguishing what should be part of the runtime and what it solely part of the language.
Because that is all that I've been taught, I've been working on what the language should look and feel like.  I haven't had to think about the runtime.   I'll sleep easier once I can draw a line and start separating the two.

Thank you,


Waverly


-----Original Message-----
From: Sam Barnett-Cormack [mailto:s.barnett-cormack at lancaster.ac.uk] 
Sent: Sunday, June 12, 2011 8:17 AM
To: Edwards, Waverly
Cc: antlr
Subject: Re: [antlr-interest] object oriented compiler implementation

On 10/06/2011 23:43, Edwards, Waverly wrote:
> This is not directly ANTLR related but have any of you come across a
> guide, tutorial or book (preferably) for implementing an compiler for
> an object oriented language.  I don't mean the compiler is created
> using an object oriented languages, though that would be good.  I
> mean what goes into implementing subclassing, method overriding,
> hybrid language type safety such as objective-c (static and dynamic
> type) enforcement.  Also things like implementing exceptions and
> polymorphic variables.  I've used them in languages but I haven't
> read how you might go about go about implementing them.  I have a few
> compiler books but interestingly enough, they all deal with
> procedural languages like C or Pascal.  None of them talk about the
> innards of making compilers for object oriented languages.  I do own
> "Language Implementation Patterns", which helped me understand scopes
> for object languages. I'm hoping to start with a book that lets you
> know what to do, what not to do and why you don't want to do it that
> way.  I'd like to start with making fresh mistakes versus ones that
> have been made over and over again.
Smalltalk is often used as a teaching language for OO implementation...
there ought to be some literature out there. However, when I studied it
(which I remember barely) it was all about the runtime and VMing, rather
than compilation

Sam

From Waverly.Edwards at genesys.com  Mon Jun 13 06:57:43 2011
From: Waverly.Edwards at genesys.com (Edwards, Waverly)
Date: Mon, 13 Jun 2011 08:57:43 -0500
Subject: [antlr-interest] object oriented compiler implementation
In-Reply-To: <4DF4B2CA.2090002@orange.fr>
References: <4A454A950FB157459B59AA50C146C07901E3033902@OMA00CEXMBX02.corp.westworlds.com>
	<4DF4AE52.1000800@lancaster.ac.uk> <4DF4B2CA.2090002@orange.fr>
Message-ID: <4A454A950FB157459B59AA50C146C07901E3033905@OMA00CEXMBX02.corp.westworlds.com>


I will look into it right away.

Thank you,


Waverly


-----Original Message-----
From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-bounces at antlr.org] On Behalf Of Jean-Christophe Le Lann
Sent: Sunday, June 12, 2011 8:36 AM
To: antlr-interest at antlr.org
Subject: Re: [antlr-interest] object oriented compiler implementation

Le 12/06/2011 14:17, Sam Barnett-Cormack a ?crit :

> Smalltalk is often used as a teaching language for OO implementation...
> there ought to be some literature out there. However, when I studied it
> (which I remember barely) it was all about the runtime and VMing, rather
> than compilation
>
> Sam
>

The reference book for Smalltalk is "Smalltalk-80: The Language and its 
Implementation; Adele Goldberg and DavidRobson".

It is now free of charge : 
http://stephane.ducasse.free.fr/FreeBooks/BlueBook/

Hope this helps

Jean-Christophe

List: http://www.antlr.org/mailman/listinfo/antlr-interest
Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address

From Waverly.Edwards at genesys.com  Mon Jun 13 07:12:24 2011
From: Waverly.Edwards at genesys.com (Edwards, Waverly)
Date: Mon, 13 Jun 2011 09:12:24 -0500
Subject: [antlr-interest] object oriented compiler implementation
In-Reply-To: <2B65C901391C804DBB9CF9E6FE30C6F969ACA447@sun.epirion.local>
References: <4A454A950FB157459B59AA50C146C07901E3033902@OMA00CEXMBX02.corp.westworlds.com>
	<2B65C901391C804DBB9CF9E6FE30C6F969ACA447@sun.epirion.local>
Message-ID: <4A454A950FB157459B59AA50C146C07901E3033906@OMA00CEXMBX02.corp.westworlds.com>


I'll start looking for it.  I haven't been able to find a preview for it.  One of the best things Amazon did is enable previews on books.  It makes life so much easier.  I also looked for it on Google Books.  I haven't found it yet but someone has a preview.

Thanks a bunch,


Waverly


-----Original Message-----
From: Ranco Marcus [mailto:ranco.marcus at epirion.nl] 
Sent: Sunday, June 12, 2011 8:36 AM
To: Edwards, Waverly; antlr
Subject: RE: object oriented compiler implementation

Hello Waverly,

You may find "Compiler Design" by Renhard Wilhelm and Dieter Maurer helpful. It explains the basics of compiler design with separate chapters for imperative, functional, logic and object-oriented languages.

See http://www.amazon.com/Compiler-Design-International-Computer-Science/dp/0201422905

Best regards,

Ranco Marcus
Epirion Knowledge Solutions B.V.


> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of Edwards, Waverly
> Sent: Saturday, June 11, 2011 12:44 AM
> To: antlr
> Subject: [antlr-interest] object oriented compiler implementation
> 
> This is not directly ANTLR related but have any of you come across a guide,
> tutorial or book (preferably) for implementing an compiler for an object
> oriented language.  I don't mean the compiler is created using an object
> oriented languages, though that would be good.  I mean what goes into
> implementing subclassing, method overriding, hybrid language type safety
> such as objective-c (static and dynamic type) enforcement.  Also things like
> implementing exceptions and polymorphic variables.  I've used them in
> languages but I haven't read how you might go about go about implementing
> them.  I have a few compiler books but interestingly enough, they all deal
> with procedural languages like C or Pascal.  None of them talk about the
> innards of making compilers for object oriented languages.  I do own
> "Language Implementation Patterns", which helped me understand scopes
> for object languages.
> I'm hoping to start with a book that lets you know what to do, what not to do
> and why you don't want to do it that way.  I'd like to start with making fresh
> mistakes versus ones that have been made over and over again.
> Thank you kindly,
> 
> Waverly
> 
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
> email-address

From markwright at internode.on.net  Mon Jun 13 07:33:52 2011
From: markwright at internode.on.net (Mark Wright)
Date: Tue, 14 Jun 2011 00:33:52 +1000
Subject: [antlr-interest] object oriented compiler implementation
In-Reply-To: <4A454A950FB157459B59AA50C146C07901E3033902@OMA00CEXMBX02.corp.westworlds.com>
References: <4A454A950FB157459B59AA50C146C07901E3033902@OMA00CEXMBX02.corp.westworlds.com>
Message-ID: <ymafwnd4x7z.fsf@internode.on.net>

On Fri, 10 Jun 2011 17:43:49 -0500, "Edwards, Waverly" <Waverly.Edwards at genesys.com> wrote:
> This is not directly ANTLR related but have any of you come across a guide,
> tutorial or book (preferably) for implementing an compiler for an object
> oriented language.  I don't mean the compiler is created using an object
> oriented languages, though that would be good.  I mean what goes into
> implementing subclassing, method overriding, hybrid language type safety
> such as objective-c (static and dynamic type) enforcement.  Also things like
> implementing exceptions and polymorphic variables.  I've used them in
> languages but I haven't read how you might go about go about implementing
> them.  I have a few compiler books but interestingly enough, they all deal
> with procedural languages like C or Pascal.  None of them talk about the
> innards of making compilers for object oriented languages.  I do own
> "Language Implementation Patterns", which helped me understand scopes for
> object languages.

Hi Waverly,

There is lots of information using type theory, functional programming,
and proof assistants.  The book to start with using this approach is
free:

http://www.seas.upenn.edu/~cis500/current/sf/html/index.html

The 2 main proof assistants for this sort of stuff are Coq and Isabelle.
There seems to be more tutorial info on Coq.  A useful tool that can generate
some Coq and Isabelle code is Ott:

http://www.cl.cam.ac.uk/~pes20/ott/

The chapter TypeChecking:

http://www.seas.upenn.edu/~cis500/current/sf/html/Typechecking.html

describes how to prove that a Coq fixpoint function for the type checker
is equivalent to the Coq propositions that are more convenient to work
with in the proof assistant.  Ott can generate the propositions, looking
at those can help with writing the fixpoints, and then Haskell or Ocaml
code can be extracted from the fixpoints.  Or you could just look
at the fixpoints as a guide and write the type checker in a functional
programming language

Lots of very useful type theory/Coq videos here:

http://vimeo.com/user5565394/videos/page:1/sort:newest

The Software Foundations book does not cover object orientented languages,
but the theory is required to understand books that do.  There are different
types of subtyping in type theory.

The standard text on type theory does have some discussion on object
oriented languages:

Types and Programming Languages, by Benjamin C. Pierce. MIT Press, 2002.

There are 2 obscure books on type theory and object oriented langauges:

(1) Foundations of Object-Oriented Languages by Kim Bruce

The first half is an easy discussion on object oriented type systems
that you would probably find useful even if you don't use the type theory
approach.

The second half uses type theory, proof sketches, which is useful if
you wanted to use type theory.

(2) A Theory of Objects (Monographs in Computer Science) by Martin Abadi and
Luca Cardelli

its an expensive book, I have not read it.  It develops its own object
calculus which I guess would make it hard to understand this book.

There are other references in the postscript:

http://www.seas.upenn.edu/~cis500/current/sf/html/Postscript.html

If you write the compiler using a functional programming language, then
I think the standard approach is use continuations, that is described
in this book:

Compiling with Continuations by Andrew W. Appel 

and 2 chapters in this book (seems to be more on interpreters than
compilers though):

Essentials of Programming Languages by Daniel P. Friedman and Mitchell Wand

Regards, Mark

> I'm hoping to start with a book that lets you know what to do, what not to
> do and why you don't want to do it that way.  I'd like to start with making
> fresh mistakes versus ones that have been made over and over again.

> Thank you kindly,
> 
> Waverly
> 
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address

From researcher0x00 at gmail.com  Mon Jun 13 09:28:31 2011
From: researcher0x00 at gmail.com (The Researcher)
Date: Mon, 13 Jun 2011 12:28:31 -0400
Subject: [antlr-interest] object oriented compiler implementation
In-Reply-To: <ymafwnd4x7z.fsf@internode.on.net>
References: <4A454A950FB157459B59AA50C146C07901E3033902@OMA00CEXMBX02.corp.westworlds.com>
	<ymafwnd4x7z.fsf@internode.on.net>
Message-ID: <BANLkTin87H_LcJw7pWJuYx2F4CBvf9NDeg@mail.gmail.com>

Another place worth searching is http://lambda-the-ultimate.org/

Searching for "design" turns up some interesting info.

Eric

From Waverly.Edwards at genesys.com  Mon Jun 13 14:02:50 2011
From: Waverly.Edwards at genesys.com (Edwards, Waverly)
Date: Mon, 13 Jun 2011 16:02:50 -0500
Subject: [antlr-interest] object oriented compiler implementation
In-Reply-To: <ymafwnd4x7z.fsf@internode.on.net>
References: <4A454A950FB157459B59AA50C146C07901E3033902@OMA00CEXMBX02.corp.westworlds.com>
	<ymafwnd4x7z.fsf@internode.on.net>
Message-ID: <4A454A950FB157459B59AA50C146C07901E303390A@OMA00CEXMBX02.corp.westworlds.com>


I'll start looking in depth tomorrow.

Thank you for your help,


Waverly


-----Original Message-----
From: Mark Wright [mailto:markwright at internode.on.net] 
Sent: Monday, June 13, 2011 10:34 AM
To: Edwards, Waverly; antlr
Subject: Re: [antlr-interest] object oriented compiler implementation

>>

Hi Waverly,

There is lots of information using type theory, functional programming,
and proof assistants.  The book to start with using this approach is
free:

http://www.seas.upenn.edu/~cis500/current/sf/html/index.html
<<


From Waverly.Edwards at genesys.com  Mon Jun 13 14:04:06 2011
From: Waverly.Edwards at genesys.com (Edwards, Waverly)
Date: Mon, 13 Jun 2011 16:04:06 -0500
Subject: [antlr-interest] object oriented compiler implementation
In-Reply-To: <BANLkTin87H_LcJw7pWJuYx2F4CBvf9NDeg@mail.gmail.com>
References: <4A454A950FB157459B59AA50C146C07901E3033902@OMA00CEXMBX02.corp.westworlds.com>
	<ymafwnd4x7z.fsf@internode.on.net>
	<BANLkTin87H_LcJw7pWJuYx2F4CBvf9NDeg@mail.gmail.com>
Message-ID: <4A454A950FB157459B59AA50C146C07901E303390B@OMA00CEXMBX02.corp.westworlds.com>

Yes, some very interesting info,

Thank you kindly.


Waverly

-----Original Message-----
From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-bounces at antlr.org] On Behalf Of The Researcher
Sent: Monday, June 13, 2011 12:29 PM
To: antlr-interest at antlr.org
Subject: Re: [antlr-interest] object oriented compiler implementation

Another place worth searching is http://lambda-the-ultimate.org/

Searching for "design" turns up some interesting info.

Eric

List: http://www.antlr.org/mailman/listinfo/antlr-interest
Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address

From lukuilian at gmail.com  Mon Jun 13 20:32:20 2011
From: lukuilian at gmail.com (jie lu)
Date: Tue, 14 Jun 2011 11:32:20 +0800
Subject: [antlr-interest] rulecatch
Message-ID: <BANLkTim3xM9jO+jhEmjgJc7yhV3mFaGrGQ@mail.gmail.com>

Hi,

I have a problem that if input token did not match correct token, but it did
not throw a exception?
If throw a exception, i can trap it in "rulecatch" code segment, but if
there is no exception throw, how can i got the error information which
output in console? can i write a "finally" segment like "rulecatch"?

Thanks
-- 
Best Regards.
Lu Jie

From meena.subramanian at wipro.com  Tue Jun 14 04:04:26 2011
From: meena.subramanian at wipro.com (meena.subramanian at wipro.com)
Date: Tue, 14 Jun 2011 16:34:26 +0530
Subject: [antlr-interest] Facing
	NoSuchMethodError:CommonTreeNodeStream.getNodeIndex(obj)
	after upgrating ANTLR V3.1.1 to ANTLR v3.3
Message-ID: <2769D29B2A6F7F4BBDE9E743097298FA10BD182B@CHN-GDY-MBX01.wipro.com>

Hi All,

 

Currently I am using Antlr v3.1.1. Now I have upgraded it to Antlr v3.3
after that I am getting the following error while compiling my java
files with the latest version Antlr.

 

I am facing some compilation issues so not able to build. The error
message is given below,

 

UnexpectedException occurred: java.lang.NoSuchMethodError: 

Org.antlr.runtime.CommonTreeNodeStream.getNodeIndex(Ljava/lang/object;)
I

 At
*.expressoin.FocusCommonTreeNodeStream.getNodeIndex(FocusCommonTreeNodeS
tream.java)

 

Can you please suggest some solution for the above  problem?

 

Observation:

 

As per my analysis CommonTreeNodeStream.getNodeIndex(obj) method is
present till  Antlr jar v3.1.2 but the releases after this version, does
not contain the CommonTreeNodeStream.getNodeIndex(obj) method. So
obviously v3.3 does not contain the method getNodeIndex(obj) so it is
throwing  NoSuchMethodError.

 

Can you please clarify, is there any equivalent method available in the
v3.3 for getNodeIndex(obj) method?

 

Thanks in Advance!!!

 

Regards,

Meena.


Please do not print this email unless it is absolutely necessary. 

The information contained in this electronic message and any attachments to this message are intended for the exclusive use of the addressee(s) and may contain proprietary, confidential or privileged information. If you are not the intended recipient, you should not disseminate, distribute or copy this e-mail. Please notify the sender immediately and destroy all copies of this message and any attachments. 

WARNING: Computer viruses can be transmitted via email. The recipient should check this email and any attachments for the presence of viruses. The company accepts no liability for any damage caused by any virus transmitted by this email. 

www.wipro.com

From bkiers at gmail.com  Tue Jun 14 04:08:01 2011
From: bkiers at gmail.com (Bart Kiers)
Date: Tue, 14 Jun 2011 13:08:01 +0200
Subject: [antlr-interest] Facing
 NoSuchMethodError:CommonTreeNodeStream.getNodeIndex(obj) after upgrating
 ANTLR V3.1.1 to ANTLR v3.3
In-Reply-To: <2769D29B2A6F7F4BBDE9E743097298FA10BD182B@CHN-GDY-MBX01.wipro.com>
References: <2769D29B2A6F7F4BBDE9E743097298FA10BD182B@CHN-GDY-MBX01.wipro.com>
Message-ID: <BANLkTin4ZLUAP2cXQNiDh=JDQ7ibYJgS4Q@mail.gmail.com>

Meena,

You appear to be running a v3.1 lexer & parser with the run-time classes
from v3.3.
On Stackoverflow I recommended you generate a new lexer and parser using
ANTLR v3.3 (and compile them!) which you can then use with the ANTLR v3.3
runt-time classes. Did you do that already?

Bart.


On Tue, Jun 14, 2011 at 1:04 PM, <meena.subramanian at wipro.com> wrote:

> Hi All,
>
>
>
> Currently I am using Antlr v3.1.1. Now I have upgraded it to Antlr v3.3
> after that I am getting the following error while compiling my java
> files with the latest version Antlr.
>
>
>
> I am facing some compilation issues so not able to build. The error
> message is given below,
>
>
>
> UnexpectedException occurred: java.lang.NoSuchMethodError:
>
> Org.antlr.runtime.CommonTreeNodeStream.getNodeIndex(Ljava/lang/object;)
> I
>
>  At
> *.expressoin.FocusCommonTreeNodeStream.getNodeIndex(FocusCommonTreeNodeS
> tream.java)
>
>
>
> Can you please suggest some solution for the above  problem?
>
>
>
> Observation:
>
>
>
> As per my analysis CommonTreeNodeStream.getNodeIndex(obj) method is
> present till  Antlr jar v3.1.2 but the releases after this version, does
> not contain the CommonTreeNodeStream.getNodeIndex(obj) method. So
> obviously v3.3 does not contain the method getNodeIndex(obj) so it is
> throwing  NoSuchMethodError.
>
>
>
> Can you please clarify, is there any equivalent method available in the
> v3.3 for getNodeIndex(obj) method?
>
>
>
> Thanks in Advance!!!
>
>
>
> Regards,
>
> Meena.
>
>
> Please do not print this email unless it is absolutely necessary.
>
> The information contained in this electronic message and any attachments to
> this message are intended for the exclusive use of the addressee(s) and may
> contain proprietary, confidential or privileged information. If you are not
> the intended recipient, you should not disseminate, distribute or copy this
> e-mail. Please notify the sender immediately and destroy all copies of this
> message and any attachments.
>
> WARNING: Computer viruses can be transmitted via email. The recipient
> should check this email and any attachments for the presence of viruses. The
> company accepts no liability for any damage caused by any virus transmitted
> by this email.
>
> www.wipro.com
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>

From bkiers at gmail.com  Tue Jun 14 04:47:18 2011
From: bkiers at gmail.com (Bart Kiers)
Date: Tue, 14 Jun 2011 13:47:18 +0200
Subject: [antlr-interest] Facing
 NoSuchMethodError:CommonTreeNodeStream.getNodeIndex(obj) after upgrating
 ANTLR V3.1.1 to ANTLR v3.3
In-Reply-To: <2769D29B2A6F7F4BBDE9E743097298FA10BD1870@CHN-GDY-MBX01.wipro.com>
References: <2769D29B2A6F7F4BBDE9E743097298FA10BD182B@CHN-GDY-MBX01.wipro.com>
	<BANLkTin4ZLUAP2cXQNiDh=JDQ7ibYJgS4Q@mail.gmail.com>
	<2769D29B2A6F7F4BBDE9E743097298FA10BD1870@CHN-GDY-MBX01.wipro.com>
Message-ID: <BANLkTikqtHMvddtWwZaPVkDP1pind8Cxfw@mail.gmail.com>

Yes, you're running it all with v3.3, but did you generate a new lexer and
parser from your grammar using v3.3?

Bart.


On Tue, Jun 14, 2011 at 1:43 PM, <meena.subramanian at wipro.com> wrote:

>  Bart,
>
>
>
> Yes brat, I have did the following to use Antlr v3.3. (we are downloading
>  the ANTLR jars from maven.)
>
>
>
> 1.       I have changed my  *pom.xml* as below
>
> From :
>    <dependency>
>     <groupId>org.antlr</groupId>
>     <artifactId>antlr-runtime</artifactId>
>     <version>3.1.1</version>
>    </dependency>
>
>   To :
>     <dependency>
>        <groupId>org.antlr</groupId>
>        <artifactId>antlr-complete</artifactId>
>        <version>3.3</version>
>     </dependency>
>
>  2.       Rename the jar FROM antlr-3.3-complete TO antlr-complete-3.3
>
> 3.       Run the below maven command to install the local repository with
> the new jar.
>
> mvn install:install-file -DgroupId=org.antlr -DartifactId=antlr-complete
> -Dversion=3.3 -Dpackaging=jar -Dfile=local\Path\to\antlr-complete-3.3.jar
>
> *4.       *Run the below mvn command to compile: *mvn install
> -DskipTests=true*
>
>
>
> After following the above steps I got the below error:
>
>
>
> Build Failure : Compilation Error: NoSuchMethodError?.and in the error
> message it clearly indicates that *getNodeIndex(obj)*
>
>  Method is missing.
>
>
>
> Thanks,
>
> Meena.
>
>
>
> *From:* Bart Kiers [mailto:bkiers at gmail.com]
> *Sent:* Tuesday, June 14, 2011 4:38 PM
> *To:* Meena Subramanian (WT01 - Banking & Financial Services)
> *Cc:* antlr-interest at antlr.org
> *Subject:* Re: [antlr-interest] Facing
> NoSuchMethodError:CommonTreeNodeStream.getNodeIndex(obj) after upgrating
> ANTLR V3.1.1 to ANTLR v3.3
>
>
>
> Meena,
>
>
>
> You appear to be running a v3.1 lexer & parser with the run-time classes
> from v3.3.
>
> On Stackoverflow I recommended you generate a new lexer and parser using
> ANTLR v3.3 (and compile them!) which you can then use with the ANTLR v3.3
> runt-time classes. Did you do that already?
>
>
>
> Bart.
>
>
>
> On Tue, Jun 14, 2011 at 1:04 PM, <meena.subramanian at wipro.com> wrote:
>
> Hi All,
>
>
>
> Currently I am using Antlr v3.1.1. Now I have upgraded it to Antlr v3.3
> after that I am getting the following error while compiling my java
> files with the latest version Antlr.
>
>
>
> I am facing some compilation issues so not able to build. The error
> message is given below,
>
>
>
> UnexpectedException occurred: java.lang.NoSuchMethodError:
>
> Org.antlr.runtime.CommonTreeNodeStream.getNodeIndex(Ljava/lang/object;)
> I
>
>  At
> *.expressoin.FocusCommonTreeNodeStream.getNodeIndex(FocusCommonTreeNodeS
> tream.java)
>
>
>
> Can you please suggest some solution for the above  problem?
>
>
>
> Observation:
>
>
>
> As per my analysis CommonTreeNodeStream.getNodeIndex(obj) method is
> present till  Antlr jar v3.1.2 but the releases after this version, does
> not contain the CommonTreeNodeStream.getNodeIndex(obj) method. So
> obviously v3.3 does not contain the method getNodeIndex(obj) so it is
> throwing  NoSuchMethodError.
>
>
>
> Can you please clarify, is there any equivalent method available in the
> v3.3 for getNodeIndex(obj) method?
>
>
>
> Thanks in Advance!!!
>
>
>
> Regards,
>
> Meena.
>
>
> Please do not print this email unless it is absolutely necessary.
>
> The information contained in this electronic message and any attachments to
> this message are intended for the exclusive use of the addressee(s) and may
> contain proprietary, confidential or privileged information. If you are not
> the intended recipient, you should not disseminate, distribute or copy this
> e-mail. Please notify the sender immediately and destroy all copies of this
> message and any attachments.
>
> WARNING: Computer viruses can be transmitted via email. The recipient
> should check this email and any attachments for the presence of viruses. The
> company accepts no liability for any damage caused by any virus transmitted
> by this email.
>
> www.wipro.com
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>
>
>
> * Please do not print this email unless it is absolutely necessary. *
>
> The information contained in this electronic message and any attachments to
> this message are intended for the exclusive use of the addressee(s) and may
> contain proprietary, confidential or privileged information. If you are not
> the intended recipient, you should not disseminate, distribute or copy this
> e-mail. Please notify the sender immediately and destroy all copies of this
> message and any attachments.
>
> WARNING: Computer viruses can be transmitted via email. The recipient
> should check this email and any attachments for the presence of viruses. The
> company accepts no liability for any damage caused by any virus transmitted
> by this email.
>
> www.wipro.com
>

From gd.antlr at gmail.com  Tue Jun 14 07:11:06 2011
From: gd.antlr at gmail.com (Graham Mer)
Date: Tue, 14 Jun 2011 07:11:06 -0700
Subject: [antlr-interest] Non-consumed token
Message-ID: <BANLkTimiutu84aQXzMu1g_SyfLOaAN7jsA@mail.gmail.com>

Hello list,

When I run a test sample against my AST-generating grammar in
ANTLRWorks 1.4.2 debugger, it generates the expected parse tree and
AST according to the diagrams generated in the debugger, but shows a
few of the tokens in the input panel in yellow. I can't find any
documentation on this, but from the preference panel, it appears that
this indicates a "non-consumed token." What does that mean, and does
it need to be fixed, or is it just additional information about a
correct parse? If it needs to be fixed, how do I fix or debug it?

I thought that the AST-generating grammar was working correctly, but I
hit problems when trying to parse the resulting AST that cause ANTLR
to run out of memory (infinite recursion?), so I suspect the yellow
tokens are trying to tell me that the AST-generating parse is in fact
not working correctly.

Finally, is there documentation for ANTLRWorks and its debugger
somewhere? I don't see any on the documentation page or the ANTLRWorks
page at antlr.org, and a google search for "antlr non-consumed token"
returns nothing useful.

Thanks.

From arthernan at hotmail.com  Tue Jun 14 10:23:56 2011
From: arthernan at hotmail.com (Arturo Hernandez)
Date: Tue, 14 Jun 2011 12:23:56 -0500
Subject: [antlr-interest] minimalistic grammar approach
Message-ID: <BLU152-w13388DD699650E7DDC9589B6680@phx.gbl>


Hello everybody,
I am making a spec for code generation that I am intending to use on my own Information Systems development
My first step is to create a minimalistic implementation independent (II) grammar with support for record types, nested records, typed arrays, function calls and basic loop and contol logic. Such that expressions in a language that implemented this II grammar would be easy to translate to any language. And also easier to manipulate. 
Hash arrays would also be supported and the typical collection loops. Would also be supported.
Does anyone here have any suggestions. Is there such a thing or close to it already implemented in ANTLR.

Any info will be greatly appreciated.

Arturo-- Object orientation works by hiding data behind more complex data. -- 		 	   		  

From researcher0x00 at gmail.com  Tue Jun 14 12:28:22 2011
From: researcher0x00 at gmail.com (The Researcher)
Date: Tue, 14 Jun 2011 15:28:22 -0400
Subject: [antlr-interest] minimalistic grammar approach
In-Reply-To: <BLU152-w13388DD699650E7DDC9589B6680@phx.gbl>
References: <BLU152-w13388DD699650E7DDC9589B6680@phx.gbl>
Message-ID: <BANLkTikNCO2vJ=_HTFQXb8SWcvnPQF_yiQ@mail.gmail.com>

 Hi Arturo,

I would start with "Compilers Principles, Techniques, & Tools" by Aho, Lam,
Sethi, and Ullman a.k.a the Dragon Book. If you don't have it you really
should for a project of that level.

http://en.wikipedia.org/wiki/Compilers:_Principles,_Techniques,_and_Tools

Eric

From stefika at gmail.com  Tue Jun 14 13:08:05 2011
From: stefika at gmail.com (Andreas Stefik)
Date: Tue, 14 Jun 2011 15:08:05 -0500
Subject: [antlr-interest]  Antlr, Errors, and the console
Message-ID: <BANLkTikU8gDqYXSLq2nCyAXPqTFC-Mm_4Q@mail.gmail.com>

Hey folks,

Simple question. I want to turn off the default behavior of reporting
lexer/parser errors to the console. The most obvious way I could think
was to just override a few methods:

@lexer::members {
    public void reportError(RecognitionException e) { //override and do nothing
    }
}

@members{
	public void reportError(RecognitionException e) {
    	}
}

This seems to work. While I don't immediately see a problem in my
application (with limited testing so far), is there a different/easier
way I am supposed to be doing this? Will this cause potential problems
(perhaps antlr uses this internally for something important)?

Stefik

From arthernan at hotmail.com  Tue Jun 14 13:30:53 2011
From: arthernan at hotmail.com (Arturo Hernandez)
Date: Tue, 14 Jun 2011 15:30:53 -0500
Subject: [antlr-interest] minimalistic grammar approach
In-Reply-To: <BANLkTi=X--7L55LES2Zxy8eBZCm4hfC0FQ@mail.gmail.com>
References: <BLU152-w13388DD699650E7DDC9589B6680@phx.gbl>,
	<BANLkTi=X--7L55LES2Zxy8eBZCm4hfC0FQ@mail.gmail.com>
Message-ID: <BLU152-w52D07D061BA7774E0C7141B6680@phx.gbl>


Sergiy and Researcher,
Thanks for your answers.
The twist in this case is that I want to get the grammar first and then the language should be very easy. I have gathered the utility of having semicolons, thanks for that.
I would rather not start from scratch if I don't have to. I think I could potentially find simple expression grammar in ANLTR.
I'll be posting some beginning grammar later today.

Arturo
-- I want to be part of the code generation! --


> Date: Tue, 14 Jun 2011 22:58:16 +0300
> Subject: Re: [antlr-interest] minimalistic grammar approach
> From: sergiy.dubovik at gmail.com
> To: arthernan at hotmail.com
> 
> Hi,
> 
> I usually start with examples of target language I want to develop.
> Write how to declare variables, structures, functions. Then identify
> terminals: strings, integers, floats, operators, identifiers, keywords
> and so on.
> I start from arithmetic expressions, they are quite tricky because of
> precedence. Then define boolean expressions, variable declaration,
> assignments, functions. This process is very iterative you can make it
> as complex as you wish. Use AntlrWorks, it can quickly run your
> grammar on test input, also it can show how AST will look like in
> debugger mode.
> 
> It's much easier to start with a grammar which has ending symbol for
> each statement, in C it's ";". Ruby like grammars are more difficult
> (at least i spent several days figuring out how to make it working)
> because of new line which can be separator and whitespace.
> 
> Can't promise this will work for you.
> 
> br,
> Sergiy
> 
> On Tue, Jun 14, 2011 at 8:23 PM, Arturo Hernandez <arthernan at hotmail.com> wrote:
> >
> > Hello everybody,
> > I am making a spec for code generation that I am intending to use on my own Information Systems development
> > My first step is to create a minimalistic implementation independent (II) grammar with support for record types, nested records, typed arrays, function calls and basic loop and contol logic. Such that expressions in a language that implemented this II grammar would be easy to translate to any language. And also easier to manipulate.
> > Hash arrays would also be supported and the typical collection loops. Would also be supported.
> > Does anyone here have any suggestions. Is there such a thing or close to it already implemented in ANTLR.
> >
> > Any info will be greatly appreciated.
> >
> > Arturo-- Object orientation works by hiding data behind more complex data. --
> >
> > List: http://www.antlr.org/mailman/listinfo/antlr-interest
> > Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
> >
 		 	   		  

From temporaryemail at comcast.net  Tue Jun 14 17:55:52 2011
From: temporaryemail at comcast.net (Bob)
Date: Tue, 14 Jun 2011 17:55:52 -0700
Subject: [antlr-interest] Parse guided by preceding input
Message-ID: <002701cc2af7$04d7c500$0e874f00$@net>

With bison/flex the lexical analyzer pipelines tokens on demand to the
parser

as the grammar rules are processed.

 

It appears in Antlr (3) that lexical analysis tokenizes the input stream

before any grammar rules are activated.

 

By pipelining, it's possible to influence the parse from preceding input at 

the lexical level.

 

For example, an identifier rule ( 'a'..'z' )* can lookup

the string in a table built from grammar rules of preceding input and 

return either an identifier-token or a table-token to guide subsequent

rule activation.

 

If Antlr does not pipeline, the equivalent would have to be done

somehow in the grammar rules, not the lex rules.

 

Is there a way to do this?


From simon.marchi at polymtl.ca  Tue Jun 14 17:57:50 2011
From: simon.marchi at polymtl.ca (Simon Marchi)
Date: Tue, 14 Jun 2011 20:57:50 -0400
Subject: [antlr-interest] gunit failing on update to ANTLR 3.3
In-Reply-To: <46ACBC8D-36C1-4F53-B716-7200B1241AE9@cs.usfca.edu>
References: <BANLkTikWAyKpg4zZV57ZDFvzhGaUyh-YbA@mail.gmail.com>
	<BANLkTimuym=HnNfZqXbOF5fm0wnFC9jAyg@mail.gmail.com>
	<46ACBC8D-36C1-4F53-B716-7200B1241AE9@cs.usfca.edu>
Message-ID: <BANLkTimcfr5br+rb6=eP=zcZRPvo5ihpKw@mail.gmail.com>

Ping !

On Mon, Jun 6, 2011 at 19:52, Terence Parr <parrt at cs.usfca.edu> wrote:
> hi guys. at a conference for another day or two. if no response this
> week, ping me!
>
> a simple grammar / gunit test that fails should yield a quick fix :)
>
> Ter
> On Jun 6, 2011, at 4:47 PM, Simon Marchi wrote:
>
>> I also have experienced some strange behavior with gunit, although it
>> is the first time I use it. I sent a message about this on May 20
>> (http://www.antlr.org/pipermail/antlr-interest/2011-May/041650.html)
>> and have seen one or two other on the same subject. I would really
>> like a follow-up on this !
>>
>> Thanks,
>>
>> Simon
>>
>> On Mon, Jun 6, 2011 at 08:32, Jasper Floor <jasperfloor at gmail.com>
>> wrote:
>>> Dear All,
>>>
>>> I have a small DSL for the company I work for. I have used gunit to
>>> make some tests. I also have my own tests next to this but operating
>>> on a higher level.
>>>
>>> I recently made a small change to the language and decided to update
>>> Antlr to the latest version.
>>>
>>> Unfortunately most of my (g)unit tests broke.
>>>
>>> The reason in one case is that the following test (the first test in
>>> the file for whatever that is worth):
>>>
>>> "$1=#1;" OK
>>>
>>> Does not return OK. The output says parsing stopped at character 4.
>>> Tracing through the generated junit code I found out that the return
>>> value is not OK but the AST. So the test should pass with OK.
>>> This isn't consistent however. Or rather. FAIL seems to work and
>>> some AST pass.
>>>
>>> All tests pass with antlr 3.2. They also pass my own test suite which
>>> tests at a higher level from gunit.
>>> This implies a problem with gunit.
>>>
>>> mvg,
>>> Jasper
>>>
>>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>>> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>>>
>>
>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>

From arthernan at hotmail.com  Tue Jun 14 21:10:30 2011
From: arthernan at hotmail.com (Arturo Hernandez)
Date: Tue, 14 Jun 2011 23:10:30 -0500
Subject: [antlr-interest] minimalistic grammar approach
In-Reply-To: <BLU152-w52D07D061BA7774E0C7141B6680@phx.gbl>
References: <BLU152-w13388DD699650E7DDC9589B6680@phx.gbl>, ,
	<BANLkTi=X--7L55LES2Zxy8eBZCm4hfC0FQ@mail.gmail.com>,
	<BLU152-w52D07D061BA7774E0C7141B6680@phx.gbl>
Message-ID: <BLU152-w4685E85F871EE669C1526FB66B0@phx.gbl>


Hello everybody,
Here is an informal draft of the (minimalist) Implementation Independent grammar. It's not meant as a play grammar, but as a practical grammar to specify transformations that are easy to translate to commercial grade implemented languages. Object and unit support is conspicuously absent, not so exceptions. Any criticism, references, ect.. are very welcome.
The language used for description in this email is not relevant, I am just taking a shortcut to express the grammar.
type aaa integer;type sss record( aaa integer, bbb string);type xxx arrayof aaa index by dddd;
integer ccc;var sss;   //infer typeconst int ssss;
sss:=function(ref a, const b, c){};return dddd;
// pascal sugar inrecord xxx { .aaaa:=ssss;}   //equivalent to xxx.aaaa:=ssss;
procedure(a, b, c) {};exit;  //end proc
foreach item in collection {};foreach idx indexin collection {};for i is 1 to 4 step 2 {};while (exp) {};break (exp); //exit loop
if (exp) {};else (exp) {};elsif (exp) {};case (aaaaa) { const: {} const: {} const: {} default: {}}  //aaaaa is an expression const are constants
throw excep ssssss; //ssssss is a variable
try {};
exception {};  // after a try blockexception (integer ex) {};exception (var ex) {};  // infer type
rethrow; // inside an exception block (benign if extra)
> From: arthernan at hotmail.com
> To: antlr-interest at antlr.org
> Date: Tue, 14 Jun 2011 15:30:53 -0500
> Subject: Re: [antlr-interest] minimalistic grammar approach
> 
> 
> Sergiy and Researcher,
> Thanks for your answers.
> The twist in this case is that I want to get the grammar first and then the language should be very easy. I have gathered the utility of having semicolons, thanks for that.
> I would rather not start from scratch if I don't have to. I think I could potentially find simple expression grammar in ANLTR.
> I'll be posting some beginning grammar later today.
> 
> Arturo
> -- I want to be part of the code generation! --
> 
> 
> > Date: Tue, 14 Jun 2011 22:58:16 +0300
> > Subject: Re: [antlr-interest] minimalistic grammar approach
> > From: sergiy.dubovik at gmail.com
> > To: arthernan at hotmail.com
> > 
> > Hi,
> > 
> > I usually start with examples of target language I want to develop.
> > Write how to declare variables, structures, functions. Then identify
> > terminals: strings, integers, floats, operators, identifiers, keywords
> > and so on.
> > I start from arithmetic expressions, they are quite tricky because of
> > precedence. Then define boolean expressions, variable declaration,
> > assignments, functions. This process is very iterative you can make it
> > as complex as you wish. Use AntlrWorks, it can quickly run your
> > grammar on test input, also it can show how AST will look like in
> > debugger mode.
> > 
> > It's much easier to start with a grammar which has ending symbol for
> > each statement, in C it's ";". Ruby like grammars are more difficult
> > (at least i spent several days figuring out how to make it working)
> > because of new line which can be separator and whitespace.
> > 
> > Can't promise this will work for you.
> > 
> > br,
> > Sergiy
> > 
> > On Tue, Jun 14, 2011 at 8:23 PM, Arturo Hernandez <arthernan at hotmail.com> wrote:
> > >
> > > Hello everybody,
> > > I am making a spec for code generation that I am intending to use on my own Information Systems development
> > > My first step is to create a minimalistic implementation independent (II) grammar with support for record types, nested records, typed arrays, function calls and basic loop and contol logic. Such that expressions in a language that implemented this II grammar would be easy to translate to any language. And also easier to manipulate.
> > > Hash arrays would also be supported and the typical collection loops. Would also be supported.
> > > Does anyone here have any suggestions. Is there such a thing or close to it already implemented in ANTLR.
> > >
> > > Any info will be greatly appreciated.
> > >
> > > Arturo-- Object orientation works by hiding data behind more complex data. --
> > >
> > > List: http://www.antlr.org/mailman/listinfo/antlr-interest
> > > Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
> > >
>  		 	   		  
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
 		 	   		  

From sergiy.dubovik at gmail.com  Tue Jun 14 23:12:27 2011
From: sergiy.dubovik at gmail.com (Sergiy Dubovik)
Date: Wed, 15 Jun 2011 09:12:27 +0300
Subject: [antlr-interest] minimalistic grammar approach
In-Reply-To: <BLU152-w4685E85F871EE669C1526FB66B0@phx.gbl>
References: <BLU152-w13388DD699650E7DDC9589B6680@phx.gbl>
	<BANLkTi=X--7L55LES2Zxy8eBZCm4hfC0FQ@mail.gmail.com>
	<BLU152-w52D07D061BA7774E0C7141B6680@phx.gbl>
	<BLU152-w4685E85F871EE669C1526FB66B0@phx.gbl>
Message-ID: <BANLkTikwRp9p4VYh0tB1LEWNq=2CQDkWRw@mail.gmail.com>

Hi,

I tried to quickly adopt your style to my grammar on which I'm
currently working. It doesn't work like you described, however it
could be a starting point, perhaps.
Would be great to get comments from more experienced folks.
Grammar and sample input is here: https://gist.github.com/1026572
I had to switch off function call, it triggers recursion which I can't
understand. You will need to solve it yourself :)
I removed AST rewrite rules to simplify grammar. Those are very easy anyway.

br,
Sergiy

On Wed, Jun 15, 2011 at 7:10 AM, Arturo Hernandez <arthernan at hotmail.com> wrote:
>
> Hello everybody,
> Here is an informal draft of the (minimalist) Implementation Independent grammar. It's not meant as a play grammar, but as a practical grammar to specify transformations that are easy to translate to commercial grade implemented languages. Object and unit support is conspicuously absent, not so exceptions. Any criticism, references, ect.. are very welcome.
> The language used for description in this email is not relevant, I am just taking a shortcut to express the grammar.
> type aaa integer;type sss record( aaa integer, bbb string);type xxx arrayof aaa index by dddd;
> integer ccc;var sss; ? //infer typeconst int ssss;
> sss:=function(ref a, const b, c){};return dddd;
> // pascal sugar inrecord xxx { .aaaa:=ssss;} ? //equivalent to xxx.aaaa:=ssss;
> procedure(a, b, c) {};exit; ?//end proc
> foreach item in collection {};foreach idx indexin collection {};for i is 1 to 4 step 2 {};while (exp) {};break (exp); //exit loop
> if (exp) {};else (exp) {};elsif (exp) {};case (aaaaa) { const: {} const: {} const: {} default: {}} ?//aaaaa is an expression const are constants
> throw excep ssssss; //ssssss is a variable
> try {};
> exception {}; ?// after a try blockexception (integer ex) {};exception (var ex) {}; ?// infer type
> rethrow; // inside an exception block (benign if extra)
>> From: arthernan at hotmail.com
>> To: antlr-interest at antlr.org
>> Date: Tue, 14 Jun 2011 15:30:53 -0500
>> Subject: Re: [antlr-interest] minimalistic grammar approach
>>
>>
>> Sergiy and Researcher,
>> Thanks for your answers.
>> The twist in this case is that I want to get the grammar first and then the language should be very easy. I have gathered the utility of having semicolons, thanks for that.
>> I would rather not start from scratch if I don't have to. I think I could potentially find simple expression grammar in ANLTR.
>> I'll be posting some beginning grammar later today.
>>
>> Arturo
>> -- I want to be part of the code generation! --
>>
>>
>> > Date: Tue, 14 Jun 2011 22:58:16 +0300
>> > Subject: Re: [antlr-interest] minimalistic grammar approach
>> > From: sergiy.dubovik at gmail.com
>> > To: arthernan at hotmail.com
>> >
>> > Hi,
>> >
>> > I usually start with examples of target language I want to develop.
>> > Write how to declare variables, structures, functions. Then identify
>> > terminals: strings, integers, floats, operators, identifiers, keywords
>> > and so on.
>> > I start from arithmetic expressions, they are quite tricky because of
>> > precedence. Then define boolean expressions, variable declaration,
>> > assignments, functions. This process is very iterative you can make it
>> > as complex as you wish. Use AntlrWorks, it can quickly run your
>> > grammar on test input, also it can show how AST will look like in
>> > debugger mode.
>> >
>> > It's much easier to start with a grammar which has ending symbol for
>> > each statement, in C it's ";". Ruby like grammars are more difficult
>> > (at least i spent several days figuring out how to make it working)
>> > because of new line which can be separator and whitespace.
>> >
>> > Can't promise this will work for you.
>> >
>> > br,
>> > Sergiy
>> >
>> > On Tue, Jun 14, 2011 at 8:23 PM, Arturo Hernandez <arthernan at hotmail.com> wrote:
>> > >
>> > > Hello everybody,
>> > > I am making a spec for code generation that I am intending to use on my own Information Systems development
>> > > My first step is to create a minimalistic implementation independent (II) grammar with support for record types, nested records, typed arrays, function calls and basic loop and contol logic. Such that expressions in a language that implemented this II grammar would be easy to translate to any language. And also easier to manipulate.
>> > > Hash arrays would also be supported and the typical collection loops. Would also be supported.
>> > > Does anyone here have any suggestions. Is there such a thing or close to it already implemented in ANTLR.
>> > >
>> > > Any info will be greatly appreciated.
>> > >
>> > > Arturo-- Object orientation works by hiding data behind more complex data. --
>> > >
>> > > List: http://www.antlr.org/mailman/listinfo/antlr-interest
>> > > Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>> > >
>>
>>
>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>

From asicaddress at gmail.com  Wed Jun 15 19:32:05 2011
From: asicaddress at gmail.com (A Z)
Date: Wed, 15 Jun 2011 21:32:05 -0500
Subject: [antlr-interest] C Target - Where is it safe to switch input
	streams?
Message-ID: <BANLkTi=GKzWJ209mauD6+_nFgXJoRdRULg@mail.gmail.com>

Hello all,

  In the example C grammar, PUSHSTREAM() is called in the middle of a lexer
rule to implement the include preprocessor directive. I followed this
approach and everything works fine except the current token is incomplete.
The channel and USER values get set but the text is blank. All the tokens
from the included file are correct.

My  __LINE__ directives work the same way as includes and look something
like this:

DIR_LINE :
  '`__LINE__'
    {ctx->pLexerData->dirLineText();runNewBuffer(ctx);$channel=HIDDEN;};

static void runNewBuffer(pSVLexer ctx)
{
    pANTLR3_INPUT_STREAM input =
antlr3NewAsciiStringInPlaceStream(newBufferData,newBufferSize,newBufferName);
    if(input == NULL)
       ANTLR3_FPRINTF(stderr, "Unable to open buffer \%s due to malloc()
failure1\n",newBufferName);

    PUSHSTREAM(input);

    ctx->pLexerData->inputList.push(input); //Mirror what ANTLR does
}

I found if I remove runNewBuffer() then the DIR_LINE token correctly gets
it's text set to "`__LINE__", otherwise the text is blank but the channel is
set correctly in either case. While trying to fix this I found it crashes if
PUSHSTREAM is placed after emit() inside nextTokenStr(). If I move it to the
nextToken() function, it seems to work as intended. Are there any side
effects to switching the input streams inside nextToken()? Is there another
way to run an action after a certain token has been completed?

Thanks

From ben.corne at gmail.com  Thu Jun 16 05:54:34 2011
From: ben.corne at gmail.com (Ben Corne)
Date: Thu, 16 Jun 2011 14:54:34 +0200
Subject: [antlr-interest] Combining Tokens with rewrite rules
Message-ID: <BANLkTik67qP3_TkS7=n+_TFkrf4vaA_T5Q@mail.gmail.com>

Hi

I've read some other threads about combining tokens in rewrite rules but I
don't think it's what I need (
http://www.antlr.org/pipermail/antlr-interest/2007-November/024612.html and
the one referenced in this thread).

---abstract tokens---
@tokens {
  AGKEYSTRING;
}
----tokens--------------
NAME : 'a'..'z'+ ;
KEY    : NAME ':' ;
----------------------------

I need to parse keyworded messages and want to combine KEY tokens into
AGKEYSTRING or not depending on which context the keywords are given in:

1) &foo:bar: // references to the keyword function definition 'foo:bar:' =>
combine
2) foo: 1 bar: 2 // application of  'foo:bar:' => don't combine
3) foo:bar:(1,2) // canonical application of the 'foo:bar:' function =>
combine
4) foo:bar:2 // application of 'foo:' on argument "application of 'bar: 1' "
=> don't combine

I believe in my grammar file I cannot succeed in doing this with fragment
tokens & regular tokens.
Combining the tokens with Java code is my current solution but this is bad
for using the same grammar for other bindings, which is one of the reasons
I'm making the parser with antlr.

Any ideas?

Regards
Ben C;

From arthernan at hotmail.com  Thu Jun 16 06:43:58 2011
From: arthernan at hotmail.com (Arturo Hernandez)
Date: Thu, 16 Jun 2011 08:43:58 -0500
Subject: [antlr-interest] minimalistic grammar approach
In-Reply-To: <BANLkTikwRp9p4VYh0tB1LEWNq=2CQDkWRw@mail.gmail.com>
References: <BLU152-w13388DD699650E7DDC9589B6680@phx.gbl>,
	<BANLkTi=X--7L55LES2Zxy8eBZCm4hfC0FQ@mail.gmail.com>,
	<BLU152-w52D07D061BA7774E0C7141B6680@phx.gbl>,
	<BLU152-w4685E85F871EE669C1526FB66B0@phx.gbl>,
	<BANLkTikwRp9p4VYh0tB1LEWNq=2CQDkWRw@mail.gmail.com>
Message-ID: <BLU152-w336EA4433B51842F0B7142B66A0@phx.gbl>


Sergiy,
It is definitively a starting point. I also would love to hear from more experienced people on the list.
In the meantime I started to make modifications, on a local copy. And I will let you know my progress.
Thanks.
> Date: Wed, 15 Jun 2011 09:12:27 +0300
> Subject: Re: [antlr-interest] minimalistic grammar approach
> From: sergiy.dubovik at gmail.com
> To: arthernan at hotmail.com
> CC: antlr-interest at antlr.org
> 
> Hi,
> 
> I tried to quickly adopt your style to my grammar on which I'm
> currently working. It doesn't work like you described, however it
> could be a starting point, perhaps.
> Would be great to get comments from more experienced folks.
> Grammar and sample input is here: https://gist.github.com/1026572
> I had to switch off function call, it triggers recursion which I can't
> understand. You will need to solve it yourself :)
> I removed AST rewrite rules to simplify grammar. Those are very easy anyway.
> 
> br,
> Sergiy
> 
> On Wed, Jun 15, 2011 at 7:10 AM, Arturo Hernandez <arthernan at hotmail.com> wrote:
> >
> > Hello everybody,
> > Here is an informal draft of the (minimalist) Implementation Independent grammar. It's not meant as a play grammar, but as a practical grammar to specify transformations that are easy to translate to commercial grade implemented languages. Object and unit support is conspicuously absent, not so exceptions. Any criticism, references, ect.. are very welcome.
> > The language used for description in this email is not relevant, I am just taking a shortcut to express the grammar.
> > type aaa integer;type sss record( aaa integer, bbb string);type xxx arrayof aaa index by dddd;
> > integer ccc;var sss;   //infer typeconst int ssss;
> > sss:=function(ref a, const b, c){};return dddd;
> > // pascal sugar inrecord xxx { .aaaa:=ssss;}   //equivalent to xxx.aaaa:=ssss;
> > procedure(a, b, c) {};exit;  //end proc
> > foreach item in collection {};foreach idx indexin collection {};for i is 1 to 4 step 2 {};while (exp) {};break (exp); //exit loop
> > if (exp) {};else (exp) {};elsif (exp) {};case (aaaaa) { const: {} const: {} const: {} default: {}}  //aaaaa is an expression const are constants
> > throw excep ssssss; //ssssss is a variable
> > try {};
> > exception {};  // after a try blockexception (integer ex) {};exception (var ex) {};  // infer type
> > rethrow; // inside an exception block (benign if extra)
> >> From: arthernan at hotmail.com
> >> To: antlr-interest at antlr.org
> >> Date: Tue, 14 Jun 2011 15:30:53 -0500
> >> Subject: Re: [antlr-interest] minimalistic grammar approach
> >>
> >>
> >> Sergiy and Researcher,
> >> Thanks for your answers.
> >> The twist in this case is that I want to get the grammar first and then the language should be very easy. I have gathered the utility of having semicolons, thanks for that.
> >> I would rather not start from scratch if I don't have to. I think I could potentially find simple expression grammar in ANLTR.
> >> I'll be posting some beginning grammar later today.
> >>
> >> Arturo
> >> -- I want to be part of the code generation! --
> >>
> >>
> >> > Date: Tue, 14 Jun 2011 22:58:16 +0300
> >> > Subject: Re: [antlr-interest] minimalistic grammar approach
> >> > From: sergiy.dubovik at gmail.com
> >> > To: arthernan at hotmail.com
> >> >
> >> > Hi,
> >> >
> >> > I usually start with examples of target language I want to develop.
> >> > Write how to declare variables, structures, functions. Then identify
> >> > terminals: strings, integers, floats, operators, identifiers, keywords
> >> > and so on.
> >> > I start from arithmetic expressions, they are quite tricky because of
> >> > precedence. Then define boolean expressions, variable declaration,
> >> > assignments, functions. This process is very iterative you can make it
> >> > as complex as you wish. Use AntlrWorks, it can quickly run your
> >> > grammar on test input, also it can show how AST will look like in
> >> > debugger mode.
> >> >
> >> > It's much easier to start with a grammar which has ending symbol for
> >> > each statement, in C it's ";". Ruby like grammars are more difficult
> >> > (at least i spent several days figuring out how to make it working)
> >> > because of new line which can be separator and whitespace.
> >> >
> >> > Can't promise this will work for you.
> >> >
> >> > br,
> >> > Sergiy
> >> >
> >> > On Tue, Jun 14, 2011 at 8:23 PM, Arturo Hernandez <arthernan at hotmail.com> wrote:
> >> > >
> >> > > Hello everybody,
> >> > > I am making a spec for code generation that I am intending to use on my own Information Systems development
> >> > > My first step is to create a minimalistic implementation independent (II) grammar with support for record types, nested records, typed arrays, function calls and basic loop and contol logic. Such that expressions in a language that implemented this II grammar would be easy to translate to any language. And also easier to manipulate.
> >> > > Hash arrays would also be supported and the typical collection loops. Would also be supported.
> >> > > Does anyone here have any suggestions. Is there such a thing or close to it already implemented in ANTLR.
> >> > >
> >> > > Any info will be greatly appreciated.
> >> > >
> >> > > Arturo-- Object orientation works by hiding data behind more complex data. --
> >> > >
> >> > > List: http://www.antlr.org/mailman/listinfo/antlr-interest
> >> > > Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
> >> > >
> >>
> >>
> >> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> >> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
> >
> >
> > List: http://www.antlr.org/mailman/listinfo/antlr-interest
> > Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
> >
 		 	   		  

From jcarey03 at gmail.com  Thu Jun 16 07:29:41 2011
From: jcarey03 at gmail.com (Jason Carey)
Date: Thu, 16 Jun 2011 10:29:41 -0400
Subject: [antlr-interest] AST Walking and Thread Safety
Message-ID: <BANLkTi=GQbpPQUn93KgmnTcM6Tq7z6Gm7g@mail.gmail.com>

Greetings,

Firstly, I'm a big fan of ANTLR.  The framework is very cool.  In my current
use of it, I would like to do a little performance optimization.
Specifically, I would like to reuse the AST (Java class type CommonTree)
produced by the parser in many instances of my walker.  Each walker will be
in a separate thread, and therefore, would be accessing the shared tree
concurrently.  My walkers do not modify the tree, but it's not clear to me
based on the ANTLR code if ANTLR would be modifying the AST or its state
during walking.  I suspect (and hope) that the tree would be effectively
"read-only" subject to the custom code I have in my walker.  Since I'm not
modifying the AST in the walker, I think I should be able to access it
concurrently as described above.  Any thoughts or suggestions are much
appreciated.  Thanks in advance.

Thanks,
Jason

From david.smith at cc.gatech.edu  Thu Jun 16 08:38:36 2011
From: david.smith at cc.gatech.edu (David Smith)
Date: Thu, 16 Jun 2011 11:38:36 -0400
Subject: [antlr-interest] Strange hangup in the Parser
Message-ID: <E1QXEeR-0005UY-Sd@elasmtp-masked.atl.sa.earthlink.net>

This seems to happen to me frequently, and I'm not sure what I change 
to fix it, but it consumes a considerable amount of time - I think 
the ultimate cure is rebooting my computer.

In the code generated by AtlrWorks, I find this:

         public ExprParser(TokenStream input, int port,
                           RecognizerSharedState state) {
             super(input, state);
             DebugEventSocketProxy proxy =
                 new DebugEventSocketProxy(this,port,adaptor);
             setDebugListener(proxy);
             setTokenStream(new DebugTokenStream(input,proxy));
             try {
                 proxy.handshake();  /****** hangs up here! **********/
             }
             catch (IOException ioe) {
                 reportError(ioe);
             }
             TreeAdaptor adap = new CommonTreeAdaptor();
             setTreeAdaptor(adap);
             proxy.setTreeAdaptor(adap);
         }
When I try to run in debug mode, the thing just hangs up at the line:
     proxy.handshake();

Any ideas?

                                 DMS

David M. Smith http://www.cc.gatech.edu/fac/David.Smith
Georgia Institute of Technology, College of Computing
Sent from my ASR-33 Teletype 


From parrt at cs.usfca.edu  Thu Jun 16 10:11:47 2011
From: parrt at cs.usfca.edu (Terence Parr)
Date: Thu, 16 Jun 2011 10:11:47 -0700
Subject: [antlr-interest] Strange hangup in the Parser
In-Reply-To: <E1QXEeR-0005UY-Sd@elasmtp-masked.atl.sa.earthlink.net>
References: <E1QXEeR-0005UY-Sd@elasmtp-masked.atl.sa.earthlink.net>
Message-ID: <9D3FE905-BE58-41BB-8797-F8F740D14E3D@cs.usfca.edu>

hi. it's a server waiting for socket connection from ANTLRWorks.
Ter
On Jun 16, 2011, at 8:38 AM, David Smith wrote:

> This seems to happen to me frequently, and I'm not sure what I change 
> to fix it, but it consumes a considerable amount of time - I think 
> the ultimate cure is rebooting my computer.
> 
> In the code generated by AtlrWorks, I find this:
> 
>         public ExprParser(TokenStream input, int port,
>                           RecognizerSharedState state) {
>             super(input, state);
>             DebugEventSocketProxy proxy =
>                 new DebugEventSocketProxy(this,port,adaptor);
>             setDebugListener(proxy);
>             setTokenStream(new DebugTokenStream(input,proxy));
>             try {
>                 proxy.handshake();  /****** hangs up here! **********/
>             }
>             catch (IOException ioe) {
>                 reportError(ioe);
>             }
>             TreeAdaptor adap = new CommonTreeAdaptor();
>             setTreeAdaptor(adap);
>             proxy.setTreeAdaptor(adap);
>         }
> When I try to run in debug mode, the thing just hangs up at the line:
>     proxy.handshake();
> 
> Any ideas?
> 
>                                 DMS
> 
> David M. Smith http://www.cc.gatech.edu/fac/David.Smith
> Georgia Institute of Technology, College of Computing
> Sent from my ASR-33 Teletype 
> 
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address


From ruslan_zasukhin at valentina-db.com  Fri Jun 17 02:13:44 2011
From: ruslan_zasukhin at valentina-db.com (Ruslan Zasukhin)
Date: Fri, 17 Jun 2011 12:13:44 +0300
Subject: [antlr-interest] Question:  ANTLR and LLVM  ...
Message-ID: <CA20F578.ECC6D%ruslan_zasukhin@valentina-db.com>

Hi All,

Have never look deeply on LLVM yet,
But have got fast question

Anybody can give his vision about

* how ANTLR refer to LLVM?
* If they can collaborate?
* should I use or drop ANTLR if we will want start to use LLVM?

And so on 


-- 
Best regards,

Ruslan Zasukhin
VP Engineering and New Technology
Paradigma Software, Inc

Valentina - Joining Worlds of Information
http://www.paradigmasoft.com

[I feel the need: the need for speed]



From ruslan_zasukhin at valentina-db.com  Fri Jun 17 02:20:54 2011
From: ruslan_zasukhin at valentina-db.com (Ruslan Zasukhin)
Date: Fri, 17 Jun 2011 12:20:54 +0300
Subject: [antlr-interest] Any comments about sematicdesign.com and their DMS
	?
Message-ID: <CA20F726.ECC72%ruslan_zasukhin@valentina-db.com>

Hi All,

I have meet yesterday this site first time
    http://www.semanticdesigns.com/


Sounds like very cool engines ... Although GUI is very ugly at least of
TestCover, which I was able download as demo.


They looks similar somehow to MPS

They compare self to Lexers, Parsers, and other tools.
But ... It seems they compare to old version of ANTLR ..
    http://www.semanticdesigns.com/products/DMS/DMSComparison.html


I wonder, if anybody have any comments about them?
At least privately 


-- 
Best regards,

Ruslan Zasukhin
VP Engineering and New Technology
Paradigma Software, Inc

Valentina - Joining Worlds of Information
http://www.paradigmasoft.com

[I feel the need: the need for speed]



From sergiy.dubovik at gmail.com  Fri Jun 17 02:53:26 2011
From: sergiy.dubovik at gmail.com (Sergiy Dubovik)
Date: Fri, 17 Jun 2011 12:53:26 +0300
Subject: [antlr-interest] Question: ANTLR and LLVM ...
In-Reply-To: <CA20F578.ECC6D%ruslan_zasukhin@valentina-db.com>
References: <CA20F578.ECC6D%ruslan_zasukhin@valentina-db.com>
Message-ID: <BANLkTin-QZfu6Hu6xDPU=CenFkZ9GYb21g@mail.gmail.com>

On Fri, Jun 17, 2011 at 12:13 PM, Ruslan Zasukhin
<ruslan_zasukhin at valentina-db.com> wrote:
> Hi All,
>
> Have never look deeply on LLVM yet,
> But have got fast question
>
> Anybody can give his vision about
>
> * how ANTLR refer to LLVM?

Antlr is: lexer, parser, ast walker. LLVM - low level virtual machine
e.g. can generate and interpret it's bytecode and can generate
optimized cpu instructions also supports JIT. They have nothing in
common but they can be used to create a compiler. Pretty good one i
have to say.

> * If they can collaborate?

Yes they can. However you still need to write some code. Also llvm is
C++ framework. There are some bindings though.

> * should I use or drop ANTLR if we will want start to use LLVM?

llvm doesn't provide what antlr provides.

:s

From david_wynter at yahoo.com  Fri Jun 17 05:07:21 2011
From: david_wynter at yahoo.com (David Wynter)
Date: Fri, 17 Jun 2011 05:07:21 -0700 (PDT)
Subject: [antlr-interest] Code completion, possible with JavaScript output?
Message-ID: <277269.91411.qm@web38006.mail.mud.yahoo.com>

Hi,

I have had a look thru the ANTLR documentation and could not find what I was looking for. New to ANTLR.

I have a SQL database with 400 tables and want to produce a parser for a language I convert to SQL for querying 3 different domains within that model.?
The application uses a Web interface so the search command line parser has to be in Javascript.?
I intend to use a grammar base don a subset of the SQL grammar <search condition>?
The users of the query languages (3, one for each domain) will need help on determining the terms we use for the column names.
For example they might type "WHERE interestrate > 1% AND?interestrate < 3%" where interestrate is a column name.
We will map these to tablename.columnname. so only single words in a reserved set are required.?
The 3 grammars are the same except they have different reserved words.?
OK to include the reserved words in the grammar itself, these are DSLs.

My question is, is there the ability to search the list of these reserved words as they type (characters as token I expect) and auto suggest in a list the possible entries?
So if "interestrate" and "interbreeding" were 2 of the reserved words then these would be suggested in a list right up until they typed the 6th character.

Thanks,

David

From jonas.hagmar at gmail.com  Fri Jun 17 05:15:30 2011
From: jonas.hagmar at gmail.com (Jonas)
Date: Fri, 17 Jun 2011 14:15:30 +0200
Subject: [antlr-interest] Context-sensitive lexer
Message-ID: <BANLkTinyj99UBvxdQPoWGCQ0_nViHsW+pw@mail.gmail.com>

Hi,

I'm developing a parser for a file format where context is very
important. I'm looking to
1) understand why my ANTLR parser gets into infinite loops
2) find out if there is any better way to implement context
sensitivity than what I am doing with semantic predicates.

A typical beginning of a file looks like this:
TITLE
some title text

SECTION1
 a=b*c
END

SECTION2
...

SECTION3
...

The syntax differs from section to section; the 'TITLE' section is
terminated by the newline after the title text line, while other
sections can e.g. use single quote string literals and be terminated
by a keyword like 'END'. Here is a sample grammar, that gets into an
infinite loop:

grammar test;

options {
  output=AST;
}

@lexer::members {
  static final int STATE_AT_BEGINNING = 0;
  static final int STATE_IN_TITLE = 1;
  static final int STATE_AFTER_TITLE = 2;
  int lexerState = STATE_AT_BEGINNING;
}

file 	:	title;

title	:	BEGIN_TITLE TITLE_TEXT END_TITLE;

BEGIN_TITLE
	: {(lexerState == STATE_AT_BEGINNING)}? 'TITLE' WS_NL
{lexerState=STATE_IN_TITLE;}
	;
	
TITLE_TEXT
	: {lexerState == STATE_IN_TITLE}? TEXT
	;
	
END_TITLE
	: {lexerState == STATE_IN_TITLE}? NL {lexerState=STATE_AFTER_TITLE;}
	;
	
BLANK_ROW
	: {!(lexerState == STATE_IN_TITLE)}? WS_NL
	;
	
REMARK	: {!(lexerState == STATE_IN_TITLE)}? 'REMA' .* NL
	;
	
fragment
WS_NL	:	(' ' | '\t')* NL;

fragment
NL	:	'\r'? '\n';

fragment
TEXT	:	(~('\r' | '\n'))*;

Best Regards,
Jonas

From Robert.Strobl at student.hpi.uni-potsdam.de  Fri Jun 17 05:23:05 2011
From: Robert.Strobl at student.hpi.uni-potsdam.de (Strobl, Robert)
Date: Fri, 17 Jun 2011 14:23:05 +0200
Subject: [antlr-interest] Context-sensitive lexer
In-Reply-To: <BANLkTinyj99UBvxdQPoWGCQ0_nViHsW+pw@mail.gmail.com>
References: <BANLkTinyj99UBvxdQPoWGCQ0_nViHsW+pw@mail.gmail.com>
Message-ID: <FC7C6823-0BF0-4C63-B8CF-89A99A480294@student.hpi.uni-potsdam.de>

Have you tried to enable the backtracking?

Best regards,
Robert

Am 17.06.2011 um 14:15 schrieb Jonas:

> Hi,
> 
> I'm developing a parser for a file format where context is very
> important. I'm looking to
> 1) understand why my ANTLR parser gets into infinite loops
> 2) find out if there is any better way to implement context
> sensitivity than what I am doing with semantic predicates.
> 
> A typical beginning of a file looks like this:
> TITLE
> some title text
> 
> SECTION1
> a=b*c
> END
> 
> SECTION2
> ...
> 
> SECTION3
> ...
> 
> The syntax differs from section to section; the 'TITLE' section is
> terminated by the newline after the title text line, while other
> sections can e.g. use single quote string literals and be terminated
> by a keyword like 'END'. Here is a sample grammar, that gets into an
> infinite loop:
> 
> grammar test;
> 
> options {
>  output=AST;
> }
> 
> @lexer::members {
>  static final int STATE_AT_BEGINNING = 0;
>  static final int STATE_IN_TITLE = 1;
>  static final int STATE_AFTER_TITLE = 2;
>  int lexerState = STATE_AT_BEGINNING;
> }
> 
> file 	:	title;
> 
> title	:	BEGIN_TITLE TITLE_TEXT END_TITLE;
> 
> BEGIN_TITLE
> 	: {(lexerState == STATE_AT_BEGINNING)}? 'TITLE' WS_NL
> {lexerState=STATE_IN_TITLE;}
> 	;
> 	
> TITLE_TEXT
> 	: {lexerState == STATE_IN_TITLE}? TEXT
> 	;
> 	
> END_TITLE
> 	: {lexerState == STATE_IN_TITLE}? NL {lexerState=STATE_AFTER_TITLE;}
> 	;
> 	
> BLANK_ROW
> 	: {!(lexerState == STATE_IN_TITLE)}? WS_NL
> 	;
> 	
> REMARK	: {!(lexerState == STATE_IN_TITLE)}? 'REMA' .* NL
> 	;
> 	
> fragment
> WS_NL	:	(' ' | '\t')* NL;
> 
> fragment
> NL	:	'\r'? '\n';
> 
> fragment
> TEXT	:	(~('\r' | '\n'))*;
> 
> Best Regards,
> Jonas
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address


From jonas.hagmar at gmail.com  Fri Jun 17 05:30:56 2011
From: jonas.hagmar at gmail.com (jonas.hagmar at gmail.com)
Date: Fri, 17 Jun 2011 12:30:56 +0000
Subject: [antlr-interest] Context-sensitive lexer
In-Reply-To: <FC7C6823-0BF0-4C63-B8CF-89A99A480294@student.hpi.uni-potsdam.de>
Message-ID: <0016e6da7de9ac1c2704a5e78ea3@google.com>

The parser still gets into an infinite loop if I enable backtracking.

Best Regards,
Jonas

On Jun 17, 2011 2:23pm, "Strobl, Robert"  
<Robert.Strobl at student.hpi.uni-potsdam.de> wrote:
> Have you tried to enable the backtracking?



> Best regards,

> Robert



> Am 17.06.2011 um 14:15 schrieb Jonas:



> > Hi,

> >

> > I'm developing a parser for a file format where context is very

> > important. I'm looking to

> > 1) understand why my ANTLR parser gets into infinite loops

> > 2) find out if there is any better way to implement context

> > sensitivity than what I am doing with semantic predicates.

> >

> > A typical beginning of a file looks like this:

> > TITLE

> > some title text

> >

> > SECTION1

> > a=b*c

> > END

> >

> > SECTION2

> > ...

> >

> > SECTION3

> > ...

> >

> > The syntax differs from section to section; the 'TITLE' section is

> > terminated by the newline after the title text line, while other

> > sections can eg use single quote string literals and be terminated

> > by a keyword like 'END'. Here is a sample grammar, that gets into an

> > infinite loop:

> >

> > grammar test;

> >

> > options {

> > output=AST;

> > }

> >

> > @lexer::members {

> > static final int STATE_AT_BEGINNING = 0;

> > static final int STATE_IN_TITLE = 1;

> > static final int STATE_AFTER_TITLE = 2;

> > int lexerState = STATE_AT_BEGINNING;

> > }

> >

> > file : title;

> >

> > title : BEGIN_TITLE TITLE_TEXT END_TITLE;

> >

> > BEGIN_TITLE

> > : {(lexerState == STATE_AT_BEGINNING)}? 'TITLE' WS_NL

> > {lexerState=STATE_IN_TITLE;}

> > ;

> >

> > TITLE_TEXT

> > : {lexerState == STATE_IN_TITLE}? TEXT

> > ;

> >

> > END_TITLE

> > : {lexerState == STATE_IN_TITLE}? NL {lexerState=STATE_AFTER_TITLE;}

> > ;

> >

> > BLANK_ROW

> > : {!(lexerState == STATE_IN_TITLE)}? WS_NL

> > ;

> >

> > REMARK : {!(lexerState == STATE_IN_TITLE)}? 'REMA' .* NL

> > ;

> >

> > fragment

> > WS_NL : (' ' | '\t')* NL;

> >

> > fragment

> > NL : '\r'? '\n';

> >

> > fragment

> > TEXT : (~('\r' | '\n'))*;

> >

> > Best Regards,

> > Jonas

> >

> > List: http://www.antlr.org/mailman/listinfo/antlr-interest

> > Unsubscribe:  
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address





> List: http://www.antlr.org/mailman/listinfo/antlr-interest

> Unsubscribe:  
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address



From jonas.hagmar at gmail.com  Fri Jun 17 06:01:16 2011
From: jonas.hagmar at gmail.com (jonas.hagmar at gmail.com)
Date: Fri, 17 Jun 2011 13:01:16 +0000
Subject: [antlr-interest] Context-sensitive lexer
In-Reply-To: <FC7C6823-0BF0-4C63-B8CF-89A99A480294@student.hpi.uni-potsdam.de>
Message-ID: <000325559f2e244cfc04a5e7fb73@google.com>

I should have said that the infinite loop can be triggered by giving an  
input that doesn't begin by 'TITLE', so for example the input 'TEST' will  
throw the parser into an infinite loop. With the "typical" input that I  
gave in the original post, the parser instead accepts all input after the  
title section, which I also find very strange. Grateful for any help.

Best Regards,
Jonas

On Jun 17, 2011 2:23pm, "Strobl, Robert"  
<Robert.Strobl at student.hpi.uni-potsdam.de> wrote:
> Have you tried to enable the backtracking?



> Best regards,

> Robert



> Am 17.06.2011 um 14:15 schrieb Jonas:



> > Hi,

> >

> > I'm developing a parser for a file format where context is very

> > important. I'm looking to

> > 1) understand why my ANTLR parser gets into infinite loops

> > 2) find out if there is any better way to implement context

> > sensitivity than what I am doing with semantic predicates.

> >

> > A typical beginning of a file looks like this:

> > TITLE

> > some title text

> >

> > SECTION1

> > a=b*c

> > END

> >

> > SECTION2

> > ...

> >

> > SECTION3

> > ...

> >

> > The syntax differs from section to section; the 'TITLE' section is

> > terminated by the newline after the title text line, while other

> > sections can eg use single quote string literals and be terminated

> > by a keyword like 'END'. Here is a sample grammar, that gets into an

> > infinite loop:

> >

> > grammar test;

> >

> > options {

> > output=AST;

> > }

> >

> > @lexer::members {

> > static final int STATE_AT_BEGINNING = 0;

> > static final int STATE_IN_TITLE = 1;

> > static final int STATE_AFTER_TITLE = 2;

> > int lexerState = STATE_AT_BEGINNING;

> > }

> >

> > file : title;

> >

> > title : BEGIN_TITLE TITLE_TEXT END_TITLE;

> >

> > BEGIN_TITLE

> > : {(lexerState == STATE_AT_BEGINNING)}? 'TITLE' WS_NL

> > {lexerState=STATE_IN_TITLE;}

> > ;

> >

> > TITLE_TEXT

> > : {lexerState == STATE_IN_TITLE}? TEXT

> > ;

> >

> > END_TITLE

> > : {lexerState == STATE_IN_TITLE}? NL {lexerState=STATE_AFTER_TITLE;}

> > ;

> >

> > BLANK_ROW

> > : {!(lexerState == STATE_IN_TITLE)}? WS_NL

> > ;

> >

> > REMARK : {!(lexerState == STATE_IN_TITLE)}? 'REMA' .* NL

> > ;

> >

> > fragment

> > WS_NL : (' ' | '\t')* NL;

> >

> > fragment

> > NL : '\r'? '\n';

> >

> > fragment

> > TEXT : (~('\r' | '\n'))*;

> >

> > Best Regards,

> > Jonas

> >

> > List: http://www.antlr.org/mailman/listinfo/antlr-interest

> > Unsubscribe:  
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address





> List: http://www.antlr.org/mailman/listinfo/antlr-interest

> Unsubscribe:  
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address



From jbb at acm.org  Fri Jun 17 06:06:06 2011
From: jbb at acm.org (John B. Brodie)
Date: Fri, 17 Jun 2011 09:06:06 -0400
Subject: [antlr-interest] Context-sensitive lexer
In-Reply-To: <BANLkTinyj99UBvxdQPoWGCQ0_nViHsW+pw@mail.gmail.com>
References: <BANLkTinyj99UBvxdQPoWGCQ0_nViHsW+pw@mail.gmail.com>
Message-ID: <1308315966.13922.2.camel@gecko>

Greetings!

Your TEXT fragment (and therefore your TITLE_TEXT token) can be empty!

Thus, I think your lexer is trying to recognize infinitely many
TITLE_TEXT tokens.

Hope this helps...
   -jbb

On Fri, 2011-06-17 at 14:15 +0200, Jonas wrote:
> Hi,
> 
> I'm developing a parser for a file format where context is very
> important. I'm looking to
> 1) understand why my ANTLR parser gets into infinite loops
> 2) find out if there is any better way to implement context
> sensitivity than what I am doing with semantic predicates.
> 
> A typical beginning of a file looks like this:
> TITLE
> some title text
> 
> SECTION1
>  a=b*c
> END
> 
> SECTION2
> ...
> 
> SECTION3
> ...
> 
> The syntax differs from section to section; the 'TITLE' section is
> terminated by the newline after the title text line, while other
> sections can e.g. use single quote string literals and be terminated
> by a keyword like 'END'. Here is a sample grammar, that gets into an
> infinite loop:
> 
> grammar test;
> 
> options {
>   output=AST;
> }
> 
> @lexer::members {
>   static final int STATE_AT_BEGINNING = 0;
>   static final int STATE_IN_TITLE = 1;
>   static final int STATE_AFTER_TITLE = 2;
>   int lexerState = STATE_AT_BEGINNING;
> }
> 
> file 	:	title;
> 
> title	:	BEGIN_TITLE TITLE_TEXT END_TITLE;
> 
> BEGIN_TITLE
> 	: {(lexerState == STATE_AT_BEGINNING)}? 'TITLE' WS_NL
> {lexerState=STATE_IN_TITLE;}
> 	;
> 	
> TITLE_TEXT
> 	: {lexerState == STATE_IN_TITLE}? TEXT
> 	;
> 	
> END_TITLE
> 	: {lexerState == STATE_IN_TITLE}? NL {lexerState=STATE_AFTER_TITLE;}
> 	;
> 	
> BLANK_ROW
> 	: {!(lexerState == STATE_IN_TITLE)}? WS_NL
> 	;
> 	
> REMARK	: {!(lexerState == STATE_IN_TITLE)}? 'REMA' .* NL
> 	;
> 	
> fragment
> WS_NL	:	(' ' | '\t')* NL;
> 
> fragment
> NL	:	'\r'? '\n';
> 
> fragment
> TEXT	:	(~('\r' | '\n'))*;
> 



From jonas.hagmar at gmail.com  Fri Jun 17 06:29:28 2011
From: jonas.hagmar at gmail.com (Jonas)
Date: Fri, 17 Jun 2011 15:29:28 +0200
Subject: [antlr-interest] Context-sensitive lexer
In-Reply-To: <1308315966.13922.2.camel@gecko>
References: <BANLkTinyj99UBvxdQPoWGCQ0_nViHsW+pw@mail.gmail.com>
	<1308315966.13922.2.camel@gecko>
Message-ID: <BANLkTinO6GZsv5oLY2cvRz9i2as3z3Nexw@mail.gmail.com>

Hi John!

I believed that using the semantic predicate would hinder ANTLR from
trying to match TITLE_TEXT in other situations than when lexerState
indicates that we are in the title section. Anyway, changing the TEXT
fragment to (~('\r' | '\n'))+ does not prevent the infinite loop. Keep
the good ideas coming!

Best Regards,
Jonas

On Fri, Jun 17, 2011 at 3:06 PM, John B. Brodie <jbb at acm.org> wrote:
> Greetings!
>
> Your TEXT fragment (and therefore your TITLE_TEXT token) can be empty!
>
> Thus, I think your lexer is trying to recognize infinitely many
> TITLE_TEXT tokens.
>
> Hope this helps...
> ? -jbb
>
> On Fri, 2011-06-17 at 14:15 +0200, Jonas wrote:
>> Hi,
>>
>> I'm developing a parser for a file format where context is very
>> important. I'm looking to
>> 1) understand why my ANTLR parser gets into infinite loops
>> 2) find out if there is any better way to implement context
>> sensitivity than what I am doing with semantic predicates.
>>
>> A typical beginning of a file looks like this:
>> TITLE
>> some title text
>>
>> SECTION1
>> ?a=b*c
>> END
>>
>> SECTION2
>> ...
>>
>> SECTION3
>> ...
>>
>> The syntax differs from section to section; the 'TITLE' section is
>> terminated by the newline after the title text line, while other
>> sections can e.g. use single quote string literals and be terminated
>> by a keyword like 'END'. Here is a sample grammar, that gets into an
>> infinite loop:
>>
>> grammar test;
>>
>> options {
>> ? output=AST;
>> }
>>
>> @lexer::members {
>> ? static final int STATE_AT_BEGINNING = 0;
>> ? static final int STATE_IN_TITLE = 1;
>> ? static final int STATE_AFTER_TITLE = 2;
>> ? int lexerState = STATE_AT_BEGINNING;
>> }
>>
>> file ?: ? ? ? title;
>>
>> title : ? ? ? BEGIN_TITLE TITLE_TEXT END_TITLE;
>>
>> BEGIN_TITLE
>> ? ? ? : {(lexerState == STATE_AT_BEGINNING)}? 'TITLE' WS_NL
>> {lexerState=STATE_IN_TITLE;}
>> ? ? ? ;
>>
>> TITLE_TEXT
>> ? ? ? : {lexerState == STATE_IN_TITLE}? TEXT
>> ? ? ? ;
>>
>> END_TITLE
>> ? ? ? : {lexerState == STATE_IN_TITLE}? NL {lexerState=STATE_AFTER_TITLE;}
>> ? ? ? ;
>>
>> BLANK_ROW
>> ? ? ? : {!(lexerState == STATE_IN_TITLE)}? WS_NL
>> ? ? ? ;
>>
>> REMARK ? ? ? ?: {!(lexerState == STATE_IN_TITLE)}? 'REMA' .* NL
>> ? ? ? ;
>>
>> fragment
>> WS_NL : ? ? ? (' ' | '\t')* NL;
>>
>> fragment
>> NL ? ?: ? ? ? '\r'? '\n';
>>
>> fragment
>> TEXT ?: ? ? ? (~('\r' | '\n'))*;
>>
>
>
>

From ruslan_zasukhin at valentina-db.com  Fri Jun 17 06:34:33 2011
From: ruslan_zasukhin at valentina-db.com (Ruslan Zasukhin)
Date: Fri, 17 Jun 2011 16:34:33 +0300
Subject: [antlr-interest] Question:  ANTLR and LLVM  ...  + Clang
In-Reply-To: <4DFB1862.3070102@freemail.hu>
Message-ID: <CA213299.ECCA2%ruslan_zasukhin@valentina-db.com>

Hi Guys,

Thank you very much for answers.

Okay, so about LLVM is clear ... It is compillers - code generation.

But exists yet  Clang --  C/C++/ObjC frontend

And I think Clang can be compared to ANTLR.
Right?

When one should prefer Clang vs ANTLR or reverse?
Your opinions?


===========
On 6/17/11 12:03 PM, "anteusz at freemail.hu" <anteusz at freemail.hu> wrote:

> You can use antrl to parse the text.
> You can use llvm to generate byte or machine code, optimise code.
> So they should work well with each other. They complement each other.
> C version of antrl is recommended as llvm is written in C++.

And 


==================
> On 6/17/11 12:52 PM, "Sergiy Dubovik" <sergiy.dubovik at gmail.com> wrote:
> * how ANTLR refer to LLVM?

Antlr is: lexer, parser, ast walker. LLVM - low level virtual machine
e.g. can generate and interpret it's bytecode and can generate
optimized cpu instructions also supports JIT. They have nothing in
common but they can be used to create a compiler. Pretty good one i
have to say.

> * If they can collaborate?

Yes they can. However you still need to write some code. Also llvm is
C++ framework. There are some bindings though.

> * should I use or drop ANTLR if we will want start to use LLVM?

llvm doesn't provide what antlr provides.
==================






-- 
Best regards,

Ruslan Zasukhin
VP Engineering and New Technology
Paradigma Software, Inc

Valentina - Joining Worlds of Information
http://www.paradigmasoft.com

[I feel the need: the need for speed]



From Waverly.Edwards at genesys.com  Fri Jun 17 08:12:51 2011
From: Waverly.Edwards at genesys.com (Edwards, Waverly)
Date: Fri, 17 Jun 2011 10:12:51 -0500
Subject: [antlr-interest] Question:  ANTLR and LLVM  ...
In-Reply-To: <CA20F578.ECC6D%ruslan_zasukhin@valentina-db.com>
References: <CA20F578.ECC6D%ruslan_zasukhin@valentina-db.com>
Message-ID: <4A454A950FB157459B59AA50C146C07901E303392C@OMA00CEXMBX02.corp.westworlds.com>


This doesn't directly answer your questions but it's a good place to get you to going.

http://www.antlr.org/wiki/display/ANTLR3/LLVM


W.

-----Original Message-----
From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-bounces at antlr.org] On Behalf Of Ruslan Zasukhin
Sent: Friday, June 17, 2011 5:14 AM
To: antlr-interest at antlr.org
Subject: [antlr-interest] Question: ANTLR and LLVM ...

Hi All,

Have never look deeply on LLVM yet,
But have got fast question

Anybody can give his vision about

* how ANTLR refer to LLVM?
* If they can collaborate?
* should I use or drop ANTLR if we will want start to use LLVM?

And so on 


-- 
Best regards,

Ruslan Zasukhin
VP Engineering and New Technology
Paradigma Software, Inc

Valentina - Joining Worlds of Information
http://www.paradigmasoft.com

[I feel the need: the need for speed]



List: http://www.antlr.org/mailman/listinfo/antlr-interest
Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address

From stefika at gmail.com  Fri Jun 17 08:16:11 2011
From: stefika at gmail.com (Andreas Stefik)
Date: Fri, 17 Jun 2011 10:16:11 -0500
Subject: [antlr-interest] Code completion,
	possible with JavaScript output?
In-Reply-To: <277269.91411.qm@web38006.mail.mud.yahoo.com>
References: <277269.91411.qm@web38006.mail.mud.yahoo.com>
Message-ID: <BANLkTi=fkuwRUkaYbS32rkLQE8LUZ06dVQ@mail.gmail.com>

David,

This might not be an exact answer to your question, but the easiest
way I've found to do things like this is to read in the .tokens file
generated by antlr. For example, we do this to send keyword lists to
the NetBeans Platform for syntax highlighting, which works fine. I can
send a code example if necessary.

As for popping up a list for code completion, there are lots of ways
to do it. If you are using a rich client platform (e.g., eclipse,
netbeans), there are standard APIs for it, with corresponding
tutorials. Here is an example of one from NetBeans, for example:

http://platform.netbeans.org/tutorials/nbm-code-completion.html

So, basically, you read in the tokens file at bootup, you are
typically sent a position for where the cursor is in a file, then you
somehow decide, depending on what specifically you need and how far
you want to go with it, what words are populated in the list when the
user selects code completion.

Hope that helps,

Stefik

On Fri, Jun 17, 2011 at 7:07 AM, David Wynter <david_wynter at yahoo.com> wrote:
> Hi,
>
> I have had a look thru the ANTLR documentation and could not find what I was looking for. New to ANTLR.
>
> I have a SQL database with 400 tables and want to produce a parser for a language I convert to SQL for querying 3 different domains within that model.
> The application uses a Web interface so the search command line parser has to be in Javascript.
> I intend to use a grammar base don a subset of the SQL grammar <search condition>
> The users of the query languages (3, one for each domain) will need help on determining the terms we use for the column names.
> For example they might type "WHERE interestrate > 1% AND?interestrate < 3%" where interestrate is a column name.
> We will map these to tablename.columnname. so only single words in a reserved set are required.
> The 3 grammars are the same except they have different reserved words.
> OK to include the reserved words in the grammar itself, these are DSLs.
>
> My question is, is there the ability to search the list of these reserved words as they type (characters as token I expect) and auto suggest in a list the possible entries?
> So if "interestrate" and "interbreeding" were 2 of the reserved words then these would be suggested in a list right up until they typed the 6th character.
>
> Thanks,
>
> David
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>

From cummings at kjchome.homeip.net  Fri Jun 17 10:22:04 2011
From: cummings at kjchome.homeip.net (Kevin J. Cummings)
Date: Fri, 17 Jun 2011 13:22:04 -0400
Subject: [antlr-interest] Question:  ANTLR and LLVM  ...  + Clang
In-Reply-To: <CA213299.ECCA2%ruslan_zasukhin@valentina-db.com>
References: <CA213299.ECCA2%ruslan_zasukhin@valentina-db.com>
Message-ID: <4DFB8D3C.4050707@kjchome.homeip.net>

On 06/17/2011 09:34 AM, Ruslan Zasukhin wrote:
> Hi Guys,
>
> Thank you very much for answers.
>
> Okay, so about LLVM is clear ... It is compillers - code generation.
>
> But exists yet  Clang --  C/C++/ObjC frontend
>
> And I think Clang can be compared to ANTLR.
> Right?

No.  CLang is a compiler frontend.  It is a frontend for C/C++/ObjC.
(I must confess, I do not know enough about C-Lang to know what it uses 
to parse its source code with, then again, I do not know what GCC uses 
either....)

LLVM is a compiler backend (if you include all of the IR optimization 
phases in your compiler's backend).  It is defined at either the IR 
level (via its C++ classes and methods), its bytecode level (.bc files), 
or at the text level via its .ll file pseudo-machine-independent 
assembly.  LLVM contains many tools to convert between the 3 formats. 
Generally, all of its "passes" operate on its IR and produce a new IR as 
its output until you finally get to a code generator which is capable of 
producing a machine specific object text file, an executable file 
(through an LLVM linker), or a JIT file which can be executed by an LLVM 
tool.

As referenced in one of your original responses, Ter worked up a quick 
and dirty example of using an ANTLR front-end which produces an LLVM 
assembly text which can be used for input to the LLVM toolchain using 
his String Templates.

ANTLR is a tool which can help you build compiler front-ends.  If you 
were industrious enough, you could re-write CLang using ANTLR.

ANTLR is primarily a JAVA tool (you at least need JAVA to run the tool 
to compile your grammar), but can be used to produce other targeted 
languages (C/C++, Python, etc) for your actual front-end.  While the C++ 
support is minimal in version 3 (better in version 2.7, but lacking in 
some of the ST support) resulting in much use of C code which can be 
compiled using C++, you could use it to interface directly to the LLVM 
IR API if you wanted to.  But, I think Ter's example is probably the way 
to go, at least until Version 4 starts to grow and we see what kind of 
C++ runtime support will exist for ANTLR v4.

> When one should prefer Clang vs ANTLR or reverse?
> Your opinions?

I think you are asking the wrong question here.  Please compare apples 
to apples, and not to cucumbers.

-- 
Kevin J. Cummings
kjchome at verizon.net
cummings at kjchome.homeip.net
cummings at kjc386.framingham.ma.us
Registered Linux User #1232 (http://counter.li.org)

From bkiers at gmail.com  Fri Jun 17 11:37:03 2011
From: bkiers at gmail.com (Bart Kiers)
Date: Fri, 17 Jun 2011 20:37:03 +0200
Subject: [antlr-interest] Context-sensitive lexer
In-Reply-To: <BANLkTinyj99UBvxdQPoWGCQ0_nViHsW+pw@mail.gmail.com>
References: <BANLkTinyj99UBvxdQPoWGCQ0_nViHsW+pw@mail.gmail.com>
Message-ID: <BANLkTikuLEZ1+D5z132x2Awgdoh1+uT6_g@mail.gmail.com>

Hi Jonas,

I would not put so much responsibility inside the lexer. This is really the
task of the parser.
How about something like this:

grammar test;

options {
  output=AST;
}

tokens {
  FILE;
  SECTIONS;
  LINE;
}

parse
  :  title (section NL)+ EOF -> ^(FILE title ^(SECTIONS section+))
  ;

title
  :  TITLE NL (anyWord+ NL)+ NL -> ^(TITLE anyWord+)
  ;

section
  :  SECTION NL (anyWordExceptEnd+ NL)+ END NL -> ^(SECTION
anyWordExceptEnd+)
  ;

anyWordExceptEnd
  :  WORD
  |  SECTION
  |  TITLE
  ;

anyWord
  :  anyWordExceptEnd
  |  END
  ;

SECTION
  :  'SECTION' '0'..'9'+
  ;

END
  :  'END'
  ;

TITLE
  :  'TITLE'
  ;

WORD
  :  ('a'..'z' | 'A'..'Z')+
  ;

NL
  :  '\r'? '\n'
  |  '\r'
  ;

SPACE
  :  (' ' | '\t') {$channel=HIDDEN;}
  ;



A small test class:

import org.antlr.runtime.*;
import org.antlr.runtime.tree.*;
import org.antlr.stringtemplate.*;

public class Main {
  public static void main(String[] args) throws Exception {
    String source =
        "TITLE            \n" +
        "some             \n"+
        "title            \n"+
        "text             \n" +
        "                 \n" +
        "SECTION1         \n" +
        " a b             \n" +
        " c               \n" +
        "END              \n" +
        "                 \n" +
        "SECTION2         \n" +
        "  SECTION2 text  \n" +
        "END              \n" +
        "                 \n" +
        "SECTION3         \n" +
        "  more text      \n" +
        "END              \n" +
        "\n";
    testLexer lexer = new testLexer(new ANTLRStringStream(source));
    testParser parser = new testParser(new CommonTokenStream(lexer));
    CommonTree tree = (CommonTree)parser.parse().getTree();
    DOTTreeGenerator gen = new DOTTreeGenerator();
    StringTemplate st = gen.toDOT(tree);
    System.out.println(st);
  }
}


will produce the AST attached to this message.

Regards,

Bart.



On Fri, Jun 17, 2011 at 2:15 PM, Jonas <jonas.hagmar at gmail.com> wrote:

> Hi,
>
> I'm developing a parser for a file format where context is very
> important. I'm looking to
> 1) understand why my ANTLR parser gets into infinite loops
> 2) find out if there is any better way to implement context
> sensitivity than what I am doing with semantic predicates.
>
> A typical beginning of a file looks like this:
> TITLE
> some title text
>
> SECTION1
>  a=b*c
> END
>
> SECTION2
> ...
>
> SECTION3
> ...
>
> The syntax differs from section to section; the 'TITLE' section is
> terminated by the newline after the title text line, while other
> sections can e.g. use single quote string literals and be terminated
> by a keyword like 'END'. Here is a sample grammar, that gets into an
> infinite loop:
>
> grammar test;
>
> options {
>  output=AST;
> }
>
> @lexer::members {
>  static final int STATE_AT_BEGINNING = 0;
>  static final int STATE_IN_TITLE = 1;
>  static final int STATE_AFTER_TITLE = 2;
>  int lexerState = STATE_AT_BEGINNING;
> }
>
> file    :       title;
>
> title   :       BEGIN_TITLE TITLE_TEXT END_TITLE;
>
> BEGIN_TITLE
>        : {(lexerState == STATE_AT_BEGINNING)}? 'TITLE' WS_NL
> {lexerState=STATE_IN_TITLE;}
>        ;
>
> TITLE_TEXT
>        : {lexerState == STATE_IN_TITLE}? TEXT
>        ;
>
> END_TITLE
>        : {lexerState == STATE_IN_TITLE}? NL {lexerState=STATE_AFTER_TITLE;}
>        ;
>
> BLANK_ROW
>        : {!(lexerState == STATE_IN_TITLE)}? WS_NL
>        ;
>
> REMARK  : {!(lexerState == STATE_IN_TITLE)}? 'REMA' .* NL
>        ;
>
> fragment
> WS_NL   :       (' ' | '\t')* NL;
>
> fragment
> NL      :       '\r'? '\n';
>
> fragment
> TEXT    :       (~('\r' | '\n'))*;
>
> Best Regards,
> Jonas
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: ast.png
Type: image/png
Size: 8574 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20110617/0a7ec400/attachment.png 

From jonas.hagmar at gmail.com  Fri Jun 17 14:09:18 2011
From: jonas.hagmar at gmail.com (Jonas)
Date: Fri, 17 Jun 2011 23:09:18 +0200
Subject: [antlr-interest] Context-sensitive lexer
In-Reply-To: <BANLkTikuLEZ1+D5z132x2Awgdoh1+uT6_g@mail.gmail.com>
References: <BANLkTinyj99UBvxdQPoWGCQ0_nViHsW+pw@mail.gmail.com>
	<BANLkTikuLEZ1+D5z132x2Awgdoh1+uT6_g@mail.gmail.com>
Message-ID: <BANLkTimnXHNgDRwYPaSQ8A3i6s9HDMuujA@mail.gmail.com>

Hi Bart,

Thank you for the excellent input on the problem. I hope your approach
can be adapted to overcome all the difficulties coming from the
context sensitivity of the file format I have to deal with. For
example, the title text can be any character sequence, leading to a
definition of your WORD token that I fear might clash with patterns
needed to pick out identifiers in, e.g., algebraic expressions later
in the file. Moreover, the whitespace in the title text is actually
significant. If the title text is "foo$3        bar__!" (without the
quotes), that is exactly what the user expects to see when using the
program reading the file. In other places, whitespace acts like a list
separator, and in some places it should just be ignored. With your
approach, wouldn't that mean that I have to include the whitespace in
all relevant parser rules, even when it should be ignored?

As an alternative, I am considering using a JFlex lexer, which can
easily handle lexer state, coupled with an ANTLR parser and tree
parser. I have almost figured out how to do that, but to really get it
flying, it would be great to be able to run the ANTLRWorks debugger on
the resulting lexer-parser combination. I have seen some posts saying
that this is possible, but not how to do it. If I don't figure it out
myself, I might post a separate question regarding that.

Best Regards,
Jonas

On Fri, Jun 17, 2011 at 8:37 PM, Bart Kiers <bkiers at gmail.com> wrote:
> Hi Jonas,
> I would not put so much responsibility inside the lexer. This is really the
> task of the parser.
> How about something like this:
>
> grammar test;
> options {
> ? output=AST;
> }
> tokens {
> ? FILE;
> ? SECTIONS;
> ? LINE;
> }
> parse
> ? : ?title (section NL)+ EOF -> ^(FILE title ^(SECTIONS section+))
> ? ;
> title
> ? : ?TITLE NL (anyWord+ NL)+ NL -> ^(TITLE anyWord+)
> ? ;
> section
> ? : ?SECTION NL (anyWordExceptEnd+ NL)+ END NL -> ^(SECTION
> anyWordExceptEnd+)
> ? ;
>
> anyWordExceptEnd
> ? : ?WORD
> ? | ?SECTION
> ? | ?TITLE
> ? ;
> anyWord
> ? : ?anyWordExceptEnd
> ? | ?END
> ? ;
>
> SECTION
> ? : ?'SECTION' '0'..'9'+
> ? ;
> END
> ? : ?'END'
> ? ;
> TITLE
> ? : ?'TITLE'
> ? ;
> WORD
> ? : ?('a'..'z' | 'A'..'Z')+
> ? ;
>
> NL
> ? : ?'\r'? '\n'
> ? | ?'\r'
> ? ;
>
> SPACE
> ? : ?(' ' | '\t') {$channel=HIDDEN;}
> ? ;
>
> A small test class:
>
> import org.antlr.runtime.*;
> import org.antlr.runtime.tree.*;
> import org.antlr.stringtemplate.*;
> public class Main {
> ? public static void main(String[] args) throws Exception {
> ? ? String source =
> ? ? ? ? "TITLE ? ? ? ? ? ?\n" +
> ? ? ? ? "some ? ? ? ? ? ? \n"+
> ? ? ? ? "title ? ? ? ? ? ?\n"+
> ? ? ? ? "text ? ? ? ? ? ? \n" +
> ? ? ? ? " ? ? ? ? ? ? ? ? \n" +
> ? ? ? ? "SECTION1 ? ? ? ? \n" +
> ? ? ? ? " a b ? ? ? ? ? ? \n" +
> ? ? ? ? " c ? ? ? ? ? ? ? \n" +
> ? ? ? ? "END ? ? ? ? ? ? ?\n" +
> ? ? ? ? " ? ? ? ? ? ? ? ? \n" +
> ? ? ? ? "SECTION2 ? ? ? ? \n" +
> ? ? ? ? " ?SECTION2 text ?\n" +
> ? ? ? ? "END ? ? ? ? ? ? ?\n" +
> ? ? ? ? " ? ? ? ? ? ? ? ? \n" +
> ? ? ? ? "SECTION3 ? ? ? ? \n" +
> ? ? ? ? " ?more text ? ? ?\n" +
> ? ? ? ? "END ? ? ? ? ? ? ?\n" +
> ? ? ? ? "\n";
> ? ? testLexer lexer = new testLexer(new ANTLRStringStream(source));
> ? ? testParser parser = new testParser(new CommonTokenStream(lexer));
> ? ? CommonTree tree = (CommonTree)parser.parse().getTree();
> ? ? DOTTreeGenerator gen = new DOTTreeGenerator();
> ? ? StringTemplate st = gen.toDOT(tree);
> ? ? System.out.println(st);
> ? }
> }
>
> will produce the AST attached to this message.
> Regards,
> Bart.
>
>
> On Fri, Jun 17, 2011 at 2:15 PM, Jonas <jonas.hagmar at gmail.com> wrote:
>>
>> Hi,
>>
>> I'm developing a parser for a file format where context is very
>> important. I'm looking to
>> 1) understand why my ANTLR parser gets into infinite loops
>> 2) find out if there is any better way to implement context
>> sensitivity than what I am doing with semantic predicates.
>>
>> A typical beginning of a file looks like this:
>> TITLE
>> some title text
>>
>> SECTION1
>> ?a=b*c
>> END
>>
>> SECTION2
>> ...
>>
>> SECTION3
>> ...
>>
>> The syntax differs from section to section; the 'TITLE' section is
>> terminated by the newline after the title text line, while other
>> sections can e.g. use single quote string literals and be terminated
>> by a keyword like 'END'. Here is a sample grammar, that gets into an
>> infinite loop:
>>
>> grammar test;
>>
>> options {
>> ?output=AST;
>> }
>>
>> @lexer::members {
>> ?static final int STATE_AT_BEGINNING = 0;
>> ?static final int STATE_IN_TITLE = 1;
>> ?static final int STATE_AFTER_TITLE = 2;
>> ?int lexerState = STATE_AT_BEGINNING;
>> }
>>
>> file ? ?: ? ? ? title;
>>
>> title ? : ? ? ? BEGIN_TITLE TITLE_TEXT END_TITLE;
>>
>> BEGIN_TITLE
>> ? ? ? ?: {(lexerState == STATE_AT_BEGINNING)}? 'TITLE' WS_NL
>> {lexerState=STATE_IN_TITLE;}
>> ? ? ? ?;
>>
>> TITLE_TEXT
>> ? ? ? ?: {lexerState == STATE_IN_TITLE}? TEXT
>> ? ? ? ?;
>>
>> END_TITLE
>> ? ? ? ?: {lexerState == STATE_IN_TITLE}? NL
>> {lexerState=STATE_AFTER_TITLE;}
>> ? ? ? ?;
>>
>> BLANK_ROW
>> ? ? ? ?: {!(lexerState == STATE_IN_TITLE)}? WS_NL
>> ? ? ? ?;
>>
>> REMARK ?: {!(lexerState == STATE_IN_TITLE)}? 'REMA' .* NL
>> ? ? ? ?;
>>
>> fragment
>> WS_NL ? : ? ? ? (' ' | '\t')* NL;
>>
>> fragment
>> NL ? ? ?: ? ? ? '\r'? '\n';
>>
>> fragment
>> TEXT ? ?: ? ? ? (~('\r' | '\n'))*;
>>
>> Best Regards,
>> Jonas
>>
>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>> Unsubscribe:
>> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>
>

From bkiers at gmail.com  Fri Jun 17 14:20:34 2011
From: bkiers at gmail.com (Bart Kiers)
Date: Fri, 17 Jun 2011 23:20:34 +0200
Subject: [antlr-interest] Context-sensitive lexer
In-Reply-To: <BANLkTimnXHNgDRwYPaSQ8A3i6s9HDMuujA@mail.gmail.com>
References: <BANLkTinyj99UBvxdQPoWGCQ0_nViHsW+pw@mail.gmail.com>
	<BANLkTikuLEZ1+D5z132x2Awgdoh1+uT6_g@mail.gmail.com>
	<BANLkTimnXHNgDRwYPaSQ8A3i6s9HDMuujA@mail.gmail.com>
Message-ID: <BANLkTikpj46J9bcM8dT6j-R9snaLd8foRA@mail.gmail.com>

Hi Jonas,

On Fri, Jun 17, 2011 at 11:09 PM, Jonas <jonas.hagmar at gmail.com> wrote:

> Hi Bart,
>
> Thank you for the excellent input on the problem. I hope your approach
> can be adapted to overcome all the difficulties coming from the
> context sensitivity of the file format I have to deal with. For
> example, the title text can be any character sequence, leading to a
> definition of your WORD token that I fear might clash with patterns
> needed to pick out identifiers in, e.g., algebraic expressions later
> in the file. Moreover, the whitespace in the title text is actually
> significant. If the title text is "foo$3        bar__!" (without the
> quotes), that is exactly what the user expects to see when using the
> program reading the file. In other places, whitespace acts like a list
> separator, and in some places it should just be ignored. With your
> approach, wouldn't that mean that I have to include the whitespace in
> all relevant parser rules, even when it should be ignored?


I'm not sure what you all mean by all that, sorry. My post was more meant to
emphasize my point of _not_ doing so much inside the lexer.

Perhaps you'd like to post a more detailed explanation of the language
you're trying to parse?

Regards,

Bart.

From jbb at acm.org  Fri Jun 17 14:28:00 2011
From: jbb at acm.org (John B. Brodie)
Date: Fri, 17 Jun 2011 17:28:00 -0400
Subject: [antlr-interest] Context-sensitive lexer
In-Reply-To: <BANLkTinO6GZsv5oLY2cvRz9i2as3z3Nexw@mail.gmail.com>
References: <BANLkTinyj99UBvxdQPoWGCQ0_nViHsW+pw@mail.gmail.com>
	<1308315966.13922.2.camel@gecko>
	<BANLkTinO6GZsv5oLY2cvRz9i2as3z3Nexw@mail.gmail.com>
Message-ID: <1308346080.20408.4.camel@gecko>

On Fri, 2011-06-17 at 15:29 +0200, Jonas wrote:
> Hi John!
> 
> I believed that using the semantic predicate would hinder ANTLR from
> trying to match TITLE_TEXT in other situations than when lexerState
> indicates that we are in the title section. Anyway, changing the TEXT
> fragment to (~('\r' | '\n'))+ does not prevent the infinite loop. Keep
> the good ideas coming!

When I run your example from the command line I get this message printed
to the console continuously...

line 4:0 rule TITLE_TEXT failed predicate: {lexerState==STATE_IN_TITLE}?

perhaps predicates in the Lexer do not actually perform as you are
expecting? (look at the generated lexer code....)

> 
> Best Regards,
> Jonas
> 
> On Fri, Jun 17, 2011 at 3:06 PM, John B. Brodie <jbb at acm.org> wrote:
> > Greetings!
> >
> > Your TEXT fragment (and therefore your TITLE_TEXT token) can be empty!
> >
> > Thus, I think your lexer is trying to recognize infinitely many
> > TITLE_TEXT tokens.
> >
> > Hope this helps...
> >   -jbb
> >
> > On Fri, 2011-06-17 at 14:15 +0200, Jonas wrote:
> >> Hi,
> >>
> >> I'm developing a parser for a file format where context is very
> >> important. I'm looking to
> >> 1) understand why my ANTLR parser gets into infinite loops
> >> 2) find out if there is any better way to implement context
> >> sensitivity than what I am doing with semantic predicates.
> >>
> >> A typical beginning of a file looks like this:
> >> TITLE
> >> some title text
> >>
> >> SECTION1
> >>  a=b*c
> >> END
> >>
> >> SECTION2
> >> ...
> >>
> >> SECTION3
> >> ...
> >>
> >> The syntax differs from section to section; the 'TITLE' section is
> >> terminated by the newline after the title text line, while other
> >> sections can e.g. use single quote string literals and be terminated
> >> by a keyword like 'END'. Here is a sample grammar, that gets into an
> >> infinite loop:
> >>
> >> grammar test;
> >>
> >> options {
> >>   output=AST;
> >> }
> >>
> >> @lexer::members {
> >>   static final int STATE_AT_BEGINNING = 0;
> >>   static final int STATE_IN_TITLE = 1;
> >>   static final int STATE_AFTER_TITLE = 2;
> >>   int lexerState = STATE_AT_BEGINNING;
> >> }
> >>
> >> file  :       title;
> >>
> >> title :       BEGIN_TITLE TITLE_TEXT END_TITLE;
> >>
> >> BEGIN_TITLE
> >>       : {(lexerState == STATE_AT_BEGINNING)}? 'TITLE' WS_NL
> >> {lexerState=STATE_IN_TITLE;}
> >>       ;
> >>
> >> TITLE_TEXT
> >>       : {lexerState == STATE_IN_TITLE}? TEXT
> >>       ;
> >>
> >> END_TITLE
> >>       : {lexerState == STATE_IN_TITLE}? NL {lexerState=STATE_AFTER_TITLE;}
> >>       ;
> >>
> >> BLANK_ROW
> >>       : {!(lexerState == STATE_IN_TITLE)}? WS_NL
> >>       ;
> >>
> >> REMARK        : {!(lexerState == STATE_IN_TITLE)}? 'REMA' .* NL
> >>       ;
> >>
> >> fragment
> >> WS_NL :       (' ' | '\t')* NL;
> >>
> >> fragment
> >> NL    :       '\r'? '\n';
> >>
> >> fragment
> >> TEXT  :       (~('\r' | '\n'))*;
> >>
> >
> >
> >
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address




From ruslan_zasukhin at valentina-db.com  Sat Jun 18 02:19:50 2011
From: ruslan_zasukhin at valentina-db.com (Ruslan Zasukhin)
Date: Sat, 18 Jun 2011 12:19:50 +0300
Subject: [antlr-interest] Question:  ANTLR and LLVM  ...  + Clang
In-Reply-To: <4DFB8D3C.4050707@kjchome.homeip.net>
Message-ID: <CA224866.ECD41%ruslan_zasukhin@valentina-db.com>

On 6/17/11 8:22 PM, "Kevin J. Cummings" <cummings at kjchome.homeip.net> wrote:

Hi Kevin,

Well, don't know why you think they cannot be compared.

ANTLR - is Parser -> AST  ->TreeParser

Clang 
    contains also parser -- own, seems to be hand-made,
    then they have more logic phases.

On this page very good explained how C++ FrontEnd is bigger
of parser

   http://www.semanticdesigns.com/Products/FrontEnds/CppFrontEnd.html


So again, if we have task to proceed C++ sources, we may choose between:

1)  ANTLR and develop or use some C++ grammar,
     then spend time on (all/some) features describe on above page

2) take in hands complete C++ Frontend and ...DONE?
    For now I see two strong enough such frontends.
    Clang and SemanticDesign (which I cannot test it seems as demo).


=============
> ANTLR is a tool which can help you build compiler front-ends.  If you
> were industrious enough, you could re-write CLang using ANTLR.
> 
> ANTLR is primarily a JAVA tool (you at least need JAVA to run the tool
> to compile your grammar), but can be used to produce other targeted
> languages (C/C++, Python, etc) for your actual front-end.  While the C++
> support is minimal in version 3 (better in version 2.7, but lacking in
> some of the ST support) resulting in much use of C code which can be
> compiled using C++, you could use it to interface directly to the LLVM
> IR API if you wanted to.  But, I think Ter's example is probably the way
> to go, at least until Version 4 starts to grow and we see what kind of
> C++ runtime support will exist for ANTLR v4.
> 
>> When one should prefer Clang vs ANTLR or reverse?
>> Your opinions?
> 
> I think you are asking the wrong question here.  Please compare apples
> to apples, and not to cucumbers.

-- 
Best regards,

Ruslan Zasukhin
VP Engineering and New Technology
Paradigma Software, Inc

Valentina - Joining Worlds of Information
http://www.paradigmasoft.com

[I feel the need: the need for speed]



From douglasgodfrey at gmail.com  Sat Jun 18 09:26:00 2011
From: douglasgodfrey at gmail.com (Douglas Godfrey)
Date: Sat, 18 Jun 2011 12:26:00 -0400
Subject: [antlr-interest] Question: ANTLR and LLVM ... + Clang
In-Reply-To: <CA224866.ECD41%ruslan_zasukhin@valentina-db.com>
References: <4DFB8D3C.4050707@kjchome.homeip.net>
	<CA224866.ECD41%ruslan_zasukhin@valentina-db.com>
Message-ID: <BANLkTi=vw03HhqS6fd_cSXEbjnmj208cNA@mail.gmail.com>

The SemanticDesigns C++ frontend, like all of their frontend(s) is intended
for code analysis and transformation, not compiling.

Semantic Designs' tools are based on the old Reasoning Systems Inc.
tools: Refine
and Intervista.

Semantic Designs' tools parse a source language into an Symbol Table and AST
with more features than
the Antlr AST. The tools then take the Symbol Table and AST and either do
code analysis or reverse compile
the AST into new source code in the same or a different language. The tools
no not interface with a compiler
backend or machine code generator.

On Sat, Jun 18, 2011 at 5:19 AM, Ruslan Zasukhin <
ruslan_zasukhin at valentina-db.com> wrote:

> On 6/17/11 8:22 PM, "Kevin J. Cummings" <cummings at kjchome.homeip.net>
> wrote:
>
> Hi Kevin,
>
> Well, don't know why you think they cannot be compared.
>
> ANTLR - is Parser -> AST  ->TreeParser
>
> Clang
>    contains also parser -- own, seems to be hand-made,
>    then they have more logic phases.
>
> On this page very good explained how C++ FrontEnd is bigger
> of parser
>
>   http://www.semanticdesigns.com/Products/FrontEnds/CppFrontEnd.html
>
>
> So again, if we have task to proceed C++ sources, we may choose between:
>
> 1)  ANTLR and develop or use some C++ grammar,
>     then spend time on (all/some) features describe on above page
>
> 2) take in hands complete C++ Frontend and ...DONE?
>    For now I see two strong enough such frontends.
>    Clang and SemanticDesign (which I cannot test it seems as demo).
>
>
> =============
> > ANTLR is a tool which can help you build compiler front-ends.  If you
> > were industrious enough, you could re-write CLang using ANTLR.
> >
> > ANTLR is primarily a JAVA tool (you at least need JAVA to run the tool
> > to compile your grammar), but can be used to produce other targeted
> > languages (C/C++, Python, etc) for your actual front-end.  While the C++
> > support is minimal in version 3 (better in version 2.7, but lacking in
> > some of the ST support) resulting in much use of C code which can be
> > compiled using C++, you could use it to interface directly to the LLVM
> > IR API if you wanted to.  But, I think Ter's example is probably the way
> > to go, at least until Version 4 starts to grow and we see what kind of
> > C++ runtime support will exist for ANTLR v4.
> >
> >> When one should prefer Clang vs ANTLR or reverse?
> >> Your opinions?
> >
> > I think you are asking the wrong question here.  Please compare apples
> > to apples, and not to cucumbers.
>
> --
> Best regards,
>
> Ruslan Zasukhin
> VP Engineering and New Technology
> Paradigma Software, Inc
>
> Valentina - Joining Worlds of Information
> http://www.paradigmasoft.com
>
> [I feel the need: the need for speed]
>
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>

From ruslan_zasukhin at valentina-db.com  Sat Jun 18 11:37:10 2011
From: ruslan_zasukhin at valentina-db.com (Ruslan Zasukhin)
Date: Sat, 18 Jun 2011 21:37:10 +0300
Subject: [antlr-interest] Question: ANTLR and LLVM ... + Clang
In-Reply-To: <BANLkTi=vw03HhqS6fd_cSXEbjnmj208cNA@mail.gmail.com>
Message-ID: <CA22CB06.ECD8A%ruslan_zasukhin@valentina-db.com>

On 6/18/11 7:26 PM, "Douglas Godfrey" <douglasgodfrey at gmail.com> wrote:

Hi Douglas, 

> The SemanticDesigns C++ frontend, like all of their frontend(s) is intended
> for code analysis and transformation, not compiling.
 
> Semantic Designs' tools are based on the old Reasoning Systems Inc.
> tools: Refine and Intervista.
> 
> Semantic Designs' tools parse a source language into an Symbol Table and AST
> with more features than the Antlr AST.

> The tools then take the Symbol Table and AST and either do
> code analysis or reverse compile
> the AST into new source code in the same or a different language.
> The tools no not interface with a compiler backend or machine code generator.

I see. 

Thanks.


-- 
Best regards,

Ruslan Zasukhin
VP Engineering and New Technology
Paradigma Software, Inc

Valentina - Joining Worlds of Information
http://www.paradigmasoft.com

[I feel the need: the need for speed]



From hongyan99 at yahoo.com  Sat Jun 18 13:47:26 2011
From: hongyan99 at yahoo.com (Hongyan Li)
Date: Sat, 18 Jun 2011 13:47:26 -0700 (PDT)
Subject: [antlr-interest] antlr-interest Digest, Vol 79, Issue 19
In-Reply-To: <mailman.1.1308423602.21298.antlr-interest@antlr.org>
References: <mailman.1.1308423602.21298.antlr-interest@antlr.org>
Message-ID: <558902.42698.qm@web35304.mail.mud.yahoo.com>

Thinking out laud I suppose that you can make more than one ANTLR grammar files, one for the high level structure that separates the file into Title and Body for example, and then one more grammar for the title section and another for the body. You only have to write a simple class to integrate them all together. I actually think that it would be nice if ANTLR supports that out of the box. It would make a lot of things much simplified. Actually I think that it is not hard at all to implement a generic solution for this sort of approaches.


________________________________
From: "antlr-interest-request at antlr.org" <antlr-interest-request at antlr.org>
To: antlr-interest at antlr.org
Sent: Saturday, June 18, 2011 12:00 PM
Subject: antlr-interest Digest, Vol 79, Issue 19

Send antlr-interest mailing list submissions to
??? antlr-interest at antlr.org

To subscribe or unsubscribe via the World Wide Web, visit
??? http://www.antlr.org/mailman/listinfo/antlr-interest
or, via email, send a message with subject or body 'help' to
??? antlr-interest-request at antlr.org

You can reach the person managing the list at
??? antlr-interest-owner at antlr.org

When replying, please edit your Subject line so it is more specific
than "Re: Contents of antlr-interest digest..."


Today's Topics:

?  1. Re: Context-sensitive lexer (Jonas)
?  2. Re: Context-sensitive lexer (Bart Kiers)
?  3. Re: Context-sensitive lexer (John B. Brodie)
?  4. Re: Question:? ANTLR and LLVM? ...? + Clang (Ruslan Zasukhin)
?  5. Re: Question: ANTLR and LLVM ... + Clang (Douglas Godfrey)
?  6. Re: Question: ANTLR and LLVM ... + Clang (Ruslan Zasukhin)


----------------------------------------------------------------------

Message: 1
Date: Fri, 17 Jun 2011 23:09:18 +0200
From: Jonas <jonas.hagmar at gmail.com>
Subject: Re: [antlr-interest] Context-sensitive lexer
To: antlr-interest at antlr.org
Message-ID: <BANLkTimnXHNgDRwYPaSQ8A3i6s9HDMuujA at mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

Hi Bart,

Thank you for the excellent input on the problem. I hope your approach
can be adapted to overcome all the difficulties coming from the
context sensitivity of the file format I have to deal with. For
example, the title text can be any character sequence, leading to a
definition of your WORD token that I fear might clash with patterns
needed to pick out identifiers in, e.g., algebraic expressions later
in the file. Moreover, the whitespace in the title text is actually
significant. If the title text is "foo$3? ? ? ? bar__!" (without the
quotes), that is exactly what the user expects to see when using the
program reading the file. In other places, whitespace acts like a list
separator, and in some places it should just be ignored. With your
approach, wouldn't that mean that I have to include the whitespace in
all relevant parser rules, even when it should be ignored?

As an alternative, I am considering using a JFlex lexer, which can
easily handle lexer state, coupled with an ANTLR parser and tree
parser. I have almost figured out how to do that, but to really get it
flying, it would be great to be able to run the ANTLRWorks debugger on
the resulting lexer-parser combination. I have seen some posts saying
that this is possible, but not how to do it. If I don't figure it out
myself, I might post a separate question regarding that.

Best Regards,
Jonas

On Fri, Jun 17, 2011 at 8:37 PM, Bart Kiers <bkiers at gmail.com> wrote:
> Hi Jonas,
> I would not put so much responsibility inside the lexer. This is really the
> task of the parser.
> How about something like this:
>
> grammar test;
> options {
> ? output=AST;
> }
> tokens {
> ? FILE;
> ? SECTIONS;
> ? LINE;
> }
> parse
> ? : ?title (section NL)+ EOF -> ^(FILE title ^(SECTIONS section+))
> ? ;
> title
> ? : ?TITLE NL (anyWord+ NL)+ NL -> ^(TITLE anyWord+)
> ? ;
> section
> ? : ?SECTION NL (anyWordExceptEnd+ NL)+ END NL -> ^(SECTION
> anyWordExceptEnd+)
> ? ;
>
> anyWordExceptEnd
> ? : ?WORD
> ? | ?SECTION
> ? | ?TITLE
> ? ;
> anyWord
> ? : ?anyWordExceptEnd
> ? | ?END
> ? ;
>
> SECTION
> ? : ?'SECTION' '0'..'9'+
> ? ;
> END
> ? : ?'END'
> ? ;
> TITLE
> ? : ?'TITLE'
> ? ;
> WORD
> ? : ?('a'..'z' | 'A'..'Z')+
> ? ;
>
> NL
> ? : ?'\r'? '\n'
> ? | ?'\r'
> ? ;
>
> SPACE
> ? : ?(' ' | '\t') {$channel=HIDDEN;}
> ? ;
>
> A small test class:
>
> import org.antlr.runtime.*;
> import org.antlr.runtime.tree.*;
> import org.antlr.stringtemplate.*;
> public class Main {
> ? public static void main(String[] args) throws Exception {
> ? ? String source =
> ? ? ? ? "TITLE ? ? ? ? ? ?\n" +
> ? ? ? ? "some ? ? ? ? ? ? \n"+
> ? ? ? ? "title ? ? ? ? ? ?\n"+
> ? ? ? ? "text ? ? ? ? ? ? \n" +
> ? ? ? ? " ? ? ? ? ? ? ? ? \n" +
> ? ? ? ? "SECTION1 ? ? ? ? \n" +
> ? ? ? ? " a b ? ? ? ? ? ? \n" +
> ? ? ? ? " c ? ? ? ? ? ? ? \n" +
> ? ? ? ? "END ? ? ? ? ? ? ?\n" +
> ? ? ? ? " ? ? ? ? ? ? ? ? \n" +
> ? ? ? ? "SECTION2 ? ? ? ? \n" +
> ? ? ? ? " ?SECTION2 text ?\n" +
> ? ? ? ? "END ? ? ? ? ? ? ?\n" +
> ? ? ? ? " ? ? ? ? ? ? ? ? \n" +
> ? ? ? ? "SECTION3 ? ? ? ? \n" +
> ? ? ? ? " ?more text ? ? ?\n" +
> ? ? ? ? "END ? ? ? ? ? ? ?\n" +
> ? ? ? ? "\n";
> ? ? testLexer lexer = new testLexer(new ANTLRStringStream(source));
> ? ? testParser parser = new testParser(new CommonTokenStream(lexer));
> ? ? CommonTree tree = (CommonTree)parser.parse().getTree();
> ? ? DOTTreeGenerator gen = new DOTTreeGenerator();
> ? ? StringTemplate st = gen.toDOT(tree);
> ? ? System.out.println(st);
> ? }
> }
>
> will produce the AST attached to this message.
> Regards,
> Bart.
>
>
> On Fri, Jun 17, 2011 at 2:15 PM, Jonas <jonas.hagmar at gmail.com> wrote:
>>
>> Hi,
>>
>> I'm developing a parser for a file format where context is very
>> important. I'm looking to
>> 1) understand why my ANTLR parser gets into infinite loops
>> 2) find out if there is any better way to implement context
>> sensitivity than what I am doing with semantic predicates.
>>
>> A typical beginning of a file looks like this:
>> TITLE
>> some title text
>>
>> SECTION1
>> ?a=b*c
>> END
>>
>> SECTION2
>> ...
>>
>> SECTION3
>> ...
>>
>> The syntax differs from section to section; the 'TITLE' section is
>> terminated by the newline after the title text line, while other
>> sections can e.g. use single quote string literals and be terminated
>> by a keyword like 'END'. Here is a sample grammar, that gets into an
>> infinite loop:
>>
>> grammar test;
>>
>> options {
>> ?output=AST;
>> }
>>
>> @lexer::members {
>> ?static final int STATE_AT_BEGINNING = 0;
>> ?static final int STATE_IN_TITLE = 1;
>> ?static final int STATE_AFTER_TITLE = 2;
>> ?int lexerState = STATE_AT_BEGINNING;
>> }
>>
>> file ? ?: ? ? ? title;
>>
>> title ? : ? ? ? BEGIN_TITLE TITLE_TEXT END_TITLE;
>>
>> BEGIN_TITLE
>> ? ? ? ?: {(lexerState == STATE_AT_BEGINNING)}? 'TITLE' WS_NL
>> {lexerState=STATE_IN_TITLE;}
>> ? ? ? ?;
>>
>> TITLE_TEXT
>> ? ? ? ?: {lexerState == STATE_IN_TITLE}? TEXT
>> ? ? ? ?;
>>
>> END_TITLE
>> ? ? ? ?: {lexerState == STATE_IN_TITLE}? NL
>> {lexerState=STATE_AFTER_TITLE;}
>> ? ? ? ?;
>>
>> BLANK_ROW
>> ? ? ? ?: {!(lexerState == STATE_IN_TITLE)}? WS_NL
>> ? ? ? ?;
>>
>> REMARK ?: {!(lexerState == STATE_IN_TITLE)}? 'REMA' .* NL
>> ? ? ? ?;
>>
>> fragment
>> WS_NL ? : ? ? ? (' ' | '\t')* NL;
>>
>> fragment
>> NL ? ? ?: ? ? ? '\r'? '\n';
>>
>> fragment
>> TEXT ? ?: ? ? ? (~('\r' | '\n'))*;
>>
>> Best Regards,
>> Jonas
>>
>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>> Unsubscribe:
>> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>
>


------------------------------

Message: 2
Date: Fri, 17 Jun 2011 23:20:34 +0200
From: Bart Kiers <bkiers at gmail.com>
Subject: Re: [antlr-interest] Context-sensitive lexer
To: Jonas <jonas.hagmar at gmail.com>
Cc: antlr-interest at antlr.org
Message-ID: <BANLkTikpj46J9bcM8dT6j-R9snaLd8foRA at mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

Hi Jonas,

On Fri, Jun 17, 2011 at 11:09 PM, Jonas <jonas.hagmar at gmail.com> wrote:

> Hi Bart,
>
> Thank you for the excellent input on the problem. I hope your approach
> can be adapted to overcome all the difficulties coming from the
> context sensitivity of the file format I have to deal with. For
> example, the title text can be any character sequence, leading to a
> definition of your WORD token that I fear might clash with patterns
> needed to pick out identifiers in, e.g., algebraic expressions later
> in the file. Moreover, the whitespace in the title text is actually
> significant. If the title text is "foo$3? ? ? ? bar__!" (without the
> quotes), that is exactly what the user expects to see when using the
> program reading the file. In other places, whitespace acts like a list
> separator, and in some places it should just be ignored. With your
> approach, wouldn't that mean that I have to include the whitespace in
> all relevant parser rules, even when it should be ignored?


I'm not sure what you all mean by all that, sorry. My post was more meant to
emphasize my point of _not_ doing so much inside the lexer.

Perhaps you'd like to post a more detailed explanation of the language
you're trying to parse?

Regards,

Bart.


------------------------------

Message: 3
Date: Fri, 17 Jun 2011 17:28:00 -0400
From: "John B. Brodie" <jbb at acm.org>
Subject: Re: [antlr-interest] Context-sensitive lexer
To: Jonas <jonas.hagmar at gmail.com>
Cc: antlr-interest at antlr.org
Message-ID: <1308346080.20408.4.camel at gecko>
Content-Type: text/plain; charset="UTF-8"

On Fri, 2011-06-17 at 15:29 +0200, Jonas wrote:
> Hi John!
> 
> I believed that using the semantic predicate would hinder ANTLR from
> trying to match TITLE_TEXT in other situations than when lexerState
> indicates that we are in the title section. Anyway, changing the TEXT
> fragment to (~('\r' | '\n'))+ does not prevent the infinite loop. Keep
> the good ideas coming!

When I run your example from the command line I get this message printed
to the console continuously...

line 4:0 rule TITLE_TEXT failed predicate: {lexerState==STATE_IN_TITLE}?

perhaps predicates in the Lexer do not actually perform as you are
expecting? (look at the generated lexer code....)

> 
> Best Regards,
> Jonas
> 
> On Fri, Jun 17, 2011 at 3:06 PM, John B. Brodie <jbb at acm.org> wrote:
> > Greetings!
> >
> > Your TEXT fragment (and therefore your TITLE_TEXT token) can be empty!
> >
> > Thus, I think your lexer is trying to recognize infinitely many
> > TITLE_TEXT tokens.
> >
> > Hope this helps...
> >?  -jbb
> >
> > On Fri, 2011-06-17 at 14:15 +0200, Jonas wrote:
> >> Hi,
> >>
> >> I'm developing a parser for a file format where context is very
> >> important. I'm looking to
> >> 1) understand why my ANTLR parser gets into infinite loops
> >> 2) find out if there is any better way to implement context
> >> sensitivity than what I am doing with semantic predicates.
> >>
> >> A typical beginning of a file looks like this:
> >> TITLE
> >> some title text
> >>
> >> SECTION1
> >>? a=b*c
> >> END
> >>
> >> SECTION2
> >> ...
> >>
> >> SECTION3
> >> ...
> >>
> >> The syntax differs from section to section; the 'TITLE' section is
> >> terminated by the newline after the title text line, while other
> >> sections can e.g. use single quote string literals and be terminated
> >> by a keyword like 'END'. Here is a sample grammar, that gets into an
> >> infinite loop:
> >>
> >> grammar test;
> >>
> >> options {
> >>?  output=AST;
> >> }
> >>
> >> @lexer::members {
> >>?  static final int STATE_AT_BEGINNING = 0;
> >>?  static final int STATE_IN_TITLE = 1;
> >>?  static final int STATE_AFTER_TITLE = 2;
> >>?  int lexerState = STATE_AT_BEGINNING;
> >> }
> >>
> >> file? :? ? ?  title;
> >>
> >> title :? ? ?  BEGIN_TITLE TITLE_TEXT END_TITLE;
> >>
> >> BEGIN_TITLE
> >>? ? ?  : {(lexerState == STATE_AT_BEGINNING)}? 'TITLE' WS_NL
> >> {lexerState=STATE_IN_TITLE;}
> >>? ? ?  ;
> >>
> >> TITLE_TEXT
> >>? ? ?  : {lexerState == STATE_IN_TITLE}? TEXT
> >>? ? ?  ;
> >>
> >> END_TITLE
> >>? ? ?  : {lexerState == STATE_IN_TITLE}? NL {lexerState=STATE_AFTER_TITLE;}
> >>? ? ?  ;
> >>
> >> BLANK_ROW
> >>? ? ?  : {!(lexerState == STATE_IN_TITLE)}? WS_NL
> >>? ? ?  ;
> >>
> >> REMARK? ? ? ? : {!(lexerState == STATE_IN_TITLE)}? 'REMA' .* NL
> >>? ? ?  ;
> >>
> >> fragment
> >> WS_NL :? ? ?  (' ' | '\t')* NL;
> >>
> >> fragment
> >> NL? ? :? ? ?  '\r'? '\n';
> >>
> >> fragment
> >> TEXT? :? ? ?  (~('\r' | '\n'))*;
> >>
> >
> >
> >
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address





------------------------------

Message: 4
Date: Sat, 18 Jun 2011 12:19:50 +0300
From: Ruslan Zasukhin <ruslan_zasukhin at valentina-db.com>
Subject: Re: [antlr-interest] Question:? ANTLR and LLVM? ...? + Clang
To: "antlr-interest at antlr.org" <antlr-interest at antlr.org>
Message-ID: <CA224866.ECD41%ruslan_zasukhin at valentina-db.com>
Content-Type: text/plain;??? charset="US-ASCII"

On 6/17/11 8:22 PM, "Kevin J. Cummings" <cummings at kjchome.homeip.net> wrote:

Hi Kevin,

Well, don't know why you think they cannot be compared.

ANTLR - is Parser -> AST? ->TreeParser

Clang 
? ? contains also parser -- own, seems to be hand-made,
? ? then they have more logic phases.

On this page very good explained how C++ FrontEnd is bigger
of parser

?  http://www.semanticdesigns.com/Products/FrontEnds/CppFrontEnd.html


So again, if we have task to proceed C++ sources, we may choose between:

1)? ANTLR and develop or use some C++ grammar,
? ?  then spend time on (all/some) features describe on above page

2) take in hands complete C++ Frontend and ...DONE?
? ? For now I see two strong enough such frontends.
? ? Clang and SemanticDesign (which I cannot test it seems as demo).


=============
> ANTLR is a tool which can help you build compiler front-ends.? If you
> were industrious enough, you could re-write CLang using ANTLR.
> 
> ANTLR is primarily a JAVA tool (you at least need JAVA to run the tool
> to compile your grammar), but can be used to produce other targeted
> languages (C/C++, Python, etc) for your actual front-end.? While the C++
> support is minimal in version 3 (better in version 2.7, but lacking in
> some of the ST support) resulting in much use of C code which can be
> compiled using C++, you could use it to interface directly to the LLVM
> IR API if you wanted to.? But, I think Ter's example is probably the way
> to go, at least until Version 4 starts to grow and we see what kind of
> C++ runtime support will exist for ANTLR v4.
> 
>> When one should prefer Clang vs ANTLR or reverse?
>> Your opinions?
> 
> I think you are asking the wrong question here.? Please compare apples
> to apples, and not to cucumbers.

-- 
Best regards,

Ruslan Zasukhin
VP Engineering and New Technology
Paradigma Software, Inc

Valentina - Joining Worlds of Information
http://www.paradigmasoft.com

[I feel the need: the need for speed]




------------------------------

Message: 5
Date: Sat, 18 Jun 2011 12:26:00 -0400
From: Douglas Godfrey <douglasgodfrey at gmail.com>
Subject: Re: [antlr-interest] Question: ANTLR and LLVM ... + Clang
To: Ruslan Zasukhin <ruslan_zasukhin at valentina-db.com>
Cc: "antlr-interest at antlr.org" <antlr-interest at antlr.org>
Message-ID: <BANLkTi=vw03HhqS6fd_cSXEbjnmj208cNA at mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

The SemanticDesigns C++ frontend, like all of their frontend(s) is intended
for code analysis and transformation, not compiling.

Semantic Designs' tools are based on the old Reasoning Systems Inc.
tools: Refine
and Intervista.

Semantic Designs' tools parse a source language into an Symbol Table and AST
with more features than
the Antlr AST. The tools then take the Symbol Table and AST and either do
code analysis or reverse compile
the AST into new source code in the same or a different language. The tools
no not interface with a compiler
backend or machine code generator.

On Sat, Jun 18, 2011 at 5:19 AM, Ruslan Zasukhin <
ruslan_zasukhin at valentina-db.com> wrote:

> On 6/17/11 8:22 PM, "Kevin J. Cummings" <cummings at kjchome.homeip.net>
> wrote:
>
> Hi Kevin,
>
> Well, don't know why you think they cannot be compared.
>
> ANTLR - is Parser -> AST? ->TreeParser
>
> Clang
>? ? contains also parser -- own, seems to be hand-made,
>? ? then they have more logic phases.
>
> On this page very good explained how C++ FrontEnd is bigger
> of parser
>
>? http://www.semanticdesigns.com/Products/FrontEnds/CppFrontEnd.html
>
>
> So again, if we have task to proceed C++ sources, we may choose between:
>
> 1)? ANTLR and develop or use some C++ grammar,
>? ?  then spend time on (all/some) features describe on above page
>
> 2) take in hands complete C++ Frontend and ...DONE?
>? ? For now I see two strong enough such frontends.
>? ? Clang and SemanticDesign (which I cannot test it seems as demo).
>
>
> =============
> > ANTLR is a tool which can help you build compiler front-ends.? If you
> > were industrious enough, you could re-write CLang using ANTLR.
> >
> > ANTLR is primarily a JAVA tool (you at least need JAVA to run the tool
> > to compile your grammar), but can be used to produce other targeted
> > languages (C/C++, Python, etc) for your actual front-end.? While the C++
> > support is minimal in version 3 (better in version 2.7, but lacking in
> > some of the ST support) resulting in much use of C code which can be
> > compiled using C++, you could use it to interface directly to the LLVM
> > IR API if you wanted to.? But, I think Ter's example is probably the way
> > to go, at least until Version 4 starts to grow and we see what kind of
> > C++ runtime support will exist for ANTLR v4.
> >
> >> When one should prefer Clang vs ANTLR or reverse?
> >> Your opinions?
> >
> > I think you are asking the wrong question here.? Please compare apples
> > to apples, and not to cucumbers.
>
> --
> Best regards,
>
> Ruslan Zasukhin
> VP Engineering and New Technology
> Paradigma Software, Inc
>
> Valentina - Joining Worlds of Information
> http://www.paradigmasoft.com
>
> [I feel the need: the need for speed]
>
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>


------------------------------

Message: 6
Date: Sat, 18 Jun 2011 21:37:10 +0300
From: Ruslan Zasukhin <ruslan_zasukhin at valentina-db.com>
Subject: Re: [antlr-interest] Question: ANTLR and LLVM ... + Clang
To: "antlr-interest at antlr.org" <antlr-interest at antlr.org>
Message-ID: <CA22CB06.ECD8A%ruslan_zasukhin at valentina-db.com>
Content-Type: text/plain;??? charset="US-ASCII"

On 6/18/11 7:26 PM, "Douglas Godfrey" <douglasgodfrey at gmail.com> wrote:

Hi Douglas, 

> The SemanticDesigns C++ frontend, like all of their frontend(s) is intended
> for code analysis and transformation, not compiling.

> Semantic Designs' tools are based on the old Reasoning Systems Inc.
> tools: Refine and Intervista.
> 
> Semantic Designs' tools parse a source language into an Symbol Table and AST
> with more features than the Antlr AST.

> The tools then take the Symbol Table and AST and either do
> code analysis or reverse compile
> the AST into new source code in the same or a different language.
> The tools no not interface with a compiler backend or machine code generator.

I see. 

Thanks.


-- 
Best regards,

Ruslan Zasukhin
VP Engineering and New Technology
Paradigma Software, Inc

Valentina - Joining Worlds of Information
http://www.paradigmasoft.com

[I feel the need: the need for speed]




------------------------------

_______________________________________________
antlr-interest mailing list
antlr-interest at antlr.org
http://www.antlr.org/mailman/listinfo/antlr-interest

End of antlr-interest Digest, Vol 79, Issue 19
**********************************************

From cummings at kjchome.homeip.net  Sat Jun 18 19:35:28 2011
From: cummings at kjchome.homeip.net (Kevin J. Cummings)
Date: Sat, 18 Jun 2011 22:35:28 -0400
Subject: [antlr-interest] Question:  ANTLR and LLVM  ...  + Clang
In-Reply-To: <CA224866.ECD41%ruslan_zasukhin@valentina-db.com>
References: <CA224866.ECD41%ruslan_zasukhin@valentina-db.com>
Message-ID: <4DFD6070.60701@kjchome.homeip.net>

On 06/18/2011 05:19 AM, Ruslan Zasukhin wrote:
> On 6/17/11 8:22 PM, "Kevin J. Cummings"<cummings at kjchome.homeip.net>  wrote:
>
> Hi Kevin,
>
> Well, don't know why you think they cannot be compared.

You want to compare a parser generator (ANTLR) against a hand-made 
parser (Clang).

Seems silly to me.  You could compare the output parser from an ANTLR 
grammar, but you have yet to specify what grammar, against Clang which 
is already a C/C++/ObjC parser.  Do you have a C/C++/ObjC grammar that 
you could run through ANTLR to compare to Clang?

> ANTLR - is Parser ->  AST  ->TreeParser

No, Grammar-> [ANTLR] -> lexer/parser/tree parser

When you run the resulting parser, you see:

	source code -> LEXER -> parser -> AST -> TreeParser(s)

> Clang
>      contains also parser -- own, seems to be hand-made,
>      then they have more logic phases.

And from your "blackbox" description of Clang:

	source code -> Clang -> more logic phases

> On this page very good explained how C++ FrontEnd is bigger
> of parser
>
>     http://www.semanticdesigns.com/Products/FrontEnds/CppFrontEnd.html
>
>
> So again, if we have task to proceed C++ sources, we may choose between:
>
> 1)  ANTLR and develop or use some C++ grammar,
>       then spend time on (all/some) features describe on above page

If you are planning to write a C++ compiler, yes.  But why write one, 
when a number of freely available ones already exist?  Clang, GCC, etc.

I believe Ter has at least 1 C grammar file already written for ANTLR, 
but I'm not sure if he has a complete C++ grammar, and even if he does, 
I'm sure it doesn't contain everything else you need, which is a symbol 
table, and a designated output format from your parse.  I have also 
noticed (from real life experience) that example language grammars often 
come up short on either include facilities, or macro language support. 
That is more work you'd have to do.

Now, if you are writing a compiler that does not already have freely 
available versions, that is another story.  Using a tool like ANTLR will 
greatly simplify your development.  But, you'll still have to do 
development.

> 2) take in hands complete C++ Frontend and ...DONE?
>      For now I see two strong enough such frontends.
>      Clang and SemanticDesign (which I cannot test it seems as demo).

Clang is already interfaced to LLVM.  No development necessary.  Seems 
like a no brainer decision to me.  I can't speak for SemanticDesign.

> =============
>> ANTLR is a tool which can help you build compiler front-ends.  If you
>> were industrious enough, you could re-write CLang using ANTLR.
>>
>> ANTLR is primarily a JAVA tool (you at least need JAVA to run the tool
>> to compile your grammar), but can be used to produce other targeted
>> languages (C/C++, Python, etc) for your actual front-end.  While the C++
>> support is minimal in version 3 (better in version 2.7, but lacking in
>> some of the ST support) resulting in much use of C code which can be
>> compiled using C++, you could use it to interface directly to the LLVM
>> IR API if you wanted to.  But, I think Ter's example is probably the way
>> to go, at least until Version 4 starts to grow and we see what kind of
>> C++ runtime support will exist for ANTLR v4.
>>
>>> When one should prefer Clang vs ANTLR or reverse?
>>> Your opinions?
>>
>> I think you are asking the wrong question here.  Please compare apples
>> to apples, and not to cucumbers.
>

-- 
Kevin J. Cummings
kjchome at verizon.net
cummings at kjchome.homeip.net
cummings at kjc386.framingham.ma.us
Registered Linux User #1232 (http://counter.li.org)

From ruslan_zasukhin at valentina-db.com  Sun Jun 19 07:05:35 2011
From: ruslan_zasukhin at valentina-db.com (Ruslan Zasukhin)
Date: Sun, 19 Jun 2011 17:05:35 +0300
Subject: [antlr-interest] Question:  ANTLR and LLVM  ...  + Clang
In-Reply-To: <4DFD6070.60701@kjchome.homeip.net>
Message-ID: <CA23DCDF.ECDEF%ruslan_zasukhin@valentina-db.com>

On 6/19/11 5:35 AM, "Kevin J. Cummings" <cummings at kjchome.homeip.net> wrote:

>> On this page very good explained how C++ FrontEnd is bigger
>> of parser
>> 
>>     http://www.semanticdesigns.com/Products/FrontEnds/CppFrontEnd.html
>> 
>> 
>> So again, if we have task to proceed C++ sources, we may choose between:
>> 
>> 1)  ANTLR and develop or use some C++ grammar,
>>       then spend time on (all/some) features describe on above page
> 
> If you are planning to write a C++ compiler, yes.  But why write one,
> when a number of freely available ones already exist?  Clang, GCC, etc.

No no.

We not going develop own compiler.

We need parse C++ sources, and extract different kind info from that.
Then use that info for different tasks ...

-- 
Best regards,

Ruslan Zasukhin
VP Engineering and New Technology
Paradigma Software, Inc

Valentina - Joining Worlds of Information
http://www.paradigmasoft.com

[I feel the need: the need for speed]



From parrt at cs.usfca.edu  Sun Jun 19 11:30:58 2011
From: parrt at cs.usfca.edu (Terence Parr)
Date: Sun, 19 Jun 2011 11:30:58 -0700
Subject: [antlr-interest] gunit failing on update to ANTLR 3.3
In-Reply-To: <BANLkTimcfr5br+rb6=eP=zcZRPvo5ihpKw@mail.gmail.com>
References: <BANLkTikWAyKpg4zZV57ZDFvzhGaUyh-YbA@mail.gmail.com>
	<BANLkTimuym=HnNfZqXbOF5fm0wnFC9jAyg@mail.gmail.com>
	<46ACBC8D-36C1-4F53-B716-7200B1241AE9@cs.usfca.edu>
	<BANLkTimcfr5br+rb6=eP=zcZRPvo5ihpKw@mail.gmail.com>
Message-ID: <FECD9384-94DC-49CF-BCCF-266FFEB7C9EA@cs.usfca.edu>

Ok, looked into this.  3.2 and 3.4 seems to work but 3.3 doesn't. weird.  anyway here is what i see:

/tmp/gunit $ java -cp ".:/usr/local/lib/antlr-3.2.jar" org.antlr.gunit.Interp SimpleC.gunit
-----------------------------------------------------------------------
executing testsuite for grammar:SimpleC with 1 tests
-----------------------------------------------------------------------
0 failures found:
Tests run: 1, Failures: 0



/tmp/gunit $ java -cp ".:/usr/local/lib/antlr-3.3-complete.jar:$CLASSPATH" org.antlr.gunit.Interp SimpleC.gunit
-----------------------------------------------------------------------
executing testsuite for grammar:SimpleC with 1 tests
-----------------------------------------------------------------------
1 failures found:
test1 (program, line6) - 
expected: OK
actual: FAIL


Tests run: 1, Failures: 1




$ java -cp ".:/usr/local/lib/antlr3-main.jar:$CLASSPATH" org.antlr.gunit.Interp SimpleC.gunit
-----------------------------------------------------------------------
executing testsuite for grammar:SimpleC with 1 tests
-----------------------------------------------------------------------
0 failures found:
Tests run: 1, Failures: 0

So, 3.4 seems to have fixed it.  releasing 3.4 today or tomorrow as beta.

Ter
On Jun 14, 2011, at 5:57 PM, Simon Marchi wrote:

> Ping !
> 
> On Mon, Jun 6, 2011 at 19:52, Terence Parr <parrt at cs.usfca.edu> wrote:
>> hi guys. at a conference for another day or two. if no response this
>> week, ping me!
>> 
>> a simple grammar / gunit test that fails should yield a quick fix :)
>> 
>> Ter
>> On Jun 6, 2011, at 4:47 PM, Simon Marchi wrote:
>> 
>>> I also have experienced some strange behavior with gunit, although it
>>> is the first time I use it. I sent a message about this on May 20
>>> (http://www.antlr.org/pipermail/antlr-interest/2011-May/041650.html)
>>> and have seen one or two other on the same subject. I would really
>>> like a follow-up on this !
>>> 
>>> Thanks,
>>> 
>>> Simon
>>> 
>>> On Mon, Jun 6, 2011 at 08:32, Jasper Floor <jasperfloor at gmail.com>
>>> wrote:
>>>> Dear All,
>>>> 
>>>> I have a small DSL for the company I work for. I have used gunit to
>>>> make some tests. I also have my own tests next to this but operating
>>>> on a higher level.
>>>> 
>>>> I recently made a small change to the language and decided to update
>>>> Antlr to the latest version.
>>>> 
>>>> Unfortunately most of my (g)unit tests broke.
>>>> 
>>>> The reason in one case is that the following test (the first test in
>>>> the file for whatever that is worth):
>>>> 
>>>> "$1=#1;" OK
>>>> 
>>>> Does not return OK. The output says parsing stopped at character 4.
>>>> Tracing through the generated junit code I found out that the return
>>>> value is not OK but the AST. So the test should pass with OK.
>>>> This isn't consistent however. Or rather. FAIL seems to work and
>>>> some AST pass.
>>>> 
>>>> All tests pass with antlr 3.2. They also pass my own test suite which
>>>> tests at a higher level from gunit.
>>>> This implies a problem with gunit.
>>>> 
>>>> mvg,
>>>> Jasper
>>>> 
>>>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>>>> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>>>> 
>>> 
>>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>>> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>> 
>> 
>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>> 


From parrt at cs.usfca.edu  Sun Jun 19 15:27:07 2011
From: parrt at cs.usfca.edu (Terence Parr)
Date: Sun, 19 Jun 2011 15:27:07 -0700
Subject: [antlr-interest] test release of antlr 3.4
Message-ID: <1CB686F1-BFCB-4FA0-BB6F-8D15B01E4D16@cs.usfca.edu>

Hi, I'm hoping to release 3.4 this week but a number of things have changed and so it would be great if people could try out these releases with their grammars. Most important change is that the tool itself no longer uses ANTLR v2 or ST 3.2.1, which also used ANTLR v2. The tool itself is now completely BSD clean, which makes a big difference because it can be included in eclipse projects such as xtext.  Important caveat here: the tool should be backward compatible with 3.3 so, if you use templates as part of your grammars, they will still use StringTemplate 3.2.1. For example, this method is still the same in generated parsers:

// StringTemplateGroup is a ST 3.2.1 class not ST v4
public void setTemplateLib(StringTemplateGroup templateLib) {
  this.templateLib = templateLib;
}

The other thing is that the C target has not been tested at all really. If someone could report back on how it works, that would be great ( including the debugging socket protocol to ANTLRWorks).

The two files you can download for testing are as follows:

http://antlr.org/download/antlr-3.4-complete.jar
	antlr tool (uses ST 4.0.2)
	runtime
	gunit (references ST 3.2.1 classes)
	ST 3.2.1 (references ANTLR v2 classes)
	antlr 2.7.7 (needed by ST 3.2.1)
	ST 4.0.2 (uses only ANTLR 3.4)

So, in summary, antlr-3.4-complete.jar is one jar file bigger to include ST 4.0.2. (Actually when we release, I'm hoping that ST 4.0.3 will be done).

For those that need to be squeaky clean BSD, the following jar file contains just the ANTLR tool itself and depended ST v4:

http://antlr.org/download/antlr-3.4.jar
	antlr tool (uses ST 4.0.2)
	runtime
	gunit (references ST 3.2.1 classes)
	ST 4.0.2

If you don't use StringTemplate in your grammars then antlr-3.4.jar is all you need. Nothing in that jar has anything to do with the unclean v2 stuff.

A big thanks goes to Sam Harwell who converted all of the tool grammars to v3 from v2! A big nasty job.

Thanks!
Ter


From antlr at shmuelhome.mine.nu  Sun Jun 19 23:20:43 2011
From: antlr at shmuelhome.mine.nu (shmuel siegel)
Date: Mon, 20 Jun 2011 09:20:43 +0300
Subject: [antlr-interest] test release of antlr 3.4
In-Reply-To: <1CB686F1-BFCB-4FA0-BB6F-8D15B01E4D16@cs.usfca.edu>
References: <1CB686F1-BFCB-4FA0-BB6F-8D15B01E4D16@cs.usfca.edu>
Message-ID: <4DFEE6BB.4010203@shmuelhome.mine.nu>

On 6/20/2011 1:27 AM, Terence Parr wrote:

> I'm hoping to release 3.4 this week
Is there a compatible AntlrWorks?


From jb at jblache.org  Mon Jun 20 03:55:35 2011
From: jb at jblache.org (Julien BLACHE)
Date: Mon, 20 Jun 2011 12:55:35 +0200
Subject: [antlr-interest] test release of antlr 3.4
In-Reply-To: <c1CB686F1-BFCB-4FA0-BB6F-8D15B01E4D16@cs.usfca.edu>
References: <c1CB686F1-BFCB-4FA0-BB6F-8D15B01E4D16@cs.usfca.edu>
Message-ID: <87mxhcn55k.fsf@sonic.technologeek.org>

Hi,

> The other thing is that the C target has not been tested at all
> really. If someone could report back on how it works, that would be
> great ( including the debugging socket protocol to ANTLRWorks).

I gave it a very quick try on my grammars (written for 3.2) and it
doesn't look good :/ I've been following the list for some time but I
can't remember what, if any, adaptations are needed for 3.4, so I'll
check back on that (pointers appreciated if you have some handy).

Where can I find the C runtime for 3.4? The download directory still has
an old 3.3 snapshot.

Right now the code generated by antlr is incomplete; generated C files
are much shorter than those generated by 3.2 and actions are missing
entirely in my AST grammar.

Quick comparison, line counts:
                ANTLR 3.2    ANTLR 3.4
DAAP2SQL.c        927          585
DAAPLexer.c       1092         934
DAAPParser.c      1014         901

A showstopper for C code is that -depends is broken; the only output is:
 /dependencies()

There also seems to be an issue wrt locale settings; unless running with
LC_ALL=C, antlr bails out on me looking for
org/antlr/tool/templates/messages/languages/fr.stg.

Cosmetic issue, but still, -version returns:
 ANTLR Parser Generator  Version ${project.version} ${buildNumber}

JB.

-- 
Julien BLACHE                                   <http://www.jblache.org> 
<jb at jblache.org>                                  GPG KeyID 0xF5D65169

From researcher0x00 at gmail.com  Mon Jun 20 05:22:58 2011
From: researcher0x00 at gmail.com (The Researcher)
Date: Mon, 20 Jun 2011 08:22:58 -0400
Subject: [antlr-interest] ANTLR 3.4 BSD clean version, Thanks!
Message-ID: <BANLkTik+J77+M09ecrZ=_Sg5qy9Fk_LugA@mail.gmail.com>

Ter, Sam, and others

I just wanted to say thanks for all of the work. I know it is a significant
step for ANTLR and took a more than a significant amount of work.

Eric

From simon.marchi at polymtl.ca  Mon Jun 20 08:14:34 2011
From: simon.marchi at polymtl.ca (Simon Marchi)
Date: Mon, 20 Jun 2011 11:14:34 -0400
Subject: [antlr-interest] test release of antlr 3.4
In-Reply-To: <1CB686F1-BFCB-4FA0-BB6F-8D15B01E4D16@cs.usfca.edu>
References: <1CB686F1-BFCB-4FA0-BB6F-8D15B01E4D16@cs.usfca.edu>
Message-ID: <BANLkTinVSN0iyAB3db=D+fR+8fiDkUTF9w@mail.gmail.com>

Hello,

The generation of my parser makes the Tool go in an infinite loop

Ant build output: http://paste.ubuntu.com/629867/

Also, as already reported, the version number not correctly printing
(prints ${project.version} ${buildNumber} instead).

Simon

On Sun, Jun 19, 2011 at 18:27, Terence Parr <parrt at cs.usfca.edu> wrote:
> Hi, I'm hoping to release 3.4 this week but a number of things have changed and so it would be great if people could try out these releases with their grammars. Most important change is that the tool itself no longer uses ANTLR v2 or ST 3.2.1, which also used ANTLR v2. The tool itself is now completely BSD clean, which makes a big difference because it can be included in eclipse projects such as xtext. ?Important caveat here: the tool should be backward compatible with 3.3 so, if you use templates as part of your grammars, they will still use StringTemplate 3.2.1. For example, this method is still the same in generated parsers:
>
> // StringTemplateGroup is a ST 3.2.1 class not ST v4
> public void setTemplateLib(StringTemplateGroup templateLib) {
> ?this.templateLib = templateLib;
> }
>
> The other thing is that the C target has not been tested at all really. If someone could report back on how it works, that would be great ( including the debugging socket protocol to ANTLRWorks).
>
> The two files you can download for testing are as follows:
>
> http://antlr.org/download/antlr-3.4-complete.jar
> ? ? ? ?antlr tool (uses ST 4.0.2)
> ? ? ? ?runtime
> ? ? ? ?gunit (references ST 3.2.1 classes)
> ? ? ? ?ST 3.2.1 (references ANTLR v2 classes)
> ? ? ? ?antlr 2.7.7 (needed by ST 3.2.1)
> ? ? ? ?ST 4.0.2 (uses only ANTLR 3.4)
>
> So, in summary, antlr-3.4-complete.jar is one jar file bigger to include ST 4.0.2. (Actually when we release, I'm hoping that ST 4.0.3 will be done).
>
> For those that need to be squeaky clean BSD, the following jar file contains just the ANTLR tool itself and depended ST v4:
>
> http://antlr.org/download/antlr-3.4.jar
> ? ? ? ?antlr tool (uses ST 4.0.2)
> ? ? ? ?runtime
> ? ? ? ?gunit (references ST 3.2.1 classes)
> ? ? ? ?ST 4.0.2
>
> If you don't use StringTemplate in your grammars then antlr-3.4.jar is all you need. Nothing in that jar has anything to do with the unclean v2 stuff.
>
> A big thanks goes to Sam Harwell who converted all of the tool grammars to v3 from v2! A big nasty job.
>
> Thanks!
> Ter
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>

From jimi at temporal-wave.com  Mon Jun 20 09:00:58 2011
From: jimi at temporal-wave.com (Jim Idle)
Date: Mon, 20 Jun 2011 09:00:58 -0700
Subject: [antlr-interest] test release of antlr 3.4
In-Reply-To: <87mxhcn55k.fsf@sonic.technologeek.org>
References: <c1CB686F1-BFCB-4FA0-BB6F-8D15B01E4D16@cs.usfca.edu>
	<87mxhcn55k.fsf@sonic.technologeek.org>
Message-ID: <26166f75c6a03ae7ce9bd924b72a059d@mail.gmail.com>

I'll try to get the C target in line with 3.4 today.

Jim

> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of Julien BLACHE
> Sent: Monday, June 20, 2011 3:56 AM
> To: antlr-interest at antlr.org
> Subject: Re: [antlr-interest] test release of antlr 3.4
>
> Hi,
>
> > The other thing is that the C target has not been tested at all
> > really. If someone could report back on how it works, that would be
> > great ( including the debugging socket protocol to ANTLRWorks).
>
> I gave it a very quick try on my grammars (written for 3.2) and it
> doesn't look good :/ I've been following the list for some time but I
> can't remember what, if any, adaptations are needed for 3.4, so I'll
> check back on that (pointers appreciated if you have some handy).
>
> Where can I find the C runtime for 3.4? The download directory still
> has an old 3.3 snapshot.
>
> Right now the code generated by antlr is incomplete; generated C files
> are much shorter than those generated by 3.2 and actions are missing
> entirely in my AST grammar.
>
> Quick comparison, line counts:
>                 ANTLR 3.2    ANTLR 3.4
> DAAP2SQL.c        927          585
> DAAPLexer.c       1092         934
> DAAPParser.c      1014         901
>
> A showstopper for C code is that -depends is broken; the only output
> is:
>  /dependencies()
>
> There also seems to be an issue wrt locale settings; unless running
> with LC_ALL=C, antlr bails out on me looking for
> org/antlr/tool/templates/messages/languages/fr.stg.
>
> Cosmetic issue, but still, -version returns:
>  ANTLR Parser Generator  Version ${project.version} ${buildNumber}
>
> JB.
>
> --
> Julien BLACHE
> <http://www.jblache.org>
> <jb at jblache.org>                                  GPG KeyID 0xF5D65169
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
> email-address

From asicaddress at gmail.com  Mon Jun 20 09:09:08 2011
From: asicaddress at gmail.com (A Z)
Date: Mon, 20 Jun 2011 11:09:08 -0500
Subject: [antlr-interest] test release of antlr 3.4
In-Reply-To: <87mxhcn55k.fsf@sonic.technologeek.org>
References: <c1CB686F1-BFCB-4FA0-BB6F-8D15B01E4D16@cs.usfca.edu>
	<87mxhcn55k.fsf@sonic.technologeek.org>
Message-ID: <BANLkTinw8roEbqyV-1tWnTLbtTgpdr_4rQ@mail.gmail.com>

How is this jar different than 3.2? I tried the same command

>java -jar antlr-3.4.jar grammar.g

but I get an error message:

"Invalid or corrupt jarfile antlr-3.4.jar"



On Mon, Jun 20, 2011 at 5:55 AM, Julien BLACHE <jb at jblache.org> wrote:

> Hi,
>
> > The other thing is that the C target has not been tested at all
> > really. If someone could report back on how it works, that would be
> > great ( including the debugging socket protocol to ANTLRWorks).
>
> I gave it a very quick try on my grammars (written for 3.2) and it
> doesn't look good :/ I've been following the list for some time but I
> can't remember what, if any, adaptations are needed for 3.4, so I'll
> check back on that (pointers appreciated if you have some handy).
>
> Where can I find the C runtime for 3.4? The download directory still has
> an old 3.3 snapshot.
>
> Right now the code generated by antlr is incomplete; generated C files
> are much shorter than those generated by 3.2 and actions are missing
> entirely in my AST grammar.
>
> Quick comparison, line counts:
>                ANTLR 3.2    ANTLR 3.4
> DAAP2SQL.c        927          585
> DAAPLexer.c       1092         934
> DAAPParser.c      1014         901
>
> A showstopper for C code is that -depends is broken; the only output is:
>  /dependencies()
>
> There also seems to be an issue wrt locale settings; unless running with
> LC_ALL=C, antlr bails out on me looking for
> org/antlr/tool/templates/messages/languages/fr.stg.
>
> Cosmetic issue, but still, -version returns:
>  ANTLR Parser Generator  Version ${project.version} ${buildNumber}
>
> JB.
>
> --
> Julien BLACHE                                   <http://www.jblache.org>
> <jb at jblache.org>                                  GPG KeyID 0xF5D65169
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>

From jb at jblache.org  Mon Jun 20 09:28:15 2011
From: jb at jblache.org (Julien BLACHE)
Date: Mon, 20 Jun 2011 18:28:15 +0200
Subject: [antlr-interest] test release of antlr 3.4
In-Reply-To: <BANLkTinw8roEbqyV-1tWnTLbtTgpdr_4rQ@mail.gmail.com> (A. Z.'s
	message of "Mon, 20 Jun 2011 11:09:08 -0500")
References: <c1CB686F1-BFCB-4FA0-BB6F-8D15B01E4D16@cs.usfca.edu>
	<87mxhcn55k.fsf@sonic.technologeek.org>
	<BANLkTinw8roEbqyV-1tWnTLbtTgpdr_4rQ@mail.gmail.com>
Message-ID: <87wrgglb6o.fsf@sonic.technologeek.org>

A Z <asicaddress at gmail.com> wrote:

Hi,

> How is this jar different than 3.2? I tried the same command
>
>>java -jar antlr-3.4.jar grammar.g
>
> but I get an error message:
> "Invalid or corrupt jarfile antlr-3.4.jar"

Same issue here. It works when invoked this way
  java -cp antlr-3.4.jar org.antlr.Tool grammar.g

I'll leave it up to the Java-literate to investigate/explain/fix ;)

(Sun^WOracle Java 1.6.0_26 if it makes any difference)

JB.

-- 
Julien BLACHE                                   <http://www.jblache.org> 
<jb at jblache.org>                                  GPG KeyID 0xF5D65169

From bkiers at gmail.com  Mon Jun 20 10:30:29 2011
From: bkiers at gmail.com (Bart Kiers)
Date: Mon, 20 Jun 2011 19:30:29 +0200
Subject: [antlr-interest] test release of antlr 3.4
In-Reply-To: <87wrgglb6o.fsf@sonic.technologeek.org>
References: <c1CB686F1-BFCB-4FA0-BB6F-8D15B01E4D16@cs.usfca.edu>
	<87mxhcn55k.fsf@sonic.technologeek.org>
	<BANLkTinw8roEbqyV-1tWnTLbtTgpdr_4rQ@mail.gmail.com>
	<87wrgglb6o.fsf@sonic.technologeek.org>
Message-ID: <BANLkTik8gR=HqDFxdJ-Y_YU76XUncv19ew@mail.gmail.com>

The file `/META-INF/MANIFEST.MF` is missing the 'Main-Class' attribute. Add
the line:

    Main-Class: org.antlr.Tool

to the file (inside the JAR) and all should be OK.

Regards,

Bart.


On Mon, Jun 20, 2011 at 6:28 PM, Julien BLACHE <jb at jblache.org> wrote:

> A Z <asicaddress at gmail.com> wrote:
>
> Hi,
>
> > How is this jar different than 3.2? I tried the same command
> >
> >>java -jar antlr-3.4.jar grammar.g
> >
> > but I get an error message:
> > "Invalid or corrupt jarfile antlr-3.4.jar"
>
> Same issue here. It works when invoked this way
>  java -cp antlr-3.4.jar org.antlr.Tool grammar.g
>
> I'll leave it up to the Java-literate to investigate/explain/fix ;)
>
> (Sun^WOracle Java 1.6.0_26 if it makes any difference)
>
> JB.
>
> --
> Julien BLACHE                                   <http://www.jblache.org>
> <jb at jblache.org>                                  GPG KeyID 0xF5D65169
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>

From parrt at cs.usfca.edu  Mon Jun 20 11:14:13 2011
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon, 20 Jun 2011 11:14:13 -0700
Subject: [antlr-interest] test release of antlr 3.4
In-Reply-To: <4DFEE6BB.4010203@shmuelhome.mine.nu>
References: <1CB686F1-BFCB-4FA0-BB6F-8D15B01E4D16@cs.usfca.edu>
	<4DFEE6BB.4010203@shmuelhome.mine.nu>
Message-ID: <F01187FB-570C-4ED5-9B83-AE83C40A21C4@cs.usfca.edu>

once 3.4 released :)
Ter
On Jun 19, 2011, at 11:20 PM, shmuel siegel wrote:

> On 6/20/2011 1:27 AM, Terence Parr wrote:
> 
>> I'm hoping to release 3.4 this week
> Is there a compatible AntlrWorks?
> 
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address


From parrt at cs.usfca.edu  Mon Jun 20 11:16:58 2011
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon, 20 Jun 2011 11:16:58 -0700
Subject: [antlr-interest] test release of antlr 3.4
In-Reply-To: <87mxhcn55k.fsf@sonic.technologeek.org>
References: <c1CB686F1-BFCB-4FA0-BB6F-8D15B01E4D16@cs.usfca.edu>
	<87mxhcn55k.fsf@sonic.technologeek.org>
Message-ID: <8980822A-74CC-402B-9D7B-7E49449656E7@cs.usfca.edu>


On Jun 20, 2011, at 3:55 AM, Julien BLACHE wrote:

> Hi,
> 
>> The other thing is that the C target has not been tested at all
>> really. If someone could report back on how it works, that would be
>> great ( including the debugging socket protocol to ANTLRWorks).
> 
> I gave it a very quick try on my grammars (written for 3.2) and it
> doesn't look good :/ I've been following the list for some time but I
> can't remember what, if any, adaptations are needed for 3.4, so I'll
> check back on that (pointers appreciated if you have some handy).
> 
> Where can I find the C runtime for 3.4? The download directory still has
> an old 3.3 snapshot.
> 
> Right now the code generated by antlr is incomplete; generated C files
> are much shorter than those generated by 3.2 and actions are missing
> entirely in my AST grammar.
> 

Jim will take a peek.

> Quick comparison, line counts:
>                ANTLR 3.2    ANTLR 3.4
> DAAP2SQL.c        927          585
> DAAPLexer.c       1092         934
> DAAPParser.c      1014         901
> 
> A showstopper for C code is that -depends is broken; the only output is:
> /dependencies()

ooops. 

> There also seems to be an issue wrt locale settings; unless running with
> LC_ALL=C, antlr bails out on me looking for
> org/antlr/tool/templates/messages/languages/fr.stg.

weird. this hasn't changed.

> Cosmetic issue, but still, -version returns:
> ANTLR Parser Generator  Version ${project.version} ${buildNumber}

yep, will fix.
Ter

From parrt at cs.usfca.edu  Mon Jun 20 11:19:40 2011
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon, 20 Jun 2011 11:19:40 -0700
Subject: [antlr-interest] ANTLR 3.4 BSD clean version, Thanks!
In-Reply-To: <BANLkTik+J77+M09ecrZ=_Sg5qy9Fk_LugA@mail.gmail.com>
References: <BANLkTik+J77+M09ecrZ=_Sg5qy9Fk_LugA@mail.gmail.com>
Message-ID: <A6F19CBE-170E-49E4-AE6D-A680E91B355F@cs.usfca.edu>

Thanks...should have done earlier but...
Ter
On Jun 20, 2011, at 5:22 AM, The Researcher wrote:

> Ter, Sam, and others
> 
> I just wanted to say thanks for all of the work. I know it is a significant
> step for ANTLR and took a more than a significant amount of work.
> 
> Eric
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address


From parrt at cs.usfca.edu  Mon Jun 20 11:20:37 2011
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon, 20 Jun 2011 11:20:37 -0700
Subject: [antlr-interest] test release of antlr 3.4
In-Reply-To: <BANLkTinVSN0iyAB3db=D+fR+8fiDkUTF9w@mail.gmail.com>
References: <1CB686F1-BFCB-4FA0-BB6F-8D15B01E4D16@cs.usfca.edu>
	<BANLkTinVSN0iyAB3db=D+fR+8fiDkUTF9w@mail.gmail.com>
Message-ID: <1BD4B46F-96D1-436E-BF69-8AF9B86D761E@cs.usfca.edu>


On Jun 20, 2011, at 8:14 AM, Simon Marchi wrote:

> Hello,
> 
> The generation of my parser makes the Tool go in an infinite loop
> 
> Ant build output: http://paste.ubuntu.com/629867/
> 
> Also, as already reported, the version number not correctly printing
> (prints ${project.version} ${buildNumber} instead).
> 

have you tried 3.3?  it should be same:

http://www.antlr.org/wiki/display/ANTLR3/ANTLR+spins+forever+on+my+grammar

Ter


From parrt at cs.usfca.edu  Mon Jun 20 11:29:39 2011
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon, 20 Jun 2011 11:29:39 -0700
Subject: [antlr-interest] test release of antlr 3.4
In-Reply-To: <BANLkTinw8roEbqyV-1tWnTLbtTgpdr_4rQ@mail.gmail.com>
References: <c1CB686F1-BFCB-4FA0-BB6F-8D15B01E4D16@cs.usfca.edu>
	<87mxhcn55k.fsf@sonic.technologeek.org>
	<BANLkTinw8roEbqyV-1tWnTLbtTgpdr_4rQ@mail.gmail.com>
Message-ID: <A34D5BFB-E912-44DC-81CE-255D7A973640@cs.usfca.edu>


On Jun 20, 2011, at 9:09 AM, A Z wrote:

> How is this jar different than 3.2? I tried the same command
> 
>> java -jar antlr-3.4.jar grammar.g
> 
> but I get an error message:
> 
> "Invalid or corrupt jarfile antlr-3.4.jar"

ooops. didn't know people used that. fixed jar will push soon.

Ter

From parrt at cs.usfca.edu  Mon Jun 20 11:39:11 2011
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon, 20 Jun 2011 11:39:11 -0700
Subject: [antlr-interest] test release of antlr 3.4
In-Reply-To: <1CB686F1-BFCB-4FA0-BB6F-8D15B01E4D16@cs.usfca.edu>
References: <1CB686F1-BFCB-4FA0-BB6F-8D15B01E4D16@cs.usfca.edu>
Message-ID: <5083E05C-946C-4350-BE3F-C215CA479B58@cs.usfca.edu>

Ok, updated.

> http://antlr.org/download/antlr-3.4rc1-complete.jar
> http://antlr.org/download/antlr-3.4rc1.jar

fixed -depend thing and version thing:

~ $ java -jar /usr/local/lib/antlr-3.4rc1-complete.jar
ANTLR Parser Generator  Version 3.4

Ter

On Jun 19, 2011, at 3:27 PM, Terence Parr wrote:

> Hi, I'm hoping to release 3.4 this week but a number of things have changed and so it would be great if people could try out these releases with their grammars. Most important change is that the tool itself no longer uses ANTLR v2 or ST 3.2.1, which also used ANTLR v2. The tool itself is now completely BSD clean, which makes a big difference because it can be included in eclipse projects such as xtext.  Important caveat here: the tool should be backward compatible with 3.3 so, if you use templates as part of your grammars, they will still use StringTemplate 3.2.1. For example, this method is still the same in generated parsers:
> 
> // StringTemplateGroup is a ST 3.2.1 class not ST v4
> public void setTemplateLib(StringTemplateGroup templateLib) {
>  this.templateLib = templateLib;
> }
> 
> The other thing is that the C target has not been tested at all really. If someone could report back on how it works, that would be great ( including the debugging socket protocol to ANTLRWorks).
> 
> The two files you can download for testing are as follows:
> 
> http://antlr.org/download/antlr-3.4-complete.jar
> 	antlr tool (uses ST 4.0.2)
> 	runtime
> 	gunit (references ST 3.2.1 classes)
> 	ST 3.2.1 (references ANTLR v2 classes)
> 	antlr 2.7.7 (needed by ST 3.2.1)
> 	ST 4.0.2 (uses only ANTLR 3.4)
> 
> So, in summary, antlr-3.4-complete.jar is one jar file bigger to include ST 4.0.2. (Actually when we release, I'm hoping that ST 4.0.3 will be done).
> 
> For those that need to be squeaky clean BSD, the following jar file contains just the ANTLR tool itself and depended ST v4:
> 
> http://antlr.org/download/antlr-3.4.jar
> 	antlr tool (uses ST 4.0.2)
> 	runtime
> 	gunit (references ST 3.2.1 classes)
> 	ST 4.0.2
> 
> If you don't use StringTemplate in your grammars then antlr-3.4.jar is all you need. Nothing in that jar has anything to do with the unclean v2 stuff.
> 
> A big thanks goes to Sam Harwell who converted all of the tool grammars to v3 from v2! A big nasty job.
> 
> Thanks!
> Ter
> 
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address


From jb at jblache.org  Mon Jun 20 11:47:26 2011
From: jb at jblache.org (Julien BLACHE)
Date: Mon, 20 Jun 2011 20:47:26 +0200
Subject: [antlr-interest] test release of antlr 3.4
In-Reply-To: <8980822A-74CC-402B-9D7B-7E49449656E7@cs.usfca.edu> (Terence
	Parr's message of "Mon, 20 Jun 2011 11:16:58 -0700")
References: <c1CB686F1-BFCB-4FA0-BB6F-8D15B01E4D16@cs.usfca.edu>
	<87mxhcn55k.fsf@sonic.technologeek.org>
	<8980822A-74CC-402B-9D7B-7E49449656E7@cs.usfca.edu>
Message-ID: <87sjr4l4qp.fsf@sonic.technologeek.org>

Terence Parr <parrt at cs.usfca.edu> wrote:

Hi,

>> There also seems to be an issue wrt locale settings; unless running with
>> LC_ALL=C, antlr bails out on me looking for
>> org/antlr/tool/templates/messages/languages/fr.stg.
>
> weird. this hasn't changed.

Could be caused by my locales settings on this system, I'll try on
another system with different settings tomorrow. If you think of
anything that can be done to track that down, let me know.

JB.

-- 
Julien BLACHE                                   <http://www.jblache.org> 
<jb at jblache.org>                                  GPG KeyID 0xF5D65169

From asicaddress at gmail.com  Mon Jun 20 12:13:07 2011
From: asicaddress at gmail.com (A Z)
Date: Mon, 20 Jun 2011 14:13:07 -0500
Subject: [antlr-interest] test release of antlr 3.4
In-Reply-To: <87wrgglb6o.fsf@sonic.technologeek.org>
References: <c1CB686F1-BFCB-4FA0-BB6F-8D15B01E4D16@cs.usfca.edu>
	<87mxhcn55k.fsf@sonic.technologeek.org>
	<BANLkTinw8roEbqyV-1tWnTLbtTgpdr_4rQ@mail.gmail.com>
	<87wrgglb6o.fsf@sonic.technologeek.org>
Message-ID: <BANLkTi=pcXyZ2T85ocuvf7WjojL97z6Kvw@mail.gmail.com>

Thanks, that Java command worked for me.

The good news is the C code was generated with no grammar issues.
Unfortunately the C code doesn't compile:

- The characters '\>=' are used in comparisons
- '_empty' is not defined
- There are lots of these, with varying numbers of altSwitchCase(), which is
also not defined.
                switch (alt48)
                {

altSwitchCase(i,a)altSwitchCase(i,a)altSwitchCase(i,a)altSwitchCase(i,a);
                }
- Many functions starting with 'FOLLOW_set_in_*' are not defined. These seem
to be related to rules in which all the alternatives are single tokens.



On Mon, Jun 20, 2011 at 11:28 AM, Julien BLACHE <jb at jblache.org> wrote:

> A Z <asicaddress at gmail.com> wrote:
>
> Hi,
>
> > How is this jar different than 3.2? I tried the same command
> >
> >>java -jar antlr-3.4.jar grammar.g
> >
> > but I get an error message:
> > "Invalid or corrupt jarfile antlr-3.4.jar"
>
> Same issue here. It works when invoked this way
>  java -cp antlr-3.4.jar org.antlr.Tool grammar.g
>
> I'll leave it up to the Java-literate to investigate/explain/fix ;)
>
> (Sun^WOracle Java 1.6.0_26 if it makes any difference)
>
> JB.
>
> --
> Julien BLACHE                                   <http://www.jblache.org>
> <jb at jblache.org>                                  GPG KeyID 0xF5D65169
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>

From parrt at cs.usfca.edu  Mon Jun 20 12:28:35 2011
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon, 20 Jun 2011 12:28:35 -0700
Subject: [antlr-interest] test release of antlr 3.4
In-Reply-To: <BANLkTi=pcXyZ2T85ocuvf7WjojL97z6Kvw@mail.gmail.com>
References: <c1CB686F1-BFCB-4FA0-BB6F-8D15B01E4D16@cs.usfca.edu>
	<87mxhcn55k.fsf@sonic.technologeek.org>
	<BANLkTinw8roEbqyV-1tWnTLbtTgpdr_4rQ@mail.gmail.com>
	<87wrgglb6o.fsf@sonic.technologeek.org>
	<BANLkTi=pcXyZ2T85ocuvf7WjojL97z6Kvw@mail.gmail.com>
Message-ID: <26269EA3-5AE8-43AF-989D-3C31B8A69D30@cs.usfca.edu>

If you can send me your grammar, I'll poke around. Jim might be able to work on this today too.

Ter
On Jun 20, 2011, at 12:13 PM, A Z wrote:

> Thanks, that Java command worked for me.
> 
> The good news is the C code was generated with no grammar issues.
> Unfortunately the C code doesn't compile:
> 
> - The characters '\>=' are used in comparisons
> - '_empty' is not defined
> - There are lots of these, with varying numbers of altSwitchCase(), which is
> also not defined.
>                switch (alt48)
>                {
> 
> altSwitchCase(i,a)altSwitchCase(i,a)altSwitchCase(i,a)altSwitchCase(i,a);
>                }
> - Many functions starting with 'FOLLOW_set_in_*' are not defined. These seem
> to be related to rules in which all the alternatives are single tokens.
> 
> 
> 
> On Mon, Jun 20, 2011 at 11:28 AM, Julien BLACHE <jb at jblache.org> wrote:
> 
>> A Z <asicaddress at gmail.com> wrote:
>> 
>> Hi,
>> 
>>> How is this jar different than 3.2? I tried the same command
>>> 
>>>> java -jar antlr-3.4.jar grammar.g
>>> 
>>> but I get an error message:
>>> "Invalid or corrupt jarfile antlr-3.4.jar"
>> 
>> Same issue here. It works when invoked this way
>> java -cp antlr-3.4.jar org.antlr.Tool grammar.g
>> 
>> I'll leave it up to the Java-literate to investigate/explain/fix ;)
>> 
>> (Sun^WOracle Java 1.6.0_26 if it makes any difference)
>> 
>> JB.
>> 
>> --
>> Julien BLACHE                                   <http://www.jblache.org>
>> <jb at jblache.org>                                  GPG KeyID 0xF5D65169
>> 
>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>> Unsubscribe:
>> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>> 
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address


From douglasgodfrey at gmail.com  Mon Jun 20 15:17:55 2011
From: douglasgodfrey at gmail.com (Douglas Godfrey)
Date: Mon, 20 Jun 2011 18:17:55 -0400
Subject: [antlr-interest] test release of antlr 3.4
In-Reply-To: <26269EA3-5AE8-43AF-989D-3C31B8A69D30@cs.usfca.edu>
References: <c1CB686F1-BFCB-4FA0-BB6F-8D15B01E4D16@cs.usfca.edu>
	<87mxhcn55k.fsf@sonic.technologeek.org>
	<BANLkTinw8roEbqyV-1tWnTLbtTgpdr_4rQ@mail.gmail.com>
	<87wrgglb6o.fsf@sonic.technologeek.org>
	<BANLkTi=pcXyZ2T85ocuvf7WjojL97z6Kvw@mail.gmail.com>
	<26269EA3-5AE8-43AF-989D-3C31B8A69D30@cs.usfca.edu>
Message-ID: <BANLkTik+diA_UJzfGQ5Qny9g74-BuzJKpQ@mail.gmail.com>

When will an updated AntlrWorks be available that uses Antlr 3.4?

From parrt at cs.usfca.edu  Mon Jun 20 15:19:39 2011
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon, 20 Jun 2011 15:19:39 -0700
Subject: [antlr-interest] test release of antlr 3.4
In-Reply-To: <BANLkTik+diA_UJzfGQ5Qny9g74-BuzJKpQ@mail.gmail.com>
References: <c1CB686F1-BFCB-4FA0-BB6F-8D15B01E4D16@cs.usfca.edu>
	<87mxhcn55k.fsf@sonic.technologeek.org>
	<BANLkTinw8roEbqyV-1tWnTLbtTgpdr_4rQ@mail.gmail.com>
	<87wrgglb6o.fsf@sonic.technologeek.org>
	<BANLkTi=pcXyZ2T85ocuvf7WjojL97z6Kvw@mail.gmail.com>
	<26269EA3-5AE8-43AF-989D-3C31B8A69D30@cs.usfca.edu>
	<BANLkTik+diA_UJzfGQ5Qny9g74-BuzJKpQ@mail.gmail.com>
Message-ID: <0F726E1F-FDB0-4351-925F-3978B113FAEB@cs.usfca.edu>

right after 3.4 is released
On Jun 20, 2011, at 3:17 PM, Douglas Godfrey wrote:

> When will an updated AntlrWorks be available that uses Antlr 3.4?
> 
> 


From michael.bedward at gmail.com  Mon Jun 20 23:59:19 2011
From: michael.bedward at gmail.com (Michael Bedward)
Date: Tue, 21 Jun 2011 16:59:19 +1000
Subject: [antlr-interest] test release of antlr 3.4
In-Reply-To: <0F726E1F-FDB0-4351-925F-3978B113FAEB@cs.usfca.edu>
References: <c1CB686F1-BFCB-4FA0-BB6F-8D15B01E4D16@cs.usfca.edu>
	<87mxhcn55k.fsf@sonic.technologeek.org>
	<BANLkTinw8roEbqyV-1tWnTLbtTgpdr_4rQ@mail.gmail.com>
	<87wrgglb6o.fsf@sonic.technologeek.org>
	<BANLkTi=pcXyZ2T85ocuvf7WjojL97z6Kvw@mail.gmail.com>
	<26269EA3-5AE8-43AF-989D-3C31B8A69D30@cs.usfca.edu>
	<BANLkTik+diA_UJzfGQ5Qny9g74-BuzJKpQ@mail.gmail.com>
	<0F726E1F-FDB0-4351-925F-3978B113FAEB@cs.usfca.edu>
Message-ID: <BANLkTikkL72zCHH2W8k7=RyqWVkGqMK7qw@mail.gmail.com>

Hi Ter and all,

Regarding backwards compatibility with ANTLR 3.3 and ST 3.x, will
there eventually be a new output option for ST4 ?  Something like
"output = templatev4" ?

This age about hacking ANTLR to work with ST4 doesn't mention that...
http://www.antlr.org/wiki/display/ANTLR3/Converting+the+ANTLR+v3+runtime+to+use+ST+v4+instead+of+ST+v3

Michael

From wiedau at aixcape.org  Tue Jun 21 02:21:21 2011
From: wiedau at aixcape.org (Michael Wiedau)
Date: Tue, 21 Jun 2011 11:21:21 +0200
Subject: [antlr-interest] A grammar in different files?
Message-ID: <003801cc2ff4$96192de0$c24b89a0$@org>

Hello everybody,

I am looking for a way to split a grammar in two or more files. 
We are generating a grammar automatically using xText and xPand. This makes
the grammar .g-file to grow bigger and bigger which is quite unhandy.

Is there any import-statement or anything to spread the ANTLR grammar over
multiple files?

Hope you can help me. 
Best regards, 
Michael





From michael.bedward at gmail.com  Tue Jun 21 03:33:08 2011
From: michael.bedward at gmail.com (Michael Bedward)
Date: Tue, 21 Jun 2011 20:33:08 +1000
Subject: [antlr-interest] A grammar in different files?
In-Reply-To: <003801cc2ff4$96192de0$c24b89a0$@org>
References: <003801cc2ff4$96192de0$c24b89a0$@org>
Message-ID: <BANLkTi=-a9XFbhc-QPjU-c9JFHOmUYaDrw@mail.gmail.com>

This page in the wiki should help...

http://www.antlr.org/wiki/display/ANTLR3/Composite+Grammars

Michael

On 21 June 2011 19:21, Michael Wiedau <wiedau at aixcape.org> wrote:
> Hello everybody,
>
> I am looking for a way to split a grammar in two or more files.
> We are generating a grammar automatically using xText and xPand. This makes
> the grammar .g-file to grow bigger and bigger which is quite unhandy.
>
> Is there any import-statement or anything to spread the ANTLR grammar over
> multiple files?
>
> Hope you can help me.
> Best regards,
> Michael
>
>
>
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>

From parrt at cs.usfca.edu  Tue Jun 21 09:55:06 2011
From: parrt at cs.usfca.edu (Terence Parr)
Date: Tue, 21 Jun 2011 09:55:06 -0700
Subject: [antlr-interest] test release of antlr 3.4
In-Reply-To: <BANLkTikkL72zCHH2W8k7=RyqWVkGqMK7qw@mail.gmail.com>
References: <c1CB686F1-BFCB-4FA0-BB6F-8D15B01E4D16@cs.usfca.edu>
	<87mxhcn55k.fsf@sonic.technologeek.org>
	<BANLkTinw8roEbqyV-1tWnTLbtTgpdr_4rQ@mail.gmail.com>
	<87wrgglb6o.fsf@sonic.technologeek.org>
	<BANLkTi=pcXyZ2T85ocuvf7WjojL97z6Kvw@mail.gmail.com>
	<26269EA3-5AE8-43AF-989D-3C31B8A69D30@cs.usfca.edu>
	<BANLkTik+diA_UJzfGQ5Qny9g74-BuzJKpQ@mail.gmail.com>
	<0F726E1F-FDB0-4351-925F-3978B113FAEB@cs.usfca.edu>
	<BANLkTikkL72zCHH2W8k7=RyqWVkGqMK7qw@mail.gmail.com>
Message-ID: <2515ABDB-CD73-41BB-B0F2-3B47BA46511D@cs.usfca.edu>


On Jun 20, 2011, at 11:59 PM, Michael Bedward wrote:

> Hi Ter and all,
> 
> Regarding backwards compatibility with ANTLR 3.3 and ST 3.x, will
> there eventually be a new output option for ST4 ?  Something like
> "output = templatev4" ?

Could be for 3.x, but certainly for 4.0 :)

> This age about hacking ANTLR to work with ST4 doesn't mention that...
> http://www.antlr.org/wiki/display/ANTLR3/Converting+the+ANTLR+v3+runtime+to+use+ST+v4+instead+of+ST+v3

I can't remember why i did that! man am i getting old!  But, for now i gotta keep ST3 but maybe ANTLR 3.5?
Ter

From parrt at cs.usfca.edu  Tue Jun 21 20:11:56 2011
From: parrt at cs.usfca.edu (Terence Parr)
Date: Tue, 21 Jun 2011 20:11:56 -0700
Subject: [antlr-interest] test release of antlr 3.4
In-Reply-To: <87mxhcn55k.fsf@sonic.technologeek.org>
References: <c1CB686F1-BFCB-4FA0-BB6F-8D15B01E4D16@cs.usfca.edu>
	<87mxhcn55k.fsf@sonic.technologeek.org>
Message-ID: <E0C3B285-D01C-4A65-B85D-6FB644F8E1D2@cs.usfca.edu>

ok, fixed up the C target. please try again.

> http://antlr.org/download/antlr-3.4rc2-complete.jar
> http://antlr.org/download/antlr-3.4rc2.jar

Ter
On Jun 20, 2011, at 3:55 AM, Julien BLACHE wrote:

> Hi,
> 
>> The other thing is that the C target has not been tested at all
>> really. If someone could report back on how it works, that would be
>> great ( including the debugging socket protocol to ANTLRWorks).
> 
> I gave it a very quick try on my grammars (written for 3.2) and it
> doesn't look good :/ I've been following the list for some time but I
> can't remember what, if any, adaptations are needed for 3.4, so I'll
> check back on that (pointers appreciated if you have some handy).
> 
> Where can I find the C runtime for 3.4? The download directory still has
> an old 3.3 snapshot.
> 
> Right now the code generated by antlr is incomplete; generated C files
> are much shorter than those generated by 3.2 and actions are missing
> entirely in my AST grammar.
> 
> Quick comparison, line counts:
>                ANTLR 3.2    ANTLR 3.4
> DAAP2SQL.c        927          585
> DAAPLexer.c       1092         934
> DAAPParser.c      1014         901
> 
> A showstopper for C code is that -depends is broken; the only output is:
> /dependencies()
> 
> There also seems to be an issue wrt locale settings; unless running with
> LC_ALL=C, antlr bails out on me looking for
> org/antlr/tool/templates/messages/languages/fr.stg.
> 
> Cosmetic issue, but still, -version returns:
> ANTLR Parser Generator  Version ${project.version} ${buildNumber}
> 
> JB.
> 
> -- 
> Julien BLACHE                                   <http://www.jblache.org> 
> <jb at jblache.org>                                  GPG KeyID 0xF5D65169
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address


From gokul007 at gmail.com  Tue Jun 21 22:05:23 2011
From: gokul007 at gmail.com (Gokulakannan Somasundaram)
Date: Wed, 22 Jun 2011 13:05:23 +0800
Subject: [antlr-interest] test release of antlr 3.4
In-Reply-To: <E0C3B285-D01C-4A65-B85D-6FB644F8E1D2@cs.usfca.edu>
References: <c1CB686F1-BFCB-4FA0-BB6F-8D15B01E4D16@cs.usfca.edu>
	<87mxhcn55k.fsf@sonic.technologeek.org>
	<E0C3B285-D01C-4A65-B85D-6FB644F8E1D2@cs.usfca.edu>
Message-ID: <BANLkTinQYHqRBJOg=KhTbvOs_mUgdwxf-w@mail.gmail.com>

Jim,
    Is the reset Parser and lexer functionality included with this release?
Please include the support for multiple levels of inheritance also, if
possible. I remember sending you the patch sometime back. Please let me
know, if you need it.

Thanks,
Gokul.


On Wed, Jun 22, 2011 at 11:11 AM, Terence Parr <parrt at cs.usfca.edu> wrote:

> ok, fixed up the C target. please try again.
>
> > http://antlr.org/download/antlr-3.4rc2-complete.jar
> > http://antlr.org/download/antlr-3.4rc2.jar
>
> Ter
> On Jun 20, 2011, at 3:55 AM, Julien BLACHE wrote:
>
> > Hi,
> >
> >> The other thing is that the C target has not been tested at all
> >> really. If someone could report back on how it works, that would be
> >> great ( including the debugging socket protocol to ANTLRWorks).
> >
> > I gave it a very quick try on my grammars (written for 3.2) and it
> > doesn't look good :/ I've been following the list for some time but I
> > can't remember what, if any, adaptations are needed for 3.4, so I'll
> > check back on that (pointers appreciated if you have some handy).
> >
> > Where can I find the C runtime for 3.4? The download directory still has
> > an old 3.3 snapshot.
> >
> > Right now the code generated by antlr is incomplete; generated C files
> > are much shorter than those generated by 3.2 and actions are missing
> > entirely in my AST grammar.
> >
> > Quick comparison, line counts:
> >                ANTLR 3.2    ANTLR 3.4
> > DAAP2SQL.c        927          585
> > DAAPLexer.c       1092         934
> > DAAPParser.c      1014         901
> >
> > A showstopper for C code is that -depends is broken; the only output is:
> > /dependencies()
> >
> > There also seems to be an issue wrt locale settings; unless running with
> > LC_ALL=C, antlr bails out on me looking for
> > org/antlr/tool/templates/messages/languages/fr.stg.
> >
> > Cosmetic issue, but still, -version returns:
> > ANTLR Parser Generator  Version ${project.version} ${buildNumber}
> >
> > JB.
> >
> > --
> > Julien BLACHE                                   <http://www.jblache.org>
> > <jb at jblache.org>                                  GPG KeyID 0xF5D65169
> >
> > List: http://www.antlr.org/mailman/listinfo/antlr-interest
> > Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>

From gokul007 at gmail.com  Tue Jun 21 22:06:29 2011
From: gokul007 at gmail.com (Gokulakannan Somasundaram)
Date: Wed, 22 Jun 2011 13:06:29 +0800
Subject: [antlr-interest] test release of antlr 3.4
In-Reply-To: <BANLkTinQYHqRBJOg=KhTbvOs_mUgdwxf-w@mail.gmail.com>
References: <c1CB686F1-BFCB-4FA0-BB6F-8D15B01E4D16@cs.usfca.edu>
	<87mxhcn55k.fsf@sonic.technologeek.org>
	<E0C3B285-D01C-4A65-B85D-6FB644F8E1D2@cs.usfca.edu>
	<BANLkTinQYHqRBJOg=KhTbvOs_mUgdwxf-w@mail.gmail.com>
Message-ID: <BANLkTinyg=AwN9sKEngDE+0FkzJJM1ZT0g@mail.gmail.com>

Just to clarify, the mail above was related to the C-Target.

Gokul.

On Wed, Jun 22, 2011 at 1:05 PM, Gokulakannan Somasundaram <
gokul007 at gmail.com> wrote:

> Jim,
>     Is the reset Parser and lexer functionality included with this release?
> Please include the support for multiple levels of inheritance also, if
> possible. I remember sending you the patch sometime back. Please let me
> know, if you need it.
>
> Thanks,
> Gokul.
>
>
>
> On Wed, Jun 22, 2011 at 11:11 AM, Terence Parr <parrt at cs.usfca.edu> wrote:
>
>> ok, fixed up the C target. please try again.
>>
>> > http://antlr.org/download/antlr-3.4rc2-complete.jar
>> > http://antlr.org/download/antlr-3.4rc2.jar
>>
>> Ter
>> On Jun 20, 2011, at 3:55 AM, Julien BLACHE wrote:
>>
>> > Hi,
>> >
>> >> The other thing is that the C target has not been tested at all
>> >> really. If someone could report back on how it works, that would be
>> >> great ( including the debugging socket protocol to ANTLRWorks).
>> >
>> > I gave it a very quick try on my grammars (written for 3.2) and it
>> > doesn't look good :/ I've been following the list for some time but I
>> > can't remember what, if any, adaptations are needed for 3.4, so I'll
>> > check back on that (pointers appreciated if you have some handy).
>> >
>> > Where can I find the C runtime for 3.4? The download directory still has
>> > an old 3.3 snapshot.
>> >
>> > Right now the code generated by antlr is incomplete; generated C files
>> > are much shorter than those generated by 3.2 and actions are missing
>> > entirely in my AST grammar.
>> >
>> > Quick comparison, line counts:
>> >                ANTLR 3.2    ANTLR 3.4
>> > DAAP2SQL.c        927          585
>> > DAAPLexer.c       1092         934
>> > DAAPParser.c      1014         901
>> >
>> > A showstopper for C code is that -depends is broken; the only output is:
>> > /dependencies()
>> >
>> > There also seems to be an issue wrt locale settings; unless running with
>> > LC_ALL=C, antlr bails out on me looking for
>> > org/antlr/tool/templates/messages/languages/fr.stg.
>> >
>> > Cosmetic issue, but still, -version returns:
>> > ANTLR Parser Generator  Version ${project.version} ${buildNumber}
>> >
>> > JB.
>> >
>> > --
>> > Julien BLACHE                                   <http://www.jblache.org
>> >
>> > <jb at jblache.org>                                  GPG KeyID 0xF5D65169
>> >
>> > List: http://www.antlr.org/mailman/listinfo/antlr-interest
>> > Unsubscribe:
>> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>>
>>
>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>> Unsubscribe:
>> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>>
>
>

From sadie at kind.ocn.ne.jp  Tue Jun 21 22:29:02 2011
From: sadie at kind.ocn.ne.jp (sunao furukawa)
Date: Wed, 22 Jun 2011 14:29:02 +0900
Subject: [antlr-interest] Question about PL/0 grammar
Message-ID: <3C958233E6B44E649E66D925DE5E2048@sunaoPC>

Hello,Everybody.
I wrote grammar file from PL/0 ebnf.
But Antlrworks emitted "Break on Enter subrule",then at event "Enter subrule 
2".
I want to proceed parsing grammar file.
Please give me advice,or where to read "The Definitive ANTLR Reference".

Thanks.


<Debug INPUT Script>
const
  m =  7,
  n = 85;

var
  x, y, z, q, r;

procedure multiply;
var a, b;

begin
  a := x;
  b := y;
  z := 0;
  while b > 0 do begin
    if odd b then z := z + a;
    a := 2 * a;
    b := b / 2;
  end
end;

procedure divide;
var w;
begin
  r := x;
  q := 0;
  w := y;
  while w <= r do w := 2 * w;
  while w > y do begin
    q := 2 * q;
    w := w / 2;
    if w <= r then begin
      r := r - w;
      q := q + 1
    end
  end
end;

procedure gcd;
var f, g;
begin
  f := x;
  g := y;
  while f # g do begin
    if f < g then g := g - f;
    if g < f then f := f - g;
  end;
  z := f
end;

begin
  x := m;
  y := n;
  call multiply;
  x := 25;
  y :=  3;
  call divide;
  x := 84;
  y := 36;
  call gcd;
end.
-------------- next part --------------
A non-text attachment was scrubbed...
Name: pl0.g
Type: application/octet-stream
Size: 1661 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20110622/777f8292/attachment.obj 

From hermenierfabien at gmail.com  Tue Jun 21 23:04:35 2011
From: hermenierfabien at gmail.com (Fabien Hermenier)
Date: Wed, 22 Jun 2011 00:04:35 -0600
Subject: [antlr-interest] Token Stream Rewriting
Message-ID: <4E0185F3.6040306@gmail.com>

Hi

I have some troubles with token stream rewriting. Below is the piece of 
ANTLR code. I have a grammar, with an AST as output and Java
as the target. I want to insert a sequence of token into the stream.

I have followed the page 
http://www.antlr.org/wiki/display/~admin/2007/06/28/Token+stream+rewriting+with+rewrite+rules 
and adapted the example that interest me. A piece of the code is 
following. Basically, in the alternative of 'explodedSet', I get the 
return values of other rules and do some stuff in the merge method. This 
one returns a list of String as explained in the online example.


explodedSet: '{' (setContent (',' setContent)*)? '}' -> ^(EXPLODED_SET 
setContent+)
     | {List l = new LinkedList();}LEFTY 
r1=brace_content{l.add($r1.ret);} (',' 
r2=brace_content{l.add($r2.ret);})* RIGHTY
     -> {
     merge($LEFTY.text,l,$RIGHTY.text)
     };

brace_content returns [List ret]:
          st=number ('..' ed=number)? {$ret = new LinkedList(); for (int 
i = $st.val; i <= $ed.val; i++) {$ret.add(i);}}
            | NAME {$ret = new LinkedList(); $ret.add($NAME.text);};

The code compiles well but at runtime, I've got this exception:

Caused by: java.lang.ClassCastException: java.util.ArrayList cannot be 
cast to org.antlr.runtime.tree.Tree
     at 
org.antlr.runtime.tree.BaseTreeAdaptor.addChild(BaseTreeAdaptor.java:107)
     at Parser.explodedSet(Parser.java:560)

So, the return value of merge does not seems to be converted into tokens 
nor Tree. Does someone has an idea ?


Fabien.

From bkiers at gmail.com  Tue Jun 21 23:28:19 2011
From: bkiers at gmail.com (Bart Kiers)
Date: Wed, 22 Jun 2011 08:28:19 +0200
Subject: [antlr-interest] Token Stream Rewriting
In-Reply-To: <4E0185F3.6040306@gmail.com>
References: <4E0185F3.6040306@gmail.com>
Message-ID: <BANLkTik8kLK6MUtvt4ooEFZUUJAaLNhDPA@mail.gmail.com>

Is your `merge(String, List, String)` method returning a java.util.ArrayList
instead of a Tree?

Regards,

Bart.


On Wed, Jun 22, 2011 at 8:04 AM, Fabien Hermenier <hermenierfabien at gmail.com
> wrote:

> Hi
>
> I have some troubles with token stream rewriting. Below is the piece of
> ANTLR code. I have a grammar, with an AST as output and Java
> as the target. I want to insert a sequence of token into the stream.
>
> I have followed the page
>
> http://www.antlr.org/wiki/display/~admin/2007/06/28/Token+stream+rewriting+with+rewrite+rules
> and adapted the example that interest me. A piece of the code is
> following. Basically, in the alternative of 'explodedSet', I get the
> return values of other rules and do some stuff in the merge method. This
> one returns a list of String as explained in the online example.
>
>
> explodedSet: '{' (setContent (',' setContent)*)? '}' -> ^(EXPLODED_SET
> setContent+)
>     | {List l = new LinkedList();}LEFTY
> r1=brace_content{l.add($r1.ret);} (','
> r2=brace_content{l.add($r2.ret);})* RIGHTY
>     -> {
>     merge($LEFTY.text,l,$RIGHTY.text)
>     };
>
> brace_content returns [List ret]:
>          st=number ('..' ed=number)? {$ret = new LinkedList(); for (int
> i = $st.val; i <= $ed.val; i++) {$ret.add(i);}}
>            | NAME {$ret = new LinkedList(); $ret.add($NAME.text);};
>
> The code compiles well but at runtime, I've got this exception:
>
> Caused by: java.lang.ClassCastException: java.util.ArrayList cannot be
> cast to org.antlr.runtime.tree.Tree
>     at
> org.antlr.runtime.tree.BaseTreeAdaptor.addChild(BaseTreeAdaptor.java:107)
>     at Parser.explodedSet(Parser.java:560)
>
> So, the return value of merge does not seems to be converted into tokens
> nor Tree. Does someone has an idea ?
>
>
> Fabien.
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>

From hermenierfabien at gmail.com  Tue Jun 21 23:30:31 2011
From: hermenierfabien at gmail.com (Fabien Hermenier)
Date: Wed, 22 Jun 2011 00:30:31 -0600
Subject: [antlr-interest] Token Stream Rewriting
In-Reply-To: <BANLkTik8kLK6MUtvt4ooEFZUUJAaLNhDPA@mail.gmail.com>
References: <4E0185F3.6040306@gmail.com>
	<BANLkTik8kLK6MUtvt4ooEFZUUJAaLNhDPA@mail.gmail.com>
Message-ID: <4E018C07.4040904@gmail.com>

In fact, I've badly readed the help. So yet, it is running a String that 
should be tokenized (then translated into tree I suppose) at run time.

Le 22/06/11 00:28, Bart Kiers a ?crit :
> Is your `merge(String, List, String)` method returning 
> a java.util.ArrayList instead of a Tree?
>
> Regards,
>
> Bart.
>
>
> On Wed, Jun 22, 2011 at 8:04 AM, Fabien Hermenier 
> <hermenierfabien at gmail.com <mailto:hermenierfabien at gmail.com>> wrote:
>
>     Hi
>
>     I have some troubles with token stream rewriting. Below is the
>     piece of
>     ANTLR code. I have a grammar, with an AST as output and Java
>     as the target. I want to insert a sequence of token into the stream.
>
>     I have followed the page
>     http://www.antlr.org/wiki/display/~admin/2007/06/28/Token+stream+rewriting+with+rewrite+rules
>     <http://www.antlr.org/wiki/display/%7Eadmin/2007/06/28/Token+stream+rewriting+with+rewrite+rules>
>     and adapted the example that interest me. A piece of the code is
>     following. Basically, in the alternative of 'explodedSet', I get the
>     return values of other rules and do some stuff in the merge
>     method. This
>     one returns a list of String as explained in the online example.
>
>
>     explodedSet: '{' (setContent (',' setContent)*)? '}' -> ^(EXPLODED_SET
>     setContent+)
>         | {List l = new LinkedList();}LEFTY
>     r1=brace_content{l.add($r1.ret);} (','
>     r2=brace_content{l.add($r2.ret);})* RIGHTY
>         -> {
>         merge($LEFTY.text,l,$RIGHTY.text)
>         };
>
>     brace_content returns [List ret]:
>              st=number ('..' ed=number)? {$ret = new LinkedList(); for
>     (int
>     i = $st.val; i <= $ed.val; i++) {$ret.add(i);}}
>                | NAME {$ret = new LinkedList(); $ret.add($NAME.text);};
>
>     The code compiles well but at runtime, I've got this exception:
>
>     Caused by: java.lang.ClassCastException: java.util.ArrayList cannot be
>     cast to org.antlr.runtime.tree.Tree
>         at
>     org.antlr.runtime.tree.BaseTreeAdaptor.addChild(BaseTreeAdaptor.java:107)
>         at Parser.explodedSet(Parser.java:560)
>
>     So, the return value of merge does not seems to be converted into
>     tokens
>     nor Tree. Does someone has an idea ?
>
>
>     Fabien.
>
>     List: http://www.antlr.org/mailman/listinfo/antlr-interest
>     Unsubscribe:
>     http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>
>


-- 
Fabien Hermenier
Postdoctoral researcher at Flux
http://sites.google.com/site/hermenierfabien/home


From bkiers at gmail.com  Tue Jun 21 23:36:26 2011
From: bkiers at gmail.com (Bart Kiers)
Date: Wed, 22 Jun 2011 08:36:26 +0200
Subject: [antlr-interest] Token Stream Rewriting
In-Reply-To: <4E018C07.4040904@gmail.com>
References: <4E0185F3.6040306@gmail.com>
	<BANLkTik8kLK6MUtvt4ooEFZUUJAaLNhDPA@mail.gmail.com>
	<4E018C07.4040904@gmail.com>
Message-ID: <BANLkTimrbeC73rgAPLY8mZwjrxmd5UwYYw@mail.gmail.com>

Fabien, but what is the return type of  this `merge(...)` method? Could you
post the method? Or even better: post a SSCCE <http://sscce.org>that causes
such an exception?

Regards,

Bart.


On Wed, Jun 22, 2011 at 8:30 AM, Fabien Hermenier <hermenierfabien at gmail.com
> wrote:

> In fact, I've badly readed the help. So yet, it is running a String that
> should be tokenized (then translated into tree I suppose) at run time.
>
> Le 22/06/11 00:28, Bart Kiers a ?crit :
> > Is your `merge(String, List, String)` method returning
> > a java.util.ArrayList instead of a Tree?
> >
> > Regards,
> >
> > Bart.
> >
> >
> > On Wed, Jun 22, 2011 at 8:04 AM, Fabien Hermenier
> > <hermenierfabien at gmail.com <mailto:hermenierfabien at gmail.com>> wrote:
> >
> >     Hi
> >
> >     I have some troubles with token stream rewriting. Below is the
> >     piece of
> >     ANTLR code. I have a grammar, with an AST as output and Java
> >     as the target. I want to insert a sequence of token into the stream.
> >
> >     I have followed the page
> >
> http://www.antlr.org/wiki/display/~admin/2007/06/28/Token+stream+rewriting+with+rewrite+rules
> >     <
> http://www.antlr.org/wiki/display/%7Eadmin/2007/06/28/Token+stream+rewriting+with+rewrite+rules
> >
> >     and adapted the example that interest me. A piece of the code is
> >     following. Basically, in the alternative of 'explodedSet', I get the
> >     return values of other rules and do some stuff in the merge
> >     method. This
> >     one returns a list of String as explained in the online example.
> >
> >
> >     explodedSet: '{' (setContent (',' setContent)*)? '}' ->
> ^(EXPLODED_SET
> >     setContent+)
> >         | {List l = new LinkedList();}LEFTY
> >     r1=brace_content{l.add($r1.ret);} (','
> >     r2=brace_content{l.add($r2.ret);})* RIGHTY
> >         -> {
> >         merge($LEFTY.text,l,$RIGHTY.text)
> >         };
> >
> >     brace_content returns [List ret]:
> >              st=number ('..' ed=number)? {$ret = new LinkedList(); for
> >     (int
> >     i = $st.val; i <= $ed.val; i++) {$ret.add(i);}}
> >                | NAME {$ret = new LinkedList(); $ret.add($NAME.text);};
> >
> >     The code compiles well but at runtime, I've got this exception:
> >
> >     Caused by: java.lang.ClassCastException: java.util.ArrayList cannot
> be
> >     cast to org.antlr.runtime.tree.Tree
> >         at
> >
> org.antlr.runtime.tree.BaseTreeAdaptor.addChild(BaseTreeAdaptor.java:107)
> >         at Parser.explodedSet(Parser.java:560)
> >
> >     So, the return value of merge does not seems to be converted into
> >     tokens
> >     nor Tree. Does someone has an idea ?
> >
> >
> >     Fabien.
> >
> >     List: http://www.antlr.org/mailman/listinfo/antlr-interest
> >     Unsubscribe:
> >
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
> >
> >
>
>
> --
> Fabien Hermenier
> Postdoctoral researcher at Flux
> http://sites.google.com/site/hermenierfabien/home
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>

From hermenierfabien at gmail.com  Tue Jun 21 23:39:14 2011
From: hermenierfabien at gmail.com (Fabien Hermenier)
Date: Wed, 22 Jun 2011 00:39:14 -0600
Subject: [antlr-interest] Token Stream Rewriting
In-Reply-To: <BANLkTimrbeC73rgAPLY8mZwjrxmd5UwYYw@mail.gmail.com>
References: <4E0185F3.6040306@gmail.com>
	<BANLkTik8kLK6MUtvt4ooEFZUUJAaLNhDPA@mail.gmail.com>
	<4E018C07.4040904@gmail.com>
	<BANLkTimrbeC73rgAPLY8mZwjrxmd5UwYYw@mail.gmail.com>
Message-ID: <4E018E12.6070605@gmail.com>

merge(...) is returning a String.

Fabien.

Le 22/06/11 00:36, Bart Kiers a ?crit :
> Fabien, but what is the return type of  this `merge(...)` 
> method? Could you post the method? Or even better: post a SSCCE 
> <http://sscce.org>that causes such an exception?
>
> Regards,
>
> Bart.
>
>
> On Wed, Jun 22, 2011 at 8:30 AM, Fabien Hermenier 
> <hermenierfabien at gmail.com <mailto:hermenierfabien at gmail.com>> wrote:
>
>     In fact, I've badly readed the help. So yet, it is running a
>     String that
>     should be tokenized (then translated into tree I suppose) at run time.
>
>     Le 22/06/11 00:28, Bart Kiers a ?crit :
>     > Is your `merge(String, List, String)` method returning
>     > a java.util.ArrayList instead of a Tree?
>     >
>     > Regards,
>     >
>     > Bart.
>     >
>     >
>     > On Wed, Jun 22, 2011 at 8:04 AM, Fabien Hermenier
>     > <hermenierfabien at gmail.com <mailto:hermenierfabien at gmail.com>
>     <mailto:hermenierfabien at gmail.com
>     <mailto:hermenierfabien at gmail.com>>> wrote:
>     >
>     >     Hi
>     >
>     >     I have some troubles with token stream rewriting. Below is the
>     >     piece of
>     >     ANTLR code. I have a grammar, with an AST as output and Java
>     >     as the target. I want to insert a sequence of token into the
>     stream.
>     >
>     >     I have followed the page
>     >
>     http://www.antlr.org/wiki/display/~admin/2007/06/28/Token+stream+rewriting+with+rewrite+rules
>     <http://www.antlr.org/wiki/display/%7Eadmin/2007/06/28/Token+stream+rewriting+with+rewrite+rules>
>     >
>     <http://www.antlr.org/wiki/display/%7Eadmin/2007/06/28/Token+stream+rewriting+with+rewrite+rules>
>     >     and adapted the example that interest me. A piece of the code is
>     >     following. Basically, in the alternative of 'explodedSet', I
>     get the
>     >     return values of other rules and do some stuff in the merge
>     >     method. This
>     >     one returns a list of String as explained in the online example.
>     >
>     >
>     >     explodedSet: '{' (setContent (',' setContent)*)? '}' ->
>     ^(EXPLODED_SET
>     >     setContent+)
>     >         | {List l = new LinkedList();}LEFTY
>     >     r1=brace_content{l.add($r1.ret);} (','
>     >     r2=brace_content{l.add($r2.ret);})* RIGHTY
>     >         -> {
>     >         merge($LEFTY.text,l,$RIGHTY.text)
>     >         };
>     >
>     >     brace_content returns [List ret]:
>     >              st=number ('..' ed=number)? {$ret = new
>     LinkedList(); for
>     >     (int
>     >     i = $st.val; i <= $ed.val; i++) {$ret.add(i);}}
>     >                | NAME {$ret = new LinkedList();
>     $ret.add($NAME.text);};
>     >
>     >     The code compiles well but at runtime, I've got this exception:
>     >
>     >     Caused by: java.lang.ClassCastException: java.util.ArrayList
>     cannot be
>     >     cast to org.antlr.runtime.tree.Tree
>     >         at
>     >    
>     org.antlr.runtime.tree.BaseTreeAdaptor.addChild(BaseTreeAdaptor.java:107)
>     >         at Parser.explodedSet(Parser.java:560)
>     >
>     >     So, the return value of merge does not seems to be converted
>     into
>     >     tokens
>     >     nor Tree. Does someone has an idea ?
>     >
>     >
>     >     Fabien.
>     >
>     >     List: http://www.antlr.org/mailman/listinfo/antlr-interest
>     >     Unsubscribe:
>     >
>     http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>     >
>     >
>
>
>     --
>     Fabien Hermenier
>     Postdoctoral researcher at Flux
>     http://sites.google.com/site/hermenierfabien/home
>
>
>     List: http://www.antlr.org/mailman/listinfo/antlr-interest
>     Unsubscribe:
>     http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>
>


-- 
Fabien Hermenier
Postdoctoral researcher at Flux
http://sites.google.com/site/hermenierfabien/home


From bkiers at gmail.com  Tue Jun 21 23:45:09 2011
From: bkiers at gmail.com (Bart Kiers)
Date: Wed, 22 Jun 2011 08:45:09 +0200
Subject: [antlr-interest] Token Stream Rewriting
In-Reply-To: <4E018E12.6070605@gmail.com>
References: <4E0185F3.6040306@gmail.com>
	<BANLkTik8kLK6MUtvt4ooEFZUUJAaLNhDPA@mail.gmail.com>
	<4E018C07.4040904@gmail.com>
	<BANLkTimrbeC73rgAPLY8mZwjrxmd5UwYYw@mail.gmail.com>
	<4E018E12.6070605@gmail.com>
Message-ID: <BANLkTimpZmn45k9jbQb0O3Lbmh5evWTQ4g@mail.gmail.com>

Is it _really_ returning a String

*  private String merge(String s1, List lst, String s2) {*
*    ...*
*    return ...*
*  }*

?
Not an Object _you think_ is a String:

*  private Object merge(String s1, List lst, String s2) {*
*    ...*
*    return ...*
*  }*

?
I ask because the stack-trace you posted: "Caused by:
java.lang.ClassCastException: java.util.ArrayList" seems to suggest it is
an ArrayList.
Either way: a String or an ArrayList, both are wrong: that method needs to
return a Tree.

Bart.


On Wed, Jun 22, 2011 at 8:39 AM, Fabien Hermenier <hermenierfabien at gmail.com
> wrote:

>  merge(...) is returning a String.
>
> Fabien.
>
> Le 22/06/11 00:36, Bart Kiers a ?crit :
>
> Fabien, but what is the return type of  this `merge(...)` method? Could you
> post the method? Or even better: post a SSCCE <http://sscce.org>that
> causes such an exception?
>
>  Regards,
>
>  Bart.
>
>
> On Wed, Jun 22, 2011 at 8:30 AM, Fabien Hermenier <
> hermenierfabien at gmail.com> wrote:
>
>> In fact, I've badly readed the help. So yet, it is running a String that
>> should be tokenized (then translated into tree I suppose) at run time.
>>
>> Le 22/06/11 00:28, Bart Kiers a ?crit :
>> > Is your `merge(String, List, String)` method returning
>> > a java.util.ArrayList instead of a Tree?
>> >
>> > Regards,
>> >
>> > Bart.
>> >
>> >
>> > On Wed, Jun 22, 2011 at 8:04 AM, Fabien Hermenier
>>  > <hermenierfabien at gmail.com <mailto:hermenierfabien at gmail.com>> wrote:
>> >
>> >     Hi
>> >
>> >     I have some troubles with token stream rewriting. Below is the
>> >     piece of
>> >     ANTLR code. I have a grammar, with an AST as output and Java
>> >     as the target. I want to insert a sequence of token into the stream.
>> >
>> >     I have followed the page
>> >
>> http://www.antlr.org/wiki/display/~admin/2007/06/28/Token+stream+rewriting+with+rewrite+rules<http://www.antlr.org/wiki/display/%7Eadmin/2007/06/28/Token+stream+rewriting+with+rewrite+rules>
>>  >     <
>> http://www.antlr.org/wiki/display/%7Eadmin/2007/06/28/Token+stream+rewriting+with+rewrite+rules
>> >
>>  >     and adapted the example that interest me. A piece of the code is
>> >     following. Basically, in the alternative of 'explodedSet', I get the
>> >     return values of other rules and do some stuff in the merge
>> >     method. This
>> >     one returns a list of String as explained in the online example.
>> >
>> >
>> >     explodedSet: '{' (setContent (',' setContent)*)? '}' ->
>> ^(EXPLODED_SET
>> >     setContent+)
>> >         | {List l = new LinkedList();}LEFTY
>> >     r1=brace_content{l.add($r1.ret);} (','
>> >     r2=brace_content{l.add($r2.ret);})* RIGHTY
>> >         -> {
>> >         merge($LEFTY.text,l,$RIGHTY.text)
>> >         };
>> >
>> >     brace_content returns [List ret]:
>> >              st=number ('..' ed=number)? {$ret = new LinkedList(); for
>> >     (int
>> >     i = $st.val; i <= $ed.val; i++) {$ret.add(i);}}
>> >                | NAME {$ret = new LinkedList(); $ret.add($NAME.text);};
>> >
>> >     The code compiles well but at runtime, I've got this exception:
>> >
>> >     Caused by: java.lang.ClassCastException: java.util.ArrayList cannot
>> be
>> >     cast to org.antlr.runtime.tree.Tree
>> >         at
>> >
>> org.antlr.runtime.tree.BaseTreeAdaptor.addChild(BaseTreeAdaptor.java:107)
>> >         at Parser.explodedSet(Parser.java:560)
>> >
>> >     So, the return value of merge does not seems to be converted into
>> >     tokens
>> >     nor Tree. Does someone has an idea ?
>> >
>> >
>> >     Fabien.
>> >
>> >     List: http://www.antlr.org/mailman/listinfo/antlr-interest
>> >     Unsubscribe:
>> >
>> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>> >
>> >
>>
>>
>>  --
>> Fabien Hermenier
>> Postdoctoral researcher at Flux
>> http://sites.google.com/site/hermenierfabien/home
>>
>>
>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>> Unsubscribe:
>> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>>
>
>
>
> --
> Fabien Hermenier
> Postdoctoral researcher at Flux
> http://sites.google.com/site/hermenierfabien/home
>
>

From hermenierfabien at gmail.com  Tue Jun 21 23:49:04 2011
From: hermenierfabien at gmail.com (Fabien Hermenier)
Date: Wed, 22 Jun 2011 00:49:04 -0600
Subject: [antlr-interest] Token Stream Rewriting
In-Reply-To: <BANLkTimpZmn45k9jbQb0O3Lbmh5evWTQ4g@mail.gmail.com>
References: <4E0185F3.6040306@gmail.com>
	<BANLkTik8kLK6MUtvt4ooEFZUUJAaLNhDPA@mail.gmail.com>
	<4E018C07.4040904@gmail.com>
	<BANLkTimrbeC73rgAPLY8mZwjrxmd5UwYYw@mail.gmail.com>
	<4E018E12.6070605@gmail.com>
	<BANLkTimpZmn45k9jbQb0O3Lbmh5evWTQ4g@mail.gmail.com>
Message-ID: <4E019060.704@gmail.com>

Yes it was a String. In my previous mail, I've explained the List was an 
error, so the trace was not fine.
You say it as to return a Tree; I will work on this. I think I didn't 
understood the example on the webpage.

Thanks for your help.
Fabien.

Le 22/06/11 00:45, Bart Kiers a ?crit :
> Is it _really_ returning a String
>
> *  private String merge(String s1, List lst, String s2) {*
> *    ...*
> *    return ...*
> *  }*
>
> ?
> Not an Object _you think_ is a String:
>
> *  private Object merge(String s1, List lst, String s2) {*
> *    ...*
> *    return ...*
> *  }*
>
> ?
> I ask because the stack-trace you posted: "Caused by: 
> java.lang.ClassCastException: java.util.ArrayList" seems to suggest it 
> is an ArrayList.
> Either way: a String or an ArrayList, both are wrong: that method 
> needs to return a Tree.
>
> Bart.
>
>
> On Wed, Jun 22, 2011 at 8:39 AM, Fabien Hermenier 
> <hermenierfabien at gmail.com <mailto:hermenierfabien at gmail.com>> wrote:
>
>     merge(...) is returning a String.
>
>     Fabien.
>
>     Le 22/06/11 00:36, Bart Kiers a ?crit :
>>     Fabien, but what is the return type of  this `merge(...)`
>>     method? Could you post the method? Or even better: post a SSCCE
>>     <http://sscce.org>that causes such an exception?
>>
>>     Regards,
>>
>>     Bart.
>>
>>
>>     On Wed, Jun 22, 2011 at 8:30 AM, Fabien Hermenier
>>     <hermenierfabien at gmail.com <mailto:hermenierfabien at gmail.com>> wrote:
>>
>>         In fact, I've badly readed the help. So yet, it is running a
>>         String that
>>         should be tokenized (then translated into tree I suppose) at
>>         run time.
>>
>>         Le 22/06/11 00:28, Bart Kiers a ?crit :
>>         > Is your `merge(String, List, String)` method returning
>>         > a java.util.ArrayList instead of a Tree?
>>         >
>>         > Regards,
>>         >
>>         > Bart.
>>         >
>>         >
>>         > On Wed, Jun 22, 2011 at 8:04 AM, Fabien Hermenier
>>         > <hermenierfabien at gmail.com
>>         <mailto:hermenierfabien at gmail.com>
>>         <mailto:hermenierfabien at gmail.com
>>         <mailto:hermenierfabien at gmail.com>>> wrote:
>>         >
>>         >     Hi
>>         >
>>         >     I have some troubles with token stream rewriting. Below
>>         is the
>>         >     piece of
>>         >     ANTLR code. I have a grammar, with an AST as output and
>>         Java
>>         >     as the target. I want to insert a sequence of token
>>         into the stream.
>>         >
>>         >     I have followed the page
>>         >
>>         http://www.antlr.org/wiki/display/~admin/2007/06/28/Token+stream+rewriting+with+rewrite+rules
>>         <http://www.antlr.org/wiki/display/%7Eadmin/2007/06/28/Token+stream+rewriting+with+rewrite+rules>
>>         >
>>         <http://www.antlr.org/wiki/display/%7Eadmin/2007/06/28/Token+stream+rewriting+with+rewrite+rules>
>>         >     and adapted the example that interest me. A piece of
>>         the code is
>>         >     following. Basically, in the alternative of
>>         'explodedSet', I get the
>>         >     return values of other rules and do some stuff in the merge
>>         >     method. This
>>         >     one returns a list of String as explained in the online
>>         example.
>>         >
>>         >
>>         >     explodedSet: '{' (setContent (',' setContent)*)? '}' ->
>>         ^(EXPLODED_SET
>>         >     setContent+)
>>         >         | {List l = new LinkedList();}LEFTY
>>         >     r1=brace_content{l.add($r1.ret);} (','
>>         >     r2=brace_content{l.add($r2.ret);})* RIGHTY
>>         >         -> {
>>         >         merge($LEFTY.text,l,$RIGHTY.text)
>>         >         };
>>         >
>>         >     brace_content returns [List ret]:
>>         >              st=number ('..' ed=number)? {$ret = new
>>         LinkedList(); for
>>         >     (int
>>         >     i = $st.val; i <= $ed.val; i++) {$ret.add(i);}}
>>         >                | NAME {$ret = new LinkedList();
>>         $ret.add($NAME.text);};
>>         >
>>         >     The code compiles well but at runtime, I've got this
>>         exception:
>>         >
>>         >     Caused by: java.lang.ClassCastException:
>>         java.util.ArrayList cannot be
>>         >     cast to org.antlr.runtime.tree.Tree
>>         >         at
>>         >    
>>         org.antlr.runtime.tree.BaseTreeAdaptor.addChild(BaseTreeAdaptor.java:107)
>>         >         at Parser.explodedSet(Parser.java:560)
>>         >
>>         >     So, the return value of merge does not seems to be
>>         converted into
>>         >     tokens
>>         >     nor Tree. Does someone has an idea ?
>>         >
>>         >
>>         >     Fabien.
>>         >
>>         >     List: http://www.antlr.org/mailman/listinfo/antlr-interest
>>         >     Unsubscribe:
>>         >
>>         http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>>         >
>>         >
>>
>>
>>         --
>>         Fabien Hermenier
>>         Postdoctoral researcher at Flux
>>         http://sites.google.com/site/hermenierfabien/home
>>
>>
>>         List: http://www.antlr.org/mailman/listinfo/antlr-interest
>>         Unsubscribe:
>>         http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>>
>>
>
>
>     -- 
>     Fabien Hermenier
>     Postdoctoral researcher at Flux
>     http://sites.google.com/site/hermenierfabien/home
>
>


-- 
Fabien Hermenier
Postdoctoral researcher at Flux
http://sites.google.com/site/hermenierfabien/home


From jb at jblache.org  Wed Jun 22 03:08:12 2011
From: jb at jblache.org (Julien BLACHE)
Date: Wed, 22 Jun 2011 12:08:12 +0200
Subject: [antlr-interest] test release of antlr 3.4
In-Reply-To: <E0C3B285-D01C-4A65-B85D-6FB644F8E1D2@cs.usfca.edu> (Terence
	Parr's message of "Tue, 21 Jun 2011 20:11:56 -0700")
References: <c1CB686F1-BFCB-4FA0-BB6F-8D15B01E4D16@cs.usfca.edu>
	<87mxhcn55k.fsf@sonic.technologeek.org>
	<E0C3B285-D01C-4A65-B85D-6FB644F8E1D2@cs.usfca.edu>
Message-ID: <87aadap4ab.fsf@sonic.technologeek.org>

Terence Parr <parrt at cs.usfca.edu> wrote:

Hi,

> ok, fixed up the C target. please try again.
>
>> http://antlr.org/download/antlr-3.4rc2-complete.jar
>> http://antlr.org/download/antlr-3.4rc2.jar

Looks way better! Now I guess we need to let Jim come up with the
matching runtime to try it out for real and see if it builds & runs as
intended.

Thanks,

JB.

-- 
Julien BLACHE                                   <http://www.jblache.org> 
<jb at jblache.org>                                  GPG KeyID 0xF5D65169

From jimi at temporal-wave.com  Wed Jun 22 07:38:06 2011
From: jimi at temporal-wave.com (Jim Idle)
Date: Wed, 22 Jun 2011 07:38:06 -0700
Subject: [antlr-interest] test release of antlr 3.4
In-Reply-To: <BANLkTinQYHqRBJOg=KhTbvOs_mUgdwxf-w@mail.gmail.com>
References: <c1CB686F1-BFCB-4FA0-BB6F-8D15B01E4D16@cs.usfca.edu>
	<87mxhcn55k.fsf@sonic.technologeek.org>	<E0C3B285-D01C-4A65-B85D-6FB644F8E1D2@cs.usfca.edu>
	<BANLkTinQYHqRBJOg=KhTbvOs_mUgdwxf-w@mail.gmail.com>
Message-ID: <d38315ec18ed7243cfaa59a40ce3c8eb@mail.gmail.com>

Yes, it is but now I have to tests and release the runtime, which I will
be doing over the next few hours. I have your patch somewhere but I did
not use it yet because something bothered me about it and I don't remember
what yet. However, I will be fixing everything that I can this
morning/today.

Jim

> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of Gokulakannan Somasundaram
> Sent: Tuesday, June 21, 2011 10:05 PM
> To: Terence Parr
> Cc: antlr-interest at antlr.org
> Subject: Re: [antlr-interest] test release of antlr 3.4
>
> Jim,
>     Is the reset Parser and lexer functionality included with this
> release?
> Please include the support for multiple levels of inheritance also, if
> possible. I remember sending you the patch sometime back. Please let me
> know, if you need it.
>
> Thanks,
> Gokul.
>
>
> On Wed, Jun 22, 2011 at 11:11 AM, Terence Parr <parrt at cs.usfca.edu>
> wrote:
>
> > ok, fixed up the C target. please try again.
> >
> > > http://antlr.org/download/antlr-3.4rc2-complete.jar
> > > http://antlr.org/download/antlr-3.4rc2.jar
> >
> > Ter
> > On Jun 20, 2011, at 3:55 AM, Julien BLACHE wrote:
> >
> > > Hi,
> > >
> > >> The other thing is that the C target has not been tested at all
> > >> really. If someone could report back on how it works, that would
> be
> > >> great ( including the debugging socket protocol to ANTLRWorks).
> > >
> > > I gave it a very quick try on my grammars (written for 3.2) and it
> > > doesn't look good :/ I've been following the list for some time but
> > > I can't remember what, if any, adaptations are needed for 3.4, so
> > > I'll check back on that (pointers appreciated if you have some
> handy).
> > >
> > > Where can I find the C runtime for 3.4? The download directory
> still
> > > has an old 3.3 snapshot.
> > >
> > > Right now the code generated by antlr is incomplete; generated C
> > > files are much shorter than those generated by 3.2 and actions are
> > > missing entirely in my AST grammar.
> > >
> > > Quick comparison, line counts:
> > >                ANTLR 3.2    ANTLR 3.4
> > > DAAP2SQL.c        927          585
> > > DAAPLexer.c       1092         934
> > > DAAPParser.c      1014         901
> > >
> > > A showstopper for C code is that -depends is broken; the only
> output is:
> > > /dependencies()
> > >
> > > There also seems to be an issue wrt locale settings; unless running
> > > with LC_ALL=C, antlr bails out on me looking for
> > > org/antlr/tool/templates/messages/languages/fr.stg.
> > >
> > > Cosmetic issue, but still, -version returns:
> > > ANTLR Parser Generator  Version ${project.version} ${buildNumber}
> > >
> > > JB.
> > >
> > > --
> > > Julien BLACHE
> <http://www.jblache.org>
> > > <jb at jblache.org>                                  GPG KeyID
> 0xF5D65169
> > >
> > > List: http://www.antlr.org/mailman/listinfo/antlr-interest
> > > Unsubscribe:
> > http://www.antlr.org/mailman/options/antlr-interest/your-email-
> address
> >
> >
> > List: http://www.antlr.org/mailman/listinfo/antlr-interest
> > Unsubscribe:
> > http://www.antlr.org/mailman/options/antlr-interest/your-email-
> address
> >
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
> email-address

From gokul007 at gmail.com  Wed Jun 22 07:43:28 2011
From: gokul007 at gmail.com (Gokulakannan Somasundaram)
Date: Wed, 22 Jun 2011 22:43:28 +0800
Subject: [antlr-interest] test release of antlr 3.4
In-Reply-To: <d38315ec18ed7243cfaa59a40ce3c8eb@mail.gmail.com>
References: <c1CB686F1-BFCB-4FA0-BB6F-8D15B01E4D16@cs.usfca.edu>
	<87mxhcn55k.fsf@sonic.technologeek.org>
	<E0C3B285-D01C-4A65-B85D-6FB644F8E1D2@cs.usfca.edu>
	<BANLkTinQYHqRBJOg=KhTbvOs_mUgdwxf-w@mail.gmail.com>
	<d38315ec18ed7243cfaa59a40ce3c8eb@mail.gmail.com>
Message-ID: <BANLkTik-nZw-bA0AB0xOSqfWZjoR8UDFeg@mail.gmail.com>

On Wed, Jun 22, 2011 at 10:38 PM, Jim Idle <jimi at temporal-wave.com> wrote:

> Yes, it is but now I have to tests and release the runtime, which I will
> be doing over the next few hours. I have your patch somewhere but I did
> not use it yet because something bothered me about it and I don't remember
> what yet. However, I will be fixing everything that I can this
> morning/today.
>
> Jim
>
> Thanks Jim....

Gokul.

From joeymink at gmail.com  Wed Jun 22 14:26:03 2011
From: joeymink at gmail.com (Joey Mink)
Date: Wed, 22 Jun 2011 17:26:03 -0400
Subject: [antlr-interest] ANTLR 3 and Maven 3
Message-ID: <BANLkTim_MANkjCEFn=deYKo=X5H0tK3TuQ@mail.gmail.com>

Hi,

I'm trying to convert an existing Java project (dependent on ANTLR 3) to
maven.  I've found that the recommendations on the list are that we use the
archetype to create a sample project:

http://www.antlr.org/wiki/display/ANTLR3/Building+ANTLR+Projects+with+Maven

I'm currently using Maven 3.0.3, and the command recommend in the above
fails:

[ERROR] Failed to execute goal
org.apache.maven.plugins:maven-archetype-plugin:2.0:generate (default-cli)
on project standalone-pom: The desired archetype does not exist
(org.antlr:antlr3-maven-archetype:3.3) -> [Help 1]

The 2 comments on that page reflect the same failure I'm experiencing.  Is
this a compatibility issue with Maven 3?

From jimi at temporal-wave.com  Wed Jun 22 14:34:35 2011
From: jimi at temporal-wave.com (Jim Idle)
Date: Wed, 22 Jun 2011 14:34:35 -0700
Subject: [antlr-interest] ANTLR 3 and Maven 3
In-Reply-To: <BANLkTim_MANkjCEFn=deYKo=X5H0tK3TuQ@mail.gmail.com>
References: <BANLkTim_MANkjCEFn=deYKo=X5H0tK3TuQ@mail.gmail.com>
Message-ID: <d61cddceacb08a6fa351f8aed77918f3@mail.gmail.com>

Antlr is only 2.2.1 compliant itself. However, there is a bug in the 3.3
archetype and you have to generate using the 3.2.1 archetype and then
change the generated pom to use 3.3 afterwards. I think that the plugin
MIGHT work with Maven 3.0.3 but no guarantees. You are better using Maven
2.2.1 and then upgrading to 3.0.3 when we upgrade ANTLR to that release.

Jim

> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of Joey Mink
> Sent: Wednesday, June 22, 2011 2:26 PM
> To: antlr-interest at antlr.org
> Subject: [antlr-interest] ANTLR 3 and Maven 3
>
> Hi,
>
> I'm trying to convert an existing Java project (dependent on ANTLR 3)
> to maven.  I've found that the recommendations on the list are that we
> use the archetype to create a sample project:
>
> http://www.antlr.org/wiki/display/ANTLR3/Building+ANTLR+Projects+with+M
> aven
>
> I'm currently using Maven 3.0.3, and the command recommend in the above
> fails:
>
> [ERROR] Failed to execute goal
> org.apache.maven.plugins:maven-archetype-plugin:2.0:generate (default-
> cli) on project standalone-pom: The desired archetype does not exist
> (org.antlr:antlr3-maven-archetype:3.3) -> [Help 1]
>
> The 2 comments on that page reflect the same failure I'm experiencing.
> Is this a compatibility issue with Maven 3?
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
> email-address

From hermenierfabien at gmail.com  Wed Jun 22 14:39:23 2011
From: hermenierfabien at gmail.com (Fabien Hermenier)
Date: Wed, 22 Jun 2011 15:39:23 -0600
Subject: [antlr-interest] ANTLR 3 and Maven 3
In-Reply-To: <d61cddceacb08a6fa351f8aed77918f3@mail.gmail.com>
References: <BANLkTim_MANkjCEFn=deYKo=X5H0tK3TuQ@mail.gmail.com>
	<d61cddceacb08a6fa351f8aed77918f3@mail.gmail.com>
Message-ID: <4E02610B.1060001@gmail.com>

Hi

I use the antlr plugin, without having to specify a special archetype.
Files are stored into src/main/antlr3. Here is the dependency for the 
pom.xml:

<plugin>
<groupId>org.antlr</groupId>
<artifactId>antlr3-maven-plugin</artifactId>
<version>3.2</version>
<executions>
<execution>
<goals>
<goal>antlr</goal>
</goals>
</execution>
</executions>

</plugin>


To compile the grammars, I use "mvn antlr3:antlr".

Hope this help
Fabien.
Le 22/06/11 15:34, Jim Idle a ?crit :
> Antlr is only 2.2.1 compliant itself. However, there is a bug in the 3.3
> archetype and you have to generate using the 3.2.1 archetype and then
> change the generated pom to use 3.3 afterwards. I think that the plugin
> MIGHT work with Maven 3.0.3 but no guarantees. You are better using Maven
> 2.2.1 and then upgrading to 3.0.3 when we upgrade ANTLR to that release.
>
> Jim
>
>> -----Original Message-----
>> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
>> bounces at antlr.org] On Behalf Of Joey Mink
>> Sent: Wednesday, June 22, 2011 2:26 PM
>> To: antlr-interest at antlr.org
>> Subject: [antlr-interest] ANTLR 3 and Maven 3
>>
>> Hi,
>>
>> I'm trying to convert an existing Java project (dependent on ANTLR 3)
>> to maven.  I've found that the recommendations on the list are that we
>> use the archetype to create a sample project:
>>
>> http://www.antlr.org/wiki/display/ANTLR3/Building+ANTLR+Projects+with+M
>> aven
>>
>> I'm currently using Maven 3.0.3, and the command recommend in the above
>> fails:
>>
>> [ERROR] Failed to execute goal
>> org.apache.maven.plugins:maven-archetype-plugin:2.0:generate (default-
>> cli) on project standalone-pom: The desired archetype does not exist
>> (org.antlr:antlr3-maven-archetype:3.3) ->  [Help 1]
>>
>> The 2 comments on that page reflect the same failure I'm experiencing.
>> Is this a compatibility issue with Maven 3?
>>
>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
>> email-address
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address


-- 
Fabien Hermenier
Postdoctoral researcher at Flux
http://sites.google.com/site/hermenierfabien/home


From joeymink at gmail.com  Wed Jun 22 14:46:55 2011
From: joeymink at gmail.com (Joey Mink)
Date: Wed, 22 Jun 2011 17:46:55 -0400
Subject: [antlr-interest] ANTLR 3 and Maven 3
In-Reply-To: <4E02610B.1060001@gmail.com>
References: <BANLkTim_MANkjCEFn=deYKo=X5H0tK3TuQ@mail.gmail.com>
	<d61cddceacb08a6fa351f8aed77918f3@mail.gmail.com>
	<4E02610B.1060001@gmail.com>
Message-ID: <BANLkTik-=j2XPoG2rC8MzKVHC+Rk670NJg@mail.gmail.com>

Fabien,

Thanks for the reply - I've actually tried your recommendation previously,
but I find I have the following problem if I simply `mvn clean` on my
project:

Downloading:
http://repo1.maven.org/maven2/org/codehaus/mojo/antlr3-maven-plugin/3.2/antlr3-maven-plugin-3.2.pom
[WARNING] The POM for org.codehaus.mojo:antlr3-maven-plugin:jar:3.2 is
missing, no dependency information available

And ultimately, I get this error:

[ERROR] Plugin org.codehaus.mojo:antlr3-maven-plugin:3.2 or one of its
dependencies could not be resolved: Failed to read artifact descriptor for
org.codehaus.mojo:antlr3-maven-plugin:jar:3.2: Could not find artifact
org.codehaus.mojo:antlr3-maven-plugin:pom:3.2 in central (
http://repo1.maven.org/maven2) -> [Help 1]

Might I need to add a special repository for antlr3-maven-plugin?

On Wed, Jun 22, 2011 at 5:39 PM, Fabien Hermenier <hermenierfabien at gmail.com
> wrote:

> Hi
>
> I use the antlr plugin, without having to specify a special archetype.
> Files are stored into src/main/antlr3. Here is the dependency for the
> pom.xml:
>
> <plugin>
> <groupId>org.antlr</groupId>
> <artifactId>antlr3-maven-plugin</artifactId>
> <version>3.2</version>
> <executions>
> <execution>
> <goals>
> <goal>antlr</goal>
> </goals>
> </execution>
> </executions>
>
> </plugin>
>
>
> To compile the grammars, I use "mvn antlr3:antlr".
>
> Hope this help
> Fabien.
> Le 22/06/11 15:34, Jim Idle a ?crit :
> > Antlr is only 2.2.1 compliant itself. However, there is a bug in the 3.3
> > archetype and you have to generate using the 3.2.1 archetype and then
> > change the generated pom to use 3.3 afterwards. I think that the plugin
> > MIGHT work with Maven 3.0.3 but no guarantees. You are better using Maven
> > 2.2.1 and then upgrading to 3.0.3 when we upgrade ANTLR to that release.
> >
> > Jim
> >
> >> -----Original Message-----
> >> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> >> bounces at antlr.org] On Behalf Of Joey Mink
> >> Sent: Wednesday, June 22, 2011 2:26 PM
> >> To: antlr-interest at antlr.org
> >> Subject: [antlr-interest] ANTLR 3 and Maven 3
> >>
> >> Hi,
> >>
> >> I'm trying to convert an existing Java project (dependent on ANTLR 3)
> >> to maven.  I've found that the recommendations on the list are that we
> >> use the archetype to create a sample project:
> >>
> >> http://www.antlr.org/wiki/display/ANTLR3/Building+ANTLR+Projects+with+M
> >> aven
> >>
> >> I'm currently using Maven 3.0.3, and the command recommend in the above
> >> fails:
> >>
> >> [ERROR] Failed to execute goal
> >> org.apache.maven.plugins:maven-archetype-plugin:2.0:generate (default-
> >> cli) on project standalone-pom: The desired archetype does not exist
> >> (org.antlr:antlr3-maven-archetype:3.3) ->  [Help 1]
> >>
> >> The 2 comments on that page reflect the same failure I'm experiencing.
> >> Is this a compatibility issue with Maven 3?
> >>
> >> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> >> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
> >> email-address
> > List: http://www.antlr.org/mailman/listinfo/antlr-interest
> > Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>
>
> --
> Fabien Hermenier
> Postdoctoral researcher at Flux
> http://sites.google.com/site/hermenierfabien/home
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>

From jimi at temporal-wave.com  Wed Jun 22 14:47:30 2011
From: jimi at temporal-wave.com (Jim Idle)
Date: Wed, 22 Jun 2011 14:47:30 -0700
Subject: [antlr-interest] ANTLR 3 and Maven 3
In-Reply-To: <4E02610B.1060001@gmail.com>
References: <BANLkTim_MANkjCEFn=deYKo=X5H0tK3TuQ@mail.gmail.com>
	<d61cddceacb08a6fa351f8aed77918f3@mail.gmail.com>
	<4E02610B.1060001@gmail.com>
Message-ID: <705a9461a57a7677b5b1a627c3c65a0c@mail.gmail.com>

The archetype is a short cut to generating a project - the OP is just
following the Maven article I wrote I think. I will try to fix the 3.3
archetype if I can.

Jim

> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of Fabien Hermenier
> Sent: Wednesday, June 22, 2011 2:39 PM
> To: antlr-interest at antlr.org
> Subject: Re: [antlr-interest] ANTLR 3 and Maven 3
>
> Hi
>
> I use the antlr plugin, without having to specify a special archetype.
> Files are stored into src/main/antlr3. Here is the dependency for the
> pom.xml:
>
> <plugin>
> <groupId>org.antlr</groupId>
> <artifactId>antlr3-maven-plugin</artifactId>
> <version>3.2</version>
> <executions>
> <execution>
> <goals>
> <goal>antlr</goal>
> </goals>
> </execution>
> </executions>
>
> </plugin>
>
>
> To compile the grammars, I use "mvn antlr3:antlr".
>
> Hope this help
> Fabien.
> Le 22/06/11 15:34, Jim Idle a ?crit :
> > Antlr is only 2.2.1 compliant itself. However, there is a bug in the
> > 3.3 archetype and you have to generate using the 3.2.1 archetype and
> > then change the generated pom to use 3.3 afterwards. I think that the
> > plugin MIGHT work with Maven 3.0.3 but no guarantees. You are better
> > using Maven
> > 2.2.1 and then upgrading to 3.0.3 when we upgrade ANTLR to that
> release.
> >
> > Jim
> >
> >> -----Original Message-----
> >> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> >> bounces at antlr.org] On Behalf Of Joey Mink
> >> Sent: Wednesday, June 22, 2011 2:26 PM
> >> To: antlr-interest at antlr.org
> >> Subject: [antlr-interest] ANTLR 3 and Maven 3
> >>
> >> Hi,
> >>
> >> I'm trying to convert an existing Java project (dependent on ANTLR
> 3)
> >> to maven.  I've found that the recommendations on the list are that
> >> we use the archetype to create a sample project:
> >>
> >>
> http://www.antlr.org/wiki/display/ANTLR3/Building+ANTLR+Projects+with
> >> +M
> >> aven
> >>
> >> I'm currently using Maven 3.0.3, and the command recommend in the
> >> above
> >> fails:
> >>
> >> [ERROR] Failed to execute goal
> >> org.apache.maven.plugins:maven-archetype-plugin:2.0:generate
> >> (default-
> >> cli) on project standalone-pom: The desired archetype does not exist
> >> (org.antlr:antlr3-maven-archetype:3.3) ->  [Help 1]
> >>
> >> The 2 comments on that page reflect the same failure I'm
> experiencing.
> >> Is this a compatibility issue with Maven 3?
> >>
> >> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> >> Unsubscribe:
> >> http://www.antlr.org/mailman/options/antlr-interest/your-
> >> email-address
> > List: http://www.antlr.org/mailman/listinfo/antlr-interest
> > Unsubscribe:
> > http://www.antlr.org/mailman/options/antlr-interest/your-email-
> address
>
>
> --
> Fabien Hermenier
> Postdoctoral researcher at Flux
> http://sites.google.com/site/hermenierfabien/home
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
> email-address

From jimi at temporal-wave.com  Wed Jun 22 14:49:04 2011
From: jimi at temporal-wave.com (Jim Idle)
Date: Wed, 22 Jun 2011 14:49:04 -0700
Subject: [antlr-interest] ANTLR 3 and Maven 3
In-Reply-To: <BANLkTik-=j2XPoG2rC8MzKVHC+Rk670NJg@mail.gmail.com>
References: <BANLkTim_MANkjCEFn=deYKo=X5H0tK3TuQ@mail.gmail.com>
	<d61cddceacb08a6fa351f8aed77918f3@mail.gmail.com>	<4E02610B.1060001@gmail.com>
	<BANLkTik-=j2XPoG2rC8MzKVHC+Rk670NJg@mail.gmail.com>
Message-ID: <6a4c1e74eb7ad766977ff0141c912de9@mail.gmail.com>

I think you have to use Maven 2.2.1 as I said earlier. I have not build a
version against 3.0.3 and so I don't know if it will work or not.

Jim

> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of Joey Mink
> Sent: Wednesday, June 22, 2011 2:47 PM
> To: Fabien Hermenier
> Cc: antlr-interest at antlr.org
> Subject: Re: [antlr-interest] ANTLR 3 and Maven 3
>
> Fabien,
>
> Thanks for the reply - I've actually tried your recommendation
> previously, but I find I have the following problem if I simply `mvn
> clean` on my
> project:
>
> Downloading:
> http://repo1.maven.org/maven2/org/codehaus/mojo/antlr3-maven-
> plugin/3.2/antlr3-maven-plugin-3.2.pom
> [WARNING] The POM for org.codehaus.mojo:antlr3-maven-plugin:jar:3.2 is
> missing, no dependency information available
>
> And ultimately, I get this error:
>
> [ERROR] Plugin org.codehaus.mojo:antlr3-maven-plugin:3.2 or one of its
> dependencies could not be resolved: Failed to read artifact descriptor
> for
> org.codehaus.mojo:antlr3-maven-plugin:jar:3.2: Could not find artifact
> org.codehaus.mojo:antlr3-maven-plugin:pom:3.2 in central (
> http://repo1.maven.org/maven2) -> [Help 1]
>
> Might I need to add a special repository for antlr3-maven-plugin?
>
> On Wed, Jun 22, 2011 at 5:39 PM, Fabien Hermenier
> <hermenierfabien at gmail.com
> > wrote:
>
> > Hi
> >
> > I use the antlr plugin, without having to specify a special
> archetype.
> > Files are stored into src/main/antlr3. Here is the dependency for the
> > pom.xml:
> >
> > <plugin>
> > <groupId>org.antlr</groupId>
> > <artifactId>antlr3-maven-plugin</artifactId>
> > <version>3.2</version>
> > <executions>
> > <execution>
> > <goals>
> > <goal>antlr</goal>
> > </goals>
> > </execution>
> > </executions>
> >
> > </plugin>
> >
> >
> > To compile the grammars, I use "mvn antlr3:antlr".
> >
> > Hope this help
> > Fabien.
> > Le 22/06/11 15:34, Jim Idle a ?crit :
> > > Antlr is only 2.2.1 compliant itself. However, there is a bug in
> the
> > > 3.3 archetype and you have to generate using the 3.2.1 archetype
> and
> > > then change the generated pom to use 3.3 afterwards. I think that
> > > the plugin MIGHT work with Maven 3.0.3 but no guarantees. You are
> > > better using Maven
> > > 2.2.1 and then upgrading to 3.0.3 when we upgrade ANTLR to that
> release.
> > >
> > > Jim
> > >
> > >> -----Original Message-----
> > >> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> > >> bounces at antlr.org] On Behalf Of Joey Mink
> > >> Sent: Wednesday, June 22, 2011 2:26 PM
> > >> To: antlr-interest at antlr.org
> > >> Subject: [antlr-interest] ANTLR 3 and Maven 3
> > >>
> > >> Hi,
> > >>
> > >> I'm trying to convert an existing Java project (dependent on ANTLR
> > >> 3) to maven.  I've found that the recommendations on the list are
> > >> that we use the archetype to create a sample project:
> > >>
> > >>
> http://www.antlr.org/wiki/display/ANTLR3/Building+ANTLR+Projects+wi
> > >> th+M
> > >> aven
> > >>
> > >> I'm currently using Maven 3.0.3, and the command recommend in the
> > >> above
> > >> fails:
> > >>
> > >> [ERROR] Failed to execute goal
> > >> org.apache.maven.plugins:maven-archetype-plugin:2.0:generate
> > >> (default-
> > >> cli) on project standalone-pom: The desired archetype does not
> > >> exist
> > >> (org.antlr:antlr3-maven-archetype:3.3) ->  [Help 1]
> > >>
> > >> The 2 comments on that page reflect the same failure I'm
> experiencing.
> > >> Is this a compatibility issue with Maven 3?
> > >>
> > >> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> > >> Unsubscribe:
> > >> http://www.antlr.org/mailman/options/antlr-interest/your-
> > >> email-address
> > > List: http://www.antlr.org/mailman/listinfo/antlr-interest
> > > Unsubscribe:
> > http://www.antlr.org/mailman/options/antlr-interest/your-email-
> address
> >
> >
> > --
> > Fabien Hermenier
> > Postdoctoral researcher at Flux
> > http://sites.google.com/site/hermenierfabien/home
> >
> >
> > List: http://www.antlr.org/mailman/listinfo/antlr-interest
> > Unsubscribe:
> > http://www.antlr.org/mailman/options/antlr-interest/your-email-
> address
> >
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
> email-address

From hermenierfabien at gmail.com  Wed Jun 22 14:57:49 2011
From: hermenierfabien at gmail.com (Fabien Hermenier)
Date: Wed, 22 Jun 2011 15:57:49 -0600
Subject: [antlr-interest] ANTLR 3 and Maven 3
In-Reply-To: <BANLkTik-=j2XPoG2rC8MzKVHC+Rk670NJg@mail.gmail.com>
References: <BANLkTim_MANkjCEFn=deYKo=X5H0tK3TuQ@mail.gmail.com>
	<d61cddceacb08a6fa351f8aed77918f3@mail.gmail.com>
	<4E02610B.1060001@gmail.com>
	<BANLkTik-=j2XPoG2rC8MzKVHC+Rk670NJg@mail.gmail.com>
Message-ID: <4E02655D.5060409@gmail.com>

Well, I don't have your warnings and I don't use any specific 
repositories. However, files are already on my local repos since a long 
time.
Just in case, here is a more complete pom.xml

---
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0"
          xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
          xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 
http://maven.apache.org/xsd/maven-4.0.0.xsd">
<modelVersion>4.0.0</modelVersion>

<groupId>btrPlaceSL</groupId>
<artifactId>btrPlaceSL</artifactId>
<version>1.0</version>

<dependencies>
         ...
<dependency>
<groupId>org.antlr</groupId>
<artifactId>antlr</artifactId>
<version>3.3</version>
<type>jar</type>
<optional>false</optional>
</dependency>
     ...
</dependencies>
<build>
<plugins>
<plugin>
<groupId>org.antlr</groupId>
<artifactId>antlr3-maven-plugin</artifactId>
<version>3.2</version>
<executions>
<execution>
<goals>
<goal>antlr</goal>
</goals>
</execution>
</executions>

</plugin>
</plugins>
</build>
</project>
---
Le 22/06/11 15:46, Joey Mink a ?crit :
> Fabien,
>
> Thanks for the reply - I've actually tried your recommendation 
> previously, but I find I have the following problem if I simply `mvn 
> clean` on my project:
>
> Downloading: 
> http://repo1.maven.org/maven2/org/codehaus/mojo/antlr3-maven-plugin/3.2/antlr3-maven-plugin-3.2.pom
> [WARNING] The POM for org.codehaus.mojo:antlr3-maven-plugin:jar:3.2 is 
> missing, no dependency information available
>
> And ultimately, I get this error:
>
> [ERROR] Plugin org.codehaus.mojo:antlr3-maven-plugin:3.2 or one of its 
> dependencies could not be resolved: Failed to read artifact descriptor 
> for org.codehaus.mojo:antlr3-maven-plugin:jar:3.2: Could not find 
> artifact org.codehaus.mojo:antlr3-maven-plugin:pom:3.2 in central 
> (http://repo1.maven.org/maven2) -> [Help 1]
>
> Might I need to add a special repository for antlr3-maven-plugin?
>
> On Wed, Jun 22, 2011 at 5:39 PM, Fabien Hermenier 
> <hermenierfabien at gmail.com <mailto:hermenierfabien at gmail.com>> wrote:
>
>     Hi
>
>     I use the antlr plugin, without having to specify a special archetype.
>     Files are stored into src/main/antlr3. Here is the dependency for the
>     pom.xml:
>
>     <plugin>
>     <groupId>org.antlr</groupId>
>     <artifactId>antlr3-maven-plugin</artifactId>
>     <version>3.2</version>
>     <executions>
>     <execution>
>     <goals>
>     <goal>antlr</goal>
>     </goals>
>     </execution>
>     </executions>
>
>     </plugin>
>
>
>     To compile the grammars, I use "mvn antlr3:antlr".
>
>     Hope this help
>     Fabien.
>     Le 22/06/11 15:34, Jim Idle a ?crit :
>     > Antlr is only 2.2.1 compliant itself. However, there is a bug in
>     the 3.3
>     > archetype and you have to generate using the 3.2.1 archetype and
>     then
>     > change the generated pom to use 3.3 afterwards. I think that the
>     plugin
>     > MIGHT work with Maven 3.0.3 but no guarantees. You are better
>     using Maven
>     > 2.2.1 and then upgrading to 3.0.3 when we upgrade ANTLR to that
>     release.
>     >
>     > Jim
>     >
>     >> -----Original Message-----
>     >> From: antlr-interest-bounces at antlr.org
>     <mailto:antlr-interest-bounces at antlr.org> [mailto:antlr-interest-
>     <mailto:antlr-interest->
>     >> bounces at antlr.org <mailto:bounces at antlr.org>] On Behalf Of Joey
>     Mink
>     >> Sent: Wednesday, June 22, 2011 2:26 PM
>     >> To: antlr-interest at antlr.org <mailto:antlr-interest at antlr.org>
>     >> Subject: [antlr-interest] ANTLR 3 and Maven 3
>     >>
>     >> Hi,
>     >>
>     >> I'm trying to convert an existing Java project (dependent on
>     ANTLR 3)
>     >> to maven.  I've found that the recommendations on the list are
>     that we
>     >> use the archetype to create a sample project:
>     >>
>     >>
>     http://www.antlr.org/wiki/display/ANTLR3/Building+ANTLR+Projects+with+M
>     >> aven
>     >>
>     >> I'm currently using Maven 3.0.3, and the command recommend in
>     the above
>     >> fails:
>     >>
>     >> [ERROR] Failed to execute goal
>     >> org.apache.maven.plugins:maven-archetype-plugin:2.0:generate
>     (default-
>     >> cli) on project standalone-pom: The desired archetype does not
>     exist
>     >> (org.antlr:antlr3-maven-archetype:3.3) ->  [Help 1]
>     >>
>     >> The 2 comments on that page reflect the same failure I'm
>     experiencing.
>     >> Is this a compatibility issue with Maven 3?
>     >>
>     >> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>     >> Unsubscribe:
>     http://www.antlr.org/mailman/options/antlr-interest/your-
>     >> email-address
>     > List: http://www.antlr.org/mailman/listinfo/antlr-interest
>     > Unsubscribe:
>     http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>
>
>     --
>     Fabien Hermenier
>     Postdoctoral researcher at Flux
>     http://sites.google.com/site/hermenierfabien/home
>
>
>     List: http://www.antlr.org/mailman/listinfo/antlr-interest
>     Unsubscribe:
>     http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>
>


-- 
Fabien Hermenier
Postdoctoral researcher at Flux
http://sites.google.com/site/hermenierfabien/home


From joeymink at gmail.com  Wed Jun 22 15:29:23 2011
From: joeymink at gmail.com (Joey Mink)
Date: Wed, 22 Jun 2011 18:29:23 -0400
Subject: [antlr-interest] ANTLR 3 and Maven 3
In-Reply-To: <6a4c1e74eb7ad766977ff0141c912de9@mail.gmail.com>
References: <BANLkTim_MANkjCEFn=deYKo=X5H0tK3TuQ@mail.gmail.com>
	<d61cddceacb08a6fa351f8aed77918f3@mail.gmail.com>
	<4E02610B.1060001@gmail.com>
	<BANLkTik-=j2XPoG2rC8MzKVHC+Rk670NJg@mail.gmail.com>
	<6a4c1e74eb7ad766977ff0141c912de9@mail.gmail.com>
Message-ID: <BANLkTikaa8OScudQ0iDCU2V4hMCbJFKdSw@mail.gmail.com>

Jim,

My mistake - when I 1st read Fabien's reply, I thought he said he was using
Maven 3.x, but I must have been mistaken.

I'll try to set up a dual environment for Maven.  Thanks!

On Wed, Jun 22, 2011 at 5:49 PM, Jim Idle <jimi at temporal-wave.com> wrote:

> I think you have to use Maven 2.2.1 as I said earlier. I have not build a
> version against 3.0.3 and so I don't know if it will work or not.
>
> Jim
>
> > -----Original Message-----
> > From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> > bounces at antlr.org] On Behalf Of Joey Mink
> > Sent: Wednesday, June 22, 2011 2:47 PM
> > To: Fabien Hermenier
> > Cc: antlr-interest at antlr.org
> > Subject: Re: [antlr-interest] ANTLR 3 and Maven 3
> >
> > Fabien,
> >
> > Thanks for the reply - I've actually tried your recommendation
> > previously, but I find I have the following problem if I simply `mvn
> > clean` on my
> > project:
> >
> > Downloading:
> > http://repo1.maven.org/maven2/org/codehaus/mojo/antlr3-maven-
> > plugin/3.2/antlr3-maven-plugin-3.2.pom
> > [WARNING] The POM for org.codehaus.mojo:antlr3-maven-plugin:jar:3.2 is
> > missing, no dependency information available
> >
> > And ultimately, I get this error:
> >
> > [ERROR] Plugin org.codehaus.mojo:antlr3-maven-plugin:3.2 or one of its
> > dependencies could not be resolved: Failed to read artifact descriptor
> > for
> > org.codehaus.mojo:antlr3-maven-plugin:jar:3.2: Could not find artifact
> > org.codehaus.mojo:antlr3-maven-plugin:pom:3.2 in central (
> > http://repo1.maven.org/maven2) -> [Help 1]
> >
> > Might I need to add a special repository for antlr3-maven-plugin?
> >
> > On Wed, Jun 22, 2011 at 5:39 PM, Fabien Hermenier
> > <hermenierfabien at gmail.com
> > > wrote:
> >
> > > Hi
> > >
> > > I use the antlr plugin, without having to specify a special
> > archetype.
> > > Files are stored into src/main/antlr3. Here is the dependency for the
> > > pom.xml:
> > >
> > > <plugin>
> > > <groupId>org.antlr</groupId>
> > > <artifactId>antlr3-maven-plugin</artifactId>
> > > <version>3.2</version>
> > > <executions>
> > > <execution>
> > > <goals>
> > > <goal>antlr</goal>
> > > </goals>
> > > </execution>
> > > </executions>
> > >
> > > </plugin>
> > >
> > >
> > > To compile the grammars, I use "mvn antlr3:antlr".
> > >
> > > Hope this help
> > > Fabien.
> > > Le 22/06/11 15:34, Jim Idle a ?crit :
> > > > Antlr is only 2.2.1 compliant itself. However, there is a bug in
> > the
> > > > 3.3 archetype and you have to generate using the 3.2.1 archetype
> > and
> > > > then change the generated pom to use 3.3 afterwards. I think that
> > > > the plugin MIGHT work with Maven 3.0.3 but no guarantees. You are
> > > > better using Maven
> > > > 2.2.1 and then upgrading to 3.0.3 when we upgrade ANTLR to that
> > release.
> > > >
> > > > Jim
> > > >
> > > >> -----Original Message-----
> > > >> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> > > >> bounces at antlr.org] On Behalf Of Joey Mink
> > > >> Sent: Wednesday, June 22, 2011 2:26 PM
> > > >> To: antlr-interest at antlr.org
> > > >> Subject: [antlr-interest] ANTLR 3 and Maven 3
> > > >>
> > > >> Hi,
> > > >>
> > > >> I'm trying to convert an existing Java project (dependent on ANTLR
> > > >> 3) to maven.  I've found that the recommendations on the list are
> > > >> that we use the archetype to create a sample project:
> > > >>
> > > >>
> > http://www.antlr.org/wiki/display/ANTLR3/Building+ANTLR+Projects+wi
> > > >> th+M
> > > >> aven
> > > >>
> > > >> I'm currently using Maven 3.0.3, and the command recommend in the
> > > >> above
> > > >> fails:
> > > >>
> > > >> [ERROR] Failed to execute goal
> > > >> org.apache.maven.plugins:maven-archetype-plugin:2.0:generate
> > > >> (default-
> > > >> cli) on project standalone-pom: The desired archetype does not
> > > >> exist
> > > >> (org.antlr:antlr3-maven-archetype:3.3) ->  [Help 1]
> > > >>
> > > >> The 2 comments on that page reflect the same failure I'm
> > experiencing.
> > > >> Is this a compatibility issue with Maven 3?
> > > >>
> > > >> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> > > >> Unsubscribe:
> > > >> http://www.antlr.org/mailman/options/antlr-interest/your-
> > > >> email-address
> > > > List: http://www.antlr.org/mailman/listinfo/antlr-interest
> > > > Unsubscribe:
> > > http://www.antlr.org/mailman/options/antlr-interest/your-email-
> > address
> > >
> > >
> > > --
> > > Fabien Hermenier
> > > Postdoctoral researcher at Flux
> > > http://sites.google.com/site/hermenierfabien/home
> > >
> > >
> > > List: http://www.antlr.org/mailman/listinfo/antlr-interest
> > > Unsubscribe:
> > > http://www.antlr.org/mailman/options/antlr-interest/your-email-
> > address
> > >
> >
> > List: http://www.antlr.org/mailman/listinfo/antlr-interest
> > Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
> > email-address
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>

From cowang at comcast.net  Wed Jun 22 17:08:06 2011
From: cowang at comcast.net (George S. Cowan)
Date: Wed, 22 Jun 2011 20:08:06 -0400
Subject: [antlr-interest] object oriented compiler implementation
In-Reply-To: <ymafwnd4x7z.fsf@internode.on.net>
References: <4A454A950FB157459B59AA50C146C07901E3033902@OMA00CEXMBX02.corp.westworlds.com>
	<ymafwnd4x7z.fsf@internode.on.net>
Message-ID: <010901cc3139$a1fea9a0$e5fbfce0$@net>

There is a whole other set of issues that need to be mentioned for
completeness, i.e., how do we build the symbol table and AST in the parser
so that we can generate the code in the way that the below books teach us.
Ter covers this at http://www.antlr.org/wiki/display/CS652/Symbol+tables and
in his book Language Implementation Patterns
http://pragprog.com/titles/tpdsl/language-implementation-patterns 

The book also gets us started on how to develop templates for language
implementation. We need this in order to translate the concepts for
implementing OO languages into templates that can be used to translate ANTLR
ASTs into code.

George Cowan


> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of Mark Wright
> Sent: Monday, June 13, 2011 10:34 AM
> To: Edwards, Waverly; antlr
> Subject: Re: [antlr-interest] object oriented compiler implementation
> 
> On Fri, 10 Jun 2011 17:43:49 -0500, "Edwards, Waverly"
> <Waverly.Edwards at genesys.com> wrote:
> > This is not directly ANTLR related but have any of you come across a
> guide,
> > tutorial or book (preferably) for implementing an compiler for an
> object
> > oriented language.  I don't mean the compiler is created using an
> object
> > oriented languages, though that would be good.  I mean what goes into
> > implementing subclassing, method overriding, hybrid language type
> safety
> > such as objective-c (static and dynamic type) enforcement.  Also
> things like
> > implementing exceptions and polymorphic variables.  I've used them in
> > languages but I haven't read how you might go about go about
> implementing
> > them.  I have a few compiler books but interestingly enough, they all
> deal
> > with procedural languages like C or Pascal.  None of them talk about
> the
> > innards of making compilers for object oriented languages.  I do own
> > "Language Implementation Patterns", which helped me understand scopes
> for
> > object languages.
> 
> Hi Waverly,
> 
> There is lots of information using type theory, functional programming,
> and proof assistants.  The book to start with using this approach is
> free:
> 
> http://www.seas.upenn.edu/~cis500/current/sf/html/index.html
> 
> The 2 main proof assistants for this sort of stuff are Coq and
> Isabelle.
> There seems to be more tutorial info on Coq.  A useful tool that can
> generate
> some Coq and Isabelle code is Ott:
> 
> http://www.cl.cam.ac.uk/~pes20/ott/
> 
> The chapter TypeChecking:
> 
> http://www.seas.upenn.edu/~cis500/current/sf/html/Typechecking.html
> 
> describes how to prove that a Coq fixpoint function for the type
> checker
> is equivalent to the Coq propositions that are more convenient to work
> with in the proof assistant.  Ott can generate the propositions,
> looking
> at those can help with writing the fixpoints, and then Haskell or Ocaml
> code can be extracted from the fixpoints.  Or you could just look
> at the fixpoints as a guide and write the type checker in a functional
> programming language
> 
> Lots of very useful type theory/Coq videos here:
> 
> http://vimeo.com/user5565394/videos/page:1/sort:newest
> 
> The Software Foundations book does not cover object orientented
> languages,
> but the theory is required to understand books that do.  There are
> different
> types of subtyping in type theory.
> 
> The standard text on type theory does have some discussion on object
> oriented languages:
> 
> Types and Programming Languages, by Benjamin C. Pierce. MIT Press,
> 2002.
> 
> There are 2 obscure books on type theory and object oriented langauges:
> 
> (1) Foundations of Object-Oriented Languages by Kim Bruce
> 
> The first half is an easy discussion on object oriented type systems
> that you would probably find useful even if you don't use the type
> theory
> approach.
> 
> The second half uses type theory, proof sketches, which is useful if
> you wanted to use type theory.
> 
> (2) A Theory of Objects (Monographs in Computer Science) by Martin
> Abadi and
> Luca Cardelli
> 
> its an expensive book, I have not read it.  It develops its own object
> calculus which I guess would make it hard to understand this book.
> 
> There are other references in the postscript:
> 
> http://www.seas.upenn.edu/~cis500/current/sf/html/Postscript.html
> 
> If you write the compiler using a functional programming language, then
> I think the standard approach is use continuations, that is described
> in this book:
> 
> Compiling with Continuations by Andrew W. Appel
> 
> and 2 chapters in this book (seems to be more on interpreters than
> compilers though):
> 
> Essentials of Programming Languages by Daniel P. Friedman and Mitchell
> Wand
> 
> Regards, Mark
> 
> > I'm hoping to start with a book that lets you know what to do, what
> not to
> > do and why you don't want to do it that way.  I'd like to start with
> making
> > fresh mistakes versus ones that have been made over and over again.
> 
> > Thank you kindly,
> >
> > Waverly
> >
> >
> > List: http://www.antlr.org/mailman/listinfo/antlr-interest
> > Unsubscribe: http://www.antlr.org/mailman/options/antlr-
> interest/your-email-address
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
> email-address


From jimi at temporal-wave.com  Wed Jun 22 19:50:59 2011
From: jimi at temporal-wave.com (Jim Idle)
Date: Wed, 22 Jun 2011 19:50:59 -0700
Subject: [antlr-interest] New Maven archetype for Antlr release 3.3
Message-ID: <73008b3dba2b0d82f540975d1cbd3981@mail.gmail.com>

The Maven project archetype for ANTLR release 3.3 was broken and referred to
the snapshot releases of 3.3 beta. This is now superseded with archetype
version 3.3-1  (patch 1 basically). It is deployed to the antlr release
depot and will be picked up by Maven central before too long.



Jim

From seaside.ki at me.com  Thu Jun 23 14:47:41 2011
From: seaside.ki at me.com (Stefan)
Date: Thu, 23 Jun 2011 23:47:41 +0200
Subject: [antlr-interest] ANTLR ActionScript target broken
Message-ID: <C458CF83-569A-494B-AEED-064FD74B6CC8@me.com>

Hi,

According to these instructions, I'm trying to use ANTLR generated *.as files in a current Flash Builder 4.5.1 project.

Therefore, I added this ANTLR's Actionscript runtime to my project - without problems.

I compiled lexer/parser specs using ANTLRWorks without problems too.

I added the language option to the source *.g file to make ANTLR generate Actionscript sources:

options {
    backtrack = true; 
    memoize = true;
    k=2;
    output = AST;
    language=ActionScript;        // Added this
    ASTLabelType = CommonTree;
}
Unfortunately, the ANTLR/ANTLRworks generated Actionscript code is buggy:

Catch statements read like this catch (RecognitionException re), but should read like this:catch ( re:RecognitionException ).

Furthermore, Flash Builder complains about the use of Array here:

public override function get tokenNames():Array { return PhpParser.tokenNames; }
Besides this, other problems exist in the generated ActionScript sources. E.g. wrong function declaration, 
package declaration inside package, ChartStream.getLine() called instead of ChartStream.line(),...

I checked ANTLR itself too. But the pure JAR renders the same problem. Thus, ANTLRworks isn't the 
problem, but ANTLR itself.

Assuming that I did everything correct, I wonder if and when the ANTLR project may provide a bug fix.

Ah, hints how to make the current ANTLR work with ActionScript, would be even better ;-)


Kinds regards,

S

From jimi at temporal-wave.com  Thu Jun 23 15:29:59 2011
From: jimi at temporal-wave.com (Jim Idle)
Date: Thu, 23 Jun 2011 15:29:59 -0700
Subject: [antlr-interest] ANTLR ActionScript target broken
In-Reply-To: <C458CF83-569A-494B-AEED-064FD74B6CC8@me.com>
References: <C458CF83-569A-494B-AEED-064FD74B6CC8@me.com>
Message-ID: <104bd9e17b652e6f72da3645993fe5cb@mail.gmail.com>

ActionScript has been orphaned as far as I can tell - you could try
emailing the original author of that target and see if they have any plans
to continue with it.

Jim

> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of Stefan
> Sent: Thursday, June 23, 2011 2:48 PM
> To: antlr-interest at antlr.org
> Subject: [antlr-interest] ANTLR ActionScript target broken
>
> Hi,
>
> According to these instructions, I'm trying to use ANTLR generated *.as
> files in a current Flash Builder 4.5.1 project.
>
> Therefore, I added this ANTLR's Actionscript runtime to my project -
> without problems.
>
> I compiled lexer/parser specs using ANTLRWorks without problems too.
>
> I added the language option to the source *.g file to make ANTLR
> generate Actionscript sources:
>
> options {
>     backtrack = true;
>     memoize = true;
>     k=2;
>     output = AST;
>     language=ActionScript;        // Added this
>     ASTLabelType = CommonTree;
> }
> Unfortunately, the ANTLR/ANTLRworks generated Actionscript code is
> buggy:
>
> Catch statements read like this catch (RecognitionException re), but
> should read like this:catch ( re:RecognitionException ).
>
> Furthermore, Flash Builder complains about the use of Array here:
>
> public override function get tokenNames():Array { return
> PhpParser.tokenNames; } Besides this, other problems exist in the
> generated ActionScript sources. E.g. wrong function declaration,
> package declaration inside package, ChartStream.getLine() called
> instead of ChartStream.line(),...
>
> I checked ANTLR itself too. But the pure JAR renders the same problem.
> Thus, ANTLRworks isn't the problem, but ANTLR itself.
>
> Assuming that I did everything correct, I wonder if and when the ANTLR
> project may provide a bug fix.
>
> Ah, hints how to make the current ANTLR work with ActionScript, would
> be even better ;-)
>
>
> Kinds regards,
>
> S
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
> email-address

From seaside.ki at me.com  Thu Jun 23 15:50:16 2011
From: seaside.ki at me.com (Stefan)
Date: Fri, 24 Jun 2011 00:50:16 +0200
Subject: [antlr-interest] ANTLR ActionScript target broken
In-Reply-To: <104bd9e17b652e6f72da3645993fe5cb@mail.gmail.com>
References: <C458CF83-569A-494B-AEED-064FD74B6CC8@me.com>
	<104bd9e17b652e6f72da3645993fe5cb@mail.gmail.com>
Message-ID: <6F1935FC-5D32-4DFF-9F6B-BA7C0B3E64F8@me.com>

Thx Jim!

Ah, I see. I'll try to contact the author

I'd probably jump in and invest some days to reanimate the project. There are
several problems, but all seem to be small and relatively easy fixable.

Let's see. Installing the Maven Eclipse plugin right now ;-)

Stefan


Am 24.06.2011 um 00:29 schrieb Jim Idle:

> ActionScript has been orphaned as far as I can tell - you could try
> emailing the original author of that target and see if they have any plans
> to continue with it.
> 
> Jim
> 
>> -----Original Message-----
>> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
>> bounces at antlr.org] On Behalf Of Stefan
>> Sent: Thursday, June 23, 2011 2:48 PM
>> To: antlr-interest at antlr.org
>> Subject: [antlr-interest] ANTLR ActionScript target broken
>> 
>> Hi,
>> 
>> According to these instructions, I'm trying to use ANTLR generated *.as
>> files in a current Flash Builder 4.5.1 project.
>> 
>> Therefore, I added this ANTLR's Actionscript runtime to my project -
>> without problems.
>> 
>> I compiled lexer/parser specs using ANTLRWorks without problems too.
>> 
>> I added the language option to the source *.g file to make ANTLR
>> generate Actionscript sources:
>> 
>> options {
>>    backtrack = true;
>>    memoize = true;
>>    k=2;
>>    output = AST;
>>    language=ActionScript;        // Added this
>>    ASTLabelType = CommonTree;
>> }
>> Unfortunately, the ANTLR/ANTLRworks generated Actionscript code is
>> buggy:
>> 
>> Catch statements read like this catch (RecognitionException re), but
>> should read like this:catch ( re:RecognitionException ).
>> 
>> Furthermore, Flash Builder complains about the use of Array here:
>> 
>> public override function get tokenNames():Array { return
>> PhpParser.tokenNames; } Besides this, other problems exist in the
>> generated ActionScript sources. E.g. wrong function declaration,
>> package declaration inside package, ChartStream.getLine() called
>> instead of ChartStream.line(),...
>> 
>> I checked ANTLR itself too. But the pure JAR renders the same problem.
>> Thus, ANTLRworks isn't the problem, but ANTLR itself.
>> 
>> Assuming that I did everything correct, I wonder if and when the ANTLR
>> project may provide a bug fix.
>> 
>> Ah, hints how to make the current ANTLR work with ActionScript, would
>> be even better ;-)
>> 
>> 
>> Kinds regards,
>> 
>> S
>> 
>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
>> email-address
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address


From parrt at cs.usfca.edu  Thu Jun 23 16:03:33 2011
From: parrt at cs.usfca.edu (Terence Parr)
Date: Thu, 23 Jun 2011 16:03:33 -0700
Subject: [antlr-interest] ANTLR 3.4 rc3 (aka beta3)
Message-ID: <0E89ECF4-D3F7-4464-A309-547764CE084A@cs.usfca.edu>

hi, Jim fixed up the C runtime. please test it out:

http://antlr.org/download/antlr-master-3.4-beta3-completejar.jar
http://antlr.org/download/antlr-master-3.4-beta3-src.jar
http://antlr.org/download/antlr-runtime-3.4-beta3-sources.jar
http://antlr.org/download/antlr-runtime-3.4-beta3.jar

Ter

From diabeteman at gmail.com  Fri Jun 24 03:02:27 2011
From: diabeteman at gmail.com (Robin)
Date: Fri, 24 Jun 2011 12:02:27 +0200
Subject: [antlr-interest] Match a repetition of characters
Message-ID: <BANLkTi=vyV0nVbk0XKYFYXEsgYF9TPMVXg@mail.gmail.com>

Hello everyone,

I'm trying to write a rule that matches the repetition (4 or more) of the
same special character

For example:

"^^^^^^^^^^^^^^^^^^^^"

or

"________________"

I have these lexer rules :

UNDERSCORE : '_';
BACKTICK : '`';
STAR : '*';
PIPE : '|';
COLUMN : ':';
SPECIAL_CHAR :
('!'|'"'|'#'|'$'|'%'|'&'|'\''|'('|')'|'+'|','|'.'|'/'|';'|'<'|'='|'>'|'?'|'@'|'['|'\\'|']'|'^'|'{'|'}'|'~');
LINE_BREAK : '\u000C'?'\r'?'\n';

And I'd like to write a parser rule named "underline" that only matches if
this is a repetition of *the same character* and that returns this
character. So that enclosing rules can use it.

For now I wrote this:

underline returns [char symbol]
  : underlineAtom {$symbol=$underlineAtom.text} {$symbol}+ LINE_BREAK
  ;

underlineAtom
  : UNDERSCORE
  | STAR
  | PIPE
  | BACKTICK
  | COLUMN
  | SPECIAL_CHAR
  ;

But my grammar does not compile...

Can someone help me on this ? :)

Thanks

From jmurray at aerotech.com  Fri Jun 24 08:06:08 2011
From: jmurray at aerotech.com (Justin Murray)
Date: Fri, 24 Jun 2011 11:06:08 -0400
Subject: [antlr-interest] ANTLR 3.4 rc3 (aka beta3)
In-Reply-To: <0E89ECF4-D3F7-4464-A309-547764CE084A@cs.usfca.edu>
References: <0E89ECF4-D3F7-4464-A309-547764CE084A@cs.usfca.edu>
Message-ID: <6B458D23F5D4A24ABCDB3C78EA97393B02AFFD2A@EXCH-VIRTUAL.aerotechad.com>

Decided to give this a run on my C-target grammar. I'm getting the 
following error:

1>     [exec] org\antlr\grammar\v3\DefineGrammarItemsWalker.g: node from 
line 290:15 required (...)+ loop did not match anything at input 
'<end-of-alt>'
1>     [exec] error(10):  internal error: c:\...\Aerobasic.g : 
java.lang.ClassCastException: org.antlr.runtime.tree.CommonTree cannot 
be cast to org.antlr.tool.GrammarAST
1>     [exec] 
org.antlr.grammar.v3.DefineGrammarItemsWalker.rewrite(DefineGrammarItemsWalker.java:3464)
1>     [exec] 
org.antlr.grammar.v3.DefineGrammarItemsWalker.block(DefineGrammarItemsWalker.java:2073)
1>     [exec] 
org.antlr.grammar.v3.DefineGrammarItemsWalker.rule(DefineGrammarItemsWalker.java:1627)
1>     [exec] 
org.antlr.grammar.v3.DefineGrammarItemsWalker.rules(DefineGrammarItemsWalker.java:1190)
1>     [exec] 
org.antlr.grammar.v3.DefineGrammarItemsWalker.grammarSpec(DefineGrammarItemsWalker.java:623)
1>     [exec] 
org.antlr.grammar.v3.DefineGrammarItemsWalker.grammar_(DefineGrammarItemsWalker.java:315)
1>     [exec] org.antlr.tool.Grammar.defineGrammarSymbols(Grammar.java:748)
1>     [exec] 
org.antlr.tool.CompositeGrammar.defineGrammarSymbols(CompositeGrammar.java:369)
1>     [exec] org.antlr.Tool.process(Tool.java:465)
1>     [exec] org.antlr.Tool.main(Tool.java:93)

I am not sure where to go from here. Note that this grammar does not 
output an AST, it is just a simple parser. This was working fine with 
ANTLR v3.3.

Thanks,

-- Justin

On 6/23/2011 7:03 PM, Terence Parr wrote:
> hi, Jim fixed up the C runtime. please test it out:
>
> http://antlr.org/download/antlr-master-3.4-beta3-completejar.jar
> http://antlr.org/download/antlr-master-3.4-beta3-src.jar
> http://antlr.org/download/antlr-runtime-3.4-beta3-sources.jar
> http://antlr.org/download/antlr-runtime-3.4-beta3.jar
>
> Ter
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address

From jmurray at aerotech.com  Fri Jun 24 08:11:51 2011
From: jmurray at aerotech.com (Justin Murray)
Date: Fri, 24 Jun 2011 11:11:51 -0400
Subject: [antlr-interest] [C target] Warnings in 64-bit compile
Message-ID: <6B458D23F5D4A24ABCDB3C78EA97393B02AFFD2B@EXCH-VIRTUAL.aerotechad.com>

Jim,

I just wanted to see if this was on your radar for the 3.4 C runtime update. I haven't been able to test it with beta3 because I hit some earlier roadblocks.

Thanks,

-- Justin



	Ah it is probably because the backtrack and memorize option. I strongly
	
	advise that you don't use these but left factor your grammar. However, I
	
	will fix it of course.
	
	
	
	

	Jim
	
	
	
	

	-----Original Message-----
	
	From: Justin Murray [mailto:jmur... at aerotech.com]
	
	Sent: Tuesday, December 28, 2010 1:39 PM
	
	To: Jim Idle; antl... at antlr.org
	
	Subject: RE: [antlr-interest] [C target] Warnings in 64-bit compile
	
	
	
	

	I believe that it is caused by using the memorize=true; option and
	
	building 64-bit. The following grammar has these warnings in the
	
	generated TestParser.c (compiled as C++ code in Visual Studio 2008).
	
	You will find the offending line at the beginning of the generated
	
	prog() function.
	
	
	
	

	-----------------------------
	
	grammar Test;
	
	
	
	

	options
	
	{
	
	language=C;
	
	backtrack=true;
	
	memoize=true;
	
	}
	
	
	
	

	prog
	
	: SOMETHING+;
	
	
	
	

	SOMETHING
	
	: 'A'..'Z';
	
	

	------------------------------
	
	
	
	

	Thanks,
	
	
	
	

	Justin
	
	
	
	

	-----Original Message-----
	
	From: antl... at antlr.org
	
	[mailto:antl... at antlr.org] On Behalf Of Jim Idle
	
	Sent: Tuesday, December 28, 2010 3:04 PM
	
	To: antl... at antlr.org
	
	Subject: Re: [antlr-interest] [C target] Warnings in 64-bit compile
	
	
	
	

	There were some such warnings a number of versions back but they are
	
	all fixed as far as I know. What construct are you using that results
	
	in the warning? If you give me a reproducible grammar snippet, then I
	
	will fix it for the next release, which is just waiting on my other
	
	commitments right now.
	
	
	
	

	Jim
	
	
	
	

	-----Original Message-----
	
	From: antl... at antlr.org [mailto:antlr-interest-
	
	boun... at antlr.org] On Behalf Of Justin Murray
	
	Sent: Tuesday, December 28, 2010 11:59 AM
	
	To: antl... at antlr.org
	
	Subject: [antlr-interest] [C target] Warnings in 64-bit compile
	
	
	
	

	Jim,
	
	
	
	

	I am working on making our compiler support 64-bit builds, and have
	
	run
	
	into a number of compiler warnings due to conflicting types in the
	
	ANTLR generated C code:
	
	
	
	

	warning C4244: '=' : conversion from 'ANTLR3_MARKER' to
	
	'ANTLR3_UINT32', possible loss of data
	
	
	
	

	This comes from the line:
	
	
	
	

	axisMask_StartIndex = INDEX();
	
	
	
	

	axisMask_StartIndex is declared as type ANTLR3_UINT32, and INDEX() is
	
	returning type ANTLR3_MARKER. On a 64-bit build (on a Windows
	
	machine),
	
	ANTLR3_UINT32 is a typedef of uint32_t, and ANTLR3_MARKER is of type
	
	ANTLR3_INT64 which is a typedef of int64_t. It seems to me that this
	
	is
	
	a bug in the template, and that axisMask_StartIndex should have been
	
	declared as type ANTLR3_MARKER.
	
	
	
	

	My questions are, do you know of a quick workaround for this for now?
	
	Do you know if this will be fixed in the next release of the C target
	
	runtime? Also, is there a tenative release date for the C runtime
	
	that
	
	will officially support ANTLR 3.3 (it seems that the code generated
	
	by
	
	ANTLR 3.3 works ok with the 3.2 C runtime)?
	
	
	
	

	Thanks,
	
	
	
	

	Justin Murray
	
	Software Engineer
	
	jmur... at aerotech.com
	
	
	
	

	Aerotech, Inc.
	
	101 Zeta Drive
	
	Pittsburgh, PA 15238
	
	412-963-7470
	
	
	
	

	List: http://www.antlr.org/mailman/listinfo/antlr-interest
	
	Unsubscribe: http://www.antlr.org/mailman/options/antlr-
	
	interest/your-
	
	email-address
	
	

	
	
	List: http://www.antlr.org/mailman/listinfo/antlr-interest
	
	Unsubscribe:
	
	http://www.antlr.org/mailman/options/antlr-interest/your-email-address
	
	

	
	
	List: http://www.antlr.org/mailman/listinfo/antlr-interest
	
	Unsubscribe:
	http://www.antlr.org/mailman/options/antlr-interest/your-email-address



From douglasgodfrey at gmail.com  Fri Jun 24 08:39:10 2011
From: douglasgodfrey at gmail.com (Douglas Godfrey)
Date: Fri, 24 Jun 2011 11:39:10 -0400
Subject: [antlr-interest] Match a repetition of characters
In-Reply-To: <BANLkTi=vyV0nVbk0XKYFYXEsgYF9TPMVXg@mail.gmail.com>
References: <BANLkTi=vyV0nVbk0XKYFYXEsgYF9TPMVXg@mail.gmail.com>
Message-ID: <BANLkTim2-V8Z-27jK+L1qyds=S_S6od6HQ@mail.gmail.com>

underline returns [char symbol]
 : underlineAtom {$symbol=$underlineAtom.text} {$symbol}+ LINE_BREAK
 ;

underlineAtom
 : ( UNDERSCORE UNDERSCORE UNDERSCORE UNDERSCORE+ )
 | ( STAR STAR STAR STAR+ )
 | ( PIPE PIPE PIPE PIPE+ )
 | ( BACKTICK BACKTICK BACKTICK BACKTICK+ )
 | ( COLUMN COLUMN COLUMN COLUMN+ )
 | ( SPECIAL_CHAR SPECIAL_CHAR SPECIAL_CHAR SPECIAL_CHAR+ )
 ;



On Fri, Jun 24, 2011 at 6:02 AM, Robin <diabeteman at gmail.com> wrote:

> Hello everyone,
>
> I'm trying to write a rule that matches the repetition (4 or more) of the
> same special character
>
> For example:
>
> "^^^^^^^^^^^^^^^^^^^^"
>
> or
>
> "________________"
>
> I have these lexer rules :
>
> UNDERSCORE : '_';
> BACKTICK : '`';
> STAR : '*';
> PIPE : '|';
> COLUMN : ':';
> SPECIAL_CHAR :
>
> ('!'|'"'|'#'|'$'|'%'|'&'|'\''|'('|')'|'+'|','|'.'|'/'|';'|'<'|'='|'>'|'?'|'@'|'['|'\\'|']'|'^'|'{'|'}'|'~');
> LINE_BREAK : '\u000C'?'\r'?'\n';
>
> And I'd like to write a parser rule named "underline" that only matches if
> this is a repetition of *the same character* and that returns this
> character. So that enclosing rules can use it.
>
> For now I wrote this:
>
> underline returns [char symbol]
>  : underlineAtom {$symbol=$underlineAtom.text} {$symbol}+ LINE_BREAK
>  ;
>
> underlineAtom
>  : UNDERSCORE
>  | STAR
>  | PIPE
>  | BACKTICK
>  | COLUMN
>  | SPECIAL_CHAR
>  ;
>
> But my grammar does not compile...
>
> Can someone help me on this ? :)
>
> Thanks
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>

From jimi at temporal-wave.com  Fri Jun 24 09:06:52 2011
From: jimi at temporal-wave.com (Jim Idle)
Date: Fri, 24 Jun 2011 09:06:52 -0700
Subject: [antlr-interest] Maven and antlr 3.4 beta 3
Message-ID: <ea4b184e5e5eaa3ad2297264350dd100@mail.gmail.com>

The artifacts for Antlr 3.4 beta3 have been deployed to the ANTLR release
depot and will be picked up automatically by maven central when it next
swings by.



Artifact version: 3.4-beta3**



Jim

From asicaddress at gmail.com  Fri Jun 24 09:25:10 2011
From: asicaddress at gmail.com (A Z)
Date: Fri, 24 Jun 2011 11:25:10 -0500
Subject: [antlr-interest] ANTLR 3.4 rc3 (aka beta3)
In-Reply-To: <0E89ECF4-D3F7-4464-A309-547764CE084A@cs.usfca.edu>
References: <0E89ECF4-D3F7-4464-A309-547764CE084A@cs.usfca.edu>
Message-ID: <BANLkTinK8LSO+Y5KjAdrSadMpuzwBgou8w@mail.gmail.com>

g++ and Clang++ now both compile all my grammars built with 3.4.

I'm not sure how to build the runtime library, and tell g++ to use it.

Ad.


On Thu, Jun 23, 2011 at 6:03 PM, Terence Parr <parrt at cs.usfca.edu> wrote:

> hi, Jim fixed up the C runtime. please test it out:
>
> http://antlr.org/download/antlr-master-3.4-beta3-completejar.jar
> http://antlr.org/download/antlr-master-3.4-beta3-src.jar
> http://antlr.org/download/antlr-runtime-3.4-beta3-sources.jar
> http://antlr.org/download/antlr-runtime-3.4-beta3.jar
>
> Ter
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>

From jimi at temporal-wave.com  Fri Jun 24 09:42:11 2011
From: jimi at temporal-wave.com (Jim Idle)
Date: Fri, 24 Jun 2011 09:42:11 -0700
Subject: [antlr-interest] Changes to C runtime for 3.4
Message-ID: <6891fc889c7f39017adca219ac0d50c2@mail.gmail.com>

Please note that the documentation for the C runtime in 3.4 is yet to be
updated. In the meantime, if you wish to try it, then there is one change
that you need to be aware of:



1)      The distinction between ASCII and UCS2 input streams is now removed
and there is a single function: antlr3FileStreamNew() to replace the file
related input streams and a function? antlr3StringStreamNew to replace the
memory related input streams. Prototypes and usage:





antlr3FileStreamNew(pANTLR3_UINT8 fileName, ANTLR3_UINT32 encoding)

antlr3StringStreamNew(pANTLR3_UINT8 data, ANTLR3_UINT32 encoding,
ANTLR3_UINT32 size, pANTLR3_UINT8 name)



fileName ? path to input file in 8 bit characters. Used to call fopen()

data ? pointer to input data in any encoded form (note that I will change
this to void * in the next beta/release)

size ? the size of the input data (always bytesm regardless of encoding)

name ? The name to use for the string stream (passed to error handlers for
instance) may be NULL



Then the encoding values are:



ANTLR3_ENC_8BIT    ? 8 bit encoding (ASCII/latin1/etc) (replaces the
existing ASCII stream)

ANTLR3_ENC_UTF8    ? UTF8 encoding  (eats any BOM that may be present)

ANTLR3_ENC_UTF16   ? UTF16 encoding (also handles UCS2) ? determine byte
order from BOM or machine natural without BOM

ANTLR3_ENC_UTF16BE ? UTF16 encoding (also handles UCS2), big endian but no
BOM

ANTLR3_ENC_UTF16LE ? UTF16 encoding (also handles UCS2), little endian but
no BOM

ANTLR3_ENC_UTF32   - UTF32 encoding ? determine byte order from BOM or
machine natural without BOM

ANTLR3_ENC_UTF32BE - UTF32 encoding ? big endian but no BOM

ANTLR3_ENC_UTF32LE - UTF32 encoding ? little endian but no BOM

ANTLR3_ENC_EBCDIC  - EBCDIC encoding (8 bit).



Note that EBCDIC encoding means that the input is in EBCDIC and it is not
changed. The LA() method for EBCDIC encoding converts a character to ASCII
before matching. Therefore the pointers to the first character of the token
in the input stream remain pointing at EBCDIC and you are responsible for
any conversion of the token strings if you need to convert them.



Encoding is as per the Unicode standards and supports the full Unicode
character range and all surrogate pairs are decoded in UTF16. Note however
that for performance reasons, errors in the encoding are usually ignored
(for instance a valid hi surrogate that does not have a lo surrogate), but
that invalid sequences that may not be ignored, may screw up your input. You
can of course override any of the LA methods and report such things as
errors, should you need to do so. The purpose of LA() is to return the 32
bit integer Unicode code point for the specified character ? how it does
that is irrelevant to the lexer, which is just matching 32 but numbers. This
means you should not code your lexer to match surrogates, just the code
points.



Jim

From jimi at temporal-wave.com  Fri Jun 24 09:49:04 2011
From: jimi at temporal-wave.com (Jim Idle)
Date: Fri, 24 Jun 2011 09:49:04 -0700
Subject: [antlr-interest] reuse() methos in 3.4 C runtime
Message-ID: <7c0bbbf0ff9affa15bf236fadbb6bd26@mail.gmail.com>

Because the documentation is not yet up to date, here is an example of
reusing the allocated memory in input streams and token streams:



    for (i=0; i<iterations; i++) {



        // Run the parser.

        //

        psr->start(psr);



        // --------------------------------------

        // Now reset everything for the next run.

        // Order of calls is important.



        // Input stream can now be reused

        //

        input->reuse(input, sourceCode, sourceLen, sourceName);



        // Reset the common token stream so that it will reuse its resources

        //

        tstream->reset(tstream);



        // Reset the lexer (new function generated by antlr now)

        //

        lxr->reset(lxr);



        // Reset the parser (new function generated by antlr now)

        //

        psr->reset(psr);

    }



Note that tree parsers cannot reuse their allocations but this is rarely an
issue. The input->reuse() will reuse any memory it has allocated, but
requires that you handle the reading of the input files (or otherwise supply
a pointer to them). The input files are assumed to be encoded in the way
that the original input was created, for instance:



input       = antlr3FileStreamNew(fname, ANTLR3_ENC_8BIT);



Then all reused input must be 8 bit encoded.



Jim

From jb at jblache.org  Fri Jun 24 10:10:05 2011
From: jb at jblache.org (Julien BLACHE)
Date: Fri, 24 Jun 2011 19:10:05 +0200
Subject: [antlr-interest] Changes to C runtime for 3.4
In-Reply-To: <6891fc889c7f39017adca219ac0d50c2@mail.gmail.com> (Jim Idle's
	message of "Fri, 24 Jun 2011 09:42:11 -0700")
References: <6891fc889c7f39017adca219ac0d50c2@mail.gmail.com>
Message-ID: <87aad7rw9e.fsf@sonic.technologeek.org>

Jim Idle <jimi at temporal-wave.com> wrote:

Hi Jim,

> 1)      The distinction between ASCII and UCS2 input streams is now removed
> and there is a single function: antlr3FileStreamNew() to replace the file
> related input streams and a function? antlr3StringStreamNew to replace the
> memory related input streams. Prototypes and usage:

antlr3StringStreamNew() crashes by calling a NULL funcptr when creating
a new UTF8 stream.

At the bottom of the function, input->strFactory->newStr8() is NULL.

JB.

-- 
Julien BLACHE                                   <http://www.jblache.org> 
<jb at jblache.org>                                  GPG KeyID 0xF5D65169

From jb at jblache.org  Fri Jun 24 10:24:08 2011
From: jb at jblache.org (Julien BLACHE)
Date: Fri, 24 Jun 2011 19:24:08 +0200
Subject: [antlr-interest] Changes to C runtime for 3.4
In-Reply-To: <87aad7rw9e.fsf@sonic.technologeek.org> (Julien BLACHE's message
	of "Fri, 24 Jun 2011 19:10:05 +0200")
References: <6891fc889c7f39017adca219ac0d50c2@mail.gmail.com>
	<87aad7rw9e.fsf@sonic.technologeek.org>
Message-ID: <8739izrvlz.fsf@sonic.technologeek.org>

Julien BLACHE <jb at jblache.org> wrote:

> antlr3StringStreamNew() crashes by calling a NULL funcptr when creating
> a new UTF8 stream.

Oh yeah, I've just seen why. Back to 8bit I go.

There's got to be a better way to handle this than bomb out on a NULL
funcptr, though.

JB.

-- 
Julien BLACHE                                   <http://www.jblache.org> 
<jb at jblache.org>                                  GPG KeyID 0xF5D65169

From jb at jblache.org  Fri Jun 24 10:25:34 2011
From: jb at jblache.org (Julien BLACHE)
Date: Fri, 24 Jun 2011 19:25:34 +0200
Subject: [antlr-interest] ANTLR 3.4 rc3 (aka beta3)
In-Reply-To: <0E89ECF4-D3F7-4464-A309-547764CE084A@cs.usfca.edu> (Terence
	Parr's message of "Thu, 23 Jun 2011 16:03:33 -0700")
References: <0E89ECF4-D3F7-4464-A309-547764CE084A@cs.usfca.edu>
Message-ID: <87y60rqgz5.fsf@sonic.technologeek.org>

Terence Parr <parrt at cs.usfca.edu> wrote:

Hi,

> hi, Jim fixed up the C runtime. please test it out:

Looks good, thanks! I'm not a heavy user though, but I see we've got
someone trying out more complex code.

JB.

-- 
Julien BLACHE                                   <http://www.jblache.org> 
<jb at jblache.org>                                  GPG KeyID 0xF5D65169

From jimi at temporal-wave.com  Fri Jun 24 10:33:31 2011
From: jimi at temporal-wave.com (Jim Idle)
Date: Fri, 24 Jun 2011 10:33:31 -0700
Subject: [antlr-interest] ANTLR 3.4 rc3 (aka beta3)
In-Reply-To: <6B458D23F5D4A24ABCDB3C78EA97393B02AFFD2A@EXCH-VIRTUAL.aerotechad.com>
References: <0E89ECF4-D3F7-4464-A309-547764CE084A@cs.usfca.edu>
	<6B458D23F5D4A24ABCDB3C78EA97393B02AFFD2A@EXCH-VIRTUAL.aerotechad.com>
Message-ID: <dd6e54153245e5df4e5759772fd384e1@mail.gmail.com>

You need to attach your grammar.

Jim

> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of Justin Murray
> Sent: Friday, June 24, 2011 8:06 AM
> To: antlr-interest at antlr.org
> Subject: Re: [antlr-interest] ANTLR 3.4 rc3 (aka beta3)
>
> Decided to give this a run on my C-target grammar. I'm getting the
> following error:
>
> 1>     [exec] org\antlr\grammar\v3\DefineGrammarItemsWalker.g: node
> from
> line 290:15 required (...)+ loop did not match anything at input '<end-
> of-alt>'
> 1>     [exec] error(10):  internal error: c:\...\Aerobasic.g :
> java.lang.ClassCastException: org.antlr.runtime.tree.CommonTree cannot
> be cast to org.antlr.tool.GrammarAST
> 1>     [exec]
> org.antlr.grammar.v3.DefineGrammarItemsWalker.rewrite(DefineGrammarItem
> sWalker.java:3464)
> 1>     [exec]
> org.antlr.grammar.v3.DefineGrammarItemsWalker.block(DefineGrammarItemsW
> alker.java:2073)
> 1>     [exec]
> org.antlr.grammar.v3.DefineGrammarItemsWalker.rule(DefineGrammarItemsWa
> lker.java:1627)
> 1>     [exec]
> org.antlr.grammar.v3.DefineGrammarItemsWalker.rules(DefineGrammarItemsW
> alker.java:1190)
> 1>     [exec]
> org.antlr.grammar.v3.DefineGrammarItemsWalker.grammarSpec(DefineGrammar
> ItemsWalker.java:623)
> 1>     [exec]
> org.antlr.grammar.v3.DefineGrammarItemsWalker.grammar_(DefineGrammarIte
> msWalker.java:315)
> 1>     [exec]
> org.antlr.tool.Grammar.defineGrammarSymbols(Grammar.java:748)
> 1>     [exec]
> org.antlr.tool.CompositeGrammar.defineGrammarSymbols(CompositeGrammar.j
> ava:369)
> 1>     [exec] org.antlr.Tool.process(Tool.java:465)
> 1>     [exec] org.antlr.Tool.main(Tool.java:93)
>
> I am not sure where to go from here. Note that this grammar does not
> output an AST, it is just a simple parser. This was working fine with
> ANTLR v3.3.
>
> Thanks,
>
> -- Justin
>
> On 6/23/2011 7:03 PM, Terence Parr wrote:
> > hi, Jim fixed up the C runtime. please test it out:
> >
> > http://antlr.org/download/antlr-master-3.4-beta3-completejar.jar
> > http://antlr.org/download/antlr-master-3.4-beta3-src.jar
> > http://antlr.org/download/antlr-runtime-3.4-beta3-sources.jar
> > http://antlr.org/download/antlr-runtime-3.4-beta3.jar
> >
> > Ter
> >
> > List: http://www.antlr.org/mailman/listinfo/antlr-interest
> > Unsubscribe:
> > http://www.antlr.org/mailman/options/antlr-interest/your-email-
> address
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
> email-address

From jimi at temporal-wave.com  Fri Jun 24 10:34:53 2011
From: jimi at temporal-wave.com (Jim Idle)
Date: Fri, 24 Jun 2011 10:34:53 -0700
Subject: [antlr-interest] [C target] Warnings in 64-bit compile
In-Reply-To: <6B458D23F5D4A24ABCDB3C78EA97393B02AFFD2B@EXCH-VIRTUAL.aerotechad.com>
References: <6B458D23F5D4A24ABCDB3C78EA97393B02AFFD2B@EXCH-VIRTUAL.aerotechad.com>
Message-ID: <8450b88bec361aa3932f066b61b05b4c@mail.gmail.com>

There are few bug fixes in this beta - all that I can get in will be in
the release version, which won't be too long now. However, you should
still avoid backtrack and memorize unless there is no other choice.

Jim

> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of Justin Murray
> Sent: Friday, June 24, 2011 8:12 AM
> To: antlr-interest at antlr.org
> Subject: Re: [antlr-interest] [C target] Warnings in 64-bit compile
>
> Jim,
>
> I just wanted to see if this was on your radar for the 3.4 C runtime
> update. I haven't been able to test it with beta3 because I hit some
> earlier roadblocks.
>
> Thanks,
>
> -- Justin
>
>
>
> 	Ah it is probably because the backtrack and memorize option. I
> strongly
>
> 	advise that you don't use these but left factor your grammar.
> However, I
>
> 	will fix it of course.
>
>
>
>
>
> 	Jim
>
>
>
>
>
> 	-----Original Message-----
>
> 	From: Justin Murray [mailto:jmur... at aerotech.com]
>
> 	Sent: Tuesday, December 28, 2010 1:39 PM
>
> 	To: Jim Idle; antl... at antlr.org
>
> 	Subject: RE: [antlr-interest] [C target] Warnings in 64-bit
> compile
>
>
>
>
>
> 	I believe that it is caused by using the memorize=true; option and
>
> 	building 64-bit. The following grammar has these warnings in the
>
> 	generated TestParser.c (compiled as C++ code in Visual Studio
> 2008).
>
> 	You will find the offending line at the beginning of the generated
>
> 	prog() function.
>
>
>
>
>
> 	-----------------------------
>
> 	grammar Test;
>
>
>
>
>
> 	options
>
> 	{
>
> 	language=C;
>
> 	backtrack=true;
>
> 	memoize=true;
>
> 	}
>
>
>
>
>
> 	prog
>
> 	: SOMETHING+;
>
>
>
>
>
> 	SOMETHING
>
> 	: 'A'..'Z';
>
>
>
> 	------------------------------
>
>
>
>
>
> 	Thanks,
>
>
>
>
>
> 	Justin
>
>
>
>
>
> 	-----Original Message-----
>
> 	From: antl... at antlr.org
>
> 	[mailto:antl... at antlr.org] On Behalf Of Jim Idle
>
> 	Sent: Tuesday, December 28, 2010 3:04 PM
>
> 	To: antl... at antlr.org
>
> 	Subject: Re: [antlr-interest] [C target] Warnings in 64-bit
> compile
>
>
>
>
>
> 	There were some such warnings a number of versions back but they
> are
>
> 	all fixed as far as I know. What construct are you using that
> results
>
> 	in the warning? If you give me a reproducible grammar snippet,
> then I
>
> 	will fix it for the next release, which is just waiting on my
> other
>
> 	commitments right now.
>
>
>
>
>
> 	Jim
>
>
>
>
>
> 	-----Original Message-----
>
> 	From: antl... at antlr.org [mailto:antlr-interest-
>
> 	boun... at antlr.org] On Behalf Of Justin Murray
>
> 	Sent: Tuesday, December 28, 2010 11:59 AM
>
> 	To: antl... at antlr.org
>
> 	Subject: [antlr-interest] [C target] Warnings in 64-bit compile
>
>
>
>
>
> 	Jim,
>
>
>
>
>
> 	I am working on making our compiler support 64-bit builds, and
> have
>
> 	run
>
> 	into a number of compiler warnings due to conflicting types in the
>
> 	ANTLR generated C code:
>
>
>
>
>
> 	warning C4244: '=' : conversion from 'ANTLR3_MARKER' to
>
> 	'ANTLR3_UINT32', possible loss of data
>
>
>
>
>
> 	This comes from the line:
>
>
>
>
>
> 	axisMask_StartIndex = INDEX();
>
>
>
>
>
> 	axisMask_StartIndex is declared as type ANTLR3_UINT32, and INDEX()
> is
>
> 	returning type ANTLR3_MARKER. On a 64-bit build (on a Windows
>
> 	machine),
>
> 	ANTLR3_UINT32 is a typedef of uint32_t, and ANTLR3_MARKER is of
> type
>
> 	ANTLR3_INT64 which is a typedef of int64_t. It seems to me that
> this
>
> 	is
>
> 	a bug in the template, and that axisMask_StartIndex should have
> been
>
> 	declared as type ANTLR3_MARKER.
>
>
>
>
>
> 	My questions are, do you know of a quick workaround for this for
> now?
>
> 	Do you know if this will be fixed in the next release of the C
> target
>
> 	runtime? Also, is there a tenative release date for the C runtime
>
> 	that
>
> 	will officially support ANTLR 3.3 (it seems that the code
> generated
>
> 	by
>
> 	ANTLR 3.3 works ok with the 3.2 C runtime)?
>
>
>
>
>
> 	Thanks,
>
>
>
>
>
> 	Justin Murray
>
> 	Software Engineer
>
> 	jmur... at aerotech.com
>
>
>
>
>
> 	Aerotech, Inc.
>
> 	101 Zeta Drive
>
> 	Pittsburgh, PA 15238
>
> 	412-963-7470
>
>
>
>
>
> 	List: http://www.antlr.org/mailman/listinfo/antlr-interest
>
> 	Unsubscribe: http://www.antlr.org/mailman/options/antlr-
>
> 	interest/your-
>
> 	email-address
>
>
>
>
>
> 	List: http://www.antlr.org/mailman/listinfo/antlr-interest
>
> 	Unsubscribe:
>
> 	http://www.antlr.org/mailman/options/antlr-interest/your-email-
> address
>
>
>
>
>
> 	List: http://www.antlr.org/mailman/listinfo/antlr-interest
>
> 	Unsubscribe:
> 	http://www.antlr.org/mailman/options/antlr-interest/your-email-
> address
>
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
> email-address

From jimi at temporal-wave.com  Fri Jun 24 10:40:33 2011
From: jimi at temporal-wave.com (Jim Idle)
Date: Fri, 24 Jun 2011 10:40:33 -0700
Subject: [antlr-interest] Match a repetition of characters
In-Reply-To: <BANLkTim2-V8Z-27jK+L1qyds=S_S6od6HQ@mail.gmail.com>
References: <BANLkTi=vyV0nVbk0XKYFYXEsgYF9TPMVXg@mail.gmail.com>
	<BANLkTim2-V8Z-27jK+L1qyds=S_S6od6HQ@mail.gmail.com>
Message-ID: <d7ac8377ce23e4075a663c2bb2b9b4c4@mail.gmail.com>

Don't try to do this in the lexer or parser, you will just get difficult
to interpret syntax errors. You want to generate semantic errors with more
context. However, you want to do something like this if you must
distinguish 4 or more from singles:

fragment UNDERSCORES;
UNDERSCORE: '_'
             (    ('___')=> '_'+ {$type = UNDERSCORES;}
                 |
              )
;

But this:

UNDERSCORES: '_'+;

Then

prule: UNDERSCORES { if (countem($UNDERSCORES) < 4) { semantic error } ;


Is probably a better approach.

Jim


> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of Douglas Godfrey
> Sent: Friday, June 24, 2011 8:39 AM
> To: Robin
> Cc: antlr-interest at antlr.org
> Subject: Re: [antlr-interest] Match a repetition of characters
>
> underline returns [char symbol]
>  : underlineAtom {$symbol=$underlineAtom.text} {$symbol}+ LINE_BREAK  ;
>
> underlineAtom
>  : ( UNDERSCORE UNDERSCORE UNDERSCORE UNDERSCORE+ )  | ( STAR STAR STAR
> STAR+ )  | ( PIPE PIPE PIPE PIPE+ )  | ( BACKTICK BACKTICK BACKTICK
> BACKTICK+ )  | ( COLUMN COLUMN COLUMN COLUMN+ )  | ( SPECIAL_CHAR
> SPECIAL_CHAR SPECIAL_CHAR SPECIAL_CHAR+ )  ;
>
>
>
> On Fri, Jun 24, 2011 at 6:02 AM, Robin <diabeteman at gmail.com> wrote:
>
> > Hello everyone,
> >
> > I'm trying to write a rule that matches the repetition (4 or more) of
> > the same special character
> >
> > For example:
> >
> > "^^^^^^^^^^^^^^^^^^^^"
> >
> > or
> >
> > "________________"
> >
> > I have these lexer rules :
> >
> > UNDERSCORE : '_';
> > BACKTICK : '`';
> > STAR : '*';
> > PIPE : '|';
> > COLUMN : ':';
> > SPECIAL_CHAR :
> >
> >
> ('!'|'"'|'#'|'$'|'%'|'&'|'\''|'('|')'|'+'|','|'.'|'/'|';'|'<'|'='|'>'|
> > '?'|'@'|'['|'\\'|']'|'^'|'{'|'}'|'~');
> > LINE_BREAK : '\u000C'?'\r'?'\n';
> >
> > And I'd like to write a parser rule named "underline" that only
> > matches if this is a repetition of *the same character* and that
> > returns this character. So that enclosing rules can use it.
> >
> > For now I wrote this:
> >
> > underline returns [char symbol]
> >  : underlineAtom {$symbol=$underlineAtom.text} {$symbol}+ LINE_BREAK
> > ;
> >
> > underlineAtom
> >  : UNDERSCORE
> >  | STAR
> >  | PIPE
> >  | BACKTICK
> >  | COLUMN
> >  | SPECIAL_CHAR
> >  ;
> >
> > But my grammar does not compile...
> >
> > Can someone help me on this ? :)
> >
> > Thanks
> >
> > List: http://www.antlr.org/mailman/listinfo/antlr-interest
> > Unsubscribe:
> > http://www.antlr.org/mailman/options/antlr-interest/your-email-
> address
> >
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
> email-address

From jimi at temporal-wave.com  Fri Jun 24 10:41:36 2011
From: jimi at temporal-wave.com (Jim Idle)
Date: Fri, 24 Jun 2011 10:41:36 -0700
Subject: [antlr-interest] ANTLR 3.4 rc3 (aka beta3)
In-Reply-To: <BANLkTinK8LSO+Y5KjAdrSadMpuzwBgou8w@mail.gmail.com>
References: <0E89ECF4-D3F7-4464-A309-547764CE084A@cs.usfca.edu>
	<BANLkTinK8LSO+Y5KjAdrSadMpuzwBgou8w@mail.gmail.com>
Message-ID: <db80b83ccea9d9fb6c36cf8a86b7288e@mail.gmail.com>

Did you try reading the documentation?

Jim

> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of A Z
> Sent: Friday, June 24, 2011 9:25 AM
> To: antlr-interest at antlr.org
> Subject: Re: [antlr-interest] ANTLR 3.4 rc3 (aka beta3)
>
> g++ and Clang++ now both compile all my grammars built with 3.4.
>
> I'm not sure how to build the runtime library, and tell g++ to use it.
>
> Ad.
>
>
> On Thu, Jun 23, 2011 at 6:03 PM, Terence Parr <parrt at cs.usfca.edu>
> wrote:
>
> > hi, Jim fixed up the C runtime. please test it out:
> >
> > http://antlr.org/download/antlr-master-3.4-beta3-completejar.jar
> > http://antlr.org/download/antlr-master-3.4-beta3-src.jar
> > http://antlr.org/download/antlr-runtime-3.4-beta3-sources.jar
> > http://antlr.org/download/antlr-runtime-3.4-beta3.jar
> >
> > Ter
> >
> > List: http://www.antlr.org/mailman/listinfo/antlr-interest
> > Unsubscribe:
> > http://www.antlr.org/mailman/options/antlr-interest/your-email-
> address
> >
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
> email-address

From jimi at temporal-wave.com  Fri Jun 24 10:44:59 2011
From: jimi at temporal-wave.com (Jim Idle)
Date: Fri, 24 Jun 2011 10:44:59 -0700
Subject: [antlr-interest] Changes to C runtime for 3.4
In-Reply-To: <87aad7rw9e.fsf@sonic.technologeek.org>
References: <6891fc889c7f39017adca219ac0d50c2@mail.gmail.com>
	<87aad7rw9e.fsf@sonic.technologeek.org>
Message-ID: <23053ec92fc8ff0a2be3719a9c9ab5bf@mail.gmail.com>

Thanks, I will look in to that. Perhaps a last minute change broke it.
However, the string stuff is only supported for 8 bit and UCS2 characters
in the runtime as I don't want to write all that code for every encoding,
when it is just a convenience thing that has caused more trouble than it
is worth. I must have taken out the init of that method in UTF8 mode.

Jim

> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of Julien BLACHE
> Sent: Friday, June 24, 2011 10:10 AM
> To: antlr-interest at antlr.org
> Subject: Re: [antlr-interest] Changes to C runtime for 3.4
>
> Jim Idle <jimi at temporal-wave.com> wrote:
>
> Hi Jim,
>
> > 1)      The distinction between ASCII and UCS2 input streams is now
> removed
> > and there is a single function: antlr3FileStreamNew() to replace the
> > file related input streams and a function" antlr3StringStreamNew to
> > replace the memory related input streams. Prototypes and usage:
>
> antlr3StringStreamNew() crashes by calling a NULL funcptr when creating
> a new UTF8 stream.
>
> At the bottom of the function, input->strFactory->newStr8() is NULL.
>
> JB.
>
> --
> Julien BLACHE
> <http://www.jblache.org>
> <jb at jblache.org>                                  GPG KeyID 0xF5D65169
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
> email-address

From jmurray at aerotech.com  Fri Jun 24 11:03:03 2011
From: jmurray at aerotech.com (Justin Murray)
Date: Fri, 24 Jun 2011 14:03:03 -0400
Subject: [antlr-interest] ANTLR 3.4 rc3 (aka beta3)
In-Reply-To: <dd6e54153245e5df4e5759772fd384e1@mail.gmail.com>
References: <0E89ECF4-D3F7-4464-A309-547764CE084A@cs.usfca.edu>	<6B458D23F5D4A24ABCDB3C78EA97393B02AFFD2A@EXCH-VIRTUAL.aerotechad.com>
	<dd6e54153245e5df4e5759772fd384e1@mail.gmail.com>
Message-ID: <6B458D23F5D4A24ABCDB3C78EA97393B02AFFD30@EXCH-VIRTUAL.aerotechad.com>

Here is the attached grammar. I was hoping not to have to subject anyone 
to this horribly designed language. It was conceived in the early 90s, 
and spent nearly 2 decades morphing into its current form before I got 
my hands on it. I was tasked with porting it to ANTLR (from Visual 
Parse++), without breaking backwards compatibility with any screwed up 
syntax that it may have parsed in the past. Anyways, the language is 
inherently ambiguous, and I have not yet been able to untangle it enough 
to be able to turn off the backtracking option. Still, somehow, the 
generated parser is able to out-perform what we had before, so kudos to 
Ter and Jim.

I am most concerned with the issue at hand so that I can eventually move 
to 3.4. As I said, this does work in 3.3, but I would not be surprised 
if I was just getting away with something. Any advice to help me turn 
off backtracking would certainly be appreciated as well, but please 
don't hurt yourself trying to comprehend this grammar.

Thanks,

-- Justin

On 6/24/2011 1:33 PM, Jim Idle wrote:
> You need to attach your grammar.
>
> Jim
>
>> -----Original Message-----
>> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
>> bounces at antlr.org] On Behalf Of Justin Murray
>> Sent: Friday, June 24, 2011 8:06 AM
>> To: antlr-interest at antlr.org
>> Subject: Re: [antlr-interest] ANTLR 3.4 rc3 (aka beta3)
>>
>> Decided to give this a run on my C-target grammar. I'm getting the
>> following error:
>>
>> 1>      [exec] org\antlr\grammar\v3\DefineGrammarItemsWalker.g: node
>> from
>> line 290:15 required (...)+ loop did not match anything at input '<end-
>> of-alt>'
>> 1>      [exec] error(10):  internal error: c:\...\Aerobasic.g :
>> java.lang.ClassCastException: org.antlr.runtime.tree.CommonTree cannot
>> be cast to org.antlr.tool.GrammarAST
>> 1>      [exec]
>> org.antlr.grammar.v3.DefineGrammarItemsWalker.rewrite(DefineGrammarItem
>> sWalker.java:3464)
>> 1>      [exec]
>> org.antlr.grammar.v3.DefineGrammarItemsWalker.block(DefineGrammarItemsW
>> alker.java:2073)
>> 1>      [exec]
>> org.antlr.grammar.v3.DefineGrammarItemsWalker.rule(DefineGrammarItemsWa
>> lker.java:1627)
>> 1>      [exec]
>> org.antlr.grammar.v3.DefineGrammarItemsWalker.rules(DefineGrammarItemsW
>> alker.java:1190)
>> 1>      [exec]
>> org.antlr.grammar.v3.DefineGrammarItemsWalker.grammarSpec(DefineGrammar
>> ItemsWalker.java:623)
>> 1>      [exec]
>> org.antlr.grammar.v3.DefineGrammarItemsWalker.grammar_(DefineGrammarIte
>> msWalker.java:315)
>> 1>      [exec]
>> org.antlr.tool.Grammar.defineGrammarSymbols(Grammar.java:748)
>> 1>      [exec]
>> org.antlr.tool.CompositeGrammar.defineGrammarSymbols(CompositeGrammar.j
>> ava:369)
>> 1>      [exec] org.antlr.Tool.process(Tool.java:465)
>> 1>      [exec] org.antlr.Tool.main(Tool.java:93)
>>
>> I am not sure where to go from here. Note that this grammar does not
>> output an AST, it is just a simple parser. This was working fine with
>> ANTLR v3.3.
>>
>> Thanks,
>>
>> -- Justin
>>
>> On 6/23/2011 7:03 PM, Terence Parr wrote:
>>> hi, Jim fixed up the C runtime. please test it out:
>>>
>>> http://antlr.org/download/antlr-master-3.4-beta3-completejar.jar
>>> http://antlr.org/download/antlr-master-3.4-beta3-src.jar
>>> http://antlr.org/download/antlr-runtime-3.4-beta3-sources.jar
>>> http://antlr.org/download/antlr-runtime-3.4-beta3.jar
>>>
>>> Ter
>>>
>>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>>> Unsubscribe:
>>> http://www.antlr.org/mailman/options/antlr-interest/your-email-
>> address
>>
>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
>> email-address
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: Aerobasic.g
Url: http://www.antlr.org/pipermail/antlr-interest/attachments/20110624/f167ada4/attachment-0001.pl 

From jimi at temporal-wave.com  Fri Jun 24 12:41:00 2011
From: jimi at temporal-wave.com (Jim Idle)
Date: Fri, 24 Jun 2011 12:41:00 -0700
Subject: [antlr-interest] Changes to C runtime for 3.4
In-Reply-To: <87aad7rw9e.fsf@sonic.technologeek.org>
References: <6891fc889c7f39017adca219ac0d50c2@mail.gmail.com>
	<87aad7rw9e.fsf@sonic.technologeek.org>
Message-ID: <bade98703225165a8df165afa18cf9bd@mail.gmail.com>

OK - I re-read my own comments, and this is deliberate. If you want to use
the ANTLR3_STRING stuff, then you will need to implement UTF8 versions of
the functions. However, I should really install the 8 bit versions so that
we do not crash, so I will do that, but the strings will have limited
value in UTF8 other than to get the actual characters.

Jim

> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of Julien BLACHE
> Sent: Friday, June 24, 2011 10:10 AM
> To: antlr-interest at antlr.org
> Subject: Re: [antlr-interest] Changes to C runtime for 3.4
>
> Jim Idle <jimi at temporal-wave.com> wrote:
>
> Hi Jim,
>
> > 1)      The distinction between ASCII and UCS2 input streams is now
> removed
> > and there is a single function: antlr3FileStreamNew() to replace the
> > file related input streams and a function" antlr3StringStreamNew to
> > replace the memory related input streams. Prototypes and usage:
>
> antlr3StringStreamNew() crashes by calling a NULL funcptr when creating
> a new UTF8 stream.
>
> At the bottom of the function, input->strFactory->newStr8() is NULL.
>
> JB.
>
> --
> Julien BLACHE
> <http://www.jblache.org>
> <jb at jblache.org>                                  GPG KeyID 0xF5D65169
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
> email-address

From diabeteman at gmail.com  Fri Jun 24 14:01:01 2011
From: diabeteman at gmail.com (Robin)
Date: Fri, 24 Jun 2011 23:01:01 +0200
Subject: [antlr-interest] Match a repetition of characters
In-Reply-To: <d7ac8377ce23e4075a663c2bb2b9b4c4@mail.gmail.com>
References: <BANLkTi=vyV0nVbk0XKYFYXEsgYF9TPMVXg@mail.gmail.com>
	<BANLkTim2-V8Z-27jK+L1qyds=S_S6od6HQ@mail.gmail.com>
	<d7ac8377ce23e4075a663c2bb2b9b4c4@mail.gmail.com>
Message-ID: <BANLkTikWqODZUaSV69z_K3C=5rFg44M-4g@mail.gmail.com>

The thing is that I'd like something more generic (I don't want to repeat
the code for each special character as there are about 30 of them that can
match)

Here is what I'm trying to match so you have the background
http://docutils.sourceforge.net/docs/ref/rst/restructuredtext.html#sections

The minimum length of the underline is driven by the length of the title
text. I was thinking about something like this :

https://raw.github.com/robin-jarry/rst4eclipse/master/src/main/java/org/diabeteman/rst4eclipse/Rst.g

But it doesn't work...


On Fri, Jun 24, 2011 at 7:40 PM, Jim Idle <jimi at temporal-wave.com> wrote:

> Don't try to do this in the lexer or parser, you will just get difficult
> to interpret syntax errors. You want to generate semantic errors with more
> context. However, you want to do something like this if you must
> distinguish 4 or more from singles:
>
> fragment UNDERSCORES;
> UNDERSCORE: '_'
>             (    ('___')=> '_'+ {$type = UNDERSCORES;}
>                 |
>              )
> ;
>
> But this:
>
> UNDERSCORES: '_'+;
>
> Then
>
> prule: UNDERSCORES { if (countem($UNDERSCORES) < 4) { semantic error } ;
>
>
> Is probably a better approach.
>
> Jim
>
>
> > -----Original Message-----
> > From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> > bounces at antlr.org] On Behalf Of Douglas Godfrey
> > Sent: Friday, June 24, 2011 8:39 AM
> > To: Robin
> > Cc: antlr-interest at antlr.org
> > Subject: Re: [antlr-interest] Match a repetition of characters
> >
> > underline returns [char symbol]
> >  : underlineAtom {$symbol=$underlineAtom.text} {$symbol}+ LINE_BREAK  ;
> >
> > underlineAtom
> >  : ( UNDERSCORE UNDERSCORE UNDERSCORE UNDERSCORE+ )  | ( STAR STAR STAR
> > STAR+ )  | ( PIPE PIPE PIPE PIPE+ )  | ( BACKTICK BACKTICK BACKTICK
> > BACKTICK+ )  | ( COLUMN COLUMN COLUMN COLUMN+ )  | ( SPECIAL_CHAR
> > SPECIAL_CHAR SPECIAL_CHAR SPECIAL_CHAR+ )  ;
> >
> >
> >
> > On Fri, Jun 24, 2011 at 6:02 AM, Robin <diabeteman at gmail.com> wrote:
> >
> > > Hello everyone,
> > >
> > > I'm trying to write a rule that matches the repetition (4 or more) of
> > > the same special character
> > >
> > > For example:
> > >
> > > "^^^^^^^^^^^^^^^^^^^^"
> > >
> > > or
> > >
> > > "________________"
> > >
> > > I have these lexer rules :
> > >
> > > UNDERSCORE : '_';
> > > BACKTICK : '`';
> > > STAR : '*';
> > > PIPE : '|';
> > > COLUMN : ':';
> > > SPECIAL_CHAR :
> > >
> > >
> > ('!'|'"'|'#'|'$'|'%'|'&'|'\''|'('|')'|'+'|','|'.'|'/'|';'|'<'|'='|'>'|
> > > '?'|'@'|'['|'\\'|']'|'^'|'{'|'}'|'~');
> > > LINE_BREAK : '\u000C'?'\r'?'\n';
> > >
> > > And I'd like to write a parser rule named "underline" that only
> > > matches if this is a repetition of *the same character* and that
> > > returns this character. So that enclosing rules can use it.
> > >
> > > For now I wrote this:
> > >
> > > underline returns [char symbol]
> > >  : underlineAtom {$symbol=$underlineAtom.text} {$symbol}+ LINE_BREAK
> > > ;
> > >
> > > underlineAtom
> > >  : UNDERSCORE
> > >  | STAR
> > >  | PIPE
> > >  | BACKTICK
> > >  | COLUMN
> > >  | SPECIAL_CHAR
> > >  ;
> > >
> > > But my grammar does not compile...
> > >
> > > Can someone help me on this ? :)
> > >
> > > Thanks
> > >
> > > List: http://www.antlr.org/mailman/listinfo/antlr-interest
> > > Unsubscribe:
> > > http://www.antlr.org/mailman/options/antlr-interest/your-email-
> > address
> > >
> >
> > List: http://www.antlr.org/mailman/listinfo/antlr-interest
> > Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
> > email-address
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>

From parrt at cs.usfca.edu  Fri Jun 24 18:15:41 2011
From: parrt at cs.usfca.edu (Terence Parr)
Date: Fri, 24 Jun 2011 18:15:41 -0700
Subject: [antlr-interest] ANTLR 3.4 rc3 (aka beta3)
In-Reply-To: <6B458D23F5D4A24ABCDB3C78EA97393B02AFFD2A@EXCH-VIRTUAL.aerotechad.com>
References: <0E89ECF4-D3F7-4464-A309-547764CE084A@cs.usfca.edu>
	<6B458D23F5D4A24ABCDB3C78EA97393B02AFFD2A@EXCH-VIRTUAL.aerotechad.com>
Message-ID: <43226028-7D6B-4CDE-86A4-EB13A8E1A66C@cs.usfca.edu>

I'm on this one, Jim. it's an issue with backtracking over an empty alt...tracking down. thanks for grammar.
Ter

On Jun 24, 2011, at 8:06 AM, Justin Murray wrote:

> Decided to give this a run on my C-target grammar. I'm getting the 
> following error:
> 
> 1>     [exec] org\antlr\grammar\v3\DefineGrammarItemsWalker.g: node from 
> line 290:15 required (...)+ loop did not match anything at input 
> '<end-of-alt>'
> 1>     [exec] error(10):  internal error: c:\...\Aerobasic.g : 
> java.lang.ClassCastException: org.antlr.runtime.tree.CommonTree cannot 
> be cast to org.antlr.tool.GrammarAST
> 1>     [exec] 
> org.antlr.grammar.v3.DefineGrammarItemsWalker.rewrite(DefineGrammarItemsWalker.java:3464)
> 1>     [exec] 
> org.antlr.grammar.v3.DefineGrammarItemsWalker.block(DefineGrammarItemsWalker.java:2073)
> 1>     [exec] 
> org.antlr.grammar.v3.DefineGrammarItemsWalker.rule(DefineGrammarItemsWalker.java:1627)
> 1>     [exec] 
> org.antlr.grammar.v3.DefineGrammarItemsWalker.rules(DefineGrammarItemsWalker.java:1190)
> 1>     [exec] 
> org.antlr.grammar.v3.DefineGrammarItemsWalker.grammarSpec(DefineGrammarItemsWalker.java:623)
> 1>     [exec] 
> org.antlr.grammar.v3.DefineGrammarItemsWalker.grammar_(DefineGrammarItemsWalker.java:315)
> 1>     [exec] org.antlr.tool.Grammar.defineGrammarSymbols(Grammar.java:748)
> 1>     [exec] 
> org.antlr.tool.CompositeGrammar.defineGrammarSymbols(CompositeGrammar.java:369)
> 1>     [exec] org.antlr.Tool.process(Tool.java:465)
> 1>     [exec] org.antlr.Tool.main(Tool.java:93)
> 
> I am not sure where to go from here. Note that this grammar does not 
> output an AST, it is just a simple parser. This was working fine with 
> ANTLR v3.3.
> 
> Thanks,
> 
> -- Justin
> 
> On 6/23/2011 7:03 PM, Terence Parr wrote:
>> hi, Jim fixed up the C runtime. please test it out:
>> 
>> http://antlr.org/download/antlr-master-3.4-beta3-completejar.jar
>> http://antlr.org/download/antlr-master-3.4-beta3-src.jar
>> http://antlr.org/download/antlr-runtime-3.4-beta3-sources.jar
>> http://antlr.org/download/antlr-runtime-3.4-beta3.jar
>> 
>> Ter
>> 
>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address


From parrt at cs.usfca.edu  Fri Jun 24 20:09:17 2011
From: parrt at cs.usfca.edu (Terence Parr)
Date: Fri, 24 Jun 2011 20:09:17 -0700
Subject: [antlr-interest] ANTLR 3.4 rc3 (aka beta3)
In-Reply-To: <6B458D23F5D4A24ABCDB3C78EA97393B02AFFD2A@EXCH-VIRTUAL.aerotechad.com>
References: <0E89ECF4-D3F7-4464-A309-547764CE084A@cs.usfca.edu>
	<6B458D23F5D4A24ABCDB3C78EA97393B02AFFD2A@EXCH-VIRTUAL.aerotechad.com>
Message-ID: <2C4CF16B-1C26-4795-BA2C-097915E8D8FF@cs.usfca.edu>

Ok, your rule subrule:

        ( 							{action}
        |   GOTO_? t=SOMENAME_ 	{action}
        ) 

will never match 2nd alt. it's backtracking over blank first alt and matches it. reverse them.

also, it exposed a bug in antlr backtracking alt detection.

Jim: I pushed to antlr3-main and 3.4 if you want to make another build.
Ter
On Jun 24, 2011, at 8:06 AM, Justin Murray wrote:

> Decided to give this a run on my C-target grammar. I'm getting the 
> following error:
> 
> 1>     [exec] org\antlr\grammar\v3\DefineGrammarItemsWalker.g: node from 
> line 290:15 required (...)+ loop did not match anything at input 
> '<end-of-alt>'
> 1>     [exec] error(10):  internal error: c:\...\Aerobasic.g : 
> java.lang.ClassCastException: org.antlr.runtime.tree.CommonTree cannot 
> be cast to org.antlr.tool.GrammarAST
> 1>     [exec] 
> org.antlr.grammar.v3.DefineGrammarItemsWalker.rewrite(DefineGrammarItemsWalker.java:3464)
> 1>     [exec] 
> org.antlr.grammar.v3.DefineGrammarItemsWalker.block(DefineGrammarItemsWalker.java:2073)
> 1>     [exec] 
> org.antlr.grammar.v3.DefineGrammarItemsWalker.rule(DefineGrammarItemsWalker.java:1627)
> 1>     [exec] 
> org.antlr.grammar.v3.DefineGrammarItemsWalker.rules(DefineGrammarItemsWalker.java:1190)
> 1>     [exec] 
> org.antlr.grammar.v3.DefineGrammarItemsWalker.grammarSpec(DefineGrammarItemsWalker.java:623)
> 1>     [exec] 
> org.antlr.grammar.v3.DefineGrammarItemsWalker.grammar_(DefineGrammarItemsWalker.java:315)
> 1>     [exec] org.antlr.tool.Grammar.defineGrammarSymbols(Grammar.java:748)
> 1>     [exec] 
> org.antlr.tool.CompositeGrammar.defineGrammarSymbols(CompositeGrammar.java:369)
> 1>     [exec] org.antlr.Tool.process(Tool.java:465)
> 1>     [exec] org.antlr.Tool.main(Tool.java:93)
> 
> I am not sure where to go from here. Note that this grammar does not 
> output an AST, it is just a simple parser. This was working fine with 
> ANTLR v3.3.
> 
> Thanks,
> 
> -- Justin
> 
> On 6/23/2011 7:03 PM, Terence Parr wrote:
>> hi, Jim fixed up the C runtime. please test it out:
>> 
>> http://antlr.org/download/antlr-master-3.4-beta3-completejar.jar
>> http://antlr.org/download/antlr-master-3.4-beta3-src.jar
>> http://antlr.org/download/antlr-runtime-3.4-beta3-sources.jar
>> http://antlr.org/download/antlr-runtime-3.4-beta3.jar
>> 
>> Ter
>> 
>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address


From dariusz.dwornikowski at cs.put.poznan.pl  Sat Jun 25 03:29:56 2011
From: dariusz.dwornikowski at cs.put.poznan.pl (Dariusz Dwornikowski)
Date: Sat, 25 Jun 2011 12:29:56 +0200
Subject: [antlr-interest] ANTLR problem with .+ in tree grammar
Message-ID: <BANLkTik+2Gs447jQpOarWR6NPfqKQHSDbA@mail.gmail.com>

Hi,

I've got such a problem. I am experimenting with the ANTLR in order to
implement some kind of language later. The example below.

Grammar file (interesting part):
...
tokens{
BODY;
}

componentStatement
    :    'component'^ IDENT  '{'! body '}'! ';'!
    ;

body
    :    .+ -> BODY
    ;
...

tree gramar file:
...

component




    :   ^('component' name=IDENT body=BODY) {comp.add(new
Component($name.text, $body.text));}





    ;

..

What i want is to catch such a situation (for experiment purposes only):

component Foo {
    anything goes here 123 :)
};

Now, I know rewrite in my example rewrites .+ to BODY it is ok. When I
change the grammar to
body
    :    .+ -> BODY
    ;

and tree grammar to:

component
    :   ^('component' name=IDENT body=(.+)) {comp.add(new
Component($name.text, $body.text));}





    ;

the generates Walker generates it wrong:
comp.add(new Component((name!=null?name.getText():null), b.text)); it
should have been b.getText()


How can I change files in order to catch what I want?





PS: ANTLR is great:) And Greetings to everybody :)



-- 
Pozdrawiam,
-----------------------------------------------------------------------------
Dariusz Dwornikowski,
Institute of Computing Science, Pozna? University of Technology
www.cs.put.poznan.pl/ddwornikowski/
room 421 WE | tel. +48 61 665 21 24   | mobile: +48 533 890 600
-----------------------------------------------------------------------------

From sharwell at pixelminegames.com  Sat Jun 25 09:55:34 2011
From: sharwell at pixelminegames.com (Sam Harwell)
Date: Sat, 25 Jun 2011 11:55:34 -0500
Subject: [antlr-interest] ANTLR problem with .+ in tree grammar
In-Reply-To: <BANLkTik+2Gs447jQpOarWR6NPfqKQHSDbA@mail.gmail.com>
References: <BANLkTik+2Gs447jQpOarWR6NPfqKQHSDbA@mail.gmail.com>
Message-ID: <00dc01cc3358$b409edf0$1c1dc9d0$@pixelminegames.com>

I use the following rule for that:

genericBlock
	:	'{'
		(genericBlock | ~('{'|'}'))*
		'}'
	;

Since the curly braces are inside the genericBlock rule, you'll have to modify your componentStatement rule:

componentStatement
    :    'component'^ IDENT  genericBlock ';'!
    ;

Sam

-----Original Message-----
From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-bounces at antlr.org] On Behalf Of Dariusz Dwornikowski
Sent: Saturday, June 25, 2011 5:30 AM
To: antlr-interest at antlr.org
Subject: [antlr-interest] ANTLR problem with .+ in tree grammar

Hi,

I've got such a problem. I am experimenting with the ANTLR in order to implement some kind of language later. The example below.

Grammar file (interesting part):
...
tokens{
BODY;
}

componentStatement
    :    'component'^ IDENT  '{'! body '}'! ';'!
    ;

body
    :    .+ -> BODY
    ;
...

tree gramar file:
...

component




    :   ^('component' name=IDENT body=BODY) {comp.add(new
Component($name.text, $body.text));}





    ;

..

What i want is to catch such a situation (for experiment purposes only):

component Foo {
    anything goes here 123 :)
};

Now, I know rewrite in my example rewrites .+ to BODY it is ok. When I change the grammar to body
    :    .+ -> BODY
    ;

and tree grammar to:

component
    :   ^('component' name=IDENT body=(.+)) {comp.add(new
Component($name.text, $body.text));}





    ;

the generates Walker generates it wrong:
comp.add(new Component((name!=null?name.getText():null), b.text)); it should have been b.getText()


How can I change files in order to catch what I want?





PS: ANTLR is great:) And Greetings to everybody :)



--
Pozdrawiam,
-----------------------------------------------------------------------------
Dariusz Dwornikowski,
Institute of Computing Science, Pozna? University of Technology www.cs.put.poznan.pl/ddwornikowski/
room 421 WE | tel. +48 61 665 21 24   | mobile: +48 533 890 600
-----------------------------------------------------------------------------

List: http://www.antlr.org/mailman/listinfo/antlr-interest
Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address


From mkappel at appfluent.com  Sat Jun 25 13:25:28 2011
From: mkappel at appfluent.com (Mike Kappel)
Date: Sat, 25 Jun 2011 15:25:28 -0500
Subject: [antlr-interest] ANTLRWorks Interpreter
Message-ID: <D2B56605970CC04B9EC42E07CD82CCF207E350F37E@AUSP01VMBX09.collaborationhost.net>

I just downloaded ANTLRWorks and tried the example expression grammar.  I type in a simple expression into the Interpreter and see the generated parse tree.  Fine.  I then load the SQL 2003 grammar and type in a simple Insert statement.  I click the arrow and it never returns from Interpreting (Operation in progress).  Can ANTLRWorks handle a more complex grammar?

Dr. Michael R. Kappel
mkappel at appfluent.com<mailto:mkappel at appfluent.com>


From bkiers at gmail.com  Sat Jun 25 13:43:28 2011
From: bkiers at gmail.com (Bart Kiers)
Date: Sat, 25 Jun 2011 22:43:28 +0200
Subject: [antlr-interest] ANTLRWorks Interpreter
In-Reply-To: <D2B56605970CC04B9EC42E07CD82CCF207E350F37E@AUSP01VMBX09.collaborationhost.net>
References: <D2B56605970CC04B9EC42E07CD82CCF207E350F37E@AUSP01VMBX09.collaborationhost.net>
Message-ID: <BANLkTimr3uW1bpszrS5Zktp64cYu2-KwEQ@mail.gmail.com>

The interpreter is only suitable for very small grammars (without
predicates!). For more complicated grammars, use ANTLRWorks' debugger
instead.

Regards,

Bart.


On Sat, Jun 25, 2011 at 10:25 PM, Mike Kappel <mkappel at appfluent.com> wrote:

> I just downloaded ANTLRWorks and tried the example expression grammar.  I
> type in a simple expression into the Interpreter and see the generated parse
> tree.  Fine.  I then load the SQL 2003 grammar and type in a simple Insert
> statement.  I click the arrow and it never returns from Interpreting
> (Operation in progress).  Can ANTLRWorks handle a more complex grammar?
>
> Dr. Michael R. Kappel
> mkappel at appfluent.com<mailto:mkappel at appfluent.com>
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>

From seaside.ki at me.com  Sat Jun 25 13:51:11 2011
From: seaside.ki at me.com (Stefan)
Date: Sat, 25 Jun 2011 22:51:11 +0200
Subject: [antlr-interest]
 =?iso-8859-1?q?ANTLR_ActionScript_target_broken_?=
 =?iso-8859-1?q?=7C=A0ANTLR_3=2E3_fail_to_compile_=3A_antlr3-maven-archety?=
 =?iso-8859-1?q?pe_does_not_exist?=
In-Reply-To: <6F1935FC-5D32-4DFF-9F6B-BA7C0B3E64F8@me.com>
References: <C458CF83-569A-494B-AEED-064FD74B6CC8@me.com>
	<104bd9e17b652e6f72da3645993fe5cb@mail.gmail.com>
	<6F1935FC-5D32-4DFF-9F6B-BA7C0B3E64F8@me.com>
Message-ID: <63A13AF9-0669-458B-AC50-31CE54639B5B@me.com>

Since the ActionScript target is buggy, I tried to compile ANTLR 3.3.

Installed Maven, set the PATH, and followed the instructions to compile ANTLR.

While I actually can maven subproject like gunit, I fail to maven the ANTLR folder.
I mean the main pm.xml. Get this error:

   [ERROR]     Child module /Users/KKK/Desktop/Neuer Ordner 4/antlr-3 2.3/antlr3-maven-archetype 
		of /Users/KKK/Desktop/Neuer Ordner 4/antlr-3 2.3/pom.xml does not exist

Part of the ANTLR distribution is antlr3-maven-plugin.

Since BUILD.txt states that building ANTLR is trivial, I wonder, I forgot to perform 
a trivial step ;-)

Could someone assist?

Stefan


Am 24.06.2011 um 00:50 schrieb Stefan:

> Thx Jim!
> 
> Ah, I see. I'll try to contact the author
> 
> I'd probably jump in and invest some days to reanimate the project. There are
> several problems, but all seem to be small and relatively easy fixable.
> 
> Let's see. Installing the Maven Eclipse plugin right now ;-)
> 
> Stefan
> 
> 
> Am 24.06.2011 um 00:29 schrieb Jim Idle:
> 
>> ActionScript has been orphaned as far as I can tell - you could try
>> emailing the original author of that target and see if they have any plans
>> to continue with it.
>> 
>> Jim
>> 
>>> -----Original Message-----
>>> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
>>> bounces at antlr.org] On Behalf Of Stefan
>>> Sent: Thursday, June 23, 2011 2:48 PM
>>> To: antlr-interest at antlr.org
>>> Subject: [antlr-interest] ANTLR ActionScript target broken
>>> 
>>> Hi,
>>> 
>>> According to these instructions, I'm trying to use ANTLR generated *.as
>>> files in a current Flash Builder 4.5.1 project.
>>> 
>>> Therefore, I added this ANTLR's Actionscript runtime to my project -
>>> without problems.
>>> 
>>> I compiled lexer/parser specs using ANTLRWorks without problems too.
>>> 
>>> I added the language option to the source *.g file to make ANTLR
>>> generate Actionscript sources:
>>> 
>>> options {
>>>   backtrack = true;
>>>   memoize = true;
>>>   k=2;
>>>   output = AST;
>>>   language=ActionScript;        // Added this
>>>   ASTLabelType = CommonTree;
>>> }
>>> Unfortunately, the ANTLR/ANTLRworks generated Actionscript code is
>>> buggy:
>>> 
>>> Catch statements read like this catch (RecognitionException re), but
>>> should read like this:catch ( re:RecognitionException ).
>>> 
>>> Furthermore, Flash Builder complains about the use of Array here:
>>> 
>>> public override function get tokenNames():Array { return
>>> PhpParser.tokenNames; } Besides this, other problems exist in the
>>> generated ActionScript sources. E.g. wrong function declaration,
>>> package declaration inside package, ChartStream.getLine() called
>>> instead of ChartStream.line(),...
>>> 
>>> I checked ANTLR itself too. But the pure JAR renders the same problem.
>>> Thus, ANTLRworks isn't the problem, but ANTLR itself.
>>> 
>>> Assuming that I did everything correct, I wonder if and when the ANTLR
>>> project may provide a bug fix.
>>> 
>>> Ah, hints how to make the current ANTLR work with ActionScript, would
>>> be even better ;-)
>>> 
>>> 
>>> Kinds regards,
>>> 
>>> S
>>> 
>>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>>> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
>>> email-address
>> 
>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
> 
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address


From mkappel at appfluent.com  Sat Jun 25 16:49:56 2011
From: mkappel at appfluent.com (Mike Kappel)
Date: Sat, 25 Jun 2011 18:49:56 -0500
Subject: [antlr-interest] ANTLRWorks Interpreter
In-Reply-To: <BANLkTimr3uW1bpszrS5Zktp64cYu2-KwEQ@mail.gmail.com>
References: <D2B56605970CC04B9EC42E07CD82CCF207E350F37E@AUSP01VMBX09.collaborationhost.net>
	<BANLkTimr3uW1bpszrS5Zktp64cYu2-KwEQ@mail.gmail.com>
Message-ID: <D2B56605970CC04B9EC42E07CD82CCF207E350F37F@AUSP01VMBX09.collaborationhost.net>

Thanks for your response.  I just tried the Debugger.  The Input box is not active so I type a simple SQL statement into the Interpreter textbox.  I went back to the Debugger and clicked on the Debug icon.  It never returned from Analyzing.

Mike

________________________________
From: Bart Kiers [mailto:bkiers at gmail.com]
Sent: Saturday, June 25, 2011 4:43 PM
To: Mike Kappel; antlr-interest at antlr.org interest
Subject: Re: [antlr-interest] ANTLRWorks Interpreter

The interpreter is only suitable for very small grammars (without predicates!). For more complicated grammars, use ANTLRWorks' debugger instead.

Regards,

Bart.


On Sat, Jun 25, 2011 at 10:25 PM, Mike Kappel <mkappel at appfluent.com<mailto:mkappel at appfluent.com>> wrote:
I just downloaded ANTLRWorks and tried the example expression grammar.  I type in a simple expression into the Interpreter and see the generated parse tree.  Fine.  I then load the SQL 2003 grammar and type in a simple Insert statement.  I click the arrow and it never returns from Interpreting (Operation in progress).  Can ANTLRWorks handle a more complex grammar?

Dr. Michael R. Kappel
mkappel at appfluent.com<mailto:mkappel at appfluent.com><mailto:mkappel at appfluent.com<mailto:mkappel at appfluent.com>>


List: http://www.antlr.org/mailman/listinfo/antlr-interest
Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address


From jimi at temporal-wave.com  Sat Jun 25 18:34:05 2011
From: jimi at temporal-wave.com (Jim Idle)
Date: Sat, 25 Jun 2011 18:34:05 -0700
Subject: [antlr-interest] ANTLR ActionScript target broken | ANTLR 3.3
	fail to compile : antlr3-maven-archetype does not exist
In-Reply-To: <63A13AF9-0669-458B-AC50-31CE54639B5B@me.com>
References: <C458CF83-569A-494B-AEED-064FD74B6CC8@me.com>
	<104bd9e17b652e6f72da3645993fe5cb@mail.gmail.com>
	<6F1935FC-5D32-4DFF-9F6B-BA7C0B3E64F8@me.com>
	<63A13AF9-0669-458B-AC50-31CE54639B5B@me.com>
Message-ID: <5E7B5965-A75F-436A-84F3-33C1D33678D0@temporal-wave.com>

Please send the full output and make sure you followed the instructions step by step with maven 2.x

On Jun 25, 2011, at 13:51, Stefan <seaside.ki at me.com> wrote:

> Since the ActionScript target is buggy, I tried to compile ANTLR 3.3.
> 
> Installed Maven, set the PATH, and followed the instructions to compile ANTLR.
> 
> While I actually can maven subproject like gunit, I fail to maven the ANTLR folder.
> I mean the main pm.xml. Get this error:
> 
>   [ERROR]     Child module /Users/KKK/Desktop/Neuer Ordner 4/antlr-3 2.3/antlr3-maven-archetype 
>        of /Users/KKK/Desktop/Neuer Ordner 4/antlr-3 2.3/pom.xml does not exist
> 
> Part of the ANTLR distribution is antlr3-maven-plugin.
> 
> Since BUILD.txt states that building ANTLR is trivial, I wonder, I forgot to perform 
> a trivial step ;-)
> 
> Could someone assist?
> 
> Stefan
> 
> 
> Am 24.06.2011 um 00:50 schrieb Stefan:
> 
>> Thx Jim!
>> 
>> Ah, I see. I'll try to contact the author
>> 
>> I'd probably jump in and invest some days to reanimate the project. There are
>> several problems, but all seem to be small and relatively easy fixable.
>> 
>> Let's see. Installing the Maven Eclipse plugin right now ;-)
>> 
>> Stefan
>> 
>> 
>> Am 24.06.2011 um 00:29 schrieb Jim Idle:
>> 
>>> ActionScript has been orphaned as far as I can tell - you could try
>>> emailing the original author of that target and see if they have any plans
>>> to continue with it.
>>> 
>>> Jim
>>> 
>>>> -----Original Message-----
>>>> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
>>>> bounces at antlr.org] On Behalf Of Stefan
>>>> Sent: Thursday, June 23, 2011 2:48 PM
>>>> To: antlr-interest at antlr.org
>>>> Subject: [antlr-interest] ANTLR ActionScript target broken
>>>> 
>>>> Hi,
>>>> 
>>>> According to these instructions, I'm trying to use ANTLR generated *.as
>>>> files in a current Flash Builder 4.5.1 project.
>>>> 
>>>> Therefore, I added this ANTLR's Actionscript runtime to my project -
>>>> without problems.
>>>> 
>>>> I compiled lexer/parser specs using ANTLRWorks without problems too.
>>>> 
>>>> I added the language option to the source *.g file to make ANTLR
>>>> generate Actionscript sources:
>>>> 
>>>> options {
>>>>  backtrack = true;
>>>>  memoize = true;
>>>>  k=2;
>>>>  output = AST;
>>>>  language=ActionScript;        // Added this
>>>>  ASTLabelType = CommonTree;
>>>> }
>>>> Unfortunately, the ANTLR/ANTLRworks generated Actionscript code is
>>>> buggy:
>>>> 
>>>> Catch statements read like this catch (RecognitionException re), but
>>>> should read like this:catch ( re:RecognitionException ).
>>>> 
>>>> Furthermore, Flash Builder complains about the use of Array here:
>>>> 
>>>> public override function get tokenNames():Array { return
>>>> PhpParser.tokenNames; } Besides this, other problems exist in the
>>>> generated ActionScript sources. E.g. wrong function declaration,
>>>> package declaration inside package, ChartStream.getLine() called
>>>> instead of ChartStream.line(),...
>>>> 
>>>> I checked ANTLR itself too. But the pure JAR renders the same problem.
>>>> Thus, ANTLRworks isn't the problem, but ANTLR itself.
>>>> 
>>>> Assuming that I did everything correct, I wonder if and when the ANTLR
>>>> project may provide a bug fix.
>>>> 
>>>> Ah, hints how to make the current ANTLR work with ActionScript, would
>>>> be even better ;-)
>>>> 
>>>> 
>>>> Kinds regards,
>>>> 
>>>> S
>>>> 
>>>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>>>> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
>>>> email-address
>>> 
>>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>>> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>> 
>> 
>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
> 
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address

From douglasgodfrey at gmail.com  Sat Jun 25 20:39:56 2011
From: douglasgodfrey at gmail.com (Douglas Godfrey)
Date: Sat, 25 Jun 2011 23:39:56 -0400
Subject: [antlr-interest] ANTLRWorks Interpreter
In-Reply-To: <D2B56605970CC04B9EC42E07CD82CCF207E350F37E@AUSP01VMBX09.collaborationhost.net>
References: <D2B56605970CC04B9EC42E07CD82CCF207E350F37E@AUSP01VMBX09.collaborationhost.net>
Message-ID: <BANLkTi=xeWM3aiygetQRGH0BxwA3Wys3ow@mail.gmail.com>

The SQL2003 grammar requires a 64bit OS and Java and 8GB of heap to run at
all.
See the comments at the beginning of the Sql2003Parser.g file.

On Sat, Jun 25, 2011 at 4:25 PM, Mike Kappel <mkappel at appfluent.com> wrote:

> I just downloaded ANTLRWorks and tried the example expression grammar.  I
> type in a simple expression into the Interpreter and see the generated parse
> tree.  Fine.  I then load the SQL 2003 grammar and type in a simple Insert
> statement.  I click the arrow and it never returns from Interpreting
> (Operation in progress).  Can ANTLRWorks handle a more complex grammar?
>
> Dr. Michael R. Kappel
> mkappel at appfluent.com<mailto:mkappel at appfluent.com>
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>

From dariusz.dwornikowski at cs.put.poznan.pl  Sun Jun 26 06:03:59 2011
From: dariusz.dwornikowski at cs.put.poznan.pl (Dariusz Dwornikowski)
Date: Sun, 26 Jun 2011 15:03:59 +0200
Subject: [antlr-interest] NullPointerException in actions for recurring rules
Message-ID: <BANLkTinnU3Zsb3__tyLvGVJ-zWY3kx_b3g@mail.gmail.com>

Hello Again,

What is the proper way to handle expression on abstract symbols (instead of
1+2+3+4, ive got only a+b+c etc)


rmdef returns [ProcessDef process]
    :    ^(PEPADEF pan=IDENT a=expression)
        {
        process = new ProcessDef();
        process.setLHS($pan.text);
        }
    ;

expression
    :    ^(COOP a=expression b=expression)
    |    ^(PREFIX a=expression b=expression) { print($a.text); }
    |    ^(CHOICE a=expression b=expression)
    |    procek=IDENT
    ;



In this case print($a.text); causes NullPointerException,


-- 
Pozdrawiam,
-----------------------------------------------------------------------------
Dariusz Dwornikowski,
Institute of Computing Science, Pozna? University of Technology
www.cs.put.poznan.pl/ddwornikowski/
room 421 WE | tel. +48 61 665 21 24   | mobile: +48 533 890 600
-----------------------------------------------------------------------------

From parrt at cs.usfca.edu  Sun Jun 26 09:57:34 2011
From: parrt at cs.usfca.edu (Terence Parr)
Date: Sun, 26 Jun 2011 09:57:34 -0700
Subject: [antlr-interest] NullPointerException in actions for recurring
	rules
In-Reply-To: <BANLkTinnU3Zsb3__tyLvGVJ-zWY3kx_b3g@mail.gmail.com>
References: <BANLkTinnU3Zsb3__tyLvGVJ-zWY3kx_b3g@mail.gmail.com>
Message-ID: <7E2A6065-8A3E-4E2E-91E0-448459D66C9C@cs.usfca.edu>

did you give token stream to the tree parser?
Ter
On Jun 26, 2011, at 6:03 AM, Dariusz Dwornikowski wrote:

> Hello Again,
> 
> What is the proper way to handle expression on abstract symbols (instead of
> 1+2+3+4, ive got only a+b+c etc)
> 
> 
> rmdef returns [ProcessDef process]
>    :    ^(PEPADEF pan=IDENT a=expression)
>        {
>        process = new ProcessDef();
>        process.setLHS($pan.text);
>        }
>    ;
> 
> expression
>    :    ^(COOP a=expression b=expression)
>    |    ^(PREFIX a=expression b=expression) { print($a.text); }
>    |    ^(CHOICE a=expression b=expression)
>    |    procek=IDENT
>    ;
> 
> 
> 
> In this case print($a.text); causes NullPointerException,
> 
> 
> -- 
> Pozdrawiam,
> -----------------------------------------------------------------------------
> Dariusz Dwornikowski,
> Institute of Computing Science, Pozna? University of Technology
> www.cs.put.poznan.pl/ddwornikowski/
> room 421 WE | tel. +48 61 665 21 24   | mobile: +48 533 890 600
> -----------------------------------------------------------------------------
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address


From dariusz.dwornikowski at cs.put.poznan.pl  Sun Jun 26 10:14:56 2011
From: dariusz.dwornikowski at cs.put.poznan.pl (Dariusz Dwornikowski)
Date: Sun, 26 Jun 2011 19:14:56 +0200
Subject: [antlr-interest] NullPointerException in actions for recurring
	rules
In-Reply-To: <7E2A6065-8A3E-4E2E-91E0-448459D66C9C@cs.usfca.edu>
References: <BANLkTinnU3Zsb3__tyLvGVJ-zWY3kx_b3g@mail.gmail.com>
	<7E2A6065-8A3E-4E2E-91E0-448459D66C9C@cs.usfca.edu>
Message-ID: <BANLkTikAWTn_sv0eXN76FFp_ZRzeX9L+rg@mail.gmail.com>

Yes i did.

I am getting close to (I think) the cause of that. I think this is because
the rule is recurrent.
I changed it to something like that and works now. Maybe it is not great
grammar, but hey I that is my third day :)

expression returns [String op]
    :    ^(COOP a=expression b=expression) {
            if (a!=null && b!=null) op = a+b ;
            print("COOP "+op);
    }
    |    ^(PREFIX a=expression b=expression) {
            if (a!=null && b!=null) op = a+"->"+b ;
            print("PREFIX "+op);

            }
    |    ^(CHOICE a=expression b=expression) {
        if (a!=null && b!=null) op = a+"+"+b ;
        print("CHOICE "+op);
            }
    |    IDENT {op=$IDENT.text;}
    ;

PS: Is there a way to force += return List of custom type ? I would like to
return a list of my custom objects, so later (higher in rule processing) I
could assign this list to my container. I've got many such containers
(components), for each of them many rules can be present.

component {
 something ( foo bar);
something2 (foo bar);
}



rule2 return [List list]
    :   ^( list+=otherrule*)
         { list=$list; }
   ;


otherrule return [MyCustomClass c]
    : foo bar
    ;




On 26 June 2011 18:57, Terence Parr <parrt at cs.usfca.edu> wrote:

> did you give token stream to the tree parser?
> Ter
> On Jun 26, 2011, at 6:03 AM, Dariusz Dwornikowski wrote:
>
> > Hello Again,
> >
> > What is the proper way to handle expression on abstract symbols (instead
> of
> > 1+2+3+4, ive got only a+b+c etc)
> >
> >
> > rmdef returns [ProcessDef process]
> >    :    ^(PEPADEF pan=IDENT a=expression)
> >        {
> >        process = new ProcessDef();
> >        process.setLHS($pan.text);
> >        }
> >    ;
> >
> > expression
> >    :    ^(COOP a=expression b=expression)
> >    |    ^(PREFIX a=expression b=expression) { print($a.text); }
> >    |    ^(CHOICE a=expression b=expression)
> >    |    procek=IDENT
> >    ;
> >
> >
> >
> > In this case print($a.text); causes NullPointerException,
> >
> >
> > --
> > Pozdrawiam,
> >
> -----------------------------------------------------------------------------
> > Dariusz Dwornikowski,
> > Institute of Computing Science, Pozna? University of Technology
> > www.cs.put.poznan.pl/ddwornikowski/
> > room 421 WE | tel. +48 61 665 21 24   | mobile: +48 533 890 600
> >
> -----------------------------------------------------------------------------
> >
> > List: http://www.antlr.org/mailman/listinfo/antlr-interest
> > Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>



-- 
Pozdrawiam,
-----------------------------------------------------------------------------
Dariusz Dwornikowski,
Institute of Computing Science, Pozna? University of Technology
www.cs.put.poznan.pl/ddwornikowski/
room 421 WE | tel. +48 61 665 21 24   | mobile: +48 533 890 600
-----------------------------------------------------------------------------

From parrt at cs.usfca.edu  Mon Jun 27 17:05:49 2011
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon, 27 Jun 2011 17:05:49 -0700
Subject: [antlr-interest] any more issues with 3.4 beta3/rc3?
Message-ID: <E558CA92-BA5C-4075-AD12-F3CF3366E9DD@cs.usfca.edu>

please try this out on your stuff. should be backward compatible; we'll release soon.

http://antlr.org/download/antlr-master-3.4-beta3-completejar.jar
http://antlr.org/download/antlr-master-3.4-beta3-src.jar
http://antlr.org/download/antlr-runtime-3.4-beta3-sources.jar
http://antlr.org/download/antlr-runtime-3.4-beta3.jar

Ter


From bill.andersen at mac.com  Mon Jun 27 19:21:00 2011
From: bill.andersen at mac.com (Bill Andersen)
Date: Mon, 27 Jun 2011 22:21:00 -0400
Subject: [antlr-interest] No errors on missing tokens?
Message-ID: <0049CFB4-9B68-4AC2-AF8C-1FF5691CEDD9@mac.com>

Hi Folks

I have a grammar split into a lexer grammar and parser grammar

I have not yet defined all the token types in the lexer, so the parser grammar is making reference to tokens that are not in the lexer .tokens file.  The lexer .tokens file has a max token # of 108.  This should produce errors but is not.  BTW, compiling the parser grammar yields a .tokens file with a max token # of 158.  

Can anyone tell me what's going on here?  Thanks

	.bill


From qiaomuf at gmail.com  Mon Jun 27 20:05:01 2011
From: qiaomuf at gmail.com (Mu Qiao)
Date: Tue, 28 Jun 2011 11:05:01 +0800
Subject: [antlr-interest] any more issues with 3.4 beta3/rc3?
In-Reply-To: <E558CA92-BA5C-4075-AD12-F3CF3366E9DD@cs.usfca.edu>
References: <E558CA92-BA5C-4075-AD12-F3CF3366E9DD@cs.usfca.edu>
Message-ID: <BANLkTi=L7yYcKkLTOB1UhZ3KTB7YCuYoHg@mail.gmail.com>

Hi,

I gave a quick test and there are two problems:
1. I have to set my locale to English, otherwise an exception will be thrown:
Exception in thread "main" java.lang.NoClassDefFoundError: org/antlr/Tool
Caused by: java.lang.ClassNotFoundException: org.antlr.Tool
	at java.net.URLClassLoader$1.run(URLClassLoader.java:217)
	at java.security.AccessController.doPrivileged(Native Method)
	at java.net.URLClassLoader.findClass(URLClassLoader.java:205)
	at java.lang.ClassLoader.loadClass(ClassLoader.java:321)
	at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:294)
	at java.lang.ClassLoader.loadClass(ClassLoader.java:266)
Exception in thread "main" java.lang.NoClassDefFoundError: org/antlr/Tool
Caused by: java.lang.ClassNotFoundException: org.antlr.Tool
	at java.net.URLClassLoader$1.run(URLClassLoader.java:217)
	at java.security.AccessController.doPrivileged(Native Method)
	at java.net.URLClassLoader.findClass(URLClassLoader.java:205)
	at java.lang.ClassLoader.loadClass(ClassLoader.java:321)
	at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:294)
	at java.lang.ClassLoader.loadClass(ClassLoader.java:266)

2. After setting my locale to English, my grammar cannot get compiled:
error(100): java_libbash.g:0:1: syntax error: antlr.print:
MismatchedTreeNodeException(28!=2)
error(100): java_libbash.g:0:1: syntax error: antlr.print:
MismatchedTreeNodeException(26!=2)
error(100): java_libbash.g:0:1: syntax error: antlr.print:
MismatchedTreeNodeException(26!=2)
error(100): java_libbash.g:0:1: syntax error: antlr.print:
MismatchedTreeNodeException(26!=2)
error(100): java_libbash.g:0:1: syntax error: antlr.print:
MismatchedTreeNodeException(26!=2)
error(100): java_libbash.g:0:1: syntax error: antlr.print:
MismatchedTreeNodeException(28!=2)
error(100): java_libbash.g:0:1: syntax error: antlr.print:
MismatchedTreeNodeException(26!=2)
error(100): java_libbash.g:0:1: syntax error: antlr.print:
MismatchedTreeNodeException(26!=2)
error(100): java_libbash.g:0:1: syntax error: antlr.print:
MismatchedTreeNodeException(26!=2)
error(100): java_libbash.g:0:1: syntax error: antlr.print:
MismatchedTreeNodeException(28!=2)

On Tue, Jun 28, 2011 at 8:05 AM, Terence Parr <parrt at cs.usfca.edu> wrote:
> please try this out on your stuff. should be backward compatible; we'll release soon.
>
> http://antlr.org/download/antlr-master-3.4-beta3-completejar.jar
> http://antlr.org/download/antlr-master-3.4-beta3-src.jar
> http://antlr.org/download/antlr-runtime-3.4-beta3-sources.jar
> http://antlr.org/download/antlr-runtime-3.4-beta3.jar
>
> Ter
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>



-- 
Best wishes,
Mu Qiao
GnuPG fingerprint: 92B1 B0C4 8D14 F8C4 EFA5? 3ACC 30B3 0DE4 17B1 57E9

From qiaomuf at gmail.com  Mon Jun 27 20:08:43 2011
From: qiaomuf at gmail.com (Mu Qiao)
Date: Tue, 28 Jun 2011 11:08:43 +0800
Subject: [antlr-interest] any more issues with 3.4 beta3/rc3?
In-Reply-To: <BANLkTi=L7yYcKkLTOB1UhZ3KTB7YCuYoHg@mail.gmail.com>
References: <E558CA92-BA5C-4075-AD12-F3CF3366E9DD@cs.usfca.edu>
	<BANLkTi=L7yYcKkLTOB1UhZ3KTB7YCuYoHg@mail.gmail.com>
Message-ID: <BANLkTi=_VZO4wRp_craqfq_yZLYqmQ3OwA@mail.gmail.com>

The grammar is attached.

On Tue, Jun 28, 2011 at 11:05 AM, Mu Qiao <qiaomuf at gmail.com> wrote:
> Hi,
>
> I gave a quick test and there are two problems:
> 1. I have to set my locale to English, otherwise an exception will be thrown:
> Exception in thread "main" java.lang.NoClassDefFoundError: org/antlr/Tool
> Caused by: java.lang.ClassNotFoundException: org.antlr.Tool
> ? ? ? ?at java.net.URLClassLoader$1.run(URLClassLoader.java:217)
> ? ? ? ?at java.security.AccessController.doPrivileged(Native Method)
> ? ? ? ?at java.net.URLClassLoader.findClass(URLClassLoader.java:205)
> ? ? ? ?at java.lang.ClassLoader.loadClass(ClassLoader.java:321)
> ? ? ? ?at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:294)
> ? ? ? ?at java.lang.ClassLoader.loadClass(ClassLoader.java:266)
> Exception in thread "main" java.lang.NoClassDefFoundError: org/antlr/Tool
> Caused by: java.lang.ClassNotFoundException: org.antlr.Tool
> ? ? ? ?at java.net.URLClassLoader$1.run(URLClassLoader.java:217)
> ? ? ? ?at java.security.AccessController.doPrivileged(Native Method)
> ? ? ? ?at java.net.URLClassLoader.findClass(URLClassLoader.java:205)
> ? ? ? ?at java.lang.ClassLoader.loadClass(ClassLoader.java:321)
> ? ? ? ?at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:294)
> ? ? ? ?at java.lang.ClassLoader.loadClass(ClassLoader.java:266)
>
> 2. After setting my locale to English, my grammar cannot get compiled:
> error(100): java_libbash.g:0:1: syntax error: antlr.print:
> MismatchedTreeNodeException(28!=2)
> error(100): java_libbash.g:0:1: syntax error: antlr.print:
> MismatchedTreeNodeException(26!=2)
> error(100): java_libbash.g:0:1: syntax error: antlr.print:
> MismatchedTreeNodeException(26!=2)
> error(100): java_libbash.g:0:1: syntax error: antlr.print:
> MismatchedTreeNodeException(26!=2)
> error(100): java_libbash.g:0:1: syntax error: antlr.print:
> MismatchedTreeNodeException(26!=2)
> error(100): java_libbash.g:0:1: syntax error: antlr.print:
> MismatchedTreeNodeException(28!=2)
> error(100): java_libbash.g:0:1: syntax error: antlr.print:
> MismatchedTreeNodeException(26!=2)
> error(100): java_libbash.g:0:1: syntax error: antlr.print:
> MismatchedTreeNodeException(26!=2)
> error(100): java_libbash.g:0:1: syntax error: antlr.print:
> MismatchedTreeNodeException(26!=2)
> error(100): java_libbash.g:0:1: syntax error: antlr.print:
> MismatchedTreeNodeException(28!=2)
>
> On Tue, Jun 28, 2011 at 8:05 AM, Terence Parr <parrt at cs.usfca.edu> wrote:
>> please try this out on your stuff. should be backward compatible; we'll release soon.
>>
>> http://antlr.org/download/antlr-master-3.4-beta3-completejar.jar
>> http://antlr.org/download/antlr-master-3.4-beta3-src.jar
>> http://antlr.org/download/antlr-runtime-3.4-beta3-sources.jar
>> http://antlr.org/download/antlr-runtime-3.4-beta3.jar
>>
>> Ter
>>
>>
>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>>
>
>
>
> --
> Best wishes,
> Mu Qiao
> GnuPG fingerprint: 92B1 B0C4 8D14 F8C4 EFA5? 3ACC 30B3 0DE4 17B1 57E9
>



-- 
Best wishes,
Mu Qiao
GnuPG fingerprint: 92B1 B0C4 8D14 F8C4 EFA5? 3ACC 30B3 0DE4 17B1 57E9
-------------- next part --------------
A non-text attachment was scrubbed...
Name: java_libbash.g
Type: application/octet-stream
Size: 18207 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20110628/ef5d5eaf/attachment.obj 

From andersen at highfleet.com  Tue Jun 28 10:34:39 2011
From: andersen at highfleet.com (Bill Andersen)
Date: Tue, 28 Jun 2011 13:34:39 -0400
Subject: [antlr-interest] No errors on missing tokens?
In-Reply-To: <0049CFB4-9B68-4AC2-AF8C-1FF5691CEDD9@mac.com>
References: <0049CFB4-9B68-4AC2-AF8C-1FF5691CEDD9@mac.com>
Message-ID: <DC2E99D3-9358-44BC-B36D-B8BC43B88517@highfleet.com>

Partial answer to my own question, in case anyone is interested.

I added all the missing token definitions to my lexer.  When I then compiled the lexer and parser and looked at the .tokens files, all the tokens and their type #s lined up.  So it seems that:

1) Given a complete lexer, the compilation of the parser grammar is using the lexer's .tokens properly

2) Compiling the parser yielded no errors for a complete lexer .tokens file

3) Compiling the parser signalled no errors for an incomplete lexer .tokens file


On Jun 27, 2011, at 22:21 , Bill Andersen wrote:

> Hi Folks
> 
> I have a grammar split into a lexer grammar and parser grammar
> 
> I have not yet defined all the token types in the lexer, so the parser grammar is making reference to tokens that are not in the lexer .tokens file.  The lexer .tokens file has a max token # of 108.  This should produce errors but is not.  BTW, compiling the parser grammar yields a .tokens file with a max token # of 158.  
> 
> Can anyone tell me what's going on here?  Thanks
> 
> 	.bill
> 
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address

Bill Andersen 
Highfleet, Inc. (www.highfleet.com)
3600 O'Donnell Street, Suite 600
Baltimore, MD 21224
Office: +1.410.675.1201
Cell: +1.443.858.6444
Fax: +1.410.675.1204






From parrt at cs.usfca.edu  Tue Jun 28 11:45:27 2011
From: parrt at cs.usfca.edu (Terence Parr)
Date: Tue, 28 Jun 2011 11:45:27 -0700
Subject: [antlr-interest] any more issues with 3.4 beta3/rc3?
In-Reply-To: <BANLkTi=L7yYcKkLTOB1UhZ3KTB7YCuYoHg@mail.gmail.com>
References: <E558CA92-BA5C-4075-AD12-F3CF3366E9DD@cs.usfca.edu>
	<BANLkTi=L7yYcKkLTOB1UhZ3KTB7YCuYoHg@mail.gmail.com>
Message-ID: <18B1E6D6-7806-43F0-8916-412FC608A573@cs.usfca.edu>


On Jun 27, 2011, at 8:05 PM, Mu Qiao wrote:

> Hi,
> 
> I gave a quick test and there are two problems:
> 1. I have to set my locale to English, otherwise an exception will be thrown:
> Exception in thread "main" java.lang.NoClassDefFoundError: org/antlr/Tool

howdy!  How is a java.lang.ClassNotFoundException a locale issue? launching is

$ java org.antlr.Tool

> 2. After setting my locale to English, my grammar cannot get compiled:
> error(100): java_libbash.g:0:1: syntax error: antlr.print:
> MismatchedTreeNodeException(28!=2)
> error(100): java_libbash.g:0:1: syntax error: antlr.print:
> MismatchedTreeNodeException(26!=2)
> error(100): java_libbash.g:0:1: syntax error: antlr.print:
> MismatchedTreeNodeException(26!=2)
> error(100): java_libbash.g:0:1: syntax error: antlr.print:
> MismatchedTreeNodeException(26!=2)
> error(100): java_libbash.g:0:1: syntax error: antlr.print:
> MismatchedTreeNodeException(26!=2)
> error(100): java_libbash.g:0:1: syntax error: antlr.print:
> MismatchedTreeNodeException(28!=2)
> error(100): java_libbash.g:0:1: syntax error: antlr.print:
> MismatchedTreeNodeException(26!=2)
> error(100): java_libbash.g:0:1: syntax error: antlr.print:
> MismatchedTreeNodeException(26!=2)
> error(100): java_libbash.g:0:1: syntax error: antlr.print:
> MismatchedTreeNodeException(26!=2)
> error(100): java_libbash.g:0:1: syntax error: antlr.print:
> MismatchedTreeNodeException(28!=2)

I'll check it out.
Ter

From parrt at cs.usfca.edu  Tue Jun 28 11:48:23 2011
From: parrt at cs.usfca.edu (Terence Parr)
Date: Tue, 28 Jun 2011 11:48:23 -0700
Subject: [antlr-interest] any more issues with 3.4 beta3/rc3?
In-Reply-To: <BANLkTi=_VZO4wRp_craqfq_yZLYqmQ3OwA@mail.gmail.com>
References: <E558CA92-BA5C-4075-AD12-F3CF3366E9DD@cs.usfca.edu>
	<BANLkTi=L7yYcKkLTOB1UhZ3KTB7YCuYoHg@mail.gmail.com>
	<BANLkTi=_VZO4wRp_craqfq_yZLYqmQ3OwA@mail.gmail.com>
Message-ID: <37E4FCA3-51F6-4CCE-861F-3B2692C2937F@cs.usfca.edu>

BTW, with -Xwatchconversion i see a decision antlr can't deal with:

building lookahead DFA (d=14) for ()* loopback of 111:17: ( ( BLANK !)? command_separator ( ( BLANK !)? EOL !)* ( BLANK !)? list_level_1 )*
convert DFA state 0 (407 nfa states)
convert DFA state 1 (279 nfa states)
convert DFA state 2 (751 nfa states)
convert DFA state 3 (438 nfa states)
convert DFA state 4 (749 nfa states)
convert DFA state 20 (693 nfa states)
convert DFA state 21 (614 nfa states)
convert DFA state 22 (603 nfa states)
...

On Jun 27, 2011, at 8:08 PM, Mu Qiao wrote:

> The grammar is attached.
> 
> On Tue, Jun 28, 2011 at 11:05 AM, Mu Qiao <qiaomuf at gmail.com> wrote:
>> Hi,
>> 
>> I gave a quick test and there are two problems:
>> 1. I have to set my locale to English, otherwise an exception will be thrown:
>> Exception in thread "main" java.lang.NoClassDefFoundError: org/antlr/Tool
>> Caused by: java.lang.ClassNotFoundException: org.antlr.Tool
>>        at java.net.URLClassLoader$1.run(URLClassLoader.java:217)
>>        at java.security.AccessController.doPrivileged(Native Method)
>>        at java.net.URLClassLoader.findClass(URLClassLoader.java:205)
>>        at java.lang.ClassLoader.loadClass(ClassLoader.java:321)
>>        at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:294)
>>        at java.lang.ClassLoader.loadClass(ClassLoader.java:266)
>> Exception in thread "main" java.lang.NoClassDefFoundError: org/antlr/Tool
>> Caused by: java.lang.ClassNotFoundException: org.antlr.Tool
>>        at java.net.URLClassLoader$1.run(URLClassLoader.java:217)
>>        at java.security.AccessController.doPrivileged(Native Method)
>>        at java.net.URLClassLoader.findClass(URLClassLoader.java:205)
>>        at java.lang.ClassLoader.loadClass(ClassLoader.java:321)
>>        at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:294)
>>        at java.lang.ClassLoader.loadClass(ClassLoader.java:266)
>> 
>> 2. After setting my locale to English, my grammar cannot get compiled:
>> error(100): java_libbash.g:0:1: syntax error: antlr.print:
>> MismatchedTreeNodeException(28!=2)
>> error(100): java_libbash.g:0:1: syntax error: antlr.print:
>> MismatchedTreeNodeException(26!=2)
>> error(100): java_libbash.g:0:1: syntax error: antlr.print:
>> MismatchedTreeNodeException(26!=2)
>> error(100): java_libbash.g:0:1: syntax error: antlr.print:
>> MismatchedTreeNodeException(26!=2)
>> error(100): java_libbash.g:0:1: syntax error: antlr.print:
>> MismatchedTreeNodeException(26!=2)
>> error(100): java_libbash.g:0:1: syntax error: antlr.print:
>> MismatchedTreeNodeException(28!=2)
>> error(100): java_libbash.g:0:1: syntax error: antlr.print:
>> MismatchedTreeNodeException(26!=2)
>> error(100): java_libbash.g:0:1: syntax error: antlr.print:
>> MismatchedTreeNodeException(26!=2)
>> error(100): java_libbash.g:0:1: syntax error: antlr.print:
>> MismatchedTreeNodeException(26!=2)
>> error(100): java_libbash.g:0:1: syntax error: antlr.print:
>> MismatchedTreeNodeException(28!=2)
>> 
>> On Tue, Jun 28, 2011 at 8:05 AM, Terence Parr <parrt at cs.usfca.edu> wrote:
>>> please try this out on your stuff. should be backward compatible; we'll release soon.
>>> 
>>> http://antlr.org/download/antlr-master-3.4-beta3-completejar.jar
>>> http://antlr.org/download/antlr-master-3.4-beta3-src.jar
>>> http://antlr.org/download/antlr-runtime-3.4-beta3-sources.jar
>>> http://antlr.org/download/antlr-runtime-3.4-beta3.jar
>>> 
>>> Ter
>>> 
>>> 
>>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>>> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>>> 
>> 
>> 
>> 
>> --
>> Best wishes,
>> Mu Qiao
>> GnuPG fingerprint: 92B1 B0C4 8D14 F8C4 EFA5  3ACC 30B3 0DE4 17B1 57E9
>> 
> 
> 
> 
> -- 
> Best wishes,
> Mu Qiao
> GnuPG fingerprint: 92B1 B0C4 8D14 F8C4 EFA5  3ACC 30B3 0DE4 17B1 57E9
> <java_libbash.g>


From parrt at cs.usfca.edu  Tue Jun 28 12:22:32 2011
From: parrt at cs.usfca.edu (Terence Parr)
Date: Tue, 28 Jun 2011 12:22:32 -0700
Subject: [antlr-interest] any more issues with 3.4 beta3/rc3?
In-Reply-To: <BANLkTi=L7yYcKkLTOB1UhZ3KTB7YCuYoHg@mail.gmail.com>
References: <E558CA92-BA5C-4075-AD12-F3CF3366E9DD@cs.usfca.edu>
	<BANLkTi=L7yYcKkLTOB1UhZ3KTB7YCuYoHg@mail.gmail.com>
Message-ID: <11ECD0D9-E0AD-4E7D-A57F-8B2F5212C460@cs.usfca.edu>


On Jun 27, 2011, at 8:05 PM, Mu Qiao wrote:
> 2. After setting my locale to English, my grammar cannot get compiled:
> error(100): java_libbash.g:0:1: syntax error: antlr.print:
> MismatchedTreeNodeException(28!=2)
> error(100): java_libbash.g:0:1: syntax error: antlr.print:
> MismatchedTreeNodeException(26!=2)
> error(100): java_libbash.g:0:1: syntax error: antlr.print:
> MismatchedTreeNodeException(26!=2)
> error(100): java_libbash.g:0:1: syntax error: antlr.print:
> MismatchedTreeNodeException(26!=2)
> error(100): java_libbash.g:0:1: syntax error: antlr.print:
> MismatchedTreeNodeException(26!=2)
> error(100): java_libbash.g:0:1: syntax error: antlr.print:
> MismatchedTreeNodeException(28!=2)
> error(100): java_libbash.g:0:1: syntax error: antlr.print:
> MismatchedTreeNodeException(26!=2)
> error(100): java_libbash.g:0:1: syntax error: antlr.print:
> MismatchedTreeNodeException(26!=2)
> error(100): java_libbash.g:0:1: syntax error: antlr.print:
> MismatchedTreeNodeException(26!=2)
> error(100): java_libbash.g:0:1: syntax error: antlr.print:
> MismatchedTreeNodeException(28!=2)

Fixed.

thanks!

Ter

From bill.andersen at mac.com  Tue Jun 28 13:06:04 2011
From: bill.andersen at mac.com (Bill Andersen)
Date: Tue, 28 Jun 2011 16:06:04 -0400
Subject: [antlr-interest] Interesting parser grammar issue
Message-ID: <92A9FDCD-52D0-4205-A852-AA16EA433DE3@mac.com>

(Using 3.3)

Check out this partial grammar for SPARQL 1.1 (http://www.w3.org/TR/sparql11-query/)

// [2]
query
	: prologue 
	  ( select_query
	  | construct_query
	  | describe_query
	  | ask_query
	  )
	  bindings_clause 
	;
	
// [4]
prologue
	: prologue_decl*
	; 
	
// [4.1]
prologue_decl
  : prefix_decl
  | base_decl
  ;
	
// [5]
base_decl
	: BASE IRI_REF
	;
	
// [6]
prefix_decl
	: PREFIX PNAME_NS IRI_REF
	;

The above version works - at least for SELECT queries.  The original production [4] that I replaced with [4] and [4.1] looked like

// [4]
prologue
	: ( base_decl | prefix_decl )*
	;

The grammar with this production will fail to parse SPARQL queries like the following, with the error "NoViableAltException: line 1:0 no viable alternative at input 'PREFIX'"

PREFIX  data:  <http://example.org/foaf/>
PREFIX  foaf:  <http://xmlns.com/foaf/0.1/>
PREFIX  rdfs:  <http://www.w3.org/2000/01/rdf-schema#>

SELECT ?mbox ?nick ?ppd
FROM NAMED <http://example.org/foaf/aliceFoaf>
FROM NAMED <http://example.org/foaf/bobFoaf>
WHERE
{
  GRAPH data:aliceFoaf
  {
    ?alice foaf:mbox <alice> ;
           foaf:knows ?whom .
    ?whom  foaf:mbox ?mbox ;
           rdfs:seeAlso ?ppd .
    ?ppd  a foaf:PersonalProfileDocument .
  } .
  GRAPH ?ppd
  {
      ?w foaf:mbox ?mbox ;
         foaf:nick ?nick
  }
}

So, why should the new [4] + [4.1] combination work where the original [4] would not?



From parrt at cs.usfca.edu  Tue Jun 28 13:56:42 2011
From: parrt at cs.usfca.edu (Terence Parr)
Date: Tue, 28 Jun 2011 13:56:42 -0700
Subject: [antlr-interest] antlr 3.4 beta 4 (release candidate)
Message-ID: <70C70841-1722-4250-8A6B-11AAC06C52E0@cs.usfca.edu>

http://antlr.org/download

a few more things fixed.

Ter

From kirby.bohling at gmail.com  Tue Jun 28 14:06:49 2011
From: kirby.bohling at gmail.com (Kirby Bohling)
Date: Tue, 28 Jun 2011 16:06:49 -0500
Subject: [antlr-interest] No errors on missing tokens?
In-Reply-To: <B5BC1293-DB73-41E9-8411-D6A8FDD8DED7@highfleet.com>
References: <0049CFB4-9B68-4AC2-AF8C-1FF5691CEDD9@mac.com>
	<DC2E99D3-9358-44BC-B36D-B8BC43B88517@highfleet.com>
	<BANLkTi=+MYBvBJk=UYCEtQ29sxf4jRZ_5g@mail.gmail.com>
	<B5BC1293-DB73-41E9-8411-D6A8FDD8DED7@highfleet.com>
Message-ID: <BANLkTi=LD1R0xcvPe=ZC-SvG6xaLpOGDNg@mail.gmail.com>

Naturally I forgot to add ANTLR Interest to by Reply-To, so the
information is captured in case it is useful to others.   I didn't
think you'd mind my inclusion of your reply also.

On Tue, Jun 28, 2011 at 12:52 PM, Bill Andersen <andersen at highfleet.com> wrote:
> Thanks, Kirby
>
> Yup. ?I triple (no.. quadruple) checked that. ?I cleaned the project, manually deleted the .tokens files, etc. ?All the standard stuff. ?Sorry... ?My questions to the list tend to be a little ADD-like and I leave out important details like that.
>
> This is a genuine bug unless I'm missing something really obvious.
>
> BTW, great reply. ?Doesn't help me but it will help ANTLR newbies.
>
> ? ? ? ?.bill
>
> On Jun 28, 2011, at 13:45 , Kirby Bohling wrote:
>
>> On Tue, Jun 28, 2011 at 12:34 PM, Bill Andersen <andersen at highfleet.com> wrote:
>>> Partial answer to my own question, in case anyone is interested.
>>>
>>> I added all the missing token definitions to my lexer. ?When I then compiled the lexer and parser and looked at the .tokens files, all the tokens and their type #s lined up. ?So it seems that:
>>>
>>> 1) Given a complete lexer, the compilation of the parser grammar is using the lexer's .tokens properly
>>>
>>> 2) Compiling the parser yielded no errors for a complete lexer .tokens file
>>>
>>> 3) Compiling the parser signalled no errors for an incomplete lexer .tokens file
>>>
>>>
>>> On Jun 27, 2011, at 22:21 , Bill Andersen wrote:
>>>
>>>> Hi Folks
>>>>
>>>> I have a grammar split into a lexer grammar and parser grammar
>>>>
>>>> I have not yet defined all the token types in the lexer, so the parser grammar is making reference to tokens that are not in the lexer .tokens file. ?The lexer .tokens file has a max token # of 108. ?This should produce errors but is not. ?BTW, compiling the parser grammar yields a .tokens file with a max token # of 158.
>>>>
>>>> Can anyone tell me what's going on here? ?Thanks
>>>>
>>>> ? ? ? .bill
>>>>
>>
>> Looking at your original question, did you have the correct
>> declaration tokenVocab in your options section in the Parser/Tree
>> grammars?
>>
>> options {
>> ...
>> ? ?tokenVocab=MyNameHereLexer;
>> ...
>> }
>>
>> I use Maven, so it always generates both the Lexer and Parser at the
>> same time (and if you have TreeGrammars, you'll definitely need this
>> there). ?I'm not sure if you need to process both in a single run or
>> not. ?I always declare all my virtual tokens in my Lexer so I have one
>> file that has them all, but I know that it isn't necessary (I put them
>> temporarily in the Parser while until I get everything working then
>> migrate them to the lexer as I add rules that need virtual tokens).
>> However, if you don't declare the tokenVocab and you have split
>> Lexer/Parser grammars it definitely causes problems with tokens not
>> being in sync, and the types of things you are describing.
>>
>> Not sure if this is your problem, but it is how I have problems like
>> what you are describing. ?So even if it doesn't help you, hopefully it
>> helps others quickly spot one of my beginner mistakes with ANTLR.
>>
>> Kirby
>
> Bill Andersen
> Highfleet, Inc. (www.highfleet.com)
> 3600 O'Donnell Street, Suite 600
> Baltimore, MD 21224
> Office: +1.410.675.1201
> Cell: +1.443.858.6444
> Fax: +1.410.675.1204
>
>
>
>
>
>

From jimi at temporal-wave.com  Tue Jun 28 14:07:15 2011
From: jimi at temporal-wave.com (Jim Idle)
Date: Tue, 28 Jun 2011 14:07:15 -0700
Subject: [antlr-interest] C runtime 3.4 beta 4
Message-ID: <309e83d6a43ae1a0d49ded5182f7c0af@mail.gmail.com>

http://antlr.org/download/C



Jim

From qiaomuf at gmail.com  Tue Jun 28 18:31:51 2011
From: qiaomuf at gmail.com (Mu Qiao)
Date: Wed, 29 Jun 2011 09:31:51 +0800
Subject: [antlr-interest] C runtime 3.4 beta 4
In-Reply-To: <309e83d6a43ae1a0d49ded5182f7c0af@mail.gmail.com>
References: <309e83d6a43ae1a0d49ded5182f7c0af@mail.gmail.com>
Message-ID: <BANLkTi=8tVfJwWgSkh+rULVPbq12ZYpw=g@mail.gmail.com>

Now this version takes quite long time to generate the source code. I
know there are many issues in my grammar (java_libbash.g attached in
previous email). But 3.1 and 3.3 can generate the source code in less
than 30 seconds. Now it takes 10 minutes and I don't see it's ending.
Some output with -X -Xwatchconversion

convert DFA state 7103 (32 nfa states)
convert DFA state 7104 (799 nfa states)
convert DFA state 7600 (1017 nfa states)
convert DFA state 7601 (1017 nfa states)
convert DFA state 7602 (1009 nfa states)
convert DFA state 7603 (1009 nfa states)
convert DFA state 7604 (1005 nfa states)
convert DFA state 7605 (1505 nfa states)
convert DFA state 7607 (5682 nfa states)
convert DFA state 7608 (535 nfa states)
convert DFA state 7612 (1019 nfa states)
convert DFA state 7613 (33 nfa states)
convert DFA state 7614 (1015 nfa states)
convert DFA state 7615 (1015 nfa states)
convert DFA state 7616 (1015 nfa states)
convert DFA state 7617 (1015 nfa states)
......

On Wed, Jun 29, 2011 at 5:07 AM, Jim Idle <jimi at temporal-wave.com> wrote:
> http://antlr.org/download/C
>
>
>
> Jim
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>



-- 
Best wishes,
Mu Qiao
GnuPG fingerprint: 92B1 B0C4 8D14 F8C4 EFA5? 3ACC 30B3 0DE4 17B1 57E9

From parrt at cs.usfca.edu  Tue Jun 28 18:34:20 2011
From: parrt at cs.usfca.edu (Terence Parr)
Date: Tue, 28 Jun 2011 18:34:20 -0700
Subject: [antlr-interest] C runtime 3.4 beta 4
In-Reply-To: <BANLkTi=8tVfJwWgSkh+rULVPbq12ZYpw=g@mail.gmail.com>
References: <309e83d6a43ae1a0d49ded5182f7c0af@mail.gmail.com>
	<BANLkTi=8tVfJwWgSkh+rULVPbq12ZYpw=g@mail.gmail.com>
Message-ID: <2519C7C7-64CE-473E-BE64-2693C6603978@cs.usfca.edu>

3.3 should be the same. yep, just checked.  see:

http://www.antlr.org/wiki/display/ANTLR3/ANTLR+spins+forever+on+my+grammar

Ter
On Jun 28, 2011, at 6:31 PM, Mu Qiao wrote:

> Now this version takes quite long time to generate the source code. I
> know there are many issues in my grammar (java_libbash.g attached in
> previous email). But 3.1 and 3.3 can generate the source code in less
> than 30 seconds. Now it takes 10 minutes and I don't see it's ending.
> Some output with -X -Xwatchconversion
> 
> convert DFA state 7103 (32 nfa states)
> convert DFA state 7104 (799 nfa states)
> convert DFA state 7600 (1017 nfa states)
> convert DFA state 7601 (1017 nfa states)
> convert DFA state 7602 (1009 nfa states)
> convert DFA state 7603 (1009 nfa states)
> convert DFA state 7604 (1005 nfa states)
> convert DFA state 7605 (1505 nfa states)
> convert DFA state 7607 (5682 nfa states)
> convert DFA state 7608 (535 nfa states)
> convert DFA state 7612 (1019 nfa states)
> convert DFA state 7613 (33 nfa states)
> convert DFA state 7614 (1015 nfa states)
> convert DFA state 7615 (1015 nfa states)
> convert DFA state 7616 (1015 nfa states)
> convert DFA state 7617 (1015 nfa states)
> ......
> 
> On Wed, Jun 29, 2011 at 5:07 AM, Jim Idle <jimi at temporal-wave.com> wrote:
>> http://antlr.org/download/C
>> 
>> 
>> 
>> Jim
>> 
>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>> 
> 
> 
> 
> -- 
> Best wishes,
> Mu Qiao
> GnuPG fingerprint: 92B1 B0C4 8D14 F8C4 EFA5  3ACC 30B3 0DE4 17B1 57E9
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address


From qiaomuf at gmail.com  Tue Jun 28 18:42:02 2011
From: qiaomuf at gmail.com (Mu Qiao)
Date: Wed, 29 Jun 2011 09:42:02 +0800
Subject: [antlr-interest] C runtime 3.4 beta 4
In-Reply-To: <2519C7C7-64CE-473E-BE64-2693C6603978@cs.usfca.edu>
References: <309e83d6a43ae1a0d49ded5182f7c0af@mail.gmail.com>
	<BANLkTi=8tVfJwWgSkh+rULVPbq12ZYpw=g@mail.gmail.com>
	<2519C7C7-64CE-473E-BE64-2693C6603978@cs.usfca.edu>
Message-ID: <BANLkTimDUzEFOyAdWn5cqCCunOheknH_Tw@mail.gmail.com>

Ah yes, I haven't checked antlr3.3 for a long time so something might
have been changed. But antlr-3.1.3 does work for me.

On Wed, Jun 29, 2011 at 9:34 AM, Terence Parr <parrt at cs.usfca.edu> wrote:
> 3.3 should be the same. yep, just checked. ?see:
>
> http://www.antlr.org/wiki/display/ANTLR3/ANTLR+spins+forever+on+my+grammar
>
> Ter
> On Jun 28, 2011, at 6:31 PM, Mu Qiao wrote:
>
>> Now this version takes quite long time to generate the source code. I
>> know there are many issues in my grammar (java_libbash.g attached in
>> previous email). But 3.1 and 3.3 can generate the source code in less
>> than 30 seconds. Now it takes 10 minutes and I don't see it's ending.
>> Some output with -X -Xwatchconversion
>>
>> convert DFA state 7103 (32 nfa states)
>> convert DFA state 7104 (799 nfa states)
>> convert DFA state 7600 (1017 nfa states)
>> convert DFA state 7601 (1017 nfa states)
>> convert DFA state 7602 (1009 nfa states)
>> convert DFA state 7603 (1009 nfa states)
>> convert DFA state 7604 (1005 nfa states)
>> convert DFA state 7605 (1505 nfa states)
>> convert DFA state 7607 (5682 nfa states)
>> convert DFA state 7608 (535 nfa states)
>> convert DFA state 7612 (1019 nfa states)
>> convert DFA state 7613 (33 nfa states)
>> convert DFA state 7614 (1015 nfa states)
>> convert DFA state 7615 (1015 nfa states)
>> convert DFA state 7616 (1015 nfa states)
>> convert DFA state 7617 (1015 nfa states)
>> ......
>>
>> On Wed, Jun 29, 2011 at 5:07 AM, Jim Idle <jimi at temporal-wave.com> wrote:
>>> http://antlr.org/download/C
>>>
>>>
>>>
>>> Jim
>>>
>>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>>> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>>>
>>
>>
>>
>> --
>> Best wishes,
>> Mu Qiao
>> GnuPG fingerprint: 92B1 B0C4 8D14 F8C4 EFA5 ?3ACC 30B3 0DE4 17B1 57E9
>>
>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>



-- 
Best wishes,
Mu Qiao
GnuPG fingerprint: 92B1 B0C4 8D14 F8C4 EFA5? 3ACC 30B3 0DE4 17B1 57E9

From parrt at cs.usfca.edu  Tue Jun 28 19:15:33 2011
From: parrt at cs.usfca.edu (Terence Parr)
Date: Tue, 28 Jun 2011 19:15:33 -0700
Subject: [antlr-interest] locale issue fixed;
	was: test release of antlr 3.4
In-Reply-To: <87sjr4l4qp.fsf@sonic.technologeek.org>
References: <c1CB686F1-BFCB-4FA0-BB6F-8D15B01E4D16@cs.usfca.edu>
	<87mxhcn55k.fsf@sonic.technologeek.org>
	<8980822A-74CC-402B-9D7B-7E49449656E7@cs.usfca.edu>
	<87sjr4l4qp.fsf@sonic.technologeek.org>
Message-ID: <63EA0A24-8BA7-4170-9873-E66CA4EA9C09@cs.usfca.edu>

Fixed. didn't make it into beta4. next one.
Ter
On Jun 20, 2011, at 11:47 AM, Julien BLACHE wrote:

> Terence Parr <parrt at cs.usfca.edu> wrote:
> 
> Hi,
> 
>>> There also seems to be an issue wrt locale settings; unless running with
>>> LC_ALL=C, antlr bails out on me looking for
>>> org/antlr/tool/templates/messages/languages/fr.stg.
>> 
>> weird. this hasn't changed.
> 
> Could be caused by my locales settings on this system, I'll try on
> another system with different settings tomorrow. If you think of
> anything that can be done to track that down, let me know.
> 
> JB.
> 
> -- 
> Julien BLACHE                                   <http://www.jblache.org> 
> <jb at jblache.org>                                  GPG KeyID 0xF5D65169
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address


From hermenierfabien at gmail.com  Tue Jun 28 20:57:51 2011
From: hermenierfabien at gmail.com (Fabien Hermenier)
Date: Tue, 28 Jun 2011 21:57:51 -0600
Subject: [antlr-interest] Someting about range (to change)
Message-ID: <4E0AA2BF.1050905@gmail.com>

Hi

I am sorry, but this is another problem related to sequence of integer. 
I don't understand my error(s), despite severals
pass on the wiki page related to this use case.

I want to parse a string with a "sequence" parameter into it, such as 
"toto-[2 ..3]-toto".
Here is a short version of the grammar that works perfectly:
---
grammar tryout;

options {
     k=3;
}
fragment Digit :'0'..'9';
DEC_NUMBER: '1'..'9' Digit*;

fragment Letter    :'a'..'z'|'A'..'Z';

WS    :    ('\n'|'\r'|'\t'|' ') {$channel=HIDDEN;};
LEFTY: (Letter|Digit) (Letter|Digit|'-')* '[';
RIGHTY: ']' (('-' (Letter|Digit))|Letter|Digit)* ;


number :DEC_NUMBER; //HEX_NUMBER, OCT_NUMBER, ... are following but 
removed for this example.

range: LEFTY number '..' number RIGHTY;
---

This grammar accepts "toto-[1..3]-toto" or "toto-[1 .. 3]-toto".
Now, I want to be able to accept the LEFTY token or the RIGHTY token 
even if they contains a '.' inside (not at the beginning). So I've 
modified LEFTY as following:
LEFTY: (Letter|Digit) ('.'|Letter|Digit|'-')* '[';

Now, ANTLR does no longer accept "toto-[1..3]-toto". It requires at 
least one space between the first number and the range.
I have read the wiki page related to range, integer, and so one. But in 
my case, I don't see where my grammar is ambiguous as no token
can start with a '.' . So it seems there is a concept I don't get. Can 
anyone try to help me ?

Thanks in advance,
Fabien.

From bkiers at gmail.com  Tue Jun 28 22:51:59 2011
From: bkiers at gmail.com (Bart Kiers)
Date: Wed, 29 Jun 2011 07:51:59 +0200
Subject: [antlr-interest] Someting about range (to change)
In-Reply-To: <4E0AA2BF.1050905@gmail.com>
References: <4E0AA2BF.1050905@gmail.com>
Message-ID: <BANLkTikbifvDwqjkwpFwQPb64455yq6CQw@mail.gmail.com>

Hi Fabien,

Can you post the grammar that produces the error?

Bart.


On Wed, Jun 29, 2011 at 5:57 AM, Fabien Hermenier <hermenierfabien at gmail.com
> wrote:

> Hi
>
> I am sorry, but this is another problem related to sequence of integer.
> I don't understand my error(s), despite severals
> pass on the wiki page related to this use case.
>
> I want to parse a string with a "sequence" parameter into it, such as
> "toto-[2 ..3]-toto".
> Here is a short version of the grammar that works perfectly:
> ---
> grammar tryout;
>
> options {
>     k=3;
> }
> fragment Digit :'0'..'9';
> DEC_NUMBER: '1'..'9' Digit*;
>
> fragment Letter    :'a'..'z'|'A'..'Z';
>
> WS    :    ('\n'|'\r'|'\t'|' ') {$channel=HIDDEN;};
> LEFTY: (Letter|Digit) (Letter|Digit|'-')* '[';
> RIGHTY: ']' (('-' (Letter|Digit))|Letter|Digit)* ;
>
>
> number :DEC_NUMBER; //HEX_NUMBER, OCT_NUMBER, ... are following but
> removed for this example.
>
> range: LEFTY number '..' number RIGHTY;
> ---
>
> This grammar accepts "toto-[1..3]-toto" or "toto-[1 .. 3]-toto".
> Now, I want to be able to accept the LEFTY token or the RIGHTY token
> even if they contains a '.' inside (not at the beginning). So I've
> modified LEFTY as following:
> LEFTY: (Letter|Digit) ('.'|Letter|Digit|'-')* '[';
>
> Now, ANTLR does no longer accept "toto-[1..3]-toto". It requires at
> least one space between the first number and the range.
> I have read the wiki page related to range, integer, and so one. But in
> my case, I don't see where my grammar is ambiguous as no token
> can start with a '.' . So it seems there is a concept I don't get. Can
> anyone try to help me ?
>
> Thanks in advance,
> Fabien.
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>

From hermenierfabien at gmail.com  Tue Jun 28 22:53:54 2011
From: hermenierfabien at gmail.com (Fabien Hermenier)
Date: Tue, 28 Jun 2011 23:53:54 -0600
Subject: [antlr-interest] Someting about range (to change)
In-Reply-To: <BANLkTikbifvDwqjkwpFwQPb64455yq6CQw@mail.gmail.com>
References: <4E0AA2BF.1050905@gmail.com>
	<BANLkTikbifvDwqjkwpFwQPb64455yq6CQw@mail.gmail.com>
Message-ID: <4E0ABDF2.2080200@gmail.com>

Hi Bart

Here is. It's just a change in LEFTY:
---
fragment Digit :'0'..'9';
DEC_NUMBER: '1'..'9' Digit*;

fragment Letter    :'a'..'z'|'A'..'Z';

WS    :    ('\n'|'\r'|'\t'|' ') {$channel=HIDDEN;};
LEFTY: (Letter|Digit) ('.'|Letter|Digit|'-')* '[';
RIGHTY: ']' (('-' (Letter|Digit))|Letter|Digit)* ;

number :DEC_NUMBER;

range: LEFTY number '..' number RIGHTY;
---

Le 28/06/11 23:51, Bart Kiers a ?crit :
> Hi Fabien,
>
> Can you post the grammar that produces the error?
>
> Bart.
>
>
> On Wed, Jun 29, 2011 at 5:57 AM, Fabien Hermenier 
> <hermenierfabien at gmail.com <mailto:hermenierfabien at gmail.com>> wrote:
>
>     Hi
>
>     I am sorry, but this is another problem related to sequence of
>     integer.
>     I don't understand my error(s), despite severals
>     pass on the wiki page related to this use case.
>
>     I want to parse a string with a "sequence" parameter into it, such as
>     "toto-[2 ..3]-toto".
>     Here is a short version of the grammar that works perfectly:
>     ---
>     grammar tryout;
>
>     options {
>         k=3;
>     }
>     fragment Digit :'0'..'9';
>     DEC_NUMBER: '1'..'9' Digit*;
>
>     fragment Letter    :'a'..'z'|'A'..'Z';
>
>     WS    :    ('\n'|'\r'|'\t'|' ') {$channel=HIDDEN;};
>     LEFTY: (Letter|Digit) (Letter|Digit|'-')* '[';
>     RIGHTY: ']' (('-' (Letter|Digit))|Letter|Digit)* ;
>
>
>     number :DEC_NUMBER; //HEX_NUMBER, OCT_NUMBER, ... are following but
>     removed for this example.
>
>     range: LEFTY number '..' number RIGHTY;
>     ---
>
>     This grammar accepts "toto-[1..3]-toto" or "toto-[1 .. 3]-toto".
>     Now, I want to be able to accept the LEFTY token or the RIGHTY token
>     even if they contains a '.' inside (not at the beginning). So I've
>     modified LEFTY as following:
>     LEFTY: (Letter|Digit) ('.'|Letter|Digit|'-')* '[';
>
>     Now, ANTLR does no longer accept "toto-[1..3]-toto". It requires at
>     least one space between the first number and the range.
>     I have read the wiki page related to range, integer, and so one.
>     But in
>     my case, I don't see where my grammar is ambiguous as no token
>     can start with a '.' . So it seems there is a concept I don't get. Can
>     anyone try to help me ?
>
>     Thanks in advance,
>     Fabien.
>
>     List: http://www.antlr.org/mailman/listinfo/antlr-interest
>     Unsubscribe:
>     http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>
>


-- 
postdoctoral researcher at Flux
School of Computing, University of Utah
http://sites.google.com/site/hermenierfabien/home


From bkiers at gmail.com  Wed Jun 29 04:32:42 2011
From: bkiers at gmail.com (Bart Kiers)
Date: Wed, 29 Jun 2011 13:32:42 +0200
Subject: [antlr-interest] Someting about range (to change)
In-Reply-To: <4E0ABDF2.2080200@gmail.com>
References: <4E0AA2BF.1050905@gmail.com>
	<BANLkTikbifvDwqjkwpFwQPb64455yq6CQw@mail.gmail.com>
	<4E0ABDF2.2080200@gmail.com>
Message-ID: <BANLkTim2RtBybQnuowZikmKxVJdSnKv2SQ@mail.gmail.com>

Hi Fabien,

Note that the fact that `..` (let's call it DOT_DOT) does not appear in a
lexer rule, there _is_ a token being created because you defined DOT_DOT inside
a parser rule.

The lexer has a problem with input like:

  123..

The lexer tries to construct a LEFTY from it instead of a DEC_NUMBER
followed by a DOT_DOT.

Better let LEFTY _not_ possibly start with a Digit:

    LEFTY : Letter ('.' | Letter | Digit | '-')* '[';

Bart.


On Wed, Jun 29, 2011 at 7:53 AM, Fabien Hermenier <hermenierfabien at gmail.com
> wrote:

>  Hi Bart
>
> Here is. It's just a change in LEFTY:
> ---
>
> fragment Digit :'0'..'9';
> DEC_NUMBER: '1'..'9' Digit*;
>
> fragment Letter    :'a'..'z'|'A'..'Z';
>
> WS    :    ('\n'|'\r'|'\t'|' ') {$channel=HIDDEN;};
> LEFTY: (Letter|Digit) ('.'|Letter|Digit|'-')* '[';
> RIGHTY: ']' (('-' (Letter|Digit))|Letter|Digit)* ;
>
> number :DEC_NUMBER;
>
> range: LEFTY number '..' number RIGHTY;
> ---
>
> Le 28/06/11 23:51, Bart Kiers a ?crit :
>
> Hi Fabien,
>
>  Can you post the grammar that produces the error?
>
>  Bart.
>
>
> On Wed, Jun 29, 2011 at 5:57 AM, Fabien Hermenier <
> hermenierfabien at gmail.com> wrote:
>
>> Hi
>>
>> I am sorry, but this is another problem related to sequence of integer.
>> I don't understand my error(s), despite severals
>> pass on the wiki page related to this use case.
>>
>> I want to parse a string with a "sequence" parameter into it, such as
>> "toto-[2 ..3]-toto".
>> Here is a short version of the grammar that works perfectly:
>> ---
>> grammar tryout;
>>
>> options {
>>     k=3;
>> }
>> fragment Digit :'0'..'9';
>> DEC_NUMBER: '1'..'9' Digit*;
>>
>> fragment Letter    :'a'..'z'|'A'..'Z';
>>
>> WS    :    ('\n'|'\r'|'\t'|' ') {$channel=HIDDEN;};
>> LEFTY: (Letter|Digit) (Letter|Digit|'-')* '[';
>> RIGHTY: ']' (('-' (Letter|Digit))|Letter|Digit)* ;
>>
>>
>> number :DEC_NUMBER; //HEX_NUMBER, OCT_NUMBER, ... are following but
>> removed for this example.
>>
>> range: LEFTY number '..' number RIGHTY;
>> ---
>>
>> This grammar accepts "toto-[1..3]-toto" or "toto-[1 .. 3]-toto".
>> Now, I want to be able to accept the LEFTY token or the RIGHTY token
>> even if they contains a '.' inside (not at the beginning). So I've
>> modified LEFTY as following:
>> LEFTY: (Letter|Digit) ('.'|Letter|Digit|'-')* '[';
>>
>> Now, ANTLR does no longer accept "toto-[1..3]-toto". It requires at
>> least one space between the first number and the range.
>> I have read the wiki page related to range, integer, and so one. But in
>> my case, I don't see where my grammar is ambiguous as no token
>> can start with a '.' . So it seems there is a concept I don't get. Can
>> anyone try to help me ?
>>
>> Thanks in advance,
>> Fabien.
>>
>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>> Unsubscribe:
>> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>>
>
>
>
> --
> postdoctoral researcher at Flux
> School of Computing, University of Utahhttp://sites.google.com/site/hermenierfabien/home
>
>

From hermenierfabien at gmail.com  Wed Jun 29 07:04:02 2011
From: hermenierfabien at gmail.com (Fabien Hermenier)
Date: Wed, 29 Jun 2011 08:04:02 -0600
Subject: [antlr-interest] Someting about range (to change)
In-Reply-To: <BANLkTim2RtBybQnuowZikmKxVJdSnKv2SQ@mail.gmail.com>
References: <4E0AA2BF.1050905@gmail.com>
	<BANLkTikbifvDwqjkwpFwQPb64455yq6CQw@mail.gmail.com>
	<4E0ABDF2.2080200@gmail.com>
	<BANLkTim2RtBybQnuowZikmKxVJdSnKv2SQ@mail.gmail.com>
Message-ID: <4E0B30D2.8070609@gmail.com>

Hi Bart

Your fix works fine. So the problem was in reality due to the fact that 
LEFTY and DEC_NUMBER can start with the same character.

Thanks,
Fabien
Le 29/06/11 05:32, Bart Kiers a ?crit :
> Hi Fabien,
>
> Note that the fact that `..` (let's call it DOT_DOT) does not appear 
> in a lexer rule, there _is_ a token being created because you defined 
> DOT_DOT inside a parser rule.
>
> The lexer has a problem with input like:
>
>   123..
>
> The lexer tries to construct a LEFTY from it instead of a DEC_NUMBER 
> followed by a DOT_DOT.
>
> Better let LEFTY _not_ possibly start with a Digit:
>
> LEFTY : Letter ('.' | Letter | Digit | '-')* '[';
>
> Bart.
>
>
> On Wed, Jun 29, 2011 at 7:53 AM, Fabien Hermenier 
> <hermenierfabien at gmail.com <mailto:hermenierfabien at gmail.com>> wrote:
>
>     Hi Bart
>
>     Here is. It's just a change in LEFTY:
>     ---
>
>     fragment Digit :'0'..'9';
>     DEC_NUMBER: '1'..'9' Digit*;
>
>     fragment Letter    :'a'..'z'|'A'..'Z';
>
>     WS    :    ('\n'|'\r'|'\t'|' ') {$channel=HIDDEN;};
>     LEFTY: (Letter|Digit) ('.'|Letter|Digit|'-')* '[';
>     RIGHTY: ']' (('-' (Letter|Digit))|Letter|Digit)* ;
>
>     number :DEC_NUMBER;
>
>     range: LEFTY number '..' number RIGHTY;
>     ---
>
>     Le 28/06/11 23:51, Bart Kiers a ?crit :
>>     Hi Fabien,
>>
>>     Can you post the grammar that produces the error?
>>
>>     Bart.
>>
>>
>>     On Wed, Jun 29, 2011 at 5:57 AM, Fabien Hermenier
>>     <hermenierfabien at gmail.com <mailto:hermenierfabien at gmail.com>> wrote:
>>
>>         Hi
>>
>>         I am sorry, but this is another problem related to sequence
>>         of integer.
>>         I don't understand my error(s), despite severals
>>         pass on the wiki page related to this use case.
>>
>>         I want to parse a string with a "sequence" parameter into it,
>>         such as
>>         "toto-[2 ..3]-toto".
>>         Here is a short version of the grammar that works perfectly:
>>         ---
>>         grammar tryout;
>>
>>         options {
>>             k=3;
>>         }
>>         fragment Digit :'0'..'9';
>>         DEC_NUMBER: '1'..'9' Digit*;
>>
>>         fragment Letter    :'a'..'z'|'A'..'Z';
>>
>>         WS    :    ('\n'|'\r'|'\t'|' ') {$channel=HIDDEN;};
>>         LEFTY: (Letter|Digit) (Letter|Digit|'-')* '[';
>>         RIGHTY: ']' (('-' (Letter|Digit))|Letter|Digit)* ;
>>
>>
>>         number :DEC_NUMBER; //HEX_NUMBER, OCT_NUMBER, ... are
>>         following but
>>         removed for this example.
>>
>>         range: LEFTY number '..' number RIGHTY;
>>         ---
>>
>>         This grammar accepts "toto-[1..3]-toto" or "toto-[1 .. 3]-toto".
>>         Now, I want to be able to accept the LEFTY token or the
>>         RIGHTY token
>>         even if they contains a '.' inside (not at the beginning). So
>>         I've
>>         modified LEFTY as following:
>>         LEFTY: (Letter|Digit) ('.'|Letter|Digit|'-')* '[';
>>
>>         Now, ANTLR does no longer accept "toto-[1..3]-toto". It
>>         requires at
>>         least one space between the first number and the range.
>>         I have read the wiki page related to range, integer, and so
>>         one. But in
>>         my case, I don't see where my grammar is ambiguous as no token
>>         can start with a '.' . So it seems there is a concept I don't
>>         get. Can
>>         anyone try to help me ?
>>
>>         Thanks in advance,
>>         Fabien.
>>
>>         List: http://www.antlr.org/mailman/listinfo/antlr-interest
>>         Unsubscribe:
>>         http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>>
>>
>
>
>     -- 
>     postdoctoral researcher at Flux
>     School of Computing, University of Utah
>     http://sites.google.com/site/hermenierfabien/home
>
>


-- 
postdoctoral researcher at Flux
School of Computing, University of Utah
http://sites.google.com/site/hermenierfabien/home


From jb at jblache.org  Wed Jun 29 08:34:34 2011
From: jb at jblache.org (Julien BLACHE)
Date: Wed, 29 Jun 2011 17:34:34 +0200
Subject: [antlr-interest] C runtime 3.4 beta 4
In-Reply-To: <309e83d6a43ae1a0d49ded5182f7c0af@mail.gmail.com> (Jim Idle's
	message of "Tue, 28 Jun 2011 14:07:15 -0700")
References: <309e83d6a43ae1a0d49ded5182f7c0af@mail.gmail.com>
Message-ID: <877h84hcs5.fsf@sonic.technologeek.org>


From ypark3 at ncsu.edu  Wed Jun 29 22:44:48 2011
From: ypark3 at ncsu.edu (Young Hee Park)
Date: Thu, 30 Jun 2011 00:44:48 -0500
Subject: [antlr-interest] Generating source code from the parser/AST using
	the runtime library
Message-ID: <BANLkTintG53vH=FXj-TF98NDQ6pXR0d7_g@mail.gmail.com>

Hello,

I just start looking at the ANTLR and tried to run some examples downloaded
from online. I got the JAVA lexer and parser generated for C language and
could construct the parser tree with some C source codes. Now, I am
wondering if I can modify the parser tree using the JAVA runtime library and
generate the modified source code as output. If possible, is there any
functions generating the source code from a parser tree object?  None of
examples I tested shows this. I have no idea of what to do.

Thanks a lot!

Young

From mark.truluck at cogiton.com  Thu Jun 30 05:26:34 2011
From: mark.truluck at cogiton.com (Mark Truluck)
Date: Thu, 30 Jun 2011 05:26:34 -0700
Subject: [antlr-interest] rule parameter question
Message-ID: <CA31B98A.195F4%mark.truluck@cogiton.com>

Hello,

I am trying to do what I think is a simple parameter passing to a rule in
Antlr 3.3:

-----------
grammar rule_params;


options
{
    output = AST;
}

rule_params
    :   outer;


outer:  outer_id '[' inner[$outer_id.tree] ']';

inner[CommonTree parent]    :   inner_id '['  ']';


outer_id    : '#'! ID;

inner_id    : '$'! ID ;


ID   :  ('a'..'z' | 'A'..'Z') ('a'..'z' | 'A'..'Z' | '0'..'9' | '_' )* ;

---------

However the inner[CommonTree parent] generates the following:

*** inner4=inner((outer_id2!=null?((Object)outer_id2.tree):null));


Resulting in this error:

*** The method inner(CommonTree) in the type rule_paramsParser is not
applicable for the arguments (Object)


As best I can tell, this is the exact same as the example in the Antrl
book:


classDefinition[CommonTree mod]

(Kindle Location 3993) - sorry I don't know the page number but it is
 in the middle of the book in chapter 9, section labeled "Creating Nodes
 with Arbitrary Actions".

Thanks for any help.



Mark Truluck
COGITON, Inc.




From bkiers at gmail.com  Thu Jun 30 05:42:53 2011
From: bkiers at gmail.com (Bart Kiers)
Date: Thu, 30 Jun 2011 14:42:53 +0200
Subject: [antlr-interest] rule parameter question
In-Reply-To: <CA31B98A.195F4%mark.truluck@cogiton.com>
References: <CA31B98A.195F4%mark.truluck@cogiton.com>
Message-ID: <BANLkTinMmrDT9pAxEwdhB5xM1CUAyK8oWA@mail.gmail.com>

Hi Mark,

I presume you didn't see my answer on Stackoverflow:
http://stackoverflow.com/questions/6529359/how-to-pass-commontree-parameter-to-an-antlr-rule
?

If you did, is there anything that wasn't clear?

Regards,

Bart.


On Thu, Jun 30, 2011 at 2:26 PM, Mark Truluck <mark.truluck at cogiton.com>wrote:

> Hello,
>
> I am trying to do what I think is a simple parameter passing to a rule in
> Antlr 3.3:
>
> -----------
> grammar rule_params;
>
>
> options
> {
>    output = AST;
> }
>
> rule_params
>    :   outer;
>
>
> outer:  outer_id '[' inner[$outer_id.tree] ']';
>
> inner[CommonTree parent]    :   inner_id '['  ']';
>
>
> outer_id    : '#'! ID;
>
> inner_id    : '$'! ID ;
>
>
> ID   :  ('a'..'z' | 'A'..'Z') ('a'..'z' | 'A'..'Z' | '0'..'9' | '_' )* ;
>
> ---------
>
> However the inner[CommonTree parent] generates the following:
>
> *** inner4=inner((outer_id2!=null?((Object)outer_id2.tree):null));
>
>
> Resulting in this error:
>
> *** The method inner(CommonTree) in the type rule_paramsParser is not
> applicable for the arguments (Object)
>
>
> As best I can tell, this is the exact same as the example in the Antrl
> book:
>
>
> classDefinition[CommonTree mod]
>
> (Kindle Location 3993) - sorry I don't know the page number but it is
>  in the middle of the book in chapter 9, section labeled "Creating Nodes
>  with Arbitrary Actions".
>
> Thanks for any help.
>
>
>
> Mark Truluck
> COGITON, Inc.
>
>
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>

From mark.truluck at cogiton.com  Thu Jun 30 06:16:09 2011
From: mark.truluck at cogiton.com (Mark Truluck)
Date: Thu, 30 Jun 2011 06:16:09 -0700
Subject: [antlr-interest] rule parameter question
In-Reply-To: <BANLkTinMmrDT9pAxEwdhB5xM1CUAyK8oWA@mail.gmail.com>
Message-ID: <CA31C4C9.195F7%mark.truluck@cogiton.com>


Hi Bart ? sorry ? thought I'd get an email from them.

That worked perfectly ? thanks very much.

Mark

From:  Bart Kiers <bkiers at gmail.com>
Date:  Thu, 30 Jun 2011 14:42:53 +0200
To:  Mark Truluck <mark.truluck at cogiton.com>
Cc:  "antlr-interest at antlr.org interest" <antlr-interest at antlr.org>
Subject:  Re: [antlr-interest] rule parameter question

Hi Mark,

I presume you didn't see my answer on Stackoverflow:
http://stackoverflow.com/questions/6529359/how-to-pass-commontree-parameter-
to-an-antlr-rule
?

If you did, is there anything that wasn't clear?

Regards,

Bart.


On Thu, Jun 30, 2011 at 2:26 PM, Mark Truluck <mark.truluck at cogiton.com>
wrote:
> Hello,
> 
> I am trying to do what I think is a simple parameter passing to a rule in
> Antlr 3.3:
> 
> -----------
> grammar rule_params;
> 
> 
> options
> {
>     output = AST;
> }
> 
> rule_params
>     :   outer;
> 
> 
> outer:  outer_id '[' inner[$outer_id.tree] ']';
> 
> inner[CommonTree parent]    :   inner_id '['  ']';
> 
> 
> outer_id    : '#'! ID;
> 
> inner_id    : '$'! ID ;
> 
> 
> ID   :  ('a'..'z' | 'A'..'Z') ('a'..'z' | 'A'..'Z' | '0'..'9' | '_' )* ;
> 
> ---------
> 
> However the inner[CommonTree parent] generates the following:
> 
> *** inner4=inner((outer_id2!=null?((Object)outer_id2.tree):null));
> 
> 
> Resulting in this error:
> 
> *** The method inner(CommonTree) in the type rule_paramsParser is not
> applicable for the arguments (Object)
> 
> 
> As best I can tell, this is the exact same as the example in the Antrl
> book:
> 
> 
> classDefinition[CommonTree mod]
> 
> (Kindle Location 3993) - sorry I don't know the page number but it is
>  in the middle of the book in chapter 9, section labeled "Creating Nodes
>  with Arbitrary Actions".
> 
> Thanks for any help.
> 
> 
> 
> Mark Truluck
> COGITON, Inc.
> 
> 
> 
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: 
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address




From bkiers at gmail.com  Thu Jun 30 06:20:03 2011
From: bkiers at gmail.com (Bart Kiers)
Date: Thu, 30 Jun 2011 15:20:03 +0200
Subject: [antlr-interest] rule parameter question
In-Reply-To: <CA31C4C9.195F7%mark.truluck@cogiton.com>
References: <BANLkTinMmrDT9pAxEwdhB5xM1CUAyK8oWA@mail.gmail.com>
	<CA31C4C9.195F7%mark.truluck@cogiton.com>
Message-ID: <BANLkTi=eB=JmwKhBcr1JqBVa_z42BSyq_w@mail.gmail.com>

No problem: SO _does_ work with notifications, but they only go out once a
day or so by default.

Good to hear it worked.

Regards,

Bart.


On Thu, Jun 30, 2011 at 3:16 PM, Mark Truluck <mark.truluck at cogiton.com>wrote:

>
> Hi Bart ? sorry ? thought I'd get an email from them.
>
> That worked perfectly ? thanks very much.
>
> Mark
>
> From: Bart Kiers <bkiers at gmail.com>
> Date: Thu, 30 Jun 2011 14:42:53 +0200
> To: Mark Truluck <mark.truluck at cogiton.com>
> Cc: "antlr-interest at antlr.org interest" <antlr-interest at antlr.org>
> Subject: Re: [antlr-interest] rule parameter question
>
> Hi Mark,
>
> I presume you didn't see my answer on Stackoverflow:
>
> http://stackoverflow.com/questions/6529359/how-to-pass-commontree-parameter-to-an-antlr-rule
> ?
>
> If you did, is there anything that wasn't clear?
>
> Regards,
>
> Bart.
>
>
> On Thu, Jun 30, 2011 at 2:26 PM, Mark Truluck <mark.truluck at cogiton.com>wrote:
>
>> Hello,
>>
>> I am trying to do what I think is a simple parameter passing to a rule in
>> Antlr 3.3:
>>
>> -----------
>> grammar rule_params;
>>
>>
>> options
>> {
>>    output = AST;
>> }
>>
>> rule_params
>>    :   outer;
>>
>>
>> outer:  outer_id '[' inner[$outer_id.tree] ']';
>>
>> inner[CommonTree parent]    :   inner_id '['  ']';
>>
>>
>> outer_id    : '#'! ID;
>>
>> inner_id    : '$'! ID ;
>>
>>
>> ID   :  ('a'..'z' | 'A'..'Z') ('a'..'z' | 'A'..'Z' | '0'..'9' | '_' )* ;
>>
>> ---------
>>
>> However the inner[CommonTree parent] generates the following:
>>
>> *** inner4=inner((outer_id2!=null?((Object)outer_id2.tree):null));
>>
>>
>> Resulting in this error:
>>
>> *** The method inner(CommonTree) in the type rule_paramsParser is not
>> applicable for the arguments (Object)
>>
>>
>> As best I can tell, this is the exact same as the example in the Antrl
>> book:
>>
>>
>> classDefinition[CommonTree mod]
>>
>> (Kindle Location 3993) - sorry I don't know the page number but it is
>>  in the middle of the book in chapter 9, section labeled "Creating Nodes
>>  with Arbitrary Actions".
>>
>> Thanks for any help.
>>
>>
>>
>> Mark Truluck
>> COGITON, Inc.
>>
>>
>>
>>
>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>> Unsubscribe:
>> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>>
>
>

From bkiers at gmail.com  Thu Jun 30 06:21:52 2011
From: bkiers at gmail.com (Bart Kiers)
Date: Thu, 30 Jun 2011 15:21:52 +0200
Subject: [antlr-interest] rule parameter question
In-Reply-To: <BANLkTi=eB=JmwKhBcr1JqBVa_z42BSyq_w@mail.gmail.com>
References: <BANLkTinMmrDT9pAxEwdhB5xM1CUAyK8oWA@mail.gmail.com>
	<CA31C4C9.195F7%mark.truluck@cogiton.com>
	<BANLkTi=eB=JmwKhBcr1JqBVa_z42BSyq_w@mail.gmail.com>
Message-ID: <BANLkTimrqJR=54tcgPCYaHG+i1nLrhO9Yw@mail.gmail.com>

Just for the record, in case someone stumbles upon this post, the answer
from SO:

-------------------------------------------------------------------------

If you don't explicitly specify the tree to be used in your grammar,
.tree (which
is short forgetTree()) will return a java.lang.Object and a CommonTree will
be used as default Treeimplementation. To avoid casting, set the type of
tree in your options { ... } section:

options
{
    output=AST;
    ASTLabelType=CommonTree;
}



On Thu, Jun 30, 2011 at 3:20 PM, Bart Kiers <bkiers at gmail.com> wrote:

> No problem: SO _does_ work with notifications, but they only go out once a
> day or so by default.
>
> Good to hear it worked.
>
> Regards,
>
> Bart.
>
>
> On Thu, Jun 30, 2011 at 3:16 PM, Mark Truluck <mark.truluck at cogiton.com>wrote:
>
>>
>> Hi Bart ? sorry ? thought I'd get an email from them.
>>
>> That worked perfectly ? thanks very much.
>>
>> Mark
>>
>>  From: Bart Kiers <bkiers at gmail.com>
>> Date: Thu, 30 Jun 2011 14:42:53 +0200
>> To: Mark Truluck <mark.truluck at cogiton.com>
>> Cc: "antlr-interest at antlr.org interest" <antlr-interest at antlr.org>
>> Subject: Re: [antlr-interest] rule parameter question
>>
>> Hi Mark,
>>
>> I presume you didn't see my answer on Stackoverflow:
>>
>> http://stackoverflow.com/questions/6529359/how-to-pass-commontree-parameter-to-an-antlr-rule
>> ?
>>
>> If you did, is there anything that wasn't clear?
>>
>> Regards,
>>
>> Bart.
>>
>>
>> On Thu, Jun 30, 2011 at 2:26 PM, Mark Truluck <mark.truluck at cogiton.com>wrote:
>>
>>> Hello,
>>>
>>> I am trying to do what I think is a simple parameter passing to a rule in
>>> Antlr 3.3:
>>>
>>> -----------
>>> grammar rule_params;
>>>
>>>
>>> options
>>> {
>>>    output = AST;
>>> }
>>>
>>> rule_params
>>>    :   outer;
>>>
>>>
>>> outer:  outer_id '[' inner[$outer_id.tree] ']';
>>>
>>> inner[CommonTree parent]    :   inner_id '['  ']';
>>>
>>>
>>> outer_id    : '#'! ID;
>>>
>>> inner_id    : '$'! ID ;
>>>
>>>
>>> ID   :  ('a'..'z' | 'A'..'Z') ('a'..'z' | 'A'..'Z' | '0'..'9' | '_' )* ;
>>>
>>> ---------
>>>
>>> However the inner[CommonTree parent] generates the following:
>>>
>>> *** inner4=inner((outer_id2!=null?((Object)outer_id2.tree):null));
>>>
>>>
>>> Resulting in this error:
>>>
>>> *** The method inner(CommonTree) in the type rule_paramsParser is not
>>> applicable for the arguments (Object)
>>>
>>>
>>> As best I can tell, this is the exact same as the example in the Antrl
>>> book:
>>>
>>>
>>> classDefinition[CommonTree mod]
>>>
>>> (Kindle Location 3993) - sorry I don't know the page number but it is
>>>  in the middle of the book in chapter 9, section labeled "Creating Nodes
>>>  with Arbitrary Actions".
>>>
>>> Thanks for any help.
>>>
>>>
>>>
>>> Mark Truluck
>>> COGITON, Inc.
>>>
>>>
>>>
>>>
>>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>>> Unsubscribe:
>>> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>>>
>>
>>
>

From nilopaim at gmail.com  Thu Jun 30 13:33:39 2011
From: nilopaim at gmail.com (Nilo Roberto C Paim)
Date: Thu, 30 Jun 2011 17:33:39 -0300
Subject: [antlr-interest] Ignore "Mismatched input" and "No viable
	alternative"
In-Reply-To: <BANLkTimrqJR=54tcgPCYaHG+i1nLrhO9Yw@mail.gmail.com>
References: <BANLkTinMmrDT9pAxEwdhB5xM1CUAyK8oWA@mail.gmail.com>	<CA31C4C9.195F7%mark.truluck@cogiton.com>	<BANLkTi=eB=JmwKhBcr1JqBVa_z42BSyq_w@mail.gmail.com>
	<BANLkTimrqJR=54tcgPCYaHG+i1nLrhO9Yw@mail.gmail.com>
Message-ID: <005a01cc3765$02c71d90$085558b0$@com>

Hi all,

I'm trying to parse a text file created by an application. There are lines
in this text file that I know perfectly their contents and format, and these
lines are correctly parsed.

Otherwise, there are lines that can be recognized by any syntax I can think
about. 

When I parse the file with my syntax, I'm getting several occurrences of
"Mismatched input" and "No viable alternative" on the lines that I can't
recognize.

What I want is simply throw away these invalid lines, as if them would be
absent from the text file. For my purposes, these lines are "invisibles".

How can I do that, ignoring the lexer/parser errors?

TIA

Nilo - Brasil


From bkiers at gmail.com  Thu Jun 30 13:36:38 2011
From: bkiers at gmail.com (Bart Kiers)
Date: Thu, 30 Jun 2011 22:36:38 +0200
Subject: [antlr-interest] Ignore "Mismatched input" and "No viable
	alternative"
In-Reply-To: <005a01cc3765$02c71d90$085558b0$@com>
References: <BANLkTinMmrDT9pAxEwdhB5xM1CUAyK8oWA@mail.gmail.com>
	<CA31C4C9.195F7%mark.truluck@cogiton.com>
	<BANLkTi=eB=JmwKhBcr1JqBVa_z42BSyq_w@mail.gmail.com>
	<BANLkTimrqJR=54tcgPCYaHG+i1nLrhO9Yw@mail.gmail.com>
	<005a01cc3765$02c71d90$085558b0$@com>
Message-ID: <BANLkTikzY7Qq6U1FDxjA4ST4Q6J4X0ifXA@mail.gmail.com>

Can you give an example of your input, and explain what line you want to
ignore?

Regards,

Bart.


On Thu, Jun 30, 2011 at 10:33 PM, Nilo Roberto C Paim <nilopaim at gmail.com>wrote:

> Hi all,
>
> I'm trying to parse a text file created by an application. There are lines
> in this text file that I know perfectly their contents and format, and
> these
> lines are correctly parsed.
>
> Otherwise, there are lines that can be recognized by any syntax I can think
> about.
>
> When I parse the file with my syntax, I'm getting several occurrences of
> "Mismatched input" and "No viable alternative" on the lines that I can't
> recognize.
>
> What I want is simply throw away these invalid lines, as if them would be
> absent from the text file. For my purposes, these lines are "invisibles".
>
> How can I do that, ignoring the lexer/parser errors?
>
> TIA
>
> Nilo - Brasil
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>

From diabeteman at gmail.com  Thu Jun 30 13:40:30 2011
From: diabeteman at gmail.com (Robin)
Date: Thu, 30 Jun 2011 22:40:30 +0200
Subject: [antlr-interest] Ignore "Mismatched input" and "No viable
	alternative"
In-Reply-To: <BANLkTikzY7Qq6U1FDxjA4ST4Q6J4X0ifXA@mail.gmail.com>
References: <BANLkTinMmrDT9pAxEwdhB5xM1CUAyK8oWA@mail.gmail.com>
	<CA31C4C9.195F7%mark.truluck@cogiton.com>
	<BANLkTi=eB=JmwKhBcr1JqBVa_z42BSyq_w@mail.gmail.com>
	<BANLkTimrqJR=54tcgPCYaHG+i1nLrhO9Yw@mail.gmail.com>
	<005a01cc3765$02c71d90$085558b0$@com>
	<BANLkTikzY7Qq6U1FDxjA4ST4Q6J4X0ifXA@mail.gmail.com>
Message-ID: <BANLkTimW3dE+mroa8UMGTV=gqh7JZgVbRg@mail.gmail.com>

You could use the filter=true grammar option to discard tokens that don't
match anything

On Thu, Jun 30, 2011 at 10:36 PM, Bart Kiers <bkiers at gmail.com> wrote:

> Can you give an example of your input, and explain what line you want to
> ignore?
>
> Regards,
>
> Bart.
>
>
> On Thu, Jun 30, 2011 at 10:33 PM, Nilo Roberto C Paim <nilopaim at gmail.com
> >wrote:
>
> > Hi all,
> >
> > I'm trying to parse a text file created by an application. There are
> lines
> > in this text file that I know perfectly their contents and format, and
> > these
> > lines are correctly parsed.
> >
> > Otherwise, there are lines that can be recognized by any syntax I can
> think
> > about.
> >
> > When I parse the file with my syntax, I'm getting several occurrences of
> > "Mismatched input" and "No viable alternative" on the lines that I can't
> > recognize.
> >
> > What I want is simply throw away these invalid lines, as if them would be
> > absent from the text file. For my purposes, these lines are "invisibles".
> >
> > How can I do that, ignoring the lexer/parser errors?
> >
> > TIA
> >
> > Nilo - Brasil
> >
> >
> > List: http://www.antlr.org/mailman/listinfo/antlr-interest
> > Unsubscribe:
> > http://www.antlr.org/mailman/options/antlr-interest/your-email-address
> >
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>

From bkiers at gmail.com  Thu Jun 30 13:44:09 2011
From: bkiers at gmail.com (Bart Kiers)
Date: Thu, 30 Jun 2011 22:44:09 +0200
Subject: [antlr-interest] Ignore "Mismatched input" and "No viable
	alternative"
In-Reply-To: <BANLkTimW3dE+mroa8UMGTV=gqh7JZgVbRg@mail.gmail.com>
References: <BANLkTinMmrDT9pAxEwdhB5xM1CUAyK8oWA@mail.gmail.com>
	<CA31C4C9.195F7%mark.truluck@cogiton.com>
	<BANLkTi=eB=JmwKhBcr1JqBVa_z42BSyq_w@mail.gmail.com>
	<BANLkTimrqJR=54tcgPCYaHG+i1nLrhO9Yw@mail.gmail.com>
	<005a01cc3765$02c71d90$085558b0$@com>
	<BANLkTikzY7Qq6U1FDxjA4ST4Q6J4X0ifXA@mail.gmail.com>
	<BANLkTimW3dE+mroa8UMGTV=gqh7JZgVbRg@mail.gmail.com>
Message-ID: <BANLkTikWX=zuDMPeuo6qFYzCE-_Kb4E_MQ@mail.gmail.com>

Perhaps, but Nilo is talking about discarding complete lines. Chances are
that somewhere in these "ignored"-lines, text exists that looks like a token
that _do_ need to be kept. That's why I asked for more info.

Regards,

Bart.


On Thu, Jun 30, 2011 at 10:40 PM, Robin <diabeteman at gmail.com> wrote:

> You could use the filter=true grammar option to discard tokens that don't
> match anything
>
>
> On Thu, Jun 30, 2011 at 10:36 PM, Bart Kiers <bkiers at gmail.com> wrote:
>
>> Can you give an example of your input, and explain what line you want to
>> ignore?
>>
>> Regards,
>>
>> Bart.
>>
>>
>> On Thu, Jun 30, 2011 at 10:33 PM, Nilo Roberto C Paim <nilopaim at gmail.com
>> >wrote:
>>
>> > Hi all,
>> >
>> > I'm trying to parse a text file created by an application. There are
>> lines
>> > in this text file that I know perfectly their contents and format, and
>> > these
>> > lines are correctly parsed.
>> >
>> > Otherwise, there are lines that can be recognized by any syntax I can
>> think
>> > about.
>> >
>> > When I parse the file with my syntax, I'm getting several occurrences of
>> > "Mismatched input" and "No viable alternative" on the lines that I can't
>> > recognize.
>> >
>> > What I want is simply throw away these invalid lines, as if them would
>> be
>> > absent from the text file. For my purposes, these lines are
>> "invisibles".
>> >
>> > How can I do that, ignoring the lexer/parser errors?
>> >
>> > TIA
>> >
>> > Nilo - Brasil
>> >
>> >
>> > List: http://www.antlr.org/mailman/listinfo/antlr-interest
>> > Unsubscribe:
>> > http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>> >
>>
>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>> Unsubscribe:
>> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>>
>
>

From diabeteman at gmail.com  Thu Jun 30 13:45:48 2011
From: diabeteman at gmail.com (Robin)
Date: Thu, 30 Jun 2011 22:45:48 +0200
Subject: [antlr-interest] Ignore "Mismatched input" and "No viable
	alternative"
In-Reply-To: <BANLkTikWX=zuDMPeuo6qFYzCE-_Kb4E_MQ@mail.gmail.com>
References: <BANLkTinMmrDT9pAxEwdhB5xM1CUAyK8oWA@mail.gmail.com>
	<CA31C4C9.195F7%mark.truluck@cogiton.com>
	<BANLkTi=eB=JmwKhBcr1JqBVa_z42BSyq_w@mail.gmail.com>
	<BANLkTimrqJR=54tcgPCYaHG+i1nLrhO9Yw@mail.gmail.com>
	<005a01cc3765$02c71d90$085558b0$@com>
	<BANLkTikzY7Qq6U1FDxjA4ST4Q6J4X0ifXA@mail.gmail.com>
	<BANLkTimW3dE+mroa8UMGTV=gqh7JZgVbRg@mail.gmail.com>
	<BANLkTikWX=zuDMPeuo6qFYzCE-_Kb4E_MQ@mail.gmail.com>
Message-ID: <BANLkTimSrg3ee8JGy2NqhfHPSuwFMq3KVQ@mail.gmail.com>

Good point :-)

On Thu, Jun 30, 2011 at 10:44 PM, Bart Kiers <bkiers at gmail.com> wrote:

> Perhaps, but Nilo is talking about discarding complete lines. Chances are
> that somewhere in these "ignored"-lines, text exists that looks like a
> token
> that _do_ need to be kept. That's why I asked for more info.
>
> Regards,
>
> Bart.
>
>
> On Thu, Jun 30, 2011 at 10:40 PM, Robin <diabeteman at gmail.com> wrote:
>
> > You could use the filter=true grammar option to discard tokens that don't
> > match anything
> >
> >
> > On Thu, Jun 30, 2011 at 10:36 PM, Bart Kiers <bkiers at gmail.com> wrote:
> >
> >> Can you give an example of your input, and explain what line you want to
> >> ignore?
> >>
> >> Regards,
> >>
> >> Bart.
> >>
> >>
> >> On Thu, Jun 30, 2011 at 10:33 PM, Nilo Roberto C Paim <
> nilopaim at gmail.com
> >> >wrote:
> >>
> >> > Hi all,
> >> >
> >> > I'm trying to parse a text file created by an application. There are
> >> lines
> >> > in this text file that I know perfectly their contents and format, and
> >> > these
> >> > lines are correctly parsed.
> >> >
> >> > Otherwise, there are lines that can be recognized by any syntax I can
> >> think
> >> > about.
> >> >
> >> > When I parse the file with my syntax, I'm getting several occurrences
> of
> >> > "Mismatched input" and "No viable alternative" on the lines that I
> can't
> >> > recognize.
> >> >
> >> > What I want is simply throw away these invalid lines, as if them would
> >> be
> >> > absent from the text file. For my purposes, these lines are
> >> "invisibles".
> >> >
> >> > How can I do that, ignoring the lexer/parser errors?
> >> >
> >> > TIA
> >> >
> >> > Nilo - Brasil
> >> >
> >> >
> >> > List: http://www.antlr.org/mailman/listinfo/antlr-interest
> >> > Unsubscribe:
> >> >
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
> >> >
> >>
> >> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> >> Unsubscribe:
> >> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
> >>
> >
> >
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>

From nilopaim at gmail.com  Thu Jun 30 14:08:21 2011
From: nilopaim at gmail.com (Nilo Roberto C Paim)
Date: Thu, 30 Jun 2011 18:08:21 -0300
Subject: [antlr-interest] RES: Ignore "Mismatched input" and "No
	viable	alternative"
In-Reply-To: <BANLkTimSrg3ee8JGy2NqhfHPSuwFMq3KVQ@mail.gmail.com>
References: <BANLkTinMmrDT9pAxEwdhB5xM1CUAyK8oWA@mail.gmail.com>	<CA31C4C9.195F7%mark.truluck@cogiton.com>	<BANLkTi=eB=JmwKhBcr1JqBVa_z42BSyq_w@mail.gmail.com>	<BANLkTimrqJR=54tcgPCYaHG+i1nLrhO9Yw@mail.gmail.com>	<005a01cc3765$02c71d90$085558b0$@com>	<BANLkTikzY7Qq6U1FDxjA4ST4Q6J4X0ifXA@mail.gmail.com>	<BANLkTimW3dE+mroa8UMGTV=gqh7JZgVbRg@mail.gmail.com>	<BANLkTikWX=zuDMPeuo6qFYzCE-_Kb4E_MQ@mail.gmail.com>
	<BANLkTimSrg3ee8JGy2NqhfHPSuwFMq3KVQ@mail.gmail.com>
Message-ID: <006a01cc3769$dbc0a130$9341e390$@com>

Bart is right...

I need to discard complete lines and not just some unrecognized tokens. 

And really exists recognized tokens on lines I want to discard, 'cause these
tokens are in invalid places on the line...

I'm thinking in change the text file format, putting a "discard" token on
the beginning of the lines I want to discard (something like a "comment"
line), but these will take a little more time...

Thanks Bart and Robin for answering.

Regards,
Nilo - Brazil

-----Mensagem original-----
De: antlr-interest-bounces at antlr.org
[mailto:antlr-interest-bounces at antlr.org] Em nome de Robin
Enviada em: quinta-feira, 30 de junho de 2011 17:46
Para: Bart Kiers
Cc: antlr-interest at antlr.org interest
Assunto: Re: [antlr-interest] Ignore "Mismatched input" and "No viable
alternative"

Good point :-)

On Thu, Jun 30, 2011 at 10:44 PM, Bart Kiers <bkiers at gmail.com> wrote:

> Perhaps, but Nilo is talking about discarding complete lines. Chances are
> that somewhere in these "ignored"-lines, text exists that looks like a
> token
> that _do_ need to be kept. That's why I asked for more info.
>
> Regards,
>
> Bart.
>
>
> On Thu, Jun 30, 2011 at 10:40 PM, Robin <diabeteman at gmail.com> wrote:
>
> > You could use the filter=true grammar option to discard tokens that
don't
> > match anything
> >
> >
> > On Thu, Jun 30, 2011 at 10:36 PM, Bart Kiers <bkiers at gmail.com> wrote:
> >
> >> Can you give an example of your input, and explain what line you want
to
> >> ignore?
> >>
> >> Regards,
> >>
> >> Bart.
> >>
> >>
> >> On Thu, Jun 30, 2011 at 10:33 PM, Nilo Roberto C Paim <
> nilopaim at gmail.com
> >> >wrote:
> >>
> >> > Hi all,
> >> >
> >> > I'm trying to parse a text file created by an application. There are
> >> lines
> >> > in this text file that I know perfectly their contents and format,
and
> >> > these
> >> > lines are correctly parsed.
> >> >
> >> > Otherwise, there are lines that can be recognized by any syntax I can
> >> think
> >> > about.
> >> >
> >> > When I parse the file with my syntax, I'm getting several occurrences
> of
> >> > "Mismatched input" and "No viable alternative" on the lines that I
> can't
> >> > recognize.
> >> >
> >> > What I want is simply throw away these invalid lines, as if them
would
> >> be
> >> > absent from the text file. For my purposes, these lines are
> >> "invisibles".
> >> >
> >> > How can I do that, ignoring the lexer/parser errors?
> >> >
> >> > TIA
> >> >
> >> > Nilo - Brasil
> >> >
> >> >
> >> > List: http://www.antlr.org/mailman/listinfo/antlr-interest
> >> > Unsubscribe:
> >> >
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
> >> >
> >>
> >> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> >> Unsubscribe:
> >> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
> >>
> >
> >
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>

List: http://www.antlr.org/mailman/listinfo/antlr-interest
Unsubscribe:
http://www.antlr.org/mailman/options/antlr-interest/your-email-address


