<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [antlr-interest] How to pass the current node to the action?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20How%20to%20pass%20the%20current%20node%20to%20the%20action%3F&In-Reply-To=%3C79118B9FE8CE8E49B0D71964A79CB647024EC38B%40dekomplm002.net.plm.eds.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="034436.html">
   <LINK REL="Next"  HREF="034473.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[antlr-interest] How to pass the current node to the action?</H1>
    <B>Xie, Linlin</B> 
    <A HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20How%20to%20pass%20the%20current%20node%20to%20the%20action%3F&In-Reply-To=%3C79118B9FE8CE8E49B0D71964A79CB647024EC38B%40dekomplm002.net.plm.eds.com%3E"
       TITLE="[antlr-interest] How to pass the current node to the action?">linlin.xie at siemens.com
       </A><BR>
    <I>Wed May 13 08:10:38 PDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="034436.html">[antlr-interest] How to pass the current node to the action?
</A></li>
        <LI>Next message: <A HREF="034473.html">[antlr-interest] How to pass the current node to the action?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#34472">[ date ]</a>
              <a href="thread.html#34472">[ thread ]</a>
              <a href="subject.html#34472">[ subject ]</a>
              <a href="author.html#34472">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Jim, 

 

Thanks for your previous replies. How does the fixation of the
conversion to common token bug go? As I can use labels for all the
sub-rules, but can't do it to the current rule, as the example shown:

 

P: r1=rule1 r2=rule2;

 

I can use labels for rule1 and rule2, but can't assign rule P to any
label and use the label to refer to the current rule. If you can fix
that as soon as possible, that'd be great!

 

Also this problem probably has some connection with the
ADAPTER-&gt;rulePostProcessing( ADAPTER, root_0 ) function. Though having
read the code for the function, I still couldn't get a consistent
picture of how it works. To me, sometimes the rulePostProcessing cuts
the root_0 node, and sometimes it doesn't for the same situation of
having a single child in a rule. So I wonder if you can explain to me
how exactly this function works? Or is there any signal or parameter
that I can use to switch off the cut off of the root_0 (i.e. the
prioritization of the tree)?  I suppose if the $tree can be used (i.e.
the bug above fixed), and I attach some user data to the user pointer of
the $tree, the rulePostProcessing has to do something to pass on the
data when it has to cut off the root_0, right?

 

I look forward to your reply. Thank you very much.

Regards,

Linlin

 

 

From: <A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">antlr-interest-bounces at antlr.org</A>
[mailto:<A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">antlr-interest-bounces at antlr.org</A>] On Behalf Of Jim Idle
Sent: 11 May 2009 18:04
Cc: <A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">antlr-interest at antlr.org</A>
Subject: Re: [antlr-interest] How to pass the current node to the
action?

 

Xie, Linlin wrote: 

Hi Jim,

 

The weird thing is if I use the $rule1.tree directly, the generated code
would try to convert the rule1_return structure to common token type
first, but if I assign the rule to a variable, say P: r1=Rule1 Rule2;
then using $r1.tree would be completely fine, as the generated  code
would just keep the rule1_return structure, not trying to convert it at
all.

 

Can you see why it works this way? Thanks a lot.

Maybe a bug in code generation templates, I will take a look, but for
now, use labels :-)

Jim

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://www.antlr.org/pipermail/antlr-interest/attachments/20090513/3e39ad58/attachment.html">http://www.antlr.org/pipermail/antlr-interest/attachments/20090513/3e39ad58/attachment.html</A> 
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="034436.html">[antlr-interest] How to pass the current node to the action?
</A></li>
	<LI>Next message: <A HREF="034473.html">[antlr-interest] How to pass the current node to the action?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#34472">[ date ]</a>
              <a href="thread.html#34472">[ thread ]</a>
              <a href="subject.html#34472">[ subject ]</a>
              <a href="author.html#34472">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.antlr.org/mailman/listinfo/antlr-interest">More information about the antlr-interest
mailing list</a><br>
</body></html>
