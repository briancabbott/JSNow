<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [antlr-interest] unexpected token error in StringTemplate
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20unexpected%20token%20error%20in%20StringTemplate&In-Reply-To=%3Cd76a9c0d0708291056k6797da77i8a0f66c25d0fdaec%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="023555.html">
   <LINK REL="Next"  HREF="023560.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[antlr-interest] unexpected token error in StringTemplate</H1>
    <B>Warner Onstine</B> 
    <A HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20unexpected%20token%20error%20in%20StringTemplate&In-Reply-To=%3Cd76a9c0d0708291056k6797da77i8a0f66c25d0fdaec%40mail.gmail.com%3E"
       TITLE="[antlr-interest] unexpected token error in StringTemplate">warnero at gmail.com
       </A><BR>
    <I>Wed Aug 29 10:56:43 PDT 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="023555.html">[antlr-interest] Throwing a exception in a rule
</A></li>
        <LI>Next message: <A HREF="023560.html">[antlr-interest] unexpected token error in StringTemplate
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23558">[ date ]</a>
              <a href="thread.html#23558">[ thread ]</a>
              <a href="subject.html#23558">[ subject ]</a>
              <a href="author.html#23558">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I've been trying to figure out what the problem is with this (my last
step!) and would appreciate any help. I'm attaching the grammar and
stg file, but will explain with short code here.

I'm getting this error when I run my test:

action parse error in group Java line 35; template context is [select_statement]

line 1:4: unexpected token: crit

The relevant section is this:
select_statement(crit, model) ::= &lt;&lt;
&lt;if (crit != null)&gt;
	&lt;crit&gt;
&lt;else&gt;
getHibernateTemplate().find(&quot;from &lt;model&gt;&quot;)
&lt;endif&gt;
&gt;&gt;<i>
</I>
I cobbled together this syntax as best I could from the ST
documentation (as it isn't really clear on when to use brackets &quot;&lt;&gt;&quot;
vs. the dollar-sign &quot;$&quot; notation.

And in my grammar file:
selectStatement
	:	'Select' '(' ')' criteria=criteriaBlock? -&gt;
select_statement(crit={criteria != null ? $criteria.st : null},
model={$prog::className})
	;
	
The className also appears to not be coming through (the test runs and
outputs even though I have this error. I've tried changing the &quot;crit&quot;
variable to other names but with the same results.

Thanks for all the help!

-warner

-- 
Warner Onstine - Programmer/Author
New book on Tapestry 4!
Tapestry 101 available at
<A HREF="http://sourcebeat.com/books/tapestrylive.html">http://sourcebeat.com/books/tapestrylive.html</A>
<A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">warner at warneronstine.com</A>
<A HREF="http://warneronstine.com/blog">http://warneronstine.com/blog</A>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: ModelDAO.stg
Type: application/octet-stream
Size: 1653 bytes
Desc: not available
Url : <A HREF="http://www.antlr.org/pipermail/antlr-interest/attachments/20070829/ea040638/attachment.obj">http://www.antlr.org/pipermail/antlr-interest/attachments/20070829/ea040638/attachment.obj</A> 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: Model.g
Type: application/octet-stream
Size: 2970 bytes
Desc: not available
Url : <A HREF="http://www.antlr.org/pipermail/antlr-interest/attachments/20070829/ea040638/attachment-0001.obj">http://www.antlr.org/pipermail/antlr-interest/attachments/20070829/ea040638/attachment-0001.obj</A> 
</PRE>





<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="023555.html">[antlr-interest] Throwing a exception in a rule
</A></li>
	<LI>Next message: <A HREF="023560.html">[antlr-interest] unexpected token error in StringTemplate
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23558">[ date ]</a>
              <a href="thread.html#23558">[ thread ]</a>
              <a href="subject.html#23558">[ subject ]</a>
              <a href="author.html#23558">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.antlr.org/mailman/listinfo/antlr-interest">More information about the antlr-interest
mailing list</a><br>
</body></html>
