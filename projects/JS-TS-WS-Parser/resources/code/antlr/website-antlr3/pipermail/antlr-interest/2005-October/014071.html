<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [antlr-interest] ANTLR modification
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:antlr-interest%40antlr.org?Subject=%5Bantlr-interest%5D%20ANTLR%20modification&In-Reply-To=e88138500510221603uaf9b78er7b7e3478b49a92b4%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="014078.html">
   <LINK REL="Next"  HREF="014088.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[antlr-interest] ANTLR modification</H1>
    <B>Micheal J</B> 
    <A HREF="mailto:antlr-interest%40antlr.org?Subject=%5Bantlr-interest%5D%20ANTLR%20modification&In-Reply-To=e88138500510221603uaf9b78er7b7e3478b49a92b4%40mail.gmail.com"
       TITLE="[antlr-interest] ANTLR modification">open.zone at virgin.net
       </A><BR>
    <I>Sun Oct 23 07:53:10 PDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="014078.html">[antlr-interest] ANTLR modification
</A></li>
        <LI>Next message: <A HREF="014088.html">[antlr-interest] ANTLR modification
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14071">[ date ]</a>
              <a href="thread.html#14071">[ thread ]</a>
              <a href="subject.html#14071">[ subject ]</a>
              <a href="author.html#14071">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
&gt;<i> I have made a small modification to the ANTL Token, 
</I>&gt;<i> CommonToken, and CharScanner classes. The changes make it 
</I>&gt;<i> possible to for a Token (and an AST node as well) to have an 
</I>&gt;<i> offset assigned to it that represents the offset from the 
</I>&gt;<i> beginning of the character stream. I have a need for this, 
</I>&gt;<i> and I added and thought others might find it useful as well.
</I>
Can the changes be isolated to a CharScanner sub-class and a CommonToken
subclass?

Not everyone needs (or can afford the cost of) the offset data.

&gt;<i> The changes include added a virtual getOffset/setOffset 
</I>&gt;<i> method to the Token class, and re-implementing these in the 
</I>&gt;<i> CommonToken class. The CharScanner class has a new member var 
</I>&gt;<i> &quot;offset&quot; that is initially set to 0 in it's constructor(s) 
</I>&gt;<i> and then incremented for each call of the
</I>&gt;<i> consume() method. This is member is then used when the 
</I>&gt;<i> CharScanner creates a new Token in the makeToken() method. 
</I>&gt;<i> The Token is then assigned this value by calling the Token's 
</I>&gt;<i> setOffset() method.
</I>&gt;<i> 
</I>&gt;<i> Would there be any interest in having this merged into the 
</I>&gt;<i> general ANTLR codebase? If so, what's the best way to submit this?
</I>
Problems I see with this. 
1. Lexer state isn't stored in CharScanner. There is a separate class for
it.
2. Not everyone needs (or can afford) the overhead of both line/col and
offest tracking. Perhaps a more generic mechanism for specifying (perhaps on
construction) whether to track offsets, line/col or both?

Cheers,

Micheal

</PRE>










<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="014078.html">[antlr-interest] ANTLR modification
</A></li>
	<LI>Next message: <A HREF="014088.html">[antlr-interest] ANTLR modification
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14071">[ date ]</a>
              <a href="thread.html#14071">[ thread ]</a>
              <a href="subject.html#14071">[ subject ]</a>
              <a href="author.html#14071">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.antlr.org/mailman/listinfo/antlr-interest">More information about the antlr-interest
mailing list</a><br>
</body></html>
