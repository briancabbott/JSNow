<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [antlr-interest] unit tests
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:antlr-interest%40antlr.org?Subject=%5Bantlr-interest%5D%20unit%20tests&In-Reply-To=20061123210651.4DC20190A70%40www.antlr.org">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="018801.html">
   <LINK REL="Next"  HREF="018800.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[antlr-interest] unit tests</H1>
    <B>Jeremy D. Frens</B> 
    <A HREF="mailto:antlr-interest%40antlr.org?Subject=%5Bantlr-interest%5D%20unit%20tests&In-Reply-To=20061123210651.4DC20190A70%40www.antlr.org"
       TITLE="[antlr-interest] unit tests">jdfrens at calvin.edu
       </A><BR>
    <I>Sat Dec  9 10:02:13 PST 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="018801.html">[antlr-interest] V3 equivalent of $setType(TOKEN)
</A></li>
        <LI>Next message: <A HREF="018800.html">[antlr-interest] unit tests
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18798">[ date ]</a>
              <a href="thread.html#18798">[ thread ]</a>
              <a href="subject.html#18798">[ subject ]</a>
              <a href="author.html#18798">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Sorry to jump into the discussion late.  It's too easy to let things
slide while on a sabbatical...

Robert Hill wrote:
&gt;<i> Hi all, just want to open up a bit of a discussion, how does everyone else
</I>&gt;<i> handle unit testing for a compiler/code generator.
</I>&gt;<i> Or if you're using JUnit/NUnit how do test your Antlr output ?
</I>&gt;<i> 
</I>&gt;<i> File compares on the output sources? How do you test individual constructs?
</I>&gt;<i> Hundred of files( or embedded strings) with each one having a single example
</I>&gt;<i> to the construct in question?
</I>&gt;<i> 
</I>&gt;<i> Just looking for some good ideas ( or examples :) ) on implementation (I'll
</I>&gt;<i> be using JUinit btw)
</I>
I believe very strongly in unit testing, so while I was writing an
interpreter using ANTLR (<A HREF="http://nolatte.sourceforge.net">http://nolatte.sourceforge.net</A>), I also built a
unit-testing library for ANTLR grammars using JUnit.  My results can be
found on SourceForge: <A HREF="http://antlr-testing.sourceforge.net/">http://antlr-testing.sourceforge.net/</A> .

Unfortunately, there are a few problems with the ANTLR Testing library:
first, the website sucks.  Second, the library works (as far as I know)
only with ANTLR 2.7.6, and it is unaware of JUnit 4.x.  Third,
ironically, the library is not well tested.  Fourth, I've learned a lot
about unit testing since I wrote the library, and the overall design of
the library could stand some reworking.

As an example of the fourth problem, in order to test a tree parser, you
end up testing the lexer and the parser as well.  I don't know that I'll
necessarily drop this because it *is* good functional testing.  But a
unit test should just test *one* action (e.g., one tree transformation)
in *one* module (e.g., the tree builder).

That's the bad news; here's the good news.

The library is very usable now, even with my warnings.  I've used it for
my own interpreter; I've used it two or three times in a compiler course
(at Calvin College, <A HREF="http://cs.calvin.edu/">http://cs.calvin.edu/</A>); I've used it twice in a
Programming Languages course (also at Calvin).

Better yet, the purpose of my sabbatical next semester is to write a lab
manual (maybe textbook) for a Programming Languages course, doing
incremental, test-driven development of interpreters (plural!) and other
language transformations (like a compiler).  It's becoming clear to me
this semester that I need a better ANTLR Testing library to make this
lab manual effective.

Some changes that I've planned (not in any real order): switch to JUnit
4.1 (or whatever's current); rework the existing library for ANTLR
2.7.6; build a new library for ANTLR 3.0; unit test the library; write a
better website.

I'm very interested in what people think about my ANTLR Testing library
and what features you'd like to see in such a library.

jdf

- --
* Jeremy D. Frens * Professor, Computer Science * <A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">jdfrens at calvin.edu</A> *
              ``The first step towards wisdom is calling
                things by their right names.''  --Chinese proverb

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.6 (GNU/Linux)
Comment: Using GnuPG with Mozilla - <A HREF="http://enigmail.mozdev.org">http://enigmail.mozdev.org</A>

iD8DBQFFevokOcBu2deY79IRAudAAJ9Wkc/dAE0ZOjfQ7f840wmTHCLLaACfd/N4
O3uubpYvv2Ivn6yLrlO7AdE=
=wf3Q
-----END PGP SIGNATURE-----
</PRE>










<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="018801.html">[antlr-interest] V3 equivalent of $setType(TOKEN)
</A></li>
	<LI>Next message: <A HREF="018800.html">[antlr-interest] unit tests
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18798">[ date ]</a>
              <a href="thread.html#18798">[ thread ]</a>
              <a href="subject.html#18798">[ subject ]</a>
              <a href="author.html#18798">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.antlr.org/mailman/listinfo/antlr-interest">More information about the antlr-interest
mailing list</a><br>
</body></html>
