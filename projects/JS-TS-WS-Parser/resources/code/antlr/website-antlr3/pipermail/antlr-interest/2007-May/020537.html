<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [antlr-interest] antlr way of controlling generated XML (previously: Token type as string)
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20antlr%20way%20of%20controlling%20generated%20XML%0A%20%28previously%3A%20Token%20type%20as%20string%29&In-Reply-To=%3Cf1i3ps%24keb%241%40sea.gmane.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="020505.html">
   <LINK REL="Next"  HREF="020538.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[antlr-interest] antlr way of controlling generated XML (previously: Token type as string)</H1>
    <B>Adrian Herscu</B> 
    <A HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20antlr%20way%20of%20controlling%20generated%20XML%0A%20%28previously%3A%20Token%20type%20as%20string%29&In-Reply-To=%3Cf1i3ps%24keb%241%40sea.gmane.org%3E"
       TITLE="[antlr-interest] antlr way of controlling generated XML (previously: Token type as string)">bmf1972 at fastmail.fm
       </A><BR>
    <I>Sat May  5 07:18:53 PDT 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="020505.html">[antlr-interest] Token type as string
</A></li>
        <LI>Next message: <A HREF="020538.html">[antlr-interest] antlr way of controlling generated XML	(previously: Token type as string)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20537">[ date ]</a>
              <a href="thread.html#20537">[ thread ]</a>
              <a href="subject.html#20537">[ subject ]</a>
              <a href="author.html#20537">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi all,

After few days of digging through the antlr framework and krugle for 
code fragments I still cannot guess the proper way of doing a relatively 
simple thing: serialize the AST in XML format, where for each of the 
serialized AST nodes, an attribute containing the token *name* is 
generated as an XML attribute besides the other attributes.
Further, I will need to get the textual position of each AST node too.

I am trying now to wrap the CommonAST instance supplied by the parser 
and replace the serializeXml methods with mine -- however, it does quite 
work and I am investigating it right now...

Another approach I thought about is to supply my own ASTFactory and my 
own AST type. MyAST would be able to serialize as XML all the 
information in need and currently is buried somewhere in the Parser 
instance or in the CommonAST instace...

Please help,
Adrian.



Miguel Ping wrote:
&gt;<i> edit: Sorry for the 2x reply, I just need to lose the habit of not 
</I>&gt;<i> replying to the mailing list
</I>&gt;<i> 
</I>&gt;<i> Err, what version of antlr are you using? I'm guessing v2, I never used 
</I>&gt;<i> it. I use v3. In v3 there is no special switch or something.
</I>&gt;<i> 
</I>&gt;<i> Anyway, I guess there should be a place somewhere where the token &lt;&gt; int 
</I>&gt;<i> is defined. Try peeking inside the .txt or the .smap. I don't know the 
</I>&gt;<i> v2 generation procedure, but it should be similar to v3. If you run 
</I>&gt;<i> outta luck, just ask in the forum, I guess some v2 user should help you out.
</I>&gt;<i> 
</I>&gt;<i> On 5/3/07, *Adrian Herscu* 
</I>&gt;<i> &lt;<A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">bmf1972 at fastmail.fm</A> 
</I>&gt;<i> &lt;mailto:<A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">bmf1972 at fastmail.fm</A>&gt;&gt; wrote:
</I>&gt;<i> 
</I>&gt;<i>     Hi Miguel, thanks for your fast reply.
</I>&gt;<i> 
</I>&gt;<i>     I looked into the generated files directory and only file types see
</I>&gt;<i>     there are expanded*.g, *.smap, *.txt and of course *.java.
</I>&gt;<i>     Is there some switch to generate them?
</I>&gt;<i>     Adrian.
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i>     Miguel Ping wrote:
</I>&gt;<i>      &gt; Hi,
</I>&gt;<i>      &gt;
</I>&gt;<i>      &gt; There is a file with the grammar name and .tokens extension
</I>&gt;<i>      &gt; (MyGrammar.tokens) that contains correspondence between numbers and
</I>&gt;<i>      &gt; strings. This file is created by antlr generator. Take a look, it
</I>&gt;<i>      &gt; should suit your needs.
</I>&gt;<i>      &gt;
</I>&gt;<i>      &gt; On 5/3/07, Adrian Herscu
</I>&gt;<i>      &gt; &lt;<A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">bmf1972 at fastmail.fm</A>
</I>&gt;<i>     &lt;mailto:<A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">bmf1972 at fastmail.fm</A>&gt;&gt; wrote:
</I>&gt;<i>      &gt;&gt; Hi all,
</I>&gt;<i>      &gt;&gt;
</I>&gt;<i>      &gt;&gt; I would like to write an XSL template to transform my AST.
</I>&gt;<i>      &gt;&gt; I tried to serialize the AST as XML and I am getting something like:
</I>&gt;<i>      &gt;&gt;
</I>&gt;<i>      &gt;&gt; &lt;antlr.CommonAST text=&quot;compilation-unit&quot; type=&quot;4&quot;&gt;
</I>&gt;<i>      &gt;&gt;    &lt;antlr.CommonAST text=&quot;package&quot; type=&quot;15&quot;&gt;
</I>&gt;<i>      &gt;&gt;      ...
</I>&gt;<i>      &gt;&gt;    &lt;/antlr.CommonAST&gt;
</I>&gt;<i>      &gt;&gt; &lt;/antlr.CommonAST&gt;
</I>&gt;<i>      &gt;&gt;
</I>&gt;<i>      &gt;&gt; In order to apply an XSL transformation using matching
</I>&gt;<i>     templates, I am
</I>&gt;<i>      &gt;&gt; transforming the above into:
</I>&gt;<i>      &gt;&gt;
</I>&gt;<i>      &gt;&gt; &lt;compilation-unit&gt;
</I>&gt;<i>      &gt;&gt;    &lt;package&gt;
</I>&gt;<i>      &gt;&gt;      ...
</I>&gt;<i>      &gt;&gt;    &lt;/package&gt;
</I>&gt;<i>      &gt;&gt; &lt;/compilation-unit&gt;
</I>&gt;<i>      &gt;&gt;
</I>&gt;<i>      &gt;&gt; then I can bind XSL templates such as match=&quot;/compilation-unit&quot;,
</I>&gt;<i>      &gt;&gt; match=&quot;package&quot;, etc.
</I>&gt;<i>      &gt;&gt;
</I>&gt;<i>      &gt;&gt; The problem is with AST nodes that have text content which cannot
</I>&gt;<i>      &gt;&gt; function as XML tags - for example:
</I>&gt;<i>      &gt;&gt;
</I>&gt;<i>      &gt;&gt; &lt;CommonAST text=&quot;123&quot; type=&quot;14&quot; /&gt;
</I>&gt;<i>      &gt;&gt;
</I>&gt;<i>      &gt;&gt; In this case &lt;123 /&gt; is an illegal XML tag.
</I>&gt;<i>      &gt;&gt; type=&quot;14&quot; means that there is some token assigned the identifier 14.
</I>&gt;<i>      &gt;&gt;
</I>&gt;<i>      &gt;&gt; If there would be some easy way to change the token type
</I>&gt;<i>     identifiers to
</I>&gt;<i>      &gt;&gt; strings or to add a string field associated with the token type
</I>&gt;<i>     then it
</I>&gt;<i>      &gt;&gt; would solve my problem really quick.
</I>&gt;<i>      &gt;&gt;
</I>&gt;<i>      &gt;&gt; Is there such a thing? A better approach?
</I>&gt;<i>      &gt;&gt;
</I>&gt;<i>      &gt;&gt; Adrian.
</I>&gt;<i>      &gt;&gt;
</I>&gt;<i>      &gt;&gt;
</I>&gt;<i>      &gt;
</I>&gt;<i> 
</I>&gt;<i> 
</I>
</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="020505.html">[antlr-interest] Token type as string
</A></li>
	<LI>Next message: <A HREF="020538.html">[antlr-interest] antlr way of controlling generated XML	(previously: Token type as string)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20537">[ date ]</a>
              <a href="thread.html#20537">[ thread ]</a>
              <a href="subject.html#20537">[ subject ]</a>
              <a href="author.html#20537">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.antlr.org/mailman/listinfo/antlr-interest">More information about the antlr-interest
mailing list</a><br>
</body></html>
