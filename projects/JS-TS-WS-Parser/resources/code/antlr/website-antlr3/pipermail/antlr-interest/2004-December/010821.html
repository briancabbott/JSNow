<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [antlr-interest] FEATURE REQUEST: continued and memory/speed
	issues
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:antlr-interest%40antlr.org?Subject=%5Bantlr-interest%5D%20FEATURE%20REQUEST%3A%20continued%20and%20memory/speed%0A%09issues&In-Reply-To=bc607a4e0412290426661e74bc%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="010815.html">
   <LINK REL="Next"  HREF="010827.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[antlr-interest] FEATURE REQUEST: continued and memory/speed
	issues</H1>
    <B>Akhilesh Mritunjai</B> 
    <A HREF="mailto:antlr-interest%40antlr.org?Subject=%5Bantlr-interest%5D%20FEATURE%20REQUEST%3A%20continued%20and%20memory/speed%0A%09issues&In-Reply-To=bc607a4e0412290426661e74bc%40mail.gmail.com"
       TITLE="[antlr-interest] FEATURE REQUEST: continued and memory/speed
	issues">virtualaspirin at yahoo.com
       </A><BR>
    <I>Wed Dec 29 23:54:19 PST 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="010815.html">[antlr-interest] FEATURE REQUEST: 'virtual' in ASTFactory (C++)
</A></li>
        <LI>Next message: <A HREF="010827.html">[antlr-interest] FEATURE REQUEST: continued and memory/speed
	issues
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10821">[ date ]</a>
              <a href="thread.html#10821">[ thread ]</a>
              <a href="subject.html#10821">[ subject ]</a>
              <a href="author.html#10821">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Ric,

Infact a lot of methods will need to be made virtual.
For our project we needed a custom AST class with
parent pointer. The standard method of making a custom
factory class failed due to lack of virtual functions
and now we are doing special dirty work in
setNextSibling(), setFirstChild() functions of the
custom AST class.

Additionally, I'd request you to make tokenNames and
getTokenName variable/method in generated parser file
as static (like in java code). Right now there is no
way to access these methods without instantiating the
parser (and lexer and zillion things), which seems a
little painful for printing out just a token name in a
debug statements.

I'd second the request for moving most functions in
header files for better inlining. We have made a good
big grammar file and generated both Java and C++
parser from it. On an 8 MB input file, the Java parser
consumed about __33%__LESS__ memory (Java 217 MB / C++
 372 MB, figures include JVM size, taken straight from
/proc/&lt;PID&gt;/status/VmSize) and is TWICE as fast (Java
33.4 sec, C++ 68 sec). Compilers used were :
* Java : Sun JDK 1.5 for RH linux 9.0
* C++ : GNU gcc 3.4.3 for RH linux 9.0. 
  Flags used : -O3 -fexceptions -ffast-math
-march=pentium4 -fexpensive-optimizations

System is a P4 Xeon 2.4GHz w 1GB RAM.

The grammar is LL(2) for parser and LL(3) for lexer.

- Akhilesh

--- Ric Klaren &lt;<A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">ric.klaren at gmail.com</A>&gt; wrote:
&gt;<i> Do you only need the create's? Or more? At least the
</I>&gt;<i> ASTFactory
</I>&gt;<i> contains a lot of pretty specific stuff and I could
</I>&gt;<i> suspect that you
</I>&gt;<i> need more in some cases. Out of curiosity what are
</I>&gt;<i> you trying to make?
</I>&gt;<i> 
</I>&gt;<i> A small change like this can probably already arrive
</I>&gt;<i> in 2.7.5
</I>&gt;<i> depending on the release schedule.
</I>
__________________________________________________
Do You Yahoo!?
Tired of spam?  Yahoo! Mail has the best spam protection around 
<A HREF="http://mail.yahoo.com">http://mail.yahoo.com</A> 
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="010815.html">[antlr-interest] FEATURE REQUEST: 'virtual' in ASTFactory (C++)
</A></li>
	<LI>Next message: <A HREF="010827.html">[antlr-interest] FEATURE REQUEST: continued and memory/speed
	issues
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10821">[ date ]</a>
              <a href="thread.html#10821">[ thread ]</a>
              <a href="subject.html#10821">[ subject ]</a>
              <a href="author.html#10821">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.antlr.org/mailman/listinfo/antlr-interest">More information about the antlr-interest
mailing list</a><br>
</body></html>
