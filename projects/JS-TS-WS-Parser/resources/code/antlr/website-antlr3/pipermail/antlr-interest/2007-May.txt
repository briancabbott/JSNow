From dave at badgers-in-foil.co.uk  Tue May  1 00:53:52 2007
From: dave at badgers-in-foil.co.uk (David Holroyd)
Date: Tue, 1 May 2007 07:53:52 +0000
Subject: [antlr-interest] syntax predicate strange behavior
In-Reply-To: <200705010203.37675.ilia@obnovlenie.ru>
References: <200705010203.37675.ilia@obnovlenie.ru>
Message-ID: <20070501075352.GA2840@badgers-in-foil.co.uk>

On Tue, May 01, 2007 at 02:03:37AM +0400, Ilia Kantor wrote:
> command_user_body:	
> 	 (LCURL) => LCURL command_arguments? RCURL -> ^(USER_COMMAND command_arguments?) |		 			
> 	 -> USER_COMMAND
> ;
> 
> On input LCURL WS WORD WS MINUS GT...
> this gives me exception from DFA.noViableAlt at first WORD token.

Which decision is it trying to predict when it fails?  That rule has a
'|' decision and a '?' decision.  The command_arguments rule might be
significant to understanding the problem.

Also, why the predicate on LCURL?  Probably makes sense in the wider
grammar, but we can't see that ;)


> By the way, this works fine:
> 
> command_user_body
> options {backtrack=true;}:	
> 	LCURL command_arguments? RCURL -> ^(USER_COMMAND command_arguments?) |		 			
> 	 -> USER_COMMAND
> ;

With backtracking (which I admit I don't wholly understand yet) I guess
if it fails on the first alt, it will back-off to the second, empty
alternative?



-- 
http://david.holroyd.me.uk/

From antlr at mirality.co.nz  Tue May  1 01:22:13 2007
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Tue, 01 May 2007 20:22:13 +1200
Subject: [antlr-interest] syntax predicate strange behavior
In-Reply-To: <20070501075352.GA2840@badgers-in-foil.co.uk>
References: <200705010203.37675.ilia@obnovlenie.ru>
	<20070501075352.GA2840@badgers-in-foil.co.uk>
Message-ID: <20070501082204.7DFAF190752@www.antlr.org>

At 19:53 1/05/2007, David Holroyd wrote:
 >> By the way, this works fine:
 >>
 >> command_user_body
 >> options {backtrack=true;}:	
 >> 	LCURL command_arguments? RCURL -> ^(USER_COMMAND
 >command_arguments?) |					
 >> 	-> USER_COMMAND
 >> ;
 >
 >With backtracking (which I admit I don't wholly understand yet) 
I
 >guess if it fails on the first alt, it will back-off to the 
second,
 >empty alternative?

Speaking of which, since (I think) USER_COMMAND and 
^(USER_COMMAND) are equivalent, wouldn't the above be identical to 
this (ignoring the backtracking for the moment):

command_user_body:
   (LCURL command_arguments? RCURL)? -> ^(USER_COMMAND 
command_arguments?);

(I could be wrong.)


From ilia at obnovlenie.ru  Tue May  1 01:28:54 2007
From: ilia at obnovlenie.ru (Ilia Kantor)
Date: Tue, 1 May 2007 12:28:54 +0400
Subject: [antlr-interest] syntax predicate strange behavior
In-Reply-To: <20070501075352.GA2840@badgers-in-foil.co.uk>
References: <200705010203.37675.ilia@obnovlenie.ru>
	<20070501075352.GA2840@badgers-in-foil.co.uk>
Message-ID: <200705011228.54463.ilia@obnovlenie.ru>


> > command_user_body:	
> > 	 (LCURL) => LCURL command_arguments? RCURL -> ^(USER_COMMAND command_arguments?) |		 			
> > 	 -> USER_COMMAND
> > ;
> > 
> > On input LCURL WS WORD WS MINUS GT...
> > this gives me exception from DFA.noViableAlt at first WORD token.
> 
> Which decision is it trying to predict when it fails?  That rule has a
> '|' decision and a '?' decision.  

DFA.predict call in command_user_body is first call in most outer try { .. }.

     try {
            // GetScopeValueClean.g:248:4: ( ( LCURL )=> LCURL ( command_arguments )? RCURL -> ^( USER_COMMAND ( command_arguments )? ) | -> USER_COMMAND )
            int alt19=2;
            alt19 = dfa19.predict(input);

I believe, it indeed looks for | decision.
But second alternative is not taken on this input.

> The command_arguments rule might be 
> significant to understanding the problem.

command_arguments:	
	command_argument (SEMI command_argument)*;

command_argument  :
        (WS? WORD WS? MINUS GT) => WS? WORD WS? MINUS GT e=exprs_no_semi |
        exprs_no_semi ;


With backtracking it accepts first alternative, it should do same with DFA I guess, but it bails with DFA.NoViableAlt.

> Also, why the predicate on LCURL?  Probably makes sense in the wider
> grammar, but we can't see that ;)
Well, if user has first { in command body means the arguments must follow, 
otherwize it is just bare command.

 
> 
> > By the way, this works fine:
> > 
> > command_user_body
> > options {backtrack=true;}:	
> > 	LCURL command_arguments? RCURL -> ^(USER_COMMAND command_arguments?) |		 			
> > 	 -> USER_COMMAND
> > ;
> 
> With backtracking (which I admit I don't wholly understand yet) I guess
> if it fails on the first alt, it will back-off to the second, empty
> alternative?

Second alt is not taken on my input.


From ilia at obnovlenie.ru  Tue May  1 01:39:12 2007
From: ilia at obnovlenie.ru (Ilia Kantor)
Date: Tue, 1 May 2007 12:39:12 +0400
Subject: [antlr-interest] syntax predicate strange behavior
In-Reply-To: <20070501082204.7DFAF190752@www.antlr.org>
References: <200705010203.37675.ilia@obnovlenie.ru>
	<20070501075352.GA2840@badgers-in-foil.co.uk>
	<20070501082204.7DFAF190752@www.antlr.org>
Message-ID: <200705011239.12552.ilia@obnovlenie.ru>


Yeah, Gavin, actually, your variant is same and causes same problems.

It should be corrected with predicate to compile:

( (LCURL) => LCURL command_arguments? RCURL)? -> ^(USER_COMMAND command_arguments?);




> At 19:53 1/05/2007, David Holroyd wrote:
>  >> By the way, this works fine:
>  >>
>  >> command_user_body
>  >> options {backtrack=true;}:	
>  >> 	LCURL command_arguments? RCURL -> ^(USER_COMMAND
>  >command_arguments?) |					
>  >> 	-> USER_COMMAND
>  >> ;
>  >
>  >With backtracking (which I admit I don't wholly understand yet) 
> I
>  >guess if it fails on the first alt, it will back-off to the 
> second,
>  >empty alternative?
> 
> Speaking of which, since (I think) USER_COMMAND and 
> ^(USER_COMMAND) are equivalent, wouldn't the above be identical to 
> this (ignoring the backtracking for the moment):
> 
> command_user_body:
>    (LCURL command_arguments? RCURL)? -> ^(USER_COMMAND 
> command_arguments?);
> 
> (I could be wrong.)
> 
> 



From antlr at mirality.co.nz  Tue May  1 04:42:19 2007
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Tue, 01 May 2007 23:42:19 +1200
Subject: [antlr-interest] syntax predicate strange behavior
In-Reply-To: <200705011228.54463.ilia@obnovlenie.ru>
References: <200705010203.37675.ilia@obnovlenie.ru>
	<20070501075352.GA2840@badgers-in-foil.co.uk>
	<200705011228.54463.ilia@obnovlenie.ru>
Message-ID: <20070501114211.2A24B1906F7@www.antlr.org>

At 20:28 1/05/2007, Ilia Kantor wrote:
 >
 >command_arguments:	
 >	command_argument (SEMI command_argument)*;
 >
 >command_argument  :
 >        (WS? WORD WS? MINUS GT) => WS? WORD WS? MINUS GT
 >e=exprs_no_semi |
 >        exprs_no_semi ;

Hmm.  Given that this one appears equivalent to this:

command_argument:
   (WS? WORD WS? MINUS GT)? exprs_no_semi;

... what's in exprs_no_semi?  Does it contain WORDs?  If so, that 
could be the source of the ambiguity.

(Out of curiosity, is there any particular reason why you're not 
merging 'MINUS GT' into a single 'ARROW' token or something?  Or 
why you're treating whitespace as significant instead of simply 
marking it as hidden and forgetting about it?)


From ilia at obnovlenie.ru  Tue May  1 04:52:34 2007
From: ilia at obnovlenie.ru (Ilia Kantor)
Date: Tue, 1 May 2007 15:52:34 +0400
Subject: [antlr-interest] syntax predicate strange behavior
In-Reply-To: <20070501114211.2A24B1906F7@www.antlr.org>
References: <200705010203.37675.ilia@obnovlenie.ru>
	<200705011228.54463.ilia@obnovlenie.ru>
	<20070501114211.2A24B1906F7@www.antlr.org>
Message-ID: <200705011552.34679.ilia@obnovlenie.ru>


>  >command_arguments:	
>  >	command_argument (SEMI command_argument)*;
>  >
>  >command_argument  :
>  >        (WS? WORD WS? MINUS GT) => WS? WORD WS? MINUS GT
>  >e=exprs_no_semi |
>  >        exprs_no_semi ;
> 
> Hmm.  Given that this one appears equivalent to this:
> 
> command_argument:
>    (WS? WORD WS? MINUS GT)? exprs_no_semi;
> 
> ... what's in exprs_no_semi?  Does it contain WORDs?  If so, that 
> could be the source of the ambiguity.

Yes, exprs_no_semi can contain WORDs, but still no idea why it gives DFA.NoViableAlt error and
works just fine in backtrack mode.. 

> 
> (Out of curiosity, is there any particular reason why you're not 
> merging 'MINUS GT' into a single 'ARROW' token or something?  Or 
> why you're treating whitespace as significant instead of simply 
> marking it as hidden and forgetting about it?)

The language I'm working on, merges commands into text, like
blabla ~DoThat{ arg1 -> myarg  } and -> gotcha.
First arrow is keyworded argument, second arrow is just plain text.

WS is important in text, but should be cut in arguments.

That's also the reason of using MINUS + GT, I let the parser to join them if needed into "arrow".
arrow: MINUS GT;

This rule was left out in my example to make stuff easier to read.




From imus at linuxmail.org  Tue May  1 04:59:00 2007
From: imus at linuxmail.org (Isabelle Muszynski)
Date: Tue, 01 May 2007 19:59:00 +0800
Subject: [antlr-interest] NetBeans Library Module
Message-ID: <20070501115900.54C4F7AEB8@ws5-10.us4.outblaze.com>

Randall,

Netbeans probably uses antlr somewhere (syntax coloring in the editor, or whatever). There is a project for an antlr plugin for Netbeans (antlr.netbeans.org), but as far as I can tell it is dead.
And, by the way, Netbeans is a great IDE!

Isabelle

> 
> Hi,
> 
> I recently installed NetBeans to avail myself of its profiler (it being
> the best free profiler I can find--if there's a better one, _please_
> let me know!).
> 
> Today when I was going through the modules update dialog, I noticed that
> in the "Libraries" section there's an Antlr (sic) module. The
> descriptive text reads:
> 
> Release date: 2007/03/22
> Contains Antlr 2.7.2 development libraries
> 
> 
> Perhaps whoever is responsible for this could produce an ANTLR 3.x
> counterpart?
> 
> I'm not asking for this, 'cause I use IDEA for my development (apart
> from profiling), but I thought I'd point it out.
> 
> 
> Randall Schulz

>


=


-- 
Powered by Outblaze

From stuart.dootson at gmail.com  Tue May  1 08:18:05 2007
From: stuart.dootson at gmail.com (Stuart Dootson)
Date: Tue, 1 May 2007 16:18:05 +0100
Subject: [antlr-interest] [antlr-dev] target ETAs?
In-Reply-To: <BAY140-DAV379A411587A12832EA8AE81430@phx.gbl>
References: <37A6356C-3CF0-4F60-9F74-B8FDBBCD4D33@cs.usfca.edu>
	<B36CCC332A32904F8FA3DE134A2353362523A8@wavemachine.temporal-wave.com>
	<BAY140-DAV24CB18DE51135E949399A814D0@phx.gbl>
	<B36CCC332A32904F8FA3DE134A23533625241D@wavemachine.temporal-wave.com>
	<BAY140-DAV379A411587A12832EA8AE81430@phx.gbl>
Message-ID: <8b56cad40705010818u7f52b059r273b54e917a0f19b@mail.gmail.com>

On 01/05/07, Kunle Odutola <Kunle_Odutola at hotmail.com> wrote:
> Hi,
>
> > DevPartner studio on Windows for analysis.
> >
> > Then elapsed time vs system CPU time vs memory overhead. Just measuring
> > the elapsed time and system time to parse exactly the same stuff, namely
> > jsk1.6 source code.
>
> Don't think Windows has a builtin 'time' equivalent. Could crank out a
> Windows equivalent using CreateProcess()/GetProcessTimes() I guess...
>
> Kunle

Or use ptime from http://www.synesis.com.au/systools.html instead -
that's what I did.

Stuart Dootson

From jimi at temporal-wave.com  Tue May  1 08:34:23 2007
From: jimi at temporal-wave.com (Jim Idle)
Date: Tue, 1 May 2007 08:34:23 -0700
Subject: [antlr-interest] syntax predicate strange behavior
In-Reply-To: <20070501075352.GA2840@badgers-in-foil.co.uk>
References: <200705010203.37675.ilia@obnovlenie.ru>
	<20070501075352.GA2840@badgers-in-foil.co.uk>
Message-ID: <B36CCC332A32904F8FA3DE134A235336252426@wavemachine.temporal-wave.com>



-----Original Message-----
From: antlr-interest-bounces at antlr.org
[mailto:antlr-interest-bounces at antlr.org] On Behalf Of David Holroyd
Sent: Tuesday, May 01, 2007 12:54 AM
To: antlr-interest at antlr.org
Subject: Re: [antlr-interest] syntax predicate strange behavior

On Tue, May 01, 2007 at 02:03:37AM +0400, Ilia Kantor wrote:
> command_user_body:	
> 	 (LCURL) => LCURL command_arguments? RCURL -> ^(USER_COMMAND
command_arguments?) |		 			
> 	 -> USER_COMMAND
> ;
> 
> On input LCURL WS WORD WS MINUS GT...
> By the way, this works fine:
> 
> command_user_body
> options {backtrack=true;}:	
> 	LCURL command_arguments? RCURL -> ^(USER_COMMAND
command_arguments?) |		 			
> 	 -> USER_COMMAND
> ;

The backtracking option is excellent for prototyping and getting your
grammar in a state where it performs a logically correct parse. This is
because it effectively tries every possible option until it finds one
that works with the input. This is of course a huge over head. However,
for an individual rule, where you can easily see the backtracking
consequences for yourself (but be careful with your analysis ;-), it can
be a useful option.

The fact that backtracking mode works makes me guess [pun intended] that
your syntactic predicates are not quite enough. You can probably try:

: (LCURL) => LCURL ( (WORD)=>command_arguments) ? RCURL
|
;

For the shortest predicate that indicates command_argument is present.
If that does not work then you will have to predicate the whole of
command_arguments perhaps, but in that case you are effectively doing
what backtracking mode does.

The reason you need to predicate command_arguments is unclear from the
context you gave us, but is it possible that that rule itself has an
'empty' option so that you are confusing things by both making it option
in command_user_body AND optional in and of itself?

Jim


From jimi at temporal-wave.com  Tue May  1 09:37:30 2007
From: jimi at temporal-wave.com (Jim Idle)
Date: Tue, 1 May 2007 09:37:30 -0700
Subject: [antlr-interest] [antlr-dev] target ETAs?
In-Reply-To: <8b56cad40705010818u7f52b059r273b54e917a0f19b@mail.gmail.com>
References: <37A6356C-3CF0-4F60-9F74-B8FDBBCD4D33@cs.usfca.edu><B36CCC332A32904F8FA3DE134A2353362523A8@wavemachine.temporal-wave.com><BAY140-DAV24CB18DE51135E949399A814D0@phx.gbl><B36CCC332A32904F8FA3DE134A23533625241D@wavemachine.temporal-wave.com><BAY140-DAV379A411587A12832EA8AE81430@phx.gbl>
	<8b56cad40705010818u7f52b059r273b54e917a0f19b@mail.gmail.com>
Message-ID: <B36CCC332A32904F8FA3DE134A235336252427@wavemachine.temporal-wave.com>

I already have my own system agnostic commands for that, built for
another project I once worked on. However, in this case, I just
programmed it in C anyway as I was interested in general performance of
system agnostic C on Windows. As the grammar drives what actually
happens at runtime, this is good enough.

Jim

-----Original Message-----
From: antlr-interest-bounces at antlr.org
[mailto:antlr-interest-bounces at antlr.org] On Behalf Of Stuart Dootson
Sent: Tuesday, May 01, 2007 8:18 AM
To: antlr-interest
Subject: Re: [antlr-interest] [antlr-dev] target ETAs?

On 01/05/07, Kunle Odutola <Kunle_Odutola at hotmail.com> wrote:
> Hi,
>
> > DevPartner studio on Windows for analysis.
> >
> > Then elapsed time vs system CPU time vs memory overhead. Just
measuring
> > the elapsed time and system time to parse exactly the same stuff,
namely
> > jsk1.6 source code.
>
> Don't think Windows has a builtin 'time' equivalent. Could crank out a
> Windows equivalent using CreateProcess()/GetProcessTimes() I guess...
>
> Kunle

Or use ptime from http://www.synesis.com.au/systools.html instead -
that's what I did.

Stuart Dootson

From ilia at obnovlenie.ru  Tue May  1 11:03:38 2007
From: ilia at obnovlenie.ru (Ilia Kantor)
Date: Tue, 1 May 2007 22:03:38 +0400
Subject: [antlr-interest] syntax predicate strange behavior
In-Reply-To: <B36CCC332A32904F8FA3DE134A235336252426@wavemachine.temporal-wave.com>
References: <200705010203.37675.ilia@obnovlenie.ru>
	<20070501075352.GA2840@badgers-in-foil.co.uk>
	<B36CCC332A32904F8FA3DE134A235336252426@wavemachine.temporal-wave.com>
Message-ID: <200705012203.38229.ilia@obnovlenie.ru>


The problem I'm talking about is:

Backtracking chooses 1st alt ,
so 1st alt is ok.

In fact, no backtracking occurs, it just matches 1st alt and goes.

But dfa gives error on 1st alt!

I'm not quite sure how your solution solves this dillema ?..

Thanks
Ilia.

> The fact that backtracking mode works makes me guess [pun intended] that
> your syntactic predicates are not quite enough. 
> You can probably try: 
> (LCURL) => LCURL ( (WORD)=>command_arguments) ? RCURL
> |
> ;



> 
> For the shortest predicate that indicates command_argument is present.
> If that does not work then you will have to predicate the whole of
> command_arguments perhaps, but in that case you are effectively doing
> what backtracking mode does.
> 
> The reason you need to predicate command_arguments is unclear from the
> context you gave us, but is it possible that that rule itself has an
> 'empty' option so that you are confusing things by both making it option
> in command_user_body AND optional in and of itself?
> 
> Jim
> 
> 



From ma_laver at ciise.concordia.ca  Tue May  1 11:18:46 2007
From: ma_laver at ciise.concordia.ca (=?ISO-8859-1?Q?Marc-Andr=E9_Laverdi=E8re?=)
Date: Tue, 01 May 2007 14:18:46 -0400
Subject: [antlr-interest] Reading from Files vs Strings
Message-ID: <46378486.6070406@ciise.concordia.ca>

Hello,

I have an interesting bug.

I have a file to parse. Since I'm working on an IDE, I load it in memory 
as a String and I pass it to ANTLR to parse using:
ANTLRReaderStream input = new ANTLRReaderStream(new 
StringReader(dataToCompile));

And I'm getting a bunch of errors.
However, if I'm telling ANTLR to parse it as a file, using
ANTLRStringStream input= new ANTLRInputStream(new 
FileInputStream(fileName));
then things do parse well.

What am I doing wrong here?
Thanks in advance for the help!

-- 
Marc-Andr? LAVERDI?RE, B. Eng., M. A. Sc. (in progress)
Computer Security Laboratory - Laboratoire de s?curit? informatique
CIISE, Universit? Concordia University, Montr?al, Qu?bec, Canada
www.ciise.concordia.ca

/"\
\ /    ASCII Ribbon Campaign
  X      against HTML e-mail
/ \

"Perseverance must finish its work so that you may be mature and 
complete, not lacking anything." -James 1:4


From lgcraymer at yahoo.com  Tue May  1 12:10:47 2007
From: lgcraymer at yahoo.com (Loring Craymer)
Date: Tue, 1 May 2007 12:10:47 -0700 (PDT)
Subject: [antlr-interest] syntax predicate strange behavior
In-Reply-To: <B36CCC332A32904F8FA3DE134A235336252426@wavemachine.temporal-wave.com>
Message-ID: <460997.96265.qm@web55904.mail.re3.yahoo.com>


--- Jim Idle <jimi at temporal-wave.com> wrote:
...
> The fact that backtracking mode works makes me guess
> [pun intended] that
> your syntactic predicates are not quite enough. You

synpreds have been broken in ANTLR 3 from the start;
backtrack synpreds are implemented differently.  This
was supposed to be fixed in b7/8 but has not been,
although Benjamin Niemann's report made it to the
buglist.

The problem derives from Ter's initial investigations
that indicated that synpreds were unnecessary with LL*
and could be "optimized away".  Synpreds are
instantiated within the DFAs, but not at the point
where they are needed.  The simplest example I know of
is (this works with ANTLR 2):

=========================================
lexer grammar TestFilter;
options {
	k = 2;
}

CONTENT
	:
	( ~('\r' | '\n') )+
	;


fragment
SEPARATOR
	:
	"/****"! ('*')*! (' ' | '\t')*! "TEST"
	(	~('*' | '\r' | '\n')
	)+
	('*')+! '/'!
	;

NEWLINE
	:
	('\r')? '\n'
	( (SEPARATOR)=>	SEPARATOR { setType: type =
SEPARATOR; }
	|
	)
	;
================================================
The SEPARATOR predicate within NEWLINE is removed
during code generation.  (The above syntax is not
exactly ANTLR 3--the setType action would be
different).

Backtracking was introduced after Ter ran into non-LL*
grammars; unfortunately, that did not trigger a
re-examination of the synpred implementation. 
Instead, an alternate implementation was added in.  I
expect that this will be fixed in a release or so.  
Fortunately, Ilia's report that backtracking works
gives me a place to start hunting for the problem.

--Loring


> can probably try:
> 
> : (LCURL) => LCURL ( (WORD)=>command_arguments) ?
> RCURL
> |
> ;
> 
> For the shortest predicate that indicates
> command_argument is present.
> If that does not work then you will have to
> predicate the whole of
> command_arguments perhaps, but in that case you are
> effectively doing
> what backtracking mode does.
> 
> The reason you need to predicate command_arguments
> is unclear from the
> context you gave us, but is it possible that that
> rule itself has an
> 'empty' option so that you are confusing things by
> both making it option
> in command_user_body AND optional in and of itself?
> 
> Jim
> 
> 


__________________________________________________
Do You Yahoo!?
Tired of spam?  Yahoo! Mail has the best spam protection around 
http://mail.yahoo.com 

From parrt at cs.usfca.edu  Tue May  1 12:20:51 2007
From: parrt at cs.usfca.edu (Terence Parr)
Date: Tue, 1 May 2007 12:20:51 -0700
Subject: [antlr-interest] Reading from Files vs Strings
In-Reply-To: <46378486.6070406@ciise.concordia.ca>
References: <46378486.6070406@ciise.concordia.ca>
Message-ID: <14772583-2B59-45A3-B438-686888235D66@cs.usfca.edu>


On May 1, 2007, at 11:18 AM, Marc-Andr? Laverdi?re wrote:

> Hello,
>
> I have an interesting bug.

Hi. I'm not sure. can you try just using ANTLRStringStream?

Ter


From jimi at temporal-wave.com  Tue May  1 12:37:48 2007
From: jimi at temporal-wave.com (Jim Idle)
Date: Tue, 1 May 2007 12:37:48 -0700
Subject: [antlr-interest] syntax predicate strange behavior
In-Reply-To: <200705012203.38229.ilia@obnovlenie.ru>
References: <200705010203.37675.ilia@obnovlenie.ru><20070501075352.GA2840@badgers-in-foil.co.uk><B36CCC332A32904F8FA3DE134A235336252426@wavemachine.temporal-wave.com>
	<200705012203.38229.ilia@obnovlenie.ru>
Message-ID: <B36CCC332A32904F8FA3DE134A23533625242C@wavemachine.temporal-wave.com>

I saw that you had provided further information, and assumed that you
had solved this. The predicates you need are within the
command_arguments rule to distinguish the option WORD WS sequence I
believe.

Jim

-----Original Message-----
From: antlr-interest-bounces at antlr.org
[mailto:antlr-interest-bounces at antlr.org] On Behalf Of Ilia Kantor
Sent: Tuesday, May 01, 2007 11:04 AM
To: antlr-interest at antlr.org
Subject: Re: [antlr-interest] syntax predicate strange behavior


The problem I'm talking about is:

Backtracking chooses 1st alt ,
so 1st alt is ok.

In fact, no backtracking occurs, it just matches 1st alt and goes.

But dfa gives error on 1st alt!

I'm not quite sure how your solution solves this dillema ?..

Thanks
Ilia.

> The fact that backtracking mode works makes me guess [pun intended]
that
> your syntactic predicates are not quite enough. 
> You can probably try: 
> (LCURL) => LCURL ( (WORD)=>command_arguments) ? RCURL
> |
> ;



> 
> For the shortest predicate that indicates command_argument is present.
> If that does not work then you will have to predicate the whole of
> command_arguments perhaps, but in that case you are effectively doing
> what backtracking mode does.
> 
> The reason you need to predicate command_arguments is unclear from the
> context you gave us, but is it possible that that rule itself has an
> 'empty' option so that you are confusing things by both making it
option
> in command_user_body AND optional in and of itself?
> 
> Jim
> 
> 



From parrt at cs.usfca.edu  Tue May  1 14:18:08 2007
From: parrt at cs.usfca.edu (Terence Parr)
Date: Tue, 1 May 2007 14:18:08 -0700
Subject: [antlr-interest] Reading from Files vs Strings
In-Reply-To: <46378486.6070406@ciise.concordia.ca>
References: <46378486.6070406@ciise.concordia.ca>
Message-ID: <3B350B23-73FD-4CD0-A767-5899C2B9D8D7@cs.usfca.edu>


On May 1, 2007, at 11:18 AM, Marc-Andr? Laverdi?re wrote:

> Hello,
>
> I have an interesting bug.
>
> I have a file to parse. Since I'm working on an IDE, I load it in  
> memory as a String and I pass it to ANTLR to parse using:
> ANTLRReaderStream input = new ANTLRReaderStream(new StringReader 
> (dataToCompile));
>
> And I'm getting a bunch of errors.
> However, if I'm telling ANTLR to parse it as a file, using
> ANTLRStringStream input= new ANTLRInputStream(new FileInputStream 
> (fileName));
> then things do parse well.
>
> What am I doing wrong here?

What error ddo you get?  Are you following the examples in the book  
or elsewhere?
Ter


From me262c at gmail.com  Tue May  1 21:56:40 2007
From: me262c at gmail.com (me 262)
Date: Tue, 1 May 2007 21:56:40 -0700
Subject: [antlr-interest] How to tell assignment from equal?
Message-ID: <b9fb3efe0705012156m3e19404o6bbae5f714a3b987@mail.gmail.com>

Hi,

  I am having problem with equal "==" and assign "=" in my grammar file.

.......
	ASSIGN		: '='	;
.......
			
	COMPARE :
			( '<'
			| "<="
			| '>'
			| ">="
			| "=="
			| "!="
			);

I get message:

my.g: warning:lexical nondeterminism between rules ASSIGN and COMPARE upon
script.g:     k==1:'='
script.g:     k==2:<end-of-token>

It must be a very common problem.
Thanks in advance!

From rhill03 at eds.com  Tue May  1 23:41:40 2007
From: rhill03 at eds.com (Hill, Robert)
Date: Wed, 2 May 2007 07:41:40 +0100
Subject: [antlr-interest] Updating to latest beta...
Message-ID: <2E909902FD3A03419E3A905908AE3DD4031DAA34@UKNSM201.emea.corp.eds.com>

Has caused the compiler to throw out all my calls to 

toTemplates($x)

Has this function disappeared? There's no mention of in the readme (well, none that I spotted).
If it has, what is the preferred method of accumulating return templates? As in ...


codeBlock
@init  {
    StringTemplate varDeclBlock = templateLib.getInstanceOf("sqlVarDeclBlock");
}
	: ^(SMELCODE (c+=statement[varDeclBlock])*) -> codeBlock(varDecls={varDeclBlock},code={toTemplates($c)})   
	;

Cheers!

/2ob


Robert Hill
Information Analyst (C/C++,C#,.NET,Java)
Agile Alliance Member
UKIMEA Technical Capabilities ADU
UKIMEA RABU
Application Services Field Operations EMEA

Hallamshire Business Park, 100 Napier St, Sheffield. S11 8HD
email:	rhill03 at eds.com
Office:	+44 114 291 1928
Mobile:	+44 7903 185 516

This email contains information which is confidential and may be privileged. Unless you are the intended addressee (or authorised to receive for the addressee) you may not use, forward, copy or disclose to anyone this email or any information contained in this email. If you have received this email in error, please advise the sender by reply email immediately and delete this email.

Electronic Data Systems Ltd
Registered Office:, Lansdowne House, Berkeley Square, London  W1J 6ER 
Registered in England no: 53419
VAT number: 432 99 5915



-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070502/7c08e747/attachment.html 

From miguel.ping at gmail.com  Wed May  2 02:06:09 2007
From: miguel.ping at gmail.com (Miguel Ping)
Date: Wed, 2 May 2007 10:06:09 +0100
Subject: [antlr-interest] How to tell assignment from equal?
In-Reply-To: <b9fb3efe0705012156m3e19404o6bbae5f714a3b987@mail.gmail.com>
References: <b9fb3efe0705012156m3e19404o6bbae5f714a3b987@mail.gmail.com>
Message-ID: <ab0bf2c00705020206p2e8d19d2x39832ba5eb1d420d@mail.gmail.com>

Hi,

You can use a predicate to check for an '=' after the first '=' and
then change the token type:


ASSIGN : '=' ('=' {$type = COMPARE;} ) ? ;

the ('=') ? rule checks for existence of the '=' in the ASSIGN token,
after reading the first '='. The action {$type = COMPARE;} sets the
token type >only< if the predicate is true, that is only if the lexer
found a '=' after the first '='.

Hope it helps,
Miguel Ping

On 5/2/07, me 262 <me262c at gmail.com> wrote:
> Hi,
>
>   I am having problem with equal "==" and assign "=" in my grammar file.
>
> .......
> 	ASSIGN		: '='	;
> .......
> 			
> 	COMPARE :
> 			( '<'
> 			| "<="
> 			| '>'
> 			| ">="
> 			| "=="
> 			| "!="
> 			);
>
> I get message:
>
> my.g: warning:lexical nondeterminism between rules ASSIGN and COMPARE upon
> script.g:     k==1:'='
> script.g:     k==2:<end-of-token>
>
> It must be a very common problem.
> Thanks in advance!
>

From rubenfonseca at di.uminho.pt  Wed May  2 03:15:02 2007
From: rubenfonseca at di.uminho.pt (Ruben Fonseca)
Date: Wed, 02 May 2007 11:15:02 +0100
Subject: [antlr-interest] Mixing PHP and HTML --> error
Message-ID: <1178100902.4094.1.camel@localhost.localdomain>

Hi to all!

I'm writting a PHP grammar. As you know, PHP can be used in the middle
of HTML code. I'm having an hard time to ignore the HTML part. The
parser always give me errors when I mix PHP and HTML.

Is there any cool way of dealing with this? I'm using AntLR 3 right now.

Thank you!


From aaron.feng at gmail.com  Wed May  2 04:55:53 2007
From: aaron.feng at gmail.com (Aaron Feng)
Date: Wed, 2 May 2007 07:55:53 -0400
Subject: [antlr-interest] Exception Handler in v3b6
Message-ID: <4e3934860705020455x2502646m2c9f6f0b852cb897@mail.gmail.com>

I received the following error when I tried to use my own exception handler:

unexpected token: catch

I also received the same error if I compiled the Exc.g on page 251 from the
antlr beta book.

Is this feature not yet working in v3?

Thanx,

Aaron
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070502/b20687f7/attachment.html 

From miguel.ping at gmail.com  Wed May  2 05:45:14 2007
From: miguel.ping at gmail.com (Miguel Ping)
Date: Wed, 2 May 2007 13:45:14 +0100
Subject: [antlr-interest] Mixing PHP and HTML --> error
In-Reply-To: <1178100902.4094.1.camel@localhost.localdomain>
References: <1178100902.4094.1.camel@localhost.localdomain>
Message-ID: <ab0bf2c00705020545y1e39824fjd8d9a9e35715941c@mail.gmail.com>

Ol? ;)

Could you expose the details of the errors you are getting? I believe
the grammar option filter=true ignores anything that doesn't fall in
the grammar limits.

On 5/2/07, Ruben Fonseca <rubenfonseca at di.uminho.pt> wrote:
> Hi to all!
>
> I'm writting a PHP grammar. As you know, PHP can be used in the middle
> of HTML code. I'm having an hard time to ignore the HTML part. The
> parser always give me errors when I mix PHP and HTML.
>
> Is there any cool way of dealing with this? I'm using AntLR 3 right now.
>
> Thank you!
>
>

From open.zone at virgin.net  Wed May  2 05:52:25 2007
From: open.zone at virgin.net (Micheal J)
Date: Wed, 2 May 2007 13:52:25 +0100
Subject: [antlr-interest] Updating to latest beta...
In-Reply-To: <2E909902FD3A03419E3A905908AE3DD4031DAA34@UKNSM201.emea.corp.eds.com>
Message-ID: <001001c78cb8$bdeff800$c704a8c0@hercules>

 
Robert,
 
Try:
 
    ToTemplate($x)
 
 
Micheal

-----------------------
The best way to contact me is via the list/forum. My time is very limited. 

-----Original Message-----
From: antlr-interest-bounces at antlr.org
[mailto:antlr-interest-bounces at antlr.org] On Behalf Of Hill, Robert
Sent: 02 May 2007 07:42
To: antlr-interest at antlr.org
Subject: [antlr-interest] Updating to latest beta...



Has caused the compiler to throw out all my calls to 

toTemplates($x) 

Has this function disappeared? There's no mention of in the readme (well,
none that I spotted). 
If it has, what is the preferred method of accumulating return templates? As
in . 


codeBlock 
@init  { 
    StringTemplate varDeclBlock =
templateLib.getInstanceOf("sqlVarDeclBlock"); 
} 
        : ^(SMELCODE (c+=statement[varDeclBlock])*) ->
codeBlock(varDecls={varDeclBlock},code={toTemplates($c)})   
        ; 

Cheers! 

/2ob 


Robert Hill 
Information Analyst (C/C++,C#,.NET,Java) 
Agile Alliance Member 
UKIMEA Technical Capabilities ADU 
UKIMEA RABU 
Application Services Field Operations EMEA 

Hallamshire Business Park, 100 Napier St, Sheffield. S11 8HD 
email:  rhill03 at eds.com 
Office: +44 114 291 1928 
Mobile: +44 7903 185 516 

This email contains information which is confidential and may be privileged.
Unless you are the intended addressee (or authorised to receive for the
addressee) you may not use, forward, copy or disclose to anyone this email
or any information contained in this email. If you have received this email
in error, please advise the sender by reply email immediately and delete
this email.

Electronic Data Systems Ltd 
Registered Office:, Lansdowne House, Berkeley Square, London  W1J 6ER 
Registered in England no: 53419 
VAT number: 432 99 5915 



-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070502/96edd8b8/attachment.html 

From open.zone at virgin.net  Wed May  2 06:42:10 2007
From: open.zone at virgin.net (Micheal J)
Date: Wed, 2 May 2007 14:42:10 +0100
Subject: [antlr-interest] Updating to latest beta...
In-Reply-To: <001001c78cb8$bdeff800$c704a8c0@hercules>
Message-ID: <001901c78cbf$b009e870$c704a8c0@hercules>

Robert,
 
Oops!. I should have read more closely...this isn't a Java vs C# issue
 
Replace "code={toTemplates($c)}" with just "code={$c}"
 
See the cminus.g example grammar for instance.
 
 
Micheal

-----------------------
The best way to contact me is via the list/forum. My time is very limited. 

-----Original Message-----
From: antlr-interest-bounces at antlr.org
[mailto:antlr-interest-bounces at antlr.org] On Behalf Of Micheal J
Sent: 02 May 2007 13:52
To: antlr-interest at antlr.org
Subject: Re: [antlr-interest] Updating to latest beta...


 
Robert,
 
Try:
 
    ToTemplate($x)
 
 
Micheal

-----------------------
The best way to contact me is via the list/forum. My time is very limited. 

-----Original Message-----
From: antlr-interest-bounces at antlr.org
[mailto:antlr-interest-bounces at antlr.org] On Behalf Of Hill, Robert
Sent: 02 May 2007 07:42
To: antlr-interest at antlr.org
Subject: [antlr-interest] Updating to latest beta...



Has caused the compiler to throw out all my calls to 

toTemplates($x) 

Has this function disappeared? There's no mention of in the readme (well,
none that I spotted). 
If it has, what is the preferred method of accumulating return templates? As
in . 


codeBlock 
@init  { 
    StringTemplate varDeclBlock =
templateLib.getInstanceOf("sqlVarDeclBlock"); 
} 
        : ^(SMELCODE (c+=statement[varDeclBlock])*) ->
codeBlock(varDecls={varDeclBlock},code={toTemplates($c)})   
        ; 

Cheers! 

/2ob 


Robert Hill 
Information Analyst (C/C++,C#,.NET,Java) 
Agile Alliance Member 
UKIMEA Technical Capabilities ADU 
UKIMEA RABU 
Application Services Field Operations EMEA 

Hallamshire Business Park, 100 Napier St, Sheffield. S11 8HD 
email:  rhill03 at eds.com 
Office: +44 114 291 1928 
Mobile: +44 7903 185 516 

This email contains information which is confidential and may be privileged.
Unless you are the intended addressee (or authorised to receive for the
addressee) you may not use, forward, copy or disclose to anyone this email
or any information contained in this email. If you have received this email
in error, please advise the sender by reply email immediately and delete
this email.

Electronic Data Systems Ltd 
Registered Office:, Lansdowne House, Berkeley Square, London  W1J 6ER 
Registered in England no: 53419 
VAT number: 432 99 5915 



-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070502/a0ad37f1/attachment.html 

From alopez at imim.es  Wed May  2 06:51:20 2007
From: alopez at imim.es (=?ISO-8859-1?Q?Adri=E1n_L=F3pez?=)
Date: Wed, 2 May 2007 15:51:20 +0200
Subject: [antlr-interest] installing antlr
Message-ID: <6A2FEF61-00D0-4B75-BEC3-BDF18FAF0255@imim.es>

Hello people,

I'm having problems to install antlr. I'm not sure if this is the  
correct mailing list for asking for some help, I apologise if it's not.

The thing is that the configure seemed to run OK (it gave me a  
warning but it continued) but the make failed. The messages of the  
attempt of the installation are here (in order to avoid large e-mails):

http://cbbl.imim.es/cbbl/Members/alopez/public-folder/questions/ 
question

My machine is an Intel Mac OS X v10.4.9. Am I having problems with  
the Java version?

valey:~/software/src/antlr-2.7.7 alopez$ java -version
java version "1.5.0_07"
Java(TM) 2 Runtime Environment, Standard Edition (build 1.5.0_07-164)
Java HotSpot(TM) Client VM (build 1.5.0_07-87, mixed mode)

Any help or commentary will be very welcomed.

Thanks for your time,

a

--
Adri?n L?pez Garc?a de Lomana

Computational Biochemistry and Biophysics Laboratory
Research Unit on Biomedical Informatics
Barcelona Biomedical Research Park
Pompeu Fabra University
Barcelona, 08003, Spain

Phone: +34 93 316 0506; Fax: +34 93 316 0550

http://cbbl.imim.es





--------
La informaci?? continguda en aquest missatge i en qualsevol fitxer 
adjunt ??s confidencial, privada i d'??s exclusiu per al destinatari.
Si no ??s la persona a la qual anava dirigida aquesta informaci??, si us 
plau, notifiqui immediatament l'enviament erroni al remitent i esborri 
el missatge. Qualsevol c??pia, divulgaci??, distribuci?? o utilitzaci?? no 
autoritzada d'aquest correu electr??nic i dels seus adjunts est?? 
prohibida en virtut de la legislaci?? vigent.

La informaci??n contenida en este mensaje y en cualquier fichero 
adjunto es confidencial, privada y de uso exclusivo para el 
destinatario. Si usted no es la persona a la cual iba dirigida esta 
informaci??n, por favor, notifique inmediatamente el env??o err??neo al 
remitente y borre el mensaje. Cualquier copia, divulgaci??n, 
distribuci??n o utilizaci??n no autorizada de este correo electr??nico y 
de sus adjuntos est?? prohibida en virtud de la legislaci??n vigente.

The information included in this e-mail and any attached files are 
confidential and private. If you are not the intended recipient, 
please notify the error to the sender and delete this message 
immediately. Dissemination, forwarding or copying of this e-mail and 
its associated attachments is strictly prohibited according with 
current legislation.
--------

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070502/43670ad7/attachment-0001.html 

From rhill03 at eds.com  Wed May  2 07:17:09 2007
From: rhill03 at eds.com (Hill, Robert)
Date: Wed, 2 May 2007 15:17:09 +0100
Subject: [antlr-interest] More upgrade problems!
Message-ID: <2E909902FD3A03419E3A905908AE3DD4031DAC03@UKNSM201.emea.corp.eds.com>

After upgrading to 3.0b8, im also getting null pointer exceptions :(

Should this :
	: ^(MAPDEF mappingName mappingTypeDecl+ SEP classAttributes*)  {
            Mapping m = (Mapping)Symbol.FullResolve($mappingName.text);
...

Generate this?

              Mapping m = (Mapping)Symbol.FullResolve(input.getTokenStream().toString(
              input.getTreeAdaptor().getTokenStartIndex(mappingName15.start),
              input.getTreeAdaptor().getTokenStopIndex(mappingName15.start)));

mapingName15.start , twice?

I see a previous mail from Ter about just using $text (..throwing nullptr exception), might this be related?

Thanks

/2ob






Robert Hill
Information Analyst (C/C++,C#,.NET,Java)
Agile Alliance Member
UKIMEA Technical Capabilities ADU
UKIMEA RABU
Application Services Field Operations EMEA

Hallamshire Business Park, 100 Napier St, Sheffield. S11 8HD
email:	rhill03 at eds.com
Office:	+44 114 291 1928
Mobile:	+44 7903 185 516

This email contains information which is confidential and may be privileged. Unless you are the intended addressee (or authorised to receive for the addressee) you may not use, forward, copy or disclose to anyone this email or any information contained in this email. If you have received this email in error, please advise the sender by reply email immediately and delete this email.

Electronic Data Systems Ltd
Registered Office:, Lansdowne House, Berkeley Square, London  W1J 6ER 
Registered in England no: 53419
VAT number: 432 99 5915



-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070502/1ff3ee49/attachment.html 

From parrt at cs.usfca.edu  Wed May  2 08:26:11 2007
From: parrt at cs.usfca.edu (Terence Parr)
Date: Wed, 2 May 2007 08:26:11 -0700
Subject: [antlr-interest] Updating to latest beta...
In-Reply-To: <001901c78cbf$b009e870$c704a8c0@hercules>
References: <001901c78cbf$b009e870$c704a8c0@hercules>
Message-ID: <DA74F38A-3528-4A0B-9EFB-475991E13AA2@cs.usfca.edu>


On May 2, 2007, at 6:42 AM, Micheal J wrote:

> Robert,
>
> Oops!. I should have read more closely...this isn't a Java vs C# issue
>
> Replace "code={toTemplates($c)}" with just "code={$c}"
>
> See the cminus.g example grammar for instance.

Yep, i did away with those as we don't need them.  The += label  
collects either templates or trees depending on output option.

Ter

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070502/2bb0b5fa/attachment.html 

From me262c at gmail.com  Wed May  2 08:36:10 2007
From: me262c at gmail.com (me 262)
Date: Wed, 2 May 2007 08:36:10 -0700
Subject: [antlr-interest] How to tell assignment from equal?
In-Reply-To: <ab0bf2c00705020206p2e8d19d2x39832ba5eb1d420d@mail.gmail.com>
References: <b9fb3efe0705012156m3e19404o6bbae5f714a3b987@mail.gmail.com>
	<ab0bf2c00705020206p2e8d19d2x39832ba5eb1d420d@mail.gmail.com>
Message-ID: <b9fb3efe0705020836o6e8d1d9bp4d885935cdafcb4a@mail.gmail.com>

Thanks Miguel,

  It works as you pointed out.

  ASSIGN :	'=' ('='{$setType(COMPARE);})? ;

ME

On 5/2/07, Miguel Ping <miguel.ping at gmail.com> wrote:
> Hi,
>
> You can use a predicate to check for an '=' after the first '=' and
> then change the token type:
>
>
> ASSIGN : '=' ('=' {$type = COMPARE;} ) ? ;
>
> the ('=') ? rule checks for existence of the '=' in the ASSIGN token,
> after reading the first '='. The action {$type = COMPARE;} sets the
> token type >only< if the predicate is true, that is only if the lexer
> found a '=' after the first '='.
>
> Hope it helps,
> Miguel Ping
>
> On 5/2/07, me 262 <me262c at gmail.com> wrote:
> > Hi,
> >
> >   I am having problem with equal "==" and assign "=" in my grammar file.
> >
> > .......
> >       ASSIGN          : '='   ;
> > .......
> >
> >       COMPARE :
> >                       ( '<'
> >                       | "<="
> >                       | '>'
> >                       | ">="
> >                       | "=="
> >                       | "!="
> >                       );
> >
> > I get message:
> >
> > my.g: warning:lexical nondeterminism between rules ASSIGN and COMPARE upon
> > script.g:     k==1:'='
> > script.g:     k==2:<end-of-token>
> >
> > It must be a very common problem.
> > Thanks in advance!
> >
>

From fjse65 at freesurf.ch  Wed May  2 08:48:45 2007
From: fjse65 at freesurf.ch (Francisco Javier Santa Eugenia)
Date: Wed, 2 May 2007 17:48:45 +0200
Subject: [antlr-interest] antlr-2.7.7: Compilation failed (Linux openSuse
	10.2)
Message-ID: <200705021748.45598.fjse65@freesurf.ch>

Hello, 
I am trying to compile antlr-2.7.7 on openSuse Linux 10.2, but the compilation 
failed with `make install` (. Here are the messages:
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
>> /usr/bin/make -C lib/csharp/antlr.runtime install
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
make[3]: Entering directory 
`/home/fjse65/tmp/antlr-2.7.7/lib/csharp/antlr.runtime'
*** compiling 102 C# files
/home/fjse65/tmp/antlr-2.7.7/lib/csharp/antlr.runtime/../../../lib/csharp/antlr.runtime/AssemblyInfo.cs(35,1): 
warning CS1691: `1699' is not a valid warning number
/home/fjse65/tmp/antlr-2.7.7/lib/csharp/antlr.runtime/../../../lib/csharp/antlr.runtime/AssemblyInfo.cs(35,1): 
warning CS1691: `1699' is not a valid warning number
error CS0006: Cannot find assembly `System.Windows.Forms.dll'
Log:

Compilation failed: 1 error(s), 2 warnings

xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
? ? ? ? ? ? ? ? ? ? ? >> E R R O R <<
============================================================

/usr/bin/mcs -nologo -t:library 
-out:/home/fjse65/tmp/antlr-2.7.7/lib/antlr.runtime.dll 
-r:System.Windows.Forms.dll -r:System.Drawing.dll -r:System.dll -d:APTC [102 
file(s) skipped]

============================================================
Got an error while trying to execute ?command ?above. ?Error
messages (if any) must have shown before. The exit code was:
exit(1)
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
make[3]: *** [/home/fjse65/tmp/antlr-2.7.7/lib/antlr.runtime.dll] Erreur 1
make[3]: Leaving directory 
`/home/fjse65/tmp/antlr-2.7.7/lib/csharp/antlr.runtime'
make[2]: *** [install] Erreur 1
make[2]: Leaving directory `/home/fjse65/tmp/antlr-2.7.7/lib/csharp'
make[1]: *** [install] Erreur 1
make[1]: Leaving directory `/home/fjse65/tmp/antlr-2.7.7/lib'
make: *** [install] Erreur 1

I probably made a mistake but I do not understand where.
Can someone help me?
Thank you in advance!
fjse

From aaron.feng at gmail.com  Wed May  2 08:54:21 2007
From: aaron.feng at gmail.com (Aaron Feng)
Date: Wed, 2 May 2007 11:54:21 -0400
Subject: [antlr-interest] Exception Handler v3b6
Message-ID: <4e3934860705020854r54a36b01o29c08b879908a3a3@mail.gmail.com>

** If this message already exists, please ignore it.  My email wasn't
working correctly this morning.

I received the following error when I tried to use my own exception handler:

unexpected token: catch

I also received the same error if I compiled the Exc.g on page 251 from the
antlr beta book.

Is this feature not yet working in v3?

Thanx,
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070502/f4e2275c/attachment.html 

From parrt at cs.usfca.edu  Wed May  2 09:04:41 2007
From: parrt at cs.usfca.edu (Terence Parr)
Date: Wed, 2 May 2007 09:04:41 -0700
Subject: [antlr-interest] Exception Handler v3b6
In-Reply-To: <4e3934860705020854r54a36b01o29c08b879908a3a3@mail.gmail.com>
References: <4e3934860705020854r54a36b01o29c08b879908a3a3@mail.gmail.com>
Message-ID: <2CE3561D-95F7-4E35-98DC-3EBBE3BAE134@cs.usfca.edu>

strange.  should be

r : ... ;
   catch [...] {...}
   catch [...] {...}
   finally {...}

is that what you have?  3.0b7?

Ter
On May 2, 2007, at 8:54 AM, Aaron Feng wrote:

> ** If this message already exists, please ignore it.  My email  
> wasn't working correctly this morning.
>
> I received the following error when I tried to use my own exception  
> handler:
>
> unexpected token: catch
>
> I also received the same error if I compiled the Exc.g on page 251  
> from the antlr beta book.
>
> Is this feature not yet working in v3?
>
> Thanx,


From aaron.feng at gmail.com  Wed May  2 09:24:19 2007
From: aaron.feng at gmail.com (Aaron Feng)
Date: Wed, 2 May 2007 12:24:19 -0400
Subject: [antlr-interest] Exception Handler v3b6
In-Reply-To: <2CE3561D-95F7-4E35-98DC-3EBBE3BAE134@cs.usfca.edu>
References: <4e3934860705020854r54a36b01o29c08b879908a3a3@mail.gmail.com>
	<2CE3561D-95F7-4E35-98DC-3EBBE3BAE134@cs.usfca.edu>
Message-ID: <4e3934860705020924r7afee28dtdaa4bc6222cacd98@mail.gmail.com>

I'm currently running b6, but I can give b7 a try.

On 5/2/07, Terence Parr <parrt at cs.usfca.edu> wrote:
>
> strange.  should be
>
> r : ... ;
>    catch [...] {...}
>    catch [...] {...}
>    finally {...}
>
> is that what you have?  3.0b7?
>
> Ter
> On May 2, 2007, at 8:54 AM, Aaron Feng wrote:
>
> > ** If this message already exists, please ignore it.  My email
> > wasn't working correctly this morning.
> >
> > I received the following error when I tried to use my own exception
> > handler:
> >
> > unexpected token: catch
> >
> > I also received the same error if I compiled the Exc.g on page 251
> > from the antlr beta book.
> >
> > Is this feature not yet working in v3?
> >
> > Thanx,
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070502/e67eb3b2/attachment.html 

From Bernhard.Schmalhofer at gmx.de  Wed May  2 09:35:25 2007
From: Bernhard.Schmalhofer at gmx.de (Bernhard Schmalhofer)
Date: Wed, 02 May 2007 18:35:25 +0200
Subject: [antlr-interest] Mixing PHP and HTML --> error
In-Reply-To: <1178100902.4094.1.camel@localhost.localdomain>
References: <1178100902.4094.1.camel@localhost.localdomain>
Message-ID: <4638BDCD.1010208@gmx.de>

Ruben Fonseca schrieb:
> Hi to all!
>
> I'm writting a PHP grammar. As you know, PHP can be used in the middle
> of HTML code. I'm having an hard time to ignore the HTML part. The
> parser always give me errors when I mix PHP and HTML.
>   
In Plumhead, http://rakudo.org/parrot/index.cgi?plumhead, I'm using a 
syntactic predicate
in order to keep track whether I'm in HTML of PHP.
See 
http://svn.perl.org/viewcvs/parrot/trunk/languages/plumhead/src/antlr3/Plumhead.g?view=markup.
I don't know whether this is the best approach.
I've also been looking at the island grammar example in V3. But as far 
as I understood it,
it did not match what I needed for PHP.

It would be nice if Antlr 3 had non-consuming matches. So far I haven't 
found them in the documentation, but I haven't bought the book yet.

Best regards,
  Bernhard

> Is there any cool way of dealing with this? I'm using AntLR 3 right now.
>
> Thank you!
>
>   


From aaron.feng at gmail.com  Wed May  2 09:51:39 2007
From: aaron.feng at gmail.com (Aaron Feng)
Date: Wed, 2 May 2007 12:51:39 -0400
Subject: [antlr-interest] Exception Handler v3b6
In-Reply-To: <4e3934860705020924r7afee28dtdaa4bc6222cacd98@mail.gmail.com>
References: <4e3934860705020854r54a36b01o29c08b879908a3a3@mail.gmail.com>
	<2CE3561D-95F7-4E35-98DC-3EBBE3BAE134@cs.usfca.edu>
	<4e3934860705020924r7afee28dtdaa4bc6222cacd98@mail.gmail.com>
Message-ID: <4e3934860705020951n43f9c9f3oa1d2210db544b3c6@mail.gmail.com>

Yeah, it works fine in b7, just not in b6.

Thanx,

Aaron

On 5/2/07, Aaron Feng <aaron.feng at gmail.com> wrote:
>
> I'm currently running b6, but I can give b7 a try.
>
> On 5/2/07, Terence Parr <parrt at cs.usfca.edu> wrote:
> >
> > strange.  should be
> >
> > r : ... ;
> >    catch [...] {...}
> >    catch [...] {...}
> >    finally {...}
> >
> > is that what you have?  3.0b7?
> >
> > Ter
> > On May 2, 2007, at 8:54 AM, Aaron Feng wrote:
> >
> > > ** If this message already exists, please ignore it.  My email
> > > wasn't working correctly this morning.
> > >
> > > I received the following error when I tried to use my own exception
> > > handler:
> > >
> > > unexpected token: catch
> > >
> > > I also received the same error if I compiled the Exc.g on page 251
> > > from the antlr beta book.
> > >
> > > Is this feature not yet working in v3?
> > >
> > > Thanx,
> >
> >
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070502/4e5ad5f5/attachment.html 

From parrt at cs.usfca.edu  Wed May  2 12:02:12 2007
From: parrt at cs.usfca.edu (Terence Parr)
Date: Wed, 2 May 2007 12:02:12 -0700
Subject: [antlr-interest] C# b7+ available
Message-ID: <98633CFE-72E7-4840-8254-7D9DCE7E7CA4@cs.usfca.edu>

Hi,

Thanks to Kunle, we have an updated C# target; grab

antlr-05-02-2007.12.tar.gz

Ter

From rob.hill at blueyonder.co.uk  Wed May  2 13:15:07 2007
From: rob.hill at blueyonder.co.uk (Rob Hill)
Date: Wed, 2 May 2007 21:15:07 +0100
Subject: [antlr-interest] C# b7+ available
In-Reply-To: <98633CFE-72E7-4840-8254-7D9DCE7E7CA4@cs.usfca.edu>
References: <98633CFE-72E7-4840-8254-7D9DCE7E7CA4@cs.usfca.edu>
Message-ID: <000901c78cf6$942589c0$bc709d40$@hill@blueyonder.co.uk>

Awesome!
Kunle, I want your babies.
I just can't take anymore punishment from Sun. ;)
Although I have to say IntelliJ does make it all bearable!

/2ob


> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of Terence Parr
> Sent: 02 May 2007 20:02
> To: ANTLR Interest
> Subject: [antlr-interest] C# b7+ available
> 
> Hi,
> 
> Thanks to Kunle, we have an updated C# target; grab
> 
> antlr-05-02-2007.12.tar.gz
> 
> Ter



From bace.spam at gmx.net  Wed May  2 17:34:29 2007
From: bace.spam at gmx.net (Markus Kuhla)
Date: Thu, 03 May 2007 02:34:29 +0200
Subject: [antlr-interest] how to set lookahead in v3
Message-ID: <20070503003429.323180@gmx.net>

Hi.

I'm using antlr, v3beta7. The LL(*) algorithm determines automatically how much lookahead is necessary to choose a alternative?!

Ich have the problem, that the parser can find 1 or 2 tokens matching to an alternative of a parser rule, e.g.
next input: "NEWLINE BLANK BLANK DASH DASH ..."
the parser is currently in this rule:

text : line+;
line : NEWLINE? blanks? all_chars_but_not_dash
     | EOF;

The parser chooses the 1st alternative of line, and gives an error of course.
In the grammar is another possibility, to continue with "NEWLINE blanks? DASH" - So the parser has to go out of the line-rule, if there is a dash!


How can you realize a behavior like a real LL(*) parser, that there is enough lookahead to make a appropriate decision (leave rule line or continue with alternative1)

Thanks guys, in advance ;) !!!

-- 
"Feel free" - 10 GB Mailbox, 100 FreeSMS/Monat ...
Jetzt GMX TopMail testen: http://www.gmx.net/de/go/topmail

From rhill03 at eds.com  Thu May  3 00:48:33 2007
From: rhill03 at eds.com (Hill, Robert)
Date: Thu, 3 May 2007 08:48:33 +0100
Subject: [antlr-interest] Possible bug?
In-Reply-To: <2E909902FD3A03419E3A905908AE3DD4031DAC03@UKNSM201.emea.corp.eds.com>
Message-ID: <2E909902FD3A03419E3A905908AE3DD4031DACD1@UKNSM201.emea.corp.eds.com>

Ter / anyone!,
 
I've narrowed this down and 
 
 : ^(MAPDEF mappingName )  {
     String test = $mappingName.text;
}
mappingName
    : Identifier 
    ;
---------------------
generates  this code , 
 
String     test = input.getTokenStream().toString(
 
input.getTreeAdaptor().getTokenStartIndex(mappingName15.start),
 
input.getTreeAdaptor().getTokenStopIndex(mappingName15.start));

...and input.getTokenStream() is returning null.
 
Im a bit suspicious since this is the only place in my grammars that
"input.getTokenStream().toString()" is getting generated.
everywhere else i don't seem to be using identifiers in subrules.
 
do subrules still allow you to get the returned text of the tree? this
worked in 3.0b5.
or am i doing something else wrong here?
 
Damn, this is taking some getting back into after 6 months away :(
 
TIA!
 
/2ob
 
 
 
 

Robert Hill 
Information Analyst (C/C++,C#,.NET,Java) 
Agile Alliance Member 
UKIMEA Technical Capabilities ADU 
UKIMEA RABU 
Application Services Field Operations EMEA 

Hallamshire Business Park, 100 Napier St, Sheffield. S11 8HD 
email:  rhill03 at eds.com 
Office: +44 114 291 1928 
Mobile: +44 7903 185 516 

This email contains information which is confidential and may be
privileged. Unless you are the intended addressee (or authorised to
receive for the addressee) you may not use, forward, copy or disclose to
anyone this email or any information contained in this email. If you
have received this email in error, please advise the sender by reply
email immediately and delete this email.

Electronic Data Systems Ltd 
Registered Office:, Lansdowne House, Berkeley Square, London  W1J 6ER 
Registered in England no: 53419 
VAT number: 432 99 5915 


 


________________________________

	From: antlr-interest-bounces at antlr.org
[mailto:antlr-interest-bounces at antlr.org] On Behalf Of Hill, Robert
	Sent: 02 May 2007 15:17
	To: antlr-interest at antlr.org
	Subject: [antlr-interest] More upgrade problems!
	
	

	After upgrading to 3.0b8, im also getting null pointer
exceptions :( 

	Should this : 
	        : ^(MAPDEF mappingName mappingTypeDecl+ SEP
classAttributes*)  { 
	            Mapping m =
(Mapping)Symbol.FullResolve($mappingName.text); 
	... 

	Generate this? 

	              Mapping m =
(Mapping)Symbol.FullResolve(input.getTokenStream().toString( 
	
input.getTreeAdaptor().getTokenStartIndex(mappingName15.start), 
	
input.getTreeAdaptor().getTokenStopIndex(mappingName15.start))); 

	mapingName15.start , twice? 

	I see a previous mail from Ter about just using $text
(..throwing nullptr exception), might this be related? 

	Thanks 

	/2ob 






	Robert Hill 
	Information Analyst (C/C++,C#,.NET,Java) 
	Agile Alliance Member 
	UKIMEA Technical Capabilities ADU 
	UKIMEA RABU 
	Application Services Field Operations EMEA 

	Hallamshire Business Park, 100 Napier St, Sheffield. S11 8HD 
	email:  rhill03 at eds.com 
	Office: +44 114 291 1928 
	Mobile: +44 7903 185 516 

	This email contains information which is confidential and may be
privileged. Unless you are the intended addressee (or authorised to
receive for the addressee) you may not use, forward, copy or disclose to
anyone this email or any information contained in this email. If you
have received this email in error, please advise the sender by reply
email immediately and delete this email.

	Electronic Data Systems Ltd 
	Registered Office:, Lansdowne House, Berkeley Square, London
W1J 6ER 
	Registered in England no: 53419 
	VAT number: 432 99 5915 



-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070503/8c32c581/attachment.html 

From jaluber at gmx.de  Thu May  3 02:10:57 2007
From: jaluber at gmx.de (Johannes Luber)
Date: Thu, 03 May 2007 11:10:57 +0200
Subject: [antlr-interest] how to set lookahead in v3
In-Reply-To: <20070503003429.323180@gmx.net>
References: <20070503003429.323180@gmx.net>
Message-ID: <4639A721.5090100@gmx.de>

Markus Kuhla wrote:
> Hi.
> 
> I'm using antlr, v3beta7. The LL(*) algorithm determines automatically how much lookahead is necessary to choose a alternative?!
> 
> I have the problem, that the parser can find 1 or 2 tokens matching to an alternative of a parser rule, e.g.
> next input: "NEWLINE BLANK BLANK DASH DASH ..."
> the parser is currently in this rule:
> 
> text : line+;
> line : NEWLINE? blanks? all_chars_but_not_dash
>      | EOF;
> 
> The parser chooses the 1st alternative of line, and gives an error of course.
> In the grammar is another possibility, to continue with "NEWLINE blanks? DASH" - So the parser has to go out of the line-rule, if there is a dash!
> 
> 
> How can you realize a behavior like a real LL(*) parser, that there is enough lookahead to make a appropriate decision (leave rule line or continue with alternative1)

The problem isn't that LL(*) is unsufficient, but that your grammar is
ambiguous. The tokens "NEWLINE BLANK" can be either matched by one line
token or by two line tokens. I think that the following rules don't
exhibit this behaviour:

text : (NEWLINE? blanks? line)+ EOF;
line : all_chars_but_not_dash;

Best regards,
Johannes Luber

From bmf1972 at fastmail.fm  Thu May  3 06:22:06 2007
From: bmf1972 at fastmail.fm (Adrian Herscu)
Date: Thu, 03 May 2007 16:22:06 +0300
Subject: [antlr-interest] Token type as string
Message-ID: <f1cnnc$u0l$1@sea.gmane.org>

Hi all,

I would like to write an XSL template to transform my AST.
I tried to serialize the AST as XML and I am getting something like:

<antlr.CommonAST text="compilation-unit" type="4">
   <antlr.CommonAST text="package" type="15">
     ...
   </antlr.CommonAST>
</antlr.CommonAST>

In order to apply an XSL transformation using matching templates, I am 
transforming the above into:

<compilation-unit>
   <package>
     ...
   </package>
</compilation-unit>

then I can bind XSL templates such as match="/compilation-unit", 
match="package", etc.

The problem is with AST nodes that have text content which cannot 
function as XML tags - for example:

<CommonAST text="123" type="14" />

In this case <123 /> is an illegal XML tag.
type="14" means that there is some token assigned the identifier 14.

If there would be some easy way to change the token type identifiers to 
strings or to add a string field associated with the token type then it 
would solve my problem really quick.

Is there such a thing? A better approach?

Adrian.


From miguel.ping at gmail.com  Thu May  3 07:08:22 2007
From: miguel.ping at gmail.com (Miguel Ping)
Date: Thu, 3 May 2007 15:08:22 +0100
Subject: [antlr-interest] Token type as string
In-Reply-To: <f1cnnc$u0l$1@sea.gmane.org>
References: <f1cnnc$u0l$1@sea.gmane.org>
Message-ID: <ab0bf2c00705030708u6f08aab5k85f4d636084f0c01@mail.gmail.com>

Hi,

There is a file with the grammar name and .tokens extension
(MyGrammar.tokens) that contains correspondence between numbers and
strings. This file is created by antlr generator. Take a look, it
should suit your needs.

On 5/3/07, Adrian Herscu <bmf1972 at fastmail.fm> wrote:
> Hi all,
>
> I would like to write an XSL template to transform my AST.
> I tried to serialize the AST as XML and I am getting something like:
>
> <antlr.CommonAST text="compilation-unit" type="4">
>    <antlr.CommonAST text="package" type="15">
>      ...
>    </antlr.CommonAST>
> </antlr.CommonAST>
>
> In order to apply an XSL transformation using matching templates, I am
> transforming the above into:
>
> <compilation-unit>
>    <package>
>      ...
>    </package>
> </compilation-unit>
>
> then I can bind XSL templates such as match="/compilation-unit",
> match="package", etc.
>
> The problem is with AST nodes that have text content which cannot
> function as XML tags - for example:
>
> <CommonAST text="123" type="14" />
>
> In this case <123 /> is an illegal XML tag.
> type="14" means that there is some token assigned the identifier 14.
>
> If there would be some easy way to change the token type identifiers to
> strings or to add a string field associated with the token type then it
> would solve my problem really quick.
>
> Is there such a thing? A better approach?
>
> Adrian.
>
>

From bace.spam at gmx.net  Thu May  3 08:55:28 2007
From: bace.spam at gmx.net (Markus Kuhla)
Date: Thu, 03 May 2007 17:55:28 +0200
Subject: [antlr-interest] how to set lookahead in v3
In-Reply-To: <4639A721.5090100@gmx.de>
References: <20070503003429.323180@gmx.net> <4639A721.5090100@gmx.de>
Message-ID: <20070503155528.222650@gmx.net>

Hi Johannes, Hi all,

> > Hi.
> > 
> > I'm using antlr, v3beta7. The LL(*) algorithm determines automatically
> how much lookahead is necessary to choose a alternative?!
> > 
> > I have the problem, that the parser can find 1 or 2 tokens matching to
> an alternative of a parser rule, e.g.
> > next input: "NEWLINE BLANK BLANK DASH DASH ..."
> > the parser is currently in this rule:
> > 
> > text : line+;
> > line : NEWLINE? blanks? all_chars_but_not_dash
> >      | EOF;
> > 
> > The parser chooses the 1st alternative of line, and gives an error of
> course.
> > In the grammar is another possibility, to continue with "NEWLINE blanks?
> DASH" - So the parser has to go out of the line-rule, if there is a dash!
> > 
> > 
> > How can you realize a behavior like a real LL(*) parser, that there is
> enough lookahead to make a appropriate decision (leave rule line or continue
> with alternative1)
> 
> The problem isn't that LL(*) is unsufficient, but that your grammar is
> ambiguous. The tokens "NEWLINE BLANK" can be either matched by one line
> token or by two line tokens. I think that the following rules don't
> exhibit this behaviour:
> 
> text : (NEWLINE? blanks? line)+ EOF;
> line : all_chars_but_not_dash;
> 
> Best regards,
> Johannes Luber


What I expected from the LL(*) was that it can also decide whether to go out of the current rule - even if the next (two) token match an alternative of the current rule.

I give you more details, because your proposal does not work. The right alternative is much higher in the tree.

side           : (section)+  EOF;
section        : blanks?  (separator | textsection) NEWLINE;
separator      : DASH  DASH  blanks?  NEWLINE
textsection    : (textline_part)+;
textline_part  : '/*'  commentline+  ('*/')?;
commentline    : NEWLINE  blanks?  any_char_not_dash

input = 'text /* COMMENT\n  --\n NOTCOMMENT'

So the parser has reached the point to decide whether to continue with a second commentline (could fit if he considers NEWLINE blanks? only), but he should recognize the dashes. Then he should end the commentline ()+ loop, go back to section and decide that a separator is the next!

Do you know what I mean? I hope you can give me a good hint.

Thank you all for your great work here!
Markus
-- 
"Feel free" - 10 GB Mailbox, 100 FreeSMS/Monat ...
Jetzt GMX TopMail testen: http://www.gmx.net/de/go/topmail

From bmf1972 at fastmail.fm  Thu May  3 09:30:36 2007
From: bmf1972 at fastmail.fm (Adrian Herscu)
Date: Thu, 03 May 2007 19:30:36 +0300
Subject: [antlr-interest] Token type as string
In-Reply-To: <ab0bf2c00705030708u6f08aab5k85f4d636084f0c01@mail.gmail.com>
References: <f1cnnc$u0l$1@sea.gmane.org>
	<ab0bf2c00705030708u6f08aab5k85f4d636084f0c01@mail.gmail.com>
Message-ID: <f1d2op$9t4$1@sea.gmane.org>

Hi Miguel, thanks for your fast reply.

I looked into the generated files directory and only file types see 
there are expanded*.g, *.smap, *.txt and of course *.java.
Is there some switch to generate them?
Adrian.


Miguel Ping wrote:
> Hi,
> 
> There is a file with the grammar name and .tokens extension
> (MyGrammar.tokens) that contains correspondence between numbers and
> strings. This file is created by antlr generator. Take a look, it
> should suit your needs.
> 
> On 5/3/07, Adrian Herscu 
> <bmf1972 at fastmail.fm> wrote:
>> Hi all,
>>
>> I would like to write an XSL template to transform my AST.
>> I tried to serialize the AST as XML and I am getting something like:
>>
>> <antlr.CommonAST text="compilation-unit" type="4">
>>    <antlr.CommonAST text="package" type="15">
>>      ...
>>    </antlr.CommonAST>
>> </antlr.CommonAST>
>>
>> In order to apply an XSL transformation using matching templates, I am
>> transforming the above into:
>>
>> <compilation-unit>
>>    <package>
>>      ...
>>    </package>
>> </compilation-unit>
>>
>> then I can bind XSL templates such as match="/compilation-unit",
>> match="package", etc.
>>
>> The problem is with AST nodes that have text content which cannot
>> function as XML tags - for example:
>>
>> <CommonAST text="123" type="14" />
>>
>> In this case <123 /> is an illegal XML tag.
>> type="14" means that there is some token assigned the identifier 14.
>>
>> If there would be some easy way to change the token type identifiers to
>> strings or to add a string field associated with the token type then it
>> would solve my problem really quick.
>>
>> Is there such a thing? A better approach?
>>
>> Adrian.
>>
>>
> 


From parrt at cs.usfca.edu  Thu May  3 10:21:48 2007
From: parrt at cs.usfca.edu (Terence Parr)
Date: Thu, 3 May 2007 10:21:48 -0700
Subject: [antlr-interest] Possible bug?
In-Reply-To: <2E909902FD3A03419E3A905908AE3DD4031DACD1@UKNSM201.emea.corp.eds.com>
References: <2E909902FD3A03419E3A905908AE3DD4031DACD1@UKNSM201.emea.corp.eds.com>
Message-ID: <FC82D644-7F69-4B93-9A52-2744EF123796@cs.usfca.edu>


On May 3, 2007, at 12:48 AM, Hill, Robert wrote:

> Ter / anyone!,
>
> I've narrowed this down and
>
>  : ^(MAPDEF mappingName )  {
>      String test = $mappingName.text;
> }
> mappingName
>     : Identifier
>     ;
> ---------------------
> generates  this code ,
>
> String     test = input.getTokenStream().toString(
>               input.getTreeAdaptor().getTokenStartIndex 
> (mappingName15.start),
>               input.getTreeAdaptor().getTokenStopIndex 
> (mappingName15.start));
> ...and input.getTokenStream() is returning null.

You need to set the token stream in your main before parsing.  Added  
FAQ:

http://www.antlr.org/wiki/pages/viewpage.action?pageId=1880

Ter

From scottfr at gmail.com  Thu May  3 11:24:01 2007
From: scottfr at gmail.com (Scott Fortmann-Roe)
Date: Thu, 3 May 2007 14:24:01 -0400
Subject: [antlr-interest] Sample Interpreter and Compiler
Message-ID: <f18f141c0705031124y50e99c36w3dd8f3e3d782e848@mail.gmail.com>

Hi,

I developed a simple interpreter and compiler for a subset of C
supporting if-statements, loops, integers, functions, and arrays. The
interpreter is implemented using a tree grammar and the compiler
targets LLVM's [http://LLVM.org] intermediate representation

This was developed for a course and is very limited, but could be
instructive to people attempting to learn how to accomplish a wide
variety of tasks.

This was my "learn java", "learn antlr", "learn LLVM", and "learn
stringtemplate" project so the code is pretty hairy.

These were tested with ANTLR 3.0b7.

Hope this helps some folks.

-Scott

-- 
Scott Fortmann-Roe
500 College Ave
Swarthmore, Pa 19081
(510) 866-5296

From laurie at holoweb.net  Thu May  3 01:09:37 2007
From: laurie at holoweb.net (Laurie Harper)
Date: Thu, 03 May 2007 04:09:37 -0400
Subject: [antlr-interest] antlr python unit testing
Message-ID: <f1c5d6$snv$1@sea.gmane.org>

I'm using ANTLR for Python and have my lexer and parser partially 
working. I would like to start writing unit tests to identify exactly 
what is and isn't right in what I have so far. (Call it test-first 
debugging ;-)

This is a total newbie question but, how do I pass input into my lexer 
or parser from a Python script, rather than having it come from stdin? 
Ideally, I'd like to create a lexer instance and a parser instance and 
then write unit tests that exercise specific rules with varying input, 
al la:

     import unittest
     class LexerTests(unittest.TestCase):
         def setUp(self):
             self.L = lexer()
             self.P = parser(self.L)

         def test_lexer(self):
             input = "specimen input"

             # *****
             self.L.INJECT_INPUT_CHARACTERS(input)
             # *****

             self.failUnlessEqual(some_result, self.L.nextToken())

         def test_parser(self):
             input = "specimen input"

             # *****
             self.L.INJECT_INPUT_CHARACTERS(input)
             # *****

             self.failUnlessEqual(some_result, self.P.someRule()

How do I achieve the INJECT_INPUT_CHARACTERS(input) part?

L.


From rob.hill at blueyonder.co.uk  Thu May  3 12:09:23 2007
From: rob.hill at blueyonder.co.uk (Rob Hill)
Date: Thu, 3 May 2007 20:09:23 +0100
Subject: [antlr-interest] Possible bug?
In-Reply-To: <FC82D644-7F69-4B93-9A52-2744EF123796@cs.usfca.edu>
References: <2E909902FD3A03419E3A905908AE3DD4031DACD1@UKNSM201.emea.corp.eds.com>
	<FC82D644-7F69-4B93-9A52-2744EF123796@cs.usfca.edu>
Message-ID: <000601c78db6$8fae7d50$af0b77f0$@hill@blueyonder.co.uk>

Thanks Ter!
I read through the readme again, and i still didn't see anything mentioning
the change.
Plus it was quite an upgrade in one jump, from an early 3.0b5 mid last year
to mid this year.
I was expecting more problems than this, in fact, there were only two
changes to my DSL compiler.
Pretty impressive!

Thanks bud!

/2ob
 


> 
> You need to set the token stream in your main before parsing.  Added
> FAQ:
> 
> http://www.antlr.org/wiki/pages/viewpage.action?pageId=1880
> 
> Ter



From parrt at cs.usfca.edu  Thu May  3 13:30:09 2007
From: parrt at cs.usfca.edu (Terence Parr)
Date: Thu, 3 May 2007 13:30:09 -0700
Subject: [antlr-interest] Possible bug?
In-Reply-To: <000601c78db6$8fae7d50$af0b77f0$@hill@blueyonder.co.uk>
References: <2E909902FD3A03419E3A905908AE3DD4031DACD1@UKNSM201.emea.corp.eds.com>
	<FC82D644-7F69-4B93-9A52-2744EF123796@cs.usfca.edu>
	<000601c78db6$8fae7d50$af0b77f0$@hill@blueyonder.co.uk>
Message-ID: <95549BEE-16D7-4687-AE3C-549DC2E32617@cs.usfca.edu>


On May 3, 2007, at 12:09 PM, Rob Hill wrote:

> Thanks Ter!
> I read through the readme again, and i still didn't see anything  
> mentioning
> the change.

i put in book and must have forgotten to put in readme.

> Plus it was quite an upgrade in one jump, from an early 3.0b5 mid  
> last year
> to mid this year.
> I was expecting more problems than this, in fact, there were only two
> changes to my DSL compiler.
> Pretty impressive!

Hooray!

> Thanks bud!

My pleasure.

Ter


From parrt at cs.usfca.edu  Thu May  3 13:36:30 2007
From: parrt at cs.usfca.edu (Terence Parr)
Date: Thu, 3 May 2007 13:36:30 -0700
Subject: [antlr-interest] Sample Interpreter and Compiler
In-Reply-To: <f18f141c0705031124y50e99c36w3dd8f3e3d782e848@mail.gmail.com>
References: <f18f141c0705031124y50e99c36w3dd8f3e3d782e848@mail.gmail.com>
Message-ID: <97A6A849-77C5-46B2-91EB-2D73FF2B9F83@cs.usfca.edu>

I have added to file sharing area of antlr.org.  Great!
Thanks,
Ter
On May 3, 2007, at 11:24 AM, Scott Fortmann-Roe wrote:

> Hi,
>
> I developed a simple interpreter and compiler for a subset of C
> supporting if-statements, loops, integers, functions, and arrays. The
> interpreter is implemented using a tree grammar and the compiler
> targets LLVM's [http://LLVM.org] intermediate representation
>
> This was developed for a course and is very limited, but could be
> instructive to people attempting to learn how to accomplish a wide
> variety of tasks.
>
> This was my "learn java", "learn antlr", "learn LLVM", and "learn
> stringtemplate" project so the code is pretty hairy.
>
> These were tested with ANTLR 3.0b7.
>
> Hope this helps some folks.
>
> -Scott
>
> -- 
> Scott Fortmann-Roe
> 500 College Ave
> Swarthmore, Pa 19081
> (510) 866-5296


From parrt at cs.usfca.edu  Thu May  3 14:07:52 2007
From: parrt at cs.usfca.edu (Terence Parr)
Date: Thu, 3 May 2007 14:07:52 -0700
Subject: [antlr-interest] Java.g: variableModifier should be used in
	formalParameterDecls, localVariableDeclaration, forInit,
	and forVarControl
In-Reply-To: <394dc22a0704271448v1982e72cxa01d17cebc8ef3e6@mail.gmail.com>
References: <394dc22a0704271448v1982e72cxa01d17cebc8ef3e6@mail.gmail.com>
Message-ID: <39801E68-1AB1-4BC1-94B1-6EA4AE604D3E@cs.usfca.edu>

Updated Java.g in examples.
Thanks!
Ter
On Apr 27, 2007, at 2:48 PM, Hiroaki Nakamura wrote:

> Hi, here is a patch for Java.g.
> I think variableModifier should be used in formalParameterDecls,
> localVariableDeclaration, forInit, and forVarControl.
>
> Unfortunately, Chapter 18 in JLS contains many bugs.
> CHAPTER 18 Syntax
> http://java.sun.com/docs/books/jls/third_edition/html/syntax.html
>
> For correct definitions, please see other chapters in JLS.
>
> 8.4.1 Formal Parameters
> http://java.sun.com/docs/books/jls/third_edition/html/ 
> classes.html#8.4.1
>
> 14.4 Local Variable Declaration Statements
> http://java.sun.com/docs/books/jls/third_edition/html/ 
> statements.html#14.4
>
> 14.14.1 The basic for Statement
> http://java.sun.com/docs/books/jls/third_edition/html/ 
> statements.html#14.14.1
>
> 14.14.2 The enhanced for statement
> http://java.sun.com/docs/books/jls/third_edition/html/ 
> statements.html#14.14.2
>
> -- 
> )Hiroaki Nakamura) hnakamur at gmail.com
>
> --- examples-v3/Java/Java/Java.g.orig	2007-03-15 07:14:09.000000000  
> +0900
> +++ examples-v3/Java/Java/Java.g	2007-04-28 06:18:36.269430400 +0900
> @@ -360,7 +360,7 @@
> 	;
> 	
> formalParameterDecls
> -	:	'final'? annotations? type formalParameterDeclsRest?
> +	:	variableModifier* type formalParameterDeclsRest?
> 	;
> 	
> formalParameterDeclsRest
> @@ -482,7 +482,7 @@
> 	;
> 	
> localVariableDeclaration
> -	:	('final' | annotation)* type variableDeclarators ';'
> +	:	variableModifier* type variableDeclarators ';'
> 	;
> 	
> statement
> @@ -545,12 +545,12 @@
> 	;
>
> forInit
> -	:	'final'? (annotation)? type variableDeclarators
> +	:	variableModifier* type variableDeclarators
>     |   expressionList
> 	;
> 	
> forVarControl
> -	:	'final'? type Identifier ':' expression
> +	:	variableModifier* type Identifier ':' expression
> 	;
>
> forUpdate


From miguel.ping at gmail.com  Thu May  3 14:55:55 2007
From: miguel.ping at gmail.com (Miguel Ping)
Date: Thu, 3 May 2007 22:55:55 +0100
Subject: [antlr-interest] Token type as string
In-Reply-To: <f1d2op$9t4$1@sea.gmane.org>
References: <f1cnnc$u0l$1@sea.gmane.org>
	<ab0bf2c00705030708u6f08aab5k85f4d636084f0c01@mail.gmail.com>
	<f1d2op$9t4$1@sea.gmane.org>
Message-ID: <ab0bf2c00705031455v16e306e6l3f141c1c661e9b37@mail.gmail.com>

edit: Sorry for the 2x reply, I just need to lose the habit of not replying
to the mailing list

Err, what version of antlr are you using? I'm guessing v2, I never used it.
I use v3. In v3 there is no special switch or something.

Anyway, I guess there should be a place somewhere where the token <> int is
defined. Try peeking inside the .txt or the .smap. I don't know the v2
generation procedure, but it should be similar to v3. If you run outta luck,
just ask in the forum, I guess some v2 user should help you out.

On 5/3/07, Adrian Herscu <bmf1972 at fastmail.fm> wrote:
>
> Hi Miguel, thanks for your fast reply.
>
> I looked into the generated files directory and only file types see
> there are expanded*.g, *.smap, *.txt and of course *.java.
> Is there some switch to generate them?
> Adrian.
>
>
> Miguel Ping wrote:
> > Hi,
> >
> > There is a file with the grammar name and .tokens extension
> > (MyGrammar.tokens) that contains correspondence between numbers and
> > strings. This file is created by antlr generator. Take a look, it
> > should suit your needs.
> >
> > On 5/3/07, Adrian Herscu
> > <bmf1972 at fastmail.fm> wrote:
> >> Hi all,
> >>
> >> I would like to write an XSL template to transform my AST.
> >> I tried to serialize the AST as XML and I am getting something like:
> >>
> >> <antlr.CommonAST text="compilation-unit" type="4">
> >>    <antlr.CommonAST text="package" type="15">
> >>      ...
> >>    </antlr.CommonAST>
> >> </antlr.CommonAST>
> >>
> >> In order to apply an XSL transformation using matching templates, I am
> >> transforming the above into:
> >>
> >> <compilation-unit>
> >>    <package>
> >>      ...
> >>    </package>
> >> </compilation-unit>
> >>
> >> then I can bind XSL templates such as match="/compilation-unit",
> >> match="package", etc.
> >>
> >> The problem is with AST nodes that have text content which cannot
> >> function as XML tags - for example:
> >>
> >> <CommonAST text="123" type="14" />
> >>
> >> In this case <123 /> is an illegal XML tag.
> >> type="14" means that there is some token assigned the identifier 14.
> >>
> >> If there would be some easy way to change the token type identifiers to
> >> strings or to add a string field associated with the token type then it
> >> would solve my problem really quick.
> >>
> >> Is there such a thing? A better approach?
> >>
> >> Adrian.
> >>
> >>
> >
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070503/e6de59d8/attachment.html 

From parrt at cs.usfca.edu  Thu May  3 15:33:02 2007
From: parrt at cs.usfca.edu (Terence Parr)
Date: Thu, 3 May 2007 15:33:02 -0700
Subject: [antlr-interest] intermediate build(s) available
Message-ID: <C9A169EB-31B2-46C6-9F7B-CA85EB02610A@cs.usfca.edu>

Hi,

I'm doing for ST now what I've been doing for ANTLR: builds when I  
get a nice update but something not worthy of full beta or whatever.   
See

http://www.antlr.org/download/build/stringtemplate-05-03-2007.15.tar.gz

See the bugs.tml file in main dir.  These are changes since 3.0.

Ter
--------------
05-03-2007

o Updated group.g to allow default clause by itself in map (from  
Caleb Lyness)

o Caleb also revamped entire TestStringTemplate to run under windows.

o Added 16 bit char unit test also.

01-30-2007

o Made convertArrayToList create an ArrayWrappedInList so it doesn't
   copy arrays any more.

01-27-2007

o John Snyders found bug in format stuff.  Renderer was being called
   for string expr options.

o Another bug fix by John. Length problem.

??

o added format option

10-30-2006

o \_ was not allowed in group/interface.g but in group.g.  Now \_ is
allowed as first char.

09-25-2006

o ST.dup() was not copying renderers field.



From kibab at icehouse.net  Thu May  3 17:02:55 2007
From: kibab at icehouse.net (Kaleb Pederson)
Date: Thu, 3 May 2007 17:02:55 -0700
Subject: [antlr-interest] antlr python unit testing
In-Reply-To: <f1c5d6$snv$1@sea.gmane.org>
References: <f1c5d6$snv$1@sea.gmane.org>
Message-ID: <200705031702.56030.kibab@icehouse.net>

Hi Laurie,

In python, stdin is just a file descriptor that you can change.  So, if you 
wanted to manipulate it to read from a file, or some other object that had 
the same interface as a file descriptor, you could do so.

For example:

import sys
sys.stdin = open('myfile','r');

Then, if you needed to get the regular stdin back, sys.stdin = sys.__stdin__

So, take advantage of the StringIO class:

import StringIO
import sys

sys.stdin = StringIO.StringIO("My text to be parsed")

Now you can run your unit tests using whatever text you want.

Hope that helps.

--Kaleb

On Thursday 03 May 2007, Laurie Harper wrote:
> I'm using ANTLR for Python and have my lexer and parser partially
> working. I would like to start writing unit tests to identify exactly
> what is and isn't right in what I have so far. (Call it test-first
> debugging ;-)
>
> This is a total newbie question but, how do I pass input into my lexer
> or parser from a Python script, rather than having it come from stdin?
> Ideally, I'd like to create a lexer instance and a parser instance and
> then write unit tests that exercise specific rules with varying input,
> al la:
>
>      import unittest
>      class LexerTests(unittest.TestCase):
>          def setUp(self):
>              self.L = lexer()
>              self.P = parser(self.L)
>
>          def test_lexer(self):
>              input = "specimen input"
>
>              # *****
>              self.L.INJECT_INPUT_CHARACTERS(input)
>              # *****
>
>              self.failUnlessEqual(some_result, self.L.nextToken())
>
>          def test_parser(self):
>              input = "specimen input"
>
>              # *****
>              self.L.INJECT_INPUT_CHARACTERS(input)
>              # *****
>
>              self.failUnlessEqual(some_result, self.P.someRule()
>
> How do I achieve the INJECT_INPUT_CHARACTERS(input) part?
>
> L.



From laurie at holoweb.net  Thu May  3 20:20:24 2007
From: laurie at holoweb.net (Laurie Harper)
Date: Thu, 03 May 2007 23:20:24 -0400
Subject: [antlr-interest] antlr python unit testing
In-Reply-To: <200705031702.56030.kibab@icehouse.net>
References: <f1c5d6$snv$1@sea.gmane.org>
	<200705031702.56030.kibab@icehouse.net>
Message-ID: <f1e8qt$9t6$1@sea.gmane.org>

Thanks, that's a lot easier than the solution I came up with, mocking a 
Python object with a read(int) method and injecting it into the lexer so 
it would wrap it in a CharReader or whatever.

L.

Kaleb Pederson wrote:
> Hi Laurie,
> 
> In python, stdin is just a file descriptor that you can change.  So, if you 
> wanted to manipulate it to read from a file, or some other object that had 
> the same interface as a file descriptor, you could do so.
> 
> For example:
> 
> import sys
> sys.stdin = open('myfile','r');
> 
> Then, if you needed to get the regular stdin back, sys.stdin = sys.__stdin__
> 
> So, take advantage of the StringIO class:
> 
> import StringIO
> import sys
> 
> sys.stdin = StringIO.StringIO("My text to be parsed")
> 
> Now you can run your unit tests using whatever text you want.
> 
> Hope that helps.
> 
> --Kaleb
> 
> On Thursday 03 May 2007, Laurie Harper wrote:
>> I'm using ANTLR for Python and have my lexer and parser partially
>> working. I would like to start writing unit tests to identify exactly
>> what is and isn't right in what I have so far. (Call it test-first
>> debugging ;-)
>>
>> This is a total newbie question but, how do I pass input into my lexer
>> or parser from a Python script, rather than having it come from stdin?
>> Ideally, I'd like to create a lexer instance and a parser instance and
>> then write unit tests that exercise specific rules with varying input,
>> al la:
>>
>>      import unittest
>>      class LexerTests(unittest.TestCase):
>>          def setUp(self):
>>              self.L = lexer()
>>              self.P = parser(self.L)
>>
>>          def test_lexer(self):
>>              input = "specimen input"
>>
>>              # *****
>>              self.L.INJECT_INPUT_CHARACTERS(input)
>>              # *****
>>
>>              self.failUnlessEqual(some_result, self.L.nextToken())
>>
>>          def test_parser(self):
>>              input = "specimen input"
>>
>>              # *****
>>              self.L.INJECT_INPUT_CHARACTERS(input)
>>              # *****
>>
>>              self.failUnlessEqual(some_result, self.P.someRule()
>>
>> How do I achieve the INJECT_INPUT_CHARACTERS(input) part?
>>
>> L.
> 
> 
> 


From laurie at holoweb.net  Thu May  3 22:51:43 2007
From: laurie at holoweb.net (Laurie Harper)
Date: Fri, 04 May 2007 01:51:43 -0400
Subject: [antlr-interest] antlr python unit testing
In-Reply-To: <200705031702.56030.kibab@icehouse.net>
References: <f1c5d6$snv$1@sea.gmane.org>
	<200705031702.56030.kibab@icehouse.net>
Message-ID: <f1ehml$ub3$1@sea.gmane.org>

Hmm, I tried this but it only works if I re-assign stdin before creating 
the lexer, which makes sense of course, but isn't really what I want.

I'm building an expression parser as part of a page templating system. 
It will be used to parse an arbitrary number of expressions within the 
template, each representing a dynamic reference to external data. So, I 
need to be able to invoke the parser repeatedly on varying inputs.

That's the same behaviour I was looking for in order to unit test the 
parser/lexer, hence this thread. The solution I came up with looks 
something like:

class MockReader(object):
   def setInput(self, text):
     self.text = text
     self.index = 0

   def read(count):
     start = self.index
     end = self.index + count
     self.index = end

     return self.text[start, end]

class Test(unittest.TestCase):
   def setUp(self):
     self.L = Lexer()
     self.P = Parser(self.L)

   def test_first(self):
     src = MockReader()

     src.setInput('test expr 1')
     self.L.setInput(src)
     self.P.someRule()

     src.setInput('test expr 2')
     self.L.setInput(src)
     self.P.someRule()

     ...

This seemed to be working, until I tried calling different rules in the 
same test case. It looks like calling setInput() on the lexer leaves the 
lexer and/or parser in an inconsistent state :-(

So, what is the general solution to re-using a parser instance with 
different string inputs? Any suggestions would be greatly appreciated.

L.

Kaleb Pederson wrote:
> Hi Laurie,
> 
> In python, stdin is just a file descriptor that you can change.  So, if you 
> wanted to manipulate it to read from a file, or some other object that had 
> the same interface as a file descriptor, you could do so.
> 
> For example:
> 
> import sys
> sys.stdin = open('myfile','r');
> 
> Then, if you needed to get the regular stdin back, sys.stdin = sys.__stdin__
> 
> So, take advantage of the StringIO class:
> 
> import StringIO
> import sys
> 
> sys.stdin = StringIO.StringIO("My text to be parsed")
> 
> Now you can run your unit tests using whatever text you want.
> 
> Hope that helps.
> 
> --Kaleb
> 
> On Thursday 03 May 2007, Laurie Harper wrote:
>> I'm using ANTLR for Python and have my lexer and parser partially
>> working. I would like to start writing unit tests to identify exactly
>> what is and isn't right in what I have so far. (Call it test-first
>> debugging ;-)
>>
>> This is a total newbie question but, how do I pass input into my lexer
>> or parser from a Python script, rather than having it come from stdin?
>> Ideally, I'd like to create a lexer instance and a parser instance and
>> then write unit tests that exercise specific rules with varying input,
>> al la:
>>
>>      import unittest
>>      class LexerTests(unittest.TestCase):
>>          def setUp(self):
>>              self.L = lexer()
>>              self.P = parser(self.L)
>>
>>          def test_lexer(self):
>>              input = "specimen input"
>>
>>              # *****
>>              self.L.INJECT_INPUT_CHARACTERS(input)
>>              # *****
>>
>>              self.failUnlessEqual(some_result, self.L.nextToken())
>>
>>          def test_parser(self):
>>              input = "specimen input"
>>
>>              # *****
>>              self.L.INJECT_INPUT_CHARACTERS(input)
>>              # *****
>>
>>              self.failUnlessEqual(some_result, self.P.someRule()
>>
>> How do I achieve the INJECT_INPUT_CHARACTERS(input) part?
>>
>> L.
> 
> 
> 


From rubenfonseca at di.uminho.pt  Fri May  4 02:10:47 2007
From: rubenfonseca at di.uminho.pt (Ruben Fonseca)
Date: Fri, 04 May 2007 10:10:47 +0100
Subject: [antlr-interest] specialStateTransition too big for Java (AntLR3)
Message-ID: <1178269847.7219.3.camel@localhost.localdomain>

Hi!

I'm using AntLR3 to build a PHP parser. I need to get rid of HTML. In
order to do this I implemented a syntatic predicate on my Lexer, to see
if I'm getting HTML or PHP tokens (see an example
http://svn.perl.org/viewcvs/parrot/trunk/languages/plumhead/src/antlr3/Plumhead.g?view=markup )

The problem is that when I generate the Java code with AntLR3, I can't
compile the code, because of the following error:

The code of method specialStateTransition(int, IntStream) is exceeding
the 65535 bytes limit	WebAppViewer/antlr3/php	phpLexer.java	line 3894

I'm guessing my Lexer is too complex or has too many tokens? Does anyone
experienced the same problem before? Thanks for the advice.

Ruben.



From rubenfonseca at di.uminho.pt  Fri May  4 02:12:06 2007
From: rubenfonseca at di.uminho.pt (Ruben Fonseca)
Date: Fri, 04 May 2007 10:12:06 +0100
Subject: [antlr-interest] Mixing PHP and HTML --> error
In-Reply-To: <ab0bf2c00705020545y1e39824fjd8d9a9e35715941c@mail.gmail.com>
References: <1178100902.4094.1.camel@localhost.localdomain>
	<ab0bf2c00705020545y1e39824fjd8d9a9e35715941c@mail.gmail.com>
Message-ID: <1178269926.7219.6.camel@localhost.localdomain>

On Wed, 2007-05-02 at 13:45 +0100, Miguel Ping wrote:
> Ol? ;)
> 
> Could you expose the details of the errors you are getting? I believe
> the grammar option filter=true ignores anything that doesn't fall in
> the grammar limits.

Unfortunatly filter=true made my parser unusable. It always fires the
"EarlyExitException" at the beginning of the parsing. Maybe it's because
I'm using backtrack=true and memoise=true.

It would be a great option :(

Ruben


From rubenfonseca at di.uminho.pt  Fri May  4 02:14:06 2007
From: rubenfonseca at di.uminho.pt (Ruben Fonseca)
Date: Fri, 04 May 2007 10:14:06 +0100
Subject: [antlr-interest] Mixing PHP and HTML --> error
In-Reply-To: <4638BDCD.1010208@gmx.de>
References: <1178100902.4094.1.camel@localhost.localdomain>
	<4638BDCD.1010208@gmx.de>
Message-ID: <1178270046.7219.9.camel@localhost.localdomain>

On Wed, 2007-05-02 at 18:35 +0200, Bernhard Schmalhofer wrote:
> Ruben Fonseca schrieb:
> > Hi to all!
> >
> > I'm writting a PHP grammar. As you know, PHP can be used in the middle
> > of HTML code. I'm having an hard time to ignore the HTML part. The
> > parser always give me errors when I mix PHP and HTML.
> >   
> In Plumhead, http://rakudo.org/parrot/index.cgi?plumhead, I'm using a 
> syntactic predicate
> in order to keep track whether I'm in HTML of PHP.
> See 
> http://svn.perl.org/viewcvs/parrot/trunk/languages/plumhead/src/antlr3/Plumhead.g?view=markup.
> I don't know whether this is the best approach.

Great to see Parrot is still alive!!

Your idea is *great*. But as soon as I implemented it in my code, the
Java generated code from AntLR3 gave me an error saying that
specialStateTransition exceeds the Java limit of 64Kb :( It seems to be
a Java limitation. I've wrote to the mailling list about this issue, and
I hope someone has a solution :)

Anyway, THANK YOU for your code!

Ruben


From jan_ek at op.pl  Fri May  4 02:18:01 2007
From: jan_ek at op.pl (Stefan)
Date: Fri, 04 May 2007 11:18:01 +0200
Subject: [antlr-interest] Using ANTLRv3
Message-ID: <463AFA49.5030708@op.pl>

Hello!

I've been trying to use ANTLRv3, but it seems that I'm missing something.

I want to write a simple rule to match strings:

grammar Test;

string	:	'"' (~'"')+ '"';

D:\ANTLR\pliki>java org.antlr.Tool Test2.g
no such locale file org/antlr/tool/templates/messages/languages/pl.stg 
retrying
with English locale
ANTLR Parser Generator  Version 3.0b7 (April 12, 2007)  1989-2007
error(139): Test2.g:3:16: set complement ~'"' is empty
warning(201): Test2.g:3:19: The following alternatives are unreachable: 1

What's wrong? I guess that I only mention the '"' character, so the 
complement is empty. How do I specify the character set?


I'm writing my grammar from a specification, so I'd like to make it look 
as it's stated there, but trying to write a rule for an indentifier 
gives lots of errors:

grammar Test3;

identifier
	:	nondigit (nondigit | digit)*;

nondigit:	('a'..'z') | ('A'..'Z') | '_';
digit	:	('0'..'9');


D:\ANTLR\pliki>java org.antlr.Tool Test3.g
no such locale file org/antlr/tool/templates/messages/languages/pl.stg 
retrying
with English locale
ANTLR Parser Generator  Version 3.0b7 (April 12, 2007)  1989-2007
warning(200): Test3.g:4:30: Decision can match input such as "EOF" using 
multipl
e alternatives: 1, 2, 3
As a result, alternative(s) 2,3 were disabled for that input
warning(200): Test3.g:4:30: Decision can match input such as "'_'" using 
multipl
e alternatives: 1, 2
As a result, alternative(s) 2 were disabled for that input
warning(201): Test3.g:4:30: The following alternatives are unreachable: 2,3

warning(200): Test3.g:6:11: Decision can match input such as "'_'" using 
multipl
e alternatives: 1, 2, 3
As a result, alternative(s) 2,3 were disabled for that input
warning(200): Test3.g:6:11: Decision can match input such as "EOF" using 
multipl
e alternatives: 1, 2
As a result, alternative(s) 2 were disabled for that input
warning(201): Test3.g:6:11: The following alternatives are unreachable: 2,3

If I "inline" it like this:

identifier
	: ('a'..'z' | 'A'..'Z' | '_') (('a'..'z' | 'A'..'Z' | '_') | '0'..'9')*;	

Everything is OK. Why?


Is there going to be a complete and free documentation for ANTLRv3?


Stefan Chrobot

From antlr at mirality.co.nz  Fri May  4 02:23:47 2007
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Fri, 04 May 2007 21:23:47 +1200
Subject: [antlr-interest] specialStateTransition too big for Java
 (AntLR3)
In-Reply-To: <1178269847.7219.3.camel@localhost.localdomain>
References: <1178269847.7219.3.camel@localhost.localdomain>
Message-ID: <20070504092340.5DFE5190822@www.antlr.org>

At 21:10 4/05/2007, Ruben Fonseca wrote:
 >I'm using AntLR3 to build a PHP parser. I need to get rid of 
HTML.
 >In order to do this I implemented a syntatic predicate on my 
Lexer,
 >to see if I'm getting HTML or PHP tokens (see an example
 >http://svn.perl.org/viewcvs/parrot/trunk/languages/plumhead/src/ant
 >lr3/Plumhead.g?view=markup )

If you want to parse both PHP and HTML, then you ought to be able 
to do something along the lines of the island grammar example, 
since the PHP/not-PHP markers are fairly distinctive.

Alternatively if you want to ignore the HTML entirely then you 
should be able to capture the entire lot within a single token 
(which is then either skipped or put in a hidden channel).

Either way you shouldn't need the predicate.  I think that's 
what's tripping you up at the moment.


From miguel.ping at gmail.com  Fri May  4 02:28:19 2007
From: miguel.ping at gmail.com (Miguel Ping)
Date: Fri, 4 May 2007 10:28:19 +0100
Subject: [antlr-interest] specialStateTransition too big for Java
	(AntLR3)
In-Reply-To: <1178269847.7219.3.camel@localhost.localdomain>
References: <1178269847.7219.3.camel@localhost.localdomain>
Message-ID: <ab0bf2c00705040228o1d467789g2ad8bea3f33dd971@mail.gmail.com>

Hi,

The problem is common and it has to do with the generated method tht
is is too big.
In fact, found this on the jvm spec:
http://java.sun.com/docs/books/jvms/second_edition/html/ClassFile.doc.html
(..)
The static constraints on the instructions in the code array are as follows:
    * The value of the code_length item must be less than 65536.
(...)

You can break the rule that's giving you that error in two rules. I
just though on posting the jvm spec here so people don't think it's a
antlr error, but instead a feature specified by the jvm spec.

Greetings,
Miguel Ping

On 5/4/07, Ruben Fonseca <rubenfonseca at di.uminho.pt> wrote:
> Hi!
>
> I'm using AntLR3 to build a PHP parser. I need to get rid of HTML. In
> order to do this I implemented a syntatic predicate on my Lexer, to see
> if I'm getting HTML or PHP tokens (see an example
> http://svn.perl.org/viewcvs/parrot/trunk/languages/plumhead/src/antlr3/Plumhead.g?view=markup
> )
>
> The problem is that when I generate the Java code with AntLR3, I can't
> compile the code, because of the following error:
>
> The code of method specialStateTransition(int, IntStream) is exceeding
> the 65535 bytes limit	WebAppViewer/antlr3/php	phpLexer.java	line 3894
>
> I'm guessing my Lexer is too complex or has too many tokens? Does anyone
> experienced the same problem before? Thanks for the advice.
>
> Ruben.
>
>
>

From antlr at mirality.co.nz  Fri May  4 02:42:45 2007
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Fri, 04 May 2007 21:42:45 +1200
Subject: [antlr-interest] Using ANTLRv3
In-Reply-To: <463AFA49.5030708@op.pl>
References: <463AFA49.5030708@op.pl>
Message-ID: <20070504094236.0E3D41908C2@www.antlr.org>

At 21:18 4/05/2007, Stefan wrote:
 >string	:	'"' (~'"')+ '"';
 >
 >D:\ANTLR\pliki>java org.antlr.Tool Test2.g
 >no such locale file
 >org/antlr/tool/templates/messages/languages/pl.stg
 >retrying with English locale
 >ANTLR Parser Generator  Version 3.0b7 (April 12, 
2007)  1989-2007
 >error(139): Test2.g:3:16: set complement ~'"' is empty
 >warning(201): Test2.g:3:19: The following alternatives are
 >unreachable: 1
 >
 >What's wrong? I guess that I only mention the '"' character, so
 >the complement is empty. How do I specify the character set?

That sounds similar to a bug from somewhere between b6 and b7 -- 
it erroneously treated sequences of characters as sets.  That was 
supposed to be fixed in b7, though, and yur later mention of 
problems recognising EOF tokens etc are a bit odd.

Could you make a minimal-reproducing test case and post the entire 
grammar here?  Maybe it's something odd elsewhere in the file...

Another option is to try upgrading to one of the daily builds, it 
might help.


From lists at mainiero.de  Fri May  4 03:53:50 2007
From: lists at mainiero.de (lists at mainiero.de)
Date: Fri, 04 May 2007 12:53:50 +0200
Subject: [antlr-interest] =?iso-8859-1?q?Problem_writing_a_Grammar?=
Message-ID: <E1HjvQ6-0003tK-4R@server12.webplus24.de>

Hi,

I'm trying to write a ANTLR grammar for Lua (www.lua.org). They have the
syntax on the documentation pages, an I stated just copying this int
ANTLRWorks and changing the syntax accordingly.
It looked like a walk-trough but i got struggled as ANTLRWorks reported
this in its console

Aborting because the following rules are mutually left-recursive:
    [functioncall, prefixexp, var]

Perhaps anyone can have a look at it to give me hints or solutions how
to get this grammar correct. I'm willing to donate this grammar, to
make it available on the ANTLR side.

Thanks

Nicolai Mainiero
-------------- next part --------------
A non-text attachment was scrubbed...
Name: Lua.g
Type: application/octet-stream
Size: 2649 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20070504/069bf557/attachment-0001.obj 

From jaluber at gmx.de  Fri May  4 04:17:27 2007
From: jaluber at gmx.de (Johannes Luber)
Date: Fri, 04 May 2007 13:17:27 +0200
Subject: [antlr-interest] how to set lookahead in v3
In-Reply-To: <20070503155528.222650@gmx.net>
References: <20070503003429.323180@gmx.net> <4639A721.5090100@gmx.de>
	<20070503155528.222650@gmx.net>
Message-ID: <463B1647.5040008@gmx.de>

Markus Kuhla wrote:
> Hi Johannes, Hi all,
> 
> What I expected from the LL(*) was that it can also decide whether to go out of the current rule - even if the next (two) token match an alternative of the current rule.
> 
> I give you more details, because your proposal does not work. The right alternative is much higher in the tree.
> 
> side           : (section)+  EOF;
> section        : blanks?  (separator | textsection) NEWLINE;
> separator      : DASH  DASH  blanks?  NEWLINE
> textsection    : (textline_part)+;
> textline_part  : '/*'  commentline+  ('*/')?;
> commentline    : NEWLINE  blanks?  any_char_not_dash
> 
> input = 'text /* COMMENT\n  --\n NOTCOMMENT'
> 
> So the parser has reached the point to decide whether to continue with a second commentline (could fit if he considers NEWLINE blanks? only), but he should recognize the dashes. Then he should end the commentline ()+ loop, go back to section and decide that a separator is the next!
> 
> Do you know what I mean? I hope you can give me a good hint.
> 
> Thank you all for your great work here!
> Markus

I've created the following grammar from your snippet:

side           : section+  EOF;
section        : BLANKS?  (separator | textsection) NEWLINE;
separator      : DASH  DASH  BLANKS?  NEWLINE;
textsection    : textline_part+;
textline_part  : '/*' commentline+ '*/'?;
commentline    : NEWLINE  BLANKS?  ~(DASH | NEWLINE | BLANKS);

BLANKS: (' ' | '\t')+ ;
NEWLINE: ('\r' '\n'?| '\n');
DASH: '-';

Note that I turned any_char_not_dash to include no NEWLINES and BLANKS
to remove an ambiguity. This shouldn't affect the recognition
capabilities. Nonetheless there is still one ambiguity remaining:
"NEWLINE BLANKS? /* */" can be matched by commentline or by two
following section tokens. The problem is that the comment of
textline_part has an optional '*/'. Removal of the ? clears things up,
but changes the recognized language. The reason of this behaviour may be
that you don't give us the entire grammar file. As I know that you can't
do that, my advise is to look at the C# grammar specification in ECMA
334 standard, how they implemented the multiline comments.

Best regards,
Johannes Luber


From jaluber at gmx.de  Fri May  4 04:33:39 2007
From: jaluber at gmx.de (Johannes Luber)
Date: Fri, 04 May 2007 13:33:39 +0200
Subject: [antlr-interest] Problem writing a Grammar
In-Reply-To: <E1HjvQ6-0003tK-4R@server12.webplus24.de>
References: <E1HjvQ6-0003tK-4R@server12.webplus24.de>
Message-ID: <463B1A13.6060500@gmx.de>

lists at mainiero.de wrote:
> Hi,
> 
> I'm trying to write a ANTLR grammar for Lua (www.lua.org). They have the
> syntax on the documentation pages, an I stated just copying this int
> ANTLRWorks and changing the syntax accordingly.
> It looked like a walk-trough but i got struggled as ANTLRWorks reported
> this in its console
> 
> Aborting because the following rules are mutually left-recursive:
>     [functioncall, prefixexp, var]
> 
> Perhaps anyone can have a look at it to give me hints or solutions how
> to get this grammar correct. I'm willing to donate this grammar, to
> make it available on the ANTLR side.
> 
> Thanks
> 
> Nicolai Mainiero

Left recursion means that the rule is in referenced in one of its
productions at the left edge. Look at the following example:

constructor_modifiers
   :   constructor_modifier
   |   constructor_modifiers   constructor_modifier
   ;

LL-Parsers like ANTLR end up in an infinite loop because of the way they
recognize grammars. The solution is to change the grammar. For the example:

constructor_modifiers
   :   constructor_modifier*
   ;

The problem in your grammar is a bit more complicated:

var has the left-edge production prefixexp. prefixexp has the left-edge
production var. Recursion loop 1.

functioncall has the left-edge production prefixexp. prefixexp has the
left-edge production functioncall. Recursion loop 2. (Interestingly,
both loops can be even combined to form a bigger one.)

Unfortunately I have no idea how the equivalent grammar change has to be
in your case, especially as I don't know Lua. Maybe Terence or someone
else more knowledgeable can help with that problem.

Best regards,
Johannes Luber

From antlr at mirality.co.nz  Fri May  4 05:23:23 2007
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Sat, 05 May 2007 00:23:23 +1200
Subject: [antlr-interest] Problem writing a Grammar
In-Reply-To: <E1HjvQ6-0003tK-4R@server12.webplus24.de>
References: <E1HjvQ6-0003tK-4R@server12.webplus24.de>
Message-ID: <20070504122311.AB0FD1908B5@www.antlr.org>

At 22:53 4/05/2007, lists at mainiero.de wrote:
 >Aborting because the following rules are mutually 
left-recursive:
 >    [functioncall, prefixexp, var]
 >
 >Perhaps anyone can have a look at it to give me hints or 
solutions
 >how to get this grammar correct. I'm willing to donate this
 >grammar, to make it available on the ANTLR side.

With a bit of rearranging and some assistance from ANTLRworks' 
automatic left-recursion-remover, I've come up with this (not 
totally sure it matches the original, but I think it does):

varOrExp: var | '(' exp ')';
nameAndArgs: (':' NAME)? args;
varSuffix: nameAndArgs* ('[' exp ']' | '.' NAME);

var: (NAME | '(' exp ')' varSuffix) varSuffix*;
prefixexp: varOrExp nameAndArgs*;
functioncall: varOrExp nameAndArgs+;

(You can probably come up with better names for the first three 
rules.) :)

Basically I did this by taking each of the last three rules in 
isolation, then inlining any references it made to one of the 
other problem rules, rearranging and extracting subrules out until 
I got a simple left-recursion, then using ANTLRworks' "Remove Left 
Recursion" function, and finally tidying up the result a bit.


From antlr at mirality.co.nz  Fri May  4 05:29:32 2007
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Sat, 05 May 2007 00:29:32 +1200
Subject: [antlr-interest] Using ANTLRv3
In-Reply-To: <463B157F.1040201@op.pl>
References: <463AFA49.5030708@op.pl>
	<20070504100317Z5851457-2566+64271@ps18.test.onet.pl>
	<463B157F.1040201@op.pl>
Message-ID: <20070504122923.88A9F19090A@www.antlr.org>

At 23:14 4/05/2007, Stefan wrote:
 >Nope. The complete file is just this:
 >
 >grammar Test2;
 >
 >string	:	'"' (~'"')+ '"';

Ah, that's because you've written a parser rule when you should 
have been using a lexer rule.

Capitalise at least the first letter of "string" (all-caps is the 
convention but is not required) and it will be a lexer rule 
instead.  Then it should work.


From jan_ek at op.pl  Fri May  4 05:30:59 2007
From: jan_ek at op.pl (Stefan)
Date: Fri, 04 May 2007 14:30:59 +0200
Subject: [antlr-interest] Using ANTLRv3
In-Reply-To: <20070504100317Z5851457-2566+64271@ps18.test.onet.pl>
References: <463AFA49.5030708@op.pl>
	<20070504100317Z5851457-2566+64271@ps18.test.onet.pl>
Message-ID: <463B2783.7030507@op.pl>

Sorry, wrong mail address. This time posting to the mailing list.

Gavin Lambert napisa?(a):
 > At 21:18 4/05/2007, Stefan wrote:
 >  >string    :    '"' (~'"')+ '"';
 >  >
 >  >D:\ANTLR\pliki>java org.antlr.Tool Test2.g
 >  >no such locale file
 >  >org/antlr/tool/templates/messages/languages/pl.stg
 >  >retrying with English locale
 >  >ANTLR Parser Generator  Version 3.0b7 (April 12, 2007)  1989-2007
 >  >error(139): Test2.g:3:16: set complement ~'"' is empty
 >  >warning(201): Test2.g:3:19: The following alternatives are
 >  >unreachable: 1
 >  >
 >  >What's wrong? I guess that I only mention the '"' character, so
 >  >the complement is empty. How do I specify the character set?
 >
 > That sounds similar to a bug from somewhere between b6 and b7 -- it
 > erroneously treated sequences of characters as sets.  That was supposed
 > to be fixed in b7, though, and yur later mention of problems recognising
 > EOF tokens etc are a bit odd.
 >
 > Could you make a minimal-reproducing test case and post the entire
 > grammar here?  Maybe it's something odd elsewhere in the file...

Nope. The complete file is just this:

grammar Test2;

string	:	'"' (~'"')+ '"';


Stefan Chrobot



From jan_ek at op.pl  Fri May  4 05:35:48 2007
From: jan_ek at op.pl (Stefan)
Date: Fri, 04 May 2007 14:35:48 +0200
Subject: [antlr-interest] Using ANTLRv3
In-Reply-To: <20070504122924Z6642188-1315+2@ps21.test.onet.pl>
References: <463AFA49.5030708@op.pl>
	<20070504100317Z5851457-2566+64271@ps18.test.onet.pl>
	<463B157F.1040201@op.pl>
	<20070504122924Z6642188-1315+2@ps21.test.onet.pl>
Message-ID: <463B28A4.50101@op.pl>

Gavin Lambert napisa?(a):
> At 23:14 4/05/2007, Stefan wrote:
>  >Nope. The complete file is just this:
>  >
>  >grammar Test2;
>  >
>  >string    :    '"' (~'"')+ '"';
> 
> Ah, that's because you've written a parser rule when you should have 
> been using a lexer rule.
> 
> Capitalise at least the first letter of "string" (all-caps is the 
> convention but is not required) and it will be a lexer rule instead.  
> Then it should work.

Oh, I see. Could you please tell me when I should write lexer rules 
instead of parser rules? What's the difference? Where can I read about 
it more?


Stefan Chrobot

From jaluber at gmx.de  Fri May  4 05:41:35 2007
From: jaluber at gmx.de (Johannes Luber)
Date: Fri, 04 May 2007 14:41:35 +0200
Subject: [antlr-interest] Problem writing a Grammar
In-Reply-To: <463B1A13.6060500@gmx.de>
References: <E1HjvQ6-0003tK-4R@server12.webplus24.de> <463B1A13.6060500@gmx.de>
Message-ID: <463B29FF.1050004@gmx.de>

Johannes Luber wrote:
 > Left recursion means that the rule is in referenced in one of its
> productions at the left edge. Look at the following example:
> 
> constructor_modifiers
>    :   constructor_modifier
>    |   constructor_modifiers   constructor_modifier
>    ;
> 
> LL-Parsers like ANTLR end up in an infinite loop because of the way they
> recognize grammars. The solution is to change the grammar. For the example:
> 
> constructor_modifiers
>    :   constructor_modifier*
>    ;

Made a small mistake here. The rewritten rule should be

constructor_modifiers
   :   constructor_modifier+
   ;

Thanks, Micheal, for pointing it out. I actually copied the original
rule and rewrote it on the fly instead looking for my transcription in
the grammar file. The ironic thing is that I make that kind of mistake
every time I post something like that while I managed to avoid it in my
normal grammar file. Lesson learned: Reread grammar snippets. :)

Best regards,
Johannes Luber



From jaluber at gmx.de  Fri May  4 05:43:25 2007
From: jaluber at gmx.de (Johannes Luber)
Date: Fri, 04 May 2007 14:43:25 +0200
Subject: [antlr-interest] Using ANTLRv3
In-Reply-To: <463B28A4.50101@op.pl>
References: <463AFA49.5030708@op.pl>	<20070504100317Z5851457-2566+64271@ps18.test.onet.pl>	<463B157F.1040201@op.pl>	<20070504122924Z6642188-1315+2@ps21.test.onet.pl>
	<463B28A4.50101@op.pl>
Message-ID: <463B2A6D.4050100@gmx.de>

Stefan wrote:
> Oh, I see. Could you please tell me when I should write lexer rules
> instead of parser rules? What's the difference? Where can I read about
> it more?

Look here:
<http://www.antlr.org/wiki/display/ANTLR3/Quick+Starter+on+Parser+Grammars+-+No+Past+Experience+Required>

Best regards,
Johannes Luber

From parrt at cs.usfca.edu  Fri May  4 08:25:17 2007
From: parrt at cs.usfca.edu (Terence Parr)
Date: Fri, 4 May 2007 08:25:17 -0700
Subject: [antlr-interest] Using ANTLRv3
In-Reply-To: <20070504094236.0E3D41908C2@www.antlr.org>
References: <463AFA49.5030708@op.pl> <20070504094236.0E3D41908C2@www.antlr.org>
Message-ID: <4291B68E-829A-48D2-BC6D-CF1614667C10@cs.usfca.edu>

make that STRING.  string puts in parser.  ~ONLYTOKEN is empty set.   
~char is all other chars.
Ter
On May 4, 2007, at 2:42 AM, Gavin Lambert wrote:

> At 21:18 4/05/2007, Stefan wrote:
> >string	:	'"' (~'"')+ '"';
> >
> >D:\ANTLR\pliki>java org.antlr.Tool Test2.g
> >no such locale file
> >org/antlr/tool/templates/messages/languages/pl.stg
> >retrying with English locale
> >ANTLR Parser Generator  Version 3.0b7 (April 12, 2007)  1989-2007
> >error(139): Test2.g:3:16: set complement ~'"' is empty
> >warning(201): Test2.g:3:19: The following alternatives are
> >unreachable: 1
> >
> >What's wrong? I guess that I only mention the '"' character, so
> >the complement is empty. How do I specify the character set?
>
> That sounds similar to a bug from somewhere between b6 and b7 -- it  
> erroneously treated sequences of characters as sets.  That was  
> supposed to be fixed in b7, though, and yur later mention of  
> problems recognising EOF tokens etc are a bit odd.
>
> Could you make a minimal-reproducing test case and post the entire  
> grammar here?  Maybe it's something odd elsewhere in the file...
>
> Another option is to try upgrading to one of the daily builds, it  
> might help.
>


From jan_ek at op.pl  Fri May  4 08:26:57 2007
From: jan_ek at op.pl (Stefan)
Date: Fri, 04 May 2007 17:26:57 +0200
Subject: [antlr-interest] Resolving ambiguity
Message-ID: <463B50C1.3070001@op.pl>

Hello!

What is the approach to resolve semantical ambiguity in grammar in 
ANTLRv3? Consider the grammar:

grammar My;

fragment
DIGIT   :   '0'..'9';

fragment
NONDIGIT:   'a'..'z' | 'A'..'Z' | '_';

IDENTIFIER
     :   NONDIGIT (DIGIT | NONDIGIT)*;

function_definition
     :   'function' IDENTIFIER;

function_call
     :   IDENTIFIER;

variable_definition
     :   'var' IDENTIFIER;

expression
     :   IDENTIFIER;

statement
     :
     (
         function_definition
         | function_call
         | variable_definition
         | expression
     ) ';';

program :   statement+;

For input "something;" I want to select the appropriate rule depending 
on the meaning of "something" - if it's a function or variable. How do I 
do that?


Stefan Chrobot

From open.zone at virgin.net  Fri May  4 11:30:22 2007
From: open.zone at virgin.net (Micheal J)
Date: Fri, 4 May 2007 19:30:22 +0100
Subject: [antlr-interest] Resolving ambiguity
In-Reply-To: <463B50C1.3070001@op.pl>
Message-ID: <000601c78e7a$48f0bf80$c704a8c0@hercules>

Use a symbol table. Works as long as declarations preceeds use in your
language.

Micheal

-----------------------
The best way to contact me is via the list/forum. My time is very limited.

> -----Original Message-----
> From: antlr-interest-bounces at antlr.org 
> [mailto:antlr-interest-bounces at antlr.org] On Behalf Of Stefan
> Sent: 04 May 2007 16:27
> To: antlr-interest at antlr.org
> Subject: [antlr-interest] Resolving ambiguity
> 
> 
> Hello!
> 
> What is the approach to resolve semantical ambiguity in grammar in 
> ANTLRv3? Consider the grammar:
> 
> grammar My;
> 
> fragment
> DIGIT   :   '0'..'9';
> 
> fragment
> NONDIGIT:   'a'..'z' | 'A'..'Z' | '_';
> 
> IDENTIFIER
>      :   NONDIGIT (DIGIT | NONDIGIT)*;
> 
> function_definition
>      :   'function' IDENTIFIER;
> 
> function_call
>      :   IDENTIFIER;
> 
> variable_definition
>      :   'var' IDENTIFIER;
> 
> expression
>      :   IDENTIFIER;
> 
> statement
>      :
>      (
>          function_definition
>          | function_call
>          | variable_definition
>          | expression
>      ) ';';
> 
> program :   statement+;
> 
> For input "something;" I want to select the appropriate rule 
> depending 
> on the meaning of "something" - if it's a function or 
> variable. How do I 
> do that?
> 
> 
> Stefan Chrobot
> 


From jan_ek at op.pl  Fri May  4 12:07:50 2007
From: jan_ek at op.pl (Stefan)
Date: Fri, 04 May 2007 21:07:50 +0200
Subject: [antlr-interest] Resolving ambiguity
In-Reply-To: <000601c78e7a$48f0bf80$c704a8c0@hercules>
References: <000601c78e7a$48f0bf80$c704a8c0@hercules>
Message-ID: <463B8486.2040908@op.pl>

Micheal J napisa?(a):
> Use a symbol table. Works as long as declarations preceeds use in your
> language.

OK, but how do I do it without changing the grammar? How do I make ANTLR 
choose the 4th alternative instead of the 2nd, when IDENTIFIER is a 
variable?


Stefan

From miguel.ping at gmail.com  Fri May  4 15:34:34 2007
From: miguel.ping at gmail.com (Miguel Ping)
Date: Fri, 4 May 2007 23:34:34 +0100
Subject: [antlr-interest] Resolving ambiguity
In-Reply-To: <463B8486.2040908@op.pl>
References: <000601c78e7a$48f0bf80$c704a8c0@hercules> <463B8486.2040908@op.pl>
Message-ID: <ab0bf2c00705041534o5cbc93eei1d8a115815868298@mail.gmail.com>

I guess you will have to use semantic predicates to decide what to choose
from the table, and actions as bookeeping  to know whether a
function has been defined or not.

On 5/4/07, Stefan <jan_ek at op.pl> wrote:
>
> Micheal J napisa?(a):
> > Use a symbol table. Works as long as declarations preceeds use in your
> > language.
>
> OK, but how do I do it without changing the grammar? How do I make ANTLR
> choose the 4th alternative instead of the 2nd, when IDENTIFIER is a
> variable?
>
>
> Stefan
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070504/52ba1f30/attachment.html 

From antlr at mirality.co.nz  Fri May  4 15:36:01 2007
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Sat, 05 May 2007 10:36:01 +1200
Subject: [antlr-interest] Resolving ambiguity
In-Reply-To: <463B8486.2040908@op.pl>
References: <000601c78e7a$48f0bf80$c704a8c0@hercules> <463B8486.2040908@op.pl>
Message-ID: <20070504223551.B2E2019093B@www.antlr.org>

At 07:07 5/05/2007, Stefan wrote:
 >OK, but how do I do it without changing the grammar? How do I 
make
 >ANTLR choose the 4th alternative instead of the 2nd, when 
IDENTIFIER
 >is a variable?

You need to use a semantic predicate.  Something along these 
lines:

statement
     :
     (   function_definition
     |   {isFunction(LT(1))}? function_call
     |   variable_definition
     |   expression
     ) ';';

(The exact syntax used to call LT may be different depending on 
your target language.  But it'll be something along those 
lines.  There's probably more info on the wiki.)


From jan_ek at op.pl  Fri May  4 16:28:27 2007
From: jan_ek at op.pl (Stefan)
Date: Sat, 05 May 2007 01:28:27 +0200
Subject: [antlr-interest] Resolving ambiguity
In-Reply-To: <20070504223556Z3148080-19113+78589@ps7.test.onet.pl>
References: <000601c78e7a$48f0bf80$c704a8c0@hercules> <463B8486.2040908@op.pl>
	<20070504223556Z3148080-19113+78589@ps7.test.onet.pl>
Message-ID: <463BC19B.9080701@op.pl>

Gavin Lambert napisa?(a):
> At 07:07 5/05/2007, Stefan wrote:
>  >OK, but how do I do it without changing the grammar? How do I make
>  >ANTLR choose the 4th alternative instead of the 2nd, when IDENTIFIER
>  >is a variable?
> 
> You need to use a semantic predicate.  Something along these lines:
> 
> statement
>     :
>     (   function_definition
>     |   {isFunction(LT(1))}? function_call
>     |   variable_definition
>     |   expression
>     ) ';';
> 
> (The exact syntax used to call LT may be different depending on your 
> target language.  But it'll be something along those lines.  There's 
> probably more info on the wiki.)

Thanks! I'm so excited about ANTLR and I finally got it to work! It took 
me quite some time to figure out why my main() java file doesn't see 
lexer and parser classes even though they were in the same directory - 
I've set the CLASSPATH, but forgot to add "." to it.

I believe it should be just like you've written, but I had to write 
input.LT(1), because it wouldn't compile otherwise. Is it a bug? Which 
one is right?

I'm posting the code, maybe somebody will find it useful:

grammar My;

@header
{
     import java.util.HashSet;
}

@members
{
     HashSet<String> functions = new HashSet<String>();
     HashSet<String> variables = new HashSet<String>();
     boolean isFunctionName(Token token)
     {
         return functions.contains(token.getText());
     }
}

WHITESPACE
     :   (' ' | '\t' | '\n' | '\r' | '\f' | '\v')
     {
         $channel = HIDDEN;
     };

fragment
DIGIT   :   '0'..'9';

fragment
NONDIGIT:   'a'..'z' | 'A'..'Z' | '_';

IDENTIFIER
     :   NONDIGIT (DIGIT | NONDIGIT)*;

function_definition
     :   'function' IDENTIFIER
     {
         functions.add($IDENTIFIER.text);
     };

function_call
     :   IDENTIFIER
     {
         System.out.println("Function call: " + $IDENTIFIER.text);
     };

variable_definition
     :   'var' IDENTIFIER
     {
         variables.add($IDENTIFIER.text);
     };

expression
     :   IDENTIFIER
     {
         System.out.println("Expression: " + $IDENTIFIER.text);
     };

statement
     :
     (
         function_definition
         | { isFunctionName(input.LT(1)) }? function_call
         | variable_definition
         | expression
     ) ';';

program :   statement+;
parse   :   program;



Stefan Chrobot

From antlr at mirality.co.nz  Fri May  4 16:52:07 2007
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Sat, 05 May 2007 11:52:07 +1200
Subject: [antlr-interest] Resolving ambiguity
In-Reply-To: <463BC19B.9080701@op.pl>
References: <000601c78e7a$48f0bf80$c704a8c0@hercules> <463B8486.2040908@op.pl>
	<20070504223556Z3148080-19113+78589@ps7.test.onet.pl>
	<463BC19B.9080701@op.pl>
Message-ID: <20070504235155.886431908FE@www.antlr.org>

At 11:28 5/05/2007, Stefan wrote:
 >I believe it should be just like you've written, but I had to
 >write input.LT(1), because it wouldn't compile otherwise. Is it
 >a bug?  Which one is right?

No, input.LT(1) is correct for ANTLR v3 and Java.  I don't use 
them too often myself so I frequently get mixed up between some of 
the other variations (in both ANTLR2 and the C target for ANTLR3 
you just use LT(1), so that's the one I tend to remember).


From parrt at cs.usfca.edu  Fri May  4 17:19:20 2007
From: parrt at cs.usfca.edu (Terence Parr)
Date: Fri, 4 May 2007 17:19:20 -0700
Subject: [antlr-interest] updated v2 to v3 migration document
Message-ID: <B3568F84-F31E-4A30-8DC0-55B52AE90D9D@cs.usfca.edu>

Hi, did some major updates to this:

http://www.antlr.org/wiki/display/ANTLR3/Migrating+from+ANTLR+2+to 
+ANTLR+3

Please register with wiki and make updates and new pages if you can  
help.

Ter

From parrt at cs.usfca.edu  Fri May  4 19:27:36 2007
From: parrt at cs.usfca.edu (Terence Parr)
Date: Fri, 4 May 2007 19:27:36 -0700
Subject: [antlr-interest] updated getting started page for v3
Message-ID: <D6E5AA5B-A3E7-44F5-99C0-A57FE185870D@cs.usfca.edu>

http://www.antlr.org/wiki/display/ANTLR3/FAQ+-+Getting+Started

From jimi at temporal-wave.com  Fri May  4 23:19:34 2007
From: jimi at temporal-wave.com (Jim Idle)
Date: Fri, 4 May 2007 23:19:34 -0700
Subject: [antlr-interest] C target up to date
Message-ID: <B36CCC332A32904F8FA3DE134A235336252471@wavemachine.temporal-wave.com>

As of about 5 minutes ago, the C target was up to date with all the
latest template and runtime changes. It could do with a bit of testing
though as I have not tried much on tree rewrites yet. If you are able
to, please test and let me know of any issues. A new distribution is
checked in to perforce (and should therefore be available shortly via
Fisheye.)

 

Additional examples are added to the C examples (you should look at
these carefully as I have changed macro names (for the last time - they
are fixed in stone now). Macros that appeared to mirror functions such
as INPUT() have now been rationalized and are now INPUT when a function
call is not involved and XYZ() when a function call is required. It
seems like Fisheye is still not tracking the examples folder, so perhaps
we can fix this, or supply a link to a tar on the download page.

 

You will need to use the next snapshot that Ter produces, as the C.stg
and AST.stg code generation templates have changed quite a lot. All
recent bug fixes to the Java target are now applied to the C target.
Again, if you are able to assist by testing this out a bit, I will be
happy to supply fixes. This "release" has been extensively profiled and
memory leak tested, but I have yet to do coverage testing.

 

The only functionality missing from the C target is the
TokenRewriteStream, which won't take too long and is way too cool a
feature to leave out of the upcoming Release 1. There is also no support
for template output and I shan't be implementing the debug compatible
code gen template until we are sure that the current codegen templates
are stable as it is too much to track changes in three templates, and I
have to implement some socket stuff to support it, which is not a big
deal, but time is better spent on having the generated code reliable and
performing.

 

Also, the C runtime library provides a number of useful data structures,
including vectors, hash tables, list, stack and a decent implementation
of an integer keyed Patricia Trie, all of which are reasonably doxygen
documented, but I will provide wiki docs in the end. The C parser
example uses one of these, which you may be able to copy as an example.

 

I hope you find this useful - please report any errors here.

 

Up Next:

 

*         TokenRewriteStream

*         How-to docs/cookbook for Wiki

*         All remaining examples

*         Expansive example project for MultiValue/Pick BASIC, including
Tree parser and code formatter.

 

Share and Enjoy!

 

Jim

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070504/bbd59cd6/attachment-0001.html 

From bmf1972 at fastmail.fm  Sat May  5 07:18:53 2007
From: bmf1972 at fastmail.fm (Adrian Herscu)
Date: Sat, 05 May 2007 17:18:53 +0300
Subject: [antlr-interest] antlr way of controlling generated XML
 (previously: Token type as string)
In-Reply-To: <ab0bf2c00705031455v16e306e6l3f141c1c661e9b37@mail.gmail.com>
References: <f1cnnc$u0l$1@sea.gmane.org>	<ab0bf2c00705030708u6f08aab5k85f4d636084f0c01@mail.gmail.com>	<f1d2op$9t4$1@sea.gmane.org>
	<ab0bf2c00705031455v16e306e6l3f141c1c661e9b37@mail.gmail.com>
Message-ID: <f1i3ps$keb$1@sea.gmane.org>

Hi all,

After few days of digging through the antlr framework and krugle for 
code fragments I still cannot guess the proper way of doing a relatively 
simple thing: serialize the AST in XML format, where for each of the 
serialized AST nodes, an attribute containing the token *name* is 
generated as an XML attribute besides the other attributes.
Further, I will need to get the textual position of each AST node too.

I am trying now to wrap the CommonAST instance supplied by the parser 
and replace the serializeXml methods with mine -- however, it does quite 
work and I am investigating it right now...

Another approach I thought about is to supply my own ASTFactory and my 
own AST type. MyAST would be able to serialize as XML all the 
information in need and currently is buried somewhere in the Parser 
instance or in the CommonAST instace...

Please help,
Adrian.



Miguel Ping wrote:
> edit: Sorry for the 2x reply, I just need to lose the habit of not 
> replying to the mailing list
> 
> Err, what version of antlr are you using? I'm guessing v2, I never used 
> it. I use v3. In v3 there is no special switch or something.
> 
> Anyway, I guess there should be a place somewhere where the token <> int 
> is defined. Try peeking inside the .txt or the .smap. I don't know the 
> v2 generation procedure, but it should be similar to v3. If you run 
> outta luck, just ask in the forum, I guess some v2 user should help you out.
> 
> On 5/3/07, *Adrian Herscu* 
> <bmf1972 at fastmail.fm 
> <mailto:bmf1972 at fastmail.fm>> wrote:
> 
>     Hi Miguel, thanks for your fast reply.
> 
>     I looked into the generated files directory and only file types see
>     there are expanded*.g, *.smap, *.txt and of course *.java.
>     Is there some switch to generate them?
>     Adrian.
> 
> 
>     Miguel Ping wrote:
>      > Hi,
>      >
>      > There is a file with the grammar name and .tokens extension
>      > (MyGrammar.tokens) that contains correspondence between numbers and
>      > strings. This file is created by antlr generator. Take a look, it
>      > should suit your needs.
>      >
>      > On 5/3/07, Adrian Herscu
>      > <bmf1972 at fastmail.fm
>     <mailto:bmf1972 at fastmail.fm>> wrote:
>      >> Hi all,
>      >>
>      >> I would like to write an XSL template to transform my AST.
>      >> I tried to serialize the AST as XML and I am getting something like:
>      >>
>      >> <antlr.CommonAST text="compilation-unit" type="4">
>      >>    <antlr.CommonAST text="package" type="15">
>      >>      ...
>      >>    </antlr.CommonAST>
>      >> </antlr.CommonAST>
>      >>
>      >> In order to apply an XSL transformation using matching
>     templates, I am
>      >> transforming the above into:
>      >>
>      >> <compilation-unit>
>      >>    <package>
>      >>      ...
>      >>    </package>
>      >> </compilation-unit>
>      >>
>      >> then I can bind XSL templates such as match="/compilation-unit",
>      >> match="package", etc.
>      >>
>      >> The problem is with AST nodes that have text content which cannot
>      >> function as XML tags - for example:
>      >>
>      >> <CommonAST text="123" type="14" />
>      >>
>      >> In this case <123 /> is an illegal XML tag.
>      >> type="14" means that there is some token assigned the identifier 14.
>      >>
>      >> If there would be some easy way to change the token type
>     identifiers to
>      >> strings or to add a string field associated with the token type
>     then it
>      >> would solve my problem really quick.
>      >>
>      >> Is there such a thing? A better approach?
>      >>
>      >> Adrian.
>      >>
>      >>
>      >
> 
> 


From miguel.ping at gmail.com  Sat May  5 08:30:40 2007
From: miguel.ping at gmail.com (Miguel Ping)
Date: Sat, 5 May 2007 16:30:40 +0100
Subject: [antlr-interest] antlr way of controlling generated XML
	(previously: Token type as string)
In-Reply-To: <f1i3ps$keb$1@sea.gmane.org>
References: <f1cnnc$u0l$1@sea.gmane.org>
	<ab0bf2c00705030708u6f08aab5k85f4d636084f0c01@mail.gmail.com>
	<f1d2op$9t4$1@sea.gmane.org>
	<ab0bf2c00705031455v16e306e6l3f141c1c661e9b37@mail.gmail.com>
	<f1i3ps$keb$1@sea.gmane.org>
Message-ID: <ab0bf2c00705050830t7defb405wfe45838fa75251f4@mail.gmail.com>

My suggestion (the easy way, and its for v3):

- Implement your tree adaptor
- Implement your node type, extending from CommonTree
- Add xml serialization support in your custom node, whether by creating a
method that return a xml string, or whatever
- Finally, navigate through your tree and retrieve each xml part from each
node. the concatenation is your xml doc


On 5/5/07, Adrian Herscu <bmf1972 at fastmail.fm> wrote:
>
> Hi all,
>
> After few days of digging through the antlr framework and krugle for
> code fragments I still cannot guess the proper way of doing a relatively
> simple thing: serialize the AST in XML format, where for each of the
> serialized AST nodes, an attribute containing the token *name* is
> generated as an XML attribute besides the other attributes.
> Further, I will need to get the textual position of each AST node too.
>
> I am trying now to wrap the CommonAST instance supplied by the parser
> and replace the serializeXml methods with mine -- however, it does quite
> work and I am investigating it right now...
>
> Another approach I thought about is to supply my own ASTFactory and my
> own AST type. MyAST would be able to serialize as XML all the
> information in need and currently is buried somewhere in the Parser
> instance or in the CommonAST instace...
>
> Please help,
> Adrian.
>
>
>
> Miguel Ping wrote:
> > edit: Sorry for the 2x reply, I just need to lose the habit of not
> > replying to the mailing list
> >
> > Err, what version of antlr are you using? I'm guessing v2, I never used
> > it. I use v3. In v3 there is no special switch or something.
> >
> > Anyway, I guess there should be a place somewhere where the token <> int
> > is defined. Try peeking inside the .txt or the .smap. I don't know the
> > v2 generation procedure, but it should be similar to v3. If you run
> > outta luck, just ask in the forum, I guess some v2 user should help you
> out.
> >
> > On 5/3/07, *Adrian Herscu*
> > <bmf1972 at fastmail.fm
> > <mailto:bmf1972 at fastmail.fm>> wrote:
> >
> >     Hi Miguel, thanks for your fast reply.
> >
> >     I looked into the generated files directory and only file types see
> >     there are expanded*.g, *.smap, *.txt and of course *.java.
> >     Is there some switch to generate them?
> >     Adrian.
> >
> >
> >     Miguel Ping wrote:
> >      > Hi,
> >      >
> >      > There is a file with the grammar name and .tokens extension
> >      > (MyGrammar.tokens) that contains correspondence between numbers
> and
> >      > strings. This file is created by antlr generator. Take a look, it
> >      > should suit your needs.
> >      >
> >      > On 5/3/07, Adrian Herscu
> >      > <bmf1972 at fastmail.fm
> >     <mailto:bmf1972 at fastmail.fm>> wrote:
> >      >> Hi all,
> >      >>
> >      >> I would like to write an XSL template to transform my AST.
> >      >> I tried to serialize the AST as XML and I am getting something
> like:
> >      >>
> >      >> <antlr.CommonAST text="compilation-unit" type="4">
> >      >>    <antlr.CommonAST text="package" type="15">
> >      >>      ...
> >      >>    </antlr.CommonAST>
> >      >> </antlr.CommonAST>
> >      >>
> >      >> In order to apply an XSL transformation using matching
> >     templates, I am
> >      >> transforming the above into:
> >      >>
> >      >> <compilation-unit>
> >      >>    <package>
> >      >>      ...
> >      >>    </package>
> >      >> </compilation-unit>
> >      >>
> >      >> then I can bind XSL templates such as match="/compilation-unit",
> >      >> match="package", etc.
> >      >>
> >      >> The problem is with AST nodes that have text content which
> cannot
> >      >> function as XML tags - for example:
> >      >>
> >      >> <CommonAST text="123" type="14" />
> >      >>
> >      >> In this case <123 /> is an illegal XML tag.
> >      >> type="14" means that there is some token assigned the identifier
> 14.
> >      >>
> >      >> If there would be some easy way to change the token type
> >     identifiers to
> >      >> strings or to add a string field associated with the token type
> >     then it
> >      >> would solve my problem really quick.
> >      >>
> >      >> Is there such a thing? A better approach?
> >      >>
> >      >> Adrian.
> >      >>
> >      >>
> >      >
> >
> >
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070505/0599a15c/attachment.html 

From parrt at cs.usfca.edu  Sat May  5 12:24:58 2007
From: parrt at cs.usfca.edu (Terence Parr)
Date: Sat, 5 May 2007 12:24:58 -0700
Subject: [antlr-interest] antlr v2 vs v3 sites
Message-ID: <56543D26-D438-4F97-9196-33776529B4D5@cs.usfca.edu>

Hi,

In prep for launch of v3, I have created antlr2.org so existing site  
can stay exactly the same.  I'll have link from antlr.org (which will  
be v3 site) to antlr2.org.  I have changed the logo to ANTLRv2:

http://www.antlr.org/

New v3 version or antlr.org will have a nice blue color (a brighter  
bluer version of ST color).

Ter

From ugo.landini at gmail.com  Sat May  5 13:21:15 2007
From: ugo.landini at gmail.com (ugol)
Date: Sat, 5 May 2007 22:21:15 +0200
Subject: [antlr-interest] How to interpret an IF with antlr 3.0
Message-ID: <b70c55390705051321i5d89e29fpec9e5e95af2b8def@mail.gmail.com>

Hi all,
I am back with the same question. 3 months ago I rolled back to
javacc, which I know marginally better, but now I really want to move
to antlr. Unfortunately, I can't figure out how to delay the
processing of a node... (if this is the correct solution)

If you don't want to read all this old thread, the question is:

- How to translate this antlr v2 in antlr v3?

^(IF condition x:.)        // x is NOT evaluated, merely captured
   { if ($condition.value) { stat(x); }

tia,
uL

-----Original Message-----

Hi all,

for antlr3 the stat(x) will not work, because you can not pass the
sub-tree to a rule any more (which the rule then processes).
In antlr3 the current tree parsing position is stored in the
TreeNodeStream class instance, which is an instance variable of your
TreeParser class. So you can not easily tell a sub-rule what part of
the tree to process. You need instead to forward/rewind the
TreeNodeStream to the correct position, before calling the rule of
interest.

For writing interpreters with antlr3 I see only two solutions:
-Create a new instance of the TreeParser to handle the sub-tree
(incurs a lot of overhead)
-Sub-class (Common)TreeNodeStream to easily jump to certain positions
in the TreeNodeStream (similar to the mark() and rewind() methods in
CommonTreeNodeStream, but these are stack based and will thus not work
in your case).

Or does one of the other experts knows a better solution to this problem?

Regards,

J?rg


-- 
Dr. J?rg Werner
Qimonda AG
Memory Products Division
QAG PD PT TPE C
Am Campeon 1-12
D-85579 Neubiberg
email: joerg.werner at qimonda.com
Tel:  +49 89 234-26602
Fax: +49 89 234-9553128

-----Original Message-----
From: antlr-interest-bounces at antlr.org
[mailto:antlr-interest-bounces at antlr.org] On Behalf Of Bryan Ewbank
Sent: Monday, December 04, 2006 5:48 PM
To: ANTLR Interest
Subject: Re: [antlr-interest] How to implement an IF

I don't know antlr3 syntax, but the general idea is to process only
the elements you want, and skip ths others.  In other words, delay
processing the "assign" until you know that the condition is true.

^(IF condition x:.)        // x is NOT evaluated, merely captured
   { if ($condition.value) { stat(x); }

Hope this helps!

> I want to add to the expression evaluation a conditional expression:
>
> I think I have correctly built the lexer and parser stuff, but I can't
> figure out how to check the condition and then act. My tree stuff
> parse the condition, no matter if the condition is true or false. I am
> probably missing something here.

From hurui_email at yahoo.com  Sat May  5 13:43:00 2007
From: hurui_email at yahoo.com (Richard Hu)
Date: Sat, 5 May 2007 13:43:00 -0700 (PDT)
Subject: [antlr-interest] how to get back to the beginning of while loop?
Message-ID: <187404.67072.qm@web52002.mail.re2.yahoo.com>

Hi, All:

I am using Antlr to build an interpreter, how do I tell the tree walker to go back to the beginning of a while loop to check the condition again after executing the body of the loop? 

thanks a lot for the help

--Richard
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070505/c4efc681/attachment.html 

From rschulz at sonic.net  Sat May  5 14:04:26 2007
From: rschulz at sonic.net (Randall R Schulz)
Date: Sat, 5 May 2007 14:04:26 -0700
Subject: [antlr-interest] how to get back to the beginning of while loop?
In-Reply-To: <187404.67072.qm@web52002.mail.re2.yahoo.com>
References: <187404.67072.qm@web52002.mail.re2.yahoo.com>
Message-ID: <200705051404.26440.rschulz@sonic.net>

Richard,

On Saturday 05 May 2007 13:43, Richard Hu wrote:
> Hi, All:
>
> I am using Antlr to build an interpreter, how do I tell the tree
> walker to go back to the beginning of a while loop to check the
> condition again after executing the body of the loop?

One pretty easy way is to use a method call in the interpreter to 
execute (interpret) the body of the loop (or conditional, etc.). That 
way the calling method retains all the context that exists outside the 
body / block. Presumably that's where the loop conditionals are 
interpreted, thus localizing the loop control at that level, leaving 
the evaluation of the loop body to the method invoked to interpret that 
body.


> thanks a lot for the help
>
> --Richard


Randall Schulz

From ugo.landini at gmail.com  Sat May  5 14:26:16 2007
From: ugo.landini at gmail.com (ugol)
Date: Sat, 5 May 2007 23:26:16 +0200
Subject: [antlr-interest] How to interpret an IF with antlr 3.0
In-Reply-To: <b70c55390705051321i5d89e29fpec9e5e95af2b8def@mail.gmail.com>
References: <b70c55390705051321i5d89e29fpec9e5e95af2b8def@mail.gmail.com>
Message-ID: <b70c55390705051426n64ab6717y29c31d6a9c10ccf5@mail.gmail.com>

> Hi all,
> I am back with the same question. 3 months ago I rolled back to
> javacc, which I know marginally better, but now I really want to move
> to antlr. Unfortunately, I can't figure out how to delay the
> processing of a node... (if this is the correct solution)
>
> If you don't want to read all this old thread, the question is:
>
> - How to translate this antlr v2 in antlr v3?
>
> ^(IF condition x:.)        // x is NOT evaluated, merely captured
>    { if ($condition.value) { stat(x); }

Ok, I have found a way, thanks to the c-- interpreter (here if someone
needs it http://www.antlr.org/share/1178224532340/cminus.zip).
It works pretty well, but isn't the old v2 syntax more concise?

^(IF condition .)
        {
          if ($condition.value) {
          CommonTree ifStmt = (CommonTree)$stat.start.getChild(1);
          stream.push(stream.getNodeIndex(ifStmt));
          stat();
          stream.pop();
          }
         }

From cooperb at gmail.com  Sat May  5 14:30:22 2007
From: cooperb at gmail.com (Brian Cooper)
Date: Sat, 5 May 2007 16:30:22 -0500
Subject: [antlr-interest] AntlrWorks
Message-ID: <6aba6d90705051430p305fab92m1aa13a0ffc2c1173@mail.gmail.com>

I hope that this is the correct place to ask this question. I am having a
problem setting up AntlrWorks on Windows. Everything seems to be working
except that when I launch the debugger it returns this message:

"Cannot launch the debugger.

Time-out waiting to connect to the remote parser. "

I am just not sure what to do next. Has anyone seen this error before? I
appreciate your help and apologize if this is the incorrect forum to post
AntlrWorks questions.

Thank you,

-Brian Cooper-
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070505/f9cdb210/attachment.html 

From parrt at cs.usfca.edu  Sat May  5 14:54:07 2007
From: parrt at cs.usfca.edu (Terence Parr)
Date: Sat, 5 May 2007 14:54:07 -0700
Subject: [antlr-interest] How to interpret an IF with antlr 3.0
In-Reply-To: <b70c55390705051321i5d89e29fpec9e5e95af2b8def@mail.gmail.com>
References: <b70c55390705051321i5d89e29fpec9e5e95af2b8def@mail.gmail.com>
Message-ID: <87969F48-6E17-4531-BD97-7B1D5DB92293@cs.usfca.edu>


On May 5, 2007, at 1:21 PM, ugol wrote:

> Hi all,
> I am back with the same question. 3 months ago I rolled back to
> javacc, which I know marginally better, but now I really want to move
> to antlr. Unfortunately, I can't figure out how to delay the
> processing of a node... (if this is the correct solution)
>
> If you don't want to read all this old thread, the question is:
>
> - How to translate this antlr v2 in antlr v3?
>
> ^(IF condition x:.)        // x is NOT evaluated, merely captured
>   { if ($condition.value) { stat(x); }
>
> tia,

Hi Ugol,

first, thanks for updating the wiki on @finally/finally.

ok, to your question.  ANTLR v3 does allow '.' now to mean scan past  
entire tree w/o parsing.  From there you have to create another node  
stream and invoke the rule.  I'll come up with a short hand soon.   
This is from the tree-based interpreter example:

call returns [int value]
@init {
     Map argScope = new HashMap();
     scopes.push(argScope); // push new arg scope
}
     :   ^(CALL ID expr)
         {
         CommonTreeNodeStream stream = (CommonTreeNodeStream)input;
         CommonTree funcRoot = (CommonTree)functions.get($ID.text);
         int addr = stream.getNodeIndex(funcRoot);
         if ( addr>=0 ) {
            CommonTree argNode = (CommonTree)funcRoot.getChild(1);
            String argName = argNode.getText();
            int exprIndex = addr + 4; // skip over FUNC DOWN ID ID to  
expr
            argScope.put(argName, new Integer($expr.value));
            ((CommonTreeNodeStream)input).push(exprIndex);
            $value = expr(); // invoke expr and set CALL's value
            ((CommonTreeNodeStream)input).pop();
         }
         else {
            System.err.println("no such function: "+$ID.text);
         }
         }
     ;
finally {
     scopes.pop();          // remove arg scope
}

Ter


From antlr-list at arizona-software.ch  Sat May  5 15:56:05 2007
From: antlr-list at arizona-software.ch (Jean Bovet)
Date: Sat, 5 May 2007 15:56:05 -0700
Subject: [antlr-interest] AntlrWorks
In-Reply-To: <6aba6d90705051430p305fab92m1aa13a0ffc2c1173@mail.gmail.com>
References: <6aba6d90705051430p305fab92m1aa13a0ffc2c1173@mail.gmail.com>
Message-ID: <28FEDBCC-F3AC-490B-A97C-EFCE3E3534B3@arizona-software.ch>

Hi,

You will get this message if ANTLRWorks cannot connect to the parser:  
it might happen if the parser crashes/exits unexpectedly. Can you  
check the console or terminal to see if there is any exception? What  
you can also try is to launch the generated parser from the command  
line and connect ANTLRWorks to it using the Debug Remote command.

Regards,

Jean

On May 5, 2007, at 2:30 PM, Brian Cooper wrote:

> I hope that this is the correct place to ask this question. I am  
> having a problem setting up AntlrWorks on Windows. Everything seems  
> to be working except that when I launch the debugger it returns  
> this message:
>
> "Cannot launch the debugger.
>
> Time-out waiting to connect to the remote parser. "
>
> I am just not sure what to do next. Has anyone seen this error  
> before? I appreciate your help and apologize if this is the  
> incorrect forum to post AntlrWorks questions.
>
> Thank you,
>
> -Brian Cooper-


From miguel.ping at gmail.com  Sat May  5 16:41:46 2007
From: miguel.ping at gmail.com (Miguel Ping)
Date: Sun, 6 May 2007 00:41:46 +0100
Subject: [antlr-interest] Transforming input
Message-ID: <ab0bf2c00705051641p11ce2039se6a0d4ed1da10840@mail.gmail.com>

Hi all,

It seems that I can parse a reasonable subset of sql selects now, and my
problem now is finding a nice way of generating output. I thought of string
template, but I think it would be a bit overkill since the difference
between the input and output is small, and I do not want to target multiple
languages, which I believe one of ST strong point. Because I need to retain
original formatting including whitespaces, what is the best way of storing
and outputing the result? I tried setting the token text within a visitor
class, and after that using a custom token stream to output token texts +
whitespaces. It didn't work, I guess antlr internally copies/clones the
tokens when creating the the AST tree. Can anyone give me a good hint on
this?

Thanks,
Miguel Ping
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070506/fc5b4dd0/attachment.html 

From bruce.trask at mdesystems.com  Sat May  5 22:35:07 2007
From: bruce.trask at mdesystems.com (Bruce Trask)
Date: Sat, 5 May 2007 22:35:07 -0700 (PDT)
Subject: [antlr-interest] Proper way to run the parser and lexer as a shell
	with Antlr 3
Message-ID: <790963.71106.qm@web905.biz.mail.mud.yahoo.com>

Hello,
   
  What is the proper way to run the lexer and parser in a loop so it can behave as "shell", taking input from System.in?  I have tried some different attempts but am having some trouble with the input streams getting closed ?
   
  Here was another attempt but it did not work either:
  import org.antlr.runtime.*;
import java.io.*;
import org.antlr.tool.*;
  
public class TestBruce {
    public static void main(String[] args) throws Exception {
 
 
 ANTLRInputStream input = new ANTLRInputStream(System.in); 
 while(true)
     {
  
  System.out.print(">>> ");
  
  // create a lexer that feeds off of input CharStream
  bruceLexer lexer = new bruceLexer(input);
 
  System.out.println("after");
  // create a buffer of tokens pulled from the lexer
  CommonTokenStream tokens = new CommonTokenStream(lexer);
 
  // create a parser that feeds off the tokens buffer
  bruceParser parser = new bruceParser(tokens);
  // begin parsing at rule r
  parser.hello();
  input.reset();
     }
    }
}
   
  Thanks in advance,
Bruce
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070505/1790937b/attachment-0001.html 

From ugo.landini at gmail.com  Sat May  5 23:53:53 2007
From: ugo.landini at gmail.com (ugol)
Date: Sun, 6 May 2007 08:53:53 +0200
Subject: [antlr-interest] antlr-interest Digest, Vol 30, Issue 14
In-Reply-To: <mailman.14.1178429709.5081.antlr-interest@antlr.org>
References: <mailman.14.1178429709.5081.antlr-interest@antlr.org>
Message-ID: <b70c55390705052353s1bebd5acmcd8d2d172cd89fc6@mail.gmail.com>

> Hi Ugol,
>
> first, thanks for updating the wiki on @finally/finally.

Thanks to you for your (beta) book! Documentation is probably the most
important thing now to spread the use of antlr

> ok, to your question.  ANTLR v3 does allow '.' now to mean scan past
> entire tree w/o parsing.  From there you have to create another node
> stream and invoke the rule.  I'll come up with a short hand soon.

yep, found (on cminusminus example). It works, but a shorthand is
probably needed

ciao and thanks again,
uL

From ugo.landini at gmail.com  Sat May  5 23:53:53 2007
From: ugo.landini at gmail.com (ugol)
Date: Sun, 6 May 2007 08:53:53 +0200
Subject: [antlr-interest] antlr-interest Digest, Vol 30, Issue 14
In-Reply-To: <mailman.14.1178429709.5081.antlr-interest@antlr.org>
References: <mailman.14.1178429709.5081.antlr-interest@antlr.org>
Message-ID: <b70c55390705052353s1bebd5acmcd8d2d172cd89fc6@mail.gmail.com>

> Hi Ugol,
>
> first, thanks for updating the wiki on @finally/finally.

Thanks to you for your (beta) book! Documentation is probably the most
important thing now to spread the use of antlr

> ok, to your question.  ANTLR v3 does allow '.' now to mean scan past
> entire tree w/o parsing.  From there you have to create another node
> stream and invoke the rule.  I'll come up with a short hand soon.

yep, found (on cminusminus example). It works, but a shorthand is
probably needed

ciao and thanks again,
uL

From ugo.landini at gmail.com  Sat May  5 23:53:53 2007
From: ugo.landini at gmail.com (ugol)
Date: Sun, 6 May 2007 08:53:53 +0200
Subject: [antlr-interest] antlr-interest Digest, Vol 30, Issue 14
In-Reply-To: <mailman.14.1178429709.5081.antlr-interest@antlr.org>
References: <mailman.14.1178429709.5081.antlr-interest@antlr.org>
Message-ID: <b70c55390705052353s1bebd5acmcd8d2d172cd89fc6@mail.gmail.com>

> Hi Ugol,
>
> first, thanks for updating the wiki on @finally/finally.

Thanks to you for your (beta) book! Documentation is probably the most
important thing now to spread the use of antlr

> ok, to your question.  ANTLR v3 does allow '.' now to mean scan past
> entire tree w/o parsing.  From there you have to create another node
> stream and invoke the rule.  I'll come up with a short hand soon.

yep, found (on cminusminus example). It works, but a shorthand is
probably needed

ciao and thanks again,
uL

From ugo.landini at gmail.com  Sat May  5 23:53:53 2007
From: ugo.landini at gmail.com (ugol)
Date: Sun, 6 May 2007 08:53:53 +0200
Subject: [antlr-interest] antlr-interest Digest, Vol 30, Issue 14
In-Reply-To: <mailman.14.1178429709.5081.antlr-interest@antlr.org>
References: <mailman.14.1178429709.5081.antlr-interest@antlr.org>
Message-ID: <b70c55390705052353s1bebd5acmcd8d2d172cd89fc6@mail.gmail.com>

> Hi Ugol,
>
> first, thanks for updating the wiki on @finally/finally.

Thanks to you for your (beta) book! Documentation is probably the most
important thing now to spread the use of antlr

> ok, to your question.  ANTLR v3 does allow '.' now to mean scan past
> entire tree w/o parsing.  From there you have to create another node
> stream and invoke the rule.  I'll come up with a short hand soon.

yep, found (on cminusminus example). It works, but a shorthand is
probably needed

ciao and thanks again,
uL

From parrt at cs.usfca.edu  Sun May  6 12:31:30 2007
From: parrt at cs.usfca.edu (Terence Parr)
Date: Sun, 6 May 2007 12:31:30 -0700
Subject: [antlr-interest] Transforming input
In-Reply-To: <ab0bf2c00705051641p11ce2039se6a0d4ed1da10840@mail.gmail.com>
References: <ab0bf2c00705051641p11ce2039se6a0d4ed1da10840@mail.gmail.com>
Message-ID: <43070038-F0DC-43CB-A01A-FC2BD0F08234@cs.usfca.edu>


On May 5, 2007, at 4:41 PM, Miguel Ping wrote:

> Hi all,
>
> It seems that I can parse a reasonable subset of sql selects now,  
> and my problem now is finding a nice way of generating output. I  
> thought of string template, but I think it would be a bit overkill  
> since the difference between the input and output is small, and I  
> do not want to target multiple languages, which I believe one of ST  
> strong point. Because I need to retain original formatting  
> including whitespaces, what is the best way of storing and  
> outputing the result?

option rewrite=true and optionally output=ST

> I tried setting the token text within a visitor class, and after  
> that using a custom token stream to output token texts +  
> whitespaces. It didn't work, I guess antlr internally copies/clones  
> the tokens when creating the the AST tree. Can anyone give me a  
> good hint on this?
>

It only keeps a poitner to it.  You need to use rewrite mode...nice  
description in book about doing these kind of translations ;)
Ter


From parrt at cs.usfca.edu  Sun May  6 12:32:17 2007
From: parrt at cs.usfca.edu (Terence Parr)
Date: Sun, 6 May 2007 12:32:17 -0700
Subject: [antlr-interest] Proper way to run the parser and lexer as a
	shell with Antlr 3
In-Reply-To: <790963.71106.qm@web905.biz.mail.mud.yahoo.com>
References: <790963.71106.qm@web905.biz.mail.mud.yahoo.com>
Message-ID: <FDCE8B76-88A2-4F40-9872-880E625B3935@cs.usfca.edu>


On May 5, 2007, at 10:35 PM, Bruce Trask wrote:

> Hello,
>
> What is the proper way to run the lexer and parser in a loop so it  
> can behave as "shell", taking input from System.in?  I have tried  
> some different attempts but am having some trouble with the input  
> streams getting closed ?

Hi. By default, ANTLR consumes all input to fill buffer.  Therefore,  
you need to parse line-by-line.  I.e.,

while not EOF
	fetch a line
	create token stream from line
	parse

Ter

From bruce.trask at mdesystems.com  Sun May  6 19:43:47 2007
From: bruce.trask at mdesystems.com (Bruce Trask)
Date: Sun, 6 May 2007 19:43:47 -0700 (PDT)
Subject: [antlr-interest] Proper way to run the parser and lexer as a
	shell with Antlr 3
In-Reply-To: <FDCE8B76-88A2-4F40-9872-880E625B3935@cs.usfca.edu>
Message-ID: <762020.80452.qm@web913.biz.mail.mud.yahoo.com>

Hi Terence,
   
  That worked. Thanks.
   
  Regards,
Bruce

Terence Parr <parrt at cs.usfca.edu> wrote:
  
On May 5, 2007, at 10:35 PM, Bruce Trask wrote:

> Hello,
>
> What is the proper way to run the lexer and parser in a loop so it 
> can behave as "shell", taking input from System.in? I have tried 
> some different attempts but am having some trouble with the input 
> streams getting closed ?

Hi. By default, ANTLR consumes all input to fill buffer. Therefore, 
you need to parse line-by-line. I.e.,

while not EOF
fetch a line
create token stream from line
parse

Ter

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070506/cb8e5ae4/attachment.html 

From bace.spam at gmx.net  Sun May  6 20:54:55 2007
From: bace.spam at gmx.net (Markus Kuhla)
Date: Mon, 07 May 2007 05:54:55 +0200
Subject: [antlr-interest] how to set lookahead in v3
In-Reply-To: <463B1647.5040008@gmx.de>
References: <20070503003429.323180@gmx.net> <4639A721.5090100@gmx.de>
	<20070503155528.222650@gmx.net> <463B1647.5040008@gmx.de>
Message-ID: <20070507035455.268110@gmx.net>

Hi Johannes,

special thanks to you!!!
It seemed to work, until I tried to involve the leading blanks. Nevertheless, your idea to put the NONTERMINALS in this rule helped me a lot!

Happy evening!

> Markus Kuhla wrote:
> > Hi Johannes, Hi all,
> > 
> > What I expected from the LL(*) was that it can also decide whether to go
> out of the current rule - even if the next (two) token match an
> alternative of the current rule.
> > 
> > I give you more details, because your proposal does not work. The right
> alternative is much higher in the tree.
> > 
> > side           : (section)+  EOF;
> > section        : blanks?  (separator | textsection) NEWLINE;
> > separator      : DASH  DASH  blanks?  NEWLINE
> > textsection    : (textline_part)+;
> > textline_part  : '/*'  commentline+  ('*/')?;
> > commentline    : NEWLINE  blanks?  any_char_not_dash
> > 
> > input = 'text /* COMMENT\n  --\n NOTCOMMENT'
> > 
> > So the parser has reached the point to decide whether to continue with a
> second commentline (could fit if he considers NEWLINE blanks? only), but
> he should recognize the dashes. Then he should end the commentline ()+ loop,
> go back to section and decide that a separator is the next!
> > 
> > Do you know what I mean? I hope you can give me a good hint.
> > 
> > Thank you all for your great work here!
> > Markus
> 
> I've created the following grammar from your snippet:
> 
> side           : section+  EOF;
> section        : BLANKS?  (separator | textsection) NEWLINE;
> separator      : DASH  DASH  BLANKS?  NEWLINE;
> textsection    : textline_part+;
> textline_part  : '/*' commentline+ '*/'?;
> commentline    : NEWLINE  BLANKS?  ~(DASH | NEWLINE | BLANKS);
> 
> BLANKS: (' ' | '\t')+ ;
> NEWLINE: ('\r' '\n'?| '\n');
> DASH: '-';
> 
> Note that I turned any_char_not_dash to include no NEWLINES and BLANKS
> to remove an ambiguity. This shouldn't affect the recognition
> capabilities. Nonetheless there is still one ambiguity remaining:
> "NEWLINE BLANKS? /* */" can be matched by commentline or by two
> following section tokens. The problem is that the comment of
> textline_part has an optional '*/'. Removal of the ? clears things up,
> but changes the recognized language. The reason of this behaviour may be
> that you don't give us the entire grammar file. As I know that you can't
> do that, my advise is to look at the C# grammar specification in ECMA
> 334 standard, how they implemented the multiline comments.
> 
> Best regards,
> Johannes Luber

-- 
"Feel free" - 10 GB Mailbox, 100 FreeSMS/Monat ...
Jetzt GMX TopMail testen: http://www.gmx.net/de/go/topmail

From a.shneyderman at gmail.com  Sun May  6 22:39:48 2007
From: a.shneyderman at gmail.com (Alex Shneyderman)
Date: Mon, 7 May 2007 07:39:48 +0200
Subject: [antlr-interest] Looking for JSP antlr grammar.
Message-ID: <693a69ba0705062239o661500a1la442c4f9d503910b@mail.gmail.com>

Anyone has a good pointer to share?
I can not seem to locate it.

-- 
Thanks,
Alex.

From femtowin1 at gmail.com  Sun May  6 22:55:09 2007
From: femtowin1 at gmail.com (femtowin1)
Date: Sun, 06 May 2007 22:55:09 -0700 (PDT)
Subject: [antlr-interest] Some Problem with antlrv3
Message-ID: <ebcd82370c804abfadc5f04fa905185b@4a73d35e398b480b92a427afa5772d98>

Hello, when I'm developing antlrv3 grammar for XRuby, I found several issues inconvient:
first, geneate Parser construtor:
  public Rubyv3Parser(TokenStream input) {
        super(input);
    }
actually I need some customization here,
I need to relate Parser with Lexer
(because ruby's heredoc lexing require parser's symtol table information). I can't replace the old construtor, so instead
I write the following and invoke this: (a different construtor)
public Rubyv3Parser(TokenStream input, Rubyv3Parser parent) {
        super(input);
        ((Rubyv3Lexer) input.getTokenSource()).setParser(this); //this line is what I required to customize in order to relate parser and lexer
        this.parent = parent;
    }
but puting the original construtor in system is confusing and people may invoke it by wrong and then end up with not correctly intialized parser/lexer.

second, I can't specify the superClass of Lexer, yes the options has a superClass option for parser, but that don't work for lexer,
I've tried lexer::options{...} or options {lexer.superClass=...},
none of them work.

third, for tree grammar, can't specify customized tokens type,
TokenLabelType=MyToken; doesn't work, instead I must write
((MyToken)$value.getToken()), (but  this issue is minor
because anyway I can get access to it, just typecast.)
  
XRuby http://xruby.com
femto http://hi.baidu.com/femto
______________________________________
Sent from my www.pageflakes.com startpage

From lists at mainiero.de  Mon May  7 08:20:07 2007
From: lists at mainiero.de (Nicolai Mainiero)
Date: Mon, 7 May 2007 17:20:07 +0200
Subject: [antlr-interest] Problem writing a Grammar
In-Reply-To: <E1Hjwoc-0001RD-JU@server12.webplus24.de>
References: <E1HjvQ6-0003tK-4R@server12.webplus24.de>
	<E1Hjwoc-0001RD-JU@server12.webplus24.de>
Message-ID: <A7CA8B58-5969-4D03-AF9C-AB5F1ED467AA@mainiero.de>

Hi,

thank you very much. You solved my problem. I will clean the grammar  
file a bit and then provide it for download. Of course all helpers  
will be credited in the comment.

Nicolai


Am 04.05.2007 um 14:23 schrieb Gavin Lambert:

> At 22:53 4/05/2007, lists at mainiero.de wrote:
> >Aborting because the following rules are mutually left-recursive:
> >    [functioncall, prefixexp, var]
> >
> >Perhaps anyone can have a look at it to give me hints or solutions
> >how to get this grammar correct. I'm willing to donate this
> >grammar, to make it available on the ANTLR side.
>
> With a bit of rearranging and some assistance from ANTLRworks'  
> automatic left-recursion-remover, I've come up with this (not  
> totally sure it matches the original, but I think it does):
>
> varOrExp: var | '(' exp ')';
> nameAndArgs: (':' NAME)? args;
> varSuffix: nameAndArgs* ('[' exp ']' | '.' NAME);
>
> var: (NAME | '(' exp ')' varSuffix) varSuffix*;
> prefixexp: varOrExp nameAndArgs*;
> functioncall: varOrExp nameAndArgs+;
>
> (You can probably come up with better names for the first three  
> rules.) :)
>
> Basically I did this by taking each of the last three rules in  
> isolation, then inlining any references it made to one of the other  
> problem rules, rearranging and extracting subrules out until I got  
> a simple left-recursion, then using ANTLRworks' "Remove Left  
> Recursion" function, and finally tidying up the result a bit.
>


From laguest at archangeli.demon.co.uk  Mon May  7 11:15:42 2007
From: laguest at archangeli.demon.co.uk (Luke A. Guest)
Date: Mon, 07 May 2007 19:15:42 +0100
Subject: [antlr-interest] unexpected char: '''
Message-ID: <1178561742.5209.0.camel@rogue>

Hi,

I'm a newbie to antlr and am using 2.7.7. I'm attempting to just get a
basic scanner for Ada 2005. At the moment, I'm just trying to get
something very basic going, not using UCS/Unicode, just ASCII and I just
want to define a few delimeters for testing purposed.

Implementation language is C++.

If I remove the "MINUS" line from below, it compiles fine, cany anyone
tell me what it wrong here?

I'm getting the following error from antlr:

ANTLR Parser Generator   Version 2.7.7 (20070424)   1989-2005
error: Token stream error reading grammar(s):
ada2005.g:48:15: unexpected char: '''
TokenStreamException: unexpected char: 0x2013
make: *** [SpiritScanner.cpp] Error 1

>From the following file:

//
-----------------------------------------------------------------------------
// ANTLR 2.7.7 grammar for Spirit, an Ada 2005 subset.
//
-----------------------------------------------------------------------------
header {
//
-----------------------------------------------------------------------------
// Any extra headers go in here.
//
-----------------------------------------------------------------------------
}

options {
    language="Cpp";
}

//
-----------------------------------------------------------------------------
// The lexical analyser.
//
-----------------------------------------------------------------------------
{
//
-----------------------------------------------------------------------------
// Premable goes here.
//
-----------------------------------------------------------------------------
}

//
-----------------------------------------------------------------------------
//
//
-----------------------------------------------------------------------------

/**
 *
 */

class SpiritScanner extends Lexer;

options
    {
    k = 2;
    caseSensitive = false;
    filter = true; // ignore rules for missing stuff, for now.
    charVocabulary = '\3'..'\377';
    }

AMPERSAND:    '&';
TICK:         '\'';
LPAREN:       '(';
RPAREN:       ')';
ASTERISK:     '*';
PLUS:         '+';
COMMA:        ',';
MINUS:        '?';
DOT:          '.';
DIVIDE:       '/';
COLON:        ':';
SEMI_COLON:   ';';
LESS_THAN:    '<';
EQUALS:       '=';
GREATER_THAN: '>';
VERTICAL_BAR: '|';


Thanks,
Luke.


From parrt at cs.usfca.edu  Mon May  7 11:56:50 2007
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon, 7 May 2007 11:56:50 -0700
Subject: [antlr-interest] Some Problem with antlrv3
In-Reply-To: <ebcd82370c804abfadc5f04fa905185b@4a73d35e398b480b92a427afa5772d98>
References: <ebcd82370c804abfadc5f04fa905185b@4a73d35e398b480b92a427afa5772d98>
Message-ID: <D133D373-FEE3-4FE1-B812-D7F856D43C44@cs.usfca.edu>


On May 6, 2007, at 10:55 PM, femtowin1 wrote:

> Hello, when I'm developing antlrv3 grammar for XRuby, I found  
> several issues inconvient:
> first, geneate Parser construtor:
>   public Rubyv3Parser(TokenStream input) {
>         super(input);
>     }
> actually I need some customization here,
> I need to relate Parser with Lexer
> (because ruby's heredoc lexing require parser's symtol table  
> information). I can't replace the old construtor, so instead
> I write the following and invoke this: (a different construtor)
> public Rubyv3Parser(TokenStream input, Rubyv3Parser parent) {
>         super(input);
>         ((Rubyv3Lexer) input.getTokenSource()).setParser(this); // 
> this line is what I required to customize in order to relate parser  
> and lexer
>         this.parent = parent;
>     }
> but puting the original construtor in system is confusing and  
> people may invoke it by wrong and then end up with not correctly  
> intialized parser/lexer.

Actually you want this(input).

Anyway, i don't think that is a huge problem.

>
> second, I can't specify the superClass of Lexer, yes the options  
> has a superClass option for parser, but that don't work for lexer,
> I've tried lexer::options{...} or options {lexer.superClass=...},
> none of them work.

added bug:

http://www.antlr.org:8888/secure/CreateIssueDetails.jspa

> third, for tree grammar, can't specify customized tokens type,
> TokenLabelType=MyToken; doesn't work, instead I must write
> ((MyToken)$value.getToken()), (but  this issue is minor
> because anyway I can get access to it, just typecast.)

I can't know read code and figure out that somthing will have type  
Token w/o building a compiler I'm afraid.

Thanks..
Ter

From laguest at archangeli.demon.co.uk  Mon May  7 12:17:27 2007
From: laguest at archangeli.demon.co.uk (Luke A. Guest)
Date: Mon, 07 May 2007 20:17:27 +0100
Subject: [antlr-interest] unexpected char: '''
In-Reply-To: <1178561742.5209.0.camel@rogue>
References: <1178561742.5209.0.camel@rogue>
Message-ID: <1178565447.5209.2.camel@rogue>

I've also tried to compile this as a Java program, and I get the same
error.

Luke.



From parrt at cs.usfca.edu  Mon May  7 12:31:04 2007
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon, 7 May 2007 12:31:04 -0700
Subject: [antlr-interest] unexpected char: '''
In-Reply-To: <1178561742.5209.0.camel@rogue>
References: <1178561742.5209.0.camel@rogue>
Message-ID: <26D33322-DA82-470B-96D4-20C9ECB88F03@cs.usfca.edu>


On May 7, 2007, at 11:15 AM, Luke A. Guest wrote:

> Hi,
>
> I'm a newbie to antlr and am using 2.7.7. I'm attempting to just get a
> basic scanner for Ada 2005. At the moment, I'm just trying to get
> something very basic going, not using UCS/Unicode, just ASCII and I  
> just
> want to define a few delimeters for testing purposed.
>
> Implementation language is C++.
>
> If I remove the "MINUS" line from below, it compiles fine, cany anyone
> tell me what it wrong here?
>

> MINUS:        '?';

That looks like a non-ASCII minus, which ANTLR cannot handle directly.
Ter


From hwk.cortex-brainware at t-online.de  Mon May  7 12:52:26 2007
From: hwk.cortex-brainware at t-online.de (Dr. Hartmut Kocher)
Date: Mon, 7 May 2007 21:52:26 +0200
Subject: [antlr-interest] Released first product with ANTLR3 C#
Message-ID: <03f501c790e1$3d3c1ea0$1601a8c0@kocher>

Hi,

 

just wanted to let you know that I delivered a new version of our software
to a client. We have rewritten all lexer and parsers to use ANTLR 3.
Together with the fixes I posted during the last months, the C# code
generator worked just fine. ANTLR 3 is so much better and easier to use than
V2, so it was well worth the effort. It allowed us to easily build some new
features that would have taken much longer using the previous version.

 

Finally, performance is great (much faster than before). Debugging is easier
because there are no more exceptions during parsing (ANTLR 2 used
MismatchedTokenExceptions to backtrack).

 

So thanks for a great job Terence.

 

I will update our parsers to the official 3.0 version, when it?s ready. BTW
your new book helped understanding quite some issues. I can only recommend
it to everyone.

 

Kind regards

 

Dr. Hartmut Kocher

Cortex Brainware Consulting & Training GmbH

Kirchplatz 5
D-82049 Pullach

Tel: +49 (89) 744  850 0
Fax: +49 (89) 744  850 11

 <http://www.cortex-brainware.de/> http://www.cortex-brainware.de

Handelsregister:
Registergericht: Amtsgericht M?nchen
HRB-Nr. 120614

Vertretungsberechtigte Gesch?ftsf?hrer:
Dipl.-Inform. Dorothea Burger, Dr.-Ing. Hartmut Kocher, Dr.-Ing. Martin
Lang, Dr. rer. nat. Rolf Peter Wehrum 

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070507/a5a2036d/attachment.html 

From joachimm at etek.chalmers.se  Mon May  7 12:55:44 2007
From: joachimm at etek.chalmers.se (Joachim =?iso-8859-1?Q?M=E5rtensson?=)
Date: Mon, 7 May 2007 21:55:44 +0200 (CEST)
Subject: [antlr-interest] Problems with treeParser in V2 with c++ target
Message-ID: <55080.193.11.234.162.1178567744.squirrel@webmail.chalmers.se>

Hello,
I am trying to learn how to use Antlr with C++ as a target, and I thought
I should try out something relatively easy. Basically I thought I should
extend the calc example in the cpp folder to work like the expression
parser in the Antlr (beta) book, however I am running into problems.

$./out "(4+5*8);"
 ( + 4 ( * 5 8 ) )
<AST>: unexpected AST node: 4
expr:0value is 0 <- my debug output

I find this hard to figure out, I am guessing that I am setting up the
ParseTree in the wrong way or something but I cannot figure out how.

Thanks in advance
Joachim

my treeGrammar file looks like this.
header
{
    #include <map>;
    #include <string>;
    #include <iostream>;

}

options {
    language="Cpp";
}
class CalcTreeWalker extends TreeParser;

{
    public:
     std::map<std::string, double> idMem;
}

prog returns [double ret]
{
    ret = 0.0;
    double total = 0;
}
: (total = stat {ret += total;})+ ;

stat returns [double st]
{
     st = 0;
}
    :   #(ASSIGN c:ID st = expr) { idMem[c->getText()]= st;}
    |   st = expr { std::cout << "expr:"<< st;} ;
expr returns [double r]
{
    double a,b;
    r=0;
}
    :   #(PLUS a=expr b=expr)    {r = a+b;}
    |   #(MINUS a=expr b=expr)    {r = a-b;}
    |   #(STAR a=expr b=expr)    {r = a*b;}
    |   i:INT            {r = atof(i->getText().c_str());}
    |   k:ID {if (idMem.count(k->getText()) > 0) r = idMem[k->getText()];
else r = 0;}
    ;

-------------
and the Parser and Lexer looks like this.
-------------

options {
    language="Cpp";
}

class CalcParser extends Parser;
options {
    //genHashLines = true;        // include line number information
    buildAST = true;            // uses CommonAST by default
    k = 2;
}

prog: (stat)+ ;

stat: expr SEMI!
    | ID ASSIGN^ expr SEMI! ;

expr
    : mexpr ((PLUS^|MINUS^) mexpr)*
    ;

mexpr
    :    atom (STAR^ atom)*
    ;


atom: INT
    | ID
    | LPAREN! expr RPAREN!
    ;

class CalcLexer extends Lexer;

WS_    :    (' '
    |    '\t'
    |    '\n'
    |    '\r')
        { _ttype = ANTLR_USE_NAMESPACE(antlr)Token::SKIP; }
    ;

LPAREN:    '('
    ;

RPAREN:    ')'
    ;
LBRACKET: '[' ;
RBRACKET: ']' ;
ASSIGN: '=' ;
STAR:    '*'
    ;
ID
    	:	('a'..'z'|'A'..'Z'|'_') ('a'..'z'|'A'..'Z'|'_'|'0'..'9')*
    	;


STRING_LITERAL	: 	'"'	(~'"')* '"' ;

MINUS: '-' ;

PLUS:    '+'
    ;

SEMI:    ';'
    ;

protected
DIGIT
    :    '0'..'9'
    ;

INT    :    (DIGIT)+
    ;

-------------------
I use the following code to set up the parser and tree. (almost identical
to the Main file in the cpp/calc example folder)

-------------------
/* Calculate an expression read from stdin or from the arguments passed to
 * the program (using stringstream's)
 */
#include <iostream>
#include <sstream>
#include <map>;
#include "antlr/AST.hpp"
#include "CalcLexer.hpp"
#include "CalcParser.hpp"
#include "CalcTreeWalker.hpp"

int main( int argc, char* argv[] )
{
	ANTLR_USING_NAMESPACE(std)
	ANTLR_USING_NAMESPACE(antlr)
	try
	{
		ostringstream expr;
		istringstream input_string;
		istream *input = &cin;
		const char *filename = "<cin>";

		if( argc > 1 )
		{
			// write the argv strings to a ostringstream...
			for( int i = 1; i < argc; i++ )
			{
				if( i > 1 && i != (argc-1))
					expr << ' ';
				expr << argv[i];
			}
			input_string.str(expr.str());
			input = &input_string;
			filename = "<arguments>";
		}

		CalcLexer lexer(*input);
		lexer.setFilename(filename);

		CalcParser parser(lexer);
		parser.setFilename(filename);

		ASTFactory ast_factory;
		parser.initializeASTFactory(ast_factory);
		parser.setASTFactory(&ast_factory);

		// Parse the input expression
		parser.prog();
		RefAST t = parser.getAST();
		if( t )
		{
	  	// Print the resulting tree out in LISP notation
			cout << t->toStringTree() << endl;
			CalcTreeWalker walker;

	  	// Traverse the tree created by the parser
			walker.initializeASTFactory(ast_factory);
            walker.setASTFactory(&ast_factory);
			double r = walker.prog(t);

            for(map<string, double>::const_iterator it =
walker.idMem.begin(); it != walker.idMem.end(); ++it)
            {
                cout << "first: " << it->first << "second:\t" <<
it->second << endl;
            }
			cout << "value is " << r << endl;
		}
		else
			cout << "No tree produced" << endl;

	}
	catch(ANTLRException& e)
	{
		cerr << "Parse exception: " << e.toString() << endl;
		return -1;
	}
	catch(exception& e)
	{
		cerr << "exception: " << e.what() << endl;
		return -1;
	}
	return 0;
}




From bruce.trask at mdesystems.com  Mon May  7 13:30:18 2007
From: bruce.trask at mdesystems.com (Bruce Trask)
Date: Mon, 7 May 2007 13:30:18 -0700 (PDT)
Subject: [antlr-interest] C++ target in v3
Message-ID: <758027.34781.qm@web908.biz.mail.mud.yahoo.com>

Hello,
   
  Does the Cpp language option work fully in v3?  It seemed to be hiccuping for me and and so I wanted to check.
   
  Thanks in advance,
Bruce
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070507/1d152da5/attachment.html 

From ric.klaren at gmail.com  Mon May  7 14:58:34 2007
From: ric.klaren at gmail.com (Ric Klaren)
Date: Mon, 7 May 2007 23:58:34 +0200
Subject: [antlr-interest] C++ target in v3
In-Reply-To: <758027.34781.qm@web908.biz.mail.mud.yahoo.com>
References: <758027.34781.qm@web908.biz.mail.mud.yahoo.com>
Message-ID: <bc607a4e0705071458n48acc7fcv6ab2932a3afe3624@mail.gmail.com>

Hi,

On 5/7/07, Bruce Trask <bruce.trask at mdesystems.com> wrote:
> Does the Cpp language option work fully in v3?  It seemed to be hiccuping
> for me and and so I wanted to check.

It does not work. As things look atm I'll probably have something
release worthy by the end of this month, I have some free time coming
up even in large enough chunks to make good progress.

Cheers,

Ric

From jaluber at gmx.de  Mon May  7 15:00:58 2007
From: jaluber at gmx.de (Johannes Luber)
Date: Tue, 08 May 2007 00:00:58 +0200
Subject: [antlr-interest] Left recursion removal
Message-ID: <463FA19A.70906@gmx.de>

Hello,

I'm at a bit of loss here. I have tried to reform some mutually left
recursive rules in my C# grammar and got down from originally 7 rules to
 2 through inlining, as Gavin Lambert suggested in another email
(hopefully I didn't interpret it wrong). The two rules are:


primary_expression
    :    (array_creation_expression
         |    literal
         |    simple_name
         |    parenthesized_expression
         |    predefined_type '.' identifier type_argument_list?
         |    qualified_alias_member '.' identifier type_argument_list?
         |    element_access '[' expression_list ']'
         |    this_access
         |    base_access
         |    object_creation_expression
         |    delegate_creation_expression
         |    typeof_expression
         |    checked_expression
         |    unchecked_expression
         |    default_value_expression
         |    anonymous_method_expression
         |    sizeof_expression
         |    {isUnsafeContext}?=> pointer_member_access
         |    {isUnsafeContext}?=> pointer_element_access
         |    {allowOrcas}?=> anonymous_object_creation_expression)
         ('.' identifier type_argument_list? | '(' argument_list? ')'
         | '++' | '--')*
    ;

element_access
    :    literal
    |    simple_name
    |    parenthesized_expression
    |    primary_expression '.' identifier type_argument_list?
    |    predefined_type '.' identifier type_argument_list?
    |    qualified_alias_member '.' identifier type_argument_list?
    |    primary_expression '(' argument_list? ')'
    |    this_access
    |    base_access
    |    primary_expression '++'
    |    primary_expression '--'
    |    object_creation_expression
    |    delegate_creation_expression
    |    typeof_expression
    |    checked_expression
    |    unchecked_expression
    |    default_value_expression
    |    anonymous_method_expression
    |    sizeof_expression
    |    {isUnsafeContext}?=> pointer_member_access
    |    {isUnsafeContext}?=> pointer_element_access
    |    allowOrcas}?=> anonymous_object_creation_expression
    ;

The problem is that I can't figure out how to merge both rules into one.
Simple inlining requires parentheses over the whole subexpression and
prevents ANTLRworks to remove the last left recursion. And because
everywhere where one rule references the other rule there is some
trailing I can't remove the parentheses without changing the grammar.

In case I followed the wrong strategy I've attached my simplified
grammar with the 7 original rules.

Thanks for any help!
Johannes Luber
-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: Kopie von CSharpRecursion.g
Url: http://www.antlr.org/pipermail/antlr-interest/attachments/20070508/ea7f61d5/attachment-0001.pl 

From lgcraymer at yahoo.com  Mon May  7 15:12:15 2007
From: lgcraymer at yahoo.com (Loring Craymer)
Date: Mon, 7 May 2007 15:12:15 -0700 (PDT)
Subject: [antlr-interest] Left recursion removal
In-Reply-To: <463FA19A.70906@gmx.de>
Message-ID: <708717.92793.qm@web55914.mail.re3.yahoo.com>

Unless I missed something, these two rules are
identical, except that element_access is incorrectly
defined (the three occurrences of primary_expression
with suffixes are in fact just primary expression
variants).  Take a closer look to be sure, then change
occurrences of "element_access" to
"primary_expression" and delete the element_access
rule.

--Loring

--- Johannes Luber <jaluber at gmx.de> wrote:

> Hello,
> 
> I'm at a bit of loss here. I have tried to reform
> some mutually left
> recursive rules in my C# grammar and got down from
> originally 7 rules to
>  2 through inlining, as Gavin Lambert suggested in
> another email
> (hopefully I didn't interpret it wrong). The two
> rules are:
> 
> 
> primary_expression
>     :    (array_creation_expression
>          |    literal
>          |    simple_name
>          |    parenthesized_expression
>          |    predefined_type '.' identifier
> type_argument_list?
>          |    qualified_alias_member '.' identifier
> type_argument_list?
>          |    element_access '[' expression_list ']'
>          |    this_access
>          |    base_access
>          |    object_creation_expression
>          |    delegate_creation_expression
>          |    typeof_expression
>          |    checked_expression
>          |    unchecked_expression
>          |    default_value_expression
>          |    anonymous_method_expression
>          |    sizeof_expression
>          |    {isUnsafeContext}?=>
> pointer_member_access
>          |    {isUnsafeContext}?=>
> pointer_element_access
>          |    {allowOrcas}?=>
> anonymous_object_creation_expression)
>          ('.' identifier type_argument_list? | '('
> argument_list? ')'
>          | '++' | '--')*
>     ;
> 
> element_access
>     :    literal
>     |    simple_name
>     |    parenthesized_expression
>     |    primary_expression '.' identifier
> type_argument_list?
>     |    predefined_type '.' identifier
> type_argument_list?
>     |    qualified_alias_member '.' identifier
> type_argument_list?
>     |    primary_expression '(' argument_list? ')'
>     |    this_access
>     |    base_access
>     |    primary_expression '++'
>     |    primary_expression '--'
>     |    object_creation_expression
>     |    delegate_creation_expression
>     |    typeof_expression
>     |    checked_expression
>     |    unchecked_expression
>     |    default_value_expression
>     |    anonymous_method_expression
>     |    sizeof_expression
>     |    {isUnsafeContext}?=> pointer_member_access
>     |    {isUnsafeContext}?=> pointer_element_access
>     |    allowOrcas}?=>
> anonymous_object_creation_expression
>     ;
> 
> The problem is that I can't figure out how to merge
> both rules into one.
> Simple inlining requires parentheses over the whole
> subexpression and
> prevents ANTLRworks to remove the last left
> recursion. And because
> everywhere where one rule references the other rule
> there is some
> trailing I can't remove the parentheses without
> changing the grammar.
> 
> In case I followed the wrong strategy I've attached
> my simplified
> grammar with the 7 original rules.
> 
> Thanks for any help!
> Johannes Luber
> > grammar CSharpRecursion;
> 
> //
>
D:\Studium\Diplomarbeit_Eclipse\CSharpParser\csharpml
> 
> tokens {
> ABSTRACT='abstract';
> AS='as';
> BASE='base';
> BOOL='bool';
> BREAK='break';
> BYTE='byte';
> CASE='case';
> CATCH='catch';
> CHAR='char';
> CHECKED='checked';
> CLASS='class';
> CONST='const';
> CONTINUE='continue';
> DECIMAL='decimal';
> DEFAULT='default';
> DELEGATE='delegate';
> DO='do';
> DOUBLE='double';
> ELSE='else';
> ENUM='enum';
> EVENT='event';
> EXPLICIT='explicit';
> EXTERN='extern';
> FALSE='false';
> FINALLY='finally';
> FIXED='fixed';
> FLOAT='float';
> FOR='for';
> FOREACH='foreach';
> GOTO='goto';
> IF='if';
> IMPLICIT='implicit';
> IN='in';
> INT='int';
> INTERFACE='interface';
> INTERNAL='internal';
> IS='is';
> LOCK='lock';
> LONG='long';
> NAMESPACE='namespace';
> NEW='new';
> NULL='null';
> OBJECT='object';
> OPERATOR='operator';
> OUT='out';
> OVERRIDE='override';
> PARAMS='params';
> PRIVATE='private';
> PROTECTED='protected';
> PUBLIC='public';
> READONLY='readonly';
> REF='ref';
> RETURN='return';
> SBYTE='sbyte';
> SEALED='sealed';
> SHORT='short';
> SIZEOF='sizeof';
> STACKALLOC='stackalloc';
> STATIC='static';
> STRING='string';
> STRUCT='struct';
> SWITCH='switch';
> THIS='this';
> THROW='throw';
> TRUE='true';
> TRY='try';
> TYPEOF='typeof';
> UINT='uint';
> ULONG='ulong';
> UNCHECKED='unchecked';
> UNSAFE='unsafe';
> USHORT='ushort';
> USING='using';
> VIRTUAL='virtual';
> VOID='void';
> VOLATILE='volatile';
> WHILE='while';
> }
> 
> primary_expression
> 	:	array_creation_expression
> 	|	primary_no_array_creation_expression
> 	;
> 
> primary_no_array_creation_expression
> 	:	literal
> 	|	simple_name
> 	|	parenthesized_expression
> 	|	member_access
> 	|	invocation_expression
> 	|	element_access
> 	|	this_access
> 	|	base_access
> 	|	post_increment_expression
> 	|	post_decrement_expression
> 	|	object_creation_expression
> 	|	delegate_creation_expression
> 	|	typeof_expression
> 	|	checked_expression
> 	|	unchecked_expression
> 	|	default_value_expression
> 	|	anonymous_method_expression
> 	|	sizeof_expression
> 	|	{isUnsafeContext}?=> pointer_member_access 
> 	|	{isUnsafeContext}?=> pointer_element_access 
> 	|	{allowOrcas}?=>
> anonymous_object_creation_expression
> 	;
> 
> member_access
> 	:	primary_expression '.' identifier
> type_argument_list?
> 	|	predefined_type '.' identifier
> type_argument_list?
> 	|	qualified_alias_member '.' identifier
> type_argument_list?
> 	;
> 
> invocation_expression
> 	:	primary_expression '(' argument_list? ')'
> 	;
> 
> element_access
> 	:	primary_no_array_creation_expression '['
> expression_list ']'
> 	;
> 
> post_increment_expression
> 	: primary_expression '++'
> 	;
> 	
> post_decrement_expression
> 	:	primary_expression '--'
> 	;
> 	
> // Here additional rules needed to resolve errors.
> 
> predefined_type
> 	:	BOOL
> 	|	BYTE
> 	|	CHAR
> 	|	DECIMAL
> 	|	DOUBLE
> 	|	FLOAT
> 	|	INT
> 	|	LONG
> 	|	OBJECT
> 	|	SBYTE
> 	|	SHORT
> 	|	STRING
> 	|	UINT
> 	|	ULONG
> 	|	USHORT
> 	;
> 
> anonymous_object_creation_expression
> 	:
> 	;
> 
> pointer_element_access
> 	:
> 	;
> 
> pointer_member_access
> 	:
> 	;
> 
> sizeof_expression
> 	:
> 	;
> 
> anonymous_method_expression
> 	:
> 	;
> 
> default_value_expression
> 	:
> 	;
> 
> unchecked_expression
> 	:
> 	;
> 
> checked_expression
> 	:
> 	;
> 
> typeof_expression
> 	:
> 	;
> 
> delegate_creation_expression
> 	:
> 	;
> 
> 
=== message truncated ===


__________________________________________________
Do You Yahoo!?
Tired of spam?  Yahoo! Mail has the best spam protection around 
http://mail.yahoo.com 

From parrt at cs.usfca.edu  Mon May  7 15:13:30 2007
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon, 7 May 2007 15:13:30 -0700
Subject: [antlr-interest] ANTLR/StringTemplate tech support
Message-ID: <C294B783-7BDC-4A3B-8329-2010904DFD1B@cs.usfca.edu>

Hi,

I have formalized my procedures for commercial tech support:

http://www.antlr.org/support.html

Basically, you click a button that takes you to paypal.  After  
payment, you're directed to a page giving you the support email  
address.  You ask a question and I answer it at least within 1  
business day.  1 month and 6 month options (at 50% off).  These are  
new lower prices too :)

The free antlr-interest list is usually enough, but sometimes it's  
nice knowing you can't get stuck because a question doesn't get  
answered.  Anyway...it's there if you need it.

Ter
PS	I can sign NDAs prior to you clicking the button if necessary.

From bruce.trask at mdesystems.com  Mon May  7 16:02:04 2007
From: bruce.trask at mdesystems.com (Bruce Trask)
Date: Mon, 7 May 2007 16:02:04 -0700 (PDT)
Subject: [antlr-interest] C++ target in v3
In-Reply-To: <bc607a4e0705071458n48acc7fcv6ab2932a3afe3624@mail.gmail.com>
Message-ID: <736894.43644.qm@web914.biz.mail.mud.yahoo.com>

Great. Thanks Ric!
   
  Regards,
Bruce

Ric Klaren <ric.klaren at gmail.com> wrote:
  Hi,

On 5/7/07, Bruce Trask 
wrote:
> Does the Cpp language option work fully in v3? It seemed to be hiccuping
> for me and and so I wanted to check.

It does not work. As things look atm I'll probably have something
release worthy by the end of this month, I have some free time coming
up even in large enough chunks to make good progress.

Cheers,

Ric

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070507/47ab2011/attachment.html 

From parrt at cs.usfca.edu  Mon May  7 16:59:05 2007
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon, 7 May 2007 16:59:05 -0700
Subject: [antlr-interest] Released first product with ANTLR3 C#
In-Reply-To: <03f501c790e1$3d3c1ea0$1601a8c0@kocher>
References: <03f501c790e1$3d3c1ea0$1601a8c0@kocher>
Message-ID: <6E2CB321-FC2D-4824-9A21-E92559C0A8F5@cs.usfca.edu>


On May 7, 2007, at 12:52 PM, Dr. Hartmut Kocher wrote:

> Hi,
>
>  just wanted to let you know that I delivered a new version of our  
> software to a client. We have rewritten all lexer and parsers to  
> use ANTLR 3. Together with the fixes I posted during the last  
> months, the C# code generator worked just fine. ANTLR 3 is so much  
> better and easier to use than V2, so it was well worth the effort.  
> It allowed us to easily build some new features that would have  
> taken much longer using the previous version.

Glad to know you got that working.  Hooray!  Congrats on your  
software delivery!

>  Finally, performance is great (much faster than before). Debugging  
> is easier because there are no more exceptions during parsing  
> (ANTLR 2 used MismatchedTokenExceptions to backtrack).

Good to hear.  I think new LL(*) and backtracking mechanisms reduce  
cost greatly.
>  So thanks for a great job Terence.
>
>  I will update our parsers to the official 3.0 version, when it?s  
> ready. BTW your new book helped understanding quite some issues. I  
> can only recommend it to everyone.
Thanks for the endorsement :)

Ter

From femtowin1 at gmail.com  Mon May  7 18:24:48 2007
From: femtowin1 at gmail.com (femtowin1)
Date: Mon, 07 May 2007 18:24:48 -0700 (PDT)
Subject: [antlr-interest] Some Problem with antlrv3
Message-ID: <d8faca7330aa4837992b70d9f8a0c31a@b53e0c07568c4818a8cf5b96f83da60c>

Hi Terence, sorry for not state the problem clearly, for point 1,
just ignore the Rubyv3Parser(TokenStream input, Rubyv3Parser parent) constructor, assume we only only one
construtor now: Rubyv3Parser(TokenStream input) , the problem
is this constructor is generated and I can't add customization
initialization code to it , actually I need is the following:
public Rubyv3Parser(TokenStream input) {
         super(input);
           ((Rubyv3Lexer) input.getTokenSource()).setParser(this); 
     }
but this constructor is auto generated, I just can't put the above
code into members section cause when generating, there will be 
two same signature constructor which is compile error.

for point 3, actually I need building a compiler,
because ruby's double quote string has inner structure,
you can put any statement inside #{}, so what I did is attach
an expression to the token when lexing, so while walking the tree,
I need to get the expression, 
expression returns[Expression e]
	:	 value=DOUBLE_QUOTE_STRING{e=((MyToken)$value.getToken()).getExpression();}
the current implementation doesn't support specifying Token type in tree grammar.
______________________________________
Sent from my www.pageflakes.com startpage

From questionhelper at gmail.com  Mon May  7 20:50:07 2007
From: questionhelper at gmail.com (=?GB2312?B?x/Czyc2p?=)
Date: Tue, 8 May 2007 11:50:07 +0800
Subject: [antlr-interest] A challenging question
Message-ID: <df252c050705072050hba97e68of7b5dd859f2aa863@mail.gmail.com>

Hi ,I have a challenging question to ask you .  There are ten binary
data packets A,B,C,D,E,F.......
         packet A: "this  is a te"
         packet B: "st !"
         ......
I can not  put packets A and B together?what could I do to ask scanner
to find the "test" coming from packet A and B?

I am looking froward to your early reply.

From service at sharpplus.com  Mon May  7 23:51:52 2007
From: service at sharpplus.com (=?iso-8859-1?Q?service?=)
Date: Tue, 08 May 2007 06:51:52 +0000
Subject: [antlr-interest] Lots of memory leak with
	TokenStreamHiddenTokenFilter of C++ Target in Antlr 2.7x?
Message-ID: <20070508065152.13642.qmail@server314.com>

recently I wanted to use TokenStreamHiddenTokenFilter it works as expected. But when I use boost to do some unit test, the boost reports lots of memory leaks. I do not know whether it is problem of my code or not . So I use the example preserveWhiteSpace shipped with antlr and do a little console project under vc7.1. the boost test framework report same problem. I do not know why. the following is the test program and the memory leak log.

#include "stdafx.h"

#include <iostream>

#include "antlr/CommonASTWithHiddenTokens.hpp"
#include "antlr/CommonHiddenStreamToken.hpp"
#include "InstrLexer.hpp"
#include "InstrParser.hpp"
#include "InstrTreeWalker.hpp"

#include  <boost/test/included/unit_test_framework.hpp>
using namespace boost::unit_test;

ANTLR_USING_NAMESPACE(std)
ANTLR_USING_NAMESPACE(antlr)




void sql_type_test() {

//int _tmain(int argc, _TCHAR* argv[])
//{
	// make lexer that generates CommonHiddenStreamToken's
	InstrLexer lexer(cin);
	lexer.setTokenObjectFactory(&CommonHiddenStreamToken::factory);

	TokenStreamHiddenTokenFilter filter(lexer);
	filter.hide(InstrParser::WS_);
	filter.hide(InstrParser::SL_COMMENT);

	// make parser with custom ASTFactory generating CommonASTWithHiddenTokens
	InstrParser parser(filter);

	// make factory
	ASTFactory my_factory("CommonASTWithHiddenTokens",
		&CommonASTWithHiddenTokens::factory);

	// let the parser initialize the factory
	parser.initializeASTFactory(my_factory);
	// tell the parser about the factory
	parser.setASTFactory(&my_factory);

	try
	{
		// Parse the input statements
		parser.slist();
	}
	catch(ANTLRException& e)
	{
		cerr << "exception: " << e.getMessage() << endl;
//		return -1;
		return ;
	}

	RefAST t = parser.getAST();

	InstrTreeWalker walker;
	walker.setFilter(filter);
	// This is only needed for walkers that modify the tree.
	// so it's kindoff redundant...
	walker.setASTFactory(&my_factory);
	//walker.initializeASTFactory();

	try
	{
		walker.slist(t);
	}
	catch(ANTLRException& e)
	{
		cerr << "exception: " << e.getMessage() << endl;
		//return -1;
		return ;
	}
	//return 0;
}

void InstrTreeWalker::setFilter(TokenStreamHiddenTokenFilter& filter_)
{
	filter = &filter_;
}

/** walk list of hidden tokens in order, printing them out */
void InstrTreeWalker::dumpHidden(RefToken t)
{
	for ( ; t ; t=filter->getHiddenAfter(t) )
	{
		cout << t->getText();
	}
}

void InstrTreeWalker::pr(RefAST p)
{
	cout << p->getText();
	dumpHidden( (RefCommonASTWithHiddenTokens(p))->getHiddenAfter() );
}


test_suite*
init_unit_test_suite( int argc, char* argv[] )
{
	test_suite* test= BOOST_TEST_SUITE( "sql parser test" );

	test->add( BOOST_TEST_CASE( &sql_type_test) );

	return test;
}

log
D:\antlr\275\projects\TestHidden\Debug>testhidden <test.in
// start comment
// another comment

a = 2;
{dbg.invoke("g", ""); g();}
{
        a=3*4;
}
if 3 then {dbg.invoke("f", "4 + b"); f(4 + b);}
else {
        b =a; // assign
}
// final

D:\antlr\275\projects\TestHidden\Debug>testhidden <test.in
Running 1 test case...
// start comment
// another comment

a = 2;
{dbg.invoke("g", ""); g();}
{
        a=3*4;
}
if 3 then {dbg.invoke("f", "4 + b"); f(4 + b);}
else {
        b =a; // assign
}
// final

*** No errors detected
Detected memory leaks!
Dumping objects ->
{356} normal block at 0x00377708, 8 bytes long.
 Data: < v7     > A0 76 37 00 01 00 00 00
{355} normal block at 0x003776A0, 56 bytes long.
 Data: <  Q  w7         > 18 1F 51 00 08 77 37 00 13 00 00 00 0D 00 00 00
{354} normal block at 0x00377668, 8 bytes long.
 Data: < v7     > 00 76 37 00 01 00 00 00
{353} normal block at 0x00377600, 56 bytes long.
 Data: <  Q hv7         > 18 1F 51 00 68 76 37 00 12 00 00 00 0C 00 00 00
{348} normal block at 0x00375868, 8 bytes long.
 Data: < X7     > 00 58 37 00 01 00 00 00
{347} normal block at 0x00375800, 56 bytes long.
 Data: <  Q hX7         > 18 1F 51 00 68 58 37 00 13 00 00 00 0B 00 00 00
{346} normal block at 0x003757C8, 8 bytes long.
 Data: <`W7     > 60 57 37 00 01 00 00 00
{345} normal block at 0x00375760, 56 bytes long.
 Data: <  Q  W7         > 18 1F 51 00 C8 57 37 00 12 00 00 00 0B 00 00 00
{165} normal block at 0x00373C98, 8 bytes long.
 Data: <8=7     > 38 3D 37 00 01 00 00 00
{164} normal block at 0x00373D38, 56 bytes long.
 Data: <  Q  <7         > 18 1F 51 00 98 3C 37 00 12 00 00 00 03 00 00 00
{163} normal block at 0x00373CE8, 32 bytes long.
 Data: <// another comme> 2F 2F 20 61 6E 6F 74 68 65 72 20 63 6F 6D 6D 65
{161} normal block at 0x00373C60, 8 bytes long.
 Data: < ;7     > F8 3B 37 00 02 00 00 00
{160} normal block at 0x00373BF8, 56 bytes long.
 Data: <  Q `<7         > 18 1F 51 00 60 3C 37 00 13 00 00 00 02 00 00 00
{157} normal block at 0x00373BA8, 32 bytes long.
 Data: <// start comment> 2F 2F 20 73 74 61 72 74 20 63 6F 6D 6D 65 6E 74
{155} normal block at 0x00373868, 8 bytes long.
 Data: <@;7     > 40 3B 37 00 01 00 00 00
{154} normal block at 0x00373B40, 56 bytes long.
 Data: <  Q h87         > 18 1F 51 00 68 38 37 00 13 00 00 00 01 00 00 00
Object dump complete.

by the way , rewriteengine in antlr 2.7x c++ target has similar problem, but looks like not as serious as hidden filter.

best regards
chinsho

From questionhelper at gmail.com  Tue May  8 01:42:01 2007
From: questionhelper at gmail.com (=?GB2312?B?x/Czyc2p?=)
Date: Tue, 8 May 2007 16:42:01 +0800
Subject: [antlr-interest] Parser the binary data
Message-ID: <df252c050705080142m5074831fqdbf6ae3b8672db1b@mail.gmail.com>

Hi !  I want to ask you some questions about binary data. There is
only documents how to distinguish between strings and short integers
in binary data . If I want to find the specific pattern (such as:
^(\x01|\x02)\w+\x82 ?in the binary data , what  do I need to do?

Thanks for your help.

From rubenfonseca at di.uminho.pt  Tue May  8 01:57:40 2007
From: rubenfonseca at di.uminho.pt (Ruben Fonseca)
Date: Tue, 08 May 2007 09:57:40 +0100
Subject: [antlr-interest] [AntLR3] EarlyExitException (filter=true +
	backtrack=true)
Message-ID: <1178614661.4131.1.camel@localhost.localdomain>

Hi I'm using antlr3 to build a php grammar.

Since I'm not interested in HTML for now, I used filter=true mode.
However, as soon as I turn this option on, the generated parser stopped
working. It always exits with EarlyExitException.

I'm using backtrack and memoize too.

Is this a known problem? Or am I missing something?

Thanks,
Ruben


From jaluber at gmx.de  Tue May  8 02:36:17 2007
From: jaluber at gmx.de (Johannes Luber)
Date: Tue, 08 May 2007 11:36:17 +0200
Subject: [antlr-interest] A challenging question
In-Reply-To: <df252c050705072050hba97e68of7b5dd859f2aa863@mail.gmail.com>
References: <df252c050705072050hba97e68of7b5dd859f2aa863@mail.gmail.com>
Message-ID: <46404491.1010506@gmx.de>

??? wrote:
> Hi ,I have a challenging question to ask you .  There are ten binary
> data packets A,B,C,D,E,F.......
>         packet A: "this  is a te"
>         packet B: "st !"
>         ......
> I can not  put packets A and B together?what could I do to ask scanner
> to find the "test" coming from packet A and B?
> 
> I am looking froward to your early reply.

I suppose that the only possibility is to create another layer above the
packets which virtually combines the binary packets into a single one.
As tokens don't copy their text from the source but instead point to it,
you have to add some facility which allows the retrieval of substrings.
At least that is what gather from what I know about ANTLRs tokenizer.
Maybe you need to write an own scanner class, too.

Best regards,
Johannes Luber

From krysole at internode.on.net  Tue May  8 03:58:11 2007
From: krysole at internode.on.net (Lorenz Pretterhofer)
Date: Tue, 8 May 2007 20:28:11 +0930
Subject: [antlr-interest] A challenging question
In-Reply-To: <df252c050705072050hba97e68of7b5dd859f2aa863@mail.gmail.com>
References: <df252c050705072050hba97e68of7b5dd859f2aa863@mail.gmail.com>
Message-ID: <702A2336-3952-4A15-9EAC-6CD988B1D75A@internode.on.net>

Its not really the responsibility of a lexer or scanner to combine  
packets. This should be handled by your networking layer, either by  
hand if your using UDP or it will automatically occur when using TCP  
socket streams. Once you have a complete stream simply feed it into  
the lexer as you normally would.

When you think about it... The scanner can't really do anything with  
an incomplete packet anyway since its still incomplete;)

Cheers,
Lorenz

On 08/05/2007, at 13:20, ??? wrote:

> Hi ,I have a challenging question to ask you .  There are ten binary
> data packets A,B,C,D,E,F.......
>         packet A: "this  is a te"
>         packet B: "st !"
>         ......
> I can not  put packets A and B together?what could I do to ask  
> scanner
> to find the "test" coming from packet A and B?
>
> I am looking froward to your early reply.


From laguest at archangeli.demon.co.uk  Tue May  8 04:13:09 2007
From: laguest at archangeli.demon.co.uk (Luke A. Guest)
Date: Tue, 08 May 2007 12:13:09 +0100
Subject: [antlr-interest] IRC channel
Message-ID: <1178622789.5209.7.camel@rogue>

Hi,

I know this has been asked, but I couldn't find an answer. Is there a
channel somewhere? I know there isn't one on Freenode.

If there isn't one, why not? It would be extremely useful to have one as
it provides a very quick way of getting answers to questions, as long as
people are there ;)

Thanks,
Luke.



From jaluber at gmx.de  Tue May  8 05:01:11 2007
From: jaluber at gmx.de (Johannes Luber)
Date: Tue, 08 May 2007 14:01:11 +0200
Subject: [antlr-interest] Left recursion removal
In-Reply-To: <708717.92793.qm@web55914.mail.re3.yahoo.com>
References: <708717.92793.qm@web55914.mail.re3.yahoo.com>
Message-ID: <46406687.2050103@gmx.de>

Loring Craymer wrote:
> Unless I missed something, these two rules are
> identical, except that element_access is incorrectly
> defined (the three occurrences of primary_expression
> with suffixes are in fact just primary expression
> variants).  Take a closer look to be sure, then change
> occurrences of "element_access" to
> "primary_expression" and delete the element_access
> rule.
> 
> --Loring

Thanks for your idea! Using the primary_expression variant without left
recursion removal I saw that primary_expression has two additional
alternatives: "array_creation_expression" and "element_access '['
expression_list ']'". Simply replacing the element_access reference with
primary_expression would allow array_creation_expression directly in
front of "'[' expression_list ']'" instead having always either "'.'
identifier type_argument_list?", "'(' argument_list? ')'", "'++'" or
"'--'" between those subrules. Unfortunately every other alternative
requires that no tokens may be inserted in this place. That means that
the following rule isn't quite equivalent:

primary_expression
    :   array_creation_expression
    |   literal
    |   simple_name
    |   parenthesized_expression
    |   primary_expression '.' identifier type_argument_list?
    |   predefined_type '.' identifier type_argument_list?
    |   qualified_alias_member '.' identifier type_argument_list?
    |   primary_expression '(' argument_list? ')'
    |   primary_expression ('.' identifier type_argument_list? | '('
argument_list? ')' | '++' | '--')? '[' expression_list ']'
    |   this_access
    |   base_access
    |   primary_expression '++'
    |   primary_expression '--'
    |   object_creation_expression
    |   delegate_creation_expression
    |   typeof_expression
    |   checked_expression
    |   unchecked_expression
    |   default_value_expression
    |   anonymous_method_expression
    |   sizeof_expression
    |   {isUnsafeContext}?=> pointer_member_access
    |   {isUnsafeContext}?=> pointer_element_access
    |   {allowOrcas}?=> anonymous_object_creation_expression
    ;

How do I check best that array_creation_expression has to be used as
left-most token when the optional subrule "('.' identifier
type_argument_list? | '(' argument_list? ')' | '++' | '--')?" has been
used (and the opposite - no occurrence of the optional subrule requires
no array_creation_expression)? Can I do it with actions or do I have to
check it in another pass over the grammar (which would be doable but
require one pass more than already planned)?

Best regards,
Johannes Luber

From theiman at mitre.org  Tue May  8 06:19:54 2007
From: theiman at mitre.org (Heiman, Thomas J.)
Date: Tue, 8 May 2007 09:19:54 -0400
Subject: [antlr-interest]  MatLab
Message-ID: <8013B46C84D42A4C83EB3DBB9FD71B760171F87E@IMCSRV1.MITRE.ORG>

Hi Ronald,
 
Did you get any response(s) for a Matlab grammar for Antlr?  I am
interested in one also..An alternative could be Octave or Scilab (and I
think Scilab has a translation facility)..
 
Sincerely,
 
Tom
 
Thomas Heiman, PhD
Info Systems Eng, Sr
The MITRE Corporation | Center for Enterprise Modernization
Office: 703-983-2951 | theiman at mitre.org 
 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070508/1397d778/attachment.html 

From antlr at mirality.co.nz  Tue May  8 06:33:14 2007
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Wed, 09 May 2007 01:33:14 +1200
Subject: [antlr-interest] Left recursion removal
In-Reply-To: <463FA19A.70906@gmx.de>
References: <463FA19A.70906@gmx.de>
Message-ID: <20070508133303.6ECEE19042D@www.antlr.org>

At 10:00 8/05/2007, Johannes Luber wrote:
 >I'm at a bit of loss here. I have tried to reform some mutually
 >left ecursive rules in my C# grammar and got down from 
originally
 >7 rules to 2 through inlining, as Gavin Lambert suggested in
 >another email (hopefully I didn't interpret it wrong). The two
 >rules are:
 >
 >
 >primary_expression
 >    :    (array_creation_expression
 >         |    literal
 >         |    simple_name
[...]
 >
 >element_access
 >    :    literal
 >    |    simple_name
[...]
 >
 >The problem is that I can't figure out how to merge both rules 
into
 >one.
 >Simple inlining requires parentheses over the whole 
subexpression
 >and prevents ANTLRworks to remove the last left recursion. And 
because
 >everywhere where one rule references the other rule there is 
some
 >trailing I can't remove the parentheses without changing the
 >grammar.

The first thing I'd do is to try extracting common 
subexpressions.  For example, just in the snippet I quoted above 
you can see that both rules accept either 'literal' or 
'simple_name', so you can create a third rule (as 'literal | 
simple_name') and reference that rule in place of those two 
alternatives.

Keep moving any alts that are completely common to both rules into 
this new rule, and eventually you should be left with much shorter 
rules that contain only the points of difference.  From there it 
should be easier to see how things need to be rearranged.

And yes, there are cases that the ANTLRworks recursion remover 
can't cope with at the moment; although usually you can rearrange 
and extract your way to something it can deal with, sometimes 
you'll just have to resolve it on your own.


From ssiegel at finjan.com  Tue May  8 09:17:05 2007
From: ssiegel at finjan.com (Shmuel Siegel)
Date: Tue, 8 May 2007 19:17:05 +0300
Subject: [antlr-interest] Problems with AntlrWorks 1.0b11
Message-ID: <E344C433F006AB45A306D422F9C3EB4C01D2702E@exmail1.finjan.com>

I created the following grammar to study the elimination of left
recursion. I have two issues with AntlrWorks.

 

*	When I check grammar, I get a popup that says "Check Grammar
Succeeded" gut the console says "Aborting because the following rules
are mutually left recursive. [funcCall]"
*	When I try the "Refactor" method to eliminate left recursion, it
tells me that the method doesn't have left recursion.

 

grammar boo;

 

funcCall 

            :           (IDENT | funcCall) list;

list:       '(' IDENT ')';

 

IDENT

            :           'XXX';

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070508/3882856e/attachment.html 

From miguel.ping at gmail.com  Tue May  8 12:30:10 2007
From: miguel.ping at gmail.com (Miguel Ping)
Date: Tue, 8 May 2007 20:30:10 +0100
Subject: [antlr-interest] Problems with AntlrWorks 1.0b11
In-Reply-To: <E344C433F006AB45A306D422F9C3EB4C01D2702E@exmail1.finjan.com>
References: <E344C433F006AB45A306D422F9C3EB4C01D2702E@exmail1.finjan.com>
Message-ID: <ab0bf2c00705081230j4df530cfue048fd7c1a6d2555@mail.gmail.com>

My guess is that antlworks does not perform the same verifications that the
antlr tool performs, but I'm not sure. Maybe mr Jean can shed some light on
the subject ;) I always rely on antlr tool, and use antlrworks primarily as
editor/debugger and for quick verification of sintactic errors.

As for elimination of left recursion, I wonder if there isn't an algorithm
that can solve the left recursion where it can be determined
programmatically, like in your case:

funcall:
            IDENT+;

I guess its fundamentally graph theory problem.


On 5/8/07, Shmuel Siegel <ssiegel at finjan.com> wrote:
>
>  I created the following grammar to study the elimination of left
> recursion. I have two issues with AntlrWorks.
>
>
>
>    - When I check grammar, I get a popup that says "Check Grammar
>    Succeeded" gut the console says "Aborting because the following rules are
>    mutually left recursive. [funcCall]"
>    - When I try the "Refactor" method to eliminate left recursion, it
>    tells me that the method doesn't have left recursion.
>
>
>
> grammar boo;
>
>
>
> funcCall
>
>             :           (IDENT | funcCall) list;
>
> list:       '(' IDENT ')';
>
>
>
> IDENT
>
>             :           'XXX';
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070508/8950f7a4/attachment.html 

From thiago.oliveira20+antlr at gmail.com  Tue May  8 12:35:24 2007
From: thiago.oliveira20+antlr at gmail.com (Thiago Oliveira)
Date: Tue, 8 May 2007 16:35:24 -0300
Subject: [antlr-interest] ASTVistor v3
In-Reply-To: <d2c6e5060705081230i2f714f5bm4ae44ea3d64a437d@mail.gmail.com>
References: <d2c6e5060705081230i2f714f5bm4ae44ea3d64a437d@mail.gmail.com>
Message-ID: <d2c6e5060705081235q2e972c92m3979c52a45bcd52d@mail.gmail.com>

Hi,

I am a student from Brazil, graduating in Computer Science. I am involved in
a project for a security verifier for Java source codes in which we use the
antlr project, especially the Visitor issue. Nonetheless, we could not find
enough documentation about the usage of the class ASTVisitor together with
the java parser. All we were able to do until now was a simple parsing of
java file and an unsuccesful tree walking... =(
Could you possibly indicate a place where we could find more detailed
information about the usage of ASTVisitors and Java Parsers?

-- 
Thiago Oliveira
Human Resources Director
Empresa J?nior de Computa??o - CJr
University of Brasilia
Brasilia
Brazil
+55 (61) 8447 8868
http://www.cjr.org.br
cjr at cjr.org.br
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070508/1e0fc42e/attachment.html 

From christianhofmann_de at yahoo.de  Tue May  8 12:46:34 2007
From: christianhofmann_de at yahoo.de (Christian Ulrich)
Date: Tue, 8 May 2007 21:46:34 +0200 (CEST)
Subject: [antlr-interest] Antlr 3.0b7 internal error
Message-ID: <512184.70288.qm@web26511.mail.ukl.yahoo.com>

Hello,

I'm using Antlr version 3.0b7 for translating my
grammar. When code generation is java the translation
works well. Setting the code generation target to
CSharp I'll get this internal error.

error(10):  internal error: group CSharp does not
satisfy interface ANTLRCore: mismatched arguments on
these templates [rule(ruleName, ruleDescriptor, block,
emptyRule, description, exceptions, finally, memoize)]

What's the reason for that?

Regards
Christian



      
	
		
___________________________________________________________ 
Der fr?he Vogel f?ngt den Wurm. Hier gelangen Sie zum neuen Yahoo! Mail: http://mail.yahoo.de

From antlr at mirality.co.nz  Tue May  8 12:53:50 2007
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Wed, 09 May 2007 07:53:50 +1200
Subject: [antlr-interest] Problems with AntlrWorks 1.0b11
In-Reply-To: <E344C433F006AB45A306D422F9C3EB4C01D2702E@exmail1.finjan.co
 m>
References: <E344C433F006AB45A306D422F9C3EB4C01D2702E@exmail1.finjan.com>
Message-ID: <20070508195555.F19421907C3@www.antlr.org>

At 04:17 9/05/2007, Shmuel Siegel wrote:
>I created the following grammar to study the elimination of left 
>recursion. I have two issues with AntlrWorks.
>    * When I check grammar, I get a popup that says "Check 
> Grammar Succeeded" gut the console says "Aborting because the 
> following rules are mutually left recursive. [funcCall]"
>    * When I try the "Refactor" method to eliminate left 
> recursion, it tells me that the method doesn't have left 
> recursion.
>
>grammar boo;
>
>funcCall
>             :           (IDENT | funcCall) list;
>list:       '(' IDENT ')';
>
>IDENT
>             :           'XXX';

ANTLRworks currently doesn't seem to identify recursion where 
there are parentheses involved.  If you expand the brackets 
(similar to how you'd do it in algebra) then you can get it into a 
state where ANTLRworks can sort it out.  ie. the first step is to 
change it to this:

funcCall:  IDENT list | funcCall list;

ANTLRworks' recursion eliminator should then work on it, and 
you'll end up with this (in b9, at least):

funcCall:  (IDENT list) (list)*;

Although now that I look at that, it seems incorrect.  "funcCall 
list" is basically "list+", so the real replacement rule would be:

funcCall: IDENT list | list+;
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070509/dfab8d54/attachment.html 

From antlr at mirality.co.nz  Tue May  8 12:57:30 2007
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Wed, 09 May 2007 07:57:30 +1200
Subject: [antlr-interest] Antlr 3.0b7 internal error
In-Reply-To: <512184.70288.qm@web26511.mail.ukl.yahoo.com>
References: <512184.70288.qm@web26511.mail.ukl.yahoo.com>
Message-ID: <20070508195721.A0EBB1907B0@www.antlr.org>

At 07:46 9/05/2007, Christian Ulrich wrote:
 >I'm using Antlr version 3.0b7 for translating my
 >grammar. When code generation is java the translation
 >works well. Setting the code generation target to
 >CSharp I'll get this internal error.
 >
 >error(10):  internal error: group CSharp does not
 >satisfy interface ANTLRCore: mismatched arguments on

It means that the C# target is not supported yet in b7.


From antlr at mirality.co.nz  Tue May  8 13:19:51 2007
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Wed, 09 May 2007 08:19:51 +1200
Subject: [antlr-interest] Problems with AntlrWorks 1.0b11
In-Reply-To: <20070508195555.F19421907C3@www.antlr.org>
References: <E344C433F006AB45A306D422F9C3EB4C01D2702E@exmail1.finjan.com>
	<20070508195555.F19421907C3@www.antlr.org>
Message-ID: <20070508201943.C1F6B1907B5@www.antlr.org>

At 07:53 9/05/2007, Gavin Lambert wrote:
>funcCall:  (IDENT list) (list)*;
>
>Although now that I look at that, it seems incorrect.  "funcCall 
>list" is basically "list+", so the real replacement rule would be:
>
>funcCall: IDENT list | list+;

Actually, no, ignore me: ANTLRworks' version is correct after all 
(though it could be tidied to IDENT list+).  I forgot about one 
case :)
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070509/e34ae064/attachment.html 

From jaluber at gmx.de  Tue May  8 13:31:49 2007
From: jaluber at gmx.de (Johannes Luber)
Date: Tue, 08 May 2007 22:31:49 +0200
Subject: [antlr-interest] Left recursion removal
In-Reply-To: <46406687.2050103@gmx.de>
References: <708717.92793.qm@web55914.mail.re3.yahoo.com>
	<46406687.2050103@gmx.de>
Message-ID: <4640DE35.4050703@gmx.de>

Johannes Luber wrote:
> How do I check best that array_creation_expression has to be used as
> left-most token when the optional subrule "('.' identifier
> type_argument_list? | '(' argument_list? ')' | '++' | '--')?" has been
> used (and the opposite - no occurrence of the optional subrule requires
> no array_creation_expression)? Can I do it with actions or do I have to
> check it in another pass over the grammar (which would be doable but
> require one pass more than already planned)?

After removal of the left-recursion and some studying with the help
ANTLRworks I could safely remove the optional rule and end with this:

primary_expression
    :    (array_creation_expression
         |    literal
         |    simple_name
         |    parenthesized_expression
         |    predefined_type '.' identifier type_argument_list?
         |    qualified_alias_member '.' identifier type_argument_list?
         |    this_access
         |    base_access
         |    object_creation_expression
         |    delegate_creation_expression
         |    typeof_expression
         |    checked_expression
         |    unchecked_expression
         |    default_value_expression
         |    anonymous_method_expression
         |    sizeof_expression
         |    {isUnsafeContext}?=> pointer_member_access
         |    {isUnsafeContext}?=> pointer_element_access
         |    {allowOrcas}?=> anonymous_object_creation_expression)
         ('.' identifier type_argument_list?
         |    '(' argument_list? ')'
         |    '[' expression_list ']'
         |    '++'
         |    '--')*
	;

So, with this rule the question remains: How do I proceed? I've reformed
only one rule of originally 7. Should I repeat the same process with all
of them as the final rule and then combining equal parts into separate
rules? What about rules which have been only referenced in one of the
reformed rules? Can I skip the process for them?

Best regards,
Johannes Luber

From scottfr at gmail.com  Tue May  8 14:08:02 2007
From: scottfr at gmail.com (Scott Fortmann-Roe)
Date: Tue, 8 May 2007 17:08:02 -0400
Subject: [antlr-interest] Bug with Java Module Operator
Message-ID: <f18f141c0705081408j413a5377x20a4289d0e81b9f9@mail.gmail.com>

Using AST rewrite rules, the following throws an error:

(op+='!'|'not')* negationExpr 	-> {$op != null && ($op.size() %
2)==1}? ^(NOT negationExpr)

Something about invalid string template shorthand '%'.

ANTLR 3.0b7.

Looks like a bug.

-Scott

-- 
Scott Fortmann-Roe
500 College Ave
Swarthmore, Pa 19081
(510) 866-5296

From jimi at temporal-wave.com  Tue May  8 14:11:09 2007
From: jimi at temporal-wave.com (Jim Idle)
Date: Tue, 8 May 2007 14:11:09 -0700
Subject: [antlr-interest] Bug with Java Module Operator
In-Reply-To: <f18f141c0705081408j413a5377x20a4289d0e81b9f9@mail.gmail.com>
References: <f18f141c0705081408j413a5377x20a4289d0e81b9f9@mail.gmail.com>
Message-ID: <B36CCC332A32904F8FA3DE134A2353362524A7@wavemachine.temporal-wave.com>

Use \% not % which is an instruction for stringtemplates :-)

Jim

> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of Scott Fortmann-Roe
> Sent: Tuesday, May 08, 2007 2:08 PM
> To: ANTLR Interest
> Subject: [antlr-interest] Bug with Java Module Operator
> 
> Using AST rewrite rules, the following throws an error:
> 
> (op+='!'|'not')* negationExpr 	-> {$op != null && ($op.size() %
> 2)==1}? ^(NOT negationExpr)
> 
> Something about invalid string template shorthand '%'.
> 
> ANTLR 3.0b7.
> 
> Looks like a bug.
> 
> -Scott
> 
> --
> Scott Fortmann-Roe
> 500 College Ave
> Swarthmore, Pa 19081
> (510) 866-5296

From antlr at mirality.co.nz  Tue May  8 14:17:40 2007
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Wed, 09 May 2007 09:17:40 +1200
Subject: [antlr-interest] Bug with Java Module Operator
In-Reply-To: <f18f141c0705081408j413a5377x20a4289d0e81b9f9@mail.gmail.co
 m>
References: <f18f141c0705081408j413a5377x20a4289d0e81b9f9@mail.gmail.com>
Message-ID: <20070508211730.BFEB2190820@www.antlr.org>

At 09:08 9/05/2007, Scott Fortmann-Roe wrote:
 >Using AST rewrite rules, the following throws an error:
 >
 >(op+='!'|'not')* negationExpr 	-> {$op != null && ($op.size() %
 >2)==1}? ^(NOT negationExpr)
 >
 >Something about invalid string template shorthand '%'.

Are you sure you're allowed to put semantic predicates there?  It 
looks like it ought to be before the arrow (which would make it a 
validation predicate).


From parrt at cs.usfca.edu  Tue May  8 14:42:35 2007
From: parrt at cs.usfca.edu (Terence Parr)
Date: Tue, 8 May 2007 14:42:35 -0700
Subject: [antlr-interest] Bug with Java Module Operator
In-Reply-To: <20070508211730.BFEB2190820@www.antlr.org>
References: <f18f141c0705081408j413a5377x20a4289d0e81b9f9@mail.gmail.com>
	<20070508211730.BFEB2190820@www.antlr.org>
Message-ID: <C2301C6C-095F-4E77-AADF-A904E70F3120@cs.usfca.edu>


On May 8, 2007, at 2:17 PM, Gavin Lambert wrote:

> At 09:08 9/05/2007, Scott Fortmann-Roe wrote:
> >Using AST rewrite rules, the following throws an error:
> >
> >(op+='!'|'not')* negationExpr 	-> {$op != null && ($op.size() %
> >2)==1}? ^(NOT negationExpr)
> >
> >Something about invalid string template shorthand '%'.
>
> Are you sure you're allowed to put semantic predicates there?  It  
> looks like it ought to be before the arrow (which would make it a  
> validation predicate).

You can use preds in front of multiple ->

a : ...
	-> {...}? ...
	-> {...}? ...
	-> ...
    ;

From questionhelper at gmail.com  Tue May  8 17:50:32 2007
From: questionhelper at gmail.com (=?GB2312?B?x/Czyc2p?=)
Date: Wed, 9 May 2007 08:50:32 +0800
Subject: [antlr-interest] Help!
Message-ID: <df252c050705081750i674023f3ia8ca3895aa3191a1@mail.gmail.com>

Hi, who can tell me where I can find the analyzing documents about the
code generated by antlr.

Best regards,
Frank

From antlr-list at arizona-software.ch  Tue May  8 23:06:50 2007
From: antlr-list at arizona-software.ch (Jean Bovet)
Date: Tue, 8 May 2007 23:06:50 -0700
Subject: [antlr-interest] Problems with AntlrWorks 1.0b11
In-Reply-To: <ab0bf2c00705081230j4df530cfue048fd7c1a6d2555@mail.gmail.com>
References: <E344C433F006AB45A306D422F9C3EB4C01D2702E@exmail1.finjan.com>
	<ab0bf2c00705081230j4df530cfue048fd7c1a6d2555@mail.gmail.com>
Message-ID: <78A8C26C-A191-420D-8F7B-65F63208F55C@arizona-software.ch>

This pattern is not recognized by ANTLRWorks (at least not yet). I  
opened an issue (AW-43) for that.

Regards,

Jean

On May 8, 2007, at 12:30 PM, Miguel Ping wrote:

> My guess is that antlworks does not perform the same verifications  
> that the antlr tool performs, but I'm not sure. Maybe mr Jean can  
> shed some light on the subject ;) I always rely on antlr tool, and  
> use antlrworks primarily as editor/debugger and for quick  
> verification of sintactic errors.
>
> As for elimination of left recursion, I wonder if there isn't an  
> algorithm that can solve the left recursion where it can be  
> determined programmatically, like in your case:
>
> funcall:
>             IDENT+;
>
> I guess its fundamentally graph theory problem.
>
>
> On 5/8/07, Shmuel Siegel <ssiegel at finjan.com> wrote:
> I created the following grammar to study the elimination of left  
> recursion. I have two issues with AntlrWorks.
>
>
> When I check grammar, I get a popup that says "Check Grammar  
> Succeeded" gut the console says "Aborting because the following  
> rules are mutually left recursive. [funcCall]"
> When I try the "Refactor" method to eliminate left recursion, it  
> tells me that the method doesn't have left recursion.
>
> grammar boo;
>
>
> funcCall
>
>             :           (IDENT | funcCall) list;
>
> list:       '(' IDENT ')';
>
>
> IDENT
>
>             :           'XXX';
>
>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070508/946c4b06/attachment.html 

From antlr at mirality.co.nz  Wed May  9 03:01:01 2007
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Wed, 09 May 2007 22:01:01 +1200
Subject: [antlr-interest] Antlr 3.0b7 internal error
In-Reply-To: <960467.72309.qm@web26503.mail.ukl.yahoo.com>
References: <960467.72309.qm@web26503.mail.ukl.yahoo.com>
Message-ID: <20070509100051.23D2619078A@www.antlr.org>

At 18:00 9/05/2007, you wrote:
 >When CSharp target is not supported yet, why there are
 >generated csharp files?

It has partial support, but it's not up to date.

 >Is it known when csharp targets will be supported?

Don't ask me :)


From gilbert.williams at prosync.com  Wed May  9 03:00:49 2007
From: gilbert.williams at prosync.com (Bert Williams)
Date: Wed, 9 May 2007 06:00:49 -0400
Subject: [antlr-interest] ANTLR/AspectJ -- Parser Class Size Too Large??
Message-ID: <00a201c79220$ec36c690$b982e6cd@tsitelsys.com>

Greetings All:

 

I just tried to convert my parser project so that it is an AspectJ project
using Eclipse 3.2.2, ANTLR 3.06b, and a reasonably small grammar.

 

I get the error

 

problem generating method com.prosync.PMAP.regexp.<clinit> : Code size too
big: 84525 

 

I may be able to suppress this error by excluding the generated parser from
the aspects I am generating; however, I am asking the list if anyone has run
into the size problem in their work and if there is a way to get ANTLR to
generate the parser in a fashion that produces multiple .java files to
mitigate this issue.  I don't really think that this is an ANTLR issue, but
if someone wrote a really complex grammar, it might be.

 

Thanks and have a great day!

 

Bert Williams

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070509/d743f9a3/attachment.html 

From jaluber at gmx.de  Wed May  9 03:05:13 2007
From: jaluber at gmx.de (Johannes Luber)
Date: Wed, 09 May 2007 12:05:13 +0200
Subject: [antlr-interest] Antlr 3.0b7 internal error
In-Reply-To: <20070509100051.23D2619078A@www.antlr.org>
References: <960467.72309.qm@web26503.mail.ukl.yahoo.com>
	<20070509100051.23D2619078A@www.antlr.org>
Message-ID: <46419CD9.80905@gmx.de>

Gavin Lambert wrote:
> At 18:00 9/05/2007, you wrote:
>>When CSharp target is not supported yet, why there are
>>generated csharp files?
> 
> It has partial support, but it's not up to date.
> 
>>Is it known when csharp targets will be supported?
> 
> Don't ask me :)
> 

The current Daily Build of ANTLR supports C# fully again, but you may
have to generate the code manually if you can't configure ANTLRworks to
use this version instead. Jean Bovet said it would be possible but I
haven't found out yet, how to do so.

Best regards,
Johannes Luber

From jimi at temporal-wave.com  Wed May  9 08:47:21 2007
From: jimi at temporal-wave.com (Jim Idle)
Date: Wed, 9 May 2007 08:47:21 -0700
Subject: [antlr-interest] Help!
In-Reply-To: <df252c050705081750i674023f3ia8ca3895aa3191a1@mail.gmail.com>
References: <df252c050705081750i674023f3ia8ca3895aa3191a1@mail.gmail.com>
Message-ID: <B36CCC332A32904F8FA3DE134A2353362524B0@wavemachine.temporal-wave.com>

Depends what you are looking for really - do you mean just how to call it, or what it does internally? Ter has begun the process of providing the API documentation, but I will leave it to him as to when he wishes to announce the location of this as it is a work in progress at the moment.

You can always look at the source code itself of course, and if you just want to know how to call the generated code etc, you can use the code in the downloadable examples.

Jim

> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of ???
> Sent: Tuesday, May 08, 2007 5:51 PM
> To: antlr-interest
> Subject: [antlr-interest] Help!
> 
> Hi, who can tell me where I can find the analyzing documents about the
> code generated by antlr.
> 
> Best regards,
> Frank

From jimi at temporal-wave.com  Wed May  9 08:48:36 2007
From: jimi at temporal-wave.com (Jim Idle)
Date: Wed, 9 May 2007 08:48:36 -0700
Subject: [antlr-interest] Antlr 3.0b7 internal error
In-Reply-To: <20070509100051.23D2619078A@www.antlr.org>
References: <960467.72309.qm@web26503.mail.ukl.yahoo.com>
	<20070509100051.23D2619078A@www.antlr.org>
Message-ID: <B36CCC332A32904F8FA3DE134A2353362524B1@wavemachine.temporal-wave.com>

I understand that the C# target is up to date now, so long as you are
using the latest snapshot and the latest assemblies.

Jim

> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of Gavin Lambert
> Sent: Wednesday, May 09, 2007 3:01 AM
> To: Christian Ulrich
> Cc: ANTLR Interest
> Subject: Re: [antlr-interest] Antlr 3.0b7 internal error
> 
> At 18:00 9/05/2007, you wrote:
>  >When CSharp target is not supported yet, why there are
>  >generated csharp files?
> 
> It has partial support, but it's not up to date.
> 
>  >Is it known when csharp targets will be supported?
> 
> Don't ask me :)


From jimi at temporal-wave.com  Wed May  9 08:53:40 2007
From: jimi at temporal-wave.com (Jim Idle)
Date: Wed, 9 May 2007 08:53:40 -0700
Subject: [antlr-interest] Antlr 3.0b7 internal error
In-Reply-To: <46419CD9.80905@gmx.de>
References: <960467.72309.qm@web26503.mail.ukl.yahoo.com><20070509100051.23D2619078A@www.antlr.org>
	<46419CD9.80905@gmx.de>
Message-ID: <B36CCC332A32904F8FA3DE134A2353362524B2@wavemachine.temporal-wave.com>

Easiest way is to extract the antlrworks jar, delete the antlr that is
extracted, insert the new one and either re-jar or set your class path
to use it expanded.

Jim

> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of Johannes Luber
> Sent: Wednesday, May 09, 2007 3:05 AM
> To: ANTLR Interest
> Subject: Re: [antlr-interest] Antlr 3.0b7 internal error
> 
> Gavin Lambert wrote:
> > At 18:00 9/05/2007, you wrote:
> >>When CSharp target is not supported yet, why there are
> >>generated csharp files?
> >
> > It has partial support, but it's not up to date.
> >
> >>Is it known when csharp targets will be supported?
> >
> > Don't ask me :)
> >
> 
> The current Daily Build of ANTLR supports C# fully again, but you may
> have to generate the code manually if you can't configure ANTLRworks
to
> use this version instead. Jean Bovet said it would be possible but I
> haven't found out yet, how to do so.
> 
> Best regards,
> Johannes Luber

From a.shneyderman at gmail.com  Wed May  9 09:56:54 2007
From: a.shneyderman at gmail.com (Alex Shneyderman)
Date: Wed, 9 May 2007 18:56:54 +0200
Subject: [antlr-interest] Trouble with grammar
Message-ID: <693a69ba0705090956y3032a315i47ae77a481884a53@mail.gmail.com>

I am testing out ANTLR3 and ran into a problem I do not understand;

here is a simple grammar:
grammar GSP;

gspTag
:
     '<' NS ':' TAG '>' TEXT '</' NS ':' TAG '>'
;

TEXT: (~'<')+;
NS:  (~':')+ ;
TAG: ('a'..'z'|'A'..'Z')+;

WS: (' '|'\t'|'\r'|'\n')+ {skip();} ;

On this input:

<g:test>adfas</g:test>

recognizer gives me the following messages:

line 1:0 mismatched input '<g' expecting '<'
line 1:2 mismatched input ':test>adfas' expecting ':'

anyone knows what is wrong here.

From tedv at esrconsulting.com  Wed May  9 10:50:51 2007
From: tedv at esrconsulting.com (Ted Villalba)
Date: Wed, 9 May 2007 10:50:51 -0700
Subject: [antlr-interest] Newbie tree grammar question and rewrite rules
Message-ID: <200705091750.l49Hoo6b088074@pro36.abac.com>

Hi,
 
I'm a little slow to pickup the concepts of the tree grammar, and looking
perhaps for some hints. I probably need to read through the chapter in the
ANTLR Reference a few more times, but in the meantime am hoping for some
guidance.
I have a fairly simple grammar which I include below, and one line with
which I am struggling is the following:
 
query :  (field | qid | LPAREN query RPAREN)  (BOOL_OP^ query  )*
      ;
 
It seems the simplest way to create a tree grammar is to simply cut and
paste the AST rewrite rules , so I considered rewriting the above, using an
AST rewrite rule. My question is, is there necessarily a rewrite rule that
can replace AST construction operators, and is this the generally
recommended approach - to have a rewrite rule for every alternative?
 
Thanks for your help,
Ted
 
P.S.
Here is the grammar I am working with:
 
grammar QueryParser;
 
options{
    k=1;
    output=AST;
    ASTLabelType=CommonTree;
}
 
// START:query
start      :           (query
{System.out.println($query.tree.toStringTree());} )+;
query :  (field | qid | LPAREN query RPAREN)  (BOOL_OP^ query  )*
      ;
 
field : tag '=' value -> ^('=' tag value)      ;
 
value : (term | LPAREN value RPAREN) (WOK_OP^ value )*       ;
 
term : WCHAR+
     | '"' WCHAR+ '"'
     ;
 
tag : WCHAR+ ;
 
qid : '#'DIGIT+ ;
 
 
BOOL_OP :       ' AND '|' OR '|' NOT ';
WOK_OP :       ' SAME ' | ' NEAR ';
DIGIT   :       ('0'..'9');
LPAREN  :       '(' ;
RPAREN  :       ')' ;
WCHAR   :       ('0'..'9'|'a'..'z'|'A'..'Z'|' ');
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070509/c2067ace/attachment.html 

From christianhofmann_de at yahoo.de  Wed May  9 10:57:58 2007
From: christianhofmann_de at yahoo.de (Christian Ulrich)
Date: Wed, 9 May 2007 19:57:58 +0200 (CEST)
Subject: [antlr-interest] AntlrWorks and CSharp
Message-ID: <129152.12958.qm@web26514.mail.ukl.yahoo.com>

Hello,

could anyone tell me if it is possible to configure
AntlrWorks to generate CSharp (or C++) code?
Maybe there are some documentations.

Regards
Christian


      __________________________________  Yahoo! Clever: Stellen Sie Fragen und finden Sie Antworten. Teilen Sie Ihr Wissen. www.yahoo.de/clever


From laguest at archangeli.demon.co.uk  Wed May  9 11:13:07 2007
From: laguest at archangeli.demon.co.uk (Luke A. Guest)
Date: Wed, 09 May 2007 19:13:07 +0100
Subject: [antlr-interest] Writing a new backend for v3
Message-ID: <1178734388.25026.5.camel@rogue>

Hi,

Just how hard is it to add new backend for an unsupported language in v3
of ANTLR? Where would somebody start?

Thanks,
Luke.



From open.zone at virgin.net  Wed May  9 12:14:10 2007
From: open.zone at virgin.net (Micheal J)
Date: Wed, 9 May 2007 20:14:10 +0100
Subject: [antlr-interest] AntlrWorks and CSharp
In-Reply-To: <129152.12958.qm@web26514.mail.ukl.yahoo.com>
Message-ID: <002801c7926e$3bb4f000$c704a8c0@hercules>

Hi,

> could anyone tell me if it is possible to configure
> AntlrWorks to generate CSharp (or C++) code?
> Maybe there are some documentations.

ANTLR is responsible for all code generation. AntlrWorks is distributed with
it's own private copy of ANTLR that it uses.

C++ code generation is currently a work in progress for ANTLR v3.

C# code generation is supported in the latest "daily build" for ANTLR v3
but, the latest version of AntlrWorks includes an earlier version of ANTLR
that does not support C# code generation.

My advice (until a new AntlrWorks is released) is to develop/test your
grammar - minus action code - using AntlrWorks without specifying a target
language (this default to Java). Once you are happy with your grammar, use
the latest build of ANTLR to generate your C# recognizers (you need to
specify a target language in your .g file for this). The wiki has
information on how to use ANTLR to generate code.


Micheal


From antlr at mirality.co.nz  Wed May  9 13:23:14 2007
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Thu, 10 May 2007 08:23:14 +1200
Subject: [antlr-interest] Trouble with grammar
In-Reply-To: <693a69ba0705090956y3032a315i47ae77a481884a53@mail.gmail.co
 m>
References: <693a69ba0705090956y3032a315i47ae77a481884a53@mail.gmail.com>
Message-ID: <20070509202313.D4996190436@www.antlr.org>

At 04:56 10/05/2007, Alex Shneyderman wrote:
 >gspTag
 >:
 >     '<' NS ':' TAG '>' TEXT '</' NS ':' TAG '>'
 >;
 >
 >TEXT: (~'<')+;
 >NS:  (~':')+ ;
 >TAG: ('a'..'z'|'A'..'Z')+;
 >
 >WS: (' '|'\t'|'\r'|'\n')+ {skip();} ;
 >
 >On this input:
 >
 ><g:test>adfas</g:test>

Lexing is performed prior to any parsing, and the three tokens 
TEXT, NS, and TAG are nearly indistinguishable from each other 
(you should have gotten ambiguity warnings about that).  So 
letters such as 'g' can end up part of any of the three tags, not 
necessarily NS.  And in fact the entire sequence 'g:test>adfas' 
could be made into a single TEXT token.  (What's most likely 
happening though is that '<g' is turned into an NS and then 
':test>adfas' into a TEXT, and so forth.)

You need to do your lexing in a context-free manner -- eg. make 
separate tokens for groups of alphanumeric text and the various 
symbols you're trying to recognise.  (You can make separate tokens 
for letters and numbers if you want to, and combine them later, 
but at least for the grammar above that doesn't seem 
necessary.)  You should try to avoid overlaps between tokens 
wherever possible.

Have a look at the examples supplied with ANTLR.


From thiago.oliveira20+antlr at gmail.com  Wed May  9 13:31:03 2007
From: thiago.oliveira20+antlr at gmail.com (Thiago Oliveira)
Date: Wed, 9 May 2007 17:31:03 -0300
Subject: [antlr-interest] ASTVistor v3
In-Reply-To: <d2c6e5060705081235q2e972c92m3979c52a45bcd52d@mail.gmail.com>
References: <d2c6e5060705081230i2f714f5bm4ae44ea3d64a437d@mail.gmail.com>
	<d2c6e5060705081235q2e972c92m3979c52a45bcd52d@mail.gmail.com>
Message-ID: <d2c6e5060705091331n5a504766o82888d3ba869d229@mail.gmail.com>

Thanks a lot...

On 5/8/07, Thiago Oliveira <thiago.oliveira20+antlr at gmail.com> wrote:
>
> Hi,
>
> I am a student from Brazil, graduating in Computer Science. I am involved
> in a project for a security verifier for Java source codes in which we use
> the antlr project, especially the Visitor issue. Nonetheless, we could not
> find enough documentation about the usage of the class ASTVisitor together
> with the java parser. All we were able to do until now was a simple parsing
> of java file and an unsuccesful tree walking... =(
> Could you possibly indicate a place where we could find more detailed
> information about the usage of ASTVisitors and Java Parsers?
>
> --
> Thiago Oliveira
> Human Resources Director
> Empresa J?nior de Computa??o - CJr
> University of Brasilia
> Brasilia
> Brazil
> +55 (61) 8447 8868
> http://www.cjr.org.br
> cjr at cjr.org.br
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070509/c2d310ad/attachment.html 

From fabiomaulo at gmail.com  Wed May  9 15:23:33 2007
From: fabiomaulo at gmail.com (Fabio Maulo)
Date: Wed, 09 May 2007 19:23:33 -0300
Subject: [antlr-interest] ANTLR3 C# InvariantCultureIgnoreCase
Message-ID: <464249E5.3000009@gmail.com>

In C#, version for ANTLR3, can we have an option to use 
System.StringComparison for rule and grammar options?

Basically for InvariantCultureIgnoreCase to emulete old caseSensitive 
option.

Fabio.

From porcelli at uol.com.br  Wed May  9 15:34:43 2007
From: porcelli at uol.com.br (Alexandre Porcelli)
Date: Wed, 9 May 2007 19:34:43 -0300
Subject: [antlr-interest] ANTLR3 C# InvariantCultureIgnoreCase
In-Reply-To: <464249E5.3000009@gmail.com>
References: <464249E5.3000009@gmail.com>
Message-ID: <ee873c070705091534m7e17621g44277267f8181531@mail.gmail.com>

I think this URL answers better your question :
http://www.antlr.org/wiki/pages/viewpage.action?pageId=1782

On 5/9/07, Fabio Maulo <fabiomaulo at gmail.com> wrote:
> In C#, version for ANTLR3, can we have an option to use
> System.StringComparison for rule and grammar options?
>
> Basically for InvariantCultureIgnoreCase to emulete old caseSensitive
> option.
>
> Fabio.
>

From fabiomaulo at gmail.com  Wed May  9 15:46:22 2007
From: fabiomaulo at gmail.com (Fabio Maulo)
Date: Wed, 09 May 2007 19:46:22 -0300
Subject: [antlr-interest] ANTLR3 C# InvariantCultureIgnoreCase
In-Reply-To: <ee873c070705091534m7e17621g44277267f8181531@mail.gmail.com>
References: <464249E5.3000009@gmail.com>
	<ee873c070705091534m7e17621g44277267f8181531@mail.gmail.com>
Message-ID: <46424F3E.5070808@gmail.com>

Thanks. I just know the URL....

well.... an embedded ANTLRInvariantCultureIgnoreCaseInputStream directly in Antlr3.Runtime.dll for .NET 2.0 ?

I think many people appreciate it.
Fabio.


Alexandre Porcelli escribi?:
> I think this URL answers better your question :
> http://www.antlr.org/wiki/pages/viewpage.action?pageId=1782
>
> On 5/9/07, Fabio Maulo <fabiomaulo at gmail.com> wrote:
>> In C#, version for ANTLR3, can we have an option to use
>> System.StringComparison for rule and grammar options?
>>
>> Basically for InvariantCultureIgnoreCase to emulete old caseSensitive
>> option.
>>
>> Fabio.
>>
>


From hwk.cortex-brainware at t-online.de  Wed May  9 15:52:56 2007
From: hwk.cortex-brainware at t-online.de (Dr. Hartmut Kocher)
Date: Thu, 10 May 2007 00:52:56 +0200
Subject: [antlr-interest] ANTLR3 C# InvariantCultureIgnoreCase
In-Reply-To: <46424F3E.5070808@gmail.com>
References: <464249E5.3000009@gmail.com><ee873c070705091534m7e17621g44277267f8181531@mail.gmail.com>
	<46424F3E.5070808@gmail.com>
Message-ID: <001a01c7928c$c994fe10$1d00000a@kocher>

Here is a solution for C#:

/// <summary>
    /// Look ahead for tokenizing is all lowercase, whereas the original
case of e input stream is preserved.
    /// </summary>
    public class CaseInsensitiveStringStream : ANTLRStringStream {
        public CaseInsensitiveStringStream(char[] data, int
numberOfActualCharsInArray) : base(data, numberOfActualCharsInArray) {}
        public CaseInsensitiveStringStream() {}
        public CaseInsensitiveStringStream(string input) : base(input) {}

        public override int LA(int i) {
            if (i == 0) {
                return 0;
            }
            if (i < 0) {
                i++;
            }
            if (((p + i) - 1) >= n) {
                return (int) CharStreamConstants.EOF;
            }
            return Char.ToLowerInvariant(data[(p + i) - 1]);
        }
    }

Works for me...

Regards

Dr. Hartmut Kocher
Cortex Brainware Consulting & Training GmbH
Kirchplatz 5
D-82049 Pullach

Tel: +49 (89) 744  850 0
Fax: +49 (89) 744  850 11

http://www.cortex-brainware.de
Handelsregister:
Registergericht: Amtsgericht M?nchen
HRB-Nr. 120614

Vertretungsberechtigte Gesch?ftsf?hrer:
Dipl.-Inform. Dorothea Burger, Dr.-Ing. Hartmut Kocher, Dr.-Ing. Martin
Lang, Dr. rer. nat. Rolf Peter Wehrum  

-----Urspr?ngliche Nachricht-----
Von: antlr-interest-bounces at antlr.org
[mailto:antlr-interest-bounces at antlr.org] Im Auftrag von Fabio Maulo
Gesendet: Donnerstag, 10. Mai 2007 00:46
An: antlr-interest at antlr.org
Betreff: Re: [antlr-interest] ANTLR3 C# InvariantCultureIgnoreCase

Thanks. I just know the URL....

well.... an embedded ANTLRInvariantCultureIgnoreCaseInputStream directly in
Antlr3.Runtime.dll for .NET 2.0 ?

I think many people appreciate it.
Fabio.


Alexandre Porcelli escribi?:
> I think this URL answers better your question :
> http://www.antlr.org/wiki/pages/viewpage.action?pageId=1782
>
> On 5/9/07, Fabio Maulo <fabiomaulo at gmail.com> wrote:
>> In C#, version for ANTLR3, can we have an option to use
>> System.StringComparison for rule and grammar options?
>>
>> Basically for InvariantCultureIgnoreCase to emulete old caseSensitive
>> option.
>>
>> Fabio.
>>
>




From miguel.ping at gmail.com  Wed May  9 16:11:38 2007
From: miguel.ping at gmail.com (Miguel Ping)
Date: Thu, 10 May 2007 00:11:38 +0100
Subject: [antlr-interest] ASTVistor v3
In-Reply-To: <d2c6e5060705091331n5a504766o82888d3ba869d229@mail.gmail.com>
References: <d2c6e5060705081230i2f714f5bm4ae44ea3d64a437d@mail.gmail.com>
	<d2c6e5060705081235q2e972c92m3979c52a45bcd52d@mail.gmail.com>
	<d2c6e5060705091331n5a504766o82888d3ba869d229@mail.gmail.com>
Message-ID: <ab0bf2c00705091611t62dd593ej93903b1576a90e9d@mail.gmail.com>

Well, since you insist...

I don't know if antlr v3 supports directly an ASTVisitor, but it's extremely
easy to implement your own, if you are familiar with the visitor pattern.
Can you post some details on why you couldn't make a tree walker? Btw, are
you parsing java source files?

On 5/9/07, Thiago Oliveira <thiago.oliveira20+antlr at gmail.com> wrote:
>
> Thanks a lot...
>
> On 5/8/07, Thiago Oliveira <thiago.oliveira20+antlr at gmail.com> wrote:
> >
> > Hi,
> >
> > I am a student from Brazil, graduating in Computer Science. I am
> > involved in a project for a security verifier for Java source codes in which
> > we use the antlr project, especially the Visitor issue. Nonetheless, we
> > could not find enough documentation about the usage of the class ASTVisitor
> > together with the java parser. All we were able to do until now was a simple
> > parsing of java file and an unsuccesful tree walking... =(
> > Could you possibly indicate a place where we could find more detailed
> > information about the usage of ASTVisitors and Java Parsers?
> >
> > --
> > Thiago Oliveira
> > Human Resources Director
> > Empresa J?nior de Computa??o - CJr
> > University of Brasilia
> > Brasilia
> > Brazil
> > +55 (61) 8447 8868
> > http://www.cjr.org.br
> > cjr at cjr.org.br
> >
> >
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070510/59e0613d/attachment.html 

From parrt at cs.usfca.edu  Wed May  9 18:27:05 2007
From: parrt at cs.usfca.edu (Terence Parr)
Date: Wed, 9 May 2007 18:27:05 -0700
Subject: [antlr-interest] ANTLR3 C# InvariantCultureIgnoreCase
In-Reply-To: <001a01c7928c$c994fe10$1d00000a@kocher>
References: <464249E5.3000009@gmail.com><ee873c070705091534m7e17621g44277267f8181531@mail.gmail.com>
	<46424F3E.5070808@gmail.com>
	<001a01c7928c$c994fe10$1d00000a@kocher>
Message-ID: <FE8A420C-D65A-4398-8941-3F49B446A17D@cs.usfca.edu>

can you post that to the wiki? (i.e., edit that page)?
Thanks,
Ter


From fabiomaulo at gmail.com  Wed May  9 21:25:43 2007
From: fabiomaulo at gmail.com (Fabio Maulo)
Date: Thu, 10 May 2007 01:25:43 -0300
Subject: [antlr-interest] ANTLR3 C# InvariantCultureIgnoreCase
In-Reply-To: <001a01c7928c$c994fe10$1d00000a@kocher>
References: <464249E5.3000009@gmail.com><ee873c070705091534m7e17621g44277267f8181531@mail.gmail.com>
	<46424F3E.5070808@gmail.com>
	<001a01c7928c$c994fe10$1d00000a@kocher>
Message-ID: <46429EC7.1080607@gmail.com>

Dr. Hartmut Kocher escribi?:
> Here is a solution for C#
The CaseInsensitiveStringStream work even if I need *caseSensitive* Idents ?

Ident: Letter (Letter|'0'..'9')*;

I mean...
I need that a token like ORDER='order' must match with :
Order, oRder, oRdER ... and so on
But the a word like AnIdentifier must be different than anIdentifier.

In my lenguage keyWords are CaseInsensitive but identifiers are 
CaseSensitive.

Fabio.


From klists at saphor.de  Wed May  9 23:46:42 2007
From: klists at saphor.de (Marc)
Date: Thu, 10 May 2007 08:46:42 +0200
Subject: [antlr-interest] C-target
Message-ID: <4642BFD2.4020500@saphor.de>

Hello!

When trying out the new C target for antlr 3 on Mac OS X, using the
antlr version dated 5th of May, I run into the problem of not finding a
configure script to build the C runtime. However, I have no clue as to
the correct dependency order of the files to compile them successfully.

I have consulted
http://www.antlr.org/wiki/display/ANTLR3/Using+the+ANTLR3+C+Target and 
http://www.antlr.org/wiki/display/ANTLR3/ANTLR3+Code+Generation+-+C, but
they assume the presence of the configure script. I could probably
create one from  configure.ac myself, except that I have only autoconf
2.59 on my machine and configure.ac requires autoconf 2.6. Before
updating now on a large scale, I'd like to check if others have had the
same issue.

Thanks in advance for any pointer!

Best regards,

Marc

From h.kocher at pharmatechnik.de  Thu May 10 00:08:10 2007
From: h.kocher at pharmatechnik.de (Dr. Kocher, Hartmut)
Date: Thu, 10 May 2007 09:08:10 +0200
Subject: [antlr-interest] ANTLR3 C# InvariantCultureIgnoreCase
In-Reply-To: <FE8A420C-D65A-4398-8941-3F49B446A17D@cs.usfca.edu>
References: <464249E5.3000009@gmail.com><ee873c070705091534m7e17621g44277267f8181531@mail.gmail.com><46424F3E.5070808@gmail.com><001a01c7928c$c994fe10$1d00000a@kocher>
	<FE8A420C-D65A-4398-8941-3F49B446A17D@cs.usfca.edu>
Message-ID: <D43540A44D3F794787378D8B08E8AE53012D245C@staexc01.pharmatechnik.de>

Done.
Regards
Hartmut

-----Urspr?ngliche Nachricht-----
Von: antlr-interest-bounces at antlr.org [mailto:antlr-interest-bounces at antlr.org] Im Auftrag von Terence Parr
Gesendet: Donnerstag, 10. Mai 2007 03:27
An: ANTLR Interest
Betreff: Re: [antlr-interest] ANTLR3 C# InvariantCultureIgnoreCase

can you post that to the wiki? (i.e., edit that page)?
Thanks,
Ter



--------------------------------------------------------------------
Pharmatechnik GmbH & Co. KG
M?nchner Stra?e 15
D-82319 Starnberg

Sitz der Gesellschaft: Starnberg
HRA: 64434, HRB: 66369, Amtsgericht M?nchen
Gesch?ftsf?hrer: Dr. Detlef Graessner, Stephan J?rgens, Dr. Mathias Schindl

From h.kocher at pharmatechnik.de  Thu May 10 00:12:49 2007
From: h.kocher at pharmatechnik.de (Dr. Kocher, Hartmut)
Date: Thu, 10 May 2007 09:12:49 +0200
Subject: [antlr-interest] ANTLR3 C# InvariantCultureIgnoreCase
In-Reply-To: <46429EC7.1080607@gmail.com>
References: <464249E5.3000009@gmail.com><ee873c070705091534m7e17621g44277267f8181531@mail.gmail.com><46424F3E.5070808@gmail.com><001a01c7928c$c994fe10$1d00000a@kocher>
	<46429EC7.1080607@gmail.com>
Message-ID: <D43540A44D3F794787378D8B08E8AE53012D2465@staexc01.pharmatechnik.de>

Hi Fabio,

yes, you could still use this solution. Parsing is done in all lowercase (i.e. in your grammar you specify your keywords in all lowercase ("order"). Your identifiers will be matched as lower case. However, the original case is preserved in the token. Therefore, $Ident.text is still mixed case!

Hope this helps.

Regards
Hartmut

-----Urspr?ngliche Nachricht-----
Von: antlr-interest-bounces at antlr.org [mailto:antlr-interest-bounces at antlr.org] Im Auftrag von Fabio Maulo
Gesendet: Donnerstag, 10. Mai 2007 06:26
An: antlr-interest at antlr.org
Betreff: Re: [antlr-interest] ANTLR3 C# InvariantCultureIgnoreCase

Dr. Hartmut Kocher escribi?:
> Here is a solution for C#
The CaseInsensitiveStringStream work even if I need *caseSensitive* Idents ?

Ident: Letter (Letter|'0'..'9')*;

I mean...
I need that a token like ORDER='order' must match with :
Order, oRder, oRdER ... and so on
But the a word like AnIdentifier must be different than anIdentifier.

In my lenguage keyWords are CaseInsensitive but identifiers are 
CaseSensitive.

Fabio.



--------------------------------------------------------------------
Pharmatechnik GmbH & Co. KG
M?nchner Stra?e 15
D-82319 Starnberg

Sitz der Gesellschaft: Starnberg
HRA: 64434, HRB: 66369, Amtsgericht M?nchen
Gesch?ftsf?hrer: Dr. Detlef Graessner, Stephan J?rgens, Dr. Mathias Schindl

From otto at delta-barth.de  Thu May 10 00:23:25 2007
From: otto at delta-barth.de (Otto, Frank)
Date: Thu, 10 May 2007 09:23:25 +0200
Subject: [antlr-interest] parse "search criterion"
Message-ID: <3DC3A6FF87DCBD418C09476C317C568B01E4C000@yukon.delta.de>

Hi,

I want to parse a search criterion (with +, -, "", AND, OR) like "google" with antlr. For example:

Hello World
"Hello World"
Hello +World
Hello OR WORLD
Hello -World

But I have no idea, how I start. Has someone do this? Is there a simple tutorial for parsing search words? I haven't found one.


kind regards,

Frank

From a.shneyderman at gmail.com  Thu May 10 00:33:06 2007
From: a.shneyderman at gmail.com (Alex Shneyderman)
Date: Thu, 10 May 2007 09:33:06 +0200
Subject: [antlr-interest] What's the equivalent of v2's EOF in v3?
Message-ID: <693a69ba0705100033k496732eey947d05954ab5031f@mail.gmail.com>

?

Thanks.

From imus at linuxmail.org  Thu May 10 00:49:28 2007
From: imus at linuxmail.org (Isabelle Muszynski)
Date: Thu, 10 May 2007 15:49:28 +0800
Subject: [antlr-interest] What's the equivalent of v2's EOF in v3?
Message-ID: <20070510074928.343A0CA0A4@ws5-11.us4.outblaze.com>

The same : EOF

Isabelle

> ----- Original Message -----
> From: "Alex Shneyderman" <a.shneyderman at gmail.com>
> To: "ANTLR Interest" <antlr-interest at antlr.org>
> Subject: [antlr-interest] What's the equivalent of v2's EOF in v3?
> Date: Thu, 10 May 2007 09:33:06 +0200
> 
> 
> ?
> 
> Thanks.

>


=
Mother's Day Surprise
Express your love and make Mom feel special. Send a free Ecard.
http://a8-asy.a8ww.net/a8-ads/adftrclick?redirectid=42dc99071fa5ff03828d42dcd6b55cac


-- 
Powered by Outblaze

From Das.Linux at gmx.de  Thu May 10 01:05:13 2007
From: Das.Linux at gmx.de (Tobias Pape)
Date: Thu, 10 May 2007 10:05:13 +0200
Subject: [antlr-interest] C-target
In-Reply-To: <4642BFD2.4020500@saphor.de>
References: <4642BFD2.4020500@saphor.de>
Message-ID: <FF3BC446-A25A-47C9-B3B3-6ADD6448269A@gmx.de>

Hello Marc,

Am 2007-05-10 um 08:46 schrieb Marc:

> Hello!
>
> When trying out the new C target for antlr 3 on Mac OS X, using the
> antlr version dated 5th of May, I run into the problem of not  
> finding a
> configure script to build the C runtime. However, I have no clue as to
> the correct dependency order of the files to compile them  
> successfully.
>
>

Wich did you download?
Did you  use the antlr 3b7 tar.gz? or did you use an extract from the
Source Repository?

I cant confirm this, tho.

so long,
	-Tobias
-------------- next part --------------
A non-text attachment was scrubbed...
Name: PGP.sig
Type: application/pgp-signature
Size: 186 bytes
Desc: Signierter Teil der Nachricht
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20070510/40bada98/attachment.bin 

From klists at saphor.de  Thu May 10 02:59:30 2007
From: klists at saphor.de (Marc)
Date: Thu, 10 May 2007 11:59:30 +0200
Subject: [antlr-interest] C-target
In-Reply-To: <FF3BC446-A25A-47C9-B3B3-6ADD6448269A@gmx.de>
References: <4642BFD2.4020500@saphor.de>
	<FF3BC446-A25A-47C9-B3B3-6ADD6448269A@gmx.de>
Message-ID: <4642ED02.8020106@saphor.de>

Hello Tobias,
>
>
>>
>>
>> When trying out the new C target for antlr 3 on Mac OS X, using the
>> antlr version dated 5th of May, I run into the problem of not finding a
>> configure script to build the C runtime. However, I have no clue as to
>> the correct dependency order of the files to compile them successfully.
>>
>>
>
> Wich did you download?
> Did you  use the antlr 3b7 tar.gz? or did you use an extract from the
> Source Repository?
Thanks for your answer!

I've used the C-target coming with antlr in the daily build
*antlr-05-05-2007.13.tar.gz *
<http://www.antlr.org/download/build/antlr-05-05-2007.13.tar.gz>
I've now downloaded the version from FishEye and could compile it with
the minor issue that one header file, antlr3config.h, isn't present in
the include directory but in the one above it (a link solved that small
problem). Now I can compile the files generated by antlr all right.

Now I just need to wait for some text under
http://www.antlr.org/wiki/display/ANTLR3/Invoking+your+C+Recognizer on
invoking the recognizer from my C program or some examples on that to be
hopefully all set --- are there any out there?

Best regards,

Marc
>
> I cant confirm this, tho.
>
> so long,
>     -Tobias


From fabiomaulo at gmail.com  Thu May 10 05:30:12 2007
From: fabiomaulo at gmail.com (Fabio Maulo)
Date: Thu, 10 May 2007 09:30:12 -0300
Subject: [antlr-interest] ANTLR3 C# InvariantCultureIgnoreCase
In-Reply-To: <D43540A44D3F794787378D8B08E8AE53012D2465@staexc01.pharmatechnik.de>
References: <464249E5.3000009@gmail.com><ee873c070705091534m7e17621g44277267f8181531@mail.gmail.com><46424F3E.5070808@gmail.com><001a01c7928c$c994fe10$1d00000a@kocher>
	<46429EC7.1080607@gmail.com>
	<D43540A44D3F794787378D8B08E8AE53012D2465@staexc01.pharmatechnik.de>
Message-ID: <46431054.1060405@gmail.com>

Dr. Kocher, Hartmut escribi?:
> yes, you could still use this solution. Parsing is done in all lowercase (i.e. in your grammar you specify your keywords in all lowercase ("order"). Your identifiers will be matched as lower case. However, the original case is preserved in the token. Therefore, $Ident.text is still mixed case!
>
> Hope this helps
Thanks a lot, Doc!
Fabio.


From porcelli at uol.com.br  Thu May 10 07:18:42 2007
From: porcelli at uol.com.br (Alexandre Porcelli)
Date: Thu, 10 May 2007 11:18:42 -0300
Subject: [antlr-interest] Bug Report: AST operators not working when a file
	has the backtrack=true option
Message-ID: <ee873c070705100718q1831a42gcc9f7e8b404d7d4e@mail.gmail.com>

Hi All,

  I think I found a bug... when I try to add AST operators in my
grammar, I got the following error:

[11:12:44] error(100): Expr.g:0:0: syntax error: assign.types:
<AST>:0:0: unexpected end of subtree
[11:12:44] java.lang.ClassCastException: antlr.ASTNULLType cannot be
cast to org.antlr.tool.GrammarAST
	at org.antlr.tool.AssignTokenTypesWalker.block(AssignTokenTypesWalker.java:1215)
	at org.antlr.tool.AssignTokenTypesWalker.rule(AssignTokenTypesWalker.java:1030)
	at org.antlr.tool.AssignTokenTypesWalker.rules(AssignTokenTypesWalker.java:610)
	at org.antlr.tool.AssignTokenTypesWalker.grammarSpec(AssignTokenTypesWalker.java:492)
	at org.antlr.tool.AssignTokenTypesWalker.grammar(AssignTokenTypesWalker.java:363)
	at org.antlr.tool.Grammar.setGrammarContent(Grammar.java:540)
	at org.antlr.tool.Grammar.setGrammarContent(Grammar.java:490)
	at org.antlr.works.grammar.EngineGrammar.createNewGrammar(Unknown Source)
	at org.antlr.works.grammar.EngineGrammar.createCombinedGrammar(Unknown Source)
	at org.antlr.works.grammar.EngineGrammar.createGrammars(Unknown Source)
	at org.antlr.works.grammar.EngineGrammar.analyze(Unknown Source)
	at org.antlr.works.grammar.CheckGrammar.run(Unknown Source)
	at java.lang.Thread.run(Unknown Source)

  I could isolate the problem and I checked that it occurs just when
you have the backtrack option set to true and it happens just with
tree operators (it works with rewrite rules).
  Attached there is a sample grammar.

Best Regards,
Alexandre Porcelli
-------------- next part --------------
A non-text attachment was scrubbed...
Name: Expr.g
Type: application/octet-stream
Size: 594 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20070510/e0720da5/attachment.obj 

From jimi at temporal-wave.com  Thu May 10 08:54:18 2007
From: jimi at temporal-wave.com (Jim Idle)
Date: Thu, 10 May 2007 08:54:18 -0700
Subject: [antlr-interest] C-target
In-Reply-To: <4642BFD2.4020500@saphor.de>
References: <4642BFD2.4020500@saphor.de>
Message-ID: <B36CCC332A32904F8FA3DE134A2353362524E7@wavemachine.temporal-wave.com>

Marc,

The instructions say to download the distribution tgz, not the source
code tree. There is a dist subdirectory, in which there is a tgz, where
you should find the configure script already put together. Let me know
if this is not in the tgz.

Jim

> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of Marc
> Sent: Wednesday, May 09, 2007 11:47 PM
> To: antlr-interest at antlr.org
> Subject: [antlr-interest] C-target
> 
> Hello!
> 
> When trying out the new C target for antlr 3 on Mac OS X, using the
> antlr version dated 5th of May, I run into the problem of not finding
a
> configure script to build the C runtime. However, I have no clue as to
> the correct dependency order of the files to compile them
successfully.
> 
> I have consulted
> http://www.antlr.org/wiki/display/ANTLR3/Using+the+ANTLR3+C+Target and
> http://www.antlr.org/wiki/display/ANTLR3/ANTLR3+Code+Generation+-+C,
> but
> they assume the presence of the configure script. I could probably
> create one from  configure.ac myself, except that I have only autoconf
> 2.59 on my machine and configure.ac requires autoconf 2.6. Before
> updating now on a large scale, I'd like to check if others have had
the
> same issue.
> 
> Thanks in advance for any pointer!
> 
> Best regards,
> 
> Marc

From jimi at temporal-wave.com  Thu May 10 08:59:46 2007
From: jimi at temporal-wave.com (Jim Idle)
Date: Thu, 10 May 2007 08:59:46 -0700
Subject: [antlr-interest] C-target
In-Reply-To: <4642ED02.8020106@saphor.de>
References: <4642BFD2.4020500@saphor.de><FF3BC446-A25A-47C9-B3B3-6ADD6448269A@gmx.de>
	<4642ED02.8020106@saphor.de>
Message-ID: <B36CCC332A32904F8FA3DE134A2353362524E8@wavemachine.temporal-wave.com>

Marc,

antlr3config.h is generated by running the configure script and it
should be included in the include path at compile time, so I will need
to look at why it isn't. It has always worked for me ;-), what version
of the compiler are you using on your MAC?

There are complete examples in the examples download, however this
directory is not currently covered by Fisheye (though Ter said he had
requested that it would be), and I am not sure if the examples-v3 tar
you can download from the ANTLR 3 page yet contains these examples.
Ter?

Jim

> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of Marc
> Sent: Thursday, May 10, 2007 3:00 AM
> To: Tobias Pape
> Cc: antlr-interest at antlr.org
> Subject: Re: [antlr-interest] C-target
> 
> Hello Tobias,
> >
> >
> >>
> >>
> >> When trying out the new C target for antlr 3 on Mac OS X, using the
> >> antlr version dated 5th of May, I run into the problem of not
> finding a
> >> configure script to build the C runtime. However, I have no clue as
> to
> >> the correct dependency order of the files to compile them
> successfully.
> >>
> >>
> >
> > Wich did you download?
> > Did you  use the antlr 3b7 tar.gz? or did you use an extract from
the
> > Source Repository?
> Thanks for your answer!
> 
> I've used the C-target coming with antlr in the daily build
> *antlr-05-05-2007.13.tar.gz *
> <http://www.antlr.org/download/build/antlr-05-05-2007.13.tar.gz>
> I've now downloaded the version from FishEye and could compile it with
> the minor issue that one header file, antlr3config.h, isn't present in
> the include directory but in the one above it (a link solved that
small
> problem). Now I can compile the files generated by antlr all right.
> 
> Now I just need to wait for some text under
> http://www.antlr.org/wiki/display/ANTLR3/Invoking+your+C+Recognizer on
> invoking the recognizer from my C program or some examples on that to
> be
> hopefully all set --- are there any out there?
> 
> Best regards,
> 
> Marc
> >
> > I cant confirm this, tho.
> >
> > so long,
> >     -Tobias


From jimi at temporal-wave.com  Thu May 10 10:02:38 2007
From: jimi at temporal-wave.com (Jim Idle)
Date: Thu, 10 May 2007 10:02:38 -0700
Subject: [antlr-interest] C-target
References: <4642BFD2.4020500@saphor.de><FF3BC446-A25A-47C9-B3B3-6ADD6448269A@gmx.de>
	<4642ED02.8020106@saphor.de> 
Message-ID: <B36CCC332A32904F8FA3DE134A2353362524EB@wavemachine.temporal-wave.com>

Marc,

I double checked and the antlr3config.h file is produced in the main
directory, but when you run make (from top directory) it includes this
in the path. Don't try to c=build the library yourself...
groucho-~/antlrsrc/code/antlr/main/runtime/C/dist/libantlr3c-3.0.0-rc8:
make

groucho-~/antlrsrc/code/antlr/main/runtime/C/dist/libantlr3c-3.0.0-rc8:
find . -name antlr3config.h
./antlr3config.h

groucho-~/antlrsrc/code/antlr/main/runtime/C/dist/libantlr3c-3.0.0-rc8:
make
make --no-print-directory  all-am
/bin/sh ./libtool --tag=CC   --mode=compile gcc -DHAVE_CONFIG_H -I.
-Iinclude -Iinclude    -O2  -MT antlr3baserecognizer.lo -MD -MP -MF
.deps/antlr3baserecognizer.Tpo -c -o antlr3baserecognizer.lo `test -f
'src/antlr3baserecognizer.c' || echo './'`src/antlr3baserecognizer.c
mkdir .libs
...
ranlib .libs/libantlr3c.a
creating libantlr3c.la
(cd .libs && rm -f libantlr3c.la && ln -s ../libantlr3c.la
libantlr3c.la)

groucho-~/antlrsrc/code/antlr/main/runtime/C/dist/libantlr3c-3.0.0-rc8:
su
Password: 
groucho-~/antlrsrc/code/antlr/main/runtime/C/dist/libantlr3c-3.0.0-rc8:
make install
test -z "/usr/local/lib" || /bin/mkdir -p "/usr/local/lib"
 /bin/sh ./libtool --mode=install /usr/bin/install -c  'libantlr3c.la'
'/usr/local/lib/libantlr3c.la'
/usr/bin/install -c .libs/libantlr3c.so /usr/local/lib/libantlr3c.so
/usr/bin/install -c .libs/libantlr3c.lai /usr/local/lib/libantlr3c.la
/usr/bin/install -c .libs/libantlr3c.a /usr/local/lib/libantlr3c.a
chmod 644 /usr/local/lib/libantlr3c.a
ranlib /usr/local/lib/libantlr3c.a

Jim

> -----Original Message-----
> From: Jim Idle
> Sent: Thursday, May 10, 2007 9:00 AM
> To: 'Marc'; Tobias Pape
> Cc: antlr-interest at antlr.org
> Subject: RE: [antlr-interest] C-target
> 
> Marc,
> 
> antlr3config.h is generated by running the configure script and it
> should be included in the include path at compile time, so I will need
> to look at why it isn't. It has always worked for me ;-), what version
> of the compiler are you using on your MAC?
> 
> There are complete examples in the examples download, however this
> directory is not currently covered by Fisheye (though Ter said he had
> requested that it would be), and I am not sure if the examples-v3 tar
> you can download from the ANTLR 3 page yet contains these examples.
> Ter?
> 
> Jim
> 
> > -----Original Message-----
> > From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> > bounces at antlr.org] On Behalf Of Marc
> > Sent: Thursday, May 10, 2007 3:00 AM
> > To: Tobias Pape
> > Cc: antlr-interest at antlr.org
> > Subject: Re: [antlr-interest] C-target
> >
> > Hello Tobias,
> > >
> > >
> > >>
> > >>
> > >> When trying out the new C target for antlr 3 on Mac OS X, using
> the
> > >> antlr version dated 5th of May, I run into the problem of not
> > finding a
> > >> configure script to build the C runtime. However, I have no clue
> as
> > to
> > >> the correct dependency order of the files to compile them
> > successfully.
> > >>
> > >>
> > >
> > > Wich did you download?
> > > Did you  use the antlr 3b7 tar.gz? or did you use an extract from
> the
> > > Source Repository?
> > Thanks for your answer!
> >
> > I've used the C-target coming with antlr in the daily build
> > *antlr-05-05-2007.13.tar.gz *
> > <http://www.antlr.org/download/build/antlr-05-05-2007.13.tar.gz>
> > I've now downloaded the version from FishEye and could compile it
> with
> > the minor issue that one header file, antlr3config.h, isn't present
> in
> > the include directory but in the one above it (a link solved that
> small
> > problem). Now I can compile the files generated by antlr all right.
> >
> > Now I just need to wait for some text under
> > http://www.antlr.org/wiki/display/ANTLR3/Invoking+your+C+Recognizer
> on
> > invoking the recognizer from my C program or some examples on that
to
> > be
> > hopefully all set --- are there any out there?
> >
> > Best regards,
> >
> > Marc
> > >
> > > I cant confirm this, tho.
> > >
> > > so long,
> > >     -Tobias


From laguest at archangeli.demon.co.uk  Thu May 10 11:25:21 2007
From: laguest at archangeli.demon.co.uk (Luke A. Guest)
Date: Thu, 10 May 2007 19:25:21 +0100
Subject: [antlr-interest] Writing a new backend for v3
In-Reply-To: <1178734388.25026.5.camel@rogue>
References: <1178734388.25026.5.camel@rogue>
Message-ID: <1178821526.25026.8.camel@rogue>

On Wed, 2007-05-09 at 19:13 +0100, Luke A. Guest wrote:
> Hi,
> 
> Just how hard is it to add new backend for an unsupported language in v3
> of ANTLR? Where would somebody start?

I can't believe that there is no information on how to start a new
backend.

Thanks,
Luke.



From parrt at cs.usfca.edu  Thu May 10 11:30:01 2007
From: parrt at cs.usfca.edu (Terence Parr)
Date: Thu, 10 May 2007 11:30:01 -0700
Subject: [antlr-interest] Writing a new backend for v3
In-Reply-To: <1178821526.25026.8.camel@rogue>
References: <1178734388.25026.5.camel@rogue> <1178821526.25026.8.camel@rogue>
Message-ID: <870CD98E-F1C6-422D-9F45-29277B019EFB@cs.usfca.edu>

On May 10, 2007, at 11:25 AM, Luke A. Guest wrote:
> On Wed, 2007-05-09 at 19:13 +0100, Luke A. Guest wrote:
>> Hi,
>>
>> Just how hard is it to add new backend for an unsupported language  
>> in v3
>> of ANTLR? Where would somebody start?
>
> I can't believe that there is no information on how to start a new
> backend.

Yeah, I was hoping a target developer would keep some notes ;)

Basically, you have to copy the closest target templates and then  
alter them to conform to new target language.  Then you need to mimic  
the runtime library.  Getting some doc on that now.

Which language?

Ter

From ric.klaren at gmail.com  Thu May 10 11:34:58 2007
From: ric.klaren at gmail.com (Ric Klaren)
Date: Thu, 10 May 2007 20:34:58 +0200
Subject: [antlr-interest] Writing a new backend for v3
In-Reply-To: <1178734388.25026.5.camel@rogue>
References: <1178734388.25026.5.camel@rogue>
Message-ID: <bc607a4e0705101134l7e4ccf7ch9d1dca0367adba77@mail.gmail.com>

Hi,

On 5/9/07, Luke A. Guest <laguest at archangeli.demon.co.uk> wrote:
> Just how hard is it to add new backend for an unsupported language in v3
> of ANTLR? Where would somebody start?

AFAIK there's no docs on how things exactly work. Usually one would
start with the java templates (or the ones of a language that already
has been made and are more similar to your intended target). Then move
from there.

The starting point is in the source tree in org/antlr/codegen. You
need to create an adequate subclass of the Target class there (look at
the examples of the other targets)

In the templates subdir create a copy of a target that's most similar
to yours. ANTLRCore.sti gives an 'interface' of what minimally should
be implemented. It's probably best to concentrate on getting a lexer
going, then add the parser and extend from there on. I guess I'd study
the other runtimes/codegens before starting though.

Cheers,

Ric

From laguest at archangeli.demon.co.uk  Thu May 10 11:51:03 2007
From: laguest at archangeli.demon.co.uk (Luke A. Guest)
Date: Thu, 10 May 2007 19:51:03 +0100
Subject: [antlr-interest] Writing a new backend for v3
In-Reply-To: <1178734388.25026.5.camel@rogue>
References: <1178734388.25026.5.camel@rogue>
Message-ID: <1178823069.8388.3.camel@rogue>

On Wed, 2007-05-09 at 19:13 +0100, Luke A. Guest wrote:
> Hi,
> 
> Just how hard is it to add new backend for an unsupported language in v3
> of ANTLR? Where would somebody start?

Hmmm, having trouble with my mail server not downloading mail for some
reason, so this post will not thread properly as I'm reading the archive
on gmane.

Terence Parr wrote:

> Which language?

Ada95, 2005 isn't quite ready in GNAT, interfaces just kill the
compiler.

Luke.



From ma_laver at ciise.concordia.ca  Thu May 10 12:08:35 2007
From: ma_laver at ciise.concordia.ca (=?UTF-8?B?TWFyYy1BbmRyw6kgTGF2ZXJkacOocmU=?=)
Date: Thu, 10 May 2007 15:08:35 -0400
Subject: [antlr-interest] Dealing with issues in non-greedy (.)* rules
Message-ID: <46436DB3.4040806@ciise.concordia.ca>

Hello,

I just wanted to a) share a hack and b) ask for some help dealing with 
blob-matching rules.

I have the following rule:
sh_code_blob
	:	( options {greedy=false;} : . )*
            {if (false) throw new RecognitionException();};

a) you will notice the "if (false) throw new RecognitionException();"
This hack takes care of the compilation exception in the generated 
parser for this rule, since the generated code tries to catch an 
exception that won't ever be thrown.

I'm not impressed by Sun's compiler for not figuring out that invariant, 
but it works!

Ter, should we update the StringTemplate to include this by default? 
This would probably save you from having to have a different template 
just for this one case.

b) this rule will however emit error messages. These error messages will
refer to the last character match. The call reportError() is not called 
however. (I validated this)

Do we have a "quiet" option that we can set for this rule? I don't see 
anything in the documentation nor in the BaseRecognizer class.

Thanks in advance for the help. I hope that my hack will help someone.

Regards,

-- 
Marc-Andr? LAVERDI?RE, B. Eng., M. A. Sc. (in progress)
Computer Security Laboratory - Laboratoire de s?curit? informatique
CIISE, Universit? Concordia University, Montr?al, Qu?bec, Canada
www.ciise.concordia.ca

/"\
\ /    ASCII Ribbon Campaign
  X      against HTML e-mail
/ \

"Perseverance must finish its work so that you may be mature and 
complete, not lacking anything." -James 1:4


From vijai.kalyan at gmail.com  Thu May 10 12:49:51 2007
From: vijai.kalyan at gmail.com (Vijai Kalyan)
Date: Thu, 10 May 2007 14:49:51 -0500
Subject: [antlr-interest] Nondeterminism
Message-ID: <18b36e500705101249p1eaa9b7apd25c1183d42dbe0e@mail.gmail.com>

Hi All,
I have been trying to put together an expression grammar. I have got
most things right, but I still keep getting non-determinism warnings.
I looked around the mailing list archives as well as the jGuru forums,
but nothing seems to work. Here is my specification:

class FormulaParser extends Parser;

options
  {
  k = 1;
  }

statement : sumExpr EOI;
sumExpr   : prodExpr (|sumSubExpr);
sumSubExpr: PLUS prodExpr | MINUS prodExpr;
prodExpr  : unaryExpr (|prdSubExpr) ;
prdSubExpr: DIV unaryExpr | MUL unaryExpr;
unaryExpr : LB sumExpr RB | MINUS sumExpr | atom;
atom      : number | varorfunc;
varorfunc : ID (LB (argList)? RB)?;
argList   : specialarg | sumExpr ( | subArgList);
subArgList: COMMA sumExpr ( |subArgList);
number    : NUMBER;
specialarg: "PREVIOUS" | "ERROR" | "IGNORE";

class FormulaLexer extends Lexer;

options
  {
    k = 2;
    charVocabulary = '\0'..'\377';
  }

PLUS  : '+' ;
MINUS : '-' ;
MUL   : '*' ;
DIV   : '/' ;
LB    : '(';
RB    : ')';
COMMA : ',';
DOT   : '.';

WS: (' '|'\t')
    {$setType(Token.SKIP);}
  ;

EOI: ('\r' '\n' | '\n' | ';')
    ;

ID:
  ('a'..'z'|'A'..'Z')('a'..'z'|'A'..'Z'|'0'..'9'|'$'|'_'|"'")*
  ;

protected
INT:
  ('0'..'9')+
  ;

NUMBER:
  INT (DOT INT)?
  ;

I tried using syntactic predicates (maybe I am using them incorrectly)
as follows:

sumExpr   : prodExpr (|sumSubExpr);
sumSubExpr: (PLUS prodExpr) => PLUS prodExpr | (MINUS prodExpr) => prodExpr;

but that doesn't work anyway. Can someone tell what am I doing wrong here?

Thanks,

Vijai.

From klists at saphor.de  Thu May 10 12:53:51 2007
From: klists at saphor.de (Marc)
Date: Thu, 10 May 2007 21:53:51 +0200
Subject: [antlr-interest] C-target
In-Reply-To: <B36CCC332A32904F8FA3DE134A2353362524E8@wavemachine.temporal-wave.com>
References: <4642BFD2.4020500@saphor.de><FF3BC446-A25A-47C9-B3B3-6ADD6448269A@gmx.de>
	<4642ED02.8020106@saphor.de>
	<B36CCC332A32904F8FA3DE134A2353362524E8@wavemachine.temporal-wave.com>
Message-ID: <4643784F.9030105@saphor.de>

Jim,

> antlr3config.h is generated by running the configure script and it
> should be included in the include path at compile time, so I will need
> to look at why it isn't. It has always worked for me ;-), what version
> of the compiler are you using on your MAC?
>
>   
Many thanks! In fact, the compile of the library works smoothly. It is
compiling the antlr generated code against the library or rather against
its headers that gives this very minor problem --- but then, of course,
I could just add two include paths for the compile.
> There are complete examples in the examples download, however this
> directory is not currently covered by Fisheye (though Ter said he had
> requested that it would be), and I am not sure if the examples-v3 tar
> you can download from the ANTLR 3 page yet contains these examples.
> Ter?
>   
At least I couldn't find any examples in the Fisheye tar file and
http://www.antlr.org/download/examples-v3.tar.gz contains only C# and
Java examples...

Best regards,

Marc

> Jim
>
>   
>> -----Original Message-----
>> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
>> bounces at antlr.org] On Behalf Of Marc
>> Sent: Thursday, May 10, 2007 3:00 AM
>> To: Tobias Pape
>> Cc: antlr-interest at antlr.org
>> Subject: Re: [antlr-interest] C-target
>>
>> Hello Tobias,
>>     
>>>       
>>>> When trying out the new C target for antlr 3 on Mac OS X, using the
>>>> antlr version dated 5th of May, I run into the problem of not
>>>>         
>> finding a
>>     
>>>> configure script to build the C runtime. However, I have no clue as
>>>>         
>> to
>>     
>>>> the correct dependency order of the files to compile them
>>>>         
>> successfully.
>>     
>>>>         
>>> Wich did you download?
>>> Did you  use the antlr 3b7 tar.gz? or did you use an extract from
>>>       
> the
>   
>>> Source Repository?
>>>       
>> Thanks for your answer!
>>
>> I've used the C-target coming with antlr in the daily build
>> *antlr-05-05-2007.13.tar.gz *
>> <http://www.antlr.org/download/build/antlr-05-05-2007.13.tar.gz>
>> I've now downloaded the version from FishEye and could compile it with
>> the minor issue that one header file, antlr3config.h, isn't present in
>> the include directory but in the one above it (a link solved that
>>     
> small
>   
>> problem). Now I can compile the files generated by antlr all right.
>>
>> Now I just need to wait for some text under
>> http://www.antlr.org/wiki/display/ANTLR3/Invoking+your+C+Recognizer on
>> invoking the recognizer from my C program or some examples on that to
>> be
>> hopefully all set --- are there any out there?
>>
>> Best regards,
>>
>> Marc
>>     
>>> I cant confirm this, tho.
>>>
>>> so long,
>>>     -Tobias
>>>       
>
>
>
>   




From parrt at cs.usfca.edu  Thu May 10 13:04:08 2007
From: parrt at cs.usfca.edu (Terence Parr)
Date: Thu, 10 May 2007 13:04:08 -0700
Subject: [antlr-interest] Dealing with issues in non-greedy (.)* rules
In-Reply-To: <46436DB3.4040806@ciise.concordia.ca>
References: <46436DB3.4040806@ciise.concordia.ca>
Message-ID: <D7F1AFF5-6D60-400D-A55E-FF0A45EA5068@cs.usfca.edu>


On May 10, 2007, at 12:08 PM, Marc-Andr? Laverdi?re wrote:

> Hello,
>
> I just wanted to a) share a hack and b) ask for some help dealing  
> with blob-matching rules.
>
> I have the following rule:
> sh_code_blob
> 	:	( options {greedy=false;} : . )*
>            {if (false) throw new RecognitionException();};
>
> a) you will notice the "if (false) throw new RecognitionException();"
> This hack takes care of the compilation exception in the generated  
> parser for this rule, since the generated code tries to catch an  
> exception that won't ever be thrown.

Hmm... i think .+ would be better.  .* matches nothing, not a  
particularly useful input. ;)

that should remove error.

Ter


From ric.klaren at gmail.com  Thu May 10 14:44:45 2007
From: ric.klaren at gmail.com (Ric Klaren)
Date: Thu, 10 May 2007 23:44:45 +0200
Subject: [antlr-interest] Lots of memory leak with
	TokenStreamHiddenTokenFilter of C++ Target in Antlr 2.7x?
In-Reply-To: <20070508065152.13642.qmail@server314.com>
References: <20070508065152.13642.qmail@server314.com>
Message-ID: <bc607a4e0705101444s2f3d17y847261f8b2dbcd02@mail.gmail.com>

Hi,

On 5/8/07, service <service at sharpplus.com> wrote:
> recently I wanted to use TokenStreamHiddenTokenFilter it works as expected. But when I use boost to do some unit test, the boost reports lots of memory leaks. I do not know whether it is problem of my code or not . So I use the example preserveWhiteSpace shipped with antlr and do a little console project under vc7.1. the boost test framework report same problem. I do not know why. the following is the test program and the memory leak log.

..

> by the way , rewriteengine in antlr 2.7x c++ target has similar problem, but looks like not as serious as hidden filter.

Thanks for the report I'll look into it.

Cheers,

Ric

From professoryue at gmail.com  Fri May 11 02:29:26 2007
From: professoryue at gmail.com (Frank Yue)
Date: Fri, 11 May 2007 17:29:26 +0800
Subject: [antlr-interest] How to redirect the input stream?
Message-ID: <3888316b0705110229l78b2b92eg3bbeb7f4f7491031@mail.gmail.com>

HI, all !  I want to ask lexer  to scan another character stream
when EOF is reached . Documents provied by www.antlr.org give me
little information about how to redirect the  character stream.

               default:
                       {
                               if (LA(1)==EOF_CHAR)
                               {
                                       uponEOF();
                                       _returnToken =
makeToken(ANTLR_USE_NAMESPACE(antlr)Token::EOF_TYPE);
                               }

                               else
                              {
                                consume();
                                goto tryAgain;
                               }
                       }


detail of uponEOF( ) from CharScanner.hpp:
       virtual void uponEOF()
       {
       }
   note:uponEOF( ) does nothing in here .

       virtual RefToken makeToken(int t)
       {
               RefToken tok = tokenFactory();
               tok->setType(t);
               tok->setColumn(inputState->tokenStartColumn);
               tok->setLine(inputState->tokenStartLine);
               return tok;
       }
  note: Create a new RefToken of type t

I am looking forward to your early reply .

From ric.klaren at gmail.com  Fri May 11 04:21:24 2007
From: ric.klaren at gmail.com (Ric Klaren)
Date: Fri, 11 May 2007 13:21:24 +0200
Subject: [antlr-interest] How to redirect the input stream?
In-Reply-To: <3888316b0705110229l78b2b92eg3bbeb7f4f7491031@mail.gmail.com>
References: <3888316b0705110229l78b2b92eg3bbeb7f4f7491031@mail.gmail.com>
Message-ID: <bc607a4e0705110421p6a2300ffmfd64aff38c592473@mail.gmail.com>

Hi,

On 5/11/07, Frank Yue <professoryue at gmail.com> wrote:
> HI, all !  I want to ask lexer  to scan another character stream
> when EOF is reached .

Check out the includeFile example in examples/cpp/includeFile in the
distribution. A somewhat bigger example is available at:

http://pts14043.pts.nl/antlr/cppparser.tar.bz2

The latter is a very rough adaption of David Wiggs C++ grammar.
Basically a snapshot a piece of work in progress.

Not sure if there's a extra documentation, apart from comments in the
header files. (Might be that the java runtime is better documented
with respect to uponEOF).

Cheers,

Ric

From paul at paulkeir.com  Fri May 11 07:02:36 2007
From: paul at paulkeir.com (Paul Keir)
Date: Fri, 11 May 2007 15:02:36 +0100
Subject: [antlr-interest] token query
Message-ID: <4644777C.8060706@paulkeir.com>

Hi there,

First of all, please excuse the newbie. I have read the available docs 
and tuts; and intend to buy the antlr book. For now though, I have what 
I hope is a simple question.

In the code below, is there a way I can remove the 3 quoted strings in 
the rule 'my_rule'? - they seem a little redundant. I'm thinking, 
perhaps there's a way to use something _like_ {$name = 
tokens.STRING1.getName();}

One other thing, is [String name=null] now permitted? It seems to compile.

Many thanks and best regards,
Paul

tokens {
   STRING1='string1';
   STRING2='string2';
   STRING3='string3';
}

my_rule returns [String name]
@init {
   name=null; // for now you must init here rather than in 'returns'
}
   :   (    'string1' {$name = "string1";}
       |    'string2' {$name = "string2";}
       |    'string3' {$name = "string3";}
       )
   ;


-- 
512k Broadband ?14.99 per month
Unlimited Downloads - No extra Costs
?14.99 per month (inc. VAT)
Order Now www.adsl4less.com

From jan_ek at op.pl  Fri May 11 09:15:10 2007
From: jan_ek at op.pl (Stefan Chrobot)
Date: Fri, 11 May 2007 18:15:10 +0200
Subject: [antlr-interest] Choosing token
Message-ID: <4644968E.2040409@op.pl>

Hello!

Is there a way other than reordering the rules to tell ANTLRv3 to prefer 
token BOOLEAN instead of IDENTIFIER?

grammar Test;

start	:	BOOLEAN
	|	IDENTIFIER;

IDENTIFIER
	:	('a'..'z'|'A'..'Z'|'0'..'9')+;
	
BOOLEAN	:	'true' | 'false';



Stefan

From jaluber at gmx.de  Fri May 11 09:19:27 2007
From: jaluber at gmx.de (Johannes Luber)
Date: Fri, 11 May 2007 18:19:27 +0200
Subject: [antlr-interest] Choosing token
In-Reply-To: <4644968E.2040409@op.pl>
References: <4644968E.2040409@op.pl>
Message-ID: <4644978F.8090206@gmx.de>

Stefan Chrobot wrote:
> Hello!
> 
> Is there a way other than reordering the rules to tell ANTLRv3 to prefer
> token BOOLEAN instead of IDENTIFIER?
> 
> grammar Test;
> 
> start    :    BOOLEAN
>     |    IDENTIFIER;
> 
> IDENTIFIER
>     :    ('a'..'z'|'A'..'Z'|'0'..'9')+;
>     
> BOOLEAN    :    'true' | 'false';

Yes. Look at
<http://www.antlr.org/wiki/display/ANTLR3/Quick+Starter+on+Parser+Grammars+-+No+Past+Experience+Required>
in the "How to define tokens" section for more information.

Best regards,
Johannes Luber

From femtowin at gmail.com  Fri May 11 09:31:26 2007
From: femtowin at gmail.com (femto gary)
Date: Sat, 12 May 2007 00:31:26 +0800
Subject: [antlr-interest] Some Problem with antlrv3
In-Reply-To: <d8faca7330aa4837992b70d9f8a0c31a@b53e0c07568c4818a8cf5b96f83da60c>
References: <d8faca7330aa4837992b70d9f8a0c31a@b53e0c07568c4818a8cf5b96f83da60c>
Message-ID: <91170ee40705110931w7b3ad4f7k99086fc5c7049ae0@mail.gmail.com>

Hi Terence, have you seen this letter?
resent it.

On 5/8/07, femtowin1 <femtowin1 at gmail.com> wrote:
> Hi Terence, sorry for not state the problem clearly, for point 1,
> just ignore the Rubyv3Parser(TokenStream input, Rubyv3Parser parent) constructor, assume we only only one
> construtor now: Rubyv3Parser(TokenStream input) , the problem
> is this constructor is generated and I can't add customization
> initialization code to it , actually I need is the following:
> public Rubyv3Parser(TokenStream input) {
>         super(input);
>           ((Rubyv3Lexer) input.getTokenSource()).setParser(this);
>     }
> but this constructor is auto generated, I just can't put the above
> code into members section cause when generating, there will be
> two same signature constructor which is compile error.
>
> for point 3, actually I need building a compiler,
> because ruby's double quote string has inner structure,
> you can put any statement inside #{}, so what I did is attach
> an expression to the token when lexing, so while walking the tree,
> I need to get the expression,
> expression returns[Expression e]
>        :        value=DOUBLE_QUOTE_STRING{e=((MyToken)$value.getToken()).getExpression();}
> the current implementation doesn't support specifying Token type in tree grammar.
> ______________________________________
> Sent from my www.pageflakes.com startpage
>


-- 
Best Regards
XRuby http://xruby.com
femto http://hi.baidu.com/femto

From parrt at cs.usfca.edu  Fri May 11 09:34:53 2007
From: parrt at cs.usfca.edu (Terence Parr)
Date: Fri, 11 May 2007 09:34:53 -0700
Subject: [antlr-interest] Choosing token
In-Reply-To: <4644978F.8090206@gmx.de>
References: <4644968E.2040409@op.pl> <4644978F.8090206@gmx.de>
Message-ID: <166DDFF5-5EF3-4582-A8BE-EAE945BFF9E7@cs.usfca.edu>


On May 11, 2007, at 9:19 AM, Johannes Luber wrote:

> Stefan Chrobot wrote:
>> Hello!
>>
>> Is there a way other than reordering the rules to tell ANTLRv3 to  
>> prefer
>> token BOOLEAN instead of IDENTIFIER?
>>
>> grammar Test;
>>
>> start    :    BOOLEAN
>>     |    IDENTIFIER;
>>
>> IDENTIFIER
>>     :    ('a'..'z'|'A'..'Z'|'0'..'9')+;
>>
>> BOOLEAN    :    'true' | 'false';
>
> Yes. Look at
> <http://www.antlr.org/wiki/display/ANTLR3/Quick+Starter+on+Parser 
> +Grammars+-+No+Past+Experience+Required>
> in the "How to define tokens" section for more information.

I'm not sure Johannes (excellent) tutorial says it explicitly: the  
order in which you define lexical rules gives the priority.  Put  
BOOLEAN before IDENTIFIER. :)

Ter


From jan_ek at op.pl  Fri May 11 09:49:44 2007
From: jan_ek at op.pl (Stefan Chrobot)
Date: Fri, 11 May 2007 18:49:44 +0200
Subject: [antlr-interest] parse "search criterion"
In-Reply-To: <3DC3A6FF87DCBD418C09476C317C568B01E4C000@yukon.delta.de>
References: <3DC3A6FF87DCBD418C09476C317C568B01E4C000@yukon.delta.de>
Message-ID: <46449EA8.3010503@op.pl>

Otto, Frank napisa?(a):
> Hi,
> 
> I want to parse a search criterion (with +, -, "", AND, OR) like "google" with antlr. For example:
> 
> Hello World
> "Hello World"
> Hello +World
> Hello OR WORLD
> Hello -World
> 
> But I have no idea, how I start. Has someone do this? Is there a simple tutorial for parsing search words? I haven't found one.

Well, you need to start with the grammar. Maybe something like this:

grammar Query;

WS	:	(' ' | '\t')+ { $channel = HIDDEN; };
OPERATOR:	'+' | '-' | 'AND' | 'OR';
SIMPLE_QUERY
	:	('a'..'z' | 'A'..'Z' | '0'..'9')+
	|	'"' (~'"')+ '"';
query	:	
	|	SIMPLE_QUERY ((OPERATOR)? SIMPLE_QUERY)*;


Stefan

From paul at paulkeir.com  Fri May 11 11:35:48 2007
From: paul at paulkeir.com (Paul Keir)
Date: Fri, 11 May 2007 19:35:48 +0100
Subject: [antlr-interest] token query
In-Reply-To: <mailman.239.1178901091.32543.antlr-interest@antlr.org>
References: <mailman.239.1178901091.32543.antlr-interest@antlr.org>
Message-ID: <4644B784.8000702@paulkeir.com>

Oops. I had meant to use the tokens in the rule (instead of single 
quoted strings).

I think I know the answer now though. Instead of 'name=null', I can use 
'name=input.LT(1).getText()'

Cheers,
Paul


antlr-interest-request at antlr.org wrote:
> Send antlr-interest mailing list submissions to
> 	antlr-interest at antlr.org
>
> To subscribe or unsubscribe via the World Wide Web, visit
> 	http://www.antlr.org/mailman/listinfo/antlr-interest
> or, via email, send a message with subject or body 'help' to
> 	antlr-interest-request at antlr.org
>
> You can reach the person managing the list at
> 	antlr-interest-owner at antlr.org
>
> When replying, please edit your Subject line so it is more specific
> than "Re: Contents of antlr-interest digest..."
>
>
> Today's Topics:
>
>    1. Dealing with issues in non-greedy (.)* rules
>       (Marc-Andr? Laverdi?re)
>    2. Nondeterminism (Vijai Kalyan)
>    3. Re: C-target (Marc)
>    4. Re: Dealing with issues in non-greedy (.)* rules (Terence Parr)
>    5. Re: Lots of memory leak with	TokenStreamHiddenTokenFilter of
>       C++ Target in Antlr 2.7x? (Ric Klaren)
>    6. How to redirect the input stream? (Frank Yue)
>    7. Re: How to redirect the input stream? (Ric Klaren)
>    8. token query (Paul Keir)
>    9. Choosing token (Stefan Chrobot)
>   10. Re: Choosing token (Johannes Luber)
>   11. Re: Some Problem with antlrv3 (femto gary)
>
>
> ----------------------------------------------------------------------
>
> Message: 1
> Date: Thu, 10 May 2007 15:08:35 -0400
> From: Marc-Andr? Laverdi?re 	<ma_laver at ciise.concordia.ca>
> Subject: [antlr-interest] Dealing with issues in non-greedy (.)* rules
> To: ANTLR Interest <antlr-interest at antlr.org>
> Message-ID: <46436DB3.4040806 at ciise.concordia.ca>
> Content-Type: text/plain; charset=UTF-8; format=flowed
>
> Hello,
>
> I just wanted to a) share a hack and b) ask for some help dealing with 
> blob-matching rules.
>
> I have the following rule:
> sh_code_blob
> 	:	( options {greedy=false;} : . )*
>             {if (false) throw new RecognitionException();};
>
> a) you will notice the "if (false) throw new RecognitionException();"
> This hack takes care of the compilation exception in the generated 
> parser for this rule, since the generated code tries to catch an 
> exception that won't ever be thrown.
>
> I'm not impressed by Sun's compiler for not figuring out that invariant, 
> but it works!
>
> Ter, should we update the StringTemplate to include this by default? 
> This would probably save you from having to have a different template 
> just for this one case.
>
> b) this rule will however emit error messages. These error messages will
> refer to the last character match. The call reportError() is not called 
> however. (I validated this)
>
> Do we have a "quiet" option that we can set for this rule? I don't see 
> anything in the documentation nor in the BaseRecognizer class.
>
> Thanks in advance for the help. I hope that my hack will help someone.
>
> Regards,
>
>   

-- 
512k Broadband ?14.99 per month
Unlimited Downloads - No extra Costs
?14.99 per month (inc. VAT)
Order Now www.adsl4less.com

From laguest at archangeli.demon.co.uk  Fri May 11 11:46:37 2007
From: laguest at archangeli.demon.co.uk (Luke A. Guest)
Date: Fri, 11 May 2007 19:46:37 +0100
Subject: [antlr-interest] Writing a new backend for v3
In-Reply-To: <870CD98E-F1C6-422D-9F45-29277B019EFB@cs.usfca.edu>
References: <1178734388.25026.5.camel@rogue> <1178821526.25026.8.camel@rogue>
	<870CD98E-F1C6-422D-9F45-29277B019EFB@cs.usfca.edu>
Message-ID: <1178909197.16045.0.camel@rogue>

On Thu, 2007-05-10 at 11:30 -0700, Terence Parr wrote:
> > I can't believe that there is no information on how to start a new
> > backend.
> 
> Yeah, I was hoping a target developer would keep some notes ;)
> 
> Basically, you have to copy the closest target templates and then  
> alter them to conform to new target language.  Then you need to mimic  
> the runtime library.  Getting some doc on that now.
> 
> Which language?

Ada95, 2005 isn't quite ready in GNAT, interfaces just kill the
compiler.

Luke.



From antlr at mirality.co.nz  Fri May 11 13:58:40 2007
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Sat, 12 May 2007 08:58:40 +1200
Subject: [antlr-interest] parse "search criterion"
In-Reply-To: <46449EA8.3010503@op.pl>
References: <3DC3A6FF87DCBD418C09476C317C568B01E4C000@yukon.delta.de>
	<46449EA8.3010503@op.pl>
Message-ID: <20070511221339.891411907BC@www.antlr.org>

At 04:49 12/05/2007, Stefan Chrobot wrote:
 >> I want to parse a search criterion (with +, -, "", AND, OR) 
like
 >"google" with antlr. For example:
[...]
 >Well, you need to start with the grammar. Maybe something like
 >this:
 >
 >grammar Query;
 >
 >WS	:	(' ' | '\t')+ { $channel = HIDDEN; };
 >OPERATOR:	'+' | '-' | 'AND' | 'OR';
 >SIMPLE_QUERY
 >	:	('a'..'z' | 'A'..'Z' | '0'..'9')+
 >	|	'"' (~'"')+ '"';
 >query	:	
 >	|	SIMPLE_QUERY ((OPERATOR)? SIMPLE_QUERY)*;

It's not quite that simple since there are both unary and binary 
operators involved.  So you'd probably want something more like 
this:

grammar Query;

WS	:	(' ' | '\t')+ { $channel = HIDDEN; };
UNARY_OP: '+' | '-';
BINARY_OP: 'AND' | 'OR';
PHRASE: '"' (~'"')+ '"';
WORD: ('a'..'z' | 'A'..'Z' | '0'..'9')+;

query: element (BINARY_OP? element)* EOF;
element: UNARY_OP? (WORD | PHRASE);


From me262c at gmail.com  Fri May 11 23:39:43 2007
From: me262c at gmail.com (me 262)
Date: Fri, 11 May 2007 23:39:43 -0700
Subject: [antlr-interest] How to do abbreviation
Message-ID: <b9fb3efe0705112339r40e3a7e5g362cb68e822fe79e@mail.gmail.com>

Hi,

  Is there a way to parse abbreviated key words using ANTLR? For
example, I would like to recognize "ex 1" as "example 1".

  Thanks,

Mike Eng

From antlr at mirality.co.nz  Fri May 11 23:57:16 2007
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Sat, 12 May 2007 18:57:16 +1200
Subject: [antlr-interest] How to do abbreviation
In-Reply-To: <b9fb3efe0705112339r40e3a7e5g362cb68e822fe79e@mail.gmail.co
 m>
References: <b9fb3efe0705112339r40e3a7e5g362cb68e822fe79e@mail.gmail.com>
Message-ID: <20070512065730.A8AC01907B0@www.antlr.org>

At 18:39 12/05/2007, me 262 wrote:
 >  Is there a way to parse abbreviated key words using ANTLR? For
 >example, I would like to recognize "ex 1" as "example 1".

Can't you just list them as alternates?  eg:

EXAMPLE1: 'example 1' | 'ex 1';
or
EXAMPLE: 'example' | 'ex';


From open.zone at virgin.net  Sat May 12 03:12:10 2007
From: open.zone at virgin.net (Micheal J)
Date: Sat, 12 May 2007 11:12:10 +0100
Subject: [antlr-interest] How to do abbreviation
In-Reply-To: <b9fb3efe0705112339r40e3a7e5g362cb68e822fe79e@mail.gmail.com>
Message-ID: <002501c7947e$01957270$c704a8c0@hercules>

Hi,

> Hi,
> 
>   Is there a way to parse abbreviated key words using ANTLR? 
> For example, I would like to recognize "ex 1" as "example 1".
> 

A. Using tokens:

grammar AbbeviatedKeywordsLanguage;

tokens 
{
    EX_AMPLE = 'ex';
    EXAMPLE  = 'example';
}

command: example INT;

example: EX_AMPLE | EXAMPLE;

....
....

B. Using rules (can get messy and expect conflicts with IDENT rule):

EXAMPLE: 'ex' ( 'ample' )?;


Micheal

-----------------------
The best way to contact me is via the list/forum. My time is very limited.


From a.shneyderman at gmail.com  Sat May 12 11:26:44 2007
From: a.shneyderman at gmail.com (Alex Shneyderman)
Date: Sat, 12 May 2007 20:26:44 +0200
Subject: [antlr-interest] How could I run org.antlr.Tool from ant?
Message-ID: <693a69ba0705121126q260025l5b4c0626ead4d62d@mail.gmail.com>

-- 
Thanks,
Alex.

From parrt at cs.usfca.edu  Sat May 12 16:54:56 2007
From: parrt at cs.usfca.edu (Terence Parr)
Date: Sat, 12 May 2007 16:54:56 -0700
Subject: [antlr-interest] upgraded confluence wiki
Message-ID: <F5DA1228-1F46-4F8A-96B2-E28BF7C6CBC9@cs.usfca.edu>

hi, i just upgraded the wiki. Please let me know if there are issues.

Terence

From mark.mandel at gmail.com  Sat May 12 20:38:05 2007
From: mark.mandel at gmail.com (Mark Mandel)
Date: Sun, 13 May 2007 13:38:05 +1000
Subject: [antlr-interest] [v3] Help on CFScript Parser - Help on recursive
	rules
Message-ID: <4153ee230705122038p55c91cdahd52185120fbaa6d9@mail.gmail.com>

All,

I'm building a CFScript (think lightweight javascript) parser, which
will eventually get blown into a ColdFusion parser, but I'm getting
stuck on statements like this;

var object = getObjectManager().getObject(arguments.transfer.getClassName());

The code that ANTLR throws a wobbly on is:

codeStatement
	:
	code (DOT code)*
	;

code
	:
	IDENTIFIER | function
	;

function
	:
	IDENTIFIER OPEN_PAREN (argumentStatement)? CLOSE_PAREN
CLOSE_PAREN)
	;
	
argumentStatement
	:
	codeStatement (COMMA codeStatement)*
	;

Now, essentially, the grammar is true - and argument can be a
codeStatement... but that gives multiple paths back to the same
rule... so I don't know how I can set something like this up?

Is there where backtracking is required.  I can't seem to find a
example of backtracking that I can understand, so I'm not sure how to
go about using it.  I've been following some parts of the Java 5
grammar, but this bit I can't work out.

I've attached my full grammar as it currently stands, for further reference.

Any help would be appreciated,

Thanks,

Mar

-- 
E: mark.mandel at gmail.com
W: www.compoundtheory.com
-------------- next part --------------
A non-text attachment was scrubbed...
Name: CFScript.g
Type: application/octet-stream
Size: 1183 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20070513/c681cc44/attachment.obj 

From costa_basil at yahoo.ca  Sun May 13 00:42:11 2007
From: costa_basil at yahoo.ca (Costa Basil)
Date: Sun, 13 May 2007 03:42:11 -0400 (EDT)
Subject: [antlr-interest] antlr 2.7.x: error messages question
Message-ID: <770937.73158.qm@web54307.mail.re2.yahoo.com>

I have a k=3 grammar (output c++) and I have an issue with the syntax error messages displayed by antlr.  Antlr detects syntactic errors as early as possible. Because k=3 antlr usually checks 3 tokens ahead using the linear approximation. Sometimes token 2 or token 3 are the culprits but the message shows only token 1.

For instance, I can get the unexpected token error but actually that token is correct and the token after is incorrect.

I think a better message would be: unexpected token sequence and then show token 1, token 2 and token 3.

The problem is that for some productions only token 1 is wrong (including all the cases when there is no need to look ahead 3 tokens), for others token 2 or token 3 are wrong. In the first case the default message is right. In the other case I would say: unexpected token sequence because I really don't know which token is the offending token.

Any thoughts?

Thanks


 		
---------------------------------
Share your photos with the people who matter at Yahoo! Canada Photos
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070513/941dddf1/attachment.html 

From mark.mandel at gmail.com  Sun May 13 01:51:53 2007
From: mark.mandel at gmail.com (Mark Mandel)
Date: Sun, 13 May 2007 18:51:53 +1000
Subject: [antlr-interest] [v3] Help on CFScript Parser - Help on
	recursive rules
In-Reply-To: <4153ee230705122038p55c91cdahd52185120fbaa6d9@mail.gmail.com>
References: <4153ee230705122038p55c91cdahd52185120fbaa6d9@mail.gmail.com>
Message-ID: <4153ee230705130151j1805ce68ie568595a2b9a4b79@mail.gmail.com>

Never mind, I think I've got it covered.

There seems to be some differences between what ANTLR actually does,
and what shows up in ANTLRWorks.

Otherwise, ANTLRWorks is a great product.

Mark

On 5/13/07, Mark Mandel <mark.mandel at gmail.com> wrote:
> All,
>
> I'm building a CFScript (think lightweight javascript) parser, which
> will eventually get blown into a ColdFusion parser, but I'm getting
> stuck on statements like this;
>
> var object = getObjectManager().getObject(arguments.transfer.getClassName());
>
> The code that ANTLR throws a wobbly on is:
>
> codeStatement
>         :
>         code (DOT code)*
>         ;
>
> code
>         :
>         IDENTIFIER | function
>         ;
>
> function
>         :
>         IDENTIFIER OPEN_PAREN (argumentStatement)? CLOSE_PAREN
> CLOSE_PAREN)
>         ;
>
> argumentStatement
>         :
>         codeStatement (COMMA codeStatement)*
>         ;
>
> Now, essentially, the grammar is true - and argument can be a
> codeStatement... but that gives multiple paths back to the same
> rule... so I don't know how I can set something like this up?
>
> Is there where backtracking is required.  I can't seem to find a
> example of backtracking that I can understand, so I'm not sure how to
> go about using it.  I've been following some parts of the Java 5
> grammar, but this bit I can't work out.
>
> I've attached my full grammar as it currently stands, for further reference.
>
> Any help would be appreciated,
>
> Thanks,
>
> Mar
>
> --
> E: mark.mandel at gmail.com
> W: www.compoundtheory.com
>
>


-- 
E: mark.mandel at gmail.com
W: www.compoundtheory.com

From laguest at archangeli.demon.co.uk  Sun May 13 07:07:55 2007
From: laguest at archangeli.demon.co.uk (Luke A. Guest)
Date: Sun, 13 May 2007 15:07:55 +0100
Subject: [antlr-interest] IRC channel
In-Reply-To: <4153ee230705122020u68a0f0a2s4ece3eb265d2e0b6@mail.gmail.com>
References: <1178622789.5209.7.camel@rogue>
	<4153ee230705122020u68a0f0a2s4ece3eb265d2e0b6@mail.gmail.com>
Message-ID: <1179065280.16045.2.camel@rogue>

On Sun, 2007-05-13 at 13:20 +1000, Mark Mandel wrote:
> Luke,
> 
> Maybe we should set one up on freenode or something?

You could always set one up. I've no idea if I'm going to stick with
ANTLR yet, so I'm not the best person to do this. Maybe 1 of the
developers of ANTLR would do it?

> If one existed, I would sit in on it.  I may not be the most helpful
> guy in the world in terms of ANTLR, but I can try!
> 
> Mark
> 
> On 5/8/07, Luke A. Guest <laguest at archangeli.demon.co.uk> wrote:
> > Hi,
> >
> > I know this has been asked, but I couldn't find an answer. Is there a
> > channel somewhere? I know there isn't one on Freenode.
> >
> > If there isn't one, why not? It would be extremely useful to have one as
> > it provides a very quick way of getting answers to questions, as long as
> > people are there ;)
> >
> > Thanks,
> > Luke.
> >
> >
> >
> 
> 


From parrt at cs.usfca.edu  Sun May 13 10:19:00 2007
From: parrt at cs.usfca.edu (Terence Parr)
Date: Sun, 13 May 2007 10:19:00 -0700
Subject: [antlr-interest] IRC channel
In-Reply-To: <1179065280.16045.2.camel@rogue>
References: <1178622789.5209.7.camel@rogue>
	<4153ee230705122020u68a0f0a2s4ece3eb265d2e0b6@mail.gmail.com>
	<1179065280.16045.2.camel@rogue>
Message-ID: <0ED7F7D6-254E-43E2-920C-457FCD0B139C@cs.usfca.edu>

Do people want an IRC channel?  There hasn't been a call for it  
really.  Email works pretty well as we have people in every timezone.

Ter

From parrt at cs.usfca.edu  Sun May 13 10:21:23 2007
From: parrt at cs.usfca.edu (Terence Parr)
Date: Sun, 13 May 2007 10:21:23 -0700
Subject: [antlr-interest] ANTLR v3 printed book status
Message-ID: <52F697F2-5DAE-4B54-A42E-C99D48EE4049@cs.usfca.edu>

Howdy,

The publisher, pragmatic programmers, says that "5/15 is the bound  
book date; so Amazon and us will have it within a week after that,  
most book stores 3-4 weeks later."

If you've ordered a book, you should see it in within a few weeks.

Ter


From parrt at cs.usfca.edu  Sun May 13 10:25:41 2007
From: parrt at cs.usfca.edu (Terence Parr)
Date: Sun, 13 May 2007 10:25:41 -0700
Subject: [antlr-interest] ANTLR v3 launch party?
Message-ID: <4097FF50-F8EF-4B2C-9FA6-6BC1252E789E@cs.usfca.edu>

Hi,

If I had a v3 launch party sometime in a week or two, would people be  
interested in coming to the Univ. of San Francisco for some free  
pizza and geeky conversation?  I could do an intro on v3 and the  
dashing Jean Bovet could do a demo of his amazing ANTLRWorks.

If people (in SF Bay area I guess) are interested, I'll ask the  
university for permission to use our fancy CS classroom.  We could  
hold about 35 people max.  It's the same place we held the ANTLR2004  
workshop.

Please send me email directly if you'd be interested in coming by to  
say howdy.

I plan on launching v3 on thursday this week with new website, if all  
goes according to plan.  I'm waiting on the target folks to put final  
touches onto their code.

Ter

From imus at linuxmail.org  Mon May 14 02:23:49 2007
From: imus at linuxmail.org (Isabelle Muszynski)
Date: Mon, 14 May 2007 17:23:49 +0800
Subject: [antlr-interest] IRC channel
Message-ID: <20070514092349.DE961CA0A4@ws5-11.us4.outblaze.com>


> ----- Original Message -----
> From: "Terence Parr" <parrt at cs.usfca.edu>
> To: "ANTR Interest" <antlr-interest at antlr.org>
> Subject: Re: [antlr-interest] IRC channel
> Date: Sun, 13 May 2007 10:19:00 -0700
> 
> 
> Do people want an IRC channel?  There hasn't been a call for it  
> really.  Email works pretty well as we have people in every 
> timezone.
> 
> Ter

>
Well, if there was one, I'd also use it. 
The list does work well, but it seems to me that if one is really stuck and waiting/hoping desperately for help, the turnaround time would be quicker with the IRC 
channel - assuming of course someone is on-line at that exact moment.

Isabelle


=


-- 
Powered by Outblaze

From dima at rts.ua  Mon May 14 06:27:05 2007
From: dima at rts.ua (Dmitry Marienko)
Date: Mon, 14 May 2007 17:27:05 +0400
Subject: [antlr-interest] Question about implementation 'include' directive
	(v3)
Message-ID: <op.tsbjnfmue0apl5@shadow>

Hi All !
   I've implemented c-like language with "include" directive support using   
ANTLR v2.
   Now I've decided to do it with ANTLR v3 but I didn't find any methods  
for switching my lexer's on the fly (like TokenStreamSelector in v2).

   I attempted to save current state  in my lexer class:

@lexer::members {
    class SaveStruct {   // structure for save
       public CharStream input;
       public int tokenStartCharIndex;
       public int tokenStartLine, tokenStartCharPositionInLine, channel,  
type;
    }

   Stack<SaveStruct> includes = new Stack<SaveStruct>();
   public Token nextToken(){
      Token token = super.nextToken();
       if(token==Token.EOF_TOKEN && !includes.empty()){

       // try to restore previouse state and input stream here
          SaveStruct ss = includes.pop();
          tokenStartCharIndex = ss.tokenStartCharIndex;
          tokenStartLine = ss.tokenStartLine;
          tokenStartCharPositionInLine = ss.tokenStartCharPositionInLine;
          channel = ss.channel;
          type = ss.type;
         setCharStream(ss.input);
      }
      return token;
   }
}
  .......
  ......
  .......
INCLUDE
        : ('#') (WS)? 'include' (WS)? i=STRING_LITERAL (';')? 	{
            String name = i.getText();
           name = i.getText().substring(1,name.length()-1);
           try {
             SaveStruct ss = new SaveStruct();
             ss.input = input;
             ss.tokenStartCharIndex = tokenStartCharIndex;
             ss.tokenStartLine = tokenStartLine;
             ss.tokenStartCharPositionInLine = tokenStartCharPositionInLine;
             ss.channel = channel;
             ss.type = type;
             includes.push(ss);                                                             
// save current state here
             setCharStream(new ANTLRFileStream(name));  // and set new  
input stream
           } catch(Exception fnf) {
              System.err.println("cannot find file " + name);
           }
    }
    ;

    This lexer processes included file well but doesn't  set previouse  
input stream.  Can anyone points me on my fault or gives any advice about  
this problem ?

-- 
  Dmitry

From ma_laver at ciise.concordia.ca  Mon May 14 07:47:40 2007
From: ma_laver at ciise.concordia.ca (=?UTF-8?B?TWFyYy1BbmRyw6kgTGF2ZXJkacOocmU=?=)
Date: Mon, 14 May 2007 10:47:40 -0400
Subject: [antlr-interest] Dealing with issues in non-greedy (.)* rules
In-Reply-To: <D7F1AFF5-6D60-400D-A55E-FF0A45EA5068@cs.usfca.edu>
References: <46436DB3.4040806@ciise.concordia.ca>
	<D7F1AFF5-6D60-400D-A55E-FF0A45EA5068@cs.usfca.edu>
Message-ID: <4648768C.1010405@ciise.concordia.ca>

Hello,

It looks like the issue is deeper than what I thought. Let me show an 
example:

20 BeginBehavior
21  const int cert_type_priority[3] = { GNUTLS_CRT_X509, 
GNUTLS_CRT_OPENPGP, 0};
22  gnutls_init (session, GNUTLS_CLIENT);
23  gnutls_set_default_priority (session);
24  gnutls_certificate_type_set_priority (session, cert_type_priority);
25  gnutls_certificate_allocate_credentials(xcred);
26  gnutls_credentials_set (session, GNUTLS_CRD_CERTIFICATE, xcred);
27  int socketflags = fcntl(socket,F_GETFL);
28  if ((socketflags & O_NONBLOCK) != 0) fcntl(socket,F_SETFL, 
socketflags ^ O_NONBLOCK);
29 EndBehavior

The parsing gives me:
line 21:30 no viable alternative at character '['
line 21:32 no viable alternative at character ']'
line 21:77 no viable alternative at character ';'
line 22:38 no viable alternative at character ';'
line 23:39 no viable alternative at character ';'
line 24:68 no viable alternative at character ';'
line 25:48 no viable alternative at character ';'
line 26:65 no viable alternative at character ';'
line 27:41 no viable alternative at character ';'
line 28:20 mismatched character ' ' expecting '&'
line 28:73 no viable alternative at character '^'
line 28:86 no viable alternative at character ';'

Which means that certain characters are not accepted. Acutally, when I 
print the resulting token, these are missing!

I don't even have a lexer rule that mentions ';'!
What am I doing wrong? I'm working with k=2. Should I crank it up for 
that rule?

Terence Parr wrote:
> 
> On May 10, 2007, at 12:08 PM, Marc-Andr? Laverdi?re wrote:
> 
>> Hello,
>>
>> I just wanted to a) share a hack and b) ask for some help dealing with 
>> blob-matching rules.
>>
>> I have the following rule:
>> sh_code_blob
>>     :    ( options {greedy=false;} : . )*
>>            {if (false) throw new RecognitionException();};
>>
>> a) you will notice the "if (false) throw new RecognitionException();"
>> This hack takes care of the compilation exception in the generated 
>> parser for this rule, since the generated code tries to catch an 
>> exception that won't ever be thrown.
> 
> Hmm... i think .+ would be better.  .* matches nothing, not a 
> particularly useful input. ;)
> 
> that should remove error.
> 
> Ter
> 

-- 
Marc-Andr? LAVERDI?RE, B. Eng., M. A. Sc. (in progress)
Computer Security Laboratory - Laboratoire de s?curit? informatique
CIISE, Universit? Concordia University, Montr?al, Qu?bec, Canada
www.ciise.concordia.ca

/"\
\ /    ASCII Ribbon Campaign
  X      against HTML e-mail
/ \

"Perseverance must finish its work so that you may be mature and 
complete, not lacking anything." -James 1:4


From antlr at mirality.co.nz  Mon May 14 14:48:16 2007
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Tue, 15 May 2007 09:48:16 +1200
Subject: [antlr-interest] Dealing with issues in non-greedy (.)*  rules
In-Reply-To: <4648768C.1010405@ciise.concordia.ca>
References: <46436DB3.4040806@ciise.concordia.ca>
	<D7F1AFF5-6D60-400D-A55E-FF0A45EA5068@cs.usfca.edu>
	<4648768C.1010405@ciise.concordia.ca>
Message-ID: <20070514214830.B8ADF1907F4@www.antlr.org>

At 02:47 15/05/2007, Marc-Andr?? Laverdi??re wrote:
 >line 21:30 no viable alternative at character '['
 >line 21:32 no viable alternative at character ']'
 >line 21:77 no viable alternative at character ';'
[...]
 >Which means that certain characters are not accepted. Acutally,
 >when I print the resulting token, these are missing!
 >
 >I don't even have a lexer rule that mentions ';'!
 >What am I doing wrong? I'm working with k=2. 
Should I crank it up
 >for that rule?

Actually, that's probably exactly what you're doing wrong :)

The parser cannot and does not deal directly with 
characters.  Any characters you want to be able 
to recognise in the stream must be converted into 
tokens, whether through lexer rules or a tokens 
block, and whether individually or grouped.

(There is a shortcut syntax that makes it look 
like the parser can deal with characters, but in 
reality that just results in internally 
generating tokens, which you have less control over.)


From ifnubima at gmail.com  Mon May 14 22:06:23 2007
From: ifnubima at gmail.com (Ifnu _)
Date: Tue, 15 May 2007 12:06:23 +0700
Subject: [antlr-interest] defaulterrorhandler
Message-ID: <769fc4f00705142206x6a940fe6q2c4857141f5536f7@mail.gmail.com>

hi all,

can i set defaulterrorhandler=false in antrl 3.0?  or this option
already removed in antlr 3?

-- 
http://www.nagasakti.or.id/roller/ifnu
regards

From travis_caldwell2000 at yahoo.com  Tue May 15 00:38:36 2007
From: travis_caldwell2000 at yahoo.com (Travis Caldwell)
Date: Tue, 15 May 2007 00:38:36 -0700 (PDT)
Subject: [antlr-interest] Questions about Tree Generation in v3
Message-ID: <385838.44125.qm@web58405.mail.re3.yahoo.com>


  Hi,
 
  I was looking at the ANTLR tree construction syntax and the ANTLR
 book
 and have two questions:
 
  1) In chapter 7 of the ANTLR book, it mentions that AST's should not
 have missing nodes for optional elements which are not present. 
 
  I see why this is a good idea since omitting optional elements rather
 then replacing them with a dummy element makes the trees ambiguous. 
 
  But the "?" EBNF tree generation notation does not seem condusive to
 this.
 
  From experimenting with the tree generation it seems that a rule like
 
  foo_decl : modifier? type identifier 
          -> ^(TYPEDEF modifier? type identifier);
 
  Will generate the folowing trees from the folowing input:
 
  "static int foo" -> ^(TYPEDEF static int foo)
  "int foo"        -> ^(TYPEDEF int foo)
 
  This doesn't seem to be in keeping with the concept of inserting
dummy tokens for missing elements.  
 
  Is there some way to insert dummy elements when a "?" doesn't match
in a re-write rule?
 
  Is there some other way to handle this?
 
  2) Duplicating trees when a subrule returns a list
 
  I see how when a rule specifies multiple tokens you can cause
duplicate tree generation. i.e.
 
  decl : 'int' ID ( ',' ID)* -> ^('int' ID)+
 
 Should yield a list of trees of the form ^('int' ID)
 
  But is there a way to do this if the list of items is returned from a
sub-rule?
 
  i.e 
 
  decl : 'int' list_of_ids 
  list_of_ids: ID ( ',' ID )* -> ID+
 
 The " ID+ " seems to cause list_of_ids to return a list of ID's, but I
don't know how I can take this list and get decl to generate a list of
trees of the form ^('int' ID) from this list.
 
  Is there a way to do this?
 
  Any help would be appreciated.
 
 
 
                  _Travis_Caldwell_



       
____________________________________________________________________________________Looking for a deal? Find great prices on flights and hotels with Yahoo! FareChase.
http://farechase.yahoo.com/

From sven at efftinge.de  Tue May 15 01:27:53 2007
From: sven at efftinge.de (Sven Efftinge)
Date: Tue, 15 May 2007 10:27:53 +0200
Subject: [antlr-interest] [Antlr 3] lexer problem
Message-ID: <859B24EF-40DA-4228-81CF-C65A3F69FBB3@efftinge.de>

Hi,

I faced the following behaviour.
For the grammar

start 	:	FLOAT ('.' 'foo')?;

FLOAT 	:	'0'..'9'+ ('.' '0'..'9'+)?;

the input '47.foo' results in a MismatchedTokenException(-1!=4).
I'd expected that the lexer matches FLOAT '.' 'foo'.
However the input 47.42.foo is parsed as expected.
Do I miss something?

I've rewritten the grammar so that everything works fine, but I would  
like to understand why my first approach didn't work.

thanks,
Sven

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070515/2ec435c9/attachment.html 

From sven at efftinge.de  Tue May 15 01:57:36 2007
From: sven at efftinge.de (Sven Efftinge)
Date: Tue, 15 May 2007 10:57:36 +0200
Subject: [antlr-interest] [Antlr 3] lexer problem
In-Reply-To: <693a69ba0705150145o50841a6ai5d7edaa28e1d8d46@mail.gmail.com>
References: <859B24EF-40DA-4228-81CF-C65A3F69FBB3@efftinge.de>
	<693a69ba0705150145o50841a6ai5d7edaa28e1d8d46@mail.gmail.com>
Message-ID: <FA98547F-2F3D-4229-A4E1-703D3676CBFD@efftinge.de>

Yes, I know. But I'd expect that the lexer tracks back when it can  
not complete the optional ('.' DIGIT)? part.
So it just consumes 42 (because it is a valid FLOAT, too).
The parser behaves like this, but the lexer not.
I'd expected that the following two grammars would successfully parse  
'42.foo'

// float as lexer rule
start : FLOAT ('.' foo)?;
FLOAT : DIGIT ('.' DIGIT)?;
DIGIT : '0'..'9'+;

// float as parser rule
start : float ('.' foo)?;
float : DIGIT ('.' DIGIT)?;
DIGIT : '0'..'9'+;

Only the second one works...

On May 15, 2007, at 10:45 , Alex Shneyderman wrote:

> On 5/15/07, Sven Efftinge <sven at efftinge.de> wrote:
>>
>> Hi,
>>
>>
>> I faced the following behaviour.
>> For the grammar
>>
>> start  : FLOAT ('.' 'foo')?;
>
> this is the parser rule. so it happens after lexer produced the tokens
>
>>
>> FLOAT  : '0'..'9'+ ('.' '0'..'9'+)?;
>
> now this is your lexer rule. Lexer gets to scan your char input first.
> So it scans 47 then sees '.' it assumes '0'..'9'+ after the dot should
> come to produce the FLOAT but instead gets 'foo'. So you get an
> exception. When you provide 47.42.foo as inpit everythings lexer cares
> about gets matched to produce FLOAT, so no problems in this input.

--

Sven Efftinge

Am Sophienhof 33
24941 Flensburg

mail : sven at efftinge.de
fon   : +49 176 21769757
web : http://www.efftinge.de
blog : http://effi-blog.blogspot.com



From fossanu at yahoo.de  Tue May 15 02:20:50 2007
From: fossanu at yahoo.de (Martina)
Date: Tue, 15 May 2007 11:20:50 +0200 (CEST)
Subject: [antlr-interest] Check brackets
Message-ID: <455367.32905.qm@web56103.mail.re3.yahoo.com>

Hi ANTLR people,

I?ve wrote a lexer and a parser (ANTLRv3, output Java) for a small grammar. Everything works fine and the parser shows me all the syntactic errors. I also wrote some own methods in the @members section to check semantic errors. Now I want to check if a closing and a opening bracket exist around a special token.
Here is an example:

rulename = ( alternative1 | alternative2 );

How can I go backward and forward from the alternative ( '|' ) to check the brackets? 


Best regards,
fossanu
       
---------------------------------
Kennt man wirklich jeden ?ber 3 Ecken? Die Antworten gibt's bei Yahoo! Clever.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070515/0b1387d9/attachment.html 

From professoryue at gmail.com  Tue May 15 03:19:41 2007
From: professoryue at gmail.com (Frank Yue)
Date: Tue, 15 May 2007 18:19:41 +0800
Subject: [antlr-interest] how it works.
Message-ID: <3888316b0705150319o40c7c7bfj5092e9a186982da3@mail.gmail.com>

   Hi , all . I have, of course, had a look round for any
documentation that might
help me but all I can find is documentation about how to use the system,
but not about how it works.
     Who could tell me where I can find the documents which tell me
how the class InputBuffer,class CharBuffer   , LexerSharedInput and
class CharScanner  to work . There is litter useful information on
Code API page .
      I am looking forward to your early answer.

From a.shneyderman at gmail.com  Tue May 15 03:37:34 2007
From: a.shneyderman at gmail.com (Alex Shneyderman)
Date: Tue, 15 May 2007 12:37:34 +0200
Subject: [antlr-interest] [Antlr 3] lexer problem
In-Reply-To: <FA98547F-2F3D-4229-A4E1-703D3676CBFD@efftinge.de>
References: <859B24EF-40DA-4228-81CF-C65A3F69FBB3@efftinge.de>
	<693a69ba0705150145o50841a6ai5d7edaa28e1d8d46@mail.gmail.com>
	<FA98547F-2F3D-4229-A4E1-703D3676CBFD@efftinge.de>
Message-ID: <693a69ba0705150337x474a3694ub474faff674da81d@mail.gmail.com>

> Yes, I know. But I'd expect that the lexer tracks back when it can
> not complete the optional ('.' DIGIT)? part.

For this to happen lexer should know what the parser expects. And I do not
think that is how lexer works. It knows 0 about parser. The parser knows 0
about lexer it only cares about token stream. In my understanding tracking
back can happen only in either one of them. But not across their boundaries
(unless you do it yourself of course)

So in your case you could disambiguate your lexer by using syntactic predicates
I guess. I have never used  them on lexers but I guess if it works
similarly to how they
work in parsers, it should look something like this:

INTORFLOAT:
  ('0'..'9'+ '.' '0'..'9') => FLOAT
 | INT;

FLOAT  : '0'..'9'+ ('.' '0'..'9'+)?;
INT       : '0'..'9'+;

> So it just consumes 42 (because it is a valid FLOAT, too).

Lexer is a greedy beast it will produce a token whenever it sees the
biggest number
of possible matching char sequences that can be represented as a token. In your
case lexer gets stuck after '.'; to help it you have to be more
specific - hence the
syntactic predicates.


> The parser behaves like this, but the lexer not.
> I'd expected that the following two grammars would successfully parse
> '42.foo'
>
> // float as lexer rule
> start : FLOAT ('.' foo)?;
> FLOAT : DIGIT ('.' DIGIT)?;
> DIGIT : '0'..'9'+;
>
> // float as parser rule
> start : float ('.' foo)?;
> float : DIGIT ('.' DIGIT)?;
> DIGIT : '0'..'9'+;
>
> Only the second one works...

From sven at efftinge.de  Tue May 15 04:42:12 2007
From: sven at efftinge.de (Sven Efftinge)
Date: Tue, 15 May 2007 13:42:12 +0200
Subject: [antlr-interest] [Antlr 3] lexer problem
In-Reply-To: <693a69ba0705150337x474a3694ub474faff674da81d@mail.gmail.com>
References: <859B24EF-40DA-4228-81CF-C65A3F69FBB3@efftinge.de>
	<693a69ba0705150145o50841a6ai5d7edaa28e1d8d46@mail.gmail.com>
	<FA98547F-2F3D-4229-A4E1-703D3676CBFD@efftinge.de>
	<693a69ba0705150337x474a3694ub474faff674da81d@mail.gmail.com>
Message-ID: <54D5A396-BD71-4DCD-986E-BA7DEF61E1CE@efftinge.de>


Alex,

>
> For this to happen lexer should know what the parser expects.

I think it has nothing to do with the parser.

> And I do not
> think that is how lexer works. It knows 0 about parser. The parser  
> knows 0
> about lexer it only cares about token stream. In my understanding  
> tracking
> back can happen only in either one of them. But not across their  
> boundaries
> (unless you do it yourself of course)

Yes, that's right but it doesn't relate to my problem.
I'm talking about the lexer only.

>
> So in your case you could disambiguate your lexer by using  
> syntactic predicates

The grammar results in something like the following lexer rules which  
are not ambigous, are they?

DOT 	:	'.';

FOO 	: 	'foo';

FLOAT 	:	'0'..'9'+ (DOT '0'..'9'+)?;


> I guess. I have never used  them on lexers but I guess if it works
> similarly to how they
> work in parsers, it should look something like this:
>
> INTORFLOAT:
>  ('0'..'9'+ '.' '0'..'9') => FLOAT
> | INT;
>
> FLOAT  : '0'..'9'+ ('.' '0'..'9'+)?;
> INT       : '0'..'9'+;

I've tried syntactic predicates without success (same behaviour).
Anyway I would like to understand why it behaves that way (if it is  
no bug)

thanks,
Sven





From dima at rts.ua  Tue May 15 04:01:45 2007
From: dima at rts.ua (Dmitry Marienko)
Date: Tue, 15 May 2007 15:01:45 +0400
Subject: [antlr-interest] Question about implementation 'include'
	directive (v3)
In-Reply-To: <op.tsbjnfmue0apl5@shadow>
References: <op.tsbjnfmue0apl5@shadow>
Message-ID: <op.tsc7k7poe0apl5@shadow>

Hi All !
   I've found solution for realisation includes in ANTLR v3 lexers. Hope  
it'll be usefull.

// First we override nextToken() method
  @lexer::members {
       class SaveStruct {
          public CharStream input;
          public int tokenStartCharIndex, tokenStartLine,  
tokenStartCharPositionInLine;
       }

      Stack<SaveStruct> includes = new Stack<SaveStruct>();
  	
      public Token nextToken(){
        Token token = super.nextToken();

         // we've got EOF and have non empty stack
         if(token==Token.EOF_TOKEN && !includes.empty()){
            SaveStruct ss = includes.pop();
            setCharStream(ss.input);
            tokenStartCharIndex = ss.tokenStartCharIndex;
            tokenStartLine = ss.tokenStartLine;
            tokenStartCharPositionInLine = ss.tokenStartCharPositionInLine;
            token = super.nextToken();
         }

        // skip first token after switching on another input
        if(((CommonToken)token).getStartIndex()<0)
           token = super.nextToken();

        return token;
     }
}
.....
.....
.....
// in lexer's rule:
INCLUDE
        : ('#'|'.') (WS)? 'include' (WS)? i=STRING_LITERAL ';'  {
                  String name = i.getText();
                  name = i.getText().substring(1,name.length()-1);
                  try {

                      // save current lexer's state
                       SaveStruct ss = new SaveStruct();
                       ss.input = input;
                       ss.tokenStartCharIndex = tokenStartCharIndex;
	   ss.tokenStartLine = tokenStartLine;
	   ss.tokenStartCharPositionInLine = tokenStartCharPositionInLine;
                       includes.push(ss);

                     // switch on new input stream
                      setCharStream(new ANTLRFileStream(name));
                      reset();

                 } catch(Exception fnf) { System.err.println("cannot find  
file " + name); }
        }
        ;


> Hi All !
>    I've implemented c-like language with "include" directive support  
> using  ANTLR v2.
>    Now I've decided to do it with ANTLR v3 but I didn't find any methods  
> for switching my lexer's on the fly (like TokenStreamSelector in v2).
>
  ... skip ...
>     This lexer processes included file well but doesn't  set previouse  
> input stream.  Can anyone points me on my fault or gives any advice  
> about this problem ?
>


-- 
  Dmitry E. Marienko

From Mariusz_Buras at mentor.com  Tue May 15 06:21:26 2007
From: Mariusz_Buras at mentor.com (Buras, Mariusz)
Date: Tue, 15 May 2007 15:21:26 +0200
Subject: [antlr-interest] [antlr2.7.7] Forcing string literals into literals
	hash table.
Message-ID: <0A404B2A01F376419FCAC6F3C25FEDC5019D8B0E@svr-dem-exc-02.mgc.mentorg.com>

Hi!

 

I need your advise on my lexer. I'll go first with example:

 

class MyLexer extends Lexer;

options {

      testLiterals=false;     

      k=4; 

}

 

ENDMODULE:        "endmodule";

 

/* hundreds of keywords here... */

 

IDENTIFIER 

      options {testLiterals=true;} 

      :     ( ('a'..'z')|('A'..'Z')|'_' )? ( ( ('a'..'z')|('A'..'Z')|'_'
)? )+

      ;

 

And of course I got nondeterminism between ENDMODULE (and other literals
defined in that meaner) and C_IDENTIFIER.

Now my question is if it's possible to force antlr (2.7.7) to put
ENDMODULE literal into its the hash table ? 

I know that I should put my keywords quoted directly  in my grammar but
I'd favor this way (as an old Lex prick ;) )

 

Greetings,

M.Buras

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070515/ef05867b/attachment.html 

From mark.venbrux at gmail.com  Tue May 15 08:12:12 2007
From: mark.venbrux at gmail.com (Mark Venbrux)
Date: Tue, 15 May 2007 17:12:12 +0200
Subject: [antlr-interest] Separating text from comment in a source file
Message-ID: <fa6015a20705150812n51144876y9c8f7fe838252b55@mail.gmail.com>

Hi,

I would like to separate text from comment in a source file. In the end I
would like to keep the source code as is, and to process the comments. I
tried the following grammar, but it doesn't work as expected.
Warning: [17:01:59] warning(201): d:\temp\antlr.g:26:40: The following
alternatives are unreachable: 1
This is about the TEXT rule.

Comments are picked up, but text is skipped. What is wrong here?

Cheers,
Mark

grammar antlr;
options {filter=true;}
@header {
package test;
}

@lexer::header {package test;}

@members {
}

file:  (

               COMMENT  {System.out.println("CO: "+$COMMENT.text);}
       |       TEXT     {System.out.println("TE: "+$TEXT.text);}
       )*
       ;



COMMENT
    :   '/*' (options {greedy=false;} : . )* '*/'
    ;

TEXT
       :  (options {greedy=false;} : . )+
       ;
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070515/5bcd738c/attachment.html 

From a.shneyderman at gmail.com  Tue May 15 08:34:46 2007
From: a.shneyderman at gmail.com (Alex Shneyderman)
Date: Tue, 15 May 2007 17:34:46 +0200
Subject: [antlr-interest] Error in produced lexer
Message-ID: <693a69ba0705150834r10a6111chacf9c88acf05a838@mail.gmail.com>

I am on 3.0b7 of ANTLR and was trying to learn about syntactic
predicates today. So, I have the lexer described as so:

lexer grammar Disambiguation;

@lexer::header {
package antlrlist;
}

FLOATORINT
	: (DIGIT+ '.' DIGIT)  => DIGIT+ '.' DIGIT+
	| DIGIT+
	;

fragment DIGIT	: '0'..'9';

after I run Tool the lexer gets generated and no errors are reported
but the generated java is not valid. It has method like this:

    // $ANTLR start synpred1
    public final void synpred1_fragment() throws RecognitionException {
        // Disambiguation.g:17:4: ( ( DIGIT )+ '.' DIGIT )
        // Disambiguation.g:17:5: ( DIGIT )+ '.' DIGIT
        {
        // Disambiguation.g:17:5: ( DIGIT )+
        int cnt=0;
        loop:
        do {
            int alt=;
            switch (alt) {
        	case 1 :
        	    // Disambiguation.g:17:5: DIGIT
        	    {
        	    mDIGIT(); if (failed) return ;

        	    }
        	    break;

        	default :
        	    if ( cnt >= 1 ) break loop;
        	    if (backtracking>0) {failed=true; return ;}
                    EarlyExitException eee =
                        new EarlyExitException(, input);
                    throw eee;
            }
            cnt++;
        } while (true);

        match('.'); if (failed) return ;
        mDIGIT(); if (failed) return ;

        }
    }
    // $ANTLR end synpred1

which is not a valid java.
Anyone knows how to fix this?

-- 
Thanks,
Alex.

From a.shneyderman at gmail.com  Tue May 15 09:10:56 2007
From: a.shneyderman at gmail.com (Alex Shneyderman)
Date: Tue, 15 May 2007 18:10:56 +0200
Subject: [antlr-interest] Fuzzy parsing question.
Message-ID: <693a69ba0705150910n273e9e24p2e256bd193957c35@mail.gmail.com>

Ok, it seems that all I really need for my task is to use the filter
option of antlr3. Except, I do not want to throw everything that does
not match. I want to be able to collect that under on "DEFAULT" token.

How does one go about enabling that?

-- 
Thanks,
Alex.

From parrt at cs.usfca.edu  Tue May 15 09:12:48 2007
From: parrt at cs.usfca.edu (Terence Parr)
Date: Tue, 15 May 2007 09:12:48 -0700
Subject: [antlr-interest] how it works.
In-Reply-To: <3888316b0705150319o40c7c7bfj5092e9a186982da3@mail.gmail.com>
References: <3888316b0705150319o40c7c7bfj5092e9a186982da3@mail.gmail.com>
Message-ID: <98491D7B-AD09-4B37-8457-097219477C73@cs.usfca.edu>

Hi. I've not had a chance to describe them yet.  You'll have to "Use  
the source, Luke". :)

Terence
On May 15, 2007, at 3:19 AM, Frank Yue wrote:

>   Hi , all . I have, of course, had a look round for any
> documentation that might
> help me but all I can find is documentation about how to use the  
> system,
> but not about how it works.
>     Who could tell me where I can find the documents which tell me
> how the class InputBuffer,class CharBuffer   , LexerSharedInput and
> class CharScanner  to work . There is litter useful information on
> Code API page .
>      I am looking forward to your early answer.


From parrt at cs.usfca.edu  Tue May 15 09:14:13 2007
From: parrt at cs.usfca.edu (Terence Parr)
Date: Tue, 15 May 2007 09:14:13 -0700
Subject: [antlr-interest] Question about implementation 'include'
	directive (v3)
In-Reply-To: <op.tsc7k7poe0apl5@shadow>
References: <op.tsbjnfmue0apl5@shadow> <op.tsc7k7poe0apl5@shadow>
Message-ID: <8E167385-5FA3-4677-9505-1E924A3E4140@cs.usfca.edu>

Hi. Have you looked at the mark() method in the lexer?  It saves  
state for you.

Ter


From parrt at cs.usfca.edu  Tue May 15 09:15:50 2007
From: parrt at cs.usfca.edu (Terence Parr)
Date: Tue, 15 May 2007 09:15:50 -0700
Subject: [antlr-interest] Error in produced lexer
In-Reply-To: <693a69ba0705150834r10a6111chacf9c88acf05a838@mail.gmail.com>
References: <693a69ba0705150834r10a6111chacf9c88acf05a838@mail.gmail.com>
Message-ID: <02282AED-0005-422B-B068-BF745B59A604@cs.usfca.edu>


On May 15, 2007, at 8:34 AM, Alex Shneyderman wrote:

> I am on 3.0b7 of ANTLR and was trying to learn about syntactic
> predicates today. So, I have the lexer described as so:
>

>            int alt=;

This bug is fixed in the latest daily build.  Grab from /download/ 
build :)

Ter
>            switch (alt) {
>        	case 1 :
>        	    // Disambiguation.g:17:5: DIGIT
>        	    {
>        	    mDIGIT(); if (failed) return ;
>
>        	    }
>        	    break;
>
>        	default :
>        	    if ( cnt >= 1 ) break loop;
>        	    if (backtracking>0) {failed=true; return ;}
>                    EarlyExitException eee =
>                        new EarlyExitException(, input);
>                    throw eee;
>            }
>            cnt++;
>        } while (true);
>
>        match('.'); if (failed) return ;
>        mDIGIT(); if (failed) return ;
>
>        }
>    }
>    // $ANTLR end synpred1
>
> which is not a valid java.
> Anyone knows how to fix this?
>
> -- 
> Thanks,
> Alex.


From parrt at cs.usfca.edu  Tue May 15 09:19:48 2007
From: parrt at cs.usfca.edu (Terence Parr)
Date: Tue, 15 May 2007 09:19:48 -0700
Subject: [antlr-interest] Fuzzy parsing question.
In-Reply-To: <693a69ba0705150910n273e9e24p2e256bd193957c35@mail.gmail.com>
References: <693a69ba0705150910n273e9e24p2e256bd193957c35@mail.gmail.com>
Message-ID: <A1E82D5B-4834-4002-830A-4B684ED8BC11@cs.usfca.edu>


On May 15, 2007, at 9:10 AM, Alex Shneyderman wrote:

> Ok, it seems that all I really need for my task is to use the filter
> option of antlr3. Except, I do not want to throw everything that does
> not match. I want to be able to collect that under on "DEFAULT" token.
>
> How does one go about enabling that?

DEFAULT : .+ {otherJunk.add($DEFAULT.text);} ;

or some such.

Ter


From me262c at gmail.com  Tue May 15 10:05:03 2007
From: me262c at gmail.com (me 262)
Date: Tue, 15 May 2007 10:05:03 -0700
Subject: [antlr-interest] Exceptions in C++ debugging mode
Message-ID: <b9fb3efe0705151005r581f7b3exf83095602bc76089@mail.gmail.com>

Hi,

  I got a lot of antlr::MismatchedCharException and
antlr::NoViableAltException in the debug tracing mode. The parsing
seems to be working just fine. Is this somethiong I need to worry
about?

Thanks,

ME

From timgclark at gmail.com  Tue May 15 10:26:50 2007
From: timgclark at gmail.com (Tim Clark)
Date: Tue, 15 May 2007 18:26:50 +0100
Subject: [antlr-interest] AntlrWorks - help!
Message-ID: <b6077b530705151026n4eae2e55ueb9abb4fae1d44a2@mail.gmail.com>

Hello
Can someone please tell me where the persistent data of AntlrWorks is placed
(in Windows). Having deleted some files that were in the recently opened
files of AntlrWorks, the program now does not run (the VM is running, but
there is no GUI).
Regards,
Tim Clark
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070515/53883eea/attachment.html 

From ric.klaren at gmail.com  Tue May 15 10:29:12 2007
From: ric.klaren at gmail.com (Ric Klaren)
Date: Tue, 15 May 2007 19:29:12 +0200
Subject: [antlr-interest] Exceptions in C++ debugging mode
In-Reply-To: <b9fb3efe0705151005r581f7b3exf83095602bc76089@mail.gmail.com>
References: <b9fb3efe0705151005r581f7b3exf83095602bc76089@mail.gmail.com>
Message-ID: <bc607a4e0705151029o6205d266x2f4d4078dc124226@mail.gmail.com>

Hi,

On 5/15/07, me 262 <me262c at gmail.com> wrote:
>   I got a lot of antlr::MismatchedCharException and
> antlr::NoViableAltException in the debug tracing mode. The parsing
> seems to be working just fine. Is this somethiong I need to worry
> about?

If you see them when the parser/lexer is in guessing mode (e.g. when
evaluating () => () constructs) then it's normal in other cases
they're probably not.

Cheers,

Ric

From a.shneyderman at gmail.com  Tue May 15 10:34:43 2007
From: a.shneyderman at gmail.com (Alex Shneyderman)
Date: Tue, 15 May 2007 19:34:43 +0200
Subject: [antlr-interest] Fuzzy parsing question.
In-Reply-To: <A1E82D5B-4834-4002-830A-4B684ED8BC11@cs.usfca.edu>
References: <693a69ba0705150910n273e9e24p2e256bd193957c35@mail.gmail.com>
	<A1E82D5B-4834-4002-830A-4B684ED8BC11@cs.usfca.edu>
Message-ID: <693a69ba0705151034p9595b1ejc629160a3f8905bb@mail.gmail.com>

> DEFAULT : .+ {otherJunk.add($DEFAULT.text);} ;
>

this does not work. I get infinite loop this way. I changed it to

 DEFAULT : ~(ANYUSEFULSTARTER)

but this produces a lot of on char tokens. I would lie to force lexer
to aggregate
it.

Any ideas?

Thanks,
Alex.

From parrt at cs.usfca.edu  Tue May 15 10:45:01 2007
From: parrt at cs.usfca.edu (Terence Parr)
Date: Tue, 15 May 2007 10:45:01 -0700
Subject: [antlr-interest] Fuzzy parsing question.
In-Reply-To: <693a69ba0705151034p9595b1ejc629160a3f8905bb@mail.gmail.com>
References: <693a69ba0705150910n273e9e24p2e256bd193957c35@mail.gmail.com>
	<A1E82D5B-4834-4002-830A-4B684ED8BC11@cs.usfca.edu>
	<693a69ba0705151034p9595b1ejc629160a3f8905bb@mail.gmail.com>
Message-ID: <8E62CB9C-A624-4DAE-B300-7F71EE33F75D@cs.usfca.edu>


On May 15, 2007, at 10:34 AM, Alex Shneyderman wrote:

>> DEFAULT : .+ {otherJunk.add($DEFAULT.text);} ;
>>
>
> this does not work. I get infinite loop this way. I changed it to

Did you put it last and use filter=true?

Oh, maybe it needs just DEFAULT : . ;

Ter


From tirelli at post.com  Tue May 15 11:21:34 2007
From: tirelli at post.com (Edson Tirelli)
Date: Tue, 15 May 2007 15:21:34 -0300
Subject: [antlr-interest] Bug in synpreds or error writing the grammar?
Message-ID: <e6dd5ba30705151121o5c13fde4ndf78c39cf87b8b10@mail.gmail.com>

    All,

    I searched the list archives but found no similar problem report, so I
would appreciate your advice.
    In my grammar, rules automatically generate synpreds. Although, for 2 of
them, the generated code presents a compilation error.
    Snippet:


                (
                    (
                    field_and { fc.addRestriction(new
RestrictionConnectiveDescr(RestrictionConnectiveDescr.AND)); }
                    |
                    field_or { fc.addRestriction(new
RestrictionConnectiveDescr(RestrictionConnectiveDescr.OR)); }
                    )
                    constraint_expression[fc]
                )*

    The above is part of a rule. "fc" is a variable defined previously in
that rule. The generated code contains a synpred58 and a synpred58_fragment
methods for the above lines. The problem is that the synpred58_fragment is
making a call to constraint_expression, using the fc variable that is out of
the scope for synpred58_fragment:

    // $ANTLR start synpred58
    public final void synpred58_fragment() throws RecognitionException {
        //
/home/etirelli/workspace/jboss/jbossrules/drools-compiler/src/main/resources/org/drools/lang/DRL.g:1031:6:
( ( field_and | field_or ) constraint_expression[fc] )
        //
/home/etirelli/workspace/jboss/jbossrules/drools-compiler/src/main/resources/org/drools/lang/DRL.g:1031:6:
( field_and | field_or ) constraint_expression[fc]
        {
        //
/home/etirelli/workspace/jboss/jbossrules/drools-compiler/src/main/resources/org/drools/lang/DRL.g:1031:6:
( field_and | field_or )

        /** ALL THE CODE IN HERE **/

        pushFollow(FOLLOW_constraint_expression_in_synpred582720);
        constraint_expression(fc);
        _fsp--;
        if (failed) return ;

        }
    }
    // $ANTLR end synpred58

    It obviously generates the "fc cannot be resolved" error in the java
compilation. I have 2 cases like that in my grammar and I'm not sure if it
is a bug or if I should be writing something differently.

    As a workaround, I added the following lines to the @parser::members {}
section:

    // THE FOLLOWING LINES ARE DUMMY ATTRIBUTES TO WORK AROUND THE PROBLEM
    private BaseDescr from = null;
    private FieldConstraintDescr fc = null;

    Obviously, with such dummy attributes in the generated Parser class, the
code compiles fine and the parser works just fine.

    So, any ideas?

    Thank you in advance.

    Edson

-- 
  Edson Tirelli
  Software Engineer - JBoss Rules Core Developer
  Office: +55 11 3529-6000
  Mobile: +55 11 9287-5646
  JBoss, a division of Red Hat @ www.jboss.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070515/1b9cd557/attachment.html 

From jaluber at gmx.de  Tue May 15 11:42:15 2007
From: jaluber at gmx.de (Johannes Luber)
Date: Tue, 15 May 2007 20:42:15 +0200
Subject: [antlr-interest] Separating text from comment in a source file
In-Reply-To: <fa6015a20705150812n51144876y9c8f7fe838252b55@mail.gmail.com>
References: <fa6015a20705150812n51144876y9c8f7fe838252b55@mail.gmail.com>
Message-ID: <4649FF07.9090104@gmx.de>

Mark Venbrux wrote:
> Hi,
> 
> I would like to separate text from comment in a source file. In the end
> I would like to keep the source code as is, and to process the comments.
> I tried the following grammar, but it doesn't work as expected.
> Warning: [17:01:59] warning(201): d:\temp\antlr.g:26:40: The following
> alternatives are unreachable: 1
> This is about the TEXT rule.
> 
> Comments are picked up, but text is skipped. What is wrong here?
> 
> Cheers,
> Mark

Why is filter=true? With your grammar you don't actually skip anything
but match all text into some tokens. If this isn't enough, then you need
to change TEXT into something like that:

TEXT
   :  (options {greedy=false;} : ~COMMENT_STARTER )+
   ;

COMMENT_STARTER : '/*';

In this case greedy=false may not be needed after all, too, but test it
with this option first.

Best regards,
Johannes Luber

> grammar antlr;
> options {filter=true;}
> @header {
> package test;
> }
> 
> @lexer::header {package test;}
> 
> @members {
> }
> 
> file:  (
> 
>                COMMENT  {System.out.println("CO: "+$COMMENT.text);}
>        |       TEXT     {System.out.println("TE: "+$TEXT.text);}
>        )*
>        ;
> 
> 
> 
> COMMENT
>     :   '/*' (options {greedy=false;} : . )* '*/'
>     ;
> 
> TEXT
>        :  (options {greedy=false;} : . )+
>        ;
> 


From parrt at cs.usfca.edu  Tue May 15 14:32:45 2007
From: parrt at cs.usfca.edu (Terence Parr)
Date: Tue, 15 May 2007 14:32:45 -0700
Subject: [antlr-interest] ANTLR v3 launch party next Tue May 22 7pm
Message-ID: <D958DD11-6665-4723-8F2C-65C5E8C9BA20@cs.usfca.edu>

Hi,

Looks like it will be Tue next week at Univ. of San Francisco.  Got  
permission from USF.  Please email me if you want to go.  Demos of  
ANTLR and ANTLRWorks, free pizza, general language chit-chat.

Please pass this along to anybody or any list you think is  
appropriate.  I'll cut off the number of RSVPs at like 30 people,  
though.

Thanks,
Terence

From jan_ek at op.pl  Tue May 15 15:01:01 2007
From: jan_ek at op.pl (Stefan Chrobot)
Date: Wed, 16 May 2007 00:01:01 +0200
Subject: [antlr-interest] AntlrWorks - help!
In-Reply-To: <b6077b530705151026n4eae2e55ueb9abb4fae1d44a2@mail.gmail.com>
References: <b6077b530705151026n4eae2e55ueb9abb4fae1d44a2@mail.gmail.com>
Message-ID: <464A2D9D.2010809@op.pl>

Tim Clark napisa?(a):
> Hello
> Can someone please tell me where the persistent data of AntlrWorks is 
> placed (in Windows). Having deleted some files that were in the recently 
> opened files of AntlrWorks, the program now does not run (the VM is 
> running, but there is no GUI).

Do you mean the settings? Search the registry (regedit.exe) for key 
"antlr" and delete the subtree called "works". For me it's: 
HKEY_CURRENT_USER\Software\JavaSoft\Prefs\org\antlr\works

Be careful not to damage your registry. Use at your own risk.


Stefan



From damalee5 at gmail.com  Tue May 15 15:48:58 2007
From: damalee5 at gmail.com (damarcus Leacock)
Date: Tue, 15 May 2007 23:48:58 +0100
Subject: [antlr-interest] syntactic predicate question
Message-ID: <6980bb6b0705151548l35e2247auacd6c845101e0584@mail.gmail.com>

Hi,

I'm sure this question has been asked before, I just couldn't find it in the
documentation or mailing list. I wonder why the following doesn't work (see
below). The fragment is useless, but it is a problem that I isolated from a
real grammar I am working on. I just can't understand why the syntactic
predicate does not come to the rescue here. Surely the look-ahead is fixed,
so it should be possible to generate a recursive descent parser for this no?


What do I fail to see?


Many thanks,
d.

(ps. doubt that it matters, but I am using antler 2.5.7 under Java)



-----------------------------------------------------------
class AmbiguousParser extends Parser;
options {
      buildAST = true;
      k = 1;
}

expr
  : sexpr (OP^ sexpr)*
  ;

sexpr
  :  Literal {/* do something */}
  |  ( Literal DOT^ ) => Literal DOT expr {/* do something else */}
  ;


class AmbiguousLexer extends Lexer;

DOT    : '.';
OP     : "*";

Literal
    : ( "a" | "b" )
    ;
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070515/3b51af4e/attachment.html 

From mark.venbrux at gmail.com  Tue May 15 16:09:50 2007
From: mark.venbrux at gmail.com (Mark Venbrux)
Date: Wed, 16 May 2007 01:09:50 +0200
Subject: [antlr-interest] antlr-interest Digest, Vol 30, Issue 33
In-Reply-To: <mailman.0.1179255602.31386.antlr-interest@antlr.org>
References: <mailman.0.1179255602.31386.antlr-interest@antlr.org>
Message-ID: <fa6015a20705151609rd14228g20b1e25e01bea798@mail.gmail.com>

>
> Subject: Re: [antlr-interest] Separating text from comment in a source
> file
> Mark Venbrux wrote:
> > Hi,
> >
> > I would like to separate text from comment in a source file. In the end
> > I would like to keep the source code as is, and to process the comments.
> > I tried the following grammar, but it doesn't work as expected.
> > Warning: [17:01:59] warning(201): d:\temp\antlr.g:26:40: The following
> > alternatives are unreachable: 1
> > This is about the TEXT rule.
> >
> > Comments are picked up, but text is skipped. What is wrong here?
> >
> > Cheers,
> > Mark
>
> Why is filter=true? With your grammar you don't actually skip anything
> but match all text into some tokens. If this isn't enough, then you need
> to change TEXT into something like that:


Thanks for the quick response.
OK I cleaned up my grammar. In AWorks I now get:
line 1:0 required (...)+ loop did not match anything at character 'l'
line 1:1 required (...)+ loop did not match anything at character 'i'
line 1:2 required (...)+ loop did not match anything at character 'n'
line 1:3 required (...)+ loop did not match anything at character 'e'
....
with an early exit exception. I also fiddled with syntactic predicates but
this doesn't work either.
Should be simple enough though? This is the grammar:

> grammar MiCoGen;
>
>  file:  (
>                 ML_COMMENT  {System.out.print("CS: "+$ML_COMMENT.text);}
>         |       TEXT        {System.out.print("TE: "+$TEXT.text);}
>         )+
>         ;
>
>
>  ML_COMMENT : '/*' (options {greedy=false;} : .)+ '*/' ;
>
>  TEXT :  (options {greedy=false;} : ~COMMENT_STARTER )+;
>
>  COMMENT_STARTER : '/*';
>
>




-- 
Mvg,
    Mark
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070516/9f1337ed/attachment.html 

From parrt at cs.usfca.edu  Tue May 15 16:27:14 2007
From: parrt at cs.usfca.edu (Terence Parr)
Date: Tue, 15 May 2007 16:27:14 -0700
Subject: [antlr-interest] syntactic predicate question
In-Reply-To: <6980bb6b0705151548l35e2247auacd6c845101e0584@mail.gmail.com>
References: <6980bb6b0705151548l35e2247auacd6c845101e0584@mail.gmail.com>
Message-ID: <3A510C0B-6981-4C71-93F0-9A376AB0F04B@cs.usfca.edu>


On May 15, 2007, at 3:48 PM, damarcus Leacock wrote:
> sexpr
>   :  Literal {/* do something */}
>   |  ( Literal DOT^ ) => Literal DOT expr {/* do something else */}
>   ;
>

  change the order of the alternatives. :)  The first alternative  
that wins, matches.

Ter


From parrt at cs.usfca.edu  Tue May 15 18:15:55 2007
From: parrt at cs.usfca.edu (Terence Parr)
Date: Tue, 15 May 2007 18:15:55 -0700
Subject: [antlr-interest] Bug in synpreds or error writing the grammar?
In-Reply-To: <e6dd5ba30705151121o5c13fde4ndf78c39cf87b8b10@mail.gmail.com>
References: <e6dd5ba30705151121o5c13fde4ndf78c39cf87b8b10@mail.gmail.com>
Message-ID: <97D45685-3492-4081-8A17-15E807F995C7@cs.usfca.edu>


On May 15, 2007, at 11:21 AM, Edson Tirelli wrote:

>
>     All,
>
>     I searched the list archives but found no similar problem  
> report, so I would appreciate your advice.
>     In my grammar, rules automatically generate synpreds. Although,  
> for 2 of them, the generated code presents a compilation error.
>     Snippet:
>
>
>                 (
>                     (
>                     field_and { fc.addRestriction(new  
> RestrictionConnectiveDescr(RestrictionConnectiveDescr.AND)); }
>                     |
>                     field_or { fc.addRestriction(new  
> RestrictionConnectiveDescr(RestrictionConnectiveDescr.OR)); }
>                     )
>                     constraint_expression[fc]
>                 )*
>
>     The above is part of a rule. "fc" is a variable defined  
> previously in that rule. The generated code contains a synpred58  
> and a synpred58_fragment methods for the above lines. The problem  
> is that the synpred58_fragment is making a call to  
> constraint_expression, using the fc variable that is out of the  
> scope for synpred58_fragment:

Yeah, this is an issue.  The fragment will execute w/o actions and so  
fc won't be valid value anyway.  I'm not sure how to make this  
easier.  In the book i recommend what you do next or to use a dynamic  
rule scope to make values available to invoked rules.

>     As a workaround, I added the following lines to the  
> @parser::members {} section:
>
>     // THE FOLLOWING LINES ARE DUMMY ATTRIBUTES TO WORK AROUND THE  
> PROBLEM
>     private BaseDescr from = null;
>     private FieldConstraintDescr fc = null;
>
>     Obviously, with such dummy attributes in the generated Parser  
> class, the code compiles fine and the parser works just fine.
>
>     So, any ideas?

Not sure how to get around in general.  I try to use synpreds and  
autobacktracking infrequently in general, but here's another good  
reason. ;)

Ter


From professoryue at gmail.com  Tue May 15 20:10:28 2007
From: professoryue at gmail.com (Frank Yue)
Date: Wed, 16 May 2007 11:10:28 +0800
Subject: [antlr-interest] Please give me your valuable advice about antlr .
Message-ID: <3888316b0705152010x19d63ccai294288c5dd50ff3f@mail.gmail.com>

Dear  Prof. Terence Parr:
       Hello! I am sorry to disturb you. Could you please answer some
questions I met?
If I want to know more about the code-generating mechanism of antlr,
and modify them freely based on the generated codes according to my
requests, how should I do? what knowledge of compilers principle
should I know? If possible, could you please give me some related
documents?
       Thank you for reading this letter, waiting for your kind reply!

From travis_caldwell2000 at yahoo.com  Tue May 15 23:45:16 2007
From: travis_caldwell2000 at yahoo.com (Travis Caldwell)
Date: Tue, 15 May 2007 23:45:16 -0700 (PDT)
Subject: [antlr-interest] ANTLR3 ant task class file problem
Message-ID: <526524.4949.qm@web58409.mail.re3.yahoo.com>


 Hi, 

 I was attempting to use the ANTLR3 ant task that was uploaded to the
file sharing site and I get the following error:

 BUILD FAILED
java.lang.UnsupportedClassVersionError: Bad version number in .class
file

 Googling this list I see that someone previously had the same issue:

> [antlr-interest] comments on ant task for v3..
> Eitan Suez eitan.suez at gmail.com
> Thu Feb 8 14:14:53 PST 2007
[...]
> 5. the ant task appears to be built with java 6.
>  i tried to run a test target and am getting this:
> BUILD FAILED
> java.lang.UnsupportedClassVersionError: Bad version number in .class 
file

 It also looks like there was an attempt to solve this here:

> [antlr-interest] updated antlr3 ANT task
>Terence Parr parrt at cs.usfca.edu
>Sat Feb 10 16:08:49 PST 2007
[...]
>       Compiled the antlr3 taks with -source 5 for compatibility  
with Java 5.

 I checked the zip that I downloaded and I definitely have the new
version since the readme in the zip also refers to being compiled with
"-source 5". It also includes the simplecTreeParser example refered to
in the email about the new version.

The class file looks to like it was built for java 6: 

$ od -tx1 ANTLR3.class | head
0000000 ca fe ba be 00 00 00 32 02 0d 0a 00 ae 01 05 07
                             ^^
The major number is 50 decimal which according to this:


http://help.eclipse.org/help32/index.jsp?topic=/org.eclipse.jdt.doc.isv/guide/jdt_api_compile.htm

Indicates a Java 6 class file.

 Perhaps the compile should be done with "-source 5 -target 5" in order
to be compatible with both java 5 & 6.

 I think that "-source 5" may only instruct the compiler to expcet java
5 source, but it will still emit java 6 class files.

 Thanks.

                  _Travis_Caldwell_






       
____________________________________________________________________________________
Moody friends. Drama queens. Your life? Nope! - their life, your story. Play Sims Stories at Yahoo! Games.
http://sims.yahoo.com/  

From antlr at mirality.co.nz  Wed May 16 05:11:59 2007
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Thu, 17 May 2007 00:11:59 +1200
Subject: [antlr-interest] [Antlr 3] lexer problem
In-Reply-To: <FA98547F-2F3D-4229-A4E1-703D3676CBFD@efftinge.de>
References: <859B24EF-40DA-4228-81CF-C65A3F69FBB3@efftinge.de>
	<693a69ba0705150145o50841a6ai5d7edaa28e1d8d46@mail.gmail.com>
	<FA98547F-2F3D-4229-A4E1-703D3676CBFD@efftinge.de>
Message-ID: <20070516121217.0AABD19080F@www.antlr.org>

At 20:57 15/05/2007, Sven Efftinge wrote:
 >Yes, I know. But I'd expect that the lexer tracks back when it
 >can not complete the optional ('.' DIGIT)? part.
 >So it just consumes 42 (because it is a valid FLOAT, too).
 >The parser behaves like this, but the lexer not.
 >I'd expected that the following two grammars would successfully
 >parse '42.foo'

Yeah, I have to say I agree with that one.  Slight variation:

lexer grammar Test;
DOT : '.';
TEXT :	('a'..'z')+;
FLOAT : DIGIT (DOT DIGIT)?;
fragment DIGIT : ('0'..'9')+;

I expect the output of the lexer to be FLOAT(42) DOT(.) TEXT(foo).

But it's not.  Instead it outputs an error:
   1:3 required (...)+ loop did not match anything at character 
'f'
and then outputs TEXT(oo).  This makes no sense to me, since the 
loop is *not* required, as it's being called from an optional 
block.  Any failure to match within that block should 
auto-rollback both with or without backtracking enabled, and 
proceed exactly as it would if the optional block were missing 
from the grammar.  (Currently it doesn't seem to do any sort of 
rollback at all, even with backtracking on.)

No syntactic predicates should be required here.  That doesn't 
seem like a good solution to this problem.  (If ANTLR internally 
needs the predicates for some reason, it should generate them 
itself, since it's basically just restating what the grammar 
already said.)  In fact I can't think of any case where syntactic 
predicates should actually be needed to be specified explicitly in 
the lexer.

(Note that the above output was tested under b7; it's possible 
it's been corrected since without me noticing.)


From j.reid at mail.cryst.bbk.ac.uk  Wed May 16 06:30:37 2007
From: j.reid at mail.cryst.bbk.ac.uk (John Reid)
Date: Wed, 16 May 2007 14:30:37 +0100
Subject: [antlr-interest] Exit Status from ANTLR
In-Reply-To: <200611200647.34544.rschulz@sonic.net>
References: <200611191412.25438.rschulz@sonic.net>	<9da4f4520611200040o6cdf4ea9mba4955f4d616b602@mail.gmail.com>
	<200611200647.34544.rschulz@sonic.net>
Message-ID: <f2f13k$ett$1@sea.gmane.org>

If antlr is invoked by

java antlr.Tool

then the antlr.Tool class must have a main method. Presumably this main 
method is not called by any other code except when antlr is executed 
from the command line?

If it isn't then why not call system.exit(1) when there is a problem in 
antlr.Tool.main.

If it is called by other code then why not create
an antlr.ToolCommandLine class that wraps antlr.Tool and does call 
system.exit with a non-zero return code when necessary.

All in all it seems a fairly serious short-coming of the command line 
interface that the calling process has no straightforward way of knowing 
whether antlr succeeded.

Best,
John.



Randall R Schulz wrote:
> Oliver,
> 
> On Monday 20 November 2006 00:40, you wrote:
>> I do not think so. Using System.exit in an IDE like e.g. Eclipse will
>> either tear down the whole IDE or cause a security exception. Neither
>> option is desirable.
> 
> I specifically asked that this be done for the command-line interface 
> invoked via the main method org.antlr.Tool. That method should only be 
> used by the stand-alone CLI tool.
> 
> 
> Randall Schulz
> 
> 
>> Oliver
>>
>> 2006/11/19, Randall R Schulz <rschulz at sonic.net>:
>>> Hi,
>>>
>>> It would be nice if the ANTLR command (as in {@link
>>> org.antlr.Tool#main(String[])} would call
>>> System.exit(somethingNonZero) if it detected and error in the
>>> submitted grammar specification.
> 


From j.reid at mail.cryst.bbk.ac.uk  Wed May 16 07:06:01 2007
From: j.reid at mail.cryst.bbk.ac.uk (John Reid)
Date: Wed, 16 May 2007 15:06:01 +0100
Subject: [antlr-interest] Exit Status from ANTLR
In-Reply-To: <f2f13k$ett$1@sea.gmane.org>
References: <200611191412.25438.rschulz@sonic.net>	<9da4f4520611200040o6cdf4ea9mba4955f4d616b602@mail.gmail.com>	<200611200647.34544.rschulz@sonic.net>
	<f2f13k$ett$1@sea.gmane.org>
Message-ID: <f2f35v$msa$1@sea.gmane.org>

> Randall R Schulz wrote:
>> I specifically asked that this be done for the command-line interface 
>> invoked via the main method org.antlr.Tool. That method should only be 
>> used by the stand-alone CLI tool.

What are the chances of having this fixed in antlr version 2?



From j.reid at mail.cryst.bbk.ac.uk  Wed May 16 07:45:13 2007
From: j.reid at mail.cryst.bbk.ac.uk (John Reid)
Date: Wed, 16 May 2007 15:45:13 +0100
Subject: [antlr-interest] Specify directory for importVocab
Message-ID: <f2f5fg$jg$1@sea.gmane.org>

Is it possible to specify which directories should be searched for 
importVocabs via an argument on the command line? If not this seems like 
a fairly desirable option.

Thanks,
John.


From jaluber at gmx.de  Wed May 16 07:53:31 2007
From: jaluber at gmx.de (Johannes Luber)
Date: Wed, 16 May 2007 16:53:31 +0200
Subject: [antlr-interest] antlr-interest Digest, Vol 30, Issue 33
In-Reply-To: <fa6015a20705151609rd14228g20b1e25e01bea798@mail.gmail.com>
References: <mailman.0.1179255602.31386.antlr-interest@antlr.org>
	<fa6015a20705151609rd14228g20b1e25e01bea798@mail.gmail.com>
Message-ID: <464B1AEB.1050305@gmx.de>

Mark Venbrux wrote:
>     Subject: Re: [antlr-interest] Separating text from comment in a
>     source file
>     Mark Venbrux wrote:
>     > Hi,
>     >
>     > I would like to separate text from comment in a source file. In
>     the end
>     > I would like to keep the source code as is, and to process the
>     comments.
>     > I tried the following grammar, but it doesn't work as expected.
>     > Warning: [17:01:59] warning(201): d:\temp\antlr.g:26:40: The following
>     > alternatives are unreachable: 1
>     > This is about the TEXT rule.
>     >
>     > Comments are picked up, but text is skipped. What is wrong here?
>     >
>     > Cheers,
>     > Mark
> 
>     Why is filter=true? With your grammar you don't actually skip anything
>     but match all text into some tokens. If this isn't enough, then you need
>     to change TEXT into something like that: 
> 
> 
> Thanks for the quick response.
> OK I cleaned up my grammar. In AWorks I now get:
> line 1:0 required (...)+ loop did not match anything at character 'l'
> line 1:1 required (...)+ loop did not match anything at character 'i'
> line 1:2 required (...)+ loop did not match anything at character 'n'
> line 1:3 required (...)+ loop did not match anything at character 'e'
> ....
> with an early exit exception. I also fiddled with syntactic predicates
> but this doesn't work either.
> Should be simple enough though? This is the grammar:
> 
>> grammar MiCoGen;
>>    
>>  file:  (
>>                 ML_COMMENT  {System.out.print("CS: "+$ML_COMMENT.text);}
>>         |       TEXT        {System.out.print("TE: "+$TEXT.text);}
>>         )+
>>         ;
>>    
>>    
>>  ML_COMMENT : '/*' (options {greedy=false;} : .)+ '*/' ;
>>    
>>  TEXT :  (options {greedy=false;} : ~COMMENT_STARTER )+;
>>    
>>  COMMENT_STARTER : '/*';

I've tried to circumvent the exception problem (I have no idea why that
exception actually happens - maybe someone else can shed light on it)
with another grammar based on C#, but while I could define the comments
exactly, I didn't manage to define the text correctly. Below is the
important part (with some extra rules, you may find useful) of the C#
grammar. Maybe you manage to find the solution.

Best regards,
Johannes Luber

input
	:	input_section* EOF
	;

input_section
	:	input_element* NEW_LINE
	|	pp_directive
	;

input_element
	:	whitespace
	|	comment
	|	token
	;

whitespace
	:	WHITESPACE_CHARACTERS
	;

fragment WHITESPACE_CHARACTERS
	:	WHITESPACE_CHARACTER+
	;

fragment WHITESPACE_CHARACTER
	:	UNICODE_CLASS_Zs
	|	'\u0009' // Horizontal tab character
	|	'\u000B' // Vertical tab character
	|	'\u000C' // Form feed character
	;

NEW_LINE
	:	'\u000D' // Carriage return character
	|	'\u000A' // Line feed character
	|	'\r\n'	 // '\u000D\u000A' doesn't work in Java // Carriage return
character followed by line feed character
	|	'\u0085' // Next line character
	|	'\u2028' // Line separator character
	|	'\u2029' // Paragraph separator character
	;
	
comment
	:	single_line_comment
	|	delimited_comment
	;
	
single_line_comment
	:	'//' INPUT_CHARACTER*
	;
	
	
fragment INPUT_CHARACTER
	:	~NEW_LINE_CHARACTER // Any Unicode character except a new_line_character
	;

NEW_LINE_CHARACTER
	:	'\u000D' // Carriage return character
	|	'\u000A' // Line feed character
	|	'\u0085' // Next line character
	|	'\u2028' // Line separator character
	|	'\u2029' // Paragraph separator character
	;
	
delimited_comment
	:	'/*' DELIMITED_COMMENT_SECTION* ASTERISKS '/'
	;
		
fragment DELIMITED_COMMENT_SECTION
	:	NOT_ASTERISK
	|	ASTERISKS NOT_SLASH
	;
	
fragment ASTERISKS
	:	('*') ('*')*
	;
	
fragment NOT_ASTERISK
	:	~'*' // Any Unicode character except *
	;
	
fragment NOT_SLASH
	:	~'/' // Any Unicode character except /
	;
	
fragment UNICODE_CLASS_Zs // Any character with Unicode class Zs (18
characters known)
	:	'\u0020' // SPACE
	|	'\u00A0' // NO_BREAK SPACE
	|	'\u1680' // OGHAM SPACE MARK
	|	'\u180E' // MONGOLIAN VOWEL SEPARATOR
	|	'\u2000' // EN QUAD
	|	'\u2001' // EM QUAD
	|	'\u2002' // EN SPACE
	|	'\u2003' // EM SPACE
	|	'\u2004' // THREE_PER_EM SPACE
	|	'\u2005' // FOUR_PER_EM SPACE
	|	'\u2006' // SIX_PER_EM SPACE
	|	'\u2008' // PUNCTUATION SPACE
	|	'\u2009' // THIN SPACE
	|	'\u200A' // HAIR SPACE
	|	'\u202F' // NARROW NO_BREAK SPACE
	|	'\u3000' // IDEOGRAPHIC SPACE
	|	'\u205F' // MEDIUM MATHEMATICAL SPACE
	;

token
	:	identifier
	|	keyword
	|	integer_literal
	|	real_literal
	|	character_literal
	|	string_literal
	|	OPERATOR_OR_PUNCTUATOR
	;

From parrt at cs.usfca.edu  Wed May 16 09:28:40 2007
From: parrt at cs.usfca.edu (Terence Parr)
Date: Wed, 16 May 2007 09:28:40 -0700
Subject: [antlr-interest] Specify directory for importVocab
In-Reply-To: <f2f5fg$jg$1@sea.gmane.org>
References: <f2f5fg$jg$1@sea.gmane.org>
Message-ID: <40F2A260-E94F-4CEF-832A-A17AE6528269@cs.usfca.edu>


On May 16, 2007, at 7:45 AM, John Reid wrote:

> Is it possible to specify which directories should be searched for  
> importVocabs via an argument on the command line? If not this seems  
> like a fairly desirable option.

try java org.antlr.Tool.  Should give list of args.

Use -lib i think.

Ter


From j.reid at mail.cryst.bbk.ac.uk  Wed May 16 09:34:06 2007
From: j.reid at mail.cryst.bbk.ac.uk (John Reid)
Date: Wed, 16 May 2007 17:34:06 +0100
Subject: [antlr-interest] Specify directory for importVocab
In-Reply-To: <40F2A260-E94F-4CEF-832A-A17AE6528269@cs.usfca.edu>
References: <f2f5fg$jg$1@sea.gmane.org>
	<40F2A260-E94F-4CEF-832A-A17AE6528269@cs.usfca.edu>
Message-ID: <f2fbrk$pps$1@sea.gmane.org>


Terence Parr wrote:
> 
> try java org.antlr.Tool.  Should give list of args.
> 
> Use -lib i think.
> 
This class doesn't exist in my 2.7.5 jar. When I try java antlr.Tool I 
don't see the -lib argument.

Can I upgrade to a newer antlr with the -lib option functionality 
without changing my grammars?

Thanks,
John.


From parrt at cs.usfca.edu  Wed May 16 09:50:14 2007
From: parrt at cs.usfca.edu (Terence Parr)
Date: Wed, 16 May 2007 09:50:14 -0700
Subject: [antlr-interest] Specify directory for importVocab
In-Reply-To: <f2fbrk$pps$1@sea.gmane.org>
References: <f2f5fg$jg$1@sea.gmane.org>
	<40F2A260-E94F-4CEF-832A-A17AE6528269@cs.usfca.edu>
	<f2fbrk$pps$1@sea.gmane.org>
Message-ID: <0099A6D6-7B6C-4E5D-9F18-71BA3B39B4B6@cs.usfca.edu>

oh. ANTLR v2 didn't have that feature.  Can't upgrade supereasily.  W/ 
o actions, it's trivial to tweak.

Ter
On May 16, 2007, at 9:34 AM, John Reid wrote:

>
> Terence Parr wrote:
>> try java org.antlr.Tool.  Should give list of args.
>> Use -lib i think.
> This class doesn't exist in my 2.7.5 jar. When I try java  
> antlr.Tool I don't see the -lib argument.
>
> Can I upgrade to a newer antlr with the -lib option functionality  
> without changing my grammars?
>
> Thanks,
> John.
>


From j.reid at mail.cryst.bbk.ac.uk  Wed May 16 09:57:01 2007
From: j.reid at mail.cryst.bbk.ac.uk (John Reid)
Date: Wed, 16 May 2007 17:57:01 +0100
Subject: [antlr-interest] Specify directory for importVocab
In-Reply-To: <f2fbrk$pps$1@sea.gmane.org>
References: <f2f5fg$jg$1@sea.gmane.org>	<40F2A260-E94F-4CEF-832A-A17AE6528269@cs.usfca.edu>
	<f2fbrk$pps$1@sea.gmane.org>
Message-ID: <f2fd6k$v0c$1@sea.gmane.org>

> Terence Parr wrote:
>>
>> try java org.antlr.Tool.  Should give list of args.
>>
>> Use -lib i think.
>>
I beginning to think you mean the -glib argument for super grammars? I'm 
talking about a way of specifying where the TokenTypes.txt files are.

E.g. if I execute
java antlr.Tool BiobaseLexer.gl in the directory where 
CommonTokenTypes.txt is then everything works as expected.

I would like to execute this command from elsewhere and specify where 
the CommonTokenTypes.txt file is.

Is this possible?

Thanks,
John.


From damalee5 at gmail.com  Wed May 16 10:30:05 2007
From: damalee5 at gmail.com (damarcus Leacock)
Date: Wed, 16 May 2007 18:30:05 +0100
Subject: [antlr-interest] lexer being fussy -why?
Message-ID: <6980bb6b0705161030k2637783ah7ebd82a199e89792@mail.gmail.com>

Hi,

I am working on a little language, using the lexer below. I was baffled to
notice that I got lexing errors when I use identifiers (in example programs
of that language) that have more than two characters in common with the
tokens that I defined. That is despite the fact that the identifiers-rule
has testLiterals set to true. So

var thau := ...

results in an error saying something like "found 'a' while expecting 'e' "
(presume it is matching the then token).

I can of course solve this by upping the k to
be higher than the length of any of my tokens, but I am a bit surprised that
this would be necessary. Why does the lexer feel the need to start screaming
when in this situation? Could anyone enlighten this naive soul?

thanx,
d.


----------------------
vardecl
  : VAR^ Identifier ASSIGN! expr
  ;

-------------------------
class MyLexer extends Lexer;

options {
k = 2;
charVocabulary = '\0'..'\377'; //unicode
testLiterals=false; // don't automatically test for literals
}


IF : "if";
THEN : "then";
ELSE : "else";
WHILE : "while";
DO : "do";
VAR : "var";
ASSIGN : ":=";
SKIP : "skip";
RETURN : "return";
TYPE : "type";
LAMBDA : "lambda";

COLON : ':';
SEMICOLON : ';';
COMMA : ',';
LPAREN : '(';
RPAREN : ')';
LCURLY : '{';
RCURLY : '}';
LSQBRACKET : '[';
RSQBRACKET : ']';
DOT : '.';
MU : '@';
ARROW : "->";
PLUS : '+';
MINUS : '-';
TIMES : '*';
DIV : '/';
MOD : '%';
CONCAT : '^';
EQUALS : "==";
LEQ : "<=";
EQUALSIGN : '=';


Identifier
options {testLiterals=true;}
: Letter (Letter|Digit)*
;

protected Letter //from java grammar
: '\u0024' |
'\u0041'..'\u005a' |
'\u005f' |
'\u0061'..'\u007a' |
'\u00c0'..'\u00d6' |
'\u00d8'..'\u00f6' |
'\u00f8'..'\u00ff' |
'\u0100'..'\u1fff' |
'\u3040'..'\u318f' |
'\u3300'..'\u337f' |
'\u3400'..'\u3d2d' |
'\u4e00'..'\u9fff' |
'\uf900'..'\ufaff'
;
protected Digit
: '0'..'9'
;

StringLiteral
: '"'! ( ~('"'|'\n'|'\r') )* '"'!
// : '"'! ( '\\''"' | ~('"'|'\n'|'\r') )* '"'!
;
NumberLiteral
: ('0' | '1'..'9' ('0'..'9')*)
;
BoolLiteral
: ( "true" | "false" )
;
Comment
: "//" (~('\n'|'\r'))*
{ $setType(Token.SKIP); }
;

WS
: ( ' '
| '\t'
| '\f'

// handle newlines
| ( "\r\n" // DOS/Windows
| '\r' // Macintosh
| '\n' // Unix
)
// increment the line count in the scanner
{ newline(); }
)
{ $setType(Token.SKIP); }
;
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070516/6fa3d9f6/attachment-0001.html 

From wcai at xwarelabs.com  Wed May 16 18:32:47 2007
From: wcai at xwarelabs.com (William Cai)
Date: Thu, 17 May 2007 09:32:47 +0800
Subject: [antlr-interest] Please give me your valuable advice about
	antlr .
In-Reply-To: <3888316b0705152010x19d63ccai294288c5dd50ff3f@mail.gmail.com>
References: <3888316b0705152010x19d63ccai294288c5dd50ff3f@mail.gmail.com>
Message-ID: <fb731ec20705161832i4145085o87b8b64c54792b84@mail.gmail.com>

Frank,

1. Antlr is an open source software. If you really want to learn its code
generation mechanism, its defects, bugs, source code is always the first
thing you need to investigate.
2. There are quite a few compiler "bibles" in the world (e.g. the dragon
book). Get one, read it.
3. http://www.antlr.org/doc/index.html
4. Some exercises may help you understand how Antlr works.

I'm not Prof. Parr. He may provide more "professional" advices. :-)

Thanks,
William



On 5/16/07, Frank Yue <professoryue at gmail.com> wrote:
>
> Dear  Prof. Terence Parr:
>        Hello! I am sorry to disturb you. Could you please answer some
> questions I met?
> If I want to know more about the code-generating mechanism of antlr,
> and modify them freely based on the generated codes according to my
> requests, how should I do? what knowledge of compilers principle
> should I know? If possible, could you please give me some related
> documents?
>        Thank you for reading this letter, waiting for your kind reply!
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070517/3835e227/attachment.html 

From rschulz at sonic.net  Wed May 16 18:46:08 2007
From: rschulz at sonic.net (Randall R Schulz)
Date: Wed, 16 May 2007 18:46:08 -0700
Subject: [antlr-interest] Please give me your valuable advice about
	antlr .
In-Reply-To: <fb731ec20705161832i4145085o87b8b64c54792b84@mail.gmail.com>
References: <3888316b0705152010x19d63ccai294288c5dd50ff3f@mail.gmail.com>
	<fb731ec20705161832i4145085o87b8b64c54792b84@mail.gmail.com>
Message-ID: <200705161846.08936.rschulz@sonic.net>

On Wednesday 16 May 2007 18:32, William Cai wrote:
> Frank,
>
> ...
>
> I'm not Prof. Parr. He may provide more "professional" advices. :-)

Or, at least, more professorial advice...


> Thanks,
> William


RRS

From j.reid at mail.cryst.bbk.ac.uk  Thu May 17 01:28:59 2007
From: j.reid at mail.cryst.bbk.ac.uk (John Reid)
Date: Thu, 17 May 2007 09:28:59 +0100
Subject: [antlr-interest] Specify directory for importVocab
In-Reply-To: <0099A6D6-7B6C-4E5D-9F18-71BA3B39B4B6@cs.usfca.edu>
References: <f2f5fg$jg$1@sea.gmane.org>	<40F2A260-E94F-4CEF-832A-A17AE6528269@cs.usfca.edu>	<f2fbrk$pps$1@sea.gmane.org>
	<0099A6D6-7B6C-4E5D-9F18-71BA3B39B4B6@cs.usfca.edu>
Message-ID: <f2h3q2$pbk$1@sea.gmane.org>



Terence Parr wrote:
> oh. ANTLR v2 didn't have that feature.  Can't upgrade supereasily.  W/o 
> actions, it's trivial to tweak.
> 
Trivial to tweak how? What do you mean "without actions"?

Thanks,
John.


From merupo at yahoo.com  Thu May 17 07:55:31 2007
From: merupo at yahoo.com (Vara Prasad)
Date: Thu, 17 May 2007 07:55:31 -0700 (PDT)
Subject: [antlr-interest] Filtering using ANTLR
Message-ID: <134155.97747.qm@web35510.mail.mud.yahoo.com>

Hi All,
  I am some what new to ANTLR.
  I would like to know how to use filtering using
ANTLR.I saw example provided in examples,but i did not
get much out of that.
  Currently am writing java parser using ANTLR(2.7.7).
  I am parsing  large text file and get desired
contents based on rules that i defined in my grammar
file. 
  Any help/suggestions will be greately appreciated.

Thanks In Advance,
-Prasad

example:
 I've following content in my input file for my parser
i would like to extract only following segment. 

crypto
 ip-address-pool 22.0.0.0 255.255.0.0
exit

Input file content:
===================

interface ethernet 13/1
 ip address 31.1.1.77 255.255.0.0
 next-hop common 31.1.1.88
  shaping-class unc
   egress-queue unc-green
   egress-queue unc-yellow
  exit
  shaping-class mgw
   egress-queue mgw-green
   egress-queue mgw-yellow
  exit
  shaping-class ggw
   egress-queue ggw-green
   egress-queue ggw-yellow
  exit
  shaping-class default
   egress-queue DefaultEgressQueue
  exit
 exit
exit
clock
 timezone -5
 sntp server 72.1.1.29
 sntp interval 1 hours
 time-sync sntp
exit
crypto
 ip-address-pool 22.0.0.0 255.255.0.0
exit
high-availability
 no auto takeover
 node Primary
  interface ha-2 ip address 10.6.2.53
  interface ha-1 ip address 1.1.1.53
 exit
 node Secondary
  interface ha-2 ip address 10.6.2.52
  interface ha-1 ip address 1.1.1.52
 exit
 interface group Public
  interface ethernet 15/1
  interface ethernet 1/1
 exit
 interface group Private
  interface ethernet 13/1
  interface ethernet 3/1
 exit
exit 


 
____________________________________________________________________________________
Bored stiff? Loosen up... 
Download and play hundreds of games for free on Yahoo! Games.
http://games.yahoo.com/games/front

From timgclark at gmail.com  Thu May 17 12:01:43 2007
From: timgclark at gmail.com (Tim Clark)
Date: Thu, 17 May 2007 20:01:43 +0100
Subject: [antlr-interest] Parser --> TreeParser: help with bigger example
	please?
Message-ID: <b6077b530705171201s6fef3a1aj31808fe2bdfc5dce@mail.gmail.com>

Hi All
The book gives a rather simple (and easy to understand) example of the step
from the parser to the tree parser (for expressions). When it's a lot more
complicated (as below, for example) I'm a little stumped as to how to do it.
Any words of advice would be greatly appreciated. Intuitively it's clear
that one ends up with lists of simple things like ^('+' arg1 arg2) or ^('-'
arg), but it's a bit mind-boggling when the rules are so much more
complicated.

expr
    :
    assignExpr
    ;

assignExpr
    :
    condExpr (assignOp^ assignExpr)?
    ;

assignOp
    :
    ASSIGN | PLUS_ASSIGN | MINUS_ASSIGN | STAR_ASSIGN | DIV_ASSIGN
    | MOD_ASSIGN | CAT_ASSIGN | OR_ASSIGN | AND_ASSIGN | XOR_ASSIGN |
LCAT_ASSIGN
    ;

condExpr
    :
    condOrExpr (QUESTION^ expr COLON expr)?
    ;

condOrExpr
    :
    condAndExpr (LOGICAL_OR^ condAndExpr)*
    ;

condAndExpr
    :
    eqExpr (LOGICAL_AND^ eqExpr)*
    ;

eqExpr
    :
    relExpr ((IS_EQUAL^ | NOT_EQUAL^) relExpr)*
    ;

relExpr
    :
    incOrExpr ((LESS_THAN^ | GREATER_THAN^ | LESS_OR_EQUAL^ |
GREATER_OR_EQUAL^) incOrExpr)*
    ;

incOrExpr
    :
    excOrExpr (LINE^ excOrExpr)*
    ;

excOrExpr
    :
    andExpr (HAT^ andExpr)*
    ;

andExpr
    :
    shiftExpr (AMPER^ shiftExpr)*
    ;

shiftExpr
    :
    addExpr ((LSHIFT^ | RSHIFT^) addExpr)*
    ;

addExpr
    :
    multExpr ((PLUS^ | MINUS^ | CAT^ | LIST_CAT^) multExpr)*
    ;

multExpr
    :
    unaryExpr ((STAR^ | DIV^ | MOD^) unaryExpr)*
    ;

unaryExpr
    :
    primaryExpr
    |
    negation
    |
    binaryComp
    |
    logicalNot
    |
    sizeOf
    ;

negation
    :
    NEGATE unaryExpr
    -> ^(NEG unaryExpr)
    ;

binaryComp
    :
    COMPLEMENT unaryExpr
    -> ^(COMPL unaryExpr)
    ;

logicalNot
    :
    LOGICAL_NOT unaryExpr
    -> ^(NOT unaryExpr)
    ;

sizeOf
    :
    SIZE unaryExpr
    -> ^(SIZEOF unaryExpr)
    ;

primaryExpr
options {backtrack=true;}
    :
    constant
    |
    ID
    |
    parenExpr
    |
    funcCall
    |
    listSelector
    |
    listCons
    |
    mapCons
    |
    preInc
    |
    postInc
    |
    preDec
    |
    postDec
    ;

parenExpr
    :
    LPAREN! expr RPAREN!
    ;

exprList
    :
    expr (COMMA! expr)*
    |
    // Empty
    ;

funcCall
    :
    ID LPAREN exprList RPAREN
    -> ^(CALL ID exprList)
    ;

listCons
    :
    LBRAK exprList RBRAK
    -> ^(LIST_CONS exprList)
    ;

listSelector
    :
    ID sliceList
    -> ^(LIST_SEL ID sliceList)
    ;

sliceList
    :
    listSlice (listSlice)*
    ;

listSlice
    :
    LBRAK! expr RBRAK!
    ;

mapCons
    :
    '{{' keyValueList '}}'
    -> ^(MAP_CONS keyValueList)
    ;

keyValueList
    :
    keyValuePair (','! keyValuePair)*
    |
    /*Empty*/
    ;

keyValuePair
    :
    e1=expr ':' e2=expr
    -> ^(KEY_VALUE_PAIR $e1 $e2)
    ;

preInc
    :
    (DPLUS listSelector) => DPLUS listSelector
    -> ^(PRE_INC listSelector)
    |
    DPLUS ID
    -> ^(PRE_INC ID)
    ;

postInc
    :
    (listSelector DPLUS) => listSelector DPLUS
    -> ^(POST_INC listSelector)
    |
    ID DPLUS
    -> ^(POST_INC ID)
    ;

preDec
    :
    (DMINUS listSelector) => DMINUS listSelector
    -> ^(PRE_DEC listSelector)
    |
    DMINUS ID
    -> ^(PRE_DEC ID)
    ;

postDec
    :
    (listSelector DMINUS) => listSelector DMINUS
    -> ^(POST_DEC listSelector)
    |
    ID DMINUS
    -> ^(POST_DEC ID)
    ;

constant
    :
    STRING
    |
    NUM_INT
    |
    NUM_FLOAT
    |
    'true'
    |
    'false'
    |
    'nil'
    ;

Tim
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070517/f8f452e5/attachment.html 

From jimi at temporal-wave.com  Thu May 17 12:07:20 2007
From: jimi at temporal-wave.com (Jim Idle)
Date: Thu, 17 May 2007 12:07:20 -0700
Subject: [antlr-interest] Parser --> TreeParser: help with bigger
	exampleplease?
In-Reply-To: <b6077b530705171201s6fef3a1aj31808fe2bdfc5dce@mail.gmail.com>
References: <b6077b530705171201s6fef3a1aj31808fe2bdfc5dce@mail.gmail.com>
Message-ID: <B36CCC332A32904F8FA3DE134A235336252542@wavemachine.temporal-wave.com>

Tim,

 

The best way is to plug this grammar in to AntlrWorks and throw small
snippets of input at it. Then you will get a graphical view of the trees
produced and it should make more sense to you.

 

Jim

 

From: antlr-interest-bounces at antlr.org
[mailto:antlr-interest-bounces at antlr.org] On Behalf Of Tim Clark
Sent: Thursday, May 17, 2007 12:02 PM
To: antlr-interest
Subject: [antlr-interest] Parser --> TreeParser: help with bigger
exampleplease?

 

Hi All
The book gives a rather simple (and easy to understand) example of the
step from the parser to the tree parser (for expressions). When it's a
lot more complicated (as below, for example) I'm a little stumped as to
how to do it. Any words of advice would be greatly appreciated.
Intuitively it's clear that one ends up with lists of simple things like
^('+' arg1 arg2) or ^('-' arg), but it's a bit mind-boggling when the
rules are so much more complicated. 

expr
    :
    assignExpr
    ;

assignExpr
    :
    condExpr (assignOp^ assignExpr)?
    ;

assignOp
    :
    ASSIGN | PLUS_ASSIGN | MINUS_ASSIGN | STAR_ASSIGN | DIV_ASSIGN
    | MOD_ASSIGN | CAT_ASSIGN | OR_ASSIGN | AND_ASSIGN | XOR_ASSIGN |
LCAT_ASSIGN
    ;

condExpr
    :
    condOrExpr (QUESTION^ expr COLON expr)?
    ;
    
condOrExpr
    :
    condAndExpr (LOGICAL_OR^ condAndExpr)*    
    ;

condAndExpr
    :
    eqExpr (LOGICAL_AND^ eqExpr)*
    ;

eqExpr
    :
    relExpr ((IS_EQUAL^ | NOT_EQUAL^) relExpr)*
    ;

relExpr
    :
    incOrExpr ((LESS_THAN^ | GREATER_THAN^ | LESS_OR_EQUAL^ |
GREATER_OR_EQUAL^) incOrExpr)* 
    ;

incOrExpr
    :
    excOrExpr (LINE^ excOrExpr)*
    ;

excOrExpr
    :
    andExpr (HAT^ andExpr)*
    ;

andExpr
    :
    shiftExpr (AMPER^ shiftExpr)*
    ;

shiftExpr
    :
    addExpr ((LSHIFT^ | RSHIFT^) addExpr)*
    ;

addExpr
    :
    multExpr ((PLUS^ | MINUS^ | CAT^ | LIST_CAT^) multExpr)*
    ;

multExpr
    :
    unaryExpr ((STAR^ | DIV^ | MOD^) unaryExpr)* 
    ;

unaryExpr
    :
    primaryExpr
    |
    negation
    |
    binaryComp
    |
    logicalNot
    |
    sizeOf
    ;

negation
    :
    NEGATE unaryExpr
    -> ^(NEG unaryExpr) 
    ;

binaryComp
    :
    COMPLEMENT unaryExpr
    -> ^(COMPL unaryExpr)
    ;

logicalNot
    :
    LOGICAL_NOT unaryExpr
    -> ^(NOT unaryExpr)
    ;

sizeOf
    : 
    SIZE unaryExpr
    -> ^(SIZEOF unaryExpr)
    ;

primaryExpr
options {backtrack=true;}
    :
    constant
    |
    ID
    |
    parenExpr
    |
    funcCall
    |
    listSelector 
    |
    listCons
    |
    mapCons
    |
    preInc
    |
    postInc
    |
    preDec
    |
    postDec
    ;

parenExpr
    :
    LPAREN! expr RPAREN!
    ;

exprList
    :
    expr (COMMA! expr)*
    |
    // Empty
    ;

funcCall
    :
    ID LPAREN exprList RPAREN
    -> ^(CALL ID exprList)
    ;

listCons
    :
    LBRAK exprList RBRAK 
    -> ^(LIST_CONS exprList)
    ;

listSelector
    :
    ID sliceList
    -> ^(LIST_SEL ID sliceList)
    ;

sliceList
    :
    listSlice (listSlice)*
    ;

listSlice 
    :
    LBRAK! expr RBRAK!
    ;

mapCons
    :
    '{{' keyValueList '}}'
    -> ^(MAP_CONS keyValueList)
    ;

keyValueList
    :
    keyValuePair (','! keyValuePair)* 
    |
    /*Empty*/
    ;
    
keyValuePair
    :
    e1=expr ':' e2=expr
    -> ^(KEY_VALUE_PAIR $e1 $e2)
    ;
    
preInc
    :
    (DPLUS listSelector) => DPLUS listSelector 
    -> ^(PRE_INC listSelector)
    |
    DPLUS ID
    -> ^(PRE_INC ID)
    ;

postInc
    :
    (listSelector DPLUS) => listSelector DPLUS
    -> ^(POST_INC listSelector)
    | 
    ID DPLUS
    -> ^(POST_INC ID)
    ;

preDec
    :
    (DMINUS listSelector) => DMINUS listSelector
    -> ^(PRE_DEC listSelector)
    |
    DMINUS ID
    -> ^(PRE_DEC ID) 
    ;

postDec
    :
    (listSelector DMINUS) => listSelector DMINUS
    -> ^(POST_DEC listSelector)
    |
    ID DMINUS
    -> ^(POST_DEC ID)
    ;

constant
    :
    STRING 
    |
    NUM_INT
    |
    NUM_FLOAT
    |
    'true'
    |
    'false'
    |
    'nil'
    ;

Tim

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070517/796d7bc5/attachment-0001.html 

From laguest at archangeli.demon.co.uk  Thu May 17 12:39:04 2007
From: laguest at archangeli.demon.co.uk (Luke A. Guest)
Date: Thu, 17 May 2007 20:39:04 +0100
Subject: [antlr-interest] Building and (not) running antlr-3.0b7
Message-ID: <1179430744.7574.10.camel@rogue>

Compiles fine, after working out how to include stringtemplate.

$ ant -Dstringtemplate.jar=lib/stringtemplate-3.0.jar 
Buildfile: build.xml

generator:

compile:
    [mkdir] Created
dir: /home/laguest/src/others/compilers/antlr/antlr-3.0b7/build/classes
    [javac] Compiling 170 source files
to /home/laguest/src/others/compilers/antlr/antlr-3.0b7/build/classes
    [javac] Note: Some input files use unchecked or unsafe operations.
    [javac] Note: Recompile with -Xlint:unchecked for details.

version-bcel:

version:

templates:
     [copy] Copying 34 files
to /home/laguest/src/others/compilers/antlr/antlr-3.0b7/build/classes

build:
      [jar] Building
jar: /home/laguest/src/others/compilers/antlr/antlr-3.0b7/lib/antlr-3.0ea9.jar

BUILD SUCCESSFUL
Total time: 8 seconds

$ java -jar lib/antlr-3.0ea9.jar org.antlr.Tool
Failed to load Main-Class manifest attribute from
lib/antlr-3.0ea9.jar

Don't know what this is all about. Can anyone shed any light?

Thanks,
Luke.



From thiago.oliveira20+antlr at gmail.com  Thu May 17 13:05:32 2007
From: thiago.oliveira20+antlr at gmail.com (Thiago Oliveira)
Date: Thu, 17 May 2007 17:05:32 -0300
Subject: [antlr-interest] Just-in-time update
Message-ID: <d2c6e5060705171305h781654caq5474de5d4f37424e@mail.gmail.com>

Ow
Antlr v3 released
Congratulations =P

-- 
Thiago Oliveira
Diretor de Recursos Humanos
Empresa J?nior de Computa??o - CJr
Universidade de Bras?lia
+55 (61) 8447 8868
http://www.cjr.org.br
cjr at cjr.org.br
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070517/9aff6c10/attachment.html 

From parrt at cs.usfca.edu  Thu May 17 13:10:08 2007
From: parrt at cs.usfca.edu (Terence Parr)
Date: Thu, 17 May 2007 13:10:08 -0700
Subject: [antlr-interest] ANTLR book is out
Message-ID: <A5B15F66-8933-4E75-AECF-2C3297886F25@cs.usfca.edu>

Hi. The Definitive ANTLR Reference has been printed.  Please buy from  
pragprog site rather than Amazon as I get more of a cut. ;)

http://www.pragmaticprogrammer.com/titles/tpantlr/

Enjoy.

Ter
PS	you can buy PDF, printed, or both

From parrt at cs.usfca.edu  Thu May 17 13:11:32 2007
From: parrt at cs.usfca.edu (Terence Parr)
Date: Thu, 17 May 2007 13:11:32 -0700
Subject: [antlr-interest] Just-in-time update
In-Reply-To: <d2c6e5060705171305h781654caq5474de5d4f37424e@mail.gmail.com>
References: <d2c6e5060705171305h781654caq5474de5d4f37424e@mail.gmail.com>
Message-ID: <04DE0560-33CE-43DE-812C-C130FFBD7B72@cs.usfca.edu>


On May 17, 2007, at 1:05 PM, Thiago Oliveira wrote:

> Ow
> Antlr v3 released
> Congratulations =P
>

Thanks!  Just put it up :)  How does new site look?

Note: http://www.antlr2.org is the old site.

Ter


From thiago.oliveira20+antlr at gmail.com  Thu May 17 13:16:35 2007
From: thiago.oliveira20+antlr at gmail.com (Thiago Oliveira)
Date: Thu, 17 May 2007 17:16:35 -0300
Subject: [antlr-interest] Just-in-time update
In-Reply-To: <04DE0560-33CE-43DE-812C-C130FFBD7B72@cs.usfca.edu>
References: <d2c6e5060705171305h781654caq5474de5d4f37424e@mail.gmail.com>
	<04DE0560-33CE-43DE-812C-C130FFBD7B72@cs.usfca.edu>
Message-ID: <d2c6e5060705171316h1f995e30l293526ab7439202f@mail.gmail.com>

Particularly, I like blue much more than green
lol

On 5/17/07, Terence Parr <parrt at cs.usfca.edu> wrote:
>
>
> On May 17, 2007, at 1:05 PM, Thiago Oliveira wrote:
>
> > Ow
> > Antlr v3 released
> > Congratulations =P
> >
>
> Thanks!  Just put it up :)  How does new site look?
>
> Note: http://www.antlr2.org is the old site.
>
> Ter
>
>


-- 
Thiago Oliveira
Diretor de Recursos Humanos
Empresa J?nior de Computa??o - CJr
Universidade de Bras?lia
+55 (61) 8447 8868
http://www.cjr.org.br
cjr at cjr.org.br
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070517/cd2a8fab/attachment.html 

From ilia at obnovlenie.ru  Thu May 17 13:22:35 2007
From: ilia at obnovlenie.ru (Ilia Kantor)
Date: Fri, 18 May 2007 00:22:35 +0400
Subject: [antlr-interest] Just-in-time update
In-Reply-To: <04DE0560-33CE-43DE-812C-C130FFBD7B72@cs.usfca.edu>
References: <d2c6e5060705171305h781654caq5474de5d4f37424e@mail.gmail.com>
	<04DE0560-33CE-43DE-812C-C130FFBD7B72@cs.usfca.edu>
Message-ID: <200705180022.35143.ilia@obnovlenie.ru>


Wow, that finally happened.

Oh deer !

/me downloads book update, it's great too.





> On May 17, 2007, at 1:05 PM, Thiago Oliveira wrote:
> 
> > Ow
> > Antlr v3 released
> > Congratulations =P
> >
> 
> Thanks!  Just put it up :)  How does new site look?
> 
> Note: http://www.antlr2.org is the old site.
> 
> Ter
> 
> 



From laguest at archangeli.demon.co.uk  Thu May 17 13:27:47 2007
From: laguest at archangeli.demon.co.uk (Luke A. Guest)
Date: Thu, 17 May 2007 21:27:47 +0100
Subject: [antlr-interest] Building and (not) running antlr-3.0b7
In-Reply-To: <1179430744.7574.10.camel@rogue>
References: <1179430744.7574.10.camel@rogue>
Message-ID: <1179433667.7574.20.camel@rogue>

On Thu, 2007-05-17 at 20:39 +0100, Luke A. Guest wrote:

> $ java -jar lib/antlr-3.0ea9.jar org.antlr.Tool
> Failed to load Main-Class manifest attribute from
> lib/antlr-3.0ea9.jar
> 
> Don't know what this is all about. Can anyone shed any light?

Ok, the build.xml needs the following line added after the fileset
LICENSE.txt:

<fileset dir="${build.classes}" excludes="org/antlr/test/**" />

It's also necessary to download stringtemplate 3.0 source and move the
files in org.antlr.stringtemplate into the antlr tree. This isn't
mentioned in the README.

$ java -jar lib/antlr-3.0ea9.jar org.antlr.Tool
Exception in thread "main" java.lang.NoClassDefFoundError:
antlr/TokenStream
        at org.antlr.tool.ErrorManager.setLocale(Unknown Source)
        at org.antlr.tool.ErrorManager.<clinit>(Unknown Source)
        at org.antlr.Tool.main(Unknown Source)

I'm lost as to why this is.

Also, the antlr-3.0b7.jar provided also gives out the same Main-Class
error as the one built with ant.

Thanks,
Luke.



From rschulz at sonic.net  Thu May 17 13:36:33 2007
From: rschulz at sonic.net (Randall R Schulz)
Date: Thu, 17 May 2007 13:36:33 -0700
Subject: [antlr-interest] ANTLR book is out
In-Reply-To: <A5B15F66-8933-4E75-AECF-2C3297886F25@cs.usfca.edu>
References: <A5B15F66-8933-4E75-AECF-2C3297886F25@cs.usfca.edu>
Message-ID: <200705171336.33310.rschulz@sonic.net>

On Thursday 17 May 2007 13:10, Terence Parr wrote:
> Hi. The Definitive ANTLR Reference has been printed.  Please buy from
> pragprog site rather than Amazon as I get more of a cut. ;)

But for those on a tight budget, the difference betwen the $37 Pragmatic 
Programmers' (plus $4.50 for shipping) and Amazon's $24.40 (with 
free "Super Saver" shipping available) is a bit hard to ignore. In 
fact, Amazon's paper book price is virtually identical to the Pragmatic 
PDF price!

I'm not sure why, but Amazon.com is still listing the book as available 
only for pre-order. Is Pragmatic holding out??


People considering the PDF version should probably first read 
<http://www.pragmaticprogrammer.com/starter_kit/faqs/pdf_faq.html> (if 
they haven't already). The only real caveat is that even though the PDF 
itself does not (attempt to) prevent printing (only Adobe's Reader 
honors the content that encodes that restriction--other PDF viewing 
software does not), the formatting is not the same as that of a printed 
book and active hyperlinks (a good and useful thing) are just 
distractions when they appear on paper.


> http://www.pragmaticprogrammer.com/titles/tpantlr/
>
> Enjoy.

One way or the other, I will.


> Ter
> PS	you can buy PDF, printed, or both


Randall Schulz

From laguest at archangeli.demon.co.uk  Thu May 17 13:39:03 2007
From: laguest at archangeli.demon.co.uk (Luke A. Guest)
Date: Thu, 17 May 2007 21:39:03 +0100
Subject: [antlr-interest] Building and (not) running antlr-3.0b7
In-Reply-To: <1179433667.7574.20.camel@rogue>
References: <1179430744.7574.10.camel@rogue> <1179433667.7574.20.camel@rogue>
Message-ID: <1179434343.7574.22.camel@rogue>

And now v3 is out...I'll try that instead, once my uberslow connection
sorts itself out.

Luke.



From gudnabrsam at yahoo.com  Thu May 17 13:39:14 2007
From: gudnabrsam at yahoo.com (Matt Benson)
Date: Thu, 17 May 2007 13:39:14 -0700 (PDT)
Subject: [antlr-interest] Building and (not) running antlr-3.0b7
In-Reply-To: <1179433667.7574.20.camel@rogue>
Message-ID: <451180.75428.qm@web55103.mail.re4.yahoo.com>


--- "Luke A. Guest" <laguest at archangeli.demon.co.uk>
wrote:

> On Thu, 2007-05-17 at 20:39 +0100, Luke A. Guest
> wrote:
> 
> > $ java -jar lib/antlr-3.0ea9.jar org.antlr.Tool
> > Failed to load Main-Class manifest attribute from
> > lib/antlr-3.0ea9.jar
> > 
> > Don't know what this is all about. Can anyone shed
> any light?
> 

Looks like you're mixing stuff up.  The ANTLR jar
apparently doesn't provide the Main-Class attribute
(it probably could/should, so I'll put that on my TODO
list for the Ant build).  "Main-Class" is required
with the -jar flag.  However, you're also providing
the name of the main class to run--org.antlr.Tool--so
you really need to be using the -cp attribute rather
than the jar attribute.  But you'll also need more on
the classpath than that... see below:

> Ok, the build.xml needs the following line added
> after the fileset
> LICENSE.txt:
> 
> <fileset dir="${build.classes}"
> excludes="org/antlr/test/**" />
> 

Damn, did it not?  I can't keep track...

> It's also necessary to download stringtemplate 3.0
> source and move the
> files in org.antlr.stringtemplate into the antlr
> tree. This isn't
> mentioned in the README.

This presumes the antlr jar is trying to be a
standalone, all-inclusive jar.  It's not.  You need ST
on the classpath.

> 
> $ java -jar lib/antlr-3.0ea9.jar org.antlr.Tool
> Exception in thread "main"
> java.lang.NoClassDefFoundError:
> antlr/TokenStream
>         at
> org.antlr.tool.ErrorManager.setLocale(Unknown
> Source)
>         at
> org.antlr.tool.ErrorManager.<clinit>(Unknown Source)
>         at org.antlr.Tool.main(Unknown Source)
> 
> I'm lost as to why this is.
> 

Note the package "antlr".  This is ANTLR2, on which
ANTLR3 (for now) depends.  Yet another candidate for
your classpath.

> Also, the antlr-3.0b7.jar provided also gives out
> the same Main-Class
> error as the one built with ant.
> 

And now you know why.

HTH,
Matt

> Thanks,
> Luke.
> 
> 
> 



 
____________________________________________________________________________________
Looking for earth-friendly autos? 
Browse Top Cars by "Green Rating" at Yahoo! Autos' Green Center.
http://autos.yahoo.com/green_center/

From boris.boucher at gmail.com  Thu May 17 14:28:24 2007
From: boris.boucher at gmail.com (Boris Boucher)
Date: Thu, 17 May 2007 23:28:24 +0200
Subject: [antlr-interest] [antlr 3] How to use the a C lexer/parser
Message-ID: <1ce9448c0705171428w58c39b26k4298e34e3aabf6e9@mail.gmail.com>

Hello all,

I just begun to write a lexer/parse using antlr 3.0b7.

My problem is what are the step to be done to invoke the parser ?
I have writen the follwing code but the program crash inside the antlr C
runtime in a hash that did not seams to be allocated or initialized.

Here my code :

void parseInputFile(const std::string &fileName)
{
    // create a file input stream
    pANTLR3_INPUT_STREAM inputStream =
antlr3AsciiFileStreamNew((pANTLR3_UINT8)fileName.c_str());
    // create the lexer
    pInputParserLexer inputLexer = InputParserLexerNew(inputStream);
    // create a token stream
    pANTLR3_COMMON_TOKEN_STREAM    tokenStream =
antlr3CommonTokenStreamSourceNew(0, inputLexer->pLexer->tokSource);
    // create the parser
    pInputParserParser inputParser = InputParserParserNew(tokenStream);

    // call the parser
    inputParser->data(inputParser);

    // freeup resources
    inputParser->free(inputParser);
    tokenStream->free(tokenStream);
    inputLexer->free(inputLexer);
    // no free method on the input stream ?
    free(inputStream);
}

Did I miss somethink ?

I am using Visual Studio 2005.

Boris
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070517/b957ffd5/attachment-0001.html 

From jimi at temporal-wave.com  Thu May 17 14:33:31 2007
From: jimi at temporal-wave.com (Jim Idle)
Date: Thu, 17 May 2007 14:33:31 -0700
Subject: [antlr-interest] ANTLR book is out
In-Reply-To: <200705171336.33310.rschulz@sonic.net>
References: <A5B15F66-8933-4E75-AECF-2C3297886F25@cs.usfca.edu>
	<200705171336.33310.rschulz@sonic.net>
Message-ID: <B36CCC332A32904F8FA3DE134A235336252548@wavemachine.temporal-wave.com>

I am sure that Amazon don't update every book the instant that it is
available. Perhaps if Ter had called it "Harry Potter and the
Non-Determinism", it would be different and be followed up with T-shirts
(hmmm! We should have T-Shirts on the web site, at least 10 people would
buy 'em ;-)) and a movie.

On the price difference:

1) If you are a student and can't get your father to buy it, then
perhaps you can stay out of the Union bar one night (UK/Australia/Etc)
and use the proceeds to buy the book? ;-) Or, if you are in the US, buy
the Chuck-Ts rather than the latest marketing (all programmers should
wear these anyway);
2) If you are not a student, then stay out of the Pub for two hours (UK
equivalent - 12 femtosconds) and use the proceeds to buy the more
expensive book;

Or, buy the cheaper version from Amazon and donate the $4.50 shipping
costs to Ter's paypal donation scheme (proceeds so far $2.34).

Jim

-----Original Message-----
From: antlr-interest-bounces at antlr.org
[mailto:antlr-interest-bounces at antlr.org] On Behalf Of Randall R Schulz
Sent: Thursday, May 17, 2007 1:37 PM
To: antlr-interest at antlr.org
Subject: Re: [antlr-interest] ANTLR book is out

On Thursday 17 May 2007 13:10, Terence Parr wrote:
> Hi. The Definitive ANTLR Reference has been printed.  Please buy from
> pragprog site rather than Amazon as I get more of a cut. ;)

But for those on a tight budget, the difference betwen the $37 Pragmatic

Programmers' (plus $4.50 for shipping) and Amazon's $24.40 (with 
free "Super Saver" shipping available) is a bit hard to ignore. In 
fact, Amazon's paper book price is virtually identical to the Pragmatic 
PDF price!

I'm not sure why, but Amazon.com is still listing the book as available 
only for pre-order. Is Pragmatic holding out??


People considering the PDF version should probably first read 
<http://www.pragmaticprogrammer.com/starter_kit/faqs/pdf_faq.html> (if 
they haven't already). The only real caveat is that even though the PDF 
itself does not (attempt to) prevent printing (only Adobe's Reader 
honors the content that encodes that restriction--other PDF viewing 
software does not), the formatting is not the same as that of a printed 
book and active hyperlinks (a good and useful thing) are just 
distractions when they appear on paper.


> http://www.pragmaticprogrammer.com/titles/tpantlr/
>
> Enjoy.

One way or the other, I will.


> Ter
> PS	you can buy PDF, printed, or both


Randall Schulz

From tedv at esrconsulting.com  Thu May 17 14:38:29 2007
From: tedv at esrconsulting.com (Ted Villalba)
Date: Thu, 17 May 2007 14:38:29 -0700
Subject: [antlr-interest] Creating Lexer from String
Message-ID: <200705172138.l4HLcVBY038763@pro36.abac.com>

Hi,
 
Can someone tell me how to create a Lexer from a String. My generated code
does not allow me to use StringReader, something I saw recommended in an
earlier post. 
 
When I compile I get:
Test.java:15: cannot find symbol
symbol  : constructor QLexer(java.io.StringReader)
location: class QLexer
        QLexer lexer = new QLexer(sr);
 
 
In the original generated Qlexer.java  file I only see:
public class QLexer extends Lexer {
    .
    public QLexer(CharStream input) {
        super(input);
}
 
Perhaps the answer is staring me in the face, but ( not being a Java expert
either)I am looking for, I think, a constructor that accepts a String as
input.
 
 
Thanks,
Ted
 
 
 
 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070517/94d344b2/attachment.html 

From jaluber at gmx.de  Thu May 17 14:51:22 2007
From: jaluber at gmx.de (Johannes Luber)
Date: Thu, 17 May 2007 23:51:22 +0200
Subject: [antlr-interest] [antlr 3] How to use the a C lexer/parser
In-Reply-To: <1ce9448c0705171428w58c39b26k4298e34e3aabf6e9@mail.gmail.com>
References: <1ce9448c0705171428w58c39b26k4298e34e3aabf6e9@mail.gmail.com>
Message-ID: <464CCE5A.5000605@gmx.de>

Boris Boucher wrote:
> Hello all,
> 
> I just begun to write a lexer/parse using antlr 3.0b7.
> 
> My problem is what are the step to be done to invoke the parser ?
> I have writen the follwing code but the program crash inside the antlr C
> runtime in a hash that did not seams to be allocated or initialized.
> 
> Did I miss somethink ?
> 

It may be possible, that the C runtime has a bug. As today the new ANTLR
3 version has been released you should test it with this version again.
Otherwise I have no experience with the C target.

Best regards,
Johannes Luber

From parrt at cs.usfca.edu  Thu May 17 15:28:45 2007
From: parrt at cs.usfca.edu (Terence Parr)
Date: Thu, 17 May 2007 15:28:45 -0700
Subject: [antlr-interest] Just-in-time update
In-Reply-To: <464CBDDB.6070401@gmail.com>
References: <d2c6e5060705171305h781654caq5474de5d4f37424e@mail.gmail.com>
	<04DE0560-33CE-43DE-812C-C130FFBD7B72@cs.usfca.edu>
	<464CBDDB.6070401@gmail.com>
Message-ID: <7AB427CC-501D-4131-A637-52A56DDEB87B@cs.usfca.edu>

yeah, Jean will release tonight...i'll add 1.0b11 links for now.
Ter
On May 17, 2007, at 1:40 PM, Fabio Maulo wrote:

> Terence Parr escribi?:
>> Thanks!  Just put it up :)  How does new site look?
> Very good. I visit it all the day waiting for the update.
>
> There are some links that don't work..
> http://www.antlr.org/download/antlrworks-1.0.jar
>
> and i can't find dll to use it on .NET2.0 platform.
>
> Fabio.
>


From parrt at cs.usfca.edu  Thu May 17 15:30:50 2007
From: parrt at cs.usfca.edu (Terence Parr)
Date: Thu, 17 May 2007 15:30:50 -0700
Subject: [antlr-interest] ANTLR book is out
In-Reply-To: <B36CCC332A32904F8FA3DE134A235336252548@wavemachine.temporal-wave.com>
References: <A5B15F66-8933-4E75-AECF-2C3297886F25@cs.usfca.edu>
	<200705171336.33310.rschulz@sonic.net>
	<B36CCC332A32904F8FA3DE134A235336252548@wavemachine.temporal-wave.com>
Message-ID: <D24C160E-C3A9-4057-B7C0-D191A6E5147F@cs.usfca.edu>

Sorry about the price differential...thought it would be the same.

Oh, i think it's so cheap because it's still "preprint" up there at  
amazon. ;)

That said, send me the price of two beers anyway per Jim ;)  ha haha  
haha

Ter
On May 17, 2007, at 2:33 PM, Jim Idle wrote:

> I am sure that Amazon don't update every book the instant that it is
> available. Perhaps if Ter had called it "Harry Potter and the
> Non-Determinism", it would be different and be followed up with T- 
> shirts
> (hmmm! We should have T-Shirts on the web site, at least 10 people  
> would
> buy 'em ;-)) and a movie.
>
> On the price difference:
>
> 1) If you are a student and can't get your father to buy it, then
> perhaps you can stay out of the Union bar one night (UK/Australia/Etc)
> and use the proceeds to buy the book? ;-) Or, if you are in the US,  
> buy
> the Chuck-Ts rather than the latest marketing (all programmers should
> wear these anyway);
> 2) If you are not a student, then stay out of the Pub for two hours  
> (UK
> equivalent - 12 femtosconds) and use the proceeds to buy the more
> expensive book;
>
> Or, buy the cheaper version from Amazon and donate the $4.50 shipping
> costs to Ter's paypal donation scheme (proceeds so far $2.34).
>
> Jim
>
> -----Original Message-----
> From: antlr-interest-bounces at antlr.org
> [mailto:antlr-interest-bounces at antlr.org] On Behalf Of Randall R  
> Schulz
> Sent: Thursday, May 17, 2007 1:37 PM
> To: antlr-interest at antlr.org
> Subject: Re: [antlr-interest] ANTLR book is out
>
> On Thursday 17 May 2007 13:10, Terence Parr wrote:
>> Hi. The Definitive ANTLR Reference has been printed.  Please buy from
>> pragprog site rather than Amazon as I get more of a cut. ;)
>
> But for those on a tight budget, the difference betwen the $37  
> Pragmatic
>
> Programmers' (plus $4.50 for shipping) and Amazon's $24.40 (with
> free "Super Saver" shipping available) is a bit hard to ignore. In
> fact, Amazon's paper book price is virtually identical to the  
> Pragmatic
> PDF price!
>
> I'm not sure why, but Amazon.com is still listing the book as  
> available
> only for pre-order. Is Pragmatic holding out??
>
>
> People considering the PDF version should probably first read
> <http://www.pragmaticprogrammer.com/starter_kit/faqs/pdf_faq.html> (if
> they haven't already). The only real caveat is that even though the  
> PDF
> itself does not (attempt to) prevent printing (only Adobe's Reader
> honors the content that encodes that restriction--other PDF viewing
> software does not), the formatting is not the same as that of a  
> printed
> book and active hyperlinks (a good and useful thing) are just
> distractions when they appear on paper.
>
>
>> http://www.pragmaticprogrammer.com/titles/tpantlr/
>>
>> Enjoy.
>
> One way or the other, I will.
>
>
>> Ter
>> PS	you can buy PDF, printed, or both
>
>
> Randall Schulz


From parrt at cs.usfca.edu  Thu May 17 15:31:58 2007
From: parrt at cs.usfca.edu (Terence Parr)
Date: Thu, 17 May 2007 15:31:58 -0700
Subject: [antlr-interest] Creating Lexer from String
In-Reply-To: <200705172138.l4HLcVBY038763@pro36.abac.com>
References: <200705172138.l4HLcVBY038763@pro36.abac.com>
Message-ID: <9D93CD08-1925-4422-BAD9-32F816A3B582@cs.usfca.edu>

Hi. For v3, use ANTLRStringReader.
ter


From jimi at temporal-wave.com  Thu May 17 14:50:40 2007
From: jimi at temporal-wave.com (Jim Idle)
Date: Thu, 17 May 2007 14:50:40 -0700
Subject: [antlr-interest] [antlr 3] How to use the a C lexer/parser
In-Reply-To: <1ce9448c0705171428w58c39b26k4298e34e3aabf6e9@mail.gmail.com>
References: <1ce9448c0705171428w58c39b26k4298e34e3aabf6e9@mail.gmail.com>
Message-ID: <B36CCC332A32904F8FA3DE134A235336252549@wavemachine.temporal-wave.com>

Check against the examples (which are VS2005 .sln enabled). However, it
is probable that the beta version you are using is out of date anyway. 

 

You can use the release version as of today and build the runtime from
the dist tgz (as per the wiki). Then you will also get the vs2005
integration rule file.

 

Where did it crash? As in after which call below? I t might be that you
should not be passing 0 to antlr3CommonTokenStreamSourceNew

 

But, I see you are freeing the input stream directly when you should be
using the close() method. 

 

Jim

 

main.c example:

 

int ANTLR3_CDECL

main  (int argc, char *argv[])

{

    // Now we declare the ANTLR related local variables we need.

    // Note that unless you are convinced you will never need thread
safe

    // versions for your project, then you should always create such
things

    // as instance variables for each invocation.

    // -------------------

 

    // Name of the input file. Note that we always use the abstract type
pANTLR3_UINT8

    // for ASCII/8 bit strings - the runtime library garauntees that
this will be

    // good on all platforms. This is a general rule - always use the
ANTLR3 supplied

    // typedefs for pointers/types/etc.

    //

    pANTLR3_UINT8     fName;

 

    // The ANTLR3 character input stream, which abstracts the input
source such that

    // it is easy to privide inpput from different sources such as
files, or 

    // memory strings.

    //

    // For an ASCII/latin-1 memory string use:

    //          input = antlr3NewAsciiStringInPlaceStream (stringtouse,
(ANTLR3_UINT64) length, NULL);

    //

    // For a UCS2 (16 bit) memory string use:

    //          input = antlr3NewUCS2StringInPlaceStream (stringtouse,
(ANTLR3_UINT64) length, NULL);

    //

    // For input from a file, see code below

    //

    // Note that this is essentially a pointer to a structure containing
pointers to functions.

    // You can create your own input stream type (copy one of the
existing ones) and override any

    // individual function by installing your own pointer after you have
created the standard 

    // version.

    //

    pANTLR3_INPUT_STREAM    input;

 

    // The lexer is of course generated by ANTLR, and so the lexer type
is not upper case.

    // The lexer is supplied with a pANTLR3_INPUT_STREAM from whence it
consumes its

    // input and generates a token stream as output.

    //

    pCLexer           lxr;

 

    // The token stream is produced by the ANTLR3 generated lexer. Again
it is a structure based

    // API/Object, which you can customise and override methods of as
you wish. a Token stream is

    // supplied to the generated parser, and you can write your own
token stream and pass this in

    // if you wish.

    //

    pANTLR3_COMMON_TOKEN_STREAM         tstream;

 

    // The C parser is also generated by ANTLR and accepts a token
stream as explained

    // above. The token stream can be any source in fact, so long as it
implements the 

    // ANTLR3_TOKEN_SOURCE interface. In this case the parser does not
return anything

    // but it can of cousre speficy any kind of return type from the
rule you invoke

    // when calling it.

    //

    pCParser                        psr;

 

    // Create the input stream based upon the arguement supplied to us
on the command line

    // for this example, the input will always default to ./input if
there is no explicit

    // argument.

    //

    if (argc < 2 || argv[1] == NULL)

    {

      fName =(pANTLR3_UINT8)"./input"; // Note in VS2005 debug, working
directory must be configured

    }

    else

    {

      fName = (pANTLR3_UINT8)argv[1];

    }

 

    // Create the input stream using the supplied file name

    // (Use antlr3AsciiFileStreamNew for UCS2/16bit input).

    //

    input   = antlr3AsciiFileStreamNew(fName);

 

    // The input will be created succesfully, providing that there is
enoguh

    // memory and the file exists etc

    //

    if ( (ANTLR3_UINT64)input < 0 )

    {

      switch((ANTLR3_UINT64)input)

      {

      case    ANTLR3_ERR_NOMEM:

 

          fprintf(stderr, "Unable to open file %s due to malloc()
failure1\n", (char *)fName);

          exit(1);

          break;

 

      default:

 

          fprintf(stderr, "Failed to open file %s - exit with code
%d\n", (char *)fName, (ANTLR3_UINT64)input);

          exit((int)((ANTLR3_UINT64)input));

          break;

      }

    }

 

    // Our input stream is now open and all set to go, so we can create
a new instance of our

    // lexer and set the lexer input to our input stream:

    //  (file | memory | ?) --> inputstream -> lexer --> tokenstream -->
parser ( --> treeparser )?

    //

    lxr         = CLexerNew(input);     // CLexerNew is generated by
ANTLR

 

    // Need to check for errors

    //

    if ( (ANTLR3_UINT64)lxr < 0 )

    {

      switch((ANTLR3_UINT64)lxr)

      {

      case    ANTLR3_ERR_NOMEM:

 

          fprintf(stderr, "Unable to create the lexer due to malloc()
failure1\n");

          exit(1);

          break;

 

      default:

 

          fprintf(stderr, "Failed to create lexer - exit with code
%d\n", (ANTLR3_UINT64)lxr);

          exit((int)((ANTLR3_UINT64)lxr));

          break;

      }

    }

 

    // Our lexer is in place, so we can create the token stream from it

    // NB: Nothing happens yet other than the file has been read. We are
just 

    // connecting all these things together and they will be invoked
when we

    // call the parser rule. ANTLR3_SIZE_HINT can be left at the default
usually

    // unless you have a very large token stream/input. Each generated
lexer

    // provides a token source interface, which is the second argument
to the

    // token stream creator.

    // Note tha even if you implement your own token structure, it will
always

    // contain a standard common token within it and this is the pointer
that

    // you pass around to everything else. A common token as a pointer
within

    // it that should point to your own outer token structure.

    //

    tstream = antlr3CommonTokenStreamSourceNew(ANTLR3_SIZE_HINT,
lxr->pLexer->tokSource);

 

    if ((ANTLR3_UINT64)tstream == ANTLR3_ERR_NOMEM)

    {

      fprintf(stderr, "Out of memory trying to allocate token
stream\n");

      exit(ANTLR3_ERR_NOMEM);

    }

 

    // Finally, now that we have our lexer constructed, we can create
the parser

    //

    psr         = CParserNew(tstream);  // CParserNew is generated by
ANTLR3

 

    if ((ANTLR3_UINT64)tstream == ANTLR3_ERR_NOMEM)

    {

      fprintf(stderr, "Out of memory trying to allocate parser\n");

      exit(ANTLR3_ERR_NOMEM);

    }

 

    // We are all ready to go. Though that looked complicated at first
glance,

    // I am sure, you will see that in fact most of the code above is
dealing

    // with errors and there isn;t really that much to do (isn;t this
always the

    // case in C? ;-).

    //

    // So, we now invoke the parser. All elements of ANTLR3 generated C
components

    // as well as the ANTLR C runtime library itself are pseudo objects.
This means

    // that they are represented as pointers to structures, which
contain any

    // instance data they need, and a set of pointers to other
interfaces or

    // 'methods'. Note that in general, these few pointers we have
created here are

    // the only things you will ever explicitly free() as everythign
else is created

    // via factories, that alloacte memory efficiently and free()
everything they use

    // automatically when you close the parser/lexer/etc.

    //

    // Note that this means only that the methods are always called via
the object

    // pointer and the first argument to any method, is a pointer to the
structure itself.

    // It also has the side advantage, if you are using an IDE such as
VS2005 taht can do it

    // that when you type ->, you will see a list of tall the methods
the object supports.

    //

    psr->translation_unit(psr);

 

    // We did not return anything from this parser rule, so we can
finish. It only remains

    // to close down our open objects, in the reverse order we created
them

    //

    psr         ->free  (psr);          psr = NULL;

    tstream ->free  (tstream);          tstream = NULL;

    lxr         ->free  (lxr);          lxr = NULL;

    input   ->close (input);      input = NULL;

 

    return 0;

}

 

 

From: antlr-interest-bounces at antlr.org
[mailto:antlr-interest-bounces at antlr.org] On Behalf Of Boris Boucher
Sent: Thursday, May 17, 2007 2:28 PM
To: antlr-interest at antlr.org
Subject: [antlr-interest] [antlr 3] How to use the a C lexer/parser

 

Hello all,

I just begun to write a lexer/parse using antlr 3.0b7. 

My problem is what are the step to be done to invoke the parser ?
I have writen the follwing code but the program crash inside the antlr C
runtime in a hash that did not seams to be allocated or initialized. 

Here my code :

void parseInputFile(const std::string &fileName)
{
    // create a file input stream
    pANTLR3_INPUT_STREAM inputStream =
antlr3AsciiFileStreamNew((pANTLR3_UINT8)fileName.c_str()); 
    // create the lexer
    pInputParserLexer inputLexer = InputParserLexerNew(inputStream);
    // create a token stream
    pANTLR3_COMMON_TOKEN_STREAM    tokenStream =
antlr3CommonTokenStreamSourceNew(0, inputLexer->pLexer->tokSource); 
    // create the parser
    pInputParserParser inputParser = InputParserParserNew(tokenStream);

    // call the parser
    inputParser->data(inputParser);

    // freeup resources
    inputParser->free(inputParser); 
    tokenStream->free(tokenStream);
    inputLexer->free(inputLexer);
    // no free method on the input stream ?
    free(inputStream);
}

Did I miss somethink ? 

I am using Visual Studio 2005. 

Boris



-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070517/662d1761/attachment-0001.html 

From yiqing at objectivity.com  Thu May 17 15:38:59 2007
From: yiqing at objectivity.com (YiQing Yang)
Date: Thu, 17 May 2007 15:38:59 -0700
Subject: [antlr-interest] Is C++ still supported in ANTLE3.0?
Message-ID: <000b01c798d4$297cec50$222815ac@objy.com>

Hi All,

 

 I just downloaded and installed ANTLR V3. I didn't find "cpp" under the
"lib" and "runtime" directory. I checked the document. It is not listed as
the "Code Generation Targets" either. Does it mean that C++ is not a
supported target language anymore? How come it was not mentioned at all in
any v3 document?

 

Anyone knows the answer, please let me know. Thanks!

 

YiQing Yang

 

Objectivity, Inc.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070517/fa0f1a84/attachment.html 

From parrt at cs.usfca.edu  Thu May 17 15:43:38 2007
From: parrt at cs.usfca.edu (Terence Parr)
Date: Thu, 17 May 2007 15:43:38 -0700
Subject: [antlr-interest] Is C++ still supported in ANTLE3.0?
In-Reply-To: <000b01c798d4$297cec50$222815ac@objy.com>
References: <000b01c798d4$297cec50$222815ac@objy.com>
Message-ID: <20BDEC3E-E838-49E2-BDCC-2AE698441E72@cs.usfca.edu>

C++ will be available in June maybe.  Ric Klaren has been too busy.

Objective-C and maybe Ruby coming in June.

Ter
On May 17, 2007, at 3:38 PM, YiQing Yang wrote:

> Hi All,
>
>
>
>  I just downloaded and installed ANTLR V3. I didn?t find ?cpp?  
> under the ?lib? and ?runtime? directory. I checked the document. It  
> is not listed as the ?Code Generation Targets? either. Does it mean  
> that C++ is not a supported target language anymore? How come it  
> was not mentioned at all in any v3 document?
>
>
>
> Anyone knows the answer, please let me know. Thanks!
>
>
>
> YiQing Yang
>
>
>
> Objectivity, Inc.
>
>


From fabiomaulo at gmail.com  Thu May 17 15:48:58 2007
From: fabiomaulo at gmail.com (Fabio Maulo)
Date: Thu, 17 May 2007 19:48:58 -0300
Subject: [antlr-interest] Is C++ still supported in ANTLE3.0?
In-Reply-To: <20BDEC3E-E838-49E2-BDCC-2AE698441E72@cs.usfca.edu>
References: <000b01c798d4$297cec50$222815ac@objy.com>
	<20BDEC3E-E838-49E2-BDCC-2AE698441E72@cs.usfca.edu>
Message-ID: <464CDBDA.406@gmail.com>

Any info about C# ?

Terence Parr escribi?:
> C++ will be available in June maybe.  Ric Klaren has been too busy.
>
> Objective-C and maybe Ruby coming in June.
>
> Ter
>


From laurie at holoweb.net  Thu May 17 15:31:21 2007
From: laurie at holoweb.net (Laurie Harper)
Date: Thu, 17 May 2007 18:31:21 -0400
Subject: [antlr-interest] Lexer issue with Python target and predicates
Message-ID: <f2il3p$9jj$2@sea.gmane.org>

I have a grammar which is producing illegal Python code. Both semantic
and syntactic predicates seem to trigger the incorrect code.

I've reduced the grammar to a minimal sub-set that demonstrates the problem:

synpred.g:
--------8<--------8<--------8<--------
grammar synpred;

options {
	language=Python;
}

// matches input of the form aaa.a.a or aaa|aaa

SLASH	:	'\\';
DOLLAR	:	'$';
HASH	:	'#';
LCURLY	:	'}';

startRule : LiteralExpression+;

LiteralExpression
	: { literalText=True; }
	  (LiteralComponent)* (DOLLAR|HASH)?
	  { literalText=False; }
	;

fragment
LiteralComponent
    : {literalText}? => ( options { greedy=true; } : (
        (SLASH) => SLASH (DOLLAR | HASH)
      | (DOLLAR | HASH) => (DOLLAR | HASH) ~(LCURLY)
      | ~(DOLLAR | HASH)
    ))+
    ;
--------8<--------8<--------8<--------

Generate lexer/parser:
--------8<--------8<--------8<--------
$ java org.antlr.Tool synpred.g
ANTLR Parser Generator  Version 3.0b7 (April 12, 2007)  1989-2007
warning(11):  internal warning: ignoring unsupported option: seperator
warning(11):  internal warning: ignoring unsupported option: seperator
--------8<--------8<--------8<--------

(I don't know if those warnings are relevant; I always get them, even on
grammars which produce working parsers...)

The resulting lexer generated from this grammar contains Python
'statements' like this:

     elraise NotImplementedError("eotDFAEdge")

I'm not sure why, or how to fix this. Manually replacing the 'elraise'
with 'else: raise' makes the lexer syntactically correct Python code
but, with the full grammar, the lexer is over 28Mb of Python (!) and
can't be imported :-(

Any help or suggestions?

L.


From parrt at cs.usfca.edu  Thu May 17 16:43:33 2007
From: parrt at cs.usfca.edu (Terence Parr)
Date: Thu, 17 May 2007 16:43:33 -0700
Subject: [antlr-interest] Is C++ still supported in ANTLE3.0?
In-Reply-To: <464CDBDA.406@gmail.com>
References: <000b01c798d4$297cec50$222815ac@objy.com>
	<20BDEC3E-E838-49E2-BDCC-2AE698441E72@cs.usfca.edu>
	<464CDBDA.406@gmail.com>
Message-ID: <F60CAED7-285F-4922-A20B-1E801FBAB205@cs.usfca.edu>


On May 17, 2007, at 3:48 PM, Fabio Maulo wrote:

> Any info about C# ?

C# should be in the distribution.  If not, I messed up. ;)

Ter


From travis_caldwell2000 at yahoo.com  Thu May 17 17:43:05 2007
From: travis_caldwell2000 at yahoo.com (Travis Caldwell)
Date: Thu, 17 May 2007 17:43:05 -0700 (PDT)
Subject: [antlr-interest] ANTLR3 ant task class file problem
Message-ID: <117967.98148.qm@web58412.mail.re3.yahoo.com>


 Hi, 
  
 I noticed on the new ANTLR v3 web site that the ANTLR ANT task was
updated on today (May 17), but the release notes look the same.

 Has this Java 6 issue been fixed?

                              -LS

--- Travis Caldwell <travis_caldwell2000 at yahoo.com> wrote:

> 
>  Hi, 
> 
>  I was attempting to use the ANTLR3 ant task that was uploaded to the
> file sharing site and I get the following error:
> 
>  BUILD FAILED
> java.lang.UnsupportedClassVersionError: Bad version number in .class
> file
> 
>  Googling this list I see that someone previously had the same issue:
> 
> > [antlr-interest] comments on ant task for v3..
> > Eitan Suez eitan.suez at gmail.com
> > Thu Feb 8 14:14:53 PST 2007
> [...]
> > 5. the ant task appears to be built with java 6.
> >  i tried to run a test target and am getting this:
> > BUILD FAILED
> > java.lang.UnsupportedClassVersionError: Bad version number in
> .class 
> file
> 
>  It also looks like there was an attempt to solve this here:
> 
> > [antlr-interest] updated antlr3 ANT task
> >Terence Parr parrt at cs.usfca.edu
> >Sat Feb 10 16:08:49 PST 2007
> [...]
> >       Compiled the antlr3 taks with -source 5 for compatibility  
> with Java 5.
> 
>  I checked the zip that I downloaded and I definitely have the new
> version since the readme in the zip also refers to being compiled
> with
> "-source 5". It also includes the simplecTreeParser example refered
> to
> in the email about the new version.
> 
> The class file looks to like it was built for java 6: 
> 
> $ od -tx1 ANTLR3.class | head
> 0000000 ca fe ba be 00 00 00 32 02 0d 0a 00 ae 01 05 07
>                              ^^
> The major number is 50 decimal which according to this:
> 
> 
>
http://help.eclipse.org/help32/index.jsp?topic=/org.eclipse.jdt.doc.isv/guide/jdt_api_compile.htm
> 
> Indicates a Java 6 class file.
> 
>  Perhaps the compile should be done with "-source 5 -target 5" in
> order
> to be compatible with both java 5 & 6.
> 
>  I think that "-source 5" may only instruct the compiler to expcet
> java
> 5 source, but it will still emit java 6 class files.
> 
>  Thanks.
> 
>                   _Travis_Caldwell_
> 
> 
> 
> 
> 
> 
>        
>
____________________________________________________________________________________
> Moody friends. Drama queens. Your life? Nope! - their life, your
> story. Play Sims Stories at Yahoo! Games.
> http://sims.yahoo.com/  
> 



       
____________________________________________________________________________________Get the Yahoo! toolbar and be alerted to new email wherever you're surfing.
http://new.toolbar.yahoo.com/toolbar/features/mail/index.php

From parrt at cs.usfca.edu  Thu May 17 17:46:13 2007
From: parrt at cs.usfca.edu (Terence Parr)
Date: Thu, 17 May 2007 17:46:13 -0700
Subject: [antlr-interest] ANTLR3 ant task class file problem
In-Reply-To: <117967.98148.qm@web58412.mail.re3.yahoo.com>
References: <117967.98148.qm@web58412.mail.re3.yahoo.com>
Message-ID: <A98F60F2-B4C6-4197-A987-229823438E74@cs.usfca.edu>

it has been rebuilt with java 5.
Ter
On May 17, 2007, at 5:43 PM, Travis Caldwell wrote:

>
>  Hi,
>
>  I noticed on the new ANTLR v3 web site that the ANTLR ANT task was
> updated on today (May 17), but the release notes look the same.
>
>  Has this Java 6 issue been fixed?
>
>                               -LS
>
> --- Travis Caldwell <travis_caldwell2000 at yahoo.com> wrote:
>
>>
>>  Hi,
>>
>>  I was attempting to use the ANTLR3 ant task that was uploaded to the
>> file sharing site and I get the following error:
>>
>>  BUILD FAILED
>> java.lang.UnsupportedClassVersionError: Bad version number in .class
>> file
>>
>>  Googling this list I see that someone previously had the same issue:
>>
>>> [antlr-interest] comments on ant task for v3..
>>> Eitan Suez eitan.suez at gmail.com
>>> Thu Feb 8 14:14:53 PST 2007
>> [...]
>>> 5. the ant task appears to be built with java 6.
>>>  i tried to run a test target and am getting this:
>>> BUILD FAILED
>>> java.lang.UnsupportedClassVersionError: Bad version number in
>> .class
>> file
>>
>>  It also looks like there was an attempt to solve this here:
>>
>>> [antlr-interest] updated antlr3 ANT task
>>> Terence Parr parrt at cs.usfca.edu
>>> Sat Feb 10 16:08:49 PST 2007
>> [...]
>>>       Compiled the antlr3 taks with -source 5 for compatibility
>> with Java 5.
>>
>>  I checked the zip that I downloaded and I definitely have the new
>> version since the readme in the zip also refers to being compiled
>> with
>> "-source 5". It also includes the simplecTreeParser example refered
>> to
>> in the email about the new version.
>>
>> The class file looks to like it was built for java 6:
>>
>> $ od -tx1 ANTLR3.class | head
>> 0000000 ca fe ba be 00 00 00 32 02 0d 0a 00 ae 01 05 07
>>                              ^^
>> The major number is 50 decimal which according to this:
>>
>>
>>
> http://help.eclipse.org/help32/index.jsp?topic=/ 
> org.eclipse.jdt.doc.isv/guide/jdt_api_compile.htm
>>
>> Indicates a Java 6 class file.
>>
>>  Perhaps the compile should be done with "-source 5 -target 5" in
>> order
>> to be compatible with both java 5 & 6.
>>
>>  I think that "-source 5" may only instruct the compiler to expcet
>> java
>> 5 source, but it will still emit java 6 class files.
>>
>>  Thanks.
>>
>>                   _Travis_Caldwell_
>>
>>
>>
>>
>>
>>
>>
>>
> ______________________________________________________________________ 
> ______________
>> Moody friends. Drama queens. Your life? Nope! - their life, your
>> story. Play Sims Stories at Yahoo! Games.
>> http://sims.yahoo.com/
>>
>
>
>
>
> ______________________________________________________________________ 
> ______________Get the Yahoo! toolbar and be alerted to new email  
> wherever you're surfing.
> http://new.toolbar.yahoo.com/toolbar/features/mail/index.php


From mark.mandel at gmail.com  Thu May 17 20:48:37 2007
From: mark.mandel at gmail.com (Mark Mandel)
Date: Fri, 18 May 2007 13:48:37 +1000
Subject: [antlr-interest] [v3]Tracking Hidden Channels
Message-ID: <4153ee230705172048l572ca734rdd3f180bc8c6ff86@mail.gmail.com>

Hi there,

I have a grammar that has has C style comments that are possible in it:

So,


COMMENT
	:
	'/*' ( options {greedy=false;} : . )* '*/'
	{
		$channel=HIDDEN;
	}
	;

LINE_COMMENT
	:
	'//' ~('\n'|'\r')* '\r'? '\n'
	{
		$channel=HIDDEN;
	}
	;

Now, when using this grammar to build an IDE, I want to be able to
track comments, so that I can colour code them as required.

My question here is, what is my best way to get at these comments, as
they are hidden tokens?

Reading:
http://www.antlr.org/wiki/pages/viewpage.action?pageId=1057

Says that I can walk backwards and forwards through the
CommonTokenStream to look for the my comment tokens - honestly, I'm
not sure how to do that, could someone possibly provide an example?

On that note however, I was thinking, maybe I should have my
whitespace on HIDDEN, but have my comments on channel 98, so I can
continue to ignore the WS, but just grab the comments I want.  Would
that be a good way to go about it?

The other thought I had was to simply have a LinkedList on my Lexer,
and do something like this:

LINE_COMMENT
	:
	'//' ~('\n'|'\r')* '\r'? '\n'
	{
		$channel=HIDDEN;
                commentList.add($token);
	}
(I believe $token will resolve to the current token, yes?)

Then I could retrieve my LinkedList off the Lexer after parsing was
complete, and loop through it to colour my comments as required.

I hope I'm making sense, and one of these approaches proves to be the
best one, if not, please point me in the right direction.

Thanks in advance,

Mark

-- 
E: mark.mandel at gmail.com
W: www.compoundtheory.com

From cameron.palmer at gmail.com  Thu May 17 22:17:22 2007
From: cameron.palmer at gmail.com (Cameron Palmer)
Date: Fri, 18 May 2007 00:17:22 -0500
Subject: [antlr-interest] SDF assembly language grammar
Message-ID: <bc4938830705172217k7a10c80bxfd134ee15623bf27@mail.gmail.com>

I am a student rewriting the assembler for an ISA called SDF (Scheduled
Dataflow). You can check out our work at http://csrl.unt.edu/sdf . Anyway I
am just writing the grammar and am having trouble making the leap to code
generation. I had started with v2 but figure I might just convert the
grammar to v3 today. The goal of this grammar is to emit opcodes for each
instruction and maintain numeric translations for the labels. I think I
would rather do the label translation as an AST rather than backpatching. I
have attached my grammar and sample assembly. My questions:
Why it seems to stop parsing about the comment line (what am i doing it
wrong?)
Where did the caseSensitiveLiterals option disappear?

Thank you,

Cameron.

A sample of the assembly:
version 2.0.0
.data
.end
code main
        putr1 main.1
        forkep r1
        stop
main.1:
        ; alloc sum frame
        put sum, r4
        put 4, r5
        falloc r4, r5, r6
        ; alloc result frame
        put main_res, r4
        put 1, r5
        falloc r4, r5, r7
        ;
        putr1 main.2
        forksp r1
        stop


The Grammar:
grammar SDF;

@header {
package edu.unt.csrl.sdf.asm;
import java.util.HashMap();
}
@members {
HashMap memory = new HashMap(); // Something like this to hold label values
that will be rewritten
}
program
    : (EOL)?
    versionSection
    dataSection
    (codeBlock)*
    ;

versionSection
    : 'version' (.)+ EOL;

dataSection
    : DATABEGIN EOL
        dsBody
      DATAEND EOL;

dsBody
    : ID COLON INT EOL
        iStructBody
        dsBody
    | ;

iStructBody
    : ('i' | 'ri' | 'f' | 'rf' | 'a' | 'ra' | 'u' | 'ru')=>
        iStructElement
        iStructBody
    | ;

iStructElement
    : 'i' INT EOL
    | 'ri' INT INT EOL
    | 'f' FLOAT EOL
    | 'rf' INT FLOAT EOL
    | 'a' INT EOL
    | 'ra' INT INT EOL
    | 'u' EOL
    | 'ru' INT EOL;

codeBlock
    : 'code' ID EOL
        code;

code
    : label code
    | instruction code
    ;

label
    : ID COLON (EOL)?;

instruction
    : 'nop' EOL
    | 'add' reg['r'] COMMA reg['r'] COMMA reg['r'] EOL
    | 'sub' reg['r'] COMMA reg['r'] COMMA reg['r'] EOL
    | 'mul' reg['r'] COMMA reg['r'] COMMA reg['r'] EOL
    | 'div' reg['r'] COMMA reg['r'] COMMA reg['r'] EOL
    | 'mod' reg['r'] COMMA reg['r'] COMMA reg['r'] EOL
    | 'and' reg['r'] COMMA reg['r'] COMMA reg['r'] EOL
    | 'or' reg['r'] COMMA reg['r'] COMMA reg['r'] EOL
    | 'not' reg['r'] COMMA reg['r'] EOL
    | 'xor' reg['r'] COMMA reg['r'] COMMA reg['r'] EOL
    | 'band' reg['r'] COMMA reg['r'] COMMA reg['r'] EOL
    | 'bor' reg['r'] COMMA reg['r'] COMMA reg['r'] EOL
    | 'bnot' reg['r'] COMMA reg['r'] EOL
    | 'shl' reg['r'] COMMA reg['r'] COMMA reg['r'] EOL
    | 'shr' reg['r'] COMMA reg['r'] COMMA reg['r'] EOL
    | 'sar' reg['r'] COMMA reg['r'] COMMA reg['r'] EOL
    | 'neg' reg['r'] COMMA reg['r'] EOL
    | 'max' reg['r'] COMMA reg['r'] COMMA reg['r'] EOL
    | 'min' reg['r'] COMMA reg['r'] COMMA reg['r'] EOL
    | 'abs' reg['r'] COMMA reg['r'] EOL
    | 'lt' reg['r'] COMMA reg['r'] COMMA reg['r'] EOL
    | 'le' reg['r'] COMMA reg['r'] COMMA reg['r'] EOL
    | 'eq' reg['r'] COMMA reg['r'] COMMA reg['r'] EOL
    | 'ne' reg['r'] COMMA reg['r'] COMMA reg['r'] EOL
    | 'ge' reg['r'] COMMA reg['r'] COMMA reg['r'] EOL
    | 'gt' reg['r'] COMMA reg['r'] COMMA reg['r'] EOL
    | 'tbl' reg['r'] COMMA reg['r'] EOL
    | 'tch' reg['r'] COMMA reg['r'] EOL
    | 'fadd' reg['f'] COMMA reg['f'] COMMA reg['f'] EOL
    | 'fsub' reg['f'] COMMA reg['f'] COMMA reg['f'] EOL
    | 'fmul' reg['f'] COMMA reg['f'] COMMA reg['f'] EOL
    | 'fdiv' reg['f'] COMMA reg['f'] COMMA reg['f'] EOL
    | 'flr' reg['f'] COMMA reg['f'] EOL
    | 'ceil' reg['f'] COMMA reg['f'] EOL
    | 'flt' reg['f'] COMMA reg['f'] COMMA reg['r'] EOL
    | 'fle' reg['f'] COMMA reg['f'] COMMA reg['r'] EOL
    | 'feq' reg['f'] COMMA reg['f'] COMMA reg['r'] EOL
    | 'fne' reg['f'] COMMA reg['f'] COMMA reg['r'] EOL
    | 'fge' reg['f'] COMMA reg['f'] COMMA reg['r'] EOL
    | 'fgt' reg['f'] COMMA reg['f'] COMMA reg['r'] EOL
    | 'trl' reg['r'] COMMA reg['f'] EOL
    | 'tdb' EOL // TODO
    | 'tin' reg['f'] COMMA reg['r'] EOL
    | 'gput' INT COMMA reg['g'] EOL
    | 'gadd' reg['g'] COMMA reg['g'] COMMA reg['g'] EOL
    | 'gsub' reg['g'] COMMA reg['g'] COMMA reg['g'] EOL
    | 'gmul' reg['g'] COMMA reg['g'] COMMA reg['g'] EOL
    | 'gtl' reg['g'] COMMA reg['r'] EOL
    | 'ltg' reg['r'] COMMA reg['g'] EOL
    | 'move' reg['r'] COMMA reg['r'] EOL
    | 'putr1' (INT | ID) EOL
    | 'put' (INT | ID) COMMA reg['r'] EOL
    | 'load' reg['r'] PIPE (reg['r'] | INT) COMMA reg['r'] EOL
    | 'store' reg['r'] COMMA reg['r'] PIPE (reg['r'] | INT) EOL
    | 'store1' EOL // TODO
    | 'rstore' EOL // TODO
    | 'ialloc' reg['r'] COMMA reg['r'] EOL
    | 'ifree' reg['r'] EOL
    | 'ifetch' reg['r'] PIPE (reg['r'] | INT) COMMA reg['r'] EOL
    | 'istore' reg['r'] COMMA reg['r'] PIPE (reg['r'] | INT) EOL
    | 'forksp' reg['r'] ( | COMMA reg['r']) EOL
    | 'forkep' reg['r'] ( | COMMA reg['r']) EOL
    | 'stop' EOL
    | 'falloc' reg['r'] COMMA reg['r'] COMMA reg['r'] EOL
    | 'ralloc' EOL // TODO
    | 'ffree' ( | reg['r']) EOL
    | 'input' INT COMMA reg['r'] EOL
    | 'output' reg['r'] COMMA INT EOL
    | 'skip' EOL // TODO
    | 'ifchcl' EOL // TODO
    | 'pow' reg['r'] COMMA reg['r'] COMMA reg['r'] EOL
    | 'sfalloc' EOL // TODO
    | 'fput' FLOAT COMMA reg['f'] EOL
    | 'finput' INT COMMA reg['f'] EOL
    | 'halt' EOL
    | 'fmove' reg['f'] COMMA reg['f'] EOL
    | 'fneg' reg['f'] COMMA reg['f'] EOL
    | 'fabs' reg['f'] COMMA reg['f'] EOL
    | 'fmath' INT COMMA reg['f'] COMMA reg['f'] EOL
    | 'sforkep' EOL // TODO
    | 'sforksp' EOL // TODO
    | 'scforksp' EOL // TODO
    | 'sffree' EOL // TODO
    | 'sread' EOL
    ;

reg[char type] returns[int rNum = -1]
    : rStr=ID {
        try {
            if(Character.toLowerCase (rStr.charAt(0)) != type)
                throw new SemanticException("expected " + type + "x, found "
+ rStr);

            if(rStr.equals("RFP"))
                rNum = 63;
            else
                rNum = Integer.parseInt(rStr.substring(1));
        } catch(Exception ex) {
            throw new SemanticException("expected " + type + "x, found " +
rStr);
        }
    };

DATABEGIN:
    '.data';
DATAEND:
    '.end';
COMMENT
    : SEMI (.)* EOL {$channel=HIDDEN};
fragment DIGIT
    : ('0'..'9');
INT
    : ('-')? (DIGIT)+;
FLOAT
    : INT '.' (DIGIT)+;
SEMI
    : ';';
COLON
    : ':';
COMMA
    : ',';
PIPE
    : '|';

ID
    : ('a'..'z'|'A'..'Z'|'_') ('a'..'z'|'A'..'Z'|'_'|'.'|'0'..'9')*;

EOL
    : (('\r')? '\n') {newline();};

WS
    : (
    | (' ' | '\t')
    ) { $channel=HIDDEN; }
    ;
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070518/bf6739f4/attachment-0001.html 

From tedv at esrconsulting.com  Thu May 17 22:19:14 2007
From: tedv at esrconsulting.com (Ted Villalba)
Date: Thu, 17 May 2007 22:19:14 -0700
Subject: [antlr-interest] Creating Lexer from String
Message-ID: <200705180519.l4I5JF7a086886@pro36.abac.com>

Hi. Thank you for the response.
Having downloaded the latest release of 3.0, I could not find
ANTLRStringReader mentioned in any of the jar files. 
For posterity, that did clue me in to ANTLRStringStream, which did the job.

Thanks,
Ted


From service at sharpplus.com  Thu May 17 23:53:14 2007
From: service at sharpplus.com (=?iso-8859-1?Q?service?=)
Date: Fri, 18 May 2007 06:53:14 +0000
Subject: [antlr-interest] antlrworks 1.0 problem
Message-ID: <20070518065314.23722.qmail@server314.com>

Dear friends,

         I just downloaded the antlrworks 1.0 and used for a while. I am glad to find the new version supports the MDI window style.But the bad news is that when I open about window or search window, the gui begin to flicker greatly and finally it is deadlocked.

best regards
chinshou
Sqlite Developer
SharpPlus Software Corp. Yokohama, Japan

From antlr-list at arizona-software.ch  Fri May 18 00:17:14 2007
From: antlr-list at arizona-software.ch (Jean Bovet)
Date: Fri, 18 May 2007 00:17:14 -0700
Subject: [antlr-interest] antlrworks 1.0 problem
In-Reply-To: <20070518065314.23722.qmail@server314.com>
References: <20070518065314.23722.qmail@server314.com>
Message-ID: <18B1CF00-48CA-464B-AA2F-3D362EDA27F1@arizona-software.ch>

Thanks for the feedback. You can disable this mode by going into the  
Preferences > General: Desktop Mode. Can you reproduce this issue? If  
so, what are the exact steps leading to it?

Regards,

Jean

On May 17, 2007, at 11:53 PM, service wrote:

> Dear friends,
>
>          I just downloaded the antlrworks 1.0 and used for a while.  
> I am glad to find the new version supports the MDI window style.But  
> the bad news is that when I open about window or search window, the  
> gui begin to flicker greatly and finally it is deadlocked.
>
> best regards
> chinshou
> Sqlite Developer
> SharpPlus Software Corp. Yokohama, Japan


From pink at odahoda.de  Fri May 18 01:09:25 2007
From: pink at odahoda.de (Benjamin Niemann)
Date: Fri, 18 May 2007 10:09:25 +0200
Subject: [antlr-interest] Lexer issue with Python target and predicates
References: <f2il3p$9jj$2@sea.gmane.org>
Message-ID: <f2jmvm$rup$1@sea.gmane.org>

Hello,

Laurie Harper wrote:

> I have a grammar which is producing illegal Python code. Both semantic
> and syntactic predicates seem to trigger the incorrect code.
>
> [...]

That's fixed in the just released 3.0 - grab it, as long as it's fresh ;)

>[...] with the full grammar, the lexer is over 28Mb of Python (!) and
> can't be imported :-(

Yeah - the Python compliler seems to be pretty memory hungry. I had a 15MB
lexer and gave up after a few minutes with most of the swap memory being
allocated.

That's fixed now, too. Now I'm using compressed lookup tables, which are
uncompressed at runtime - just like Java, where .class files seem to have a
size limit.

-- 
Benjamin Niemann
Email: pink at odahoda dot de
WWW: http://pink.odahoda.de/


From service at sharpplus.com  Fri May 18 01:30:07 2007
From: service at sharpplus.com (=?iso-8859-1?Q?service?=)
Date: Fri, 18 May 2007 08:30:07 +0000
Subject: [antlr-interest] antlrworks 1.0 problem
Message-ID: <20070518083007.30651.qmail@server314.com>

Thanks for your quick response, I just disabled the desktop mode then re-enabled it and the problem was disappeared. now it works correctly under mdi mode. 

Before I changed the settings, the reported problem was 100% duplicate by clicking the Help|About menuitem or press Ctrl+F to invoke the search window.

best regards
chinshou
Sqlite Developer
SharpPlus Software Corp. Yokohama, Japan

>  -------Original Message-------
>  From: Jean Bovet <antlr-list at arizona-software.ch>
>  Subject: Re: [antlr-interest] antlrworks 1.0 problem
>  Sent: 18 May '07 07:17
>  
>  Thanks for the feedback. You can disable this mode by going into the  
>  Preferences > General: Desktop Mode. Can you reproduce this issue? If  
>  so, what are the exact steps leading to it?
>  
>  Regards,
>  
>  Jean
>  
>  On May 17, 2007, at 11:53 PM, service wrote:
>  
>  > Dear friends,
>  >
>  >          I just downloaded the antlrworks 1.0 and used for a while.  
>  > I am glad to find the new version supports the MDI window style.But  
>  > the bad news is that when I open about window or search window, the  
>  > gui begin to flicker greatly and finally it is deadlocked.
>  >
>  > best regards
>  > chinshou
>  > Sqlite Developer
>  > SharpPlus Software Corp. Yokohama, Japan
>  
>  

From jimi at temporal-wave.com  Fri May 18 07:50:47 2007
From: jimi at temporal-wave.com (Jim Idle)
Date: Fri, 18 May 2007 07:50:47 -0700
Subject: [antlr-interest] SDF assembly language grammar
In-Reply-To: <bc4938830705172217k7a10c80bxfd134ee15623bf27@mail.gmail.com>
References: <bc4938830705172217k7a10c80bxfd134ee15623bf27@mail.gmail.com>
Message-ID: <B36CCC332A32904F8FA3DE134A235336252556@wavemachine.temporal-wave.com>

Cameron,

 

Your comment rule for the lexer needs to change a little to terminate in
a  non-greedy fashion and not to attempt to embed one rule (EOL) in the
other (otherwise you need to use a separate "fragment" and reference
that (I prefer the formulation below, but you may or may not want the
EOL to be part of the comment token (I assume not)):

 

COMMENT
    : SEMI (~( '\r' | '\n'))* {$channel=HIDDEN};

 

Case sensitivity is normal for the ANTLR 3 token stream, however I have
posted (or someone posted my code at least if I don't post it ;-), a way
to override the default stream with a method that will compare in a case
insensitive way but preserve the original case in the token text (useful
in some cases such as formatters and for literals so on). See:

 

http://www.antlr.org/pipermail/antlr-interest/2007-January/019008.h
tml

 

I need to move this code into the wiki, but then, I need to do a lot of
things ;-)


Jim

 

From: antlr-interest-bounces at antlr.org
[mailto:antlr-interest-bounces at antlr.org] On Behalf Of Cameron Palmer
Sent: Thursday, May 17, 2007 10:17 PM
To: antlr-interest at antlr.org
Subject: [antlr-interest] SDF assembly language grammar

 

I am a student rewriting the assembler for an ISA called SDF (Scheduled
Dataflow). You can check out our work at http://csrl.unt.edu/sdf .
Anyway I am just writing the grammar and am having trouble making the
leap to code generation. I had started with v2 but figure I might just
convert the grammar to v3 today. The goal of this grammar is to emit
opcodes for each instruction and maintain numeric translations for the
labels. I think I would rather do the label translation as an AST rather
than backpatching. I have attached my grammar and sample assembly. My
questions:
Why it seems to stop parsing about the comment line (what am i doing it
wrong?)
Where did the caseSensitiveLiterals option disappear?

Thank you,

Cameron.

A sample of the assembly:
version 2.0.0
.data
.end
code main
        putr1 main.1
        forkep r1
        stop
main.1:
        ; alloc sum frame
        put sum, r4
        put 4, r5 
        falloc r4, r5, r6
        ; alloc result frame
        put main_res, r4
        put 1, r5
        falloc r4, r5, r7
        ;
        putr1 main.2
        forksp r1
        stop


The Grammar:
grammar SDF;

@header {
package edu.unt.csrl.sdf.asm;
import java.util.HashMap();
}
@members {
HashMap memory = new HashMap(); // Something like this to hold label
values that will be rewritten 
}
program
    : (EOL)? 
    versionSection
    dataSection
    (codeBlock)*
    ;

versionSection
    : 'version' (.)+ EOL;

dataSection
    : DATABEGIN EOL
        dsBody 
      DATAEND EOL;

dsBody
    : ID COLON INT EOL
        iStructBody
        dsBody
    | ;

iStructBody
    : ('i' | 'ri' | 'f' | 'rf' | 'a' | 'ra' | 'u' | 'ru')=> 
        iStructElement
        iStructBody
    | ;

iStructElement
    : 'i' INT EOL
    | 'ri' INT INT EOL
    | 'f' FLOAT EOL
    | 'rf' INT FLOAT EOL
    | 'a' INT EOL 
    | 'ra' INT INT EOL
    | 'u' EOL
    | 'ru' INT EOL;

codeBlock
    : 'code' ID EOL
        code;

code
    : label code
    | instruction code
    ; 

label
    : ID COLON (EOL)?;

instruction
    : 'nop' EOL
    | 'add' reg['r'] COMMA reg['r'] COMMA reg['r'] EOL
    | 'sub' reg['r'] COMMA reg['r'] COMMA reg['r'] EOL 
    | 'mul' reg['r'] COMMA reg['r'] COMMA reg['r'] EOL
    | 'div' reg['r'] COMMA reg['r'] COMMA reg['r'] EOL
    | 'mod' reg['r'] COMMA reg['r'] COMMA reg['r'] EOL 
    | 'and' reg['r'] COMMA reg['r'] COMMA reg['r'] EOL
    | 'or' reg['r'] COMMA reg['r'] COMMA reg['r'] EOL
    | 'not' reg['r'] COMMA reg['r'] EOL 
    | 'xor' reg['r'] COMMA reg['r'] COMMA reg['r'] EOL
    | 'band' reg['r'] COMMA reg['r'] COMMA reg['r'] EOL
    | 'bor' reg['r'] COMMA reg['r'] COMMA reg['r'] EOL 
    | 'bnot' reg['r'] COMMA reg['r'] EOL
    | 'shl' reg['r'] COMMA reg['r'] COMMA reg['r'] EOL
    | 'shr' reg['r'] COMMA reg['r'] COMMA reg['r'] EOL 
    | 'sar' reg['r'] COMMA reg['r'] COMMA reg['r'] EOL
    | 'neg' reg['r'] COMMA reg['r'] EOL
    | 'max' reg['r'] COMMA reg['r'] COMMA reg['r'] EOL 
    | 'min' reg['r'] COMMA reg['r'] COMMA reg['r'] EOL
    | 'abs' reg['r'] COMMA reg['r'] EOL
    | 'lt' reg['r'] COMMA reg['r'] COMMA reg['r'] EOL 
    | 'le' reg['r'] COMMA reg['r'] COMMA reg['r'] EOL
    | 'eq' reg['r'] COMMA reg['r'] COMMA reg['r'] EOL
    | 'ne' reg['r'] COMMA reg['r'] COMMA reg['r'] EOL 
    | 'ge' reg['r'] COMMA reg['r'] COMMA reg['r'] EOL
    | 'gt' reg['r'] COMMA reg['r'] COMMA reg['r'] EOL
    | 'tbl' reg['r'] COMMA reg['r'] EOL 
    | 'tch' reg['r'] COMMA reg['r'] EOL
    | 'fadd' reg['f'] COMMA reg['f'] COMMA reg['f'] EOL
    | 'fsub' reg['f'] COMMA reg['f'] COMMA reg['f'] EOL 
    | 'fmul' reg['f'] COMMA reg['f'] COMMA reg['f'] EOL
    | 'fdiv' reg['f'] COMMA reg['f'] COMMA reg['f'] EOL
    | 'flr' reg['f'] COMMA reg['f'] EOL 
    | 'ceil' reg['f'] COMMA reg['f'] EOL
    | 'flt' reg['f'] COMMA reg['f'] COMMA reg['r'] EOL
    | 'fle' reg['f'] COMMA reg['f'] COMMA reg['r'] EOL 
    | 'feq' reg['f'] COMMA reg['f'] COMMA reg['r'] EOL
    | 'fne' reg['f'] COMMA reg['f'] COMMA reg['r'] EOL
    | 'fge' reg['f'] COMMA reg['f'] COMMA reg['r'] EOL 
    | 'fgt' reg['f'] COMMA reg['f'] COMMA reg['r'] EOL
    | 'trl' reg['r'] COMMA reg['f'] EOL
    | 'tdb' EOL // TODO
    | 'tin' reg['f'] COMMA reg['r'] EOL 
    | 'gput' INT COMMA reg['g'] EOL
    | 'gadd' reg['g'] COMMA reg['g'] COMMA reg['g'] EOL
    | 'gsub' reg['g'] COMMA reg['g'] COMMA reg['g'] EOL 
    | 'gmul' reg['g'] COMMA reg['g'] COMMA reg['g'] EOL
    | 'gtl' reg['g'] COMMA reg['r'] EOL
    | 'ltg' reg['r'] COMMA reg['g'] EOL 
    | 'move' reg['r'] COMMA reg['r'] EOL
    | 'putr1' (INT | ID) EOL
    | 'put' (INT | ID) COMMA reg['r'] EOL
    | 'load' reg['r'] PIPE (reg['r'] | INT) COMMA reg['r'] EOL 
    | 'store' reg['r'] COMMA reg['r'] PIPE (reg['r'] | INT) EOL
    | 'store1' EOL // TODO
    | 'rstore' EOL // TODO
    | 'ialloc' reg['r'] COMMA reg['r'] EOL 
    | 'ifree' reg['r'] EOL
    | 'ifetch' reg['r'] PIPE (reg['r'] | INT) COMMA reg['r'] EOL
    | 'istore' reg['r'] COMMA reg['r'] PIPE (reg['r'] | INT) EOL 
    | 'forksp' reg['r'] ( | COMMA reg['r']) EOL
    | 'forkep' reg['r'] ( | COMMA reg['r']) EOL
    | 'stop' EOL
    | 'falloc' reg['r'] COMMA reg['r'] COMMA reg['r'] EOL 
    | 'ralloc' EOL // TODO
    | 'ffree' ( | reg['r']) EOL
    | 'input' INT COMMA reg['r'] EOL
    | 'output' reg['r'] COMMA INT EOL
    | 'skip' EOL // TODO 
    | 'ifchcl' EOL // TODO
    | 'pow' reg['r'] COMMA reg['r'] COMMA reg['r'] EOL
    | 'sfalloc' EOL // TODO
    | 'fput' FLOAT COMMA reg['f'] EOL 
    | 'finput' INT COMMA reg['f'] EOL
    | 'halt' EOL
    | 'fmove' reg['f'] COMMA reg['f'] EOL
    | 'fneg' reg['f'] COMMA reg['f'] EOL 
    | 'fabs' reg['f'] COMMA reg['f'] EOL
    | 'fmath' INT COMMA reg['f'] COMMA reg['f'] EOL
    | 'sforkep' EOL // TODO
    | 'sforksp' EOL // TODO 
    | 'scforksp' EOL // TODO
    | 'sffree' EOL // TODO
    | 'sread' EOL
    ;

reg[char type] returns[int rNum = -1]
    : rStr=ID {
        try {
            if(Character.toLowerCase (rStr.charAt(0)) != type)
                throw new SemanticException("expected " + type + "x,
found " + rStr);
            
            if(rStr.equals("RFP"))
                rNum = 63; 
            else
                rNum = Integer.parseInt(rStr.substring(1));
        } catch(Exception ex) {
            throw new SemanticException("expected " + type + "x, found "
+ rStr); 
        }
    };
    
DATABEGIN:
    '.data';
DATAEND:
    '.end';
COMMENT
    : SEMI (.)* EOL {$channel=HIDDEN}; 
fragment DIGIT
    : ('0'..'9');
INT 
    : ('-')? (DIGIT)+;        
FLOAT    
    : INT '.' (DIGIT)+;
SEMI    
    : ';';
COLON
    : ':';
COMMA
    : ',';
PIPE
    : '|';

ID 
    : ('a'..'z'|'A'..'Z'|'_') ('a'..'z'|'A'..'Z'|'_'|'.'|'0'..'9')*;

EOL
    : (('\r')? '\n') {newline();}; 
    
WS
    : (
    | (' ' | '\t')
    ) { $channel=HIDDEN; }
    ;

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070518/ede36230/attachment-0001.html 

From parrt at cs.usfca.edu  Fri May 18 11:23:39 2007
From: parrt at cs.usfca.edu (Terence Parr)
Date: Fri, 18 May 2007 11:23:39 -0700
Subject: [antlr-interest] Creating Lexer from String
In-Reply-To: <200705180519.l4I5JF7a086886@pro36.abac.com>
References: <200705180519.l4I5JF7a086886@pro36.abac.com>
Message-ID: <0073F0AA-B228-4F4E-87AF-0C81D288F01D@cs.usfca.edu>


On May 17, 2007, at 10:19 PM, Ted Villalba wrote:

> Hi. Thank you for the response.
> Having downloaded the latest release of 3.0, I could not find
> ANTLRStringReader mentioned in any of the jar files.
> For posterity, that did clue me in to ANTLRStringStream, which did  
> the job.

Doh!  I had better read the API doc after I write it. ;)

Ter


From parrt at cs.usfca.edu  Fri May 18 11:36:18 2007
From: parrt at cs.usfca.edu (Terence Parr)
Date: Fri, 18 May 2007 11:36:18 -0700
Subject: [antlr-interest] [v3]Tracking Hidden Channels
In-Reply-To: <4153ee230705172048l572ca734rdd3f180bc8c6ff86@mail.gmail.com>
References: <4153ee230705172048l572ca734rdd3f180bc8c6ff86@mail.gmail.com>
Message-ID: <FE954F76-0CC7-4F69-8339-644B072687EF@cs.usfca.edu>

Hi. I added a FAQ entry for you:

http://www.antlr.org/wiki/pages/viewpage.action?pageId=557063

Ter

From firatkucuk at gmail.com  Fri May 18 12:04:56 2007
From: firatkucuk at gmail.com (=?ISO-8859-9?Q?F=FDrat_K=DC=C7=DCK?=)
Date: Fri, 18 May 2007 22:04:56 +0300
Subject: [antlr-interest] a grammar problem
Message-ID: <7385e6fe0705181204q7dcc72bdx9bd7d74e9175124e@mail.gmail.com>

This is a sample programming language grammar in v3 format

-----------------------------------------------------------------------

grammar Sample;

start
    :   statement*
    ;


statement
    :   PRINT expressionList? SEMICOLON
    ;


expressionList
    :   expression (COMMA expression)* COMMA?
    ;


expression
    :   operation ((PLUS | MINUS) operation)*
    ;


operation
    :   inParens ((ASTERISK | SLASH) inParens)*
    ;


inParens
    :   LEFT_PARENTHESIS expression RIGHT_PARENTHESIS
    |   literal
    ;


literal
    :   NUMBER
    |   STRING
    // SHOULD BE ARRAY
    |   LEFT_PARENTHESIS expressionList? RIGHT_PARENTHESIS
    ;


WHITESPACE        :   (' ' | '\t')+  {$channel = HIDDEN;} ;
NUMBER            :   ('0' .. '9')+                       ;
STRING            :   '"' (.)* '"'                        ;
LEFT_PARENTHESIS  :   '('                                 ;
RIGHT_PARENTHESIS :   ')'                                 ;
PLUS              :   '+'                                 ;
MINUS             :   '-'                                 ;
ASTERISK          :   '*'                                 ;
SLASH             :   '/'                                 ;
PRINT             :   'print'                             ;
COMMA             :   ','                                 ;
SEMICOLON         :   ';'                                 ;


-----------------------------------------------------------------------

the problem is inParens rule and Array literals.

how can i fix this problem without using syntactic predicate?


-- 
??r. G?r. F?rat K???K
ADAMYO Distance Learning
SAKARYA University / TURKEY

From laurie at holoweb.net  Fri May 18 12:35:12 2007
From: laurie at holoweb.net (Laurie Harper)
Date: Fri, 18 May 2007 15:35:12 -0400
Subject: [antlr-interest] Lexer issue with Python target and predicates
In-Reply-To: <f2jmvm$rup$1@sea.gmane.org>
References: <f2il3p$9jj$2@sea.gmane.org> <f2jmvm$rup$1@sea.gmane.org>
Message-ID: <f2kv5g$l3j$1@sea.gmane.org>

Benjamin Niemann wrote:
> Hello,
> 
> Laurie Harper wrote:
> 
>> I have a grammar which is producing illegal Python code. Both semantic
>> and syntactic predicates seem to trigger the incorrect code.
>>
>> [...]
> 
> That's fixed in the just released 3.0 - grab it, as long as it's fresh ;)
> 
>> [...] with the full grammar, the lexer is over 28Mb of Python (!) and
>> can't be imported :-(
> 
> Yeah - the Python compliler seems to be pretty memory hungry. I had a 15MB
> lexer and gave up after a few minutes with most of the swap memory being
> allocated.
> 
> That's fixed now, too. Now I'm using compressed lookup tables, which are
> uncompressed at runtime - just like Java, where .class files seem to have a
> size limit.

Wow, *much* better ;-) Thanks, that did the trick.

L.


From parrt at cs.usfca.edu  Fri May 18 12:37:41 2007
From: parrt at cs.usfca.edu (Terence Parr)
Date: Fri, 18 May 2007 12:37:41 -0700
Subject: [antlr-interest] a grammar problem
In-Reply-To: <7385e6fe0705181204q7dcc72bdx9bd7d74e9175124e@mail.gmail.com>
References: <7385e6fe0705181204q7dcc72bdx9bd7d74e9175124e@mail.gmail.com>
Message-ID: <A253349B-733F-4BDC-987A-084AFBC9D696@cs.usfca.edu>


On May 18, 2007, at 12:04 PM, F?rat K???K wrote:

>
> inParens
>    :   LEFT_PARENTHESIS expression RIGHT_PARENTHESIS
>    |   literal
>    ;
>
>
> literal
>    :   NUMBER
>    |   STRING
>    // SHOULD BE ARRAY
>    |   LEFT_PARENTHESIS expressionList? RIGHT_PARENTHESIS
>    ;
>

> the problem is inParens rule and Array literals.
>
> how can i fix this problem without using syntactic predicate?

THose rules are completely ambiguous.  you don't need inParens  
anyway.  Just call literal. same thing.
Ter


From jimi at temporal-wave.com  Fri May 18 12:51:47 2007
From: jimi at temporal-wave.com (Jim Idle)
Date: Fri, 18 May 2007 12:51:47 -0700
Subject: [antlr-interest] a grammar problem
In-Reply-To: <7385e6fe0705181204q7dcc72bdx9bd7d74e9175124e@mail.gmail.com>
References: <7385e6fe0705181204q7dcc72bdx9bd7d74e9175124e@mail.gmail.com>
Message-ID: <B36CCC332A32904F8FA3DE134A235336252566@wavemachine.temporal-wave.com>

I see Ter answered already, but it might be useful for you to see this rearranged. I think you want:

operation
    :   atom ((ASTERISK | SLASH) atom)*
    ;


atom
    :   NUMBER
    |   STRING
    |   array
    |   LEFT_PARENTHESIS expressionList? RIGHT_PARENTHESIS
    ;

array  // Assumes that arrays have some sort of lead in as if they are just ( expr (COMMA expr)*) then they
       // are the same as paren expressions and cannot be distinguished.
	: ID LEFT_PARENTHESIS expressionList RIGHT_PARENTHESIS
	;


-----Original Message-----
From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-bounces at antlr.org] On Behalf Of Firat K???K
Sent: Friday, May 18, 2007 12:05 PM
To: L?STE ANTLR-INTEREST
Subject: [antlr-interest] a grammar problem



From tedv at esrconsulting.com  Fri May 18 13:59:17 2007
From: tedv at esrconsulting.com (Ted Villalba)
Date: Fri, 18 May 2007 13:59:17 -0700
Subject: [antlr-interest] Somewhere between actions and string templates
Message-ID: <200705182059.l4IKxHAE046176@pro36.abac.com>

Hi ,
 
I'm trying to move from print statements to StringTemplates in my tree
grammars, and in the process got stuck on a couple of things:
return values and 
how to reuse my previous actions.
 
I think the following lines may be enough to express where I am confused. I
am using a template here because I'm unable to grab the list of values
otherwise:
 
 
expression returns [String subexpr]:         ^('=' tag (v+=value)+) ->
template(values={$v}) "<values>" ;
 
//         {
//Commented out this code to add the template
//           $subexpr=$tag.text+":"+$value.text;      //added the template
because this $value.text would only grab the first value
//       }                                                  
//      ;
 
I am not so interested in printing something out, but rather in passing back
subexpr once I can get the list of 'values' into that expression(
$subexpr=.). 
 
Somewhat related, in the book when StringTemplates are introduced, the
embedded actions go away, yet the return statements remain, so I don't see
how the [int value] is populated here. Maybe if I understand that, it will
help me with the above.
 
expr returns [int value]
    :   ^('+' a=expr b=expr) -> add(a={$a.st},b={$b.st})
    |   ^('-' a=expr b=expr) -> sub(a={$a.st},b={$b.st})
    |   ^('*' a=expr b=expr) -> mult(a={$a.st},b={$b.st})
    |   INT -> int(v={$INT.text})
    |   ID  -> var(id={$ID.text}, varNum={locals.get($ID.text)})
;
 
Apologies for the barrage of misunderstandings, but I'm a little adrift here
I think.
Thanks very much for reading this far!
 
Ted
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070518/d662c237/attachment.html 

From laurie at holoweb.net  Fri May 18 14:36:25 2007
From: laurie at holoweb.net (Laurie Harper)
Date: Fri, 18 May 2007 17:36:25 -0400
Subject: [antlr-interest] Tail ambiguity
Message-ID: <f2l68q$iib$1@sea.gmane.org>

I'm trying to match a sequence of literal text interspersed with 
expression, where the expression can take either of two forms but can't 
be mixed. For example, 'a ${b} c ${d}' and 'a #{b} c #{d}' are legal, 
but 'a ${b} c #{d}' is not.

The problem is, I get an ambiguity warning I'm not sure how to get rid of...

warning(200): ElSpecParser.g:41:4: Decision can match input such as 
"LiteralExpression EOF" using multiple alternatives: 1, 2
As a result, alternative(s) 2 were disabled for that input
w

Here's the relevant rule set:

rValue
	: (rValueComponent1)+ EOF
	| (rValueComponent2)+ EOF
	;

rValueComponent1
	: DOLLAR LCURLY expression RCURLY
	| LiteralExpression
	;

rValueComponent2
	: HASH LCURLY expression RCURLY
	| LiteralExpression
	;

The solution would be easy if mixed expression types were allowed :-/ 
Any suggestions?

L.


From jimi at temporal-wave.com  Fri May 18 15:01:52 2007
From: jimi at temporal-wave.com (Jim Idle)
Date: Fri, 18 May 2007 15:01:52 -0700
Subject: [antlr-interest] Tail ambiguity
In-Reply-To: <f2l68q$iib$1@sea.gmane.org>
References: <f2l68q$iib$1@sea.gmane.org>
Message-ID: <B36CCC332A32904F8FA3DE134A235336252571@wavemachine.temporal-wave.com>

It might be easiest to allow the mix in your parser, then throw them out
in semantic analysis. If you must throw it out in the actual parser then
allow both syntactically but in the component, create a rule scope which
flags which type is seen, then as you pick up another element, you can
check that it is of the same type and error out if it isn't.

Your ambiguity here is because rValue allows either rule, but both rules
contain LiteralExpression. One way or another, you need to rework that.

Hope that helps,

Jim

-----Original Message-----
From: antlr-interest-bounces at antlr.org
[mailto:antlr-interest-bounces at antlr.org] On Behalf Of Laurie Harper
Sent: Friday, May 18, 2007 2:36 PM
To: antlr-interest at antlr.org
Subject: [antlr-interest] Tail ambiguity

I'm trying to match a sequence of literal text interspersed with 
expression, where the expression can take either of two forms but can't 
be mixed. For example, 'a ${b} c ${d}' and 'a #{b} c #{d}' are legal, 
but 'a ${b} c #{d}' is not.

The problem is, I get an ambiguity warning I'm not sure how to get rid
of...

warning(200): ElSpecParser.g:41:4: Decision can match input such as 
"LiteralExpression EOF" using multiple alternatives: 1, 2
As a result, alternative(s) 2 were disabled for that input
w

Here's the relevant rule set:

rValue
	: (rValueComponent1)+ EOF
	| (rValueComponent2)+ EOF
	;

rValueComponent1
	: DOLLAR LCURLY expression RCURLY
	| LiteralExpression
	;

rValueComponent2
	: HASH LCURLY expression RCURLY
	| LiteralExpression
	;

The solution would be easy if mixed expression types were allowed :-/ 
Any suggestions?

L.


From jbb at acm.org  Fri May 18 16:03:31 2007
From: jbb at acm.org (John B. Brodie)
Date: Fri, 18 May 2007 19:03:31 -0400
Subject: [antlr-interest] Tail ambiguity
In-Reply-To: <f2l68q$iib$1@sea.gmane.org> (message from Laurie Harper on Fri, 
	18 May 2007 17:36:25 -0400)
References: <f2l68q$iib$1@sea.gmane.org>
Message-ID: <E1HpBTv-0006Ev-00@gecko>

Greetings!

Laurie Harper asked:
>I'm trying to match a sequence of literal text interspersed with 
>expression, where the expression can take either of two forms but can't 
>be mixed. For example, 'a ${b} c ${d}' and 'a #{b} c #{d}' are legal, 
>but 'a ${b} c #{d}' is not.
>...snippedity-snip...
>Here's the relevant rule set:
>
>rValue
>       : (rValueComponent1)+ EOF
>       | (rValueComponent2)+ EOF
>       ;
>
>rValueComponent1
>       : DOLLAR LCURLY expression RCURLY
>       | LiteralExpression
>       ;
>
>rValueComponent2
>       : HASH LCURLY expression RCURLY
>       | LiteralExpression
>       ;

How about this (untested):

rValue : rV_List EOF ;

rV_List
    : ( rValueComponent1 rV1_List )
    | ( rValueComponent2 rV2_List )
    | ( LiteralExpression rV_List? )
    ;

rValueComponent1 : DOLLAR LCURLY expression RCURLY ;
rV1_List : ( rValueComponent1 | LiteralExpression )* ;

rValueComponent2 : HASH LCURLY expression RCURLY ;
rV2_List : ( rValueComponent2 | LiteralExpression )* ;



basically we left-factor your two component rules in order to consume all
leading literals and then differentiate on the first expression occurrence.

   -jbb

From laguest at archangeli.co.uk  Sat May 19 09:20:36 2007
From: laguest at archangeli.co.uk (Luke A. Guest)
Date: Sat, 19 May 2007 17:20:36 +0100
Subject: [antlr-interest] Ada95 back-end for v3
Message-ID: <1179591637.7574.34.camel@rogue>

Hi,

Is anyone working on a back-end for Ada95? If so, is the source
available?

Thanks,
Luke.



From antlr-list at arizona-software.ch  Sat May 19 09:27:08 2007
From: antlr-list at arizona-software.ch (Jean Bovet)
Date: Sat, 19 May 2007 09:27:08 -0700
Subject: [antlr-interest] antlrworks 1.0 problem
In-Reply-To: <20070518083007.30651.qmail@server314.com>
References: <20070518083007.30651.qmail@server314.com>
Message-ID: <280471C2-652C-4587-9936-4BB1EF38433D@arizona-software.ch>

It will be fixed in the 1.0.1 release. Thanks!

Jean

On May 18, 2007, at 1:30 AM, service wrote:

> Thanks for your quick response, I just disabled the desktop mode  
> then re-enabled it and the problem was disappeared. now it works  
> correctly under mdi mode.
>
> Before I changed the settings, the reported problem was 100%  
> duplicate by clicking the Help|About menuitem or press Ctrl+F to  
> invoke the search window.
>
> best regards
> chinshou
> Sqlite Developer
> SharpPlus Software Corp. Yokohama, Japan
>
>>  -------Original Message-------
>>  From: Jean Bovet <antlr-list at arizona-software.ch>
>>  Subject: Re: [antlr-interest] antlrworks 1.0 problem
>>  Sent: 18 May '07 07:17
>>
>>  Thanks for the feedback. You can disable this mode by going into the
>>  Preferences > General: Desktop Mode. Can you reproduce this  
>> issue? If
>>  so, what are the exact steps leading to it?
>>
>>  Regards,
>>
>>  Jean
>>
>>  On May 17, 2007, at 11:53 PM, service wrote:
>>
>>> Dear friends,
>>>
>>>          I just downloaded the antlrworks 1.0 and used for a while.
>>> I am glad to find the new version supports the MDI window style.But
>>> the bad news is that when I open about window or search window, the
>>> gui begin to flicker greatly and finally it is deadlocked.
>>>
>>> best regards
>>> chinshou
>>> Sqlite Developer
>>> SharpPlus Software Corp. Yokohama, Japan
>>
>>


From kroepke at classdump.org  Sat May 19 12:47:04 2007
From: kroepke at classdump.org (Kay Roepke)
Date: Sat, 19 May 2007 21:47:04 +0200
Subject: [antlr-interest] ANTLR book is out
In-Reply-To: <D24C160E-C3A9-4057-B7C0-D191A6E5147F@cs.usfca.edu>
References: <A5B15F66-8933-4E75-AECF-2C3297886F25@cs.usfca.edu>
	<200705171336.33310.rschulz@sonic.net>
	<B36CCC332A32904F8FA3DE134A235336252548@wavemachine.temporal-wave.com>
	<D24C160E-C3A9-4057-B7C0-D191A6E5147F@cs.usfca.edu>
Message-ID: <CFFB5A4B-7665-4092-882D-AE2DBAFD96F5@classdump.org>


On May 18, 2007, at 12:30 AM, Terence Parr wrote:

> That said, send me the price of two beers anyway per Jim ;)  ha  
> haha haha

> On May 17, 2007, at 2:33 PM, Jim Idle wrote:
>
>> 1) If you are a student and can't get your father to buy it, then
>> perhaps you can stay out of the Union bar one night (UK/Australia/ 
>> Etc)
>> and use the proceeds to buy the book? ;-) Or, if you are in the  
>> US, buy
>> the Chuck-Ts rather than the latest marketing (all programmers should
>> wear these anyway);
>> 2) If you are not a student, then stay out of the Pub for two  
>> hours (UK
>> equivalent - 12 femtosconds) and use the proceeds to buy the more
>> expensive book;

Guys, you are definitely living in the wrong cities...;)

-- 
Kay R?pke
http://classdump.org/





From cameron.palmer at gmail.com  Sat May 19 12:55:47 2007
From: cameron.palmer at gmail.com (Cameron Palmer)
Date: Sat, 19 May 2007 14:55:47 -0500
Subject: [antlr-interest] Morse Code in the Book
Message-ID: <bc4938830705191255l89d1594k70093289855d512d@mail.gmail.com>

Is there a printing error on page 45? It seems that the morse O (3 dashes)
was converted to one really long line like a super em-dash.

Cameron (KG6NTD)
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070519/87c85e9c/attachment.html 

From parrt at cs.usfca.edu  Sat May 19 15:24:26 2007
From: parrt at cs.usfca.edu (Terence Parr)
Date: Sat, 19 May 2007 15:24:26 -0700
Subject: [antlr-interest] Morse Code in the Book
In-Reply-To: <bc4938830705191255l89d1594k70093289855d512d@mail.gmail.com>
References: <bc4938830705191255l89d1594k70093289855d512d@mail.gmail.com>
Message-ID: <2DB9C187-66EA-4EF7-880B-D54049EAEF81@cs.usfca.edu>

Sorry about that...they all got blended together.
Ter
On May 19, 2007, at 12:55 PM, Cameron Palmer wrote:

> Is there a printing error on page 45? It seems that the morse O (3  
> dashes) was converted to one really long line like a super em-dash.
>
> Cameron (KG6NTD)


From parrt at cs.usfca.edu  Sat May 19 16:20:51 2007
From: parrt at cs.usfca.edu (Terence Parr)
Date: Sat, 19 May 2007 16:20:51 -0700
Subject: [antlr-interest] Somewhere between actions and string templates
In-Reply-To: <200705182059.l4IKxHAE046176@pro36.abac.com>
References: <200705182059.l4IKxHAE046176@pro36.abac.com>
Message-ID: <53B875D6-8892-4542-8BB2-E696A0EBD0C7@cs.usfca.edu>


On May 18, 2007, at 1:59 PM, Ted Villalba wrote:
> expression returns [String subexpr]:         ^('=' tag (v+=value)+)  
> -> template(values={$v}) "<values>" ;
>
>
>
> //          
> {                                                            // 
> Commented out this code to add the template
>
> //           $subexpr=$tag.text+":"+$value.text;      //added the  
> template because this $value.text would only grab the first value
>
> //       }
>
> //      ;
>
>
>
> I am not so interested in printing something out, but rather in  
> passing back subexpr once I can get the list of ?values? into that  
> expression( $subexpr=?).

With output=template option rule expression will implicitly return a  
ST.  The explicit return values are no longer needed.

What you have should work fine.  What is going wrong?
>  Somewhat related, in the book when StringTemplates are introduced,  
> the embedded actions go away, yet the return statements remain, so  
> I don?t see how the [int value] is populated here. Maybe if I  
> understand that, it will help me with the above.

ooops.

Ter

From cameron.palmer at gmail.com  Sun May 20 00:42:27 2007
From: cameron.palmer at gmail.com (Cameron Palmer)
Date: Sun, 20 May 2007 02:42:27 -0500
Subject: [antlr-interest] rule vs. subrule conflict, or
Message-ID: <bc4938830705200042i61d0046dt806c75e630dd8556@mail.gmail.com>

Jim - Thank you very much. I believe I have conquered Comment handling, and
I also found a bit on the case insensitive issue at
http://www.antlr.org/wiki/display/ANTLR3/Migrating+from+ANTLR+2+to+ANTLR+3.

I am encountering an interesting conflict between a rule and a subrule.

In the dsBody rule if i choose an ID that matches one of the iStructElement
rules I get a MismatchTokenException or with a slightly different
formulation NoViableAltException.

Example Input that causes error:
.data
i:12 <- problem if you change 'i' to 'b' all is well
i 12
i 13
i 14
.end

what i find stange is that I would assume that the ID COLON INT EOL in the
grammar below would be checked beforehand and therefore no ambiguity. The
syntax diagram in ANTLRworks and the source code generated by ANTLR leads me
to believe this is the correct interpretation.

Grammar fragment:
dataSection
    : DATABEGIN EOL
    dsBody
    DATAEND EOL
    ;

dsBody    : ID COLON INT EOL
    (iStructElement EOL)+
    ;

iStructElement
    : 'i' INT
    | 'ri' INT INT
    | 'f'
    | 'rf' INT
    | 'a' INT
    | 'ra' INT INT
    | 'u'
    | 'ru' INT
    ;

Thank you,

Cameron.

On 5/18/07, Jim Idle <jimi at temporal-wave.com> wrote:
>
>  Cameron,
>
>
>
> Your comment rule for the lexer needs to change a little to terminate in
> a  non-greedy fashion and not to attempt to embed one rule (EOL) in the
> other (otherwise you need to use a separate "fragment" and reference that (I
> prefer the formulation below, but you may or may not want the EOL to be part
> of the comment token (I assume not)):
>
>
>
> COMMENT
>     : SEMI (~( '\r' | '\n'))* {$channel=HIDDEN};
>
>
>
> Case sensitivity is normal for the ANTLR 3 token stream, however I have
> posted (or someone posted my code at least if I don't post it ;-), a way to
> override the default stream with a method that will compare in a case
> insensitive way but preserve the original case in the token text (useful in
> some cases such as formatters and for literals so on). See:
>
>
>
>
> http://www.antlr.org/pipermail/antlr-interest/2007-January/019008.html
>
>
>
> I need to move this code into the wiki, but then, I need to do a lot of
> things ;-)
>
>
> Jim
>
>
>
> *From:* antlr-interest-bounces at antlr.org [mailto:
> antlr-interest-bounces at antlr.org] *On Behalf Of *Cameron Palmer
> *Sent:* Thursday, May 17, 2007 10:17 PM
> *To:* antlr-interest at antlr.org
> *Subject:* [antlr-interest] SDF assembly language grammar
>
>
>
> I am a student rewriting the assembler for an ISA called SDF (Scheduled
> Dataflow). You can check out our work at http://csrl.unt.edu/sdf . Anyway
> I am just writing the grammar and am having trouble making the leap to code
> generation. I had started with v2 but figure I might just convert the
> grammar to v3 today. The goal of this grammar is to emit opcodes for each
> instruction and maintain numeric translations for the labels. I think I
> would rather do the label translation as an AST rather than backpatching. I
> have attached my grammar and sample assembly. My questions:
> Why it seems to stop parsing about the comment line (what am i doing it
> wrong?)
> Where did the caseSensitiveLiterals option disappear?
>
> Thank you,
>
> Cameron.
>
> A sample of the assembly:
> version 2.0.0
> .data
> .end
> code main
>         putr1 main.1
>         forkep r1
>         stop
> main.1:
>         ; alloc sum frame
>         put sum, r4
>         put 4, r5
>         falloc r4, r5, r6
>         ; alloc result frame
>         put main_res, r4
>         put 1, r5
>         falloc r4, r5, r7
>         ;
>         putr1 main.2
>         forksp r1
>         stop
>
>
> The Grammar:
> grammar SDF;
>
> @header {
> package edu.unt.csrl.sdf.asm;
> import java.util.HashMap();
> }
> @members {
> HashMap memory = new HashMap(); // Something like this to hold label
> values that will be rewritten
> }
> program
>     : (EOL)?
>     versionSection
>     dataSection
>     (codeBlock)*
>     ;
>
> versionSection
>     : 'version' (.)+ EOL;
>
> dataSection
>     : DATABEGIN EOL
>         dsBody
>       DATAEND EOL;
>
> dsBody
>     : ID COLON INT EOL
>         iStructBody
>         dsBody
>     | ;
>
> iStructBody
>     : ('i' | 'ri' | 'f' | 'rf' | 'a' | 'ra' | 'u' | 'ru')=>
>         iStructElement
>         iStructBody
>     | ;
>
> iStructElement
>     : 'i' INT EOL
>     | 'ri' INT INT EOL
>     | 'f' FLOAT EOL
>     | 'rf' INT FLOAT EOL
>     | 'a' INT EOL
>     | 'ra' INT INT EOL
>     | 'u' EOL
>     | 'ru' INT EOL;
>
> codeBlock
>     : 'code' ID EOL
>         code;
>
> code
>     : label code
>     | instruction code
>     ;
>
> label
>     : ID COLON (EOL)?;
>
> instruction
>     : 'nop' EOL
>     | 'add' reg['r'] COMMA reg['r'] COMMA reg['r'] EOL
>     | 'sub' reg['r'] COMMA reg['r'] COMMA reg['r'] EOL
>     | 'mul' reg['r'] COMMA reg['r'] COMMA reg['r'] EOL
>     | 'div' reg['r'] COMMA reg['r'] COMMA reg['r'] EOL
>     | 'mod' reg['r'] COMMA reg['r'] COMMA reg['r'] EOL
>     | 'and' reg['r'] COMMA reg['r'] COMMA reg['r'] EOL
>     | 'or' reg['r'] COMMA reg['r'] COMMA reg['r'] EOL
>     | 'not' reg['r'] COMMA reg['r'] EOL
>     | 'xor' reg['r'] COMMA reg['r'] COMMA reg['r'] EOL
>     | 'band' reg['r'] COMMA reg['r'] COMMA reg['r'] EOL
>     | 'bor' reg['r'] COMMA reg['r'] COMMA reg['r'] EOL
>     | 'bnot' reg['r'] COMMA reg['r'] EOL
>     | 'shl' reg['r'] COMMA reg['r'] COMMA reg['r'] EOL
>     | 'shr' reg['r'] COMMA reg['r'] COMMA reg['r'] EOL
>     | 'sar' reg['r'] COMMA reg['r'] COMMA reg['r'] EOL
>     | 'neg' reg['r'] COMMA reg['r'] EOL
>     | 'max' reg['r'] COMMA reg['r'] COMMA reg['r'] EOL
>     | 'min' reg['r'] COMMA reg['r'] COMMA reg['r'] EOL
>     | 'abs' reg['r'] COMMA reg['r'] EOL
>     | 'lt' reg['r'] COMMA reg['r'] COMMA reg['r'] EOL
>     | 'le' reg['r'] COMMA reg['r'] COMMA reg['r'] EOL
>     | 'eq' reg['r'] COMMA reg['r'] COMMA reg['r'] EOL
>     | 'ne' reg['r'] COMMA reg['r'] COMMA reg['r'] EOL
>     | 'ge' reg['r'] COMMA reg['r'] COMMA reg['r'] EOL
>     | 'gt' reg['r'] COMMA reg['r'] COMMA reg['r'] EOL
>     | 'tbl' reg['r'] COMMA reg['r'] EOL
>     | 'tch' reg['r'] COMMA reg['r'] EOL
>     | 'fadd' reg['f'] COMMA reg['f'] COMMA reg['f'] EOL
>     | 'fsub' reg['f'] COMMA reg['f'] COMMA reg['f'] EOL
>     | 'fmul' reg['f'] COMMA reg['f'] COMMA reg['f'] EOL
>     | 'fdiv' reg['f'] COMMA reg['f'] COMMA reg['f'] EOL
>     | 'flr' reg['f'] COMMA reg['f'] EOL
>     | 'ceil' reg['f'] COMMA reg['f'] EOL
>     | 'flt' reg['f'] COMMA reg['f'] COMMA reg['r'] EOL
>     | 'fle' reg['f'] COMMA reg['f'] COMMA reg['r'] EOL
>     | 'feq' reg['f'] COMMA reg['f'] COMMA reg['r'] EOL
>     | 'fne' reg['f'] COMMA reg['f'] COMMA reg['r'] EOL
>     | 'fge' reg['f'] COMMA reg['f'] COMMA reg['r'] EOL
>     | 'fgt' reg['f'] COMMA reg['f'] COMMA reg['r'] EOL
>     | 'trl' reg['r'] COMMA reg['f'] EOL
>     | 'tdb' EOL // TODO
>     | 'tin' reg['f'] COMMA reg['r'] EOL
>     | 'gput' INT COMMA reg['g'] EOL
>     | 'gadd' reg['g'] COMMA reg['g'] COMMA reg['g'] EOL
>     | 'gsub' reg['g'] COMMA reg['g'] COMMA reg['g'] EOL
>     | 'gmul' reg['g'] COMMA reg['g'] COMMA reg['g'] EOL
>     | 'gtl' reg['g'] COMMA reg['r'] EOL
>     | 'ltg' reg['r'] COMMA reg['g'] EOL
>     | 'move' reg['r'] COMMA reg['r'] EOL
>     | 'putr1' (INT | ID) EOL
>     | 'put' (INT | ID) COMMA reg['r'] EOL
>     | 'load' reg['r'] PIPE (reg['r'] | INT) COMMA reg['r'] EOL
>     | 'store' reg['r'] COMMA reg['r'] PIPE (reg['r'] | INT) EOL
>     | 'store1' EOL // TODO
>     | 'rstore' EOL // TODO
>     | 'ialloc' reg['r'] COMMA reg['r'] EOL
>     | 'ifree' reg['r'] EOL
>     | 'ifetch' reg['r'] PIPE (reg['r'] | INT) COMMA reg['r'] EOL
>     | 'istore' reg['r'] COMMA reg['r'] PIPE (reg['r'] | INT) EOL
>     | 'forksp' reg['r'] ( | COMMA reg['r']) EOL
>     | 'forkep' reg['r'] ( | COMMA reg['r']) EOL
>     | 'stop' EOL
>     | 'falloc' reg['r'] COMMA reg['r'] COMMA reg['r'] EOL
>     | 'ralloc' EOL // TODO
>     | 'ffree' ( | reg['r']) EOL
>     | 'input' INT COMMA reg['r'] EOL
>     | 'output' reg['r'] COMMA INT EOL
>     | 'skip' EOL // TODO
>     | 'ifchcl' EOL // TODO
>     | 'pow' reg['r'] COMMA reg['r'] COMMA reg['r'] EOL
>     | 'sfalloc' EOL // TODO
>     | 'fput' FLOAT COMMA reg['f'] EOL
>     | 'finput' INT COMMA reg['f'] EOL
>     | 'halt' EOL
>     | 'fmove' reg['f'] COMMA reg['f'] EOL
>     | 'fneg' reg['f'] COMMA reg['f'] EOL
>     | 'fabs' reg['f'] COMMA reg['f'] EOL
>     | 'fmath' INT COMMA reg['f'] COMMA reg['f'] EOL
>     | 'sforkep' EOL // TODO
>     | 'sforksp' EOL // TODO
>     | 'scforksp' EOL // TODO
>     | 'sffree' EOL // TODO
>     | 'sread' EOL
>     ;
>
> reg[char type] returns[int rNum = -1]
>     : rStr=ID {
>         try {
>             if(Character.toLowerCase (rStr.charAt(0)) != type)
>                 throw new SemanticException("expected " + type + "x, found
> " + rStr);
>
>             if(rStr.equals("RFP"))
>                 rNum = 63;
>             else
>                 rNum = Integer.parseInt(rStr.substring(1));
>         } catch(Exception ex) {
>             throw new SemanticException("expected " + type + "x, found " +
> rStr);
>         }
>     };
>
> DATABEGIN:
>     '.data';
> DATAEND:
>     '.end';
> COMMENT
>     : SEMI (.)* EOL {$channel=HIDDEN};
> fragment DIGIT
>     : ('0'..'9');
> INT
>     : ('-')? (DIGIT)+;
> FLOAT
>     : INT '.' (DIGIT)+;
> SEMI
>     : ';';
> COLON
>     : ':';
> COMMA
>     : ',';
> PIPE
>     : '|';
>
> ID
>     : ('a'..'z'|'A'..'Z'|'_') ('a'..'z'|'A'..'Z'|'_'|'.'|'0'..'9')*;
>
> EOL
>     : (('\r')? '\n') {newline();};
>
> WS
>     : (
>     | (' ' | '\t')
>     ) { $channel=HIDDEN; }
>     ;
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070520/57072837/attachment-0001.html 

From tedv at esrconsulting.com  Sun May 20 15:38:26 2007
From: tedv at esrconsulting.com (Ted Villalba)
Date: Sun, 20 May 2007 15:38:26 -0700
Subject: [antlr-interest] StringTemplate Expr example,
	Test.java fails to compile
Message-ID: <200705202238.l4KMcRUJ069356@pro36.abac.com>

Working my way through the book, I'm trying to compile the ByteCode
Generator example given in Chapter 9 - Generating Structured Text with
Templates and Grammars. 
The example uses a version of the Expr grammar. 
I receive an error when I try to compile the test rig.
Has anyone else encountered this compilation err, and if so, what did you do
to address it?

Test.java:43: incompatible types
found   : java.lang.Object
required: org.antlr.stringtemplate.StringTemplate
        StringTemplate output = r2.getTemplate();


Thank you,
Ted




From mark.venbrux at gmail.com  Sun May 20 15:41:34 2007
From: mark.venbrux at gmail.com (Mark Venbrux)
Date: Mon, 21 May 2007 00:41:34 +0200
Subject: [antlr-interest] Code generation error in syntactic predicate?
Message-ID: <fa6015a20705201541m5b739b63ma1e77f50aec9d9bb@mail.gmail.com>

Hi,

One more time parsing comments and other text...

Syntactic predicate:
(~COMMENT_START)=>
leads to generated code:
 ....        if ( (input.LA(1)>='\u0000' && input.LA(1)<='\u0005')||(
input.LA(1)>='\u0007' && input.LA(1)<='\uFFFE') ) {
......
Checking only for the first character. A syntactic predicate without the '~'
will check for multiple characters by using
mCOMMENT_START();

This asymmetry  indicates a code generation  error  to me.

Grammar:

grammar MiCoGen;

sequence:  (
        COMMENT
          | TEXT
       )*
       EOF;

COMMENT :      COMMENT_START (options {greedy=false;} : .)* COMMENT_END;

TEXT    :      ((~COMMENT_START)=> .)+ ;


fragment COMMENT_START : '/*';
fragment COMMENT_END   : '*/';


-- 
Cheers,
    Mark
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070521/f1cb37c0/attachment.html 

From jimi at temporal-wave.com  Sun May 20 16:17:17 2007
From: jimi at temporal-wave.com (Jim Idle)
Date: Sun, 20 May 2007 16:17:17 -0700
Subject: [antlr-interest] rule vs. subrule conflict, or
In-Reply-To: <bc4938830705200042i61d0046dt806c75e630dd8556@mail.gmail.com>
References: <bc4938830705200042i61d0046dt806c75e630dd8556@mail.gmail.com>
Message-ID: <B36CCC332A32904F8FA3DE134A235336252573@wavemachine.temporal-wave.com>

Cameron,

 

You have told the grammar that 'I' is a keyword, hence that it what the
lexer is returning. Remember that lexers must be context free, so you
can't expect it to know anything about what the parser wants.

 

If you want i as both a keyword and an identifier, then everywhere you
allow an id, you will need to allow 'I', choosing to interpret it as an
ID where it should be that.'

 

I would recommend that you don't put the 'I' in the parser, but define
this is a proper lexer token as that might make things clearer.

 

STRUCT_I : 'i' ;

 

dsBody : (ID | STRUCT_I) COLON INT EOL ...

 

Jim

 

From: Cameron Palmer [mailto:cameron.palmer at gmail.com] 
Sent: Sunday, May 20, 2007 12:42 AM
To: Jim Idle
Cc: antlr-interest at antlr.org
Subject: rule vs. subrule conflict, or

 

Jim - Thank you very much. I believe I have conquered Comment handling,
and I also found a bit on the case insensitive issue at
http://www.antlr.org/wiki/display/ANTLR3/Migrating+from+ANTLR+2+to+ANTLR
+3 .

I am encountering an interesting conflict between a rule and a subrule.

In the dsBody rule if i choose an ID that matches one of the
iStructElement rules I get a MismatchTokenException or with a slightly
different formulation NoViableAltException. 

Example Input that causes error:
.data
i:12 <- problem if you change 'i' to 'b' all is well
i 12
i 13
i 14
.end

what i find stange is that I would assume that the ID COLON INT EOL in
the grammar below would be checked beforehand and therefore no
ambiguity. The syntax diagram in ANTLRworks and the source code
generated by ANTLR leads me to believe this is the correct
interpretation. 

Grammar fragment:
dataSection
    : DATABEGIN EOL
    dsBody
    DATAEND EOL
    ;

dsBody    : ID COLON INT EOL
    (iStructElement EOL)+
    ;

iStructElement
    : 'i' INT 
    | 'ri' INT INT
    | 'f'
    | 'rf' INT
    | 'a' INT
    | 'ra' INT INT
    | 'u'
    | 'ru' INT
    ;

Thank you,

Cameron. 

On 5/18/07, Jim Idle <jimi at temporal-wave.com> wrote:

Cameron,

 

Your comment rule for the lexer needs to change a little to terminate in
a  non-greedy fashion and not to attempt to embed one rule (EOL) in the
other (otherwise you need to use a separate "fragment" and reference
that (I prefer the formulation below, but you may or may not want the
EOL to be part of the comment token (I assume not)):

 

COMMENT
    : SEMI (~( '\r' | '\n'))* {$channel=HIDDEN};

 

Case sensitivity is normal for the ANTLR 3 token stream, however I have
posted (or someone posted my code at least if I don't post it ;-), a way
to override the default stream with a method that will compare in a case
insensitive way but preserve the original case in the token text (useful
in some cases such as formatters and for literals so on). See:

 

http://www.antlr.org/pipermail/antlr-interest/2007-January/019008.h
tml 

 

I need to move this code into the wiki, but then, I need to do a lot of
things ;-)


Jim

 

From: antlr-interest-bounces at antlr.org [mailto:
antlr-interest-bounces at antlr.org
<mailto:antlr-interest-bounces at antlr.org> ] On Behalf Of Cameron Palmer
Sent: Thursday, May 17, 2007 10:17 PM
To: antlr-interest at antlr.org
Subject: [antlr-interest] SDF assembly language grammar

 

I am a student rewriting the assembler for an ISA called SDF (Scheduled
Dataflow). You can check out our work at http://csrl.unt.edu/sdf .
Anyway I am just writing the grammar and am having trouble making the
leap to code generation. I had started with v2 but figure I might just
convert the grammar to v3 today. The goal of this grammar is to emit
opcodes for each instruction and maintain numeric translations for the
labels. I think I would rather do the label translation as an AST rather
than backpatching. I have attached my grammar and sample assembly. My
questions:
Why it seems to stop parsing about the comment line (what am i doing it
wrong?)
Where did the caseSensitiveLiterals option disappear?

Thank you,

Cameron.

A sample of the assembly:
version 2.0.0
.data
.end
code main
        putr1 main.1
        forkep r1
        stop
main.1:
        ; alloc sum frame
        put sum, r4
        put 4, r5 
        falloc r4, r5, r6
        ; alloc result frame
        put main_res, r4
        put 1, r5
        falloc r4, r5, r7
        ;
        putr1 main.2
        forksp r1
        stop


The Grammar:
grammar SDF;

@header {
package edu.unt.csrl.sdf.asm;
import java.util.HashMap();
}
@members {
HashMap memory = new HashMap(); // Something like this to hold label
values that will be rewritten 
}
program
    : (EOL)? 
    versionSection
    dataSection
    (codeBlock)*
    ;

versionSection
    : 'version' (.)+ EOL;

dataSection
    : DATABEGIN EOL
        dsBody 
      DATAEND EOL;

dsBody
    : ID COLON INT EOL
        iStructBody
        dsBody
    | ;

iStructBody
    : ('i' | 'ri' | 'f' | 'rf' | 'a' | 'ra' | 'u' | 'ru')=> 
        iStructElement
        iStructBody
    | ;

iStructElement
    : 'i' INT EOL
    | 'ri' INT INT EOL
    | 'f' FLOAT EOL
    | 'rf' INT FLOAT EOL
    | 'a' INT EOL 
    | 'ra' INT INT EOL
    | 'u' EOL
    | 'ru' INT EOL;

codeBlock
    : 'code' ID EOL
        code;

code
    : label code
    | instruction code
    ; 

label
    : ID COLON (EOL)?;

instruction
    : 'nop' EOL
    | 'add' reg['r'] COMMA reg['r'] COMMA reg['r'] EOL
    | 'sub' reg['r'] COMMA reg['r'] COMMA reg['r'] EOL 
    | 'mul' reg['r'] COMMA reg['r'] COMMA reg['r'] EOL
    | 'div' reg['r'] COMMA reg['r'] COMMA reg['r'] EOL
    | 'mod' reg['r'] COMMA reg['r'] COMMA reg['r'] EOL 
    | 'and' reg['r'] COMMA reg['r'] COMMA reg['r'] EOL
    | 'or' reg['r'] COMMA reg['r'] COMMA reg['r'] EOL
    | 'not' reg['r'] COMMA reg['r'] EOL 
    | 'xor' reg['r'] COMMA reg['r'] COMMA reg['r'] EOL
    | 'band' reg['r'] COMMA reg['r'] COMMA reg['r'] EOL
    | 'bor' reg['r'] COMMA reg['r'] COMMA reg['r'] EOL 
    | 'bnot' reg['r'] COMMA reg['r'] EOL
    | 'shl' reg['r'] COMMA reg['r'] COMMA reg['r'] EOL
    | 'shr' reg['r'] COMMA reg['r'] COMMA reg['r'] EOL 
    | 'sar' reg['r'] COMMA reg['r'] COMMA reg['r'] EOL
    | 'neg' reg['r'] COMMA reg['r'] EOL
    | 'max' reg['r'] COMMA reg['r'] COMMA reg['r'] EOL 
    | 'min' reg['r'] COMMA reg['r'] COMMA reg['r'] EOL
    | 'abs' reg['r'] COMMA reg['r'] EOL
    | 'lt' reg['r'] COMMA reg['r'] COMMA reg['r'] EOL 
    | 'le' reg['r'] COMMA reg['r'] COMMA reg['r'] EOL
    | 'eq' reg['r'] COMMA reg['r'] COMMA reg['r'] EOL
    | 'ne' reg['r'] COMMA reg['r'] COMMA reg['r'] EOL 
    | 'ge' reg['r'] COMMA reg['r'] COMMA reg['r'] EOL
    | 'gt' reg['r'] COMMA reg['r'] COMMA reg['r'] EOL
    | 'tbl' reg['r'] COMMA reg['r'] EOL 
    | 'tch' reg['r'] COMMA reg['r'] EOL
    | 'fadd' reg['f'] COMMA reg['f'] COMMA reg['f'] EOL
    | 'fsub' reg['f'] COMMA reg['f'] COMMA reg['f'] EOL 
    | 'fmul' reg['f'] COMMA reg['f'] COMMA reg['f'] EOL
    | 'fdiv' reg['f'] COMMA reg['f'] COMMA reg['f'] EOL
    | 'flr' reg['f'] COMMA reg['f'] EOL 
    | 'ceil' reg['f'] COMMA reg['f'] EOL
    | 'flt' reg['f'] COMMA reg['f'] COMMA reg['r'] EOL
    | 'fle' reg['f'] COMMA reg['f'] COMMA reg['r'] EOL 
    | 'feq' reg['f'] COMMA reg['f'] COMMA reg['r'] EOL
    | 'fne' reg['f'] COMMA reg['f'] COMMA reg['r'] EOL
    | 'fge' reg['f'] COMMA reg['f'] COMMA reg['r'] EOL 
    | 'fgt' reg['f'] COMMA reg['f'] COMMA reg['r'] EOL
    | 'trl' reg['r'] COMMA reg['f'] EOL
    | 'tdb' EOL // TODO
    | 'tin' reg['f'] COMMA reg['r'] EOL 
    | 'gput' INT COMMA reg['g'] EOL
    | 'gadd' reg['g'] COMMA reg['g'] COMMA reg['g'] EOL
    | 'gsub' reg['g'] COMMA reg['g'] COMMA reg['g'] EOL 
    | 'gmul' reg['g'] COMMA reg['g'] COMMA reg['g'] EOL
    | 'gtl' reg['g'] COMMA reg['r'] EOL
    | 'ltg' reg['r'] COMMA reg['g'] EOL 
    | 'move' reg['r'] COMMA reg['r'] EOL
    | 'putr1' (INT | ID) EOL
    | 'put' (INT | ID) COMMA reg['r'] EOL
    | 'load' reg['r'] PIPE (reg['r'] | INT) COMMA reg['r'] EOL 
    | 'store' reg['r'] COMMA reg['r'] PIPE (reg['r'] | INT) EOL
    | 'store1' EOL // TODO
    | 'rstore' EOL // TODO
    | 'ialloc' reg['r'] COMMA reg['r'] EOL 
    | 'ifree' reg['r'] EOL
    | 'ifetch' reg['r'] PIPE (reg['r'] | INT) COMMA reg['r'] EOL
    | 'istore' reg['r'] COMMA reg['r'] PIPE (reg['r'] | INT) EOL 
    | 'forksp' reg['r'] ( | COMMA reg['r']) EOL
    | 'forkep' reg['r'] ( | COMMA reg['r']) EOL
    | 'stop' EOL
    | 'falloc' reg['r'] COMMA reg['r'] COMMA reg['r'] EOL 
    | 'ralloc' EOL // TODO
    | 'ffree' ( | reg['r']) EOL
    | 'input' INT COMMA reg['r'] EOL
    | 'output' reg['r'] COMMA INT EOL
    | 'skip' EOL // TODO 
    | 'ifchcl' EOL // TODO
    | 'pow' reg['r'] COMMA reg['r'] COMMA reg['r'] EOL
    | 'sfalloc' EOL // TODO
    | 'fput' FLOAT COMMA reg['f'] EOL 
    | 'finput' INT COMMA reg['f'] EOL
    | 'halt' EOL
    | 'fmove' reg['f'] COMMA reg['f'] EOL
    | 'fneg' reg['f'] COMMA reg['f'] EOL 
    | 'fabs' reg['f'] COMMA reg['f'] EOL
    | 'fmath' INT COMMA reg['f'] COMMA reg['f'] EOL
    | 'sforkep' EOL // TODO
    | 'sforksp' EOL // TODO 
    | 'scforksp' EOL // TODO
    | 'sffree' EOL // TODO
    | 'sread' EOL
    ;

reg[char type] returns[int rNum = -1]
    : rStr=ID {
        try {
            if(Character.toLowerCase (rStr.charAt(0)) != type)
                throw new SemanticException("expected " + type + "x,
found " + rStr);
            
            if(rStr.equals("RFP"))
                rNum = 63; 
            else
                rNum = Integer.parseInt(rStr.substring(1));
        } catch(Exception ex) {
            throw new SemanticException("expected " + type + "x, found "
+ rStr); 
        }
    };
    
DATABEGIN:
    '.data';
DATAEND:
    '.end';
COMMENT
    : SEMI (.)* EOL {$channel=HIDDEN}; 
fragment DIGIT
    : ('0'..'9');
INT 
    : ('-')? (DIGIT)+;        
FLOAT    
    : INT '.' (DIGIT)+;
SEMI    
    : ';';
COLON
    : ':';
COMMA
    : ',';
PIPE
    : '|';

ID 
    : ('a'..'z'|'A'..'Z'|'_') ('a'..'z'|'A'..'Z'|'_'|'.'|'0'..'9')*;

EOL
    : (('\r')? '\n') {newline();}; 
    
WS
    : (
    | (' ' | '\t')
    ) { $channel=HIDDEN; }
    ;

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070520/aed77028/attachment-0001.html 

From paul at paulkeir.com  Mon May 21 02:08:24 2007
From: paul at paulkeir.com (Paul Keir)
Date: Mon, 21 May 2007 10:08:24 +0100
Subject: [antlr-interest] C and #define
Message-ID: <46516188.1020902@paulkeir.com>

Hi,

I'm building on the C grammar from the examples, and would like to 
modify the lexer rule which ignores lines starting with #; I'd like not 
to ignore #define, but ignore the rest. Currently the rule is:

// ignore #line info for now
LINE_COMMAND
    : '#' ~('\n'|'\r')* '\r'? '\n' {$channel=HIDDEN;}
    ;

Remembering that the # can be separated from the define, I've tried a 
few things like this:

// ignore #line info for now
LINE_COMMAND
    :  ~( '#' 'define' | '#define' ) ~('\n'|'\r')* '\r'? '\n' 
{$channel=HIDDEN;}
    ;

but I can't get it to work as intended. Can anyone offer a suggestion?

Best regards,
Paul


-- 
512k Broadband ?14.99 per month
Unlimited Downloads - No extra Costs
?14.99 per month (inc. VAT)
Order Now www.adsl4less.com

From angelo.zerr at gmail.com  Mon May 21 02:13:35 2007
From: angelo.zerr at gmail.com (Angelo zerr)
Date: Mon, 21 May 2007 11:13:35 +0200
Subject: [antlr-interest] Code munger & Simple grammar for code generation
	eclipse plugin Akrogen
Message-ID: <c77e343c0705210213j7e42d1c2lc556561309d1b6da@mail.gmail.com>

Hi,
I'm developer of code generation eclipse plugin Akrogen
http://akrogen.sourceforge.net/.
With Akrogen you describe your wizard page Eclipse with XML/XUL & Javascript
and you link it
to a template (Freemarker, Velocity, XSL,...). So it's easy to write your
own catalog of template.

With Akrogen you can update properties/XML files (by keeping user
indentation, order of attribute,...).

Now I would like manage updating of another file type (Java,
Javascript,...). Ex : wizard page generate java method and insert it
into java source file on the good position (into body class).

I would like manage code munger as it's described here
http://www.codegeneration.net/tiki-index.php?page=CodeMungerModel

To manage this case I would like execute 2 steps :
STEP 1 : . parse Java/Javascript,... file and build XML stream which
contains information about source file (switch grammar).

Ex with this source Java class file :

public class A { // <= line 1

    /*
     *
    */
    public void method1() { // <= line 6

    } // <= line 8
} // <= line 9

After parsing (with anlr?), I would like obtain this XML stream :

<sourcecode type="java">
   <class name="A" startLine="1" endline="9" >
      <method name="method1" startLine="6" endline="8" />
   </class>
</sourcecode>

STEP 2 : Once the XML stream is obtained, you can use XPath to choose where
the code (generated) must be inserted
With XPath //class/method[last()] , you can insert generated code after the
last method of the class.

STEP2 is easy but my problem comes from STEP1 (parse source file and build
XML stream).

Can I manage this case with antlr? I have tried to do that, but my problems
are :

1. I would like write simple grammar just for detect method, class, fields
and get line number.
    With my test I must write the whole JAVA grammar to do that. Is it
possible to write simple grammar
    to detect start/end method, class, fields?

2. I would like the user of my Eclipse plugin can add another grammar. (Ex :
add grammar for Javascript DOJO Treeview (to add node))
    But with antlr, grammar must be compiled to be used. Can I use grammar
directly without compile the grammar into java class?

If someone is interested with my topic or with Akrogen, don't hesitate to
contact me. I will happy to discuss with you.

Thank you for your advice.

Regards Angelo
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070521/f526b968/attachment.html 

From evangelion at luukku.com  Mon May 21 04:05:04 2007
From: evangelion at luukku.com (Jukkis)
Date: Mon, 21 May 2007 14:05:04 +0300 (EEST)
Subject: [antlr-interest] Matching braces in grammar
Message-ID: <1179745504159.evangelion.32739.cfaLsqL6T74Ih-9t7hFQ6A@luukku.com>

Hello all ANTLR fans!

I'm developing a small language with ANTLR. One feature is that my language can have BeanShell code written into the language in special BeanShell blocks.

Currently, I have a special kind of statement which takes the BeanShell code (which is essentially Java):

${"print(\"Hey, I'm BeanShell code\");"}

defined in my grammar as:

beanshell_statement
    : "$" LCURLY! STRING_LITERAL RCURLY!
    ;

The problem is that BeanShell code may contain the symbol '}' which I use to terminate the statement. Currently, I use STRING_LITERAL to work around this fact.

Now, what I would want is that there would be no need to write the BeanShell code inside a string. How can I make ANTLR understand that it would consider any curlys found INSIDE the MATCHING '{' ... '}' pair as just ordinary text?

Thank you very much for any advice!


...................................................................
Luukku Plus paketilla p??set eroon tila- ja turvallisuusongelmista.
Hanki Luukku Plus ja helpotat el?m??si. http://www.mtv3.fi/luukku


From jaluber at gmx.de  Mon May 21 04:28:08 2007
From: jaluber at gmx.de (Johannes Luber)
Date: Mon, 21 May 2007 13:28:08 +0200
Subject: [antlr-interest] Matching braces in grammar
In-Reply-To: <1179745504159.evangelion.32739.cfaLsqL6T74Ih-9t7hFQ6A@luukku.com>
References: <1179745504159.evangelion.32739.cfaLsqL6T74Ih-9t7hFQ6A@luukku.com>
Message-ID: <46518248.2030700@gmx.de>

Jukkis wrote:
> Hello all ANTLR fans!
> 
> I'm developing a small language with ANTLR. One feature is that my language can have BeanShell code written into the language in special BeanShell blocks.
> 
> Currently, I have a special kind of statement which takes the BeanShell code (which is essentially Java):
> 
> ${"print(\"Hey, I'm BeanShell code\");"}
> 
> defined in my grammar as:
> 
> beanshell_statement
>     : "$" LCURLY! STRING_LITERAL RCURLY!
>     ;
> 
> The problem is that BeanShell code may contain the symbol '}' which I use to terminate the statement. Currently, I use STRING_LITERAL to work around this fact.
> 
> Now, what I would want is that there would be no need to write the BeanShell code inside a string. How can I make ANTLR understand that it would consider any curlys found INSIDE the MATCHING '{' ... '}' pair as just ordinary text?
> 
> Thank you very much for any advice!

Basically you need to replace STRING_LITERAL with something like that:

beanshell_statement
     : "$" LCURLY! block+ RCURLY!
     ;

block
   :   text
   |   LCURLY text RCURLY
   ;

Best regards,
Johannes Luber

From antlr at mirality.co.nz  Mon May 21 05:05:46 2007
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Tue, 22 May 2007 00:05:46 +1200
Subject: [antlr-interest] C and #define
In-Reply-To: <46516188.1020902@paulkeir.com>
References: <46516188.1020902@paulkeir.com>
Message-ID: <20070521120601.C740A1907B5@www.antlr.org>

At 21:08 21/05/2007, Paul Keir wrote:
 >I'm building on the C grammar from the examples, and would like
 >to modify the lexer rule which ignores lines starting with #;
 >I'd like not to ignore #define, but ignore the rest. Currently
 >the rule is:
 >
 >// ignore #line info for now
 >LINE_COMMAND
 >    : '#' ~('\n'|'\r')* '\r'? '\n' {$channel=HIDDEN;}
 >    ;

My air-codegen suggests something along these lines:

PREPROCESSOR
   :  '#' (' ' | '\t')*
   (  'define' ~('\r' | '\n')* { $type = DEFINE; }
   |  'line' ~('\r' | '\n')* { $channel = HIDDEN; }
   )  '\r'? '\n'
   ;

This is by no means exhaustive, since it doesn't handle line 
folding or other directives.  But hopefully that'll get you 
started :)


From angelo.zerr at gmail.com  Mon May 21 05:19:19 2007
From: angelo.zerr at gmail.com (Angelo zerr)
Date: Mon, 21 May 2007 14:19:19 +0200
Subject: [antlr-interest] Code munger & Simple grammar for code
	generation eclipse plugin Akrogen
In-Reply-To: <c77e343c0705210213j7e42d1c2lc556561309d1b6da@mail.gmail.com>
References: <c77e343c0705210213j7e42d1c2lc556561309d1b6da@mail.gmail.com>
Message-ID: <c77e343c0705210519q26b90a60ye48aaaea92ccc924@mail.gmail.com>

Hi,
nobody is interested by my topic?
Perhaps my explanation is very bad. If it is that, how can I do to interest
you?
Would you like more informations?

Thank you for your answers.

Regards Angelo

2007/5/21, Angelo zerr <angelo.zerr at gmail.com>:
>
> Hi,
> I'm developer of code generation eclipse plugin Akrogen
> http://akrogen.sourceforge.net/.
> With Akrogen you describe your wizard page Eclipse with XML/XUL &
> Javascript and you link it
> to a template (Freemarker, Velocity, XSL,...). So it's easy to write your
> own catalog of template.
>
> With Akrogen you can update properties/XML files (by keeping user
> indentation, order of attribute,...).
>
> Now I would like manage updating of another file type (Java,
> Javascript,...). Ex : wizard page generate java method and insert it
> into java source file on the good position (into body class).
>
> I would like manage code munger as it's described here
> http://www.codegeneration.net/tiki-index.php?page=CodeMungerModel
>
> To manage this case I would like execute 2 steps :
> STEP 1 : . parse Java/Javascript,... file and build XML stream which
> contains information about source file (switch grammar).
>
> Ex with this source Java class file :
>
> public class A { // <= line 1
>
>     /*
>      *
>     */
>     public void method1() { // <= line 6
>
>     } // <= line 8
> } // <= line 9
>
> After parsing (with anlr?), I would like obtain this XML stream :
>
> <sourcecode type="java">
>    <class name="A" startLine="1" endline="9" >
>       <method name="method1" startLine="6" endline="8" />
>    </class>
> </sourcecode>
>
> STEP 2 : Once the XML stream is obtained, you can use XPath to choose
> where the code (generated) must be inserted
> With XPath //class/method[last()] , you can insert generated code after
> the last method of the class.
>
> STEP2 is easy but my problem comes from STEP1 (parse source file and build
> XML stream).
>
> Can I manage this case with antlr? I have tried to do that, but my
> problems are :
>
> 1. I would like write simple grammar just for detect method, class, fields
> and get line number.
>     With my test I must write the whole JAVA grammar to do that. Is it
> possible to write simple grammar
>     to detect start/end method, class, fields?
>
> 2. I would like the user of my Eclipse plugin can add another grammar. (Ex
> : add grammar for Javascript DOJO Treeview (to add node))
>     But with antlr, grammar must be compiled to be used. Can I use grammar
> directly without compile the grammar into java class?
>
> If someone is interested with my topic or with Akrogen, don't hesitate to
> contact me. I will happy to discuss with you.
>
> Thank you for your advice.
>
> Regards Angelo
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070521/80273377/attachment.html 

From evangelion at luukku.com  Mon May 21 06:12:37 2007
From: evangelion at luukku.com (Jukkis)
Date: Mon, 21 May 2007 16:12:37 +0300 (EEST)
Subject: [antlr-interest] Matching braces in grammar
Message-ID: <1179753157393.evangelion.43539.qNwiXqo4uS2gZtrjire6Yw@luukku.com>

> Basically you need to replace STRING_LITERAL with something
> like that:
>
> beanshell_statement
>      : "$" LCURLY! block+ RCURLY!
>      ;
> 
> block
>    :   text
>    |   LCURLY text RCURLY
>    ;
> 
> Best regards,
> Johannes Luber

Hello again, and thank you for your quick response Johannes! However, I feel this solves only part of the problem -- because BeanShell code can have any number of nested curly-brace delimited blocks. Obviously, we cannot just write

block
    : block
    | LCURLY block RCURLY
    ;

since this would lead to an infinite recursion rule, the kind which is not allowed in ANTLR. Also, for the same reason, we cannot refer to the 'block' rule from any rule whose ancestor 'block' is, if I have understood correctly.

Any ideas how to solve the nested blocks problem?

Thanks!




...................................................................
Luukku Plus paketilla p??set eroon tila- ja turvallisuusongelmista.
Hanki Luukku Plus ja helpotat el?m??si. http://www.mtv3.fi/luukku


From antlr at jazillian.com  Mon May 21 06:42:19 2007
From: antlr at jazillian.com (Andy Tripp)
Date: Mon, 21 May 2007 09:42:19 -0400
Subject: [antlr-interest] C and #define
In-Reply-To: <46516188.1020902@paulkeir.com>
References: <46516188.1020902@paulkeir.com>
Message-ID: <4651A1BB.3090600@jazillian.com>

Here's what I've got for handling C/C++ preprocessor directives:

protected RestOfPP :
(
        '\\'! Newline!          // note the "!"s to delete escaped newlines
        | Comment
        | CharLiteral                                                   
//avoid matching '"' as StringLiteral
        | StringLiteral                                                 
// without this, "//" inside string gets processed
        | {LA(2) != '*' && LA(2) != '/'}? '/'
        | '#'                   // "stringification"
        | ~('\r' | '\n' | '/')
)+
;

// note: I have one pass that removes any spaces after "#" (e.g. 
converts "# define" to "#define").
// That pass looks for PPspace tokens and removes the space. Then all 
other passes
// use the other PP rules below
PPspace         : "#" (Whitespace)+ RestOfPP
;

PPdefine        : "#define" (Whitespace)+ RestOfPP
;
PPif            : "#if" (Whitespace)+ RestOfPP
;
PPelse          : "#else"
;
PPelif          : "#elif" (Whitespace)+ RestOfPP
;
PPendif         : "#endif"
;
// Note the "*" instead of "+" here, to handle "#include<whatever.h>"
PPinclude       : "#include" (Whitespace)* RestOfPP
;
PPifdef         : "#ifdef" (Whitespace)+ RestOfPP
;
PPifndef        : "#ifndef" (Whitespace)+ RestOfPP
;
PPundef         : "#undef" (Whitespace)+ RestOfPP
;
PPpragma        : "#pragma" RestOfPP
;
PPerror         : "#error" (RestOfPP)?
;
PPline          : "#line" RestOfPP
;

Paul Keir wrote:
> Hi,
>
> I'm building on the C grammar from the examples, and would like to 
> modify the lexer rule which ignores lines starting with #; I'd like 
> not to ignore #define, but ignore the rest. Currently the rule is:
>
> // ignore #line info for now
> LINE_COMMAND
>    : '#' ~('\n'|'\r')* '\r'? '\n' {$channel=HIDDEN;}
>    ;
>
> Remembering that the # can be separated from the define, I've tried a 
> few things like this:
>
> // ignore #line info for now
> LINE_COMMAND
>    :  ~( '#' 'define' | '#define' ) ~('\n'|'\r')* '\r'? '\n' 
> {$channel=HIDDEN;}
>    ;
>
> but I can't get it to work as intended. Can anyone offer a suggestion?
>
> Best regards,
> Paul
>
>


From jaluber at gmx.de  Mon May 21 06:43:57 2007
From: jaluber at gmx.de (Johannes Luber)
Date: Mon, 21 May 2007 15:43:57 +0200
Subject: [antlr-interest] Matching braces in grammar
In-Reply-To: <1179753157393.evangelion.43539.qNwiXqo4uS2gZtrjire6Yw@luukku.com>
References: <1179753157393.evangelion.43539.qNwiXqo4uS2gZtrjire6Yw@luukku.com>
Message-ID: <4651A21D.6050002@gmx.de>

Jukkis wrote:
>> Basically you need to replace STRING_LITERAL with something
>> like that:
>>
>> beanshell_statement
>>      : "$" LCURLY! block+ RCURLY!
>>      ;
>>
>> block
>>    :   text
>>    |   LCURLY text RCURLY
>>    ;
>>
>> Best regards,
>> Johannes Luber
> 
> Hello again, and thank you for your quick response Johannes! However, I feel this solves only part of the problem -- because BeanShell code can have any number of nested curly-brace delimited blocks. Obviously, we cannot just write
> 
> block
>     : block
>     | LCURLY block RCURLY
>     ;
> 
> since this would lead to an infinite recursion rule, the kind which is not allowed in ANTLR. Also, for the same reason, we cannot refer to the 'block' rule from any rule whose ancestor 'block' is, if I have understood correctly.

How about?

beanshell_statement
     : '$' LCURLY! block+ RCURLY!
     ;

block
   :   TEXT
   |   LCURLY block RCURLY
   ;

TEXT
   :	('A'..'Z'|'a'..'z')+
   ;

Best regards,
Johannes Luber


From evangelion at luukku.com  Mon May 21 07:12:01 2007
From: evangelion at luukku.com (Jukkis)
Date: Mon, 21 May 2007 17:12:01 +0300 (EEST)
Subject: [antlr-interest] Matching braces in grammar
Message-ID: <1179756721387.evangelion.48630.3MNy8GZp__LV01G810bIIw@luukku.com>

Well heck, I haven't any clue why that isn't an infinite recursion rule, but who cares -- it works =)

Thanks again for your help Johannes!

...................................................................
Luukku Plus paketilla p??set eroon tila- ja turvallisuusongelmista.
Hanki Luukku Plus ja helpotat el?m??si. http://www.mtv3.fi/luukku


From jimi at temporal-wave.com  Mon May 21 08:34:39 2007
From: jimi at temporal-wave.com (Jim Idle)
Date: Mon, 21 May 2007 08:34:39 -0700
Subject: [antlr-interest] Matching braces in grammar
In-Reply-To: <1179745504159.evangelion.32739.cfaLsqL6T74Ih-9t7hFQ6A@luukku.com>
References: <1179745504159.evangelion.32739.cfaLsqL6T74Ih-9t7hFQ6A@luukku.com>
Message-ID: <B36CCC332A32904F8FA3DE134A23533625257D@wavemachine.temporal-wave.com>

Do you wish to solve this in the lexer and just return a token BEANSHELL? Or are you trying to parse the code in the ${ } too?

If the former then you would probably have to pick some bounding character sequence that I not ambiguous/context sensitive, or write action code for the BEANCODE that consumes characters until the } that matches the ${ is found, assuming that it is not possible to have } in the block without a matching { preceding it. As you seem to want to allow statements like print then I think you could end up with print("}}}}}}"); which means you can't rely on a simple trick. Then you would get yourself to appoint where you are trying to parser your BEANSCRIPT in a lexer rule, and will have all sorts of trouble trying to do it manually.

So, if you can choose something 'more strange' than ${ } you might be able to do it. It is your language so this is possible, though if you are allowing literal strings, then it will always be possible that the literal string has the sequence you define in it. For instance suppose you were parsing code that was itself generating code of the same language?

So, I think that your answer is that you really need an island grammar. This island grammar does not necessarily have to be able to parse your BEANSTATEMENT completely, but just be able to scan through it until it finds the correct }. Look at the example of island grammar in the 3.0 examples. You will want something like this:

main.g

...
BEANSTATEMENT : '${'
			{
				// Call the BEANSTATEMENT CONSUMING GRAMMAR HERE
			}
		;

beanstatement.g

statement
		: beanstring RBRACE;

beanstring	: beanexpr+
		;

beanexpr	: STRING
		| IDPUNCT
		| LBRACE beanstring RBRACE
		;

STRING	: '"' ~('"')* '"' ;
LBRACE	: '{' ;
RBRACE	: '}' ;
IDPUNCT	: . ;

This should parse through the beanstatement just looking for the terminating }. Of course, you could hand code that in the lexer rule, but an island grammar allows you to actually parser the statement properly if you want to with a completely new lexer and parser as well as cater for nested '{' within the BEANSTATEMENT such as 

${
	if (expr) { print("dfdfddfd {{{ }}"); }
}

Jim

-----Original Message-----
From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-bounces at antlr.org] On Behalf Of Jukkis
Sent: Monday, May 21, 2007 4:05 AM
To: antlr-interest at antlr.org
Subject: [antlr-interest] Matching braces in grammar

Hello all ANTLR fans!

I'm developing a small language with ANTLR. One feature is that my language can have BeanShell code written into the language in special BeanShell blocks.

Currently, I have a special kind of statement which takes the BeanShell code (which is essentially Java):

${"print(\"Hey, I'm BeanShell code\");"}

defined in my grammar as:

beanshell_statement
    : "$" LCURLY! STRING_LITERAL RCURLY!
    ;

The problem is that BeanShell code may contain the symbol '}' which I use to terminate the statement. Currently, I use STRING_LITERAL to work around this fact.

Now, what I would want is that there would be no need to write the BeanShell code inside a string. How can I make ANTLR understand that it would consider any curlys found INSIDE the MATCHING '{' ... '}' pair as just ordinary text?

Thank you very much for any advice!


...................................................................
Luukku Plus paketilla p??set eroon tila- ja turvallisuusongelmista.
Hanki Luukku Plus ja helpotat el?m??si. http://www.mtv3.fi/luukku


From tedv at esrconsulting.com  Mon May 21 10:10:41 2007
From: tedv at esrconsulting.com (Ted Villalba)
Date: Mon, 21 May 2007 10:10:41 -0700
Subject: [antlr-interest] StringTemplate Expr example,
Message-ID: <200705211710.l4LHAfVT024875@pro36.abac.com>

Here is the fix for the compile error:
 
StringTemplate output = (StringTemplate)r2.getTemplate();
 
 
Working my way through the book, I'm trying to compile the ByteCode
Generator example given in Chapter 9 - Generating Structured Text with
Templates and Grammars. 
The example uses a version of the Expr grammar. 
I receive an error when I try to compile the test rig.
Has anyone else encountered this compilation err, and if so, what did you do
to address it?
 
Test.java:43: incompatible types
found   : java.lang.Object
required: org.antlr.stringtemplate.StringTemplate
        StringTemplate output = r2.getTemplate();
 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070521/0e72623f/attachment.html 

From tedv at esrconsulting.com  Mon May 21 10:23:01 2007
From: tedv at esrconsulting.com (Ted Villalba)
Date: Mon, 21 May 2007 10:23:01 -0700
Subject: [antlr-interest] StringTemplate Expr example,
In-Reply-To: <200705211710.l4LHAfVT024875@pro36.abac.com>
Message-ID: <200705211723.l4LHN1ik042379@pro36.abac.com>

Forgive this test..testing my posts to the same thread.
 
Thx.
 
  _____  

From: antlr-interest-bounces at antlr.org
[mailto:antlr-interest-bounces at antlr.org] On Behalf Of Ted Villalba
Sent: Monday, May 21, 2007 10:11 AM
To: antlr-interest at antlr.org
Subject: Re: [antlr-interest] StringTemplate Expr example,
 
Here is the fix for the compile error:
 
StringTemplate output = (StringTemplate)r2.getTemplate();
 
 
Working my way through the book, I'm trying to compile the ByteCode
Generator example given in Chapter 9 - Generating Structured Text with
Templates and Grammars. 
The example uses a version of the Expr grammar. 
I receive an error when I try to compile the test rig.
Has anyone else encountered this compilation err, and if so, what did you do
to address it?
 
Test.java:43: incompatible types
found   : java.lang.Object
required: org.antlr.stringtemplate.StringTemplate
        StringTemplate output = r2.getTemplate();
 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070521/0e80fbdc/attachment-0001.html 

From laguest at archangeli.co.uk  Mon May 21 10:23:01 2007
From: laguest at archangeli.co.uk (Luke A. Guest)
Date: Mon, 21 May 2007 18:23:01 +0100
Subject: [antlr-interest] Ada95 back-end for v3
In-Reply-To: <1179591637.7574.34.camel@rogue>
References: <1179591637.7574.34.camel@rogue>
Message-ID: <1179768182.7574.38.camel@rogue>

On Sat, 2007-05-19 at 17:20 +0100, Luke A. Guest wrote:

Ok, I'll take that massive response as a *no* then ;)

Thanks,
Luke.

> Hi,
> 
> Is anyone working on a back-end for Ada95? If so, is the source
> available?
> 
> Thanks,
> Luke.



From tedv at esrconsulting.com  Mon May 21 10:26:34 2007
From: tedv at esrconsulting.com (Ted Villalba)
Date: Mon, 21 May 2007 10:26:34 -0700
Subject: [antlr-interest] StringTemplate Expr example,
	Test.java fails to compile
In-Reply-To: <200705202238.l4KMcRUJ069356@pro36.abac.com>
Message-ID: <200705211726.l4LHQYsm046748@pro36.abac.com>

Here is the simple fix for the compile error in Test.java:

StringTemplate output = (StringTemplate)r2.getTemplate();


-----Original Message-----
From: antlr-interest-bounces at antlr.org
[mailto:antlr-interest-bounces at antlr.org] On Behalf Of Ted Villalba
Sent: Sunday, May 20, 2007 3:38 PM
To: antlr-interest at antlr.org
Subject: [antlr-interest] StringTemplate Expr example,Test.java fails to
compile

Working my way through the book, I'm trying to compile the ByteCode
Generator example given in Chapter 9 - Generating Structured Text with
Templates and Grammars. 
The example uses a version of the Expr grammar. 
I receive an error when I try to compile the test rig.
Has anyone else encountered this compilation err, and if so, what did you do
to address it?

Test.java:43: incompatible types
found   : java.lang.Object
required: org.antlr.stringtemplate.StringTemplate
        StringTemplate output = r2.getTemplate();


Thank you,
Ted





From miguel.ping at gmail.com  Mon May 21 10:53:50 2007
From: miguel.ping at gmail.com (Miguel Ping)
Date: Mon, 21 May 2007 18:53:50 +0100
Subject: [antlr-interest] Code munger & Simple grammar for code
	generation eclipse plugin Akrogen
In-Reply-To: <c77e343c0705210519q26b90a60ye48aaaea92ccc924@mail.gmail.com>
References: <c77e343c0705210213j7e42d1c2lc556561309d1b6da@mail.gmail.com>
	<c77e343c0705210519q26b90a60ye48aaaea92ccc924@mail.gmail.com>
Message-ID: <ab0bf2c00705211053w53bfc943h60e165b73ee159ea@mail.gmail.com>

If you're absolutely sure that you won't need a specialized grammar,
probably you can trim down an existing java grammar to suit your
needs. If you're familiar with antlr, it should be easy to do that.

As for adding grammars on the fly, you will always need to compile the
grammar. What you can do (with another generator :) is to compile the
grammar at runtime.

On 5/21/07, Angelo zerr <angelo.zerr at gmail.com> wrote:
> Hi,
> nobody is interested by my topic?
> Perhaps my explanation is very bad. If it is that, how can I do to interest
> you?
> Would you like more informations?
>
> Thank you for your answers.
>
> Regards Angelo
>
> 2007/5/21, Angelo zerr <angelo.zerr at gmail.com>:
> >
> > Hi,
> > I'm developer of code generation eclipse plugin Akrogen
> > http://akrogen.sourceforge.net/.
> > With Akrogen you describe your wizard page Eclipse with XML/XUL &
> > Javascript and you link it
> > to a template (Freemarker, Velocity, XSL,...). So it's easy to write your
> > own catalog of template.
> >
> > With Akrogen you can update properties/XML files (by keeping user
> > indentation, order of attribute,...).
> >
> > Now I would like manage updating of another file type (Java,
> > Javascript,...). Ex : wizard page generate java method and insert it
> > into java source file on the good position (into body class).
> >
> > I would like manage code munger as it's described here
> > http://www.codegeneration.net/tiki-index.php?page=CodeMungerModel
> >
> > To manage this case I would like execute 2 steps :
> > STEP 1 : . parse Java/Javascript,... file and build XML stream which
> > contains information about source file (switch grammar).
> >
> > Ex with this source Java class file :
> >
> > public class A { // <= line 1
> >
> >     /*
> >      *
> >     */
> >     public void method1() { // <= line 6
> >
> >     } // <= line 8
> > } // <= line 9
> >
> > After parsing (with anlr?), I would like obtain this XML stream :
> >
> > <sourcecode type="java">
> >    <class name="A" startLine="1" endline="9" >
> >       <method name="method1" startLine="6" endline="8" />
> >    </class>
> > </sourcecode>
> >
> > STEP 2 : Once the XML stream is obtained, you can use XPath to choose
> > where the code (generated) must be inserted
> > With XPath //class/method[last()] , you can insert generated code after
> > the last method of the class.
> >
> > STEP2 is easy but my problem comes from STEP1 (parse source file and build
> > XML stream).
> >
> > Can I manage this case with antlr? I have tried to do that, but my
> > problems are :
> >
> > 1. I would like write simple grammar just for detect method, class, fields
> > and get line number.
> >     With my test I must write the whole JAVA grammar to do that. Is it
> > possible to write simple grammar
> >     to detect start/end method, class, fields?
> >
> > 2. I would like the user of my Eclipse plugin can add another grammar. (Ex
> > : add grammar for Javascript DOJO Treeview (to add node))
> >     But with antlr, grammar must be compiled to be used. Can I use grammar
> > directly without compile the grammar into java class?
> >
> > If someone is interested with my topic or with Akrogen, don't hesitate to
> > contact me. I will happy to discuss with you.
> >
> > Thank you for your advice.
> >
> > Regards Angelo
> >
>

From rschulz at sonic.net  Mon May 21 13:39:04 2007
From: rschulz at sonic.net (Randall R Schulz)
Date: Mon, 21 May 2007 13:39:04 -0700
Subject: [antlr-interest] Launch Party Announcement
Message-ID: <200705211339.04818.rschulz@sonic.net>

Hi,

I don't quite understand why, but Ter's announcement of the launch party
showed up in my mailbox with quite a high spam rating (false positivies
are why I don't let my ISP discard any of my incoming mail).

It bore these SpamAssassin headers:

-==--==--==--==--==--==--==--==--==--==--==--==--==--==--==--==-
 X-Spam-Flag: YES
 X-Spam-Checker-Version: SpamAssassin 3.2.0 (2007-05-01) on a.spam.sonic.net
 X-Spam-Level: *****
 X-Spam-Status: Yes, score=5.2 required=5.0 tests=DC_GIF_UNO_LARGO,
????????DC_IMAGE_SPAM_HTML,DC_IMAGE_SPAM_TEXT,DKIM_POLICY_SIGNSOME,SARE_GIF_ATTACH
????????autolearn=disabled version=3.2.0
 X-Spam-Report: 
????????* ?0.0 DKIM_POLICY_SIGNSOME Domain Keys Identified Mail: policy says domain
????????* ? ? ? signs some mails
????????* ?1.4 SARE_GIF_ATTACH FULL: Email has a inline gif
????????* ?3.8 DC_GIF_UNO_LARGO Message contains a single large inline gif
????????* ?0.0 DC_IMAGE_SPAM_TEXT Possible Image-only spam with little text
????????* ?0.0 DC_IMAGE_SPAM_HTML Possible Image-only spam
-==--==--==--==--==--==--==--==--==--==--==--==--==--==--==--==-


Randall Schulz

From tedv at esrconsulting.com  Mon May 21 14:49:26 2007
From: tedv at esrconsulting.com (Ted Villalba)
Date: Mon, 21 May 2007 14:49:26 -0700
Subject: [antlr-interest] Somewhere between actions and string templates
In-Reply-To: <53B875D6-8892-4542-8BB2-E696A0EBD0C7@cs.usfca.edu>
Message-ID: <200705212149.l4LLnQ1u067505@pro36.abac.com>

I'm getting Null values when I try to use the += to gather all the terms in
a list with a StringTemplate.

If I have the following query: 
TO=(spark plugs) AND AU=(Flaig)

And this grammar:
expression : ^('=' tag v=value+) ->
template4(tag={$tag.text},values={$v.text}) ;

Where template4 is defined to print out the values:
template4(tag, values) ::= " IN <tag>:<values> OUT"

I get :
IN TO:spark OUT  IN AU:(Flaig) OUT

If I change the grammar to try to capture the "value" list:
expression : ^('=' tag (v+=value)+) -> template4(t={$tag.text},values={$v})
;

I get:
IN TO: OUT  IN AU: OUT


I'd be glad to offer up any more details on the grammars, just wanted to
keep this as concise as possible without overloading on the detail.
Any help would be greatly appreciated. 

Thanks,
Ted





-----Original Message-----
From: antlr-interest-bounces at antlr.org
[mailto:antlr-interest-bounces at antlr.org] On Behalf Of Terence Parr
Sent: Saturday, May 19, 2007 4:21 PM
To: LISTE ANTLR-INTEREST
Subject: Re: [antlr-interest] Somewhere between actions and string templates


On May 18, 2007, at 1:59 PM, Ted Villalba wrote:
> expression returns [String subexpr]:         ^('=' tag (v+=value)+)  
> -> template(values={$v}) "<values>" ;
>
>
>
> //          
> {                                                            // 
> Commented out this code to add the template
>
> //           $subexpr=$tag.text+":"+$value.text;      //added the  
> template because this $value.text would only grab the first value
>
> //       }
>
> //      ;
>
>
>
> I am not so interested in printing something out, but rather in  
> passing back subexpr once I can get the list of 'values' into that  
> expression( $subexpr=.).

With output=template option rule expression will implicitly return a  
ST.  The explicit return values are no longer needed.

What you have should work fine.  What is going wrong?
>  Somewhat related, in the book when StringTemplates are introduced,  
> the embedded actions go away, yet the return statements remain, so  
> I don't see how the [int value] is populated here. Maybe if I  
> understand that, it will help me with the above.

ooops.

Ter


From paul at paulkeir.com  Mon May 21 15:43:29 2007
From: paul at paulkeir.com (Paul Keir)
Date: Mon, 21 May 2007 23:43:29 +0100
Subject: [antlr-interest] C and #define
In-Reply-To: <46516188.1020902@paulkeir.com>
References: <46516188.1020902@paulkeir.com>
Message-ID: <46522091.5030708@paulkeir.com>

An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070521/93dfbb72/attachment.html 

From antlr at mirality.co.nz  Tue May 22 01:19:38 2007
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Tue, 22 May 2007 20:19:38 +1200
Subject: [antlr-interest] C and #define
In-Reply-To: <46522091.5030708@paulkeir.com>
References: <46516188.1020902@paulkeir.com>
 <46522091.5030708@paulkeir.com>
Message-ID: <20070522081944.8C90019070A@www.antlr.org>

At 10:43 22/05/2007, Paul Keir wrote:
>That certainly does give me something to think about. For one 
>thing, I haven't seen the $type construct before; I guess it 
>redirects the rule clause to another lexer rule called 'DEFINE'.

Not quite; it simply reassigns the type of the token being 
generated by the current rule.  This is how you can have common 
grammar creating multiple tokens.  Instead of having a separate 
rule, it's simply declared in the tokens header section and 
assigned as needed through actions.  Have a look at some of the 
other example grammars; I'm sure several of them use this 
technique.

>It seems like you and Gavin are both suggesting methods which 
>handle whitespace explicitly. i.e. Not assigned to the HIDDEN 
>channel. I'm still learning antlr, but I guess this would require 
>rewriting every rule of my grammar. I don't mind a day or so's 
>work, but I'll have to think through the implications a little 
>more.

No, that's not the case.  These are all being done in *lexer* 
rules, and inside the lexer all the whitespace is always present 
and must always be accounted for if it's contained within a single 
token (since the lexer works character-by-character).  Whitespace 
outside the other tokens, on the other hand, gets consumed by the 
top-level WS token (or whatever you've called it), which is 
usually then assigned to the hidden channel.  This means that the 
*parser* rules don't have to worry about the whitespace, since 
they'll never see it.

I think I phrased that poorly, but I hope you get what I mean :)
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070522/0366e648/attachment.html 

From roy.brokvam at gmail.com  Tue May 22 02:18:35 2007
From: roy.brokvam at gmail.com (Roy Brokvam)
Date: Tue, 22 May 2007 11:18:35 +0200
Subject: [antlr-interest] Lexer too greedy - syntactic predicate doesn't work
Message-ID: <3e25b0550705220218l1ea487ddtf02abc5b131f7dee@mail.gmail.com>

I don't understand why this doesn't work for input "1.a". No matter how I
try to write the rules, I get this error message:

line 1:2 mismatched character 'a' expecting '1'
line 0:-1 no viable alternative at input '<EOF>'

Regards,
Roy B


grammar Test1;

expr   : One ('.' A)? | OneOne ;

One    : '1' ;
//This doesn't work either:
//One    : ('1.a') => '1' ;
A      : 'a' ;
OneOne : '1.1' ;
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070522/b2ba5526/attachment.html 

From timgclark at gmail.com  Tue May 22 03:02:06 2007
From: timgclark at gmail.com (Tim Clark)
Date: Tue, 22 May 2007 11:02:06 +0100
Subject: [antlr-interest] Confused over how to use custom tokens and
	exceptions.
Message-ID: <b6077b530705220302q68ec1c67jba8cb88f1a5cd5d3@mail.gmail.com>

Hi all

I'm a little confused over how to implement my own tokens and exceptions.

1. Tokens.
I want to add the current file name to the tokens, so I need to use a custom
token class (I'm doing file includes).
In the combined parser and lexer grammar, if I use options{
tokenLabelType=MyToken; } it appears to take effect in the parser, but not
the automatically generated) lexer. Specifically,  the lexer rule

INCLUDE  :    'include' (WS)? f=STRING

generates something like this:

public final void mINCLUDE() throws RecognitionException {
        try {
            int _type = INCLUDE;
            MyToken f=null;
......
            f = new CommonToken(.....);

which causes a java error (cannot convert CommonToken to MyToken).

Do I have to use separate parser and lexer, or what?

2. Exceptions
>From a tree parser derived from my parser I am calling methods in an
external object (to generate code). The problem is that I want to throw my
own exceptions from those methods, but the parser rule methods only throw
RecognitionException, so it's not allowed.

Is it possible to do what I want?

Tim
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070522/79a61f76/attachment.html 

From miguel.ping at gmail.com  Tue May 22 03:21:39 2007
From: miguel.ping at gmail.com (Miguel Ping)
Date: Tue, 22 May 2007 11:21:39 +0100
Subject: [antlr-interest] TheServerSide Article
Message-ID: <ab0bf2c00705220321p7e93df15j88c228592669aa5b@mail.gmail.com>

Hi there,

Mr. Terence, congrats for the article on theserverside.com. Seems like
there is JBoss and Hibernate folks are praising antlr. Just posted my
.2 ? ;)

Miguel Ping

From laguest at archangeli.co.uk  Tue May 22 03:34:13 2007
From: laguest at archangeli.co.uk (Luke A. Guest)
Date: Tue, 22 May 2007 11:34:13 +0100
Subject: [antlr-interest] Porting a runtime to Ada
In-Reply-To: <1179768182.7574.38.camel@rogue>
References: <1179591637.7574.34.camel@rogue> <1179768182.7574.38.camel@rogue>
Message-ID: <1179830053.7574.45.camel@rogue>

Ok,

I take it all the files in the
antlr-3.0/runtime/Java/src/org/antlr/runtime/ directory are needed to be
ported for a full back-end?

Thanks,
Luke.



From lists at mainiero.de  Tue May 22 03:38:44 2007
From: lists at mainiero.de (lists at mainiero.de)
Date: Tue, 22 May 2007 12:38:44 +0200
Subject: [antlr-interest] =?iso-8859-1?q?String_Lexer_Rule_with_strange_li?=
	=?iso-8859-1?q?miters?=
Message-ID: <E1HqRlM-0004ng-Qs@server12.webplus24.de>

Hi,

i have the following lexer rule to detect strings:

LONGSTRING
	:	'['('=')*'[' ( EscapeSequence | ~('\\'|']') )* ']'('=')*']'
	;

How can i ensure that the number of = before and after the string are
the same.

For example:

[==[Hello World]==] would be ok
[[Hello World]=] won't

thanks, nicolai




From open.zone at virgin.net  Tue May 22 04:02:45 2007
From: open.zone at virgin.net (Micheal J)
Date: Tue, 22 May 2007 12:02:45 +0100
Subject: [antlr-interest] Porting a runtime to Ada
In-Reply-To: <1179830053.7574.45.camel@rogue>
Message-ID: <001501c79c60$baffaca0$c704a8c0@hercules>

Hi,

> Ok,
> 
> I take it all the files in the 
> antlr-3.0/runtime/Java/src/org/antlr/runtime/ directory are 
> needed to be ported for a full back-end?

For a new runtime that mimics the Java runtime, yes. You also need a codegen
target. See the existing Java codegen target in the main tool sources.

Micheal


From laguest at archangeli.co.uk  Tue May 22 04:07:53 2007
From: laguest at archangeli.co.uk (Luke A. Guest)
Date: Tue, 22 May 2007 12:07:53 +0100
Subject: [antlr-interest] Porting a runtime to Ada
In-Reply-To: <001501c79c60$baffaca0$c704a8c0@hercules>
References: <001501c79c60$baffaca0$c704a8c0@hercules>
Message-ID: <1179832078.7574.49.camel@rogue>

On Tue, 2007-05-22 at 12:02 +0100, Micheal J wrote:
> Hi,
> 
> > Ok,
> > 
> > I take it all the files in the 
> > antlr-3.0/runtime/Java/src/org/antlr/runtime/ directory are 
> > needed to be ported for a full back-end?
> 
> For a new runtime that mimics the Java runtime, yes. You also need a codegen

Don't know about mimicing it, exactly. 

> target. See the existing Java codegen target in the main tool sources.

Yeah, I've seen that. The templates look really confusing.

Luke.



From pink at odahoda.de  Tue May 22 04:08:20 2007
From: pink at odahoda.de (Benjamin Niemann)
Date: Tue, 22 May 2007 13:08:20 +0200
Subject: [antlr-interest] Porting a runtime to Ada
References: <1179591637.7574.34.camel@rogue> <1179768182.7574.38.camel@rogue>
	<1179830053.7574.45.camel@rogue>
Message-ID: <f2uiv4$23j$1@sea.gmane.org>

Hi,

Luke A. Guest wrote:

> I take it all the files in the
> antlr-3.0/runtime/Java/src/org/antlr/runtime/ directory are needed to be
> ported for a full back-end?

Plus antlr-3.0/src/org/antlr/codegen/templates/Java/*.stg and perhaps create
an antlr-3.0/src/org/antlr/codegen/Ada95Target.java

But it is in fact pretty easy to get started:

* In src/org/antlr/codegen/templates/
  - create a directory Ada95
  - copy Java/Java.stg to Ada95/Ada95.stg

* I recommend building the ANTLR tool 'in place'. Do not create a jar or
compile/copy to a build directory. When you run it with 'java -cp
path-to-src-dir ...' it will use the original *.stg file, which you'll edit
a lot - so rebuilding the tool would be quite a PITA.

* Create a directory antlr-3.0/runtime/Ada95. Here you can put anything you
need (no need to clone Java 1:1).

* Start with a simple lexer like:

lexer grammar T;
options { language = Ada95; }
ZERO: '0';

* Look at the generated code and try to figure out which templates in
Ada95.stg you have to port to get valid Ada95 code. What I did, is to
comment out the Java code in all templates replacing it with something like
FIXME([number]). Then you fix the templates until no FIXME remains in the
output.

* You'll need a basic implementation of a character stream and base
recognizer/lexer to get the example running. Just implement the methods
that are actually needed to get the example running w/o errors.

* You'll either get the feeling "Wow, that was easy!" and move on (that
happened to me) or "Eeek, what a pain!" and let someone else to the work.

:)

-- 
Benjamin Niemann
Email: pink at odahoda dot de
WWW: http://pink.odahoda.de/


From roy.brokvam at gmail.com  Tue May 22 04:11:12 2007
From: roy.brokvam at gmail.com (Roy Brokvam)
Date: Tue, 22 May 2007 13:11:12 +0200
Subject: [antlr-interest] String Lexer Rule with strange limiters
In-Reply-To: <E1HqRlM-0004ng-Qs@server12.webplus24.de>
References: <E1HqRlM-0004ng-Qs@server12.webplus24.de>
Message-ID: <3e25b0550705220411o9fff33djc17745688f46c6c6@mail.gmail.com>

Try:

LONGSTRING
    :    '[' Inner ']'
    ;

Inner    :    '=' Inner '='
    |    '[' ( EscapeSequence | ~('\\'|']') )* ']'
    ;

Regards,
Roy B

2007/5/22, lists at mainiero.de <lists at mainiero.de>:
>
> Hi,
>
> i have the following lexer rule to detect strings:
>
> LONGSTRING
>         :       '['('=')*'[' ( EscapeSequence | ~('\\'|']') )*
> ']'('=')*']'
>         ;
>
> How can i ensure that the number of = before and after the string are
> the same.
>
> For example:
>
> [==[Hello World]==] would be ok
> [[Hello World]=] won't
>
> thanks, nicolai
>
>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070522/d8026284/attachment.html 

From laguest at archangeli.co.uk  Tue May 22 04:17:17 2007
From: laguest at archangeli.co.uk (Luke A. Guest)
Date: Tue, 22 May 2007 12:17:17 +0100
Subject: [antlr-interest] Porting a runtime to Ada
In-Reply-To: <f2uiv4$23j$1@sea.gmane.org>
References: <1179591637.7574.34.camel@rogue>
	<1179768182.7574.38.camel@rogue> <1179830053.7574.45.camel@rogue>
	<f2uiv4$23j$1@sea.gmane.org>
Message-ID: <1179832637.7574.56.camel@rogue>

On Tue, 2007-05-22 at 13:08 +0200, Benjamin Niemann wrote:
> Hi,
> 
> Luke A. Guest wrote:
> 
> > I take it all the files in the
> > antlr-3.0/runtime/Java/src/org/antlr/runtime/ directory are needed to be
> > ported for a full back-end?
> 
> Plus antlr-3.0/src/org/antlr/codegen/templates/Java/*.stg and perhaps create
> an antlr-3.0/src/org/antlr/codegen/Ada95Target.java

Yup, already started looking at this.

> But it is in fact pretty easy to get started:
> 
> * In src/org/antlr/codegen/templates/
>   - create a directory Ada95
>   - copy Java/Java.stg to Ada95/Ada95.stg

I take it the capitalisation is necessary, i.e. if I use options
{ language = ada95; } does the directory and template group need to be
named ada95?

> * I recommend building the ANTLR tool 'in place'. Do not create a jar or
> compile/copy to a build directory. When you run it with 'java -cp
> path-to-src-dir ...' it will use the original *.stg file, which you'll edit
> a lot - so rebuilding the tool would be quite a PITA.

Hmm, was going to just build using ant, as I know how to do that fine ;)
and it's quick enough, that way I can just use the generated jar in the
lib dir.

> * Create a directory antlr-3.0/runtime/Ada95. Here you can put anything you
> need (no need to clone Java 1:1).
> 
> * Start with a simple lexer like:
> 
> lexer grammar T;
> options { language = Ada95; }
> ZERO: '0';
> 
> * Look at the generated code and try to figure out which templates in
> Ada95.stg you have to port to get valid Ada95 code. What I did, is to
> comment out the Java code in all templates replacing it with something like
> FIXME([number]). Then you fix the templates until no FIXME remains in the
> output.

Ah, so this is how you start out! I did wonder what the best way forward
was.

> * You'll need a basic implementation of a character stream and base
> recognizer/lexer to get the example running. Just implement the methods
> that are actually needed to get the example running w/o errors.

Yeah, I noticed that the Java implementation returns ints (32 bit), do
all the ports do this? It reads in UTF-8 and transforms it to 32 bit
characters? In Ada you have Character and Wide_Character.

> * You'll either get the feeling "Wow, that was easy!" and move on (that
> happened to me) or "Eeek, what a pain!" and let someone else to the work.

Well, I think it'll be fine up to the parser ;) But that at least should
be ok-ish.

Thanks,
Luke.



From pink at odahoda.de  Tue May 22 04:54:49 2007
From: pink at odahoda.de (Benjamin Niemann)
Date: Tue, 22 May 2007 13:54:49 +0200
Subject: [antlr-interest] Porting a runtime to Ada
References: <1179591637.7574.34.camel@rogue> <1179768182.7574.38.camel@rogue>
	<1179830053.7574.45.camel@rogue> <f2uiv4$23j$1@sea.gmane.org>
	<1179832637.7574.56.camel@rogue>
Message-ID: <f2ulma$gt9$1@sea.gmane.org>

Luke A. Guest wrote:

> On Tue, 2007-05-22 at 13:08 +0200, Benjamin Niemann wrote:
>> But it is in fact pretty easy to get started:
>> 
>> * In src/org/antlr/codegen/templates/
>>   - create a directory Ada95
>>   - copy Java/Java.stg to Ada95/Ada95.stg
> 
> I take it the capitalisation is necessary, i.e. if I use options
> { language = ada95; } does the directory and template group need to be
> named ada95?

I guess so, but the official convention is to use uppercase labels.

> [...]
>
>> * You'll need a basic implementation of a character stream and base
>> recognizer/lexer to get the example running. Just implement the methods
>> that are actually needed to get the example running w/o errors.
> 
> Yeah, I noticed that the Java implementation returns ints (32 bit), do
> all the ports do this? It reads in UTF-8 and transforms it to 32 bit
> characters? In Ada you have Character and Wide_Character.

That's up to your implementation. Python e.g. does not have a 'character'
type. The lexer currently operates on single character unicode strings, but
I'm thinking about switching to ints, if it makes stuff more efficient.
Unicode decoding in Java and Python (don't know about other targets) is done
by the stdlib. You may even start with 8-bit input, if it is sufficient for
your needs and simpler to implement. You'd have to make getMaxCharValue()
in your AdaTarget.java return 255 then.

>> * You'll either get the feeling "Wow, that was easy!" and move on (that
>> happened to me) or "Eeek, what a pain!" and let someone else to the work.
> 
> Well, I think it'll be fine up to the parser ;) But that at least should
> be ok-ish.

That's a reasonable goal and not too difficult to achieve.

-- 
Benjamin Niemann
Email: pink at odahoda dot de
WWW: http://pink.odahoda.de/


From jimi at temporal-wave.com  Tue May 22 07:51:31 2007
From: jimi at temporal-wave.com (Jim Idle)
Date: Tue, 22 May 2007 07:51:31 -0700
Subject: [antlr-interest] Porting a runtime to Ada
In-Reply-To: <f2ulma$gt9$1@sea.gmane.org>
References: <1179591637.7574.34.camel@rogue>
	<1179768182.7574.38.camel@rogue><1179830053.7574.45.camel@rogue>
	<f2uiv4$23j$1@sea.gmane.org><1179832637.7574.56.camel@rogue>
	<f2ulma$gt9$1@sea.gmane.org>
Message-ID: <B36CCC332A32904F8FA3DE134A235336252599@wavemachine.temporal-wave.com>



> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of Benjamin Niemann
> Sent: Tuesday, May 22, 2007 4:55 AM
> To: antlr-interest at antlr.org
> Subject: Re: [antlr-interest] Porting a runtime to Ada
> 
> Luke A. Guest wrote:
> 
> >> * You'll need a basic implementation of a character stream and base
> >> recognizer/lexer to get the example running. Just implement the
> methods
> >> that are actually needed to get the example running w/o errors.
> >
> > Yeah, I noticed that the Java implementation returns ints (32 bit),
> do
> > all the ports do this? It reads in UTF-8 and transforms it to 32 bit
> > characters? In Ada you have Character and Wide_Character.
> 

I suggest that you have your streams return UTF-32 characters, which you
should represent by the most sensible 32 bit type for the target
language. This means that your input streams can be anything, so long as
you can decode to UTF-32 and position to specific points in the stream
(it is best to use pointers for things like UTF-8, to avoid having to
traverse the actual string to get to character 'n'.

However, do you have an absolute requirement to use Ada95 in actions, or
just have callable lexers and parsers? You could just use the C target
and link with libraries.


Jim

From parrt at cs.usfca.edu  Tue May 22 09:09:00 2007
From: parrt at cs.usfca.edu (Terence Parr)
Date: Tue, 22 May 2007 09:09:00 -0700
Subject: [antlr-interest] TheServerSide Article
In-Reply-To: <ab0bf2c00705220321p7e93df15j88c228592669aa5b@mail.gmail.com>
References: <ab0bf2c00705220321p7e93df15j88c228592669aa5b@mail.gmail.com>
Message-ID: <A42342B2-0502-4E9A-9277-8DDF3FA43A43@cs.usfca.edu>

Thanks!

a jboss interview should be out soon :)

Ter
On May 22, 2007, at 3:21 AM, Miguel Ping wrote:

> Hi there,
>
> Mr. Terence, congrats for the article on theserverside.com. Seems like
> there is JBoss and Hibernate folks are praising antlr. Just posted my
> .2 ? ;)
>
> Miguel Ping


From parrt at cs.usfca.edu  Tue May 22 09:09:35 2007
From: parrt at cs.usfca.edu (Terence Parr)
Date: Tue, 22 May 2007 09:09:35 -0700
Subject: [antlr-interest] Porting a runtime to Ada
In-Reply-To: <1179830053.7574.45.camel@rogue>
References: <1179591637.7574.34.camel@rogue> <1179768182.7574.38.camel@rogue>
	<1179830053.7574.45.camel@rogue>
Message-ID: <34179B66-9DCD-4D8B-8FFC-B0C8E4D17F44@cs.usfca.edu>


On May 22, 2007, at 3:34 AM, Luke A. Guest wrote:

> Ok,
>
> I take it all the files in the
> antlr-3.0/runtime/Java/src/org/antlr/runtime/ directory are needed  
> to be
> ported for a full back-end?

correct.  And

org/antlr/codegen/templates/Java/*.stg

Ter


From parrt at cs.usfca.edu  Tue May 22 09:19:42 2007
From: parrt at cs.usfca.edu (Terence Parr)
Date: Tue, 22 May 2007 09:19:42 -0700
Subject: [antlr-interest] tonight: still space available at antlr v3 launch
	party
Message-ID: <7872B1A0-D6DD-416A-984A-0C17FCE50C8C@cs.usfca.edu>

In case you are just tuning in, we're have the v3 launch part at  
univ. of San Francisco tonight.  Free pizza even. ;)  If you want to  
come, please contact Jean Bovet at the CC address above (I'm away  
from email most of the day).  He'll send you the details. :)

Terence

From carlos.melgarejo at rogers.com  Tue May 22 10:10:26 2007
From: carlos.melgarejo at rogers.com (CARLOS MELGAREJO)
Date: Tue, 22 May 2007 10:10:26 -0700 (PDT)
Subject: [antlr-interest] Parser - > Tree walker
Message-ID: <864932.90457.qm@web88001.mail.re2.yahoo.com>


  Hi all,

  I'm trying to create a grammar that recognize simple expressions and other goodies and generate an evaluation at the end.

  First I read "The definitive ANTLR Reference" book(for the version 3) and I got all exited, and then after a lot of testing examples I was encourage to start working in my project.

  So, making the long story short this is my Lexer-Parser grammar look like:

grammar Expert;
options {
    output=AST;
    ASTLabelType=CommonTree;
}

// Starting point
statement : expression  ;  

expression  : conditionalAndExpression ( 'or'^ conditionalAndExpression )*  ;

conditionalAndExpression : exclusiveOrExpression ( 'and'^ exclusiveOrExpression )* ;

exclusiveOrExpression : equalityExpression ( 'xor'^ equalityExpression )* ;

equalityExpression : relationalExpression (('='^ | '!='^) relationalExpression)*  ;

relationalExpression : additiveExpression ( ('<='^|'>='^|'<'^|'>'^) additiveExpression )* ;        

additiveExpression : multiplicativeExpression ( ('+'^ | '-'^) multiplicativeExpression )*  ;

multiplicativeExpression : unaryExpression ( ( '*'^ | '/'^ ) unaryExpression )*  ;

unaryExpression  :  '+'^ unaryExpression 
                          |  '-'^ unaryExpression
                          |  unaryExpressionNotPlusMinus
                          ;
  
unaryExpressionNotPlusMinus
    : 'not'^ unaryExpression
    | atom
    ;     
    
atom
    : literal  
    | log 
    | Date 
    | '('! expression  ')'!
    ;

literal    
    :   FloatingPointLiteral  
    |   StringLiteral         
    ; 
......................

  So far so good, I'm able to create a pretty good AST, the only problem that I'm facing with this grammar is that I build the following tree node:
 ^('-' expr expr)     // Arithmetic expression 
 ^('-' expr)            // Unary expression.

   My problem is that I don't know how to walk this tree, because of the ambiguity in the rule abode created with '-'. 

   How I can solve the problem with unary expressions?. 
   Thanks in advance.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070522/917d4c42/attachment-0001.html 

From jimi at temporal-wave.com  Tue May 22 10:17:50 2007
From: jimi at temporal-wave.com (Jim Idle)
Date: Tue, 22 May 2007 10:17:50 -0700
Subject: [antlr-interest] Parser - > Tree walker
In-Reply-To: <864932.90457.qm@web88001.mail.re2.yahoo.com>
References: <864932.90457.qm@web88001.mail.re2.yahoo.com>
Message-ID: <B36CCC332A32904F8FA3DE134A2353362525A1@wavemachine.temporal-wave.com>

Probably the easiest thing to do is change what you are producing for
the unary operators. You probably don't even need unary +:

 

Add

 

tokens

{

     UNARYNEG;

}

 

After the options,

 

 

Then:

 

unaryExpression  :  '+' ue=unaryExpression      -> $ue
                 |  '-' ue=unaryExpression      -> ^(UNARYNEG $ue)

                 |  unaryExpressionNotPlusMinus
                 ;

...

 

From: antlr-interest-bounces at antlr.org
[mailto:antlr-interest-bounces at antlr.org] On Behalf Of CARLOS MELGAREJO
Sent: Tuesday, May 22, 2007 10:10 AM
To: antlr-interest at antlr.org
Subject: [antlr-interest] Parser - > Tree walker

 


  Hi all,

  I'm trying to create a grammar that recognize simple expressions and
other goodies and generate an evaluation at the end.

  First I read "The definitive ANTLR Reference" book(for the version 3)
and I got all exited, and then after a lot of testing examples I was
encourage to start working in my project.

  So, making the long story short this is my Lexer-Parser grammar look
like:

grammar Expert;
options {
    output=AST;
    ASTLabelType=CommonTree;
}

// Starting point
statement : expression  ; 

expression  : conditionalAndExpression ( 'or'^ conditionalAndExpression
)*  ;

conditionalAndExpression : exclusiveOrExpression ( 'and'^
exclusiveOrExpression )* ;

exclusiveOrExpression : equalityExpression ( 'xor'^ equalityExpression
)* ;

equalityExpression : relationalExpression (('='^ | '!='^)
relationalExpression)*  ;

relationalExpression : additiveExpression ( ('<='^|'>='^|'<'^|'>'^)
additiveExpression )* ;       

additiveExpression : multiplicativeExpression ( ('+'^ | '-'^)
multiplicativeExpression )*  ;

multiplicativeExpression : unaryExpression ( ( '*'^ | '/'^ )
unaryExpression )*  ;

unaryExpression  :  '+'^ unaryExpression 
                          |  '-'^ unaryExpression
                          |  unaryExpressionNotPlusMinus
                          ;
  
unaryExpressionNotPlusMinus
    : 'not'^ unaryExpression
    | atom
    ;     
    
atom
    : literal  
    | log 
    | Date 
    | '('! expression  ')'!
    ;

literal    
    :   FloatingPointLiteral  
    |   StringLiteral         
    ; 
......................

  So far so good, I'm able to create a pretty good AST, the only problem
that I'm facing with this grammar is that I build the following tree
node:
 ^('-' expr expr)     // Arithmetic expression 
 ^('-' expr)            // Unary expression.

   My problem is that I don't know how to walk this tree, because of the
ambiguity in the rule abode created with '-'. 

   How I can solve the problem with unary expressions?. 
   Thanks in advance.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070522/977bf883/attachment.html 

From lbiondi at olijo.com  Tue May 22 10:22:58 2007
From: lbiondi at olijo.com (Lucio Biondi)
Date: Tue, 22 May 2007 19:22:58 +0200
Subject: [antlr-interest] Parser - > Tree walker
In-Reply-To: <864932.90457.qm@web88001.mail.re2.yahoo.com>
References: <864932.90457.qm@web88001.mail.re2.yahoo.com>
Message-ID: <200705221922.58346.lbiondi@olijo.com>


>   So far so good, I'm able to create a pretty good AST, the only problem that I'm facing with this grammar is that I build the following tree node:
>  ^('-' expr expr)     // Arithmetic expression 
>  ^('-' expr)            // Unary expression.
> 
>    My problem is that I don't know how to walk this tree, because of the ambiguity in the rule abode created with '-'. 
> 
>    How I can solve the problem with unary expressions?. 
>    Thanks in advance.
> 
> 

I guess It would be better if you try to resolve the ambiguity in the parsing phase
with an imaginary token (UNARY).

additiveExpression
    :	multiplicativeExpression (('+'^ | '-'^) multiplicativeExpression)*
    ;

multiplicativeExpression
   :	unaryExpression (('*'^ | '/'^ | '%'^ | '**'^) unaryExpression)*
    ;

unaryExpression
    :	'+' unaryExpression
    |	'-' unaryExpression -> ^(UNARY unaryExpression)
    |	unaryNotExpression
    ;

Lucio

From antlr at jazillian.com  Tue May 22 11:04:35 2007
From: antlr at jazillian.com (Andy Tripp)
Date: Tue, 22 May 2007 14:04:35 -0400
Subject: [antlr-interest] Parser - > Tree walker
In-Reply-To: <864932.90457.qm@web88001.mail.re2.yahoo.com>
References: <864932.90457.qm@web88001.mail.re2.yahoo.com>
Message-ID: <465330B3.4000602@jazillian.com>

An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070522/64a9e813/attachment.html 

From jaluber at gmx.de  Tue May 22 11:14:51 2007
From: jaluber at gmx.de (Johannes Luber)
Date: Tue, 22 May 2007 20:14:51 +0200
Subject: [antlr-interest] Grammar Ambiguity
Message-ID: <4653331B.5050903@gmx.de>

Hi,

The following grammar snippet is ambiguous, but I can't think of a way
to remove it. I have to solve this in lexer mode only, so switching to
parser rules isn't possible. Has anyone an idea how to solve this problem?

DELIMITED_COMMENT
	:	'/*' DELIMITED_COMMENT_SECTION* ASTERISKS '/'
	;
		
fragment DELIMITED_COMMENT_SECTION
	:	NOT_ASTERISK
	|	ASTERISKS NOT_SLASH
	;

fragment ASTERISKS
	:	'*'+
	;
	
fragment NOT_ASTERISK
	:	~'*' // Any Unicode character except *
	;
	
fragment NOT_SLASH
	:	~'/' // Any Unicode character except /
	;

Thanks in advance,
Johannes Luber

From carlos.melgarejo at rogers.com  Tue May 22 11:15:17 2007
From: carlos.melgarejo at rogers.com (CARLOS MELGAREJO)
Date: Tue, 22 May 2007 11:15:17 -0700 (PDT)
Subject: [antlr-interest] Parser - > Tree walker
Message-ID: <66846.27566.qm@web88014.mail.re2.yahoo.com>

Thanks Jim and Lucio,

 I really appreciate it guys.

 After a lot of trial-error, finally it works following your suggestion. I got a lot of error messages when I used antlrworks-1.0.jar the new
version that I just donwloaded today, then I tried using the plane command line $java org.antlr.Tool and again have some
error messages, finally I used the all version of antlrworks-1.0b11.jar and this one works just fine. 

  I believe was the some problem that I was facing yesterday, I tried first using token substitution, and then after a few changes stop working. 

  

 

----- Original Message ----
From: Jim Idle <jimi at temporal-wave.com>
To: CARLOS MELGAREJO <carlos.melgarejo at rogers.com>; antlr-interest at antlr.org
Sent: Tuesday, May 22, 2007 1:17:50 PM
Subject: RE: [antlr-interest] Parser - > Tree walker




 
 

<!--
 _filtered {font-family:"Cambria Math";panose-1:2 4 5 3 5 4 6 3 2 4;}
 _filtered {font-family:Calibri;panose-1:2 15 5 2 2 2 4 3 2 4;}
 _filtered {font-family:Tahoma;panose-1:2 11 6 4 3 5 4 4 2 4;}
/* Style Definitions */
 p.MsoNormal, li.MsoNormal, div.MsoNormal
	{margin:0in;margin-bottom:.0001pt;font-size:12.0pt;font-family:"Times New Roman", "serif";}
a:link, span.MsoHyperlink
	{color:blue;text-decoration:underline;}
a:visited, span.MsoHyperlinkFollowed
	{color:purple;text-decoration:underline;}
span.EmailStyle17
	{font-family:"Calibri", "sans-serif";color:#1F497D;}
.MsoChpDefault
	{font-size:10.0pt;}
 _filtered {margin:1.0in 1.0in 1.0in 1.0in;}
div.Section1
	{}
-->






Probably the easiest thing to do is change what you are
producing for the unary operators. You probably don?t even need unary +:
 

  
 

Add
 

  
 

tokens
 

{
 

     UNARYNEG;
 

}
 

  
 

After the options,
 

  
 

  
 

Then:
 

  
 

unaryExpression 
:  '+' ue=unaryExpression      -> $ue

                
|  '-' ue=unaryExpression      -> ^(UNARYNEG $ue)
 

     
           |  unaryExpressionNotPlusMinus

                 ;
 

?
 

  
 







From:
antlr-interest-bounces at antlr.org [mailto:antlr-interest-bounces at antlr.org] On
Behalf Of CARLOS MELGAREJO

Sent: Tuesday, May 22, 2007 10:10 AM

To: antlr-interest at antlr.org

Subject: [antlr-interest] Parser - > Tree walker
 







  
 







  Hi all,



  I'm trying to create a grammar that recognize simple expressions and
other goodies and generate an evaluation at the end.



  First I read "The definitive ANTLR Reference" book(for the
version 3) and I got all exited, and then after a lot of testing examples I was
encourage to start working in my project.



  So, making the long story short this is my Lexer-Parser grammar look
like:



grammar Expert;

options {

    output=AST;

    ASTLabelType=CommonTree;

}



// Starting point

statement : expression  ; 



expression  : conditionalAndExpression ( 'or'^ conditionalAndExpression
)*  ;



conditionalAndExpression : exclusiveOrExpression ( 'and'^ exclusiveOrExpression
)* ;



exclusiveOrExpression : equalityExpression ( 'xor'^ equalityExpression )* ;



equalityExpression : relationalExpression (('='^ | '!='^)
relationalExpression)*  ;



relationalExpression : additiveExpression ( ('<='^|'>='^|'<'^|'>'^)
additiveExpression )* ;       



additiveExpression : multiplicativeExpression ( ('+'^ | '-'^)
multiplicativeExpression )*  ;



multiplicativeExpression : unaryExpression ( ( '*'^ | '/'^ ) unaryExpression
)*  ;



unaryExpression  :  '+'^ unaryExpression 

                         
|  '-'^ unaryExpression

                   
      |  unaryExpressionNotPlusMinus

                   
      ;

  

unaryExpressionNotPlusMinus

    : 'not'^ unaryExpression

    | atom

    ;     

    

atom

    : literal  

    | log 

    | Date 

    | '('! expression  ')'!

    ;



literal    

    :   FloatingPointLiteral  

    |  
StringLiteral         

    ; 

......................



  So far so good, I'm able to create a pretty good AST, the only problem
that I'm facing with this grammar is that I build the following tree node:

 ^('-' expr expr)     // Arithmetic expression 

 ^('-'
expr)            //
Unary expression.



   My problem is that I don't know how to walk this tree, because of
the ambiguity in the rule abode created with '-'. 



   How I can solve the problem with unary expressions?. 

   Thanks in advance.
 
















-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070522/0509d214/attachment-0001.html 

From jimi at temporal-wave.com  Tue May 22 11:26:02 2007
From: jimi at temporal-wave.com (Jim Idle)
Date: Tue, 22 May 2007 11:26:02 -0700
Subject: [antlr-interest] Parser - > Tree walker
In-Reply-To: <465330B3.4000602@jazillian.com>
References: <864932.90457.qm@web88001.mail.re2.yahoo.com>
	<465330B3.4000602@jazillian.com>
Message-ID: <B36CCC332A32904F8FA3DE134A2353362525A3@wavemachine.temporal-wave.com>

IMO, the code you have shown here is less obvious than distinguishing
the semantic case in the tree generating parser, which actually involves
less typing and less knowledge.

 

Jim

 

From: antlr-interest-bounces at antlr.org
[mailto:antlr-interest-bounces at antlr.org] On Behalf Of Andy Tripp
Sent: Tuesday, May 22, 2007 11:05 AM
To: CARLOS MELGAREJO
Cc: antlr-interest at antlr.org
Subject: Re: [antlr-interest] Parser - > Tree walker

 

I'm sorry to keep doing this to the mailing list...I keep jumping in
once a month
with pretty much the same negative comment...but here goes anyway ;)

You're walking a tree-like data structure. You're at a '-' node, and you
want to distinguish
between the one with one child and the one with two children. IMO, if
you can't just
crank out the obvious code:

switch (node.getType()) {
    case MINUS:
         if (node.getChildCount() == 1)  // unary
         else    // binary
         break;
}



 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070522/81043469/attachment.html 

From jimi at temporal-wave.com  Tue May 22 11:29:00 2007
From: jimi at temporal-wave.com (Jim Idle)
Date: Tue, 22 May 2007 11:29:00 -0700
Subject: [antlr-interest] Grammar Ambiguity
In-Reply-To: <4653331B.5050903@gmx.de>
References: <4653331B.5050903@gmx.de>
Message-ID: <B36CCC332A32904F8FA3DE134A2353362525A4@wavemachine.temporal-wave.com>

Did you have some particular issue with:

COMMENT
    :   '/*' ( options {greedy=false;} : . )* '*/' {$channel=HIDDEN;}
    ;

?

Jim

> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of Johannes Luber
> Sent: Tuesday, May 22, 2007 11:15 AM
> To: antlr-interest at antlr.org
> Subject: [antlr-interest] Grammar Ambiguity
> 
> Hi,
> 
> The following grammar snippet is ambiguous, but I can't think of a way
> to remove it. I have to solve this in lexer mode only, so switching to
> parser rules isn't possible. Has anyone an idea how to solve this
> problem?
> 
> DELIMITED_COMMENT
> 	:	'/*' DELIMITED_COMMENT_SECTION* ASTERISKS '/'
> 	;
> 
> fragment DELIMITED_COMMENT_SECTION
> 	:	NOT_ASTERISK
> 	|	ASTERISKS NOT_SLASH
> 	;
> 
> fragment ASTERISKS
> 	:	'*'+
> 	;
> 
> fragment NOT_ASTERISK
> 	:	~'*' // Any Unicode character except *
> 	;
> 
> fragment NOT_SLASH
> 	:	~'/' // Any Unicode character except /
> 	;
> 
> Thanks in advance,
> Johannes Luber

From jaluber at gmx.de  Tue May 22 11:58:19 2007
From: jaluber at gmx.de (Johannes Luber)
Date: Tue, 22 May 2007 20:58:19 +0200
Subject: [antlr-interest] Grammar Ambiguity
In-Reply-To: <B36CCC332A32904F8FA3DE134A2353362525A4@wavemachine.temporal-wave.com>
References: <4653331B.5050903@gmx.de>
	<B36CCC332A32904F8FA3DE134A2353362525A4@wavemachine.temporal-wave.com>
Message-ID: <46533D4B.6090406@gmx.de>

Jim Idle wrote:
> Did you have some particular issue with:
> 
> COMMENT
>     :   '/*' ( options {greedy=false;} : . )* '*/' {$channel=HIDDEN;}
>     ;
> 
> ?

No, I just used the official definition of the C# standard. Funny, how
simple the solution can be if one realizes that the box, one is sitting
in, is too small. Thanks!


Unrelated, except by temporal proximity, is the following:
http://www.washyourhands.tv/ Beware!


Best regards,
Johannes Luber

From antlr at jazillian.com  Tue May 22 12:06:00 2007
From: antlr at jazillian.com (Andy Tripp)
Date: Tue, 22 May 2007 15:06:00 -0400
Subject: [antlr-interest] Parser - > Tree walker
In-Reply-To: <B36CCC332A32904F8FA3DE134A2353362525A3@wavemachine.temporal-wave.com>
References: <864932.90457.qm@web88001.mail.re2.yahoo.com>
	<465330B3.4000602@jazillian.com>
	<B36CCC332A32904F8FA3DE134A2353362525A3@wavemachine.temporal-wave.com>
Message-ID: <46533F18.9010304@jazillian.com>

An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070522/d97f7a4c/attachment.html 

From carlos.melgarejo at rogers.com  Tue May 22 12:04:45 2007
From: carlos.melgarejo at rogers.com (CARLOS MELGAREJO)
Date: Tue, 22 May 2007 12:04:45 -0700 (PDT)
Subject: [antlr-interest] Handling Lexer, Parser, Tree walker error messages.
Message-ID: <182727.39276.qm@web88013.mail.re2.yahoo.com>


     I'm trying to develop a web application that allow the user to enter a free form text. The application should be able to
do lexical, sintatic and semantic interpretation of the text entered by the user, and then finally do an evaluation. I'm using
ANTLR and for now I just working with very simple grammar, but will grow in the near future. I really like this tool by the way, 
do a lot of stuff for me and the error message is kinda cool. 

     The dilema that I'm facing is that my web application should spit out friendly error messages to the final users. In order
to do that, I will need a sort of ErrorManager that collect all errors from Lexer, Parser and TreeWalker, I should be able 
to add more errors as well. Then finally display all errors to the user. In that case I can even put some logic anywhere 
when some error occurs stops building the AST tree.

     I'm aware that there is already some plugins for Eclipse, but I'm using Netbeans. I donwloaded the source code of ANTLR, in 
the mean time I'll be looking on that to see what I can do. 

    Any suggestion to solve my problem or a better approach?.

   Thanks.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070522/4cfe78ee/attachment.html 

From tirelli at post.com  Tue May 22 12:18:41 2007
From: tirelli at post.com (Edson Tirelli)
Date: Tue, 22 May 2007 16:18:41 -0300
Subject: [antlr-interest] AntlrWorks: CTRL+F10 not working anymore?
Message-ID: <e6dd5ba30705221218n3f3e9219t3c57e4d4057cec58@mail.gmail.com>

   I just downloaded antlrWorks 1.0 final. The new MDI interface looks good!
On the other side, CTRL+F10 stopped working for me.... anyone else having
this problem?

   []s
   Edson


-- 
  Edson Tirelli
  Software Engineer - JBoss Rules Core Developer
  Office: +55 11 3529-6000
  Mobile: +55 11 9287-5646
  JBoss, a division of Red Hat @ www.jboss.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070522/44451ee7/attachment.html 

From jimi at temporal-wave.com  Tue May 22 12:45:11 2007
From: jimi at temporal-wave.com (Jim Idle)
Date: Tue, 22 May 2007 12:45:11 -0700
Subject: [antlr-interest] Parser - > Tree walker
In-Reply-To: <46533F18.9010304@jazillian.com>
References: <864932.90457.qm@web88001.mail.re2.yahoo.com>
	<465330B3.4000602@jazillian.com>
	<B36CCC332A32904F8FA3DE134A2353362525A3@wavemachine.temporal-wave.com>
	<46533F18.9010304@jazillian.com>
Message-ID: <B36CCC332A32904F8FA3DE134A2353362525A9@wavemachine.temporal-wave.com>

I think you miss the point or choose to make rewrite rules more
complicated than they are, merely in order to justify your dislike of
tree grammars. 

 

The reason the programmers knows Java is because they bothered to
learned the language they are using. If you are writing a recognizer
using ANTLR, then presumably you are willing to read the manual a
little. Learning rewrite rules is trivial compared to learning about
non-determinism and how to write context free grammars, most of which
has nothing to do with the tool you are using. The knowledge required to
learn the internal structure of nodes is far less accessible.

 

 

Anyway, this has been done to death in the past.

 

Jim

 

From: Andy Tripp [mailto:antlr at jazillian.com] 
Sent: Tuesday, May 22, 2007 12:06 PM
To: Jim Idle
Cc: antlr-interest at antlr.org
Subject: Re: [antlr-interest] Parser - > Tree walker

 

Jim Idle wrote: 

IMO, the code you have shown here is less obvious than distinguishing
the semantic case in the tree generating parser, which actually involves
less typing and less knowledge.

As for less typing, the important thing is not how many characters it
takes, but how readable it is.
And readability is a function of the amount of knowledge of the reader,
not the writer.

As for knowledge, we have to consider what the programmer presumably
already knows.
I think virtually every programmer knows how to do a switch based on a
node's type
and get a node's child count. Compare that to very few programmers who
know what
this ANTLR syntax means: 
'-' ue=unaryExpression      -> ^(UNARYNEG $ue)

IMO, probably 99% or more of all programmers could write (and easily
read)
the vanilla code that I showed, while less than 1%
(those with non-trivial ANTLR experience) could write the code you
showed.

"Ergo" is latin for "therefore". It's shorter to type, and perhaps "less
knowledge".
Whether it's easier to read and write depends on the reader/writer.
In English-speaking countries, most people already know "therefore", and
so learning
"ergo" means having to aquire extra knowledge. Same for programmers who
already
know a language like C/C++/Java and are trying to walk a tree. 

Nothing against Latin or ANTLR, just trying to keep the writers and
programmers productive :)



 

Jim

 

From: antlr-interest-bounces at antlr.org
[mailto:antlr-interest-bounces at antlr.org] On Behalf Of Andy Tripp
Sent: Tuesday, May 22, 2007 11:05 AM
To: CARLOS MELGAREJO
Cc: antlr-interest at antlr.org
Subject: Re: [antlr-interest] Parser - > Tree walker

 

I'm sorry to keep doing this to the mailing list...I keep jumping in
once a month
with pretty much the same negative comment...but here goes anyway ;)

You're walking a tree-like data structure. You're at a '-' node, and you
want to distinguish
between the one with one child and the one with two children. IMO, if
you can't just
crank out the obvious code:

switch (node.getType()) {
    case MINUS:
         if (node.getChildCount() == 1)  // unary
         else    // binary
         break;
}




 

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070522/d470f0f2/attachment-0001.html 

From antlr at jazillian.com  Tue May 22 13:24:58 2007
From: antlr at jazillian.com (Andy Tripp)
Date: Tue, 22 May 2007 16:24:58 -0400
Subject: [antlr-interest] Parser - > Tree walker
In-Reply-To: <B36CCC332A32904F8FA3DE134A2353362525A9@wavemachine.temporal-wave.com>
References: <864932.90457.qm@web88001.mail.re2.yahoo.com>
	<465330B3.4000602@jazillian.com>
	<B36CCC332A32904F8FA3DE134A2353362525A3@wavemachine.temporal-wave.com>
	<46533F18.9010304@jazillian.com>
	<B36CCC332A32904F8FA3DE134A2353362525A9@wavemachine.temporal-wave.com>
Message-ID: <4653519A.1090505@jazillian.com>

An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070522/e6efb652/attachment.html 

From ma_laver at ciise.concordia.ca  Tue May 22 13:32:47 2007
From: ma_laver at ciise.concordia.ca (=?UTF-8?B?TWFyYy1BbmRyw6kgTGF2ZXJkacOocmU=?=)
Date: Tue, 22 May 2007 16:32:47 -0400
Subject: [antlr-interest] Handling Lexer, Parser,
	Tree walker error messages.
In-Reply-To: <182727.39276.qm@web88013.mail.re2.yahoo.com>
References: <182727.39276.qm@web88013.mail.re2.yahoo.com>
Message-ID: <4653536F.1020701@ciise.concordia.ca>

You can override the reportError() method. You can then redirect the 
parsing exception to wherever you need it for handling.

I personally did it for a parser, and I'm sure that the lexer would work 
too, since they both extend BaseRecognizer.

CARLOS MELGAREJO wrote:
> 
>      I'm trying to develop a web application that allow the user to 
> enter a free form text. The application should be able to
> do lexical, sintatic and semantic interpretation of the text entered by 
> the user, and then finally do an evaluation. I'm using
> ANTLR and for now I just working with very simple grammar, but will grow 
> in the near future. I really like this tool by the way,
> do a lot of stuff for me and the error message is kinda cool.
> 
>      The dilema that I'm facing is that my web application should spit 
> out friendly error messages to the final users. In order
> to do that, I will need a sort of ErrorManager that collect all errors 
> from Lexer, Parser and TreeWalker, I should be able
> to add more errors as well. Then finally display all errors to the user. 
> In that case I can even put some logic anywhere
> when some error occurs stops building the AST tree.
> 
>      I'm aware that there is already some plugins for Eclipse, but I'm 
> using Netbeans. I donwloaded the source code of ANTLR, in
> the mean time I'll be looking on that to see what I can do.
> 
>     Any suggestion to solve my problem or a better approach?.
> 
>    Thanks.

-- 
Marc-Andr? LAVERDI?RE, B. Eng., M. A. Sc. (in progress)
Computer Security Laboratory - Laboratoire de s?curit? informatique
CIISE, Universit? Concordia University, Montr?al, Qu?bec, Canada
www.ciise.concordia.ca

/"\
\ /    ASCII Ribbon Campaign
  X      against HTML e-mail
/ \

"Perseverance must finish its work so that you may be mature and 
complete, not lacking anything." -James 1:4


From laguest at archangeli.co.uk  Tue May 22 15:31:18 2007
From: laguest at archangeli.co.uk (Luke A. Guest)
Date: Tue, 22 May 2007 23:31:18 +0100
Subject: [antlr-interest] Porting a runtime to Ada
In-Reply-To: <B36CCC332A32904F8FA3DE134A235336252599@wavemachine.temporal-wave.com>
References: <1179591637.7574.34.camel@rogue>
	<1179768182.7574.38.camel@rogue><1179830053.7574.45.camel@rogue>
	<f2uiv4$23j$1@sea.gmane.org><1179832637.7574.56.camel@rogue>
	<f2ulma$gt9$1@sea.gmane.org>
	<B36CCC332A32904F8FA3DE134A235336252599@wavemachine.temporal-wave.com>
Message-ID: <1179873084.7574.59.camel@rogue>

On Tue, 2007-05-22 at 07:51 -0700, Jim Idle wrote:
> I suggest that you have your streams return UTF-32 characters, which you
> should represent by the most sensible 32 bit type for the target
> language. This means that your input streams can be anything, so long as
> you can decode to UTF-32 and position to specific points in the stream
> (it is best to use pointers for things like UTF-8, to avoid having to
> traverse the actual string to get to character 'n'.

Ok. I'll look into it.

> However, do you have an absolute requirement to use Ada95 in actions, or
> just have callable lexers and parsers? You could just use the C target
> and link with libraries.

I could just use the C target and import it all into Ada, yeah. But it's
nicer to have an Ada target, that way you get the benefits of a strongly
typed language.

Luke.



From parrt at cs.usfca.edu  Tue May 22 15:46:09 2007
From: parrt at cs.usfca.edu (Terence Parr)
Date: Tue, 22 May 2007 15:46:09 -0700
Subject: [antlr-interest] Porting a runtime to Ada
In-Reply-To: <f2uiv4$23j$1@sea.gmane.org>
References: <1179591637.7574.34.camel@rogue> <1179768182.7574.38.camel@rogue>
	<1179830053.7574.45.camel@rogue> <f2uiv4$23j$1@sea.gmane.org>
Message-ID: <C4509DA6-5D1D-4E8A-8A05-AEE8BDC0804F@cs.usfca.edu>

Hi, i just copied that useful into to:

http://www.antlr.org/wiki/display/ANTLR3/How+to+build+an+ANTLR+code 
+generation+target

can you add other info about UTF-8 and the other stuff in the thread?

thanks!

Ter

From laguest at archangeli.co.uk  Tue May 22 16:14:23 2007
From: laguest at archangeli.co.uk (Luke A. Guest)
Date: Wed, 23 May 2007 00:14:23 +0100
Subject: [antlr-interest] Porting a runtime to Ada
In-Reply-To: <C4509DA6-5D1D-4E8A-8A05-AEE8BDC0804F@cs.usfca.edu>
References: <1179591637.7574.34.camel@rogue>
	<1179768182.7574.38.camel@rogue> <1179830053.7574.45.camel@rogue>
	<f2uiv4$23j$1@sea.gmane.org>
	<C4509DA6-5D1D-4E8A-8A05-AEE8BDC0804F@cs.usfca.edu>
Message-ID: <1179875668.7574.61.camel@rogue>

On Tue, 2007-05-22 at 15:46 -0700, Terence Parr wrote:
> http://www.antlr.org/wiki/display/ANTLR3/How+to+build+an+ANTLR+code 
> +generation+target 

Hmm, maybe it should read <your language> rather than Ada95?

Luke.



From laguest at archangeli.co.uk  Tue May 22 16:38:06 2007
From: laguest at archangeli.co.uk (Luke A. Guest)
Date: Wed, 23 May 2007 00:38:06 +0100
Subject: [antlr-interest] Porting a runtime to Ada
In-Reply-To: <f2uiv4$23j$1@sea.gmane.org>
References: <1179591637.7574.34.camel@rogue>
	<1179768182.7574.38.camel@rogue> <1179830053.7574.45.camel@rogue>
	<f2uiv4$23j$1@sea.gmane.org>
Message-ID: <1179877091.7574.65.camel@rogue>

On Tue, 2007-05-22 at 13:08 +0200, Benjamin Niemann wrote:

> * I recommend building the ANTLR tool 'in place'. Do not create a jar or
> compile/copy to a build directory. When you run it with 'java -cp
> path-to-src-dir ...' it will use the original *.stg file, which you'll edit
> a lot - so rebuilding the tool would be quite a PITA.

Hmm, I'm not all that up on Java - I have programmed in it a bit, so
maybe you could explain how to do this?

Thanks,
Luke.



From rschulz at sonic.net  Tue May 22 16:50:47 2007
From: rschulz at sonic.net (Randall R Schulz)
Date: Tue, 22 May 2007 16:50:47 -0700
Subject: [antlr-interest] Free / Open JSON Grammar?
Message-ID: <200705221650.47228.rschulz@sonic.net>

Hi,

I was sure this would be settled with a quick Google search, but instead 
I've come up dry.

Does anyone know of or have to offer an ANTLR grammar (preferably for 
ANTLR v3) for JSON?

Alternatively, a JavaScript / ECMAScript grammar from which I could 
extract the literal data decoding productions would suffice.


Thanks.

Randall Schulz

From dirty at apple.com  Tue May 22 17:25:23 2007
From: dirty at apple.com (Cameron Esfahani)
Date: Tue, 22 May 2007 17:25:23 -0700
Subject: [antlr-interest] Tree walker exception handling
Message-ID: <EA52801A-4F1D-4CA3-8460-D4B62297CFB1@apple.com>

I'm developing a language that supports assignment:

foo = 125
bar = foo + 1

Obviously, I need to create a symbol table to hold all of the  
assignment operations, and then validate all symbols against that table.

 From what I can tell, I should be doing this in a tree walker pass.   
The problem I'm having is, what do I do when I find a logical versus  
syntactical error?  For example, when the user erroneously supplies a  
symbol that doesn't exist?

Right now, I'm just throwing a RecognitionException from within the  
relevant tree walker rule, and I have a @rulecatch which grabs this:

@rulecatch {
	catch ( RecognitionException e ) {
		System.exit( 0 );
	}
}

I call System.exit() because I don't want the exception stack frame  
printing out.  It would scare my users.

In the handler, I want to print out some useful information, like the  
name and line number of the undefined symbol.  Can I still get this  
lexer information from a tree walker?

Is it appropriate to use the RecognitionException for these kind of  
logical errors?  I'm almost wondering if I should create my own class  
of errors and then throw them as appropriate.

Cameron Esfahani
dirty at apple.com

"There are times in the life of a nation when the only place a decent  
man can find himself is in prison."



-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070522/4846e2fa/attachment-0001.html 

From antlr-list at arizona-software.ch  Tue May 22 22:26:16 2007
From: antlr-list at arizona-software.ch (Jean Bovet)
Date: Tue, 22 May 2007 22:26:16 -0700
Subject: [antlr-interest] AntlrWorks: CTRL+F10 not working anymore?
In-Reply-To: <e6dd5ba30705221218n3f3e9219t3c57e4d4057cec58@mail.gmail.com>
References: <e6dd5ba30705221218n3f3e9219t3c57e4d4057cec58@mail.gmail.com>
Message-ID: <61B61AA5-CEB9-46F2-9BA0-11D0F9621517@arizona-software.ch>

Apparently this shortcut is used to maximize the current window. I  
will have a look at it.

Regards,

Jean

On May 22, 2007, at 12:18 PM, Edson Tirelli wrote:

>
>    I just downloaded antlrWorks 1.0 final. The new MDI interface  
> looks good! On the other side, CTRL+F10 stopped working for me....  
> anyone else having this problem?
>
>    []s
>    Edson
>
>
> -- 
>   Edson Tirelli
>   Software Engineer - JBoss Rules Core Developer
>   Office: +55 11 3529-6000
>   Mobile: +55 11 9287-5646
>   JBoss, a division of Red Hat @ www.jboss.com

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070522/0ae45e99/attachment.html 

From pink at odahoda.de  Wed May 23 01:10:13 2007
From: pink at odahoda.de (Benjamin Niemann)
Date: Wed, 23 May 2007 10:10:13 +0200
Subject: [antlr-interest] Porting a runtime to Ada
References: <1179591637.7574.34.camel@rogue> <1179768182.7574.38.camel@rogue>
	<1179830053.7574.45.camel@rogue> <f2uiv4$23j$1@sea.gmane.org>
	<1179877091.7574.65.camel@rogue>
Message-ID: <f30st5$jk4$1@sea.gmane.org>

Luke A. Guest wrote:

> On Tue, 2007-05-22 at 13:08 +0200, Benjamin Niemann wrote:
> 
>> * I recommend building the ANTLR tool 'in place'. Do not create a jar or
>> compile/copy to a build directory. When you run it with 'java -cp
>> path-to-src-dir ...' it will use the original *.stg file, which you'll
>> edit a lot - so rebuilding the tool would be quite a PITA.
> 
> Hmm, I'm not all that up on Java - I have programmed in it a bit, so
> maybe you could explain how to do this?

cd src/
javac -d . org/antlr/Tool.java org/antlr/*/*.java org/antlr/*/*/*.java

This was before the Java runtime stuff has been moved to a seperate dir. I
haven't updated my Makefiles yet - you'll probably have to complile the
runtime first.

Then you'll find the .class files in the same directories as the .java
files. If you add the path to src/ to the classpath when invoking
org.antlr.Tool, Java will use these files and ANTLR looks for the templates
in src/org/antlr/codegen/templates/.. - where you can edit them directly.

-- 
Benjamin Niemann
Email: pink at odahoda dot de
WWW: http://pink.odahoda.de/


From dave at badgers-in-foil.co.uk  Wed May 23 03:12:44 2007
From: dave at badgers-in-foil.co.uk (David Holroyd)
Date: Wed, 23 May 2007 10:12:44 +0000
Subject: [antlr-interest] Free / Open JSON Grammar?
In-Reply-To: <200705221650.47228.rschulz@sonic.net>
References: <200705221650.47228.rschulz@sonic.net>
Message-ID: <20070523101243.GA19824@badgers-in-foil.co.uk>

On Tue, May 22, 2007 at 04:50:47PM -0700, Randall R Schulz wrote:
> I was sure this would be settled with a quick Google search, but instead 
> I've come up dry.
> 
> Does anyone know of or have to offer an ANTLR grammar (preferably for 
> ANTLR v3) for JSON?
> 
> Alternatively, a JavaScript / ECMAScript grammar from which I could 
> extract the literal data decoding productions would suffice.

I've got a grammar aimed at implementing ECMAScript4.

See the objectLiteral rule:

  http://svn.badgers-in-foil.co.uk/metaas/trunk/src/main/antlr/org/asdt/core/internal/antlr/AS3.g3

NB This is a grammar that I stole from another project, and I can no
longer remember which bits I've checked against the spec, and which I
haven't :)

Anyway, I hope that gives you a start.


ta,
dave

-- 
http://david.holroyd.me.uk/

From external.Atif.Abdul-Rahman at de.bosch.com  Wed May 23 05:01:36 2007
From: external.Atif.Abdul-Rahman at de.bosch.com (EXTERNAL Abdul-Rahman Atif (Praktikant;
	AE/PJM-WS))
Date: Wed, 23 May 2007 14:01:36 +0200
Subject: [antlr-interest] ANTLR 2.7.7 C# Parser fails WHILE ANTLR 2.7.7 Java
	Parser succeeds.....why?
In-Reply-To: <mailman.1262.1179879882.32543.antlr-interest@antlr.org>
Message-ID: <57ACD1F0B19791419C50E719D89401A3E37AD0@si-mail15.de.bosch.com>

Hi all, 

First of all, thank you for this wonderful tool. 

I have developed a working parser (in Java) for a specific text format
by using ANTLR 2.7.7.
However, when i change the target language in my grammar file from Java
to Csharp, I get a generated parser in C# which fails to parse the same
input file which was successfully parsed by the Java counterpart. 

I have tried to compare the generated codes for both Java and C# and
find them to be similar in behavior. First I thought there is some
problem with my input streams (due to diff. Java and C# Stream Libs.)
but I have tested that as well, I didnt find any problems there.

Here is my grammar file:
------------------------------------------------------------------------
--------------------------------------
options {
language = CSharp;
}


//-----------------------------------------------------THE PARSER
CODE--------------------------------------------------------------------
--//
class TestDICParser extends Parser;

options {

buildAST = true;
exportVocab = DIC;
}

//----------------------------singeLine.g-------------------------------
------------

dic : FIRSTLINE^ (COMMENT)+ chart (condition)* (data_item)* ;

chart : BEGIN_CHART^ singleLine_Chart ;
condition : BEGIN_CONDITION singleLine_Condition END_CONDITION;
data_item : BEGIN_DATAITEM^  singleLine_Dataitem END_DATAITEM;

singleLine_Condition : (NEWLINE)* NAME DATA_STRUCTURE
(SHORT_DESCRIPTION)?  definition  ;
singleLine_Dataitem :  (NEWLINE)* NAME USAGE_TYPE  DATA_STRUCTURE
(SHORT_DESCRIPTION)?   definition;
singleLine_Chart : (NAME! | COMMENT!)* (HTML_TAG)*  END_CHART ;

definition : START_DEFINITION (~(END_DEFINITION))* END_DEFINITION;

//-----------------------------------------------------THE LEXER
CODE------------------------------------------------------------
class TestDICLexer extends Lexer;

options
{
	k=6;
	filter=true;	
}

NAME : "name :" v:VALUESTRING {/*System.out.print(getText());
*/};//CONDITION AND DATAITEM BLOCKS
DATA_STRUCTURE :  "data_structure :" v:VALUESTRING
{/*System.out.print(getText()); */};//CONDITION AND DATAITEM BLOCKS 
USAGE_TYPE : "usage_type :" v:VALUESTRING
{/*System.out.print(getText()); */};//data item

protected NEWLINE : ('\n');
protected VALUESTRING :  (~('\n'))*  (NEWLINE); 
protected SHORT_DESCRIPTION_COMMENT : '\''!  (~('\''))* '\''! ;     

SHORT_DESCRIPTION : "short description : " NEWLINE ('\t'
SHORT_DESCRIPTION_COMMENT)? NEWLINE  ; 
START_DEFINITION :  "definition : " NEWLINE   VALUESTRING  ;

END_DEFINITION : "end definition" ;   
END_CHART  : "end chart";

protected HTML_TAG_START_SYMBOL : "<";
protected HTML_TAG_END_SYMBOL : ">";
protected TAG_TEXT : (~('<' | '>') )*;
protected HTML_TAG : HTML_TAG_START_SYMBOL tagname:TAG_TEXT
HTML_TAG_END_SYMBOL tagBody:TAG_TEXT HTML_TAG_START_SYMBOL  
			'/' tagnam1:TAG_TEXT   HTML_TAG_END_SYMBOL ; 

FIRSTLINE : "chart-file format version 4.2"  ;
COMMENT  : "--" (~('\n'))* ('\n')+ ; 

BEGIN_CHART : "chart :" ;

BEGIN_CONDITION : "condition :" ;	
END_CONDITION : "end condition" ;

BEGIN_DATAITEM : "data_item :" ;
END_DATAITEM : "end data_item" ;


------------------------------------------------------------------------
--------------------------------------------------


In the Csharp version, I always get an exception: unexpected token 'end
definition' .

I can't figure out what to check now. I have exhausted all options I
could think of. I am using antlr.bat provided with ANTLR 2.7.7 to
generate my parsers.

Regards, 
Atif Abdul-Rahman.


From external.Atif.Abdul-Rahman at de.bosch.com  Wed May 23 06:24:07 2007
From: external.Atif.Abdul-Rahman at de.bosch.com (EXTERNAL Abdul-Rahman Atif (Praktikant;
	AE/PJM-WS))
Date: Wed, 23 May 2007 15:24:07 +0200
Subject: [antlr-interest] ANTLR 2.7.7 C# Parser fails WHILE ANTLR 2.7.7
	Java Parser succeeds.....why?
Message-ID: <57ACD1F0B19791419C50E719D89401A3E37AD1@si-mail15.de.bosch.com>

Here are the trace files for both versions (C# and Java) of the Parser
on the input file:
As can be seen nearing the end of the traces, both parsers behave
differently!  I still can't figure out whats wrong here. Any assistance
is appreciated. 

Java Trace:
------------------------------------------------------------------------
------------------------------------------------------------------------
-----------------------------------------------------------
> dic;  > lexer mFIRSTLINE; c==c
 < lexer mFIRSTLINE; c==

LA(1)==chart-file format version 4.2
 > lexer mCOMMENT; c==-
 < lexer mCOMMENT; c==c
 > lexer mBEGIN_CHART; c==c
 < lexer mBEGIN_CHART; c==

  > chart; LA(1)==chart :
   > singleLine_Chart;  > lexer mNAME; c==n
  > lexer mVALUESTRING; c== 
   > lexer mNEWLINE; c==

   < lexer mNEWLINE; c==	
  < lexer mVALUESTRING; c==	
 < lexer mNAME; c==	
LA(1)==name : GLOBALS_FCM

 > lexer mUSAGE_TYPE; c==u
 < lexer mUSAGE_TYPE; c== 
 > lexer mCOMMENT; c==-
 < lexer mCOMMENT; c==	
 > lexer mUSAGE_TYPE; c==u
 < lexer mUSAGE_TYPE; c==e
 > lexer mCOMMENT; c==-
 < lexer mCOMMENT; c==	
 > lexer mSHORT_DESCRIPTION; c==s
 < lexer mSHORT_DESCRIPTION; c==c
 > lexer mSHORT_DESCRIPTION; c==s
 < lexer mSHORT_DESCRIPTION; c==t
 > lexer mUSAGE_TYPE; c==u
 < lexer mUSAGE_TYPE; c==e
 > lexer mSHORT_DESCRIPTION; c==s
 < lexer mSHORT_DESCRIPTION; c== 
 > lexer mNAME; c==n
 < lexer mNAME; c==g
 > lexer mUSAGE_TYPE; c==u
 < lexer mUSAGE_TYPE; c== 
 > lexer mUSAGE_TYPE; c==u
 < lexer mUSAGE_TYPE; c==g
 > lexer mUSAGE_TYPE; c==u
 < lexer mUSAGE_TYPE; c==e
 > lexer mNAME; c==n
  > lexer mVALUESTRING; c== 
   > lexer mNEWLINE; c==

   < lexer mNEWLINE; c==v
  < lexer mVALUESTRING; c==v
 < lexer mNAME; c==v
 > lexer mSHORT_DESCRIPTION; c==s
 < lexer mSHORT_DESCRIPTION; c==i
 > lexer mNAME; c==n
 < lexer mNAME; c== 
 > lexer mSTART_DEFINITION; c==d
 < lexer mSTART_DEFINITION; c==s
 > lexer mNAME; c==n
 < lexer mNAME; c== 
 > lexer mCOMMENT; c==-
 < lexer mCOMMENT; c==I
 > lexer mNAME; c==n
 < lexer mNAME; c== 
 > lexer mSHORT_DESCRIPTION; c==s
 < lexer mSHORT_DESCRIPTION; c==)
 > lexer mBEGIN_CONDITION; c==c
 < lexer mBEGIN_CONDITION; c==p
 > lexer mNAME; c==n
 < lexer mNAME; c==o
 > lexer mSHORT_DESCRIPTION; c==s
 < lexer mSHORT_DESCRIPTION; c==t
 > lexer mSHORT_DESCRIPTION; c==s
 < lexer mSHORT_DESCRIPTION; c==

 > lexer mEND_DEFINITION; c==e
 < lexer mEND_DEFINITION; c==s
 > lexer mNAME; c==n
 < lexer mNAME; c==

 > lexer mEND_CHART; c==e
 < lexer mEND_CHART; c==n
 > lexer mEND_CHART; c==e
 < lexer mEND_CHART; c==

   < singleLine_Chart;  > lexer mBEGIN_CONDITION; c==c
 < lexer mBEGIN_CONDITION; c==

LA(1)==condition :
  < chart; LA(1)==condition :
  > condition; LA(1)==condition :
   > singleLine_Condition;  > lexer mNAME; c==n
  > lexer mVALUESTRING; c== 
   > lexer mNEWLINE; c==

   < lexer mNEWLINE; c==	
  < lexer mVALUESTRING; c==	
 < lexer mNAME; c==	
LA(1)==name : C_B_ENABLE_UBAT_COMP

 > lexer mDATA_STRUCTURE; c==d
  > lexer mVALUESTRING; c== 
   > lexer mNEWLINE; c==

   < lexer mNEWLINE; c==	
  < lexer mVALUESTRING; c==	
 < lexer mDATA_STRUCTURE; c==	
 > lexer mSHORT_DESCRIPTION; c==s
  > lexer mNEWLINE; c==

  < lexer mNEWLINE; c==	
  > lexer mSHORT_DESCRIPTION_COMMENT; c=='
  < lexer mSHORT_DESCRIPTION_COMMENT; c==

  > lexer mNEWLINE; c==

  < lexer mNEWLINE; c==	
 < lexer mSHORT_DESCRIPTION; c==	
    > definition;  > lexer mSTART_DEFINITION; c==d
  > lexer mNEWLINE; c==

  < lexer mNEWLINE; c==t
  > lexer mVALUESTRING; c==t
   > lexer mNEWLINE; c==

   < lexer mNEWLINE; c==	
  < lexer mVALUESTRING; c==	
 < lexer mSTART_DEFINITION; c==	
LA(1)==definition : 
true

 > lexer mEND_DEFINITION; c==e
 < lexer mEND_DEFINITION; c==

    < definition;  > lexer mEND_CONDITION; c==e
 < lexer mEND_CONDITION; c==

LA(1)==end condition
   < singleLine_Condition; LA(1)==end condition
  < condition; LA(1)==null
 < dic; LA(1)==null






C# Trace
------------------------------------------------------------------------
------------------------------------------------------
 > dic;  > lexer mFIRSTLINE; c==c
 < lexer mFIRSTLINE; c== LA(1)==chart-file format version 4.2
 > lexer mCOMMENT; c==-
 < lexer mCOMMENT; c==c
 > lexer mBEGIN_CHART; c==c
 < lexer mBEGIN_CHART; c==   > chart; LA(1)==chart :
   > singleLine_Chart;  > lexer mNAME; c==n
  > lexer mVALUESTRING; c== 
   > lexer mNEWLINE; c==

   < lexer mNEWLINE; c==	
  < lexer mVALUESTRING; c==	
 < lexer mNAME; c==	
LA(1)==name : GLOBALS_FCM

 > lexer mUSAGE_TYPE; c==u
 < lexer mUSAGE_TYPE; c== 
 > lexer mCOMMENT; c==-
 < lexer mCOMMENT; c==	
 > lexer mUSAGE_TYPE; c==u
 < lexer mUSAGE_TYPE; c==e
 > lexer mCOMMENT; c==-
 < lexer mCOMMENT; c==	
 > lexer mSHORT_DESCRIPTION; c==s
 < lexer mSHORT_DESCRIPTION; c==c
 > lexer mSHORT_DESCRIPTION; c==s
 < lexer mSHORT_DESCRIPTION; c==t
 > lexer mUSAGE_TYPE; c==u
 < lexer mUSAGE_TYPE; c==e
 > lexer mSHORT_DESCRIPTION; c==s
 < lexer mSHORT_DESCRIPTION; c== 
 > lexer mNAME; c==n
 < lexer mNAME; c==g
 > lexer mUSAGE_TYPE; c==u
 < lexer mUSAGE_TYPE; c== 
 > lexer mUSAGE_TYPE; c==u
 < lexer mUSAGE_TYPE; c==g
 > lexer mUSAGE_TYPE; c==u
 < lexer mUSAGE_TYPE; c==e
 > lexer mNAME; c==n
  > lexer mVALUESTRING; c== 
   > lexer mNEWLINE; c==

   < lexer mNEWLINE; c==v
  < lexer mVALUESTRING; c==v
 < lexer mNAME; c==v
 > lexer mSHORT_DESCRIPTION; c==s
 < lexer mSHORT_DESCRIPTION; c==i
 > lexer mNAME; c==n
 < lexer mNAME; c== 
 > lexer mSTART_DEFINITION; c==d
 < lexer mSTART_DEFINITION; c==s
 > lexer mNAME; c==n
 < lexer mNAME; c== 
 > lexer mCOMMENT; c==-
 < lexer mCOMMENT; c==I
 > lexer mNAME; c==n
 < lexer mNAME; c== 
 > lexer mSHORT_DESCRIPTION; c==s
 < lexer mSHORT_DESCRIPTION; c==)
 > lexer mBEGIN_CONDITION; c==c
 < lexer mBEGIN_CONDITION; c==p
 > lexer mNAME; c==n
 < lexer mNAME; c==o
 > lexer mSHORT_DESCRIPTION; c==s
 < lexer mSHORT_DESCRIPTION; c==t
 > lexer mSHORT_DESCRIPTION; c==s
 < lexer mSHORT_DESCRIPTION; c==  > lexer mEND_DEFINITION; c==e
 < lexer mEND_DEFINITION; c==s
 > lexer mNAME; c==n
 < lexer mNAME; c==  > lexer mEND_CHART; c==e
 < lexer mEND_CHART; c==n
 > lexer mEND_CHART; c==e
 < lexer mEND_CHART; c==    < singleLine_Chart;  > lexer
mBEGIN_CONDITION; c==c
 < lexer mBEGIN_CONDITION; c== LA(1)==condition :
  < chart; LA(1)==condition :
  > condition; LA(1)==condition :
   > singleLine_Condition;  > lexer mNAME; c==n
  > lexer mVALUESTRING; c== 
   > lexer mNEWLINE; c==

   < lexer mNEWLINE; c==	
  < lexer mVALUESTRING; c==	
 < lexer mNAME; c==	
LA(1)==name : C_B_ENABLE_UBAT_COMP

 > lexer mDATA_STRUCTURE; c==d
  > lexer mVALUESTRING; c== 
   > lexer mNEWLINE; c==

   < lexer mNEWLINE; c==	
  < lexer mVALUESTRING; c==	
 < lexer mDATA_STRUCTURE; c==	
 > lexer mSHORT_DESCRIPTION; c==s
  > lexer mNEWLINE; c==   < lexer mNEWLINE; c==  < lexer
mSHORT_DESCRIPTION; c==  > lexer mNAME; c==n
 < lexer mNAME; c==s
 > lexer mNAME; c==n
 < lexer mNAME; c==t
 > lexer mNAME; c==n
 < lexer mNAME; c==b
 > lexer mNAME; c==n
 < lexer mNAME; c==s
 > lexer mNAME; c==n
 < lexer mNAME; c=='
 > lexer mSTART_DEFINITION; c==d
  > lexer mNEWLINE; c==   < lexer mNEWLINE; c==  < lexer
mSTART_DEFINITION; c==  > lexer mUSAGE_TYPE; c==u
 < lexer mUSAGE_TYPE; c==e
 > lexer mEND_DEFINITION; c==e
 < lexer mEND_DEFINITION; c==  > lexer mEND_CONDITION; c==e
 < lexer mEND_CONDITION; c==?
   < singleLine_Condition; LA(1)==end condition
  < condition; LA(1)==
 < dic; LA(1)==
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070523/b2895239/attachment-0001.html 

From rschulz at sonic.net  Wed May 23 06:47:32 2007
From: rschulz at sonic.net (Randall R Schulz)
Date: Wed, 23 May 2007 06:47:32 -0700
Subject: [antlr-interest] Free / Open JSON Grammar?
In-Reply-To: <20070523101243.GA19824@badgers-in-foil.co.uk>
References: <200705221650.47228.rschulz@sonic.net>
	<20070523101243.GA19824@badgers-in-foil.co.uk>
Message-ID: <200705230647.32862.rschulz@sonic.net>

David,

On Wednesday 23 May 2007 03:12, David Holroyd wrote:
> On Tue, May 22, 2007 at 04:50:47PM -0700, Randall R Schulz wrote:
> > ...
> >
> > Does anyone know of or have to offer an ANTLR grammar (preferably
> > for ANTLR v3) for JSON?
> >
> > Alternatively, a JavaScript / ECMAScript grammar from which I could
> > extract the literal data decoding productions would suffice.
>
> I've got a grammar aimed at implementing ECMAScript4.
>
> See the objectLiteral rule:
> 
http://svn.badgers-in-foil.co.uk/metaas/trunk/src/main/antlr/org/asdt/core/internal/antlr/AS3.g3
>
> NB This is a grammar that I stole from another project, and I can no
> longer remember which bits I've checked against the spec, and which I
> haven't :)

That shouldn't be a big problem, since if I use it, it will be in a form 
stripped down to the point of recognizing only the JSON data exchange 
format.


> Anyway, I hope that gives you a start.

Thanks. That should do nicely.


> ta,
> dave


Randall Schulz

From paul at paulkeir.com  Wed May 23 08:42:39 2007
From: paul at paulkeir.com (Paul Keir)
Date: Wed, 23 May 2007 16:42:39 +0100
Subject: [antlr-interest] Debugging CMinus example in Antlrworks
Message-ID: <465460EF.2040306@paulkeir.com>

Hi,

When I debug the Cminus example in the fantastic Antlrworks, it halts at 
the 'type' rule, matched by the example input file's first line; 'char c;'.

The output pane displays errors relating to stringtemplate; the last one 
being:

Exception in thread "main" java.lang.IllegalArgumentException: Can't 
find template type_char.st
...

Can I configure Antlrworks to use stringtemplate, to allow the debugging 
of this example?

Best regards,
Paul


-- 
512k Broadband ?14.99 per month
Unlimited Downloads - No extra Costs
?14.99 per month (inc. VAT)
Order Now www.adsl4less.com

From open.zone at virgin.net  Wed May 23 10:12:35 2007
From: open.zone at virgin.net (Micheal J)
Date: Wed, 23 May 2007 18:12:35 +0100
Subject: [antlr-interest] ANTLR 2.7.7 C# Parser fails WHILE ANTLR 2.7.7
	JavaParser succeeds.....why?
In-Reply-To: <57ACD1F0B19791419C50E719D89401A3E37AD0@si-mail15.de.bosch.com>
Message-ID: <001e01c79d5d$9292c4c0$c704a8c0@hercules>

Hi,

> Hi all, 
> 
> First of all, thank you for this wonderful tool. 
> 
> I have developed a working parser (in Java) for a specific 
> text format by using ANTLR 2.7.7. However, when i change the 
> target language in my grammar file from Java to Csharp, I get 
> a generated parser in C# which fails to parse the same input 
> file which was successfully parsed by the Java counterpart. 
> 
> I have tried to compare the generated codes for both Java and 
> C# and find them to be similar in behavior. First I thought 
> there is some problem with my input streams (due to diff. 
> Java and C# Stream Libs.) but I have tested that as well, I 
> didnt find any problems there.
> 
> Here is my grammar file:

<SNIP>

> In the Csharp version, I always get an exception: unexpected 
> token 'end definition' .
> 
> I can't figure out what to check now. I have exhausted all 
> options I could think of. I am using antlr.bat provided with 
> ANTLR 2.7.7 to generate my parsers.
> 
> Regards, 
> Atif Abdul-Rahman.

Can you attach the input file(s) in question plus the grammar file?

Micheal


-----------------------
The best way to contact me is via the list/forum. My time is very limited.


From collin.vandyck at hannonhill.com  Wed May 23 11:26:16 2007
From: collin.vandyck at hannonhill.com (Collin VanDyck)
Date: Wed, 23 May 2007 14:26:16 -0400
Subject: [antlr-interest] Is ANTLR suitable for wiki grammar parsing?
Message-ID: <7614BAE6-25E0-425F-BBC9-2E3D01B401DC@hannonhill.com>

Hello

I'm trying to evaluate ANTLR to determine whether or not it would be  
a good fit for a wiki that we're currently developing.

Essentially, the question boils down to how elegantly it would handle  
a wide variety of somewhat unstructured input.  In other words, users  
are going to be entering in rather freeform content (i.e. copying and  
pasting form Word or some other character source), and I want ANTLR  
to be able to accept all of the input but match special sequences.

An example of this would be:

"This is some *bold* wiki content that might also be _underlined_ in  
places"

The special rules would simply output each character that doesn't  
fall into a special rule, and then to recognize *bold* and  
_underlined_ specially.

I've written a small ANTLR grammar which is able to parse this, but  
fails pretty quickly when you do things like:

"This is some *irregular** input_"

In the latter case, I'd really just like for the first *irregular* to  
be parsed as a bolded word, and since the other characters don't have  
closing symbols, to be able to just treat them as fairly regular  
characters like 'a', 'b', 'c', etc.

Is it possible and reasonable to use ANTLR for this purpose?  Can I  
create a grammar which will accept ANYTHING, and simply be able to  
parse out the bits and pieces that are interesting?

I'm pasting in the grammar I created.  I apologize in advance for the  
incorrectness of it.

-Collin

------------------

grammar WikiGrammar;

wiki
	: phrase+
	;

phrase
	: bolded
	| underlined
	| anychars
	;
	
bolded
	: ASTERISK phrase ASTERISK
	;
	
underlined
	: UNDERSCORE phrase UNDERSCORE
	;
	
anychars
	: (CHAR)+
	;

UNDERSCORE
	: '_'
	;	

ASTERISK
	: '*'
	;
	
CHAR
	: .
	;






From open.zone at virgin.net  Wed May 23 11:55:36 2007
From: open.zone at virgin.net (Micheal J)
Date: Wed, 23 May 2007 19:55:36 +0100
Subject: [antlr-interest] Is ANTLR suitable for wiki grammar parsing?
In-Reply-To: <7614BAE6-25E0-425F-BBC9-2E3D01B401DC@hannonhill.com>
Message-ID: <002a01c79d6b$f4037fc0$c704a8c0@hercules>

Hi,


> I'm trying to evaluate ANTLR to determine whether or not it would be  
> a good fit for a wiki that we're currently developing.
> 
> Essentially, the question boils down to how elegantly it 
> would handle  
> a wide variety of somewhat unstructured input.  In other 
> words, users  
> are going to be entering in rather freeform content (i.e. 
> copying and  
> pasting form Word or some other character source), and I want ANTLR  
> to be able to accept all of the input but match special sequences.

This is similar to the way StringTemplate treats the contents of template
files. So, yes. I think ANTLR would handle it fine.

I haven't looked at your  grammar yet (no time atm) but others may be able
to comment directly on it.


Micheal


-----------------------
The best way to contact me is via the list/forum. My time is very limited.


From ma_laver at ciise.concordia.ca  Wed May 23 12:16:29 2007
From: ma_laver at ciise.concordia.ca (=?UTF-8?B?TWFyYy1BbmRyw6kgTGF2ZXJkacOocmU=?=)
Date: Wed, 23 May 2007 15:16:29 -0400
Subject: [antlr-interest] Is ANTLR suitable for wiki grammar parsing?
In-Reply-To: <7614BAE6-25E0-425F-BBC9-2E3D01B401DC@hannonhill.com>
References: <7614BAE6-25E0-425F-BBC9-2E3D01B401DC@hannonhill.com>
Message-ID: <4654930D.8060608@ciise.concordia.ca>

Hello,

It is noteworthy to mention that my mail client (Mozilla Thunderbird) 
deals with it very well. Maybe having a look at their source could be 
useful (don't ask me where precisely though!).

I see that you don't define any whitespace in your grammar. Maybe 
dealing with the input line by line could make things simpler?

What about enabling backtracking? Why not define a non-greedy (.)+ rule 
for anychars? I think the latter would match when the other rules don't. 
I'm not sure 100%, but it is my impression that the generated parser 
behaves a bit differently than when its in a different rule.

Tell me what that gives:

  phrase
      : bolded
      | underlined
      | ( options {greedy=false;} : .)+ ;
      ;

MA

Collin VanDyck wrote:
> Hello
> 
> I'm trying to evaluate ANTLR to determine whether or not it would be a 
> good fit for a wiki that we're currently developing.
> 
> Essentially, the question boils down to how elegantly it would handle a 
> wide variety of somewhat unstructured input.  In other words, users are 
> going to be entering in rather freeform content (i.e. copying and 
> pasting form Word or some other character source), and I want ANTLR to 
> be able to accept all of the input but match special sequences.
> 
> An example of this would be:
> 
> "This is some *bold* wiki content that might also be _underlined_ in 
> places"
> 
> The special rules would simply output each character that doesn't fall 
> into a special rule, and then to recognize *bold* and _underlined_ 
> specially.
> 
> I've written a small ANTLR grammar which is able to parse this, but 
> fails pretty quickly when you do things like:
> 
> "This is some *irregular** input_"
> 
> In the latter case, I'd really just like for the first *irregular* to be 
> parsed as a bolded word, and since the other characters don't have 
> closing symbols, to be able to just treat them as fairly regular 
> characters like 'a', 'b', 'c', etc.
> 
> Is it possible and reasonable to use ANTLR for this purpose?  Can I 
> create a grammar which will accept ANYTHING, and simply be able to parse 
> out the bits and pieces that are interesting?
> 
> I'm pasting in the grammar I created.  I apologize in advance for the 
> incorrectness of it.
> 
> -Collin
> 
> ------------------
> 
> grammar WikiGrammar;
> 
> wiki
>     : phrase+
>     ;
> 
> phrase
>     : bolded
>     | underlined
>     | anychars
>     ;
>     
> bolded
>     : ASTERISK phrase ASTERISK
>     ;
>     
> underlined
>     : UNDERSCORE phrase UNDERSCORE
>     ;
>     
> anychars
>     : (CHAR)+
>     ;
> 
> UNDERSCORE
>     : '_'
>     ;   
> 
> ASTERISK
>     : '*'
>     ;
>     
> CHAR
>     : .
>     ;
> 
> 
> 
> 

-- 
Marc-Andr? LAVERDI?RE, B. Eng., M. A. Sc. (in progress)
Computer Security Laboratory - Laboratoire de s?curit? informatique
CIISE, Universit? Concordia University, Montr?al, Qu?bec, Canada
www.ciise.concordia.ca

/"\
\ /    ASCII Ribbon Campaign
  X      against HTML e-mail
/ \

"Perseverance must finish its work so that you may be mature and 
complete, not lacking anything." -James 1:4


From jimi at temporal-wave.com  Wed May 23 14:24:45 2007
From: jimi at temporal-wave.com (Jim Idle)
Date: Wed, 23 May 2007 14:24:45 -0700
Subject: [antlr-interest] Is ANTLR suitable for wiki grammar parsing?
In-Reply-To: <4654930D.8060608@ciise.concordia.ca>
References: <7614BAE6-25E0-425F-BBC9-2E3D01B401DC@hannonhill.com>
	<4654930D.8060608@ciise.concordia.ca>
Message-ID: <B36CCC332A32904F8FA3DE134A2353362525BE@wavemachine.temporal-wave.com>

As this is seemingly completely context insensitive, could you not just did this with a filtering lexer? Or perhaps a rewritetokenstream


Jim

> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of Marc-Andr? Laverdi?re
> Sent: Wednesday, May 23, 2007 12:16 PM
> To: Collin VanDyck
> Cc: antlr-interest at antlr.org
> Subject: Re: [antlr-interest] Is ANTLR suitable for wiki grammar
> parsing?
> 
> Hello,
> 
> It is noteworthy to mention that my mail client (Mozilla Thunderbird)
> deals with it very well. Maybe having a look at their source could be
> useful (don't ask me where precisely though!).
> 
> I see that you don't define any whitespace in your grammar. Maybe
> dealing with the input line by line could make things simpler?
> 
> What about enabling backtracking? Why not define a non-greedy (.)+ rule
> for anychars? I think the latter would match when the other rules
> don't.
> I'm not sure 100%, but it is my impression that the generated parser
> behaves a bit differently than when its in a different rule.
> 
> Tell me what that gives:
> 
>   phrase
>       : bolded
>       | underlined
>       | ( options {greedy=false;} : .)+ ;
>       ;
> 
> MA
> 
> Collin VanDyck wrote:
> > Hello
> >
> > I'm trying to evaluate ANTLR to determine whether or not it would be
> a
> > good fit for a wiki that we're currently developing.
> >
> > Essentially, the question boils down to how elegantly it would handle
> a
> > wide variety of somewhat unstructured input.  In other words, users
> are
> > going to be entering in rather freeform content (i.e. copying and
> > pasting form Word or some other character source), and I want ANTLR
> to
> > be able to accept all of the input but match special sequences.
> >
> > An example of this would be:
> >
> > "This is some *bold* wiki content that might also be _underlined_ in
> > places"
> >
> > The special rules would simply output each character that doesn't
> fall
> > into a special rule, and then to recognize *bold* and _underlined_
> > specially.
> >
> > I've written a small ANTLR grammar which is able to parse this, but
> > fails pretty quickly when you do things like:
> >
> > "This is some *irregular** input_"
> >
> > In the latter case, I'd really just like for the first *irregular* to
> be
> > parsed as a bolded word, and since the other characters don't have
> > closing symbols, to be able to just treat them as fairly regular
> > characters like 'a', 'b', 'c', etc.
> >
> > Is it possible and reasonable to use ANTLR for this purpose?  Can I
> > create a grammar which will accept ANYTHING, and simply be able to
> parse
> > out the bits and pieces that are interesting?
> >
> > I'm pasting in the grammar I created.  I apologize in advance for the
> > incorrectness of it.
> >
> > -Collin
> >
> > ------------------
> >
> > grammar WikiGrammar;
> >
> > wiki
> >     : phrase+
> >     ;
> >
> > phrase
> >     : bolded
> >     | underlined
> >     | anychars
> >     ;
> >
> > bolded
> >     : ASTERISK phrase ASTERISK
> >     ;
> >
> > underlined
> >     : UNDERSCORE phrase UNDERSCORE
> >     ;
> >
> > anychars
> >     : (CHAR)+
> >     ;
> >
> > UNDERSCORE
> >     : '_'
> >     ;
> >
> > ASTERISK
> >     : '*'
> >     ;
> >
> > CHAR
> >     : .
> >     ;
> >
> >
> >
> >
> 
> --
> Marc-Andr? LAVERDI?RE, B. Eng., M. A. Sc. (in progress)
> Computer Security Laboratory - Laboratoire de s?curit? informatique
> CIISE, Universit? Concordia University, Montr?al, Qu?bec, Canada
> www.ciise.concordia.ca
> 
> /"\
> \ /    ASCII Ribbon Campaign
>   X      against HTML e-mail
> / \
> 
> "Perseverance must finish its work so that you may be mature and
> complete, not lacking anything." -James 1:4


From Simon.Fairall at optus.com.au  Wed May 23 19:12:50 2007
From: Simon.Fairall at optus.com.au (Simon Fairall (Alphawest))
Date: Thu, 24 May 2007 12:12:50 +1000
Subject: [antlr-interest] Problem running debugger in Antlrworks 1.0
Message-ID: <F1BE74C0ED81A943AFEC40C5EC3A380401E84649@socw2ke002.optus.com.au>

I have been trying to get the debugger to work in Antlrworks with no
success. I am using a PC with Windows Vista and jdk 1.6.

 

To simplify the testing I am using the Expr example . When I select the
debugger, the code is generated and compiled but the process is never
able to connect to the parser. The output of netstat -na would indicate
that the debugger port is listening during the connect phase. The
console for the Antlrworks session shows a warning on the compile then
java.net.connectException (repeats) during the connection phase.

 

Has anyone had this problem and been able to solve it? Alternatively,
does anyone have any instructions on how to execute the compiled parser
test code directly?

 

Regards,

 

Simon Fairall

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070524/949e4ff4/attachment.html 

From external.Atif.Abdul-Rahman at de.bosch.com  Thu May 24 01:56:35 2007
From: external.Atif.Abdul-Rahman at de.bosch.com (EXTERNAL Abdul-Rahman Atif (Praktikant;
	AE/PJM-WS))
Date: Thu, 24 May 2007 10:56:35 +0200
Subject: [antlr-interest] ANTLR 2.7.7 C# Parser fails WHILE ANTLR 2.7.7
	JavaParser
In-Reply-To: <mailman.1.1179946802.8963.antlr-interest@antlr.org>
Message-ID: <57ACD1F0B19791419C50E719D89401A3E37AD3@si-mail15.de.bosch.com>

Hi, 
Here is the input file:
------------------------------------------------------------------------
----- 
chart-file format version 4.2
-- Auto MicroC version 3.3.1
chart :
	name : abcde
	type : abcde
	usage : abcde
	created : abcde
	creator : abcde
	modified : abcde
	scale with zoom : NO
	arrow style : abcde
	used_gds : 
	change :
time : 1092314866
date : Date: Thu Aug 12 14:47:46 2004
user_name : User: kom2bue
version : New
description :
	Check-In Chart(s):
	copy of GLOBALS_FCM4_DC_520W from diagnostics
end description
	end change
	change :
time : 1092999707
date : Date: Fri Aug 20 13:01:47 2004
user_name : User: kom2bue
version : n
description :
	Check-In Chart(s):
	first draw, not optimized and tested
	just for splitting in SW-Group
end description
	end change
condition :
	name : C_B_ENABLE_UBAT_TV_CHAR_HYST
	data_structure : SINGLE
	short description : 
	'UBAT_COMP: Constant enable bit for Mask TV_Ubat at 100% with
Hyst'
	definition : 
true
	end definition
end condition

condition :
	name : C_B_ENABLE_TV_IN_HIGH_RES
	data_structure : SINGLE
	short description : 
	'PWM_CALC: Constant enable bit for TV_IN resolution < (+/-0,5%)
(else +/-1%)'
	definition : 
false
	end definition
end condition
data_item :
	name : C_SCI_FOR_EMC_PRESCALER_LOAD
	usage_type : CONSTANT
	data_structure : SINGLE
	short description : 
	'SCI_FOR_EMC: Prescaler for sending EMC_VECTOR'
	definition : 
/* 20ms */
1
	end definition
end data_item
------------------------------------------------------------------------
-----

And grammar file is here:
http://www.antlr.org/pipermail/antlr-interest/2007-May/020827.html

Regards,
Atif.

----------------------------------------
Message: 3
Date: Wed, 23 May 2007 18:12:35 +0100
From: "Micheal J" <open.zone at virgin.net>
Subject: Re: [antlr-interest] ANTLR 2.7.7 C# Parser fails WHILE ANTLR
	2.7.7	JavaParser succeeds.....why?
To: <antlr-interest at antlr.org>
Message-ID: <001e01c79d5d$9292c4c0$c704a8c0 at hercules>
Content-Type: text/plain;	charset="us-ascii"

Hi,

> Hi all, 
> 
> First of all, thank you for this wonderful tool. 
> 
> I have developed a working parser (in Java) for a specific 
> text format by using ANTLR 2.7.7. However, when i change the 
> target language in my grammar file from Java to Csharp, I get 
> a generated parser in C# which fails to parse the same input 
> file which was successfully parsed by the Java counterpart. 
> 
> I have tried to compare the generated codes for both Java and 
> C# and find them to be similar in behavior. First I thought 
> there is some problem with my input streams (due to diff. 
> Java and C# Stream Libs.) but I have tested that as well, I 
> didnt find any problems there.
> 
> Here is my grammar file:

<SNIP>

> In the Csharp version, I always get an exception: unexpected 
> token 'end definition' .
> 
> I can't figure out what to check now. I have exhausted all 
> options I could think of. I am using antlr.bat provided with 
> ANTLR 2.7.7 to generate my parsers.
> 
> Regards, 
> Atif Abdul-Rahman.

Can you attach the input file(s) in question plus the grammar file?

Micheal


-----------------------
The best way to contact me is via the list/forum. My time is very
limited.


From harsha.nagesh at credit-suisse.com  Thu May 24 05:28:45 2007
From: harsha.nagesh at credit-suisse.com (Nagesh, Harsha)
Date: Thu, 24 May 2007 08:28:45 -0400
Subject: [antlr-interest] excel formula grammar
Message-ID: <2C28FF0D4B055343B1AEFFE32812310DE692A7@enyc12p32001.corpny.csfb.com>

Hi,
    I am wondering if anybody can share this or can point me to where I could find one ? I want to parse excel formula and as a first step pretty print it.
 
Thanks
Harsha
 

==============================================================================
Please access the attached hyperlink for an important electronic communications disclaimer: 

http://www.credit-suisse.com/legal/en/disclaimer_email_ib.html
==============================================================================
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070524/5ed2d426/attachment.html 

From ssiegel at finjan.com  Thu May 24 05:56:57 2007
From: ssiegel at finjan.com (Shmuel Siegel)
Date: Thu, 24 May 2007 15:56:57 +0300
Subject: [antlr-interest] Problem running debugger in Antlrworks 1.0
In-Reply-To: <F1BE74C0ED81A943AFEC40C5EC3A380401E84649@socw2ke002.optus.com.au>
References: <F1BE74C0ED81A943AFEC40C5EC3A380401E84649@socw2ke002.optus.com.au>
Message-ID: <E344C433F006AB45A306D422F9C3EB4C01EBFE09@exmail1.finjan.com>

I have only been able to get the debugger to work if the grammar doesn't
use packages.

 

________________________________

From: antlr-interest-bounces at antlr.org
[mailto:antlr-interest-bounces at antlr.org] On Behalf Of Simon Fairall
(Alphawest)
Sent: Thursday, May 24, 2007 5:13 AM
To: antlr-interest at antlr.org
Subject: [antlr-interest] Problem running debugger in Antlrworks 1.0

 

I have been trying to get the debugger to work in Antlrworks with no
success. I am using a PC with Windows Vista and jdk 1.6.

 

To simplify the testing I am using the Expr example . When I select the
debugger, the code is generated and compiled but the process is never
able to connect to the parser. The output of netstat -na would indicate
that the debugger port is listening during the connect phase. The
console for the Antlrworks session shows a warning on the compile then
java.net.connectException (repeats) during the connection phase.

 

Has anyone had this problem and been able to solve it? Alternatively,
does anyone have any instructions on how to execute the compiled parser
test code directly?

 

Regards,

 

Simon Fairall

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070524/733f5525/attachment-0001.html 

From miguel.ping at gmail.com  Thu May 24 06:25:04 2007
From: miguel.ping at gmail.com (Miguel Ping)
Date: Thu, 24 May 2007 14:25:04 +0100
Subject: [antlr-interest] Problem running debugger in Antlrworks 1.0
In-Reply-To: <E344C433F006AB45A306D422F9C3EB4C01EBFE09@exmail1.finjan.com>
References: <F1BE74C0ED81A943AFEC40C5EC3A380401E84649@socw2ke002.optus.com.au>
	<E344C433F006AB45A306D422F9C3EB4C01EBFE09@exmail1.finjan.com>
Message-ID: <ab0bf2c00705240625x6e2d6db9k82f4f1f4d04eb5e1@mail.gmail.com>

Hi,

Try to generate your source with debug flag. Your class will extend
DebugParser instead of parser.

Then all you need is to run you grammar, it will wait for a socket
connection of a debugger client. Next connect using remote connection
in antlrworks, where the host is localhost and the port is probably
the default.

Hope it helps,
Miguel Ping

On 5/24/07, Shmuel Siegel <ssiegel at finjan.com> wrote:
> I have only been able to get the debugger to work if the grammar doesn't
> use packages.
>
>
>
> ________________________________
>
> From: antlr-interest-bounces at antlr.org
> [mailto:antlr-interest-bounces at antlr.org] On Behalf Of Simon Fairall
> (Alphawest)
> Sent: Thursday, May 24, 2007 5:13 AM
> To: antlr-interest at antlr.org
> Subject: [antlr-interest] Problem running debugger in Antlrworks 1.0
>
>
>
> I have been trying to get the debugger to work in Antlrworks with no
> success. I am using a PC with Windows Vista and jdk 1.6.
>
>
>
> To simplify the testing I am using the Expr example . When I select the
> debugger, the code is generated and compiled but the process is never
> able to connect to the parser. The output of netstat -na would indicate
> that the debugger port is listening during the connect phase. The
> console for the Antlrworks session shows a warning on the compile then
> java.net.connectException (repeats) during the connection phase.
>
>
>
> Has anyone had this problem and been able to solve it? Alternatively,
> does anyone have any instructions on how to execute the compiled parser
> test code directly?
>
>
>
> Regards,
>
>
>
> Simon Fairall
>
>

From imus at linuxmail.org  Thu May 24 06:47:48 2007
From: imus at linuxmail.org (Isabelle Muszynski)
Date: Thu, 24 May 2007 21:47:48 +0800
Subject: [antlr-interest] Problem running debugger in Antlrworks 1.0
Message-ID: <20070524134748.E34E07AF01@ws5-10.us4.outblaze.com>

It could also be that an old connection is still open. Look at running processes, and if a debugger connection is still open, 
kill it.

Isabelle
> ----- Original Message -----
> From: "Shmuel Siegel" <ssiegel at finjan.com>
> To: "Simon Fairall (Alphawest)" <Simon.Fairall at optus.com.au>, antlr-interest at antlr.org
> Subject: Re: [antlr-interest] Problem running debugger in Antlrworks 1.0
> Date: Thu, 24 May 2007 15:56:57 +0300
> 
> 
> I have only been able to get the debugger to work if the grammar doesn't
> use packages.
> 
> 
> 
> ________________________________
> 
> From: antlr-interest-bounces at antlr.org
> [mailto:antlr-interest-bounces at antlr.org] On Behalf Of Simon Fairall
> (Alphawest)
> Sent: Thursday, May 24, 2007 5:13 AM
> To: antlr-interest at antlr.org
> Subject: [antlr-interest] Problem running debugger in Antlrworks 1.0
> 
> 
> 
> I have been trying to get the debugger to work in Antlrworks with no
> success. I am using a PC with Windows Vista and jdk 1.6.
> 
> 
> 
> To simplify the testing I am using the Expr example . When I select the
> debugger, the code is generated and compiled but the process is never
> able to connect to the parser. The output of netstat -na would indicate
> that the debugger port is listening during the connect phase. The
> console for the Antlrworks session shows a warning on the compile then
> java.net.connectException (repeats) during the connection phase.
> 
> 
> 
> Has anyone had this problem and been able to solve it? Alternatively,
> does anyone have any instructions on how to execute the compiled parser
> test code directly?
> 
> 
> 
> Regards,
> 
> 
> 
> Simon Fairall

>


=


-- 
Powered by Outblaze

From ted.villalba at gmail.com  Thu May 24 08:05:08 2007
From: ted.villalba at gmail.com (Ted Villalba)
Date: Thu, 24 May 2007 08:05:08 -0700
Subject: [antlr-interest] Do lists work with SteingTemplates?
Message-ID: <69fb4b090705240805t541fdbaclf68bff8c0daf1485@mail.gmail.com>

Hi,

I've sent a similar post, but perhaps this one is worded better. It even
includes a glossy ascii diagram.
I'm wondering if anyone is using the following += notation to pass a list in
StringTemplates. I've not had any luck getting it to work..
I basically have an AST with the following structure ^('=' tag value+) ,
which creates an AST something like:
          =
     /    |     \
    /     |       \
tag value1  value2...

I'm using a string template to pull these like so:
expression : ^('=' tag (v+=value)+) ->
template4(tag={$tag.text},values={$v}) ;

But this fails to pull any of the values into the list and I get empty lists
back. If I simply pull singular values back, and remove the += list
construct from the grammar, it works fine, for example, the case where tag =
value1. It just fails when tag = value 1 value2. I have not found a way to
capture value2.

Thanks,
Ted
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070524/a5f8a61c/attachment.html 

From martin.danjou at neterion.com  Thu May 24 08:35:48 2007
From: martin.danjou at neterion.com (Martin d'Anjou)
Date: Thu, 24 May 2007 11:35:48 -0400 (EDT)
Subject: [antlr-interest] stringtemplate lower case/upper case question
Message-ID: <Pine.LNX.4.63.0705241132360.13406@tennents.s2io.com>

Hi,

We use StringTemplate to produce many outputs based on an in-house created 
language using ANTLR to parse.  The following situation creeps up a lot: 
depending on the target output, I need the same data (usually names) in either 
upper-case, lower-case or the original mixed-case declaration.  I've found 
myself ending up writing a lot of this for example:

public String getFullName()
{
    String regName = this.name.replaceFirst("n", String.valueOf(this.currentIndex+this.startIndex));
    return regName+this.nameSuffix;
}

public String getFullNameLower()
{
    return fullName().toLowerCase();
}

public String getFullNameUpper()
{
    return fullName().toUpperCase();
}

And doing $blah.fullname$, $blah.fullNameLower$, or $blah.fullNameUpper$ in the 
templates based on context.

I was wondering is there a better way that would save the writing of the extra 
two functions (*Upper and *Lower)?  If not, would StringTemplate not benefit 
from a simple toLower and toUpper built-in syntax (e.g. $blah.fullName$, 
$blah.fullName*UpperCase$, or $blah.fullName*LowerCase$) ?

P.S.  So far I have over 30 "triplets" like this (and counting), hence my 
frustration at the extra functions ;)

Thanks!
Martin

From parrt at cs.usfca.edu  Thu May 24 08:49:12 2007
From: parrt at cs.usfca.edu (Terence Parr)
Date: Thu, 24 May 2007 08:49:12 -0700
Subject: [antlr-interest] stringtemplate lower case/upper case question
In-Reply-To: <Pine.LNX.4.63.0705241132360.13406@tennents.s2io.com>
References: <Pine.LNX.4.63.0705241132360.13406@tennents.s2io.com>
Message-ID: <92005A9D-6FB5-4B97-92BB-442FD271C84B@cs.usfca.edu>

Hi Martin,

Use the format option.  You'll have to search the stringtemplate  
archives for how to use it.  I can't remember the details.  And you  
need the latest build from stringtemplate.org/download/build

Ter

On May 24, 2007, at 8:35 AM, Martin d'Anjou wrote:

> Hi,
>
> We use StringTemplate to produce many outputs based on an in-house  
> created language using ANTLR to parse.  The following situation  
> creeps up a lot: depending on the target output, I need the same  
> data (usually names) in either upper-case, lower-case or the  
> original mixed-case declaration.  I've found myself ending up  
> writing a lot of this for example:
>
> public String getFullName()
> {
>    String regName = this.name.replaceFirst("n", String.valueOf 
> (this.currentIndex+this.startIndex));
>    return regName+this.nameSuffix;
> }
>
> public String getFullNameLower()
> {
>    return fullName().toLowerCase();
> }
>
> public String getFullNameUpper()
> {
>    return fullName().toUpperCase();
> }
>
> And doing $blah.fullname$, $blah.fullNameLower$, or  
> $blah.fullNameUpper$ in the templates based on context.
>
> I was wondering is there a better way that would save the writing  
> of the extra two functions (*Upper and *Lower)?  If not, would  
> StringTemplate not benefit from a simple toLower and toUpper built- 
> in syntax (e.g. $blah.fullName$, $blah.fullName*UpperCase$, or  
> $blah.fullName*LowerCase$) ?
>
> P.S.  So far I have over 30 "triplets" like this (and counting),  
> hence my frustration at the extra functions ;)
>
> Thanks!
> Martin


From parrt at cs.usfca.edu  Thu May 24 08:51:34 2007
From: parrt at cs.usfca.edu (Terence Parr)
Date: Thu, 24 May 2007 08:51:34 -0700
Subject: [antlr-interest] Do lists work with SteingTemplates?
In-Reply-To: <69fb4b090705240805t541fdbaclf68bff8c0daf1485@mail.gmail.com>
References: <69fb4b090705240805t541fdbaclf68bff8c0daf1485@mail.gmail.com>
Message-ID: <4BF5683E-D8A4-4CCF-9C9B-0FE58EE50285@cs.usfca.edu>


On May 24, 2007, at 8:05 AM, Ted Villalba wrote:

> Hi,
>
> I've sent a similar post, but perhaps this one is worded better. It  
> even includes a glossy ascii diagram.
> I'm wondering if anyone is using the following += notation to pass  
> a list in StringTemplates. I've not had any luck getting it to work..
> I basically have an AST with the following structure ^('=' tag value 
> +) , which creates an AST something like:
>           =
>      /    |     \
>     /     |       \
> tag value1  value2...
>
> I'm using a string template to pull these like so:
> expression : ^('=' tag (v+=value)+) -> template4(tag= 
> {$tag.text},values={$v}) ;
>
> But this fails to pull any of the values into the list and I get  
> empty lists back. If I simply pull singular values back, and remove  
> the += list construct from the grammar, it works fine, for example,  
> the case where tag = value1. It just fails when tag = value 1  
> value2. I have not found a way to capture value2.
>

Most likely situation is that value is not returning a template.

Ter


From ted.villalba at gmail.com  Thu May 24 09:30:27 2007
From: ted.villalba at gmail.com (Ted Villalba)
Date: Thu, 24 May 2007 09:30:27 -0700
Subject: [antlr-interest] Do lists work with SteingTemplates?
In-Reply-To: <4BF5683E-D8A4-4CCF-9C9B-0FE58EE50285@cs.usfca.edu>
References: <69fb4b090705240805t541fdbaclf68bff8c0daf1485@mail.gmail.com>
	<4BF5683E-D8A4-4CCF-9C9B-0FE58EE50285@cs.usfca.edu>
Message-ID: <69fb4b090705240930v4ebc2650kc5f9dd4ec05cbc3f@mail.gmail.com>

Thanks.
Is there example code somewhere in the distribution that tests this sort of
+=/list construction.
I've modified my template groups so that I think I am returning a template
for value, but have witnessed no change in the list creation. Not entirely
sure of myself here, so I may not be returning a template yet.
In my Tree grammar I have:

expression : ^('=' tag (v+=value)+) ->
template4(tag={$tag.text},values={$v}) ;

value   : WCHAR+ -> template5(val={$value.text});



In my templates:

template4(tag, values) ::= "<tag>:<values>"

template5(val) ::= "<val>"



Is this returning a template for value ? I'm not sure. I don;t know how to
establish that I am returning a template for value.



Thanks again,

Ted



On 5/24/07, Terence Parr <parrt at cs.usfca.edu> wrote:
>
>
> On May 24, 2007, at 8:05 AM, Ted Villalba wrote:
>
> > Hi,
> >
> > I've sent a similar post, but perhaps this one is worded better. It
> > even includes a glossy ascii diagram.
> > I'm wondering if anyone is using the following += notation to pass
> > a list in StringTemplates. I've not had any luck getting it to work..
> > I basically have an AST with the following structure ^('=' tag value
> > +) , which creates an AST something like:
> >           =
> >      /    |     \
> >     /     |       \
> > tag value1  value2...
> >
> > I'm using a string template to pull these like so:
> > expression : ^('=' tag (v+=value)+) -> template4(tag=
> > {$tag.text},values={$v}) ;
> >
> > But this fails to pull any of the values into the list and I get
> > empty lists back. If I simply pull singular values back, and remove
> > the += list construct from the grammar, it works fine, for example,
> > the case where tag = value1. It just fails when tag = value 1
> > value2. I have not found a way to capture value2.
> >
>
> Most likely situation is that value is not returning a template.
>
> Ter
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070524/12bdd48d/attachment.html 

From laguest at archangeli.co.uk  Thu May 24 10:04:37 2007
From: laguest at archangeli.co.uk (Luke A. Guest)
Date: Thu, 24 May 2007 18:04:37 +0100
Subject: [antlr-interest] <name>
Message-ID: <1180026282.7574.70.camel@rogue>

Hi,

Is it possible to get the base name in the stg file?

For example, I'm wanting to provide a structure like this:

package T_Lexer is

  type T_Lexer_Type is new ANTLR.Lexer.Lexer_Type with private;

private

end T_Lexer;

The grammar would be called T.g and the filenames generated would be
t_lexer.ads (specification) and t_lexer.adb (body).

It's not too much of a problem if it can't be done, but I would like to
try to stick as closely as possible to the Ada style guides.

Thanks,
Luke.



From parrt at cs.usfca.edu  Thu May 24 10:17:54 2007
From: parrt at cs.usfca.edu (Terence Parr)
Date: Thu, 24 May 2007 10:17:54 -0700
Subject: [antlr-interest] Do lists work with SteingTemplates?
In-Reply-To: <69fb4b090705240930v4ebc2650kc5f9dd4ec05cbc3f@mail.gmail.com>
References: <69fb4b090705240805t541fdbaclf68bff8c0daf1485@mail.gmail.com>
	<4BF5683E-D8A4-4CCF-9C9B-0FE58EE50285@cs.usfca.edu>
	<69fb4b090705240930v4ebc2650kc5f9dd4ec05cbc3f@mail.gmail.com>
Message-ID: <BF3DEEE8-68EF-4C8F-81AB-199E47CFAAF9@cs.usfca.edu>

A quick debugging session should solve this.  Just step through and  
see what's wrong.
Ter
On May 24, 2007, at 9:30 AM, Ted Villalba wrote:

> Thanks.
> Is there example code somewhere in the distribution that tests this  
> sort of +=/list construction.
> I've modified my template groups so that I think I am returning a  
> template for value, but have witnessed no change in the list  
> creation. Not entirely sure of myself here, so I may not be  
> returning a template yet.
> In my Tree grammar I have:
> expression : ^('=' tag (v+=value)+) -> template4(tag= 
> {$tag.text},values={$v}) ;
>
> value   : WCHAR+ -> template5(val={$value.text});
>
>
> In my templates:
>
> template4(tag, values) ::= "<tag>:<values>"
>
> template5(val) ::= "<val>"
>
>
> Is this returning a template for value ? I'm not sure. I don;t know  
> how to establish that I am returning a template for value.
>
>
> Thanks again,
>
> Ted
>
>
>
>
> On 5/24/07, Terence Parr <parrt at cs.usfca.edu> wrote:
>
> On May 24, 2007, at 8:05 AM, Ted Villalba wrote:
>
> > Hi,
> >
> > I've sent a similar post, but perhaps this one is worded better. It
> > even includes a glossy ascii diagram.
> > I'm wondering if anyone is using the following += notation to pass
> > a list in StringTemplates. I've not had any luck getting it to  
> work..
> > I basically have an AST with the following structure ^('=' tag value
> > +) , which creates an AST something like:
> >           =
> >      /    |     \
> >     /     |       \
> > tag value1  value2...
> >
> > I'm using a string template to pull these like so:
> > expression : ^('=' tag (v+=value)+) -> template4(tag=
> > {$tag.text},values={$v}) ;
> >
> > But this fails to pull any of the values into the list and I get
> > empty lists back. If I simply pull singular values back, and remove
> > the += list construct from the grammar, it works fine, for example,
> > the case where tag = value1. It just fails when tag = value 1
> > value2. I have not found a way to capture value2.
> >
>
> Most likely situation is that value is not returning a template.
>
> Ter
>
>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070524/7e5e5791/attachment-0001.html 

From parrt at cs.usfca.edu  Thu May 24 10:19:16 2007
From: parrt at cs.usfca.edu (Terence Parr)
Date: Thu, 24 May 2007 10:19:16 -0700
Subject: [antlr-interest] <name>
In-Reply-To: <1180026282.7574.70.camel@rogue>
References: <1180026282.7574.70.camel@rogue>
Message-ID: <75812CD1-D9A3-4572-82C1-827D1E1A1293@cs.usfca.edu>

sure. whatever attributes go into lexer() template and outputFile()  
or whatever are visible to any enclosed template.  I think <name> may  
actually be the grammar name.
Ter
On May 24, 2007, at 10:04 AM, Luke A. Guest wrote:

> Hi,
>
> Is it possible to get the base name in the stg file?
>
> For example, I'm wanting to provide a structure like this:
>
> package T_Lexer is
>
>   type T_Lexer_Type is new ANTLR.Lexer.Lexer_Type with private;
>
> private
>
> end T_Lexer;
>
> The grammar would be called T.g and the filenames generated would be
> t_lexer.ads (specification) and t_lexer.adb (body).
>
> It's not too much of a problem if it can't be done, but I would  
> like to
> try to stick as closely as possible to the Ada style guides.
>
> Thanks,
> Luke.
>
>


From laguest at archangeli.co.uk  Thu May 24 10:35:36 2007
From: laguest at archangeli.co.uk (Luke A. Guest)
Date: Thu, 24 May 2007 18:35:36 +0100
Subject: [antlr-interest] <name>
In-Reply-To: <75812CD1-D9A3-4572-82C1-827D1E1A1293@cs.usfca.edu>
References: <1180026282.7574.70.camel@rogue>
	<75812CD1-D9A3-4572-82C1-827D1E1A1293@cs.usfca.edu>
Message-ID: <1180028141.7574.77.camel@rogue>

On Thu, 2007-05-24 at 10:19 -0700, Terence Parr wrote:
> sure. whatever attributes go into lexer() template and outputFile()  
> or whatever are visible to any enclosed template.  I think <name> may  
> actually be the grammar name.

No, <name> is actually the fully composed name, TLexer, in my case.

In outputFile, <name> is TLexer, same for headerFile and lexer. But, in
lexer, I just tried <grammar.name> and got T, which is what I want, but
I also need this for outputFile and headerFile as the packages are
generated there.

I take it the <recognizer> rule dumps out the one specified, lexer,
parser, treeparser or a combination. Is that correct?

Thanks,
Luke.



From parrt at cs.usfca.edu  Thu May 24 11:39:50 2007
From: parrt at cs.usfca.edu (Terence Parr)
Date: Thu, 24 May 2007 11:39:50 -0700
Subject: [antlr-interest] <name>
In-Reply-To: <1180028141.7574.77.camel@rogue>
References: <1180026282.7574.70.camel@rogue>
	<75812CD1-D9A3-4572-82C1-827D1E1A1293@cs.usfca.edu>
	<1180028141.7574.77.camel@rogue>
Message-ID: <5DD8094A-4532-4463-8283-B0954971A6C7@cs.usfca.edu>


On May 24, 2007, at 10:35 AM, Luke A. Guest wrote:

> On Thu, 2007-05-24 at 10:19 -0700, Terence Parr wrote:
>> sure. whatever attributes go into lexer() template and outputFile()
>> or whatever are visible to any enclosed template.  I think <name> may
>> actually be the grammar name.
>
> No, <name> is actually the fully composed name, TLexer, in my case.
>
> In outputFile, <name> is TLexer, same for headerFile and lexer.  
> But, in
> lexer, I just tried <grammar.name> and got T, which is what I want,  
> but
> I also need this for outputFile and headerFile as the packages are
> generated there.
>
> I take it the <recognizer> rule dumps out the one specified, lexer,
> parser, treeparser or a combination. Is that correct?

I believe so.

Use -XdbgST on ANTLR I think and you'll see <templatename>stuff</ 
templatename> in output so you can see exactly which template  
generates the surrounded text.  Cool, eh?

Ter

>


From laguest at archangeli.co.uk  Thu May 24 11:48:42 2007
From: laguest at archangeli.co.uk (Luke A. Guest)
Date: Thu, 24 May 2007 19:48:42 +0100
Subject: [antlr-interest] <name>
In-Reply-To: <5DD8094A-4532-4463-8283-B0954971A6C7@cs.usfca.edu>
References: <1180026282.7574.70.camel@rogue>
	<75812CD1-D9A3-4572-82C1-827D1E1A1293@cs.usfca.edu>
	<1180028141.7574.77.camel@rogue>
	<5DD8094A-4532-4463-8283-B0954971A6C7@cs.usfca.edu>
Message-ID: <1180032527.7574.78.camel@rogue>

On Thu, 2007-05-24 at 11:39 -0700, Terence Parr wrote:
> On May 24, 2007, at 10:35 AM, Luke A. Guest wrote:
> 
> > I take it the <recognizer> rule dumps out the one specified, lexer,
> > parser, treeparser or a combination. Is that correct?
> 
> I believe so.

Yeah, I seem to have confirmed this myself.

> Use -XdbgST on ANTLR I think and you'll see <templatename>stuff</ 
> templatename> in output so you can see exactly which template  
> generates the surrounded text.  Cool, eh?

Hmm, yeah, but I take it, it only works if you have the other stg files?
I currently have an Ada95.stg.

Luke.



From carlos.melgarejo at rogers.com  Thu May 24 12:24:41 2007
From: carlos.melgarejo at rogers.com (CARLOS MELGAREJO)
Date: Thu, 24 May 2007 12:24:41 -0700 (PDT)
Subject: [antlr-interest] Simple grammar problem
Message-ID: <14191.83290.qm@web88007.mail.re2.yahoo.com>

Hi All,

I'm facing a problem with my grammar. Maybe I'm missing something somewhere, because the generated
code is not doing things the way I want to. 

I realize after a few testing that the following input reconize and display error messages:
( 3 + 6      =>  ')' especting. That is fine, that is the way should be anyway.

But when I enter the following input:

(3 + 6 ) (     I don't see any error message. Seens to me that '(' is consumed but do not generate any
exception, and even create the right AST. 

The same happends with:
(3+6) ( )

So, the question is: How I can fix the problem, in order to display and error message in situations mentioned 
abode.

Thanks in advance.

This is my grammar
-----------------------------------------
statement 
    : expression 
    ;
   
expression
    : conditionalAndExpression ( 'or'^ conditionalAndExpression )*
    ;

--------------

atom
    : literal  
    | log 
    | Date 
    | '('! expression  ')'!
    ;
------------
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070524/847c0c54/attachment.html 

From ivanisev at sezampro.com  Thu May 24 14:26:32 2007
From: ivanisev at sezampro.com (Bosko Ivanisevic)
Date: Thu, 24 May 2007 23:26:32 +0200
Subject: [antlr-interest] Mantra grammar warning.
Message-ID: <46560308.60906@sezampro.com>

I was looking at the definition of Mantra language to see how are things
working and I've noticed that grammar checking in ANTLRWorks issues
following warning:

warning(200): Mantra.g:393:3: Decision can match input such as "'else'"
using multiple alternatives: 1, 2
As a result, alternative(s) 2 were disabled for that input

Can anyone tell me what is wrong with the 'statement' rule definition
and how can it be fixed?

BTW what are the meanings of various colors (green, red) used in Parse
Tree window in ANTLRWorks in debug mode?



From bear.mini at gmail.com  Thu May 24 17:12:50 2007
From: bear.mini at gmail.com (Takashi Oguma)
Date: Fri, 25 May 2007 09:12:50 +0900
Subject: [antlr-interest] Is "-debug" command line option broken with
	language=CSharp?
Message-ID: <8a0c37020705241712j3d653934j54a49decb5347320@mail.gmail.com>

Hi,

I want to build a parse tree with my grammar, and as my first step, I
refer to this Wiki page:
http://www.antlr.org/wiki/pages/viewpage.action?pageId=1760

I want a lexer and a parser in C# language, so I added "option {
language = CSharp }" to the grammar P.g.

Then I compiled the P.g with -debug option and I got PLexer.cs and
PParser.cs successfully.

But when I compiled PParser.cs, I got 2 types of error messages:

1st:
error CS0117: 'Antlr.Runtime.Debug.IDebugEventListener' does not
contain a definition for 'location'
(this error occurred 5 times)

2nd:
error CS0103: The name 'nvae' does not exist in the current context
(this erro occurred 1 time)


Can anyone tell me the cause of the problem?


I attached complete P.g and generated PLexser.cs and PParser.cs.

Complete build output and error messages are below:

------ Build started: Project: AntlrExample, Configuration: Debug Any CPU ------
java -cp %CLASSPATH% org.antlr.Tool -debug -message-format vstudio P.g
ANTLR Parser Generator  Version 3.0 (May 17, 2007)  1989-2007
no such message format file
org/antlr/tool/templates/messages/formats/vstudio.stg retrying with
default ANTLR format
warning(200): P.g:14:29: Decision can match input such as "'else'"
using multiple alternatives: 1, 2
As a result, alternative(s) 2 were disabled for that input
C:\WINDOWS\Microsoft.NET\Framework\v2.0.50727\Csc.exe /noconfig
/nowarn:1701,1702 /errorreport:prompt /warn:4 /define:DEBUG;TRACE
/reference:..\..\..\tools\antlr-3.0\runtime\CSharp\bin\net-2.0\antlr.runtime.dll
/reference:..\..\..\tools\antlr-3.0\runtime\CSharp\bin\net-2.0\Antlr3.Runtime.dll
/reference:..\..\..\tools\antlr-3.0\runtime\CSharp\bin\net-2.0\Antlr3.Utility.dll
/reference:..\..\..\tools\antlr-3.0\runtime\CSharp\bin\net-2.0\StringTemplate.dll
/reference:C:\WINDOWS\Microsoft.NET\Framework\v2.0.50727\System.Data.dll
/reference:C:\WINDOWS\Microsoft.NET\Framework\v2.0.50727\System.dll
/reference:C:\WINDOWS\Microsoft.NET\Framework\v2.0.50727\System.Xml.dll
/debug+ /debug:full /optimize- /out:obj\Debug\AntlrExample.exe
/target:exe PLexer.cs PParser.cs Program.cs Properties\AssemblyInfo.cs
C:\Work\AntlrExample\AntlrExample\PParser.cs(190,13): error CS0117:
'Antlr.Runtime.Debug.IDebugEventListener' does not contain a
definition for 'location'
C:\Work\AntlrExample\AntlrExample\PParser.cs(287,13): error CS0117:
'Antlr.Runtime.Debug.IDebugEventListener' does not contain a
definition for 'location'
C:\Work\AntlrExample\AntlrExample\PParser.cs(346,13): error CS0117:
'Antlr.Runtime.Debug.IDebugEventListener' does not contain a
definition for 'location'
C:\Work\AntlrExample\AntlrExample\PParser.cs(393,42): error CS0103:
The name 'nvae' does not exist in the current context
C:\Work\AntlrExample\AntlrExample\PParser.cs(485,13): error CS0117:
'Antlr.Runtime.Debug.IDebugEventListener' does not contain a
definition for 'location'
C:\Work\AntlrExample\AntlrExample\PParser.cs(544,13): error CS0117:
'Antlr.Runtime.Debug.IDebugEventListener' does not contain a
definition for 'location'

Compile complete -- 6 errors, 0 warnings
========== Build: 0 succeeded or up-to-date, 1 failed, 0 skipped ==========


Thanks
-- 
Takashi OGUMA
bear.mini at gmail.com
-------------- next part --------------
grammar P;

options
{
    language=CSharp;
}

prog: decl* stat* ;
 
decl: type ID (',' ID)* ';' ;
    
type: 'int' | 'float' ;
        
stat: 'if' expr 'then' stat ('else' stat)?
    | ID '=' expr 
    ;   
        
expr: INT
    | 'true'
    ;   
        
ID  : 'a'..'z'+ ; 
INT : '0'..'9'+ ;
WS  : (' '|'\n')+ {$channel=HIDDEN;} ;



-------------- next part --------------
// $ANTLR 3.0 P.g 2007-05-25 09:02:46

using System;
using Antlr.Runtime;
using IList 		= System.Collections.IList;
using ArrayList 	= System.Collections.ArrayList;
using Stack 		= Antlr.Runtime.Collections.StackList;



public class PLexer : Lexer 
{
    public const int WS = 6;
    public const int T7 = 7;
    public const int T10 = 10;
    public const int T11 = 11;
    public const int INT = 5;
    public const int T12 = 12;
    public const int T13 = 13;
    public const int T8 = 8;
    public const int T14 = 14;
    public const int T9 = 9;
    public const int T15 = 15;
    public const int ID = 4;
    public const int Tokens = 16;
    public const int EOF = -1;

    public PLexer() 
    {
		InitializeCyclicDFAs();
    }
    public PLexer(ICharStream input) 
		: base(input)
	{
		InitializeCyclicDFAs();
    }
    
    override public string GrammarFileName
    {
    	get { return "P.g";} 
    }

    // $ANTLR start T7 
    public void mT7() // throws RecognitionException [2]
    {
        try 
    	{
            int _type = T7;
            // P.g:7:6: ( ',' )
            // P.g:7:6: ','
            {
            	Match(','); 
            
            }
    
            this.type = _type;
        }
        finally 
    	{
        }
    }
    // $ANTLR end T7

    // $ANTLR start T8 
    public void mT8() // throws RecognitionException [2]
    {
        try 
    	{
            int _type = T8;
            // P.g:8:6: ( ';' )
            // P.g:8:6: ';'
            {
            	Match(';'); 
            
            }
    
            this.type = _type;
        }
        finally 
    	{
        }
    }
    // $ANTLR end T8

    // $ANTLR start T9 
    public void mT9() // throws RecognitionException [2]
    {
        try 
    	{
            int _type = T9;
            // P.g:9:6: ( 'int' )
            // P.g:9:6: 'int'
            {
            	Match("int"); 

            
            }
    
            this.type = _type;
        }
        finally 
    	{
        }
    }
    // $ANTLR end T9

    // $ANTLR start T10 
    public void mT10() // throws RecognitionException [2]
    {
        try 
    	{
            int _type = T10;
            // P.g:10:7: ( 'float' )
            // P.g:10:7: 'float'
            {
            	Match("float"); 

            
            }
    
            this.type = _type;
        }
        finally 
    	{
        }
    }
    // $ANTLR end T10

    // $ANTLR start T11 
    public void mT11() // throws RecognitionException [2]
    {
        try 
    	{
            int _type = T11;
            // P.g:11:7: ( 'if' )
            // P.g:11:7: 'if'
            {
            	Match("if"); 

            
            }
    
            this.type = _type;
        }
        finally 
    	{
        }
    }
    // $ANTLR end T11

    // $ANTLR start T12 
    public void mT12() // throws RecognitionException [2]
    {
        try 
    	{
            int _type = T12;
            // P.g:12:7: ( 'then' )
            // P.g:12:7: 'then'
            {
            	Match("then"); 

            
            }
    
            this.type = _type;
        }
        finally 
    	{
        }
    }
    // $ANTLR end T12

    // $ANTLR start T13 
    public void mT13() // throws RecognitionException [2]
    {
        try 
    	{
            int _type = T13;
            // P.g:13:7: ( 'else' )
            // P.g:13:7: 'else'
            {
            	Match("else"); 

            
            }
    
            this.type = _type;
        }
        finally 
    	{
        }
    }
    // $ANTLR end T13

    // $ANTLR start T14 
    public void mT14() // throws RecognitionException [2]
    {
        try 
    	{
            int _type = T14;
            // P.g:14:7: ( '=' )
            // P.g:14:7: '='
            {
            	Match('='); 
            
            }
    
            this.type = _type;
        }
        finally 
    	{
        }
    }
    // $ANTLR end T14

    // $ANTLR start T15 
    public void mT15() // throws RecognitionException [2]
    {
        try 
    	{
            int _type = T15;
            // P.g:15:7: ( 'true' )
            // P.g:15:7: 'true'
            {
            	Match("true"); 

            
            }
    
            this.type = _type;
        }
        finally 
    	{
        }
    }
    // $ANTLR end T15

    // $ANTLR start ID 
    public void mID() // throws RecognitionException [2]
    {
        try 
    	{
            int _type = ID;
            // P.g:22:7: ( ( 'a' .. 'z' )+ )
            // P.g:22:7: ( 'a' .. 'z' )+
            {
            	// P.g:22:7: ( 'a' .. 'z' )+
            	int cnt1 = 0;
            	do 
            	{
            	    int alt1 = 2;
            	    int LA1_0 = input.LA(1);
            	    
            	    if ( ((LA1_0 >= 'a' && LA1_0 <= 'z')) )
            	    {
            	        alt1 = 1;
            	    }
            	    
            	
            	    switch (alt1) 
            		{
            			case 1 :
            			    // P.g:22:7: 'a' .. 'z'
            			    {
            			    	MatchRange('a','z'); 
            			    
            			    }
            			    break;
            	
            			default:
            			    if ( cnt1 >= 1 ) goto loop1;
            		            EarlyExitException eee =
            		                new EarlyExitException(1, input);
            		            throw eee;
            	    }
            	    cnt1++;
            	} while (true);
            	
            	loop1:
            		;	// Stops C# compiler whinging that label 'loop1' has no statements

            
            }
    
            this.type = _type;
        }
        finally 
    	{
        }
    }
    // $ANTLR end ID

    // $ANTLR start INT 
    public void mINT() // throws RecognitionException [2]
    {
        try 
    	{
            int _type = INT;
            // P.g:23:7: ( ( '0' .. '9' )+ )
            // P.g:23:7: ( '0' .. '9' )+
            {
            	// P.g:23:7: ( '0' .. '9' )+
            	int cnt2 = 0;
            	do 
            	{
            	    int alt2 = 2;
            	    int LA2_0 = input.LA(1);
            	    
            	    if ( ((LA2_0 >= '0' && LA2_0 <= '9')) )
            	    {
            	        alt2 = 1;
            	    }
            	    
            	
            	    switch (alt2) 
            		{
            			case 1 :
            			    // P.g:23:7: '0' .. '9'
            			    {
            			    	MatchRange('0','9'); 
            			    
            			    }
            			    break;
            	
            			default:
            			    if ( cnt2 >= 1 ) goto loop2;
            		            EarlyExitException eee =
            		                new EarlyExitException(2, input);
            		            throw eee;
            	    }
            	    cnt2++;
            	} while (true);
            	
            	loop2:
            		;	// Stops C# compiler whinging that label 'loop2' has no statements

            
            }
    
            this.type = _type;
        }
        finally 
    	{
        }
    }
    // $ANTLR end INT

    // $ANTLR start WS 
    public void mWS() // throws RecognitionException [2]
    {
        try 
    	{
            int _type = WS;
            // P.g:24:7: ( ( ' ' | '\\n' )+ )
            // P.g:24:7: ( ' ' | '\\n' )+
            {
            	// P.g:24:7: ( ' ' | '\\n' )+
            	int cnt3 = 0;
            	do 
            	{
            	    int alt3 = 2;
            	    int LA3_0 = input.LA(1);
            	    
            	    if ( (LA3_0 == '\n' || LA3_0 == ' ') )
            	    {
            	        alt3 = 1;
            	    }
            	    
            	
            	    switch (alt3) 
            		{
            			case 1 :
            			    // P.g:
            			    {
            			    	if ( input.LA(1) == '\n' || input.LA(1) == ' ' ) 
            			    	{
            			    	    input.Consume();
            			    	
            			    	}
            			    	else 
            			    	{
            			    	    MismatchedSetException mse =
            			    	        new MismatchedSetException(null,input);
            			    	    Recover(mse);    throw mse;
            			    	}

            			    
            			    }
            			    break;
            	
            			default:
            			    if ( cnt3 >= 1 ) goto loop3;
            		            EarlyExitException eee =
            		                new EarlyExitException(3, input);
            		            throw eee;
            	    }
            	    cnt3++;
            	} while (true);
            	
            	loop3:
            		;	// Stops C# compiler whinging that label 'loop3' has no statements

            	channel=HIDDEN;
            
            }
    
            this.type = _type;
        }
        finally 
    	{
        }
    }
    // $ANTLR end WS

    override public void mTokens() // throws RecognitionException 
    {
        // P.g:1:10: ( T7 | T8 | T9 | T10 | T11 | T12 | T13 | T14 | T15 | ID | INT | WS )
        int alt4 = 12;
        switch ( input.LA(1) ) 
        {
        case ',':
        	{
            alt4 = 1;
            }
            break;
        case ';':
        	{
            alt4 = 2;
            }
            break;
        case 'i':
        	{
            switch ( input.LA(2) ) 
            {
            case 'f':
            	{
                int LA4_11 = input.LA(3);
                
                if ( ((LA4_11 >= 'a' && LA4_11 <= 'z')) )
                {
                    alt4 = 10;
                }
                else 
                {
                    alt4 = 5;}
                }
                break;
            case 'n':
            	{
                int LA4_12 = input.LA(3);
                
                if ( (LA4_12 == 't') )
                {
                    int LA4_18 = input.LA(4);
                    
                    if ( ((LA4_18 >= 'a' && LA4_18 <= 'z')) )
                    {
                        alt4 = 10;
                    }
                    else 
                    {
                        alt4 = 3;}
                }
                else 
                {
                    alt4 = 10;}
                }
                break;
            	default:
                	alt4 = 10;
                	break;}
        
            }
            break;
        case 'f':
        	{
            int LA4_4 = input.LA(2);
            
            if ( (LA4_4 == 'l') )
            {
                int LA4_13 = input.LA(3);
                
                if ( (LA4_13 == 'o') )
                {
                    int LA4_19 = input.LA(4);
                    
                    if ( (LA4_19 == 'a') )
                    {
                        int LA4_24 = input.LA(5);
                        
                        if ( (LA4_24 == 't') )
                        {
                            int LA4_28 = input.LA(6);
                            
                            if ( ((LA4_28 >= 'a' && LA4_28 <= 'z')) )
                            {
                                alt4 = 10;
                            }
                            else 
                            {
                                alt4 = 4;}
                        }
                        else 
                        {
                            alt4 = 10;}
                    }
                    else 
                    {
                        alt4 = 10;}
                }
                else 
                {
                    alt4 = 10;}
            }
            else 
            {
                alt4 = 10;}
            }
            break;
        case 't':
        	{
            switch ( input.LA(2) ) 
            {
            case 'h':
            	{
                int LA4_14 = input.LA(3);
                
                if ( (LA4_14 == 'e') )
                {
                    int LA4_20 = input.LA(4);
                    
                    if ( (LA4_20 == 'n') )
                    {
                        int LA4_25 = input.LA(5);
                        
                        if ( ((LA4_25 >= 'a' && LA4_25 <= 'z')) )
                        {
                            alt4 = 10;
                        }
                        else 
                        {
                            alt4 = 6;}
                    }
                    else 
                    {
                        alt4 = 10;}
                }
                else 
                {
                    alt4 = 10;}
                }
                break;
            case 'r':
            	{
                int LA4_15 = input.LA(3);
                
                if ( (LA4_15 == 'u') )
                {
                    int LA4_21 = input.LA(4);
                    
                    if ( (LA4_21 == 'e') )
                    {
                        int LA4_26 = input.LA(5);
                        
                        if ( ((LA4_26 >= 'a' && LA4_26 <= 'z')) )
                        {
                            alt4 = 10;
                        }
                        else 
                        {
                            alt4 = 9;}
                    }
                    else 
                    {
                        alt4 = 10;}
                }
                else 
                {
                    alt4 = 10;}
                }
                break;
            	default:
                	alt4 = 10;
                	break;}
        
            }
            break;
        case 'e':
        	{
            int LA4_6 = input.LA(2);
            
            if ( (LA4_6 == 'l') )
            {
                int LA4_16 = input.LA(3);
                
                if ( (LA4_16 == 's') )
                {
                    int LA4_22 = input.LA(4);
                    
                    if ( (LA4_22 == 'e') )
                    {
                        int LA4_27 = input.LA(5);
                        
                        if ( ((LA4_27 >= 'a' && LA4_27 <= 'z')) )
                        {
                            alt4 = 10;
                        }
                        else 
                        {
                            alt4 = 7;}
                    }
                    else 
                    {
                        alt4 = 10;}
                }
                else 
                {
                    alt4 = 10;}
            }
            else 
            {
                alt4 = 10;}
            }
            break;
        case '=':
        	{
            alt4 = 8;
            }
            break;
        case 'a':
        case 'b':
        case 'c':
        case 'd':
        case 'g':
        case 'h':
        case 'j':
        case 'k':
        case 'l':
        case 'm':
        case 'n':
        case 'o':
        case 'p':
        case 'q':
        case 'r':
        case 's':
        case 'u':
        case 'v':
        case 'w':
        case 'x':
        case 'y':
        case 'z':
        	{
            alt4 = 10;
            }
            break;
        case '0':
        case '1':
        case '2':
        case '3':
        case '4':
        case '5':
        case '6':
        case '7':
        case '8':
        case '9':
        	{
            alt4 = 11;
            }
            break;
        case '\n':
        case ' ':
        	{
            alt4 = 12;
            }
            break;
        	default:
        	    NoViableAltException nvae_d4s0 =
        	        new NoViableAltException("1:1: Tokens : ( T7 | T8 | T9 | T10 | T11 | T12 | T13 | T14 | T15 | ID | INT | WS );", 4, 0, input);
        
        	    throw nvae_d4s0;
        }
        
        switch (alt4) 
        {
            case 1 :
                // P.g:1:10: T7
                {
                	mT7(); 
                
                }
                break;
            case 2 :
                // P.g:1:13: T8
                {
                	mT8(); 
                
                }
                break;
            case 3 :
                // P.g:1:16: T9
                {
                	mT9(); 
                
                }
                break;
            case 4 :
                // P.g:1:19: T10
                {
                	mT10(); 
                
                }
                break;
            case 5 :
                // P.g:1:23: T11
                {
                	mT11(); 
                
                }
                break;
            case 6 :
                // P.g:1:27: T12
                {
                	mT12(); 
                
                }
                break;
            case 7 :
                // P.g:1:31: T13
                {
                	mT13(); 
                
                }
                break;
            case 8 :
                // P.g:1:35: T14
                {
                	mT14(); 
                
                }
                break;
            case 9 :
                // P.g:1:39: T15
                {
                	mT15(); 
                
                }
                break;
            case 10 :
                // P.g:1:43: ID
                {
                	mID(); 
                
                }
                break;
            case 11 :
                // P.g:1:46: INT
                {
                	mINT(); 
                
                }
                break;
            case 12 :
                // P.g:1:50: WS
                {
                	mWS(); 
                
                }
                break;
        
        }
    
    }


	private void InitializeCyclicDFAs()
	{
	}

 
    
}
-------------- next part --------------
// $ANTLR 3.0 P.g 2007-05-25 09:02:46

using System;
using Antlr.Runtime;
using IList 		= System.Collections.IList;
using ArrayList 	= System.Collections.ArrayList;
using Stack 		= Antlr.Runtime.Collections.StackList;



public class PParser : Parser 
{
    public static readonly string[] tokenNames = new string[] 
	{
        "<invalid>", 
		"<EOR>", 
		"<DOWN>", 
		"<UP>", 
		"ID", 
		"INT", 
		"WS", 
		"','", 
		"';'", 
		"'int'", 
		"'float'", 
		"'if'", 
		"'then'", 
		"'else'", 
		"'='", 
		"'true'"
    };

    public const int WS = 6;
    public const int INT = 5;
    public const int ID = 4;
    public const int EOF = -1;
    
    
        public PParser(ITokenStream input) 
    		: base(input)
    	{
    		InitializeCyclicDFAs();
        }
        

    override public string[] TokenNames
	{
		get { return tokenNames; }
	}

    override public string GrammarFileName
	{
		get { return "P.g"; }
	}


    
    // $ANTLR start prog
    // P.g:8:1: prog : ( decl )* ( stat )* ;
    public void prog() // throws RecognitionException [1]
    {   
        try 
    	{
            // P.g:8:7: ( ( decl )* ( stat )* )
            // P.g:8:7: ( decl )* ( stat )*
            {
            	// P.g:8:7: ( decl )*
            	do 
            	{
            	    int alt1 = 2;
            	    int LA1_0 = input.LA(1);
            	    
            	    if ( ((LA1_0 >= 9 && LA1_0 <= 10)) )
            	    {
            	        alt1 = 1;
            	    }
            	    
            	
            	    switch (alt1) 
            		{
            			case 1 :
            			    // P.g:8:7: decl
            			    {
            			    	PushFollow(FOLLOW_decl_in_prog23);
            			    	decl();
            			    	followingStackPointer_--;

            			    
            			    }
            			    break;
            	
            			default:
            			    goto loop1;
            	    }
            	} while (true);
            	
            	loop1:
            		;	// Stops C# compiler whinging that label 'loop1' has no statements

            	// P.g:8:13: ( stat )*
            	do 
            	{
            	    int alt2 = 2;
            	    int LA2_0 = input.LA(1);
            	    
            	    if ( (LA2_0 == ID || LA2_0 == 11) )
            	    {
            	        alt2 = 1;
            	    }
            	    
            	
            	    switch (alt2) 
            		{
            			case 1 :
            			    // P.g:8:13: stat
            			    {
            			    	PushFollow(FOLLOW_stat_in_prog26);
            			    	stat();
            			    	followingStackPointer_--;

            			    
            			    }
            			    break;
            	
            			default:
            			    goto loop2;
            	    }
            	} while (true);
            	
            	loop2:
            		;	// Stops C# compiler whinging that label 'loop2' has no statements

            
            }
    
        }
        catch (RecognitionException re) 
    	{
            ReportError(re);
            Recover(input,re);
        }
        finally 
    	{
        }
        return ;
    }
    // $ANTLR end prog

    
    // $ANTLR start decl
    // P.g:10:1: decl : type ID ( ',' ID )* ';' ;
    public void decl() // throws RecognitionException [1]
    {   
        try 
    	{
            // P.g:10:7: ( type ID ( ',' ID )* ';' )
            // P.g:10:7: type ID ( ',' ID )* ';'
            {
            	PushFollow(FOLLOW_type_in_decl36);
            	type();
            	followingStackPointer_--;

            	Match(input,ID,FOLLOW_ID_in_decl38); 
            	// P.g:10:15: ( ',' ID )*
            	do 
            	{
            	    int alt3 = 2;
            	    int LA3_0 = input.LA(1);
            	    
            	    if ( (LA3_0 == 7) )
            	    {
            	        alt3 = 1;
            	    }
            	    
            	
            	    switch (alt3) 
            		{
            			case 1 :
            			    // P.g:10:16: ',' ID
            			    {
            			    	Match(input,7,FOLLOW_7_in_decl41); 
            			    	Match(input,ID,FOLLOW_ID_in_decl43); 
            			    
            			    }
            			    break;
            	
            			default:
            			    goto loop3;
            	    }
            	} while (true);
            	
            	loop3:
            		;	// Stops C# compiler whinging that label 'loop3' has no statements

            	Match(input,8,FOLLOW_8_in_decl47); 
            
            }
    
        }
        catch (RecognitionException re) 
    	{
            ReportError(re);
            Recover(input,re);
        }
        finally 
    	{
        }
        return ;
    }
    // $ANTLR end decl

    
    // $ANTLR start type
    // P.g:12:1: type : ( 'int' | 'float' );
    public void type() // throws RecognitionException [1]
    {   
        try 
    	{
            // P.g:12:7: ( 'int' | 'float' )
            // P.g:
            {
            	if ( (input.LA(1) >= 9 && input.LA(1) <= 10) ) 
            	{
            	    input.Consume();
            	    errorRecovery = false;
            	}
            	else 
            	{
            	    MismatchedSetException mse =
            	        new MismatchedSetException(null,input);
            	    RecoverFromMismatchedSet(input,mse,FOLLOW_set_in_type0);    throw mse;
            	}

            
            }
    
        }
        catch (RecognitionException re) 
    	{
            ReportError(re);
            Recover(input,re);
        }
        finally 
    	{
        }
        return ;
    }
    // $ANTLR end type

    
    // $ANTLR start stat
    // P.g:14:1: stat : ( 'if' expr 'then' stat ( 'else' stat )? | ID '=' expr );
    public void stat() // throws RecognitionException [1]
    {   
        try 
    	{
            // P.g:14:7: ( 'if' expr 'then' stat ( 'else' stat )? | ID '=' expr )
            int alt5 = 2;
            int LA5_0 = input.LA(1);
            
            if ( (LA5_0 == 11) )
            {
                alt5 = 1;
            }
            else if ( (LA5_0 == ID) )
            {
                alt5 = 2;
            }
            else 
            {
                NoViableAltException nvae_d5s0 =
                    new NoViableAltException("14:1: stat : ( 'if' expr 'then' stat ( 'else' stat )? | ID '=' expr );", 5, 0, input);
            
                throw nvae_d5s0;
            }
            switch (alt5) 
            {
                case 1 :
                    // P.g:14:7: 'if' expr 'then' stat ( 'else' stat )?
                    {
                    	Match(input,11,FOLLOW_11_in_stat79); 
                    	PushFollow(FOLLOW_expr_in_stat81);
                    	expr();
                    	followingStackPointer_--;

                    	Match(input,12,FOLLOW_12_in_stat83); 
                    	PushFollow(FOLLOW_stat_in_stat85);
                    	stat();
                    	followingStackPointer_--;

                    	// P.g:14:29: ( 'else' stat )?
                    	int alt4 = 2;
                    	int LA4_0 = input.LA(1);
                    	
                    	if ( (LA4_0 == 13) )
                    	{
                    	    alt4 = 1;
                    	}
                    	switch (alt4) 
                    	{
                    	    case 1 :
                    	        // P.g:14:30: 'else' stat
                    	        {
                    	        	Match(input,13,FOLLOW_13_in_stat88); 
                    	        	PushFollow(FOLLOW_stat_in_stat90);
                    	        	stat();
                    	        	followingStackPointer_--;

                    	        
                    	        }
                    	        break;
                    	
                    	}

                    
                    }
                    break;
                case 2 :
                    // P.g:15:7: ID '=' expr
                    {
                    	Match(input,ID,FOLLOW_ID_in_stat100); 
                    	Match(input,14,FOLLOW_14_in_stat102); 
                    	PushFollow(FOLLOW_expr_in_stat104);
                    	expr();
                    	followingStackPointer_--;

                    
                    }
                    break;
            
            }
        }
        catch (RecognitionException re) 
    	{
            ReportError(re);
            Recover(input,re);
        }
        finally 
    	{
        }
        return ;
    }
    // $ANTLR end stat

    
    // $ANTLR start expr
    // P.g:18:1: expr : ( INT | 'true' );
    public void expr() // throws RecognitionException [1]
    {   
        try 
    	{
            // P.g:18:7: ( INT | 'true' )
            // P.g:
            {
            	if ( input.LA(1) == INT || input.LA(1) == 15 ) 
            	{
            	    input.Consume();
            	    errorRecovery = false;
            	}
            	else 
            	{
            	    MismatchedSetException mse =
            	        new MismatchedSetException(null,input);
            	    RecoverFromMismatchedSet(input,mse,FOLLOW_set_in_expr0);    throw mse;
            	}

            
            }
    
        }
        catch (RecognitionException re) 
    	{
            ReportError(re);
            Recover(input,re);
        }
        finally 
    	{
        }
        return ;
    }
    // $ANTLR end expr


	private void InitializeCyclicDFAs()
	{
	}

 

    public static readonly BitSet FOLLOW_decl_in_prog23 = new BitSet(new ulong[]{0x0000000000000E12UL});
    public static readonly BitSet FOLLOW_stat_in_prog26 = new BitSet(new ulong[]{0x0000000000000812UL});
    public static readonly BitSet FOLLOW_type_in_decl36 = new BitSet(new ulong[]{0x0000000000000010UL});
    public static readonly BitSet FOLLOW_ID_in_decl38 = new BitSet(new ulong[]{0x0000000000000180UL});
    public static readonly BitSet FOLLOW_7_in_decl41 = new BitSet(new ulong[]{0x0000000000000010UL});
    public static readonly BitSet FOLLOW_ID_in_decl43 = new BitSet(new ulong[]{0x0000000000000180UL});
    public static readonly BitSet FOLLOW_8_in_decl47 = new BitSet(new ulong[]{0x0000000000000002UL});
    public static readonly BitSet FOLLOW_set_in_type0 = new BitSet(new ulong[]{0x0000000000000002UL});
    public static readonly BitSet FOLLOW_11_in_stat79 = new BitSet(new ulong[]{0x0000000000008020UL});
    public static readonly BitSet FOLLOW_expr_in_stat81 = new BitSet(new ulong[]{0x0000000000001000UL});
    public static readonly BitSet FOLLOW_12_in_stat83 = new BitSet(new ulong[]{0x0000000000000810UL});
    public static readonly BitSet FOLLOW_stat_in_stat85 = new BitSet(new ulong[]{0x0000000000002002UL});
    public static readonly BitSet FOLLOW_13_in_stat88 = new BitSet(new ulong[]{0x0000000000000810UL});
    public static readonly BitSet FOLLOW_stat_in_stat90 = new BitSet(new ulong[]{0x0000000000000002UL});
    public static readonly BitSet FOLLOW_ID_in_stat100 = new BitSet(new ulong[]{0x0000000000004000UL});
    public static readonly BitSet FOLLOW_14_in_stat102 = new BitSet(new ulong[]{0x0000000000008020UL});
    public static readonly BitSet FOLLOW_expr_in_stat104 = new BitSet(new ulong[]{0x0000000000000002UL});
    public static readonly BitSet FOLLOW_set_in_expr0 = new BitSet(new ulong[]{0x0000000000000002UL});

}
-------------- next part --------------
using System;
using System.Collections.Generic;
using System.Text;

using Antlr.Runtime;
using Antlr.Runtime.Debug;
using Antlr.Runtime.Tree;

namespace AntlrExample
{
    class Program
    {
        static void Main(string[] args)
        {
            // create the lexer attached to stdin
            ANTLRStringStream input = new ANTLRStringStream("int i; i=4;");
            PLexer lexer = new PLexer(input);
            // create the buffer of tokens between the lexer and parser
            CommonTokenStream tokens = new CommonTokenStream(lexer);
            // create a debug event listener that builds parse trees
            ParseTreeBuilder builder = new ParseTreeBuilder("prog");
            // create the parser attached to the token buffer
            // and tell it which debug event listener to use
            PParser parser = new PParser(tokens, builder);
            // launch the parser starting at rule prog
            parser.prog();
        }


        private static void printTree(CommonTree t, int indent)
        {
            if (t != null)
            {
                StringBuilder sb = new StringBuilder(indent);
                for (int i = 0; i < indent; i++)
                {
                    sb = sb.Append("   ");
                }

                for (int i = 0; i < t.ChildCount; i++)
                {
                    System.Console.WriteLine(sb.ToString() + t.GetChild(i).ToString());
                    printTree((CommonTree)t.GetChild(i), indent + 1);
                }
            }
        }

    }
}

From ifnubima at gmail.com  Thu May 24 17:59:56 2007
From: ifnubima at gmail.com (Ifnu _)
Date: Fri, 25 May 2007 07:59:56 +0700
Subject: [antlr-interest] explenatory system
Message-ID: <769fc4f00705241759ye3a31b4u32cba047a094379a@mail.gmail.com>

hi all,

i need your advice, i want to create a c parser that emit intelligent
or at least complete explenatory when recognition exception occurs.
i've read abbout paraphrase but it's not really what i'm looking for.

for example, if user type this code :

for(i=0;i<10,i++)

the paser should say something like this :

there are error in for clause, you sould use ";" instead of ","

or said something that more intelligent than explenation above, what
i'm looking for is a way to trap exception for most of rule and create
intelligent explenation about what goes wrong. i dont expect complete
technical explenation on how i could do that, i just need ideas or
approach i can use to construct intelligent explenation.

i've evaluate C.g grammer created by terrence in antlr v3 example, and
i want to use it as starting point.

thank you for your attention :D


-- 
http://www.nagasakti.or.id/roller/ifnu
regards

From ifnubima at gmail.com  Thu May 24 18:02:09 2007
From: ifnubima at gmail.com (Ifnu _)
Date: Fri, 25 May 2007 08:02:09 +0700
Subject: [antlr-interest] adding header for lexer class in grammar file
Message-ID: <769fc4f00705241802v3f7debe3k35ce76ceecffa0c3@mail.gmail.com>

hi all,

i need to add some header, especially statement to add package, in
lexer class, i use the default @header{} options but it only appears
in parser class, but it not appears in lexer class.
FYI : i use antlr v3.

thanks
-- 
http://www.nagasakti.or.id/roller/ifnu
regards

From ivojimenez at gmail.com  Fri May 25 01:40:12 2007
From: ivojimenez at gmail.com (Ivo Jimenez)
Date: Fri, 25 May 2007 01:40:12 -0700
Subject: [antlr-interest] ASTFrame for V3
Message-ID: <86d8a57b0705250140v48a8819al1de46c18c955694d@mail.gmail.com>

Is there a way of graphically displaying an AST in V3.

Thanks :)
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070525/7204f86c/attachment.html 

From jaluber at gmx.de  Fri May 25 01:44:29 2007
From: jaluber at gmx.de (Johannes Luber)
Date: Fri, 25 May 2007 10:44:29 +0200
Subject: [antlr-interest] adding header for lexer class in grammar file
In-Reply-To: <769fc4f00705241802v3f7debe3k35ce76ceecffa0c3@mail.gmail.com>
References: <769fc4f00705241802v3f7debe3k35ce76ceecffa0c3@mail.gmail.com>
Message-ID: <4656A1ED.1040101@gmx.de>

Ifnu _ wrote:
> hi all,
> 
> i need to add some header, especially statement to add package, in
> lexer class, i use the default @header{} options but it only appears
> in parser class, but it not appears in lexer class.
> FYI : i use antlr v3.

In a combined gramar, one has to prefix commands with @lexer:: if the
command has to be included in the lexer file.

Best regards,
Johannes Luber

From open.zone at virgin.net  Fri May 25 03:12:15 2007
From: open.zone at virgin.net (Micheal J)
Date: Fri, 25 May 2007 11:12:15 +0100
Subject: [antlr-interest] Is "-debug" command line option broken with
	language=CSharp?
In-Reply-To: <8a0c37020705241712j3d653934j54a49decb5347320@mail.gmail.com>
Message-ID: <000c01c79eb5$2ee2c070$c704a8c0@hercules>

Hi Takashi,

Thanks for the report.

> I want to build a parse tree with my grammar, and as my first 
> step, I refer to this Wiki page: 
> http://www.antlr.org/wiki/pages/viewpage.action?pageId=1760
> 

[SNIP]...

> But when I compiled PParser.cs, I got 2 types of error messages:
> 
> 1st:
> error CS0117: 'Antlr.Runtime.Debug.IDebugEventListener' does 
> not contain a definition for 'location' (this error occurred 5 times)

Yes the debug codegen output was broken :(

It has now been fixed with respect to this issue:
	
http://fisheye2.cenqua.com/browse/antlr/src/org/antlr/codegen/templates/CSha
rp/Dbg.stg?r1=3676&r2=3787


> 2nd:
> error CS0103: The name 'nvae' does not exist in the current 
> context (this erro occurred 1 time)
...
> C:\Work\AntlrExample\AntlrExample\PParser.cs(393,42): error CS0103: The
name 'nvae' does not exist in the current context

There is no entity named 'nvae' anywhere in the PParser.cs file. Is this a
real error?


Until the next "daily" build, you can grab the latest C# Dbg.stg template
group file from:
	
http://fisheye2.cenqua.com/browse/~raw,r=3787/antlr/src/org/antlr/codegen/te
mplates/CSharp/Dbg.stg


Micheal

-----------------------
The best way to contact me is via the list/forum. My time is very limited.


From gudnabrsam at yahoo.com  Fri May 25 07:09:06 2007
From: gudnabrsam at yahoo.com (Matt Benson)
Date: Fri, 25 May 2007 07:09:06 -0700 (PDT)
Subject: [antlr-interest] Mantra grammar warning.
In-Reply-To: <46560308.60906@sezampro.com>
Message-ID: <467082.4567.qm@web55102.mail.re4.yahoo.com>

ANTLRWorks?

-Matt

--- Bosko Ivanisevic <ivanisev at sezampro.com> wrote:

> I was looking at the definition of Mantra language
> to see how are things
> working and I've noticed that grammar checking in
> ANTLRWorks issues
> following warning:
> 
> warning(200): Mantra.g:393:3: Decision can match
> input such as "'else'"
> using multiple alternatives: 1, 2
> As a result, alternative(s) 2 were disabled for that
> input
> 
> Can anyone tell me what is wrong with the
> 'statement' rule definition
> and how can it be fixed?
> 
> BTW what are the meanings of various colors (green,
> red) used in Parse
> Tree window in ANTLRWorks in debug mode?
> 
> 
> 



      ____________________________________________________________________________________Shape Yahoo! in your own image.  Join our Network Research Panel today!   http://surveylink.yahoo.com/gmrs/yahoo_panel_invite.asp?a=7 



From gudnabrsam at yahoo.com  Fri May 25 07:42:22 2007
From: gudnabrsam at yahoo.com (Matt Benson)
Date: Fri, 25 May 2007 07:42:22 -0700 (PDT)
Subject: [antlr-interest] ASTFrame for V3
In-Reply-To: <86d8a57b0705250140v48a8819al1de46c18c955694d@mail.gmail.com>
Message-ID: <316358.54192.qm@web55106.mail.re4.yahoo.com>

ANTLRWorks?

-Matt

--- Ivo Jimenez <ivojimenez at gmail.com> wrote:

> Is there a way of graphically displaying an AST in
> V3.
> 
> Thanks :)
> 



       
____________________________________________________________________________________You snooze, you lose. Get messages ASAP with AutoCheck
in the all-new Yahoo! Mail Beta.
http://advision.webevents.yahoo.com/mailbeta/newmail_html.html

From gudnabrsam at yahoo.com  Fri May 25 07:43:15 2007
From: gudnabrsam at yahoo.com (Matt Benson)
Date: Fri, 25 May 2007 07:43:15 -0700 (PDT)
Subject: [antlr-interest] Mantra grammar warning.
In-Reply-To: <467082.4567.qm@web55102.mail.re4.yahoo.com>
Message-ID: <404495.75804.qm@web55110.mail.re4.yahoo.com>

That's weird.  I resent this in response to the
correct message--I have no idea how this response got
onto this thread!

-Matt

--- Matt Benson <gudnabrsam at yahoo.com> wrote:

> ANTLRWorks?
> 
> -Matt
> 
> --- Bosko Ivanisevic <ivanisev at sezampro.com> wrote:
> 
> > I was looking at the definition of Mantra language
> > to see how are things
> > working and I've noticed that grammar checking in
> > ANTLRWorks issues
> > following warning:
> > 
> > warning(200): Mantra.g:393:3: Decision can match
> > input such as "'else'"
> > using multiple alternatives: 1, 2
> > As a result, alternative(s) 2 were disabled for
> that
> > input
> > 
> > Can anyone tell me what is wrong with the
> > 'statement' rule definition
> > and how can it be fixed?
> > 
> > BTW what are the meanings of various colors
> (green,
> > red) used in Parse
> > Tree window in ANTLRWorks in debug mode?
> > 
> > 
> > 
> 
> 
> 
>      
>
____________________________________________________________________________________Shape
> Yahoo! in your own image.  Join our Network Research
> Panel today!  
>
http://surveylink.yahoo.com/gmrs/yahoo_panel_invite.asp?a=7
> 
> 
> 
> 



       
____________________________________________________________________________________Building a website is a piece of cake. Yahoo! Small Business gives you all the tools to get online.
http://smallbusiness.yahoo.com/webhosting 

From parrt at cs.usfca.edu  Fri May 25 08:18:18 2007
From: parrt at cs.usfca.edu (Terence Parr)
Date: Fri, 25 May 2007 08:18:18 -0700
Subject: [antlr-interest] ASTFrame for V3
In-Reply-To: <86d8a57b0705250140v48a8819al1de46c18c955694d@mail.gmail.com>
References: <86d8a57b0705250140v48a8819al1de46c18c955694d@mail.gmail.com>
Message-ID: <E2E226EE-933A-405D-83FB-668EDE9ED5EC@cs.usfca.edu>

there is a DOT generation method on the CommonTree I think.
Ter
On May 25, 2007, at 1:40 AM, Ivo Jimenez wrote:

> Is there a way of graphically displaying an AST in V3.
>
> Thanks :)


From laguest at archangeli.co.uk  Fri May 25 11:20:52 2007
From: laguest at archangeli.co.uk (Luke A. Guest)
Date: Fri, 25 May 2007 19:20:52 +0100
Subject: [antlr-interest] Getting te 1-liner to work
Message-ID: <1180117252.7574.83.camel@rogue>

Hi,

Has anyone actually managed to get this to work?

javac -cp ../lib/stringtemplate-3.0.jar:../lib/antlr-2.7.7.jar -d .
org/antlr/Tool.java org/antlr/*/*.java org/antlr/*/*/*.java

I just get this back:

error: cannot read: org/antlr/*/*/*.java

My current dir is antlr-3.0/src and I'm on Linux with javac v1.5.0_11 on
Gentoo.

I've also tried adding the current dir to the classpath.

Thanks,
Luke.



From lgcraymer at yahoo.com  Fri May 25 11:27:34 2007
From: lgcraymer at yahoo.com (Loring Craymer)
Date: Fri, 25 May 2007 11:27:34 -0700 (PDT)
Subject: [antlr-interest] Getting te 1-liner to work
In-Reply-To: <1180117252.7574.83.camel@rogue>
Message-ID: <926034.31663.qm@web55905.mail.re3.yahoo.com>

Luke--

I suspect that your "problem" is the result of the
repackaging effort.  There used to be subdirectories
of runtime that had java source (*/*/*.java); those
have been moved.  Change the */*/* stuff to point to
the runtime directory and its children.

--Loring

--- "Luke A. Guest" <laguest at archangeli.co.uk> wrote:

> Hi,
> 
> Has anyone actually managed to get this to work?
> 
> javac -cp
> ../lib/stringtemplate-3.0.jar:../lib/antlr-2.7.7.jar
> -d .
> org/antlr/Tool.java org/antlr/*/*.java
> org/antlr/*/*/*.java
> 
> I just get this back:
> 
> error: cannot read: org/antlr/*/*/*.java
> 
> My current dir is antlr-3.0/src and I'm on Linux
> with javac v1.5.0_11 on
> Gentoo.
> 
> I've also tried adding the current dir to the
> classpath.
> 
> Thanks,
> Luke.
> 
> 
> 



       
____________________________________________________________________________________Ready for the edge of your seat? 
Check out tonight's top picks on Yahoo! TV. 
http://tv.yahoo.com/

From laguest at archangeli.co.uk  Fri May 25 11:39:17 2007
From: laguest at archangeli.co.uk (Luke A. Guest)
Date: Fri, 25 May 2007 19:39:17 +0100
Subject: [antlr-interest] Getting te 1-liner to work
In-Reply-To: <1180117252.7574.83.camel@rogue>
References: <1180117252.7574.83.camel@rogue>
Message-ID: <1180118357.7574.88.camel@rogue>

Hi,

Well, I managed to compile the source in place, so I thought I'd send it
to the list.

$ cd src
$ javac
-cp ../lib/stringtemplate-3.0.jar:../lib/antlr-2.7.7.jar:../lib/antlr-3.0.jar -d . org/antlr/Tool.java org/antlr/analysis/*.java org/antlr/codegen/*.java org/antlr/misc/*.java org/antlr/tool/*.java

You need the antlr-3.0.jar because it needs the runtime.

$ cd ../runtime/Java/src/
$ javac
-cp ../../../lib/stringtemplate-3.0.jar:../../../lib/antlr-2.7.7.jar:../../../src/ -d . org/antlr/runtime/*/*.java org/antlr/runtime/*.java

At this point everything is compiled and you can then go on to use the
following classpath while developing:

"-cp antlr-3.0/src:antlr-3.0/runtime/Java/src"

Thanks,
Luke.




From laguest at archangeli.co.uk  Fri May 25 11:58:16 2007
From: laguest at archangeli.co.uk (Luke A. Guest)
Date: Fri, 25 May 2007 19:58:16 +0100
Subject: [antlr-interest] Getting te 1-liner to work
In-Reply-To: <926034.31663.qm@web55905.mail.re3.yahoo.com>
References: <926034.31663.qm@web55905.mail.re3.yahoo.com>
Message-ID: <1180119496.7574.90.camel@rogue>

On Fri, 2007-05-25 at 11:27 -0700, Loring Craymer wrote:
> Luke--
> 
> I suspect that your "problem" is the result of the
> repackaging effort.  There used to be subdirectories
> of runtime that had java source (*/*/*.java); those
> have been moved.  Change the */*/* stuff to point to
> the runtime directory and its children.

Yeah, that doesn't actually work either. Another way is to remove the
runtime directory and create a symbolic link to the
runtime/Java/src/org/antlr/runtime in it's place, (re)move the test
directory if it's not required and then the 1 liner works.

Luke.



From gudnabrsam at yahoo.com  Fri May 25 12:07:31 2007
From: gudnabrsam at yahoo.com (Matt Benson)
Date: Fri, 25 May 2007 12:07:31 -0700 (PDT)
Subject: [antlr-interest] Getting te 1-liner to work
In-Reply-To: <1180119496.7574.90.camel@rogue>
Message-ID: <789864.46982.qm@web55106.mail.re4.yahoo.com>

I can resist it no longer.  I've got a one-liner that
works, too:

ant

-Matt

--- "Luke A. Guest" <laguest at archangeli.co.uk> wrote:

> On Fri, 2007-05-25 at 11:27 -0700, Loring Craymer
> wrote:
> > Luke--
> > 
> > I suspect that your "problem" is the result of the
> > repackaging effort.  There used to be
> subdirectories
> > of runtime that had java source (*/*/*.java);
> those
> > have been moved.  Change the */*/* stuff to point
> to
> > the runtime directory and its children.
> 
> Yeah, that doesn't actually work either. Another way
> is to remove the
> runtime directory and create a symbolic link to the
> runtime/Java/src/org/antlr/runtime in it's place,
> (re)move the test
> directory if it's not required and then the 1 liner
> works.
> 
> Luke.
> 
> 
> 



      ____________________________________________________________________________________Fussy? Opinionated? Impossible to please? Perfect.  Join Yahoo!'s user panel and lay it on us. http://surveylink.yahoo.com/gmrs/yahoo_panel_invite.asp?a=7 


From gudnabrsam at yahoo.com  Fri May 25 12:31:17 2007
From: gudnabrsam at yahoo.com (Matt Benson)
Date: Fri, 25 May 2007 12:31:17 -0700 (PDT)
Subject: [antlr-interest] Getting te 1-liner to work
In-Reply-To: <1180120867.7574.92.camel@rogue>
Message-ID: <570139.77768.qm@web55110.mail.re4.yahoo.com>


--- "Luke A. Guest" <laguest at archangeli.co.uk> wrote:

> On Fri, 2007-05-25 at 12:07 -0700, Matt Benson
> wrote:
> > I can resist it no longer.  I've got a one-liner
> that
> > works, too:
> > 
> > ant
> 
> Actually, it doesn't, because it doesn't build the
> runtime into the jar.

In the 3.0 release it doesn't--I was off-list for
awhile--but the version I sent to the list a couple of
hours after 3.0 was released does.  ;)

-Matt

> 
> Luke.
> 
> 
> 



       
____________________________________________________________________________________Be a better Heartthrob. Get better relationship answers from someone who knows. Yahoo! Answers - Check it out. 
http://answers.yahoo.com/dir/?link=list&sid=396545433

From pink at odahoda.de  Fri May 25 12:22:07 2007
From: pink at odahoda.de (Benjamin Niemann)
Date: Fri, 25 May 2007 21:22:07 +0200
Subject: [antlr-interest] Getting te 1-liner to work
References: <926034.31663.qm@web55905.mail.re3.yahoo.com>
	<1180119496.7574.90.camel@rogue>
Message-ID: <f37d0v$fia$1@sea.gmane.org>

Luke A. Guest wrote:

> On Fri, 2007-05-25 at 11:27 -0700, Loring Craymer wrote:
>> Luke--
>> 
>> I suspect that your "problem" is the result of the
>> repackaging effort.  There used to be subdirectories
>> of runtime that had java source (*/*/*.java); those
>> have been moved.  Change the */*/* stuff to point to
>> the runtime directory and its children.
> 
> Yeah, that doesn't actually work either. Another way is to remove the
> runtime directory and create a symbolic link to the
> runtime/Java/src/org/antlr/runtime in it's place, (re)move the test
> directory if it's not required and then the 1 liner works.

Ah, click... That's the trick, I'm using since the runtime has been moved. I
should have told you, but it somehow slipped away...

-- 
Benjamin Niemann
Email: pink at odahoda dot de
WWW: http://pink.odahoda.de/


From pink at odahoda.de  Fri May 25 12:25:12 2007
From: pink at odahoda.de (Benjamin Niemann)
Date: Fri, 25 May 2007 21:25:12 +0200
Subject: [antlr-interest] Getting te 1-liner to work
References: <1180119496.7574.90.camel@rogue>
	<789864.46982.qm@web55106.mail.re4.yahoo.com>
Message-ID: <f37d6o$fia$2@sea.gmane.org>

Matt Benson wrote:

> I can resist it no longer.  I've got a one-liner that
> works, too:
> 
> ant

Sure, but then you have a .jar - which is very uncomfortable to work with,
if you just want to test minor changes in a codegen template.

-- 
Benjamin Niemann
Email: pink at odahoda dot de
WWW: http://pink.odahoda.de/


From gudnabrsam at yahoo.com  Fri May 25 12:56:36 2007
From: gudnabrsam at yahoo.com (Matt Benson)
Date: Fri, 25 May 2007 12:56:36 -0700 (PDT)
Subject: [antlr-interest] Getting te 1-liner to work
In-Reply-To: <f37d6o$fia$2@sea.gmane.org>
Message-ID: <827576.51167.qm@web55111.mail.re4.yahoo.com>


--- Benjamin Niemann <pink at odahoda.de> wrote:

> Matt Benson wrote:
> 
> > I can resist it no longer.  I've got a one-liner
> that
> > works, too:
> > 
> > ant
> 
> Sure, but then you have a .jar - which is very
> uncomfortable to work with,
> if you just want to test minor changes in a codegen
> template.
> 

'ant compile'

This or even the default build target leaves your
classfiles in build/classes and build/rtclasses in the
latest build.xml .  To do otherwise would be to
forfeit incremental builds.

;)

-Matt


> -- 
> Benjamin Niemann
> Email: pink at odahoda dot de
> WWW: http://pink.odahoda.de/
> 
> 



       
____________________________________________________________________________________Take the Internet to Go: Yahoo!Go puts the Internet in your pocket: mail, news, photos & more. 
http://mobile.yahoo.com/go?refer=1GNXIC

From dirty at apple.com  Fri May 25 13:07:27 2007
From: dirty at apple.com (Cameron Esfahani)
Date: Fri, 25 May 2007 13:07:27 -0700
Subject: [antlr-interest] Tree walker exception handling
In-Reply-To: <EA52801A-4F1D-4CA3-8460-D4B62297CFB1@apple.com>
References: <EA52801A-4F1D-4CA3-8460-D4B62297CFB1@apple.com>
Message-ID: <69D40FAB-D892-4F90-BA54-90529B9FEE3E@apple.com>

I know the questions are a bit open-ended, but does anyone have any  
suggestions?

On May 22, 2007, at 5:25 PM, Cameron Esfahani wrote:

> I'm developing a language that supports assignment:
>
> foo = 125
> bar = foo + 1
>
> Obviously, I need to create a symbol table to hold all of the  
> assignment operations, and then validate all symbols against that  
> table.
>
> From what I can tell, I should be doing this in a tree walker  
> pass.  The problem I'm having is, what do I do when I find a  
> logical versus syntactical error?  For example, when the user  
> erroneously supplies a symbol that doesn't exist?
>
> Right now, I'm just throwing a RecognitionException from within the  
> relevant tree walker rule, and I have a @rulecatch which grabs this:
>
> @rulecatch {
> 	catch ( RecognitionException e ) {
> 		System.exit( 0 );
> 	}
> }
>
> I call System.exit() because I don't want the exception stack frame  
> printing out.  It would scare my users.
>
> In the handler, I want to print out some useful information, like  
> the name and line number of the undefined symbol.  Can I still get  
> this lexer information from a tree walker?
>
> Is it appropriate to use the RecognitionException for these kind of  
> logical errors?  I'm almost wondering if I should create my own  
> class of errors and then throw them as appropriate.
>

Cameron Esfahani
dirty at apple.com

"Americans are very skilled at creating a custom meaning from  
something that's mass-produced."

Ann Powers


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070525/9019d758/attachment.html 

From lgcraymer at yahoo.com  Fri May 25 13:21:07 2007
From: lgcraymer at yahoo.com (Loring Craymer)
Date: Fri, 25 May 2007 13:21:07 -0700 (PDT)
Subject: [antlr-interest] Tree walker exception handling
In-Reply-To: <69D40FAB-D892-4F90-BA54-90529B9FEE3E@apple.com>
Message-ID: <938431.67920.qm@web55915.mail.re3.yahoo.com>

Take a look at Ter's ErrorManager.java in the tool
directory.  It has a lot of extraneous stuff (as far
as your application is concerned), but is not a bad
model for error accumulation and reporting.  Throwing
exceptions for semantic errors is not user-friendly: 
you really want to report back as many semantic
problems as the user can handle, not just the first
one.

--Loring

--- Cameron Esfahani <dirty at apple.com> wrote:

> I know the questions are a bit open-ended, but does
> anyone have any  
> suggestions?
> 
> On May 22, 2007, at 5:25 PM, Cameron Esfahani wrote:
> 
> > I'm developing a language that supports
> assignment:
> >
> > foo = 125
> > bar = foo + 1
> >
> > Obviously, I need to create a symbol table to hold
> all of the  
> > assignment operations, and then validate all
> symbols against that  
> > table.
> >
> > From what I can tell, I should be doing this in a
> tree walker  
> > pass.  The problem I'm having is, what do I do
> when I find a  
> > logical versus syntactical error?  For example,
> when the user  
> > erroneously supplies a symbol that doesn't exist?
> >
> > Right now, I'm just throwing a
> RecognitionException from within the  
> > relevant tree walker rule, and I have a @rulecatch
> which grabs this:
> >
> > @rulecatch {
> > 	catch ( RecognitionException e ) {
> > 		System.exit( 0 );
> > 	}
> > }
> >
> > I call System.exit() because I don't want the
> exception stack frame  
> > printing out.  It would scare my users.
> >
> > In the handler, I want to print out some useful
> information, like  
> > the name and line number of the undefined symbol. 
> Can I still get  
> > this lexer information from a tree walker?
> >
> > Is it appropriate to use the RecognitionException
> for these kind of  
> > logical errors?  I'm almost wondering if I should
> create my own  
> > class of errors and then throw them as
> appropriate.
> >
> 
> Cameron Esfahani
> dirty at apple.com
> 
> "Americans are very skilled at creating a custom
> meaning from  
> something that's mass-produced."
> 
> Ann Powers
> 
> 
> 



       
____________________________________________________________________________________Luggage? GPS? Comic books? 
Check out fitting gifts for grads at Yahoo! Search
http://search.yahoo.com/search?fr=oni_on_mail&p=graduation+gifts&cs=bz

From service at sharpplus.com  Sat May 26 00:37:17 2007
From: service at sharpplus.com (=?iso-8859-1?Q?service?=)
Date: Sat, 26 May 2007 07:37:17 +0000
Subject: [antlr-interest] Writing Delphi Target for Antlr3
Message-ID: <20070526073717.5188.qmail@server314.com>

Dear Friends

      I am now writing Delphi Target for  Antlr 3 . now I encounter a problem .Delphi unlike the other language (Java, C#, etc). it can not declare one variable at function body.

for example:
     In Java, you can declare int alt1 in function body
    // $ANTLR start IDENTIFIER
    public final void mIDENTIFIER() throws RecognitionException {
        try {
            int _type = IDENTIFIER;
            // C.g:12:4: ( LETTER ( LETTER | '0' .. '9' )* )
            // C.g:12:4: LETTER ( LETTER | '0' .. '9' )*
            {
            mLETTER();
            // C.g:12:11: ( LETTER | '0' .. '9' )*
            loop1:
            do {
                int alt1=2;
                int LA1_0 = input.LA(1);

                if ( (LA1_0=='$'||(LA1_0>='0' && LA1_0<='9')||(LA1_0>='A' && LA1_0<='Z')||LA1_0=='_'||(LA1_0>='a' && LA1_0<='z')) ) {
                    alt1=1;
                }

      but in Delphi, you must declare it in var section like below
    
procedure TCLexer.mIDENTIFIER();
var
  _type:Integer;
 alt1:Integer; <======must declare it at var section
 LA1_0 :Char;
begin
    try
        _type := IDENTIFIER;
        // ruleBlockSingleAlt:C.g:12:4: ( LETTER ( LETTER | '0' .. '9' )* )
        // C.g:12:4: LETTER ( LETTER | '0' .. '9' )*
        begin
        mLETTER();
        // closureBlock:C.g:12:11: ( LETTER | '0' .. '9' )*
        repeat
            alt1:=2;
            LA1_0 := input.LA(1);
           
            if ( ((LA1_0='$') or ((LA1_0>='0') and ( LA1_0<='9')) or ((LA1_0>='A') and ( LA1_0<='Z')) or (LA1_0='_') or ((LA1_0>='a') and ( LA1_0<='z'))) ) then begin
                alt1:=1;
            end;

   But I  look the string template , I found in the lexerRule template, there is no decisionNumber parameter, then I try to use the block.decisionNumber like below

lexerRule(name, ruleName,nakedBlock,ruleDescriptor,block,memoize) ::= <<
// $ANTLR start <ruleName>
procedure T<name>.m<ruleName>(<ruleDescriptor.parameterScope:parameterScope(scope=it)>);
var
  _type:Integer;
  alt<block.decisionNumber>}>:Integer; <====== I try to get the block decisionNumber
begin
    <if(trace)>traceIn("<ruleName>", <ruleDescriptor.index>);<endif>
    <ruleDeclarations()>
    try
<if(nakedBlock)>
        <ruleMemoization(name=ruleName)>
        <lexerRuleLabelDefs()>
        <ruleDescriptor.actions.init>
        <block><\n>
<else>
        _type := <ruleName>;
        <ruleMemoization(name=ruleName)>
        <lexerRuleLabelDefs()>
        <ruleDescriptor.actions.init>
        <block>
        <ruleCleanUp()>
        self._type := _type;
        <(ruleDescriptor.actions.after):execAction()>
<endif>
    finally
        <if(trace)>traceOut("<ruleName>", <ruleDescriptor.index>);<endif>
        <memoize()>
    end;
end;
// $ANTLR end <ruleName>
>>

         But it seems that sometimes block's decisionNumber is empty, and block can be embeded into other block so I can not get all DFA decisionnumber. now I want to know how to iterate all the blocks in rule to  get  their  decisonNumber with stringtemplate?
       
          Thanks in advance!

From laguest at archangeli.co.uk  Sat May 26 07:42:29 2007
From: laguest at archangeli.co.uk (Luke A. Guest)
Date: Sat, 26 May 2007 15:42:29 +0100
Subject: [antlr-interest] Writing Delphi Target for Antlr3
In-Reply-To: <20070526073717.5188.qmail@server314.com>
References: <20070526073717.5188.qmail@server314.com>
Message-ID: <1180190549.7574.95.camel@rogue>

On Sat, 2007-05-26 at 07:37 +0000, service wrote:
> Dear Friends
> 
>       I am now writing Delphi Target for  Antlr 3 . now I encounter a problem .Delphi unlike the other language (Java, C#, etc). it can not declare one variable at function body.
> 
> for example:
>      In Java, you can declare int alt1 in function body

In Ada you can do the following:

declare

  Some_Var : Some_Type;

begin

  <stmts>

end;

Surely, Delphi provides something similar to this block?

Thanks,
Luke.



From service at sharpplus.com  Sat May 26 07:56:54 2007
From: service at sharpplus.com (=?iso-8859-1?Q?service?=)
Date: Sat, 26 May 2007 14:56:54 +0000
Subject: [antlr-interest] Writing Delphi Target for Antlr3
Message-ID: <20070526145654.31198.qmail@server314.com>


Yes  , Delphi is OOP pascal created by the borland corp.. As far as I know , the Ada was designed upon pascal.


>  -------Original Message-------
>  From: Luke A. Guest <laguest at archangeli.co.uk>
>  Subject: Re: [antlr-interest] Writing Delphi Target for Antlr3
>  Sent: 26 May '07 14:42
>  
>  On Sat, 2007-05-26 at 07:37 +0000, service wrote:
>  > Dear Friends
>  >
>  >       I am now writing Delphi Target for  Antlr 3 . now I encounter a problem .Delphi unlike the other language (Java, C#, etc). it can not declare one variable at function body.
>  >
>  > for example:
>  >      In Java, you can declare int alt1 in function body
>  
>  In Ada you can do the following:
>  
>  declare
>  
>    Some_Var : Some_Type;
>  
>  begin
>  
>    <stmts>
>  
>  end;
>  
>  Surely, Delphi provides something similar to this block?
>  
>  Thanks,
>  Luke.
>  
>  
>  

From laguest at archangeli.co.uk  Sat May 26 08:02:25 2007
From: laguest at archangeli.co.uk (Luke A. Guest)
Date: Sat, 26 May 2007 16:02:25 +0100
Subject: [antlr-interest] Writing Delphi Target for Antlr3
In-Reply-To: <20070526145654.31198.qmail@server314.com>
References: <20070526145654.31198.qmail@server314.com>
Message-ID: <1180191745.7574.100.camel@rogue>

On Sat, 2007-05-26 at 14:56 +0000, service wrote:
> Yes  , Delphi is OOP pascal created by the borland corp.. As far as I know , the Ada was designed upon pascal.
> 

Kind of, it is Pascal-y, and there's bits of Algol in there also. But
believe me, it's a completely different beast compared to Pascal,
especially when you get into OOP.

It's been a while since I did any Pascal work, does Delphi separate
modules into a specification and a body, like Ada does? i.e.

-- Specification
package Mine is

  type My_Type is private; -- Hidden

  procedure Do_Something(Self : in out My_Type);

private

  type My_Type is ...; -- Implementation defined

end Mine;

package body Mine is

  procedure Do_Something(Self : in out My_Type) is

  begin
    null;
  end Do_Something;

end Mine;

Thanks,
Luke.



From service at sharpplus.com  Sat May 26 08:10:24 2007
From: service at sharpplus.com (=?iso-8859-1?Q?service?=)
Date: Sat, 26 May 2007 15:10:24 +0000
Subject: [antlr-interest] Writing Delphi Target for Antlr3
Message-ID: <20070526151024.9285.qmail@server314.com>


yes, similar structure as ada , although the concrete syntax are quite different.

best regards
chinshou
Sqlite Developer
SharpPlus Software Corp. Yokohama, Japan

>  -------Original Message-------
>  From: Luke A. Guest <laguest at archangeli.co.uk>
>  Subject: Re: [antlr-interest] Writing Delphi Target for Antlr3
>  Sent: 26 May '07 15:02
>  
>  On Sat, 2007-05-26 at 14:56 +0000, service wrote:
>  > Yes  , Delphi is OOP pascal created by the borland corp.. As far as I know , the Ada was designed upon pascal.
>  >
>  
>  Kind of, it is Pascal-y, and there's bits of Algol in there also. But
>  believe me, it's a completely different beast compared to Pascal,
>  especially when you get into OOP.
>  
>  It's been a while since I did any Pascal work, does Delphi separate
>  modules into a specification and a body, like Ada does? i.e.
>  
>  -- Specification
>  package Mine is
>  
>    type My_Type is private; -- Hidden
>  
>    procedure Do_Something(Self : in out My_Type);
>  
>  private
>  
>    type My_Type is ...; -- Implementation defined
>  
>  end Mine;
>  
>  package body Mine is
>  
>    procedure Do_Something(Self : in out My_Type) is
>  
>    begin
>      null;
>    end Do_Something;
>  
>  end Mine;
>  
>  Thanks,
>  Luke.
>  
>  
>  

From laguest at archangeli.co.uk  Sat May 26 08:18:42 2007
From: laguest at archangeli.co.uk (Luke A. Guest)
Date: Sat, 26 May 2007 16:18:42 +0100
Subject: [antlr-interest] Writing Delphi Target for Antlr3
In-Reply-To: <20070526151024.9285.qmail@server314.com>
References: <20070526151024.9285.qmail@server314.com>
Message-ID: <1180192722.7574.103.camel@rogue>

On Sat, 2007-05-26 at 15:10 +0000, service wrote:
> yes, similar structure as ada , although the concrete syntax are quite different.

But do they share the idea of a spec and a body separated out? If so,
would it be possible to see you Delphi.stg file? I'm just starting out
with this and am totally confused ;D

Thanks,
Luke.



From service at sharpplus.com  Sat May 26 08:46:35 2007
From: service at sharpplus.com (=?iso-8859-1?Q?service?=)
Date: Sat, 26 May 2007 15:46:35 +0000
Subject: [antlr-interest] Writing Delphi Target for Antlr3
Message-ID: <20070526154635.18913.qmail@server314.com>




>  -------Original Message-------
>  From: Luke A. Guest <laguest at archangeli.co.uk>
>  Subject: Re: [antlr-interest] Writing Delphi Target for Antlr3
>  Sent: 26 May '07 15:18
>  
>  On Sat, 2007-05-26 at 15:10 +0000, service wrote:
>  > yes, similar structure as ada , although the concrete syntax are quite different.
>  
>  But do they share the idea of a spec and a body separated out? If so,
>  would it be possible to see you Delphi.stg file? I'm just starting out
>  with this and am totally confused ;D
>  
>  Thanks,
>  Luke.
>  
>  
>  

From service at sharpplus.com  Sat May 26 08:47:01 2007
From: service at sharpplus.com (=?iso-8859-1?Q?service?=)
Date: Sat, 26 May 2007 15:47:01 +0000
Subject: [antlr-interest] Writing Delphi Target for Antlr3
Message-ID: <20070526154701.31635.qmail@server314.com>

It looks like I do not know more than you:). I also encounter the similar problem as you.If I can not extract the some needed information such as decisionNumber from string template, there will be no real progress with the target template.Until now, I even can not let the simplest lexer source pass the compilation.

best regards
chinshou
Sqlite Developer
SharpPlus Software Corp. Yokohama, Japan


>  -------Original Message-------
>  From: Luke A. Guest <laguest at archangeli.co.uk>
>  Subject: Re: [antlr-interest] Writing Delphi Target for Antlr3
>  Sent: 26 May '07 15:18
>  
>  On Sat, 2007-05-26 at 15:10 +0000, service wrote:
>  > yes, similar structure as ada , although the concrete syntax are quite different.
>  
>  But do they share the idea of a spec and a body separated out? If so,
>  would it be possible to see you Delphi.stg file? I'm just starting out
>  with this and am totally confused ;D
>  
>  Thanks,
>  Luke.
>  
>  
>  

From cameron.palmer at gmail.com  Sat May 26 09:04:26 2007
From: cameron.palmer at gmail.com (Cameron Palmer)
Date: Sat, 26 May 2007 11:04:26 -0500
Subject: [antlr-interest] ASTFrame for V3
In-Reply-To: <E2E226EE-933A-405D-83FB-668EDE9ED5EC@cs.usfca.edu>
References: <86d8a57b0705250140v48a8819al1de46c18c955694d@mail.gmail.com>
	<E2E226EE-933A-405D-83FB-668EDE9ED5EC@cs.usfca.edu>
Message-ID: <bc4938830705260904g4440468ckfe3a357d56d98acf@mail.gmail.com>

I got the following code fragment from Ter's book, and am using it to
generate the GraphViz DOT files. You should buy the book. :)

import org.antlr.runtime.*;
import org.antlr.runtime.tree.*;
import org.antlr.stringtemplate.*;

public class Main {
	public static void main(String args[]) {		
		try {
			ANTLRInputStream input = new ANTLRInputStream(System.in);
			SDFLexer lexer = new SDFLexer(input);
			CommonTokenStream tokens = new CommonTokenStream(lexer);
			SDFParser parser = new SDFParser(tokens);
			SDFParser.program_return r = parser.program();
			CommonTree t = (CommonTree)r.getTree();

			if( args.length>0 && args[0].equals("-dot") ) {
				DOTTreeGenerator gen = new DOTTreeGenerator();
				StringTemplate st = gen.toDOT(t);
				System.out.println(st);
			} else {
				System.out.println(t.toStringTree());
			}
			CommonTreeNodeStream nodes = new CommonTreeNodeStream(t);
			nodes.setTokenStream(tokens);
			SDFWalker walker = new SDFWalker(nodes);
			walker.program();
			
		} catch(Exception e) { System.err.println("Exception: "+e); }
	}
}


On 5/25/07, Terence Parr <parrt at cs.usfca.edu> wrote:
> there is a DOT generation method on the CommonTree I think.
> Ter
> On May 25, 2007, at 1:40 AM, Ivo Jimenez wrote:
>
> > Is there a way of graphically displaying an AST in V3.
> >
> > Thanks :)
>
>

From laguest at archangeli.co.uk  Sat May 26 09:07:57 2007
From: laguest at archangeli.co.uk (Luke A. Guest)
Date: Sat, 26 May 2007 17:07:57 +0100
Subject: [antlr-interest] Is it possible to tell whether the source or
	header is being	generated?
Message-ID: <1180195682.7574.106.camel@rogue>

Hi,

basically, I was just wondering if in any template in the <language>.stg
file it is possible to determine whether the header orthe source is
currently being generated? i.e. inside lexer()?

Thanks,
Luke.



From parrt at cs.usfca.edu  Sat May 26 09:15:19 2007
From: parrt at cs.usfca.edu (Terence Parr)
Date: Sat, 26 May 2007 09:15:19 -0700
Subject: [antlr-interest] Is it possible to tell whether the source or
	header is being	generated?
In-Reply-To: <1180195682.7574.106.camel@rogue>
References: <1180195682.7574.106.camel@rogue>
Message-ID: <240D4CB1-A95E-4F0E-9705-BE2B5157A788@cs.usfca.edu>


On May 26, 2007, at 9:07 AM, Luke A. Guest wrote:

> Hi,
>
> basically, I was just wondering if in any template in the  
> <language>.stg
> file it is possible to determine whether the header orthe source is
> currently being generated? i.e. inside lexer()?

Well, shouldn't they be different templates?  I can't remember but  
should be a headerFile vs parser vs lexer etc...

Ter


From laguest at archangeli.co.uk  Sat May 26 09:26:19 2007
From: laguest at archangeli.co.uk (Luke A. Guest)
Date: Sat, 26 May 2007 17:26:19 +0100
Subject: [antlr-interest] Is it possible to tell whether the source
	or	header is being	generated?
In-Reply-To: <240D4CB1-A95E-4F0E-9705-BE2B5157A788@cs.usfca.edu>
References: <1180195682.7574.106.camel@rogue>
	<240D4CB1-A95E-4F0E-9705-BE2B5157A788@cs.usfca.edu>
Message-ID: <1180196779.7574.112.camel@rogue>

On Sat, 2007-05-26 at 09:15 -0700, Terence Parr wrote:
> On May 26, 2007, at 9:07 AM, Luke A. Guest wrote:
> 
> > Hi,
> >
> > basically, I was just wondering if in any template in the  
> > <language>.stg
> > file it is possible to determine whether the header orthe source is
> > currently being generated? i.e. inside lexer()?
> 
> Well, shouldn't they be different templates?  I can't remember but  
> should be a headerFile vs parser vs lexer etc...

So, I should do something like this then?

outputFile(LEXER,PARSER,TREE_PARSER, actionScope, actions,
           docComment, recognizer,
           name, tokens, tokenNames, rules, cyclicDFAs,
	   bitsets, buildTemplate, buildAST, rewrite, profile,
	   backtracking, synpreds, memoize, numRules,
	   fileName, ANTLRVersion, generatedTimestamp, trace,
	   scopes, superClass, literals) ::=
<<
-- $ANTLR <ANTLRVersion> <fileName> <generatedTimestamp>

<@imports>
with Ada.Characters.Latin_1;
<if(TREE_PARSER)>
--import org.antlr.runtime.tree.*;
<endif>
--import java.util.Stack;
--import java.util.List;
--import java.util.ArrayList;
<if(backtracking)>
--import java.util.Map;
--import java.util.HashMap;
<endif>
<@end>

<docComment>

<if(LEXER)>
package body <recognizer.grammar.name>_Lexer is
<recognizer>
end <recognizer.grammar.name>_Lexer;
<endif>

<if(PARSER)>
package body <recognizer.grammar.name>_Parser is
<recognizer>
end <recognizer.grammar.name>_Parser;
<endif>

<if(TREE_PARSER)>
package body <recognizer.grammar.name>_Parser is
<recognizer>
end <recognizer.grammar.name>_Parser;
<endif>
>>

/** The header file; make sure to define headerFileExtension() below */
headerFile(LEXER,PARSER,TREE_PARSER, actionScope, actions,
           docComment, recognizer,
           name, tokens, tokenNames, rules, cyclicDFAs,
	   bitsets, buildTemplate, buildAST, rewrite, profile,
	   backtracking, synpreds, memoize, numRules,
	   fileName, ANTLRVersion, generatedTimestamp, trace,
	   scopes, superClass, literals) ::=
<<
-- $ANTLR <ANTLRVersion> <fileName> <generatedTimestamp>

<if(LEXER)>
package body <recognizer.grammar.name>_Lexer is

<recognizer>

end <recognizer.grammar.name>_Lexer;
<endif>

<if(PARSER)>
package body <recognizer.grammar.name>_Parser is

<recognizer>

end <recognizer.grammar.name>_Parser;
<endif>

<if(TREE_PARSER)>
package body <recognizer.grammar.name>_Parser is

<recognizer>

end <recognizer.grammar.name>_Parser;
<endif>
>>


lexer(grammar, name, tokens, scopes, rules, numRules, labelType="Token",
      filterMode) ::= <<
  -- This is the Ada tagged type (class in C++/Java parlance).
  type <grammar.name>_Lexer_Type is new ANTLR.Lexer.Lexer_Type with
private;

  ...
>>

Should I define the lexer "type" inside the headerFile() template and
have the functions for the lexer handled inside the lexer() template?

Thanks,
Luke.




From laguest at archangeli.co.uk  Sat May 26 10:30:21 2007
From: laguest at archangeli.co.uk (Luke A. Guest)
Date: Sat, 26 May 2007 18:30:21 +0100
Subject: [antlr-interest] Token types
Message-ID: <1180200627.7574.119.camel@rogue>

Hi,

Are token types as defined in Token.java supposed to be a limited set,
i.e. can I define these inside an enumeration or are they allowed to be
extended via subclassing?

I'm considering:

package Token is

   Token_Type is (
     EOF,      -- (-1)
     INVALID,  -- ( 0)
     EOR,      -- ( 1) No idea what this means.
     DOWN,     -- ( 2) Something to do with parse trees?
     UP);      -- ( 3) Something to do with parse trees?

end Token;

Which means that they cannot be extended, and thus I don't actually need
to assign the same values to the enumeration as the Java implementation.

Thanks,
Luke.



From Joerg.Werner at qimonda.com  Sat May 26 10:39:25 2007
From: Joerg.Werner at qimonda.com (Joerg.Werner at qimonda.com)
Date: Sat, 26 May 2007 19:39:25 +0200
Subject: [antlr-interest] ASTFrame for V3
In-Reply-To: <bc4938830705260904g4440468ckfe3a357d56d98acf@mail.gmail.com>
Message-ID: <8659C7B861F21A4889878EE7CF859D7D03D89E7B@mucse303.eu.infineon.com>

Hi,

This is a straightforward port of the ASTFrame from ANTLR 2.7.7.

Usage:
CommonTree t = (CommonTree) r.getTree();
ASTFrame af = new ASTFrame("Tree", t);
af.setVisible(true);

Have fun,

J?rg
-- 
Dr. J?rg Werner (???)
Qimonda AG 
Memory Products Division
QAG PD PT TPE C
Am Campeon 1-12
D-85579 Neubiberg
email: joerg.werner at qimonda.com
Tel:  +49 89 60088-2231
Fax:  +49 89 60088-442231

Chairman of the Supervisory Board/Aufsichtsratsvorsitzender: Peter J. Fischl
Management Board/Vorstand: Kin Wah Loh (Chairman/Vorsitzender), Dr. Michael Majerus, Thomas J. Seifert
Register Court/Registergericht: M?nchen HRB 152545, Seat/Sitz: M?nchen


-----Original Message-----
From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-bounces at antlr.org] On Behalf Of Cameron Palmer
Sent: Saturday, May 26, 2007 6:04 PM
To: ivojimenez at gmail.com
Cc: ANTR Interest
Subject: Re: [antlr-interest] ASTFrame for V3

I got the following code fragment from Ter's book, and am using it to generate the GraphViz DOT files. You should buy the book. :)

import org.antlr.runtime.*;
import org.antlr.runtime.tree.*;
import org.antlr.stringtemplate.*;

public class Main {
	public static void main(String args[]) {		
		try {
			ANTLRInputStream input = new ANTLRInputStream(System.in);
			SDFLexer lexer = new SDFLexer(input);
			CommonTokenStream tokens = new CommonTokenStream(lexer);
			SDFParser parser = new SDFParser(tokens);
			SDFParser.program_return r = parser.program();
			CommonTree t = (CommonTree)r.getTree();

			if( args.length>0 && args[0].equals("-dot") ) {
				DOTTreeGenerator gen = new DOTTreeGenerator();
				StringTemplate st = gen.toDOT(t);
				System.out.println(st);
			} else {
				System.out.println(t.toStringTree());
			}
			CommonTreeNodeStream nodes = new CommonTreeNodeStream(t);
			nodes.setTokenStream(tokens);
			SDFWalker walker = new SDFWalker(nodes);
			walker.program();
			
		} catch(Exception e) { System.err.println("Exception: "+e); }
	}
}


On 5/25/07, Terence Parr <parrt at cs.usfca.edu> wrote:
> there is a DOT generation method on the CommonTree I think.
> Ter
> On May 25, 2007, at 1:40 AM, Ivo Jimenez wrote:
>
> > Is there a way of graphically displaying an AST in V3.
> >
> > Thanks :)
>
>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: ASTtoTreeModelAdapter.java
Type: application/octet-stream
Size: 2390 bytes
Desc: ASTtoTreeModelAdapter.java
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20070526/34f4422f/attachment-0002.obj 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: ASTFrame.java
Type: application/octet-stream
Size: 1078 bytes
Desc: ASTFrame.java
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20070526/34f4422f/attachment-0003.obj 

From parrt at cs.usfca.edu  Sat May 26 11:35:11 2007
From: parrt at cs.usfca.edu (Terence Parr)
Date: Sat, 26 May 2007 11:35:11 -0700
Subject: [antlr-interest] ASTFrame for V3
In-Reply-To: <8659C7B861F21A4889878EE7CF859D7D03D89E7B@mucse303.eu.infineon.com>
References: <8659C7B861F21A4889878EE7CF859D7D03D89E7B@mucse303.eu.infineon.com>
Message-ID: <5EEBBE38-B1EE-4AE8-8713-2619A8E1E691@cs.usfca.edu>


On May 26, 2007, at 10:39 AM, <Joerg.Werner at qimonda.com> wrote:

> Hi,
>
> This is a straightforward port of the ASTFrame from ANTLR 2.7.7.
>
> Usage:
> CommonTree t = (CommonTree) r.getTree();
> ASTFrame af = new ASTFrame("Tree", t);
> af.setVisible(true);
>
> Have fun,
>

J?rg,

can you attach that code to:

http://www.antlr.org/wiki/pages/viewpage.action?pageId=557086

That way the license will be clean; you have to grant usage etc...  
when you sign up as a wiki user.

Thanks,
Ter

From parrt at cs.usfca.edu  Sat May 26 11:39:58 2007
From: parrt at cs.usfca.edu (Terence Parr)
Date: Sat, 26 May 2007 11:39:58 -0700
Subject: [antlr-interest] Is it possible to tell whether the source
	or	header is being	generated?
In-Reply-To: <1180196779.7574.112.camel@rogue>
References: <1180195682.7574.106.camel@rogue>
	<240D4CB1-A95E-4F0E-9705-BE2B5157A788@cs.usfca.edu>
	<1180196779.7574.112.camel@rogue>
Message-ID: <56E7C029-C98C-48D6-8AF1-3C2EB16C26AC@cs.usfca.edu>

Hi, here you have the recognizerFile:

> <if(LEXER)>
> package body <recognizer.grammar.name>_Lexer is
> <recognizer>
> end <recognizer.grammar.name>_Lexer;
> <endif>

but you repeat that in the headerFile template.  most likely you want  
only the list of names etc... to make the method declarations etc...   
Look at the C headerFile template.  You'll see that it doesn't use  
recognizer.  It does some stuff like:

<if(LEXER)>
     <rules:{r | <if(!r.ruleDescriptor.isSynPred)><headerReturnType 
(ruleDescriptor=r.ruleDescriptor)> (*m<r.ruleDescriptor.name>)	 
(struct <name>_Ctx_struct * ctx<if(r.ruleDescriptor.parameterScope)>,  
<endif><r.ruleDescriptor.parameterScope:parameterScope(scope=it) 
 >);<endif>}; separator="\n";>
<endif>

which plays with the list of rules.

Ter

From parrt at cs.usfca.edu  Sat May 26 11:51:18 2007
From: parrt at cs.usfca.edu (Terence Parr)
Date: Sat, 26 May 2007 11:51:18 -0700
Subject: [antlr-interest] Writing Delphi Target for Antlr3
In-Reply-To: <20070526073717.5188.qmail@server314.com>
References: <20070526073717.5188.qmail@server314.com>
Message-ID: <AFFE3583-5D0F-4A10-80D1-16859AE6F3ED@cs.usfca.edu>


On May 26, 2007, at 12:37 AM, service wrote:

> Dear Friends
>
>       I am now writing Delphi Target for  Antlr 3 . now I encounter  
> a problem .Delphi unlike the other language (Java, C#, etc). it can  
> not declare one variable at function body.

At the rule level I do not provide a list of all nested blocks.  I  
could add this, but as others have suggested, I think the easiest  
answer is to try to get Delphi to declare things within the method.

Ter

From laguest at archangeli.co.uk  Sat May 26 12:08:18 2007
From: laguest at archangeli.co.uk (Luke A. Guest)
Date: Sat, 26 May 2007 20:08:18 +0100
Subject: [antlr-interest] Writing Delphi Target for Antlr3
In-Reply-To: <AFFE3583-5D0F-4A10-80D1-16859AE6F3ED@cs.usfca.edu>
References: <20070526073717.5188.qmail@server314.com>
	<AFFE3583-5D0F-4A10-80D1-16859AE6F3ED@cs.usfca.edu>
Message-ID: <1180206498.7574.121.camel@rogue>

On Sat, 2007-05-26 at 11:51 -0700, Terence Parr wrote:
> On May 26, 2007, at 12:37 AM, service wrote:
> 
> > Dear Friends
> >
> >       I am now writing Delphi Target for  Antlr 3 . now I encounter  
> > a problem .Delphi unlike the other language (Java, C#, etc). it can  
> > not declare one variable at function body.
> 
> At the rule level I do not provide a list of all nested blocks.  I  
> could add this, but as others have suggested, I think the easiest  
> answer is to try to get Delphi to declare things within the method.

Although, having to dump out an extra block isn't the best way, depends
on how the compiler handles it, i.e. extending the stack, which is
adding overhead.

Luke.



From tobin at tobinharris.com  Sat May 26 12:20:40 2007
From: tobin at tobinharris.com (Harris, Tobin)
Date: Sat, 26 May 2007 21:20:40 +0200
Subject: [antlr-interest] Newby - How to use Parser/Lexer in Code?
Message-ID: <68FA523297EE5742A0529D2623425FD482113C@mapibe20.exchange.xchg>

Hi Folks, 

 

Firstly, I'd like to say I'm enjoying exploring ANTLR - the workbench is
*very* cool and it's great to be able to get some results so quickly! 

 

I've developed a grammar for a custom type of URL that I need in my
program, and I've picked ANTLR because RegEx was string to feel like a
hammer! The problem is I'm now stuck on what to do next J

 

So far I've done this...

 

1)      Downloaded the workbench, authored a simple grammar and got test
cases passing in the Interpreter. 

2)      Generated the C# Lexer/Parser files for my grammar and included
them in my Visual Studio project. 

3)      Got some basic test code working that can show the contents of
the Tree.

 

Here's the test c# code

 

DbUriGrammarParser parser =
GetParser("custom://user:pass at someserver:1000/folder?query=blah");

DbUriGrammarParser.dburigrammar_return ret = parser.dburigrammar();

ITreeAdaptor ad = parser.TreeAdaptor;

ITree tree = ((ITree)ret.Tree);

Console.WriteLine(tree.ToStringTree());

 

This shows 

 

custom :// user : pass @ someserver : 1000 / folder ? query = blah

 

At this point I'm guessing I need to start working with the tree to make
my program extract the tokens, work out what they are, and implement the
desired functionality? However, I don't really know what I'm doing! Does
anyone know of any up-to-date simple examples of this that show a
grammar actually being consumed and used in a program? Can anyone
recommend the best next steps to take?

 

Many thanks

 

Tobin

 

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070526/8f397339/attachment.html 

From parrt at cs.usfca.edu  Sat May 26 12:56:22 2007
From: parrt at cs.usfca.edu (Terence Parr)
Date: Sat, 26 May 2007 12:56:22 -0700
Subject: [antlr-interest] Writing Delphi Target for Antlr3
In-Reply-To: <1180206498.7574.121.camel@rogue>
References: <20070526073717.5188.qmail@server314.com>
	<AFFE3583-5D0F-4A10-80D1-16859AE6F3ED@cs.usfca.edu>
	<1180206498.7574.121.camel@rogue>
Message-ID: <DB5F9CCD-43FA-4EB0-A42E-EEF10DBF3F55@cs.usfca.edu>


On May 26, 2007, at 12:08 PM, Luke A. Guest wrote:

> On Sat, 2007-05-26 at 11:51 -0700, Terence Parr wrote:
>> On May 26, 2007, at 12:37 AM, service wrote:
>>
>>> Dear Friends
>>>
>>>       I am now writing Delphi Target for  Antlr 3 . now I encounter
>>> a problem .Delphi unlike the other language (Java, C#, etc). it can
>>> not declare one variable at function body.
>>
>> At the rule level I do not provide a list of all nested blocks.  I
>> could add this, but as others have suggested, I think the easiest
>> answer is to try to get Delphi to declare things within the method.
>
> Although, having to dump out an extra block isn't the best way,  
> depends
> on how the compiler handles it, i.e. extending the stack, which is
> adding overhead.

Should the identical from the machine code point of view.  In either  
case it is simply decrementing a stack pointer. well, Pascal has a  
strange nested scoping rules so maybe you are right.  You could just  
look at the assembly to see if it's true.

Ter

From jimi at temporal-wave.com  Sat May 26 13:06:51 2007
From: jimi at temporal-wave.com (Jim Idle)
Date: Sat, 26 May 2007 13:06:51 -0700
Subject: [antlr-interest] Writing Delphi Target for Antlr3
In-Reply-To: <1180206498.7574.121.camel@rogue>
References: <20070526073717.5188.qmail@server314.com><AFFE3583-5D0F-4A10-80D1-16859AE6F3ED@cs.usfca.edu>
	<1180206498.7574.121.camel@rogue>
Message-ID: <B36CCC332A32904F8FA3DE134A2353362525E3@wavemachine.temporal-wave.com>

It would be a weak compiler these days that did not analyze these
variables and their usage at compile time and construct the most
efficient stack it can, so I would not worry about that (at least not to
get things going). Your approach should be to get the .stg file
generating syntactically correct code, to the point that when you
compile it, the 'liker' tells you that you are missing the runtime
functions you have not written yet. I am thinking of producing a C-lite
output, which does not require runtime and that might help new template
authors. 

What you are looking for here, as I think you have realized is the
equivalent of this in C:

{
	int x;
	{
		int y;
	}
}

It's been some time since even looked at a Pascal program, but does it
allow:

var
  x: Integer;
  begin
	var
	 y: Integer;
	begin
		...
	end
  end

?

Jim

> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of Luke A. Guest
> Sent: Saturday, May 26, 2007 12:08 PM
> To: Terence Parr
> Cc: ANTR Interest
> Subject: Re: [antlr-interest] Writing Delphi Target for Antlr3
> 
> On Sat, 2007-05-26 at 11:51 -0700, Terence Parr wrote:
> > On May 26, 2007, at 12:37 AM, service wrote:
> >
> > > Dear Friends
> > >
> > >       I am now writing Delphi Target for  Antlr 3 . now I
encounter
> > > a problem .Delphi unlike the other language (Java, C#, etc). it
can
> > > not declare one variable at function body.
> >
> > At the rule level I do not provide a list of all nested blocks.  I
> > could add this, but as others have suggested, I think the easiest
> > answer is to try to get Delphi to declare things within the method.
> 
> Although, having to dump out an extra block isn't the best way,
depends
> on how the compiler handles it, i.e. extending the stack, which is
> adding overhead.
> 
> Luke.
> 


From jimi at temporal-wave.com  Sat May 26 13:16:02 2007
From: jimi at temporal-wave.com (Jim Idle)
Date: Sat, 26 May 2007 13:16:02 -0700
Subject: [antlr-interest] Is it possible to tell whether the source
	orheader is being	generated?
In-Reply-To: <1180195682.7574.106.camel@rogue>
References: <1180195682.7574.106.camel@rogue>
Message-ID: <B36CCC332A32904F8FA3DE134A2353362525E4@wavemachine.temporal-wave.com>

The code generator calls the headerFile() template, with the same set of
parameters that outputFile gets, so you will generate your header file
there, which includes any forward declarations, class headers and
function prototypes and that sort of thing. You will know that you are
generating a lexer, parser or tree parser. Then it will call
outputFile() with the same stuff and here you generate your
implementations "static" stuff and actual code.

I found that rather than take a subtemplate and try to work out if this
is the HEADER or main code, it was more obvious to take the subtemplate
and make a new version xxxHeader() as you tend to want to do generate
such different things, that it makes no sense to clutter the subtemplate
with tests of parameters etc.

So, control your header file with new headerfile subtemplates and
remember that headerFile is the start point and controls that file and
outputFile is the main code and it should fall out nicely.


Jim

> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of Luke A. Guest
> Sent: Saturday, May 26, 2007 9:08 AM
> To: ANTR Interest
> Subject: [antlr-interest] Is it possible to tell whether the source
> orheader is being generated?
> 
> Hi,
> 
> basically, I was just wondering if in any template in the
> <language>.stg
> file it is possible to determine whether the header orthe source is
> currently being generated? i.e. inside lexer()?
> 
> Thanks,
> Luke.
> 


From jimi at temporal-wave.com  Sat May 26 13:23:40 2007
From: jimi at temporal-wave.com (Jim Idle)
Date: Sat, 26 May 2007 13:23:40 -0700
Subject: [antlr-interest] Token types
In-Reply-To: <1180200627.7574.119.camel@rogue>
References: <1180200627.7574.119.camel@rogue>
Message-ID: <B36CCC332A32904F8FA3DE134A2353362525E5@wavemachine.temporal-wave.com>

These are just the pre-defined ones, so you will need to enumerate the
rest when the template is called, but you shodl be able to generate an
enum where the template code starts out with the those, then fills in
the rest dynamically, something like this

headerFile...

package Token is
 
   Token_Type is (
     EOF,      -- (-1)
     INVALID,  -- ( 0)
     EOR,      -- ( 1) No idea what this means.
     DOWN,     -- ( 2) Something to do with parse trees?
     UP,      -- ( 3) Something to do with parse trees?
<tokens:{    <it.name> = <it.type>}; separator = ",\n">

end Token;

Jim

> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of Luke A. Guest
> Sent: Saturday, May 26, 2007 10:30 AM
> To: ANTR Interest
> Subject: [antlr-interest] Token types
> 
> Hi,
> 
> Are token types as defined in Token.java supposed to be a limited set,
> i.e. can I define these inside an enumeration or are they allowed to
be
> extended via subclassing?
> 
> I'm considering:
> 
> package Token is
> 
>    Token_Type is (
>      EOF,      -- (-1)
>      INVALID,  -- ( 0)
>      EOR,      -- ( 1) No idea what this means.
>      DOWN,     -- ( 2) Something to do with parse trees?
>      UP);      -- ( 3) Something to do with parse trees?
> 
> end Token;
> 
> Which means that they cannot be extended, and thus I don't actually
> need
> to assign the same values to the enumeration as the Java
> implementation.
> 
> Thanks,
> Luke.
> 


From jimi at temporal-wave.com  Sat May 26 13:26:59 2007
From: jimi at temporal-wave.com (Jim Idle)
Date: Sat, 26 May 2007 13:26:59 -0700
Subject: [antlr-interest] Newby - How to use Parser/Lexer in Code?
In-Reply-To: <68FA523297EE5742A0529D2623425FD482113C@mapibe20.exchange.xchg>
References: <68FA523297EE5742A0529D2623425FD482113C@mapibe20.exchange.xchg>
Message-ID: <B36CCC332A32904F8FA3DE134A2353362525E6@wavemachine.temporal-wave.com>

Best this is to buy the book, but for pure examples, check out the
examples tar from the download page - that should get you going, but I
can't remember if the C# stuff is there yet.

 

Jim

 

From: antlr-interest-bounces at antlr.org
[mailto:antlr-interest-bounces at antlr.org] On Behalf Of Harris, Tobin
Sent: Saturday, May 26, 2007 12:21 PM
To: antlr-interest at antlr.org
Subject: [antlr-interest] Newby - How to use Parser/Lexer in Code?

 

Hi Folks, 

 

Firstly, I'd like to say I'm enjoying exploring ANTLR - the workbench is
*very* cool and it's great to be able to get some results so quickly! 

 

I've developed a grammar for a custom type of URL that I need in my
program, and I've picked ANTLR because RegEx was string to feel like a
hammer! The problem is I'm now stuck on what to do next J

 

So far I've done this...

 

1)      Downloaded the workbench, authored a simple grammar and got test
cases passing in the Interpreter. 

2)      Generated the C# Lexer/Parser files for my grammar and included
them in my Visual Studio project. 

3)      Got some basic test code working that can show the contents of
the Tree.

 

Here's the test c# code

 

DbUriGrammarParser parser =
GetParser("custom://user:pass at someserver:1000/folder?query=blah");

DbUriGrammarParser.dburigrammar_return ret = parser.dburigrammar();

ITreeAdaptor ad = parser.TreeAdaptor;

ITree tree = ((ITree)ret.Tree);

Console.WriteLine(tree.ToStringTree());

 

This shows 

 

custom :// user : pass @ someserver : 1000 / folder ? query = blah

 

At this point I'm guessing I need to start working with the tree to make
my program extract the tokens, work out what they are, and implement the
desired functionality? However, I don't really know what I'm doing! Does
anyone know of any up-to-date simple examples of this that show a
grammar actually being consumed and used in a program? Can anyone
recommend the best next steps to take?

 

Many thanks

 

Tobin

 

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070526/3f850576/attachment-0001.html 

From tobin at tobinharris.com  Sat May 26 13:28:53 2007
From: tobin at tobinharris.com (Harris, Tobin)
Date: Sat, 26 May 2007 22:28:53 +0200
Subject: [antlr-interest] Newby - How to use Parser/Lexer in Code?
In-Reply-To: <B36CCC332A32904F8FA3DE134A2353362525E6@wavemachine.temporal-wave.com>
References: <68FA523297EE5742A0529D2623425FD482113C@mapibe20.exchange.xchg>
	<B36CCC332A32904F8FA3DE134A2353362525E6@wavemachine.temporal-wave.com>
Message-ID: <68FA523297EE5742A0529D2623425FD482113E@mapibe20.exchange.xchg>

Thanks Jim, 

 

I may just buy the book, I've also found this:

 

http://www.codeproject.com/useritems/expression_evaluator.asp

 

Which is a rocking tutorial for ANTLR!

 

Tobin

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070526/80077798/attachment.html 

From laguest at archangeli.co.uk  Sat May 26 14:20:40 2007
From: laguest at archangeli.co.uk (Luke A. Guest)
Date: Sat, 26 May 2007 22:20:40 +0100
Subject: [antlr-interest] Token types
In-Reply-To: <B36CCC332A32904F8FA3DE134A2353362525E5@wavemachine.temporal-wave.com>
References: <1180200627.7574.119.camel@rogue>
	<B36CCC332A32904F8FA3DE134A2353362525E5@wavemachine.temporal-wave.com>
Message-ID: <1180214440.7574.123.camel@rogue>

On Sat, 2007-05-26 at 13:23 -0700, Jim Idle wrote:
> These are just the pre-defined ones, so you will need to enumerate the
> rest when the template is called, but you shodl be able to generate an
> enum where the template code starts out with the those, then fills in
> the rest dynamically, something like this
> 
> headerFile...
> 
> package Token is
>  
>    Token_Type is (
>      EOF,      -- (-1)
>      INVALID,  -- ( 0)
>      EOR,      -- ( 1) No idea what this means.
>      DOWN,     -- ( 2) Something to do with parse trees?
>      UP,      -- ( 3) Something to do with parse trees?
> <tokens:{    <it.name> = <it.type>}; separator = ",\n">
> 
> end Token;

True, this could be done rather than defining the Token package in the
runtime.

Thanks,
Luke.



From laguest at archangeli.co.uk  Sat May 26 14:25:50 2007
From: laguest at archangeli.co.uk (Luke A. Guest)
Date: Sat, 26 May 2007 22:25:50 +0100
Subject: [antlr-interest] Writing Delphi Target for Antlr3
In-Reply-To: <B36CCC332A32904F8FA3DE134A2353362525E3@wavemachine.temporal-wave.com>
References: <20070526073717.5188.qmail@server314.com>
	<AFFE3583-5D0F-4A10-80D1-16859AE6F3ED@cs.usfca.edu>
	<1180206498.7574.121.camel@rogue>
	<B36CCC332A32904F8FA3DE134A2353362525E3@wavemachine.temporal-wave.com>
Message-ID: <1180214750.7574.127.camel@rogue>

On Sat, 2007-05-26 at 13:06 -0700, Jim Idle wrote:
> functions you have not written yet. I am thinking of producing a C-lite
> output, which does not require runtime and that might help new template
> authors. 

This would be useful as long as it's not chocfull of macros, they make
things a lot harder to understand. Maybe a Pascal version as it's more
structured? Or possibly some other lite language? Maybe D-lite?

> What you are looking for here, as I think you have realized is the
> equivalent of this in C:
> 
> {
> 	int x;
> 	{
> 		int y;
> 	}
> }
> 
> It's been some time since even looked at a Pascal program, but does it
> allow:
> 
> var
>   x: Integer;
>   begin
> 	var
> 	 y: Integer;
> 	begin
> 		...
> 	end
>   end
> 
> ?

Yeah, I thought Pascal could do it, it's been so long, I coutldn't be
sure. But the fact that Ada is Pascal like, it makes sense that it
should be able to do that.

Thanks,
Luke.



From service at sharpplus.com  Sat May 26 17:47:31 2007
From: service at sharpplus.com (=?iso-8859-1?Q?service?=)
Date: Sun, 27 May 2007 00:47:31 +0000
Subject: [antlr-interest] Writing Delphi Target for Antlr3
Message-ID: <20070527004732.20238.qmail@server314.com>


no, Delphi does not allow such syntax.

best regards
Chin Shou

>  -------Original Message-------
>  From: Jim Idle <jimi at temporal-wave.com>
>  Subject: Re: [antlr-interest] Writing Delphi Target for Antlr3
>  Sent: 26 May '07 20:06
>  
>  It would be a weak compiler these days that did not analyze these
>  variables and their usage at compile time and construct the most
>  efficient stack it can, so I would not worry about that (at least not to
>  get things going). Your approach should be to get the .stg file
>  generating syntactically correct code, to the point that when you
>  compile it, the 'liker' tells you that you are missing the runtime
>  functions you have not written yet. I am thinking of producing a C-lite
>  output, which does not require runtime and that might help new template
>  authors.
>  
>  What you are looking for here, as I think you have realized is the
>  equivalent of this in C:
>  
>  {
>  int x;
>  {
>  int y;
>  }
>  }
>  
>  It's been some time since even looked at a Pascal program, but does it
>  allow:
>  
>  var
>    x: Integer;
>    begin
>  var
>    y: Integer;
>  begin
>  ...
>  end
>    end
>  
>   
>  
>  Jim
>  
>  > -----Original Message-----
>  > From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
>  > bounces at antlr.org] On Behalf Of Luke A. Guest
>  > Sent: Saturday, May 26, 2007 12:08 PM
>  > To: Terence Parr
>  > Cc: ANTR Interest
>  > Subject: Re: [antlr-interest] Writing Delphi Target for Antlr3
>  >
>  > On Sat, 2007-05-26 at 11:51 -0700, Terence Parr wrote:
>  > > On May 26, 2007, at 12:37 AM, service wrote:
>  > >
>  > > > Dear Friends
>  > > >
>  > > >       I am now writing Delphi Target for  Antlr 3 . now I
>  encounter
>  > > > a problem .Delphi unlike the other language (Java, C#, etc). it
>  can
>  > > > not declare one variable at function body.
>  > >
>  > > At the rule level I do not provide a list of all nested blocks.  I
>  > > could add this, but as others have suggested, I think the easiest
>  > > answer is to try to get Delphi to declare things within the method.
>  >
>  > Although, having to dump out an extra block isn't the best way,
>  depends
>  > on how the compiler handles it, i.e. extending the stack, which is
>  > adding overhead.
>  >
>  > Luke.
>  >
>  
>  

From service at sharpplus.com  Sat May 26 17:59:08 2007
From: service at sharpplus.com (=?iso-8859-1?Q?service?=)
Date: Sun, 27 May 2007 00:59:08 +0000
Subject: [antlr-interest] Writing Delphi Target for Antlr3
Message-ID: <20070527005908.7221.qmail@server314.com>


I just found a method i to bypass the limitation of delphi compiler, maybe it does not need all the nested blocks at all. 

best regards
Chin Shou

>  -------Original Message-------
>  From: Terence Parr <parrt at cs.usfca.edu>
>  Subject: Re: [antlr-interest] Writing Delphi Target for Antlr3
>  Sent: 26 May '07 18:51
>  
>  
>  On May 26, 2007, at 12:37 AM, service wrote:
>  
>  > Dear Friends
>  >
>  >       I am now writing Delphi Target for  Antlr 3 . now I encounter  
>  > a problem .Delphi unlike the other language (Java, C#, etc). it can  
>  > not declare one variable at function body.
>  
>  At the rule level I do not provide a list of all nested blocks.  I  
>  could add this, but as others have suggested, I think the easiest  
>  answer is to try to get Delphi to declare things within the method.
>  
>  Ter
>  

From antlr at mirality.co.nz  Sat May 26 18:24:03 2007
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Sun, 27 May 2007 13:24:03 +1200
Subject: [antlr-interest] Writing Delphi Target for Antlr3
In-Reply-To: <B36CCC332A32904F8FA3DE134A2353362525E3@wavemachine.tempora
	l-wave.com>
References: <20070526073717.5188.qmail@server314.com>
	<AFFE3583-5D0F-4A10-80D1-16859AE6F3ED@cs.usfca.edu>
	<1180206498.7574.121.camel@rogue>
	<B36CCC332A32904F8FA3DE134A2353362525E3@wavemachine.temporal-wave.com>
Message-ID: <20070527012413.0291719091E@www.antlr.org>

At 08:06 27/05/2007, Jim Idle wrote:
 >It's been some time since even looked at a Pascal program, but 
does
 >it allow:
 >
 >var
 >  x: Integer;
 >  begin
 >	var
 >	y: Integer;
 >	begin
 >		...
 >	end
 >  end
 >
 >?

The closest you can get to that sort of construct is this:

function Outer(Parm1: Integer): Integer;
var
   x, y: Integer;

   function Inner(Parm2: Integer): Integer;
   var
     z: Integer;
   begin
     // ... implementation of Inner
   end;
begin
   // ... implementation of Outer
end;

Note that this still requires predeclaration, but IIRC the 
variables of the outer function are visible to the inner function 
(but not the reverse), similar to arbitrary blocks in C++ and Java.


From jkh at datatel.com  Sat May 26 18:37:59 2007
From: jkh at datatel.com (Jason Hocker)
Date: Sat, 26 May 2007 21:37:59 -0400
Subject: [antlr-interest]  No match
Message-ID: <OF8704B401.9AE70C0A-ON852572E8.0008EA8B-852572E8.0008F92E@datatel.com>

We have a rule like: 

code: (ruleA | ruleB | ruleC | ruleD)*; 

So if we try to parse code that is wrong... it won't match any of these 
rules, and the parser continues and end. 

How can we better implement error handling? 


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070526/4f512502/attachment.html 

From open.zone at virgin.net  Sat May 26 18:41:12 2007
From: open.zone at virgin.net (Micheal J)
Date: Sun, 27 May 2007 02:41:12 +0100
Subject: [antlr-interest] Writing Delphi Target for Antlr3
In-Reply-To: <20070527005908.7221.qmail@server314.com>
Message-ID: <001b01c7a000$1d8c3300$c704a8c0@hercules>

> -----Original Message-----
> From: antlr-interest-bounces at antlr.org 
> [mailto:antlr-interest-bounces at antlr.org] On Behalf Of service
> Sent: 27 May 2007 01:59
> To: Terence Parr
> Cc: antlr-interest at antlr.org
> Subject: Re: [antlr-interest] Writing Delphi Target for Antlr3
> 
> 
> 
> I just found a method i to bypass the limitation of delphi 
> compiler, maybe it does not need all the nested blocks at all. 
> 
> best regards
> Chin Shou
> 

Would you like to share this method with the rest of us?. I'd always assumed
you would eventually proceeed with nested procedure/functions since Delphi
doesn't support block-scope variables.


<aside>
On a separate note, doesn't this thread (and others like it e.g. on Ada
target) - that are about the development of the ANTLR V3 tool itself or one
of it's targets/runtimes - belong on the [antlr-dev] list?. It is probably
confusing/irrelevant to most ANTLR users (ANTLR/Delphi-tes excluded of
course).
</aside>

Micheal

-----------------------
The best way to contact me is via the list/forum. My time is very limited.


From open.zone at virgin.net  Sat May 26 18:45:19 2007
From: open.zone at virgin.net (Micheal J)
Date: Sun, 27 May 2007 02:45:19 +0100
Subject: [antlr-interest] No match
In-Reply-To: <OF8704B401.9AE70C0A-ON852572E8.0008EA8B-852572E8.0008F92E@datatel.com>
Message-ID: <001c01c7a000$b090c3f0$c704a8c0@hercules>

You could start by making the rule non-optional.
 
    code:    (ruleA | ruleB ... ruleD)+ ;
 
When you say the parser continues and ends, what exactly do you mean?.
 
Micheal
 

-----------------------
The best way to contact me is via the list/forum. My time is very limited. 

-----Original Message-----
From: antlr-interest-bounces at antlr.org
[mailto:antlr-interest-bounces at antlr.org] On Behalf Of Jason Hocker
Sent: 27 May 2007 02:38
To: antlr-interest at antlr.org
Subject: [antlr-interest] No match



We have a rule like: 

code: (ruleA | ruleB | ruleC | ruleD)*; 

So if we try to parse code that is wrong... it won't match any of these
rules, and the parser continues and end. 

How can we better implement error handling? 




-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070527/a9d4f545/attachment-0001.html 

From jkh at datatel.com  Sat May 26 18:52:54 2007
From: jkh at datatel.com (Jason Hocker)
Date: Sat, 26 May 2007 21:52:54 -0400
Subject: [antlr-interest] No match
In-Reply-To: <001c01c7a000$b090c3f0$c704a8c0@hercules>
Message-ID: <OFE2FF8FD3.91DE1724-ON852572E8.000A192E-852572E8.000A569C@datatel.com>

I mean that the rule doesn't match... so the loop breaks out... so there 
is code that I want the parser to parse, but the parser has finished its 
method.

Matching nothing is also valid, so I want to keep it at zero-to-many. What 
I want to add is that if I have bad code there is an error reported.



Jason Hocker, SCJP (1.4), SCWCD (1.3, 1.4), SCMAD, SCDJWS 
Senior Developer
Datatel, Inc.
How higher education does business.

Voice: 703-653-1221
Fax: 703-802-3965
E-Mail: jkh at datatel.com
www.datatel.com




"Micheal J" <open.zone at virgin.net> 
Sent by: antlr-interest-bounces at antlr.org
05/26/2007 09:45 PM

To
<antlr-interest at antlr.org>
cc

Subject
Re: [antlr-interest] No match






You could start by making the rule non-optional.
 
    code:    (ruleA | ruleB ... ruleD)+ ;
 
When you say the parser continues and ends, what exactly do you mean?.
 
Micheal
 
-----------------------
The best way to contact me is via the list/forum. My time is very limited. 

-----Original Message-----
From: antlr-interest-bounces at antlr.org 
[mailto:antlr-interest-bounces at antlr.org] On Behalf Of Jason Hocker
Sent: 27 May 2007 02:38
To: antlr-interest at antlr.org
Subject: [antlr-interest] No match


We have a rule like: 

code: (ruleA | ruleB | ruleC | ruleD)*; 

So if we try to parse code that is wrong... it won't match any of these 
rules, and the parser continues and end. 

How can we better implement error handling? 


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070526/92a2da45/attachment.html 

From open.zone at virgin.net  Sat May 26 18:59:22 2007
From: open.zone at virgin.net (Micheal J)
Date: Sun, 27 May 2007 02:59:22 +0100
Subject: [antlr-interest] No match
In-Reply-To: <OFE2FF8FD3.91DE1724-ON852572E8.000A192E-852572E8.000A569C@datatel.com>
Message-ID: <002501c7a002$a60c9650$c704a8c0@hercules>

Since matching nothing is also valid, you may want to investigate adding in
"error alternatives" specifically to catch the most common forms of invalid
input you expect to come across. Basically, a bunch of rules or alternatives
that intentionally match invalid input. You can then output appropriate
error messages.
 
You could also look at hooking into ANTLR's error recovery mechanism but,
that would be tricky in this instance since nothing is also valid input.
What version of ANTLR are you using anyhows?
 
 
Micheal
 

-----------------------
The best way to contact me is via the list/forum. My time is very limited. 

-----Original Message-----
From: Jason Hocker [mailto:jkh at datatel.com] 
Sent: 27 May 2007 02:53
To: Micheal J
Cc: antlr-interest at antlr.org; antlr-interest-bounces at antlr.org
Subject: Re: [antlr-interest] No match



I mean that the rule doesn't match... so the loop breaks out... so there is
code that I want the parser to parse, but the parser has finished its
method. 

Matching nothing is also valid, so I want to keep it at zero-to-many.  What
I want to add is that if I have bad code there is an error reported. 



Jason Hocker, SCJP (1.4), SCWCD (1.3, 1.4), SCMAD, SCDJWS 
Senior Developer
Datatel, Inc.
How higher education does business.

Voice: 703-653-1221
Fax: 703-802-3965
E-Mail: jkh at datatel.com
www.datatel.com




"Micheal J" <open.zone at virgin.net> 
Sent by: antlr-interest-bounces at antlr.org 


05/26/2007 09:45 PM 


To
<antlr-interest at antlr.org> 

cc

Subject
Re: [antlr-interest] No match

	




You could start by making the rule non-optional. 
  
    code:    (ruleA | ruleB ... ruleD)+ ; 
  
When you say the parser continues and ends, what exactly do you mean?. 
  
Micheal 
  

-----------------------
The best way to contact me is via the list/forum. My time is very limited. 


-----Original Message-----
From: antlr-interest-bounces at antlr.org
[mailto:antlr-interest-bounces at antlr.org] On Behalf Of Jason Hocker
Sent: 27 May 2007 02:38
To: antlr-interest at antlr.org
Subject: [antlr-interest] No match


We have a rule like: 

code: (ruleA | ruleB | ruleC | ruleD)*; 

So if we try to parse code that is wrong... it won't match any of these
rules, and the parser continues and end. 

How can we better implement error handling? 




-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070527/606e3fcc/attachment.html 

From jkh at datatel.com  Sat May 26 19:07:47 2007
From: jkh at datatel.com (Jason Hocker)
Date: Sat, 26 May 2007 22:07:47 -0400
Subject: [antlr-interest] No match
In-Reply-To: <002501c7a002$a60c9650$c704a8c0@hercules>
Message-ID: <OF0C13DBE9.975273D3-ON852572E8.000BACBC-852572E8.000BB39F@datatel.com>

My company has decided to stay at version 2.7.4



Jason Hocker, SCJP (1.4), SCWCD (1.3, 1.4), SCMAD, SCDJWS 
Senior Developer
Datatel, Inc.
How higher education does business.

Voice: 703-653-1221
Fax: 703-802-3965
E-Mail: jkh at datatel.com
www.datatel.com




"Micheal J" <open.zone at virgin.net> 
Sent by: antlr-interest-bounces at antlr.org
05/26/2007 09:59 PM

To
<antlr-interest at antlr.org>
cc

Subject
Re: [antlr-interest] No match






Since matching nothing is also valid, you may want to investigate adding 
in "error alternatives" specifically to catch the most common forms of 
invalid input you expect to come across. Basically, a bunch of rules or 
alternatives that intentionally match invalid input. You can then output 
appropriate error messages.
 
You could also look at hooking into ANTLR's error recovery mechanism but, 
that would be tricky in this instance since nothing is also valid input. 
What version of ANTLR are you using anyhows?
 
 
Micheal
 
-----------------------
The best way to contact me is via the list/forum. My time is very limited. 

-----Original Message-----
From: Jason Hocker [mailto:jkh at datatel.com] 
Sent: 27 May 2007 02:53
To: Micheal J
Cc: antlr-interest at antlr.org; antlr-interest-bounces at antlr.org
Subject: Re: [antlr-interest] No match


I mean that the rule doesn't match... so the loop breaks out... so there 
is code that I want the parser to parse, but the parser has finished its 
method. 

Matching nothing is also valid, so I want to keep it at zero-to-many. What 
I want to add is that if I have bad code there is an error reported. 



Jason Hocker, SCJP (1.4), SCWCD (1.3, 1.4), SCMAD, SCDJWS 
Senior Developer
Datatel, Inc.
How higher education does business.

Voice: 703-653-1221
Fax: 703-802-3965
E-Mail: jkh at datatel.com
www.datatel.com



"Micheal J" <open.zone at virgin.net> 
Sent by: antlr-interest-bounces at antlr.org 
05/26/2007 09:45 PM 


To
<antlr-interest at antlr.org> 
cc

Subject
Re: [antlr-interest] No match








You could start by making the rule non-optional. 
 
    code:    (ruleA | ruleB ... ruleD)+ ; 
  
When you say the parser continues and ends, what exactly do you mean?. 
  
Micheal 
 
-----------------------
The best way to contact me is via the list/forum. My time is very limited. 

-----Original Message-----
From: antlr-interest-bounces at antlr.org 
[mailto:antlr-interest-bounces at antlr.org] On Behalf Of Jason Hocker
Sent: 27 May 2007 02:38
To: antlr-interest at antlr.org
Subject: [antlr-interest] No match


We have a rule like: 

code: (ruleA | ruleB | ruleC | ruleD)*; 

So if we try to parse code that is wrong... it won't match any of these 
rules, and the parser continues and end. 

How can we better implement error handling? 


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070526/91400fe4/attachment.html 

From laguest at archangeli.co.uk  Sat May 26 19:18:10 2007
From: laguest at archangeli.co.uk (Luke A. Guest)
Date: Sun, 27 May 2007 03:18:10 +0100
Subject: [antlr-interest] Writing Delphi Target for Antlr3
In-Reply-To: <001b01c7a000$1d8c3300$c704a8c0@hercules>
References: <001b01c7a000$1d8c3300$c704a8c0@hercules>
Message-ID: <1180232295.7574.130.camel@rogue>

On Sun, 2007-05-27 at 02:41 +0100, Micheal J wrote:

> <aside>
> On a separate note, doesn't this thread (and others like it e.g. on Ada
> target) - that are about the development of the ANTLR V3 tool itself or one
> of it's targets/runtimes - belong on the [antlr-dev] list?. It is probably
> confusing/irrelevant to most ANTLR users (ANTLR/Delphi-tes excluded of
> course).
> </aside>

Is there one? If so, you'd be right. The main www.antlr.org page takes
me to the antlr-interest ml and no reference of a dev ml.

Thanks,
Luke.



From rschulz at sonic.net  Sat May 26 19:21:46 2007
From: rschulz at sonic.net (Randall R Schulz)
Date: Sat, 26 May 2007 19:21:46 -0700
Subject: [antlr-interest] No match
In-Reply-To: <OF8704B401.9AE70C0A-ON852572E8.0008EA8B-852572E8.0008F92E@datatel.com>
References: <OF8704B401.9AE70C0A-ON852572E8.0008EA8B-852572E8.0008F92E@datatel.com>
Message-ID: <200705261921.46467.rschulz@sonic.net>

On Saturday 26 May 2007 18:37, Jason Hocker wrote:
> We have a rule like:
>
> code: (ruleA | ruleB | ruleC | ruleD)*;
>
> So if we try to parse code that is wrong... it won't match any of
> these rules, and the parser continues and end.
>
> How can we better implement error handling?

For one thing, when zero valid productions is explicitly acceptable, 
match an explicit end-of-file (actually, match it regardless--otherwise 
there can be garbage left over without any kind of diagnostic at all).

Secondly, you can often write productions for common error cases and 
issue diagnostics. Then you can go on parsing. You have to watch out 
for ambiguities that might be introduced and most of all don't preclude 
a proper parse of an acceptable input (of course), but the technique 
makes for much more "user friendly" parsers.

For example, in a Lisp-like grammar I have, I add productions that 
accept unmatched close parentheses. I issue a diagnostic and then go on 
parsing. From the user perspective, it's far preferable than bailing 
out as soon as something that is not strictly grammatically acceptable 
occurs.


Randall Schulz

From open.zone at virgin.net  Sat May 26 22:53:01 2007
From: open.zone at virgin.net (Micheal J)
Date: Sun, 27 May 2007 06:53:01 +0100
Subject: [antlr-interest] Writing Delphi Target for Antlr3 (about
	antlr-dev list)
In-Reply-To: <1180232295.7574.130.camel@rogue>
Message-ID: <000601c7a023$49d53ec0$c704a8c0@hercules>

Hi,

> > <aside>
> > On a separate note, doesn't this thread (and others like it e.g. on 
> > Ada
> > target) - that are about the development of the ANTLR V3 
> tool itself or one
> > of it's targets/runtimes - belong on the [antlr-dev] list?. 
> It is probably
> > confusing/irrelevant to most ANTLR users (ANTLR/Delphi-tes 
> excluded of
> > course).
> > </aside>
> 
> Is there one?

Yes. Thought it's would seem to have been very cleverly hidden away...

> If so, you'd be right. The main www.antlr.org 
> page takes me to the antlr-interest ml and no reference of a dev ml.

It's on the "Support" page of the website. Here's a link:

http://www.antlr.org/mailman/listinfo/antlr-dev 

It's a half-serious comment made because it is beginning to look like this
sort of thread(s) might run for a while and, perhaps grow considerably in
the process (as the target authors progress).

It would be nice to have such development threads archived in the most
obvious place to look for them - [antlr-dev]. Of course el dictador supremo
Ter has been chipping in on these threads too in violaci?n flagrante de las
pol?ticas de la lista....  ;-)


Micheal


-----------------------
The best way to contact me is via the list/forum. My time is very limited.


From service at sharpplus.com  Sat May 26 23:43:16 2007
From: service at sharpplus.com (=?iso-8859-1?Q?service?=)
Date: Sun, 27 May 2007 06:43:16 +0000
Subject: [antlr-interest] Writing Delphi Target for Antlr3
Message-ID: <20070527064316.23508.qmail@server314.com>

I just change declare alt<decisionNumber> to access a global arrary _alt property. The alt array is declared in the base lexer class. for example

TCLexer=class(TAntlrLexer)
....
property _alt[Index:Integer]:Integer;
end;

then, generated source will like following code
procedure TCLexer.mIDENTIFIER();
var
  _type:Integer;
begin
    try
        _type := IDENTIFIER;
        // ruleBlockSingleAlt:C.g:12:4: ( LETTER ( LETTER | '0' .. '9' )* )
        // C.g:12:4: LETTER ( LETTER | '0' .. '9' )*
        begin
        mLETTER();
        // closureBlock:C.g:12:11: ( LETTER | '0' .. '9' )*
        repeat
            _alt[1]:=2;
            _LA[1][0] := input.LA(1);
            
            if ( ((_LA[1][0]='$') or ((_LA[1][0]>='0') and ( _LA[1][0]<='9')) or ((_LA[1][0]>='A') and ( _LA[1][0]<='Z')) or (_LA[1][0]='_') or ((_LA[1][0]>='a') and ( _LA[1][0]<='z'))) ) then begin
                _alt[1]:=1;
            end
            
            ;
        
            case (_alt[1]) of
           1 :
              begin
              // C.g:
              begin
              if ( (input.LA(1)='$') or ((input.LA(1)>='0') and (input.LA(1)<='9')) or ((input.LA(1)>='A') and (input.LA(1)<='Z')) or (input.LA(1)='_') or ((input.LA(1)>='a') and (input.LA(1)<='z')) ) then
              begin
                  input.consume();
             
              end
              else
              begin
                  recover(EMismatchedSetException.Create(nil, input), true);end;

             
              end;
              end;
        
         else
              break;
            end;
         until (false);

        
        end;

        self._type := _type;
    finally
    end;
end;

because decisionNumber always unique, so it seems the simplest solution.

best regards
chinshou
Sqlite Developer
SharpPlus Software Corp. Yokohama, Japan


>  -------Original Message-------
>  From: Micheal J <open.zone at virgin.net>
>  Subject: Re: [antlr-interest] Writing Delphi Target for Antlr3
>  Sent: 27 May '07 01:41
>  
>  > -----Original Message-----
>  > From: antlr-interest-bounces at antlr.org
>  > [mailto:antlr-interest-bounces at antlr.org] On Behalf Of service
>  > Sent: 27 May 2007 01:59
>  > To: Terence Parr
>  > Cc: antlr-interest at antlr.org
>  > Subject: Re: [antlr-interest] Writing Delphi Target for Antlr3
>  >
>  >
>  >
>  > I just found a method i to bypass the limitation of delphi
>  > compiler, maybe it does not need all the nested blocks at all.
>  >
>  > best regards
>  > Chin Shou
>  >
>  
>  Would you like to share this method with the rest of us?. I'd always assumed
>  you would eventually proceeed with nested procedure/functions since Delphi
>  doesn't support block-scope variables.
>  
>  
>  <aside>
>  On a separate note, doesn't this thread (and others like it e.g. on Ada
>  target) - that are about the development of the ANTLR V3 tool itself or one
>  of it's targets/runtimes - belong on the [antlr-dev] list?. It is probably
>  confusing/irrelevant to most ANTLR users (ANTLR/Delphi-tes excluded of
>  course).
>  </aside>
>  
>  Micheal
>  
>  -----------------------
>  The best way to contact me is via the list/forum. My time is very limited.
>  
>  

From rdclark at gmail.com  Sun May 27 00:28:01 2007
From: rdclark at gmail.com (Richard Clark)
Date: Sun, 27 May 2007 00:28:01 -0700
Subject: [antlr-interest] Test-Driven Development with ANTLR
Message-ID: <d3992d900705270028u46eaa346i93aa1948fbca2b0e@mail.gmail.com>

Hi all,

I've found a lot of value in using Test-Driven Development with ANTLR,
especially for complex grammars or ones that evolve frequently. Since I
couldn't find any material on the web about doing this with ANTLR 3, I went
ahead and wrote up an article on the wiki:

http://www.antlr.org/wiki/display/ANTLR3/Test-Driven+Development+with+ANTLR(or
http://www.antlr.org/wiki/x/IYAI )

Enjoy :)

 ...Richard

P.S. It's a little nerve-wracking to develop a grammar in full public view
;)
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070527/92a96daf/attachment.html 

From antlr at mirality.co.nz  Sun May 27 00:52:55 2007
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Sun, 27 May 2007 19:52:55 +1200
Subject: [antlr-interest] Test-Driven Development with ANTLR
In-Reply-To: <d3992d900705270028u46eaa346i93aa1948fbca2b0e@mail.gmail.co
 m>
References: <d3992d900705270028u46eaa346i93aa1948fbca2b0e@mail.gmail.com>
Message-ID: <20070527075304.C69D2190951@www.antlr.org>

At 19:28 27/05/2007, Richard Clark wrote:
>I've found a lot of value in using Test-Driven Development with 
>ANTLR, especially for complex grammars or ones that evolve 
>frequently. Since I couldn't find any material on the web about 
>doing this with ANTLR 3, I went ahead and wrote up an article on 
>the wiki:

Given that all the examples are for parsing CSVs, shouldn't the 
first paragraph say "CSV" and not "CSS"?  :)


From tobin at tobinharris.com  Sun May 27 02:16:02 2007
From: tobin at tobinharris.com (Harris, Tobin)
Date: Sun, 27 May 2007 11:16:02 +0200
Subject: [antlr-interest] Newby - How to find rule context in the AST
Message-ID: <68FA523297EE5742A0529D2623425FD4821143@mapibe20.exchange.xchg>

Hi Folks,

 

This one's bugging me...

 

So far, everything I've read says that you don't need a big bloated
"parse tree" when evaluating your grammar. Instead, we have a more
concise AST that only contains the values. For example:

 

My top grammar rule looks a bit like this

uriformat = scheme '://' credentials? host path? query?

 

The AST outputs like this 

 

http  :// tobin : xyz @ someurl.com / blah

 

instead of  the parse tree, which is more like this

 

[scheme]

   http

://

[credentials]

  Tobin

  :

  xyz

  @

[host]

  Someurl.com

[path]

  /blah

 

The problem is, I want to be able to interrogate the tree to find out
if, for example, the [credentials] were parsed, and then loop through
the sub-nodes (username, password etc). Unfortunately the AST doesn't
contain this information. I can get the type of a node, but that will
only be a "DIGIT" or "INT" etc. 

 

Is there a way of retaining more of the parse tree? Am I missing
something here? 

 

I did see an example for Oracle URI where the author embeds Actions in
rules, and thought this might be a way to go...

 

{ #tnsnames_entry = #([TNSNAMES_ENTRY, "tnsnames_entry"],
#tnsnames_entry); }

 

However, actions get evaluated to the target language - C# in my case -
and I'm not actually sure what the above language is or what the code is
doing!?

 

Any help appreciated!

 

Tobin 

 

P.S - I started looking in to ANTLR as an alternative to RegEx, because
it just didn't seem like the right tool for the job. However, I was
hoping for an approach that didn't require a massive learning curve! Are
there any other tools that might fit my simple needs better?

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070527/c73c9010/attachment.html 

From ruth.karl at gmx.de  Sun May 27 02:44:36 2007
From: ruth.karl at gmx.de (Ruth Karl)
Date: Sun, 27 May 2007 11:44:36 +0200
Subject: [antlr-interest]  Debugging problem
In-Reply-To: <68FA523297EE5742A0529D2623425FD4821143@mapibe20.exchange.xchg>
References: <68FA523297EE5742A0529D2623425FD4821143@mapibe20.exchange.xchg>
Message-ID: <46595304.6010203@gmx.de>

Hi again,

I like ANTLWorks a lot, but I cannot figure out how to tell it how to debug.
Whenever I try to, it obviously tries to connect (to port 49157 which 
seems to be the default setting in preferences - but who ... is 
listening there???) and then (not very surprinsingly) gets a time-out. I 
do not see, how I could configure the debugger or how debugging is 
supposed to work. My target language is C#... but I can't get it to work 
with Java either.
Could anyone please give me a hint?

Thanks, and have a nice week-end,

Ruth

From antlr at mirality.co.nz  Sun May 27 05:12:20 2007
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Mon, 28 May 2007 00:12:20 +1200
Subject: [antlr-interest] Newby - How to find rule context in the  AST
In-Reply-To: <68FA523297EE5742A0529D2623425FD4821143@mapibe20.exchange.x chg>
References: <68FA523297EE5742A0529D2623425FD4821143@mapibe20.exchange.xchg>
Message-ID: <20070527121228.50D6D190924@www.antlr.org>

At 21:16 27/05/2007, Harris, Tobin wrote:
>The problem is, I want to be able to interrogate the tree to find 
>out if, for example, the [credentials] were parsed, and then loop 
>through the sub-nodes (username, password etc). Unfortunately the 
>AST doesn't contain this information. I can get the type of a 
>node, but that will only be a "DIGIT" or "INT" etc.
>
>Is there a way of retaining more of the parse tree? Am I missing 
>something here?

Read up on tree rewrite rules (either in the book or the 
wiki).  You can create fake tokens with semantic meaning but no 
syntax (no direct rules) and then use them as the root node in a 
generated AST subtree (or anywhere else for that matter, but the 
root is the most common place).


From antlr at mirality.co.nz  Sun May 27 05:17:30 2007
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Mon, 28 May 2007 00:17:30 +1200
Subject: [antlr-interest] Debugging problem
In-Reply-To: <46595304.6010203@gmx.de>
References: <68FA523297EE5742A0529D2623425FD4821143@mapibe20.exchange.xchg>
	<46595304.6010203@gmx.de>
Message-ID: <20070527121740.B1DFA190922@www.antlr.org>

At 21:44 27/05/2007, Ruth Karl wrote:
 >I like ANTLWorks a lot, but I cannot figure out how to tell it 
how
 >to debug.
 >Whenever I try to, it obviously tries to connect (to port 49157
 >which seems to be the default setting in preferences - but who
 >... is listening there???) and then (not very surprinsingly)
 >gets a time-out. I do not see, how I could configure the 
debugger
 >or how debugging is supposed to work. My target language is 
C#...
 >but I can't get it to work with Java either.

There's two separate debugging modes.  The first ("Debug"), only 
works with Java AFAIK but automatically compiles and runs the 
parser.  The second ("Debug Remote"), I think will work with any 
language since it's connecting to an external server.  To use the 
second option you have to build a debug parser (extra compiler 
option to ANTLR) and start it up, and only *then* start debugging 
in ANTLRworks.

Also note that ANTLRworks only seems to be able to debug parsers 
-- it won't help with debugging the lexer (except indirectly).


From h.kocher at pharmatechnik.de  Thu May 24 00:00:45 2007
From: h.kocher at pharmatechnik.de (Dr. Kocher, Hartmut)
Date: Thu, 24 May 2007 09:00:45 +0200
Subject: [antlr-interest] Error in C# Code Generation
Message-ID: <D43540A44D3F794787378D8B08E8AE530136748C@staexc01.pharmatechnik.de>

Hi,

 

there's a small bug in the C# code generation of the release version of
ANTLR 3.

 

During tree parser generation a function nextNode () is generated, which
should be NextNode ().

 

Attached is the corrected template. Please correct it in the next
release.

 

Kind regards

Hartmut

 

Dr. Hartmut Kocher

Cortex Brainware GmbH

 



--------------------------------------------------------------------
Pharmatechnik GmbH & Co. KG
Munchner Stra?e 15
D-82319 Starnberg

Sitz der Gesellschaft: Starnberg
HRA: 64434, HRB: 66369, Amtsgericht Munchen
Geschaftsfuhrer: Dr. Detlef Graessner, Stephan Jorgens, Dr. Mathias Schindl
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070524/3eb196d2/attachment.html 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: AST.stg
Type: application/octet-stream
Size: 15405 bytes
Desc: AST.stg
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20070524/3eb196d2/attachment.obj 

From open.zone at virgin.net  Sun May 27 08:22:01 2007
From: open.zone at virgin.net (Micheal J)
Date: Sun, 27 May 2007 16:22:01 +0100
Subject: [antlr-interest] Error in C# Code Generation
In-Reply-To: <D43540A44D3F794787378D8B08E8AE530136748C@staexc01.pharmatechnik.de>
Message-ID: <000601c7a072$c7eb9710$c704a8c0@hercules>

Fixed. Thanks for the report.
 
Micheal

-----------------------
The best way to contact me is via the list/forum. My time is very limited. 

-----Original Message-----
From: antlr-interest-bounces at antlr.org
[mailto:antlr-interest-bounces at antlr.org] On Behalf Of Dr. Kocher, Hartmut
Sent: 24 May 2007 08:01
To: antlr-interest at antlr.org
Cc: Terence Parr
Subject: [antlr-interest] Error in C# Code Generation



Hi,

 

there's a small bug in the C# code generation of the release version of
ANTLR 3.

 

During tree parser generation a function nextNode () is generated, which
should be NextNode ().

 

Attached is the corrected template. Please correct it in the next release.

 

Kind regards

Hartmut

 

Dr. Hartmut Kocher

Cortex Brainware GmbH

 

 


  _____  

Pharmatechnik GmbH & Co. KG
Munchner Stra?e 15
D-82319 Starnberg

Sitz der Gesellschaft: Starnberg
HRA: 64434, HRB: 66369, Amtsgericht Munchen
Geschaftsfuhrer: Dr. Detlef Graessner, Stephan Jorgens, Dr. Mathias Schindl



-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070527/6fd460fe/attachment-0001.html 

From ruth.karl at gmx.de  Sun May 27 08:26:28 2007
From: ruth.karl at gmx.de (Ruth Karl)
Date: Sun, 27 May 2007 17:26:28 +0200
Subject: [antlr-interest] Debugging problem
In-Reply-To: <20070527121741.19108gmx1@mx093.gmx.net>
References: <68FA523297EE5742A0529D2623425FD4821143@mapibe20.exchange.xchg>
	<46595304.6010203@gmx.de> <20070527121741.19108gmx1@mx093.gmx.net>
Message-ID: <4659A324.7020607@gmx.de>

Gavin Lambert schrieb:
> At 21:44 27/05/2007, Ruth Karl wrote:
> >I like ANTLWorks a lot, but I cannot figure out how to tell it how
> >to debug.
> >Whenever I try to, it obviously tries to connect (to port 49157
> >which seems to be the default setting in preferences - but who
> >... is listening there???) and then (not very surprinsingly)
> >gets a time-out. I do not see, how I could configure the debugger
> >or how debugging is supposed to work. My target language is C#...
> >but I can't get it to work with Java either.
>
> There's two separate debugging modes.  The first ("Debug"), only works 
> with Java AFAIK but automatically compiles and runs the parser.  The 
> second ("Debug Remote"), I think will work with any language since 
> it's connecting to an external server.  To use the second option you 
> have to build a debug parser (extra compiler option to ANTLR) and 
> start it up, and only *then* start debugging in ANTLRworks.
>
> Also note that ANTLRworks only seems to be able to debug parsers -- it 
> won't help with debugging the lexer (except indirectly).
>
Thanks a lot for your reply: but sorry, what is 'AFAIK'?

For the first ("Debug") option with Java as default target language, the 
following happens:

error(10):  internal error: 
org.antlr.runtime.debug.DebugParser.reportError(DebugParser.java:88): 
java.net.BindException: Address already in use: JVM_Bind

Exception in thread "main" java.lang.NullPointerException
    at 
org.antlr.runtime.debug.DebugEventSocketProxy.transmit(DebugEventSocketProxy.java:108)
    at 
org.antlr.runtime.debug.DebugEventSocketProxy.exitRule(DebugEventSocketProxy.java:122)
    at testParser.document(testParser.java:82)
    at __Test__.main(__Test__.java:16)

which refers to line 82 in testParser:
                                    dbg.exitRule("document");
in the finally-block of its document()-method.

What could be the reason? How can I avoid it and use the debugger?

For the second ("Debug remote") option: As far as I can see, I have to 
modify the parser then, give it a new constructor, so I can invoke it 
without a reference to an inputStream. The same for the lexer. And how 
do I connect it to (which?) DebugEventListener???

Sorry for asking so many probably dumb questions, but I am really 
confused, especially because the description insinuates that "Debug" 
'automatically compiles and runs the parser'...

Ruth

From fabiomaulo at gmail.com  Sun May 27 08:26:38 2007
From: fabiomaulo at gmail.com (Fabio Maulo)
Date: Sun, 27 May 2007 12:26:38 -0300
Subject: [antlr-interest] ANTLR3 first try
Message-ID: <4659A32E.70406@gmail.com>

I had download ANTLR3.
-Install dir is C:\antlr\antlr-3.0
-Set the classpath and verify it
    C:\>echo %classpath%
    C:\antlr\antlr-3.0\lib
-Jars in classpath are: antlr-2.7.7.jar, antlr-3.0.jar, 
antlr-runtime-3.0.jar, stringtemplate-3.0.jar

When i try to generate something the message is
C:\>java org.antlr.Tool Calculator.g
Exception in thread "main" java.lang.NoClassDefFoundError: org/antlr/Tool

Which is my mistake ?



Another little thing:
In AntlrWorks page there is
"ANTLRWorks supports code generation in any language that ANTLR knows 
how to generate via the output=/language/ option"

Where I can set that option to generate CSharp code ?

Thanks.
Fabio.

From jaluber at gmx.de  Sun May 27 08:33:49 2007
From: jaluber at gmx.de (Johannes Luber)
Date: Sun, 27 May 2007 17:33:49 +0200
Subject: [antlr-interest] ANTLR3 first try
In-Reply-To: <4659A32E.70406@gmail.com>
References: <4659A32E.70406@gmail.com>
Message-ID: <4659A4DD.8030300@gmx.de>

Fabio Maulo wrote:
> I had download ANTLR3.
> -Install dir is C:\antlr\antlr-3.0
> -Set the classpath and verify it
>    C:\>echo %classpath%
>    C:\antlr\antlr-3.0\lib
> -Jars in classpath are: antlr-2.7.7.jar, antlr-3.0.jar,
> antlr-runtime-3.0.jar, stringtemplate-3.0.jar
> 
> When i try to generate something the message is
> C:\>java org.antlr.Tool Calculator.g
> Exception in thread "main" java.lang.NoClassDefFoundError: org/antlr/Tool
> 
> Which is my mistake ?

You can't use "C:\antlr\antlr-3.0\lib" as a classpath. List each of
those jars explicitly like "C:\antlr\antlr-3.0\lib\antlr-2.7.7.jar".

> Another little thing:
> In AntlrWorks page there is
> "ANTLRWorks supports code generation in any language that ANTLR knows
> how to generate via the output=/language/ option"
> 
> Where I can set that option to generate CSharp code ?
Use

options {language=CSharp;}

Inside the grammar file. BTW, the order in which such extra commands are
listed is still important (Terence wants to change that in a future
version). If you get an exception at a seemingly valid command, try to
change the order.

Best regards,
Johannes Luber

From jan_ek at op.pl  Sun May 27 08:35:51 2007
From: jan_ek at op.pl (Stefan Chrobot)
Date: Sun, 27 May 2007 17:35:51 +0200
Subject: [antlr-interest] ANTLR3 first try
In-Reply-To: <4659A32E.70406@gmail.com>
References: <4659A32E.70406@gmail.com>
Message-ID: <4659A557.3050302@op.pl>

Fabio Maulo napisa?(a):
 > I had download ANTLR3.
 > -Install dir is C:\antlr\antlr-3.0
 > -Set the classpath and verify it
 >    C:\>echo %classpath%
 >    C:\antlr\antlr-3.0\lib
 > -Jars in classpath are: antlr-2.7.7.jar, antlr-3.0.jar, 
antlr-runtime-3.0.jar, stringtemplate-3.0.jar
 >
 > When i try to generate something the message is
 > C:\>java org.antlr.Tool Calculator.g
 > Exception in thread "main" java.lang.NoClassDefFoundError: org/antlr/Tool
 >
 > Which is my mistake ?

I suggest trying to download ANTLRWorks, it has ANTLRv3 inside. Just 
place the file somewhere on your disk and add complete path to CLASSPATH:

File is here:
C:\ANTLR\antlrworks-1.0.jar

And CLASSPATH looks something like this:
.;C:\Program Files\Java\jre1.5.0_06\lib\ext\QTJava.zip;C:\Program 
Files\Java\jre1.5.0_06\lib\ext;C:\Program Files\Java\libs\jaf;C:\Program 
Files\Java\libs\javamail;C:\ANTLR\antlrworks-1.0.jar


HTH,
Stefan


From fabiomaulo at gmail.com  Sun May 27 08:54:33 2007
From: fabiomaulo at gmail.com (Fabio Maulo)
Date: Sun, 27 May 2007 12:54:33 -0300
Subject: [antlr-interest] ANTLR3 first try
In-Reply-To: <4659A4DD.8030300@gmx.de>
References: <4659A32E.70406@gmail.com> <4659A4DD.8030300@gmx.de>
Message-ID: <4659A9B9.4020703@gmail.com>


Johannes Luber escribi?:
> You can't use "C:\antlr\antlr-3.0\lib" as a classpath. List each of
> those jars explicitly like "C:\antlr\antlr-3.0\lib\antlr-2.7.7.jar".
>   
Thanks, now it work.
 From the book, and the site, was not so clear for me.
> Use
>
> options {language=CSharp;}
>
> Inside the grammar file. 
>   
Thank for this too... my mistake was that I use a mix between old and 
new declaration of the option
options {language='CSharp';}

Thank for all.
Now I can start with ANTLR3.

Bye.
Fabio.


From rdclark at gmail.com  Sun May 27 09:48:35 2007
From: rdclark at gmail.com (Richard Clark)
Date: Sun, 27 May 2007 09:48:35 -0700
Subject: [antlr-interest] Newby - How to find rule context in the AST
In-Reply-To: <68FA523297EE5742A0529D2623425FD4821143@mapibe20.exchange.xchg>
References: <68FA523297EE5742A0529D2623425FD4821143@mapibe20.exchange.xchg>
Message-ID: <d3992d900705270948w497052a4j10b81480f2f7dfaa@mail.gmail.com>

On 5/27/07, Harris, Tobin <tobin at tobinharris.com> wrote:


My top grammar rule looks a bit like this
>
> uriformat = scheme '://' credentials? host path? query?
> [snip]
>
> The problem is, I want to be able to interrogate the tree to find out if,
> for example, the [credentials] were parsed, and then loop through the
> sub-nodes (username, password etc).
>

It sounds like a tree is overkill for your problem. Trees are great if you
need to rearrange language elements after parsing (e.g. "1 + 2" needs to be
"(+ 1 2)"), but can get in the way for simple languages.

Assuming ANTLR v3, you could write something where the parse rules inject
their results into  a data structure (e.g. a hash table) and returns that
structure at the end.

(I'm not a C# programmer, some of the syntax may be off. The $xxx references
are ANTLR v3 syntax.)

urlformat returns [Hashtable parsedUrl ]
    scope { Hashtable url; } // declare a shared variable
    @init{ $urlformat::url = new Hashtable(); }
     : scheme '://' credentials? host path? query?
       { $parsedUrl = $urlformat::url; }
     ;

scheme
    scope urlformat;
    : ID { $urlformat::url.Add("scope", $ID.text); }
    ;

// and so on, having each parser rule stuff results into $urlformat::url...

ID: ('A'..'Z' | 'a..z')+;

// --- end of example ---

Does this help?

...Richard
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070527/63379853/attachment.html 

From jimi at temporal-wave.com  Sun May 27 10:33:55 2007
From: jimi at temporal-wave.com (Jim Idle)
Date: Sun, 27 May 2007 10:33:55 -0700
Subject: [antlr-interest] Writing Delphi Target for Antlr3
In-Reply-To: <1180214750.7574.127.camel@rogue>
References: <20070526073717.5188.qmail@server314.com>
	<AFFE3583-5D0F-4A10-80D1-16859AE6F3ED@cs.usfca.edu>
	<1180206498.7574.121.camel@rogue>
	<B36CCC332A32904F8FA3DE134A2353362525E3@wavemachine.temporal-wave.com>
	<1180214750.7574.127.camel@rogue>
Message-ID: <B36CCC332A32904F8FA3DE134A2353362525E7@wavemachine.temporal-wave.com>

I am totally anti macros for anything other than constants in normal C
code - in fact I think these days you are better off using a C++
compiler as a better C, if you can get around the horrible linking
headaches on UNIX ;-).

However, as you will see from comments in the generated code/template,
the one exception is when you are generating code that is not maintained
directly and here you are only concerned with flow really, as the
grammar programmer should not have to debug the C runtime, just single
step the grammar code. 

So: 

STACK_ENTRY(myStack, -2) 

seems a lot more readable than 

ctx->myStackStack->get(ctx->myStackStack, -2 ) 

or whatever it was I had to do to reference back from stack tops. 

As none of the actual C stuff and structures will be too useful for
other targets, then I don't think that would get in the way of its use
as a general template example. However, I think that in order to produce
a target for ANTLR you really need to be someone who can just sit down
and hack your way through it until you understand it, so maybe no
existing template is much use other than for the names and parameters of
the templates themselves and even they are only a starting point.

Jim

> -----Original Message-----
> From: Luke A. Guest [mailto:laguest at archangeli.co.uk]
> Sent: Saturday, May 26, 2007 2:26 PM
> To: Jim Idle
> Cc: Terence Parr; ANTR Interest
> Subject: RE: [antlr-interest] Writing Delphi Target for Antlr3
> 
> On Sat, 2007-05-26 at 13:06 -0700, Jim Idle wrote:
> > functions you have not written yet. I am thinking of producing a C-
> lite
> > output, which does not require runtime and that might help new
> template
> > authors.
> 
> This would be useful as long as it's not chocfull of macros, they make
> things a lot harder to understand. Maybe a Pascal version as it's more
> structured? Or possibly some other lite language? Maybe D-lite?
> 
> > What you are looking for here, as I think you have realized is the
> > equivalent of this in C:
> >
> > {
> > 	int x;
> > 	{
> > 		int y;
> > 	}
> > }
> >
> > It's been some time since even looked at a Pascal program, but does
> it
> > allow:
> >
> > var
> >   x: Integer;
> >   begin
> > 	var
> > 	 y: Integer;
> > 	begin
> > 		...
> > 	end
> >   end
> >
> > ?
> 
> Yeah, I thought Pascal could do it, it's been so long, I coutldn't be
> sure. But the fact that Ada is Pascal like, it makes sense that it
> should be able to do that.
> 
> Thanks,
> Luke.
> 


From jimi at temporal-wave.com  Sun May 27 10:38:08 2007
From: jimi at temporal-wave.com (Jim Idle)
Date: Sun, 27 May 2007 10:38:08 -0700
Subject: [antlr-interest] Writing Delphi Target for Antlr3
In-Reply-To: <20070527004732.20238.qmail@server314.com>
References: <20070527004732.20238.qmail@server314.com>
Message-ID: <B36CCC332A32904F8FA3DE134A2353362525E8@wavemachine.temporal-wave.com>

Not sure you are going to be able to get around this like that then. One
thought is that you could declare an array of those variables that would
be 'big enough' and then use the decision number to reference the array.
If Ter added the number of decisions as an input, if it isn't already
then you could even declare an array of the correct size. I think that
all the information is there to do that.

Jim

> -----Original Message-----
> From: service [mailto:service at sharpplus.com]
> Sent: Saturday, May 26, 2007 5:48 PM
> To: Jim Idle
> Cc: antlr-interest at antlr.org
> Subject: Re: [antlr-interest] Writing Delphi Target for Antlr3
> 
> 
> no, Delphi does not allow such syntax.
> 
> best regards
> Chin Shou
> >  It's been some time since even looked at a Pascal program, but does
> it
> >  allow:
> >
> >  var
> >    x: Integer;
> >    begin
> >  var
> >    y: Integer;
> >  begin
> >  ...
> >  end
> >    end


From jimi at temporal-wave.com  Sun May 27 10:48:58 2007
From: jimi at temporal-wave.com (Jim Idle)
Date: Sun, 27 May 2007 10:48:58 -0700
Subject: [antlr-interest] No match
In-Reply-To: <OFE2FF8FD3.91DE1724-ON852572E8.000A192E-852572E8.000A569C@datatel.com>
References: <001c01c7a000$b090c3f0$c704a8c0@hercules>
	<OFE2FF8FD3.91DE1724-ON852572E8.000A192E-852572E8.000A569C@datatel.com>
Message-ID: <B36CCC332A32904F8FA3DE134A2353362525EA@wavemachine.temporal-wave.com>

Jason,

 

The thing is that what you have specified in your grammar is that the
code isn't bad. It just doesn't satisfy any of the rules and the parser
stops. Send us some sample input, but maybe it is just that you need to
say that EOF must come next or something similar.

 

This tends to mean that your grammar structure isn't quite right and I
don't think we could help specifically unless you post more of your
example. What is it you are trying to parse?

 

Jim

 

From: antlr-interest-bounces at antlr.org
[mailto:antlr-interest-bounces at antlr.org] On Behalf Of Jason Hocker
Sent: Saturday, May 26, 2007 6:53 PM
To: Micheal J
Cc: antlr-interest at antlr.org; antlr-interest-bounces at antlr.org
Subject: Re: [antlr-interest] No match

 


I mean that the rule doesn't match... so the loop breaks out... so there
is code that I want the parser to parse, but the parser has finished its
method. 

Matching nothing is also valid, so I want to keep it at zero-to-many.
What I want to add is that if I have bad code there is an error
reported. 

We have a rule like: 

code: (ruleA | ruleB | ruleC | ruleD)*; 




-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070527/fdb62b27/attachment-0001.html 

From jimi at temporal-wave.com  Sun May 27 10:51:26 2007
From: jimi at temporal-wave.com (Jim Idle)
Date: Sun, 27 May 2007 10:51:26 -0700
Subject: [antlr-interest] No match
In-Reply-To: <OF0C13DBE9.975273D3-ON852572E8.000BACBC-852572E8.000BB39F@datatel.com>
References: <002501c7a002$a60c9650$c704a8c0@hercules>
	<OF0C13DBE9.975273D3-ON852572E8.000BACBC-852572E8.000BB39F@datatel.com>
Message-ID: <B36CCC332A32904F8FA3DE134A2353362525EB@wavemachine.temporal-wave.com>

I'm surprised that Datatel are even that adventurous ;-). Have you
considered just adding the EOF token? However if this is not the top
production, then what you coded here is the equivalent of code? And it
will just assume that it isn't there and look to the next possibility. 

 

Jim

 

From: antlr-interest-bounces at antlr.org
[mailto:antlr-interest-bounces at antlr.org] On Behalf Of Jason Hocker
Sent: Saturday, May 26, 2007 7:08 PM
To: Micheal J
Cc: antlr-interest at antlr.org; antlr-interest-bounces at antlr.org
Subject: Re: [antlr-interest] No match

 


My company has decided to stay at version 2.7.4 



Jason Hocker, SCJP (1.4), SCWCD (1.3, 1.4), SCMAD, SCDJWS 
Senior Developer
Datatel, Inc.
How higher education does business.




We have a rule like: 

code: (ruleA | ruleB | ruleC | ruleD)*; 

So if we try to parse code that is wrong... it won't match any of these
rules, and the parser continues and end. 

How can we better implement error handling? 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070527/9289e821/attachment.html 

From antlr-list at arizona-software.ch  Sun May 27 16:15:53 2007
From: antlr-list at arizona-software.ch (Jean Bovet)
Date: Sun, 27 May 2007 16:15:53 -0700
Subject: [antlr-interest] Debugging problem
In-Reply-To: <4659A324.7020607@gmx.de>
References: <68FA523297EE5742A0529D2623425FD4821143@mapibe20.exchange.xchg>
	<46595304.6010203@gmx.de> <20070527121741.19108gmx1@mx093.gmx.net>
	<4659A324.7020607@gmx.de>
Message-ID: <B0E71AEC-8FEF-49E6-B6B3-2EDB08D40855@arizona-software.ch>

Hi,

Yes, "Debug" will compile and run the parser as long as the grammar  
is targeted to the Java language. The exception you are having is  
probably due to the parser already running or another process using  
the same port. Make sure that no other process is using the debug  
port or that no previous session of the parser is running already in  
the background.

I don't know if C# has the debugging interface yet....

Regards,

Jean

On May 27, 2007, at 8:26 AM, Ruth Karl wrote:

> Gavin Lambert schrieb:
>> At 21:44 27/05/2007, Ruth Karl wrote:
>> >I like ANTLWorks a lot, but I cannot figure out how to tell it how
>> >to debug.
>> >Whenever I try to, it obviously tries to connect (to port 49157
>> >which seems to be the default setting in preferences - but who
>> >... is listening there???) and then (not very surprinsingly)
>> >gets a time-out. I do not see, how I could configure the debugger
>> >or how debugging is supposed to work. My target language is C#...
>> >but I can't get it to work with Java either.
>>
>> There's two separate debugging modes.  The first ("Debug"), only  
>> works with Java AFAIK but automatically compiles and runs the  
>> parser.  The second ("Debug Remote"), I think will work with any  
>> language since it's connecting to an external server.  To use the  
>> second option you have to build a debug parser (extra compiler  
>> option to ANTLR) and start it up, and only *then* start debugging  
>> in ANTLRworks.
>>
>> Also note that ANTLRworks only seems to be able to debug parsers  
>> -- it won't help with debugging the lexer (except indirectly).
>>
> Thanks a lot for your reply: but sorry, what is 'AFAIK'?
>
> For the first ("Debug") option with Java as default target  
> language, the following happens:
>
> error(10):  internal error:  
> org.antlr.runtime.debug.DebugParser.reportError(DebugParser.java: 
> 88): java.net.BindException: Address already in use: JVM_Bind
>
> Exception in thread "main" java.lang.NullPointerException
>    at org.antlr.runtime.debug.DebugEventSocketProxy.transmit 
> (DebugEventSocketProxy.java:108)
>    at org.antlr.runtime.debug.DebugEventSocketProxy.exitRule 
> (DebugEventSocketProxy.java:122)
>    at testParser.document(testParser.java:82)
>    at __Test__.main(__Test__.java:16)
>
> which refers to line 82 in testParser:
>                                    dbg.exitRule("document");
> in the finally-block of its document()-method.
>
> What could be the reason? How can I avoid it and use the debugger?
>
> For the second ("Debug remote") option: As far as I can see, I have  
> to modify the parser then, give it a new constructor, so I can  
> invoke it without a reference to an inputStream. The same for the  
> lexer. And how do I connect it to (which?) DebugEventListener???
>
> Sorry for asking so many probably dumb questions, but I am really  
> confused, especially because the description insinuates that  
> "Debug" 'automatically compiles and runs the parser'...
>
> Ruth


From open.zone at virgin.net  Sun May 27 18:55:15 2007
From: open.zone at virgin.net (Micheal J)
Date: Mon, 28 May 2007 02:55:15 +0100
Subject: [antlr-interest] Debugging problem
In-Reply-To: <B0E71AEC-8FEF-49E6-B6B3-2EDB08D40855@arizona-software.ch>
Message-ID: <001701c7a0cb$3d8ffbc0$c704a8c0@hercules>

> Hi,
> 
> Yes, "Debug" will compile and run the parser as long as the grammar  
> is targeted to the Java language. The exception you are having is  
> probably due to the parser already running or another process using  
> the same port. Make sure that no other process is using the debug  
> port or that no previous session of the parser is running already in  
> the background.
> 
> I don't know if C# has the debugging interface yet....
> 
> Regards,
> 
> Jean

C# target&runtime do have the debugging interface/protocol implemented. 

Remember to grab the latest templates as they continue to be updated (this
applies even if you're not debugging btw).


Micheal

-----------------------
The best way to contact me is via the list/forum. My time is very limited.


From bear.mini at gmail.com  Sun May 27 19:29:44 2007
From: bear.mini at gmail.com (Takashi Oguma)
Date: Mon, 28 May 2007 11:29:44 +0900
Subject: [antlr-interest] Is "-debug" command line option broken with
	language=CSharp?
In-Reply-To: <000501c79f79$7b695bb0$c704a8c0@hercules>
References: <8a0c37020705252018s1d0ec7fn8566df5cc37f81d0@mail.gmail.com>
	<000501c79f79$7b695bb0$c704a8c0@hercules>
Message-ID: <8a0c37020705271929tc59cac9s77e80e4ce152db88@mail.gmail.com>

Hi Micheal,

I tried the updated Dbg.stg file. It seems to work fine. At least I
can get a parse tree for the wiki page's example.

# I'm sorry for forgotting to add this list's address in my previous post.
# I'm not used to writing with Gmail :(

On 5/26/07, Micheal J <open.zone at virgin.net> wrote:
> Hi Takashi,
>
> Find the updated Dbg.stg file attached. Replace the one in your .jar file or
> in the appropriate sub-dir of ANTLR directory. It should go in:
>        src/org/antlr/codegen/templates/CSharp/Dbg.stg
>
> This should fix both the 'nvae' and the 'location' issues you reported in
> debug output. Please retry and let me know (and others on the list) if it
> does fix the issues for you.
>
> Micheal
>
> -----------------------
> The best way to contact me is via the list/forum. My time is very limited.
>
> > -----Original Message-----
> > From: Takashi Oguma [mailto:bear.mini at gmail.com]
> > Sent: 26 May 2007 04:18
> > To: Micheal J
> > Subject: Re: [antlr-interest] Is "-debug" command line option
> > broken with language=CSharp?
> >
> >
> > Hi Micheal,
> >
> > Thanks for replying!
> >
> > I sent wrong PParser.cs (generated without -debug option) by
> > mistake. Now I sent PParser.cs and PLexer.cs generated with
> > -debug option. There is 'nvae' at the line #393. Anyway I'll
> > try the latest Dbg.stg for the first problem.
> >
> > Thanks!
> >
> > On 5/25/07, Micheal J <open.zone at virgin.net> wrote:
> > > Hi Takashi,
> > >
> > > Thanks for the report.
> > >
> > > > I want to build a parse tree with my grammar, and as my
> > first step,
> > > > I refer to this Wiki page:
> > > > http://www.antlr.org/wiki/pages/viewpage.action?pageId=1760
> > > >
> > >
> > > [SNIP]...
> > >
> > > > But when I compiled PParser.cs, I got 2 types of error messages:
> > > >
> > > > 1st:
> > > > error CS0117: 'Antlr.Runtime.Debug.IDebugEventListener' does not
> > > > contain a definition for 'location' (this error occurred 5 times)
> > >
> > > Yes the debug codegen output was broken :(
> > >
> > > It has now been fixed with respect to this issue:
> > >
> > >
> > http://fisheye2.cenqua.com/browse/antlr/src/org/antlr/codegen/te> mplate
> > > s/CSha
> > > rp/Dbg.stg?r1=3676&r2=3787
> > >
> > >
> > > > 2nd:
> > > > error CS0103: The name 'nvae' does not exist in the
> > current context
> > > > (this erro occurred 1 time)
> > > ...
> > > > C:\Work\AntlrExample\AntlrExample\PParser.cs(393,42):
> > error CS0103:
> > > > The
> > > name 'nvae' does not exist in the current context
> > >
> > > There is no entity named 'nvae' anywhere in the PParser.cs file. Is
> > > this a real error?
> > >
> > >
> > > Until the next "daily" build, you can grab the latest C# Dbg.stg
> > > template group file from:
> > >
> > >
> > http://fisheye2.cenqua.com/browse/~raw,r=> 3787/antlr/src/org/antlr/code
> > > gen/te
> > > mplates/CSharp/Dbg.stg
> > >
> > >
> > > Micheal
> > >
> > > -----------------------
> > > The best way to contact me is via the list/forum. My time is very
> > > limited.
> > >
> > >
> >
> >
> > --
> > Takashi OGUMA  ?? ?
> > bear.mini at gmail.com
> >
>
>


-- 
Takashi OGUMA  ?? ?
bear.mini at gmail.com

From antlr-list at arizona-software.ch  Sun May 27 21:54:23 2007
From: antlr-list at arizona-software.ch (Jean Bovet)
Date: Sun, 27 May 2007 21:54:23 -0700
Subject: [antlr-interest] ANTLRWorks 1.0.1 available
Message-ID: <CDE7264F-507C-4FFB-AA2A-5A77EC4C95A8@arizona-software.ch>

Hi,

ANTLRWorks 1.0.1 is now available at www.antlr.org/works. It has the  
following fixes:

     [AW-48] - IntelliJ 6 does not always quit after running  
ANTLRWorks plugin debugger
     [AW-51] - Find dialog replaces even non-matching text and  
performs replace with previous find value
     [AW-53] - Wrong version of ST included in the jar (2.3b10  
instead of 3.0.1)
     [AW-55] - Freezes when opening the Find dialog in desktop mode  
on Windows
     [AW-56] - Don't change the string quote (double/single) in  
actions when refactoring
     [AW-57] - Creating a new rule automatically introduces always a  
new line
     [AW-59] - Window menu does not select the correct window if a  
panel is visible (like the Find panel)
     [AW-61] - AST tree node is not correctly selected when selecting  
input token "class" in the attached grammar
     [AW-62] - Decision does not show up for assignment ref (in rule  
stat)
     [AW-63] - Opening ANTLRWorks from the Mac OS X Finder by double- 
clicking a grammar file fails
     [AW-64] - CTRL-F10 does not work on Windows in desktop mode
     [AW-67] - There are some hard coded links to icons that prevent  
ANTLRWorks to launch correctly
     [AW-68] - Read-only document prevents menu shortcut to be invoked
     [AW-52] - Bring windows to the front when show() is invoked
     [AW-58] - Move the last closed document to the top of the Recent  
Files list
     [AW-60] - In desktop mode, the grammar text area is not focused  
at startup
     [AW-65] - Generate test-ring with a different port number to  
avoid conflict under Windows Vista
     [AW-69] - Shift-HOME or Shift-END do not select the line on Mac  
OS X
     [AW-50] - Merged XJLib into ANTLR project

In addition, I created a short tutorial about how to setup IntelliJ  
to edit, run and debug ANTLRWorks and its plugin:

http://www.antlr.org/works/help/tutorial/intellij.html

The source code has now an ant script that can be used to build  
ANTLRWorks (jar and zip for Mac OS X) and its plugin. A help page is  
available here:

http://www.antlr.org/works/help/tutorial/ant.html

Regards,

Jean


From laguest at archangeli.co.uk  Mon May 28 11:21:57 2007
From: laguest at archangeli.co.uk (Luke A. Guest)
Date: Mon, 28 May 2007 19:21:57 +0100
Subject: [antlr-interest] Ada95 Wiki page added
Message-ID: <1180376517.7582.28.camel@rogue>

Hi,

Well, I seem to have at least got "somewhere" with this, so I thought
I'd put up a target page for it in the Wiki for anybody else that might
be interested in this target ;D

Thanks (and especially to those who have helped thus far),
Luke.



From tobin at tobinharris.com  Mon May 28 13:08:01 2007
From: tobin at tobinharris.com (Harris, Tobin)
Date: Mon, 28 May 2007 22:08:01 +0200
Subject: [antlr-interest] Newby - How to find rule context in the AST
In-Reply-To: <d3992d900705270948w497052a4j10b81480f2f7dfaa@mail.gmail.com>
References: <68FA523297EE5742A0529D2623425FD4821143@mapibe20.exchange.xchg>
	<d3992d900705270948w497052a4j10b81480f2f7dfaa@mail.gmail.com>
Message-ID: <68FA523297EE5742A0529D2623425FD482119A@mapibe20.exchange.xchg>

Hi Richard,

 

Those rewrite rules are great - thanks for the pointer! In this case
you're probably right, in that I don't *really* need a tree, the parsed
expressions in a Hashtable are working nicely.

 

Gavin, those re-write rules look useful too, definitely worth exploring
if things get more complicated - thanks for the tip. 

 

Tobin

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070528/c0b4628b/attachment.html 

From mark.mandel at gmail.com  Mon May 28 17:52:22 2007
From: mark.mandel at gmail.com (Mark Mandel)
Date: Tue, 29 May 2007 10:52:22 +1000
Subject: [antlr-interest] v3: can't seem to work out filter=true
Message-ID: <4153ee230705281752h5a515c65v28cc2e8d29682fe1@mail.gmail.com>

Heya,

I'm trying to wrap my head around filter=true, and failing.

I'm currently just trying to implement a grammar that will pick up
<tag> 's anywhere in a string, regardless of the string.

I figured a perfect opportunity for filter=true, which I had thought
would ignore what I didn't want, and allow me to filter down a list of
intended tokens in order (which is very handy).. but I can't seem to
get it to work for me.

When I do a test string of '<h>' against the below grammar, I get a
TokenException, but if I take out the filter=true, then it works
fine... I'm confused?

Can someone please point me in the right direction?

grammar TAG:

options
{
	output=AST;
	filter=true;
}


/* Parser */

basicTag
	:
	TAG_OPEN TAG_CLOSE
	;

/* Lexer */

TAG_OPEN
	:
	'<'TAG_NAME
	;
	
TAG_CLOSE
	:
	'>'
	;
	
/* fragments */

fragment TAG_NAME
	:
	(LETTER)(LETTER | DIGIT | '_')*
	;

fragment DIGIT
	:
	'0'..'9'
	;

fragment LETTER
	:
	'a'..'z' | 'A'..'Z'
	;

/* hidden tokens */

WS
	:
	(' '|'\r'|'\t'|'\u000C'|'\n')
	{
		$channel=HIDDEN;
	}
	;

Thanks,

Mark

-- 
E: mark.mandel at gmail.com
W: www.compoundtheory.com

From qwertie256 at gmail.com  Mon May 28 17:57:12 2007
From: qwertie256 at gmail.com (David Piepgrass)
Date: Mon, 28 May 2007 18:57:12 -0600
Subject: [antlr-interest] Problematic links
Message-ID: <ce40b1470705281757r2cf8fc4aqa1d3bc84b274ab96@mail.gmail.com>

I bought the ANTLR PDF, but the sample code, such as

http://media.pragprog.com/titles/tpantlr/code/tour/eval/Expr.g

has no line breaks. Who can fix this problem, or are the line breaks merely
hidden and I need a special technique to see them?

Also, I found links to two versions of an ANTLR v2 => v3 converter including


http://www.antlr.org/v2v3-0.2.tar.gz

but both links are broken.

I think the best way to understand the syntax changes in v3 would be to see
a grammar in v2 and v3 side-by-side, can someone suggest a pair to look at?

-- 
- David
http://qism.blogspot.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070528/60d732f2/attachment.html 

From parrt at cs.usfca.edu  Mon May 28 17:59:14 2007
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon, 28 May 2007 17:59:14 -0700
Subject: [antlr-interest] v3: can't seem to work out filter=true
In-Reply-To: <4153ee230705281752h5a515c65v28cc2e8d29682fe1@mail.gmail.com>
References: <4153ee230705281752h5a515c65v28cc2e8d29682fe1@mail.gmail.com>
Message-ID: <B4DAA486-13A7-49B4-9F1C-C76576B9EBE4@cs.usfca.edu>


On May 28, 2007, at 5:52 PM, Mark Mandel wrote:

> Heya,
>
> I'm trying to wrap my head around filter=true, and failing.
>
> I'm currently just trying to implement a grammar that will pick up
> <tag> 's anywhere in a string, regardless of the string.
>
> I figured a perfect opportunity for filter=true, which I had thought
> would ignore what I didn't want, and allow me to filter down a list of
> intended tokens in order (which is very handy).. but I can't seem to
> get it to work for me.
>
> When I do a test string of '<h>' against the below grammar, I get a
> TokenException, but if I take out the filter=true, then it works
> fine... I'm confused?
>
> Can someone please point me in the right direction?
>
> grammar TAG:
>
> options
> {
> 	output=AST;
> 	filter=true;
> }

filter=true only works in the lexer. :) You should not really have a  
parser in this case because you cannot really apply a grammatical  
structure to the incomplete stream of tokens emanating from a lexer  
that filters most stuff out.


  I would take a look at the fuzzy python lexer or was a Java in the  
examples tarball.

Ter

From parrt at cs.usfca.edu  Mon May 28 18:01:05 2007
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon, 28 May 2007 18:01:05 -0700
Subject: [antlr-interest] Problematic links
In-Reply-To: <ce40b1470705281757r2cf8fc4aqa1d3bc84b274ab96@mail.gmail.com>
References: <ce40b1470705281757r2cf8fc4aqa1d3bc84b274ab96@mail.gmail.com>
Message-ID: <6CCBEB45-87F2-4DEE-B5B1-15B9F402FDAF@cs.usfca.edu>


On May 28, 2007, at 5:57 PM, David Piepgrass wrote:

> I bought the ANTLR PDF, but the sample code, such as
>
> http://media.pragprog.com/titles/tpantlr/code/tour/eval/Expr.g
>
> has no line breaks. Who can fix this problem, or are the line  
> breaks merely hidden and I need a special technique to see them?

It is a PC versus Linux thing. most editors will know how to deal  
with this.  Just cut and paste into your programming editor.

> Also, I found links to two versions of an ANTLR v2 => v3 converter  
> including
>
> http://www.antlr.org/v2v3-0.2.tar.gz
>
> but both links are broken.

  if you tell me where the links are I will fix it.  Just look in the  
download directory.

> I think the best way to understand the syntax changes in v3 would  
> be to see a grammar in v2 and v3 side-by-side, can someone suggest  
> a pair to look at?

I believe the antlr-from-v2 and the original antlr.g from v2  
distribution would be a decent pair.

Ter



From qwertie256 at gmail.com  Mon May 28 18:32:49 2007
From: qwertie256 at gmail.com (David Piepgrass)
Date: Mon, 28 May 2007 19:32:49 -0600
Subject: [antlr-interest] How to separate lexer and parser? How to invoke
	ANTLR?
Message-ID: <ce40b1470705281832y72b5f704iffe68a7633d88ed8@mail.gmail.com>

I know v3 has combined grammars, but I want a separate lexer and parser.
However, when I try to compile a grammar without a parser, ANTRLWorks says

>  Cannot generate the grammar because
>  (100): D:\...\Test.g:0:0: syntax error: codegen: <AST>:0:0: unexpected
end of subtree

Ideas?

I would also like to manually control the numeric IDs for token types, in
order to share some of the same numbers between multiple lexers; how can I
do this?

Also, how do I invoke antlr-3.0.jar from the command line? The book says to
use

java org.antlr.Tool Test.g

which I changed to

java -classpath antlr-3.0.jar org.antlr.Tool Test.g

but I got the error

>  Exception in thread "main" java.lang.NoClassDefFoundError:
org/antlr/stringtemplate/StringTemplateErrorListener
>        at org.antlr.Tool.main(Tool.java:67)

Forgive me, I'm not a Java guy. How can I make it work?
-- 
- David
http://qism.blogspot.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070528/f0d91da3/attachment.html 

From parrt at cs.usfca.edu  Mon May 28 18:35:57 2007
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon, 28 May 2007 18:35:57 -0700
Subject: [antlr-interest] How to separate lexer and parser? How to
	invoke ANTLR?
In-Reply-To: <ce40b1470705281832y72b5f704iffe68a7633d88ed8@mail.gmail.com>
References: <ce40b1470705281832y72b5f704iffe68a7633d88ed8@mail.gmail.com>
Message-ID: <5629F82E-3E58-47A2-A5D3-9C63B5738260@cs.usfca.edu>

Hi David,

did you say "lexer grammar foo" or just "grammar foo"?  Need a  
"parser grammar foo" and "lexer grammar foo" in separate files.

Ter
On May 28, 2007, at 6:32 PM, David Piepgrass wrote:

> I know v3 has combined grammars, but I want a separate lexer and  
> parser. However, when I try to compile a grammar without a parser,  
> ANTRLWorks says
>
> >  Cannot generate the grammar because
> >  (100): D:\...\Test.g:0:0: syntax error: codegen: <AST>:0:0:  
> unexpected end of subtree
>
> Ideas?
>
> I would also like to manually control the numeric IDs for token  
> types, in order to share some of the same numbers between multiple  
> lexers; how can I do this?
>
> Also, how do I invoke antlr-3.0.jar from the command line? The book  
> says to use
>
> java org.antlr.Tool Test.g
>
> which I changed to
>
> java -classpath antlr-3.0.jar org.antlr.Tool Test.g
>
> but I got the error
>
> >  Exception in thread "main" java.lang.NoClassDefFoundError: org/ 
> antlr/stringtemplate/StringTemplateErrorListener
> >        at org.antlr.Tool.main(Tool.java:67)
>
> Forgive me, I'm not a Java guy. How can I make it work?
> -- 
> - David
> http://qism.blogspot.com


From treaves at silverfieldstech.com  Mon May 28 08:04:34 2007
From: treaves at silverfieldstech.com (Timothy Reaves)
Date: Mon, 28 May 2007 11:04:34 -0400
Subject: [antlr-interest] Newby - How to use Parser/Lexer in Code?
In-Reply-To: <B36CCC332A32904F8FA3DE134A2353362525E6@wavemachine.temporal-wave.com>
References: <68FA523297EE5742A0529D2623425FD482113C@mapibe20.exchange.xchg>
	<B36CCC332A32904F8FA3DE134A2353362525E6@wavemachine.temporal-wave.com>
Message-ID: <f3er22$2j5$1@sea.gmane.org>

Jim Idle wrote:
> Best this is to buy the book, but for pure examples, check out the 
> examples tar from the download page ? that should get you going, but I 
> can?t remember if the C# stuff is there yet.
> 
>  
> 
> Jim
> 
--snip--
> This shows
> 
>  
> 
> custom :// user : pass @ someserver : 1000 / folder ? query = blah
> 
>  
> 
> At this point I?m guessing I need to start working with the tree to make 
> my program extract the tokens, work out what they are, and implement the 
> desired functionality? However, I don?t really know what I?m doing! Does 
> anyone know of any up-to-date simple examples of this that show a 
> grammar actually being consumed and used in a program? Can anyone 
> recommend the best next steps to take?
> 


	If all you are doing is find the URL as above, ANTLR is very much the wrong 
thing to use.



From tobin at tobinharris.com  Tue May 29 00:45:18 2007
From: tobin at tobinharris.com (Harris, Tobin)
Date: Tue, 29 May 2007 09:45:18 +0200
Subject: [antlr-interest] Newby - How to use Parser/Lexer in Code?
In-Reply-To: <f3er22$2j5$1@sea.gmane.org>
References: <68FA523297EE5742A0529D2623425FD482113C@mapibe20.exchange.xchg><B36CCC332A32904F8FA3DE134A2353362525E6@wavemachine.temporal-wave.com>
	<f3er22$2j5$1@sea.gmane.org>
Message-ID: <68FA523297EE5742A0529D2623425FD48211B1@mapibe20.exchange.xchg>

>> custom :// user : pass @ someserver : 1000 / folder ? query = blah
>> 
>> [snip]
>
>	If all you are doing is find the URL as above, ANTLR is very
much the wrong 
>thing to use.

Hi Timothy

Thanks for this, I did suspect weather ANTLR would be considered
overkill. What would be the right tool to use? 

I considered RegEx, but expressions get unmaintainable quite quickly. I
also considered manually splitting/parsing the input, but though there
must be a better way?

Thanks

Tobin 



From boris.boucher at gmail.com  Tue May 29 01:49:57 2007
From: boris.boucher at gmail.com (Boris Boucher)
Date: Tue, 29 May 2007 10:49:57 +0200
Subject: [antlr-interest] ANTLR3 - C Targert : Error handling
Message-ID: <1ce9448c0705290149r5ff9631dwbad987c845b9a01a@mail.gmail.com>

Hi,

I have a working lexer/parser using the C target and all is fine is I submit
a valid text to it.

But I can't figure out how to handle error.

Right now, if I submit invalide text (at the parser level), the parser
generate an error and print out some information, then continue parsing,
re-enter the error and crash.

Is there a mean to handle error ? Is it possible to order the parser to
continue or fail after an error ?

Boris
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070529/9a1fda04/attachment.html 

From qwertie256 at gmail.com  Tue May 29 07:16:27 2007
From: qwertie256 at gmail.com (David Piepgrass)
Date: Tue, 29 May 2007 08:16:27 -0600
Subject: [antlr-interest] Problematic links
Message-ID: <ce40b1470705290716i39d9179bg85a4813a8c1d0d16@mail.gmail.com>

>> has no line breaks.
>It is a PC versus Linux thing. most editors will know how to deal
>with this.  Just cut and paste into your programming editor.

I'm afraid that doesn't work - no line breaks appear when pasting into
a programmer's editor such as Notepad2 or ANTLRWorks.

However, if I save from Firefox or IE into a text file, then line
breaks DO appear - but at regular intervals, not where they are
supposed to be. It looks like this:

grammar Expr; // START:members @header { import  java.util.HashMap; }
@members { /** Map variable name to Integer object holding value */
HashMap memory = new HashMap(); } // END:members // START:stat prog:
stat+ ; stat: // evaluate expr and emit result // $expr.value is return
attribute 'value' from expr call expr NEWLINE
{System.out.println($expr.value);} // match assignment and stored value
// $ID.text is text property of token matched for ID reference | ID '='
expr NEWLINE { memory.put($ID.text, new Integer($expr.value));} // do
...

>if you tell me where the links are I will fix it.  Just look in the
>download directory.

oh, sorry, one link is at  http://www.antlr.org/download.html

and the other was in the mailing list archives. Isn't this the
"download directory"?

>I believe the antlr-from-v2 and the original antlr.g from v2
>distribution would be a decent pair.

Well, I found

antlr-2.7.7/antlr/antlr.g within
http://www.antlr2.org/download/antlr-2.7.7.tar.gz
and antlr-3.0/src/org/antlr/tool/antlr.g within
http://www.antlr.org/download/antlr-3.0.tar.gz

but I couldn't find something named antlr-from-v2.

From jaluber at gmx.de  Tue May 29 07:27:20 2007
From: jaluber at gmx.de (Johannes Luber)
Date: Tue, 29 May 2007 16:27:20 +0200
Subject: [antlr-interest] Problematic links
In-Reply-To: <ce40b1470705290716i39d9179bg85a4813a8c1d0d16@mail.gmail.com>
References: <ce40b1470705290716i39d9179bg85a4813a8c1d0d16@mail.gmail.com>
Message-ID: <465C3848.4050004@gmx.de>

David Piepgrass wrote:
>>> has no line breaks.
>> It is a PC versus Linux thing. most editors will know how to deal
>> with this.  Just cut and paste into your programming editor.
> 
> I'm afraid that doesn't work - no line breaks appear when pasting into
> a programmer's editor such as Notepad2 or ANTLRWorks.
> 
> However, if I save from Firefox or IE into a text file, then line
> breaks DO appear - but at regular intervals, not where they are
> supposed to be. It looks like this:

I suppose Firefox treats files with the suffix *.g as HTML files, not as
text files, when rendering. The text mime type isn't set on the server
side so Firefox has to guess. The workaround is to save those files and
view them with another editor as you found out.

Best regards,
Johannes Luber

From panayk at gmail.com  Tue May 29 12:16:02 2007
From: panayk at gmail.com (Panayiotis)
Date: Tue, 29 May 2007 22:16:02 +0300
Subject: [antlr-interest] Semantic predicate hoisting - How to turn off?
	(somewhat urgent)
Message-ID: <465C7BF2.2060405@gmail.com>

Hi!

In ANTLR 3 is the new semantic predicate hoisting feature turned on by 
default?
I believe it is, because I'm getting javac errors like:

[21:47:11] \tmp\antlrworks\pclParser.java:4225: cannot find symbol
[21:47:11] symbol  : variable f
[21:47:11] location: class pclParser
[21:47:11]                         if ( 
(((evalPredicate(we,"$we.is_l_value")&&evalPredicate(f,"$f.is_l_value"))||evalPredicate(we,"$we.is_l_value"))) 
) {

when in fact "$we.is_l_value" and "$f.is_l_value" never appear in the 
same rule. Either that or am I doing something fundamentally wrong :-) .
There were literally dozens of similar errors that disappeared as soon 
as I added the option "k=1;". Is there a similar option to disable 
predicate hoisting and any other advanced features ANTLR may have 
enabled by default?

I need to get this working within the week, so I'll greatly appreciate 
any help you can offer me!

From gjones at coopknow.com  Tue May 29 13:04:21 2007
From: gjones at coopknow.com (Glenn Jones)
Date: Tue, 29 May 2007 16:04:21 -0400
Subject: [antlr-interest] Getting input from an alternate source (sockets)
In-Reply-To: <465C7BF2.2060405@gmail.com>
Message-ID: <002c01c7a22c$8f3822b0$6401a8c0@morrow>

I am writing an application that will be receiving its input through a
network socket.  I have been working with Antlr 3 and trying to get a series
of input from the client to be parsed by Antlr.  I am able to get the data
from the socket into the lexer's input stream, but the lexer appears to be
wanting to read the data to the end.  Since I need to send responses back to
the client after specific parts of the input has been parsed, I can't wait
for the end of data to be reached.

Is there a way of having the lexer return tokens to the parser as it
recognizes them as opposed to waiting?

Glenn Jones




From laurie at holoweb.net  Tue May 29 13:03:32 2007
From: laurie at holoweb.net (Laurie Harper)
Date: Tue, 29 May 2007 16:03:32 -0400
Subject: [antlr-interest] Newby - How to use Parser/Lexer in Code?
In-Reply-To: <68FA523297EE5742A0529D2623425FD48211B1@mapibe20.exchange.xchg>
References: <68FA523297EE5742A0529D2623425FD482113C@mapibe20.exchange.xchg><B36CCC332A32904F8FA3DE134A2353362525E6@wavemachine.temporal-wave.com>	<f3er22$2j5$1@sea.gmane.org>
	<68FA523297EE5742A0529D2623425FD48211B1@mapibe20.exchange.xchg>
Message-ID: <f3i0uk$n1s$2@sea.gmane.org>

Harris, Tobin wrote:
>>> custom :// user : pass @ someserver : 1000 / folder ? query = blah
>>>
>>> [snip]
>> 	If all you are doing is find the URL as above, ANTLR is very
> much the wrong 
>> thing to use.
> 
> Hi Timothy
> 
> Thanks for this, I did suspect weather ANTLR would be considered
> overkill. What would be the right tool to use? 
> 
> I considered RegEx, but expressions get unmaintainable quite quickly. I
> also considered manually splitting/parsing the input, but though there
> must be a better way?

If you were using Java I'd just say, "Use the existing java.net.URL or 
java.net.URI classes." I'm sure C# must have equivalents.

L.


From parrt at cs.usfca.edu  Tue May 29 13:36:02 2007
From: parrt at cs.usfca.edu (Terence Parr)
Date: Tue, 29 May 2007 13:36:02 -0700
Subject: [antlr-interest] Semantic predicate hoisting - How to turn off?
	(somewhat urgent)
In-Reply-To: <465C7BF2.2060405@gmail.com>
References: <465C7BF2.2060405@gmail.com>
Message-ID: <FA068584-ECEC-47F6-83CF-41E0EF52D293@cs.usfca.edu>

Hi. Predicates cannot in general reference local variables or  
parameters because they can be hoisted out of that rule.  Usually  
this is no problem.  I suspect your use of $f and so on is not  
correct as it probably references a labeled element after the  
predicate.  try stuff like input.LT(1) etc...

Ter
On May 29, 2007, at 12:16 PM, Panayiotis wrote:

> Hi!
>
> In ANTLR 3 is the new semantic predicate hoisting feature turned on  
> by default?
> I believe it is, because I'm getting javac errors like:
>
> [21:47:11] \tmp\antlrworks\pclParser.java:4225: cannot find symbol
> [21:47:11] symbol  : variable f
> [21:47:11] location: class pclParser
> [21:47:11]                         if ( (((evalPredicate 
> (we,"$we.is_l_value")&&evalPredicate(f,"$f.is_l_value"))|| 
> evalPredicate(we,"$we.is_l_value"))) ) {
>
> when in fact "$we.is_l_value" and "$f.is_l_value" never appear in  
> the same rule. Either that or am I doing something fundamentally  
> wrong :-) .
> There were literally dozens of similar errors that disappeared as  
> soon as I added the option "k=1;". Is there a similar option to  
> disable predicate hoisting and any other advanced features ANTLR  
> may have enabled by default?
>
> I need to get this working within the week, so I'll greatly  
> appreciate any help you can offer me!


From tobin at tobinharris.com  Tue May 29 13:52:03 2007
From: tobin at tobinharris.com (Harris, Tobin)
Date: Tue, 29 May 2007 22:52:03 +0200
Subject: [antlr-interest] Newby - How to use Parser/Lexer in Code?
In-Reply-To: <f3i0uk$n1s$2@sea.gmane.org>
References: <68FA523297EE5742A0529D2623425FD482113C@mapibe20.exchange.xchg><B36CCC332A32904F8FA3DE134A2353362525E6@wavemachine.temporal-wave.com>	<f3er22$2j5$1@sea.gmane.org><68FA523297EE5742A0529D2623425FD48211B1@mapibe20.exchange.xchg>
	<f3i0uk$n1s$2@sea.gmane.org>
Message-ID: <68FA523297EE5742A0529D2623425FD48212CC@mapibe20.exchange.xchg>

Hi Laurie,

Ahh, I see. Yes, .NET has the same utility class, I did research this
before chosing ANTLR. The problem I have is that grammar I'm working
with is inspired by the typical URI, but it serves a different purpose.
I also looked at the source code for the .NET URI class, but personally
thought it looked a bit messy, hence me looking at other tools for
parsing.

Tobin


From ruth.karl at gmx.de  Tue May 29 14:42:49 2007
From: ruth.karl at gmx.de (Ruth Karl)
Date: Tue, 29 May 2007 23:42:49 +0200
Subject: [antlr-interest]  Build path for ANTLRWorks, grammar issues,
 lexer members
In-Reply-To: <68FA523297EE5742A0529D2623425FD48212CC@mapibe20.exchange.xchg>
References: <68FA523297EE5742A0529D2623425FD482113C@mapibe20.exchange.xchg><B36CCC332A32904F8FA3DE134A2353362525E6@wavemachine.temporal-wave.com>	<f3er22$2j5$1@sea.gmane.org><68FA523297EE5742A0529D2623425FD48211B1@mapibe20.exchange.xchg>	<f3i0uk$n1s$2@sea.gmane.org>
	<68FA523297EE5742A0529D2623425FD48212CC@mapibe20.exchange.xchg>
Message-ID: <465C9E59.7040908@gmx.de>

Hello again,

I am still confronting several problems with ANTLRWorks - and with my 
grammar, too...
One step after the other:

- when generating code via the debug icon (this time with Java as target 
language), I get a bunch of exceptions - even though the generated code 
is ok (eclipse at least does not bother - after setting the project  
build path). The exceptions I get to see in ANTLRWorks console all seem 
to be orignated by missing antlr-libraries:

    [22:47:45]
    D:\workspace_eclipse_3.2\JSP_Parsing\antlr\JSPParser.java:64: cannot
    find symbol
    [22:47:45] symbol  : constructor DebugParser(antlr.TokenStream)
    [22:47:45] location: class org.antlr.runtime.debug.DebugParser
    [22:47:45]             super(input);
    [22:47:45]       

but I can not see where to set the corresponding paths there....


- Next problem is in my grammar. I have the following rules:

    jsp    :    oroot (content)* croot EOF
        |    content* EOF
        ;
    oroot     :     OPENTAG 'jsp:root' (rootattr)* CLOSETAG
        ;
    OPENTAG     :     '<' { tagMode = true; }
        ;

etc, but giving the interpreter an input starting with

    <jsp:root xmlns:jsp="xxx">

it will generate immediately a NoViableAltException... I would expect 
that at least '<' and 'jsp:root' be recognized - am I that wrong???

- if I use the same semantic predicate for lexer and for parser rules in 
my grammar: do I really have to state it twice (@member und 
@lexer::member)? And if so, will they ever be coordinated? Like, when I 
toggle the value of a boolean in a lexer rule - will it be toggled for 
the parser, too? Or how should I do?

Thank you lots again for your help,

Ruth

From qwertie256 at gmail.com  Tue May 29 19:10:42 2007
From: qwertie256 at gmail.com (David Piepgrass)
Date: Tue, 29 May 2007 20:10:42 -0600
Subject: [antlr-interest] How to separate lexer and parser? How to
	invoke ANTLR?
Message-ID: <ce40b1470705291910g5858165fw4047a8bba8b3130e@mail.gmail.com>

> java -classpath antlr-3.0.jar org.antlr.Tool Test.g
>
> but I got the error
>
> >  Exception in thread "main" java.lang.NoClassDefFoundError:
> org/antlr/stringtemplate/StringTemplateErrorListener
> >        at org.antlr.Tool.main(Tool.java:67)
>

Ok, I found the answer at

http://www.antlr.org/wiki/pages/viewpage.action?pageId=728

except that it doesn't say how to add the .jars to the classpath, nor
what Java version is required. IMO, there should be a link to this
page from the download page, and the link to "ANTLR tool+runtime
binary only jar" should have a disclaimer saying that the jar is not
usable by itself.

On windows the CLASSPATH is normally forgotten when you exit a command
prompt so you might find it useful to write a batch file that contains
this:

@echo off
echo Note, you must edit this file to set the path to the JARs!
set antlrpath=C:\Path\to\antlr-3.0\lib
set classpath=%antlrpath%\antlr-2.7.7.jar;%classpath%
set classpath=%antlrpath%\antlr-3.0.jar;%classpath%
set classpath=%antlrpath%\antlr-runtime-3.0.jar;%classpath%
set classpath=%antlrpath%\stringtemplate-3.0.jar;%classpath%
echo Classpath: %classpath%

IMO scripts like this should be included with ANTLR. After you run the
above, commands like

java org.antlr.Tool Test.g

should work.

-- 
- David
http://qism.blogspot.com

From parrt at cs.usfca.edu  Tue May 29 19:13:48 2007
From: parrt at cs.usfca.edu (Terence Parr)
Date: Tue, 29 May 2007 19:13:48 -0700
Subject: [antlr-interest] How to separate lexer and parser? How to
	invoke ANTLR?
In-Reply-To: <ce40b1470705291910g5858165fw4047a8bba8b3130e@mail.gmail.com>
References: <ce40b1470705291910g5858165fw4047a8bba8b3130e@mail.gmail.com>
Message-ID: <A293E0C5-C426-4D31-AC21-952C40BC4DF0@cs.usfca.edu>


On May 29, 2007, at 7:10 PM, David Piepgrass wrote:

>> java -classpath antlr-3.0.jar org.antlr.Tool Test.g
>>
>> but I got the error
>>
>> >  Exception in thread "main" java.lang.NoClassDefFoundError:
>> org/antlr/stringtemplate/StringTemplateErrorListener
>> >        at org.antlr.Tool.main(Tool.java:67)
>>
>
> Ok, I found the answer at
>
> http://www.antlr.org/wiki/pages/viewpage.action?pageId=728
>
> except that it doesn't say how to add the .jars to the classpath, nor
> what Java version is required. IMO, there should be a link to this
> page from the download page, and the link to "ANTLR tool+runtime
> binary only jar" should have a disclaimer saying that the jar is not
> usable by itself.

Hi David,

The README has all that; The getting started page

http://www.antlr.org/wiki/display/ANTLR3/FAQ+-+Getting+Started

also has a reference to the page you mention.

Thanks,
Ter


From monty at codetransform.com  Tue May 29 20:11:42 2007
From: monty at codetransform.com (Monty Zukowski)
Date: Tue, 29 May 2007 20:11:42 -0700
Subject: [antlr-interest] Getting input from an alternate source
	(sockets)
In-Reply-To: <002c01c7a22c$8f3822b0$6401a8c0@morrow>
References: <465C7BF2.2060405@gmail.com>
	<002c01c7a22c$8f3822b0$6401a8c0@morrow>
Message-ID: <598864c70705292011q745575bcued5f9dfc3b90cb8f@mail.gmail.com>

This is actually an interesting problem.  java.regex.Matcher has two
methods specifically to address whether more input would change the
last match: hitEnd() and requireEnd().  See
http://java.sun.com/j2se/1.5.0/docs/api/java/util/regex/Matcher.html#hitEnd()

I haven't totally digested the semantics of the two, but inspection of
the source would help in that effort.  Ter, I think something similar
to this may be possible to incorporate into your DFAs.  For this
situation it would be extremely useful to have something similar, and
I bet it would be an interesting enhancement to your algorithm.

Monty

On 5/29/07, Glenn Jones <gjones at coopknow.com> wrote:
> I am writing an application that will be receiving its input through a
> network socket.  I have been working with Antlr 3 and trying to get a series
> of input from the client to be parsed by Antlr.  I am able to get the data
> from the socket into the lexer's input stream, but the lexer appears to be
> wanting to read the data to the end.  Since I need to send responses back to
> the client after specific parts of the input has been parsed, I can't wait
> for the end of data to be reached.
>
> Is there a way of having the lexer return tokens to the parser as it
> recognizes them as opposed to waiting?
>
> Glenn Jones
>
>
>
>

From antlr-list at arizona-software.ch  Tue May 29 21:13:19 2007
From: antlr-list at arizona-software.ch (Jean Bovet)
Date: Tue, 29 May 2007 21:13:19 -0700
Subject: [antlr-interest] Build path for ANTLRWorks, grammar issues,
	lexer members
In-Reply-To: <465C9E59.7040908@gmx.de>
References: <68FA523297EE5742A0529D2623425FD482113C@mapibe20.exchange.xchg><B36CCC332A32904F8FA3DE134A2353362525E6@wavemachine.temporal-wave.com>	<f3er22$2j5$1@sea.gmane.org><68FA523297EE5742A0529D2623425FD48211B1@mapibe20.exchange.xchg>	<f3i0uk$n1s$2@sea.gmane.org>
	<68FA523297EE5742A0529D2623425FD48212CC@mapibe20.exchange.xchg>
	<465C9E59.7040908@gmx.de>
Message-ID: <EE116E24-DE66-4656-96CD-0E8B5F013144@arizona-software.ch>

>
> - when generating code via the debug icon (this time with Java as  
> target language), I get a bunch of exceptions - even though the  
> generated code is ok (eclipse at least does not bother - after  
> setting the project  build path). The exceptions I get to see in  
> ANTLRWorks console all seem to be orignated by missing antlr- 
> libraries:
>
>    [22:47:45]
>    D:\workspace_eclipse_3.2\JSP_Parsing\antlr\JSPParser.java:64:  
> cannot
>    find symbol
>    [22:47:45] symbol  : constructor DebugParser(antlr.TokenStream)
>    [22:47:45] location: class org.antlr.runtime.debug.DebugParser
>    [22:47:45]             super(input);
>    [22:47:45]
> but I can not see where to set the corresponding paths there....
>

That's weird because ANTLRWorks has everything it needs to compile  
that properly (it has the DebugParser class). Could you send me the  
grammar you are trying to debug and also the version of your OS?

Regards,

Jean


From jan at janhinzmann.de  Wed May 30 01:53:43 2007
From: jan at janhinzmann.de (Jan Hinzmann)
Date: Wed, 30 May 2007 10:53:43 +0200
Subject: [antlr-interest] WSDL-Grammar
Message-ID: <200705301053.43708.jan@janhinzmann.de>

Hi List, 

ist there a grammar for WSDL out there?
( I'm using antlr-2.7 )

Thanks!!

Greetings, 
Jan

From paul at paulkeir.com  Wed May 30 05:50:51 2007
From: paul at paulkeir.com (Paul Keir)
Date: Wed, 30 May 2007 13:50:51 +0100
Subject: [antlr-interest] How to separate lexer and parser? How to invoke
	ANTLR?
Message-ID: <465D732B.10401@paulkeir.com>

Hi David,

You can make the CLASSPATH more permanent by setting it as a Windows 
environment variable. Right click 'My Computer' -> Properties -> 
Advanced -> Environment variables

e.g. I have a 'System Variable' called CLASSPATH which contains

.;%ANTLR%/lib/antlr-2.7.7.jar;%ANTLR%/lib/antlr-3.0.jar;%ANTLR%/lib/antlr-runtime-3.0.jar;%ANTLR%/lib/stringtemplate-3.0.jar

and ANTLR is

C:\dev\antlr\antlr-3.0

Cheers,
Paul

-- 
512k Broadband ?14.99 per month
Unlimited Downloads - No extra Costs
?14.99 per month (inc. VAT)
Order Now www.adsl4less.com

From rob.hill at blueyonder.co.uk  Wed May 30 07:57:15 2007
From: rob.hill at blueyonder.co.uk (Rob Hill)
Date: Wed, 30 May 2007 15:57:15 +0100
Subject: [antlr-interest] Oh No!
Message-ID: <003201c7a2ca$d00a2dd0$701e8970$@hill@blueyonder.co.uk>

See, it's not just software projects that run late L

 

Dear Customer,

 

We wanted to give you an update on the status of your order
[026-0139806-3213275].

 

We are sorry to report that the following items have been delayed.

      

  Terence Parr (Author) "Complete ANTLR Reference Guide, The" 

      [Paperback]

    Estimated ship date: 28/06/07

 

We are sorry for any inconvenience this causes.

 

 

Amazon.co.uk SUCK L

 

How come it's pushed back by a month? 

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070530/98a8844d/attachment.html 

From tobin at tobinharris.com  Wed May 30 08:29:19 2007
From: tobin at tobinharris.com (Harris, Tobin)
Date: Wed, 30 May 2007 17:29:19 +0200
Subject: [antlr-interest] Oh No!
In-Reply-To: <003201c7a2ca$d00a2dd0$701e8970$@hill@blueyonder.co.uk>
References: <003201c7a2ca$d00a2dd0$701e8970$@hill@blueyonder.co.uk>
Message-ID: <68FA523297EE5742A0529D2623425FD48213D0@mapibe20.exchange.xchg>

>    Terence Parr (Author) "Complete ANTLR Reference Guide, The"

>    Estimated ship date: 28/06/07

>        How come it's pushed back by a month?

 

You could pay above the odds and get it in both PDF and Paperback form
here:

 

http://www.pragmaticprogrammer.com/title/tpantlr/

 

That way you can start reading straight away, and get the *real thing*
delivered to the UK once it's available J

 

Tobin

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070530/2c424456/attachment.html 

From rob.hill at blueyonder.co.uk  Wed May 30 08:54:17 2007
From: rob.hill at blueyonder.co.uk (Rob Hill)
Date: Wed, 30 May 2007 16:54:17 +0100
Subject: [antlr-interest] Oh No!
In-Reply-To: <68FA523297EE5742A0529D2623425FD48213D0@mapibe20.exchange.xchg>
References: <003201c7a2ca$d00a2dd0$701e8970$@hill@blueyonder.co.uk>
	<68FA523297EE5742A0529D2623425FD48213D0@mapibe20.exchange.xchg>
Message-ID: <000601c7a2d2$c7c448b0$574cda10$@hill@blueyonder.co.uk>

I pre-ordered the real book from amazon, a while back, then couldn't wait
and went & bought the PDF. So it's not like i don't have a copy i just
wanted a "real" book too.

Juggling 100's of  loose a4 pages is a bit of a pain L..

 

Cheers!

Rob

 

 

 

From: antlr-interest-bounces at antlr.org
[mailto:antlr-interest-bounces at antlr.org] On Behalf Of Harris, Tobin
Sent: 30 May 2007 16:29
To: ANTLR Interest
Subject: Re: [antlr-interest] Oh No!

 

>    Terence Parr (Author) "Complete ANTLR Reference Guide, The"

>    Estimated ship date: 28/06/07

>        How come it's pushed back by a month?

 

You could pay above the odds and get it in both PDF and Paperback form here:

 

http://www.pragmaticprogrammer.com/title/tpantlr/

 

That way you can start reading straight away, and get the *real thing*
delivered to the UK once it's available J

 

Tobin



__________ NOD32 2298 (20070530) Information __________

This message was checked by NOD32 antivirus system.
http://www.eset.com

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070530/d791af98/attachment.html 

From panayk at gmail.com  Wed May 30 09:49:55 2007
From: panayk at gmail.com (Panayiotis)
Date: Wed, 30 May 2007 19:49:55 +0300
Subject: [antlr-interest] Semantic predicate hoisting - How to turn
 off?	(somewhat urgent)
Message-ID: <465DAB33.2070601@gmail.com>

Thanks.

'$f' and '$we' are indeed labels, but they refer to elements that have 
*already* been parsed:

product_or_stronger_r_value
    :    f=factor
        (
            {$f.is_l_value}? (multiplicative_operator factor)+
        |    (multiplicative_operator factor)*
        )
    ;

And so on. The problem comes from the fact that both l-values and 
r-values (which make up the 'expression' rule) can be wrapped in 
parentheses and this makes it very difficult (for me) to make the 
grammar LL(k) (or even LL(*)) parsable in any other way.

So in this case I'd think it's safe to use them in the predicate and 
hoisting might even break the parser. Besides, this is an exercise in 
compiler construction and I don't think the professor would be very 
appreciative of ANTLR's fancy algorithm doing all the work for me!  
:-)       I am aiming for LL(1) with no more than a few predicates.

Panayiotis

Terence Parr wrote:

> Hi. Predicates cannot in general reference local variables or 
> parameters because they can be hoisted out of that rule.  Usually this 
> is no problem.  I suspect your use of $f and so on is not correct as 
> it probably references a labeled element after the predicate.  try 
> stuff like input.LT(1) etc...
>
> Ter
> On May 29, 2007, at 12:16 PM, Panayiotis wrote:
>
>> Hi!
>>
>> In ANTLR 3 is the new semantic predicate hoisting feature turned on 
>> by default?
>> I believe it is, because I'm getting javac errors like:
>>
>> [21:47:11] \tmp\antlrworks\pclParser.java:4225: cannot find symbol
>> [21:47:11] symbol  : variable f
>> [21:47:11] location: class pclParser
>> [21:47:11]                         if ( 
>> (((evalPredicate(we,"$we.is_l_value")&&evalPredicate(f,"$f.is_l_value"))||evalPredicate(we,"$we.is_l_value"))) 
>> ) {
>>
>> when in fact "$we.is_l_value" and "$f.is_l_value" never appear in the 
>> same rule. Either that or am I doing something fundamentally wrong :-) .
>> There were literally dozens of similar errors that disappeared as 
>> soon as I added the option "k=1;". Is there a similar option to 
>> disable predicate hoisting and any other advanced features ANTLR may 
>> have enabled by default?
>>
>> I need to get this working within the week, so I'll greatly 
>> appreciate any help you can offer me!

From Carleton at Coffrin.com  Wed May 30 10:55:12 2007
From: Carleton at Coffrin.com (Carleton Coffrin)
Date: Wed, 30 May 2007 13:55:12 -0400
Subject: [antlr-interest] Lexer tab size option?
Message-ID: <190cfd940705301055h88a381bg22ae897595f36c7c@mail.gmail.com>

I am using ANTLR 2.7.6 and would like my lexer to have a tab size of 1 by
default.  Currently I am using the "setTabSize" method at the point of
instantiation, but I would prefer to set it as an option in the grammar
file.  Is there any way to set the tab size before code generation?

-Carleton
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070530/d2e5ff89/attachment.html 

From carlos.melgarejo at rogers.com  Wed May 30 12:56:31 2007
From: carlos.melgarejo at rogers.com (CARLOS MELGAREJO)
Date: Wed, 30 May 2007 12:56:31 -0700 (PDT)
Subject: [antlr-interest]  Creating Lexer from String
Message-ID: <22627.85285.qm@web88009.mail.re2.yahoo.com>

I use the following code and works for me :)
 String str = "text goes here";
 CharStream input = ANTRLStringStream(str);
 ExpertLexer lex = new ExpertLexer(input);
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070530/bffbfbcb/attachment.html 

From parrt at cs.usfca.edu  Wed May 30 13:32:00 2007
From: parrt at cs.usfca.edu (Terence Parr)
Date: Wed, 30 May 2007 13:32:00 -0700
Subject: [antlr-interest] ANTLR.org box going down
Message-ID: <A8A1C7BF-6E0F-4335-9BAE-3A228B174E7F@cs.usfca.edu>

Hi, i'm going to move to a new box, hoping to fix network issues.   
Worst-case is like 5 hour downtime to copy files etc...

Ter

From takpoli at hotmail.com  Wed May 30 13:36:57 2007
From: takpoli at hotmail.com (Tak-po Li)
Date: Wed, 30 May 2007 16:36:57 -0400
Subject: [antlr-interest] web installation
Message-ID: <BAY105-F2549F9103C1C02AB65F43AB2E0@phx.gbl>


Could someone points me to the document of how to install Antlr to the web 
page (Tomcat)?  We assume the grammar has developed.

Thanks,

Tak

_________________________________________________________________
More photos, more messages, more storage?get 2GB with Windows Live Hotmail. 
http://imagine-windowslive.com/hotmail/?locale=en-us&ocid=TXT_TAGHM_migration_HM_mini_2G_0507


From gcaglar at gmail.com  Wed May 30 17:35:16 2007
From: gcaglar at gmail.com (Gokhan Caglar)
Date: Wed, 30 May 2007 17:35:16 -0700
Subject: [antlr-interest] Replacing the token type
Message-ID: <2cc5308c0705301735w72524b6el6391f5634b54288f@mail.gmail.com>

Hi, I was wondering what would be the simplest way of changing the
instantiated token class?  I guess I have to derive from CommonToken, and
and CommonTokenCreator, but how can I hook that up to the lexer?
Thanks,
Gokhan
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070530/77eb095f/attachment.html 

From parrt at cs.usfca.edu  Wed May 30 17:40:51 2007
From: parrt at cs.usfca.edu (Terence Parr)
Date: Wed, 30 May 2007 17:40:51 -0700
Subject: [antlr-interest] antlr.org back up on a fresh box :)
Message-ID: <B3D3B5C0-51CF-49FD-95FD-7547CB6E5D08@cs.usfca.edu>

Hi,

The old box was virtualized in a larger server, but the new one is a  
standalone server that I hope will fix all of our network issues.   
Please let me know if you notice a change in speed or  connectivity.

Thanks!
Ter

From belayda at gmail.com  Wed May 30 17:41:28 2007
From: belayda at gmail.com (Bernardo Elayda)
Date: Wed, 30 May 2007 17:41:28 -0700
Subject: [antlr-interest] Getting Object[] instead of String[]
Message-ID: <3e5ed32f0705301741u25e75529o294f1cbd3c4ab42b@mail.gmail.com>

Hi,

I'm using Antlr 3's new stringtemplate combined feature.

I'm trying to pass a list of tokens to a template, where I want the token
text listed:

my anltr 3 code:

program myabc=MYABC mydigits+=MYNUM+ -> array2(mytext={$mydigits}) ;


my template which is in a stringtempalte group file:

array2(mytext) ::= <<
static const u16_t fpgadata2[] = {
<mytext; separator=", ">
}
>>

The template lists all the items in the 'mydigits' list with a comma
seperated but it's not listing the token text.  I have a Java hack that gets
around this.  I would really like a generic languate neutral solution.  I've
looked in the Antlr book and on the Wiki but I couldn't find something that
really applied.

Suggestions?
thx in advance!
-Bernardo
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070530/e0594421/attachment.html 

From parrt at cs.usfca.edu  Wed May 30 17:49:33 2007
From: parrt at cs.usfca.edu (Terence Parr)
Date: Wed, 30 May 2007 17:49:33 -0700
Subject: [antlr-interest] Getting Object[] instead of String[]
In-Reply-To: <3e5ed32f0705301741u25e75529o294f1cbd3c4ab42b@mail.gmail.com>
References: <3e5ed32f0705301741u25e75529o294f1cbd3c4ab42b@mail.gmail.com>
Message-ID: <D5AF2267-A766-482B-8A92-437D2A6D7731@cs.usfca.edu>


On May 30, 2007, at 5:41 PM, Bernardo Elayda wrote:

> Hi,
>
> I'm using Antlr 3's new stringtemplate combined feature.
>
> I'm trying to pass a list of tokens to a template, where I want the  
> token text listed:
>
> my anltr 3 code:
>
> program myabc=MYABC mydigits+=MYNUM+ -> array2(mytext={$mydigits}) ;
>
>
> my template which is in a stringtempalte group file:
>
> array2(mytext) ::= <<
> static const u16_t fpgadata2[] = {
> <mytext; separator=", ">
> }
> >>
>
> The template lists all the items in the 'mydigits' list with a  
> comma seperated but it's not listing the token text.

what is it listing instead?  that should be a list of tokens.  Have  
you tried

<mytext:{t | <t.text>}; separator=", ">

Ter

> I have a Java hack that gets around this.  I would really like a  
> generic languate neutral solution.  I've looked in the Antlr book  
> and on the Wiki but I couldn't find something that really applied.
>
> Suggestions?
> thx in advance!
> -Bernardo


From jimi at temporal-wave.com  Wed May 30 20:32:23 2007
From: jimi at temporal-wave.com (Jim Idle)
Date: Wed, 30 May 2007 20:32:23 -0700
Subject: [antlr-interest] ANTLR3 - C Targert : Error handling
In-Reply-To: <1ce9448c0705290149r5ff9631dwbad987c845b9a01a@mail.gmail.com>
References: <1ce9448c0705290149r5ff9631dwbad987c845b9a01a@mail.gmail.com>
Message-ID: <B36CCC332A32904F8FA3DE134A235336252633@wavemachine.temporal-wave.com>

I wil implement a much more comprehensive error handler before too long
as the one in there is really just a place holder as we expect that each
grammar will require its own handler.

 

However, what you do is install your own error handler like this:

 

@parser::apifuncs

{

    // Install custom error message display

    //

    RECOGNIZER->displayRecognitionError = produceError;

}

 

Then your produceError function has the following signature:

 

void produceError

(pANTLR3_BASE_RECOGNIZER recognizer, pANTLR3_UINT8 *tokenNames);

 

>From whence you can crib off the source for the existing one, to do as
you wish.

 

You can do the same thing for a tree parser too.

 

However, as I said, I am going to produce an error message handler that
will do for most things, but generally "recognition error" doesn't cut
it, so I still expect you would ewant to steal the standard one and
modify it to your own ends.

 

Jim

 

From: antlr-interest-bounces at antlr.org
[mailto:antlr-interest-bounces at antlr.org] On Behalf Of Boris Boucher
Sent: Tuesday, May 29, 2007 1:50 AM
To: antlr-interest at antlr.org
Subject: [antlr-interest] ANTLR3 - C Targert : Error handling

 

Hi,

I have a working lexer/parser using the C target and all is fine is I
submit a valid text to it.

But I can't figure out how to handle error.

Right now, if I submit invalide text (at the parser level), the parser
generate an error and print out some information, then continue parsing,
re-enter the error and crash. 

Is there a mean to handle error ? Is it possible to order the parser to
continue or fail after an error ?

Boris

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070530/a7e1384d/attachment.html 

From jimi at temporal-wave.com  Wed May 30 20:37:52 2007
From: jimi at temporal-wave.com (Jim Idle)
Date: Wed, 30 May 2007 20:37:52 -0700
Subject: [antlr-interest] Newby - How to use Parser/Lexer in Code?
In-Reply-To: <68FA523297EE5742A0529D2623425FD48212CC@mapibe20.exchange.xchg>
References: <68FA523297EE5742A0529D2623425FD482113C@mapibe20.exchange.xchg><B36CCC332A32904F8FA3DE134A2353362525E6@wavemachine.temporal-wave.com>	<f3er22$2j5$1@sea.gmane.org><68FA523297EE5742A0529D2623425FD48211B1@mapibe20.exchange.xchg><f3i0uk$n1s$2@sea.gmane.org>
	<68FA523297EE5742A0529D2623425FD48212CC@mapibe20.exchange.xchg>
Message-ID: <B36CCC332A32904F8FA3DE134A235336252634@wavemachine.temporal-wave.com>

It might be a bit of overkill but only that it would generate more code
than you really need to parse a fairly simple thing. If there is nothing
already out there and you don't feel like hand crafting the thing, then
I would just go ahead and use ANTLR. It shouldn't take very long at all
to do. Do you have a formal spec for it given that it isn't a 'real'
URI?

Jim

> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of Harris, Tobin
> Sent: Tuesday, May 29, 2007 1:52 PM
> To: antlr-interest at antlr.org
> Subject: Re: [antlr-interest] Newby - How to use Parser/Lexer in Code?
> 
> Hi Laurie,
> 
> Ahh, I see. Yes, .NET has the same utility class, I did research this
> before chosing ANTLR. The problem I have is that grammar I'm working
> with is inspired by the typical URI, but it serves a different
purpose.
> I also looked at the source code for the .NET URI class, but
personally
> thought it looked a bit messy, hence me looking at other tools for
> parsing.
> 
> Tobin


From andrew at adersoftware.com  Wed May 30 21:07:10 2007
From: andrew at adersoftware.com (Andrew Deren)
Date: Wed, 30 May 2007 23:07:10 -0500
Subject: [antlr-interest] Oh No!
In-Reply-To: <000601c7a2d2$c7c448b0$574cda10$@hill@blueyonder.co.uk>
References: <003201c7a2ca$d00a2dd0$701e8970$@hill@blueyonder.co.uk>	<68FA523297EE5742A0529D2623425FD48213D0@mapibe20.exchange.xchg>
	<000601c7a2d2$c7c448b0$574cda10$@hill@blueyonder.co.uk>
Message-ID: <000901c7a339$29e47590$7dad60b0$@com>

I bought it from the below website and had the book in 3 days.

Andrew

 

 

From: antlr-interest-bounces at antlr.org
[mailto:antlr-interest-bounces at antlr.org] On Behalf Of Rob Hill
Sent: Wednesday, May 30, 2007 10:54 AM
To: 'ANTLR Interest'
Subject: Re: [antlr-interest] Oh No!

 

I pre-ordered the real book from amazon, a while back, then couldn't wait
and went & bought the PDF. So it's not like i don't have a copy i just
wanted a "real" book too.

Juggling 100's of  loose a4 pages is a bit of a pain L..

 

Cheers!

Rob

 

 

 

From: antlr-interest-bounces at antlr.org
[mailto:antlr-interest-bounces at antlr.org] On Behalf Of Harris, Tobin
Sent: 30 May 2007 16:29
To: ANTLR Interest
Subject: Re: [antlr-interest] Oh No!

 

>    Terence Parr (Author) "Complete ANTLR Reference Guide, The"

>    Estimated ship date: 28/06/07

>        How come it's pushed back by a month?

 

You could pay above the odds and get it in both PDF and Paperback form here:

 

http://www.pragmaticprogrammer.com/title/tpantlr/

 

That way you can start reading straight away, and get the *real thing*
delivered to the UK once it's available J

 

Tobin



__________ NOD32 2298 (20070530) Information __________

This message was checked by NOD32 antivirus system.
http://www.eset.com

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070530/078161d8/attachment.html 

From service at sharpplus.com  Wed May 30 22:08:17 2007
From: service at sharpplus.com (=?iso-8859-1?Q?service?=)
Date: Thu, 31 May 2007 05:08:17 +0000
Subject: [antlr-interest] Is it a bug of BaseRecongnizer?
Message-ID: <20070531050817.10550.qmail@server314.com>

Dear friends
I am just found that BaseRecongnizer's GetErrorMessage seems strange, 

	public String getErrorMessage(RecognitionException e, String[] tokenNames) {
................
		else if ( e instanceof MismatchedSetException ) {
			MismatchedSetException mse = (MismatchedSetException)e;
			msg = "mismatched input "+getTokenErrorDisplay(e.token)+
				" expecting set "+mse.expecting;
		}
		else if ( e instanceof MismatchedNotSetException ) {
			MismatchedNotSetException mse = (MismatchedNotSetException)e;
			msg = "mismatched input "+getTokenErrorDisplay(e.token)+
				" expecting set "+mse.expecting;
		}
..................
}

first, MismatchedNotSetException variable use the same name mse as MismatchedSetException variable, and Whether should MismatchedNotSetException's error message be "expecting not set" or not?

best regards
chinshou
Sqlite Developer
SharpPlus Software Corp. Yokohama, Japan

From ted.villalba at gmail.com  Wed May 30 22:49:24 2007
From: ted.villalba at gmail.com (Ted Villalba)
Date: Wed, 30 May 2007 22:49:24 -0700
Subject: [antlr-interest] ANTLRWorks 1.0.1 exception in thread "main"
Message-ID: <69fb4b090705302249oe8679fei42b21ef86a001a85@mail.gmail.com>

Hi,



Running ANTLRWorks 1.0b11.jar , I am able to step through the debugger with
my grammar. If I delete all the files produced from compiling with version,
and recompile the .g file with ANTLRWorks1.0.1, when I step through the
denbugger it halts at the first rule and outputs:



Exception in thread "main" java.lang.NullPointerException

            at org.antlr.runtime.debug.DebugTreeAdaptor.nil(
DebugTreeAdaptor.java:45)

            at QueryParserParser.start(QueryParserParser.java:84)

            at __Test__.main(__Test__.java:22)





Perhaps my grammar is bad and the new version is simply less forgiving, not
sure.

Anyone else experience this behavior?



Thank you,

Ted
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070530/5a319619/attachment.html 

From belayda at gmail.com  Thu May 31 00:16:18 2007
From: belayda at gmail.com (Bernardo Elayda)
Date: Thu, 31 May 2007 00:16:18 -0700
Subject: [antlr-interest] (no subject)
Message-ID: <3e5ed32f0705310016w799f5e06h1daf333787dfe304@mail.gmail.com>

<mytext:{t | <t.text>}; separator=", ">
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

The syntax you suggested worked!  Now, I get the text of the tokens
separated by commas.  When I was using:
*
*>* <mytext; separator=", ">
**
*
*I was getting the following output:*
*[@2.2"2='1',<5>,1:2], [@4,4:4='2',<5>,1:4],[@6.6:='3',<5>,1:6]*
*
The syntax you suggested makes sense; You can access any of the attributes
of an array of tokens.  Still, it would be nice if the default behavior
would return an array of token text if the token attribute wasn't explicitly
specified.

thanks again!
* -Bernardo

On May 30, 2007, at 5:41 PM, Bernardo Elayda wrote:

>* Hi,
*>*
*>* I'm using Antlr 3's new stringtemplate combined feature.
*>*
*>* I'm trying to pass a list of tokens to a template, where I want the
*>* token text listed:
*>*
*>* my anltr 3 code:
*>*
*>* program myabc=MYABC mydigits+=MYNUM+ -> array2(mytext={$mydigits}) ;
*>*
*>*
*>* my template which is in a stringtempalte group file:
*>*
*>* array2(mytext) ::= <<
*>* static const u16_t fpgadata2[] = {
*>* <mytext; separator=", ">
*>* }
*>* >>
*>*
*>* The template lists all the items in the 'mydigits' list with a
*>* comma seperated but it's not listing the token text.
*
what is it listing instead?  that should be a list of tokens.  Have
you tried

<mytext:{t | <t.text>}; separator=", ">

Ter

>* I have a Java hack that gets around this.  I would really like a
*>* generic languate neutral solution.  I've looked in the Antlr book
*>* and on the Wiki but I couldn't find something that really applied.
*>*
*>* Suggestions?
*>* thx in advance!
*>* -Bernardo

*
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070531/e7b3fcd2/attachment.html 

From panayk at gmail.com  Thu May 31 06:59:04 2007
From: panayk at gmail.com (Panayiotis)
Date: Thu, 31 May 2007 16:59:04 +0300
Subject: [antlr-interest] Semantic predicate hoisting - How to turn
 off?	(somewhat urgent)
In-Reply-To: <FA068584-ECEC-47F6-83CF-41E0EF52D293@cs.usfca.edu>
References: <465C7BF2.2060405@gmail.com>
	<FA068584-ECEC-47F6-83CF-41E0EF52D293@cs.usfca.edu>
Message-ID: <465ED4A8.4080900@gmail.com>

/Note: Reposted because I accidentally started a new thread. This is the 
first time I am using a mailing list. I hope it works now, sorry./

Ter, thanks. But...

'$f' and '$we' are indeed labels, but they refer to elements that have 
*already* been parsed:

product_or_stronger_r_value
   :    f=factor
       (
           {$f.is_l_value}? (multiplicative_operator factor)+
       |    (multiplicative_operator factor)*
       )
   ;

And so on. The problem comes from the fact that both l-values and 
r-values (which make up the 'expression' rule) can be wrapped in 
parentheses and this makes it very difficult (for me) to make the 
grammar LL(k) (or even LL(*)) parsable in any other way.

So in this case I'd think it's safe to use them in the predicate and 
hoisting might even break the parser. Besides, this is an exercise in 
compiler construction and I don't think the professor would be very 
appreciative of ANTLR's fancy algorithm doing all the work for me! :-)
I am aiming for LL(1) with no more than a few predicates.

Panayiotis

Terence Parr wrote:
> Hi. Predicates cannot in general reference local variables or 
> parameters because they can be hoisted out of that rule.  Usually this 
> is no problem.  I suspect your use of $f and so on is not correct as 
> it probably references a labeled element after the predicate.  try 
> stuff like input.LT(1) etc...
>
> Ter
> On May 29, 2007, at 12:16 PM, Panayiotis wrote:
>
>> Hi!
>>
>> In ANTLR 3 is the new semantic predicate hoisting feature turned on 
>> by default?
>> I believe it is, because I'm getting javac errors like:
>>
>> [21:47:11] \tmp\antlrworks\pclParser.java:4225: cannot find symbol
>> [21:47:11] symbol  : variable f
>> [21:47:11] location: class pclParser
>> [21:47:11]                         if ( 
>> (((evalPredicate(we,"$we.is_l_value")&&evalPredicate(f,"$f.is_l_value"))||evalPredicate(we,"$we.is_l_value"))) 
>> ) {
>>
>> when in fact "$we.is_l_value" and "$f.is_l_value" never appear in the 
>> same rule. Either that or am I doing something fundamentally wrong :-) .
>> There were literally dozens of similar errors that disappeared as 
>> soon as I added the option "k=1;". Is there a similar option to 
>> disable predicate hoisting and any other advanced features ANTLR may 
>> have enabled by default?
>>
>> I need to get this working within the week, so I'll greatly 
>> appreciate any help you can offer me! 

From veselov at gmail.com  Thu May 31 10:43:39 2007
From: veselov at gmail.com (Ivan Veselov)
Date: Thu, 31 May 2007 20:43:39 +0300
Subject: [antlr-interest] Recovery with consumeUntil()
Message-ID: <f6d8a9e30705311043m38ffa82bld4eb39178c42417e@mail.gmail.com>

Hi all!

I have some problems with recovery after error in my grammar. It seems
that standard recovery process doesn't do what I need and I don't know
yet how to fix it manually.

Here is part of my grammar:

=============================================
importDefs
 :  importDef (importDef)*
 ;

importDef
options {defaultErrorHandler=true;}
 :  "import" identifierStar (SEMI)?
 ;

identifierStar
 :  IDENT
  (
      options { greedy=true; }
       :   DOT IDENT
  )*
  (DOT STAR)?
 ;

classDef
 :   "class"
    .... //other class parts

compilationUnit
  : importDefs
    classDef

=============================================

I need to provide code completion for my imports. So what I am parsing
is a bit incomplete source code, something like this:

import a.b.   //incomplete package, I need to get child packages or
classes for package "a.b"
class MyClass
{}

So, parser fails on incomplete import and then I have added options
"{defaultErrorHandler=true;}" to import definition. It adds try/catch
block to source of that rule with reportError() and recover() methods
in 'catch' clause. But it seems that it skips not to next import or to
"class" keyword, which can be start of classDef, but to the end of
file :(
After matching "a.b", parser sees that "class" is not ID and tries to
match it as STAR (something like a.b.*), but certainly it fails. Then
it tries to skip until some tokens from bitset are apeeared and skip
all the tokens up to EOF.

It seems that it is incorrect behaviour in my case.

So, the question is: do you know any way to generate these BitSets
(follow sets) for recovery() method to correct recovering process
manually? Or maybe another solution of my problem?

I have seen some messages related to this topic in antlr-interest, but
I haven't found answer yet.
Could you please help me with this problem? Any help would be appreciated.
Thank you!

With best regards,
Ivan Veselov.

From parrt at cs.usfca.edu  Thu May 31 11:02:10 2007
From: parrt at cs.usfca.edu (Terence Parr)
Date: Thu, 31 May 2007 11:02:10 -0700
Subject: [antlr-interest] Is it a bug of BaseRecongnizer?
In-Reply-To: <20070531050817.10550.qmail@server314.com>
References: <20070531050817.10550.qmail@server314.com>
Message-ID: <0418C6BD-2CE9-4C01-93FA-0A219CDAE9BB@cs.usfca.edu>


On May 30, 2007, at 10:08 PM, service wrote:

> Dear friends
> I am just found that BaseRecongnizer's GetErrorMessage seems strange,
>
> 	public String getErrorMessage(RecognitionException e, String[]  
> tokenNames) {
> ................
> 		else if ( e instanceof MismatchedSetException ) {
> 			MismatchedSetException mse = (MismatchedSetException)e;
> 			msg = "mismatched input "+getTokenErrorDisplay(e.token)+
> 				" expecting set "+mse.expecting;
> 		}
> 		else if ( e instanceof MismatchedNotSetException ) {
> 			MismatchedNotSetException mse = (MismatchedNotSetException)e;
> 			msg = "mismatched input "+getTokenErrorDisplay(e.token)+
> 				" expecting set "+mse.expecting;
> 		}
> ..................
> }
>
> first, MismatchedNotSetException variable use the same name mse as  
> MismatchedSetException variable, and Whether should  
> MismatchedNotSetException's error message be "expecting not set" or  
> not?

Hi. I think that I have computed the set complement already so it  
will say the correct thing when executed.  Did you see the inverse?

Thanks!
Ter


From parrt at cs.usfca.edu  Thu May 31 11:03:26 2007
From: parrt at cs.usfca.edu (Terence Parr)
Date: Thu, 31 May 2007 11:03:26 -0700
Subject: [antlr-interest] ANTLRWorks 1.0.1 exception in thread "main"
In-Reply-To: <69fb4b090705302249oe8679fei42b21ef86a001a85@mail.gmail.com>
References: <69fb4b090705302249oe8679fei42b21ef86a001a85@mail.gmail.com>
Message-ID: <30C003A0-6EF6-4E81-8999-9E58CCE0EF13@cs.usfca.edu>

Hmm... I think we are having issues with the test rig in AW at the  
moment.
Ter
On May 30, 2007, at 10:49 PM, Ted Villalba wrote:

> Hi,
>
>
> Running ANTLRWorks 1.0b11.jar , I am able to step through the  
> debugger with my grammar. If I delete all the files produced from  
> compiling with version, and recompile the .g file with  
> ANTLRWorks1.0.1, when I step through the denbugger it halts at the  
> first rule and outputs:
>
>
> Exception in thread "main" java.lang.NullPointerException
>
>             at org.antlr.runtime.debug.DebugTreeAdaptor.nil 
> (DebugTreeAdaptor.java:45)
>
>             at QueryParserParser.start(QueryParserParser.java:84)
>
>             at __Test__.main(__Test__.java:22)
>
>
>
> Perhaps my grammar is bad and the new version is simply less  
> forgiving, not sure.
>
> Anyone else experience this behavior?
>
>
> Thank you,
>
> Ted


From parrt at cs.usfca.edu  Thu May 31 11:09:04 2007
From: parrt at cs.usfca.edu (Terence Parr)
Date: Thu, 31 May 2007 11:09:04 -0700
Subject: [antlr-interest] Replacing the token type
In-Reply-To: <2cc5308c0705301735w72524b6el6391f5634b54288f@mail.gmail.com>
References: <2cc5308c0705301735w72524b6el6391f5634b54288f@mail.gmail.com>
Message-ID: <B635304E-4256-4B63-95CF-CFB66F4E1BA6@cs.usfca.edu>

Hi Han! Nice to see you're stilling using ANTLR. :)  Try overriding  
Lexer method:

	/** The standard method called to automatically emit a token at the
	 *  outermost lexical rule.  The token object should point into the
	 *  char buffer start..stop.  If there is a text override in 'text',
	 *  use that to set the token's text.  Override this method to emit
	 *  custom Token objects.
	 */
	public Token emit() {
		Token t = new CommonToken(input, type, channel,  
tokenStartCharIndex, getCharIndex()-1);
		t.setLine(tokenStartLine);
		t.setText(text);
		t.setCharPositionInLine(tokenStartCharPositionInLine);
		emit(t);
		return t;
	}


On May 30, 2007, at 5:35 PM, Gokhan Caglar wrote:

> Hi, I was wondering what would be the simplest way of changing the  
> instantiated token class?  I guess I have to derive from  
> CommonToken, and and CommonTokenCreator, but how can I hook that up  
> to the lexer?
> Thanks,
> Gokhan


From open.zone at virgin.net  Thu May 31 13:00:27 2007
From: open.zone at virgin.net (Micheal J)
Date: Thu, 31 May 2007 21:00:27 +0100
Subject: [antlr-interest] Replacing the token type
In-Reply-To: <2cc5308c0705301735w72524b6el6391f5634b54288f@mail.gmail.com>
Message-ID: <000a01c7a3be$58a28c70$c704a8c0@hercules>

Hi Gokhan,
 
Once you have your custom token class and it's associated TokenCreator, use
the setTokenCreator(TokenCreator) method on your lexer instance. E.g.
 
    myLexer.setTokenCreator( new MyCustomToken.MyCustomTokenCreator() );
 
The 'csharp_v1' example shows how this is done (it is included with ANTLR
2.7.6+). It uses a custom token class and three lexers and sets all lexers
to create tokens of the custom type. See the method "parseFile(string f,
Stream s)" in the Main.cs file in that example.
 
Micheal

-----------------------
The best way to contact me is via the list/forum. My time is very limited. 

-----Original Message-----
From: antlr-interest-bounces at antlr.org
[mailto:antlr-interest-bounces at antlr.org] On Behalf Of Gokhan Caglar
Sent: 31 May 2007 01:35
To: antlr-interest at antlr.org
Subject: [antlr-interest] Replacing the token type


Hi, I was wondering what would be the simplest way of changing the
instantiated token class?  I guess I have to derive from CommonToken, and
and CommonTokenCreator, but how can I hook that up to the lexer?
Thanks,
Gokhan 


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070531/55b47576/attachment.html 

From psampson at mail.unomaha.edu  Thu May 31 13:15:56 2007
From: psampson at mail.unomaha.edu (Pam L Sampson)
Date: Thu, 31 May 2007 15:15:56 -0500
Subject: [antlr-interest] accessing parent node in order to replace
Message-ID: <OF7704E1E7.A55B1675-ON862572EC.006F526B-862572EC.006F526E@UNOMAHA.EDU>

An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070531/2dd9e97f/attachment.html 

From open.zone at virgin.net  Thu May 31 13:22:39 2007
From: open.zone at virgin.net (Micheal J)
Date: Thu, 31 May 2007 21:22:39 +0100
Subject: [antlr-interest] accessing parent node in order to replace
In-Reply-To: <OF7704E1E7.A55B1675-ON862572EC.006F526B-862572EC.006F526E@UNOMAHA.EDU>
Message-ID: <001101c7a3c1$730e2170$c704a8c0@hercules>

Hi,
 
You could pass some information/attributes up from production_b that
production_a then takes into account when deciding what sort of tree to
build.
 
Micheal

-----------------------
The best way to contact me is via the list/forum. My time is very limited. 

-----Original Message-----
From: antlr-interest-bounces at antlr.org
[mailto:antlr-interest-bounces at antlr.org] On Behalf Of Pam L Sampson
Sent: 31 May 2007 21:16
To: antlr-interest at antlr.org
Subject: [antlr-interest] accessing parent node in order to replace


I would like to build a tree where in some cases I want the parent node
removed and replaced with a different tree. My question is how do I access
the parent node of the tree I am currently building. For example:

production_a
    : token production_b
    //tree built here
    ;
production_b
    : token 
    //now here I would like to replace the tree built in production_a
    //with a new tree for production_b but only in some cases
    //how do I replace the previous subtree with the new one?
    ;


=

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070531/eb52cea7/attachment.html 

From trunkel at gmail.com  Thu May 31 13:32:15 2007
From: trunkel at gmail.com (troy runkel)
Date: Thu, 31 May 2007 16:32:15 -0400
Subject: [antlr-interest] Unexpected token at the end of my grammar file
Message-ID: <620da58c0705311332i6a432e39jeaacebed9cfe8368@mail.gmail.com>

Greetings,

I've just recently started working with ANTLR v3 and am in the process
of putting together a T-SQL grammar.  Whenever I run ANTLR on the
grammar file I get the following error message.

     ANTLR Parser Generator  Version 3.0 (May 17, 2007)  1989-2007
     error(100): TSQL.g:1630:1: syntax error: antlr: TSQL.g:1630:1:
unexpected token: null

The error occurs on the last line of the grammar file, which is blank.
 Any ideas what might be causing the error message?  Thanks.

Troy Runkel

From pink at odahoda.de  Thu May 31 14:42:00 2007
From: pink at odahoda.de (Benjamin Niemann)
Date: Thu, 31 May 2007 23:42:00 +0200
Subject: [antlr-interest] Unexpected token at the end of my grammar file
References: <620da58c0705311332i6a432e39jeaacebed9cfe8368@mail.gmail.com>
Message-ID: <f3nff8$am5$1@sea.gmane.org>

troy runkel wrote:

> I've just recently started working with ANTLR v3 and am in the process
> of putting together a T-SQL grammar.  Whenever I run ANTLR on the
> grammar file I get the following error message.
> 
>      ANTLR Parser Generator  Version 3.0 (May 17, 2007)  1989-2007
>      error(100): TSQL.g:1630:1: syntax error: antlr: TSQL.g:1630:1:
> unexpected token: null
> 
> The error occurs on the last line of the grammar file, which is blank.
>  Any ideas what might be causing the error message?  Thanks.

Not without seeing the complete grammar. Error handling/reporting in ANTLR3
is, well, rather suboptimal and sometimes misleading.
You could also load it into ANTLRWorks and see, if the syntax highlighting
gives you some clue, where the real syntax error hides away.

-- 
Benjamin Niemann
Email: pink at odahoda dot de
WWW: http://pink.odahoda.de/


From parrt at cs.usfca.edu  Thu May 31 14:53:53 2007
From: parrt at cs.usfca.edu (Terence Parr)
Date: Thu, 31 May 2007 14:53:53 -0700
Subject: [antlr-interest] Unexpected token at the end of my grammar file
In-Reply-To: <f3nff8$am5$1@sea.gmane.org>
References: <620da58c0705311332i6a432e39jeaacebed9cfe8368@mail.gmail.com>
	<f3nff8$am5$1@sea.gmane.org>
Message-ID: <AB465E83-59C9-4EAB-9BCF-E1C7BD8FB49A@cs.usfca.edu>


On May 31, 2007, at 2:42 PM, Benjamin Niemann wrote:

> troy runkel wrote:
>
>> I've just recently started working with ANTLR v3 and am in the  
>> process
>> of putting together a T-SQL grammar.  Whenever I run ANTLR on the
>> grammar file I get the following error message.
>>
>>      ANTLR Parser Generator  Version 3.0 (May 17, 2007)  1989-2007
>>      error(100): TSQL.g:1630:1: syntax error: antlr: TSQL.g:1630:1:
>> unexpected token: null
>>
>> The error occurs on the last line of the grammar file, which is  
>> blank.
>>  Any ideas what might be causing the error message?  Thanks.
>
> Not without seeing the complete grammar. Error handling/reporting  
> in ANTLR3
> is, well, rather suboptimal and sometimes misleading.

Really?  It's MUCH better than v2 and I'm impressed with it.  Can you  
give an example?

Ter

From panayk at gmail.com  Thu May 31 15:02:04 2007
From: panayk at gmail.com (Panayiotis)
Date: Fri, 01 Jun 2007 01:02:04 +0300
Subject: [antlr-interest] Semantic predicate hoisting - How to turn off?
 (somewhat urgent)
In-Reply-To: <C49F49AB-2648-4231-B711-5CDADB042992@cs.usfca.edu>
References: <465C7BF2.2060405@gmail.com>
	<FA068584-ECEC-47F6-83CF-41E0EF52D293@cs.usfca.edu>
	<465ED453.4080508@gmail.com>
	<C49F49AB-2648-4231-B711-5CDADB042992@cs.usfca.edu>
Message-ID: <465F45DC.9010904@gmail.com>

Ter, the following seems to do the trick:

//hack
product_or_stronger_r_value returns [boolean is_l_value]
    :    f = factor {$is_l_value = $f.is_l_value;}
        (
            {$is_l_value}? (multiplicative_operator factor)+
        |    (multiplicative_operator factor)*
        )
    ;

So the DFA doesn't have a problem with "$f" after all. It's just that 
"f" is not defined within the code that is generated for (ironically) 
"factor". But "is_l_value" *is* defined, so the above hack works.

As you can see from the generated code (below) the value of 
"$f.is_l_value" is irrelevant but of course the compiler can't ignore 
it, hence the error.

if 
((((evalPredicate(we,"$we.is_l_value")&&evalPredicate(f,"$f.is_l_value"))||evalPredicate(we,"$we.is_l_value"))) 
) {

I suspect this will be very difficult to fix in the general case, so 
could we expect an option to disable hoisting locally or globally in a 
future version? (as useful as hoisting certainly is in most cases)

I really appreciate the time you took to help me,
Panayiotis

From trunkel at gmail.com  Thu May 31 15:11:09 2007
From: trunkel at gmail.com (troy runkel)
Date: Thu, 31 May 2007 18:11:09 -0400
Subject: [antlr-interest] Unexpected token at the end of my grammar file
In-Reply-To: <620da58c0705311332i6a432e39jeaacebed9cfe8368@mail.gmail.com>
References: <620da58c0705311332i6a432e39jeaacebed9cfe8368@mail.gmail.com>
Message-ID: <620da58c0705311511n6c64b293i1c09a43f05f2a9fc@mail.gmail.com>

I think I may have solved this on my own.  The last thing in my
grammar file was a multi-line C-style comment like this.

     /**********************************
      * some comments               *
      **********************************/

I removed the comment so that an ANTLR rule was the last thing in the
file and the error message went away.

Troy Runkel


On 5/31/07, troy runkel <trunkel at gmail.com> wrote:
> Greetings,
>
> I've just recently started working with ANTLR v3 and am in the process
> of putting together a T-SQL grammar.  Whenever I run ANTLR on the
> grammar file I get the following error message.
>
>      ANTLR Parser Generator  Version 3.0 (May 17, 2007)  1989-2007
>      error(100): TSQL.g:1630:1: syntax error: antlr: TSQL.g:1630:1:
> unexpected token: null
>
> The error occurs on the last line of the grammar file, which is blank.
>  Any ideas what might be causing the error message?  Thanks.
>
> Troy Runkel
>

From parrt at cs.usfca.edu  Thu May 31 15:23:37 2007
From: parrt at cs.usfca.edu (Terence Parr)
Date: Thu, 31 May 2007 15:23:37 -0700
Subject: [antlr-interest] Unexpected token at the end of my grammar file
In-Reply-To: <620da58c0705311511n6c64b293i1c09a43f05f2a9fc@mail.gmail.com>
References: <620da58c0705311332i6a432e39jeaacebed9cfe8368@mail.gmail.com>
	<620da58c0705311511n6c64b293i1c09a43f05f2a9fc@mail.gmail.com>
Message-ID: <22AC9C0F-EFC9-4579-98C8-B79738887063@cs.usfca.edu>

Oh, my bad.  ANTLR v3 grammars are recognized by  a v2 at the  
moment.  I have not made any attempt to emit good error messages.  I  
was speaking about the generated parsers, which are much better.  I  
am in the process of rewriting v3 in v3.
Ter
On May 31, 2007, at 3:11 PM, troy runkel wrote:

> I think I may have solved this on my own.  The last thing in my
> grammar file was a multi-line C-style comment like this.
>
>     /**********************************
>      * some comments               *
>      **********************************/
>
> I removed the comment so that an ANTLR rule was the last thing in the
> file and the error message went away.
>
> Troy Runkel
>
>
> On 5/31/07, troy runkel <trunkel at gmail.com> wrote:
>> Greetings,
>>
>> I've just recently started working with ANTLR v3 and am in the  
>> process
>> of putting together a T-SQL grammar.  Whenever I run ANTLR on the
>> grammar file I get the following error message.
>>
>>      ANTLR Parser Generator  Version 3.0 (May 17, 2007)  1989-2007
>>      error(100): TSQL.g:1630:1: syntax error: antlr: TSQL.g:1630:1:
>> unexpected token: null
>>
>> The error occurs on the last line of the grammar file, which is  
>> blank.
>>  Any ideas what might be causing the error message?  Thanks.
>>
>> Troy Runkel
>>


From jimi at temporal-wave.com  Thu May 31 15:57:24 2007
From: jimi at temporal-wave.com (Jim Idle)
Date: Thu, 31 May 2007 15:57:24 -0700
Subject: [antlr-interest] accessing parent node in order to replace
In-Reply-To: <OF7704E1E7.A55B1675-ON862572EC.006F526B-862572EC.006F526E@UNOMAHA.EDU>
References: <OF7704E1E7.A55B1675-ON862572EC.006F526B-862572EC.006F526E@UNOMAHA.EDU>
Message-ID: <B36CCC332A32904F8FA3DE134A23533625263E@wavemachine.temporal-wave.com>

Make the return value of production)_b the tree. In production-a, test
this for null. If null then rewrite with the production_a  else rewrite
with the tree returned by _b.

 

 

{retTre == null}? -> ...

-> 

 

However, you should be able to find a way to do this without all that.
Perhaps you have factored things into production_b too much.

 

Have you considered dividing the things that cause a rewrite in one
rule, and those that don't in another., then rewriteing in _a accoreding
to which branch is taken:

 

p_a: token (

                                   prod_c
-> ^(prod_c)

                                | prod_d                              ->
^(token balh)

                )

                ;

 

prod_b : prod_c | prod_d ;   // Only if you need a rule for them all at
once

 

prod_c  : blah ;

prod_d : blah ;

 

Jim

 

From: antlr-interest-bounces at antlr.org
[mailto:antlr-interest-bounces at antlr.org] On Behalf Of Pam L Sampson
Sent: Thursday, May 31, 2007 1:16 PM
To: antlr-interest at antlr.org
Subject: [antlr-interest] accessing parent node in order to replace

 

I would like to build a tree where in some cases I want the parent node
removed and replaced with a different tree. My question is how do I
access the parent node of the tree I am currently building. For example:

production_a
    : token production_b
    //tree built here
    ;
production_b
    : token 
    //now here I would like to replace the tree built in production_a
    //with a new tree for production_b but only in some cases
    //how do I replace the previous subtree with the new one?
    ;



-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070531/2d1ba7c7/attachment.html 

From jimi at temporal-wave.com  Thu May 31 15:58:26 2007
From: jimi at temporal-wave.com (Jim Idle)
Date: Thu, 31 May 2007 15:58:26 -0700
Subject: [antlr-interest] Unexpected token at the end of my grammar file
In-Reply-To: <620da58c0705311332i6a432e39jeaacebed9cfe8368@mail.gmail.com>
References: <620da58c0705311332i6a432e39jeaacebed9cfe8368@mail.gmail.com>
Message-ID: <B36CCC332A32904F8FA3DE134A23533625263F@wavemachine.temporal-wave.com>

This usually means that you started something like an action { but
missed off the }

Jim

> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of troy runkel
> Sent: Thursday, May 31, 2007 1:32 PM
> To: antlr-interest at antlr.org
> Subject: [antlr-interest] Unexpected token at the end of my grammar
> file
> 
> Greetings,
> 
> I've just recently started working with ANTLR v3 and am in the process
> of putting together a T-SQL grammar.  Whenever I run ANTLR on the
> grammar file I get the following error message.
> 
>      ANTLR Parser Generator  Version 3.0 (May 17, 2007)  1989-2007
>      error(100): TSQL.g:1630:1: syntax error: antlr: TSQL.g:1630:1:
> unexpected token: null
> 
> The error occurs on the last line of the grammar file, which is blank.
>  Any ideas what might be causing the error message?  Thanks.
> 
> Troy Runkel

From pink at odahoda.de  Thu May 31 15:35:11 2007
From: pink at odahoda.de (Benjamin Niemann)
Date: Fri, 01 Jun 2007 00:35:11 +0200
Subject: [antlr-interest] Unexpected token at the end of my grammar file
References: <620da58c0705311332i6a432e39jeaacebed9cfe8368@mail.gmail.com>
	<f3nff8$am5$1@sea.gmane.org>
	<AB465E83-59C9-4EAB-9BCF-E1C7BD8FB49A@cs.usfca.edu>
Message-ID: <f3niiv$l5h$1@sea.gmane.org>

Terence Parr wrote:

> 
> On May 31, 2007, at 2:42 PM, Benjamin Niemann wrote:
> 
>> troy runkel wrote:
>>
>>> I've just recently started working with ANTLR v3 and am in the
>>> process
>>> of putting together a T-SQL grammar.  Whenever I run ANTLR on the
>>> grammar file I get the following error message.
>>>
>>>      ANTLR Parser Generator  Version 3.0 (May 17, 2007)  1989-2007
>>>      error(100): TSQL.g:1630:1: syntax error: antlr: TSQL.g:1630:1:
>>> unexpected token: null
>>>
>>> The error occurs on the last line of the grammar file, which is
>>> blank.
>>>  Any ideas what might be causing the error message?  Thanks.
>>
>> Not without seeing the complete grammar. Error handling/reporting
>> in ANTLR3
>> is, well, rather suboptimal and sometimes misleading.
> 
> Really?  It's MUCH better than v2 and I'm impressed with it.  Can you
> give an example?

I'm talking about errors while parsing the grammar - that *that* parser is
still V2... Or are you already finished converting antlr.g to V3? :)


-- 
Benjamin Niemann
Email: pink at odahoda dot de
WWW: http://pink.odahoda.de/


From gcaglar at gmail.com  Thu May 31 18:49:45 2007
From: gcaglar at gmail.com (Gokhan Caglar)
Date: Thu, 31 May 2007 18:49:45 -0700
Subject: [antlr-interest] Replacing the token type
In-Reply-To: <000a01c7a3be$58a28c70$c704a8c0@hercules>
References: <2cc5308c0705301735w72524b6el6391f5634b54288f@mail.gmail.com>
	<000a01c7a3be$58a28c70$c704a8c0@hercules>
Message-ID: <2cc5308c0705311849r2afcc532q79be8f7926e84d3a@mail.gmail.com>

Thanks for the pointer :)
Gokhan

On 5/31/07, Micheal J <open.zone at virgin.net> wrote:
>
>  Hi Gokhan,
>
> Once you have your custom token class and it's associated TokenCreator,
> use the setTokenCreator(TokenCreator) method on your lexer instance. E.g.
>
>     myLexer.setTokenCreator( new MyCustomToken.MyCustomTokenCreator() );
>
> The 'csharp_v1' example shows how this is done (it is included with ANTLR
> 2.7.6+). It uses a custom token class and three lexers and sets all lexers
> to create tokens of the custom type. See the method "parseFile(string f,
> Stream s)" in the Main.cs file in that example.
>
> Micheal
>
> -----------------------
> The best way to contact me is via the list/forum. My time is very limited.
>
>  -----Original Message-----
> *From:* antlr-interest-bounces at antlr.org [mailto:
> antlr-interest-bounces at antlr.org] *On Behalf Of *Gokhan Caglar
> *Sent:* 31 May 2007 01:35
> *To:* antlr-interest at antlr.org
> *Subject:* [antlr-interest] Replacing the token type
>
> Hi, I was wondering what would be the simplest way of changing the
> instantiated token class?  I guess I have to derive from CommonToken, and
> and CommonTokenCreator, but how can I hook that up to the lexer?
> Thanks,
> Gokhan
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20070531/54534b4f/attachment.html 

From antlr-list at arizona-software.ch  Thu May 31 22:29:32 2007
From: antlr-list at arizona-software.ch (Jean Bovet)
Date: Thu, 31 May 2007 22:29:32 -0700
Subject: [antlr-interest] ANTLRWorks 1.0.1 exception in thread "main"
In-Reply-To: <30C003A0-6EF6-4E81-8999-9E58CCE0EF13@cs.usfca.edu>
References: <69fb4b090705302249oe8679fei42b21ef86a001a85@mail.gmail.com>
	<30C003A0-6EF6-4E81-8999-9E58CCE0EF13@cs.usfca.edu>
Message-ID: <714C078B-97E9-49B4-BFB5-19765935DBDC@arizona-software.ch>

Yep, that's right. I'm working on fixing that in the upcoming version  
1.0.2.

Jean

On May 31, 2007, at 11:03 AM, Terence Parr wrote:

> Hmm... I think we are having issues with the test rig in AW at the  
> moment.
> Ter
> On May 30, 2007, at 10:49 PM, Ted Villalba wrote:
>
>> Hi,
>>
>>
>> Running ANTLRWorks 1.0b11.jar , I am able to step through the  
>> debugger with my grammar. If I delete all the files produced from  
>> compiling with version, and recompile the .g file with  
>> ANTLRWorks1.0.1, when I step through the denbugger it halts at the  
>> first rule and outputs:
>>
>>
>> Exception in thread "main" java.lang.NullPointerException
>>
>>             at org.antlr.runtime.debug.DebugTreeAdaptor.nil 
>> (DebugTreeAdaptor.java:45)
>>
>>             at QueryParserParser.start(QueryParserParser.java:84)
>>
>>             at __Test__.main(__Test__.java:22)
>>
>>
>>
>> Perhaps my grammar is bad and the new version is simply less  
>> forgiving, not sure.
>>
>> Anyone else experience this behavior?
>>
>>
>> Thank you,
>>
>> Ted
>


