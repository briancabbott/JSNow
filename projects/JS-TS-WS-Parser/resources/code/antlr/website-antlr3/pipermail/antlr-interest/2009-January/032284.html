<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [antlr-interest] Problem with rewrite rule: DebugTokenStream cannot	be cast to TokenRewriteStream
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20Problem%20with%20rewrite%20rule%3A%20DebugTokenStream%20cannot%0A%09be%20cast%20to%20TokenRewriteStream&In-Reply-To=%3CB687039EFFE5C045B80D10B1B3D5B9D4B5FC92%40nsexbe01.nstein.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="032290.html">
   <LINK REL="Next"  HREF="032287.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[antlr-interest] Problem with rewrite rule: DebugTokenStream cannot	be cast to TokenRewriteStream</H1>
    <B>Martin Brousseau</B> 
    <A HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20Problem%20with%20rewrite%20rule%3A%20DebugTokenStream%20cannot%0A%09be%20cast%20to%20TokenRewriteStream&In-Reply-To=%3CB687039EFFE5C045B80D10B1B3D5B9D4B5FC92%40nsexbe01.nstein.com%3E"
       TITLE="[antlr-interest] Problem with rewrite rule: DebugTokenStream cannot	be cast to TokenRewriteStream">Martin.Brousseau at nstein.com
       </A><BR>
    <I>Tue Jan 13 08:07:51 PST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="032290.html">[antlr-interest] How to write this lexer rule?
</A></li>
        <LI>Next message: <A HREF="032287.html">[antlr-interest] '&#8211;' versus '-'
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#32284">[ date ]</a>
              <a href="thread.html#32284">[ thread ]</a>
              <a href="subject.html#32284">[ subject ]</a>
              <a href="author.html#32284">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi!

I am testing the rewriting sample from &#8220;The De&#64257;nitive ANTLR Reference&#8221; (page 125).

With the last version of ANTLRworks used in debugging mode, I get the following stack trace as output:

 

_____________________________________________________________________

Exception in thread &quot;main&quot; java.lang.ClassCastException: org.antlr.runtime.debug.DebugTokenStream cannot be cast to org.antlr.runtime.TokenRewriteStream

      at TParser.type(TParser.java:198)

      at TParser.decl(TParser.java:110)

      at __Test__.main(__Test__.java:14)

______________________________________________________________________

 

Any idea about the cause?

Any help would be greatly appreciated.

Thanks.

 

More info:

I get exactly the same when I try to parse the grammar in a Java main with parser.prog();

 

&#8230;

// Create a stream of tokens fed by the lexer

CommonTokenStream tokens = new CommonTokenStream(lexer);

// Create a parser that feeds off the token stream

FactorParser parser = new FactorParser(tokens); // create parser

      

//To use inline rewrite rules

parser.prog();

&#8230;

 

 

The grammar used is the following.

 

grammar T;

options {output=template; rewrite=true;}

decl: type ID ';' ; // no translation here

type: 'int' -&gt; template() &quot;Integer&quot; // translate int to Integer

|<i> ID // leave this alone
</I>
;

 

ID    :     ('a'..'z'|'A'..'Z')+ ;

WS    :     (' '|'\t'|'\n'|'\r')+ {skip();} ; 

 

 

_______________________________________________

 

Martin Brousseau
Product Designer - Semantic Intelligence
T. 514.908.5406 / 1.877.nstein1 x222
F. 514.908.5407
M. 514.513.7118
W. www.nstein.com &lt;<A HREF="http://www.nstein.com/">http://www.nstein.com/</A>&gt; 
Powering Digital Publishing

This message (including any attachments) may contain confidential information intended for a specific individual and purpose, and is protected by law. If you are not the intended recipient, you should delete this message and contact the sender.
Ce message (incluant tout document joint) peut contenir de l&#8217;information confidentielle destin&#233;e &#224; un individu en particulier dans un but pr&#233;cis; il est prot&#233;g&#233; par la loi. Si vous n&#8217;&#234;tes pas le destinataire de ce message, veuillez le d&#233;truire et en aviser son destinateur.

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://www.antlr.org/pipermail/antlr-interest/attachments/20090113/0fd33a21/attachment.html">http://www.antlr.org/pipermail/antlr-interest/attachments/20090113/0fd33a21/attachment.html</A> 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: image/gif
Size: 2094 bytes
Desc: image001.gif
Url : <A HREF="http://www.antlr.org/pipermail/antlr-interest/attachments/20090113/0fd33a21/attachment.gif">http://www.antlr.org/pipermail/antlr-interest/attachments/20090113/0fd33a21/attachment.gif</A> 
</PRE>
















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="032290.html">[antlr-interest] How to write this lexer rule?
</A></li>
	<LI>Next message: <A HREF="032287.html">[antlr-interest] '&#8211;' versus '-'
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#32284">[ date ]</a>
              <a href="thread.html#32284">[ thread ]</a>
              <a href="subject.html#32284">[ subject ]</a>
              <a href="author.html#32284">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.antlr.org/mailman/listinfo/antlr-interest">More information about the antlr-interest
mailing list</a><br>
</body></html>
