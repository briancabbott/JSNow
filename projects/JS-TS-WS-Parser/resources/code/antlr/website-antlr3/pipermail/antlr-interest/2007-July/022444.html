<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [antlr-interest] Java Tree Parser: NPE: rulememo == null??
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20Java%20Tree%20Parser%3A%20NPE%3A%20rulememo%20%3D%3D%20null%3F%3F&In-Reply-To=%3C200707131623.19510.rschulz%40sonic.net%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="022437.html">
   <LINK REL="Next"  HREF="022456.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[antlr-interest] Java Tree Parser: NPE: rulememo == null??</H1>
    <B>Randall R Schulz</B> 
    <A HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20Java%20Tree%20Parser%3A%20NPE%3A%20rulememo%20%3D%3D%20null%3F%3F&In-Reply-To=%3C200707131623.19510.rschulz%40sonic.net%3E"
       TITLE="[antlr-interest] Java Tree Parser: NPE: rulememo == null??">rschulz at sonic.net
       </A><BR>
    <I>Fri Jul 13 16:23:19 PDT 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="022437.html">[antlr-interest] How to turn off &quot;create( tok=xxx &quot; print out?
</A></li>
        <LI>Next message: <A HREF="022456.html">[antlr-interest] Java Tree Parser: NPE: rulememo == null??
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22444">[ date ]</a>
              <a href="thread.html#22444">[ thread ]</a>
              <a href="subject.html#22444">[ subject ]</a>
              <a href="author.html#22444">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

After a recent round of changes to my tree grammar, most of them in
parser class methods and other related classes, not the grammar itself,
the resulting parser is now crashing with an NPE in (org.antlr.runtime)
BaseRecognizer.memoize(IntStream, int, int). This line of code is:

    if ( ruleMemo[ruleIndex]!=null ) { ... }

Exception in thread &quot;main&quot; java.lang.NullPointerException
        at org.antlr.runtime.BaseRecognizer.memoize(BaseRecognizer.java:740)


What's even more perplexing, when I run this under the (Java) debugger
in IDEA the NPE occurs in a different place. In this case, the crash
occurs in BaseRecognizer.getRuleMemoization(int, int) at line 696.
Still, it is the ruleMemo field (an array) that is null:

   if ( ruleMemo[ruleIndex]==null ) { ... }


When I build the parser with &quot;-debug&quot; this is the NPE I see:

Exception in thread &quot;main&quot; java.lang.NullPointerException
        at org.antlr.runtime.debug.DebugEventSocketProxy.transmit(DebugEventSocketProxy.java:108)
        at org.antlr.runtime.debug.DebugEventSocketProxy.exitRule(DebugEventSocketProxy.java:122)


I'm at a loss to explain this crash or to even hypothesize causes for
it, especially given its shifting nature. Can anybody suggest what I
might have mucked up?


Thanks.

Randall Schulz
</PRE>

















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="022437.html">[antlr-interest] How to turn off &quot;create( tok=xxx &quot; print out?
</A></li>
	<LI>Next message: <A HREF="022456.html">[antlr-interest] Java Tree Parser: NPE: rulememo == null??
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22444">[ date ]</a>
              <a href="thread.html#22444">[ thread ]</a>
              <a href="subject.html#22444">[ subject ]</a>
              <a href="author.html#22444">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.antlr.org/mailman/listinfo/antlr-interest">More information about the antlr-interest
mailing list</a><br>
</body></html>
