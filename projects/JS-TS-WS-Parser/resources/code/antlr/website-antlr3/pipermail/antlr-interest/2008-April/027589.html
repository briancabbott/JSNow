<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [antlr-interest] Problem with C target output on example C grammar
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20Problem%20with%20C%20target%20output%20on%20example%20C%0A%20grammar&In-Reply-To=%3C20080402202149.719AB11EC62%40www.antlr.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="027581.html">
   <LINK REL="Next"  HREF="027584.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[antlr-interest] Problem with C target output on example C grammar</H1>
    <B>Gavin Lambert</B> 
    <A HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20Problem%20with%20C%20target%20output%20on%20example%20C%0A%20grammar&In-Reply-To=%3C20080402202149.719AB11EC62%40www.antlr.org%3E"
       TITLE="[antlr-interest] Problem with C target output on example C grammar">antlr at mirality.co.nz
       </A><BR>
    <I>Wed Apr  2 13:21:37 PDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="027581.html">[antlr-interest] Problem with C target output on example C	grammar
</A></li>
        <LI>Next message: <A HREF="027584.html">[antlr-interest] Problem with C target output on example C	grammar
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27589">[ date ]</a>
              <a href="thread.html#27589">[ thread ]</a>
              <a href="subject.html#27589">[ subject ]</a>
              <a href="author.html#27589">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>At 07:24 3/04/2008, Jim Idle wrote:
 &gt;On the smart pointer thing, I did not realize (as I don't use 
smart
 &gt;pointers) that they were passed around using a reference that 
was
 &gt;not nullable, but I was looking at supporting boost for the C++
 &gt;stuff, so I guess it would have fallen out of the trying. I will 

 &gt;look into that, but I am still thinking that the answer is that 
it
 &gt;is better not to initialize the return value.

There was some discussion a while back about a similar problem 
with initialising DateTime objects in C#, since they're value 
types and can't be initialised with 'null'.

Two options discussed were either avoiding the initialisation when 
you don't recognise the type (ie. still initialise ints and 
pointers etc, but assume anything else can self-initialise), or 
adding some in-grammar syntax to let ANTLR know how to initialise 
specific types (and then throwing an error if it encounters a type 
it doesn't recognise).

Of the two, I think the first is the simplest option, and should 
be sufficient for almost all cases.  (I don't think it's a big 
hardship to require that any type used in ANTLR has a default 
constructor.)

The only drawback I see to this is disguised pointers; if someone 
has defined &quot;typedef FOO *PFOO;&quot; for example then there's no way 
ANTLR can be expected to figure out that &quot;PFOO&quot; is a simple 
pointer, so it will end up being uninitialised.  I'm not sure 
there's any way of avoiding this short of saying &quot;user beware&quot; 
:<i>)  (Or using option two instead.)
</I>
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="027581.html">[antlr-interest] Problem with C target output on example C	grammar
</A></li>
	<LI>Next message: <A HREF="027584.html">[antlr-interest] Problem with C target output on example C	grammar
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27589">[ date ]</a>
              <a href="thread.html#27589">[ thread ]</a>
              <a href="subject.html#27589">[ subject ]</a>
              <a href="author.html#27589">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.antlr.org/mailman/listinfo/antlr-interest">More information about the antlr-interest
mailing list</a><br>
</body></html>
