<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [antlr-interest] ANTLR Peak Memory Issue
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20ANTLR%20Peak%20Memory%20Issue&In-Reply-To=%3CCAHMh4-bfyHZhAbRVnQ%3D-ZLxytpc3YFtVxxZyndOCiYnkLdKUzw%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="043860.html">
   <LINK REL="Next"  HREF="043864.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[antlr-interest] ANTLR Peak Memory Issue</H1>
    <B>Gokulakannan Somasundaram</B> 
    <A HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20ANTLR%20Peak%20Memory%20Issue&In-Reply-To=%3CCAHMh4-bfyHZhAbRVnQ%3D-ZLxytpc3YFtVxxZyndOCiYnkLdKUzw%40mail.gmail.com%3E"
       TITLE="[antlr-interest] ANTLR Peak Memory Issue">gokul007 at gmail.com
       </A><BR>
    <I>Fri Jan 20 03:08:07 PST 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="043860.html">[antlr-interest] ANTLR Peak Memory Issue
</A></li>
        <LI>Next message: <A HREF="043864.html">[antlr-interest] No errors output by v4 daily build?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#43866">[ date ]</a>
              <a href="thread.html#43866">[ thread ]</a>
              <a href="subject.html#43866">[ subject ]</a>
              <a href="author.html#43866">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>&gt;<i>From the discussions above, it looks like this is a known problem. Jim
</I>Idle, who is the author of C Target, has made all the functions as function
pointers and placed it inside the struct. This seems to have been done for
code flexibility. Now this affects the memory usage of parsers, especially
in the 64 bit cases.

a) Removing $text is a must, which you have already completed.
b) Check whether the suggestion mentioned here will work out for you -
<A HREF="http://www.antlr.org/pipermail/antlr-interest/2010-March/037840.html">http://www.antlr.org/pipermail/antlr-interest/2010-March/037840.html</A>
c) It has been already communicated in the list, that 4.0 C++ parser will
not be available atleast for the next 1 year.

Gokul.

On Thu, Jan 19, 2012 at 2:27 PM, Manu Chopra &lt;<A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">mchopra at cadence.com</A>&gt; wrote:

&gt;<i> We are writing a parser using ANTLR, however find unusually high peak
</I>&gt;<i> memory. Some key points:
</I>&gt;<i> *       We use ANTLR C target. Our application is C++.
</I>&gt;<i> *       There are no references to $text etc. We directly use token start
</I>&gt;<i> and end pointers to form string ourselves, where required.
</I>&gt;<i> *       Grammar is LL(2).
</I>&gt;<i> *       We observe that the token structure itself is bulky 264 bytes or
</I>&gt;<i> something on 64 bit platform.
</I>&gt;<i> *       Further, looks like that ANTLR is tokenizing entire source
</I>&gt;<i> upfront. This with large token size leads to almost peak memory even before
</I>&gt;<i> real parsing begins.
</I>&gt;<i> *       I went thru some of the earlier posts on the forum and see idea of
</I>&gt;<i> partitioning the source file lexically and process in parts. Problem is
</I>&gt;<i> that even sections of the source, which can be lexically identified, are
</I>&gt;<i> large enough to give us memory problem.
</I>&gt;<i>
</I>&gt;<i> Can you suggest options we can explore to reduce peak the memory? Is there
</I>&gt;<i> a token stream implementation which keeps only some constant number of
</I>&gt;<i> tokens in memory as oppose to all?
</I>&gt;<i>
</I>&gt;<i> I also understand that active development work is going on with ANTLR 4.x:
</I>&gt;<i> *       Can you share some information on its likely availability of C/C++
</I>&gt;<i> target? Approximate time frame is good.
</I>&gt;<i> *       If token size going to be smaller in 4.x?
</I>&gt;<i> *       Will it still demand that all text be tokenized upfront?
</I>&gt;<i>
</I>&gt;<i> Thank you,
</I>&gt;<i> -Manu.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> List: <A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">http://www.antlr.org/mailman/listinfo/antlr-interest</A>
</I>&gt;<i> Unsubscribe:
</I>&gt;<i> <A HREF="http://www.antlr.org/mailman/options/antlr-interest/your-email-address">http://www.antlr.org/mailman/options/antlr-interest/your-email-address</A>
</I>&gt;<i>
</I></PRE>
































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="043860.html">[antlr-interest] ANTLR Peak Memory Issue
</A></li>
	<LI>Next message: <A HREF="043864.html">[antlr-interest] No errors output by v4 daily build?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#43866">[ date ]</a>
              <a href="thread.html#43866">[ thread ]</a>
              <a href="subject.html#43866">[ subject ]</a>
              <a href="author.html#43866">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.antlr.org/mailman/listinfo/antlr-interest">More information about the antlr-interest
mailing list</a><br>
</body></html>
