<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [antlr-interest] Infinite lexer exception allocation loop in	Ctarget C parser, antlr3.0
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20Infinite%20lexer%20exception%20allocation%20loop%20in%0A%09Ctarget%20C%20parser%2C%20antlr3.0&In-Reply-To=%3C051466DAA0D608439E196797955018D76E8A%40wavemachine.temporal-wave.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="021984.html">
   <LINK REL="Next"  HREF="022047.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[antlr-interest] Infinite lexer exception allocation loop in	Ctarget C parser, antlr3.0</H1>
    <B>Jim Idle</B> 
    <A HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20Infinite%20lexer%20exception%20allocation%20loop%20in%0A%09Ctarget%20C%20parser%2C%20antlr3.0&In-Reply-To=%3C051466DAA0D608439E196797955018D76E8A%40wavemachine.temporal-wave.com%3E"
       TITLE="[antlr-interest] Infinite lexer exception allocation loop in	Ctarget C parser, antlr3.0">jimi at temporal-wave.com
       </A><BR>
    <I>Mon Jul  2 19:25:06 PDT 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="021984.html">[antlr-interest] Infinite lexer exception allocation loop in C	target C parser, antlr3.0
</A></li>
        <LI>Next message: <A HREF="022047.html">[antlr-interest] Infinite lexer exception allocation loop in	Ctarget C parser, antlr3.0
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22012">[ date ]</a>
              <a href="thread.html#22012">[ thread ]</a>
              <a href="subject.html#22012">[ subject ]</a>
              <a href="author.html#22012">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I t sounds like an issue with the grammar that exposes an issue in the
runtime, though something tells me that this may be related to an
extremely recent change to deal with something related. 

Thanks for pointing this out - I will endeavor to fix this tomorrow or
at least provide an answer/work around (which might be to allow \x
sequences ;-).

Jim

&gt;<i> -----Original Message-----
</I>&gt;<i> From: <A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">antlr-interest-bounces at antlr.org</A> [mailto:antlr-interest-
</I>&gt;<i> <A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">bounces at antlr.org</A>] On Behalf Of Hardy, Stephen
</I>&gt;<i> Sent: Monday, July 02, 2007 1:31 PM
</I>&gt;<i> To: <A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">antlr-interest at antlr.org</A>
</I>&gt;<i> Subject: [antlr-interest] Infinite lexer exception allocation loop in
</I>&gt;<i> Ctarget C parser, antlr3.0
</I>&gt;<i> 
</I>&gt;<i> Hi all,
</I>&gt;<i> I'm tasked with some C-to-C translation, and have been using the ANSI
</I>C
&gt;<i> grammar with the C target as a starting point, with antlr3.0.
</I>&gt;<i> 
</I>&gt;<i> The grammar inadvertently omits the possibility of using \x (hex)
</I>&gt;<i> escapes in a literal string, and this causes an infinite memory
</I>&gt;<i> allocation loop when the parser is run against tokens such as
</I>&gt;<i> &quot;\x00\x00&quot;.  The offending sequence of code is in mSTRING_LITERAL(),
</I>&gt;<i> which calls mEscapeSequence(), which in turn allocates an exception
</I>&gt;<i> struct (CONSTRUCTEX()) when it fails to understand the \x.
</I>&gt;<i> Unfortunately, the calling code is a for(;;) loop which does not
</I>&gt;<i> advance
</I>&gt;<i> the token stream, hence the lexer will allocate forever.
</I>&gt;<i> 
</I>&gt;<i> Sorry I'm really new to this, so it may be my fault, but it looks like
</I>&gt;<i> it may be a C target problem.  Didn't see any similar problem
</I>mentioned
&gt;<i> in the most recent archive.
</I>&gt;<i> 
</I>&gt;<i> Regards,
</I>&gt;<i> SJH
</I></PRE>
























<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="021984.html">[antlr-interest] Infinite lexer exception allocation loop in C	target C parser, antlr3.0
</A></li>
	<LI>Next message: <A HREF="022047.html">[antlr-interest] Infinite lexer exception allocation loop in	Ctarget C parser, antlr3.0
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22012">[ date ]</a>
              <a href="thread.html#22012">[ thread ]</a>
              <a href="subject.html#22012">[ subject ]</a>
              <a href="author.html#22012">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.antlr.org/mailman/listinfo/antlr-interest">More information about the antlr-interest
mailing list</a><br>
</body></html>
