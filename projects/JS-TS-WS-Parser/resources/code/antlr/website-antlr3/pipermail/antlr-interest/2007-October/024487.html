<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [antlr-interest] Puzzle, and solution.
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20Puzzle%2C%20and%20solution.&In-Reply-To=%3Cfg996s%24uno%241%40ger.gmane.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="024488.html">
   <LINK REL="Next"  HREF="024489.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[antlr-interest] Puzzle, and solution.</H1>
    <B>Clifford Heath</B> 
    <A HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20Puzzle%2C%20and%20solution.&In-Reply-To=%3Cfg996s%24uno%241%40ger.gmane.org%3E"
       TITLE="[antlr-interest] Puzzle, and solution.">clifford.heath at gmail.com
       </A><BR>
    <I>Wed Oct 31 00:00:42 PDT 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="024488.html">[antlr-interest] Followup: labels and return types - multiple elements sharing label name
</A></li>
        <LI>Next message: <A HREF="024489.html">[antlr-interest] Question
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24487">[ date ]</a>
              <a href="thread.html#24487">[ thread ]</a>
              <a href="subject.html#24487">[ subject ]</a>
              <a href="author.html#24487">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Something that's puzzled me when using ANTLRWorks to debug grammars
is that sometimes when running a rule in the interpreter, the parse
tree ends in &quot;No viable alternative&quot; when fed input that should match,
just because of the existence of rules that aren't activated.

As an example, I have an expression grammar that works just fine by
itself. When I include it in a larger grammar, which uses expressions
only in certain contexts, the same expression that parsed fine now
won't parse... until I add a token that *could* follow an expression.

The expression rule then matches, and of course doesn't consume the
extra token. It seems that the expression rule only matches the
current input if, when looking ahead, the next token (or EOF) is a
valid next token. The added token may be any token that is a valid
successor to an expression in any rule of the larger grammar, even
if that rule can't be called!

When you enter an expression to test the behaviour of an &quot;expression&quot;
rule in the interpreter, you need to either add a plausible next
token to the end, or add a rule like this:

junk: expression EOF;

and then any valid expression will parse without adding a token,
because there's an implicit EOF at the end of what you entered...
even though the rule &quot;junk&quot; never gets called anywhere in the wider
grammar.

Just a trap I thought I might be able to help someone else avoid.
I'm sure it's expected behaviour, but it's a bit non-intuitive at
first.

Clifford Heath.

</PRE>




<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="024488.html">[antlr-interest] Followup: labels and return types - multiple elements sharing label name
</A></li>
	<LI>Next message: <A HREF="024489.html">[antlr-interest] Question
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24487">[ date ]</a>
              <a href="thread.html#24487">[ thread ]</a>
              <a href="subject.html#24487">[ subject ]</a>
              <a href="author.html#24487">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.antlr.org/mailman/listinfo/antlr-interest">More information about the antlr-interest
mailing list</a><br>
</body></html>
