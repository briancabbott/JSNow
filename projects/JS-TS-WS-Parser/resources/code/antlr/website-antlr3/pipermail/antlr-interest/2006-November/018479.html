<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [antlr-interest] Parser: How to refer to an token in a grammar file,	without conflict with the local AST variable generated by ANTLR?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:antlr-interest%40antlr.org?Subject=%5Bantlr-interest%5D%20Parser%3A%20How%20to%20refer%20to%20an%20token%20in%20a%20grammar%20file%2C%0A%09without%20conflict%20with%20the%20local%20AST%20variable%20generated%20by%20ANTLR%3F&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="018478.html">
   <LINK REL="Next"  HREF="018480.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[antlr-interest] Parser: How to refer to an token in a grammar file,	without conflict with the local AST variable generated by ANTLR?</H1>
    <B>luciano mantuaneli</B> 
    <A HREF="mailto:antlr-interest%40antlr.org?Subject=%5Bantlr-interest%5D%20Parser%3A%20How%20to%20refer%20to%20an%20token%20in%20a%20grammar%20file%2C%0A%09without%20conflict%20with%20the%20local%20AST%20variable%20generated%20by%20ANTLR%3F&In-Reply-To="
       TITLE="[antlr-interest] Parser: How to refer to an token in a grammar file,	without conflict with the local AST variable generated by ANTLR?">mantu_lists at yahoo.com.br
       </A><BR>
    <I>Tue Nov 21 03:50:19 PST 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="018478.html">[antlr-interest] Channel=HIDDEN In ANTLR 3.0b5, ANTLRworks 1.0b6
</A></li>
        <LI>Next message: <A HREF="018480.html">[antlr-interest] Channel=HIDDEN In ANTLR 3.0b5, ANTLRworks 1.0b6
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18479">[ date ]</a>
              <a href="thread.html#18479">[ thread ]</a>
              <a href="subject.html#18479">[ subject ]</a>
              <a href="author.html#18479">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Greetings!

Suppose a grammar rule like that:

1    classField!
2        :    // method, constructor, or variable declaration
3            mods:modifiers
4            (    td:typeDefinitionInternal[#mods]
5                {#classField = #td;}
6
7            |    (tp:typeParameters)?
8                (
9                    h:ctorHead s:constructorBody // constructor
10                    {#classField = #(#[CTOR_DEF,&quot;CTOR_DEF&quot;], mods, tp, h, s);}
11
12                    |    // A generic method/ctor has the typeParameters before the return type.
13                        // This is not allowed for variable definitions, but this production
14                        // allows it, a semantic check could be used if you wanted.
15                        t:typeSpec[false]        // method or variable declaration(s)
16                        (    IDENT{                // the name of the method
17                            //syso(methId_AST.getText());
18                            }
19
20                            // parse the formal parameter declarations.
21                            LPAREN! param:parameterDeclarationList RPAREN!
22
23                            rt:declaratorBrackets[#t]
24
25                            // get the list of exceptions that this method is
26                            // declared to throw
27                            (tc:throwsClause)?
28
29                            ( s2:compoundStatement | SEMI )
30                            {#classField = #(#[METHOD_DEF,&quot;METHOD_DEF&quot;],
31                                         mods,
32                                         tp,
33                                         #(#[TYPE,&quot;TYPE&quot;],rt),
34                                         IDENT,
35                                         param,
36                                         tc,
37                                         s2);}
38                        |    v:variableDefinitions[#mods,#t] SEMI
39                            {#classField = #v;}
40                        )
41                )
42            )
43
44        // &quot;static { ... }&quot; class initializer
45        |    static s3:compoundStatement
46            {#classField = #(#[STATIC_INIT,&quot;STATIC_INIT&quot;], s3);}
47
48        // &quot;{ ... }&quot; instance initializer
49        |    s4:compoundStatement
50            {#classField = #(#[INSTANCE_INIT,&quot;INSTANCE_INIT&quot;], s4);}
51        ;

Suppose now that i want to just print out the name of methods in java console. I tried to do something like this:

...
 15                        t:typeSpec[false]        // method or variable declaration(s)
 16                        (    methId:IDENT{                // the name of the method
 17                            System.out.println(methId_AST.getText());
 18                            }
 19
 20                            // parse the formal parameter declarations.
 21                            LPAREN! 
...

But, this approach induces to a compile error (&quot;The method add(AST) in the type ASTArray is not applicable for the arguments (int)&quot;).
I noticed that when i have the line 16 as &quot;(    IDENT{&quot; only, no compile error occur. But, when i try to bind some reference to the IDENT token (i.e.:&quot;(    methId:IDENT{&quot;), I got that compile error message...
Analyzing the Parser class generated by ANTLR, I noticed the following:

   When I do not try to bind the IDENT token to a reference, ANTLR bind the IDENT token to a temporary AST variable, and use this variable to create the node for the enclosing grammar rule &quot;classField&quot;
   When I do, ANTLR indeed bind the IDENT token to my variable &quot;methId&quot;, but this variable isn't used to create the grammar rule node. Antlr try to pass directly the IDENT constant to the creation of the node.

My questions is: How can I have a reference to the corresponding IDENT token? How can I avoid that &quot;mess&quot; when I try to reference the token using the &quot;methId:IDENT&quot; form? How can I grab the name of the methods w/o producing compile errors?
Please, help me!

My best regards!
Mantu






 		
---------------------------------
 Voc&#234; quer respostas para suas perguntas? Ou voc&#234; sabe muito e quer compartilhar seu conhecimento? Experimente o Yahoo! Respostas!
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://www.antlr.org/pipermail/antlr-interest/attachments/20061121/5e345679/attachment-0001.html">http://www.antlr.org/pipermail/antlr-interest/attachments/20061121/5e345679/attachment-0001.html</A> 
</PRE>






<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="018478.html">[antlr-interest] Channel=HIDDEN In ANTLR 3.0b5, ANTLRworks 1.0b6
</A></li>
	<LI>Next message: <A HREF="018480.html">[antlr-interest] Channel=HIDDEN In ANTLR 3.0b5, ANTLRworks 1.0b6
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18479">[ date ]</a>
              <a href="thread.html#18479">[ thread ]</a>
              <a href="subject.html#18479">[ subject ]</a>
              <a href="author.html#18479">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.antlr.org/mailman/listinfo/antlr-interest">More information about the antlr-interest
mailing list</a><br>
</body></html>
