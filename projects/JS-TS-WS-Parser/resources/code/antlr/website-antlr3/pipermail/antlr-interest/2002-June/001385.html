<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [antlr-interest] Preserving Whitespace
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:antlr-interest%40antlr.org?Subject=%5Bantlr-interest%5D%20Preserving%20Whitespace&In-Reply-To=170826586F3BD511910D0200C110AAA8032B49F4%40memail03.bco-home.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001384.html">
   <LINK REL="Next"  HREF="001404.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[antlr-interest] Preserving Whitespace</H1>
    <B>John Allen Green</B> 
    <A HREF="mailto:antlr-interest%40antlr.org?Subject=%5Bantlr-interest%5D%20Preserving%20Whitespace&In-Reply-To=170826586F3BD511910D0200C110AAA8032B49F4%40memail03.bco-home.com"
       TITLE="[antlr-interest] Preserving Whitespace">greenj at ix.netcom.com
       </A><BR>
    <I>Fri Jun 14 12:25:36 PDT 2002</I>
    <P><UL>
        <LI>Previous message: <A HREF="001384.html">[antlr-interest] Preserving Whitespace
</A></li>
        <LI>Next message: <A HREF="001404.html">[antlr-interest] Preserving Whitespace
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1385">[ date ]</a>
              <a href="thread.html#1385">[ thread ]</a>
              <a href="subject.html#1385">[ subject ]</a>
              <a href="author.html#1385">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
--On 14/06/2002 12:00 PM -0700 mzukowski wrote:
&gt;<i> I've detailed another approach before on this list which I think is
</I>&gt;<i> very general and I'd love to get somebody to implement it ;) Basically
</I>&gt;<i> you keep the original file around and every Token you create
</I>&gt;<i> represents a region in that file (start and extent).
</I>
Hmm, interesting, I've been considering doing something similar. Currently
we use the preserve whitespace stuff (with hidden tokens) but those aren't
sufficient because of code that gets discarded due to preprocessing. I
*was* going to try to preserve the stuff that got preprocessed out as well
(theoretically possible - our lexer does the preprocessing and lexing all
the same time). However, I think now I'm going to toss that idea. 

I'm thinking instead of keeping unprocessed (raw) token streams for each
file, with character positions into the original files. Those can be
compared to file and character positions which are in the nodes in our AST.
For each node in the AST which gets printed, we'll look for the related
node in the raw token list, and check for stuff which got preprocessed out.
(As well as watch for code that got substituted in via the preprocessor.)

That should allow us to regenerate original source code, but also fiddle
with the parse tree and then re-write the code, as if it were a programmer
doing code tweaks.

I wish I'd had a clearer picture of this two years ago. :-)

John
www.joanju.com


 

Your use of Yahoo! Groups is subject to <A HREF="http://docs.yahoo.com/info/terms/">http://docs.yahoo.com/info/terms/</A> 

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001384.html">[antlr-interest] Preserving Whitespace
</A></li>
	<LI>Next message: <A HREF="001404.html">[antlr-interest] Preserving Whitespace
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1385">[ date ]</a>
              <a href="thread.html#1385">[ thread ]</a>
              <a href="subject.html#1385">[ subject ]</a>
              <a href="author.html#1385">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.antlr.org/mailman/listinfo/antlr-interest">More information about the antlr-interest
mailing list</a><br>
</body></html>
