<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [antlr-interest] @init actions in &quot;C Target &quot; have problems	with MSVS compilers
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20%40init%20actions%20in%20%22C%20Target%20%22%20have%20problems%0A%09with%20MSVS%20compilers&In-Reply-To=%3CB36CCC332A32904F8FA3DE134A2353362522B5%40wavemachine.temporal-wave.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="019867.html">
   <LINK REL="Next"  HREF="019869.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[antlr-interest] @init actions in &quot;C Target &quot; have problems	with MSVS compilers</H1>
    <B>Jim Idle</B> 
    <A HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20%40init%20actions%20in%20%22C%20Target%20%22%20have%20problems%0A%09with%20MSVS%20compilers&In-Reply-To=%3CB36CCC332A32904F8FA3DE134A2353362522B5%40wavemachine.temporal-wave.com%3E"
       TITLE="[antlr-interest] @init actions in &quot;C Target &quot; have problems	with MSVS compilers">jimi at temporal-wave.com
       </A><BR>
    <I>Thu Mar 22 21:51:15 PDT 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="019867.html">[antlr-interest] @init actions in &#8220;C Target &#8221; have problems with MSVS compilers
</A></li>
        <LI>Next message: <A HREF="019869.html">[antlr-interest] @init actions in &quot;C Target &quot; have problems	with MSVS compilers
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19868">[ date ]</a>
              <a href="thread.html#19868">[ thread ]</a>
              <a href="subject.html#19868">[ subject ]</a>
              <a href="author.html#19868">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Be careful with those auto initializations though. As general rule most
compilers will let the last declaration be initialized while being
declared but many moan about anything else. To be strictly correct you
should use:

PragmaComment 
@declarations 	{int isPragma;}	
@init			{ isPragma = 0; }
:<i>
</I>
Then I will guarantee that the codegen will compile everywhere.

Jim

PS: Thanks for emailing the warnings generated by the Intel compiler -
my goal is that the runtime will compile on all non-broken compilers at
maximum warning level without issuing any warnings. It was doing this
until you ran the Intel compiler against it ;-) I will fix those couple
of warnings up when I return from Mexico, where I shall be on vacation
next week.



-----Original Message-----
From: Alexander Stasenko [mailto:<A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">astasenko at gmail.com</A>] 
Sent: Thursday, March 22, 2007 9:40 PM
To: Jim Idle; Gavin Lambert; Mike Aubury; <A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">antlr-interest at antlr.org</A>
Subject: Re: [antlr-interest] @init actions in &quot;C Target &quot; have problems
with MSVS compilers

I appreciate your help. Thanks everyone for useful suggestions (and
explanations!). Any of them can solve the issue.

In my specific situation, new &quot;@declarations&quot; rule looks appropriate
solution.
So for example I can separate comment from pragma in the following
grammar part:

	// A comment in SISAL source begins with a percent sign and ends
with a newline
	// character.
	// If the character immediately following a percent sign is a
dollar sign, the
	// comment is a compiler directive, or pragma.

	PragmaComment @declarations {int isPragma = 0;}	: '%' (
		( '$' {isPragma = 1;} | ~('$' | '\n' | '\r') ) ~('\n' |
'\r')*
	)? '\r'? '\n' {
		if (!isPragma) _channel=99; // ignores comment
	};

P.S. ANTLR community is really great :

-- 
Best regards, Alexander.
</PRE>










<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="019867.html">[antlr-interest] @init actions in &#8220;C Target &#8221; have problems with MSVS compilers
</A></li>
	<LI>Next message: <A HREF="019869.html">[antlr-interest] @init actions in &quot;C Target &quot; have problems	with MSVS compilers
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19868">[ date ]</a>
              <a href="thread.html#19868">[ thread ]</a>
              <a href="subject.html#19868">[ subject ]</a>
              <a href="author.html#19868">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.antlr.org/mailman/listinfo/antlr-interest">More information about the antlr-interest
mailing list</a><br>
</body></html>
