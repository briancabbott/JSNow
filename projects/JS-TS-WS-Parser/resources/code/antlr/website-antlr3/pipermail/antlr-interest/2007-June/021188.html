<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [antlr-interest] Bug report: handling of %
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20Bug%20report%3A%20handling%20of%20%25&In-Reply-To=%3C9655C99B-61DA-4981-B806-BDC571B28AC5%40wincent.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="021181.html">
   <LINK REL="Next"  HREF="021190.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[antlr-interest] Bug report: handling of %</H1>
    <B>Wincent Colaiuta</B> 
    <A HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20Bug%20report%3A%20handling%20of%20%25&In-Reply-To=%3C9655C99B-61DA-4981-B806-BDC571B28AC5%40wincent.com%3E"
       TITLE="[antlr-interest] Bug report: handling of %">win at wincent.com
       </A><BR>
    <I>Thu Jun  7 06:27:00 PDT 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="021181.html">[antlr-interest] Using rewrite rules with conditionals...
</A></li>
        <LI>Next message: <A HREF="021190.html">[antlr-interest] Bug report: handling of %
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21188">[ date ]</a>
              <a href="thread.html#21188">[ thread ]</a>
              <a href="subject.html#21188">[ subject ]</a>
              <a href="author.html#21188">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Trying to compile this sample grammar:

   grammar Simple;

   @lexer::members {
     // %
   }

   FOO: 'foo' ;
   thing: .* EOF;

Yields the following:

   error(146): Simple.g:2:10: invalid StringTemplate % shorthand  
syntax: '%'

Evidently &quot;%&quot; has special meaning for StringTemplate but it seems  
that there is either a bug in ANTLR for allowing a character in a  
comment to prevent compilation, or a bug in the documentation for not  
explaining how to workaround the issue (please correct me if I'm  
wrong about that). The error message itself isn't very helpful as it  
doesn't point to the actual location of the problem.

There doesn't seem to be any way to escape the % character either, as  
\% yields the same error.

Needless to say, I wanted to do something more useful than just  
include a comment; in my real grammar I was comparing against '%'. In  
the end, the workaround was to use a literal 37 (decimal value for %  
in ASCII) in my @lexer::members section, but that kind of workaround  
may not be possible for everyone.

Cheers,
Wincent

</PRE>



















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="021181.html">[antlr-interest] Using rewrite rules with conditionals...
</A></li>
	<LI>Next message: <A HREF="021190.html">[antlr-interest] Bug report: handling of %
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21188">[ date ]</a>
              <a href="thread.html#21188">[ thread ]</a>
              <a href="subject.html#21188">[ subject ]</a>
              <a href="author.html#21188">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.antlr.org/mailman/listinfo/antlr-interest">More information about the antlr-interest
mailing list</a><br>
</body></html>
