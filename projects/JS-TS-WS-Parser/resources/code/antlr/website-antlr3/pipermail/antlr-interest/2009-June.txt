From potrto at centrum.cz  Mon Jun  1 06:14:38 2009
From: potrto at centrum.cz (Tomas Potrusil)
Date: Mon, 1 Jun 2009 15:14:38 +0200
Subject: [antlr-interest] double NOT removal during tree parsing?
In-Reply-To: <af7c90190905290209u2ba49cd0oc563e512001aac93@mail.gmail.com>
References: <af7c90190905290209u2ba49cd0oc563e512001aac93@mail.gmail.com>
Message-ID: <af7c90190906010614v16b8db59q60e03a4220833b70@mail.gmail.com>

I've found that the grammar produces correct "non-debugging" parser.
But when the code is generated with the -debug flag it behaves as
described below. So there must be a bug somewhere inside the
debugger...

Regards,
Tomas

2009/5/29 Tomas Potrusil <potrto at centrum.cz>:
> Halo,
>
> I'm writing a SQL grammar. I've decided to create a basic AST and then
> to optimize it a little bit during the tree parsing. One of the
> optimizations is to remove two consequent NOT nodes in a condition
> subtree. My naive implementation is this:
>
> condition
> ? ? ? ?: ? ? ? ^(OR condition condition)
> ? ? ? ?| ? ? ? ^(AND condition condition)
> ? ? ? ?| ? ? ? (^(NOT ^(NOT .))) => ^(NOT ^(NOT condition)) -> condition
> ? ? ? ?| ? ? ? ^(NOT condition)
> ? ? ? ?| ? ? ? predicate ;
>
> predicate
> ? ? ? ?: ? ? ? ^(comparisonOperator expression expression)
>
> This works perfectly fine for simple conditions (NOT NOT pred). But
> when the double NOT subtree is a part of a more complex condition (NOT
> NOT pred1 AND pred2) the processing goes wrong. When debugging I see
> the decisioning for the pred2 predicate is somehow sick. And even more
> the incoming tokens are not those what I expect should come in (when
> looking at the LT events).
>
> To be more explaning, the condition is this: NOT NOT col1 < col2 AND
> col3 > col4.
> So the pred2 predicate states for col3 > col4. By the first parsing it
> is transformed into: ^('>' col3 col4). When this is parsed by the tree
> parser (after the double not optimization of NOT NOT col1 < col2) the
> token '>' is consumed directly in the condition rule! And consecutive
> token (LT event) is not "col3" but some completely different, let's
> say X. With this X token the parser goes to predicate rule where it
> fails, of course (NoViableAltException).
>
> Do you see anything wrong in the stated tree grammar?
>
> Regards,
> Tomas
>

From s.barnett-cormack at lancaster.ac.uk  Mon Jun  1 06:43:18 2009
From: s.barnett-cormack at lancaster.ac.uk (Sam Barnett-Cormack)
Date: Mon, 01 Jun 2009 14:43:18 +0100
Subject: [antlr-interest] More hoisting pain
In-Reply-To: <4A211FFB.5040902@lancaster.ac.uk>
References: <4A211FFB.5040902@lancaster.ac.uk>
Message-ID: <4A23DAF6.8090208@lancaster.ac.uk>

Hi all,

Resolved with scoping, but I'm sure this problem is occuring more than 
one might hope. Is this something the devs are considering and/or 
working on?

Sam

Sam Barnett-Cormack wrote:
> Hi all,
> 
> Been away from work ill for a while, and now returning to my ASN.1 project.
> 
> I'm having another hoisting issue. I have the following rule:
> 
> fixedTypeValueFieldSpec
>    : IOLCID t=typeOrClass
>      ({!($t.obj)}? UNIQUE
>      |)
>      ( {!($t.obj)}? valueOptionalSpec
>      | {$t.obj}? objectOptionalSpec
>      ) ;
> 
> The obj element of the typeOrClass return is just a boolean. The problem 
> is that the decision is being hoisted to a DFA class, which can't see t. 
> I have really no idea how to approach this. If it worked, it would be a 
> relatively clean, not too inefficient (I think) way to handle the 
> problem of two *very* similar grammar specifications that cause a lot of 
> ambiguity otherwise. However, although t has already been set when the 
> DFA is called, it obviously can't see it.
> 
> For background, this was originally two rules (well, three, one main one 
> that called two others), but problems with lookahead due to recursion 
> meant that it was ambiguous. On the face of it, this should be a 
> comfortable partial merging (relying on three other rules, of course).
> 
> Can anyone suggest a resolution? I'm running 3.1.3 inside Eclipse using 
> ANTLR-IDE.
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address


From thomas.gill at csr.com  Mon Jun  1 08:01:19 2009
From: thomas.gill at csr.com (Ned Gill)
Date: Mon, 01 Jun 2009 16:01:19 +0100
Subject: [antlr-interest] C runtime: crash in dupNode;
	UP/DOWN/etc. missing factory?
Message-ID: <op.uuupch03o521jq@tg01pc02.europe.root.pri>


Hi list,

I'm seeing a crash in dupNode in antlr3commontree.c in libantlr3c 3.1.3.  
dupNode is being called on a common tree node which has a null factory.

Edited stack trace from GDB:

dupNode (tree=0x97debe0)
     at antlr3commontree.c:402
getMissingSymbol (recognizer=0x97ec8f8, istream=0x97ea300, e=0x97ecba8,  
expectedTokenType=23, follow=0x81beca0)
     at antlr3treeparser.c:227
recoverFromMismatchedToken (recognizer=0x97ec8f8, ttype=23,  
follow=0x81beca0)
     at antlr3baserecognizer.c:1530
match (recognizer=0x97ec8f8, ttype=23, follow=0x81beca0)
     at antlr3baserecognizer.c:478
...


I believe the node it's trying to duplicate is one of  
stream->UP/DOWN/EOF_NODE/INVALID_NODE initialised in  
antlr3CommonTreeNodeStreamNew (in antlr3commontreenodestream.c). It looks  
like those nodes never have their factory set. Is is safe to create a new  
factory there just for those nodes? Is there a better fix I should  
consider?


Thanks,
Ned.


From thomas.gill at csr.com  Mon Jun  1 08:26:41 2009
From: thomas.gill at csr.com (Ned Gill)
Date: Mon, 01 Jun 2009 16:26:41 +0100
Subject: [antlr-interest] C runtime: crash in dupNode;
	UP/DOWN/etc. missing factory?
References: <op.uuupch03o521jq@tg01pc02.europe.root.pri>
Message-ID: <op.uuuqirido521jq@tg01pc02.europe.root.pri>

On Mon, 01 Jun 2009 16:01:19 +0100, Ned Gill  
<thomas.gill at csr.com> wrote:

> I believe the node it's trying to duplicate is one of
> stream->UP/DOWN/EOF_NODE/INVALID_NODE initialised in
> antlr3CommonTreeNodeStreamNew (in antlr3commontreenodestream.c). It looks
> like those nodes never have their factory set. Is is safe to create a new
> factory there just for those nodes? Is there a better fix I should
> consider?

I've fixed it by using the arboretum from stream->adaptor. Diff attached.  
I've no idea whether this is generally safe, or a good idea :) Comments  
welcome.


Ned.
-------------- next part --------------
A non-text attachment was scrubbed...
Name: antlr3commontreenodestream.c.diff
Type: application/octet-stream
Size: 1574 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20090601/d711e3bd/attachment.obj 

From jimi at temporal-wave.com  Mon Jun  1 09:11:24 2009
From: jimi at temporal-wave.com (Jim Idle)
Date: Mon, 01 Jun 2009 09:11:24 -0700
Subject: [antlr-interest] C runtime: crash in dupNode;
 UP/DOWN/etc. missing factory?
In-Reply-To: <op.uuupch03o521jq@tg01pc02.europe.root.pri>
References: <op.uuupch03o521jq@tg01pc02.europe.root.pri>
Message-ID: <4A23FDAC.8090607@temporal-wave.com>

An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090601/8f4e9eb8/attachment.html 

From jimi at temporal-wave.com  Mon Jun  1 09:13:03 2009
From: jimi at temporal-wave.com (Jim Idle)
Date: Mon, 01 Jun 2009 09:13:03 -0700
Subject: [antlr-interest] C runtime: crash in dupNode;
 UP/DOWN/etc. missing factory?
In-Reply-To: <op.uuuqirido521jq@tg01pc02.europe.root.pri>
References: <op.uuupch03o521jq@tg01pc02.europe.root.pri>
	<op.uuuqirido521jq@tg01pc02.europe.root.pri>
Message-ID: <4A23FE0F.6080705@temporal-wave.com>

Ned Gill wrote:
> On Mon, 01 Jun 2009 16:01:19 +0100, Ned Gill <thomas.gill at csr.com> wrote:
>
>> I believe the node it's trying to duplicate is one of
>> stream->UP/DOWN/EOF_NODE/INVALID_NODE initialised in
>> antlr3CommonTreeNodeStreamNew (in antlr3commontreenodestream.c). It 
>> looks
>> like those nodes never have their factory set. Is is safe to create a 
>> new
>> factory there just for those nodes? Is there a better fix I should
>> consider?
>
> I've fixed it by using the arboretum from stream->adaptor. Diff 
> attached. I've no idea whether this is generally safe, or a good idea 
> :) Comments welcome.
>
See previous reply. I will fix the runtime in the next release so that 
it does not fall over when trying to dup UP/DOWN/etc. Installing the 
tree factory from the adaptor may work, but I will have to trace it all out.

Jim

From flo.putz at gmail.com  Mon Jun  1 11:46:38 2009
From: flo.putz at gmail.com (Florian Putz)
Date: Mon, 01 Jun 2009 20:46:38 +0200
Subject: [antlr-interest] AST if-then-else
Message-ID: <4A24220E.3090004@sbox.tugraz.at>

Hello,

I have a parser grammar that creates an AST. My rule for if-then-else 
looks like:

e     :  (IF cond=p THEN ifStat=e ELSE elseStat=e ENDIF ) -> ^(IF $cond 
$ifStat $elseStat)

This creates a correct AST node containing the IF and its children. In 
my tree grammar I match the node now with this rule:

e : ^(IF cond=p ifstat=e elstat=e)

The matching also works fine. My problem is now that I did not find a 
single working example on the web and neither in the book of how to 
evaluate ifstat and elstat. PS: I use the latest ANTLR Release (3.1.3). 
There is an example at 
http://www.antlr.org/wiki/display/CS652/Tree-based+interpreters, but it 
also does not work. I just want to know how the java code would look 
like to execute either the then or the else part of the subtree.

Any help greatly appricited.

Thx in advance,
flo

From frank.du at riskmetrics.com  Mon Jun  1 12:59:34 2009
From: frank.du at riskmetrics.com (Frank Du)
Date: Mon, 1 Jun 2009 15:59:34 -0400
Subject: [antlr-interest] AST if-then-else
In-Reply-To: <4A24220E.3090004@sbox.tugraz.at>
References: <4A24220E.3090004@sbox.tugraz.at>
Message-ID: <A737869DDF35D44A89A7210DDA6F622B01A8CAAC0C@mail-ny02.rmg-ny.com>

Hi Florian,

There are 2 things to resolve your problem:

1. Please use antlr-v3.1.2 instead. I verified a bug in 3.1.3, which caused errors in the tree interpreter example.

2. To implement if-else-statement tree walker, we can use wildcard and tree node stream index jumping. You may want to look at the example implementation by Scott Fortmann-Roe:
http://www.antlr.org/share/1178224532340/cminus.zip

Please let me know if I can get you more information.

Thanks,
Frank Qixing Du
Platform Development Group
RiskMetrics Group, New York

-----Original Message-----
From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-bounces at antlr.org] On Behalf Of Florian Putz
Sent: Monday, June 01, 2009 2:47 PM
To: antlr-interest at antlr.org
Subject: [antlr-interest] AST if-then-else

Hello,

I have a parser grammar that creates an AST. My rule for if-then-else 
looks like:

e     :  (IF cond=p THEN ifStat=e ELSE elseStat=e ENDIF ) -> ^(IF $cond 
$ifStat $elseStat)

This creates a correct AST node containing the IF and its children. In 
my tree grammar I match the node now with this rule:

e : ^(IF cond=p ifstat=e elstat=e)

The matching also works fine. My problem is now that I did not find a 
single working example on the web and neither in the book of how to 
evaluate ifstat and elstat. PS: I use the latest ANTLR Release (3.1.3). 
There is an example at 
http://www.antlr.org/wiki/display/CS652/Tree-based+interpreters, but it 
also does not work. I just want to know how the java code would look 
like to execute either the then or the else part of the subtree.

Any help greatly appricited.

Thx in advance,
flo

List: http://www.antlr.org/mailman/listinfo/antlr-interest
Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address

From matthew at stickledown.com  Mon Jun  1 13:27:26 2009
From: matthew at stickledown.com (Matthew Rawlings)
Date: Mon, 1 Jun 2009 21:27:26 +0100
Subject: [antlr-interest] "Cannot launch the debugger"
Message-ID: <F7F2DCD7FCE24318B3A54E732822352C@ORAC>

I have been getting on fine learning ANTLR. I have written my grammars and
executed the examples downloaded from "The Definitive ANTLR Reference". All
grammars work fine from the command line, and most work fine from
ANTLRWorks. The only problem is that whenever I separate the tree grammar
and parser grammar I get the modal error window in ANTLRWorks titled
"Connection Errror", and stating "Cannot launch the debugger. Time-out
waiting to connect to the remote parser."

 

Steps to reproduce:

1.	Download code\tour\trees example from
http://www.pragprog.com/titles/tpantlr/source_code 
2.	Double click to start ANTLRWorks jar on the desktop
3.	Open Eval.g in ANTLRWorks
4.	Debug Eval.g in ANTLRWorks
5.	Enter text value of "3+4" and press "OK" button.
6.	Observe "Operation in Progress" window, and then the modal error
window appears.

 

I am running ANTLRWorks 1.2.3. The JDK is 1.6.0_13 according to Help->About,
the PATH, and JAVA_HOME.

 

I have read all the newsgroup posts on this, which seems a common error. I
have tried rebooting, checking the port is free, etc., etc. There is no
Windows firewall.

 

The example works fine from the command line, just not from ANTLRWorks. 

 

Please, how do I get ANTLRWorks working for separate tree grammars and
parser grammars? Is there something I need to do to initiate Expr.g to debug
Eval.g?

 

Regards - Matthew

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090601/94605bca/attachment.html 

From parrt at cs.usfca.edu  Mon Jun  1 14:25:19 2009
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon, 1 Jun 2009 14:25:19 -0700
Subject: [antlr-interest] "Cannot launch the debugger"
In-Reply-To: <F7F2DCD7FCE24318B3A54E732822352C@ORAC>
References: <F7F2DCD7FCE24318B3A54E732822352C@ORAC>
Message-ID: <5A6B453D-8069-4432-AF45-6C91F59BBCA0@cs.usfca.edu>

I'd make sure that your preferences have the right port number. should  
say 49100 for default local port.
Ter
On Jun 1, 2009, at 1:27 PM, Matthew Rawlings wrote:

> I have been getting on fine learning ANTLR. I have written my  
> grammars and executed the examples downloaded from ?The Definitive  
> ANTLR Reference?. All grammars work fine from the command line, and  
> most work fine from ANTLRWorks. The only problem is that whenever I  
> separate the tree grammar and parser grammar I get the modal error  
> window in ANTLRWorks titled ?Connection Errror?, and stating ?Cannot  
> launch the debugger. Time-out waiting to connect to the remote  
> parser.?
>
> Steps to reproduce:
> 	? Download code\tour\trees example from http://www.pragprog.com/titles/tpantlr/source_code
> 	? Double click to start ANTLRWorks jar on the desktop
> 	? Open Eval.g in ANTLRWorks
> 	? Debug Eval.g in ANTLRWorks
> 	? Enter text value of ?3+4? and press ?OK? button.
> 	? Observe ?Operation in Progress? window, and then the modal error  
> window appears.
>
> I am running ANTLRWorks 1.2.3. The JDK is 1.6.0_13 according to Help- 
> >About, the PATH, and JAVA_HOME.
>
> I have read all the newsgroup posts on this, which seems a common  
> error. I have tried rebooting, checking the port is free, etc., etc.  
> There is no Windows firewall.
>
> The example works fine from the command line, just not from  
> ANTLRWorks.
>
> Please, how do I get ANTLRWorks working for separate tree grammars  
> and parser grammars? Is there something I need to do to initiate  
> Expr.g to debug Eval.g?
>
> Regards - Matthew
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address


From matthew at stickledown.com  Mon Jun  1 14:47:14 2009
From: matthew at stickledown.com (Matthew Rawlings)
Date: Mon, 1 Jun 2009 22:47:14 +0100
Subject: [antlr-interest] "Cannot launch the debugger"
In-Reply-To: <5A6B453D-8069-4432-AF45-6C91F59BBCA0@cs.usfca.edu>
References: <F7F2DCD7FCE24318B3A54E732822352C@ORAC>
	<5A6B453D-8069-4432-AF45-6C91F59BBCA0@cs.usfca.edu>
Message-ID: <D13922A41EBE4E5A83B9EA4BFA97D0B3@ORAC>

It definitely is 49100 in File->Preferences->Debugger

> -----Original Message-----
> From: Terence Parr [mailto:parrt at cs.usfca.edu]
...
> 
> I'd make sure that your preferences have the right port number. should
> say 49100 for default local port.
> Ter
> On Jun 1, 2009, at 1:27 PM, Matthew Rawlings wrote:
...


From parrt at cs.usfca.edu  Mon Jun  1 16:06:57 2009
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon, 1 Jun 2009 16:06:57 -0700
Subject: [antlr-interest] "Cannot launch the debugger"
In-Reply-To: <D13922A41EBE4E5A83B9EA4BFA97D0B3@ORAC>
References: <F7F2DCD7FCE24318B3A54E732822352C@ORAC>
	<5A6B453D-8069-4432-AF45-6C91F59BBCA0@cs.usfca.edu>
	<D13922A41EBE4E5A83B9EA4BFA97D0B3@ORAC>
Message-ID: <E6E59B22-3053-4D65-8988-0F8C62237E3D@cs.usfca.edu>

anything running already on that port?
Ter
On Jun 1, 2009, at 2:47 PM, Matthew Rawlings wrote:

> It definitely is 49100 in File->Preferences->Debugger
>
>> -----Original Message-----
>> From: Terence Parr [mailto:parrt at cs.usfca.edu]
> ...
>>
>> I'd make sure that your preferences have the right port number.  
>> should
>> say 49100 for default local port.
>> Ter
>> On Jun 1, 2009, at 1:27 PM, Matthew Rawlings wrote:
> ...
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address


From matthew at stickledown.com  Mon Jun  1 16:51:07 2009
From: matthew at stickledown.com (Matthew Rawlings)
Date: Tue, 2 Jun 2009 00:51:07 +0100
Subject: [antlr-interest] "Cannot launch the debugger"
In-Reply-To: <E6E59B22-3053-4D65-8988-0F8C62237E3D@cs.usfca.edu>
References: <F7F2DCD7FCE24318B3A54E732822352C@ORAC>
	<5A6B453D-8069-4432-AF45-6C91F59BBCA0@cs.usfca.edu>
	<D13922A41EBE4E5A83B9EA4BFA97D0B3@ORAC>
	<E6E59B22-3053-4D65-8988-0F8C62237E3D@cs.usfca.edu>
Message-ID: <162EF824F26949B08CFB75F9D2F41B6E@ORAC>

Netstat shows nothing on port 49100

> -----Original Message-----
> From: Terence Parr [mailto:parrt at cs.usfca.edu]
> Sent: 02 June 2009 00:07
> To: Matthew Rawlings
> Cc: antlr-interest at antlr.org
> Subject: Re: [antlr-interest] "Cannot launch the debugger"
> 
> anything running already on that port?
> Ter
> On Jun 1, 2009, at 2:47 PM, Matthew Rawlings wrote:
> 



From parrt at cs.usfca.edu  Mon Jun  1 17:01:52 2009
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon, 1 Jun 2009 17:01:52 -0700
Subject: [antlr-interest] "Cannot launch the debugger"
In-Reply-To: <162EF824F26949B08CFB75F9D2F41B6E@ORAC>
References: <F7F2DCD7FCE24318B3A54E732822352C@ORAC>
	<5A6B453D-8069-4432-AF45-6C91F59BBCA0@cs.usfca.edu>
	<D13922A41EBE4E5A83B9EA4BFA97D0B3@ORAC>
	<E6E59B22-3053-4D65-8988-0F8C62237E3D@cs.usfca.edu>
	<162EF824F26949B08CFB75F9D2F41B6E@ORAC>
Message-ID: <50CBFB0B-B9C9-4731-BE58-23FF9F94838C@cs.usfca.edu>

3.1.2 or 3.1.1 had a different port I think. Make sure you run  
ANTLRWorks with the ANTLR that comes in its jar or make sure use the  
latest of those tools. somewhere there is a mismatch :)
Ter
On Jun 1, 2009, at 4:51 PM, Matthew Rawlings wrote:

> Netstat shows nothing on port 49100
>
>> -----Original Message-----
>> From: Terence Parr [mailto:parrt at cs.usfca.edu]
>> Sent: 02 June 2009 00:07
>> To: Matthew Rawlings
>> Cc: antlr-interest at antlr.org
>> Subject: Re: [antlr-interest] "Cannot launch the debugger"
>>
>> anything running already on that port?
>> Ter
>> On Jun 1, 2009, at 2:47 PM, Matthew Rawlings wrote:
>>
>
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address


From matthew at stickledown.com  Mon Jun  1 18:26:37 2009
From: matthew at stickledown.com (Matthew Rawlings)
Date: Tue, 2 Jun 2009 02:26:37 +0100
Subject: [antlr-interest] "Cannot launch the debugger"
In-Reply-To: <50CBFB0B-B9C9-4731-BE58-23FF9F94838C@cs.usfca.edu>
References: <F7F2DCD7FCE24318B3A54E732822352C@ORAC>
	<5A6B453D-8069-4432-AF45-6C91F59BBCA0@cs.usfca.edu>
	<D13922A41EBE4E5A83B9EA4BFA97D0B3@ORAC>
	<E6E59B22-3053-4D65-8988-0F8C62237E3D@cs.usfca.edu>
	<162EF824F26949B08CFB75F9D2F41B6E@ORAC>
	<50CBFB0B-B9C9-4731-BE58-23FF9F94838C@cs.usfca.edu>
Message-ID: <EEB5135F8F614B3AB61C9C731935BCF5@ORAC>

Thanks to the clues, I got it working in the end. 

The changes made were:
1. Strip out every PATH and CLASSPATH entries that may clash, and then
reboot. It took a fair few reboots.
2. Switch back to port 49153.
3. Uninstall the old JDKs to prevent them being picked up.


> -----Original Message-----
> From: Terence Parr [mailto:parrt at cs.usfca.edu]
> Sent: 02 June 2009 01:02
> To: Matthew Rawlings
> Cc: antlr-interest at antlr.org
> Subject: Re: [antlr-interest] "Cannot launch the debugger"
> 
> 3.1.2 or 3.1.1 had a different port I think. Make sure you run
> ANTLRWorks with the ANTLR that comes in its jar or make sure use the
> latest of those tools. somewhere there is a mismatch :)
> Ter



From timotheus at tstotts.net  Tue Jun  2 01:43:39 2009
From: timotheus at tstotts.net (T Stotts)
Date: Tue, 02 Jun 2009 04:43:39 -0400
Subject: [antlr-interest] antlr3-maven-plugin not generating sources
Message-ID: <25371.1243932219@tstotts.net>


I have created a Java project managed by Maven 2 that includes Antlr 3
grammar files. Following the instructions at:
    http://antlr.org/antlr3-maven-plugin/index.html
resulted in unexpected behavior.

(1) Antlr is never invoked during the generate-sources or compile
phases. The grammars are not processed.
   # mvn compile
or 
   # mvn package
do not result in the generation of Antlr source, nor the compilation
there of.


(2) Manually invoking the plugin with:
   # mvn mvn org.antlr:antlr3-maven-plugin:3.1.3-1:antlr
does cause the grammar files to be processed, and the generated sources
to be placed under:
   ./target/generated-sources/antlr3/
However, there is no phase/rule to then compile these generated
sources.

My pom.xml contains:

  <build>
    <plugins>
      ...
    
      <plugin>
        <groupId>org.antlr</groupId>
        <artifactId>antlr3-maven-plugin</artifactId>
        <version>3.1.3-1</version>        
        <executions>
          <execution>
            <configuration>
              <goals>
                <goal>antlr</goal>
              </goals>
              <verbose>true</verbose>
            </configuration>
          </execution>
        </executions>
      </plugin>

      ...
    </plugins>
  </build>

-- 
aka:   timotheus
web:   http://tstotts.net/

From Raghavendra.Anjana at in.bosch.com  Tue Jun  2 02:26:34 2009
From: Raghavendra.Anjana at in.bosch.com (Raghavendra Anjana (RBEI/EMT2))
Date: Tue, 2 Jun 2009 17:26:34 +0800
Subject: [antlr-interest] Regarding lexer rules return values
Message-ID: <08CE54E7AEB8A94A81B2F62956345536341E1C14@SGPMBX05.APAC.bosch.com>

Hello,

I have a grammar with a parser rule as shown below

parserrule: (LEXERRULE);

LEXERRULE: (LEXERRULE1)(LEXERRULE2)(LEXERRULE3);

Whenever my parser rule is recognized I want to return the text identified for LEXERRULE1,2,3 separately.  But I believe that we cannot return values from a lexer rule.

Is there a way so that I can get the LEXERRULE1,2,3 from LEXERRULE.

i.e.   Something like

Parserrule return [x,y,z]: (LEXERRULE) {$x= LEXERRULE.LEXERRULE1;$y =LEXERRULE.LEXERRULE2;$z=LEXERRULE.LEXERRULE3 };

LEXERRULE: (LEXERRULE1)(LEXERRULE2)(LEXERRULE3);
LEXERRULE1:'ab';
LEXERRULE2:'xy';
LEXERRULE3:'12';


The input for this parser is   abxy12
The scenario is that whenver this text is recognized or matched then I want ab, xy and 12 to be return back from the parser rule  each separately.

Thanks a lot in advance.

Thanks and Regards
Raghavendra

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090602/107c7db6/attachment.html 

From thomas.gill at csr.com  Tue Jun  2 02:30:23 2009
From: thomas.gill at csr.com (Ned Gill)
Date: Tue, 02 Jun 2009 10:30:23 +0100
Subject: [antlr-interest] C runtime: crash in dupNode;
	UP/DOWN/etc. missing factory?
References: <op.uuupch03o521jq@tg01pc02.europe.root.pri>
	<4A23FDAC.8090607@temporal-wave.com>
Message-ID: <op.uuv4oxrfo521jq@tg01pc02.europe.root.pri>

On Mon, 01 Jun 2009 17:11:24 +0100, Jim Idle  
<jimi at temporal-wave.com> wrote:

> Ah, hang on. This is in the tree parser's error message routines. That
> means your tree parser is incorrect, or at least the input it is
> receiving has a mismatch.

This is in the recovery code rather than the error reporting, I think. In  
particular I am overriding displayRecognitionError. Should I think about  
overriding the recovery code too?

I think I'm abusing the token parser/tree parser split a little. My parser  
is part of an assembler for a rather intricate DSP instruction set.  
Naturally I've got to keep compatibility with the old assembler which had  
a buggy ad-hoc hand written parser. I started by using just a token  
parser, but I found that the amount of left-factoring required was  
completely prohibitive, even using syntactic predicates. I wanted to avoid  
global backtracking because I didn't have any confidence that I would be  
able to avoid ambiguity without the help of the parser.

My solution was to write a token parser matching a broad super-set of the  
language, generating trees. That grammar has a lot of left factoring, but  
because it's less strict it's much more managable. I could then arrange  
that the trees are parsable without significant amounts of left-factoring.

Which is all a long way of saying: I expect my tree parser to sometimes  
see invalid input, and I need to handle that.


> However, you are really expected to install your own error message
> display routines of course, so your fix for the moment is to make a
> copy of the tree parser displayRecognitionError, have it check that
> the token being duped to create the missing symbol has a tree factory
> and if it does not, then use LT(-2) etc

Would it be appropriate to modify getMissingSymbol to do something like  
that?


Thanks,
Ned.


From tbender at stud.hs-heilbronn.de  Tue Jun  2 02:34:11 2009
From: tbender at stud.hs-heilbronn.de (Tilman Bender)
Date: Tue, 2 Jun 2009 11:34:11 +0200
Subject: [antlr-interest] antlr3-maven-plugin not generating sources
In-Reply-To: <25371.1243932219@tstotts.net>
References: <25371.1243932219@tstotts.net>
Message-ID: <BB75EBE2-2A4A-4BA9-B165-1D92745F7530@stud.hs-heilbronn.de>

Hi Timotheus,

I from what I can see your snippet from pom.xml is lacking an  
execution element.
I have a working example here (be careful, I use the SNAPSHOT)

<plugin>
<groupId>org.antlr</groupId>
<artifactId>antlr3-maven-plugin</artifactId>
<version>3.1.4-SNAPSHOT</version>
<configuration>
<libDirectory>target/generated-sources/antlr3/de/hshn/se/akse/ss09/ 
parser/</libDirectory>
<!--<debug>true</debug>-->
<!-- print some fancy information about the grammars-->
<report>true</report>
<!-- generated parser code will log rule entry and exit points to  
stdout as an aid to debugging.-->
<trace>true</trace>
<!--   generate a dot graph of the NFA for each rule -->
<!-- <nfa>true</nfa> -->
<!-- generate a dot graph of the DFA for each decision in the grammar  
-->
<!-- <dfa>true</dfa> -->

                                 </configuration>
                                 <executions>
                                         <execution>
                                                 <id>antlr</id>
                                                 <phase>generate- 
sources</phase>
                                                 <goals>
                                                         <goal>antlr</ 
goal>
                                                 </goals>
                                         </execution>
                                 </executions>
                         </plugin>

Tilman Bender
Student des Software Engineering
Hochschule Heilbronn
tbender at stud.hs-heilbronn.de



Am 02.06.2009 um 10:43 schrieb T Stotts:

>
> I have created a Java project managed by Maven 2 that includes Antlr 3
> grammar files. Following the instructions at:
>    http://antlr.org/antlr3-maven-plugin/index.html
> resulted in unexpected behavior.
>
> (1) Antlr is never invoked during the generate-sources or compile
> phases. The grammars are not processed.
>   # mvn compile
> or
>   # mvn package
> do not result in the generation of Antlr source, nor the compilation
> there of.
>
>
> (2) Manually invoking the plugin with:
>   # mvn mvn org.antlr:antlr3-maven-plugin:3.1.3-1:antlr
> does cause the grammar files to be processed, and the generated  
> sources
> to be placed under:
>   ./target/generated-sources/antlr3/
> However, there is no phase/rule to then compile these generated
> sources.
>
> My pom.xml contains:
>
>  <build>
>    <plugins>
>      ...
>
>      <plugin>
>        <groupId>org.antlr</groupId>
>        <artifactId>antlr3-maven-plugin</artifactId>
>        <version>3.1.3-1</version>
>        <executions>
>          <execution>
>            <configuration>
>              <goals>
>                <goal>antlr</goal>
>              </goals>
>              <verbose>true</verbose>
>            </configuration>
>          </execution>
>        </executions>
>      </plugin>
>
>      ...
>    </plugins>
>  </build>
>
> -- 
> aka:   timotheus
> web:   http://tstotts.net/
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090602/0f8ddaed/attachment.html 

From vasanthi.ak at gmail.com  Tue Jun  2 02:51:55 2009
From: vasanthi.ak at gmail.com (vasanthi a)
Date: Tue, 2 Jun 2009 15:21:55 +0530
Subject: [antlr-interest] Retaining Comments after parsing the file
In-Reply-To: <49EC6FE2.9080608@smartshift.de>
References: <307cfdc90904190728ne5e2b46pece64edff865ba2f@mail.gmail.com>
	<CA0D7D1F-2972-460E-B97D-24D6B6574976@stud.hs-heilbronn.de>
	<307cfdc90904200534o6697fd6cy3836ffcf835e5b61@mail.gmail.com>
	<49EC6FE2.9080608@smartshift.de>
Message-ID: <307cfdc90906020251v31ed86ebs949a968434c3acd1@mail.gmail.com>

Hi,

Can you please let me know how to retain comments after instrumenting the
code in ANTRL V2.

Thanks
Vasanthi.

On Mon, Apr 20, 2009 at 6:21 PM, Andreas Meyer
<andreas.meyer at smartshift.de>wrote:

> It seems you are using ANTLR2. There, hidden tokens were handled
> differently from ANTLR3 (see http://www.antlr2.org/doc/streams.html)
>
> Best,
> Andreas Meyer
>
> smartShift
> smart e*lliance GmbH
> Willy-Brandt Platz 6
> 68161 Mannheim
> Germany
>
> T +49 (621) 400 676-13
> F +49 621 400 67606
>
> Gesch?ftsf?hrer:  Stefan Hetges
> Amtsgericht Hamburg, HRB 83484
> Ust.-ID-Nr.: DE 813489791
>
> vasanthi a schrieb:
> > Hi All
> > But when I try to use this syntax it says undefined symbol $.
> > The below mentioned syntax is java
> > "undefined char $'
> >
> > Vasanthi.
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090602/4e210448/attachment.html 

From vs at iist.unu.edu  Tue Jun  2 03:03:35 2009
From: vs at iist.unu.edu (Volker Stolz)
Date: Tue, 02 Jun 2009 18:03:35 +0800
Subject: [antlr-interest] @rulecatch{} significant line feed required?
Message-ID: <vs-1EBAEE.18033302062009@news.gmane.org>

I just stumbled over the following behaviour (using ANTLRWorks 1.2.3) 
for Java codegen:

  @rulecatch{}

does not do anything, while

  @rulecatch{// new line
  }

creates the finally-block that I needed. I couldn't find this referenced 
anywhere, so I was wondering whether it might classify as a bug. It's 
certainly counter-intuitive.

Volker

-- 
United Nations University - ? ? ? ? ? ? ? ? ?     http://rcos.iist.unu.edu/~vs/
International Institute for Software Technology ? Macau SAR, China


From vasanthi.ak at gmail.com  Tue Jun  2 03:03:47 2009
From: vasanthi.ak at gmail.com (vasanthi a)
Date: Tue, 2 Jun 2009 15:33:47 +0530
Subject: [antlr-interest] Retaining Comments after parsing the file
In-Reply-To: <CA0D7D1F-2972-460E-B97D-24D6B6574976@stud.hs-heilbronn.de>
References: <307cfdc90904190728ne5e2b46pece64edff865ba2f@mail.gmail.com>
	<CA0D7D1F-2972-460E-B97D-24D6B6574976@stud.hs-heilbronn.de>
Message-ID: <307cfdc90906020303t1653aed9wb85c1ce3435488d2@mail.gmail.com>

Hi

I am using ANTLR V 2, and in the code when I change from $channel=SKIP to
$channel=HIDDEN and I get a error
Token hidden cannot be resolved.
Can you please let me know how this can be resolved.
On Sun, Apr 19, 2009 at 10:48 PM, Tilman Bender <
tbender at stud.hs-heilbronn.de> wrote:

> Hi,
> The problem is, that you use skip() where you should actually use something
> like:
>
> : "//" (~('\r'|'\n'))* {$channel=HIDDEN;}
>
> This way the comment will still be acessible in the parser:
>
> http://www.antlr.org/wiki/pages/viewpage.action?pageId=557063
>
> HTH
>
>  Tilman Bender
> Student des Software Engineering
> Hochschule Heilbronn
> tbender at stud.hs-heilbronn.de
>
>
>
>  Am 19.04.2009 um 16:28 schrieb vasanthi a:
>
>  SL_COMMENT
>
> : "//" (~('\r'|'\n'))* {$setType(Token.SKIP);}
> ;
>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090602/9f68588b/attachment.html 

From vasanthi.ak at gmail.com  Tue Jun  2 03:47:12 2009
From: vasanthi.ak at gmail.com (vasanthi a)
Date: Tue, 2 Jun 2009 16:17:12 +0530
Subject: [antlr-interest] How to migrate from ANTLR V2 to V3
Message-ID: <307cfdc90906020347w35358157wbf0e7b7cc089708b@mail.gmail.com>

Hi All

I have a source code that is written in ANTLR V2. I want to migrate the code
from V2 to V3.
What are the procedures that needs to be followed? What all I  need to
install?

Currently I am facing a problem with Comments.

When I instrument the code which is having comment , after instrumentation
all the comments are getting
removed.


I want to retain the comments after instrumentation of code.

The below is the grammar I am using in ANTLR v2.


// Single-line comments

SL_COMMENT

: "//" (~('\r'|'\n'))* {$setType(Token.SKIP);}

;





// multiple-line comments

ML_COMMENT

: "/*"

(options {generateAmbigWarnings=false;}:

{ LA(2)!='/' }? '*'

| EndOfLine

| ~('*'|'\n'|'\r')

)*

"*/" {$setType(Token.SKIP);}

;





if I use $Channel= HIDDEN instead of {$setType(Token.SKIP);}

it throws a error "Undefined token $"

I think this error could be because of using ANTLR 2



It would be nicer if the solution is in ANTLR 2 itslef.

I want to know how to retain comments in the instrumented code.



Vasanthi.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090602/40f5fd04/attachment.html 

From andreas.meyer at smartshift.de  Tue Jun  2 04:10:25 2009
From: andreas.meyer at smartshift.de (Andreas Meyer)
Date: Tue, 02 Jun 2009 13:10:25 +0200
Subject: [antlr-interest] Retaining Comments after parsing the file
In-Reply-To: <307cfdc90906020251v31ed86ebs949a968434c3acd1@mail.gmail.com>
References: <307cfdc90904190728ne5e2b46pece64edff865ba2f@mail.gmail.com>	
	<CA0D7D1F-2972-460E-B97D-24D6B6574976@stud.hs-heilbronn.de>	
	<307cfdc90904200534o6697fd6cy3836ffcf835e5b61@mail.gmail.com>	
	<49EC6FE2.9080608@smartshift.de>
	<307cfdc90906020251v31ed86ebs949a968434c3acd1@mail.gmail.com>
Message-ID: <4A2508A1.7010005@smartshift.de>

Didn't the linked documentation help?

vasanthi a schrieb:
> Hi,
>  
> Can you please let me know how to retain comments after instrumenting 
> the code in ANTRL V2.
>  
> Thanks
> Vasanthi.
>
> On Mon, Apr 20, 2009 at 6:21 PM, Andreas Meyer 
> <andreas.meyer at smartshift.de <mailto:andreas.meyer at smartshift.de>> wrote:
>
>     It seems you are using ANTLR2. There, hidden tokens were handled
>     differently from ANTLR3 (see http://www.antlr2.org/doc/streams.html)
>
>     Best,
>     Andreas Meyer
>
>
>     vasanthi a schrieb:
>     > Hi All
>     > But when I try to use this syntax it says undefined symbol $.
>     > The below mentioned syntax is java
>     > "undefined char $'
>     >
>     > Vasanthi.
>
>
>     List: http://www.antlr.org/mailman/listinfo/antlr-interest
>     Unsubscribe:
>     http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>
>


-- 

Mit freundlichen Gr??en
 

Andreas Meyer
Consultant
_______
smartShift GmbH
Willy-Brandt Platz 6
68161 Mannheim
Germany
T +49 (0)621.400 67.613

Gesch?ftsf?hrer:  Stefan Hetges
Amtsgericht Hamburg, HRB 83484
Ust.-ID-Nr.: DE 813489791


From vasanthi.ak at gmail.com  Tue Jun  2 05:25:52 2009
From: vasanthi.ak at gmail.com (vasanthi a)
Date: Tue, 2 Jun 2009 17:55:52 +0530
Subject: [antlr-interest] Retaining Comments after parsing the file
In-Reply-To: <4A2508A1.7010005@smartshift.de>
References: <307cfdc90904190728ne5e2b46pece64edff865ba2f@mail.gmail.com>
	<CA0D7D1F-2972-460E-B97D-24D6B6574976@stud.hs-heilbronn.de>
	<307cfdc90904200534o6697fd6cy3836ffcf835e5b61@mail.gmail.com>
	<49EC6FE2.9080608@smartshift.de>
	<307cfdc90906020251v31ed86ebs949a968434c3acd1@mail.gmail.com>
	<4A2508A1.7010005@smartshift.de>
Message-ID: <307cfdc90906020525t38b7090et284508e8e474ad9d@mail.gmail.com>

Hi Meyer

I am not getting a clear picture of where I need to change the code in  the
grammar?
What are the changes that are ned in the java grammar code?




// Single-line comments

SL_COMMENT

: "//" (~('\r'|'\n'))* {$setType(Token.SKIP);}

;





// multiple-line comments

ML_COMMENT

: "/*"

(options {generateAmbigWarnings=false;}:

{ LA(2)!='/' }? '*'

| EndOfLine

| ~('*'|'\n'|'\r')

)*

"*/" {$setType(Token.SKIP);}

;
In the above code what are the changes that have to be made

On Tue, Jun 2, 2009 at 4:40 PM, Andreas Meyer
<andreas.meyer at smartshift.de>wrote:

> Didn't the linked documentation help?
>
> vasanthi a schrieb:
> > Hi,
> >
> > Can you please let me know how to retain comments after instrumenting
> > the code in ANTRL V2.
> >
> > Thanks
> > Vasanthi.
> >
> > On Mon, Apr 20, 2009 at 6:21 PM, Andreas Meyer
> > <andreas.meyer at smartshift.de <mailto:andreas.meyer at smartshift.de>>
> wrote:
> >
> >     It seems you are using ANTLR2. There, hidden tokens were handled
> >     differently from ANTLR3 (see http://www.antlr2.org/doc/streams.html)
> >
> >     Best,
> >     Andreas Meyer
> >
> >
> >     vasanthi a schrieb:
> >     > Hi All
> >     > But when I try to use this syntax it says undefined symbol $.
> >     > The below mentioned syntax is java
> >     > "undefined char $'
> >     >
> >     > Vasanthi.
> >
> >
> >     List: http://www.antlr.org/mailman/listinfo/antlr-interest
> >     Unsubscribe:
> >
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
> >
> >
>
>
> --
>
> Mit freundlichen Gr??en
>
>
> Andreas Meyer
> Consultant
> _______
> smartShift GmbH
> Willy-Brandt Platz 6
> 68161 Mannheim
> Germany
> T +49 (0)621.400 67.613
>
> Gesch?ftsf?hrer:  Stefan Hetges
> Amtsgericht Hamburg, HRB 83484
> Ust.-ID-Nr.: DE 813489791
>
>
>  List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090602/5c832b01/attachment.html 

From vasanthi.ak at gmail.com  Tue Jun  2 05:32:51 2009
From: vasanthi.ak at gmail.com (vasanthi a)
Date: Tue, 2 Jun 2009 18:02:51 +0530
Subject: [antlr-interest] Comments get removed after instrumenting source
In-Reply-To: <4A02BCD5.7050300@smartshift.de>
References: <307cfdc90905070303k60dbc8dfy81929cdb325589c0@mail.gmail.com>
	<4A02BCD5.7050300@smartshift.de>
Message-ID: <307cfdc90906020532o67076e9v4cea90c680574ab9@mail.gmail.com>

where should I use the setHiddenAfter / setHiddenBefore methods?
Please let me know

vasanthi.

On Thu, May 7, 2009 at 4:19 PM, Andreas Meyer
<andreas.meyer at smartshift.de>wrote:

> If you just skip the comment token, it will be discarded. If you want to
> retain it, you have to use the "setHiddenAfter" / "setHiddenBefore"
> methods mentioned in the antlr wiki. Once the comments are stored there,
> you have to take care that you print them while traversing the tree for
> output.
>
> Andreas
>
> vasanthi a schrieb:
>  > HI All
> >
> > I have the below code for java grammar comment
> >
> >
> > // Single-line comments
> >
> > SL_COMMENT
> >
> > : "//" (~('\r'|'\n'))* {$setType(Token.SKIP);}
> >
> > ;
> >
> > After instrumenting the java code, it is removing the java comments .
> > Can you please let me know how to retain the comments
> >
> > after instrumenting the code..
> >
> >
> >
> > Please let me know, as I am stuck up with this from quite long time
> >
> >
> >
> > Vasanthi.
> >
> >
> >
> >
> >
> >
> >
> >
> > ------------------------------------------------------------------------
> >
> >
> > List: http://www.antlr.org/mailman/listinfo/antlr-interest
> > Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
> >
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090602/6c1add29/attachment.html 

From andreas.meyer at smartshift.de  Tue Jun  2 05:53:54 2009
From: andreas.meyer at smartshift.de (Andreas Meyer)
Date: Tue, 02 Jun 2009 14:53:54 +0200
Subject: [antlr-interest] Comments get removed after instrumenting source
In-Reply-To: <307cfdc90906020532o67076e9v4cea90c680574ab9@mail.gmail.com>
References: <307cfdc90905070303k60dbc8dfy81929cdb325589c0@mail.gmail.com>	
	<4A02BCD5.7050300@smartshift.de>
	<307cfdc90906020532o67076e9v4cea90c680574ab9@mail.gmail.com>
Message-ID: <4A2520E2.8090104@smartshift.de>

if you use the TokenStreamHiddenTokenFilter from ANTLR2 (see section 
"How to use this filter" in http://www.antlr2.org/doc/streams.html), it 
will by itself call these functions. All you have to do is follow  the 
steps from that section. Take care about the calls to filter.discard and 
filter.hide (you have to call those after constructing your lexer 
instance, and you have to pass that filter to the parser, instead of 
directly passing the lexer), and also remove the action 
"$setType(Token.SKIP);" from the grammar, as the tokenStreamFilter is 
now taking care of it. Later, you can access hidden tokens by calling 
"getHiddenafter" (see following section "Tree Construction" in  the same 
manual).

The manual is a bit out of date I guess, but if you also look at the 
source code of ANTLR2 in parallel, things should get clearer.

Andreas

vasanthi a schrieb:
> where should I use the setHiddenAfter / setHiddenBefore methods?
> Please let me know
>  
> vasanthi.
>
> On Thu, May 7, 2009 at 4:19 PM, Andreas Meyer 
> <andreas.meyer at smartshift.de <mailto:andreas.meyer at smartshift.de>> wrote:
>
>     If you just skip the comment token, it will be discarded. If you
>     want to
>     retain it, you have to use the "setHiddenAfter" / "setHiddenBefore"
>     methods mentioned in the antlr wiki. Once the comments are stored
>     there,
>     you have to take care that you print them while traversing the
>     tree for
>     output.
>
>     Andreas
>
>     vasanthi a schrieb:
>     > HI All
>     >
>     > I have the below code for java grammar comment
>     >
>     >
>     > // Single-line comments
>     >
>     > SL_COMMENT
>     >
>     > : "//" (~('\r'|'\n'))* {$setType(Token.SKIP);}
>     >
>     > ;
>     >
>     > After instrumenting the java code, it is removing the java
>     comments .
>     > Can you please let me know how to retain the comments
>     >
>     > after instrumenting the code..
>     >
>     >
>     >
>     > Please let me know, as I am stuck up with this from quite long time
>     >
>     >
>     >
>     > Vasanthi.
>     >
>     >
>     >
>     >
>     >
>     >
>     >
>     >
>     >
>     ------------------------------------------------------------------------
>     >
>     >
>     > List: http://www.antlr.org/mailman/listinfo/antlr-interest
>     > Unsubscribe:
>     http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>     >
>
>
>     List: http://www.antlr.org/mailman/listinfo/antlr-interest
>     Unsubscribe:
>     http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>
>


-- 

Mit freundlichen Gr??en
 

Andreas Meyer
Consultant
_______
smartShift GmbH
Willy-Brandt Platz 6
68161 Mannheim
Germany
T +49 (0)621.400 67.613

Gesch?ftsf?hrer:  Stefan Hetges
Amtsgericht Hamburg, HRB 83484
Ust.-ID-Nr.: DE 813489791


From Waverly.Edwards at genesys.com  Tue Jun  2 06:27:06 2009
From: Waverly.Edwards at genesys.com (Edwards, Waverly)
Date: Tue, 2 Jun 2009 08:27:06 -0500
Subject: [antlr-interest] "Cannot launch the debugger"
In-Reply-To: <EEB5135F8F614B3AB61C9C731935BCF5@ORAC>
References: <F7F2DCD7FCE24318B3A54E732822352C@ORAC>
	<5A6B453D-8069-4432-AF45-6C91F59BBCA0@cs.usfca.edu>
	<D13922A41EBE4E5A83B9EA4BFA97D0B3@ORAC>
	<E6E59B22-3053-4D65-8988-0F8C62237E3D@cs.usfca.edu>
	<162EF824F26949B08CFB75F9D2F41B6E@ORAC>
	<50CBFB0B-B9C9-4731-BE58-23FF9F94838C@cs.usfca.edu>
	<EEB5135F8F614B3AB61C9C731935BCF5@ORAC>
Message-ID: <4A454A950FB157459B59AA50C146C07922D94DDA@OMA00CEXMBX02.corp.westworlds.com>

Very likely a reboot is all that was necessary.
I **often** encountered this issue if there was a failure in 
the interpreter to launch because of an issue with user 
defined code. I recall having reported this back in August 
2007 but I do not recall getting a response as to who this 
issue should be directed to.

I don't know if you are getting the same dialog that I did
which is:

 "Cannot launch the debugger. 
Time-out waiting to connect to the remote parser."

The real problem appears to be a failure to launch and a
subsequent blocking of the port.  Changing classpath had
no bearing on the solution, the reboot enabled everything
to work as expected, just as it did for me.  Whenever I had
a failure to launch I had two choices, fix my code and change
the port the debugger was communicating on or fix my code and
reboot.


W.

Original message below entitled "[antlr-interest] ANTLR BUG"
24 August 2007.

-----------------------------


I don't know if this is an ANTLR or an Antlrworks bug 1.1.2 

I am using Antlrworks  1.1.2  and get the following message 
when debugging the below grammar. 



"Cannot launch the debugger. 
Time-out waiting to connect to the remote parser." 



I Googled the error and found out that if there is something 
wrong with the grammar or the code block that you can get 
this message.  I've had times where something incorrect 
about my Java usage in the action code block and received 
this alert.  Ok, I'm not happy about it but I've accepted that 
Antlrworks doesn't tell me where the problem is, it just tosses 
up this dialog which isn't very helpful.  I would consider this a 
bug BUT here is the real BUG. 



BUG ALERT: 
The below code is valid.  I have tested the action code block 
using the NetBeans IDE a number of times.  I just replace 
getText() with a valid string.  The following two lines seem to 
be offensive. 

if ( txt.charAt(0) == quoteChr ) txt.deleteCharAt(0); 
if ( txt.charAt( lastCharPos ) == quoteChr ) txt.deleteCharAt( lastCharPos ); 

If either or both of these lines are commented out the debugger works. 
If both of these lines are uncommented the debugger fails, giving the 
"Cannot launch the debugger." message.  Separately they pose no 
threat but together they generate a failure.  It would seem that Antlrworks 
is to blame but I don't know this since I don't know how the underlying 
architecture works, as the problem may really be ANTLR which is why 
I entitled the message "ANTLR BUG" 

Thank you for your time, 




W. 

Interesting that "Google" or "Googling" is a verb. 




grammar  QUOTETEST; 



prog    :       start+ ; 

start   :       (ID | INTEGER | DBLQUOTE | SYMBOL | NEWLINE ) 
        ; 
        
NEWLINE :       '\r'? '\n'; 
WS      :       (' ' | '\t' | '\n' | '\r') {$channel=HIDDEN;} 
        ; 
ID      :       Letter (Letter | Digit)* 
        ; 
INTEGER 
        :       Digit (Digit)* 
        ; 
SYMBOL  :       ('+' | '-' | '=')* 
        ; 
        
fragment 
Letter  :       'a'..'z' | 'A'..'Z' 
        ; 
fragment        
Digit   :       '0'..'9' 
        ; 



DBLQUOTE 
   :  '"' 
      (~'"' | '""')* 
      '"' 
          { 
                
                int where, lastCharPos; 
                String quote, dblDblQuote, cont; 
                StringBuffer txt; 
                char quoteChr = 34; 

                cont = "?\r\n"; // window continuation 
                //cont = "?\r" // mac continuation 
                //cont = "?\n" // unix continuation 
                dblDblQuote = "\"\""; 
                quote = "\n"; 
                txt = new StringBuffer(getText()); 
                lastCharPos = txt.length( )-1; 
        
        // Remove first and last double-quote 
                if ( txt.charAt(0) == quoteChr ) txt.deleteCharAt(0); 
       //       if ( txt.charAt( lastCharPos ) == quoteChr ) txt.deleteCharAt( lastCharPos ); 
                System.out.println( txt.toString() );      
          } 
          ; 

<<quotedText.txt>> 


-----Original Message-----
From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-bounces at antlr.org] On Behalf Of Matthew Rawlings
Sent: Monday, June 01, 2009 9:27 PM
To: antlr-interest at antlr.org
Subject: Re: [antlr-interest] "Cannot launch the debugger"

Thanks to the clues, I got it working in the end. 

The changes made were:
1. Strip out every PATH and CLASSPATH entries that may clash, and then
reboot. It took a fair few reboots.
2. Switch back to port 49153.
3. Uninstall the old JDKs to prevent them being picked up.


> -----Original Message-----
> From: Terence Parr [mailto:parrt at cs.usfca.edu]
> Sent: 02 June 2009 01:02
> To: Matthew Rawlings
> Cc: antlr-interest at antlr.org
> Subject: Re: [antlr-interest] "Cannot launch the debugger"
> 
> 3.1.2 or 3.1.1 had a different port I think. Make sure you run
> ANTLRWorks with the ANTLR that comes in its jar or make sure use the
> latest of those tools. somewhere there is a mismatch :)
> Ter



List: http://www.antlr.org/mailman/listinfo/antlr-interest
Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address

From dave at tridecap.com  Tue Jun  2 07:39:40 2009
From: dave at tridecap.com (Dave Dutcher)
Date: Tue, 2 Jun 2009 09:39:40 -0500
Subject: [antlr-interest] Regarding lexer rules return values
In-Reply-To: <08CE54E7AEB8A94A81B2F62956345536341E1C14@SGPMBX05.APAC.bosch.com>
References: <08CE54E7AEB8A94A81B2F62956345536341E1C14@SGPMBX05.APAC.bosch.com>
Message-ID: <439B689B6BE34078BF6980C4D7B56EB6@tridecap.com>

Is there a reason you can't make LEXERRULE a parser rule?
 
 
parserrule: (parserrule2);
 
parserrule2:  (LEXERRULE1) (LEXERRULE2) (LEXERRULE3);
 
Then you can do exactly what you want.
 
Dave
 
 


  _____  

From: antlr-interest-bounces at antlr.org
[mailto:antlr-interest-bounces at antlr.org] On Behalf Of Raghavendra Anjana
(RBEI/EMT2)
Sent: Tuesday, June 02, 2009 4:27 AM
To: antlr-interest at antlr.org
Subject: [antlr-interest] Regarding lexer rules return values



Hello,
 
I have a grammar with a parser rule as shown below
 
parserrule: (LEXERRULE);
 
LEXERRULE: (LEXERRULE1)(LEXERRULE2)(LEXERRULE3);
 
Whenever my parser rule is recognized I want to return the text identified
for LEXERRULE1,2,3 separately.  But I believe that we cannot return values
from a lexer rule.
 
Is there a way so that I can get the LEXERRULE1,2,3 from LEXERRULE.
 
i.e.   Something like
 
Parserrule return [x,y,z]: (LEXERRULE) {$x= LEXERRULE.LEXERRULE1;$y
=LEXERRULE.LEXERRULE2;$z=LEXERRULE.LEXERRULE3 };
 
LEXERRULE: (LEXERRULE1)(LEXERRULE2)(LEXERRULE3);
LEXERRULE1:'ab';
LEXERRULE2:'xy';
LEXERRULE3:'12';
 
 
The input for this parser is   abxy12
The scenario is that whenver this text is recognized or matched then I want
ab, xy and 12 to be return back from the parser rule  each separately.
 
Thanks a lot in advance.
 
Thanks and Regards
Raghavendra
 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090602/b8413278/attachment.html 

From ian at telematter.com  Tue Jun  2 09:58:12 2009
From: ian at telematter.com (Ian Eyberg)
Date: Tue, 2 Jun 2009 11:58:12 -0500
Subject: [antlr-interest] ocaml target?
Message-ID: <20090602165812.GA6814@spicetrader>

hi,
  anyone know of anyone working on an ocaml target?

-ian

From jimi at temporal-wave.com  Tue Jun  2 11:00:23 2009
From: jimi at temporal-wave.com (Jim Idle)
Date: Tue, 02 Jun 2009 11:00:23 -0700
Subject: [antlr-interest] antlr3-maven-plugin not generating sources
In-Reply-To: <25371.1243932219@tstotts.net>
References: <25371.1243932219@tstotts.net>
Message-ID: <4A2568B7.6060102@temporal-wave.com>

T Stotts wrote:
> I have created a Java project managed by Maven 2 that includes Antlr 3
> grammar files. Following the instructions at:
>     http://antlr.org/antlr3-maven-plugin/index.html
> resulted in unexpected behavior.
>   
Hi - can't tell you  much without the entire pom. Obviously it works as 
ANTLR uses it to build itself. I suggest that you don't have the .g 
files in the correct places.

Jim

From jimi at temporal-wave.com  Tue Jun  2 11:03:46 2009
From: jimi at temporal-wave.com (Jim Idle)
Date: Tue, 02 Jun 2009 11:03:46 -0700
Subject: [antlr-interest] C runtime: crash in dupNode;
 UP/DOWN/etc. missing factory?
In-Reply-To: <op.uuv4oxrfo521jq@tg01pc02.europe.root.pri>
References: <op.uuupch03o521jq@tg01pc02.europe.root.pri>	<4A23FDAC.8090607@temporal-wave.com>
	<op.uuv4oxrfo521jq@tg01pc02.europe.root.pri>
Message-ID: <4A256982.4040207@temporal-wave.com>

An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090602/b85f3522/attachment.html 

From parrt at cs.usfca.edu  Tue Jun  2 12:31:33 2009
From: parrt at cs.usfca.edu (Terence Parr)
Date: Tue, 2 Jun 2009 12:31:33 -0700
Subject: [antlr-interest] ocaml target?
In-Reply-To: <20090602165812.GA6814@spicetrader>
References: <20090602165812.GA6814@spicetrader>
Message-ID: <E11D8B93-30D0-451C-8907-3382C2DE5E49@cs.usfca.edu>


On Jun 2, 2009, at 9:58 AM, Ian Eyberg wrote:

> hi,
>  anyone know of anyone working on an ocaml target?

Hi Ian. Nope. did you just sign up to build one? ;)

Ter

From sharwell at pixelminegames.com  Tue Jun  2 14:00:56 2009
From: sharwell at pixelminegames.com (Sam Harwell)
Date: Tue, 2 Jun 2009 16:00:56 -0500
Subject: [antlr-interest] ocaml target?
In-Reply-To: <20090602165812.GA6814@spicetrader>
References: <20090602165812.GA6814@spicetrader>
Message-ID: <86403CA0939415448BCCB83855EFE09AA681F4@Bloodymary.ironwillgames.com>

I pondered the idea of an F# target a while back, but I quickly realized
I was in over my head. For academic reasons I'd be very interested in
the result if you do build an ocaml target. :)

Sam

-----Original Message-----
From: antlr-interest-bounces at antlr.org
[mailto:antlr-interest-bounces at antlr.org] On Behalf Of Ian Eyberg
Sent: Tuesday, June 02, 2009 11:58 AM
To: antlr-interest at antlr.org
Subject: [antlr-interest] ocaml target?

hi,
  anyone know of anyone working on an ocaml target?

-ian

List: http://www.antlr.org/mailman/listinfo/antlr-interest
Unsubscribe:
http://www.antlr.org/mailman/options/antlr-interest/your-email-address

From jsrs701 at yahoo.com  Tue Jun  2 16:22:37 2009
From: jsrs701 at yahoo.com (J. Stephen Riley Silber)
Date: Tue, 2 Jun 2009 16:22:37 -0700 (PDT)
Subject: [antlr-interest] ocaml target?
Message-ID: <712576.73969.qm@web33303.mail.mud.yahoo.com>

Oh, Ian, you have to be careful with posts like that.? Terence is very sneaky like that.? :-)

--- On Tue, 6/2/09, Terence Parr <parrt at cs.usfca.edu> wrote:

From: Terence Parr <parrt at cs.usfca.edu>
Subject: Re: [antlr-interest] ocaml target?
To: "Ian Eyberg" <ian at telematter.com>
Cc: antlr-interest at antlr.org
Date: Tuesday, June 2, 2009, 12:31 PM


On Jun 2, 2009, at 9:58 AM, Ian Eyberg wrote:

> hi,
>? anyone know of anyone working on an ocaml target?

Hi Ian. Nope. did you just sign up to build one? ;)

Ter

List: http://www.antlr.org/mailman/listinfo/antlr-interest
Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090602/178fde99/attachment.html 

From jsrs701 at yahoo.com  Tue Jun  2 16:25:20 2009
From: jsrs701 at yahoo.com (J. Stephen Riley Silber)
Date: Tue, 2 Jun 2009 16:25:20 -0700 (PDT)
Subject: [antlr-interest] Tree grammar example, redux
Message-ID: <906359.76088.qm@web33306.mail.mud.yahoo.com>

Hi gang,

Frank mentioned the second example in this article (http://www.antlr.org/wiki/display/ANTLR3/Simple+tree-based+interpeter) not working as of 3.1.3.? I, too, have been trying to get it working, to no avail.

Did something fundamental change in the TreeNodeStream functionality?? I like this solution much better than spawning new tree parsers every time a function is called.

What's the dillio?

Thanks,
--Stephen
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090602/522d2fec/attachment.html 

From parrt at cs.usfca.edu  Tue Jun  2 16:27:09 2009
From: parrt at cs.usfca.edu (Terence Parr)
Date: Tue, 2 Jun 2009 16:27:09 -0700
Subject: [antlr-interest] Tree grammar example, redux
In-Reply-To: <906359.76088.qm@web33306.mail.mud.yahoo.com>
References: <906359.76088.qm@web33306.mail.mud.yahoo.com>
Message-ID: <7F952FE6-D0B6-4B61-BD5A-1D1E8D298DFA@cs.usfca.edu>


On Jun 2, 2009, at 4:25 PM, J. Stephen Riley Silber wrote:

> Hi gang,
>
> Frank mentioned the second example in this article (http://www.antlr.org/wiki/display/ANTLR3/Simple+tree-based+interpeter 
> ) not working as of 3.1.3.  I, too, have been trying to get it  
> working, to no avail.
>
> Did something fundamental change in the TreeNodeStream  
> functionality?  I like this solution much better than spawning new  
> tree parsers every time a function is called.
>
> What's the dillio?

I think maybe the default stream isn't buffered anymore.  Try using  
BufferedTreeNodeStream :)
Ter

From christian.schladetsch at gmail.com  Tue Jun  2 21:09:59 2009
From: christian.schladetsch at gmail.com (Christian Schladetsch)
Date: Wed, 3 Jun 2009 16:09:59 +1200
Subject: [antlr-interest] Reverse Iterate over String Template
Message-ID: <6442c4ae0906022109p34d2aa4bnae96b5ffafbf20ea@mail.gmail.com>

Hello,

Sorry if this is to the wrong list; but I know that the ST folks are here
too.

Is there a way to iterate over a string template in reverse order? If not,
can anyone point me to a work-around for C# target?

Thanks in advance,
Christian.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090603/c8ad051d/attachment.html 

From bestgembler at hotmail.com  Tue Jun  2 21:44:09 2009
From: bestgembler at hotmail.com (Kevin Chen)
Date: Wed, 3 Jun 2009 12:44:09 +0800
Subject: [antlr-interest] how to make a parser implement an interface?
Message-ID: <COL113-W310E33854F90914912EAE0B94A0@phx.gbl>


Hello everybody!!

I'm using antlr3.  :-)


after generate code, parser class like this:

    public class ExampleParser extends Parser {
        ... ...
    }

but, I hope like this:

    public class ExampleParser extends Parser implements ExampleInterface, {

        ... ...

    }


Is there anyone can help me, please?


Appreciate your help.
  and
Thanks a lot in advance.

_________________________________________________________________
Drag n? drop?Get easy photo sharing with Windows Live? Photos.

http://www.microsoft.com/windows/windowslive/products/photos.aspx
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090603/a3b6f4d2/attachment.html 

From g.r.vansickle at att.net  Tue Jun  2 21:53:14 2009
From: g.r.vansickle at att.net (Gary R. Van Sickle)
Date: Tue, 2 Jun 2009 23:53:14 -0500
Subject: [antlr-interest] Is the parenthesis node duplication bug fixed yet?
Message-ID: <047B20CB6AA0476DB4DD2B853E05C52D@DFW5RB41>

Hi guys,

I'm using a maybe month-old 3.1.4 snapshot, where this works:

	pointer
		: pointer_guts+
		;
	
	pointer_guts
	  : lc='*' type_qualifier? -> ^(POINTER[$lc, "POINTER"]
type_qualifier?)
	  ;

And this doesn't:

	pointer
	  : (lc='*' type_qualifier?)+ -> ^(POINTER[$lc, "POINTER"]
type_qualifier?)+
	  ;

Does the latter work in the latest snapshots?

Thanks,

-- 
Gary R. Van Sickle


From gerald at certiv.net  Tue Jun  2 22:22:49 2009
From: gerald at certiv.net (Gerald Rosenberg)
Date: Tue, 02 Jun 2009 22:22:49 -0700
Subject: [antlr-interest] how to make a parser implement an  interface?
In-Reply-To: <COL113-W310E33854F90914912EAE0B94A0@phx.gbl>
References: <COL113-W310E33854F90914912EAE0B94A0@phx.gbl>
Message-ID: <200906030522.n535MoK0001386@zinc.newtechlaw.com>

Use the "superClass" option to specify the class that your 
ExampleParser will extend.  That class can then implement your 
interface (must also extend Parser).  You will also find it 
convenient to use the superclass to implement the bulk of your member 
routines as well.



At 09:44 PM 6/2/2009, you wrote:
>Hello everybody!!
>
>I'm using antlr3.  :-)
>
>
>after generate code, parser class like this:
>
>     public class ExampleParser extends Parser {
>         ... ...
>     }
>
>but, I hope like this:
>
>     public class ExampleParser extends Parser implements ExampleInterface, {
>         ... ...
>     }
>
>
>Is there anyone can help me, please?
>
>
>Appreciate your help.
>   and
>Thanks a lot in advance.
>
>
>----------
>What can you do with the new Windows Live? 
><http://www.microsoft.com/windows/windowslive/default.aspx>Find out
>List: http://www.antlr.org/mailman/listinfo/antlr-interest
>Unsubscribe: 
>http://www.antlr.org/mailman/options/antlr-interest/your-email-address
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090602/b2a283e3/attachment.html 

From connectajit at rediffmail.com  Wed Jun  3 01:31:48 2009
From: connectajit at rediffmail.com (ajit vilasrao shinde)
Date: 3 Jun 2009 08:31:48 -0000
Subject: [antlr-interest] Some queries regarding grammer file
Message-ID: <20090603083148.33360.qmail@f4mail-235-136.rediffmail.com>

Hello Everyone, &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; I am new to ANLTR and I have tried out some example available on site. I have some questions regarding grammer file.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1&gt; Is there any way to extend the existing grammer file?&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 2&gt; Is there any way to combine multiple grammer files while lexer/parser code generation.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 3&gt; Is it possible to generate Lexer/Parser for C++ language. I think as of now ANTLR support generation for C language which is C++&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; compatible.ThanksAjit 


Ajit V. Shinde
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090603/3e90a76f/attachment.html 

From connectajit at rediffmail.com  Wed Jun  3 01:40:18 2009
From: connectajit at rediffmail.com (ajit vilasrao shinde)
Date: 3 Jun 2009 08:40:18 -0000
Subject: [antlr-interest] Grammer file queries...
Message-ID: <20090603084018.57369.qmail@f4mail-234-223.rediffmail.com>

Hello Everyone1. I am new to ANLTR and I have tried out some example available on site. I have some questions regarding grammer file.2. Is there any way to extend the existing grammer file?3. Is there any way to combine multiple grammer files while lexer/parser code generation.&amp;nbsp;Is it possible to generate Lexer/Parser for C++ language. I think as of now ANTLR support generation for C language which is C++ compatible.


Ajit V. Shinde
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090603/a51025a5/attachment.html 

From indhu.b at s7software.com  Wed Jun  3 01:50:32 2009
From: indhu.b at s7software.com (Indhu Bharathi)
Date: Wed, 3 Jun 2009 14:20:32 +0530
Subject: [antlr-interest] Grammer file queries...
In-Reply-To: <20090603084018.57369.qmail@f4mail-234-223.rediffmail.com>
References: <20090603084018.57369.qmail@f4mail-234-223.rediffmail.com>
Message-ID: <00ba01c9e428$5b07c370$11174a50$@b@s7software.com>

For your second and third question, solution is to use 'composite grammar'.
You'll be able to extend the existing grammar file. You can also form a
grammar by combining multiple .g files. One file might contain the lexer and
the parser itself could be spread across multiple grammar files. There is an
example in the examples folder.

 

For C++ target, I guess people use the C target which as you say generates
C++ compatible code. I'm not very sure about this one. Just saw it in one of
the list conversations.

 

Cheers, Indhu

 

From: antlr-interest-bounces at antlr.org
[mailto:antlr-interest-bounces at antlr.org] On Behalf Of ajit vilasrao shinde
Sent: Wednesday, June 03, 2009 2:10 PM
To: antlr-interest
Subject: [antlr-interest] Grammer file queries...

 

Hello Everyone
1. I am new to ANLTR and I have tried out some example available on site. I
have some questions regarding grammer file.
2. Is there any way to extend the existing grammer file?
3. Is there any way to combine multiple grammer files while lexer/parser
code generation.&nbsp;

Is it possible to generate Lexer/Parser for C++ language. 
I think as of now ANTLR support generation for C language which is C++
compatible.



Ajit V. Shinde

	

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090603/c31d06e2/attachment.html 

From Raghavendra.Anjana at in.bosch.com  Wed Jun  3 03:59:54 2009
From: Raghavendra.Anjana at in.bosch.com (Raghavendra Anjana (RBEI/EMT2))
Date: Wed, 3 Jun 2009 18:59:54 +0800
Subject: [antlr-interest] Regarding lexer rules return values
In-Reply-To: <439B689B6BE34078BF6980C4D7B56EB6@tridecap.com>
References: <08CE54E7AEB8A94A81B2F62956345536341E1C14@SGPMBX05.APAC.bosch.com>
	<439B689B6BE34078BF6980C4D7B56EB6@tridecap.com>
Message-ID: <08CE54E7AEB8A94A81B2F629563455363424D0D5@SGPMBX05.APAC.bosch.com>

Hello Dave,

I have used the parser rule with some modifications and started working....

Thanks a lot for your suggestion..

Regards
Raghavendra

________________________________
From: Dave Dutcher [mailto:dave at tridecap.com]
Sent: Tuesday, 2. June 2009 8:10 PM
To: Raghavendra Anjana (RBEI/EMT2); antlr-interest at antlr.org
Subject: RE: [antlr-interest] Regarding lexer rules return values

Is there a reason you can't make LEXERRULE a parser rule?


parserrule: (parserrule2);

parserrule2:  (LEXERRULE1) (LEXERRULE2) (LEXERRULE3);

Then you can do exactly what you want.

Dave



________________________________
From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-bounces at antlr.org] On Behalf Of Raghavendra Anjana (RBEI/EMT2)
Sent: Tuesday, June 02, 2009 4:27 AM
To: antlr-interest at antlr.org
Subject: [antlr-interest] Regarding lexer rules return values

Hello,

I have a grammar with a parser rule as shown below

parserrule: (LEXERRULE);

LEXERRULE: (LEXERRULE1)(LEXERRULE2)(LEXERRULE3);

Whenever my parser rule is recognized I want to return the text identified for LEXERRULE1,2,3 separately.  But I believe that we cannot return values from a lexer rule.

Is there a way so that I can get the LEXERRULE1,2,3 from LEXERRULE.

i.e.   Something like

Parserrule return [x,y,z]: (LEXERRULE) {$x= LEXERRULE.LEXERRULE1;$y =LEXERRULE.LEXERRULE2;$z=LEXERRULE.LEXERRULE3 };

LEXERRULE: (LEXERRULE1)(LEXERRULE2)(LEXERRULE3);
LEXERRULE1:'ab';
LEXERRULE2:'xy';
LEXERRULE3:'12';


The input for this parser is   abxy12
The scenario is that whenver this text is recognized or matched then I want ab, xy and 12 to be return back from the parser rule  each separately.

Thanks a lot in advance.

Thanks and Regards
Raghavendra

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090603/b88efff2/attachment.html 

From connectajit at rediffmail.com  Wed Jun  3 04:38:13 2009
From: connectajit at rediffmail.com (ajit vilasrao shinde)
Date: 3 Jun 2009 11:38:13 -0000
Subject: [antlr-interest] Re : Grammer file queries...
Message-ID: <1244018468.S.5361.17217.f4mail-234-210.old.1244029093.55476@webmail.rediffmail.com>

Hello,Thanks for replay. Could you please suggest me some links where I can have some example on this particularly extending existing grammar file. ThanksOn 3 Jun 2009 08:40:18 -0000 "ajit vilasrao shinde"  wrote  Hello Everyone1. I am new to ANLTR and I have tried out some example available on site. I have some questions regarding grammer file.2. Is there any way to extend the existing grammer file?3. Is there any way to combine multiple grammer files while lexer/parser code generation.&nbsp;Is it possible to generate Lexer/Parser for C++ language. I think as of now ANTLR support generation for C language which is C++ compatible.      Ajit    


Ajit V. Shinde
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090603/3ae72c5c/attachment.html 

From espina.edgar at gmail.com  Wed Jun  3 05:49:54 2009
From: espina.edgar at gmail.com (Edgar Espina)
Date: Wed, 3 Jun 2009 09:49:54 -0300
Subject: [antlr-interest] Dot Grammar
Message-ID: <92b42db60906030549n7b1bbfe2o4edade9ad4f0de65@mail.gmail.com>

H,

Can someone provide me grammar for Dot?

http://www.graphviz.org/doc/info/lang.html

Thanks,

-- 
edgar
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090603/bb9d9fea/attachment.html 

From glenmiller at skyviewsoftware.com  Wed Jun  3 07:13:52 2009
From: glenmiller at skyviewsoftware.com (Glen Miller)
Date: Wed, 03 Jun 2009 08:13:52 -0600
Subject: [antlr-interest] Inconsistent Parse Results
Message-ID: <1244038432.7058.12.camel@stormsentry>

When parsing the following data 
"2 CORP The Church of Jesus Christ of Latter-day Saints"

The parser is choking on Ch? and striping it out.

line 1:12 mismatched character 'h' expecting 'O'
line 1:28 mismatched character 'h' expecting 'O'
Data: Theurch of Jesusrist of Latter-day Saints

I am new to antlr, is my grammer wrong, or is it a bug?

Grammer -


grammar Test1 ;

test1 : NUMBER ' CORP ' data {System.out.println("Data: " +
$data.text);} ;

data : ~('\r' | '\n')* ;

NUMBER : '0'..'9'+ ;

OTHERCHAR : 
	'~' | 
	'!' | 
	'@' | 
	'#' | 
	'$' | 
	'%' | 
	'^' | 
	'&' | 
	'*' | 
	'(' | 
	')' | 
	'-' | 
	'_' | 
	'+' | 
	'=' | 
	'{' | 
	'}' | 
	'[' | 
	']' | 
	':' | 
	';' | 
	'<' | 
	'>' | 
	'?' | 
	',' | 
	'.' | 
	'/' | 
	' ' ;

WORD : ('a'..'z' | 'A'..'Z')+ ;


Test App -




import java.io.IOException;
import org.antlr.runtime.ANTLRFileStream;
import org.antlr.runtime.CommonTokenStream;
import org.antlr.runtime.RecognitionException;

public class TestApp
{
	public static void main(String[] inArgList)
	{
		try
		{
			ANTLRFileStream theFileStream = new
ANTLRFileStream("/home/glenmiller/tmp1/output/TestData2");
			Test1Lexer theLexer = new Test1Lexer(theFileStream);
			CommonTokenStream theTokenStream = new CommonTokenStream(theLexer);
			Test1Parser theParser = new Test1Parser(theTokenStream);
			theParser.test1();

		}
		catch (IOException inException)
		{
			inException.printStackTrace();
		}
		catch (RecognitionException inException)
		{
			inException.printStackTrace();
		}
	}
}




From ian at telematter.com  Wed Jun  3 07:32:00 2009
From: ian at telematter.com (Ian Eyberg)
Date: Wed, 3 Jun 2009 09:32:00 -0500
Subject: [antlr-interest] ocaml target?
In-Reply-To: <712576.73969.qm@web33303.mail.mud.yahoo.com>
References: <712576.73969.qm@web33303.mail.mud.yahoo.com>
Message-ID: <20090603143200.GB4660@spicetrader>

hrm... I guess I can take a look at it this weekend
the instructions here,
http://www.antlr.org/wiki/display/ANTLR3/How+to+build+an+ANTLR+code+generation+target

make it seem simple to get _started_

if I come up with anything I'll be sure to let the list know

-Ian

On 16:22 Tue 02 Jun     , J. Stephen Riley Silber wrote:
> Oh, Ian, you have to be careful with posts like that.? Terence is very sneaky like that.? :-)
> 
> --- On Tue, 6/2/09, Terence Parr <parrt at cs.usfca.edu> wrote:
> 
> From: Terence Parr <parrt at cs.usfca.edu>
> Subject: Re: [antlr-interest] ocaml target?
> To: "Ian Eyberg" <ian at telematter.com>
> Cc: antlr-interest at antlr.org
> Date: Tuesday, June 2, 2009, 12:31 PM
> 
> 
> On Jun 2, 2009, at 9:58 AM, Ian Eyberg wrote:
> 
> > hi,
> >? anyone know of anyone working on an ocaml target?
> 
> Hi Ian. Nope. did you just sign up to build one? ;)
> 
> Ter
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address

> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address

From micha-1 at fantasymail.de  Wed Jun  3 07:38:18 2009
From: micha-1 at fantasymail.de (Michael)
Date: Wed, 3 Jun 2009 16:38:18 +0200
Subject: [antlr-interest] ocaml target?
In-Reply-To: <20090603143200.GB4660@spicetrader>
References: <712576.73969.qm@web33303.mail.mud.yahoo.com>
	<20090603143200.GB4660@spicetrader>
Message-ID: <200906031638.18875.micha-1@fantasymail.de>

Am Wednesday 03 June 2009 16:32:00 schrieb Ian Eyberg:
> hrm... I guess I can take a look at it this weekend
> the instructions here,
> http://www.antlr.org/wiki/display/ANTLR3/How+to+build+an+ANTLR+code+generat
>ion+target
>
> make it seem simple to get _started_
>
> if I come up with anything I'll be sure to let the list know

some weeks ago I did some first steps in making a ocaml target for antlr. Just 
the try to get a minimal scanner working: changing a few templates to spit 
out ocaml code instead of java and iplementing a minimal set of functions 
from the needed runtime. I did only some first steps and did not the complete 
a running example. 
I'm not even sure whether using objects or just modules and functions is 
better. But it's fun to experiement with it :-)



 Michael

From register72 at gmail.com  Wed Jun  3 07:53:39 2009
From: register72 at gmail.com (register)
Date: Wed, 3 Jun 2009 16:53:39 +0200
Subject: [antlr-interest] [C Target][3.1.3] Parser crashes when looking up a
	scoped attribute outside of a scope context.
Message-ID: <4a80712f0906030753t731d76d9gf12e5dbe92c8417b@mail.gmail.com>

I noticed that the parser crashes whenever a scoped attribute is referenced
outside of a scope context.
This kind of situation arises when a rule B that is referencing a scoped
attribute defined in a rule A may match on its own without requiring a
previous match to A.

In my specific case the crash occurs because the following code is
generated:
scfSetAttrAsIntRef(curAttr,intRef, (SCOPE_TOP(record))->curRecord);.

Since SCOPE_TOP(record) is null I get an access violation.

One can obviously avoid this problem defining rules that are able to
discriminate between the outside-scope and in-scope invocation of B. However
I see a lot of redundancy in this approach so I propose to modify the
generated code in the following way:

scfSetAttrAsIntRef(curAttr,intRef, (SCOPE_TOP(record))==0 ? 0 :
(SCOPE_TOP(record))->curRecord);

Doing so one has two benefits:

- The code doesn't crash.

- Discrimination between the in-scope and outside-scope invocation can be
detected and handled inside actions.

Greets,

Luca
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090603/bdd21354/attachment.html 

From indhu.b at s7software.com  Wed Jun  3 08:13:58 2009
From: indhu.b at s7software.com (Indhu Bharathi)
Date: Wed, 3 Jun 2009 20:43:58 +0530
Subject: [antlr-interest] Inconsistent Parse Results
In-Reply-To: <1244038432.7058.12.camel@stormsentry>
References: <1244038432.7058.12.camel@stormsentry>
Message-ID: <012301c9e45d$ec2be180$c483a480$@b@s7software.com>

That is an expected behavior. Seeing ' C' the lexer decides to go for 'CORP'
token instead of OTHER(space) and WORD. You need to do some left factoring
there. Or you can modify your grammar to avoid such problems. Here is a
suggested correction:

grammar Test ;

test1 : NUMBER CORP data {System.out.println("Data: " + $data.text);} ;

data : ~('\r' | '\n')* ;

NUMBER : '0'..'9'+ ;

CORP:	'CORP' ;

WORD : ('a'..'z' | 'A'..'Z')+ ;

WS	:	(' ' | '\t') {$channel=HIDDEN;}
	;

OTHERCHAR
	:	.
	;
	

Cheers, Indhu 


-----Original Message-----
From: antlr-interest-bounces at antlr.org
[mailto:antlr-interest-bounces at antlr.org] On Behalf Of Glen Miller
Sent: Wednesday, June 03, 2009 7:44 PM
To: antlr-interest at antlr.org
Subject: [antlr-interest] Inconsistent Parse Results

When parsing the following data 
"2 CORP The Church of Jesus Christ of Latter-day Saints"

The parser is choking on Ch? and striping it out.

line 1:12 mismatched character 'h' expecting 'O'
line 1:28 mismatched character 'h' expecting 'O'
Data: Theurch of Jesusrist of Latter-day Saints

I am new to antlr, is my grammer wrong, or is it a bug?

Grammer -


grammar Test1 ;

test1 : NUMBER ' CORP ' data {System.out.println("Data: " +
$data.text);} ;

data : ~('\r' | '\n')* ;

NUMBER : '0'..'9'+ ;

OTHERCHAR : 
	'~' | 
	'!' | 
	'@' | 
	'#' | 
	'$' | 
	'%' | 
	'^' | 
	'&' | 
	'*' | 
	'(' | 
	')' | 
	'-' | 
	'_' | 
	'+' | 
	'=' | 
	'{' | 
	'}' | 
	'[' | 
	']' | 
	':' | 
	';' | 
	'<' | 
	'>' | 
	'?' | 
	',' | 
	'.' | 
	'/' | 
	' ' ;

WORD : ('a'..'z' | 'A'..'Z')+ ;


Test App -




import java.io.IOException;
import org.antlr.runtime.ANTLRFileStream;
import org.antlr.runtime.CommonTokenStream;
import org.antlr.runtime.RecognitionException;

public class TestApp
{
	public static void main(String[] inArgList)
	{
		try
		{
			ANTLRFileStream theFileStream = new
ANTLRFileStream("/home/glenmiller/tmp1/output/TestData2");
			Test1Lexer theLexer = new Test1Lexer(theFileStream);
			CommonTokenStream theTokenStream = new
CommonTokenStream(theLexer);
			Test1Parser theParser = new
Test1Parser(theTokenStream);
			theParser.test1();

		}
		catch (IOException inException)
		{
			inException.printStackTrace();
		}
		catch (RecognitionException inException)
		{
			inException.printStackTrace();
		}
	}
}




List: http://www.antlr.org/mailman/listinfo/antlr-interest
Unsubscribe:
http://www.antlr.org/mailman/options/antlr-interest/your-email-address


From jimi at temporal-wave.com  Wed Jun  3 08:24:06 2009
From: jimi at temporal-wave.com (Jim Idle)
Date: Wed, 03 Jun 2009 08:24:06 -0700
Subject: [antlr-interest] [C Target][3.1.3] Parser crashes when looking
 up a	scoped attribute outside of a scope context.
In-Reply-To: <4a80712f0906030753t731d76d9gf12e5dbe92c8417b@mail.gmail.com>
References: <4a80712f0906030753t731d76d9gf12e5dbe92c8417b@mail.gmail.com>
Message-ID: <4A269596.6060208@temporal-wave.com>

An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090603/116ab416/attachment.html 

From glenmiller at skyviewsoftware.com  Wed Jun  3 08:49:50 2009
From: glenmiller at skyviewsoftware.com (Glen Miller)
Date: Wed, 03 Jun 2009 09:49:50 -0600
Subject: [antlr-interest] Inconsistent Parse Results
In-Reply-To: <012301c9e45d$ec2be180$c483a480$@b@s7software.com>
References: <1244038432.7058.12.camel@stormsentry>
	<012301c9e45d$ec2be180$c483a480$@b@s7software.com>
Message-ID: <1244044190.7058.13.camel@stormsentry>

Thanks! that was it.

Glen

On Wed, 2009-06-03 at 20:43 +0530, Indhu Bharathi wrote:
> That is an expected behavior. Seeing ' C' the lexer decides to go for 'CORP'
> token instead of OTHER(space) and WORD. You need to do some left factoring
> there. Or you can modify your grammar to avoid such problems. Here is a
> suggested correction:
> 
> grammar Test ;
> 
> test1 : NUMBER CORP data {System.out.println("Data: " + $data.text);} ;
> 
> data : ~('\r' | '\n')* ;
> 
> NUMBER : '0'..'9'+ ;
> 
> CORP:	'CORP' ;
> 
> WORD : ('a'..'z' | 'A'..'Z')+ ;
> 
> WS	:	(' ' | '\t') {$channel=HIDDEN;}
> 	;
> 
> OTHERCHAR
> 	:	.
> 	;
> 	
> 
> Cheers, Indhu 
> 
> 
> -----Original Message-----
> From: antlr-interest-bounces at antlr.org
> [mailto:antlr-interest-bounces at antlr.org] On Behalf Of Glen Miller
> Sent: Wednesday, June 03, 2009 7:44 PM
> To: antlr-interest at antlr.org
> Subject: [antlr-interest] Inconsistent Parse Results
> 
> When parsing the following data 
> "2 CORP The Church of Jesus Christ of Latter-day Saints"
> 
> The parser is choking on Ch? and striping it out.
> 
> line 1:12 mismatched character 'h' expecting 'O'
> line 1:28 mismatched character 'h' expecting 'O'
> Data: Theurch of Jesusrist of Latter-day Saints
> 
> I am new to antlr, is my grammer wrong, or is it a bug?
> 
> Grammer -
> 
> 
> grammar Test1 ;
> 
> test1 : NUMBER ' CORP ' data {System.out.println("Data: " +
> $data.text);} ;
> 
> data : ~('\r' | '\n')* ;
> 
> NUMBER : '0'..'9'+ ;
> 
> OTHERCHAR : 
> 	'~' | 
> 	'!' | 
> 	'@' | 
> 	'#' | 
> 	'$' | 
> 	'%' | 
> 	'^' | 
> 	'&' | 
> 	'*' | 
> 	'(' | 
> 	')' | 
> 	'-' | 
> 	'_' | 
> 	'+' | 
> 	'=' | 
> 	'{' | 
> 	'}' | 
> 	'[' | 
> 	']' | 
> 	':' | 
> 	';' | 
> 	'<' | 
> 	'>' | 
> 	'?' | 
> 	',' | 
> 	'.' | 
> 	'/' | 
> 	' ' ;
> 
> WORD : ('a'..'z' | 'A'..'Z')+ ;
> 
> 
> Test App -
> 
> 
> 
> 
> import java.io.IOException;
> import org.antlr.runtime.ANTLRFileStream;
> import org.antlr.runtime.CommonTokenStream;
> import org.antlr.runtime.RecognitionException;
> 
> public class TestApp
> {
> 	public static void main(String[] inArgList)
> 	{
> 		try
> 		{
> 			ANTLRFileStream theFileStream = new
> ANTLRFileStream("/home/glenmiller/tmp1/output/TestData2");
> 			Test1Lexer theLexer = new Test1Lexer(theFileStream);
> 			CommonTokenStream theTokenStream = new
> CommonTokenStream(theLexer);
> 			Test1Parser theParser = new
> Test1Parser(theTokenStream);
> 			theParser.test1();
> 
> 		}
> 		catch (IOException inException)
> 		{
> 			inException.printStackTrace();
> 		}
> 		catch (RecognitionException inException)
> 		{
> 			inException.printStackTrace();
> 		}
> 	}
> }
> 
> 
> 
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address


From dave at tridecap.com  Wed Jun  3 08:53:10 2009
From: dave at tridecap.com (Dave Dutcher)
Date: Wed, 3 Jun 2009 10:53:10 -0500
Subject: [antlr-interest] Reverse Iterate over String Template
In-Reply-To: <6442c4ae0906022109p34d2aa4bnae96b5ffafbf20ea@mail.gmail.com>
References: <6442c4ae0906022109p34d2aa4bnae96b5ffafbf20ea@mail.gmail.com>
Message-ID: <9C445BC1903346FAA871955A93153D8A@tridecap.com>

I am new to string template too, but I don't think there is anyway to apply
a template to a multi valued attribute in reverse.  Its easy to work around
though, just reverse your data before you add it to the string template
object.  You can use Array.Reverse() for arrays and lists have a Reverse()
member to reverse their contents.  
 
There is a stringtemplate list too, which is probably a better place for
questions.
 
Dave
 


  _____  

From: antlr-interest-bounces at antlr.org
[mailto:antlr-interest-bounces at antlr.org] On Behalf Of Christian Schladetsch
Sent: Tuesday, June 02, 2009 11:10 PM
To: antlr-interest at antlr.org
Subject: [antlr-interest] Reverse Iterate over String Template


Hello,

Sorry if this is to the wrong list; but I know that the ST folks are here
too.

Is there a way to iterate over a string template in reverse order? If not,
can anyone point me to a work-around for C# target?

Thanks in advance,
Christian.



-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090603/3d19bf8c/attachment.html 

From parrt at cs.usfca.edu  Wed Jun  3 11:30:34 2009
From: parrt at cs.usfca.edu (Terence Parr)
Date: Wed, 3 Jun 2009 11:30:34 -0700
Subject: [antlr-interest] "Language design patterns" book available in beta
Message-ID: <C9B3CF23-3CEE-49E4-99CF-85BA90EFD504@cs.usfca.edu>

Well, it had to happen sometime...the new book is finally available in  
beta at pragmatic programmers website:

http://pragprog.com/titles/tpdsl/language-design-patterns

There are some excerpts you can take a look at to see what you get.  
Personally, I think the book is great! ;)

The basic deal is that new chapters will appear roughly every two  
weeks until it's in final form. I have three more chapters (or is it  
four?) to write.

For those of you registering for the workshop this weekend, you get a  
free copy of the beta book. :)

http://www.antlr.org/wiki/display/ANTLR3/ANTLR+Conference+2009

Please pass this announcement around :)

Regards,
Ter

From parrt at cs.usfca.edu  Wed Jun  3 11:34:29 2009
From: parrt at cs.usfca.edu (Terence Parr)
Date: Wed, 3 Jun 2009 11:34:29 -0700
Subject: [antlr-interest] Reverse Iterate over String Template
In-Reply-To: <9C445BC1903346FAA871955A93153D8A@tridecap.com>
References: <6442c4ae0906022109p34d2aa4bnae96b5ffafbf20ea@mail.gmail.com>
	<9C445BC1903346FAA871955A93153D8A@tridecap.com>
Message-ID: <8329D9D0-BE2A-460A-8E74-DE08C7AF20B2@cs.usfca.edu>

I could have sworn there was a reverse...crap. not there. adding to  
list for new version.
Ter

On Jun 3, 2009, at 8:53 AM, Dave Dutcher wrote:

> I am new to string template too, but I don't think there is anyway  
> to apply a template to a multi valued attribute in reverse.  Its  
> easy to work around though, just reverse your data before you add it  
> to the string template object.  You can use Array.Reverse() for  
> arrays and lists have a Reverse() member to reverse their contents.
>
> There is a stringtemplate list too, which is probably a better place  
> for questions.
>
> Dave
>
>
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-bounces at antlr.org 
> ] On Behalf Of Christian Schladetsch
> Sent: Tuesday, June 02, 2009 11:10 PM
> To: antlr-interest at antlr.org
> Subject: [antlr-interest] Reverse Iterate over String Template
>
> Hello,
>
> Sorry if this is to the wrong list; but I know that the ST folks are  
> here too.
>
> Is there a way to iterate over a string template in reverse order?  
> If not, can anyone point me to a work-around for C# target?
>
> Thanks in advance,
> Christian.
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address


From aprabha3 at telcordia.com  Wed Jun  3 12:36:59 2009
From: aprabha3 at telcordia.com (Prabhakaran, Asha)
Date: Wed, 3 Jun 2009 15:36:59 -0400
Subject: [antlr-interest] What are the limits?
In-Reply-To: <2418D3FEAF06B749A9846E1AB12EEEFA27E18E971B@rrc-dte-exmb2.dte.telcordia.com>
References: <2418D3FEAF06B749A9846E1AB12EEEFA27E18E971B@rrc-dte-exmb2.dte.telcordia.com>
Message-ID: <2418D3FEAF06B749A9846E1AB12EEEFA27E15031D1@rrc-dte-exmb2.dte.telcordia.com>



From: Prabhakaran, Asha
Sent: Wednesday, June 03, 2009 3:35 PM
To: 'antlr-interest at antlr.org'
Subject: What are the limits?

Hello,
I would like to know what the limits are with regard to parsing a file with a large number of entries (say 10,000) in one level and deep level of nesting.
-Asha
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090603/ed5b0d02/attachment.html 

From gwlist at grahamwideman.com  Wed Jun  3 13:37:23 2009
From: gwlist at grahamwideman.com (Graham Wideman)
Date: Wed, 03 Jun 2009 13:37:23 -0700
Subject: [antlr-interest] Reverse Iterate over String Template
Message-ID: <4.1.20090603133616.04c145b8@grahamwideman.com>

Hi Christian:

> Is there a way to iterate over a string template in reverse order?

Until Ter implements list reverse, you might try something like this to apply a template to a list in reverse order:

----------------------------------
maintemplate(arg1) ::= <<
<rev(arg1)>
>>

rev(argR) ::= <<
<usefultemplate(last(argR))>
<if(trunc(argR))>
<rev(trunc(argR))>
<endif>
>>

usefultemplate(argA) ::= <<
SomethingUseful: <argA>
>>
-----------------------------------

Basically, template rev() applies your useful template to the last() item in the list, and recurses on the remainder of the list, stopping when the list is empty.

-- Graham



From mats.ekberg at arcticgroup.se  Wed Jun  3 15:14:26 2009
From: mats.ekberg at arcticgroup.se (Mats Ekberg)
Date: Thu, 4 Jun 2009 00:14:26 +0200
Subject: [antlr-interest] Whats wrong with this?
References: <mailman.4312.1244064083.3218.antlr-interest@antlr.org>
Message-ID: <C2E3BB4A-F574-4484-925D-2B7B49E9FC00@arcticgroup.se>

> Hi!
>
> I cant figure out why this grammar dont work (I have left out some  
> not relevant stuff).
> This expression works:    [ LOOKUP( A1234567890, 9TN ) ] 93
> This dont:    [ LOOKUP( A1234567890, ATN ) ] 93
> Why?
>
>
>
> prog   	returns [NationalDutyExprHelper value] :
> 	item (item)* {$value = h;}
> 	;
>
> item   	returns [NationalDutyExprHelper value] :
> 	'[' expr ']' DUTYEXPR
> 	{ h.add(".'").add($DUTYEXPR.text + "'").add(">AMOUNT"); $value = h;}
> 	;
>
> expr
> 	@init { String s = null; }
> 	:
> 	multExpr (('+' {s = "+";} | '-'  {s = "-";} | PERCENT  {s = "* 0.01  
> *";}) multExpr { h.add(s);} )*
>    	;
>    	
> multExpr
> 	@init { String s = null; }
> 	:
>    	atom ( ('*' {s = "*";} | '/' {s = "/";} ) atom { h.add(s);} )*
>    	;
> lookup
> 	:
> 	lu='LOOKUP' '(' TABLEID ',' expr ')'
> 	{ h.addReference(ExtReference.Type.FUNCCALL,  
> $lu.text).addLiteral($TABLEID.text).add($lu.text); }
>    	;
>    	
> funcCall
> 	:
> 	EXTREF '(' expr (',' expr)* ')'
> 	{ h.addReference(ExtReference.Type.FUNCCALL,  
> $EXTREF.text).add($EXTREF.text); }
> 	;
> 	
> parenExpr
> 	:	
> 	'(' expr ')'
> 	;
>
> oneOfMeas
> 	:
> 	'ONE_OF(' me=MEAS
> 	{ h.addReference(ExtReference.Type.MEAS,  
> $me.text).addLiteral($me.text); }
> 	(',' me=MEAS { h.addReference(ExtReference.Type.MEAS,  
> $me.text).addLiteral($me.text); } )*
> 	')'
> 	{ h.add("MEASURE>"); }
> 	;
>
> variable
> 	:
> 	VARIABLE
> 	{ h.addReference(ExtReference.Type.VAR,  
> $VARIABLE.text).add($VARIABLE.text); }
> ;
>
> measure
> 	:
> 	me=MEAS!
> 	{ h.addReference(ExtReference.Type.MEAS, $me.text).add($me.text); }
> ;
> 	
> atom	
> 	:
> 	meu=UNITQ	
> 	{ h.addReference(ExtReference.Type.MEAS_UNIT,  
> $meu.text).add($meu.text); }
> 	|
> 	meu=UNIT	
> 	{ h.addReference(ExtReference.Type.MEAS_UNIT,  
> $meu.text).add($meu.text); }
> 	|
> 	n=NUMBER { h.add($n.text); }
> 	|
> 	lookup
> 	|
> 	funcCall
> 	|
> 	variable
> 	|
> 	oneOfMeas
> 	|
> 	measure
> 	|
> 	parenExpr
> ;	
>
>
> 	
> VARIABLE:	'$' UCLETTER (ALPHANUM|USCORE)* ;	
> EXTREF:		'@' UCLETTER (ALPHANUM|USCORE)* ;	
> DUTYEXPR:	DIGIT DIGIT;
> ID:	LCLETTER (LCLETTER | DIGIT)+ ;
> MEAS:		'&' ALPHANUM ALPHANUM ALPHANUM ALPHANUM;	
> TABLEID	:	UCLETTER (ALPHANUM)* ;
> WS  :   (' '|'\t')+ {skip();} ;
> fragment DIGIT:		'0'..'9';
> fragment UCLETTER:	'A'..'Z';
> fragment LCLETTER:	'a'..'z';
> fragment USCORE:	'_';
> fragment CHAR:	UCLETTER | LCLETTER | DIGIT;
> fragment ALPHANUM:	DIGIT | UCLETTER;
> UNIT	: ALPHANUM ALPHANUM ALPHANUM
> 	;
> UNITQ	: ALPHANUM ALPHANUM ALPHANUM '#' ALPHANUM
> 	;
> PERCENT:	'%' (' ')* 'OF';	
> NUMBER	:	DIGIT+ '.' (DIGIT)* ;
>



-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090604/181ad7af/attachment.html 

From jsrs701 at yahoo.com  Wed Jun  3 15:47:24 2009
From: jsrs701 at yahoo.com (J. Stephen Riley Silber)
Date: Wed, 3 Jun 2009 15:47:24 -0700 (PDT)
Subject: [antlr-interest] "Language design patterns" book available in
	beta
Message-ID: <747478.45324.qm@web33305.mail.mud.yahoo.com>

Whoo!? I just downloaded my beta!? (Don't spend all that royalty money in one place!)? I'm very excited about this book.? Congratulations, Ter, and thanks!

--S

--- On Wed, 6/3/09, Terence Parr <parrt at cs.usfca.edu> wrote:

From: Terence Parr <parrt at cs.usfca.edu>
Subject: [antlr-interest] "Language design patterns" book available in beta
To: "antlr ANTLR" <antlr-interest at antlr.org>, "String Template Mailing LIst" <stringtemplate-interest at antlr.org>
Date: Wednesday, June 3, 2009, 11:30 AM

Well, it had to happen sometime...the new book is finally available in? 
beta at pragmatic programmers website:

http://pragprog.com/titles/tpdsl/language-design-patterns

There are some excerpts you can take a look at to see what you get.? 
Personally, I think the book is great! ;)

The basic deal is that new chapters will appear roughly every two? 
weeks until it's in final form. I have three more chapters (or is it? 
four?) to write.

For those of you registering for the workshop this weekend, you get a? 
free copy of the beta book. :)

http://www.antlr.org/wiki/display/ANTLR3/ANTLR+Conference+2009

Please pass this announcement around :)

Regards,
Ter

List: http://www.antlr.org/mailman/listinfo/antlr-interest
Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090603/2ca276eb/attachment.html 

From parrt at cs.usfca.edu  Wed Jun  3 15:49:16 2009
From: parrt at cs.usfca.edu (Terence Parr)
Date: Wed, 3 Jun 2009 15:49:16 -0700
Subject: [antlr-interest] "Language design patterns" book available in
	beta
In-Reply-To: <747478.45324.qm@web33305.mail.mud.yahoo.com>
References: <747478.45324.qm@web33305.mail.mud.yahoo.com>
Message-ID: <999A460F-9CB6-4114-B1E3-0E4AC09AB923@cs.usfca.edu>


On Jun 3, 2009, at 3:47 PM, J. Stephen Riley Silber wrote:

> Whoo!  I just downloaded my beta!  (Don't spend all that royalty  
> money in one place!)  I'm very excited about this book.   
> Congratulations, Ter, and thanks!

Well, let's see if you're still excited after you read what I have so  
far ;)

I'm almost done with one of the interpreter chapters. super good  
stuff...it'll be the next chapter that pops out in two weeks or so.

Ter

From micha-1 at fantasymail.de  Wed Jun  3 16:34:41 2009
From: micha-1 at fantasymail.de (Micha)
Date: Thu, 4 Jun 2009 01:34:41 +0200
Subject: [antlr-interest] Whats wrong with this?
In-Reply-To: <C2E3BB4A-F574-4484-925D-2B7B49E9FC00@arcticgroup.se>
References: <mailman.4312.1244064083.3218.antlr-interest@antlr.org>
	<C2E3BB4A-F574-4484-925D-2B7B49E9FC00@arcticgroup.se>
Message-ID: <200906040134.41809.micha-1@fantasymail.de>

On Thursday 04 June 2009 00:14:26 Mats Ekberg wrote:
> > Hi!
> >
> > I cant figure out why this grammar dont work (I have left out some  
> > not relevant stuff).
> > This expression works:    [ LOOKUP( A1234567890, 9TN ) ] 93

I think the lexer sees for "9TN" a UNIT here

> > This dont:    [ LOOKUP( A1234567890, ATN ) ] 93

and here for "ATN" a TABLEID (that's the first rule that matches) which  causes an error

 Michael

From jbb at acm.org  Wed Jun  3 16:46:21 2009
From: jbb at acm.org (John B. Brodie)
Date: Wed, 3 Jun 2009 19:46:21 -0400
Subject: [antlr-interest] Whats wrong with this?
In-Reply-To: <C2E3BB4A-F574-4484-925D-2B7B49E9FC00@arcticgroup.se>
References: <mailman.4312.1244064083.3218.antlr-interest@antlr.org>
	<C2E3BB4A-F574-4484-925D-2B7B49E9FC00@arcticgroup.se>
Message-ID: <200906031946.22017.jbb@acm.org>

Greetings!
On Wednesday 03 June 2009 06:14:26 pm Mats Ekberg wrote:
> I cant figure out why this grammar dont work (I have left out some
> not relevant stuff).
> This expression works:    [ LOOKUP( A1234567890, 9TN ) ] 93
> This dont:    [ LOOKUP( A1234567890, ATN ) ] 93
> Why?

Your lexer rules for TABLEID and UNIT overlap so I believe that the
lexer considers the "ATN" string in the second, non-working,
sentence to be a 3 letter TABLEID rather than a UNIT.

And of course your parser gets confused by seeing another TABLEID
after the first on in a LOOKUP construct.


> TABLEID	:	UCLETTER (ALPHANUM)* ;

> fragment DIGIT:		'0'..'9';
> fragment UCLETTER:	'A'..'Z';
> fragment LCLETTER:	'a'..'z';
> fragment USCORE:	'_';
> fragment CHAR:	UCLETTER | LCLETTER | DIGIT;
> fragment ALPHANUM:	DIGIT | UCLETTER;
> UNIT	: ALPHANUM ALPHANUM ALPHANUM


Remember that you lexer operates independently from the parser.

Your lexer has no knowledge of what your parser is trying to recognize.

maybe you could remove your lexer rule for UNIT, using TABLEID in
your parser instead and then add a semantic error checking actions
to ensure that those TABLEIDs (which are supposed to be UNITs)
are exactly 3 characters long.

Hope this helps.
------
  -jbb


From brothers at bros.com  Wed Jun  3 17:03:16 2009
From: brothers at bros.com (Dennis Brothers)
Date: Wed, 3 Jun 2009 20:03:16 -0400
Subject: [antlr-interest] "Language design patterns" book available in
	beta
In-Reply-To: <999A460F-9CB6-4114-B1E3-0E4AC09AB923@cs.usfca.edu>
References: <747478.45324.qm@web33305.mail.mud.yahoo.com>
	<999A460F-9CB6-4114-B1E3-0E4AC09AB923@cs.usfca.edu>
Message-ID: <91831753-7014-4190-B351-B1C17FBC6790@bros.com>

Your publisher's email beat you to the punch by a few hours - I pre- 
ordered the book and bought the beta download before you posted to the  
list.  Reading it now on my Kindle.

     - Dennis Brothers

On Jun 3, 2009, at 6:49 PM, Terence Parr wrote:

>
> On Jun 3, 2009, at 3:47 PM, J. Stephen Riley Silber wrote:
>
>> Whoo!  I just downloaded my beta!  (Don't spend all that royalty
>> money in one place!)  I'm very excited about this book.
>> Congratulations, Ter, and thanks!
>
> Well, let's see if you're still excited after you read what I have so
> far ;)
>
> I'm almost done with one of the interpreter chapters. super good
> stuff...it'll be the next chapter that pops out in two weeks or so.
>
> Ter
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>


From parrt at cs.usfca.edu  Wed Jun  3 17:05:53 2009
From: parrt at cs.usfca.edu (Terence Parr)
Date: Wed, 3 Jun 2009 17:05:53 -0700
Subject: [antlr-interest] "Language design patterns" book available in
	beta
In-Reply-To: <91831753-7014-4190-B351-B1C17FBC6790@bros.com>
References: <747478.45324.qm@web33305.mail.mud.yahoo.com>
	<999A460F-9CB6-4114-B1E3-0E4AC09AB923@cs.usfca.edu>
	<91831753-7014-4190-B351-B1C17FBC6790@bros.com>
Message-ID: <1903F5F6-7FBB-4E96-8D31-F259DE7F0255@cs.usfca.edu>


On Jun 3, 2009, at 5:03 PM, Dennis Brothers wrote:

> Your publisher's email beat you to the punch by a few hours - I pre-
> ordered the book and bought the beta download before you posted to the
> list.  Reading it now on my Kindle.

wow!  Howz the kindle ebook version look?
Ter

From brothers at bros.com  Wed Jun  3 17:18:09 2009
From: brothers at bros.com (Dennis Brothers)
Date: Wed, 3 Jun 2009 20:18:09 -0400
Subject: [antlr-interest] "Language design patterns" book available in
	beta
In-Reply-To: <1903F5F6-7FBB-4E96-8D31-F259DE7F0255@cs.usfca.edu>
References: <747478.45324.qm@web33305.mail.mud.yahoo.com>
	<999A460F-9CB6-4114-B1E3-0E4AC09AB923@cs.usfca.edu>
	<91831753-7014-4190-B351-B1C17FBC6790@bros.com>
	<1903F5F6-7FBB-4E96-8D31-F259DE7F0255@cs.usfca.edu>
Message-ID: <60CE1532-57B0-4634-A840-CC946E8243F9@bros.com>


On Jun 3, 2009, at 8:05 PM, Terence Parr wrote:

>
> On Jun 3, 2009, at 5:03 PM, Dennis Brothers wrote:
>
>> Your publisher's email beat you to the punch by a few hours - I pre-
>> ordered the book and bought the beta download before you posted to  
>> the
>> list.  Reading it now on my Kindle.
>
> wow!  Howz the kindle ebook version look?
> Ter
>

Looks good, so far - I haven't hit any diagrams or tables yet (I'm  
barely into it - been a busy day - a not inconsiderable part of it  
working with ANTLR).  Those are often problematic in technical books  
on the Kindle.

     - Dennis


From rschulz at sonic.net  Wed Jun  3 17:25:46 2009
From: rschulz at sonic.net (Randall R Schulz)
Date: Wed, 3 Jun 2009 17:25:46 -0700
Subject: [antlr-interest] "Language design patterns" book available in
	beta
In-Reply-To: <91831753-7014-4190-B351-B1C17FBC6790@bros.com>
References: <747478.45324.qm@web33305.mail.mud.yahoo.com>
	<999A460F-9CB6-4114-B1E3-0E4AC09AB923@cs.usfca.edu>
	<91831753-7014-4190-B351-B1C17FBC6790@bros.com>
Message-ID: <200906031725.46399.rschulz@sonic.net>

On Wednesday June 3 2009, Dennis Brothers wrote:
> Your publisher's email beat you to the punch by a few hours - I pre-
> ordered the book and bought the beta download before you posted to
> the list.  Reading it now on my Kindle.

Do they publish a Kindle-specific version? Or can PDFs be read on the 
Kindle?


>      - Dennis Brothers


Randall Schulz

From parrt at cs.usfca.edu  Wed Jun  3 17:39:09 2009
From: parrt at cs.usfca.edu (Terence Parr)
Date: Wed, 3 Jun 2009 17:39:09 -0700
Subject: [antlr-interest] "Language design patterns" book available in
	beta
In-Reply-To: <200906031725.46399.rschulz@sonic.net>
References: <747478.45324.qm@web33305.mail.mud.yahoo.com>
	<999A460F-9CB6-4114-B1E3-0E4AC09AB923@cs.usfca.edu>
	<91831753-7014-4190-B351-B1C17FBC6790@bros.com>
	<200906031725.46399.rschulz@sonic.net>
Message-ID: <7FEC6D36-5B31-4E84-A5DF-15B8EC44D2E1@cs.usfca.edu>

  they have lots of different versions:

Buy the eBook and get these DRM-free formats:
	? epub (for iPhone, Sony, etc)
	? mobi (for Kindle, etc)
	? PDF

Plus of course the physical book when it's through production.

Ter

On Jun 3, 2009, at 5:25 PM, Randall R Schulz wrote:

> On Wednesday June 3 2009, Dennis Brothers wrote:
>> Your publisher's email beat you to the punch by a few hours - I pre-
>> ordered the book and bought the beta download before you posted to
>> the list.  Reading it now on my Kindle.
>
> Do they publish a Kindle-specific version? Or can PDFs be read on the
> Kindle?
>
>
>>     - Dennis Brothers
>
>
> Randall Schulz
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address


From brothers at bros.com  Wed Jun  3 17:49:51 2009
From: brothers at bros.com (Dennis Brothers)
Date: Wed, 3 Jun 2009 20:49:51 -0400
Subject: [antlr-interest] "Language design patterns" book available in
	beta
In-Reply-To: <200906031725.46399.rschulz@sonic.net>
References: <747478.45324.qm@web33305.mail.mud.yahoo.com>
	<999A460F-9CB6-4114-B1E3-0E4AC09AB923@cs.usfca.edu>
	<91831753-7014-4190-B351-B1C17FBC6790@bros.com>
	<200906031725.46399.rschulz@sonic.net>
Message-ID: <1412B1A7-3DD6-42F2-AA18-131BB5BD6A4A@bros.com>


On Jun 3, 2009, at 8:25 PM, Randall R Schulz wrote:

> On Wednesday June 3 2009, Dennis Brothers wrote:
>> Your publisher's email beat you to the punch by a few hours - I pre-
>> ordered the book and bought the beta download before you posted to
>> the list.  Reading it now on my Kindle.
>
> Do they publish a Kindle-specific version? Or can PDFs be read on the
> Kindle?
>
>
>>     - Dennis Brothers
>
>
> Randall Schulz
>

The Kindle "native" format is actually Mobi (one of the available  
downloads from Pragmatic).  Change the extension to .azw, and the  
Kindle is happy with it.

     - Dennis


From rschulz at sonic.net  Wed Jun  3 17:57:10 2009
From: rschulz at sonic.net (Randall R Schulz)
Date: Wed, 3 Jun 2009 17:57:10 -0700
Subject: [antlr-interest] "Language design patterns" book available in
	beta
In-Reply-To: <1412B1A7-3DD6-42F2-AA18-131BB5BD6A4A@bros.com>
References: <747478.45324.qm@web33305.mail.mud.yahoo.com>
	<200906031725.46399.rschulz@sonic.net>
	<1412B1A7-3DD6-42F2-AA18-131BB5BD6A4A@bros.com>
Message-ID: <200906031757.10348.rschulz@sonic.net>

On Wednesday June 3 2009, Dennis Brothers wrote:
> On Jun 3, 2009, at 8:25 PM, Randall R Schulz wrote:
> > On Wednesday June 3 2009, Dennis Brothers wrote:
> >> Your publisher's email beat you to the punch by a few hours - I
> >> pre- ordered the book and bought the beta download before you
> >> posted to the list.  Reading it now on my Kindle.
> >
> > Do they publish a Kindle-specific version? Or can PDFs be read on
> > the Kindle?
> >
> >>     - Dennis Brothers
> >
> > Randall Schulz
>
> The Kindle "native" format is actually Mobi (one of the available
> downloads from Pragmatic).  Change the extension to .azw, and the
> Kindle is happy with it.

Cool. Got a spare Kindle?


>      - Dennis


RRS

From r.mark.volkmann at gmail.com  Wed Jun  3 18:15:49 2009
From: r.mark.volkmann at gmail.com (Mark Volkmann)
Date: Wed, 3 Jun 2009 20:15:49 -0500
Subject: [antlr-interest] "Language design patterns" book available in
	beta
In-Reply-To: <60CE1532-57B0-4634-A840-CC946E8243F9@bros.com>
References: <747478.45324.qm@web33305.mail.mud.yahoo.com>
	<999A460F-9CB6-4114-B1E3-0E4AC09AB923@cs.usfca.edu>
	<91831753-7014-4190-B351-B1C17FBC6790@bros.com>
	<1903F5F6-7FBB-4E96-8D31-F259DE7F0255@cs.usfca.edu>
	<60CE1532-57B0-4634-A840-CC946E8243F9@bros.com>
Message-ID: <f0fcc6820906031815j7fe8fdas54a32f39f735d142@mail.gmail.com>

On Wed, Jun 3, 2009 at 7:18 PM, Dennis Brothers <brothers at bros.com> wrote:
>
> On Jun 3, 2009, at 8:05 PM, Terence Parr wrote:
>
>>
>> On Jun 3, 2009, at 5:03 PM, Dennis Brothers wrote:
>>
>>> Your publisher's email beat you to the punch by a few hours - I pre-
>>> ordered the book and bought the beta download before you posted to
>>> the
>>> list. ?Reading it now on my Kindle.
>>
>> wow! ?Howz the kindle ebook version look?
>> Ter
>
> Looks good, so far - I haven't hit any diagrams or tables yet (I'm
> barely into it - been a busy day - a not inconsiderable part of it
> working with ANTLR). ?Those are often problematic in technical books
> on the Kindle.

I've read a few Pragmatic Programmer books on the Kindle. Dave Thomas
has done a wonderful job with handling tables and code examples!
Conversion from PDF to mobi often doesn't work well, but Dave
implemented a custom conversion that produces really good results. If
you select a code example, the Kindle rotates the code 90 degrees and
zooms in to fill the screen with the code. Very nice!

-- 
R. Mark Volkmann
Object Computing, Inc.

From michael.bedward at gmail.com  Wed Jun  3 18:31:16 2009
From: michael.bedward at gmail.com (Michael Bedward)
Date: Thu, 4 Jun 2009 11:31:16 +1000
Subject: [antlr-interest] "Language design patterns" book available in
	beta
In-Reply-To: <f0fcc6820906031815j7fe8fdas54a32f39f735d142@mail.gmail.com>
References: <747478.45324.qm@web33305.mail.mud.yahoo.com>
	<999A460F-9CB6-4114-B1E3-0E4AC09AB923@cs.usfca.edu>
	<91831753-7014-4190-B351-B1C17FBC6790@bros.com>
	<1903F5F6-7FBB-4E96-8D31-F259DE7F0255@cs.usfca.edu>
	<60CE1532-57B0-4634-A840-CC946E8243F9@bros.com>
	<f0fcc6820906031815j7fe8fdas54a32f39f735d142@mail.gmail.com>
Message-ID: <e24c4c270906031831t577dfd35s409f5c05d0b4edda@mail.gmail.com>

I got the pragprog email late last night (local time) and had the beta
book about a minute later :-)

I've been looking forward to this for months !

Michael

From rschulz at sonic.net  Wed Jun  3 18:35:14 2009
From: rschulz at sonic.net (Randall R Schulz)
Date: Wed, 3 Jun 2009 18:35:14 -0700
Subject: [antlr-interest] "Language design patterns" book available in
	beta
In-Reply-To: <f0fcc6820906031815j7fe8fdas54a32f39f735d142@mail.gmail.com>
References: <747478.45324.qm@web33305.mail.mud.yahoo.com>
	<60CE1532-57B0-4634-A840-CC946E8243F9@bros.com>
	<f0fcc6820906031815j7fe8fdas54a32f39f735d142@mail.gmail.com>
Message-ID: <200906031835.14547.rschulz@sonic.net>

On Wednesday June 3 2009, Mark Volkmann wrote:
> ...
>
> I've read a few Pragmatic Programmer books on the Kindle. Dave Thomas
> has done a wonderful job with handling tables and code examples!
> Conversion from PDF to mobi often doesn't work well, but Dave
> implemented a custom conversion that produces really good results. If
> you select a code example, the Kindle rotates the code 90 degrees and
> zooms in to fill the screen with the code. Very nice!

Are Pragmatic Programmer's Kindle (mobi) releases DRM-protected?
Or just imprinted with the purchasers name, the way their PDFs are?


Randall Schulz

From brothers at bros.com  Wed Jun  3 18:36:13 2009
From: brothers at bros.com (Dennis Brothers)
Date: Wed, 3 Jun 2009 21:36:13 -0400
Subject: [antlr-interest] "Language design patterns" book available in
	beta
In-Reply-To: <200906031757.10348.rschulz@sonic.net>
References: <747478.45324.qm@web33305.mail.mud.yahoo.com>
	<200906031725.46399.rschulz@sonic.net>
	<1412B1A7-3DD6-42F2-AA18-131BB5BD6A4A@bros.com>
	<200906031757.10348.rschulz@sonic.net>
Message-ID: <87D1C82C-8FF2-407B-AE61-34C7B153F0AC@bros.com>


On Jun 3, 2009, at 8:57 PM, Randall R Schulz wrote:

> On Wednesday June 3 2009, Dennis Brothers wrote:
>> On Jun 3, 2009, at 8:25 PM, Randall R Schulz wrote:
>>> On Wednesday June 3 2009, Dennis Brothers wrote:
>>>> Your publisher's email beat you to the punch by a few hours - I
>>>> pre- ordered the book and bought the beta download before you
>>>> posted to the list.  Reading it now on my Kindle.
>>>
>>> Do they publish a Kindle-specific version? Or can PDFs be read on
>>> the Kindle?
>>>
>>>>    - Dennis Brothers
>>>
>>> Randall Schulz
>>
>> The Kindle "native" format is actually Mobi (one of the available
>> downloads from Pragmatic).  Change the extension to .azw, and the
>> Kindle is happy with it.
>
> Cool. Got a spare Kindle?
>
Yeah, but you'll have to pry it out of my eleven-year-old  
granddaughter's cold, dead hands :)

I bought a Kindle the day after it was announced, then upgraded to the  
Kindle 2 when it was announced (there were enough new features,  
particularly in image handling, that I considered it worthwhile).  I  
"lent" my old Kindle to my granddaughter.  I doubt I'll ever get it  
back.

To keep this somewhat on topic, I find the Kindle very useful for  
carrying around tons of technical documentation.

Even more on topic, I've got Ter's first book on it, and the Kindle's  
search facility makes up for the inadequacies of the index in the dead- 
tree version (sorry, Ter, but it's true).  Also, Pragmatic just told  
me that there was an updated version, which I downloaded (it was  
free).  No "release notes"; I guess it's just errata corrections.

Updates and betas on _books_?  We're not in Kansas anymore, Toto.

     - Dennis


From parrt at cs.usfca.edu  Wed Jun  3 18:38:48 2009
From: parrt at cs.usfca.edu (Terence Parr)
Date: Wed, 3 Jun 2009 18:38:48 -0700
Subject: [antlr-interest] "Language design patterns" book available in
	beta
In-Reply-To: <200906031835.14547.rschulz@sonic.net>
References: <747478.45324.qm@web33305.mail.mud.yahoo.com>
	<60CE1532-57B0-4634-A840-CC946E8243F9@bros.com>
	<f0fcc6820906031815j7fe8fdas54a32f39f735d142@mail.gmail.com>
	<200906031835.14547.rschulz@sonic.net>
Message-ID: <3A8F7B55-21AC-4F4D-96A6-D4D4B6315580@cs.usfca.edu>

DRM free.
Ter
On Jun 3, 2009, at 6:35 PM, Randall R Schulz wrote:

> On Wednesday June 3 2009, Mark Volkmann wrote:
>> ...
>>
>> I've read a few Pragmatic Programmer books on the Kindle. Dave Thomas
>> has done a wonderful job with handling tables and code examples!
>> Conversion from PDF to mobi often doesn't work well, but Dave
>> implemented a custom conversion that produces really good results. If
>> you select a code example, the Kindle rotates the code 90 degrees and
>> zooms in to fill the screen with the code. Very nice!
>
> Are Pragmatic Programmer's Kindle (mobi) releases DRM-protected?
> Or just imprinted with the purchasers name, the way their PDFs are?
>
>
> Randall Schulz
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address


From pcc482719 at gmail.com  Wed Jun  3 19:22:12 2009
From: pcc482719 at gmail.com (Peter C. Chapin)
Date: Wed, 3 Jun 2009 22:22:12 -0400
Subject: [antlr-interest] ocaml target?
In-Reply-To: <86403CA0939415448BCCB83855EFE09AA681F4@Bloodymary.ironwillgames.com>
References: <20090602165812.GA6814@spicetrader>
	<86403CA0939415448BCCB83855EFE09AA681F4@Bloodymary.ironwillgames.com>
Message-ID: <Pine.CYG.4.58.0906032221040.2900@WHIRLWIND>


On Tue, 2 Jun 2009, Sam Harwell wrote:

> I pondered the idea of an F# target a while back, but I quickly realized
> I was in over my head. For academic reasons I'd be very interested in
> the result if you do build an ocaml target. :)

I wonder if F# could use an OCaml target. I imagine with a little care it
might be possible. So an OCaml target could serve both the Ocaml and F#
communities. That would be cool.

Peter

From ugo.landini at gmail.com  Wed Jun  3 21:49:06 2009
From: ugo.landini at gmail.com (ugol)
Date: Thu, 4 Jun 2009 06:49:06 +0200
Subject: [antlr-interest] "Language design patterns" book available in
	beta
In-Reply-To: <C9B3CF23-3CEE-49E4-99CF-85BA90EFD504@cs.usfca.edu>
References: <C9B3CF23-3CEE-49E4-99CF-85BA90EFD504@cs.usfca.edu>
Message-ID: <b70c55390906032149m508afc71ycda83aad99ce05a4@mail.gmail.com>

On Wed, Jun 3, 2009 at 8:30 PM, Terence Parr <parrt at cs.usfca.edu> wrote:
> Well, it had to happen sometime...the new book is finally available in
> beta at pragmatic programmers website:


got it!


<... skimming trough ....>


aaarghh!!! where is the llvm stuff?!?!? :)

-- 
uL

Pragmatist
http://blog.ugolandini.com
http://www.flickr.com/photos/ugol/

From liviu.u at gmail.com  Thu Jun  4 02:45:43 2009
From: liviu.u at gmail.com (Liviu U)
Date: Thu, 4 Jun 2009 12:45:43 +0300
Subject: [antlr-interest] How to force ANTLR 3.1.2 to raise exceptions on
	invalid tokens?
Message-ID: <c522653d0906040245i18ef290fn6e90b3a959a21137@mail.gmail.com>

I notices something strange in 3.1.2

If i have a rule:  var x = int; and another that matches: if cond then
statements end

for a script:

if var x=3 ....

ANTLR ignores the if and parses an assignment. This is not what i
expect. I need to have an error raised.

Is there a way to configure the behaviour i expect? I remember that in
older versions the behavior of the parser was different...

From liviu.u at gmail.com  Thu Jun  4 03:13:29 2009
From: liviu.u at gmail.com (Liviu U)
Date: Thu, 4 Jun 2009 13:13:29 +0300
Subject: [antlr-interest] How to force ANTLR 3.1.2 to raise exceptions
	on invalid tokens?
In-Reply-To: <c522653d0906040245i18ef290fn6e90b3a959a21137@mail.gmail.com>
References: <c522653d0906040245i18ef290fn6e90b3a959a21137@mail.gmail.com>
Message-ID: <c522653d0906040313n2c8bd5f9v574292a8cdbf375c@mail.gmail.com>

I found something on ANTLR wiki, to override netxtToken

but still the 1 number on first line does not raise an exception while
if there are two numbers it does:

--NO ERROR although it should have been
if ( x.Age = 10) 1
then
  alert(x.Age);
  alert(true);
else
  alert(false);
end

-- ERROR:
if ( x.Age = 10) 1 2
then
  alert(x.Age);
  alert(true);
else
  alert(false);
end





On Thu, Jun 4, 2009 at 12:45 PM, Liviu U <liviu.u at gmail.com> wrote:
> I notices something strange in 3.1.2
>
> If i have a rule: ?var x = int; and another that matches: if cond then
> statements end
>
> for a script:
>
> if var x=3 ....
>
> ANTLR ignores the if and parses an assignment. This is not what i
> expect. I need to have an error raised.
>
> Is there a way to configure the behaviour i expect? I remember that in
> older versions the behavior of the parser was different...
>

From michael at pasdziernik.net  Thu Jun  4 03:17:29 2009
From: michael at pasdziernik.net (Michael Pasdziernik)
Date: Thu, 4 Jun 2009 12:17:29 +0200
Subject: [antlr-interest] AntlrWorks export to dot files
Message-ID: <200906041217.29752.michael@pasdziernik.net>

Hi AntlrWorks Users,
I have a problem exporting decision dfas for inclusion into latex.
With bmp and eps formats, fonts are not really scaleble and the export does not look very nice.

Exports to dot looks very good, but there simple lines instead of lines with arrows in the decision dfas. This is not too bad in general, but for cyclic dfas it is.

Is this known? Are there workarounds available?

Thanks
Michael

From indhu.b at s7software.com  Thu Jun  4 03:26:58 2009
From: indhu.b at s7software.com (Indhu Bharathi)
Date: Thu, 4 Jun 2009 15:56:58 +0530
Subject: [antlr-interest] How to force ANTLR 3.1.2 to raise
	exceptions	on invalid tokens?
In-Reply-To: <c522653d0906040313n2c8bd5f9v574292a8cdbf375c@mail.gmail.com>
References: <c522653d0906040245i18ef290fn6e90b3a959a21137@mail.gmail.com>
	<c522653d0906040313n2c8bd5f9v574292a8cdbf375c@mail.gmail.com>
Message-ID: <008f01c9e4fe$fd9b0170$f8d10450$@b@s7software.com>

By default error recovery is turned on and ANTLR will try to recover from
syntax errors. However it will print error message on stderr. 

If you need error recovery to be turned off and throw an exception at the
first sight of an error, you need to override 'recoverFromMismatchedToken'
as shown in
http://www.antlr.org/wiki/display/ANTLR3/Error+reporting+and+recovery

Cheers, Indhu


-----Original Message-----
From: antlr-interest-bounces at antlr.org
[mailto:antlr-interest-bounces at antlr.org] On Behalf Of Liviu U
Sent: Thursday, June 04, 2009 3:43 PM
To: antlr-interest at antlr.org
Subject: Re: [antlr-interest] How to force ANTLR 3.1.2 to raise exceptions
on invalid tokens?

I found something on ANTLR wiki, to override netxtToken

but still the 1 number on first line does not raise an exception while
if there are two numbers it does:

--NO ERROR although it should have been
if ( x.Age = 10) 1
then
  alert(x.Age);
  alert(true);
else
  alert(false);
end

-- ERROR:
if ( x.Age = 10) 1 2
then
  alert(x.Age);
  alert(true);
else
  alert(false);
end





On Thu, Jun 4, 2009 at 12:45 PM, Liviu U <liviu.u at gmail.com> wrote:
> I notices something strange in 3.1.2
>
> If i have a rule: ?var x = int; and another that matches: if cond then
> statements end
>
> for a script:
>
> if var x=3 ....
>
> ANTLR ignores the if and parses an assignment. This is not what i
> expect. I need to have an error raised.
>
> Is there a way to configure the behaviour i expect? I remember that in
> older versions the behavior of the parser was different...
>

List: http://www.antlr.org/mailman/listinfo/antlr-interest
Unsubscribe:
http://www.antlr.org/mailman/options/antlr-interest/your-email-address


From michael at pasdziernik.net  Thu Jun  4 03:46:10 2009
From: michael at pasdziernik.net (Michael Pasdziernik)
Date: Thu, 4 Jun 2009 12:46:10 +0200
Subject: [antlr-interest] AntlrWorks export to dot files
In-Reply-To: <200906041217.29752.michael@pasdziernik.net>
References: <200906041217.29752.michael@pasdziernik.net>
Message-ID: <200906041246.10891.michael@pasdziernik.net>

Hi,
Ok, dot is a simple text file. Replacing "arrowhead = none" with "arrowhead = normal"
solves the Problem.
Regards
Michael


On Thursday 04 June 2009 12:17:29 Michael Pasdziernik wrote:
> Hi AntlrWorks Users,
> I have a problem exporting decision dfas for inclusion into latex.
> With bmp and eps formats, fonts are not really scaleble and the export does not look very nice.
> 
> Exports to dot looks very good, but there simple lines instead of lines with arrows in the decision dfas. This is not too bad in general, but for cyclic dfas it is.
> 
> Is this known? Are there workarounds available?
> 
> Thanks
> Michael
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
> 

From jimi at temporal-wave.com  Thu Jun  4 08:34:54 2009
From: jimi at temporal-wave.com (Jim Idle)
Date: Thu, 04 Jun 2009 08:34:54 -0700
Subject: [antlr-interest] How to force ANTLR 3.1.2 to raise exceptions
 on	invalid tokens?
In-Reply-To: <c522653d0906040245i18ef290fn6e90b3a959a21137@mail.gmail.com>
References: <c522653d0906040245i18ef290fn6e90b3a959a21137@mail.gmail.com>
Message-ID: <4A27E99E.8010500@temporal-wave.com>

Liviu U wrote:
> I notices something strange in 3.1.2
>
> If i have a rule:  var x = int; and another that matches: if cond then
> statements end
>
> for a script:
>
> if var x=3 ....
>
> ANTLR ignores the if and parses an assignment. This is not what i
> expect. I need to have an error raised.
>
> Is there a way to configure the behaviour i expect? I remember that in
> older versions the behavior of the parser was different...
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>   
You should use 3.1.3 really, but this sounds more like something has 
changed/gone awry with your grammar. If you are not getting an error on 
the if (as in extraneous "'if" at ....), then there must be a path from 
if to assignment/declarations. I don't think that anyone can help 
without you posting your grammar as there is not enough information 
here; both 3.1.2 and 3.1.3 will raise errors.

However, perhaps you mean that you are getting the extraneous token 
message but are not getting an exception. If you do, then this is 
expected behavior as ANTLR recovers from that error so gives you the 
call to display the error, but does not raise an exception. If you look 
at the comments in the source code for the recovery routines, they tell 
you how to get the old behavior, where you would get an exception and 
ANTLR will not try to work out if you have an extra or missing token. If 
you are getting this, then likely your statement lists are not including 
the if statement and therefor ANTLR views it as extraneous, skips it, 
and then, seeing that var is in the followset, resyncs to that, which is 
the declaration/assignment rule in your parser.

Jim

From jimi at temporal-wave.com  Thu Jun  4 08:38:31 2009
From: jimi at temporal-wave.com (Jim Idle)
Date: Thu, 04 Jun 2009 08:38:31 -0700
Subject: [antlr-interest] AntlrWorks export to dot files
In-Reply-To: <200906041246.10891.michael@pasdziernik.net>
References: <200906041217.29752.michael@pasdziernik.net>
	<200906041246.10891.michael@pasdziernik.net>
Message-ID: <4A27EA77.40103@temporal-wave.com>

Michael Pasdziernik wrote:
> Hi,
> Ok, dot is a simple text file. Replacing "arrowhead = none" with "arrowhead = normal"
> solves the Problem.
> Regards
> Michael
>   
You can also steal the formatting used for producing a dot spec of an 
AST. This creates coloring and so on that makes the resulting png/other 
graphic generally more readable.

See DOTTreeGenerator.java, where you will find:

"digraph {\n\n" +
            "\tordering=out;\n" +
            "\tranksep=.4;\n" +
            "\tbgcolor=\"lightgrey\"; node [shape=box, fixedsize=false, 
fontsize=12, fontname=\"Helvetica-bold\", fontcolor=\"blue\"\n" +
            "\t\twidth=.25, height=.25, color=\"black\", 
fillcolor=\"white\", style=\"filled, solid, bold\"];\n" +
            "\tedge [arrowsize=.5, color=\"black\", style=\"bold\"]\n\n" +
            "  $nodes$\n" +
            "  $edges$\n" +
            "}\n"



Jim

From X.Guo at 4c.ucc.ie  Thu Jun  4 09:45:02 2009
From: X.Guo at 4c.ucc.ie (Xiaohua Guo)
Date: Thu, 4 Jun 2009 17:45:02 +0100
Subject: [antlr-interest] how to implement this string rule?
In-Reply-To: <008f01c9e4fe$fd9b0170$f8d10450$@b@s7software.com>
References: <c522653d0906040245i18ef290fn6e90b3a959a21137@mail.gmail.com><c522653d0906040313n2c8bd5f9v574292a8cdbf375c@mail.gmail.com>
	<008f01c9e4fe$fd9b0170$f8d10450$@b@s7software.com>
Message-ID: <3EB76C7EB87543D6834A87CE28DEA2D1@4c129>

Hi, 
I have a description of the string like this in my problem description:

String = arbitrary string of letters, digits and symbols, starting and
ending with '"'

As I understand, the requirement said the string can include any kind of
symbols but I really don't know how to implement it. I wrote as the
following but it doesn't work. I would be grateful if someone could give me
some advice. Thanks a million!

STRING : ('a'..'z'|'A'..'Z'
|','
|'='
|'|'
|'/'
|'!'
|'*'
|')'
|']'
|'}'
|':'
|'-'
|'\'
|'"'
|'?'
|'('
|'['
|'{'
|';'
|'.'
|' '
|':'
|'+'
|'_'
|'%'
|'@'
|'&'
|'#'
|'$'
|'<'
|'>'
|'\^'
|'''
|'~')*;


Grace
 


From tbender at stud.hs-heilbronn.de  Thu Jun  4 09:55:14 2009
From: tbender at stud.hs-heilbronn.de (Tilman Bender)
Date: Thu, 4 Jun 2009 18:55:14 +0200
Subject: [antlr-interest] how to implement this string rule?
In-Reply-To: <3EB76C7EB87543D6834A87CE28DEA2D1@4c129>
References: <c522653d0906040245i18ef290fn6e90b3a959a21137@mail.gmail.com><c522653d0906040313n2c8bd5f9v574292a8cdbf375c@mail.gmail.com>
	<008f01c9e4fe$fd9b0170$f8d10450$@b@s7software.com>
	<3EB76C7EB87543D6834A87CE28DEA2D1@4c129>
Message-ID: <3D96625B-4E52-4501-9C1B-AA20AC55B89E@stud.hs-heilbronn.de>

Hi Xiaohua,

Try this one:

STRING :
   '"' (~('"'|'\n'|'\r'))* '"';

It says the string starts with " and ends with " while an between  
those there can be any character but ",\n or \r
This was taken from the templates used in the ANTLRIDE editor.

HTH

Tilman Bender
Student des Software Engineering
Hochschule Heilbronn
tbender at stud.hs-heilbronn.de



Am 04.06.2009 um 18:45 schrieb Xiaohua Guo:

> Hi,
> I have a description of the string like this in my problem  
> description:
>
> String = arbitrary string of letters, digits and symbols, starting and
> ending with '"'
>
> As I understand, the requirement said the string can include any  
> kind of
> symbols but I really don't know how to implement it. I wrote as the
> following but it doesn't work. I would be grateful if someone could  
> give me
> some advice. Thanks a million!
>
> STRING : ('a'..'z'|'A'..'Z'
> |','
> |'='
> |'|'
> |'/'
> |'!'
> |'*'
> |')'
> |']'
> |'}'
> |':'
> |'-'
> |'\'
> |'"'
> |'?'
> |'('
> |'['
> |'{'
> |';'
> |'.'
> |' '
> |':'
> |'+'
> |'_'
> |'%'
> |'@'
> |'&'
> |'#'
> |'$'
> |'<'
> |'>'
> |'\^'
> |'''
> |'~')*;
>
>
> Grace
>
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090604/9df172e1/attachment.html 

From indhu.b at s7software.com  Thu Jun  4 09:55:46 2009
From: indhu.b at s7software.com (Indhu Bharathi)
Date: Thu, 4 Jun 2009 22:25:46 +0530
Subject: [antlr-interest] how to implement this string rule?
In-Reply-To: <3EB76C7EB87543D6834A87CE28DEA2D1@4c129>
References: <c522653d0906040245i18ef290fn6e90b3a959a21137@mail.gmail.com><c522653d0906040313n2c8bd5f9v574292a8cdbf375c@mail.gmail.com>	<008f01c9e4fe$fd9b0170$f8d10450$@b@s7software.com>
	<3EB76C7EB87543D6834A87CE28DEA2D1@4c129>
Message-ID: <000601c9e535$50cfc1b0$f26f4510$@b@s7software.com>

STRING
: '"' ( options {greedy=false;} : . )* '"'
;

Greedy is turned off so that .* doesn't consume the terminating '"' also.

Cheers, Indhu

-----Original Message-----
From: antlr-interest-bounces at antlr.org
[mailto:antlr-interest-bounces at antlr.org] On Behalf Of Xiaohua Guo
Sent: Thursday, June 04, 2009 10:15 PM
To: antlr-interest at antlr.org
Subject: [antlr-interest] how to implement this string rule?

Hi, 
I have a description of the string like this in my problem description:

String = arbitrary string of letters, digits and symbols, starting and
ending with '"'

As I understand, the requirement said the string can include any kind of
symbols but I really don't know how to implement it. I wrote as the
following but it doesn't work. I would be grateful if someone could give me
some advice. Thanks a million!

STRING : ('a'..'z'|'A'..'Z'
|','
|'='
|'|'
|'/'
|'!'
|'*'
|')'
|']'
|'}'
|':'
|'-'
|'\'
|'"'
|'?'
|'('
|'['
|'{'
|';'
|'.'
|' '
|':'
|'+'
|'_'
|'%'
|'@'
|'&'
|'#'
|'$'
|'<'
|'>'
|'\^'
|'''
|'~')*;


Grace
 


List: http://www.antlr.org/mailman/listinfo/antlr-interest
Unsubscribe:
http://www.antlr.org/mailman/options/antlr-interest/your-email-address


From andersen at ontologyworks.com  Thu Jun  4 11:09:20 2009
From: andersen at ontologyworks.com (Bill Andersen)
Date: Thu, 4 Jun 2009 14:09:20 -0400
Subject: [antlr-interest] Tree grammar -> string template
Message-ID: <83B624E9-225E-4321-942D-A24962154F3B@ontologyworks.com>

Folks,

Sorry if this question is naive, but I'm at the end of my rope...

I have a tree grammar with template output, a fragment of which looks  
like

foo
	: ^(TOK arg+)
	  -> pat( args=... )

and a string template pattern

pat(args) ::= "function(<args; separator=", ">)"

The question is, what should I write in the tree grammar in place of  
'...'?    Can't seem to glean this from the string template  
documentation

Bill Andersen
Ontology Works, Inc. (www.ontologyworks.com)
3600 O'Donnell Street, Suite 600
Baltimore, MD 21224
Office: +1.410.675.1201
Cell: +1.443.858.6444
Fax: +1.410.675.1204





From Stefan.Wachter at gmx.de  Thu Jun  4 10:43:34 2009
From: Stefan.Wachter at gmx.de (Stefan Wachter)
Date: Thu, 04 Jun 2009 19:43:34 +0200
Subject: [antlr-interest] How to read the tokens file
Message-ID: <4A2807C6.8020602@gmx.de>

Hi all,

I want to read in token files. Does anyone know the exact file format of 
token files? Is there a grammar for these files?

Regards,
--Stefan


From sasifiqbal at gmail.com  Thu Jun  4 11:12:22 2009
From: sasifiqbal at gmail.com (Asif Iqbal)
Date: Thu, 4 Jun 2009 11:12:22 -0700
Subject: [antlr-interest] The following token definitions can never be
	matched because prior tokens ...
Message-ID: <8ea431940906041112j5028989alb6a48a3348e5e3b2@mail.gmail.com>

Hi,

I am new to ANTLR. I am trying to write following grammer in ANTLR.

//Grammer
grammar GLGrammer;
options
{
 output=AST;
 ASTLabelType=CommonTree;
 language=CSharp;
}
GLLanguage
 : GLQueries ';'
// :  (GLQueries ';') (';')*
 ;

GLQueries
 : ConfigurationStatement
// | InsertStatement
// | CreateStatement
// | DropStatement
// | ModifyStatement
// | PostStatement
 ;
ConfigurationStatement
 : 'SET' SetKeywords
 ;
InsertStatement
 : 'INSERT' INTEGER
 ;
SetKeywords
 :  'DEBUG' 'ON'
  | 'CURRENCY' CURRENCYCODE
  | 'FISCAL' FiscalParameter
  | 'COA' 'LEVEL' INTEGER
  ;
FiscalParameter
 : ('YEAR' | 'MONTH') INTEGER
 ;
INTEGER
 : ('0'..'9')+
 ;
FLOAT
 : ('0'..'9')* '.' ('0'..'9')+
 ;
DATETIME
  : '#' (~'#')* '#'
        ;
BOOLEAN
 : 'true'
 | 'false'
 ;

CURRENCYCODE
 : ('a'..'z' | 'A'..'Z') ('a'..'z' | 'A'..'Z') ('a'..'z' | 'A'..'Z')
 ;

IDENT
 : ('a'..'z' | 'A'..'Z' | '_') ('a'..'z' | 'A'..'Z' | '_' | '0'..'9')*
 ;

/* Ignore white spaces */
WS
 :  (' '|'\r'|'\t'|'\u000C'|'\n') {$channel=HIDDEN;}
 ;
//End Grammer

The issue is ANTLRWorks generating following error
[11:50:05] error(208): GLGrammer.g:23:1: The following token definitions can
never be matched because prior tokens match the same input:
ConfigurationStatement
Could not understand the issue. Please help.

Regards,
Asif
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090604/66a1c47a/attachment.html 

From parrt at cs.usfca.edu  Thu Jun  4 11:25:10 2009
From: parrt at cs.usfca.edu (Terence Parr)
Date: Thu, 4 Jun 2009 11:25:10 -0700
Subject: [antlr-interest] "Language design patterns" book available in
	beta
In-Reply-To: <b70c55390906032149m508afc71ycda83aad99ce05a4@mail.gmail.com>
References: <C9B3CF23-3CEE-49E4-99CF-85BA90EFD504@cs.usfca.edu>
	<b70c55390906032149m508afc71ycda83aad99ce05a4@mail.gmail.com>
Message-ID: <21B0A085-0914-429D-A50F-E7F75EE0832B@cs.usfca.edu>

I'm hoping to put that into the code generation / generating  
structured text chapter (the last one).
Ter
On Jun 3, 2009, at 9:49 PM, ugol wrote:

> On Wed, Jun 3, 2009 at 8:30 PM, Terence Parr <parrt at cs.usfca.edu>  
> wrote:
>> Well, it had to happen sometime...the new book is finally available  
>> in
>> beta at pragmatic programmers website:
>
>
> got it!
>
>
> <... skimming trough ....>
>
>
> aaarghh!!! where is the llvm stuff?!?!? :)
>
> -- 
> uL
>
> Pragmatist
> http://blog.ugolandini.com
> http://www.flickr.com/photos/ugol/
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address


From parrt at cs.usfca.edu  Thu Jun  4 11:27:12 2009
From: parrt at cs.usfca.edu (Terence Parr)
Date: Thu, 4 Jun 2009 11:27:12 -0700
Subject: [antlr-interest] Tree grammar -> string template
In-Reply-To: <83B624E9-225E-4321-942D-A24962154F3B@ontologyworks.com>
References: <83B624E9-225E-4321-942D-A24962154F3B@ontologyworks.com>
Message-ID: <FB08D7C7-594E-42B2-BF9C-6330E1341D39@cs.usfca.edu>

howdy. you need to put in something like

foo : ^(TOK (x+=arg)+) ->pat(args={$x}) ;
Ter
On Jun 4, 2009, at 11:09 AM, Bill Andersen wrote:

> Folks,
>
> Sorry if this question is naive, but I'm at the end of my rope...
>
> I have a tree grammar with template output, a fragment of which looks
> like
>
> foo
> 	: ^(TOK arg+)
> 	  -> pat( args=... )
>
> and a string template pattern
>
> pat(args) ::= "function(<args; separator=", ">)"
>
> The question is, what should I write in the tree grammar in place of
> '...'?    Can't seem to glean this from the string template
> documentation
>
> Bill Andersen
> Ontology Works, Inc. (www.ontologyworks.com)
> 3600 O'Donnell Street, Suite 600
> Baltimore, MD 21224
> Office: +1.410.675.1201
> Cell: +1.443.858.6444
> Fax: +1.410.675.1204
>
>
>
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address


From jimi at temporal-wave.com  Thu Jun  4 11:34:20 2009
From: jimi at temporal-wave.com (Jim Idle)
Date: Thu, 04 Jun 2009 11:34:20 -0700
Subject: [antlr-interest] The following token definitions can never be
 matched because prior tokens ...
In-Reply-To: <8ea431940906041112j5028989alb6a48a3348e5e3b2@mail.gmail.com>
References: <8ea431940906041112j5028989alb6a48a3348e5e3b2@mail.gmail.com>
Message-ID: <4A2813AC.6060302@temporal-wave.com>

An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090604/3b8b2794/attachment.html 

From jsrs701 at yahoo.com  Thu Jun  4 12:29:32 2009
From: jsrs701 at yahoo.com (J. Stephen Riley Silber)
Date: Thu, 4 Jun 2009 12:29:32 -0700 (PDT)
Subject: [antlr-interest] "Language design patterns" book available in
	beta
Message-ID: <720729.69547.qm@web33306.mail.mud.yahoo.com>


May I request less "hoping" and more "doing"?? Because llvm stuff would be AWESOME.? An approachable example would be so very Rosetta Stone-ish.

--- On Thu, 6/4/09, Terence Parr <parrt at cs.usfca.edu> wrote:

From: Terence Parr <parrt at cs.usfca.edu>
Subject: Re: [antlr-interest] "Language design patterns" book available in beta
To: "ugol" <ugo.landini at gmail.com>
Cc: "String Template Mailing LIst" <stringtemplate-interest at antlr.org>, "antlr ANTLR" <antlr-interest at antlr.org>
Date: Thursday, June 4, 2009, 11:25 AM

I'm hoping to put that into the code generation / generating? 
structured text chapter (the last one).
Ter
On Jun 3, 2009, at 9:49 PM, ugol wrote:

> On Wed, Jun 3, 2009 at 8:30 PM, Terence Parr <parrt at cs.usfca.edu>? 
> wrote:
>> Well, it had to happen sometime...the new book is finally available? 
>> in
>> beta at pragmatic programmers website:
>
>
> got it!
>
>
> <... skimming trough ....>
>
>
> aaarghh!!! where is the llvm stuff?!?!? :)
>
> -- 
> uL
>
> Pragmatist
> http://blog.ugolandini.com
> http://www.flickr.com/photos/ugol/
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address


List: http://www.antlr.org/mailman/listinfo/antlr-interest
Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090604/0c827e12/attachment.html 

From parrt at cs.usfca.edu  Thu Jun  4 13:09:10 2009
From: parrt at cs.usfca.edu (Terence Parr)
Date: Thu, 4 Jun 2009 13:09:10 -0700
Subject: [antlr-interest] "Language design patterns" book available in
	beta
In-Reply-To: <720729.69547.qm@web33306.mail.mud.yahoo.com>
References: <720729.69547.qm@web33306.mail.mud.yahoo.com>
Message-ID: <278C5992-0EE1-4A77-9F9B-D05DF43C3F1A@cs.usfca.edu>

I do actually have a write up from a prototype of the book before it  
was a design patterns book. I was thinking about creating a bytecode  
generator to go along with the bytecode interpreters but getting the  
LLVM stuff in there would be cool.

I'm almost done with the high level interpreter chapter. I should be  
able to start on the bytecode chapter next week. Then I need to start  
on the generating structured text chapter.  I'm running out of pages.   
I have only about 80 pages left to play with; 350 pages max for the  
book.
Ter
On Jun 4, 2009, at 12:29 PM, J. Stephen Riley Silber wrote:

>
> May I request less "hoping" and more "doing"?  Because llvm stuff  
> would be AWESOME.  An approachable example would be so very Rosetta  
> Stone-ish.
>
> --- On Thu, 6/4/09, Terence Parr <parrt at cs.usfca.edu> wrote:
>
> From: Terence Parr <parrt at cs.usfca.edu>
> Subject: Re: [antlr-interest] "Language design patterns" book  
> available in beta
> To: "ugol" <ugo.landini at gmail.com>
> Cc: "String Template Mailing LIst" <stringtemplate- 
> interest at antlr.org>, "antlr ANTLR" <antlr-interest at antlr.org>
> Date: Thursday, June 4, 2009, 11:25 AM
>
> I'm hoping to put that into the code generation / generating
> structured text chapter (the last one).
> Ter
> On Jun 3, 2009, at 9:49 PM, ugol wrote:
>
> > On Wed, Jun 3, 2009 at 8:30 PM, Terence Parr <parrt at cs.usfca.edu>
> > wrote:
> >> Well, it had to happen sometime...the new book is finally available
> >> in
> >> beta at pragmatic programmers website:
> >
> >
> > got it!
> >
> >
> > <... skimming trough ....>
> >
> >
> > aaarghh!!! where is the llvm stuff?!?!? :)
> >
> > --
> > uL
> >
> > Pragmatist
> > http://blog.ugolandini.com
> > http://www.flickr.com/photos/ugol/
> >
> > List: http://www.antlr.org/mailman/listinfo/antlr-interest
> > Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address


From joe.peterson at intel.com  Thu Jun  4 13:27:23 2009
From: joe.peterson at intel.com (Peterson, Joe)
Date: Thu, 4 Jun 2009 13:27:23 -0700
Subject: [antlr-interest] Freeing memory as you go using C target
In-Reply-To: <mailman.0.1244142001.28274.antlr-interest@antlr.org>
References: <mailman.0.1244142001.28274.antlr-interest@antlr.org>
Message-ID: <BCF80163639E9F4296FC4B208F99BA47F95276A0@orsmsx504.amr.corp.intel.com>

Hello all,

We're using the C target to generate a parser for a very large file with very large independent sections.  Unfortunately, it's consuming 1GB+ of memory when parsing the file.  Is there any way to free up the memory consumed as we go without pre-parsing the file to chunk it up?  Everything I've found in my searches seem to point to splitting up the file before processing it. After a particular token, can we free the memory used by that token?  For example if we had:

contents : header body footer;
header : BLAH BLAH BLAH;
footer : BLA BLA BLA;
body : section+;

section 
@after {
	// can we free everything here even though we're still in body?
}
    : LBRACE morestuff RBRACE;


Thanks,
-JEEP

From jsrs701 at yahoo.com  Thu Jun  4 13:41:24 2009
From: jsrs701 at yahoo.com (J. Stephen Riley Silber)
Date: Thu, 4 Jun 2009 13:41:24 -0700 (PDT)
Subject: [antlr-interest] "Language design patterns" book available in
	beta
Message-ID: <665310.14523.qm@web33304.mail.mud.yahoo.com>


Youch!? Seeing the chapter headings for the last few unwritten chapters, you could write a whole book just there!

I think I speak for a lot of us when I say we'd happily pay a whole dollar more for a few hundred more pages.? :-P

--- On Thu, 6/4/09, Terence Parr <parrt at cs.usfca.edu> wrote:

From: Terence Parr <parrt at cs.usfca.edu>
Subject: Re: [antlr-interest] "Language design patterns" book available in beta
To: "J. Stephen Riley Silber" <jsrs701 at yahoo.com>
Cc: "String Template Mailing LIst" <stringtemplate-interest at antlr.org>, "antlr ANTLR" <antlr-interest at antlr.org>
Date: Thursday, June 4, 2009, 1:09 PM

I do actually have a write up from a prototype of the book before it was a design patterns book. I was thinking about creating a bytecode generator to go along with the bytecode interpreters but getting the LLVM stuff in there would be cool.

I'm almost done with the high level interpreter chapter. I should be able to start on the bytecode chapter next week. Then I need to start on the generating structured text chapter.? I'm running out of pages.? I have only about 80 pages left to play with; 350 pages max for the book.
Ter
On Jun 4, 2009, at 12:29 PM, J. Stephen Riley Silber wrote:

> 
> May I request less "hoping" and more "doing"?? Because llvm stuff would be AWESOME.? An approachable example would be so very Rosetta Stone-ish.
> 
> --- On Thu, 6/4/09, Terence Parr <parrt at cs.usfca.edu> wrote:
> 
> From: Terence Parr <parrt at cs.usfca.edu>
> Subject: Re: [antlr-interest] "Language design patterns" book available in beta
> To: "ugol" <ugo.landini at gmail.com>
> Cc: "String Template Mailing LIst" <stringtemplate-interest at antlr.org>, "antlr ANTLR" <antlr-interest at antlr.org>
> Date: Thursday, June 4, 2009, 11:25 AM
> 
> I'm hoping to put that into the code generation / generating
> structured text chapter (the last one).
> Ter
> On Jun 3, 2009, at 9:49 PM, ugol wrote:
> 
> > On Wed, Jun 3, 2009 at 8:30 PM, Terence Parr <parrt at cs.usfca.edu>
> > wrote:
> >> Well, it had to happen sometime...the new book is finally available
> >> in
> >> beta at pragmatic programmers website:
> >
> >
> > got it!
> >
> >
> > <... skimming trough ....>
> >
> >
> > aaarghh!!! where is the llvm stuff?!?!? :)
> >
> > --
> > uL
> >
> > Pragmatist
> > http://blog.ugolandini.com
> > http://www.flickr.com/photos/ugol/
> >
> > List: http://www.antlr.org/mailman/listinfo/antlr-interest
> > Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
> 
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090604/ff41572d/attachment.html 

From parrt at cs.usfca.edu  Thu Jun  4 13:44:33 2009
From: parrt at cs.usfca.edu (Terence Parr)
Date: Thu, 4 Jun 2009 13:44:33 -0700
Subject: [antlr-interest] "Language design patterns" book available in
	beta
In-Reply-To: <665310.14523.qm@web33304.mail.mud.yahoo.com>
References: <665310.14523.qm@web33304.mail.mud.yahoo.com>
Message-ID: <16B67035-C583-4C60-AC5F-CC93EC4286E2@cs.usfca.edu>


On Jun 4, 2009, at 1:41 PM, J. Stephen Riley Silber wrote:

>
> Youch!  Seeing the chapter headings for the last few unwritten  
> chapters, you could write a whole book just there!
>
> I think I speak for a lot of us when I say we'd happily pay a whole  
> dollar more for a few hundred more pages.  :-P

ha! Yeah, we don't want to create a very intimidating huge book though.

I know what you mean. as I started this interpreter chapter, I felt  
like I  could finally start the book! I had gone through all of the  
preliminary material.  Readers could parse, build an intermediate  
representation, walk trees, track and resolve symbols, and do semantic  
analysis such as static type checking.

T

From ugo.landini at gmail.com  Thu Jun  4 15:28:03 2009
From: ugo.landini at gmail.com (ugol)
Date: Fri, 5 Jun 2009 00:28:03 +0200
Subject: [antlr-interest] "Language design patterns" book available in
	beta
In-Reply-To: <16B67035-C583-4C60-AC5F-CC93EC4286E2@cs.usfca.edu>
References: <665310.14523.qm@web33304.mail.mud.yahoo.com>
	<16B67035-C583-4C60-AC5F-CC93EC4286E2@cs.usfca.edu>
Message-ID: <b70c55390906041528p31277435v9d934e35896fa4@mail.gmail.com>

> ha! Yeah, we don't want to create a very intimidating huge book though.
>
> I know what you mean. as I started this interpreter chapter, I felt
> like I ?could finally start the book! I had gone through all of the
> preliminary material. ?Readers could parse, build an intermediate
> representation, walk trees, track and resolve symbols, and do semantic
> analysis such as static type checking.
>

If you really run out of pages, just publish additional material on
the site... but limitating the most interesting part of the book is
crazy!!!!!

-- 
uL

Pragmatist
http://blog.ugolandini.com
http://www.flickr.com/photos/ugol/

From jimi at temporal-wave.com  Thu Jun  4 17:03:05 2009
From: jimi at temporal-wave.com (Jim Idle)
Date: Thu, 04 Jun 2009 17:03:05 -0700
Subject: [antlr-interest] Freeing memory as you go using C target
In-Reply-To: <BCF80163639E9F4296FC4B208F99BA47F95276A0@orsmsx504.amr.corp.intel.com>
References: <mailman.0.1244142001.28274.antlr-interest@antlr.org>
	<BCF80163639E9F4296FC4B208F99BA47F95276A0@orsmsx504.amr.corp.intel.com>
Message-ID: <4A2860B9.1050504@temporal-wave.com>

An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090604/c463e0bf/attachment.html 

From rusinskystanislas at yahoo.fr  Thu Jun  4 18:50:45 2009
From: rusinskystanislas at yahoo.fr (Stan)
Date: Fri, 5 Jun 2009 01:50:45 +0000 (GMT)
Subject: [antlr-interest] "Language design patterns" book available in
	beta
Message-ID: <256576.91060.qm@web26506.mail.ukl.yahoo.com>


+1 reader for volume 2

Sent from my iPhone

On 04 Jun 2009, at 15:28, ugol <ugo.landini at gmail.com> wrote:

ha! Yeah, we don't want to create a very intimidating huge book though.

I know what you mean. as I started this interpreter chapter, I felt
like I  could finally start the book! I had gone through all of the
preliminary material.  Readers could parse, build an intermediate
representation, walk trees, track and resolve symbols, and do semantic
analysis such as static type checking.


If you really run out of pages, just publish additional material on
the site... but limitating the most interesting part of the book is
crazy!!!!!

-- 
uL

Pragmatist
http://blog.ugolandini.com
http://www.flickr.com/photos/ugol/

List: http://www.antlr.org/mailman/listinfo/antlr-interest
Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address



      

From christian.schladetsch at gmail.com  Fri Jun  5 01:48:19 2009
From: christian.schladetsch at gmail.com (Christian Schladetsch)
Date: Fri, 5 Jun 2009 20:48:19 +1200
Subject: [antlr-interest] Thanks
Message-ID: <6442c4ae0906050148p37192b8fj18d04c17a7d3bb94@mail.gmail.com>

Hi Guys,

I will not go into details, even though I would love to. I have used ANTLR
and StringTemplate for a number of years. With various outcomes. I burst
with pride at my latest results, enabled by ANTLR etc, so am posting this.

Terrence, yes, you are correct, ANTLR and StringTemplate are good ways of
doing things. You have created a remarkable system that works across many
languages and reduces effort by orders or magnitude. By using a DSL based on
ANTLR, I have cut production times by ten.

Thanks,
Christian.

http://www.linkedin.com/in/christianschladetsch
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090605/03e12e1a/attachment.html 

From tbender at stud.hs-heilbronn.de  Fri Jun  5 02:40:27 2009
From: tbender at stud.hs-heilbronn.de (Tilman Bender)
Date: Fri, 5 Jun 2009 11:40:27 +0200
Subject: [antlr-interest] GUnit: Testing rules which have parameters
Message-ID: <FCD67B13-7AEF-477D-A95D-45BB8BE5782C@stud.hs-heilbronn.de>

Hi all,

I am trying to test my semantic error-checker, which is a TreeWalker.

Since I use a symboltable to check for redefinition etc. my first  
approach was to create that table as a public member in this  
TreeWalker and retreive it
for later use after the walker has returned. Everything fine. GUnit  
working.

Now I want to create the symboltable in the code that is calling my  
treewalker and pass it as an argument to the main parsing method.
Unfortunatley this will break my GUnit-Tests since there is no way to  
pass an argument to the tested method.

Am I missing something? Does anyone have a good suggestion how to get  
around this?

It would be really cool, if this would be built into a future version  
of GUnit. Some kind of test-fixture would also be really neat ;-)

Tilman Bender
Student des Software Engineering
Hochschule Heilbronn
tbender at stud.hs-heilbronn.de



-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090605/ae4688f9/attachment.html 

From Waverly.Edwards at genesys.com  Fri Jun  5 07:00:14 2009
From: Waverly.Edwards at genesys.com (Edwards, Waverly)
Date: Fri, 5 Jun 2009 09:00:14 -0500
Subject: [antlr-interest] "Language design patterns" book available
	in	beta
In-Reply-To: <b70c55390906041528p31277435v9d934e35896fa4@mail.gmail.com>
References: <665310.14523.qm@web33304.mail.mud.yahoo.com>
	<16B67035-C583-4C60-AC5F-CC93EC4286E2@cs.usfca.edu>
	<b70c55390906041528p31277435v9d934e35896fa4@mail.gmail.com>
Message-ID: <4A454A950FB157459B59AA50C146C07922E92398@OMA00CEXMBX02.corp.westworlds.com>


I'll pay extra for the extra material.
>From what I've seen so far, it will be well worth it.


W. 

-----Original Message-----
From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-bounces at antlr.org] On Behalf Of ugol
Sent: Thursday, June 04, 2009 6:28 PM
To: Terence Parr
Cc: String Template Mailing LIst; antlr ANTLR
Subject: Re: [antlr-interest] "Language design patterns" book available in beta

> ha! Yeah, we don't want to create a very intimidating huge book though.
>
> I know what you mean. as I started this interpreter chapter, I felt
> like I ?could finally start the book! I had gone through all of the
> preliminary material. ?Readers could parse, build an intermediate
> representation, walk trees, track and resolve symbols, and do semantic
> analysis such as static type checking.
>

If you really run out of pages, just publish additional material on
the site... but limitating the most interesting part of the book is
crazy!!!!!

-- 
uL

Pragmatist
http://blog.ugolandini.com
http://www.flickr.com/photos/ugol/

List: http://www.antlr.org/mailman/listinfo/antlr-interest
Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address

From damien.cassou at gmail.com  Fri Jun  5 08:19:11 2009
From: damien.cassou at gmail.com (Damien Cassou)
Date: Fri, 5 Jun 2009 17:19:11 +0200
Subject: [antlr-interest] Extracting the tree grammar from the parser grammar
Message-ID: <6ac749c10906050819w500a2233s86ad4870e0c3aad3@mail.gmail.com>

Hi,

I have a Parser grammar which generates an AST. Now, I would like to
use StringTemplate to generate code from the AST. The book says to
copy/past parts of the .g file into a new .g file.

Is there any tool to extract the tree grammar from the parser grammar?

Thank you

-- 
Damien Cassou
http://damiencassou.seasidehosting.st

"Lambdas are relegated to relative obscurity until Java makes them
popular by not having them." James Iry

From andersen at ontologyworks.com  Fri Jun  5 10:32:12 2009
From: andersen at ontologyworks.com (Bill Andersen)
Date: Fri, 5 Jun 2009 13:32:12 -0400
Subject: [antlr-interest] String template use in Java w/tree grammar
Message-ID: <D102F8A1-BB77-495F-9907-91F8B0AA459A@ontologyworks.com>

Folks..

I have a tree grammar set up with template output.  Now I'm ready to  
integrate it with the parser that produces the AST and generate text.

Question is, what do I need to do in Java to make the generated tree  
parser code aware of my defined template groups?   Is it just a call  
to setTemplateLib(StringTemplateGroup templateLib)?   I couldn't find  
that in the documentation -- only found it in the generated java from  
my AST parser.

	.bill

Bill Andersen
Ontology Works, Inc. (www.ontologyworks.com)
3600 O'Donnell Street, Suite 600
Baltimore, MD 21224
Office: +1.410.675.1201
Cell: +1.443.858.6444
Fax: +1.410.675.1204





From parrt at cs.usfca.edu  Fri Jun  5 10:40:21 2009
From: parrt at cs.usfca.edu (Terence Parr)
Date: Fri, 5 Jun 2009 10:40:21 -0700
Subject: [antlr-interest] "Language design patterns" book available
	in	beta
In-Reply-To: <4A454A950FB157459B59AA50C146C07922E92398@OMA00CEXMBX02.corp.westworlds.com>
References: <665310.14523.qm@web33304.mail.mud.yahoo.com>
	<16B67035-C583-4C60-AC5F-CC93EC4286E2@cs.usfca.edu>
	<b70c55390906041528p31277435v9d934e35896fa4@mail.gmail.com>
	<4A454A950FB157459B59AA50C146C07922E92398@OMA00CEXMBX02.corp.westworlds.com>
Message-ID: <68C16E98-EED0-4A13-8FD6-CFE64ADD2B5A@cs.usfca.edu>

Glad to hear the book is meeting your expectations. I only have about  
80 pages left and I just consumed 26 of those four the first of the  
interpreter chapters. doh!

If I have to skimp to make it into only 350 pages, where should I be  
terse? should I skip patterns or should I include the full source code  
for the pattern and a less verbose description?

Ter

On Jun 5, 2009, at 7:00 AM, Edwards, Waverly wrote:

>
> I'll pay extra for the extra material.
>> From what I've seen so far, it will be well worth it.
>
>
> W.
>
> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-bounces at antlr.org 
> ] On Behalf Of ugol
> Sent: Thursday, June 04, 2009 6:28 PM
> To: Terence Parr
> Cc: String Template Mailing LIst; antlr ANTLR
> Subject: Re: [antlr-interest] "Language design patterns" book  
> available in beta
>
>> ha! Yeah, we don't want to create a very intimidating huge book  
>> though.
>>
>> I know what you mean. as I started this interpreter chapter, I felt
>> like I  could finally start the book! I had gone through all of the
>> preliminary material.  Readers could parse, build an intermediate
>> representation, walk trees, track and resolve symbols, and do  
>> semantic
>> analysis such as static type checking.
>>
>
> If you really run out of pages, just publish additional material on
> the site... but limitating the most interesting part of the book is
> crazy!!!!!
>
> -- 
> uL
>
> Pragmatist
> http://blog.ugolandini.com
> http://www.flickr.com/photos/ugol/
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address


From parrt at cs.usfca.edu  Fri Jun  5 10:42:10 2009
From: parrt at cs.usfca.edu (Terence Parr)
Date: Fri, 5 Jun 2009 10:42:10 -0700
Subject: [antlr-interest] String template use in Java w/tree grammar
In-Reply-To: <D102F8A1-BB77-495F-9907-91F8B0AA459A@ontologyworks.com>
References: <D102F8A1-BB77-495F-9907-91F8B0AA459A@ontologyworks.com>
Message-ID: <884A950B-DF6B-443D-BC57-BD5BA494CF55@cs.usfca.edu>


On Jun 5, 2009, at 10:32 AM, Bill Andersen wrote:

> Folks..
>
> I have a tree grammar set up with template output.  Now I'm ready to
> integrate it with the parser that produces the AST and generate text.
>
> Question is, what do I need to do in Java to make the generated tree
> parser code aware of my defined template groups?   Is it just a call
> to setTemplateLib(StringTemplateGroup templateLib)?

yep.

You must tell the parser where to look for templates whether you're  
using a parser grammar or a tree grammar.
Ter

From jsrs701 at yahoo.com  Fri Jun  5 11:35:54 2009
From: jsrs701 at yahoo.com (J. Stephen Riley Silber)
Date: Fri, 5 Jun 2009 11:35:54 -0700 (PDT)
Subject: [antlr-interest] Thanks
Message-ID: <365563.16109.qm@web33304.mail.mud.yahoo.com>

Wow, Christian, tell me how you convinced your company to let you do this.? I tried to get a company to use a DSL to make their custom app development about 50 times more efficient, but to no avail.? They literally thought things like "inventing a human-usable language" was impossible, and instead make their developers code in a crappy XML tree editor.? ugh.

Yes, ANTLR is da bomb.? I look forward to using StringTemplate now, too.? :-)

--- On Fri, 6/5/09, Christian Schladetsch <christian.schladetsch at gmail.com> wrote:

From: Christian Schladetsch <christian.schladetsch at gmail.com>
Subject: [antlr-interest] Thanks
To: antlr-interest at antlr.org
Date: Friday, June 5, 2009, 1:48 AM

Hi Guys,

I will not go into details, even though I would love to. I have used ANTLR and StringTemplate for a number of years. With various outcomes. I burst with pride at my latest results, enabled by ANTLR etc, so am posting this.


Terrence, yes, you are correct, ANTLR and StringTemplate are good ways of doing things. You have created a remarkable system that works across many languages and reduces effort by orders or magnitude. By using a DSL based on ANTLR, I have cut production times by ten.


Thanks,
Christian.

http://www.linkedin.com/in/christianschladetsch



-----Inline Attachment Follows-----


List: http://www.antlr.org/mailman/listinfo/antlr-interest
Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090605/a22a5191/attachment.html 

From jsrs701 at yahoo.com  Fri Jun  5 11:43:40 2009
From: jsrs701 at yahoo.com (J. Stephen Riley Silber)
Date: Fri, 5 Jun 2009 11:43:40 -0700 (PDT)
Subject: [antlr-interest] "Language design patterns" book available in
	beta
Message-ID: <721732.69087.qm@web33301.mail.mud.yahoo.com>

No brainer.? Be terse with the example code, but have it all downloadable online.? Please do NOT skimp on the pattern explanations!? That's where this book is strongest.

For example, the top-down and bottom-up tree rewriting stuff on antlr.org?? I really didn't understand why some things should be top-down versus others being bottom-up.? Then I read that part of the book, and had one of those eureka moments.

Code I'm quite willing to go look online for.? Cogent explanations of things I don't deal with every day (and thus don't keep cached in main memory :-) I want a good dead-trees book for.

--- On Fri, 6/5/09, Terence Parr <parrt at cs.usfca.edu> wrote:

From: Terence Parr <parrt at cs.usfca.edu>
Subject: Re: [antlr-interest] "Language design patterns" book available in beta
To: "Edwards, Waverly" <Waverly.Edwards at genesys.com>
Cc: "antlr ANTLR" <antlr-interest at antlr.org>
Date: Friday, June 5, 2009, 10:40 AM

Glad to hear the book is meeting your expectations. I only have about? 
80 pages left and I just consumed 26 of those four the first of the? 
interpreter chapters. doh!

If I have to skimp to make it into only 350 pages, where should I be? 
terse? should I skip patterns or should I include the full source code? 
for the pattern and a less verbose description?

Ter

On Jun 5, 2009, at 7:00 AM, Edwards, Waverly wrote:

>
> I'll pay extra for the extra material.
>> From what I've seen so far, it will be well worth it.
>
>
> W.
>
> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-bounces at antlr.org 
> ] On Behalf Of ugol
> Sent: Thursday, June 04, 2009 6:28 PM
> To: Terence Parr
> Cc: String Template Mailing LIst; antlr ANTLR
> Subject: Re: [antlr-interest] "Language design patterns" book? 
> available in beta
>
>> ha! Yeah, we don't want to create a very intimidating huge book? 
>> though.
>>
>> I know what you mean. as I started this interpreter chapter, I felt
>> like I? could finally start the book! I had gone through all of the
>> preliminary material.? Readers could parse, build an intermediate
>> representation, walk trees, track and resolve symbols, and do? 
>> semantic
>> analysis such as static type checking.
>>
>
> If you really run out of pages, just publish additional material on
> the site... but limitating the most interesting part of the book is
> crazy!!!!!
>
> -- 
> uL
>
> Pragmatist
> http://blog.ugolandini.com
> http://www.flickr.com/photos/ugol/
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address


List: http://www.antlr.org/mailman/listinfo/antlr-interest
Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090605/86f33a1f/attachment.html 

From Waverly.Edwards at genesys.com  Fri Jun  5 12:29:33 2009
From: Waverly.Edwards at genesys.com (Edwards, Waverly)
Date: Fri, 5 Jun 2009 14:29:33 -0500
Subject: [antlr-interest] "Language design patterns" book available
	in	beta
In-Reply-To: <68C16E98-EED0-4A13-8FD6-CFE64ADD2B5A@cs.usfca.edu>
References: <665310.14523.qm@web33304.mail.mud.yahoo.com>
	<16B67035-C583-4C60-AC5F-CC93EC4286E2@cs.usfca.edu>
	<b70c55390906041528p31277435v9d934e35896fa4@mail.gmail.com>
	<4A454A950FB157459B59AA50C146C07922E92398@OMA00CEXMBX02.corp.westworlds.com>
	<68C16E98-EED0-4A13-8FD6-CFE64ADD2B5A@cs.usfca.edu>
Message-ID: <4A454A950FB157459B59AA50C146C07922E9275E@OMA00CEXMBX02.corp.westworlds.com>


I am getting quite a bit out of the descriptions of the patterns.
I think that by giving the descriptions you provide the framework so if 
someone were to look at code, it will make sense.  If I had code but
less description of the pattern then the moment of discovery may not
occur.  I am really liking the descriptions and the inline reference
to other pages or chapters.  I see how they are related and the mental
connections are being made.  I think if you read the book and look at
the related source code outside of the book, it will make sense but 
the reverse would not be true.

Also putting the full source puts pressure to leave something else out.

I favor a robust pattern description.


W.

-----Original Message-----
From: Terence Parr [mailto:parrt at cs.usfca.edu] 
Sent: Friday, June 05, 2009 1:40 PM
To: Edwards, Waverly
Cc: antlr ANTLR
Subject: Re: [antlr-interest] "Language design patterns" book available in beta

Glad to hear the book is meeting your expectations. I only have about  
80 pages left and I just consumed 26 of those four the first of the  
interpreter chapters. doh!

If I have to skimp to make it into only 350 pages, where should I be  
terse? should I skip patterns or should I include the full source code  
for the pattern and a less verbose description?

Ter

On Jun 5, 2009, at 7:00 AM, Edwards, Waverly wrote:

>
> I'll pay extra for the extra material.
>> From what I've seen so far, it will be well worth it.
>
>
> W.
>
> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-bounces at antlr.org 
> ] On Behalf Of ugol
> Sent: Thursday, June 04, 2009 6:28 PM
> To: Terence Parr
> Cc: String Template Mailing LIst; antlr ANTLR
> Subject: Re: [antlr-interest] "Language design patterns" book  
> available in beta
>
>> ha! Yeah, we don't want to create a very intimidating huge book  
>> though.
>>
>> I know what you mean. as I started this interpreter chapter, I felt
>> like I  could finally start the book! I had gone through all of the
>> preliminary material.  Readers could parse, build an intermediate
>> representation, walk trees, track and resolve symbols, and do  
>> semantic
>> analysis such as static type checking.
>>
>
> If you really run out of pages, just publish additional material on
> the site... but limitating the most interesting part of the book is
> crazy!!!!!
>
> -- 
> uL
>
> Pragmatist
> http://blog.ugolandini.com
> http://www.flickr.com/photos/ugol/
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address


From Waverly.Edwards at genesys.com  Fri Jun  5 12:34:34 2009
From: Waverly.Edwards at genesys.com (Edwards, Waverly)
Date: Fri, 5 Jun 2009 14:34:34 -0500
Subject: [antlr-interest] "Language design patterns" book available
	in	beta
References: <665310.14523.qm@web33304.mail.mud.yahoo.com>
	<16B67035-C583-4C60-AC5F-CC93EC4286E2@cs.usfca.edu>
	<b70c55390906041528p31277435v9d934e35896fa4@mail.gmail.com>
	<4A454A950FB157459B59AA50C146C07922E92398@OMA00CEXMBX02.corp.westworlds.com>
	<68C16E98-EED0-4A13-8FD6-CFE64ADD2B5A@cs.usfca.edu> 
Message-ID: <4A454A950FB157459B59AA50C146C07922E9276A@OMA00CEXMBX02.corp.westworlds.com>

 
>>
 I think if you read the book and look at
the related source code outside of the book, it will make sense but 
the reverse would not be true

<<

That didn't come out right.  What I meant was I have to infer more through
reading the code and I just may miss some of the meaning you are trying
to convey.


W.

-----Original Message-----
From: Edwards, Waverly 
Sent: Friday, June 05, 2009 3:30 PM
To: antlr ANTLR
Subject: RE: [antlr-interest] "Language design patterns" book available in beta


I am getting quite a bit out of the descriptions of the patterns.
I think that by giving the descriptions you provide the framework so if 
someone were to look at code, it will make sense.  If I had code but
less description of the pattern then the moment of discovery may not
occur.  I am really liking the descriptions and the inline reference
to other pages or chapters.  I see how they are related and the mental
connections are being made.  I think if you read the book and look at
the related source code outside of the book, it will make sense but 
the reverse would not be true.

Also putting the full source puts pressure to leave something else out.

I favor a robust pattern description.


W.

-----Original Message-----
From: Terence Parr [mailto:parrt at cs.usfca.edu] 
Sent: Friday, June 05, 2009 1:40 PM
To: Edwards, Waverly
Cc: antlr ANTLR
Subject: Re: [antlr-interest] "Language design patterns" book available in beta

Glad to hear the book is meeting your expectations. I only have about  
80 pages left and I just consumed 26 of those four the first of the  
interpreter chapters. doh!

If I have to skimp to make it into only 350 pages, where should I be  
terse? should I skip patterns or should I include the full source code  
for the pattern and a less verbose description?

Ter

On Jun 5, 2009, at 7:00 AM, Edwards, Waverly wrote:

>
> I'll pay extra for the extra material.
>> From what I've seen so far, it will be well worth it.
>
>
> W.
>
> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-bounces at antlr.org 
> ] On Behalf Of ugol
> Sent: Thursday, June 04, 2009 6:28 PM
> To: Terence Parr
> Cc: String Template Mailing LIst; antlr ANTLR
> Subject: Re: [antlr-interest] "Language design patterns" book  
> available in beta
>
>> ha! Yeah, we don't want to create a very intimidating huge book  
>> though.
>>
>> I know what you mean. as I started this interpreter chapter, I felt
>> like I  could finally start the book! I had gone through all of the
>> preliminary material.  Readers could parse, build an intermediate
>> representation, walk trees, track and resolve symbols, and do  
>> semantic
>> analysis such as static type checking.
>>
>
> If you really run out of pages, just publish additional material on
> the site... but limitating the most interesting part of the book is
> crazy!!!!!
>
> -- 
> uL
>
> Pragmatist
> http://blog.ugolandini.com
> http://www.flickr.com/photos/ugol/
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address


From steve at stevecooper.org  Fri Jun  5 14:29:58 2009
From: steve at stevecooper.org (Steve Cooper)
Date: Fri, 5 Jun 2009 22:29:58 +0100
Subject: [antlr-interest] "Language design patterns" book available in
	beta
Message-ID: <74b7ba600906051429q176af86cv792c0f8abd4360a6@mail.gmail.com>

First, thanks for writing this book. I'm a good way through already
and have written my first LL(2) recursive descent parser today. I'm
very happy with the book.

"If I have to skimp to make it into only 350 pages, where should I be terse?"

I can only offer this; most people, I would think, will be writing
smaller languages and DSLs. So deemphasise anything that applies only
to large general-purpose languages.

Or use a smaller font. ;-)

-- 
Steve Cooper
steve at stevecooper.org
http://www.stevecooper.org

From parrt at cs.usfca.edu  Fri Jun  5 15:24:44 2009
From: parrt at cs.usfca.edu (Terence Parr)
Date: Fri, 5 Jun 2009 15:24:44 -0700
Subject: [antlr-interest] "Language design patterns" book available in
	beta
In-Reply-To: <74b7ba600906051429q176af86cv792c0f8abd4360a6@mail.gmail.com>
References: <74b7ba600906051429q176af86cv792c0f8abd4360a6@mail.gmail.com>
Message-ID: <16AC449A-4436-474A-A03B-5E300D106985@cs.usfca.edu>


On Jun 5, 2009, at 2:29 PM, Steve Cooper wrote:

> First, thanks for writing this book. I'm a good way through already
> and have written my first LL(2) recursive descent parser today. I'm
> very happy with the book.

great!

> "If I have to skimp to make it into only 350 pages, where should I  
> be terse?"
>
> I can only offer this; most people, I would think, will be writing
> smaller languages and DSLs. So deemphasise anything that applies only
> to large general-purpose languages.

true...

> Or use a smaller font. ;-)

ha! ok :)

Ter

From rschulz at sonic.net  Fri Jun  5 15:36:54 2009
From: rschulz at sonic.net (Randall R Schulz)
Date: Fri, 5 Jun 2009 15:36:54 -0700
Subject: [antlr-interest] "Language design patterns" book available in
	beta
In-Reply-To: <16AC449A-4436-474A-A03B-5E300D106985@cs.usfca.edu>
References: <74b7ba600906051429q176af86cv792c0f8abd4360a6@mail.gmail.com>
	<16AC449A-4436-474A-A03B-5E300D106985@cs.usfca.edu>
Message-ID: <200906051536.54412.rschulz@sonic.net>

On Friday June 5 2009, Terence Parr wrote:
> On Jun 5, 2009, at 2:29 PM, Steve Cooper wrote:
> > First, thanks for writing this book. I'm a good way through already
> > and have written my first LL(2) recursive descent parser today. I'm
> > very happy with the book.
>
> great!
>
> > "If I have to skimp to make it into only 350 pages, where should I
> > be terse?"
> >
> > I can only offer this; most people, I would think, will be writing
> > smaller languages and DSLs. So deemphasise anything that applies
> > only to large general-purpose languages.
>
> true...

Is it?

Simple languages (such as typical DSLs) are simple to parse and process. 
I would think there's more to say about more complex languages with 
richer grammars that lead to more demanding language processing issues 
in areas such as error-handling and -reporting, ambiguity resolution, 
symbol table design, island grammars, AST design, etc.

So I would say aim towards the more complex, less obvious stuff. TDAR is 
sufficient for dealing with simple languages, isn't it?


> ...
>
> Ter


Randall Schulz

From parrt at cs.usfca.edu  Fri Jun  5 16:01:38 2009
From: parrt at cs.usfca.edu (Terence Parr)
Date: Fri, 5 Jun 2009 16:01:38 -0700
Subject: [antlr-interest] "Language design patterns" book available in
	beta
In-Reply-To: <200906051536.54412.rschulz@sonic.net>
References: <74b7ba600906051429q176af86cv792c0f8abd4360a6@mail.gmail.com>
	<16AC449A-4436-474A-A03B-5E300D106985@cs.usfca.edu>
	<200906051536.54412.rschulz@sonic.net>
Message-ID: <893A49E6-674E-4CCA-A8D3-3C263BB7097F@cs.usfca.edu>

I guess it all comes down to how we defined simple DSL ;)

Yeah, stuff like configuration files are pretty easy. The interpreters  
I have in the high-level interpreter chapter are suitable more for  
dynamically typed DSLs because they are not super speedy. They just  
happen to have the fewest moving parts. The bytecode interpreter  
chapter is better for larger programming languages; more moving parts  
because it needs a source code to bytecodes translator and then the  
interpreter itself.

Ter
On Jun 5, 2009, at 3:36 PM, Randall R Schulz wrote:

> On Friday June 5 2009, Terence Parr wrote:
>> On Jun 5, 2009, at 2:29 PM, Steve Cooper wrote:
>>> First, thanks for writing this book. I'm a good way through already
>>> and have written my first LL(2) recursive descent parser today. I'm
>>> very happy with the book.
>>
>> great!
>>
>>> "If I have to skimp to make it into only 350 pages, where should I
>>> be terse?"
>>>
>>> I can only offer this; most people, I would think, will be writing
>>> smaller languages and DSLs. So deemphasise anything that applies
>>> only to large general-purpose languages.
>>
>> true...
>
> Is it?
>
> Simple languages (such as typical DSLs) are simple to parse and  
> process.
> I would think there's more to say about more complex languages with
> richer grammars that lead to more demanding language processing issues
> in areas such as error-handling and -reporting, ambiguity resolution,
> symbol table design, island grammars, AST design, etc.
>
> So I would say aim towards the more complex, less obvious stuff.  
> TDAR is
> sufficient for dealing with simple languages, isn't it?
>
>
>> ...
>>
>> Ter
>
>
> Randall Schulz
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address


From parrt at cs.usfca.edu  Fri Jun  5 16:15:24 2009
From: parrt at cs.usfca.edu (Terence Parr)
Date: Fri, 5 Jun 2009 16:15:24 -0700
Subject: [antlr-interest] "Language design patterns" book available
	in	beta
In-Reply-To: <4A454A950FB157459B59AA50C146C07922E9275E@OMA00CEXMBX02.corp.westworlds.com>
References: <665310.14523.qm@web33304.mail.mud.yahoo.com>
	<16B67035-C583-4C60-AC5F-CC93EC4286E2@cs.usfca.edu>
	<b70c55390906041528p31277435v9d934e35896fa4@mail.gmail.com>
	<4A454A950FB157459B59AA50C146C07922E92398@OMA00CEXMBX02.corp.westworlds.com>
	<68C16E98-EED0-4A13-8FD6-CFE64ADD2B5A@cs.usfca.edu>
	<4A454A950FB157459B59AA50C146C07922E9275E@OMA00CEXMBX02.corp.westworlds.com>
Message-ID: <B9012A3A-223A-4E78-99BB-9BC5C07695E5@cs.usfca.edu>

Hi. Isn't it annoying though to get a description of something (say in  
a printed book) and then have to go to the machine to read along in  
the code?

Ter
On Jun 5, 2009, at 12:29 PM, Edwards, Waverly wrote:

>
> I am getting quite a bit out of the descriptions of the patterns.
> I think that by giving the descriptions you provide the framework so  
> if
> someone were to look at code, it will make sense.  If I had code but
> less description of the pattern then the moment of discovery may not
> occur.  I am really liking the descriptions and the inline reference
> to other pages or chapters.  I see how they are related and the mental
> connections are being made.  I think if you read the book and look at
> the related source code outside of the book, it will make sense but
> the reverse would not be true.
>
> Also putting the full source puts pressure to leave something else  
> out.
>
> I favor a robust pattern description.
>
>
> W.
>
> -----Original Message-----
> From: Terence Parr [mailto:parrt at cs.usfca.edu]
> Sent: Friday, June 05, 2009 1:40 PM
> To: Edwards, Waverly
> Cc: antlr ANTLR
> Subject: Re: [antlr-interest] "Language design patterns" book  
> available in beta
>
> Glad to hear the book is meeting your expectations. I only have about
> 80 pages left and I just consumed 26 of those four the first of the
> interpreter chapters. doh!
>
> If I have to skimp to make it into only 350 pages, where should I be
> terse? should I skip patterns or should I include the full source code
> for the pattern and a less verbose description?
>
> Ter
>
> On Jun 5, 2009, at 7:00 AM, Edwards, Waverly wrote:
>
>>
>> I'll pay extra for the extra material.
>>> From what I've seen so far, it will be well worth it.
>>
>>
>> W.
>>
>> -----Original Message-----
>> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-bounces at antlr.org
>> ] On Behalf Of ugol
>> Sent: Thursday, June 04, 2009 6:28 PM
>> To: Terence Parr
>> Cc: String Template Mailing LIst; antlr ANTLR
>> Subject: Re: [antlr-interest] "Language design patterns" book
>> available in beta
>>
>>> ha! Yeah, we don't want to create a very intimidating huge book
>>> though.
>>>
>>> I know what you mean. as I started this interpreter chapter, I felt
>>> like I  could finally start the book! I had gone through all of the
>>> preliminary material.  Readers could parse, build an intermediate
>>> representation, walk trees, track and resolve symbols, and do
>>> semantic
>>> analysis such as static type checking.
>>>
>>
>> If you really run out of pages, just publish additional material on
>> the site... but limitating the most interesting part of the book is
>> crazy!!!!!
>>
>> -- 
>> uL
>>
>> Pragmatist
>> http://blog.ugolandini.com
>> http://www.flickr.com/photos/ugol/
>>
>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>>
>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address


From christian.schladetsch at gmail.com  Fri Jun  5 16:16:50 2009
From: christian.schladetsch at gmail.com (Christian Schladetsch)
Date: Sat, 6 Jun 2009 11:16:50 +1200
Subject: [antlr-interest] Thanks
In-Reply-To: <365563.16109.qm@web33304.mail.mud.yahoo.com>
References: <365563.16109.qm@web33304.mail.mud.yahoo.com>
Message-ID: <6442c4ae0906051616u4305336etb1ef432f1f4d29da@mail.gmail.com>

Hi Stephen,

Well, I started my own development company last year, so I can solve
problems how I wish to these days ;)

I am in the games industry, and have been contracted to provide a next-gen
graphics rendering system. The current solutions are either all cludgy or
without sufficient control, so I created a DSL for a technique-based system.

It is similar to Microsoft's ID3DXEffect system, but also supports
fragment-level linking and technique inheritance. This has cut down the
number of shaders/techniques that had to be written and maintained from a
few hundred to just about ten, and also spans the HLSL/C++ boundary, making
the shaders and their uniforms all statically type-safe.

I finally did it all "the right way", with a lexer, parser, AST, and ST
outputs. Yes, it's quite complicated, I mean in some files you are using 3
different languages simultaneously and you have to think at a few different
levels sometimes, but its fast, it generates great code, and the DSL itself
is really easy to use and maintain. The thing about using ST is that you
don't really need any 'backend' at all; you generate your output directly
from the string templates. It took me a while to get my head around how to
use it well, but now that I have made a production system from end-to-end
using ANTLR/ST, I look forward to making my next DSL!

There are a lot of benefits to using DSL's. Microsoft knows this too, they
are adding more and more support into VisualStudio and .NET for DSL's, but I
think there will always be a high barrier to entry because DSL-based
solutions are seen as 'over-kill'. In reality of course, you end up making
the DSL anyway, it just comes out of the system, but IMO its best to be
explicit about it.

As we know, inside any sufficiently complex C program is a badly written
Lisp interpreter. I think similarly, inside any sufficiently complex C++
application is a badly written DSL...

Anyway, Cheers guys,
Christian.

On Sat, Jun 6, 2009 at 6:35 AM, J. Stephen Riley Silber
<jsrs701 at yahoo.com>wrote:

> Wow, Christian, tell me how you convinced your company to let you do this.
> I tried to get a company to use a DSL to make their custom app development
> about 50 times more efficient, but to no avail.  They literally thought
> things like "inventing a human-usable language" was impossible, and instead
> make their developers code in a crappy XML tree editor.  ugh.
>
> Yes, ANTLR is da bomb.  I look forward to using StringTemplate now, too.
> :-)
>
> --- On *Fri, 6/5/09, Christian Schladetsch <
> christian.schladetsch at gmail.com>* wrote:
>
>
> From: Christian Schladetsch <christian.schladetsch at gmail.com>
> Subject: [antlr-interest] Thanks
> To: antlr-interest at antlr.org
> Date: Friday, June 5, 2009, 1:48 AM
>
> Hi Guys,
>
> I will not go into details, even though I would love to. I have used ANTLR
> and StringTemplate for a number of years. With various outcomes. I burst
> with pride at my latest results, enabled by ANTLR etc, so am posting this.
>
> Terrence, yes, you are correct, ANTLR and StringTemplate are good ways of
> doing things. You have created a remarkable system that works across many
> languages and reduces effort by orders or magnitude. By using a DSL based on
> ANTLR, I have cut production times by ten.
>
> Thanks,
> Christian.
>
> http://www.linkedin.com/in/christianschladetsch
>
>
> -----Inline Attachment Follows-----
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090606/dda0d6f6/attachment.html 

From jimi at temporal-wave.com  Fri Jun  5 16:24:32 2009
From: jimi at temporal-wave.com (Jim Idle)
Date: Fri, 05 Jun 2009 16:24:32 -0700
Subject: [antlr-interest] Thanks
In-Reply-To: <6442c4ae0906051616u4305336etb1ef432f1f4d29da@mail.gmail.com>
References: <365563.16109.qm@web33304.mail.mud.yahoo.com>
	<6442c4ae0906051616u4305336etb1ef432f1f4d29da@mail.gmail.com>
Message-ID: <4A29A930.3090704@temporal-wave.com>

Christian Schladetsch wrote:
> Hi Stephen,
>
> Well, I started my own development company last year, so I can solve 
> problems how I wish to these days ;)
>
> I am in the games industry, and have been contracted to provide a 
> next-gen graphics rendering system.
Does that mean you can get me in to E3 next year? ;-)

Jim

From rschneid at bridgewater.edu  Fri Jun  5 16:36:21 2009
From: rschneid at bridgewater.edu (Raymond J. Schneider)
Date: Fri, 5 Jun 2009 19:36:21 -0400
Subject: [antlr-interest] "Language design patterns" book
	available	in	beta
In-Reply-To: <B9012A3A-223A-4E78-99BB-9BC5C07695E5@cs.usfca.edu>
References: <665310.14523.qm@web33304.mail.mud.yahoo.com>
	<16B67035-C583-4C60-AC5F-CC93EC4286E2@cs.usfca.edu>
	<b70c55390906041528p31277435v9d934e35896fa4@mail.gmail.com>
	<4A454A950FB157459B59AA50C146C07922E92398@OMA00CEXMBX02.corp.westworlds.com>
	<68C16E98-EED0-4A13-8FD6-CFE64ADD2B5A@cs.usfca.edu>
	<4A454A950FB157459B59AA50C146C07922E9275E@OMA00CEXMBX02.corp.westworlds.com>,
	<B9012A3A-223A-4E78-99BB-9BC5C07695E5@cs.usfca.edu>
Message-ID: <172455A9DFDEF941A54573F5463F106528F49CEC0D@bcex01.Bridgewater.local>

Code in Text:
What I like is a book that provides all the code in some sort of book site but in the discussion provides code examples that have the non-relevant stuff left out but indicated that they are there maybe with a pseudocode comment that indicates what they did:
//pseudocode summary
ACTUAL CODE //explanatory comments to the side as necessary
Sometimes if this can be handled in multiple columns that are aligned it make it easy or the code can be indented and in a different font from the text (usually is anyway).

The point is to maximize the applicability of the communication and when you're talking about code there should be some code there to see that illustrates the point.
Cheers, Ray
P.S. I downloaded the new book but I've not had time yet to start reading it ... too many other books in the queue.
--
Ray Schneider,PE, Ph.D
Associate Professor
Math and Computer Science
Bridgewater College
http://www.bridgewater.edu/~rschneid/
http://theweedlessgarden.blogspot.com
________________________________________
From: antlr-interest-bounces at antlr.org [antlr-interest-bounces at antlr.org] On Behalf Of Terence Parr [parrt at cs.usfca.edu]
Sent: Friday, June 05, 2009 19:15
To: Edwards, Waverly
Cc: antlr ANTLR
Subject: Re: [antlr-interest] "Language design patterns" book available in      beta

Hi. Isn't it annoying though to get a description of something (say in
a printed book) and then have to go to the machine to read along in
the code?

Ter
On Jun 5, 2009, at 12:29 PM, Edwards, Waverly wrote:

>
> I am getting quite a bit out of the descriptions of the patterns.
> I think that by giving the descriptions you provide the framework so
> if
> someone were to look at code, it will make sense.  If I had code but
> less description of the pattern then the moment of discovery may not
> occur.  I am really liking the descriptions and the inline reference
> to other pages or chapters.  I see how they are related and the mental
> connections are being made.  I think if you read the book and look at
> the related source code outside of the book, it will make sense but
> the reverse would not be true.
>
> Also putting the full source puts pressure to leave something else
> out.
>
> I favor a robust pattern description.
>
>
> W.
>
> -----Original Message-----
> From: Terence Parr [mailto:parrt at cs.usfca.edu]
> Sent: Friday, June 05, 2009 1:40 PM
> To: Edwards, Waverly
> Cc: antlr ANTLR
> Subject: Re: [antlr-interest] "Language design patterns" book
> available in beta
>
> Glad to hear the book is meeting your expectations. I only have about
> 80 pages left and I just consumed 26 of those four the first of the
> interpreter chapters. doh!
>
> If I have to skimp to make it into only 350 pages, where should I be
> terse? should I skip patterns or should I include the full source code
> for the pattern and a less verbose description?
>
> Ter
>
> On Jun 5, 2009, at 7:00 AM, Edwards, Waverly wrote:
>
>>
>> I'll pay extra for the extra material.
>>> From what I've seen so far, it will be well worth it.
>>
>>
>> W.
>>
>> -----Original Message-----
>> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-bounces at antlr.org
>> ] On Behalf Of ugol
>> Sent: Thursday, June 04, 2009 6:28 PM
>> To: Terence Parr
>> Cc: String Template Mailing LIst; antlr ANTLR
>> Subject: Re: [antlr-interest] "Language design patterns" book
>> available in beta
>>
>>> ha! Yeah, we don't want to create a very intimidating huge book
>>> though.
>>>
>>> I know what you mean. as I started this interpreter chapter, I felt
>>> like I  could finally start the book! I had gone through all of the
>>> preliminary material.  Readers could parse, build an intermediate
>>> representation, walk trees, track and resolve symbols, and do
>>> semantic
>>> analysis such as static type checking.
>>>
>>
>> If you really run out of pages, just publish additional material on
>> the site... but limitating the most interesting part of the book is
>> crazy!!!!!
>>
>> --
>> uL
>>
>> Pragmatist
>> http://blog.ugolandini.com
>> http://www.flickr.com/photos/ugol/
>>
>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>>
>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address


List: http://www.antlr.org/mailman/listinfo/antlr-interest
Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address

From jimi at temporal-wave.com  Fri Jun  5 16:51:09 2009
From: jimi at temporal-wave.com (Jim Idle)
Date: Fri, 05 Jun 2009 16:51:09 -0700
Subject: [antlr-interest] "Language design patterns" book available	in
 beta
In-Reply-To: <B9012A3A-223A-4E78-99BB-9BC5C07695E5@cs.usfca.edu>
References: <665310.14523.qm@web33304.mail.mud.yahoo.com>	<16B67035-C583-4C60-AC5F-CC93EC4286E2@cs.usfca.edu>	<b70c55390906041528p31277435v9d934e35896fa4@mail.gmail.com>	<4A454A950FB157459B59AA50C146C07922E92398@OMA00CEXMBX02.corp.westworlds.com>	<68C16E98-EED0-4A13-8FD6-CFE64ADD2B5A@cs.usfca.edu>	<4A454A950FB157459B59AA50C146C07922E9275E@OMA00CEXMBX02.corp.westworlds.com>
	<B9012A3A-223A-4E78-99BB-9BC5C07695E5@cs.usfca.edu>
Message-ID: <4A29AF6D.1080009@temporal-wave.com>

An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090605/d4a58180/attachment.html 

From jsrs701 at yahoo.com  Fri Jun  5 16:51:13 2009
From: jsrs701 at yahoo.com (J. Stephen Riley Silber)
Date: Fri, 5 Jun 2009 16:51:13 -0700 (PDT)
Subject: [antlr-interest] "Language design patterns" book available in
	beta
Message-ID: <925891.30962.qm@web33303.mail.mud.yahoo.com>

Indeed!? But then, *we* don't want to limit you to 350 pages, either!? :-)

--- On Fri, 6/5/09, Terence Parr <parrt at cs.usfca.edu> wrote:

From: Terence Parr <parrt at cs.usfca.edu>
Subject: Re: [antlr-interest] "Language design patterns" book available in beta
To: "Edwards, Waverly" <Waverly.Edwards at genesys.com>
Cc: "antlr ANTLR" <antlr-interest at antlr.org>
Date: Friday, June 5, 2009, 4:15 PM

Hi. Isn't it annoying though to get a description of something (say in? 
a printed book) and then have to go to the machine to read along in? 
the code?

Ter
On Jun 5, 2009, at 12:29 PM, Edwards, Waverly wrote:

>
> I am getting quite a bit out of the descriptions of the patterns.
> I think that by giving the descriptions you provide the framework so? 
> if
> someone were to look at code, it will make sense.? If I had code but
> less description of the pattern then the moment of discovery may not
> occur.? I am really liking the descriptions and the inline reference
> to other pages or chapters.? I see how they are related and the mental
> connections are being made.? I think if you read the book and look at
> the related source code outside of the book, it will make sense but
> the reverse would not be true.
>
> Also putting the full source puts pressure to leave something else? 
> out.
>
> I favor a robust pattern description.
>
>
> W.
>
> -----Original Message-----
> From: Terence Parr [mailto:parrt at cs.usfca.edu]
> Sent: Friday, June 05, 2009 1:40 PM
> To: Edwards, Waverly
> Cc: antlr ANTLR
> Subject: Re: [antlr-interest] "Language design patterns" book? 
> available in beta
>
> Glad to hear the book is meeting your expectations. I only have about
> 80 pages left and I just consumed 26 of those four the first of the
> interpreter chapters. doh!
>
> If I have to skimp to make it into only 350 pages, where should I be
> terse? should I skip patterns or should I include the full source code
> for the pattern and a less verbose description?
>
> Ter
>
> On Jun 5, 2009, at 7:00 AM, Edwards, Waverly wrote:
>
>>
>> I'll pay extra for the extra material.
>>> From what I've seen so far, it will be well worth it.
>>
>>
>> W.
>>
>> -----Original Message-----
>> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-bounces at antlr.org
>> ] On Behalf Of ugol
>> Sent: Thursday, June 04, 2009 6:28 PM
>> To: Terence Parr
>> Cc: String Template Mailing LIst; antlr ANTLR
>> Subject: Re: [antlr-interest] "Language design patterns" book
>> available in beta
>>
>>> ha! Yeah, we don't want to create a very intimidating huge book
>>> though.
>>>
>>> I know what you mean. as I started this interpreter chapter, I felt
>>> like I? could finally start the book! I had gone through all of the
>>> preliminary material.? Readers could parse, build an intermediate
>>> representation, walk trees, track and resolve symbols, and do
>>> semantic
>>> analysis such as static type checking.
>>>
>>
>> If you really run out of pages, just publish additional material on
>> the site... but limitating the most interesting part of the book is
>> crazy!!!!!
>>
>> -- 
>> uL
>>
>> Pragmatist
>> http://blog.ugolandini.com
>> http://www.flickr.com/photos/ugol/
>>
>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>>
>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address


List: http://www.antlr.org/mailman/listinfo/antlr-interest
Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090605/84099776/attachment.html 

From Waverly.Edwards at genesys.com  Fri Jun  5 21:14:41 2009
From: Waverly.Edwards at genesys.com (Edwards, Waverly)
Date: Fri, 5 Jun 2009 23:14:41 -0500
Subject: [antlr-interest] "Language design patterns" book available
	in	beta
In-Reply-To: <B9012A3A-223A-4E78-99BB-9BC5C07695E5@cs.usfca.edu>
References: <665310.14523.qm@web33304.mail.mud.yahoo.com>
	<16B67035-C583-4C60-AC5F-CC93EC4286E2@cs.usfca.edu>
	<b70c55390906041528p31277435v9d934e35896fa4@mail.gmail.com>
	<4A454A950FB157459B59AA50C146C07922E92398@OMA00CEXMBX02.corp.westworlds.com>
	<68C16E98-EED0-4A13-8FD6-CFE64ADD2B5A@cs.usfca.edu>
	<4A454A950FB157459B59AA50C146C07922E9275E@OMA00CEXMBX02.corp.westworlds.com>,
	<B9012A3A-223A-4E78-99BB-9BC5C07695E5@cs.usfca.edu>
Message-ID: <4A454A950FB157459B59AA50C146C079226B0FFE@OMA00CEXMBX02.corp.westworlds.com>

Yes, it can be annoying but I have books that have full source code
but the author, from what I gathered, opted to use the source code
as explanation for what they did but not why they did it.  As more
code is introduced it seems as though the explanation of why something
exists become "self evident" through the analysis of the code, which is
not true.  If you are really engaged by the content of the book, you
wont mind reading the code separately.


W.

________________________________________
From: Terence Parr [parrt at cs.usfca.edu]
Sent: Friday, June 05, 2009 7:15 PM
To: Edwards, Waverly
Cc: antlr ANTLR
Subject: Re: [antlr-interest] "Language design patterns" book available in      beta

Hi. Isn't it annoying though to get a description of something (say in
a printed book) and then have to go to the machine to read along in
the code?

Ter
On Jun 5, 2009, at 12:29 PM, Edwards, Waverly wrote:

>
> I am getting quite a bit out of the descriptions of the patterns.
> I think that by giving the descriptions you provide the framework so
> if
> someone were to look at code, it will make sense.  If I had code but
> less description of the pattern then the moment of discovery may not
> occur.  I am really liking the descriptions and the inline reference
> to other pages or chapters.  I see how they are related and the mental
> connections are being made.  I think if you read the book and look at
> the related source code outside of the book, it will make sense but
> the reverse would not be true.
>
> Also putting the full source puts pressure to leave something else
> out.
>
> I favor a robust pattern description.
>
>
> W.
>
> -----Original Message-----
> From: Terence Parr [mailto:parrt at cs.usfca.edu]
> Sent: Friday, June 05, 2009 1:40 PM
> To: Edwards, Waverly
> Cc: antlr ANTLR
> Subject: Re: [antlr-interest] "Language design patterns" book
> available in beta
>
> Glad to hear the book is meeting your expectations. I only have about
> 80 pages left and I just consumed 26 of those four the first of the
> interpreter chapters. doh!
>
> If I have to skimp to make it into only 350 pages, where should I be
> terse? should I skip patterns or should I include the full source code
> for the pattern and a less verbose description?
>
> Ter
>
> On Jun 5, 2009, at 7:00 AM, Edwards, Waverly wrote:
>
>>
>> I'll pay extra for the extra material.
>>> From what I've seen so far, it will be well worth it.
>>
>>
>> W.
>>
>> -----Original Message-----
>> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-bounces at antlr.org
>> ] On Behalf Of ugol
>> Sent: Thursday, June 04, 2009 6:28 PM
>> To: Terence Parr
>> Cc: String Template Mailing LIst; antlr ANTLR
>> Subject: Re: [antlr-interest] "Language design patterns" book
>> available in beta
>>
>>> ha! Yeah, we don't want to create a very intimidating huge book
>>> though.
>>>
>>> I know what you mean. as I started this interpreter chapter, I felt
>>> like I  could finally start the book! I had gone through all of the
>>> preliminary material.  Readers could parse, build an intermediate
>>> representation, walk trees, track and resolve symbols, and do
>>> semantic
>>> analysis such as static type checking.
>>>
>>
>> If you really run out of pages, just publish additional material on
>> the site... but limitating the most interesting part of the book is
>> crazy!!!!!
>>
>> --
>> uL
>>
>> Pragmatist
>> http://blog.ugolandini.com
>> http://www.flickr.com/photos/ugol/
>>
>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>>
>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address

From steve at stevecooper.org  Sat Jun  6 01:43:48 2009
From: steve at stevecooper.org (Steve Cooper)
Date: Sat, 6 Jun 2009 09:43:48 +0100
Subject: [antlr-interest] "Language design patterns" book available in
	beta
In-Reply-To: <893A49E6-674E-4CCA-A8D3-3C263BB7097F@cs.usfca.edu>
References: <74b7ba600906051429q176af86cv792c0f8abd4360a6@mail.gmail.com>
	<16AC449A-4436-474A-A03B-5E300D106985@cs.usfca.edu>
	<200906051536.54412.rschulz@sonic.net>
	<893A49E6-674E-4CCA-A8D3-3C263BB7097F@cs.usfca.edu>
Message-ID: <74b7ba600906060143q738d1256q7604d4c2be39101@mail.gmail.com>

> On Jun 5, 2009, at 3:36 PM, Randall R Schulz wrote:
> Simple languages (such as typical DSLs) are simple to parse and
> process.

2009/6/6 Terence Parr <parrt at cs.usfca.edu>:
> Yeah, stuff like configuration files are pretty easy.

I suspect I may be the idiot in the room, here ;) My suspicion is that
most people here are fairly good at this stuff, and most jobbing
programmers are not.

I'm coming at this as a relative beginner in the world of parsing.
I've just got into ANTLR and languages in general because I've found
myself doing simple language-interpretation tasks at work, and wanting
to structure them better than a big mess of regex and custom code.

So for me, I'm looking to understand what to do next when I realise my
big config file is actually a small DSL, or how I should write a
simple code generator. What I've read so far of the book is great for
that. If I were tempted to write a general-purpose programming
language, I'd follow Design Pattern 99: Stop it and embed a Python
interpreter. ;)

The subtitles of Ter's two books speaks to a focus on smaller tasks,
too; 'Building DSLs' and 'Techniques for implementing DSLs'

Anyway, this is just where I am in my learning.

    Steve

From steve at stevecooper.org  Sat Jun  6 02:33:20 2009
From: steve at stevecooper.org (Steve Cooper)
Date: Sat, 6 Jun 2009 10:33:20 +0100
Subject: [antlr-interest] "Language design patterns" book available in
	beta
In-Reply-To: <B9012A3A-223A-4E78-99BB-9BC5C07695E5@cs.usfca.edu>
References: <665310.14523.qm@web33304.mail.mud.yahoo.com>
	<16B67035-C583-4C60-AC5F-CC93EC4286E2@cs.usfca.edu>
	<b70c55390906041528p31277435v9d934e35896fa4@mail.gmail.com>
	<4A454A950FB157459B59AA50C146C07922E92398@OMA00CEXMBX02.corp.westworlds.com>
	<68C16E98-EED0-4A13-8FD6-CFE64ADD2B5A@cs.usfca.edu>
	<4A454A950FB157459B59AA50C146C07922E9275E@OMA00CEXMBX02.corp.westworlds.com>
	<B9012A3A-223A-4E78-99BB-9BC5C07695E5@cs.usfca.edu>
Message-ID: <74b7ba600906060233p2f5cd5aagee786c28c4ce82de@mail.gmail.com>

2009/6/6 Terence Parr <parrt at cs.usfca.edu>:
> Hi. Isn't it annoying though to get a description of something (say in
> a printed book) and then have to go to the machine to read along in
> the code?

I like the approach you've taken with the java pseudocode;

    public Token nextToken() {
        while ( ?lookahead-char?!=EOF ) {
            if ( ?comment-start-sequence? ) { COMMENT(); continue; }

If you can shorten the code by including this kind of thing, I think
that works very well.

From s.barnett-cormack at lancaster.ac.uk  Sat Jun  6 05:10:40 2009
From: s.barnett-cormack at lancaster.ac.uk (Sam Barnett-Cormack)
Date: Sat, 06 Jun 2009 13:10:40 +0100
Subject: [antlr-interest] "Language design patterns" book available	in
 beta
In-Reply-To: <B9012A3A-223A-4E78-99BB-9BC5C07695E5@cs.usfca.edu>
References: <665310.14523.qm@web33304.mail.mud.yahoo.com>	<16B67035-C583-4C60-AC5F-CC93EC4286E2@cs.usfca.edu>	<b70c55390906041528p31277435v9d934e35896fa4@mail.gmail.com>	<4A454A950FB157459B59AA50C146C07922E92398@OMA00CEXMBX02.corp.westworlds.com>	<68C16E98-EED0-4A13-8FD6-CFE64ADD2B5A@cs.usfca.edu>	<4A454A950FB157459B59AA50C146C07922E9275E@OMA00CEXMBX02.corp.westworlds.com>
	<B9012A3A-223A-4E78-99BB-9BC5C07695E5@cs.usfca.edu>
Message-ID: <4A2A5CC0.9030607@lancaster.ac.uk>

Terence Parr wrote:
> Hi. Isn't it annoying though to get a description of something (say in  
> a printed book) and then have to go to the machine to read along in  
> the code?

Not as annoying as having complete working code that's an example of 
something that's insufficiently explained... a lot of books go with the 
approach of a full description, illustrative (but brief!) snippets, and 
full code downloadable. I like this approach.

Sam, planning to buy the Dead Tree Edition when it's out

> On Jun 5, 2009, at 12:29 PM, Edwards, Waverly wrote:
> 
>> I am getting quite a bit out of the descriptions of the patterns.
>> I think that by giving the descriptions you provide the framework so  
>> if
>> someone were to look at code, it will make sense.  If I had code but
>> less description of the pattern then the moment of discovery may not
>> occur.  I am really liking the descriptions and the inline reference
>> to other pages or chapters.  I see how they are related and the mental
>> connections are being made.  I think if you read the book and look at
>> the related source code outside of the book, it will make sense but
>> the reverse would not be true.
>>
>> Also putting the full source puts pressure to leave something else  
>> out.
>>
>> I favor a robust pattern description.
>>
>>
>> W.
>>
>> -----Original Message-----
>> From: Terence Parr [mailto:parrt at cs.usfca.edu]
>> Sent: Friday, June 05, 2009 1:40 PM
>> To: Edwards, Waverly
>> Cc: antlr ANTLR
>> Subject: Re: [antlr-interest] "Language design patterns" book  
>> available in beta
>>
>> Glad to hear the book is meeting your expectations. I only have about
>> 80 pages left and I just consumed 26 of those four the first of the
>> interpreter chapters. doh!
>>
>> If I have to skimp to make it into only 350 pages, where should I be
>> terse? should I skip patterns or should I include the full source code
>> for the pattern and a less verbose description?
>>
>> Ter
>>
>> On Jun 5, 2009, at 7:00 AM, Edwards, Waverly wrote:
>>
>>> I'll pay extra for the extra material.
>>>> From what I've seen so far, it will be well worth it.
>>>
>>> W.
>>>
>>> -----Original Message-----
>>> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-bounces at antlr.org
>>> ] On Behalf Of ugol
>>> Sent: Thursday, June 04, 2009 6:28 PM
>>> To: Terence Parr
>>> Cc: String Template Mailing LIst; antlr ANTLR
>>> Subject: Re: [antlr-interest] "Language design patterns" book
>>> available in beta
>>>
>>>> ha! Yeah, we don't want to create a very intimidating huge book
>>>> though.
>>>>
>>>> I know what you mean. as I started this interpreter chapter, I felt
>>>> like I  could finally start the book! I had gone through all of the
>>>> preliminary material.  Readers could parse, build an intermediate
>>>> representation, walk trees, track and resolve symbols, and do
>>>> semantic
>>>> analysis such as static type checking.
>>>>
>>> If you really run out of pages, just publish additional material on
>>> the site... but limitating the most interesting part of the book is
>>> crazy!!!!!
>>>
>>> -- 
>>> uL
>>>
>>> Pragmatist
>>> http://blog.ugolandini.com
>>> http://www.flickr.com/photos/ugol/
>>>
>>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>>> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>>>
>>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>>> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>>
>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
> 
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address


-- 
Sam Barnett-Cormack

From michael.bedward at gmail.com  Sat Jun  6 07:14:03 2009
From: michael.bedward at gmail.com (Michael Bedward)
Date: Sun, 7 Jun 2009 00:14:03 +1000
Subject: [antlr-interest] "Language design patterns" book available in
	beta
In-Reply-To: <4A2A5CC0.9030607@lancaster.ac.uk>
References: <665310.14523.qm@web33304.mail.mud.yahoo.com>
	<16B67035-C583-4C60-AC5F-CC93EC4286E2@cs.usfca.edu>
	<b70c55390906041528p31277435v9d934e35896fa4@mail.gmail.com>
	<4A454A950FB157459B59AA50C146C07922E92398@OMA00CEXMBX02.corp.westworlds.com>
	<68C16E98-EED0-4A13-8FD6-CFE64ADD2B5A@cs.usfca.edu>
	<4A454A950FB157459B59AA50C146C07922E9275E@OMA00CEXMBX02.corp.westworlds.com>
	<B9012A3A-223A-4E78-99BB-9BC5C07695E5@cs.usfca.edu>
	<4A2A5CC0.9030607@lancaster.ac.uk>
Message-ID: <e24c4c270906060714n27a1b57ctcbc5452daf629057@mail.gmail.com>

2009/6/6 Sam Barnett-Cormack <s.barnett-cormack at lancaster.ac.uk>:
> Not as annoying as having complete working code that's an example of
> something that's insufficiently explained... a lot of books go with the
> approach of a full description, illustrative (but brief!) snippets, and
> full code downloadable. I like this approach.
>

Yep, I'll add my voice in support of that too

Michael

From antlr-list at arizona-software.ch  Sat Jun  6 09:51:54 2009
From: antlr-list at arizona-software.ch (Jean Bovet)
Date: Sat, 6 Jun 2009 09:51:54 -0700
Subject: [antlr-interest] ANTLRWorks 1.3 beta available
Message-ID: <56E7A977-CF39-4F9D-B204-51656AAEAEB1@arizona-software.ch>

Hi,

ANTLRWorks 1.3 beta is available from the usual web site (http://www.antlr.org/works/index.html 
). It has the following new features that were conceived by RP Talusan:
- New Grammar Wizard
- StringTemplate Editor
- Custom test rig
- Run an input directly on the grammar

Feedbacks are always welcome!

Jean


From flo.putz at gmail.com  Sun Jun  7 07:58:39 2009
From: flo.putz at gmail.com (Florian Putz)
Date: Sun, 07 Jun 2009 16:58:39 +0200
Subject: [antlr-interest] Retrieving node index
In-Reply-To: <A737869DDF35D44A89A7210DDA6F622B01A8CAAC0C@mail-ny02.rmg-ny.com>
References: <4A24220E.3090004@sbox.tugraz.at>
	<A737869DDF35D44A89A7210DDA6F622B01A8CAAC0C@mail-ny02.rmg-ny.com>
Message-ID: <4A2BD59F.4070608@gmail.com>

Hi,

I still have a problem concerning if-then-else statement. How do I get 
the index of a node with antlr3? 
CommonTreeNodeStream.getNodeIndex(Object) seems to be protected and is 
not accessible.

thx for your help,
florian

From dukie_banderjee at hotmail.com  Sun Jun  7 08:25:23 2009
From: dukie_banderjee at hotmail.com (Dukie Banderjee)
Date: Sun, 7 Jun 2009 11:25:23 -0400
Subject: [antlr-interest] Customizing token separators without recompiling
Message-ID: <COL113-W421C532886CF076CD3F3B092460@phx.gbl>


Hi everyone,

I'm new to the list and new to ANTLR. I have a specific problem I need to solve and I hope ANTLR can help.

Our client has several end-customers who all have slightly different document formats used for data interchange.

All the documents are basically 'standard' EDI documents, meaning they have the same basic syntax. However, some customers will use a '+' to separate values, some will use '*', others will use '~', etc. (I'm reminded of the old saying, "The great thing about standards is that there are so many to choose from!")

So, basically, the following inputs are all basically the same, except for the character used to separate tokens:
FST*4290*D*W*20070607
FST+4290+D+W+20070607
FST~4290~D~W~20070607

The thing is, we don't know ahead of time which separator characters might be used in the future, and we need to be able to tweak each end-customer's file format without re-compiling the lexer/parser. For example, a year from now there might be a customer who decides to use '_' or '$' or whatever, and we need to provide our client with a simple way (e.g. a per-customer configuration file) to customize the lexer/parser for such situations, without re-generating/re-compiling.

So, is this possible with ANTLR? How would I do this? Would it require a custom Lexer subclass with constructor parameters (e.g. new CustomLexer('_')) or something? How would this mesh with the generated lexer code from ANTLR?

I'm quite new to tools such as ANTLR (and parsers in general), so any help would be much appreciated. I really don't know where to start with this problem. For a hand-coded parser it's fairly simple, but I don't know enough about the workings of ANTLR to see where I would need to tweak it.

Thanks,

Rob

_________________________________________________________________
Create a cool, new character for your Windows Live? Messenger. 
http://go.microsoft.com/?linkid=9656621
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090607/2acef489/attachment.html 

From jsrs701 at yahoo.com  Sun Jun  7 12:48:50 2009
From: jsrs701 at yahoo.com (J. Stephen Riley Silber)
Date: Sun, 7 Jun 2009 12:48:50 -0700 (PDT)
Subject: [antlr-interest] Customizing token separators without
	recompiling
Message-ID: <943797.36270.qm@web33304.mail.mud.yahoo.com>

Howdy,

I'm guessing there's more to the problem than just supporting arbitrary field separation tokens, because if that's all there is, just use something like perl and store the separator(s) in a config file...?

--S

--- On Sun, 6/7/09, Dukie Banderjee <dukie_banderjee at hotmail.com> wrote:

From: Dukie Banderjee <dukie_banderjee at hotmail.com>
Subject: [antlr-interest] Customizing token separators without recompiling
To: antlr-interest at antlr.org
Date: Sunday, June 7, 2009, 8:25 AM




#yiv791166732 .hmmessage P
{
margin:0px;padding:0px;}
#yiv791166732 {
font-size:10pt;font-family:Verdana;}

Hi everyone,

I'm new to the list and new to ANTLR. I have a specific problem I need to solve and I hope ANTLR can help.

Our client has several end-customers who all have slightly different document formats used for data interchange.

All the documents are basically 'standard' EDI documents, meaning they have the same basic syntax. However, some customers will use a '+' to separate values, some will use '*', others will use '~', etc. (I'm reminded of the old saying, "The great thing about standards is that there are so many to choose from!")

So, basically, the following inputs are all basically the same, except for the character used to separate tokens:
FST*4290*D*W*20070607
FST+4290+D+W+20070607
FST~4290~D~W~20070607

The thing is, we don't know ahead of time which separator characters might be used in the future, and we need to be able to tweak each end-customer's file format without re-compiling the lexer/parser. For example, a year from now there might be a customer who decides to use '_' or '$' or whatever, and we need to provide our client with a simple way (e.g. a per-customer configuration file) to customize the lexer/parser for such situations, without re-generating/re-compiling.

So, is this possible with ANTLR? How would I do this? Would it require a custom Lexer subclass with constructor parameters (e.g. new CustomLexer('_')) or something? How would this mesh with the generated lexer code from ANTLR?

I'm quite new to tools such as ANTLR (and parsers in general), so any help would be much appreciated. I really don't know where to start with this problem. For a hand-coded parser it's fairly simple, but I don't know enough about the workings of ANTLR to see where I would need to tweak it.

Thanks,

Rob

Create a cool, new character for your Windows Live? Messenger.  Check it out 

-----Inline Attachment Follows-----


List: http://www.antlr.org/mailman/listinfo/antlr-interest
Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090607/46cda58a/attachment.html 

From dukie_banderjee at hotmail.com  Sun Jun  7 14:30:05 2009
From: dukie_banderjee at hotmail.com (Dukie Banderjee)
Date: Sun, 7 Jun 2009 17:30:05 -0400
Subject: [antlr-interest] Customizing token separators without
 recompiling
In-Reply-To: <943797.36270.qm@web33304.mail.mud.yahoo.com>
References: <943797.36270.qm@web33304.mail.mud.yahoo.com>
Message-ID: <COL113-W55343E4851F9ABB80B1FB892460@phx.gbl>


Hi,

Sorry, I'm not following you. How would that work? E.g. A new customer comes along, they have their format that uses '_' (or whatever), and how do I get the lexer/parser to recognize their file format without re-generating/re-compiling the lexer/parser? What would Perl operate on? The grammar? Wouldn't that require re-generating/re-compiling the lexer?

Rob

Date: Sun, 7 Jun 2009 12:48:50 -0700
From: jsrs701 at yahoo.com
Subject: Re: [antlr-interest] Customizing token separators without recompiling
To: antlr-interest at antlr.org; dukie_banderjee at hotmail.com

Howdy,

I'm guessing there's more to the problem than just supporting arbitrary field separation tokens, because if that's all there is, just use something like perl and store the separator(s) in a config file...?

--S

--- On Sun, 6/7/09, Dukie Banderjee <dukie_banderjee at hotmail.com> wrote:

From: Dukie Banderjee <dukie_banderjee at hotmail.com>
Subject: [antlr-interest] Customizing token separators without recompiling
To: antlr-interest at antlr.org
Date: Sunday, June 7, 2009, 8:25 AM




Hi everyone,

I'm new to the list and new to ANTLR. I have a specific problem I need to solve and I hope ANTLR can help.

Our client has several end-customers who all have slightly different document formats used for data interchange.

All the documents are basically 'standard' EDI documents, meaning they have the same basic syntax. However, some customers will use a '+' to separate values, some will use '*', others will use '~', etc. (I'm reminded of the old saying, "The great thing about standards is that there are so many to choose from!")

So, basically, the following inputs are all basically the same, except for the character used to separate tokens:
FST*4290*D*W*20070607
FST+4290+D+W+20070607
FST~4290~D~W~20070607

The thing is, we don't know ahead of time which separator characters might be used in the future, and we need to be able to tweak each end-customer's file format without re-compiling the
 lexer/parser. For example, a year from now there might be a customer who decides to use '_' or '$' or whatever, and we need to provide our client with a simple way (e.g. a per-customer configuration file) to customize the lexer/parser for such situations, without re-generating/re-compiling.

So, is this possible with ANTLR? How would I do this? Would it require a custom Lexer subclass with constructor parameters (e.g. new CustomLexer('_')) or something? How would this mesh with the generated lexer code from ANTLR?

I'm quite new to tools such as ANTLR (and parsers in general), so any help would be much appreciated. I really don't know where to start with this problem. For a hand-coded parser it's fairly simple, but I don't know enough about the workings of ANTLR to see where I would need to tweak it.

Thanks,

Rob

Create a cool, new character for your Windows Live? Messenger.  Check it out 

-----Inline Attachment Follows-----


List: http://www.antlr.org/mailman/listinfo/antlr-interest
Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address

_________________________________________________________________
Windows Live helps you keep up with all your friends, in one place.
http://go.microsoft.com/?linkid=9660826
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090607/5960c829/attachment.html 

From jsrs701 at yahoo.com  Sun Jun  7 15:02:09 2009
From: jsrs701 at yahoo.com (J. Stephen Riley Silber)
Date: Sun, 7 Jun 2009 15:02:09 -0700 (PDT)
Subject: [antlr-interest] Customizing token separators without
	recompiling
Message-ID: <971320.64135.qm@web33303.mail.mud.yahoo.com>

Oh, I'm saying you wouldn't want to use a grammar at all.? The problem you've described is lexical, not grammatical.? If you simply want to break apart a line of text based on an arbitrary delimiter, it would be much easier to write a program in Perl, Python, Java, etc. that split the text based on a configuration setting.

If further parsing needs to happen on the newly-split fields, then you can attack that problem piecemeal on an individual basis.

Make sense?

--- On Sun, 6/7/09, Dukie Banderjee <dukie_banderjee at hotmail.com> wrote:

From: Dukie Banderjee <dukie_banderjee at hotmail.com>
Subject: RE: [antlr-interest] Customizing token separators without recompiling
To: jsrs701 at yahoo.com, antlr-interest at antlr.org
Date: Sunday, June 7, 2009, 2:30 PM




#yiv1630828363 .hmmessage P
{
margin:0px;padding:0px;}
#yiv1630828363 {
font-size:10pt;font-family:Verdana;}

Hi,

Sorry, I'm not following you. How would that work? E.g. A new customer comes along, they have their format that uses '_' (or whatever), and how do I get the lexer/parser to recognize their file format without re-generating/re-compiling the lexer/parser? What would Perl operate on? The grammar? Wouldn't that require re-generating/re-compiling the lexer?

Rob

Date: Sun, 7 Jun 2009 12:48:50 -0700
From: jsrs701 at yahoo.com
Subject: Re: [antlr-interest] Customizing token separators without recompiling
To: antlr-interest at antlr.org; dukie_banderjee at hotmail.com

Howdy,

I'm guessing there's more to the problem than just supporting arbitrary field separation tokens, because if that's all there is, just use something like perl and store the separator(s) in a config file...?

--S

--- On Sun, 6/7/09, Dukie Banderjee <dukie_banderjee at hotmail.com> wrote:

From: Dukie Banderjee <dukie_banderjee at hotmail.com>
Subject: [antlr-interest] Customizing token separators without recompiling
To: antlr-interest at antlr.org
Date: Sunday, June 7, 2009, 8:25 AM




#yiv1630828363 .ExternalClass #EC_yiv791166732 .EC_hmmessage P
{padding:0px;}
#yiv1630828363 .ExternalClass #EC_yiv791166732
{font-size:10pt;font-family:Verdana;}

Hi everyone,

I'm new to the list and new to ANTLR. I have a specific problem I need to solve and I hope ANTLR can help.

Our client has several end-customers who all have slightly different document formats used for data interchange.

All the documents are basically 'standard' EDI documents, meaning they have the same basic syntax. However, some customers will use a '+' to separate values, some will use '*', others will use '~', etc. (I'm reminded of the old saying, "The great thing about standards is that there are so many to choose from!")

So, basically, the following inputs are all basically the same, except for the character used to separate tokens:
FST*4290*D*W*20070607
FST+4290+D+W+20070607
FST~4290~D~W~20070607

The thing is, we don't know ahead of time which separator characters might be used in the future, and we need to be able to tweak each end-customer's file format without re-compiling the
 lexer/parser. For example, a year from now there might be a customer who decides to use '_' or '$' or whatever, and we need to provide our client with a simple way (e.g. a per-customer configuration file) to customize the lexer/parser for such situations, without re-generating/re-compiling.

So, is this possible with ANTLR? How would I do this? Would it require a custom Lexer subclass with constructor parameters (e.g. new CustomLexer('_')) or something? How would this mesh with the generated lexer code from ANTLR?

I'm quite new to tools such as ANTLR (and parsers in general), so any help would be much appreciated. I really don't know where to start with this problem. For a hand-coded parser it's fairly simple, but I don't know enough about the workings of ANTLR to see where I would need to tweak it.

Thanks,

Rob

Create a cool, new character for your Windows Live? Messenger.  Check it out 

-----Inline Attachment Follows-----


List: http://www.antlr.org/mailman/listinfo/antlr-interest
Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address

Windows Live helps you keep up with all your friends,  in one place. 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090607/353b8206/attachment.html 

From steve at stevecooper.org  Sun Jun  7 15:30:49 2009
From: steve at stevecooper.org (Steve Cooper)
Date: Sun, 7 Jun 2009 23:30:49 +0100
Subject: [antlr-interest] Customizing token separators without
	recompiling
In-Reply-To: <971320.64135.qm@web33303.mail.mud.yahoo.com>
References: <971320.64135.qm@web33303.mail.mud.yahoo.com>
Message-ID: <74b7ba600906071530o682eb573u78fa5cd8432766cf@mail.gmail.com>

I presume that the separator changes other lexing rules, too? If one
customer chooses to use '$' as the separator, their other tokens can't
contain '$'. But if someone chooses '~', then a '$' *can* exist in the
other tokens. So the whole lexer will have to change.

If that's not so, then you can just pre-process the input before you
feed it to the lexer. So something like;

   constantSeparator = "~"
   cleanInput = originalInput.replace(userSeparator, constantSeparator);

and then write your lexer so it uses the constant separator '~'

   Steve

From dukie_banderjee at hotmail.com  Sun Jun  7 16:45:49 2009
From: dukie_banderjee at hotmail.com (Dukie Banderjee)
Date: Sun, 7 Jun 2009 19:45:49 -0400
Subject: [antlr-interest] Customizing token separators without
 recompiling
In-Reply-To: <971320.64135.qm@web33303.mail.mud.yahoo.com>
References: <971320.64135.qm@web33303.mail.mud.yahoo.com>
Message-ID: <COL113-W454706B8EB2CD2B17A0A6592460@phx.gbl>


"If you simply want to break apart a line of text based on an arbitrary
delimiter, it would be much easier to write a program in Perl, Python,
Java, etc. that split the text based on a configuration setting."

That's basically what I'm doing right now (in C#, by hand). Are you saying that ANTLR can't work at all with this?

At some level it becomes a parsing issue. Each line has a different meaning, and should perform a different action and/or gather different information.

It seems to me that these files would lend themselves very well to an intermediate AST form. For example, the style of document I showed you earlier was an Ansi 830 format. There is another format which is UN Edifact, which looks like this:
DTM+2:20080523:102'
QTY+1:1500:EA'
SCC+1++D:ZZZ'

Although this looks totally different, it is logically the same information as the previous example I showed (FST*...).

I was hoping to use ANTLR to work on two different grammars to translate the raw text into tokens, which could further be translated into a generic command tree (basically to add records into a DB) that would be functionally equivalent whether it originally came from Ansi 830 or UN Edifact.

It seems to me that ANTLR would have been a good tool to use to do this translation. I'd rather not be forced to do the entire thing by hand just because of this token separator issue.

Is there a way I could perform the token splitting manually (as you suggest), but then feed the resulting tokens into an ANTLR-generated parser to do the rest of the work?

Thanks,

Rob

Date: Sun, 7 Jun 2009 15:02:09 -0700
From: jsrs701 at yahoo.com
Subject: RE: [antlr-interest] Customizing token separators without recompiling
To: antlr-interest at antlr.org; dukie_banderjee at hotmail.com

Oh, I'm saying you wouldn't want to use a grammar at all.  The problem you've described is lexical, not grammatical.  If you simply want to break apart a line of text based on an arbitrary delimiter, it would be much easier to write a program in Perl, Python, Java, etc. that split the text based on a configuration setting.

If further parsing needs to happen on the newly-split fields, then you can attack that problem piecemeal on an individual basis.

Make sense?


_________________________________________________________________
We are your photos. Share us now with Windows Live Photos.
http://go.microsoft.com/?linkid=9666047

From steve at stevecooper.org  Sun Jun  7 17:14:19 2009
From: steve at stevecooper.org (Steve Cooper)
Date: Mon, 8 Jun 2009 01:14:19 +0100
Subject: [antlr-interest] Customizing token separators without
	recompiling
In-Reply-To: <COL113-W454706B8EB2CD2B17A0A6592460@phx.gbl>
References: <971320.64135.qm@web33303.mail.mud.yahoo.com>
	<COL113-W454706B8EB2CD2B17A0A6592460@phx.gbl>
Message-ID: <74b7ba600906071714i4cbcc18ax397de17a67f83b8d@mail.gmail.com>

I don't know if this is any closer, but I had this idea.

Your problem seems to be in getting a lexer which will give you the
right stream of tokens, and not in writing the parser that feeds off
them. You could write your own lexer to do the splitting of the
strings, and use ANTLR to write the parser. ANTLR parsers don't feed
directly off a string, but off an ITokenSource object;

    public interface ITokenSource
    {
        string SourceName { get; }
        IToken NextToken();
    }

You could create your own token source which would do the separation
by hand, and return a stream of tokens. Something like

    public class UnEdifactLexer: ITokenSource
    {
        // token types
        public const int EOF = -1;
        public const int ID = 0;
        public const int NUMBER = 1;
        public const int COLON = 2;
        ...

        // all the tokens in the input
        private Queue<IToken> tokens;

        public UnEditfactLexer(string input, char userSeparator)
        {
            this.tokens = new Queue<IToken>();
            foreach(var line in input.Split('\n'))
            {
                foreach(var piece in CustomSplit(userSeparator))
                {
                    // custom code to convert a line
                    // into a set of tokens
                    tokens.Enqueue(new Token(...));
                }
            }
        }

        public IToken NextToken()
        {
            if (tokens.Count > 0)
                return tokens.Dequeue();
            else
                return new Token(EOF,...);
        }
    }

Then you write a parser grammar in ANTLR which does the parsing and
tree-building.

Anyway, the benefit of this approach is that you have full power over
splitting up the strings and converting them into tokens. After that,
the parser takes up the strain.

    Steve

From dukie_banderjee at hotmail.com  Sun Jun  7 18:10:49 2009
From: dukie_banderjee at hotmail.com (Dukie Banderjee)
Date: Sun, 7 Jun 2009 21:10:49 -0400
Subject: [antlr-interest] Customizing token separators without
 recompiling
In-Reply-To: <74b7ba600906071714i4cbcc18ax397de17a67f83b8d@mail.gmail.com>
References: <971320.64135.qm@web33303.mail.mud.yahoo.com>
	<COL113-W454706B8EB2CD2B17A0A6592460@phx.gbl> 
	<74b7ba600906071714i4cbcc18ax397de17a67f83b8d@mail.gmail.com>
Message-ID: <COL113-W62C46AECD0D9297CF9BDFE92470@phx.gbl>


Thanks, Steve, that looks very promising!

Rob

----------------------------------------
> Date: Mon, 8 Jun 2009 01:14:19 +0100
> Subject: Re: [antlr-interest] Customizing token separators without recompiling
> From: steve at stevecooper.org
> To: dukie_banderjee at hotmail.com
> CC: jsrs701 at yahoo.com; antlr-interest at antlr.org
>
> I don't know if this is any closer, but I had this idea.
>
> Your problem seems to be in getting a lexer which will give you the
> right stream of tokens, and not in writing the parser that feeds off
> them. You could write your own lexer to do the splitting of the
> strings, and use ANTLR to write the parser. ANTLR parsers don't feed
> directly off a string, but off an ITokenSource object;
>
> public interface ITokenSource
> {
> string SourceName { get; }
> IToken NextToken();
> }
>
> You could create your own token source which would do the separation
> by hand, and return a stream of tokens. Something like
>
> public class UnEdifactLexer: ITokenSource
> {
> // token types
> public const int EOF = -1;
> public const int ID = 0;
> public const int NUMBER = 1;
> public const int COLON = 2;
> ...
>
> // all the tokens in the input
> private Queue tokens;
>
> public UnEditfactLexer(string input, char userSeparator)
> {
> this.tokens = new Queue();
> foreach(var line in input.Split('\n'))
> {
> foreach(var piece in CustomSplit(userSeparator))
> {
> // custom code to convert a line
> // into a set of tokens
> tokens.Enqueue(new Token(...));
> }
> }
> }
>
> public IToken NextToken()
> {
> if (tokens.Count> 0)
> return tokens.Dequeue();
> else
> return new Token(EOF,...);
> }
> }
>
> Then you write a parser grammar in ANTLR which does the parsing and
> tree-building.
>
> Anyway, the benefit of this approach is that you have full power over
> splitting up the strings and converting them into tokens. After that,
> the parser takes up the strain.
>
> Steve

_________________________________________________________________
Windows Live helps you keep up with all your friends, in one place.
http://go.microsoft.com/?linkid=9660826

From jimi at temporal-wave.com  Sun Jun  7 18:52:06 2009
From: jimi at temporal-wave.com (Jim Idle)
Date: Sun, 7 Jun 2009 18:52:06 -0700
Subject: [antlr-interest] Customizing token separators without
	recompiling
In-Reply-To: <COL113-W454706B8EB2CD2B17A0A6592460@phx.gbl>
References: <971320.64135.qm@web33303.mail.mud.yahoo.com>
	<COL113-W454706B8EB2CD2B17A0A6592460@phx.gbl>
Message-ID: <93CA09C6-2883-45A5-B9F5-C8A58DAC9DE1@temporal-wave.com>

Hi,

If the entire structure is just these lines then it is likely that a  
parser is overkill to be honest. However you can create a lexer rule  
that changes it's definition at runtime, but you must be careful that  
set of delimiters would never otherwise appear in the input.

What you do is add a member method        to the lexer that accepts  
the delimiter then use a gated predicate to select the token:

@lexer::members {
protected int delim;
public void setDelim(int d) {
   delim = d;
}
}

DELIM : {input.LA(1) == d}?=> . ;

But note that by using this rule, you will always get DELIM for that  
character and so if you had:

SEMI : ';' ;

But set the delimiter to ';' then you would no longer get SEMI.

Perhaps it would be best to write a custom lexer.

EDU is another good idea screwed up by design by comittee where none  
if the members will give up their proprietory formats :(

Jim


On Jun 7, 2009, at 4:45 PM, Dukie Banderjee  
<dukie_banderjee at hotmail.com> wrote:

>
> "If you simply want to break apart a line of text based on an  
> arbitrary
> delimiter, it would be much easier to write a program in Perl, Python,
> Java, etc. that split the text based on a configuration setting."
>
> That's basically what I'm doing right now (in C#, by hand). Are you  
> saying that ANTLR can't work at all with this?
>
> At some level it becomes a parsing issue. Each line has a different  
> meaning, and should perform a different action and/or gather  
> different information.
>
> It seems to me that these files would lend themselves very well to  
> an intermediate AST form. For example, the style of document I  
> showed you earlier was an Ansi 830 format. There is another format  
> which is UN Edifact, which looks like this:
> DTM+2:20080523:102'
> QTY+1:1500:EA'
> SCC+1++D:ZZZ'
>
> Although this looks totally different, it is logically the same  
> information as the previous example I showed (FST*...).
>
> I was hoping to use ANTLR to work on two different grammars to  
> translate the raw text into tokens, which could further be  
> translated into a generic command tree (basically to add records  
> into a DB) that would be functionally equivalent whether it  
> originally came from Ansi 830 or UN Edifact.
>
> It seems to me that ANTLR would have been a good tool to use to do  
> this translation. I'd rather not be forced to do the entire thing by  
> hand just because of this token separator issue.
>
> Is there a way I could perform the token splitting manually (as you  
> suggest), but then feed the resulting tokens into an ANTLR-generated  
> parser to do the rest of the work?
>
> Thanks,
>
> Rob
>
> Date: Sun, 7 Jun 2009 15:02:09 -0700
> From: jsrs701 at yahoo.com
> Subject: RE: [antlr-interest] Customizing token separators without  
> recompiling
> To: antlr-interest at antlr.org; dukie_banderjee at hotmail.com
>
> Oh, I'm saying you wouldn't want to use a grammar at all.  The  
> problem you've described is lexical, not grammatical.  If you simply  
> want to break apart a line of text based on an arbitrary delimiter,  
> it would be much easier to write a program in Perl, Python, Java,  
> etc. that split the text based on a configuration setting.
>
> If further parsing needs to happen on the newly-split fields, then  
> you can attack that problem piecemeal on an individual basis.
>
> Make sense?
>
>
> _________________________________________________________________
> We are your photos. Share us now with Windows Live Photos.
> http://go.microsoft.com/?linkid=9666047
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address

From christian.schladetsch at gmail.com  Mon Jun  8 01:58:27 2009
From: christian.schladetsch at gmail.com (Christian Schladetsch)
Date: Mon, 8 Jun 2009 20:58:27 +1200
Subject: [antlr-interest] HLSL Parser
Message-ID: <6442c4ae0906080158k338bd16fy437e6cb5cdb06068@mail.gmail.com>

Hello,

Before I write a HLSL parser, I'd like to know if anyone has previous work
on this.

HLSL is the shader-language used by DirectX for geometry, vertex and pixel
shaders.

Thanks,
Christian.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090608/87014ae0/attachment.html 

From steven at obua.de  Mon Jun  8 02:19:49 2009
From: steven at obua.de (Steven Obua)
Date: Mon, 8 Jun 2009 11:19:49 +0200
Subject: [antlr-interest] packrat vs. LL(*)
Message-ID: <B48A7A44-AD79-4DB6-981D-1472B4E0A035@obua.de>

Hi,

I am currently building a parser with ANTLR; I am really happy about  
this great tool!

I found that the most convenient settings for my purposes are

backtrack=true
memoize=true
k=1

when leaving out the "k=1" option, antlr cannot process my grammar, it  
runs into a timeout or something like that.

So, as I understand, with backtrack=true and memoize=true I basically  
switch to linear time / linear space packrat parsing. If I accept the  
constant slow down and the added space requirements, then it seems to  
me that LL(*) parsing becomes superfluous. Shouldn't antlr therefore  
maybe include a documented option "packrat" which implies the above  
three option settings? I think packrat parsing is pretty popular, but  
it took  me about a day to figure out the exact settings I need to  
make it happen in ANTLR.

Cheers,

Steven Obua

PS: USF rules!, have been an exchange student there for almost a year  
about 10 years ago :-)

From micha-1 at fantasymail.de  Mon Jun  8 03:43:53 2009
From: micha-1 at fantasymail.de (Michael)
Date: Mon, 8 Jun 2009 12:43:53 +0200
Subject: [antlr-interest] packrat vs. LL(*)
In-Reply-To: <B48A7A44-AD79-4DB6-981D-1472B4E0A035@obua.de>
References: <B48A7A44-AD79-4DB6-981D-1472B4E0A035@obua.de>
Message-ID: <200906081243.53741.micha-1@fantasymail.de>

Am Monday 08 June 2009 11:19:49 schrieb Steven Obua:
> Hi,
>
>
> So, as I understand, with backtrack=true and memoize=true I basically
> switch to linear time / linear space packrat parsing.

I'm not sure if it's a the same as a packrat parser (like rats! for example).
There are some differences, the biggest is in a packrat parser you have 
ordered choises:  
if in a rule  e1 | e2   the first (e1) succeeds. the second is ignored. So 
unlike normal BNF definitions you cannot simply switch the order of the 
alternatives.

And you don't use a separate lexer, it's all in one grammar

 Michael

From steven at obua.de  Mon Jun  8 04:23:59 2009
From: steven at obua.de (Steven Obua)
Date: Mon, 8 Jun 2009 13:23:59 +0200
Subject: [antlr-interest] packrat vs. LL(*)
In-Reply-To: <200906081243.53741.micha-1@fantasymail.de>
References: <B48A7A44-AD79-4DB6-981D-1472B4E0A035@obua.de>
	<200906081243.53741.micha-1@fantasymail.de>
Message-ID: <E5C4B0E9-3E1F-4D6F-BE5B-FE5D0B9B0286@obua.de>

I am not entirely sure it is the same thing, too, but I don't see any  
difference so far (given the three options settings of backtrack=true,  
memoize=true, k=1). Sure, it is all in one grammar, but this is more a  
convenience thing than a true difference to packrat parsing?

As for the ordered rules, it is the same in ANTLR when you use  
backtrack=true. Look for example at the following grammar:

---------------------------------------------
grammar rats_test;

options {
language=Java;
output=AST;
ASTLabelType=CommonTree;
backtrack=true;
memoize=true;
k=1;
}

a 	:	 'A' | 'A' 'B'^;
------------------------------------------

This grammar will not recognize "AB"  for a.

Cheers,

Steven


On Jun 8, 2009, at 12:43 PM, Michael wrote:

>> So, as I understand, with backtrack=true and memoize=true I basically
>> switch to linear time / linear space packrat parsing.
>
> I'm not sure if it's a the same as a packrat parser (like rats! for  
> example).
> There are some differences, the biggest is in a packrat parser you  
> have
> ordered choises:
> if in a rule  e1 | e2   the first (e1) succeeds. the second is  
> ignored. So
> unlike normal BNF definitions you cannot simply switch the order of  
> the
> alternatives.
>
> And you don't use a separate lexer, it's all in one grammar
>

From micha-1 at fantasymail.de  Mon Jun  8 04:30:04 2009
From: micha-1 at fantasymail.de (Michael)
Date: Mon, 8 Jun 2009 13:30:04 +0200
Subject: [antlr-interest] packrat vs. LL(*)
In-Reply-To: <E5C4B0E9-3E1F-4D6F-BE5B-FE5D0B9B0286@obua.de>
References: <B48A7A44-AD79-4DB6-981D-1472B4E0A035@obua.de>
	<200906081243.53741.micha-1@fantasymail.de>
	<E5C4B0E9-3E1F-4D6F-BE5B-FE5D0B9B0286@obua.de>
Message-ID: <200906081330.04262.micha-1@fantasymail.de>

Am Monday 08 June 2009 13:23:59 schrieb Steven Obua:
> ---------------------------------------------
> grammar rats_test;
>
> options {
> language=Java;
> output=AST;
> ASTLabelType=CommonTree;
> backtrack=true;
> memoize=true;
> k=1;
> }
>
> a 	:	 'A' | 'A' 'B'^;
> ------------------------------------------

I see.
Maybe one should find an example grammar which needs different lexers,
this is easy with an packrat grammar (since you have no lexer), but not so 
with a normal lexer / parser combi.

cheers,
 Michael


From steven at obua.de  Mon Jun  8 04:36:53 2009
From: steven at obua.de (Steven Obua)
Date: Mon, 8 Jun 2009 13:36:53 +0200
Subject: [antlr-interest] packrat vs. LL(*)
In-Reply-To: <200906081330.04262.micha-1@fantasymail.de>
References: <B48A7A44-AD79-4DB6-981D-1472B4E0A035@obua.de>
	<200906081243.53741.micha-1@fantasymail.de>
	<E5C4B0E9-3E1F-4D6F-BE5B-FE5D0B9B0286@obua.de>
	<200906081330.04262.micha-1@fantasymail.de>
Message-ID: <703842BC-B5AF-4ACD-BA60-758F3F13D0FC@obua.de>


On Jun 8, 2009, at 1:30 PM, Michael wrote:

>
> I see.
> Maybe one should find an example grammar which needs different lexers,
> this is easy with an packrat grammar (since you have no lexer), but  
> not so
> with a normal lexer / parser combi.
>

It is really just a parsing question, the whole lexing issue is  
besides the point. Note that you can have ANTLR grammars without a  
lexer, just as in a packrat grammar.

Cheers,

Steven


From micha-1 at fantasymail.de  Mon Jun  8 04:57:39 2009
From: micha-1 at fantasymail.de (Michael)
Date: Mon, 8 Jun 2009 13:57:39 +0200
Subject: [antlr-interest] packrat vs. LL(*)
In-Reply-To: <703842BC-B5AF-4ACD-BA60-758F3F13D0FC@obua.de>
References: <B48A7A44-AD79-4DB6-981D-1472B4E0A035@obua.de>
	<200906081330.04262.micha-1@fantasymail.de>
	<703842BC-B5AF-4ACD-BA60-758F3F13D0FC@obua.de>
Message-ID: <200906081357.39517.micha-1@fantasymail.de>

Am Monday 08 June 2009 13:36:53 schrieb Steven Obua:
>
> It is really just a parsing question, the whole lexing issue is
> besides the point. Note that you can have ANTLR grammars without a
> lexer, just as in a packrat grammar.

if I use:
parser grammar P;

options {
        output = AST;
        backtrack=true;
        memoize=true;
        k=1;
}

start: content EOF;
content: 'a'+ ;

I get an error, since the lexer is missing:
ANTLR Parser Generator  Version 3.1.1
error(107): P.g:11:10: literal has no associated lexer rule: 'a'
error(107): P.g:11:10: literal has no associated lexer rule: 'a'



if I use instead:
grammar P;   // missing parser keyword

// rest the same

it works but generates a lexer.

cheers,
 Michael


From sylvain_gregory at bah.com  Mon Jun  8 05:33:28 2009
From: sylvain_gregory at bah.com (Sylvain, Gregory [USA])
Date: Mon, 8 Jun 2009 08:33:28 -0400
Subject: [antlr-interest] Newbie grammar question...
Message-ID: <FB989866CD29D341BCC77276F1ED9D12087B7626@MCLNEXVS01.resource.ds.bah.com>

Hello all,
 
I thought I've done a million times, but that was a while ago and now I
can't get this to work.  Can someone point me in the right direction:
 
 
stmt :    SUBJ_TOK COLON PHRASE+ NL+ ;
 
SUBJ_TOK   :     'SUBJECT' ;
COLON        :     ':' ;
PHRASE      :    ( '0'..'9' | 'A'..'Z' | ' ' | '\t') ;
NL                :    ( '\r' | '\n' ) ;
 
 
I keep getting EarlyExitException on all input when the ANTLR get to the
PHRASE.
 
"SUBJECT: FOO\n" ==> reads SUBJECT_TOK COLON "F" EarlyExitException and
Resync
 
Thanks in advance for your clarifications.
Greg
 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090608/42d01569/attachment.html 

From micha-1 at fantasymail.de  Mon Jun  8 05:51:30 2009
From: micha-1 at fantasymail.de (Michael)
Date: Mon, 8 Jun 2009 14:51:30 +0200
Subject: [antlr-interest] Newbie grammar question...
In-Reply-To: <FB989866CD29D341BCC77276F1ED9D12087B7626@MCLNEXVS01.resource.ds.bah.com>
References: <FB989866CD29D341BCC77276F1ED9D12087B7626@MCLNEXVS01.resource.ds.bah.com>
Message-ID: <200906081451.30475.micha-1@fantasymail.de>

Am Monday 08 June 2009 14:33:28 schrieb Sylvain, Gregory [USA]:
>
> stmt :    SUBJ_TOK COLON PHRASE+ NL+ ;

it works for me after adding EOF to the stmt rule:
stmt :    SUBJ_TOK COLON PHRASE+ NL+ EOF;

 Michael

From indhu.b at s7software.com  Mon Jun  8 06:07:36 2009
From: indhu.b at s7software.com (Indhu Bharathi)
Date: Mon, 8 Jun 2009 18:37:36 +0530
Subject: [antlr-interest] Newbie grammar question...
In-Reply-To: <FB989866CD29D341BCC77276F1ED9D12087B7626@MCLNEXVS01.resource.ds.bah.com>
References: <FB989866CD29D341BCC77276F1ED9D12087B7626@MCLNEXVS01.resource.ds.bah.com>
Message-ID: <01ce01c9e83a$1873f6d0$495be470$@b@s7software.com>

I don't get any exception. BTW, it is good to match the entire 'phrase' as
one token in the lexical analysis itself. Something like:

 

PHRASE      :    ( '0'..'9' | 'A'..'Z' | ' ' | '\t')+ ;

 

and modify stmt to:

 

stmt :    SUBJ_TOK COLON PHRASE NL+ ;

 

Else, you'll end up creating too many tokens (one per each char).

 

Cheers, Indhu

 

 

From: antlr-interest-bounces at antlr.org
[mailto:antlr-interest-bounces at antlr.org] On Behalf Of Sylvain, Gregory
[USA]
Sent: Monday, June 08, 2009 6:03 PM
To: antlr-interest at antlr.org
Subject: [antlr-interest] Newbie grammar question...

 

Hello all,

 

I thought I've done a million times, but that was a while ago and now I
can't get this to work.  Can someone point me in the right direction:

 

 

stmt :    SUBJ_TOK COLON PHRASE+ NL+ ;

 

SUBJ_TOK   :     'SUBJECT' ;

COLON        :     ':' ;

PHRASE      :    ( '0'..'9' | 'A'..'Z' | ' ' | '\t') ;

NL                :    ( '\r' | '\n' ) ;

 

 

I keep getting EarlyExitException on all input when the ANTLR get to the
PHRASE.

 

"SUBJECT: FOO\n" ==> reads SUBJECT_TOK COLON "F" EarlyExitException and
Resync

 

Thanks in advance for your clarifications.

Greg

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090608/0ff2a8e6/attachment.html 

From dukie_banderjee at hotmail.com  Mon Jun  8 08:33:33 2009
From: dukie_banderjee at hotmail.com (Dukie Banderjee)
Date: Mon, 8 Jun 2009 11:33:33 -0400
Subject: [antlr-interest] Customizing token separators without
 recompiling
In-Reply-To: <93CA09C6-2883-45A5-B9F5-C8A58DAC9DE1@temporal-wave.com>
References: <971320.64135.qm@web33303.mail.mud.yahoo.com>
	<COL113-W454706B8EB2CD2B17A0A6592460@phx.gbl>
	<93CA09C6-2883-45A5-B9F5-C8A58DAC9DE1@temporal-wave.com>
Message-ID: <COL113-W47B2C713969F555DC8A01692470@phx.gbl>


Thanks Jim, that looks more like what I originally had in mind.

Rob

----------------------------------------
> From: jimi at temporal-wave.com
> To: dukie_banderjee at hotmail.com
> Subject: Re: [antlr-interest] Customizing token separators without recompiling
> Date: Sun, 7 Jun 2009 18:52:06 -0700
> CC: jsrs701 at yahoo.com; antlr-interest at antlr.org
>
> Hi,
>
> If the entire structure is just these lines then it is likely that a
> parser is overkill to be honest. However you can create a lexer rule
> that changes it's definition at runtime, but you must be careful that
> set of delimiters would never otherwise appear in the input.
>
> What you do is add a member method to the lexer that accepts
> the delimiter then use a gated predicate to select the token:
>
> @lexer::members {
> protected int delim;
> public void setDelim(int d) {
> delim = d;
> }
> }
>
> DELIM : {input.LA(1) == d}?=> . ;
>
> But note that by using this rule, you will always get DELIM for that
> character and so if you had:
>
> SEMI : ';' ;
>
> But set the delimiter to ';' then you would no longer get SEMI.
>
> Perhaps it would be best to write a custom lexer.
>
> EDU is another good idea screwed up by design by comittee where none
> if the members will give up their proprietory formats :(
>
> Jim
>
>
> On Jun 7, 2009, at 4:45 PM, Dukie Banderjee
>  wrote:
>
>>
>> "If you simply want to break apart a line of text based on an
>> arbitrary
>> delimiter, it would be much easier to write a program in Perl, Python,
>> Java, etc. that split the text based on a configuration setting."
>>
>> That's basically what I'm doing right now (in C#, by hand). Are you
>> saying that ANTLR can't work at all with this?
>>
>> At some level it becomes a parsing issue. Each line has a different
>> meaning, and should perform a different action and/or gather
>> different information.
>>
>> It seems to me that these files would lend themselves very well to
>> an intermediate AST form. For example, the style of document I
>> showed you earlier was an Ansi 830 format. There is another format
>> which is UN Edifact, which looks like this:
>> DTM+2:20080523:102'
>> QTY+1:1500:EA'
>> SCC+1++D:ZZZ'
>>
>> Although this looks totally different, it is logically the same
>> information as the previous example I showed (FST*...).
>>
>> I was hoping to use ANTLR to work on two different grammars to
>> translate the raw text into tokens, which could further be
>> translated into a generic command tree (basically to add records
>> into a DB) that would be functionally equivalent whether it
>> originally came from Ansi 830 or UN Edifact.
>>
>> It seems to me that ANTLR would have been a good tool to use to do
>> this translation. I'd rather not be forced to do the entire thing by
>> hand just because of this token separator issue.
>>
>> Is there a way I could perform the token splitting manually (as you
>> suggest), but then feed the resulting tokens into an ANTLR-generated
>> parser to do the rest of the work?
>>
>> Thanks,
>>
>> Rob
>>
>> Date: Sun, 7 Jun 2009 15:02:09 -0700
>> From: jsrs701 at yahoo.com
>> Subject: RE: [antlr-interest] Customizing token separators without
>> recompiling
>> To: antlr-interest at antlr.org; dukie_banderjee at hotmail.com
>>
>> Oh, I'm saying you wouldn't want to use a grammar at all. The
>> problem you've described is lexical, not grammatical. If you simply
>> want to break apart a line of text based on an arbitrary delimiter,
>> it would be much easier to write a program in Perl, Python, Java,
>> etc. that split the text based on a configuration setting.
>>
>> If further parsing needs to happen on the newly-split fields, then
>> you can attack that problem piecemeal on an individual basis.
>>
>> Make sense?
>>
>>
>> _________________________________________________________________
>> We are your photos. Share us now with Windows Live Photos.
>> http://go.microsoft.com/?linkid=9666047
>>
>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address

_________________________________________________________________
Attention all humans. We are your photos. Free us.
http://go.microsoft.com/?linkid=9666046

From jimi at temporal-wave.com  Mon Jun  8 12:05:09 2009
From: jimi at temporal-wave.com (Jim Idle)
Date: Mon, 08 Jun 2009 12:05:09 -0700
Subject: [antlr-interest] packrat vs. LL(*)
In-Reply-To: <B48A7A44-AD79-4DB6-981D-1472B4E0A035@obua.de>
References: <B48A7A44-AD79-4DB6-981D-1472B4E0A035@obua.de>
Message-ID: <4A2D60E5.1080902@temporal-wave.com>

Steven Obua wrote:
> Hi,
>
> I am currently building a parser with ANTLR; I am really happy about  
> this great tool!
>
> I found that the most convenient settings for my purposes are
>
> backtrack=true
> memoize=true
> k=1
>
> when leaving out the "k=1" option, antlr cannot process my grammar, it  
> runs into a timeout or something like that.
>   

You need to use the extended option -X conversiontimeout 10000
> So, as I understand, with backtrack=true and memoize=true I basically  
> switch to linear time / linear space packrat parsing. If I accept the  
> constant slow down and the added space requirements, then it seems to  
> me that LL(*) parsing becomes superfluous. Shouldn't antlr therefore  
> maybe include a documented option "packrat" which implies the above  
> three option settings? I think packrat parsing is pretty popular, but  
> it took  me about a day to figure out the exact settings I need to  
> make it happen in ANTLR.
Well, first of all, global backtracking should only be used if you don't 
care about error messages or performance. It is sort of a "get the job 
done" option that is useful for prototyping, proof of concept, or one 
off conversion programs (where you know the input is valid, you just 
want to change it to something else).

So, if your project qualifies for the above paragraph, then congrats - 
you are done ;-). However, the fact that you need these options probably 
means that your grammar as typed isn't really LL anything and probably 
needs a lot of left factoring. This usually happens when people type in 
a grammar by reading through the language spec and typing what they see; 
such documents are rarely written with writing an ANTLR grammar in mind. 
However, perhaps before too long, that's how languages will be 
documented! :-)

Jim

From jimi at temporal-wave.com  Mon Jun  8 12:09:16 2009
From: jimi at temporal-wave.com (Jim Idle)
Date: Mon, 08 Jun 2009 12:09:16 -0700
Subject: [antlr-interest] packrat vs. LL(*)
In-Reply-To: <703842BC-B5AF-4ACD-BA60-758F3F13D0FC@obua.de>
References: <B48A7A44-AD79-4DB6-981D-1472B4E0A035@obua.de>	<200906081243.53741.micha-1@fantasymail.de>	<E5C4B0E9-3E1F-4D6F-BE5B-FE5D0B9B0286@obua.de>	<200906081330.04262.micha-1@fantasymail.de>
	<703842BC-B5AF-4ACD-BA60-758F3F13D0FC@obua.de>
Message-ID: <4A2D61DC.3090002@temporal-wave.com>

An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090608/459b9de4/attachment.html 

From dukie_banderjee at hotmail.com  Mon Jun  8 12:14:40 2009
From: dukie_banderjee at hotmail.com (Dukie Banderjee)
Date: Mon, 8 Jun 2009 15:14:40 -0400
Subject: [antlr-interest] Bug in AntlrWorks debugger
Message-ID: <COL113-W37291EB534C09ED81A237C92470@phx.gbl>


Hi,

Is this the right place to post AntlrWorks bugs? I looked around but didn't find any other place.

It seems that AntlrWorks does not accept Tab characters (or backslashes, for that matter) in the Text field of the Input Text dialog box when you press the Debug button. 

The result was that the grammar was compiled, and prepared, but when it came to connecting to the debugger it timed out. Removing the Tab character from the input allowed the debugger to connect.

Originally, I thought for sure it was something to do with Windows Firewall, or my
Java configuration, so I reinstalled Java and reset the Firewall
exception for java.exe and javaw.exe. No change. It's definitely the Tab character in the input text.

I thought this was very strange, so I tried to use \t instead of a Tab character, however this also caused the debugger connection to time out. I also tried \\t and \\\\t, just in case it was some sort of escaping issue, but none of these worked either. Only when I remove Tabs and Backslashes does the debugger connect, and then debugging works fine.

I'm using Windows, and I wonder if this might have something to do with it. But still it seems strange. How is the input text transmitted to the debugger? Via command-line? That seems to me the only way a Tab or Backslash could interfere with connecting to the debugger.

Anyone else notice this?

Rob

_________________________________________________________________
Create a cool, new character for your Windows Live? Messenger. 
http://go.microsoft.com/?linkid=9656621

From steven at obua.de  Mon Jun  8 12:31:00 2009
From: steven at obua.de (Steven Obua)
Date: Mon, 8 Jun 2009 21:31:00 +0200
Subject: [antlr-interest] packrat vs. LL(*)
In-Reply-To: <4A2D60E5.1080902@temporal-wave.com>
References: <B48A7A44-AD79-4DB6-981D-1472B4E0A035@obua.de>
	<4A2D60E5.1080902@temporal-wave.com>
Message-ID: <BF1A4B5E-FA26-448E-A62C-197C33F047B1@obua.de>


On Jun 8, 2009, at 9:05 PM, Jim Idle wrote:

> Steven Obua wrote:
>> Hi,
>>
>> I am currently building a parser with ANTLR; I am really happy about
>> this great tool!
>>
>> I found that the most convenient settings for my purposes are
>>
>> backtrack=true
>> memoize=true
>> k=1
>>
>> when leaving out the "k=1" option, antlr cannot process my grammar,  
>> it
>> runs into a timeout or something like that.
>>
>
> You need to use the extended option -X conversiontimeout 10000

Does not work, I tried that before using 'k=1', it still does not  
terminate in reasonable time. I even give ANTLR at lot of RAM (12 GB),  
still doesn't cope.


>>
> Well, first of all, global backtracking should only be used if you  
> don't
> care about error messages or performance. It is sort of a "get the job
> done" option that is useful for prototyping, proof of concept, or one
> off conversion programs (where you know the input is valid, you just
> want to change it to something else).
>

That is not true.  That is why I am referring to packrat parsing,  
which still guarantees linear time parsing. You can't get better  
complexity for a parser :-)  About the constant factor slowdown I dont  
care so much, I just need to know that the speed I currently see from  
my parser scales. About memory usage I dont care so much either, my  
application is using way more system resources after the parsing than  
the parser itself ever will.

Cheers,
Steven

From bruce.bauman at andesaservices.com  Mon Jun  8 12:41:09 2009
From: bruce.bauman at andesaservices.com (Bruce Bauman)
Date: Mon, 8 Jun 2009 15:41:09 -0400
Subject: [antlr-interest] newbie grammar question
Message-ID: <15DF771CF9BEAE418AA0C8D745F73D1504EAAE5C@exchange.andesatpa.com>

I am trying to automate the translation of a huge base of Pascal source
code from one dialect (MetaWare) to another (FreePascal).

One change I need to make is to modify comments like this:

-- This is a comment 

To this

// This is a comment

My current rule looks like this:

SL_COMMENT_2
    :   '--' (options {greedy=false;} : . )* '\n'
        {$channel=HIDDEN;}
    ;

What's the easiest way to modify the rule so that '--' is replaced by
'//'?

I have RTFM but a working solution still eludes me.

Thanks.

-- Bruce
CONFIDENTIALITY NOTICE: This e-mail is confidential and intended
solely for the use of the individual or entity to which it is addressed.  If
you are not the intended recipient, be advised that you have received 
this email in error and that any use, dissemination, forwarding, printing 
or copying of this e-mail is strictly prohibited. If you received this e-mail
in error, please delete it from your computer and contact the sender.


From jimi at temporal-wave.com  Mon Jun  8 12:43:37 2009
From: jimi at temporal-wave.com (Jim Idle)
Date: Mon, 08 Jun 2009 12:43:37 -0700
Subject: [antlr-interest] packrat vs. LL(*)
In-Reply-To: <BF1A4B5E-FA26-448E-A62C-197C33F047B1@obua.de>
References: <B48A7A44-AD79-4DB6-981D-1472B4E0A035@obua.de>
	<4A2D60E5.1080902@temporal-wave.com>
	<BF1A4B5E-FA26-448E-A62C-197C33F047B1@obua.de>
Message-ID: <4A2D69E9.4040509@temporal-wave.com>

Steven Obua wrote:
>
> On Jun 8, 2009, at 9:05 PM, Jim Idle wrote:
>
>> Steven Obua wrote:
>>> Hi,
>>>
>>> I am currently building a parser with ANTLR; I am really happy about
>>> this great tool!
>>>
>>> I found that the most convenient settings for my purposes are
>>>
>>> backtrack=true
>>> memoize=true
>>> k=1
>>>
>>> when leaving out the "k=1" option, antlr cannot process my grammar, it
>>> runs into a timeout or something like that.
>>>
>>
>> You need to use the extended option -X conversiontimeout 10000
>
> Does not work, I tried that before using 'k=1', it still does not 
> terminate in reasonable time. I even give ANTLR at lot of RAM (12 GB), 
> still doesn't cope.
>
Then I suggest that your grammar needs some serious work.,
>
>>>
>> Well, first of all, global backtracking should only be used if you don't
>> care about error messages or performance. It is sort of a "get the job
>> done" option that is useful for prototyping, proof of concept, or one
>> off conversion programs (where you know the input is valid, you just
>> want to change it to something else).
>>
>
> That is not true.  
I assure you that it is.
> That is why I am referring to packrat parsing, which still guarantees 
> linear time parsing. 
And how are you guaranteeing linear time with global backtrack=true? All 
this really means is that it tries every alt you specify n the order you 
specify, which means that if your particular input is alt 12, it will 
try 11 others first. Now, that isn't quite true because ANTLR is a bit 
smarter than that, but it CAN be true. The parser time will be 
predictable and provable, but will generally spend a lot of time doing 
things it doesn't need to, and when there is a syntax error, it won't 
have much of a clue why.

What I said still applies - if your task doesn't involve a parser that 
will exist for 20 years, then who cares. If your task doesn't require 
good error messages and you don't care about resources (though I think 
you should if you will keep running the thing), then who cares.

But, if you turn on a timeout of 10000 and still cannot get through the 
grammar, then you need to consider fixing up your grammar.

> You can't get better complexity for a parser :-)  
I am not sure what you are trying to say here.
> About the constant factor slowdown I dont care so much, I just need to 
> know that the speed I currently see from my parser scales. 
Speed does not scale. Without more information, I can;t answer that 
question. Do you mean, will the parser rip through a 500K file in 
proportionate time to a 1K file, then that is one thing. If you mean 
will it work on a system when there are 3000 processes doing it 
simultaneously, then that is another (that probably doesn't involve Java 
;-).

> About memory usage I dont care so much either, my application is using 
> way more system resources after the parsing than the parser itself 
> ever will.
Hmmmm.

Jim

From jimi at temporal-wave.com  Mon Jun  8 12:54:15 2009
From: jimi at temporal-wave.com (Jim Idle)
Date: Mon, 08 Jun 2009 12:54:15 -0700
Subject: [antlr-interest] packrat vs. LL(*)
In-Reply-To: <A2868B19-BE92-4F53-9457-6DA49742FFDE@obua.de>
References: <B48A7A44-AD79-4DB6-981D-1472B4E0A035@obua.de>	<200906081243.53741.micha-1@fantasymail.de>	<E5C4B0E9-3E1F-4D6F-BE5B-FE5D0B9B0286@obua.de>	<200906081330.04262.micha-1@fantasymail.de>
	<703842BC-B5AF-4ACD-BA60-758F3F13D0FC@obua.de>
	<4A2D61DC.3090002@temporal-wave.com>
	<A2868B19-BE92-4F53-9457-6DA49742FFDE@obua.de>
Message-ID: <4A2D6C67.70705@temporal-wave.com>

Steven Obua wrote:
>>> It is really just a parsing question, the whole lexing issue is
>>> besides the point. Note that you can have ANTLR grammars without a
>>> lexer, just as in a packrat grammar.
>>>
>> No, it isn't. Even if you put your rules into 'literals'', ANTLR 
>> still produces a lexer; it isn't syntax directed lexing. However, if 
>> you have 'literals' only, then you should not end up with a an 
>> ambiguous lexer. The problems come from people turning on 
>> backtracking without a thought and just randomly typing; a good 
>> parser just doesn't happen that way :-)
>>
>
> Yes it is :-) I am not talking about an ambiguous lexer, but about an 
> ambiguous grammar. 
You need to distinguish between ambiguous grammar and ambiguous language.
> And ambigous grammars can be made non-ambiguous by forcing an order on 
> rules. This is what backtracking does, and this is what packrat 
> parsing does.
I think you probably need to read and experience a bit more before 
making such bold statements. I don't think you appreciate the differences.
>
> My parser is pretty good right know, I am very happy with it :-)
> Your comments imply that you think packrat grammars are not good 
> grammars. 
They might, if I was addressing questions about packrat grammars, but I 
am not, we are talking about grammars written with backtrack=true, and 
basically yes, they are not good grammars. The main reason is to do with 
error identification.
> People which accepted the packrat parsing paper at POPL, one of the 
> most respected conferences in computer science, seem to think different.
Your statement would be valid if they had accepted a paper about ANTLR 
backtrack=true and further if you were not taking the paper as 
justification for using the approach on your particular task, without 
telling us what that task is and why, in this case, the approach is 
sensible (which it may indeed be). The paper does not say "Oh, just go 
ahead and do it this way all the time", it is about the approach itself.

With a bit of up front effort it is usually much more time efficient 
(when using ANTLR) to write a good left factored grammar. Please 
remember this statement later when you are trying to track down where 
things are going wrong in your ambiguous grammar :-)

Jim

From jimi at temporal-wave.com  Mon Jun  8 12:56:46 2009
From: jimi at temporal-wave.com (Jim Idle)
Date: Mon, 08 Jun 2009 12:56:46 -0700
Subject: [antlr-interest] newbie grammar question
In-Reply-To: <15DF771CF9BEAE418AA0C8D745F73D1504EAAE5C@exchange.andesatpa.com>
References: <15DF771CF9BEAE418AA0C8D745F73D1504EAAE5C@exchange.andesatpa.com>
Message-ID: <4A2D6CFE.1030604@temporal-wave.com>

Bruce Bauman wrote:
> I am trying to automate the translation of a huge base of Pascal source
> code from one dialect (MetaWare) to another (FreePascal).
>
> One change I need to make is to modify comments like this:
>
> -- This is a comment 
>
> To this
>
> // This is a comment
>
> My current rule looks like this:
>
> SL_COMMENT_2
>     :   '--' (options {greedy=false;} : . )* '\n'
>         {$channel=HIDDEN;}
>     ;
>
> What's the easiest way to modify the rule so that '--' is replaced by
> '//'?
>   
Easiest:

{ $text = '//' + $text.substring(2); }

But, you could also just do that when you come to actually sending out 
the tokens as a rewritten stream.

Jim

From indhu.b at s7software.com  Mon Jun  8 12:58:37 2009
From: indhu.b at s7software.com (Indhu Bharathi)
Date: Tue, 9 Jun 2009 01:28:37 +0530
Subject: [antlr-interest] newbie grammar question
In-Reply-To: <15DF771CF9BEAE418AA0C8D745F73D1504EAAE5C@exchange.andesatpa.com>
References: <15DF771CF9BEAE418AA0C8D745F73D1504EAAE5C@exchange.andesatpa.com>
Message-ID: <022e01c9e873$83db7310$8b925930$@b@s7software.com>

SL_COMMENT_2
    :   '--' (options {greedy=false;} : . )* '\n' {$channel=HIDDEN;}
	{
		setText( "//" + getText().substring(2) );
	}
	
    ;

Should work.


-----Original Message-----
From: antlr-interest-bounces at antlr.org
[mailto:antlr-interest-bounces at antlr.org] On Behalf Of Bruce Bauman
Sent: Tuesday, June 09, 2009 1:11 AM
To: antlr-interest at antlr.org
Subject: [antlr-interest] newbie grammar question

I am trying to automate the translation of a huge base of Pascal source
code from one dialect (MetaWare) to another (FreePascal).

One change I need to make is to modify comments like this:

-- This is a comment 

To this

// This is a comment

My current rule looks like this:

SL_COMMENT_2
    :   '--' (options {greedy=false;} : . )* '\n'
        {$channel=HIDDEN;}
    ;

What's the easiest way to modify the rule so that '--' is replaced by
'//'?

I have RTFM but a working solution still eludes me.

Thanks.

-- Bruce
CONFIDENTIALITY NOTICE: This e-mail is confidential and intended
solely for the use of the individual or entity to which it is addressed.  If
you are not the intended recipient, be advised that you have received 
this email in error and that any use, dissemination, forwarding, printing 
or copying of this e-mail is strictly prohibited. If you received this
e-mail
in error, please delete it from your computer and contact the sender.


List: http://www.antlr.org/mailman/listinfo/antlr-interest
Unsubscribe:
http://www.antlr.org/mailman/options/antlr-interest/your-email-address


From steven at obua.de  Mon Jun  8 13:09:28 2009
From: steven at obua.de (Steven Obua)
Date: Mon, 8 Jun 2009 22:09:28 +0200
Subject: [antlr-interest] packrat vs. LL(*)
In-Reply-To: <4A2D69E9.4040509@temporal-wave.com>
References: <B48A7A44-AD79-4DB6-981D-1472B4E0A035@obua.de>
	<4A2D60E5.1080902@temporal-wave.com>
	<BF1A4B5E-FA26-448E-A62C-197C33F047B1@obua.de>
	<4A2D69E9.4040509@temporal-wave.com>
Message-ID: <C0CF8F4A-FDBF-4FAA-AE15-7B5EEF025305@obua.de>


On Jun 8, 2009, at 9:43 PM, Jim Idle wrote:

> And how are you guaranteeing linear time with global backtrack=true?  
> All
> this really means is that it tries every alt you specify n the order  
> you
> specify, which means that if your particular input is alt 12, it will
> try 11 others first. Now, that isn't quite true because ANTLR is a bit

Well, that's exactly why I am asking if ANTLR supports packrat  
parsing. I think that the options
backtrack=true, memoize=true, k=1 could be equivalent to packrat  
parsing. But I am not sure about it, so I would like to know if  
somebody on this mailing list here knows this for sure or has a  
counter argument.

For the linear time complexity, that is just the great thing about  
packrat. It's due to the memoization, so that for each pair (pos, N),  
where pos is the parsing position and N is the nonterminal to be  
parsed, you remember if you have done this parsing job earlier. The  
number of pairs (pos, N) is linear in the length of the text to be  
parsed, because there are only finitely many nonterminals in a  
grammar. So even if you are backtracking, you are still linear time  
when you are memoizing, because you don't backtrack more often than  
there are such pairs.


>
> smarter than that, but it CAN be true.

So it CANNOT be true.

>
> But, if you turn on a timeout of 10000 and still cannot get through  
> the
> grammar, then you need to consider fixing up your grammar.
>

Well, with the options I give, it finishes code generation in a few  
milli seconds. My grammar is very readable (which would be destroyed  
by left-factoring), the parser is sufficiently fast. In twenty years,  
it will be even faster.


>> You can't get better complexity for a parser :-)
> I am not sure what you are trying to say here.

Don't bother.

Cheers,

Steven

From steven at obua.de  Mon Jun  8 13:18:52 2009
From: steven at obua.de (Steven Obua)
Date: Mon, 8 Jun 2009 22:18:52 +0200
Subject: [antlr-interest] packrat vs. LL(*)
In-Reply-To: <4A2D6C67.70705@temporal-wave.com>
References: <B48A7A44-AD79-4DB6-981D-1472B4E0A035@obua.de>	<200906081243.53741.micha-1@fantasymail.de>	<E5C4B0E9-3E1F-4D6F-BE5B-FE5D0B9B0286@obua.de>	<200906081330.04262.micha-1@fantasymail.de>
	<703842BC-B5AF-4ACD-BA60-758F3F13D0FC@obua.de>
	<4A2D61DC.3090002@temporal-wave.com>
	<A2868B19-BE92-4F53-9457-6DA49742FFDE@obua.de>
	<4A2D6C67.70705@temporal-wave.com>
Message-ID: <8E209029-C46F-4B12-B83E-7C2950AC73A4@obua.de>

>
> With a bit of up front effort it is usually much more time efficient
> (when using ANTLR) to write a good left factored grammar. Please
> remember this statement later when you are trying to track down where
> things are going wrong in your ambiguous grammar :-)
>

I agree that not using backtrack = true and doing left factoring  
results in faster and less resource intensive parsing.

Now, what you do is to equal ambiguous with bad. That's why I mention  
packrat. With it, you interpret your grammar in a different way (and I  
think in a very same way like when you set backtrack=true) which makes  
it non-ambiguous. The grammar is actually easier to understand now  
than it would be if you were "optimizing" it to suit a particular  
parsing technique.

Steven

From parrt at cs.usfca.edu  Mon Jun  8 13:22:13 2009
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon, 8 Jun 2009 13:22:13 -0700
Subject: [antlr-interest] Bug in AntlrWorks debugger
In-Reply-To: <COL113-W37291EB534C09ED81A237C92470@phx.gbl>
References: <COL113-W37291EB534C09ED81A237C92470@phx.gbl>
Message-ID: <3C446B03-A534-42E8-B153-1080E34902AA@cs.usfca.edu>


On Jun 8, 2009, at 12:14 PM, Dukie Banderjee wrote:

>
> Hi,
>
> Is this the right place to post AntlrWorks bugs? I looked around but  
> didn't find any other place.
>
> It seems that AntlrWorks does not accept Tab characters (or  
> backslashes, for that matter) in the Text field of the Input Text  
> dialog box when you press the Debug button.

That could be. it's possible that the tab character means moveto the  
next field
Ter
>
>
> The result was that the grammar was compiled, and prepared, but when  
> it came to connecting to the debugger it timed out. Removing the Tab  
> character from the input allowed the debugger to connect.
>
> Originally, I thought for sure it was something to do with Windows  
> Firewall, or my
> Java configuration, so I reinstalled Java and reset the Firewall
> exception for java.exe and javaw.exe. No change. It's definitely the  
> Tab character in the input text.
>
> I thought this was very strange, so I tried to use \t instead of a  
> Tab character, however this also caused the debugger connection to  
> time out. I also tried \\t and \\\\t, just in case it was some sort  
> of escaping issue, but none of these worked either. Only when I  
> remove Tabs and Backslashes does the debugger connect, and then  
> debugging works fine.
>
> I'm using Windows, and I wonder if this might have something to do  
> with it. But still it seems strange. How is the input text  
> transmitted to the debugger? Via command-line? That seems to me the  
> only way a Tab or Backslash could interfere with connecting to the  
> debugger.
>
> Anyone else notice this?
>
> Rob
>
> _________________________________________________________________
> Create a cool, new character for your Windows Live? Messenger.
> http://go.microsoft.com/?linkid=9656621
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address


From parrt at cs.usfca.edu  Mon Jun  8 13:24:08 2009
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon, 8 Jun 2009 13:24:08 -0700
Subject: [antlr-interest] packrat vs. LL(*)
In-Reply-To: <C0CF8F4A-FDBF-4FAA-AE15-7B5EEF025305@obua.de>
References: <B48A7A44-AD79-4DB6-981D-1472B4E0A035@obua.de>
	<4A2D60E5.1080902@temporal-wave.com>
	<BF1A4B5E-FA26-448E-A62C-197C33F047B1@obua.de>
	<4A2D69E9.4040509@temporal-wave.com>
	<C0CF8F4A-FDBF-4FAA-AE15-7B5EEF025305@obua.de>
Message-ID: <E61254F5-C433-4577-81E5-3D6CCFA10B5F@cs.usfca.edu>


On Jun 8, 2009, at 1:09 PM, Steven Obua wrote:

>
> On Jun 8, 2009, at 9:43 PM, Jim Idle wrote:
>
>> And how are you guaranteeing linear time with global backtrack=true?
>> All
>> this really means is that it tries every alt you specify n the order
>> you
>> specify, which means that if your particular input is alt 12, it will
>> try 11 others first. Now, that isn't quite true because ANTLR is a  
>> bit
>
> Well, that's exactly why I am asking if ANTLR supports packrat
> parsing. I think that the options
> backtrack=true, memoize=true, k=1 could be equivalent to packrat
> parsing. But I am not sure about it, so I would like to know if
> somebody on this mailing list here knows this for sure or has a
> counter argument.

k=1 backtrack=true should give you a PEG equiv. to get packrat  
parsing, memoize=true

Ter

>
>
> For the linear time complexity, that is just the great thing about
> packrat. It's due to the memoization, so that for each pair (pos, N),
> where pos is the parsing position and N is the nonterminal to be
> parsed, you remember if you have done this parsing job earlier. The
> number of pairs (pos, N) is linear in the length of the text to be
> parsed, because there are only finitely many nonterminals in a
> grammar. So even if you are backtracking, you are still linear time
> when you are memoizing, because you don't backtrack more often than
> there are such pairs.
>
>
>>
>> smarter than that, but it CAN be true.
>
> So it CANNOT be true.
>
>>
>> But, if you turn on a timeout of 10000 and still cannot get through
>> the
>> grammar, then you need to consider fixing up your grammar.
>>
>
> Well, with the options I give, it finishes code generation in a few
> milli seconds. My grammar is very readable (which would be destroyed
> by left-factoring), the parser is sufficiently fast. In twenty years,
> it will be even faster.
>
>
>>> You can't get better complexity for a parser :-)
>> I am not sure what you are trying to say here.
>
> Don't bother.
>
> Cheers,
>
> Steven
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address


From indhu.b at s7software.com  Mon Jun  8 13:33:34 2009
From: indhu.b at s7software.com (Indhu Bharathi)
Date: Tue, 9 Jun 2009 02:03:34 +0530
Subject: [antlr-interest] Bug in AntlrWorks debugger
In-Reply-To: <COL113-W37291EB534C09ED81A237C92470@phx.gbl>
References: <COL113-W37291EB534C09ED81A237C92470@phx.gbl>
Message-ID: <022f01c9e878$65c9bfd0$315d3f70$@b@s7software.com>

ANTLRWORKS accepts tab in input box without any problem. The version I'm
using is 1.2.3


-----Original Message-----
From: antlr-interest-bounces at antlr.org
[mailto:antlr-interest-bounces at antlr.org] On Behalf Of Dukie Banderjee
Sent: Tuesday, June 09, 2009 12:45 AM
To: antlr-interest at antlr.org
Subject: [antlr-interest] Bug in AntlrWorks debugger


Hi,

Is this the right place to post AntlrWorks bugs? I looked around but didn't
find any other place.

It seems that AntlrWorks does not accept Tab characters (or backslashes, for
that matter) in the Text field of the Input Text dialog box when you press
the Debug button. 

The result was that the grammar was compiled, and prepared, but when it came
to connecting to the debugger it timed out. Removing the Tab character from
the input allowed the debugger to connect.

Originally, I thought for sure it was something to do with Windows Firewall,
or my
Java configuration, so I reinstalled Java and reset the Firewall
exception for java.exe and javaw.exe. No change. It's definitely the Tab
character in the input text.

I thought this was very strange, so I tried to use \t instead of a Tab
character, however this also caused the debugger connection to time out. I
also tried \\t and \\\\t, just in case it was some sort of escaping issue,
but none of these worked either. Only when I remove Tabs and Backslashes
does the debugger connect, and then debugging works fine.

I'm using Windows, and I wonder if this might have something to do with it.
But still it seems strange. How is the input text transmitted to the
debugger? Via command-line? That seems to me the only way a Tab or Backslash
could interfere with connecting to the debugger.

Anyone else notice this?

Rob

_________________________________________________________________
Create a cool, new character for your Windows LiveT Messenger. 
http://go.microsoft.com/?linkid=9656621

List: http://www.antlr.org/mailman/listinfo/antlr-interest
Unsubscribe:
http://www.antlr.org/mailman/options/antlr-interest/your-email-address


From parrt at cs.usfca.edu  Mon Jun  8 13:39:03 2009
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon, 8 Jun 2009 13:39:03 -0700
Subject: [antlr-interest] videos from the workshop
Message-ID: <88682060-F1DD-4B59-AD28-C0AAD649C481@cs.usfca.edu>

Hi, these are the videos taken during the lectures. The only problem  
is they don't seem to work on my office Mac though they worked on my  
home Mac. Hmm...i installed the WMV stuff for QuickTime, but I guess  
that's not sufficient. please let me know if these files work for you:

http://www.antlr.org/workshop/09

Ter

From dukie_banderjee at hotmail.com  Mon Jun  8 13:48:42 2009
From: dukie_banderjee at hotmail.com (Dukie Banderjee)
Date: Mon, 8 Jun 2009 16:48:42 -0400
Subject: [antlr-interest] Bug in AntlrWorks debugger
In-Reply-To: <3C446B03-A534-42E8-B153-1080E34902AA@cs.usfca.edu>
References: <COL113-W37291EB534C09ED81A237C92470@phx.gbl>
	<3C446B03-A534-42E8-B153-1080E34902AA@cs.usfca.edu>
Message-ID: <COL113-W364704741E9557CA76B0DD92470@phx.gbl>


> That could be. it's possible that the tab character means moveto the
> next field
> Ter

No, it was definitely a Tab char in the input box. However, I discovered what the real underlying problem was.

It wasn't actually the Tab char that was the problem, but that my grammar didn't recognize Tab, and so it was causing an infinite loop (I mistakenly used a * quantifier in one of my lexer rules instead of a +). This in turn caused AntlrWorks to think it was failing to connect, when actually the real problem was that the lexer process was stuck in a loop.

Does the debugger perform a complete parse *before* attempting to connect to the process? That would probably explain it. I was expecting the debugger to first connect, and *then* attempt to parse. In that way, I could have debugged the infinite looping. However, all I saw was a mysterious "Failed to connect" message which sent me on a wild goose chase.

FYI here's a sample grammar and input that would cause this usability bug to occur:

grammar Bug;

file       : line+ EOF ;
line       : field+ terminator ;
field      : SEP TEXT? ;
terminator : (NEWLINE | EOF) ;

NEWLINE    : '\r'? '\n' ;
TEXT       : ('a'..'z'|'A'..'Z'|' ')* ; // NOTE: Does not match Tab, and also has a * quantifier
SEP        : '*' ;

Input:
*a*a[Tab]a**

Note: Replace '[Tab]' with an actual Tab char. (In fact, even the '[' char will cause the bug to occur.)

Rob

----------------------------------------
> CC: antlr-interest at antlr.org
> From: parrt at cs.usfca.edu
> To: dukie_banderjee at hotmail.com
> Subject: Re: [antlr-interest] Bug in AntlrWorks debugger
> Date: Mon, 8 Jun 2009 13:22:13 -0700
>
>
> On Jun 8, 2009, at 12:14 PM, Dukie Banderjee wrote:
>
>>
>> Hi,
>>
>> Is this the right place to post AntlrWorks bugs? I looked around but
>> didn't find any other place.
>>
>> It seems that AntlrWorks does not accept Tab characters (or
>> backslashes, for that matter) in the Text field of the Input Text
>> dialog box when you press the Debug button.
>
> That could be. it's possible that the tab character means moveto the
> next field
> Ter

_________________________________________________________________
We are your photos. Share us now with Windows Live Photos.
http://go.microsoft.com/?linkid=9666047

From ian at telematter.com  Mon Jun  8 14:01:51 2009
From: ian at telematter.com (Ian Eyberg)
Date: Mon, 8 Jun 2009 16:01:51 -0500
Subject: [antlr-interest] videos from the workshop
In-Reply-To: <88682060-F1DD-4B59-AD28-C0AAD649C481@cs.usfca.edu>
References: <88682060-F1DD-4B59-AD28-C0AAD649C481@cs.usfca.edu>
Message-ID: <20090608210151.GA18447@spicetrader>

Awesome!
Thanks a lot for publishing those videos!

-ian

On 13:39 Mon 08 Jun     , Terence Parr wrote:
> Hi, these are the videos taken during the lectures. The only problem  
> is they don't seem to work on my office Mac though they worked on my  
> home Mac. Hmm...i installed the WMV stuff for QuickTime, but I guess  
> that's not sufficient. please let me know if these files work for you:
> 
> http://www.antlr.org/workshop/09
> 
> Ter
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address

From Viktor_Lioutyi at i2.com  Mon Jun  8 14:09:46 2009
From: Viktor_Lioutyi at i2.com (Viktor Lioutyi)
Date: Mon, 8 Jun 2009 16:09:46 -0500
Subject: [antlr-interest] template rewrites
Message-ID: <33A4D20438DA1C4A8D7A8981F072D25B19C040CCBF@DLMBXCCR.i2.com>

I encountered the same problem and the best solution I found so far

for literals:

numeric_literal
        :       INTEGER_LITERAL -> {%{$INTEGER_LITERAL.text}}
        |       DECIMAL_LITERAL -> {%{$DECIMAL_LITERAL.text}}
        |       FLOATING_POINT_LITERAL -> {%{$FLOATING_POINT_LITERAL.text}}
        ;

for rules:


function

        : castFunction -> {$castFunction.st}

        | trimFunction -> {$trimFunction.st}

        ...

        ;

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090608/91bbc2d6/attachment.html 

From shawmishrak at gmail.com  Mon Jun  8 14:36:46 2009
From: shawmishrak at gmail.com (Justin Holewinski)
Date: Mon, 8 Jun 2009 17:36:46 -0400
Subject: [antlr-interest] Target Language .stg Files - Token Names
Message-ID: <221ca3d10906081436o2c36053dx6d5d8078a2556ba6@mail.gmail.com>

I've been working on a C++ (STL + Boost) target for Antlr 3, and I'm
struggling with some StringTemplate semantics.  Specifically, when
generating code for matching tokens, the <token> template will sometimes
refer to a textual token name (e.g. ID) and other times it will refer to a
constant, the token identifier (e.g. 33).  Is there a way to determine,
within a StringTemplate rule, which of these representations is used?

I would like to generate code like:

match(MyParser::TOKEN_ID);

for token names, and

match(33);

for token constants, so I would like to do something like:

<if(token.isNumber)>
  match(<token>);
<else>
  match(MyParser::TOKEN_<token>);
<endif>

but how to do this is eluding me.


Currently, I am forced to use preprocessor magic to get by:

#undef ID
#define ID  MyParser::TOKEN_ID
...

which I hate to do for multiple reasons.


On a side note, is there any documentation of which attributes are avilable
for variables in target language .stg files?  For instance, what attributes
are available on a <rule>?  All of the information I find comes from
deciphering the other .stg files.


Thanks,

Justin Holewinski
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090608/9c48b3fa/attachment.html 

From Viktor_Lioutyi at i2.com  Mon Jun  8 14:51:50 2009
From: Viktor_Lioutyi at i2.com (Viktor Lioutyi)
Date: Mon, 8 Jun 2009 16:51:50 -0500
Subject: [antlr-interest] How does . (dot) work in tree pattern matching?
Message-ID: <33A4D20438DA1C4A8D7A8981F072D25B19C040CCC0@DLMBXCCR.i2.com>

Tree pattern matching seems as an ideal tool for implementing sequence of AST transformations for a small project I am trying to prototype.
A transformation must convert for-loop like this "for (int i = exp1; i <= exp2; i++) {..." to something like that "for i from exp1 to exp 2 {..."

Below is an extract from tree pattern matching grammar

tree grammar RewriteFOR;

options {
...
                ASTLabelType = CommonTree;
                output = AST;
filter = true;
...
}

topdown
   ...
                |              ^(FOR ^('=' v1=ID e3=.) ^('<=' v2=ID e4=.) ^(for_inc_op v3=ID) s=.
            {$v1.text.equals($v2.text) && $v1.text.equals($v3.text)}?)
        -> ^(FORVAR $v1 $e3 $e4 $s)
...
                ;

for_inc_op
                :               INC_BEFORE
                |              INC_AFTER
                ;

This rule works for trees like this  "for (j = 1; j <= itemPos + 1; j++) {"
(FOR (= j 1) (<= j (+ itemPos 1)) (INC_AFTER j) ...) -> (FORVAR j 1 (+ itemPos 1) ...)

But it does not work for "for (j = 1; j <= (abs(ExpectedArray[i+1] - (itemPos + 1))); j++) {"
(FOR (= j 1) (<= j (CALL_FUNC abs (ARGS (- (INDEX ExpectedArray (+ i 1)) (+ itemPos 1))))) (INC_AFTER j)

Seems that "e4=." can only be matched by simple expressions of limited depth.

I have not found the formal definition of . in an AST grammar and just tried to follow the example from http://www.antlr.org/wiki/display/~admin/2008/11/30/Example+tree+rewriting+with+patterns
My assumption is that . (dot) denotes any AST or simple node.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090608/f00a6b9e/attachment.html 

From JALuber at gmx.de  Mon Jun  8 15:23:40 2009
From: JALuber at gmx.de (Johannes Luber)
Date: Tue, 09 Jun 2009 00:23:40 +0200
Subject: [antlr-interest] Target Language .stg Files - Token Names
In-Reply-To: <221ca3d10906081436o2c36053dx6d5d8078a2556ba6@mail.gmail.com>
References: <221ca3d10906081436o2c36053dx6d5d8078a2556ba6@mail.gmail.com>
Message-ID: <20090608222340.245410@gmx.net>

> I've been working on a C++ (STL + Boost) target for Antlr 3, and I'm
> struggling with some StringTemplate semantics.  Specifically, when
> generating code for matching tokens, the <token> template will sometimes
> refer to a textual token name (e.g. ID) and other times it will refer to a
> constant, the token identifier (e.g. 33).  Is there a way to determine,
> within a StringTemplate rule, which of these representations is used?

ANTLR supports the option -XdbgST (capitilization is important - ANTLR silently swallows errors there) which adds the template names to the output. The most difficult thing is to find the right place as token may be constructed like "<rule>suffix".

> 
> I would like to generate code like:
> 
> match(MyParser::TOKEN_ID);
> 
> for token names, and
> 
> match(33);
> 
> for token constants, so I would like to do something like:
> 
> <if(token.isNumber)>
>   match(<token>);
> <else>
>   match(MyParser::TOKEN_<token>);
> <endif>
> 
> but how to do this is eluding me.
> 
> 
> Currently, I am forced to use preprocessor magic to get by:
> 
> #undef ID
> #define ID  MyParser::TOKEN_ID
> ...
> 
> which I hate to do for multiple reasons.
> 
> 
> On a side note, is there any documentation of which attributes are
> avilable
> for variables in target language .stg files?  For instance, what
> attributes
> are available on a <rule>?  All of the information I find comes from
> deciphering the other .stg files.

The best way I know would be to use -XdbgST and to check all called templates. It may not solve the original problem but at least you know where to look.

Johannes
> 
> 
> Thanks,
> 
> Justin Holewinski

-- 
GMX FreeDSL mit DSL 6.000 Flatrate und Telefonanschluss nur 17,95 Euro/mtl.!
http://dslspecial.gmx.de/freedsl-aktionspreis/?ac=OM.AD.PD003K11308T4569a

From sharwell at pixelminegames.com  Mon Jun  8 19:48:33 2009
From: sharwell at pixelminegames.com (Sam Harwell)
Date: Mon, 8 Jun 2009 21:48:33 -0500
Subject: [antlr-interest] packrat vs. LL(*)
In-Reply-To: <C0CF8F4A-FDBF-4FAA-AE15-7B5EEF025305@obua.de>
References: <B48A7A44-AD79-4DB6-981D-1472B4E0A035@obua.de><4A2D60E5.1080902@temporal-wave.com><BF1A4B5E-FA26-448E-A62C-197C33F047B1@obua.de><4A2D69E9.4040509@temporal-wave.com>
	<C0CF8F4A-FDBF-4FAA-AE15-7B5EEF025305@obua.de>
Message-ID: <86403CA0939415448BCCB83855EFE09AA68236@Bloodymary.ironwillgames.com>

[I read the rest of this thread as well.]

The backtrack=true option *destroys* the ability to provide useful error
messages. A backtrack+memoize grammar is *much* less efficient in both
time and space than a left-factored grammar written for ANTLR with these
in mind. The options are potentially useful as a quick hack to test a
grammar before left factoring it, but aside from allowing "lazy"
development (writing efficient, correct left-factored grammars can be
very time consuming), they have no practical benefit.

Sam

-----Original Message-----
From: antlr-interest-bounces at antlr.org
[mailto:antlr-interest-bounces at antlr.org] On Behalf Of Steven Obua
Sent: Monday, June 08, 2009 3:09 PM
To: Jim Idle
Cc: antlr-interest at antlr.org
Subject: Re: [antlr-interest] packrat vs. LL(*)

Well, with the options I give, it finishes code generation in a few  
milli seconds. My grammar is very readable (which would be destroyed  
by left-factoring), the parser is sufficiently fast. In twenty years,  
it will be even faster.


From 06virg at gmail.com  Tue Jun  9 03:01:41 2009
From: 06virg at gmail.com (virg g)
Date: Tue, 9 Jun 2009 15:31:41 +0530
Subject: [antlr-interest] Parser Problem for comment
Message-ID: <3df0db9f0906090301j48c95b00xe2641551a51e0e0@mail.gmail.com>

Hi,
I am using Antlr 3.
 I have a instruction file where each instruction starts with new line and
it has fixed syntax. So I have written grammar file for the syntax check for
some of the instructions. But I have problem with Comment line.
In my instructions, line comment is represented  by  single quote (') ( no
closing quote is required). So if the line starts with single quote, then
that entire line I need to skip.
This is the rule for Comment

COMMENT : '\'' ~('\n'|'\r')* {$channel=HIDDEN;} ;

This is working well, if there is no single quote occurs within the
instruction. If single quote occurs in the instruction other than at the
beginning of the file, the text after single quote is treating as a comment.
So How to write a rule only if line starts with single quote then it is
comment not any where else? please help me.

Thanks in advance
Virg
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090609/5de7ee20/attachment.html 

From micha-1 at fantasymail.de  Tue Jun  9 03:59:55 2009
From: micha-1 at fantasymail.de (Michael)
Date: Tue, 9 Jun 2009 12:59:55 +0200
Subject: [antlr-interest] Parser Problem for comment
In-Reply-To: <3df0db9f0906090301j48c95b00xe2641551a51e0e0@mail.gmail.com>
References: <3df0db9f0906090301j48c95b00xe2641551a51e0e0@mail.gmail.com>
Message-ID: <200906091259.56045.micha-1@fantasymail.de>

Am Tuesday 09 June 2009 12:01:41 schrieb virg g:
> Hi,
>
> COMMENT : '\'' ~('\n'|'\r')* {$channel=HIDDEN;} ;
>
> This is working well, if there is no single quote occurs within the
> instruction. If single quote occurs in the instruction other than at the
> beginning of the file, the text after single quote is treating as a
> comment. So How to write a rule only if line starts with single quote then
> it is comment not any where else? please help me.

do you have a rule for NL? Something like
NL: '\r'? '\n' ;  // or similar...

does it work to change it to:
NL: ('\r'? '\n')+ (  '\'' ~('\n'|'\r')* )?  ;  // to include a following 
comment

or a semantic predicate which tests the column number

or maybe it's easier to use a  file reader which just drops the lines 
beginning with a '   :-)

cheers,
 Michael



From tbender at stud.hs-heilbronn.de  Tue Jun  9 06:09:06 2009
From: tbender at stud.hs-heilbronn.de (Tilman Bender)
Date: Tue, 9 Jun 2009 15:09:06 +0200
Subject: [antlr-interest] Custom TreeAdapter and GUnit - Mission Impossible?
Message-ID: <0B4EA9ED-D817-497C-8250-AE44F587F6C3@stud.hs-heilbronn.de>

Hey everyone,

I try to use custom TreeNodes and a custom TreeAdaptor so I can  
annotate my AST with information for typechecking. (Thanks for your  
example in the new Book, Terr!)
Unfortunately this breaks the GUnit-Tests for my TreeWalker, because I  
cannot tell GUnit what custom Adaptor to use for testing . I tried to  
set the adaptor in the @init-Block of my main-parsing method, but taht  
does not seems to have the desired effect. Does GUnit create a new  
instance of the Parser for each rule it tests?

I have read about this problem here: http://markmail.org/message/k6nzsuphzusezy5v

Unfortunately this does not seem to be fixed yet. Does anyone know a  
good workaround for this so I can use my custom TreeNodes without  
losing my tests?


Tilman Bender
Student des Software Engineering
Hochschule Heilbronn
tbender at stud.hs-heilbronn.de



-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090609/66efe89c/attachment.html 

From mail at florian-leitner.de  Tue Jun  9 06:13:37 2009
From: mail at florian-leitner.de (Florian Leitner-Fischer)
Date: Tue, 09 Jun 2009 15:13:37 +0200
Subject: [antlr-interest] Getting Token Text in C
Message-ID: <4A2E6001.2010209@florian-leitner.de>

Dear All,

I'm currently using the following C code to parse Java files for a 
university project.

This works very nice and I get an output like

package
identifier
;
and so on for my Java File.

The only thing I am missing now is to get the name of the identifier.

Is this somehow possible?
...

    {
ANTLR3_INT32 T;
T = 0;
while (T != ANTLR3_TOKEN_EOF)
{
T = tstream->tstream->istream->_LA(tstream->tstream->istream, 1);
tstream->tstream->istream->consume(tstream->tstream->istream);
printf("%s \n", (psr->pParser->rec->state->tokenNames)[T], T);
}
}
...

Best Regards and thanks in advance,

Florian


--------------------------------------------
Florian Leitner-Fischer

Duchtlinger Str. 4d
78247 Hilzingen

phone  +49 (0) 7731 9125 095
mobile +49 (0) 151 196 908 42
--------------------------------------------

From shawmishrak at gmail.com  Tue Jun  9 06:49:16 2009
From: shawmishrak at gmail.com (Justin Holewinski)
Date: Tue, 9 Jun 2009 09:49:16 -0400
Subject: [antlr-interest] Target Language .stg Files - Token Names
In-Reply-To: <20090608222340.245410@gmx.net>
References: <221ca3d10906081436o2c36053dx6d5d8078a2556ba6@mail.gmail.com>
	<20090608222340.245410@gmx.net>
Message-ID: <221ca3d10906090649k74fb60car4e20a42d1d1a473b@mail.gmail.com>

Thanks for the suggestion.  Unfortunately, this option does not appear to
give any additional information regarding the attributes of <token>, if any.


Thanks,

Justin Holewinski


On Mon, Jun 8, 2009 at 6:23 PM, Johannes Luber <JALuber at gmx.de> wrote:

> > I've been working on a C++ (STL + Boost) target for Antlr 3, and I'm
> > struggling with some StringTemplate semantics.  Specifically, when
> > generating code for matching tokens, the <token> template will sometimes
> > refer to a textual token name (e.g. ID) and other times it will refer to
> a
> > constant, the token identifier (e.g. 33).  Is there a way to determine,
> > within a StringTemplate rule, which of these representations is used?
>
> ANTLR supports the option -XdbgST (capitilization is important - ANTLR
> silently swallows errors there) which adds the template names to the output.
> The most difficult thing is to find the right place as token may be
> constructed like "<rule>suffix".
>
> >
> > I would like to generate code like:
> >
> > match(MyParser::TOKEN_ID);
> >
> > for token names, and
> >
> > match(33);
> >
> > for token constants, so I would like to do something like:
> >
> > <if(token.isNumber)>
> >   match(<token>);
> > <else>
> >   match(MyParser::TOKEN_<token>);
> > <endif>
> >
> > but how to do this is eluding me.
> >
> >
> > Currently, I am forced to use preprocessor magic to get by:
> >
> > #undef ID
> > #define ID  MyParser::TOKEN_ID
> > ...
> >
> > which I hate to do for multiple reasons.
> >
> >
> > On a side note, is there any documentation of which attributes are
> > avilable
> > for variables in target language .stg files?  For instance, what
> > attributes
> > are available on a <rule>?  All of the information I find comes from
> > deciphering the other .stg files.
>
> The best way I know would be to use -XdbgST and to check all called
> templates. It may not solve the original problem but at least you know where
> to look.
>
> Johannes
> >
> >
> > Thanks,
> >
> > Justin Holewinski
>
> --
> GMX FreeDSL mit DSL 6.000 Flatrate und Telefonanschluss nur 17,95
> Euro/mtl.!
> http://dslspecial.gmx.de/freedsl-aktionspreis/?ac=OM.AD.PD003K11308T4569a
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090609/fbb95dd3/attachment.html 

From martijn.reuvers at gmail.com  Tue Jun  9 07:28:04 2009
From: martijn.reuvers at gmail.com (Martijn Reuvers)
Date: Tue, 9 Jun 2009 16:28:04 +0200
Subject: [antlr-interest] videos from the workshop
In-Reply-To: <88682060-F1DD-4B59-AD28-C0AAD649C481@cs.usfca.edu>
References: <88682060-F1DD-4B59-AD28-C0AAD649C481@cs.usfca.edu>
Message-ID: <c376e6ec0906090728l21058626n7d5bed7a75063fab@mail.gmail.com>

Thanks a lot! Something to watch for the rainy days. =)

It works for me, I tried the first avi and a .wmv (played in the
open-source windows mediaplayer classic thingy).


On Mon, Jun 8, 2009 at 10:39 PM, Terence Parr<parrt at cs.usfca.edu> wrote:
> Hi, these are the videos taken during the lectures. The only problem
> is they don't seem to work on my office Mac though they worked on my
> home Mac. Hmm...i installed the WMV stuff for QuickTime, but I guess
> that's not sufficient. please let me know if these files work for you:
>
> http://www.antlr.org/workshop/09
>
> Ter
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>

From linlin.xie at siemens.com  Tue Jun  9 07:56:05 2009
From: linlin.xie at siemens.com (Xie, Linlin)
Date: Tue, 9 Jun 2009 16:56:05 +0200
Subject: [antlr-interest] problem in displayRecognitionError() in
	antlr2baserecognizer.c
Message-ID: <79118B9FE8CE8E49B0D71964A79CB647026677A0@dekomplm002.net.plm.eds.com>

Hello Jim and all,

 

I wonder if there is any bug in antlr setting the "expecting" member
variable of struct "ANTLR3_EXCEPTION". The following is what I find out
while assigning my own error processing function to antlr's recognizer's
reportError function pointer:

 

For my grammar definition like:

"Query: Rule1 Rule2? Rule3? ; EOF"

And for my test case that has a malformed syntax, which matches Rule1,
but the rest doesn't match either Rule2 or Rule3, through debugging, I
find that the parser then tries to match with ";", of course it doesn't
match ";" again, then it tries to report error and recover. 

 

In the antlr's error reporting (I did it by copying the content of
displayRecognitionError() to my own error processing function), the
"expecting" variable should point to the position of ";" as that's what
it tries to match. But it shows that the expecting is a very large
number that can't possibly be within the range of the vector
"TokenNames", however as C doesn't have exception handlings, the print
out is "null", if without looking carefully, it seems to be no problem
at all. But what I'm trying to do in my own function is to read out the
error information from antlr exception and output it into standout
output in C++, that's how an exception is thrown in C++ that leads me to
the problem. I did some probing of the antlr code, and think it could be
a bug when antlr sets the "expecting" variable in case of such an error.
Also I find that the exception variable has a nextexception pointer
which points to another exception variable which has exactly the same
member variable values except the "expecting", this "expecting" indicate
the position of ";" token, so to me this nextexception variable should
be the one that should be error for this test case. 

 

Jim, could you treat it as a bug report and do some investigation on it?
Or can anybody figure out why it's working this way if it's not a
problem? Thank you very much.

Regards,

Linlin

 

 

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090609/f058aa81/attachment.html 

From jimi at temporal-wave.com  Tue Jun  9 09:25:27 2009
From: jimi at temporal-wave.com (Jim Idle)
Date: Tue, 09 Jun 2009 09:25:27 -0700
Subject: [antlr-interest] problem in displayRecognitionError() in
	antlr2baserecognizer.c
In-Reply-To: <79118B9FE8CE8E49B0D71964A79CB647026677A0@dekomplm002.net.plm.eds.com>
References: <79118B9FE8CE8E49B0D71964A79CB647026677A0@dekomplm002.net.plm.eds.com>
Message-ID: <4A2E8CF7.3080903@temporal-wave.com>

An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090609/c28e7eaa/attachment.html 

From jimi at temporal-wave.com  Tue Jun  9 09:29:09 2009
From: jimi at temporal-wave.com (Jim Idle)
Date: Tue, 09 Jun 2009 09:29:09 -0700
Subject: [antlr-interest] Getting Token Text in C
In-Reply-To: <4A2E6001.2010209@florian-leitner.de>
References: <4A2E6001.2010209@florian-leitner.de>
Message-ID: <4A2E8DD5.2050502@temporal-wave.com>

Florian Leitner-Fischer wrote:
> Dear All,
>
> I'm currently using the following C code to parse Java files for a 
> university project.
>
> This works very nice and I get an output like
>
> package
> identifier
> ;
> and so on for my Java File.
>
> The only thing I am missing now is to get the name of the identifier.
>
> Is this somehow possible?
> ...
>
>     {
> ANTLR3_INT32 T;
> T = 0;
> while (T != ANTLR3_TOKEN_EOF)
> {
> T = tstream->tstream->istream->_LA(tstream->tstream->istream, 1);
> tstream->tstream->istream->consume(tstream->tstream->istream);
> printf("%s \n", (psr->pParser->rec->state->tokenNames)[T], T);
> }
> }
> ...
>
> Best Regards and thanks in advance,
>
>   
Florian, where is this code? In an action? Driver code? Don't use the 
direct code like this as if I cahnge it, then all your code will break. 
There are macros, such as PARSER and so on that you should use. Look at 
the top of the generated code for more details.

If you use LT rather than LA, then you will get a token pointer and it 
has pointers to the input stream where the token starts and a length field.

Jim


From damien.cassou at gmail.com  Tue Jun  9 10:33:29 2009
From: damien.cassou at gmail.com (Damien Cassou)
Date: Tue, 9 Jun 2009 19:33:29 +0200
Subject: [antlr-interest] Getting line and column numbers from a
	CommonTreeNodeStream
Message-ID: <6ac749c10906091033v64c5f1f4ke1f1a4d2358a58c9@mail.gmail.com>

Hi,

my compiler is made of two grammars: one combined grammar parses the
language and constructs a tree while the second pass verifies the
tree. I would like to print error messages when there are semantic
errors in the second pass. For example, referencing a variable that is
not defined should result in:

line 12:9 No defined variable 'foo'

However, there is no easy way to get line and column numbers from a
CommonTreeNodeStream.
What I did was to subclass CommonTreeNodeStream and override consume()
as follows:

@Override
public void consume() {
	sync(1);
	Tree tree = (Tree) remove();
	if (tree.getLine() > 0) {
		line = tree.getLine();
		charPositionInLine = tree.getCharPositionInLine();
	}
}

(overriden implementation is
public void consume() {sync(1); remove();}
)

With line and charPositionInLine two fields of my subclass.

What do you think of that solution? Is there something simpler to
print semantic errors during a tree grammar parsing?

-- 
Damien Cassou
http://damiencassou.seasidehosting.st

"Lambdas are relegated to relative obscurity until Java makes them
popular by not having them." James Iry

From jimi at temporal-wave.com  Tue Jun  9 10:57:32 2009
From: jimi at temporal-wave.com (Jim Idle)
Date: Tue, 09 Jun 2009 10:57:32 -0700
Subject: [antlr-interest] Getting line and column numbers from
	a	CommonTreeNodeStream
In-Reply-To: <6ac749c10906091033v64c5f1f4ke1f1a4d2358a58c9@mail.gmail.com>
References: <6ac749c10906091033v64c5f1f4ke1f1a4d2358a58c9@mail.gmail.com>
Message-ID: <4A2EA28C.4040408@temporal-wave.com>

Damien Cassou wrote:
> Hi,
>
> my compiler is made of two grammars: one combined grammar parses the
> language and constructs a tree while the second pass verifies the
> tree. I would like to print error messages when there are semantic
> errors in the second pass. For example, referencing a variable that is
> not defined should result in:
>   
Get the start token from a node, Get the stop token from the node. The 
span is the first character of the start token to the last character of 
the stop token.

Jim

From farcaller at gmail.com  Tue Jun  9 13:50:57 2009
From: farcaller at gmail.com (Vladimir Pouzanov)
Date: Tue, 9 Jun 2009 23:50:57 +0300
Subject: [antlr-interest] ANTLR v3.1.2 and Python runtime under python 2.5.1
Message-ID: <978B94F3-0CB7-4548-82C8-CA18BFE82354@gmail.com>

Hi all,

I'm trying to write a simple grammar for Python runtime. ANTLR Tool  
seems to generate output just fine but then antlr_python_runtime-3.1.2- 
py2.5.egg fails at

$ python output/objjParser.py < wikibits.js
Traceback (most recent call last):
  File "output/objjParser.py", line 16144, in <module>
    main(sys.argv)
  File "output/objjParser.py", line 16140, in main
    main.execute(argv)
  File "/Library/Python/2.5/site-packages/antlr_python_runtime-3.1.2- 
py2.5.egg/antlr3/main.py", line 151, in execute
  File "/Library/Python/2.5/site-packages/antlr_python_runtime-3.1.2- 
py2.5.egg/antlr3/main.py", line 218, in parseStream
TypeError: getattr(): attribute name must be string

I'm running Python 2.5.1.

-- 
Sincerely,
Vladimir "Farcaller" Pouzanov






From connectajit at rediffmail.com  Tue Jun  9 23:25:50 2009
From: connectajit at rediffmail.com (ajit vilasrao shinde)
Date: 10 Jun 2009 06:25:50 -0000
Subject: [antlr-interest] getting exception while freeing parser (Is
	something wrong with grammar rule?)
Message-ID: <20090610062550.21048.qmail@f4mail-235-241.rediffmail.com>

Hello EveryOne, &nbsp;I have a problem while using generated parser\lexer from following grammar. while using parser it is giving exception while freeing parser.parser-&gt;free(parser);following is the prototype grammer file. Is something wrong with grammar rule?(i am importing all lexer rules from ExprLexerRules&nbsp; file)&nbsp;I am able to generate Lexer\Parser for following grammar.Identifier&nbsp; used here is like ABD or BCG etc.&nbsp; expression like ABC += BCDgrammar Expression;options {&nbsp;&nbsp;&nbsp; backtrack&nbsp;&nbsp; &nbsp; = true;&nbsp;&nbsp;&nbsp; memoize&nbsp;&nbsp; &nbsp; = true;&nbsp;&nbsp;&nbsp; k&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp; = 2;&nbsp;&nbsp;&nbsp; language&nbsp;&nbsp; &nbsp; = C;&nbsp;&nbsp;&nbsp; output&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; = AST;&nbsp;&nbsp;&nbsp; ASTLabelType = pANTLR3_BASE_TREE;&nbsp;&nbsp; &nbsp;}//importing already defined lexer and parser rulesimport&nbsp;&nbsp; ExprLexerRules ;operations&nbsp;&nbsp;&nbsp; :&nbsp;&nbsp; binaryoperation?&nbsp;&nbsp;&nbsp; ;&nbsp; &nbsp;binaryoperation&nbsp;&nbsp;&nbsp; :&nbsp;&nbsp; binaryexpression EOF&nbsp;&nbsp;&nbsp; ;&nbsp;&nbsp; &nbsp;binaryexpression&nbsp;&nbsp;&nbsp; :&nbsp; LPAREN! Identifier (DIVIDEEQUAL | PLUSEQUAL | MINUSEQUAL | TIMESEQUAL)^ Identifier&nbsp; RPAREN! &nbsp;&nbsp;&nbsp; ;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; DIVIDEEQUAL&nbsp;&nbsp;&nbsp; :&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; '/=';PLUSEQUAL&nbsp;&nbsp;&nbsp; :&nbsp;&nbsp;&nbsp; '+=';MINUSEQUAL&nbsp;&nbsp;&nbsp; :&nbsp;&nbsp;&nbsp; '-=';TIMESEQUAL&nbsp;&nbsp;&nbsp; :&nbsp;&nbsp;&nbsp; '*=';&nbsp;&nbsp; 

Ajit V. Shinde
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090610/eb95e66c/attachment.html 

From connectajit at rediffmail.com  Tue Jun  9 23:33:47 2009
From: connectajit at rediffmail.com (Ajit)
Date: 10 Jun 2009 06:33:47 -0000
Subject: [antlr-interest] Getting exception while freeing parser.(Is
	something wrong with grammer rule ?)
Message-ID: <20090610063347.64220.qmail@f4mail-235-236.rediffmail.com>

Hello EveryOne,&nbsp;I have a problem while using generated parserlexer from following grammar.while using parser it is giving exception while freeing parser.please refer attached file herewith.ThanksAjit


Ajit V. Shinde
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090610/b4a24fab/attachment.html 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: example.txt
Type: text/plain, english
Size: 1062 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20090610/b4a24fab/attachment.bin 

From damien.cassou at gmail.com  Tue Jun  9 23:58:26 2009
From: damien.cassou at gmail.com (Damien Cassou)
Date: Wed, 10 Jun 2009 08:58:26 +0200
Subject: [antlr-interest] Getting line and column numbers from a
	CommonTreeNodeStream
In-Reply-To: <4A2EA28C.4040408@temporal-wave.com>
References: <6ac749c10906091033v64c5f1f4ke1f1a4d2358a58c9@mail.gmail.com> 
	<4A2EA28C.4040408@temporal-wave.com>
Message-ID: <6ac749c10906092358t152701c7k5a18badf6f65f8f9@mail.gmail.com>

On Tue, Jun 9, 2009 at 7:57 PM, Jim Idle<jimi at temporal-wave.com> wrote:
> Get the start token from a node, Get the stop token from the node.

>From which node?

-- 
Damien Cassou
http://damiencassou.seasidehosting.st

"Lambdas are relegated to relative obscurity until Java makes them
popular by not having them." James Iry

From anders43 at gmail.com  Wed Jun 10 01:44:12 2009
From: anders43 at gmail.com (ajk .)
Date: Wed, 10 Jun 2009 16:44:12 +0800
Subject: [antlr-interest]  inserting tokens (v2)
Message-ID: <614b3f5f0906100144g5d5ad862w30af1b4806d9d054@mail.gmail.com>

Hi

I am not sure if this is the right way to solve this particular issue but
what I have
is a grammar where I would like to insert tokens inside the token stream
e.g. finding ']' and '(' I would like to insert '.Invoke' in between i.e.
].Invoke(

Is this somehow possible by manipulating the lexer rules or is this a bad
practice
and should be done on the parser rule level instead?

Example:

D[1]() ==> D[1].Invoke()    (where the string ".Invoke" is always the same
and is actually two tokens)

TIA
Anders.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090610/ad4cfbf7/attachment.html 

From potrto at centrum.cz  Wed Jun 10 04:56:03 2009
From: potrto at centrum.cz (Tomas Potrusil)
Date: Wed, 10 Jun 2009 13:56:03 +0200
Subject: [antlr-interest] [C target] [3.1.3] several bugs in the generated
	parser
Message-ID: <af7c90190906100456p57517fc6oc595aae91680d4cd@mail.gmail.com>

Hello,

I've found the following bugs in the generated parser (C target):

1. This is the most annoying problem because I cannot solve it any
other way. My tree grammar is:
function:	^(Function ^(DatabaseObject Nil COUNT) countArgument) ->
^(Function[$COUNT.text] countArgument);

The excerpt from generated code for this is:
pANTLR3_BASE_TREE root_1 = (pANTLR3_BASE_TREE)(ADAPTOR->nilNode(ADAPTOR));
root_1 = (pANTLR3_BASE_TREE)(ADAPTOR->becomeRoot(ADAPTOR,
    (pANTLR3_BASE_TREE)ADAPTOR->createTypeText(ADAPTOR, Function,
(pANTLR3_UINT8)(COUNT162->getText(COUNT162))), root_1));

The COUNT162->getText(COUNT162) function returns pANTLR3_STRING which
is casted to pANTLR3_UINT8??? When I manually change the code to:
root_1 = (pANTLR3_BASE_TREE)(ADAPTOR->becomeRoot(ADAPTOR,
    (pANTLR3_BASE_TREE)ADAPTOR->createTypeText(ADAPTOR, Function,
(pANTLR3_UINT8)(COUNT162->getText(COUNT162)->chars)), root_1));

it works as expected.

2. My tree grammar doesn't do a lot. Because of that I wanted to
switch on rewriting (options {rewrite = true;}). But the generated
parser was not able to be compiled. Some variables were not defined,
getParent() function was called on ADAPTOR which doesn't contain
anything similar etc. (when I generated Java parser from that grammar
it was compiled correctly)

3. The wildcard is not working for the C target! I reported that here
already that there was no response. So once more. My tree grammar is
similar to:
func:    ^(FUNC arg=.) -> ^(Function $arg);

When I try to generate a parser a crazy error message appears that a
template rewriteWildcardLabelRef.st cannot be found. (again, for Java
everything works as expected)

Best regards,
Tomas

From jimi at temporal-wave.com  Wed Jun 10 08:25:47 2009
From: jimi at temporal-wave.com (Jim Idle)
Date: Wed, 10 Jun 2009 08:25:47 -0700
Subject: [antlr-interest] getting exception while freeing parser
 (Is	something wrong with grammar rule?)
In-Reply-To: <20090610062550.21048.qmail@f4mail-235-241.rediffmail.com>
References: <20090610062550.21048.qmail@f4mail-235-241.rediffmail.com>
Message-ID: <4A2FD07B.6070309@temporal-wave.com>

ajit vilasrao shinde wrote:
> Hello EveryOne,
>  I have a problem while using generated parserlexer from following 
> grammar.
> while using parser it is giving exception while freeing parser.
> parser->free(parser);
Can't see anything directly wrong with your grammar, except that you 
should probably not be using global backtracking, even with memoizing. 
Methods like free usually are pointing out that you have corrupted 
memory somewhere in your own code, which malloc picks up when it tries 
to free up the parser allocations.

If you download and install valgrind, assuming you have a Linux machine 
available and given the proliferation of run from CD, run from USB, free 
VM definitions, then you should ;-), then compile all your code in debug 
mode and run it under valgrind. Valgrind will usually point out your 
mistake instantly. It is possible there is something wrong in the 
runtime, but the C runtime users tend to find this pretty quickly, if 
there is.

Jim

From jimi at temporal-wave.com  Wed Jun 10 08:33:58 2009
From: jimi at temporal-wave.com (Jim Idle)
Date: Wed, 10 Jun 2009 08:33:58 -0700
Subject: [antlr-interest] Getting line and column numbers from a
	CommonTreeNodeStream
In-Reply-To: <6ac749c10906092358t152701c7k5a18badf6f65f8f9@mail.gmail.com>
References: <6ac749c10906091033v64c5f1f4ke1f1a4d2358a58c9@mail.gmail.com>
	<4A2EA28C.4040408@temporal-wave.com>
	<6ac749c10906092358t152701c7k5a18badf6f65f8f9@mail.gmail.com>
Message-ID: <4A2FD266.50206@temporal-wave.com>

An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090610/1bd5acef/attachment.html 

From jimi at temporal-wave.com  Wed Jun 10 08:35:55 2009
From: jimi at temporal-wave.com (Jim Idle)
Date: Wed, 10 Jun 2009 08:35:55 -0700
Subject: [antlr-interest] inserting tokens (v2)
In-Reply-To: <614b3f5f0906100144g5d5ad862w30af1b4806d9d054@mail.gmail.com>
References: <614b3f5f0906100144g5d5ad862w30af1b4806d9d054@mail.gmail.com>
Message-ID: <4A2FD2DB.8030409@temporal-wave.com>

ajk . wrote:
> Hi
>
> I am not sure if this is the right way to solve this particular issue 
> but what I have
> is a grammar where I would like to insert tokens inside the token stream
> e.g. finding ']' and '(' I would like to insert '.Invoke' in between 
> i.e. ].Invoke(
>
> Is this somehow possible by manipulating the lexer rules or is this a 
> bad practice
> and should be done on the parser rule level instead?
>
> Example:
>
> D[1]() ==> D[1].Invoke()    (where the string ".Invoke" is always the 
> same and is actually two tokens)
Look at the TokenRewriteStream (there are examples I think), which is 
meant for this.

Jim

From jimi at temporal-wave.com  Wed Jun 10 08:38:41 2009
From: jimi at temporal-wave.com (Jim Idle)
Date: Wed, 10 Jun 2009 08:38:41 -0700
Subject: [antlr-interest] Getting Token Text in C
In-Reply-To: <4A2F99FC.40007@florian-leitner.de>
References: <4A2E6001.2010209@florian-leitner.de>
	<4A2E8DD5.2050502@temporal-wave.com>
	<4A2F99FC.40007@florian-leitner.de>
Message-ID: <4A2FD381.1040305@temporal-wave.com>

Florian Leitner-Fischer wrote:
> Jim,
>> Florian, where is this code? In an action? Driver code? Don't use the 
>> direct code like this as if I cahnge it, then all your code will 
>> break.   
> The code stems from the example package.
Really, I don't remember doing that directly. I think that the C Java 
parser example calls LT to force the lexer to run, but the comments 
should say that you do not normally do that.

>> There are macros, such as PARSER and so on that you should use. Look 
>> at the top of the generated code for more details.
>>
>> If you use LT rather than LA, then you will get a token pointer and 
>> it has pointers to the input stream where the token starts and a 
>> length field.
>>   
> I found the macros, but is there some where an example how they are used?
Perhaps you should have a read through the documentation? ;-)

http://www.antlr.org/api/C/index.html

Jim

From jimi at temporal-wave.com  Wed Jun 10 08:45:02 2009
From: jimi at temporal-wave.com (Jim Idle)
Date: Wed, 10 Jun 2009 08:45:02 -0700
Subject: [antlr-interest] [C target] [3.1.3] several bugs in the
 generated parser
In-Reply-To: <af7c90190906100456p57517fc6oc595aae91680d4cd@mail.gmail.com>
References: <af7c90190906100456p57517fc6oc595aae91680d4cd@mail.gmail.com>
Message-ID: <4A2FD4FE.1020206@temporal-wave.com>

Tomas Potrusil wrote:
> Hello,
>
> I've found the following bugs in the generated parser (C target):
>
> 1. This is the most annoying problem because I cannot solve it any
> other way. My tree grammar is:
> function:	^(Function ^(DatabaseObject Nil COUNT) countArgument) ->
> ^(Function[$COUNT.text] countArgument);
>
> The excerpt from generated code for this is:
> pANTLR3_BASE_TREE root_1 = (pANTLR3_BASE_TREE)(ADAPTOR->nilNode(ADAPTOR));
> root_1 = (pANTLR3_BASE_TREE)(ADAPTOR->becomeRoot(ADAPTOR,
>     (pANTLR3_BASE_TREE)ADAPTOR->createTypeText(ADAPTOR, Function,
> (pANTLR3_UINT8)(COUNT162->getText(COUNT162))), root_1));
>
> The COUNT162->getText(COUNT162) function returns pANTLR3_STRING which
> is casted to pANTLR3_UINT8??? When I manually change the code to:
> root_1 = (pANTLR3_BASE_TREE)(ADAPTOR->becomeRoot(ADAPTOR,
>     (pANTLR3_BASE_TREE)ADAPTOR->createTypeText(ADAPTOR, Function,
> (pANTLR3_UINT8)(COUNT162->getText(COUNT162)->chars)), root_1));
>   
I think that all of that is fixed in the 3.1.4 beta if you want to try 
that, but there is a fundamental problem in that the Java target is 
using overloaded functions to do this and I have no way at template 
generation time to know what the intent was. Realistically, we need to 
make the code generator call a different template or set a flag to say 
which behavior it is expecting.
> it works as expected.
>
> 2. My tree grammar doesn't do a lot. Because of that I wanted to
> switch on rewriting (options {rewrite = true;}). But the generated
> parser was not able to be compiled. Some variables were not defined,
> getParent() function was called on ADAPTOR which doesn't contain
> anything similar etc. (when I generated Java parser from that grammar
> it was compiled correctly)
>   
You probably need to send me an example please. Also, please verify that 
this is the same with 3.1.4-beta as that sounds familiar.
> 3. The wildcard is not working for the C target! I reported that here
> already that there was no response. 
Sorry, but I have been busy earning a living lately. I am aware of this, 
and am just not quite in sync with Java on that one. But, you can easily 
do the same thing with an action code.
> So once more. My tree grammar is
> similar to:
> func:    ^(FUNC arg=.) -> ^(Function $arg);
>
> When I try to generate a parser a crazy error message appears that a
> template rewriteWildcardLabelRef.st cannot be found. (again, for Java
> everything works as expected)
>
>   
I don't think that I am quite in sync with the Java target on rewrite of 
wildcards. However, again, you can achieve this with a bit of action 
code.  I will make sure that I have these bugs logged,

Jim

From avidtrober at gmail.com  Wed Jun 10 20:40:29 2009
From: avidtrober at gmail.com (Avid Trober)
Date: Wed, 10 Jun 2009 22:40:29 -0500
Subject: [antlr-interest]  Excluding keywords
Message-ID: <1D9D75B8D2FA4C24BDD2E204A3378CF1@homelaptop>

I saw something close to my problem on the wiki, http://www.antlr.org/pipermail/antlr-interest/2006-June/016563.html

But, I've got an "extra rule", filter.  Must I resort to an action, or is there a way to do this purely in the grammar file?


filter : // identifier, but *not* a keyword
              ;
    

keyword :  APPLY
              | BROWSE
              | CLOSE
              | OPEN
        ;

identifier : ('A'..'Z' | 'a'..'z') ('A'..'Z' | 'a'..'z' | '0'..'9' | '_')*
             ;


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090610/ecc618c6/attachment.html 

From indhu.b at s7software.com  Wed Jun 10 20:59:12 2009
From: indhu.b at s7software.com (Indhu Bharathi)
Date: Thu, 11 Jun 2009 09:29:12 +0530
Subject: [antlr-interest] Excluding keywords
In-Reply-To: <1D9D75B8D2FA4C24BDD2E204A3378CF1@homelaptop>
References: <1D9D75B8D2FA4C24BDD2E204A3378CF1@homelaptop>
Message-ID: <001e01c9ea48$fcc566b0$f6503410$@b@s7software.com>

As stated in the link you provided, there is nothing you have to do to get
this functionality. But 'identifier' should be a lexer rule. I guess your
grammar should be something like this:

 

APPLY                   :               'apply';

BROWSE              :               'browse'

.

 

ID            :               ('A'..'Z' | 'a'..'z') ('A'..'Z' | 'a'..'z' |
'0'..'9' | '_')*;

                

Now, if you write a rule like

 

r              :               ID;

 

only ID that is not a keyword will match this.

 

Am I oversimplifying the problem. Did I miss something?

 

Cheers, Indhu

 

From: antlr-interest-bounces at antlr.org
[mailto:antlr-interest-bounces at antlr.org] On Behalf Of Avid Trober
Sent: Thursday, June 11, 2009 9:10 AM
To: antlr-interest at antlr.org
Subject: [antlr-interest] Excluding keywords

 

I saw something close to my problem on the wiki,
http://www.antlr.org/pipermail/antlr-interest/2006-June/016563.html

 

But, I've got an "extra rule", filter.  Must I resort to an action, or is
there a way to do this purely in the grammar file?

 

 

filter : // identifier, but *not* a keyword

              ;

    

 

keyword :  APPLY

              | BROWSE 

              | CLOSE

              | OPEN

        ;

 

identifier : ('A'..'Z' | 'a'..'z') ('A'..'Z' | 'a'..'z' | '0'..'9' | '_')*

             ;

 

 

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090611/1b91c059/attachment.html 

From david.chipping at anubex.com  Thu Jun 11 02:22:56 2009
From: david.chipping at anubex.com (David Chipping)
Date: Thu, 11 Jun 2009 11:22:56 +0200
Subject: [antlr-interest] Ambiguity between identifier and operator
Message-ID: <4A30CCF0.8060807@anubex.com>

I'm having some trouble trying to work out the best approach for some 
ambiguity.

If I have an identifier token defined as:

IDENTIFIER: ('A'..'Z' | 'a'..'z' | '_') ('A'..'Z' | 'a'..'z' | '_' | 
'0'..'9')* ('$' | '!' | '&')?

Were the last part of the rule indicates an optional implicit type 
character.

Unfortunately, "!" is also a binary operator that works with 
identifiers. For example, the following is valid: 

foo!bar

and indicates a ! operator with a left side of foo and right of bar. 
This is only possible when the left side identifier doesn't end with a 
implicit type character.

I was initially thinking of doing some token re-writing to determine if 
an identifier (without an implicit type char)  followed by a "!" is 
followed by another identifier and then emit a separate "!" so that can 
be picked up by the parser. But I'm not keen on doing this, as (as far 
as I can see, please correct me if i'm wrong) this takes some of my 
lexing rules out of my grammar and into another place, complicating any 
maintenance on the grammar itself.

Is there a cleaner/different way to achieve this?

Cheers

-- 
David Chipping
Anubex

Direct Tel.: +32 3 4504263
General Fax: +32 3 4504251
Web Address: http://www.anubex.com
Reply To: david.chipping at anubex.com 


From potrto at centrum.cz  Thu Jun 11 04:56:36 2009
From: potrto at centrum.cz (Tomas Potrusil)
Date: Thu, 11 Jun 2009 13:56:36 +0200
Subject: [antlr-interest] [C target] [3.1.3] several bugs in the
	generated parser
In-Reply-To: <4A2FD4FE.1020206@temporal-wave.com>
References: <af7c90190906100456p57517fc6oc595aae91680d4cd@mail.gmail.com>
	<4A2FD4FE.1020206@temporal-wave.com>
Message-ID: <af7c90190906110456u7f74c7b1k60ce33ca3f1297b7@mail.gmail.com>

All those problems remain there also for the latest builds (from May
21, version 3.1.4-SNAPSHOT)

add 1) Is there any hope that it will be fixed soon? Or can I write
that grammar any other way in order to achieve the similar
functionality?
add 2) The sample grammar is attached.

Tom

2009/6/10 Jim Idle <jimi at temporal-wave.com>:
> Tomas Potrusil wrote:
>> Hello,
>>
>> I've found the following bugs in the generated parser (C target):
>>
>> 1. This is the most annoying problem because I cannot solve it any
>> other way. My tree grammar is:
>> function: ? ? ^(Function ^(DatabaseObject Nil COUNT) countArgument) ->
>> ^(Function[$COUNT.text] countArgument);
>>
>> The excerpt from generated code for this is:
>> pANTLR3_BASE_TREE root_1 = (pANTLR3_BASE_TREE)(ADAPTOR->nilNode(ADAPTOR));
>> root_1 = (pANTLR3_BASE_TREE)(ADAPTOR->becomeRoot(ADAPTOR,
>> ? ? (pANTLR3_BASE_TREE)ADAPTOR->createTypeText(ADAPTOR, Function,
>> (pANTLR3_UINT8)(COUNT162->getText(COUNT162))), root_1));
>>
>> The COUNT162->getText(COUNT162) function returns pANTLR3_STRING which
>> is casted to pANTLR3_UINT8??? When I manually change the code to:
>> root_1 = (pANTLR3_BASE_TREE)(ADAPTOR->becomeRoot(ADAPTOR,
>> ? ? (pANTLR3_BASE_TREE)ADAPTOR->createTypeText(ADAPTOR, Function,
>> (pANTLR3_UINT8)(COUNT162->getText(COUNT162)->chars)), root_1));
>>
> I think that all of that is fixed in the 3.1.4 beta if you want to try
> that, but there is a fundamental problem in that the Java target is
> using overloaded functions to do this and I have no way at template
> generation time to know what the intent was. Realistically, we need to
> make the code generator call a different template or set a flag to say
> which behavior it is expecting.
>> it works as expected.
>>
>> 2. My tree grammar doesn't do a lot. Because of that I wanted to
>> switch on rewriting (options {rewrite = true;}). But the generated
>> parser was not able to be compiled. Some variables were not defined,
>> getParent() function was called on ADAPTOR which doesn't contain
>> anything similar etc. (when I generated Java parser from that grammar
>> it was compiled correctly)
>>
> You probably need to send me an example please. Also, please verify that
> this is the same with 3.1.4-beta as that sounds familiar.
>> 3. The wildcard is not working for the C target! I reported that here
>> already that there was no response.
> Sorry, but I have been busy earning a living lately. I am aware of this,
> and am just not quite in sync with Java on that one. But, you can easily
> do the same thing with an action code.
>> So once more. My tree grammar is
>> similar to:
>> func: ? ?^(FUNC arg=.) -> ^(Function $arg);
>>
>> When I try to generate a parser a crazy error message appears that a
>> template rewriteWildcardLabelRef.st cannot be found. (again, for Java
>> everything works as expected)
>>
>>
> I don't think that I am quite in sync with the Java target on rewrite of
> wildcards. However, again, you can achieve this with a bit of action
> code. ?I will make sure that I have these bugs logged,
>
> Jim
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: SqlOrig.g
Type: application/octet-stream
Size: 351 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20090611/424727d2/attachment.obj 

From mttdgf at gmail.com  Thu Jun 11 05:38:38 2009
From: mttdgf at gmail.com (Mark Taylor)
Date: Thu, 11 Jun 2009 07:38:38 -0500
Subject: [antlr-interest] Again Cobol:
Message-ID: <6b04f3e70906110538l7410ce34l281fd4a14c5d9cac@mail.gmail.com>

I'm working on a Cobol grammar (oh, the foolishness of youth...  wait I'm
not THAT young...) and I need some advice about the ambiguities.  In
particular I'm getting the famous: "error(211): CobolTest.g:11:30: [fatal]
rule if has non-LL(*) decision due to recursive rule invocations reachable
from alts 1,2.  Resolve by left-factoring or using syntactic predicates or
using backtrack=true option."  Yes, this has come up before, but there was
no clear answer.  This time I have a specific example (see below).

Below is the smallest grammar which exhibits the problem.  You can see I
have stmt+ in both the IF rule and the PERFORM rule.  The problem is the
'END-IF'?.  Since END-IF is optional in Cobol, there is no clear scope
terminator.   I've tried left refactoring the (stmt+ ....) into a separate
rule for both IF and PERFORM but that doesn't seem to work either.  I don't
see how a syntactic predicate could be applied to this either.

If I were writing this as a recursive descent parser by hand (I'm trying
Antlr so I don't have to do this) I would write a statementlist() method
that would simply loop on all statement beginnings keywords.  Then when an
END-IF, ELSE, END-PERFORM, or some other arbitrary scope terminator appeared
in the input the loop would simple exit and return the list of valid
statements.  The question is: how to get Antlr to behave like this?

Any advice is appreciated.

<pre>

grammar CobolTest;

program:     sentence+ EOF;

sentence:    stmt+ '.' ;

stmt:        if
        |    move
        |   perform ;

if:            'if' condition 'then'? stmt+ ('else' stmt+)? 'end-if'? ;

move:        'move' ID 'to' ID ;

perform:     'perform' stmt+ 'end-perform' ;

condition:     ID '==' ID ;

ID  :       ('a'..'z'|'A'..'Z')+ ;
INT :       '0'..'9'+ ;
NEWLINE:    '\r'? '\n' {skip();} ;
WS  :       (' '|'\t')+ {skip();} ;

</pre>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090611/fe77301b/attachment.html 

From damien.cassou at gmail.com  Thu Jun 11 05:41:11 2009
From: damien.cassou at gmail.com (Damien Cassou)
Date: Thu, 11 Jun 2009 14:41:11 +0200
Subject: [antlr-interest] Returning subrule string template by default
Message-ID: <6ac749c10906110541m41cad378x2c326f637737d09d@mail.gmail.com>

Hi,

I have a tree grammar which looks like:

document :
  ^(DOCUMENT (type_def {templates.add($type_def.st);})*)
;

type_def:
  struct | enum | foo | ... | bar
;

where struct, enum, foo, bar and the other are rules which return
string templates.

This doesn't work because the type_def rule doesn't return the string
template returned by the subrules.

I tried other things like the following:

type_def: a=(struct | enum |...) {templates.add($a.st);}

type_def: (a=struct | a=enum | ...) {templates.add($a.st);}

type_def @init {templates.add($type_def.st);}
  : struct | enum | ...;

None of them work. The only solution I found was to duplicate the
action on all subrules.

-- 
Damien Cassou
http://damiencassou.seasidehosting.st

"Lambdas are relegated to relative obscurity until Java makes them
popular by not having them." James Iry

From dave at tridecap.com  Thu Jun 11 06:42:40 2009
From: dave at tridecap.com (Dave Dutcher)
Date: Thu, 11 Jun 2009 08:42:40 -0500
Subject: [antlr-interest] Again Cobol:
In-Reply-To: <6b04f3e70906110538l7410ce34l281fd4a14c5d9cac@mail.gmail.com>
References: <6b04f3e70906110538l7410ce34l281fd4a14c5d9cac@mail.gmail.com>
Message-ID: <E6635BEF05174DA99C9872274CDCFB8B@tridecap.com>

I'm new to Antlr myself, so maybe you already know everything I'm going to
suggest.
 
So your grammar has trouble with input like
 
if A == B then move Y to Z move X to Y.
 
And you're suggesting that the parser should just consume the move X to Y as
part of the if statement, even though it could also be interpreted as
another seperate statement?  This reminds me of the classic IF IF ELSE
problem, but I don't have my Antlr book with me to lookup how that is
usually solved.
 
One method might be to just turn on backtracking.  Otherwise I would think
you could add syntatic predicates like ((stmt)=>stmt)+ which, as I
understand it, would make Antlr consume all the statements it can as that
part of the rule.  I haven't tested this though.
 
Dave
 
 



  _____  

From: antlr-interest-bounces at antlr.org
[mailto:antlr-interest-bounces at antlr.org] On Behalf Of Mark Taylor
Sent: Thursday, June 11, 2009 7:39 AM
To: antlr-interest at antlr.org
Subject: [antlr-interest] Again Cobol:


I'm working on a Cobol grammar (oh, the foolishness of youth...  wait I'm
not THAT young...) and I need some advice about the ambiguities.  In
particular I'm getting the famous: "error(211): CobolTest.g:11:30: [fatal]
rule if has non-LL(*) decision due to recursive rule invocations reachable
from alts 1,2.  Resolve by left-factoring or using syntactic predicates or
using backtrack=true option."  Yes, this has come up before, but there was
no clear answer.  This time I have a specific example (see below).

Below is the smallest grammar which exhibits the problem.  You can see I
have stmt+ in both the IF rule and the PERFORM rule.  The problem is the
'END-IF'?.  Since END-IF is optional in Cobol, there is no clear scope
terminator.   I've tried left refactoring the (stmt+ ....) into a separate
rule for both IF and PERFORM but that doesn't seem to work either.  I don't
see how a syntactic predicate could be applied to this either.

If I were writing this as a recursive descent parser by hand (I'm trying
Antlr so I don't have to do this) I would write a statementlist() method
that would simply loop on all statement beginnings keywords.  Then when an
END-IF, ELSE, END-PERFORM, or some other arbitrary scope terminator appeared
in the input the loop would simple exit and return the list of valid
statements.  The question is: how to get Antlr to behave like this?

Any advice is appreciated.

<pre>

grammar CobolTest;

program:     sentence+ EOF;

sentence:    stmt+ '.' ;

stmt:        if
        |    move 
        |   perform ;

if:            'if' condition 'then'? stmt+ ('else' stmt+)? 'end-if'? ;

move:        'move' ID 'to' ID ;

perform:     'perform' stmt+ 'end-perform' ;

condition:     ID '==' ID ;

ID  :       ('a'..'z'|'A'..'Z')+ ;
INT :       '0'..'9'+ ;
NEWLINE:    '\r'? '\n' {skip();} ;
WS  :       (' '|'\t')+ {skip();} ;

</pre>


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090611/91afb54b/attachment.html 

From mttdgf at gmail.com  Thu Jun 11 07:34:07 2009
From: mttdgf at gmail.com (Mark Taylor)
Date: Thu, 11 Jun 2009 09:34:07 -0500
Subject: [antlr-interest] Again Cobol:
In-Reply-To: <E6635BEF05174DA99C9872274CDCFB8B@tridecap.com>
References: <6b04f3e70906110538l7410ce34l281fd4a14c5d9cac@mail.gmail.com>
	<E6635BEF05174DA99C9872274CDCFB8B@tridecap.com>
Message-ID: <6b04f3e70906110734y7938f161g51bf707f9f37bfba@mail.gmail.com>

Dave: Yes, Cobol is that evil.  The period closes all previous scopes that
don't require explicit scope terminators (some constructs like PERFORM do,
some don't (COMPUTE)).  Thanks, that worked.  I replaced the PERFORM rule
with:

perform:     'perform' ((stmt)=>stmt)+ 'end-perform' ;

and I no longer get the error.

Now some rhetorical questions: why does it work?  Or, why is it not
obvious?  Where are syntactic predicates explained?  Is this in the online
docs somewhere I can't find?  Clearly I have some studying to do.  I haven't
picked up T.P.s book yet but I aim too.



On Thu, Jun 11, 2009 at 8:42 AM, Dave Dutcher <dave at tridecap.com> wrote:

>  I'm new to Antlr myself, so maybe you already know everything I'm going
> to suggest.
>
> So your grammar has trouble with input like
>
> if A == B then move Y to Z move X to Y.
>
> And you're suggesting that the parser should just consume the move X to Y
> as part of the if statement, even though it could also be interpreted as
> another seperate statement?  This reminds me of the classic IF IF ELSE
> problem, but I don't have my Antlr book with me to lookup how that is
> usually solved.
>
> One method might be to just turn on backtracking.  Otherwise I would think
> you could add syntatic predicates like ((stmt)=>stmt)+ which, as I
> understand it, would make Antlr consume all the statements it can as that
> part of the rule.  I haven't tested this though.
>
> Dave
>
>
>
>  ------------------------------
> *From:* antlr-interest-bounces at antlr.org [mailto:
> antlr-interest-bounces at antlr.org] *On Behalf Of *Mark Taylor
> *Sent:* Thursday, June 11, 2009 7:39 AM
> *To:* antlr-interest at antlr.org
> *Subject:* [antlr-interest] Again Cobol:
>
> I'm working on a Cobol grammar (oh, the foolishness of youth...  wait I'm
> not THAT young...) and I need some advice about the ambiguities.  In
> particular I'm getting the famous: "error(211): CobolTest.g:11:30: [fatal]
> rule if has non-LL(*) decision due to recursive rule invocations reachable
> from alts 1,2.  Resolve by left-factoring or using syntactic predicates or
> using backtrack=true option."  Yes, this has come up before, but there was
> no clear answer.  This time I have a specific example (see below).
>
> Below is the smallest grammar which exhibits the problem.  You can see I
> have stmt+ in both the IF rule and the PERFORM rule.  The problem is the
> 'END-IF'?.  Since END-IF is optional in Cobol, there is no clear scope
> terminator.   I've tried left refactoring the (stmt+ ....) into a separate
> rule for both IF and PERFORM but that doesn't seem to work either.  I don't
> see how a syntactic predicate could be applied to this either.
>
> If I were writing this as a recursive descent parser by hand (I'm trying
> Antlr so I don't have to do this) I would write a statementlist() method
> that would simply loop on all statement beginnings keywords.  Then when an
> END-IF, ELSE, END-PERFORM, or some other arbitrary scope terminator appeared
> in the input the loop would simple exit and return the list of valid
> statements.  The question is: how to get Antlr to behave like this?
>
> Any advice is appreciated.
>
> <pre>
>
> grammar CobolTest;
>
> program:     sentence+ EOF;
>
> sentence:    stmt+ '.' ;
>
> stmt:        if
>         |    move
>         |   perform ;
>
> if:            'if' condition 'then'? stmt+ ('else' stmt+)? 'end-if'? ;
>
> move:        'move' ID 'to' ID ;
>
> perform:     'perform' stmt+ 'end-perform' ;
>
> condition:     ID '==' ID ;
>
> ID  :       ('a'..'z'|'A'..'Z')+ ;
> INT :       '0'..'9'+ ;
> NEWLINE:    '\r'? '\n' {skip();} ;
> WS  :       (' '|'\t')+ {skip();} ;
>
> </pre>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090611/c2944c30/attachment.html 

From dave at tridecap.com  Thu Jun 11 08:10:36 2009
From: dave at tridecap.com (Dave Dutcher)
Date: Thu, 11 Jun 2009 10:10:36 -0500
Subject: [antlr-interest] Again Cobol:
In-Reply-To: <6b04f3e70906110734y7938f161g51bf707f9f37bfba@mail.gmail.com>
References: <6b04f3e70906110538l7410ce34l281fd4a14c5d9cac@mail.gmail.com>
	<E6635BEF05174DA99C9872274CDCFB8B@tridecap.com>
	<6b04f3e70906110734y7938f161g51bf707f9f37bfba@mail.gmail.com>
Message-ID: <CA414F83A5D046A68A064A9DEF988204@tridecap.com>

I read about syntatic predicates in TP's book.  And looking over the online
docs, I can't really find where they are explained either.  A google search
did turn up this article
http://www.antlr.org/wiki/display/ANTLR3/How+to+remove+global+backtracking+f
rom+your+grammar 
 
which looks like it might answer some of your questions.
 
Dave
 


  _____  

From: Mark Taylor [mailto:mttdgf at gmail.com] 
Sent: Thursday, June 11, 2009 9:34 AM
To: Dave Dutcher
Cc: antlr-interest at antlr.org
Subject: Re: [antlr-interest] Again Cobol:


Dave: Yes, Cobol is that evil.  The period closes all previous scopes that
don't require explicit scope terminators (some constructs like PERFORM do,
some don't (COMPUTE)).  Thanks, that worked.  I replaced the PERFORM rule
with:

perform:     'perform' ((stmt)=>stmt)+ 'end-perform' ;

and I no longer get the error.

Now some rhetorical questions: why does it work?  Or, why is it not obvious?
Where are syntactic predicates explained?  Is this in the online docs
somewhere I can't find?  Clearly I have some studying to do.  I haven't
picked up T.P.s book yet but I aim too.  




On Thu, Jun 11, 2009 at 8:42 AM, Dave Dutcher <dave at tridecap.com> wrote:


I'm new to Antlr myself, so maybe you already know everything I'm going to
suggest.
 
So your grammar has trouble with input like
 
if A == B then move Y to Z move X to Y.
 
And you're suggesting that the parser should just consume the move X to Y as
part of the if statement, even though it could also be interpreted as
another seperate statement?  This reminds me of the classic IF IF ELSE
problem, but I don't have my Antlr book with me to lookup how that is
usually solved.
 
One method might be to just turn on backtracking.  Otherwise I would think
you could add syntatic predicates like ((stmt)=>stmt)+ which, as I
understand it, would make Antlr consume all the statements it can as that
part of the rule.  I haven't tested this though.
 
Dave
 
 



  _____  

From: antlr-interest-bounces at antlr.org
[mailto:antlr-interest-bounces at antlr.org] On Behalf Of Mark Taylor
Sent: Thursday, June 11, 2009 7:39 AM
To: antlr-interest at antlr.org
Subject: [antlr-interest] Again Cobol:


I'm working on a Cobol grammar (oh, the foolishness of youth...  wait I'm
not THAT young...) and I need some advice about the ambiguities.  In
particular I'm getting the famous: "error(211): CobolTest.g:11:30: [fatal]
rule if has non-LL(*) decision due to recursive rule invocations reachable
from alts 1,2.  Resolve by left-factoring or using syntactic predicates or
using backtrack=true option."  Yes, this has come up before, but there was
no clear answer.  This time I have a specific example (see below).

Below is the smallest grammar which exhibits the problem.  You can see I
have stmt+ in both the IF rule and the PERFORM rule.  The problem is the
'END-IF'?.  Since END-IF is optional in Cobol, there is no clear scope
terminator.   I've tried left refactoring the (stmt+ ....) into a separate
rule for both IF and PERFORM but that doesn't seem to work either.  I don't
see how a syntactic predicate could be applied to this either.

If I were writing this as a recursive descent parser by hand (I'm trying
Antlr so I don't have to do this) I would write a statementlist() method
that would simply loop on all statement beginnings keywords.  Then when an
END-IF, ELSE, END-PERFORM, or some other arbitrary scope terminator appeared
in the input the loop would simple exit and return the list of valid
statements.  The question is: how to get Antlr to behave like this?

Any advice is appreciated.

<pre>

grammar CobolTest;

program:     sentence+ EOF;

sentence:    stmt+ '.' ;

stmt:        if
        |    move 
        |   perform ;

if:            'if' condition 'then'? stmt+ ('else' stmt+)? 'end-if'? ;

move:        'move' ID 'to' ID ;

perform:     'perform' stmt+ 'end-perform' ;

condition:     ID '==' ID ;

ID  :       ('a'..'z'|'A'..'Z')+ ;
INT :       '0'..'9'+ ;
NEWLINE:    '\r'? '\n' {skip();} ;
WS  :       (' '|'\t')+ {skip();} ;

</pre>



-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090611/5f46ded8/attachment.html 

From linlin.xie at siemens.com  Thu Jun 11 08:51:47 2009
From: linlin.xie at siemens.com (Xie, Linlin)
Date: Thu, 11 Jun 2009 17:51:47 +0200
Subject: [antlr-interest] problem in displayRecognitionError() in
	antlr2baserecognizer.c
In-Reply-To: <4A2E8CF7.3080903@temporal-wave.com>
References: <79118B9FE8CE8E49B0D71964A79CB647026677A0@dekomplm002.net.plm.eds.com>
	<4A2E8CF7.3080903@temporal-wave.com>
Message-ID: <79118B9FE8CE8E49B0D71964A79CB647026CADBB@dekomplm002.net.plm.eds.com>

Hi Jim,

 

Thanks for your reply. We finally figure out that large number of
expecting is actually -1, which is EOF. I guess this would rule out the
possibility of a bug in antlr, if we don't speak of the appropriateness
of the message. In the use case I mentioned in my last email, I would
think start(Rule2), start(Rule3) and ; all should be the expected
tokens, instead of EOF. Do you think if there is anything antlr can do
to improve the error messages to make them more relevant? Or should I
improve my grammar to get more appropriate error messages, and how?

 

Also I can see when the displayRecognitionError() checks the recognizer
type, it only considers either parser or tree parser, why is lexer not
considered here? I can see that a lexer error is considered a No Via Alt
parser exception, but there is still lexer error report from antlr,
where can I find the lexer error report code? Or how can I intercept the
lexer error like I do with the parser error report? 

 

Many thanks!

Linlin

 

 

 

From: Jim Idle [mailto:jimi at temporal-wave.com] 
Sent: 09 June 2009 17:25
To: Xie, Linlin
Cc: antlr-interest at antlr.org; Fitt, Andrew; Hamid, Nusrat
Subject: Re: problem in displayRecognitionError() in
antlr2baserecognizer.c

 

Xie, Linlin wrote: 

Hello Jim and all,

 

I wonder if there is any bug in antlr setting the "expecting" member
variable of struct "ANTLR3_EXCEPTION". The following is what I find out
while assigning my own error processing function to antlr's recognizer's
reportError function pointer:

 

For my grammar definition like:

"Query: Rule1 Rule2? Rule3? ; EOF"

And for my test case that has a malformed syntax, which matches Rule1,
but the rest doesn't match either Rule2 or Rule3, through debugging, I
find that the parser then tries to match with ";", of course it doesn't
match ";" again, then it tries to report error and recover. 

 

In the antlr's error reporting (I did it by copying the content of
displayRecognitionError() to my own error processing function), the
"expecting" variable should point to the position of ";" as that's what
it tries to match. But it shows that the expecting is a very large
number that can't possibly be within the range of the

Hi - the routines in the runtime are just examples. You are expected to
make a copy of them and install your own routines. Note that the
expecting member of the token is not always a valid token number. For
instance you have to check it for being -1, which means it was expecting
EOF, which is probably what it is expecting in your grammar above right?

            if    (ex->expecting == ANTLR3_TOKEN_EOF)
            {

Also, for some exception types, expecting is not a valid field. The
default routines should show you that as not all exceptions access
expecting. Finally, for some exceptions, you don't get a token number,
but a bit set, from which you must extract the set of tokens that coudl
have matched. This is a possibility here because your possibilities are
start(Rule2) & start(Rule3) & ';'. In the code that processes
ANTLR3_MISMATCHED_SET_EXCEPTION, you can see how to deal with the bit
set.

So, if your expecting code is not -1, then it is a bitmap in all
likelihood.





vector "TokenNames", however as C doesn't have exception handlings, the
print out is "null", if without looking carefully, it seems to be no
problem at all. But what I'm trying to do in my own function is to read
out the error information from antlr exception and output it into
standout output in C++, that's how an exception is thrown in C++ that
leads me to the problem. I did some probing of the antlr code, and think
it could be a bug when antlr sets the "expecting" variable in case of
such an error.  Also I find that the exception variable has a
nextexception pointer which points to another exception variable

The nextException isn't used by the default error reporting, I just
included it in case anyone thought it useful. 

Jim

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090611/905f1302/attachment.html 

From jimi at temporal-wave.com  Thu Jun 11 08:59:22 2009
From: jimi at temporal-wave.com (Jim Idle)
Date: Thu, 11 Jun 2009 08:59:22 -0700
Subject: [antlr-interest] Ambiguity between identifier and operator
In-Reply-To: <4A30CCF0.8060807@anubex.com>
References: <4A30CCF0.8060807@anubex.com>
Message-ID: <4A3129DA.8050801@temporal-wave.com>

David Chipping wrote:
> I'm having some trouble trying to work out the best approach for some 
> ambiguity.
>
> If I have an identifier token defined as:
>
> IDENTIFIER: ('A'..'Z' | 'a'..'z' | '_') ('A'..'Z' | 'a'..'z' | '_' | 
> '0'..'9')* ('$' | '!' | '&')?
>
> Were the last part of the rule indicates an optional implicit type 
> character.
>
> Unfortunately, "!" is also a binary operator that works with 
> identifiers. For example, the following is valid: 
>
> foo!bar
>
> and indicates a ! operator with a left side of foo and right of bar. 
> This is only possible when the left side identifier doesn't end with a 
> implicit type character.
>
> I was initially thinking of doing some token re-writing to determine if 
> an identifier (without an implicit type char)  followed by a "!" is 
> followed by another identifier and then emit a separate "!" so that can 
> be picked up by the parser. But I'm not keen on doing this, as (as far 
> as I can see, please correct me if i'm wrong) this takes some of my 
> lexing rules out of my grammar and into another place, complicating any 
> maintenance on the grammar itself.
>
> Is there a cleaner/different way to achieve this?
>
> Cheers
>
>   
David,

Are you sure that the language youare parsing (what is it?), does not 
specify some disambiguation rules, for instance in the way that VB.Net does?

What you do would normally do is take the '$' '!' '&' out of the lexer 
rule for ID, then apply the disambiguation in the lexer and parser. For 
instance, in VB, '!' followed by an IDCHAR is a separator, otherwise it 
is a type specifier. So you can do this:

BANG        :
                ('!' IDSTART)=>    '!'      // Must be a separator as 
per Lang spec 9.0 $2.2.1
            |    '!'                        // Type specifier
                { $type = T_SINGLE; }


Then the other part in the lexer says:

ident: (identifier) (DOT^ (identifier|keyword))*
   
        (
            {( (CommonTokenStream)input ).get( input.index()-1 
).getType() != WS }?=>
           
            variableType

         )?


Where variable type is T_SINGLE T_DOUBLE and so on.

Whatever you are parsing may have similar rules. For instance, as it is 
a trailing element, it cannot start another identifier, so you could do 
this:

IDENTIFIER: ('A'..'Z' | 'a'..'z' | '_') ('A'..'Z' | 'a'..'z' | '_' | 
'0'..'9')* 
           (	{checkIsTypeChar()}=>	

		('$' | '!' | '&')

              )?

Where that method checks the following character, then checks that the character following that is not the start of an ID. 

However, I suspect that you need to make them separate tokens, and change the type if possible, or use syntactic predicates in the parser when you cannot change the type in the lexer. 

Jim







From jimi at temporal-wave.com  Thu Jun 11 09:04:18 2009
From: jimi at temporal-wave.com (Jim Idle)
Date: Thu, 11 Jun 2009 09:04:18 -0700
Subject: [antlr-interest] [C target] [3.1.3] several bugs in
 the	generated parser
In-Reply-To: <af7c90190906110456u7f74c7b1k60ce33ca3f1297b7@mail.gmail.com>
References: <af7c90190906100456p57517fc6oc595aae91680d4cd@mail.gmail.com>	<4A2FD4FE.1020206@temporal-wave.com>
	<af7c90190906110456u7f74c7b1k60ce33ca3f1297b7@mail.gmail.com>
Message-ID: <4A312B02.3060003@temporal-wave.com>

An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090611/b0573d42/attachment.html 

From jimi at temporal-wave.com  Thu Jun 11 10:57:05 2009
From: jimi at temporal-wave.com (Jim Idle)
Date: Thu, 11 Jun 2009 10:57:05 -0700
Subject: [antlr-interest] [C target] [3.1.3] several bugs in
 the	generated parser
In-Reply-To: <af7c90190906110456u7f74c7b1k60ce33ca3f1297b7@mail.gmail.com>
References: <af7c90190906100456p57517fc6oc595aae91680d4cd@mail.gmail.com>	<4A2FD4FE.1020206@temporal-wave.com>
	<af7c90190906110456u7f74c7b1k60ce33ca3f1297b7@mail.gmail.com>
Message-ID: <4A314571.5000600@temporal-wave.com>

Tomas Potrusil wrote:
> All those problems remain there also for the latest builds (from May
> 21, version 3.1.4-SNAPSHOT)
>
> add 1) Is there any hope that it will be fixed soon? Or can I write
> that grammar any other way in order to achieve the similar
> functionality?

OK - I looked in the issues you reported and I have fixed them all. The 
caveat is that I have not tested the fixes, so I am afraid you will have 
to be the guinea-pig.

Hudson has built the new runtime and you can get it from there or from 
the www.antlr.org/download/C directory. However, this also requires a 
new antlr tool jar. Hudson has built the standalone jar, so you can get 
it from the last successful build link, but it is still building the 
complete jar, which takes a while because it runs the regression tests 
twice. Maybe about an hour from now. Visit: www.antlr.org/hudson.

Let me know if those fixes work for you.

Jim

From jimi at temporal-wave.com  Thu Jun 11 11:07:06 2009
From: jimi at temporal-wave.com (Jim Idle)
Date: Thu, 11 Jun 2009 11:07:06 -0700
Subject: [antlr-interest] Again Cobol:
In-Reply-To: <6b04f3e70906110734y7938f161g51bf707f9f37bfba@mail.gmail.com>
References: <6b04f3e70906110538l7410ce34l281fd4a14c5d9cac@mail.gmail.com>	<E6635BEF05174DA99C9872274CDCFB8B@tridecap.com>
	<6b04f3e70906110734y7938f161g51bf707f9f37bfba@mail.gmail.com>
Message-ID: <4A3147CA.6080801@temporal-wave.com>

Mark Taylor wrote:
> Dave: Yes, Cobol is that evil.  The period closes all previous scopes 
> that don't require explicit scope terminators (some constructs like 
> PERFORM do, some don't (COMPUTE)).  Thanks, that worked.  I replaced 
> the PERFORM rule with:
>
> perform:     'perform' ((stmt)=>stmt)+ 'end-perform' ;
That will parse every stmt twice and performance will be terrible. Make 
a predicate rule instead:

stmt_pred
    : 'if' | 'move' | 'foo'
    ;


((stmt_pred)=>stmt)+

Jim

From jimi at temporal-wave.com  Thu Jun 11 11:29:57 2009
From: jimi at temporal-wave.com (Jim Idle)
Date: Thu, 11 Jun 2009 11:29:57 -0700
Subject: [antlr-interest] problem in displayRecognitionError() in
	antlr2baserecognizer.c
In-Reply-To: <79118B9FE8CE8E49B0D71964A79CB647026CADBB@dekomplm002.net.plm.eds.com>
References: <79118B9FE8CE8E49B0D71964A79CB647026677A0@dekomplm002.net.plm.eds.com>
	<4A2E8CF7.3080903@temporal-wave.com>
	<79118B9FE8CE8E49B0D71964A79CB647026CADBB@dekomplm002.net.plm.eds.com>
Message-ID: <4A314D25.2050506@temporal-wave.com>

An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090611/1a146d23/attachment.html 

From jsrs701 at yahoo.com  Thu Jun 11 11:49:11 2009
From: jsrs701 at yahoo.com (J. Stephen Riley Silber)
Date: Thu, 11 Jun 2009 11:49:11 -0700 (PDT)
Subject: [antlr-interest] Tree grammar example, redux
Message-ID: <843424.89736.qm@web33304.mail.mud.yahoo.com>

Finally got around to trying this and it worked like a champ.? Thanks, Ter.

--- On Tue, 6/2/09, Terence Parr <parrt at cs.usfca.edu> wrote:

From: Terence Parr <parrt at cs.usfca.edu>
Subject: Re: [antlr-interest] Tree grammar example, redux
To: "J. Stephen Riley Silber" <jsrs701 at yahoo.com>
Cc: antlr-interest at antlr.org
Date: Tuesday, June 2, 2009, 4:27 PM


On Jun 2, 2009, at 4:25 PM, J. Stephen Riley Silber wrote:

> Hi gang,
> 
> Frank mentioned the second example in this article (http://www.antlr.org/wiki/display/ANTLR3/Simple+tree-based+interpeter) not working as of 3.1.3.? I, too, have been trying to get it working, to no avail.
> 
> Did something fundamental change in the TreeNodeStream functionality?? I like this solution much better than spawning new tree parsers every time a function is called.
> 
> What's the dillio?

I think maybe the default stream isn't buffered anymore.? Try using BufferedTreeNodeStream :)
Ter
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090611/03eb1e1b/attachment.html 

From stefika at gmail.com  Thu Jun 11 15:08:53 2009
From: stefika at gmail.com (Andreas Stefik)
Date: Thu, 11 Jun 2009 15:08:53 -0700
Subject: [antlr-interest]  Line and column numbers in rewrite rules
Message-ID: <1332b72e0906111508r15b1d39ctcf25ba3e4f26ab63@mail.gmail.com>

Hello folks,

I'm working on an expression reader in one of my grammars and am working
with transporting line and column numbers from my grammar to a different
place in my compiler architecture. I apologize if this has been asked
before. I did a search, but did not immediately see an answer. A simplified
version of the grammar is below

expression    returns[ExpressionValue eval]
    :
    |    ^(PLUS left = expression right = expression)
        {        }
    |    INT
        {
            int bl = $INT.getLine();
            int bc = $INT.getCharPositionInLine();
            int ec = bc + $INT.text.length();
            //etc
        }
    ;

Now, when the item I want to get line and column numbers from is a terminal,
things are easy, as I can just call getLine and getCharPositionInLine.
However, when I have rules, it's not immediately clear to me how I go about
getting them without doing some hacking behind the scenes. What I've been
doing is something like this:

CLASS ID?
    {
        currentClass.setLineBegin($CLASS.getLine());
        currentClass.setColumnBegin($CLASS.getCharPositionInLine());
    }
        method_declaration*
    END
    {
        currentClass.setLineEnd($END.getLine());
        currentClass.setColumnEnd($END.getCharPositionInLine());
    }

This works fine when I've got terminals at the beginning and end of a
particular rule, but does not work when I have rewrite rules in a grammar
(e.g., ^(PLUS left = expression right = expression) )

What am I missing here? Is there an easy way to get line and column number
information from each subrule in a rewrite?

Any ideas are appreciated,

Andy
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090611/44f1e1d2/attachment.html 

From stefika at gmail.com  Thu Jun 11 15:53:26 2009
From: stefika at gmail.com (Andreas Stefik)
Date: Thu, 11 Jun 2009 15:53:26 -0700
Subject: [antlr-interest] Line and column numbers in rewrite rules
In-Reply-To: <1332b72e0906111508r15b1d39ctcf25ba3e4f26ab63@mail.gmail.com>
References: <1332b72e0906111508r15b1d39ctcf25ba3e4f26ab63@mail.gmail.com>
Message-ID: <1332b72e0906111553m3011d0b8gbd65f7abf01394ec@mail.gmail.com>

It looks like I missed a few posts on this topic from a few days ago
(Thanks, Jim!)

The suggestion appears to pass, for a tree grammar rule like:

expression    returns[ExpressionValue eval]
    :
        ^(PLUS left = expression right = expression)

to use $e.tree and then get the line and column info.

On the Java target, the following:

CommonTree tree = $left.tree;

generates:

CommonTree tree = (left!=null?((CommonTree)left.tree):null);

But there is no variable called tree (apparently). There is, however, a
"getTree()" function, but it doesn't look like ANTLR automatically
translates it into that form, so I assume that's not its intended use. If,
however, I hack the generated code and put in something similar to

(CommonTree)left.getTree()) the result appears to always be null.

Jim, does your solution have some preconditions I'm not seeing?

Andy
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090611/444c22a4/attachment.html 

From jimi at temporal-wave.com  Thu Jun 11 17:04:07 2009
From: jimi at temporal-wave.com (Jim Idle)
Date: Thu, 11 Jun 2009 17:04:07 -0700
Subject: [antlr-interest] Line and column numbers in rewrite rules
In-Reply-To: <1332b72e0906111553m3011d0b8gbd65f7abf01394ec@mail.gmail.com>
References: <1332b72e0906111508r15b1d39ctcf25ba3e4f26ab63@mail.gmail.com>
	<1332b72e0906111553m3011d0b8gbd65f7abf01394ec@mail.gmail.com>
Message-ID: <4A319B77.3020305@temporal-wave.com>

An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090611/61ee2efa/attachment.html 

From mttdgf at gmail.com  Fri Jun 12 07:08:44 2009
From: mttdgf at gmail.com (Mark Taylor)
Date: Fri, 12 Jun 2009 09:08:44 -0500
Subject: [antlr-interest] Again Cobol:
In-Reply-To: <CA414F83A5D046A68A064A9DEF988204@tridecap.com>
References: <6b04f3e70906110538l7410ce34l281fd4a14c5d9cac@mail.gmail.com>
	<E6635BEF05174DA99C9872274CDCFB8B@tridecap.com>
	<6b04f3e70906110734y7938f161g51bf707f9f37bfba@mail.gmail.com>
	<CA414F83A5D046A68A064A9DEF988204@tridecap.com>
Message-ID: <6b04f3e70906120708v78b3852fw2c806dcdc8c8240a@mail.gmail.com>

Thanks Dave and Jim, that helps a lot!

On Thu, Jun 11, 2009 at 10:10 AM, Dave Dutcher <dave at tridecap.com> wrote:

>  I read about syntatic predicates in TP's book.  And looking over the
> online docs, I can't really find where they are explained either.  A google
> search did turn up this article
> http://www.antlr.org/wiki/display/ANTLR3/How+to+remove+global+backtracking+from+your+grammar
>
>
> which looks like it might answer some of your questions.
>
> Dave
>
>
>  ------------------------------
> *From:* Mark Taylor [mailto:mttdgf at gmail.com]
> *Sent:* Thursday, June 11, 2009 9:34 AM
> *To:* Dave Dutcher
> *Cc:* antlr-interest at antlr.org
> *Subject:* Re: [antlr-interest] Again Cobol:
>
> Dave: Yes, Cobol is that evil.  The period closes all previous scopes that
> don't require explicit scope terminators (some constructs like PERFORM do,
> some don't (COMPUTE)).  Thanks, that worked.  I replaced the PERFORM rule
> with:
>
> perform:     'perform' ((stmt)=>stmt)+ 'end-perform' ;
>
> and I no longer get the error.
>
> Now some rhetorical questions: why does it work?  Or, why is it not
> obvious?  Where are syntactic predicates explained?  Is this in the online
> docs somewhere I can't find?  Clearly I have some studying to do.  I haven't
> picked up T.P.s book yet but I aim too.
>
>
>
> On Thu, Jun 11, 2009 at 8:42 AM, Dave Dutcher <dave at tridecap.com> wrote:
>
>>  I'm new to Antlr myself, so maybe you already know everything I'm going
>> to suggest.
>>
>> So your grammar has trouble with input like
>>
>> if A == B then move Y to Z move X to Y.
>>
>> And you're suggesting that the parser should just consume the move X to Y
>> as part of the if statement, even though it could also be interpreted as
>> another seperate statement?  This reminds me of the classic IF IF ELSE
>> problem, but I don't have my Antlr book with me to lookup how that is
>> usually solved.
>>
>> One method might be to just turn on backtracking.  Otherwise I would think
>> you could add syntatic predicates like ((stmt)=>stmt)+ which, as I
>> understand it, would make Antlr consume all the statements it can as that
>> part of the rule.  I haven't tested this though.
>>
>> Dave
>>
>>
>>
>>  ------------------------------
>> *From:* antlr-interest-bounces at antlr.org [mailto:
>> antlr-interest-bounces at antlr.org] *On Behalf Of *Mark Taylor
>> *Sent:* Thursday, June 11, 2009 7:39 AM
>> *To:* antlr-interest at antlr.org
>> *Subject:* [antlr-interest] Again Cobol:
>>
>>   I'm working on a Cobol grammar (oh, the foolishness of youth...  wait
>> I'm not THAT young...) and I need some advice about the ambiguities.  In
>> particular I'm getting the famous: "error(211): CobolTest.g:11:30: [fatal]
>> rule if has non-LL(*) decision due to recursive rule invocations reachable
>> from alts 1,2.  Resolve by left-factoring or using syntactic predicates or
>> using backtrack=true option."  Yes, this has come up before, but there was
>> no clear answer.  This time I have a specific example (see below).
>>
>> Below is the smallest grammar which exhibits the problem.  You can see I
>> have stmt+ in both the IF rule and the PERFORM rule.  The problem is the
>> 'END-IF'?.  Since END-IF is optional in Cobol, there is no clear scope
>> terminator.   I've tried left refactoring the (stmt+ ....) into a separate
>> rule for both IF and PERFORM but that doesn't seem to work either.  I don't
>> see how a syntactic predicate could be applied to this either.
>>
>> If I were writing this as a recursive descent parser by hand (I'm trying
>> Antlr so I don't have to do this) I would write a statementlist() method
>> that would simply loop on all statement beginnings keywords.  Then when an
>> END-IF, ELSE, END-PERFORM, or some other arbitrary scope terminator appeared
>> in the input the loop would simple exit and return the list of valid
>> statements.  The question is: how to get Antlr to behave like this?
>>
>> Any advice is appreciated.
>>
>> <pre>
>>
>> grammar CobolTest;
>>
>> program:     sentence+ EOF;
>>
>> sentence:    stmt+ '.' ;
>>
>> stmt:        if
>>         |    move
>>         |   perform ;
>>
>> if:            'if' condition 'then'? stmt+ ('else' stmt+)? 'end-if'? ;
>>
>> move:        'move' ID 'to' ID ;
>>
>> perform:     'perform' stmt+ 'end-perform' ;
>>
>> condition:     ID '==' ID ;
>>
>> ID  :       ('a'..'z'|'A'..'Z')+ ;
>> INT :       '0'..'9'+ ;
>> NEWLINE:    '\r'? '\n' {skip();} ;
>> WS  :       (' '|'\t')+ {skip();} ;
>>
>> </pre>
>>
>>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090612/674a3e97/attachment.html 

From david at crunchybear.com  Fri Jun 12 08:09:47 2009
From: david at crunchybear.com (David Chipping)
Date: Fri, 12 Jun 2009 17:09:47 +0200
Subject: [antlr-interest] Ambiguity between identifier and operator
In-Reply-To: <4A3129DA.8050801@temporal-wave.com>
References: <4A30CCF0.8060807@anubex.com> <4A3129DA.8050801@temporal-wave.com>
Message-ID: <4d1081a30906120809r391dd1f6ye80b4bbdc4ce3c8f@mail.gmail.com>

On Thu, Jun 11, 2009 at 5:59 PM, Jim Idle <jimi at temporal-wave.com> wrote:

> David Chipping wrote:
> > I'm having some trouble trying to work out the best approach for some
> > ambiguity.
> >
> > If I have an identifier token defined as:
> >
> > IDENTIFIER: ('A'..'Z' | 'a'..'z' | '_') ('A'..'Z' | 'a'..'z' | '_' |
> > '0'..'9')* ('$' | '!' | '&')?
> >
> > Were the last part of the rule indicates an optional implicit type
> > character.
> >
> > Unfortunately, "!" is also a binary operator that works with
> > identifiers. For example, the following is valid:
> >
> > foo!bar
> >
> > and indicates a ! operator with a left side of foo and right of bar.
> > This is only possible when the left side identifier doesn't end with a
> > implicit type character.
> >
> > I was initially thinking of doing some token re-writing to determine if
> > an identifier (without an implicit type char)  followed by a "!" is
> > followed by another identifier and then emit a separate "!" so that can
> > be picked up by the parser. But I'm not keen on doing this, as (as far
> > as I can see, please correct me if i'm wrong) this takes some of my
> > lexing rules out of my grammar and into another place, complicating any
> > maintenance on the grammar itself.
> >
> > Is there a cleaner/different way to achieve this?
> >
> > Cheers
> >
> >
> David,
>
> Are you sure that the language youare parsing (what is it?), does not
> specify some disambiguation rules, for instance in the way that VB.Net
> does?
>
> What you do would normally do is take the '$' '!' '&' out of the lexer
> rule for ID, then apply the disambiguation in the lexer and parser. For
> instance, in VB, '!' followed by an IDCHAR is a separator, otherwise it
> is a type specifier. So you can do this:
>
> BANG        :
>                ('!' IDSTART)=>    '!'      // Must be a separator as
> per Lang spec 9.0 $2.2.1
>            |    '!'                        // Type specifier
>                { $type = T_SINGLE; }
>
>
> Then the other part in the lexer says:
>
> ident: (identifier) (DOT^ (identifier|keyword))*
>
>        (
>            {( (CommonTokenStream)input ).get( input.index()-1
> ).getType() != WS }?=>
>
>            variableType
>
>         )?
>
>
> Where variable type is T_SINGLE T_DOUBLE and so on.
>
> Whatever you are parsing may have similar rules. For instance, as it is
> a trailing element, it cannot start another identifier, so you could do
> this:
>
> IDENTIFIER: ('A'..'Z' | 'a'..'z' | '_') ('A'..'Z' | 'a'..'z' | '_' |
> '0'..'9')*
>           (    {checkIsTypeChar()}=>
>
>                ('$' | '!' | '&')
>
>              )?
>
> Where that method checks the following character, then checks that the
> character following that is not the start of an ID.
>
> However, I suspect that you need to make them separate tokens, and change
> the type if possible, or use syntactic predicates in the parser when you
> cannot change the type in the lexer.
>
> Jim


Thanks for the response Jim,

I think your suggestion of splitting the IDENT in the lexer and using them
in the parser was probably too much of a simple solution at the time I was
trying to solve the problem, but thats probably going to work for me!

-David
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090612/9fa31034/attachment.html 

From jimi at temporal-wave.com  Fri Jun 12 11:01:04 2009
From: jimi at temporal-wave.com (Jim Idle)
Date: Fri, 12 Jun 2009 11:01:04 -0700
Subject: [antlr-interest] ANTLR Support in Netbeans
Message-ID: <4A3297E0.4050209@temporal-wave.com>

For those of you who like me, use Netbeans for Java projects, if you 
have not spotted it already, I highly recommend the latest version of 
the ANTLR plugin available through the Netbeans plugin menu option or 
from here:

http://plugins.netbeans.org/PluginPortal/faces/PluginDetailPage.jsp?pluginid=14444

The author has done a great job with this latest update, even to the 
point of colorizing the Java code in actions. ANTLRWorks is still the 
debugging tool but if you have lots of Java to go with your grammars, 
then this is a really excellent plugin while you are working in your 
project.

Jim


From parrt at cs.usfca.edu  Fri Jun 12 11:05:04 2009
From: parrt at cs.usfca.edu (Terence Parr)
Date: Fri, 12 Jun 2009 11:05:04 -0700
Subject: [antlr-interest] ANTLR Support in Netbeans
In-Reply-To: <4A3297E0.4050209@temporal-wave.com>
References: <4A3297E0.4050209@temporal-wave.com>
Message-ID: <DB215F93-4966-414E-9A27-5B9EC41227FE@cs.usfca.edu>

Added to download.html page.
Ter
On Jun 12, 2009, at 11:01 AM, Jim Idle wrote:

> For those of you who like me, use Netbeans for Java projects, if you
> have not spotted it already, I highly recommend the latest version of
> the ANTLR plugin available through the Netbeans plugin menu option or
> from here:
>
> http://plugins.netbeans.org/PluginPortal/faces/PluginDetailPage.jsp?pluginid=14444
>
> The author has done a great job with this latest update, even to the
> point of colorizing the Java code in actions. ANTLRWorks is still the
> debugging tool but if you have lots of Java to go with your grammars,
> then this is a really excellent plugin while you are working in your
> project.
>
> Jim
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address


From martijn.reuvers at gmail.com  Fri Jun 12 11:09:54 2009
From: martijn.reuvers at gmail.com (Martijn Reuvers)
Date: Fri, 12 Jun 2009 20:09:54 +0200
Subject: [antlr-interest] ANTLR Support in Netbeans
In-Reply-To: <4A3297E0.4050209@temporal-wave.com>
References: <4A3297E0.4050209@temporal-wave.com>
Message-ID: <c376e6ec0906121109i20de15b2yf69f3cc64dd42d00@mail.gmail.com>

Awesome! I was not aware of this plugin! Thanks for pointing this out. :)

On Fri, Jun 12, 2009 at 8:01 PM, Jim Idle<jimi at temporal-wave.com> wrote:
> For those of you who like me, use Netbeans for Java projects, if you
> have not spotted it already, I highly recommend the latest version of
> the ANTLR plugin available through the Netbeans plugin menu option or
> from here:
>
> http://plugins.netbeans.org/PluginPortal/faces/PluginDetailPage.jsp?pluginid=14444
>
> The author has done a great job with this latest update, even to the
> point of colorizing the Java code in actions. ANTLRWorks is still the
> debugging tool but if you have lots of Java to go with your grammars,
> then this is a really excellent plugin while you are working in your
> project.
>
> Jim
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>

From packadal at gmail.com  Fri Jun 12 12:18:41 2009
From: packadal at gmail.com (packadal)
Date: Fri, 12 Jun 2009 15:18:41 -0400
Subject: [antlr-interest] CSharp GeneratedCode attribute
Message-ID: <8e87f2580906121218p12c20c84n8d613bb779edf751@mail.gmail.com>

Hi,

For the current project I am working on, we need to use a parser.
I convinced everybody here that writing your own parser is evil, because it
takes much longer to write than using a tool conceived for this exact
purpose.

Now we use C# and have some strict coding conventions, enforced using the
Microsoft tools (FxCop and StyleCop).
The problem being the antlr-generated code does not comply with these rules.

But Microsoft thought about the possibility of using generated code with
these tools, and the [GeneratedCode(name, version)] attribute is here for
this purpose. Hurray !
The only problem remaining now is that this attribute cannot be placed
correctly using the C# 2 template.

So I added a line in the C# 2 template (dunno if I done it "The Right Way"
though) :

...

75  <docComment>
*76  <if(actions.(actionScope).generatedVersion)>
77  [GeneratedCode("antlr", @"<actions.(actionScope).generatedVersion>")]
78
79  <endif>
*80  <recognizer>
...

Obviously in bold is what I added.
>From what I have seen this can also be added in the C# 3 template.

BTW, when will there be a release of antlrworks including version 3.1.3 of
antlr ?
I have tried it by myself but must have done something wrong as I get loads
of errors when trying to compile.

Keep up the good work,
Regards.

-- 
- Always keep in mind that you may be wrong -
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090612/6944964d/attachment.html 

From dukie_banderjee at hotmail.com  Fri Jun 12 21:28:24 2009
From: dukie_banderjee at hotmail.com (Dukie Banderjee)
Date: Sat, 13 Jun 2009 00:28:24 -0400
Subject: [antlr-interest] Keywords vs. freeform text
Message-ID: <COL113-W302C3596458CF1ACEDD5EB92400@phx.gbl>


Hi, 
Hope this isn't too much of a newbie question.

I need to parse a format (EDI) which is basically delimited fields, but some fields must contain standardized code values whereas other fields can contain freeform text.

My question is related to lexing and/or parsing. Do I need to/want to have a lexer token for each possible code, or should I just accept a freeform TEXT token, and then later parse the actual text to determine if its a valid code?

I currently have a grammar which handles *some* of the more important codes by specifying lexer tokens. E.g.:

ST: 'ST' ;
BFR: 'BFR' ;
N1: 'N1' ;
REF: 'REF' ;
etc...

And a freeform TEXT token:
TEXT: ('a'..'z'|'A'..'Z'|'0'..'9'|' '|':'|'-'|','|'.')+ ;

Then I use a parser rule for those possible fields where *any* text is allowed, even a code:
fieldText    : TEXT | code ;

code    : ST
        | BFR
        | N1
        | REF
etc...

This seems to be working okay for now, but I forsee problems as I'm trying to expand the grammar to work with all the various codes defined by the EDI standards. For example, some of the codes contain solely numeric characters, such as '09' or '01' or '12'. Later, I want to add checking for freeform numeric fields, such as those which might contain quantities or arbitrary integers. I think it will start to get ugly if I try to specify lexer tokens and parser rules like this:

CODE_09: '09'

NUMERIC: ('0'..'9')+

numericField: NUMERIC | numericCode

numericCode: CODE_09 | CODE_01 ... etc.

The core issue is that I need to *sometimes* treat certain fixed sequences of characters (e.g. 'ST' or '09') as special, and sometimes as merely freeform text or numeric values.

I'm fairly new to ANTLR (and parsing/lexing), so I'm not really sure what's a good way to resolve this. Any tips/pointers?

Example input:
ISA*00**00**01*812520286  // Here '01' is a special code which determines the type/format of the following field
SE*01*1052   // Here '01' is simply a numeric value which should be interpreted as an integer.

As a side topic, how do I write a lexer which properly handles both:
a) freeform alphanumeric (and spaces) input such as ('a'..'z'|'A'..'Z'|'0'..'9'|' '|':'|'-'|','|'.')+
b) freeform numeric input such as ('0'..'9')+
Is this doomed to be ambiguous? Should it be handled by the parser? Is there a way to handle it in the lexer?

Thanks

Rob

_________________________________________________________________
Create a cool, new character for your Windows Live? Messenger. 
http://go.microsoft.com/?linkid=9656621
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090613/b1a70cd7/attachment.html 

From markwright at internode.on.net  Sat Jun 13 03:34:41 2009
From: markwright at internode.on.net (Mark Wright)
Date: Sat, 13 Jun 2009 20:34:41 +1000
Subject: [antlr-interest] Target Language .stg Files - Token Names
In-Reply-To: <221ca3d10906081436o2c36053dx6d5d8078a2556ba6@mail.gmail.com>
References: <221ca3d10906081436o2c36053dx6d5d8078a2556ba6@mail.gmail.com>
Message-ID: <20090613203441.0000285f@goanna>

Maybe an AttributeRenderer might help:

http://www.antlr.org/wiki/display/ST/Object+rendering

Thanks, Mark

On Mon, 8 Jun 2009 17:36:46 -0400
Justin Holewinski <shawmishrak at gmail.com> wrote:

> I've been working on a C++ (STL + Boost) target for Antlr 3, and I'm
> struggling with some StringTemplate semantics.  Specifically, when
> generating code for matching tokens, the <token> template will
> sometimes refer to a textual token name (e.g. ID) and other times it
> will refer to a constant, the token identifier (e.g. 33).  Is there a
> way to determine, within a StringTemplate rule, which of these
> representations is used?
> 
> I would like to generate code like:
> 
> match(MyParser::TOKEN_ID);
> 
> for token names, and
> 
> match(33);
> 
> for token constants, so I would like to do something like:
> 
> <if(token.isNumber)>
>   match(<token>);
> <else>
>   match(MyParser::TOKEN_<token>);
> <endif>
> 
> but how to do this is eluding me.
> 
> 
> Currently, I am forced to use preprocessor magic to get by:
> 
> #undef ID
> #define ID  MyParser::TOKEN_ID
> ...
> 
> which I hate to do for multiple reasons.
> 
> 
> On a side note, is there any documentation of which attributes are
> avilable for variables in target language .stg files?  For instance,
> what attributes are available on a <rule>?  All of the information I
> find comes from deciphering the other .stg files.
> 
> 
> Thanks,
> 
> Justin Holewinski


-- 

From cmundi at gmail.com  Sat Jun 13 04:24:20 2009
From: cmundi at gmail.com (C. Mundi)
Date: Sat, 13 Jun 2009 04:24:20 -0700
Subject: [antlr-interest] Freeing memory as you go using C target
In-Reply-To: <4A2860B9.1050504@temporal-wave.com>
References: <mailman.0.1244142001.28274.antlr-interest@antlr.org>
	<BCF80163639E9F4296FC4B208F99BA47F95276A0@orsmsx504.amr.corp.intel.com>
	<4A2860B9.1050504@temporal-wave.com>
Message-ID: <e794390906130424g5e452a8fy2fa127cded87b6cb@mail.gmail.com>

Questions about having to read the whole input seem to come up about
once a month on the list.  I've never paid much attention because I'm
passing tokens in provably atomic chunks to a stateful parser which
logically reduces to slurping the whole stream.

But I am curious.  How do the folks who write real compilers answer
this question.  Seems like some grammars could make it very hard to
recognize atomic chunks at the lexing stage.  That probably says more
about my feeble lexical skill than anything else.

So how would a C# compiler be built differently by Microsoft than by
someone using antlr?

Pointers to literature gladly accepted.

Thanks
Carlos


On 6/4/09, Jim Idle <jimi at temporal-wave.com> wrote:
> Peterson, Joe wrote:
>>
>> Hello all,
>>
>> We're using the C target to generate a parser for a very large file with
>> very large independent sections.  Unfortunately, it's consuming 1GB+ of
>> memory when parsing the file.  Is there any way to free up the memory
>> consumed as we go without pre-parsing the file to chunk it up?  Everything
>> I've found in my searches seem to point to splitting up the file before
>> processing it. After a particular token, can we free the memory used by
>> that token?  For example if we had:
>>
>> contents : header body footer;
>> header : BLAH BLAH BLAH;
>> footer : BLA BLA BLA;
>> body : section+;
>>
>> section
>> @after {
>> 	// can we free everything here even though we're still in body?
>> }
>>     : LBRACE morestuff RBRACE;
>>
>
> Not really, as you must tokenize all the input before you call the parser;
> hence one way or another, you will create that many tokens and hence consume
> the memory for the tokens. Assuming you are not creating an AST and you are
> not using the ANTLR3_STRING convenience methods (via $x.text etc) and
> creating lots of strings as you go, then this must one monster of an input
> file to use that much memory just for tokens, as the tokens do not copy the
> input text unless you ask for their string values.
>
> If you are using $text references and so on, then you probably don;t want to
> do that as the string factory accumulates all the memory until the whole
> parser is finally shut down. Write your own methods that accept a token and
> do what you want with reference to the copy of the input you have. For
> istance you can use the input directly and null terminate after strings and
> ID and so on.
>
> I think that you probably need to split it up into the independent sections.
>
> However, if you can detect the end of a section lexically, then I posted
> some time back on a strategy for creating your own input stream, which you
> keep reusing until it says there are no more sections. Also, you could
> reduce the memory by decreasing the size of the token vector to remove
> things that you have definitely no more use for, but you would have to delve
> in to the internals and reset the counters in the token stream and so on. In
> the end, if these sections are really independent, it would be easier to
> just split them up unless you know the C runtime internals well :-).
>
> One final thing is that does 1GB really actually matter? Are you likely to
> run this on a machine that cannot handle that? I haven't had a machine with
> less than 8GB of memory for years :-). However, the target application
> determines that of course.
>
> There will be work done on a non buffering token stream at some point, but I
> cannot guarantee just when unless someone who is paying me wants it done ;-)
> That is probably what you need really. If you send me your grammar I might
> be able to give you some pointers (send it offline if it is commercially
> sensitive or something).
>
> Jim
> http://www.linkedin.com/in/jimidle
>
>
>

-- 
Sent from my mobile device

From haluongvn at gmail.com  Sat Jun 13 07:51:39 2009
From: haluongvn at gmail.com (Ha Luong)
Date: Sat, 13 Jun 2009 07:51:39 -0700
Subject: [antlr-interest] About literal supports unicode
Message-ID: <61577c8f0906130751i7e54aac0j5e11e0ede34b7b12@mail.gmail.com>

Dear all,

I tried to use the grammar for accepting the unicode string as follow:
//modify T.g in the example source of ANTLR book
grammar T;
options {
    language=Java;
}
@members {
String s;
}
r : ID '#' {s = $ID.text; System.out.println("found "+s);} ;
ID: ('a'..'z'|'\u00e0')+ ; //\u00e0
WS: (' '|'\n'|'\r')+ {skip();} ; // ignore whitespace

and do these commands in cygwin:
java org.antlr.Tool T.g
javac *.java

If I test the literal 'a', it is ok
java Test
a #
^Z
found a

but the literal '?', it has error:
java Test
?
#
^Z
line 1:0 no viable alternative at character '?'
line 2:0 missing ID at '#'
found <missing ID>

Could you please help me how can I add the literal unicode in ANTLR grammar?


Thank you very much,
Ha
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090613/9e9a81e5/attachment.html 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: test_literal_unicode.zip
Type: application/zip
Size: 809 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20090613/9e9a81e5/attachment.zip 

From s.barnett-cormack at lancaster.ac.uk  Sat Jun 13 08:21:12 2009
From: s.barnett-cormack at lancaster.ac.uk (Sam Barnett-Cormack)
Date: Sat, 13 Jun 2009 16:21:12 +0100
Subject: [antlr-interest] About literal supports unicode
In-Reply-To: <61577c8f0906130751i7e54aac0j5e11e0ede34b7b12@mail.gmail.com>
References: <61577c8f0906130751i7e54aac0j5e11e0ede34b7b12@mail.gmail.com>
Message-ID: <4A33C3E8.7000008@lancaster.ac.uk>

Ha Luong wrote:
> Dear all,
> 
> I tried to use the grammar for accepting the unicode string as follow:
> //modify T.g in the example source of ANTLR book
> grammar T;
> options {
>     language=Java;
> }
> @members {
> String s;
> }
> r : ID '#' {s = $ID.text; System.out.println("found "+s);} ;
> ID: ('a'..'z'|'\u00e0')+ ; //\u00e0
> WS: (' '|'\n'|'\r')+ {skip();} ; // ignore whitespace
> 
> and do these commands in cygwin:
> java org.antlr.Tool T.g
> javac *.java
> 
> If I test the literal 'a', it is ok
> java Test
> a #
> ^Z
> found a
> 
> but the literal '?', it has error:
> java Test
> ?
> #
> ^Z
> line 1:0 no viable alternative at character '?'
> line 2:0 missing ID at '#'
> found <missing ID>

The question that immediately occurs is whether your '?' is actually a 
00e0, or is it an 0300+0061? Not sure whether this would make a 
difference (the standard seems a little foggy as to whether 
implementations should consider them identical), but it's a question 
that comes immediately to mind.

Sam

From jimi at temporal-wave.com  Sat Jun 13 09:45:22 2009
From: jimi at temporal-wave.com (Jim Idle)
Date: Sat, 13 Jun 2009 09:45:22 -0700
Subject: [antlr-interest] About literal supports unicode
In-Reply-To: <61577c8f0906130751i7e54aac0j5e11e0ede34b7b12@mail.gmail.com>
References: <61577c8f0906130751i7e54aac0j5e11e0ede34b7b12@mail.gmail.com>
Message-ID: <4A33D7A2.7000903@temporal-wave.com>

Ha Luong wrote:
> Dear all,
>
> I tried to use the grammar for accepting the unicode string as follow:
> //modify T.g in the example source of ANTLR book
> grammar T;
> options {
>     language=Java;
> }
> @members {
> String s;
> }
> r : ID '#' {s = $ID.text; System.out.println("found "+s);} ;
> ID: ('a'..'z'|'\u00e0')+ ; //\u00e0
> WS: (' '|'\n'|'\r')+ {skip();} ; // ignore whitespace
>
> and do these commands in cygwin:
> java org.antlr.Tool T.g
> javac *.java
>
> If I test the literal 'a', it is ok
> java Test
> a #
> ^Z
> found a
>
> but the literal '?', it has error:
How are you opening your input stream? Have you opened it using the 
encoding that the input file has been saved in, such as UTF-32, UTF-8, 
something else?


Jim

From haluongvn at gmail.com  Sat Jun 13 10:17:20 2009
From: haluongvn at gmail.com (Ha Luong)
Date: Sat, 13 Jun 2009 10:17:20 -0700
Subject: [antlr-interest] About literal supports unicode
In-Reply-To: <4A33D7A2.7000903@temporal-wave.com>
References: <61577c8f0906130751i7e54aac0j5e11e0ede34b7b12@mail.gmail.com>
	<4A33D7A2.7000903@temporal-wave.com>
Message-ID: <61577c8f0906131017y33312e5fg8809c494d875e755@mail.gmail.com>

Hi Jim and Sam,

I copy the character '?' from Accessories->System Tools -> Character Map to
Notepad++/Format: Encode UTF8 without BOM
I attached the input file. Could you please help me?

Thank you very much,
Ha

On Sat, Jun 13, 2009 at 9:45 AM, Jim Idle <jimi at temporal-wave.com> wrote:

> Ha Luong wrote:
> > Dear all,
> >
> > I tried to use the grammar for accepting the unicode string as follow:
> > //modify T.g in the example source of ANTLR book
> > grammar T;
> > options {
> >     language=Java;
> > }
> > @members {
> > String s;
> > }
> > r : ID '#' {s = $ID.text; System.out.println("found "+s);} ;
> > ID: ('a'..'z'|'\u00e0')+ ; //\u00e0
> > WS: (' '|'\n'|'\r')+ {skip();} ; // ignore whitespace
> >
> > and do these commands in cygwin:
> > java org.antlr.Tool T.g
> > javac *.java
> >
> > If I test the literal 'a', it is ok
> > java Test
> > a #
> > ^Z
> > found a
> >
> > but the literal '?', it has error:
> How are you opening your input stream? Have you opened it using the
> encoding that the input file has been saved in, such as UTF-32, UTF-8,
> something else?
>
>
> Jim
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090613/2f46a72c/attachment.html 
-------------- next part --------------
? #

From jimi at temporal-wave.com  Sat Jun 13 10:20:50 2009
From: jimi at temporal-wave.com (Jim Idle)
Date: Sat, 13 Jun 2009 10:20:50 -0700
Subject: [antlr-interest] About literal supports unicode
In-Reply-To: <61577c8f0906131017y33312e5fg8809c494d875e755@mail.gmail.com>
References: <61577c8f0906130751i7e54aac0j5e11e0ede34b7b12@mail.gmail.com>	
	<4A33D7A2.7000903@temporal-wave.com>
	<61577c8f0906131017y33312e5fg8809c494d875e755@mail.gmail.com>
Message-ID: <4A33DFF2.9020906@temporal-wave.com>

Ha Luong wrote:
> Hi Jim and Sam,
>
> I copy the character '?' from Accessories->System Tools -> Character 
> Map to Notepad++/Format: Encode UTF8 without BOM
> I attached the input file. Could you please help me?
Looks like that is your issue. The code points in this file are:

000000 c3 a0 20 23 0d 0a                                >.. #..<
000006


And not \u00e0

Jim

From haluongvn at gmail.com  Sat Jun 13 10:54:40 2009
From: haluongvn at gmail.com (Ha Luong)
Date: Sat, 13 Jun 2009 10:54:40 -0700
Subject: [antlr-interest] About literal supports unicode
In-Reply-To: <4A33DFF2.9020906@temporal-wave.com>
References: <61577c8f0906130751i7e54aac0j5e11e0ede34b7b12@mail.gmail.com>
	<4A33D7A2.7000903@temporal-wave.com>
	<61577c8f0906131017y33312e5fg8809c494d875e755@mail.gmail.com>
	<4A33DFF2.9020906@temporal-wave.com>
Message-ID: <61577c8f0906131054r428624fat5611e160cd1a8276@mail.gmail.com>

Thanks Jim :). It is ok.

On Sat, Jun 13, 2009 at 10:20 AM, Jim Idle <jimi at temporal-wave.com> wrote:

> Ha Luong wrote:
>
>> Hi Jim and Sam,
>>
>> I copy the character '?' from Accessories->System Tools -> Character Map
>> to Notepad++/Format: Encode UTF8 without BOM
>> I attached the input file. Could you please help me?
>>
> Looks like that is your issue. The code points in this file are:
>
> 000000 c3 a0 20 23 0d 0a                                >.. #..<
> 000006
>
>
> And not \u00e0
>
> Jim
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090613/e2a05ea9/attachment.html 

From JALuber at gmx.de  Sat Jun 13 16:07:47 2009
From: JALuber at gmx.de (Johannes Luber)
Date: Sun, 14 Jun 2009 01:07:47 +0200
Subject: [antlr-interest] CSharp GeneratedCode attribute
In-Reply-To: <8e87f2580906121218p12c20c84n8d613bb779edf751@mail.gmail.com>
References: <8e87f2580906121218p12c20c84n8d613bb779edf751@mail.gmail.com>
Message-ID: <20090613230747.23170@gmx.net>

> Hi,
> 
> For the current project I am working on, we need to use a parser.
> I convinced everybody here that writing your own parser is evil, because
> it
> takes much longer to write than using a tool conceived for this exact
> purpose.
> 
> Now we use C# and have some strict coding conventions, enforced using the
> Microsoft tools (FxCop and StyleCop).
> The problem being the antlr-generated code does not comply with these
> rules.
> 
> But Microsoft thought about the possibility of using generated code with
> these tools, and the [GeneratedCode(name, version)] attribute is here for
> this purpose. Hurray !
> The only problem remaining now is that this attribute cannot be placed
> correctly using the C# 2 template.
> 
> So I added a line in the C# 2 template (dunno if I done it "The Right Way"
> though) :
> 
> ...
> 
> 75  <docComment>
> *76  <if(actions.(actionScope).generatedVersion)>
> 77  [GeneratedCode("antlr", @"<actions.(actionScope).generatedVersion>")]
> 78
> 79  <endif>
> *80  <recognizer>
> ...

Hi!

>From what I can gather it seems to be the right place, though I wonder what other way you tried first. Regarding the CSharp3 target: Unlike CSharp2 it is/on the way to be completely .NET-compliant regarding the coding standards. I can't change it for CSharp2 yet because I have to worry about backwards-compatibility, but I plan parity for 3.2.

So the question remains, if including this attribute there makes sense if FxCop won't find anything. Sam, any comments?

Johannes

> Obviously in bold is what I added.
> >>From what I have seen this can also be added in the C# 3 template.
> 
> BTW, when will there be a release of antlrworks including version 3.1.3 of
> antlr ?
> I have tried it by myself but must have done something wrong as I get
> loads
> of errors when trying to compile.
> 
> Keep up the good work,
> Regards.
> 
> -- 
> - Always keep in mind that you may be wrong -

-- 
GMX FreeDSL Komplettanschluss mit DSL 6.000 Flatrate und Telefonanschluss
f?r nur 17,95 Euro/mtl.!* http://portal.gmx.net/de/go/dsl02

From avidtrober at gmail.com  Sat Jun 13 17:00:47 2009
From: avidtrober at gmail.com (Avid Trober)
Date: Sat, 13 Jun 2009 19:00:47 -0500
Subject: [antlr-interest] Excluding keywords
References: <1D9D75B8D2FA4C24BDD2E204A3378CF1@homelaptop>
	<001e01c9ea48$fcc566b0$f6503410$@b@s7software.com>
Message-ID: <35F88DE1FCFA4ABB80D18037E08EEC49@homelaptop>

> Did I miss something?

yes, because  of me.  I failed to mention part of the problem: identifiers can be keywords as long as the keyword has an underbar or a shift-number character like asterisk, percent, dollar, etc. after it.  (I didn't design the script language, so I can't change that).

  ----- Original Message ----- 
  From: Indhu Bharathi 
  To: 'Avid Trober' ; antlr-interest at antlr.org 
  Sent: Wednesday, June 10, 2009 10:59 PM
  Subject: RE: [antlr-interest] Excluding keywords


  As stated in the link you provided, there is nothing you have to do to get this functionality. But 'identifier' should be a lexer rule. I guess your grammar should be something like this:

   

  APPLY                   :               'apply';

  BROWSE              :               'browse'

  .

   

  ID            :               ('A'..'Z' | 'a'..'z') ('A'..'Z' | 'a'..'z' | '0'..'9' | '_')*;

                  

  Now, if you write a rule like

   

  r              :               ID;

   

  only ID that is not a keyword will match this.

   

  Am I oversimplifying the problem. Did I miss something?

   

  Cheers, Indhu

   

  From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-bounces at antlr.org] On Behalf Of Avid Trober
  Sent: Thursday, June 11, 2009 9:10 AM
  To: antlr-interest at antlr.org
  Subject: [antlr-interest] Excluding keywords

   

  I saw something close to my problem on the wiki, http://www.antlr.org/pipermail/antlr-interest/2006-June/016563.html

   

  But, I've got an "extra rule", filter.  Must I resort to an action, or is there a way to do this purely in the grammar file?

   

   

  filter : // identifier, but *not* a keyword

                ;

      

   

  keyword :  APPLY

                | BROWSE 

                | CLOSE

                | OPEN

          ;

   

  identifier : ('A'..'Z' | 'a'..'z') ('A'..'Z' | 'a'..'z' | '0'..'9' | '_')*

               ;

   

   

   
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090613/bb7ae5a9/attachment.html 

From cmundi at gmail.com  Sat Jun 13 22:12:54 2009
From: cmundi at gmail.com (C. Mundi)
Date: Sat, 13 Jun 2009 22:12:54 -0700
Subject: [antlr-interest] Q: Advice on localizing lexer
Message-ID: <e794390906132212u225bc907m949cd8fe07420092@mail.gmail.com>

Hi.

Has anyone here faced or solved this problem before?  I a novice with
Unicode, much less human languages.

I have created a very simple DSL with antlr for pseudo natural language.
Nothing special.

It currently recognizes the usual identifiers:

                                ID  :    ('a'..'z'|'A'..'Z'|'_')
('a'..'z'|'A'..'Z'|'0'..'9'|'_')*

and now I have a Japanese user who wants both identifiers and keywords
localized in his native language.  The platform is .NET or Mono, and the
input stream supports UTF-16.  I'd like to solve the problem once for all
languages and not just Japanese and English.

Localizing the keywords should be simple enough.  They're different but
fixed for each language.

The identifiers are tricker.  I need to exclude any members of the
(localized) whitespace or ordinal number sets.  So at first I thought

                               ID  :    ~( WS | DIGIT | KSEP )+  ~( WS |
KSEP )*


                                WS :     <localized list of whitespace
codepoints>
                                DIGIT :  <localized list of ordinal number
codepoints>
                                KSEP:  <localized thousands separator>

This turns out to be very naive, and I see this getting ugly fast.  Already
I have to localize the DSL keywords so there's no way around writing
multiple lexers.  So far I have only two languages: English and Japanese.
But if this catches on, other users will want their own.  I'd like to
minimize the number of lexers I need to maintain or at least maximize code
reuse between them.

I figure this question must come up for DSL's pretty regularly.  Although we
more or less accept using a subset of  Latin characters -- and usually just
ASCII -- for *general* purpose programming, the use case for DSL's almost
begs for localized identifiers and keywords.  The users in this case or
ordinary business people, not programmers.

Any advice?

Thanks,
-CM
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090613/54efcc57/attachment.html 

From asalh at mindspring.com  Sat Jun 13 22:19:15 2009
From: asalh at mindspring.com (Bryan S Follins)
Date: Sat, 13 Jun 2009 22:19:15 -0700
Subject: [antlr-interest] ANTLR Rookie Here
Message-ID: <000b01c9ecaf$a91dbc60$fb593520$@com>

Hello All,

 

I am taking a class where I have to use ANTLR and ANTLRWorks.  Since the
ANTLR software package is in a jar file, I need a Linux OS to download and
install it, right?

 

"When you have eliminated the impossible, whatever remains, however
improbable, must be the truth."

--Sherlock Holmes from Sir Arthur Conan Doyle's The Sign of Four.

 

I AM an information warrior...

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090613/0dd1b283/attachment.html 

From asalh at mindspring.com  Sat Jun 13 23:07:23 2009
From: asalh at mindspring.com (Bryan S Follins)
Date: Sat, 13 Jun 2009 23:07:23 -0700
Subject: [antlr-interest] Clarification
Message-ID: <002701c9ecb6$62679b90$2736d2b0$@com>

I'm sorry if my question was not clear.   To make a long story short, can I
use ANTLR 3.1.3 in WindowsXP Home edition?  If so, how do I go about
downloading it? I know I can use ANTLRWorks with XP.

 

Bryan

 

 

"When you have eliminated the impossible, whatever remains, however
improbable, must be the truth."

--Sherlock Holmes from Sir Arthur Conan Doyle's The Sign of Four.

 

I AM an information warrior...

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090613/ef3b82a1/attachment.html 

From asalh at mindspring.com  Sat Jun 13 23:33:27 2009
From: asalh at mindspring.com (Bryan S Follins)
Date: Sat, 13 Jun 2009 23:33:27 -0700
Subject: [antlr-interest] Anltr 3.1.3
Message-ID: <003701c9ecba$0713f370$153bda50$@com>

I downloaded ANTLRv 3.1.3 on my computer.  I have XP, 2003. I downloaded the
jar file, clicked to open it, but it  would not open.

 

What am I doing wrong?

 

Bryan

 

"When you have eliminated the impossible, whatever remains, however
improbable, must be the truth."

--Sherlock Holmes from Sir Arthur Conan Doyle's The Sign of Four.

 

I AM an information warrior...

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090613/5523d687/attachment.html 

From james.abley at gmail.com  Sat Jun 13 23:41:48 2009
From: james.abley at gmail.com (James Abley)
Date: Sun, 14 Jun 2009 07:41:48 +0100
Subject: [antlr-interest] Anltr 3.1.3
In-Reply-To: <003701c9ecba$0713f370$153bda50$@com>
References: <003701c9ecba$0713f370$153bda50$@com>
Message-ID: <23fce8e60906132341j550b851ak11423bfbe110d346@mail.gmail.com>

You need a Java Runtime (at least, maybe JDK?) to run ANTLR. Do you
have that installed on your machine? I'm not sure if the wiki [1]
covers all of the steps required - please feedback anything that you
think is missing.

Cheers,

James

[1] http://www.antlr.org/wiki/display/ANTLR3/FAQ+-+Getting+Started

2009/6/14 Bryan S Follins <asalh at mindspring.com>:
> I downloaded ANTLRv 3.1.3 on my computer.? I have XP, 2003. I downloaded the
> jar file, clicked to open it, but it ?would not open.
>
>
>
> What am I doing wrong?
>
>
>
> Bryan
>
>
>
> "When you have eliminated the impossible, whatever remains, however
> improbable, must be the truth."
>
> --Sherlock Holmes from Sir Arthur Conan Doyle's The Sign of Four.
>
>
>
> I AM an information warrior...
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>
>

From ygauteron at gmail.com  Sun Jun 14 00:51:11 2009
From: ygauteron at gmail.com (Yann Gauteron)
Date: Sun, 14 Jun 2009 09:51:11 +0200
Subject: [antlr-interest] Clarification
In-Reply-To: <002701c9ecb6$62679b90$2736d2b0$@com>
References: <002701c9ecb6$62679b90$2736d2b0$@com>
Message-ID: <8097baf0906140051g79d16609qdffa9db61439524f@mail.gmail.com>

Hi Bryan,

Answer is yes to both questions. When correctly coded, Java apps are
OS agnostic.

JAR is a Java package file (in fact a ZIP archive containing your Java classes).

As a very first prerequisites, you'll need to download and install the
Sun Java JDK (or JRE if you don't intend to develop and compile your
own Java apps).

Regarding the ANTLRworks, if I remember correctly when you double
click the .jar, it will install ANTLR on your PC.

Regarding the ANTLR, if I remember correctly, there is no installation
process in the .jar, so you have to put your file on your filesystem
and modify the CLASSPATH accordingly (this is what I did).

I think you can very easily install ANTLRworks with this information.
For ANTLR, I would recommand "googling" a little bit to find how to
install it correctly and "link" it with your JDK/JRE in a proper way.
Maybe someone else can be more verbose than I and provide you a better
answer for ANTLR.

Anyway, you don't have to install Linux for using ANTLR and/or
ANTLRworks. I works under Windows with the Sun's JDK/JRE.

Y.

From antlr at mirality.co.nz  Sun Jun 14 01:42:27 2009
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Sun, 14 Jun 2009 20:42:27 +1200
Subject: [antlr-interest] Q: Advice on localizing lexer
In-Reply-To: <e794390906132212u225bc907m949cd8fe07420092@mail.gmail.com>
References: <e794390906132212u225bc907m949cd8fe07420092@mail.gmail.com>
Message-ID: <20090614084259.8832F34183FD@www.antlr.org>

At 17:12 14/06/2009, C. Mundi wrote:
>This turns out to be very naive, and I see this getting ugly 
>fast.  Already I have to localize the DSL keywords so there's no 
>way around writing multiple lexers.  So far I have only two 
>languages: English and Japanese.  But if this catches on, other 
>users will want their own.  I'd like to minimize the number of 
>lexers I need to maintain or at least maximize code reuse between 
>them.
>
>I figure this question must come up for DSL's pretty 
>regularly.  Although we more or less accept using a subset 
>of  Latin characters -- and usually just ASCII -- for general 
>purpose programming, the use case for DSL's almost begs for 
>localized identifiers and keywords.  The users in this case or 
>ordinary business people, not programmers.

When you start to run into issues like this (configurable token 
definitions -- especially if they're configurable at runtime), I 
think it goes a little beyond the scope of ANTLR's lexer.

But it's fairly easy to roll your own lexer that takes care of all 
that and then feed the resulting tokens into an ANTLR parser... 
but bear in mind that you'll still need to localise error messages 
and the like once you get there (though that's usually fairly 
straightforward).


From sharwell at pixelminegames.com  Sun Jun 14 05:31:34 2009
From: sharwell at pixelminegames.com (Sam Harwell)
Date: Sun, 14 Jun 2009 07:31:34 -0500
Subject: [antlr-interest] CSharp GeneratedCode attribute
In-Reply-To: <20090613230747.23170@gmx.net>
References: <8e87f2580906121218p12c20c84n8d613bb779edf751@mail.gmail.com>
	<20090613230747.23170@gmx.net>
Message-ID: <86403CA0939415448BCCB83855EFE09AA68265@Bloodymary.ironwillgames.com>

FxCop freaks out on ANTLR generated code right now and slows down so much it's effectively unusable. I've been meaning to address this issue in the CSharp3 target, but haven't yet. I'm curious how you're supposed to handle partial classes with the GeneratedCode attribute - I assume I have to mark the generated methods and fields instead of the whole class, and the generated code has an enormous number of fields (tokens and follow sets). It makes me wonder if the GeneratedCodeAttribute is conditional like the SuppressMessageAttribute, and if not, how much with the compiled code increase in size with them all marked. I'm guessing not much considering how large the compiled grammar already is.

I'll take a look at this when I get the chance, but it could take a few weeks right now.

Sam

-----Original Message-----
From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-bounces at antlr.org] On Behalf Of Johannes Luber
Sent: Saturday, June 13, 2009 6:08 PM
To: packadal; antlr-interest at antlr.org
Subject: Re: [antlr-interest] CSharp GeneratedCode attribute

> Hi,
> 
> For the current project I am working on, we need to use a parser.
> I convinced everybody here that writing your own parser is evil, because
> it
> takes much longer to write than using a tool conceived for this exact
> purpose.
> 
> Now we use C# and have some strict coding conventions, enforced using the
> Microsoft tools (FxCop and StyleCop).
> The problem being the antlr-generated code does not comply with these
> rules.
> 
> But Microsoft thought about the possibility of using generated code with
> these tools, and the [GeneratedCode(name, version)] attribute is here for
> this purpose. Hurray !
> The only problem remaining now is that this attribute cannot be placed
> correctly using the C# 2 template.
> 
> So I added a line in the C# 2 template (dunno if I done it "The Right Way"
> though) :
> 
> ...
> 
> 75  <docComment>
> *76  <if(actions.(actionScope).generatedVersion)>
> 77  [GeneratedCode("antlr", @"<actions.(actionScope).generatedVersion>")]
> 78
> 79  <endif>
> *80  <recognizer>
> ...

Hi!

>From what I can gather it seems to be the right place, though I wonder what other way you tried first. Regarding the CSharp3 target: Unlike CSharp2 it is/on the way to be completely .NET-compliant regarding the coding standards. I can't change it for CSharp2 yet because I have to worry about backwards-compatibility, but I plan parity for 3.2.

So the question remains, if including this attribute there makes sense if FxCop won't find anything. Sam, any comments?

Johannes

> Obviously in bold is what I added.
> >>From what I have seen this can also be added in the C# 3 template.
> 
> BTW, when will there be a release of antlrworks including version 3.1.3 of
> antlr ?
> I have tried it by myself but must have done something wrong as I get
> loads
> of errors when trying to compile.
> 
> Keep up the good work,
> Regards.
> 
> -- 
> - Always keep in mind that you may be wrong -

-- 
GMX FreeDSL Komplettanschluss mit DSL 6.000 Flatrate und Telefonanschluss
f?r nur 17,95 Euro/mtl.!* http://portal.gmx.net/de/go/dsl02

List: http://www.antlr.org/mailman/listinfo/antlr-interest
Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address

From s.barnett-cormack at lancaster.ac.uk  Sun Jun 14 06:18:09 2009
From: s.barnett-cormack at lancaster.ac.uk (Sam Barnett-Cormack)
Date: Sun, 14 Jun 2009 14:18:09 +0100
Subject: [antlr-interest] ANTLR Rookie Here
In-Reply-To: <000b01c9ecaf$a91dbc60$fb593520$@com>
References: <000b01c9ecaf$a91dbc60$fb593520$@com>
Message-ID: <4A34F891.2050009@lancaster.ac.uk>

Bryan S Follins wrote:
> Hello All,
> 
>  
> 
> I am taking a class where I have to use ANTLR and ANTLRWorks.  Since the 
> ANTLR software package is in a jar file, I need a Linux OS to download 
> and install it, right?

Short answer: no.

Slightly longer, less pleasant answer: do you actually have any 
experience with Java already? Jar files are as portable as java, which 
is to say "very"

Longer, less unpleasant answer: recent versions of Windows will, if a 
Java VM is installed, run executable jars (including ANTLRWorks) 
out-of-the-box, just by double-clicking them. The ANTLR tool isn't an 
executable jar, but ANTLRWorks will run it for you quite happily. If you 
need to run it separately, you just have to use a windows command line. 
If you are using a mac, I believe it's similar to windows in terms of 
running things.

-- 
Sam Barnett-Cormack

From s.barnett-cormack at lancaster.ac.uk  Sun Jun 14 06:21:09 2009
From: s.barnett-cormack at lancaster.ac.uk (Sam Barnett-Cormack)
Date: Sun, 14 Jun 2009 14:21:09 +0100
Subject: [antlr-interest] Anltr 3.1.3
In-Reply-To: <003701c9ecba$0713f370$153bda50$@com>
References: <003701c9ecba$0713f370$153bda50$@com>
Message-ID: <4A34F945.8050204@lancaster.ac.uk>

Bryan S Follins wrote:
> I downloaded ANTLRv 3.1.3 on my computer.  I have XP, 2003. I downloaded 
> the jar file, clicked to open it, but it  would not open.
> 
>  
> 
> What am I doing wrong?

ANTLR isn't an executable JAR - it includes lots of libraries, the tool, 
some other bits and bobs. If you download ANTLRworks, it'll just work, 
*provided* you have an up-to-date JRE (preferably JDK) installed.

If this is a course requirement, shouldn't there be support for this 
from your department?

-- 
Sam Barnett-Cormack

From asalh at mindspring.com  Sun Jun 14 10:32:12 2009
From: asalh at mindspring.com (Bryan S Follins)
Date: Sun, 14 Jun 2009 10:32:12 -0700
Subject: [antlr-interest] Anltr 3.1.3
In-Reply-To: <4A34F945.8050204@lancaster.ac.uk>
References: <003701c9ecba$0713f370$153bda50$@com>
	<4A34F945.8050204@lancaster.ac.uk>
Message-ID: <000f01c9ed16$0d926090$28b721b0$@com>

Sam,

Thanks.

I'm assuming to use ANTLR, you have to create a grammar file using a text
editor?

Then save the text file?

Go to the command line and type the name of the file along with the
directory to access it?


"If this is a course requirement, shouldn't there be support for this 
from your department?"

That is the $64,000 question, because there is no support. You have to play
email tag with your teacher for help.

-----Original Message-----
From: Sam Barnett-Cormack [mailto:s.barnett-cormack at lancaster.ac.uk] 
Sent: Sunday, June 14, 2009 06:21
To: Bryan S Follins
Cc: antlr-interest at antlr.org
Subject: Re: [antlr-interest] Anltr 3.1.3

Bryan S Follins wrote:
> I downloaded ANTLRv 3.1.3 on my computer.  I have XP, 2003. I downloaded 
> the jar file, clicked to open it, but it  would not open.
> 
>  
> 
> What am I doing wrong?

ANTLR isn't an executable JAR - it includes lots of libraries, the tool, 
some other bits and bobs. If you download ANTLRworks, it'll just work, 
*provided* you have an up-to-date JRE (preferably JDK) installed.

If this is a course requirement, shouldn't there be support for this 
from your department?

-- 
Sam Barnett-Cormack


From s.barnett-cormack at lancaster.ac.uk  Sun Jun 14 10:47:04 2009
From: s.barnett-cormack at lancaster.ac.uk (Sam Barnett-Cormack)
Date: Sun, 14 Jun 2009 18:47:04 +0100
Subject: [antlr-interest] Anltr 3.1.3
In-Reply-To: <000f01c9ed16$0d926090$28b721b0$@com>
References: <003701c9ecba$0713f370$153bda50$@com>
	<4A34F945.8050204@lancaster.ac.uk>
	<000f01c9ed16$0d926090$28b721b0$@com>
Message-ID: <4A353798.20500@lancaster.ac.uk>

Bryan S Follins wrote:
> Sam,
> 
> Thanks.
> 
> I'm assuming to use ANTLR, you have to create a grammar file using a text
> editor?
> 
> Then save the text file?
> 
> Go to the command line and type the name of the file along with the
> directory to access it?

There's plenty of docs on the ANTLR website. I will say this, though - 
if you use ANTLRWorks, it does pretty much everything for you, except 
write the grammar!! It's a lot easier than trying to use it by hand. You 
can also get ANTLR plugins for lots of IDEs, including Eclipse, Netbeans 
(for which I think there's embedded ANTLRWorks), I think there might 
even be support for MS Visual Studio...

> "If this is a course requirement, shouldn't there be support for this 
> from your department?"
> 
> That is the $64,000 question, because there is no support. You have to play
> email tag with your teacher for help.

Do you have a student rep? Someone ought to be complaining.

> -----Original Message-----
> From: Sam Barnett-Cormack [mailto:s.barnett-cormack at lancaster.ac.uk] 
> Sent: Sunday, June 14, 2009 06:21
> To: Bryan S Follins
> Cc: antlr-interest at antlr.org
> Subject: Re: [antlr-interest] Anltr 3.1.3
> 
> Bryan S Follins wrote:
>> I downloaded ANTLRv 3.1.3 on my computer.  I have XP, 2003. I downloaded 
>> the jar file, clicked to open it, but it  would not open.
>>
>>  
>>
>> What am I doing wrong?
> 
> ANTLR isn't an executable JAR - it includes lots of libraries, the tool, 
> some other bits and bobs. If you download ANTLRworks, it'll just work, 
> *provided* you have an up-to-date JRE (preferably JDK) installed.
> 
> If this is a course requirement, shouldn't there be support for this 
> from your department?
> 


-- 
Sam Barnett-Cormack

From jimi at temporal-wave.com  Sun Jun 14 11:38:22 2009
From: jimi at temporal-wave.com (Jim Idle)
Date: Sun, 14 Jun 2009 14:38:22 -0400
Subject: [antlr-interest] Anltr 3.1.3
In-Reply-To: <4A34F945.8050204@lancaster.ac.uk>
References: <003701c9ecba$0713f370$153bda50$@com>
	<4A34F945.8050204@lancaster.ac.uk>
Message-ID: <C40E03BD-AB8A-4E52-8260-3DD74F5EF3B7@temporal-wave.com>

In fact antlr is an executable jar so long as you download the  
complete all-in-one jar.

Java -jar ...


Jim

On Jun 14, 2009, at 9:21 AM, Sam Barnett-Cormack <s.barnett-cormack at lancaster.ac.uk 
 > wrote:

> Bryan S Follins wrote:
>> I downloaded ANTLRv 3.1.3 on my computer.  I have XP, 2003. I  
>> downloaded
>> the jar file, clicked to open it, but it  would not open.
>>
>>
>>
>> What am I doing wrong?
>
> ANTLR isn't an executable JAR - it includes lots of libraries, the  
> tool,
> some other bits and bobs. If you download ANTLRworks, it'll just work,
> *provided* you have an up-to-date JRE (preferably JDK) installed.
>
> If this is a course requirement, shouldn't there be support for this
> from your department?
>
> -- 
> Sam Barnett-Cormack
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address

From james.abley at gmail.com  Sun Jun 14 11:39:55 2009
From: james.abley at gmail.com (James Abley)
Date: Sun, 14 Jun 2009 19:39:55 +0100
Subject: [antlr-interest] Anltr 3.1.3
In-Reply-To: <4A353798.20500@lancaster.ac.uk>
References: <003701c9ecba$0713f370$153bda50$@com>
	<4A34F945.8050204@lancaster.ac.uk>
	<000f01c9ed16$0d926090$28b721b0$@com> <4A353798.20500@lancaster.ac.uk>
Message-ID: <23fce8e60906141139y1de6deffj21f404235a3e4ff4@mail.gmail.com>

2009/6/14 Sam Barnett-Cormack <s.barnett-cormack at lancaster.ac.uk>:
> Bryan S Follins wrote:
>> Sam,
>>
>> Thanks.
>>
>> I'm assuming to use ANTLR, you have to create a grammar file using a text
>> editor?
>>
>> Then save the text file?
>>
>> Go to the command line and type the name of the file along with the
>> directory to access it?
>
> There's plenty of docs on the ANTLR website. I will say this, though -
> if you use ANTLRWorks, it does pretty much everything for you, except
> write the grammar!! It's a lot easier than trying to use it by hand. You
> can also get ANTLR plugins for lots of IDEs, including Eclipse, Netbeans
> (for which I think there's embedded ANTLRWorks), I think there might
> even be support for MS Visual Studio...
>
>> "If this is a course requirement, shouldn't there be support for this
>> from your department?"
>>
>> That is the $64,000 question, because there is no support. You have to play
>> email tag with your teacher for help.
>
> Do you have a student rep? Someone ought to be complaining.

+1. We had the odd awful lecturer and it was only after graduating
that it occurred to us that we were effectively customers paying for a
service (our education) and we should have kicked up a stink.

>
>> -----Original Message-----
>> From: Sam Barnett-Cormack [mailto:s.barnett-cormack at lancaster.ac.uk]
>> Sent: Sunday, June 14, 2009 06:21
>> To: Bryan S Follins
>> Cc: antlr-interest at antlr.org
>> Subject: Re: [antlr-interest] Anltr 3.1.3
>>
>> Bryan S Follins wrote:
>>> I downloaded ANTLRv 3.1.3 on my computer. ?I have XP, 2003. I downloaded
>>> the jar file, clicked to open it, but it ?would not open.
>>>
>>>
>>>
>>> What am I doing wrong?
>>
>> ANTLR isn't an executable JAR - it includes lots of libraries, the tool,
>> some other bits and bobs. If you download ANTLRworks, it'll just work,
>> *provided* you have an up-to-date JRE (preferably JDK) installed.
>>
>> If this is a course requirement, shouldn't there be support for this
>> from your department?
>>
>
>
> --
> Sam Barnett-Cormack
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>

From david-sarah at jacaranda.org  Sun Jun 14 13:28:38 2009
From: david-sarah at jacaranda.org (David-Sarah Hopwood)
Date: Sun, 14 Jun 2009 21:28:38 +0100
Subject: [antlr-interest] Q: Advice on localizing lexer
In-Reply-To: <e794390906132212u225bc907m949cd8fe07420092@mail.gmail.com>
References: <e794390906132212u225bc907m949cd8fe07420092@mail.gmail.com>
Message-ID: <4A355D76.6090801@jacaranda.org>

C. Mundi wrote:
> I have created a very simple DSL with antlr for pseudo natural language.
> Nothing special.
> 
> It currently recognizes the usual identifiers:
> 
>                            ID  :    ('a'..'z'|'A'..'Z'|'_')
> ('a'..'z'|'A'..'Z'|'0'..'9'|'_')*
> 
> and now I have a Japanese user who wants both identifiers and keywords
> localized in his native language.  The platform is .NET or Mono, and the
> input stream supports UTF-16.  I'd like to solve the problem once for all
> languages and not just Japanese and English.
> 
> Localizing the keywords should be simple enough.  They're different but
> fixed for each language.
> 
> The identifiers are tricker.  I need to exclude any members of the
> (localized) whitespace or ordinal number sets.  So at first I thought
> 
>                            ID  :    ~( WS | DIGIT | KSEP )+  ~( WS | KSEP )*
> 
>                            WS :     <localized list of whitespace codepoints>
>                            DIGIT :  <localized list of ordinal number codepoints>
>                            KSEP:    <localized thousands separator>

Note that localizing thousands and decimal separators is quite problematic,
because of the swapped usage of ',' and '.' in English-speaking vs European
locales, and because ',' may conflict with list separators. Even if you
don't need non-integers or lists now, you might need them in future.

I would advise sticking with the English-speaking usage here (as essentially
all programming languages/DSLs do), but allowing '_' as an internationalised
thousands separator. Localising it is not necessarily doing any favours
to non-English-speaking users, if the result is inconsistent with other
[non-natural] languages they are used to, or if it causes scripts to break
when changing locales.

> This turns out to be very naive, and I see this getting ugly fast.  Already
> I have to localize the DSL keywords so there's no way around writing
> multiple lexers.  So far I have only two languages: English and Japanese.
> But if this catches on, other users will want their own.  I'd like to
> minimize the number of lexers I need to maintain or at least maximize code
> reuse between them.

Again, I would recommend internationalisation over localisation.
Just use the syntax for identifiers defined by Unicode (or by Java;
they're almost the same).

The following code is adapted from Patrick Hulsmeijer's grammar for
ECMAScript 3, simplified a little. The original was BSD-licensed.
It has ordinary lexer rules for ASCII characters, but for non-ASCII
characters it uses semantic predicates that call Java's built-in
character classification methods (assuming the target language is Java).
This produces a much smaller and more efficient lexer, as well as a
simpler source grammar.

Note that with this approach, any non-ASCII keywords will lex as
identifiers.



@lexer::members {
  private static boolean isIdentifierStart(int c) {
    return Character.isJavaIdentifierStart(c);
  }

  private static boolean isIdentifierPart(int c) {
    // ZWNJ (\u200C) and ZWJ (\u200D) are also needed for some languages.
    return Character.isJavaIdentifierPart(c) || c == 0x200C || c == 0x200D;
  }
}

fragment IdentifierStartASCII
  : 'a'..'z' | 'A'..'Z' | '_'
  ;

fragment IdentifierPart
  : IdentifierStartASCII
  | '0'..'9'
  | { isIdentifierPart(input.LA(1)) }? { matchAny(); }
  ;

// This generates mIdentifierRest() used below.
fragment IdentifierRest
  : IdentifierPart*
  ;

Identifier
  : IdentifierStartASCII IdentifierRest
  | { if (!isIdentifierStart(input.LA(1))) throw new NoViableAltException();
      matchAny(); mIdentifierRest(); }
  ;

-- 
David-Sarah Hopwood  ?  http://davidsarah.livejournal.com




From david-sarah at jacaranda.org  Sun Jun 14 13:49:43 2009
From: david-sarah at jacaranda.org (David-Sarah Hopwood)
Date: Sun, 14 Jun 2009 21:49:43 +0100
Subject: [antlr-interest] Q: Advice on localizing lexer [correction]
In-Reply-To: <4A355D76.6090801@jacaranda.org>
References: <e794390906132212u225bc907m949cd8fe07420092@mail.gmail.com>
	<4A355D76.6090801@jacaranda.org>
Message-ID: <4A356267.7010509@jacaranda.org>

David-Sarah Hopwood wrote:
> Identifier
>   : IdentifierStartASCII IdentifierRest
>   | { if (!isIdentifierStart(input.LA(1))) throw new NoViableAltException();
>       matchAny(); mIdentifierRest(); }
>   ;

This will work, but because the 'input' IntStream is not passed to
NoViableAltException, some of the information that would normally be
available to construct error messages is missing. Use this instead,
with the rest of the code as in my previous post:

Identifier
  : IdentifierStartASCII IdentifierRest
  | { if (!isIdentifierStart(input.LA(1))) {
        throw new NoViableAltException("identifier start", 0, 0, input);
      }
      matchAny(); mIdentifierRest(); }
  ;

-- 
David-Sarah Hopwood  ?  http://davidsarah.livejournal.com


From s.barnett-cormack at lancaster.ac.uk  Sun Jun 14 14:48:01 2009
From: s.barnett-cormack at lancaster.ac.uk (Sam Barnett-Cormack)
Date: Sun, 14 Jun 2009 22:48:01 +0100
Subject: [antlr-interest] Anltr 3.1.3
In-Reply-To: <C40E03BD-AB8A-4E52-8260-3DD74F5EF3B7@temporal-wave.com>
References: <003701c9ecba$0713f370$153bda50$@com>
	<4A34F945.8050204@lancaster.ac.uk>
	<C40E03BD-AB8A-4E52-8260-3DD74F5EF3B7@temporal-wave.com>
Message-ID: <4A357011.4050006@lancaster.ac.uk>

Jim Idle wrote:
> In fact antlr is an executable jar so long as you download the complete 
> all-in-one jar.
> 
> Java -jar ...

And in this case, the double-click wouldn't really work, as you need to 
give it command-line arguments.

Sam

> On Jun 14, 2009, at 9:21 AM, Sam Barnett-Cormack 
> <s.barnett-cormack at lancaster.ac.uk> wrote:
> 
>> Bryan S Follins wrote:
>>> I downloaded ANTLRv 3.1.3 on my computer.  I have XP, 2003. I downloaded
>>> the jar file, clicked to open it, but it  would not open.
>>>
>>>
>>>
>>> What am I doing wrong?
>>
>> ANTLR isn't an executable JAR - it includes lots of libraries, the tool,
>> some other bits and bobs. If you download ANTLRworks, it'll just work,
>> *provided* you have an up-to-date JRE (preferably JDK) installed.
>>
>> If this is a course requirement, shouldn't there be support for this
>> from your department?
>>
>> -- 
>> Sam Barnett-Cormack
>>
>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>> Unsubscribe: 
>> http://www.antlr.org/mailman/options/antlr-interest/your-email-address


-- 
Sam Barnett-Cormack

From cmundi at gmail.com  Sun Jun 14 15:48:18 2009
From: cmundi at gmail.com (C. Mundi)
Date: Sun, 14 Jun 2009 15:48:18 -0700
Subject: [antlr-interest] Q: Advice on localizing lexer
In-Reply-To: <4a34b803.8313f30a.164e.ffff9077SMTPIN_ADDED@mx.google.com>
References: <e794390906132212u225bc907m949cd8fe07420092@mail.gmail.com>
	<4a34b803.8313f30a.164e.ffff9077SMTPIN_ADDED@mx.google.com>
Message-ID: <e794390906141548i110aeaa1wb9768d076e95d658@mail.gmail.com>

On Sun, Jun 14, 2009 at 1:42 AM, Gavin Lambert <antlr at mirality.co.nz> wrote:

> At 17:12 14/06/2009, C. Mundi wrote:
>
> When you start to run into issues like this (configurable token definitions
> -- especially if they're configurable at runtime), I think it goes a little
> beyond the scope of ANTLR's lexer.
>
> But it's fairly easy to roll your own lexer that takes care of all that and
> then feed the resulting tokens into an ANTLR parser... but bear in mind that
> you'll still need to localise error messages and the like once you get there
> (though that's usually fairly straightforward).
>
>

Thanks.  I would not permit runtime configuration per se.  I would detect
the user locale (or let the user pick one) and use a lexer built
specifically for that local.

So I guess what I am really looking for (in an odd way) is grammar resuse.
I accept at the outset that I need to localize.  But I want to do this in a
way that makes porting changes (like fixes) easy from one grammar to all the
others.

I actually feel a little better that I'm not the only one who thinks this is
as you say a little outside ANTLR's scope.

Thanks!
Carlos
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090614/3aa88781/attachment.html 

From cmundi at gmail.com  Sun Jun 14 16:01:50 2009
From: cmundi at gmail.com (C. Mundi)
Date: Sun, 14 Jun 2009 16:01:50 -0700
Subject: [antlr-interest] Q: Advice on localizing lexer
In-Reply-To: <4A355D76.6090801@jacaranda.org>
References: <e794390906132212u225bc907m949cd8fe07420092@mail.gmail.com>
	<4A355D76.6090801@jacaranda.org>
Message-ID: <e794390906141601v36fae7f0j25a29f596504f269@mail.gmail.com>

Thanks for your detailed reply.  I apologize for "top posting" but you make
some great points and I want to reply to a coupe of them, below...

On Sun, Jun 14, 2009 at 1:28 PM, David-Sarah Hopwood <
david-sarah at jacaranda.org> wrote:

>
> Note that localizing thousands and decimal separators is quite problematic,
> because of the swapped usage of ',' and '.' in English-speaking vs European
> locales, and because ',' may conflict with list separators. Even if you
> don't need non-integers or lists now, you might need them in future.


This actually is the easiest part.


> I would advise sticking with the English-speaking usage here (as
> essentially
> all programming languages/DSLs do), but allowing '_' as an
> internationalised
> thousands separator. Localising it is not necessarily doing any favours
> to non-English-speaking users, if the result is inconsistent with other
> [non-natural] languages they are used to, or if it causes scripts to break
> when changing locales.
>

I'm trying to convince my users of the same.  But some customers can be
quite "persistent" you know.
I believe (proof omitted) that if I can localize, then I also have all the
information needed to write a language translator such that a runnable
script in one dialect would be both runnable and semantically equivalent in
all dialects.  The only requirement really is that the mapping between
localized token representations be one-to-one.  So you see what really makes
this problem interesting (at least to me) is that I'm really trying to teach
a lexer some semantics.

Again, I would recommend internationalisation over localisation.
> Just use the syntax for identifiers defined by Unicode (or by Java;
> they're almost the same).
>

This is probably the most practical thing to do, I agree.


> The following code is adapted from Patrick Hulsmeijer's grammar for
> ECMAScript 3, simplified a little. The original was BSD-licensed.
> It has ordinary lexer rules for ASCII characters, but for non-ASCII
> characters it uses semantic predicates that call Java's built-in
> character classification methods (assuming the target language is Java).
> This produces a much smaller and more efficient lexer, as well as a
> simpler source grammar.


Thanks!


> Note that with this approach, any non-ASCII keywords will lex as
> identifiers.


Yes.  I thought of that right away.  That can be dealt with by lexer
precedence rules.

Thank you very much again for your insight.  I'm trying to get my users to
accept internationalized identifiers and labels and keep the keywords and
numerics and tuple/list identifiers fixed to the English versions.

Carlos
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090614/7589549e/attachment.html 

From cmundi at gmail.com  Sun Jun 14 16:03:13 2009
From: cmundi at gmail.com (C. Mundi)
Date: Sun, 14 Jun 2009 16:03:13 -0700
Subject: [antlr-interest] Q: Advice on localizing lexer [correction]
In-Reply-To: <4A356267.7010509@jacaranda.org>
References: <e794390906132212u225bc907m949cd8fe07420092@mail.gmail.com>
	<4A355D76.6090801@jacaranda.org> <4A356267.7010509@jacaranda.org>
Message-ID: <e794390906141603m3a257f33uf7082975ec490abf@mail.gmail.com>

On Sun, Jun 14, 2009 at 1:49 PM, David-Sarah Hopwood <
david-sarah at jacaranda.org> wrote:

> David-Sarah Hopwood wrote:
> > Identifier
> >   : IdentifierStartASCII IdentifierRest
> >   | { if (!isIdentifierStart(input.LA(1))) throw new
> NoViableAltException();
> >       matchAny(); mIdentifierRest(); }
> >   ;
>
> This will work, but because the 'input' IntStream is not passed to
> NoViableAltException, some of the information that would normally be
> available to construct error messages is missing. Use this instead,
> with the rest of the code as in my previous post:
>
> Identifier
>  : IdentifierStartASCII IdentifierRest
>  | { if (!isIdentifierStart(input.LA(1))) {
>        throw new NoViableAltException("identifier start", 0, 0, input);
>      }
>      matchAny(); mIdentifierRest(); }
>  ;
>

I would not have thought of that.  Thanks!

CM
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090614/3b57e771/attachment.html 

From dukie_banderjee at hotmail.com  Sun Jun 14 18:09:56 2009
From: dukie_banderjee at hotmail.com (Dukie Banderjee)
Date: Sun, 14 Jun 2009 21:09:56 -0400
Subject: [antlr-interest] Basic predicate question re: lexer
Message-ID: <COL113-W617F11A86108EC2A2090E0923E0@phx.gbl>


Hi,
I'm working on a parser for a file format that can contain text and delimiters. One of the delimiters is a ':', and you can escape the delimiter by following it with a '?' such as ':?'.

I'd like to have the lexer consider the ':?' as part of the TEXT token, and ':' match the SEPARATOR token. So I tried this:
file        : contents+ EOF ;

contents    : TEXT
        | CSEP
        ;

CSEP:  ':';
TEXT: ('a'..'z'|'A'..'Z'|'0'..'9'|' '|'-'|','|'.'|'/'|COLON)+ ;
fragment COLON: ':?' ;

This didn't work, as the input "hello:" caused an error. I guess it was expecting to continue a TEXT token (next char would be '?'), and met with an EOF instead.

I imagine there's a way to do this, perhaps with predicates, but I'm not experienced enough to see the obvious solution. Can anyone help?

Thanks,

Rob

_________________________________________________________________
Create a cool, new character for your Windows Live? Messenger. 
http://go.microsoft.com/?linkid=9656621
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090614/40345f16/attachment.html 

From dukie_banderjee at hotmail.com  Sun Jun 14 18:37:54 2009
From: dukie_banderjee at hotmail.com (Dukie Banderjee)
Date: Sun, 14 Jun 2009 21:37:54 -0400
Subject: [antlr-interest] CSharp2 code generation bug for ANTLRWorks 1.2.3
	with -debug
Message-ID: <COL113-W241D58A62FF21C28791CC0923E0@phx.gbl>


The following grammar produces uncompilable code when generated from ANTLRWorks using -debug in the ANTLR options. I'm not sure which version of ANTLR is being used by ANTLRWorks. If it matters, I have ANTLR 3.1.3 on my machine.

====

grammar EdifactDelfor;

options {
  language = 'CSharp2' ;
}

tokens {
}

file        : contents+ EOF ;

contents    : TEXT
        | SEP
        | WS
        | CSEP
        | EOL
        ;
EOL: '\'';
SEP: '+';
CSEP: ':';
TEXT: ('a'..'z'|'A'..'Z'|'0'..'9'|' '|'-'|','|'.'|'/'|'?')+ ;
WS: ('\r'? '\n')+  ;

====

Here is the culprit code that was generated (in the file() method):
default:
    if (cnt1 >= 1) goto loop1;
    EarlyExitException eee1 =
        new EarlyExitException(1, input);
    dbg.RecognitionException(eee);   // Note the missing '1': should be eee1

    throw eee1;

When I manually change the reference to eee1, the thing compiles.

This bug does not appear when -debug is turned off.

Rob

_________________________________________________________________
Attention all humans. We are your photos. Free us.
http://go.microsoft.com/?linkid=9666046
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090614/0edbb32d/attachment.html 

From dukie_banderjee at hotmail.com  Sun Jun 14 20:09:31 2009
From: dukie_banderjee at hotmail.com (Dukie Banderjee)
Date: Sun, 14 Jun 2009 23:09:31 -0400
Subject: [antlr-interest] Matching empty string
Message-ID: <COL113-W325CCF11FB6F9A98573B19923E0@phx.gbl>


Hi,
My grammar needs to handle the following situation: A line can have multiple fields, separated by a delimiter. A field can have multiple components, separated by another delimiter.
If a field or component is blank, it should be counted as a blank field or blank component. For example with field delimiter '+' and component delimiter ':' :
UNB++::+123
is a 'UNB' line with 3 fields. The first field is blank, the second field has 3 blank components, and the last field has a single component with the value '123'.

Here is my grammar so far:

line         : TEXT fields ;
fields        : field* terminator! ;
field        : SEP t=fieldText? -> ^(FIELD $t?) ;
fieldText    : comp (CSEP comp)* ;
comp        : t=TEXT -> ^(COMP $t) ;

When a field is blank, e.g. '++', this correctly generates a ^(FIELD) with no children. However, I don't know how to get similar behaviour for the components, because whereas a field starts with a SEP and optional TEXT, the component may or may not have a leading CSEP. 

When the input is '+::+', there are three components, but the first is entirely blank, an empty string. 

What I would like is that '+::+' creates ^(FIELD ^(COMP) ^(COMP) ^(COMP)). How can I accomplish this?

Thanks,

Rob

_________________________________________________________________
Windows Live helps you keep up with all your friends, in one place.
http://go.microsoft.com/?linkid=9660826
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090614/e8cb385c/attachment.html 

From james.robson at ymail.com  Mon Jun 15 01:39:43 2009
From: james.robson at ymail.com (James Robson)
Date: Mon, 15 Jun 2009 01:39:43 -0700 (PDT)
Subject: [antlr-interest] Left recursion removal
Message-ID: <881148.3423.qm@web43510.mail.sp1.yahoo.com>

Hi,
Below is a fragment from a grammar I've written. I've had to modifiy is so that an expression may or may not be enclosed in parenthesis

However, which ever way I try to remove the recursion I either end up by reducing teh expressivness or by re-introducing the recursion.

Can anyone help point me in the right direction?


grammar SLRR;


expression
  : LEFT_PARENTHESIS (predicate|expression) (SPACE_CHAR logicalOperator SPACE_CHAR (predicate | expression))* RIGHT_PARENTHESIS
  | (predicate|expression) (SPACE_CHAR logicalOperator SPACE_CHAR (predicate | expression))*
  ;
 


///////////////////////////////////////////////////////////////////////
predicate
    :    predicateField SPACE_CHAR searchOperator SPACE_CHAR predicateField
     ; 



 
predicateField
  : TEXT
  ;
  
  
fieldName
  : TEXT

  ;

searchOperator 
  : TEXT
  | TEXTNOSPACES

  //| QUOTATION_MARK urlUnreserved+ (SPACE_CHAR urlUnreserved+)+ QUOTATION_MARK 
  ;

fieldValue 
  : TEXT
  //| quotedQueryParamValue
  ;
  
logicalOperator
       :    LOWER_CASE_LETTER_A
           LOWER_CASE_LETTER_N
           LOWER_CASE_LETTER_D
       |    LOWER_CASE_LETTER_O
           LOWER_CASE_LETTER_R
       ;
  
LOWER_CASE_LETTER_A : 'a' ;
LOWER_CASE_LETTER_B : 'b' ;
LOWER_CASE_LETTER_C : 'c' ;
LOWER_CASE_LETTER_D : 'd' ;
LOWER_CASE_LETTER_E : 'e' ;
LOWER_CASE_LETTER_F : 'f' ;
LOWER_CASE_LETTER_G : 'g' ;
LOWER_CASE_LETTER_H : 'h' ;
LOWER_CASE_LETTER_I : 'i' ;
LOWER_CASE_LETTER_J : 'j' ;
LOWER_CASE_LETTER_K : 'k' ;
LOWER_CASE_LETTER_L : 'l' ;
LOWER_CASE_LETTER_M : 'm' ;
LOWER_CASE_LETTER_N : 'n' ;
LOWER_CASE_LETTER_O : 'o' ;
LOWER_CASE_LETTER_P : 'p' ;
LOWER_CASE_LETTER_Q : 'q' ;
LOWER_CASE_LETTER_R : 'r' ;
LOWER_CASE_LETTER_S : 's' ;
LOWER_CASE_LETTER_T : 't' ;
LOWER_CASE_LETTER_U : 'u' ;
LOWER_CASE_LETTER_V : 'v' ;
LOWER_CASE_LETTER_W : 'w' ;
LOWER_CASE_LETTER_X : 'x' ;
LOWER_CASE_LETTER_Y : 'y' ;
LOWER_CASE_LETTER_Z : 'z' ;
 
CAPITAL_LETTER_A : 'A' ;
CAPITAL_LETTER_B : 'B' ;
CAPITAL_LETTER_C : 'C' ;
CAPITAL_LETTER_D : 'D' ;
CAPITAL_LETTER_E : 'E' ;
CAPITAL_LETTER_F : 'F' ;
CAPITAL_LETTER_G : 'G' ;
CAPITAL_LETTER_H : 'H' ;
CAPITAL_LETTER_I : 'I' ;
CAPITAL_LETTER_J : 'J' ;
CAPITAL_LETTER_K : 'K' ;
CAPITAL_LETTER_L : 'L' ;
CAPITAL_LETTER_M : 'M' ;
CAPITAL_LETTER_N : 'N' ;
CAPITAL_LETTER_O : 'O' ;
CAPITAL_LETTER_P : 'P' ;
CAPITAL_LETTER_Q : 'Q' ;
CAPITAL_LETTER_R : 'R' ;
CAPITAL_LETTER_S : 'S' ;
CAPITAL_LETTER_T : 'T' ;
CAPITAL_LETTER_U : 'U' ;
CAPITAL_LETTER_V : 'V' ;
CAPITAL_LETTER_W : 'W' ;
CAPITAL_LETTER_X : 'X' ;
CAPITAL_LETTER_Y : 'Y' ;
CAPITAL_LETTER_Z : 'Z' ;
 
DIGIT_0 : '0' ;
DIGIT_1 : '1' ;
DIGIT_2 : '2' ;
DIGIT_3 : '3' ;
DIGIT_4 : '4' ;
DIGIT_5 : '5' ;
DIGIT_6 : '6' ;
DIGIT_7 : '7' ;
DIGIT_8 : '8' ;
DIGIT_9 : '9' ;

TEXT        
@init{StringBuilder lBuf = new StringBuilder();}
    :   
           QUOTATION_MARK
           ( escaped=ESC {lBuf.append(getText());} | 
             normal=~(QUOTATION_MARK|'\\'|'\n'|'\r')     {lBuf.appendCodePoint(normal);} )* 
           QUOTATION_MARK    
           {setText("\""+lBuf.toString()+"\"");}
    ;

fragment
ESC
    :   '\\'
        (       'n'    {setText("\n");}
        |       'r'    {setText("\r");}
        |       't'    {setText("\t");}
        |       'b'    {setText("\b");}
        |       'f'    {setText("\f");}
        |       '"'    {setText("\"");}
        |       '\''   {setText("\'");}
        |       '\\'   {setText("\\");}
        |       ('u')+ i=HEX_DIGIT j=HEX_DIGIT k=HEX_DIGIT l=HEX_DIGIT   {setText(this.hextToString(i.getText(),j.getText(),k.getText(),l.getText()));}

        )
    ;
    
fragment
HEX_DIGIT:
  DIGIT_0|DIGIT_1|DIGIT_2|DIGIT_3|DIGIT_4|DIGIT_5|DIGIT_6|DIGIT_7|DIGIT_8|DIGIT_9
  |LOWER_CASE_LETTER_A|LOWER_CASE_LETTER_B|LOWER_CASE_LETTER_C|LOWER_CASE_LETTER_D
  |LOWER_CASE_LETTER_E|LOWER_CASE_LETTER_F|CAPITAL_LETTER_A|CAPITAL_LETTER_B
  |CAPITAL_LETTER_C|CAPITAL_LETTER_D|CAPITAL_LETTER_E|CAPITAL_LETTER_F
  ;
  
fragment
TEXTNOSPACES
  : (HEX_DIGIT|'g'..'z'|'G'..'Z'|'-'|':')+
  ;
  

AMPERSAND : '&' ; // &amp;
APOSTROPHE : '\'' ;
ASTERISK : '*' ;
CIRCUMFLEX_ACCENT : '^' ;
COLON : ':' ;
COMMA : ',' ;
PERCENT_SIGN : '%';
DOLLAR_SIGN : '$';
HYPHEN_MINUS :  '-';
LOW_LINE : '_';
FULL_STOP : '.';
PLUS_SIGN : '+';
EXCLAMATION_MARK : '!';
LEFT_PARENTHESIS : '(';
RIGHT_PARENTHESIS : ')';
SEMICOLON : ';';
SLASH : '/';
QUESTION_MARK : '?';
EQUALS_SIGN :'=';
COMMERCIAL_AT : '@';
HASH_SIGN : '#';
TILDE : '~';
QUOTATION_MARK : '"';
SPACE_CHAR : ' ';


      Need a Holiday? Win a $10,000 Holiday of your choice. Enter now.http://us.lrd.yahoo.com/_ylc=X3oDMTJxN2x2ZmNpBF9zAzIwMjM2MTY2MTMEdG1fZG1lY2gDVGV4dCBMaW5rBHRtX2xuawNVMTEwMzk3NwR0bV9uZXQDWWFob28hBHRtX3BvcwN0YWdsaW5lBHRtX3BwdHkDYXVueg--/SIG=14600t3ni/**http%3A//au.rd.yahoo.com/mail/tagline/creativeholidays/*http%3A//au.docs.yahoo.com/homepageset/%3Fp1=other%26p2=au%26p3=mailtagline
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090615/dabb0211/attachment.html 

From potrto at centrum.cz  Mon Jun 15 03:54:16 2009
From: potrto at centrum.cz (Tomas Potrusil)
Date: Mon, 15 Jun 2009 12:54:16 +0200
Subject: [antlr-interest] [C target] [3.1.3] several bugs in the
	generated parser
In-Reply-To: <4A314571.5000600@temporal-wave.com>
References: <af7c90190906100456p57517fc6oc595aae91680d4cd@mail.gmail.com>
	<4A2FD4FE.1020206@temporal-wave.com>
	<af7c90190906110456u7f74c7b1k60ce33ca3f1297b7@mail.gmail.com>
	<4A314571.5000600@temporal-wave.com>
Message-ID: <af7c90190906150354m59dbaa49t8e91aa8feef05193@mail.gmail.com>

I've tried the fixes and nothing works :-)

1. There is still the invalid cast from the pANTLR3_STRING to
pANTLR3_UINT8. Temporarily I've solved that by writing:
function:       ^(Function ^(DatabaseObject Nil COUNT) countArgument)
-> ^(Function[$COUNT->getText($COUNT)->chars] countArgument);
instead of:
function:       ^(Function ^(DatabaseObject Nil COUNT) countArgument)
-> ^(Function[$COUNT.text] countArgument);

2. rewrite = true still produces invalid code. The errors are
different than before and there are still some.

3. When there is a wildcard in the grammar, it can be compiled now,
but the resulting code contains some undeclared variables.

Tomas

2009/6/11 Jim Idle <jimi at temporal-wave.com>:
> Tomas Potrusil wrote:
>>
>> All those problems remain there also for the latest builds (from May
>> 21, version 3.1.4-SNAPSHOT)
>>
>> add 1) Is there any hope that it will be fixed soon? Or can I write
>> that grammar any other way in order to achieve the similar
>> functionality?
>
> OK - I looked in the issues you reported and I have fixed them all. The
> caveat is that I have not tested the fixes, so I am afraid you will have to
> be the guinea-pig.
>
> Hudson has built the new runtime and you can get it from there or from the
> www.antlr.org/download/C directory. However, this also requires a new antlr
> tool jar. Hudson has built the standalone jar, so you can get it from the
> last successful build link, but it is still building the complete jar, which
> takes a while because it runs the regression tests twice. Maybe about an
> hour from now. Visit: www.antlr.org/hudson.
>
> Let me know if those fixes work for you.
>
> Jim
>

From linlin.xie at siemens.com  Mon Jun 15 04:19:45 2009
From: linlin.xie at siemens.com (Xie, Linlin)
Date: Mon, 15 Jun 2009 13:19:45 +0200
Subject: [antlr-interest] problem in displayRecognitionError() in
	antlr2baserecognizer.c
In-Reply-To: <4A314D25.2050506@temporal-wave.com>
References: <79118B9FE8CE8E49B0D71964A79CB647026677A0@dekomplm002.net.plm.eds.com>
	<4A2E8CF7.3080903@temporal-wave.com>
	<79118B9FE8CE8E49B0D71964A79CB647026CADBB@dekomplm002.net.plm.eds.com>
	<4A314D25.2050506@temporal-wave.com>
Message-ID: <79118B9FE8CE8E49B0D71964A79CB647026CB42B@dekomplm002.net.plm.eds.com>

Hi Jim,

 

Thanks for your reply. 

 

1.       I changed my grammar to be the format you gave to get more
meaningful error message, but it still failed to enter the
mismatched_set_exception, instead it incurred
no_viable_alternative_exception... Did I do anything wrong? Or how
exactly the mismatched set exception can be incurred?

2.       There is no embedded SKIP() method in c antlr lexer, I used
"EMIT()", apparently it does the same thing. Good to know that it's
another way of suppressing lexer error report in addition to assigning a
function that does nothing to ReportError of the lexer.

 

Regards,

Linlin

 

From: Jim Idle [mailto:jimi at temporal-wave.com] 
Sent: 11 June 2009 19:30
To: Xie, Linlin
Cc: antlr-interest at antlr.org; Fitt, Andrew; Hamid, Nusrat
Subject: Re: problem in displayRecognitionError() in
antlr2baserecognizer.c

 

Xie, Linlin wrote: 

Hi Jim,

 

Thanks for your reply. We finally figure out that large number of
expecting is actually -1, which is EOF. 

Yes - I figured as much. 



I guess this would rule out the possibility of a bug in antlr, if we
don't speak of the appropriateness of the message. In the use case I
mentioned in my last email, I would think start(Rule2), start(Rule3) and
; all should be the expected tokens, instead of EOF. Do you think if
there is anything antlr can do to improve the error messages to make
them more relevant? Or should I improve my grammar to get more
appropriate error messages, and how?

You have to write your own message display routines that make sense with
your grammar. The default ones do check for EOF though. Your issue is
that because all the things leading up to EOF are optional, ANTLR
assumes that they are just not present:

Say start(rule2) is FOO and start(rule3) is BAR.

Then after rule1 it says:

No FOO is there, so go past Rule2, it isn't present
No BAR is there so go past Rule3, it isn't present

Now, what is the start set that can come next? Only EOF, so match EOF -
oh it failed, so the expecting token is -1 for EOF.

However, if you do this:

: rule1
    (   rule2
          (
               rule3 EOF
             | EOF
          )
       | rule3 EOF
       | EOF
    )
;

Now, after rule1 has parsed, the followset will be FOO | BAR|EOF so you
will get the error straight away. After rule2 is parsed, followset will
be BAR|EOF so you will get the error straight away, after rule3, only
EOF is viable.



 

Also I can see when the displayRecognitionError() checks the recognizer
type, it only considers either parser or tree parser, why is lexer not
considered here?

1) Lexers can only say: "Not expecting character 'y' here. and so
antlr3lexer.c has its own handler. You should install your own handler
remember?
2) If your lexer is throwing errors, then it is broken really. It should
be coded to cope with anything one way or another. However, sometimes
that is difficult of course. You need to make sure that your lexer rules
can terminate just about anywhere, but throw your own (descriptive
error) about any missing pieces. Then you have a final lexer rule:

ANY : . { SKIP(); log error about unknown character being ignored.

What this does is then move all your error handling up to the parser,
where you have better context. Similarly, you should move any errors
that you can out the parser and in to the tree parser, where once again
you have better context. The classic example is trying to code the
number of parameters that any particular function can take. Don;t do
that, accept any, including 0, then check for validity in your first
tree walk.



I can see that a lexer error is considered a No Via Alt parser
exception, but there is still lexer error report from antlr, where can I
find the lexer error report code? Or how can I intercept the lexer error
like I do with the parser error report?

Intercept the same way, install your own displayRecognitionError, but
make it say "Internal compiler error - lexer rules bad :-(  all your
base belong to us"

Jim



-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090615/f631ad42/attachment.html 

From JALuber at gmx.de  Mon Jun 15 05:41:33 2009
From: JALuber at gmx.de (Johannes Luber)
Date: Mon, 15 Jun 2009 14:41:33 +0200
Subject: [antlr-interest] CSharp2 code generation bug for ANTLRWorks
	1.2.3	with -debug
In-Reply-To: <COL113-W241D58A62FF21C28791CC0923E0@phx.gbl>
References: <COL113-W241D58A62FF21C28791CC0923E0@phx.gbl>
Message-ID: <20090615124133.198380@gmx.net>

> 
> The following grammar produces uncompilable code when generated from
> ANTLRWorks using -debug in the ANTLR options. I'm not sure which version of
> ANTLR is being used by ANTLRWorks. If it matters, I have ANTLR 3.1.3 on my
> machine.

ANTLRworks doesn't use ANTLR 3.1.3 yet. Please use the commandline tool to create debug parsers until a new version is published.

Johannes
> 
> ====
> 
> grammar EdifactDelfor;
> 
> options {
>   language = 'CSharp2' ;
> }
> 
> tokens {
> }
> 
> file        : contents+ EOF ;
> 
> contents    : TEXT
>         | SEP
>         | WS
>         | CSEP
>         | EOL
>         ;
> EOL: '\'';
> SEP: '+';
> CSEP: ':';
> TEXT: ('a'..'z'|'A'..'Z'|'0'..'9'|' '|'-'|','|'.'|'/'|'?')+ ;
> WS: ('\r'? '\n')+  ;
> 
> ====
> 
> Here is the culprit code that was generated (in the file() method):
> default:
>     if (cnt1 >= 1) goto loop1;
>     EarlyExitException eee1 =
>         new EarlyExitException(1, input);
>     dbg.RecognitionException(eee);   // Note the missing '1': should be
> eee1
> 
>     throw eee1;
> 
> When I manually change the reference to eee1, the thing compiles.
> 
> This bug does not appear when -debug is turned off.
> 
> Rob
> 
> _________________________________________________________________
> Attention all humans. We are your photos. Free us.
> http://go.microsoft.com/?linkid=9666046

-- 
GRATIS f?r alle GMX-Mitglieder: Die maxdome Movie-FLAT!
Jetzt freischalten unter http://portal.gmx.net/de/go/maxdome01

From JALuber at gmx.de  Mon Jun 15 05:43:12 2009
From: JALuber at gmx.de (Johannes Luber)
Date: Mon, 15 Jun 2009 14:43:12 +0200
Subject: [antlr-interest] Left recursion removal
In-Reply-To: <881148.3423.qm@web43510.mail.sp1.yahoo.com>
References: <881148.3423.qm@web43510.mail.sp1.yahoo.com>
Message-ID: <20090615124312.198380@gmx.net>

> Hi,
> Below is a fragment from a grammar I've written. I've had to modifiy is so
> that an expression may or may not be enclosed in parenthesis
> 
> However, which ever way I try to remove the recursion I either end up by
> reducing teh expressivness or by re-introducing the recursion.
> 
> Can anyone help point me in the right direction?

Did you already read <http://www.antlr.org/wiki/display/ANTLR3/Left-Recursion+Removal>?

Johannes
> 
> 
> grammar SLRR;
> 
> 
> expression
>   : LEFT_PARENTHESIS (predicate|expression) (SPACE_CHAR logicalOperator
> SPACE_CHAR (predicate | expression))* RIGHT_PARENTHESIS
>   | (predicate|expression) (SPACE_CHAR logicalOperator SPACE_CHAR
> (predicate | expression))*
>   ;
>  
> 
> 
> ///////////////////////////////////////////////////////////////////////
> predicate
>     :    predicateField SPACE_CHAR searchOperator SPACE_CHAR
> predicateField
>      ; 
> 
> 
> 
>  
> predicateField
>   : TEXT
>   ;
>   
>   
> fieldName
>   : TEXT
> 
>   ;
> 
> searchOperator 
>   : TEXT
>   | TEXTNOSPACES
> 
>   //| QUOTATION_MARK urlUnreserved+ (SPACE_CHAR urlUnreserved+)+
> QUOTATION_MARK 
>   ;
> 
> fieldValue 
>   : TEXT
>   //| quotedQueryParamValue
>   ;
>   
> logicalOperator
>        :    LOWER_CASE_LETTER_A
>            LOWER_CASE_LETTER_N
>            LOWER_CASE_LETTER_D
>        |    LOWER_CASE_LETTER_O
>            LOWER_CASE_LETTER_R
>        ;
>   
> LOWER_CASE_LETTER_A : 'a' ;
> LOWER_CASE_LETTER_B : 'b' ;
> LOWER_CASE_LETTER_C : 'c' ;
> LOWER_CASE_LETTER_D : 'd' ;
> LOWER_CASE_LETTER_E : 'e' ;
> LOWER_CASE_LETTER_F : 'f' ;
> LOWER_CASE_LETTER_G : 'g' ;
> LOWER_CASE_LETTER_H : 'h' ;
> LOWER_CASE_LETTER_I : 'i' ;
> LOWER_CASE_LETTER_J : 'j' ;
> LOWER_CASE_LETTER_K : 'k' ;
> LOWER_CASE_LETTER_L : 'l' ;
> LOWER_CASE_LETTER_M : 'm' ;
> LOWER_CASE_LETTER_N : 'n' ;
> LOWER_CASE_LETTER_O : 'o' ;
> LOWER_CASE_LETTER_P : 'p' ;
> LOWER_CASE_LETTER_Q : 'q' ;
> LOWER_CASE_LETTER_R : 'r' ;
> LOWER_CASE_LETTER_S : 's' ;
> LOWER_CASE_LETTER_T : 't' ;
> LOWER_CASE_LETTER_U : 'u' ;
> LOWER_CASE_LETTER_V : 'v' ;
> LOWER_CASE_LETTER_W : 'w' ;
> LOWER_CASE_LETTER_X : 'x' ;
> LOWER_CASE_LETTER_Y : 'y' ;
> LOWER_CASE_LETTER_Z : 'z' ;
>  
> CAPITAL_LETTER_A : 'A' ;
> CAPITAL_LETTER_B : 'B' ;
> CAPITAL_LETTER_C : 'C' ;
> CAPITAL_LETTER_D : 'D' ;
> CAPITAL_LETTER_E : 'E' ;
> CAPITAL_LETTER_F : 'F' ;
> CAPITAL_LETTER_G : 'G' ;
> CAPITAL_LETTER_H : 'H' ;
> CAPITAL_LETTER_I : 'I' ;
> CAPITAL_LETTER_J : 'J' ;
> CAPITAL_LETTER_K : 'K' ;
> CAPITAL_LETTER_L : 'L' ;
> CAPITAL_LETTER_M : 'M' ;
> CAPITAL_LETTER_N : 'N' ;
> CAPITAL_LETTER_O : 'O' ;
> CAPITAL_LETTER_P : 'P' ;
> CAPITAL_LETTER_Q : 'Q' ;
> CAPITAL_LETTER_R : 'R' ;
> CAPITAL_LETTER_S : 'S' ;
> CAPITAL_LETTER_T : 'T' ;
> CAPITAL_LETTER_U : 'U' ;
> CAPITAL_LETTER_V : 'V' ;
> CAPITAL_LETTER_W : 'W' ;
> CAPITAL_LETTER_X : 'X' ;
> CAPITAL_LETTER_Y : 'Y' ;
> CAPITAL_LETTER_Z : 'Z' ;
>  
> DIGIT_0 : '0' ;
> DIGIT_1 : '1' ;
> DIGIT_2 : '2' ;
> DIGIT_3 : '3' ;
> DIGIT_4 : '4' ;
> DIGIT_5 : '5' ;
> DIGIT_6 : '6' ;
> DIGIT_7 : '7' ;
> DIGIT_8 : '8' ;
> DIGIT_9 : '9' ;
> 
> TEXT        
> @init{StringBuilder lBuf = new StringBuilder();}
>     :   
>            QUOTATION_MARK
>            ( escaped=ESC {lBuf.append(getText());} | 
>              normal=~(QUOTATION_MARK|'\\'|'\n'|'\r')    
> {lBuf.appendCodePoint(normal);} )* 
>            QUOTATION_MARK    
>            {setText("\""+lBuf.toString()+"\"");}
>     ;
> 
> fragment
> ESC
>     :   '\\'
>         (       'n'    {setText("\n");}
>         |       'r'    {setText("\r");}
>         |       't'    {setText("\t");}
>         |       'b'    {setText("\b");}
>         |       'f'    {setText("\f");}
>         |       '"'    {setText("\"");}
>         |       '\''   {setText("\'");}
>         |       '\\'   {setText("\\");}
>         |       ('u')+ i=HEX_DIGIT j=HEX_DIGIT k=HEX_DIGIT l=HEX_DIGIT  
> {setText(this.hextToString(i.getText(),j.getText(),k.getText(),l.getText()));}
> 
>         )
>     ;
>     
> fragment
> HEX_DIGIT:
>  
> DIGIT_0|DIGIT_1|DIGIT_2|DIGIT_3|DIGIT_4|DIGIT_5|DIGIT_6|DIGIT_7|DIGIT_8|DIGIT_9
>  
> |LOWER_CASE_LETTER_A|LOWER_CASE_LETTER_B|LOWER_CASE_LETTER_C|LOWER_CASE_LETTER_D
>  
> |LOWER_CASE_LETTER_E|LOWER_CASE_LETTER_F|CAPITAL_LETTER_A|CAPITAL_LETTER_B
>   |CAPITAL_LETTER_C|CAPITAL_LETTER_D|CAPITAL_LETTER_E|CAPITAL_LETTER_F
>   ;
>   
> fragment
> TEXTNOSPACES
>   : (HEX_DIGIT|'g'..'z'|'G'..'Z'|'-'|':')+
>   ;
>   
> 
> AMPERSAND : '&' ; // &amp;
> APOSTROPHE : '\'' ;
> ASTERISK : '*' ;
> CIRCUMFLEX_ACCENT : '^' ;
> COLON : ':' ;
> COMMA : ',' ;
> PERCENT_SIGN : '%';
> DOLLAR_SIGN : '$';
> HYPHEN_MINUS :  '-';
> LOW_LINE : '_';
> FULL_STOP : '.';
> PLUS_SIGN : '+';
> EXCLAMATION_MARK : '!';
> LEFT_PARENTHESIS : '(';
> RIGHT_PARENTHESIS : ')';
> SEMICOLON : ';';
> SLASH : '/';
> QUESTION_MARK : '?';
> EQUALS_SIGN :'=';
> COMMERCIAL_AT : '@';
> HASH_SIGN : '#';
> TILDE : '~';
> QUOTATION_MARK : '"';
> SPACE_CHAR : ' ';
> 
> 
>       Need a Holiday? Win a $10,000 Holiday of your choice. Enter
> now.http://us.lrd.yahoo.com/_ylc=X3oDMTJxN2x2ZmNpBF9zAzIwMjM2MTY2MTMEdG1fZG1lY2gDVGV4dCBMaW5rBHRtX2xuawNVMTEwMzk3NwR0bV9uZXQDWWFob28hBHRtX3BvcwN0YWdsaW5lBHRtX3BwdHkDYXVueg--/SIG=14600t3ni/**http%3A//au.rd.yahoo.com/mail/tagline/creativeholidays/*http%3A//au.docs.yahoo.com/homepageset/%3Fp1=other%26p2=au%26p3=mailtagline

-- 
GMX FreeDSL Komplettanschluss mit DSL 6.000 Flatrate und Telefonanschluss
f?r nur 17,95 Euro/mtl.!* http://portal.gmx.net/de/go/dsl02

From packadal at gmail.com  Mon Jun 15 06:10:08 2009
From: packadal at gmail.com (packadal)
Date: Mon, 15 Jun 2009 09:10:08 -0400
Subject: [antlr-interest] CSharp GeneratedCode attribute
In-Reply-To: <86403CA0939415448BCCB83855EFE09AA68265@Bloodymary.ironwillgames.com>
References: <8e87f2580906121218p12c20c84n8d613bb779edf751@mail.gmail.com> 
	<20090613230747.23170@gmx.net>
	<86403CA0939415448BCCB83855EFE09AA68265@Bloodymary.ironwillgames.com>
Message-ID: <8e87f2580906150610y3ebf0a42rac8a2fdaaef755b0@mail.gmail.com>

I think it makes sense to add this attribute, because even if FxCop finds
the generated code perfect, then StyleCop will complain, and you can't
possibly generate code that complies to coding conventions without a major
headache.
And even if you did, it would be pretty useless IMHO.

I'm happy to read the Csharp3 target will be .NET compliant, nobody will be
able to complain about antlr anymore :)

Best regards

On Sun, Jun 14, 2009 at 8:31 AM, Sam Harwell <sharwell at pixelminegames.com>wrote:

> FxCop freaks out on ANTLR generated code right now and slows down so much
> it's effectively unusable. I've been meaning to address this issue in the
> CSharp3 target, but haven't yet. I'm curious how you're supposed to handle
> partial classes with the GeneratedCode attribute - I assume I have to mark
> the generated methods and fields instead of the whole class, and the
> generated code has an enormous number of fields (tokens and follow sets). It
> makes me wonder if the GeneratedCodeAttribute is conditional like the
> SuppressMessageAttribute, and if not, how much with the compiled code
> increase in size with them all marked. I'm guessing not much considering how
> large the compiled grammar already is.
>
> I'll take a look at this when I get the chance, but it could take a few
> weeks right now.
>
> Sam
>
> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:
> antlr-interest-bounces at antlr.org] On Behalf Of Johannes Luber
> Sent: Saturday, June 13, 2009 6:08 PM
> To: packadal; antlr-interest at antlr.org
> Subject: Re: [antlr-interest] CSharp GeneratedCode attribute
>
> > Hi,
> >
> > For the current project I am working on, we need to use a parser.
> > I convinced everybody here that writing your own parser is evil, because
> > it
> > takes much longer to write than using a tool conceived for this exact
> > purpose.
> >
> > Now we use C# and have some strict coding conventions, enforced using the
> > Microsoft tools (FxCop and StyleCop).
> > The problem being the antlr-generated code does not comply with these
> > rules.
> >
> > But Microsoft thought about the possibility of using generated code with
> > these tools, and the [GeneratedCode(name, version)] attribute is here for
> > this purpose. Hurray !
> > The only problem remaining now is that this attribute cannot be placed
> > correctly using the C# 2 template.
> >
> > So I added a line in the C# 2 template (dunno if I done it "The Right
> Way"
> > though) :
> >
> > ...
> >
> > 75  <docComment>
> > *76  <if(actions.(actionScope).generatedVersion)>
> > 77  [GeneratedCode("antlr", @"<actions.(actionScope).generatedVersion>")]
> > 78
> > 79  <endif>
> > *80  <recognizer>
> > ...
>
> Hi!
>
> >From what I can gather it seems to be the right place, though I wonder
> what other way you tried first. Regarding the CSharp3 target: Unlike CSharp2
> it is/on the way to be completely .NET-compliant regarding the coding
> standards. I can't change it for CSharp2 yet because I have to worry about
> backwards-compatibility, but I plan parity for 3.2.
>
> So the question remains, if including this attribute there makes sense if
> FxCop won't find anything. Sam, any comments?
>
> Johannes
>
> > Obviously in bold is what I added.
> > >>From what I have seen this can also be added in the C# 3 template.
> >
> > BTW, when will there be a release of antlrworks including version 3.1.3
> of
> > antlr ?
> > I have tried it by myself but must have done something wrong as I get
> > loads
> > of errors when trying to compile.
> >
> > Keep up the good work,
> > Regards.
> >
> > --
> > - Always keep in mind that you may be wrong -
>
> --
> GMX FreeDSL Komplettanschluss mit DSL 6.000 Flatrate und Telefonanschluss
> f?r nur 17,95 Euro/mtl.!* http://portal.gmx.net/de/go/dsl02
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>



-- 
- Always keep in mind that you may be wrong -
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090615/026aa978/attachment.html 

From Stephen.R.Lawson.-ND at espn.com  Mon Jun 15 07:22:52 2009
From: Stephen.R.Lawson.-ND at espn.com (Lawson, Stephen R. -ND)
Date: Mon, 15 Jun 2009 10:22:52 -0400
Subject: [antlr-interest] Question regarding Creating Declarative UI Language
Message-ID: <F9F8C87AD16A844CBE1F5A5A6445EEA64D3CEEF8A4@XCHGBRS3.corp.espn.pvt>

I am new to ANTLR, and therefore I do not know the full capabilities, or all the appropriate applications and would appreciate any guidance on the following.  I am currently working in the interactive television application space. One technology that I am currently using is the Yahoo Widget Platform (http://connectedtv.yahoo.com/).  All user interface screens and components are laid out and created using JavaScript.  For example, to add a button to a screen, JavaScript would be used to instantiate a button object, setting various attributes (such as location, etc) and then append to a DOM object.  This is all fine and good, but what I would like to do is build a declarative language, similar to the JavaFX JSON style (or XML style language), to lay out these JavaScript components, and then translate the JSON/XML statements into the final JavaScript code which will be deployed on the end users set top box or TV.

My main question is, is ANTLR the appropriate tool for building of a declarative style language and the translation of the language to a final JavaScript output?  If so, is there any documentation regarding using ANTLR for a situation like what I am trying to accomplish?  I appreciate any help.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090615/b28c73d7/attachment.html 

From jbb at acm.org  Mon Jun 15 07:45:53 2009
From: jbb at acm.org (John B. Brodie)
Date: Mon, 15 Jun 2009 10:45:53 -0400
Subject: [antlr-interest] Matching empty string
In-Reply-To: <COL113-W325CCF11FB6F9A98573B19923E0@phx.gbl>
References: <COL113-W325CCF11FB6F9A98573B19923E0@phx.gbl>
Message-ID: <1245077153.30561.14.camel@gecko.home.org>

Greetings!

On Sun, 2009-06-14 at 23:09 -0400, Dukie Banderjee wrote:
> Hi,
> My grammar needs to handle the following situation: A line can have
> multiple fields, separated by a delimiter. A field can have multiple
> components, separated by another delimiter.
> If a field or component is blank, it should be counted as a blank
> field or blank component. For example with field delimiter '+' and
> component delimiter ':' :
> UNB++::+123
> is a 'UNB' line with 3 fields. The first field is blank, the second
> field has 3 blank components, and the last field has a single
> component with the value '123'.
> 
> Here is my grammar so far:
> 
> line         : TEXT fields ;
> fields        : field* terminator! ;
> field        : SEP t=fieldText? -> ^(FIELD $t?) ;
> fieldText    : comp (CSEP comp)* ;
> comp        : t=TEXT -> ^(COMP $t) ;
> 
> When a field is blank, e.g. '++', this correctly generates a ^(FIELD)
> with no children. However, I don't know how to get similar behaviour
> for the components, because whereas a field starts with a SEP and
> optional TEXT, the component may or may not have a leading CSEP. 
> 
> When the input is '+::+', there are three components, but the first is
> entirely blank, an empty string. 
> 
> What I would like is that '+::+' creates ^(FIELD ^(COMP) ^(COMP)
> ^(COMP)). How can I accomplish this?
> 

Attached is a complete example accomplishing what you asked for.

In summary, I think the key here is to realize that when there is 1 and
only 1 component, then 1 and only 1 TEXT must be present, and obviously
no CSEP. While when there are 2 or more components, it is the CSEP(s)
that must be present and the TEXT is optional. So I think in light of
this we need to separate the fieldText rule into 2 cases:

fieldText : comp | ((comp? CSEP)+ comp?) ;

The attached grammar is slightly more complicated because I made a new
virtual token EMPTY in order to make empty fields and/or components more
explicit in the resultant AST.

Hope this helps....
   -jbb

-------------- next part --------------
grammar Test;

options {
    output = AST;
    ASTLabelType = CommonTree;
}

tokens { FIELD; COMP; EMPTY; }

@members {
    private static final String [] x = new String[]{
       "UNB++::+123\n",
       "UNB++::z+123\n",
       "UNB++x::z+123\n",
       "UNB++:y:+123\n",
       "UNB++x:y:z+123\n"
    };

    public static void main(String [] args) {
        for( int i = 0; i < x.length; ++i ) {
            try {
                System.out.println("about to parse:`"+x[i]+"`");
                TestLexer lexer = new TestLexer(new ANTLRStringStream(x[i]));
                CommonTokenStream tokens = new CommonTokenStream(lexer);

                TestParser parser = new TestParser(tokens);
                TestParser.start_return p_result = parser.start();

                CommonTree ast = p_result.tree;
                if( ast == null ) {
                   System.out.println("resultant tree: is NULL");
                } else {
                   System.out.println("resultant tree: " + ast.toStringTree());
                }
                System.out.println();
            } catch(Exception e) {
                e.printStackTrace();
            }
        }
    }
}

start : line EOF!;

line          : TEXT fields ;

fields        : field* terminator! ;

// make the fact that a field is empty explicit.
// replaced this rule--- field : SEP t=fieldText? -> ^(FIELD $t?) ;
// with---
field         : SEP! opt_fieldText ;

opt_fieldText : (t=fieldText -> ^(FIELD $t))
              | (/*empty*/ -> ^(FIELD EMPTY)) ; 

fieldText     : comp // single component, value MUST be present

              | ((opt_comp CSEP!)+ opt_comp) ; // 2 or more components,
                                               // each possibly empty

opt_comp      : comp
              | (/*empty*/ -> ^(COMP EMPTY)) ;

comp          : t=TEXT -> ^(COMP $t) ;

terminator : NL;
SEP : '+' ;
CSEP : ':' ;
TEXT : ('a'..'z'|'A'..'Z'|'0'..'9')+ ;

NL : ('\r'|'\n')+;


From Viktor_Lioutyi at i2.com  Mon Jun 15 09:05:08 2009
From: Viktor_Lioutyi at i2.com (Viktor Lioutyi)
Date: Mon, 15 Jun 2009 11:05:08 -0500
Subject: [antlr-interest] AST transformation for sequence of statements
In-Reply-To: <af7c90190906150354m59dbaa49t8e91aa8feef05193@mail.gmail.com>
References: <af7c90190906100456p57517fc6oc595aae91680d4cd@mail.gmail.com>
	<4A2FD4FE.1020206@temporal-wave.com>
	<af7c90190906110456u7f74c7b1k60ce33ca3f1297b7@mail.gmail.com>
	<4A314571.5000600@temporal-wave.com>
	<af7c90190906150354m59dbaa49t8e91aa8feef05193@mail.gmail.com>
Message-ID: <33A4D20438DA1C4A8D7A8981F072D25B19C81E7C10@DLMBXCCR.i2.com>

Hi,

I am writing a prototype of converter from one language (TSL of WinRunner) to another (VB script of QTP).

One of the task includes identification of statement sequence similar to one below

int i = 0;
A[i++] = e1;
A[i++] = e2;
...
A[i++] = eN;

and rewriting it to something like that (the code may be not exact, but the idea should be clear)

Dim A(20)
A(0) = e1
A(1) = e2
...
A(20) = e20

I am trying to solve this task by using AST rewrites.

I tried to use pattern matching (with options output = AST; filter = true; rewrite=true;), but was not able to make pattern matching to recognize sequence of nodes. Option greedy=true on the rule did not help. My conclusion was that pattern matching could only works with a tree, not sequence of trees. Please let me know if I am mistaken here. Will it work with syntactic predicate?

I did not try AST rewrite option without filter yet. Is it the right way?

Could somebody give me some hints how to come to resolution of this task using ANTLR? 

I have limited experience with ANTLR and any help would be appreciated.
 
Thanks in advance,
Viktor

From Stephen.R.Lawson.-ND at espn.com  Mon Jun 15 11:16:49 2009
From: Stephen.R.Lawson.-ND at espn.com (Lawson, Stephen R. -ND)
Date: Mon, 15 Jun 2009 14:16:49 -0400
Subject: [antlr-interest] Question regarding Creating Declarative UI
 Language
In-Reply-To: <219159.77153.qm@web33301.mail.mud.yahoo.com>
References: <219159.77153.qm@web33301.mail.mud.yahoo.com>
Message-ID: <F9F8C87AD16A844CBE1F5A5A6445EEA64D3CEEF8A6@XCHGBRS3.corp.espn.pvt>

I appreciate the help.  I will take a look at the books.

________________________________
From: J. Stephen Riley Silber [mailto:jsrs701 at yahoo.com]
Sent: Monday, June 15, 2009 1:57 PM
To: Lawson, Stephen R. -ND
Subject: Re: [antlr-interest] Question regarding Creating Declarative UI Language

Hi Stephen,

(Excellent spelling of your name, by the way.)

ANTLR is indeed a great foundation for a language translator.  As for how to do it, check out Terrence's books.

* http://www.pragprog.com/titles/tpantlr/the-definitive-antlr-reference  This is how to use ANTLR at the nitty-gritty level.

* http://www.pragprog.com/news/language-design-patterns-the-seed-of-hope  This is a book of design patterns that will, frankly, get you right where you need to be.  (When it's finished, actually.  It's in beta now, but is VERY readable.)

Have fun!  This is a great tool and a great community.

--Stephen

--- On Mon, 6/15/09, Lawson, Stephen R. -ND <Stephen.R.Lawson.-ND at espn.com> wrote:

From: Lawson, Stephen R. -ND <Stephen.R.Lawson.-ND at espn.com>
Subject: [antlr-interest] Question regarding Creating Declarative UI Language
To: "'antlr-interest at antlr.org'" <antlr-interest at antlr.org>
Date: Monday, June 15, 2009, 7:22 AM

I am new to ANTLR, and therefore I do not know the full capabilities, or all the appropriate applications and would appreciate any guidance on the following.  I am currently working in the interactive television application space. One technology that I am currently using is the Yahoo Widget Platform (http://connectedtv.yahoo.com/).  All user interface screens and components are laid out and created using JavaScript.  For example, to add a button to a screen, JavaScript would be used to instantiate a button object, setting various attributes (such as location, etc) and then append to a DOM object.  This is all fine and good, but what I would like to do is build a declarative language, similar to the JavaFX JSON style (or XML style language), to lay out these JavaScript components, and then translate the JSON/XML statements into the final JavaScript code which will be deployed on the end users set top box or TV.

My main question is, is ANTLR the appropriate tool for building of a declarative style language and the translation of the language to a final JavaScript output?  If so, is there any documentation regarding using ANTLR for a situation like what I am trying to accomplish?  I appreciate any help.

-----Inline Attachment Follows-----


List: http://www.antlr.org/mailman/listinfo/antlr-interest
Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address


________________________________
Please consider the environment before printing this e-mail.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090615/21e72986/attachment.html 

From tcolar at colar.net  Mon Jun 15 12:12:11 2009
From: tcolar at colar.net (Thibaut Colar)
Date: Mon, 15 Jun 2009 12:12:11 -0700
Subject: [antlr-interest] Issue with backtracking - non determinism ?
Message-ID: <4A369D0B.1010104@colar.net>

Hello there, I've been learning and using ANTLR with online docs and the
book.

I've been witting the grammar for a new prog. Language called Fan, and
it's basically all working now, though that took quite some effort,
since I'm new to antlr, and the Fan syntax is fairly difficult.

For reference here is the current whole grammar:
http://svn.colar.net/Fan_antlr/src/Fan.g

Anyway, I have one issue left, I'm not sure exactly what to call it (non
determinism ?) or exactly how to resolve it.

I have a shorter subset of the grammar here to illustrate the problem
and debug it in antlrworks:
http://svn.colar.net/Fan_antlr/src/Test.g

The basic issue is as follow (Please refer to Test.g):

If I test my grammar with a ternary expression such as:
    "foo ? bar :  beer"   it 's fine
Now if I have:
    " foo ? bar : beer[0..2]     it fails

What's happening is that, antlr will interpret "bar:beer[0..2]" as a
list (of map type bar:beer), which is a valid match in the grammar,
however  it will then fail, because  the rest of the ternary
expression('else' case) is then missing (: expr)

It should interpret like this: expr(foo) '?' expr(bar) ':'
expr(list(beer[0..2]))  which would be a valid ternary then.

The issue is cause by the ':' being meaningful as both a map type
separator and a ternary separator, and I guess antlr is matching
whatever matches first.

However shouldn't ANTLR backtrack anyway once it sees it can't match the
rest of the ternary expr, or is bactracking just not gonna help since it
Did find a match for list already ?

How can i solve this?
1) It seem checking first for id's and for map/list last would solve the
issue, but in most other cases (not ternary expr) i actually want to
match the longest option first (map/list)

2) I was thinking of setting  a variable/state while "within" a ternary
expression and in this case try first with maps/list disabled(skipping
them), but apparently when backtracking is enabled the code generated by
ANTLR does NOT evaluate my variable (if state.bactracking==0) so it
won't do it.


Any help/ideas would be greatly appreciated.







From espina.edgar at gmail.com  Mon Jun 15 20:17:45 2009
From: espina.edgar at gmail.com (Edgar Espina)
Date: Tue, 16 Jun 2009 00:17:45 -0300
Subject: [antlr-interest] ANTLR IDE v2.0.0rc1
Message-ID: <92b42db60906152017g32ea7749nc2314342eacfa8ce@mail.gmail.com>

Hi,

 ANTLR IDE v2.0.0rc1 released!!!

 New features:
   * Eclipse 3.5 compatible
   * Improve the user interface
   * Improve the error reporting mechanism
   * ANTLR packages
   * Multiple projects handle and the -lib option
   * Upgrade to DLTK 1.0.0
   * Custom targets
   * Easier interface to errors/warnings

 Migrating from ANTLR IDE 1.3.1:
http://antlrv3ide.sourceforge.net/doc/migrating.html

 ANTLR IDE user guide: http://antlrv3ide.sourceforge.net/doc/

 More information at web site: http://antlrv3ide.sourceforge.net/

 Regards,
-- 
edgar
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090616/e0b9cb4d/attachment.html 

From dukie_banderjee at hotmail.com  Mon Jun 15 20:21:32 2009
From: dukie_banderjee at hotmail.com (Dukie Banderjee)
Date: Mon, 15 Jun 2009 23:21:32 -0400
Subject: [antlr-interest] CSharp2 -debug generation bug
Message-ID: <COL113-W9183E8927F25ED4C5F44F923F0@phx.gbl>


The following grammar compiles fine under ANTLR 3.1.3 except if you use the -debug option, in which case it throws an exception during generation. Exception trace follows.

The culprit line is:
message: unhSegment bgmSegment segment+ linLoop untSegment -> ^(MESSAGE unhSegment bgmSegment segment+ linLoop untSegment) ;

On this line, I added linLoop on both sides. linLoop in turn references segment+, which I suspect might be the problem. However, this grammar appears to generate okay when -debug is off. (The grammar is functionally flawed, but in any case it should not cause an exception for ANTLR to generate the parser from it.)


Thanks,
Rob

====

grammar Test;

options {
  language = 'CSharp2' ;
  output = AST ;
}

tokens {
    INTERCHANGE;
    GROUP;
    MESSAGE;
    LOOP;
    SECTION;
    SEGMENT;
    ELEMENT;
    COMPONENT;
}

file        : interchange EOF -> interchange;

interchange: unaSegment? unbSegment group unzSegment -> ^(INTERCHANGE unaSegment? unbSegment group unzSegment) ;
group: ungSegment message+ uneSegment -> ^(GROUP ungSegment message+ uneSegment) ;
message: unhSegment bgmSegment segment+ linLoop untSegment -> ^(MESSAGE unhSegment bgmSegment segment+ linLoop untSegment) ;

linLoop: linSection+ -> ^(LOOP linSection+) ;
linSection: linSegment segment+ -> ^(SECTION linSegment segment+ ) ;

bgmSegment: tagBGM elements -> ^(SEGMENT tagBGM elements) ;
linSegment: tagLIN elements -> ^(SEGMENT tagLIN elements) ;

tagBGM    : { input.LT(1).Text == "BGM" }? TEXT ;
tagLIN    : { input.LT(1).Text == "LIN" }? TEXT ;


unaSegment: tagUNA elements -> ^(SEGMENT tagUNA elements) ;
unbSegment: tagUNB elements -> ^(SEGMENT tagUNB elements) ;
ungSegment: tagUNG elements -> ^(SEGMENT tagUNG elements) ;
unhSegment: tagUNH elements -> ^(SEGMENT tagUNH elements) ;
untSegment: tagUNT elements -> ^(SEGMENT tagUNT elements) ;
uneSegment: tagUNE elements -> ^(SEGMENT tagUNE elements) ;
unzSegment: tagUNZ elements -> ^(SEGMENT tagUNZ elements) ;

tagUNA    : { input.LT(1).Text == "UNA" }? TEXT ;
tagUNB    : { input.LT(1).Text == "UNB" }? TEXT ;
tagUNG    : { input.LT(1).Text == "UNG" }? TEXT ;
tagUNH    : { input.LT(1).Text == "UNH" }? TEXT ;
tagUNT    : { input.LT(1).Text == "UNT" }? TEXT ;
tagUNE    : { input.LT(1).Text == "UNE" }? TEXT ;
tagUNZ    : { input.LT(1).Text == "UNZ" }? TEXT ;

segment: tag elements -> ^(SEGMENT tag elements);
//{ Console.WriteLine("Found segment: " + $tag.text); } 
tag    :    TEXT
    ;

ignoredLine    : unknownDiscriminator! elements! ;

unknownDiscriminator: TEXT;

        
elements        : element* terminator! ;
element        : ELEMENT_SEPARATOR t=components? -> ^(ELEMENT $t?) ;
components    : comp1 comp2* ;

comp2        : COMPONENT_SEPARATOR t=TEXT? -> ^(COMPONENT $t?)
    ;

comp1        : t=TEXT -> ^(COMPONENT $t)
        | COMPONENT_SEPARATOR t=TEXT? -> ^(COMPONENT) ^(COMPONENT $t?) ;

terminator    : SEGMENT_TERMINATOR ;

//terminator    : (EOL | WS)+ ;

SEGMENT_TERMINATOR: '\'';
ELEMENT_SEPARATOR: '+';
COMPONENT_SEPARATOR:  ':';
//TEXT: ('a'..'z'|'A'..'Z'|'0'..'9'|' '|'-'|','|'.'|'/'|'?')+ ;
TEXT: ('a'..'z'|'A'..'Z'|'0'..'9'|' '|'-'|','|'.'|'/'|ESCAPE)+ ;
fragment ESCAPE : '?' . ;

WS: ('\r'? '\n')+ { $channel = 99; }  ;

====
error(10):  internal error: <<OMITTED>>.g : java.util.NoSuchElementException: no such attribute: description in template context [out
putFile parser genericParser(...) cyclicDFA if(dfa.specialStateSTs)_subtemplate anonymous cyclicDFAState cyclicDFAEdge notPredicate eva
lPredicate(...)]
org.antlr.stringtemplate.StringTemplate.checkNullAttributeAgainstFormalArguments(StringTemplate.java:1276)
org.antlr.stringtemplate.StringTemplate.get(StringTemplate.java:800)
org.antlr.stringtemplate.StringTemplate.get(StringTemplate.java:798)
org.antlr.stringtemplate.StringTemplate.get(StringTemplate.java:798)
org.antlr.stringtemplate.StringTemplate.get(StringTemplate.java:798)
org.antlr.stringtemplate.StringTemplate.get(StringTemplate.java:798)
org.antlr.stringtemplate.StringTemplate.get(StringTemplate.java:798)
org.antlr.stringtemplate.StringTemplate.get(StringTemplate.java:798)
org.antlr.stringtemplate.StringTemplate.get(StringTemplate.java:798)
org.antlr.stringtemplate.StringTemplate.get(StringTemplate.java:798)
org.antlr.stringtemplate.StringTemplate.getAttribute(StringTemplate.java:682)
org.antlr.stringtemplate.language.ActionEvaluator.attribute(ActionEvaluator.java:360)
org.antlr.stringtemplate.language.ActionEvaluator.expr(ActionEvaluator.java:136)
org.antlr.stringtemplate.language.ActionEvaluator.action(ActionEvaluator.java:84)
org.antlr.stringtemplate.language.ASTExpr.write(ASTExpr.java:148)
org.antlr.stringtemplate.StringTemplate.write(StringTemplate.java:700)
org.antlr.stringtemplate.language.ASTExpr.write(ASTExpr.java:722)
org.antlr.stringtemplate.language.ASTExpr.writeAttribute(ASTExpr.java:659)
org.antlr.stringtemplate.language.ActionEvaluator.action(ActionEvaluator.java:86)
org.antlr.stringtemplate.language.ASTExpr.write(ASTExpr.java:148)
org.antlr.stringtemplate.StringTemplate.write(StringTemplate.java:700)
org.antlr.stringtemplate.language.ASTExpr.write(ASTExpr.java:722)
org.antlr.stringtemplate.language.ASTExpr.writeAttribute(ASTExpr.java:659)
org.antlr.stringtemplate.language.ActionEvaluator.action(ActionEvaluator.java:86)
org.antlr.stringtemplate.language.ASTExpr.write(ASTExpr.java:148)
org.antlr.stringtemplate.StringTemplate.write(StringTemplate.java:700)
org.antlr.stringtemplate.language.ASTExpr.write(ASTExpr.java:722)
org.antlr.stringtemplate.language.ASTExpr.write(ASTExpr.java:742)
org.antlr.stringtemplate.language.ASTExpr.writeAttribute(ASTExpr.java:659)
org.antlr.stringtemplate.language.ActionEvaluator.action(ActionEvaluator.java:86)
org.antlr.stringtemplate.language.ASTExpr.write(ASTExpr.java:148)
org.antlr.stringtemplate.StringTemplate.write(StringTemplate.java:700)
org.antlr.stringtemplate.language.ASTExpr.write(ASTExpr.java:722)
org.antlr.stringtemplate.language.ASTExpr.writeAttribute(ASTExpr.java:659)
org.antlr.stringtemplate.language.ActionEvaluator.action(ActionEvaluator.java:86)
org.antlr.stringtemplate.language.ASTExpr.write(ASTExpr.java:148)
org.antlr.stringtemplate.StringTemplate.write(StringTemplate.java:700)
org.antlr.stringtemplate.language.ASTExpr.write(ASTExpr.java:722)
org.antlr.stringtemplate.language.ASTExpr.write(ASTExpr.java:742)
org.antlr.stringtemplate.language.ASTExpr.writeAttribute(ASTExpr.java:659)
org.antlr.stringtemplate.language.ActionEvaluator.action(ActionEvaluator.java:86)
org.antlr.stringtemplate.language.ASTExpr.write(ASTExpr.java:148)
org.antlr.stringtemplate.StringTemplate.write(StringTemplate.java:700)
org.antlr.stringtemplate.language.ConditionalExpr.writeSubTemplate(ConditionalExpr.java:152)
org.antlr.stringtemplate.language.ConditionalExpr.write(ConditionalExpr.java:103)
org.antlr.stringtemplate.StringTemplate.write(StringTemplate.java:700)
org.antlr.stringtemplate.language.ASTExpr.write(ASTExpr.java:722)
org.antlr.stringtemplate.language.ASTExpr.write(ASTExpr.java:742)
org.antlr.stringtemplate.language.ASTExpr.writeAttribute(ASTExpr.java:659)
org.antlr.stringtemplate.language.ActionEvaluator.action(ActionEvaluator.java:86)
org.antlr.stringtemplate.language.ASTExpr.write(ASTExpr.java:148)
org.antlr.stringtemplate.StringTemplate.write(StringTemplate.java:700)
org.antlr.stringtemplate.language.ASTExpr.write(ASTExpr.java:722)
org.antlr.stringtemplate.language.ASTExpr.writeAttribute(ASTExpr.java:659)
org.antlr.stringtemplate.language.ActionEvaluator.action(ActionEvaluator.java:86)
org.antlr.stringtemplate.language.ASTExpr.write(ASTExpr.java:148)
org.antlr.stringtemplate.StringTemplate.write(StringTemplate.java:700)
org.antlr.stringtemplate.language.ASTExpr.write(ASTExpr.java:722)
org.antlr.stringtemplate.language.ASTExpr.writeAttribute(ASTExpr.java:659)
org.antlr.stringtemplate.language.ActionEvaluator.action(ActionEvaluator.java:86)
org.antlr.stringtemplate.language.ASTExpr.write(ASTExpr.java:148)
org.antlr.stringtemplate.StringTemplate.write(StringTemplate.java:700)
org.antlr.codegen.CodeGenerator.write(CodeGenerator.java:1278)
org.antlr.codegen.Target.genRecognizerFile(Target.java:94)
org.antlr.codegen.CodeGenerator.genRecognizer(CodeGenerator.java:463)
org.antlr.Tool.generateRecognizer(Tool.java:607)
org.antlr.Tool.process(Tool.java:429)
org.antlr.Tool.main(Tool.java:91)


_________________________________________________________________
We are your photos. Share us now with Windows Live Photos.
http://go.microsoft.com/?linkid=9666047
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090615/c830991f/attachment.html 

From sp at metrohm.com  Mon Jun 15 23:20:45 2009
From: sp at metrohm.com (Simon, Peter)
Date: Tue, 16 Jun 2009 08:20:45 +0200
Subject: [antlr-interest] Passing parameters to ANTLR Works Debugger
Message-ID: <8E9594E3C9BE104DBDB757D905303C06027E62A2@srv-exch2.DOM-METROHM>

Hi,

I've a grammar, where I ask for parameters (like an ArrayList) in the
start-rule.

 

Is there a way to pass parameters within the ANTLRWorks debugger?

 

Thanks for any help.

Peter

 

 

 

______________________________________

 

Peter Simon

Dipl. Informatik Techniker HF
Metrohm AG 
Oberdorfstr. 68, CH-9101 Herisau / Switzerland
Tel. +41 71 353 88 11, Direkt +41 71 353 86 46

Fax +41 71 353 89 01
E-Mail <mailto:sp at metrohm.com <mailto:xx at metrohm.com> >
Web <http://www.metrohm.com <http://www.metrohm.com/> >

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090616/81839c67/attachment.html 

From X.Guo at 4c.ucc.ie  Tue Jun 16 05:59:37 2009
From: X.Guo at 4c.ucc.ie (Xiaohua Guo)
Date: Tue, 16 Jun 2009 13:59:37 +0100
Subject: [antlr-interest] How could I store the data in objects?
Message-ID: <064F4A815DFF43B8AC57B55339524E6C@4c129>

Hi, 

I have written a grammar file in antlr to generate a parser and a lexer. I
want to use them to read a .dp file, get the data from tokens and then store
the data in objects. In that way I could use the data in the objects to
generate a data file. Some of the data in the objects will be reused in
future that's why I stored them in objects first. I have written a class in
Java, the objects can be initialized by the DataOfTask class. The return
value may be float or a distribution. 

 

My problem is I don't know how to change my .g file so that I could store
the data in the objects.

 

The attachment is my .g file, .dp file, DataOfTask class, and the test file.
Can some give me some advice? Thank you!

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090616/b33279ca/attachment.html 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: parserwithantlr.rar
Type: application/octet-stream
Size: 2975 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20090616/b33279ca/attachment.obj 

From andy.grove at codefutures.com  Tue Jun 16 07:20:16 2009
From: andy.grove at codefutures.com (Andy Grove)
Date: Tue, 16 Jun 2009 08:20:16 -0600
Subject: [antlr-interest] [ANTLR C 3.1.3] Error when parsing international
	characters
Message-ID: <F38A6A3A-3689-45BF-9EF1-7DD93618A6E8@codefutures.com>

I have a SQL parser that is working fine with standard ASCII  
characters but if I try and insert data containing international  
characters such as:

"INSERT INTO customer (username, password, title, first_name,  
last_name, addr_line1, addr_line2, addr_city, addr_state, country_id)  
VALUES (''username123', 'password', 'Mr', 'T?st', 'Test', 'Test',  
'Test', 'Test', 'TE', 1)"

I get this error:

-memory-(1) : lexer error 1 :
	Unexpected character at offset 179, near char(0XC3) :
	?st', 'Test', 'Test

Here is my setup code:

	input = antlr3NewAsciiStringInPlaceStream((pANTLR3_UINT8)stringCopy,  
l, NULL);
	lexer = DbsMySQL_CPPLexerNew(input);
	tstream = antlr3CommonTokenStreamSourceNew(ANTLR3_SIZE_HINT, lexer- 
 >pLexer->rec->state->tokSource);
	parser = DbsMySQL_CPPParserNew(tstream);

Do I need to specify the character set somewhere?

Thanks,

Andy.

---
Andy Grove
Chief Architect
CodeFutures Corporation
"Share Nothing. Shard Everything."

Cell:    (303) 720-1285
E-Fax:   (303) 395-0426
Web:     http://www.codefutures.com/
Twitter: http://twitter.com/andygrove73



-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090616/54097d69/attachment.html 

From andy.grove at codefutures.com  Tue Jun 16 09:18:13 2009
From: andy.grove at codefutures.com (Andy Grove)
Date: Tue, 16 Jun 2009 10:18:13 -0600
Subject: [antlr-interest] [ANTLR C 3.1.3] Error when parsing
	international characters
In-Reply-To: <3BC09123-E02A-4FF8-9C8A-B0A98EA78D2E@temporal-wave.com>
References: <F38A6A3A-3689-45BF-9EF1-7DD93618A6E8@codefutures.com>
	<3BC09123-E02A-4FF8-9C8A-B0A98EA78D2E@temporal-wave.com>
Message-ID: <FDEE38BB-E69E-461A-A4FF-EDB671D74C8B@codefutures.com>

Jim,

Thanks. I've attempted to use the UCS input stream with this code:

SymbolTable* SQLParser::parse(std::string sql) {

	....

	std::wstring wsql(sql.begin(), sql.end());
	const wchar_t *wsqlchars = wsql.c_str();
	input = antlr3NewUCS2StringInPlaceStream((pANTLR3_UINT16)wsqlchars,  
wsql.length(), NULL);

	...

}

Am I even close with this? It compiles OK but now when I run my test  
the app becomes unresponsive and consumes all the available RAM.

Thanks,

Andy.


On Jun 16, 2009, at 9:21 AM, Jim Idle wrote:

> You need the UCS version of the input stream or write a utf32 input  
> stream and use to pre-supplied UTF8 to UTF32 conversion routine.
>
> If you can wait until next reLease I will be supplying these ready  
> made but they are not difficult to produce, just copy the others.  
> Internally the euntime uses 32 bit unicode and dies not care how you  
> provide these.
>
> Jim
>
> On Jun 16, 2009, at 9:20 AM, Andy Grove <andy.grove at codefutures.com>  
> wrote:
>
>> I have a SQL parser that is working fine with standard ASCII  
>> characters but if I try and insert data containing international  
>> characters such as:
>>
>> "INSERT INTO customer (username, password, title, first_name,  
>> last_name, addr_line1, addr_line2, addr_city, addr_state,  
>> country_id) VALUES (''username123', 'password', 'Mr', 'T?st',  
>> 'Test', 'Test', 'Test', 'Test', 'TE', 1)"
>>
>> I get this error:
>>
>> -memory-(1) : lexer error 1 :
>> 	Unexpected character at offset 179, near char(0XC3) :
>> 	?st', 'Test', 'Test
>>
>> Here is my setup code:
>>
>> 	input =  
>> antlr3NewAsciiStringInPlaceStream((pANTLR3_UINT8)stringCopy, l,  
>> NULL);
>> 	lexer = DbsMySQL_CPPLexerNew(input);
>> 	tstream = antlr3CommonTokenStreamSourceNew(ANTLR3_SIZE_HINT, lexer- 
>> >pLexer->rec->state->tokSource);
>> 	parser = DbsMySQL_CPPParserNew(tstream);
>>
>> Do I need to specify the character set somewhere?
>>
>> Thanks,
>>
>> Andy.
>>
>> ---
>> Andy Grove
>> Chief Architect
>> CodeFutures Corporation
>> "Share Nothing. Shard Everything."
>>
>> Cell:    (303) 720-1285
>> E-Fax:   (303) 395-0426
>> Web:     http://www.codefutures.com/
>> Twitter: http://twitter.com/andygrove73
>>
>>
>>
>>
>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090616/17b29c6c/attachment.html 

From zep_antlr at bahj.com  Tue Jun 16 09:52:45 2009
From: zep_antlr at bahj.com (Zachary Palmer)
Date: Tue, 16 Jun 2009 12:52:45 -0400
Subject: [antlr-interest] ANTLR Java.g and ver.jar
Message-ID: <4A37CDDD.5000406@bahj.com>

Hello, all!  I have just downloaded the Java 1.6 grammar from the ANTLR 
site in hopes of performing some modifications for research purposes.  I 
am new to ANTLR, so the customary apologies for any silly queries 
applies.  :)  My issue is that the Java.g file provided on antlr.org 
contains the following comment:

 /*
    This is a merged file, containing two versions of the Java.g grammar.
    To extract a version from the file, run the ver.jar with the command 
provided below.
   
    Version 1 - tree building version, with all source level support, 
error recovery etc.
                This is the version for compiler grammar workspace.
                This version can be extracted by invoking:
                java -cp ver.jar Main 1 true true true true true Java.g
                            
    Version 2 - clean version, with no source leve support, no error 
recovery, no predicts,
                assumes 1.6 level, works in Antlrworks.
                This is the version for Alex.
                This version can be extracted by invoking:
                java -cp ver.jar Main 2 false false false false false 
Java.g
*/

It appears that this grammar file is used in a branch of the OpenJDK 
project, but the version I located on their site did not contain this 
comment; therefore, I am left to believe that it was inserted by the 
most recent author, Yang Jiang.  My trouble is that I have searched the 
OpenJDK project, ANTLR, and ANTLRWorks for a file named ver.jar to no avail.

When I try to load the grammar as-is into ANTLRWorks, I get a host of 
warnings of the following form:

[10:50:11] warning(209): Java.g:1771:1: Multiple token rules can match 
input such as "'*'": STAR, STAREQ

As a result, token(s) STAREQ were disabled for that input
[10:50:11] warning(209): Java.g:1811:1: Multiple token rules can match 
input such as "'i'": IF, IMPLEMENTS, IMPORT, INSTANCEOF, INT, INTERFACE, 
IDENTIFIER

As a result, token(s) 
IMPLEMENTS,IMPORT,INSTANCEOF,INT,INTERFACE,IDENTIFIER were disabled for 
that input

This eventually culminates in the following error:

[10:50:15] error(208): /home/zpalmer/research/Java.g:1799:1: The 
following token definitions can never be matched because prior tokens 
match the same input: 
INTLITERAL,DOUBLELITERAL,LINE_COMMENT,ASSERT,BREAK,BYTE,CATCH,CHAR,CLASS,CONST,CONTINUE,DO,DOUBLE,ENUM,EXTENDS,FINALLY,FLOAT,FOR,IMPLEMENTS,IMPORT,INSTANCEOF,INT,INTERFACE,NEW,PRIVATE,PROTECTED,PUBLIC,STATIC,STRICTFP,SUPER,SWITCH,SYNCHRONIZED,THROW,THROWS,TRANSIENT,TRY,VOLATILE,TRUE,FALSE,NULL,DOT,ELLIPSIS,EQEQ,PLUS,SUB,SLASH,AMP,BAR,PLUSEQ,SUBEQ,STAREQ,SLASHEQ,AMPEQ,BAREQ,CARETEQ,PERCENTEQ,BANGEQ

I'm at a loss as to how to proceed.  I would use the unmodified version 
of Java.g from the OpenJDK site, but it appears that the version hosted 
on the ANTLR website contains some valuable bug fixes.  Can anyone 
suggest a course of action or point me to a resource that might explain 
the above-described behavior?

Cheers,

Zachary Palmer


From damien.cassou at gmail.com  Tue Jun 16 09:57:39 2009
From: damien.cassou at gmail.com (Damien Cassou)
Date: Tue, 16 Jun 2009 18:57:39 +0200
Subject: [antlr-interest] Changing directory of tokens file
Message-ID: <6ac749c10906160957j65c54257ra5633e41514f072f@mail.gmail.com>

Hi,

is it possible to pass an option to Antlr to tell him where to
generate the .tokens files? Currently, they are put along with the
java files. I would like to change that.

Thank you

-- 
Damien Cassou
http://damiencassou.seasidehosting.st

"Lambdas are relegated to relative obscurity until Java makes them
popular by not having them." James Iry

From aheller at gmx.at  Tue Jun 16 09:59:54 2009
From: aheller at gmx.at (Arnulf Heller)
Date: Tue, 16 Jun 2009 18:59:54 +0200
Subject: [antlr-interest] stringtemplate & tree walkers
Message-ID: <20090616170003.SEEZ23539.viefep13-int.chello.at@edge01.upc.biz>

hi there,

are there any complex examples of tree walkers emitting stringtemplates?

What I want to do is to generate C++ header and implementation files 
with forward declarations etc
This means that names might show up in multiple places in the resulting files.

here is a small example:

walker:

module
	: ^(R n=IDENT) -> R(name={$n})
	;

header file:
#include "<R>.h"

class <R>; // ok, no one would do that ...

class <R> : public <R>
{
	R	r1;
	R*	r2;
};


I know that I can build up data structures in the walker, finally 
triggering a global stringtemplate (as far as I know this is what 
happens in the ANTLR backend).
The stringtemplate in this case would look pretty much like the 
header file above.

But how can I do that with the "->" semantics in the walker? Do I 
need multiple passes then, replacing the string template group file 
and collecting the results afterwards?

thx


From parrt at cs.usfca.edu  Tue Jun 16 11:17:35 2009
From: parrt at cs.usfca.edu (Terence Parr)
Date: Tue, 16 Jun 2009 11:17:35 -0700
Subject: [antlr-interest] stringtemplate & tree walkers
In-Reply-To: <20090616170003.SEEZ23539.viefep13-int.chello.at@edge01.upc.biz>
References: <20090616170003.SEEZ23539.viefep13-int.chello.at@edge01.upc.biz>
Message-ID: <068CF8FD-C1E6-4423-B0ED-78A0F5FBBC43@cs.usfca.edu>


On Jun 16, 2009, at 9:59 AM, Arnulf Heller wrote:

> hi there,
>
> are there any complex examples of tree walkers emitting  
> stringtemplates?

The source of antlr itself :)

Ter



From JALuber at gmx.de  Tue Jun 16 14:10:50 2009
From: JALuber at gmx.de (Johannes Luber)
Date: Tue, 16 Jun 2009 23:10:50 +0200
Subject: [antlr-interest] CSharp2 -debug generation bug
In-Reply-To: <COL113-W9183E8927F25ED4C5F44F923F0@phx.gbl>
References: <COL113-W9183E8927F25ED4C5F44F923F0@phx.gbl>
Message-ID: <20090616211050.273140@gmx.net>

> The following grammar compiles fine under ANTLR 3.1.3 except if you use
> the -debug option, in which case it throws an exception during generation.
> Exception trace follows.
> 
> The culprit line is:
> message: unhSegment bgmSegment segment+ linLoop untSegment -> ^(MESSAGE
> unhSegment bgmSegment segment+ linLoop untSegment) ;
> 
> On this line, I added linLoop on both sides. linLoop in turn references
> segment+, which I suspect might be the problem. However, this grammar appears
> to generate okay when -debug is off. (The grammar is functionally flawed,
> but in any case it should not cause an exception for ANTLR to generate the
> parser from it.)
> 
> 
> Thanks,
> Rob

Testing with both the Java CSharp2 targets results in the following error for me:

error(10):  internal error: Test.g : java.util.NoSuchElementException: no such a
ttribute: description in template context [outputFile parser genericParser(...)
cyclicDFA if(dfa.specialStateSTs)_subtemplate anonymous cyclicDFAState cyclicDFA
Edge notPredicate evalPredicate(...)]
org.antlr.stringtemplate.StringTemplate.checkNullAttributeAgainstFormalArguments
(StringTemplate.java:1276)
org.antlr.stringtemplate.StringTemplate.get(StringTemplate.java:800)
org.antlr.stringtemplate.StringTemplate.get(StringTemplate.java:798)
org.antlr.stringtemplate.StringTemplate.get(StringTemplate.java:798)
org.antlr.stringtemplate.StringTemplate.get(StringTemplate.java:798)
org.antlr.stringtemplate.StringTemplate.get(StringTemplate.java:798)
org.antlr.stringtemplate.StringTemplate.get(StringTemplate.java:798)
org.antlr.stringtemplate.StringTemplate.get(StringTemplate.java:798)
org.antlr.stringtemplate.StringTemplate.get(StringTemplate.java:798)
org.antlr.stringtemplate.StringTemplate.get(StringTemplate.java:798)
org.antlr.stringtemplate.StringTemplate.getAttribute(StringTemplate.java:682)
org.antlr.stringtemplate.language.ActionEvaluator.attribute(ActionEvaluator.java
:360)
org.antlr.stringtemplate.language.ActionEvaluator.expr(ActionEvaluator.java:136)

org.antlr.stringtemplate.language.ActionEvaluator.action(ActionEvaluator.java:84
)
org.antlr.stringtemplate.language.ASTExpr.write(ASTExpr.java:148)
org.antlr.stringtemplate.StringTemplate.write(StringTemplate.java:700)
org.antlr.stringtemplate.language.ASTExpr.write(ASTExpr.java:722)
org.antlr.stringtemplate.language.ASTExpr.writeAttribute(ASTExpr.java:659)
org.antlr.stringtemplate.language.ActionEvaluator.action(ActionEvaluator.java:86
)
org.antlr.stringtemplate.language.ASTExpr.write(ASTExpr.java:148)
org.antlr.stringtemplate.StringTemplate.write(StringTemplate.java:700)
org.antlr.stringtemplate.language.ASTExpr.write(ASTExpr.java:722)
org.antlr.stringtemplate.language.ASTExpr.writeAttribute(ASTExpr.java:659)
org.antlr.stringtemplate.language.ActionEvaluator.action(ActionEvaluator.java:86
)
org.antlr.stringtemplate.language.ASTExpr.write(ASTExpr.java:148)
org.antlr.stringtemplate.StringTemplate.write(StringTemplate.java:700)
org.antlr.stringtemplate.language.ASTExpr.write(ASTExpr.java:722)
org.antlr.stringtemplate.language.ASTExpr.write(ASTExpr.java:742)
org.antlr.stringtemplate.language.ASTExpr.writeAttribute(ASTExpr.java:659)
org.antlr.stringtemplate.language.ActionEvaluator.action(ActionEvaluator.java:86
)
org.antlr.stringtemplate.language.ASTExpr.write(ASTExpr.java:148)
org.antlr.stringtemplate.StringTemplate.write(StringTemplate.java:700)
org.antlr.stringtemplate.language.ASTExpr.write(ASTExpr.java:722)
org.antlr.stringtemplate.language.ASTExpr.writeAttribute(ASTExpr.java:659)
org.antlr.stringtemplate.language.ActionEvaluator.action(ActionEvaluator.java:86
)
org.antlr.stringtemplate.language.ASTExpr.write(ASTExpr.java:148)
org.antlr.stringtemplate.StringTemplate.write(StringTemplate.java:700)
org.antlr.stringtemplate.language.ASTExpr.write(ASTExpr.java:722)
org.antlr.stringtemplate.language.ASTExpr.write(ASTExpr.java:742)
org.antlr.stringtemplate.language.ASTExpr.writeAttribute(ASTExpr.java:659)
org.antlr.stringtemplate.language.ActionEvaluator.action(ActionEvaluator.java:86
)
org.antlr.stringtemplate.language.ASTExpr.write(ASTExpr.java:148)
org.antlr.stringtemplate.StringTemplate.write(StringTemplate.java:700)
org.antlr.stringtemplate.language.ConditionalExpr.writeSubTemplate(ConditionalEx
pr.java:152)
org.antlr.stringtemplate.language.ConditionalExpr.write(ConditionalExpr.java:103
)
org.antlr.stringtemplate.StringTemplate.write(StringTemplate.java:700)
org.antlr.stringtemplate.language.ASTExpr.write(ASTExpr.java:722)
org.antlr.stringtemplate.language.ASTExpr.write(ASTExpr.java:742)
org.antlr.stringtemplate.language.ASTExpr.writeAttribute(ASTExpr.java:659)
org.antlr.stringtemplate.language.ActionEvaluator.action(ActionEvaluator.java:86
)
org.antlr.stringtemplate.language.ASTExpr.write(ASTExpr.java:148)
org.antlr.stringtemplate.StringTemplate.write(StringTemplate.java:700)
org.antlr.stringtemplate.language.ASTExpr.write(ASTExpr.java:722)
org.antlr.stringtemplate.language.ASTExpr.writeAttribute(ASTExpr.java:659)
org.antlr.stringtemplate.language.ActionEvaluator.action(ActionEvaluator.java:86
)
org.antlr.stringtemplate.language.ASTExpr.write(ASTExpr.java:148)
org.antlr.stringtemplate.StringTemplate.write(StringTemplate.java:700)
org.antlr.stringtemplate.language.ASTExpr.write(ASTExpr.java:722)
org.antlr.stringtemplate.language.ASTExpr.writeAttribute(ASTExpr.java:659)
org.antlr.stringtemplate.language.ActionEvaluator.action(ActionEvaluator.java:86
)
org.antlr.stringtemplate.language.ASTExpr.write(ASTExpr.java:148)
org.antlr.stringtemplate.StringTemplate.write(StringTemplate.java:700)
org.antlr.codegen.CodeGenerator.write(CodeGenerator.java:1278)
org.antlr.codegen.Target.genRecognizerFile(Target.java:94)
org.antlr.codegen.CodeGenerator.genRecognizer(CodeGenerator.java:463)
org.antlr.Tool.generateRecognizer(Tool.java:607)
org.antlr.Tool.process(Tool.java:429)
org.antlr.Tool.main(Tool.java:91)


No idea why I get a different error descritption, but it seems to be an error in all targets.

Johannes

> 
> ====
> 
> grammar Test;
> 
> options {
>   language = 'CSharp2' ;
>   output = AST ;
> }
> 
> tokens {
>     INTERCHANGE;
>     GROUP;
>     MESSAGE;
>     LOOP;
>     SECTION;
>     SEGMENT;
>     ELEMENT;
>     COMPONENT;
> }
> 
> file        : interchange EOF -> interchange;
> 
> interchange: unaSegment? unbSegment group unzSegment -> ^(INTERCHANGE
> unaSegment? unbSegment group unzSegment) ;
> group: ungSegment message+ uneSegment -> ^(GROUP ungSegment message+
> uneSegment) ;
> message: unhSegment bgmSegment segment+ linLoop untSegment -> ^(MESSAGE
> unhSegment bgmSegment segment+ linLoop untSegment) ;
> 
> linLoop: linSection+ -> ^(LOOP linSection+) ;
> linSection: linSegment segment+ -> ^(SECTION linSegment segment+ ) ;
> 
> bgmSegment: tagBGM elements -> ^(SEGMENT tagBGM elements) ;
> linSegment: tagLIN elements -> ^(SEGMENT tagLIN elements) ;
> 
> tagBGM    : { input.LT(1).Text == "BGM" }? TEXT ;
> tagLIN    : { input.LT(1).Text == "LIN" }? TEXT ;
> 
> 
> unaSegment: tagUNA elements -> ^(SEGMENT tagUNA elements) ;
> unbSegment: tagUNB elements -> ^(SEGMENT tagUNB elements) ;
> ungSegment: tagUNG elements -> ^(SEGMENT tagUNG elements) ;
> unhSegment: tagUNH elements -> ^(SEGMENT tagUNH elements) ;
> untSegment: tagUNT elements -> ^(SEGMENT tagUNT elements) ;
> uneSegment: tagUNE elements -> ^(SEGMENT tagUNE elements) ;
> unzSegment: tagUNZ elements -> ^(SEGMENT tagUNZ elements) ;
> 
> tagUNA    : { input.LT(1).Text == "UNA" }? TEXT ;
> tagUNB    : { input.LT(1).Text == "UNB" }? TEXT ;
> tagUNG    : { input.LT(1).Text == "UNG" }? TEXT ;
> tagUNH    : { input.LT(1).Text == "UNH" }? TEXT ;
> tagUNT    : { input.LT(1).Text == "UNT" }? TEXT ;
> tagUNE    : { input.LT(1).Text == "UNE" }? TEXT ;
> tagUNZ    : { input.LT(1).Text == "UNZ" }? TEXT ;
> 
> segment: tag elements -> ^(SEGMENT tag elements);
> //{ Console.WriteLine("Found segment: " + $tag.text); } 
> tag    :    TEXT
>     ;
> 
> ignoredLine    : unknownDiscriminator! elements! ;
> 
> unknownDiscriminator: TEXT;
> 
>         
> elements        : element* terminator! ;
> element        : ELEMENT_SEPARATOR t=components? -> ^(ELEMENT $t?) ;
> components    : comp1 comp2* ;
> 
> comp2        : COMPONENT_SEPARATOR t=TEXT? -> ^(COMPONENT $t?)
>     ;
> 
> comp1        : t=TEXT -> ^(COMPONENT $t)
>         | COMPONENT_SEPARATOR t=TEXT? -> ^(COMPONENT) ^(COMPONENT $t?) ;
> 
> terminator    : SEGMENT_TERMINATOR ;
> 
> //terminator    : (EOL | WS)+ ;
> 
> SEGMENT_TERMINATOR: '\'';
> ELEMENT_SEPARATOR: '+';
> COMPONENT_SEPARATOR:  ':';
> //TEXT: ('a'..'z'|'A'..'Z'|'0'..'9'|' '|'-'|','|'.'|'/'|'?')+ ;
> TEXT: ('a'..'z'|'A'..'Z'|'0'..'9'|' '|'-'|','|'.'|'/'|ESCAPE)+ ;
> fragment ESCAPE : '?' . ;
> 
> WS: ('\r'? '\n')+ { $channel = 99; }  ;
> 
> ====
> error(10):  internal error: <<OMITTED>>.g :
> java.util.NoSuchElementException: no such attribute: description in template context [out
> putFile parser genericParser(...) cyclicDFA
> if(dfa.specialStateSTs)_subtemplate anonymous cyclicDFAState cyclicDFAEdge notPredicate eva
> lPredicate(...)]
> org.antlr.stringtemplate.StringTemplate.checkNullAttributeAgainstFormalArguments(StringTemplate.java:1276)
> org.antlr.stringtemplate.StringTemplate.get(StringTemplate.java:800)
> org.antlr.stringtemplate.StringTemplate.get(StringTemplate.java:798)
> org.antlr.stringtemplate.StringTemplate.get(StringTemplate.java:798)
> org.antlr.stringtemplate.StringTemplate.get(StringTemplate.java:798)
> org.antlr.stringtemplate.StringTemplate.get(StringTemplate.java:798)
> org.antlr.stringtemplate.StringTemplate.get(StringTemplate.java:798)
> org.antlr.stringtemplate.StringTemplate.get(StringTemplate.java:798)
> org.antlr.stringtemplate.StringTemplate.get(StringTemplate.java:798)
> org.antlr.stringtemplate.StringTemplate.get(StringTemplate.java:798)
> org.antlr.stringtemplate.StringTemplate.getAttribute(StringTemplate.java:682)
> org.antlr.stringtemplate.language.ActionEvaluator.attribute(ActionEvaluator.java:360)
> org.antlr.stringtemplate.language.ActionEvaluator.expr(ActionEvaluator.java:136)
> org.antlr.stringtemplate.language.ActionEvaluator.action(ActionEvaluator.java:84)
> org.antlr.stringtemplate.language.ASTExpr.write(ASTExpr.java:148)
> org.antlr.stringtemplate.StringTemplate.write(StringTemplate.java:700)
> org.antlr.stringtemplate.language.ASTExpr.write(ASTExpr.java:722)
> org.antlr.stringtemplate.language.ASTExpr.writeAttribute(ASTExpr.java:659)
> org.antlr.stringtemplate.language.ActionEvaluator.action(ActionEvaluator.java:86)
> org.antlr.stringtemplate.language.ASTExpr.write(ASTExpr.java:148)
> org.antlr.stringtemplate.StringTemplate.write(StringTemplate.java:700)
> org.antlr.stringtemplate.language.ASTExpr.write(ASTExpr.java:722)
> org.antlr.stringtemplate.language.ASTExpr.writeAttribute(ASTExpr.java:659)
> org.antlr.stringtemplate.language.ActionEvaluator.action(ActionEvaluator.java:86)
> org.antlr.stringtemplate.language.ASTExpr.write(ASTExpr.java:148)
> org.antlr.stringtemplate.StringTemplate.write(StringTemplate.java:700)
> org.antlr.stringtemplate.language.ASTExpr.write(ASTExpr.java:722)
> org.antlr.stringtemplate.language.ASTExpr.write(ASTExpr.java:742)
> org.antlr.stringtemplate.language.ASTExpr.writeAttribute(ASTExpr.java:659)
> org.antlr.stringtemplate.language.ActionEvaluator.action(ActionEvaluator.java:86)
> org.antlr.stringtemplate.language.ASTExpr.write(ASTExpr.java:148)
> org.antlr.stringtemplate.StringTemplate.write(StringTemplate.java:700)
> org.antlr.stringtemplate.language.ASTExpr.write(ASTExpr.java:722)
> org.antlr.stringtemplate.language.ASTExpr.writeAttribute(ASTExpr.java:659)
> org.antlr.stringtemplate.language.ActionEvaluator.action(ActionEvaluator.java:86)
> org.antlr.stringtemplate.language.ASTExpr.write(ASTExpr.java:148)
> org.antlr.stringtemplate.StringTemplate.write(StringTemplate.java:700)
> org.antlr.stringtemplate.language.ASTExpr.write(ASTExpr.java:722)
> org.antlr.stringtemplate.language.ASTExpr.write(ASTExpr.java:742)
> org.antlr.stringtemplate.language.ASTExpr.writeAttribute(ASTExpr.java:659)
> org.antlr.stringtemplate.language.ActionEvaluator.action(ActionEvaluator.java:86)
> org.antlr.stringtemplate.language.ASTExpr.write(ASTExpr.java:148)
> org.antlr.stringtemplate.StringTemplate.write(StringTemplate.java:700)
> org.antlr.stringtemplate.language.ConditionalExpr.writeSubTemplate(ConditionalExpr.java:152)
> org.antlr.stringtemplate.language.ConditionalExpr.write(ConditionalExpr.java:103)
> org.antlr.stringtemplate.StringTemplate.write(StringTemplate.java:700)
> org.antlr.stringtemplate.language.ASTExpr.write(ASTExpr.java:722)
> org.antlr.stringtemplate.language.ASTExpr.write(ASTExpr.java:742)
> org.antlr.stringtemplate.language.ASTExpr.writeAttribute(ASTExpr.java:659)
> org.antlr.stringtemplate.language.ActionEvaluator.action(ActionEvaluator.java:86)
> org.antlr.stringtemplate.language.ASTExpr.write(ASTExpr.java:148)
> org.antlr.stringtemplate.StringTemplate.write(StringTemplate.java:700)
> org.antlr.stringtemplate.language.ASTExpr.write(ASTExpr.java:722)
> org.antlr.stringtemplate.language.ASTExpr.writeAttribute(ASTExpr.java:659)
> org.antlr.stringtemplate.language.ActionEvaluator.action(ActionEvaluator.java:86)
> org.antlr.stringtemplate.language.ASTExpr.write(ASTExpr.java:148)
> org.antlr.stringtemplate.StringTemplate.write(StringTemplate.java:700)
> org.antlr.stringtemplate.language.ASTExpr.write(ASTExpr.java:722)
> org.antlr.stringtemplate.language.ASTExpr.writeAttribute(ASTExpr.java:659)
> org.antlr.stringtemplate.language.ActionEvaluator.action(ActionEvaluator.java:86)
> org.antlr.stringtemplate.language.ASTExpr.write(ASTExpr.java:148)
> org.antlr.stringtemplate.StringTemplate.write(StringTemplate.java:700)
> org.antlr.codegen.CodeGenerator.write(CodeGenerator.java:1278)
> org.antlr.codegen.Target.genRecognizerFile(Target.java:94)
> org.antlr.codegen.CodeGenerator.genRecognizer(CodeGenerator.java:463)
> org.antlr.Tool.generateRecognizer(Tool.java:607)
> org.antlr.Tool.process(Tool.java:429)
> org.antlr.Tool.main(Tool.java:91)
> 
> 
> _________________________________________________________________
> We are your photos. Share us now with Windows Live Photos.
> http://go.microsoft.com/?linkid=9666047

-- 
GRATIS f?r alle GMX-Mitglieder: Die maxdome Movie-FLAT!
Jetzt freischalten unter http://portal.gmx.net/de/go/maxdome01

From jimi at temporal-wave.com  Tue Jun 16 16:35:51 2009
From: jimi at temporal-wave.com (Jim Idle)
Date: Tue, 16 Jun 2009 18:35:51 -0500
Subject: [antlr-interest] [ANTLR C 3.1.3] Error when parsing
	international characters
In-Reply-To: <FDEE38BB-E69E-461A-A4FF-EDB671D74C8B@codefutures.com>
References: <F38A6A3A-3689-45BF-9EF1-7DD93618A6E8@codefutures.com>
	<3BC09123-E02A-4FF8-9C8A-B0A98EA78D2E@temporal-wave.com>
	<FDEE38BB-E69E-461A-A4FF-EDB671D74C8B@codefutures.com>
Message-ID: <07D419B3-8C96-4214-A3FC-9E0ED58BF606@temporal-wave.com>

Andy,

I think your likely issues are:

1) as mentioned earlier the length you are passing in is in bytes and  
the stream needs number of 16 bit chars ;
2) the encoding isn't what you think it is and the 16 bit characters  
are whacked enough to blow your lexer. Make sure you have a catch all  
ANY token listed last in your lexer :

ANY : . { printf("some message"); } ;

3) the memory you are passing is not converted to 16 bit correctly  
using the calls you have here.

Something else.

Sorry I can't get much further but trying to do everything by iPhone  
is a bit tricky.

Jim

On Jun 16, 2009, at 11:18 AM, Andy Grove <andy.grove at codefutures.com>  
wrote:
> Jim,
>
> Thanks. I've attempted to use the UCS input stream with this code:
>
> SymbolTable* SQLParser::parse(std::string sql) {
>
> 	....
>
> 	std::wstring wsql(sql.begin(), sql.end());
> 	const wchar_t *wsqlchars = wsql.c_str();
> 	input = antlr3NewUCS2StringInPlaceStream((pANTLR3_UINT16)wsqlchars,  
> wsql.length(), NULL);
>
> 	...
>
> }
>
> Am I even close with this? It compiles OK but now when I run my test  
> the app becomes unresponsive and consumes all the available RAM.
>
> Thanks,
>
> Andy.
>
>
> On Jun 16, 2009, at 9:21 AM, Jim Idle wrote:
>
>> You need the UCS version of the input stream or write a utf32 input  
>> stream and use to pre-supplied UTF8 to UTF32 conversion routine.
>>
>> If you can wait until next reLease I will be supplying these ready  
>> made but they are not difficult to produce, just copy the others.  
>> Internally the euntime uses 32 bit unicode and dies not care how  
>> you provide these.
>>
>> Jim
>>
>> On Jun 16, 2009, at 9:20 AM, Andy Grove  
>> <andy.grove at codefutures.com> wrote:
>>
>>> I have a SQL parser that is working fine with standard ASCII  
>>> characters but if I try and insert data containing international  
>>> characters such as:
>>>
>>> "INSERT INTO customer (username, password, title, first_name,  
>>> last_name, addr_line1, addr_line2, addr_city, addr_state,  
>>> country_id) VALUES (''username123', 'password', 'Mr', 'T?st', 'T 
>>> est', 'Test', 'Test', 'Test', 'TE', 1)"
>>>
>>> I get this error:
>>>
>>> -memory-(1) : lexer error 1 :
>>> 	Unexpected character at offset 179, near char(0XC3) :
>>> 	?st', 'Test', 'Test
>>>
>>> Here is my setup code:
>>>
>>> 	input =  
>>> antlr3NewAsciiStringInPlaceStream((pANTLR3_UINT8)stringCopy, l,  
>>> NULL);
>>> 	lexer = DbsMySQL_CPPLexerNew(input);
>>> 	tstream = antlr3CommonTokenStreamSourceNew(ANTLR3_SIZE_HINT,  
>>> lexer->pLexer->rec->state->tokSource);
>>> 	parser = DbsMySQL_CPPParserNew(tstream);
>>>
>>> Do I need to specify the character set somewhere?
>>>
>>> Thanks,
>>>
>>> Andy.
>>>
>>> ---
>>> Andy Grove
>>> Chief Architect
>>> CodeFutures Corporation
>>> "Share Nothing. Shard Everything."
>>>
>>> Cell:    (303) 720-1285
>>> E-Fax:   (303) 395-0426
>>> Web:     http://www.codefutures.com/
>>> Twitter: http://twitter.com/andygrove73
>>>
>>>
>>>
>>>
>>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>>> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>
> t">http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>
> /html>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090616/6aa3d8e8/attachment.html 

From r.bharath at huawei.com  Tue Jun 16 21:20:02 2009
From: r.bharath at huawei.com (Bharath R)
Date: Wed, 17 Jun 2009 09:50:02 +0530
Subject: [antlr-interest] AntLR 3 is not validating the LAST character.
Message-ID: <00cc01c9ef02$e36267e0$2001120a@china.huawei.com>

Hi All 
 
I am facing an issue while parsing the last character of my input. 
 
Even if i give an invalid character at the last the parser is not throwing
the exception. 
 
The below is my grammar :- 
 
// *************************** 
grammar test;
 
globalnumber : phonedigit (NEWLINE)* ;
 
phonedigit : (DIGIT)* ; 
 
NEWLINE : '\n' ;
 
DIGIT : (0-9)
 
ALPHA : ('a'-'z') | ('A'-'Z'); 
 
// *************************** 
 
Here if we notice that the NEWLINE is an optional rule. , when I give the
input as " 12345a " for the rule "globalnumber" then the parser is not
throwing 
any exception. i checked the parser code its just consuming those tokens .
:-( 
 
When I make the NEWLINE as mandatory then its working fine. but i dont want
that to be a mandatory RULE. 
 
Thanx a lot for reading this query expecting your response. 
 
Regards
Bharath R 

HUAWEI TECHNOLOGIES CO.,LTD. huawei_logo 


Address: Huawei Industrial Base
Bantian Longgang
Shenzhen 518129, P.R.China
www.huawei.com
----------------------------------------------------------------------------
---------------------------------------------------------
This e-mail and its attachments contain confidential information from
HUAWEI, which 
is intended only for the person or entity whose address is listed above. Any
use of the 
information contained herein in any way (including, but not limited to,
total or partial 
disclosure, reproduction, or dissemination) by persons other than the
intended 
recipient(s) is prohibited. If you receive this e-mail in error, please
notify the sender by 
phone or email immediately and delete it!

 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090617/3d42449e/attachment.html 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: outlook_huawei_logo_en.jpg
Type: image/jpeg
Size: 6737 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20090617/3d42449e/attachment.jpg 

From vasanthi.ak at gmail.com  Wed Jun 17 05:09:47 2009
From: vasanthi.ak at gmail.com (vasanthi a)
Date: Wed, 17 Jun 2009 17:39:47 +0530
Subject: [antlr-interest] Get the list of all the functions in a file
	(c/c++/java)
Message-ID: <307cfdc90906170509v6b750c33id06cd6ff4e26e924@mail.gmail.com>

HI All

Can you please give me Java Grammar to list all the functions in a file.
I have a UI which selects the Java file and when I pass through the grammar
I need to get the list of functions present in a file to be returned.

Can you please tell me how to achieve this in ANTLR 1.2 java grammar

Vasanthi.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090617/437def86/attachment.html 

From jimi at temporal-wave.com  Wed Jun 17 06:10:28 2009
From: jimi at temporal-wave.com (Jim Idle)
Date: Wed, 17 Jun 2009 08:10:28 -0500
Subject: [antlr-interest] AntLR 3 is not validating the LAST character.
In-Reply-To: <00cc01c9ef02$e36267e0$2001120a@china.huawei.com>
References: <00cc01c9ef02$e36267e0$2001120a@china.huawei.com>
Message-ID: <D799965F-1F1F-4D3F-B26A-A0F5F4EB73CE@temporal-wave.com>

You need to add EOF token as last element of your start rule.

Jim

On Jun 16, 2009, at 11:20 PM, Bharath R <r.bharath at huawei.com> wrote:

> Hi All
>
> I am facing an issue while parsing the last character of my input.
>
> Even if i give an invalid character at the last the parser is not  
> throwing the exception.
>
> The below is my grammar :-
>
> // ***************************
> grammar test;
>
> globalnumber : phonedigit (NEWLINE)* ;
>
> phonedigit : (DIGIT)* ;
>
> NEWLINE : '\n' ;
>
> DIGIT : (0-9)
>
> ALPHA : ('a'-'z') | ('A'-'Z');
>
> // ***************************
>
> Here if we notice that the NEWLINE is an optional rule. , when I  
> give the input as " 12345a " for the rule "globalnumber" then the  
> parser is not throwing
> any exception. i checked the parser code its just consuming those  
> tokens .  :-(
>
> When I make the NEWLINE as mandatory then its working fine. but i  
> dont want that to be a mandatory RULE.
>
> Thanx a lot for reading this query expecting your response.
>
> Regards
> Bharath R
> HUAWEI TECHNOLOGIES CO.,LTD. <outlook_huawei_logo_en.jpg>
>
> Address: Huawei Industrial Base
> Bantian Longgang
> Shenzhen 518129, P.R.China
> www.huawei.com
> --- 
> --- 
> --- 
> --- 
> --- 
> --- 
> --- 
> --- 
> --- 
> --- 
> --- 
> --- 
> --- 
> --- 
> --- 
> --- 
> --- 
> --- 
> --- 
> --- 
> --- 
> ----------------------------------------------------------------------
> This e-mail and its attachments contain confidential information  
> from HUAWEI, which
> is intended only for the person or entity whose address is listed  
> above. Any use of the
> information contained herein in any way (including, but not limited  
> to, total or partial
> disclosure, reproduction, or dissemination) by persons other than  
> the intended
> recipient(s) is prohibited. If you receive this e-mail in error,  
> please notify the sender by
> phone or email immediately and delete it!
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090617/d7eac573/attachment.html 

From dave at tridecap.com  Wed Jun 17 06:11:50 2009
From: dave at tridecap.com (Dave Dutcher)
Date: Wed, 17 Jun 2009 08:11:50 -0500
Subject: [antlr-interest] AntLR 3 is not validating the LAST character.
In-Reply-To: <00cc01c9ef02$e36267e0$2001120a@china.huawei.com>
References: <00cc01c9ef02$e36267e0$2001120a@china.huawei.com>
Message-ID: <48352C94451C4EE89C2E0BA72B843F03@tridecap.com>

There is a special EOF token you use to mark where the input should end.
This would probably work:
 
 
globalnumber : phonedigit (NEWLINE)* EOF;
 
 
 
Dave
 


  _____  

From: antlr-interest-bounces at antlr.org
[mailto:antlr-interest-bounces at antlr.org] On Behalf Of Bharath R
Sent: Tuesday, June 16, 2009 11:20 PM
To: antlr-interest at antlr.org
Subject: [antlr-interest] AntLR 3 is not validating the LAST character.


Hi All 
 
I am facing an issue while parsing the last character of my input. 
 
Even if i give an invalid character at the last the parser is not throwing
the exception. 
 
The below is my grammar :- 
 
// *************************** 
grammar test;
 
globalnumber : phonedigit (NEWLINE)* ;
 
phonedigit : (DIGIT)* ; 
 
NEWLINE : '\n' ;
 
DIGIT : (0-9)
 
ALPHA : ('a'-'z') | ('A'-'Z'); 
 

// *************************** 
 
Here if we notice that the NEWLINE is an optional rule. , when I give the
input as " 12345a " for the rule "globalnumber" then the parser is not
throwing 
any exception. i checked the parser code its just consuming those tokens .
:-( 
 
When I make the NEWLINE as mandatory then its working fine. but i dont want
that to be a mandatory RULE. 
 
Thanx a lot for reading this query expecting your response. 
 
Regards
Bharath R 





HUAWEI TECHNOLOGIES CO.,LTD. huawei_logo 




Address: Huawei Industrial Base
Bantian Longgang
Shenzhen 518129, P.R.China
www.huawei.com
----------------------------------------------------------------------------
---------------------------------------------------------
This e-mail and its attachments contain confidential information from
HUAWEI, which 
is intended only for the person or entity whose address is listed above. Any
use of the 
information contained herein in any way (including, but not limited to,
total or partial 
disclosure, reproduction, or dissemination) by persons other than the
intended 
recipient(s) is prohibited. If you receive this e-mail in error, please
notify the sender by 
phone or email immediately and delete it!

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090617/09a43ef8/attachment.html 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: image/jpeg
Size: 6737 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20090617/09a43ef8/attachment.jpe 

From oehrstroem at gmail.com  Wed Jun 17 07:19:28 2009
From: oehrstroem at gmail.com (Fredrik Ohrstrom)
Date: Wed, 17 Jun 2009 16:19:28 +0200
Subject: [antlr-interest] Question about example Ansi C grammar for antlr v3
Message-ID: <8d80b1570906170719t7f2459e3j71c6b4c8d5c4ad6f@mail.gmail.com>

Sadly enough ;-) , the following c-code compiles both using gcc and cl.exe

---------------
typedef int alfa;
typedef int beta;

struct { struct { int z; } alfa; } c;

int main(int alfa)
{
   beta beta;
}
---------------

The example antlv3 c-parser found on the antlr homepage will wrongly
parse the alfa inside the struct as a type_id and not a direct_declarator.
In the same way it wrongly parses the argument alfa and the function local beta.

I have tried to extend the grammar to fix this, unfortunately I have not
been able to solve all the cases in the example, only the arg and
local var case.

What is the correct way of solving this?

//Fredrik

From iztok.kavkler at fmf.uni-lj.si  Wed Jun 17 08:28:05 2009
From: iztok.kavkler at fmf.uni-lj.si (Iztok Kavkler)
Date: Wed, 17 Jun 2009 17:28:05 +0200
Subject: [antlr-interest] Recovering from semantic errors
Message-ID: <4A390B85.1090505@fmf.uni-lj.si>

I have a problem that occurs in my tree parser. When I have the rule 
like the following:

statement: something1 { action1 } something2 { action2 } ;
	catch [Exception e] { printError(e); }

Then when action1 throws a (semantic) exception, I don't want to do 
anything (if everything went ok, the actions would emit some code, but 
since there was an exception I just print out the error message and do 
nothing).

However, the tokens that should be matched by something2 will be left in 
the tree token stream, which will break the parsing of subsequent 
statements. Is there a way to tell the tree parser to recover from this?

From r.bharath at huawei.com  Wed Jun 17 09:52:58 2009
From: r.bharath at huawei.com (Bharath R)
Date: Wed, 17 Jun 2009 22:22:58 +0530
Subject: [antlr-interest] AntLR 3 is not validating the LAST character.
In-Reply-To: <D799965F-1F1F-4D3F-B26A-A0F5F4EB73CE@temporal-wave.com>
References: <00cc01c9ef02$e36267e0$2001120a@china.huawei.com>
	<D799965F-1F1F-4D3F-B26A-A0F5F4EB73CE@temporal-wave.com>
Message-ID: <00f101c9ef6c$12254a70$2001120a@china.huawei.com>

Hi Jim and Dave , 
 
Thanx a lot !!! 
It works after adding EOF as the last element of my start rule !! 
 
Regards
Bharath R 

HUAWEI TECHNOLOGIES CO.,LTD. huawei_logo 


Address: Huawei Industrial Base
Bantian Longgang
Shenzhen 518129, P.R.China
www.huawei.com
----------------------------------------------------------------------------
---------------------------------------------------------
This e-mail and its attachments contain confidential information from
HUAWEI, which 
is intended only for the person or entity whose address is listed above. Any
use of the 
information contained herein in any way (including, but not limited to,
total or partial 
disclosure, reproduction, or dissemination) by persons other than the
intended 
recipient(s) is prohibited. If you receive this e-mail in error, please
notify the sender by 
phone or email immediately and delete it!

 

  _____  

From: Jim Idle [mailto:jimi at temporal-wave.com] 
Sent: Wednesday, June 17, 2009 6:40 PM
To: r.bharath at huawei.com
Cc: antlr-interest
Subject: Re: [antlr-interest] AntLR 3 is not validating the LAST character.


You need to add EOF token as last element of your start rule.

Jim

On Jun 16, 2009, at 11:20 PM, Bharath R <r.bharath at huawei.com> wrote:



Hi All 
 
I am facing an issue while parsing the last character of my input. 
 
Even if i give an invalid character at the last the parser is not throwing
the exception. 
 
The below is my grammar :- 
 
// *************************** 
grammar test;
 
globalnumber : phonedigit (NEWLINE)* ;
 
phonedigit : (DIGIT)* ; 
 
NEWLINE : '\n' ;
 
DIGIT : (0-9)
 
ALPHA : ('a'-'z') | ('A'-'Z'); 
 

// *************************** 
 
Here if we notice that the NEWLINE is an optional rule. , when I give the
input as " 12345a " for the rule "globalnumber" then the parser is not
throwing 
any exception. i checked the parser code its just consuming those tokens .
:-( 
 
When I make the NEWLINE as mandatory then its working fine. but i dont want
that to be a mandatory RULE. 
 
Thanx a lot for reading this query expecting your response. 
 
Regards
Bharath R 





HUAWEI TECHNOLOGIES CO.,LTD. <outlook_huawei_logo_en.jpg> 




Address: Huawei Industrial Base
Bantian Longgang
Shenzhen 518129, P.R.China
www.huawei.com
----------------------------------------------------------------------------
---------------------------------------------------------
This e-mail and its attachments contain confidential information from
HUAWEI, which 
is intended only for the person or entity whose address is listed above. Any
use of the 
information contained herein in any way (including, but not limited to,
total or partial 
disclosure, reproduction, or dissemination) by persons other than the
intended 
recipient(s) is prohibited. If you receive this e-mail in error, please
notify the sender by 
phone or email immediately and delete it!

 


List:  <http://www.antlr.org/mailman/listinfo/antlr-interest>
http://www.antlr.org/mailman/listinfo/antlr-interest
Unsubscribe:
<http://www.antlr.org/mailman/options/antlr-interest/your-email-address>
http://www.antlr.org/mailman/options/antlr-interest/your-email-address


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090617/5b2d0adf/attachment.html 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: atteb4d3.jpg
Type: image/jpeg
Size: 6737 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20090617/5b2d0adf/attachment.jpg 

From stefan.bischof at deri.org  Wed Jun 17 11:03:09 2009
From: stefan.bischof at deri.org (Stefan Bischof)
Date: Wed, 17 Jun 2009 19:03:09 +0100
Subject: [antlr-interest] Duplicate nodes in different forms
Message-ID: <1245261789.25206.41.camel@nbgal035>

Hi guys!

I'm writing a source to source translator for a XQuery extension with
ANTLR and was very happy so far. I have created an AST and now want to
write a tree parser rewriting our custom parts of that AST to get a pure
XQuery AST. So I've created a tree parser using rewrite=true and
filter=true.

I have some special cases I couldn't find a solution in the book nor by
trying:

I have a list of variables and want to do two things with it
1. just put them there again
2. for every variable in that list: create some more variables with
different prefixes. 

Simplified example what I want to do:

$i=VAR+ -> 
  $i+ 
  VAR[$i, "_" + $i.text]+ 
  VAR[$i, "?_" + $i.text]+

I've tried different variants of that and couldn't get a valid solution.
I either get an Exception (see example at the end): 
  java.lang.IllegalArgumentException: Can't set single child to a list

or the successfully created Java code doesn't compile because a while
loop with an empty condition is generated:

while ( ) and while ( ! ( ) )

So, any ideas how this could be or should be handled?

best regards,
Stefan Bischof

---------------------------

Simplified example for "Can't set single child to a list":

^(INTEGERS INT+) -> INT+

leads to:

java.lang.IllegalArgumentException: Can't set single child to a list
  at org.antlr.runtime.tree.BaseTree.setChild(BaseTree.java:144)
  at
org.antlr.runtime.tree.BaseTreeAdaptor.setChild(BaseTreeAdaptor.java:225)
  at org.antlr.runtime.tree.TreeVisitor.visit(TreeVisitor.java:36)
  at org.antlr.runtime.tree.TreeVisitor.visit(TreeVisitor.java:33)
  at org.antlr.runtime.tree.TreeRewriter.downup(TreeRewriter.java:89)

(so the rewriting itself actually works, but the list can't be added as
a child to the parent node, i assume)

-- 
Stefan Bischof <stefan.bischof at deri.org>
DERI Galway


From vasanthi.ak at gmail.com  Thu Jun 18 03:31:44 2009
From: vasanthi.ak at gmail.com (vasanthi a)
Date: Thu, 18 Jun 2009 16:01:44 +0530
Subject: [antlr-interest] Grammar in java /c and c ++ to identify all the
	functions
Message-ID: <307cfdc90906180331m7cb5a167od7999dd08f7ca0af@mail.gmail.com>

hi all

I need grammar in c,c++ and java for identifying all the functions only, in
the file.
Can you please provide this.

Thanks and Regards
Vasanthi A
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090618/7609479f/attachment.html 

From s.barnett-cormack at lancaster.ac.uk  Thu Jun 18 03:42:22 2009
From: s.barnett-cormack at lancaster.ac.uk (Sam Barnett-Cormack)
Date: Thu, 18 Jun 2009 11:42:22 +0100
Subject: [antlr-interest] Grammar in java /c and c ++ to identify all
 the	functions
In-Reply-To: <307cfdc90906180331m7cb5a167od7999dd08f7ca0af@mail.gmail.com>
References: <307cfdc90906180331m7cb5a167od7999dd08f7ca0af@mail.gmail.com>
Message-ID: <4A3A1A0E.80404@lancaster.ac.uk>

vasanthi a wrote:
> hi all
>  
> I need grammar in c,c++ and java for identifying all the functions only, 
> in the file.

That sounds suspiciously like coursework...

> Can you please provide this.

People generally write their own grammars, or at least *try* to do so. 
Come back here once you've encountered a problem, and had a good bash at 
it. There's lots of docs, lots of example grammars, and a very good book 
available to help you learn.

-- 
Sam Barnett-Cormack

From ranco.marcus at epirion.nl  Thu Jun 18 05:49:41 2009
From: ranco.marcus at epirion.nl (Ranco Marcus)
Date: Thu, 18 Jun 2009 14:49:41 +0200
Subject: [antlr-interest] error when using svn:keywords in comment
Message-ID: <83315D8A233B6E45B9AD4BF153589BB303E79A@sun.epirion.local>

Hi guys,

 

Specifying an svn:keyword like $Id$ in a comment line results in an
error message "reference to attribute outside of a rule: Id". It seems
as if ANTLR does not treat the comment as ordinary plain text. Can
anybody confirm that this is a bug? Is there a workaround for this?

 

@header

{

//  ... header info ...

// $Id$

// 

}

 

Best regards, 

 

Ranco Marcus

Epirion Knowledge Solutions B.V.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090618/663caf55/attachment.html 

From potrto at centrum.cz  Thu Jun 18 06:54:22 2009
From: potrto at centrum.cz (Tomas Potrusil)
Date: Thu, 18 Jun 2009 15:54:22 +0200
Subject: [antlr-interest] [C target] lexer errors not counted
Message-ID: <af7c90190906180654g6cbc80cfm4ed406c8cffc50d8@mail.gmail.com>

Hello,

I've found that lexer errors are not counted. After I invoke my parser
I look at the lxr->pLexer->rec->state->errorCount variable to see
whether there were some lexer errors. But even though there are some
the counter doesn't change. For the parser errors the counting looks
good. It seems to me that in antlr3lexer.c on line 262 [runtime
version 3.1.4 beta], the following is missing:
lexer->rec->state->errorCount++;

I added that to my local copy of runtime and now it behaves as expected.

Regards,
Tomas

From parrt at cs.usfca.edu  Thu Jun 18 11:35:27 2009
From: parrt at cs.usfca.edu (Terence Parr)
Date: Thu, 18 Jun 2009 11:35:27 -0700
Subject: [antlr-interest] error when using svn:keywords in comment
In-Reply-To: <83315D8A233B6E45B9AD4BF153589BB303E79A@sun.epirion.local>
References: <83315D8A233B6E45B9AD4BF153589BB303E79A@sun.epirion.local>
Message-ID: <C61CFB9D-8E26-4146-B1A1-77D693D237FB@cs.usfca.edu>

Try \$
Ter
On Jun 18, 2009, at 5:49 AM, Ranco Marcus wrote:

> Hi guys,
>
> Specifying an svn:keyword like $Id$ in a comment line results in an  
> error message ?reference to attribute outside of a rule: Id?. It  
> seems as if ANTLR does not treat the comment as ordinary plain text.  
> Can anybody confirm that this is a bug? Is there a workaround for  
> this?
>
> @header
> {
> //  ? header info ?
> // $Id$
> //
> }
>
> Best regards,
>
> Ranco Marcus
> Epirion Knowledge Solutions B.V.
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address


From andy.grove at codefutures.com  Thu Jun 18 14:26:13 2009
From: andy.grove at codefutures.com (Andy Grove)
Date: Thu, 18 Jun 2009 15:26:13 -0600
Subject: [antlr-interest] [ANTLR C 3.1.3] Error when parsing
	international characters
In-Reply-To: <07D419B3-8C96-4214-A3FC-9E0ED58BF606@temporal-wave.com>
References: <F38A6A3A-3689-45BF-9EF1-7DD93618A6E8@codefutures.com>
	<3BC09123-E02A-4FF8-9C8A-B0A98EA78D2E@temporal-wave.com>
	<FDEE38BB-E69E-461A-A4FF-EDB671D74C8B@codefutures.com>
	<07D419B3-8C96-4214-A3FC-9E0ED58BF606@temporal-wave.com>
Message-ID: <7B68A6A9-559C-4A94-87A3-65E957732656@codefutures.com>

Jim,

Thanks. I am a step further along now. I used the iconv library to  
convert the UTF-8 input into UCS-2 and then passed that into Antlr's  
UCS2 input stream. I also added the ANY lexer rule as you suggested.  
The generated parser now runs without error but does not seem to match  
anything in the grammar, or at least none of the actions that call  
back into my C code are being called. Do you have any suggestions as  
to what is going wrong?

FYI, here's the code I'm using for setting up the input stream for  
this test.

	iconv_t cd = iconv_open ("UTF-8", "UCS-2");

         char *inbuf = new char[ 8192 ];
         sprintf(inbuf, "%s", sql.c_str());
         size_t insize = strlen(inbuf);

         size_t outsize = 8192;
         char *outbuf = new char[ outsize ];

         size_t s = iconv (cd, &inbuf, &insize, &outbuf, &outsize);

         input =  
antlr3NewUCS2StringInPlaceStream((pANTLR3_UINT16)outbuf, s, NULL);


Thanks,

Andy.


On Jun 16, 2009, at 5:35 PM, Jim Idle wrote:

> Andy,
>
> I think your likely issues are:
>
> 1) as mentioned earlier the length you are passing in is in bytes  
> and the stream needs number of 16 bit chars ;
> 2) the encoding isn't what you think it is and the 16 bit characters  
> are whacked enough to blow your lexer. Make sure you have a catch  
> all ANY token listed last in your lexer :
>
> ANY : . { printf("some message"); } ;
>
> 3) the memory you are passing is not converted to 16 bit correctly  
> using the calls you have here.
>
> Something else.
>
> Sorry I can't get much further but trying to do everything by iPhone  
> is a bit tricky.
>
> Jim
>
> On Jun 16, 2009, at 11:18 AM, Andy Grove  
> <andy.grove at codefutures.com> wrote:
>> Jim,
>>
>> Thanks. I've attempted to use the UCS input stream with this code:
>>
>> SymbolTable* SQLParser::parse(std::string sql) {
>>
>> 	....
>>
>> 	std::wstring wsql(sql.begin(), sql.end());
>> 	const wchar_t *wsqlchars = wsql.c_str();
>> 	input =  
>> antlr3NewUCS2StringInPlaceStream((pANTLR3_UINT16)wsqlchars,  
>> wsql.length(), NULL);
>>
>> 	...
>>
>> }
>>
>> Am I even close with this? It compiles OK but now when I run my  
>> test the app becomes unresponsive and consumes all the available RAM.
>>
>> Thanks,
>>
>> Andy.
>>
>>
>> On Jun 16, 2009, at 9:21 AM, Jim Idle wrote:
>>
>>> You need the UCS version of the input stream or write a utf32  
>>> input stream and use to pre-supplied UTF8 to UTF32 conversion  
>>> routine.
>>>
>>> If you can wait until next reLease I will be supplying these ready  
>>> made but they are not difficult to produce, just copy the others.  
>>> Internally the euntime uses 32 bit unicode and dies not care how  
>>> you provide these.
>>>
>>> Jim
>>>
>>> On Jun 16, 2009, at 9:20 AM, Andy Grove  
>>> <andy.grove at codefutures.com> wrote:
>>>
>>>> I have a SQL parser that is working fine with standard ASCII  
>>>> characters but if I try and insert data containing international  
>>>> characters such as:
>>>>
>>>> "INSERT INTO customer (username, password, title, first_name,  
>>>> last_name, addr_line1, addr_line2, addr_city, addr_state,  
>>>> country_id) VALUES (''username123', 'password', 'Mr', 'T?st',  
>>>> 'Test', 'Test', 'Test', 'Test', 'TE', 1)"
>>>>
>>>> I get this error:
>>>>
>>>> -memory-(1) : lexer error 1 :
>>>> 	Unexpected character at offset 179, near char(0XC3) :
>>>> 	?st', 'Test', 'Test
>>>>
>>>> Here is my setup code:
>>>>
>>>> 	input =  
>>>> antlr3NewAsciiStringInPlaceStream((pANTLR3_UINT8)stringCopy, l,  
>>>> NULL);
>>>> 	lexer = DbsMySQL_CPPLexerNew(input);
>>>> 	tstream = antlr3CommonTokenStreamSourceNew(ANTLR3_SIZE_HINT,  
>>>> lexer->pLexer->rec->state->tokSource);
>>>> 	parser = DbsMySQL_CPPParserNew(tstream);
>>>>
>>>> Do I need to specify the character set somewhere?
>>>>
>>>> Thanks,
>>>>
>>>> Andy.
>>>>
>>>> ---
>>>> Andy Grove
>>>> Chief Architect
>>>> CodeFutures Corporation
>>>> "Share Nothing. Shard Everything."
>>>>
>>>> Cell:    (303) 720-1285
>>>> E-Fax:   (303) 395-0426
>>>> Web:     http://www.codefutures.com/
>>>> Twitter: http://twitter.com/andygrove73
>>>>
>>>>
>>>>
>>>>
>>>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>>>> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>>
>> t">http://www.antlr.org/mailman/listinfo/antlr-interest
>> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>>
>> /html>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090618/4eacf711/attachment.html 

From andy.grove at codefutures.com  Thu Jun 18 14:59:53 2009
From: andy.grove at codefutures.com (Andy Grove)
Date: Thu, 18 Jun 2009 15:59:53 -0600
Subject: [antlr-interest] [ANTLR C 3.1.3] Error when parsing
	international characters
In-Reply-To: <7B68A6A9-559C-4A94-87A3-65E957732656@codefutures.com>
References: <F38A6A3A-3689-45BF-9EF1-7DD93618A6E8@codefutures.com>
	<3BC09123-E02A-4FF8-9C8A-B0A98EA78D2E@temporal-wave.com>
	<FDEE38BB-E69E-461A-A4FF-EDB671D74C8B@codefutures.com>
	<07D419B3-8C96-4214-A3FC-9E0ED58BF606@temporal-wave.com>
	<7B68A6A9-559C-4A94-87A3-65E957732656@codefutures.com>
Message-ID: <3CE45736-7C0F-4DD8-AFA3-330009E1DA8F@codefutures.com>

I realized that I was inadvertently passing zero as the length into  
the input stream. I fixed this and I am passing the correct number of  
characters now. However, the lexer/parser is invoking my ANY catchall  
code for each character in the UCS-2 input stream. Do I need to make  
my grammar UCS-2 format instead of ASCII to match the characters?

The code I am using now:

  iconv_t cd = iconv_open ("UTF-8", "UCS-2");

         char *inbuf = new char[ 8192 ];
         sprintf(inbuf, "%s", sql.c_str());
         size_t insize = strlen(inbuf);
         size_t outsize = 8192;
         char *outbuf = new char[ outsize ];
         iconv (cd, &inbuf, &insize, &outbuf, &outsize);
         input =  
antlr3NewUCS2StringInPlaceStream((pANTLR3_UINT16)outbuf, 8192-outsize,  
NULL);

The UTF-8 input string is 55 characters and the UCS2 string after  
conversion is 84 bytes.

Thanks,

Andy.

On Jun 18, 2009, at 3:26 PM, Andy Grove wrote:

> Jim,
>
> Thanks. I am a step further along now. I used the iconv library to  
> convert the UTF-8 input into UCS-2 and then passed that into Antlr's  
> UCS2 input stream. I also added the ANY lexer rule as you suggested.  
> The generated parser now runs without error but does not seem to  
> match anything in the grammar, or at least none of the actions that  
> call back into my C code are being called. Do you have any  
> suggestions as to what is going wrong?
>
> FYI, here's the code I'm using for setting up the input stream for  
> this test.
>
> 	iconv_t cd = iconv_open ("UTF-8", "UCS-2");
>
>         char *inbuf = new char[ 8192 ];
>         sprintf(inbuf, "%s", sql.c_str());
>         size_t insize = strlen(inbuf);
>
>         size_t outsize = 8192;
>         char *outbuf = new char[ outsize ];
>
>         size_t s = iconv (cd, &inbuf, &insize, &outbuf, &outsize);
>
>         input =  
> antlr3NewUCS2StringInPlaceStream((pANTLR3_UINT16)outbuf, s, NULL);
>
>
> Thanks,
>
> Andy.
>
>
> On Jun 16, 2009, at 5:35 PM, Jim Idle wrote:
>
>> Andy,
>>
>> I think your likely issues are:
>>
>> 1) as mentioned earlier the length you are passing in is in bytes  
>> and the stream needs number of 16 bit chars ;
>> 2) the encoding isn't what you think it is and the 16 bit  
>> characters are whacked enough to blow your lexer. Make sure you  
>> have a catch all ANY token listed last in your lexer :
>>
>> ANY : . { printf("some message"); } ;
>>
>> 3) the memory you are passing is not converted to 16 bit correctly  
>> using the calls you have here.
>>
>> Something else.
>>
>> Sorry I can't get much further but trying to do everything by  
>> iPhone is a bit tricky.
>>
>> Jim
>>
>> On Jun 16, 2009, at 11:18 AM, Andy Grove  
>> <andy.grove at codefutures.com> wrote:
>>> Jim,
>>>
>>> Thanks. I've attempted to use the UCS input stream with this code:
>>>
>>> SymbolTable* SQLParser::parse(std::string sql) {
>>>
>>> 	....
>>>
>>> 	std::wstring wsql(sql.begin(), sql.end());
>>> 	const wchar_t *wsqlchars = wsql.c_str();
>>> 	input =  
>>> antlr3NewUCS2StringInPlaceStream((pANTLR3_UINT16)wsqlchars,  
>>> wsql.length(), NULL);
>>>
>>> 	...
>>>
>>> }
>>>
>>> Am I even close with this? It compiles OK but now when I run my  
>>> test the app becomes unresponsive and consumes all the available  
>>> RAM.
>>>
>>> Thanks,
>>>
>>> Andy.
>>>
>>>
>>> On Jun 16, 2009, at 9:21 AM, Jim Idle wrote:
>>>
>>>> You need the UCS version of the input stream or write a utf32  
>>>> input stream and use to pre-supplied UTF8 to UTF32 conversion  
>>>> routine.
>>>>
>>>> If you can wait until next reLease I will be supplying these  
>>>> ready made but they are not difficult to produce, just copy the  
>>>> others. Internally the euntime uses 32 bit unicode and dies not  
>>>> care how you provide these.
>>>>
>>>> Jim
>>>>
>>>> On Jun 16, 2009, at 9:20 AM, Andy Grove  
>>>> <andy.grove at codefutures.com> wrote:
>>>>
>>>>> I have a SQL parser that is working fine with standard ASCII  
>>>>> characters but if I try and insert data containing international  
>>>>> characters such as:
>>>>>
>>>>> "INSERT INTO customer (username, password, title, first_name,  
>>>>> last_name, addr_line1, addr_line2, addr_city, addr_state,  
>>>>> country_id) VALUES (''username123', 'password', 'Mr', 'T?st',  
>>>>> 'Test', 'Test', 'Test', 'Test', 'TE', 1)"
>>>>>
>>>>> I get this error:
>>>>>
>>>>> -memory-(1) : lexer error 1 :
>>>>> 	Unexpected character at offset 179, near char(0XC3) :
>>>>> 	?st', 'Test', 'Test
>>>>>
>>>>> Here is my setup code:
>>>>>
>>>>> 	input =  
>>>>> antlr3NewAsciiStringInPlaceStream((pANTLR3_UINT8)stringCopy, l,  
>>>>> NULL);
>>>>> 	lexer = DbsMySQL_CPPLexerNew(input);
>>>>> 	tstream = antlr3CommonTokenStreamSourceNew(ANTLR3_SIZE_HINT,  
>>>>> lexer->pLexer->rec->state->tokSource);
>>>>> 	parser = DbsMySQL_CPPParserNew(tstream);
>>>>>
>>>>> Do I need to specify the character set somewhere?
>>>>>
>>>>> Thanks,
>>>>>
>>>>> Andy.
>>>>>
>>>>> ---
>>>>> Andy Grove
>>>>> Chief Architect
>>>>> CodeFutures Corporation
>>>>> "Share Nothing. Shard Everything."
>>>>>
>>>>> Cell:    (303) 720-1285
>>>>> E-Fax:   (303) 395-0426
>>>>> Web:     http://www.codefutures.com/
>>>>> Twitter: http://twitter.com/andygrove73
>>>>>
>>>>>
>>>>>
>>>>>
>>>>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>>>>> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>>>
>>> t">http://www.antlr.org/mailman/listinfo/antlr-interest
>>> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>>>
>>> /html>
>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090618/13352341/attachment.html 

From craig at palantir.co.za  Thu Jun 18 23:35:16 2009
From: craig at palantir.co.za (craig at palantir.co.za)
Date: Fri, 19 Jun 2009 08:35:16 +0200
Subject: [antlr-interest] Rewrite problem.
Message-ID: <20090619083516.0m547ofhmogw8ow8@webmail.palantir.co.za>


Hi,

I am trying to rewrite this tree so that the 'or' always appears, with either
one or more of the nodes. Unfortunately I get a runtime error saying that the
stream is empty RewriteEmptyStreamException.

I am using csharp2.


   orExpr      : andExpr (or='or' andExpr)*
                 -> {null != or}? ^('or' andExpr+)
                 -> ^('or' andExpr)
               ;

I actually just wanted
  orExpr : andExpr ('or' andExpr)* -> ^('or' andExpr+);

I thought this would work, but it doesn't.

Any work arounds?

Thanks
Regards
Craig.

----------------------------------------------------------------
This message was sent using IMP, the Internet Messaging Program.



From ranco.marcus at epirion.nl  Thu Jun 18 23:45:52 2009
From: ranco.marcus at epirion.nl (Ranco Marcus)
Date: Fri, 19 Jun 2009 08:45:52 +0200
Subject: [antlr-interest] error when using svn:keywords in comment
In-Reply-To: <C61CFB9D-8E26-4146-B1A1-77D693D237FB@cs.usfca.edu>
References: <83315D8A233B6E45B9AD4BF153589BB303E79A@sun.epirion.local>
	<C61CFB9D-8E26-4146-B1A1-77D693D237FB@cs.usfca.edu>
Message-ID: <83315D8A233B6E45B9AD4BF153589BB303E79B@sun.epirion.local>

Thanks Ter, however escaping does not work for @lexer::header (see
grammar below). 

An error message is shown (in ANTLRWorks 1.2.3), but the parser and
lexer are generated correctly.


[begin file]

// $Id$   escape not needed

grammar test;

@header
{
// \$Id\$   escape needed, and working
}

@lexer::header
{
// \$Id\$   escape needed, but not working (throws 'reference to
attribute outside of a rule: Id')
}

// some dummy rules (if no lexer rules are present, the error above is
not shown)

main
	:  EOF
	;
	
PLUS
	: '+'
	;

[end file]



-----Original Message-----
From: Terence Parr [mailto:parrt at cs.usfca.edu] 
Sent: Thursday, June 18, 2009 8:35 PM
To: Ranco Marcus
Cc: antlr-interest at antlr.org
Subject: Re: [antlr-interest] error when using svn:keywords in comment

Try \$
Ter
On Jun 18, 2009, at 5:49 AM, Ranco Marcus wrote:

> Hi guys,
>
> Specifying an svn:keyword like $Id$ in a comment line results in an  
> error message "reference to attribute outside of a rule: Id". It  
> seems as if ANTLR does not treat the comment as ordinary plain text.  
> Can anybody confirm that this is a bug? Is there a workaround for  
> this?
>
> @header
> {
> //  ... header info ...
> // $Id$
> //
> }
>
> Best regards,
>
> Ranco Marcus
> Epirion Knowledge Solutions B.V.
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
http://www.antlr.org/mailman/options/antlr-interest/your-email-address


From damien.cassou at gmail.com  Fri Jun 19 02:09:50 2009
From: damien.cassou at gmail.com (Damien Cassou)
Date: Fri, 19 Jun 2009 11:09:50 +0200
Subject: [antlr-interest] Problem with Strip forgetting some parenthesis
Message-ID: <6ac749c10906190209i2aa6e498s414472d5bb5ed207@mail.gmail.com>

Hi,

running org.antlr.tool.Strip on my grammar produces an incorrect
result. For example, the following:

document
  : types+=type_def*
  -> ^(DOCUMENT<Document>[$types] type_def*)
;

is translated to:

document
  : type_def*
  )
;

there is an unexpected right parenthesis.

-- 
Damien Cassou
http://damiencassou.seasidehosting.st

"Lambdas are relegated to relative obscurity until Java makes them
popular by not having them." James Iry

From eakarsu at gmail.com  Fri Jun 19 09:12:50 2009
From: eakarsu at gmail.com (Erol Akarsu)
Date: Fri, 19 Jun 2009 12:12:50 -0400
Subject: [antlr-interest] trying to remove left recursion with ANTLRWorks
Message-ID: <dfeb05930906190912r34874fc6ye50e3498619e24a0@mail.gmail.com>

Hi,

I am trying to remove left recursion in my grammar with ANTLRWorks.
I am using version 1.3.2 with antr 3.1.3. I compiled ANTLRWorks.

I checked grammar with IDE menu Grammar - > Check Grammar , that tells me I
have 48 left recursion in my grammar file.

Then I picked one that has left recursion, that is red in color, execute
Refactor -> Remove Left Recursion and I am getting popped up window saying
this rule does not have left recursion. I put breakpoint at
removeLeftRecursion method in ActionRefactorImp.java class and see that it
could not find left recursion in selected rule.

I would like to know why there is diffrence between ANDLR's left recursion
discovery and ANTLRWorks removal process.

Is there any option I need to setp up to remove left recursion?

Regards

Erol Akarsu
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090619/b29e220c/attachment.html 

From dukie_banderjee at hotmail.com  Fri Jun 19 09:34:29 2009
From: dukie_banderjee at hotmail.com (Dukie Banderjee)
Date: Fri, 19 Jun 2009 12:34:29 -0400
Subject: [antlr-interest] Multi-phase tree rewriting question
Message-ID: <COL113-W67116D63DF14CAE752ED80923A0@phx.gbl>


Hi,

I'm considering how to solve the following problem: The documents I'm parsing (EDI) are actually wrapped in 'envelopes'. Similar to XML, the envelopes have a beginning line and an ending line. The lines in between are the actual documents which are wrapped.

However, different wrapped documents have different formats, so my current idea is to have a grammar for each document format, and an 'outer' grammar for the enveloping structure.

The envelope grammar knows about its beginning lines and ending lines, and the fact that there are lines in between, but it does not parse the contained lines into a hierarchical AST; that job is for the specific document parser.

So, the idea is that I first parse a file into an envelope AST which has this basic structure:

^(ENVELOPE ...
  ^(GROUP ...
    ^(DOCUMENT type
      ^(LINE ...)  // Straight list of lines
      ^(LINE ...)
      ...
    )
    ...
  )
  ...
)

Then the next phase would be to rewrite the DOCUMENT AST to add some structure to it, based on the EDI standards:

    ^(DOCUMENT type

      ^(LINE ...)  // Straight list of lines

      ^(LINE ...)

      ...

    )


becomes:

    ^(DOCUMENT type

      ^(HEADER_INFO ...)  // More-detailed AST

      ^(ITEMS
        ^(ITEM
          ^(DETAIL ...)   // Hierarchical structure added


          ^(DETAIL ...)
          ...
        )
      ...
      )


      ...

    )


A major reason to go with this approach, I think, is that there are literally hundreds of different types of EDI documents (although I'm only concerned with parsing fewer than ten of these types), but the enveloping structure is exactly the same, regardless of the contained documents.

Also, there are different versions of the EDI standards, and so I would need slightly different parsers for different versions of the same document type. For example, an Edifact DELFOR document may be based on the 96a standard, or the 07b standard, or whatever, with slightly different (sometimes largely different) structures. So, I could have Delfor96aParser, and Delfor07bParser, and the information returned by the envelope grammar would allow me to select which version of EDI is being used, and therefore which document-parser to invoke.

So, if I had this envelop parser, which can generate a document-AST which is a straight list of lines, how would I then further process this AST to add some structure to it, using a document-specific parser?

I was looking at ANTLR's 'rewrite' option, but from what I've read it seems to only work with template output. I don't want to output text, I want to rewrite AST to AST, and then process the AST later. There is no text output needed.

Would I use a tree-walker? If so, wouldn't this require creating a whole new copy of the document-AST? Is this the right approach? Or is an in-place rewrite more appropriate? If so, how do I do it?

Any help would be appreciated, even if its just pointing me to the right place to find the info.

Thanks,
Rob

_________________________________________________________________
We are your photos. Share us now with Windows Live Photos.
http://go.microsoft.com/?linkid=9666047
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090619/675f2d4b/attachment.html 

From Viktor_Lioutyi at i2.com  Fri Jun 19 13:05:22 2009
From: Viktor_Lioutyi at i2.com (Viktor Lioutyi)
Date: Fri, 19 Jun 2009 15:05:22 -0500
Subject: [antlr-interest] AST tree rewrite that can recognize sequence of
	nodes
Message-ID: <33A4D20438DA1C4A8D7A8981F072D25B19C81E7C23@DLMBXCCR.i2.com>

Hi,

I submitted this post before, but in a wrong discussion thread. Sorry for the mess. I am resubmitting this post in a new thread with additional information.


I am writing a prototype of converter from one language (TSL of WinRunner) to another (VB Script of QTP).

One of the tasks includes identification of statement sequence similar to one below

int i = 0;
A[i++] = e1;
A[i++] = e2;
...
A[i++] = eN;

and rewriting it to something like this (the code may be not exact, but the idea should be clear)

Dim A(20)
A(0) = e1
A(1) = e2
...
A(20) = e20

In my version of AST the tree rewrite may look something like this.

tree grammar TSLrewriteArray;

options {
    tokenVocab = TSL;
    ASTLabelType = CommonTree;
    output = AST;
    filter = true;
    rewrite = true;
}

topdown

   :    ^(EXPRESSION_STATEMENT ^(ASSIGN ID INT)) ( ^(EXPRESSION_STATEMENT ^(ASSIGN ^(INDEX ID ^(INC_AFTER ID)) e=. )) )+
        -> ... result tree here...
        ;

I was not able to make AST tree rewrites to work directly. I think that the reason is that tree rewrites are based on a tree visitor pattern. The pattern assumes that only one node at a time may be visited and changed, while here I need to change sequence of nodes with arbitrary length. The replacement is also a sequence of nodes and potentially of different length (it could always be presented as one node by adding an artificial root to a sequence, but I prefer sequence).

The generated recognizer is capable of properly doing pattern matching. Seems like I only need to create an appropriate visitor that understands that more than one node may be visited and replaced. I do not know yet if this could be done, if I will encounter other issues, for example with rollbacks.

Has anybody encountered such a problem? Am I following the right approach?

I have limited experience with ANTLR and any help would be appreciated.

Thanks in advance,
Viktor

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090619/689372ad/attachment.html 

From markwright at internode.on.net  Fri Jun 19 18:33:14 2009
From: markwright at internode.on.net (Mark Wright)
Date: Sat, 20 Jun 2009 11:33:14 +1000
Subject: [antlr-interest] Question about example Ansi C grammar for
 antlr v3
In-Reply-To: <8d80b1570906170719t7f2459e3j71c6b4c8d5c4ad6f@mail.gmail.com>
References: <8d80b1570906170719t7f2459e3j71c6b4c8d5c4ad6f@mail.gmail.com>
Message-ID: <20090620113314.00004a38@goanna>

Hi Fredrik,

I think the correct approach (for parsing an ambiguous language
which requires symbol table knowledge to parse) is while
parsing the code in the first parse, to:

* insert each symbol into the symbol table, which needs to know
all the scoping rules.

* in each situation where the language is ambiguous, to use a
dis-ambiguating semantic predicate to lookup the symbol in the
symbol table, and based on the answer from the dis-ambiguating
semantic predicates, the correct rule is selected.

Thanks, Mark

On Wed, 17 Jun 2009 16:19:28 +0200
Fredrik Ohrstrom <oehrstroem at gmail.com> wrote:

> Sadly enough ;-) , the following c-code compiles both using gcc and
> cl.exe
> 
> ---------------
> typedef int alfa;
> typedef int beta;
> 
> struct { struct { int z; } alfa; } c;
> 
> int main(int alfa)
> {
>    beta beta;
> }
> ---------------
> 
> The example antlv3 c-parser found on the antlr homepage will wrongly
> parse the alfa inside the struct as a type_id and not a
> direct_declarator. In the same way it wrongly parses the argument
> alfa and the function local beta.
> 
> I have tried to extend the grammar to fix this, unfortunately I have
> not been able to solve all the cases in the example, only the arg and
> local var case.
> 
> What is the correct way of solving this?
> 
> //Fredrik
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address


-- 

From jdmitchell at gmail.com  Sat Jun 20 12:39:46 2009
From: jdmitchell at gmail.com (John D. Mitchell)
Date: Sat, 20 Jun 2009 12:39:46 -0700
Subject: [antlr-interest] antlr-interest Digest, Vol 55, Issue 20
In-Reply-To: <mailman.1.1245524402.24248.antlr-interest@antlr.org>
References: <mailman.1.1245524402.24248.antlr-interest@antlr.org>
Message-ID: <AE97DF73-0E68-4CD8-9BD9-10819D13C688@gmail.com>

For what it's worth, Ter's AnsiC grammar written in Antlrv3 is cool  
but really more of a example than a production bit of code.  If you're  
just wanting to learn, it's cool.  If you need more of a production  
approach, you might want to look at the GNU C package which has a StdC  
lexer and parser as its basis but, for good and bad, it's still  
written in Antlr v2.

Have a great weekend,
John

On Jun 20, 2009, at 12:00 , antlr-interest-request at antlr.org wrote:
> From: Mark Wright <markwright at internode.on.net>
> Subject: Re: [antlr-interest] Question about example Ansi C grammar
> 	for antlr v3
> To: Fredrik Ohrstrom <oehrstroem at gmail.com>
> Cc: antlr-interest at antlr.org
> Message-ID: <20090620113314.00004a38 at goanna>
> Content-Type: text/plain; charset=US-ASCII
>
> Hi Fredrik,
>
> I think the correct approach (for parsing an ambiguous language
> which requires symbol table knowledge to parse) is while
> parsing the code in the first parse, to:
>
> * insert each symbol into the symbol table, which needs to know
> all the scoping rules.
>
> * in each situation where the language is ambiguous, to use a
> dis-ambiguating semantic predicate to lookup the symbol in the
> symbol table, and based on the answer from the dis-ambiguating
> semantic predicates, the correct rule is selected.
>
> Thanks, Mark
>
> On Wed, 17 Jun 2009 16:19:28 +0200
> Fredrik Ohrstrom <oehrstroem at gmail.com> wrote:
>
>> Sadly enough ;-) , the following c-code compiles both using gcc and
>> cl.exe
>>
>> ---------------
>> typedef int alfa;
>> typedef int beta;
>>
>> struct { struct { int z; } alfa; } c;
>>
>> int main(int alfa)
>> {
>>   beta beta;
>> }
>> ---------------
>>
>> The example antlv3 c-parser found on the antlr homepage will wrongly
>> parse the alfa inside the struct as a type_id and not a
>> direct_declarator. In the same way it wrongly parses the argument
>> alfa and the function local beta.
>>
>> I have tried to extend the grammar to fix this, unfortunately I have
>> not been able to solve all the cases in the example, only the arg and
>> local var case.
>>
>> What is the correct way of solving this?
>>
>> //Fredrik


From damien.cassou at gmail.com  Sun Jun 21 03:44:39 2009
From: damien.cassou at gmail.com (Damien Cassou)
Date: Sun, 21 Jun 2009 12:44:39 +0200
Subject: [antlr-interest] Problem with Strip forgetting some parenthesis
In-Reply-To: <6ac749c10906190209i2aa6e498s414472d5bb5ed207@mail.gmail.com>
References: <6ac749c10906190209i2aa6e498s414472d5bb5ed207@mail.gmail.com>
Message-ID: <6ac749c10906210344l6ab12f4hc48ae16f09668f92@mail.gmail.com>

Hi,

On Fri, Jun 19, 2009 at 11:09 AM, Damien Cassou<damien.cassou at gmail.com> wrote:
> running org.antlr.tool.Strip on my grammar produces an incorrect
> result. For example, the following:
>
> document
> ?: types+=type_def*
> ?-> ^(DOCUMENT<Document>[$types] type_def*)
> ;
>
> is translated to:
>
> document
> ?: type_def*
> ?)
> ;
>
> there is an unexpected right parenthesis.


I forgot to say that there are some error messages:

line 12:15 mismatched input '<' expecting ')'
line 12:43 extraneous input ')' expecting ';'

It seems to me the grammar used by Tool to generate the parser is not
the same as the one used by Strip.

Can somebody help me please?

-- 
Damien Cassou
http://damiencassou.seasidehosting.st

"Lambdas are relegated to relative obscurity until Java makes them
popular by not having them." James Iry

From connectajit at rediffmail.com  Mon Jun 22 01:56:51 2009
From: connectajit at rediffmail.com (Ajit)
Date: 22 Jun 2009 08:56:51 -0000
Subject: [antlr-interest] Can ANTLR generated Parser or Lexer in C lanuage
	works on unicode input?
Message-ID: <20090622085651.59328.qmail@f4mail-235-134.rediffmail.com>

Hello,&nbsp;Can ANTLR generated Parser or Lexer in C lanuage support unicode? like lexer accept unicode string as input, parser can parse this lexer.ThanksAjit


Ajit V. Shinde
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090622/a03c9b8b/attachment.html 

From sylvain_gregory at bah.com  Mon Jun 22 04:02:59 2009
From: sylvain_gregory at bah.com (Sylvain, Gregory [USA])
Date: Mon, 22 Jun 2009 07:02:59 -0400
Subject: [antlr-interest] Experiences going to XML DOM from AST...
In-Reply-To: <mailman.1.1245610801.28092.antlr-interest@antlr.org>
References: <mailman.1.1245610801.28092.antlr-interest@antlr.org>
Message-ID: <AEB19DA5-6FED-4B00-860B-1C5BC593461B@mimectl>

Hi,
I have a system which currently translates several legacy message formats into XML DOM (does some manipulation and verification) and then translates the XML DOM back to the legacy message format.  It currently does all of the legacy translation by hand.   Accordingly, there are some 'gaps', as well as hard to find bugs, in the translation. 
I am looking to replace the hand translation with ANTLR.   However, I would like to keep the XML DOM middle representation as there is already quite a few architectural features built around that model.
Does anyone have experience translating from ANTLR AST to XML DOM?  I have a bit of trouble trying to grasp how the tree grammar would/could output XML DOM.
Thanks in advance for your help.
Greg
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090622/ae747341/attachment.html 

From s.barnett-cormack at lancaster.ac.uk  Mon Jun 22 05:22:24 2009
From: s.barnett-cormack at lancaster.ac.uk (Sam Barnett-Cormack)
Date: Mon, 22 Jun 2009 13:22:24 +0100
Subject: [antlr-interest] Experiences going to XML DOM from AST...
In-Reply-To: <AEB19DA5-6FED-4B00-860B-1C5BC593461B@mimectl>
References: <mailman.1.1245610801.28092.antlr-interest@antlr.org>
	<AEB19DA5-6FED-4B00-860B-1C5BC593461B@mimectl>
Message-ID: <4A3F7780.5060704@lancaster.ac.uk>

Sylvain, Gregory [USA] wrote:
> Hi,
> 
> I have a system which currently translates several legacy message 
> formats into XML DOM (does some manipulation and verification) and then 
> translates the XML DOM back to the legacy message format.  It currently 
> does all of the legacy translation by hand.   Accordingly, there are 
> some 'gaps', as well as hard to find bugs, in the translation.
> 
> I am looking to replace the hand translation with ANTLR.   However, I 
> would like to keep the XML DOM middle representation as there is already 
> quite a few architectural features built around that model.
> 
> Does anyone have experience translating from ANTLR AST to XML DOM?  I 
> have a bit of trouble trying to grasp how the tree grammar would/could 
> output XML DOM.

An immediate idea occuring to me would be to use yet another layer in 
between - but it's a pretty easy layer. Assuming you're using Java, 
create a data binding of your XML, using (for example) JAXB. Then have 
the tree grammar build these Java objects, and then use JAXB's internal 
capability to turn them into DOM.

Sometimes an extra step saves time.

-- 
Sam Barnett-Cormack

From jimi at temporal-wave.com  Mon Jun 22 08:16:20 2009
From: jimi at temporal-wave.com (Jim Idle)
Date: Mon, 22 Jun 2009 10:16:20 -0500
Subject: [antlr-interest] Can ANTLR generated Parser or Lexer in C
	lanuage works on unicode input?
In-Reply-To: <20090622085651.59328.qmail@f4mail-235-134.rediffmail.com>
References: <20090622085651.59328.qmail@f4mail-235-134.rediffmail.com>
Message-ID: <6E18152B-F082-4FA2-886B-D35228D7CE3F@temporal-wave.com>

Yes. Use the 16 bit input stream. You will have to convert some  
encoding such as utf8 using the built in rintsime routines. Next  
release I plan to provide a universal input stream where you just say  
what the encoding is and the size in bytes.

Internally ANTLR operres on 32 bit integers so it is all covered

Jim

On Jun 22, 2009, at 3:56 AM, "Ajit" <connectajit at rediffmail.com> wrote:

> Hello,
>  Can ANTLR generated Parser or Lexer in C lanuage support unicode?  
> like lexer accept unicode string as input, parser can parse this  
> lexer.
>
>
> Thanks
> Ajit
>
>
>
> Ajit V. Shinde
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090622/2121aa70/attachment.html 

From vbar at comp.cz  Mon Jun 22 08:37:02 2009
From: vbar at comp.cz (Vaclav Barta)
Date: Mon, 22 Jun 2009 17:37:02 +0200
Subject: [antlr-interest] Experiences going to XML DOM from AST...
In-Reply-To: <AEB19DA5-6FED-4B00-860B-1C5BC593461B@mimectl>
References: <mailman.1.1245610801.28092.antlr-interest@antlr.org>
	<AEB19DA5-6FED-4B00-860B-1C5BC593461B@mimectl>
Message-ID: <200906221737.02942.vbar@comp.cz>

On Monday 22 June 2009 13:02:59 Sylvain, Gregory [USA] wrote:
> features built around that model. Does anyone have experience translating
> from ANTLR AST to XML DOM?  I have a bit of trouble trying to grasp how the
> tree grammar would/could output XML DOM. Thanks in advance for your help.
I tried a generator of Ant build files (which are XML) using ANTLR once, as an 
experiment, and it was certainly feasible (if not very useful :-) ). I 
probably still have the grammars lying around somewhere - let me know if you 
want them...

	Bye
		Vasek



From whschultz at cedrus.com  Mon Jun 22 12:06:53 2009
From: whschultz at cedrus.com (William H. Schultz)
Date: Mon, 22 Jun 2009 12:06:53 -0700
Subject: [antlr-interest] error when using svn:keywords in comment
In-Reply-To: <83315D8A233B6E45B9AD4BF153589BB303E79B@sun.epirion.local>
References: <83315D8A233B6E45B9AD4BF153589BB303E79A@sun.epirion.local>
	<C61CFB9D-8E26-4146-B1A1-77D693D237FB@cs.usfca.edu>
	<83315D8A233B6E45B9AD4BF153589BB303E79B@sun.epirion.local>
Message-ID: <990D7499-5757-4191-BB02-E158BC4AA948@cedrus.com>

Here's what works for me:

In the parser/lexer grammar:

@parser::header
{
///	\$Rev: 4766 $
///	\$Author: whschultz $
///	\$Date: 2009-06-19 11:59:22 -0700 (Fri, 19 Jun 2009) $
///
/// Copyright (c) 2009 Cedrus Corporation
/// There is no spoon.

}

In the tree walker:

@header
{
///	\$Rev: 4768 $
///	\$Author: whschultz $
///	\$Date: 2009-06-19 16:31:22 -0700 (Fri, 19 Jun 2009) $
///
/// Copyright (c) 2009 Cedrus Corporation
/// There is no spoon.

}

As you've noted, it does NOT work in "@lexer::header."  If I simply  
use "@header" in the parser/lexer grammar, nothing goes into the lexer.



On Jun 18, 2009, at 11:45 PM, Ranco Marcus wrote:

> Thanks Ter, however escaping does not work for @lexer::header (see
> grammar below).
>
> An error message is shown (in ANTLRWorks 1.2.3), but the parser and
> lexer are generated correctly.
>
>
> [begin file]
>
> // $Id$   escape not needed
>
> grammar test;
>
> @header
> {
> // \$Id\$   escape needed, and working
> }
>
> @lexer::header
> {
> // \$Id\$   escape needed, but not working (throws 'reference to
> attribute outside of a rule: Id')
> }
>
> // some dummy rules (if no lexer rules are present, the error above is
> not shown)
>
> main
> 	:  EOF
> 	;
> 	
> PLUS
> 	: '+'
> 	;
>
> [end file]
>
>
>
> -----Original Message-----
> From: Terence Parr [mailto:parrt at cs.usfca.edu]
> Sent: Thursday, June 18, 2009 8:35 PM
> To: Ranco Marcus
> Cc: antlr-interest at antlr.org
> Subject: Re: [antlr-interest] error when using svn:keywords in comment
>
> Try \$
> Ter
> On Jun 18, 2009, at 5:49 AM, Ranco Marcus wrote:
>
>> Hi guys,
>>
>> Specifying an svn:keyword like $Id$ in a comment line results in an
>> error message "reference to attribute outside of a rule: Id". It
>> seems as if ANTLR does not treat the comment as ordinary plain text.
>> Can anybody confirm that this is a bug? Is there a workaround for
>> this?
>>
>> @header
>> {
>> //  ... header info ...
>> // $Id$
>> //
>> }
>>
>> Best regards,
>>
>> Ranco Marcus
>> Epirion Knowledge Solutions B.V.
>>
>>

-------------------------------
Hank Schultz
Cedrus Corporation
http://www.cedrus.com/



From parrt at cs.usfca.edu  Mon Jun 22 17:31:13 2009
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon, 22 Jun 2009 17:31:13 -0700
Subject: [antlr-interest] Added high level interpreter chapter to beta of
	"Language design patterns"
Message-ID: <ABD6E029-7DBE-4820-B869-1B3142E939E0@cs.usfca.edu>

howdy, added a chapter on high level interpreters to the beta  
available at pragmatic programmers website:

http://pragprog.com/titles/tpdsl/language-design-patterns

Next chapter, in two weeks, is bytecode interpreters.

Ter

From cadonna at inf.unibz.it  Tue Jun 23 06:52:33 2009
From: cadonna at inf.unibz.it (Bruno Cadonna)
Date: Tue, 23 Jun 2009 15:52:33 +0200
Subject: [antlr-interest] [ANTLR C Target] error: syntax error before
	'CommonTree'
Message-ID: <4971C55E-A595-49DA-B48D-0ABD7E1B6F4A@inf.unibz.it>

Hi list,

I use ANTLRWorks 1.2.3 with ANTLR 3.1.2 to generate a parser for a  
small grammar in C.

The option section of my grammar is:

options {
	language = C;
	output = AST;
	ASTLabelType = CommonTree;
}

When I want to compile the generated parser source against the C  
runtime libraries (libantlr3c-3.1.2.tar.gz), I get the following  
errors and warnings:

In file included from gen/sase_fubParser.c:45:
gen/sase_fubParser.h:124: error: syntax error before 'CommonTree'
gen/sase_fubParser.h:124: warning: no semicolon at end of struct or  
union
gen/sase_fubParser.h:127: warning: data definition has no type or  
storage class
gen/sase_fubParser.h:135: error: syntax error before 'CommonTree'
gen/sase_fubParser.h:135: warning: no semicolon at end of struct or  
union
gen/sase_fubParser.h:138: warning: data definition has no type or  
storage class
gen/sase_fubParser.h:146: error: syntax error before 'CommonTree'
gen/sase_fubParser.h:146: warning: no semicolon at end of struct or  
union
gen/sase_fubParser.h:149: warning: data definition has no type or  
storage class
gen/sase_fubParser.h:157: error: syntax error before 'CommonTree'
gen/sase_fubParser.h:157: warning: no semicolon at end of struct or  
union
gen/sase_fubParser.h:160: warning: data definition has no type or  
storage class
gen/sase_fubParser.h:168: error: syntax error before 'CommonTree'
gen/sase_fubParser.h:168: warning: no semicolon at end of struct or  
union
gen/sase_fubParser.h:171: warning: data definition has no type or  
storage class
gen/sase_fubParser.h:179: error: syntax error before 'CommonTree'
gen/sase_fubParser.h:179: warning: no semicolon at end of struct or  
union
gen/sase_fubParser.h:182: warning: data definition has no type or  
storage class
gen/sase_fubParser.h:190: error: syntax error before 'CommonTree'
gen/sase_fubParser.h:190: warning: no semicolon at end of struct or  
union
gen/sase_fubParser.h:193: warning: data definition has no type or  
storage class
gen/sase_fubParser.h:201: error: syntax error before 'CommonTree'
gen/sase_fubParser.h:201: warning: no semicolon at end of struct or  
union
gen/sase_fubParser.h:204: warning: data definition has no type or  
storage class
gen/sase_fubParser.h:212: error: syntax error before 'CommonTree'
gen/sase_fubParser.h:212: warning: no semicolon at end of struct or  
union
gen/sase_fubParser.h:215: warning: data definition has no type or  
storage class
gen/sase_fubParser.h:223: error: syntax error before 'CommonTree'
gen/sase_fubParser.h:223: warning: no semicolon at end of struct or  
union
gen/sase_fubParser.h:226: warning: data definition has no type or  
storage class
gen/sase_fubParser.h:234: error: syntax error before 'CommonTree'
...
...

I use autotools (autoconf, automake, libtool) to compile the project.  
It is the first time I use them and I am not a C expert, so it could  
easily be that the problem is not related to ANTLR. But since it seems  
that there is a syntax error in the files generated by ANTLR I thought  
maybe it is a bug.

Could anybody exclude or confirm that?


Cheers,
Bruno

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
   Bruno Cadonna
     Database and Information Systems (DIS)
       Faculty of Computer Science
         Free University of Bozen-Bolzano

   Sernesistr. 1 - Via Sernesi, 1
   Block A, Room 4.15
   39100 Bozen-Bolzano
   Italy

   web: http://www.inf.unibz.it/~cadonna


From jimi at temporal-wave.com  Tue Jun 23 09:53:15 2009
From: jimi at temporal-wave.com (Jim Idle)
Date: Tue, 23 Jun 2009 11:53:15 -0500
Subject: [antlr-interest] Eclipse plugins
Message-ID: <1E947488-D480-47B5-AADB-68488F5CFBD4@temporal-wave.com>

Are any of the Eclipse plugins open source? I am doing work for a  
company that is using Rational Software Architect which is based upon  
Eclipse 3.2.something but they only allow the use of opensource  
projects without a huge procurement effort. The two plugins I know of  
do not have source code and so they are being rejected, apart from  
which they seem to need 3.3 or better.

Cheers,

Jim

From damien.cassou at gmail.com  Tue Jun 23 09:58:18 2009
From: damien.cassou at gmail.com (Damien Cassou)
Date: Tue, 23 Jun 2009 18:58:18 +0200
Subject: [antlr-interest] Eclipse plugins
In-Reply-To: <1E947488-D480-47B5-AADB-68488F5CFBD4@temporal-wave.com>
References: <1E947488-D480-47B5-AADB-68488F5CFBD4@temporal-wave.com>
Message-ID: <6ac749c10906230958t687ede5cka3de6879efdd6bab@mail.gmail.com>

On Tue, Jun 23, 2009 at 6:53 PM, Jim Idle<jimi at temporal-wave.com> wrote:
> Are any of the Eclipse plugins open source? I am doing work for a
> company that is using Rational Software Architect which is based upon
> Eclipse 3.2.something but they only allow the use of opensource
> projects without a huge procurement effort. The two plugins I know of
> do not have source code and so they are being rejected, apart from
> which they seem to need 3.3 or better.

ANTLR IDE is free and open source: http://antlrv3ide.sourceforge.net/.
Source code is at
http://antlrv3ide.svn.sourceforge.net/viewvc/antlrv3ide/.

Don't know its compatibility with old Eclipse releases though.

-- 
Damien Cassou
http://damiencassou.seasidehosting.st

"Lambdas are relegated to relative obscurity until Java makes them
popular by not having them." James Iry

From jimi at temporal-wave.com  Tue Jun 23 10:17:16 2009
From: jimi at temporal-wave.com (Jim Idle)
Date: Tue, 23 Jun 2009 12:17:16 -0500
Subject: [antlr-interest] Eclipse plugins
In-Reply-To: <6ac749c10906230958t687ede5cka3de6879efdd6bab@mail.gmail.com>
References: <1E947488-D480-47B5-AADB-68488F5CFBD4@temporal-wave.com>
	<6ac749c10906230958t687ede5cka3de6879efdd6bab@mail.gmail.com>
Message-ID: <D5A1CB07-E4C0-4A17-A8C1-3BE148A817BD@temporal-wave.com>

Thanks, I could not locate the source for this before. They will have  
to upgrade to a 3.3 based version I think but we will give it a try.

Do you know that the eclipse update site you list does not work? Looks  
like it wants you to add .htaccess but perhaps this is also a 3.2 issue.

Jim

On Jun 23, 2009, at 11:58 AM, Damien Cassou <damien.cassou at gmail.com>  
wrote:

> On Tue, Jun 23, 2009 at 6:53 PM, Jim Idle<jimi at temporal-wave.com>  
> wrote:
>> Are any of the Eclipse plugins open source? I am doing work for a
>> company that is using Rational Software Architect which is based upon
>> Eclipse 3.2.something but they only allow the use of opensource
>> projects without a huge procurement effort. The two plugins I know of
>> do not have source code and so they are being rejected, apart from
>> which they seem to need 3.3 or better.
>
> ANTLR IDE is free and open source: http://antlrv3ide.sourceforge.net/.
> Source code is at
> http://antlrv3ide.svn.sourceforge.net/viewvc/antlrv3ide/.
>
> Don't know its compatibility with old Eclipse releases though.
>
> -- 
> Damien Cassou
> http://damiencassou.seasidehosting.st
>
> "Lambdas are relegated to relative obscurity until Java makes them
> popular by not having them." James Iry

From espina.edgar at gmail.com  Tue Jun 23 10:31:57 2009
From: espina.edgar at gmail.com (Edgar Espina)
Date: Tue, 23 Jun 2009 14:31:57 -0300
Subject: [antlr-interest] Eclipse plugins
In-Reply-To: <D5A1CB07-E4C0-4A17-A8C1-3BE148A817BD@temporal-wave.com>
References: <1E947488-D480-47B5-AADB-68488F5CFBD4@temporal-wave.com>
	<6ac749c10906230958t687ede5cka3de6879efdd6bab@mail.gmail.com>
	<D5A1CB07-E4C0-4A17-A8C1-3BE148A817BD@temporal-wave.com>
Message-ID: <92b42db60906231031i46345dbbie99530d7a239ddd7@mail.gmail.com>

Hello Jim,

 ANTLR IDE home: http://antlrv3ide.sourceforge.net/
 Update site: http://antlrv3ide.sourceforge.net/updates
 Doc: http://antlrv3ide.sourceforge.net/doc

 ANTLR IDE works with Eclipse 3.3 or higher

 Regards

On Tue, Jun 23, 2009 at 2:17 PM, Jim Idle <jimi at temporal-wave.com> wrote:

> Thanks, I could not locate the source for this before. They will have
> to upgrade to a 3.3 based version I think but we will give it a try.
>
> Do you know that the eclipse update site you list does not work? Looks
> like it wants you to add .htaccess but perhaps this is also a 3.2 issue.
>
> Jim
>
> On Jun 23, 2009, at 11:58 AM, Damien Cassou <damien.cassou at gmail.com>
> wrote:
>
> > On Tue, Jun 23, 2009 at 6:53 PM, Jim Idle<jimi at temporal-wave.com>
> > wrote:
> >> Are any of the Eclipse plugins open source? I am doing work for a
> >> company that is using Rational Software Architect which is based upon
> >> Eclipse 3.2.something but they only allow the use of opensource
> >> projects without a huge procurement effort. The two plugins I know of
> >> do not have source code and so they are being rejected, apart from
> >> which they seem to need 3.3 or better.
> >
> > ANTLR IDE is free and open source: http://antlrv3ide.sourceforge.net/.
> > Source code is at
> > http://antlrv3ide.svn.sourceforge.net/viewvc/antlrv3ide/.
> >
> > Don't know its compatibility with old Eclipse releases though.
> >
> > --
> > Damien Cassou
> > http://damiencassou.seasidehosting.st
> >
> > "Lambdas are relegated to relative obscurity until Java makes them
> > popular by not having them." James Iry
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>



-- 
edgar
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090623/2ad99810/attachment.html 

From jimi at temporal-wave.com  Tue Jun 23 10:37:48 2009
From: jimi at temporal-wave.com (Jim Idle)
Date: Tue, 23 Jun 2009 12:37:48 -0500
Subject: [antlr-interest] Eclipse plugins
In-Reply-To: <92b42db60906231031i46345dbbie99530d7a239ddd7@mail.gmail.com>
References: <1E947488-D480-47B5-AADB-68488F5CFBD4@temporal-wave.com>
	<6ac749c10906230958t687ede5cka3de6879efdd6bab@mail.gmail.com>
	<D5A1CB07-E4C0-4A17-A8C1-3BE148A817BD@temporal-wave.com>
	<92b42db60906231031i46345dbbie99530d7a239ddd7@mail.gmail.com>
Message-ID: <84F8E626-71CE-4486-9029-77719E1EF515@temporal-wave.com>

Yep. The updates site gives a 403 http server error ;)

Jim

On Jun 23, 2009, at 12:31 PM, Edgar Espina <espina.edgar at gmail.com>  
wrote:

> Hello Jim,
>
>  ANTLR IDE home: http://antlrv3ide.sourceforge.net/
>  Update site: http://antlrv3ide.sourceforge.net/updates
>  Doc: http://antlrv3ide.sourceforge.net/doc
>
>  ANTLR IDE works with Eclipse 3.3 or higher
>
>  Regards
>
> On Tue, Jun 23, 2009 at 2:17 PM, Jim Idle <jimi at temporal-wave.com>  
> wrote:
> Thanks, I could not locate the source for this before. They will have
> to upgrade to a 3.3 based version I think but we will give it a try.
>
> Do you know that the eclipse update site you list does not work? Looks
> like it wants you to add .htaccess but perhaps this is also a 3.2  
> issue.
>
> Jim
>
> On Jun 23, 2009, at 11:58 AM, Damien Cassou <damien.cassou at gmail.com>
> wrote:
>
> > On Tue, Jun 23, 2009 at 6:53 PM, Jim Idle<jimi at temporal-wave.com>
> > wrote:
> >> Are any of the Eclipse plugins open source? I am doing work for a
> >> company that is using Rational Software Architect which is based  
> upon
> >> Eclipse 3.2.something but they only allow the use of opensource
> >> projects without a huge procurement effort. The two plugins I  
> know of
> >> do not have source code and so they are being rejected, apart from
> >> which they seem to need 3.3 or better.
> >
> > ANTLR IDE is free and open source: http://antlrv3ide.sourceforge.net/ 
> .
> > Source code is at
> > http://antlrv3ide.svn.sourceforge.net/viewvc/antlrv3ide/.
> >
> > Don't know its compatibility with old Eclipse releases though.
> >
> > --
> > Damien Cassou
> > http://damiencassou.seasidehosting.st
> >
> > "Lambdas are relegated to relative obscurity until Java makes them
> > popular by not having them." James Iry
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>
>
>
> -- 
> edgar
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090623/31b86d92/attachment.html 

From espina.edgar at gmail.com  Tue Jun 23 10:40:00 2009
From: espina.edgar at gmail.com (Edgar Espina)
Date: Tue, 23 Jun 2009 14:40:00 -0300
Subject: [antlr-interest] Eclipse plugins
In-Reply-To: <84F8E626-71CE-4486-9029-77719E1EF515@temporal-wave.com>
References: <1E947488-D480-47B5-AADB-68488F5CFBD4@temporal-wave.com>
	<6ac749c10906230958t687ede5cka3de6879efdd6bab@mail.gmail.com>
	<D5A1CB07-E4C0-4A17-A8C1-3BE148A817BD@temporal-wave.com>
	<92b42db60906231031i46345dbbie99530d7a239ddd7@mail.gmail.com>
	<84F8E626-71CE-4486-9029-77719E1EF515@temporal-wave.com>
Message-ID: <92b42db60906231040v69239005i4f9038b8516016d2@mail.gmail.com>

You can't access to the update site from a web browser. The update site is
only accessible from the Eclipse update mechanism.

 Regards

On Tue, Jun 23, 2009 at 2:37 PM, Jim Idle <jimi at temporal-wave.com> wrote:

> Yep. The updates site gives a 403 http server error ;)
>
> Jim
>
>
> On Jun 23, 2009, at 12:31 PM, Edgar Espina <espina.edgar at gmail.com> wrote:
>
> Hello Jim,
>
>  ANTLR IDE home: <http://antlrv3ide.sourceforge.net/>
> http://antlrv3ide.sourceforge.net/
>  Update site: <http://antlrv3ide.sourceforge.net/updates>
> http://antlrv3ide.sourceforge.net/updates
>  Doc: <http://antlrv3ide.sourceforge.net/doc>
> http://antlrv3ide.sourceforge.net/doc
>
>  ANTLR IDE works with Eclipse 3.3 or higher
>
>  Regards
>
> On Tue, Jun 23, 2009 at 2:17 PM, Jim Idle < <jimi at temporal-wave.com>
> jimi at temporal-wave.com> wrote:
>
>> Thanks, I could not locate the source for this before. They will have
>> to upgrade to a 3.3 based version I think but we will give it a try.
>>
>> Do you know that the eclipse update site you list does not work? Looks
>> like it wants you to add .htaccess but perhaps this is also a 3.2 issue.
>>
>> Jim
>>
>> On Jun 23, 2009, at 11:58 AM, Damien Cassou < <damien.cassou at gmail.com>
>> damien.cassou at gmail.com>
>> wrote:
>>
>> > On Tue, Jun 23, 2009 at 6:53 PM, Jim Idle< <jimi at temporal-wave.com>
>> jimi at temporal-wave.com>
>> > wrote:
>> >> Are any of the Eclipse plugins open source? I am doing work for a
>> >> company that is using Rational Software Architect which is based upon
>> >> Eclipse 3.2.something but they only allow the use of opensource
>> >> projects without a huge procurement effort. The two plugins I know of
>> >> do not have source code and so they are being rejected, apart from
>> >> which they seem to need 3.3 or better.
>> >
>> > ANTLR IDE is free and open source: <http://antlrv3ide.sourceforge.net/>
>> http://antlrv3ide.sourceforge.net/.
>> > Source code is at
>> > <http://antlrv3ide.svn.sourceforge.net/viewvc/antlrv3ide/>
>> http://antlrv3ide.svn.sourceforge.net/viewvc/antlrv3ide/.
>> >
>> > Don't know its compatibility with old Eclipse releases though.
>> >
>> > --
>> > Damien Cassou
>> > <http://damiencassou.seasidehosting.st>
>> http://damiencassou.seasidehosting.st
>> >
>> > "Lambdas are relegated to relative obscurity until Java makes them
>> > popular by not having them." James Iry
>>
>> List: <http://www.antlr.org/mailman/listinfo/antlr-interest>
>> http://www.antlr.org/mailman/listinfo/antlr-interest
>> Unsubscribe:
>> <http://www.antlr.org/mailman/options/antlr-interest/your-email-address>
>> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>>
>
>
>
> --
> edgar
>
>


-- 
edgar
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090623/4233ae97/attachment.html 

From jimi at temporal-wave.com  Tue Jun 23 12:29:12 2009
From: jimi at temporal-wave.com (Jim Idle)
Date: Tue, 23 Jun 2009 14:29:12 -0500
Subject: [antlr-interest] Eclipse plugins
In-Reply-To: <92b42db60906231040v69239005i4f9038b8516016d2@mail.gmail.com>
References: <1E947488-D480-47B5-AADB-68488F5CFBD4@temporal-wave.com>
	<6ac749c10906230958t687ede5cka3de6879efdd6bab@mail.gmail.com>
	<D5A1CB07-E4C0-4A17-A8C1-3BE148A817BD@temporal-wave.com>
	<92b42db60906231031i46345dbbie99530d7a239ddd7@mail.gmail.com>
	<84F8E626-71CE-4486-9029-77719E1EF515@temporal-wave.com>
	<92b42db60906231040v69239005i4f9038b8516016d2@mail.gmail.com>
Message-ID: <075BE41A-769D-469E-B2AD-7C7D4DA27406@temporal-wave.com>

Yes, it gives the same error from eclipse but it might be because it  
is Eclipse 3.2.

Jim

On Jun 23, 2009, at 12:40 PM, Edgar Espina <espina.edgar at gmail.com>  
wrote:

> You can't access to the update site from a web browser. The update  
> site is only accessible from the Eclipse update mechanism.
>
>  Regards
>
> On Tue, Jun 23, 2009 at 2:37 PM, Jim Idle <jimi at temporal-wave.com>  
> wrote:
> Yep. The updates site gives a 403 http server error ;)
>
> Jim
>
>
> On Jun 23, 2009, at 12:31 PM, Edgar Espina <espina.edgar at gmail.com>  
> wrote:
>
>> Hello Jim,
>>
>>  ANTLR IDE home: http://antlrv3ide.sourceforge.net/
>>  Update site: http://antlrv3ide.sourceforge.net/updates
>>  Doc: http://antlrv3ide.sourceforge.net/doc
>>
>>  ANTLR IDE works with Eclipse 3.3 or higher
>>
>>  Regards
>>
>> On Tue, Jun 23, 2009 at 2:17 PM, Jim Idle <jimi at temporal-wave.com>  
>> wrote:
>> Thanks, I could not locate the source for this before. They will have
>> to upgrade to a 3.3 based version I think but we will give it a try.
>>
>> Do you know that the eclipse update site you list does not work?  
>> Looks
>> like it wants you to add .htaccess but perhaps this is also a 3.2  
>> issue.
>>
>> Jim
>>
>> On Jun 23, 2009, at 11:58 AM, Damien Cassou <damien.cassou at gmail.com>
>> wrote:
>>
>> > On Tue, Jun 23, 2009 at 6:53 PM, Jim Idle<jimi at temporal-wave.com>
>> > wrote:
>> >> Are any of the Eclipse plugins open source? I am doing work for a
>> >> company that is using Rational Software Architect which is based  
>> upon
>> >> Eclipse 3.2.something but they only allow the use of opensource
>> >> projects without a huge procurement effort. The two plugins I  
>> know of
>> >> do not have source code and so they are being rejected, apart from
>> >> which they seem to need 3.3 or better.
>> >
>> > ANTLR IDE is free and open source: http://antlrv3ide.sourceforge.net/ 
>> .
>> > Source code is at
>> > http://antlrv3ide.svn.sourceforge.net/viewvc/antlrv3ide/.
>> >
>> > Don't know its compatibility with old Eclipse releases though.
>> >
>> > --
>> > Damien Cassou
>> > http://damiencassou.seasidehosting.st
>> >
>> > "Lambdas are relegated to relative obscurity until Java makes them
>> > popular by not having them." James Iry
>>
>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>>
>>
>>
>> -- 
>> edgar
>
>
>
> -- 
> edgar
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090623/0d38d782/attachment.html 

From gerald at certiv.net  Tue Jun 23 13:47:29 2009
From: gerald at certiv.net (Gerald Rosenberg)
Date: Tue, 23 Jun 2009 13:47:29 -0700
Subject: [antlr-interest] Eclipse plugins
In-Reply-To: <075BE41A-769D-469E-B2AD-7C7D4DA27406@temporal-wave.com>
References: <1E947488-D480-47B5-AADB-68488F5CFBD4@temporal-wave.com>
	<6ac749c10906230958t687ede5cka3de6879efdd6bab@mail.gmail.com>
	<D5A1CB07-E4C0-4A17-A8C1-3BE148A817BD@temporal-wave.com>
	<92b42db60906231031i46345dbbie99530d7a239ddd7@mail.gmail.com>
	<84F8E626-71CE-4486-9029-77719E1EF515@temporal-wave.com>
	<92b42db60906231040v69239005i4f9038b8516016d2@mail.gmail.com>
	<075BE41A-769D-469E-B2AD-7C7D4DA27406@temporal-wave.com>
Message-ID: <200906232049.n5NKnKet019654@zinc.newtechlaw.com>

Jim:

Need to be a bit cautious with dedicated Eclipse platforms.  Some 
modify platform internals, leading to unexpected incompatibilities 
with third-party plugins.

Rather than trying to add plugins directly to RAA, you could run 
AntlrWorks or a second, current version of Eclipse as an external 
Antlr grammar editor.  Just enable the the workspace auto-refresh 
preference to make external filesystem modifications immediately 
visible in the RAA workspace.

FWIW, AntlrDT is currently closed source but use is free -- no 
procurement required.  The current version does require Eclipse 3.4.

Best,
Gerald


At 12:29 PM 6/23/2009, Jim Idle wrote:
>Yes, it gives the same error from eclipse but it might be because it 
>is Eclipse 3.2.
>
>Jim
>
>On Jun 23, 2009, at 12:40 PM, Edgar Espina 
><<mailto:espina.edgar at gmail.com>espina.edgar at gmail.com> wrote:
>
>>You can't access to the update site from a web browser. The update 
>>site is only accessible from the Eclipse update mechanism.
>>
>>  Regards
>>
>>On Tue, Jun 23, 2009 at 2:37 PM, Jim Idle 
>><<mailto:jimi at temporal-wave.com>jimi at temporal-wave.com> wrote:
>>Yep. The updates site gives a 403 http server error ;)
>>
>>Jim
>>
>>
>>On Jun 23, 2009, at 12:31 PM, Edgar Espina 
>><<mailto:espina.edgar at gmail.com>espina.edgar at gmail.com> wrote:
>>
>>>Hello Jim,
>>>
>>><http://antlrv3ide.sourceforge.net/> ANTLR IDE home: 
>>><http://antlrv3ide.sourceforge.net/>http://antlrv3ide.sourceforge.net/
>>><http://antlrv3ide.sourceforge.net/updates> Update site: 
>>><http://antlrv3ide.sourceforge.net/updates>http://antlrv3ide.sourceforge.net/updates
>>><http://antlrv3ide.sourceforge.net/doc> Doc: 
>>><http://antlrv3ide.sourceforge.net/doc>http://antlrv3ide.sourceforge.net/doc
>>>
>>>  ANTLR IDE works with Eclipse 3.3 or higher
>>>
>>>  Regards
>>>
>>><mailto:jimi at temporal-wave.com>On Tue, Jun 23, 2009 at 2:17 PM, 
>>>Jim Idle <<mailto:jimi at temporal-wave.com>jimi at temporal-wave.com> wrote:
>>>Thanks, I could not locate the source for this before. They will have
>>>to upgrade to a 3.3 based version I think but we will give it a try.
>>>
>>>Do you know that the eclipse update site you list does not work? Looks
>>>like it wants you to add .htaccess but perhaps this is also a 3.2 issue.
>>>
>>>Jim
>>>
>>><mailto:damien.cassou at gmail.com>On Jun 23, 2009, at 11:58 AM, 
>>>Damien Cassou <<mailto:damien.cassou at gmail.com>damien.cassou at gmail.com>
>>>wrote:
>>>
>>><mailto:jimi at temporal-wave.com>> On Tue, Jun 23, 2009 at 6:53 PM, 
>>>Jim Idle<<mailto:jimi at temporal-wave.com>jimi at temporal-wave.com>
>>> > wrote:
>>> >> Are any of the Eclipse plugins open source? I am doing work for a
>>> >> company that is using Rational Software Architect which is based upon
>>> >> Eclipse 3.2.something but they only allow the use of opensource
>>> >> projects without a huge procurement effort. The two plugins I know of
>>> >> do not have source code and so they are being rejected, apart from
>>> >> which they seem to need 3.3 or better.
>>> >
>>><http://antlrv3ide.sourceforge.net/>> ANTLR IDE is free and open 
>>>source: <http://antlrv3ide.sourceforge.net/>http://antlrv3ide.sourceforge.net/.
>>> > Source code is at
>>><http://antlrv3ide.svn.sourceforge.net/viewvc/antlrv3ide/>> 
>>><http://antlrv3ide.svn.sourceforge.net/viewvc/antlrv3ide/>http://antlrv3ide.svn.sourceforge.net/viewvc/antlrv3ide/.
>>> >
>>> > Don't know its compatibility with old Eclipse releases though.
>>> >
>>> > --
>>> > Damien Cassou
>>><http://damiencassou.seasidehosting.st>> 
>>><http://damiencassou.seasidehosting.st>http://damiencassou.seasidehosting.st
>>> >
>>> > "Lambdas are relegated to relative obscurity until Java makes them
>>> > popular by not having them." James Iry
>>>
>>>List: http://www.antlr.org/mailman/listinfo/antlr-interest
>>>Unsubscribe: 
>>>http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>>>
>>>
>>>
>>>
>>>--
>>>edgar
>>
>>
>>
>>
>>--
>>edgar
>
>List: http://www.antlr.org/mailman/listinfo/antlr-interest
>Unsubscribe: 
>http://www.antlr.org/mailman/options/antlr-interest/your-email-address
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090623/34c4bae1/attachment.html 

From antlr at mirality.co.nz  Tue Jun 23 13:49:38 2009
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Wed, 24 Jun 2009 08:49:38 +1200
Subject: [antlr-interest] Eclipse plugins
In-Reply-To: <92b42db60906231040v69239005i4f9038b8516016d2@mail.gmail.co
 m>
References: <1E947488-D480-47B5-AADB-68488F5CFBD4@temporal-wave.com>
	<6ac749c10906230958t687ede5cka3de6879efdd6bab@mail.gmail.com>
	<D5A1CB07-E4C0-4A17-A8C1-3BE148A817BD@temporal-wave.com>
	<92b42db60906231031i46345dbbie99530d7a239ddd7@mail.gmail.com>
	<84F8E626-71CE-4486-9029-77719E1EF515@temporal-wave.com>
	<92b42db60906231040v69239005i4f9038b8516016d2@mail.gmail.com>
Message-ID: <20090623205005.435DE341846A@www.antlr.org>

At 05:40 24/06/2009, Edgar Espina wrote:
>You can't access to the update site from a web browser. The 
>update site is only accessible from the Eclipse update mechanism.

Shouldn't it produce a page explaining that (and where to 
configure it in Eclipse, if that's necessary), rather than just 
spewing an error?


From timblack0 at gmail.com  Tue Jun 23 14:11:04 2009
From: timblack0 at gmail.com (Tim Black)
Date: Tue, 23 Jun 2009 14:11:04 -0700
Subject: [antlr-interest] using ANTLR for IDL compiling/code generation
Message-ID: <18d28d5a0906231411r77b057f1k46c772300a62fc9@mail.gmail.com>

I am investigating customizable IDL compilers / code-generation tools for an
embedded C++ application. What I need is very close to the many available
CORBA IDL compilers. These typically have customizable back-ends which allow
you to do whatever you want with the generated Abstract Syntax Tree (AST),
but you are constrained to using their front-ends (typically implemented
with lex/flex/yacc/bison) which are hard-coded to work with CORBA IDL
specification. (The front-end can be modified, but that's too big a
project.) This means that I am somewhat limited in terms of what I can
represent in the IDL files. (Using CORBA IDL, I can extend the IDL by adding
new constructs into the comments, which can be preserved and passed to the
back-end.)

ANTLR seems capable of helping me create a CORBA-like, but custom, IDL
compiler/code generator. My understanding is that I would define the grammar
for my IDL (using ANTLRWorks), and from this ANTLR generates an
implementation for lexing and parsing an IDL file. I just did this for the
SimpleCalc.g tutorial and generated the lexer/parser code in Python, my
preferred language. It is not obvious to me how to use the resulting
SimpleCalcLexer and SimpleCalcParser classes to create my code generation
application. Is there an example of this somewhere?

Also, I found the ANTLR grammars for CORBA IDL (
http://www.antlr.org/grammar/1072891676218/idl.g and
http://www.antlr.org/grammar/1203688376660/Idl.g) and tried running ANTLR on
them and got these errors:

Running ANTLR on grammar from
http://www.antlr.org/grammar/1072891676218/idl.g:

~tblack\My Documents\Serialization\antlr-3.1.3\grammars\CORBA_IDL_AST>java
org.antlr.Tool idl_ast.g
error(10):  internal error:  : java.lang.Error: Error parsing idl_ast.g:
'header' not expected 'grammar'
org.antlr.tool.GrammarSpelunker.match(GrammarSpelunker.java:74)
org.antlr.tool.GrammarSpelunker.grammarHeader(GrammarSpelunker.java:112)
org.antlr.tool.GrammarSpelunker.parse(GrammarSpelunker.java:84)
org.antlr.Tool.sortGrammarFiles(Tool.java:525)
org.antlr.Tool.process(Tool.java:383)
org.antlr.Tool.main(Tool.java:91)
error(100): idl_ast.g:1:1: syntax error: antlr: idl_ast.g:1:1: unexpected
token: header
error(100):  syntax error: invalid char literal: '\3'
error(100):  syntax error: invalid char literal: '\377'
warning(149): idl_ast.g:0:0: rewrite syntax or operator with no output
option; setting output=AST
error(150):  grammar file idl_ast.g has no rules
error(100): idl_ast.g:0:0: syntax error: assign.types: <AST>:0:0: unexpected
end of subtree
error(100): idl_ast.g:0:0: syntax error: define: <AST>:0:0: unexpected end
of subtree

Running ANTLR on grammar from
http://www.antlr.org/grammar/1203688376660/Idl.g:

~tblack\My Documents\Serialization\antlr-3.1.3\grammars\CORBA_IDL>java
org.antlr.Tool Idl.g
warning(200): Idl.g:717:2: Decision can match input such as "'0'..'9'{'E',
'e'}{'+', '-'}'0'..'9'{'D', 'F', 'd', 'f'}" using multiple alternatives: 3,
4
As a result, alternative(s) 4 were disabled for that input
error(208): Idl.g:723:1: The following token definitions can never be
matched because prior tokens match the same input: FIXED_PT_LITERAL

This one still generated the Lexer/Parser source files, despite the error
(is this correct?)

Terrence's C grammar (http://www.antlr.org/grammar/1153358328744/C.g)
compiled fine.

Any ideas what's wrong with these grammars? Can someone point me in the
right direction?

Thanks!
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090623/5212ce24/attachment.html 

From parrt at cs.usfca.edu  Tue Jun 23 14:29:36 2009
From: parrt at cs.usfca.edu (Terence Parr)
Date: Tue, 23 Jun 2009 14:29:36 -0700
Subject: [antlr-interest] using ANTLR for IDL compiling/code generation
In-Reply-To: <18d28d5a0906231411r77b057f1k46c772300a62fc9@mail.gmail.com>
References: <18d28d5a0906231411r77b057f1k46c772300a62fc9@mail.gmail.com>
Message-ID: <19592C11-3091-4570-8BA9-2957CB9A5110@cs.usfca.edu>

Hi Tim, the IDL grammar is from version 2 of antlr, I'm afraid. you  
will have to manually convert.
Ter
On Jun 23, 2009, at 2:11 PM, Tim Black wrote:

> I am investigating customizable IDL compilers / code-generation  
> tools for an embedded C++ application. What I need is very close to  
> the many available CORBA IDL compilers. These typically have  
> customizable back-ends which allow you to do whatever you want with  
> the generated Abstract Syntax Tree (AST), but you are constrained to  
> using their front-ends (typically implemented with lex/flex/yacc/ 
> bison) which are hard-coded to work with CORBA IDL specification.  
> (The front-end can be modified, but that's too big a project.) This  
> means that I am somewhat limited in terms of what I can represent in  
> the IDL files. (Using CORBA IDL, I can extend the IDL by adding new  
> constructs into the comments, which can be preserved and passed to  
> the back-end.)
>
> ANTLR seems capable of helping me create a CORBA-like, but custom,  
> IDL compiler/code generator. My understanding is that I would define  
> the grammar for my IDL (using ANTLRWorks), and from this ANTLR  
> generates an implementation for lexing and parsing an IDL file. I  
> just did this for the SimpleCalc.g tutorial and generated the lexer/ 
> parser code in Python, my preferred language. It is not obvious to  
> me how to use the resulting SimpleCalcLexer and SimpleCalcParser  
> classes to create my code generation application. Is there an  
> example of this somewhere?
>
> Also, I found the ANTLR grammars for CORBA IDL (http://www.antlr.org/grammar/1072891676218/idl.g 
>  and http://www.antlr.org/grammar/1203688376660/Idl.g) and tried  
> running ANTLR on them and got these errors:
>
> Running ANTLR on grammar from http://www.antlr.org/grammar/1072891676218/idl.g 
> :
>
> ~tblack\My Documents\Serialization\antlr-3.1.3\grammars 
> \CORBA_IDL_AST>java org.antlr.Tool idl_ast.g
> error(10):  internal error:  : java.lang.Error: Error parsing  
> idl_ast.g: 'header' not expected 'grammar'
> org.antlr.tool.GrammarSpelunker.match(GrammarSpelunker.java:74)
> org.antlr.tool.GrammarSpelunker.grammarHeader(GrammarSpelunker.java: 
> 112)
> org.antlr.tool.GrammarSpelunker.parse(GrammarSpelunker.java:84)
> org.antlr.Tool.sortGrammarFiles(Tool.java:525)
> org.antlr.Tool.process(Tool.java:383)
> org.antlr.Tool.main(Tool.java:91)
> error(100): idl_ast.g:1:1: syntax error: antlr: idl_ast.g:1:1:  
> unexpected token: header
> error(100):  syntax error: invalid char literal: '\3'
> error(100):  syntax error: invalid char literal: '\377'
> warning(149): idl_ast.g:0:0: rewrite syntax or operator with no  
> output option; setting output=AST
> error(150):  grammar file idl_ast.g has no rules
> error(100): idl_ast.g:0:0: syntax error: assign.types: <AST>:0:0:  
> unexpected end of subtree
> error(100): idl_ast.g:0:0: syntax error: define: <AST>:0:0:  
> unexpected end of subtree
>
> Running ANTLR on grammar from http://www.antlr.org/grammar/1203688376660/Idl.g 
> :
>
> ~tblack\My Documents\Serialization\antlr-3.1.3\grammars 
> \CORBA_IDL>java org.antlr.Tool Idl.g
> warning(200): Idl.g:717:2: Decision can match input such as  
> "'0'..'9'{'E', 'e'}{'+', '-'}'0'..'9'{'D', 'F', 'd', 'f'}" using  
> multiple alternatives: 3, 4
> As a result, alternative(s) 4 were disabled for that input
> error(208): Idl.g:723:1: The following token definitions can never  
> be matched because prior tokens match the same input: FIXED_PT_LITERAL
>
> This one still generated the Lexer/Parser source files, despite the  
> error (is this correct?)
>
> Terrence's C grammar (http://www.antlr.org/grammar/1153358328744/ 
> C.g) compiled fine.
>
> Any ideas what's wrong with these grammars? Can someone point me in  
> the right direction?
>
> Thanks!
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address


From parrt at cs.usfca.edu  Tue Jun 23 16:33:58 2009
From: parrt at cs.usfca.edu (Terence Parr)
Date: Tue, 23 Jun 2009 16:33:58 -0700
Subject: [antlr-interest] ok, will build an LLVM example for book
Message-ID: <22DF8616-2123-4572-9CE0-52D7F30EC3E8@cs.usfca.edu>

so, what kind of small language should I translate to LLVM IR format?
Ter

From Ivo.Gaydajiev at microfocus.com  Tue Jun 23 23:20:34 2009
From: Ivo.Gaydajiev at microfocus.com (Ivo Gaydajiev)
Date: Wed, 24 Jun 2009 07:20:34 +0100
Subject: [antlr-interest] Using "C" targget with memory manager - "SmartHeap"
Message-ID: <8AF728BD0867F140BF7FA0039F6C137D0116E1E6@nwb-exchange.microfocus.com>

We are using  the "C " target of ANTLR 3.1.3 to generate our parsers. We
are also using the "Smart Heap" library. "Smart Heap" is a memory
manager which needs to redefine the "free" and "malloc". 

But when I tried to build my project using both "Smart Heap" and the
ANTLR "C" target runtime I have faced the following problem.

 

Some structures into "C" runtime ( and also into generated Lexer/Parser
sources)  contains member named "free".  As I mention the "Smart Heap"
library redefines the "free" in order to be able to take control over
the memory management. And when we have a  invocation like the following
one into ANTLR "C" target runtime

recognizer->state->ruleMemo->free(recognizer->state->ruleMemo);

they are convert to 

recognizer->state->ruleMemo->dbg_sh_free(recognizer->state->ruleMemo);

so an error is rised for missing missing member.

 

To overcome this issue we have renamed the  "free"  member to "destroy".

Do you think it is possible to make this an official change. I think
this will easy the usage of "C" target together with some memory
management libraries like "Smart Heap".

 

Thanks, 

 

Micro Focus Live On-Demand

Expert commentary, technical deep-dives, customer case studies and more
100% Online -  100% Free
Over 100 assets available at www.microfocuslive.com

Please consider the environment before printing this e-mail.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090624/15df648f/attachment.html 

From Markus.Mueller at 34DataBanking.ch  Wed Jun 24 00:30:32 2009
From: Markus.Mueller at 34DataBanking.ch (=?iso-8859-1?Q?Markus_M=FCller?=)
Date: Wed, 24 Jun 2009 09:30:32 +0200
Subject: [antlr-interest] PL/SQL grammar
Message-ID: <1103140614.70911245828632692.JavaMail.root@menkar.cosmox.ch>

Hi there,
this is my first posting to this list, and I'm not sure if this the right place for my question... But anyway:
Does anyone has experience with the PL/SQL grammar provided on the ANTLR grammar list?
When doing a "check grammar" there is one warning (ok...) and also an error (something like "ID DOT ID DOT ID DOT... : cannot determine how to continue", beginning in the sql_statement >> expr_expr >> function_call etc.). 
Is this because of the ANTLR version or is this an error in the grammar? Does any one know a fix for that, or is there another PL/SQL grammar out there? Asking google delivers only a few hits, most of them not really what I'm looking for...
Thanks,
Markus
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090624/5f770857/attachment.html 

From damien.cassou at gmail.com  Wed Jun 24 00:55:42 2009
From: damien.cassou at gmail.com (Damien Cassou)
Date: Wed, 24 Jun 2009 09:55:42 +0200
Subject: [antlr-interest] using ANTLR for IDL compiling/code generation
In-Reply-To: <18d28d5a0906231411r77b057f1k46c772300a62fc9@mail.gmail.com>
References: <18d28d5a0906231411r77b057f1k46c772300a62fc9@mail.gmail.com>
Message-ID: <6ac749c10906240055j48900d7dqecebe225ef4745c6@mail.gmail.com>

Hi Tim,

On Tue, Jun 23, 2009 at 11:11 PM, Tim Black<timblack0 at gmail.com> wrote:
> Can someone point me in the right direction?

we are doing something very similar in my research group. We have a
lightweight ADL (https://diaspec.bordeaux.inria.fr/) from which we
generate a dedicated framework in Java.

Source-code is available in
https://gforge.inria.fr/plugins/scmsvn/viewcvs.php/diagen/branches/v2/?root=diagen
(see projects DiaSpec-Parser and DiaSpec-Generator).

Basically, we have a grammar file DiaSpec.g which generates an AST
with specific node classes (Program, Device, TypeRef...). Then,
DiaSpec_SEM_1.g verifies different things on the AST, this is the
semantic pass. Finally, I use a visitor on the AST and StringTemplate
to generate java files (in DiaSpec-Generator).

-- 
Damien Cassou
http://damiencassou.seasidehosting.st

"Lambdas are relegated to relative obscurity until Java makes them
popular by not having them." James Iry

From marco at mtsystems.ch  Wed Jun 24 02:27:42 2009
From: marco at mtsystems.ch (Marco Trudel)
Date: Wed, 24 Jun 2009 11:27:42 +0200
Subject: [antlr-interest] C grammar for recent ANTLR version
Message-ID: <4A41F18E.4020007@mtsystems.ch>

Dear all

Does anyone have a C grammar for a recent ANTLR version?
I'm trying to work with the "C Preprocessor" from 2006 (from 
http://antlr.org/grammar/list).
Unfortunately, it requires antlr-2.7.6.jar, antlr-3.0b5.jar and 
stringtemplate-2.3b9.jar. The later two can not even be downloaded any 
more. Compiling the grammar with recent ANTLR versions is failing 
miserably...


thanks and have a nice day
Marco

From benblo+ANTLR at gmail.com  Wed Jun 24 02:46:42 2009
From: benblo+ANTLR at gmail.com (Benoit Fouletier)
Date: Wed, 24 Jun 2009 11:46:42 +0200
Subject: [antlr-interest] code translation
Message-ID: <b02eee6b0906240246se450ac5vac80abd60035d34c@mail.gmail.com>

Hi!Newbie to ANTLR here, hello all =).

I'm trying to make a translator from Unity's JavaScript (sometimes called
UnityScript) to C#. This particular JS implementation is made to compile to
IL and run on Mono. It's actually based on Boo, the grammar was
written by Rodrigo
B. de Oliveira with ANTLR (don't know which version).
So the 2 languages are *very* similar, they don't differ in principle, only
in syntax. I've already achieved a lot with regular expressions but that
just doesn't seem like the right tool for the job.

90% of the differences are in variable & function declaration, the core is
the same.
Basically, I need to translate this:

*function MyFunction(i : int, b : boolean) : String
{
    return i + " " + b;
}*

to this:

*private string MyFunction(int i, boolean b)
{
    return i + " " + b;
}*


I have access to the compiled lexer & parser (but not the original grammar).
I've tried to go through the token stream and manually rearrange the
declarations (which works but again, doesn't feel like the best way to do
it).
The thing is, I want to retain comments & formatting during translation, but
the lexer doesn't give me the hidden tokens* (and anyway my little fiddlings
would probably explode!).
Also, I don't need a complete compiler: all the code I want to translate
already compiles so I know it's valid.

It seems to me like my needs are fairly simple (!), but I don't know what
approach to take. If I were to rewrite the grammar (or just modify the
ECMAScript grammar found here <http://www.antlr.org/grammar/list>), are
there ways to define translate rules, in the fashion of regex
replacement? Or should I be able to get away with using the compiled lexer I
have?

Sorry my post is so long, I hope I've made the context clear. Cheers =),

        Ben

* I've read the token streams <http://www.antlr2.org/doc/streams.html> article
in the v2 docs (it's not in the v3 docs, is it still valid?), which is very
informative... unfortunately when I setTokenCreator to a hidden stream, I
don't get anything more.
Here's my loop:
*UnityScriptLexer lexer = new UnityScriptLexer(file);
lexer.setTokenCreator(new
antlr.CommonHiddenStreamToken.CommonHiddenStreamTokenCreator());

antlr.IHiddenStreamToken token;
while ((token = (antlr.IHiddenStreamToken)lexer.nextToken()).Type != EOF)
{
    if (token.getHiddenBefore() != null)
        LogToken(token.getHiddenBefore());   // this never happens

    LogToken(token);

    if (token.getHiddenAfter() != null)
        LogToken(token.getHiddenAfter());    // this never happens
}*
LogToken() just outputs to the console.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090624/b8f4dbd1/attachment.html 

From Stefan.Wachter at gmx.de  Wed Jun 24 02:57:26 2009
From: Stefan.Wachter at gmx.de (Stefan Wachter)
Date: Wed, 24 Jun 2009 11:57:26 +0200
Subject: [antlr-interest] how to safe space - small comment on book
	"Language Design Patterns"
Message-ID: <4A41F886.5080504@gmx.de>

Hi Mister Parr,

reading the very informative ebook "Language Design Patterns" I found it 
a little bit repetitive that the patterns are referenced all the time in 
the same way:

Pattern <PatternNo>, <Name of Pattern>, on page <PageNo>.

I suggest to shorten these references because they really are a waste of 
space and make reading somewhat exhausting. The book has a table of 
contents where a reader easily can find the referenced patterns.

Best regards,

Stefan



From damien.cassou at gmail.com  Wed Jun 24 05:04:21 2009
From: damien.cassou at gmail.com (Damien Cassou)
Date: Wed, 24 Jun 2009 14:04:21 +0200
Subject: [antlr-interest] Problem with Strip forgetting some parenthesis
In-Reply-To: <6ac749c10906210344l6ab12f4hc48ae16f09668f92@mail.gmail.com>
References: <6ac749c10906190209i2aa6e498s414472d5bb5ed207@mail.gmail.com> 
	<6ac749c10906210344l6ab12f4hc48ae16f09668f92@mail.gmail.com>
Message-ID: <6ac749c10906240504n17c24b69u32ae7c4b48c65b58@mail.gmail.com>

Hi,

can at least someone tell me if there is a bug in Strip or if it's just me?

On Sun, Jun 21, 2009 at 12:44 PM, Damien Cassou<damien.cassou at gmail.com> wrote:
>> running org.antlr.tool.Strip on my grammar produces an incorrect
>> result. For example, the following:
>>
>> document
>> ?: types+=type_def*
>> ?-> ^(DOCUMENT<Document>[$types] type_def*)
>> ;
>>
>> is translated to:
>>
>> document
>> ?: type_def*
>> ?)
>> ;
>>
>> there is an unexpected right parenthesis.
>
>
> I forgot to say that there are some error messages:
>
> line 12:15 mismatched input '<' expecting ')'
> line 12:43 extraneous input ')' expecting ';'
>
> It seems to me the grammar used by Tool to generate the parser is not
> the same as the one used by Strip.
>
> Can somebody help me please?
>



-- 
Damien Cassou
http://damiencassou.seasidehosting.st

"Lambdas are relegated to relative obscurity until Java makes them
popular by not having them." James Iry

From Waverly.Edwards at genesys.com  Wed Jun 24 08:55:01 2009
From: Waverly.Edwards at genesys.com (Edwards, Waverly)
Date: Wed, 24 Jun 2009 10:55:01 -0500
Subject: [antlr-interest] how to safe space - small comment on
	book	"Language Design Patterns"
In-Reply-To: <4A41F886.5080504@gmx.de>
References: <4A41F886.5080504@gmx.de>
Message-ID: <4A454A950FB157459B59AA50C146C07929D59964@OMA00CEXMBX02.corp.westworlds.com>


I would disagree with you.  I find the references a very strong benefit.
The pattern references give you a pivot point to go check something out if
you find it interesting or maybe reinforcement of an idea if you didn't
understand concept or another place where you can make a connection that may
not have been apparent.  I believe it also helps the person that may take
the non-linear approach to the book (they tend to jump around instead of 
reading from cover to cover).  Clicking on the links/references is also a
bonus.  If you like, you can also use the table of contents or the index in
addition to the inline references. You get multiple ways to reference pertinent 
information.

I am a heavy user of the index and I find the index on some books lacking.
I know I saw XYZ subject or XYZ text somewhere but there was no reference to
it in the index.  This is one benefit of a pdf that I enjoy, "searchability."
I prefer a good old fashioned book, that I can hold in my hand but being able
to quickly locate information via a search is a real benefit.


W.

-----Original Message-----
From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-bounces at antlr.org] On Behalf Of Stefan Wachter
Sent: Wednesday, June 24, 2009 5:57 AM
To: antlr-interest at antlr.org
Subject: [antlr-interest] how to safe space - small comment on book "Language Design Patterns"

Hi Mister Parr,

reading the very informative ebook "Language Design Patterns" I found it 
a little bit repetitive that the patterns are referenced all the time in 
the same way:

Pattern <PatternNo>, <Name of Pattern>, on page <PageNo>.

I suggest to shorten these references because they really are a waste of 
space and make reading somewhat exhausting. The book has a table of 
contents where a reader easily can find the referenced patterns.

Best regards,

Stefan



List: http://www.antlr.org/mailman/listinfo/antlr-interest
Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address

From benblo+ANTLR at gmail.com  Wed Jun 24 09:39:37 2009
From: benblo+ANTLR at gmail.com (Benoit Fouletier)
Date: Wed, 24 Jun 2009 18:39:37 +0200
Subject: [antlr-interest] preserve whitespace example
Message-ID: <b02eee6b0906240939n3b61a8e8pbef9db0843aaab4f@mail.gmail.com>

I'm trying to convert the preserve whitespace
example<http://www.antlr.org/article/whitespace/index.html> to
v3. I've followed the migration guidelines on the wiki but I still have
problems:

   - lexer: *options { charVocabulary = '\3'..'\377'; }* ... deprecated in
   v3?
   - treewalker: lots of # that I'm supposed to convert to $, or to rewrite
   rules... I'm quite lost!
   - overall I'm not sure how I'm supposed to combine the 3 grammars:
      - if I just copy-paste lexer and parser into one grammar, it compiles
      but raises an EarlyExitException on execution...
      - ... then if I also paste the tree, rules are duplicated.
      - if I keep separate files, and import the lexer from the parser, I
      get "*literal has no associated rule: 'if'*"...
      - ... then I import the parser from the tree, and it sees that rules
      are overridden (ANTLRWorks is awesome btw!), but I still don't
know what to
      do with all the # stuff.

I've attached all my grammars & input text...

     Ben

PS: I've also tried to use the v2v3
converter, which raises an exception. I don't even know if the
converter fails to run, or if it
chokes on the grammar.
I believe I exported the classpath correctly since I don't get
the NoClassDefFoundError...

MacPro:v2 to v3 converter Ben$ export
CLASSPATH="$CLASSPATH:/Users/Ben/Desktop/ANTLR/lib/antlr-2.7.7.jar:/Users/Ben/Desktop/ANTLR/lib/antlr-3.1.3.jar:/Users/Ben/Desktop/ANTLR/lib/antlr-runtime-3.1.3.jar:/Users/Ben/Desktop/ANTLR/lib/gunit.jar:/Users/Ben/Desktop/ANTLR/lib/stringtemplate-3.2.jar"
*
*MacPro:v2 to v3 converter Ben$ java v3me originals/InstrLexer.g
*Exception in thread "main" java.lang.NoSuchFieldError: type** **at
ANTLRLexer.mT48(ANTLRLexer.java:140)** **at
ANTLRLexer.mTokens(ANTLRLexer.java:2822)*
* **at org.antlr.runtime.Lexer.nextToken(Lexer.java:84)*
* **at
org.antlr.runtime.CommonTokenStream.fillBuffer(CommonTokenStream.java:95)*
* **at org.antlr.runtime.CommonTokenStream.LT(CommonTokenStream.java:238)*
* **at org.antlr.runtime.CommonTokenStream.LA(CommonTokenStream.java:300)*
* **at ANTLRParser.antlrGrammar(ANTLRParser.java:124)*
* **at v3me.main(v3me.java:25)*
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090624/4329277d/attachment.html 
-------------- next part --------------
// start comment
// another comment

a = 2;
g();
{
	a=3*4;
}
if 3 then f(4 + b);
else {
    b =a; // assign
}
// final
-------------- next part --------------
A non-text attachment was scrubbed...
Name: originals.zip
Type: application/zip
Size: 1750 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20090624/4329277d/attachment.zip 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: converted.zip
Type: application/zip
Size: 1789 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20090624/4329277d/attachment-0001.zip 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: combined.zip
Type: application/zip
Size: 763 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20090624/4329277d/attachment-0002.zip 

From Waverly.Edwards at genesys.com  Wed Jun 24 09:40:04 2009
From: Waverly.Edwards at genesys.com (Edwards, Waverly)
Date: Wed, 24 Jun 2009 11:40:04 -0500
Subject: [antlr-interest] ok, will build an LLVM example for book
In-Reply-To: <22DF8616-2123-4572-9CE0-52D7F30EC3E8@cs.usfca.edu>
References: <22DF8616-2123-4572-9CE0-52D7F30EC3E8@cs.usfca.edu>
Message-ID: <4A454A950FB157459B59AA50C146C07929D59A03@OMA00CEXMBX02.corp.westworlds.com>


What about a subset of C?  Most people will recognize C and be able to make
the connection between the source and the IR.  A procedural language would
be the most straight forward.  If you make up a language, you may spend more
time explaining the rules of the language and lose book space. Also if you
do a procedural language that can do something somewhat useful the reader 
understands, the reader will get excited and want to do more on their own.
Effectively the base becomes an logical Erector Set.

A Smalltalk or Java type language subset might be nice but overly complex, possibly 
loosing your reader.  

As long as we get the base and the pattern, we can build from there.

Ecstatic that there will be an LLVM example for the book!


W.

-----Original Message-----
From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-bounces at antlr.org] On Behalf Of Terence Parr
Sent: Tuesday, June 23, 2009 7:34 PM
To: antlr-interest at antlr.org ANTLR
Subject: [antlr-interest] ok, will build an LLVM example for book

so, what kind of small language should I translate to LLVM IR format?
Ter

List: http://www.antlr.org/mailman/listinfo/antlr-interest
Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address

From damien.cassou at gmail.com  Wed Jun 24 09:47:07 2009
From: damien.cassou at gmail.com (Damien Cassou)
Date: Wed, 24 Jun 2009 18:47:07 +0200
Subject: [antlr-interest] ok, will build an LLVM example for book
In-Reply-To: <4A454A950FB157459B59AA50C146C07929D59A03@OMA00CEXMBX02.corp.westworlds.com>
References: <22DF8616-2123-4572-9CE0-52D7F30EC3E8@cs.usfca.edu> 
	<4A454A950FB157459B59AA50C146C07929D59A03@OMA00CEXMBX02.corp.westworlds.com>
Message-ID: <6ac749c10906240947i2ee826e1n5906a0d697922a80@mail.gmail.com>

On Wed, Jun 24, 2009 at 6:40 PM, Edwards,
Waverly<Waverly.Edwards at genesys.com> wrote:
> A Smalltalk or Java type language subset might be nice but overly complex, possibly
> loosing your reader.

The entire Smalltalk language represents no more than 17 AST nodes. I
don't consider that overly complex.

-- 
Damien Cassou
http://damiencassou.seasidehosting.st

"Lambdas are relegated to relative obscurity until Java makes them
popular by not having them." James Iry

From timblack0 at gmail.com  Wed Jun 24 09:51:06 2009
From: timblack0 at gmail.com (Tim Black)
Date: Wed, 24 Jun 2009 09:51:06 -0700
Subject: [antlr-interest] using ANTLR for IDL compiling/code generation
In-Reply-To: <6ac749c10906240055j48900d7dqecebe225ef4745c6@mail.gmail.com>
References: <18d28d5a0906231411r77b057f1k46c772300a62fc9@mail.gmail.com>
	<6ac749c10906240055j48900d7dqecebe225ef4745c6@mail.gmail.com>
Message-ID: <18d28d5a0906240951x73290f09od488b7710abafbc7@mail.gmail.com>

Thanks, Damien.

I'm largely interested in modeling the public interfaces between objects in
my distributed (C++) embedded system. I basically want an IDL that provides
a single place for defining (a) the layout of simple data structures that
are involved in these interfaces, and (b) the interfaces themselves
(function prototypes essentially). Now that I've gotten through a few
examples, I can sort of see how I can use ANTLR to define the grammar of my
IDL and generate an AST of it, and then walk that AST using a tree parser to
generate custom code. My main hesitation is that it looks like I am still
going to have to implement a preprocessor of sorts to allow #including other
.idl files. Is there anything like support for this in ANTLR?

I read the DiaSpec/DiaGen home page and it looks like it provides a layer
above CORBA. So you can implement a distributed system with the freedom to
later and easily change its "underlying distributed system technology". I'm
not sure why I would want to do that, but it looks like a very interesting
project/product.

Tim

On Wed, Jun 24, 2009 at 12:55 AM, Damien Cassou <damien.cassou at gmail.com>wrote:

> Hi Tim,
>
> On Tue, Jun 23, 2009 at 11:11 PM, Tim Black<timblack0 at gmail.com> wrote:
> > Can someone point me in the right direction?
>
> we are doing something very similar in my research group. We have a
> lightweight ADL (https://diaspec.bordeaux.inria.fr/) from which we
> generate a dedicated framework in Java.
>
> Source-code is available in
>
> https://gforge.inria.fr/plugins/scmsvn/viewcvs.php/diagen/branches/v2/?root=diagen
> (see projects DiaSpec-Parser and DiaSpec-Generator).
>
> Basically, we have a grammar file DiaSpec.g which generates an AST
> with specific node classes (Program, Device, TypeRef...). Then,
> DiaSpec_SEM_1.g verifies different things on the AST, this is the
> semantic pass. Finally, I use a visitor on the AST and StringTemplate
> to generate java files (in DiaSpec-Generator).
>
> --
> Damien Cassou
> http://damiencassou.seasidehosting.st
>
> "Lambdas are relegated to relative obscurity until Java makes them
> popular by not having them." James Iry
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090624/003a8958/attachment.html 

From jsrs701 at yahoo.com  Wed Jun 24 10:30:53 2009
From: jsrs701 at yahoo.com (J. Stephen Riley Silber)
Date: Wed, 24 Jun 2009 10:30:53 -0700 (PDT)
Subject: [antlr-interest] ok, will build an LLVM example for book
Message-ID: <383056.53595.qm@web33304.mail.mud.yahoo.com>


I think Waverly's point wasn't the complexity of the grammar of the language.? No one is arguing the simplicity of the Smalltalk grammar.? His point was that compiling a simple imperative language to LLVM will demonstrate the basics of LLVM IL generation.? "Everyone knows C", so it should make for a relatively simple tutorial.

I know nothing about LLVM besides what's on its project homepage, but I am confident that a C subset example will allow me to ramp up quickly to the point where I could implement "advanced" features such as dynamic dispatch in short order.

Ter, consider this a hearty seconding of Waverly's suggestion.? It's a great idea.

--- On Wed, 6/24/09, Damien Cassou <damien.cassou at gmail.com> wrote:

From: Damien Cassou <damien.cassou at gmail.com>
Subject: Re: [antlr-interest] ok, will build an LLVM example for book
To: "Edwards, Waverly" <Waverly.Edwards at genesys.com>
Cc: "antlr-interest at antlr.org ANTLR" <antlr-interest at antlr.org>
Date: Wednesday, June 24, 2009, 9:47 AM

On Wed, Jun 24, 2009 at 6:40 PM, Edwards,
Waverly<Waverly.Edwards at genesys.com> wrote:
> A Smalltalk or Java type language subset might be nice but overly complex, possibly
> loosing your reader.

The entire Smalltalk language represents no more than 17 AST nodes. I
don't consider that overly complex.

-- 
Damien Cassou
http://damiencassou.seasidehosting.st

"Lambdas are relegated to relative obscurity until Java makes them
popular by not having them." James Iry

List: http://www.antlr.org/mailman/listinfo/antlr-interest
Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090624/7a7ab6a8/attachment.html 

From whschultz at cedrus.com  Wed Jun 24 10:53:30 2009
From: whschultz at cedrus.com (William H. Schultz)
Date: Wed, 24 Jun 2009 10:53:30 -0700
Subject: [antlr-interest] [ANTLR C Target] error: syntax error before
	'CommonTree'
In-Reply-To: <4971C55E-A595-49DA-B48D-0ABD7E1B6F4A@inf.unibz.it>
References: <4971C55E-A595-49DA-B48D-0ABD7E1B6F4A@inf.unibz.it>
Message-ID: <C087F5A9-A835-4D99-BB3F-127582C8AF51@cedrus.com>

For a C target, you should use this setting:

	ASTLabelType=pANTLR3_BASE_TREE;

The one you are using is specific to the Java target.


On Jun 23, 2009, at 6:52 AM, Bruno Cadonna wrote:

> Hi list,
>
> I use ANTLRWorks 1.2.3 with ANTLR 3.1.2 to generate a parser for a
> small grammar in C.
>
> The option section of my grammar is:
>
> options {
> 	language = C;
> 	output = AST;
> 	ASTLabelType = CommonTree;
> }
>
> When I want to compile the generated parser source against the C
> runtime libraries (libantlr3c-3.1.2.tar.gz), I get the following
> errors and warnings:
>
> In file included from gen/sase_fubParser.c:45:
> gen/sase_fubParser.h:124: error: syntax error before 'CommonTree'
> gen/sase_fubParser.h:124: warning: no semicolon at end of struct or
> union
>
...
> ...
> ...
>
> I use autotools (autoconf, automake, libtool) to compile the project.
> It is the first time I use them and I am not a C expert, so it could
> easily be that the problem is not related to ANTLR. But since it seems
> that there is a syntax error in the files generated by ANTLR I thought
> maybe it is a bug.
>
> Could anybody exclude or confirm that?
>
>
> Cheers,
> Bruno
>

-------------------------------
Hank Schultz
Cedrus Corporation
http://www.cedrus.com/



From linlin.xie at siemens.com  Wed Jun 24 11:02:25 2009
From: linlin.xie at siemens.com (Xie, Linlin)
Date: Wed, 24 Jun 2009 20:02:25 +0200
Subject: [antlr-interest] a bug in nilNode in antlr3basetreeadaptor?
Message-ID: <79118B9FE8CE8E49B0D71964A79CB647027848DD@dekomplm002.net.plm.eds.com>

Hi Jim,

 

We've upgraded to 3.1.3 from 3.0.1, it's a lot of pain in the upgrading,
as the many of the features we used of antlr changed in the new version,
especially the node recycling after the rulepostprocessing. 

 

Through debugging, I think it might be a bug in the way antlr's nilNode
works in antlr3basetreeadaptor. It uses the adaptor to create a tree
node from NULL, and then ultimately in newFromTree in antlr3commontoken,
it tries to reuse a node from the factory, if such node exists, then
copy the token and u to the node, but without wiping out the children of
it. When a root_0 is created in this way, and then adaptor->addchild to
root_0, it checks if the root_0 has already any child, if it doesn't it
would add the children of the subtree to it, and reset the subtree's
children to be null. Thus for a root_0 generated from a reused node, the
children wouldn't be null, so the subtree's children won't be reset. 

 

I think you've got to make it consistent, if you are generating a new
empty node, the new node's children have to be null. Plus, I don't think
it's that necessary to reset subtree's children, of course one reason is
that we need to use it in our @after action. 

 

Can you confirm to me if that's a bug, in case I got it wrong.

 

Thanks a lot.

Regards,

Linlin

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090624/ccfa9383/attachment.html 

From parrt at cs.usfca.edu  Wed Jun 24 11:20:39 2009
From: parrt at cs.usfca.edu (Terence Parr)
Date: Wed, 24 Jun 2009 11:20:39 -0700
Subject: [antlr-interest] ok, will build an LLVM example for book
In-Reply-To: <383056.53595.qm@web33304.mail.mud.yahoo.com>
References: <383056.53595.qm@web33304.mail.mud.yahoo.com>
Message-ID: <B35739EA-9E40-47F1-860C-297CC4F526F6@cs.usfca.edu>

That would be the easiest/fastest way to finish the example since I  
made my students do that for class :)

Thanks for the data folks.

Any other requests?  I am going to generate SQL from Java classes via  
reflection to demo pure code gen.

I need a cool but small translation problem too.  A graphics language - 
 > java?  A DFA language to DOT?

Ter

On Jun 24, 2009, at 10:30 AM, J. Stephen Riley Silber wrote:

>
> I think Waverly's point wasn't the complexity of the grammar of the  
> language.  No one is arguing the simplicity of the Smalltalk  
> grammar.  His point was that compiling a simple imperative language  
> to LLVM will demonstrate the basics of LLVM IL generation.   
> "Everyone knows C", so it should make for a relatively simple  
> tutorial.
>
> I know nothing about LLVM besides what's on its project homepage,  
> but I am confident that a C subset example will allow me to ramp up  
> quickly to the point where I could implement "advanced" features  
> such as dynamic dispatch in short order.
>
> Ter, consider this a hearty seconding of Waverly's suggestion.  It's  
> a great idea.
>
> --- On Wed, 6/24/09, Damien Cassou <damien.cassou at gmail.com> wrote:
>
> From: Damien Cassou <damien.cassou at gmail.com>
> Subject: Re: [antlr-interest] ok, will build an LLVM example for book
> To: "Edwards, Waverly" <Waverly.Edwards at genesys.com>
> Cc: "antlr-interest at antlr.org ANTLR" <antlr-interest at antlr.org>
> Date: Wednesday, June 24, 2009, 9:47 AM
>
> On Wed, Jun 24, 2009 at 6:40 PM, Edwards,
> Waverly<Waverly.Edwards at genesys.com> wrote:
> > A Smalltalk or Java type language subset might be nice but overly  
> complex, possibly
> > loosing your reader.
>
> The entire Smalltalk language represents no more than 17 AST nodes. I
> don't consider that overly complex.
>
> -- 
> Damien Cassou
> http://damiencassou.seasidehosting.st
>
> "Lambdas are relegated to relative obscurity until Java makes them
> popular by not having them." James Iry
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090624/68e78b2a/attachment.html 

From jdfrens at gmail.com  Wed Jun 24 11:37:23 2009
From: jdfrens at gmail.com (Jeremy Frens)
Date: Wed, 24 Jun 2009 14:37:23 -0400
Subject: [antlr-interest] How many here are using ANTLR Testing?
Message-ID: <e97a50950906241137p61f25c27mcb4a128dc3997552@mail.gmail.com>

I'm the author of ANTLR Testing (http://antlr-testing.sourceforge.net/), and
I'm curious how many people here (or anywhere) use it.  I've gotten a few
emails from people who've found it and like it.  Now that I'm looking for a
job in industry (after 12+ years in academia), I'm thinking potential
employers might like to know how many are using my library.

For those unfamiliar with the library, it takes a JUnit approach to testing
grammars from ANTLR.  (Unlike gUnit which uses a DSL written with ANTLR for
testing.)  ANTLR Testing (the laziest name for a library, ever) provides
specialized assertion methods for tokens and ASTs.  Its real strength is
using Java's reflection to scan, parse, and tree parse with a fluent
interface.  As an example:

assertTree(
  MyOwnParser.EXPRESSION,  // assert type of root
  "(+(1)(x))",             // assert preorder traversal of AST
  myTester.scanInput("1 + x").parseAs("expression"));

I'm happy to add new features if you like what you see but doesn't quite do
what you want.

jdf

-- 
Jeremy D. Frens
jdfrens at gmail.com
http://www.norecess.org/
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090624/3da4e0b0/attachment.html 

From john.tijoe at googlemail.com  Wed Jun 24 11:41:15 2009
From: john.tijoe at googlemail.com (John Tijoe)
Date: Wed, 24 Jun 2009 20:41:15 +0200
Subject: [antlr-interest] why are these productions different
Message-ID: <6fd66ebb0906241141p492ed30apee40412d816dc432@mail.gmail.com>

Hello,
I was playing with antlrworks and tried to understand the SimpleCalc demo.
And tried to write the expr and the multexpr in a more readable way (at
least to me). But my expr and multexpr seem to be different. Can someone
tell me why they are different I always get the error:
SimpleCalc.g:31:10: [fatal] rule multExpr has non-LL(*) decision due to
recursive rule invocations reachable from alts 1,2.  Resolve by
left-factoring or using syntactic predicates or using backtrack=true option.
What Am I missing??

except from it:

WORKING --> expr    : multExpr ((PLUS | MINUS ) multExpr)*;

NOT WORKING --> expr    : multExpr PLUS multExpr
    | multExpr MINUS multExpr
    | multExpr
    ;

NOT WORKING --> multExpr : atom ((MULT | DIV) atom )*;

NOT WORKING --> multExpr : atom MULT atom
    | atom DIV atom
    atom
    ;

Best regard John


PS:
Whole grammar
grammar SimpleCalc;

tokens {
PLUS = '+' ;
MINUS = '-' ;
MULT = '*' ;
DIV = '/' ;
RPAREN = ')' ;
LPAREN = '(' ;
ASSIGN = '=' ;
}
/*----------------
* PARSER RULES
*----------------*/
prog    : stat+ EOF;

stat    : expr NEWLINE
    | ID ASSIGN expr NEWLINE
    | NEWLINE; //Do nothing

expr    : multExpr ((PLUS | MINUS ) multExpr)*;

/*expr    : multExpr PLUS multExpr
    | multExpr MINUS multExpr
    | multExpr
    ;
*/

//multExpr : atom ((MULT | DIV) atom )*;

multExpr : atom MULT atom
    | atom DIV atom
    atom
    ;

atom : INT
    | ID
    | LPAREN expr RPAREN;
/*----------------
* LEXER RULES
*----------------*/
ID : ('a'..'z'|'A'..'Z')+;
INT : '0'..'9'+;
NEWLINE : '\r'?'\n';
WS : (' '|'\t'|'\n'|'\r')+;
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090624/613c11a6/attachment.html 

From gerald at certiv.net  Wed Jun 24 11:40:39 2009
From: gerald at certiv.net (Gerald Rosenberg)
Date: Wed, 24 Jun 2009 11:40:39 -0700
Subject: [antlr-interest] ok, will build an LLVM example for book
In-Reply-To: <B35739EA-9E40-47F1-860C-297CC4F526F6@cs.usfca.edu>
References: <383056.53595.qm@web33304.mail.mud.yahoo.com>
	<B35739EA-9E40-47F1-860C-297CC4F526F6@cs.usfca.edu>
Message-ID: <200906241842.n5OIg8jO027894@zinc.newtechlaw.com>

At 11:20 AM 6/24/2009, Terence Parr wrote:
>That would be the easiest/fastest way to finish the example since I 
>made my students do that for class :)
>
>Thanks for the data folks.
>
>Any other requests?  I am going to generate SQL from Java classes 
>via reflection to demo pure code gen.
>
>I need a cool but small translation problem too.  A graphics 
>language -> java?  A DFA language to DOT?

DFA to Dot might produce an interesting tie in with the Google Summer 
of Code project:

http://wiki.eclipse.org/Graphviz_DOT_as_a_DSL_for_Zest


From JALuber at gmx.de  Wed Jun 24 12:10:17 2009
From: JALuber at gmx.de (Johannes Luber)
Date: Wed, 24 Jun 2009 21:10:17 +0200
Subject: [antlr-interest] why are these productions different
In-Reply-To: <6fd66ebb0906241141p492ed30apee40412d816dc432@mail.gmail.com>
References: <6fd66ebb0906241141p492ed30apee40412d816dc432@mail.gmail.com>
Message-ID: <20090624191017.164630@gmx.net>

> Hello,
> I was playing with antlrworks and tried to understand the SimpleCalc demo.
> And tried to write the expr and the multexpr in a more readable way (at
> least to me). But my expr and multexpr seem to be different. Can someone
> tell me why they are different I always get the error:
> SimpleCalc.g:31:10: [fatal] rule multExpr has non-LL(*) decision due to
> recursive rule invocations reachable from alts 1,2.  Resolve by
> left-factoring or using syntactic predicates or using backtrack=true
> option.
> What Am I missing??

You're missing that ANTLR is a LL-Parser. LL-Parser <http://en.wikipedia.org/wiki/LL_parser> work by calling the rules directly (transformed into the correct source code). Thus your changes would result in an infinite loop (atom includes a call to expr, I think).

Johannes
> 
> except from it:
> 
> WORKING --> expr    : multExpr ((PLUS | MINUS ) multExpr)*;
> 
> NOT WORKING --> expr    : multExpr PLUS multExpr
>     | multExpr MINUS multExpr
>     | multExpr
>     ;
> 
> NOT WORKING --> multExpr : atom ((MULT | DIV) atom )*;
> 
> NOT WORKING --> multExpr : atom MULT atom
>     | atom DIV atom
>     atom
>     ;
> 
> Best regard John
> 
> 
> PS:
> Whole grammar
> grammar SimpleCalc;
> 
> tokens {
> PLUS = '+' ;
> MINUS = '-' ;
> MULT = '*' ;
> DIV = '/' ;
> RPAREN = ')' ;
> LPAREN = '(' ;
> ASSIGN = '=' ;
> }
> /*----------------
> * PARSER RULES
> *----------------*/
> prog    : stat+ EOF;
> 
> stat    : expr NEWLINE
>     | ID ASSIGN expr NEWLINE
>     | NEWLINE; //Do nothing
> 
> expr    : multExpr ((PLUS | MINUS ) multExpr)*;
> 
> /*expr    : multExpr PLUS multExpr
>     | multExpr MINUS multExpr
>     | multExpr
>     ;
> */
> 
> //multExpr : atom ((MULT | DIV) atom )*;
> 
> multExpr : atom MULT atom
>     | atom DIV atom
>     atom
>     ;
> 
> atom : INT
>     | ID
>     | LPAREN expr RPAREN;
> /*----------------
> * LEXER RULES
> *----------------*/
> ID : ('a'..'z'|'A'..'Z')+;
> INT : '0'..'9'+;
> NEWLINE : '\r'?'\n';
> WS : (' '|'\t'|'\n'|'\r')+;

-- 
GRATIS f?r alle GMX-Mitglieder: Die maxdome Movie-FLAT!
Jetzt freischalten unter http://portal.gmx.net/de/go/maxdome01

From benblo+ANTLR at gmail.com  Wed Jun 24 12:16:53 2009
From: benblo+ANTLR at gmail.com (Benoit Fouletier)
Date: Wed, 24 Jun 2009 21:16:53 +0200
Subject: [antlr-interest] why are these productions different
In-Reply-To: <6fd66ebb0906241141p492ed30apee40412d816dc432@mail.gmail.com>
References: <6fd66ebb0906241141p492ed30apee40412d816dc432@mail.gmail.com>
Message-ID: <b02eee6b0906241216xdfffc35n582d7eb71d464e5a@mail.gmail.com>

Ah, good to see someone struggling as I am ;) !
It seems to me that what you wrote is functionaly different than the
original, you're missing the repetitions:

expr    : multExpr (PLUS multExpr)* | multExpr (MINUS multExpr)* | multExpr;

... but even that wouldn't work, you can repeat plus operations, minus
operations... or a mix of the 2! so in the end I don't think the rule can be
rewritten at all.

I don't know why you get errors though.

           Ben


On Wed, Jun 24, 2009 at 8:41 PM, John Tijoe <john.tijoe at googlemail.com>wrote:

> Hello,
> I was playing with antlrworks and tried to understand the SimpleCalc demo.
> And tried to write the expr and the multexpr in a more readable way (at
> least to me). But my expr and multexpr seem to be different. Can someone
> tell me why they are different I always get the error:
> SimpleCalc.g:31:10: [fatal] rule multExpr has non-LL(*) decision due to
> recursive rule invocations reachable from alts 1,2.  Resolve by
> left-factoring or using syntactic predicates or using backtrack=true option.
> What Am I missing??
>
> except from it:
>
> WORKING --> expr    : multExpr ((PLUS | MINUS ) multExpr)*;
>
> NOT WORKING --> expr    : multExpr PLUS multExpr
>     | multExpr MINUS multExpr
>     | multExpr
>     ;
>
> NOT WORKING --> multExpr : atom ((MULT | DIV) atom )*;
>
> NOT WORKING --> multExpr : atom MULT atom
>     | atom DIV atom
>     atom
>     ;
>
> Best regard John
>
>
> PS:
> Whole grammar
> grammar SimpleCalc;
>
> tokens {
> PLUS = '+' ;
> MINUS = '-' ;
> MULT = '*' ;
> DIV = '/' ;
> RPAREN = ')' ;
> LPAREN = '(' ;
> ASSIGN = '=' ;
> }
> /*----------------
> * PARSER RULES
> *----------------*/
> prog    : stat+ EOF;
>
> stat    : expr NEWLINE
>     | ID ASSIGN expr NEWLINE
>     | NEWLINE; //Do nothing
>
> expr    : multExpr ((PLUS | MINUS ) multExpr)*;
>
> /*expr    : multExpr PLUS multExpr
>     | multExpr MINUS multExpr
>     | multExpr
>     ;
> */
>
> //multExpr : atom ((MULT | DIV) atom )*;
>
> multExpr : atom MULT atom
>     | atom DIV atom
>     atom
>     ;
>
> atom : INT
>     | ID
>     | LPAREN expr RPAREN;
> /*----------------
> * LEXER RULES
> *----------------*/
> ID : ('a'..'z'|'A'..'Z')+;
> INT : '0'..'9'+;
> NEWLINE : '\r'?'\n';
> WS : (' '|'\t'|'\n'|'\r')+;
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090624/5e0f4d4f/attachment.html 

From antlr at mirality.co.nz  Wed Jun 24 12:51:15 2009
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Thu, 25 Jun 2009 07:51:15 +1200
Subject: [antlr-interest] why are these productions different
In-Reply-To: <6fd66ebb0906241141p492ed30apee40412d816dc432@mail.gmail.co
 m>
References: <6fd66ebb0906241141p492ed30apee40412d816dc432@mail.gmail.com>
Message-ID: <20090624195136.44F153418445@www.antlr.org>

At 06:41 25/06/2009, John Tijoe wrote:
>WORKING --> expr    : multExpr ((PLUS | MINUS ) multExpr)*;
>
>NOT WORKING --> expr    : multExpr PLUS multExpr
>     | multExpr MINUS multExpr
>     | multExpr
>     ;

ANTLR is an LL parser; you must always keep the left-side of a 
rule (or rule fragment) unique to avoid ambiguity.  This is why 
the first works but the second doesn't.  (Also, the two aren't 
equivalant.)  To rewrite it properly, you'd need either this:

expr : multExpr
        ( PLUS expr
        | MINUS expr
        )?
      ;

Or this:

expr : multExpr
        ( PLUS multExpr
        | MINUS multExpr
        )*
      ;

(The second is usually a better pattern to follow; the first can 
sometimes get you into trouble.)

>NOT WORKING --> multExpr : atom ((MULT | DIV) atom )*;
>
>NOT WORKING --> multExpr : atom MULT atom
>     | atom DIV atom
>     atom
>     ;
[...]
>atom : INT
>     | ID
>     | LPAREN expr RPAREN;

The second of these won't work for the same reasons.  The first 
ought to work fine, though (even with the reference back to expr, 
despite what Johannes said).


From parrt at cs.usfca.edu  Wed Jun 24 13:07:43 2009
From: parrt at cs.usfca.edu (Terence Parr)
Date: Wed, 24 Jun 2009 13:07:43 -0700
Subject: [antlr-interest] ok, will build an LLVM example for book
In-Reply-To: <200906241842.n5OIg8jO027894@zinc.newtechlaw.com>
References: <383056.53595.qm@web33304.mail.mud.yahoo.com>
	<B35739EA-9E40-47F1-860C-297CC4F526F6@cs.usfca.edu>
	<200906241842.n5OIg8jO027894@zinc.newtechlaw.com>
Message-ID: <38A36554-AC92-4A42-A8A4-DFB075F97FC4@cs.usfca.edu>

yeah, or the processing java lib on top of java2d
T
On Jun 24, 2009, at 11:40 AM, Gerald Rosenberg wrote:

> At 11:20 AM 6/24/2009, Terence Parr wrote:
>> That would be the easiest/fastest way to finish the example since I  
>> made my students do that for class :)
>>
>> Thanks for the data folks.
>>
>> Any other requests?  I am going to generate SQL from Java classes  
>> via reflection to demo pure code gen.
>>
>> I need a cool but small translation problem too.  A graphics  
>> language -> java?  A DFA language to DOT?
>
> DFA to Dot might produce an interesting tie in with the Google  
> Summer of Code project:
>
> http://wiki.eclipse.org/Graphviz_DOT_as_a_DSL_for_Zest
>


From linlin.xie at siemens.com  Wed Jun 24 13:43:49 2009
From: linlin.xie at siemens.com (Xie, Linlin)
Date: Wed, 24 Jun 2009 22:43:49 +0200
Subject: [antlr-interest] another bug in trying to matching EOF, perhaps?
Message-ID: <79118B9FE8CE8E49B0D71964A79CB647027848EE@dekomplm002.net.plm.eds.com>

Hi Jim,

 

I'm trying to do my own error report, so I'm testing with some
ill-formed syntax. Then I came across the MATCH of EOF in the
myParser.c. Through debugging, I found that in getMissingSymbol in
recoverFromMismatchedToken, the ttype passed in is -1, and then inside
of it, when it tries to appen8 which would fail with the second
parameter being  (const char
*)recognizer->state->tokenNames[expectedTokenType].

 

Hope I didn't mistake anything, can you check it and see if it's a real
bug?

 

Many thanks!

Linlin

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090624/f1046952/attachment.html 

From gwlist at grahamwideman.com  Wed Jun 24 14:24:16 2009
From: gwlist at grahamwideman.com (Graham Wideman)
Date: Wed, 24 Jun 2009 14:24:16 -0700
Subject: [antlr-interest] How to get and use AST after parse error?
Message-ID: <4.1.20090624133951.0876dc18@grahamwideman.com>

Folks -- 

I'd appreciate if someone could straighten me out on what is The Intended Way on the following issue:

I'm working on a PHP grammar that produces an AST, testing it against various source code.  

When a parse succeeds, I get a nice AST returned from PhpParser.prog() via prog_return.getTree(). However, if the parse fails, then what's returned via prog_return.getTree() is a tree with just an error node (and this is readily understood from the generated source in PhpParser.prog()).

So:

a) In case of error, is there an intended way of getting access to the actual AST?  I hacked an extra public field into PhpParser to get access to the AST root_0 node, and it seems to be useful, but I would not have expected to need to do that.

b) Is there some reason why I should not want to do that?

c) Why isn't prog() designed to just return the actual AST as usual and provide error info by separate means?

d) I note that prior to normal exits, the PhpParser.prog() refines the completed AST using rulePostProcessing, and setTokenBoundaries. For an AST that's partially complete due to error exit, these still make sense to apply, right?

Thanks,

-- Graham

-------------------
Grammar info:
The PHP grammar is similar to that listed at antlr.org (kuruvila) -- pretty vanilla:
---------------
options {
    backtrack = true; 
    memoize = true;
    k=2;
    output = AST;
    ASTLabelType = CommonTree;
}
---------------


From gwlist at grahamwideman.com  Wed Jun 24 17:38:54 2009
From: gwlist at grahamwideman.com (Graham Wideman)
Date: Wed, 24 Jun 2009 17:38:54 -0700
Subject: [antlr-interest] How to get and use AST after parse error?
Message-ID: <4.1.20090624173757.05171f00@grahamwideman.com>

At 6/24/2009 05:12 PM, you wrote:
>You will probably need to add exception {}
>
>To your rules but most common reason fir getting a single error node  
>is that you rules need reorganizing so they don't throw an exception  
>that nulls out the entire tree when an error is detected, just the  
>tree foe the piece in error.
>
>Jim

Thanks Jim for your observations which directed my attention to the right spot.

After more inspection and trial and error, I think I see what's going on, and it probably wasn't a fair situation under which to expect a sensible result.

My previous description of "failure" was incomplete.  In actuality, the parser proceeded to hit several (over 20) errors (grammar not smart enough to deal with actual input PHP text), and recover each time (or maybe just "recover" :-) ).

Then near the end of the input file, the parser was surprised to see a closing "}" when, due to previous recoveries, it thought there was no block open. This occured in the top-level rule prog(), thus invoking that rule's catch(RecognitionException), which causes the rule to return an errorNode.

(Comedy side note: as it happens, part of the disruption is due to test case happening to use the famous bug-a-boo: identifiers that overlap with PHP keywords... )

So, I guess this is as-designed, though disconcerting, and doesn't return everything that the Parser knows. So I still think there should be a way to get at the AST, even if it's incomplete.

Anyhow, this process has revealed numerous needed improvements to the grammar, and probably the issue I hit here will not be so important when the grammar is closer to adequate.



From damien.cassou at gmail.com  Thu Jun 25 00:13:14 2009
From: damien.cassou at gmail.com (Damien Cassou)
Date: Thu, 25 Jun 2009 09:13:14 +0200
Subject: [antlr-interest] using ANTLR for IDL compiling/code generation
In-Reply-To: <18d28d5a0906240951x73290f09od488b7710abafbc7@mail.gmail.com>
References: <18d28d5a0906231411r77b057f1k46c772300a62fc9@mail.gmail.com> 
	<6ac749c10906240055j48900d7dqecebe225ef4745c6@mail.gmail.com> 
	<18d28d5a0906240951x73290f09od488b7710abafbc7@mail.gmail.com>
Message-ID: <6ac749c10906250013n4563d890x6dfdad1c84ef5f3e@mail.gmail.com>

Hi Tim,

On Wed, Jun 24, 2009 at 6:51 PM, Tim Black<timblack0 at gmail.com> wrote:
> My main hesitation is that it looks like I am still going to have to
> implement a preprocessor of sorts to allow #including other .idl files. Is
> there anything like support for this in ANTLR?

I haven't yet tried to handle includes myself. I haven't thought much
on how to do it.

-- 
Damien Cassou
http://damiencassou.seasidehosting.st

"Lambdas are relegated to relative obscurity until Java makes them
popular by not having them." James Iry

From johan at sikanda.be  Thu Jun 25 00:19:47 2009
From: johan at sikanda.be (Johan Cockx)
Date: Thu, 25 Jun 2009 09:19:47 +0200
Subject: [antlr-interest] How can I selectively avoid tokenization?
Message-ID: <dc07c6b0906250019g7f2a0b7brf14ad02642349638@mail.gmail.com>

Hi,

In my current project,  I need to recognize and parse expressions marked by
$<...> (where '...' represents the omitted expression) in an arbitrary text
(not containing $<).

How can I tell the (Antlr-generated) lexer to ignore text outside the $<...>
marks?

I have tried to recognize each chunk of text between the marks as a single
(large) token,  but that causes all sorts of problems and doesn't seem to be
the right way to go.

Can anyone point me in a better direction?

Thanks,
Johan
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090625/04482479/attachment.html 

From joachim at lusiardi.de  Thu Jun 25 07:51:52 2009
From: joachim at lusiardi.de (Joachim Lusiardi)
Date: Thu, 25 Jun 2009 16:51:52 +0200
Subject: [antlr-interest] Question about CommonTokens in Java Hashmaps
Message-ID: <4A438F08.8070803@lusiardi.de>

Hi,
i have short question about org.antlr.runtime.Token instances in Java
standard collections. Since (as far as i can see from the source) the
mentioned class does not override hashCode and equals i have troubles to
use this with standard containers like HashMap or Vector.

What can i do to solve this problem? I expected that 2 CommonToken
objects have the same tokenindex, start, stop, text, type, channel, line
and charPosition in line they should be equal? and the hashCode also
should be derived from this?

Best greetings
Joachim Lusiardi

From antlr at mirality.co.nz  Thu Jun 25 12:53:43 2009
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Fri, 26 Jun 2009 07:53:43 +1200
Subject: [antlr-interest] using ANTLR for IDL compiling/code generation
In-Reply-To: <18d28d5a0906240951x73290f09od488b7710abafbc7@mail.gmail.co
 m>
References: <18d28d5a0906231411r77b057f1k46c772300a62fc9@mail.gmail.com>
	<6ac749c10906240055j48900d7dqecebe225ef4745c6@mail.gmail.com>
	<18d28d5a0906240951x73290f09od488b7710abafbc7@mail.gmail.com>
Message-ID: <20090625195414.390E53418460@www.antlr.org>

At 04:51 25/06/2009, Tim Black wrote:
>My main hesitation is that it looks like I am still going to have 
>to implement a preprocessor of sorts to allow #including other 
>.idl files. Is there anything like support for this in ANTLR?

You mean like this:

   <http://www.antlr.org/wiki/pages/viewpage.action?pageId=557057>

?


From Marko.vanDooren at cs.kuleuven.be  Thu Jun 25 14:20:42 2009
From: Marko.vanDooren at cs.kuleuven.be (Marko van Dooren)
Date: Thu, 25 Jun 2009 23:20:42 +0200
Subject: [antlr-interest] incorrect order for executing actions?
Message-ID: <C13AF031-5182-401D-A644-DD9AC75A47D1@cs.kuleuven.be>

Hi,

I use ANTLR to instantiate a metamodel of Java by calling the  
appropriate constructors in actions. Sometimes, I must pass on an  
expression to other rules using dynamic scopes. But in the example  
below, which is based on the Java.g grammar on your website, things go  
wrong. I have removed all subrules that are not relevant for the  
problem.

More specifically, the action of 'selector' , which creates an array  
access expression, is executed (indicating that state.backtracking ==  
0), but it results in a NullPointerException because the target field  
of TargetScope is null. That field, however, is set in the rule of  
'unaryExpressionNotPlusMinus', in the action after 'prim=primary'.  At  
that place, the element that is used to set TargetScope::target is  
checked, and an exception is thrown if it is null. That is also the  
only place where 'selector' is used. This means that the action in  
'unaryExpressionNotPlusMinus' was not executed (backtracking != 0),  
but the action in 'selector' was executed (backtracking == 0). Is that  
supposed to happen? It seems weird to me. I have included the  
stacktrace of the parser, which shows that no synpred methods were  
executed in between, and they seem to be the only methods that modify  
the backtracking field, and they always perform a decrement before the  
exit.

Can somebody help me to solve this problem? I could introduce a  
factory interface with a 'Expression setTarget(...)' method and return  
factory objects instead of directly returning expressions, but that  
seems to defeat the purpose of having dynamic scopes. I would also  
want to avoid inlining because I also use the TargetScope in a number  
of other places where the 'usage dependencies' are much more  
complicated.

If you want to, you can download the complete Java.g file at http://www.cs.kuleuven.be/~marko/Java.g 
. If you want to compile the parser, you'll need to check out the  
following git repositories (and some help from me to sort out the  
classpath ;) :
http://www.cs.kuleuven.be/~marko/gitroot/code/chameleon.git
http://www.cs.kuleuven.be/~marko/gitroot/code/chameleon-support.git
http://www.cs.kuleuven.be/~marko/gitroot/code/jnome.git  (this is the  
Java metamodel which includes Java.g)
http://www.cs.kuleuven.be/~marko/gitroot/code/rejuse.git

Kind regards,

Marko van Dooren






scope TargetScope {
   InvocationTarget target;
}

unaryExpressionNotPlusMinus returns [Expression element]
scope TargetScope;
     :   prim=primary
            {check_null(prim.element);  
$TargetScope::target=prim.element; retval.element=prim.element;}
         (sel=selector
            {$TargetScope::target=sel.element; retval.element =  
sel.element;}
         )*
         (
            '++' {retval.element = new PostfixOperatorInvocation("++",  
retval.element);}
          | '--' {retval.element = new PostfixOperatorInvocation("--",  
retval.element);}
         )?
     ;



// NEEDS_TARGET
selector returns [Expression element]
	:	
        '[' arrex=expression ']'
           {retval.element = new ArrayAccessExpression((Expression) 
$TargetScope::target);
            ((ArrayAccessExpression)retval.element).addIndex(new  
FilledArrayIndex(arrex.element));
           }
	;







46 Parsing /Users/marko/git/jnome/testsource/jutil/src/org/jutil/java/ 
collections/SkipList.java
java.lang.NullPointerException
	at  
jnome 
.core 
.expression.ArrayAccessExpression.setTarget(ArrayAccessExpression.java: 
38)
	at  
jnome 
.core 
.expression.ArrayAccessExpression.<init>(ArrayAccessExpression.java:27)
	at jnome.input.parser.JavaParser.selector(JavaParser.java:16037)
	at  
jnome 
.input.parser.JavaParser.unaryExpressionNotPlusMinus(JavaParser.java: 
15715)
	at jnome.input.parser.JavaParser.castExpression(JavaParser.java:16185)
	at  
jnome 
.input.parser.JavaParser.unaryExpressionNotPlusMinus(JavaParser.java: 
15674)
	at jnome.input.parser.JavaParser.unaryExpression(JavaParser.java:15548)
	at  
jnome.input.parser.JavaParser.multiplicativeExpression(JavaParser.java: 
15217)
	at jnome.input.parser.JavaParser.additiveExpression(JavaParser.java: 
15065)
	at jnome.input.parser.JavaParser.shiftExpression(JavaParser.java:14796)
	at jnome.input.parser.JavaParser.relationalExpression(JavaParser.java: 
14511)
	at jnome.input.parser.JavaParser.instanceOfExpression(JavaParser.java: 
14418)
	at jnome.input.parser.JavaParser.equalityExpression(JavaParser.java: 
14271)
	at jnome.input.parser.JavaParser.andExpression(JavaParser.java:14165)
	at  
jnome.input.parser.JavaParser.exclusiveOrExpression(JavaParser.java: 
14062)
	at  
jnome.input.parser.JavaParser.inclusiveOrExpression(JavaParser.java: 
13959)
	at  
jnome.input.parser.JavaParser.conditionalAndExpression(JavaParser.java: 
13859)
	at  
jnome.input.parser.JavaParser.conditionalOrExpression(JavaParser.java: 
13759)
	at  
jnome.input.parser.JavaParser.conditionalExpression(JavaParser.java: 
13655)
	at jnome.input.parser.JavaParser.expression(JavaParser.java:13270)
	at jnome.input.parser.JavaParser.expression(JavaParser.java:13292)
	at jnome.input.parser.JavaParser.statementExpression(JavaParser.java: 
13150)
	at jnome.input.parser.JavaParser.statement(JavaParser.java:11885)
	at jnome.input.parser.JavaParser.blockStatement(JavaParser.java:10875)
	at jnome.input.parser.JavaParser.constructorBody(JavaParser.java:8334)
	at  
jnome 
.input.parser.JavaParser.constructorDeclaratorRest(JavaParser.java:5874)
	at  
jnome.input.parser.JavaParser.constructorDeclaration(JavaParser.java: 
3952)
	at jnome.input.parser.JavaParser.memberDecl(JavaParser.java:3770)
	at jnome.input.parser.JavaParser.classBodyDeclaration(JavaParser.java: 
3584)
	at jnome.input.parser.JavaParser.classBody(JavaParser.java:3274)
	at  
jnome.input.parser.JavaParser.normalClassDeclaration(JavaParser.java: 
1954)
	at jnome.input.parser.JavaParser.classDeclaration(JavaParser.java:1762)
	at jnome.input.parser.JavaParser.memberDecl(JavaParser.java:3804)
	at jnome.input.parser.JavaParser.classBodyDeclaration(JavaParser.java: 
3584)
	at jnome.input.parser.JavaParser.classBody(JavaParser.java:3274)
	at  
jnome.input.parser.JavaParser.normalClassDeclaration(JavaParser.java: 
1954)
	at jnome.input.parser.JavaParser.classDeclaration(JavaParser.java:1762)
	at  
jnome 
.input.parser.JavaParser.classOrInterfaceDeclaration(JavaParser.java: 
1239)
	at jnome.input.parser.JavaParser.typeDeclaration(JavaParser.java:1135)
	at jnome.input.parser.JavaParser.compilationUnit(JavaParser.java:824)
	at jnome.input.JavaMetaModelFactory.parse(JavaMetaModelFactory.java: 
540)
	at  
jnome.input.JavaMetaModelFactory.lexAndParse(JavaMetaModelFactory.java: 
480)
	at  
jnome 
.input.JavaMetaModelFactory.addFileToGraph(JavaMetaModelFactory.java: 
402)
	at  
jnome 
.input.JavaMetaModelFactory.getMetaModel(JavaMetaModelFactory.java:101)
	at jnome.input.JavaMetaModelFactory.main(JavaMetaModelFactory.java:576)


Disclaimer: http://www.kuleuven.be/cwis/email_disclaimer.htm
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090625/a4823eb7/attachment.html 

From jimi at temporal-wave.com  Thu Jun 25 16:14:16 2009
From: jimi at temporal-wave.com (Jim Idle)
Date: Thu, 25 Jun 2009 18:14:16 -0500
Subject: [antlr-interest] incorrect order for executing actions?
In-Reply-To: <C13AF031-5182-401D-A644-DD9AC75A47D1@cs.kuleuven.be>
References: <C13AF031-5182-401D-A644-DD9AC75A47D1@cs.kuleuven.be>
Message-ID: <1B857059-803A-4585-AAD9-AF5963BE6BC3@temporal-wave.com>

Your references should be $sel and not sel. If that does not work then  
you are most likely not actually hitting the rule that you think you  
are or you are getting to the rule that accesses the scope through a  
rule path that does not create the scope so the scope stack is empty.  
Use the java debugger. Break before you access the scope and look at  
the callstack trace. Check that the scope is not empty. If it is not  
then you may have set the value in a previous scope.

You probably need to move the scope. Higher up the rule chain so you  
know it is valid

Also move all those members in to an abstract superclass as well as  
much of the actionlogic as you can. Ibwould merge those 500 import  
statements and also go to the store and buy me some / and * keys ;)

Jim

On Jun 25, 2009, at 4:20 PM, Marko van Dooren <Marko.vanDooren at cs.kuleuven.be 
 > wrote:

> Hi,
>
> I use ANTLR to instantiate a metamodel of Java by calling the  
> appropriate constructors in actions. Sometimes, I must pass on an  
> expression to other rules using dynamic scopes. But in the example  
> below, which is based on the Java.g grammar on your website, things  
> go wrong. I have removed all subrules that are not relevant for the  
> problem.
>
> More specifically, the action of 'selector' , which creates an array  
> access expression, is executed (indicating that state.backtracking  
> == 0), but it results in a NullPointerException because the target  
> field of TargetScope is null. That field, however, is set in the  
> rule of 'unaryExpressionNotPlusMinus', in the action after  
> 'prim=primary'.  At that place, the element that is used to set  
> TargetScope::target is checked, and an exception is thrown if it is  
> null. That is also the only place where 'selector' is used. This  
> means that the action in 'unaryExpressionNotPlusMinus' was not  
> executed (backtracking != 0), but the action in 'selector' was  
> executed (backtracking == 0). Is that supposed to happen? It seems  
> weird to me. I have included the stacktrace of the parser, which  
> shows that no synpred methods were executed in between, and they  
> seem to be the only methods that modify the backtracking field, and  
> they always perform a decrement before the exit.
>
> Can somebody help me to solve this problem? I could introduce a  
> factory interface with a 'Expression setTarget(...)' method and  
> return factory objects instead of directly returning expressions,  
> but that seems to defeat the purpose of having dynamic scopes. I  
> would also want to avoid inlining because I also use the TargetScope  
> in a number of other places where the 'usage dependencies' are much  
> more complicated.
>
> If you want to, you can download the complete Java.g file at http://www.cs.kuleuven.be/~marko/Java.g 
> . If you want to compile the parser, you'll need to check out the  
> following git repositories (and some help from me to sort out the  
> classpath ;) :
> http://www.cs.kuleuven.be/~marko/gitroot/code/chameleon.git
> http://www.cs.kuleuven.be/~marko/gitroot/code/chameleon-support.git
> http://www.cs.kuleuven.be/~marko/gitroot/code/jnome.git  (this is  
> the Java metamodel which includes Java.g)
> http://www.cs.kuleuven.be/~marko/gitroot/code/rejuse.git
>
> Kind regards,
>
> Marko van Dooren
>
>
>
>
>
>
> scope TargetScope {
>   InvocationTarget target;
> }
>
> unaryExpressionNotPlusMinus returns [Expression element]
> scope TargetScope;
>     :   prim=primary
>            {check_null(prim.element);  
> $TargetScope::target=prim.element; retval.element=prim.element;}
>         (sel=selector
>            {$TargetScope::target=sel.element; retval.element =  
> sel.element;}
>         )*
>         (
>            '++' {retval.element = new PostfixOperatorInvocation("+ 
> +", retval.element);}
>          | '--' {retval.element = new  
> PostfixOperatorInvocation("--", retval.element);}
>         )?
>     ;
>
>
>
> // NEEDS_TARGET
> selector returns [Expression element]
> 	:	
>        '[' arrex=expression ']'
>           {retval.element = new ArrayAccessExpression((Expression) 
> $TargetScope::target);
>            ((ArrayAccessExpression)retval.element).addIndex(new  
> FilledArrayIndex(arrex.element));
>           }
> 	;
>
>
>
>
>
>
>
> 46 Parsing /Users/marko/git/jnome/testsource/jutil/src/org/jutil/ 
> java/collections/SkipList.java
> java.lang.NullPointerException
> 	at  
> jnome. 
> core. 
> expression. 
> ArrayAccessExpression.setTarget(ArrayAccessExpression.java:38)
> 	at  
> jnome. 
> core. 
> expression.ArrayAccessExpression.<init>(ArrayAccessExpression.java:27)
> 	at jnome.input.parser.JavaParser.selector(JavaParser.java:16037)
> 	at  
> jnome. 
> input.parser.JavaParser.unaryExpressionNotPlusMinus(JavaParser.java: 
> 15715)
> 	at jnome.input.parser.JavaParser.castExpression(JavaParser.java: 
> 16185)
> 	at  
> jnome. 
> input.parser.JavaParser.unaryExpressionNotPlusMinus(JavaParser.java: 
> 15674)
> 	at jnome.input.parser.JavaParser.unaryExpression(JavaParser.java: 
> 15548)
> 	at  
> jnome. 
> input.parser.JavaParser.multiplicativeExpression(JavaParser.java: 
> 15217)
> 	at jnome.input.parser.JavaParser.additiveExpression(JavaParser.java: 
> 15065)
> 	at jnome.input.parser.JavaParser.shiftExpression(JavaParser.java: 
> 14796)
> 	at  
> jnome.input.parser.JavaParser.relationalExpression(JavaParser.java: 
> 14511)
> 	at  
> jnome.input.parser.JavaParser.instanceOfExpression(JavaParser.java: 
> 14418)
> 	at jnome.input.parser.JavaParser.equalityExpression(JavaParser.java: 
> 14271)
> 	at jnome.input.parser.JavaParser.andExpression(JavaParser.java:14165)
> 	at  
> jnome.input.parser.JavaParser.exclusiveOrExpression(JavaParser.java: 
> 14062)
> 	at  
> jnome.input.parser.JavaParser.inclusiveOrExpression(JavaParser.java: 
> 13959)
> 	at  
> jnome. 
> input.parser.JavaParser.conditionalAndExpression(JavaParser.java: 
> 13859)
> 	at  
> jnome. 
> input.parser.JavaParser.conditionalOrExpression(JavaParser.java:13759)
> 	at  
> jnome.input.parser.JavaParser.conditionalExpression(JavaParser.java: 
> 13655)
> 	at jnome.input.parser.JavaParser.expression(JavaParser.java:13270)
> 	at jnome.input.parser.JavaParser.expression(JavaParser.java:13292)
> 	at  
> jnome.input.parser.JavaParser.statementExpression(JavaParser.java: 
> 13150)
> 	at jnome.input.parser.JavaParser.statement(JavaParser.java:11885)
> 	at jnome.input.parser.JavaParser.blockStatement(JavaParser.java: 
> 10875)
> 	at jnome.input.parser.JavaParser.constructorBody(JavaParser.java: 
> 8334)
> 	at  
> jnome. 
> input.parser.JavaParser.constructorDeclaratorRest(JavaParser.java: 
> 5874)
> 	at  
> jnome.input.parser.JavaParser.constructorDeclaration(JavaParser.java: 
> 3952)
> 	at jnome.input.parser.JavaParser.memberDecl(JavaParser.java:3770)
> 	at  
> jnome.input.parser.JavaParser.classBodyDeclaration(JavaParser.java: 
> 3584)
> 	at jnome.input.parser.JavaParser.classBody(JavaParser.java:3274)
> 	at  
> jnome.input.parser.JavaParser.normalClassDeclaration(JavaParser.java: 
> 1954)
> 	at jnome.input.parser.JavaParser.classDeclaration(JavaParser.java: 
> 1762)
> 	at jnome.input.parser.JavaParser.memberDecl(JavaParser.java:3804)
> 	at  
> jnome.input.parser.JavaParser.classBodyDeclaration(JavaParser.java: 
> 3584)
> 	at jnome.input.parser.JavaParser.classBody(JavaParser.java:3274)
> 	at  
> jnome.input.parser.JavaParser.normalClassDeclaration(JavaParser.java: 
> 1954)
> 	at jnome.input.parser.JavaParser.classDeclaration(JavaParser.java: 
> 1762)
> 	at  
> jnome. 
> input.parser.JavaParser.classOrInterfaceDeclaration(JavaParser.java: 
> 1239)
> 	at jnome.input.parser.JavaParser.typeDeclaration(JavaParser.java: 
> 1135)
> 	at jnome.input.parser.JavaParser.compilationUnit(JavaParser.java:824)
> 	at jnome.input.JavaMetaModelFactory.parse(JavaMetaModelFactory.java: 
> 540)
> 	at  
> jnome. 
> input.JavaMetaModelFactory.lexAndParse(JavaMetaModelFactory.java:480)
> 	at  
> jnome. 
> input.JavaMetaModelFactory.addFileToGraph(JavaMetaModelFactory.java: 
> 402)
> 	at  
> jnome. 
> input.JavaMetaModelFactory.getMetaModel(JavaMetaModelFactory.java:101)
> 	at jnome.input.JavaMetaModelFactory.main(JavaMetaModelFactory.java: 
> 576)
>
>
> Disclaimer: http://www.kuleuven.be/cwis/email_disclaimer.htm for  
> more information.
> e-span" style="font-size: 11px; ">
>
> Disclaimer: http://www.kuleuven.be/cwis/email_disclaimer.htm for  
> more information.
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090625/29e2ff82/attachment.html 

From timblack0 at gmail.com  Thu Jun 25 16:24:06 2009
From: timblack0 at gmail.com (Tim Black)
Date: Thu, 25 Jun 2009 16:24:06 -0700
Subject: [antlr-interest] using ANTLR for IDL compiling/code generation
In-Reply-To: <4a43d5d4.070bca0a.1084.5844SMTPIN_ADDED@mx.google.com>
References: <18d28d5a0906231411r77b057f1k46c772300a62fc9@mail.gmail.com>
	<6ac749c10906240055j48900d7dqecebe225ef4745c6@mail.gmail.com>
	<18d28d5a0906240951x73290f09od488b7710abafbc7@mail.gmail.com>
	<4a43d5d4.070bca0a.1084.5844SMTPIN_ADDED@mx.google.com>
Message-ID: <18d28d5a0906251624m1569a01dl1286098618bcae48@mail.gmail.com>

Yep. Thanks.

On Thu, Jun 25, 2009 at 12:53 PM, Gavin Lambert <antlr at mirality.co.nz>wrote:

> At 04:51 25/06/2009, Tim Black wrote:
>
>> My main hesitation is that it looks like I am still going to have to
>> implement a preprocessor of sorts to allow #including other .idl files. Is
>> there anything like support for this in ANTLR?
>>
>
> You mean like this:
>
>  <http://www.antlr.org/wiki/pages/viewpage.action?pageId=557057>
>
> ?
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090625/26d8dc3d/attachment.html 

From foxie at live.cn  Thu Jun 25 17:22:15 2009
From: foxie at live.cn (Gowerivy)
Date: Fri, 26 Jun 2009 08:22:15 +0800
Subject: [antlr-interest] FW: Some about C header parser problems
Message-ID: <SNT114-W33248CAC865800FA1CEA4FB2350@phx.gbl>



 


From: foxie at live.cn
To: antlr-interest-owner at antlr.org
Subject: Some about C header parser problems
Date: Fri, 26 Jun 2009 08:20:11 +0800




 


Hi,
I am writing a C header parser, but I find some problems about macro define specifier.
There are three kinds of macro define specifier:
1.  No arguments macro define specifier.The general form is: #define identifier string(#define  Ext  extern)
2.  With arguments macro define specifier. The general form is: #define identifer(argument list) string(#define Max(a,b)  a>b? a:b)
3.  Only  identifier. The general form is : #deifine identifier(#define _ADC)
 
My specifier is that:
define_specifier
 : PDefine (Symbol  | define_identifier) (t=(expression | key_word))?
 
key_word
 :'auto' | 'break' | 'case' | 'char' |'const' |'continue'|'default' | 'do' | 'double' |'else' 
 |'enum' | 'extern' | 'float' | 'for' | 'goto' | 'if' | 'int' | 'long' | 'register' | 'return'
 | 'short' | 'signed' | 'sizeof' | 'static' | 'struct' | 'switch' |'union' |'ussigned'
 | 'void' | 'voliatile' |'while' | 'typedef'
 ;
  
PDefine
 :'#define'
 ;
 
define_identifier
 :Symbol '(' define_qualifier_list')'
 ;
   
define_qualifier_list
 :Symbol (',' Symbol)*
 |Number (',' Number)*
 ;
But this form specifier is wrong. And for axmple test:
1.     #ifndef __STM32F10x_MAP_H
        #define __STM32F10x_MAP_
        #ifndef EXT
        #define EXT extern
        #endif /* EXT */
        #endif/*__STM32F10x_MAP_H*/
NOTE:extern is also a rule
2.    #ifndef __STM32F10x_TYPE_H
      #define __STM32F10x_TYPE_H
      typedef signed long  s32;
      #endif/*__STM32F10x_MAP_H*/
NOTE: tyedef is alse a rule
3. #ifdef  DEBUG
  #define assert_param(expr) ((expr) ? (void)0 : assert_failed((u8 *)__FILE__, __LINE__))
  void assert_failed(u8* file, u32 line);
  #else
  #define assert_param(expr) ((void)0)
  #endif /* DEBUG */
These three exmple all can't pass test.
I looking forword for your reply. Thanks a lot.




??????????MSN??? ?????



??????????????MSN??????????????? ?????


??????????MSN??? ?????
_________________________________________________________________
????????????MClub?????????
http://club.msn.cn/?from=10
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090626/8ff643fb/attachment.html 

From thikone at gmail.com  Thu Jun 25 14:51:42 2009
From: thikone at gmail.com (Andrew Haritonkin)
Date: Thu, 25 Jun 2009 23:51:42 +0200
Subject: [antlr-interest] PL/SQL grammar
Message-ID: <a382aa010906251451r3c42a2bdk8db576acb48436f7@mail.gmail.com>

> Date: Wed, 24 Jun 2009 09:30:32 +0200
> From: Markus M?ller <Markus.Mueller at 34DataBanking.ch>
> Subject: [antlr-interest] PL/SQL grammar
> To: antlr-interest at antlr.org
> Message-ID:
> ? ? ? ?<1103140614.70911245828632692.JavaMail.root at menkar.cosmox.ch>
> Content-Type: text/plain; charset="us-ascii"
>
> Hi there,
> this is my first posting to this list, and I'm not sure if this the right place for my question... But anyway:
> Does anyone has experience with the PL/SQL grammar provided on the ANTLR grammar list?
> When doing a "check grammar" there is one warning (ok...) and also an error (something like "ID DOT ID DOT ID DOT... : cannot determine how to continue", beginning in the sql_statement >> expr_expr >> function_call etc.).
> Is this because of the ANTLR version or is this an error in the grammar? Does any one know a fix for that, or is there another PL/SQL grammar out there? Asking google delivers only a few hits, most of them not really what I'm looking for...
> Thanks,
> Markus

Hi Markus,

Yep, it's known issue. This grammar was tested with ANTLR 3.0.1, but
ever since ANTLR 3.1 it raises this error. Shame on me, I didn't have
the time to figure out why... I have a hot fix for that, though.

You need to change one rule to make it work with ANTLR 3.1.x:

column_spec
   :       sql_identifier ( DOT sql_identifier )*;

ANTLR 3.1.x cannot compile it, but raises a error:

error(206): PLSQL3.g:791:4: Alternative 2: after matching input such
as ID DOT ID DOT ID DOT ID DOT decision cannot predict what comes next
due to recursion overflow to expr_add from sql_expression and to
expr_mul from expr_add

While with ANTLR 3.0.1 it was compiling just fine... Anyway, replace
it with this:

column_spec
   :       sql_identifier ( DOT sql_identifier ( DOT sql_identifier )? )?;

Another interesting detail, ANTLR 3.1.3 doesn't recorgnize option k=*,
not a big problem though, since it's default option anyway.

Also change maximum allowed memory for Java VM before starting ANTLR.
It needs at least 256 Mb to process this grammar ;-)

Attached is my latest version with some other fixes (many thanks to
people who provided feedback) for C# and Java.

This was my second ANTLR grammar (first one failed half of my tests)
and it's not perfect. But quite comprehensive and can parse lots of
nasty code. I'm thinking about making a new revision, but I cannot say
when I would do that...

Andrew
-------------- next part --------------
A non-text attachment was scrubbed...
Name: PLSQL3.g
Type: application/octet-stream
Size: 41725 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20090625/ecbb1671/attachment-0002.obj 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: PLSQL3j.g
Type: application/octet-stream
Size: 44741 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20090625/ecbb1671/attachment-0003.obj 

From foxie at live.cn  Thu Jun 25 19:47:00 2009
From: foxie at live.cn (Gowerivy)
Date: Fri, 26 Jun 2009 10:47:00 +0800
Subject: [antlr-interest] Some about C header parser problems
Message-ID: <SNT114-W47FF8DD296EDC340CF810DB2350@phx.gbl>



 


Hi,
I am writing a C header parser, but I find some problems about macro define specifier.
There are three kinds of macro define specifier:
1.  No arguments macro define specifier.The general form is: #define identifier string(#define  Ext  extern)
2.  With arguments macro define specifier. The general form is: #define identifer(argument list) string(#define Max(a,b)  a>b? a:b)
3.  Only  identifier. The general form is : #deifine identifier(#define _ADC)
 
My specifier is that:
define_specifier
 : PDefine (Symbol  | define_identifier) (t=(expression | key_word))?
 
key_word
 :'auto' | 'break' | 'case' | 'char' |'const' |'continue'|'default' | 'do' | 'double' |'else' 
 |'enum' | 'extern' | 'float' | 'for' | 'goto' | 'if' | 'int' | 'long' | 'register' | 'return'
 | 'short' | 'signed' | 'sizeof' | 'static' | 'struct' | 'switch' |'union' |'ussigned'
 | 'void' | 'voliatile' |'while' | 'typedef'
 ;
  
PDefine
 :'#define'
 ;
 
define_identifier
 :Symbol '(' define_qualifier_list')'
 ;
   
define_qualifier_list
 :Symbol (',' Symbol)*
 |Number (',' Number)*
 ;
But this form specifier is wrong. And for axmple test:
1.     #ifndef __STM32F10x_MAP_H
        #define __STM32F10x_MAP_
        #ifndef EXT
        #define EXT extern
        #endif /* EXT */
        #endif/*__STM32F10x_MAP_H*/
NOTE:extern is also a rule
2.    #ifndef __STM32F10x_TYPE_H
      #define __STM32F10x_TYPE_H
      typedef signed long  s32;
      #endif/*__STM32F10x_MAP_H*/
NOTE: tyedef is alse a rule
3. #ifdef  DEBUG
  #define assert_param(expr) ((expr) ? (void)0 : assert_failed((u8 *)__FILE__, __LINE__))
  void assert_failed(u8* file, u32 line);
  #else
  #define assert_param(expr) ((void)0)
  #endif /* DEBUG */
These three exmple all can't pass test.
I looking forword for your reply. Thanks a lot.




??????????MSN??? ?????
_________________________________________________________________
????????????MClub?????????
http://club.msn.cn/?from=10
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090626/c0808214/attachment.html 

From jpsuarezc at gmail.com  Fri Jun 26 06:54:47 2009
From: jpsuarezc at gmail.com (juan pablo suarez)
Date: Fri, 26 Jun 2009 15:54:47 +0200
Subject: [antlr-interest] Problem with ANTLR RecognitionException!!
Message-ID: <2f41c3060906260654m2b1fab62m43fc9f81b8a804e4@mail.gmail.com>

hi everybody i have a problem with RecognitionException in JAVA

I have an application SWT ap1,  and i did other application SWT ap2 that use
the antlr-3.1.3 and where there are a TextBox for write a text that will be
analice for the lexer and the parser generate with ANTLR.
I have too an application that tests ap2, and it works good, the input text
is analiced ant the AST is generated correctly, but after integrate the ap2
at menu of ap1, the "SendButton" do nothing, none function is executed, but
if i erase the block try-catch that surround
*GrammaireParser.first_instruction_return
result  = g.first_instruction()*, all the functions before this instruction
works fine..., after he sais that *Unhandled exception type
RecognitionException*, and if i let the try-catch block, i do nothing!

So, i dont know what to do!

Help me if u cant

Thank U! en avance :)
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090626/8b8fd2ed/attachment.html 

From joachim at lusiardi.de  Fri Jun 26 09:29:57 2009
From: joachim at lusiardi.de (Joachim Lusiardi)
Date: Fri, 26 Jun 2009 18:29:57 +0200
Subject: [antlr-interest] Question about CommonTokens in Java Hashmaps
In-Reply-To: <1D8FF376-0F58-415E-BADC-424BDE44E54E@temporal-wave.com>
References: <4A438F08.8070803@lusiardi.de>
	<1D8FF376-0F58-415E-BADC-424BDE44E54E@temporal-wave.com>
Message-ID: <4A44F785.3070709@lusiardi.de>

Hi again,
I derived my own token class from CommonToken fitting my needs. Now i
wonder how i can get the lexer to use my class instead of CommonToken. I
assume i should derive my own lexer and use the superclass option?
Best greetings
Joachim Lusiardi

Jim Idle schrieb:
> Derive your own token from CommonToken and use that as the token type.
> 
> Jim
> 
> On Jun 25, 2009, at 9:51 AM, Joachim Lusiardi <joachim at lusiardi.de> wrote:
> 
>> Hi,
>> i have short question about org.antlr.runtime.Token instances in Java
>> standard collections. Since (as far as i can see from the source) the
>> mentioned class does not override hashCode and equals i have troubles to
>> use this with standard containers like HashMap or Vector.
>>
>> What can i do to solve this problem? I expected that 2 CommonToken
>> objects have the same tokenindex, start, stop, text, type, channel, line
>> and charPosition in line they should be equal? and the hashCode also
>> should be derived from this?
>>
>> Best greetings
>> Joachim Lusiardi
>>
>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>> Unsubscribe:
>> http://www.antlr.org/mailman/options/antlr-interest/your-email-address


From linlin.xie at siemens.com  Fri Jun 26 10:24:29 2009
From: linlin.xie at siemens.com (Xie, Linlin)
Date: Fri, 26 Jun 2009 19:24:29 +0200
Subject: [antlr-interest] 0xcdcdcdcd myth with antlr base tree pointer u
Message-ID: <79118B9FE8CE8E49B0D71964A79CB647027DE369@dekomplm002.net.plm.eds.com>

Hi Jim,

 

I've noticed that that empty pointers are all (am I right?) initialized
to be 0xcdcdcdcd by default. Looks like it's a debugging value coming
from the C runtime library. I wonder if you have your reason for this to
work this way, or better to initialize them to be 0? it'd be helpful for
us that we don't have to check against this value which is perhaps not
platform independent.

 

Also, I made some small changes in the antlr 3.1.3 to fix the previous
two bugs I mentioned, and a change to make the @after action work for
our purpose. I wonder if I should submit to the antlr repository to get
checked if they are good fixs, and also I wonder we can push you a
little bit to get @after supported soon J?

 

Thanks a lot.

Regards,

Linlin

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090626/6ba1c8be/attachment.html 

From jimi at temporal-wave.com  Fri Jun 26 10:46:46 2009
From: jimi at temporal-wave.com (Jim Idle)
Date: Fri, 26 Jun 2009 13:46:46 -0400
Subject: [antlr-interest] 0xcdcdcdcd myth with antlr base tree pointer u
In-Reply-To: <79118B9FE8CE8E49B0D71964A79CB647027DE369@dekomplm002.net.plm.eds.com>
References: <79118B9FE8CE8E49B0D71964A79CB647027DE369@dekomplm002.net.plm.eds.com>
Message-ID: <0997A738-0BB9-461E-B490-61FA86CC08D4@temporal-wave.com>

I will make any fixed next week. I don't need your code. The pointers  
that are not initialized are set to that value by windows debut  
malloc. You won't be able to rely on that value in production mode or  
other platforms. The user pointers are not initialiZed deliberatly as  
they are for you to use. So if you need them to be null sometimes then  
you should set them in your own version of next token or whatever. I  
can probably safely initialize them at create time though. If you are  
referring to other pointers then inwill make sure they are set to  
null. I changed to malloc from calloc and some pointers are not  
imitialiZed as a result and I should fill them in. I am back at home  
neztbqeek and take care of al of this.

Jim

On Jun 26, 2009, at 1:24 PM, "Xie, Linlin" <linlin.xie at siemens.com>  
wrote:

> Hi Jim,
>
>
>
> I?ve noticed that that empty pointers are all (am I right?) initiali 
> zed to be 0xcdcdcdcd by default. Looks like it?s a debugging value c 
> oming from the C runtime library. I wonder if you have your reason f 
> or this to work this way, or better to initialize them to be 0? it?d 
>  be helpful for us that we don?t have to check against this value wh 
> ich is perhaps not platform independent.
>
>
>
> Also, I made some small changes in the antlr 3.1.3 to fix the  
> previous two bugs I mentioned, and a change to make the @after  
> action work for our purpose. I wonder if I should submit to the  
> antlr repository to get checked if they are good fixs, and also I  
> wonder we can push you a little bit to get @after supported soon J?
>
>
>
> Thanks a lot.
>
> Regards,
>
> Linlin

From jimi at temporal-wave.com  Fri Jun 26 10:48:11 2009
From: jimi at temporal-wave.com (Jim Idle)
Date: Fri, 26 Jun 2009 13:48:11 -0400
Subject: [antlr-interest] 0xcdcdcdcd myth with antlr base tree pointer u
In-Reply-To: <79118B9FE8CE8E49B0D71964A79CB647027DE369@dekomplm002.net.plm.eds.com>
References: <79118B9FE8CE8E49B0D71964A79CB647027DE369@dekomplm002.net.plm.eds.com>
Message-ID: <82594FD2-4F04-4D0D-8744-06CDBB8A6723@temporal-wave.com>

Also, I am wondering if you are taking the 'right' approach with your  
code. If you send the source I'll take a look.

Jim

On Jun 26, 2009, at 1:24 PM, "Xie, Linlin" <linlin.xie at siemens.com>  
wrote:

> Hi Jim,
>
>
>
> I?ve noticed that that empty pointers are all (am I right?) initiali 
> zed to be 0xcdcdcdcd by default. Looks like it?s a debugging value c 
> oming from the C runtime library. I wonder if you have your reason f 
> or this to work this way, or better to initialize them to be 0? it?d 
>  be helpful for us that we don?t have to check against this value wh 
> ich is perhaps not platform independent.
>
>
>
> Also, I made some small changes in the antlr 3.1.3 to fix the  
> previous two bugs I mentioned, and a change to make the @after  
> action work for our purpose. I wonder if I should submit to the  
> antlr repository to get checked if they are good fixs, and also I  
> wonder we can push you a little bit to get @after supported soon J?
>
>
>
> Thanks a lot.
>
> Regards,
>
> Linlin

From dee at pestcontroldata.com  Fri Jun 26 12:11:31 2009
From: dee at pestcontroldata.com (Dee Holtsclaw)
Date: Fri, 26 Jun 2009 15:11:31 -0400
Subject: [antlr-interest] 0xcdcdcdcd myth with antlr base tree pointer u
Message-ID: <200906261511.32092.dee@pestcontroldata.com>

On Friday 26 June 2009 1:48:11 pm Jim Idle wrote:
> Also, I am wondering if you are taking the 'right' approach with your
> code. If you send the source I'll take a look.

There's also a value of 0xbaadf00d used by Windows for freed or uninitialized 
pointers ... I've seen it before but cannot remember specifically if it's 
from the debugger or one of the libraries. Regardless, you can not (and 
should not) depend on any values in uninitialized or newly allocated storage.

> On Jun 26, 2009, at 1:24 PM, "Xie, Linlin" <linlin.xie at siemens.com>
> > I?ve noticed that that empty pointers are all (am I right?) initiali
> > zed to be 0xcdcdcdcd by default. Looks like it?s a debugging value c
> > oming from the C runtime library. I wonder if you have your reason f

From antlr at mirality.co.nz  Fri Jun 26 14:21:58 2009
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Sat, 27 Jun 2009 09:21:58 +1200
Subject: [antlr-interest] 0xcdcdcdcd myth with antlr base tree pointer u
In-Reply-To: <79118B9FE8CE8E49B0D71964A79CB647027DE369@dekomplm002.net.p
	lm.eds.com>
References: <79118B9FE8CE8E49B0D71964A79CB647027DE369@dekomplm002.net.plm.eds.com>
Message-ID: <20090626212226.2EEC23418151@www.antlr.org>

At 05:24 27/06/2009, Xie, Linlin wrote:
>I've noticed that that empty pointers are all (am I right?) 
>initialized to be 0xcdcdcdcd by default. Looks like it's a 
>debugging value coming from the C runtime library. I wonder if 
>you have your reason for this to work this way, or better to 
>initialize them to be 0? it'd be helpful for us that we don't 
>have to check against this value which is perhaps not platform 
>independent.

The MSVC debug CRT initialises newly-allocated memory to 0xCD and 
freed memory to either 0xCC or 0xDD.  You should never rely on 
this behaviour, though -- it is neither portable nor consistent 
(by design), and the release-mode CRT behaves differently.  (The 
intent is to cause crashes in debug mode if using uninitialised or 
freed memory, since crashes are easier to find than invalid 
behaviour from acting on bad data.)

If you want to be able to ask "have I set a value for this" later 
on, then you *must* initialise the values yourself (typically to 0 
or NULL) as soon as possible after they are allocated.


From elnur.j at gmail.com  Fri Jun 26 22:48:55 2009
From: elnur.j at gmail.com (Elnur Cabarov)
Date: Sat, 27 Jun 2009 10:48:55 +0500
Subject: [antlr-interest] Using ANTLR without Java
Message-ID: <cb604c710906262248u6ab48210seae10816a8588146@mail.gmail.com>

Hi. I'm new to ANTLR and reading "The Definitive ANTLR Reference" now. I
liked it very much but want to be sure about one thing:

I'm writing an application in C# and want to use ANTLR in it (i.e. user
should be able to write own grammars or change existing ones, compile and
run them dynamically)

But I don't want end-users need both .Net framework and Java. Is there any
way to use ANTLR without Java? I don't mean using C# as a target language. I
mean dynamically compiling grammars and running them without Java

Thanks in advance

-- 
Elnur Cabarov
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090627/90916139/attachment.html 

From vbar at comp.cz  Fri Jun 26 23:31:47 2009
From: vbar at comp.cz (Vaclav Barta)
Date: Sat, 27 Jun 2009 08:31:47 +0200
Subject: [antlr-interest] Using ANTLR without Java
In-Reply-To: <cb604c710906262248u6ab48210seae10816a8588146@mail.gmail.com>
References: <cb604c710906262248u6ab48210seae10816a8588146@mail.gmail.com>
Message-ID: <200906270831.47892.vbar@comp.cz>

On Saturday 27 June 2009 07:48:55 Elnur Cabarov wrote:
> I'm writing an application in C# and want to use ANTLR in it (i.e. user
> should be able to write own grammars or change existing ones, compile and
> run them dynamically)
>
> But I don't want end-users need both .Net framework and Java. Is there any
> way to use ANTLR without Java? I don't mean using C# as a target language.
> I mean dynamically compiling grammars and running them without Java
Short of porting ANTLR to C# (which should be possible, but rather painful at 
the moment, as ANTLR 3 still depends on ANTLR 2), I don't think so.

	Bye
		Vasek




From dmitry.gusev at gmail.com  Sat Jun 27 03:09:50 2009
From: dmitry.gusev at gmail.com (Dmitry Gusev)
Date: Sat, 27 Jun 2009 14:09:50 +0400
Subject: [antlr-interest] Using ANTLR without Java
In-Reply-To: <200906270831.47892.vbar@comp.cz>
References: <cb604c710906262248u6ab48210seae10816a8588146@mail.gmail.com>
	<200906270831.47892.vbar@comp.cz>
Message-ID: <37a147f40906270309n35d59babx29941c871a630b1f@mail.gmail.com>

I used ANTLR in one of c# projects. Maybe this would help you (part of
*.csproj):

  <ItemGroup>
    <Antlr3 Include="Expression.g">
      <OutputFiles>ExpressionLexer.cs;ExpressionParser.cs</OutputFiles>
    </Antlr3>
  </ItemGroup>
  <Target Name="GenerateAntlrCode" Inputs="@(Antlr3)"
Outputs="%(Antlr3.OutputFiles)">
    <Exec Command="..\..\tools\Antlr3.Tool.exe -message-format vs2005
@(Antlr3)" Outputs="%(Antlr3.OutputFiles)" />
  </Target>
  <PropertyGroup>
    <BuildDependsOn>GenerateAntlrCode;$(BuildDependsOn)</BuildDependsOn>
  </PropertyGroup>



On Sat, Jun 27, 2009 at 10:31, Vaclav Barta <vbar at comp.cz> wrote:

> On Saturday 27 June 2009 07:48:55 Elnur Cabarov wrote:
> > I'm writing an application in C# and want to use ANTLR in it (i.e. user
> > should be able to write own grammars or change existing ones, compile and
> > run them dynamically)
> >
> > But I don't want end-users need both .Net framework and Java. Is there
> any
> > way to use ANTLR without Java? I don't mean using C# as a target
> language.
> > I mean dynamically compiling grammars and running them without Java
> Short of porting ANTLR to C# (which should be possible, but rather painful
> at
> the moment, as ANTLR 3 still depends on ANTLR 2), I don't think so.
>
>        Bye
>                Vasek
>
>
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>



-- 
Dmitry Gusev

AnjLab Team
http://anjlab.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090627/5c50d449/attachment.html 

From vbar at comp.cz  Sat Jun 27 04:26:57 2009
From: vbar at comp.cz (Vaclav Barta)
Date: Sat, 27 Jun 2009 13:26:57 +0200
Subject: [antlr-interest] Using ANTLR without Java
In-Reply-To: <37a147f40906270309n35d59babx29941c871a630b1f@mail.gmail.com>
References: <cb604c710906262248u6ab48210seae10816a8588146@mail.gmail.com>
	<200906270831.47892.vbar@comp.cz>
	<37a147f40906270309n35d59babx29941c871a630b1f@mail.gmail.com>
Message-ID: <200906271326.57697.vbar@comp.cz>

On Saturday 27 June 2009 12:09:50 Dmitry Gusev wrote:
> I used ANTLR in one of c# projects. Maybe this would help you (part of
> *.csproj):
Ah, so somebody actually already did the port - I didn't notice that... But 
looking at the ANTLR download page, it looks like it's stuck at version 
3.0.1...

       Bye
               Vasek

From antlr at mirality.co.nz  Sat Jun 27 07:21:34 2009
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Sun, 28 Jun 2009 02:21:34 +1200
Subject: [antlr-interest] Using ANTLR without Java
In-Reply-To: <cb604c710906262248u6ab48210seae10816a8588146@mail.gmail.co
 m>
References: <cb604c710906262248u6ab48210seae10816a8588146@mail.gmail.com>
Message-ID: <20090627142203.295223418491@www.antlr.org>

At 17:48 27/06/2009, Elnur Cabarov wrote:
>I'm writing an application in C# and want to use ANTLR in it 
>(i.e. user should be able to write own grammars or change 
>existing ones, compile and run them dynamically)
>
>But I don't want end-users need both .Net framework and Java. Is 
>there any way to use ANTLR without Java? I don't mean using C# as 
>a target language. I mean dynamically compiling grammars and 
>running them without Java

Normally end-users wouldn't be writing grammars -- grammar writing 
is a complicated business. :)

For the common case, where you define a DSL or full language and 
the end-user simply composes programs (or other data) using that 
language, then Java is not needed by the end-user at all.  Neither 
the generated C# code nor the C# runtime require Java.

If you really are trying to let end-users compile grammars, and 
want a native solution, then you'll probably have to wait a 
while.  IIRC Sam Harwell (the C# target maintainer) has done some 
work towards porting the whole of ANTLR (including the compiler) 
to C#.  But it's still all pre-release.


From sharwell at pixelminegames.com  Sat Jun 27 18:26:07 2009
From: sharwell at pixelminegames.com (Sam Harwell)
Date: Sat, 27 Jun 2009 20:26:07 -0500
Subject: [antlr-interest] Using ANTLR without Java
In-Reply-To: <20090627142203.295223418491@www.antlr.org>
References: <cb604c710906262248u6ab48210seae10816a8588146@mail.gmail.com>
	<20090627142203.295223418491@www.antlr.org>
Message-ID: <86403CA0939415448BCCB83855EFE09AA68349@Bloodymary.ironwillgames.com>

I don't have a packaged release available, but the source in my branch
is completely up-to-date with the Java branch. :) I could package a
build tonight or tomorrow and host it on one of my servers if someone is
interested in it. It's self-contained (doesn't require any earlier
version of ANTLR or Java) as well since I ported all of its grammars to
v3 in the process.

Sam

-----Original Message-----
From: antlr-interest-bounces at antlr.org
[mailto:antlr-interest-bounces at antlr.org] On Behalf Of Gavin Lambert
Sent: Saturday, June 27, 2009 9:22 AM
To: Elnur Cabarov; antlr-interest at antlr.org
Subject: Re: [antlr-interest] Using ANTLR without Java

At 17:48 27/06/2009, Elnur Cabarov wrote:
>I'm writing an application in C# and want to use ANTLR in it 
>(i.e. user should be able to write own grammars or change 
>existing ones, compile and run them dynamically)
>
>But I don't want end-users need both .Net framework and Java. Is 
>there any way to use ANTLR without Java? I don't mean using C# as 
>a target language. I mean dynamically compiling grammars and 
>running them without Java

Normally end-users wouldn't be writing grammars -- grammar writing 
is a complicated business. :)

For the common case, where you define a DSL or full language and 
the end-user simply composes programs (or other data) using that 
language, then Java is not needed by the end-user at all.  Neither 
the generated C# code nor the C# runtime require Java.

If you really are trying to let end-users compile grammars, and 
want a native solution, then you'll probably have to wait a 
while.  IIRC Sam Harwell (the C# target maintainer) has done some 
work towards porting the whole of ANTLR (including the compiler) 
to C#.  But it's still all pre-release.


List: http://www.antlr.org/mailman/listinfo/antlr-interest
Unsubscribe:
http://www.antlr.org/mailman/options/antlr-interest/your-email-address

From sean at celsoft.com  Sun Jun 28 10:54:39 2009
From: sean at celsoft.com (Sean O'Dell)
Date: Sun, 28 Jun 2009 10:54:39 -0700
Subject: [antlr-interest] Look-ahead problem parsing phrase?
Message-ID: <bf6ee7090906281054s6bf6bce4t95d772ad6e53d597@mail.gmail.com>

Hi everyone,

I'm new to the mailing list and am just getting starting with ANTLR (day 2)
and I've run into an issue I'm having some trouble wrapping my head around.
I think it's related to how ANTLR looks-ahead to predict tokens, but I think
I'm overlaying my familiarity with regular expressions onto ANTLR in a way
that is clouding up my understanding of what ANTLR does and needs in order
to do this right.

I'm trying to parse out a collection of "words" on a single line as a
"phrase", ignoring whitespace at the beginning and end of the lines, but
I'm getting an error while parsing what I think is a line that should match
the grammar.

My grammar:

    grammar Phrase;

    WS : (' '|'\t')+;
    DIGIT : ('0'..'9');
    LETTER : ('a'..'z'|'A'..'Z');
    NEWLINE : '\r'? '\n';

    WORD : (LETTER|DIGIT)+;

    EOL : WS? NEWLINE?;

    PHRASE : WORD (WS WORD)*;

    line : WS? PHRASE EOL?;

The line of text I am parsing (note whitespace at the ends): " This is a
phrase "

Error I get during parse:

    line 1:18 required (...)+ loop did not match anything at character
'<EOF>'
    line 0:-1 missing PHRASE at '<EOF>'

What might be causing this error, and what might be a good, clean way to
parse out the "phrase" in the input text?

Sean O'Dell
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090628/a49b1473/attachment.html 

From sharwell at pixelminegames.com  Sun Jun 28 12:53:45 2009
From: sharwell at pixelminegames.com (Sam Harwell)
Date: Sun, 28 Jun 2009 14:53:45 -0500
Subject: [antlr-interest] Using ANTLR without Java
In-Reply-To: <86403CA0939415448BCCB83855EFE09AA68349@Bloodymary.ironwillgames.com>
References: <cb604c710906262248u6ab48210seae10816a8588146@mail.gmail.com><20090627142203.295223418491@www.antlr.org>
	<86403CA0939415448BCCB83855EFE09AA68349@Bloodymary.ironwillgames.com>
Message-ID: <86403CA0939415448BCCB83855EFE09AA6834C@Bloodymary.ironwillgames.com>

http://www.pixelminegames.com/downloads/nFringe/ANTLR-3.1-2009-06-28.7z

Note that the templates are "loose" on the file system, so you can
update them without recompiling if you wish.

Sam

-----Original Message-----
From: antlr-interest-bounces at antlr.org
[mailto:antlr-interest-bounces at antlr.org] On Behalf Of Sam Harwell
Sent: Saturday, June 27, 2009 8:26 PM
To: Gavin Lambert; Elnur Cabarov; antlr-interest at antlr.org
Subject: Re: [antlr-interest] Using ANTLR without Java

I don't have a packaged release available, but the source in my branch
is completely up-to-date with the Java branch. :) I could package a
build tonight or tomorrow and host it on one of my servers if someone is
interested in it. It's self-contained (doesn't require any earlier
version of ANTLR or Java) as well since I ported all of its grammars to
v3 in the process.

Sam

-----Original Message-----
From: antlr-interest-bounces at antlr.org
[mailto:antlr-interest-bounces at antlr.org] On Behalf Of Gavin Lambert
Sent: Saturday, June 27, 2009 9:22 AM
To: Elnur Cabarov; antlr-interest at antlr.org
Subject: Re: [antlr-interest] Using ANTLR without Java

At 17:48 27/06/2009, Elnur Cabarov wrote:
>I'm writing an application in C# and want to use ANTLR in it 
>(i.e. user should be able to write own grammars or change 
>existing ones, compile and run them dynamically)
>
>But I don't want end-users need both .Net framework and Java. Is 
>there any way to use ANTLR without Java? I don't mean using C# as 
>a target language. I mean dynamically compiling grammars and 
>running them without Java

Normally end-users wouldn't be writing grammars -- grammar writing 
is a complicated business. :)

For the common case, where you define a DSL or full language and 
the end-user simply composes programs (or other data) using that 
language, then Java is not needed by the end-user at all.  Neither 
the generated C# code nor the C# runtime require Java.

If you really are trying to let end-users compile grammars, and 
want a native solution, then you'll probably have to wait a 
while.  IIRC Sam Harwell (the C# target maintainer) has done some 
work towards porting the whole of ANTLR (including the compiler) 
to C#.  But it's still all pre-release.


List: http://www.antlr.org/mailman/listinfo/antlr-interest
Unsubscribe:
http://www.antlr.org/mailman/options/antlr-interest/your-email-address

List: http://www.antlr.org/mailman/listinfo/antlr-interest
Unsubscribe:
http://www.antlr.org/mailman/options/antlr-interest/your-email-address

From nvlassopoulos at gmail.com  Sun Jun 28 13:52:26 2009
From: nvlassopoulos at gmail.com (Nick Vlassopoulos)
Date: Sun, 28 Jun 2009 21:52:26 +0100
Subject: [antlr-interest] Look-ahead problem parsing phrase?
In-Reply-To: <bf6ee7090906281054s6bf6bce4t95d772ad6e53d597@mail.gmail.com>
References: <bf6ee7090906281054s6bf6bce4t95d772ad6e53d597@mail.gmail.com>
Message-ID: <1419225d0906281352l5b3b3c8eo9a522a6a6f061218@mail.gmail.com>

Hi Sean,

I am not sure about this, but I think you have to rearrange the order of the
rules. More specifically,
antlr will use rules in the order they appear, therefore, WS should probably
near the end of your list.
Maybe something like this would work:

grammar Phrase;

line : WS? PHRASE EOL?;

PHRASE : WORD (WS WORD)*;

WORD : (LETTER|DIGIT)+;

EOL : WS* NEWLINE*;
LETTER : ('a'..'z'|'A'..'Z');
DIGIT : ('0'..'9');
NEWLINE : '\r'? '\n';
WS : (' '|'\t')+;

Further, you should probably add a rule for EOF, maybe something like

line : WS? PHRASE EOL? EOF?;

(Note: I haven't tested what I suggest above)
Hope this helps.

Nikos

On Sun, Jun 28, 2009 at 6:54 PM, Sean O'Dell <sean at celsoft.com> wrote:

> Hi everyone,
>
> I'm new to the mailing list and am just getting starting with ANTLR (day 2)
> and I've run into an issue I'm having some trouble wrapping my head around.
> I think it's related to how ANTLR looks-ahead to predict tokens, but I think
> I'm overlaying my familiarity with regular expressions onto ANTLR in a way
> that is clouding up my understanding of what ANTLR does and needs in order
> to do this right.
>
> I'm trying to parse out a collection of "words" on a single line as a
> "phrase", ignoring whitespace at the beginning and end of the lines, but
> I'm getting an error while parsing what I think is a line that should match
> the grammar.
>
> My grammar:
>
>     grammar Phrase;
>
>     WS : (' '|'\t')+;
>     DIGIT : ('0'..'9');
>     LETTER : ('a'..'z'|'A'..'Z');
>     NEWLINE : '\r'? '\n';
>
>     WORD : (LETTER|DIGIT)+;
>
>     EOL : WS? NEWLINE?;
>
>     PHRASE : WORD (WS WORD)*;
>
>     line : WS? PHRASE EOL?;
>
> The line of text I am parsing (note whitespace at the ends): " This is a
> phrase "
>
> Error I get during parse:
>
>     line 1:18 required (...)+ loop did not match anything at character
> '<EOF>'
>     line 0:-1 missing PHRASE at '<EOF>'
>
> What might be causing this error, and what might be a good, clean way to
> parse out the "phrase" in the input text?
>
> Sean O'Dell
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090628/01efa40e/attachment.html 

From antlr at mirality.co.nz  Sun Jun 28 14:05:24 2009
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Mon, 29 Jun 2009 09:05:24 +1200
Subject: [antlr-interest] Look-ahead problem parsing phrase?
In-Reply-To: <bf6ee7090906281054s6bf6bce4t95d772ad6e53d597@mail.gmail.co
 m>
References: <bf6ee7090906281054s6bf6bce4t95d772ad6e53d597@mail.gmail.com>
Message-ID: <20090628210645.40B713418431@www.antlr.org>

At 05:54 29/06/2009, Sean O'Dell wrote:
>     WS : (' '|'\t')+;
>     DIGIT : ('0'..'9');
>     LETTER : ('a'..'z'|'A'..'Z');
>     NEWLINE : '\r'? '\n';
>
>     WORD : (LETTER|DIGIT)+;
>
>     EOL : WS? NEWLINE?;
>
>     PHRASE : WORD (WS WORD)*;
>
>     line : WS? PHRASE EOL?;

Turn DIGIT and LETTER into fragment rules.
Turn EOL and PHRASE into parser rules.

(In general, a lexer rule should not refer to any other lexer 
rule, unless that rule is a fragment.)


From sean at celsoft.com  Sun Jun 28 14:13:58 2009
From: sean at celsoft.com (Sean O'Dell)
Date: Sun, 28 Jun 2009 14:13:58 -0700
Subject: [antlr-interest] Look-ahead problem parsing phrase?
In-Reply-To: <1419225d0906281352l5b3b3c8eo9a522a6a6f061218@mail.gmail.com>
References: <bf6ee7090906281054s6bf6bce4t95d772ad6e53d597@mail.gmail.com>
	<1419225d0906281352l5b3b3c8eo9a522a6a6f061218@mail.gmail.com>
Message-ID: <bf6ee7090906281413r32864aar89f959c3cd389df2@mail.gmail.com>

Thanks for the reply Nick!

I tried moving the order around, but everything I've tried so far resulted
in similar errors are parse-time.  If I move things around too much, I get
errors generating the lexer and parser.  I've come across so many errors
from attempting so many combinations, I'm not sure when I'm moving forward
or back on the matter.

I may have simply overlooked some key documentation that would help me
understand what the issue is.  I'm just not sure what I've missed.  Any
suggestions?

Sean

On Sun, Jun 28, 2009 at 1:52 PM, Nick Vlassopoulos
<nvlassopoulos at gmail.com>wrote:

> Hi Sean,
>
> I am not sure about this, but I think you have to rearrange the order of
> the rules. More specifically,
> antlr will use rules in the order they appear, therefore, WS should
> probably near the end of your list.
> Maybe something like this would work:
>
> grammar Phrase;
>
> line : WS? PHRASE EOL?;
>
> PHRASE : WORD (WS WORD)*;
>
> WORD : (LETTER|DIGIT)+;
>
> EOL : WS* NEWLINE*;
> LETTER : ('a'..'z'|'A'..'Z');
> DIGIT : ('0'..'9');
> NEWLINE : '\r'? '\n';
> WS : (' '|'\t')+;
>
> Further, you should probably add a rule for EOF, maybe something like
>
> line : WS? PHRASE EOL? EOF?;
>
> (Note: I haven't tested what I suggest above)
> Hope this helps.
>
> Nikos
>
> On Sun, Jun 28, 2009 at 6:54 PM, Sean O'Dell <sean at celsoft.com> wrote:
>
>> Hi everyone,
>>
>> I'm new to the mailing list and am just getting starting with ANTLR (day
>> 2) and I've run into an issue I'm having some trouble wrapping my head
>> around.  I think it's related to how ANTLR looks-ahead to predict tokens,
>> but I think I'm overlaying my familiarity with regular expressions onto
>> ANTLR in a way that is clouding up my understanding of what ANTLR does and
>> needs in order to do this right.
>>
>> I'm trying to parse out a collection of "words" on a single line as a
>> "phrase", ignoring whitespace at the beginning and end of the lines, but
>> I'm getting an error while parsing what I think is a line that should match
>> the grammar.
>>
>> My grammar:
>>
>>     grammar Phrase;
>>
>>     WS : (' '|'\t')+;
>>     DIGIT : ('0'..'9');
>>     LETTER : ('a'..'z'|'A'..'Z');
>>     NEWLINE : '\r'? '\n';
>>
>>     WORD : (LETTER|DIGIT)+;
>>
>>     EOL : WS? NEWLINE?;
>>
>>     PHRASE : WORD (WS WORD)*;
>>
>>     line : WS? PHRASE EOL?;
>>
>> The line of text I am parsing (note whitespace at the ends): " This is a
>> phrase "
>>
>> Error I get during parse:
>>
>>     line 1:18 required (...)+ loop did not match anything at character
>> '<EOF>'
>>     line 0:-1 missing PHRASE at '<EOF>'
>>
>> What might be causing this error, and what might be a good, clean way to
>> parse out the "phrase" in the input text?
>>
>> Sean O'Dell
>>
>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>> Unsubscribe:
>> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>>
>>
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090628/28e1d791/attachment.html 

From sean at celsoft.com  Sun Jun 28 14:21:54 2009
From: sean at celsoft.com (Sean O'Dell)
Date: Sun, 28 Jun 2009 14:21:54 -0700
Subject: [antlr-interest] Look-ahead problem parsing phrase?
In-Reply-To: <200906282107.n5SL7MS02569@tiger.atomicsystems.com>
References: <bf6ee7090906281054s6bf6bce4t95d772ad6e53d597@mail.gmail.com>
	<200906282107.n5SL7MS02569@tiger.atomicsystems.com>
Message-ID: <bf6ee7090906281421r1832a279i39b50596267b266c@mail.gmail.com>

I gave it a shot at your suggestion, with the same results.

Why should lexer rules not refer to other lexer rules without being
fragments?  I've read that doing so only prevented token creation.  It
affects logic, as well?

Sean

On Sun, Jun 28, 2009 at 2:05 PM, Gavin Lambert <antlr at mirality.co.nz> wrote:

> At 05:54 29/06/2009, Sean O'Dell wrote:
>
>>    WS : (' '|'\t')+;
>>    DIGIT : ('0'..'9');
>>    LETTER : ('a'..'z'|'A'..'Z');
>>    NEWLINE : '\r'? '\n';
>>
>>    WORD : (LETTER|DIGIT)+;
>>
>>    EOL : WS? NEWLINE?;
>>
>>    PHRASE : WORD (WS WORD)*;
>>
>>    line : WS? PHRASE EOL?;
>>
>
> Turn DIGIT and LETTER into fragment rules.
> Turn EOL and PHRASE into parser rules.
>
> (In general, a lexer rule should not refer to any other lexer rule, unless
> that rule is a fragment.)
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090628/59a15589/attachment.html 

From antlr at mirality.co.nz  Sun Jun 28 14:41:09 2009
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Mon, 29 Jun 2009 09:41:09 +1200
Subject: [antlr-interest] Look-ahead problem parsing phrase?
In-Reply-To: <bf6ee7090906281421r1832a279i39b50596267b266c@mail.gmail.co
 m>
References: <bf6ee7090906281054s6bf6bce4t95d772ad6e53d597@mail.gmail.com>
	<200906282107.n5SL7MS02569@tiger.atomicsystems.com>
	<bf6ee7090906281421r1832a279i39b50596267b266c@mail.gmail.com>
Message-ID: <20090628214221.71E833418431@www.antlr.org>

At 09:21 29/06/2009, Sean O'Dell wrote:
>Why should lexer rules not refer to other lexer rules without 
>being fragments?  I've read that doing so only prevented token 
>creation.  It affects logic, as well?

The moment you have one top-level lexer rule referring to another 
top-level rule, you introduce ambiguity -- you're basically 
telling the lexer "given this input, produce one of these two 
tokens but I don't care which", and then in the parser you're 
expecting exactly one of those tokens.  Sometimes you'll happen to 
pick the right one and it'll parse.  Sometimes you 
won't.  Sometimes the rules are sufficiently different that given 
certain input it produces one token and given other input it 
produces the other.  Then you're basically screwed.

It's important that given any particular input in isolation, there 
should be one and only one possible token that can be produced for 
it.  Doing anything else is just letting yourself in for a world 
of pain.


Also, your EOL rule was a top-level lexer rule that can 
successfully match zero characters.  Doing that creates infinite 
loops, and is something else that must be avoided.  (Which is 
another reason why it should be a parser rule.)


From sean at celsoft.com  Sun Jun 28 16:04:50 2009
From: sean at celsoft.com (Sean O'Dell)
Date: Sun, 28 Jun 2009 16:04:50 -0700
Subject: [antlr-interest] Look-ahead problem parsing phrase?
In-Reply-To: <200906282143.n5SLh5S02782@tiger.atomicsystems.com>
References: <bf6ee7090906281054s6bf6bce4t95d772ad6e53d597@mail.gmail.com>
	<200906282107.n5SL7MS02569@tiger.atomicsystems.com>
	<bf6ee7090906281421r1832a279i39b50596267b266c@mail.gmail.com>
	<200906282143.n5SLh5S02782@tiger.atomicsystems.com>
Message-ID: <bf6ee7090906281604xfc090bdx9c8644bb56117dad@mail.gmail.com>

Thanks for the help Gavin.

Let me see if I understand this correctly; I'm trying to get my head down
into this.

On "top-level lexer rules should not refer to other top-level lexer rules":
What constitutes a "top-level lexer rule?" Is that fragment vs. non-fragment
(non-fragments are top-level)?  Also, if one top-level lexer rule refers to
another, but adds additional rules, doesn't that remove the ambiguity?

On ""EOL should be a parser rule":  Can you help me understand how a rule
which can match zero characters creates an infinite loop?  Does making it a
parser rule avoid that?  If so, how?

Sean

On Sun, Jun 28, 2009 at 2:41 PM, Gavin Lambert <antlr at mirality.co.nz> wrote:

> At 09:21 29/06/2009, Sean O'Dell wrote:
>
>> Why should lexer rules not refer to other lexer rules without being
>> fragments?  I've read that doing so only prevented token creation.  It
>> affects logic, as well?
>>
>
> The moment you have one top-level lexer rule referring to another top-level
> rule, you introduce ambiguity -- you're basically telling the lexer "given
> this input, produce one of these two tokens but I don't care which", and
> then in the parser you're expecting exactly one of those tokens.  Sometimes
> you'll happen to pick the right one and it'll parse.  Sometimes you won't.
>  Sometimes the rules are sufficiently different that given certain input it
> produces one token and given other input it produces the other.  Then you're
> basically screwed.
>
> It's important that given any particular input in isolation, there should
> be one and only one possible token that can be produced for it.  Doing
> anything else is just letting yourself in for a world of pain.
>
>
> Also, your EOL rule was a top-level lexer rule that can successfully match
> zero characters.  Doing that creates infinite loops, and is something else
> that must be avoided.  (Which is another reason why it should be a parser
> rule.)
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090628/f65bdd17/attachment.html 

From jbb at acm.org  Sun Jun 28 18:35:46 2009
From: jbb at acm.org (John B. Brodie)
Date: Sun, 28 Jun 2009 21:35:46 -0400
Subject: [antlr-interest] Look-ahead problem parsing phrase?
In-Reply-To: <bf6ee7090906281604xfc090bdx9c8644bb56117dad@mail.gmail.com>
References: <bf6ee7090906281054s6bf6bce4t95d772ad6e53d597@mail.gmail.com>
	<200906282107.n5SL7MS02569@tiger.atomicsystems.com>
	<bf6ee7090906281421r1832a279i39b50596267b266c@mail.gmail.com>
	<200906282143.n5SLh5S02782@tiger.atomicsystems.com>
	<bf6ee7090906281604xfc090bdx9c8644bb56117dad@mail.gmail.com>
Message-ID: <1246239346.28368.69.camel@gecko.home.org>

Greetings!

On Sun, 2009-06-28 at 16:04 -0700, Sean O'Dell wrote:
> Thanks for the help Gavin.
> 
> Let me see if I understand this correctly; I'm trying to get my head
> down into this.
> 
> On "top-level lexer rules should not refer to other top-level lexer
> rules":  What constitutes a "top-level lexer rule?" Is that fragment
> vs. non-fragment (non-fragments are top-level)? 

Yes.

>  Also, if one top-level lexer rule refers to another, but adds
> additional rules, doesn't that remove the ambiguity?

No. Because Antlr lexers do not backtrack.

Harkening back your original question --- and this is from memory
because i deleted your original mail already, sorry.

you had some rules that did not correctly recognize trailing whitespace
(e.g. " foo bar baz \n" is supposed to be okay but isn't):

line : PHRASE WS? EOL? ;

PHRASE : WORD (WS WORD)* ; 

maybe the above is not your situation, sorry....

anyway hopefully the above is close enuf so that the following applies:

so we see the "foo" as a WORD and realize it is the first part of a
PHRASE, all is good. Next we see a WS so we start the loop for
recognizing the remaining, optional, WORDs in the PHRASE, and so all is
good for recognizing "bar" as the second WORD of the PHRASE. Next we see
a WS and we are in a loop recognizing the remaining WORDs of the PHRASE
and so all is good for recognizing "baz" as the third word of the
phrase. Next we see a WS and we are in a loop for recognizing the
remaining WORDs of the PHRASE but there is no WORD after that WS but our
rule for PHRASE demands that there be a WORD after the WS in the loop;
so we have a lexing error.

the lexer will not see that maybe the trailing WS in this PHRASE isn't
really part of the PHRASE but should part of whatever token occurs after
this PHRASE.

e.g. Antlr lexers do not backtrack.

this differs from my experience with regular expressions, which i think
is where you said you were coming from... anyway...

Antlr parsers are much better at dealing with this situation. Antlr
parsers support an arbitrary, say k, symbol lookahead for determining
which path through the parse is required (and the Tool will figure out
for itself how far to look ahead e.g. what k should be for each decision
point).

Which is why people will tell you to make your complicated lexer rules
into parser rules.  I think that if you had given the above rules for
your line and phrase as:

line : phrase WS? EOL? ;
phrase : WORD (WS WORD)* ;

then Antlr would have just go ahead and create a parser without any
problem (UNTESTED).



Please allow me to re-emphasize some excellent advise that Gavin Lambert
gave:

>         >On Sun, Jun 28, 2009 at 2:41 PM, Gavin Lambert wrote:
>                 >It's important that given any particular input in
>                 isolation, >there should be one and only one possible
>                 token that can be >produced for it.  Doing anything
>                 else is just letting >yourself in for a world of pain.
        



Regarding your query re: empty lexer rules:
        
> On ""EOL should be a parser rule":  Can you help me understand how a
> rule which can match zero characters creates an infinite loop?  

Empty top-level lexer rules are evil.

The lexer selects a rule for the next Token based upon the very first
next character in the input stream.

If there is no lexer rule that can recognize that next character as its
first, then a lexing error is announced.

But if there is a lexer rule that can match zero characters. Then, when
seeing an invalid initial character, the lexer will (correctly) emit an
instance of that empty token, since clearly an empty token is valid in
front of any error. And now we are back to the top level loop which sees
no valid token for our first character yet sees that an empty token is
valid, emits that empty token and loops to see an invalid character but
we can emit an empty token so we emit that empty token and then we are
back to the top level loop that sees an invalid character but we can
emit and empty token we emit that empty token and then we are back to
the top level loop.....

> Does making it a parser rule avoid that? 

maybe.

>  If so, how?

only because the parser is generally smarter about lookahead (and by
user option, backtracking under infinite lookahead).

Hope this helps....
   -jbb


> On Sun, Jun 28, 2009 at 2:41 PM, Gavin Lambert <antlr at mirality.co.nz>
> wrote:
>         At 09:21 29/06/2009, Sean O'Dell wrote:
>                 Why should lexer rules not refer to other lexer rules
>                 without being fragments?  I've read that doing so only
>                 prevented token creation.  It affects logic, as well?
>         
>         
>         The moment you have one top-level lexer rule referring to
>         another top-level rule, you introduce ambiguity -- you're
>         basically telling the lexer "given this input, produce one of
>         these two tokens but I don't care which", and then in the
>         parser you're expecting exactly one of those tokens.
>          Sometimes you'll happen to pick the right one and it'll
>         parse.  Sometimes you won't.  Sometimes the rules are
>         sufficiently different that given certain input it produces
>         one token and given other input it produces the other.  Then
>         you're basically screwed.
>         
>         It's important that given any particular input in isolation,
>         there should be one and only one possible token that can be
>         produced for it.  Doing anything else is just letting yourself
>         in for a world of pain.
>         
>         
>         Also, your EOL rule was a top-level lexer rule that can
>         successfully match zero characters.  Doing that creates
>         infinite loops, and is something else that must be avoided.
>          (Which is another reason why it should be a parser rule.)
>         



From jimi at temporal-wave.com  Sun Jun 28 19:45:45 2009
From: jimi at temporal-wave.com (Jim Idle)
Date: Sun, 28 Jun 2009 19:45:45 -0700
Subject: [antlr-interest] Look-ahead problem parsing phrase?
In-Reply-To: <1419225d0906281352l5b3b3c8eo9a522a6a6f061218@mail.gmail.com>
References: <bf6ee7090906281054s6bf6bce4t95d772ad6e53d597@mail.gmail.com>
	<1419225d0906281352l5b3b3c8eo9a522a6a6f061218@mail.gmail.com>
Message-ID: <4A482AD9.4010602@temporal-wave.com>

Nick Vlassopoulos wrote:
> Hi Sean,
>
> I am not sure about this, but I think you have to rearrange the order 
> of the rules. More specifically,
> antlr will use rules in the order they appear, therefore, WS should 
> probably near the end of your list.
> Maybe something like this would work:
>
> grammar Phrase;
>
> line : WS? PHRASE EOL?;
>
> PHRASE : WORD (WS WORD)*;

It's because you have WS here which MUST be followed by WORD, but it is 
followed by EOF so it fails. Try:

line : WS? PHRASE EOF;
PHRASE : (WORD WS?)* EOL?;

Jim


From sean at celsoft.com  Sun Jun 28 21:11:18 2009
From: sean at celsoft.com (Sean O'Dell)
Date: Sun, 28 Jun 2009 21:11:18 -0700
Subject: [antlr-interest] Look-ahead problem parsing phrase?
In-Reply-To: <1246239346.28368.69.camel@gecko.home.org>
References: <bf6ee7090906281054s6bf6bce4t95d772ad6e53d597@mail.gmail.com>
	<200906282107.n5SL7MS02569@tiger.atomicsystems.com>
	<bf6ee7090906281421r1832a279i39b50596267b266c@mail.gmail.com>
	<200906282143.n5SLh5S02782@tiger.atomicsystems.com>
	<bf6ee7090906281604xfc090bdx9c8644bb56117dad@mail.gmail.com>
	<1246239346.28368.69.camel@gecko.home.org>
Message-ID: <bf6ee7090906282111l4803e48egf1fba47dc302c931@mail.gmail.com>

(sorry if this is a duplicate; gmail defaulted to the wrong sender address,
and the list manager complained; not sure if my response got to the list)

John,

Thanks ... that really did help. I think I didn't realize how much better
the parser is than the lexer at looking-ahead. It makes much more sense to
me now, though I'm not yet sure how I will deal with tokenizing optional
trailing whitespace.

I think, though, if I understand correctly: the lexer rule I build to
consume that should not be allowed to be empty. However, if it's optional, I
should indicate that in a parser rule and not the lexer rule.

Maybe another way to say this is (and maybe it's been said, but I didn't
"hear" it correctly): lexer rules should strive to be completely unambiguous
and should match something, preferably immediately from the left. Parser
rules can have more complex look-ahead patterns.

I really appreciate everyone's help. I know how frustrating it can be
answering "getting started" questions, especially from someone who doesn't
quite yet "get it."

Sean- Hide quoted text -


On Jun 28, 2009 6:35pm, "John B. Brodie" <jbb at acm.org> wrote:
> Greetings!
>
>
>
> On Sun, 2009-06-28 at 16:04 -0700, Sean O'Dell wrote:
>
> > Thanks for the help Gavin.
>
> >
>
> > Let me see if I understand this correctly; I'm trying to get my head
>
> > down into this.
>
> >
>
> > On "top-level lexer rules should not refer to other top-level lexer
>
> > rules": What constitutes a "top-level lexer rule?" Is that fragment
>
> > vs. non-fragment (non-fragments are top-level)?
>
>
>
> Yes.
>
>
>
> > Also, if one top-level lexer rule refers to another, but adds
>
> > additional rules, doesn't that remove the ambiguity?
>
>
>
> No. Because Antlr lexers do not backtrack.
>
>
>
> Harkening back your original question --- and this is from memory
>
> because i deleted your original mail already, sorry.
>
>
>
> you had some rules that did not correctly recognize trailing whitespace
>
> (e.g. " foo bar baz \n" is supposed to be okay but isn't):
>
>
>
> line : PHRASE WS? EOL? ;
>
>
>
> PHRASE : WORD (WS WORD)* ;
>
>
>
> maybe the above is not your situation, sorry....
>
>
>
> anyway hopefully the above is close enuf so that the following applies:
>
>
>
> so we see the "foo" as a WORD and realize it is the first part of a
>
> PHRASE, all is good. Next we see a WS so we start the loop for
>
> recognizing the remaining, optional, WORDs in the PHRASE, and so all is
>
> good for recognizing "bar" as the second WORD of the PHRASE. Next we see
>
> a WS and we are in a loop recognizing the remaining WORDs of the PHRASE
>
> and so all is good for recognizing "baz" as the third word of the
>
> phrase. Next we see a WS and we are in a loop for recognizing the
>
> remaining WORDs of the PHRASE but there is no WORD after that WS but our
>
> rule for PHRASE demands that there be a WORD after the WS in the loop;
>
> so we have a lexing error.
>
>
>
> the lexer will not see that maybe the trailing WS in this PHRASE isn't
>
> really part of the PHRASE but should part of whatever token occurs after
>
> this PHRASE.
>
>
>
> e.g. Antlr lexers do not backtrack.
>
>
>
> this differs from my experience with regular expressions, which i think
>
> is where you said you were coming from... anyway...
>
>
>
> Antlr parsers are much better at dealing with this situation. Antlr
>
> parsers support an arbitrary, say k, symbol lookahead for determining
>
> which path through the parse is required (and the Tool will figure out
>
> for itself how far to look ahead e.g. what k should be for each decision
>
> point).
>
>
>
> Which is why people will tell you to make your complicated lexer rules
>
> into parser rules. I think that if you had given the above rules for
>
> your line and phrase as:
>
>
>
> line : phrase WS? EOL? ;
>
> phrase : WORD (WS WORD)* ;
>
>
>
> then Antlr would have just go ahead and create a parser without any
>
> problem (UNTESTED).
>
>
>
>
>
>
>
> Please allow me to re-emphasize some excellent advise that Gavin Lambert
>
> gave:
>
>
>
> > >On Sun, Jun 28, 2009 at 2:41 PM, Gavin Lambert wrote:
>
> > >It's important that given any particular input in
>
> > isolation, >there should be one and only one possible
>
> > token that can be >produced for it. Doing anything
>
> > else is just letting >yourself in for a world of pain.
>
>
>
>
>
>
>
>
>
> Regarding your query re: empty lexer rules:
>
>
>
> > On ""EOL should be a parser rule": Can you help me understand how a
>
> > rule which can match zero characters creates an infinite loop?
>
>
>
> Empty top-level lexer rules are evil.
>
>
>
> The lexer selects a rule for the next Token based upon the very first
>
> next character in the input stream.
>
>
>
> If there is no lexer rule that can recognize that next character as its
>
> first, then a lexing error is announced.
>
>
>
> But if there is a lexer rule that can match zero characters. Then, when
>
> seeing an invalid initial character, the lexer will (correctly) emit an
>
> instance of that empty token, since clearly an empty token is valid in
>
> front of any error. And now we are back to the top level loop which sees
>
> no valid token for our first character yet sees that an empty token is
>
> valid, emits that empty token and loops to see an invalid character but
>
> we can emit an empty token so we emit that empty token and then we are
>
> back to the top level loop that sees an invalid character but we can
>
> emit and empty token we emit that empty token and then we are back to
>
> the top level loop.....
>
>
>
> > Does making it a parser rule avoid that?
>
>
>
> maybe.
>
>
>
> > If so, how?
>
>
>
> only because the parser is generally smarter about lookahead (and by
>
> user option, backtracking under infinite lookahead).
>
>
>
> Hope this helps....
>
> -jbb
>
>
>
>
>
> > On Sun, Jun 28, 2009 at 2:41 PM, Gavin Lambert antlr at mirality.co.nz>
>
> > wrote:
>
> > At 09:21 29/06/2009, Sean O'Dell wrote:
>
> > Why should lexer rules not refer to other lexer rules
>
> > without being fragments? I've read that doing so only
>
> > prevented token creation. It affects logic, as well?
>
> >
>
> >
>
> > The moment you have one top-level lexer rule referring to
>
> > another top-level rule, you introduce ambiguity -- you're
>
> > basically telling the lexer "given this input, produce one of
>
> > these two tokens but I don't care which", and then in the
>
> > parser you're expecting exactly one of those tokens.
>
> > Sometimes you'll happen to pick the right one and it'll
>
> > parse. Sometimes you won't. Sometimes the rules are
>
> > sufficiently different that given certain input it produces
>
> > one token and given other input it produces the other. Then
>
> > you're basically screwed.
>
> >
>
> > It's important that given any particular input in isolation,
>
> > there should be one and only one possible token that can be
>
> > produced for it. Doing anything else is just letting yourself
>
> > in for a world of pain.
>
> >
>
> >
>
> > Also, your EOL rule was a top-level lexer rule that can
>
> > successfully match zero characters. Doing that creates
>
> > infinite loops, and is something else that must be avoided.
>
> > (Which is another reason why it should be a parser rule.)
>
> >
>
>
>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090628/b6d40117/attachment.html 

From elnur.j at gmail.com  Sun Jun 28 21:38:20 2009
From: elnur.j at gmail.com (Elnur Cabarov)
Date: Mon, 29 Jun 2009 09:38:20 +0500
Subject: [antlr-interest] Using ANTLR without Java
In-Reply-To: <86403CA0939415448BCCB83855EFE09AA6834C@Bloodymary.ironwillgames.com>
References: <cb604c710906262248u6ab48210seae10816a8588146@mail.gmail.com> 
	<20090627142203.295223418491@www.antlr.org>
	<86403CA0939415448BCCB83855EFE09AA68349@Bloodymary.ironwillgames.com>
	<86403CA0939415448BCCB83855EFE09AA6834C@Bloodymary.ironwillgames.com>
Message-ID: <cb604c710906282138u5354396ewd6beffeb47fb91bc@mail.gmail.com>

Thanks a lot to you all. I didn't expect so much help :)

Normally end-users wouldn't be writing grammars -- grammar writing
> is a complicated business. :)
>

You're right, normally the won't, but they will be able if want to add extra
functionality :)
In fact the program is intented for advanced users, such as developers and
architects

It'll take me some time to try out your solutions

Thanks again

On Mon, Jun 29, 2009 at 12:53 AM, Sam Harwell
<sharwell at pixelminegames.com>wrote:

> http://www.pixelminegames.com/downloads/nFringe/ANTLR-3.1-2009-06-28.7z
>
> Note that the templates are "loose" on the file system, so you can
> update them without recompiling if you wish.
>
> Sam
>
> -----Original Message-----
> From: antlr-interest-bounces at antlr.org
> [mailto:antlr-interest-bounces at antlr.org] On Behalf Of Sam Harwell
> Sent: Saturday, June 27, 2009 8:26 PM
> To: Gavin Lambert; Elnur Cabarov; antlr-interest at antlr.org
> Subject: Re: [antlr-interest] Using ANTLR without Java
>
> I don't have a packaged release available, but the source in my branch
> is completely up-to-date with the Java branch. :) I could package a
> build tonight or tomorrow and host it on one of my servers if someone is
> interested in it. It's self-contained (doesn't require any earlier
> version of ANTLR or Java) as well since I ported all of its grammars to
> v3 in the process.
>
> Sam
>
> -----Original Message-----
> From: antlr-interest-bounces at antlr.org
> [mailto:antlr-interest-bounces at antlr.org] On Behalf Of Gavin Lambert
> Sent: Saturday, June 27, 2009 9:22 AM
> To: Elnur Cabarov; antlr-interest at antlr.org
> Subject: Re: [antlr-interest] Using ANTLR without Java
>
> At 17:48 27/06/2009, Elnur Cabarov wrote:
> >I'm writing an application in C# and want to use ANTLR in it
> >(i.e. user should be able to write own grammars or change
> >existing ones, compile and run them dynamically)
> >
> >But I don't want end-users need both .Net framework and Java. Is
> >there any way to use ANTLR without Java? I don't mean using C# as
> >a target language. I mean dynamically compiling grammars and
> >running them without Java
>
> Normally end-users wouldn't be writing grammars -- grammar writing
> is a complicated business. :)
>
> For the common case, where you define a DSL or full language and
> the end-user simply composes programs (or other data) using that
> language, then Java is not needed by the end-user at all.  Neither
> the generated C# code nor the C# runtime require Java.
>
> If you really are trying to let end-users compile grammars, and
> want a native solution, then you'll probably have to wait a
> while.  IIRC Sam Harwell (the C# target maintainer) has done some
> work towards porting the whole of ANTLR (including the compiler)
> to C#.  But it's still all pre-release.
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>



-- 
Elnur Cabarov
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090629/977a8f75/attachment.html 

From espina.edgar at gmail.com  Mon Jun 29 05:54:46 2009
From: espina.edgar at gmail.com (Edgar Espina)
Date: Mon, 29 Jun 2009 09:54:46 -0300
Subject: [antlr-interest] ANTLR IDE v2.0.0-rc2 released
Message-ID: <92b42db60906290554u6559472byb2c1e55decefeb7e@mail.gmail.com>

Bugs fixed:
 - Outline b0rked
 - gUnit editor/eclipse hangs
 - Invalid outline in ST editor

Regards,
-- 
edgar

From Floor.Goddijn at aimms.com  Mon Jun 29 06:14:35 2009
From: Floor.Goddijn at aimms.com (Floor Goddijn)
Date: Mon, 29 Jun 2009 15:14:35 +0200
Subject: [antlr-interest] Getting a list of possible tokens at a Parser
	NoViableAltException in ANTLR v3.1
Message-ID: <4A68A6F32FCC8D41998052FCB4693E630165094F@pdtserver.paragon.nl>

Hi, 

 

I was wondering whether it is possible to get a list of expected
(possible) tokens at a NoViableAltException. 

Consider this small example grammar: 

 

grammar NoViableAltGrammar;

 

statement 

                :    statementA

                |   statementB

                ; 

                

statementA 

                :   ID Min ID Semi

                ;

                

statementB

                :   ID Plus ID Semi

                ;               

 

fragment

CHAR :  'a'..'z' ;

 

ID : CHAR+;

Semi :    ';'    ;

Plus:    '+'    ; 

Min :    '-'    ;          

Assign:    '='    ;  

 

WS:        (' '|'\t'|'\n'|'\r')+ {$channel=HIDDEN;}    ;

 

 

Starting with "statement"  and  this input:

 monkey = banana

 

I get a NoViableAlt  at token '=' . 

In a user error message I would like to tell that  "a  '-' or '+'  was
expected" .

The information is available in the generated parser code of the rule
statement, but as it seems, I cannot access this information through the
noViableAltException.

 

Best regards, 

 

Floor

 

 

 


CONFIDENTIALITY: This e-mail and any attachments are confidential and may be privileged. If you are not a named recipient, please notify the sender immediately and do not disclose the contents to another person, use it for any purpose or store or copy the information in any medium.



-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090629/0651d1cb/attachment.html 

From elnur.j at gmail.com  Mon Jun 29 06:41:55 2009
From: elnur.j at gmail.com (Elnur Cabarov)
Date: Mon, 29 Jun 2009 18:41:55 +0500
Subject: [antlr-interest] Using ANTLR without Java
In-Reply-To: <cb604c710906282138u5354396ewd6beffeb47fb91bc@mail.gmail.com>
References: <cb604c710906262248u6ab48210seae10816a8588146@mail.gmail.com> 
	<20090627142203.295223418491@www.antlr.org>
	<86403CA0939415448BCCB83855EFE09AA68349@Bloodymary.ironwillgames.com>
	<86403CA0939415448BCCB83855EFE09AA6834C@Bloodymary.ironwillgames.com> 
	<cb604c710906282138u5354396ewd6beffeb47fb91bc@mail.gmail.com>
Message-ID: <cb604c710906290641g3214c60fufd87407603e2c0a2@mail.gmail.com>

I've tried your code with simple grammar. It's exactly what I need. Thank
you

On Mon, Jun 29, 2009 at 9:38 AM, Elnur Cabarov <elnur.j at gmail.com> wrote:

> Thanks a lot to you all. I didn't expect so much help :)
>
> Normally end-users wouldn't be writing grammars -- grammar writing
>> is a complicated business. :)
>>
>
> You're right, normally the won't, but they will be able if want to add
> extra functionality :)
> In fact the program is intented for advanced users, such as developers and
> architects
>
> It'll take me some time to try out your solutions
>
> Thanks again
>
>
> On Mon, Jun 29, 2009 at 12:53 AM, Sam Harwell <sharwell at pixelminegames.com
> > wrote:
>
>> http://www.pixelminegames.com/downloads/nFringe/ANTLR-3.1-2009-06-28.7z
>>
>> Note that the templates are "loose" on the file system, so you can
>> update them without recompiling if you wish.
>>
>> Sam
>>
>> -----Original Message-----
>> From: antlr-interest-bounces at antlr.org
>> [mailto:antlr-interest-bounces at antlr.org] On Behalf Of Sam Harwell
>> Sent: Saturday, June 27, 2009 8:26 PM
>> To: Gavin Lambert; Elnur Cabarov; antlr-interest at antlr.org
>> Subject: Re: [antlr-interest] Using ANTLR without Java
>>
>> I don't have a packaged release available, but the source in my branch
>> is completely up-to-date with the Java branch. :) I could package a
>> build tonight or tomorrow and host it on one of my servers if someone is
>> interested in it. It's self-contained (doesn't require any earlier
>> version of ANTLR or Java) as well since I ported all of its grammars to
>> v3 in the process.
>>
>> Sam
>>
>> -----Original Message-----
>> From: antlr-interest-bounces at antlr.org
>> [mailto:antlr-interest-bounces at antlr.org] On Behalf Of Gavin Lambert
>> Sent: Saturday, June 27, 2009 9:22 AM
>> To: Elnur Cabarov; antlr-interest at antlr.org
>> Subject: Re: [antlr-interest] Using ANTLR without Java
>>
>> At 17:48 27/06/2009, Elnur Cabarov wrote:
>> >I'm writing an application in C# and want to use ANTLR in it
>> >(i.e. user should be able to write own grammars or change
>> >existing ones, compile and run them dynamically)
>> >
>> >But I don't want end-users need both .Net framework and Java. Is
>> >there any way to use ANTLR without Java? I don't mean using C# as
>> >a target language. I mean dynamically compiling grammars and
>> >running them without Java
>>
>> Normally end-users wouldn't be writing grammars -- grammar writing
>> is a complicated business. :)
>>
>> For the common case, where you define a DSL or full language and
>> the end-user simply composes programs (or other data) using that
>> language, then Java is not needed by the end-user at all.  Neither
>> the generated C# code nor the C# runtime require Java.
>>
>> If you really are trying to let end-users compile grammars, and
>> want a native solution, then you'll probably have to wait a
>> while.  IIRC Sam Harwell (the C# target maintainer) has done some
>> work towards porting the whole of ANTLR (including the compiler)
>> to C#.  But it's still all pre-release.
>>
>>
>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>> Unsubscribe:
>> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>>
>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>> Unsubscribe:
>> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>>
>
>
>
> --
> Elnur Cabarov
>



-- 
Elnur Cabarov
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090629/f596653d/attachment.html 

From jimi at temporal-wave.com  Mon Jun 29 08:34:32 2009
From: jimi at temporal-wave.com (Jim Idle)
Date: Mon, 29 Jun 2009 08:34:32 -0700
Subject: [antlr-interest] Getting a list of possible tokens at a Parser
 NoViableAltException in ANTLR v3.1
In-Reply-To: <4A68A6F32FCC8D41998052FCB4693E630165094F@pdtserver.paragon.nl>
References: <4A68A6F32FCC8D41998052FCB4693E630165094F@pdtserver.paragon.nl>
Message-ID: <4A48DF08.40306@temporal-wave.com>

An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090629/fe7adeae/attachment.html 

From fridi70 at gmx.de  Mon Jun 29 08:50:10 2009
From: fridi70 at gmx.de (fridi70 at gmx.de)
Date: Mon, 29 Jun 2009 17:50:10 +0200
Subject: [antlr-interest] Newby question
Message-ID: <20090629155010.52190@gmx.net>

I have a grammar file in which a text file structure and a complete logic (basic like with if-then-else etc) is described in.
Because of it's complexity, I would like to extract a separate grammar for "logic". So I want one grammar for the file (header, footer...) and an additional grammar for the logic only.

How can I achive this and how do I concatinate thoose 2 grammars?

Thanks in advance
  fridi



start	
	: file;

file
	: header content footer? EOF
	;	
	
content
	: logic? table*
	;

logic	
	: (PAGE_DECLARATION 
	   | line)+
	  END
	;
	
line
	: w = PREFIX command 
	;

command	
	: ifStatement | THEN | ELSE | actionSeq
	;

ifStatement	
	: IF^ expression
	;
-- 
Neu: GMX Doppel-FLAT mit Internet-Flatrate + Telefon-Flatrate
f?r nur 19,99 Euro/mtl.!* http://portal.gmx.net/de/go/dsl02

From andy.grove at codefutures.com  Mon Jun 29 14:02:27 2009
From: andy.grove at codefutures.com (Andy Grove)
Date: Mon, 29 Jun 2009 15:02:27 -0600
Subject: [antlr-interest] [ANTLR C 3.1.3] UCS2 input stream attempting to
	read beyond end of input
Message-ID: <22C4423A-01B5-40FF-8C16-F51DDB05D7AE@codefutures.com>

Hi Jim,

I am hitting some errors which seem to be related to the UCS2 input  
stream attempting to read past the end of my UTF-16 input data. This  
is the error I am seeing in one of my tests:

-memory-(1)  : error 9 : Extraneous token, at offset 58
     near [
      : Extraneous input - expected <EOF>

Here are the input bytes:

SQLParser::parse() converted UTF-16 string (num bytes = 118) :
49 00 4e 00 53 00 45 00 52 00 54 00 20 00 49 00 4e 00 54 00 4f 00 20  
00 70 00 65 00 70 00 70 00 [I.N.S.E.R.T. .I.N.T.O. .p.e.p.p.]
65 00 72 00 20 00 28 00 6e 00 61 00 6d 00 65 00 2c 00 20 00 74 00 61  
00 73 00 74 00 65 00 29 00 [e.r. .(.n.a.m.e.,. .t.a.s.t.e.).]
20 00 56 00 41 00 4c 00 55 00 45 00 53 00 20 00 28 00 27 00 4a 00 61  
00 6c 00 61 00 70 00 65 00 [ .V.A.L.U.E.S. .(.'.J.a.l.a.p.e.]
f1 00 6f 00 27 00 2c 00 20 00 27 00 68 00 6f 00 74 00 27 00 29  
00                               [..o.'.,. .'.h.o.t.'.).]

The strange thing is that functionally, the test is working as expected.

Another of my tests is actually failing with a different problem - the  
generated parser is not calling the final action I have specified in  
my grammar (maybe because it is not hitting the EOF character?). I am  
wondering if these two issues are somehow related. I have run the code  
through valgrind and there are no errors detected in terms of memory  
access. Here is my code for doing the conversion from UTF-8 to UTF-16  
and creating the input stream.

         // input buffer
         const UTF8* source = (const UTF8*) sql;
         const UTF8* sourcestart = source;
         const UTF8* sourceend = sourcestart + length;

         // output buffer
         UTF16* target = new UTF16[length + 16]; // extra chars for  
safety
         UTF16* targetstart = target;
         UTF16* targetend = target + length;

         memset(target, 0, 2*(length+16)); // fill with \0 to ensure  
string is null-terminated with at least 16 nulls

         // conversion
         ConversionResult res = ConvertUTF8toUTF16(&sourcestart,  
sourceend, &targetstart, targetend, strictConversion);
         if (res != conversionOK) {
             // cleanup ..
             throw "failed";
         }

         input =  
antlr3NewUCS2StringInPlaceStream((pANTLR3_UINT16)target, length, NULL);


Any suggestions would be appreciated.

Thanks,

Andy.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090629/7834e1a9/attachment.html 

From jimi at temporal-wave.com  Mon Jun 29 14:48:36 2009
From: jimi at temporal-wave.com (Jim Idle)
Date: Mon, 29 Jun 2009 14:48:36 -0700
Subject: [antlr-interest] [ANTLR C 3.1.3] UCS2 input stream attempting
 to read beyond end of input
In-Reply-To: <22C4423A-01B5-40FF-8C16-F51DDB05D7AE@codefutures.com>
References: <22C4423A-01B5-40FF-8C16-F51DDB05D7AE@codefutures.com>
Message-ID: <4A4936B4.8030002@temporal-wave.com>

An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090629/a939c85e/attachment.html 

From gyanit at gmail.com  Mon Jun 29 16:59:11 2009
From: gyanit at gmail.com (Gyanit Singh)
Date: Mon, 29 Jun 2009 16:59:11 -0700
Subject: [antlr-interest] Check for end of token stream when parser finishes.
Message-ID: <a4702f7b0906291659y4489f925s9b644a8df2b82f9c@mail.gmail.com>

Hi all,

I have a simple grammar
----------------------
grammar test;
test     : exp;
exp    : ONE ('+' ONE)* ;
ONE    : '1';
-----------------------

if you try to parse "1+11" the parser matches test and expr to "1+1" and
ignores the last "1". Is there a way to throw an exception when this
happens.

More abstractly, when the rule is kleene closure (or plus) and it ends
leading to the end of the main rule (for the above example rule "test") and
still there are tokens remaining then how to throw and exception instead of
partial match. In other words, after the parsing is done how to check
whether the token stream has ended or not?

thanks,
gyanit.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090629/cf06fdd8/attachment.html 

From shibinck at gmail.com  Mon Jun 29 17:08:56 2009
From: shibinck at gmail.com (shibinck)
Date: Tue, 30 Jun 2009 05:38:56 +0530
Subject: [antlr-interest] Check for end of token stream when parser
	finishes.
In-Reply-To: <a4702f7b0906291659y4489f925s9b644a8df2b82f9c@mail.gmail.com>
References: <a4702f7b0906291659y4489f925s9b644a8df2b82f9c@mail.gmail.com>
Message-ID: <c2247ac0906291708n63a5e633tb633a9d60f21ee9a@mail.gmail.com>

Hi,You could use the EOF token to match the whole input
test: exp EOF;
-shibin


On Tue, Jun 30, 2009 at 5:29 AM, Gyanit Singh <gyanit at gmail.com> wrote:

> Hi all,
>
> I have a simple grammar
> ----------------------
> grammar test;
> test     : exp;
> exp    : ONE ('+' ONE)* ;
> ONE    : '1';
> -----------------------
>
> if you try to parse "1+11" the parser matches test and expr to "1+1" and
> ignores the last "1". Is there a way to throw an exception when this
> happens.
>
> More abstractly, when the rule is kleene closure (or plus) and it ends
> leading to the end of the main rule (for the above example rule "test") and
> still there are tokens remaining then how to throw and exception instead of
> partial match. In other words, after the parsing is done how to check
> whether the token stream has ended or not?
>
> thanks,
> gyanit.
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090630/f7fcdeef/attachment.html 

From gyanit at gmail.com  Mon Jun 29 17:16:59 2009
From: gyanit at gmail.com (Gyanit Singh)
Date: Mon, 29 Jun 2009 17:16:59 -0700
Subject: [antlr-interest] Check for end of token stream when parser
	finishes.
In-Reply-To: <c2247ac0906291708n63a5e633tb633a9d60f21ee9a@mail.gmail.com>
References: <a4702f7b0906291659y4489f925s9b644a8df2b82f9c@mail.gmail.com>
	<c2247ac0906291708n63a5e633tb633a9d60f21ee9a@mail.gmail.com>
Message-ID: <a4702f7b0906291716t40d680c1h5517b4902c929b7f@mail.gmail.com>

The problem still remains.
----------------------
grammar test;
test     : (exp EOF)+;
exp    : ONE ('+' ONE)* ;
ONE    : '1';
EOF   : ';'
-----------------------

Now I am looking for list of expression seperated by a semicolon. The
problem is checking whether parser have matched the whole token stream or
not.

Now "1+1;11+1;" will match "1+1;" and ignores last "11+1;". The application
requires me of raising an exception whenever there are tokens remaining (as
it is more likely input error).

-gyanit

Hi,You could use the EOF token to match the whole input
> test: exp EOF;
> -shibin
>
>
> On Tue, Jun 30, 2009 at 5:29 AM, Gyanit Singh <gyanit at gmail.com> wrote:
>
>> Hi all,
>>
>> I have a simple grammar
>> ----------------------
>> grammar test;
>> test     : exp;
>> exp    : ONE ('+' ONE)* ;
>> ONE    : '1';
>> -----------------------
>>
>> if you try to parse "1+11" the parser matches test and expr to "1+1" and
>> ignores the last "1". Is there a way to throw an exception when this
>> happens.
>>
>> More abstractly, when the rule is kleene closure (or plus) and it ends
>> leading to the end of the main rule (for the above example rule "test") and
>> still there are tokens remaining then how to throw and exception instead of
>> partial match. In other words, after the parsing is done how to check
>> whether the token stream has ended or not?
>>
>> thanks,
>> gyanit.
>>
>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>> Unsubscribe:
>> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>>
>>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090629/06a49a5d/attachment.html 

From shibinck at gmail.com  Mon Jun 29 17:28:18 2009
From: shibinck at gmail.com (shibinck)
Date: Tue, 30 Jun 2009 05:58:18 +0530
Subject: [antlr-interest] Check for end of token stream when parser
	finishes.
In-Reply-To: <a4702f7b0906291716t40d680c1h5517b4902c929b7f@mail.gmail.com>
References: <a4702f7b0906291659y4489f925s9b644a8df2b82f9c@mail.gmail.com> 
	<c2247ac0906291708n63a5e633tb633a9d60f21ee9a@mail.gmail.com> 
	<a4702f7b0906291716t40d680c1h5517b4902c929b7f@mail.gmail.com>
Message-ID: <c2247ac0906291728y180900d1q64dc8d3cede22377@mail.gmail.com>

Hi,You shouldn't redefine EOF. It's a predefined token for end of stream. I
guess this is what you want
grammar test;
test     : exp+ EOF;
exp    : ONE ('+' ONE)* ';';
ONE    : '1';
-shibin


On Tue, Jun 30, 2009 at 5:46 AM, Gyanit Singh <gyanit at gmail.com> wrote:

> The problem still remains.
> ----------------------
> grammar test;
> test     : (exp EOF)+;
> exp    : ONE ('+' ONE)* ;
> ONE    : '1';
> EOF   : ';'
> -----------------------
>
> Now I am looking for list of expression seperated by a semicolon. The
> problem is checking whether parser have matched the whole token stream or
> not.
>
> Now "1+1;11+1;" will match "1+1;" and ignores last "11+1;". The application
> requires me of raising an exception whenever there are tokens remaining (as
> it is more likely input error).
>
> -gyanit
>
>
> Hi,You could use the EOF token to match the whole input
>> test: exp EOF;
>> -shibin
>>
>>
>> On Tue, Jun 30, 2009 at 5:29 AM, Gyanit Singh <gyanit at gmail.com> wrote:
>>
>>> Hi all,
>>>
>>> I have a simple grammar
>>> ----------------------
>>> grammar test;
>>> test     : exp;
>>> exp    : ONE ('+' ONE)* ;
>>> ONE    : '1';
>>> -----------------------
>>>
>>> if you try to parse "1+11" the parser matches test and expr to "1+1" and
>>> ignores the last "1". Is there a way to throw an exception when this
>>> happens.
>>>
>>> More abstractly, when the rule is kleene closure (or plus) and it ends
>>> leading to the end of the main rule (for the above example rule "test") and
>>> still there are tokens remaining then how to throw and exception instead of
>>> partial match. In other words, after the parsing is done how to check
>>> whether the token stream has ended or not?
>>>
>>> thanks,
>>> gyanit.
>>>
>>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>>> Unsubscribe:
>>> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>>>
>>>
>>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090630/a27e4154/attachment.html 

From jimi at temporal-wave.com  Mon Jun 29 17:37:02 2009
From: jimi at temporal-wave.com (Jim Idle)
Date: Mon, 29 Jun 2009 17:37:02 -0700
Subject: [antlr-interest] Check for end of token stream when parser
	finishes.
In-Reply-To: <a4702f7b0906291659y4489f925s9b644a8df2b82f9c@mail.gmail.com>
References: <a4702f7b0906291659y4489f925s9b644a8df2b82f9c@mail.gmail.com>
Message-ID: <4A495E2E.6070600@temporal-wave.com>

An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090629/58976dcc/attachment.html 

From gustaf.j at gmail.com  Tue Jun 30 04:26:34 2009
From: gustaf.j at gmail.com (Gustaf Johansson)
Date: Tue, 30 Jun 2009 13:26:34 +0200
Subject: [antlr-interest] Code too large, java error
Message-ID: <5f59a7210906300426p548dd9e7p73f824a4b68dbcc8@mail.gmail.com>

Hello,

I have implemented the grammar for a fairly complex language, using it's BNF
definition as base.
(Basically just reformatting the syntax to match Antlr).

Now this worked fine although the generated java code got pretty large,
~60?000 lines in the parser and ~7?500 in the lexer.

Now there has arrived a new revision of the language and i started to
implement the additions and changes and thats where i hit the wall.

Using just plain Antlr and generate a non-debug version works as before, but
in AntlrWorks when generating a debug version i get:

[12:56:12] C:\antlr\output\ExtendedParser.java:15: code too large
[12:56:12]     public static final String[] tokenNames = new String[] {
[12:56:12]                                  ^
[12:56:12] 1 error

The debug versions are ~85?500 lines in the parser and ~7?800 lines in the
lexer.

If i comment out the "tokenNames" and "ruleNames" string and the
"getTokenNames" function it compiles and runs, but id rather not do this
manually each time i compile.

So i wounder if there is some way to break these strings into smaller pieces
in Antlr or some way to get around this limitation in Java?

I really like to retain as much 1:1 syntax with the language's BNF since i
need to trust that the parser is correct.

The parser grammar is ~900 lines with comments.

BR Gustaf
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090630/98f71133/attachment.html 

From stefan.bischof at deri.org  Tue Jun 30 04:27:35 2009
From: stefan.bischof at deri.org (Stefan Bischof)
Date: Tue, 30 Jun 2009 12:27:35 +0100
Subject: [antlr-interest] Suppress output of
	org.antlr.runtime.tree.TreeRewriter
Message-ID: <1246361255.13698.7.camel@nbgal035>

Hi guys,

I'm currently using a rewriting tree grammar (rewrite=true, filter=true)
which means my parser is extending org.antlr.runtime.tree.TreeRewriter.

I want to feed output of my program directly to another program with an
unnamed pipe | on the command line. Unfortunately that's not possible
now because the TreeRewriter shows every rewriting on stdout (like a ->
b).

So, is there a possibility to suppress this output (yes, it's using
System.out.println)?

regards
Stefan Bischof



From s.barnett-cormack at lancaster.ac.uk  Tue Jun 30 05:47:25 2009
From: s.barnett-cormack at lancaster.ac.uk (Sam Barnett-Cormack)
Date: Tue, 30 Jun 2009 13:47:25 +0100
Subject: [antlr-interest] Guidance sought on use of Maven and Eclipse
Message-ID: <4A4A095D.3070504@lancaster.ac.uk>

Hi all,

So, currently I'm using eclipse with ANTLR IDE, and it's working nicely. 
I'm moving toward mavenising my work (which is broken into multiple 
projects), and the bits without ANTLR use are going fine.

However, for the ANTLR bits, I'd ideally make use of maven's ANTLR 
plugin to make the project portable outside of eclipse. I also want to 
keep using at least the editor/debugger functionality of ANTLR IDE. Is 
there any way that people know of to marry these? How would I go about 
adding ANTLR to the maven pom for plugin as well as dependency? Are 
there docs, and where? And does anyone have experience of doing this in 
Eclipse and marrying it with an ANTLR Eclipse plugin?

Thanks,

Sam

PS: I'm planning to ask the m2eclipse list as well, I just thought I'd 
try here first.

From james.abley at gmail.com  Tue Jun 30 06:19:14 2009
From: james.abley at gmail.com (James Abley)
Date: Tue, 30 Jun 2009 14:19:14 +0100
Subject: [antlr-interest] Guidance sought on use of Maven and Eclipse
In-Reply-To: <4A4A095D.3070504@lancaster.ac.uk>
References: <4A4A095D.3070504@lancaster.ac.uk>
Message-ID: <23fce8e60906300619g7664f941mf1f1ce4fe7dcf5e@mail.gmail.com>

2009/6/30 Sam Barnett-Cormack <s.barnett-cormack at lancaster.ac.uk>:
> Hi all,
>
> So, currently I'm using eclipse with ANTLR IDE, and it's working nicely.
> I'm moving toward mavenising my work (which is broken into multiple
> projects), and the bits without ANTLR use are going fine.
>
> However, for the ANTLR bits, I'd ideally make use of maven's ANTLR
> plugin to make the project portable outside of eclipse. I also want to
> keep using at least the editor/debugger functionality of ANTLR IDE. Is
> there any way that people know of to marry these? How would I go about
> adding ANTLR to the maven pom for plugin as well as dependency? Are
> there docs, and where? And does anyone have experience of doing this in
> Eclipse and marrying it with an ANTLR Eclipse plugin?
>
> Thanks,
>
> Sam
>
> PS: I'm planning to ask the m2eclipse list as well, I just thought I'd
> try here first.
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>

Hi Sam,

I have something like the following in my projects:

                <plugin>
				<groupId>org.antlr</groupId>
				<artifactId>antlr3-maven-plugin</artifactId>
				<version>3.1.1.2</version>
                <executions>
                    <execution>
                        <goals>
                            <goal>antlr</goal>
                        </goals>
                    </execution>
                </executions>
			</plugin>

Doing a maven build on a project puts stuff into
my-module/target/generated-sources/antlr and either Eclipse /
M2Eclipse or myself edited the project classpath to reference the
generated classes.

Cheers,

James

From dave at tridecap.com  Tue Jun 30 06:26:18 2009
From: dave at tridecap.com (Dave Dutcher)
Date: Tue, 30 Jun 2009 08:26:18 -0500
Subject: [antlr-interest] Look-ahead problem parsing phrase?
In-Reply-To: <bf6ee7090906282111l4803e48egf1fba47dc302c931@mail.gmail.com>
References: <bf6ee7090906281054s6bf6bce4t95d772ad6e53d597@mail.gmail.com><200906282107.n5SL7MS02569@tiger.atomicsystems.com><bf6ee7090906281421r1832a279i39b50596267b266c@mail.gmail.com><200906282143.n5SLh5S02782@tiger.atomicsystems.com><bf6ee7090906281604xfc090bdx9c8644bb56117dad@mail.gmail.com><1246239346.28368.69.camel@gecko.home.org>
	<bf6ee7090906282111l4803e48egf1fba47dc302c931@mail.gmail.com>
Message-ID: <97558FADC4F54F1C85CADA8383CE777C@tridecap.com>

>From: Sean O'Dell
>Subject: Re: [antlr-interest] Look-ahead problem parsing phrase?
>	
>Thanks ... that really did help. I think I didn't realize how much better
the parser is than the lexer at 
>looking-ahead. It makes much more sense to me now, though I'm not yet sure
how I will deal with tokenizing 
>optional trailing whitespace.
>	
>I think, though, if I understand correctly: the lexer rule I build to
consume that should not be allowed 
>to be empty. However, if it's optional, I should indicate that in a parser
rule and not the lexer rule.
>	
>Maybe another way to say this is (and maybe it's been said, but I didn't
"hear" it correctly): lexer rules 
>should strive to be completely unambiguous and should match something,
preferably immediately from the 
>left. Parser rules can have more complex look-ahead patterns.


The lexer is really just as powerful as the parse, but the big difference is
that Antlr will chose which lexer token to start with where with a grammar
you specify the starting token.

You originally posted this lexer grammar:

    WS : (' '|'\t')+;
    DIGIT : ('0'..'9');
    LETTER : ('a'..'z'|'A'..'Z'); 
    NEWLINE : '\r'? '\n';
    WORD : (LETTER|DIGIT)+;
    EOL : WS? NEWLINE?;
    PHRASE : WORD (WS WORD)*;

What you have to remember is that the lexer runs first and completely
tokenizes the character stream before the parser runs.  Also Antlr decides
which lexer token to match.  The way I think of it is that basically Antlr
adds another lexer rule that looks like this:

START :
  (WS | DIGIT | LETTER | NEWLINE | WORD | EOL | PHRASE);

Now you can see how having to chose between PHRASE and WORD could be tricky.
If you a rule is marked as a fragment, it won't be included in the "START"
rule.  

That said, this might not have been your problem, and Jim's solution might
be all you need.

Dave




From Viktor_Lioutyi at i2.com  Tue Jun 30 07:21:49 2009
From: Viktor_Lioutyi at i2.com (Viktor Lioutyi)
Date: Tue, 30 Jun 2009 09:21:49 -0500
Subject: [antlr-interest] Suppress output
	of	org.antlr.runtime.tree.TreeRewriter
In-Reply-To: <1246361255.13698.7.camel@nbgal035>
References: <1246361255.13698.7.camel@nbgal035>
Message-ID: <33A4D20438DA1C4A8D7A8981F072D25B19C81E7C42@DLMBXCCR.i2.com>

Hi Stefan,

ANTLR comes with the source code. For issues like this I created patch.jar file with small fixes to ANTLR and put on a classpath before ANTLR jar files. For ANTLR 3.1.3 this output is in antlr-3.1.3/runtime/Java/src/main/java/org/antlr/runtime/tree/TreeRewriter.java, method

    public Object applyOnce(Object t, fptr whichRule) {


Thanks,
Viktor

-----Original Message-----
From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-bounces at antlr.org] On Behalf Of Stefan Bischof
Sent: Tuesday, June 30, 2009 7:28 AM
To: antlr-interest at antlr.org
Subject: [antlr-interest] Suppress output of org.antlr.runtime.tree.TreeRewriter

Hi guys,

I'm currently using a rewriting tree grammar (rewrite=true, filter=true)
which means my parser is extending org.antlr.runtime.tree.TreeRewriter.

I want to feed output of my program directly to another program with an
unnamed pipe | on the command line. Unfortunately that's not possible
now because the TreeRewriter shows every rewriting on stdout (like a ->
b).

So, is there a possibility to suppress this output (yes, it's using
System.out.println)?

regards
Stefan Bischof



List: http://www.antlr.org/mailman/listinfo/antlr-interest
Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address

From sean at celsoft.com  Tue Jun 30 07:31:37 2009
From: sean at celsoft.com (Sean O'Dell)
Date: Tue, 30 Jun 2009 07:31:37 -0700
Subject: [antlr-interest] Guidance sought on use of Maven and Eclipse
In-Reply-To: <23fce8e60906300619g7664f941mf1f1ce4fe7dcf5e@mail.gmail.com>
References: <4A4A095D.3070504@lancaster.ac.uk>
	<23fce8e60906300619g7664f941mf1f1ce4fe7dcf5e@mail.gmail.com>
Message-ID: <bf6ee7090906300731y4d6f5cb0v7235db92eb54dba4@mail.gmail.com>

Sam,

Some additional notes that I found to be the case when I set up ANTLR and
Maven just recently.

1) Use the plugin described here, exactly as described:
http://antlr.org/antlr3-maven-plugin/index.html.
2) Use version '3.1.3-1' or better.  It's available in central, so you can
just update your plugins and away you go.
3) If you want to call the plugin directly, use 'mvn
groupId:artifactId:antlr', not just 'antlr3:antlr' which will actually
download and call a version by codehaus, which I tore my hair out with.  I
won't call it buggy, but it was an entirely unpleasant experience.
4) It wasn't entirely clear to me where to put the grammars at first; they
go into 'src/main/antlr3/your/package/hierarchy/here'.  The generated files
will be created in the same hierarchy.  Unfortunately, just like Java, you
also have to give your grammar a package name to use.
5) I couldn't get m2eclipse to "see" the generated source directory; you
might just have to add it to the list of source folders like I did.

Sean

On Tue, Jun 30, 2009 at 6:19 AM, James Abley <james.abley at gmail.com> wrote:

> 2009/6/30 Sam Barnett-Cormack <s.barnett-cormack at lancaster.ac.uk>:
> > Hi all,
> >
> > So, currently I'm using eclipse with ANTLR IDE, and it's working nicely.
> > I'm moving toward mavenising my work (which is broken into multiple
> > projects), and the bits without ANTLR use are going fine.
> >
> > However, for the ANTLR bits, I'd ideally make use of maven's ANTLR
> > plugin to make the project portable outside of eclipse. I also want to
> > keep using at least the editor/debugger functionality of ANTLR IDE. Is
> > there any way that people know of to marry these? How would I go about
> > adding ANTLR to the maven pom for plugin as well as dependency? Are
> > there docs, and where? And does anyone have experience of doing this in
> > Eclipse and marrying it with an ANTLR Eclipse plugin?
> >
> > Thanks,
> >
> > Sam
> >
> > PS: I'm planning to ask the m2eclipse list as well, I just thought I'd
> > try here first.
> >
> > List: http://www.antlr.org/mailman/listinfo/antlr-interest
> > Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
> >
>
> Hi Sam,
>
> I have something like the following in my projects:
>
>                <plugin>
>                                <groupId>org.antlr</groupId>
>                                <artifactId>antlr3-maven-plugin</artifactId>
>                                <version>3.1.1.2</version>
>                <executions>
>                    <execution>
>                        <goals>
>                            <goal>antlr</goal>
>                        </goals>
>                    </execution>
>                </executions>
>                        </plugin>
>
> Doing a maven build on a project puts stuff into
> my-module/target/generated-sources/antlr and either Eclipse /
> M2Eclipse or myself edited the project classpath to reference the
> generated classes.
>
> Cheers,
>
> James
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090630/ad7fda8d/attachment.html 

From sean at celsoft.com  Tue Jun 30 07:36:16 2009
From: sean at celsoft.com (Sean O'Dell)
Date: Tue, 30 Jun 2009 07:36:16 -0700
Subject: [antlr-interest] Look-ahead problem parsing phrase?
In-Reply-To: <97558FADC4F54F1C85CADA8383CE777C@tridecap.com>
References: <bf6ee7090906281054s6bf6bce4t95d772ad6e53d597@mail.gmail.com>
	<200906282107.n5SL7MS02569@tiger.atomicsystems.com>
	<bf6ee7090906281421r1832a279i39b50596267b266c@mail.gmail.com>
	<200906282143.n5SLh5S02782@tiger.atomicsystems.com>
	<bf6ee7090906281604xfc090bdx9c8644bb56117dad@mail.gmail.com>
	<1246239346.28368.69.camel@gecko.home.org>
	<bf6ee7090906282111l4803e48egf1fba47dc302c931@mail.gmail.com>
	<97558FADC4F54F1C85CADA8383CE777C@tridecap.com>
Message-ID: <bf6ee7090906300736m20eba90bjef47b8184d814157@mail.gmail.com>

Still helpful information.  I did get past my issues, though ... the smoke
in my eyes is blowing away gradually.

Sean

On Tue, Jun 30, 2009 at 6:26 AM, Dave Dutcher <dave at tridecap.com> wrote:

> >From: Sean O'Dell
> >Subject: Re: [antlr-interest] Look-ahead problem parsing phrase?
> >
> >Thanks ... that really did help. I think I didn't realize how much better
> the parser is than the lexer at
> >looking-ahead. It makes much more sense to me now, though I'm not yet sure
> how I will deal with tokenizing
> >optional trailing whitespace.
> >
> >I think, though, if I understand correctly: the lexer rule I build to
> consume that should not be allowed
> >to be empty. However, if it's optional, I should indicate that in a parser
> rule and not the lexer rule.
> >
> >Maybe another way to say this is (and maybe it's been said, but I didn't
> "hear" it correctly): lexer rules
> >should strive to be completely unambiguous and should match something,
> preferably immediately from the
> >left. Parser rules can have more complex look-ahead patterns.
>
>
> The lexer is really just as powerful as the parse, but the big difference
> is
> that Antlr will chose which lexer token to start with where with a grammar
> you specify the starting token.
>
> You originally posted this lexer grammar:
>
>    WS : (' '|'\t')+;
>    DIGIT : ('0'..'9');
>    LETTER : ('a'..'z'|'A'..'Z');
>    NEWLINE : '\r'? '\n';
>    WORD : (LETTER|DIGIT)+;
>    EOL : WS? NEWLINE?;
>    PHRASE : WORD (WS WORD)*;
>
> What you have to remember is that the lexer runs first and completely
> tokenizes the character stream before the parser runs.  Also Antlr decides
> which lexer token to match.  The way I think of it is that basically Antlr
> adds another lexer rule that looks like this:
>
> START :
>  (WS | DIGIT | LETTER | NEWLINE | WORD | EOL | PHRASE);
>
> Now you can see how having to chose between PHRASE and WORD could be
> tricky.
> If you a rule is marked as a fragment, it won't be included in the "START"
> rule.
>
> That said, this might not have been your problem, and Jim's solution might
> be all you need.
>
> Dave
>
>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090630/f5f7e690/attachment.html 

From jimi at temporal-wave.com  Tue Jun 30 08:10:20 2009
From: jimi at temporal-wave.com (Jim Idle)
Date: Tue, 30 Jun 2009 08:10:20 -0700
Subject: [antlr-interest] Code too large, java error
In-Reply-To: <5f59a7210906300426p548dd9e7p73f824a4b68dbcc8@mail.gmail.com>
References: <5f59a7210906300426p548dd9e7p73f824a4b68dbcc8@mail.gmail.com>
Message-ID: <4A4A2ADC.8010408@temporal-wave.com>

Gustaf Johansson wrote:
> Hello,
>
> I have implemented the grammar for a fairly complex language, using 
> it's BNF definition as base.
> (Basically just reformatting the syntax to match Antlr).
>
> Now this worked fine although the generated java code got pretty 
> large, ~60?000 lines in the parser and ~7?500 in the lexer.
>
> Now there has arrived a new revision of the language and i started to 
> implement the additions and changes and thats where i hit the wall.
>
> Using just plain Antlr and generate a non-debug version works as 
> before, but in AntlrWorks when generating a debug version i get:
>
> [12:56:12] C:\antlr\output\ExtendedParser.java:15: code too large
> [12:56:12]     public static final String[] tokenNames = new String[] {
> [12:56:12]                                  ^
> [12:56:12] 1 error
>
> The debug versions are ~85?500 lines in the parser and ~7?800 lines in 
> the lexer.
>
> If i comment out the "tokenNames" and "ruleNames" string and the 
> "getTokenNames" function it compiles and runs, but id rather not do 
> this manually each time i compile.
You need to split your grammar into a number of component parts and use 
import. This generates separate classes and you won't get the problem. 
However, Works is not yet dealing with imports perfectly so while you 
can edit and so on, you will need to debug remotely from Works.

Jim

From jimi at temporal-wave.com  Tue Jun 30 08:19:06 2009
From: jimi at temporal-wave.com (Jim Idle)
Date: Tue, 30 Jun 2009 08:19:06 -0700
Subject: [antlr-interest] Suppress output
	of	org.antlr.runtime.tree.TreeRewriter
In-Reply-To: <1246361255.13698.7.camel@nbgal035>
References: <1246361255.13698.7.camel@nbgal035>
Message-ID: <4A4A2CEA.9060801@temporal-wave.com>

Stefan Bischof wrote:
> Hi guys,
>
> I'm currently using a rewriting tree grammar (rewrite=true, filter=true)
> which means my parser is extending org.antlr.runtime.tree.TreeRewriter.
>
> I want to feed output of my program directly to another program with an
> unnamed pipe | on the command line. Unfortunately that's not possible
> now because the TreeRewriter shows every rewriting on stdout (like a ->
> b).
>
> So, is there a possibility to suppress this output (yes, it's using
> System.out.println)?
>   
Hmmm - I wonder if it is supposed to be doing that:

            if ( r!=null && !t.equals(r.getTree()) && r.getTree()!=null 
) { // show any transformations
                System.out.println(((CommonTree)t).toStringTree()+" -> "+
                                   
((CommonTree)r.getTree()).toStringTree());
            }


Anyway, tell ANTLR to use a superclass say AbstractMyTreeRewriter  
(options { superClass=AbstractMyTreeRewriter; } ) and in that class:

public abstract class AbstractMyTreeRewriter extends TreeRewriter {

    public TreeRewriter(TreeNodeStream input) {
       super(input);
    }
    public TreeRewriter(TreeNodeStream input, RecognizerSharedState state) {
        super(input, state);
    }

    public Object applyOnce(Object t, fptr whichRule) {
        if ( t==null ) return null;
        try {
            // share TreeParser object but not parsing-related state
            state = new RecognizerSharedState();
            input = new CommonTreeNodeStream(originalAdaptor, t);
            
((CommonTreeNodeStream)input).setTokenStream(originalTokenStream);
            setBacktrackingLevel(1);
            TreeRuleReturnScope r = (TreeRuleReturnScope)whichRule.rule();
            setBacktrackingLevel(0);
            if ( failed() ) return t;

            // 
-------------------------------------------------------------------------
            // Commented out the output
            //if ( r!=null && !t.equals(r.getTree()) && 
r.getTree()!=null ) { // show any transformations
            //    System.out.println(((CommonTree)t).toStringTree()+" -> "+
            //                       
((CommonTree)r.getTree()).toStringTree());
            //}

            if ( r!=null && r.getTree()!=null ) return r.getTree();
            else return t;
        }
        catch (RecognitionException e) { ; }
        return t;
    }

}

From jimi at temporal-wave.com  Tue Jun 30 08:27:15 2009
From: jimi at temporal-wave.com (Jim Idle)
Date: Tue, 30 Jun 2009 08:27:15 -0700
Subject: [antlr-interest] Guidance sought on use of Maven and Eclipse
In-Reply-To: <4A4A095D.3070504@lancaster.ac.uk>
References: <4A4A095D.3070504@lancaster.ac.uk>
Message-ID: <4A4A2ED3.2060409@temporal-wave.com>

Sam Barnett-Cormack wrote:

1) Ignore eclipse to start with;
2) Read: www.antlr.org/antlr3-maven-plugin
3) When you can type mvn install then integrate with eclipse
4) To integrate with eclipse you find the docs on the maven eclipse 
plugin and follow the instructions to generate an eclipse project. I 
have never found it to be so great at doing this, but Eclipse fans have 
better mileage. I use netbeans as it understands Maven without having to 
get Maven to produce a project and so on, you just open the directory 
with the pom.xml as a project.

Jim
> Hi all,
>
> So, currently I'm using eclipse with ANTLR IDE, and it's working nicely. 
> I'm moving toward mavenising my work (which is broken into multiple 
> projects), and the bits without ANTLR use are going fine.
>
> However, for the ANTLR bits, I'd ideally make use of maven's ANTLR 
> plugin to make the project portable outside of eclipse. I also want to 
> keep using at least the editor/debugger functionality of ANTLR IDE. Is 
> there any way that people know of to marry these? How would I go about 
> adding ANTLR to the maven pom for plugin as well as dependency? Are 
> there docs, and where? And does anyone have experience of doing this in 
> Eclipse and marrying it with an ANTLR Eclipse plugin?
>
> Thanks,
>
> Sam
>
> PS: I'm planning to ask the m2eclipse list as well, I just thought I'd 
> try here first.
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>   


From jimi at temporal-wave.com  Tue Jun 30 08:30:00 2009
From: jimi at temporal-wave.com (Jim Idle)
Date: Tue, 30 Jun 2009 08:30:00 -0700
Subject: [antlr-interest] Guidance sought on use of Maven and Eclipse
In-Reply-To: <23fce8e60906300619g7664f941mf1f1ce4fe7dcf5e@mail.gmail.com>
References: <4A4A095D.3070504@lancaster.ac.uk>
	<23fce8e60906300619g7664f941mf1f1ce4fe7dcf5e@mail.gmail.com>
Message-ID: <4A4A2F78.7000307@temporal-wave.com>

An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090630/2b03358a/attachment.html 

From stefan.bischof at deri.org  Tue Jun 30 10:10:20 2009
From: stefan.bischof at deri.org (Stefan Bischof)
Date: Tue, 30 Jun 2009 18:10:20 +0100
Subject: [antlr-interest] Suppress
	output	of	org.antlr.runtime.tree.TreeRewriter
In-Reply-To: <4A4A2CEA.9060801@temporal-wave.com>
References: <1246361255.13698.7.camel@nbgal035>
	<4A4A2CEA.9060801@temporal-wave.com>
Message-ID: <1246381820.13698.26.camel@nbgal035>

Hey,

On Tue, 2009-06-30 at 08:19 -0700, Jim Idle wrote:
> Stefan Bischof wrote:
> > Hi guys,
> >
> > I'm currently using a rewriting tree grammar (rewrite=true, filter=true)
> > which means my parser is extending org.antlr.runtime.tree.TreeRewriter.
> >
> > I want to feed output of my program directly to another program with an
> > unnamed pipe | on the command line. Unfortunately that's not possible
> > now because the TreeRewriter shows every rewriting on stdout (like a ->
> > b).
> >
> > So, is there a possibility to suppress this output (yes, it's using
> > System.out.println)?
> >   
> Hmmm - I wonder if it is supposed to be doing that:
> 
>             if ( r!=null && !t.equals(r.getTree()) && r.getTree()!=null 
> ) { // show any transformations
>                 System.out.println(((CommonTree)t).toStringTree()+" -> "+
>                                    
> ((CommonTree)r.getTree()).toStringTree());
>             }

I'm wondering too :)

> Anyway, tell ANTLR to use a superclass say AbstractMyTreeRewriter  
> (options { superClass=AbstractMyTreeRewriter; } ) and in that class:
> 
> public abstract class AbstractMyTreeRewriter extends TreeRewriter {
> 
>     public TreeRewriter(TreeNodeStream input) {
>        super(input);
>     }
>     public TreeRewriter(TreeNodeStream input, RecognizerSharedState state) {
>         super(input, state);
>     }
> 
>     public Object applyOnce(Object t, fptr whichRule) {
>         if ( t==null ) return null;
>         try {
>             // share TreeParser object but not parsing-related state
>             state = new RecognizerSharedState();
>             input = new CommonTreeNodeStream(originalAdaptor, t);
>             
> ((CommonTreeNodeStream)input).setTokenStream(originalTokenStream);
>             setBacktrackingLevel(1);
>             TreeRuleReturnScope r = (TreeRuleReturnScope)whichRule.rule();
>             setBacktrackingLevel(0);
>             if ( failed() ) return t;
> 
>             // 
> -------------------------------------------------------------------------
>             // Commented out the output
>             //if ( r!=null && !t.equals(r.getTree()) && 
> r.getTree()!=null ) { // show any transformations
>             //    System.out.println(((CommonTree)t).toStringTree()+" -> "+
>             //                       
> ((CommonTree)r.getTree()).toStringTree());
>             //}
> 
>             if ( r!=null && r.getTree()!=null ) return r.getTree();
>             else return t;
>         }
>         catch (RecognitionException e) { ; }
>         return t;
>     }
> 
> }

Thanks a lot! That sounds like a practical solution.

Do you plan to remove that in the future? Because IMO that console
output should at least be packed in some logging framework or
suppressible by some switch.

Thanks again!

regards
stefan bischof



From parrt at cs.usfca.edu  Tue Jun 30 14:06:21 2009
From: parrt at cs.usfca.edu (Terence Parr)
Date: Tue, 30 Jun 2009 14:06:21 -0700
Subject: [antlr-interest] got article back up
Message-ID: <AB90486B-83CD-40D2-994F-DDD19D72C569@cs.usfca.edu>

was dead over at codegeneration.net

http://www.antlr.org/wiki/display/ST/Language+Translation+Using+ANTLR+and+StringTemplate

T

From jsrs701 at yahoo.com  Tue Jun 30 17:02:13 2009
From: jsrs701 at yahoo.com (J. Stephen Riley Silber)
Date: Tue, 30 Jun 2009 17:02:13 -0700 (PDT)
Subject: [antlr-interest] Collecting disparate subtrees into one tree?
Message-ID: <748117.36536.qm@web33303.mail.mud.yahoo.com>

Hi gang,

Here's a question for you.? (Apologies if this is explained somewhere; I haven't found it yet.)? Suppose I have a language where I have procedures and functions (Oh! Pascal!), such as this:

??? procedure a() { ... }
??? function x() { ... }
??? procedure b() { ... }
??? 
function y() { ... }
??? 
procedure c() { ... }
??? 
function z() { ... }


Now suppose, when I'm emitting the final representation, I want to group the procs and funcs together--I'm thinking I should somehow rewrite the tree to get it looking like this simplified version:

??? ^( CODE ^( PROCS a b c ) ^( FUNCS x y z ) )

Is there a clever way, in tree-rewriting syntax, to attach a subtree as a child of a completely unrelated node?

Thanks,
Stephen

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090630/39973dc2/attachment.html 

From tcolar at colar.net  Tue Jun 30 17:53:47 2009
From: tcolar at colar.net (Thibaut Colar)
Date: Tue, 30 Jun 2009 17:53:47 -0700
Subject: [antlr-interest] Error recovery in lexer (~ unclosed string)
Message-ID: <4A4AB39B.4040403@colar.net>

Hello there.

In my grammar file, i have a lexer rule to match DSL string like this:
DSL        :'<|' ( options {greedy=false;} : . )* '|>' ;

Now my Lexer is hooked up int the NetBeans IDE to parse(well lexer only 
for now) files and that works well.
The problem is that if you type an oening <| (unclosed at this time), 
the lexer errors out.
What happens is that it goes all the way to the end of the file trying 
to find the closing |>, hits the EOF and throws an exception (null 
nextToken / unmatched tokens left).

I'm not surprised it doesn't like this, but i want to add some error 
recovery so it deos not fail.
I've tried many thing in last 24h but can't seem to find something that 
works.

Latest try is basically this (using states):
Grammar:
DSL        :'<|' {state=INCOMPLETE_DSL} ( options {greedy=false;} : . )* 
'|>' {state=NORMAL};

Lexer: ------------------------
    public Token<FanTokenID> nextToken()
    {
        curToken = (CommonToken) lexer.nextToken();
    if(curToken.getType()==-1) //prob. EOF
    {
        int state = lexer.getState();
        switch (state)
        {
        case FanStates.INCOMPLETE_DSL:
            curToken.setType(FanLexer.INCOMPLETE_DSL); // set as 
incomplete token type
            break;
        }
        lexer.clearState();
    }
    }
------------------------

However that still does not work quite right, it does replace the token 
correctly, but i guess after that it does not continue at the right 
place (do i need a rewind() or consume() or something ?)

Or maybe i'm doing this the wrong way - should i "emit" a fake closing 
token(|>) instead ?

I'm sure this is a pretty common issue but i couldn't find any 
documented way to do this in antlr3 in the book or online.

Any help would be greatly appreciated, Thanks.


From jimi at temporal-wave.com  Tue Jun 30 18:32:44 2009
From: jimi at temporal-wave.com (Jim Idle)
Date: Tue, 30 Jun 2009 18:32:44 -0700
Subject: [antlr-interest] Error recovery in lexer (~ unclosed string)
In-Reply-To: <4A4AB39B.4040403@colar.net>
References: <4A4AB39B.4040403@colar.net>
Message-ID: <51D693C4-6F70-4AE2-ACC3-E6721C92E3CE@temporal-wave.com>

T: '<|'  ' ( options {greedy=false;} : . )*
    ( '|>'
      | // error message
     )
;

Jim

On Jun 30, 2009, at 5:53 PM, Thibaut Colar <tcolar at colar.> wrote:

> Hello there.
>
> In my grammar file, i have a lexer rule to match DSL string like this:
> DSL        :'<|' ( options {greedy=false;} : . )* '|>' ;
>
> Now my Lexer is hooked up int the NetBeans IDE to parse(well lexer  
> only
> for now) files and that works well.
> The problem is that if you type an oening <| (unclosed at this time),
> the lexer errors out.
> What happens is that it goes all the way to the end of the file trying
> to find the closing |>, hits the EOF and throws an exception (null
> nextToken / unmatched tokens left).
>
> I'm not surprised it doesn't like this, but i want to add some error
> recovery so it deos not fail.
> I've tried many thing in last 24h but can't seem to find something  
> that
> works.
>
> Latest try is basically this (using states):
> Grammar:
> DSL        :'<|' {state=INCOMPLETE_DSL} ( options  
> {greedy=false;} : . )*
> '|>' {state=NORMAL};
>
> Lexer: ------------------------
>    public Token<FanTokenID> nextToken()
>    {
>        curToken = (CommonToken) lexer.nextToken();
>    if(curToken.getType()==-1) //prob. EOF
>    {
>        int state = lexer.getState();
>        switch (state)
>        {
>        case FanStates.INCOMPLETE_DSL:
>            curToken.setType(FanLexer.INCOMPLETE_DSL); // set as
> incomplete token type
>            break;
>        }
>        lexer.clearState();
>    }
>    }
> ------------------------
>
> However that still does not work quite right, it does replace the  
> token
> correctly, but i guess after that it does not continue at the right
> place (do i need a rewind() or consume() or something ?)
>
> Or maybe i'm doing this the wrong way - should i "emit" a fake closing
> token(|>) instead ?
>
> I'm sure this is a pretty common issue but i couldn't find any
> documented way to do this in antlr3 in the book or online.
>
> Any help would be greatly appreciated, Thanks.
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address

