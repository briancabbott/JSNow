<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [antlr-interest] Store Line Number in AST node
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:antlr-interest%40antlr.org?Subject=%5Bantlr-interest%5D%20Store%20Line%20Number%20in%20AST%20node&In-Reply-To=20050407055342.47555.qmail%40web53909.mail.yahoo.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="011775.html">
   <LINK REL="Next"  HREF="011776.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[antlr-interest] Store Line Number in AST node</H1>
    <B>Martin Probst</B> 
    <A HREF="mailto:antlr-interest%40antlr.org?Subject=%5Bantlr-interest%5D%20Store%20Line%20Number%20in%20AST%20node&In-Reply-To=20050407055342.47555.qmail%40web53909.mail.yahoo.com"
       TITLE="[antlr-interest] Store Line Number in AST node">mail at martin-probst.com
       </A><BR>
    <I>Thu Apr  7 10:35:53 PDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="011775.html">[antlr-interest] Store Line Number in AST node 
</A></li>
        <LI>Next message: <A HREF="011776.html">[antlr-interest] measure line size.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11786">[ date ]</a>
              <a href="thread.html#11786">[ thread ]</a>
              <a href="subject.html#11786">[ subject ]</a>
              <a href="author.html#11786">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,
you have to set up an ASTFactory to use your AST node type. You will
find information about that in the manual.

Also, did you actually read my response to your original question? You
quoted it in your first two emails to this list. It contains an
explanation how to call .getLine() on AST nodes to retrieve the line
number.

regards,
Martin

Am Mittwoch, den 06.04.2005, 22:53 -0700 schrieb Terry:
&gt;<i> Hi,
</I>&gt;<i> 
</I>&gt;<i> I am thinking to create my own AST class which stores
</I>&gt;<i> line number of parsing code. 
</I>&gt;<i> 
</I>&gt;<i> public class MyAST extends antlr.CommonAST {
</I>&gt;<i> 
</I>&gt;<i>   private int lineNumber;
</I>&gt;<i>   ...
</I>&gt;<i>     public void initialize( antlr.Token t )
</I>&gt;<i>     {
</I>&gt;<i>        	   super.initialize(t);
</I>&gt;<i> 	   setLine(t.getLine() );
</I>&gt;<i>     }
</I>&gt;<i> 
</I>&gt;<i>      ...
</I>&gt;<i> 
</I>&gt;<i> 	// my extensions
</I>&gt;<i> 	public void setLine(int l_)
</I>&gt;<i> 	{
</I>&gt;<i> 		lineNumber = l_;
</I>&gt;<i> 	}
</I>&gt;<i> 
</I>&gt;<i> 	public int getLine( )
</I>&gt;<i> 	{
</I>&gt;<i> 		  return lineNumber;
</I>&gt;<i> 
</I>&gt;<i> 	}
</I>&gt;<i> }
</I>&gt;<i> 
</I>&gt;<i> And I add 
</I>&gt;<i> option{
</I>&gt;<i> ...
</I>&gt;<i> ASTLabelType = &quot;MyAST&quot;;
</I>&gt;<i> }
</I>&gt;<i> in grammar file which is borrowed from
</I>&gt;<i> antlr-2.7.3\examples\java\java\.
</I>&gt;<i> 
</I>&gt;<i> I use my new defined AST class as:
</I>&gt;<i> 
</I>&gt;<i> JavaLexer lexer = new JavaLexer(r);
</I>&gt;<i> JavaRecognizer parser = new JavaRecognizer(lexer);
</I>&gt;<i> parser.compilationUnit();
</I>&gt;<i> MyAST p= (MyAST)parser.getAST();
</I>&gt;<i> 
</I>&gt;<i> Then I have the run-time error:
</I>&gt;<i> java.lang.ClassCastException at
</I>&gt;<i> JavaRecognizer.modifer, the source code at that line
</I>&gt;<i> is: tmp34_AST = (MyAST)astFactory.create(LT(1)); I
</I>&gt;<i> wonder why I can't cast it into my new AST class.
</I>&gt;<i> 
</I>&gt;<i> Thanks
</I>&gt;<i> 
</I>&gt;<i> Terry
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 	
</I>&gt;<i> 		
</I>&gt;<i> __________________________________ 
</I>&gt;<i> Do you Yahoo!? 
</I>&gt;<i> Yahoo! Mail - You care about security. So do we. 
</I>&gt;<i> <A HREF="http://promotions.yahoo.com/new_mail">http://promotions.yahoo.com/new_mail</A>
</I>&gt;<i> 
</I>
</PRE>






<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="011775.html">[antlr-interest] Store Line Number in AST node 
</A></li>
	<LI>Next message: <A HREF="011776.html">[antlr-interest] measure line size.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11786">[ date ]</a>
              <a href="thread.html#11786">[ thread ]</a>
              <a href="subject.html#11786">[ subject ]</a>
              <a href="author.html#11786">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.antlr.org/mailman/listinfo/antlr-interest">More information about the antlr-interest
mailing list</a><br>
</body></html>
