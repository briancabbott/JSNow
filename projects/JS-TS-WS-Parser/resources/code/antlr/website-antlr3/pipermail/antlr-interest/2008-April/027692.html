<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [antlr-interest] Java 1.5 grammar updated
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20Java%201.5%20grammar%20updated&In-Reply-To=%3C381A5859-CBEA-41A6-9531-CA960D43D9F8%40jacelridge.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="027690.html">
   <LINK REL="Next"  HREF="027695.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[antlr-interest] Java 1.5 grammar updated</H1>
    <B>John Ridgway</B> 
    <A HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20Java%201.5%20grammar%20updated&In-Reply-To=%3C381A5859-CBEA-41A6-9531-CA960D43D9F8%40jacelridge.com%3E"
       TITLE="[antlr-interest] Java 1.5 grammar updated">john at jacelridge.com
       </A><BR>
    <I>Tue Apr  8 12:27:30 PDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="027690.html">[antlr-interest] Java 1.5 grammar updated
</A></li>
        <LI>Next message: <A HREF="027695.html">[antlr-interest] Java 1.5 grammar updated
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27692">[ date ]</a>
              <a href="thread.html#27692">[ thread ]</a>
              <a href="subject.html#27692">[ subject ]</a>
              <a href="author.html#27692">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I think that the reason for this is basically historical.  It comes  
from C++, where a class definition must be followed by a &quot;;&quot;.  Java  
decided not to require that semicolon, but then needed some way to  
allow it.  If you read the Java Language Specification (3rd edition,  
2005) by James Gosling et al., section 7.6 specifically says that &quot;;&quot;  
is a valid type declaration; that is, a TypeDeclaration is defined as  
a ClassDeclaration or an InterfaceDeclaration or a &quot;;&quot;.

Furthermore it is entirely reasonable to have a Java file with no  
types declared in it.  In fact the JLS suggests that package  
annotations occur in a file whose only other content is the package  
declaration.  The JLS suggests that &quot;The sole annotated package  
declaration, if it exists, is placed in a source file called package- 
info.java in the directory containing the source files for the  
package.  ... Typically package-info.java contains only a package  
declaration, preceded immediately by the annotations on the package.   
While the file could technically contain the source code for one or  
more package-private classes, it would be very bad form.&quot; (ibid, pp.  
158-159).

Peace
- John


On Apr 8, 2008, at 1:04 PM, Stuart Watt wrote:

&gt;<i> Curious! I just replicated this on a different version, so both Sun  
</I>&gt;<i> JDK Java 6 on Windows and Sun JDK Java 5 on Linux compiled this file  
</I>&gt;<i> OK; interestingly no class file seems to have been created.
</I>&gt;<i>
</I>&gt;<i> I also tried gcj, and managed to break that:
</I>&gt;&gt;<i> <A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">stuart at stuart-desktop</A>:~$ gcj test.java
</I>&gt;&gt;<i> /tmp/ccIIuwWz.jar:0: internal compiler error: in java_parse_file,  
</I>&gt;&gt;<i> at java/jcf-parse.c:1951
</I>&gt;&gt;<i> Please submit a full bug report,
</I>&gt;&gt;<i> with preprocessed source if appropriate.
</I>&gt;&gt;<i> See &lt;URL:<A HREF="http://gcc.gnu.org/bugs.html">http://gcc.gnu.org/bugs.html</A>&gt; for instructions.
</I>&gt;&gt;<i> For Debian GNU/Linux specific bug reporting instructions,
</I>&gt;&gt;<i> see &lt;URL:<A HREF="file:///usr/share/doc/gcc-4.2/README.Bugs">file:///usr/share/doc/gcc-4.2/README.Bugs</A>&gt;.
</I>&gt;<i> It looks like a good grammar should accept this, but clearly not all  
</I>&gt;<i> compilers comply.
</I>&gt;<i>
</I>&gt;<i> It's been ages since my last &quot;internal compiler error&quot; - it's made  
</I>&gt;<i> my day!!!
</I>&gt;<i>
</I>&gt;<i> --S
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Diane Nkonyereza wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> That's strange. I can't compile such a file, I get error : 'class'  
</I>&gt;&gt;<i> or 'interface' expected.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Diane.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Date: Tue, 8 Apr 2008 12:43:30 -0400
</I>&gt;&gt;<i> From: <A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">swatt at infobal.com</A>
</I>&gt;&gt;<i> To: <A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">nkodidi at hotmail.com</A>
</I>&gt;&gt;<i> CC: <A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">antlr-interest at antlr.org</A>
</I>&gt;&gt;<i> Subject: Re: [antlr-interest] Java 1.5 grammar updated
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> This is the same as the grammar rule in the Java spec at: <A HREF="http://java.sun.com/docs/books/jls/second_edition/html/syntax.doc.html">http://java.sun.com/docs/books/jls/second_edition/html/syntax.doc.html</A>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I was surprised by this, and being curious, I just successfully  
</I>&gt;&gt;<i> compiled a Java source file containing only a single semicolon. It  
</I>&gt;&gt;<i> seems a bit  pointless to me, but it is valid Java!
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> All the best
</I>&gt;&gt;<i> Stuart
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Diane Nkonyereza wrote:
</I>&gt;&gt;<i> Hi all,
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I have a question on the latest Java grammar. The question is  
</I>&gt;&gt;<i> related to the typeDeclaration rule.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> - What is the ';' in the typeDeclaration Rule? Can someone please  
</I>&gt;&gt;<i> gives me an example of when the ';' could be an option or is it  
</I>&gt;&gt;<i> possible to just have ';' in java file and compile it successfully?
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> typeDeclaration
</I>&gt;&gt;<i>     :   classOrInterfaceDeclaration
</I>&gt;&gt;<i>     |   ';'
</I>&gt;&gt;<i>     ;
</I>&gt;&gt;<i> Regards,
</I>&gt;&gt;<i> Diane.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &gt; To: <A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">antlr-interest at antlr.org</A>
</I>&gt;&gt;<i> &gt; From: <A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">parrt at cs.usfca.edu</A>
</I>&gt;&gt;<i> &gt; Date: Wed, 19 Mar 2008 18:24:45 -0600
</I>&gt;&gt;<i> &gt; Subject: [antlr-interest] Java 1.5 grammar updated
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; Hi, thanks to John Ridgway, we have a major set of fixes to Java.g
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; <A HREF="http://www.antlr.org/grammar/1152141644268/Java.g">http://www.antlr.org/grammar/1152141644268/Java.g</A>
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; Parses JDK 1.5 source he says.
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; Terence
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Get fish-slapping on Messenger Play now!
</I>&gt;&gt;<i> -- 
</I>&gt;&gt;<i> This message was scanned by ESVA and is believed to be clean.
</I>&gt;&gt;<i> Click here to report this message as spam.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> A prize an hour, 24 hours a day. Try Big Snap now!
</I>&gt;&gt;<i> -- 
</I>&gt;&gt;<i> This message was scanned by ESVA and is believed to be clean.
</I>&gt;&gt;<i> Click here to report this message as spam.
</I>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://www.antlr.org/pipermail/antlr-interest/attachments/20080408/69c04be2/attachment.html">http://www.antlr.org/pipermail/antlr-interest/attachments/20080408/69c04be2/attachment.html</A> 
</PRE>









<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="027690.html">[antlr-interest] Java 1.5 grammar updated
</A></li>
	<LI>Next message: <A HREF="027695.html">[antlr-interest] Java 1.5 grammar updated
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27692">[ date ]</a>
              <a href="thread.html#27692">[ thread ]</a>
              <a href="subject.html#27692">[ subject ]</a>
              <a href="author.html#27692">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.antlr.org/mailman/listinfo/antlr-interest">More information about the antlr-interest
mailing list</a><br>
</body></html>
