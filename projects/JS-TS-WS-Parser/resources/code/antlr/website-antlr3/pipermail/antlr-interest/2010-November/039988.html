<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [antlr-interest] Tutorial... actual use? &amp; BSD question
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20Tutorial...%20actual%20use%3F%20%26%20BSD%20question&In-Reply-To=%3C4CD83DC6.4060005%40bahj.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="039987.html">
   <LINK REL="Next"  HREF="039980.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[antlr-interest] Tutorial... actual use? &amp; BSD question</H1>
    <B>Zachary Palmer</B> 
    <A HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20Tutorial...%20actual%20use%3F%20%26%20BSD%20question&In-Reply-To=%3C4CD83DC6.4060005%40bahj.com%3E"
       TITLE="[antlr-interest] Tutorial... actual use? &amp; BSD question">zep_antlr at bahj.com
       </A><BR>
    <I>Mon Nov  8 10:13:26 PST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="039987.html">[antlr-interest] Tutorial... actual use? &amp; BSD question
</A></li>
        <LI>Next message: <A HREF="039980.html">[antlr-interest] antlr works import path: undefined import
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#39988">[ date ]</a>
              <a href="thread.html#39988">[ thread ]</a>
              <a href="subject.html#39988">[ subject ]</a>
              <a href="author.html#39988">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Tenaja,

The option of which you are thinking is &quot;target&quot;, not &quot;output&quot;.  The 
target option specifies the language for which you would like the parser 
to be generated; the output option specifies the type of information 
produced by a call to one of the functions in the generated code.

I am not familiar with any five minute intro that would give you the 
information you want other than the ANTLR book I mentioned in the 
previous e-mail.  The following might help, but please bear in mind that 
this is all off of the top of my head.  :)

So consider the grammar

     grammar Simple;
     options { target=Java; }
     program: decl*;
     decl: IDENTIFIER '{' statement* '}';
     statement: '+' | '-';
     IDENTIFIER: ('a'..'z')*;
     WS: ('\n' | '\r' | '\t' | ' ')* { skip(); } ;

This grammar would recognize any of the following code:

     foo { + - - + }
     bar { - + }

     stuff { + + + }

but it wouldn't produce any output; that is, the SimpleParser.program() 
method has a void return.  If you want output, you have to specify it in 
the grammar.  Consider the following rewrite:

     grammar Simple;
     options { target=Java; output=AST; }
     tokens { PROG; DECL; }
     program: decl* -&gt; ^(PROG decl*);
     decl: IDENTIFIER '{' statement* '}' -&gt; ^(DECL statement*);
     statement: '+' | '-';
     IDENTIFIER: ('a'..'z')*;
     WS: ('\n' | '\r' | '\t' | ' ')* { skip(); } ;

Now, the SimpleParser.program() method will have a return value of a 
type generated by ANTLR.  That type will have a public member named 
&quot;tree&quot;.  By default, tree has type Object but actually contains a 
CommonTree; that CommonTree is a homogenously-typed AST which contains 
the parse of the input.  There are also instructions on the ANTLR site 
for causing the grammar to produce heterogeneously-typed ASTs.

In the project on which I am working, we have to create nodes through a 
factory.  As a result, we went with an alternative approach: manually 
controlling the output of the grammar rules.  Our rules look something 
like this:

     fieldDeclaration returns [FieldDeclarationNode ret]
         :
             fieldModifiers
             type
             variableDeclarators
             ';'
             {
                 $ret = factory.makeFieldDeclarationNode(
                         $fieldModifiers.ret, $type.ret, 
$variableDeclarators.ret);
             }
         ;

Does this answer your question about using the output of the ANTLR parser?

In terms of licensing, I would expect that the generated parser is not 
covered by the BSD license unless the original grammar file is covered 
by the BSD license.  I have this impression for the same reason that the 
exported PNG from a Microsoft Visio document isn't subject to any 
licensing restrictions from the Visio software itself; it's merely 
subject to restrictions which were on the original .vsd file.  But I 
could be wrong about this; you'd have to ask the more lawyer-y people on 
the list to be sure.

Cheers,

Zach
&gt;<i> Zach,
</I>&gt;<i> Thank you for responding. I think maybe my inquiry was unclear. I've read the &quot;five minute intro...&quot; and have used antlr to process several samples, producing code in Java, C, C#, etc,. (It's very simple...) Unless the output=AST is different from those output commands (output = csharp), it is probably not what I'm interested in.
</I>&gt;<i>   
</I>&gt;<i> What I'm looking for is a 5-minute tutorial on using the output; for instance, sending a file to the compiled C# output, and having that C# code process the text file and  generate a result. My end goal is a simple compiler to produce some Intermediate Representation (Three-Address, or PCode, etc).
</I>&gt;<i>   
</I>&gt;<i> ...
</I>&gt;<i> On another topic, regarding the BSD license, since this is the first time I've worked with o/s code generation tools.
</I>&gt;<i> .....The non-C output does not include a copy of it.
</I>&gt;<i> .....The C output includes the BSD notice at the top.
</I>&gt;<i> So, does that mean that I'm free to compile and distribute binary forms of Java&amp;  C# output code without the license, but not C? Does that mean the only requirements for distributing the C in binary form are to put it in an About box, or something equivelant? Why would the C output require it, but not the other languages? I may eventually turn this into a commercial product so I'd like to know how much disclosure is required.
</I>&gt;<i>   
</I>&gt;<i> Thanks!!!
</I>&gt;<i>
</I>&gt;<i> --- On Sun, 11/7/10, Zachary Palmer&lt;<A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">zep_antlr at bahj.com</A>&gt;  wrote:
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> From: Zachary Palmer&lt;<A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">zep_antlr at bahj.com</A>&gt;
</I>&gt;<i> Subject: Re: [antlr-interest] Tutorial... actuala use?
</I>&gt;<i> To: <A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">antlr-interest at antlr.org</A>
</I>&gt;<i> Date: Sunday, November 7, 2010, 5:16 PM
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Tenaja,
</I>&gt;<i>
</I>&gt;<i> By default, the generated ANTLR grammar is just a recognizer: it will
</I>&gt;<i> throw an exception in the presence of a string not in the grammar and it
</I>&gt;<i> will terminate normally in the presence of a string in the grammar.  To
</I>&gt;<i> get more output from ANTLR (such as an AST), you probably want to set
</I>&gt;<i> &quot;output=...&quot; in the options section of your grammar.  For an informal
</I>&gt;<i> discussion of &quot;output=AST&quot;, try
</I>&gt;<i> <A HREF="http://www.antlr.org/wiki/display/ANTLR3/Tree+construction">http://www.antlr.org/wiki/display/ANTLR3/Tree+construction</A> .  For more
</I>&gt;<i> detailed information, there is a relatively inexpensive book (&quot;The
</I>&gt;<i> Definitive ANTLR Reference&quot;) that you can buy in electronic form.
</I>&gt;<i>
</I>&gt;<i> For more examples, you might try taking a glance at some of the grammars
</I>&gt;<i> on the ANTLR site (<A HREF="http://www.antlr.org/grammar/list">http://www.antlr.org/grammar/list</A>).  There's also a
</I>&gt;<i> somewhat non-standard approach that I've been forced to use (due to some
</I>&gt;<i> strange constraints in my project) which is illustrated by the ANTLR
</I>&gt;<i> grammar used in a branch of the OpenJDK project in which each rule
</I>&gt;<i> explicitly returns the values that it needs (which are then set by
</I>&gt;<i> grammar actions).
</I>&gt;<i>
</I>&gt;<i> Cheers,
</I>&gt;<i>
</I>&gt;<i> Zach
</I>&gt;<i>    
</I>&gt;&gt;<i> I'm familiar with bnf (etc) files, and have written a simple r/d compiler myself. I'm looking at antlr for expanding, and for maintenance reason. As such, I'd like to put together one of my simple bnf languages and view the output. I've seen a few antlr tutorials, but haven't found one that really describes the compiled code output (not the antlr output, but what a compiled exe or java file output produces).
</I>&gt;&gt;<i>     
</I>&gt;&gt;<i> So... can someone point me to a tutorial that shows what to do AFTER you compile the anltr-generated file?
</I>&gt;&gt;<i>     
</I>&gt;&gt;<i> Thanks!
</I>&gt;&gt;<i> Tenaja
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> List: <A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">http://www.antlr.org/mailman/listinfo/antlr-interest</A>
</I>&gt;&gt;<i> Unsubscribe: <A HREF="http://www.antlr.org/mailman/options/antlr-interest/your-email-address">http://www.antlr.org/mailman/options/antlr-interest/your-email-address</A>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>      
</I>&gt;<i>
</I>&gt;<i> List: <A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">http://www.antlr.org/mailman/listinfo/antlr-interest</A>
</I>&gt;<i> Unsubscribe: <A HREF="http://www.antlr.org/mailman/options/antlr-interest/your-email-address">http://www.antlr.org/mailman/options/antlr-interest/your-email-address</A>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> List: <A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">http://www.antlr.org/mailman/listinfo/antlr-interest</A>
</I>&gt;<i> Unsubscribe: <A HREF="http://www.antlr.org/mailman/options/antlr-interest/your-email-address">http://www.antlr.org/mailman/options/antlr-interest/your-email-address</A>
</I>&gt;<i>
</I>&gt;<i>    
</I>
</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="039987.html">[antlr-interest] Tutorial... actual use? &amp; BSD question
</A></li>
	<LI>Next message: <A HREF="039980.html">[antlr-interest] antlr works import path: undefined import
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#39988">[ date ]</a>
              <a href="thread.html#39988">[ thread ]</a>
              <a href="subject.html#39988">[ subject ]</a>
              <a href="author.html#39988">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.antlr.org/mailman/listinfo/antlr-interest">More information about the antlr-interest
mailing list</a><br>
</body></html>
