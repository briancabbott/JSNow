From wjmoore at gmail.com  Wed Dec  1 01:58:14 2010
From: wjmoore at gmail.com (Wesley Moore)
Date: Wed, 1 Dec 2010 20:58:14 +1100
Subject: [antlr-interest] Objective-C codegen Broken in 3.3
Message-ID: <AANLkTi=VoFTHUBLX2MfrmpmXZQdFv6XgKDYwrV7p-QRY@mail.gmail.com>

Hi,
I'm eager to try out the great work that Alan has done on the Objective-C
runtime however it appears that this change mentioned in the change log
didn't make it to the ObjC.stg file:

 lexerStringRef was missing elementIndex attribute. i='import' didn't
> work in lexer. Altered all target stg files. Set in codegen.g


https://github.com/antlr/antlr/blob/master/tool/src/main/resources/org/antlr/codegen/templates/ObjC/ObjC.stg#L1234

I tried to make the necessary fix myself but after getting ANTLR and ANTLR
works to finally build I got NullPointerExceptions (shown below) so I
thought I should hand over to the experts.

Regards,
Wes

java.lang.NullPointerException
at org.antlr.works.ate.ATEGutter.<init>(ATEGutter.java:89)
 at org.antlr.works.ate.ATEPanel.createTextPane(ATEPanel.java:480)
at org.antlr.works.ate.ATEPanel.<init>(ATEPanel.java:101)
 at org.antlr.works.ate.ATEPanel.<init>(ATEPanel.java:94)
at
org.antlr.works.components.GrammarWindow.createTextEditor(GrammarWindow.java:268)
 at org.antlr.works.components.GrammarWindow.<init>(GrammarWindow.java:175)
at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
 at
sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
at
sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
 at java.lang.reflect.Constructor.newInstance(Constructor.java:513)
at java.lang.Class.newInstance0(Class.java:355)
 at java.lang.Class.newInstance(Class.java:308)
at
org.antlr.xjlib.appkit.document.XJDocumentFactory.createDocument(XJDocumentFactory.java:72)
 at
org.antlr.xjlib.appkit.app.XJApplication.newDocument(XJApplication.java:395)
at
org.antlr.xjlib.appkit.app.XJApplication.openDocument(XJApplication.java:466)
 at
org.antlr.xjlib.appkit.app.XJApplication.openLastUsedDocument(XJApplication.java:513)
at org.antlr.works.IDE.appDidLaunch(IDE.java:146)
 at org.antlr.xjlib.appkit.app.XJApplication$1.run(XJApplication.java:168)
at java.awt.event.InvocationEvent.dispatch(InvocationEvent.java:209)
 at java.awt.EventQueue.dispatchEvent(EventQueue.java:633)
at
java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:296)
 at
java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:211)
at
java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:201)
 at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:196)
at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:188)
 at java.awt.EventDispatchThread.run(EventDispatchThread.java:122)

From JALuber at gmx.de  Wed Dec  1 02:35:03 2010
From: JALuber at gmx.de (Johannes Luber)
Date: Wed, 01 Dec 2010 11:35:03 +0100
Subject: [antlr-interest] ANTLR v3.3 released!
In-Reply-To: <931DCC17C6D7A849AEE684BF5B13E199020DD397@BLPOSTIN.reale.net>
References: <369975EB-2AF8-46A1-B0EC-753C9FDEA6CF@cs.usfca.edu>
	<931DCC17C6D7A849AEE684BF5B13E199020DD397@BLPOSTIN.reale.net>
Message-ID: <20101201103503.83690@gmx.net>

> Will be ANTLR 3.3 Runtime for C# ??
> 
> thanks

Regarding the CSharp2 target: I have updated it for ANTLR 3.3, but there is some bug (or more) which prevents that the actual execution of grammars works, unlike the CSharp3 target (if you can switch to .NET 3.5, I'd do it). Still working on hunting it down. Hopefully I manage this before the next minor release. Furthermore, I did remove support for CSharp already. If you have to use .NET 1.1, you are out of luck.

The reason for the current state is that I couldn't do much development the last months because my computers disagreed somehow with the provided build scripts. In the time left, I couldn't do the complete testing of the CSharp2 target, which uncovered some difference between CSharp2 and CSharp3. As most of the code is taken from CSharp3 (to increase API and runtime behavior compliance) there can't be that much left, where problems lurk. Nonetheless it will take time to look through this.

Johannes
> 
> -----Mensaje original-----
> De: antlr-interest-bounces at antlr.org
> [mailto:antlr-interest-bounces at antlr.org] En nombre de Terence Parr
> Enviado el: martes, 30 de noviembre de 2010 4:19
> Para: ANTLR Interest
> CC: ANTLR-dev Dev
> Asunto: [antlr-interest] ANTLR v3.3 released!
> 
> ANTLR 3.3 is out! Get it here:
> 
> http://antlr.org/download.html
> 
> Has new Objective-C and Ruby targets.  See
> 
> http://www.antlr.org/wiki/display/ANTLR3/ANTLR+3.3+Release+Notes
> 
> I hope to get ANTLRWorks out tomorrow.  That will be 1.4.1 with ANTLR
> v3.3.
> 
> Ter
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address

-- 
Neu: GMX De-Mail - Einfach wie E-Mail, sicher wie ein Brief!  
Jetzt De-Mail-Adresse reservieren: http://portal.gmx.net/de/go/demail

From mdonini at gpi.it  Wed Dec  1 04:49:59 2010
From: mdonini at gpi.it (Massimiliano Donini)
Date: Wed, 01 Dec 2010 13:49:59 +0100
Subject: [antlr-interest] AntlrWorks Debugging problems
In-Reply-To: <20101130175911.B1F9BC87@mailweb.gpi.it>
References: <20101130134404.D0965C88@mailweb.gpi.it>
	<20101130175911.B1F9BC87@mailweb.gpi.it>
Message-ID: <20101201125311.1C45DBBD@mailweb.gpi.it>

Hi, i found that when i debug with AntrlWorks and select a file for 
input instead of insert directly text, if the file not exists, 
AntlrWorks show debugger timeout message.
Maybe a bug?
Greetings Max

Massimiliano Donini ha scritto:
>   Solved doing Nothing :D
> Thanks anyway
>
> Il 30/11/2010 14:40, Massimiliano Donini ha scritto:
>   
>> Hi, I'm not able to debug a grammar copmposed by a lexer and a parser.
>> I try to remote debug with VS2008 in the same way i do for a composite
>> grammar but i got a IOException and in AntrlWorks i got every time
>> Timeout message.
>> I don't have running process on AntrlWorks debug port.
>> What i was missing??
>> attached there is my grammar file, try to debug with any Sql condition.**
>>
>> Regards Max
>>
>>
>>
>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>>     
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>
>   


From jschrod at acm.org  Wed Dec  1 05:15:59 2010
From: jschrod at acm.org (Joachim Schrod)
Date: Wed, 01 Dec 2010 14:15:59 +0100
Subject: [antlr-interest] Identifiers with Spaces
In-Reply-To: <1291070003.2263.48.camel@mackie>
References: <1290810716.2012.10.camel@mackie>	<5F4A4FF5-EE03-48CD-8262-A481FD8FA681@los-alamos.net>
	<1291070003.2263.48.camel@mackie>
Message-ID: <id5hqf$qn2$1@dough.gmane.org>

Michael Bosch wrote:
> 
> I played around with it some more and noticed that my lexer rules
> are actually just regular expressions.

Have you thought about using a different lexer, like jflex, that
uses regexps and can backtrack, with an ANTLR parser?

	Joachim

-- 
=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-
Joachim Schrod				Email: jschrod at acm.org
Roedermark, Germany


From vester at jaist.ac.jp  Wed Dec  1 05:16:16 2010
From: vester at jaist.ac.jp (Rene Vestergaard)
Date: Wed, 01 Dec 2010 22:16:16 +0900
Subject: [antlr-interest] ANTLR v3.3 infinite loop
Message-ID: <4CF64AA0.2040803@jaist.ac.jp>

Fellow ANTLRs,

My biggest .g file (~850 lines) appears to send 3.3 into an infinite 
loop (>10mins) that keeps allocating heap space (>3GBs).

On 3.2, the same task takes a few seconds and around 100MB.

Any advice on how to pinpoint the problem?

Cheers,
Rene

From philippe.coujoulou at airbus.com  Wed Dec  1 05:18:00 2010
From: philippe.coujoulou at airbus.com (COUJOULOU, Philippe)
Date: Wed, 1 Dec 2010 14:18:00 +0100
Subject: [antlr-interest] Antlr lexer does not try other possible matches
 when it fails to match a token
In-Reply-To: <11496_1291208470_4CF64715_11496_2_3_4C7C17D912BB3A4FB43E18339C55FF39907D0BE3CB@DE0-MAILMBX-P10.res.airbus.corp>
References: <11496_1291208470_4CF64715_11496_2_3_4C7C17D912BB3A4FB43E18339C55FF39907D0BE3CB@DE0-MAILMBX-P10.res.airbus.corp>
Message-ID: <7934_1291209502_4CF64B1E_7934_220_1_4C7C17D912BB3A4FB43E18339C55FF39907D0BE46B@DE0-MAILMBX-P10.res.airbus.corp>

Dear all,

I am trying to parse a message that contains parameters values like <PARAM_NAME> <VALUE>, for instance "STATION EST1".
Here is a very simple extract of my grammar for one of these parameters (the one given in the above example):

grammar test;

KEYWORD_STATION :       'STATION';
DIGIT    :        '0'..'9';
LETTER  :        'a'..'z' | 'A'..'Z';
SPACE   :       ' ';

stationParameter        :       KEYWORD_STATION SPACE stationName;
stationName     :       LETTER LETTER LETTER DIGIT;


The point is that when I try to parse my example message (STATION EST1), I get a MismatchTokenException at the point where the parser attempts to read the last "ST1". After some analysis, I understood that the lexer generated the following tokens: KEYWORD_STATION SPACE LETTER for the string "STATION E"  and then attempted to match the remaining "ST1" with KEYWORD_STATION but failed to complete it.

At this point, I would expect the lexer to backtrack to the beginning of 'ST1' and then match it with LETTER LETTER DIGIT, but it doesn't.

I have tried various combinations of "backtrack", "memorize" and "k" options without any success. I must have missed something. (Should it help, I use ANTLRWorks 1.4).

Please could you tell me how to proceed in order to make the lexer backtrack and try other alternatives when a keyword of my language is not exactly matched ?

Thanks in advance for your help.

Best Regards,

Philippe Coujoulou.


The information in this e-mail is confidential. The contents may not be disclosed or used by anyone other than the addressee. Access to this e-mail by anyone else is unauthorised.
If you are not the intended recipient, please notify Airbus immediately and delete this e-mail.
Airbus cannot accept any responsibility for the accuracy or completeness of this e-mail as it has been sent over public networks. If you have any concerns over the content of this message or its Accuracy or Integrity, please contact Airbus immediately.
All outgoing e-mails from Airbus are checked using regularly updated virus scanning software but you should take whatever measures you deem to be appropriate to ensure that this message and any attachments are virus free.


From jschrod at acm.org  Wed Dec  1 05:20:25 2010
From: jschrod at acm.org (Joachim Schrod)
Date: Wed, 01 Dec 2010 14:20:25 +0100
Subject: [antlr-interest] Island grammar for reading shell commands
In-Reply-To: <19701.44367.264667.738071@blake.zopyra.com>
References: <19700.26846.836510.537929@blake.zopyra.com>	<5C723D55-AC0A-48A0-ABEC-A7826F5028FC@cs.usfca.edu>	<19701.26032.665799.341444@blake.zopyra.com>	<DBF22DF0-7349-439C-939B-A0F2247AE5F0@cs.usfca.edu>	<19701.32795.390987.604758@blake.zopyra.com>	<023b01cb90e9$409557e0$c1c007a0$@temporal-wave.com>
	<19701.44367.264667.738071@blake.zopyra.com>
Message-ID: <id5i2p$3vt$1@dough.gmane.org>

Bill Lear wrote:
> On Tuesday, November 30, 2010 at 15:49:39 (-0800) Jim Idle writes:
>>REST_OF_LINE allows an empty token which will immediately match nothing and
>>continue to do so forever. You want +  not *. I think you might be doing
>>this wrong to be honest. I would probably not use ANTLR for this.
> 
> So, there is really no viable way to have Antlr read the rest of the
> line of input?

Use a different lexer that can utilize full regexps and has states.

As Jim wrote, you need to decide if the parser part is important
enough to use ANTLR. If that's the case, a different lexer will
probably help.

	Joachim

-- 
=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-
Joachim Schrod				Email: jschrod at acm.org
Roedermark, Germany


From nvlassopoulos at gmail.com  Wed Dec  1 06:09:57 2010
From: nvlassopoulos at gmail.com (Nick Vlassopoulos)
Date: Wed, 1 Dec 2010 15:09:57 +0100
Subject: [antlr-interest] Antlr lexer does not try other possible
 matches when it fails to match a token
In-Reply-To: <7934_1291209502_4CF64B1E_7934_220_1_4C7C17D912BB3A4FB43E18339C55FF39907D0BE46B@DE0-MAILMBX-P10.res.airbus.corp>
References: <11496_1291208470_4CF64715_11496_2_3_4C7C17D912BB3A4FB43E18339C55FF39907D0BE3CB@DE0-MAILMBX-P10.res.airbus.corp>
	<7934_1291209502_4CF64B1E_7934_220_1_4C7C17D912BB3A4FB43E18339C55FF39907D0BE46B@DE0-MAILMBX-P10.res.airbus.corp>
Message-ID: <AANLkTikRJQUK2bS09LYD4BNuRWvtQuAGfDh3iDbw6A5Z@mail.gmail.com>

Hello Philippe,

Although I am not an expert, I thing you should let the lexer sort out
the "3 letters 1 digit" in the station name. Alternatively, you could
probably
add the station name as an identifier and check if it is in the correct
format
after parsing it.

Without being sure if it is a good solution, the following seems to work:

Best regards,

Nikos

-------------------------
grammar Stations;

stationParameter :
KEYWORD_STATION SPACE stationName;

stationName
: STATION_NAME;

STATION_NAME
: LETTER LETTER LETTER DIGIT;

KEYWORD_STATION : 'STATION';
LETTER : 'a'..'z' | 'A'..'Z';
DIGIT : '0'..'9';
SPACE : ' ';
-------------------------


On Wed, Dec 1, 2010 at 2:18 PM, COUJOULOU, Philippe <
philippe.coujoulou at airbus.com> wrote:

> Dear all,
>
> I am trying to parse a message that contains parameters values like
> <PARAM_NAME> <VALUE>, for instance "STATION EST1".
> Here is a very simple extract of my grammar for one of these parameters
> (the one given in the above example):
>
> grammar test;
>
> KEYWORD_STATION :       'STATION';
> DIGIT    :        '0'..'9';
> LETTER  :        'a'..'z' | 'A'..'Z';
> SPACE   :       ' ';
>
> stationParameter        :       KEYWORD_STATION SPACE stationName;
> stationName     :       LETTER LETTER LETTER DIGIT;
>
>
> The point is that when I try to parse my example message (STATION EST1), I
> get a MismatchTokenException at the point where the parser attempts to read
> the last "ST1". After some analysis, I understood that the lexer generated
> the following tokens: KEYWORD_STATION SPACE LETTER for the string "STATION
> E"  and then attempted to match the remaining "ST1" with KEYWORD_STATION but
> failed to complete it.
>
> At this point, I would expect the lexer to backtrack to the beginning of
> 'ST1' and then match it with LETTER LETTER DIGIT, but it doesn't.
>
> I have tried various combinations of "backtrack", "memorize" and "k"
> options without any success. I must have missed something. (Should it help,
> I use ANTLRWorks 1.4).
>
> Please could you tell me how to proceed in order to make the lexer
> backtrack and try other alternatives when a keyword of my language is not
> exactly matched ?
>
> Thanks in advance for your help.
>
> Best Regards,
>
> Philippe Coujoulou.
>
>
> The information in this e-mail is confidential. The contents may not be
> disclosed or used by anyone other than the addressee. Access to this e-mail
> by anyone else is unauthorised.
> If you are not the intended recipient, please notify Airbus immediately and
> delete this e-mail.
> Airbus cannot accept any responsibility for the accuracy or completeness of
> this e-mail as it has been sent over public networks. If you have any
> concerns over the content of this message or its Accuracy or Integrity,
> please contact Airbus immediately.
> All outgoing e-mails from Airbus are checked using regularly updated virus
> scanning software but you should take whatever measures you deem to be
> appropriate to ensure that this message and any attachments are virus free.
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>

From philippe.coujoulou at airbus.com  Wed Dec  1 07:03:31 2010
From: philippe.coujoulou at airbus.com (COUJOULOU, Philippe)
Date: Wed, 1 Dec 2010 16:03:31 +0100
Subject: [antlr-interest] Antlr lexer does not try other possible
 matches when it fails to match a token
In-Reply-To: <7240_1291212601_4CF65738_7240_3_13_AANLkTikRJQUK2bS09LYD4BNuRWvtQuAGfDh3iDbw6A5Z@mail.gmail.com>
References: <11496_1291208470_4CF64715_11496_2_3_4C7C17D912BB3A4FB43E18339C55FF39907D0BE3CB@DE0-MAILMBX-P10.res.airbus.corp>
	<7934_1291209502_4CF64B1E_7934_220_1_4C7C17D912BB3A4FB43E18339C55FF39907D0BE46B@DE0-MAILMBX-P10.res.airbus.corp>
	<7240_1291212601_4CF65738_7240_3_13_AANLkTikRJQUK2bS09LYD4BNuRWvtQuAGfDh3iDbw6A5Z@mail.gmail.com>
Message-ID: <7462_1291215816_4CF663C7_7462_61_1_4C7C17D912BB3A4FB43E18339C55FF39907D12612E@DE0-MAILMBX-P10.res.airbus.corp>


Thanks for your quick response Nick.

You are right, it works with the example but I am afraid this is not feasible with my complete grammar.

 If I do that for all my possible parameter values (the format depends on the preceding parameter name), I would have a lot of lexer rules to sort out and that would for sure be conflicting:

STATION_NAME           :           LETTER LETTER LETTER DIGIT;
ADDRESS                    :           (LETTER|DIGIT) (LETTER|DIGIT) (LETTER|DIGIT) (LETTER|DIGIT) (LETTER|DIGIT) (LETTER|DIGIT) (LETTER|DIGIT);
LOCATION                    :           LETTER LETTER LETTER LETTER;
SESSION                      :           LETTER LETTER DIGIT DIGIT DIGIT DIGIT;
PROVIDER                   :           LETTER LETTER LETTER;
CODE                           :           LETTER (LETTER|DIGIT) (LETTER|DIGIT);
DATE                           :           DIGIT DIGIT DIGIT DIGIT DIGIT DIGIT;
TIME                             :           (DIGIT DIGIT DIGIT DIGIT) | (DASH DASH DASH DASH) | (SPACE SPACE SPACE SPACE);
...


I think it is much preferable to have the lexer returning a sequence of DIGIT and LETTERS (except for param names), and to specify what is the expected sequence for a given parameter at parsing level. Something like that (but again this is an extract):

grammar test;

listOfParameters           :           parameterDef (CRLF parameterDef)* EOF;

parameterDef                : stationParameter|addressParameter|locationParameter|sessionParameter|providerParameter|codeParameter|dateParameter|timeParameter;

stationParameter           :           STATION SPACE stationName;
stationName                  :           LETTER LETTER LETTER DIGIT;

addressParameter         :           ADDRESS SPACE stationName;
adress                          :           (LETTER|DIGIT) (LETTER|DIGIT) (LETTER|DIGIT) (LETTER|DIGIT) (LETTER|DIGIT) (LETTER|DIGIT) (LETTER|DIGIT);

locationParameter         :           LOCATION SPACE stationName;
location                        :           LETTER LETTER LETTER LETTER;

sessionParameter          :           SESSION SPACE stationName;
session                         :           LETTER LETTER DIGIT DIGIT DIGIT DIGIT;

providerParameter         :           PROVIDER SPACE stationName;
provider                        :           LETTER LETTER LETTER;

codeParameter              :           CODE SPACE stationName;
code                             :           LETTER (LETTER|DIGIT) (LETTER|DIGIT);

dateParameter               :           DATE SPACE stationName;
date                              :           DIGIT DIGIT DIGIT DIGIT DIGIT DIGIT;

timeParameter               :           TIME SPACE stationName;
time                              :           (DIGIT DIGIT DIGIT DIGIT) | (DASH DASH DASH DASH) | (SPACE SPACE SPACE SPACE);


STATION           :           'STATION';
ADDRESS        :           'ADDRESS';
LOCATION:       'LOCATION';
SESSION          :           'SESSION';
PROVIDER:      'PROVIDER';
CODE   :           'CODE';
DATE   :           'DATE';
TIME     :           'TIME';
LETTER            :           'a'..'z' | 'A'..'Z';
DIGIT    :           '0'..'9';
DASH   :           '-';
SPACE :           ' ';
CRLF : '\r'? '\n';






From: Nick Vlassopoulos [mailto:nvlassopoulos at gmail.com]
Sent: 01 December 2010 15:10
To: COUJOULOU, Philippe
Cc: antlr-interest at antlr.org
Subject: Re: [antlr-interest] Antlr lexer does not try other possible matches when it fails to match a token

Hello Philippe,

Although I am not an expert, I thing you should let the lexer sort out
the "3 letters 1 digit" in the station name. Alternatively, you could probably
add the station name as an identifier and check if it is in the correct format
after parsing it.

Without being sure if it is a good solution, the following seems to work:

Best regards,

Nikos

-------------------------
grammar Stations;

stationParameter         :
            KEYWORD_STATION SPACE stationName;

stationName
            :           STATION_NAME;

STATION_NAME
            :           LETTER LETTER LETTER DIGIT;

KEYWORD_STATION        :           'STATION';
LETTER                     :           'a'..'z' | 'A'..'Z';
DIGIT             :           '0'..'9';
SPACE                       :           ' ';
-------------------------


On Wed, Dec 1, 2010 at 2:18 PM, COUJOULOU, Philippe <philippe.coujoulou at airbus.com<mailto:philippe.coujoulou at airbus.com>> wrote:
Dear all,

I am trying to parse a message that contains parameters values like <PARAM_NAME> <VALUE>, for instance "STATION EST1".
Here is a very simple extract of my grammar for one of these parameters (the one given in the above example):

grammar test;

KEYWORD_STATION :       'STATION';
DIGIT    :        '0'..'9';
LETTER  :        'a'..'z' | 'A'..'Z';
SPACE   :       ' ';

stationParameter        :       KEYWORD_STATION SPACE stationName;
stationName     :       LETTER LETTER LETTER DIGIT;


The point is that when I try to parse my example message (STATION EST1), I get a MismatchTokenException at the point where the parser attempts to read the last "ST1". After some analysis, I understood that the lexer generated the following tokens: KEYWORD_STATION SPACE LETTER for the string "STATION E"  and then attempted to match the remaining "ST1" with KEYWORD_STATION but failed to complete it.

At this point, I would expect the lexer to backtrack to the beginning of 'ST1' and then match it with LETTER LETTER DIGIT, but it doesn't.

I have tried various combinations of "backtrack", "memorize" and "k" options without any success. I must have missed something. (Should it help, I use ANTLRWorks 1.4).

Please could you tell me how to proceed in order to make the lexer backtrack and try other alternatives when a keyword of my language is not exactly matched ?

Thanks in advance for your help.

Best Regards,

Philippe Coujoulou.


The information in this e-mail is confidential. The contents may not be disclosed or used by anyone other than the addressee. Access to this e-mail by anyone else is unauthorised.
If you are not the intended recipient, please notify Airbus immediately and delete this e-mail.
Airbus cannot accept any responsibility for the accuracy or completeness of this e-mail as it has been sent over public networks. If you have any concerns over the content of this message or its Accuracy or Integrity, please contact Airbus immediately.
All outgoing e-mails from Airbus are checked using regularly updated virus scanning software but you should take whatever measures you deem to be appropriate to ensure that this message and any attachments are virus free.


List: http://www.antlr.org/mailman/listinfo/antlr-interest
Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address


This mail has originated outside your organization, either from an external partner or the Global Internet.

Keep this in mind if you answer this message.



The information in this e-mail is confidential. The contents may not be disclosed or used by anyone other than the addressee. Access to this e-mail by anyone else is unauthorised.
If you are not the intended recipient, please notify Airbus immediately and delete this e-mail.
Airbus cannot accept any responsibility for the accuracy or completeness of this e-mail as it has been sent over public networks. If you have any concerns over the content of this message or its Accuracy or Integrity, please contact Airbus immediately.
All outgoing e-mails from Airbus are checked using regularly updated virus scanning software but you should take whatever measures you deem to be appropriate to ensure that this message and any attachments are virus free.


From philippe.coujoulou at airbus.com  Wed Dec  1 07:09:05 2010
From: philippe.coujoulou at airbus.com (COUJOULOU, Philippe)
Date: Wed, 1 Dec 2010 16:09:05 +0100
Subject: [antlr-interest] Antlr lexer does not try other possible
 matches when it fails to match a token
References: <11496_1291208470_4CF64715_11496_2_3_4C7C17D912BB3A4FB43E18339C55FF39907D0BE3CB@DE0-MAILMBX-P10.res.airbus.corp>
	<7934_1291209502_4CF64B1E_7934_220_1_4C7C17D912BB3A4FB43E18339C55FF39907D0BE46B@DE0-MAILMBX-P10.res.airbus.corp>
	<7240_1291212601_4CF65738_7240_3_13_AANLkTikRJQUK2bS09LYD4BNuRWvtQuAGfDh3iDbw6A5Z@mail.gmail.com>
Message-ID: <28437_1291216163_4CF66522_28437_2_1_4C7C17D912BB3A4FB43E18339C55FF39907D126159@DE0-MAILMBX-P10.res.airbus.corp>

Sorry, the code I posted was not correct. Here is the correct code I wanted to copy in my previous message (with xxxParameter parser rules referring to correct parameter value rule):

grammar test;

listOfParameters           :           parameterDef (CRLF parameterDef)* EOF;

parameterDef    : stationParameter|addressParameter|locationParameter|sessionParameter|providerParameter|codeParameter|dateParameter|timeParameter;

stationParameter           :           STATION SPACE stationName;
stationName                  :           LETTER LETTER LETTER DIGIT;

addressParameter         :           ADDRESS SPACE address;
address                                    :           (LETTER|DIGIT) (LETTER|DIGIT) (LETTER|DIGIT) (LETTER|DIGIT) (LETTER|DIGIT) (LETTER|DIGIT) (LETTER|DIGIT);

locationParameter         :           LOCATION SPACE location;
location                        :           LETTER LETTER LETTER LETTER;

sessionParameter          :           SESSION SPACE session;
session                         :           LETTER LETTER DIGIT DIGIT DIGIT DIGIT;

providerParameter         :           PROVIDER SPACE provider;
provider                        :           LETTER LETTER LETTER;

codeParameter              :           CODE SPACE code;
code                             :           LETTER (LETTER|DIGIT) (LETTER|DIGIT);

dateParameter               :           DATE SPACE stationName;
date                              :           DIGIT DIGIT DIGIT DIGIT DIGIT DIGIT;

timeParameter               :           TIME SPACE time;
time                              :           (DIGIT DIGIT DIGIT DIGIT) | (DASH DASH DASH DASH) | (SPACE SPACE SPACE SPACE);


STATION           :           'STATION';
ADDRESS        :           'ADDRESS';
LOCATION:       'LOCATION';
SESSION          :           'SESSION';
PROVIDER:      'PROVIDER';
CODE   :           'CODE';
DATE   :           'DATE';
TIME     :           'TIME';
LETTER            :           'a'..'z' | 'A'..'Z';
DIGIT    :           '0'..'9';
DASH   :           '-';
SPACE :           ' ';
CRLF : '\r'? '\n';



From: COUJOULOU, Philippe
Sent: 01 December 2010 16:04
To: 'Nick Vlassopoulos'
Cc: antlr-interest at antlr.org
Subject: RE: [antlr-interest] Antlr lexer does not try other possible matches when it fails to match a token


Thanks for your quick response Nick.

You are right, it works with the example but I am afraid this is not feasible with my complete grammar.

 If I do that for all my possible parameter values (the format depends on the preceding parameter name), I would have a lot of lexer rules to sort out and that would for sure be conflicting:

STATION_NAME           :           LETTER LETTER LETTER DIGIT;
ADDRESS                    :           (LETTER|DIGIT) (LETTER|DIGIT) (LETTER|DIGIT) (LETTER|DIGIT) (LETTER|DIGIT) (LETTER|DIGIT) (LETTER|DIGIT);
LOCATION                    :           LETTER LETTER LETTER LETTER;
SESSION                      :           LETTER LETTER DIGIT DIGIT DIGIT DIGIT;
PROVIDER                   :           LETTER LETTER LETTER;
CODE                           :           LETTER (LETTER|DIGIT) (LETTER|DIGIT);
DATE                           :           DIGIT DIGIT DIGIT DIGIT DIGIT DIGIT;
TIME                             :           (DIGIT DIGIT DIGIT DIGIT) | (DASH DASH DASH DASH) | (SPACE SPACE SPACE SPACE);
...


I think it is much preferable to have the lexer returning a sequence of DIGIT and LETTERS (except for param names), and to specify what is the expected sequence for a given parameter at parsing level. Something like that (but again this is an extract):

grammar test;

listOfParameters           :           parameterDef (CRLF parameterDef)* EOF;

parameterDef                : stationParameter|addressParameter|locationParameter|sessionParameter|providerParameter|codeParameter|dateParameter|timeParameter;

stationParameter           :           STATION SPACE stationName;
stationName                  :           LETTER LETTER LETTER DIGIT;

addressParameter         :           ADDRESS SPACE stationName;
adress                          :           (LETTER|DIGIT) (LETTER|DIGIT) (LETTER|DIGIT) (LETTER|DIGIT) (LETTER|DIGIT) (LETTER|DIGIT) (LETTER|DIGIT);

locationParameter         :           LOCATION SPACE stationName;
location                        :           LETTER LETTER LETTER LETTER;

sessionParameter          :           SESSION SPACE stationName;
session                         :           LETTER LETTER DIGIT DIGIT DIGIT DIGIT;

providerParameter         :           PROVIDER SPACE stationName;
provider                        :           LETTER LETTER LETTER;

codeParameter              :           CODE SPACE stationName;
code                             :           LETTER (LETTER|DIGIT) (LETTER|DIGIT);

dateParameter               :           DATE SPACE stationName;
date                              :           DIGIT DIGIT DIGIT DIGIT DIGIT DIGIT;

timeParameter               :           TIME SPACE stationName;
time                              :           (DIGIT DIGIT DIGIT DIGIT) | (DASH DASH DASH DASH) | (SPACE SPACE SPACE SPACE);


STATION           :           'STATION';
ADDRESS        :           'ADDRESS';
LOCATION:       'LOCATION';
SESSION          :           'SESSION';
PROVIDER:      'PROVIDER';
CODE   :           'CODE';
DATE   :           'DATE';
TIME     :           'TIME';
LETTER            :           'a'..'z' | 'A'..'Z';
DIGIT    :           '0'..'9';
DASH   :           '-';
SPACE :           ' ';
CRLF : '\r'? '\n';






From: Nick Vlassopoulos [mailto:nvlassopoulos at gmail.com]
Sent: 01 December 2010 15:10
To: COUJOULOU, Philippe
Cc: antlr-interest at antlr.org
Subject: Re: [antlr-interest] Antlr lexer does not try other possible matches when it fails to match a token

Hello Philippe,

Although I am not an expert, I thing you should let the lexer sort out
the "3 letters 1 digit" in the station name. Alternatively, you could probably
add the station name as an identifier and check if it is in the correct format
after parsing it.

Without being sure if it is a good solution, the following seems to work:

Best regards,

Nikos

-------------------------
grammar Stations;

stationParameter         :
            KEYWORD_STATION SPACE stationName;

stationName
            :           STATION_NAME;

STATION_NAME
            :           LETTER LETTER LETTER DIGIT;

KEYWORD_STATION        :           'STATION';
LETTER                     :           'a'..'z' | 'A'..'Z';
DIGIT             :           '0'..'9';
SPACE                       :           ' ';
-------------------------


On Wed, Dec 1, 2010 at 2:18 PM, COUJOULOU, Philippe <philippe.coujoulou at airbus.com<mailto:philippe.coujoulou at airbus.com>> wrote:
Dear all,

I am trying to parse a message that contains parameters values like <PARAM_NAME> <VALUE>, for instance "STATION EST1".
Here is a very simple extract of my grammar for one of these parameters (the one given in the above example):

grammar test;

KEYWORD_STATION :       'STATION';
DIGIT    :        '0'..'9';
LETTER  :        'a'..'z' | 'A'..'Z';
SPACE   :       ' ';

stationParameter        :       KEYWORD_STATION SPACE stationName;
stationName     :       LETTER LETTER LETTER DIGIT;


The point is that when I try to parse my example message (STATION EST1), I get a MismatchTokenException at the point where the parser attempts to read the last "ST1". After some analysis, I understood that the lexer generated the following tokens: KEYWORD_STATION SPACE LETTER for the string "STATION E"  and then attempted to match the remaining "ST1" with KEYWORD_STATION but failed to complete it.

At this point, I would expect the lexer to backtrack to the beginning of 'ST1' and then match it with LETTER LETTER DIGIT, but it doesn't.

I have tried various combinations of "backtrack", "memorize" and "k" options without any success. I must have missed something. (Should it help, I use ANTLRWorks 1.4).

Please could you tell me how to proceed in order to make the lexer backtrack and try other alternatives when a keyword of my language is not exactly matched ?

Thanks in advance for your help.

Best Regards,

Philippe Coujoulou.


The information in this e-mail is confidential. The contents may not be disclosed or used by anyone other than the addressee. Access to this e-mail by anyone else is unauthorised.
If you are not the intended recipient, please notify Airbus immediately and delete this e-mail.
Airbus cannot accept any responsibility for the accuracy or completeness of this e-mail as it has been sent over public networks. If you have any concerns over the content of this message or its Accuracy or Integrity, please contact Airbus immediately.
All outgoing e-mails from Airbus are checked using regularly updated virus scanning software but you should take whatever measures you deem to be appropriate to ensure that this message and any attachments are virus free.


List: http://www.antlr.org/mailman/listinfo/antlr-interest
Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address


This mail has originated outside your organization, either from an external partner or the Global Internet.

Keep this in mind if you answer this message.



The information in this e-mail is confidential. The contents may not be disclosed or used by anyone other than the addressee. Access to this e-mail by anyone else is unauthorised.
If you are not the intended recipient, please notify Airbus immediately and delete this e-mail.
Airbus cannot accept any responsibility for the accuracy or completeness of this e-mail as it has been sent over public networks. If you have any concerns over the content of this message or its Accuracy or Integrity, please contact Airbus immediately.
All outgoing e-mails from Airbus are checked using regularly updated virus scanning software but you should take whatever measures you deem to be appropriate to ensure that this message and any attachments are virus free.


From amr.muhammad.w at gmail.com  Wed Dec  1 07:32:51 2010
From: amr.muhammad.w at gmail.com (Amr Muhammad)
Date: Wed, 1 Dec 2010 17:32:51 +0200
Subject: [antlr-interest] [ANTLRWorks 1.4][Code Generation] [C target] Bug??
Message-ID: <AANLkTik2hKwZfo0FW72NoeyTmoHykyXi3xkUvpyi_xEe@mail.gmail.com>

Hello,

I have a rule like this:

version1 ---  rule1: (rule2 (a+ b* | b* a+) )* (rule2 a*)*

sometimes i would generate the code and in the code for the func
corresponding to rule1:
i would have a call like: cdfa9.predict(...)

then let's say i modify the rule to

version2.1 ---- rule1: (rule2 (a+ b* | b* a+) )*  *|* (rule2 a*)*
or to
version2.2 ---- rule1: ( (rule2 (a+ b* | b* a+) )*  ** (rule2 a*)*)*

then generate

then remove the change (i.e. return to rule version1 above)
then generate,

i'd would find sometimes that the call for cdfa9.predict(...) disappears.

Thank you for your time :)

Amr Muhammad
Cairo Univ. Computer Eng. Grad.
twitter:@amrmuhammad <http://twitter.com/amrmuhammad>

From parrt at cs.usfca.edu  Wed Dec  1 08:02:59 2010
From: parrt at cs.usfca.edu (Terence Parr)
Date: Wed, 1 Dec 2010 08:02:59 -0800
Subject: [antlr-interest] ANTLR v3.3 infinite loop
In-Reply-To: <4CF64AA0.2040803@jaist.ac.jp>
References: <4CF64AA0.2040803@jaist.ac.jp>
Message-ID: <E4DBD586-B756-43E2-BFE5-B3C779C33F6D@cs.usfca.edu>

hi. please turn on -Xwatchdfaconversion and see which decision kills it. this is rare but not impossible.  Then, add backtrack=true and k=1 options to that decision to resolve.  or restructure that decision.

Please report back on success.

Ter

On Dec 1, 2010, at 5:16 AM, Rene Vestergaard wrote:

> Fellow ANTLRs,
> 
> My biggest .g file (~850 lines) appears to send 3.3 into an infinite 
> loop (>10mins) that keeps allocating heap space (>3GBs).
> 
> On 3.2, the same task takes a few seconds and around 100MB.
> 
> Any advice on how to pinpoint the problem?
> 
> Cheers,
> Rene
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address


From cummings at kjchome.homeip.net  Wed Dec  1 08:21:19 2010
From: cummings at kjchome.homeip.net (Kevin J. Cummings)
Date: Wed, 01 Dec 2010 11:21:19 -0500
Subject: [antlr-interest] [ANTLRWorks 1.4][Code Generation] [C target]
 Bug??
In-Reply-To: <AANLkTik2hKwZfo0FW72NoeyTmoHykyXi3xkUvpyi_xEe@mail.gmail.com>
References: <AANLkTik2hKwZfo0FW72NoeyTmoHykyXi3xkUvpyi_xEe@mail.gmail.com>
Message-ID: <4CF675FF.5080003@kjchome.homeip.net>

On 12/01/2010 10:32 AM, Amr Muhammad wrote:
> Hello,
> 
> I have a rule like this:
> 
> version1 ---  rule1: (rule2 (a+ b* | b* a+) )* (rule2 a*)*
                       ^^^^^^^^^^^^^^^^^^^^^^^^^
Hmmm, 1 or more a followed by 0 or more b OR zero or more b followed by
1 or more a.

What happens when there are 0 b.  Your code reduces to 1 or more a OR 1
or more a.

I would re-write this as:

rule1: (rule2 ( (a+ b*) | (b+ a+)) )* (rule2 a*)*

as the case of just matching a+ is handled by the first alternative.

Now you need to handle the problem of the which rule2 case to match
given that the first one could be empty and you want to match the
second.  I think you need to disambiguate your grammar further.

-- 
Kevin J. Cummings
kjchome at rcn.com
cummings at kjchome.homeip.net
cummings at kjc386.framingham.ma.us
Registered Linux User #1232 (http://counter.li.org)

From sharwell at pixelminegames.com  Wed Dec  1 08:57:01 2010
From: sharwell at pixelminegames.com (Sam Harwell)
Date: Wed, 1 Dec 2010 10:57:01 -0600
Subject: [antlr-interest] [ANTLRWorks 1.4][Code Generation] [C target]
	Bug??
In-Reply-To: <4CF675FF.5080003@kjchome.homeip.net>
References: <AANLkTik2hKwZfo0FW72NoeyTmoHykyXi3xkUvpyi_xEe@mail.gmail.com>
	<4CF675FF.5080003@kjchome.homeip.net>
Message-ID: <03a201cb9178$c8707f70$59517e50$@pixelminegames.com>

I'd initially write it as (b* a+ b*) and handle the error of b elements
located at both locations with a user-understandable message at a later
point. My end goal would be reducing rule1 to the following as long as it
stays unambiguous.

rule1 : (rule2 (a|b)*)*

Sam

-----Original Message-----
From: antlr-interest-bounces at antlr.org
[mailto:antlr-interest-bounces at antlr.org] On Behalf Of Kevin J. Cummings
Sent: Wednesday, December 01, 2010 10:21 AM
To: antlr-interest at antlr.org
Subject: Re: [antlr-interest] [ANTLRWorks 1.4][Code Generation] [C target]
Bug??

On 12/01/2010 10:32 AM, Amr Muhammad wrote:
> Hello,
> 
> I have a rule like this:
> 
> version1 ---  rule1: (rule2 (a+ b* | b* a+) )* (rule2 a*)*
                       ^^^^^^^^^^^^^^^^^^^^^^^^^ Hmmm, 1 or more a followed
by 0 or more b OR zero or more b followed by
1 or more a.

What happens when there are 0 b.  Your code reduces to 1 or more a OR 1 or
more a.

I would re-write this as:

rule1: (rule2 ( (a+ b*) | (b+ a+)) )* (rule2 a*)*

as the case of just matching a+ is handled by the first alternative.

Now you need to handle the problem of the which rule2 case to match given
that the first one could be empty and you want to match the second.  I think
you need to disambiguate your grammar further.

--
Kevin J. Cummings
kjchome at rcn.com
cummings at kjchome.homeip.net
cummings at kjc386.framingham.ma.us
Registered Linux User #1232 (http://counter.li.org)

List: http://www.antlr.org/mailman/listinfo/antlr-interest
Unsubscribe:
http://www.antlr.org/mailman/options/antlr-interest/your-email-address


From jbb at acm.org  Wed Dec  1 09:39:56 2010
From: jbb at acm.org (John B. Brodie)
Date: Wed, 01 Dec 2010 12:39:56 -0500
Subject: [antlr-interest] Antlr lexer does not try other possible
 matches when it fails to match a token
In-Reply-To: <28437_1291216163_4CF66522_28437_2_1_4C7C17D912BB3A4FB43E18339C55FF39907D126159@DE0-MAILMBX-P10.res.airbus.corp>
References: <11496_1291208470_4CF64715_11496_2_3_4C7C17D912BB3A4FB43E18339C55FF39907D0BE3CB@DE0-MAILMBX-P10.res.airbus.corp>
	<7934_1291209502_4CF64B1E_7934_220_1_4C7C17D912BB3A4FB43E18339C55FF39907D0BE46B@DE0-MAILMBX-P10.res.airbus.corp>
	<7240_1291212601_4CF65738_7240_3_13_AANLkTikRJQUK2bS09LYD4BNuRWvtQuAGfDh3iDbw6A5Z@mail.gmail.com>
	<28437_1291216163_4CF66522_28437_2_1_4C7C17D912BB3A4FB43E18339C55FF39907D126159@DE0-MAILMBX-P10.res.airbus.corp>
Message-ID: <1291225196.12003.10.camel@gecko>

Greetings!

On Wed, 2010-12-01 at 16:09 +0100, COUJOULOU, Philippe wrote:
> Sorry, the code I posted was not correct. Here is the correct code I wanted to copy in my previous message (with xxxParameter parser rules referring to correct parameter value rule):
> 
> grammar test;
> 
> listOfParameters           :           parameterDef (CRLF parameterDef)* EOF;
> 
> parameterDef    : stationParameter|addressParameter|locationParameter|sessionParameter|providerParameter|codeParameter|dateParameter|timeParameter;
> 
> stationParameter           :           STATION SPACE stationName;
> stationName                  :           LETTER LETTER LETTER DIGIT;
> 
> addressParameter         :           ADDRESS SPACE address;
> address                                    :           (LETTER|DIGIT) (LETTER|DIGIT) (LETTER|DIGIT) (LETTER|DIGIT) (LETTER|DIGIT) (LETTER|DIGIT) (LETTER|DIGIT);
> 
> locationParameter         :           LOCATION SPACE location;
> location                        :           LETTER LETTER LETTER LETTER;
> 
> sessionParameter          :           SESSION SPACE session;
> session                         :           LETTER LETTER DIGIT DIGIT DIGIT DIGIT;
> 
> providerParameter         :           PROVIDER SPACE provider;
> provider                        :           LETTER LETTER LETTER;
> 
> codeParameter              :           CODE SPACE code;
> code                             :           LETTER (LETTER|DIGIT) (LETTER|DIGIT);
> 
> dateParameter               :           DATE SPACE stationName;

i assume that stationName here should be date

> date                              :           DIGIT DIGIT DIGIT DIGIT DIGIT DIGIT;
> 
> timeParameter               :           TIME SPACE time;
> time                              :           (DIGIT DIGIT DIGIT DIGIT) | (DASH DASH DASH DASH) | (SPACE SPACE SPACE SPACE);
> 
> 
> STATION           :           'STATION';
> ADDRESS        :           'ADDRESS';
> LOCATION:       'LOCATION';
> SESSION          :           'SESSION';
> PROVIDER:      'PROVIDER';
> CODE   :           'CODE';
> DATE   :           'DATE';
> TIME     :           'TIME';
> LETTER            :           'a'..'z' | 'A'..'Z';
> DIGIT    :           '0'..'9';
> DASH   :           '-';
> SPACE :           ' ';
> CRLF : '\r'? '\n';
> 
> 

I do not think that ANTLR v3 Lexers are able to backtrack in the fashion
you want. e.g. when seeing the ST in EST1 be able to issue two LETTER
tokens rather that insisting on finding a STATION token.

3 solutions come to mind --- but perhaps none of them will be
appropriate for you since my solutions are based soley upon the fragment
of your entire grammar that you have posted and therefore might not work
out for the whole.

1) do not use ANTLR. just divide the line at the first SPACE. lookup the
first portion in a keyword hashmap and dispatch to proper code to handle
the second portion.

2) move each parameter to the Lexer and let the Lexer work out the
STATION vs E S T 1 issues. see the attached AllLexer.g for a tested
example of what I am suggesting here.

3) move everything into the Parser, e.g. the Lexer just issues single
character tokens, and the Parser works out how to glue things together.
see the attached NoLexer.g for a tested example of what I am suggesting
here.

Hope this helps
   -jbb


> 
> From: COUJOULOU, Philippe
> Sent: 01 December 2010 16:04
> To: 'Nick Vlassopoulos'
> Cc: antlr-interest at antlr.org
> Subject: RE: [antlr-interest] Antlr lexer does not try other possible matches when it fails to match a token
> 
> 
> Thanks for your quick response Nick.
> 
> You are right, it works with the example but I am afraid this is not feasible with my complete grammar.
> 
>  If I do that for all my possible parameter values (the format depends on the preceding parameter name), I would have a lot of lexer rules to sort out and that would for sure be conflicting:
> 
> STATION_NAME           :           LETTER LETTER LETTER DIGIT;
> ADDRESS                    :           (LETTER|DIGIT) (LETTER|DIGIT) (LETTER|DIGIT) (LETTER|DIGIT) (LETTER|DIGIT) (LETTER|DIGIT) (LETTER|DIGIT);
> LOCATION                    :           LETTER LETTER LETTER LETTER;
> SESSION                      :           LETTER LETTER DIGIT DIGIT DIGIT DIGIT;
> PROVIDER                   :           LETTER LETTER LETTER;
> CODE                           :           LETTER (LETTER|DIGIT) (LETTER|DIGIT);
> DATE                           :           DIGIT DIGIT DIGIT DIGIT DIGIT DIGIT;
> TIME                             :           (DIGIT DIGIT DIGIT DIGIT) | (DASH DASH DASH DASH) | (SPACE SPACE SPACE SPACE);
> ...
> 
> 
> I think it is much preferable to have the lexer returning a sequence of DIGIT and LETTERS (except for param names), and to specify what is the expected sequence for a given parameter at parsing level. Something like that (but again this is an extract):
> 
> grammar test;
> 
> listOfParameters           :           parameterDef (CRLF parameterDef)* EOF;
> 
> parameterDef                : stationParameter|addressParameter|locationParameter|sessionParameter|providerParameter|codeParameter|dateParameter|timeParameter;
> 
> stationParameter           :           STATION SPACE stationName;
> stationName                  :           LETTER LETTER LETTER DIGIT;
> 
> addressParameter         :           ADDRESS SPACE stationName;
> adress                          :           (LETTER|DIGIT) (LETTER|DIGIT) (LETTER|DIGIT) (LETTER|DIGIT) (LETTER|DIGIT) (LETTER|DIGIT) (LETTER|DIGIT);
> 
> locationParameter         :           LOCATION SPACE stationName;
> location                        :           LETTER LETTER LETTER LETTER;
> 
> sessionParameter          :           SESSION SPACE stationName;
> session                         :           LETTER LETTER DIGIT DIGIT DIGIT DIGIT;
> 
> providerParameter         :           PROVIDER SPACE stationName;
> provider                        :           LETTER LETTER LETTER;
> 
> codeParameter              :           CODE SPACE stationName;
> code                             :           LETTER (LETTER|DIGIT) (LETTER|DIGIT);
> 
> dateParameter               :           DATE SPACE stationName;
> date                              :           DIGIT DIGIT DIGIT DIGIT DIGIT DIGIT;
> 
> timeParameter               :           TIME SPACE stationName;
> time                              :           (DIGIT DIGIT DIGIT DIGIT) | (DASH DASH DASH DASH) | (SPACE SPACE SPACE SPACE);
> 
> 
> STATION           :           'STATION';
> ADDRESS        :           'ADDRESS';
> LOCATION:       'LOCATION';
> SESSION          :           'SESSION';
> PROVIDER:      'PROVIDER';
> CODE   :           'CODE';
> DATE   :           'DATE';
> TIME     :           'TIME';
> LETTER            :           'a'..'z' | 'A'..'Z';
> DIGIT    :           '0'..'9';
> DASH   :           '-';
> SPACE :           ' ';
> CRLF : '\r'? '\n';
> 
> 
> 
> 
> 
> 
> From: Nick Vlassopoulos [mailto:nvlassopoulos at gmail.com]
> Sent: 01 December 2010 15:10
> To: COUJOULOU, Philippe
> Cc: antlr-interest at antlr.org
> Subject: Re: [antlr-interest] Antlr lexer does not try other possible matches when it fails to match a token
> 
> Hello Philippe,
> 
> Although I am not an expert, I thing you should let the lexer sort out
> the "3 letters 1 digit" in the station name. Alternatively, you could probably
> add the station name as an identifier and check if it is in the correct format
> after parsing it.
> 
> Without being sure if it is a good solution, the following seems to work:
> 
> Best regards,
> 
> Nikos
> 
> -------------------------
> grammar Stations;
> 
> stationParameter         :
>             KEYWORD_STATION SPACE stationName;
> 
> stationName
>             :           STATION_NAME;
> 
> STATION_NAME
>             :           LETTER LETTER LETTER DIGIT;
> 
> KEYWORD_STATION        :           'STATION';
> LETTER                     :           'a'..'z' | 'A'..'Z';
> DIGIT             :           '0'..'9';
> SPACE                       :           ' ';
> -------------------------
> 
> 
> On Wed, Dec 1, 2010 at 2:18 PM, COUJOULOU, Philippe <philippe.coujoulou at airbus.com<mailto:philippe.coujoulou at airbus.com>> wrote:
> Dear all,
> 
> I am trying to parse a message that contains parameters values like <PARAM_NAME> <VALUE>, for instance "STATION EST1".
> Here is a very simple extract of my grammar for one of these parameters (the one given in the above example):
> 
> grammar test;
> 
> KEYWORD_STATION :       'STATION';
> DIGIT    :        '0'..'9';
> LETTER  :        'a'..'z' | 'A'..'Z';
> SPACE   :       ' ';
> 
> stationParameter        :       KEYWORD_STATION SPACE stationName;
> stationName     :       LETTER LETTER LETTER DIGIT;
> 
> 
> The point is that when I try to parse my example message (STATION EST1), I get a MismatchTokenException at the point where the parser attempts to read the last "ST1". After some analysis, I understood that the lexer generated the following tokens: KEYWORD_STATION SPACE LETTER for the string "STATION E"  and then attempted to match the remaining "ST1" with KEYWORD_STATION but failed to complete it.
> 
> At this point, I would expect the lexer to backtrack to the beginning of 'ST1' and then match it with LETTER LETTER DIGIT, but it doesn't.
> 
> I have tried various combinations of "backtrack", "memorize" and "k" options without any success. I must have missed something. (Should it help, I use ANTLRWorks 1.4).
> 
> Please could you tell me how to proceed in order to make the lexer backtrack and try other alternatives when a keyword of my language is not exactly matched ?
> 
> Thanks in advance for your help.
> 
> Best Regards,
> 
> Philippe Coujoulou.

-------------- next part --------------
grammar AllLexer;

options {
   output = AST;
   ASTLabelType = CommonTree;
}

@members {
   private static final String [] x = new String[] {
      "STATION ABC2\nADDRESS 1234567","STATION STA1"
   };

   public static void main(String [] args) {
      for( int i = 0; i < x.length; ++i ) {
         try {
            System.out.println("about to parse:`"+x[i]+"`");
            AllLexerLexer lexer =
               new AllLexerLexer(new ANTLRStringStream(x[i]));
            CommonTokenStream tokens = new CommonTokenStream(lexer);
            System.out.println("tokens:"+tokens.toString());

            AllLexerParser parser = new AllLexerParser(tokens);
            AllLexerParser.listOfParameters_return p_result =
               parser.listOfParameters();

            CommonTree ast = p_result.tree;
            if( ast == null ) {
               System.out.println("resultant tree: is NULL");
            } else {
               System.out.println("resultant tree: " + ast.toStringTree());
            }
            System.out.println();
         } catch(Exception e) {
            e.printStackTrace();
         }
      }
   }
}

listOfParameters : parameterDef (CRLF parameterDef)* EOF;

parameterDef
   : StationParameter
   | AddressParameter
   | LocationParameter
   | SessionParameter
   | ProviderParameter
   | CodeParameter
   | DateParameter
   | TimeParameter;

StationParameter : STATION SPACE StationName;
fragment StationName : LETTER LETTER LETTER DIGIT;

AddressParameter : ADDRESS SPACE Address;
fragment Address : L_or_D L_or_D L_or_D L_or_D L_or_D L_or_D L_or_D;

LocationParameter : LOCATION SPACE Location;
fragment Location : LETTER LETTER LETTER LETTER;

SessionParameter : SESSION SPACE Session;
fragment Session : LETTER LETTER DIGIT DIGIT DIGIT DIGIT;

ProviderParameter : PROVIDER SPACE Provider;
fragment Provider : LETTER LETTER LETTER;

CodeParameter : CODE SPACE Code;
fragment Code : LETTER L_or_D L_or_D;

DateParameter : DATE SPACE Date;
fragment Date : DIGIT DIGIT DIGIT DIGIT DIGIT DIGIT;

TimeParameter : TIME SPACE Time;
fragment Time : (DIGIT DIGIT DIGIT DIGIT) | (DASH DASH DASH DASH) | (SPACE SPACE SPACE SPACE);

fragment L_or_D  : LETTER | DIGIT ;

fragment STATION : 'STATION';
fragment ADDRESS : 'ADDRESS';
fragment LOCATION: 'LOCATION';
fragment SESSION : 'SESSION';
fragment PROVIDER: 'PROVIDER';
fragment CODE    : 'CODE';
fragment DATE    : 'DATE';
fragment TIME    : 'TIME';
fragment LETTER  : 'a'..'z' | 'A'..'Z';
fragment DIGIT   : '0'..'9';
fragment DASH    : '-';
fragment SPACE   : ' ';

CRLF : '\r'? '\n';


-------------- next part --------------
grammar NoLexer;

options {
   output = AST;
   ASTLabelType = CommonTree;
}

@members {
   private static final String [] x = new String[] {
      "STATION ABC2\nADDRESS 1234567","STATION STA1"
   };

   public static void main(String [] args) {
      for( int i = 0; i < x.length; ++i ) {
         try {
            System.out.println("about to parse:`"+x[i]+"`");
            NoLexerLexer lexer =
               new NoLexerLexer(new ANTLRStringStream(x[i]));
            CommonTokenStream tokens = new CommonTokenStream(lexer);
            System.out.println("tokens:"+tokens.toString());

            NoLexerParser parser = new NoLexerParser(tokens);
            NoLexerParser.listOfParameters_return p_result =
               parser.listOfParameters();

            CommonTree ast = p_result.tree;
            if( ast == null ) {
               System.out.println("resultant tree: is NULL");
            } else {
               System.out.println("resultant tree: " + ast.toStringTree());
            }
            System.out.println();
         } catch(Exception e) {
            e.printStackTrace();
         }
      }
   }
}

listOfParameters : parameterDef (CRLF parameterDef)* EOF;

parameterDef
   : stationParameter
   | addressParameter
   | locationParameter
   | sessionParameter
   | providerParameter
   | codeParameter
   | dateParameter
   | timeParameter;

stationParameter : stationKeyword SPACE stationName;
stationName : letter letter letter digit;

addressParameter : addressKeyword SPACE addressValue;
addressValue : l_or_d l_or_d l_or_d l_or_d l_or_d l_or_d l_or_d;

locationParameter : locationKeyword SPACE locationValue;
locationValue : letter letter letter letter;

sessionParameter : sessionKeyword SPACE sessionValue;
sessionValue : letter letter digit digit digit digit;

providerParameter : providerKeyword SPACE providerValue;
providerValue : letter letter letter;

codeParameter : codeKeyword SPACE codeValue;
codeValue : letter l_or_d l_or_d;

dateParameter : dateKeyword SPACE dateValue;
dateValue : digit digit digit digit digit digit;

timeParameter : timeKeyword SPACE timeValue;
timeValue : (digit digit digit digit) | (DASH DASH DASH DASH) | (SPACE SPACE SPACE SPACE);

l_or_d  : letter | digit ;

digit   : ZERO | ONE | TWO | THREE | FOUR | FIVE | SIX | SEVEN | EIGHT | NINE ;

letter  : A|B|C|D|E|F|G|H|I|J|K|L|M|N|O|P|Q|R|S|T|U|V|W|X|Y|Z ;

stationKeyword : S T A T I O N; //NB: accepts "StaTiON" as a keyword
addressKeyword : A D D R E S S;
locationKeyword: L O C A T I O N;
sessionKeyword : S E S S I O N;
providerKeyword: P R O V I D E R;
codeKeyword    : C O D E;
dateKeyword    : D A T E;
timeKeyword    : T I M E;

// the following makes the lexer essentially case insensitive.

// if case is important, replace the A rule with 2 rules A_Upper:'A';
// and A_Lower:'a'; and appropriately update the parser. repeat for
// all the alphabet.

A : 'a' | 'A' ;
B : 'b' | 'B' ;
C : 'c' | 'C' ;
D : 'd' | 'D' ;
E : 'e' | 'E' ;
F : 'f' | 'F' ;
G : 'g' | 'G' ;
H : 'h' | 'H' ;
I : 'i' | 'I' ;
J : 'j' | 'J' ;
K : 'k' | 'K' ;
L : 'l' | 'L' ;
M : 'm' | 'M' ;
N : 'n' | 'N' ;
O : 'o' | 'O' ;
P : 'p' | 'P' ;
Q : 'q' | 'Q' ;
R : 'r' | 'R' ;
S : 's' | 'S' ;
T : 't' | 'T' ;
U : 'u' | 'U' ;
V : 'v' | 'V' ;
W : 'w' | 'W' ;
X : 'x' | 'X' ;
Y : 'y' | 'Y' ;
Z : 'z' | 'Z' ;

ZERO  : '0' ;
ONE   : '1' ;
TWO   : '2' ;
THREE : '3' ;
FOUR  : '4' ;
FIVE  : '5' ; 
SIX   : '6' ;
SEVEN : '7' ;
EIGHT : '8' ;
NINE  : '9' ;

DASH    : '-';
SPACE   : ' ';

CRLF : '\r'? '\n';



From jimi at temporal-wave.com  Wed Dec  1 10:48:38 2010
From: jimi at temporal-wave.com (Jim Idle)
Date: Wed, 1 Dec 2010 10:48:38 -0800
Subject: [antlr-interest] Island grammar for reading shell commands
In-Reply-To: <19701.44367.264667.738071@blake.zopyra.com>
References: <19700.26846.836510.537929@blake.zopyra.com>	<5C723D55-AC0A-48A0-ABEC-A7826F5028FC@cs.usfca.edu>	<19701.26032.665799.341444@blake.zopyra.com>	<DBF22DF0-7349-439C-939B-A0F2247AE5F0@cs.usfca.edu>	<19701.32795.390987.604758@blake.zopyra.com>	<023b01cb90e9$409557e0$c1c007a0$@temporal-wave.com>
	<19701.44367.264667.738071@blake.zopyra.com>
Message-ID: <02b301cb9188$5dad2840$190778c0$@temporal-wave.com>

Well, if it is lexer triggered then it is easy, just embed an action to do
it, All you need is 

int c = input.LA(1) 
and 
input.consume()

When the lexer token that triggers consume to end of line is seen, just eat
the rest yourself. There are probably lots of ways to do this. The text will
then be included in whatever token triggers the consume and you can deal
with it from the parser.

Jim

> -----Original Message-----
> From: Bill Lear [mailto:rael at zopyra.com]
> Sent: Tuesday, November 30, 2010 6:05 PM
> To: Jim Idle
> Cc: antlr-interest at antlr.org
> Subject: Re: [antlr-interest] Island grammar for reading shell commands
> 
> On Tuesday, November 30, 2010 at 15:49:39 (-0800) Jim Idle writes:
> >REST_OF_LINE allows an empty token which will immediately match
> nothing
> >and continue to do so forever. You want +  not *. I think you might be
> >doing this wrong to be honest. I would probably not use ANTLR for
> this.
> 
> Maybe, but Antlr is so cool ...
> 
> I did try replacing * with + and I got the same error.  Blech.  I
> really didn't want to write a parser by hand for all of this.  I've got
> significantly more to do than what I've got here, the rest of which
> should be easy to handle for antlr.
> 
> So, there is really no viable way to have Antlr read the rest of the
> line of input?  I would be happy to just write the Java code for that
> one line:
> 
> shell -timeout 30 find /var/log -name ....
> 
> If I could just get hold of the input stream, read to end of line, I
> could hand-parse the '-timeout N' part, etc., and then let the lexer
> continue reading on the next line.  Is there no way to "cut out"
> a part of the input like this to process separately?
> 
> Actually, I think I have a sick idea: Since this is line-based stuff,
> and small files, I can read this all in to memory.  I can hand-parse
> the shell command lines, and replace them with an empty line (to
> preserve line numbers in case of error) in the input, noting which
> lines I modified.  Then, I can give the massaged input to Antlr.  The
> parser is going to produce one instance of a Command class for each
> line, and return a list of them, in order.  I can just put the shell
> Command instances back in the list where they belong and be on my merry
> way..
> 
> As I said though, it would be really cool if I could just do this all
> in Antlr.
> 
> 
> Bill


From jimi at temporal-wave.com  Wed Dec  1 11:05:22 2010
From: jimi at temporal-wave.com (Jim Idle)
Date: Wed, 1 Dec 2010 11:05:22 -0800
Subject: [antlr-interest] Antlr lexer does not try other possible
	matches when it fails to match a token
In-Reply-To: <AANLkTikRJQUK2bS09LYD4BNuRWvtQuAGfDh3iDbw6A5Z@mail.gmail.com>
References: <11496_1291208470_4CF64715_11496_2_3_4C7C17D912BB3A4FB43E18339C55FF39907D0BE3CB@DE0-MAILMBX-P10.res.airbus.corp>	<7934_1291209502_4CF64B1E_7934_220_1_4C7C17D912BB3A4FB43E18339C55FF39907D0BE46B@DE0-MAILMBX-P10.res.airbus.corp>
	<AANLkTikRJQUK2bS09LYD4BNuRWvtQuAGfDh3iDbw6A5Z@mail.gmail.com>
Message-ID: <02cd01cb918a$b4590b80$1d0b2280$@temporal-wave.com>

Well, these rules are ambiguous - you should read the getting started
documents, but as you have no rules that can catch wrong paths, you just
need to left factor these in to one rule and use a predicate. Then set $type
to whatever you need it to be.

Note that the lexer runs independently of the parser.

So your S input is enough to trigger STATION, so try this:

STATION : 'S'
            (   ('TATION')=>'TATION'
              | { $type = LETTER; }
            )
;

You just have to be more specific is all. I think it is easier to see what
the intent is anyway.

jim

> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of Nick Vlassopoulos
> Sent: Wednesday, December 01, 2010 6:10 AM
> To: COUJOULOU, Philippe
> Cc: antlr-interest at antlr.org
> Subject: Re: [antlr-interest] Antlr lexer does not try other possible
> matches when it fails to match a token
> 
> Hello Philippe,
> 
> Although I am not an expert, I thing you should let the lexer sort out
> the "3 letters 1 digit" in the station name. Alternatively, you could
> probably add the station name as an identifier and check if it is in
> the correct format after parsing it.
> 
> Without being sure if it is a good solution, the following seems to
> work:
> 
> Best regards,
> 
> Nikos
> 
> -------------------------
> grammar Stations;
> 
> stationParameter :
> KEYWORD_STATION SPACE stationName;
> 
> stationName
> : STATION_NAME;
> 
> STATION_NAME
> : LETTER LETTER LETTER DIGIT;
> 
> KEYWORD_STATION : 'STATION';
> LETTER : 'a'..'z' | 'A'..'Z';
> DIGIT : '0'..'9';
> SPACE : ' ';
> -------------------------
> 
> 
> On Wed, Dec 1, 2010 at 2:18 PM, COUJOULOU, Philippe <
> philippe.coujoulou at airbus.com> wrote:
> 
> > Dear all,
> >
> > I am trying to parse a message that contains parameters values like
> > <PARAM_NAME> <VALUE>, for instance "STATION EST1".
> > Here is a very simple extract of my grammar for one of these
> > parameters (the one given in the above example):
> >
> > grammar test;
> >
> > KEYWORD_STATION :       'STATION';
> > DIGIT    :        '0'..'9';
> > LETTER  :        'a'..'z' | 'A'..'Z';
> > SPACE   :       ' ';
> >
> > stationParameter        :       KEYWORD_STATION SPACE stationName;
> > stationName     :       LETTER LETTER LETTER DIGIT;
> >
> >
> > The point is that when I try to parse my example message (STATION
> > EST1), I get a MismatchTokenException at the point where the parser
> > attempts to read the last "ST1". After some analysis, I understood
> > that the lexer generated the following tokens: KEYWORD_STATION SPACE
> > LETTER for the string "STATION E"  and then attempted to match the
> > remaining "ST1" with KEYWORD_STATION but failed to complete it.
> >
> > At this point, I would expect the lexer to backtrack to the beginning
> > of 'ST1' and then match it with LETTER LETTER DIGIT, but it doesn't.
> >
> > I have tried various combinations of "backtrack", "memorize" and "k"
> > options without any success. I must have missed something. (Should it
> > help, I use ANTLRWorks 1.4).
> >
> > Please could you tell me how to proceed in order to make the lexer
> > backtrack and try other alternatives when a keyword of my language is
> > not exactly matched ?
> >
> > Thanks in advance for your help.
> >
> > Best Regards,
> >
> > Philippe Coujoulou.
> >
> >
> > The information in this e-mail is confidential. The contents may not
> > be disclosed or used by anyone other than the addressee. Access to
> > this e-mail by anyone else is unauthorised.
> > If you are not the intended recipient, please notify Airbus
> > immediately and delete this e-mail.
> > Airbus cannot accept any responsibility for the accuracy or
> > completeness of this e-mail as it has been sent over public networks.
> > If you have any concerns over the content of this message or its
> > Accuracy or Integrity, please contact Airbus immediately.
> > All outgoing e-mails from Airbus are checked using regularly updated
> > virus scanning software but you should take whatever measures you
> deem
> > to be appropriate to ensure that this message and any attachments are
> virus free.
> >
> >
> > List: http://www.antlr.org/mailman/listinfo/antlr-interest
> > Unsubscribe:
> > http://www.antlr.org/mailman/options/antlr-interest/your-email-
> address
> >
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
> email-address


From jimi at temporal-wave.com  Wed Dec  1 11:13:18 2010
From: jimi at temporal-wave.com (Jim Idle)
Date: Wed, 1 Dec 2010 11:13:18 -0800
Subject: [antlr-interest] [ANTLRWorks 1.4][Code Generation] [C target]
	Bug??
In-Reply-To: <4CF675FF.5080003@kjchome.homeip.net>
References: <AANLkTik2hKwZfo0FW72NoeyTmoHykyXi3xkUvpyi_xEe@mail.gmail.com>
	<4CF675FF.5080003@kjchome.homeip.net>
Message-ID: <02cf01cb918b$d02aab10$70800130$@temporal-wave.com>

Actually you want to just stop trying to enforce this using syntax and
specify the semantic rules in actions or better still in a tree walk.

So just set flags to say which things you find and check the state to see if
they are illegal. But besides that this is surely:

rule1: (rule2 (a | b)*)*;  

With a check to see that if there are any illegal combinations.

Jim

> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of Kevin J. Cummings
> Sent: Wednesday, December 01, 2010 8:21 AM
> To: antlr-interest at antlr.org
> Subject: Re: [antlr-interest] [ANTLRWorks 1.4][Code Generation] [C
> target] Bug??
> 
> On 12/01/2010 10:32 AM, Amr Muhammad wrote:
> > Hello,
> >
> > I have a rule like this:
> >
> > version1 ---  rule1: (rule2 (a+ b* | b* a+) )* (rule2 a*)*
>                        ^^^^^^^^^^^^^^^^^^^^^^^^^ Hmmm, 1 or more a
> followed by 0 or more b OR zero or more b followed by
> 1 or more a.
> 
> What happens when there are 0 b.  Your code reduces to 1 or more a OR 1
> or more a.
> 
> I would re-write this as:
> 
> rule1: (rule2 ( (a+ b*) | (b+ a+)) )* (rule2 a*)*
> 
> as the case of just matching a+ is handled by the first alternative.
> 
> Now you need to handle the problem of the which rule2 case to match
> given that the first one could be empty and you want to match the
> second.  I think you need to disambiguate your grammar further.
> 
> --
> Kevin J. Cummings
> kjchome at rcn.com
> cummings at kjchome.homeip.net
> cummings at kjc386.framingham.ma.us
> Registered Linux User #1232 (http://counter.li.org)
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
> email-address


From rpvilao at gmail.com  Wed Dec  1 11:22:41 2010
From: rpvilao at gmail.com (=?ISO-8859-1?Q?Rui_Vil=E3o?=)
Date: Wed, 1 Dec 2010 19:22:41 +0000
Subject: [antlr-interest] Allow empty file/input
In-Reply-To: <02af01cb8b3c$e83f9210$b8beb630$@temporal-wave.com>
References: <AANLkTimrN9zCMxJ3z41NU8BUNxEztZOrPEwgp6oM3FDX@mail.gmail.com>
	<AANLkTi=6_dCX_fWvbjWBMY_tUQzpMe+TK6R2r280a9Wo@mail.gmail.com>
	<01c101cb8a7a$bdfa6ce0$39ef46a0$@temporal-wave.com>
	<AANLkTi=h6q=tO-zVHDtmYZzfPzaS6Nn29oksJa8VeZv2@mail.gmail.com>
	<02af01cb8b3c$e83f9210$b8beb630$@temporal-wave.com>
Message-ID: <AANLkTi=PLN0Ap+wNRvKgYfvRrybMVDmLp4DtVkp87d0d@mail.gmail.com>

Sorry for the late reply, but I was only able to get back to this today.

I manage to get it to work, but like this:

eat: bananas* EOF

      ->^(TRANSLATION_UNIT bananas*)
;

Then your tree rule is:

eat: ^(TRANSLATION_UNIT bananas*)
 | TRANSLATION_UNIT
     // Empty input
;

Once again thank you,

Rui Vilao

On Tue, Nov 23, 2010 at 6:33 PM, Jim Idle <jimi at temporal-wave.com> wrote:

> The code below IS the example J The rule eat is the top level rule for the
> parser and the tree walker.
>
>
>
> Jim
>
>
>
> From: Rui Vil?o [mailto:rpvilao at gmail.com]
> Sent: Tuesday, November 23, 2010 6:28 AM
> To: Jim Idle
> Cc: antlr-interest at antlr.org
> Subject: Re: [antlr-interest] Allow empty file/input
>
>
>
> Hi,
>
> First of all thanks for the quick reply.
>
> I'm not quite following you. Designing the grammar like you said, I'm
> having
> troubles on the tree grammar side and how I can raise the root object that
> represents my whole language.
>
> Do you haven an example regarding this matter?
>
> Thanks again,
>
> --
> Rui
>
> On Mon, Nov 22, 2010 at 7:23 PM, Jim Idle <jimi at temporal-wave.com> wrote:
>
> Looks like your tree grammar does not allow an empty input. I find it
> useful
> to always have a single base node:
>
> eat: b+=bananas+ EOF
>
>       ->^(TRANSLATION_UNIT $b*)
> ;
>
> Then your tree rule is:
>
> eat: ^(TRANSLATION_UNIT bananas+)
>  | TRANSLATION_UNIT
>      // Empty input
> ;
>
>
> Jim
>
>
> > -----Original Message-----
> > From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> > bounces at antlr.org] On Behalf Of Rui Vil?o
> > Sent: Monday, November 22, 2010 11:03 AM
> > To: antlr-interest at antlr.org
> > Subject: [antlr-interest] Allow empty file/input
> >
> > Hi there,
> >
> > I implemented a simple grammar and I want to add support to allow empty
> > input. Empty input can be for example comments too. So I defined it
> > this way
> >
> > eat: (bananas)+
> >     |
> >     ;
> >
> > bananas: <lots of stuff here>
> >
> > LINE_COMMENT   : '//' ~('\r' | '\n')*   {skip(); };
> >
> > ETC...
> >
> > The thing is if I put anything that does not match the grammar, i.e.
> > empty string, comment, whatever I get the following error when I try to
> > get the object that will represent my DSL:
> >
> > java.lang.NullPointerException: null
> >         at
> > org.antlr.runtime.tree.BaseTreeAdaptor.isNil(BaseTreeAdaptor.java:70)
> > ~[antlr-runtime-3.2.jar:na]
> >         at
> > org.antlr.runtime.tree.CommonTreeNodeStream.nextElement(CommonTreeNodeS
> > tream.java:93)
> > ~[antlr-runtime-3.2.jar:na]
> >         at
> > org.antlr.runtime.misc.LookaheadStream.fill(LookaheadStream.java:94)
> > ~[antlr-runtime-3.2.jar:na]
> >         at
> > org.antlr.runtime.misc.LookaheadStream.sync(LookaheadStream.java:88)
> > ~[antlr-runtime-3.2.jar:na]
> >         at
> > org.antlr.runtime.misc.LookaheadStream.LT(LookaheadStream.java:119)
> > ~[antlr-runtime-3.2.jar:na]
> >         at
> > org.antlr.runtime.tree.CommonTreeNodeStream.LA(CommonTreeNodeStream.jav
> > a:116)
> > ~[antlr-runtime-3.2.jar:na]
> >         at
> > com.feedzai.pulse.service.kpi.parser.KpiTree.script(KpiTree.java:85)
> > ~[classes/:na]
> >
> > Does anyone know how can I achieve this?
> >
> > Thank you in advance,
> >
> > Rui Vilao
> >
>
> > List: http://www.antlr.org/mailman/listinfo/antlr-interest
> > Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
> > email-address
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>
>
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>

From parrt at cs.usfca.edu  Wed Dec  1 12:48:15 2010
From: parrt at cs.usfca.edu (Terence Parr)
Date: Wed, 1 Dec 2010 12:48:15 -0800
Subject: [antlr-interest] AntlrWorks Debugging problems
In-Reply-To: <20101201125311.1C45DBBD@mailweb.gpi.it>
References: <20101130134404.D0965C88@mailweb.gpi.it>
	<20101130175911.B1F9BC87@mailweb.gpi.it>
	<20101201125311.1C45DBBD@mailweb.gpi.it>
Message-ID: <7637EF70-8CC4-4618-9460-C941A7EE580F@cs.usfca.edu>

Added bug to check.

http://www.antlr.org/jira/browse/AW-262

Ter

On Dec 1, 2010, at 4:49 AM, Massimiliano Donini wrote:

> Hi, i found that when i debug with AntrlWorks and select a file for 
> input instead of insert directly text, if the file not exists, 
> AntlrWorks show debugger timeout message.
> Maybe a bug?
> Greetings Max
> 
> Massimiliano Donini ha scritto:
>>  Solved doing Nothing :D
>> Thanks anyway
>> 
>> Il 30/11/2010 14:40, Massimiliano Donini ha scritto:
>> 
>>> Hi, I'm not able to debug a grammar copmposed by a lexer and a parser.
>>> I try to remote debug with VS2008 in the same way i do for a composite
>>> grammar but i got a IOException and in AntrlWorks i got every time
>>> Timeout message.
>>> I don't have running process on AntrlWorks debug port.
>>> What i was missing??
>>> attached there is my grammar file, try to debug with any Sql condition.**
>>> 
>>> Regards Max
>>> 
>>> 
>>> 
>>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>>> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>>> 
>> 
>> 
>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>> 
>> 
> 
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address


From hirbli at nettmail.de  Wed Dec  1 13:36:03 2010
From: hirbli at nettmail.de (Michael Bosch)
Date: Wed, 01 Dec 2010 22:36:03 +0100
Subject: [antlr-interest] Identifiers with Spaces
In-Reply-To: <1291073324.8286.10.camel@gecko>
References: <1291073324.8286.10.camel@gecko>
Message-ID: <1291239363.1976.4.camel@mackie>

Hi John!

On Mon, 2010-11-29 at 18:28 -0500, John B. Brodie wrote:
> sometimes, when the necessary look ahead is small and is bounded,
> syntactic predicates can be your friend.

That is exactly what I was looking for.  Thanks!
I did not know that the syntactic predicates were both easy to use and
target language independent.

Michael



From kunalsawlani at gmail.com  Wed Dec  1 14:10:25 2010
From: kunalsawlani at gmail.com (Kunal Sawlani)
Date: Wed, 1 Dec 2010 17:10:25 -0500
Subject: [antlr-interest] Ant and gUnit
Message-ID: <AANLkTimf20ZFrfTHciQaUGoNoJGjgc-gMNntwzjEN0ic@mail.gmail.com>

Hi,

I am using Ant to build my grammar files using the ant-antlr task jar file.

This grammar is developed in an iterative manner, and I was wondering if it
is possible to integrate my gUnit tests into the build process, so that I do
not have to build, and then run the unit tests against them every time.

Thanks!

-- 
Kunal

From parrt at cs.usfca.edu  Wed Dec  1 16:00:06 2010
From: parrt at cs.usfca.edu (Terence Parr)
Date: Wed, 1 Dec 2010 16:00:06 -0800
Subject: [antlr-interest] ANTLR v3.3 infinite loop
In-Reply-To: <E4DBD586-B756-43E2-BFE5-B3C779C33F6D@cs.usfca.edu>
References: <4CF64AA0.2040803@jaist.ac.jp>
	<E4DBD586-B756-43E2-BFE5-B3C779C33F6D@cs.usfca.edu>
Message-ID: <7E9B26AF-E6FE-4BAF-B793-7BEC02AE425B@cs.usfca.edu>

make that -Xwatchconversion
Ter
On Dec 1, 2010, at 8:02 AM, Terence Parr wrote:

> hi. please turn on -Xwatchdfaconversion and see which decision kills it. this is rare but not impossible.  Then, add backtrack=true and k=1 options to that decision to resolve.  or restructure that decision.
> 
> Please report back on success.
> 
> Ter
> 
> On Dec 1, 2010, at 5:16 AM, Rene Vestergaard wrote:
> 
>> Fellow ANTLRs,
>> 
>> My biggest .g file (~850 lines) appears to send 3.3 into an infinite 
>> loop (>10mins) that keeps allocating heap space (>3GBs).
>> 
>> On 3.2, the same task takes a few seconds and around 100MB.
>> 
>> Any advice on how to pinpoint the problem?
>> 
>> Cheers,
>> Rene
>> 
>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
> 
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address


From goldberg at cbio.mskcc.org  Wed Dec  1 16:05:14 2010
From: goldberg at cbio.mskcc.org (Arthur Goldberg)
Date: Wed, 01 Dec 2010 19:05:14 -0500
Subject: [antlr-interest] Pattern for returning errors from ANTLR in
 data structures, not STDERR
In-Reply-To: <74A83393-6643-46B8-B2D2-127D7B67AFCA@cs.usfca.edu>
References: <4CF5A139.1060101@cbio.mskcc.org>
	<966449AD-9F18-480D-9AEB-796C79013ACA@cs.usfca.edu>
	<74A83393-6643-46B8-B2D2-127D7B67AFCA@cs.usfca.edu>
Message-ID: <4CF6E2BA.6000304@cbio.mskcc.org>

Thanks Ter

However, as you might expect, I don't have time to integrate all this 
code into my parser. I'll do something simpler.

BR
A

On 11/30/10 11:28 PM, Terence Parr wrote:
> Let me be more specific.
>
> In the v4 prerelease stuff, Tool.java has
>
> // http://antlr.org/depot/antlr4/main/tool/src/org/antlr/v4/Tool.java
> public void error(Message msg) {
> if ( listeners.size()==0 ) {
> defaultListener.error(msg);
> return;
> }
> for (ANTLRToolListener l : listeners) l.error(msg);
> }
>
> using
>
> http://antlr.org/depot/antlr4/main/tool/src/org/antlr/v4/tool/ANTLRToolListener.java
>
> then in
>
> http://antlr.org/depot/antlr4/main/tool/src/org/antlr/v4/parse/ToolANTLRParser.java
>
> I do:
>
> public void displayRecognitionError(String[] tokenNames,
> RecognitionException e)
> {
> String msg = getParserErrorMessage(this, e);
> if ( paraphrases.size()>0 ) {
> String paraphrase = (String)paraphrases.peek();
> msg = msg+" while "+paraphrase;
> }
> //List stack = getRuleInvocationStack(e, this.getClass().getName());
> //msg += ", rule stack = "+stack;
> tool.errMgr.syntaxError(ErrorType.SYNTAX_ERROR, getSourceName(), 
> e.token, e, msg);
> }
>
> which forces all msgs from antlr to shunt to Tool.error(), which 
> announces to listeners.
>
> For testing, i have unit tests use this
>
> http://antlr.org/depot/antlr4/main/tool/test/org/antlr/v4/test/ErrorQueue.java
>
> as a listener to the tool like so:
>
> Tool antlr = newTool(optionsA);
> antlr.addListener(equeue);
>
> Ter
>
> On Nov 30, 2010, at 5:20 PM, Terence Parr wrote:
>
>> Check ANTLRToolListener in antlr source or whatever. it has a similar 
>> problem to solve.
>> Ter
>> On Nov 30, 2010, at 5:13 PM, Arthur Goldberg wrote:
>>
>>> Hello All
>>>
>>> My ANTLR parser is embedded in other code. I've decided that reporting
>>> errors out of the parser would be better handled as a list of errors,
>>> not exceptions, so that the parse is allowed to recover from errors and
>>> complete, if possible.
>>> Does anyone have a working pattern for returning errors from ANTLR in a
>>> list, not STDERR?
>>> In more detail, I'd run it in two modes:
>>> 1) testing: call some rule other than the root
>>> In this case, I will let the rule report an error via an exception.
>>>
>>> 2) production: call the root rule
>>> In this case, a newReportError() in
>>>
>>>    catch (RecognitionException re) {
>>>        newReportError(re);
>>>        recover(input,re);
>>>    }
>>>
>>> would catch exceptions thrown by other rules, and store them in a list.
>>> When the root rule returns, it returns the list of errors, along with
>>> the results of the parse.
>>>
>>> If someone can help me with this, I'll make it worth your while. I'm
>>> running out of time for messing with ANTLR.
>>>
>>> Thanks
>>> Arthur
>>>
>>>
>>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>>> Unsubscribe: 
>>> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>>
>>
>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>> Unsubscribe: 
>> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>

-- 
Senior Research Scientist
Computational Biology
Memorial Sloan-Kettering Cancer Center


From vester at jaist.ac.jp  Wed Dec  1 17:38:04 2010
From: vester at jaist.ac.jp (Rene Vestergaard)
Date: Thu, 02 Dec 2010 10:38:04 +0900
Subject: [antlr-interest] ANTLR v3.3 infinite loop
In-Reply-To: <7E9B26AF-E6FE-4BAF-B793-7BEC02AE425B@cs.usfca.edu>
References: <4CF64AA0.2040803@jaist.ac.jp>
	<E4DBD586-B756-43E2-BFE5-B3C779C33F6D@cs.usfca.edu>
	<7E9B26AF-E6FE-4BAF-B793-7BEC02AE425B@cs.usfca.edu>
Message-ID: <4CF6F87C.9050503@jaist.ac.jp>

 > hi. please turn on [-Xwatchconversion] and see which decision kills 
it. this is rare but not impossible.  Then, add backtrack=true and k=1 
options to that decision to resolve.  or restructure that decision.


I'm not sure I understand the answer.

When running 3.3 with -Xwatchconversion and -Xmx256MB, heap space runs 
out and the output ends with the lines enclosed below. I gather that you 
are saying that there is some way to map that info back into the name 
space of my .g file but the specific means to do this escapes me.

For 3.2, the max DFA state is 575, by the way.

Cheers,
Rene


convert DFA state 39452 (90 nfa states)
convert DFA state 39453 (90 nfa states)
convert DFA state 39454 (50 nfa states)
convert DFA state 39455 (62 nfa states)
convert DFA state 39456 (15 nfa states)
convert DFA state 39467 (92 nfa states)
convert DFA state 39468 (92 nfa states)
Exception in thread "main" java.lang.OutOfMemoryError: Java heap space
	at java.util.Arrays.copyOf(Arrays.java:2734)
	at java.util.Vector.ensureCapacityHelper(Vector.java:226)
	at java.util.Vector.setSize(Vector.java:242)
	at org.antlr.analysis.DFA.newState(DFA.java:1076)
	at org.antlr.analysis.NFAToDFAConverter.reach(NFAToDFAConverter.java:850)
	at 
org.antlr.analysis.NFAToDFAConverter.findNewDFAStatesAndAddDFATransitions(NFAToDFAConverter.java:275)
	at org.antlr.analysis.NFAToDFAConverter.convert(NFAToDFAConverter.java:110)
	at org.antlr.analysis.DFA.<init>(DFA.java:237)
	at org.antlr.tool.Grammar.createLookaheadDFA(Grammar.java:1262)
	at org.antlr.tool.Grammar.createLookaheadDFAs(Grammar.java:1026)
	at org.antlr.tool.Grammar.createLookaheadDFAs(Grammar.java:976)
	at org.antlr.codegen.Target.performGrammarAnalysis(Target.java:113)
	at org.antlr.codegen.CodeGenerator.genRecognizer(CodeGenerator.java:302)
	at org.antlr.Tool.generateRecognizer(Tool.java:642)
	at org.antlr.Tool.process(Tool.java:455)
	at org.antlr.Tool.main(Tool.java:89)



From parrt at cs.usfca.edu  Wed Dec  1 18:00:13 2010
From: parrt at cs.usfca.edu (Terence Parr)
Date: Wed, 1 Dec 2010 18:00:13 -0800
Subject: [antlr-interest] ANTLR v3.3 infinite loop
In-Reply-To: <4CF6F87C.9050503@jaist.ac.jp>
References: <4CF64AA0.2040803@jaist.ac.jp>
	<E4DBD586-B756-43E2-BFE5-B3C779C33F6D@cs.usfca.edu>
	<7E9B26AF-E6FE-4BAF-B793-7BEC02AE425B@cs.usfca.edu>
	<4CF6F87C.9050503@jaist.ac.jp>
Message-ID: <01F5F9AC-902A-4B06-A03D-DA9E7142ABA1@cs.usfca.edu>

ah. ok, give it more RAM :)  wait state 39468?  Hmm...can you send me your grammar offline?
Ter
On Dec 1, 2010, at 5:38 PM, Rene Vestergaard wrote:

>> hi. please turn on [-Xwatchconversion] and see which decision kills 
> it. this is rare but not impossible.  Then, add backtrack=true and k=1 
> options to that decision to resolve.  or restructure that decision.
> 
> 
> I'm not sure I understand the answer.
> 
> When running 3.3 with -Xwatchconversion and -Xmx256MB, heap space runs 
> out and the output ends with the lines enclosed below. I gather that you 
> are saying that there is some way to map that info back into the name 
> space of my .g file but the specific means to do this escapes me.
> 
> For 3.2, the max DFA state is 575, by the way.
> 
> Cheers,
> Rene
> 
> 
> convert DFA state 39452 (90 nfa states)
> convert DFA state 39453 (90 nfa states)
> convert DFA state 39454 (50 nfa states)
> convert DFA state 39455 (62 nfa states)
> convert DFA state 39456 (15 nfa states)
> convert DFA state 39467 (92 nfa states)
> convert DFA state 39468 (92 nfa states)
> Exception in thread "main" java.lang.OutOfMemoryError: Java heap space
> 	at java.util.Arrays.copyOf(Arrays.java:2734)
> 	at java.util.Vector.ensureCapacityHelper(Vector.java:226)
> 	at java.util.Vector.setSize(Vector.java:242)
> 	at org.antlr.analysis.DFA.newState(DFA.java:1076)
> 	at org.antlr.analysis.NFAToDFAConverter.reach(NFAToDFAConverter.java:850)
> 	at 
> org.antlr.analysis.NFAToDFAConverter.findNewDFAStatesAndAddDFATransitions(NFAToDFAConverter.java:275)
> 	at org.antlr.analysis.NFAToDFAConverter.convert(NFAToDFAConverter.java:110)
> 	at org.antlr.analysis.DFA.<init>(DFA.java:237)
> 	at org.antlr.tool.Grammar.createLookaheadDFA(Grammar.java:1262)
> 	at org.antlr.tool.Grammar.createLookaheadDFAs(Grammar.java:1026)
> 	at org.antlr.tool.Grammar.createLookaheadDFAs(Grammar.java:976)
> 	at org.antlr.codegen.Target.performGrammarAnalysis(Target.java:113)
> 	at org.antlr.codegen.CodeGenerator.genRecognizer(CodeGenerator.java:302)
> 	at org.antlr.Tool.generateRecognizer(Tool.java:642)
> 	at org.antlr.Tool.process(Tool.java:455)
> 	at org.antlr.Tool.main(Tool.java:89)
> 
> 
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address


From parrt at cs.usfca.edu  Wed Dec  1 18:00:49 2010
From: parrt at cs.usfca.edu (Terence Parr)
Date: Wed, 1 Dec 2010 18:00:49 -0800
Subject: [antlr-interest] ANTLR v3.3 infinite loop
In-Reply-To: <4CF6F87C.9050503@jaist.ac.jp>
References: <4CF64AA0.2040803@jaist.ac.jp>
	<E4DBD586-B756-43E2-BFE5-B3C779C33F6D@cs.usfca.edu>
	<7E9B26AF-E6FE-4BAF-B793-7BEC02AE425B@cs.usfca.edu>
	<4CF6F87C.9050503@jaist.ac.jp>
Message-ID: <6023186E-A67B-422A-936B-6082D2BC1AD9@cs.usfca.edu>

oh, actually, that's it. that decision is the one that is hosed. look upwards for the decision it's processing.
T
On Dec 1, 2010, at 5:38 PM, Rene Vestergaard wrote:

>> hi. please turn on [-Xwatchconversion] and see which decision kills 
> it. this is rare but not impossible.  Then, add backtrack=true and k=1 
> options to that decision to resolve.  or restructure that decision.
> 
> 
> I'm not sure I understand the answer.
> 
> When running 3.3 with -Xwatchconversion and -Xmx256MB, heap space runs 
> out and the output ends with the lines enclosed below. I gather that you 
> are saying that there is some way to map that info back into the name 
> space of my .g file but the specific means to do this escapes me.
> 
> For 3.2, the max DFA state is 575, by the way.
> 
> Cheers,
> Rene
> 
> 
> convert DFA state 39452 (90 nfa states)
> convert DFA state 39453 (90 nfa states)
> convert DFA state 39454 (50 nfa states)
> convert DFA state 39455 (62 nfa states)
> convert DFA state 39456 (15 nfa states)
> convert DFA state 39467 (92 nfa states)
> convert DFA state 39468 (92 nfa states)
> Exception in thread "main" java.lang.OutOfMemoryError: Java heap space
> 	at java.util.Arrays.copyOf(Arrays.java:2734)
> 	at java.util.Vector.ensureCapacityHelper(Vector.java:226)
> 	at java.util.Vector.setSize(Vector.java:242)
> 	at org.antlr.analysis.DFA.newState(DFA.java:1076)
> 	at org.antlr.analysis.NFAToDFAConverter.reach(NFAToDFAConverter.java:850)
> 	at 
> org.antlr.analysis.NFAToDFAConverter.findNewDFAStatesAndAddDFATransitions(NFAToDFAConverter.java:275)
> 	at org.antlr.analysis.NFAToDFAConverter.convert(NFAToDFAConverter.java:110)
> 	at org.antlr.analysis.DFA.<init>(DFA.java:237)
> 	at org.antlr.tool.Grammar.createLookaheadDFA(Grammar.java:1262)
> 	at org.antlr.tool.Grammar.createLookaheadDFAs(Grammar.java:1026)
> 	at org.antlr.tool.Grammar.createLookaheadDFAs(Grammar.java:976)
> 	at org.antlr.codegen.Target.performGrammarAnalysis(Target.java:113)
> 	at org.antlr.codegen.CodeGenerator.genRecognizer(CodeGenerator.java:302)
> 	at org.antlr.Tool.generateRecognizer(Tool.java:642)
> 	at org.antlr.Tool.process(Tool.java:455)
> 	at org.antlr.Tool.main(Tool.java:89)
> 
> 
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address


From csharp.2005 at yahoo.com  Wed Dec  1 22:55:44 2010
From: csharp.2005 at yahoo.com (Developer.Net)
Date: Wed, 1 Dec 2010 22:55:44 -0800 (PST)
Subject: [antlr-interest] Get a Control flow graph(CFG) from the AST
Message-ID: <439405.31876.qm@web121802.mail.ne1.yahoo.com>

Hello Everyone!

 What I want to do is to get a control flow graph(CFG) from an AST, where each 
statement or expression is a unique Node. I was wondering what you would suggest 
as the best option to do that. Thanks!

-Alan


      

From philippe.coujoulou at airbus.com  Thu Dec  2 01:17:07 2010
From: philippe.coujoulou at airbus.com (COUJOULOU, Philippe)
Date: Thu, 2 Dec 2010 10:17:07 +0100
Subject: [antlr-interest] Antlr lexer does not try other possible
 matches when it fails to match a token
In-Reply-To: <18392_1291230328_4CF69C78_18392_1228_1_02cd01cb918a$b4590b80$1d0b2280$@temporal-wave.com>
References: <11496_1291208470_4CF64715_11496_2_3_4C7C17D912BB3A4FB43E18339C55FF39907D0BE3CB@DE0-MAILMBX-P10.res.airbus.corp>
	<7934_1291209502_4CF64B1E_7934_220_1_4C7C17D912BB3A4FB43E18339C55FF39907D0BE46B@DE0-MAILMBX-P10.res.airbus.corp>
	<AANLkTikRJQUK2bS09LYD4BNuRWvtQuAGfDh3iDbw6A5Z@mail.gmail.com>
	<18392_1291230328_4CF69C78_18392_1228_1_02cd01cb918a$b4590b80$1d0b2280$@temporal-wave.com>
Message-ID: <22321_1291281476_4CF7643E_22321_9_1_4C7C17D912BB3A4FB43E18339C55FF39907D126CB8@DE0-MAILMBX-P10.res.airbus.corp>

Thanks for your replies.

I understand that that keywords and non-keywords need to be disambiguated. For the sake of readability and maintainability (I am not the only one who will have to maintain this grammar and even derive it into specific grammars), I will probably use the something like the NoLexer.g from John. 

Many thanks to all of you again. Your messages were of great help.

Philippe.


-----Original Message-----
From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-bounces at antlr.org] On Behalf Of Jim Idle
Sent: 01 December 2010 20:05
Cc: antlr-interest at antlr.org
Subject: Re: [antlr-interest] Antlr lexer does not try other possible matches when it fails to match a token

Well, these rules are ambiguous - you should read the getting started
documents, but as you have no rules that can catch wrong paths, you just
need to left factor these in to one rule and use a predicate. Then set $type
to whatever you need it to be.

Note that the lexer runs independently of the parser.

So your S input is enough to trigger STATION, so try this:

STATION : 'S'
            (   ('TATION')=>'TATION'
              | { $type = LETTER; }
            )
;

You just have to be more specific is all. I think it is easier to see what
the intent is anyway.

jim

> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of Nick Vlassopoulos
> Sent: Wednesday, December 01, 2010 6:10 AM
> To: COUJOULOU, Philippe
> Cc: antlr-interest at antlr.org
> Subject: Re: [antlr-interest] Antlr lexer does not try other possible
> matches when it fails to match a token
> 
> Hello Philippe,
> 
> Although I am not an expert, I thing you should let the lexer sort out
> the "3 letters 1 digit" in the station name. Alternatively, you could
> probably add the station name as an identifier and check if it is in
> the correct format after parsing it.
> 
> Without being sure if it is a good solution, the following seems to
> work:
> 
> Best regards,
> 
> Nikos
> 
> -------------------------
> grammar Stations;
> 
> stationParameter :
> KEYWORD_STATION SPACE stationName;
> 
> stationName
> : STATION_NAME;
> 
> STATION_NAME
> : LETTER LETTER LETTER DIGIT;
> 
> KEYWORD_STATION : 'STATION';
> LETTER : 'a'..'z' | 'A'..'Z';
> DIGIT : '0'..'9';
> SPACE : ' ';
> -------------------------
> 
> 
> On Wed, Dec 1, 2010 at 2:18 PM, COUJOULOU, Philippe <
> philippe.coujoulou at airbus.com> wrote:
> 
> > Dear all,
> >
> > I am trying to parse a message that contains parameters values like
> > <PARAM_NAME> <VALUE>, for instance "STATION EST1".
> > Here is a very simple extract of my grammar for one of these
> > parameters (the one given in the above example):
> >
> > grammar test;
> >
> > KEYWORD_STATION :       'STATION';
> > DIGIT    :        '0'..'9';
> > LETTER  :        'a'..'z' | 'A'..'Z';
> > SPACE   :       ' ';
> >
> > stationParameter        :       KEYWORD_STATION SPACE stationName;
> > stationName     :       LETTER LETTER LETTER DIGIT;
> >
> >
> > The point is that when I try to parse my example message (STATION
> > EST1), I get a MismatchTokenException at the point where the parser
> > attempts to read the last "ST1". After some analysis, I understood
> > that the lexer generated the following tokens: KEYWORD_STATION SPACE
> > LETTER for the string "STATION E"  and then attempted to match the
> > remaining "ST1" with KEYWORD_STATION but failed to complete it.
> >
> > At this point, I would expect the lexer to backtrack to the beginning
> > of 'ST1' and then match it with LETTER LETTER DIGIT, but it doesn't.
> >
> > I have tried various combinations of "backtrack", "memorize" and "k"
> > options without any success. I must have missed something. (Should it
> > help, I use ANTLRWorks 1.4).
> >
> > Please could you tell me how to proceed in order to make the lexer
> > backtrack and try other alternatives when a keyword of my language is
> > not exactly matched ?
> >
> > Thanks in advance for your help.
> >
> > Best Regards,
> >
> > Philippe Coujoulou.
> >
> >
> > The information in this e-mail is confidential. The contents may not
> > be disclosed or used by anyone other than the addressee. Access to
> > this e-mail by anyone else is unauthorised.
> > If you are not the intended recipient, please notify Airbus
> > immediately and delete this e-mail.
> > Airbus cannot accept any responsibility for the accuracy or
> > completeness of this e-mail as it has been sent over public networks.
> > If you have any concerns over the content of this message or its
> > Accuracy or Integrity, please contact Airbus immediately.
> > All outgoing e-mails from Airbus are checked using regularly updated
> > virus scanning software but you should take whatever measures you
> deem
> > to be appropriate to ensure that this message and any attachments are
> virus free.
> >
> >
> > List: http://www.antlr.org/mailman/listinfo/antlr-interest
> > Unsubscribe:
> > http://www.antlr.org/mailman/options/antlr-interest/your-email-
> address
> >
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
> email-address


List: http://www.antlr.org/mailman/listinfo/antlr-interest
Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address

This mail has originated outside your organization, either from an external partner or the Global Internet.
Keep this in mind if you answer this message.



The information in this e-mail is confidential. The contents may not be disclosed or used by anyone other than the addressee. Access to this e-mail by anyone else is unauthorised.
If you are not the intended recipient, please notify Airbus immediately and delete this e-mail.
Airbus cannot accept any responsibility for the accuracy or completeness of this e-mail as it has been sent over public networks. If you have any concerns over the content of this message or its Accuracy or Integrity, please contact Airbus immediately.
All outgoing e-mails from Airbus are checked using regularly updated virus scanning software but you should take whatever measures you deem to be appropriate to ensure that this message and any attachments are virus free.


From k_sarnath at hcl.com  Thu Dec  2 01:45:01 2010
From: k_sarnath at hcl.com (Sarnath K - ERS, HCLTech)
Date: Thu, 2 Dec 2010 15:15:01 +0530
Subject: [antlr-interest] Get a Control flow graph(CFG) from the AST
In-Reply-To: <9CD842E470496C4EB9FD76E837FC5CD41E0F4E2D3E@CHN-HCLT-EVS09.HCLT.CORP.HCL.IN>
References: <B3F91E1013C53E4B9840FEAD0F12BAAD367172D295@CHN-HCLT-EVS08.HCLT.CORP.HCL.IN>
	<9CD842E470496C4EB9FD76E837FC5CD41E0F4E2D3E@CHN-HCLT-EVS09.HCLT.CORP.HCL.IN>
Message-ID: <B3F91E1013C53E4B9840FEAD0F12BAAD367172D39F@CHN-HCLT-EVS08.HCLT.CORP.HCL.IN>

Hi Alan,

Here is how we are doing it. Courtesy: Vaibhav Goel from our group.
"
Traverse the AST and create CFG nodes and edges, taking special care for branching and looping constructs. For example, on
reaching an 'if' statement, create two separate routes for 'then' and 'else' blocks. Similarly, on reaching a 'for' statement,
create a back edge to account for looping.

Surely, this ab initio approach is lengthy and might also get a bit messy once
function calls are in place (which I have not considered for now).

However, I did not come across any alternative way of doing it for ANTLR on the net.
"
Thanks,

-----Original Message-----
From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-bounces at antlr.org] On Behalf Of Developer.Net
Sent: Thursday, December 02, 2010 12:26 PM
To: antlr-interest at antlr.org
Subject: [antlr-interest] Get a Control flow graph(CFG) from the AST

Hello Everyone!

 What I want to do is to get a control flow graph(CFG) from an AST, where each
statement or expression is a unique Node. I was wondering what you would suggest
as the best option to do that. Thanks!

-Alan




List: http://www.antlr.org/mailman/listinfo/antlr-interest
Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address

::DISCLAIMER::
-----------------------------------------------------------------------------------------------------------------------

The contents of this e-mail and any attachment(s) are confidential and intended for the named recipient(s) only.
It shall not attach any liability on the originator or HCL or its affiliates. Any views or opinions presented in
this email are solely those of the author and may not necessarily reflect the opinions of HCL or its affiliates.
Any form of reproduction, dissemination, copying, disclosure, modification, distribution and / or publication of
this message without the prior written consent of the author of this e-mail is strictly prohibited. If you have
received this email in error please delete it and notify the sender immediately. Before opening any mail and
attachments please check them for viruses and defect.

-----------------------------------------------------------------------------------------------------------------------


From vester at jaist.ac.jp  Thu Dec  2 02:21:48 2010
From: vester at jaist.ac.jp (Rene Vestergaard)
Date: Thu, 02 Dec 2010 19:21:48 +0900
Subject: [antlr-interest] ANTLR v3.3 infinite loop
In-Reply-To: <7E9B26AF-E6FE-4BAF-B793-7BEC02AE425B@cs.usfca.edu>
References: <4CF64AA0.2040803@jaist.ac.jp>
	<E4DBD586-B756-43E2-BFE5-B3C779C33F6D@cs.usfca.edu>
	<7E9B26AF-E6FE-4BAF-B793-7BEC02AE425B@cs.usfca.edu>
Message-ID: <4CF7733C.5020905@jaist.ac.jp>

After figuring out how to have a closer look at what ANTLR does, I can 
confirm that I did, indeed, run into the removed-failsafe issue that 
Terence references, and that's documented in the release notes for 3.3.

I fixed it by restructuring the syntax.

Cheers, and thanks,
Rene

On 12/02/2010 09:00 AM, Terence Parr wrote:
> make that -Xwatchconversion
> Ter
> On Dec 1, 2010, at 8:02 AM, Terence Parr wrote:
>
>> hi. please turn on -Xwatchdfaconversion and see which decision kills it. this is rare but not impossible.  Then, add backtrack=true and k=1 options to that decision to resolve.  or restructure that decision.
>>
>> Please report back on success.
>>
>> Ter
>>
>> On Dec 1, 2010, at 5:16 AM, Rene Vestergaard wrote:
>>
>>> Fellow ANTLRs,
>>>
>>> My biggest .g file (~850 lines) appears to send 3.3 into an infinite
>>> loop (>10mins) that keeps allocating heap space (>3GBs).
>>>
>>> On 3.2, the same task takes a few seconds and around 100MB.
>>>
>>> Any advice on how to pinpoint the problem?
>>>
>>> Cheers,
>>> Rene
>>>
>>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>>> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>>
>>
>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>

From amr.muhammad.w at gmail.com  Thu Dec  2 03:28:30 2010
From: amr.muhammad.w at gmail.com (Amr Muhammad)
Date: Thu, 2 Dec 2010 13:28:30 +0200
Subject: [antlr-interest] [ANTLRWorks 1.4][Code Generation] [C target] Bug??
In-Reply-To: <4CF675FF.5080003@kjchome.homeip.net>
References: <AANLkTik2hKwZfo0FW72NoeyTmoHykyXi3xkUvpyi_xEe@mail.gmail.com>
	<4CF675FF.5080003@kjchome.homeip.net>
Message-ID: <AANLkTi=bjk=FshqiJ8fVV6x4fPaUXPK8_Pys_yO0HiM7@mail.gmail.com>

On Wed, Dec 1, 2010 at 6:21 PM, Kevin J. Cummings wrote:

> I think you need to disambiguate your grammar further.

Could you clarify why do i need to disambiguate the grammar? May be i should
mention that this grammar is working correctly (i.e. i am able to generate
the parser, antlrworks does not issue any warning or errors, and it parses
the input correctly), but my problem is
when the input is invalid (i.e. when doing error reporting).
i described the problem here:
http://www.antlr.org/pipermail/antlr-interest/2010-November/040147.html


Thank you for your time :)

Amr Muhammad
Cairo Univ. Computer Eng. Grad.
twitter:@amrmuhammad <http://twitter.com/amrmuhammad>



On Wed, Dec 1, 2010 at 6:21 PM, Kevin J. Cummings <
cummings at kjchome.homeip.net> wrote:

> On 12/01/2010 10:32 AM, Amr Muhammad wrote:
> > Hello,
> >
> > I have a rule like this:
> >
> > version1 ---  rule1: (rule2 (a+ b* | b* a+) )* (rule2 a*)*
>                        ^^^^^^^^^^^^^^^^^^^^^^^^^
> Hmmm, 1 or more a followed by 0 or more b OR zero or more b followed by
> 1 or more a.
>
> What happens when there are 0 b.  Your code reduces to 1 or more a OR 1
> or more a.
>
> I would re-write this as:
>
> rule1: (rule2 ( (a+ b*) | (b+ a+)) )* (rule2 a*)*
>
> as the case of just matching a+ is handled by the first alternative.
>
> Now you need to handle the problem of the which rule2 case to match
> given that the first one could be empty and you want to match the
> second.  I think you need to disambiguate your grammar further.
>
> --
> Kevin J. Cummings
> kjchome at rcn.com
> cummings at kjchome.homeip.net
> cummings at kjc386.framingham.ma.us
> Registered Linux User #1232 (http://counter.li.org)
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>

From Sheila.Morrissey at ithaka.org  Thu Dec  2 04:10:20 2010
From: Sheila.Morrissey at ithaka.org (Sheila M. Morrissey)
Date: Thu, 2 Dec 2010 07:10:20 -0500
Subject: [antlr-interest] Missing something basic about lexer tokens
In-Reply-To: <1290218166.31026.81.camel@gecko>
References: <9FAE20247CC9EB41A6863490C392F7180258541FCA@pr1vmexch02.office.share.org>,
	<1290218166.31026.81.camel@gecko>
Message-ID: <9FAE20247CC9EB41A6863490C392F7180258586A89@pr1vmexch02.office.share.org>

John,
Thank you very much for this, and even more for the pointer to the markmail version of this list's archive -- much more effective for search purposes!!
Sheila

________________________________________
From: John B. Brodie [jbb at acm.org]
Sent: Friday, November 19, 2010 8:56 PM
To: Sheila M. Morrissey
Cc: 'antlr-interest at antlr.org'
Subject: Re: [antlr-interest] Missing something basic about lexer tokens

Greetings!

On Fri, 2010-11-19 at 18:58 -0500, Sheila M. Morrissey wrote:
> Hello,
>
> I am working on a recognizer that processes a text file, each line of which starts with one of short list of about 20 characters (mostly either upper case or lower case letters, a few special chars), immediately followed by a "name" (chars or dash), a space or 2, and then various space-delimited stretches of text comprised of arbitrarily any ASCII character Except newline, followed by newline.
>
> The first letter is significant - it indicates what sort of "command" each line is.
>
> Here's a simplified version of the grammar, with just one of these "commands" specified:
>
> grammar ElementAttributes;
>
> options {
>   language = Java;
> }
> @parser::header {}
> @lexer::header {}
>
> elementAttributes : elementAttributeCommand+ EOF;
>
> /**
> e.g.
> Aname IMPLIED
> */
>
> elementAttributeCommand : ACMD NAME SPACE+ ATTRTYPE NEWLINE;
>
> ATTRTYPE : ('IMPLIED'|'CDATA'|'NOTATION'|'ENTITY'|'TOKEN'|'ID'|'DATA');
> ACMD : 'A';
> NEWLINE:    '\r'? '\n';
> SPACE:      ' ';
> NAME : (NAMESTARTCHAR NAMECHAR*);
>
> fragment LOWERCASELETTER : ('a'..'z');
> fragment UPPERCASELETTER : ('A'..'Z');
> fragment DIGIT : ('0'..'9');
> fragment DASH  : ('-');
> fragment NAMESTARTCHAR : (LOWERCASELETTER | UPPERCASELETTER);
> fragment NAMECHAR : (NAMESTARTCHAR | DIGIT | DASH);
>
>
> If run on a file consisting only of the line (terminated with NEWLINE)
> Aname IMPLIED
>
> I get the following error:
> line 1:0 required (...)+ loop did not match anything at input 'Aname'
>
>  How should I be declaring the lexer rules so that 'A' at start of line is recognized as a command token, and yet still make it possible for the "NAME" immediately following it to be unambiguously recognized?
>

Please recall 3 facts about current ANTLR lexers:
1) they recognize tokens independent from any parsing context; and
2) they do not back-track (once committed to recognizing a prefix of a
token the rest of the input must match that token); and
3) they are greedy and happily recognize the longest valid string
possible.

(i suspect you already know the above facts, but i repeat them in case
someone in the future searches the mailing-list archive at
markmail.antlr.org and finds this message without that knowledge)

and so, as you have observed, when the input word "Aname" is seen by
your lexer it will produce the token NAME because that single token
greedily matches all of the characters in that input word.

and so your requirement "at the start of the line" must be, somehow,
encoded into your lexer rule(s) for command(s) like ACMD.

i believe you can read a discussion of this issue by searching the
archives at markmail.antlr.org for messages about special tokens at the
beginning of a line.

i seem to remember (i haven't reviewed the archives) that it boils down
to 3 possibilities:

1) add a predicate(s) to test the start character index of the token to
ensure that it is at the beginning of a line

2) use a rule of the form ACMD : NEWLINE 'A' ; which works for the
second and subsequent lines of input. But requires creating a special
sub-class of the input reader that always delivers a NEWLINE as the very
first character and then delivers characters from the actual input after
as the second and subsequent characters. and then of course your parser
rules should not insist upon a NEWLINE at the end of a command (because
that NEWLINE is part of the verb that starts the next command).

3) use a Lex-based lexer rather than and ANTLR-based lexer. search the
archives for jLex. Lex-based lexers are more oriented around regular
expressions -- so start-of-line and end-of-line are more easily
detected/used.



I also believe that Dr. Parr is looking at version 3 lexer issues such
as this one and is trying to improve things for version 4. search the
mailing list archives for Dr Parr's posts regarding version 4.



(as an aside i think most of my mailing list search suggestions will
actually result in pointers to pages in the wiki -- i am too lazy to
actually give you those links directly, sorry)

Hope this helps...
   -jbb

From canjren at yahoo.com  Thu Dec  2 06:46:53 2010
From: canjren at yahoo.com (Can Zhen)
Date: Thu, 2 Dec 2010 06:46:53 -0800 (PST)
Subject: [antlr-interest] Please remove me from the email list!
Message-ID: <591480.9844.qm@web39704.mail.mud.yahoo.com>





      

From kunalsawlani at gmail.com  Thu Dec  2 09:17:34 2010
From: kunalsawlani at gmail.com (Kunal Sawlani)
Date: Thu, 2 Dec 2010 12:17:34 -0500
Subject: [antlr-interest] gUnit in ANTLR 3.3
Message-ID: <AANLkTi=hx7ZzsX5pJH3KNz_YZpAaUFCAv=9nHi0VAt-E@mail.gmail.com>

Hello,

I was in the process of upgrading from ANTLR 3.1.2 to ANTLR 3.3, and the
target files get generated perfectly fine.

However, the gUnit interpreter seems to be unable to parse the syntax of the
gUnit file and indicates all the tests as invalid inputs. I have been trying
to find some documentation to see if anything changed in gunit syntax from
ANTLR 3.1.2 to ANTLR 3.2( the tests fail with antlr3.2 as well) .

Is this a known issue, or am I doing something wrong?

-- 
Kunal

From research at science.su  Thu Dec  2 10:22:07 2010
From: research at science.su (L. Rahyen)
Date: Thu, 2 Dec 2010 18:22:07 +0000
Subject: [antlr-interest] [C Target] Getting segmentation fault in
	isNilNode() from libatnlr3c.so
Message-ID: <201012021822.07402.research@science.su>

	I'm trying to get working (for C target) very simple example from "The 
Definitive ANTLR Reference" book, page 73, "3.3 Evaluating Expressions Using an 
AST Intermediate Form". Of course, for Java target everything is fine. I'm 
trying to write the same thing using C target but it looks like I did something 
wrong because I get segmentation fault at this line in Test.cpp:

  walker->prog(walker); (in isNilNode() from libatnlr3c.so)

	I'm just getting started with ANTLR. I would really appreciate if somebody 
suggest something that could help me to find where is the problem. To reproduce 
the problem, please use attached files:

	0) Save all files in the same directory, cd to it and run "chmod +x 
compile"
	1) Open Expr.g in ANTLRWorks, generate code, then do the same with Eval.g
	2) Run (I'm using GNU C++ compiler): ./compile
	3) Run: ./Test input
-------------- next part --------------
tree grammar Eval;
options
{
  language=C;
  tokenVocab = Expr; // Read token type from Expr tokens file
  ASTLabelType = pANTLR3_BASE_TREE;
}

@members
{
  #include <string>
  #include <iostream>
  #include <tr1/unordered_map>  
  #include <antlr3commontree.h>
  namespace std { using namespace tr1; }
  using namespace std;
  
  unordered_map<string, int> memory;
}

prog	:	stat+;

stat	:	expr { cout << $expr.value << endl; }
	|	^('=' ID expr) { memory.insert( { (char*)$ID.text->chars, $expr.value } ); };

expr returns [int value]
	:	^('-' a=expr b=expr) {$value = a-b; }
	|	^('+' a=expr b=expr) {$value = a+b; }
	|	^('*' a=expr b=expr) {$value = a*b; }
	|	ID
		{
		  auto key = (char*)$ID.text->chars;
		  if(memory.count(key) ) $value = memory[key]; // If found, set return value
		  else cout << "Undefined variable " << $ID.text->chars << endl;
		}
	|	INT {$value = atoi( (char*)$INT.text->chars); };
-------------- next part --------------
(3+4)*5
-------------- next part --------------
A non-text attachment was scrubbed...
Name: compile
Type: application/x-shellscript
Size: 97 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20101202/252d35f3/attachment.bin 
-------------- next part --------------
grammar Expr;
options
{
  language=C;
  output = AST;
  ASTLabelType = pANTLR3_BASE_TREE; // Type of $stat.tree ref etc...
}

@members
{
  #include <iostream>
  using namespace std;
}

// START:stat
/** Match a series of stat rules and, for each one, print out the
 *  tree stat returns, $stat.tree.  toStringTree() prints the tree
 *  out in form: (root child1 ... childN).  ANTLR's default tree 
 *  construction mechanism will build a list (flat tree) of the stat
 *  result trees.  This tree will be the input to the tree parser.
 */
prog	:	(stat { /* cout << $stat.tree==NULL?"NULL":$stat.tree->toStringTree() << endl; */ } )+;
stat	:	expr NEWLINE        -> expr
	|	ID '=' expr NEWLINE -> ^('=' ID expr)
	|	NEWLINE             ->;
// END:stat

// START:expr
expr	:	multExpr (('+'^|'-'^) multExpr)*;
multExpr:	atom ('*'^ atom)*;
atom	:	INT
	|	ID
	|	'('! expr ')'!;
// END:expr

// START:tokens
ID	:	('a'..'z'|'A'..'Z')+;
INT	:	'0'..'9'+;
NEWLINE	:	'\r'? '\n';
WS	:	(' '|'\t'|'\n'|'\r')+ { SKIP(); };
// END:tokens

From jimi at temporal-wave.com  Thu Dec  2 10:39:15 2010
From: jimi at temporal-wave.com (Jim Idle)
Date: Thu, 2 Dec 2010 10:39:15 -0800
Subject: [antlr-interest] [C Target] Getting segmentation fault
	in	isNilNode() from libatnlr3c.so
In-Reply-To: <201012021822.07402.research@science.su>
References: <201012021822.07402.research@science.su>
Message-ID: <039601cb9250$38547850$a8fd68f0$@temporal-wave.com>

Please study the downloadable examples for using the C output, and it may
also be more reasonable to use the Java output until you are more familiar
with everything.

Jim

> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of L. Rahyen
> Sent: Thursday, December 02, 2010 10:22 AM
> To: antlr-interest at antlr.org
> Subject: [antlr-interest] [C Target] Getting segmentation fault in
> isNilNode() from libatnlr3c.so
> 
> 	I'm trying to get working (for C target) very simple example from
> "The Definitive ANTLR Reference" book, page 73, "3.3 Evaluating
> Expressions Using an AST Intermediate Form". Of course, for Java target
> everything is fine. I'm trying to write the same thing using C target
> but it looks like I did something wrong because I get segmentation
> fault at this line in Test.cpp:
> 
>   walker->prog(walker); (in isNilNode() from libatnlr3c.so)
> 
> 	I'm just getting started with ANTLR. I would really appreciate if
> somebody suggest something that could help me to find where is the
> problem. To reproduce the problem, please use attached files:
> 
> 	0) Save all files in the same directory, cd to it and run "chmod
> +x compile"
> 	1) Open Expr.g in ANTLRWorks, generate code, then do the same with
> Eval.g
> 	2) Run (I'm using GNU C++ compiler): ./compile
> 	3) Run: ./Test input


From parrt at cs.usfca.edu  Thu Dec  2 10:51:58 2010
From: parrt at cs.usfca.edu (Terence Parr)
Date: Thu, 2 Dec 2010 10:51:58 -0800
Subject: [antlr-interest] gUnit in ANTLR 3.3
In-Reply-To: <AANLkTi=hx7ZzsX5pJH3KNz_YZpAaUFCAv=9nHi0VAt-E@mail.gmail.com>
References: <AANLkTi=hx7ZzsX5pJH3KNz_YZpAaUFCAv=9nHi0VAt-E@mail.gmail.com>
Message-ID: <8937FCEA-565A-4BE3-A6FA-3A9EC45D6689@cs.usfca.edu>

can you give us a sample? it should work fine
Ter
On Dec 2, 2010, at 9:17 AM, Kunal Sawlani wrote:

> Hello,
> 
> I was in the process of upgrading from ANTLR 3.1.2 to ANTLR 3.3, and the
> target files get generated perfectly fine.
> 
> However, the gUnit interpreter seems to be unable to parse the syntax of the
> gUnit file and indicates all the tests as invalid inputs. I have been trying
> to find some documentation to see if anything changed in gunit syntax from
> ANTLR 3.1.2 to ANTLR 3.2( the tests fail with antlr3.2 as well) .
> 
> Is this a known issue, or am I doing something wrong?
> 
> -- 
> Kunal
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address


From kunalsawlani at gmail.com  Thu Dec  2 11:59:19 2010
From: kunalsawlani at gmail.com (Kunal Sawlani)
Date: Thu, 2 Dec 2010 14:59:19 -0500
Subject: [antlr-interest] gUnit in ANTLR 3.3
In-Reply-To: <8937FCEA-565A-4BE3-A6FA-3A9EC45D6689@cs.usfca.edu>
References: <AANLkTi=hx7ZzsX5pJH3KNz_YZpAaUFCAv=9nHi0VAt-E@mail.gmail.com>
	<8937FCEA-565A-4BE3-A6FA-3A9EC45D6689@cs.usfca.edu>
Message-ID: <AANLkTikrr=ntRNt+7X9Hws92NH8KzegTO2noPJzVe0MG@mail.gmail.com>

Hi Terence,

I ran the following tests from for the SimpleC.gunit example mentioned in
the wiki.

===========================================================================================
gunit SimpleC;

//test rule:variable with 2 tests
variable:
"int x" FAIL     //expect failure, because of missing ';' in the input
string

"int x;" -> "x"  //expect standard output "x" from rule

//test rule:functionHeader with 1 test
functionHeader:
"void bar(int x)" returns ["int"]  //expect a return string "int" from rule

//test rule:program with 3 tests, input starts immediately after the initial
<< so the first test is a blank line
program:
<<
char c;
int x;
>> OK        //expect success (no error messages from ANTLR)


// test lexical rules
ID:
"abc123" OK    //expect success
"XYZ at 999" OK   //expect success
"123abc" FAIL  //expect failure

INT:
"00000" OK
"123456789" OK
===========================================================================================
*ANTLR 3.1.2*
Here is the output when I use the antlr-3.1.2.jar to run the unit tests.
These are consistent with the documentation in the Wiki

executing testsuite for grammar:SimpleC with 9 tests
-----------------------------------------------------------------------
3 failures found:
test2 (variable, line7) -
expected: x
actual: (VAR_DEF int x)

test3 (functionHeader, line11) -
expected: int
actual: (FUNC_HDR void bar (ARG_DEF int x))

test6 (ID, line24) -
expected: OK
actual: extra text found, '@999'


Tests run: 9, Failures: 3
===========================================================================================
*ANTLR 3.3*
And here is the output when I sue the antlr-3.3 jar to run the tests.

executing testsuite for grammar:SimpleC with 9 tests
-----------------------------------------------------------------------
4 failures found:
test2 (variable, line7) -
expected: x
actual: Invalid input

test3 (functionHeader, line11) -
expected: int
actual: Invalid input

test4 (program, line15) -
expected: OK
actual: FAIL

test6 (ID, line24) -
expected: OK
actual: extra text found, '@999'


Tests run: 9, Failures: 4
*
===========================================================================================
*
*
*
The problem seems to be occurring when testing for parser rules. The Lexer
unit tests behave the same in both.

Thanks,

*
*


On Thu, Dec 2, 2010 at 1:51 PM, Terence Parr <parrt at cs.usfca.edu> wrote:

> can you give us a sample? it should work fine
> Ter
> On Dec 2, 2010, at 9:17 AM, Kunal Sawlani wrote:
>
> > Hello,
> >
> > I was in the process of upgrading from ANTLR 3.1.2 to ANTLR 3.3, and the
> > target files get generated perfectly fine.
> >
> > However, the gUnit interpreter seems to be unable to parse the syntax of
> the
> > gUnit file and indicates all the tests as invalid inputs. I have been
> trying
> > to find some documentation to see if anything changed in gunit syntax
> from
> > ANTLR 3.1.2 to ANTLR 3.2( the tests fail with antlr3.2 as well) .
> >
> > Is this a known issue, or am I doing something wrong?
> >
> > --
> > Kunal
> >
> > List: http://www.antlr.org/mailman/listinfo/antlr-interest
> > Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>
>


-- 
Kunal

From research at science.su  Thu Dec  2 13:16:08 2010
From: research at science.su (L. Rahyen)
Date: Thu, 2 Dec 2010 21:16:08 +0000
Subject: [antlr-interest]
 =?iso-8859-1?q?=5BC_Target=5D_Getting_segmentati?=
 =?iso-8859-1?q?on_fault_in=09isNilNode_=28=29_from_libatnlr3c=2Eso?=
In-Reply-To: <039601cb9250$38547850$a8fd68f0$@temporal-wave.com>
References: <201012021822.07402.research@science.su>
	<039601cb9250$38547850$a8fd68f0$@temporal-wave.com>
Message-ID: <201012022116.08600.research@science.su>

On 2010-12-02 (December, Thursday) 18:39:15 Jim Idle wrote:
> Please study the downloadable examples for using the C output

	Thanks, my problem is solved (below I explain where the problem was and 
why I encountered it).

	I did looked at the examples again. It turned out that my mistake was 
translating from Java "new CommonTreeNodeStream" to 
"antlr3CommonTreeNodeStreamNew" instead of "antlr3CommonTreeNodeStreamNewTree" 
(just missed second "Tree" at the end and used ".tree->strFactory" instead of 
".tree" because was reading "wrong" doc about antlr3CommonTreeNodeStreamNew). I 
should have studied the examples more carefully before writing to mailing list.
	For some reason mailing list deleted fifth attachment in my previous 
message - Test.cpp; I'm attaching fixed version of it to this message: perhaps 
somebody will find it as useful short example in the future.

> also be more reasonable to use the Java output until you are more familiar
> with everything.

	As you can see from the above Java target isn't very useful thing to learn 
by itself if I want to use C target; in other words, knowing well ANTLR Java 
target will not always help with problems in C target. That's exactly why I'm 
learning ANTLR C target by translating simple examples to C++ from the book. I 
think this is effective and fast way of learning both ANTLR and its C target.

> > -----Original Message-----
> > From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> > bounces at antlr.org] On Behalf Of L. Rahyen
> > Sent: Thursday, December 02, 2010 10:22 AM
> > To: antlr-interest at antlr.org
> > Subject: [antlr-interest] [C Target] Getting segmentation fault in
> > isNilNode() from libatnlr3c.so
> > 
> > 	I'm trying to get working (for C target) very simple example from
> > 
> > "The Definitive ANTLR Reference" book, page 73, "3.3 Evaluating
> > Expressions Using an AST Intermediate Form". Of course, for Java target
> > everything is fine. I'm trying to write the same thing using C target
> > but it looks like I did something wrong because I get segmentation
> > 
> > fault at this line in Test.cpp:
> >   walker->prog(walker); (in isNilNode() from libatnlr3c.so)
> > 	
> > 	I'm just getting started with ANTLR. I would really appreciate if
> > 
> > somebody suggest something that could help me to find where is the
> > 
> > problem. To reproduce the problem, please use attached files:
> > 	0) Save all files in the same directory, cd to it and run "chmod
> > 
> > +x compile"
> > 
> > 	1) Open Expr.g in ANTLRWorks, generate code, then do the same with
> > 
> > Eval.g
> > 
> > 	2) Run (I'm using GNU C++ compiler): ./compile
> > 	3) Run: ./Test input
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address

From maxgbr at hotmail.it  Thu Dec  2 14:30:20 2010
From: maxgbr at hotmail.it (Massimiliano Donini)
Date: Thu, 2 Dec 2010 23:30:20 +0100
Subject: [antlr-interest] ANTLR v3.3 released!
In-Reply-To: <023d01cb9061$dae68900$90b39b00$@pixelminegames.com>
References: <369975EB-2AF8-46A1-B0EC-753C9FDEA6CF@cs.usfca.edu>	<931DCC17C6D7A849AEE684BF5B13E199020DD397@BLPOSTIN.reale.net>
	<023d01cb9061$dae68900$90b39b00$@pixelminegames.com>
Message-ID: <BLU0-SMTP186ACD38B52C069E8A01DCB0270@phx.gbl>


  Hi, Sam
In the new C# 3 Ports i found that Antlr.Runtime.BaseRecognizer.HIDDEN 
filed become called Hidden.
Is this intentional?
Because break compatibility on 3.2 grammars.

Thanks for your work
Regards Max

Il 30/11/2010 08:40, Sam Harwell ha scritto:
> Here are the C# 3 ports:
>
> This is the Tool (Antlr3.exe and its templates), StringTemplate 3.2
> including a new dynamic template compiler, the CSharp3 runtime, and the
> MSBuild Targets file to incorporate ANTLR into C# builds:
> http://www.280z28.org/downloads/antlr/antlr-dotnet-binaries-3.3.0.7239.7z
>
> This is just the CSharp3 runtime:
> http://www.280z28.org/downloads/antlr/antlr-dotnet-csharp3runtime-3.3.0.7239
> .7z
>
> Thanks,
> Sam
>
> -----Original Message-----
> From: antlr-interest-bounces at antlr.org
> [mailto:antlr-interest-bounces at antlr.org] On Behalf Of Prados Valiente
> Enrique
> Sent: Tuesday, November 30, 2010 1:18 AM
> To: Terence Parr; ANTLR Interest
> Cc: ANTLR-dev Dev
> Subject: Re: [antlr-interest] ANTLR v3.3 released!
>
> Will be ANTLR 3.3 Runtime for C# ??
>
> thanks
>
> -----Mensaje original-----
> De: antlr-interest-bounces at antlr.org
> [mailto:antlr-interest-bounces at antlr.org] En nombre de Terence Parr Enviado
> el: martes, 30 de noviembre de 2010 4:19
> Para: ANTLR Interest
> CC: ANTLR-dev Dev
> Asunto: [antlr-interest] ANTLR v3.3 released!
>
> ANTLR 3.3 is out! Get it here:
>
> http://antlr.org/download.html
>


> Has new Objective-C and Ruby targets.  See
>
> http://www.antlr.org/wiki/display/ANTLR3/ANTLR+3.3+Release+Notes
>
> I hope to get ANTLRWorks out tomorrow.  That will be 1.4.1 with ANTLR v3.3.
>
> Ter
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>
>


From kferrio at gmail.com  Thu Dec  2 18:20:39 2010
From: kferrio at gmail.com (kferrio at gmail.com)
Date: Fri, 3 Dec 2010 02:20:39 +0000
Subject: [antlr-interest] ANTLR v3.3 released!
Message-ID: <191517203-1291342840-cardhu_decombobulator_blackberry.rim.net-1763684127-@bda442.bisx.prod.on.blackberry>

Congrats!  Time to go read release notes and maybe update my grammars.  :)
------Original Message------
From: Terence Parr
Sender: antlr-interest-bounces at antlr.org
To: ANTLR Interest
Cc: ANTLR-dev Dev
Subject: [antlr-interest] ANTLR v3.3 released!
Sent: Nov 29, 2010 8:18 PM

ANTLR 3.3 is out! Get it here:

http://antlr.org/download.html

Has new Objective-C and Ruby targets.  See

http://www.antlr.org/wiki/display/ANTLR3/ANTLR+3.3+Release+Notes

I hope to get ANTLRWorks out tomorrow.  That will be 1.4.1 with ANTLR v3.3.

Ter

List: http://www.antlr.org/mailman/listinfo/antlr-interest
Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address


Sent from my Verizon Wireless BlackBerry

From juanfhj at gmail.com  Fri Dec  3 02:23:23 2010
From: juanfhj at gmail.com (Juan Fernando Herrera J.)
Date: Fri, 3 Dec 2010 05:23:23 -0500
Subject: [antlr-interest] non-LL(*) decision problem
Message-ID: <AANLkTi=n+jzP=dFH_diSgpHMTB75U_6pxzAXSs94F1sF@mail.gmail.com>

I'm trying to implement ON condition GOTO and ON condition GOSUB rules. My
code looks like

statement [boolean defer]
options {backtrack=true;}
    |   'ON' onGotoCondition=expr[defer] 'GOTO' onGotoArg=INT
{onGotoArgs.add($onGotoArg.text);} ( ',' onGotoArg=INT
{onGotoArgs.add($onGotoArg.text);} )* NL {if (!defer)
interp.onGoto($onGotoCondition.start, onGotoArgs);}

    |   'ON' onGosubCondition=expr[defer] 'GOSUB' onGosubArg=INT
{onGosubArgs.add($onGosubArg.text);} ( ',' onGosubArg=INT
{dimArgs.add($onGosubArg.text);} )* NL {if (!defer)
interp.onGosub($onGosubCondition.start, onGosubArgs);}

This requires backtrack=true. However, the generated parser has an error:

    public final void synpred14_InterpreterGrammar02_fragment() throws
RecognitionException {
...
onGotoCondition=expr(defer);

The error is that the defer variable is not defined; I expected

public final void synpred14_InterpreterGrammar02_fragment(boolean defer)
throws RecognitionException {

The problem is solved by left-factoring, but the code becomes quite
unreadable. How could I write a syntactic predicate? I don't quite
understand the concept.

Thanks

From arin_rizk at hotmail.co.uk  Fri Dec  3 15:38:31 2010
From: arin_rizk at hotmail.co.uk (Arin S. Rizk)
Date: Fri, 3 Dec 2010 15:38:31 -0800
Subject: [antlr-interest] [SPAM] Grammar of the TINY LANGUAGE error
Message-ID: <COL122-DS24EB0764CCD2841546327ED3280@phx.gbl>

 

Hi I'm using antlr works to create a compiler that accept this code

 

read x; 

if 0<x then 

    fact := 1; 

        repeat 

                fact := fact * x; 

                x:=x-1; 

        until x=0; 

        write fact 

end 

 

 

I did it but i still have errors ... the program lightsup the following (onz
between ##)

 

read x; 

if 0<x then 

    fact := 1; 

        repeat 

            fact := fact * ##x##; 

            x:=x- ##1##; 

    until x ##=0;## 

    write fact 

end

 

 

 

I worte the following grammer

 

grammar HW2 ;

 

 

 

options {

  backtrack = true;

  k=1;

    /* LL(1) k=1; */

}

 

 

program :            

                seq_statement+

 

 

 

 

                ;

                

                

                

seq_statement 

                :

                (seq_statement ';'statement | seq_statement)

                /*statement ( ';' statement )* */

                                

                ;

statement 

                :

                

                (read | if_statement | repeat_until | assignment_sta |
write_sta)

                                

                ;

                

write_sta 

                :

                

                'write' exp           

                ;

                

assignment_sta 

                :               ID ':=' exp ';'

                ;

                

 

                

 

repeat_until

                :'repeat' seq_statement 'until' exp

                ;

                

read       :

 

          'read' ID ';' 

                ;

                

if_statement 

                :

                (('if' exp 'then' seq_statement 'end')|('if' exp 'then'
seq_statement 'else' seq_statement'end'))

                                

                ;

                

exp        :

simple_exp LOG_OP simple_exp | simple_exp | ID

                

                ;

simple_exp

                :

                simple_exp OP term |term         

                ;

                

term      :

term OP factor factor | factor     

                ;

                

factor    :

                '/(' exp '/)' | NUMBER | ID           

                ;

fragment             

Operation_stat

                :               (NUMBER|ID) OP (NUMBER|ID) 

                ;

                

OP          :               ('+'|'-'|'*'|'/')

                ;

                

NUMBER             :

'0'..'9'+  

                ;

                

LOG_OP               :

('<' | '>' | '=' | '<=' | '>=' )

                ;

                

 

ID  :        ('a'..'z'|'A'..'Z'|'_') ('a'..'z'|'A'..'Z'|'0'..'9'|'_')*

    ;

 

 

 

FLOAT

    :   ('0'..'9')+ '.' ('0'..'9')* EXPONENT?

    |   '.' ('0'..'9')+ EXPONENT?

    |   ('0'..'9')+ EXPONENT

    ;

 

COMMENT

    :   '//' ~('\n'|'\r')* '\r'? '\n' {$channel=HIDDEN;}

    |   '/*' ( options {greedy=false;} : . )* '*/' {$channel=HIDDEN;}

    ;

 

WS  :   ( ' '

        | '\t'

        | '\r'

        | '\n'

        ) {$channel=HIDDEN;}

    ;

 

STRING

    :  '\'' ( ESC_SEQ | ~('\\'|'\'') )* '\''

    ;

 

 

 

 

fragment

EXPONENT : ('e'|'E') ('+'|'-')? ('0'..'9')+ ;

 

fragment

HEX_DIGIT : ('0'..'9'|'a'..'f'|'A'..'F') ;

 

fragment

ESC_SEQ

    :   '\\' ('b'|'t'|'n'|'f'|'r'|'\"'|'\''|'\\')

    |   UNICODE_ESC

    |   OCTAL_ESC

    ;

 

fragment

OCTAL_ESC

    :   '\\' ('0'..'3') ('0'..'7') ('0'..'7')

    |   '\\' ('0'..'7') ('0'..'7')

    |   '\\' ('0'..'7')

    ;

 

fragment

UNICODE_ESC

    :   '\\' 'u' HEX_DIGIT HEX_DIGIT HEX_DIGIT HEX_DIGIT

    ;

 

( I choose debug and then type the code and use the debugger to evaluate if
my grammer will work)

 

But still its showing error , how can I fix it ? where did I go wrong ?


From drippel at yahoo.com  Fri Dec  3 07:05:54 2010
From: drippel at yahoo.com (Daniel Rippel)
Date: Fri, 3 Dec 2010 07:05:54 -0800 (PST)
Subject: [antlr-interest] Newby Lexer Question
Message-ID: <32916.34975.qm@web53301.mail.re2.yahoo.com>



I am fairly new to antlr and am running into a basic issue that I can't quite 
find the answer for on the wiki and in Parr's book.

Here is my lexer.  Greatly simplified of course.

...
CREATE : 'create' ;
...
IDENTIFIER : (['a'..'z']|['A'..'Z'])(['a'..'z']|['A'..'Z']|['0'..'9'])+ ;

Basically, I want 'create' to be a keyword token.
And something like 'createFoo' should be an identifier.

However, the lexer always finds 'create' stops and gives me the CREATE token 
back.

I have tried using the greedy flag but am not having any luck.

Any ideas or suggestions would be extremely helpful.  
I'll even accept an RTFM, if you can point me to the page in the FM.

Thanks,
Dan


From jbb at acm.org  Fri Dec  3 07:41:43 2010
From: jbb at acm.org (John B. Brodie)
Date: Fri, 03 Dec 2010 10:41:43 -0500
Subject: [antlr-interest] Newby Lexer Question
In-Reply-To: <32916.34975.qm@web53301.mail.re2.yahoo.com>
References: <32916.34975.qm@web53301.mail.re2.yahoo.com>
Message-ID: <1291390903.2859.4.camel@gecko>

Greetings!

On Fri, 2010-12-03 at 07:05 -0800, Daniel Rippel wrote:
> 
> I am fairly new to antlr and am running into a basic issue that I can't quite 
> find the answer for on the wiki and in Parr's book.
> 
> Here is my lexer.  Greatly simplified of course.
> 
> ...
> CREATE : 'create' ;
> ...
> IDENTIFIER : (['a'..'z']|['A'..'Z'])(['a'..'z']|['A'..'Z']|['0'..'9'])+ ;
> 
did you really mean to use the [ and ] above? those aren't valid syntax
here. [] are used to surround parameters being passed to a rule. use ()
instead...

> Basically, I want 'create' to be a keyword token.
> And something like 'createFoo' should be an identifier.
> 
> However, the lexer always finds 'create' stops and gives me the CREATE token 
> back.
> 
> I have tried using the greedy flag but am not having any luck.
> 
> Any ideas or suggestions would be extremely helpful.  
> I'll even accept an RTFM, if you can point me to the page in the FM.
> 

once you replace the [] with () i see no problem with this fragment.

maybe try to create the smallest (yet complete) grammar that exhibits
your problem. and post that.

sorry for not being very helpful....
   -jbb



From drippel at yahoo.com  Fri Dec  3 07:51:08 2010
From: drippel at yahoo.com (Daniel Rippel)
Date: Fri, 3 Dec 2010 07:51:08 -0800 (PST)
Subject: [antlr-interest] Newby Lexer Question
In-Reply-To: <1291390903.2859.4.camel@gecko>
References: <32916.34975.qm@web53301.mail.re2.yahoo.com>
	<1291390903.2859.4.camel@gecko>
Message-ID: <513258.99153.qm@web53305.mail.re2.yahoo.com>

Sorry for the spam.

I originally started with someone else's grammar file.

The issue wasn't my rules.

The issue was a  "k=4;" look ahead in my options section.

I kept deleting everything out and found the issue.


----- Original Message ----
From: John B. Brodie <jbb at acm.org>
To: Daniel Rippel <drippel at yahoo.com>
Cc: antlr-interest at antlr.org
Sent: Fri, December 3, 2010 10:41:43 AM
Subject: Re: [antlr-interest] Newby Lexer Question

Greetings!

On Fri, 2010-12-03 at 07:05 -0800, Daniel Rippel wrote:
> 
> I am fairly new to antlr and am running into a basic issue that I can't quite 
> find the answer for on the wiki and in Parr's book.
> 
> Here is my lexer.  Greatly simplified of course.
> 
> ...
> CREATE : 'create' ;
> ...
> IDENTIFIER : (['a'..'z']|['A'..'Z'])(['a'..'z']|['A'..'Z']|['0'..'9'])+ ;
> 
did you really mean to use the [ and ] above? those aren't valid syntax
here. [] are used to surround parameters being passed to a rule. use ()
instead...

> Basically, I want 'create' to be a keyword token.
> And something like 'createFoo' should be an identifier.
> 
> However, the lexer always finds 'create' stops and gives me the CREATE token 
> back.
> 
> I have tried using the greedy flag but am not having any luck.
> 
> Any ideas or suggestions would be extremely helpful.  
> I'll even accept an RTFM, if you can point me to the page in the FM.
> 

once you replace the [] with () i see no problem with this fragment.

maybe try to create the smallest (yet complete) grammar that exhibits
your problem. and post that.

sorry for not being very helpful....
   -jbb

From jimi at temporal-wave.com  Fri Dec  3 12:10:54 2010
From: jimi at temporal-wave.com (Jim Idle)
Date: Fri, 3 Dec 2010 12:10:54 -0800
Subject: [antlr-interest] non-LL(*) decision problem
In-Reply-To: <AANLkTi=n+jzP=dFH_diSgpHMTB75U_6pxzAXSs94F1sF@mail.gmail.com>
References: <AANLkTi=n+jzP=dFH_diSgpHMTB75U_6pxzAXSs94F1sF@mail.gmail.com>
Message-ID: <045201cb9326$30e7d090$92b771b0$@temporal-wave.com>

Left factor:

: ON expr ( GOTO INT | GOSUB INT)
;


Avoid backtrack where possible.

Jim

> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of Juan Fernando Herrera J.
> Sent: Friday, December 03, 2010 2:23 AM
> To: ANTLR Interest
> Subject: [antlr-interest] non-LL(*) decision problem
> 
> I'm trying to implement ON condition GOTO and ON condition GOSUB rules.
> My code looks like
> 
> statement [boolean defer]
> options {backtrack=true;}
>     |   'ON' onGotoCondition=expr[defer] 'GOTO' onGotoArg=INT
> {onGotoArgs.add($onGotoArg.text);} ( ',' onGotoArg=INT
> {onGotoArgs.add($onGotoArg.text);} )* NL {if (!defer)
> interp.onGoto($onGotoCondition.start, onGotoArgs);}
> 
>     |   'ON' onGosubCondition=expr[defer] 'GOSUB' onGosubArg=INT
> {onGosubArgs.add($onGosubArg.text);} ( ',' onGosubArg=INT
> {dimArgs.add($onGosubArg.text);} )* NL {if (!defer)
> interp.onGosub($onGosubCondition.start, onGosubArgs);}
> 
> This requires backtrack=true. However, the generated parser has an
> error:
> 
>     public final void synpred14_InterpreterGrammar02_fragment() throws
> RecognitionException { ...
> onGotoCondition=expr(defer);
> 
> The error is that the defer variable is not defined; I expected
> 
> public final void synpred14_InterpreterGrammar02_fragment(boolean
> defer) throws RecognitionException {
> 
> The problem is solved by left-factoring, but the code becomes quite
> unreadable. How could I write a syntactic predicate? I don't quite
> understand the concept.
> 
> Thanks
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
> email-address


From sharwell at pixelminegames.com  Fri Dec  3 12:58:52 2010
From: sharwell at pixelminegames.com (Sam Harwell)
Date: Fri, 3 Dec 2010 14:58:52 -0600
Subject: [antlr-interest] ANTLR v3.3 released!
In-Reply-To: <BLU0-SMTP186ACD38B52C069E8A01DCB0270@phx.gbl>
References: <369975EB-2AF8-46A1-B0EC-753C9FDEA6CF@cs.usfca.edu>	<931DCC17C6D7A849AEE684BF5B13E199020DD397@BLPOSTIN.reale.net>
	<023d01cb9061$dae68900$90b39b00$@pixelminegames.com>
	<BLU0-SMTP186ACD38B52C069E8A01DCB0270@phx.gbl>
Message-ID: <059401cb932c$e49eaf40$addc0dc0$@pixelminegames.com>

Hi Max,

I changed the name in the CSharp3 target quite a while back to match the
familiar .NET naming. One of the reasons the CSharp3 target remained as a
"beta" for so long was because I was making some of these small but breaking
changes. I intend to minimize these problems in the future. :)

Thank you,
Sam Harwell

-----Original Message-----
From: Massimiliano Donini [mailto:maxgbr at hotmail.it] 
Sent: Thursday, December 02, 2010 4:30 PM
To: sharwell at pixelminegames.com
Cc: antlr-interest at antlr.org
Subject: Re: [antlr-interest] ANTLR v3.3 released!


  Hi, Sam
In the new C# 3 Ports i found that Antlr.Runtime.BaseRecognizer.HIDDEN
filed become called Hidden.
Is this intentional?
Because break compatibility on 3.2 grammars.

Thanks for your work
Regards Max

Il 30/11/2010 08:40, Sam Harwell ha scritto:
> Here are the C# 3 ports:
>
> This is the Tool (Antlr3.exe and its templates), StringTemplate 3.2 
> including a new dynamic template compiler, the CSharp3 runtime, and 
> the MSBuild Targets file to incorporate ANTLR into C# builds:
> http://www.280z28.org/downloads/antlr/antlr-dotnet-binaries-3.3.0.7239
> .7z
>
> This is just the CSharp3 runtime:
> http://www.280z28.org/downloads/antlr/antlr-dotnet-csharp3runtime-3.3.
> 0.7239
> .7z
>
> Thanks,
> Sam
>
> -----Original Message-----
> From: antlr-interest-bounces at antlr.org 
> [mailto:antlr-interest-bounces at antlr.org] On Behalf Of Prados Valiente 
> Enrique
> Sent: Tuesday, November 30, 2010 1:18 AM
> To: Terence Parr; ANTLR Interest
> Cc: ANTLR-dev Dev
> Subject: Re: [antlr-interest] ANTLR v3.3 released!
>
> Will be ANTLR 3.3 Runtime for C# ??
>
> thanks
>
> -----Mensaje original-----
> De: antlr-interest-bounces at antlr.org
> [mailto:antlr-interest-bounces at antlr.org] En nombre de Terence Parr 
> Enviado
> el: martes, 30 de noviembre de 2010 4:19
> Para: ANTLR Interest
> CC: ANTLR-dev Dev
> Asunto: [antlr-interest] ANTLR v3.3 released!
>
> ANTLR 3.3 is out! Get it here:
>
> http://antlr.org/download.html
>


> Has new Objective-C and Ruby targets.  See
>
> http://www.antlr.org/wiki/display/ANTLR3/ANTLR+3.3+Release+Notes
>
> I hope to get ANTLRWorks out tomorrow.  That will be 1.4.1 with ANTLR
v3.3.
>
> Ter
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: 
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>
>



From rebeka_fz at yahoo.fr  Fri Dec  3 16:57:33 2010
From: rebeka_fz at yahoo.fr (refka fouzai)
Date: Sat, 4 Dec 2010 00:57:33 +0000 (GMT)
Subject: [antlr-interest] lex and antlr
Message-ID: <149787.61003.qm@web27903.mail.ukl.yahoo.com>

Hi,
i tried to create a lexer grammar with antlrworks and i copy paste my  lex file 
content to it but it does not work.how could you explain that  antlr works fine 
with lex please.
 Cordialement,


Refka Fouzai



      

From braden at endoframe.com  Sat Dec  4 22:54:16 2010
From: braden at endoframe.com (Braden McDaniel)
Date: Sun, 05 Dec 2010 01:54:16 -0500
Subject: [antlr-interest] throws-spec in ANTLR rules -- does nothing?
In-Reply-To: <ibm99l$1ec$1@dough.gmane.org>
References: <ibm99l$1ec$1@dough.gmane.org>
Message-ID: <4CFB3718.9090108@endoframe.com>

On 11/13/10 10:02 AM, Joachim Schrod wrote:
> I'm using ANTLR 3.2 with Java code generation.
> 
> According to the ANTLR book, p.94, and
> http://www.antlr.org/wiki/pages/viewpage.action?pageId=1956, a rule
> may have a ?throws-spec?. But I didn't find an explanation of that
> part -- neither in the book nor on the Web site.
> 
> If I have a rule that starts with
> 
>    remarks throws DiscardPDFException : ...
> 
> I would have thought that DiscardPDFException is added to the
> throws clause of the generated method; but it isn't done so. ANTLR
> expects that clause without error messages, but also without effects.
> 
> So my question is:
> What's the spec for ?throws-spec?, syntactically and semantically?

I'm wondering about this, too.  Is "throws" just a placeholder in Antlr 3.2?

[Poking this because it didn't appear to get a response.]

-- 
Braden McDaniel <braden at endoframe.com>

From braden at endoframe.com  Sat Dec  4 23:05:56 2010
From: braden at endoframe.com (Braden McDaniel)
Date: Sun, 05 Dec 2010 02:05:56 -0500
Subject: [antlr-interest] throws-spec in ANTLR rules -- does nothing?
In-Reply-To: <4CFB3718.9090108@endoframe.com>
References: <ibm99l$1ec$1@dough.gmane.org> <4CFB3718.9090108@endoframe.com>
Message-ID: <4CFB39D4.2030506@endoframe.com>

On 12/5/10 1:54 AM, Braden McDaniel wrote:
> On 11/13/10 10:02 AM, Joachim Schrod wrote:
>> I'm using ANTLR 3.2 with Java code generation.
>>
>> According to the ANTLR book, p.94, and
>> http://www.antlr.org/wiki/pages/viewpage.action?pageId=1956, a rule
>> may have a ?throws-spec?. But I didn't find an explanation of that
>> part -- neither in the book nor on the Web site.
>>
>> If I have a rule that starts with
>>
>>    remarks throws DiscardPDFException : ...
>>
>> I would have thought that DiscardPDFException is added to the
>> throws clause of the generated method; but it isn't done so. ANTLR
>> expects that clause without error messages, but also without effects.
>>
>> So my question is:
>> What's the spec for ?throws-spec?, syntactically and semantically?
> 
> I'm wondering about this, too.  Is "throws" just a placeholder in Antlr 3.2?
> 
> [Poking this because it didn't appear to get a response.]

Okay; so a few minutes after sending this, I found:

> http://www.antlr.org/jira/browse/ANTLR-100

... and I guess the answer to my question is "yes".

-- 
Braden McDaniel <braden at endoframe.com>

From asha.ramegowda at gmail.com  Sun Dec  5 00:35:48 2010
From: asha.ramegowda at gmail.com (Asha Ramegowda)
Date: Sun, 5 Dec 2010 14:05:48 +0530
Subject: [antlr-interest] Why I get TODO: run and send output to this
	console :(?!
Message-ID: <AANLkTikJ9j=jy+d9zwZ-5Pit4YJJOhjW0hwZ53x3Y6UE@mail.gmail.com>

Hi All,

Almost a year back I used to work with ANTLRWorks 1.3.1. And everything was
fine.
Recently again got to work with ANTLR but with ANTLRWork 1.4.
And though I have very simple rules am not able to run them.
Always I get the message "TODO: run and send output to this console" and
even debugger doesnt work as usual.
I have deleted all my class path entries of old ANTLR and ANTLRWorks 1.3.1
and I assumed I have properly configured it with the port number 49100.
Kindly let me know how to resolve this issue.

-- 
Thank you,

Asha R

From chaowang05 at gmail.com  Sun Dec  5 01:14:42 2010
From: chaowang05 at gmail.com (Chao Wang)
Date: Sun, 5 Dec 2010 17:14:42 +0800
Subject: [antlr-interest] jar file changes in version 3.3?
Message-ID: <AANLkTinwveWMEOgkX+F98fDf458r8_U-grjX3ECWMYML@mail.gmail.com>

Hi list,

sorry for this newbie question -- but as said in the ANTLR book, I shall
include antlr-3.0.jar, stringtemplate.jar and antlr-2.7.7.jar in the
CLASSPATH, but I cannot find these jar files in antlr-3.3.tar.gz. There is
only an antlr-3.3-complete.jar file in the lib folder. The compiling failed
with only this file in classpath.

Can anybody help on this?

Thanks!
Chao

From bkiers at gmail.com  Sun Dec  5 01:21:44 2010
From: bkiers at gmail.com (Bart Kiers)
Date: Sun, 5 Dec 2010 10:21:44 +0100
Subject: [antlr-interest] jar file changes in version 3.3?
In-Reply-To: <AANLkTinwveWMEOgkX+F98fDf458r8_U-grjX3ECWMYML@mail.gmail.com>
References: <AANLkTinwveWMEOgkX+F98fDf458r8_U-grjX3ECWMYML@mail.gmail.com>
Message-ID: <AANLkTikrt0HEaLAqQRHKOrp_8nyHuoFGOzAcM-a5rGKs@mail.gmail.com>

Hi,

On Sun, Dec 5, 2010 at 10:14 AM, Chao Wang <chaowang05 at gmail.com> wrote:

> only an antlr-3.3-complete.jar file in the lib folder. The compiling failed
> with only this file in classpath.
>

Can you post the stack trace? Can you post the grammar (assuming things go
wrong when generating a lexer/parser...)?

Bart.

From bkiers at gmail.com  Sun Dec  5 02:38:04 2010
From: bkiers at gmail.com (Bart Kiers)
Date: Sun, 5 Dec 2010 11:38:04 +0100
Subject: [antlr-interest] jar file changes in version 3.3?
In-Reply-To: <AANLkTinfhNd849OHeD6pWf7BbC8ee3ibQm0WM2zfHQFj@mail.gmail.com>
References: <AANLkTinwveWMEOgkX+F98fDf458r8_U-grjX3ECWMYML@mail.gmail.com>
	<AANLkTikrt0HEaLAqQRHKOrp_8nyHuoFGOzAcM-a5rGKs@mail.gmail.com>
	<AANLkTinfhNd849OHeD6pWf7BbC8ee3ibQm0WM2zfHQFj@mail.gmail.com>
Message-ID: <AANLkTimf2Nc46Nm+=rsd-L1yRBqyBnB9m52HtyTUdMpg@mail.gmail.com>

On Sun, Dec 5, 2010 at 11:21 AM, Chao Wang <chaowang05 at gmail.com> wrote:

> here is the stack trace:
>
> localhost:output mac$ javac TLexer.java  TParser.java  Test.java
> Test.java:8: cannot find symbol
> symbol  : constructor ANTLRFileStream(java.io.InputStream)
> location: class org.antlr.runtime.ANTLRFileStream
>         TLexer lex = new TLexer(new ANTLRFileStream(System.in));
>                                 ^
> Test.java:11: cannot find symbol
> symbol  : constructor
> TParser(org.antlr.runtime.CommonTokenStream,int,<nulltype>)
> location: class TParser
>         TParser g = new TParser(tokens, 49100, null);
>                     ^
> 2 errors
>
>
The compiler can't find the .class file for the ANTLR runtime. Try:

$ java -cp antlr-3.2.jar org.antlr.Tool T.g
$ javac -cp antlr-3.2.jar *.java
$ java -cp .:antlr-3.2.jar Main


instead.

I tested it with ANTLR 3.2 (the site is down so couldn't download 3.3) with
the following class:

import org.antlr.runtime.*;

public class Main {
    public static void main(String[] args) throws Exception {
        ANTLRStringStream in = new ANTLRStringStream("call f;");
        TLexer lexer = new TLexer(in);
        CommonTokenStream tokens = new CommonTokenStream(lexer);
        TParser parser = new TParser(tokens);
        parser.r();
    }
}


Bart.

From mortenoh at gmail.com  Sun Dec  5 09:09:15 2010
From: mortenoh at gmail.com (Morten Olav Hansen)
Date: Sun, 5 Dec 2010 18:09:15 +0100
Subject: [antlr-interest] Problem with EBNF
Message-ID: <AANLkTinzpgYSw9MF2rxAG8LjiSHuun4sAUTDcJRQBk1S@mail.gmail.com>

Hi!

I have a problem with my EBNF I was hoping for a little help with. I
have a block in my grammar that can contain certain keywords
zero-or-one times, and other keywords zero-or-many times. My current
solution is to enable every keyword to be zero-or-many, and then let
my semantic checker deal with the problem. But I was hoping to solve
it already on the grammar side, if possible.

The basic block looks like this:

	:	'region' ID=Identifier? '{'
			(
				psinitial=psinitialDecl?
				finalstate=finalstateDecl?
				pshistory=pshistoryDecl?
				psdeephistory=psdeephistoryDecl?
				states+=stateDecl*
				transitions+=transitionDecl*
			)
		'}' ';'?

And the only solution I have come up with, is to generate every
possible variant of this grammar, which is quite ugly.

What would be nice, would be something like this:

	:	'region' ID=Identifier? '{'
			(
				psinitial=psinitialDecl?
				finalstate=finalstateDecl?
				pshistory=pshistoryDecl?
				psdeephistory=psdeephistoryDecl?
				states+=stateDecl*
				transitions+=transitionDecl*
			)*
		'}' ';'?

(with * at the end). And for every match to one of the zero-or-one
rule, it would take it "away", so it can not be matched again. But
this does not work.

Any suggestions on how to solve this? If I have to end up with every
possible rule combination, then I would probably be better of just
doing it in the semantic checker as I was doing.

Regards,
Morten

From parrt at cs.usfca.edu  Sun Dec  5 09:50:02 2010
From: parrt at cs.usfca.edu (Terence Parr)
Date: Sun, 5 Dec 2010 09:50:02 -0800
Subject: [antlr-interest] jar file changes in version 3.3?
In-Reply-To: <AANLkTinwveWMEOgkX+F98fDf458r8_U-grjX3ECWMYML@mail.gmail.com>
References: <AANLkTinwveWMEOgkX+F98fDf458r8_U-grjX3ECWMYML@mail.gmail.com>
Message-ID: <6D5DF32D-C7AF-4146-BDD3-252E161CF9EE@cs.usfca.edu>

they are in the antlr-3.3-complete.jar :)
Ter
On Dec 5, 2010, at 1:14 AM, Chao Wang wrote:

> Hi list,
> 
> sorry for this newbie question -- but as said in the ANTLR book, I shall
> include antlr-3.0.jar, stringtemplate.jar and antlr-2.7.7.jar in the
> CLASSPATH, but I cannot find these jar files in antlr-3.3.tar.gz. There is
> only an antlr-3.3-complete.jar file in the lib folder. The compiling failed
> with only this file in classpath.
> 
> Can anybody help on this?
> 
> Thanks!
> Chao
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address


From jeffn at photorepo.com  Sun Dec  5 10:03:24 2010
From: jeffn at photorepo.com (Jeffrey Newman)
Date: Sun, 05 Dec 2010 10:03:24 -0800
Subject: [antlr-interest] I can't get on to www.antlr.org
Message-ID: <1291572204.13885.172.camel@merlin-3.private.photorepo.com>

I'm just starting with Antlr.
Got the Pragmatic book.
This looks great.
When I try to access www.antlr.org it says the site is down for
maintenance. It's been since at least 2:00 AM. I get up real early.

Is there a mirror site or will this site come back in the near future.

thanks

jeffrey
 


From jeffn at photorepo.com  Sun Dec  5 10:26:01 2010
From: jeffn at photorepo.com (Jeffrey Newman)
Date: Sun, 05 Dec 2010 10:26:01 -0800
Subject: [antlr-interest] Trying to run AntlrWorks
Message-ID: <1291573561.13885.178.camel@merlin-3.private.photorepo.com>

Hi,
I found a mirror at github.
In this I found what looks like AntlrWorks source.
I downloaded it, ran ant, and it looked like it built.
I found a jar file in a dist dir.
I typed in java antlrworks-1.4.1
I got:
Exception in thread "main" java.lang.NoClassDefFoundError:
antlrworks-1/4/1
Caused by: java.lang.ClassNotFoundException: antlrworks-1.4.1
        at java.net.URLClassLoader$1.run(URLClassLoader.java:217)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.net.URLClassLoader.findClass(URLClassLoader.java:205)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:319)
        at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:294)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:264)
        at java.lang.ClassLoader.loadClassInternal(ClassLoader.java:332)
Could not find the main class: antlrworks-1.4.1. Program will exit.

I have not done any java programing on Linux.
I use Qt and C++ most of the time.
My last Java was around 1995 (about years ago). It was very slow, and
very large. But things have changed.

Any help would be appreciated to get me going.

thanks

Jeffrey




From mortenoh at gmail.com  Sun Dec  5 10:33:23 2010
From: mortenoh at gmail.com (Morten Olav Hansen)
Date: Sun, 5 Dec 2010 19:33:23 +0100
Subject: [antlr-interest] Trying to run AntlrWorks
In-Reply-To: <1291573561.13885.178.camel@merlin-3.private.photorepo.com>
References: <1291573561.13885.178.camel@merlin-3.private.photorepo.com>
Message-ID: <AANLkTik1HL+0zXQoSMNNCFoMYNE0+ho+QR7KxZzrGi_z@mail.gmail.com>

Hi

Please see instructions on http://antlr.org/works/help/tutorial/howtorun.html

Regards,
Morten

On Sun, Dec 5, 2010 at 7:26 PM, Jeffrey Newman <jeffn at photorepo.com> wrote:
> Hi,
> I found a mirror at github.
> In this I found what looks like AntlrWorks source.
> I downloaded it, ran ant, and it looked like it built.
> I found a jar file in a dist dir.
> I typed in java antlrworks-1.4.1
> I got:
> Exception in thread "main" java.lang.NoClassDefFoundError:
> antlrworks-1/4/1
> Caused by: java.lang.ClassNotFoundException: antlrworks-1.4.1
> ? ? ? ?at java.net.URLClassLoader$1.run(URLClassLoader.java:217)
> ? ? ? ?at java.security.AccessController.doPrivileged(Native Method)
> ? ? ? ?at java.net.URLClassLoader.findClass(URLClassLoader.java:205)
> ? ? ? ?at java.lang.ClassLoader.loadClass(ClassLoader.java:319)
> ? ? ? ?at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:294)
> ? ? ? ?at java.lang.ClassLoader.loadClass(ClassLoader.java:264)
> ? ? ? ?at java.lang.ClassLoader.loadClassInternal(ClassLoader.java:332)
> Could not find the main class: antlrworks-1.4.1. Program will exit.
>
> I have not done any java programing on Linux.
> I use Qt and C++ most of the time.
> My last Java was around 1995 (about years ago). It was very slow, and
> very large. But things have changed.
>
> Any help would be appreciated to get me going.
>
> thanks
>
> Jeffrey
>
>
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>

From quagly at me.com  Sun Dec  5 11:03:17 2010
From: quagly at me.com (Michael West)
Date: Sun, 5 Dec 2010 11:03:17 -0800 (PST)
Subject: [antlr-interest] modified example T.g has no output
Message-ID: <1291575797125-5805707.post@n2.nabble.com>



I modified the an example T.g from the Definitive guide section 9.4 and now
it produces no output.  I only modified the grammar to take multiple
statements.  I did not change the supporting code or input.  Original
grammar from the book works fine and is:

grammar T;
options {output=template;}
s : ID '=' INT ';' -> assign(x={$ID.text},y={$INT.text}) ;
ID: 'a'..'z'+ ;
INT:'0'..'9'+ ;
WS :(' '|'\t'|'\n'|'\r') {skip();} ;

My modified grammar is:

grammar T;
options {output=template;}
s : (stat) + ;
stat : ID '=' INT ';'  -> assign(x={$ID.text},y={$INT.text}) ;
ID: 'a'..'z'+ ;
INT:'0'..'9'+ ;
WS :(' '|'\t'|'\n'|'\r') {skip();} ;

Sample input from the book:
x=101;

What do I need to do to get the same output while supporting multiple
statements?  Why does this produce no output?









-- 
View this message in context: http://antlr.1301665.n2.nabble.com/modified-example-T-g-has-no-output-tp5805707p5805707.html
Sent from the ANTLR mailing list archive at Nabble.com.

From mike at metaorb.com  Sun Dec  5 11:19:53 2010
From: mike at metaorb.com (Mike Allbright)
Date: Sun, 5 Dec 2010 13:19:53 -0600
Subject: [antlr-interest] AST losing leaves in v3.3
Message-ID: <000801cb94b1$65de2290$319a67b0$@com>

With v2.7.7, the AST has all the expected nodes, but with v3.3, the
limit_val nodes get dropped.  Am I overlooking some obvious mistake here?

 

Regards,

--Mike

 

Here's my input:

----------------------

mm-T_minute:bbc-xyzzy

 

And the v3.3 output:

------------------------

(FIELD mm (var T_minute) limits)

 

Here's the grammar

---------------------------

grammar sfield;

 

options

{

  output=AST;

  ASTLabelType=CommonTree;

}

 

tokens

{

  NAME;

  FIELD;

}

               

sfield

               :              field_name '-' var qualifier*          ->
^(FIELD field_name var qualifier*)

               ;              

 

field_name

               :              ID

               ;

 

var

               :              ID           -> ^(NAME["var"] ID)

               ;

               

qualifier

               :              ':' limits ->           ^(limits)

               ;

 

limits

               :              limit_val '-' limit_val         ->
^(NAME["limits"] limit_val+)

               ;

 

limit_val

               :                 ID -> ID

               ;

 

 

ID: (LETTER|'_')(LETTER|'_'|DIGIT)*;

 

fragment LETTER: LOWER | UPPER;

fragment LOWER: 'a'..'z';

fragment UPPER: 'A'..'Z';

fragment DIGIT: '0'..'9';

fragment SPACE: ' ' | '\t';

fragment SIGN: '+' | '-';

NEWLINE: ('\r'? '\n')+ { $channel = HIDDEN; };

WHITESPACE: SPACE+ { $channel = HIDDEN; };

 

OTHER : . ;

 


From cummings at kjchome.homeip.net  Sun Dec  5 12:22:38 2010
From: cummings at kjchome.homeip.net (Kevin J. Cummings)
Date: Sun, 05 Dec 2010 15:22:38 -0500
Subject: [antlr-interest] Problem with EBNF
In-Reply-To: <AANLkTinzpgYSw9MF2rxAG8LjiSHuun4sAUTDcJRQBk1S@mail.gmail.com>
References: <AANLkTinzpgYSw9MF2rxAG8LjiSHuun4sAUTDcJRQBk1S@mail.gmail.com>
Message-ID: <4CFBF48E.3050405@kjchome.homeip.net>

On 12/05/2010 12:09 PM, Morten Olav Hansen wrote:
> Hi!
> 
> I have a problem with my EBNF I was hoping for a little help with. I
> have a block in my grammar that can contain certain keywords
> zero-or-one times, and other keywords zero-or-many times. My current
> solution is to enable every keyword to be zero-or-many, and then let
> my semantic checker deal with the problem. But I was hoping to solve
> it already on the grammar side, if possible.
> 
> The basic block looks like this:
> 
> 	:	'region' ID=Identifier? '{'
> 			(
> 				psinitial=psinitialDecl?
> 				finalstate=finalstateDecl?
> 				pshistory=pshistoryDecl?
> 				psdeephistory=psdeephistoryDecl?
> 				states+=stateDecl*
> 				transitions+=transitionDecl*
> 			)
> 		'}' ';'?

Why doesn't this work for you?  There is an implied ordering here as in:
if finalstateDecl appears, it must be after the psinitialDecl, and
likewise for the rest.  All stateDecls must appear after any
psinitialDecl, finalstateDecl, pshistoryDecl, psdeephistoryDecl, and
before any transitionsDecls, and all transitionDecls mus appear at the
end after everything else.

>From what I can see, the ()'s above are completely optional in your
grammar and only are provided for grouping, which in this case, to me,
seems unnecessary.  Did I miss something?

> And the only solution I have come up with, is to generate every
> possible variant of this grammar, which is quite ugly.
> 
> What would be nice, would be something like this:
> 
> 	:	'region' ID=Identifier? '{'
> 			(
> 				psinitial=psinitialDecl?
> 				finalstate=finalstateDecl?
> 				pshistory=pshistoryDecl?
> 				psdeephistory=psdeephistoryDecl?
> 				states+=stateDecl*
> 				transitions+=transitionDecl*
> 			)*
> 		'}' ';'?

How about this:

	:	'region' ID=identifier? '{'
			(
				psinitial=psinitalDecl
			|	finalstate=finalstateDecl
			|	pshistory-pshistoryDecl
			|	psdeephistory=psdeephistoryDecl
			|	states+=stateDecl
			|	transitions+=transitionDecl
			)*
		'}' ';'?

But this does not enforce the implied ordering of your first example,
and would allow any number of these to appear in any order.

You would also have to keep track of (deal with) whether
psinitial/finalstate/pshistory/psdeephistory appear more than once, and
make sure that your states and transitions collect properly.

> (with * at the end). And for every match to one of the zero-or-one
> rule, it would take it "away", so it can not be matched again. But
> this does not work.

If you move your ? & * from inside the ()'s to outside, you will want to
remove them from the inside.  You could do this, but it will not enforce
the implied ordering that I see in the first example.

> Any suggestions on how to solve this? If I have to end up with every
> possible rule combination, then I would probably be better of just
> doing it in the semantic checker as I was doing.

I don't see any "rule combinations" since the original rule enforces and
ordering to the rules that you probably want to keep....

> Regards,
> Morten

-- 
Kevin J. Cummings
kjchome at rcn.com
cummings at kjchome.homeip.net
cummings at kjc386.framingham.ma.us
Registered Linux User #1232 (http://counter.li.org)

From mortenoh at gmail.com  Sun Dec  5 12:44:37 2010
From: mortenoh at gmail.com (Morten Olav Hansen)
Date: Sun, 5 Dec 2010 21:44:37 +0100
Subject: [antlr-interest] Problem with EBNF
In-Reply-To: <4CFBF48E.3050405@kjchome.homeip.net>
References: <AANLkTinzpgYSw9MF2rxAG8LjiSHuun4sAUTDcJRQBk1S@mail.gmail.com>
	<4CFBF48E.3050405@kjchome.homeip.net>
Message-ID: <AANLkTinQppgaV0NzRTCsU3w_n4b26xdHWF0nQJw+K3NU@mail.gmail.com>

Hi, thanks for your reply.

Sorry if it wasn't clear, but the ordering does not matter.

The rule you proposed is basically what I had before, and as you say,
it allows any number of ps* keywords.

What I meant by "rule combinations" (not sure what else to call them)
is writing out all possible combinations.

(... psinitial=psinitialDecl ... finalstate=finalstateDecl? ...)
(... finalstate=finalstateDecl ... psinitial=psinitialDecl? ...), etc.

But maybe theres no elegant way of doing this. Maybe adding some
region scoped variables would be better, and setting hasInitial, etc,
and doing the check in the grammar.

Regards,
Morten

On Sun, Dec 5, 2010 at 9:22 PM, Kevin J. Cummings
<cummings at kjchome.homeip.net> wrote:
> On 12/05/2010 12:09 PM, Morten Olav Hansen wrote:
>> Hi!
>>
>> I have a problem with my EBNF I was hoping for a little help with. I
>> have a block in my grammar that can contain certain keywords
>> zero-or-one times, and other keywords zero-or-many times. My current
>> solution is to enable every keyword to be zero-or-many, and then let
>> my semantic checker deal with the problem. But I was hoping to solve
>> it already on the grammar side, if possible.
>>
>> The basic block looks like this:
>>
>> ? ? ? : ? ? ? 'region' ID=Identifier? '{'
>> ? ? ? ? ? ? ? ? ? ? ? (
>> ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? psinitial=psinitialDecl?
>> ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? finalstate=finalstateDecl?
>> ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? pshistory=pshistoryDecl?
>> ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? psdeephistory=psdeephistoryDecl?
>> ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? states+=stateDecl*
>> ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? transitions+=transitionDecl*
>> ? ? ? ? ? ? ? ? ? ? ? )
>> ? ? ? ? ? ? ? '}' ';'?
>
> Why doesn't this work for you? ?There is an implied ordering here as in:
> if finalstateDecl appears, it must be after the psinitialDecl, and
> likewise for the rest. ?All stateDecls must appear after any
> psinitialDecl, finalstateDecl, pshistoryDecl, psdeephistoryDecl, and
> before any transitionsDecls, and all transitionDecls mus appear at the
> end after everything else.
>
> >From what I can see, the ()'s above are completely optional in your
> grammar and only are provided for grouping, which in this case, to me,
> seems unnecessary. ?Did I miss something?
>
>> And the only solution I have come up with, is to generate every
>> possible variant of this grammar, which is quite ugly.
>>
>> What would be nice, would be something like this:
>>
>> ? ? ? : ? ? ? 'region' ID=Identifier? '{'
>> ? ? ? ? ? ? ? ? ? ? ? (
>> ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? psinitial=psinitialDecl?
>> ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? finalstate=finalstateDecl?
>> ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? pshistory=pshistoryDecl?
>> ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? psdeephistory=psdeephistoryDecl?
>> ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? states+=stateDecl*
>> ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? transitions+=transitionDecl*
>> ? ? ? ? ? ? ? ? ? ? ? )*
>> ? ? ? ? ? ? ? '}' ';'?
>
> How about this:
>
> ? ? ? ?: ? ? ? 'region' ID=identifier? '{'
> ? ? ? ? ? ? ? ? ? ? ? ?(
> ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?psinitial=psinitalDecl
> ? ? ? ? ? ? ? ? ? ? ? ?| ? ? ? finalstate=finalstateDecl
> ? ? ? ? ? ? ? ? ? ? ? ?| ? ? ? pshistory-pshistoryDecl
> ? ? ? ? ? ? ? ? ? ? ? ?| ? ? ? psdeephistory=psdeephistoryDecl
> ? ? ? ? ? ? ? ? ? ? ? ?| ? ? ? states+=stateDecl
> ? ? ? ? ? ? ? ? ? ? ? ?| ? ? ? transitions+=transitionDecl
> ? ? ? ? ? ? ? ? ? ? ? ?)*
> ? ? ? ? ? ? ? ?'}' ';'?
>
> But this does not enforce the implied ordering of your first example,
> and would allow any number of these to appear in any order.
>
> You would also have to keep track of (deal with) whether
> psinitial/finalstate/pshistory/psdeephistory appear more than once, and
> make sure that your states and transitions collect properly.
>
>> (with * at the end). And for every match to one of the zero-or-one
>> rule, it would take it "away", so it can not be matched again. But
>> this does not work.
>
> If you move your ? & * from inside the ()'s to outside, you will want to
> remove them from the inside. ?You could do this, but it will not enforce
> the implied ordering that I see in the first example.
>
>> Any suggestions on how to solve this? If I have to end up with every
>> possible rule combination, then I would probably be better of just
>> doing it in the semantic checker as I was doing.
>
> I don't see any "rule combinations" since the original rule enforces and
> ordering to the rules that you probably want to keep....
>
>> Regards,
>> Morten
>
> --
> Kevin J. Cummings
> kjchome at rcn.com
> cummings at kjchome.homeip.net
> cummings at kjc386.framingham.ma.us
> Registered Linux User #1232 (http://counter.li.org)
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>

From csharp.2005 at yahoo.com  Sun Dec  5 13:55:04 2010
From: csharp.2005 at yahoo.com (Developer.Net)
Date: Sun, 5 Dec 2010 13:55:04 -0800 (PST)
Subject: [antlr-interest] Printing an AST in a TreeView C#
Message-ID: <997552.64826.qm@web121803.mail.ne1.yahoo.com>

Is there any example of printing an AST in a TreeView in c#?

Thanks


      

From jbb at acm.org  Sun Dec  5 15:17:28 2010
From: jbb at acm.org (John B. Brodie)
Date: Sun, 05 Dec 2010 18:17:28 -0500
Subject: [antlr-interest] Problem with EBNF
In-Reply-To: <AANLkTinQppgaV0NzRTCsU3w_n4b26xdHWF0nQJw+K3NU@mail.gmail.com>
References: <AANLkTinzpgYSw9MF2rxAG8LjiSHuun4sAUTDcJRQBk1S@mail.gmail.com>
	<4CFBF48E.3050405@kjchome.homeip.net>
	<AANLkTinQppgaV0NzRTCsU3w_n4b26xdHWF0nQJw+K3NU@mail.gmail.com>
Message-ID: <1291591048.16102.27.camel@gecko>

Greetings!

On Sun, 2010-12-05 at 21:44 +0100, Morten Olav Hansen wrote:
> Hi, thanks for your reply.
> 
> Sorry if it wasn't clear, but the ordering does not matter.
> 
> The rule you proposed is basically what I had before, and as you say,
> it allows any number of ps* keywords.
> 
> What I meant by "rule combinations" (not sure what else to call them)
> is writing out all possible combinations.
> 
> (... psinitial=psinitialDecl ... finalstate=finalstateDecl? ...)
> (... finalstate=finalstateDecl ... psinitial=psinitialDecl? ...), etc.
> 
> But maybe theres no elegant way of doing this. Maybe adding some
> region scoped variables would be better, and setting hasInitial, etc,
> and doing the check in the grammar.

i think you should not try to do this in the parser, but rather keep
your checking in a separate semantic pass over the AST.

however what you want to do is possible ---- i think, haven't actually
tried it ---- by using Gated Semantic Predicates. not sure what sort of
error messages are produced when using them tho --- a reason to keep a
separate checking pass.

basically use a bunch of flags as you speculate.

something like this (untested):

rule_name_goes_here : 
@init{
    boolean initPresent = false;
    boolean finalPresent = false;
    boolean histPresent = false;
    boolean deepPresent = false;
  }
  'region' ID=identifier? '{' (
        ( { !initPresent }?=> i=psinitialDecl { initPresent=true; } )
      | ( { !finalPresent }?=> f=finalStateDecl { finalPresent=true; } )
      | ( { !histPresent }?=> h=pshistoryDecl { histPresent=true; } )
      | ( { !deepPresent )?=> d=dpsdeephistoryDecl {deepPresent=true;} )
      | s+=stateDecl
      | t+=transitionDecl
    )* '}' ';'?
  ;

notice that there are no ? nor * operators inside the outer ( )* loop. 

the ?'s are unnecessary because the Gated Predicates deal with the zero
or one semantics.

no *'s because a * loop inside another * loop introduces syntactic
ambiguity (e.g. (foo*)* is ambiguous).

hope this helps....
   -jbb


> On Sun, Dec 5, 2010 at 9:22 PM, Kevin J. Cummings
> <cummings at kjchome.homeip.net> wrote:
> > On 12/05/2010 12:09 PM, Morten Olav Hansen wrote:
> >> Hi!
> >>
> >> I have a problem with my EBNF I was hoping for a little help with. I
> >> have a block in my grammar that can contain certain keywords
> >> zero-or-one times, and other keywords zero-or-many times. My current
> >> solution is to enable every keyword to be zero-or-many, and then let
> >> my semantic checker deal with the problem. But I was hoping to solve
> >> it already on the grammar side, if possible.
> >>
> >> The basic block looks like this:
> >>
> >>       :       'region' ID=Identifier? '{'
> >>                       (
> >>                               psinitial=psinitialDecl?
> >>                               finalstate=finalstateDecl?
> >>                               pshistory=pshistoryDecl?
> >>                               psdeephistory=psdeephistoryDecl?
> >>                               states+=stateDecl*
> >>                               transitions+=transitionDecl*
> >>                       )
> >>               '}' ';'?
> >
> > Why doesn't this work for you?  There is an implied ordering here as in:
> > if finalstateDecl appears, it must be after the psinitialDecl, and
> > likewise for the rest.  All stateDecls must appear after any
> > psinitialDecl, finalstateDecl, pshistoryDecl, psdeephistoryDecl, and
> > before any transitionsDecls, and all transitionDecls mus appear at the
> > end after everything else.
> >
> > >From what I can see, the ()'s above are completely optional in your
> > grammar and only are provided for grouping, which in this case, to me,
> > seems unnecessary.  Did I miss something?
> >
> >> And the only solution I have come up with, is to generate every
> >> possible variant of this grammar, which is quite ugly.
> >>
> >> What would be nice, would be something like this:
> >>
> >>       :       'region' ID=Identifier? '{'
> >>                       (
> >>                               psinitial=psinitialDecl?
> >>                               finalstate=finalstateDecl?
> >>                               pshistory=pshistoryDecl?
> >>                               psdeephistory=psdeephistoryDecl?
> >>                               states+=stateDecl*
> >>                               transitions+=transitionDecl*
> >>                       )*
> >>               '}' ';'?
> >
> > How about this:
> >
> >        :       'region' ID=identifier? '{'
> >                        (
> >                                psinitial=psinitalDecl
> >                        |       finalstate=finalstateDecl
> >                        |       pshistory-pshistoryDecl
> >                        |       psdeephistory=psdeephistoryDecl
> >                        |       states+=stateDecl
> >                        |       transitions+=transitionDecl
> >                        )*
> >                '}' ';'?
> >
> > But this does not enforce the implied ordering of your first example,
> > and would allow any number of these to appear in any order.
> >
> > You would also have to keep track of (deal with) whether
> > psinitial/finalstate/pshistory/psdeephistory appear more than once, and
> > make sure that your states and transitions collect properly.
> >
> >> (with * at the end). And for every match to one of the zero-or-one
> >> rule, it would take it "away", so it can not be matched again. But
> >> this does not work.
> >
> > If you move your ? & * from inside the ()'s to outside, you will want to
> > remove them from the inside.  You could do this, but it will not enforce
> > the implied ordering that I see in the first example.
> >
> >> Any suggestions on how to solve this? If I have to end up with every
> >> possible rule combination, then I would probably be better of just
> >> doing it in the semantic checker as I was doing.
> >
> > I don't see any "rule combinations" since the original rule enforces and
> > ordering to the rules that you probably want to keep....
> >



From punch at cse.msu.edu  Sun Dec  5 15:48:48 2010
From: punch at cse.msu.edu (bill punch)
Date: Sun, 05 Dec 2010 18:48:48 -0500
Subject: [antlr-interest] Eval class not found, antlr3.3 on mac
Message-ID: <4CFC24E0.7050209@cse.msu.edu>

Hi. I recently downloaded the ANTLRWorks 1.4.1 bundle for Mac and
installed. I also have a copy of the book, and was going through the
various examples. I got all the way to the tour/trees examples, the
Expr.g portion, and I ran into a problem.

I can create the Lexer and Parser files, but when I try to compile those
files with the provided Test.java, I get an error on the Eval class, namely:

Eval walker = new Eval(nodes); // create a tree parser

The Eval symbol cannot be found. I went and looked through the
associated antlrworks.jar for something like an Eval.class but didn't
find anything. I also have no idea what I'm looking for.

CLASSPATH is properly set (previous examples work), java version is
1.6.0_22. I'm running Snow Leopard, 10.6.5.

Anyone know what I'm doing wrong? I looked for sometime on the web and
the archives and didn't see anything relevant. Thanks for the help.


-- 
      >>>bill<<<


From jeffn at photorepo.com  Sun Dec  5 16:24:35 2010
From: jeffn at photorepo.com (Jeffrey Newman)
Date: Sun, 05 Dec 2010 16:24:35 -0800
Subject: [antlr-interest] AntlrWorks just hangs when trying to step through
	the tutorial..
Message-ID: <1291595075.13885.189.camel@merlin-3.private.photorepo.com>

I'm just learning Antlr and AntlrWorks.
I have downloaded AntlrWorks (I assume antlr came with it).
It comes up. (On Linux 64, with the latest Java from Sun.
I put the java bins in my path. My CLASSPATH is empty.)

I started on the AntlrWorks tutorial.
Below is the grammer, and the events.

When I ran the interpreter, I was able to see a parse tree. Cool.
When I ran the debugger, it hung.
I tried to single step.
Below is as far as I got before it hung.

Can anyone explain why.

Now, back to Terence's book...

thanks

Jeffrey


>From Events.

0
Commence




1
Enter
rule /home/jeffn/Expr.g:prog




2
Location
(15,1)




3
Enter alt 1




4
Location
(15,9)




5
Enter
subrule 1
1





Grammer

rammar Expr;

@header {
package test;
import java.util.HashMap;
}

@lexer::header {package test;}

@members {
/** Map variable name to Integer object holding value */
HashMap memory = new HashMap();
}

prog:   stat+ ;
                
stat:   expr NEWLINE {System.out.println($expr.value);}
    |   ID '=' expr NEWLINE
        {memory.put($ID.text, new Integer($expr.value));}
    |   NEWLINE
    ;

expr returns [int value]
    :   e=multExpr {$value = $e.value;}
        (   '+' e=multExpr {$value += $e.value;}
        |   '-' e=multExpr {$value -= $e.value;}
        )*
    ;

multExpr returns [int value]
    :   e=atom {$value = $e.value;} ('*' e=atom {$value *= $e.value;})*
    ; 

atom returns [int value]
    :   INT {$value = Integer.parseInt($INT.text);}
    |   ID
        {
        Integer v = (Integer)memory.get($ID.text);
        if ( v!=null ) $value = v.intValue();
        else System.err.println("undefined variable "+$ID.text);
        }
    |   '(' e=expr ')' {$value = $e.value;}
    ;

ID  :   ('a'..'z'|'A'..'Z')+ ;
INT :   '0'..'9'+ ;
NEWLINE:'\r'? '\n' ;
WS  :   (' '|'\t')+ {skip();} ;



From parrt at cs.usfca.edu  Sun Dec  5 16:57:43 2010
From: parrt at cs.usfca.edu (Terence Parr)
Date: Sun, 5 Dec 2010 16:57:43 -0800
Subject: [antlr-interest] Eval class not found, antlr3.3 on mac
In-Reply-To: <4CFC24E0.7050209@cse.msu.edu>
References: <4CFC24E0.7050209@cse.msu.edu>
Message-ID: <7EDD693C-5EA8-423B-8F34-1B1C36E29DAA@cs.usfca.edu>

did you run antlr on Eval.g?
Ter
On Dec 5, 2010, at 3:48 PM, bill punch wrote:

> Hi. I recently downloaded the ANTLRWorks 1.4.1 bundle for Mac and
> installed. I also have a copy of the book, and was going through the
> various examples. I got all the way to the tour/trees examples, the
> Expr.g portion, and I ran into a problem.
> 
> I can create the Lexer and Parser files, but when I try to compile those
> files with the provided Test.java, I get an error on the Eval class, namely:
> 
> Eval walker = new Eval(nodes); // create a tree parser
> 
> The Eval symbol cannot be found. I went and looked through the
> associated antlrworks.jar for something like an Eval.class but didn't
> find anything. I also have no idea what I'm looking for.
> 
> CLASSPATH is properly set (previous examples work), java version is
> 1.6.0_22. I'm running Snow Leopard, 10.6.5.
> 
> Anyone know what I'm doing wrong? I looked for sometime on the web and
> the archives and didn't see anything relevant. Thanks for the help.
> 
> 
> -- 
>>>> bill<<<
> 
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address


From parrt at cs.usfca.edu  Sun Dec  5 16:58:39 2010
From: parrt at cs.usfca.edu (Terence Parr)
Date: Sun, 5 Dec 2010 16:58:39 -0800
Subject: [antlr-interest] AntlrWorks just hangs when trying to step
	through the tutorial..
In-Reply-To: <1291595075.13885.189.camel@merlin-3.private.photorepo.com>
References: <1291595075.13885.189.camel@merlin-3.private.photorepo.com>
Message-ID: <FACD5797-84F1-4BC9-A26A-9E1468258223@cs.usfca.edu>

Did you give it some input? did you debug remote?
Ter
On Dec 5, 2010, at 4:24 PM, Jeffrey Newman wrote:

> I'm just learning Antlr and AntlrWorks.
> I have downloaded AntlrWorks (I assume antlr came with it).
> It comes up. (On Linux 64, with the latest Java from Sun.
> I put the java bins in my path. My CLASSPATH is empty.)
> 
> I started on the AntlrWorks tutorial.
> Below is the grammer, and the events.
> 
> When I ran the interpreter, I was able to see a parse tree. Cool.
> When I ran the debugger, it hung.
> I tried to single step.
> Below is as far as I got before it hung.
> 
> Can anyone explain why.
> 
> Now, back to Terence's book...
> 
> thanks
> 
> Jeffrey
> 
> 
>> From Events.
> 
> 0
> Commence
> 
> 
> 
> 
> 1
> Enter
> rule /home/jeffn/Expr.g:prog
> 
> 
> 
> 
> 2
> Location
> (15,1)
> 
> 
> 
> 
> 3
> Enter alt 1
> 
> 
> 
> 
> 4
> Location
> (15,9)
> 
> 
> 
> 
> 5
> Enter
> subrule 1
> 1
> 
> 
> 
> 
> 
> Grammer
> 
> rammar Expr;
> 
> @header {
> package test;
> import java.util.HashMap;
> }
> 
> @lexer::header {package test;}
> 
> @members {
> /** Map variable name to Integer object holding value */
> HashMap memory = new HashMap();
> }
> 
> prog:   stat+ ;
> 
> stat:   expr NEWLINE {System.out.println($expr.value);}
>    |   ID '=' expr NEWLINE
>        {memory.put($ID.text, new Integer($expr.value));}
>    |   NEWLINE
>    ;
> 
> expr returns [int value]
>    :   e=multExpr {$value = $e.value;}
>        (   '+' e=multExpr {$value += $e.value;}
>        |   '-' e=multExpr {$value -= $e.value;}
>        )*
>    ;
> 
> multExpr returns [int value]
>    :   e=atom {$value = $e.value;} ('*' e=atom {$value *= $e.value;})*
>    ; 
> 
> atom returns [int value]
>    :   INT {$value = Integer.parseInt($INT.text);}
>    |   ID
>        {
>        Integer v = (Integer)memory.get($ID.text);
>        if ( v!=null ) $value = v.intValue();
>        else System.err.println("undefined variable "+$ID.text);
>        }
>    |   '(' e=expr ')' {$value = $e.value;}
>    ;
> 
> ID  :   ('a'..'z'|'A'..'Z')+ ;
> INT :   '0'..'9'+ ;
> NEWLINE:'\r'? '\n' ;
> WS  :   (' '|'\t')+ {skip();} ;
> 
> 
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address


From jeffn at photorepo.com  Sun Dec  5 17:13:59 2010
From: jeffn at photorepo.com (Jeffrey Newman)
Date: Sun, 05 Dec 2010 17:13:59 -0800
Subject: [antlr-interest] missing class for QSLite grammer
Message-ID: <1291598039.13885.210.camel@merlin-3.private.photorepo.com>

Hi,
I'm trying to work with a SQLite grammar.
I was able to get the interpreter to give me a parse tree for a simple
create table.
When I tried to run the debugger I got the following errors.

I assume this means I am missing the SqlJetParserException class.
How do I resolve this? I assume that I need to download the class from
the web, place it in a directory, then set my classpath to point to said
directory. Is this correct? And where would I download this beast from?

thanks

Jeffrey




[16:51:19] /home/jeffn/Documents/output/SqlParser.java:375: cannot find
symbol
[16:51:19] symbol  : class SqlJetParserException
[16:51:19] location: class
org.tmatesoft.sqljet.core.internal.lang.SqlParser
[16:51:19]         throw new SqlJetParserException(buffer.toString(),
e);
[16:51:19]                   ^
[16:51:20] /home/jeffn/Documents/output/SqlLexer.java:256: cannot find
symbol
[16:51:20] symbol  : class SqlJetParserException
[16:51:20] location: class
org.tmatesoft.sqljet.core.internal.lang.SqlLexer
[16:51:20]          throw new SqlJetParserException(buffer.toString(),
e);
[16:51:20]                    ^
[16:51:20] Note: /home/jeffn/Documents/output/SqlParser.java uses
unchecked or unsafe operations.
[16:51:20] Note: Recompile with -Xlint:unchecked for details.
[16:51:20] 2 errors


From sharwell at pixelminegames.com  Sun Dec  5 17:31:29 2010
From: sharwell at pixelminegames.com (Sam Harwell)
Date: Sun, 5 Dec 2010 19:31:29 -0600
Subject: [antlr-interest] Printing an AST in a TreeView C#
In-Reply-To: <997552.64826.qm@web121803.mail.ne1.yahoo.com>
References: <997552.64826.qm@web121803.mail.ne1.yahoo.com>
Message-ID: <066501cb94e5$4f110c10$ed332430$@pixelminegames.com>

If you can use WPF, it's dead simple (see attached). :)

-----Original Message-----
From: antlr-interest-bounces at antlr.org
[mailto:antlr-interest-bounces at antlr.org] On Behalf Of Developer.Net
Sent: Sunday, December 05, 2010 3:55 PM
To: antlr-interest at antlr.org
Subject: [antlr-interest] Printing an AST in a TreeView C#

Is there any example of printing an AST in a TreeView in c#?

Thanks

-------------- next part --------------
A non-text attachment was scrubbed...
Name: BaseTreeVisualizerViewControl.zip
Type: application/octet-stream
Size: 937 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20101205/bde758ba/attachment.obj 

From k_sarnath at hcl.com  Mon Dec  6 00:46:19 2010
From: k_sarnath at hcl.com (Sarnath K - ERS, HCLTech)
Date: Mon, 6 Dec 2010 14:16:19 +0530
Subject: [antlr-interest] C Grammar - Symbol Suffix Related..
Message-ID: <B3F91E1013C53E4B9840FEAD0F12BAAD3671B4FDBC@CHN-HCLT-EVS08.HCLT.CORP.HCL.IN>

Hi There! Compiler Gurus!

I have a doubt on the following productions of the C grammar.

If you look at "direct_declarator", it tries to specify a multi-dimensional array (or) a function.
The "*" on the declarator_suffix ensures that multi-dimensional arrays can  be handled.
However "*" does not serve any purpose for functions. We don't declare functions like "f(...)(...)(...)"
Moreover "C" does NOT allow functions to return arrays (int  unsupported()[]);

Any ideas why the grammar is so? I am planning to modify it to suit "C" style correctly - so I can setup the symbol table pretty easily.
Any help? Many Thanks,

"
direct_declarator
        :   (     IDENTIFIER  |  ('(' declarator ')')     )
            (declarator_suffix)*
        ;

declarator_suffix
    :   '[' constant_expression ']'
    |   '[' ']'
    |   '(' parameter_type_list ')'
    |   '(' identifier_list ')'
    |   '(' ')'
    ;
"

Best Regards,
Sarnath

________________________________
::DISCLAIMER::
-----------------------------------------------------------------------------------------------------------------------

The contents of this e-mail and any attachment(s) are confidential and intended for the named recipient(s) only.
It shall not attach any liability on the originator or HCL or its affiliates. Any views or opinions presented in
this email are solely those of the author and may not necessarily reflect the opinions of HCL or its affiliates.
Any form of reproduction, dissemination, copying, disclosure, modification, distribution and / or publication of
this message without the prior written consent of the author of this e-mail is strictly prohibited. If you have
received this email in error please delete it and notify the sender immediately. Before opening any mail and
attachments please check them for viruses and defect.

-----------------------------------------------------------------------------------------------------------------------

From mortenoh at gmail.com  Mon Dec  6 01:31:42 2010
From: mortenoh at gmail.com (Morten Olav Hansen)
Date: Mon, 6 Dec 2010 10:31:42 +0100
Subject: [antlr-interest] Problem with EBNF
In-Reply-To: <1291591048.16102.27.camel@gecko>
References: <AANLkTinzpgYSw9MF2rxAG8LjiSHuun4sAUTDcJRQBk1S@mail.gmail.com>
	<4CFBF48E.3050405@kjchome.homeip.net>
	<AANLkTinQppgaV0NzRTCsU3w_n4b26xdHWF0nQJw+K3NU@mail.gmail.com>
	<1291591048.16102.27.camel@gecko>
Message-ID: <AANLkTimxDrz=-qPgwvoMviXLhB6YAazybG5nqTKOPT-O@mail.gmail.com>

Hi!

Yes, thats basically what i ended up doing.

regionDecl
	scope {
		java.util.Map<String, String> stateMap;
		boolean hasInitial;
		boolean hasFinalState;
		boolean hasHistory;
		boolean hasDeepHistory;
	}
	@init {
		$regionDecl::stateMap = new java.util.LinkedHashMap<String, String>();
		$regionDecl::hasInitial = false;
		$regionDecl::hasFinalState = false;
		$regionDecl::hasHistory = false;
		$regionDecl::hasDeepHistory = false;
	}
	:	'region' ID=Identifier? '{'
			(
					psinitial=psinitialDecl {
						if($regionDecl::hasInitial)
							throw new RuntimeException("Can only have one psinitial in a region.");

						$regionDecl::hasInitial = true;
					}
				|	finalstate=finalstateDecl {
						if($regionDecl::hasFinalState)
							throw new RuntimeException("Can only have one finalstate in a region.");

						$regionDecl::hasFinalState = true;				
					}
				|	pshistory=pshistoryDecl {
						if($regionDecl::hasHistory)
							throw new RuntimeException("Can only have one pshistory in a region.");

						$regionDecl::hasHistory = true;
					}
				|	psdeephistory=psdeephistoryDecl {
						if($regionDecl::hasDeepHistory)
							throw new RuntimeException("Can only have one psdeephistory in
a region.");

						$regionDecl::hasDeepHistory = true;				
					}
				|	states+=stateDecl
				|	transitions+=transitionDecl
			)*
		'}' ';'?

Now I just need to find out how to get the current line, and at what
position in that line the error is (to get a more reasonable error
message), but I'm sure there is some kind of api call for that.

Regards,
Morten

On Mon, Dec 6, 2010 at 12:17 AM, John B. Brodie <jbb at acm.org> wrote:
> Greetings!
>
> On Sun, 2010-12-05 at 21:44 +0100, Morten Olav Hansen wrote:
>> Hi, thanks for your reply.
>>
>> Sorry if it wasn't clear, but the ordering does not matter.
>>
>> The rule you proposed is basically what I had before, and as you say,
>> it allows any number of ps* keywords.
>>
>> What I meant by "rule combinations" (not sure what else to call them)
>> is writing out all possible combinations.
>>
>> (... psinitial=psinitialDecl ... finalstate=finalstateDecl? ...)
>> (... finalstate=finalstateDecl ... psinitial=psinitialDecl? ...), etc.
>>
>> But maybe theres no elegant way of doing this. Maybe adding some
>> region scoped variables would be better, and setting hasInitial, etc,
>> and doing the check in the grammar.
>
> i think you should not try to do this in the parser, but rather keep
> your checking in a separate semantic pass over the AST.
>
> however what you want to do is possible ---- i think, haven't actually
> tried it ---- by using Gated Semantic Predicates. not sure what sort of
> error messages are produced when using them tho --- a reason to keep a
> separate checking pass.
>
> basically use a bunch of flags as you speculate.
>
> something like this (untested):
>
> rule_name_goes_here :
> @init{
> ? ?boolean initPresent = false;
> ? ?boolean finalPresent = false;
> ? ?boolean histPresent = false;
> ? ?boolean deepPresent = false;
> ?}
> ?'region' ID=identifier? '{' (
> ? ? ? ?( { !initPresent }?=> i=psinitialDecl { initPresent=true; } )
> ? ? ?| ( { !finalPresent }?=> f=finalStateDecl { finalPresent=true; } )
> ? ? ?| ( { !histPresent }?=> h=pshistoryDecl { histPresent=true; } )
> ? ? ?| ( { !deepPresent )?=> d=dpsdeephistoryDecl {deepPresent=true;} )
> ? ? ?| s+=stateDecl
> ? ? ?| t+=transitionDecl
> ? ?)* '}' ';'?
> ?;
>
> notice that there are no ? nor * operators inside the outer ( )* loop.
>
> the ?'s are unnecessary because the Gated Predicates deal with the zero
> or one semantics.
>
> no *'s because a * loop inside another * loop introduces syntactic
> ambiguity (e.g. (foo*)* is ambiguous).
>
> hope this helps....
> ? -jbb
>
>
>> On Sun, Dec 5, 2010 at 9:22 PM, Kevin J. Cummings
>> <cummings at kjchome.homeip.net> wrote:
>> > On 12/05/2010 12:09 PM, Morten Olav Hansen wrote:
>> >> Hi!
>> >>
>> >> I have a problem with my EBNF I was hoping for a little help with. I
>> >> have a block in my grammar that can contain certain keywords
>> >> zero-or-one times, and other keywords zero-or-many times. My current
>> >> solution is to enable every keyword to be zero-or-many, and then let
>> >> my semantic checker deal with the problem. But I was hoping to solve
>> >> it already on the grammar side, if possible.
>> >>
>> >> The basic block looks like this:
>> >>
>> >> ? ? ? : ? ? ? 'region' ID=Identifier? '{'
>> >> ? ? ? ? ? ? ? ? ? ? ? (
>> >> ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? psinitial=psinitialDecl?
>> >> ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? finalstate=finalstateDecl?
>> >> ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? pshistory=pshistoryDecl?
>> >> ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? psdeephistory=psdeephistoryDecl?
>> >> ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? states+=stateDecl*
>> >> ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? transitions+=transitionDecl*
>> >> ? ? ? ? ? ? ? ? ? ? ? )
>> >> ? ? ? ? ? ? ? '}' ';'?
>> >
>> > Why doesn't this work for you? ?There is an implied ordering here as in:
>> > if finalstateDecl appears, it must be after the psinitialDecl, and
>> > likewise for the rest. ?All stateDecls must appear after any
>> > psinitialDecl, finalstateDecl, pshistoryDecl, psdeephistoryDecl, and
>> > before any transitionsDecls, and all transitionDecls mus appear at the
>> > end after everything else.
>> >
>> > >From what I can see, the ()'s above are completely optional in your
>> > grammar and only are provided for grouping, which in this case, to me,
>> > seems unnecessary. ?Did I miss something?
>> >
>> >> And the only solution I have come up with, is to generate every
>> >> possible variant of this grammar, which is quite ugly.
>> >>
>> >> What would be nice, would be something like this:
>> >>
>> >> ? ? ? : ? ? ? 'region' ID=Identifier? '{'
>> >> ? ? ? ? ? ? ? ? ? ? ? (
>> >> ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? psinitial=psinitialDecl?
>> >> ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? finalstate=finalstateDecl?
>> >> ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? pshistory=pshistoryDecl?
>> >> ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? psdeephistory=psdeephistoryDecl?
>> >> ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? states+=stateDecl*
>> >> ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? transitions+=transitionDecl*
>> >> ? ? ? ? ? ? ? ? ? ? ? )*
>> >> ? ? ? ? ? ? ? '}' ';'?
>> >
>> > How about this:
>> >
>> > ? ? ? ?: ? ? ? 'region' ID=identifier? '{'
>> > ? ? ? ? ? ? ? ? ? ? ? ?(
>> > ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?psinitial=psinitalDecl
>> > ? ? ? ? ? ? ? ? ? ? ? ?| ? ? ? finalstate=finalstateDecl
>> > ? ? ? ? ? ? ? ? ? ? ? ?| ? ? ? pshistory-pshistoryDecl
>> > ? ? ? ? ? ? ? ? ? ? ? ?| ? ? ? psdeephistory=psdeephistoryDecl
>> > ? ? ? ? ? ? ? ? ? ? ? ?| ? ? ? states+=stateDecl
>> > ? ? ? ? ? ? ? ? ? ? ? ?| ? ? ? transitions+=transitionDecl
>> > ? ? ? ? ? ? ? ? ? ? ? ?)*
>> > ? ? ? ? ? ? ? ?'}' ';'?
>> >
>> > But this does not enforce the implied ordering of your first example,
>> > and would allow any number of these to appear in any order.
>> >
>> > You would also have to keep track of (deal with) whether
>> > psinitial/finalstate/pshistory/psdeephistory appear more than once, and
>> > make sure that your states and transitions collect properly.
>> >
>> >> (with * at the end). And for every match to one of the zero-or-one
>> >> rule, it would take it "away", so it can not be matched again. But
>> >> this does not work.
>> >
>> > If you move your ? & * from inside the ()'s to outside, you will want to
>> > remove them from the inside. ?You could do this, but it will not enforce
>> > the implied ordering that I see in the first example.
>> >
>> >> Any suggestions on how to solve this? If I have to end up with every
>> >> possible rule combination, then I would probably be better of just
>> >> doing it in the semantic checker as I was doing.
>> >
>> > I don't see any "rule combinations" since the original rule enforces and
>> > ordering to the rules that you probably want to keep....
>> >
>
>
>

From mortenoh at gmail.com  Mon Dec  6 02:33:30 2010
From: mortenoh at gmail.com (Morten Olav Hansen)
Date: Mon, 6 Dec 2010 11:33:30 +0100
Subject: [antlr-interest] Problem with EBNF
In-Reply-To: <AANLkTimxDrz=-qPgwvoMviXLhB6YAazybG5nqTKOPT-O@mail.gmail.com>
References: <AANLkTinzpgYSw9MF2rxAG8LjiSHuun4sAUTDcJRQBk1S@mail.gmail.com>
	<4CFBF48E.3050405@kjchome.homeip.net>
	<AANLkTinQppgaV0NzRTCsU3w_n4b26xdHWF0nQJw+K3NU@mail.gmail.com>
	<1291591048.16102.27.camel@gecko>
	<AANLkTimxDrz=-qPgwvoMviXLhB6YAazybG5nqTKOPT-O@mail.gmail.com>
Message-ID: <AANLkTims5G_4FH3VhePAckH72Qd+8YWmr05o62TGqqjx@mail.gmail.com>

I think I understood what you meant now, and has changed it to:

regionDecl
	scope {
		java.util.Map<String, String> stateMap;
		boolean hasInitial;
		boolean hasFinalState;
		boolean hasHistory;
		boolean hasDeepHistory;
	}
	@init {
		$regionDecl::stateMap = new java.util.LinkedHashMap<String, String>();
		$regionDecl::hasInitial = false;
		$regionDecl::hasFinalState = false;
		$regionDecl::hasHistory = false;
		$regionDecl::hasDeepHistory = false;
	}
	:	'region' ID=Identifier? '{'
			(
					{!$regionDecl::hasInitial}? psinitial=psinitialDecl
{$regionDecl::hasInitial = true;}
				|	{!$regionDecl::hasFinalState}? finalstate=finalstateDecl
{$regionDecl::hasFinalState = true;}
				|	{!$regionDecl::hasHistory}? pshistory=pshistoryDecl
{$regionDecl::hasHistory = true;}
				|	{!$regionDecl::hasDeepHistory}? psdeephistory=psdeephistoryDecl
{$regionDecl::hasDeepHistory = true;}
				|	states+=stateDecl
				|	transitions+=transitionDecl
			)*
		'}' ';'?
		-> template(id={createUUID()},
psinitial={$psinitial.st},finalstate={$finalstate.st},
pshistory={$pshistory.st},
					psdeephistory={$psdeephistory.st},	states={$states},
transitions={$transitions}) ""
	;
	catch [FailedPredicateException e] {
		StringBuffer b = new StringBuffer();
		b.append("ERR: Syntax error at line " + e.line + ", at position " +
e.charPositionInLine + ".\n");
		b.append("ERR: Failed predicate: " + e.predicateText + ".");
 			
		System.err.println(b.toString());
		System.exit(-8);
	}

Thanks for your help!

Regards,
Morten

On Mon, Dec 6, 2010 at 10:31 AM, Morten Olav Hansen <mortenoh at gmail.com> wrote:
> Hi!
>
> Yes, thats basically what i ended up doing.
>
> regionDecl
> ? ? ? ?scope {
> ? ? ? ? ? ? ? ?java.util.Map<String, String> stateMap;
> ? ? ? ? ? ? ? ?boolean hasInitial;
> ? ? ? ? ? ? ? ?boolean hasFinalState;
> ? ? ? ? ? ? ? ?boolean hasHistory;
> ? ? ? ? ? ? ? ?boolean hasDeepHistory;
> ? ? ? ?}
> ? ? ? ?@init {
> ? ? ? ? ? ? ? ?$regionDecl::stateMap = new java.util.LinkedHashMap<String, String>();
> ? ? ? ? ? ? ? ?$regionDecl::hasInitial = false;
> ? ? ? ? ? ? ? ?$regionDecl::hasFinalState = false;
> ? ? ? ? ? ? ? ?$regionDecl::hasHistory = false;
> ? ? ? ? ? ? ? ?$regionDecl::hasDeepHistory = false;
> ? ? ? ?}
> ? ? ? ?: ? ? ? 'region' ID=Identifier? '{'
> ? ? ? ? ? ? ? ? ? ? ? ?(
> ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?psinitial=psinitialDecl {
> ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?if($regionDecl::hasInitial)
> ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?throw new RuntimeException("Can only have one psinitial in a region.");
>
> ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?$regionDecl::hasInitial = true;
> ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?}
> ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?| ? ? ? finalstate=finalstateDecl {
> ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?if($regionDecl::hasFinalState)
> ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?throw new RuntimeException("Can only have one finalstate in a region.");
>
> ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?$regionDecl::hasFinalState = true;
> ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?}
> ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?| ? ? ? pshistory=pshistoryDecl {
> ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?if($regionDecl::hasHistory)
> ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?throw new RuntimeException("Can only have one pshistory in a region.");
>
> ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?$regionDecl::hasHistory = true;
> ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?}
> ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?| ? ? ? psdeephistory=psdeephistoryDecl {
> ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?if($regionDecl::hasDeepHistory)
> ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?throw new RuntimeException("Can only have one psdeephistory in
> a region.");
>
> ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?$regionDecl::hasDeepHistory = true;
> ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?}
> ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?| ? ? ? states+=stateDecl
> ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?| ? ? ? transitions+=transitionDecl
> ? ? ? ? ? ? ? ? ? ? ? ?)*
> ? ? ? ? ? ? ? ?'}' ';'?
>
> Now I just need to find out how to get the current line, and at what
> position in that line the error is (to get a more reasonable error
> message), but I'm sure there is some kind of api call for that.
>
> Regards,
> Morten
>
> On Mon, Dec 6, 2010 at 12:17 AM, John B. Brodie <jbb at acm.org> wrote:
>> Greetings!
>>
>> On Sun, 2010-12-05 at 21:44 +0100, Morten Olav Hansen wrote:
>>> Hi, thanks for your reply.
>>>
>>> Sorry if it wasn't clear, but the ordering does not matter.
>>>
>>> The rule you proposed is basically what I had before, and as you say,
>>> it allows any number of ps* keywords.
>>>
>>> What I meant by "rule combinations" (not sure what else to call them)
>>> is writing out all possible combinations.
>>>
>>> (... psinitial=psinitialDecl ... finalstate=finalstateDecl? ...)
>>> (... finalstate=finalstateDecl ... psinitial=psinitialDecl? ...), etc.
>>>
>>> But maybe theres no elegant way of doing this. Maybe adding some
>>> region scoped variables would be better, and setting hasInitial, etc,
>>> and doing the check in the grammar.
>>
>> i think you should not try to do this in the parser, but rather keep
>> your checking in a separate semantic pass over the AST.
>>
>> however what you want to do is possible ---- i think, haven't actually
>> tried it ---- by using Gated Semantic Predicates. not sure what sort of
>> error messages are produced when using them tho --- a reason to keep a
>> separate checking pass.
>>
>> basically use a bunch of flags as you speculate.
>>
>> something like this (untested):
>>
>> rule_name_goes_here :
>> @init{
>> ? ?boolean initPresent = false;
>> ? ?boolean finalPresent = false;
>> ? ?boolean histPresent = false;
>> ? ?boolean deepPresent = false;
>> ?}
>> ?'region' ID=identifier? '{' (
>> ? ? ? ?( { !initPresent }?=> i=psinitialDecl { initPresent=true; } )
>> ? ? ?| ( { !finalPresent }?=> f=finalStateDecl { finalPresent=true; } )
>> ? ? ?| ( { !histPresent }?=> h=pshistoryDecl { histPresent=true; } )
>> ? ? ?| ( { !deepPresent )?=> d=dpsdeephistoryDecl {deepPresent=true;} )
>> ? ? ?| s+=stateDecl
>> ? ? ?| t+=transitionDecl
>> ? ?)* '}' ';'?
>> ?;
>>
>> notice that there are no ? nor * operators inside the outer ( )* loop.
>>
>> the ?'s are unnecessary because the Gated Predicates deal with the zero
>> or one semantics.
>>
>> no *'s because a * loop inside another * loop introduces syntactic
>> ambiguity (e.g. (foo*)* is ambiguous).
>>
>> hope this helps....
>> ? -jbb
>>
>>
>>> On Sun, Dec 5, 2010 at 9:22 PM, Kevin J. Cummings
>>> <cummings at kjchome.homeip.net> wrote:
>>> > On 12/05/2010 12:09 PM, Morten Olav Hansen wrote:
>>> >> Hi!
>>> >>
>>> >> I have a problem with my EBNF I was hoping for a little help with. I
>>> >> have a block in my grammar that can contain certain keywords
>>> >> zero-or-one times, and other keywords zero-or-many times. My current
>>> >> solution is to enable every keyword to be zero-or-many, and then let
>>> >> my semantic checker deal with the problem. But I was hoping to solve
>>> >> it already on the grammar side, if possible.
>>> >>
>>> >> The basic block looks like this:
>>> >>
>>> >> ? ? ? : ? ? ? 'region' ID=Identifier? '{'
>>> >> ? ? ? ? ? ? ? ? ? ? ? (
>>> >> ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? psinitial=psinitialDecl?
>>> >> ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? finalstate=finalstateDecl?
>>> >> ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? pshistory=pshistoryDecl?
>>> >> ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? psdeephistory=psdeephistoryDecl?
>>> >> ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? states+=stateDecl*
>>> >> ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? transitions+=transitionDecl*
>>> >> ? ? ? ? ? ? ? ? ? ? ? )
>>> >> ? ? ? ? ? ? ? '}' ';'?
>>> >
>>> > Why doesn't this work for you? ?There is an implied ordering here as in:
>>> > if finalstateDecl appears, it must be after the psinitialDecl, and
>>> > likewise for the rest. ?All stateDecls must appear after any
>>> > psinitialDecl, finalstateDecl, pshistoryDecl, psdeephistoryDecl, and
>>> > before any transitionsDecls, and all transitionDecls mus appear at the
>>> > end after everything else.
>>> >
>>> > >From what I can see, the ()'s above are completely optional in your
>>> > grammar and only are provided for grouping, which in this case, to me,
>>> > seems unnecessary. ?Did I miss something?
>>> >
>>> >> And the only solution I have come up with, is to generate every
>>> >> possible variant of this grammar, which is quite ugly.
>>> >>
>>> >> What would be nice, would be something like this:
>>> >>
>>> >> ? ? ? : ? ? ? 'region' ID=Identifier? '{'
>>> >> ? ? ? ? ? ? ? ? ? ? ? (
>>> >> ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? psinitial=psinitialDecl?
>>> >> ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? finalstate=finalstateDecl?
>>> >> ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? pshistory=pshistoryDecl?
>>> >> ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? psdeephistory=psdeephistoryDecl?
>>> >> ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? states+=stateDecl*
>>> >> ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? transitions+=transitionDecl*
>>> >> ? ? ? ? ? ? ? ? ? ? ? )*
>>> >> ? ? ? ? ? ? ? '}' ';'?
>>> >
>>> > How about this:
>>> >
>>> > ? ? ? ?: ? ? ? 'region' ID=identifier? '{'
>>> > ? ? ? ? ? ? ? ? ? ? ? ?(
>>> > ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?psinitial=psinitalDecl
>>> > ? ? ? ? ? ? ? ? ? ? ? ?| ? ? ? finalstate=finalstateDecl
>>> > ? ? ? ? ? ? ? ? ? ? ? ?| ? ? ? pshistory-pshistoryDecl
>>> > ? ? ? ? ? ? ? ? ? ? ? ?| ? ? ? psdeephistory=psdeephistoryDecl
>>> > ? ? ? ? ? ? ? ? ? ? ? ?| ? ? ? states+=stateDecl
>>> > ? ? ? ? ? ? ? ? ? ? ? ?| ? ? ? transitions+=transitionDecl
>>> > ? ? ? ? ? ? ? ? ? ? ? ?)*
>>> > ? ? ? ? ? ? ? ?'}' ';'?
>>> >
>>> > But this does not enforce the implied ordering of your first example,
>>> > and would allow any number of these to appear in any order.
>>> >
>>> > You would also have to keep track of (deal with) whether
>>> > psinitial/finalstate/pshistory/psdeephistory appear more than once, and
>>> > make sure that your states and transitions collect properly.
>>> >
>>> >> (with * at the end). And for every match to one of the zero-or-one
>>> >> rule, it would take it "away", so it can not be matched again. But
>>> >> this does not work.
>>> >
>>> > If you move your ? & * from inside the ()'s to outside, you will want to
>>> > remove them from the inside. ?You could do this, but it will not enforce
>>> > the implied ordering that I see in the first example.
>>> >
>>> >> Any suggestions on how to solve this? If I have to end up with every
>>> >> possible rule combination, then I would probably be better of just
>>> >> doing it in the semantic checker as I was doing.
>>> >
>>> > I don't see any "rule combinations" since the original rule enforces and
>>> > ordering to the rules that you probably want to keep....
>>> >
>>
>>
>>
>

From sharwell at pixelminegames.com  Mon Dec  6 06:12:42 2010
From: sharwell at pixelminegames.com (Sam Harwell)
Date: Mon, 6 Dec 2010 08:12:42 -0600
Subject: [antlr-interest] AST losing leaves in v3.3
In-Reply-To: <000801cb94b1$65de2290$319a67b0$@com>
References: <000801cb94b1$65de2290$319a67b0$@com>
Message-ID: <06b201cb954f$a69d41f0$f3d7c5d0$@pixelminegames.com>

The problem you're looking for is your qualifier rule, which should be (in
the rewrite syntax):

qualifier : ':' limits -> limits;

When you write ^(limits), it assumes you want the result of the limits rule
to be the root of your tree. Since the root of the tree can only be a single
node, it discards the children. Hopefully the Tool will get an update that
issues a warning when you use a tree as the root of a rewrite rule.

That said, here are some other comments:

1. The rewrite syntax is slower than the other syntax. The following rules
should be written this way:

qualifier : ':'! limits;
limit_val : ID;

2. To improve the ability to trace tree nodes back to the source, you should
always provide a token when constructing tokens in your AST. This guarantees
proper line/column info for every node in the tree.

var : ID -> ^(NAME[$ID, "var"] ID);
sfield : field_name '-' var qualifier* -> ^(FIELD[$field_name] field_name
var qualifier*);
limits : first=limit_var '-' second=limit_val -> ^(NAME[$first, "limits"]
$first $second);

-----Original Message-----
From: antlr-interest-bounces at antlr.org
[mailto:antlr-interest-bounces at antlr.org] On Behalf Of Mike Allbright
Sent: Sunday, December 05, 2010 1:20 PM
To: antlr-interest at antlr.org
Subject: [antlr-interest] AST losing leaves in v3.3

With v2.7.7, the AST has all the expected nodes, but with v3.3, the
limit_val nodes get dropped.  Am I overlooking some obvious mistake here?


Regards,
--Mike
 
Here's my input:
----------------------
mm-T_minute:bbc-xyzzy
 
And the v3.3 output:
------------------------
(FIELD mm (var T_minute) limits)
 
Here's the grammar
---------------------------
grammar sfield;
 
options { output=AST; ASTLabelType=CommonTree; }
tokens { NAME; FIELD; }
               
sfield : field_name '-' var qualifier* -> ^(FIELD field_name var qualifier*)
; 
field_name : ID;
var : ID -> ^(NAME["var"] ID);
qualifier : ':' limits -> ^(limits);
limits : limit_val '-' limit_val -> ^(NAME["limits"] limit_val+);
limit_val : ID -> ID;
 
ID: (LETTER|'_')(LETTER|'_'|DIGIT)*;
 
fragment LETTER: LOWER | UPPER;
fragment LOWER: 'a'..'z';
fragment UPPER: 'A'..'Z';
fragment DIGIT: '0'..'9';
fragment SPACE: ' ' | '\t';
fragment SIGN: '+' | '-';
NEWLINE: ('\r'? '\n')+ { $channel = HIDDEN; };
WHITESPACE: SPACE+ { $channel = HIDDEN; };
 
OTHER : . ;


From lottvomschlott at gmx.de  Mon Dec  6 09:20:38 2010
From: lottvomschlott at gmx.de (Markus Lottmann)
Date: Mon, 06 Dec 2010 18:20:38 +0100
Subject: [antlr-interest] The following alternatives can never be matched
Message-ID: <4CFD1B66.3020002@gmx.de>

Hi,

i am quite new to antlr and dont understand whats wrong with the 
following grammar:

grammar test2;
options{
backtrack=false;
}
octal_literal
     :    '0' octal_digit*;

octal_digit
     :    '0'..'7';

The error is:

[18:17:06] warning(200): test2.g:6:8: Decision can match input such as 
"EOF" using multiple alternatives: 1, 2
As a result, alternative(s) 2 were disabled for that input
[18:17:06] error(201): test2.g:6:8: The following alternatives can never 
be matched: 2

Thanks so far.
Greetings,
ML

From ronburk at gmail.com  Mon Dec  6 09:25:01 2010
From: ronburk at gmail.com (Ron Burk)
Date: Mon, 6 Dec 2010 09:25:01 -0800
Subject: [antlr-interest] C Grammar - Symbol Suffix Related..
In-Reply-To: <B3F91E1013C53E4B9840FEAD0F12BAAD3671B4FDBC@CHN-HCLT-EVS08.HCLT.CORP.HCL.IN>
References: <B3F91E1013C53E4B9840FEAD0F12BAAD3671B4FDBC@CHN-HCLT-EVS08.HCLT.CORP.HCL.IN>
Message-ID: <AANLkTimx2h3X902t8hNjy_LgNWf+EGaBECyTjhOHibv_@mail.gmail.com>

> I have a doubt on the following productions of the C grammar.
What version of C are you shooting for?

> Any ideas why the grammar is so?

Maybe it's just reproducing a specification grammar? For example,
in the C99 spec, section A.2.2, the 6.75 construct is:

direct-declarator:
    identifier
    ( declarator )
    direct-declarator [ type-qualifier-list.opt assignment-expression.opt ]
          ...
    direct-declarator ( parameter-type-list )
    direct-declarator ( identifier-list.opt )

Transforming that to ANTLR would look pretty much like what you
posted. (Ironically, if ANTLR simply automatically performed the
transformations for direct left recursion and left factoring, a shocking
percentage of the C99 language spec would slide through unchanged
as LL(1).)

Not all constraints can (or should) be implemented via grammar
syntax, as the people who worked on the C language knew.
In fact, I speculate that tools like ANTLR, by offering ever-expanding
feature sets, result in less and less readable grammars, as the
everything-looks-like-a-nail syndrome causes people to try to cram
every constraint into the grammar, foregoing more modular,
understandable, and functional divisions of labor.

So, for example, given a construct like:

int foo(int a)(int b);

Visual C++ says:

error C2091: function returns function

A highly readable and to the point error message. I suspect that if
they instead had tried to contort their grammar to reflect every
constraint under the sun, the message would have come out more
like "Unexpected left parenthesis after parameter declaration list."
I know which I prefer (and I also prefer the ability to directly match
a syntactically plausible but semantically erroneous construct so
that there's no need to rely on "error recovery" mechanisms to
guess where to continue the parse).

 IMHO :-).

From cummings at kjchome.homeip.net  Mon Dec  6 09:31:21 2010
From: cummings at kjchome.homeip.net (Kevin J. Cummings)
Date: Mon, 06 Dec 2010 12:31:21 -0500
Subject: [antlr-interest] The following alternatives can never be matched
In-Reply-To: <4CFD1B66.3020002@gmx.de>
References: <4CFD1B66.3020002@gmx.de>
Message-ID: <4CFD1DE9.3050708@kjchome.homeip.net>

On 12/06/2010 12:20 PM, Markus Lottmann wrote:
> Hi,
> 
> i am quite new to antlr and dont understand whats wrong with the 
> following grammar:
> 
> grammar test2;
> options{
> backtrack=false;
> }
> octal_literal
>      :    '0' octal_digit*;
> 
> octal_digit
>      :    '0'..'7';
> 
> The error is:
> 
> [18:17:06] warning(200): test2.g:6:8: Decision can match input such as 
> "EOF" using multiple alternatives: 1, 2
> As a result, alternative(s) 2 were disabled for that input
> [18:17:06] error(201): test2.g:6:8: The following alternatives can never 
> be matched: 2

To begin with, octal_literal and octal_digit are parser rules and not
token rules?  This means that (assuming you discard whitespace) that the
strings "0 1 2 3" and "0123" are both valid octal_literals.

Did you mean to write:

octal_literal : '0' octal_digit+ ;

Is the character '0' an octal_digit or the beginning of an
octal_literal?  To me, this is ambiguous as to which you want.

OCTAL_LITERAL : '0' OCTAL_DIGIT+
              ;

fragment
OCTAL_DIGIT   : '0' .. '7'
              ;

Might be closer to what you intend here.

> Thanks so far.
> Greetings,
> ML

-- 
Kevin J. Cummings
kjchome at rcn.com
cummings at kjchome.homeip.net
cummings at kjc386.framingham.ma.us
Registered Linux User #1232 (http://counter.li.org)

From blreynolds4 at gmail.com  Mon Dec  6 10:20:35 2010
From: blreynolds4 at gmail.com (Brian Reynolds)
Date: Mon, 6 Dec 2010 13:20:35 -0500
Subject: [antlr-interest] XML XSD from grammar?
Message-ID: <AANLkTikoH9NoE-ngRZaoC6rnREjN9SyPTHb_GmamrTES@mail.gmail.com>

Hello

I have an antlr grammar for a problem reporting format and we'd like to use
the DSL moving forward.  However there are clients who would like to report
the problems in XML.  Is there a way to generate an XSD from my grammar?

I'd like the format to live in one place (antlr) but be able to receive
documents in either xml or the raw dsl.  Is this just a bad idea?

thanks
bri

From maxgbr at hotmail.it  Mon Dec  6 12:19:19 2010
From: maxgbr at hotmail.it (Massimiliano Donini)
Date: Mon, 6 Dec 2010 21:19:19 +0100
Subject: [antlr-interest] Error Handling
Message-ID: <BLU0-SMTP182310E076FFC4C920D0C69B02B0@phx.gbl>


  Hi, i have some question about error handling.
Giving a look at the string template used for generate source code (i'm 
using CSharp2/3 as target language)
i see that every parser rule is coded in a try catch finally block, so i 
woul like to know what is the best way to catch error.
Looking at antlr FAQ (http://www.antlr.org/wiki/label/ANTLR3/faq_errors) 
i found only an V4 java example.
I get error with a custom implementation of TextWriter assigned to 
MyParserInstance.TraceDestination, but i want to know what is the better 
way to error handlig.
Tanks in advice.
Regards Max

From quagly at me.com  Mon Dec  6 19:46:29 2010
From: quagly at me.com (Michael West)
Date: Mon, 6 Dec 2010 19:46:29 -0800 (PST)
Subject: [antlr-interest] modified example T.g has no output
In-Reply-To: <1291575797125-5805707.post@n2.nabble.com>
References: <1291575797125-5805707.post@n2.nabble.com>
Message-ID: <1291693589078-5810377.post@n2.nabble.com>


After looking through the books again and this article:

http://www.antlr.org/wiki/display/ST/Language+Translation+Using+ANTLR+and+StringTemplate

I understand that I need to somehow pass the assign template back up the
call stack so that when the entry point 's' is called it returns something. 
I have not been able to determine how to implement that.  

>From the article:
The general strategy then for the translator is to have every rule return a
StringTemplate representing the appropriately translated text. The return
value of the start rule will be the entire translation. The main program
will call the start rule, program, and print out the return value:

Can you help me get started with this?  
-- 
View this message in context: http://antlr.1301665.n2.nabble.com/modified-example-T-g-has-no-output-tp5805707p5810377.html
Sent from the ANTLR mailing list archive at Nabble.com.

From k_sarnath at hcl.com  Mon Dec  6 20:19:17 2010
From: k_sarnath at hcl.com (Sarnath K - ERS, HCLTech)
Date: Tue, 7 Dec 2010 09:49:17 +0530
Subject: [antlr-interest] C Grammar - Symbol Suffix Related..
In-Reply-To: <AANLkTimx2h3X902t8hNjy_LgNWf+EGaBECyTjhOHibv_@mail.gmail.com>
References: <B3F91E1013C53E4B9840FEAD0F12BAAD3671B4FDBC@CHN-HCLT-EVS08.HCLT.CORP.HCL.IN>
	<AANLkTimx2h3X902t8hNjy_LgNWf+EGaBECyTjhOHibv_@mail.gmail.com>
Message-ID: <B3F91E1013C53E4B9840FEAD0F12BAAD3671B5005B@CHN-HCLT-EVS08.HCLT.CORP.HCL.IN>

Thanks a lot Ron! I think I have understood the essence of it.

Interestingly, I had earlier tried such a function declaration in C and got the same error message - which is very readable.
I think I can get such a good error message working with the original ANTLR grammar. Thanks for pointing out!

www.cdecl.org was very helpful to me in understanding complex C declarations - just in case, if any1 is looking for.

Best Regards, Sarnath
-----Original Message-----
From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-bounces at antlr.org] On Behalf Of Ron Burk
Sent: Monday, December 06, 2010 10:55 PM
Cc: antlr-interest at antlr.org
Subject: Re: [antlr-interest] C Grammar - Symbol Suffix Related..

> I have a doubt on the following productions of the C grammar.
What version of C are you shooting for?

> Any ideas why the grammar is so?

Maybe it's just reproducing a specification grammar? For example,
in the C99 spec, section A.2.2, the 6.75 construct is:

direct-declarator:
    identifier
    ( declarator )
    direct-declarator [ type-qualifier-list.opt assignment-expression.opt ]
          ...
    direct-declarator ( parameter-type-list )
    direct-declarator ( identifier-list.opt )

Transforming that to ANTLR would look pretty much like what you
posted. (Ironically, if ANTLR simply automatically performed the
transformations for direct left recursion and left factoring, a shocking
percentage of the C99 language spec would slide through unchanged
as LL(1).)

Not all constraints can (or should) be implemented via grammar
syntax, as the people who worked on the C language knew.
In fact, I speculate that tools like ANTLR, by offering ever-expanding
feature sets, result in less and less readable grammars, as the
everything-looks-like-a-nail syndrome causes people to try to cram
every constraint into the grammar, foregoing more modular,
understandable, and functional divisions of labor.

So, for example, given a construct like:

int foo(int a)(int b);

Visual C++ says:

error C2091: function returns function

A highly readable and to the point error message. I suspect that if
they instead had tried to contort their grammar to reflect every
constraint under the sun, the message would have come out more
like "Unexpected left parenthesis after parameter declaration list."
I know which I prefer (and I also prefer the ability to directly match
a syntactically plausible but semantically erroneous construct so
that there's no need to rely on "error recovery" mechanisms to
guess where to continue the parse).

 IMHO :-).

List: http://www.antlr.org/mailman/listinfo/antlr-interest
Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address

::DISCLAIMER::
-----------------------------------------------------------------------------------------------------------------------

The contents of this e-mail and any attachment(s) are confidential and intended for the named recipient(s) only.
It shall not attach any liability on the originator or HCL or its affiliates. Any views or opinions presented in
this email are solely those of the author and may not necessarily reflect the opinions of HCL or its affiliates.
Any form of reproduction, dissemination, copying, disclosure, modification, distribution and / or publication of
this message without the prior written consent of the author of this e-mail is strictly prohibited. If you have
received this email in error please delete it and notify the sender immediately. Before opening any mail and
attachments please check them for viruses and defect.

-----------------------------------------------------------------------------------------------------------------------


From Jean-Claude.Durand at imag.fr  Tue Dec  7 00:59:44 2010
From: Jean-Claude.Durand at imag.fr (Jean-Claude Durand)
Date: Tue, 7 Dec 2010 11:59:44 +0300
Subject: [antlr-interest] '.dot' files of rules' diagrams
Message-ID: <DE9DAAEC-BD64-4E3E-86DD-C1151497FFB7@imag.fr>

To achieve the documentation of my grammars, I would like to retrieve the '.dot' files generated by ANTLRWorks
for rules diagrams. Is it possible ?

Thanks a lot for your answer.

Jean-Claude Durand

LIG, ?quipe GETALP
385, rue de la Biblioth?que
BP 53
38041 Grenoble cedex 9
France


From jeffn at photorepo.com  Tue Dec  7 04:28:40 2010
From: jeffn at photorepo.com (Jeffrey Newman)
Date: Tue, 07 Dec 2010 04:28:40 -0800
Subject: [antlr-interest] Antlr Works debugger hangs on Linux (and Windows)
Message-ID: <1291724920.13885.223.camel@merlin-3.private.photorepo.com>

I'm trying to get Antlr works debugger to work with a simple test
grammer. I'm working on Linux (Suse 11.2).

I get a few steps into the debugger.
and then AntlrWorks hangs.

The linux console shows:
jeffn at merlin-3:/opt/antlr> ./antlrworks
java.lang.NullPointerException
java.lang.NullPointerException
        at
org.antlr.runtime.debug.RemoteDebugEventSocketListener.dispatch(RemoteDebugEventSocketListener.java:275)
        at
org.antlr.runtime.debug.RemoteDebugEventSocketListener.eventHandler(RemoteDebugEventSocketListener.java:176)
        at
org.antlr.runtime.debug.RemoteDebugEventSocketListener.run(RemoteDebugEventSocketListener.java:472)
        at java.lang.Thread.run(Thread.java:662)

So, this looks like a NULL Pointer.
Any suggestions about what I can do to use the Antlrworks debugger?

Any help would really be appreciated.
I've tried to bring this up Windows, and I have a similar problem.

thanks in advance 

Jeffrey


Following is from the events tab.
0
Commence




1
Enter
rule /home/jeffn/tmp/antlr-book/chap-3/Expr.g:prog




2
Location
(6,1)




3
Enter alt 1




4
Location
(6,8)




5
Enter
subrule 1
1




Grammar:


grammar Expr;

prog	:	stat+ ;

stat	:	expr NEWLINE
	|	ID '=' NEWLINE
	|	NEWLINE
	;
	
expr	:	multExpr (('+' | '-') multExpr)*
	;
	
multExpr
	:	atom ('*' atom)*
	;
	
atom	:	INT
	|	ID
	|	'(' expr ')'
	;
	
ID	:	('a'..'z' | 'A'.. 'Z')+ ;
INT	:	'0'..'9'+ ;
NEWLINE :	'\r'? '\n' ;
WS	:	(' ' | '\t' | '\n' | '\r')+  {skip();} ;
		






From jeffn at photorepo.com  Tue Dec  7 07:33:30 2010
From: jeffn at photorepo.com (Jeffrey Newman)
Date: Tue, 07 Dec 2010 07:33:30 -0800
Subject: [antlr-interest] Antlr Works debugger hangs on Linux (and
 Windows)
In-Reply-To: <1291735822.13885.227.camel@merlin-3.private.photorepo.com>
References: <1291724920.13885.223.camel@merlin-3.private.photorepo.com>
	<1291735822.13885.227.camel@merlin-3.private.photorepo.com>
Message-ID: <1291736010.13885.228.camel@merlin-3.private.photorepo.com>

On Tue, 2010-12-07 at 07:30 -0800, Jeffrey Newman wrote:
> I think I have solved the problem.
> Sorry for the noise on the mailing list.
> What I found was the following.
> 
> On Suse 11.2 you must remove the exisiting antlr with Yaste.
> Then copy the antler works jar and antlr complete jar to favorite place.
> Then download the latest java jdk.
> Set up the path to include the java binaries,
> Set the class path to the antlr complete jar.
> Then use the T.g file for test.
> This seems to have actions. And it seems that Antlr works just hangs
> when running the debugger on the expr.g sample file.
> 
> So, both Linux and Windows now show something with the T.g, and back to
> my studies.
> 
> Jeffrey
> 
> On Tue, 2010-12-07 at 04:28 -0800, Jeffrey Newman wrote:
> > I'm trying to get Antlr works debugger to work with a simple test
> > grammer. I'm working on Linux (Suse 11.2).
> > 
> > I get a few steps into the debugger.
> > and then AntlrWorks hangs.
> > 
> > The linux console shows:
> > jeffn at merlin-3:/opt/antlr> ./antlrworks
> > java.lang.NullPointerException
> > java.lang.NullPointerException
> >         at
> > org.antlr.runtime.debug.RemoteDebugEventSocketListener.dispatch(RemoteDebugEventSocketListener.java:275)
> >         at
> > org.antlr.runtime.debug.RemoteDebugEventSocketListener.eventHandler(RemoteDebugEventSocketListener.java:176)
> >         at
> > org.antlr.runtime.debug.RemoteDebugEventSocketListener.run(RemoteDebugEventSocketListener.java:472)
> >         at java.lang.Thread.run(Thread.java:662)
> > 
> > So, this looks like a NULL Pointer.
> > Any suggestions about what I can do to use the Antlrworks debugger?
> > 
> > Any help would really be appreciated.
> > I've tried to bring this up Windows, and I have a similar problem.
> > 
> > thanks in advance 
> > 
> > Jeffrey
> > 
> > 
> > Following is from the events tab.
> > 0
> > Commence
> > 
> > 
> > 
> > 
> > 1
> > Enter
> > rule /home/jeffn/tmp/antlr-book/chap-3/Expr.g:prog
> > 
> > 
> > 
> > 
> > 2
> > Location
> > (6,1)
> > 
> > 
> > 
> > 
> > 3
> > Enter alt 1
> > 
> > 
> > 
> > 
> > 4
> > Location
> > (6,8)
> > 
> > 
> > 
> > 
> > 5
> > Enter
> > subrule 1
> > 1
> > 
> > 
> > 
> > 
> > Grammar:
> > 
> > 
> > grammar Expr;
> > 
> > prog	:	stat+ ;
> > 
> > stat	:	expr NEWLINE
> > 	|	ID '=' NEWLINE
> > 	|	NEWLINE
> > 	;
> > 	
> > expr	:	multExpr (('+' | '-') multExpr)*
> > 	;
> > 	
> > multExpr
> > 	:	atom ('*' atom)*
> > 	;
> > 	
> > atom	:	INT
> > 	|	ID
> > 	|	'(' expr ')'
> > 	;
> > 	
> > ID	:	('a'..'z' | 'A'.. 'Z')+ ;
> > INT	:	'0'..'9'+ ;
> > NEWLINE :	'\r'? '\n' ;
> > WS	:	(' ' | '\t' | '\n' | '\r')+  {skip();} ;
> > 		
> > 
> > 
> > 
> > 
> > 
> > 
> > List: http://www.antlr.org/mailman/listinfo/antlr-interest
> > Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
> 
> 



From jimi at temporal-wave.com  Tue Dec  7 08:19:53 2010
From: jimi at temporal-wave.com (Jim Idle)
Date: Tue, 7 Dec 2010 08:19:53 -0800
Subject: [antlr-interest] '.dot' files of rules' diagrams
In-Reply-To: <DE9DAAEC-BD64-4E3E-86DD-C1151497FFB7@imag.fr>
References: <DE9DAAEC-BD64-4E3E-86DD-C1151497FFB7@imag.fr>
Message-ID: <05d701cb962a$946b1670$bd414350$@temporal-wave.com>

There is a method that does this for you on a tree. Look for the class
DOTTreeGenerator in package org.antlr.runtime.tree 

Jim

> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of Jean-Claude Durand
> Sent: Tuesday, December 07, 2010 1:00 AM
> To: antlr-interest at antlr.org
> Subject: [antlr-interest] '.dot' files of rules' diagrams
> 
> To achieve the documentation of my grammars, I would like to retrieve
> the '.dot' files generated by ANTLRWorks for rules diagrams. Is it
> possible ?
> 
> Thanks a lot for your answer.
> 
> Jean-Claude Durand
> 
> LIG, ?quipe GETALP
> 385, rue de la Biblioth?que
> BP 53
> 38041 Grenoble cedex 9
> France
> 
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
> email-address


From mike at metaorb.com  Tue Dec  7 09:57:03 2010
From: mike at metaorb.com (Mike Allbright)
Date: Tue, 7 Dec 2010 11:57:03 -0600
Subject: [antlr-interest] Stable Releases
Message-ID: <000001cb9638$285c8c80$7915a580$@com>

ANTLRWorks 1.4.1 just doesn't seem to want to debug for me, but v1.4 seems
to work just fine.

 

With ANTLR v3.3 just out, is there an earlier set of ANTLR/AW/ST versions
that users should consider to be "stable"?

 

Thanks,

--Mike

 

Mike Allbright

mike at metaorb.com

(972) 896-7070

 


From parrt at cs.usfca.edu  Tue Dec  7 11:55:19 2010
From: parrt at cs.usfca.edu (Terence Parr)
Date: Tue, 7 Dec 2010 11:55:19 -0800
Subject: [antlr-interest] Stable Releases
In-Reply-To: <000001cb9638$285c8c80$7915a580$@com>
References: <000001cb9638$285c8c80$7915a580$@com>
Message-ID: <1112769A-93DF-40DA-8886-A45935AC529A@cs.usfca.edu>

hi. added link on /works page to

http://antlr.org/download

Ter
On Dec 7, 2010, at 9:57 AM, Mike Allbright wrote:

> ANTLRWorks 1.4.1 just doesn't seem to want to debug for me, but v1.4 seems
> to work just fine.
> 
> 
> 
> With ANTLR v3.3 just out, is there an earlier set of ANTLR/AW/ST versions
> that users should consider to be "stable"?
> 
> 
> 
> Thanks,
> 
> --Mike
> 
> 
> 
> Mike Allbright
> 
> mike at metaorb.com
> 
> (972) 896-7070
> 
> 
> 
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address


From conan at irconan.co.uk  Tue Dec  7 14:51:04 2010
From: conan at irconan.co.uk (Richard Connon)
Date: Tue, 07 Dec 2010 22:51:04 +0000
Subject: [antlr-interest] Navigate the C target AST
Message-ID: <4CFEBA58.5050702@irconan.co.uk>

Hi. I'm trying to navigate the AST built using the ANTLR3 C target.

I'm wondering how the token information is stored in the tree nodes. It 
seems there are two types of tree nodes. ANTLR3_BASE_TREE and 
ANTLR3_COMMON_TREE and I can set my grammar to produce the AST with 
either one.

The documentation suggests that an ANTLR3_BASE_TREE has no token 
information yet it contains a pointer to the getToken(ANTLR3_BASE_TREE) 
function. Can anyone clarify this?

I've been trying out each type to try and work it out.

getToken(ANTLR3_BASE_TREE) on the ANTLR3_BASE_TREE seems to return 0x0 
which would support what the docs say about it having no token "payload" 
but then why does this function exist.

When using ANTLR3_COMMON_TREE instead since I assumed this to be the 
solution, the token member of the struct is also 0x0
Finally doing commonTree->baseTree.getToken(&commonTree->basetree) as a 
last resort caused the program to segfault in dupTree()

All in all I'm a bit confused about where the "content" of the AST 
actually lies.

From jimi at temporal-wave.com  Tue Dec  7 15:26:59 2010
From: jimi at temporal-wave.com (Jim Idle)
Date: Tue, 7 Dec 2010 15:26:59 -0800
Subject: [antlr-interest] Navigate the C target AST
In-Reply-To: <4CFEBA58.5050702@irconan.co.uk>
References: <4CFEBA58.5050702@irconan.co.uk>
Message-ID: <00cd01cb9666$3eea1570$bcbe4050$@temporal-wave.com>

Use the super pointer in the ANTLR3_BASE_TREE and cast it to
pANTLR3_COMMON_TREE. The getToken returns the BASE_TOKEN, which  has a
super, which is casy to COMMON_TOKEN.

Check: makeDot in basetreeadaptor for some examples.

You can only get tokens for nodes that have them of course.

Jim

> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of Richard Connon
> Sent: Tuesday, December 07, 2010 2:51 PM
> To: antlr-interest at antlr.org
> Subject: [antlr-interest] Navigate the C target AST
> 
> Hi. I'm trying to navigate the AST built using the ANTLR3 C target.
> 
> I'm wondering how the token information is stored in the tree nodes. It
> seems there are two types of tree nodes. ANTLR3_BASE_TREE and
> ANTLR3_COMMON_TREE and I can set my grammar to produce the AST with
> either one.
> 
> The documentation suggests that an ANTLR3_BASE_TREE has no token
> information yet it contains a pointer to the getToken(ANTLR3_BASE_TREE)
> function. Can anyone clarify this?
> 
> I've been trying out each type to try and work it out.
> 
> getToken(ANTLR3_BASE_TREE) on the ANTLR3_BASE_TREE seems to return 0x0
> which would support what the docs say about it having no token
> "payload"
> but then why does this function exist.
> 
> When using ANTLR3_COMMON_TREE instead since I assumed this to be the
> solution, the token member of the struct is also 0x0 Finally doing
> commonTree->baseTree.getToken(&commonTree->basetree) as a last resort
> caused the program to segfault in dupTree()
> 
> All in all I'm a bit confused about where the "content" of the AST
> actually lies.
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
> email-address


From jimi at temporal-wave.com  Tue Dec  7 16:39:54 2010
From: jimi at temporal-wave.com (Jim Idle)
Date: Tue, 7 Dec 2010 16:39:54 -0800
Subject: [antlr-interest] Navigate the C target AST
In-Reply-To: <4CFEC3CF.2090705@irconan.co.uk>
References: <4CFEBA58.5050702@irconan.co.uk>
	<00cd01cb9666$3eea1570$bcbe4050$@temporal-wave.com>
	<4CFEC3CF.2090705@irconan.co.uk>
Message-ID: <00db01cb9670$6e7647a0$4b62d6e0$@temporal-wave.com>

Yes - do not use ASTLabelType, you want the default BASE_TREE

Jim

> -----Original Message-----
> From: Richard Connon [mailto:conan at irconan.co.uk]
> Sent: Tuesday, December 07, 2010 3:31 PM
> To: Jim Idle
> Subject: Re: [antlr-interest] Navigate the C target AST
> 
> On 07/12/10 23:26, Jim Idle wrote:
> > Use the super pointer in the ANTLR3_BASE_TREE and cast it to
> > pANTLR3_COMMON_TREE.
> 
> Is that different to setting
> ASTLabelType = pANTLR3_COMMON_TREE;
> and using the COMMON_TREE provided?
> 
> > The getToken returns the BASE_TOKEN, which  has a super, which is
> casy
> > to COMMON_TOKEN.
> 
> every time I've run getToken so far it's returned 0x0 so casting it
> would hardly help...

When you are doing it correctly, it will.

> 
> > Check: makeDot in basetreeadaptor for some examples.

Again, check that function in the source, but this time do not use
generating options. Get the function to work for you

nodes	= antlr3CommonTreeNodeStreamNewTree(psrReturn.tree,
ANTLR3_SIZE_HINT);
dotSpec   = nodes->adaptor->makeDot(nodes->adaptor, psrReturn.tree);


Also, look at the code for the adaptor.

Jim


> >
> > You can only get tokens for nodes that have them of course.
> >
> > Jim
> >
> >> -----Original Message-----
> >> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> >> bounces at antlr.org] On Behalf Of Richard Connon
> >> Sent: Tuesday, December 07, 2010 2:51 PM
> >> To: antlr-interest at antlr.org
> >> Subject: [antlr-interest] Navigate the C target AST
> >>
> >> Hi. I'm trying to navigate the AST built using the ANTLR3 C target.
> >>
> >> I'm wondering how the token information is stored in the tree nodes.
> >> It seems there are two types of tree nodes. ANTLR3_BASE_TREE and
> >> ANTLR3_COMMON_TREE and I can set my grammar to produce the AST with
> >> either one.
> >>
> >> The documentation suggests that an ANTLR3_BASE_TREE has no token
> >> information yet it contains a pointer to the
> >> getToken(ANTLR3_BASE_TREE) function. Can anyone clarify this?
> >>
> >> I've been trying out each type to try and work it out.
> >>
> >> getToken(ANTLR3_BASE_TREE) on the ANTLR3_BASE_TREE seems to return
> >> 0x0 which would support what the docs say about it having no token
> >> "payload"
> >> but then why does this function exist.
> >>
> >> When using ANTLR3_COMMON_TREE instead since I assumed this to be the
> >> solution, the token member of the struct is also 0x0 Finally doing
> >> commonTree->baseTree.getToken(&commonTree->basetree) as a last
> resort
> >> caused the program to segfault in dupTree()
> >>
> >> All in all I'm a bit confused about where the "content" of the AST
> >> actually lies.
> >>
> >> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> >> Unsubscribe:
> >> http://www.antlr.org/mailman/options/antlr-interest/your-
> >> email-address
> >
> >
> > List: http://www.antlr.org/mailman/listinfo/antlr-interest
> > Unsubscribe:
> > http://www.antlr.org/mailman/options/antlr-interest/your-email-
> address



From Jean-Claude.Durand at imag.fr  Wed Dec  8 07:04:34 2010
From: Jean-Claude.Durand at imag.fr (Jean-Claude Durand)
Date: Wed, 8 Dec 2010 18:04:34 +0300
Subject: [antlr-interest] '.dot' files of rules' diagrams
In-Reply-To: <05d701cb962a$946b1670$bd414350$@temporal-wave.com>
References: <DE9DAAEC-BD64-4E3E-86DD-C1151497FFB7@imag.fr>
	<05d701cb962a$946b1670$bd414350$@temporal-wave.com>
Message-ID: <1314951F-73A4-4FEE-8E16-1B5FE517CEC4@imag.fr>

Thanks, it works well for an AST, but my question was about the diagrams of a grammar's rules as we can see in ANTLRWORKS.
It would be nice to have such diagrams for documentation purposes.
JC.

Le 7 d?c. 2010 ? 19:19, Jim Idle a ?crit :

> There is a method that does this for you on a tree. Look for the class
> DOTTreeGenerator in package org.antlr.runtime.tree 
> 
> Jim
> 
>> -----Original Message-----
>> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
>> bounces at antlr.org] On Behalf Of Jean-Claude Durand
>> Sent: Tuesday, December 07, 2010 1:00 AM
>> To: antlr-interest at antlr.org
>> Subject: [antlr-interest] '.dot' files of rules' diagrams
>> 
>> To achieve the documentation of my grammars, I would like to retrieve
>> the '.dot' files generated by ANTLRWorks for rules diagrams. Is it
>> possible ?
>> 
>> Thanks a lot for your answer.
>> 
>> Jean-Claude Durand
>> 
>> LIG, ?quipe GETALP
>> 385, rue de la Biblioth?que
>> BP 53
>> 38041 Grenoble cedex 9
>> France
>> 
>> 
>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
>> email-address
> 
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
> 


From jimi at temporal-wave.com  Wed Dec  8 08:34:43 2010
From: jimi at temporal-wave.com (Jim Idle)
Date: Wed, 8 Dec 2010 08:34:43 -0800
Subject: [antlr-interest] '.dot' files of rules' diagrams
In-Reply-To: <1314951F-73A4-4FEE-8E16-1B5FE517CEC4@imag.fr>
References: <DE9DAAEC-BD64-4E3E-86DD-C1151497FFB7@imag.fr>	<05d701cb962a$946b1670$bd414350$@temporal-wave.com>
	<1314951F-73A4-4FEE-8E16-1B5FE517CEC4@imag.fr>
Message-ID: <017301cb96f5$d147d210$73d77630$@temporal-wave.com>

You can hijack ANTLRWorks to do that. We did a hack change for JavaFX to do
the same. Check the command line options for ANTLRWorks and I think you will
be able to work it out.

Jim

> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of Jean-Claude Durand
> Sent: Wednesday, December 08, 2010 7:05 AM
> To: antlr-interest at antlr.org
> Subject: Re: [antlr-interest] '.dot' files of rules' diagrams
> 
> Thanks, it works well for an AST, but my question was about the
> diagrams of a grammar's rules as we can see in ANTLRWORKS.
> It would be nice to have such diagrams for documentation purposes.
> JC.
> 
> Le 7 d?c. 2010 ? 19:19, Jim Idle a ?crit :
> 
> > There is a method that does this for you on a tree. Look for the
> class
> > DOTTreeGenerator in package org.antlr.runtime.tree
> >
> > Jim
> >
> >> -----Original Message-----
> >> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> >> bounces at antlr.org] On Behalf Of Jean-Claude Durand
> >> Sent: Tuesday, December 07, 2010 1:00 AM
> >> To: antlr-interest at antlr.org
> >> Subject: [antlr-interest] '.dot' files of rules' diagrams
> >>
> >> To achieve the documentation of my grammars, I would like to
> retrieve
> >> the '.dot' files generated by ANTLRWorks for rules diagrams. Is it
> >> possible ?
> >>
> >> Thanks a lot for your answer.
> >>
> >> Jean-Claude Durand
> >>
> >> LIG, ?quipe GETALP
> >> 385, rue de la Biblioth?que
> >> BP 53
> >> 38041 Grenoble cedex 9
> >> France
> >>
> >>
> >> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> >> Unsubscribe:
> >> http://www.antlr.org/mailman/options/antlr-interest/your-
> >> email-address
> >
> >
> > List: http://www.antlr.org/mailman/listinfo/antlr-interest
> > Unsubscribe:
> > http://www.antlr.org/mailman/options/antlr-interest/your-email-
> address
> >
> 
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
> email-address


From pat at pat.net  Wed Dec  8 09:34:52 2010
From: pat at pat.net (Patrick Niemeyer)
Date: Wed, 8 Dec 2010 11:34:52 -0600
Subject: [antlr-interest] Manual Tree Walking Vs. Tree Grammars
In-Reply-To: <BBF28BE8-E101-4779-9925-E897E3CD575E@pat.net>
References: <AANLkTi=n-EaNtsoC4vUsfYUWZ9HLXgjrm97SReP+U8hf@mail.gmail.com>
	<BBF28BE8-E101-4779-9925-E897E3CD575E@pat.net>
Message-ID: <0CFF03F2-341C-4B10-8087-2FAAD3CA1216@pat.net>


On Nov 2, 2010, at 5:59 PM, Patrick Niemeyer wrote:

> Beyond that my only other request is that I'd like to see a little more solidification of the API for node types and tokens in general.  If you are walking a node stream and want to navigate things like UP/DOWN and error nodes you have to resort to some shenanigans like comparing strings ("UP"/"DOWN", knowing that node type 0 is reserved as "<invalid>", etc.). 


Actually I see now that UP,  DOWN, <invalid> are reserved in antlr.runtime.Token.


Pat


From gokul007 at gmail.com  Wed Dec  8 12:02:50 2010
From: gokul007 at gmail.com (Gokulakannan Somasundaram)
Date: Thu, 9 Dec 2010 04:02:50 +0800
Subject: [antlr-interest] Question on C Target Parser reset
Message-ID: <AANLkTinX83g6WdMCztvbzgAq3GUtTub9T_dryUo-wGsa@mail.gmail.com>

Hi Jim,
        Sometime back you told me that in the next version we will have the
lexer and parser reset function, which can be used to reset the parser and
lexer after a parse activity. Is that available in 3.3?

Thanks,
Gokul.

From jimi at temporal-wave.com  Wed Dec  8 12:38:32 2010
From: jimi at temporal-wave.com (Jim Idle)
Date: Wed, 8 Dec 2010 12:38:32 -0800
Subject: [antlr-interest] Question on C Target Parser reset
In-Reply-To: <AANLkTinX83g6WdMCztvbzgAq3GUtTub9T_dryUo-wGsa@mail.gmail.com>
References: <AANLkTinX83g6WdMCztvbzgAq3GUtTub9T_dryUo-wGsa@mail.gmail.com>
Message-ID: <002e01cb9717$e13b8f50$a3b2adf0$@temporal-wave.com>

It is, but the C target is not ready - it will be a 3.3.1

It is a reuse() by the way and it recycles all memory from the previous
parses

Jim

> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of Gokulakannan Somasundaram
> Sent: Wednesday, December 08, 2010 12:03 PM
> To: antlr-interest at antlr.org
> Subject: [antlr-interest] Question on C Target Parser reset
> 
> Hi Jim,
>         Sometime back you told me that in the next version we will have
> the lexer and parser reset function, which can be used to reset the
> parser and lexer after a parse activity. Is that available in 3.3?
> 
> Thanks,
> Gokul.
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
> email-address


From themjwok at gmail.com  Wed Dec  8 21:48:11 2010
From: themjwok at gmail.com (Michael O'Keeffe)
Date: Thu, 9 Dec 2010 16:48:11 +1100
Subject: [antlr-interest] Python Parse problem
Message-ID: <AANLkTi=kzwxmBLxF6KZ7C5rjJcSMENWz4fL_65eNf3za@mail.gmail.com>

Hi all,
I'm fairly new to ANTLR (about ?half a day of playing). I've been
mucking around with the CSV example test driven development but as a
python version. The generated lexer works fine but the parse just dies
when asked to parse. It produces the following error message:

---------------------------------------------
Traceback (most recent call last):
??File "CSVParser.py", line 272, in <module>
?? ?main(sys.argv)
??File "CSVParser.py", line 268, in main
?? ?main.execute(argv)
??File "c:\apps\Python27\lib\site-packages\antlr_python_runtime-3.1.3-py2.7.egg\
antlr3\main.py", line 163, in execute
?? ?self.parseStream(options, inStream)
??File "c:\apps\Python27\lib\site-packages\antlr_python_runtime-3.1.3-py2.7.egg\
antlr3\main.py", line 236, in parseStream
?? ?result = getattr(parser, options.parserRule)()
TypeError: getattr(): attribute name must be string
---------------------------------------------

My grammar is short so here it is...
---------------------------------------------
grammar CSV;
options {
?? ?language = Python;
}
line returns [result]
scope { fields }
@init { $line::fields = []; }
?? ? : ( (NEWLINE) => NEWLINE
?? ? ? ? | field (SEPARATOR field)* NEWLINE
?? ? ? )
?? ? ? { $result = $line::fields; }
?? ?;
field ? ? :
??( f=QUOTED
??| f=UNQUOTED
??| // nothing
??)
??{ $line::fields.append( $f.getText() ); }
??;
QUOTE : ? ?'"';
QUOTED : ? ? ( QUOTE ( options{ greedy=false; }: . )* QUOTE );
UNQUOTED : ? ?NONBREAKING*;
SEPARATOR : ? ?',';

NEWLINE ? ?: ? ?'\r'? '\n';
fragment NONBREAKING
?? ?: ? ?~( '\r' | '\n' | SEPARATOR );
---------------------------------------------

Hope I've just made a n00b mistake. Any advice you can provide will be
greatly appreciated.

Regards,

Michael

From gokul007 at gmail.com  Thu Dec  9 01:52:07 2010
From: gokul007 at gmail.com (Gokulakannan Somasundaram)
Date: Thu, 9 Dec 2010 17:52:07 +0800
Subject: [antlr-interest] Question on C Target Parser reset
In-Reply-To: <002e01cb9717$e13b8f50$a3b2adf0$@temporal-wave.com>
References: <AANLkTinX83g6WdMCztvbzgAq3GUtTub9T_dryUo-wGsa@mail.gmail.com>
	<002e01cb9717$e13b8f50$a3b2adf0$@temporal-wave.com>
Message-ID: <AANLkTikxtbqmdatUxtEteaWLXN9cCdp_AUASgPtPNVQo@mail.gmail.com>

Any date in your mind approx????

Thanks,
Gokul.

On Thu, Dec 9, 2010 at 4:38 AM, Jim Idle <jimi at temporal-wave.com> wrote:

> It is, but the C target is not ready - it will be a 3.3.1
>
> It is a reuse() by the way and it recycles all memory from the previous
> parses
>
> Jim
>
> > -----Original Message-----
> > From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> > bounces at antlr.org] On Behalf Of Gokulakannan Somasundaram
> > Sent: Wednesday, December 08, 2010 12:03 PM
> > To: antlr-interest at antlr.org
> > Subject: [antlr-interest] Question on C Target Parser reset
> >
> > Hi Jim,
> >         Sometime back you told me that in the next version we will have
> > the lexer and parser reset function, which can be used to reset the
> > parser and lexer after a parse activity. Is that available in 3.3?
> >
> > Thanks,
> > Gokul.
> >
> > List: http://www.antlr.org/mailman/listinfo/antlr-interest
> > Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
> > email-address
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>

From jeffn at photorepo.com  Thu Dec  9 04:15:57 2010
From: jeffn at photorepo.com (Jeffrey Newman)
Date: Thu, 09 Dec 2010 04:15:57 -0800
Subject: [antlr-interest] Need help getting the Antlr C runtime to link into
	test app.
Message-ID: <1291896957.13885.244.camel@merlin-3.private.photorepo.com>

Hi,

I'm trying to bring up a C++/C development environment for Antlr.

I have this same problem with 3.2 and the 3.3 snapshot.

The error is expected unqualified-id before ')' token in antlr3l3xer.h
105 (the line below).

/** Pointer to a function that constructs a new token from the lexer stored information */
pANTLR3_COMMON_TOKEN	(*emit)		    (struct ANTLR3_LEXER_struct * lexer);


I build the source with ./configure --enable-64bit.
Then installed (as root). This seemed to go fine.

I didn't see a test in the install.

I built a "treeparser.h" from all of the h files. (attached)

Here is the source file with the extern "C"...

#include <iostream>
#include "AntlrApp.h"
extern "C" {
#include "treeparser.h"
}
AntlrApp::AntlrApp(int & argc, char ** argv)
: QCoreApplication(argc, argv)
{
}
int AntlrApp::exec()
{
std::cout << "Hello World";
antlrCTest();
exit();
}
void AntlrApp::antlrCTest()
{
}

When I comment out the offending line, the source complies.
I really don't expect it to work.

Any help getting this resolved would appreciated.

thanks

Jeffrey


From jeffn at photorepo.com  Thu Dec  9 06:33:30 2010
From: jeffn at photorepo.com (Jeffrey Newman)
Date: Thu, 09 Dec 2010 06:33:30 -0800
Subject: [antlr-interest] Need help getting the Antlr C runtime to link
 into test app.
In-Reply-To: <1291896957.13885.244.camel@merlin-3.private.photorepo.com>
References: <1291896957.13885.244.camel@merlin-3.private.photorepo.com>
Message-ID: <1291905210.13885.245.camel@merlin-3.private.photorepo.com>

I think I figured things out.
Please disregard this plea for help...

On Thu, 2010-12-09 at 04:15 -0800, Jeffrey Newman wrote:
> Hi,
> 
> I'm trying to bring up a C++/C development environment for Antlr.
> 
> I have this same problem with 3.2 and the 3.3 snapshot.
> 
> The error is expected unqualified-id before ')' token in antlr3l3xer.h
> 105 (the line below).
> 
> /** Pointer to a function that constructs a new token from the lexer stored information */
> pANTLR3_COMMON_TOKEN	(*emit)		    (struct ANTLR3_LEXER_struct * lexer);
> 
> 
> I build the source with ./configure --enable-64bit.
> Then installed (as root). This seemed to go fine.
> 
> I didn't see a test in the install.
> 
> I built a "treeparser.h" from all of the h files. (attached)
> 
> Here is the source file with the extern "C"...
> 
> #include <iostream>
> #include "AntlrApp.h"
> extern "C" {
> #include "treeparser.h"
> }
> AntlrApp::AntlrApp(int & argc, char ** argv)
> : QCoreApplication(argc, argv)
> {
> }
> int AntlrApp::exec()
> {
> std::cout << "Hello World";
> antlrCTest();
> exit();
> }
> void AntlrApp::antlrCTest()
> {
> }
> 
> When I comment out the offending line, the source complies.
> I really don't expect it to work.
> 
> Any help getting this resolved would appreciated.
> 
> thanks
> 
> Jeffrey
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address



From jimi at temporal-wave.com  Thu Dec  9 06:57:39 2010
From: jimi at temporal-wave.com (Jim Idle)
Date: Thu, 9 Dec 2010 06:57:39 -0800
Subject: [antlr-interest] Need help getting the Antlr C runtime to link
	into	test app.
In-Reply-To: <1291896957.13885.244.camel@merlin-3.private.photorepo.com>
References: <1291896957.13885.244.camel@merlin-3.private.photorepo.com>
Message-ID: <00d201cb97b1$6c7391f0$455ab5d0$@temporal-wave.com>

You do not need to flag it as extern C, that is already done. Other than that, there is not enough information here, such as your .g file, the command lines you are using and so on.

It does work, but you should base your driver program around the C examples.

Jim

> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of Jeffrey Newman
> Sent: Thursday, December 09, 2010 4:16 AM
> To: antlr-interest at antlr.org
> Subject: [antlr-interest] Need help getting the Antlr C runtime to link
> into test app.
> 
> Hi,
> 
> I'm trying to bring up a C++/C development environment for Antlr.
> 
> I have this same problem with 3.2 and the 3.3 snapshot.
> 
> The error is expected unqualified-id before ')' token in antlr3l3xer.h
> 105 (the line below).
> 
> /** Pointer to a function that constructs a new token from the lexer
> stored information */
> pANTLR3_COMMON_TOKEN	(*emit)		    (struct ANTLR3_LEXER_struct
> * lexer);
> 
> 
> I build the source with ./configure --enable-64bit.
> Then installed (as root). This seemed to go fine.
> 
> I didn't see a test in the install.
> 
> I built a "treeparser.h" from all of the h files. (attached)
> 
> Here is the source file with the extern "C"...
> 
> #include <iostream>
> #include "AntlrApp.h"
> extern "C" {
> #include "treeparser.h"
> }
> AntlrApp::AntlrApp(int & argc, char ** argv)
> : QCoreApplication(argc, argv)
> {
> }
> int AntlrApp::exec()
> {
> std::cout << "Hello World";
> antlrCTest();
> exit();
> }
> void AntlrApp::antlrCTest()
> {
> }
> 
> When I comment out the offending line, the source complies.
> I really don't expect it to work.
> 
> Any help getting this resolved would appreciated.
> 
> thanks
> 
> Jeffrey



From davidann at gmail.com  Thu Dec  9 11:41:54 2010
From: davidann at gmail.com (David Weiser)
Date: Thu, 9 Dec 2010 11:41:54 -0800
Subject: [antlr-interest] lexer precedence
In-Reply-To: <AANLkTi=yOz945ZWt=5VE0rMmsQ3QiMKLwF_oDgDcfp1e@mail.gmail.com>
References: <AANLkTi=yOz945ZWt=5VE0rMmsQ3QiMKLwF_oDgDcfp1e@mail.gmail.com>
Message-ID: <AANLkTimSu+XCeOCY7YAhP6aG_PHfrWhZMyTgZnfYDhMi@mail.gmail.com>

Howdy,

I have a lexer which has the following rules (I'm modding the XML
Parser from http://www.antlr.org/wiki/display/ANTLR3/1.+Lexer ):

WS ?: {tagMode}?=> ? (' '|'\r'|'\t'|'\u000C'|'\n') {$channel=HIDDEN;}
? ?;

PCDATA : { !tagMode }?=> (~'<')+
? ?;

The problem I have is that the lexer ends up tokenizing sequences like
"\n\n\n\n" as PCDATA instead of WS.

It's apparent that there is a nondeterminism between WS and PCDATA
since '\n' matches both '\n' and '~<'.  How can I get around this?

--
Thanks,
dw



-- 
Thanks,
dw

From pat at pat.net  Thu Dec  9 13:37:53 2010
From: pat at pat.net (Patrick Niemeyer)
Date: Thu, 9 Dec 2010 15:37:53 -0600
Subject: [antlr-interest] Unterminated quotes and
	MismatchedTokenException....
Message-ID: <A6C8BD3F-CD07-4293-A268-1CA0003C5AA2@pat.net>


In my C/Java text when I have an unterminated quote I get a MismatchedTokenException that has a position pointing to the expected token location, which is usually the end of file...  Is there an easy way to capture the starting token of the node that it was trying to produce?  i.e. a way to point back to the opening quote? Or do you just normally backtrack through the text and deal with this externally?


thanks,
Pat


From javamonkey at 163.com  Thu Dec  9 18:06:56 2010
From: javamonkey at 163.com (=?GBK?B?wO680tbH?=)
Date: Fri, 10 Dec 2010 10:06:56 +0800 (CST)
Subject: [antlr-interest] useing antlr to get key information from comment
	line
Message-ID: <68108530.13198.12cce07f24f.Coremail.javamonkey@163.com>

i am new to antlr. i put key infomation in the comment and try to use antlr to retrive comment in text file.

here is the grammar:


grammar T;
options {backtrack=true;}
all     :       (txt)*;
txt     :comment {System.out.println("found comment");}
        |content {System.out.println("found content");}
        ;
comment
        :       COMMENT_TAG content
        ;
content
        :       STRING NEWLINE
        ;

      
COMMENT_TAG
        :        '#'
       
        ;
      
NEWLINE: ('\r'? '\n')+;

STRING
        :       ('\u0010'..'\uffff')*
        ;





the input text like this :


#command parameter parameter
hello,this is text;

it dose not work,the output is


found content
found content


my expectation is follow :


found comment
found content
.

how to modify the grammar?
Regards
Joel li


From stefan.misch at gmx.de  Fri Dec 10 02:20:54 2010
From: stefan.misch at gmx.de (Stefan Misch)
Date: Fri, 10 Dec 2010 11:20:54 +0100
Subject: [antlr-interest] useing antlr to get key information from
	commentline
In-Reply-To: <68108530.13198.12cce07f24f.Coremail.javamonkey@163.com>
References: <68108530.13198.12cce07f24f.Coremail.javamonkey@163.com>
Message-ID: <514B08F22688452787B6B1F01BD9E2DD@stmwks05>

Hi Joel Li,

I'm also new to ANTLR and had a look at your problem to learn more...

This modified grammar seems to work for me (at least AntlrWorks Interpreter
shows the correct tree):

=================
grammar TestComment;

all     :   (txt)*;

txt     :	comment {System.out.println("found comment");}
        |	content {System.out.println("found content");}
        |	NEWLINE
        ;
        
comment :   COMMENT_TAG STRING NEWLINE
        ;

content :	STRING NEWLINE
        ;

COMMENT_TAG
        :   '#';

NEWLINE :	'\r'? '\n';

STRING  :   ~COMMENT_TAG ~('\n'|'\r')*
        ;
========================

The problem is, that STRING is not allowed to start with a COMMENT_TAG,
because otherwise there would be no difference between a comment and
content. Please also note the addition of just a NEWLINE to txt, which
allows for empty lines, too.

HTH,
Stefan


-----Urspr?ngliche Nachricht-----
Von: antlr-interest-bounces at antlr.org
[mailto:antlr-interest-bounces at antlr.org] Im Auftrag von ???
Gesendet: Freitag, 10. Dezember 2010 03:07
An: antlr-interest at antlr.org
Betreff: [antlr-interest] useing antlr to get key information from
commentline

i am new to antlr. i put key infomation in the comment and try to use antlr
to retrive comment in text file.

here is the grammar:


grammar T;
options {backtrack=true;}
all     :       (txt)*;
txt     :comment {System.out.println("found comment");}
        |content {System.out.println("found content");}
        ;
comment
        :       COMMENT_TAG content
        ;
content
        :       STRING NEWLINE
        ;

      
COMMENT_TAG
        :        '#'
       
        ;
      
NEWLINE: ('\r'? '\n')+;

STRING
        :       ('\u0010'..'\uffff')*
        ;





the input text like this :


#command parameter parameter
hello,this is text;

it dose not work,the output is


found content
found content


my expectation is follow :


found comment
found content
.

how to modify the grammar?
Regards
Joel li


List: http://www.antlr.org/mailman/listinfo/antlr-interest
Unsubscribe:
http://www.antlr.org/mailman/options/antlr-interest/your-email-address



From huntc at internode.on.net  Fri Dec 10 03:08:18 2010
From: huntc at internode.on.net (Christopher Hunt)
Date: Fri, 10 Dec 2010 22:08:18 +1100
Subject: [antlr-interest] Antlrworks 1.4.1, OS X 10.6.5 and debugging issues
Message-ID: <75CAFA27-9737-42F8-BA1B-B5E5499686AA@internode.on.net>

Hi there,

I'm using Antlrworks v.1.4.1 on Mac OS X 10.6.5 and find that I cannot debug my grammar, despite all being well via the interpreter.

Here are my steps:
1. Open a grammar
2. Run/Debug...
3. Select a file as input (makes no difference if I use the text option) and confirm

I then receive the generating/connecting messages and note that a socket connection is established i.e.:

netstat -an|grep 49100
tcp4       0      0  127.0.0.1.49100        127.0.0.1.60879        ESTABLISHED
tcp4      27      0  127.0.0.1.60879        127.0.0.1.49100        ESTABLISHED
tcp46      0      0  *.49100                *.*                    LISTEN

Clicking on any of the play buttons (step, step over etc.), appears to do nothing. The only event shown is "commence". If I stop the debugger I have to click the stop button twice whereupon it force quits (a single stop doesn't appear to do anything).

Are there known issues with my configuration?

Thanks for your help.

Kind regards,
Christopher

From jeffn at photorepo.com  Fri Dec 10 05:45:14 2010
From: jeffn at photorepo.com (Jeffrey Newman)
Date: Fri, 10 Dec 2010 05:45:14 -0800
Subject: [antlr-interest] C++ code generation targets
Message-ID: <1291988714.13885.260.camel@merlin-3.private.photorepo.com>

Hi,

I sure could us the C++ code generation targets.

I found this on the wiki/code generation page.

C target as of release 3.1 is C++ compatible, compile .c files as C+. C+
classes will be provided as a separate library later in 2008. 

Do these targets exist?
Can I specify C++ as the language option in my grammar?
Is there any documentation on them?
Where can I download them.
etc...

thanks

Jeffrey



From simon.werbung at gmx.de  Fri Dec 10 05:56:29 2010
From: simon.werbung at gmx.de (Simon Manschitz)
Date: Fri, 10 Dec 2010 14:56:29 +0100
Subject: [antlr-interest] My first tree walker
Message-ID: <4D02318D.3070906@gmx.de>

Hi,

i am trying to walk over a tree with this forum (tree.toTreeString-Method):

(function (OUTPUT output) (NAME test2) (INPUT input) (= output (- 4 input)))

My tree walker looks like this:

tree grammar MatlabTreeWalker;

options {
   language = Java;
   tokenVocab = Matlab;
   ASTLabelType = CommonTree;
}

walk: ^(FUNCTION
     function_output
     function_name
     function_input
     expression);

function_output: ^(OUTPUT IDENT);
function_name: ^(NAME IDENT);
function_input: ^(INPUT IDENT);

expression:
   ^('=' expression expression) { System.out.println("t1"); }
   | ^(MINUS o1=expression o2=expression) { System.out.println("t2"); }
   | IDENT { System.out.println("t3"); }
   | REAL_NUMBER { System.out.println("t4"); };

But i always receive this error: MatlabTreeWalker.g: node from line 1:0 
mismatched tree node: function expecting FUNCTION. Has anyone an idea 
why i get this error? FUNCTION is a lexer rule FUNCTION: 'function'; I 
think he has problems to find the (OUTPUT IDENT) but i have no idea why? 
Can somebody help me?

Bye, Simon.

From jmurray at aerotech.com  Fri Dec 10 06:51:45 2010
From: jmurray at aerotech.com (Justin Murray)
Date: Fri, 10 Dec 2010 09:51:45 -0500
Subject: [antlr-interest] ANTRL 3.3
Message-ID: <6B458D23F5D4A24ABCDB3C78EA97393B01FC9FE4@EXCH-VIRTUAL.aerotechad.com>

Hello,

 

I am currently developing the grammar for a very large language. It has
several hundred keywords, and hundreds of syntax permutations in the
form of commands. The language itself is poorly designed, but we
unfortunately have to continue to support it. My question involves the
update to ANTLR v3.3. My grammar file is able to be processed by ANTLR
v3.2 without any errors, and produces a working output (C target). I had
to bump up the java stack size to 64M, and the heap size to 1024M, but
from what I have read this is fairly common. The processing takes about
15 seconds on average. Yesterday, I decided to try upgrading to ANTLR
v3.3, but have been unsuccessful. When processing the exact same grammar
file, it will spend several minutes consuming one of my cpu cores, and
then ultimately crash with an outOfMemory exception. I tried increasing
the memory further, but it made no difference. I tried using the
-Xwatchconversion option, but it was not very helpful. It prints out
thousands of lines like "convert DFA state 4192 (229 nfa states)", but
never appears to get stuck on a particular line, it just eventually runs
out of memory. What has changed in v3.3 that could cause this to happen?
What should I try next?

 

Thank you,

Justin Murray 
Software Engineer 
jmurray at aerotech.com

Aerotech, Inc. 
101 Zeta Drive 
Pittsburgh, PA 15238 
412-963-7470

 


From james1018 at gmail.com  Fri Dec 10 08:38:48 2010
From: james1018 at gmail.com (James Reid)
Date: Fri, 10 Dec 2010 11:38:48 -0500
Subject: [antlr-interest] Can't debug in ANTLRWorks 1.4.1
Message-ID: <AANLkTikasRD4+vAHgUjQMTStPsLVVvC59wJ_YRZNQpdH@mail.gmail.com>

Greetings!

I just upgraded from ANTLRWorks 1.4 to 1.4.1 and I can no longer debug my
grammar.  Whenever I start a debug session (either remote or in ANTLRWorks)
nothing happens.  Everything connects up, but as soon as I press any of the
buttons nothing happens.  Then I have to force the debugger to close by
clicking stop twice.  I was checking the archive and saw that someone else
had the same problem but there was no response.  Is anybody else having this
problem?

Thanks,
James

PS:  Everything worked fine in 1.4 and I haven't changed my grammar since
upgrading.
PPS:  This is on Win 7 64 bit.

From parrt at cs.usfca.edu  Fri Dec 10 09:02:30 2010
From: parrt at cs.usfca.edu (Terence Parr)
Date: Fri, 10 Dec 2010 09:02:30 -0800
Subject: [antlr-interest] ANTRL 3.3
In-Reply-To: <6B458D23F5D4A24ABCDB3C78EA97393B01FC9FE4@EXCH-VIRTUAL.aerotechad.com>
References: <6B458D23F5D4A24ABCDB3C78EA97393B01FC9FE4@EXCH-VIRTUAL.aerotechad.com>
Message-ID: <92F53A9A-80CC-49C3-B71B-057C662A4FF3@cs.usfca.edu>

hi. that's telling you to fix the decision associated with that spewing of conversion notes.

Ter
On Dec 10, 2010, at 6:51 AM, Justin Murray wrote:

> Hello,
> 
> 
> 
> I am currently developing the grammar for a very large language. It has
> several hundred keywords, and hundreds of syntax permutations in the
> form of commands. The language itself is poorly designed, but we
> unfortunately have to continue to support it. My question involves the
> update to ANTLR v3.3. My grammar file is able to be processed by ANTLR
> v3.2 without any errors, and produces a working output (C target). I had
> to bump up the java stack size to 64M, and the heap size to 1024M, but
> from what I have read this is fairly common. The processing takes about
> 15 seconds on average. Yesterday, I decided to try upgrading to ANTLR
> v3.3, but have been unsuccessful. When processing the exact same grammar
> file, it will spend several minutes consuming one of my cpu cores, and
> then ultimately crash with an outOfMemory exception. I tried increasing
> the memory further, but it made no difference. I tried using the
> -Xwatchconversion option, but it was not very helpful. It prints out
> thousands of lines like "convert DFA state 4192 (229 nfa states)", but
> never appears to get stuck on a particular line, it just eventually runs
> out of memory. What has changed in v3.3 that could cause this to happen?
> What should I try next?
> 
> 
> 
> Thank you,
> 
> Justin Murray 
> Software Engineer 
> jmurray at aerotech.com
> 
> Aerotech, Inc. 
> 101 Zeta Drive 
> Pittsburgh, PA 15238 
> 412-963-7470
> 
> 
> 
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address


From parrt at cs.usfca.edu  Fri Dec 10 09:02:56 2010
From: parrt at cs.usfca.edu (Terence Parr)
Date: Fri, 10 Dec 2010 09:02:56 -0800
Subject: [antlr-interest] Can't debug in ANTLRWorks 1.4.1
In-Reply-To: <AANLkTikasRD4+vAHgUjQMTStPsLVVvC59wJ_YRZNQpdH@mail.gmail.com>
References: <AANLkTikasRD4+vAHgUjQMTStPsLVVvC59wJ_YRZNQpdH@mail.gmail.com>
Message-ID: <2CF55548-3F65-478B-B986-B07AB71253B0@cs.usfca.edu>

weird. worked for me. Is this debug or debug remote?
Ter
On Dec 10, 2010, at 8:38 AM, James Reid wrote:

> Greetings!
> 
> I just upgraded from ANTLRWorks 1.4 to 1.4.1 and I can no longer debug my
> grammar.  Whenever I start a debug session (either remote or in ANTLRWorks)
> nothing happens.  Everything connects up, but as soon as I press any of the
> buttons nothing happens.  Then I have to force the debugger to close by
> clicking stop twice.  I was checking the archive and saw that someone else
> had the same problem but there was no response.  Is anybody else having this
> problem?
> 
> Thanks,
> James
> 
> PS:  Everything worked fine in 1.4 and I haven't changed my grammar since
> upgrading.
> PPS:  This is on Win 7 64 bit.
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address


From parrt at cs.usfca.edu  Fri Dec 10 09:04:04 2010
From: parrt at cs.usfca.edu (Terence Parr)
Date: Fri, 10 Dec 2010 09:04:04 -0800
Subject: [antlr-interest] My first tree walker
In-Reply-To: <4D02318D.3070906@gmx.de>
References: <4D02318D.3070906@gmx.de>
Message-ID: <5FF64993-1841-4DD3-847A-A0347C4BA0CF@cs.usfca.edu>

sounds like a token type mismatch...make sure FUNCTION is same in all grammars
T
On Dec 10, 2010, at 5:56 AM, Simon Manschitz wrote:

> Hi,
> 
> i am trying to walk over a tree with this forum (tree.toTreeString-Method):
> 
> (function (OUTPUT output) (NAME test2) (INPUT input) (= output (- 4 input)))
> 
> My tree walker looks like this:
> 
> tree grammar MatlabTreeWalker;
> 
> options {
>   language = Java;
>   tokenVocab = Matlab;
>   ASTLabelType = CommonTree;
> }
> 
> walk: ^(FUNCTION
>     function_output
>     function_name
>     function_input
>     expression);
> 
> function_output: ^(OUTPUT IDENT);
> function_name: ^(NAME IDENT);
> function_input: ^(INPUT IDENT);
> 
> expression:
>   ^('=' expression expression) { System.out.println("t1"); }
>   | ^(MINUS o1=expression o2=expression) { System.out.println("t2"); }
>   | IDENT { System.out.println("t3"); }
>   | REAL_NUMBER { System.out.println("t4"); };
> 
> But i always receive this error: MatlabTreeWalker.g: node from line 1:0 
> mismatched tree node: function expecting FUNCTION. Has anyone an idea 
> why i get this error? FUNCTION is a lexer rule FUNCTION: 'function'; I 
> think he has problems to find the (OUTPUT IDENT) but i have no idea why? 
> Can somebody help me?
> 
> Bye, Simon.
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address


From james1018 at gmail.com  Fri Dec 10 09:04:47 2010
From: james1018 at gmail.com (James Reid)
Date: Fri, 10 Dec 2010 12:04:47 -0500
Subject: [antlr-interest] Can't debug in ANTLRWorks 1.4.1
In-Reply-To: <2CF55548-3F65-478B-B986-B07AB71253B0@cs.usfca.edu>
References: <AANLkTikasRD4+vAHgUjQMTStPsLVVvC59wJ_YRZNQpdH@mail.gmail.com>
	<2CF55548-3F65-478B-B986-B07AB71253B0@cs.usfca.edu>
Message-ID: <AANLkTim4RXZA1FGWY-cR5ZY92BLiOoPbwOsfYO0ckV_w@mail.gmail.com>

I was first trying it with remote debug.  Then I dumbed it down so I could
try it using just debug.  Same deal.  I switched back to 1.4 and I can debug
again.  Very odd.

James

On Fri, Dec 10, 2010 at 12:02 PM, Terence Parr <parrt at cs.usfca.edu> wrote:

> weird. worked for me. Is this debug or debug remote?
> Ter
> On Dec 10, 2010, at 8:38 AM, James Reid wrote:
>
> > Greetings!
> >
> > I just upgraded from ANTLRWorks 1.4 to 1.4.1 and I can no longer debug my
> > grammar.  Whenever I start a debug session (either remote or in
> ANTLRWorks)
> > nothing happens.  Everything connects up, but as soon as I press any of
> the
> > buttons nothing happens.  Then I have to force the debugger to close by
> > clicking stop twice.  I was checking the archive and saw that someone
> else
> > had the same problem but there was no response.  Is anybody else having
> this
> > problem?
> >
> > Thanks,
> > James
> >
> > PS:  Everything worked fine in 1.4 and I haven't changed my grammar since
> > upgrading.
> > PPS:  This is on Win 7 64 bit.
> >
> > List: http://www.antlr.org/mailman/listinfo/antlr-interest
> > Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>
>

From parrt at cs.usfca.edu  Fri Dec 10 09:05:42 2010
From: parrt at cs.usfca.edu (Terence Parr)
Date: Fri, 10 Dec 2010 09:05:42 -0800
Subject: [antlr-interest] Can't debug in ANTLRWorks 1.4.1
In-Reply-To: <AANLkTim4RXZA1FGWY-cR5ZY92BLiOoPbwOsfYO0ckV_w@mail.gmail.com>
References: <AANLkTikasRD4+vAHgUjQMTStPsLVVvC59wJ_YRZNQpdH@mail.gmail.com>
	<2CF55548-3F65-478B-B986-B07AB71253B0@cs.usfca.edu>
	<AANLkTim4RXZA1FGWY-cR5ZY92BLiOoPbwOsfYO0ckV_w@mail.gmail.com>
Message-ID: <EDF99009-4D05-45B3-A9ED-2A894BB5EBA9@cs.usfca.edu>

ok, let me try later today
T
On Dec 10, 2010, at 9:04 AM, James Reid wrote:

> I was first trying it with remote debug.  Then I dumbed it down so I could try it using just debug.  Same deal.  I switched back to 1.4 and I can debug again.  Very odd.
> 
> James
> 
> On Fri, Dec 10, 2010 at 12:02 PM, Terence Parr <parrt at cs.usfca.edu> wrote:
> weird. worked for me. Is this debug or debug remote?
> Ter
> On Dec 10, 2010, at 8:38 AM, James Reid wrote:
> 
> > Greetings!
> >
> > I just upgraded from ANTLRWorks 1.4 to 1.4.1 and I can no longer debug my
> > grammar.  Whenever I start a debug session (either remote or in ANTLRWorks)
> > nothing happens.  Everything connects up, but as soon as I press any of the
> > buttons nothing happens.  Then I have to force the debugger to close by
> > clicking stop twice.  I was checking the archive and saw that someone else
> > had the same problem but there was no response.  Is anybody else having this
> > problem?
> >
> > Thanks,
> > James
> >
> > PS:  Everything worked fine in 1.4 and I haven't changed my grammar since
> > upgrading.
> > PPS:  This is on Win 7 64 bit.
> >
> > List: http://www.antlr.org/mailman/listinfo/antlr-interest
> > Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
> 
> 


From james1018 at gmail.com  Fri Dec 10 09:06:42 2010
From: james1018 at gmail.com (James Reid)
Date: Fri, 10 Dec 2010 12:06:42 -0500
Subject: [antlr-interest] Can't debug in ANTLRWorks 1.4.1
In-Reply-To: <EDF99009-4D05-45B3-A9ED-2A894BB5EBA9@cs.usfca.edu>
References: <AANLkTikasRD4+vAHgUjQMTStPsLVVvC59wJ_YRZNQpdH@mail.gmail.com>
	<2CF55548-3F65-478B-B986-B07AB71253B0@cs.usfca.edu>
	<AANLkTim4RXZA1FGWY-cR5ZY92BLiOoPbwOsfYO0ckV_w@mail.gmail.com>
	<EDF99009-4D05-45B3-A9ED-2A894BB5EBA9@cs.usfca.edu>
Message-ID: <AANLkTikdDiWfzRniQL7sF6fBSaBvTrPmRkaRQMOzuFtt@mail.gmail.com>

If it helps at all this is with the lexer and parser in separate files.

James

On Fri, Dec 10, 2010 at 12:05 PM, Terence Parr <parrt at cs.usfca.edu> wrote:

> ok, let me try later today
> T
>
> On Dec 10, 2010, at 9:04 AM, James Reid wrote:
>
> I was first trying it with remote debug.  Then I dumbed it down so I could
> try it using just debug.  Same deal.  I switched back to 1.4 and I can debug
> again.  Very odd.
>
> James
>
> On Fri, Dec 10, 2010 at 12:02 PM, Terence Parr <parrt at cs.usfca.edu> wrote:
>
>> weird. worked for me. Is this debug or debug remote?
>> Ter
>> On Dec 10, 2010, at 8:38 AM, James Reid wrote:
>>
>> > Greetings!
>> >
>> > I just upgraded from ANTLRWorks 1.4 to 1.4.1 and I can no longer debug
>> my
>> > grammar.  Whenever I start a debug session (either remote or in
>> ANTLRWorks)
>> > nothing happens.  Everything connects up, but as soon as I press any of
>> the
>> > buttons nothing happens.  Then I have to force the debugger to close by
>> > clicking stop twice.  I was checking the archive and saw that someone
>> else
>> > had the same problem but there was no response.  Is anybody else having
>> this
>> > problem?
>> >
>> > Thanks,
>> > James
>> >
>> > PS:  Everything worked fine in 1.4 and I haven't changed my grammar
>> since
>> > upgrading.
>> > PPS:  This is on Win 7 64 bit.
>> >
>> > List: http://www.antlr.org/mailman/listinfo/antlr-interest
>> > Unsubscribe:
>> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>>
>>
>
>

From jmurray at aerotech.com  Fri Dec 10 10:32:44 2010
From: jmurray at aerotech.com (Justin Murray)
Date: Fri, 10 Dec 2010 13:32:44 -0500
Subject: [antlr-interest] ANTRL 3.3
In-Reply-To: <92F53A9A-80CC-49C3-B71B-057C662A4FF3@cs.usfca.edu>
References: <6B458D23F5D4A24ABCDB3C78EA97393B01FC9FE4@EXCH-VIRTUAL.aerotechad.com>
	<92F53A9A-80CC-49C3-B71B-057C662A4FF3@cs.usfca.edu>
Message-ID: <6B458D23F5D4A24ABCDB3C78EA97393B01FC9FE6@EXCH-VIRTUAL.aerotechad.com>

Yep, you are right. I didn't even notice the decision printout that
occurred before the thousands of conversion lines. Turned out to be a
fairly easy fix once I knew which rule to look at.

Thanks,

Justin

-----Original Message-----
From: Terence Parr [mailto:parrt at cs.usfca.edu] 
Sent: Friday, December 10, 2010 12:02 PM
To: Justin Murray
Cc: antlr-interest at antlr.org
Subject: Re: [antlr-interest] ANTRL 3.3

hi. that's telling you to fix the decision associated with that spewing
of conversion notes.

Ter
On Dec 10, 2010, at 6:51 AM, Justin Murray wrote:

> Hello,
> 
> 
> 
> I am currently developing the grammar for a very large language. It
has
> several hundred keywords, and hundreds of syntax permutations in the
> form of commands. The language itself is poorly designed, but we
> unfortunately have to continue to support it. My question involves the
> update to ANTLR v3.3. My grammar file is able to be processed by ANTLR
> v3.2 without any errors, and produces a working output (C target). I
had
> to bump up the java stack size to 64M, and the heap size to 1024M, but
> from what I have read this is fairly common. The processing takes
about
> 15 seconds on average. Yesterday, I decided to try upgrading to ANTLR
> v3.3, but have been unsuccessful. When processing the exact same
grammar
> file, it will spend several minutes consuming one of my cpu cores, and
> then ultimately crash with an outOfMemory exception. I tried
increasing
> the memory further, but it made no difference. I tried using the
> -Xwatchconversion option, but it was not very helpful. It prints out
> thousands of lines like "convert DFA state 4192 (229 nfa states)", but
> never appears to get stuck on a particular line, it just eventually
runs
> out of memory. What has changed in v3.3 that could cause this to
happen?
> What should I try next?
> 
> 
> 
> Thank you,
> 
> Justin Murray 
> Software Engineer 
> jmurray at aerotech.com
> 
> Aerotech, Inc. 
> 101 Zeta Drive 
> Pittsburgh, PA 15238 
> 412-963-7470
> 
> 
> 
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
http://www.antlr.org/mailman/options/antlr-interest/your-email-address


From jimi at temporal-wave.com  Fri Dec 10 10:39:42 2010
From: jimi at temporal-wave.com (Jim Idle)
Date: Fri, 10 Dec 2010 10:39:42 -0800
Subject: [antlr-interest] C++ code generation targets
In-Reply-To: <1291988714.13885.260.camel@merlin-3.private.photorepo.com>
References: <1291988714.13885.260.camel@merlin-3.private.photorepo.com>
Message-ID: <01b101cb9899$9c168190$d44384b0$@temporal-wave.com>

Generate C and compile it as C++. Research antlr.markmail.org for lots of
conversations about this.

Jim

> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of Jeffrey Newman
> Sent: Friday, December 10, 2010 5:45 AM
> To: antlr-interest at antlr.org
> Subject: [antlr-interest] C++ code generation targets
> 
> Hi,
> 
> I sure could us the C++ code generation targets.
> 
> I found this on the wiki/code generation page.
> 
> C target as of release 3.1 is C++ compatible, compile .c files as C+.
> C+ classes will be provided as a separate library later in 2008.
> 
> Do these targets exist?
> Can I specify C++ as the language option in my grammar?
> Is there any documentation on them?
> Where can I download them.
> etc...
> 
> thanks
> 
> Jeffrey
> 
> 
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
> email-address


From jimi at temporal-wave.com  Fri Dec 10 10:42:14 2010
From: jimi at temporal-wave.com (Jim Idle)
Date: Fri, 10 Dec 2010 10:42:14 -0800
Subject: [antlr-interest] ANTRL 3.3
In-Reply-To: <6B458D23F5D4A24ABCDB3C78EA97393B01FC9FE4@EXCH-VIRTUAL.aerotechad.com>
References: <6B458D23F5D4A24ABCDB3C78EA97393B01FC9FE4@EXCH-VIRTUAL.aerotechad.com>
Message-ID: <01b301cb9899$f6c142b0$e443c810$@temporal-wave.com>

C target is not ready for 3.3 yet, wait for 3.3.1.

Jim

> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of Justin Murray
> Sent: Friday, December 10, 2010 6:52 AM
> To: antlr-interest at antlr.org
> Subject: [antlr-interest] ANTRL 3.3
> 
> Hello,
> 
> 
> 
> I am currently developing the grammar for a very large language. It has
> several hundred keywords, and hundreds of syntax permutations in the
> form of commands. The language itself is poorly designed, but we
> unfortunately have to continue to support it. My question involves the
> update to ANTLR v3.3. My grammar file is able to be processed by ANTLR
> v3.2 without any errors, and produces a working output (C target). I
> had to bump up the java stack size to 64M, and the heap size to 1024M,
> but from what I have read this is fairly common. The processing takes
> about
> 15 seconds on average. Yesterday, I decided to try upgrading to ANTLR
> v3.3, but have been unsuccessful. When processing the exact same
> grammar file, it will spend several minutes consuming one of my cpu
> cores, and then ultimately crash with an outOfMemory exception. I tried
> increasing the memory further, but it made no difference. I tried using
> the -Xwatchconversion option, but it was not very helpful. It prints
> out thousands of lines like "convert DFA state 4192 (229 nfa states)",
> but never appears to get stuck on a particular line, it just eventually
> runs out of memory. What has changed in v3.3 that could cause this to
> happen?
> What should I try next?
> 
> 
> 
> Thank you,
> 
> Justin Murray
> Software Engineer
> jmurray at aerotech.com
> 
> Aerotech, Inc.
> 101 Zeta Drive
> Pittsburgh, PA 15238
> 412-963-7470
> 
> 
> 
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
> email-address


From jmurray at aerotech.com  Fri Dec 10 11:31:11 2010
From: jmurray at aerotech.com (Justin Murray)
Date: Fri, 10 Dec 2010 14:31:11 -0500
Subject: [antlr-interest] ANTRL 3.3
In-Reply-To: <01b301cb9899$f6c142b0$e443c810$@temporal-wave.com>
References: <6B458D23F5D4A24ABCDB3C78EA97393B01FC9FE4@EXCH-VIRTUAL.aerotechad.com>
	<01b301cb9899$f6c142b0$e443c810$@temporal-wave.com>
Message-ID: <6B458D23F5D4A24ABCDB3C78EA97393B01FC9FE8@EXCH-VIRTUAL.aerotechad.com>

Hi Jim,

I suppose I'll stick with 3.2 for now then. What is the timeframe for
3.3.1?

Thanks,

Justin

-----Original Message-----
From: antlr-interest-bounces at antlr.org
[mailto:antlr-interest-bounces at antlr.org] On Behalf Of Jim Idle
Sent: Friday, December 10, 2010 1:42 PM
To: antlr-interest at antlr.org
Subject: Re: [antlr-interest] ANTRL 3.3

C target is not ready for 3.3 yet, wait for 3.3.1.

Jim

> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of Justin Murray
> Sent: Friday, December 10, 2010 6:52 AM
> To: antlr-interest at antlr.org
> Subject: [antlr-interest] ANTRL 3.3
> 
> Hello,
> 
> 
> 
> I am currently developing the grammar for a very large language. It
has
> several hundred keywords, and hundreds of syntax permutations in the
> form of commands. The language itself is poorly designed, but we
> unfortunately have to continue to support it. My question involves the
> update to ANTLR v3.3. My grammar file is able to be processed by ANTLR
> v3.2 without any errors, and produces a working output (C target). I
> had to bump up the java stack size to 64M, and the heap size to 1024M,
> but from what I have read this is fairly common. The processing takes
> about
> 15 seconds on average. Yesterday, I decided to try upgrading to ANTLR
> v3.3, but have been unsuccessful. When processing the exact same
> grammar file, it will spend several minutes consuming one of my cpu
> cores, and then ultimately crash with an outOfMemory exception. I
tried
> increasing the memory further, but it made no difference. I tried
using
> the -Xwatchconversion option, but it was not very helpful. It prints
> out thousands of lines like "convert DFA state 4192 (229 nfa states)",
> but never appears to get stuck on a particular line, it just
eventually
> runs out of memory. What has changed in v3.3 that could cause this to
> happen?
> What should I try next?
> 
> 
> 
> Thank you,
> 
> Justin Murray
> Software Engineer
> jmurray at aerotech.com
> 
> Aerotech, Inc.
> 101 Zeta Drive
> Pittsburgh, PA 15238
> 412-963-7470
> 
> 
> 
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
> email-address


List: http://www.antlr.org/mailman/listinfo/antlr-interest
Unsubscribe:
http://www.antlr.org/mailman/options/antlr-interest/your-email-address

From simon.werbung at gmx.de  Fri Dec 10 12:17:02 2010
From: simon.werbung at gmx.de (Simon Manschitz)
Date: Fri, 10 Dec 2010 21:17:02 +0100
Subject: [antlr-interest] My first tree walker / Parser
Message-ID: <20101210201702.268710@gmx.net>

Hi,

thanks, that's a strange error. I am using the Eclipse IDE and my .g files and the token files are in my project folder. I had another token file (I don't know why) in my src folder where my generated java files are. I deleted that file and now it works.

Now i found another error with the addition in my parser. An input like:

function [output] = test2(input)

output = 2*5/3-1;

end

works fine for example. output = 2 + 3 works, too. But when there is no white space between the numbers he complains about a no viable alternative at input 2+3 error.

I checked the interpreter and he seems to recognize 2+ 3 as atom (and not as add_or_sub_expr) and doesn't recognize 2+3 (* - / etc all work fine) at all.

Can somebody help me finding this error? I thought it has something to do with the definition of a lexer rule like REAL_NUMBER but i can't see any mistakes.

The grammar file is quite large so i uploaded it to: http://www.breuberg.de/vereine/tsv-neustadt/Matlab.g

Greetings, Simon.



Am 10.12.2010 18:04, schrieb Terence Parr:
> sounds like a token type mismatch...make sure FUNCTION is same in all grammars
> T
> On Dec 10, 2010, at 5:56 AM, Simon Manschitz wrote:
>
>> Hi,
>>
>> i am trying to walk over a tree with this forum (tree.toTreeString-Method):
>>
>> (function (OUTPUT output) (NAME test2) (INPUT input) (= output (- 4 input)))
>>
>> My tree walker looks like this:
>>
>> tree grammar MatlabTreeWalker;
>>
>> options {
>>   language = Java;
>>   tokenVocab = Matlab;
>>   ASTLabelType = CommonTree;
>> }
>>
>> walk: ^(FUNCTION
>>     function_output
>>     function_name
>>     function_input
>>     expression);
>>
>> function_output: ^(OUTPUT IDENT);
>> function_name: ^(NAME IDENT);
>> function_input: ^(INPUT IDENT);
>>
>> expression:
>>   ^('=' expression expression) { System.out.println("t1"); }
>>   | ^(MINUS o1=expression o2=expression) { System.out.println("t2"); }
>>   | IDENT { System.out.println("t3"); }
>>   | REAL_NUMBER { System.out.println("t4"); };
>>
>> But i always receive this error: MatlabTreeWalker.g: node from line 1:0 
>> mismatched tree node: function expecting FUNCTION. Has anyone an idea 
>> why i get this error? FUNCTION is a lexer rule FUNCTION: 'function'; I 
>> think he has problems to find the (OUTPUT IDENT) but i have no idea why? 
>> Can somebody help me?
>>
>> Bye, Simon.
>>
>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>
>


-- 
Neu: GMX De-Mail - Einfach wie E-Mail, sicher wie ein Brief!  
Jetzt De-Mail-Adresse reservieren: http://portal.gmx.net/de/go/demail

From parrt at cs.usfca.edu  Fri Dec 10 13:26:03 2010
From: parrt at cs.usfca.edu (Terence Parr)
Date: Fri, 10 Dec 2010 13:26:03 -0800
Subject: [antlr-interest] Antlrworks 1.4.1,
	OS X 10.6.5 and debugging issues
In-Reply-To: <75CAFA27-9737-42F8-BA1B-B5E5499686AA@internode.on.net>
References: <75CAFA27-9737-42F8-BA1B-B5E5499686AA@internode.on.net>
Message-ID: <15F00E13-6852-44A8-AA8F-D1101596F146@cs.usfca.edu>

Confirmed.  Weird. tried it before pushing. i changed debug protocol but not AW so that must be the issue. i'll try to resolve and push 1.4.2

Ter
On Dec 10, 2010, at 3:08 AM, Christopher Hunt wrote:

> Hi there,
> 
> I'm using Antlrworks v.1.4.1 on Mac OS X 10.6.5 and find that I cannot debug my grammar, despite all being well via the interpreter.
> 
> Here are my steps:
> 1. Open a grammar
> 2. Run/Debug...
> 3. Select a file as input (makes no difference if I use the text option) and confirm
> 
> I then receive the generating/connecting messages and note that a socket connection is established i.e.:
> 
> netstat -an|grep 49100
> tcp4       0      0  127.0.0.1.49100        127.0.0.1.60879        ESTABLISHED
> tcp4      27      0  127.0.0.1.60879        127.0.0.1.49100        ESTABLISHED
> tcp46      0      0  *.49100                *.*                    LISTEN
> 
> Clicking on any of the play buttons (step, step over etc.), appears to do nothing. The only event shown is "commence". If I stop the debugger I have to click the stop button twice whereupon it force quits (a single stop doesn't appear to do anything).
> 
> Are there known issues with my configuration?
> 
> Thanks for your help.
> 
> Kind regards,
> Christopher
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address


From stefan.misch at gmx.de  Sat Dec 11 09:56:20 2010
From: stefan.misch at gmx.de (Stefan Misch)
Date: Sat, 11 Dec 2010 18:56:20 +0100
Subject: [antlr-interest] Question about handling key words in grammars
Message-ID: <EB58BB0551654F34A026B890CF9CF888@stmwks05>

Hi,

I'm just starting ANTLR and there are so many questions. AMZ delivered the
book today but...

Why do some grammmars define language keywords in different ways:

sometimes "inline" in a rule, e.g.
create_package
	:	'CREATE' ( OR keyREPLACE )?

sometimes as explicit lexical tokens, e.g.
CREATE: 'CREATE'

sometimes as "keyword" like this:
keyREPLACE: {(this.input).LT(1).Text.ToUpper() == "REPLACE"}? ID;

One reason maybe that a keyX definition is case insensitive because of the
use of "ToUpper()".

Another reason why I'm asking is, that AntlrWorks 1.4.1 seems to have a
problem with these keyX, as I cannot use the interpreter. And the Debugger
seems to have another problem as it does just nothing (I've seen a recent
post that this seems to be a bug).

Thanks,
Stefan

Antlr 3.3, AntlrWorks 1.4.1, WinXP



From mike at metaorb.com  Sun Dec 12 01:18:47 2010
From: mike at metaorb.com (Mike Allbright)
Date: Sun, 12 Dec 2010 03:18:47 -0600
Subject: [antlr-interest] Padding Fields in StringTemplate?
Message-ID: <000001cb99dd$950cb050$bf2610f0$@com>

Is there a way to pad fields in StringTemplate?

 

In other words, I want to print a table with each element right or left
justified within a field of a fixed width and pad the rest of the field with
whitespace (or some other character).

 

Can this be done with StringTemplate, or do I need to precalculate/prefill
field strings with padding?

 

Thanks & Regards,

--Mike

Mike Allbright

mike at metaorb.com

(972) 896-7070

 


From parrt at cs.usfca.edu  Sun Dec 12 09:16:07 2010
From: parrt at cs.usfca.edu (Terence Parr)
Date: Sun, 12 Dec 2010 09:16:07 -0800
Subject: [antlr-interest] Padding Fields in StringTemplate?
In-Reply-To: <000001cb99dd$950cb050$bf2610f0$@com>
References: <000001cb99dd$950cb050$bf2610f0$@com>
Message-ID: <9D3F0153-AC0A-4C77-9566-6E339DAD1E9D@cs.usfca.edu>

hi. check out the format option
Ter
On Dec 12, 2010, at 1:18 AM, Mike Allbright wrote:

> Is there a way to pad fields in StringTemplate?
> 
> 
> 
> In other words, I want to print a table with each element right or left
> justified within a field of a fixed width and pad the rest of the field with
> whitespace (or some other character).
> 
> 
> 
> Can this be done with StringTemplate, or do I need to precalculate/prefill
> field strings with padding?
> 
> 
> 
> Thanks & Regards,
> 
> --Mike
> 
> Mike Allbright
> 
> mike at metaorb.com
> 
> (972) 896-7070
> 
> 
> 
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address


From vdg.encelade at gmail.com  Sun Dec 12 13:48:18 2010
From: vdg.encelade at gmail.com (Vincent De Groote)
Date: Sun, 12 Dec 2010 22:48:18 +0100
Subject: [antlr-interest] ANTLRWorks - Java null pointer exception
Message-ID: <1292190498.5484.5.camel@vdg-portable>

Hello,

I downloaded today the ANTLRWORKS-1.4.1 package (antlrworks-1.4.1.jar).

I started the jar file with

java -jar ../Downloads/antlrworks-1.4.1.jar

When I use the sample expr grammar found on antlr site, the debugger
stops working a few steps after the beginning with java null pointer
exceptions on the console screen:


[---- CONSOLE OUTPUT
--------------------------------------------------------------------------] 

Checking Grammar expr.g...

Note: /home/vdg/antlr-test/output/exprParser.java uses unchecked or
unsafe operations.

Note: Recompile with -Xlint:unchecked for details.

Note: /home/vdg/antlr-test/output/exprParser.java uses unchecked or
unsafe operations.

Note: Recompile with -Xlint:unchecked for details.

java.lang.NullPointerException
java.lang.NullPointerException
	at
org.antlr.runtime.debug.RemoteDebugEventSocketListener.dispatch(RemoteDebugEventSocketListener.java:275)
	at
org.antlr.runtime.debug.RemoteDebugEventSocketListener.eventHandler(RemoteDebugEventSocketListener.java:176)
	at
org.antlr.runtime.debug.RemoteDebugEventSocketListener.run(RemoteDebugEventSocketListener.java:472)
	at java.lang.Thread.run(Thread.java:636)

[---- CONSOLE OUTPUT: end
--------------------------------------------------------------------------]


I have the same result with another grammar I downloaded from the site.

Any idea ?

Thanks for your help

Vincent De Groote


From huntc at internode.on.net  Sun Dec 12 14:55:41 2010
From: huntc at internode.on.net (Christopher Hunt)
Date: Mon, 13 Dec 2010 09:55:41 +1100
Subject: [antlr-interest] Antlrworks 1.4.1,
	OS X 10.6.5 and debugging issues
In-Reply-To: <75CAFA27-9737-42F8-BA1B-B5E5499686AA@internode.on.net>
References: <75CAFA27-9737-42F8-BA1B-B5E5499686AA@internode.on.net>
Message-ID: <424B0EE9-B13B-49E2-B297-F9C60D425F58@internode.on.net>

Just out of interest, I reverted to 1.4 and had the same problem. So, while there may be some other problem with 1.4.1, there is probably and issue with my grammar. Here's the grammar so far in case anyone has thoughts (it parses the zoneinfo database (1) - I'll release this to the ANTLR site when finished):

/*
 * Copyright 2010 Class Action P/L
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
 
grammar Zoneinfo;

options {
	output=AST;
	ASTLabelType=CommonTree;
	language=Java;
}
	
@header {
	package com.classactionpl.tz;
}

@lexer::header {
	package com.classactionpl.tz;
}

line
	: (ruleLine | zoneLine | linkLine | NEWLINE)*
	;

ruleLine
	: 'Rule' ruleName ruleFrom ruleTo ruleType ruleIn ruleOn ruleAt ruleSave ruleLetters NEWLINE
	;

zoneLine
	: 'Zone' zoneName zoneGmtOffset zoneRules zoneFormat 
	(zoneUntil NEWLINE+ zoneGmtOffset zoneRules zoneFormat)* 
	NEWLINE
	;

linkLine
	: 'Link' linkFrom linkTo NEWLINE
	;

ruleName
	: ID
	;
	
ruleFrom
	: INT | YEAR_MINMAX
	;
	
ruleTo
	: INT | YEAR_MINMAX | ONLY_YEAR
	;
	
ruleType
	: '-' | YEAR_TYPE
	;
	
ruleIn
	: MONTH
	;
	
ruleOn
	: INT | LAST_DAY | (DAY_OF_WEEK DAY_COMPARATOR INT)
	;
	
ruleAt
	: '-' | (positiveTime TIME_OF_DAY_SUFFIX?)
	;
	
ruleSave
	: '-' | positiveTime
	;
	
ruleLetters
	: '-' | ID
	;

zoneName
	: ID
	;

zoneGmtOffset
	: offset
	;
	
zoneRules
	: '-' | positiveTime | ID
	;
	
zoneFormat
	: ID ('/' ID)?
	;

zoneUntil
	: INT (ruleIn (ruleOn ruleAt?)?)?
	;

linkFrom
	: ID
	;
	
linkTo
	: ID
	;
	
offset
	: '-'? positiveTime
	;

positiveTime
	: INT (':' INT (':' INT)?)?
	;

YEAR_MINMAX
	: 'min' | 'max'
	;

ONLY_YEAR
	: 'only'
	;
	
YEAR_TYPE
	: 'even' | 'odd' | 'uspres' | 'nonpres' | 'nonuspres'
	;

MONTH
	: 'Jan' 'uary'? 
	| 'Feb' 'ruary'? 
	| 'Mar' 'ch'? 
	| 'Apr' 'il'? 
	| 'May' 
	| 'Jun' 'e'? 
	| 'Jul' 'y'? 
	| 'Aug' 'ust'? 
	| 'Sep' 'tember'? 
	| 'Oct' 'ober'? 
	| 'Nov' 'ember'? 
	| 'Dec' 'ember'?
	;

LAST_DAY
	: 'last' '-'? DAY_OF_WEEK
	;

DAY_OF_WEEK 
	: 'Sun' 'day'? 
	| 'Mon' 'day'? 
	| 'Tue' 'sday'? 
	| 'Wed' 'nesday'? 
	| 'Thu' 'rsday'? 
	| 'Fri' 'day'? 
	| 'Sat' 'urday'?
	;
	
DAY_COMPARATOR
	: '<=' | '>='
	;

TIME_OF_DAY_SUFFIX
	: 'w' | 's' | 'u' | 'g' | 'z'
	;

INT
	: ('0'..'9')+
	;

ID
	: ('a'..'z'|'A'..'Z'|'%')('a'..'z'|'A'..'Z'|'0'..'9'|'%'|'/'|'_'|'-')*
	;

NEWLINE
	: ('#' ~('\n'|'\r')*)? '\r'? '\n' | EOF
    	;

WS
    	: (' ' | '\t') {skip();}
    	;


Kind regards,
Christopher

(1) http://www.twinsun.com/tz/tz-link.htm

On 10/12/2010, at 10:08 PM, Christopher Hunt wrote:

> Hi there,
> 
> I'm using Antlrworks v.1.4.1 on Mac OS X 10.6.5 and find that I cannot debug my grammar, despite all being well via the interpreter.
> 
> Here are my steps:
> 1. Open a grammar
> 2. Run/Debug...
> 3. Select a file as input (makes no difference if I use the text option) and confirm
> 
> I then receive the generating/connecting messages and note that a socket connection is established i.e.:
> 
> netstat -an|grep 49100
> tcp4       0      0  127.0.0.1.49100        127.0.0.1.60879        ESTABLISHED
> tcp4      27      0  127.0.0.1.60879        127.0.0.1.49100        ESTABLISHED
> tcp46      0      0  *.49100                *.*                    LISTEN
> 
> Clicking on any of the play buttons (step, step over etc.), appears to do nothing. The only event shown is "commence". If I stop the debugger I have to click the stop button twice whereupon it force quits (a single stop doesn't appear to do anything).
> 
> Are there known issues with my configuration?
> 
> Thanks for your help.
> 
> Kind regards,
> Christopher


From huntc at internode.on.net  Sun Dec 12 20:04:02 2010
From: huntc at internode.on.net (Christopher Hunt)
Date: Mon, 13 Dec 2010 15:04:02 +1100
Subject: [antlr-interest] Antlrworks 1.4.1,
	OS X 10.6.5 and debugging issues
In-Reply-To: <424B0EE9-B13B-49E2-B297-F9C60D425F58@internode.on.net>
References: <75CAFA27-9737-42F8-BA1B-B5E5499686AA@internode.on.net>
	<424B0EE9-B13B-49E2-B297-F9C60D425F58@internode.on.net>
Message-ID: <6B3FDC5D-BF59-4D81-A33F-B9F948269F45@internode.on.net>

On further investigation, I'm wondering if this is a troublesome line in the Antlr debug classes:

https://fisheye2.atlassian.com/browse/antlr/runtime/Java/src/main/java/org/antlr/runtime/debug/RemoteDebugEventSocketListener.java?r=7009#l275

It appears to expect a boolean parameter after a numeric one. I used Wireshark and observed that no boolean parameter is being provided by Antlrworks. Would it be useful to default to false for this parameter if there is nothing provided in terms of providing backward compatibility; I see that the change was made as part of 7009:

https://fisheye2.atlassian.com/changelog/antlr/?cs=7009

Kind regards,
Christopher

On 13/12/2010, at 9:55 AM, Christopher Hunt wrote:

> Just out of interest, I reverted to 1.4 and had the same problem. So, while there may be some other problem with 1.4.1, there is probably and issue with my grammar. Here's the grammar so far in case anyone has thoughts (it parses the zoneinfo database (1) - I'll release this to the ANTLR site when finished):
> 
> /*
>  * Copyright 2010 Class Action P/L
>  *
>  * Licensed under the Apache License, Version 2.0 (the "License");
>  * you may not use this file except in compliance with the License.
>  * You may obtain a copy of the License at
>  *
>  *      http://www.apache.org/licenses/LICENSE-2.0
>  *
>  * Unless required by applicable law or agreed to in writing, software
>  * distributed under the License is distributed on an "AS IS" BASIS,
>  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
>  * See the License for the specific language governing permissions and
>  * limitations under the License.
>  */
>  
> grammar Zoneinfo;
> 
> options {
> 	output=AST;
> 	ASTLabelType=CommonTree;
> 	language=Java;
> }
> 	
> @header {
> 	package com.classactionpl.tz;
> }
> 
> @lexer::header {
> 	package com.classactionpl.tz;
> }
> 
> line
> 	: (ruleLine | zoneLine | linkLine | NEWLINE)*
> 	;
> 
> ruleLine
> 	: 'Rule' ruleName ruleFrom ruleTo ruleType ruleIn ruleOn ruleAt ruleSave ruleLetters NEWLINE
> 	;
> 
> zoneLine
> 	: 'Zone' zoneName zoneGmtOffset zoneRules zoneFormat 
> 	(zoneUntil NEWLINE+ zoneGmtOffset zoneRules zoneFormat)* 
> 	NEWLINE
> 	;
> 
> linkLine
> 	: 'Link' linkFrom linkTo NEWLINE
> 	;
> 
> ruleName
> 	: ID
> 	;
> 	
> ruleFrom
> 	: INT | YEAR_MINMAX
> 	;
> 	
> ruleTo
> 	: INT | YEAR_MINMAX | ONLY_YEAR
> 	;
> 	
> ruleType
> 	: '-' | YEAR_TYPE
> 	;
> 	
> ruleIn
> 	: MONTH
> 	;
> 	
> ruleOn
> 	: INT | LAST_DAY | (DAY_OF_WEEK DAY_COMPARATOR INT)
> 	;
> 	
> ruleAt
> 	: '-' | (positiveTime TIME_OF_DAY_SUFFIX?)
> 	;
> 	
> ruleSave
> 	: '-' | positiveTime
> 	;
> 	
> ruleLetters
> 	: '-' | ID
> 	;
> 
> zoneName
> 	: ID
> 	;
> 
> zoneGmtOffset
> 	: offset
> 	;
> 	
> zoneRules
> 	: '-' | positiveTime | ID
> 	;
> 	
> zoneFormat
> 	: ID ('/' ID)?
> 	;
> 
> zoneUntil
> 	: INT (ruleIn (ruleOn ruleAt?)?)?
> 	;
> 
> linkFrom
> 	: ID
> 	;
> 	
> linkTo
> 	: ID
> 	;
> 	
> offset
> 	: '-'? positiveTime
> 	;
> 
> positiveTime
> 	: INT (':' INT (':' INT)?)?
> 	;
> 
> YEAR_MINMAX
> 	: 'min' | 'max'
> 	;
> 
> ONLY_YEAR
> 	: 'only'
> 	;
> 	
> YEAR_TYPE
> 	: 'even' | 'odd' | 'uspres' | 'nonpres' | 'nonuspres'
> 	;
> 
> MONTH
> 	: 'Jan' 'uary'? 
> 	| 'Feb' 'ruary'? 
> 	| 'Mar' 'ch'? 
> 	| 'Apr' 'il'? 
> 	| 'May' 
> 	| 'Jun' 'e'? 
> 	| 'Jul' 'y'? 
> 	| 'Aug' 'ust'? 
> 	| 'Sep' 'tember'? 
> 	| 'Oct' 'ober'? 
> 	| 'Nov' 'ember'? 
> 	| 'Dec' 'ember'?
> 	;
> 
> LAST_DAY
> 	: 'last' '-'? DAY_OF_WEEK
> 	;
> 
> DAY_OF_WEEK 
> 	: 'Sun' 'day'? 
> 	| 'Mon' 'day'? 
> 	| 'Tue' 'sday'? 
> 	| 'Wed' 'nesday'? 
> 	| 'Thu' 'rsday'? 
> 	| 'Fri' 'day'? 
> 	| 'Sat' 'urday'?
> 	;
> 	
> DAY_COMPARATOR
> 	: '<=' | '>='
> 	;
> 
> TIME_OF_DAY_SUFFIX
> 	: 'w' | 's' | 'u' | 'g' | 'z'
> 	;
> 
> INT
> 	: ('0'..'9')+
> 	;
> 
> ID
> 	: ('a'..'z'|'A'..'Z'|'%')('a'..'z'|'A'..'Z'|'0'..'9'|'%'|'/'|'_'|'-')*
> 	;
> 
> NEWLINE
> 	: ('#' ~('\n'|'\r')*)? '\r'? '\n' | EOF
>     	;
> 
> WS
>     	: (' ' | '\t') {skip();}
>     	;
> 
> 
> Kind regards,
> Christopher
> 
> (1) http://www.twinsun.com/tz/tz-link.htm
> 
> On 10/12/2010, at 10:08 PM, Christopher Hunt wrote:
> 
>> Hi there,
>> 
>> I'm using Antlrworks v.1.4.1 on Mac OS X 10.6.5 and find that I cannot debug my grammar, despite all being well via the interpreter.
>> 
>> Here are my steps:
>> 1. Open a grammar
>> 2. Run/Debug...
>> 3. Select a file as input (makes no difference if I use the text option) and confirm
>> 
>> I then receive the generating/connecting messages and note that a socket connection is established i.e.:
>> 
>> tcp4       0      0  127.0.0.1.49100        127.0.0.1.60879        ESTABLISHED
>> tcp4      27      0  127.0.0.1.60879        127.0.0.1.49100        ESTABLISHED
>> tcp46      0      0  *.49100                *.*                    LISTEN
>> 
>> Clicking on any of the play buttons (step, step over etc.), appears to do nothing. The only event shown is "commence". If I stop the debugger I have to click the stop button twice whereupon it force quits (a single stop doesn't appear to do anything).
>> 
>> Are there known issues with my configuration?
>> 
>> Thanks for your help.
>> 
>> Kind regards,
>> Christopher
> 


From parrt at cs.usfca.edu  Sun Dec 12 20:07:00 2010
From: parrt at cs.usfca.edu (Terence Parr)
Date: Sun, 12 Dec 2010 20:07:00 -0800
Subject: [antlr-interest] Antlrworks 1.4.1,
	OS X 10.6.5 and debugging issues
In-Reply-To: <6B3FDC5D-BF59-4D81-A33F-B9F948269F45@internode.on.net>
References: <75CAFA27-9737-42F8-BA1B-B5E5499686AA@internode.on.net>
	<424B0EE9-B13B-49E2-B297-F9C60D425F58@internode.on.net>
	<6B3FDC5D-BF59-4D81-A33F-B9F948269F45@internode.on.net>
Message-ID: <FDBE10F4-029C-4223-88A3-1943106F61A9@cs.usfca.edu>

That's what i can't figure out. why does it compile? Oh, i get it. it's the network protocol. changed the interface but NOT the protocol. doh. ok, i'll fix tomrrow
T
On Dec 12, 2010, at 8:04 PM, Christopher Hunt wrote:

> On further investigation, I'm wondering if this is a troublesome line in the Antlr debug classes:
> 
> https://fisheye2.atlassian.com/browse/antlr/runtime/Java/src/main/java/org/antlr/runtime/debug/RemoteDebugEventSocketListener.java?r=7009#l275
> 
> It appears to expect a boolean parameter after a numeric one. I used Wireshark and observed that no boolean parameter is being provided by Antlrworks. Would it be useful to default to false for this parameter if there is nothing provided in terms of providing backward compatibility; I see that the change was made as part of 7009:
> 
> https://fisheye2.atlassian.com/changelog/antlr/?cs=7009
> 
> Kind regards,
> Christopher
> 
> On 13/12/2010, at 9:55 AM, Christopher Hunt wrote:
> 
>> Just out of interest, I reverted to 1.4 and had the same problem. So, while there may be some other problem with 1.4.1, there is probably and issue with my grammar. Here's the grammar so far in case anyone has thoughts (it parses the zoneinfo database (1) - I'll release this to the ANTLR site when finished):
>> 
>> /*
>>  * Copyright 2010 Class Action P/L
>>  *
>>  * Licensed under the Apache License, Version 2.0 (the "License");
>>  * you may not use this file except in compliance with the License.
>>  * You may obtain a copy of the License at
>>  *
>>  *      http://www.apache.org/licenses/LICENSE-2.0
>>  *
>>  * Unless required by applicable law or agreed to in writing, software
>>  * distributed under the License is distributed on an "AS IS" BASIS,
>>  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
>>  * See the License for the specific language governing permissions and
>>  * limitations under the License.
>>  */
>>  
>> grammar Zoneinfo;
>> 
>> options {
>> 	output=AST;
>> 	ASTLabelType=CommonTree;
>> 	language=Java;
>> }
>> 	
>> @header {
>> 	package com.classactionpl.tz;
>> }
>> 
>> @lexer::header {
>> 	package com.classactionpl.tz;
>> }
>> 
>> line
>> 	: (ruleLine | zoneLine | linkLine | NEWLINE)*
>> 	;
>> 
>> ruleLine
>> 	: 'Rule' ruleName ruleFrom ruleTo ruleType ruleIn ruleOn ruleAt ruleSave ruleLetters NEWLINE
>> 	;
>> 
>> zoneLine
>> 	: 'Zone' zoneName zoneGmtOffset zoneRules zoneFormat 
>> 	(zoneUntil NEWLINE+ zoneGmtOffset zoneRules zoneFormat)* 
>> 	NEWLINE
>> 	;
>> 
>> linkLine
>> 	: 'Link' linkFrom linkTo NEWLINE
>> 	;
>> 
>> ruleName
>> 	: ID
>> 	;
>> 	
>> ruleFrom
>> 	: INT | YEAR_MINMAX
>> 	;
>> 	
>> ruleTo
>> 	: INT | YEAR_MINMAX | ONLY_YEAR
>> 	;
>> 	
>> ruleType
>> 	: '-' | YEAR_TYPE
>> 	;
>> 	
>> ruleIn
>> 	: MONTH
>> 	;
>> 	
>> ruleOn
>> 	: INT | LAST_DAY | (DAY_OF_WEEK DAY_COMPARATOR INT)
>> 	;
>> 	
>> ruleAt
>> 	: '-' | (positiveTime TIME_OF_DAY_SUFFIX?)
>> 	;
>> 	
>> ruleSave
>> 	: '-' | positiveTime
>> 	;
>> 	
>> ruleLetters
>> 	: '-' | ID
>> 	;
>> 
>> zoneName
>> 	: ID
>> 	;
>> 
>> zoneGmtOffset
>> 	: offset
>> 	;
>> 	
>> zoneRules
>> 	: '-' | positiveTime | ID
>> 	;
>> 	
>> zoneFormat
>> 	: ID ('/' ID)?
>> 	;
>> 
>> zoneUntil
>> 	: INT (ruleIn (ruleOn ruleAt?)?)?
>> 	;
>> 
>> linkFrom
>> 	: ID
>> 	;
>> 	
>> linkTo
>> 	: ID
>> 	;
>> 	
>> offset
>> 	: '-'? positiveTime
>> 	;
>> 
>> positiveTime
>> 	: INT (':' INT (':' INT)?)?
>> 	;
>> 
>> YEAR_MINMAX
>> 	: 'min' | 'max'
>> 	;
>> 
>> ONLY_YEAR
>> 	: 'only'
>> 	;
>> 	
>> YEAR_TYPE
>> 	: 'even' | 'odd' | 'uspres' | 'nonpres' | 'nonuspres'
>> 	;
>> 
>> MONTH
>> 	: 'Jan' 'uary'? 
>> 	| 'Feb' 'ruary'? 
>> 	| 'Mar' 'ch'? 
>> 	| 'Apr' 'il'? 
>> 	| 'May' 
>> 	| 'Jun' 'e'? 
>> 	| 'Jul' 'y'? 
>> 	| 'Aug' 'ust'? 
>> 	| 'Sep' 'tember'? 
>> 	| 'Oct' 'ober'? 
>> 	| 'Nov' 'ember'? 
>> 	| 'Dec' 'ember'?
>> 	;
>> 
>> LAST_DAY
>> 	: 'last' '-'? DAY_OF_WEEK
>> 	;
>> 
>> DAY_OF_WEEK 
>> 	: 'Sun' 'day'? 
>> 	| 'Mon' 'day'? 
>> 	| 'Tue' 'sday'? 
>> 	| 'Wed' 'nesday'? 
>> 	| 'Thu' 'rsday'? 
>> 	| 'Fri' 'day'? 
>> 	| 'Sat' 'urday'?
>> 	;
>> 	
>> DAY_COMPARATOR
>> 	: '<=' | '>='
>> 	;
>> 
>> TIME_OF_DAY_SUFFIX
>> 	: 'w' | 's' | 'u' | 'g' | 'z'
>> 	;
>> 
>> INT
>> 	: ('0'..'9')+
>> 	;
>> 
>> ID
>> 	: ('a'..'z'|'A'..'Z'|'%')('a'..'z'|'A'..'Z'|'0'..'9'|'%'|'/'|'_'|'-')*
>> 	;
>> 
>> NEWLINE
>> 	: ('#' ~('\n'|'\r')*)? '\r'? '\n' | EOF
>>     	;
>> 
>> WS
>>     	: (' ' | '\t') {skip();}
>>     	;
>> 
>> 
>> Kind regards,
>> Christopher
>> 
>> (1) http://www.twinsun.com/tz/tz-link.htm
>> 
>> On 10/12/2010, at 10:08 PM, Christopher Hunt wrote:
>> 
>>> Hi there,
>>> 
>>> I'm using Antlrworks v.1.4.1 on Mac OS X 10.6.5 and find that I cannot debug my grammar, despite all being well via the interpreter.
>>> 
>>> Here are my steps:
>>> 1. Open a grammar
>>> 2. Run/Debug...
>>> 3. Select a file as input (makes no difference if I use the text option) and confirm
>>> 
>>> I then receive the generating/connecting messages and note that a socket connection is established i.e.:
>>> 
>>> tcp4       0      0  127.0.0.1.49100        127.0.0.1.60879        ESTABLISHED
>>> tcp4      27      0  127.0.0.1.60879        127.0.0.1.49100        ESTABLISHED
>>> tcp46      0      0  *.49100                *.*                    LISTEN
>>> 
>>> Clicking on any of the play buttons (step, step over etc.), appears to do nothing. The only event shown is "commence". If I stop the debugger I have to click the stop button twice whereupon it force quits (a single stop doesn't appear to do anything).
>>> 
>>> Are there known issues with my configuration?
>>> 
>>> Thanks for your help.
>>> 
>>> Kind regards,
>>> Christopher
>> 
> 


From parrt at cs.usfca.edu  Mon Dec 13 10:20:42 2010
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon, 13 Dec 2010 10:20:42 -0800
Subject: [antlr-interest] ANTLRWorks - Java null pointer exception
In-Reply-To: <1292190498.5484.5.camel@vdg-portable>
References: <1292190498.5484.5.camel@vdg-portable>
Message-ID: <268F2A79-5347-4CC6-8FC4-29E00E16A50B@cs.usfca.edu>

I have identified this exception as the problem preventing debugging... I will push out 1.4.2 within a day or so.

Can I send you directly a test jar?
Ter
On Dec 12, 2010, at 1:48 PM, Vincent De Groote wrote:

> Hello,
> 
> I downloaded today the ANTLRWORKS-1.4.1 package (antlrworks-1.4.1.jar).
> 
> I started the jar file with
> 
> java -jar ../Downloads/antlrworks-1.4.1.jar
> 
> When I use the sample expr grammar found on antlr site, the debugger
> stops working a few steps after the beginning with java null pointer
> exceptions on the console screen:
> 
> 
> [---- CONSOLE OUTPUT
> --------------------------------------------------------------------------] 
> 
> Checking Grammar expr.g...
> 
> Note: /home/vdg/antlr-test/output/exprParser.java uses unchecked or
> unsafe operations.
> 
> Note: Recompile with -Xlint:unchecked for details.
> 
> Note: /home/vdg/antlr-test/output/exprParser.java uses unchecked or
> unsafe operations.
> 
> Note: Recompile with -Xlint:unchecked for details.
> 
> java.lang.NullPointerException
> java.lang.NullPointerException
> 	at
> org.antlr.runtime.debug.RemoteDebugEventSocketListener.dispatch(RemoteDebugEventSocketListener.java:275)
> 	at
> org.antlr.runtime.debug.RemoteDebugEventSocketListener.eventHandler(RemoteDebugEventSocketListener.java:176)
> 	at
> org.antlr.runtime.debug.RemoteDebugEventSocketListener.run(RemoteDebugEventSocketListener.java:472)
> 	at java.lang.Thread.run(Thread.java:636)
> 
> [---- CONSOLE OUTPUT: end
> --------------------------------------------------------------------------]
> 
> 
> I have the same result with another grammar I downloaded from the site.
> 
> Any idea ?
> 
> Thanks for your help
> 
> Vincent De Groote
> 
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address


From parrt at cs.usfca.edu  Mon Dec 13 10:37:50 2010
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon, 13 Dec 2010 10:37:50 -0800
Subject: [antlr-interest] please try antlrworks-1.4.2
Message-ID: <08E6298F-A5BB-4561-AB0A-F61191D36413@cs.usfca.edu>

Hi, I have and don't be release candidate into the download directory:

http://www.antlr.org/download

please give it a try to see if it fixes the debug issues.

Ter


From sasmekoll at gmail.com  Sun Dec 12 18:47:54 2010
From: sasmekoll at gmail.com (Vovan)
Date: Mon, 13 Dec 2010 05:47:54 +0300
Subject: [antlr-interest] =?utf-8?b?0J3QvtCy0L7QtSDRgdC+0L7QsdGJ0LXQvdC4?=
	=?utf-8?b?0LU=?=
Message-ID: <4d065483.c406cc0a.2f5c.1987@mx.google.com>

http://samec.org.ua/

From james1018 at gmail.com  Mon Dec 13 11:22:20 2010
From: james1018 at gmail.com (James Reid)
Date: Mon, 13 Dec 2010 14:22:20 -0500
Subject: [antlr-interest] please try antlrworks-1.4.2
In-Reply-To: <08E6298F-A5BB-4561-AB0A-F61191D36413@cs.usfca.edu>
References: <08E6298F-A5BB-4561-AB0A-F61191D36413@cs.usfca.edu>
Message-ID: <AANLkTi=qcOGmrMWfTVfD3aTA6=z+0-DjTMgH6pQDJDwC@mail.gmail.com>

It fixed my issues.  Thanks!

James

On Mon, Dec 13, 2010 at 1:37 PM, Terence Parr <parrt at cs.usfca.edu> wrote:

> Hi, I have and don't be release candidate into the download directory:
>
> http://www.antlr.org/download
>
> please give it a try to see if it fixes the debug issues.
>
> Ter
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>

From parrt at cs.usfca.edu  Mon Dec 13 11:25:18 2010
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon, 13 Dec 2010 11:25:18 -0800
Subject: [antlr-interest] please try antlrworks-1.4.2
In-Reply-To: <AANLkTi=qcOGmrMWfTVfD3aTA6=z+0-DjTMgH6pQDJDwC@mail.gmail.com>
References: <08E6298F-A5BB-4561-AB0A-F61191D36413@cs.usfca.edu>
	<AANLkTi=qcOGmrMWfTVfD3aTA6=z+0-DjTMgH6pQDJDwC@mail.gmail.com>
Message-ID: <B034CE02-6375-42E7-8AC9-DEB2C703F968@cs.usfca.edu>

excellent. anybody else?
T
On Dec 13, 2010, at 11:22 AM, James Reid wrote:

> It fixed my issues.  Thanks!
> 
> James
> 
> On Mon, Dec 13, 2010 at 1:37 PM, Terence Parr <parrt at cs.usfca.edu> wrote:
> 
>> Hi, I have and don't be release candidate into the download directory:
>> 
>> http://www.antlr.org/download
>> 
>> please give it a try to see if it fixes the debug issues.
>> 
>> Ter
>> 
>> 
>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>> Unsubscribe:
>> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>> 
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address


From maxgbr at hotmail.it  Mon Dec 13 15:52:44 2010
From: maxgbr at hotmail.it (Massimiliano Donini)
Date: Tue, 14 Dec 2010 00:52:44 +0100
Subject: [antlr-interest] AntrlWorks Rule Grouping
Message-ID: <BLU0-SMTP195EED0830AB47E3E3B3EFEB0120@phx.gbl>


  Hi,
Under Windows 7 (x64) i cannot get AW rule grouping to work.
Can be an issue or is supported only for Mac?

Best Regards
Max

From jimi at temporal-wave.com  Mon Dec 13 16:07:48 2010
From: jimi at temporal-wave.com (Jim Idle)
Date: Mon, 13 Dec 2010 16:07:48 -0800
Subject: [antlr-interest] AntrlWorks Rule Grouping
In-Reply-To: <BLU0-SMTP195EED0830AB47E3E3B3EFEB0120@phx.gbl>
References: <BLU0-SMTP195EED0830AB47E3E3B3EFEB0120@phx.gbl>
Message-ID: <01ab01cb9b22$f0ddeb60$d299c220$@temporal-wave.com>

Rule grouping never worked correctly I think, it isn't specific to any
system. However, it was developed on a MAC so it is more likely to work
there I guess.

Jim

> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of Massimiliano Donini
> Sent: Monday, December 13, 2010 3:53 PM
> To: ANTLR Interest
> Subject: [antlr-interest] AntrlWorks Rule Grouping
> 
> 
>   Hi,
> Under Windows 7 (x64) i cannot get AW rule grouping to work.
> Can be an issue or is supported only for Mac?
> 
> Best Regards
> Max
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
> email-address


From parrt at cs.usfca.edu  Mon Dec 13 17:35:52 2010
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon, 13 Dec 2010 17:35:52 -0800
Subject: [antlr-interest] ANTLRWorks 1.4.2 released
Message-ID: <5F0D5F76-945C-4FFB-8506-D201A664C4D8@cs.usfca.edu>

hi. Fixed bug where it wouldn't debug :)

http://antlr.org/works/index.html

Or ask ask AW to update it self in help menu.

Ter

From mdonini at gpi.it  Mon Dec 13 23:15:51 2010
From: mdonini at gpi.it (Massimiliano Donini)
Date: Tue, 14 Dec 2010 08:15:51 +0100
Subject: [antlr-interest] AntrlWorks Rule Grouping
In-Reply-To: <20101214000757.3026D12F1@mailweb.gpi.it>
References: <BLU0-SMTP195EED0830AB47E3E3B3EFEB0120@phx.gbl>
	<20101214000757.3026D12F1@mailweb.gpi.it>
Message-ID: <20101214071547.618E212F1@mailweb.gpi.it>

Ok,
thanks for the reply Jim.
Maybe it could be a future improvement :)

Best regards
Max


Jim Idle ha scritto:
> Rule grouping never worked correctly I think, it isn't specific to any
> system. However, it was developed on a MAC so it is more likely to work
> there I guess.
>
> Jim
>
>   
>> -----Original Message-----
>> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
>> bounces at antlr.org] On Behalf Of Massimiliano Donini
>> Sent: Monday, December 13, 2010 3:53 PM
>> To: ANTLR Interest
>> Subject: [antlr-interest] AntrlWorks Rule Grouping
>>
>>
>>   Hi,
>> Under Windows 7 (x64) i cannot get AW rule grouping to work.
>> Can be an issue or is supported only for Mac?
>>
>> Best Regards
>> Max
>>
>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
>> email-address
>>     
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>
>   


From simon.werbung at gmx.de  Tue Dec 14 03:46:34 2010
From: simon.werbung at gmx.de (Simon Manschitz)
Date: Tue, 14 Dec 2010 12:46:34 +0100
Subject: [antlr-interest] How to execute a tree multiple times?
Message-ID: <20101214114634.46780@gmx.net>

Hallo,

if have to unroll a fore loop inside my AST.

For example if have a tree like: (for (= a (: 1 4)) (= output (+ output a))

where a = 1:4 is the condition and (= output (+ output a) is the body of the for loop.

This tree should be create an output like:

a = 1;
output = output + a;
a = 2;
output = output + a;
a = 3;
output = output + a;
a = 4;
output = output + a;

I have other rules that execute the expressions inside the for loop. This is my rule of the for loop:

for_command:
  ^(FOR assign_expression prog*);

So i want to determine the length of the matrix of assign_expression and execute (prog*) length times. Is it possible to execute the {} Code of a tree several times?

Something like:
code=(prog*){
    code.tree.execute();
}

Bye, Simon.

-- 
GMX DSL Doppel-Flat ab 19,99 &euro;/mtl.! Jetzt auch mit 
gratis Notebook-Flat! http://portal.gmx.net/de/go/dsl

From conan at irconan.co.uk  Tue Dec 14 04:14:47 2010
From: conan at irconan.co.uk (Richard Connon)
Date: Tue, 14 Dec 2010 12:14:47 +0000
Subject: [antlr-interest] getParent() function on ANTLR3_BASE_TREE_struct
Message-ID: <4D075FB7.90305@irconan.co.uk>

I've been trying to use the getParent() function on 
ANTLR3_BASE_TREE_struct but it seems that it's returning invalid values.

It was my understanding that this function would either return the 
address of the parent node in the tree (iff the node isn't the root) or 
NULL (iff the node is).

Is this the case?

From jmurray at aerotech.com  Tue Dec 14 07:48:10 2010
From: jmurray at aerotech.com (Justin Murray)
Date: Tue, 14 Dec 2010 10:48:10 -0500
Subject: [antlr-interest] #defines in C target
Message-ID: <6B458D23F5D4A24ABCDB3C78EA97393B01FC9FEA@EXCH-VIRTUAL.aerotechad.com>

Hello,

 

I am building a parser for a C target, and am running into issues with
the generated #defines from the lexer tokens. Essentially, the lexer
names that were chosen in some cases conflict with other #defines in the
code (either from our own code, or from standard libraries like
Windows.h). While I realize that I could just rename the lexer rules to
remove the conflict, this makes the grammar file less readable, and at
this point is a considerable amount of work (our language has hundreds
of keywords). Is it possible to tell the lexer generator to
prefix/postfix all of these defines to make them more unique, while
preserving the nice, readable grammar definition file?

 

Thank you,

 

Justin Murray 
Software Engineer 
jmurray at aerotech.com

Aerotech, Inc. 
101 Zeta Drive 
Pittsburgh, PA 15238 
412-963-7470

 


From jimi at temporal-wave.com  Tue Dec 14 09:35:24 2010
From: jimi at temporal-wave.com (Jim Idle)
Date: Tue, 14 Dec 2010 09:35:24 -0800
Subject: [antlr-interest] #defines in C target
In-Reply-To: <6B458D23F5D4A24ABCDB3C78EA97393B01FC9FEA@EXCH-VIRTUAL.aerotechad.com>
References: <6B458D23F5D4A24ABCDB3C78EA97393B01FC9FEA@EXCH-VIRTUAL.aerotechad.com>
Message-ID: <028101cb9bb5$49e659d0$ddb30d70$@temporal-wave.com>

I had wanted to do that but a limitation in the code generation templates
(which I no longer remember) meant that I could not. You need to suffix your
token names with _ as that is least intrusive. You need only do that for the
tokens that clash and you will find it isn't as much work as you think using
visual studio. You will not notice. The other way I do it is to prefix with
K such as KNULL KTRUE and so on.

Jim



> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of Justin Murray
> Sent: Tuesday, December 14, 2010 7:48 AM
> To: antlr-interest at antlr.org
> Subject: [antlr-interest] #defines in C target
> 
> Hello,
> 
> 
> 
> I am building a parser for a C target, and am running into issues with
> the generated #defines from the lexer tokens. Essentially, the lexer
> names that were chosen in some cases conflict with other #defines in
> the code (either from our own code, or from standard libraries like
> Windows.h). While I realize that I could just rename the lexer rules to
> remove the conflict, this makes the grammar file less readable, and at
> this point is a considerable amount of work (our language has hundreds
> of keywords). Is it possible to tell the lexer generator to
> prefix/postfix all of these defines to make them more unique, while
> preserving the nice, readable grammar definition file?
> 
> 
> 
> Thank you,
> 
> 
> 
> Justin Murray
> Software Engineer
> jmurray at aerotech.com
> 
> Aerotech, Inc.
> 101 Zeta Drive
> Pittsburgh, PA 15238
> 412-963-7470
> 
> 
> 
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
> email-address


From tenajahiker at yahoo.com  Tue Dec 14 14:35:55 2010
From: tenajahiker at yahoo.com (Tenaja)
Date: Tue, 14 Dec 2010 14:35:55 -0800 (PST)
Subject: [antlr-interest] Is the output license the same as the source?
Message-ID: <648371.68504.qm@web110009.mail.gq1.yahoo.com>

Is the license on antlr's output the same as on antlr's source?
?
Thanks!
?
T


      

From parrt at cs.usfca.edu  Tue Dec 14 15:48:53 2010
From: parrt at cs.usfca.edu (Terence Parr)
Date: Tue, 14 Dec 2010 15:48:53 -0800
Subject: [antlr-interest] Is the output license the same as the source?
In-Reply-To: <648371.68504.qm@web110009.mail.gq1.yahoo.com>
References: <648371.68504.qm@web110009.mail.gq1.yahoo.com>
Message-ID: <EC8F12DD-EE73-450B-937D-84EE568EFEC4@cs.usfca.edu>

you own the output
Ter
On Dec 14, 2010, at 2:35 PM, Tenaja wrote:

> Is the license on antlr's output the same as on antlr's source?
>  
> Thanks!
>  
> T
> 
> 
> 
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address


From sstevenson638 at gmail.com  Tue Dec 14 19:10:09 2010
From: sstevenson638 at gmail.com (Scott Stevenson)
Date: Tue, 14 Dec 2010 21:10:09 -0600
Subject: [antlr-interest] Trouble with Templates in Tree Grammar
Message-ID: <AANLkTik7wUW=fdQvwJQ9TykZKhHJEfEiqzqTp7VYy5=T@mail.gmail.com>

I learning how to use templates in a tree grammar.  I'm mimicking some of
the examples in the ANTLR Reference.  I have a rule:

 primary
:    INT          -> primaryTemplate(text={$INT.text})
|    DECIMAL -> primaryTemplate(text={$DECIMAL.text})
|    ID            -> primaryTemplate(text={$ID.text})
;

where primaryTemplate is the name of the template to evaluate.

In the tree parser code it declares $INT to be type Object.
Object INT4;

and later tries to invoke INT4.getText().  This gives an error because
Object does not have method getText().

Can anyone tell me what am I doing wrong?  This looks just like the example
in the book.

Thanks in advance.

From parrt at cs.usfca.edu  Tue Dec 14 20:56:56 2010
From: parrt at cs.usfca.edu (Terence Parr)
Date: Tue, 14 Dec 2010 20:56:56 -0800
Subject: [antlr-interest] Trouble with Templates in Tree Grammar
In-Reply-To: <AANLkTik7wUW=fdQvwJQ9TykZKhHJEfEiqzqTp7VYy5=T@mail.gmail.com>
References: <AANLkTik7wUW=fdQvwJQ9TykZKhHJEfEiqzqTp7VYy5=T@mail.gmail.com>
Message-ID: <6AB8AD6A-56D3-48B9-8A71-77F7261B2528@cs.usfca.edu>

try setting ASTLabelType option in grammar but that .text stuff should work. i use it all the time.
Ter
On Dec 14, 2010, at 7:10 PM, Scott Stevenson wrote:

> I learning how to use templates in a tree grammar.  I'm mimicking some of
> the examples in the ANTLR Reference.  I have a rule:
> 
> primary
> :    INT          -> primaryTemplate(text={$INT.text})
> |    DECIMAL -> primaryTemplate(text={$DECIMAL.text})
> |    ID            -> primaryTemplate(text={$ID.text})
> ;
> 
> where primaryTemplate is the name of the template to evaluate.
> 
> In the tree parser code it declares $INT to be type Object.
> Object INT4;
> 
> and later tries to invoke INT4.getText().  This gives an error because
> Object does not have method getText().
> 
> Can anyone tell me what am I doing wrong?  This looks just like the example
> in the book.
> 
> Thanks in advance.
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address


From damien.cassou at gmail.com  Wed Dec 15 08:53:20 2010
From: damien.cassou at gmail.com (Damien Cassou)
Date: Wed, 15 Dec 2010 17:53:20 +0100
Subject: [antlr-interest] Strip does not work
Message-ID: <AANLkTikg0Oh54tW4+QUX4J0eAtF0HksDFwcj-tOxg0VR@mail.gmail.com>

Hi,

running org.antlr.tool.Strip on the attached grammar produces an
incorrect result and error messages :

=====================================
$ java -classpath ~/Desktop/antlr-3.3-complete.jar org.antlr.tool.Strip test.g
test.g line 15:15 mismatched input '<' expecting ')'
test.g line 15:43 extraneous input ')' expecting ';'
grammar test;

options {
	language = Java;
	output = AST;
	ASTLabelType = ASTNode;
}

tokens {
DOCUMENT;
}

spec
  : type_def*
  )
;

type_def: ID;

ID: 'A'..'Z' ('a'..'z' | 'A'..'Z' | '0'..'9' | '_')*;
=====================================


I already reported this 1 year and a half ago. I would have like to
submit a bug report on jira but can't create an account there.


-- 
Damien Cassou
http://damiencassou.seasidehosting.st

"Lambdas are relegated to relative obscurity until Java makes them
popular by not having them." James Iry
-------------- next part --------------
A non-text attachment was scrubbed...
Name: test.g
Type: application/octet-stream
Size: 250 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20101215/a61fcb2e/attachment.obj 

From parrt at cs.usfca.edu  Wed Dec 15 09:06:43 2010
From: parrt at cs.usfca.edu (Terence Parr)
Date: Wed, 15 Dec 2010 09:06:43 -0800
Subject: [antlr-interest] Strip does not work
In-Reply-To: <AANLkTikg0Oh54tW4+QUX4J0eAtF0HksDFwcj-tOxg0VR@mail.gmail.com>
References: <AANLkTikg0Oh54tW4+QUX4J0eAtF0HksDFwcj-tOxg0VR@mail.gmail.com>
Message-ID: <7A939C3A-86D9-474F-98E3-2F29EB8155DA@cs.usfca.edu>

sorry but there are lots of bugs i don't have time to fix in last 1.5 years.    must be an error in ANTLRv3.g if you want fix it.
Ter


From cummings at kjchome.homeip.net  Wed Dec 15 09:11:16 2010
From: cummings at kjchome.homeip.net (Kevin J. Cummings)
Date: Wed, 15 Dec 2010 12:11:16 -0500
Subject: [antlr-interest] Strip does not work
In-Reply-To: <AANLkTikg0Oh54tW4+QUX4J0eAtF0HksDFwcj-tOxg0VR@mail.gmail.com>
References: <AANLkTikg0Oh54tW4+QUX4J0eAtF0HksDFwcj-tOxg0VR@mail.gmail.com>
Message-ID: <4D08F6B4.7030603@kjchome.homeip.net>

On 12/15/2010 11:53 AM, Damien Cassou wrote:
> spec
>   : type_def*
>   )
> ;

What is the ")" doing there?  Isn't that an error?  As it is typed it is
the closing group character, but there is no opening group character "("....

-- 
Kevin J. Cummings
kjchome at rcn.com
cummings at kjchome.homeip.net
cummings at kjc386.framingham.ma.us
Registered Linux User #1232 (http://counter.li.org)

From damien.cassou at gmail.com  Wed Dec 15 09:16:48 2010
From: damien.cassou at gmail.com (Damien Cassou)
Date: Wed, 15 Dec 2010 18:16:48 +0100
Subject: [antlr-interest] Strip does not work
In-Reply-To: <4D08F6B4.7030603@kjchome.homeip.net>
References: <AANLkTikg0Oh54tW4+QUX4J0eAtF0HksDFwcj-tOxg0VR@mail.gmail.com>
	<4D08F6B4.7030603@kjchome.homeip.net>
Message-ID: <AANLkTikPHJqC_Hb-yw-HbBnw7u8smRfvQ6SfpkaiL2Tm@mail.gmail.com>

On Wed, Dec 15, 2010 at 6:11 PM, Kevin J. Cummings
<cummings at kjchome.homeip.net> wrote:
> On 12/15/2010 11:53 AM, Damien Cassou wrote:
>> spec
>> ? : type_def*
>> ? )
>> ;
>
> What is the ")" doing there? ?Isn't that an error? ?As it is typed it is
> the closing group character, but there is no opening group character "("....

The attached grammar is correct. Only in the Strip output is the ")" present.

-- 
Damien Cassou
http://damiencassou.seasidehosting.st

"Lambdas are relegated to relative obscurity until Java makes them
popular by not having them." James Iry

From james_ladd at hotmail.com  Wed Dec 15 13:12:03 2010
From: james_ladd at hotmail.com (James Ladd)
Date: Thu, 16 Dec 2010 08:12:03 +1100
Subject: [antlr-interest] antlr-interest Digest, Vol 73, Issue 15
In-Reply-To: <mailman.1.1292443202.3291.antlr-interest@antlr.org>
References: <mailman.1.1292443202.3291.antlr-interest@antlr.org>
Message-ID: <BAY149-w1D08DD3586260CB963A68ED140@phx.gbl>


I know the readers here have a lot of experience with current and future ANTLR plans, so 
I'm hoping this is of interest to you as it makes use of ANTLR:

The next instalment in the series Redline: Smalltalk in "small talks" has been posted:

http://blog.redline.st/2010/12/15/smalltalk-in-small-talks-the-setup/


Rgs, James. 		 	   		  

From james_ladd at hotmail.com  Wed Dec 15 13:13:02 2010
From: james_ladd at hotmail.com (James Ladd)
Date: Thu, 16 Dec 2010 08:13:02 +1100
Subject: [antlr-interest] Redline Smalltalk using ANTLR ...
In-Reply-To: <BAY149-w1D08DD3586260CB963A68ED140@phx.gbl>
References: <mailman.1.1292443202.3291.antlr-interest@antlr.org>,
	<BAY149-w1D08DD3586260CB963A68ED140@phx.gbl>
Message-ID: <BAY149-w55BE68C3CD9C94937F454EED140@phx.gbl>


I know the readers here have a lot of experience with current and future ANTLR plans, so 
I'm hoping this is of interest to you as it makes use of ANTLR:

The next instalment in the series Redline: Smalltalk in "small talks" has been posted:

http://blog.redline.st/2010/12/15/smalltalk-in-small-talks-the-setup/


Rgs, James. 		 	   		  

From parrt at cs.usfca.edu  Wed Dec 15 13:20:10 2010
From: parrt at cs.usfca.edu (Terence Parr)
Date: Wed, 15 Dec 2010 13:20:10 -0800
Subject: [antlr-interest] update to gunit
Message-ID: <D1010F09-B258-4E69-BD7E-9C5CA261A87B@cs.usfca.edu>

Hi, gunit for some reason was reporting invalid input incorrectly.  Fixed.  grab new version here:

http://www.antlr.org/depot/antlr3/main/gunit/target

Ter

From federico.bellucci at gmail.com  Thu Dec 16 07:17:28 2010
From: federico.bellucci at gmail.com (Federico Bellucci)
Date: Thu, 16 Dec 2010 16:17:28 +0100
Subject: [antlr-interest] Changing the order of statements
Message-ID: <AANLkTimxtmOfzKnox0+vm_S93iYVCwuuGvLS1-RGw6O_@mail.gmail.com>

I am working on a JavaScript to JavaScript compiler that modifies the
functions.
I am using the complete EcmaScript grammar [1] by Patrick Hulsmeijer.

I wrote a Symbol Table builder and a complete code generator based on the
Terence Parr sample in [2] and and the Hulsmeijer's tree walker.

I need to exchange the order of statements inside functions.
In particular I have to move the functions declarations on the top of the
function body (or the global scope).

Example:

stament_1;
function foo () {
  statement_a;
  function baz() {}
}

becomes:

function foo () {
  function baz() {}
  statement_a;
}
stament_1;

I tried to modify the generator, but I had problem of recursion because
functions can contain other functions. So I'm wondering about the chance to
directly modify the tree before generating the code.

What would you advise me to do?

Thank you,
Federico


[1] http://research.xebic.com/
[2] http://pragprog.com/titles/tpdsl/language-implementation-patterns

From jmurray at aerotech.com  Thu Dec 16 08:56:37 2010
From: jmurray at aerotech.com (Justin Murray)
Date: Thu, 16 Dec 2010 11:56:37 -0500
Subject: [antlr-interest] slowdown
Message-ID: <6B458D23F5D4A24ABCDB3C78EA97393B01FC9FEC@EXCH-VIRTUAL.aerotechad.com>

Hello,

 

I have started adding {actions} to my grammar, and have noticed that the
code generation started taking much longer than before. I used the
-Xwatchconversion flag to try to get an idea of what is happening. What
I found is that the generation gets to the following point:

 

attempting LL(1) DFA (d=627) for ()* loopback of 1409:3: (o= OR e2=
exprAND )*

--------------------

attempting LL(1) DFA (d=628) for ()* loopback of 1417:3: (o= AND e2=
exprBOR )*

--------------------

attempting LL(1) DFA (d=629) for ()* loopback of 1425:3: (o= BOR e2=
exprBXOR | o= BNOR e2= exprBXOR )*

--------------------

attempting LL(1) DFA (d=630) for ()* loopback of 1434:3: (o= BXOR e2=
exprBAND )*

--------------------

attempting LL(1) DFA (d=631) for ()* loopback of 1442:3: (o= BAND e2=
exprEqual | o= BNAND e2= exprEqual )*

--------------------

attempting LL(1) DFA (d=632) for ()* loopback of 1451:3: (o= ( EQ | '='
) e2= exprComp | o= NE e2= exprComp )*

--------------------

attempting LL(1) DFA (d=633) for ()* loopback of 1460:3: (o= LT_ e2=
exprShift | o= LE e2= exprShift | o= GT e2= exprShift | o= GE e2=
exprShift )*

--------------------

attempting LL(1) DFA (d=634) for ()* loopback of 1471:3: (o= '<<' e2=
exprAdd | o= '>>' e2= exprAdd )*

--------------------

attempting LL(1) DFA (d=635) for ()* loopback of 1481:3: (o= '+' e2=
exprMult | o= '-' e2= exprMult )*

decision 635 not suitable for LL(1)-optimized DFA analysis

--------------------

building lookahead DFA (d=635) for ()* loopback of 1481:3: (o= '+' e2=
exprMult | o= '-' e2= exprMult )*

convert DFA state 0 (174414 nfa states)

convert DFA state 29 (106645 nfa states)

 

It then hangs on this last line for several minutes (3 or 4), before
proceeding on with this output:

 

trying decision 635 again with k=1; reason: non-LL(*) && predicate
visible

convert DFA state 0 (174414 nfa states)

convert DFA state 29 (106645 nfa states)

convert DFA state 30 (106645 nfa states)

cost: 173 states, 160260 ms

--------------------

attempting LL(1) DFA (d=636) for ()* loopback of 1490:3: (o= '*' e2=
exprPow | o= '/' e2= exprPow | o= '%' e2= exprPow )*

 

While it is possible that I may have inadvertently changed the syntax,
for the most part I was just adding in my action code. The first
question is, should adding action code have any effect on the time it
takes to generate the code? That aside, what would cause the lengthy
hangup on that one decision? The rest of the decisions go by very
quickly.

 

Thanks,

Justin Murray 
Software Engineer 
jmurray at aerotech.com

Aerotech, Inc. 
101 Zeta Drive 
Pittsburgh, PA 15238 
412-963-7470

 


From parrt at cs.usfca.edu  Thu Dec 16 10:10:56 2010
From: parrt at cs.usfca.edu (Terence Parr)
Date: Thu, 16 Dec 2010 10:10:56 -0800
Subject: [antlr-interest] slowdown
In-Reply-To: <6B458D23F5D4A24ABCDB3C78EA97393B01FC9FEC@EXCH-VIRTUAL.aerotechad.com>
References: <6B458D23F5D4A24ABCDB3C78EA97393B01FC9FEC@EXCH-VIRTUAL.aerotechad.com>
Message-ID: <511B60BC-9460-45AE-BA08-BED629F5AEC0@cs.usfca.edu>

search for time out or Xwatchconversion 
T
On Dec 16, 2010, at 8:56 AM, Justin Murray wrote:

> Hello,
> 
> 
> 
> I have started adding {actions} to my grammar, and have noticed that the
> code generation started taking much longer than before. I used the
> -Xwatchconversion flag to try to get an idea of what is happening. What
> I found is that the generation gets to the following point:
> 
> 
> 
> attempting LL(1) DFA (d=627) for ()* loopback of 1409:3: (o= OR e2=
> exprAND )*
> 
> --------------------
> 
> attempting LL(1) DFA (d=628) for ()* loopback of 1417:3: (o= AND e2=
> exprBOR )*
> 
> --------------------
> 
> attempting LL(1) DFA (d=629) for ()* loopback of 1425:3: (o= BOR e2=
> exprBXOR | o= BNOR e2= exprBXOR )*
> 
> --------------------
> 
> attempting LL(1) DFA (d=630) for ()* loopback of 1434:3: (o= BXOR e2=
> exprBAND )*
> 
> --------------------
> 
> attempting LL(1) DFA (d=631) for ()* loopback of 1442:3: (o= BAND e2=
> exprEqual | o= BNAND e2= exprEqual )*
> 
> --------------------
> 
> attempting LL(1) DFA (d=632) for ()* loopback of 1451:3: (o= ( EQ | '='
> ) e2= exprComp | o= NE e2= exprComp )*
> 
> --------------------
> 
> attempting LL(1) DFA (d=633) for ()* loopback of 1460:3: (o= LT_ e2=
> exprShift | o= LE e2= exprShift | o= GT e2= exprShift | o= GE e2=
> exprShift )*
> 
> --------------------
> 
> attempting LL(1) DFA (d=634) for ()* loopback of 1471:3: (o= '<<' e2=
> exprAdd | o= '>>' e2= exprAdd )*
> 
> --------------------
> 
> attempting LL(1) DFA (d=635) for ()* loopback of 1481:3: (o= '+' e2=
> exprMult | o= '-' e2= exprMult )*
> 
> decision 635 not suitable for LL(1)-optimized DFA analysis
> 
> --------------------
> 
> building lookahead DFA (d=635) for ()* loopback of 1481:3: (o= '+' e2=
> exprMult | o= '-' e2= exprMult )*
> 
> convert DFA state 0 (174414 nfa states)
> 
> convert DFA state 29 (106645 nfa states)
> 
> 
> 
> It then hangs on this last line for several minutes (3 or 4), before
> proceeding on with this output:
> 
> 
> 
> trying decision 635 again with k=1; reason: non-LL(*) && predicate
> visible
> 
> convert DFA state 0 (174414 nfa states)
> 
> convert DFA state 29 (106645 nfa states)
> 
> convert DFA state 30 (106645 nfa states)
> 
> cost: 173 states, 160260 ms
> 
> --------------------
> 
> attempting LL(1) DFA (d=636) for ()* loopback of 1490:3: (o= '*' e2=
> exprPow | o= '/' e2= exprPow | o= '%' e2= exprPow )*
> 
> 
> 
> While it is possible that I may have inadvertently changed the syntax,
> for the most part I was just adding in my action code. The first
> question is, should adding action code have any effect on the time it
> takes to generate the code? That aside, what would cause the lengthy
> hangup on that one decision? The rest of the decisions go by very
> quickly.
> 
> 
> 
> Thanks,
> 
> Justin Murray 
> Software Engineer 
> jmurray at aerotech.com
> 
> Aerotech, Inc. 
> 101 Zeta Drive 
> Pittsburgh, PA 15238 
> 412-963-7470
> 
> 
> 
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address


From jeffn at photorepo.com  Thu Dec 16 17:00:53 2010
From: jeffn at photorepo.com (Jeffrey Newman)
Date: Thu, 16 Dec 2010 17:00:53 -0800
Subject: [antlr-interest] Need help getting char * string from an ID
Message-ID: <1292547653.2364.51.camel@merlin-3.private.photorepo.com>

Hi,
I'm still trying to bring up my first test parser with the C runtime.
I'm using Qt, so I have translate from C to C++ and Qt's runtime.

I have most of working, except I have not been able to get the ID
string.

Here is the grammar:

grammar T;

options {
	language = C;
}

@header {
	#include "../parserBindings.h"
}

@members {
	char buffer[256];
}

r : 'call' ID ';' {	
		sprintf(buffer, "Invoked with: \%s", $ID.text);
		debug(buffer);
	} ;
	
ID: 'a'..'z'+ ;
WS: (' ' | '\n' | '\r')+ {$channel=HIDDEN;};

The generated code in TParser looks like.

sprintf(buffer, "Invoked with: %s", (ID1->getText(ID1)));
debug(buffer);

where debug is a simple function in my C to C++ bindings.

So, how do I get a string from the grammar?
Please direct me to an example in C.


thanks

Jeffrey


From jeffn at photorepo.com  Thu Dec 16 17:32:05 2010
From: jeffn at photorepo.com (Jeffrey Newman)
Date: Thu, 16 Dec 2010 17:32:05 -0800
Subject: [antlr-interest] Need help getting char * string from an ID
In-Reply-To: <1292547653.2364.51.camel@merlin-3.private.photorepo.com>
References: <1292547653.2364.51.camel@merlin-3.private.photorepo.com>
Message-ID: <1292549525.2364.53.camel@merlin-3.private.photorepo.com>

Perseverance paid off.
I got it.
First get the antlr string.
Then use chars to 8 but (ascii) string out of the string structure.

On Thu, 2010-12-16 at 17:00 -0800, Jeffrey Newman wrote:
> Hi,
> I'm still trying to bring up my first test parser with the C runtime.
> I'm using Qt, so I have translate from C to C++ and Qt's runtime.
> 
> I have most of working, except I have not been able to get the ID
> string.
> 
> Here is the grammar:
> 
> grammar T;
> 
> options {
> 	language = C;
> }
> 
> @header {
> 	#include "../parserBindings.h"
> }
> 
> @members {
> 	char buffer[256];
> }
> 
> r : 'call' ID ';' {	
> 		sprintf(buffer, "Invoked with: \%s", $ID.text);
> 		debug(buffer);
> 	} ;
> 	
> ID: 'a'..'z'+ ;
> WS: (' ' | '\n' | '\r')+ {$channel=HIDDEN;};
> 
> The generated code in TParser looks like.
> 
> sprintf(buffer, "Invoked with: %s", (ID1->getText(ID1)));
> debug(buffer);
> 
> where debug is a simple function in my C to C++ bindings.
> 
> So, how do I get a string from the grammar?
> Please direct me to an example in C.
> 
> 
> thanks
> 
> Jeffrey
> 
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address



From jeffn at photorepo.com  Fri Dec 17 04:55:04 2010
From: jeffn at photorepo.com (Jeffrey Newman)
Date: Fri, 17 Dec 2010 04:55:04 -0800
Subject: [antlr-interest] C api documentation.
Message-ID: <1292590504.2364.65.camel@merlin-3.private.photorepo.com>

Hi,
I am trying to use the C api.
I have not found an API reference.

I've been trying to use the ANTLR3C doxygen documentation, but I have
not made too much progress.

Is there any place where there is a list of APIs and examples about how
to use them?

thanks

Jeffrey





From jimi at temporal-wave.com  Fri Dec 17 10:12:12 2010
From: jimi at temporal-wave.com (Jim Idle)
Date: Fri, 17 Dec 2010 10:12:12 -0800
Subject: [antlr-interest] Need help getting char * string from an ID
In-Reply-To: <1292547653.2364.51.camel@merlin-3.private.photorepo.com>
References: <1292547653.2364.51.camel@merlin-3.private.photorepo.com>
Message-ID: <011301cb9e15$ed98d870$c8ca8950$@temporal-wave.com>

Use antlr.markmail.org and search for how to do this, ot used the example
gramamrs as guides. Using $ID.text->chars is easy with the C target but it
will acculate all the memory you yse for the strings until you free the
parser object (and it also isn't that fast to do that), whereas you can uuse
the commontoken fields to gind the start and end of the text that represents
the token and copy/print/etc directly from the input text.

Again, download the examples and look at the C parser in there.

jim

> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of Jeffrey Newman
> Sent: Thursday, December 16, 2010 5:01 PM
> To: antlr-interest at antlr.org
> Subject: [antlr-interest] Need help getting char * string from an ID
> 
> Hi,
> I'm still trying to bring up my first test parser with the C runtime.
> I'm using Qt, so I have translate from C to C++ and Qt's runtime.
> 
> I have most of working, except I have not been able to get the ID
> string.
> 
> Here is the grammar:
> 
> grammar T;
> 
> options {
> 	language = C;
> }
> 
> @header {
> 	#include "../parserBindings.h"
> }
> 
> @members {
> 	char buffer[256];
> }
> 
> r : 'call' ID ';' {
> 		sprintf(buffer, "Invoked with: \%s", $ID.text);
> 		debug(buffer);
> 	} ;
> 
> ID: 'a'..'z'+ ;
> WS: (' ' | '\n' | '\r')+ {$channel=HIDDEN;};
> 
> The generated code in TParser looks like.
> 
> sprintf(buffer, "Invoked with: %s", (ID1->getText(ID1)));
> debug(buffer);
> 
> where debug is a simple function in my C to C++ bindings.
> 
> So, how do I get a string from the grammar?
> Please direct me to an example in C.
> 
> 
> thanks
> 
> Jeffrey
> 
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
> email-address


From jeffn at photorepo.com  Sat Dec 18 06:12:06 2010
From: jeffn at photorepo.com (Jeffrey Newman)
Date: Sat, 18 Dec 2010 06:12:06 -0800
Subject: [antlr-interest] Need help printing a tree from the C runtime.
Message-ID: <1292681526.27551.13.camel@merlin-3.private.photorepo.com>

Hi,

I'm trying to implement the sample code, in C (C++), on page 156 of Ter's book.

I've looked for the samples Jim referred to in a previous mail.
I found a lot of C grammar samples but nothing about how to use the C API.
And, found the doxygen documentation just about worthless.

Fortunately, the code is very well written, and it looks like Jim pretty
much followed the C++ to C convention of the object itself is the this pointer,
and the class is really a structure (with a few more semantics of course). So,
as far as I can tell, read the source is the documentation.

That being said I have gotten this far. The code below compiles, and runs up to
the trying to print the string. All I get an empty string. I think I am doing something
wrong trying to create the token (e.g. the cast of a string to a pANTRLR3_UINT8).

Can some one tell what I am doing wrong, and how to fix things so I can see the tree.

thanks

Jeffrey



pANTLR3_STRING_FACTORY stringFactory = antlr3StringFactoryNew();
pANTLR3_BASE_TREE_ADAPTOR adaptor    = ANTLR3_TREE_ADAPTORNew(stringFactory);
pANTLR3_BASE_TREE list               = (pANTLR3_BASE_TREE) adaptor->nilNode(adaptor);

pANTLR3_COMMON_TOKEN xToken = adaptor->createToken(adaptor, myID, (pANTLR3_UINT8)("x"));
list->addChild((pANTLR3_BASE_TREE) list, xToken);

pANTLR3_COMMON_TOKEN yToken = adaptor->createToken(adaptor, myID, (pANTLR3_UINT8)("y"));
list->addChild((pANTLR3_BASE_TREE) list, yToken);

pANTLR3_COMMON_TOKEN zToken = adaptor->createToken(adaptor, myID, (pANTLR3_UINT8)("z"));
list->addChild((pANTLR3_BASE_TREE) list, zToken);

pANTLR3_STRING pAntlrString = list->toStringTree((pANTLR3_BASE_TREE) list);
char *pStr = (char *) pAntlrString->chars;


From g_giacomello at yahoo.it  Sat Dec 18 12:49:38 2010
From: g_giacomello at yahoo.it (Gian Maria)
Date: Sat, 18 Dec 2010 21:49:38 +0100
Subject: [antlr-interest] HIDDEN channel for CSharp3
Message-ID: <7F4FF72473E146EB8586C69046265E25@Mr32bitPC>

If I write HIDDEN on my ".g" grammar file and then I generate my C# code all
is working, but inside C# when I compile the project,  HIDDEN is not
recognized because is declared "Hidden".

Ok I have changed my grammar file with "$channel=Hidden;" (I don't like
this) and so the C# is working, but inside ANTLRWorks the Interpreter
doesn't work correctly.

For compatibility, without looking a C# name style, is possible to modify
the Runtime with HIDDEN in uppercase? I don't wont to modify my runtime,
because is not a good work for further runtimes update.

 

Best regards Gian


From sharwell at pixelminegames.com  Sat Dec 18 18:13:15 2010
From: sharwell at pixelminegames.com (Sam Harwell)
Date: Sat, 18 Dec 2010 20:13:15 -0600
Subject: [antlr-interest] HIDDEN channel for CSharp3
In-Reply-To: <7F4FF72473E146EB8586C69046265E25@Mr32bitPC>
References: <7F4FF72473E146EB8586C69046265E25@Mr32bitPC>
Message-ID: <0e2901cb9f22$4c3f1c60$e4bd5520$@pixelminegames.com>

Hi Gian,

If you must use "HIDDEN" instead of "Hidden", you can place the following in
your grammar:

For a lexer grammar:

@members {const int HIDDEN = Hidden;}

For a combined grammar:

@lexer::members {const int HIDDEN = Hidden;}

Thanks,
Sam

-----Original Message-----
From: antlr-interest-bounces at antlr.org
[mailto:antlr-interest-bounces at antlr.org] On Behalf Of Gian Maria
Sent: Saturday, December 18, 2010 2:50 PM
To: antlr-interest at antlr.org
Subject: [antlr-interest] HIDDEN channel for CSharp3

If I write HIDDEN on my ".g" grammar file and then I generate my C# code all
is working, but inside C# when I compile the project,  HIDDEN is not
recognized because is declared "Hidden".

Ok I have changed my grammar file with "$channel=Hidden;" (I don't like
this) and so the C# is working, but inside ANTLRWorks the Interpreter
doesn't work correctly.

For compatibility, without looking a C# name style, is possible to modify
the Runtime with HIDDEN in uppercase? I don't wont to modify my runtime,
because is not a good work for further runtimes update.

 

Best regards Gian


List: http://www.antlr.org/mailman/listinfo/antlr-interest
Unsubscribe:
http://www.antlr.org/mailman/options/antlr-interest/your-email-address


From svdh_free at yahoo.com  Sun Dec 19 01:50:32 2010
From: svdh_free at yahoo.com (Steve Van der Hoeven)
Date: Sun, 19 Dec 2010 17:50:32 +0800
Subject: [antlr-interest] Error in generated lexer code when using exclusion
	operator.
Message-ID: <000801cb9f62$2f03ca20$8d0b5e60$@com>

I haven't been able to find any related issue to my problem in the
archieves. In case I did overlook I would be glad to be pointed to the
relevant information.

 

The issue is the following.

 

I have a lexer rule of the form ~(a|b) ~a*

 

In the code generated the code for ~(a|b) is fine. 

For the loop ~a*

      -the code to set the state logic is correct

      -the code to consume the input is wrong. The error (seems to me) that
the test for consuming is not the same as the test for the logic.

 

The issue seems to be in the antlr engine as the error is the same in
generated C# and J code.

 

For information I'm compiling with antlr 3.1.1

 

Bellow is the relevant part of the grammar and the generated code.

 

Thanks for your time

Steve

 

==============================

Grammar

==============================

 

SPACE :     SPACECHARS+{$channel=HIDDEN;};

NEWLINE     :     '\r'?'\n'{$channel=HIDDEN;};

      

fragment DELIMS

      :

SPACECHARS|'\r'|'\n'|'#'|'\\'|'@'|'('|')'|'\''|'['|']'|'"'|';';

IDENTIFIER3 

      :     ~('-'|'+'|'/'|'.'|'0'..'9'|DELIMS)

            ~DELIMS*

      ;

 

================================

Generated code

================================

 

public void mIDENTIFIER3(){

      try{

            int _type = IDENTIFIER3;

            int _channel = DEFAULT_TOKEN_CHANNEL;

            

            //  (~ ( '-' | '+' | '/' | '.' | '0' .. '9' | DELIMS ) (~ DELIMS
)* )

                  //  ~ ( '-' | '+' | '/' | '.' | '0' .. '9' | DELIMS ) (~
DELIMS )*

                  {

                        if ( (input.LA(1) >= '\u0000' && input.LA(1) <=

'\b') || input.LA(1) == '\u000B' || (input.LA(1) >= '\u000E' && input.LA(1)
<= '\u001F') || input.LA(1) == '!' || (input.LA(1) >= '$' && input.LA(1) <=

'&') || input.LA(1) == '*' || input.LA(1) == ',' || input.LA(1) == ':' ||

(input.LA(1) >= '<' && input.LA(1) <= '?') || (input.LA(1) >= 'A' &&

input.LA(1) <= 'Z') || (input.LA(1) >= '^' && input.LA(1) <= '\uFFFF') ) {

                        input.Consume();

                  }else{

                              MismatchedSetException mse = new
MismatchedSetException(null,input);

                              Recover(mse);

                              throw mse;}

 

                  // (~ DELIMS )*

                  do{

                      int alt35 = 2;

                      int LA35_0 = input.LA(1);

 

                  //state logic

                      if ( ((LA35_0 >= '\u0000' && LA35_0 <= '\b') || LA35_0
== '\u000B' || (LA35_0 >= '\u000E' && LA35_0 <= '\u001F') || LA35_0 == '!'

|| (LA35_0 >= '$' && LA35_0 <= '&') || (LA35_0 >= '*' && LA35_0 <= ':') 

|| ||

(LA35_0 >= '<' && LA35_0 <= '?') || (LA35_0 >= 'A' && LA35_0 <= 'Z') ||
(LA35_0 >= '^' && LA35_0 <= '\uFFFF')) ){

                          alt35 = 1;

                      }

 

                      switch (alt35) 

                        {

                              case 1 :

                                  //~ DELIMS

                                  {

                                    //consumption code

                                    if ( (input.LA(1) >= '\u0000' &&

input.LA(1) <= ' ') || (input.LA(1) >= '\"' && input.LA(1) <= '\uFFFF') ) {

                                        input.Consume();

 

                                    }else {

                                        MismatchedSetException mse = new
MismatchedSetException(null,input);

                                        Recover(mse);

                                        throw mse;

                              }

 

                                  }

                                  break;

                              default:

                                  goto loop35;

                      }

                  } while (true);

 

                  loop35:

                        ;     // Stops C# compiler whining that label

'loop35' has no statements

 

            }

            state.type = _type;

            state.channel = _channel;

        }

        finally 

      {

        }

    }

 

 


From jeffn at photorepo.com  Sun Dec 19 03:24:57 2010
From: jeffn at photorepo.com (Jeffrey Newman)
Date: Sun, 19 Dec 2010 03:24:57 -0800
Subject: [antlr-interest] Ignore to the next semi-colon trick
Message-ID: <1292757897.27551.37.camel@merlin-3.private.photorepo.com>

Hi,
I am trying to write a DDL SQL grammar, So I want to ignore any DML that
I happen across. I noticed a comment in the Oracle SQL about ignore to
the next semicolon. Could some one send me the rule for that trick.

thanks

Jeffrey



From g_giacomello at yahoo.it  Sun Dec 19 04:43:30 2010
From: g_giacomello at yahoo.it (Gian Maria)
Date: Sun, 19 Dec 2010 13:43:30 +0100
Subject: [antlr-interest] Lexer and Parser using CSharp3
Message-ID: <E2ED96F0B8C942DCACAC064CBBDB29C4@Mr32bitPC>

 

program: start+;

 

start :      (let | num);

 

let    :      LET;

num    :      NUM;

 

LET    :      ('a'..'z')+;

NUM    :      ('0'..'9')+;

 

WHITESPACE   :      ( '\t' | ' ' | '\r' | '\n' )+ { $channel = HIDDEN; };

 

 

1) Why inside Lexer and Parser all methods are declared Private (for example
the above "program" parser rule)? If I want to use one method of my Parser I
have to change it to public inside source code, is right to do this?

 

2) Is there a way to find if CommonTokenStream find some undefined chars in
the string?

 

In the above definition I want as input only lower case letters and number,
so if I write "123 aa 5 Bc" I want to detect the error at "B", How can I do
that?

 

The language I use is C# and the above code is a little example Just to test
the ANTLR functions to take me a Global understand of the potentiality.

Tank you for the support, I'm learning ANTLR but is not too easy at the
beginning.

 

Best regards Gian


From jbb at acm.org  Sun Dec 19 06:34:57 2010
From: jbb at acm.org (John B. Brodie)
Date: Sun, 19 Dec 2010 09:34:57 -0500
Subject: [antlr-interest] Lexer and Parser using CSharp3
In-Reply-To: <E2ED96F0B8C942DCACAC064CBBDB29C4@Mr32bitPC>
References: <E2ED96F0B8C942DCACAC064CBBDB29C4@Mr32bitPC>
Message-ID: <1292769297.9058.9.camel@gecko>

Greetings!

On Sun, 2010-12-19 at 13:43 +0100, Gian Maria wrote:
> 
> program: start+;
> 
>  
> 
> start :      (let | num);
> 
>  
> 
> let    :      LET;
> 
> num    :      NUM;
> 
>  
> 
> LET    :      ('a'..'z')+;
> 
> NUM    :      ('0'..'9')+;
> 
>  
> 
> WHITESPACE   :      ( '\t' | ' ' | '\r' | '\n' )+ { $channel = HIDDEN; };
> 
>  
> 
> 
> 
> 1) Why inside Lexer and Parser all methods are declared Private (for example
> the above "program" parser rule)? If I want to use one method of my Parser I
> have to change it to public inside source code, is right to do this?
> 

I do not use C# so can not answer this question, sorry.

>  
> 
> 2) Is there a way to find if CommonTokenStream find some undefined chars in
> the string?
> 
>  
> 
> In the above definition I want as input only lower case letters and number,
> so if I write "123 aa 5 Bc" I want to detect the error at "B", How can I do
> that?
> 

By design ANTLR parsers stop parsing at the first erroneous input. I
think that the rationale is that you might want to process that
remaining input with some other software.

When you want ANTLR parsers to process all of the input, including
reporting and (trying to) recover from errors you must tell it to do
that by specifying the recognition of the special, built-in, EOF token.

so your top-level parsing rule should be:

program : start+ EOF ;

or better

program : start+ EOF! ;

where the ! suffix meta-operator causes the EOF token to not be included
in the generated AST.

Hope this helps...
   -jbb



From maxgbr at hotmail.it  Sun Dec 19 10:20:03 2010
From: maxgbr at hotmail.it (Massimiliano Donini)
Date: Sun, 19 Dec 2010 19:20:03 +0100
Subject: [antlr-interest] Lexer and Parser using CSharp3
In-Reply-To: <E2ED96F0B8C942DCACAC064CBBDB29C4@Mr32bitPC>
References: <E2ED96F0B8C942DCACAC064CBBDB29C4@Mr32bitPC>
Message-ID: <BLU0-SMTP173BF0C934BD4374E2E362FB0180@phx.gbl>


  Hi Gian Maria
For generate public method with C# 3 runtime declare in your grammar the 
rule as public /protected
like this:

public start : (left | num);

Greetings Max

Il 19/12/2010 13:43, Gian Maria ha scritto:
>
>
> program: start+;
>
>
>
> start :      (let | num);
>
>
>
> let    :      LET;
>
> num    :      NUM;
>
>
>
> LET    :      ('a'..'z')+;
>
> NUM    :      ('0'..'9')+;
>
>
>
> WHITESPACE   :      ( '\t' | ' ' | '\r' | '\n' )+ { $channel = HIDDEN; };
>
>
>
>
>
> 1) Why inside Lexer and Parser all methods are declared Private (for example
> the above "program" parser rule)? If I want to use one method of my Parser I
> have to change it to public inside source code, is right to do this?
>
>
>
> 2) Is there a way to find if CommonTokenStream find some undefined chars in
> the string?
>
>
>
> In the above definition I want as input only lower case letters and number,
> so if I write "123 aa 5 Bc" I want to detect the error at "B", How can I do
> that?
>
>
>
> The language I use is C# and the above code is a little example Just to test
> the ANTLR functions to take me a Global understand of the potentiality.
>
> Tank you for the support, I'm learning ANTLR but is not too easy at the
> beginning.
>
>
>
> Best regards Gian
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>
>


From jeffn at photorepo.com  Mon Dec 20 06:05:58 2010
From: jeffn at photorepo.com (Jeffrey Newman)
Date: Mon, 20 Dec 2010 06:05:58 -0800
Subject: [antlr-interest] C runtime - buffer input?
Message-ID: <1292853958.27551.40.camel@merlin-3.private.photorepo.com>

Is there a way to pass a buffer (ascii chars) to the lexer instead of
file in the C runtime?

This would be nice at least of development in a GUI framework.

thanks

jeffrey


From jeffn at photorepo.com  Mon Dec 20 06:06:46 2010
From: jeffn at photorepo.com (Jeffrey Newman)
Date: Mon, 20 Dec 2010 06:06:46 -0800
Subject: [antlr-interest] C String Templates
Message-ID: <1292854006.27551.41.camel@merlin-3.private.photorepo.com>

Is there string template support for C runtime?
If so where?

thanks

Jeffrey



From sharwell at pixelminegames.com  Mon Dec 20 07:15:15 2010
From: sharwell at pixelminegames.com (Sam Harwell)
Date: Mon, 20 Dec 2010 09:15:15 -0600
Subject: [antlr-interest] C String Templates
In-Reply-To: <1292854006.27551.41.camel@merlin-3.private.photorepo.com>
References: <1292854006.27551.41.camel@merlin-3.private.photorepo.com>
Message-ID: <001e01cba058$b4f878a0$1ee969e0$@pixelminegames.com>

StringTemplate is extremely heavily dependent on Reflection features offered
by the virtual machines for languages like Java and C#. It would be
impossible to create a C port of StringTemplate that looked anything like
the original.

Thanks,
Sam

-----Original Message-----
From: antlr-interest-bounces at antlr.org
[mailto:antlr-interest-bounces at antlr.org] On Behalf Of Jeffrey Newman
Sent: Monday, December 20, 2010 8:07 AM
To: antlr-interest at antlr.org
Subject: [antlr-interest] C String Templates

Is there string template support for C runtime?
If so where?

thanks

Jeffrey



List: http://www.antlr.org/mailman/listinfo/antlr-interest
Unsubscribe:
http://www.antlr.org/mailman/options/antlr-interest/your-email-address


From jimi at temporal-wave.com  Mon Dec 20 09:10:11 2010
From: jimi at temporal-wave.com (Jim Idle)
Date: Mon, 20 Dec 2010 09:10:11 -0800
Subject: [antlr-interest] C runtime - buffer input?
In-Reply-To: <1292853958.27551.40.camel@merlin-3.private.photorepo.com>
References: <1292853958.27551.40.camel@merlin-3.private.photorepo.com>
Message-ID: <00d201cba068$c2b6e480$4824ad80$@temporal-wave.com>

Yes - the API docs show it (it is in the same source file as the file
version). You can see it in the source code. For 3.3.1 the API will change
slightly (supports UTF8, UTF16, UTF32, 8 bit).

Jim

> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of Jeffrey Newman
> Sent: Monday, December 20, 2010 6:06 AM
> To: antlr-interest at antlr.org
> Subject: [antlr-interest] C runtime - buffer input?
> 
> Is there a way to pass a buffer (ascii chars) to the lexer instead of
> file in the C runtime?
> 
> This would be nice at least of development in a GUI framework.
> 
> thanks
> 
> jeffrey
> 
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
> email-address


From jimi at temporal-wave.com  Mon Dec 20 09:10:57 2010
From: jimi at temporal-wave.com (Jim Idle)
Date: Mon, 20 Dec 2010 09:10:57 -0800
Subject: [antlr-interest] C String Templates
In-Reply-To: <1292854006.27551.41.camel@merlin-3.private.photorepo.com>
References: <1292854006.27551.41.camel@merlin-3.private.photorepo.com>
Message-ID: <00d401cba068$de472ac0$9ad58040$@temporal-wave.com>

StringTemplate is an object oriented system and cannot be reproduced in C. 

Jim

> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of Jeffrey Newman
> Sent: Monday, December 20, 2010 6:07 AM
> To: antlr-interest at antlr.org
> Subject: [antlr-interest] C String Templates
> 
> Is there string template support for C runtime?
> If so where?
> 
> thanks
> 
> Jeffrey
> 
> 
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
> email-address


From kchichakly at iseesystems.com  Mon Dec 20 09:34:32 2010
From: kchichakly at iseesystems.com (Karim Chichakly)
Date: Mon, 20 Dec 2010 12:34:32 -0500
Subject: [antlr-interest] C String Templates
In-Reply-To: <00d401cba068$de472ac0$9ad58040$@temporal-wave.com>
References: <1292854006.27551.41.camel@merlin-3.private.photorepo.com>
	<00d401cba068$de472ac0$9ad58040$@temporal-wave.com>
Message-ID: <AANLkTinmp4rRgqJPcTaD1mx4NOK0XOFzZQJJT0MoQ5nQ@mail.gmail.com>

That makes perfect sense.  But having not tried it at all yet, is it really
true that you cannot use the String Template library from the C runtime ever
- even if compiling the generated code in C++?  If so, what does everyone
using the C runtime do instead?

Thanks,

Karim


On Mon, Dec 20, 2010 at 12:10 PM, Jim Idle <jimi at temporal-wave.com> wrote:

> StringTemplate is an object oriented system and cannot be reproduced in C.
>
> Jim
>
> > -----Original Message-----
> > From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> > bounces at antlr.org] On Behalf Of Jeffrey Newman
> > Sent: Monday, December 20, 2010 6:07 AM
> > To: antlr-interest at antlr.org
> > Subject: [antlr-interest] C String Templates
> >
> > Is there string template support for C runtime?
> > If so where?
> >
> > thanks
> >
> > Jeffrey
> >
> >
> >
> > List: http://www.antlr.org/mailman/listinfo/antlr-interest
> > Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
> > email-address
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>

From kferrio at gmail.com  Mon Dec 20 11:47:38 2010
From: kferrio at gmail.com (Kyle Ferrio)
Date: Mon, 20 Dec 2010 12:47:38 -0700
Subject: [antlr-interest] New book with a nod to ANTLR
Message-ID: <AANLkTikg19Fde8OwoQRSvuKXH4ZmJi8CLVKeYwmWxjZi@mail.gmail.com>

Hi Terrence, et al.

FYI.  Apress has released (ebook now, print soon) "Pro DLR in .NET 4" by
Chaur Wu.  ANTLR makes an incidental appearance in Chapter 9, where the
CSharp2 target is used to implement a small helper for gluing together host
languages.  That's all I know.  I may have time to skim the book in the next
couple weeks.

Kyle

From a.v.talnikov at gmail.com  Mon Dec 20 19:49:48 2010
From: a.v.talnikov at gmail.com (Andrey Talnikov)
Date: Tue, 21 Dec 2010 12:49:48 +0900
Subject: [antlr-interest] generated parser fails when ANTLRWorks Interpreter
	doesn't
Message-ID: <4D1023DC.20002@gmail.com>

Hi guys,

While trying to implement C parser based on the C.g I've run into a 
problem. Parsing following code with CParser.translation_unit() leads to 
no viable alternative at token '.'.

int main()
{
base.field;
}

I've tried almost all of 3.x ANTLR versions with default generating 
options without any success. I've even generated debug parser and passed 
BlankDebugEventListener to it.

While debugging the grammar with the ANTLRWorks Interpreter and 
ANTLRv3IDE as well on the same input, both build correct tree.

 From my point of view, it could be somehow related to the 
http://www.antlr.org/jira/browse/ANTLR-178 bug.

I would appreciate if anybody could tell me how to either understand 
what is wrong in the grammar or generate working parser, for example the 
one which ANTLRWorks Interpreter uses.

Thanks for helping,
Andrew


From james_ladd at hotmail.com  Mon Dec 20 21:15:11 2010
From: james_ladd at hotmail.com (James Ladd)
Date: Tue, 21 Dec 2010 16:15:11 +1100
Subject: [antlr-interest] How to handle? Synthetic token?
In-Reply-To: <mailman.1.1292875201.9201.antlr-interest@antlr.org>
References: <mailman.1.1292875201.9201.antlr-interest@antlr.org>
Message-ID: <BAY149-w35805E6307EC831F9DF847ED1A0@phx.gbl>


Hi All,

I'm wondering if it is possible to add a rule or token to help trap errors?
I have the following:

temporaries
    :    '||'
    |    '|' temporaryVariables '|'
    ;

Which is fine and the allowed cases, however, I'd like to the following:

temporaries
    :    '||'
    |    '|' temporaryVariables '|'
    |    '|' temporaryVariables errorYouMissedClosingPipe
    ;

Possibly by defining errorYouMissedClosingPipe as a rule or token that matches anything but the '|'.

Is this possible and could someone provide an example or a link to a page that describes this?

Rgs, James.
 		 	   		  

From james_ladd at hotmail.com  Mon Dec 20 21:56:48 2010
From: james_ladd at hotmail.com (James Ladd)
Date: Tue, 21 Dec 2010 16:56:48 +1100
Subject: [antlr-interest] How to handle? Synthetic token?
In-Reply-To: <BAY149-w35805E6307EC831F9DF847ED1A0@phx.gbl>
References: <mailman.1.1292875201.9201.antlr-interest@antlr.org>,
	<BAY149-w35805E6307EC831F9DF847ED1A0@phx.gbl>
Message-ID: <BAY149-w52E8EE9E7A8961F730B7E1ED1A0@phx.gbl>


Maybe I have answered my own question:

temporaries
    :       '||'
    |       '|' temporaryVariables '|'
    |       '|' temporaryVariables errorYouMissedClosingPipe
    ;

<snip>

errorYouMissedClosingPipe
    :    ~('|' | NAME)
    ;

When I use the NOT token I get the correct parsing.
For example, this is not correct:    | foo bar [

*note: the things that are not '|' or NAME need to be matched as well.
So in the example I gave '[' has to be a matched token.

My question not is:   Is this an ok approach / thing to do?

Rgs, James.

From: james_ladd at hotmail.com
To: antlr-interest at antlr.org
Subject: How to handle? Synthetic token?
Date: Tue, 21 Dec 2010 16:15:11 +1100








Hi All,

I'm wondering if it is possible to add a rule or token to help trap errors?
I have the following:

temporaries
    :    '||'
    |    '|' temporaryVariables '|'
    ;

Which is fine and the allowed cases, however, I'd like to the following:

temporaries
    :    '||'
    |    '|' temporaryVariables '|'
    |    '|' temporaryVariables errorYouMissedClosingPipe
    ;

Possibly by defining errorYouMissedClosingPipe as a rule or token that matches anything but the '|'.

Is this possible and could someone provide an example or a link to a page that describes this?

Rgs, James.
 		 	   		  

From valliantster at gmail.com  Mon Dec 20 22:04:40 2010
From: valliantster at gmail.com (denstar)
Date: Mon, 20 Dec 2010 23:04:40 -0700
Subject: [antlr-interest] How to handle? Synthetic token?
In-Reply-To: <BAY149-w52E8EE9E7A8961F730B7E1ED1A0@phx.gbl>
References: <mailman.1.1292875201.9201.antlr-interest@antlr.org>
	<BAY149-w35805E6307EC831F9DF847ED1A0@phx.gbl>
	<BAY149-w52E8EE9E7A8961F730B7E1ED1A0@phx.gbl>
Message-ID: <AANLkTimv-zjPqL6PxZwqm22bhPzc6jdC-Py0+tj78UOU@mail.gmail.com>

On Mon, Dec 20, 2010 at 10:56 PM, James Ladd wrote:
>
> Maybe I have answered my own question:
>
> temporaries
> ? ?: ? ? ? '||'
> ? ?| ? ? ? '|' temporaryVariables '|'
> ? ?| ? ? ? '|' temporaryVariables errorYouMissedClosingPipe
> ? ?;
>
> <snip>
>
> errorYouMissedClosingPipe
> ? ?: ? ?~('|' | NAME)
> ? ?;
>
> When I use the NOT token I get the correct parsing.
> For example, this is not correct: ? ?| foo bar [
>
> *note: the things that are not '|' or NAME need to be matched as well.
> So in the example I gave '[' has to be a matched token.
>
> My question not is: ? Is this an ok approach / thing to do?

I'm far from an expert on ANTLR, but I believe this is sorta taken
care of for you.

See: http://www.antlr.org/wiki/display/ANTLR3/FAQ+-+Error+handling

For some examples of ways to handle this that aren't as fragile.

:Den

-- 
He who speaks evil only differs from his who does evil in that he
lacks opportunity.
Marcus Fabius Quintilian

From borucki_andrzej at wp.pl  Tue Dec 21 06:05:06 2010
From: borucki_andrzej at wp.pl (Andrzej)
Date: Tue, 21 Dec 2010 15:05:06 +0100
Subject: [antlr-interest] How work wih C# target?
Message-ID: <4D10B412.3090602@wp.pl>

I know that in .g must be:
options {
	language=CSharp2;
}

 From where I can download C# runtime to compile cs files?

From bkiers at gmail.com  Tue Dec 21 06:13:00 2010
From: bkiers at gmail.com (Bart Kiers)
Date: Tue, 21 Dec 2010 15:13:00 +0100
Subject: [antlr-interest] How work wih C# target?
In-Reply-To: <4D10B412.3090602@wp.pl>
References: <4D10B412.3090602@wp.pl>
Message-ID: <AANLkTi=kCa2zwFZ33gKROWcGdoGXVeQWGY0DGzAQxiOt@mail.gmail.com>

On Tue, Dec 21, 2010 at 3:05 PM, Andrzej <borucki_andrzej at wp.pl> wrote:

> I know that in .g must be:
> options {
>        language=CSharp2;
> }
>
>  From where I can download C# runtime to compile cs files?
>
>
The ones from:

http://www.antlr.org/download/CSharp

<http://www.antlr.org/download/CSharp>work with CSharp2.

Regards,

Bart Kiers.

From kjhedran at yahoo.com  Tue Dec 21 06:25:57 2010
From: kjhedran at yahoo.com (John Rossi)
Date: Tue, 21 Dec 2010 06:25:57 -0800 (PST)
Subject: [antlr-interest] Freeform Text Parsing
Message-ID: <955830.1947.qm@web111415.mail.gq1.yahoo.com>


I plan to use ANTLR to parse generated (and hence predictable) English 
sentences.  To verify that I know what I'm doing, I wanted to create a grammar 
that parses a simple address book into an entry tree.

The following grammar is wrong, but it expresses my intent.  (~(NEWLINE))+ 
doesn't grab arbitrary non-newline text, but rather matches known, non-newline 
tokens, which isn't what I want.  What's the right way?  Or is ANTLR unsuitable 
for grammars that can't identify string literals at the lexing stage?

John Rossi
Home
555-7293

Michael Raster
Work
555-8374

grammar AddressBook;
options {
output=AST;
ASTLabelType=CommonTree;
}

tokens {
ENTRIES;
ENTRY;
NAME;
CONTACTTYPE;
PHONE;
HOME;
WORK;
}

@header {
package org.roxton;
}

@lexer::header {
package org.roxton;
}

addressbook
:(entry (NEWLINE)?)+ -> ^(ENTRIES entry+);
entry:name NEWLINE contactType NEWLINE phone NEWLINE -> ^(ENTRY ^(NAME name) 
^(CONTACTTYPE contactType) ^(PHONE phone));
name:(~(NEWLINE))+;
contactType
:('Home'->HOME | 'Work'->WORK);
phone:(~(NEWLINE))+;

NEWLINE:'\r'? '\n' ;



      

From sharwell at pixelminegames.com  Tue Dec 21 06:35:44 2010
From: sharwell at pixelminegames.com (Sam Harwell)
Date: Tue, 21 Dec 2010 08:35:44 -0600
Subject: [antlr-interest] Freeform Text Parsing
In-Reply-To: <955830.1947.qm@web111415.mail.gq1.yahoo.com>
References: <955830.1947.qm@web111415.mail.gq1.yahoo.com>
Message-ID: <00b801cba11c$5a2288c0$0e679a40$@pixelminegames.com>

You need to include the following rule at the end of your lexer. Without
wildcards, all allowed characters must appear in explicit rules.

ANY_CHAR : . ;

Sam

-----Original Message-----
From: antlr-interest-bounces at antlr.org
[mailto:antlr-interest-bounces at antlr.org] On Behalf Of John Rossi
Sent: Tuesday, December 21, 2010 8:26 AM
To: antlr-interest at antlr.org
Subject: [antlr-interest] Freeform Text Parsing


I plan to use ANTLR to parse generated (and hence predictable) English
sentences.  To verify that I know what I'm doing, I wanted to create a
grammar that parses a simple address book into an entry tree.

The following grammar is wrong, but it expresses my intent.  (~(NEWLINE))+
doesn't grab arbitrary non-newline text, but rather matches known,
non-newline tokens, which isn't what I want.  What's the right way?  Or is
ANTLR unsuitable for grammars that can't identify string literals at the
lexing stage?

John Rossi
Home
555-7293

Michael Raster
Work
555-8374

grammar AddressBook;
options {
output=AST;
ASTLabelType=CommonTree;
}

tokens {
ENTRIES;
ENTRY;
NAME;
CONTACTTYPE;
PHONE;
HOME;
WORK;
}

@header {
package org.roxton;
}

@lexer::header {
package org.roxton;
}

addressbook
:(entry (NEWLINE)?)+ -> ^(ENTRIES entry+); entry:name NEWLINE contactType
NEWLINE phone NEWLINE -> ^(ENTRY ^(NAME name) ^(CONTACTTYPE contactType)
^(PHONE phone)); name:(~(NEWLINE))+; contactType :('Home'->HOME |
'Work'->WORK); phone:(~(NEWLINE))+;

NEWLINE:'\r'? '\n' ;



      

List: http://www.antlr.org/mailman/listinfo/antlr-interest
Unsubscribe:
http://www.antlr.org/mailman/options/antlr-interest/your-email-address


From kjhedran at yahoo.com  Tue Dec 21 07:24:05 2010
From: kjhedran at yahoo.com (John Rossi)
Date: Tue, 21 Dec 2010 07:24:05 -0800 (PST)
Subject: [antlr-interest] Freeform Text Parsing
In-Reply-To: <00b801cba11c$5a2288c0$0e679a40$@pixelminegames.com>
References: <955830.1947.qm@web111415.mail.gq1.yahoo.com>
	<00b801cba11c$5a2288c0$0e679a40$@pixelminegames.com>
Message-ID: <688975.94139.qm@web111402.mail.gq1.yahoo.com>

> You need to include the following rule at the end of your lexer. Without
> wildcards, all allowed characters must appear in explicit rules.
>
> ANY_CHAR : . ;


Thanks, Sam.

John Rossi
Home
555-7293

Homer Raster
Work
555-8374

Now yields:
(ENTRIES
(ENTRY (NAME J o h n   R o s s i) (CONTACTTYPE HOME) (PHONE 5 5 5 - 7 2 9 3))
(ENTRY (NAME Home r   R a s t e r) (CONTACTTYPE WORK) (PHONE 5 5 5 - 8 3 7 4))
)

Two things:

1) If I were to write an application to consume this tree, I wouldn't want each 
character to be in its own child node.  Is there a reasonable way to package 
them up?  Something in the grammar, or a second pass?

2) The fact that the "Home" in "Homer Raster" gets its token under the name 
makes me feel like I did something wrong.  Is that squick justified?

Thoughts?  Thanks for your help,

-John

-------

grammar AddressBook;
options {
output=AST;
ASTLabelType=CommonTree;
}

tokens {
ENTRIES;
ENTRY;
NAME;
CONTACTTYPE;
PHONE;
HOME;
WORK;
}

addressbook
:(entry (NEWLINE NEWLINE)?)+ -> ^(ENTRIES entry+);
entry:name NEWLINE contactType NEWLINE phone -> ^(ENTRY ^(NAME name) 
^(CONTACTTYPE contactType) ^(PHONE phone));
name:(~(NEWLINE))+;
contactType
:('Home'->^(HOME) | 'Work'->^(WORK));
phone:(~(NEWLINE))+;

NEWLINE:'\r'? '\n' ;
ANY_CHAR:. ;


      

From jmurray at aerotech.com  Tue Dec 21 10:52:33 2010
From: jmurray at aerotech.com (Justin Murray)
Date: Tue, 21 Dec 2010 13:52:33 -0500
Subject: [antlr-interest] [C target] mismatchRecover()
Message-ID: <6B458D23F5D4A24ABCDB3C78EA97393B01FC9FF4@EXCH-VIRTUAL.aerotechad.com>

Hello,

 

I am trying to turn off single token insertion and deletion error
recovery in my parser (C target). I found the following comment in
antlr3baserecognizer.c above the match() function.

 

/// Match current input symbol against ttype.  Upon error, do one token

/// insertion or deletion if possible.  

/// To turn off single token insertion or deletion error

/// recovery, override mismatchRecover() and have it call

/// plain mismatch(), which does not recover.  Then any error

/// in a rule will cause an exception and immediate exit from

/// rule.  Rule would recover by resynchronizing to the set of

/// symbols that can follow rule ref.

///

 

This seems fairly straightforward at first glance, but then I discovered
that there is no mismatchRecover() function to override. Digging through
the code, I suspect that this function was renamed to
recoverFromMismatchedToken(), but I cannot simply override it with
mismatch() because their prototypes do not match.

 

void        * (*recoverFromMismatchedToken)   (struct
ANTLR3_BASE_RECOGNIZER_struct * recognizer,

                                              ANTLR3_UINT32 ttype,

                                              pANTLR3_BITSET_LIST
follow);

 

void        (*mismatch)                       (struct
ANTLR3_BASE_RECOGNIZER_struct * recognizer,

                                              ANTLR3_UINT32 ttype,

    pANTLR3_BITSET_LIST follow);

 

As you can see, one returns a void *, and the other returns void. What
is the correct way to do this?

 

Thanks,

 

Justin Murray 
Software Engineer 
jmurray at aerotech.com

Aerotech, Inc. 
101 Zeta Drive 
Pittsburgh, PA 15238 
412-963-7470

 


From heshamz at yahoo.com  Tue Dec 21 11:14:27 2010
From: heshamz at yahoo.com (Hesham Zakaria)
Date: Tue, 21 Dec 2010 11:14:27 -0800 (PST)
Subject: [antlr-interest] error(106): reference to undefined rule
Message-ID: <130069.40258.qm@web112517.mail.gq1.yahoo.com>

Hi,
I am new to antlr, and I am facing the error(106): reference to undefined rule.

The grammar check is successful but the code generation raises an error.

The grammar is just a test:

grammar test;
TERM    : atom ( ',' atom )*  ;
atom    : TERM ( ',' TERM)*   ; 

and the error is:
error(106): test.g:2:8: reference to undefined rule: atom

Thanks for help,
Hesham


      

From jimi at temporal-wave.com  Tue Dec 21 11:22:49 2010
From: jimi at temporal-wave.com (Jim Idle)
Date: Tue, 21 Dec 2010 11:22:49 -0800
Subject: [antlr-interest] [C target] mismatchRecover()
In-Reply-To: <6B458D23F5D4A24ABCDB3C78EA97393B01FC9FF4@EXCH-VIRTUAL.aerotechad.com>
References: <6B458D23F5D4A24ABCDB3C78EA97393B01FC9FF4@EXCH-VIRTUAL.aerotechad.com>
Message-ID: <001f01cba144$74c819b0$5e584d10$@temporal-wave.com>

It means install your own version of recoverFromMismatchedToken and
basically don't consume or insert but reset any flags etc.

Jim

> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of Justin Murray
> Sent: Tuesday, December 21, 2010 10:53 AM
> To: antlr-interest at antlr.org
> Subject: [antlr-interest] [C target] mismatchRecover()
> 
> Hello,
> 
> 
> 
> I am trying to turn off single token insertion and deletion error
> recovery in my parser (C target). I found the following comment in
> antlr3baserecognizer.c above the match() function.
> 
> 
> 
> /// Match current input symbol against ttype.  Upon error, do one token
> 
> /// insertion or deletion if possible.
> 
> /// To turn off single token insertion or deletion error
> 
> /// recovery, override mismatchRecover() and have it call
> 
> /// plain mismatch(), which does not recover.  Then any error
> 
> /// in a rule will cause an exception and immediate exit from
> 
> /// rule.  Rule would recover by resynchronizing to the set of
> 
> /// symbols that can follow rule ref.
> 
> ///
> 
> 
> 
> This seems fairly straightforward at first glance, but then I
> discovered that there is no mismatchRecover() function to override.
> Digging through the code, I suspect that this function was renamed to
> recoverFromMismatchedToken(), but I cannot simply override it with
> mismatch() because their prototypes do not match.
> 
> 
> 
> void        * (*recoverFromMismatchedToken)   (struct
> ANTLR3_BASE_RECOGNIZER_struct * recognizer,
> 
>                                               ANTLR3_UINT32 ttype,
> 
>                                               pANTLR3_BITSET_LIST
> follow);
> 
> 
> 
> void        (*mismatch)                       (struct
> ANTLR3_BASE_RECOGNIZER_struct * recognizer,
> 
>                                               ANTLR3_UINT32 ttype,
> 
>     pANTLR3_BITSET_LIST follow);
> 
> 
> 
> As you can see, one returns a void *, and the other returns void. What
> is the correct way to do this?
> 
> 
> 
> Thanks,
> 
> 
> 
> Justin Murray
> Software Engineer
> jmurray at aerotech.com
> 
> Aerotech, Inc.
> 101 Zeta Drive
> Pittsburgh, PA 15238
> 412-963-7470
> 
> 
> 
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
> email-address


From jimi at temporal-wave.com  Tue Dec 21 11:24:05 2010
From: jimi at temporal-wave.com (Jim Idle)
Date: Tue, 21 Dec 2010 11:24:05 -0800
Subject: [antlr-interest] error(106): reference to undefined rule
In-Reply-To: <130069.40258.qm@web112517.mail.gq1.yahoo.com>
References: <130069.40258.qm@web112517.mail.gq1.yahoo.com>
Message-ID: <002101cba144$a2049b10$e60dd130$@temporal-wave.com>

Rule names must be lower case or they are seen as lexer rules. Start with
examples and the 5 minute getting started articles on the wiki.

Jim

> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of Hesham Zakaria
> Sent: Tuesday, December 21, 2010 11:14 AM
> To: antlr-interest at antlr.org
> Subject: [antlr-interest] error(106): reference to undefined rule
> 
> Hi,
> I am new to antlr, and I am facing the error(106): reference to
> undefined rule.
> 
> The grammar check is successful but the code generation raises an
> error.
> 
> The grammar is just a test:
> 
> grammar test;
> TERM    : atom ( ',' atom )*  ;
> atom    : TERM ( ',' TERM)*   ;
> 
> and the error is:
> error(106): test.g:2:8: reference to undefined rule: atom
> 
> Thanks for help,
> Hesham
> 
> 
> 
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
> email-address


From borucki_andrzej at wp.pl  Tue Dec 21 13:24:06 2010
From: borucki_andrzej at wp.pl (Andrzej)
Date: Tue, 21 Dec 2010 22:24:06 +0100
Subject: [antlr-interest] How behave with preprocessor ?
Message-ID: <4D111AF6.5010901@wp.pl>

I have two simultaneous grammars: preprocessor and C; how behave with 
this case? It it situation similar to "island grammar" ? 
(examples-v3.tar.gz: examples-v3\csharp\island-grammar) where I have 
embedded one grammar in other?

From keith.nicholas at gmail.com  Tue Dec 21 19:14:18 2010
From: keith.nicholas at gmail.com (Keith Nicholas)
Date: Wed, 22 Dec 2010 16:14:18 +1300
Subject: [antlr-interest] NOOB question,
	antlr giving a "mismatched input" result.....
Message-ID: <AANLkTikp4U02X87AsbqMjA6WVrSKaHV-kwNR-jE5HDMx@mail.gmail.com>

given the grammar

test    : 'test' ID '\n' 'begin' '\n'  'end' '\n' -> ^(TEST ID);

ID  :   ('a'..'z'|'A'..'Z'|'_') ('a'..'z'|'A'..'Z'|'0'..'9'|'_')*
    ;
and a test string of

"test blah\n begin\n end\n"
resulting in

line 1:0 mismatched input 'test blah\\n begin\\n end\\n' expecting 'test'
<mismatched token: [@0,0:21='test blah\\n begin\\n end\\n',<12>,1:0],
resync=test blah
 begin
 end
>

From kferrio at gmail.com  Tue Dec 21 19:18:07 2010
From: kferrio at gmail.com (kferrio at gmail.com)
Date: Wed, 22 Dec 2010 03:18:07 +0000
Subject: [antlr-interest] How behave with preprocessor ?
Message-ID: <1771101582-1292987887-cardhu_decombobulator_blackberry.rim.net-987230626-@bda442.bisx.prod.on.blackberry>

My own experience is that island grammars are harder to embed without side effects than I expected.  YMMV.  In the case of compiler directives I find a two-pass solution flexible and easier to get right without unexpected results.  

Kyle
------Original Message------
From: Andrzej
Sender: antlr-interest-bounces at antlr.org
To: antlr-interest at antlr.org
Subject: [antlr-interest] How behave with preprocessor ?
Sent: Dec 21, 2010 2:24 PM

I have two simultaneous grammars: preprocessor and C; how behave with 
this case? It it situation similar to "island grammar" ? 
(examples-v3.tar.gz: examples-v3\csharp\island-grammar) where I have 
embedded one grammar in other?

List: http://www.antlr.org/mailman/listinfo/antlr-interest
Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address


Sent from my Verizon Wireless BlackBerry

From keith.nicholas at gmail.com  Tue Dec 21 20:07:56 2010
From: keith.nicholas at gmail.com (Keith Nicholas)
Date: Wed, 22 Dec 2010 17:07:56 +1300
Subject: [antlr-interest] NOOB question,
	antlr giving a "mismatched input" result.....
In-Reply-To: <AANLkTikp4U02X87AsbqMjA6WVrSKaHV-kwNR-jE5HDMx@mail.gmail.com>
References: <AANLkTikp4U02X87AsbqMjA6WVrSKaHV-kwNR-jE5HDMx@mail.gmail.com>
Message-ID: <AANLkTim7gObSzenA0OnP9ogtkbKoLbRAtOeriSXAJKh8@mail.gmail.com>

ok.... problem solved.

I had a token defined which was incorrectly matching.

On Wed, Dec 22, 2010 at 4:14 PM, Keith Nicholas <keith.nicholas at gmail.com>wrote:

> given the grammar
>
> test    : 'test' ID '\n' 'begin' '\n'  'end' '\n' -> ^(TEST ID);
>
> ID  :   ('a'..'z'|'A'..'Z'|'_') ('a'..'z'|'A'..'Z'|'0'..'9'|'_')*
>     ;
> and a test string of
>
> "test blah\n begin\n end\n"
> resulting in
>
> line 1:0 mismatched input 'test blah\\n begin\\n end\\n' expecting 'test'
> <mismatched token: [@0,0:21='test blah\\n begin\\n end\\n',<12>,1:0],
> resync=test blah
>  begin
>  end
> >
>

From diakopter at gmail.com  Tue Dec 21 20:13:42 2010
From: diakopter at gmail.com (Matthew Wilson)
Date: Tue, 21 Dec 2010 20:13:42 -0800
Subject: [antlr-interest] mutual recursion in tree grammars
Message-ID: <AANLkTimX+rvJY21q7d-7nkNnZ4cRB9-y6gFbv4yJJDds@mail.gmail.com>

Hi,

I was wondering why I'm getting the mutual recursion error in my tree
grammar (antlrworks 1.4.2).  Why would left recursion (mutual/indirect or
direct) matter at all in a tree grammar?  (How could there be referential
cycles in the tree?)

Thanks,
Matthew Wilson
diakopter at gmail.com

From parrt at cs.usfca.edu  Tue Dec 21 20:15:06 2010
From: parrt at cs.usfca.edu (Terence Parr)
Date: Tue, 21 Dec 2010 20:15:06 -0800
Subject: [antlr-interest] mutual recursion in tree grammars
In-Reply-To: <AANLkTimX+rvJY21q7d-7nkNnZ4cRB9-y6gFbv4yJJDds@mail.gmail.com>
References: <AANLkTimX+rvJY21q7d-7nkNnZ4cRB9-y6gFbv4yJJDds@mail.gmail.com>
Message-ID: <4BE51D3E-8BCF-4A8C-8F10-C2F92943A74E@cs.usfca.edu>

Well, i use LL(*) to parse the tree so same rules apply.

a : b ;
b : a ;

Ter
On Dec 21, 2010, at 8:13 PM, Matthew Wilson wrote:

> Hi,
> 
> I was wondering why I'm getting the mutual recursion error in my tree
> grammar (antlrworks 1.4.2).  Why would left recursion (mutual/indirect or
> direct) matter at all in a tree grammar?  (How could there be referential
> cycles in the tree?)
> 
> Thanks,
> Matthew Wilson
> diakopter at gmail.com
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address


From diakopter at gmail.com  Tue Dec 21 20:51:02 2010
From: diakopter at gmail.com (Matthew Wilson)
Date: Tue, 21 Dec 2010 20:51:02 -0800
Subject: [antlr-interest] mutual recursion in tree grammars
In-Reply-To: <4BE51D3E-8BCF-4A8C-8F10-C2F92943A74E@cs.usfca.edu>
References: <AANLkTimX+rvJY21q7d-7nkNnZ4cRB9-y6gFbv4yJJDds@mail.gmail.com>
	<4BE51D3E-8BCF-4A8C-8F10-C2F92943A74E@cs.usfca.edu>
Message-ID: <AANLkTik=94MpwXYmwJG8J3eH=eGnBVHhP_=HYg6NBN_W@mail.gmail.com>

I don't understand, since upon entering/descending into a node, it is the
children who are being examined, not the node itself.  Here's an example
(albeit extremely contrived):

// in yYy.g
grammar yYy;
options {
output=AST;
ASTLabelType=CommonTree;
backtrack=true;
}
rule1 : rule3 EOF ;
rule2 : 'y'! rule3 'a'* ;
rule3 : rule2? ('Y'! rule2)* 'b'* ;  // extremely backtracking heavy

// in yYyTree.g

options {
backtrack=true;
tokenVocab=yYy;
rewrite=true;
}
rule1 : rule3 ;
rule2 : rule3 'a'* ; // some transformation using the 'a's
rule3 : rule2? rule2* 'b'* ; // some transformation using the 'b's
// end

In this "scannerless" grammar, 'y' and 'Y' are treated as different kinds of
prefix whitespace (but whitespace that must follow certain patterns), and
rules 2 and 3 care only about 'a' and 'b', as far as the tree grammar is
concerned.  With the input   yYyYyaaaaabbbbb<EOF>   , a correct parse tree
(after scads of backtracking) would be sent to the tree parser, but the
grammar complains as mentioned above.

My only workaround is to duplicate the whitespace portions of those rules in
the tree grammar so they don't "appear" to be mutually left recursive to
antlr.  They are not truly mutually left recursive since they can never
enter an infinite cycle while descending/recursing the TokenStream.

I guess my point/question is:  if there's no possibility of a cycle in the
input AST, why bother checking for left recursion in the rules' dependency
graph... since the resulting tree parser won't ever infinitely recurse?

Thanks! (also thanks for the great/free products!)


On Tue, Dec 21, 2010 at 8:15 PM, Terence Parr <parrt at cs.usfca.edu> wrote:

> Well, i use LL(*) to parse the tree so same rules apply.
>
> a : b ;
> b : a ;
>
> Ter
> On Dec 21, 2010, at 8:13 PM, Matthew Wilson wrote:
>
> > Hi,
> >
> > I was wondering why I'm getting the mutual recursion error in my tree
> > grammar (antlrworks 1.4.2).  Why would left recursion (mutual/indirect or
> > direct) matter at all in a tree grammar?  (How could there be referential
> > cycles in the tree?)
> >
> > Thanks,
> > Matthew Wilson
> > diakopter at gmail.com
> >
> > List: http://www.antlr.org/mailman/listinfo/antlr-interest
> > Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>
>

From diakopter at gmail.com  Tue Dec 21 20:53:07 2010
From: diakopter at gmail.com (Matthew Wilson)
Date: Tue, 21 Dec 2010 20:53:07 -0800
Subject: [antlr-interest] mutual recursion in tree grammars
In-Reply-To: <AANLkTik=94MpwXYmwJG8J3eH=eGnBVHhP_=HYg6NBN_W@mail.gmail.com>
References: <AANLkTimX+rvJY21q7d-7nkNnZ4cRB9-y6gFbv4yJJDds@mail.gmail.com>
	<4BE51D3E-8BCF-4A8C-8F10-C2F92943A74E@cs.usfca.edu>
	<AANLkTik=94MpwXYmwJG8J3eH=eGnBVHhP_=HYg6NBN_W@mail.gmail.com>
Message-ID: <AANLkTi=V-1CGjqB5qRmF_ivuSrAMs6BrwQFUsD3gB3dD@mail.gmail.com>

corrections:
I forgot the 'tree grammar yYyTree;' in the tree grammar, and the tokenVocab
option is extraneous; sorry!

On Tue, Dec 21, 2010 at 8:51 PM, Matthew Wilson <diakopter at gmail.com> wrote:

> I don't understand, since upon entering/descending into a node, it is the
> children who are being examined, not the node itself.  Here's an example
> (albeit extremely contrived):
>
> // in yYy.g
> grammar yYy;
> options {
> output=AST;
> ASTLabelType=CommonTree;
> backtrack=true;
> }
> rule1 : rule3 EOF ;
> rule2 : 'y'! rule3 'a'* ;
> rule3 : rule2? ('Y'! rule2)* 'b'* ;  // extremely backtracking heavy
>
> // in yYyTree.g
>
> options {
> backtrack=true;
> tokenVocab=yYy;
> rewrite=true;
> }
> rule1 : rule3 ;
> rule2 : rule3 'a'* ; // some transformation using the 'a's
> rule3 : rule2? rule2* 'b'* ; // some transformation using the 'b's
> // end
>
> In this "scannerless" grammar, 'y' and 'Y' are treated as different kinds
> of prefix whitespace (but whitespace that must follow certain patterns), and
> rules 2 and 3 care only about 'a' and 'b', as far as the tree grammar is
> concerned.  With the input   yYyYyaaaaabbbbb<EOF>   , a correct parse tree
> (after scads of backtracking) would be sent to the tree parser, but the
> grammar complains as mentioned above.
>
> My only workaround is to duplicate the whitespace portions of those rules
> in the tree grammar so they don't "appear" to be mutually left recursive to
> antlr.  They are not truly mutually left recursive since they can never
> enter an infinite cycle while descending/recursing the TokenStream.
>
> I guess my point/question is:  if there's no possibility of a cycle in the
> input AST, why bother checking for left recursion in the rules' dependency
> graph... since the resulting tree parser won't ever infinitely recurse?
>
> Thanks! (also thanks for the great/free products!)
>
>
> On Tue, Dec 21, 2010 at 8:15 PM, Terence Parr <parrt at cs.usfca.edu> wrote:
>
>> Well, i use LL(*) to parse the tree so same rules apply.
>>
>> a : b ;
>> b : a ;
>>
>> Ter
>> On Dec 21, 2010, at 8:13 PM, Matthew Wilson wrote:
>>
>> > Hi,
>> >
>> > I was wondering why I'm getting the mutual recursion error in my tree
>> > grammar (antlrworks 1.4.2).  Why would left recursion (mutual/indirect
>> or
>> > direct) matter at all in a tree grammar?  (How could there be
>> referential
>> > cycles in the tree?)
>> >
>> > Thanks,
>> > Matthew Wilson
>> > diakopter at gmail.com
>> >
>> > List: http://www.antlr.org/mailman/listinfo/antlr-interest
>> > Unsubscribe:
>> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>>
>>
>

From parrt at cs.usfca.edu  Tue Dec 21 21:08:40 2010
From: parrt at cs.usfca.edu (Terence Parr)
Date: Tue, 21 Dec 2010 21:08:40 -0800
Subject: [antlr-interest] mutual recursion in tree grammars
In-Reply-To: <AANLkTik=94MpwXYmwJG8J3eH=eGnBVHhP_=HYg6NBN_W@mail.gmail.com>
References: <AANLkTimX+rvJY21q7d-7nkNnZ4cRB9-y6gFbv4yJJDds@mail.gmail.com>
	<4BE51D3E-8BCF-4A8C-8F10-C2F92943A74E@cs.usfca.edu>
	<AANLkTik=94MpwXYmwJG8J3eH=eGnBVHhP_=HYg6NBN_W@mail.gmail.com>
Message-ID: <943ADF9A-747D-490B-A7D5-FB176AACF572@cs.usfca.edu>

> rule1 : rule3 ;
> rule2 : rule3 'a'* ; // some transformation using the 'a's
> rule3 : rule2? rule2* 'b'* ; // some transformation using the 'b's

rule1 -> rule3 -> rule2 -> rule3 is infinite recursion though right?

Ter

From sharwell at pixelminegames.com  Wed Dec 22 11:32:18 2010
From: sharwell at pixelminegames.com (Sam Harwell)
Date: Wed, 22 Dec 2010 13:32:18 -0600
Subject: [antlr-interest] Initial CSharp3 target documentation and Visual
	Studio 2010 support
Message-ID: <016c01cba20e$f31591b0$d940b510$@pixelminegames.com>

Hello everyone,

 

This is a first copy of some documentation I'm creating for CSharp3 target.
Included in the document is a description, link, and screenshots of my
initial Visual Studio 2010 extension for ANTLR language support. The
document also explains how to set up a Visual C# project to support ANTLR
grammars using MSBuild.

 

http://www.tunnelvisionlabs.com/downloads/antlr/ANTLRCSharp3_VS2010.xps

 

After I posted the latest version of the ANTLR C# port, I modified one file
which improves IntelliSense support within Visual Studio. This download is
optional, and *replaces* one file included in step 1.3 of the documentation.

 

http://www.tunnelvisionlabs.com/downloads/antlr/Antlr3.targets

 

Thank you,

Sam Harwell


From parrt at cs.usfca.edu  Wed Dec 22 12:06:08 2010
From: parrt at cs.usfca.edu (Terence Parr)
Date: Wed, 22 Dec 2010 12:06:08 -0800
Subject: [antlr-interest] follow @the_antlr_guy for news
Message-ID: <7DA4B25F-8D8C-477F-9702-9D9DC858AE12@cs.usfca.edu>

Hi, finally set up a news feed at twitter: http://twitter.com/the_antlr_guy  all things antlr/ST/languages
Ter

From huntc at internode.on.net  Wed Dec 22 14:59:13 2010
From: huntc at internode.on.net (Christopher Hunt)
Date: Thu, 23 Dec 2010 09:59:13 +1100
Subject: [antlr-interest] Grouping nodes in the AST
Message-ID: <6D0946C0-1351-45D6-90A5-B5D4A5B89393@internode.on.net>

Hi there,

I'm putting the final touches to my parser of Zoneinfo (1) files and haven't been able to solve the last part of the puzzle: how to group a set of AST nodes such that I can ensure the order by which nodes are processed in the tree grammar. The parser grammar I have should explain better:

line
	: (ruleLine | zoneLine | linkLine | NEWLINE!)*
	;

ruleLine
	: 'Rule' ruleName ruleFrom ruleTo ruleType ruleIn ruleOn ruleAt ruleSave ruleLetters NEWLINE!
	;

zoneLine
	: 'Zone' zoneName zoneGmtOffset zoneRules zoneFormat 
	(zoneUntil (NEWLINE+) zoneGmtOffset zoneRules zoneFormat)* 
	NEWLINE
	-> 'Zone' zoneName zoneGmtOffset zoneRules zoneFormat 
	(zoneUntil 'Zone' zoneName zoneGmtOffset zoneRules zoneFormat)* 
	;

linkLine
	: 'Link' linkFrom linkTo NEWLINE!
	;

In essence, I need to group all of the rule lines together, and all of the zone lines together so that all rules are processed by my tree grammar first, then all zones are processed and finally all links are processed. This is because zones reference rules and links reference zones.

Zoneinfo source files can have rules, zones and links appear in any order hence my need to ensure that the AST outputs rules first then zones then links.

I was thinking that referencing a previous rule as described in Terence's book on p174 was the way to go, but I've not been able to make that work.

All help appreciated.

Kind regards,
Christopher

(1) http://en.wikipedia.org/wiki/Tz_database

From parrt at cs.usfca.edu  Wed Dec 22 16:00:36 2010
From: parrt at cs.usfca.edu (Terence Parr)
Date: Wed, 22 Dec 2010 16:00:36 -0800
Subject: [antlr-interest] Grouping nodes in the AST
In-Reply-To: <6D0946C0-1351-45D6-90A5-B5D4A5B89393@internode.on.net>
References: <6D0946C0-1351-45D6-90A5-B5D4A5B89393@internode.on.net>
Message-ID: <DDAEF018-1AF4-4ECB-9508-40114EA4BBD3@cs.usfca.edu>

line
	: (r+=ruleLine | z+=zoneLine | l+=linkLine | NEWLINE!)* -> $r+ $z+ $l+
	;

:)

Ter
On Dec 22, 2010, at 2:59 PM, Christopher Hunt wrote:

> Hi there,
> 
> I'm putting the final touches to my parser of Zoneinfo (1) files and haven't been able to solve the last part of the puzzle: how to group a set of AST nodes such that I can ensure the order by which nodes are processed in the tree grammar. The parser grammar I have should explain better:
> 
> line
> 	: (ruleLine | zoneLine | linkLine | NEWLINE!)*
> 	;
> 
> ruleLine
> 	: 'Rule' ruleName ruleFrom ruleTo ruleType ruleIn ruleOn ruleAt ruleSave ruleLetters NEWLINE!
> 	;
> 
> zoneLine
> 	: 'Zone' zoneName zoneGmtOffset zoneRules zoneFormat 
> 	(zoneUntil (NEWLINE+) zoneGmtOffset zoneRules zoneFormat)* 
> 	NEWLINE
> 	-> 'Zone' zoneName zoneGmtOffset zoneRules zoneFormat 
> 	(zoneUntil 'Zone' zoneName zoneGmtOffset zoneRules zoneFormat)* 
> 	;
> 
> linkLine
> 	: 'Link' linkFrom linkTo NEWLINE!
> 	;
> 
> In essence, I need to group all of the rule lines together, and all of the zone lines together so that all rules are processed by my tree grammar first, then all zones are processed and finally all links are processed. This is because zones reference rules and links reference zones.
> 
> Zoneinfo source files can have rules, zones and links appear in any order hence my need to ensure that the AST outputs rules first then zones then links.
> 
> I was thinking that referencing a previous rule as described in Terence's book on p174 was the way to go, but I've not been able to make that work.
> 
> All help appreciated.
> 
> Kind regards,
> Christopher
> 
> (1) http://en.wikipedia.org/wiki/Tz_database
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address


From huntc at internode.on.net  Wed Dec 22 16:53:47 2010
From: huntc at internode.on.net (Christopher Hunt)
Date: Thu, 23 Dec 2010 11:53:47 +1100
Subject: [antlr-interest] Grouping nodes in the AST
In-Reply-To: <DDAEF018-1AF4-4ECB-9508-40114EA4BBD3@cs.usfca.edu>
References: <6D0946C0-1351-45D6-90A5-B5D4A5B89393@internode.on.net>
	<DDAEF018-1AF4-4ECB-9508-40114EA4BBD3@cs.usfca.edu>
Message-ID: <9D4369AD-CBCC-4F04-85D6-24D375703940@internode.on.net>

Hi Terence,

Thanks so much!

That did indeed work, but what threw me is that the AST output in ANTLRworks showed a nil element only (and nothing else!). However all appears well when I run my unit tests on the parser and tree walker.

FYI I also subsequently modified my tree grammar to read:

line
	: ruleLine* zoneLine* linkLine*
	;

Thanks again.

Kind regards,
Christopher

On 23/12/2010, at 11:00 AM, Terence Parr wrote:

> line
> 	: (r+=ruleLine | z+=zoneLine | l+=linkLine | NEWLINE!)* -> $r+ $z+ $l+
> 	;


From keith.nicholas at gmail.com  Wed Dec 22 17:33:50 2010
From: keith.nicholas at gmail.com (Keith Nicholas)
Date: Thu, 23 Dec 2010 14:33:50 +1300
Subject: [antlr-interest] C# extra or lack of character in a token when
 getting Text of a node in the tree
Message-ID: <AANLkTinW8oxXQ0YjVLXxh1KjaQEJ4hoBR5c1R4XbCOYr@mail.gmail.com>

I have a grammar with the token......


STRING
    :  '\'' ( ESC_SEQ | ~('\\'|'\'') )* '\''
    ;


so, single quotes string ( as per auto generated in antlr works)


When I'm walking the tree......    i have a string   'blah'

in the debugger I have


+ [Antlr.Runtime.Tree.CommonTree] {'blah'} Antlr.Runtime.Tree.CommonTree

and the "Text" property is

Text "'blah'" string

might be a bit hard to see

but it is   blah'       ie,  it has the ' on the end.....

Now I'm not sure if its supposed to have both the quote or neither quotes,
but I'm pretty sure its not supposed to just have one of them

any ideas?

Regards,

Keith

From kingces95 at gmail.com  Thu Dec 23 14:15:59 2010
From: kingces95 at gmail.com (chris king)
Date: Thu, 23 Dec 2010 12:15:59 -1000
Subject: [antlr-interest] Hello World!
Message-ID: <AANLkTikBA7G7nNjX20iZe=4u+-C3Dp78f0hchmWrCNaw@mail.gmail.com>

Hi,

I just bought the book and was trying out some samples. I encountered a
little error and I'm wondering if it's my fault. I copied this from page 69:

expr NEWLINE {System.out.println($expr.value);}

And when I use (the incredible) ANTLRWorks I get an error

[12:10:31] error(116): c:\users\cking\documents\visual studio
2010\Projects\antlr\antlr\Expr.g:20:23: unknown attribute for rule expr:
value

Maybe it should be expr.text? Or am I using the wrong version? I'm currently
rocking out with 1.4.2 of AntlerWorks.

Thanks,
Chris

From parrt at cs.usfca.edu  Thu Dec 23 14:20:56 2010
From: parrt at cs.usfca.edu (Terence Parr)
Date: Thu, 23 Dec 2010 14:20:56 -0800
Subject: [antlr-interest] Hello World!
In-Reply-To: <AANLkTikBA7G7nNjX20iZe=4u+-C3Dp78f0hchmWrCNaw@mail.gmail.com>
References: <AANLkTikBA7G7nNjX20iZe=4u+-C3Dp78f0hchmWrCNaw@mail.gmail.com>
Message-ID: <9CF7AB50-AA71-406A-AAC5-7BFBED8AD1B9@cs.usfca.edu>

hi Chris.  Does expr return a value called value?
Ter
On Dec 23, 2010, at 2:15 PM, chris king wrote:

> Hi,
> 
> I just bought the book and was trying out some samples. I encountered a
> little error and I'm wondering if it's my fault. I copied this from page 69:
> 
> expr NEWLINE {System.out.println($expr.value);}
> 
> And when I use (the incredible) ANTLRWorks I get an error
> 
> [12:10:31] error(116): c:\users\cking\documents\visual studio
> 2010\Projects\antlr\antlr\Expr.g:20:23: unknown attribute for rule expr:
> value
> 
> Maybe it should be expr.text? Or am I using the wrong version? I'm currently
> rocking out with 1.4.2 of AntlerWorks.
> 
> Thanks,
> Chris
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address


From james_ladd at hotmail.com  Thu Dec 23 18:43:29 2010
From: james_ladd at hotmail.com (James Ladd)
Date: Fri, 24 Dec 2010 13:43:29 +1100
Subject: [antlr-interest] Redline Smalltalk using ANTLR
In-Reply-To: <mailman.1.1293134401.29654.antlr-interest@antlr.org>
References: <mailman.1.1293134401.29654.antlr-interest@antlr.org>
Message-ID: <BAY149-w54383A09EC215DAE4B0D9BED1D0@phx.gbl>


The next in the series is out: Redline: Smalltalk in 'small talks' - Message in a bottle - Part 1

http://bit.ly/dNlK7d



We are parsing Smalltalk source now with an ANTLR grammar. 
Going to be executing it in next post.



Rgs, James.

 		 	   		  

From borucki_andrzej at wp.pl  Fri Dec 24 00:26:51 2010
From: borucki_andrzej at wp.pl (Andrzej)
Date: Fri, 24 Dec 2010 09:26:51 +0100
Subject: [antlr-interest] Inside .g file
Message-ID: <4D14594B.4080902@wp.pl>

Where I can find precise description of grammar .g file?
I found grammar of this file on http://www.antlr.org/grammar/ANTLR but 
where is description?

From valliantster at gmail.com  Fri Dec 24 07:35:26 2010
From: valliantster at gmail.com (denstar)
Date: Fri, 24 Dec 2010 08:35:26 -0700
Subject: [antlr-interest] gUnit test of lexer with predicates
Message-ID: <AANLkTinthdn6kuGR8sRRncG5FmTkxmYzgYgYkN31fHUQ@mail.gmail.com>

Hi folks!

I'm trying to do a gunit test of the example XML lexer/parser from the wiki:
http://www.antlr.org/wiki/display/ANTLR3/1.+Lexer

@lexer::members {
    boolean tagMode = false;
}

TAG_START_OPEN : '<' { tagMode = true; } ;
TAG_END_OPEN : '</' { tagMode = true; } ;
TAG_CLOSE : { tagMode }?=> '>' { tagMode = false; } ;
TAG_EMPTY_CLOSE : { tagMode }?=> '/>' { tagMode = false; } ;

ATTR_EQ : { tagMode }?=> '=' ;

ATTR_VALUE : { tagMode }?=>
        ( '"' (~'"')* '"'
        | '\'' (~'\'')* '\''
        )
    ;

PCDATA : { !tagMode }?=> (~'<')+ ;

GENERIC_ID
    : { tagMode }?=>
      ( LETTER | '_' | ':') (NAMECHAR)*
    ;

fragment NAMECHAR
    : LETTER | DIGIT | '.' | '-' | '_' | ':'
    ;

fragment DIGIT
    :    '0'..'9'
    ;

fragment LETTER
    : 'a'..'z'
    | 'A'..'Z'
    ;

WS  :  { tagMode }?=>
       (' '|'\r'|'\t'|'\u000C'|'\n') {$channel=99;}
    ;

But when I run this test:

GENERIC_ID:
"some" OK

I get this output:

     [echo] expected: OK
     [echo] actual: FailedPredicateException(GENERIC_ID,{ tagMode }?)

Which sorta makes sense, but is there a way around it?

I also tried doing a simple test of the parser with this:

emptyElement:
"<empty/>" -> ""

startTag:
"<wee>" OK

Which produces this:

     [echo] test4 (emptyElement, line17) -
     [echo] expected:
     [echo] actual: Invalid input

     [echo] test5 (startTag, line20) -
     [echo] expected: OK
     [echo] actual: java.util.EmptyStackException

Which has me kinda stumped.

If I run a test on some input in ANTLRWorks, it runs fine, but if I
try to run the interpreter (pointless, as there's predicates, right?),
ANTLRWorks hangs.  Same goes for antlrv3ide in Eclipse (which is even
worse, because it tries to run the interpreter before it will actually
run the test).

I'm guessing this is all probably because of the predicate, but I
don't know for sure.  I was really hoping to be able to leverage
gUnit.

I'm hoping I'm doing something dumb somewhere (besides trying to parse
HTML-like input), as I'm relatively new to ANTLR.

:Den

-- 
A philosopher is, no doubt, entitled to examine even those
distinctions that are to be found in the structure of all languages...
in that case, such a distinction may be imputed to a vulgar error,
which ought to be corrected in philosophy.
Thomas Reid

From cummings at kjchome.homeip.net  Fri Dec 24 10:16:50 2010
From: cummings at kjchome.homeip.net (Kevin J. Cummings)
Date: Fri, 24 Dec 2010 13:16:50 -0500
Subject: [antlr-interest] Inside .g file
In-Reply-To: <4D14594B.4080902@wp.pl>
References: <4D14594B.4080902@wp.pl>
Message-ID: <4D14E392.2070202@kjchome.homeip.net>

On 12/24/2010 03:26 AM, Andrzej wrote:
> Where I can find precise description of grammar .g file?
> I found grammar of this file on http://www.antlr.org/grammar/ANTLR but 
> where is description?

Does this page help you in any way?

> http://www.antlr.org/wiki/display/ANTLR3/ANTLR+v3+printable+documentation

-- 
Kevin J. Cummings
kjchome at rcn.com
cummings at kjchome.homeip.net
cummings at kjc386.framingham.ma.us
Registered Linux User #1232 (http://counter.li.org)

From aitbenmouh at yahoo.fr  Fri Dec 24 14:39:50 2010
From: aitbenmouh at yahoo.fr (lhoussain)
Date: Fri, 24 Dec 2010 14:39:50 -0800 (PST)
Subject: [antlr-interest] problem with my grammar
Message-ID: <1293230390896-5865678.post@n2.nabble.com>


Hello ,

   Im working with ANTLRWORKS and i hve probelmes with my grammar if you can
help me to change it in a LL1 grammar help me.
 
grammar grammaire;
PROGRAMM     : 'programm ident' VARDECLLIST FUNCDECLLIST INSTR;		
VARDECLLIST  : EOF| VARDECL ';' VARDECLLIST;
VARDECL      : 'var' IDENTLIST ';' TYPENAME;
IDENTLIST    : 'ident' IDENT;
IDENT	     : EOF|','IDENTLIST;	
TYPENAME     : ATOMICTYPE | ARRAYTYPE;
ATOMICTYPE   : 'unit' | 'bool' 
                      | 'int'; 
ARRAYTYPE    : 'array' '['RANGELIST']' 'of' ATOMICTYPE; 
RANGELIST    : 'int..int' RANG;
RANG	     : 	',' RANGELIST|EOF;
FUNCDECLLIST : EOF| FUNCDECL ';' FUNCDECLLIST;
FUNCDECL     : 'function ident ('ARGLIST') : 'ATOMICTYPE VARDECLLIST INSTR;
ARGLIST	     : ARG K| EOF;
K	     :','ARGLIST|EOF;		
ARG          : 'ident :' TYPENAME| 'ref ident :' TYPENAME; 
INSTR        :  'if' EXPR 'then do 'INSTR SUITE 
				| 'while' EXPR' do' INSTR 
				| LVALUE' :='EXPR 
				| 'return' X
				| 'ident ('EXPRLIST')'
				| 'begin' SEQUENCE 'end' 
				| 'begin end'; 
SUITE	     :EOF|' else' INSTR ;					
X	     :EXPR|EOF;	
SEQUENCE     : INSTR SUIV; 
SUIV	     :	';'SEQUENCE|';'|EOF;
LVALUE       : 'ident' VALUE;
VALUE	     :	'['EXPRLIST']'|EOF;
EXPRLIST     : EXPR T;
T	     :','EXPRLIST |EOF;	
EXPR         : 'cte' R  | '('EXPR')' R
		        | 'opu' EXPR R
                        | 'ident' EXPRL R; 
   
R	     :	'opb' EXPR R | EOF;
EXPRL	     : 	'('EXPRLIST')'|'['EXPRLIST']';


-- 
View this message in context: http://antlr.1301665.n2.nabble.com/problem-with-my-grammar-tp5865678p5865678.html
Sent from the ANTLR mailing list archive at Nabble.com.

From jeffn at photorepo.com  Sat Dec 25 06:26:28 2010
From: jeffn at photorepo.com (Jeffrey Newman)
Date: Sat, 25 Dec 2010 06:26:28 -0800
Subject: [antlr-interest] AntlrWorks very slow
Message-ID: <201012250626.28123.jeffn@photorepo.com>

Hi,

I'm beginning work with AntlrWorks.
Nice Grammar IDE (but already know that).
I'm having a performance problem.
As I edit the grammar, the IDE is very sluggish, seconds between key strokes.
I looked that system monitor and java is taking between 9% and 22% of the 
system CPU resource while typing, then none. (6 core, 3.2 gig Phenom...)

Is there a way to turn off the automatic grammar checking, and just check when 
I'm ready, or is there a way to make AntlrWorks more responsive?

thanks

Jeffrey

From kferrio at gmail.com  Sat Dec 25 08:01:39 2010
From: kferrio at gmail.com (Kyle Ferrio)
Date: Sat, 25 Dec 2010 09:01:39 -0700
Subject: [antlr-interest] ANTLR IDE 2.1.1 released!!!
In-Reply-To: <AANLkTi=88aGSMnfq8E==cwOusrAQsygdHpWiaQhkn7LK@mail.gmail.com>
References: <AANLkTi=88aGSMnfq8E==cwOusrAQsygdHpWiaQhkn7LK@mail.gmail.com>
Message-ID: <AANLkTimm5c6Tjr3Jza+inO_FHa8Uu6WFUme+1wLoEg69@mail.gmail.com>

Slightly off-topic, but perhaps important to folks who like using ANTLR
IDE...

I really like the improvements in 2.1.

Now that ANTLR IDE requires Eclipse 3.6, users of Ubuntu (and Debian-based
distros in general) seem to have a problem.
Eclipse 3.6 (Helios) crashes frequently (as in, impossible to use) on these
systems, complaining that the version of SQLite is too old.  Unfortunately,
Eclipse does not seem to report what version of SQLIte is needed or where.
I have sqlite2.7, sqlite3.6 packages and a local SQLite 3.7 I built from
source, but Eclipse is not happy.  I even uninstalled all sqlite/libsqlite
packages (breaking lots of user apps) and got the same behavior with my
3.7.  This has been an ongoing "thing" (
https://bugs.eclipse.org/bugs/show_bug.cgi?id=312424 ) and a resolution does
not appear imminent.  Has anyone here had better luck on Ubuntu?  Surely not
all ANTLR users are Windows users.  :)

Meanwhile the ANTLR IDE is working great on Windows, thanks!

Kyle

On Sun, Nov 14, 2010 at 7:43 AM, Edgar Espina <espina.edgar at gmail.com>wrote:

> Enjoy it!!!
>
> http://goo.gl/YbZV5
>
> --
> edgar
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>

From jimi at temporal-wave.com  Sat Dec 25 09:13:37 2010
From: jimi at temporal-wave.com (Jim Idle)
Date: Sat, 25 Dec 2010 09:13:37 -0800
Subject: [antlr-interest] AntlrWorks very slow
In-Reply-To: <201012250626.28123.jeffn@photorepo.com>
References: <201012250626.28123.jeffn@photorepo.com>
Message-ID: <7b277e724938b44ef8c27f06fa4a4b5f@mail.gmail.com>

Increase the delay before coloration - I use 2 seconds myself, even as a
touch typist. You might find that as much as 5 seconds is good. Set in the
preferences.

Jim

> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of Jeffrey Newman
> Sent: Saturday, December 25, 2010 6:26 AM
> To: antlr-interest at antlr.org
> Subject: [antlr-interest] AntlrWorks very slow
>
> Hi,
>
> I'm beginning work with AntlrWorks.
> Nice Grammar IDE (but already know that).
> I'm having a performance problem.
> As I edit the grammar, the IDE is very sluggish, seconds between key
> strokes.
> I looked that system monitor and java is taking between 9% and 22% of
> the system CPU resource while typing, then none. (6 core, 3.2 gig
> Phenom...)
>
> Is there a way to turn off the automatic grammar checking, and just
> check when I'm ready, or is there a way to make AntlrWorks more
> responsive?
>
> thanks
>
> Jeffrey
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
> email-address

From borucki_andrzej at wp.pl  Sat Dec 25 09:58:25 2010
From: borucki_andrzej at wp.pl (Andrzej)
Date: Sat, 25 Dec 2010 18:58:25 +0100
Subject: [antlr-interest] non-LL(*) HTML grammar
Message-ID: <4D1630C1.3030703@wp.pl>

I convert grammar http://www.antlr.org/grammar/HTML to ANTLR version 3 
from 2.
I meet error:
error(211): HTML.g:209:3: [fatal] rule paragraph has non-LL(*) decision 
due to recursive rule invocations reachable from alts 1,2.  Resolve by 
left-factoring or using syntactic predicates or using backtrack=true option.

Rule is:
paragraph
  : OPARA
   (
    /*	Rule body_content may also be just plain text because HTML is
	so loose.  When body puts body_content in a loop, ANTLR
	doesn't know whether you want it to match all the text as part
	of this paragraph (in the case where the </p> is missing) or
	if the body rule should scarf it.  This is analogous to the
	dangling-else clause.  I shut off the warning.
	*/
	/*options {
	generateAmbigWarnings=false;
	}*/
	text
   )*
   (CPARA)?	
   ;

options {backtrack=true;} nothing do, and backtracking is not good 
because slown down parsing. Can be more text:
OPARA text text text .. (CPARA)
OPARA
	:	'<p' (WS ATTR)? '>'
	;

CPARA
	: 	'</p>'		//it's optional
	;

It is possible to left-factoring ? How use syntactic predicates ?

From valliantster at gmail.com  Sat Dec 25 13:44:25 2010
From: valliantster at gmail.com (denstar)
Date: Sat, 25 Dec 2010 14:44:25 -0700
Subject: [antlr-interest] non-LL(*) HTML grammar
In-Reply-To: <4D1630C1.3030703@wp.pl>
References: <4D1630C1.3030703@wp.pl>
Message-ID: <AANLkTikEqSWh6bpm6N5ymdD4pHbqRH-YDkVbAwTq8PrP@mail.gmail.com>

On Sat, Dec 25, 2010 at 10:58 AM, Andrzej wrote:
> I convert grammar http://www.antlr.org/grammar/HTML to ANTLR version 3
> from 2.
> I meet error:
> error(211): HTML.g:209:3: [fatal] rule paragraph has non-LL(*) decision
> due to recursive rule invocations reachable from alts 1,2. ?Resolve by
> left-factoring or using syntactic predicates or using backtrack=true option.

Unless you have a really compelling reason to parse HTML with ANTLR,
I'd recommend using something like Jericho HTML or TagSoup instead.

Otherwise, you can check out the XML parsing example in the wiki, as
it's probably the best route to an HTML parser.

Sadly, any use of predicates or backtracking seems to make using the
nifty tools for ANTLR kinda hard...

I'm a tad crazy, and am working on a HTML-ish parser using ANTLR, but
it's still pretty rough.

:Den

-- 
As a rule, all heroism is due to a lack of reflection, and thus it is
necessary to maintain a mass of imbeciles. If they once understand
themselves the ruling men will be lost.
Ernest Renan

From ronburk at gmail.com  Sun Dec 26 15:38:03 2010
From: ronburk at gmail.com (Ron Burk)
Date: Sun, 26 Dec 2010 15:38:03 -0800
Subject: [antlr-interest] the nihilistic circle hoist
Message-ID: <AANLkTim9KJDyNhLMVZbSbdYw40N5YXRdcP9GeX8=qQXB@mail.gmail.com>

I ran across this puzzling case from the archives:
http://www.antlr.org/pipermail/antlr-interest/2007-June/021483.html

grammar Simple;

FOO : 'foo' ;

section : element* EOF ;
element : {true}?=> pre ;
pre : FOO+ ;

Which resulted in the predicate being "hoisted" into "pre",
apparently with the result that the grammar can't match
any input.

Note that this grammar is unresolvably ambiguous, as is
always the case when you have X* and X derives a
Y*. The example is derived from a more complex case,
but either way (and however one might question the
desirability), one could argue that the predicate
lets you resolve the ambiguity by saying "if there is
at least a single 'FOO', then let 'pre' eat them all
up, resulting in a single 'element' (despite the * on
the 'element').

The generated parser
cannot accept the intended language, and this fact
can be determined statically in advance with no
understanding of what  the predicate actually says.
If the predicate were "X()" instead of "true", it can
be seen (by examining the generated code)
that pre() can only be entered if "X()"
is true, while pre() is guaranteed to throw an
exception if "X()" is true. It is the same
predicate in both cases that results in
the catch-22, not some combination of
multiple predicates that might indicate this
is actually the desired outcome of the grammar
writer.


My na?ve (possibly wrong) approach to
doing predicates in LL(1) would start with
rewriting to BNF:

grammar Simple;

FOO : 'foo' ;

section : elements EOF ;
elements:| element elements;
element : {true}?=> pre ;
pre : FOO foos ;
foos :| FOO foos;

Predicate "hoisting" then is vaguely like calculating FIRST() sets,
but the elements of the sets are not just terminals, but predicates
and their associated FIRST() set terminals. In this example,
the predicate (call it P1) has just one terminal associated
with it (FOO). Using PFIRST() to name these sets, FIRST(elements)
contains FIRST(element), so PFIRST(elements) would also
contain {P1,FOO} (meaning, if the next token is FOO, then
P1 must be true to proceed). Likewise, PFIRST(section) would
be equal to PFIRST(elements), so the predicate has been
"hoisted" to two symbols "above", as users would expect
from the name "hoist".

It is in calculating PFIRST(foos) that the opportunity for
Catch-22 arises. Because foos is nullable, FIRST(foos)
must include FOLLOW(foos). FOLLOW(foos) must include
FOLLOW(pre), which must include FOLLOW(element)
which must include FIRST(elements), which is FIRST(element),
which is FIRST(pre). Yikes, there's predicate P1 again,
waiting to get "hoisted downward" into foos.

So my naive LL(1) algorithm has produced somewhat the
same effect as the ANTLR algorithm. But, this algorithm
is clearly wrong, then. The only way that "foos" can be
reached is after P1 has (or should have) already
completed its function in life. While it's tempting to
view predicate hoisting as analogous to the
calculation of FIRST() sets, that didn't work so hot here.

The previous observation suggests that "hoisting"
should only be extended to nonterminals that can
actually derive a string that starts with the nonterminal
containing the predicate being hoisted.

From ian.tegebo at gmail.com  Sun Dec 26 15:43:25 2010
From: ian.tegebo at gmail.com (Ian Tegebo)
Date: Sun, 26 Dec 2010 15:43:25 -0800
Subject: [antlr-interest] Mavin: Unable to find resource
	'org.antlr:antlr3-maven-archetype:jar:3.3'
In-Reply-To: <mailman.378.1293394581.3058.antlr-interest@antlr.org>
References: <mailman.378.1293394581.3058.antlr-interest@antlr.org>
Message-ID: <AANLkTim96Ys8ZkFH3zMoAdiF4R=xnBasFXLEm-CQ3=Lc@mail.gmail.com>

When I run,

mvn archetype:generate

(select 63 for "remote -> antlr3-maven-archetype (-)")

I get,

Downloading: http://repo1.maven.org/maven2/org/antlr/antlr3-maven-archetype/3.3/antlr3-maven-archetype-3.3.jar
[INFO] Unable to find resource
'org.antlr:antlr3-maven-archetype:jar:3.3' in repository central
(http://repo1.maven.org/maven2)
[INFO] ------------------------------------------------------------------------
[ERROR] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] The desired archetype does not exist
(org.antlr:antlr3-maven-archetype:3.3)

While I can see that it may simply be mis-named (missing the extension '.jar'):

http://repo2.maven.org/maven2/org/antlr/antlr3-maven-archetype/3.3/

And the SNAPSHOT appears to exist and have '.jar':
http://www.antlr.org/depot/antlr3/main/antlr3-maven-archetype/target

Unfortunately, I'm just getting started with Maven and I can't seem to
figure out how to get a local repository setup such that 'mvn
archetype:generate' finds the SNAPSHOT resource.

-- 
Ian Tegebo

From kingces95 at gmail.com  Mon Dec 27 17:35:34 2010
From: kingces95 at gmail.com (chris king)
Date: Mon, 27 Dec 2010 15:35:34 -1000
Subject: [antlr-interest] Best practice convention for implementing a
	pre-processor?
Message-ID: <AANLkTinwyzSf1SNoaXHH5sNh+SVE357COa1Ep45=iVY2@mail.gmail.com>

Hello all! What ANTLR conventions are available to add pre-processor
functionality? For example,

#if TRUE
IgnoreThisIdentifier
#else
ParseThisIdentifier
#endif

Everything after the # and before the new line needs its own parser and
grammar separate from the language. One approach would be to build a
separate grammar and pipe its results into the language grammar. I shy away
from this because I want to leverage the ANTLR optimization whereby all
tokens point into a single loaded input string. The other approach would be
to use predicates to partition the ANTLR file into two grammars.

grammar test;

options
{
language = CSharp3;
}

@lexer::members {
    bool m_pp = false;
}

public file
:       stmt*;

stmt
: id NEWLINE
| pp;
pp
: POUND WS* pp_name NEWLINE;

pp_name
: PP_ID;

id : ID;

POUND :   {!m_pp}?=>'#' { m_pp = true; } ;
PP_ID   :   {m_pp}?=>('A'..'Z')+ ;
ID   :   {!m_pp}?=>('a'..'z'|'A'..'Z')+ ;
INT :   {!m_pp}?=>'0'..'9'+ ;
NEWLINE :   {m_pp}?=>'\r'? '\n' { m_pp = false; };
WS   :   (' '|'\t'|'\n'|'\r')+ {skip();} ;

The draw back here is that this approach to partitioning is not first class
and so I'm unsure of  the perf implications of adding predicates before all
my rules.

Is there a third approach? Some declarative way to partition lexer and
grammar rules?

Thanks!
Chris

From Ramon.Verbruggen at quintiq.com  Mon Dec 27 23:49:59 2010
From: Ramon.Verbruggen at quintiq.com (Ramon Verbruggen)
Date: Tue, 28 Dec 2010 08:49:59 +0100
Subject: [antlr-interest] Faster expression parsing
In-Reply-To: <EC8F12DD-EE73-450B-937D-84EE568EFEC4@cs.usfca.edu>
References: <648371.68504.qm@web110009.mail.gq1.yahoo.com>
	<EC8F12DD-EE73-450B-937D-84EE568EFEC4@cs.usfca.edu>
Message-ID: <4D19A4B7020000870000416B@mail.quintiq.nl>

Hi all,

I am looking to upgrade our parser from ANTLR 3.0.1 to 3.3 (or 3.3.1 when the new C backend is included).

In 2008 there was some talk about faster expression parsing and in http://www.antlr.org/wiki/display/~admin/2008/04/10/Still+more+about+expression+parsing Terence states 'ANTLR v3.2 will allow special rules for specifying expressions that are particularly efficient both in speed and space'.

I cannot actually remember seeing any of this show up in the release notes, or being talked about again (I did search the markmail archives)

Does ANTLR 3.3 include this faster expression parsing?
If so, is it implemented by specifying some sort of table of operators, precedences and associativity, or is this implemented by a more programmatic approach as described by Sam Harwell in http://antlr.org/wiki/display/ANTLR3/Operator+precedence+parser ?

Best regards,

Ramon Verbruggen




From pop.qvarnstrom at gmail.com  Tue Dec 28 00:38:43 2010
From: pop.qvarnstrom at gmail.com (=?ISO-8859-1?Q?Pop_Qvarnstr=F6m?=)
Date: Tue, 28 Dec 2010 09:38:43 +0100
Subject: [antlr-interest] Mavin: Unable to find resource
	'org.antlr:antlr3-maven-archetype:jar:3.3'
In-Reply-To: <AANLkTim96Ys8ZkFH3zMoAdiF4R=xnBasFXLEm-CQ3=Lc@mail.gmail.com>
References: <mailman.378.1293394581.3058.antlr-interest@antlr.org>
	<AANLkTim96Ys8ZkFH3zMoAdiF4R=xnBasFXLEm-CQ3=Lc@mail.gmail.com>
Message-ID: <AANLkTikk10E24Yk0mAyQy64-pO6W=GaCQF-j3AL2qsb+@mail.gmail.com>

Hi,

There seems to be a problem with the filename in the repo. To make it work
with the release version, you can try a manual install to your local
repository:
1. Dowload the file
http://repo1.maven.org/maven2/org/antlr/antlr3-maven-archetype/3.3/antlr3-maven-archetype-3.3.maven-archetypeand
save it as
antlr3-maven-archetype-3.3.maven-archetype.jar
2. Download the file
http://repo1.maven.org/maven2/org/antlr/antlr3-maven-archetype/3.3/antlr3-maven-archetype-3.3.maven-archetype.md5to
the same directory as the previous file
3. In the directory where you saved the file in step 1, run md5sum
antlr3-maven-archetype-3.3.maven-archetype.jar and verify that the resulting
hash is identical to the hash in the file downloaded in step 2.
4. In the directory where you saved the file in step 1, run the following
command: mvn install:install-file
-Dfile=antlr3-maven-archetype-3.3.maven-archetype.jar -DgroupId=org.antlr
-DartifactId=antlr3-maven-archetype -Dversion=3.3 -Dpackaging=jar
-DgeneratePom=true

Similar procedure to get a local install of a SNAPSHOT version if desired.

Cheers,
Pop Qvarnstr?m

On Mon, Dec 27, 2010 at 12:43 AM, Ian Tegebo <ian.tegebo at gmail.com> wrote:

> When I run,
>
> mvn archetype:generate
>
> (select 63 for "remote -> antlr3-maven-archetype (-)")
>
> I get,
>
> Downloading:
> http://repo1.maven.org/maven2/org/antlr/antlr3-maven-archetype/3.3/antlr3-maven-archetype-3.3.jar
> [INFO] Unable to find resource
> 'org.antlr:antlr3-maven-archetype:jar:3.3' in repository central
> (http://repo1.maven.org/maven2)
> [INFO]
> ------------------------------------------------------------------------
> [ERROR] BUILD FAILURE
> [INFO]
> ------------------------------------------------------------------------
> [INFO] The desired archetype does not exist
> (org.antlr:antlr3-maven-archetype:3.3)
>
> While I can see that it may simply be mis-named (missing the extension
> '.jar'):
>
> http://repo2.maven.org/maven2/org/antlr/antlr3-maven-archetype/3.3/
>
> And the SNAPSHOT appears to exist and have '.jar':
> http://www.antlr.org/depot/antlr3/main/antlr3-maven-archetype/target
>
> Unfortunately, I'm just getting started with Maven and I can't seem to
> figure out how to get a local repository setup such that 'mvn
> archetype:generate' finds the SNAPSHOT resource.
>
> --
> Ian Tegebo
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>

From jimi at temporal-wave.com  Tue Dec 28 10:50:24 2010
From: jimi at temporal-wave.com (Jim Idle)
Date: Tue, 28 Dec 2010 10:50:24 -0800
Subject: [antlr-interest] Mavin: Unable to find resource
	'org.antlr:antlr3-maven-archetype:jar:3.3'
In-Reply-To: <AANLkTikk10E24Yk0mAyQy64-pO6W=GaCQF-j3AL2qsb+@mail.gmail.com>
References: <mailman.378.1293394581.3058.antlr-interest@antlr.org>
	<AANLkTim96Ys8ZkFH3zMoAdiF4R=xnBasFXLEm-CQ3=Lc@mail.gmail.com>
	<AANLkTikk10E24Yk0mAyQy64-pO6W=GaCQF-j3AL2qsb+@mail.gmail.com>
Message-ID: <01c19fc7be4abebd711d6d6b51b39352@mail.gmail.com>

Yes - I will need to fic this, but you can just as easily use the prior
version and then change the ANTLR reference to 3.3 instead of 3.2 - there
are no other differences.

Jim

> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of Pop Qvarnstr?m
> Sent: Tuesday, December 28, 2010 12:39 AM
> To: Ian Tegebo
> Cc: antlr-interest at antlr.org
> Subject: Re: [antlr-interest] Mavin: Unable to find resource
> 'org.antlr:antlr3-maven-archetype:jar:3.3'
>
> Hi,
>
> There seems to be a problem with the filename in the repo. To make it
> work with the release version, you can try a manual install to your
> local
> repository:
> 1. Dowload the file
> http://repo1.maven.org/maven2/org/antlr/antlr3-maven-
> archetype/3.3/antlr3-maven-archetype-3.3.maven-archetypeand
> save it as
> antlr3-maven-archetype-3.3.maven-archetype.jar
> 2. Download the file
> http://repo1.maven.org/maven2/org/antlr/antlr3-maven-
> archetype/3.3/antlr3-maven-archetype-3.3.maven-archetype.md5to
> the same directory as the previous file
> 3. In the directory where you saved the file in step 1, run md5sum
> antlr3-maven-archetype-3.3.maven-archetype.jar and verify that the
> resulting hash is identical to the hash in the file downloaded in step
> 2.
> 4. In the directory where you saved the file in step 1, run the
> following
> command: mvn install:install-file
> -Dfile=antlr3-maven-archetype-3.3.maven-archetype.jar -
> DgroupId=org.antlr -DartifactId=antlr3-maven-archetype -Dversion=3.3 -
> Dpackaging=jar -DgeneratePom=true
>
> Similar procedure to get a local install of a SNAPSHOT version if
> desired.
>
> Cheers,
> Pop Qvarnstr?m
>
> On Mon, Dec 27, 2010 at 12:43 AM, Ian Tegebo <ian.tegebo at gmail.com>
> wrote:
>
> > When I run,
> >
> > mvn archetype:generate
> >
> > (select 63 for "remote -> antlr3-maven-archetype (-)")
> >
> > I get,
> >
> > Downloading:
> > http://repo1.maven.org/maven2/org/antlr/antlr3-maven-
> archetype/3.3/ant
> > lr3-maven-archetype-3.3.jar
> > [INFO] Unable to find resource
> > 'org.antlr:antlr3-maven-archetype:jar:3.3' in repository central
> > (http://repo1.maven.org/maven2)
> > [INFO]
> > ---------------------------------------------------------------------
> -
> > --
> > [ERROR] BUILD FAILURE
> > [INFO]
> > ---------------------------------------------------------------------
> -
> > -- [INFO] The desired archetype does not exist
> > (org.antlr:antlr3-maven-archetype:3.3)
> >
> > While I can see that it may simply be mis-named (missing the
> extension
> > '.jar'):
> >
> > http://repo2.maven.org/maven2/org/antlr/antlr3-maven-archetype/3.3/
> >
> > And the SNAPSHOT appears to exist and have '.jar':
> > http://www.antlr.org/depot/antlr3/main/antlr3-maven-archetype/target
> >
> > Unfortunately, I'm just getting started with Maven and I can't seem
> to
> > figure out how to get a local repository setup such that 'mvn
> > archetype:generate' finds the SNAPSHOT resource.
> >
> > --
> > Ian Tegebo
> >
> > List: http://www.antlr.org/mailman/listinfo/antlr-interest
> > Unsubscribe:
> > http://www.antlr.org/mailman/options/antlr-interest/your-email-
> address
> >
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
> email-address

From jmurray at aerotech.com  Tue Dec 28 11:59:17 2010
From: jmurray at aerotech.com (Justin Murray)
Date: Tue, 28 Dec 2010 14:59:17 -0500
Subject: [antlr-interest] [C target] Warnings in 64-bit compile
Message-ID: <6B458D23F5D4A24ABCDB3C78EA97393B01FC9FFB@EXCH-VIRTUAL.aerotechad.com>

Jim,

 

I am working on making our compiler support 64-bit builds, and have run
into a number of compiler warnings due to conflicting types in the ANTLR
generated C code:

 

warning C4244: '=' : conversion from 'ANTLR3_MARKER' to 'ANTLR3_UINT32',
possible loss of data

 

This comes from the line:

 

axisMask_StartIndex = INDEX();

 

axisMask_StartIndex is declared as type ANTLR3_UINT32, and INDEX() is
returning type ANTLR3_MARKER. On a 64-bit build (on a Windows machine),
ANTLR3_UINT32 is a typedef of uint32_t, and ANTLR3_MARKER is of type
ANTLR3_INT64 which is a typedef of int64_t. It seems to me that this is
a bug in the template, and that axisMask_StartIndex should have been
declared as type ANTLR3_MARKER.

 

My questions are, do you know of a quick workaround for this for now? Do
you know if this will be fixed in the next release of the C target
runtime? Also, is there a tenative release date for the C runtime that
will officially support ANTLR 3.3 (it seems that the code generated by
ANTLR 3.3 works ok with the 3.2 C runtime)?

 

Thanks,

Justin Murray 
Software Engineer 
jmurray at aerotech.com

Aerotech, Inc. 
101 Zeta Drive 
Pittsburgh, PA 15238 
412-963-7470

 


From jimi at temporal-wave.com  Tue Dec 28 12:03:58 2010
From: jimi at temporal-wave.com (Jim Idle)
Date: Tue, 28 Dec 2010 12:03:58 -0800
Subject: [antlr-interest] [C target] Warnings in 64-bit compile
In-Reply-To: <6B458D23F5D4A24ABCDB3C78EA97393B01FC9FFB@EXCH-VIRTUAL.aerotechad.com>
References: <6B458D23F5D4A24ABCDB3C78EA97393B01FC9FFB@EXCH-VIRTUAL.aerotechad.com>
Message-ID: <a70aee683fea41ebfcf9b323e435974b@mail.gmail.com>

There were some such warnings a number of versions back but they are all
fixed as far as I know. What construct are you using that results in the
warning? If you give me a reproducible grammar snippet, then I will fix it
for the next release, which is just waiting on my other commitments right
now.

Jim

> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of Justin Murray
> Sent: Tuesday, December 28, 2010 11:59 AM
> To: antlr-interest at antlr.org
> Subject: [antlr-interest] [C target] Warnings in 64-bit compile
>
> Jim,
>
>
>
> I am working on making our compiler support 64-bit builds, and have run
> into a number of compiler warnings due to conflicting types in the
> ANTLR generated C code:
>
>
>
> warning C4244: '=' : conversion from 'ANTLR3_MARKER' to
> 'ANTLR3_UINT32', possible loss of data
>
>
>
> This comes from the line:
>
>
>
> axisMask_StartIndex = INDEX();
>
>
>
> axisMask_StartIndex is declared as type ANTLR3_UINT32, and INDEX() is
> returning type ANTLR3_MARKER. On a 64-bit build (on a Windows machine),
> ANTLR3_UINT32 is a typedef of uint32_t, and ANTLR3_MARKER is of type
> ANTLR3_INT64 which is a typedef of int64_t. It seems to me that this is
> a bug in the template, and that axisMask_StartIndex should have been
> declared as type ANTLR3_MARKER.
>
>
>
> My questions are, do you know of a quick workaround for this for now?
> Do you know if this will be fixed in the next release of the C target
> runtime? Also, is there a tenative release date for the C runtime that
> will officially support ANTLR 3.3 (it seems that the code generated by
> ANTLR 3.3 works ok with the 3.2 C runtime)?
>
>
>
> Thanks,
>
> Justin Murray
> Software Engineer
> jmurray at aerotech.com
>
> Aerotech, Inc.
> 101 Zeta Drive
> Pittsburgh, PA 15238
> 412-963-7470
>
>
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
> email-address

From jmurray at aerotech.com  Tue Dec 28 13:39:10 2010
From: jmurray at aerotech.com (Justin Murray)
Date: Tue, 28 Dec 2010 16:39:10 -0500
Subject: [antlr-interest] [C target] Warnings in 64-bit compile
In-Reply-To: <a70aee683fea41ebfcf9b323e435974b@mail.gmail.com>
References: <6B458D23F5D4A24ABCDB3C78EA97393B01FC9FFB@EXCH-VIRTUAL.aerotechad.com>
	<a70aee683fea41ebfcf9b323e435974b@mail.gmail.com>
Message-ID: <6B458D23F5D4A24ABCDB3C78EA97393B01FC9FFC@EXCH-VIRTUAL.aerotechad.com>

I believe that it is caused by using the memorize=true; option and
building 64-bit. The following grammar has these warnings in the
generated TestParser.c (compiled as C++ code in Visual Studio 2008). You
will find the offending line at the beginning of the generated prog()
function.

-----------------------------
grammar Test;

options
{
	language=C;
	backtrack=true;
	memoize=true;
}

prog
	:	SOMETHING+;

SOMETHING
	:	'A'..'Z';
------------------------------

Thanks,

Justin

-----Original Message-----
From: antlr-interest-bounces at antlr.org
[mailto:antlr-interest-bounces at antlr.org] On Behalf Of Jim Idle
Sent: Tuesday, December 28, 2010 3:04 PM
To: antlr-interest at antlr.org
Subject: Re: [antlr-interest] [C target] Warnings in 64-bit compile

There were some such warnings a number of versions back but they are all
fixed as far as I know. What construct are you using that results in the
warning? If you give me a reproducible grammar snippet, then I will fix
it
for the next release, which is just waiting on my other commitments
right
now.

Jim

> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of Justin Murray
> Sent: Tuesday, December 28, 2010 11:59 AM
> To: antlr-interest at antlr.org
> Subject: [antlr-interest] [C target] Warnings in 64-bit compile
>
> Jim,
>
>
>
> I am working on making our compiler support 64-bit builds, and have
run
> into a number of compiler warnings due to conflicting types in the
> ANTLR generated C code:
>
>
>
> warning C4244: '=' : conversion from 'ANTLR3_MARKER' to
> 'ANTLR3_UINT32', possible loss of data
>
>
>
> This comes from the line:
>
>
>
> axisMask_StartIndex = INDEX();
>
>
>
> axisMask_StartIndex is declared as type ANTLR3_UINT32, and INDEX() is
> returning type ANTLR3_MARKER. On a 64-bit build (on a Windows
machine),
> ANTLR3_UINT32 is a typedef of uint32_t, and ANTLR3_MARKER is of type
> ANTLR3_INT64 which is a typedef of int64_t. It seems to me that this
is
> a bug in the template, and that axisMask_StartIndex should have been
> declared as type ANTLR3_MARKER.
>
>
>
> My questions are, do you know of a quick workaround for this for now?
> Do you know if this will be fixed in the next release of the C target
> runtime? Also, is there a tenative release date for the C runtime that
> will officially support ANTLR 3.3 (it seems that the code generated by
> ANTLR 3.3 works ok with the 3.2 C runtime)?
>
>
>
> Thanks,
>
> Justin Murray
> Software Engineer
> jmurray at aerotech.com
>
> Aerotech, Inc.
> 101 Zeta Drive
> Pittsburgh, PA 15238
> 412-963-7470
>
>
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
> email-address

List: http://www.antlr.org/mailman/listinfo/antlr-interest
Unsubscribe:
http://www.antlr.org/mailman/options/antlr-interest/your-email-address

From jimi at temporal-wave.com  Tue Dec 28 13:46:17 2010
From: jimi at temporal-wave.com (Jim Idle)
Date: Tue, 28 Dec 2010 13:46:17 -0800
Subject: [antlr-interest] [C target] Warnings in 64-bit compile
In-Reply-To: <6B458D23F5D4A24ABCDB3C78EA97393B01FC9FFC@EXCH-VIRTUAL.aerotechad.com>
References: <6B458D23F5D4A24ABCDB3C78EA97393B01FC9FFB@EXCH-VIRTUAL.aerotechad.com>
	<a70aee683fea41ebfcf9b323e435974b@mail.gmail.com>
	<6B458D23F5D4A24ABCDB3C78EA97393B01FC9FFC@EXCH-VIRTUAL.aerotechad.com>
Message-ID: <26e1d2339bdc64453813b33d791371a7@mail.gmail.com>

Ah it is probably because the backtrack and memorize option. I strongly
advise that you don't use these but left factor your grammar. However, I
will fix it of course.

Jim

> -----Original Message-----
> From: Justin Murray [mailto:jmurray at aerotech.com]
> Sent: Tuesday, December 28, 2010 1:39 PM
> To: Jim Idle; antlr-interest at antlr.org
> Subject: RE: [antlr-interest] [C target] Warnings in 64-bit compile
>
> I believe that it is caused by using the memorize=true; option and
> building 64-bit. The following grammar has these warnings in the
> generated TestParser.c (compiled as C++ code in Visual Studio 2008).
> You will find the offending line at the beginning of the generated
> prog() function.
>
> -----------------------------
> grammar Test;
>
> options
> {
> 	language=C;
> 	backtrack=true;
> 	memoize=true;
> }
>
> prog
> 	:	SOMETHING+;
>
> SOMETHING
> 	:	'A'..'Z';
> ------------------------------
>
> Thanks,
>
> Justin
>
> -----Original Message-----
> From: antlr-interest-bounces at antlr.org
> [mailto:antlr-interest-bounces at antlr.org] On Behalf Of Jim Idle
> Sent: Tuesday, December 28, 2010 3:04 PM
> To: antlr-interest at antlr.org
> Subject: Re: [antlr-interest] [C target] Warnings in 64-bit compile
>
> There were some such warnings a number of versions back but they are
> all fixed as far as I know. What construct are you using that results
> in the warning? If you give me a reproducible grammar snippet, then I
> will fix it for the next release, which is just waiting on my other
> commitments right now.
>
> Jim
>
> > -----Original Message-----
> > From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> > bounces at antlr.org] On Behalf Of Justin Murray
> > Sent: Tuesday, December 28, 2010 11:59 AM
> > To: antlr-interest at antlr.org
> > Subject: [antlr-interest] [C target] Warnings in 64-bit compile
> >
> > Jim,
> >
> >
> >
> > I am working on making our compiler support 64-bit builds, and have
> run
> > into a number of compiler warnings due to conflicting types in the
> > ANTLR generated C code:
> >
> >
> >
> > warning C4244: '=' : conversion from 'ANTLR3_MARKER' to
> > 'ANTLR3_UINT32', possible loss of data
> >
> >
> >
> > This comes from the line:
> >
> >
> >
> > axisMask_StartIndex = INDEX();
> >
> >
> >
> > axisMask_StartIndex is declared as type ANTLR3_UINT32, and INDEX() is
> > returning type ANTLR3_MARKER. On a 64-bit build (on a Windows
> machine),
> > ANTLR3_UINT32 is a typedef of uint32_t, and ANTLR3_MARKER is of type
> > ANTLR3_INT64 which is a typedef of int64_t. It seems to me that this
> is
> > a bug in the template, and that axisMask_StartIndex should have been
> > declared as type ANTLR3_MARKER.
> >
> >
> >
> > My questions are, do you know of a quick workaround for this for now?
> > Do you know if this will be fixed in the next release of the C target
> > runtime? Also, is there a tenative release date for the C runtime
> that
> > will officially support ANTLR 3.3 (it seems that the code generated
> by
> > ANTLR 3.3 works ok with the 3.2 C runtime)?
> >
> >
> >
> > Thanks,
> >
> > Justin Murray
> > Software Engineer
> > jmurray at aerotech.com
> >
> > Aerotech, Inc.
> > 101 Zeta Drive
> > Pittsburgh, PA 15238
> > 412-963-7470
> >
> >
> >
> >
> > List: http://www.antlr.org/mailman/listinfo/antlr-interest
> > Unsubscribe: http://www.antlr.org/mailman/options/antlr-
> interest/your-
> > email-address
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address

From parrt at cs.usfca.edu  Tue Dec 28 16:32:15 2010
From: parrt at cs.usfca.edu (Terence Parr)
Date: Tue, 28 Dec 2010 16:32:15 -0800
Subject: [antlr-interest] Faster expression parsing
In-Reply-To: <4D19A4B7020000870000416B@mail.quintiq.nl>
References: <648371.68504.qm@web110009.mail.gq1.yahoo.com>
	<EC8F12DD-EE73-450B-937D-84EE568EFEC4@cs.usfca.edu>
	<4D19A4B7020000870000416B@mail.quintiq.nl>
Message-ID: <6C3A0DCA-8423-4332-BE92-A15EF53BCB02@cs.usfca.edu>

Hi. Sorry. ;)  Haven't gotten to it.
Ter
On Dec 27, 2010, at 11:49 PM, Ramon Verbruggen wrote:

> Hi all,
>
> I am looking to upgrade our parser from ANTLR 3.0.1 to 3.3 (or 3.3.1  
> when the new C backend is included).
>
> In 2008 there was some talk about faster expression parsing and in http://www.antlr.org/wiki/display/ 
> ~admin/2008/04/10/Still+more+about+expression+parsing Terence states  
> 'ANTLR v3.2 will allow special rules for specifying expressions that  
> are particularly efficient both in speed and space'.
>
> I cannot actually remember seeing any of this show up in the release  
> notes, or being talked about again (I did search the markmail  
> archives)
>
> Does ANTLR 3.3 include this faster expression parsing?
> If so, is it implemented by specifying some sort of table of  
> operators, precedences and associativity, or is this implemented by  
> a more programmatic approach as described by Sam Harwell in http://antlr.org/wiki/display/ANTLR3/Operator+precedence+parser 
>  ?
>
> Best regards,
>
> Ramon Verbruggen
>
>
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address


From Ramon.Verbruggen at quintiq.com  Wed Dec 29 00:57:18 2010
From: Ramon.Verbruggen at quintiq.com (Ramon Verbruggen)
Date: Wed, 29 Dec 2010 09:57:18 +0100
Subject: [antlr-interest] Faster expression parsing
Message-ID: <4D1B060102000087000207C6@mail.quintiq.nl>

> Hi. Sorry. ;)  Haven't gotten to it.
> Ter
>
No problem, thanks for all the great work you *did* do!

Ramon


From hna12 at aub.edu.lb  Wed Dec 29 03:34:55 2010
From: hna12 at aub.edu.lb (Hani Sayyid)
Date: Wed, 29 Dec 2010 13:34:55 +0200
Subject: [antlr-interest] ANTLR Java Bytecode Generator Example
Message-ID: <AANLkTikKBgjOFiy9iXoonBzznA9e0qHtt7D4dyA0_Q6w@mail.gmail.com>

Hi,

I'm trying to run the files in \templates\generator\2pass. I haven't changed
anything code related. I created a new project in Eclipse, added the files
in a new package, and compiled them. They compiled fine, but when I give
them any input like 2+4*3, they give the following error:

Exception in thread "main" java.util.NoSuchElementException: no such
attribute: init in template context [jasminFile]
at
org.antlr.stringtemplate.StringTemplate.checkNullAttributeAgainstFormalArguments(StringTemplate.java:1311)
at
org.antlr.stringtemplate.StringTemplate.getAttribute(StringTemplate.java:684)
at
org.antlr.stringtemplate.language.ActionEvaluator.attribute(ActionEvaluator.java:360)
at
org.antlr.stringtemplate.language.ActionEvaluator.expr(ActionEvaluator.java:136)
at
org.antlr.stringtemplate.language.ActionEvaluator.action(ActionEvaluator.java:84)
at org.antlr.stringtemplate.language.ASTExpr.write(ASTExpr.java:149)
at org.antlr.stringtemplate.StringTemplate.write(StringTemplate.java:705)
at
org.antlr.stringtemplate.StringTemplate.toString(StringTemplate.java:1670)
at
org.antlr.stringtemplate.StringTemplate.toString(StringTemplate.java:1661)
at strt.Test.main(Test.java:37)

Is there something missing in the code or I'm doing something wrong?

Regards.

From hna12 at aub.edu.lb  Wed Dec 29 04:04:53 2010
From: hna12 at aub.edu.lb (Hani Sayyid)
Date: Wed, 29 Dec 2010 14:04:53 +0200
Subject: [antlr-interest] ANTLR Java Bytecode Generator Example
Message-ID: <AANLkTinqA1zqixKtLmAznMgzg_UZC2q6Rq+3gPB-eow1@mail.gmail.com>

I fixed the issue. I just had to remove the <init> attribute
from ByteCode.stg. In the PDF version of the book, it it is correct. But if
you download the code from this link:
http://media.pragprog.com/titles/tpantlr/code/templates/generator/2pass/ByteCode.stg

or the zip/tar file on the book's website, 2 extra and useless <init>
attributes are included in the stg file.

Regards.
-------

Hi,

I'm trying to run the files in \templates\generator\2pass. I haven't changed
anything code related. I created a new project in Eclipse, added the files
in a new package, and compiled them. They compiled fine, but when I give
them any input like 2+4*3, they give the following error:

Exception in thread "main" java.util.NoSuchElementException: no such
attribute: init in template context [jasminFile]
at
org.antlr.stringtemplate.StringTemplate.checkNullAttributeAgainstFormalArguments(StringTemplate.java:1311)
at
org.antlr.stringtemplate.StringTemplate.getAttribute(StringTemplate.java:684)
at
org.antlr.stringtemplate.language.ActionEvaluator.attribute(ActionEvaluator.java:360)
at
org.antlr.stringtemplate.language.ActionEvaluator.expr(ActionEvaluator.java:136)
at
org.antlr.stringtemplate.language.ActionEvaluator.action(ActionEvaluator.java:84)
at org.antlr.stringtemplate.language.ASTExpr.write(ASTExpr.java:149)
at org.antlr.stringtemplate.StringTemplate.write(StringTemplate.java:705)
at
org.antlr.stringtemplate.StringTemplate.toString(StringTemplate.java:1670)
at
org.antlr.stringtemplate.StringTemplate.toString(StringTemplate.java:1661)
at strt.Test.main(Test.java:37)

Is there something missing in the code or I'm doing something wrong?

Regards.

From roohul17 at yahoo.com  Wed Dec 29 06:16:48 2010
From: roohul17 at yahoo.com (Roohul)
Date: Wed, 29 Dec 2010 06:16:48 -0800 (PST)
Subject: [antlr-interest] Mapping Language Constructs
Message-ID: <757275.79033.qm@web39408.mail.mud.yahoo.com>

Hi,

I am working on ANTLR grammer, and I created a grammar for my language and i use AST as output for my grammar, now I want to map my language constructs to another language so that i can get the target language (basically i am parsing one program from one language to another language). I do not know how to do that, i searched it on google but nothing helped. 

Thanks in advance

Regards






      

From jmurray at aerotech.com  Wed Dec 29 07:10:05 2010
From: jmurray at aerotech.com (Justin Murray)
Date: Wed, 29 Dec 2010 10:10:05 -0500
Subject: [antlr-interest] [C target] @after and/or finally do not cover all
	cleanup cases when backtracking is on
Message-ID: <6B458D23F5D4A24ABCDB3C78EA97393B01FCA000@EXCH-VIRTUAL.aerotechad.com>

Hello,

 

I have some concerns with the generated parser C code when using @after
and/or finally blocks in conjunction with backtracking. In my parser,
for every line matched in a program, I have to create a new instance of
a C++ class. This instance is in the scope of the "line" rule, and is
used by the actions of this rule and all of the nested rules that it
calls. To accomplish this, I added an @init section to create the new
instance. I was not sure if I should use @after or finally to do the
cleanup, so I initially tried using both. See the attached Test.g for a
simplified example. What I found was that with backtracking turned off,
what I wanted was the finally block, and it would always free the
allocated memory. Unfortunately, I am stuck with backtrack=true (at
least for now), and it appears to me that the generated code will not
clean up memory properly in all cases. As you can see in the attached
TestParser.c, there are two cases in the line() function where there is
a "return;" line that does not execute the cleanup code from the @after
or finally blocks. I am not sure how likely it is for these cases to
occur, but it is clear to me that there is a potential for memory leaks
in the generated code.

 

The next thing I tried was to move my allocation/deallocation code up
one level, into the actions of the "prog" rule. This is probably a
better choice because the memory will not be allocated when
backtracking. See the attached Test2.g for my simplified implementation.
This generated code (see attached Test2Parser.c) looks better, but there
is still the potential for a memory leak. Looking at the prog()
function, the memory is only allocated if BACKTRACKING == 0, and then
the line() rule function is called. After it returns from line(), if
HASEXCEPTION() is true, the cleanup is handled by the finally block
case. However, if HASFAILED() returns true (and HASEXCEPTION() returns
false), then there is again a direct "return;" that does not do memory
cleanup. I am beginning to think that maybe this is an impossible
condition (does HASFAILED() only get set when backtracking?), but it is
unclear to me.

 

I am hoping that you will tell me that the memory leak in the second
case is an impossible condition, and then I can move on with that
implementation. If that is not the case, is there some sort or
workaround that I can do? Regardless of that, it seems like the first
implementation should also be valid, and maybe the generated code could
handle that better.

 

I know that the real solution is to left-factor the grammar and not use
backtracking, but the syntax is inherently flawed and ambiguous, and we
are not allowed to break back compatibility. While it may be possible, I
am probably not skilled enough to figure it out in the allotted
timeframe. The good news is that even with backtracking and memoizing,
the ANTLR parser performs 25% faster than what it replaced (Visual
Parse++, an ancient and horrible parser generator).

 

Thanks again,

Justin Murray 
Software Engineer 
jmurray at aerotech.com

Aerotech, Inc. 
101 Zeta Drive 
Pittsburgh, PA 15238 
412-963-7470

 

-------------- next part --------------
A non-text attachment was scrubbed...
Name: Test.g
Type: application/octet-stream
Size: 444 bytes
Desc: Test.g
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20101229/3680e829/attachment.obj 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: TestParser.c
Type: application/octet-stream
Size: 23731 bytes
Desc: TestParser.c
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20101229/3680e829/attachment-0001.obj 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: Test2.g
Type: application/octet-stream
Size: 469 bytes
Desc: Test2.g
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20101229/3680e829/attachment-0002.obj 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: Test2Parser.c
Type: application/octet-stream
Size: 23984 bytes
Desc: Test2Parser.c
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20101229/3680e829/attachment-0003.obj 

From parrt at cs.usfca.edu  Wed Dec 29 09:05:36 2010
From: parrt at cs.usfca.edu (Terence Parr)
Date: Wed, 29 Dec 2010 09:05:36 -0800
Subject: [antlr-interest] ANTLR Java Bytecode Generator Example
In-Reply-To: <AANLkTinqA1zqixKtLmAznMgzg_UZC2q6Rq+3gPB-eow1@mail.gmail.com>
References: <AANLkTinqA1zqixKtLmAznMgzg_UZC2q6Rq+3gPB-eow1@mail.gmail.com>
Message-ID: <26DBA3AC-2CA0-4531-875F-1BF915DE16B5@cs.usfca.edu>

Sorry about that. I'm on vacation but i've added a todo item to look  
at this when I get back.
Ter
On Dec 29, 2010, at 4:04 AM, Hani Sayyid wrote:

> I fixed the issue. I just had to remove the <init> attribute
> from ByteCode.stg. In the PDF version of the book, it it is correct.  
> But if
> you download the code from this link:
> http://media.pragprog.com/titles/tpantlr/code/templates/generator/2pass/ByteCode.stg
>
> or the zip/tar file on the book's website, 2 extra and useless <init>
> attributes are included in the stg file.
>
> Regards.
> -------
>
> Hi,
>
> I'm trying to run the files in \templates\generator\2pass. I haven't  
> changed
> anything code related. I created a new project in Eclipse, added the  
> files
> in a new package, and compiled them. They compiled fine, but when I  
> give
> them any input like 2+4*3, they give the following error:
>
> Exception in thread "main" java.util.NoSuchElementException: no such
> attribute: init in template context [jasminFile]
> at
> org 
> .antlr 
> .stringtemplate 
> .StringTemplate 
> .checkNullAttributeAgainstFormalArguments(StringTemplate.java:1311)
> at
> org 
> .antlr 
> .stringtemplate.StringTemplate.getAttribute(StringTemplate.java:684)
> at
> org 
> .antlr 
> .stringtemplate 
> .language.ActionEvaluator.attribute(ActionEvaluator.java:360)
> at
> org 
> .antlr 
> .stringtemplate.language.ActionEvaluator.expr(ActionEvaluator.java: 
> 136)
> at
> org 
> .antlr 
> .stringtemplate.language.ActionEvaluator.action(ActionEvaluator.java: 
> 84)
> at org.antlr.stringtemplate.language.ASTExpr.write(ASTExpr.java:149)
> at org.antlr.stringtemplate.StringTemplate.write(StringTemplate.java: 
> 705)
> at
> org.antlr.stringtemplate.StringTemplate.toString(StringTemplate.java: 
> 1670)
> at
> org.antlr.stringtemplate.StringTemplate.toString(StringTemplate.java: 
> 1661)
> at strt.Test.main(Test.java:37)
>
> Is there something missing in the code or I'm doing something wrong?
>
> Regards.
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address


From jimi at temporal-wave.com  Wed Dec 29 11:21:30 2010
From: jimi at temporal-wave.com (Jim Idle)
Date: Wed, 29 Dec 2010 11:21:30 -0800
Subject: [antlr-interest] [C target] @after and/or finally do not cover
 all cleanup cases when backtracking is on
In-Reply-To: <6B458D23F5D4A24ABCDB3C78EA97393B01FCA000@EXCH-VIRTUAL.aerotechad.com>
References: <6B458D23F5D4A24ABCDB3C78EA97393B01FCA000@EXCH-VIRTUAL.aerotechad.com>
Message-ID: <77f7eb0d1978c4f61a50b09f92eb92ee@mail.gmail.com>

I cannot guarantee that init and after work perfectly with backtracking
mode as it gets too complicated to deal with with just the template
functionality. They work correctly without backtracking.

I have covered this in prior posts if you look at antlr.markmail.org. But,
the other thing you should consider is that you should not allocate memory
until the parse is found to be good. The best way to do that is to not do
anything until the tree walking phase. If you are trying to do things in
the parsing phase then you have to be very careful - probably avoid @init
and @after etc and perhaps better yet, use factories to create your
allocations that can then track and release the memory without you dealing
with it explicitly.


Basically Justin you are going about constructing this in a way that is
going to get you into trouble with the C target I think. I strongly
recommend left factoring your grammar as the time saved later because of
all the hassle you will avoid will outweigh the time spent doing it now.
You main issue is that if you are using backtracking AND you are
allocating memory then you don't always know if you allocated anything
(without using factories or auto allocation etc) and error messages will
turn up in very unlikely places. If you don't wish to get out of
backtracking, then you should definitely move to parse->tree verify->tree
walk and do stuff.

Jim

> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of Justin Murray
> Sent: Wednesday, December 29, 2010 7:10 AM
> To: antlr-interest at antlr.org
> Cc: Robert Jacobs
> Subject: [antlr-interest] [C target] @after and/or finally do not cover
> all cleanup cases when backtracking is on
>
> Hello,
>
>
>
> I have some concerns with the generated parser C code when using @after
> and/or finally blocks in conjunction with backtracking. In my parser,
> for every line matched in a program, I have to create a new instance of
> a C++ class. This instance is in the scope of the "line" rule, and is
> used by the actions of this rule and all of the nested rules that it
> calls. To accomplish this, I added an @init section to create the new
> instance. I was not sure if I should use @after or finally to do the
> cleanup, so I initially tried using both. See the attached Test.g for a
> simplified example. What I found was that with backtracking turned off,
> what I wanted was the finally block, and it would always free the
> allocated memory. Unfortunately, I am stuck with backtrack=true (at
> least for now), and it appears to me that the generated code will not
> clean up memory properly in all cases. As you can see in the attached
> TestParser.c, there are two cases in the line() function where there is
> a "return;" line that does not execute the cleanup code from the @after
> or finally blocks. I am not sure how likely it is for these cases to
> occur, but it is clear to me that there is a potential for memory leaks
> in the generated code.
>
>
>
> The next thing I tried was to move my allocation/deallocation code up
> one level, into the actions of the "prog" rule. This is probably a
> better choice because the memory will not be allocated when
> backtracking. See the attached Test2.g for my simplified
> implementation.
> This generated code (see attached Test2Parser.c) looks better, but
> there is still the potential for a memory leak. Looking at the prog()
> function, the memory is only allocated if BACKTRACKING == 0, and then
> the line() rule function is called. After it returns from line(), if
> HASEXCEPTION() is true, the cleanup is handled by the finally block
> case. However, if HASFAILED() returns true (and HASEXCEPTION() returns
> false), then there is again a direct "return;" that does not do memory
> cleanup. I am beginning to think that maybe this is an impossible
> condition (does HASFAILED() only get set when backtracking?), but it is
> unclear to me.
>
>
>
> I am hoping that you will tell me that the memory leak in the second
> case is an impossible condition, and then I can move on with that
> implementation. If that is not the case, is there some sort or
> workaround that I can do? Regardless of that, it seems like the first
> implementation should also be valid, and maybe the generated code could
> handle that better.
>
>
>
> I know that the real solution is to left-factor the grammar and not use
> backtracking, but the syntax is inherently flawed and ambiguous, and we
> are not allowed to break back compatibility. While it may be possible,
> I am probably not skilled enough to figure it out in the allotted
> timeframe. The good news is that even with backtracking and memoizing,
> the ANTLR parser performs 25% faster than what it replaced (Visual
> Parse++, an ancient and horrible parser generator).
>
>
>
> Thanks again,
>
> Justin Murray
> Software Engineer
> jmurray at aerotech.com
>
> Aerotech, Inc.
> 101 Zeta Drive
> Pittsburgh, PA 15238
> 412-963-7470
>
>

From punch at cse.msu.edu  Wed Dec 29 16:21:49 2010
From: punch at cse.msu.edu (bill punch)
Date: Wed, 29 Dec 2010 19:21:49 -0500
Subject: [antlr-interest] ANTLR Java Bytecode Generator Example
In-Reply-To: <AANLkTinqA1zqixKtLmAznMgzg_UZC2q6Rq+3gPB-eow1@mail.gmail.com>
References: <AANLkTinqA1zqixKtLmAznMgzg_UZC2q6Rq+3gPB-eow1@mail.gmail.com>
Message-ID: <4D1BD09D.7000409@cse.msu.edu>

Sorry to bother. I was having the same problem but I'm not quite getting
what the fix is .Should the entire init stuff be commented out as in

; public Calc() { super(); } // calls java.lang.Object()
;.method public <init>()V
;   aload_0
;   invokenonvirtual java/lang/Object/<init>()V
;   return
;.end method

or something else? Thanks for any help.

      >>>bill<<<


On 12/29/10 7:04 AM, Hani Sayyid wrote:
> I fixed the issue. I just had to remove the <init> attribute
> from ByteCode.stg. In the PDF version of the book, it it is correct. But if
> you download the code from this link:
> http://media.pragprog.com/titles/tpantlr/code/templates/generator/2pass/ByteCode.stg
>
> or the zip/tar file on the book's website, 2 extra and useless <init>
> attributes are included in the stg file.
>
> Regards.
> -------
>
> Hi,
>
> I'm trying to run the files in \templates\generator\2pass. I haven't changed
> anything code related. I created a new project in Eclipse, added the files
> in a new package, and compiled them. They compiled fine, but when I give
> them any input like 2+4*3, they give the following error:
>
> Exception in thread "main" java.util.NoSuchElementException: no such
> attribute: init in template context [jasminFile]
> at
> org.antlr.stringtemplate.StringTemplate.checkNullAttributeAgainstFormalArguments(StringTemplate.java:1311)
> at
> org.antlr.stringtemplate.StringTemplate.getAttribute(StringTemplate.java:684)
> at
> org.antlr.stringtemplate.language.ActionEvaluator.attribute(ActionEvaluator.java:360)
> at
> org.antlr.stringtemplate.language.ActionEvaluator.expr(ActionEvaluator.java:136)
> at
> org.antlr.stringtemplate.language.ActionEvaluator.action(ActionEvaluator.java:84)
> at org.antlr.stringtemplate.language.ASTExpr.write(ASTExpr.java:149)
> at org.antlr.stringtemplate.StringTemplate.write(StringTemplate.java:705)
> at
> org.antlr.stringtemplate.StringTemplate.toString(StringTemplate.java:1670)
> at
> org.antlr.stringtemplate.StringTemplate.toString(StringTemplate.java:1661)
> at strt.Test.main(Test.java:37)
>
> Is there something missing in the code or I'm doing something wrong?
>
> Regards.
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address

From kingces95 at gmail.com  Thu Dec 30 11:56:41 2010
From: kingces95 at gmail.com (chris king)
Date: Thu, 30 Dec 2010 09:56:41 -1000
Subject: [antlr-interest] Unicode Character Class Support
Message-ID: <AANLkTikfAkKyJSYOahXBGrs-tjbGfUp5b9ZQxa1PUsg+@mail.gmail.com>

Hello, is there any support for matching Unicode character classes?

http://msdn.microsoft.com/en-us/library/20bw873z.aspx


The Unicode standard assigns each character a general category. For example,
a particular character can be an uppercase letter (represented by the
Lu category),
a decimal digit (the Nd category), a math symbol (the Sm category), or a
paragraph separator (the Zl category). Specific character sets in the
Unicode standard also occupy a specific range or block of consecutive code
points. For example, the basic Latin character set is found from \u0000
through \u007F, while the Arabic character set is found from \u0600 through
\u06FF


Thanks,
Chris

From zching01 at gmail.com  Thu Dec 30 13:53:27 2010
From: zching01 at gmail.com (Ching)
Date: Thu, 30 Dec 2010 14:53:27 -0700
Subject: [antlr-interest] how to initialize Antlr local variables?
Message-ID: <AANLkTiksrrNgh79DT8vGkVbmP3GR1UhR=7bh_B43oSYz@mail.gmail.com>

Hi,

In a Antlr grammar file, I declared a number of variables. Is there a way to
initialize these variables, for example, in the default constructor?

Is below a legitimate grammar statement?

*start:  initialization { var = new XXX();}  compilation_unit EOF*

Thanks.

From david.beckedorff at gmail.com  Thu Dec 30 19:37:29 2010
From: david.beckedorff at gmail.com (David Beckedorff)
Date: Thu, 30 Dec 2010 22:37:29 -0500
Subject: [antlr-interest] ANTLR 3.3 Bug?
Message-ID: <AANLkTinReyza3SS+cUZkTbcGx0CEi0sffX6RoBa+Uymz@mail.gmail.com>

Antlr-interest List,

I'm trying to build a parser with the ANTLR IDE 2.1.1 Eclipse plugin and the
ANTLR 3.3 library. I'm getting a bunch of cryptic error messages for some of
my parser rules.

For example, for this rule:

tickSpec
    :   'TICK' '=' INTEGER
    ;

I get:

error(100): /EZM Project 01/src/com/dlb/ezm/ezm01/Ezm01.g:174:14: syntax
error: antlr: unexpected token: ' '
 |---> :   'TICK' '=' INTEGER


and for the rule:

location
    :   ( 'LOC' '=' '(' numericalRange ',' numericalRange ')' )
    |   '$TITLE'
    |   '$LEGEND'
    ;

I get:

error(100): /EZM Project 01/src/com/dlb/ezm/ezm01/Ezm01.g:182:15: syntax
error: antlr: unexpected token: ' '
 |---> :   ( 'LOC' '=' '(' numericalRange ',' numericalRange ')' )

error(100): /EZM Project 01/src/com/dlb/ezm/ezm01/Ezm01.g:182:23: syntax
error: antlr: unexpected token: ' numericalRange '
 |---> :   ( 'LOC' '=' '(' numericalRange ',' numericalRange ')' )



Why do I get an unexpected token ' ' error message for the whitespace
between tokens like 'TICK' or 'LOC' and '=' ? Why doesn't ANTLR just absorb
the whitespace and move on to the '=' token??

I have a whitespace rule in effect, namely:

WS : (' '|'\t'|'\n'|'\r'|'\f')+ { $channel = HIDDEN; } ;


-David Beckedorff

From sharwell at pixelminegames.com  Thu Dec 30 20:28:45 2010
From: sharwell at pixelminegames.com (Sam Harwell)
Date: Thu, 30 Dec 2010 22:28:45 -0600
Subject: [antlr-interest] ANTLR 3.3 Bug?
In-Reply-To: <AANLkTinReyza3SS+cUZkTbcGx0CEi0sffX6RoBa+Uymz@mail.gmail.com>
References: <AANLkTinReyza3SS+cUZkTbcGx0CEi0sffX6RoBa+Uymz@mail.gmail.com>
Message-ID: <043501cba8a3$36f850d0$a4e8f270$@pixelminegames.com>

It sounds like you have a stray apostrophe somewhere (mismatched string
literal). It should be very easy to find if you open the grammar in a text
editor that supports syntax highlighting for ANTLR grammars.

Sam

-----Original Message-----
From: antlr-interest-bounces at antlr.org
[mailto:antlr-interest-bounces at antlr.org] On Behalf Of David Beckedorff
Sent: Thursday, December 30, 2010 9:37 PM
To: antlr-interest at antlr.org
Subject: [antlr-interest] ANTLR 3.3 Bug?

Antlr-interest List,

I'm trying to build a parser with the ANTLR IDE 2.1.1 Eclipse plugin and the
ANTLR 3.3 library. I'm getting a bunch of cryptic error messages for some of
my parser rules.

For example, for this rule:

tickSpec
    :   'TICK' '=' INTEGER
    ;

I get:

error(100): /EZM Project 01/src/com/dlb/ezm/ezm01/Ezm01.g:174:14: syntax
error: antlr: unexpected token: ' '
 |---> :   'TICK' '=' INTEGER


and for the rule:

location
    :   ( 'LOC' '=' '(' numericalRange ',' numericalRange ')' )
    |   '$TITLE'
    |   '$LEGEND'
    ;

I get:

error(100): /EZM Project 01/src/com/dlb/ezm/ezm01/Ezm01.g:182:15: syntax
error: antlr: unexpected token: ' '
 |---> :   ( 'LOC' '=' '(' numericalRange ',' numericalRange ')' )

error(100): /EZM Project 01/src/com/dlb/ezm/ezm01/Ezm01.g:182:23: syntax
error: antlr: unexpected token: ' numericalRange '
 |---> :   ( 'LOC' '=' '(' numericalRange ',' numericalRange ')' )



Why do I get an unexpected token ' ' error message for the whitespace
between tokens like 'TICK' or 'LOC' and '=' ? Why doesn't ANTLR just absorb
the whitespace and move on to the '=' token??

I have a whitespace rule in effect, namely:

WS : (' '|'\t'|'\n'|'\r'|'\f')+ { $channel = HIDDEN; } ;


-David Beckedorff

List: http://www.antlr.org/mailman/listinfo/antlr-interest
Unsubscribe:
http://www.antlr.org/mailman/options/antlr-interest/your-email-address


From kferrio at gmail.com  Fri Dec 31 08:39:23 2010
From: kferrio at gmail.com (Kyle Ferrio)
Date: Fri, 31 Dec 2010 09:39:23 -0700
Subject: [antlr-interest] ANTLR 3.3 Bug?
In-Reply-To: <AANLkTinReyza3SS+cUZkTbcGx0CEi0sffX6RoBa+Uymz@mail.gmail.com>
References: <AANLkTinReyza3SS+cUZkTbcGx0CEi0sffX6RoBa+Uymz@mail.gmail.com>
Message-ID: <AANLkTin0yRqbBaiD58yccDga7ZS_o7zqjdK4NCbvYxq=@mail.gmail.com>

David,

Sam's advice is wise.  BOth the ANTLR IDE and ANTLRWorks rely on antlr
itself for many diagnostics, which may take some time to interpret. (I say
this as someone who tends to understand error messages after the error is
fixed.)  I just happen to have the ANTLR IDE 2.1.1 open right now, so I did
this, without needing to know more about your grammar:

*grammar DB;

program : declaration* ;

declaration
    : tickSpec
    | location
    ;

tickSpec
    : 'TICK' '=' INTEGER
    ;

location
    : 'LOC' '=' '(' numericalRange ',' numericalRange ')'
    | '$TITLE'
    | '$LEGEND'
    ;

// This is a total guess.
numericalRange
    : INTEGER '..' INTEGER
    ;

// This is a pretty good guess.
INTEGER : '0'..'9'+ ;

WS : (' '|'\t'|'\r'|'\n'|'\f')+ {$channel=HIDDEN;};*

ANTLR IDE saves this grammar with no errors, and the following input parses
exactly as expected in the interpreter:

*TICK = 11
LOC = (1..4,7..11)
*
A couple suggestions from experience:  Like Sam's advice about apostrophes,
be very careful about ANTLR's own rule-delimiting tokens: semicolons, colons
and vbars (|'s). (Syntax highlighting in ANTLR IDE will not help you here.)
The usual divide-and-conquer approach to debugging applies. Since your
grammar worked fine for me with just a little glue, it may be that problems
are being detected some "distance" away from inception.  And as always make
sure you have a suitable whitespace rule and that its not left on the
default channel unless whitespace is actually semantic in your language (not
recommended).

Good Luck!

Kyle


On Thu, Dec 30, 2010 at 8:37 PM, David Beckedorff <
david.beckedorff at gmail.com> wrote:

> Antlr-interest List,
>
> I'm trying to build a parser with the ANTLR IDE 2.1.1 Eclipse plugin and
> the
> ANTLR 3.3 library. I'm getting a bunch of cryptic error messages for some
> of
> my parser rules.
>
> For example, for this rule:
>
> tickSpec
>    :   'TICK' '=' INTEGER
>    ;
>
> I get:
>
> error(100): /EZM Project 01/src/com/dlb/ezm/ezm01/Ezm01.g:174:14: syntax
> error: antlr: unexpected token: ' '
>  |---> :   'TICK' '=' INTEGER
>
>
> and for the rule:
>
> location
>    :   ( 'LOC' '=' '(' numericalRange ',' numericalRange ')' )
>    |   '$TITLE'
>    |   '$LEGEND'
>    ;
>
> I get:
>
> error(100): /EZM Project 01/src/com/dlb/ezm/ezm01/Ezm01.g:182:15: syntax
> error: antlr: unexpected token: ' '
>  |---> :   ( 'LOC' '=' '(' numericalRange ',' numericalRange ')' )
>
> error(100): /EZM Project 01/src/com/dlb/ezm/ezm01/Ezm01.g:182:23: syntax
> error: antlr: unexpected token: ' numericalRange '
>  |---> :   ( 'LOC' '=' '(' numericalRange ',' numericalRange ')' )
>
>
>
> Why do I get an unexpected token ' ' error message for the whitespace
> between tokens like 'TICK' or 'LOC' and '=' ? Why doesn't ANTLR just absorb
> the whitespace and move on to the '=' token??
>
> I have a whitespace rule in effect, namely:
>
> WS : (' '|'\t'|'\n'|'\r'|'\f')+ { $channel = HIDDEN; } ;
>
>
> -David Beckedorff
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>

From jeffn at photorepo.com  Fri Dec 31 16:52:20 2010
From: jeffn at photorepo.com (Jeffrey Newman)
Date: Fri, 31 Dec 2010 16:52:20 -0800
Subject: [antlr-interest] In C how do I determine if a parameter is present
Message-ID: <201012311652.20639.jeffn@photorepo.com>


Hi,
I'm trying to determine if db is present.
I have not figured out how to do this.
The java exmple in the book (like I have below) says missing an attribute.
I tired text and it faults (start is invalid).

Some body please help.

thanks

Jeffrey



// DROP TABLE
drop_table_stmt
    : ^(DROP_TABLE ^(OPTIONS EXISTS?) ^(table = id db = id?))

        {
        	if ($db == 0) {
        		sprintf(buffer, "Walker: Drop Table (table name: \%s",
        						 $table.text->chars);
			}        						 
			else {         					
        		sprintf(buffer, "Walker: Drop Table (table name: \%s db 
name: \%s",
        						 $table.text->chars, $db.text->chars);
     		}
            debug(buffer);
        }    
    ;

From jimi at temporal-wave.com  Fri Dec 31 17:08:50 2010
From: jimi at temporal-wave.com (Jim Idle)
Date: Fri, 31 Dec 2010 17:08:50 -0800
Subject: [antlr-interest] In C how do I determine if a parameter is
	present
In-Reply-To: <201012311652.20639.jeffn@photorepo.com>
References: <201012311652.20639.jeffn@photorepo.com>
Message-ID: <b7824a78a192ae8b8419a2af906cecdb@mail.gmail.com>

Don't use the $db, either declare a Boolean and set in an action, or just
use two actions:


^(table=id
    (   db = id { action when present }
      | {action when not present}
    )
)


Look at the generated code to see why comparing to NULL (should not use 0
these days) faults. The return type is a struct, not a pointer. See
antlr.markmail.org for why there are not initializations on things.

Jim


> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of Jeffrey Newman
> Sent: Friday, December 31, 2010 4:52 PM
> To: antlr-interest at antlr.org
> Subject: [antlr-interest] In C how do I determine if a parameter is
> present
>
>
> Hi,
> I'm trying to determine if db is present.
> I have not figured out how to do this.
> The java exmple in the book (like I have below) says missing an
> attribute.
> I tired text and it faults (start is invalid).
>
> Some body please help.
>
> thanks
>
> Jeffrey
>
>
>
> // DROP TABLE
> drop_table_stmt
>     : ^(DROP_TABLE ^(OPTIONS EXISTS?) ^(table = id db = id?))
>
>         {
>         	if ($db == 0) {
>         		sprintf(buffer, "Walker: Drop Table (table name:
\%s",
>
$table.text->chars);
> 			}
> 			else {
>         		sprintf(buffer, "Walker: Drop Table (table name:
\%s db
> name: \%s",
>
$table.text->chars, $db.text-
> >chars);
>      		}
>             debug(buffer);
>         }
>     ;
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
> email-address

From jeffn at photorepo.com  Fri Dec 31 17:59:33 2010
From: jeffn at photorepo.com (Jeffrey Newman)
Date: Fri, 31 Dec 2010 17:59:33 -0800
Subject: [antlr-interest] In C how do I determine if a parameter is
	present
In-Reply-To: <b7824a78a192ae8b8419a2af906cecdb@mail.gmail.com>
References: <201012311652.20639.jeffn@photorepo.com>
	<b7824a78a192ae8b8419a2af906cecdb@mail.gmail.com>
Message-ID: <201012311759.33668.jeffn@photorepo.com>

thanks,

From ronburk at gmail.com  Fri Dec 31 21:14:26 2010
From: ronburk at gmail.com (Ron Burk)
Date: Fri, 31 Dec 2010 21:14:26 -0800
Subject: [antlr-interest] the nihilistic circle hoist
In-Reply-To: <AANLkTim9KJDyNhLMVZbSbdYw40N5YXRdcP9GeX8=qQXB@mail.gmail.com>
References: <AANLkTim9KJDyNhLMVZbSbdYw40N5YXRdcP9GeX8=qQXB@mail.gmail.com>
Message-ID: <AANLkTi=g_hMdokGPyy3QaWEOMmo9BwVPyF_dkhF3PAq5@mail.gmail.com>

More fun with predicate hoisting:

grammar Simple;

FOO : 'foo' ;

section : element* unrelated EOF ;
element : {P1}?=> pre;
pre : FOO post ;
post : FOO*;
unrelated : ':' post;

In this grammar, the generated code invokes P1
(completely outside its intended syntactic context)
while trying to recognize an "unrelated" (because P1 was
"hoisted downward" into "post", and "post" is reachable via
a nonterminal unrelated to "element").

