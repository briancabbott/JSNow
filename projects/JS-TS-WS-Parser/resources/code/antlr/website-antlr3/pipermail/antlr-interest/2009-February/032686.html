<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [antlr-interest] tree walking and semantic analysis
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20tree%20walking%20and%20semantic%20analysis&In-Reply-To=%3C818821.34795.qm%40web50102.mail.re2.yahoo.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="032685.html">
   <LINK REL="Next"  HREF="032711.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[antlr-interest] tree walking and semantic analysis</H1>
    <B>Carter Cheng</B> 
    <A HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20tree%20walking%20and%20semantic%20analysis&In-Reply-To=%3C818821.34795.qm%40web50102.mail.re2.yahoo.com%3E"
       TITLE="[antlr-interest] tree walking and semantic analysis">carter_cheng at yahoo.com
       </A><BR>
    <I>Mon Feb  2 13:35:53 PST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="032685.html">[antlr-interest] tree walking and semantic analysis
</A></li>
        <LI>Next message: <A HREF="032711.html">[antlr-interest] tree walking and semantic analysis
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#32686">[ date ]</a>
              <a href="thread.html#32686">[ thread ]</a>
              <a href="subject.html#32686">[ subject ]</a>
              <a href="author.html#32686">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Andy and the others,

Thanks for the reply. I am currently reworking my tree code and doing it somewhat manually because I was having some difficulties with working with the C runtime in C++ mode. The difficulty I was having was something along these lines- 

program[int pass] 
:<i> (declarations[pass])*
</I>; 

declarations[int pass]
:<i> /* some CFG rule case */ { switch(pass) { /* do something depending on the pass */ } }
</I>;

This obviously seems like quite a mess. Especially when in different passes you need to percolate different types of data up the tree and left to right depending on the pass. 

A possible alternative is to using some sort of visitor or function object which behaves differently on each pass. However I am not quite sure how to get this to work properly. The issue primarily is with the return value types in my language I have certain expression constants which need to be checked and if possible reduced to their actual values in certain descents of the grammar and in other cases return the whole expression tree- 

declaration[Functor f] returns [??? retval ]
:<i> /* some CFG rule case */ { $retval = f(e); }
</I>;

The return type can be quite different depending on the functor in question making it somewhat difficult to determine what the type of retval should be. 

This is getting a bit long I suspect with the error situation with multiple errors the only thing that can be done is return something... pass in some sort of functor or I/O stream which can be used to dump data back to the user etc.

I hope that sort of makes sense.

Regards,

Carter.


      
</PRE>






<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="032685.html">[antlr-interest] tree walking and semantic analysis
</A></li>
	<LI>Next message: <A HREF="032711.html">[antlr-interest] tree walking and semantic analysis
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#32686">[ date ]</a>
              <a href="thread.html#32686">[ thread ]</a>
              <a href="subject.html#32686">[ subject ]</a>
              <a href="author.html#32686">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.antlr.org/mailman/listinfo/antlr-interest">More information about the antlr-interest
mailing list</a><br>
</body></html>
