<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [antlr-interest] Minor suggestion re. Java output
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20Minor%20suggestion%20re.%20Java%20output&In-Reply-To=%3C1202074670.47a6342e2153b%40clients.latnet.lv%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="026144.html">
   <LINK REL="Next"  HREF="026161.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[antlr-interest] Minor suggestion re. Java output</H1>
    <B>Guntis Ozols</B> 
    <A HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20Minor%20suggestion%20re.%20Java%20output&In-Reply-To=%3C1202074670.47a6342e2153b%40clients.latnet.lv%3E"
       TITLE="[antlr-interest] Minor suggestion re. Java output">guntiso at latnet.lv
       </A><BR>
    <I>Sun Feb  3 13:37:50 PST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="026144.html">[antlr-interest] Minor suggestion re. Java output
</A></li>
        <LI>Next message: <A HREF="026161.html">[antlr-interest] Minor suggestion re. Java output
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26160">[ date ]</a>
              <a href="thread.html#26160">[ thread ]</a>
              <a href="subject.html#26160">[ subject ]</a>
              <a href="author.html#26160">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>&gt;<i> A tree is not guaranteed to be any particular type or interface as the
</I>&gt;<i> tree adaptor can produce anything it likes. Hence it must be an object.
</I>&gt;<i> This is explained in the code etc.
</I>&gt;<i>
</I>&gt;<i> Jim
</I>
Casting tree once is not that big of a deal, but tons of casting could be
eliminated, plus there is no need for an option, if CommonTree.getChild()
returned CommonTree.

Covariant return types are available since java 1.5 (Sept 2004).

Also, how about using enum for tokens? It would free client code of prefixes in
switch statements, plus toString() would be available and more.

Guntis

&gt;<i> &gt; To make things a little nicer in client code,
</I>&gt;<i> &gt; ANTLR could covariantly specialize return types
</I>&gt;<i> &gt; in return classes. E.g., when you have
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; options {
</I>&gt;<i> &gt;          output = AST;
</I>&gt;<i> &gt;          ASTLabelType=CommonTree;
</I>&gt;<i> &gt; }
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; in the grammar the xxx_return classes in the
</I>&gt;<i> &gt; Parser could have a method
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;     public CommonTree getTree() { return tree; }
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; instead of
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;     public Object getTree() { return tree; }
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; That way we wouldn't need to cast. Since one
</I>&gt;<i> &gt; goal of ANTLR is to emit code that doesn't look
</I>&gt;<i> &gt; too wildly different from what one might have
</I>&gt;<i> &gt; written by hand I think it makes sense to try
</I>&gt;<i> &gt; to make the code more idiomatic.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Regards,
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; -- O.L.
</I>
</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="026144.html">[antlr-interest] Minor suggestion re. Java output
</A></li>
	<LI>Next message: <A HREF="026161.html">[antlr-interest] Minor suggestion re. Java output
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26160">[ date ]</a>
              <a href="thread.html#26160">[ thread ]</a>
              <a href="subject.html#26160">[ subject ]</a>
              <a href="author.html#26160">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.antlr.org/mailman/listinfo/antlr-interest">More information about the antlr-interest
mailing list</a><br>
</body></html>
