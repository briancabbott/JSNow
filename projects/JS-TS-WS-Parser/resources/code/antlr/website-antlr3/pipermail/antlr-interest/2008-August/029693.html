<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [antlr-interest] Generator Bug: Expands $ within Comments
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20Generator%20Bug%3A%20Expands%20%24%20within%20Comments&In-Reply-To=%3Cebc876d70808070110j4bef0870y651061657ade387c%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="029692.html">
   <LINK REL="Next"  HREF="029676.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[antlr-interest] Generator Bug: Expands $ within Comments</H1>
    <B>Thomas Brandon</B> 
    <A HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20Generator%20Bug%3A%20Expands%20%24%20within%20Comments&In-Reply-To=%3Cebc876d70808070110j4bef0870y651061657ade387c%40mail.gmail.com%3E"
       TITLE="[antlr-interest] Generator Bug: Expands $ within Comments">tbrandonau at gmail.com
       </A><BR>
    <I>Thu Aug  7 01:10:35 PDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="029692.html">[antlr-interest] Generator Bug: Expands $ within Comments
</A></li>
        <LI>Next message: <A HREF="029676.html">[antlr-interest] Another parsing question
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#29693">[ date ]</a>
              <a href="thread.html#29693">[ thread ]</a>
              <a href="subject.html#29693">[ subject ]</a>
              <a href="author.html#29693">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Actually ANTLR does assume that target languages use C style comments
to allow unmatched action block and string delimiters in comments. But
this is only in ANTLR.g not in the seperate action parser. Though the
action parser does allow escaping (\$) to get around the problem here.
This means using unmatched delimiters in python single line comments
will cause problems. Multi line comments are handled by the string
handling, though an unmatched &quot; here will cause problems. Delimiting
is not handled in ANTLR.g so there is currently no way to get around
this.
Probably a good idea to standardise and allow delimiting in both.
Possibly also keeping the current comment\string handling, with target
control, to make it easier for users.

Tom.
On Thu, Aug 7, 2008 at 5:33 PM, Benjamin Niemann &lt;<A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">pink at odahoda.de</A>&gt; wrote:
&gt;<i> Hi Brent,
</I>&gt;<i>
</I>&gt;<i> this is by design. ANTLR doesn't know about the syntax of the target
</I>&gt;<i> language, including how comments look like.
</I>&gt;<i>
</I>&gt;<i> -Ben
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> On Wed, Aug 6, 2008 at 10:43 PM, Foust &lt;<A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">javafoust at gmail.com</A>&gt; wrote:
</I>&gt;&gt;<i> The latest beta (from 08/03/2008) expands parser variables within comments:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> statement                           : ^(T_STMT expr?)
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>                                                 {
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> System.out.println(&quot;STMT: &quot;);// + $expr.text);
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>                                                 }
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> It wouldn't be such an issue, except there are cases (like this one) where
</I>&gt;&gt;<i> the expansion extends over multiple lines, so temporarily-commenting out a
</I>&gt;&gt;<i> portion of a line using a line comment as above causes a compilation problem
</I>&gt;&gt;<i> in the target language:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>    System.out.println(&quot;STMT: &quot;);
</I>&gt;&gt;<i> //(object1!=null?(input.getTokenStream().toString(
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>            input.getTreeAdaptor().getTokenStartIndex(object1.start),
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>            input.getTreeAdaptor().getTokenStopIndex(object1.start))):null));
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Brent
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;<i>
</I></PRE>










<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="029692.html">[antlr-interest] Generator Bug: Expands $ within Comments
</A></li>
	<LI>Next message: <A HREF="029676.html">[antlr-interest] Another parsing question
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#29693">[ date ]</a>
              <a href="thread.html#29693">[ thread ]</a>
              <a href="subject.html#29693">[ subject ]</a>
              <a href="author.html#29693">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.antlr.org/mailman/listinfo/antlr-interest">More information about the antlr-interest
mailing list</a><br>
</body></html>
