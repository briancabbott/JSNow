<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [antlr-interest] Composite Grammar [C Target]
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20Composite%20Grammar%20%5BC%20Target%5D&In-Reply-To=%3C6B458D23F5D4A24ABCDB3C78EA97393B0BB717A2%40EXCH-VIRTUAL.aerotechad.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="045392.html">
   <LINK REL="Next"  HREF="045393.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[antlr-interest] Composite Grammar [C Target]</H1>
    <B>Justin Murray</B> 
    <A HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20Composite%20Grammar%20%5BC%20Target%5D&In-Reply-To=%3C6B458D23F5D4A24ABCDB3C78EA97393B0BB717A2%40EXCH-VIRTUAL.aerotechad.com%3E"
       TITLE="[antlr-interest] Composite Grammar [C Target]">jmurray at aerotech.com
       </A><BR>
    <I>Wed Sep 26 06:05:14 PDT 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="045392.html">[antlr-interest] Composite Grammar [C Target]
</A></li>
        <LI>Next message: <A HREF="045393.html">[antlr-interest] Added grammar repository
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#45397">[ date ]</a>
              <a href="thread.html#45397">[ thread ]</a>
              <a href="subject.html#45397">[ subject ]</a>
              <a href="author.html#45397">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Jim,

How does that work exactly? If a combined grammar uses the tokenVocab
option, can it still define additional tokens of its own? Where does the
implementation of the shared lexer rule go in this case? In just one of
the grammars, or in both (, or in a third independent grammar file)?

I still need to have two independent lexers, because the grammar is
quite different for each. I only want to share a handful of common
tokens, so that I can reduce duplicate code.

Thanks,

- Justin

-----Original Message-----
From: <A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">antlr-interest-bounces at antlr.org</A>
[mailto:<A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">antlr-interest-bounces at antlr.org</A>] On Behalf Of Jim Idle
Sent: Tuesday, September 25, 2012 7:51 PM
To: <A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">antlr-interest at antlr.org</A>
Subject: Re: [antlr-interest] Composite Grammar [C Target]

To use common tokens, take the .tokens file generated by one of the
grammars, merge it with the other .token files, then use tokenVocab
option. You need to keep the token numbers contiguous and unique.

JIm

-----Original Message-----
From: <A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">antlr-interest-bounces at antlr.org</A>
[mailto:<A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">antlr-interest-bounces at antlr.org</A>] On Behalf Of Justin Murray
Sent: Wednesday, September 26, 2012 3:50 AM
To: <A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">antlr-interest at antlr.org</A>
Subject: [antlr-interest] Composite Grammar [C Target]

Hello,

I'm trying to use composite grammars, and can't seem to get off of the
ground. Basically, I have two separate parsers. One preprocesses the
source, and the other compiles it. Naturally, they have a few tokens in
common, such as a newline, and I'd prefer to only define that token
once.
This sounds to me like exactly what composite grammars were designed to
do. So I made a CommonTokens.g:

lexer grammar CommonTokens;

NEWLINE_ :  ('\r'? '\n');

Then in my grammar, I added an import:

grammar AerobasicPreprocessor;
import CommonTokens;

options { language=C;  }

line : SOMEOTHERTOKENS_ NEWLINE_;
...


When I run the ANTLR tool on this grammar, I get some less than helpful
errors:

error(100): AerobasicPreprocessor.g:4:1: syntax error: antlr:
org.antlr.runtime.EarlyExitException
error(150):  grammar file AerobasicPreprocessor.g has no rules
error(100): AerobasicPreprocessor.g:0:1: syntax error: assign.types:
org.antlr.runtime.EarlyExitException
org\antlr\grammar\v3\DefineGrammarItemsWalker.g: node from line 326:1
required (...)+ loop did not match anything at input ';'

What am I doing wrong?

Thanks,

- Justin

List: <A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">http://www.antlr.org/mailman/listinfo/antlr-interest</A>
Unsubscribe:
<A HREF="http://www.antlr.org/mailman/options/antlr-interest/your-email-address">http://www.antlr.org/mailman/options/antlr-interest/your-email-address</A>

List: <A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">http://www.antlr.org/mailman/listinfo/antlr-interest</A>
Unsubscribe:
<A HREF="http://www.antlr.org/mailman/options/antlr-interest/your-email-address">http://www.antlr.org/mailman/options/antlr-interest/your-email-address</A>
</PRE>















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="045392.html">[antlr-interest] Composite Grammar [C Target]
</A></li>
	<LI>Next message: <A HREF="045393.html">[antlr-interest] Added grammar repository
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#45397">[ date ]</a>
              <a href="thread.html#45397">[ thread ]</a>
              <a href="subject.html#45397">[ subject ]</a>
              <a href="author.html#45397">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.antlr.org/mailman/listinfo/antlr-interest">More information about the antlr-interest
mailing list</a><br>
</body></html>
