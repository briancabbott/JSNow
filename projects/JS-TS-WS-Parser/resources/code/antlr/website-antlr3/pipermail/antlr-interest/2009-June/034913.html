<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [antlr-interest] Issue with backtracking - non determinism ?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20Issue%20with%20backtracking%20-%20non%20determinism%20%3F&In-Reply-To=%3C4A369D0B.1010104%40colar.net%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="034912.html">
   <LINK REL="Next"  HREF="034914.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[antlr-interest] Issue with backtracking - non determinism ?</H1>
    <B>Thibaut Colar</B> 
    <A HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20Issue%20with%20backtracking%20-%20non%20determinism%20%3F&In-Reply-To=%3C4A369D0B.1010104%40colar.net%3E"
       TITLE="[antlr-interest] Issue with backtracking - non determinism ?">tcolar at colar.net
       </A><BR>
    <I>Mon Jun 15 12:12:11 PDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="034912.html">[antlr-interest] Question regarding Creating Declarative UI Language
</A></li>
        <LI>Next message: <A HREF="034914.html">[antlr-interest] ANTLR IDE v2.0.0rc1
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#34913">[ date ]</a>
              <a href="thread.html#34913">[ thread ]</a>
              <a href="subject.html#34913">[ subject ]</a>
              <a href="author.html#34913">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello there, I've been learning and using ANTLR with online docs and the
book.

I've been witting the grammar for a new prog. Language called Fan, and
it's basically all working now, though that took quite some effort,
since I'm new to antlr, and the Fan syntax is fairly difficult.

For reference here is the current whole grammar:
<A HREF="http://svn.colar.net/Fan_antlr/src/Fan.g">http://svn.colar.net/Fan_antlr/src/Fan.g</A>

Anyway, I have one issue left, I'm not sure exactly what to call it (non
determinism ?) or exactly how to resolve it.

I have a shorter subset of the grammar here to illustrate the problem
and debug it in antlrworks:
<A HREF="http://svn.colar.net/Fan_antlr/src/Test.g">http://svn.colar.net/Fan_antlr/src/Test.g</A>

The basic issue is as follow (Please refer to Test.g):

If I test my grammar with a ternary expression such as:
    &quot;foo ? bar :  beer&quot;   it 's fine
Now if I have:
    &quot; foo ? bar : beer[0..2]     it fails

What's happening is that, antlr will interpret &quot;bar:beer[0..2]&quot; as a
list (of map type bar:beer), which is a valid match in the grammar,
however  it will then fail, because  the rest of the ternary
expression('else' case) is then missing (: expr)

It should interpret like this: expr(foo) '?' expr(bar) ':'
expr(list(beer[0..2]))  which would be a valid ternary then.

The issue is cause by the ':' being meaningful as both a map type
separator and a ternary separator, and I guess antlr is matching
whatever matches first.

However shouldn't ANTLR backtrack anyway once it sees it can't match the
rest of the ternary expr, or is bactracking just not gonna help since it
Did find a match for list already ?

How can i solve this?
1) It seem checking first for id's and for map/list last would solve the
issue, but in most other cases (not ternary expr) i actually want to
match the longest option first (map/list)

2) I was thinking of setting  a variable/state while &quot;within&quot; a ternary
expression and in this case try first with maps/list disabled(skipping
them), but apparently when backtracking is enabled the code generated by
ANTLR does NOT evaluate my variable (if state.bactracking==0) so it
won't do it.


Any help/ideas would be greatly appreciated.






</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="034912.html">[antlr-interest] Question regarding Creating Declarative UI Language
</A></li>
	<LI>Next message: <A HREF="034914.html">[antlr-interest] ANTLR IDE v2.0.0rc1
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#34913">[ date ]</a>
              <a href="thread.html#34913">[ thread ]</a>
              <a href="subject.html#34913">[ subject ]</a>
              <a href="author.html#34913">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.antlr.org/mailman/listinfo/antlr-interest">More information about the antlr-interest
mailing list</a><br>
</body></html>
