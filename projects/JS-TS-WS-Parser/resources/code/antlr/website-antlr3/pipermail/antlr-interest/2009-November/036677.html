<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [antlr-interest] repeating the parsing of a subtree
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20repeating%20the%20parsing%20of%20a%20subtree&In-Reply-To=%3C3402BD9F2C1434438EF1F319BE558FBB012ABA9B%40xena.ad.utc%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="036693.html">
   <LINK REL="Next"  HREF="036685.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[antlr-interest] repeating the parsing of a subtree</H1>
    <B>Claude Moulin</B> 
    <A HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20repeating%20the%20parsing%20of%20a%20subtree&In-Reply-To=%3C3402BD9F2C1434438EF1F319BE558FBB012ABA9B%40xena.ad.utc%3E"
       TITLE="[antlr-interest] repeating the parsing of a subtree">claude.moulin at hds.utc.fr
       </A><BR>
    <I>Thu Nov  5 11:22:05 PST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="036693.html">[antlr-interest] Problem parsing unit symbols
</A></li>
        <LI>Next message: <A HREF="036685.html">[antlr-interest] Maven archetype for ANTLR
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#36677">[ date ]</a>
              <a href="thread.html#36677">[ thread ]</a>
              <a href="subject.html#36677">[ subject ]</a>
              <a href="author.html#36677">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello Jim,

Thank you very much.

I did not know how to deal with these methods.

Following your advice my rule is now:

 

repeat 

@init{  int mark_before; }

:<i>              
</I>
   ^(REPEAT a = atom  {mark_before = input.mark();}  list = .  ) 

         {     for (int i = 0; i &lt; $a.r ; i++)  {

                   input.rewind(mark_before);

                   list_instructions();

              } 

             input.rewind(input.index() + 1);

             // need to skip one node to reach the right position

          }                    

   ;

 

Claude

------------------------------

 

Message: 33

Date: Thu, 05 Nov 2009 08:36:05 -0800

From: &quot;Jim Idle&quot; &lt;<A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">jimi at temporal-wave.com</A>&gt;

Subject: Re: [antlr-interest] repeating the parsing of a subtree

To: &quot;<A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">antlr-interest at antlr.org</A>&quot; &lt;<A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">antlr-interest at antlr.org</A>&gt;

Message-ID: &lt;<A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">2230d40e6d2bac41bad38daa03de7e9a at temporal-wave.com</A>&gt;

Content-Type: text/plain;    charset=&quot;us-ascii&quot;

 

Should you not be using the push(index) and pop() of the
CommonTreeNodeStream or mark() and rewind()? The index() method will
give you the current location when you hit the node that you want to
repeat.

 

Jim

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://www.antlr.org/pipermail/antlr-interest/attachments/20091105/ab822871/attachment.html">http://www.antlr.org/pipermail/antlr-interest/attachments/20091105/ab822871/attachment.html</A> 
</PRE>


















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="036693.html">[antlr-interest] Problem parsing unit symbols
</A></li>
	<LI>Next message: <A HREF="036685.html">[antlr-interest] Maven archetype for ANTLR
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#36677">[ date ]</a>
              <a href="thread.html#36677">[ thread ]</a>
              <a href="subject.html#36677">[ subject ]</a>
              <a href="author.html#36677">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.antlr.org/mailman/listinfo/antlr-interest">More information about the antlr-interest
mailing list</a><br>
</body></html>
