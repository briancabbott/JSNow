<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [antlr-interest] StringTemplate output issues
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:antlr-interest%40antlr.org?Subject=%5Bantlr-interest%5D%20StringTemplate%20output%20issues&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="014180.html">
   <LINK REL="Next"  HREF="014183.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[antlr-interest] StringTemplate output issues</H1>
    <B>Olivier Dragon</B> 
    <A HREF="mailto:antlr-interest%40antlr.org?Subject=%5Bantlr-interest%5D%20StringTemplate%20output%20issues&In-Reply-To="
       TITLE="[antlr-interest] StringTemplate output issues">dragonoe at mcmaster.ca
       </A><BR>
    <I>Fri Nov  4 07:46:39 PST 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="014180.html">[antlr-interest] ASM68000 grammar
</A></li>
        <LI>Next message: <A HREF="014183.html">[antlr-interest] StringTemplate output issues
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14182">[ date ]</a>
              <a href="thread.html#14182">[ thread ]</a>
              <a href="subject.html#14182">[ subject ]</a>
              <a href="author.html#14182">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

I'm having problems with StringTemplate and I would appreciate very much
if someone with experience would help me to look through what is
happening and tell me what silly mistake I'm making :)

I am trying to use StringTemplate to generate code from a syntax tree.
I use an ANTLR grammar to parse the input code and generate the AST, and
a tree grammar to parse the AST and feed it to a template
(StringTemplate). I've based my tree grammar and template on the C- to
Java example found on stringtemplate.org.

However the template doesn't work. I'm getting the template text
literally, including the attribute placeholder. I've looked at the
toDebugString() output and everything looks good to me. I've even tried
to debug it through Eclipse and everything looks fine there too. Here's
my result:

&lt;units; separator=&quot;\nc\n&quot;&gt;

And the debug string:


template-&lt;programUnits([units])@10&gt;:chunks=[&lt;units; separator=&quot;\nc\n&quot;&gt;]attributes=[units=template-&lt;subroutine([name, parameters])@11&gt;:chunks=[      subroutine &lt;name&gt; (&lt;parameters&gt;),
,
,       end]attributes=[parameters=template-&lt;commaSeparatedList([listItems])@12&gt;:chunks=[&lt;listItems; separator=&quot;, &quot;&gt;]attributes=[listItems=[incy, cy, ca, cx, n, incx]],name=caxpy]]


And the exerpt from my main program, where CodePrinter is the name of
the TreeParser class:

        CodePrinter printer = new CodePrinter();
        File tmpl = new File(&quot;fortran77/printer/f77-code_template.stg&quot;);
        printer.setTemplates(new StringTemplateGroup(new FileReader(tmpl)));
        StringTemplate code = printer.program(tree);
        System.out.println(code.toString());
        System.out.println(code.toDebugString());


I'm attaching my tree grammar and template files in case it could be
useful.

Thank you. I very much appreciate any help.

-Olivier

-- 
          __-/|    ? ?     |\-__
     __--/  /  \   (^^)   /  \  \--__
  _-/   /   /  /\ / ( )  /\  \   \   \-_
 /  /   /  /  /  (   ^^ ~  \  \  \   \  \
 / Oli Dragon    ( <A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">dragonoe at mcmaster.ca</A> \
/  B.Eng. Sfwr   (     )    \    \  \    \
/  /  /    /__--_ (   ) __--__\    \  \  \
|<i>  /  /  _/        \_ \_       \_  \  \  |
</I> \/  / _/            \_ \_       \_ \  \/
  \_/ /                -\_\        \ \_/
    \/                    )         \/
                        *~
        ___--&lt;***************&gt;--___
       [<A HREF="http://dragon.homelinux.org]">http://dragon.homelinux.org]</A>
        ~~~--&lt;***************&gt;--~~~
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 189 bytes
Desc: Digital signature
Url : <A HREF="http://www.antlr.org/pipermail/antlr-interest/attachments/20051104/7ed32481/attachment-0001.bin">http://www.antlr.org/pipermail/antlr-interest/attachments/20051104/7ed32481/attachment-0001.bin</A>
</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="014180.html">[antlr-interest] ASM68000 grammar
</A></li>
	<LI>Next message: <A HREF="014183.html">[antlr-interest] StringTemplate output issues
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14182">[ date ]</a>
              <a href="thread.html#14182">[ thread ]</a>
              <a href="subject.html#14182">[ subject ]</a>
              <a href="author.html#14182">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.antlr.org/mailman/listinfo/antlr-interest">More information about the antlr-interest
mailing list</a><br>
</body></html>
