<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [antlr-interest] multi-channel token stream
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20multi-channel%20token%20stream&In-Reply-To=%3CAANLkTi%3D58cFSHOyckK%2BM%3DNZ31u82RoMQu%3Dn_0eNjeX__%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="040719.html">
   <LINK REL="Next"  HREF="040721.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[antlr-interest] multi-channel token stream</H1>
    <B>Michael Bedward</B> 
    <A HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20multi-channel%20token%20stream&In-Reply-To=%3CAANLkTi%3D58cFSHOyckK%2BM%3DNZ31u82RoMQu%3Dn_0eNjeX__%40mail.gmail.com%3E"
       TITLE="[antlr-interest] multi-channel token stream">michael.bedward at gmail.com
       </A><BR>
    <I>Wed Feb  9 15:59:32 PST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="040719.html">[antlr-interest] TreeParser reset()
</A></li>
        <LI>Next message: <A HREF="040721.html">[antlr-interest] rule catch blocks ignored in imported grammars ?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#40720">[ date ]</a>
              <a href="thread.html#40720">[ thread ]</a>
              <a href="subject.html#40720">[ subject ]</a>
              <a href="author.html#40720">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi folks,

I'd like my parser to be able to tune in to more than one token
channel with the choice of channel(s) being set when constructing the
TokenStream. The DAR book doesn't have an example of doing this,
unless I've missed it. The wiki refers to being able to merge channels
but I couldn't find an example of doing this - unless it just meant
using BufferedTokenStream instead of CommonTokenStream ?

My solution has been to create a simple class,
MultiChannelTokenStream, adapted from CommonTokenStream. Instead of
holding the index of a single channel it maintains a list of &quot;active
channels&quot; which is used by the various stream access and positioning
methods.  The source is here:

<A HREF="http://code.google.com/p/jai-tools/source/browse/trunk/jiffle/src/main/java/jaitools/jiffle/parser/MultiChannelTokenStream.java">http://code.google.com/p/jai-tools/source/browse/trunk/jiffle/src/main/java/jaitools/jiffle/parser/MultiChannelTokenStream.java</A>

I still have a lurking doubt that I'm re-inventing the wheel here, ie.
that I must be missing something obvious in the ANTLR API (or perhaps
more fundamentally in lexer / parser design). If that's the case I'd
appreciate any tips. On the other hand, if the class is of any use to
others, please feel free to grab it.

Michael
</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="040719.html">[antlr-interest] TreeParser reset()
</A></li>
	<LI>Next message: <A HREF="040721.html">[antlr-interest] rule catch blocks ignored in imported grammars ?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#40720">[ date ]</a>
              <a href="thread.html#40720">[ thread ]</a>
              <a href="subject.html#40720">[ subject ]</a>
              <a href="author.html#40720">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.antlr.org/mailman/listinfo/antlr-interest">More information about the antlr-interest
mailing list</a><br>
</body></html>
