<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [antlr-interest] alternative prediction mechanism for 3.0
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:antlr-interest%40antlr.org?Subject=%5Bantlr-interest%5D%20alternative%20prediction%20mechanism%20for%203.0&In-Reply-To=3D83CE9A-BD81-11D8-BE22-000A95891192%40cs.usfca.edu">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="008271.html">
   <LINK REL="Next"  HREF="008270.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[antlr-interest] alternative prediction mechanism for 3.0</H1>
    <B>Ric Klaren</B> 
    <A HREF="mailto:antlr-interest%40antlr.org?Subject=%5Bantlr-interest%5D%20alternative%20prediction%20mechanism%20for%203.0&In-Reply-To=3D83CE9A-BD81-11D8-BE22-000A95891192%40cs.usfca.edu"
       TITLE="[antlr-interest] alternative prediction mechanism for 3.0">klaren at cs.utwente.nl
       </A><BR>
    <I>Mon Jun 14 04:01:03 PDT 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="008271.html">[antlr-interest] alternative prediction mechanism for 3.0
</A></li>
        <LI>Next message: <A HREF="008270.html">New antlr-interest member
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8275">[ date ]</a>
              <a href="thread.html#8275">[ thread ]</a>
              <a href="subject.html#8275">[ subject ]</a>
              <a href="author.html#8275">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

On Sun, Jun 13, 2004 at 02:32:58PM -0700, Terence Parr wrote:
&gt;<i> Concerning the new parsers and lexers generated by ANTLR 3.0, I'm
</I>&gt;<i> trying to decide how to encode the prediction DFAs.  If you have an
</I>&gt;<i> opinion on what the generated parsers/lexers should look like, please
</I>&gt;<i> take a quick look at the latest code gen blog entry:
</I>&gt;<i>
</I>&gt;<i> <A HREF="http://www.antlr.org/blog/antlr3/codegen.tml">http://www.antlr.org/blog/antlr3/codegen.tml</A>
</I>
&gt;<i> DFA decision = dfaFactory.get(&quot;...DFA description...&quot;);
</I>
You mean to have a 'high' level ASCII DFA specification of
states/transitions etc. between the &quot;..&quot; or just an id for that specific
DFA?

Why not encode the DFA in static tables (that can be 'run' directly without
first processing them)? There's lot's of ways to do that if I recall right.
It also offers the possibility to dump the tables in separate class files
(if size becomes an issue). (I'm always a bit itchy when people suggest
building stuff on the run, when at first glance it looks like something
you'd put in static tables)

a) it's faster

b) it gives more consistent runtime behavior (some input will parse fast,
	some input will parse slow depending on if it takes a worst case path
	through the generated parser).

c) The runtime memory usage pattern will be more predictable (this can be
	very important for people wanting to use antlr in embedded
	environments). Ok you could generate code to calculate the DFA's at
	parser instantiation.

The DFA will do a 'highlevel' choice anyway (as I understood it). Much like
a bitset.isMember(LA(x)) in the current codegen. As long as there's a way
to see what the DFA does I'm happy, being it a comment or some form of
tracing. (heck put a piece of .dot input (AT&amp;T graphviz) in a comment for
the DFA) Or put an extra textfield in the dfa table that gets printed in
trace mode. Or combine the two: put .dot input near the table and put in
the table the necessary curses to make dot recolor the DFA previously
generated. So you can even see what the DFA does at runtime, this would be
a near trivial bit of code in Tcl/Tk.

Another point is that these DFA's get generated by ANTLR. The average ANTLR
user will probably not want to look inside these DFA's anyway. Looking into
a bitset is different from looking into a DFA. Also putting a clear
description of the automaton in a comment is probably a lot more helpfull
then a somewhat obscure though human 'readable' format in a text string. A
plain table with transitions is a lot harder to grok than something that
dot spits out for one (even if you have to run an external program to get a
nice picture).

&gt;<i> ..
</I>&gt;<i> but the more complicated DFAs should be handled not with
</I>&gt;<i> hard-coded DFAs but with DFAs dynamically created from simple
</I>&gt;<i> Human-readable descriptions.
</I>&gt;<i> ..
</I>
For some reason this statement really itches me. Ok I got it out of context
but even in context. I recall statements about making antlr 3 a speed
freak. This is kindoff orthogonal to that. Ok it will probably be not that
bad with caching of the generated automata but anyway ;)

To sum up let's keep the generated code readable but within reason. At
least that would be what I'd do personally.

Cheers,

Ric
--
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- <A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">j.klaren at utwente.nl</A> ----- +31 53 4893755  ----
-----+++++*****************************************************+++++++++-------
  Xander: &quot;Buffy, we need to do something *now*&quot;
  Angel: &quot;We need a distraction.&quot;
  Buffy: &quot;Right.&quot;
  Angel: &quot;What are you going to do?&quot;
  Buffy: &quot;I'm going to kill them all. That oughtta distract 'em...&quot;



 
Yahoo! Groups Links

&lt;*&gt; To visit your group on the web, go to:
     <A HREF="http://groups.yahoo.com/group/antlr-interest/">http://groups.yahoo.com/group/antlr-interest/</A>

&lt;*&gt; To unsubscribe from this group, send an email to:
     <A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">antlr-interest-unsubscribe at yahoogroups.com</A>

&lt;*&gt; Your use of Yahoo! Groups is subject to:
     <A HREF="http://docs.yahoo.com/info/terms/">http://docs.yahoo.com/info/terms/</A>
 

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="008271.html">[antlr-interest] alternative prediction mechanism for 3.0
</A></li>
	<LI>Next message: <A HREF="008270.html">New antlr-interest member
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8275">[ date ]</a>
              <a href="thread.html#8275">[ thread ]</a>
              <a href="subject.html#8275">[ subject ]</a>
              <a href="author.html#8275">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.antlr.org/mailman/listinfo/antlr-interest">More information about the antlr-interest
mailing list</a><br>
</body></html>
