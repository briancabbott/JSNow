<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [antlr-interest] Composite grammar issues
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20Composite%20grammar%20issues&In-Reply-To=%3C49E756E2.7020809%40temporal-wave.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="034074.html">
   <LINK REL="Next"  HREF="034092.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[antlr-interest] Composite grammar issues</H1>
    <B>Jim Idle</B> 
    <A HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20Composite%20grammar%20issues&In-Reply-To=%3C49E756E2.7020809%40temporal-wave.com%3E"
       TITLE="[antlr-interest] Composite grammar issues">jimi at temporal-wave.com
       </A><BR>
    <I>Thu Apr 16 09:03:46 PDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="034074.html">[antlr-interest] Composite grammar issues
</A></li>
        <LI>Next message: <A HREF="034092.html">[antlr-interest] Composite grammar issues
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#34078">[ date ]</a>
              <a href="thread.html#34078">[ thread ]</a>
              <a href="subject.html#34078">[ subject ]</a>
              <a href="author.html#34078">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Kumar Rangarajan wrote:
&gt;<i> Hi,
</I>&gt;<i>
</I>&gt;<i> First things first. Thanks for creating such a wonderful tool. We use 
</I>&gt;<i> Antlr for our project work, and recently we switched to using 
</I>&gt;<i> composite grammars, as we are a distributed team, and multiple people 
</I>&gt;<i> need to modify various portions of the grammar file.
</I>&gt;<i>
</I>&gt;<i> While most things just work out of the box or could be trivially 
</I>&gt;<i> worked around, one breaking issue is related to the way the lexer is 
</I>&gt;<i> generated, if the composite grammar defines any lexer rules. I am 
</I>&gt;<i> using Java code generation, and we see that the contents of the 
</I>&gt;<i> &quot;header&quot; defined either in the composite file or in the central lexer 
</I>&gt;<i> file does not get copied to the generated lexer code.
</I>&gt;<i>
</I>&gt;<i> This breaks our packaging structure, as the package statement is 
</I>&gt;<i> normally mentioned in the &quot;header&quot; section of either the central or 
</I>&gt;<i> composite grammars, and because it does not propagate to the generated 
</I>&gt;<i> lexer code, it breaks compilation. 
</I>&gt;<i>
</I>&gt;<i> I see that the same issue was reported last year and a bug has been 
</I>&gt;<i> filed for the same - <A HREF="http://www.antlr.org/jira/browse/ANTLR-370">http://www.antlr.org/jira/browse/ANTLR-370</A>
</I>&gt;<i>
</I>&gt;<i> It would be great if anyone can provide a workaround for this or can 
</I>&gt;<i> provide any updates on the potential fix.
</I>&gt;<i>
</I>&gt;<i> Thanks again for creating this (I mean the tool, not the bug :)).
</I>Kumar,

It all works much better if you separate the lexer grammar into its own 
'lexer grammar' file then import the vocab. The lexer is then standalone 
and can be in any package. Ther eis no particular reason you need to 
import the grammar rather than the vocab in my experience. That said, 
there is an issue at the moment that if you import the vocab then 
accidentally use a token that you have not yet defined in the lexer, you 
do not get told about it, so watch for that one.

I don't know the status of that JIRA, but maybe Terence will comment 
later - he is in China right now.

Jim
</PRE>

















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="034074.html">[antlr-interest] Composite grammar issues
</A></li>
	<LI>Next message: <A HREF="034092.html">[antlr-interest] Composite grammar issues
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#34078">[ date ]</a>
              <a href="thread.html#34078">[ thread ]</a>
              <a href="subject.html#34078">[ subject ]</a>
              <a href="author.html#34078">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.antlr.org/mailman/listinfo/antlr-interest">More information about the antlr-interest
mailing list</a><br>
</body></html>
