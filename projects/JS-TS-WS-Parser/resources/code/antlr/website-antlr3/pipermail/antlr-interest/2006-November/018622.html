<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [antlr-interest] String lexing and partial tokens
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:antlr-interest%40antlr.org?Subject=%5Bantlr-interest%5D%20String%20lexing%20and%20partial%20tokens&In-Reply-To=59792.3420.qm%40web55913.mail.re3.yahoo.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="018621.html">
   <LINK REL="Next"  HREF="018624.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[antlr-interest] String lexing and partial tokens</H1>
    <B>Jim Idle</B> 
    <A HREF="mailto:antlr-interest%40antlr.org?Subject=%5Bantlr-interest%5D%20String%20lexing%20and%20partial%20tokens&In-Reply-To=59792.3420.qm%40web55913.mail.re3.yahoo.com"
       TITLE="[antlr-interest] String lexing and partial tokens">jimi at intersystems.com
       </A><BR>
    <I>Mon Nov 27 16:53:18 PST 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="018621.html">[antlr-interest] String lexing and partial tokens
</A></li>
        <LI>Next message: <A HREF="018624.html">[antlr-interest] String lexing and partial tokens
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18622">[ date ]</a>
              <a href="thread.html#18622">[ thread ]</a>
              <a href="subject.html#18622">[ subject ]</a>
              <a href="author.html#18622">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Loring,

To my mind, 5-10% (assuming that you mean runtime) is still quite an overhead, which seems quite a lot for such a feature when there are other ways of achieving the same that don't really cost anything (at least in the C runtime any way). 

I would be interested in how you measure this, because anything that causes the token string to be created rather than just be indexes into the source would surely have a higher overhead than this. I suppose that what could be done would be that when a part of the token spec includes ! on a fixed length leading or trailing part of the token, then the start and end indexes could be adjusted at token emit time, but it just doesn't seem such a big deal to me, so long as there are reasonable ways of achieving the same thing manually. It seems that the removal of &quot; in strings is in fact the main use for this functionality.

However, I don't believe that Ter rejected looking at this out of hand, just that for the moment there are plenty of other things to work on. That said, for my part, I think it is just a matter of documenting some ways to achieve the same thing and people getting used to them. I don't think that people object to changing ways of doing things if they are reasonable. While it is obviously quite a lot easier to just add ! to the matching text, you do this work once, whereas the resulting lexer will presumably run many more times than once; it seems that it is worth the small effort at grammar specification time to keep the lexer as trim as possible.

I am a fan of the ANTLR 3 approach of simplification over ANTLR 2, which generally yields leaner code generation, and transferring a certain amount of the effort to the grammar author. There are limits to this of course, but I think ANTLR 3 is a reasonable blend, given that it makes grammar programming in general so much easier than its predecessors. 

However I am sure that your efforts in this regard will be appreciated if they turn out to yield something that has very little overhead and little time to incorporate into the main ANTLR product.

Jim



-----Original Message-----
From: Loring Craymer [mailto:<A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">lgcraymer at yahoo.com</A>] 
Sent: Monday, November 27, 2006 4:27 PM
To: Jim Idle; <A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">antlr-interest at antlr.org</A>
Subject: Re: [antlr-interest] String lexing and partial tokens


--- Jim Idle &lt;<A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">jimi at intersystems.com</A>&gt; wrote:

..
&gt;<i> You can  ask Jim Idle about that, but we decided to
</I>&gt;<i> use methods for  
</I>&gt;<i> setting the text rather than implementing ! which
</I>&gt;<i> makes everything  
</I>&gt;<i> inefficient. I could swear there was something in
</I>&gt;<i> the documentation.
</I>
! in the lexer does not &quot;make everything inefficient&quot;;
you just have to be smart about the implementation. 
The lexer editing via ! that is currently in the
Yggdrasil 0.5b releases (I'll have b2 out soon) costs
about 5-10% (rough estimate from looking at generated
code); once I can analyze which rules edit, that drops
still further.

--Loring


 
____________________________________________________________________________________
Do you Yahoo!?
Everyone is raving about the all-new Yahoo! Mail beta.
<A HREF="http://new.mail.yahoo.com">http://new.mail.yahoo.com</A>

-- 
No virus found in this incoming message.
Checked by AVG Free Edition.
Version: 7.1.409 / Virus Database: 268.14.17/553 - Release Date: 11/27/2006
 

-- 
No virus found in this outgoing message.
Checked by AVG Free Edition.
Version: 7.1.409 / Virus Database: 268.14.17/553 - Release Date: 11/27/2006
 
</PRE>







<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="018621.html">[antlr-interest] String lexing and partial tokens
</A></li>
	<LI>Next message: <A HREF="018624.html">[antlr-interest] String lexing and partial tokens
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18622">[ date ]</a>
              <a href="thread.html#18622">[ thread ]</a>
              <a href="subject.html#18622">[ subject ]</a>
              <a href="author.html#18622">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.antlr.org/mailman/listinfo/antlr-interest">More information about the antlr-interest
mailing list</a><br>
</body></html>
