From WeikEngOff at aol.com  Sat Oct  1 00:21:51 2011
From: WeikEngOff at aol.com (Udo Weik)
Date: Sat, 01 Oct 2011 09:21:51 +0200
Subject: [antlr-interest]  Jim Idle: C-Runtime and C++Builder,
 E2342 Type mismatch in parameter
Message-ID: <4E86BF8F.1020205@aol.com>

Hello Jim,

I'm getting some
   E2342 Type mismatch in parameter 'freeptr' (wanted 'void (*)(void *)', got 'int')
errors in code lines like
   FOLLOWPUSH(FOLLOW_subtype_indication_in_access_type_definition730) );
Any hint?


And in the following functions an analog problem
   E2342 Type mismatch in parameter 'state' (wanted 'ANTLR3_RECOGNIZER_SHARED_STATE_struct *', got 'int')I
I just declared state and initialized it with NULL:

ANTLR3_API pXYZLexer XYZLexerNew( pANTLR3_INPUT_STREAM instream )
{
   pANTLR3_RECOGNIZER_SHARED_STATE state ; // UW
   state = NULL ; // UW

   // See if we can create a new lexer with the standard constructor
   //
   // UW  return XYZLexerNewSSD(instream, NULL);
   return XYZLexerNewSSD(instream, state); // UW
}

Same problem with
ANTLR3_API pXYZParser XYZParserNew( pANTLR3_COMMON_TOKEN_STREAM instream )
{
   pANTLR3_RECOGNIZER_SHARED_STATE state ; // UW
   state = NULL ; // UW

   // See if we can create a new parser with the standard constructor
   //
// UW  return XYZParserNewSSD(instream, NULL);
   return XYZParserNewSSD(instream, state); // UW
}


Is it in any way possible to avoid tabs in the generated code?
I would prefer two spaces for one tab.


Many thanks and greetings
Udo

From Adrian.Pop at liu.se  Sat Oct  1 04:25:05 2011
From: Adrian.Pop at liu.se (Adrian Pop)
Date: Sat, 1 Oct 2011 13:25:05 +0200
Subject: [antlr-interest] C Target code generation of ANTLR 3.4 does not set
 ALL the rule variables to NULL
Message-ID: <4E86F891.5020509@liu.se>

Hi all,

It seems that the ANLTR 3.4 code generation for C
target does not set ALL the rule variables to NULL.
ANTLR 3.2 does set all of them to NULL.

Example:
type_specifier returns [void* ast] :
    np=name_path
    (lt=LESS ts=type_specifier_list gt=GREATER)? (as=array_subscripts)?
      {
        if (ts != NULL) {
....

In ANTLR 3.4 only the variables: "lt" and "gt" are set to NULL
at the beginning of the rule. In ANTLR 3.2 code generation all
the variables "np", "lt", "ts", "gt", "as" are set to NULL at
the rule start.

This is rather annoying as suddenly things that worked fine
with ANTLR 3.2 do not work anymore with ANTLR 3.4 (seg fault).

Is this a bug or is like this by design and we will need to
set the variables to NULL via @init or { scope } at the
start of the rule?

Cheers,
Adrian Pop/

From jimi at temporal-wave.com  Sat Oct  1 10:09:19 2011
From: jimi at temporal-wave.com (Jim Idle)
Date: Sat, 1 Oct 2011 10:09:19 -0700
Subject: [antlr-interest] Jim Idle: C-Runtime and C++Builder,
 E2342 Type mismatch in parameter
In-Reply-To: <4E86BF8F.1020205@aol.com>
References: <4E86BF8F.1020205@aol.com>
Message-ID: <c6eeb9d93977b80bb75a240dbd423d85@mail.gmail.com>

I don't really know what you are trying to do or what compiler you are
using etc, but remember this is C code not C++ code so if you turn on all
the warnings in the C++ compiler then you may get the odd warning. But
without seeing all the code, I can't guess where that warning is. It isn't
the FOLLOWPUSH macro though. It looks more likely that you are not
including the correct headers and so the prototype is defaulting to int.

As for tabs vs space... well it is generated code. You could always untab
it using any one of a thousand tools, or modify the code generation
template and remake ANTLR.

I don't know anything about C__ builder, but it seems to be more of a
hindrance than a help?

Jim

> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of Udo Weik
> Sent: Saturday, October 01, 2011 12:22 AM
> To: Antlr-Interest Antlr.Org
> Subject: [antlr-interest] Jim Idle: C-Runtime and C++Builder, E2342
> Type mismatch in parameter
>
> Hello Jim,
>
> I'm getting some
>    E2342 Type mismatch in parameter 'freeptr' (wanted 'void (*)(void
> *)', got 'int') errors in code lines like
>    FOLLOWPUSH(FOLLOW_subtype_indication_in_access_type_definition730)
> ); Any hint?
>
>
> And in the following functions an analog problem
>    E2342 Type mismatch in parameter 'state' (wanted
> 'ANTLR3_RECOGNIZER_SHARED_STATE_struct *', got 'int')I I just declared
> state and initialized it with NULL:
>
> ANTLR3_API pXYZLexer XYZLexerNew( pANTLR3_INPUT_STREAM instream ) {
>    pANTLR3_RECOGNIZER_SHARED_STATE state ; // UW
>    state = NULL ; // UW
>
>    // See if we can create a new lexer with the standard constructor
>    //
>    // UW  return XYZLexerNewSSD(instream, NULL);
>    return XYZLexerNewSSD(instream, state); // UW }
>
> Same problem with
> ANTLR3_API pXYZParser XYZParserNew( pANTLR3_COMMON_TOKEN_STREAM
> instream ) {
>    pANTLR3_RECOGNIZER_SHARED_STATE state ; // UW
>    state = NULL ; // UW
>
>    // See if we can create a new parser with the standard constructor
>    //
> // UW  return XYZParserNewSSD(instream, NULL);
>    return XYZParserNewSSD(instream, state); // UW }
>
>
> Is it in any way possible to avoid tabs in the generated code?
> I would prefer two spaces for one tab.
>
>
> Many thanks and greetings
> Udo
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
> email-address

From jimi at temporal-wave.com  Sat Oct  1 10:17:58 2011
From: jimi at temporal-wave.com (Jim Idle)
Date: Sat, 1 Oct 2011 10:17:58 -0700
Subject: [antlr-interest] C Target code generation of ANTLR 3.4 does not
 set ALL the rule variables to NULL
In-Reply-To: <4E86F891.5020509@liu.se>
References: <4E86F891.5020509@liu.se>
Message-ID: <ed853d737bd649389ceb669a07d21162@mail.gmail.com>

It is by design, to prevent trying to assign NULL to things that are not
pointers. See endless emails about it from years ago ;)


Jim

> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of Adrian Pop
> Sent: Saturday, October 01, 2011 4:25 AM
> To: antlr-interest at antlr.org; Adrian Pop
> Subject: [antlr-interest] C Target code generation of ANTLR 3.4 does
> not set ALL the rule variables to NULL
>
> Hi all,
>
> It seems that the ANLTR 3.4 code generation for C target does not set
> ALL the rule variables to NULL.
> ANTLR 3.2 does set all of them to NULL.
>
> Example:
> type_specifier returns [void* ast] :
>     np=name_path
>     (lt=LESS ts=type_specifier_list gt=GREATER)? (as=array_subscripts)?
>       {
>         if (ts != NULL) {
> ....
>
> In ANTLR 3.4 only the variables: "lt" and "gt" are set to NULL at the
> beginning of the rule. In ANTLR 3.2 code generation all the variables
> "np", "lt", "ts", "gt", "as" are set to NULL at the rule start.
>
> This is rather annoying as suddenly things that worked fine with ANTLR
> 3.2 do not work anymore with ANTLR 3.4 (seg fault).
>
> Is this a bug or is like this by design and we will need to set the
> variables to NULL via @init or { scope } at the start of the rule?
>
> Cheers,
> Adrian Pop/
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
> email-address

From dawood at us.ibm.com  Mon Oct  3 06:59:30 2011
From: dawood at us.ibm.com (David Wood)
Date: Mon, 3 Oct 2011 09:59:30 -0400
Subject: [antlr-interest] Antlrworks window visibility
Message-ID: <OF88FDA965.AB125617-ON8525791E.004C97BE-8525791E.004CDCD3@us.ibm.com>

I'm running AW on Windows 7 using a 1.6 JVM, and when I use the Edit->Find 
option and hit the Next button, the grammar editing window, which is not 
maximized, gets shifted to the right and I can't see the normal controls 
in the upper right-hand corner.  Nor can I see the top window bar.  Both 
of these mean I can't move the window see the contents in the right side 
of the window.  Thoughts?

David Wood 
Computing Systems for Wireless Networks
IBM TJ Watson Research Center
dawood at us.ibm.com
914-784-5123 (office), 914-396-6515 (mobile)

From cmsdew at gmail.com  Tue Oct  4 00:40:30 2011
From: cmsdew at gmail.com (Chris Dew)
Date: Tue, 4 Oct 2011 08:40:30 +0100
Subject: [antlr-interest] Text focus bug in ANLTR works on Ubuntu make it
	unusable.
Message-ID: <CADZktKabnUfjRuBRJi+gbbmi5T_srwVvn6GMQXQudHEYRu4qMg@mail.gmail.com>

Hi Everyone,

I've been interested in looking at ANTLR for several years.

There is a UI bug which prevents the foreground window's widgets from
gaining focus when you click on them.  The text cursor remains in the
background window, even when the foreground window is active and I
click in the Grammar Name widget.

The most ironic twist is that if you use the GIMPs screenshot facility
to get an image of the window, it will give focus to the foreground
window's widget.  Using GIMP screenshot for widget focus is not a
usable solution.  (The screenshot does not therefore show the issue.)

This bug has been present in all AntlrWorks / Ubuntu AMD64 releases
for at least two years and since at least Ubuntu 8.10.  (I try
AntlrWorks every six months or so.)

Things I've checked:

chris at chris-linux-desktop:~$ sudo update-alternatives --config java
There are 3 choices for the alternative java (providing /usr/bin/java).

  Selection    Path                                      Priority   Status
------------------------------------------------------------
  0            /usr/lib/jvm/java-6-openjdk/jre/bin/java   1061      auto mode
  1            /usr/bin/gij-4.4                           1044      manual mode
  2            /usr/lib/jvm/java-6-openjdk/jre/bin/java   1061      manual mode
* 3            /usr/lib/jvm/java-6-sun/jre/bin/java       63        manual mode

chris at chris-linux-desktop:~$ cat /etc/lsb-release
DISTRIB_ID=Ubuntu
DISTRIB_RELEASE=10.10
DISTRIB_CODENAME=maverick
DISTRIB_DESCRIPTION="Ubuntu 10.10"

chris at chris-linux-desktop:~$ ls -lA antlrworks-1.4.3.jar
-rw-r--r-- 1 chris chris 3588307 2011-10-04 08:03 antlrworks-1.4.3.jar

chris at chris-linux-desktop:~$ java -version
java version "1.6.0_26"
Java(TM) SE Runtime Environment (build 1.6.0_26-b03)
Java HotSpot(TM) 64-Bit Server VM (build 20.1-b02, mixed mode)


Is anyone on this list successfully using AntlrWorks with Ubuntu AMD64?

Who is the administrator who I contact to get an account to submit a
bug?  http://www.antlr.org/jira/login.jsp?os_destination=%2Fbrowse%2FANTLR

Thanks,

Chris.
-------------- next part --------------
A non-text attachment was scrubbed...
Name: antlrworksbug.png
Type: image/png
Size: 44711 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20111004/764abaa7/attachment.png 

From Norman at dunbar-it.co.uk  Tue Oct  4 00:52:49 2011
From: Norman at dunbar-it.co.uk (Norman Dunbar)
Date: Tue, 04 Oct 2011 08:52:49 +0100
Subject: [antlr-interest] Text focus bug in ANLTR works on Ubuntu make
 it	unusable.
In-Reply-To: <CADZktKabnUfjRuBRJi+gbbmi5T_srwVvn6GMQXQudHEYRu4qMg@mail.gmail.com>
References: <CADZktKabnUfjRuBRJi+gbbmi5T_srwVvn6GMQXQudHEYRu4qMg@mail.gmail.com>
Message-ID: <4E8ABB51.60202@dunbar-it.co.uk>

Morning Chris,

> I've been interested in looking at ANTLR for several years.
I've only just discovered it. I'm planning (to bite off more than I can 
chew no doubt) a little language all of my own - soon!

> There is a UI bug which prevents the foreground window's widgets from
> gaining focus when you click on them.
I'm afraid that I don't see this bug in OpenSuse 11.4 64 bit.

 >> ...


> Things I've checked:
>
> * 3            /usr/lib/jvm/java-6-sun/jre/bin/java       63        manual mode

I'm on OpenJDK at the moment - something I installed must have changed 
it, I normally have the Sun Java as my selection. (I think Chrome 
changed it if I remember correctly - I'll have to change it back soon.)

 >> ...

> chris at chris-linux-desktop:~$ ls -lA antlrworks-1.4.3.jar
> -rw-r--r-- 1 chris chris 3588307 2011-10-04 08:03 antlrworks-1.4.3.jar
Same as mine.

> chris at chris-linux-desktop:~$ java -version
> java version "1.6.0_26"
> Java(TM) SE Runtime Environment (build 1.6.0_26-b03)
> Java HotSpot(TM) 64-Bit Server VM (build 20.1-b02, mixed mode)
I have this:

norman at hubble:~> java -version
java version "1.6.0_22"
OpenJDK Runtime Environment (IcedTea6 1.10.2) (suse-4.3.1-x86_64)
OpenJDK 64-Bit Server VM (build 20.0-b11, mixed mode)

> Is anyone on this list successfully using AntlrWorks with Ubuntu AMD64?
No, sorry, not on Ubuntu. I can happily use the foreground text fields 
etc when I click in them. I'm afraid I don't see your bug.

Sorry I can't really help you here, it might be an Ubuntu problem? It 
certainly isn't showing up on OpenSuse.


Good luck.


Cheers,
Norm.

-- 
Norman Dunbar
Dunbar IT Consultants Ltd

Registered address:
Thorpe House
61 Richardshaw Lane
Pudsey
West Yorkshire
United Kingdom
LS28 7EL

Company Number: 05132767

From nvlassopoulos at gmail.com  Tue Oct  4 04:02:04 2011
From: nvlassopoulos at gmail.com (Nick Vlassopoulos)
Date: Tue, 4 Oct 2011 14:02:04 +0300
Subject: [antlr-interest] Text focus bug in ANLTR works on Ubuntu make
	it unusable.
In-Reply-To: <CADZktKabnUfjRuBRJi+gbbmi5T_srwVvn6GMQXQudHEYRu4qMg@mail.gmail.com>
References: <CADZktKabnUfjRuBRJi+gbbmi5T_srwVvn6GMQXQudHEYRu4qMg@mail.gmail.com>
Message-ID: <CACtpDSiqqiDU5YYsXm3H5N3iGfiMHRQpiX70f6_B-2zEOVuXBQ@mail.gmail.com>

Hi Chris,

There is a UI bug which prevents the foreground window's widgets from
> gaining focus when you click on them.  The text cursor remains in the
> background window, even when the foreground window is active and I
> click in the Grammar Name widget.
>

Yes, that's the case for me as well (also Ubuntu). Nevertheless, you can
press "OK", antlrworks will complain about the empty name, and then you
can focus on the window (at least up to version 1.4.2).

Cheers,

Nikos

From cmsdew at gmail.com  Tue Oct  4 05:24:23 2011
From: cmsdew at gmail.com (Chris Dew)
Date: Tue, 4 Oct 2011 13:24:23 +0100
Subject: [antlr-interest] Text focus bug in ANLTR works on Ubuntu make
	it unusable.
In-Reply-To: <1317727528.2202.0@pc-stefanm>
References: <CADZktKabnUfjRuBRJi+gbbmi5T_srwVvn6GMQXQudHEYRu4qMg@mail.gmail.com>
	<1317727528.2202.0@pc-stefanm>
Message-ID: <CADZktKYwDsg8AK+e7bsYPAS2hE4A2iaEqFQC0KzyEgArz+CNJg@mail.gmail.com>

Hi Stefan,

That's solved it.  I should have (literally) asked years ago...

Many Thanks,

Chris.

On 4 October 2011 12:25, Stefan M?tje (d)
<Stefan.Maetje at esd-electronics.com> wrote:
> Am 04.10.2011 09:40:30 schrieb(en) Chris Dew:
>> Hi Everyone,
>>
>> I've been interested in looking at ANTLR for several years.
>>
>> There is a UI bug which prevents the foreground window's widgets from
>> gaining focus when you click on them. ?The text cursor remains in the
>> background window, even when the foreground window is active and I
>> click in the Grammar Name widget.
>
> Hi,
>
> I'm on an Ubuntu Lucid (10.04.3) 32-bit and have the same behaviour. But it
> happens ONLY with the "File->New...->""New grammar wizard".
>
> I'm using Sun java version:
>
> $ java -version
> java version "1.6.0_26"
> Java(TM) SE Runtime Environment (build 1.6.0_26-b03)
> Java HotSpot(TM) Client VM (build 20.1-b02, mixed mode, sharing)
>
>
>> The most ironic twist is that if you use the GIMPs screenshot facility
>> to get an image of the window, it will give focus to the foreground
>> window's widget. ?Using GIMP screenshot for widget focus is not a
>> usable solution. ?(The screenshot does not therefore show the issue.)
>
> I don't know if its the GIMP screenshot tool, I'm using the
> "Applications->Accessories->Screenshot" menu (Don't know the exact names cause
> I'm on a german system). But I have the same behaviour.
>
>> Is anyone on this list successfully using AntlrWorks with Ubuntu AMD64?
>
> I'm using a simple workaround, which is feasible because only the "New grammar
> wizard" dialog box is affected. Here it comes:
>
> Use "File->New..." to start the "New grammar wizard". The dialog box opens.
> Click the OK button. An error message box "Please enter a grammar name." shows
> up, acknowledge it with its OK button. After that you may click into the
> "Grammar Name" input box and will get successfully the input focus there.
>
> Best regards,
> ? ? ? ?Stefan
>
> BTW.: Having read the response of Norman Dunbar on this issue I suspect it is
> a problem with the window manager under Ubuntu Gnome. Did you try Kubuntu aka.
> the KDE interface?
>
>
>
>

From jimi at temporal-wave.com  Tue Oct  4 10:02:44 2011
From: jimi at temporal-wave.com (Jim Idle)
Date: Tue, 4 Oct 2011 10:02:44 -0700
Subject: [antlr-interest] Text focus bug in ANLTR works on Ubuntu make
	it unusable.
In-Reply-To: <CADZktKabnUfjRuBRJi+gbbmi5T_srwVvn6GMQXQudHEYRu4qMg@mail.gmail.com>
References: <CADZktKabnUfjRuBRJi+gbbmi5T_srwVvn6GMQXQudHEYRu4qMg@mail.gmail.com>
Message-ID: <9234d203f45a406e1234aaea9ed0820b@mail.gmail.com>

I would change from Ubuntu, but definitely change to the Sun JRE as I have
always found openjdk to be problematic.

Jim

> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of Chris Dew
> Sent: Tuesday, October 04, 2011 12:41 AM
> To: antlr-interest at antlr.org
> Subject: [antlr-interest] Text focus bug in ANLTR works on Ubuntu make
> it unusable.
>
> Hi Everyone,
>
> I've been interested in looking at ANTLR for several years.
>
> There is a UI bug which prevents the foreground window's widgets from
> gaining focus when you click on them.  The text cursor remains in the
> background window, even when the foreground window is active and I
> click in the Grammar Name widget.
>
> The most ironic twist is that if you use the GIMPs screenshot facility
> to get an image of the window, it will give focus to the foreground
> window's widget.  Using GIMP screenshot for widget focus is not a
> usable solution.  (The screenshot does not therefore show the issue.)
>
> This bug has been present in all AntlrWorks / Ubuntu AMD64 releases for
> at least two years and since at least Ubuntu 8.10.  (I try AntlrWorks
> every six months or so.)
>
> Things I've checked:
>
> chris at chris-linux-desktop:~$ sudo update-alternatives --config java
> There are 3 choices for the alternative java (providing /usr/bin/java).
>
>   Selection    Path                                      Priority
> Status
> ------------------------------------------------------------
>   0            /usr/lib/jvm/java-6-openjdk/jre/bin/java   1061
> auto mode
>   1            /usr/bin/gij-4.4                           1044
> manual mode
>   2            /usr/lib/jvm/java-6-openjdk/jre/bin/java   1061
> manual mode
> * 3            /usr/lib/jvm/java-6-sun/jre/bin/java       63
> manual mode
>
> chris at chris-linux-desktop:~$ cat /etc/lsb-release DISTRIB_ID=Ubuntu
> DISTRIB_RELEASE=10.10
> DISTRIB_CODENAME=maverick
> DISTRIB_DESCRIPTION="Ubuntu 10.10"
>
> chris at chris-linux-desktop:~$ ls -lA antlrworks-1.4.3.jar
> -rw-r--r-- 1 chris chris 3588307 2011-10-04 08:03 antlrworks-1.4.3.jar
>
> chris at chris-linux-desktop:~$ java -version java version "1.6.0_26"
> Java(TM) SE Runtime Environment (build 1.6.0_26-b03) Java HotSpot(TM)
> 64-Bit Server VM (build 20.1-b02, mixed mode)
>
>
> Is anyone on this list successfully using AntlrWorks with Ubuntu AMD64?
>
> Who is the administrator who I contact to get an account to submit a
> bug?
> http://www.antlr.org/jira/login.jsp?os_destination=%2Fbrowse%2FANTLR
>
> Thanks,
>
> Chris.

From WeikEngOff at aol.com  Tue Oct  4 10:04:49 2011
From: WeikEngOff at aol.com (Udo Weik)
Date: Tue, 04 Oct 2011 19:04:49 +0200
Subject: [antlr-interest] Jim Idle: C-Runtime and C++Builder,
 E2342 Type mismatch in parameter
In-Reply-To: <c6eeb9d93977b80bb75a240dbd423d85@mail.gmail.com>
References: <4E86BF8F.1020205@aol.com>
	<c6eeb9d93977b80bb75a240dbd423d85@mail.gmail.com>
Message-ID: <4E8B3CB1.60103@aol.com>

Hello Jim,

I was able by using the prepocessor macro expansion to find at least the location
of the problem
   FOLLOWPUSH(FOLLOW_subtype_indication_in_access_type_definition730)
which expands to
   ctx->pParser->rec->state->following->push( ctx->pParser->rec->state->following,
                                              ((void *)(&(FOLLOW_subtype_indication_in_access_type_definition730))),
                                              99 ) ;
The problem is the value 99, which should be of type
   void (ANTLR3_CDECL *freeptr)(void *))
according to antlr3collections.h, line 211:
/*
ANTLR3_STACK_struct Struct Reference

00199 typedef struct  ANTLR3_STACK_struct
00200 {
00203     pANTLR3_VECTOR  vector;
00204
00207     void *          top;
00208     void                        (*free) (struct ANTLR3_STACK_struct * stack);
00209     void *                      (*pop)  (struct ANTLR3_STACK_struct * stack);
00210     void *                      (*get)  (struct ANTLR3_STACK_struct * stack, ANTLR3_INTKEY key);
00211     ANTLR3_BOOLEAN  (*push)     (struct ANTLR3_STACK_struct * stack, void * element, void (ANTLR3_CDECL *freeptr)(void *));
00212     ANTLR3_UINT32   (*size)     (struct ANTLR3_STACK_struct * stack);
00213     void *                      (*peek) (struct ANTLR3_STACK_struct * stack);
00214
00215 }
00216     ANTLR3_STACK;
*/

Can you be so kind and explain me the purpose of 99 (and why is it just an
int) and whether there is a more or less corresponding functionallity for
the ANTLR3_STACK_struct in ANTLR (Java sources).

Many thanks and greetings
Udo


> I don't really know what you are trying to do or what compiler you are
> using etc, but remember this is C code not C++ code so if you turn on all
> the warnings in the C++ compiler then you may get the odd warning. But
> without seeing all the code, I can't guess where that warning is. It isn't
> the FOLLOWPUSH macro though. It looks more likely that you are not
> including the correct headers and so the prototype is defaulting to int.
>
> As for tabs vs space... well it is generated code. You could always untab
> it using any one of a thousand tools, or modify the code generation
> template and remake ANTLR.
>
> I don't know anything about C__ builder, but it seems to be more of a
> hindrance than a help?
>
> Jim
>
>> -----Original Message-----
>> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
>> bounces at antlr.org] On Behalf Of Udo Weik
>> Sent: Saturday, October 01, 2011 12:22 AM
>> To: Antlr-Interest Antlr.Org
>> Subject: [antlr-interest] Jim Idle: C-Runtime and C++Builder, E2342
>> Type mismatch in parameter
>>
>> Hello Jim,
>>
>> I'm getting some
>>     E2342 Type mismatch in parameter 'freeptr' (wanted 'void (*)(void
>> *)', got 'int') errors in code lines like
>>     FOLLOWPUSH(FOLLOW_subtype_indication_in_access_type_definition730)
>> ); Any hint?
>>
>>
>> And in the following functions an analog problem
>>     E2342 Type mismatch in parameter 'state' (wanted
>> 'ANTLR3_RECOGNIZER_SHARED_STATE_struct *', got 'int')I I just declared
>> state and initialized it with NULL:
>>
>> ANTLR3_API pXYZLexer XYZLexerNew( pANTLR3_INPUT_STREAM instream ) {
>>     pANTLR3_RECOGNIZER_SHARED_STATE state ; // UW
>>     state = NULL ; // UW
>>
>>     // See if we can create a new lexer with the standard constructor
>>     //
>>     // UW  return XYZLexerNewSSD(instream, NULL);
>>     return XYZLexerNewSSD(instream, state); // UW }
>>
>> Same problem with
>> ANTLR3_API pXYZParser XYZParserNew( pANTLR3_COMMON_TOKEN_STREAM
>> instream ) {
>>     pANTLR3_RECOGNIZER_SHARED_STATE state ; // UW
>>     state = NULL ; // UW
>>
>>     // See if we can create a new parser with the standard constructor
>>     //
>> // UW  return XYZParserNewSSD(instream, NULL);
>>     return XYZParserNewSSD(instream, state); // UW }
>>
>>
>> Is it in any way possible to avoid tabs in the generated code?
>> I would prefer two spaces for one tab.
>>
>>
>> Many thanks and greetings
>> Udo
>>
>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
>> email-address
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address


From jimi at temporal-wave.com  Tue Oct  4 10:12:46 2011
From: jimi at temporal-wave.com (Jim Idle)
Date: Tue, 4 Oct 2011 10:12:46 -0700
Subject: [antlr-interest] Jim Idle: C-Runtime and C++Builder,
 E2342 Type mismatch in parameter
In-Reply-To: <4E8B3CB1.60103@aol.com>
References: <4E86BF8F.1020205@aol.com>	<c6eeb9d93977b80bb75a240dbd423d85@mail.gmail.com>
	<4E8B3CB1.60103@aol.com>
Message-ID: <df19c41b39d325941639bca13a8d456a@mail.gmail.com>

It sounds more to me like there is something in the pre-processor that has
redefined whatever should really be there. You should trace through the
actual #defines to find out what.

Jim

> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of Udo Weik
> Sent: Tuesday, October 04, 2011 10:05 AM
> To: Antlr-Interest Antlr.Org
> Subject: Re: [antlr-interest] Jim Idle: C-Runtime and C++Builder, E2342
> Type mismatch in parameter
>
> Hello Jim,
>
> I was able by using the prepocessor macro expansion to find at least
> the location of the problem
>    FOLLOWPUSH(FOLLOW_subtype_indication_in_access_type_definition730)
> which expands to
>    ctx->pParser->rec->state->following->push( ctx->pParser->rec->state-
> >following,
>                                               ((void
> *)(&(FOLLOW_subtype_indication_in_access_type_definition730))),
>                                               99 ) ; The problem is the
> value 99, which should be of type
>    void (ANTLR3_CDECL *freeptr)(void *)) according to
> antlr3collections.h, line 211:
> /*
> ANTLR3_STACK_struct Struct Reference
>
> 00199 typedef struct  ANTLR3_STACK_struct
> 00200 {
> 00203     pANTLR3_VECTOR  vector;
> 00204
> 00207     void *          top;
> 00208     void                        (*free) (struct
> ANTLR3_STACK_struct * stack);
> 00209     void *                      (*pop)  (struct
> ANTLR3_STACK_struct * stack);
> 00210     void *                      (*get)  (struct
> ANTLR3_STACK_struct * stack, ANTLR3_INTKEY key);
> 00211     ANTLR3_BOOLEAN  (*push)     (struct ANTLR3_STACK_struct *
> stack, void * element, void (ANTLR3_CDECL *freeptr)(void *));
> 00212     ANTLR3_UINT32   (*size)     (struct ANTLR3_STACK_struct *
> stack);
> 00213     void *                      (*peek) (struct
> ANTLR3_STACK_struct * stack);
> 00214
> 00215 }
> 00216     ANTLR3_STACK;
> */
>
> Can you be so kind and explain me the purpose of 99 (and why is it just
> an
> int) and whether there is a more or less corresponding functionallity
> for the ANTLR3_STACK_struct in ANTLR (Java sources).
>
> Many thanks and greetings
> Udo
>
>
> > I don't really know what you are trying to do or what compiler you
> are
> > using etc, but remember this is C code not C++ code so if you turn on
> > all the warnings in the C++ compiler then you may get the odd
> warning.
> > But without seeing all the code, I can't guess where that warning is.
> > It isn't the FOLLOWPUSH macro though. It looks more likely that you
> > are not including the correct headers and so the prototype is
> defaulting to int.
> >
> > As for tabs vs space... well it is generated code. You could always
> > untab it using any one of a thousand tools, or modify the code
> > generation template and remake ANTLR.
> >
> > I don't know anything about C__ builder, but it seems to be more of a
> > hindrance than a help?
> >
> > Jim
> >
> >> -----Original Message-----
> >> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> >> bounces at antlr.org] On Behalf Of Udo Weik
> >> Sent: Saturday, October 01, 2011 12:22 AM
> >> To: Antlr-Interest Antlr.Org
> >> Subject: [antlr-interest] Jim Idle: C-Runtime and C++Builder, E2342
> >> Type mismatch in parameter
> >>
> >> Hello Jim,
> >>
> >> I'm getting some
> >>     E2342 Type mismatch in parameter 'freeptr' (wanted 'void
> (*)(void
> >> *)', got 'int') errors in code lines like
> >>
> >> FOLLOWPUSH(FOLLOW_subtype_indication_in_access_type_definition730)
> >> ); Any hint?
> >>
> >>
> >> And in the following functions an analog problem
> >>     E2342 Type mismatch in parameter 'state' (wanted
> >> 'ANTLR3_RECOGNIZER_SHARED_STATE_struct *', got 'int')I I just
> >> declared state and initialized it with NULL:
> >>
> >> ANTLR3_API pXYZLexer XYZLexerNew( pANTLR3_INPUT_STREAM instream ) {
> >>     pANTLR3_RECOGNIZER_SHARED_STATE state ; // UW
> >>     state = NULL ; // UW
> >>
> >>     // See if we can create a new lexer with the standard
> constructor
> >>     //
> >>     // UW  return XYZLexerNewSSD(instream, NULL);
> >>     return XYZLexerNewSSD(instream, state); // UW }
> >>
> >> Same problem with
> >> ANTLR3_API pXYZParser XYZParserNew( pANTLR3_COMMON_TOKEN_STREAM
> >> instream ) {
> >>     pANTLR3_RECOGNIZER_SHARED_STATE state ; // UW
> >>     state = NULL ; // UW
> >>
> >>     // See if we can create a new parser with the standard
> constructor
> >>     //
> >> // UW  return XYZParserNewSSD(instream, NULL);
> >>     return XYZParserNewSSD(instream, state); // UW }
> >>
> >>
> >> Is it in any way possible to avoid tabs in the generated code?
> >> I would prefer two spaces for one tab.
> >>
> >>
> >> Many thanks and greetings
> >> Udo
> >>
> >> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> >> Unsubscribe:
> >> http://www.antlr.org/mailman/options/antlr-interest/your-
> >> email-address
> >
> > List: http://www.antlr.org/mailman/listinfo/antlr-interest
> > Unsubscribe:
> > http://www.antlr.org/mailman/options/antlr-interest/your-email-
> address
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
> email-address

From WeikEngOff at aol.com  Tue Oct  4 10:19:49 2011
From: WeikEngOff at aol.com (Udo Weik)
Date: Tue, 04 Oct 2011 19:19:49 +0200
Subject: [antlr-interest] Jim Idle: C-Runtime and C++Builder,
 E2342 Type mismatch in parameter
In-Reply-To: <df19c41b39d325941639bca13a8d456a@mail.gmail.com>
References: <4E86BF8F.1020205@aol.com>	<c6eeb9d93977b80bb75a240dbd423d85@mail.gmail.com>
	<4E8B3CB1.60103@aol.com>
	<df19c41b39d325941639bca13a8d456a@mail.gmail.com>
Message-ID: <4E8B4035.5040205@aol.com>

Hello Jim,

thanks for your fast anser.

> It sounds more to me like there is something in the pre-processor that has
> redefined whatever should really be there. You should trace through the
> actual #defines to find out what.

And what "should really be there"? Can you give me an example of an correct
call (expanded) to ->push( ... )?

Many thanks and greetings
Udo


>> -----Original Message-----
>> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
>> bounces at antlr.org] On Behalf Of Udo Weik
>> Sent: Tuesday, October 04, 2011 10:05 AM
>> To: Antlr-Interest Antlr.Org
>> Subject: Re: [antlr-interest] Jim Idle: C-Runtime and C++Builder, E2342
>> Type mismatch in parameter
>>
>> Hello Jim,
>>
>> I was able by using the prepocessor macro expansion to find at least
>> the location of the problem
>>     FOLLOWPUSH(FOLLOW_subtype_indication_in_access_type_definition730)
>> which expands to
>>     ctx->pParser->rec->state->following->push( ctx->pParser->rec->state-
>>> following,
>>                                                ((void
>> *)(&(FOLLOW_subtype_indication_in_access_type_definition730))),
>>                                                99 ) ; The problem is the
>> value 99, which should be of type
>>     void (ANTLR3_CDECL *freeptr)(void *)) according to
>> antlr3collections.h, line 211:
>> /*
>> ANTLR3_STACK_struct Struct Reference
>>
>> 00199 typedef struct  ANTLR3_STACK_struct
>> 00200 {
>> 00203     pANTLR3_VECTOR  vector;
>> 00204
>> 00207     void *          top;
>> 00208     void                        (*free) (struct
>> ANTLR3_STACK_struct * stack);
>> 00209     void *                      (*pop)  (struct
>> ANTLR3_STACK_struct * stack);
>> 00210     void *                      (*get)  (struct
>> ANTLR3_STACK_struct * stack, ANTLR3_INTKEY key);
>> 00211     ANTLR3_BOOLEAN  (*push)     (struct ANTLR3_STACK_struct *
>> stack, void * element, void (ANTLR3_CDECL *freeptr)(void *));
>> 00212     ANTLR3_UINT32   (*size)     (struct ANTLR3_STACK_struct *
>> stack);
>> 00213     void *                      (*peek) (struct
>> ANTLR3_STACK_struct * stack);
>> 00214
>> 00215 }
>> 00216     ANTLR3_STACK;
>> */
>>
>> Can you be so kind and explain me the purpose of 99 (and why is it just
>> an
>> int) and whether there is a more or less corresponding functionallity
>> for the ANTLR3_STACK_struct in ANTLR (Java sources).
>>
>> Many thanks and greetings
>> Udo
>>
>>
>>> I don't really know what you are trying to do or what compiler you
>> are
>>> using etc, but remember this is C code not C++ code so if you turn on
>>> all the warnings in the C++ compiler then you may get the odd
>> warning.
>>> But without seeing all the code, I can't guess where that warning is.
>>> It isn't the FOLLOWPUSH macro though. It looks more likely that you
>>> are not including the correct headers and so the prototype is
>> defaulting to int.
>>>
>>> As for tabs vs space... well it is generated code. You could always
>>> untab it using any one of a thousand tools, or modify the code
>>> generation template and remake ANTLR.
>>>
>>> I don't know anything about C__ builder, but it seems to be more of a
>>> hindrance than a help?
>>>
>>> Jim
>>>
>>>> -----Original Message-----
>>>> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
>>>> bounces at antlr.org] On Behalf Of Udo Weik
>>>> Sent: Saturday, October 01, 2011 12:22 AM
>>>> To: Antlr-Interest Antlr.Org
>>>> Subject: [antlr-interest] Jim Idle: C-Runtime and C++Builder, E2342
>>>> Type mismatch in parameter
>>>>
>>>> Hello Jim,
>>>>
>>>> I'm getting some
>>>>      E2342 Type mismatch in parameter 'freeptr' (wanted 'void
>> (*)(void
>>>> *)', got 'int') errors in code lines like
>>>>
>>>> FOLLOWPUSH(FOLLOW_subtype_indication_in_access_type_definition730)
>>>> ); Any hint?
>>>>
>>>>
>>>> And in the following functions an analog problem
>>>>      E2342 Type mismatch in parameter 'state' (wanted
>>>> 'ANTLR3_RECOGNIZER_SHARED_STATE_struct *', got 'int')I I just
>>>> declared state and initialized it with NULL:
>>>>
>>>> ANTLR3_API pXYZLexer XYZLexerNew( pANTLR3_INPUT_STREAM instream ) {
>>>>      pANTLR3_RECOGNIZER_SHARED_STATE state ; // UW
>>>>      state = NULL ; // UW
>>>>
>>>>      // See if we can create a new lexer with the standard
>> constructor
>>>>      //
>>>>      // UW  return XYZLexerNewSSD(instream, NULL);
>>>>      return XYZLexerNewSSD(instream, state); // UW }
>>>>
>>>> Same problem with
>>>> ANTLR3_API pXYZParser XYZParserNew( pANTLR3_COMMON_TOKEN_STREAM
>>>> instream ) {
>>>>      pANTLR3_RECOGNIZER_SHARED_STATE state ; // UW
>>>>      state = NULL ; // UW
>>>>
>>>>      // See if we can create a new parser with the standard
>> constructor
>>>>      //
>>>> // UW  return XYZParserNewSSD(instream, NULL);
>>>>      return XYZParserNewSSD(instream, state); // UW }
>>>>
>>>>
>>>> Is it in any way possible to avoid tabs in the generated code?
>>>> I would prefer two spaces for one tab.
>>>>
>>>>
>>>> Many thanks and greetings
>>>> Udo
>>>>
>>>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>>>> Unsubscribe:
>>>> http://www.antlr.org/mailman/options/antlr-interest/your-
>>>> email-address
>>>
>>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>>> Unsubscribe:
>>> http://www.antlr.org/mailman/options/antlr-interest/your-email-
>> address
>>
>>
>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
>> email-address
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address


From jimi at temporal-wave.com  Tue Oct  4 10:41:27 2011
From: jimi at temporal-wave.com (Jim Idle)
Date: Tue, 4 Oct 2011 10:41:27 -0700
Subject: [antlr-interest] Jim Idle: C-Runtime and C++Builder,
 E2342 Type mismatch in parameter
In-Reply-To: <4E8B4035.5040205@aol.com>
References: <4E86BF8F.1020205@aol.com>	<c6eeb9d93977b80bb75a240dbd423d85@mail.gmail.com>
	<4E8B3CB1.60103@aol.com>	<df19c41b39d325941639bca13a8d456a@mail.gmail.com>
	<4E8B4035.5040205@aol.com>
Message-ID: <b7ad8a156de20c9aed9258d7c15499b8@mail.gmail.com>

Find the #define of the macro in your source code, see if there is
anything else in there that is further expanded, such say NULL or free
etc.


Jim

> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of Udo Weik
> Sent: Tuesday, October 04, 2011 10:20 AM
> To: Antlr-Interest Antlr.Org
> Subject: Re: [antlr-interest] Jim Idle: C-Runtime and C++Builder, E2342
> Type mismatch in parameter
>
> Hello Jim,
>
> thanks for your fast anser.
>
> > It sounds more to me like there is something in the pre-processor
> that
> > has redefined whatever should really be there. You should trace
> > through the actual #defines to find out what.
>
> And what "should really be there"? Can you give me an example of an
> correct call (expanded) to ->push( ... )?
>
> Many thanks and greetings
> Udo
>
>
> >> -----Original Message-----
> >> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> >> bounces at antlr.org] On Behalf Of Udo Weik
> >> Sent: Tuesday, October 04, 2011 10:05 AM
> >> To: Antlr-Interest Antlr.Org
> >> Subject: Re: [antlr-interest] Jim Idle: C-Runtime and C++Builder,
> >> E2342 Type mismatch in parameter
> >>
> >> Hello Jim,
> >>
> >> I was able by using the prepocessor macro expansion to find at least
> >> the location of the problem
> >>
> >> FOLLOWPUSH(FOLLOW_subtype_indication_in_access_type_definition730)
> >> which expands to
> >>     ctx->pParser->rec->state->following->push(
> >> ctx->pParser->rec->state-
> >>> following,
> >>                                                ((void
> >> *)(&(FOLLOW_subtype_indication_in_access_type_definition730))),
> >>                                                99 ) ; The problem is
> >> the value 99, which should be of type
> >>     void (ANTLR3_CDECL *freeptr)(void *)) according to
> >> antlr3collections.h, line 211:
> >> /*
> >> ANTLR3_STACK_struct Struct Reference
> >>
> >> 00199 typedef struct  ANTLR3_STACK_struct
> >> 00200 {
> >> 00203     pANTLR3_VECTOR  vector;
> >> 00204
> >> 00207     void *          top;
> >> 00208     void                        (*free) (struct
> >> ANTLR3_STACK_struct * stack);
> >> 00209     void *                      (*pop)  (struct
> >> ANTLR3_STACK_struct * stack);
> >> 00210     void *                      (*get)  (struct
> >> ANTLR3_STACK_struct * stack, ANTLR3_INTKEY key);
> >> 00211     ANTLR3_BOOLEAN  (*push)     (struct ANTLR3_STACK_struct *
> >> stack, void * element, void (ANTLR3_CDECL *freeptr)(void *));
> >> 00212     ANTLR3_UINT32   (*size)     (struct ANTLR3_STACK_struct *
> >> stack);
> >> 00213     void *                      (*peek) (struct
> >> ANTLR3_STACK_struct * stack);
> >> 00214
> >> 00215 }
> >> 00216     ANTLR3_STACK;
> >> */
> >>
> >> Can you be so kind and explain me the purpose of 99 (and why is it
> >> just an
> >> int) and whether there is a more or less corresponding
> functionallity
> >> for the ANTLR3_STACK_struct in ANTLR (Java sources).
> >>
> >> Many thanks and greetings
> >> Udo
> >>
> >>
> >>> I don't really know what you are trying to do or what compiler you
> >> are
> >>> using etc, but remember this is C code not C++ code so if you turn
> >>> on all the warnings in the C++ compiler then you may get the odd
> >> warning.
> >>> But without seeing all the code, I can't guess where that warning
> is.
> >>> It isn't the FOLLOWPUSH macro though. It looks more likely that you
> >>> are not including the correct headers and so the prototype is
> >> defaulting to int.
> >>>
> >>> As for tabs vs space... well it is generated code. You could always
> >>> untab it using any one of a thousand tools, or modify the code
> >>> generation template and remake ANTLR.
> >>>
> >>> I don't know anything about C__ builder, but it seems to be more of
> >>> a hindrance than a help?
> >>>
> >>> Jim
> >>>
> >>>> -----Original Message-----
> >>>> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> >>>> bounces at antlr.org] On Behalf Of Udo Weik
> >>>> Sent: Saturday, October 01, 2011 12:22 AM
> >>>> To: Antlr-Interest Antlr.Org
> >>>> Subject: [antlr-interest] Jim Idle: C-Runtime and C++Builder,
> E2342
> >>>> Type mismatch in parameter
> >>>>
> >>>> Hello Jim,
> >>>>
> >>>> I'm getting some
> >>>>      E2342 Type mismatch in parameter 'freeptr' (wanted 'void
> >> (*)(void
> >>>> *)', got 'int') errors in code lines like
> >>>>
> >>>> FOLLOWPUSH(FOLLOW_subtype_indication_in_access_type_definition730)
> >>>> ); Any hint?
> >>>>
> >>>>
> >>>> And in the following functions an analog problem
> >>>>      E2342 Type mismatch in parameter 'state' (wanted
> >>>> 'ANTLR3_RECOGNIZER_SHARED_STATE_struct *', got 'int')I I just
> >>>> declared state and initialized it with NULL:
> >>>>
> >>>> ANTLR3_API pXYZLexer XYZLexerNew( pANTLR3_INPUT_STREAM instream )
> {
> >>>>      pANTLR3_RECOGNIZER_SHARED_STATE state ; // UW
> >>>>      state = NULL ; // UW
> >>>>
> >>>>      // See if we can create a new lexer with the standard
> >> constructor
> >>>>      //
> >>>>      // UW  return XYZLexerNewSSD(instream, NULL);
> >>>>      return XYZLexerNewSSD(instream, state); // UW }
> >>>>
> >>>> Same problem with
> >>>> ANTLR3_API pXYZParser XYZParserNew( pANTLR3_COMMON_TOKEN_STREAM
> >>>> instream ) {
> >>>>      pANTLR3_RECOGNIZER_SHARED_STATE state ; // UW
> >>>>      state = NULL ; // UW
> >>>>
> >>>>      // See if we can create a new parser with the standard
> >> constructor
> >>>>      //
> >>>> // UW  return XYZParserNewSSD(instream, NULL);
> >>>>      return XYZParserNewSSD(instream, state); // UW }
> >>>>
> >>>>
> >>>> Is it in any way possible to avoid tabs in the generated code?
> >>>> I would prefer two spaces for one tab.
> >>>>
> >>>>
> >>>> Many thanks and greetings
> >>>> Udo
> >>>>
> >>>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> >>>> Unsubscribe:
> >>>> http://www.antlr.org/mailman/options/antlr-interest/your-
> >>>> email-address
> >>>
> >>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> >>> Unsubscribe:
> >>> http://www.antlr.org/mailman/options/antlr-interest/your-email-
> >> address
> >>
> >>
> >> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> >> Unsubscribe:
> >> http://www.antlr.org/mailman/options/antlr-interest/your-
> >> email-address
> >
> > List: http://www.antlr.org/mailman/listinfo/antlr-interest
> > Unsubscribe:
> > http://www.antlr.org/mailman/options/antlr-interest/your-email-
> address
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
> email-address

From hashutosh at apache.org  Tue Oct  4 12:13:04 2011
From: hashutosh at apache.org (Ashutosh Chauhan)
Date: Tue, 4 Oct 2011 12:13:04 -0700
Subject: [antlr-interest] Different parse tree in 3.1 Vs 3.4
In-Reply-To: <cfe41a28ab05db679f5dba48cdc6548e@mail.gmail.com>
References: <CA+FBdFQkAZn-+N8+yh5WnPfu-47nFfDwXh9xi4QN_BjoCaSNbA@mail.gmail.com>
	<13a2b3eeec9aff7197d1d80caeeee255@mail.gmail.com>
	<CA+FBdFRQjHCrktPtRORd4pEHfdMb=G4v8FB9DwXMhcarmABkvQ@mail.gmail.com>
	<cfe41a28ab05db679f5dba48cdc6548e@mail.gmail.com>
Message-ID: <CA+FBdFT1QRvfDDO8vsrJ+LuqGx2_xTvJQDDUL6-eRY_nRxB0og@mail.gmail.com>

I think I have a reproducible bug report for this which illustrates
different behavior in 3.0.1 vs 3.4, where shall I report it ?
antlr.org/jirasays contact Administrator to request an account.

Thanks,
Ashutosh

On Fri, Sep 23, 2011 at 12:55, Jim Idle <jimi at temporal-wave.com> wrote:

> I am saying that you should clear up this stuff everywhere first though.
> Then your best bet is to generate the code with the -debug flag, build it
> and run it then debug remotely with ANTLRWorks. I also sometimes just use
> the Java debugger as the generated method names match the rules.
>
> jim
>
> > -----Original Message-----
> > From: Ashutosh Chauhan [mailto:hashutosh at apache.org]
> > Sent: Friday, September 23, 2011 12:50 PM
> > To: Jim Idle
> > Cc: antlr-interest at antlr.org
> > Subject: Re: [antlr-interest] Different parse tree in 3.1 Vs 3.4
> >
> > Hey Jim,
> >
> > Thanks for taking a look. I can see what you are saying, but as far as
> > I can see those productions will never be used in the test-case I am
> > having, so those are irrelevant for the problem at hand.
> >
> > Thanks,
> > Ashutosh
> >
> > On Fri, Sep 23, 2011 at 12:30, Jim Idle <jimi at temporal-wave.com> wrote:
> > > Try the following:
> > >
> > > 1) You have things like:
> > >
> > >    : KW_RESTRICT
> > >    -> ^(TOK_RESTRICT)
> > >
> > > Which are a little pointless - you could just use the existing parser
> > > token:
> > >
> > >    : KW_RESTRICT
> > >
> > > But writing a single token will not produce a node anyway.
> > >
> > > Next, you have things like this:
> > >
> > >    :
> > >      keyValueProperty (COMMA keyValueProperty)* -> ^(TOK_DBPROPLIST
> > > keyValueProperty+)
> > >    ;
> > >
> > > Which I think will need to be:
> > >
> > >    :
> > >      k+=keyValueProperty (COMMA k+=keyValueProperty)* ->
> > > ^(TOK_DBPROPLIST
> > > $k+)
> > >    ;
> > >
> > > Start with that and let's see where you get to.
> > >
> > > Jim
> > >
> > >> -----Original Message-----
> > >> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> > >> bounces at antlr.org] On Behalf Of Ashutosh Chauhan
> > >> Sent: Friday, September 23, 2011 10:59 AM
> > >> To: antlr-interest at antlr.org
> > >> Subject: [antlr-interest] Different parse tree in 3.1 Vs 3.4
> > >>
> > >> Hey,
> > >>
> > >> I work on Apache Hive project which was using Antlr 3.0.1 till now
> > >> and its working great. Thank you guys. Now I am trying to port it to
> > >> 3.4 and I see antlr returning incorrect parse tree in 3.4 which used
> > >> to be correct in 3.0.1. I tested with 3.1 and thats returning
> > correct
> > >> parse tree too. Grammar is defined here:
> > >>
> > >>
> > https://svn.apache.org/repos/asf/hive/trunk/ql/src/java/org/apache/ha
> > >> do
> > >> op/hive/ql/parse/Hive.g
> > >>
> > >> and test program is:
> > >>
> > >> insert overwrite table alter3 partition (pCol1='test_part:',
> > >> pcol2='test_part:') select col1 from alter3_src ;
> > >>
> > >> In 3.0.1 and 3.1 I get following parse tree which is correct
> > >> (nil(TOK_QUERY (TOK_FROM(TOK_TABREF
> > >> (TOK_TABNAME(alter3_src))))(TOK_INSERT
> > >>
> > (TOK_DESTINATION(TOK_TAB(TOK_TABNAME(alter3))(TOK_PARTSPEC(TOK_PARTVA
> > >> L(
> > >>
> > pCol1)('test_part:'))(TOK_PARTVAL(pcol2)('test_part:')))))(TOK_SELECT
> > >> (T
> > >> OK_SELEXPR(TOK_TABLE_OR_COL(col1))))))(null))
> > >>
> > >> whereas in 3.4 I get following parse tree which is incomplete and
> > >> thus incorrect (nil(TOK_QUERY (TOK_FROM (TOK_TABREF
> > >> (TOK_TABNAME(alter3_src))))(TOK_INSERT
> > >> (TOK_DESTINATION(TOK_TAB))(TOK_SELECT (TOK_SELEXPR
> > >>       (TOK_TABLE_OR_COL(col1))))))(<EOF>))
> > >>
> > >> Is there something I should keep in mind while trying to upgrade to
> > >> 3.4. I was not able to test with 3.2 or 3.3 because of a different
> > >> problem in ant plugin of antlr because of which I was not able to
> > >> build. It was failing following stacktrace:
> > >>
> > >> Exception in thread "main" java.lang.NoClassDefFoundError:
> > >> antlr/RecognitionException
> > >>      [java]   at org.antlr.Tool.getRootGrammar(Tool.java:551)
> > >>      [java]   at org.antlr.Tool.process(Tool.java:422)
> > >>      [java]   at org.antlr.Tool.main(Tool.java:91)
> > >>      [java] Caused by: java.lang.ClassNotFoundException:
> > >> antlr.RecognitionException
> > >>
> > >> I will be happy to provide any more information which will help
> > >> figure out this issue.
> > >>
> > >> Thanks for your help,
> > >> Ashutosh
> > >>
> > >> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> > >> Unsubscribe:
> > >> http://www.antlr.org/mailman/options/antlr-interest/your-
> > >> email-address
> > >
> > > List: http://www.antlr.org/mailman/listinfo/antlr-interest
> > > Unsubscribe:
> > > http://www.antlr.org/mailman/options/antlr-interest/your-email-
> > address
> > >
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>

From jimi at temporal-wave.com  Tue Oct  4 13:37:25 2011
From: jimi at temporal-wave.com (Jim Idle)
Date: Tue, 4 Oct 2011 13:37:25 -0700
Subject: [antlr-interest] Different parse tree in 3.1 Vs 3.4
In-Reply-To: <CA+FBdFT1QRvfDDO8vsrJ+LuqGx2_xTvJQDDUL6-eRY_nRxB0og@mail.gmail.com>
References: <CA+FBdFQkAZn-+N8+yh5WnPfu-47nFfDwXh9xi4QN_BjoCaSNbA@mail.gmail.com>
	<13a2b3eeec9aff7197d1d80caeeee255@mail.gmail.com>	<CA+FBdFRQjHCrktPtRORd4pEHfdMb=G4v8FB9DwXMhcarmABkvQ@mail.gmail.com>
	<cfe41a28ab05db679f5dba48cdc6548e@mail.gmail.com>
	<CA+FBdFT1QRvfDDO8vsrJ+LuqGx2_xTvJQDDUL6-eRY_nRxB0og@mail.gmail.com>
Message-ID: <d0b1141abd7f19f511cd0732e8cf1fe1@mail.gmail.com>

Just post it here - it will get a JIRA if it is deemed to be a bug.

Jim

> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of Ashutosh Chauhan
> Sent: Tuesday, October 04, 2011 12:13 PM
> To: antlr-interest at antlr.org
> Subject: Re: [antlr-interest] Different parse tree in 3.1 Vs 3.4
>
> I think I have a reproducible bug report for this which illustrates
> different behavior in 3.0.1 vs 3.4, where shall I report it ?
> antlr.org/jirasays contact Administrator to request an account.
>
> Thanks,
> Ashutosh
>
> On Fri, Sep 23, 2011 at 12:55, Jim Idle <jimi at temporal-wave.com> wrote:
>
> > I am saying that you should clear up this stuff everywhere first
> though.
> > Then your best bet is to generate the code with the -debug flag,
> build
> > it and run it then debug remotely with ANTLRWorks. I also sometimes
> > just use the Java debugger as the generated method names match the
> rules.
> >
> > jim
> >
> > > -----Original Message-----
> > > From: Ashutosh Chauhan [mailto:hashutosh at apache.org]
> > > Sent: Friday, September 23, 2011 12:50 PM
> > > To: Jim Idle
> > > Cc: antlr-interest at antlr.org
> > > Subject: Re: [antlr-interest] Different parse tree in 3.1 Vs 3.4
> > >
> > > Hey Jim,
> > >
> > > Thanks for taking a look. I can see what you are saying, but as far
> > > as I can see those productions will never be used in the test-case
> I
> > > am having, so those are irrelevant for the problem at hand.
> > >
> > > Thanks,
> > > Ashutosh
> > >
> > > On Fri, Sep 23, 2011 at 12:30, Jim Idle <jimi at temporal-wave.com>
> wrote:
> > > > Try the following:
> > > >
> > > > 1) You have things like:
> > > >
> > > >    : KW_RESTRICT
> > > >    -> ^(TOK_RESTRICT)
> > > >
> > > > Which are a little pointless - you could just use the existing
> > > > parser
> > > > token:
> > > >
> > > >    : KW_RESTRICT
> > > >
> > > > But writing a single token will not produce a node anyway.
> > > >
> > > > Next, you have things like this:
> > > >
> > > >    :
> > > >      keyValueProperty (COMMA keyValueProperty)* ->
> > > > ^(TOK_DBPROPLIST
> > > > keyValueProperty+)
> > > >    ;
> > > >
> > > > Which I think will need to be:
> > > >
> > > >    :
> > > >      k+=keyValueProperty (COMMA k+=keyValueProperty)* ->
> > > > ^(TOK_DBPROPLIST
> > > > $k+)
> > > >    ;
> > > >
> > > > Start with that and let's see where you get to.
> > > >
> > > > Jim
> > > >
> > > >> -----Original Message-----
> > > >> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> > > >> bounces at antlr.org] On Behalf Of Ashutosh Chauhan
> > > >> Sent: Friday, September 23, 2011 10:59 AM
> > > >> To: antlr-interest at antlr.org
> > > >> Subject: [antlr-interest] Different parse tree in 3.1 Vs 3.4
> > > >>
> > > >> Hey,
> > > >>
> > > >> I work on Apache Hive project which was using Antlr 3.0.1 till
> > > >> now and its working great. Thank you guys. Now I am trying to
> > > >> port it to
> > > >> 3.4 and I see antlr returning incorrect parse tree in 3.4 which
> > > >> used to be correct in 3.0.1. I tested with 3.1 and thats
> > > >> returning
> > > correct
> > > >> parse tree too. Grammar is defined here:
> > > >>
> > > >>
> > >
> https://svn.apache.org/repos/asf/hive/trunk/ql/src/java/org/apache/h
> > > a
> > > >> do
> > > >> op/hive/ql/parse/Hive.g
> > > >>
> > > >> and test program is:
> > > >>
> > > >> insert overwrite table alter3 partition (pCol1='test_part:',
> > > >> pcol2='test_part:') select col1 from alter3_src ;
> > > >>
> > > >> In 3.0.1 and 3.1 I get following parse tree which is correct
> > > >> (nil(TOK_QUERY (TOK_FROM(TOK_TABREF
> > > >> (TOK_TABNAME(alter3_src))))(TOK_INSERT
> > > >>
> > >
> (TOK_DESTINATION(TOK_TAB(TOK_TABNAME(alter3))(TOK_PARTSPEC(TOK_PARTV
> > > A
> > > >> L(
> > > >>
> > >
> pCol1)('test_part:'))(TOK_PARTVAL(pcol2)('test_part:')))))(TOK_SELEC
> > > T
> > > >> (T
> > > >> OK_SELEXPR(TOK_TABLE_OR_COL(col1))))))(null))
> > > >>
> > > >> whereas in 3.4 I get following parse tree which is incomplete
> and
> > > >> thus incorrect (nil(TOK_QUERY (TOK_FROM (TOK_TABREF
> > > >> (TOK_TABNAME(alter3_src))))(TOK_INSERT
> > > >> (TOK_DESTINATION(TOK_TAB))(TOK_SELECT (TOK_SELEXPR
> > > >>       (TOK_TABLE_OR_COL(col1))))))(<EOF>))
> > > >>
> > > >> Is there something I should keep in mind while trying to upgrade
> > > >> to 3.4. I was not able to test with 3.2 or 3.3 because of a
> > > >> different problem in ant plugin of antlr because of which I was
> > > >> not able to build. It was failing following stacktrace:
> > > >>
> > > >> Exception in thread "main" java.lang.NoClassDefFoundError:
> > > >> antlr/RecognitionException
> > > >>      [java]   at org.antlr.Tool.getRootGrammar(Tool.java:551)
> > > >>      [java]   at org.antlr.Tool.process(Tool.java:422)
> > > >>      [java]   at org.antlr.Tool.main(Tool.java:91)
> > > >>      [java] Caused by: java.lang.ClassNotFoundException:
> > > >> antlr.RecognitionException
> > > >>
> > > >> I will be happy to provide any more information which will help
> > > >> figure out this issue.
> > > >>
> > > >> Thanks for your help,
> > > >> Ashutosh
> > > >>
> > > >> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> > > >> Unsubscribe:
> > > >> http://www.antlr.org/mailman/options/antlr-interest/your-
> > > >> email-address
> > > >
> > > > List: http://www.antlr.org/mailman/listinfo/antlr-interest
> > > > Unsubscribe:
> > > > http://www.antlr.org/mailman/options/antlr-interest/your-email-
> > > address
> > > >
> >
> > List: http://www.antlr.org/mailman/listinfo/antlr-interest
> > Unsubscribe:
> > http://www.antlr.org/mailman/options/antlr-interest/your-email-
> address
> >
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
> email-address

From WeikEngOff at aol.com  Tue Oct  4 14:23:26 2011
From: WeikEngOff at aol.com (Udo Weik)
Date: Tue, 04 Oct 2011 23:23:26 +0200
Subject: [antlr-interest] Jim Idle: C-Runtime and C++Builder,
 E2342 Type mismatch in parameter
In-Reply-To: <b7ad8a156de20c9aed9258d7c15499b8@mail.gmail.com>
References: <4E86BF8F.1020205@aol.com>	<c6eeb9d93977b80bb75a240dbd423d85@mail.gmail.com>
	<4E8B3CB1.60103@aol.com>	<df19c41b39d325941639bca13a8d456a@mail.gmail.com>
	<4E8B4035.5040205@aol.com>
	<b7ad8a156de20c9aed9258d7c15499b8@mail.gmail.com>
Message-ID: <4E8B794E.8040104@aol.com>

Hello Jim,

> Find the #define of the macro in your source code, see if there is
> anything else in there that is further expanded, such say NULL or free
> etc.

grepping the result of the prepocessor macro expansion showed that
NULL is always 99. The reason is NULL in the tokens { ... }-section
in the grammar. That token gets the value 99 assigned:
   #define NULL 99
Is there any way to fix that in the C-Runtime directly without changing
the grammar?

Many thanks and greetings
Udo


>> -----Original Message-----
>> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
>> bounces at antlr.org] On Behalf Of Udo Weik
>> Sent: Tuesday, October 04, 2011 10:20 AM
>> To: Antlr-Interest Antlr.Org
>> Subject: Re: [antlr-interest] Jim Idle: C-Runtime and C++Builder, E2342
>> Type mismatch in parameter
>>
>> Hello Jim,
>>
>> thanks for your fast anser.
>>
>>> It sounds more to me like there is something in the pre-processor
>> that
>>> has redefined whatever should really be there. You should trace
>>> through the actual #defines to find out what.
>>
>> And what "should really be there"? Can you give me an example of an
>> correct call (expanded) to ->push( ... )?
>>
>> Many thanks and greetings
>> Udo
>>
>>
>>>> -----Original Message-----
>>>> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
>>>> bounces at antlr.org] On Behalf Of Udo Weik
>>>> Sent: Tuesday, October 04, 2011 10:05 AM
>>>> To: Antlr-Interest Antlr.Org
>>>> Subject: Re: [antlr-interest] Jim Idle: C-Runtime and C++Builder,
>>>> E2342 Type mismatch in parameter
>>>>
>>>> Hello Jim,
>>>>
>>>> I was able by using the prepocessor macro expansion to find at least
>>>> the location of the problem
>>>>
>>>> FOLLOWPUSH(FOLLOW_subtype_indication_in_access_type_definition730)
>>>> which expands to
>>>>      ctx->pParser->rec->state->following->push(
>>>> ctx->pParser->rec->state-
>>>>> following,
>>>>                                                 ((void
>>>> *)(&(FOLLOW_subtype_indication_in_access_type_definition730))),
>>>>                                                 99 ) ; The problem is
>>>> the value 99, which should be of type
>>>>      void (ANTLR3_CDECL *freeptr)(void *)) according to
>>>> antlr3collections.h, line 211:
>>>> /*
>>>> ANTLR3_STACK_struct Struct Reference
>>>>
>>>> 00199 typedef struct  ANTLR3_STACK_struct
>>>> 00200 {
>>>> 00203     pANTLR3_VECTOR  vector;
>>>> 00204
>>>> 00207     void *          top;
>>>> 00208     void                        (*free) (struct
>>>> ANTLR3_STACK_struct * stack);
>>>> 00209     void *                      (*pop)  (struct
>>>> ANTLR3_STACK_struct * stack);
>>>> 00210     void *                      (*get)  (struct
>>>> ANTLR3_STACK_struct * stack, ANTLR3_INTKEY key);
>>>> 00211     ANTLR3_BOOLEAN  (*push)     (struct ANTLR3_STACK_struct *
>>>> stack, void * element, void (ANTLR3_CDECL *freeptr)(void *));
>>>> 00212     ANTLR3_UINT32   (*size)     (struct ANTLR3_STACK_struct *
>>>> stack);
>>>> 00213     void *                      (*peek) (struct
>>>> ANTLR3_STACK_struct * stack);
>>>> 00214
>>>> 00215 }
>>>> 00216     ANTLR3_STACK;
>>>> */
>>>>
>>>> Can you be so kind and explain me the purpose of 99 (and why is it
>>>> just an
>>>> int) and whether there is a more or less corresponding
>> functionallity
>>>> for the ANTLR3_STACK_struct in ANTLR (Java sources).
>>>>
>>>> Many thanks and greetings
>>>> Udo
>>>>
>>>>
>>>>> I don't really know what you are trying to do or what compiler you
>>>> are
>>>>> using etc, but remember this is C code not C++ code so if you turn
>>>>> on all the warnings in the C++ compiler then you may get the odd
>>>> warning.
>>>>> But without seeing all the code, I can't guess where that warning
>> is.
>>>>> It isn't the FOLLOWPUSH macro though. It looks more likely that you
>>>>> are not including the correct headers and so the prototype is
>>>> defaulting to int.
>>>>>
>>>>> As for tabs vs space... well it is generated code. You could always
>>>>> untab it using any one of a thousand tools, or modify the code
>>>>> generation template and remake ANTLR.
>>>>>
>>>>> I don't know anything about C__ builder, but it seems to be more of
>>>>> a hindrance than a help?
>>>>>
>>>>> Jim
>>>>>
>>>>>> -----Original Message-----
>>>>>> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
>>>>>> bounces at antlr.org] On Behalf Of Udo Weik
>>>>>> Sent: Saturday, October 01, 2011 12:22 AM
>>>>>> To: Antlr-Interest Antlr.Org
>>>>>> Subject: [antlr-interest] Jim Idle: C-Runtime and C++Builder,
>> E2342
>>>>>> Type mismatch in parameter
>>>>>>
>>>>>> Hello Jim,
>>>>>>
>>>>>> I'm getting some
>>>>>>       E2342 Type mismatch in parameter 'freeptr' (wanted 'void
>>>> (*)(void
>>>>>> *)', got 'int') errors in code lines like
>>>>>>
>>>>>> FOLLOWPUSH(FOLLOW_subtype_indication_in_access_type_definition730)
>>>>>> ); Any hint?
>>>>>>
>>>>>>
>>>>>> And in the following functions an analog problem
>>>>>>       E2342 Type mismatch in parameter 'state' (wanted
>>>>>> 'ANTLR3_RECOGNIZER_SHARED_STATE_struct *', got 'int')I I just
>>>>>> declared state and initialized it with NULL:
>>>>>>
>>>>>> ANTLR3_API pXYZLexer XYZLexerNew( pANTLR3_INPUT_STREAM instream )
>> {
>>>>>>       pANTLR3_RECOGNIZER_SHARED_STATE state ; // UW
>>>>>>       state = NULL ; // UW
>>>>>>
>>>>>>       // See if we can create a new lexer with the standard
>>>> constructor
>>>>>>       //
>>>>>>       // UW  return XYZLexerNewSSD(instream, NULL);
>>>>>>       return XYZLexerNewSSD(instream, state); // UW }
>>>>>>
>>>>>> Same problem with
>>>>>> ANTLR3_API pXYZParser XYZParserNew( pANTLR3_COMMON_TOKEN_STREAM
>>>>>> instream ) {
>>>>>>       pANTLR3_RECOGNIZER_SHARED_STATE state ; // UW
>>>>>>       state = NULL ; // UW
>>>>>>
>>>>>>       // See if we can create a new parser with the standard
>>>> constructor
>>>>>>       //
>>>>>> // UW  return XYZParserNewSSD(instream, NULL);
>>>>>>       return XYZParserNewSSD(instream, state); // UW }
>>>>>>
>>>>>>
>>>>>> Is it in any way possible to avoid tabs in the generated code?
>>>>>> I would prefer two spaces for one tab.
>>>>>>
>>>>>>
>>>>>> Many thanks and greetings
>>>>>> Udo
>>>>>>
>>>>>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>>>>>> Unsubscribe:
>>>>>> http://www.antlr.org/mailman/options/antlr-interest/your-
>>>>>> email-address
>>>>>
>>>>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>>>>> Unsubscribe:
>>>>> http://www.antlr.org/mailman/options/antlr-interest/your-email-
>>>> address
>>>>
>>>>
>>>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>>>> Unsubscribe:
>>>> http://www.antlr.org/mailman/options/antlr-interest/your-
>>>> email-address
>>>
>>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>>> Unsubscribe:
>>> http://www.antlr.org/mailman/options/antlr-interest/your-email-
>> address
>>
>>
>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
>> email-address
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address


From jimi at temporal-wave.com  Tue Oct  4 14:37:55 2011
From: jimi at temporal-wave.com (Jim Idle)
Date: Tue, 4 Oct 2011 14:37:55 -0700
Subject: [antlr-interest] Jim Idle: C-Runtime and C++Builder,
 E2342 Type mismatch in parameter
In-Reply-To: <4E8B794E.8040104@aol.com>
References: <4E86BF8F.1020205@aol.com>	<c6eeb9d93977b80bb75a240dbd423d85@mail.gmail.com>
	<4E8B3CB1.60103@aol.com>	<df19c41b39d325941639bca13a8d456a@mail.gmail.com>
	<4E8B4035.5040205@aol.com>	<b7ad8a156de20c9aed9258d7c15499b8@mail.gmail.com>
	<4E8B794E.8040104@aol.com>
Message-ID: <c6d44379f38f000c831da6521c1a326a@mail.gmail.com>

This is a problem with your grammar (see lots of previous posts) - you
have a token that you have called NULL and you cannot name tokens with the
same name as reserved words. Instead of:

NULL : 'null';

I just use

KNULL : 'null' ;

Using the K to stand for keyword, but anything will do.


Jim

> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of Udo Weik
> Sent: Tuesday, October 04, 2011 2:23 PM
> To: antlr-interest at antlr.org
> Subject: Re: [antlr-interest] Jim Idle: C-Runtime and C++Builder, E2342
> Type mismatch in parameter
>
> Hello Jim,
>
> > Find the #define of the macro in your source code, see if there is
> > anything else in there that is further expanded, such say NULL or
> free
> > etc.
>
> grepping the result of the prepocessor macro expansion showed that NULL
> is always 99. The reason is NULL in the tokens { ... }-section in the
> grammar. That token gets the value 99 assigned:
>    #define NULL 99
> Is there any way to fix that in the C-Runtime directly without changing
> the grammar?
>
> Many thanks and greetings
> Udo
>
>
> >> -----Original Message-----
> >> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> >> bounces at antlr.org] On Behalf Of Udo Weik
> >> Sent: Tuesday, October 04, 2011 10:20 AM
> >> To: Antlr-Interest Antlr.Org
> >> Subject: Re: [antlr-interest] Jim Idle: C-Runtime and C++Builder,
> >> E2342 Type mismatch in parameter
> >>
> >> Hello Jim,
> >>
> >> thanks for your fast anser.
> >>
> >>> It sounds more to me like there is something in the pre-processor
> >> that
> >>> has redefined whatever should really be there. You should trace
> >>> through the actual #defines to find out what.
> >>
> >> And what "should really be there"? Can you give me an example of an
> >> correct call (expanded) to ->push( ... )?
> >>
> >> Many thanks and greetings
> >> Udo
> >>
> >>
> >>>> -----Original Message-----
> >>>> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> >>>> bounces at antlr.org] On Behalf Of Udo Weik
> >>>> Sent: Tuesday, October 04, 2011 10:05 AM
> >>>> To: Antlr-Interest Antlr.Org
> >>>> Subject: Re: [antlr-interest] Jim Idle: C-Runtime and C++Builder,
> >>>> E2342 Type mismatch in parameter
> >>>>
> >>>> Hello Jim,
> >>>>
> >>>> I was able by using the prepocessor macro expansion to find at
> >>>> least the location of the problem
> >>>>
> >>>> FOLLOWPUSH(FOLLOW_subtype_indication_in_access_type_definition730)
> >>>> which expands to
> >>>>      ctx->pParser->rec->state->following->push(
> >>>> ctx->pParser->rec->state-
> >>>>> following,
> >>>>                                                 ((void
> >>>> *)(&(FOLLOW_subtype_indication_in_access_type_definition730))),
> >>>>                                                 99 ) ; The problem
> >>>> is the value 99, which should be of type
> >>>>      void (ANTLR3_CDECL *freeptr)(void *)) according to
> >>>> antlr3collections.h, line 211:
> >>>> /*
> >>>> ANTLR3_STACK_struct Struct Reference
> >>>>
> >>>> 00199 typedef struct  ANTLR3_STACK_struct
> >>>> 00200 {
> >>>> 00203     pANTLR3_VECTOR  vector;
> >>>> 00204
> >>>> 00207     void *          top;
> >>>> 00208     void                        (*free) (struct
> >>>> ANTLR3_STACK_struct * stack);
> >>>> 00209     void *                      (*pop)  (struct
> >>>> ANTLR3_STACK_struct * stack);
> >>>> 00210     void *                      (*get)  (struct
> >>>> ANTLR3_STACK_struct * stack, ANTLR3_INTKEY key);
> >>>> 00211     ANTLR3_BOOLEAN  (*push)     (struct ANTLR3_STACK_struct
> *
> >>>> stack, void * element, void (ANTLR3_CDECL *freeptr)(void *));
> >>>> 00212     ANTLR3_UINT32   (*size)     (struct ANTLR3_STACK_struct
> *
> >>>> stack);
> >>>> 00213     void *                      (*peek) (struct
> >>>> ANTLR3_STACK_struct * stack);
> >>>> 00214
> >>>> 00215 }
> >>>> 00216     ANTLR3_STACK;
> >>>> */
> >>>>
> >>>> Can you be so kind and explain me the purpose of 99 (and why is it
> >>>> just an
> >>>> int) and whether there is a more or less corresponding
> >> functionallity
> >>>> for the ANTLR3_STACK_struct in ANTLR (Java sources).
> >>>>
> >>>> Many thanks and greetings
> >>>> Udo
> >>>>
> >>>>
> >>>>> I don't really know what you are trying to do or what compiler
> you
> >>>> are
> >>>>> using etc, but remember this is C code not C++ code so if you
> turn
> >>>>> on all the warnings in the C++ compiler then you may get the odd
> >>>> warning.
> >>>>> But without seeing all the code, I can't guess where that warning
> >> is.
> >>>>> It isn't the FOLLOWPUSH macro though. It looks more likely that
> >>>>> you are not including the correct headers and so the prototype is
> >>>> defaulting to int.
> >>>>>
> >>>>> As for tabs vs space... well it is generated code. You could
> >>>>> always untab it using any one of a thousand tools, or modify the
> >>>>> code generation template and remake ANTLR.
> >>>>>
> >>>>> I don't know anything about C__ builder, but it seems to be more
> >>>>> of a hindrance than a help?
> >>>>>
> >>>>> Jim
> >>>>>
> >>>>>> -----Original Message-----
> >>>>>> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> >>>>>> bounces at antlr.org] On Behalf Of Udo Weik
> >>>>>> Sent: Saturday, October 01, 2011 12:22 AM
> >>>>>> To: Antlr-Interest Antlr.Org
> >>>>>> Subject: [antlr-interest] Jim Idle: C-Runtime and C++Builder,
> >> E2342
> >>>>>> Type mismatch in parameter
> >>>>>>
> >>>>>> Hello Jim,
> >>>>>>
> >>>>>> I'm getting some
> >>>>>>       E2342 Type mismatch in parameter 'freeptr' (wanted 'void
> >>>> (*)(void
> >>>>>> *)', got 'int') errors in code lines like
> >>>>>>
> >>>>>>
> FOLLOWPUSH(FOLLOW_subtype_indication_in_access_type_definition730
> >>>>>> )
> >>>>>> ); Any hint?
> >>>>>>
> >>>>>>
> >>>>>> And in the following functions an analog problem
> >>>>>>       E2342 Type mismatch in parameter 'state' (wanted
> >>>>>> 'ANTLR3_RECOGNIZER_SHARED_STATE_struct *', got 'int')I I just
> >>>>>> declared state and initialized it with NULL:
> >>>>>>
> >>>>>> ANTLR3_API pXYZLexer XYZLexerNew( pANTLR3_INPUT_STREAM instream
> )
> >> {
> >>>>>>       pANTLR3_RECOGNIZER_SHARED_STATE state ; // UW
> >>>>>>       state = NULL ; // UW
> >>>>>>
> >>>>>>       // See if we can create a new lexer with the standard
> >>>> constructor
> >>>>>>       //
> >>>>>>       // UW  return XYZLexerNewSSD(instream, NULL);
> >>>>>>       return XYZLexerNewSSD(instream, state); // UW }
> >>>>>>
> >>>>>> Same problem with
> >>>>>> ANTLR3_API pXYZParser XYZParserNew( pANTLR3_COMMON_TOKEN_STREAM
> >>>>>> instream ) {
> >>>>>>       pANTLR3_RECOGNIZER_SHARED_STATE state ; // UW
> >>>>>>       state = NULL ; // UW
> >>>>>>
> >>>>>>       // See if we can create a new parser with the standard
> >>>> constructor
> >>>>>>       //
> >>>>>> // UW  return XYZParserNewSSD(instream, NULL);
> >>>>>>       return XYZParserNewSSD(instream, state); // UW }
> >>>>>>
> >>>>>>
> >>>>>> Is it in any way possible to avoid tabs in the generated code?
> >>>>>> I would prefer two spaces for one tab.
> >>>>>>
> >>>>>>
> >>>>>> Many thanks and greetings
> >>>>>> Udo
> >>>>>>
> >>>>>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> >>>>>> Unsubscribe:
> >>>>>> http://www.antlr.org/mailman/options/antlr-interest/your-
> >>>>>> email-address
> >>>>>
> >>>>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> >>>>> Unsubscribe:
> >>>>> http://www.antlr.org/mailman/options/antlr-interest/your-email-
> >>>> address
> >>>>
> >>>>
> >>>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> >>>> Unsubscribe:
> >>>> http://www.antlr.org/mailman/options/antlr-interest/your-
> >>>> email-address
> >>>
> >>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> >>> Unsubscribe:
> >>> http://www.antlr.org/mailman/options/antlr-interest/your-email-
> >> address
> >>
> >>
> >> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> >> Unsubscribe:
> >> http://www.antlr.org/mailman/options/antlr-interest/your-
> >> email-address
> >
> > List: http://www.antlr.org/mailman/listinfo/antlr-interest
> > Unsubscribe:
> > http://www.antlr.org/mailman/options/antlr-interest/your-email-
> address
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
> email-address

From ibre5041 at ibrezina.net  Wed Oct  5 03:02:10 2011
From: ibre5041 at ibrezina.net (Ivan Brezina)
Date: Wed, 05 Oct 2011 12:02:10 +0200
Subject: [antlr-interest] Jim Idle: C-Runtime and C++Builder,
	E2342	Type mismatch in parameter
In-Reply-To: <c6d44379f38f000c831da6521c1a326a@mail.gmail.com>
References: <4E86BF8F.1020205@aol.com>
	<c6eeb9d93977b80bb75a240dbd423d85@mail.gmail.com>
	<4E8B3CB1.60103@aol.com>
	<df19c41b39d325941639bca13a8d456a@mail.gmail.com>
	<4E8B4035.5040205@aol.com>
	<b7ad8a156de20c9aed9258d7c15499b8@mail.gmail.com>
	<4E8B794E.8040104@aol.com>
	<c6d44379f38f000c831da6521c1a326a@mail.gmail.com>
Message-ID: <20111005120210.f2af3e17vkg88scc@webmail.kamm.cz>

Hi
as this issue is quite common and is not easy to detect.
Could it be possible that in the new ANTLR release will
be those #defines replaced with some kind of enum?

thx Ivan


Quoting Jim Idle <jimi at temporal-wave.com>:

> This is a problem with your grammar (see lots of previous posts) - you
> have a token that you have called NULL and you cannot name tokens with the
> same name as reserved words. Instead of:
>
> NULL : 'null';
>
> I just use
>
> KNULL : 'null' ;
>
> Using the K to stand for keyword, but anything will do.
>
>
> Jim
>
>> -----Original Message-----
>> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
>> bounces at antlr.org] On Behalf Of Udo Weik
>> Sent: Tuesday, October 04, 2011 2:23 PM
>> To: antlr-interest at antlr.org
>> Subject: Re: [antlr-interest] Jim Idle: C-Runtime and C++Builder, E2342
>> Type mismatch in parameter
>>
>> Hello Jim,
>>
>> > Find the #define of the macro in your source code, see if there is
>> > anything else in there that is further expanded, such say NULL or
>> free
>> > etc.
>>
>> grepping the result of the prepocessor macro expansion showed that NULL
>> is always 99. The reason is NULL in the tokens { ... }-section in the
>> grammar. That token gets the value 99 assigned:
>>    #define NULL 99
>> Is there any way to fix that in the C-Runtime directly without changing
>> the grammar?
>>
>> Many thanks and greetings
>> Udo
>>
>>
>> >> -----Original Message-----
>> >> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
>> >> bounces at antlr.org] On Behalf Of Udo Weik
>> >> Sent: Tuesday, October 04, 2011 10:20 AM
>> >> To: Antlr-Interest Antlr.Org
>> >> Subject: Re: [antlr-interest] Jim Idle: C-Runtime and C++Builder,
>> >> E2342 Type mismatch in parameter
>> >>
>> >> Hello Jim,
>> >>
>> >> thanks for your fast anser.
>> >>
>> >>> It sounds more to me like there is something in the pre-processor
>> >> that
>> >>> has redefined whatever should really be there. You should trace
>> >>> through the actual #defines to find out what.
>> >>
>> >> And what "should really be there"? Can you give me an example of an
>> >> correct call (expanded) to ->push( ... )?
>> >>
>> >> Many thanks and greetings
>> >> Udo
>> >>
>> >>
>> >>>> -----Original Message-----
>> >>>> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
>> >>>> bounces at antlr.org] On Behalf Of Udo Weik
>> >>>> Sent: Tuesday, October 04, 2011 10:05 AM
>> >>>> To: Antlr-Interest Antlr.Org
>> >>>> Subject: Re: [antlr-interest] Jim Idle: C-Runtime and C++Builder,
>> >>>> E2342 Type mismatch in parameter
>> >>>>
>> >>>> Hello Jim,
>> >>>>
>> >>>> I was able by using the prepocessor macro expansion to find at
>> >>>> least the location of the problem
>> >>>>
>> >>>> FOLLOWPUSH(FOLLOW_subtype_indication_in_access_type_definition730)
>> >>>> which expands to
>> >>>>      ctx->pParser->rec->state->following->push(
>> >>>> ctx->pParser->rec->state-
>> >>>>> following,
>> >>>>                                                 ((void
>> >>>> *)(&(FOLLOW_subtype_indication_in_access_type_definition730))),
>> >>>>                                                 99 ) ; The problem
>> >>>> is the value 99, which should be of type
>> >>>>      void (ANTLR3_CDECL *freeptr)(void *)) according to
>> >>>> antlr3collections.h, line 211:
>> >>>> /*
>> >>>> ANTLR3_STACK_struct Struct Reference
>> >>>>
>> >>>> 00199 typedef struct  ANTLR3_STACK_struct
>> >>>> 00200 {
>> >>>> 00203     pANTLR3_VECTOR  vector;
>> >>>> 00204
>> >>>> 00207     void *          top;
>> >>>> 00208     void                        (*free) (struct
>> >>>> ANTLR3_STACK_struct * stack);
>> >>>> 00209     void *                      (*pop)  (struct
>> >>>> ANTLR3_STACK_struct * stack);
>> >>>> 00210     void *                      (*get)  (struct
>> >>>> ANTLR3_STACK_struct * stack, ANTLR3_INTKEY key);
>> >>>> 00211     ANTLR3_BOOLEAN  (*push)     (struct ANTLR3_STACK_struct
>> *
>> >>>> stack, void * element, void (ANTLR3_CDECL *freeptr)(void *));
>> >>>> 00212     ANTLR3_UINT32   (*size)     (struct ANTLR3_STACK_struct
>> *
>> >>>> stack);
>> >>>> 00213     void *                      (*peek) (struct
>> >>>> ANTLR3_STACK_struct * stack);
>> >>>> 00214
>> >>>> 00215 }
>> >>>> 00216     ANTLR3_STACK;
>> >>>> */
>> >>>>
>> >>>> Can you be so kind and explain me the purpose of 99 (and why is it
>> >>>> just an
>> >>>> int) and whether there is a more or less corresponding
>> >> functionallity
>> >>>> for the ANTLR3_STACK_struct in ANTLR (Java sources).
>> >>>>
>> >>>> Many thanks and greetings
>> >>>> Udo
>> >>>>
>> >>>>
>> >>>>> I don't really know what you are trying to do or what compiler
>> you
>> >>>> are
>> >>>>> using etc, but remember this is C code not C++ code so if you
>> turn
>> >>>>> on all the warnings in the C++ compiler then you may get the odd
>> >>>> warning.
>> >>>>> But without seeing all the code, I can't guess where that warning
>> >> is.
>> >>>>> It isn't the FOLLOWPUSH macro though. It looks more likely that
>> >>>>> you are not including the correct headers and so the prototype is
>> >>>> defaulting to int.
>> >>>>>
>> >>>>> As for tabs vs space... well it is generated code. You could
>> >>>>> always untab it using any one of a thousand tools, or modify the
>> >>>>> code generation template and remake ANTLR.
>> >>>>>
>> >>>>> I don't know anything about C__ builder, but it seems to be more
>> >>>>> of a hindrance than a help?
>> >>>>>
>> >>>>> Jim
>> >>>>>
>> >>>>>> -----Original Message-----
>> >>>>>> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
>> >>>>>> bounces at antlr.org] On Behalf Of Udo Weik
>> >>>>>> Sent: Saturday, October 01, 2011 12:22 AM
>> >>>>>> To: Antlr-Interest Antlr.Org
>> >>>>>> Subject: [antlr-interest] Jim Idle: C-Runtime and C++Builder,
>> >> E2342
>> >>>>>> Type mismatch in parameter
>> >>>>>>
>> >>>>>> Hello Jim,
>> >>>>>>
>> >>>>>> I'm getting some
>> >>>>>>       E2342 Type mismatch in parameter 'freeptr' (wanted 'void
>> >>>> (*)(void
>> >>>>>> *)', got 'int') errors in code lines like
>> >>>>>>
>> >>>>>>
>> FOLLOWPUSH(FOLLOW_subtype_indication_in_access_type_definition730
>> >>>>>> )
>> >>>>>> ); Any hint?
>> >>>>>>
>> >>>>>>
>> >>>>>> And in the following functions an analog problem
>> >>>>>>       E2342 Type mismatch in parameter 'state' (wanted
>> >>>>>> 'ANTLR3_RECOGNIZER_SHARED_STATE_struct *', got 'int')I I just
>> >>>>>> declared state and initialized it with NULL:
>> >>>>>>
>> >>>>>> ANTLR3_API pXYZLexer XYZLexerNew( pANTLR3_INPUT_STREAM instream
>> )
>> >> {
>> >>>>>>       pANTLR3_RECOGNIZER_SHARED_STATE state ; // UW
>> >>>>>>       state = NULL ; // UW
>> >>>>>>
>> >>>>>>       // See if we can create a new lexer with the standard
>> >>>> constructor
>> >>>>>>       //
>> >>>>>>       // UW  return XYZLexerNewSSD(instream, NULL);
>> >>>>>>       return XYZLexerNewSSD(instream, state); // UW }
>> >>>>>>
>> >>>>>> Same problem with
>> >>>>>> ANTLR3_API pXYZParser XYZParserNew( pANTLR3_COMMON_TOKEN_STREAM
>> >>>>>> instream ) {
>> >>>>>>       pANTLR3_RECOGNIZER_SHARED_STATE state ; // UW
>> >>>>>>       state = NULL ; // UW
>> >>>>>>
>> >>>>>>       // See if we can create a new parser with the standard
>> >>>> constructor
>> >>>>>>       //
>> >>>>>> // UW  return XYZParserNewSSD(instream, NULL);
>> >>>>>>       return XYZParserNewSSD(instream, state); // UW }
>> >>>>>>
>> >>>>>>
>> >>>>>> Is it in any way possible to avoid tabs in the generated code?
>> >>>>>> I would prefer two spaces for one tab.
>> >>>>>>
>> >>>>>>
>> >>>>>> Many thanks and greetings
>> >>>>>> Udo
>> >>>>>>
>> >>>>>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>> >>>>>> Unsubscribe:
>> >>>>>> http://www.antlr.org/mailman/options/antlr-interest/your-
>> >>>>>> email-address
>> >>>>>
>> >>>>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>> >>>>> Unsubscribe:
>> >>>>> http://www.antlr.org/mailman/options/antlr-interest/your-email-
>> >>>> address
>> >>>>
>> >>>>
>> >>>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>> >>>> Unsubscribe:
>> >>>> http://www.antlr.org/mailman/options/antlr-interest/your-
>> >>>> email-address
>> >>>
>> >>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>> >>> Unsubscribe:
>> >>> http://www.antlr.org/mailman/options/antlr-interest/your-email-
>> >> address
>> >>
>> >>
>> >> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>> >> Unsubscribe:
>> >> http://www.antlr.org/mailman/options/antlr-interest/your-
>> >> email-address
>> >
>> > List: http://www.antlr.org/mailman/listinfo/antlr-interest
>> > Unsubscribe:
>> > http://www.antlr.org/mailman/options/antlr-interest/your-email-
>> address
>>
>>
>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
>> email-address
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:   
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>



----------------------------------------------------------------
This message was sent using IMP, the Internet Messaging Program.


From WeikEngOff at aol.com  Wed Oct  5 03:28:31 2011
From: WeikEngOff at aol.com (Udo Weik)
Date: Wed, 05 Oct 2011 12:28:31 +0200
Subject: [antlr-interest] Jim Idle: C-Runtime and C++Builder,
 E2342	Type mismatch in parameter
In-Reply-To: <20111005120210.f2af3e17vkg88scc@webmail.kamm.cz>
References: <4E86BF8F.1020205@aol.com>
	<c6eeb9d93977b80bb75a240dbd423d85@mail.gmail.com>
	<4E8B3CB1.60103@aol.com>
	<df19c41b39d325941639bca13a8d456a@mail.gmail.com>
	<4E8B4035.5040205@aol.com>
	<b7ad8a156de20c9aed9258d7c15499b8@mail.gmail.com>
	<4E8B794E.8040104@aol.com>
	<c6d44379f38f000c831da6521c1a326a@mail.gmail.com>
	<20111005120210.f2af3e17vkg88scc@webmail.kamm.cz>
Message-ID: <4E8C314F.7030601@aol.com>

Hello Ivan,

> as this issue is quite common and is not easy to detect.
> Could it be possible that in the new ANTLR release will
> be those #defines replaced with some kind of enum?

thanks for your support. It wasn't my grammar, so problems
like this and a overall problematic target-IDE complicate
such problems additionally.
enums are of course much better to debug, my suggestion was
to add user-defined prefixes where appropriate (token names/
now #defines, lexer rules/now function names with 'm' as
prefix when I remember correcty and parser rules/now function
names without prefix (had a problem here, too: int).
And my opinion is that a grammar is a grammar, I can't track
for every target language whether a token/rule is a reserved
word or not.

Many thanks and greetings
Udo


> Quoting Jim Idle<jimi at temporal-wave.com>:
>
>> This is a problem with your grammar (see lots of previous posts) - you
>> have a token that you have called NULL and you cannot name tokens with the
>> same name as reserved words. Instead of:
>>
>> NULL : 'null';
>>
>> I just use
>>
>> KNULL : 'null' ;
>>
>> Using the K to stand for keyword, but anything will do.
>>
>>
>> Jim
>>
>>> -----Original Message-----
>>> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
>>> bounces at antlr.org] On Behalf Of Udo Weik
>>> Sent: Tuesday, October 04, 2011 2:23 PM
>>> To: antlr-interest at antlr.org
>>> Subject: Re: [antlr-interest] Jim Idle: C-Runtime and C++Builder, E2342
>>> Type mismatch in parameter
>>>
>>> Hello Jim,
>>>
>>>> Find the #define of the macro in your source code, see if there is
>>>> anything else in there that is further expanded, such say NULL or
>>> free
>>>> etc.
>>>
>>> grepping the result of the prepocessor macro expansion showed that NULL
>>> is always 99. The reason is NULL in the tokens { ... }-section in the
>>> grammar. That token gets the value 99 assigned:
>>>     #define NULL 99
>>> Is there any way to fix that in the C-Runtime directly without changing
>>> the grammar?
>>>
>>> Many thanks and greetings
>>> Udo
>>>
>>>
>>>>> -----Original Message-----
>>>>> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
>>>>> bounces at antlr.org] On Behalf Of Udo Weik
>>>>> Sent: Tuesday, October 04, 2011 10:20 AM
>>>>> To: Antlr-Interest Antlr.Org
>>>>> Subject: Re: [antlr-interest] Jim Idle: C-Runtime and C++Builder,
>>>>> E2342 Type mismatch in parameter
>>>>>
>>>>> Hello Jim,
>>>>>
>>>>> thanks for your fast anser.
>>>>>
>>>>>> It sounds more to me like there is something in the pre-processor
>>>>> that
>>>>>> has redefined whatever should really be there. You should trace
>>>>>> through the actual #defines to find out what.
>>>>>
>>>>> And what "should really be there"? Can you give me an example of an
>>>>> correct call (expanded) to ->push( ... )?
>>>>>
>>>>> Many thanks and greetings
>>>>> Udo
>>>>>
>>>>>
>>>>>>> -----Original Message-----
>>>>>>> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
>>>>>>> bounces at antlr.org] On Behalf Of Udo Weik
>>>>>>> Sent: Tuesday, October 04, 2011 10:05 AM
>>>>>>> To: Antlr-Interest Antlr.Org
>>>>>>> Subject: Re: [antlr-interest] Jim Idle: C-Runtime and C++Builder,
>>>>>>> E2342 Type mismatch in parameter
>>>>>>>
>>>>>>> Hello Jim,
>>>>>>>
>>>>>>> I was able by using the prepocessor macro expansion to find at
>>>>>>> least the location of the problem
>>>>>>>
>>>>>>> FOLLOWPUSH(FOLLOW_subtype_indication_in_access_type_definition730)
>>>>>>> which expands to
>>>>>>>       ctx->pParser->rec->state->following->push(
>>>>>>> ctx->pParser->rec->state-
>>>>>>>> following,
>>>>>>>                                                  ((void
>>>>>>> *)(&(FOLLOW_subtype_indication_in_access_type_definition730))),
>>>>>>>                                                  99 ) ; The problem
>>>>>>> is the value 99, which should be of type
>>>>>>>       void (ANTLR3_CDECL *freeptr)(void *)) according to
>>>>>>> antlr3collections.h, line 211:
>>>>>>> /*
>>>>>>> ANTLR3_STACK_struct Struct Reference
>>>>>>>
>>>>>>> 00199 typedef struct  ANTLR3_STACK_struct
>>>>>>> 00200 {
>>>>>>> 00203     pANTLR3_VECTOR  vector;
>>>>>>> 00204
>>>>>>> 00207     void *          top;
>>>>>>> 00208     void                        (*free) (struct
>>>>>>> ANTLR3_STACK_struct * stack);
>>>>>>> 00209     void *                      (*pop)  (struct
>>>>>>> ANTLR3_STACK_struct * stack);
>>>>>>> 00210     void *                      (*get)  (struct
>>>>>>> ANTLR3_STACK_struct * stack, ANTLR3_INTKEY key);
>>>>>>> 00211     ANTLR3_BOOLEAN  (*push)     (struct ANTLR3_STACK_struct
>>> *
>>>>>>> stack, void * element, void (ANTLR3_CDECL *freeptr)(void *));
>>>>>>> 00212     ANTLR3_UINT32   (*size)     (struct ANTLR3_STACK_struct
>>> *
>>>>>>> stack);
>>>>>>> 00213     void *                      (*peek) (struct
>>>>>>> ANTLR3_STACK_struct * stack);
>>>>>>> 00214
>>>>>>> 00215 }
>>>>>>> 00216     ANTLR3_STACK;
>>>>>>> */
>>>>>>>
>>>>>>> Can you be so kind and explain me the purpose of 99 (and why is it
>>>>>>> just an
>>>>>>> int) and whether there is a more or less corresponding
>>>>> functionallity
>>>>>>> for the ANTLR3_STACK_struct in ANTLR (Java sources).
>>>>>>>
>>>>>>> Many thanks and greetings
>>>>>>> Udo
>>>>>>>
>>>>>>>
>>>>>>>> I don't really know what you are trying to do or what compiler
>>> you
>>>>>>> are
>>>>>>>> using etc, but remember this is C code not C++ code so if you
>>> turn
>>>>>>>> on all the warnings in the C++ compiler then you may get the odd
>>>>>>> warning.
>>>>>>>> But without seeing all the code, I can't guess where that warning
>>>>> is.
>>>>>>>> It isn't the FOLLOWPUSH macro though. It looks more likely that
>>>>>>>> you are not including the correct headers and so the prototype is
>>>>>>> defaulting to int.
>>>>>>>>
>>>>>>>> As for tabs vs space... well it is generated code. You could
>>>>>>>> always untab it using any one of a thousand tools, or modify the
>>>>>>>> code generation template and remake ANTLR.
>>>>>>>>
>>>>>>>> I don't know anything about C__ builder, but it seems to be more
>>>>>>>> of a hindrance than a help?
>>>>>>>>
>>>>>>>> Jim
>>>>>>>>
>>>>>>>>> -----Original Message-----
>>>>>>>>> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
>>>>>>>>> bounces at antlr.org] On Behalf Of Udo Weik
>>>>>>>>> Sent: Saturday, October 01, 2011 12:22 AM
>>>>>>>>> To: Antlr-Interest Antlr.Org
>>>>>>>>> Subject: [antlr-interest] Jim Idle: C-Runtime and C++Builder,
>>>>> E2342
>>>>>>>>> Type mismatch in parameter
>>>>>>>>>
>>>>>>>>> Hello Jim,
>>>>>>>>>
>>>>>>>>> I'm getting some
>>>>>>>>>        E2342 Type mismatch in parameter 'freeptr' (wanted 'void
>>>>>>> (*)(void
>>>>>>>>> *)', got 'int') errors in code lines like
>>>>>>>>>
>>>>>>>>>
>>> FOLLOWPUSH(FOLLOW_subtype_indication_in_access_type_definition730
>>>>>>>>> )
>>>>>>>>> ); Any hint?
>>>>>>>>>
>>>>>>>>>
>>>>>>>>> And in the following functions an analog problem
>>>>>>>>>        E2342 Type mismatch in parameter 'state' (wanted
>>>>>>>>> 'ANTLR3_RECOGNIZER_SHARED_STATE_struct *', got 'int')I I just
>>>>>>>>> declared state and initialized it with NULL:
>>>>>>>>>
>>>>>>>>> ANTLR3_API pXYZLexer XYZLexerNew( pANTLR3_INPUT_STREAM instream
>>> )
>>>>> {
>>>>>>>>>        pANTLR3_RECOGNIZER_SHARED_STATE state ; // UW
>>>>>>>>>        state = NULL ; // UW
>>>>>>>>>
>>>>>>>>>        // See if we can create a new lexer with the standard
>>>>>>> constructor
>>>>>>>>>        //
>>>>>>>>>        // UW  return XYZLexerNewSSD(instream, NULL);
>>>>>>>>>        return XYZLexerNewSSD(instream, state); // UW }
>>>>>>>>>
>>>>>>>>> Same problem with
>>>>>>>>> ANTLR3_API pXYZParser XYZParserNew( pANTLR3_COMMON_TOKEN_STREAM
>>>>>>>>> instream ) {
>>>>>>>>>        pANTLR3_RECOGNIZER_SHARED_STATE state ; // UW
>>>>>>>>>        state = NULL ; // UW
>>>>>>>>>
>>>>>>>>>        // See if we can create a new parser with the standard
>>>>>>> constructor
>>>>>>>>>        //
>>>>>>>>> // UW  return XYZParserNewSSD(instream, NULL);
>>>>>>>>>        return XYZParserNewSSD(instream, state); // UW }
>>>>>>>>>
>>>>>>>>>
>>>>>>>>> Is it in any way possible to avoid tabs in the generated code?
>>>>>>>>> I would prefer two spaces for one tab.
>>>>>>>>>
>>>>>>>>>
>>>>>>>>> Many thanks and greetings
>>>>>>>>> Udo
>>>>>>>>>
>>>>>>>>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>>>>>>>>> Unsubscribe:
>>>>>>>>> http://www.antlr.org/mailman/options/antlr-interest/your-
>>>>>>>>> email-address
>>>>>>>>
>>>>>>>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>>>>>>>> Unsubscribe:
>>>>>>>> http://www.antlr.org/mailman/options/antlr-interest/your-email-
>>>>>>> address
>>>>>>>
>>>>>>>
>>>>>>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>>>>>>> Unsubscribe:
>>>>>>> http://www.antlr.org/mailman/options/antlr-interest/your-
>>>>>>> email-address
>>>>>>
>>>>>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>>>>>> Unsubscribe:
>>>>>> http://www.antlr.org/mailman/options/antlr-interest/your-email-
>>>>> address
>>>>>
>>>>>
>>>>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>>>>> Unsubscribe:
>>>>> http://www.antlr.org/mailman/options/antlr-interest/your-
>>>>> email-address
>>>>
>>>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>>>> Unsubscribe:
>>>> http://www.antlr.org/mailman/options/antlr-interest/your-email-
>>> address
>>>
>>>
>>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>>> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
>>> email-address
>>
>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>> Unsubscribe:
>> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>>
>
>
>
> ----------------------------------------------------------------
> This message was sent using IMP, the Internet Messaging Program.
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address


From liebigandreas at yahoo.com  Wed Oct  5 04:14:22 2011
From: liebigandreas at yahoo.com (Andreas Liebig)
Date: Wed, 5 Oct 2011 04:14:22 -0700 (PDT)
Subject: [antlr-interest] distinguish "3 + 4" from "3 +4"
Message-ID: <1317813262.69067.YahooMailNeo@web124909.mail.ne1.yahoo.com>

Hello,
I am not very experienced with ANTLR, and I would like to ask for some ideas how to solve this task:

I have to distinguish input streams like
"3 + 4" (parsed as three tokens NUMBER PLUS NUMBER) from 
"3 +4" (parsed as NUMBER NUMBER, because the + is part of the number +4).

I would like to ignore whitespace in general using the "$channel=HIDDEN;" syntax. But only in this situation whitespace does matter.
Can you guide me to a good explanation of a possible solution?

Thanks
Andreas

From s.barnett-cormack at lancaster.ac.uk  Wed Oct  5 04:20:58 2011
From: s.barnett-cormack at lancaster.ac.uk (Sam Barnett-Cormack)
Date: Wed, 05 Oct 2011 12:20:58 +0100
Subject: [antlr-interest] distinguish "3 + 4" from "3 +4"
In-Reply-To: <1317813262.69067.YahooMailNeo@web124909.mail.ne1.yahoo.com>
References: <1317813262.69067.YahooMailNeo@web124909.mail.ne1.yahoo.com>
Message-ID: <4E8C3D9A.3000603@lancaster.ac.uk>

On 05/10/2011 12:14, Andreas Liebig wrote:
> Hello,
> I am not very experienced with ANTLR, and I would like to ask for some ideas how to solve this task:
>
> I have to distinguish input streams like
> "3 + 4" (parsed as three tokens NUMBER PLUS NUMBER) from
> "3 +4" (parsed as NUMBER NUMBER, because the + is part of the number +4).
>
> I would like to ignore whitespace in general using the "$channel=HIDDEN;" syntax. But only in this situation whitespace does matter.
> Can you guide me to a good explanation of a possible solution?

Don't really know what docs are where, but off the top of my head... you 
need to have your NUMBER lexer rule start with an optional +, or 
presumably actually + or -, so a human-readable version of the grammar 
would have something like

NUMBER : ('+'|'-')? DIGIT+;
PLUS : '+';
MINUS : '-';

Of course, ANTLR won't like that, because it's ambiguous. There are a 
few ways to resolve the ambiguity, you'll see one if you look on the 
wiki about how to differentiate between ints and floats in the lexer. I 
can't remember the syntax off the top of my head.

Sam


From liebigandreas at yahoo.com  Wed Oct  5 04:40:41 2011
From: liebigandreas at yahoo.com (Andreas Liebig)
Date: Wed, 5 Oct 2011 04:40:41 -0700 (PDT)
Subject: [antlr-interest] distinguish "3 + 4" from "3 +4"
In-Reply-To: <4E8C3D9A.3000603@lancaster.ac.uk>
References: <1317813262.69067.YahooMailNeo@web124909.mail.ne1.yahoo.com>
	<4E8C3D9A.3000603@lancaster.ac.uk>
Message-ID: <1317814841.90119.YahooMailNeo@web124918.mail.ne1.yahoo.com>

Thank you for the reply, Sam.
Is this the int/float wiki article you mentioned: http://www.antlr.org/wiki/pages/viewpage.action?pageId=3604497 ("How can I emit more than a single token per lexer rule?")?
Unfortunately I cannot see how it helps in my case. The wiki article uses the difference in non-whitespace characters, whereas I have to make use of the hidden whitespace characters. I read somewhere that it is actually possible to check the hidden channel if necessary, but I cannot find any details.

One more example for my situation:
"3+4" should be parsed as NUMBER PLUS NUMBER, the same as "3 + 4".

Still looking forward to more suggestions.
Andreas



----- Original Message -----
From: Sam Barnett-Cormack <s.barnett-cormack at lancaster.ac.uk>
To: Andreas Liebig <liebigandreas at yahoo.com>
Cc: "antlr-interest at antlr.org" <antlr-interest at antlr.org>
Sent: Wednesday, October 5, 2011 1:20 PM
Subject: Re: [antlr-interest] distinguish "3 + 4" from "3 +4"

On 05/10/2011 12:14, Andreas Liebig wrote:
> Hello,
> I am not very experienced with ANTLR, and I would like to ask for some ideas how to solve this task:
> 
> I have to distinguish input streams like
> "3 + 4" (parsed as three tokens NUMBER PLUS NUMBER) from
> "3 +4" (parsed as NUMBER NUMBER, because the + is part of the number +4).
> 
> I would like to ignore whitespace in general using the "$channel=HIDDEN;" syntax. But only in this situation whitespace does matter.
> Can you guide me to a good explanation of a possible solution?

Don't really know what docs are where, but off the top of my head... you need to have your NUMBER lexer rule start with an optional +, or presumably actually + or -, so a human-readable version of the grammar would have something like

NUMBER : ('+'|'-')? DIGIT+;
PLUS : '+';
MINUS : '-';

Of course, ANTLR won't like that, because it's ambiguous. There are a few ways to resolve the ambiguity, you'll see one if you look on the wiki about how to differentiate between ints and floats in the lexer. I can't remember the syntax off the top of my head.

Sam

From bkiers at gmail.com  Wed Oct  5 04:43:59 2011
From: bkiers at gmail.com (Bart Kiers)
Date: Wed, 5 Oct 2011 13:43:59 +0200
Subject: [antlr-interest] distinguish "3 + 4" from "3 +4"
In-Reply-To: <1317813262.69067.YahooMailNeo@web124909.mail.ne1.yahoo.com>
References: <1317813262.69067.YahooMailNeo@web124909.mail.ne1.yahoo.com>
Message-ID: <CAOrgODbt3FbgAgA2Yketh6iR7k20nRGbZ=WBFqGMoVbVGgC-_A@mail.gmail.com>

Hi Andreas,

I think it's a bad idea to "glue" a '+' (or '-') to a NUMBER token. If I
were you, I'd resolve that in a unary-parser rule:

expression
  :  add
  ;

add
  :  multiplication (('+' | '-') multiplication)*
  ;

multiplication
  :  unary (('*' | '/') unary)*
  ;

unary
  :  '+' atom
  |  '-' atom
  |  atom
  ;

atom
  :  NUMBER
  |  '(' expression ')'
  ;



The grammar above would handle expressions like:

+ 1 + -5
^     ^
|     |
+-----+---- unary '+' and '-'


Regards,

Bart.


On Wed, Oct 5, 2011 at 1:14 PM, Andreas Liebig <liebigandreas at yahoo.com>wrote:

> Hello,
> I am not very experienced with ANTLR, and I would like to ask for some
> ideas how to solve this task:
>
> I have to distinguish input streams like
> "3 + 4" (parsed as three tokens NUMBER PLUS NUMBER) from
> "3 +4" (parsed as NUMBER NUMBER, because the + is part of the number +4).
>
> I would like to ignore whitespace in general using the "$channel=HIDDEN;"
> syntax. But only in this situation whitespace does matter.
> Can you guide me to a good explanation of a possible solution?
>
> Thanks
> Andreas
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>

From liebigandreas at yahoo.com  Wed Oct  5 05:17:00 2011
From: liebigandreas at yahoo.com (Andreas Liebig)
Date: Wed, 5 Oct 2011 05:17:00 -0700 (PDT)
Subject: [antlr-interest] distinguish "3 + 4" from "3 +4"
In-Reply-To: <CAOrgODbt3FbgAgA2Yketh6iR7k20nRGbZ=WBFqGMoVbVGgC-_A@mail.gmail.com>
References: <1317813262.69067.YahooMailNeo@web124909.mail.ne1.yahoo.com>
	<CAOrgODbt3FbgAgA2Yketh6iR7k20nRGbZ=WBFqGMoVbVGgC-_A@mail.gmail.com>
Message-ID: <1317817020.17075.YahooMailNeo@web124910.mail.ne1.yahoo.com>

Hello Bart,
I don't need to glue the + or - to the NUMBER token. I could as well recognize it later in the parser.

I tried your grammar, but it doesn't make any difference between "3 + 4" and "3 +4". Both are interpreted as an "add" rule of "3" and "4".
What I need is another "sequence" rule which interpretes e.g. "3 +4 -5" as the sequence (3 4 -5) or e.g. "3 +4" as (3 4).

Regards,
Andreas



________________________________
From: Bart Kiers <bkiers at gmail.com>
To: Andreas Liebig <liebigandreas at yahoo.com>
Cc: "antlr-interest at antlr.org" <antlr-interest at antlr.org>
Sent: Wednesday, October 5, 2011 1:43 PM
Subject: Re: [antlr-interest] distinguish "3 + 4" from "3 +4"


Hi Andreas,

I think it's a bad idea to "glue" a '+' (or '-') to a NUMBER token. If I were you, I'd resolve that in a unary-parser rule:

expression?
>? : ?add
>? ;
>
>
>add?
>? : ?multiplication (('+' | '-')?multiplication)*
>? ;
>
>
>multiplication?
>? : ?unary (('*' | '/')?unary)*
>? ;
>
>
>unary
>? : ?'+' atom
>? | ?'-' atom
>? | ?atom
>? ;
>
>
>atom
>? : ?NUMBER?
>? | ?'('?expression?')'
>? ;


The grammar above would handle expressions like:

+ 1 + -5
>^ ? ? ^
>| ? ? |
>+-----+---- unary '+' and '-'

Regards,

Bart.



On Wed, Oct 5, 2011 at 1:14 PM, Andreas Liebig <liebigandreas at yahoo.com> wrote:

Hello,
>I am not very experienced with ANTLR, and I would like to ask for some ideas how to solve this task:
>
>I have to distinguish input streams like
>"3 + 4" (parsed as three tokens NUMBER PLUS NUMBER) from
>"3 +4" (parsed as NUMBER NUMBER, because the + is part of the number +4).
>
>I would like to ignore whitespace in general using the "$channel=HIDDEN;" syntax. But only in this situation whitespace does matter.
>Can you guide me to a good explanation of a possible solution?
>
>Thanks
>Andreas
>
>List: http://www.antlr.org/mailman/listinfo/antlr-interest
>Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>

From liebigandreas at yahoo.com  Wed Oct  5 05:26:35 2011
From: liebigandreas at yahoo.com (Andreas Liebig)
Date: Wed, 5 Oct 2011 05:26:35 -0700 (PDT)
Subject: [antlr-interest] distinguish "3 + 4" from "3 +4"
In-Reply-To: <1317813262.69067.YahooMailNeo@web124909.mail.ne1.yahoo.com>
References: <1317813262.69067.YahooMailNeo@web124909.mail.ne1.yahoo.com>
Message-ID: <1317817595.66531.YahooMailNeo@web124919.mail.ne1.yahoo.com>

I think I found the solution here:

http://www.antlr.org/wiki/pages/viewpage.action?pageId=557063 ("How do I access hidden tokens from parser?")

This will allow to check for whitespace before or after the + or -.

If you know an easier solution, please let me know.

Thanks
Andreas


________________________________
From: Andreas Liebig <liebigandreas at yahoo.com>
To: "antlr-interest at antlr.org" <antlr-interest at antlr.org>
Sent: Wednesday, October 5, 2011 1:14 PM
Subject: [antlr-interest] distinguish "3 + 4" from "3 +4"

Hello,
I am not very experienced with ANTLR, and I would like to ask for some ideas how to solve this task:

I have to distinguish input streams like
"3 + 4" (parsed as three tokens NUMBER PLUS NUMBER) from 
"3 +4" (parsed as NUMBER NUMBER, because the + is part of the number +4).

I would like to ignore whitespace in general using the "$channel=HIDDEN;" syntax. But only in this situation whitespace does matter.
Can you guide me to a good explanation of a possible solution?

Thanks
Andreas

List: http://www.antlr.org/mailman/listinfo/antlr-interest
Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address

From hellojinjie at gmail.com  Wed Oct  5 05:29:46 2011
From: hellojinjie at gmail.com (=?UTF-8?B?6YeR5p2w?=)
Date: Wed, 5 Oct 2011 20:29:46 +0800
Subject: [antlr-interest] How to make case insensitive token checker for the
 lexical analysis part of antlr in C program?
Message-ID: <CAKZS5e-SOhnceFJAu+hDdnFzh4QqLdjJWxYC9zKOnNDYeEqGUw@mail.gmail.com>

Hi,all

I want to convert the token stream into upper case at the time when lexical
rules are checked.

In java, we can do it in this way:
<pre>
public class ANTLRNoCaseStringStream extends ANTLRStringStream {
    public ANTLRNoCaseStringStream(String input) {
        super(input);
    }

    @Override
    public int LA(int i) {
        int returnChar = super.LA(i);
        if (returnChar == CharStream.EOF) {
            return returnChar;
        } else if (returnChar == 0) {
            return returnChar;
        }
        return Character.toUpperCase((char) returnChar);
    }
}
</pre>

then,
<pre>
// assume that we are going to make a SQL parser.
SQLLexer lexer = new SQLLexer(new ANTLRNoCaseStringStream(command))
</pre>

But, my question is that: how to do the same thing in C program?
I looked into antlr3 C runtime source, but could not find a way to archive
this.
In fact, I'm a java programmer, new to C, the source code really confused me
 >_<

By the way, could you figure out any open sourced C project that using
antlr3?

Thank you in advance.

-- 
??

From hellojinjie at gmail.com  Wed Oct  5 05:52:36 2011
From: hellojinjie at gmail.com (=?UTF-8?B?6YeR5p2w?=)
Date: Wed, 5 Oct 2011 20:52:36 +0800
Subject: [antlr-interest] How to make case insensitive token checker for
 the lexical analysis part of antlr in C program?
In-Reply-To: <CAKZS5e-SOhnceFJAu+hDdnFzh4QqLdjJWxYC9zKOnNDYeEqGUw@mail.gmail.com>
References: <CAKZS5e-SOhnceFJAu+hDdnFzh4QqLdjJWxYC9zKOnNDYeEqGUw@mail.gmail.com>
Message-ID: <CAKZS5e_j3kBiiPV=zn+s1Ob39R7U-uq+hzUF6NzrR0uz1VxdWQ@mail.gmail.com>

I find it in the wiki, thank you all..
http://www.antlr.org/wiki/pages/viewpage.action?pageId=1782

I still have a question to ask: any C project that using antlr3?

I find many Java project that using antlr, e.g. Hive, Esper (a stream
process engine)
Thanks to these open sourced Java project, I learned a lot skills about
using antlr3 in java.

we have the wiki (
http://www.antlr.org/wiki/display/ANTLR3/Using+the+ANTLR3+C+Target)
but, I want to look for a more complex one.
So, could you figure out any C project that using antlr3?

Thanks.

-- 
??

From douglasgodfrey at gmail.com  Wed Oct  5 06:39:03 2011
From: douglasgodfrey at gmail.com (Douglas Godfrey)
Date: Wed, 05 Oct 2011 09:39:03 -0400
Subject: [antlr-interest] distinguish "3 + 4" from "3 +4"
In-Reply-To: <1317813262.69067.YahooMailNeo@web124909.mail.ne1.yahoo.com>
Message-ID: <CAB1D59F.3EFE%douglasgodfrey@gmail.com>

define a Number lexer rule that parses signed numbers with no intervening
whitespace between the "+" or "-" and the digits.

Then the parser will receive Number Number instead of  Number Plus Number.

The Plus rule will succeed any time there is whitespace between the sign
and the number.


On 10/5/11 7:14 AM, "Andreas Liebig" <liebigandreas at yahoo.com> wrote:

>Hello,
>I am not very experienced with ANTLR, and I would like to ask for some
>ideas how to solve this task:
>
>I have to distinguish input streams like
>"3 + 4" (parsed as three tokens NUMBER PLUS NUMBER) from
>"3 +4" (parsed as NUMBER NUMBER, because the + is part of the number +4).
>
>I would like to ignore whitespace in general using the "$channel=HIDDEN;"
>syntax. But only in this situation whitespace does matter.
>Can you guide me to a good explanation of a possible solution?
>
>Thanks
>Andreas
>
>List: http://www.antlr.org/mailman/listinfo/antlr-interest
>Unsubscribe: 
>http://www.antlr.org/mailman/options/antlr-interest/your-email-address



From yvan.lussaud at obeo.fr  Wed Oct  5 07:25:24 2011
From: yvan.lussaud at obeo.fr (Yvan LUSSAUD)
Date: Wed, 05 Oct 2011 16:25:24 +0200
Subject: [antlr-interest] look ahead and backtracking
Message-ID: <1317824724.7127.17.camel@ylussaud-pc>

Hi,

  I have a problem with recursive prefix and backtracking. I have a
parser that do not ignore spaces or comments, and that has many semantic
actions. The backtrack option is set to true.

  For some alternative antlr seems to generate the code to predict the
alternative to use, but this code do nothing and lead to always choose
the last alternative (no check on the last alternative).

When I call directly the right rule the parsing succeed and when I call
the rule that contains the alternative it fails. I tried to reproduce
the problem with a simple example but with this example it works as
expected using backtracking...

Compilation of my grammar gives no errors and no warnings but I can't
debug it from antlrworks. I always get a timeout. I'm under Linux and
the port is never opened by the debugged application. I always get the
same exception in the shell :

...../antlrworks-1.4.3.jar/templates/DBParserGlueCode.st (Not a
directory)
	at java.io.FileInputStream.open(Native Method)
	at java.io.FileInputStream.<init>(FileInputStream.java:137)
	at java.io.FileInputStream.<init>(FileInputStream.java:96)
	at org.antlr.works.utils.Utils.stringFromFile(Utils.java:43)
	at
org.antlr.works.dialog.AWPrefsDialog.prepareTestRigTabValues(AWPrefsDialog.java:345)
...

So I'm a bit stuck here... Is there a way to force backtracking on a
given rule or alternative? I tried to force it with k=1 but it seems to
have no effect on the produced code. I also used the left factoring to
resolve the problem and it works for some alternatives but it's not
always possible to factorize... I also used syntactic predicates but
it's also not always possible to find a working predicate. Any idea ?

regards,
-- 
Yvan LUSSAUD <yvan.lussaud at obeo.fr>



From tasawer84pk at gmail.com  Wed Oct  5 08:44:18 2011
From: tasawer84pk at gmail.com (Tasawer Khan)
Date: Wed, 5 Oct 2011 16:44:18 +0100
Subject: [antlr-interest] Can anyone help in this tree grammar?
Message-ID: <CAMABrk4SDTkL1iC=kgc7F9S1n4Aq_8eG60_FDG6knN1yQnv+gg@mail.gmail.com>

Hi,
I am having problem writing a tree grammar. I have posted a question at
stackoverflow.com
http://stackoverflow.com/questions/7663663/tree-parser-for-this-rule

If you can help please answer on stackoverflow or on the same list. Thanks

From jimi at temporal-wave.com  Wed Oct  5 08:58:17 2011
From: jimi at temporal-wave.com (Jim Idle)
Date: Wed, 5 Oct 2011 08:58:17 -0700
Subject: [antlr-interest] Jim Idle: C-Runtime and C++Builder,
 E2342 Type mismatch in parameter
In-Reply-To: <20111005120210.f2af3e17vkg88scc@webmail.kamm.cz>
References: <4E86BF8F.1020205@aol.com>	<c6eeb9d93977b80bb75a240dbd423d85@mail.gmail.com>
	<4E8B3CB1.60103@aol.com>	<df19c41b39d325941639bca13a8d456a@mail.gmail.com>
	<4E8B4035.5040205@aol.com>	<b7ad8a156de20c9aed9258d7c15499b8@mail.gmail.com>
	<4E8B794E.8040104@aol.com>	<c6d44379f38f000c831da6521c1a326a@mail.gmail.com>
	<20111005120210.f2af3e17vkg88scc@webmail.kamm.cz>
Message-ID: <55dcad723866c612f1a16ee27d0052f2@mail.gmail.com>

It is pretty easy to detect, but I have debated this before (see archives)
and it won't happen. However, the next version, v4, will be a C++ runtime
only, so it probably won't be an issue anyway.

Jim

> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of Ivan Brezina
> Sent: Wednesday, October 05, 2011 3:02 AM
> To: antlr-interest at antlr.org
> Subject: Re: [antlr-interest] Jim Idle: C-Runtime and C++Builder, E2342
> Type mismatch in parameter
>
> Hi
> as this issue is quite common and is not easy to detect.
> Could it be possible that in the new ANTLR release will be those
> #defines replaced with some kind of enum?
>
> thx Ivan
>
>
> Quoting Jim Idle <jimi at temporal-wave.com>:
>
> > This is a problem with your grammar (see lots of previous posts) -
> you
> > have a token that you have called NULL and you cannot name tokens
> with
> > the same name as reserved words. Instead of:
> >
> > NULL : 'null';
> >
> > I just use
> >
> > KNULL : 'null' ;
> >
> > Using the K to stand for keyword, but anything will do.
> >
> >
> > Jim
> >
> >> -----Original Message-----
> >> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> >> bounces at antlr.org] On Behalf Of Udo Weik
> >> Sent: Tuesday, October 04, 2011 2:23 PM
> >> To: antlr-interest at antlr.org
> >> Subject: Re: [antlr-interest] Jim Idle: C-Runtime and C++Builder,
> >> E2342 Type mismatch in parameter
> >>
> >> Hello Jim,
> >>
> >> > Find the #define of the macro in your source code, see if there is
> >> > anything else in there that is further expanded, such say NULL or
> >> free
> >> > etc.
> >>
> >> grepping the result of the prepocessor macro expansion showed that
> >> NULL is always 99. The reason is NULL in the tokens { ... }-section
> >> in the grammar. That token gets the value 99 assigned:
> >>    #define NULL 99
> >> Is there any way to fix that in the C-Runtime directly without
> >> changing the grammar?
> >>
> >> Many thanks and greetings
> >> Udo
> >>
> >>
> >> >> -----Original Message-----
> >> >> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> >> >> bounces at antlr.org] On Behalf Of Udo Weik
> >> >> Sent: Tuesday, October 04, 2011 10:20 AM
> >> >> To: Antlr-Interest Antlr.Org
> >> >> Subject: Re: [antlr-interest] Jim Idle: C-Runtime and C++Builder,
> >> >> E2342 Type mismatch in parameter
> >> >>
> >> >> Hello Jim,
> >> >>
> >> >> thanks for your fast anser.
> >> >>
> >> >>> It sounds more to me like there is something in the pre-
> processor
> >> >> that
> >> >>> has redefined whatever should really be there. You should trace
> >> >>> through the actual #defines to find out what.
> >> >>
> >> >> And what "should really be there"? Can you give me an example of
> >> >> an correct call (expanded) to ->push( ... )?
> >> >>
> >> >> Many thanks and greetings
> >> >> Udo
> >> >>
> >> >>
> >> >>>> -----Original Message-----
> >> >>>> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> >> >>>> bounces at antlr.org] On Behalf Of Udo Weik
> >> >>>> Sent: Tuesday, October 04, 2011 10:05 AM
> >> >>>> To: Antlr-Interest Antlr.Org
> >> >>>> Subject: Re: [antlr-interest] Jim Idle: C-Runtime and
> >> >>>> C++Builder,
> >> >>>> E2342 Type mismatch in parameter
> >> >>>>
> >> >>>> Hello Jim,
> >> >>>>
> >> >>>> I was able by using the prepocessor macro expansion to find at
> >> >>>> least the location of the problem
> >> >>>>
> >> >>>>
> FOLLOWPUSH(FOLLOW_subtype_indication_in_access_type_definition73
> >> >>>> 0)
> >> >>>> which expands to
> >> >>>>      ctx->pParser->rec->state->following->push(
> >> >>>> ctx->pParser->rec->state-
> >> >>>>> following,
> >> >>>>                                                 ((void
> >> >>>> *)(&(FOLLOW_subtype_indication_in_access_type_definition730))),
> >> >>>>                                                 99 ) ; The
> >> >>>> problem is the value 99, which should be of type
> >> >>>>      void (ANTLR3_CDECL *freeptr)(void *)) according to
> >> >>>> antlr3collections.h, line 211:
> >> >>>> /*
> >> >>>> ANTLR3_STACK_struct Struct Reference
> >> >>>>
> >> >>>> 00199 typedef struct  ANTLR3_STACK_struct
> >> >>>> 00200 {
> >> >>>> 00203     pANTLR3_VECTOR  vector;
> >> >>>> 00204
> >> >>>> 00207     void *          top;
> >> >>>> 00208     void                        (*free) (struct
> >> >>>> ANTLR3_STACK_struct * stack);
> >> >>>> 00209     void *                      (*pop)  (struct
> >> >>>> ANTLR3_STACK_struct * stack);
> >> >>>> 00210     void *                      (*get)  (struct
> >> >>>> ANTLR3_STACK_struct * stack, ANTLR3_INTKEY key);
> >> >>>> 00211     ANTLR3_BOOLEAN  (*push)     (struct
> ANTLR3_STACK_struct
> >> *
> >> >>>> stack, void * element, void (ANTLR3_CDECL *freeptr)(void *));
> >> >>>> 00212     ANTLR3_UINT32   (*size)     (struct
> ANTLR3_STACK_struct
> >> *
> >> >>>> stack);
> >> >>>> 00213     void *                      (*peek) (struct
> >> >>>> ANTLR3_STACK_struct * stack);
> >> >>>> 00214
> >> >>>> 00215 }
> >> >>>> 00216     ANTLR3_STACK;
> >> >>>> */
> >> >>>>
> >> >>>> Can you be so kind and explain me the purpose of 99 (and why is
> >> >>>> it just an
> >> >>>> int) and whether there is a more or less corresponding
> >> >> functionallity
> >> >>>> for the ANTLR3_STACK_struct in ANTLR (Java sources).
> >> >>>>
> >> >>>> Many thanks and greetings
> >> >>>> Udo
> >> >>>>
> >> >>>>
> >> >>>>> I don't really know what you are trying to do or what compiler
> >> you
> >> >>>> are
> >> >>>>> using etc, but remember this is C code not C++ code so if you
> >> turn
> >> >>>>> on all the warnings in the C++ compiler then you may get the
> >> >>>>> odd
> >> >>>> warning.
> >> >>>>> But without seeing all the code, I can't guess where that
> >> >>>>> warning
> >> >> is.
> >> >>>>> It isn't the FOLLOWPUSH macro though. It looks more likely
> that
> >> >>>>> you are not including the correct headers and so the prototype
> >> >>>>> is
> >> >>>> defaulting to int.
> >> >>>>>
> >> >>>>> As for tabs vs space... well it is generated code. You could
> >> >>>>> always untab it using any one of a thousand tools, or modify
> >> >>>>> the code generation template and remake ANTLR.
> >> >>>>>
> >> >>>>> I don't know anything about C__ builder, but it seems to be
> >> >>>>> more of a hindrance than a help?
> >> >>>>>
> >> >>>>> Jim
> >> >>>>>
> >> >>>>>> -----Original Message-----
> >> >>>>>> From: antlr-interest-bounces at antlr.org [mailto:antlr-
> interest-
> >> >>>>>> bounces at antlr.org] On Behalf Of Udo Weik
> >> >>>>>> Sent: Saturday, October 01, 2011 12:22 AM
> >> >>>>>> To: Antlr-Interest Antlr.Org
> >> >>>>>> Subject: [antlr-interest] Jim Idle: C-Runtime and C++Builder,
> >> >> E2342
> >> >>>>>> Type mismatch in parameter
> >> >>>>>>
> >> >>>>>> Hello Jim,
> >> >>>>>>
> >> >>>>>> I'm getting some
> >> >>>>>>       E2342 Type mismatch in parameter 'freeptr' (wanted
> 'void
> >> >>>> (*)(void
> >> >>>>>> *)', got 'int') errors in code lines like
> >> >>>>>>
> >> >>>>>>
> >> FOLLOWPUSH(FOLLOW_subtype_indication_in_access_type_definition730
> >> >>>>>> )
> >> >>>>>> ); Any hint?
> >> >>>>>>
> >> >>>>>>
> >> >>>>>> And in the following functions an analog problem
> >> >>>>>>       E2342 Type mismatch in parameter 'state' (wanted
> >> >>>>>> 'ANTLR3_RECOGNIZER_SHARED_STATE_struct *', got 'int')I I just
> >> >>>>>> declared state and initialized it with NULL:
> >> >>>>>>
> >> >>>>>> ANTLR3_API pXYZLexer XYZLexerNew( pANTLR3_INPUT_STREAM
> >> >>>>>> instream
> >> )
> >> >> {
> >> >>>>>>       pANTLR3_RECOGNIZER_SHARED_STATE state ; // UW
> >> >>>>>>       state = NULL ; // UW
> >> >>>>>>
> >> >>>>>>       // See if we can create a new lexer with the standard
> >> >>>> constructor
> >> >>>>>>       //
> >> >>>>>>       // UW  return XYZLexerNewSSD(instream, NULL);
> >> >>>>>>       return XYZLexerNewSSD(instream, state); // UW }
> >> >>>>>>
> >> >>>>>> Same problem with
> >> >>>>>> ANTLR3_API pXYZParser XYZParserNew(
> >> >>>>>> pANTLR3_COMMON_TOKEN_STREAM instream ) {
> >> >>>>>>       pANTLR3_RECOGNIZER_SHARED_STATE state ; // UW
> >> >>>>>>       state = NULL ; // UW
> >> >>>>>>
> >> >>>>>>       // See if we can create a new parser with the standard
> >> >>>> constructor
> >> >>>>>>       //
> >> >>>>>> // UW  return XYZParserNewSSD(instream, NULL);
> >> >>>>>>       return XYZParserNewSSD(instream, state); // UW }
> >> >>>>>>
> >> >>>>>>
> >> >>>>>> Is it in any way possible to avoid tabs in the generated
> code?
> >> >>>>>> I would prefer two spaces for one tab.
> >> >>>>>>
> >> >>>>>>
> >> >>>>>> Many thanks and greetings
> >> >>>>>> Udo
> >> >>>>>>
> >> >>>>>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> >> >>>>>> Unsubscribe:
> >> >>>>>> http://www.antlr.org/mailman/options/antlr-interest/your-
> >> >>>>>> email-address
> >> >>>>>
> >> >>>>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> >> >>>>> Unsubscribe:
> >> >>>>> http://www.antlr.org/mailman/options/antlr-interest/your-
> email-
> >> >>>> address
> >> >>>>
> >> >>>>
> >> >>>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> >> >>>> Unsubscribe:
> >> >>>> http://www.antlr.org/mailman/options/antlr-interest/your-
> >> >>>> email-address
> >> >>>
> >> >>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> >> >>> Unsubscribe:
> >> >>> http://www.antlr.org/mailman/options/antlr-interest/your-email-
> >> >> address
> >> >>
> >> >>
> >> >> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> >> >> Unsubscribe:
> >> >> http://www.antlr.org/mailman/options/antlr-interest/your-
> >> >> email-address
> >> >
> >> > List: http://www.antlr.org/mailman/listinfo/antlr-interest
> >> > Unsubscribe:
> >> > http://www.antlr.org/mailman/options/antlr-interest/your-email-
> >> address
> >>
> >>
> >> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> >> Unsubscribe:
> >> http://www.antlr.org/mailman/options/antlr-interest/your-
> >> email-address
> >
> > List: http://www.antlr.org/mailman/listinfo/antlr-interest
> > Unsubscribe:
> > http://www.antlr.org/mailman/options/antlr-interest/your-email-
> address
> >
>
>
>
> ----------------------------------------------------------------
> This message was sent using IMP, the Internet Messaging Program.
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
> email-address

From jimi at temporal-wave.com  Wed Oct  5 08:59:17 2011
From: jimi at temporal-wave.com (Jim Idle)
Date: Wed, 5 Oct 2011 08:59:17 -0700
Subject: [antlr-interest] Jim Idle: C-Runtime and C++Builder,
 E2342 Type mismatch in parameter
In-Reply-To: <4E8C314F.7030601@aol.com>
References: <4E86BF8F.1020205@aol.com>	<c6eeb9d93977b80bb75a240dbd423d85@mail.gmail.com>
	<4E8B3CB1.60103@aol.com>	<df19c41b39d325941639bca13a8d456a@mail.gmail.com>
	<4E8B4035.5040205@aol.com>	<b7ad8a156de20c9aed9258d7c15499b8@mail.gmail.com>
	<4E8B794E.8040104@aol.com>	<c6d44379f38f000c831da6521c1a326a@mail.gmail.com>
	<20111005120210.f2af3e17vkg88scc@webmail.kamm.cz>
	<4E8C314F.7030601@aol.com>
Message-ID: <195983a7e2690b6ea5b301ec7833545d@mail.gmail.com>

enums have no real advantage in C, only C++

Jim

> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of Udo Weik
> Sent: Wednesday, October 05, 2011 3:29 AM
> To: Ivan Brezina; Antlr-Interest Antlr.Org
> Subject: Re: [antlr-interest] Jim Idle: C-Runtime and C++Builder, E2342
> Type mismatch in parameter
>
> Hello Ivan,
>
> > as this issue is quite common and is not easy to detect.
> > Could it be possible that in the new ANTLR release will be those
> > #defines replaced with some kind of enum?
>
> thanks for your support. It wasn't my grammar, so problems like this
> and a overall problematic target-IDE complicate such problems
> additionally.
> enums are of course much better to debug, my suggestion was to add
> user-defined prefixes where appropriate (token names/ now #defines,
> lexer rules/now function names with 'm' as prefix when I remember
> correcty and parser rules/now function names without prefix (had a
> problem here, too: int).
> And my opinion is that a grammar is a grammar, I can't track for every
> target language whether a token/rule is a reserved word or not.
>
> Many thanks and greetings
> Udo
>
>
> > Quoting Jim Idle<jimi at temporal-wave.com>:
> >
> >> This is a problem with your grammar (see lots of previous posts) -
> >> you have a token that you have called NULL and you cannot name
> tokens
> >> with the same name as reserved words. Instead of:
> >>
> >> NULL : 'null';
> >>
> >> I just use
> >>
> >> KNULL : 'null' ;
> >>
> >> Using the K to stand for keyword, but anything will do.
> >>
> >>
> >> Jim
> >>
> >>> -----Original Message-----
> >>> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> >>> bounces at antlr.org] On Behalf Of Udo Weik
> >>> Sent: Tuesday, October 04, 2011 2:23 PM
> >>> To: antlr-interest at antlr.org
> >>> Subject: Re: [antlr-interest] Jim Idle: C-Runtime and C++Builder,
> >>> E2342 Type mismatch in parameter
> >>>
> >>> Hello Jim,
> >>>
> >>>> Find the #define of the macro in your source code, see if there is
> >>>> anything else in there that is further expanded, such say NULL or
> >>> free
> >>>> etc.
> >>>
> >>> grepping the result of the prepocessor macro expansion showed that
> >>> NULL is always 99. The reason is NULL in the tokens { ... }-section
> >>> in the grammar. That token gets the value 99 assigned:
> >>>     #define NULL 99
> >>> Is there any way to fix that in the C-Runtime directly without
> >>> changing the grammar?
> >>>
> >>> Many thanks and greetings
> >>> Udo
> >>>
> >>>
> >>>>> -----Original Message-----
> >>>>> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> >>>>> bounces at antlr.org] On Behalf Of Udo Weik
> >>>>> Sent: Tuesday, October 04, 2011 10:20 AM
> >>>>> To: Antlr-Interest Antlr.Org
> >>>>> Subject: Re: [antlr-interest] Jim Idle: C-Runtime and C++Builder,
> >>>>> E2342 Type mismatch in parameter
> >>>>>
> >>>>> Hello Jim,
> >>>>>
> >>>>> thanks for your fast anser.
> >>>>>
> >>>>>> It sounds more to me like there is something in the pre-
> processor
> >>>>> that
> >>>>>> has redefined whatever should really be there. You should trace
> >>>>>> through the actual #defines to find out what.
> >>>>>
> >>>>> And what "should really be there"? Can you give me an example of
> >>>>> an correct call (expanded) to ->push( ... )?
> >>>>>
> >>>>> Many thanks and greetings
> >>>>> Udo
> >>>>>
> >>>>>
> >>>>>>> -----Original Message-----
> >>>>>>> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> >>>>>>> bounces at antlr.org] On Behalf Of Udo Weik
> >>>>>>> Sent: Tuesday, October 04, 2011 10:05 AM
> >>>>>>> To: Antlr-Interest Antlr.Org
> >>>>>>> Subject: Re: [antlr-interest] Jim Idle: C-Runtime and
> >>>>>>> C++Builder,
> >>>>>>> E2342 Type mismatch in parameter
> >>>>>>>
> >>>>>>> Hello Jim,
> >>>>>>>
> >>>>>>> I was able by using the prepocessor macro expansion to find at
> >>>>>>> least the location of the problem
> >>>>>>>
> >>>>>>>
> FOLLOWPUSH(FOLLOW_subtype_indication_in_access_type_definition73
> >>>>>>> 0)
> >>>>>>> which expands to
> >>>>>>>       ctx->pParser->rec->state->following->push(
> >>>>>>> ctx->pParser->rec->state-
> >>>>>>>> following,
> >>>>>>>                                                  ((void
> >>>>>>> *)(&(FOLLOW_subtype_indication_in_access_type_definition730))),
> >>>>>>>                                                  99 ) ; The
> >>>>>>> problem is the value 99, which should be of type
> >>>>>>>       void (ANTLR3_CDECL *freeptr)(void *)) according to
> >>>>>>> antlr3collections.h, line 211:
> >>>>>>> /*
> >>>>>>> ANTLR3_STACK_struct Struct Reference
> >>>>>>>
> >>>>>>> 00199 typedef struct  ANTLR3_STACK_struct
> >>>>>>> 00200 {
> >>>>>>> 00203     pANTLR3_VECTOR  vector;
> >>>>>>> 00204
> >>>>>>> 00207     void *          top;
> >>>>>>> 00208     void                        (*free) (struct
> >>>>>>> ANTLR3_STACK_struct * stack);
> >>>>>>> 00209     void *                      (*pop)  (struct
> >>>>>>> ANTLR3_STACK_struct * stack);
> >>>>>>> 00210     void *                      (*get)  (struct
> >>>>>>> ANTLR3_STACK_struct * stack, ANTLR3_INTKEY key);
> >>>>>>> 00211     ANTLR3_BOOLEAN  (*push)     (struct
> ANTLR3_STACK_struct
> >>> *
> >>>>>>> stack, void * element, void (ANTLR3_CDECL *freeptr)(void *));
> >>>>>>> 00212     ANTLR3_UINT32   (*size)     (struct
> ANTLR3_STACK_struct
> >>> *
> >>>>>>> stack);
> >>>>>>> 00213     void *                      (*peek) (struct
> >>>>>>> ANTLR3_STACK_struct * stack);
> >>>>>>> 00214
> >>>>>>> 00215 }
> >>>>>>> 00216     ANTLR3_STACK;
> >>>>>>> */
> >>>>>>>
> >>>>>>> Can you be so kind and explain me the purpose of 99 (and why is
> >>>>>>> it just an
> >>>>>>> int) and whether there is a more or less corresponding
> >>>>> functionallity
> >>>>>>> for the ANTLR3_STACK_struct in ANTLR (Java sources).
> >>>>>>>
> >>>>>>> Many thanks and greetings
> >>>>>>> Udo
> >>>>>>>
> >>>>>>>
> >>>>>>>> I don't really know what you are trying to do or what compiler
> >>> you
> >>>>>>> are
> >>>>>>>> using etc, but remember this is C code not C++ code so if you
> >>> turn
> >>>>>>>> on all the warnings in the C++ compiler then you may get the
> >>>>>>>> odd
> >>>>>>> warning.
> >>>>>>>> But without seeing all the code, I can't guess where that
> >>>>>>>> warning
> >>>>> is.
> >>>>>>>> It isn't the FOLLOWPUSH macro though. It looks more likely
> that
> >>>>>>>> you are not including the correct headers and so the prototype
> >>>>>>>> is
> >>>>>>> defaulting to int.
> >>>>>>>>
> >>>>>>>> As for tabs vs space... well it is generated code. You could
> >>>>>>>> always untab it using any one of a thousand tools, or modify
> >>>>>>>> the code generation template and remake ANTLR.
> >>>>>>>>
> >>>>>>>> I don't know anything about C__ builder, but it seems to be
> >>>>>>>> more of a hindrance than a help?
> >>>>>>>>
> >>>>>>>> Jim
> >>>>>>>>
> >>>>>>>>> -----Original Message-----
> >>>>>>>>> From: antlr-interest-bounces at antlr.org [mailto:antlr-
> interest-
> >>>>>>>>> bounces at antlr.org] On Behalf Of Udo Weik
> >>>>>>>>> Sent: Saturday, October 01, 2011 12:22 AM
> >>>>>>>>> To: Antlr-Interest Antlr.Org
> >>>>>>>>> Subject: [antlr-interest] Jim Idle: C-Runtime and C++Builder,
> >>>>> E2342
> >>>>>>>>> Type mismatch in parameter
> >>>>>>>>>
> >>>>>>>>> Hello Jim,
> >>>>>>>>>
> >>>>>>>>> I'm getting some
> >>>>>>>>>        E2342 Type mismatch in parameter 'freeptr' (wanted
> >>>>>>>>> 'void
> >>>>>>> (*)(void
> >>>>>>>>> *)', got 'int') errors in code lines like
> >>>>>>>>>
> >>>>>>>>>
> >>> FOLLOWPUSH(FOLLOW_subtype_indication_in_access_type_definition730
> >>>>>>>>> )
> >>>>>>>>> ); Any hint?
> >>>>>>>>>
> >>>>>>>>>
> >>>>>>>>> And in the following functions an analog problem
> >>>>>>>>>        E2342 Type mismatch in parameter 'state' (wanted
> >>>>>>>>> 'ANTLR3_RECOGNIZER_SHARED_STATE_struct *', got 'int')I I just
> >>>>>>>>> declared state and initialized it with NULL:
> >>>>>>>>>
> >>>>>>>>> ANTLR3_API pXYZLexer XYZLexerNew( pANTLR3_INPUT_STREAM
> >>>>>>>>> instream
> >>> )
> >>>>> {
> >>>>>>>>>        pANTLR3_RECOGNIZER_SHARED_STATE state ; // UW
> >>>>>>>>>        state = NULL ; // UW
> >>>>>>>>>
> >>>>>>>>>        // See if we can create a new lexer with the standard
> >>>>>>> constructor
> >>>>>>>>>        //
> >>>>>>>>>        // UW  return XYZLexerNewSSD(instream, NULL);
> >>>>>>>>>        return XYZLexerNewSSD(instream, state); // UW }
> >>>>>>>>>
> >>>>>>>>> Same problem with
> >>>>>>>>> ANTLR3_API pXYZParser XYZParserNew(
> >>>>>>>>> pANTLR3_COMMON_TOKEN_STREAM instream ) {
> >>>>>>>>>        pANTLR3_RECOGNIZER_SHARED_STATE state ; // UW
> >>>>>>>>>        state = NULL ; // UW
> >>>>>>>>>
> >>>>>>>>>        // See if we can create a new parser with the standard
> >>>>>>> constructor
> >>>>>>>>>        //
> >>>>>>>>> // UW  return XYZParserNewSSD(instream, NULL);
> >>>>>>>>>        return XYZParserNewSSD(instream, state); // UW }
> >>>>>>>>>
> >>>>>>>>>
> >>>>>>>>> Is it in any way possible to avoid tabs in the generated
> code?
> >>>>>>>>> I would prefer two spaces for one tab.
> >>>>>>>>>
> >>>>>>>>>
> >>>>>>>>> Many thanks and greetings
> >>>>>>>>> Udo
> >>>>>>>>>
> >>>>>>>>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> >>>>>>>>> Unsubscribe:
> >>>>>>>>> http://www.antlr.org/mailman/options/antlr-interest/your-
> >>>>>>>>> email-address
> >>>>>>>>
> >>>>>>>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> >>>>>>>> Unsubscribe:
> >>>>>>>> http://www.antlr.org/mailman/options/antlr-interest/your-
> email-
> >>>>>>> address
> >>>>>>>
> >>>>>>>
> >>>>>>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> >>>>>>> Unsubscribe:
> >>>>>>> http://www.antlr.org/mailman/options/antlr-interest/your-
> >>>>>>> email-address
> >>>>>>
> >>>>>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> >>>>>> Unsubscribe:
> >>>>>> http://www.antlr.org/mailman/options/antlr-interest/your-email-
> >>>>> address
> >>>>>
> >>>>>
> >>>>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> >>>>> Unsubscribe:
> >>>>> http://www.antlr.org/mailman/options/antlr-interest/your-
> >>>>> email-address
> >>>>
> >>>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> >>>> Unsubscribe:
> >>>> http://www.antlr.org/mailman/options/antlr-interest/your-email-
> >>> address
> >>>
> >>>
> >>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> >>> Unsubscribe:
> >>> http://www.antlr.org/mailman/options/antlr-interest/your-
> >>> email-address
> >>
> >> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> >> Unsubscribe:
> >> http://www.antlr.org/mailman/options/antlr-interest/your-email-
> addres
> >> s
> >>
> >
> >
> >
> > ----------------------------------------------------------------
> > This message was sent using IMP, the Internet Messaging Program.
> >
> >
> > List: http://www.antlr.org/mailman/listinfo/antlr-interest
> > Unsubscribe:
> > http://www.antlr.org/mailman/options/antlr-interest/your-email-
> address
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
> email-address

From jimi at temporal-wave.com  Wed Oct  5 09:04:46 2011
From: jimi at temporal-wave.com (Jim Idle)
Date: Wed, 5 Oct 2011 09:04:46 -0700
Subject: [antlr-interest] How to make case insensitive token checker for
 the lexical analysis part of antlr in C program?
In-Reply-To: <CAKZS5e-SOhnceFJAu+hDdnFzh4QqLdjJWxYC9zKOnNDYeEqGUw@mail.gmail.com>
References: <CAKZS5e-SOhnceFJAu+hDdnFzh4QqLdjJWxYC9zKOnNDYeEqGUw@mail.gmail.com>
Message-ID: <f7792c600bd286b4037971f44c151cd6@mail.gmail.com>

See the wiki FAQ article. However, the built in conversion is only ASCII
friendly, so you would have to write your own UTF8 version. Then you install
the pointer to your function in place of the default one (look at the source
code for setUcaseLA()) in your input stream.

http://www.antlr.org/wiki/pages/viewpage.action?pageId=1782



Jim



> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of ??
> Sent: Wednesday, October 05, 2011 5:30 AM
> To: antlr-interest at antlr.org
> Subject: [antlr-interest] How to make case insensitive token checker
> for the lexical analysis part of antlr in C program?
>
> Hi,all
>
> I want to convert the token stream into upper case at the time when
> lexical rules are checked.
>
> In java, we can do it in this way:
> <pre>
> public class ANTLRNoCaseStringStream extends ANTLRStringStream {
>     public ANTLRNoCaseStringStream(String input) {
>         super(input);
>     }
>
>     @Override
>     public int LA(int i) {
>         int returnChar = super.LA(i);
>         if (returnChar == CharStream.EOF) {
>             return returnChar;
>         } else if (returnChar == 0) {
>             return returnChar;
>         }
>         return Character.toUpperCase((char) returnChar);
>     }
> }
> </pre>
>
> then,
> <pre>
> // assume that we are going to make a SQL parser.
> SQLLexer lexer = new SQLLexer(new ANTLRNoCaseStringStream(command))
> </pre>
>
> But, my question is that: how to do the same thing in C program?
> I looked into antlr3 C runtime source, but could not find a way to
> archive this.
> In fact, I'm a java programmer, new to C, the source code really
> confused me  >_<
>
> By the way, could you figure out any open sourced C project that using
> antlr3?
>
> Thank you in advance.
>
> --
> ??
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
> email-address

From jimi at temporal-wave.com  Wed Oct  5 09:05:58 2011
From: jimi at temporal-wave.com (Jim Idle)
Date: Wed, 5 Oct 2011 09:05:58 -0700
Subject: [antlr-interest] How to make case insensitive token checker for
 the lexical analysis part of antlr in C program?
In-Reply-To: <CAKZS5e_j3kBiiPV=zn+s1Ob39R7U-uq+hzUF6NzrR0uz1VxdWQ@mail.gmail.com>
References: <CAKZS5e-SOhnceFJAu+hDdnFzh4QqLdjJWxYC9zKOnNDYeEqGUw@mail.gmail.com>
	<CAKZS5e_j3kBiiPV=zn+s1Ob39R7U-uq+hzUF6NzrR0uz1VxdWQ@mail.gmail.com>
Message-ID: <6d96dca7db061e592316cb60403fe160@mail.gmail.com>

Most of the C based projects are not open source. But there are a lot of SQL
parsers using the C engine and a lot of other proprietary products.

Jim



> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of ??
> Sent: Wednesday, October 05, 2011 5:53 AM
> To: antlr-interest at antlr.org
> Subject: Re: [antlr-interest] How to make case insensitive token
> checker for the lexical analysis part of antlr in C program?
>
> I find it in the wiki, thank you all..
> http://www.antlr.org/wiki/pages/viewpage.action?pageId=1782
>
> I still have a question to ask: any C project that using antlr3?
>
> I find many Java project that using antlr, e.g. Hive, Esper (a stream
> process engine) Thanks to these open sourced Java project, I learned a
> lot skills about using antlr3 in java.
>
> we have the wiki (
> http://www.antlr.org/wiki/display/ANTLR3/Using+the+ANTLR3+C+Target)
> but, I want to look for a more complex one.
> So, could you figure out any C project that using antlr3?
>
> Thanks.
>
> --
> ??
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
> email-address

From jimi at temporal-wave.com  Wed Oct  5 10:38:14 2011
From: jimi at temporal-wave.com (Jim Idle)
Date: Wed, 5 Oct 2011 10:38:14 -0700
Subject: [antlr-interest] Looking for freelance work
Message-ID: <791a80d22a2c96bb1f618985558423b3@mail.gmail.com>

The world of freelance work seems to be drying up! If you have any work that
you want to farm out then please contact me off-list. I can work with any of
the ANTLR targets and wrote the C runtime. Though I have been working on
parsers/code gen/compilers for some time, I can pretty much do anything.



Cheers,



Jim

From WeikEngOff at aol.com  Wed Oct  5 10:57:15 2011
From: WeikEngOff at aol.com (Udo Weik)
Date: Wed, 05 Oct 2011 19:57:15 +0200
Subject: [antlr-interest] Jim Idle: Getting names of lexer/parser rules
 from the C-Runtime
Message-ID: <4E8C9A7B.1030607@aol.com>

Hello again Jim,

yep, is that possible at all?


Many thanks and greetings
Udo

From gustaf.j at gmail.com  Wed Oct  5 11:24:49 2011
From: gustaf.j at gmail.com (Gustaf Johansson)
Date: Wed, 5 Oct 2011 20:24:49 +0200
Subject: [antlr-interest] Enabling mismatchedTokenException when filter=true
Message-ID: <CACNvYsJ9+MOqYay7GVRmeemmduU3_iJ5uGsDr-hsbZDat1EAxA@mail.gmail.com>

Hi list,

I would like to "dynamically" enable mismatched token exceptions in a tree
grammar with filter enabled.
Basically i want it to be enabled when a sub-rule matches, so that i can
easily locate what sub-area is problematic and causes the complete rule to
not match.

Is this possible?
I have tried to use @after, manual definition of the catch clause and a few
other variants but my attempts have so far been futile :(

BR Gustaf

From jimi at temporal-wave.com  Wed Oct  5 11:28:09 2011
From: jimi at temporal-wave.com (Jim Idle)
Date: Wed, 5 Oct 2011 11:28:09 -0700
Subject: [antlr-interest] distinguish "3 + 4" from "3 +4"
In-Reply-To: <1317813262.69067.YahooMailNeo@web124909.mail.ne1.yahoo.com>
References: <1317813262.69067.YahooMailNeo@web124909.mail.ne1.yahoo.com>
Message-ID: <a70a682a48c7237c25ec4a80ccbb56ce@mail.gmail.com>

Ambiguities based on whitespace are a bit silly because you cannot catch
errors. How do you know that when the input is:

2 -2

That the user actually has a type and forgot the space after the '-'? You
don't and it will parse as two numbers. If you have any control over this,
then you should rethink it. Use a ',' to separate, and then the whitespace
can be ignored.

However, there are two solutions, the first of which is lexer based and
not really recommended - however sometimes this might be better and it
might help others do similar things. The second is recommended if you
cannot change the input format and is parser based.


Lexer solution:

grammar test;

a : exp* EOF;

exp : atom (PLUS atom)*
    ;

atom
  	: NUMBER
  	;
  	
NUMBER :	'0'..'9'+
    ;

PLUS : '+'
     (
		  ('0'..'9')=> '0'..'9'+ { $type = NUMBER; }
          |
     )
;

MINUS : '-'
     (
		  ('0'..'9')=> '0'..'9'+ { $type = NUMBER; }
          |
     )
;


WS  :   ( ' '
        | '\t'
        | '\r'
        | '\n'
        ) {$channel=HIDDEN;}
    ;


But then you don't have unary precedence 'correct'.

- - - - - - - - - --

Parser solution (with precedence correct):

grammar test;

options { output=AST; }

tokens { UMINUS; UPLUS; }

a : exp* EOF;

exp : uatom
		(
			{ ((TokenStream)input ).get( input.index()+1
).getType() == WS }?=> (PLUS|MINUS)^ uatom
		)*
    ;

uatom
    : MINUS uatom 	-> ^(UMINUS[$MINUS] uatom)
    | PLUS uatom 	-> ^(UPLUS[$PLUS] uatom)
    | atom
    ;

atom
  	: NUMBER
  	;
  	
NUMBER
	:	'0'..'9'+
    ;

PLUS 	: '+'	;
MINUS 	: '-'	;

WS  :   ( ' '
        | '\t'
        ) {$channel=HIDDEN;}
    ;

NL  :   ( '\r'
        | '\n'
        ) {$channel=HIDDEN;}
    ;



> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of Andreas Liebig
> Sent: Wednesday, October 05, 2011 4:14 AM
> To: antlr-interest at antlr.org
> Subject: [antlr-interest] distinguish "3 + 4" from "3 +4"
>
> Hello,
> I am not very experienced with ANTLR, and I would like to ask for some
> ideas how to solve this task:
>
> I have to distinguish input streams like
> "3 + 4" (parsed as three tokens NUMBER PLUS NUMBER) from
> "3 +4" (parsed as NUMBER NUMBER, because the + is part of the number
> +4).
>
> I would like to ignore whitespace in general using the
> "$channel=HIDDEN;" syntax. But only in this situation whitespace does
> matter.
> Can you guide me to a good explanation of a possible solution?
>
> Thanks
> Andreas
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
> email-address

From jimi at temporal-wave.com  Wed Oct  5 11:30:48 2011
From: jimi at temporal-wave.com (Jim Idle)
Date: Wed, 5 Oct 2011 11:30:48 -0700
Subject: [antlr-interest] Jim Idle: Getting names of lexer/parser rules
 from the C-Runtime
In-Reply-To: <4E8C9A7B.1030607@aol.com>
References: <4E8C9A7B.1030607@aol.com>
Message-ID: <5c389e12905ab9af3dd52c4dd85f3b5d@mail.gmail.com>

No - you have to code that. But they are rarely useful. If you want them
as indicators for error refinement, then implement a global scope and add
it to each rule, in the rule set a scope member variable to a predefined
value for each rule, then access the scope stack in the error reporting
method.

Jim

> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of Udo Weik
> Sent: Wednesday, October 05, 2011 10:57 AM
> To: Antlr-Interest Antlr.Org
> Subject: Re: [antlr-interest] Jim Idle: Getting names of lexer/parser
> rules from the C-Runtime
>
> Hello again Jim,
>
> yep, is that possible at all?
>
>
> Many thanks and greetings
> Udo
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
> email-address

From s.barnett-cormack at lancaster.ac.uk  Wed Oct  5 13:04:39 2011
From: s.barnett-cormack at lancaster.ac.uk (Sam Barnett-Cormack)
Date: Wed, 05 Oct 2011 21:04:39 +0100
Subject: [antlr-interest] distinguish "3 + 4" from "3 +4"
In-Reply-To: <1317814841.90119.YahooMailNeo@web124918.mail.ne1.yahoo.com>
References: <1317813262.69067.YahooMailNeo@web124909.mail.ne1.yahoo.com>
	<4E8C3D9A.3000603@lancaster.ac.uk>
	<1317814841.90119.YahooMailNeo@web124918.mail.ne1.yahoo.com>
Message-ID: <4E8CB857.8080903@lancaster.ac.uk>

Leaving out the question of whether it's a good idea or not (it really
depends on your application, and whether you're implementing a language
that's already defined or not).

Anyway, what I'm talking about is done in the lexer, not the parser, so
it would not need to access the hidden channel - just the lookahead. An 
example doing a much more complex version of what I'm saying is 
http://www.antlr.org/wiki/display/ANTLR3/Lexer+grammar+for+floating+point%2C+dot%2C+range%2C+time+specs 
- you can see there's a single rule for matching several things (in your 
case it would be plus and minux arithmetic operators and integer) and 
sets the type appropriately depending on which path it takes through the 
match.

Getting back to whether it's a good idea or not, it's very unusual to 
have the operator be part of the number token, though conceptually I 
suppose it's still an unary operator in that case... but determining 
whether the operator is unary or binary purely by whitespace is 
definitely unusual.

On 05/10/2011 12:40, Andreas Liebig wrote:
> Thank you for the reply, Sam. Is this the int/float wiki article you
> mentioned:
> http://www.antlr.org/wiki/pages/viewpage.action?pageId=3604497 ("How
> can I emit more than a single token per lexer rule?")? Unfortunately
> I cannot see how it helps in my case. The wiki article uses the
> difference in non-whitespace characters, whereas I have to make use
> of the hidden whitespace characters. I read somewhere that it is
> actually possible to check the hidden channel if necessary, but I
> cannot find any details.
>
> One more example for my situation: "3+4" should be parsed as NUMBER
> PLUS NUMBER, the same as "3 + 4".
>
> Still looking forward to more suggestions. Andreas
>
>
>
> ----- Original Message ----- From: Sam
> Barnett-Cormack<s.barnett-cormack at lancaster.ac.uk> To: Andreas
> Liebig<liebigandreas at yahoo.com> Cc:
> "antlr-interest at antlr.org"<antlr-interest at antlr.org> Sent: Wednesday,
> October 5, 2011 1:20 PM Subject: Re: [antlr-interest] distinguish "3
> + 4" from "3 +4"
>
> On 05/10/2011 12:14, Andreas Liebig wrote:
>> Hello, I am not very experienced with ANTLR, and I would like to
>> ask for some ideas how to solve this task:
>>
>> I have to distinguish input streams like "3 + 4" (parsed as three
>> tokens NUMBER PLUS NUMBER) from "3 +4" (parsed as NUMBER NUMBER,
>> because the + is part of the number +4).
>>
>> I would like to ignore whitespace in general using the
>> "$channel=HIDDEN;" syntax. But only in this situation whitespace
>> does matter. Can you guide me to a good explanation of a possible
>> solution?
>
> Don't really know what docs are where, but off the top of my head...
> you need to have your NUMBER lexer rule start with an optional +, or
> presumably actually + or -, so a human-readable version of the
> grammar would have something like
>
> NUMBER : ('+'|'-')? DIGIT+; PLUS : '+'; MINUS : '-';
>
> Of course, ANTLR won't like that, because it's ambiguous. There are a
> few ways to resolve the ambiguity, you'll see one if you look on the
> wiki about how to differentiate between ints and floats in the lexer.
> I can't remember the syntax off the top of my head.
>
> Sam


From s.barnett-cormack at lancaster.ac.uk  Wed Oct  5 13:11:20 2011
From: s.barnett-cormack at lancaster.ac.uk (Sam Barnett-Cormack)
Date: Wed, 05 Oct 2011 21:11:20 +0100
Subject: [antlr-interest] distinguish "3 + 4" from "3 +4"
In-Reply-To: <CAB1D59F.3EFE%douglasgodfrey@gmail.com>
References: <CAB1D59F.3EFE%douglasgodfrey@gmail.com>
Message-ID: <4E8CB9E8.7010109@lancaster.ac.uk>

Yes, I believe that does work, for some reason I was thinking in terms 
of strictly k=1... don't know where my brain's been lately (other than 
dredging policy analysis in education stuff)

Sam

On 05/10/2011 14:39, Douglas Godfrey wrote:
> define a Number lexer rule that parses signed numbers with no intervening
> whitespace between the "+" or "-" and the digits.
>
> Then the parser will receive Number Number instead of  Number Plus Number.
>
> The Plus rule will succeed any time there is whitespace between the sign
> and the number.
>
>
> On 10/5/11 7:14 AM, "Andreas Liebig"<liebigandreas at yahoo.com>  wrote:
>
>> Hello,
>> I am not very experienced with ANTLR, and I would like to ask for some
>> ideas how to solve this task:
>>
>> I have to distinguish input streams like
>> "3 + 4" (parsed as three tokens NUMBER PLUS NUMBER) from
>> "3 +4" (parsed as NUMBER NUMBER, because the + is part of the number +4).
>>
>> I would like to ignore whitespace in general using the "$channel=HIDDEN;"
>> syntax. But only in this situation whitespace does matter.
>> Can you guide me to a good explanation of a possible solution?
>>
>> Thanks
>> Andreas
>>
>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>> Unsubscribe:
>> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address


From vlad at demoninsight.com  Wed Oct  5 17:00:52 2011
From: vlad at demoninsight.com (Vlad)
Date: Wed, 5 Oct 2011 20:00:52 -0400
Subject: [antlr-interest] 3.4 C target release date?
In-Reply-To: <85f4a0537e30f302646122262ddd3094@mail.gmail.com>
References: <6B458D23F5D4A24ABCDB3C78EA97393B02AFFD70@EXCH-VIRTUAL.aerotechad.com>
	<85f4a0537e30f302646122262ddd3094@mail.gmail.com>
Message-ID: <CA4B90E0-4434-46C6-A849-E68D538943F7@demoninsight.com>


"Download/C Runtime Distributions" from the main site leads to http://www.antlr.org/download/C which lists 3.4-beta4 as the last release. Is this the correct location to be looking for a 3.4 C runtime?

Thanks,
Vlad



On Jul 29, 2011, at 1:05 PM, Jim Idle wrote:

> Yeah the docs were holding me up. I will release it tomorrow.
> 
> Jim
> 
>> -----Original Message-----
>> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
>> bounces at antlr.org] On Behalf Of Justin Murray
>> Sent: Friday, July 29, 2011 7:09 AM
>> To: antlr-interest at antlr.org
>> Subject: [antlr-interest] 3.4 C target release date?
>> 
>> Hi Jim,
>> 
>> I'm not trying to rush you or anything, but I am wondering if you have
>> an estimate for the release of the 3.4 C runtime. I'd like to use it in
>> our next release, and with deadlines approaching it would be helpful to
>> know if I'll have time to fit it in or not.
>> 
>> Thank you!
>> 
>> - Justin
>> 
>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
>> email-address
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address


From hellojinjie at gmail.com  Wed Oct  5 22:10:15 2011
From: hellojinjie at gmail.com (=?UTF-8?B?6YeR5p2w?=)
Date: Thu, 6 Oct 2011 13:10:15 +0800
Subject: [antlr-interest] How to make case insensitive token checker for
 the lexical analysis part of antlr in C program?
In-Reply-To: <6d96dca7db061e592316cb60403fe160@mail.gmail.com>
References: <CAKZS5e-SOhnceFJAu+hDdnFzh4QqLdjJWxYC9zKOnNDYeEqGUw@mail.gmail.com>
	<CAKZS5e_j3kBiiPV=zn+s1Ob39R7U-uq+hzUF6NzrR0uz1VxdWQ@mail.gmail.com>
	<6d96dca7db061e592316cb60403fe160@mail.gmail.com>
Message-ID: <CAKZS5e97t9N9caUF4VrfG4iMULc0Ez7kND9JY-HW5ERryxKi5w@mail.gmail.com>

Hi Jim,
Thank you for answering my question.
I am a graduate from Shanghai. Currently working on building a Stream
Process Engine. I need a tool to parse StreamSQL. ANTLR3 is great.

thank you again.


On Thu, Oct 6, 2011 at 12:05 AM, Jim Idle <jimi at temporal-wave.com> wrote:

> Most of the C based projects are not open source. But there are a lot of
> SQL
> parsers using the C engine and a lot of other proprietary products.
>
> Jim
>
>
>
> > -----Original Message-----
> > From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> > bounces at antlr.org] On Behalf Of ??
> > Sent: Wednesday, October 05, 2011 5:53 AM
> > To: antlr-interest at antlr.org
> > Subject: Re: [antlr-interest] How to make case insensitive token
> > checker for the lexical analysis part of antlr in C program?
> >
> > I find it in the wiki, thank you all..
> > http://www.antlr.org/wiki/pages/viewpage.action?pageId=1782
> >
> > I still have a question to ask: any C project that using antlr3?
> >
> > I find many Java project that using antlr, e.g. Hive, Esper (a stream
> > process engine) Thanks to these open sourced Java project, I learned a
> > lot skills about using antlr3 in java.
> >
> > we have the wiki (
> > http://www.antlr.org/wiki/display/ANTLR3/Using+the+ANTLR3+C+Target)
> > but, I want to look for a more complex one.
> > So, could you figure out any C project that using antlr3?
> >
> > Thanks.
> >
> > --
> > ??
> >
> > List: http://www.antlr.org/mailman/listinfo/antlr-interest
> > Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
> > email-address
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>



-- 
??

From Dugald.Wilson at aveva.com  Thu Oct  6 01:15:19 2011
From: Dugald.Wilson at aveva.com (Dugald Wilson)
Date: Thu, 6 Oct 2011 09:15:19 +0100
Subject: [antlr-interest] Problems in skipping unwanted text.
Message-ID: <62F5A9BD1B4B654DA2AA93C0232169710BA020AC75@ukcamsmail07.aveva.com>

Hi,

For quite some time I have working on this home project trying to parse a very complex grammar.  I had a brain wave yesterday on how to skip the difficult bits, at least for the moment. If I were to handle the difficult bits now, I would end up producing a parser for a complete programming language, almost.  Below is an example of the sort of thing I am trying to skip - i.e. the 'where' statement.  Now, because the grammar is such that the 'where' statement, or statements, immediately precede the 'end_type' keyword, I thought I'd gobble to 'end_type'.

In the example below, at the moment, 'typeid' and 'underlyingtype' eventually come down to a simple string identifier of 'a..z'('a-z'|'_')*

type dayinmonth = integer;
?where
??? validrange : {1 <= self <= 31};
end_type;
? 
The modified grammar for this is...

typedecl
??? : 'type' typeid '=' underlyingtype ';' (options {greedy=false;} : .* ) 'end_type' ';'
??? ;

I can't just skip to the next ';' because there may be several statements i.e.

Where
   Label1 : stuff1;
   Label2: stuff2;

What I find is that the '{' and '}' within the gobble process become significant.  In other similar cases I find a '|', or even a carriage return '\r', is significant.  Using the Eclipse add-in, testing just this sub-graph produces different (although successful in both cases) results depending on whether the '{' or '}' is surrounded by whitespace or not.  Somehow, if it is surrounded by whitespace, the '{' token disappears from the parse tree.  But when trying to parse the text properly in context, it throws up an error.  I also found that changing the '{' to '(' removed the error.

In the end, I managed to parse an 12000 line file with only this type of error.

This was a long introduction for just a couple of short questions.  Are there significant characters that can affect the gobble process?  Do I need other options to be able to skip everything to 'end_type'?

Thanks.

Dugald Wilson

_____________________________________________________________________
The information contained in this message, together with any attachments, may be legally privileged or confidential and is intended only for the use of the individual(s) or entity named above. If you are not the intended recipient, you are notified that any dissemination, distribution or copying of this message is strictly prohibited.  If you have received this message in error, please notify us immediately before deleting it.

This message has been checked for all known viruses through MessageLabs Virus Control Centre, for and on behalf of the AVEVA Group. Although no viruses were found it is the recipient's responsibility to ensure that this message is safe for use on their system.

AVEVA Group plc is a Public Limited Company registered in England with registered number 2937296.  The registered office of AVEVA Group plc is High Cross, Madingley Road, Cambridge, England CB3 0HB

From cun23 at yahoo.com  Thu Oct  6 10:15:39 2011
From: cun23 at yahoo.com (amit sehas)
Date: Thu, 6 Oct 2011 10:15:39 -0700 (PDT)
Subject: [antlr-interest] ANTLR performance
Message-ID: <1317921339.44705.YahooMailClassic@web160512.mail.bf1.yahoo.com>

We have been utilizing ANTLR for various needs for quite some time. Many thanks for a great product. We are looking to utilize it for an SQLish language. I had a few questions:

a) is it very difficult to express SQL kind of grammar in LL(*) form, or are you already aware of any attempts to do so?

b) with the above how would it perform with respect to bison. Something in the ballpark of 2X slow down is acceptable to us since, our queries never go beyond 2000 bytes.

we currently utilize Bison and are figuring out the features/performance tradeoff... i understand that the main slow down in the parser comes from backtracking which if the grammar is expressed in LL(k) form it should have less need to do...

Greatly appreciate any help, once again thanks for a great product..



From mglyons at g.cofc.edu  Fri Oct  7 11:45:52 2011
From: mglyons at g.cofc.edu (mglyons)
Date: Fri, 7 Oct 2011 11:45:52 -0700 (PDT)
Subject: [antlr-interest] warning(200), error(201),
	error(211) and error(208).  Help!
Message-ID: <1318013152239-6870610.post@n2.nabble.com>

I am trying to build the grammar for a small language, C-.  I am getting a
long list of errors and am unable to resolve them with google and my
textbook after almost a day of trying.

Here is my grammar:


Here is the list of errors:


--
View this message in context: http://antlr.1301665.n2.nabble.com/warning-200-error-201-error-211-and-error-208-Help-tp6870610p6870610.html
Sent from the ANTLR mailing list archive at Nabble.com.

From jbb at acm.org  Fri Oct  7 12:38:28 2011
From: jbb at acm.org (John B. Brodie)
Date: Fri, 07 Oct 2011 15:38:28 -0400
Subject: [antlr-interest] warning(200), error(201),
 error(211) and error(208).  Help!
In-Reply-To: <1318013152239-6870610.post@n2.nabble.com>
References: <1318013152239-6870610.post@n2.nabble.com>
Message-ID: <1318016308.5242.6.camel@gecko>

Greetings!

On Fri, 2011-10-07 at 11:45 -0700, mglyons wrote:
> I am trying to build the grammar for a small language, C-.  I am getting a
> long list of errors and am unable to resolve them with google and my
> textbook after almost a day of trying.
> 
> Here is my grammar:
> 
> 
> Here is the list of errors:
> 
the attachments did not appear (for me) on the mailing list.
but found the grammar and list of errors on the nabble link.

i did not try to run your grammar through the ANTLR Tool but by
inspection i see two issues:

a) starting with your else parser rule and continuing to the end of the
grammar, all of these rules appear to be better expressed as lexer rules
so make the first letter (at least) of each rule name be an upper case
letter.

b) your compound statement rule does not quote the { and the } so it
consists of just a semantic action that is not valid java code. 

try fixing the above and see what errors/warnings remain from the Tool.

you probably will want/need to left factor several of your rules as the
Tool suggests.

hope this helps...
   -jbb



From jbb at acm.org  Fri Oct  7 12:47:22 2011
From: jbb at acm.org (John B. Brodie)
Date: Fri, 07 Oct 2011 15:47:22 -0400
Subject: [antlr-interest] warning(200), error(201),
 error(211) and error(208).  Help!
In-Reply-To: <1318016308.5242.6.camel@gecko>
References: <1318013152239-6870610.post@n2.nabble.com>
	<1318016308.5242.6.camel@gecko>
Message-ID: <1318016842.5364.1.camel@gecko>

Sorry for replying to my own reply. But I forgot to say the below
advice....

On Fri, 2011-10-07 at 15:38 -0400, John B. Brodie wrote:
> Greetings!
> 
> On Fri, 2011-10-07 at 11:45 -0700, mglyons wrote:
> > I am trying to build the grammar for a small language, C-.  I am getting a
> > long list of errors and am unable to resolve them with google and my
> > textbook after almost a day of trying.
> > 
> > Here is my grammar:
> > 
> > 
> > Here is the list of errors:
> > 
> the attachments did not appear (for me) on the mailing list.
> but found the grammar and list of errors on the nabble link.
> 
> i did not try to run your grammar through the ANTLR Tool but by
> inspection i see two issues:
> 
> a) starting with your else parser rule and continuing to the end of the
> grammar, all of these rules appear to be better expressed as lexer rules
> so make the first letter (at least) of each rule name be an upper case
> letter.

also avoid reserved words in your parser's target language as rule
names. the generated parser code won't compile...

> 
> b) your compound statement rule does not quote the { and the } so it
> consists of just a semantic action that is not valid java code. 
> 
> try fixing the above and see what errors/warnings remain from the Tool.
> 
> you probably will want/need to left factor several of your rules as the
> Tool suggests.
> 
> hope this helps...
>    -jbb
> 
> 
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address




From dawood at us.ibm.com  Fri Oct  7 12:55:43 2011
From: dawood at us.ibm.com (David Wood)
Date: Fri, 7 Oct 2011 15:55:43 -0400
Subject: [antlr-interest] rewrites to capture tree structure and original
	text
Message-ID: <OFB1489ECA.C7338DF7-ON85257922.006D21EA-85257922.006D79EC@us.ibm.com>

I am writing a translator and would like to capture the original text that 
I'm translating.  I've tried something like this in AW

declarationStatement
        :        tableType id tupleDeclList ';' (LINE_COMMENT)? -> 
                        ^(TABLEDECL tableType id tupleDeclList ^(TEXT 
$declarationStatement.text)) 
        ;

In addition, this causes a NPE (see below).   I'm sure I'm making this 
harder and/or have missed something somewhere.  Can someone point in the 
right direction?  Thanks.

[15:54:27] java.lang.NullPointerException
        at 
org.antlr.grammar.v3.DefineGrammarItemsWalker.countAltsForRule(DefineGrammarItemsWalker.java:153)
        at 
org.antlr.grammar.v3.DefineGrammarItemsWalker.rule(DefineGrammarItemsWalker.java:1546)
        at 
org.antlr.grammar.v3.DefineGrammarItemsWalker.rules(DefineGrammarItemsWalker.java:1190)
        at 
org.antlr.grammar.v3.DefineGrammarItemsWalker.grammarSpec(DefineGrammarItemsWalker.java:623)
        at 
org.antlr.grammar.v3.DefineGrammarItemsWalker.grammar_(DefineGrammarItemsWalker.java:315)
        at org.antlr.tool.Grammar.defineGrammarSymbols(Grammar.java:748)
        at 
org.antlr.tool.CompositeGrammar.defineGrammarSymbols(CompositeGrammar.java:369)
        at org.antlr.tool.Grammar.setGrammarContent(Grammar.java:606)
        at 
org.antlr.works.grammar.antlr.ANTLRGrammarEngineImpl.createNewGrammar(ANTLRGrammarEngineImpl.java:192)
        at 
org.antlr.works.grammar.antlr.ANTLRGrammarEngineImpl.createParserGrammar(ANTLRGrammarEngineImpl.java:225)
        at 
org.antlr.works.grammar.antlr.ANTLRGrammarEngineImpl.createCombinedGrammar(ANTLRGrammarEngineImpl.java:203)
        at 
org.antlr.works.grammar.antlr.ANTLRGrammarEngineImpl.createGrammars(ANTLRGrammarEngineImpl.java:165)
        at 
org.antlr.works.grammar.engine.GrammarEngineImpl.getGrammarLanguage(GrammarEngineImpl.java:115)
        at 
org.antlr.works.components.GrammarWindowMenu.getEditTestRigTitle(GrammarWindowMenu.java:244)
        ...

David Wood 
Computing Systems for Wireless Networks
IBM TJ Watson Research Center
dawood at us.ibm.com
914-784-5123 (office), 914-396-6515 (mobile)

From jimi at temporal-wave.com  Fri Oct  7 13:12:20 2011
From: jimi at temporal-wave.com (Jim Idle)
Date: Fri, 7 Oct 2011 13:12:20 -0700
Subject: [antlr-interest] rewrites to capture tree structure and
	original text
In-Reply-To: <OFB1489ECA.C7338DF7-ON85257922.006D21EA-85257922.006D79EC@us.ibm.com>
References: <OFB1489ECA.C7338DF7-ON85257922.006D21EA-85257922.006D79EC@us.ibm.com>
Message-ID: <782fdcd4604fc9e0ad9267e1380eeb50@mail.gmail.com>

You don't need to do this. If you want the text that makes up that part of
the tree, you can use the start and end tokens in the tree parser and
write a few lines of java that will give you the text. Placing it in the
tree is just duplicating it.

Jim

> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of David Wood
> Sent: Friday, October 07, 2011 12:56 PM
> To: Antlr List
> Subject: [antlr-interest] rewrites to capture tree structure and
> original text
>
> I am writing a translator and would like to capture the original text
> that I'm translating.  I've tried something like this in AW
>
> declarationStatement
>         :        tableType id tupleDeclList ';' (LINE_COMMENT)? ->
>                         ^(TABLEDECL tableType id tupleDeclList ^(TEXT
> $declarationStatement.text))
>         ;
>
> In addition, this causes a NPE (see below).   I'm sure I'm making this
> harder and/or have missed something somewhere.  Can someone point in
> the right direction?  Thanks.
>
> [15:54:27] java.lang.NullPointerException
>         at
> org.antlr.grammar.v3.DefineGrammarItemsWalker.countAltsForRule(DefineGr
> ammarItemsWalker.java:153)
>         at
> org.antlr.grammar.v3.DefineGrammarItemsWalker.rule(DefineGrammarItemsWa
> lker.java:1546)
>         at
> org.antlr.grammar.v3.DefineGrammarItemsWalker.rules(DefineGrammarItemsW
> alker.java:1190)
>         at
> org.antlr.grammar.v3.DefineGrammarItemsWalker.grammarSpec(DefineGrammar
> ItemsWalker.java:623)
>         at
> org.antlr.grammar.v3.DefineGrammarItemsWalker.grammar_(DefineGrammarIte
> msWalker.java:315)
>         at
> org.antlr.tool.Grammar.defineGrammarSymbols(Grammar.java:748)
>         at
> org.antlr.tool.CompositeGrammar.defineGrammarSymbols(CompositeGrammar.j
> ava:369)
>         at org.antlr.tool.Grammar.setGrammarContent(Grammar.java:606)
>         at
> org.antlr.works.grammar.antlr.ANTLRGrammarEngineImpl.createNewGrammar(A
> NTLRGrammarEngineImpl.java:192)
>         at
> org.antlr.works.grammar.antlr.ANTLRGrammarEngineImpl.createParserGramma
> r(ANTLRGrammarEngineImpl.java:225)
>         at
> org.antlr.works.grammar.antlr.ANTLRGrammarEngineImpl.createCombinedGram
> mar(ANTLRGrammarEngineImpl.java:203)
>         at
> org.antlr.works.grammar.antlr.ANTLRGrammarEngineImpl.createGrammars(ANT
> LRGrammarEngineImpl.java:165)
>         at
> org.antlr.works.grammar.engine.GrammarEngineImpl.getGrammarLanguage(Gra
> mmarEngineImpl.java:115)
>         at
> org.antlr.works.components.GrammarWindowMenu.getEditTestRigTitle(Gramma
> rWindowMenu.java:244)
>         ...
>
> David Wood
> Computing Systems for Wireless Networks
> IBM TJ Watson Research Center
> dawood at us.ibm.com
> 914-784-5123 (office), 914-396-6515 (mobile)
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
> email-address

From mglyons at g.cofc.edu  Fri Oct  7 13:16:58 2011
From: mglyons at g.cofc.edu (mglyons)
Date: Fri, 7 Oct 2011 13:16:58 -0700 (PDT)
Subject: [antlr-interest] warning(200), error(201),
	error(211) and error(208).  Help!
In-Reply-To: <1318016842.5364.1.camel@gecko>
References: <1318013152239-6870610.post@n2.nabble.com>
	<1318016308.5242.6.camel@gecko> <1318016842.5364.1.camel@gecko>
Message-ID: <1318018618372-6870992.post@n2.nabble.com>

Thanks for the quick response John B.  

In the pdf I have that is instructing how to write this grammar it says
this:

/The keywords of the language are the following:/
*else if int return void while*
/All keywrods are reserved, and must be written in lowercase./

I assumed that meant that they had to be lower case in my grammar.  Am I
interpreting it incorrectly?

As for putting quote marks around the { and }, I added that.



Now I am getting these errors:

*[16:15:24] error(211): Cminus.g:31:11: [fatal] rule slct_stmt has non-LL(*)
decision due to recursive rule invocations reachable from alts 1,2.  Resolve
by left-factoring or using syntactic predicates or using backtrack=true
option.
[16:15:24] error(211): Cminus.g:37:7: [fatal] rule expr has non-LL(*)
decision due to recursive rule invocations reachable from alts 1,2.  Resolve
by left-factoring or using syntactic predicates or using backtrack=true
option.
[16:15:25] error(211): Cminus.g:41:13: [fatal] rule simple_expr has
non-LL(*) decision due to recursive rule invocations reachable from alts
1,2.  Resolve by left-factoring or using syntactic predicates or using
backtrack=true option.
[16:15:25] warning(200): Cminus.g:69:14: 
Decision can match input such as "<EOT>" using multiple alternatives: 1, 2

As a result, alternative(s) 2 were disabled for that input
[16:15:25] error(201): Cminus.g:69:14: The following alternatives can never
be matched: 2

[16:15:25] warning(200): Cminus.g:70:14: 
Decision can match input such as "<EOT>" using multiple alternatives: 1, 2

As a result, alternative(s) 2 were disabled for that input
[16:15:25] error(201): Cminus.g:70:14: The following alternatives can never
be matched: 2

[16:15:25] error(208): Cminus.g:70:1: The following token definitions can
never be matched because prior tokens match the same input: NUM*

I will have to look into how to left-factor.

--
View this message in context: http://antlr.1301665.n2.nabble.com/warning-200-error-201-error-211-and-error-208-Help-tp6870610p6870992.html
Sent from the ANTLR mailing list archive at Nabble.com.

From jbb at acm.org  Fri Oct  7 13:43:20 2011
From: jbb at acm.org (John B. Brodie)
Date: Fri, 07 Oct 2011 16:43:20 -0400
Subject: [antlr-interest] warning(200), error(201),
 error(211) and error(208).  Help!
In-Reply-To: <1318018618372-6870992.post@n2.nabble.com>
References: <1318013152239-6870610.post@n2.nabble.com>
	<1318016308.5242.6.camel@gecko> <1318016842.5364.1.camel@gecko>
	<1318018618372-6870992.post@n2.nabble.com>
Message-ID: <1318020200.10473.4.camel@gecko>

On Fri, 2011-10-07 at 13:16 -0700, mglyons wrote:
> Thanks for the quick response John B.  
> 
> In the pdf I have that is instructing how to write this grammar it says
> this:
> 
> /The keywords of the language are the following:/
> *else if int return void while*
> /All keywrods are reserved, and must be written in lowercase./

> 
> I assumed that meant that they had to be lower case in my grammar.  Am I
> interpreting it incorrectly?

the quoted string for the keyword should be lower case as you have
correctly interpreted. but the rule name should be upper case in order
for it to be considered a rule governing Lexical Analysis rather than
Parsing by the ANTLR Tool. so instead of:

else : 'else' ;

do:

ELSE : 'else' ;

and likewise for your other keyword rules.

> 
> As for putting quote marks around the { and }, I added that.
> 
> 
> 
> Now I am getting these errors:
....remainder snipped....


From jokeserver at gmail.com  Fri Oct  7 14:17:39 2011
From: jokeserver at gmail.com (Benjamin S Wolf)
Date: Fri, 7 Oct 2011 14:17:39 -0700
Subject: [antlr-interest] Antlr3.4 Python bugs, workarounds
In-Reply-To: <CAN51Nt60R=9DF1+BWvsnMQShLE7GRpXmm5o30DnZ+KLZq8duUA@mail.gmail.com>
References: <CAN51Nt60R=9DF1+BWvsnMQShLE7GRpXmm5o30DnZ+KLZq8duUA@mail.gmail.com>
Message-ID: <CAN51Nt4Dp7yMUSkNqYnrkMvthRB2p0UA4g4TB5DZhi-ywn0THA@mail.gmail.com>

I've discovered two bugs in working with the Python target to generate lexers.

The first is in that when supplying k, the generated code for special
state transitions is invalid: the "elif" keyword is split across lines
as "el\nif", so the python interpreter crashes upon reading "el". I've
been working around this in vim by running the following command in
the generated file:

:%s/\( \+\)el\n\1/\1el/

(Replaces "el\n" preceded and followed with n spaces by n spaces
followed by "el".)

The second is in the Python antlr3 library. Calling getTokens() on a
CommonTokenStream will return all but the last token. This is because
the slice notation [start:stop] is inclusive on the left and exclusive
on the right, but stop is set to len(self.tokens) - 1.
http://www.antlr.org/api/Python/antlr3_8py-source.html#l01733

This can be fixed by finding the following lines in getTokens() (in
antlr3/streams.py):

if stop is None or stop >= len(self.tokens):
? ?stop = len(self.tokens) - 1

and changing them to

if stop is None or stop > len(self.tokens):
? ?stop = len(self.tokens)

or it can be worked around by using the tokens attribute directly.

--Ben

From mglyons at g.cofc.edu  Fri Oct  7 16:22:33 2011
From: mglyons at g.cofc.edu (mglyons)
Date: Fri, 7 Oct 2011 16:22:33 -0700 (PDT)
Subject: [antlr-interest] warning(200), error(201),
	error(211) and error(208).  Help!
In-Reply-To: <1318020200.10473.4.camel@gecko>
References: <1318013152239-6870610.post@n2.nabble.com>
	<1318016308.5242.6.camel@gecko> <1318016842.5364.1.camel@gecko>
	<1318018618372-6870992.post@n2.nabble.com>
	<1318020200.10473.4.camel@gecko>
Message-ID: <1318029753033-6871509.post@n2.nabble.com>

Thanks again!  I did what you said and also figured out how to do some
left-factoring.  I had to fix 3 left-factoring issues and resolved two of
them.  This one I cannot seem to figure out:

*expr		: var '=' expr | simple_expr;*

I do not think you need any more info to solve or understand that one.  I
need some guidance or a push in the right direction for this one.

My long list of errors is getting smaller and smaller and it feels good. 
After I finish this last left-factor problem, I will move on to the other
issues.

Thanks again in advance for any help.

--
View this message in context: http://antlr.1301665.n2.nabble.com/warning-200-error-201-error-211-and-error-208-Help-tp6870610p6871509.html
Sent from the ANTLR mailing list archive at Nabble.com.

From jbb at acm.org  Fri Oct  7 18:09:10 2011
From: jbb at acm.org (John B. Brodie)
Date: Fri, 07 Oct 2011 21:09:10 -0400
Subject: [antlr-interest] warning(200), error(201),
 error(211) and error(208).  Help!
In-Reply-To: <1318029753033-6871509.post@n2.nabble.com>
References: <1318013152239-6870610.post@n2.nabble.com>
	<1318016308.5242.6.camel@gecko> <1318016842.5364.1.camel@gecko>
	<1318018618372-6870992.post@n2.nabble.com>
	<1318020200.10473.4.camel@gecko>
	<1318029753033-6871509.post@n2.nabble.com>
Message-ID: <1318036150.13716.11.camel@gecko>

On Fri, 2011-10-07 at 16:22 -0700, mglyons wrote:
> Thanks again!  I did what you said and also figured out how to do some
> left-factoring.  I had to fix 3 left-factoring issues and resolved two of
> them.  This one I cannot seem to figure out:
> 
> *expr		: var '=' expr | simple_expr;*
> 
> I do not think you need any more info to solve or understand that one. I
> need some guidance or a push in the right direction for this one.

actually without seeing the rest of the grammar i am not really sure.
but it looks like you can recast the above expr rule as this:

expr : ( var '=' )* simple_expr ;

however this will introduce an ambiguity if var is a complex structure
that can match an infinite sentential form, which is probably the case
in your c-like language...

> 
> My long list of errors is getting smaller and smaller and it feels good. 
> After I finish this last left-factor problem, I will move on to the other
> issues.
> 

sometimes, i find, that when trying to convert an existing grammar into
the LL(*) form used by ANTLR that it can be easier to start with a very
small unambiguous "core" portion of the original language and then add
language features slowly in small steps resolving any issues that arise
at each small step. build up a suite of short sentential forms that
exercise the grammar at each step and that can be used to regression
test the next step in order to ensure no language feature got broken as
the grammar evolves.



From mglyons at g.cofc.edu  Fri Oct  7 19:26:18 2011
From: mglyons at g.cofc.edu (mglyons)
Date: Fri, 7 Oct 2011 19:26:18 -0700 (PDT)
Subject: [antlr-interest] warning(200), error(201),
	error(211) and error(208).  Help!
In-Reply-To: <1318036150.13716.11.camel@gecko>
References: <1318013152239-6870610.post@n2.nabble.com>
	<1318016308.5242.6.camel@gecko> <1318016842.5364.1.camel@gecko>
	<1318018618372-6870992.post@n2.nabble.com>
	<1318020200.10473.4.camel@gecko>
	<1318029753033-6871509.post@n2.nabble.com>
	<1318036150.13716.11.camel@gecko>
Message-ID: <1318040778833-6871692.post@n2.nabble.com>

Here is the rest of the grammar for you since you said you needed more to be
sure:




Thanks for the tip at the bottom of the previous post.  That could come in
handy.

--
View this message in context: http://antlr.1301665.n2.nabble.com/warning-200-error-201-error-211-and-error-208-Help-tp6870610p6871692.html
Sent from the ANTLR mailing list archive at Nabble.com.

From ruslan_zasukhin at valentina-db.com  Sat Oct  8 02:54:11 2011
From: ruslan_zasukhin at valentina-db.com (Ruslan Zasukhin)
Date: Sat, 08 Oct 2011 12:54:11 +0300
Subject: [antlr-interest] rewrites to capture tree structure and
 original text
In-Reply-To: <782fdcd4604fc9e0ad9267e1380eeb50@mail.gmail.com>
Message-ID: <CAB5F873.F337E%ruslan_zasukhin@valentina-db.com>

On 10/7/11 11:12 PM, "Jim Idle" <jimi at temporal-wave.com> wrote:

> You don't need to do this. If you want the text that makes up that part of
> the tree, you can use the start and end tokens in the tree parser and
> write a few lines of java that will give you the text. Placing it in the
> tree is just duplicating it.

Hi Jim,
Hi Terence,

Actually I want only underline point I already have expressed before.

I think, that ANTLR should include such utility methods.
Users of ANTLR should not invent each time such "simple" algs.

Set of this algs can be and should be official and fixed and documented and
be consistent for all targets

Java

String  JointTextOfTokens(
    Token inStartToken,
    Token inEndToken )
{

}



c:

pANTLR3_STRING  JointTextOfTokens(
    Token* inStartToken,
    Token* inEndToken )
{

}



This can save many hours to users of your product.



-- 
Best regards,

Ruslan Zasukhin
VP Engineering and New Technology
Paradigma Software, Inc

Valentina - Joining Worlds of Information
http://www.paradigmasoft.com

[I feel the need: the need for speed]



From stfairy at gmail.com  Sat Oct  8 06:25:41 2011
From: stfairy at gmail.com (Xiao Jia)
Date: Sat, 8 Oct 2011 21:25:41 +0800
Subject: [antlr-interest] Transform postfix_expression in C grammar to AST
Message-ID: <CAGH2GB9A2EKiNN8agNYLAxTj1OM3M+y-CokA0aOvBfgxvjf7dQ@mail.gmail.com>

Hi,

I'm learning ANTLR by modifying the C grammar and trying something interests
myself. The C grammar I started with is from:
http://www.antlr.org/grammar/1153358328744/C.g

Now I want to transform postfix_expression to its corresponding AST but
haven't known anything related to the transformation of the form xx
(aa|bb|cc)* yy

...
unary_expression
  : postfix_expression
  | unary_operator*^* unary_expression
  ;

postfix_expression
  : primary_expression
  ( '[' expression ']'
  | '(' ')'
  | '(' argument_expression_list ')'
  | '.' ID
  )*
  ;

unary_operator
  : '+'
  | '-'
  | '~'
  | '!'
  ;
...

Can you help me with this?

Thanks,
Xiao Jia

From ivan.bludov at gmail.com  Sun Oct  9 02:35:45 2011
From: ivan.bludov at gmail.com (Ivan Bludov)
Date: Sun, 09 Oct 2011 13:35:45 +0400
Subject: [antlr-interest] ISO SQL 2003 Grammar
Message-ID: <1318152945.19054.9.camel@blood-pc>

Hi all.
I'm also playing with SQL2003 grammar posted on your site. So as
mentioned previously sqlParser has some antlr building problems. I
figure out that this problems depends of antrl version. So with the
antlr-3.4 code-generation fails with stack-overflow exception, it seems
to fall into infinite loop. So with the antlr-3.3 version the
code-generation is successful, but the generated parser has some errors
of swith statement


From ivan.bludov at gmail.com  Sun Oct  9 03:03:34 2011
From: ivan.bludov at gmail.com (Ivan Bludov)
Date: Sun, 09 Oct 2011 14:03:34 +0400
Subject: [antlr-interest] ISO SQL 2003 Grammar
Message-ID: <1318154614.19054.22.camel@blood-pc>

Hi all.
I'm playing with SQL2003 grammar posted on your site
(http://www.antlr.org/grammar/1304304798093/SQL2003_Grammar.zip). So as
mentioned previously sqlParser has some antlr building problems. I
figured out that this problems depends on antrl version. So with the
antlr-3.4 code-generation fails with stack-overflow exception, it seems
to fall into infinite loop. So with the antlr-3.3 version the
code-generation is successful, but the generated parser has "duplicate
case" errors of switch statement. So could you make some advice to fix
the problem? Although this problem may correspond to some internal antlr
bug.  

I also tested this grammar with antlr-3.2 and the lexer and the parser
have some other building problems both.

Ivan Bludov


From douglasgodfrey at gmail.com  Sun Oct  9 08:56:04 2011
From: douglasgodfrey at gmail.com (Douglas Godfrey)
Date: Sun, 09 Oct 2011 11:56:04 -0400
Subject: [antlr-interest] ISO SQL 2003 Grammar
In-Reply-To: <1318154614.19054.22.camel@blood-pc>
Message-ID: <CAB73A43.41B0%douglasgodfrey@gmail.com>

To be able to build this grammar you must use Java 1.6 64bit with
a java heap size of 8GB. This requires a 64bit CPU & OS and more than
8GB or system memory. This is documented in the comments at the top
of the parser grammar.  I have also posted numerous notes on how to
transform this grammar so it will build with less memory. If you have
the time available, you are welcome to give it a try. Search the past
postings on Antlr-Interest for SQL2003.


>From the SQL2003Parser.g file:
// !!WARNING!! This grammar requires 64bit Java 1.6 and heap size for
AntlrWorks [1GB] and Antlr [8GB] or greater.
// 
// !!WARNING!! Your PC or Mac will require 10GB RAM or greater!
//
// You need to specify the heap size separately for both AntlrWorks and
for Antlr [when it is run by AntlrWorks]
// specify -Xmx8G in AntlrWorks::Preferences::General::ANTLR_options
// specify -Xmx1G on the Java command line for invoking AntlrWorks
//
// java16 -d64 -jar antlr_33_complete.jar -Xmx8G -Xwatchconversion
sql2003Parser.g
//
// on Mac OS X right-click the ANTLRWorks.app package, select Show Package
Contents and edit the info.plist file
//   add a new child to the Java property
//     Key   = VMOptions
//     Value = [string] -Xms256m -Xmx1G
//     Key   = VMArchs
//     Value = [array] [string] x86_64
//
//   or in XML format
//    <key>Java</key>
//    <dict>
//        <key>ClassPath</key>
//        <string>$JAVAROOT/antlrworks.jar</string>
//        <key>JVMVersion</key>
//        <string>1.6</string>
//        <key>MainClass</key>
//        <string>org.antlr.works.IDE</string>
//        <key>VMOptions</key>
//        <string>-Xmx1G</string>
//        <key>JVMArchs</key>
//        <array>
//          <string>x86_64</string>
//        </array> 
//    </dict>
//
// This SQL 2003 grammar has near-infinite look-ahead in some of the rules
relating to SQL expressions.
// The grammar will not generate no matter how much memory you have until
the infinite look-ahead is resolved.
// The likely culpret is the cluster of rules involving predicate,
value_expression, value_expression_primary,
// and nonparenthesized_value_expression_primary.
//
// If you manage to resolve the infinite lookahead, please repost the
updated grammar on the Antlr.org site




On 10/9/11 6:03 AM, "Ivan Bludov" <ivan.bludov at gmail.com> wrote:

>Hi all.
>I'm playing with SQL2003 grammar posted on your site
>(http://www.antlr.org/grammar/1304304798093/SQL2003_Grammar.zip). So as
>mentioned previously sqlParser has some antlr building problems. I
>figured out that this problems depends on antrl version. So with the
>antlr-3.4 code-generation fails with stack-overflow exception, it seems
>to fall into infinite loop. So with the antlr-3.3 version the
>code-generation is successful, but the generated parser has "duplicate
>case" errors of switch statement. So could you make some advice to fix
>the problem? Although this problem may correspond to some internal antlr
>bug.  
>
>I also tested this grammar with antlr-3.2 and the lexer and the parser
>have some other building problems both.
>
>Ivan Bludov
>
>
>List: http://www.antlr.org/mailman/listinfo/antlr-interest
>Unsubscribe: 
>http://www.antlr.org/mailman/options/antlr-interest/your-email-address



From parrt at cs.usfca.edu  Sun Oct  9 18:34:41 2011
From: parrt at cs.usfca.edu (Terence Parr)
Date: Sun, 9 Oct 2011 18:34:41 -0700
Subject: [antlr-interest] Report of GUI's death greatly exaggerated
Message-ID: <2942173C-E091-433C-B92B-61AC57F322DC@cs.usfca.edu>

some snapshots of ANTLRWorks v2 in progress...

http://www.antlr.org/wiki/display/~admin/2011/10/09/Report+of+GUI%27s+death+greatly+exaggerated

ter

From ivan.bludov at gmail.com  Sun Oct  9 20:51:40 2011
From: ivan.bludov at gmail.com (Ivan Bludov)
Date: Mon, 10 Oct 2011 07:51:40 +0400
Subject: [antlr-interest] ISO SQL 2003 Grammar
In-Reply-To: <CAB73A43.41B0%douglasgodfrey@gmail.com>
References: <1318154614.19054.22.camel@blood-pc>
	<CAB73A43.41B0%douglasgodfrey@gmail.com>
Message-ID: <CAJN5NKBiP9MORj6OCMEs+phk6VZj=Z+QxS2DDqCi7yy++Ci3kQ@mail.gmail.com>

So as I wrote I read your?previous?posts ( and file comments of
cause). So at first I was surprised enough that so much system
resources was needed. But as Terence wrote "With 3.3 I find that it
terminates in 12s on my box with 220M ram"
(http://www.antlr.org/pipermail/antlr-interest/2011-April/041439.html).
So I got the same result with antl 3.3. So build results depend on
antlr version (different results on different antlr version). So with
antl 3.4 the building process seems to fall into infinite loop and
thus system resources don't matter. So with 3.3 build result is
successful about few seconds, but the generated parser has some
errors. The critical problem - I think - is that the parser has
duplicated (identical) case in some switch statements. So I posted
these thoughts.

Douglas Godfrey, I appreciate your work on SQL2003 parser. But I
couldn't see the work result. Could you write your environment? Antlr
version? Have you already use your generated parser in some another
project? Because the generated parser has some another errors: "big
grammar" problem with 64kbyte class - but it is another problem.

Ivan Bludov

From michael.bedward at gmail.com  Sun Oct  9 21:22:38 2011
From: michael.bedward at gmail.com (Michael Bedward)
Date: Mon, 10 Oct 2011 15:22:38 +1100
Subject: [antlr-interest] Report of GUI's death greatly exaggerated
In-Reply-To: <2942173C-E091-433C-B92B-61AC57F322DC@cs.usfca.edu>
References: <2942173C-E091-433C-B92B-61AC57F322DC@cs.usfca.edu>
Message-ID: <CACJVtdMQkNdHYspJoDCkPA-nt4Nn14pCH7i1=xSF+ykmiaEisA@mail.gmail.com>

As a long-time NB user I really like the sound of ANTLRWorks becoming
an NB Platform app. Just two things I'd be cautious about:

1. Oracle's commitment and what this means for platform stability.
Recent events, such as dropping support for the Python and Ruby
plugins (euphemistically termed "giving them to the community") raise
worries about Oracle's commitment to anything that isn't seen as
commercially attractive in the very short term.

2. The NB Platform itself is such a moving target, although perhaps
this perception is more a comment on my neurons slowing with advancing
age.

But in general, nice one !

Michael


On 10 October 2011 12:34, Terence Parr <parrt at cs.usfca.edu> wrote:
> some snapshots of ANTLRWorks v2 in progress...
>
> http://www.antlr.org/wiki/display/~admin/2011/10/09/Report+of+GUI%27s+death+greatly+exaggerated
>
> ter
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>

From stefika at gmail.com  Mon Oct 10 06:39:23 2011
From: stefika at gmail.com (Andreas Stefik)
Date: Mon, 10 Oct 2011 08:39:23 -0500
Subject: [antlr-interest] Report of GUI's death greatly exaggerated
In-Reply-To: <CACJVtdMQkNdHYspJoDCkPA-nt4Nn14pCH7i1=xSF+ykmiaEisA@mail.gmail.com>
References: <2942173C-E091-433C-B92B-61AC57F322DC@cs.usfca.edu>
	<CACJVtdMQkNdHYspJoDCkPA-nt4Nn14pCH7i1=xSF+ykmiaEisA@mail.gmail.com>
Message-ID: <CABiHOJ=fYXm3VS=NnfLMtLSRUn9h67Wf25QN2cmqC4KusWRhRw@mail.gmail.com>

On Sun, Oct 9, 2011 at 11:22 PM, Michael Bedward
<michael.bedward at gmail.com> wrote:
> As a long-time NB user I really like the sound of ANTLRWorks becoming
> an NB Platform app. Just two things I'd be cautious about:
>
> 1. Oracle's commitment and what this means for platform stability.
> Recent events, such as dropping support for the Python and Ruby
> plugins (euphemistically termed "giving them to the community") raise
> worries about Oracle's commitment to anything that isn't seen as
> commercially attractive in the very short term.

I recall when Ruby support was dropped, they showed some statistics
from the Gesture collector on how many people use it. So far as I
recall, it was dropped because very, very few people actually used the
plugins. I don't remember the stats off the top of my head, but at the
time I recall thinking it was probably the right decision. Since that
time, they've been able to dedicate more resources to other projects,
many of which are really neat (~7.1 branch).

So, I don't work for Oracle and have no vested interest, but I don't
think it was so much commercial interests as it was a lack of interest
from the community.

Just my opinion. Awesome work, Ter, you and Sam are moving going fast!

Stefik

From parrt at cs.usfca.edu  Mon Oct 10 10:27:25 2011
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon, 10 Oct 2011 10:27:25 -0700
Subject: [antlr-interest] Report of GUI's death greatly exaggerated
In-Reply-To: <CACJVtdMQkNdHYspJoDCkPA-nt4Nn14pCH7i1=xSF+ykmiaEisA@mail.gmail.com>
References: <2942173C-E091-433C-B92B-61AC57F322DC@cs.usfca.edu>
	<CACJVtdMQkNdHYspJoDCkPA-nt4Nn14pCH7i1=xSF+ykmiaEisA@mail.gmail.com>
Message-ID: <749E8AE8-8DEB-486F-B037-E9C775052121@cs.usfca.edu>

 Oracle is now definitely committed to NB, per the JavaOne discussions of roadmap.   all development environment platforms are moving targets, but NetBeans seems to be better than eclipse and intellij in this respect. :)

Ter
On Oct 9, 2011, at 9:22 PM, Michael Bedward wrote:

> As a long-time NB user I really like the sound of ANTLRWorks becoming
> an NB Platform app. Just two things I'd be cautious about:
> 
> 1. Oracle's commitment and what this means for platform stability.
> Recent events, such as dropping support for the Python and Ruby
> plugins (euphemistically termed "giving them to the community") raise
> worries about Oracle's commitment to anything that isn't seen as
> commercially attractive in the very short term.
> 
> 2. The NB Platform itself is such a moving target, although perhaps
> this perception is more a comment on my neurons slowing with advancing
> age.
> 
> But in general, nice one !
> 
> Michael
> 
> 
> On 10 October 2011 12:34, Terence Parr <parrt at cs.usfca.edu> wrote:
>> some snapshots of ANTLRWorks v2 in progress...
>> 
>> http://www.antlr.org/wiki/display/~admin/2011/10/09/Report+of+GUI%27s+death+greatly+exaggerated
>> 
>> ter
>> 
>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>> 
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address


From parrt at cs.usfca.edu  Mon Oct 10 10:27:54 2011
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon, 10 Oct 2011 10:27:54 -0700
Subject: [antlr-interest] Report of GUI's death greatly exaggerated
In-Reply-To: <CABiHOJ=fYXm3VS=NnfLMtLSRUn9h67Wf25QN2cmqC4KusWRhRw@mail.gmail.com>
References: <2942173C-E091-433C-B92B-61AC57F322DC@cs.usfca.edu>
	<CACJVtdMQkNdHYspJoDCkPA-nt4Nn14pCH7i1=xSF+ykmiaEisA@mail.gmail.com>
	<CABiHOJ=fYXm3VS=NnfLMtLSRUn9h67Wf25QN2cmqC4KusWRhRw@mail.gmail.com>
Message-ID: <AE502720-CC72-43B5-A992-88DAB350B70A@cs.usfca.edu>

Andreas, I will be contacting you about the debugger at some point :) congratulations again on your design award at JavaOne for SodBeans.

Ter
On Oct 10, 2011, at 6:39 AM, Andreas Stefik wrote:

> On Sun, Oct 9, 2011 at 11:22 PM, Michael Bedward
> <michael.bedward at gmail.com> wrote:
>> As a long-time NB user I really like the sound of ANTLRWorks becoming
>> an NB Platform app. Just two things I'd be cautious about:
>> 
>> 1. Oracle's commitment and what this means for platform stability.
>> Recent events, such as dropping support for the Python and Ruby
>> plugins (euphemistically termed "giving them to the community") raise
>> worries about Oracle's commitment to anything that isn't seen as
>> commercially attractive in the very short term.
> 
> I recall when Ruby support was dropped, they showed some statistics
> from the Gesture collector on how many people use it. So far as I
> recall, it was dropped because very, very few people actually used the
> plugins. I don't remember the stats off the top of my head, but at the
> time I recall thinking it was probably the right decision. Since that
> time, they've been able to dedicate more resources to other projects,
> many of which are really neat (~7.1 branch).
> 
> So, I don't work for Oracle and have no vested interest, but I don't
> think it was so much commercial interests as it was a lack of interest
> from the community.
> 
> Just my opinion. Awesome work, Ter, you and Sam are moving going fast!
> 
> Stefik


From ivan.bludov at gmail.com  Mon Oct 10 12:04:08 2011
From: ivan.bludov at gmail.com (Ivan Bludov)
Date: Mon, 10 Oct 2011 23:04:08 +0400
Subject: [antlr-interest] ISO SQL 2003 Grammar
In-Reply-To: <CAB73A43.41B0%douglasgodfrey@gmail.com>
References: <1318154614.19054.22.camel@blood-pc>
	<CAB73A43.41B0%douglasgodfrey@gmail.com>
Message-ID: <CAJN5NKAm8_Lu7OyfrOMzW8NvvPv+SEkKGc6vi2iduwvfT9C7bw@mail.gmail.com>

By the way there are generated java parser and lexer included in the
corresponded SQL archive
(http://www.antlr.org/grammar/1304304798093/SQL2003_Grammar.zip). So
lexer is built with antlr 3.4 and the parser with antlr-3.3. As I
wrote I didn't meet any problems for building with antlr-3.3 on my
laptop with 4G RAM. But your attached java files couldn't be compiled
because they include errors previously described:

Description	Resource	Path	Location	Type
Duplicate case	sql2003Parser.java	/SQLParser/src	line 12242	Java Problem
Duplicate case	sql2003Parser.java	/SQLParser/src	line 12429	Java Problem
Duplicate case	sql2003Parser.java	/SQLParser/src	line 12430	Java Problem
Duplicate case	sql2003Parser.java	/SQLParser/src	line 12449	Java Problem
Duplicate case	sql2003Parser.java	/SQLParser/src	line 12450	Java Problem
Incompatible operand types String and
char	sql2003Parser.java	/SQLParser/src	line 43570	Java Problem
Incompatible operand types String and
char	sql2003Parser.java	/SQLParser/src	line 44421	Java Problem
Incompatible operand types String and
char	sql2003Parser.java	/SQLParser/src	line 103395	Java Problem
Incompatible operand types String and
char	sql2003Parser.java	/SQLParser/src	line 103693	Java Problem
Incompatible operand types String and
char	sql2003Parser.java	/SQLParser/src	line 105472	Java Problem
Incompatible operand types String and
char	sql2003Parser.java	/SQLParser/src	line 105677	Java Problem
Incompatible operand types String and
char	sql2003Parser.java	/SQLParser/src	line 106066	Java Problem
Invalid character constant	sql2003Parser.java	/SQLParser/src	line
102659	Java Problem
Invalid character constant	sql2003Parser.java	/SQLParser/src	line
102716	Java Problem
Syntax error on tokens, ( expected
instead	sql2003Parser.java	/SQLParser/src	line 96985	Java Problem
Syntax error, insert ";" to complete
BlockStatements	sql2003Parser.java	/SQLParser/src	line 96985	Java
Problem
Syntax error, insert ")" to complete
Expression	sql2003Parser.java	/SQLParser/src	line 96985	Java Problem
Syntax error, insert "AssignmentOperator Expression" to complete
Assignment	sql2003Parser.java	/SQLParser/src	line 96985	Java Problem
The code for the static initializer is exceeding the 65535 bytes
limit	sql2003Parser.java	/SQLParser/src	line 12	Java Problem
The left-hand side of an assignment must be a
variable	sql2003Parser.java	/SQLParser/src	line 96985	Java Problem
The method SKIP() is undefined for the type
sql2003Lexer	sql2003Lexer.java	/SQLParser/src	line 947	Java Problem
The method SKIP() is undefined for the type
sql2003Lexer	sql2003Lexer.java	/SQLParser/src	line 1094	Java Problem
The method SKIP() is undefined for the type
sql2003Lexer	sql2003Lexer.java	/SQLParser/src	line 32837	Java Problem
The method SKIP() is undefined for the type
sql2003Lexer	sql2003Lexer.java	/SQLParser/src	line 32900	Java Problem
The method skip() is undefined for the type
sql2003Parser	sql2003Parser.java	/SQLParser/src	line 1130	Java Problem
UNIMPLEMENTED_FEATURE cannot be
resolved	sql2003Parser.java	/SQLParser/src	line 1130	Java Problem
UNKNOWN_CHARACTER cannot be
resolved	sql2003Lexer.java	/SQLParser/src	line 32924	Java Problem

So some of these errors could be fixed manually. But the error about
duplicated case - I think - references to the some incorrect behaviour
of antlr.

From stefika at gmail.com  Mon Oct 10 12:36:53 2011
From: stefika at gmail.com (Andreas Stefik)
Date: Mon, 10 Oct 2011 14:36:53 -0500
Subject: [antlr-interest] Report of GUI's death greatly exaggerated
In-Reply-To: <AE502720-CC72-43B5-A992-88DAB350B70A@cs.usfca.edu>
References: <2942173C-E091-433C-B92B-61AC57F322DC@cs.usfca.edu>
	<CACJVtdMQkNdHYspJoDCkPA-nt4Nn14pCH7i1=xSF+ykmiaEisA@mail.gmail.com>
	<CABiHOJ=fYXm3VS=NnfLMtLSRUn9h67Wf25QN2cmqC4KusWRhRw@mail.gmail.com>
	<AE502720-CC72-43B5-A992-88DAB350B70A@cs.usfca.edu>
Message-ID: <CABiHOJn38tNHWbmpkHvzuhyURSuY=bHtgf+gFGMa3J18uFDEgg@mail.gmail.com>

I agree with Ter, the folks at Oracle have made it pretty clear that
the NetBeans platform isn't going anywhere. If anything, the JDK 8
roadmap shows that some of the NB platform concepts (e.g., modules)
are going to become integrated into core Java.


> Andreas, I will be contacting you about the debugger at some point :) congratulations again on your design award at JavaOne for SodBeans.

Thanks, I appreciate it quite a bit. Pretty unexpected for us, but was
a nice surprise.

We had a great out hanging with your crew as well. Feel free to get in
touch about the debugger or other stuff as you go and we'll try to
help out. Plus, how often do you get to break up a (possible?) drug
deal getting out of a BMW??????!!!!


Stefik

From parrt at cs.usfca.edu  Mon Oct 10 12:53:17 2011
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon, 10 Oct 2011 12:53:17 -0700
Subject: [antlr-interest] Report of GUI's death greatly exaggerated
In-Reply-To: <CABiHOJn38tNHWbmpkHvzuhyURSuY=bHtgf+gFGMa3J18uFDEgg@mail.gmail.com>
References: <2942173C-E091-433C-B92B-61AC57F322DC@cs.usfca.edu>
	<CACJVtdMQkNdHYspJoDCkPA-nt4Nn14pCH7i1=xSF+ykmiaEisA@mail.gmail.com>
	<CABiHOJ=fYXm3VS=NnfLMtLSRUn9h67Wf25QN2cmqC4KusWRhRw@mail.gmail.com>
	<AE502720-CC72-43B5-A992-88DAB350B70A@cs.usfca.edu>
	<CABiHOJn38tNHWbmpkHvzuhyURSuY=bHtgf+gFGMa3J18uFDEgg@mail.gmail.com>
Message-ID: <35715414-78E9-4C1C-8B9A-2DFC947E3FF5@cs.usfca.edu>


On Oct 10, 2011, at 12:36 PM, Andreas Stefik wrote:
> We had a great out hanging with your crew as well. Feel free to get in
> touch about the debugger or other stuff as you go and we'll try to
> help out. Plus, how often do you get to break up a (possible?) drug
> deal getting out of a BMW??????!!!!

every day in my neighborhood :)

Ter

From parrt at cs.usfca.edu  Mon Oct 10 13:13:17 2011
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon, 10 Oct 2011 13:13:17 -0700
Subject: [antlr-interest] ANTLRWorks2 design thoughts / mockup
Message-ID: <A8B1BD94-F6CC-4C79-8E60-0C6CB84A157E@cs.usfca.edu>

http://www.antlr.org/wiki/display/~admin/2011/10/10/ANTLRWorks2+design+thoughts

From michael.bedward at gmail.com  Mon Oct 10 17:52:38 2011
From: michael.bedward at gmail.com (Michael Bedward)
Date: Tue, 11 Oct 2011 11:52:38 +1100
Subject: [antlr-interest] Report of GUI's death greatly exaggerated
In-Reply-To: <CABiHOJ=fYXm3VS=NnfLMtLSRUn9h67Wf25QN2cmqC4KusWRhRw@mail.gmail.com>
References: <2942173C-E091-433C-B92B-61AC57F322DC@cs.usfca.edu>
	<CACJVtdMQkNdHYspJoDCkPA-nt4Nn14pCH7i1=xSF+ykmiaEisA@mail.gmail.com>
	<CABiHOJ=fYXm3VS=NnfLMtLSRUn9h67Wf25QN2cmqC4KusWRhRw@mail.gmail.com>
Message-ID: <CACJVtdMLgk4uFOesz4=av0i1joWtafYAsh32=2MZJkZrvh0wdg@mail.gmail.com>

Yep - that's all cool Andreas. I just wanted to sound those notes of caution.

Personally I think NetBeans is infinitely better crafted and easier to
use than Eclipse. The dominance of the latter is a good example of
market lock-in :)

The nice NB update module mechanism for an ANTLRWorks app would
certainly be appreciated by users.

Michael

On 11 October 2011 00:39, Andreas Stefik <stefika at gmail.com> wrote:
> On Sun, Oct 9, 2011 at 11:22 PM, Michael Bedward
> <michael.bedward at gmail.com> wrote:
>> As a long-time NB user I really like the sound of ANTLRWorks becoming
>> an NB Platform app. Just two things I'd be cautious about:
>>
>> 1. Oracle's commitment and what this means for platform stability.
>> Recent events, such as dropping support for the Python and Ruby
>> plugins (euphemistically termed "giving them to the community") raise
>> worries about Oracle's commitment to anything that isn't seen as
>> commercially attractive in the very short term.
>
> I recall when Ruby support was dropped, they showed some statistics
> from the Gesture collector on how many people use it. So far as I
> recall, it was dropped because very, very few people actually used the
> plugins. I don't remember the stats off the top of my head, but at the
> time I recall thinking it was probably the right decision. Since that
> time, they've been able to dedicate more resources to other projects,
> many of which are really neat (~7.1 branch).
>
> So, I don't work for Oracle and have no vested interest, but I don't
> think it was so much commercial interests as it was a lack of interest
> from the community.
>
> Just my opinion. Awesome work, Ter, you and Sam are moving going fast!
>
> Stefik
>

From douglasgodfrey at gmail.com  Mon Oct 10 21:15:31 2011
From: douglasgodfrey at gmail.com (Douglas Godfrey)
Date: Tue, 11 Oct 2011 00:15:31 -0400
Subject: [antlr-interest] ISO SQL 2003 Grammar
In-Reply-To: <CAJN5NKBiP9MORj6OCMEs+phk6VZj=Z+QxS2DDqCi7yy++Ci3kQ@mail.gmail.com>
Message-ID: <CAB936D9.467C%douglasgodfrey@gmail.com>

I generated a C parser and lexer. they both generate and compile
successfully
on my machine with 8GB heap allocated to Antlr. Any less and both Antlr
and 
Antlrworks encounter numerous bugs due to unchecked memory allocation
failures.

Antlrworks needs 512MB to 1GB just to be able to edit the grammar. Antlr
needs 
a minimum of 6GB to generate code for just a few rules with exponential
lookahead. In my emails to the antlr-interest group I discuss how to
refactor 
the grammar to reduce it's memory requirement.

I havent had time to work on the SQL2003 grammar due to my day job writing
the join engine to a database system.

If you have the time to work on the SQL2003 grammar start unravelling the
recursive dependancies at rule nonparenthesized_value_expression_primary.
There is a set of about 30-40 rules with multiple recursion pathways such
that any rule in the set can be reached from any other rule in the set.
That is why the memory requirement is so large.

I don't believe that it will ever be possible to get a working parser in
Java. A C language parser on the other hand is quite possible.

On 10/9/11 11:51 PM, "Ivan Bludov" <ivan.bludov at gmail.com> wrote:

>So as I wrote I read your previous posts ( and file comments of
>cause). So at first I was surprised enough that so much system
>resources was needed. But as Terence wrote "With 3.3 I find that it
>terminates in 12s on my box with 220M ram"
>(http://www.antlr.org/pipermail/antlr-interest/2011-April/041439.html).
>So I got the same result with antl 3.3. So build results depend on
>antlr version (different results on different antlr version). So with
>antl 3.4 the building process seems to fall into infinite loop and
>thus system resources don't matter. So with 3.3 build result is
>successful about few seconds, but the generated parser has some
>errors. The critical problem - I think - is that the parser has
>duplicated (identical) case in some switch statements. So I posted
>these thoughts.
>
>Douglas Godfrey, I appreciate your work on SQL2003 parser. But I
>couldn't see the work result. Could you write your environment? Antlr
>version? Have you already use your generated parser in some another
>project? Because the generated parser has some another errors: "big
>grammar" problem with 64kbyte class - but it is another problem.
>
>Ivan Bludov



From hellojinjie at gmail.com  Tue Oct 11 01:36:18 2011
From: hellojinjie at gmail.com (=?UTF-8?B?6YeR5p2w?=)
Date: Tue, 11 Oct 2011 16:36:18 +0800
Subject: [antlr-interest] Problem with autotools while using antlr3 C runtime
Message-ID: <CAKZS5e_aqxeG4U=b2+0WxCX99rcQNWZdN9V8UFWTKoKGYWp_Pg@mail.gmail.com>

Hi All,

the antlr3 C runtime is build with autotools.
the autotools generate a header antlr3config.h, this header has
defined: #define PACKAGE "libantlr3c"

my project is also build with autotools, there is a header config.h, which
define: #define PACKAGE "polaris"
when I compile my code, there is an error:

In file included from /opt/antlr3c/include/antlr3defs.h:246,
                 from /opt/antlr3c/include/antlr3.h:33,
                 from PolarisAdmin.cc:13:
/opt/antlr3c/include/antlr3config.h:96:1: error: "PACKAGE" redefined

the error indicate that  "PACKAGE" has redefined.

is it a bug?  (:
how can I avoid this error?

thank you in advance.
-- 
hellojinjie

From kirby.bohling at gmail.com  Tue Oct 11 07:00:49 2011
From: kirby.bohling at gmail.com (Kirby Bohling)
Date: Tue, 11 Oct 2011 09:00:49 -0500
Subject: [antlr-interest] Problem with autotools while using antlr3 C
	runtime
In-Reply-To: <CAKZS5e_aqxeG4U=b2+0WxCX99rcQNWZdN9V8UFWTKoKGYWp_Pg@mail.gmail.com>
References: <CAKZS5e_aqxeG4U=b2+0WxCX99rcQNWZdN9V8UFWTKoKGYWp_Pg@mail.gmail.com>
Message-ID: <CA+bn5rx4n0xNmvT34=FgAWatu=wyThmxEPwUgYizfoE_BC4pfw@mail.gmail.com>

Use no-define in the configure.ac file.

AM_INIT_AUTOMAKE(PACKAGE, VERSION, [NO-DEFINE])

See:
http://gcc.gnu.org/svn/gcc/branches/cilkplus/libstdc++-v3/configure.ac
or
http://www.delorie.com/gnu/docs/automake/automake_24.html

I think this is a sign you or the other package are using the config.h
file wrong, but that's a different discussion.  At least that's my
guess, I haven't tried it.

Kirby


On Tue, Oct 11, 2011 at 3:36 AM, ?? <hellojinjie at gmail.com> wrote:
> Hi All,
>
> the antlr3 C runtime is build with autotools.
> the autotools generate a header antlr3config.h, this header has
> defined: #define PACKAGE "libantlr3c"
>
> my project is also build with autotools, there is a header config.h, which
> define: #define PACKAGE "polaris"
> when I compile my code, there is an error:
>
> In file included from /opt/antlr3c/include/antlr3defs.h:246,
> ? ? ? ? ? ? ? ? from /opt/antlr3c/include/antlr3.h:33,
> ? ? ? ? ? ? ? ? from PolarisAdmin.cc:13:
> /opt/antlr3c/include/antlr3config.h:96:1: error: "PACKAGE" redefined
>
> the error indicate that ?"PACKAGE" has redefined.
>
> is it a bug? ?(:
> how can I avoid this error?
>
> thank you in advance.
> --
> hellojinjie
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>

From jimi at temporal-wave.com  Tue Oct 11 08:25:28 2011
From: jimi at temporal-wave.com (Jim Idle)
Date: Tue, 11 Oct 2011 08:25:28 -0700
Subject: [antlr-interest] ISO SQL 2003 Grammar
In-Reply-To: <CAB936D9.467C%douglasgodfrey@gmail.com>
References: <CAJN5NKBiP9MORj6OCMEs+phk6VZj=Z+QxS2DDqCi7yy++Ci3kQ@mail.gmail.com>
	<CAB936D9.467C%douglasgodfrey@gmail.com>
Message-ID: <c4f7b3515053685eac040c132929148c@mail.gmail.com>

I have a complete T-SQL ANTLR parser and tree parser (I sell it) that has
no left recursion issues and is almost LL(1), it needs a slight increase
in -Xmx but otherwise it is fine and works perfectly well in Java. In fact
Ter uses it to test ANTLR and to examine the types of lookahead issues
ANTLR can encounter. So a Java based SQL parser is entirely possible.

Jim

> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of Douglas Godfrey
> Sent: Monday, October 10, 2011 9:16 PM
> To: Ivan Bludov; Antlr-Interest Antlr.Org
> Subject: Re: [antlr-interest] ISO SQL 2003 Grammar
>
> I generated a C parser and lexer. they both generate and compile
> successfully on my machine with 8GB heap allocated to Antlr. Any less
> and both Antlr and Antlrworks encounter numerous bugs due to unchecked
> memory allocation failures.
>
> Antlrworks needs 512MB to 1GB just to be able to edit the grammar.
> Antlr needs a minimum of 6GB to generate code for just a few rules with
> exponential lookahead. In my emails to the antlr-interest group I
> discuss how to refactor the grammar to reduce it's memory requirement.
>
> I havent had time to work on the SQL2003 grammar due to my day job
> writing the join engine to a database system.
>
> If you have the time to work on the SQL2003 grammar start unravelling
> the recursive dependancies at rule
> nonparenthesized_value_expression_primary.
> There is a set of about 30-40 rules with multiple recursion pathways
> such that any rule in the set can be reached from any other rule in the
> set.
> That is why the memory requirement is so large.
>
> I don't believe that it will ever be possible to get a working parser
> in Java. A C language parser on the other hand is quite possible.
>
> On 10/9/11 11:51 PM, "Ivan Bludov" <ivan.bludov at gmail.com> wrote:
>
> >So as I wrote I read your previous posts ( and file comments of
> cause).
> >So at first I was surprised enough that so much system resources was
> >needed. But as Terence wrote "With 3.3 I find that it terminates in
> 12s
> >on my box with 220M ram"
> >(http://www.antlr.org/pipermail/antlr-interest/2011-
> April/041439.html).
> >So I got the same result with antl 3.3. So build results depend on
> >antlr version (different results on different antlr version). So with
> >antl 3.4 the building process seems to fall into infinite loop and
> thus
> >system resources don't matter. So with 3.3 build result is successful
> >about few seconds, but the generated parser has some errors. The
> >critical problem - I think - is that the parser has duplicated
> >(identical) case in some switch statements. So I posted these
> thoughts.
> >
> >Douglas Godfrey, I appreciate your work on SQL2003 parser. But I
> >couldn't see the work result. Could you write your environment? Antlr
> >version? Have you already use your generated parser in some another
> >project? Because the generated parser has some another errors: "big
> >grammar" problem with 64kbyte class - but it is another problem.
> >
> >Ivan Bludov
>
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
> email-address

From jimi at temporal-wave.com  Tue Oct 11 08:31:22 2011
From: jimi at temporal-wave.com (Jim Idle)
Date: Tue, 11 Oct 2011 08:31:22 -0700
Subject: [antlr-interest] Problem with autotools while using antlr3 C
	runtime
In-Reply-To: <CAKZS5e_aqxeG4U=b2+0WxCX99rcQNWZdN9V8UFWTKoKGYWp_Pg@mail.gmail.com>
References: <CAKZS5e_aqxeG4U=b2+0WxCX99rcQNWZdN9V8UFWTKoKGYWp_Pg@mail.gmail.com>
Message-ID: <09d6be1d2b6750af21cfde06fa1522f8@mail.gmail.com>

It's a bit of an issue mixing autotools, but after you have included the
one header, #undef PACKAGE before including the next. If possible though,
you should try and keep the includes separate.


Jim

> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of ??
> Sent: Tuesday, October 11, 2011 1:36 AM
> To: antlr-interest at antlr.org
> Subject: [antlr-interest] Problem with autotools while using antlr3 C
> runtime
>
> Hi All,
>
> the antlr3 C runtime is build with autotools.
> the autotools generate a header antlr3config.h, this header has
> defined: #define PACKAGE "libantlr3c"
>
> my project is also build with autotools, there is a header config.h,
> which
> define: #define PACKAGE "polaris"
> when I compile my code, there is an error:
>
> In file included from /opt/antlr3c/include/antlr3defs.h:246,
>                  from /opt/antlr3c/include/antlr3.h:33,
>                  from PolarisAdmin.cc:13:
> /opt/antlr3c/include/antlr3config.h:96:1: error: "PACKAGE" redefined
>
> the error indicate that  "PACKAGE" has redefined.
>
> is it a bug?  (:
> how can I avoid this error?
>
> thank you in advance.
> --
> hellojinjie
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
> email-address

From jimi at temporal-wave.com  Tue Oct 11 08:35:35 2011
From: jimi at temporal-wave.com (Jim Idle)
Date: Tue, 11 Oct 2011 08:35:35 -0700
Subject: [antlr-interest] Problem with autotools while using antlr3 C
	runtime
In-Reply-To: <CA+bn5rx4n0xNmvT34=FgAWatu=wyThmxEPwUgYizfoE_BC4pfw@mail.gmail.com>
References: <CAKZS5e_aqxeG4U=b2+0WxCX99rcQNWZdN9V8UFWTKoKGYWp_Pg@mail.gmail.com>
	<CA+bn5rx4n0xNmvT34=FgAWatu=wyThmxEPwUgYizfoE_BC4pfw@mail.gmail.com>
Message-ID: <fba74f3f47305cd41728b2cd40a66fae@mail.gmail.com>

Yeah, I think that we can probably do that as the C runtime does not
reference those defines. Ideally, you should not encounter a need to include
config.h from two separate non-sub-packages.

Jim

> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of Kirby Bohling
> Sent: Tuesday, October 11, 2011 7:01 AM
> To: ??
> Cc: antlr-interest at antlr.org
> Subject: Re: [antlr-interest] Problem with autotools while using antlr3
> C runtime
>
> Use no-define in the configure.ac file.
>
> AM_INIT_AUTOMAKE(PACKAGE, VERSION, [NO-DEFINE])
>
> See:
> http://gcc.gnu.org/svn/gcc/branches/cilkplus/libstdc++-v3/configure.ac
> or
> http://www.delorie.com/gnu/docs/automake/automake_24.html
>
> I think this is a sign you or the other package are using the config.h
> file wrong, but that's a different discussion.  At least that's my
> guess, I haven't tried it.
>
> Kirby
>
>
> On Tue, Oct 11, 2011 at 3:36 AM, ?? <hellojinjie at gmail.com> wrote:
> > Hi All,
> >
> > the antlr3 C runtime is build with autotools.
> > the autotools generate a header antlr3config.h, this header has
> > defined: #define PACKAGE "libantlr3c"
> >
> > my project is also build with autotools, there is a header config.h,
> > which
> > define: #define PACKAGE "polaris"
> > when I compile my code, there is an error:
> >
> > In file included from /opt/antlr3c/include/antlr3defs.h:246,
> >                 from /opt/antlr3c/include/antlr3.h:33,
> >                 from PolarisAdmin.cc:13:
> > /opt/antlr3c/include/antlr3config.h:96:1: error: "PACKAGE" redefined
> >
> > the error indicate that  "PACKAGE" has redefined.
> >
> > is it a bug?  (:
> > how can I avoid this error?
> >
> > thank you in advance.
> > --
> > hellojinjie
> >
> > List: http://www.antlr.org/mailman/listinfo/antlr-interest
> > Unsubscribe:
> > http://www.antlr.org/mailman/options/antlr-interest/your-email-
> address
> >
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
> email-address

From brian at brie.com  Tue Oct 11 10:18:54 2011
From: brian at brie.com (Brian Lavender)
Date: Tue, 11 Oct 2011 10:18:54 -0700
Subject: [antlr-interest] Problems with ANTLR 3.4 and ANTLR IDE for Eclipse
Message-ID: <20111011171854.GA28321@brie.com>

I have been working with ANTLR IDE and I encountered problems when using 
ANTLR 3.4. Below is a description of the problem I shared with Scott
Stanchfield (Java Dude). It seems that the problem is either with ANTLR
or the the plugin for Eclipse. The problem doesn't occur with ANTLR 3.2
when I use it with the plugin.

If I try to create a grammar, and I put in a test case on the interpretor
screen and I try to "run->Java", it just won't run.  

See the following videos for creating a grammar and "Run->Java" for testing
input.
http://javadude.com/articles/antlr3xtut/

The following is the error:

'ANTLR' Event Listener' has encountered a problem.

An internal error occurred during: "ANTLR Event Listener".
For input string: "false"

brian
-- 
Brian Lavender
http://www.brie.com/brian/

"There are two ways of constructing a software design. One way is to
make it so simple that there are obviously no deficiencies. And the other
way is to make it so complicated that there are no obvious deficiencies."

Professor C. A. R. Hoare
The 1980 Turing award lecture

From pureza at gmail.com  Tue Oct 11 11:17:22 2011
From: pureza at gmail.com (Luis Pureza)
Date: Tue, 11 Oct 2011 19:17:22 +0100
Subject: [antlr-interest] Best way to detect java reserved keywords (and
 fail with an user-friendly error)
In-Reply-To: <CAGYfzvTW-ixWdkcN9-snpQsnpuaLEiDOOKOu7G3UmHXeVTZbTQ@mail.gmail.com>
References: <CAGYfzvTW-ixWdkcN9-snpQsnpuaLEiDOOKOu7G3UmHXeVTZbTQ@mail.gmail.com>
Message-ID: <CAGYfzvRa91pTHVzTjhQm1CGR3vQYZYAJeDBd4HBOnpmEZUOEVQ@mail.gmail.com>

Hi,

I'm looking for the best way to detect java reserved keywords in my grammar
and throw a pretty error message such as "Java reserved keywords are not
allowed".
I could define a token { CLASS: 'class' }; and override the
NoViableAltException handler, but I'd like to know if there is a better way.

Thanks,

Lu?s Pureza

From ben.dotte at gmail.com  Tue Oct 11 12:43:43 2011
From: ben.dotte at gmail.com (Ben Dotte)
Date: Tue, 11 Oct 2011 14:43:43 -0500
Subject: [antlr-interest] Infinite loop after upgrade to 3.3
Message-ID: <CABnXfUiTGU-enLzA-nqVKfwK-Ry+5HFzH6b0Qqpeb8Kyp5D7Kg@mail.gmail.com>

Hi,

I'm trying to upgrade our Java Antlr runtime from 3.1.2 to 3.3, but running
into an infinite loop in the parser. I'm a little puzzled about the best way
to troubleshoot this. Everything worked fine in 3.1.2.

Basically, anything I try to run through the parser in my application to
generate the AST just sits there. Watching a threaddump, I can see it
bouncing around between the different parser rules, but it never finishes
and never throws any exceptions either.

I can run the same input through ANTLRWorks 1.4.2 and it executes just fine
and gives me the right AST output.

I also tried the 3.4 runtime with the same result.

Any pointers would be much appreciated.

Thanks!

Ben

From parrt at cs.usfca.edu  Tue Oct 11 12:55:06 2011
From: parrt at cs.usfca.edu (Terence Parr)
Date: Tue, 11 Oct 2011 12:55:06 -0700
Subject: [antlr-interest] Infinite loop after upgrade to 3.3
In-Reply-To: <CABnXfUiTGU-enLzA-nqVKfwK-Ry+5HFzH6b0Qqpeb8Kyp5D7Kg@mail.gmail.com>
References: <CABnXfUiTGU-enLzA-nqVKfwK-Ry+5HFzH6b0Qqpeb8Kyp5D7Kg@mail.gmail.com>
Message-ID: <756EE008-AECA-4C8D-83C6-2F11162AFA56@cs.usfca.edu>

any semantic preds?
T
On Oct 11, 2011, at 12:43 PM, Ben Dotte wrote:

> Hi,
> 
> I'm trying to upgrade our Java Antlr runtime from 3.1.2 to 3.3, but running
> into an infinite loop in the parser. I'm a little puzzled about the best way
> to troubleshoot this. Everything worked fine in 3.1.2.
> 
> Basically, anything I try to run through the parser in my application to
> generate the AST just sits there. Watching a threaddump, I can see it
> bouncing around between the different parser rules, but it never finishes
> and never throws any exceptions either.
> 
> I can run the same input through ANTLRWorks 1.4.2 and it executes just fine
> and gives me the right AST output.
> 
> I also tried the 3.4 runtime with the same result.
> 
> Any pointers would be much appreciated.
> 
> Thanks!
> 
> Ben
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address


From ben.dotte at gmail.com  Tue Oct 11 13:08:34 2011
From: ben.dotte at gmail.com (Ben Dotte)
Date: Tue, 11 Oct 2011 15:08:34 -0500
Subject: [antlr-interest] Infinite loop after upgrade to 3.3
In-Reply-To: <756EE008-AECA-4C8D-83C6-2F11162AFA56@cs.usfca.edu>
References: <CABnXfUiTGU-enLzA-nqVKfwK-Ry+5HFzH6b0Qqpeb8Kyp5D7Kg@mail.gmail.com>
	<756EE008-AECA-4C8D-83C6-2F11162AFA56@cs.usfca.edu>
Message-ID: <CABnXfUihGj2ozDbm=SqryLfC6nGeAMiPLv+c9uT=qgP8oBWrAQ@mail.gmail.com>

Yes, there are a couple rules with semantic predicates:

fieldSearch
: (TEXT ':'^)? (subSearch | negationSearch)
;

negationSearch
: ('-'^)? (quotedSearch | dateRangeSearch | comparisonSearch | idSearch |
wildcardSearch | term)
;

On Tue, Oct 11, 2011 at 2:55 PM, Terence Parr <parrt at cs.usfca.edu> wrote:

> any semantic preds?
> T
> On Oct 11, 2011, at 12:43 PM, Ben Dotte wrote:
>
> > Hi,
> >
> > I'm trying to upgrade our Java Antlr runtime from 3.1.2 to 3.3, but
> running
> > into an infinite loop in the parser. I'm a little puzzled about the best
> way
> > to troubleshoot this. Everything worked fine in 3.1.2.
> >
> > Basically, anything I try to run through the parser in my application to
> > generate the AST just sits there. Watching a threaddump, I can see it
> > bouncing around between the different parser rules, but it never finishes
> > and never throws any exceptions either.
> >
> > I can run the same input through ANTLRWorks 1.4.2 and it executes just
> fine
> > and gives me the right AST output.
> >
> > I also tried the 3.4 runtime with the same result.
> >
> > Any pointers would be much appreciated.
> >
> > Thanks!
> >
> > Ben
> >
> > List: http://www.antlr.org/mailman/listinfo/antlr-interest
> > Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>
>

From parrt at cs.usfca.edu  Tue Oct 11 13:11:58 2011
From: parrt at cs.usfca.edu (Terence Parr)
Date: Tue, 11 Oct 2011 13:11:58 -0700
Subject: [antlr-interest] Infinite loop after upgrade to 3.3
In-Reply-To: <CABnXfUihGj2ozDbm=SqryLfC6nGeAMiPLv+c9uT=qgP8oBWrAQ@mail.gmail.com>
References: <CABnXfUiTGU-enLzA-nqVKfwK-Ry+5HFzH6b0Qqpeb8Kyp5D7Kg@mail.gmail.com>
	<756EE008-AECA-4C8D-83C6-2F11162AFA56@cs.usfca.edu>
	<CABnXfUihGj2ozDbm=SqryLfC6nGeAMiPLv+c9uT=qgP8oBWrAQ@mail.gmail.com>
Message-ID: <7B0694F0-D7A7-4D62-8B99-7626F404D4C3@cs.usfca.edu>

hi. semantic preds look like {..}? :)
Ter
On Oct 11, 2011, at 1:08 PM, Ben Dotte wrote:

> Yes, there are a couple rules with semantic predicates:
> 
> fieldSearch
> : (TEXT ':'^)? (subSearch | negationSearch)
> ;
> 
> negationSearch
> : ('-'^)? (quotedSearch | dateRangeSearch | comparisonSearch | idSearch |
> wildcardSearch | term)
> ;



From ben.dotte at gmail.com  Tue Oct 11 13:16:28 2011
From: ben.dotte at gmail.com (Ben Dotte)
Date: Tue, 11 Oct 2011 15:16:28 -0500
Subject: [antlr-interest] Infinite loop after upgrade to 3.3
In-Reply-To: <7B0694F0-D7A7-4D62-8B99-7626F404D4C3@cs.usfca.edu>
References: <CABnXfUiTGU-enLzA-nqVKfwK-Ry+5HFzH6b0Qqpeb8Kyp5D7Kg@mail.gmail.com>
	<756EE008-AECA-4C8D-83C6-2F11162AFA56@cs.usfca.edu>
	<CABnXfUihGj2ozDbm=SqryLfC6nGeAMiPLv+c9uT=qgP8oBWrAQ@mail.gmail.com>
	<7B0694F0-D7A7-4D62-8B99-7626F404D4C3@cs.usfca.edu>
Message-ID: <CABnXfUjhKLDpAsN83KcLDrgRWiXAM+tYp=BcadJuB3CLC7Lj0w@mail.gmail.com>

Sorry, it has been a while since I worked with Antlr!

In that case, no I do not see any.

On Tue, Oct 11, 2011 at 3:11 PM, Terence Parr <parrt at cs.usfca.edu> wrote:

> hi. semantic preds look like {..}? :)
> Ter
> On Oct 11, 2011, at 1:08 PM, Ben Dotte wrote:
>
> > Yes, there are a couple rules with semantic predicates:
> >
> > fieldSearch
> > : (TEXT ':'^)? (subSearch | negationSearch)
> > ;
> >
> > negationSearch
> > : ('-'^)? (quotedSearch | dateRangeSearch | comparisonSearch | idSearch |
> > wildcardSearch | term)
> > ;
>
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>

From parrt at cs.usfca.edu  Tue Oct 11 13:54:54 2011
From: parrt at cs.usfca.edu (Terence Parr)
Date: Tue, 11 Oct 2011 13:54:54 -0700
Subject: [antlr-interest] Infinite loop after upgrade to 3.3
In-Reply-To: <CABnXfUjhKLDpAsN83KcLDrgRWiXAM+tYp=BcadJuB3CLC7Lj0w@mail.gmail.com>
References: <CABnXfUiTGU-enLzA-nqVKfwK-Ry+5HFzH6b0Qqpeb8Kyp5D7Kg@mail.gmail.com>
	<756EE008-AECA-4C8D-83C6-2F11162AFA56@cs.usfca.edu>
	<CABnXfUihGj2ozDbm=SqryLfC6nGeAMiPLv+c9uT=qgP8oBWrAQ@mail.gmail.com>
	<7B0694F0-D7A7-4D62-8B99-7626F404D4C3@cs.usfca.edu>
	<CABnXfUjhKLDpAsN83KcLDrgRWiXAM+tYp=BcadJuB3CLC7Lj0w@mail.gmail.com>
Message-ID: <1A749894-7A94-41E0-9640-11D5DBB8201D@cs.usfca.edu>

maybe an empty lexer rule or one that could match nothign?
Ter
On Oct 11, 2011, at 1:16 PM, Ben Dotte wrote:

> Sorry, it has been a while since I worked with Antlr!
> 
> In that case, no I do not see any.
> 
> On Tue, Oct 11, 2011 at 3:11 PM, Terence Parr <parrt at cs.usfca.edu> wrote:
> hi. semantic preds look like {..}? :)
> Ter
> On Oct 11, 2011, at 1:08 PM, Ben Dotte wrote:
> 
> > Yes, there are a couple rules with semantic predicates:
> >
> > fieldSearch
> > : (TEXT ':'^)? (subSearch | negationSearch)
> > ;
> >
> > negationSearch
> > : ('-'^)? (quotedSearch | dateRangeSearch | comparisonSearch | idSearch |
> > wildcardSearch | term)
> > ;
> 
> 
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
> 


From ben.dotte at gmail.com  Tue Oct 11 14:11:55 2011
From: ben.dotte at gmail.com (Ben Dotte)
Date: Tue, 11 Oct 2011 16:11:55 -0500
Subject: [antlr-interest] Infinite loop after upgrade to 3.3
In-Reply-To: <1A749894-7A94-41E0-9640-11D5DBB8201D@cs.usfca.edu>
References: <CABnXfUiTGU-enLzA-nqVKfwK-Ry+5HFzH6b0Qqpeb8Kyp5D7Kg@mail.gmail.com>
	<756EE008-AECA-4C8D-83C6-2F11162AFA56@cs.usfca.edu>
	<CABnXfUihGj2ozDbm=SqryLfC6nGeAMiPLv+c9uT=qgP8oBWrAQ@mail.gmail.com>
	<7B0694F0-D7A7-4D62-8B99-7626F404D4C3@cs.usfca.edu>
	<CABnXfUjhKLDpAsN83KcLDrgRWiXAM+tYp=BcadJuB3CLC7Lj0w@mail.gmail.com>
	<1A749894-7A94-41E0-9640-11D5DBB8201D@cs.usfca.edu>
Message-ID: <CABnXfUgv2o=iwNONb-Z0mmUVkx_LZgzOxcpGfVwQUqfnPKTc=Q@mail.gmail.com>

I don't see anything like that, but I wouldn't be surprised if the grammar
could be improved. I pasted it below incase that is any help. Thanks for
your suggestions.


/*----------------------------------------------------------------
 * PARSER RULES
 *----------------------------------------------------------------*/

search : orSearch
;

orSearch: andSearch (OR^ andSearch)*
;

andSearch
: (implicitAndSearch AND)=> implicitAndSearch (AND^ implicitAndSearch)*
| implicitAndSearch
;

implicitAndSearch
: (f=fieldSearch -> $f)
(f2=fieldSearch -> ^(AND $implicitAndSearch $f2))*
;

fieldSearch
: (TEXT ':'^)? (subSearch | negationSearch)
;

negationSearch
: ('-'^)? (quotedSearch | dateRangeSearch | comparisonSearch | idSearch |
wildcardSearch | term)
;

wildcardSearch
: TEXT_WITH_WILDCARD -> ^(WILDCARD TEXT_WITH_WILDCARD)
;

idSearch
: '#'^ TEXT
;

comparisonSearch
: '>'^ TEXT
| '<'^ TEXT
;

quotedSearch
: QUOTED_STRING -> ^(QUOTED QUOTED_STRING)
;

dateRangeSearch
: '[' DATE TO DATE ']' -> ^(DATE_BETWEEN DATE+)
| '[' AFTER DATE ']' -> ^(DATE_AFTER DATE)
| '[' BEFORE DATE ']' -> ^(DATE_BEFORE DATE)
;

subSearch
: '('! orSearch ')'!
;

term : SEPARATOR* (t=anyText -> $t)
(SEPARATOR t2=anyText -> ^(AND $term $t2))*
SEPARATOR*
;

anyText : (TO | AFTER | BEFORE | DATE | TEXT)
;


/*----------------------------------------------------------------
 * LEXER RULES
 *----------------------------------------------------------------*/

AND : ('a'|'A')('n'|'N')('d'|'D') ;
OR : ('o'|'O')('r'|'R') ;
TO : ('t'|'T')('o'|'O') ;
AFTER : ('a'|'A')('f'|'F')('t'|'T')('e'|'E')('r'|'R') ;
BEFORE : ('b'|'B')('e'|'E')('f'|'F')('o'|'O')('r'|'R')('e'|'E') ;

fragment NUM
: ('0'..'9') ;
DATE : ('0'..'1')? NUM '/' ('0'..'3')? NUM '/' NUM NUM NUM NUM ;

fragment WHITESPACE_CHAR
: (' '|'\t'|'\n'|'\r') ;
fragment SEPARATOR_CHAR
: '_' ;
CONTROL_CHAR // not a fragment so . matches to these as well
: ('#'|'>'|'<'|'['|']'|'/'|'('|')'|':'|'*'|'"') ;

QUOTED_STRING
: '"' .+ '"' { setText(getText().substring(1, getText().length() - 1)); } ;
// strip quotes from output

WHITESPACE
: (WHITESPACE_CHAR)+ {$channel = HIDDEN;} ;
SEPARATOR
: (SEPARATOR_CHAR)+ ;

fragment TEXT_CHAR
: (WHITESPACE_CHAR|SEPARATOR_CHAR|CONTROL_CHAR) ;
TEXT : ~('-'|TEXT_CHAR) (~(TEXT_CHAR))* ;
TEXT_WITH_WILDCARD
: (('*' TEXT)|(TEXT '*')) ;


On Tue, Oct 11, 2011 at 3:54 PM, Terence Parr <parrt at cs.usfca.edu> wrote:

> maybe an empty lexer rule or one that could match nothign?
> Ter
> On Oct 11, 2011, at 1:16 PM, Ben Dotte wrote:
>
> > Sorry, it has been a while since I worked with Antlr!
> >
> > In that case, no I do not see any.
> >
> > On Tue, Oct 11, 2011 at 3:11 PM, Terence Parr <parrt at cs.usfca.edu>
> wrote:
> > hi. semantic preds look like {..}? :)
> > Ter
> > On Oct 11, 2011, at 1:08 PM, Ben Dotte wrote:
> >
> > > Yes, there are a couple rules with semantic predicates:
> > >
> > > fieldSearch
> > > : (TEXT ':'^)? (subSearch | negationSearch)
> > > ;
> > >
> > > negationSearch
> > > : ('-'^)? (quotedSearch | dateRangeSearch | comparisonSearch | idSearch
> |
> > > wildcardSearch | term)
> > > ;
> >
> >
> >
> > List: http://www.antlr.org/mailman/listinfo/antlr-interest
> > Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
> >
>
>

From isabelle.perseil at enst.fr  Wed Oct 12 09:06:11 2011
From: isabelle.perseil at enst.fr (Isabelle Perseil)
Date: Wed, 12 Oct 2011 18:06:11 +0200
Subject: [antlr-interest]   ICECCS 2012 - Call for Papers
Message-ID: <e06850dc916ab4fef7d47d494ee1b0e6.squirrel@webmail1.telecom-paristech.fr>


****************************************************************************
  CALL FOR PAPERS:  ICECCS 2012
  http://www.iceccs.org/

  17th Annual IEEE International Conference on the
  Engineering of Complex Computer Systems (ICECCS)
  sponsored by the IEEE Technical Committee on Complexity in Computing
  (TCCX)
  Organized under the guidance of the CESAMES non profit organization

  July 18-20,2012
  Ecole Normale Superieure, Paris - FRANCE

*****************************************************************************

                Submission deadline: February 15, 2012
                --------------------------------------

The success of key human activities ranging from research and business to
everyday services relies on the use of ever more sophisticated,
feature-rich and complex computer systems. These complex computer systems
are regularly required to accomplish more, faster and on a broader scale,
to adapt dynamically to changing workloads, scenarios and objectives, and
to achieve guaranteed levels of performance and dependability. Satisfying
such demanding requirements in the presence of the variability,
heterogeneity and non-linear behaviour that characterise complex computer
systems poses numerous challenges to both their developers and their
users.

The aim of the conference is to bring together researchers, practitioners
and leading experts from academia and industry, to advance the state of
the art in the specification, development, validation and verification,
and management of complex computer systems.

Scope and topics:
================

Authors are invited to submit papers describing original, unpublished
research results, case studies and tools. Additionally, submissions of
poster papers are sought for two separate poster sessions: an "ongoing
research" poster session, and a "PhD research" poster session. Topics of
interest include but are not limited to the following aspects of complex
computer systems:

- Requirement specification and analysis
- Verification and validation
- Model-driven development
- Reverse engineering and refactoring
- Achitecture software
- Big Data Management
- Sensor Networks and Ubiquitous Computing
- Design by contract
- Agile methods
- Safety-critical & fault-tolerant architectures
- Adaptive, self-managing and multi-agent systems
- Real-time, hybrid and embedded systems
- Systems of systems
- Tools and tool integration
- Industrial case studies

Different kinds of contributions are sought, including novel research,
lessons learned, experience reports, and discussions of practical problems
faced by industry and user domains. The ultimate goal is to build a rich
and comprehensive conference program that can fit the interests and needs
of different classes of attendees: professionals, researchers, managers,
and students. A program goal is to organize several sessions that include
both academic and industrial papers on a given topic, and culminate with
panels to discuss relationships between industrial and academic research.

Full papers are divided into two categories: Technical Papers and
Experience Reports. The papers submitted to both categories will be
reviewed by program committee members, and papers accepted in either
category will be published in the conference proceedings. Technical papers
should describe original research, and experience reports should present
practical projects carried out in industry, and reflect on the lessons
learnt from them.

Poster paper submissions should specify in their abstract whether they
describe ongoing or PhD research. Both types of poster papers will be
reviewed by program committee members, and accepted posters will be
published in the conference proceedings


Submission of Papers:
====================

Submitted manuscripts should be in English and formatted in the style of
the IEEE Computer Society Proceedings Format. Papers should not exceed 10
pages for full papers and 2 pages for poster papers, including figures,
references, and appendices. All submissions should be in PDF format.
Submissions not adhering to the specified format and length may be
rejected immediately, without review.

See the submission guidelines on the conference web site.

Important Dates:
================

Submission of titles and abstracts            February 1, 2012
Submission of all papers                      February 15, 2012
Notification of acceptance                    March 30, 2012
Camera-ready material for publication         April 15, 2012
Registration deadline for authors             May 15, 2012
Early registration deadline for non-authors   May 30, 2012


General Chair:
==============
Daniel Krob, Laboratoire d'Informatique (LIX), Ecole Polytechnique and
CNRS, France

Finance Chair:
==============
Isabelle Perseil, INSERM, France

Publicity Chair:
================
Alice Parisot, CESAMES, France

Program Chairs:
===============
Karin Breitman, Pontificia Universidade Catolica do Rio de Janeiro, Brazil

Isabelle Perseil, INSERM, France

Marc Pouzet, ENS-INRIA, France


Program Committee:
==================
-Mithun Acharya, ABB Corporate Research, United States
-Marc Aiguier, Ecole Centrale Paris, France
-Yamine Aitameur, LISI/ENSMA, France
-Luis Almeida, Fac. de Eng. da Universidade do Porto, Portugal
-Keijiro Araki, Kyushu University, Japan
-Hernan Astudillo, Universidad Tecnica Federico Santa Mar?a, Chile -Paris
Avgeriou, University of Groningen, Netherlands
-Luciano Baresi, DEI - Politecnico di Milano, Italy
-Thais Batista, Federal University of Rio Grande do Norte, Brazil
-Don Batory, The University of Texas at Austin,  United States
-Larry Bernstein, Stevens Institute of Technology, United States
-Domenico Bianculli, University of Lugano - Faculty of Informatics,
Switzerland
-Jonathan P.Bowen, London South Bank University, United Kingdom
-Michele Bugliesi, University of Venice, Italy
-Karin Breitman, PUC-Rio, Brazil
-Phil Brooke, University of Teesside, United Kingdom
-Jean-Michel Bruel, IRIT, France
-Michael Butler, University of Southampton, United Kingdom
-J?rgen B?rstler, Blekinge Institute of Technology, Sweden
-Radu Calinescu, Aston University, United Kingdom
-Corina Cirstea, University of Southampton, United Kingdom
-Jose Cordeiro, EST Setubal/IPS, Portugal
-Agostino Cortesi, Universita' Ca' Foscari di Venezia, Italy
-Jim Davies, University of Oxford, United Kingdom
-Adriana P. De Medeiros, Universidade Federal Fluminense, Brazil
-Julien Delange, European Space Agency, Netherlands
-Juan Antonio De La Puente, Universidad Polit?cnica de Madrid, Spain
-Felicita  Di Giandomenico, ISTI-CNR, Italy
-Marco Di Natale, Scuola Superiore SantAnna, Italy
-Simone Diniz Junqueira Barboza, PUC-Rio, Brazil
-Davide Di Ruscio, Universit? degli Studi dell'Aquila, Italy
-Gilles Dowek, INRIA, France
-Kerstin Eder, University of Bristol, United Kingdom
-Amal El Fallah Seghrouchni, LIP6 - University of Pierre and Marie Curie,
France
-Vincent Englebert, University of Namur, Belgium
-Carolina Felicissimo, Schlumberger Servicos de Petroleo LTDA, Brazil
-Bernd Finkbeiner, Saarland University,  Germany
-Franck Fleurey, SINTEF, Norway
-Leo Freitas, Newcastle University, United Kingdom
-Carlo Alberto Furia, ETH Zurich, Switzerland
-Sebastien Gerard, CEA, LIST, France
-Jean-Paul Gibson, Telecom & Management SudParis,France
-Martin Gogolla, University of Bremen, Germany
-Mark Grechanik, Accenture Labs, United States
-Lindsay Groves, Victoria University of Wellington, New Zealand
-Esther Guerra, Universidad Aut?noma de Madrid, Spain
-Sylvain Hall?, UQAC, Canada
-J?r?me Hugues, ISAE, France
-Shinji Kikuchi, Fujitsu Laboratories, Japan
-Joseph Kiniry, IT University of Copenhagen, Denmark
-Daniel Kroening, Computing Laboratory, Oxford University, United Kingdom
-Ralf Laemmel, Universit?t Koblenz-Landau, Germany
-Regine Laleau, Paris Est Creteil University, France
-Phillip Laplante, Penn State University, United States
-Kung-Kiu Lau, The University of Manchester, United Kingdom
-Insup Lee, University of Pennsylvania, United States
-Jing Liu, Software Engineering Institute, East China Normal University,
China
-Johan Lilius, bo Akademi University, Finland
-Jaime Lloret, Polytechnic University of Valencia, Spain
-S?rgio F. Lopes, University of Minho, Portugal
-Gerald Luettgen, University of Bamberg, Germany
-Cristiano Maciel, Universidade Federal do Mato Grosso, Brazil
-Tom Maibaum, McMaster University, Canada
-Tiziana Margaria, Potsdam University, Germany
-Paul Mckee, BT Innovate and Design, United Kingdom
-Julie Mccann, Imperial College, United Kingdom
-Julio Medina, Universidad de Cantabria, Spain
-Dominique Mery, Universit? Henri Poincar? Nancy 1, France
-Raffaela Mirandola, Politecnico di Milano, Italy
-Thomas Nolte, MRTC/M?lardalen University, Sweden
-Andrea Omicini, Universit? di Bologna, Italy
-Flavio Oquendo, European University of Brittany ? UBS/VALORIA, France
-Laurent Pautet, Telecom Paristech, France
-Robert Pettit, The Aerospace Corporation, United States
-Alexander K. Petrenko, ISP RAS, Russian Federation
-Isabelle Perseil, INSERM, France
-Mauro Pezze, University of Lugano, Switzerland
-Ivan Porres, ?bo Akademi University, Finland
-Marc Pouzet, ENS-INRIA, France
-Arend Rensink, University of Twente, Netherlands
-Bernhard Rumpe, RWTH Aachen University, Germany
-Camille Salinesi, Universit? Paris 1 Panth?on - Sorbonne, France -Ricardo
Sanz, Universidad Politecnica de Madrid, Spain
-Douglas Schmidt, Vanderbilt University, United States
-Cristina Seceleanu, M?lardalen University, Sweden
-Bran Selic, Malina Software Corp, Canada
-Florian Skopik, AIT Austrian Institute of Technology, Austria
-Oleg Sokolsky, University of Pennsylvania, United States
-Volker Stolz, University of Oslo, Norway
-Jing Sun, The University of Auckland, New Zealand
-J?rn Guy S??, ITEE, The University of Queensland, Australia
-Clemens Szyperski, Microsoft Research, United States
-Kenji Taguchi, AIST, Japan
-Dalila Tamzalit, University of Nantes, France
-Bedir Tekinerdogan, Bilkent University, Turkey
-Massimo Tisi, AtlanMod, INRIA & Ecole des Mines de Nantes, France
-Antonio Vallecillo, University of Malaga, Spain
-Tullio Vardanega, University of Padua, Italy
-Emil Vassev, University College Dublin, Ireland
-Evelyne Viegas, Microsoft Research, United States
-Jens Weber, University of Victoria, Canada
-Jim Woodcock, University of York, United Kingdom
-Juan Ye, University of St Andrews, United Kingdom
-Bechir Zalila, ReDCAD Laboratory, University of Sfax, Tunisia
-Naijun Zhan, Lab. of Computer Science, Institute of Software, Chinese
Academy of Sciences, China
-Miaomiao Zhang, Tongji University, China
-Jianjun Zhao, School of Software, Shanghai Jiao Tong University, China
-Huibiao Zhu, East China Normal University, China
-Steffen Zschaler, King's College London,United Kingdom


From ruslan_zasukhin at valentina-db.com  Wed Oct 12 11:04:37 2011
From: ruslan_zasukhin at valentina-db.com (Ruslan Zasukhin)
Date: Wed, 12 Oct 2011 21:04:37 +0300
Subject: [antlr-interest] Advice on best practice?
Message-ID: <CABBB165.F369A%ruslan_zasukhin@valentina-db.com>

Hi All, Terrence, Jim,

I have review FAQs, other docs and list ...
But sop far cannot find isolated advices/tips of kind


* Tend develop grammar as k=1
   AVOID to use k=*, because this is slower ...

OR reverse

* No problems to use k=*
 Always prefer to use k=*  and do not worry ... Speed will be fine..

OR

* always tend to (not)? Use  backtrack option.
    and if you use it then use memoize also ...


In the ANTLR3/Examples/C  I see options as


====================
grammar C;

options 
{
    backtrack    = true;
    memoize    = true;
    k        = 2;
    language    = C;
}
====================


But what is official point of view at current state ?



-- 
Best regards,

Ruslan Zasukhin
VP Engineering and New Technology
Paradigma Software, Inc

Valentina - Joining Worlds of Information
http://www.paradigmasoft.com

[I feel the need: the need for speed]



From ruslan_zasukhin at valentina-db.com  Wed Oct 12 11:13:54 2011
From: ruslan_zasukhin at valentina-db.com (Ruslan Zasukhin)
Date: Wed, 12 Oct 2011 21:13:54 +0300
Subject: [antlr-interest] Advice on best practice?
In-Reply-To: <CABBB165.F369A%ruslan_zasukhin@valentina-db.com>
Message-ID: <CABBB392.F36A0%ruslan_zasukhin@valentina-db.com>

On 10/12/11 9:04 PM, "Ruslan Zasukhin" <ruslan_zasukhin at valentina-db.com>
wrote:

> Hi All, Terrence, Jim,
> 
> I have review FAQs, other docs and list ...
> But sop far cannot find isolated advices/tips of kind
> 
> 
> * Tend develop grammar as k=1
>    AVOID to use k=*, because this is slower ...
> 
> OR reverse
> 
> * No problems to use k=*
>  Always prefer to use k=*  and do not worry ... Speed will be fine..
> 
> OR
> 
> * always tend to (not)? Use  backtrack option.
>     and if you use it then use memoize also ...
> 
> 
> In the ANTLR3/Examples/C  I see options as
> 
> 
> ====================
> grammar C;
> 
> options 
> {
>     backtrack    = true;
>     memoize    = true;
>     k        = 2;
>     language    = C;
> }
> ====================
> 
> 
> But what is official point of view at current state ?

In that C grammar also present comment

/** Either a function definition or any other kind of C decl/def.
 *  The LL(*) analysis algorithm fails to deal with this due to
 *  recursion in the declarator rules.  I'm putting in a
 *  manual predicate here so that we don't backtrack over
 *  the entire function.  Further, you get a better error
 *  as errors within the function itself don't make it fail
 *  to predict that it's a function.  Weird errors previously.
 *  Remember: the goal is to avoid backtrack like the plague
 *  because it makes debugging, actions, and errors harder.
 *
 *  Note that k=1 results in a much smaller predictor for the
 *  fixed lookahead; k=2 made a few extra thousand lines. ;)
 *  I'll have to optimize that in the future.
 */

I wonder, if this already was optimized?
Or still in the future?


Should we also try to specify k=1
for most rules ?


-- 
Best regards,

Ruslan Zasukhin
VP Engineering and New Technology
Paradigma Software, Inc

Valentina - Joining Worlds of Information
http://www.paradigmasoft.com

[I feel the need: the need for speed]



From jimi at temporal-wave.com  Wed Oct 12 11:15:42 2011
From: jimi at temporal-wave.com (Jim Idle)
Date: Wed, 12 Oct 2011 11:15:42 -0700
Subject: [antlr-interest] Advice on best practice?
In-Reply-To: <CABBB165.F369A%ruslan_zasukhin@valentina-db.com>
References: <CABBB165.F369A%ruslan_zasukhin@valentina-db.com>
Message-ID: <9885f3afa146e082623c20b68299005d@mail.gmail.com>

Avoid backtracking like the plague if you need performance. But if you are
careful in the order of your alts and use it on just a few
decisions/rules, then it might not be so bad (but remember that your error
messages will be weak).

If k=1 on a decision then ANTLR will work that out so you don't need to
specify but if you want to avoid ANTLR following every possible alt then
you can use k=1 on a particular rule or sub rule to avoid ambiguity
errors. Basically if you know that a decision will be correct at k=1 even
though ANTLR can see ambiguities, then tell it so. Before 3.4 this would
still give a warning unless you added a 1 token predicate, but I believe
that Ter changed this for 3.4 so that I could remove a lot of those
predicates from my own T-SQL grammar.

Jim



> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of Ruslan Zasukhin
> Sent: Wednesday, October 12, 2011 11:05 AM
> To: antlr-interest at antlr.org
> Subject: [antlr-interest] Advice on best practice?
>
> Hi All, Terrence, Jim,
>
> I have review FAQs, other docs and list ...
> But sop far cannot find isolated advices/tips of kind
>
>
> * Tend develop grammar as k=1
>    AVOID to use k=*, because this is slower ...
>
> OR reverse
>
> * No problems to use k=*
>  Always prefer to use k=*  and do not worry ... Speed will be fine..
>
> OR
>
> * always tend to (not)? Use  backtrack option.
>     and if you use it then use memoize also ...
>
>
> In the ANTLR3/Examples/C  I see options as
>
>
> ====================
> grammar C;
>
> options
> {
>     backtrack    = true;
>     memoize    = true;
>     k        = 2;
>     language    = C;
> }
> ====================
>
>
> But what is official point of view at current state ?
>
>
>
> --
> Best regards,
>
> Ruslan Zasukhin
> VP Engineering and New Technology
> Paradigma Software, Inc
>
> Valentina - Joining Worlds of Information
> http://www.paradigmasoft.com
>
> [I feel the need: the need for speed]
>
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
> email-address

From brian at brie.com  Wed Oct 12 12:14:22 2011
From: brian at brie.com (Brian Lavender)
Date: Wed, 12 Oct 2011 12:14:22 -0700
Subject: [antlr-interest] Advice on SQL grammar
Message-ID: <20111012191422.GB28321@brie.com>

I am analyzing a set of SQL queries to see what tables and columns are
touched.  They are select queries in Oracle using a handful of functions
such as NVL2, DECODE, and other functions. While I have seen grammars
for Oracle, it seems that digging through them has been confusing not
to mention one used all my heap!  So, I decided to construct my own
grammar. The H2 website has a pretty nice layout of a select grammar,
so I am using that as my model. I have a couple questions.

First, I tried making my start rule 'select' which was later recursively
called.  It appears that I can't do that? I corrected my grammar with
a superceding start rule and all appears fine. Can someone explain the
problem with recursively calling the start rule.

How does my grammar look so far? I have just been "stubbing" it out. 

Any suggestions for doing this?

brian

Sample grammar I am referencing.
http://www.h2database.com/html/grammar.html#select

grammar BooSQL;

options {
  language = Java;
}

@header {
  package grammar;
}

@lexer::header {
  package grammar;
}

sqlStatement
	: select
	;

select
	: 
	'SELECT' ('DISTINCT'|'ALL')? selectExpression (',' selectExpression)* 
	'FROM' tableExpression (',' tableExpression)*
	 ('WHERE' expression)?
	 ('GROUP' 'BY' expression (',' expression)*)?
	 ('HAVING' expression)?
// This where I originally had the problem
	 (('UNION' ('ALL')? | 'MINUS' | 'EXCEPT' | 'INTERSECT') select)?
// Fake end to statment for now
	'ENDSQL'
	;
	
selectExpression
	: IDENT+
	;

tableExpression
	: IDENT+
	;

expression
	: IDENT+
	;





fragment LETTER : ('a'..'z' | 'A'..'Z') ;
fragment DIGIT : '0'..'9';
INTEGER : DIGIT+ ;
IDENT : LETTER (LETTER | DIGIT)*;
QUOTE_IDENT : '"' LETTER (LETTER | DIGIT | ' ')* '"';
WS : (' ' | '\t' | '\n' | '\r' | '\f')+ {$channel = HIDDEN;};
COMMENT : '--' .* ('\n'|'\r') {$channel = HIDDEN;};


-- 
Brian Lavender
http://www.brie.com/brian/

"There are two ways of constructing a software design. One way is to
make it so simple that there are obviously no deficiencies. And the other
way is to make it so complicated that there are no obvious deficiencies."

Professor C. A. R. Hoare
The 1980 Turing award lecture

From ibre5041 at ibrezina.net  Wed Oct 12 12:22:34 2011
From: ibre5041 at ibrezina.net (Ivan Brezina)
Date: Wed, 12 Oct 2011 21:22:34 +0200
Subject: [antlr-interest] Advice on SQL grammar
In-Reply-To: <20111012191422.GB28321@brie.com>
References: <20111012191422.GB28321@brie.com>
Message-ID: <4E95E8FA.903@ibrezina.net>

Hi can you please an example of that query?

Ivan

PS: latest trunk of PL/SQL grammar can be checked out from
https://tora.svn.sourceforge.net/svnroot/tora/branches/tora-trotl/sandbox


On 10/12/2011 09:14 PM, Brian Lavender wrote:
> I am analyzing a set of SQL queries to see what tables and columns are
> touched.  They are select queries in Oracle using a handful of functions
> such as NVL2, DECODE, and other functions. While I have seen grammars
> for Oracle, it seems that digging through them has been confusing not
> to mention one used all my heap!  So, I decided to construct my own
> grammar. The H2 website has a pretty nice layout of a select grammar,
> so I am using that as my model. I have a couple questions.
>
> First, I tried making my start rule 'select' which was later recursively
> called.  It appears that I can't do that? I corrected my grammar with
> a superceding start rule and all appears fine. Can someone explain the
> problem with recursively calling the start rule.
>
> How does my grammar look so far? I have just been "stubbing" it out.
>
> Any suggestions for doing this?
>
> brian
>
> Sample grammar I am referencing.
> http://www.h2database.com/html/grammar.html#select
>
> grammar BooSQL;
>
> options {
>    language = Java;
> }
>
> @header {
>    package grammar;
> }
>
> @lexer::header {
>    package grammar;
> }
>
> sqlStatement
> 	: select
> 	;
>
> select
> 	:
> 	'SELECT' ('DISTINCT'|'ALL')? selectExpression (',' selectExpression)*
> 	'FROM' tableExpression (',' tableExpression)*
> 	 ('WHERE' expression)?
> 	 ('GROUP' 'BY' expression (',' expression)*)?
> 	 ('HAVING' expression)?
> // This where I originally had the problem
> 	 (('UNION' ('ALL')? | 'MINUS' | 'EXCEPT' | 'INTERSECT') select)?
> // Fake end to statment for now
> 	'ENDSQL'
> 	;
> 	
> selectExpression
> 	: IDENT+
> 	;
>
> tableExpression
> 	: IDENT+
> 	;
>
> expression
> 	: IDENT+
> 	;
>
>
>
>
>
> fragment LETTER : ('a'..'z' | 'A'..'Z') ;
> fragment DIGIT : '0'..'9';
> INTEGER : DIGIT+ ;
> IDENT : LETTER (LETTER | DIGIT)*;
> QUOTE_IDENT : '"' LETTER (LETTER | DIGIT | ' ')* '"';
> WS : (' ' | '\t' | '\n' | '\r' | '\f')+ {$channel = HIDDEN;};
> COMMENT : '--' .* ('\n'|'\r') {$channel = HIDDEN;};
>
>


From ben.dotte at gmail.com  Wed Oct 12 13:14:17 2011
From: ben.dotte at gmail.com (Ben Dotte)
Date: Wed, 12 Oct 2011 15:14:17 -0500
Subject: [antlr-interest] Infinite loop after upgrade to 3.3
In-Reply-To: <CABnXfUgv2o=iwNONb-Z0mmUVkx_LZgzOxcpGfVwQUqfnPKTc=Q@mail.gmail.com>
References: <CABnXfUiTGU-enLzA-nqVKfwK-Ry+5HFzH6b0Qqpeb8Kyp5D7Kg@mail.gmail.com>
	<756EE008-AECA-4C8D-83C6-2F11162AFA56@cs.usfca.edu>
	<CABnXfUihGj2ozDbm=SqryLfC6nGeAMiPLv+c9uT=qgP8oBWrAQ@mail.gmail.com>
	<7B0694F0-D7A7-4D62-8B99-7626F404D4C3@cs.usfca.edu>
	<CABnXfUjhKLDpAsN83KcLDrgRWiXAM+tYp=BcadJuB3CLC7Lj0w@mail.gmail.com>
	<1A749894-7A94-41E0-9640-11D5DBB8201D@cs.usfca.edu>
	<CABnXfUgv2o=iwNONb-Z0mmUVkx_LZgzOxcpGfVwQUqfnPKTc=Q@mail.gmail.com>
Message-ID: <CABnXfUjW=Bpgsjpd_4oS+DDe0pxVwC20WgG3bC5cAjgze4F_NA@mail.gmail.com>

I was able to get things running again by removing the "implicitAndSearch"
parser rule from the chain. Unfortunately I still need a way to consider
multiple consecutive terms as "and" searches. I tried combining the
"andSearch" and "implicitAndSearch" rules to look like this:

http://stackoverflow.com/questions/3392377/antlr-implicit-and-tokens-in-tree/3396517#3396517

But ended up with the same infinite loop. Setting k=1, backtrack=true, and
greedy=false on that rule also do not help. Are there any other options or
alternate ways of doing an implicit "and" search that might help this?

Thanks again.. upgrading a different dependency on our app forced the
upgrade of antlr-runtime to 3.3; I may try to force it back to 3.1.2 if I
can't find an alternative that works with newer versions.

On Tue, Oct 11, 2011 at 4:11 PM, Ben Dotte <ben.dotte at gmail.com> wrote:

> I don't see anything like that, but I wouldn't be surprised if the grammar
> could be improved. I pasted it below incase that is any help. Thanks for
> your suggestions.
>
>
> /*----------------------------------------------------------------
>  * PARSER RULES
>  *----------------------------------------------------------------*/
>
> search : orSearch
>  ;
>
> orSearch: andSearch (OR^ andSearch)*
> ;
>
> andSearch
> : (implicitAndSearch AND)=> implicitAndSearch (AND^ implicitAndSearch)*
>  | implicitAndSearch
> ;
>
> implicitAndSearch
> : (f=fieldSearch -> $f)
>  (f2=fieldSearch -> ^(AND $implicitAndSearch $f2))*
> ;
>
> fieldSearch
> : (TEXT ':'^)? (subSearch | negationSearch)
>  ;
>
> negationSearch
> : ('-'^)? (quotedSearch | dateRangeSearch | comparisonSearch | idSearch |
> wildcardSearch | term)
>  ;
>
> wildcardSearch
> : TEXT_WITH_WILDCARD -> ^(WILDCARD TEXT_WITH_WILDCARD)
>  ;
>
> idSearch
> : '#'^ TEXT
>  ;
>
> comparisonSearch
> : '>'^ TEXT
>  | '<'^ TEXT
> ;
>
> quotedSearch
> : QUOTED_STRING -> ^(QUOTED QUOTED_STRING)
>  ;
>
> dateRangeSearch
> : '[' DATE TO DATE ']' -> ^(DATE_BETWEEN DATE+)
>  | '[' AFTER DATE ']' -> ^(DATE_AFTER DATE)
>  | '[' BEFORE DATE ']' -> ^(DATE_BEFORE DATE)
>  ;
>
> subSearch
> : '('! orSearch ')'!
>  ;
>
> term : SEPARATOR* (t=anyText -> $t)
>  (SEPARATOR t2=anyText -> ^(AND $term $t2))*
> SEPARATOR*
>  ;
>
> anyText : (TO | AFTER | BEFORE | DATE | TEXT)
>  ;
>
>
> /*----------------------------------------------------------------
>  * LEXER RULES
>  *----------------------------------------------------------------*/
>
> AND : ('a'|'A')('n'|'N')('d'|'D') ;
> OR : ('o'|'O')('r'|'R') ;
> TO : ('t'|'T')('o'|'O') ;
> AFTER : ('a'|'A')('f'|'F')('t'|'T')('e'|'E')('r'|'R') ;
> BEFORE : ('b'|'B')('e'|'E')('f'|'F')('o'|'O')('r'|'R')('e'|'E') ;
>
> fragment NUM
> : ('0'..'9') ;
> DATE : ('0'..'1')? NUM '/' ('0'..'3')? NUM '/' NUM NUM NUM NUM ;
>
> fragment WHITESPACE_CHAR
> : (' '|'\t'|'\n'|'\r') ;
> fragment SEPARATOR_CHAR
> : '_' ;
> CONTROL_CHAR // not a fragment so . matches to these as well
>  : ('#'|'>'|'<'|'['|']'|'/'|'('|')'|':'|'*'|'"') ;
>
> QUOTED_STRING
> : '"' .+ '"' { setText(getText().substring(1, getText().length() - 1)); }
> ; // strip quotes from output
>
> WHITESPACE
> : (WHITESPACE_CHAR)+ {$channel = HIDDEN;} ;
> SEPARATOR
>  : (SEPARATOR_CHAR)+ ;
>
> fragment TEXT_CHAR
> : (WHITESPACE_CHAR|SEPARATOR_CHAR|CONTROL_CHAR) ;
> TEXT : ~('-'|TEXT_CHAR) (~(TEXT_CHAR))* ;
> TEXT_WITH_WILDCARD
> : (('*' TEXT)|(TEXT '*')) ;
>
>
> On Tue, Oct 11, 2011 at 3:54 PM, Terence Parr <parrt at cs.usfca.edu> wrote:
>
>> maybe an empty lexer rule or one that could match nothign?
>> Ter
>> On Oct 11, 2011, at 1:16 PM, Ben Dotte wrote:
>>
>> > Sorry, it has been a while since I worked with Antlr!
>> >
>> > In that case, no I do not see any.
>> >
>> > On Tue, Oct 11, 2011 at 3:11 PM, Terence Parr <parrt at cs.usfca.edu>
>> wrote:
>> > hi. semantic preds look like {..}? :)
>> > Ter
>> > On Oct 11, 2011, at 1:08 PM, Ben Dotte wrote:
>> >
>> > > Yes, there are a couple rules with semantic predicates:
>> > >
>> > > fieldSearch
>> > > : (TEXT ':'^)? (subSearch | negationSearch)
>> > > ;
>> > >
>> > > negationSearch
>> > > : ('-'^)? (quotedSearch | dateRangeSearch | comparisonSearch |
>> idSearch |
>> > > wildcardSearch | term)
>> > > ;
>> >
>> >
>> >
>> > List: http://www.antlr.org/mailman/listinfo/antlr-interest
>> > Unsubscribe:
>> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>> >
>>
>>
>

From dawood at us.ibm.com  Wed Oct 12 13:48:23 2011
From: dawood at us.ibm.com (David Wood)
Date: Wed, 12 Oct 2011 16:48:23 -0400
Subject: [antlr-interest] AW bogged down with parse exceptions
Message-ID: <OF129DD0A5.166146A9-ON85257927.0071C4E6-85257927.00724C66@us.ibm.com>

I'm creating a tree grammar and copied the parser grammar into a new file 
and started editing it in AW 1.4.3.  AW then extremely sluggish, because 
edits I made cause AW to throw a number of exceptions and/or parser 
errors.  AW became essentially unusable.   The DSMTree.g is the one that 
creates the problem. It references the tokens in DSM.g.  Workarounds?






David Wood 
Computing Systems for Wireless Networks
IBM TJ Watson Research Center
dawood at us.ibm.com
914-784-5123 (office), 914-396-6515 (mobile)
-------------- next part --------------
A non-text attachment was scrubbed...
Name: DSMTree.g
Type: application/octet-stream
Size: 27556 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20111012/35bbef03/attachment.obj 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: DSM.g
Type: application/octet-stream
Size: 27890 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20111012/35bbef03/attachment-0001.obj 

From jimi at temporal-wave.com  Wed Oct 12 14:24:29 2011
From: jimi at temporal-wave.com (Jim Idle)
Date: Wed, 12 Oct 2011 14:24:29 -0700
Subject: [antlr-interest] AW bogged down with parse exceptions
In-Reply-To: <OF129DD0A5.166146A9-ON85257927.0071C4E6-85257927.00724C66@us.ibm.com>
References: <OF129DD0A5.166146A9-ON85257927.0071C4E6-85257927.00724C66@us.ibm.com>
Message-ID: <80d666c2ea34c96de99efa1563547415@mail.gmail.com>

Did you try changing the update timeout in preferences to something
sensible for this kind of edit, such as say 20 seconds? Or you could use
Netbeans to make the changes and then AW as more of a debugger (which is
what I do).

Jim


> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of David Wood
> Sent: Wednesday, October 12, 2011 1:48 PM
> To: antlr-interest at antlr.org
> Subject: [antlr-interest] AW bogged down with parse exceptions
>
> I'm creating a tree grammar and copied the parser grammar into a new
> file and started editing it in AW 1.4.3.  AW then extremely sluggish,
> because edits I made cause AW to throw a number of exceptions and/or
> parser
> errors.  AW became essentially unusable.   The DSMTree.g is the one
> that
> creates the problem. It references the tokens in DSM.g.  Workarounds?
>
>
>
>
>
>
> David Wood
> Computing Systems for Wireless Networks
> IBM TJ Watson Research Center
> dawood at us.ibm.com
> 914-784-5123 (office), 914-396-6515 (mobile)

From brian at brie.com  Wed Oct 12 17:17:28 2011
From: brian at brie.com (Brian Lavender)
Date: Wed, 12 Oct 2011 17:17:28 -0700
Subject: [antlr-interest] crash burn on C runtime
Message-ID: <20111013001728.GA6511@brie.com>

Missing header file it appears.

fix?

cost: 1019 states, 98 ms
gcc -ggdb -O0 -fno-inline -I. -I/usr/include/qt4/QtCore -I/usr/include/qt4/QtGui -I/usr/include/qt4 -I/home/brian/pkg/antlr-3.3/runtime/C/include -I/home/brian/pkg/antlr-3.3/runtime/C -c OracleSQLParser.c -o OracleSQLParser.o
In file included from /home/brian/pkg/antlr-3.3/runtime/C/include/antlr3.h:33:0,
                 from OracleSQLParser.h:539,
                 from OracleSQLParser.c:45:
/home/brian/pkg/antlr-3.3/runtime/C/include/antlr3defs.h:246:26: fatal error: antlr3config.h: No such file or directory
compilation terminated.
make: *** [OracleSQLParser.o] Error 1



-- 
Brian Lavender
http://www.brie.com/brian/

"There are two ways of constructing a software design. One way is to
make it so simple that there are obviously no deficiencies. And the other
way is to make it so complicated that there are no obvious deficiencies."

Professor C. A. R. Hoare
The 1980 Turing award lecture

From hellojinjie at gmail.com  Wed Oct 12 18:16:56 2011
From: hellojinjie at gmail.com (=?UTF-8?B?6YeR5p2w?=)
Date: Thu, 13 Oct 2011 09:16:56 +0800
Subject: [antlr-interest] crash burn on C runtime
In-Reply-To: <20111013001728.GA6511@brie.com>
References: <20111013001728.GA6511@brie.com>
Message-ID: <CAKZS5e-5EPAqixOweGRKaaHZh1-SAAx1G5jFW2Q4-FjcHNCkiA@mail.gmail.com>

Have you tried to use "find /home/brian -name "antlr3config.h"" to locate
antlr3config.h?
I guess that you must have not type "make install" to install antlr3.
My suggestion is first install antlr3
make DESTDIR=/opt/antlr3c install

On Thu, Oct 13, 2011 at 8:17 AM, Brian Lavender <brian at brie.com> wrote:

> Missing header file it appears.
>
> fix?
>
> cost: 1019 states, 98 ms
> gcc -ggdb -O0 -fno-inline -I. -I/usr/include/qt4/QtCore
> -I/usr/include/qt4/QtGui -I/usr/include/qt4
> -I/home/brian/pkg/antlr-3.3/runtime/C/include
> -I/home/brian/pkg/antlr-3.3/runtime/C -c OracleSQLParser.c -o
> OracleSQLParser.o
> In file included from
> /home/brian/pkg/antlr-3.3/runtime/C/include/antlr3.h:33:0,
>                 from OracleSQLParser.h:539,
>                 from OracleSQLParser.c:45:
> /home/brian/pkg/antlr-3.3/runtime/C/include/antlr3defs.h:246:26: fatal
> error: antlr3config.h: No such file or directory
> compilation terminated.
> make: *** [OracleSQLParser.o] Error 1
>
>
>
> --
> Brian Lavender
> http://www.brie.com/brian/
>
> "There are two ways of constructing a software design. One way is to
> make it so simple that there are obviously no deficiencies. And the other
> way is to make it so complicated that there are no obvious deficiencies."
>
> Professor C. A. R. Hoare
> The 1980 Turing award lecture
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>



-- 
??

From ruslan_zasukhin at valentina-db.com  Thu Oct 13 02:02:51 2011
From: ruslan_zasukhin at valentina-db.com (Ruslan Zasukhin)
Date: Thu, 13 Oct 2011 12:02:51 +0300
Subject: [antlr-interest] Advice on best practice?
In-Reply-To: <9885f3afa146e082623c20b68299005d@mail.gmail.com>
Message-ID: <CABC83EB.F37BE%ruslan_zasukhin@valentina-db.com>

On 10/12/11 9:15 PM, "Jim Idle" <jimi at temporal-wave.com> wrote:

Hi Jim,

> Avoid backtracking like the plague if you need performance. But if you are
> careful in the order of your alts and use it on just a few
> decisions/rules, then it might not be so bad (but remember that your error
> messages will be weak).

Then next question comes to mind:
    does ANTLR allow us somehow easy to see that during parsing
    was made 2-3 or 4 backtracking.

Like profiler ... So we can see that and start learn where and why ..
? 
 
> If k=1 on a decision then ANTLR will work that out so you don't need to
> specify but if you want to avoid ANTLR following every possible alt then
> you can use k=1 on a particular rule or sub rule to avoid ambiguity
> errors.

Aha, so playing with k=1 option,
We can even kill ambiguity errors/warnings.

Interesting. 

This is what I ask for -- it will be great to have list of such tricks/rules
from ANTLR experts ..

>  Basically if you know that a decision will be correct at k=1 even
> though ANTLR can see ambiguities, then tell it so.

> Before 3.4 this would still give a warning unless you added a 1 token
> predicate, but I believe that Ter changed this for 3.4 so that I could remove
> a lot of those predicates from my own T-SQL grammar.

So we do not need that one-token predicates now ... Good.
But I do not understand how it looks?

Can you show example of such predicate just for interest ?

 
> Jim
> 
> 
> 
>> -----Original Message-----
>> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
>> bounces at antlr.org] On Behalf Of Ruslan Zasukhin
>> Sent: Wednesday, October 12, 2011 11:05 AM
>> To: antlr-interest at antlr.org
>> Subject: [antlr-interest] Advice on best practice?
>> 
>> Hi All, Terrence, Jim,
>> 
>> I have review FAQs, other docs and list ...
>> But sop far cannot find isolated advices/tips of kind
>> 
>> 
>> * Tend develop grammar as k=1
>>    AVOID to use k=*, because this is slower ...
>> 
>> OR reverse
>> 
>> * No problems to use k=*
>>  Always prefer to use k=*  and do not worry ... Speed will be fine..
>> 
>> OR
>> 
>> * always tend to (not)? Use  backtrack option.
>>     and if you use it then use memoize also ...
>> 
>> 
>> In the ANTLR3/Examples/C  I see options as
>> 
>> 
>> ====================
>> grammar C;
>> 
>> options
>> {
>>     backtrack    = true;
>>     memoize    = true;
>>     k        = 2;
>>     language    = C;
>> }
>> ====================
>> 
>> 
>> But what is official point of view at current state ?

-- 
Best regards,

Ruslan Zasukhin
VP Engineering and New Technology
Paradigma Software, Inc

Valentina - Joining Worlds of Information
http://www.paradigmasoft.com

[I feel the need: the need for speed]



From ibre5041 at ibrezina.net  Thu Oct 13 05:27:19 2011
From: ibre5041 at ibrezina.net (Ivan Brezina)
Date: Thu, 13 Oct 2011 14:27:19 +0200
Subject: [antlr-interest] Aliases in AST rewrite generate wrong C code in
	ver 3.4
Message-ID: <20111013142719.pscpuatxs84ggg0w@webmail.kamm.cz>

Hi
when I tried to migrate my grammar from version 3.3 into 3.4 I noticed this:
Grammar excerpt:
--- snap ---
subquery
	:
         (
//LPAREN select_statement RPAREN
//        ( group_by_clause )?
//        ( (k_model (k_main|k_partition|k_dimension) ) => model_clause )?
//        ( union_clause )*
         ( fu1=for_update_clause )?
//        ( order_by_clause )?
         ( fu2=for_update_clause )?
         ) -> ^(T_SUBQUERY $fu1 $fu2)
	|	(
		LPAREN subquery RPAREN
//        ( group_by_clause )?
//        ( (k_model (k_main|k_partition|k_dimension) ) => model_clause )?
//        ( union_clause )*
         ( fu1=for_update_clause )?
//        ( order_by_clause )?
         ( fu2=for_update_clause )?
         ) -> ^(T_SUBQUERY subquery $fu1 $fu2)
	;
/*  
================================================================================
     FOR UPDATE CLAUSE
     
================================================================================  
*/
for_update_clause
	: r_for r_update ( r_of for_update_clause_part_first  
for_update_clause_part_next* )? (r_nowait | k_wait NUMBER | k_skip  
k_locked)?
	-> ^(T_FOR_UPDATE_CLAUSE r_for r_update r_of?  
for_update_clause_part_first? for_update_clause_part_next* r_nowait?  
k_wait? NUMBER? k_skip? k_locked?)
	;
for_update_clause_part_first
	: (schema_name DOT)? (table_name DOT)? column_name
	;
for_update_clause_part_next
	: COMMA (schema_name DOT)? (table_name DOT)? column_name
	;
--- end snap ---

This is a minimalistic subset of my grammar that reproduces the problem.
ANTLR ver 3.4 produces C code which contains this:

--- snap ---
// $ANTLR start synpred2_OracleSQL
static void synpred2_OracleSQL_fragment(pOracleSQLParser ctx )
{
	void ; // <== !! HERE !!!
	#undef	RETURN_TYPE_
	#define	RETURN_TYPE_ void

     // OracleSQL.g:30:11: (fu1= for_update_clause )
     // OracleSQL.g:30:11: fu1= for_update_clause
     {
         FOLLOWPUSH(FOLLOW_for_update_clause_in_synpred2_OracleSQL172);
         fu1=for_update_clause(ctx);

         FOLLOWPOP();
         if  (HASEXCEPTION())
         {
             goto rulesynpred2_OracleSQLEx;
         }
         if (HASFAILED())
         {
             return ;
         }


     }

// This is where rules clean up and exit
//
goto rulesynpred2_OracleSQLEx; /* Prevent compiler warnings */
rulesynpred2_OracleSQLEx: ;

}
--- end snap ---

While in version 3.3 the declaration "void ;" is replaced by  
"	OracleSQLParser_for_update_clause_return fu1;"
Note: Generated code for Java is also incorrect.

Is it a bug or am I doing something wrong?

Ivan


----------------------------------------------------------------
This message was sent using IMP, the Internet Messaging Program.

-------------- next part --------------
A non-text attachment was scrubbed...
Name: OracleSQL.g
Type: application/octet-stream
Size: 2563 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20111013/964105d0/attachment.obj 

From lifesting at gmail.com  Thu Oct 13 06:05:21 2011
From: lifesting at gmail.com (Chan David)
Date: Thu, 13 Oct 2011 21:05:21 +0800
Subject: [antlr-interest] How to stop immediate compilation in AntlrWorks?
Message-ID: <CAF_ThcJLZ2yhVAMGAZMetApbWmBRzzWpYc5ASTSQs3VS8R6trg@mail.gmail.com>

Hi, kind pro, I like AntlrWorks, it has a great debugger to help me figure
out what's wrong. But I really dislike it's immediate compilation(very
different from incremental compilation like Eclipse). AntlrWorks don't know
whether a statement was finished, it just compile, compile and compile when
tiny change was made such as  add/delete a character. The most painful
experience is that you can't stop these heavy works which often make my 4G
PC very slow, even blocked. There's no any switch(setting) to avoid these
actions.

Thanks!

From jimi at temporal-wave.com  Thu Oct 13 07:55:02 2011
From: jimi at temporal-wave.com (Jim Idle)
Date: Thu, 13 Oct 2011 07:55:02 -0700
Subject: [antlr-interest] Advice on best practice?
In-Reply-To: <CABC83EB.F37BE%ruslan_zasukhin@valentina-db.com>
References: <9885f3afa146e082623c20b68299005d@mail.gmail.com>
	<CABC83EB.F37BE%ruslan_zasukhin@valentina-db.com>
Message-ID: <185068c91075ef37bf840be60ab9c3c7@mail.gmail.com>

> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of Ruslan Zasukhin
> Sent: Thursday, October 13, 2011 2:03 AM
> To: antlr-interest at antlr.org
> Subject: Re: [antlr-interest] Advice on best practice?
>
> On 10/12/11 9:15 PM, "Jim Idle" <jimi at temporal-wave.com> wrote:
>
> Hi Jim,
>
> > Avoid backtracking like the plague if you need performance. But if
> you
> > are careful in the order of your alts and use it on just a few
> > decisions/rules, then it might not be so bad (but remember that your
> > error messages will be weak).
>
> Then next question comes to mind:
>     does ANTLR allow us somehow easy to see that during parsing
>     was made 2-3 or 4 backtracking.
>
> Like profiler ... So we can see that and start learn where and why ..
> ?

You can turn on the trace rule stuff, but not in the C target as I never
implemented that, but I am not sure that it would help as there would be
too much information. Some of the other -X options might help. But really,
it is better to just turn off backtracking and resolve the ambiguities as
that is where all the backtracking will be done.

>
> > If k=1 on a decision then ANTLR will work that out so you don't need
> > to specify but if you want to avoid ANTLR following every possible
> alt
> > then you can use k=1 on a particular rule or sub rule to avoid
> > ambiguity errors.
>
> Aha, so playing with k=1 option,
> We can even kill ambiguity errors/warnings.
>
> Interesting.
>
> This is what I ask for -- it will be great to have list of such
> tricks/rules from ANTLR experts ..
>
> >  Basically if you know that a decision will be correct at k=1 even
> > though ANTLR can see ambiguities, then tell it so.
>
> > Before 3.4 this would still give a warning unless you added a 1 token
> > predicate, but I believe that Ter changed this for 3.4 so that I
> could
> > remove a lot of those predicates from my own T-SQL grammar.
>
> So we do not need that one-token predicates now ... Good.
> But I do not understand how it looks?
>
> Can you show example of such predicate just for interest ?


In order to turn off a warning, you would have to do this:

FRED: FRED ((WAS)=>WAS))? var;

Now you can use k=1 to turn that warning off (but experiment on small
grammars to get it right).


Jim

From jimi at temporal-wave.com  Thu Oct 13 08:03:37 2011
From: jimi at temporal-wave.com (Jim Idle)
Date: Thu, 13 Oct 2011 08:03:37 -0700
Subject: [antlr-interest] How to stop immediate compilation in
	AntlrWorks?
In-Reply-To: <CAF_ThcJLZ2yhVAMGAZMetApbWmBRzzWpYc5ASTSQs3VS8R6trg@mail.gmail.com>
References: <CAF_ThcJLZ2yhVAMGAZMetApbWmBRzzWpYc5ASTSQs3VS8R6trg@mail.gmail.com>
Message-ID: <968c573c87505d24c71999cebfbc86f8@mail.gmail.com>

In Preferences, change the update delay to a very high number and you will
have less issues. However, typing up the grammar in Netbeans with the
plugin for syntax highlight, then using ANTLRWorks as a debugger works
better for me personally.

Jim

> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of Chan David
> Sent: Thursday, October 13, 2011 6:05 AM
> To: antlr-interest at antlr.org
> Subject: [antlr-interest] How to stop immediate compilation in
> AntlrWorks?
>
> Hi, kind pro, I like AntlrWorks, it has a great debugger to help me
> figure out what's wrong. But I really dislike it's immediate
> compilation(very different from incremental compilation like Eclipse).
> AntlrWorks don't know whether a statement was finished, it just
> compile, compile and compile when tiny change was made such as
> add/delete a character. The most painful experience is that you can't
> stop these heavy works which often make my 4G PC very slow, even
> blocked. There's no any switch(setting) to avoid these actions.
>
> Thanks!
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
> email-address

From brian at brie.com  Thu Oct 13 09:39:09 2011
From: brian at brie.com (Brian Lavender)
Date: Thu, 13 Oct 2011 09:39:09 -0700
Subject: [antlr-interest] crash burn on C runtime
In-Reply-To: <20111013001728.GA6511@brie.com>
References: <20111013001728.GA6511@brie.com>
Message-ID: <20111013163909.GB6511@brie.com>

Well, it seems that I forgot to build the antlr runtime library. Doh!

The antlr-3.3.tar.gz download doesn't have a configure.sh file in the 
runtime/C directory. When I try to generate one using autoconf or 
automake, it complains about missing m4 macros. Anyone have the fix
for this? 

This is the tar g zed file I am using.
http://antlr.org/download/antlr-3.3.tar.gz


brian

On Wed, Oct 12, 2011 at 05:17:28PM -0700, Brian Lavender wrote:
> Missing header file it appears.
> 
> fix?
> 
> cost: 1019 states, 98 ms
> gcc -ggdb -O0 -fno-inline -I. -I/usr/include/qt4/QtCore -I/usr/include/qt4/QtGui -I/usr/include/qt4 -I/home/brian/pkg/antlr-3.3/runtime/C/include -I/home/brian/pkg/antlr-3.3/runtime/C -c OracleSQLParser.c -o OracleSQLParser.o
> In file included from /home/brian/pkg/antlr-3.3/runtime/C/include/antlr3.h:33:0,
>                  from OracleSQLParser.h:539,
>                  from OracleSQLParser.c:45:
> /home/brian/pkg/antlr-3.3/runtime/C/include/antlr3defs.h:246:26: fatal error: antlr3config.h: No such file or directory
> compilation terminated.
> make: *** [OracleSQLParser.o] Error 1
> 
> 
> 
> -- 
> Brian Lavender
> http://www.brie.com/brian/
> 
> "There are two ways of constructing a software design. One way is to
> make it so simple that there are obviously no deficiencies. And the other
> way is to make it so complicated that there are no obvious deficiencies."
> 
> Professor C. A. R. Hoare
> The 1980 Turing award lecture
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address

-- 
Brian Lavender
http://www.brie.com/brian/

"There are two ways of constructing a software design. One way is to
make it so simple that there are obviously no deficiencies. And the other
way is to make it so complicated that there are no obvious deficiencies."

Professor C. A. R. Hoare
The 1980 Turing award lecture

From brian at brie.com  Thu Oct 13 11:24:39 2011
From: brian at brie.com (Brian Lavender)
Date: Thu, 13 Oct 2011 11:24:39 -0700
Subject: [antlr-interest] Could I buy a vowel please?
Message-ID: <20111013182439.GC6511@brie.com>

It looks like I am one step closer with building the C runtime. I was able to generate a 
configure shell script, add missing files and run configure. The fails at the following 
output. I am running on 64 bit.

Any tips on this? 

 autoreconf
 automake --add-missing
 ./configure --enable-64bit
 make


mv -f .deps/antlr3rewritestreams.Tpo .deps/antlr3rewritestreams.Plo
/bin/bash ./libtool  --tag=CC   --mode=compile gcc -DHAVE_CONFIG_H -I. -Iinclude    -m64  -O2  -Wall -MT antlr3string.lo -MD -MP -MF .deps/antlr3string.Tpo -c -o antlr3string.lo `test -f 'src/antlr3string.c' || echo './'`src/antlr3string.c
libtool: compile:  gcc -DHAVE_CONFIG_H -I. -Iinclude -m64 -O2 -Wall -MT antlr3string.lo -MD -MP -MF .deps/antlr3string.Tpo -c src/antlr3string.c  -fPIC -DPIC -o .libs/antlr3string.o
src/antlr3string.c:329:1: warning: ???stringInitUTF8??? defined but not used
libtool: compile:  gcc -DHAVE_CONFIG_H -I. -Iinclude -m64 -O2 -Wall -MT antlr3string.lo -MD -MP -MF .deps/antlr3string.Tpo -c src/antlr3string.c -o antlr3string.o >/dev/null 2>&1
mv -f .deps/antlr3string.Tpo .deps/antlr3string.Plo
make[1]: *** No rule to make target `src/antlr3stringstream.c', needed by `antlr3stringstream.lo'.  Stop.
make[1]: Leaving directory `/home/brian/pkg/antlr-3.3/runtime/C'
make: *** [all] Error 2


-- 
Brian Lavender
http://www.brie.com/brian/

"There are two ways of constructing a software design. One way is to
make it so simple that there are obviously no deficiencies. And the other
way is to make it so complicated that there are no obvious deficiencies."

Professor C. A. R. Hoare
The 1980 Turing award lecture

From ben.dotte at gmail.com  Thu Oct 13 12:31:59 2011
From: ben.dotte at gmail.com (Ben Dotte)
Date: Thu, 13 Oct 2011 14:31:59 -0500
Subject: [antlr-interest] Infinite loop after upgrade to 3.3
In-Reply-To: <CABnXfUjW=Bpgsjpd_4oS+DDe0pxVwC20WgG3bC5cAjgze4F_NA@mail.gmail.com>
References: <CABnXfUiTGU-enLzA-nqVKfwK-Ry+5HFzH6b0Qqpeb8Kyp5D7Kg@mail.gmail.com>
	<756EE008-AECA-4C8D-83C6-2F11162AFA56@cs.usfca.edu>
	<CABnXfUihGj2ozDbm=SqryLfC6nGeAMiPLv+c9uT=qgP8oBWrAQ@mail.gmail.com>
	<7B0694F0-D7A7-4D62-8B99-7626F404D4C3@cs.usfca.edu>
	<CABnXfUjhKLDpAsN83KcLDrgRWiXAM+tYp=BcadJuB3CLC7Lj0w@mail.gmail.com>
	<1A749894-7A94-41E0-9640-11D5DBB8201D@cs.usfca.edu>
	<CABnXfUgv2o=iwNONb-Z0mmUVkx_LZgzOxcpGfVwQUqfnPKTc=Q@mail.gmail.com>
	<CABnXfUjW=Bpgsjpd_4oS+DDe0pxVwC20WgG3bC5cAjgze4F_NA@mail.gmail.com>
Message-ID: <CABnXfUg3EW6rffmCpfGqo1Gvo072GCrncMX6pGb61zFaoOvhyA@mail.gmail.com>

Finally figured it out! Incase anyone else hits this, I was using a
SwitchingCommonTokenStream in the Java code that I had found out on the net
years ago. The grammar actually stopped using it at some point, but it never
got removed on the Java side. Replacing that with the standard
CommonTokenStream made everything work again.

So, word to the wise, do NOT use SwitchingCommonTokenStream on the Java
antlr-runtime versions 3.3 and above.

On Wed, Oct 12, 2011 at 3:14 PM, Ben Dotte <ben.dotte at gmail.com> wrote:

> I was able to get things running again by removing the "implicitAndSearch"
> parser rule from the chain. Unfortunately I still need a way to consider
> multiple consecutive terms as "and" searches. I tried combining the
> "andSearch" and "implicitAndSearch" rules to look like this:
>
>
> http://stackoverflow.com/questions/3392377/antlr-implicit-and-tokens-in-tree/3396517#3396517
>
> But ended up with the same infinite loop. Setting k=1, backtrack=true, and
> greedy=false on that rule also do not help. Are there any other options or
> alternate ways of doing an implicit "and" search that might help this?
>
> Thanks again.. upgrading a different dependency on our app forced the
> upgrade of antlr-runtime to 3.3; I may try to force it back to 3.1.2 if I
> can't find an alternative that works with newer versions.
>
> On Tue, Oct 11, 2011 at 4:11 PM, Ben Dotte <ben.dotte at gmail.com> wrote:
>
>> I don't see anything like that, but I wouldn't be surprised if the grammar
>> could be improved. I pasted it below incase that is any help. Thanks for
>> your suggestions.
>>
>>
>> /*----------------------------------------------------------------
>>  * PARSER RULES
>>  *----------------------------------------------------------------*/
>>
>> search : orSearch
>>  ;
>>
>> orSearch: andSearch (OR^ andSearch)*
>> ;
>>
>> andSearch
>> : (implicitAndSearch AND)=> implicitAndSearch (AND^ implicitAndSearch)*
>>  | implicitAndSearch
>> ;
>>
>> implicitAndSearch
>> : (f=fieldSearch -> $f)
>>  (f2=fieldSearch -> ^(AND $implicitAndSearch $f2))*
>> ;
>>
>> fieldSearch
>> : (TEXT ':'^)? (subSearch | negationSearch)
>>  ;
>>
>> negationSearch
>> : ('-'^)? (quotedSearch | dateRangeSearch | comparisonSearch | idSearch |
>> wildcardSearch | term)
>>  ;
>>
>> wildcardSearch
>> : TEXT_WITH_WILDCARD -> ^(WILDCARD TEXT_WITH_WILDCARD)
>>  ;
>>
>> idSearch
>> : '#'^ TEXT
>>  ;
>>
>> comparisonSearch
>> : '>'^ TEXT
>>  | '<'^ TEXT
>> ;
>>
>> quotedSearch
>> : QUOTED_STRING -> ^(QUOTED QUOTED_STRING)
>>  ;
>>
>> dateRangeSearch
>> : '[' DATE TO DATE ']' -> ^(DATE_BETWEEN DATE+)
>>  | '[' AFTER DATE ']' -> ^(DATE_AFTER DATE)
>>  | '[' BEFORE DATE ']' -> ^(DATE_BEFORE DATE)
>>  ;
>>
>> subSearch
>> : '('! orSearch ')'!
>>  ;
>>
>> term : SEPARATOR* (t=anyText -> $t)
>>  (SEPARATOR t2=anyText -> ^(AND $term $t2))*
>> SEPARATOR*
>>  ;
>>
>> anyText : (TO | AFTER | BEFORE | DATE | TEXT)
>>  ;
>>
>>
>> /*----------------------------------------------------------------
>>  * LEXER RULES
>>  *----------------------------------------------------------------*/
>>
>> AND : ('a'|'A')('n'|'N')('d'|'D') ;
>> OR : ('o'|'O')('r'|'R') ;
>> TO : ('t'|'T')('o'|'O') ;
>> AFTER : ('a'|'A')('f'|'F')('t'|'T')('e'|'E')('r'|'R') ;
>> BEFORE : ('b'|'B')('e'|'E')('f'|'F')('o'|'O')('r'|'R')('e'|'E') ;
>>
>> fragment NUM
>> : ('0'..'9') ;
>> DATE : ('0'..'1')? NUM '/' ('0'..'3')? NUM '/' NUM NUM NUM NUM ;
>>
>> fragment WHITESPACE_CHAR
>> : (' '|'\t'|'\n'|'\r') ;
>> fragment SEPARATOR_CHAR
>> : '_' ;
>> CONTROL_CHAR // not a fragment so . matches to these as well
>>  : ('#'|'>'|'<'|'['|']'|'/'|'('|')'|':'|'*'|'"') ;
>>
>> QUOTED_STRING
>> : '"' .+ '"' { setText(getText().substring(1, getText().length() - 1)); }
>> ; // strip quotes from output
>>
>> WHITESPACE
>> : (WHITESPACE_CHAR)+ {$channel = HIDDEN;} ;
>> SEPARATOR
>>  : (SEPARATOR_CHAR)+ ;
>>
>> fragment TEXT_CHAR
>> : (WHITESPACE_CHAR|SEPARATOR_CHAR|CONTROL_CHAR) ;
>> TEXT : ~('-'|TEXT_CHAR) (~(TEXT_CHAR))* ;
>> TEXT_WITH_WILDCARD
>> : (('*' TEXT)|(TEXT '*')) ;
>>
>>
>> On Tue, Oct 11, 2011 at 3:54 PM, Terence Parr <parrt at cs.usfca.edu> wrote:
>>
>>> maybe an empty lexer rule or one that could match nothign?
>>> Ter
>>> On Oct 11, 2011, at 1:16 PM, Ben Dotte wrote:
>>>
>>> > Sorry, it has been a while since I worked with Antlr!
>>> >
>>> > In that case, no I do not see any.
>>> >
>>> > On Tue, Oct 11, 2011 at 3:11 PM, Terence Parr <parrt at cs.usfca.edu>
>>> wrote:
>>> > hi. semantic preds look like {..}? :)
>>> > Ter
>>> > On Oct 11, 2011, at 1:08 PM, Ben Dotte wrote:
>>> >
>>> > > Yes, there are a couple rules with semantic predicates:
>>> > >
>>> > > fieldSearch
>>> > > : (TEXT ':'^)? (subSearch | negationSearch)
>>> > > ;
>>> > >
>>> > > negationSearch
>>> > > : ('-'^)? (quotedSearch | dateRangeSearch | comparisonSearch |
>>> idSearch |
>>> > > wildcardSearch | term)
>>> > > ;
>>> >
>>> >
>>> >
>>> > List: http://www.antlr.org/mailman/listinfo/antlr-interest
>>> > Unsubscribe:
>>> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>>> >
>>>
>>>
>>
>

From jimi at temporal-wave.com  Thu Oct 13 12:57:23 2011
From: jimi at temporal-wave.com (Jim Idle)
Date: Thu, 13 Oct 2011 12:57:23 -0700
Subject: [antlr-interest] crash burn on C runtime
In-Reply-To: <20111013163909.GB6511@brie.com>
References: <20111013001728.GA6511@brie.com> <20111013163909.GB6511@brie.com>
Message-ID: <520c33ea975b52827087dc93c213711c@mail.gmail.com>

You should be using 3.4 runtime distribution, the pure source is for
developers only
There is no 3.3 C runtime - it was skipped.
You do not run autoconf or automake.
Then read the build instructions in the API docs.
Untar
./configure --help


http://www.antlr.org/download/C/libantlr3c-3.4.tar.gz

http://www.antlr.org/api/C/index.html


Jim

> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of Brian Lavender
> Sent: Thursday, October 13, 2011 9:39 AM
> To: antlr-interest at antlr.org
> Subject: Re: [antlr-interest] crash burn on C runtime
>
> Well, it seems that I forgot to build the antlr runtime library. Doh!
>
> The antlr-3.3.tar.gz download doesn't have a configure.sh file in the
> runtime/C directory. When I try to generate one using autoconf or
> automake, it complains about missing m4 macros. Anyone have the fix for
> this?
>
> This is the tar g zed file I am using.
> http://antlr.org/download/antlr-3.3.tar.gz
>
>
> brian
>
> On Wed, Oct 12, 2011 at 05:17:28PM -0700, Brian Lavender wrote:
> > Missing header file it appears.
> >
> > fix?
> >
> > cost: 1019 states, 98 ms
> > gcc -ggdb -O0 -fno-inline -I. -I/usr/include/qt4/QtCore
> > -I/usr/include/qt4/QtGui -I/usr/include/qt4 -I/home/brian/pkg/antlr-
> 3.3/runtime/C/include -I/home/brian/pkg/antlr-3.3/runtime/C -c
> OracleSQLParser.c -o OracleSQLParser.o In file included from
> /home/brian/pkg/antlr-3.3/runtime/C/include/antlr3.h:33:0,
> >                  from OracleSQLParser.h:539,
> >                  from OracleSQLParser.c:45:
> > /home/brian/pkg/antlr-3.3/runtime/C/include/antlr3defs.h:246:26:
> fatal
> > error: antlr3config.h: No such file or directory compilation
> terminated.
> > make: *** [OracleSQLParser.o] Error 1
> >
> >
> >
> > --
> > Brian Lavender
> > http://www.brie.com/brian/
> >
> > "There are two ways of constructing a software design. One way is to
> > make it so simple that there are obviously no deficiencies. And the
> > other way is to make it so complicated that there are no obvious
> deficiencies."
> >
> > Professor C. A. R. Hoare
> > The 1980 Turing award lecture
> >
> > List: http://www.antlr.org/mailman/listinfo/antlr-interest
> > Unsubscribe:
> > http://www.antlr.org/mailman/options/antlr-interest/your-email-
> address
>
> --
> Brian Lavender
> http://www.brie.com/brian/
>
> "There are two ways of constructing a software design. One way is to
> make it so simple that there are obviously no deficiencies. And the
> other way is to make it so complicated that there are no obvious
> deficiencies."
>
> Professor C. A. R. Hoare
> The 1980 Turing award lecture
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
> email-address

From jimi at temporal-wave.com  Thu Oct 13 13:00:09 2011
From: jimi at temporal-wave.com (Jim Idle)
Date: Thu, 13 Oct 2011 13:00:09 -0700
Subject: [antlr-interest] crash burn on C runtime
In-Reply-To: <20111013163909.GB6511@brie.com>
References: <20111013001728.GA6511@brie.com> <20111013163909.GB6511@brie.com>
Message-ID: <74128944179adccdb51b9ac160976d1d@mail.gmail.com>

Please download the C runtime distribution, not the complete source tar.
That tar is for people working on ANTLR, not building the runtime,

Jim

> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of Brian Lavender
> Sent: Thursday, October 13, 2011 9:39 AM
> To: antlr-interest at antlr.org
> Subject: Re: [antlr-interest] crash burn on C runtime
>
> Well, it seems that I forgot to build the antlr runtime library. Doh!
>
> The antlr-3.3.tar.gz download doesn't have a configure.sh file in the
> runtime/C directory. When I try to generate one using autoconf or
> automake, it complains about missing m4 macros. Anyone have the fix for
> this?
>
> This is the tar g zed file I am using.
> http://antlr.org/download/antlr-3.3.tar.gz
>
>
> brian
>
> On Wed, Oct 12, 2011 at 05:17:28PM -0700, Brian Lavender wrote:
> > Missing header file it appears.
> >
> > fix?
> >
> > cost: 1019 states, 98 ms
> > gcc -ggdb -O0 -fno-inline -I. -I/usr/include/qt4/QtCore
> > -I/usr/include/qt4/QtGui -I/usr/include/qt4 -I/home/brian/pkg/antlr-
> 3.3/runtime/C/include -I/home/brian/pkg/antlr-3.3/runtime/C -c
> OracleSQLParser.c -o OracleSQLParser.o In file included from
> /home/brian/pkg/antlr-3.3/runtime/C/include/antlr3.h:33:0,
> >                  from OracleSQLParser.h:539,
> >                  from OracleSQLParser.c:45:
> > /home/brian/pkg/antlr-3.3/runtime/C/include/antlr3defs.h:246:26:
> fatal
> > error: antlr3config.h: No such file or directory compilation
> terminated.
> > make: *** [OracleSQLParser.o] Error 1
> >
> >
> >
> > --
> > Brian Lavender
> > http://www.brie.com/brian/
> >
> > "There are two ways of constructing a software design. One way is to
> > make it so simple that there are obviously no deficiencies. And the
> > other way is to make it so complicated that there are no obvious
> deficiencies."
> >
> > Professor C. A. R. Hoare
> > The 1980 Turing award lecture
> >
> > List: http://www.antlr.org/mailman/listinfo/antlr-interest
> > Unsubscribe:
> > http://www.antlr.org/mailman/options/antlr-interest/your-email-
> address
>
> --
> Brian Lavender
> http://www.brie.com/brian/
>
> "There are two ways of constructing a software design. One way is to
> make it so simple that there are obviously no deficiencies. And the
> other way is to make it so complicated that there are no obvious
> deficiencies."
>
> Professor C. A. R. Hoare
> The 1980 Turing award lecture
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
> email-address

From jimi at temporal-wave.com  Thu Oct 13 13:00:44 2011
From: jimi at temporal-wave.com (Jim Idle)
Date: Thu, 13 Oct 2011 13:00:44 -0700
Subject: [antlr-interest] Could I buy a vowel please?
In-Reply-To: <20111013182439.GC6511@brie.com>
References: <20111013182439.GC6511@brie.com>
Message-ID: <d9ad430a287f66cae2f06ee240613bf4@mail.gmail.com>

PLEASE, read the documentation and visit the downloads page and find C
runtime.

Jim

> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of Brian Lavender
> Sent: Thursday, October 13, 2011 11:25 AM
> To: antlr-interest at antlr.org
> Subject: [antlr-interest] Could I buy a vowel please?
>
> It looks like I am one step closer with building the C runtime. I was
> able to generate a configure shell script, add missing files and run
> configure. The fails at the following output. I am running on 64 bit.
>
> Any tips on this?
>
>  autoreconf
>  automake --add-missing
>  ./configure --enable-64bit
>  make
>
>
> mv -f .deps/antlr3rewritestreams.Tpo .deps/antlr3rewritestreams.Plo
> /bin/bash ./libtool  --tag=CC   --mode=compile gcc -DHAVE_CONFIG_H -I.
> -Iinclude    -m64  -O2  -Wall -MT antlr3string.lo -MD -MP -MF
> .deps/antlr3string.Tpo -c -o antlr3string.lo `test -f
> 'src/antlr3string.c' || echo './'`src/antlr3string.c
> libtool: compile:  gcc -DHAVE_CONFIG_H -I. -Iinclude -m64 -O2 -Wall -MT
> antlr3string.lo -MD -MP -MF .deps/antlr3string.Tpo -c
> src/antlr3string.c  -fPIC -DPIC -o .libs/antlr3string.o
> src/antlr3string.c:329:1: warning: ???stringInitUTF8??? defined but not
> used
> libtool: compile:  gcc -DHAVE_CONFIG_H -I. -Iinclude -m64 -O2 -Wall -MT
> antlr3string.lo -MD -MP -MF .deps/antlr3string.Tpo -c
> src/antlr3string.c -o antlr3string.o >/dev/null 2>&1 mv -f
> .deps/antlr3string.Tpo .deps/antlr3string.Plo
> make[1]: *** No rule to make target `src/antlr3stringstream.c', needed
> by `antlr3stringstream.lo'.  Stop.
> make[1]: Leaving directory `/home/brian/pkg/antlr-3.3/runtime/C'
> make: *** [all] Error 2
>
>
> --
> Brian Lavender
> http://www.brie.com/brian/
>
> "There are two ways of constructing a software design. One way is to
> make it so simple that there are obviously no deficiencies. And the
> other way is to make it so complicated that there are no obvious
> deficiencies."
>
> Professor C. A. R. Hoare
> The 1980 Turing award lecture
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
> email-address

From roscoml at gmail.com  Thu Oct 13 16:38:12 2011
From: roscoml at gmail.com (Ross Bamford)
Date: Fri, 14 Oct 2011 00:38:12 +0100
Subject: [antlr-interest] Can anyone help with a basic grammar problem in
	Antlr 3?
Message-ID: <CAMtjaCB76au0uNCvbVKd4YYX_m70Oz3SFUtdK7J1sRrpKJoSug@mail.gmail.com>

Hi Guys,

I'm a bit of an Antlr newbie - I've successfully created and used Antlr 2
grammars in the past but mostly by trial and error, and occasionally random
hacking until it "worked"... I've recently become involved in a project that
requires a very simple scripting language, and have decided to use Antlr 3
for this, but I'm getting stuck quite early on - I think I have a
fundamental problem in my grammar but after much hacking at it and trying
various ideas I got from Google, I'm still hitting a bit of a brick wall.

Basically I'm at the point where I have mathematical expressions and various
literal types implemented, and am adding in function and method call
handling - I want to be able to call methods with or without and explicit
receiver, and in my language parenthesis are optional (I know that
complicates matters a bit but it's what I need for this project). I've
written the grammar so far against a set of functional tests, and all is
well with most of my syntax. Here is my grammar:

/* ********* GRAMMAR *********** */
grammar BasicLang;

options {
    output=AST;
    ASTLabelType=CommonTree;
    backtrack=true;
    memoize=true;
}

tokens {
  ASSIGN;
  METHOD_CALL;
  SELF;
}

@parser::members {
  /* throw exceptions rather than silently failing... */
protected void mismatch(IntStream input, int ttype, BitSet follow)
  throws RecognitionException
{
  throw new MismatchedTokenException(ttype, input);
}
 public Object recoverFromMismatchedSet(IntStream input,
RecognitionException e, BitSet follow)
  throws RecognitionException
{
  throw e;
}
}

@rulecatch {
// throw exceptions rather than silently failing...
catch (RecognitionException e) {
  throw e;
}
}

start_rule
  :   script
  ;

script
  :   statement*
  ;

statement
  :   expr terminator!
  ;

expr
  :   math_expr
  |   assign_expr
  |   meth_call_expr
  ;

meth_call_expr
  :   (IDENTIFIER DOT)? func_call_expr -> ^(METHOD_CALL IDENTIFIER?
func_call_expr)
  |   (STRING_LITERAL DOT)? func_call_expr -> ^(METHOD_CALL STRING_LITERAL?
func_call_expr)
  ;

fragment
func_call_expr
  :   IDENTIFIER^ argument_list
  ;

fragment
argument_list
  :   LPAREN!? (expr (COMMA! expr)*)? RPAREN!?
  ;

assign_expr
  :   IDENTIFIER ASSIGN expr -> ^(ASSIGN IDENTIFIER expr)
  ;

math_expr
  :   mult_expr ((ADD^|SUB^) mult_expr)*
  ;

mult_expr
  :   pow_expr ((MUL^|DIV^|MOD^) pow_expr)*
  ;

pow_expr
  :   unary_expr ((POW^) unary_expr)*
  ;

unary_expr
  :   NOT? atom
  ;

atom
  :     literal
  |     LPAREN! expr RPAREN!
  ;

literal
  :     HEX_LITERAL
  |     DECIMAL_LITERAL
  |     OCTAL_LITERAL
  |     FLOATING_POINT_LITERAL
//  |     REGEXP_LITERAL
  |     STRING_LITERAL
  ;

terminator
  :     TERMINATOR
  |     EOF
  ;

POW :   '^' ;
MOD :   '%' ;
ADD :   '+' ;
SUB :   '-' ;
DIV :   '/' ;
MUL :   '*' ;
NOT :   '!' ;

ASSIGN
    :   '='
    ;

LPAREN
    :   '('
    ;

RPAREN
    :   ')'
    ;

COMMA
    :   ','
    ;

DOT :   '.' ;

CHARACTER_LITERAL
    :   '\'' ( EscapeSequence | ~('\''|'\\') ) '\''
    ;

STRING_LITERAL
    :  '"' ( EscapeSequence | ~('\\'|'"') )* '"'
    ;

/*
REGEXP_LITERAL
    :  '/' ( EscapeSequence | ~('\\'|'"') )* '/'
    ;
*/

HEX_LITERAL : '0' ('x'|'X') HexDigit+ IntegerTypeSuffix? ;

DECIMAL_LITERAL : ('0' | '1'..'9' '0'..'9'*) IntegerTypeSuffix? ;

OCTAL_LITERAL : '0' ('0'..'7')+ IntegerTypeSuffix? ;

fragment
HexDigit : ('0'..'9'|'a'..'f'|'A'..'F') ;

fragment
IntegerTypeSuffix
  : ('l'|'L')
  | ('u'|'U')  ('l'|'L')?
  ;

FLOATING_POINT_LITERAL
    :   ('0'..'9')+ '.' ('0'..'9')* Exponent? FloatTypeSuffix?
    |   '.' ('0'..'9')+ Exponent? FloatTypeSuffix?
    |   ('0'..'9')+ Exponent? FloatTypeSuffix?
  ;

fragment
Exponent : ('e'|'E') ('+'|'-')? ('0'..'9')+ ;

fragment
FloatTypeSuffix : ('f'|'F'|'d'|'D') ;

fragment
EscapeSequence
    :   '\\' ('b'|'t'|'n'|'f'|'r'|'\"'|'\''|'\\'|'/')
    |   OctalEscape
    ;

fragment
OctalEscape
    :   '\\' ('0'..'3') ('0'..'7') ('0'..'7')
    |   '\\' ('0'..'7') ('0'..'7')
    |   '\\' ('0'..'7')
    ;

fragment
UnicodeEscape
    :   '\\' 'u' HexDigit HexDigit HexDigit HexDigit
    ;
COMMENT
    :   '/*' ( options {greedy=false;} : . )* '*/' {$channel=HIDDEN;}
    ;

LINE_COMMENT
    : '//' ~('\n'|'\r')* '\r'? '\n' {$channel=HIDDEN;}
    ;

IDENTIFIER
  : ID_LETTER (ID_LETTER|'0'..'9')*
  ;

fragment
ID_LETTER
  : '$'
  | 'A'..'Z'
  | 'a'..'z'
  | '_'
  ;

TERMINATOR
  : '\r'? '\n'
  | ';'
  ;

WS  :  (' '|'\r'|'\t'|'\u000C') {$channel=HIDDEN;}
    |  '...' '\r'? '\n'  {$channel=HIDDEN;}
    ;

/* *************** END *************** */

With this grammar, my tests so far pass, and I'm building trees for simple
arithmetic operations and the like, including involving variables (e.g. a+1
and the like), and method calls are working as I expect, including when
passing method call results as args to another method call. But I cannot get
input such as "a=b+(c=1)" to parse at all - Debugging in AntlrWorks shows me
that the problem occurs when the parse sees the "b+", when it throws a
NoViableAlt exception.

I guessed this was because the parser doesn't see the identifier as an atom,
so tries to parse it with the + symbol. So, I tried adding IDENTIFIER as an
alternative to the atom rule - but that just broke the parser completely and
many of my tests failed with an exception - MismatchedSetException.

I've been playing with this for a few days now but no matter what I do, even
when I get the type of syntax I mentioned above (the assign statement)
working, I invariably break something (or more often, everything! :( ) else.
I'm really hoping someone out there will take pity on me and give me some
insight into what I'm doing wrong.

Thanks in advance!
-- 
Ross Bamford - roscoml at gmail.com

From michael.bedward at gmail.com  Thu Oct 13 17:04:13 2011
From: michael.bedward at gmail.com (Michael Bedward)
Date: Fri, 14 Oct 2011 11:04:13 +1100
Subject: [antlr-interest] Can anyone help with a basic grammar problem
 in Antlr 3?
In-Reply-To: <CAMtjaCB76au0uNCvbVKd4YYX_m70Oz3SFUtdK7J1sRrpKJoSug@mail.gmail.com>
References: <CAMtjaCB76au0uNCvbVKd4YYX_m70Oz3SFUtdK7J1sRrpKJoSug@mail.gmail.com>
Message-ID: <CACJVtdMkOsSq4RWm=Bte_CCE4icCu=--2htVOHrqX1GSR3z9Jw@mail.gmail.com>

Hi Ross,

For a bit of a newbie that's a nice grammar - much neater than any of mine :)

If you rearrange your expr rule so that the assign_expr is the first
alternative...

expr
 :   assign_expr
 |   math_expr
 |   meth_call_expr
 ;

...I think that the grammar should be able to parse things like a = 1 + (b = 2)

Michael


On 14 October 2011 10:38, Ross Bamford <roscoml at gmail.com> wrote:
> Hi Guys,
>
> I'm a bit of an Antlr newbie - I've successfully created and used Antlr 2
> grammars in the past but mostly by trial and error, and occasionally random
> hacking until it "worked"... I've recently become involved in a project that
> requires a very simple scripting language, and have decided to use Antlr 3
> for this, but I'm getting stuck quite early on - I think I have a
> fundamental problem in my grammar but after much hacking at it and trying
> various ideas I got from Google, I'm still hitting a bit of a brick wall.
>
> Basically I'm at the point where I have mathematical expressions and various
> literal types implemented, and am adding in function and method call
> handling - I want to be able to call methods with or without and explicit
> receiver, and in my language parenthesis are optional (I know that
> complicates matters a bit but it's what I need for this project). I've
> written the grammar so far against a set of functional tests, and all is
> well with most of my syntax. Here is my grammar:
>
> /* ********* GRAMMAR *********** */
> grammar BasicLang;
>
> options {
> ? ?output=AST;
> ? ?ASTLabelType=CommonTree;
> ? ?backtrack=true;
> ? ?memoize=true;
> }
>
> tokens {
> ?ASSIGN;
> ?METHOD_CALL;
> ?SELF;
> }
>
> @parser::members {
> ?/* throw exceptions rather than silently failing... */
> protected void mismatch(IntStream input, int ttype, BitSet follow)
> ?throws RecognitionException
> {
> ?throw new MismatchedTokenException(ttype, input);
> }
> ?public Object recoverFromMismatchedSet(IntStream input,
> RecognitionException e, BitSet follow)
> ?throws RecognitionException
> {
> ?throw e;
> }
> }
>
> @rulecatch {
> // throw exceptions rather than silently failing...
> catch (RecognitionException e) {
> ?throw e;
> }
> }
>
> start_rule
> ?: ? script
> ?;
>
> script
> ?: ? statement*
> ?;
>
> statement
> ?: ? expr terminator!
> ?;
>
> expr
> ?: ? math_expr
> ?| ? assign_expr
> ?| ? meth_call_expr
> ?;
>
> meth_call_expr
> ?: ? (IDENTIFIER DOT)? func_call_expr -> ^(METHOD_CALL IDENTIFIER?
> func_call_expr)
> ?| ? (STRING_LITERAL DOT)? func_call_expr -> ^(METHOD_CALL STRING_LITERAL?
> func_call_expr)
> ?;
>
> fragment
> func_call_expr
> ?: ? IDENTIFIER^ argument_list
> ?;
>
> fragment
> argument_list
> ?: ? LPAREN!? (expr (COMMA! expr)*)? RPAREN!?
> ?;
>
> assign_expr
> ?: ? IDENTIFIER ASSIGN expr -> ^(ASSIGN IDENTIFIER expr)
> ?;
>
> math_expr
> ?: ? mult_expr ((ADD^|SUB^) mult_expr)*
> ?;
>
> mult_expr
> ?: ? pow_expr ((MUL^|DIV^|MOD^) pow_expr)*
> ?;
>
> pow_expr
> ?: ? unary_expr ((POW^) unary_expr)*
> ?;
>
> unary_expr
> ?: ? NOT? atom
> ?;
>
> atom
> ?: ? ? literal
> ?| ? ? LPAREN! expr RPAREN!
> ?;
>
> literal
> ?: ? ? HEX_LITERAL
> ?| ? ? DECIMAL_LITERAL
> ?| ? ? OCTAL_LITERAL
> ?| ? ? FLOATING_POINT_LITERAL
> // ?| ? ? REGEXP_LITERAL
> ?| ? ? STRING_LITERAL
> ?;
>
> terminator
> ?: ? ? TERMINATOR
> ?| ? ? EOF
> ?;
>
> POW : ? '^' ;
> MOD : ? '%' ;
> ADD : ? '+' ;
> SUB : ? '-' ;
> DIV : ? '/' ;
> MUL : ? '*' ;
> NOT : ? '!' ;
>
> ASSIGN
> ? ?: ? '='
> ? ?;
>
> LPAREN
> ? ?: ? '('
> ? ?;
>
> RPAREN
> ? ?: ? ')'
> ? ?;
>
> COMMA
> ? ?: ? ','
> ? ?;
>
> DOT : ? '.' ;
>
> CHARACTER_LITERAL
> ? ?: ? '\'' ( EscapeSequence | ~('\''|'\\') ) '\''
> ? ?;
>
> STRING_LITERAL
> ? ?: ?'"' ( EscapeSequence | ~('\\'|'"') )* '"'
> ? ?;
>
> /*
> REGEXP_LITERAL
> ? ?: ?'/' ( EscapeSequence | ~('\\'|'"') )* '/'
> ? ?;
> */
>
> HEX_LITERAL : '0' ('x'|'X') HexDigit+ IntegerTypeSuffix? ;
>
> DECIMAL_LITERAL : ('0' | '1'..'9' '0'..'9'*) IntegerTypeSuffix? ;
>
> OCTAL_LITERAL : '0' ('0'..'7')+ IntegerTypeSuffix? ;
>
> fragment
> HexDigit : ('0'..'9'|'a'..'f'|'A'..'F') ;
>
> fragment
> IntegerTypeSuffix
> ?: ('l'|'L')
> ?| ('u'|'U') ?('l'|'L')?
> ?;
>
> FLOATING_POINT_LITERAL
> ? ?: ? ('0'..'9')+ '.' ('0'..'9')* Exponent? FloatTypeSuffix?
> ? ?| ? '.' ('0'..'9')+ Exponent? FloatTypeSuffix?
> ? ?| ? ('0'..'9')+ Exponent? FloatTypeSuffix?
> ?;
>
> fragment
> Exponent : ('e'|'E') ('+'|'-')? ('0'..'9')+ ;
>
> fragment
> FloatTypeSuffix : ('f'|'F'|'d'|'D') ;
>
> fragment
> EscapeSequence
> ? ?: ? '\\' ('b'|'t'|'n'|'f'|'r'|'\"'|'\''|'\\'|'/')
> ? ?| ? OctalEscape
> ? ?;
>
> fragment
> OctalEscape
> ? ?: ? '\\' ('0'..'3') ('0'..'7') ('0'..'7')
> ? ?| ? '\\' ('0'..'7') ('0'..'7')
> ? ?| ? '\\' ('0'..'7')
> ? ?;
>
> fragment
> UnicodeEscape
> ? ?: ? '\\' 'u' HexDigit HexDigit HexDigit HexDigit
> ? ?;
> COMMENT
> ? ?: ? '/*' ( options {greedy=false;} : . )* '*/' {$channel=HIDDEN;}
> ? ?;
>
> LINE_COMMENT
> ? ?: '//' ~('\n'|'\r')* '\r'? '\n' {$channel=HIDDEN;}
> ? ?;
>
> IDENTIFIER
> ?: ID_LETTER (ID_LETTER|'0'..'9')*
> ?;
>
> fragment
> ID_LETTER
> ?: '$'
> ?| 'A'..'Z'
> ?| 'a'..'z'
> ?| '_'
> ?;
>
> TERMINATOR
> ?: '\r'? '\n'
> ?| ';'
> ?;
>
> WS ?: ?(' '|'\r'|'\t'|'\u000C') {$channel=HIDDEN;}
> ? ?| ?'...' '\r'? '\n' ?{$channel=HIDDEN;}
> ? ?;
>
> /* *************** END *************** */
>
> With this grammar, my tests so far pass, and I'm building trees for simple
> arithmetic operations and the like, including involving variables (e.g. a+1
> and the like), and method calls are working as I expect, including when
> passing method call results as args to another method call. But I cannot get
> input such as "a=b+(c=1)" to parse at all - Debugging in AntlrWorks shows me
> that the problem occurs when the parse sees the "b+", when it throws a
> NoViableAlt exception.
>
> I guessed this was because the parser doesn't see the identifier as an atom,
> so tries to parse it with the + symbol. So, I tried adding IDENTIFIER as an
> alternative to the atom rule - but that just broke the parser completely and
> many of my tests failed with an exception - MismatchedSetException.
>
> I've been playing with this for a few days now but no matter what I do, even
> when I get the type of syntax I mentioned above (the assign statement)
> working, I invariably break something (or more often, everything! :( ) else.
> I'm really hoping someone out there will take pity on me and give me some
> insight into what I'm doing wrong.
>
> Thanks in advance!
> --
> Ross Bamford - roscoml at gmail.com
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>

From roscoml at gmail.com  Thu Oct 13 17:42:40 2011
From: roscoml at gmail.com (Ross Bamford)
Date: Fri, 14 Oct 2011 01:42:40 +0100
Subject: [antlr-interest] Can anyone help with a basic grammar problem
 in Antlr 3?
In-Reply-To: <CACJVtdMkOsSq4RWm=Bte_CCE4icCu=--2htVOHrqX1GSR3z9Jw@mail.gmail.com>
References: <CAMtjaCB76au0uNCvbVKd4YYX_m70Oz3SFUtdK7J1sRrpKJoSug@mail.gmail.com>
	<CACJVtdMkOsSq4RWm=Bte_CCE4icCu=--2htVOHrqX1GSR3z9Jw@mail.gmail.com>
Message-ID: <CAMtjaCB5AkNOCvQQoVfHaNhxx5eUmbSAjTMGm8tYC+k4W8+VdQ@mail.gmail.com>

Hi Michael,

Thanks for the response! And thanks for being kind about my basic grammar
:)

I tried reordering the alternatives in expr as you suggested, and am a bit
closer now than I was before! It's definitely parsing a = 1 + (b = 2) fine,
but I'm still seeing NoViableAltExceptions with, for example "a=b+(c=2)".
Looking at the debugger step by step it seems to still be trying to grab
"b+" as a token, rather than seeing the "b" then the "+", which is why I
tried adding IDENTIFIER to the "atom" rule previously. I tried adding it
again after making the change you suggested but it still caused a lot of
problems in other places.

Thanks,
Ross


On Fri, Oct 14, 2011 at 1:04 AM, Michael Bedward
<michael.bedward at gmail.com>wrote:

> Hi Ross,
>
> For a bit of a newbie that's a nice grammar - much neater than any of mine
> :)
>
> If you rearrange your expr rule so that the assign_expr is the first
> alternative...
>
> expr
>  :   assign_expr
>  |   math_expr
>  |   meth_call_expr
>  ;
>
> ...I think that the grammar should be able to parse things like a = 1 + (b
> = 2)
>
> Michael
>
>
> On 14 October 2011 10:38, Ross Bamford <roscoml at gmail.com> wrote:
> > Hi Guys,
> >
> > I'm a bit of an Antlr newbie - I've successfully created and used Antlr 2
> > grammars in the past but mostly by trial and error, and occasionally
> random
> > hacking until it "worked"... I've recently become involved in a project
> that
> > requires a very simple scripting language, and have decided to use Antlr
> 3
> > for this, but I'm getting stuck quite early on - I think I have a
> > fundamental problem in my grammar but after much hacking at it and trying
> > various ideas I got from Google, I'm still hitting a bit of a brick wall.
> >
> > Basically I'm at the point where I have mathematical expressions and
> various
> > literal types implemented, and am adding in function and method call
> > handling - I want to be able to call methods with or without and explicit
> > receiver, and in my language parenthesis are optional (I know that
> > complicates matters a bit but it's what I need for this project). I've
> > written the grammar so far against a set of functional tests, and all is
> > well with most of my syntax. Here is my grammar:
> >
> > /* ********* GRAMMAR *********** */
> > grammar BasicLang;
> >
> > options {
> >    output=AST;
> >    ASTLabelType=CommonTree;
> >    backtrack=true;
> >    memoize=true;
> > }
> >
> > tokens {
> >  ASSIGN;
> >  METHOD_CALL;
> >  SELF;
> > }
> >
> > @parser::members {
> >  /* throw exceptions rather than silently failing... */
> > protected void mismatch(IntStream input, int ttype, BitSet follow)
> >  throws RecognitionException
> > {
> >  throw new MismatchedTokenException(ttype, input);
> > }
> >  public Object recoverFromMismatchedSet(IntStream input,
> > RecognitionException e, BitSet follow)
> >  throws RecognitionException
> > {
> >  throw e;
> > }
> > }
> >
> > @rulecatch {
> > // throw exceptions rather than silently failing...
> > catch (RecognitionException e) {
> >  throw e;
> > }
> > }
> >
> > start_rule
> >  :   script
> >  ;
> >
> > script
> >  :   statement*
> >  ;
> >
> > statement
> >  :   expr terminator!
> >  ;
> >
> > expr
> >  :   math_expr
> >  |   assign_expr
> >  |   meth_call_expr
> >  ;
> >
> > meth_call_expr
> >  :   (IDENTIFIER DOT)? func_call_expr -> ^(METHOD_CALL IDENTIFIER?
> > func_call_expr)
> >  |   (STRING_LITERAL DOT)? func_call_expr -> ^(METHOD_CALL
> STRING_LITERAL?
> > func_call_expr)
> >  ;
> >
> > fragment
> > func_call_expr
> >  :   IDENTIFIER^ argument_list
> >  ;
> >
> > fragment
> > argument_list
> >  :   LPAREN!? (expr (COMMA! expr)*)? RPAREN!?
> >  ;
> >
> > assign_expr
> >  :   IDENTIFIER ASSIGN expr -> ^(ASSIGN IDENTIFIER expr)
> >  ;
> >
> > math_expr
> >  :   mult_expr ((ADD^|SUB^) mult_expr)*
> >  ;
> >
> > mult_expr
> >  :   pow_expr ((MUL^|DIV^|MOD^) pow_expr)*
> >  ;
> >
> > pow_expr
> >  :   unary_expr ((POW^) unary_expr)*
> >  ;
> >
> > unary_expr
> >  :   NOT? atom
> >  ;
> >
> > atom
> >  :     literal
> >  |     LPAREN! expr RPAREN!
> >  ;
> >
> > literal
> >  :     HEX_LITERAL
> >  |     DECIMAL_LITERAL
> >  |     OCTAL_LITERAL
> >  |     FLOATING_POINT_LITERAL
> > //  |     REGEXP_LITERAL
> >  |     STRING_LITERAL
> >  ;
> >
> > terminator
> >  :     TERMINATOR
> >  |     EOF
> >  ;
> >
> > POW :   '^' ;
> > MOD :   '%' ;
> > ADD :   '+' ;
> > SUB :   '-' ;
> > DIV :   '/' ;
> > MUL :   '*' ;
> > NOT :   '!' ;
> >
> > ASSIGN
> >    :   '='
> >    ;
> >
> > LPAREN
> >    :   '('
> >    ;
> >
> > RPAREN
> >    :   ')'
> >    ;
> >
> > COMMA
> >    :   ','
> >    ;
> >
> > DOT :   '.' ;
> >
> > CHARACTER_LITERAL
> >    :   '\'' ( EscapeSequence | ~('\''|'\\') ) '\''
> >    ;
> >
> > STRING_LITERAL
> >    :  '"' ( EscapeSequence | ~('\\'|'"') )* '"'
> >    ;
> >
> > /*
> > REGEXP_LITERAL
> >    :  '/' ( EscapeSequence | ~('\\'|'"') )* '/'
> >    ;
> > */
> >
> > HEX_LITERAL : '0' ('x'|'X') HexDigit+ IntegerTypeSuffix? ;
> >
> > DECIMAL_LITERAL : ('0' | '1'..'9' '0'..'9'*) IntegerTypeSuffix? ;
> >
> > OCTAL_LITERAL : '0' ('0'..'7')+ IntegerTypeSuffix? ;
> >
> > fragment
> > HexDigit : ('0'..'9'|'a'..'f'|'A'..'F') ;
> >
> > fragment
> > IntegerTypeSuffix
> >  : ('l'|'L')
> >  | ('u'|'U')  ('l'|'L')?
> >  ;
> >
> > FLOATING_POINT_LITERAL
> >    :   ('0'..'9')+ '.' ('0'..'9')* Exponent? FloatTypeSuffix?
> >    |   '.' ('0'..'9')+ Exponent? FloatTypeSuffix?
> >    |   ('0'..'9')+ Exponent? FloatTypeSuffix?
> >  ;
> >
> > fragment
> > Exponent : ('e'|'E') ('+'|'-')? ('0'..'9')+ ;
> >
> > fragment
> > FloatTypeSuffix : ('f'|'F'|'d'|'D') ;
> >
> > fragment
> > EscapeSequence
> >    :   '\\' ('b'|'t'|'n'|'f'|'r'|'\"'|'\''|'\\'|'/')
> >    |   OctalEscape
> >    ;
> >
> > fragment
> > OctalEscape
> >    :   '\\' ('0'..'3') ('0'..'7') ('0'..'7')
> >    |   '\\' ('0'..'7') ('0'..'7')
> >    |   '\\' ('0'..'7')
> >    ;
> >
> > fragment
> > UnicodeEscape
> >    :   '\\' 'u' HexDigit HexDigit HexDigit HexDigit
> >    ;
> > COMMENT
> >    :   '/*' ( options {greedy=false;} : . )* '*/' {$channel=HIDDEN;}
> >    ;
> >
> > LINE_COMMENT
> >    : '//' ~('\n'|'\r')* '\r'? '\n' {$channel=HIDDEN;}
> >    ;
> >
> > IDENTIFIER
> >  : ID_LETTER (ID_LETTER|'0'..'9')*
> >  ;
> >
> > fragment
> > ID_LETTER
> >  : '$'
> >  | 'A'..'Z'
> >  | 'a'..'z'
> >  | '_'
> >  ;
> >
> > TERMINATOR
> >  : '\r'? '\n'
> >  | ';'
> >  ;
> >
> > WS  :  (' '|'\r'|'\t'|'\u000C') {$channel=HIDDEN;}
> >    |  '...' '\r'? '\n'  {$channel=HIDDEN;}
> >    ;
> >
> > /* *************** END *************** */
> >
> > With this grammar, my tests so far pass, and I'm building trees for
> simple
> > arithmetic operations and the like, including involving variables (e.g.
> a+1
> > and the like), and method calls are working as I expect, including when
> > passing method call results as args to another method call. But I cannot
> get
> > input such as "a=b+(c=1)" to parse at all - Debugging in AntlrWorks shows
> me
> > that the problem occurs when the parse sees the "b+", when it throws a
> > NoViableAlt exception.
> >
> > I guessed this was because the parser doesn't see the identifier as an
> atom,
> > so tries to parse it with the + symbol. So, I tried adding IDENTIFIER as
> an
> > alternative to the atom rule - but that just broke the parser completely
> and
> > many of my tests failed with an exception - MismatchedSetException.
> >
> > I've been playing with this for a few days now but no matter what I do,
> even
> > when I get the type of syntax I mentioned above (the assign statement)
> > working, I invariably break something (or more often, everything! :( )
> else.
> > I'm really hoping someone out there will take pity on me and give me some
> > insight into what I'm doing wrong.
> >
> > Thanks in advance!
> > --
> > Ross Bamford - roscoml at gmail.com
> >
> > List: http://www.antlr.org/mailman/listinfo/antlr-interest
> > Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
> >
>

From michael.bedward at gmail.com  Thu Oct 13 18:12:00 2011
From: michael.bedward at gmail.com (Michael Bedward)
Date: Fri, 14 Oct 2011 12:12:00 +1100
Subject: [antlr-interest] Can anyone help with a basic grammar problem
 in Antlr 3?
In-Reply-To: <CAMtjaCB5AkNOCvQQoVfHaNhxx5eUmbSAjTMGm8tYC+k4W8+VdQ@mail.gmail.com>
References: <CAMtjaCB76au0uNCvbVKd4YYX_m70Oz3SFUtdK7J1sRrpKJoSug@mail.gmail.com>
	<CACJVtdMkOsSq4RWm=Bte_CCE4icCu=--2htVOHrqX1GSR3z9Jw@mail.gmail.com>
	<CAMtjaCB5AkNOCvQQoVfHaNhxx5eUmbSAjTMGm8tYC+k4W8+VdQ@mail.gmail.com>
Message-ID: <CACJVtdMNwtDOsXVmqYhEKzRgNOPp+WC_Ai-HTs=Gp0W530i_Tw@mail.gmail.com>

Ah yes, it's getting stuck on the "b" because you haven't told it that
identifiers are atoms...

atom
 :     literal
 |     IDENTIFIER
 |     LPAREN! expr RPAREN!
 ;

Michael


On 14 October 2011 11:42, Ross Bamford <roscoml at gmail.com> wrote:
> Hi Michael,
> Thanks for the response! And thanks for being kind about my basic grammar
> :)
> I tried reordering the alternatives in expr as you suggested, and am a bit
> closer now than I was before! It's definitely parsing?a = 1 + (b = 2) fine,
> but I'm still seeing NoViableAltExceptions with, for example "a=b+(c=2)".
> Looking at the debugger step by step it seems to still be trying to grab
> "b+" as a token, rather than seeing the "b" then the "+", which is why I
> tried adding IDENTIFIER to the "atom" rule previously. I tried adding it
> again after making the change you suggested but it still caused a lot of
> problems in other places.
> Thanks,
> Ross
>
> On Fri, Oct 14, 2011 at 1:04 AM, Michael Bedward <michael.bedward at gmail.com>
> wrote:
>>
>> Hi Ross,
>>
>> For a bit of a newbie that's a nice grammar - much neater than any of mine
>> :)
>>
>> If you rearrange your expr rule so that the assign_expr is the first
>> alternative...
>>
>> expr
>> ?: ? assign_expr
>> ?| ? math_expr
>> ?| ? meth_call_expr
>> ?;
>>
>> ...I think that the grammar should be able to parse things like a = 1 + (b
>> = 2)
>>
>> Michael
>>
>>
>> On 14 October 2011 10:38, Ross Bamford <roscoml at gmail.com> wrote:
>> > Hi Guys,
>> >
>> > I'm a bit of an Antlr newbie - I've successfully created and used Antlr
>> > 2
>> > grammars in the past but mostly by trial and error, and occasionally
>> > random
>> > hacking until it "worked"... I've recently become involved in a project
>> > that
>> > requires a very simple scripting language, and have decided to use Antlr
>> > 3
>> > for this, but I'm getting stuck quite early on - I think I have a
>> > fundamental problem in my grammar but after much hacking at it and
>> > trying
>> > various ideas I got from Google, I'm still hitting a bit of a brick
>> > wall.
>> >
>> > Basically I'm at the point where I have mathematical expressions and
>> > various
>> > literal types implemented, and am adding in function and method call
>> > handling - I want to be able to call methods with or without and
>> > explicit
>> > receiver, and in my language parenthesis are optional (I know that
>> > complicates matters a bit but it's what I need for this project). I've
>> > written the grammar so far against a set of functional tests, and all is
>> > well with most of my syntax. Here is my grammar:
>> >
>> > /* ********* GRAMMAR *********** */
>> > grammar BasicLang;
>> >
>> > options {
>> > ? ?output=AST;
>> > ? ?ASTLabelType=CommonTree;
>> > ? ?backtrack=true;
>> > ? ?memoize=true;
>> > }
>> >
>> > tokens {
>> > ?ASSIGN;
>> > ?METHOD_CALL;
>> > ?SELF;
>> > }
>> >
>> > @parser::members {
>> > ?/* throw exceptions rather than silently failing... */
>> > protected void mismatch(IntStream input, int ttype, BitSet follow)
>> > ?throws RecognitionException
>> > {
>> > ?throw new MismatchedTokenException(ttype, input);
>> > }
>> > ?public Object recoverFromMismatchedSet(IntStream input,
>> > RecognitionException e, BitSet follow)
>> > ?throws RecognitionException
>> > {
>> > ?throw e;
>> > }
>> > }
>> >
>> > @rulecatch {
>> > // throw exceptions rather than silently failing...
>> > catch (RecognitionException e) {
>> > ?throw e;
>> > }
>> > }
>> >
>> > start_rule
>> > ?: ? script
>> > ?;
>> >
>> > script
>> > ?: ? statement*
>> > ?;
>> >
>> > statement
>> > ?: ? expr terminator!
>> > ?;
>> >
>> > expr
>> > ?: ? math_expr
>> > ?| ? assign_expr
>> > ?| ? meth_call_expr
>> > ?;
>> >
>> > meth_call_expr
>> > ?: ? (IDENTIFIER DOT)? func_call_expr -> ^(METHOD_CALL IDENTIFIER?
>> > func_call_expr)
>> > ?| ? (STRING_LITERAL DOT)? func_call_expr -> ^(METHOD_CALL
>> > STRING_LITERAL?
>> > func_call_expr)
>> > ?;
>> >
>> > fragment
>> > func_call_expr
>> > ?: ? IDENTIFIER^ argument_list
>> > ?;
>> >
>> > fragment
>> > argument_list
>> > ?: ? LPAREN!? (expr (COMMA! expr)*)? RPAREN!?
>> > ?;
>> >
>> > assign_expr
>> > ?: ? IDENTIFIER ASSIGN expr -> ^(ASSIGN IDENTIFIER expr)
>> > ?;
>> >
>> > math_expr
>> > ?: ? mult_expr ((ADD^|SUB^) mult_expr)*
>> > ?;
>> >
>> > mult_expr
>> > ?: ? pow_expr ((MUL^|DIV^|MOD^) pow_expr)*
>> > ?;
>> >
>> > pow_expr
>> > ?: ? unary_expr ((POW^) unary_expr)*
>> > ?;
>> >
>> > unary_expr
>> > ?: ? NOT? atom
>> > ?;
>> >
>> > atom
>> > ?: ? ? literal
>> > ?| ? ? LPAREN! expr RPAREN!
>> > ?;
>> >
>> > literal
>> > ?: ? ? HEX_LITERAL
>> > ?| ? ? DECIMAL_LITERAL
>> > ?| ? ? OCTAL_LITERAL
>> > ?| ? ? FLOATING_POINT_LITERAL
>> > // ?| ? ? REGEXP_LITERAL
>> > ?| ? ? STRING_LITERAL
>> > ?;
>> >
>> > terminator
>> > ?: ? ? TERMINATOR
>> > ?| ? ? EOF
>> > ?;
>> >
>> > POW : ? '^' ;
>> > MOD : ? '%' ;
>> > ADD : ? '+' ;
>> > SUB : ? '-' ;
>> > DIV : ? '/' ;
>> > MUL : ? '*' ;
>> > NOT : ? '!' ;
>> >
>> > ASSIGN
>> > ? ?: ? '='
>> > ? ?;
>> >
>> > LPAREN
>> > ? ?: ? '('
>> > ? ?;
>> >
>> > RPAREN
>> > ? ?: ? ')'
>> > ? ?;
>> >
>> > COMMA
>> > ? ?: ? ','
>> > ? ?;
>> >
>> > DOT : ? '.' ;
>> >
>> > CHARACTER_LITERAL
>> > ? ?: ? '\'' ( EscapeSequence | ~('\''|'\\') ) '\''
>> > ? ?;
>> >
>> > STRING_LITERAL
>> > ? ?: ?'"' ( EscapeSequence | ~('\\'|'"') )* '"'
>> > ? ?;
>> >
>> > /*
>> > REGEXP_LITERAL
>> > ? ?: ?'/' ( EscapeSequence | ~('\\'|'"') )* '/'
>> > ? ?;
>> > */
>> >
>> > HEX_LITERAL : '0' ('x'|'X') HexDigit+ IntegerTypeSuffix? ;
>> >
>> > DECIMAL_LITERAL : ('0' | '1'..'9' '0'..'9'*) IntegerTypeSuffix? ;
>> >
>> > OCTAL_LITERAL : '0' ('0'..'7')+ IntegerTypeSuffix? ;
>> >
>> > fragment
>> > HexDigit : ('0'..'9'|'a'..'f'|'A'..'F') ;
>> >
>> > fragment
>> > IntegerTypeSuffix
>> > ?: ('l'|'L')
>> > ?| ('u'|'U') ?('l'|'L')?
>> > ?;
>> >
>> > FLOATING_POINT_LITERAL
>> > ? ?: ? ('0'..'9')+ '.' ('0'..'9')* Exponent? FloatTypeSuffix?
>> > ? ?| ? '.' ('0'..'9')+ Exponent? FloatTypeSuffix?
>> > ? ?| ? ('0'..'9')+ Exponent? FloatTypeSuffix?
>> > ?;
>> >
>> > fragment
>> > Exponent : ('e'|'E') ('+'|'-')? ('0'..'9')+ ;
>> >
>> > fragment
>> > FloatTypeSuffix : ('f'|'F'|'d'|'D') ;
>> >
>> > fragment
>> > EscapeSequence
>> > ? ?: ? '\\' ('b'|'t'|'n'|'f'|'r'|'\"'|'\''|'\\'|'/')
>> > ? ?| ? OctalEscape
>> > ? ?;
>> >
>> > fragment
>> > OctalEscape
>> > ? ?: ? '\\' ('0'..'3') ('0'..'7') ('0'..'7')
>> > ? ?| ? '\\' ('0'..'7') ('0'..'7')
>> > ? ?| ? '\\' ('0'..'7')
>> > ? ?;
>> >
>> > fragment
>> > UnicodeEscape
>> > ? ?: ? '\\' 'u' HexDigit HexDigit HexDigit HexDigit
>> > ? ?;
>> > COMMENT
>> > ? ?: ? '/*' ( options {greedy=false;} : . )* '*/' {$channel=HIDDEN;}
>> > ? ?;
>> >
>> > LINE_COMMENT
>> > ? ?: '//' ~('\n'|'\r')* '\r'? '\n' {$channel=HIDDEN;}
>> > ? ?;
>> >
>> > IDENTIFIER
>> > ?: ID_LETTER (ID_LETTER|'0'..'9')*
>> > ?;
>> >
>> > fragment
>> > ID_LETTER
>> > ?: '$'
>> > ?| 'A'..'Z'
>> > ?| 'a'..'z'
>> > ?| '_'
>> > ?;
>> >
>> > TERMINATOR
>> > ?: '\r'? '\n'
>> > ?| ';'
>> > ?;
>> >
>> > WS ?: ?(' '|'\r'|'\t'|'\u000C') {$channel=HIDDEN;}
>> > ? ?| ?'...' '\r'? '\n' ?{$channel=HIDDEN;}
>> > ? ?;
>> >
>> > /* *************** END *************** */
>> >
>> > With this grammar, my tests so far pass, and I'm building trees for
>> > simple
>> > arithmetic operations and the like, including involving variables (e.g.
>> > a+1
>> > and the like), and method calls are working as I expect, including when
>> > passing method call results as args to another method call. But I cannot
>> > get
>> > input such as "a=b+(c=1)" to parse at all - Debugging in AntlrWorks
>> > shows me
>> > that the problem occurs when the parse sees the "b+", when it throws a
>> > NoViableAlt exception.
>> >
>> > I guessed this was because the parser doesn't see the identifier as an
>> > atom,
>> > so tries to parse it with the + symbol. So, I tried adding IDENTIFIER as
>> > an
>> > alternative to the atom rule - but that just broke the parser completely
>> > and
>> > many of my tests failed with an exception - MismatchedSetException.
>> >
>> > I've been playing with this for a few days now but no matter what I do,
>> > even
>> > when I get the type of syntax I mentioned above (the assign statement)
>> > working, I invariably break something (or more often, everything! :( )
>> > else.
>> > I'm really hoping someone out there will take pity on me and give me
>> > some
>> > insight into what I'm doing wrong.
>> >
>> > Thanks in advance!
>> > --
>> > Ross Bamford - roscoml at gmail.com
>> >
>> > List: http://www.antlr.org/mailman/listinfo/antlr-interest
>> > Unsubscribe:
>> > http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>> >
>
>

From roscoml at gmail.com  Fri Oct 14 05:11:11 2011
From: roscoml at gmail.com (Ross Bamford)
Date: Fri, 14 Oct 2011 13:11:11 +0100
Subject: [antlr-interest] Can anyone help with a basic grammar problem
 in Antlr 3?
In-Reply-To: <CACJVtdMNwtDOsXVmqYhEKzRgNOPp+WC_Ai-HTs=Gp0W530i_Tw@mail.gmail.com>
References: <CAMtjaCB76au0uNCvbVKd4YYX_m70Oz3SFUtdK7J1sRrpKJoSug@mail.gmail.com>
	<CACJVtdMkOsSq4RWm=Bte_CCE4icCu=--2htVOHrqX1GSR3z9Jw@mail.gmail.com>
	<CAMtjaCB5AkNOCvQQoVfHaNhxx5eUmbSAjTMGm8tYC+k4W8+VdQ@mail.gmail.com>
	<CACJVtdMNwtDOsXVmqYhEKzRgNOPp+WC_Ai-HTs=Gp0W530i_Tw@mail.gmail.com>
Message-ID: <CAMtjaCC4sY7jKcJ75A3shPWHQOKoEdK=8Ci-PQ1kNmO_ZHW-kw@mail.gmail.com>

Hi Michael,

I've tried adding IDENTIFIER into the atom rule, and that solved the
assignment expression issues I was having, but unfortunately it broke the
method call parsing completely - the issue seemed to stem from the parser
not being able to differentiate between a function call, and a plain
identifier - cue many and varied MismatchedSetExceptions :(. After much
debugging with ANTLRWorks (what a great tool by the way!!) the only thing
I've found that fixes this is to make parens mandatory on a method call.
Having done that after making the other changes you suggested I've now got
my tests passing (except obviously the ones that call methods without
parens). I've also made some other changes based on another of your messages
I found in the archives, to make input such as "foo(1 2)" throw an exception
rather than just printing a warning and ignoring the "2" - so thanks again!
:)

I would still really like to have optional parens on method calls, which I
know is difficult... I have a little experience with parsing Ruby, for
example, and I know there's an ambiguous case such as:

a = foo

whereby do I treat foo as a var or a method? In other projects I've managed
to handle that at runtime by treating foo as a var only if an assignment
statement such as "foo = 1" has been seen before, and I seem to recall I
simply parsed all such cases as a bare IDENTIFIER to be resolved later, but
I have no idea how to make this work in my current Antlr parser.

Here is my grammar as it stands now:

/* ************* GRAMMAR **************** */
grammar BasicLang;

options {
    output=AST;
    ASTLabelType=CommonTree;
    backtrack=true;
    memoize=true;
}

tokens {
  ASSIGN;
  METHOD_CALL;
  SELF;
}

@parser::members {
  /* throw exceptions rather than silently failing... */
protected void mismatch(IntStream input, int ttype, BitSet follow)
  throws RecognitionException
{
  throw new MismatchedTokenException(ttype, input);
}

@Override
public Object recoverFromMismatchedSet(IntStream input, RecognitionException
e, BitSet follow)
  throws RecognitionException
{
  throw e;
}
 @Override
protected Object recoverFromMismatchedToken(IntStream input, int
ttype, BitSet follow) throws RecognitionException {
    if (ttype == RPAREN) {
        throw new UnwantedTokenException(); // ("Invalid input in argument
list");
    }
    return super.recoverFromMismatchedToken(input, ttype, follow);
}

}

@rulecatch {
// throw exceptions rather than silently failing...
catch (RecognitionException e) {
  throw e;
}
}

start_rule
  :   script
  ;

script
  :   statement+
  |   EOF!
  ;

statement
  :   expr terminator!
  ;

expr
  :   assign_expr
  |   math_expr
  |   meth_call_expr
  ;

meth_call_expr
  :   (IDENTIFIER DOT)? func_call_expr -> ^(METHOD_CALL IDENTIFIER?
func_call_expr)
  |   (STRING_LITERAL DOT)? func_call_expr -> ^(METHOD_CALL STRING_LITERAL?
func_call_expr)
  ;

fragment
func_call_expr
  :   IDENTIFIER^ argument_list
  ;

fragment
argument_list
  :   LPAREN! (expr (COMMA! expr)*)? RPAREN!
  ;

assign_expr
  :   IDENTIFIER ASSIGN expr -> ^(ASSIGN IDENTIFIER expr)
  ;

math_expr
  :   mult_expr ((ADD^|SUB^) mult_expr)*
  ;

mult_expr
  :   pow_expr ((MUL^|DIV^|MOD^) pow_expr)*
  ;

pow_expr
  :   unary_expr ((POW^) unary_expr)*
  ;

unary_expr
  :   NOT? atom
  ;

atom
  :     literal
  |     IDENTIFIER
  |     LPAREN! expr RPAREN!
  ;

literal
  :     HEX_LITERAL
  |     DECIMAL_LITERAL
  |     OCTAL_LITERAL
  |     FLOATING_POINT_LITERAL
//  |     REGEXP_LITERAL
  |     STRING_LITERAL
  ;

terminator
  :     TERMINATOR
  |     EOF
  ;

POW :   '^' ;
MOD :   '%' ;
ADD :   '+' ;
SUB :   '-' ;
DIV :   '/' ;
MUL :   '*' ;
NOT :   '!' ;

ASSIGN
    :   '='
    ;

LPAREN
    :   '('
    ;

RPAREN
    :   ')'
    ;

COMMA
    :   ','
    ;

DOT :   '.' ;

CHARACTER_LITERAL
    :   '\'' ( EscapeSequence | ~('\''|'\\') ) '\''
    ;

STRING_LITERAL
    :  '"' ( EscapeSequence | ~('\\'|'"') )* '"'
    ;

/*
REGEXP_LITERAL
    :  '/' ( EscapeSequence | ~('\\'|'"') )* '/'
    ;
*/

HEX_LITERAL : '0' ('x'|'X') HexDigit+ IntegerTypeSuffix? ;

DECIMAL_LITERAL : ('0' | '1'..'9' '0'..'9'*) IntegerTypeSuffix? ;

OCTAL_LITERAL : '0' ('0'..'7')+ IntegerTypeSuffix? ;

fragment
HexDigit : ('0'..'9'|'a'..'f'|'A'..'F') ;

fragment
IntegerTypeSuffix
  : ('l'|'L')
  | ('u'|'U')  ('l'|'L')?
  ;

FLOATING_POINT_LITERAL
    :   ('0'..'9')+ '.' ('0'..'9')* Exponent? FloatTypeSuffix?
    |   '.' ('0'..'9')+ Exponent? FloatTypeSuffix?
    |   ('0'..'9')+ Exponent? FloatTypeSuffix?
  ;

fragment
Exponent : ('e'|'E') ('+'|'-')? ('0'..'9')+ ;

fragment
FloatTypeSuffix : ('f'|'F'|'d'|'D') ;

fragment
EscapeSequence
    :   '\\' ('b'|'t'|'n'|'f'|'r'|'\"'|'\''|'\\'|'/')
    |   OctalEscape
    ;

fragment
OctalEscape
    :   '\\' ('0'..'3') ('0'..'7') ('0'..'7')
    |   '\\' ('0'..'7') ('0'..'7')
    |   '\\' ('0'..'7')
    ;

fragment
UnicodeEscape
    :   '\\' 'u' HexDigit HexDigit HexDigit HexDigit
    ;
COMMENT
    :   '/*' ( options {greedy=false;} : . )* '*/' {$channel=HIDDEN;}
    ;

LINE_COMMENT
    : '//' ~('\n'|'\r')* '\r'? '\n' {$channel=HIDDEN;}
    ;

IDENTIFIER
  : ID_LETTER (ID_LETTER|'0'..'9')*
  ;

fragment
ID_LETTER
  : '$'
  | 'A'..'Z'
  | 'a'..'z'
  | '_'
  ;

TERMINATOR
  : '\r'? '\n'
  | ';'
  ;

WS  :  (' '|'\r'|'\t'|'\u000C') {$channel=HIDDEN;}
    |  '...' '\r'? '\n'  {$channel=HIDDEN;}
    ;

/* ************* END ************************ */


On Fri, Oct 14, 2011 at 2:12 AM, Michael Bedward <michael.bedward at gmail.com>
 wrote:

> Ah yes, it's getting stuck on the "b" because you haven't told it that
> identifiers are atoms...
>
> atom
>  :     literal
>  |     IDENTIFIER
>  |     LPAREN! expr RPAREN!
>  ;
>
> Michael
>
>
> On 14 October 2011 11:42, Ross Bamford <roscoml at gmail.com> wrote:
> > Hi Michael,
> > Thanks for the response! And thanks for being kind about my basic grammar
> > :)
> > I tried reordering the alternatives in expr as you suggested, and am a
> bit
> > closer now than I was before! It's definitely parsing a = 1 + (b = 2)
> fine,
> > but I'm still seeing NoViableAltExceptions with, for example "a=b+(c=2)".
> > Looking at the debugger step by step it seems to still be trying to grab
> > "b+" as a token, rather than seeing the "b" then the "+", which is why I
> > tried adding IDENTIFIER to the "atom" rule previously. I tried adding it
> > again after making the change you suggested but it still caused a lot of
> > problems in other places.
> > Thanks,
> > Ross
> >
> > On Fri, Oct 14, 2011 at 1:04 AM, Michael Bedward <
> michael.bedward at gmail.com>
> > wrote:
> >>
> >> Hi Ross,
> >>
> >> For a bit of a newbie that's a nice grammar - much neater than any of
> mine
> >> :)
> >>
> >> If you rearrange your expr rule so that the assign_expr is the first
> >> alternative...
> >>
> >> expr
> >>  :   assign_expr
> >>  |   math_expr
> >>  |   meth_call_expr
> >>  ;
> >>
> >> ...I think that the grammar should be able to parse things like a = 1 +
> (b
> >> = 2)
> >>
> >> Michael
> >>
> >>
> >> On 14 October 2011 10:38, Ross Bamford <roscoml at gmail.com> wrote:
> >> > Hi Guys,
> >> >
> >> > I'm a bit of an Antlr newbie - I've successfully created and used
> Antlr
> >> > 2
> >> > grammars in the past but mostly by trial and error, and occasionally
> >> > random
> >> > hacking until it "worked"... I've recently become involved in a
> project
> >> > that
> >> > requires a very simple scripting language, and have decided to use
> Antlr
> >> > 3
> >> > for this, but I'm getting stuck quite early on - I think I have a
> >> > fundamental problem in my grammar but after much hacking at it and
> >> > trying
> >> > various ideas I got from Google, I'm still hitting a bit of a brick
> >> > wall.
> >> >
> >> > Basically I'm at the point where I have mathematical expressions and
> >> > various
> >> > literal types implemented, and am adding in function and method call
> >> > handling - I want to be able to call methods with or without and
> >> > explicit
> >> > receiver, and in my language parenthesis are optional (I know that
> >> > complicates matters a bit but it's what I need for this project). I've
> >> > written the grammar so far against a set of functional tests, and all
> is
> >> > well with most of my syntax. Here is my grammar:
> >> >
> >> > /* ********* GRAMMAR *********** */
> >> > grammar BasicLang;
> >> >
> >> > options {
> >> >    output=AST;
> >> >    ASTLabelType=CommonTree;
> >> >    backtrack=true;
> >> >    memoize=true;
> >> > }
> >> >
> >> > tokens {
> >> >  ASSIGN;
> >> >  METHOD_CALL;
> >> >  SELF;
> >> > }
> >> >
> >> > @parser::members {
> >> >  /* throw exceptions rather than silently failing... */
> >> > protected void mismatch(IntStream input, int ttype, BitSet follow)
> >> >  throws RecognitionException
> >> > {
> >> >  throw new MismatchedTokenException(ttype, input);
> >> > }
> >> >  public Object recoverFromMismatchedSet(IntStream input,
> >> > RecognitionException e, BitSet follow)
> >> >  throws RecognitionException
> >> > {
> >> >  throw e;
> >> > }
> >> > }
> >> >
> >> > @rulecatch {
> >> > // throw exceptions rather than silently failing...
> >> > catch (RecognitionException e) {
> >> >  throw e;
> >> > }
> >> > }
> >> >
> >> > start_rule
> >> >  :   script
> >> >  ;
> >> >
> >> > script
> >> >  :   statement*
> >> >  ;
> >> >
> >> > statement
> >> >  :   expr terminator!
> >> >  ;
> >> >
> >> > expr
> >> >  :   math_expr
> >> >  |   assign_expr
> >> >  |   meth_call_expr
> >> >  ;
> >> >
> >> > meth_call_expr
> >> >  :   (IDENTIFIER DOT)? func_call_expr -> ^(METHOD_CALL IDENTIFIER?
> >> > func_call_expr)
> >> >  |   (STRING_LITERAL DOT)? func_call_expr -> ^(METHOD_CALL
> >> > STRING_LITERAL?
> >> > func_call_expr)
> >> >  ;
> >> >
> >> > fragment
> >> > func_call_expr
> >> >  :   IDENTIFIER^ argument_list
> >> >  ;
> >> >
> >> > fragment
> >> > argument_list
> >> >  :   LPAREN!? (expr (COMMA! expr)*)? RPAREN!?
> >> >  ;
> >> >
> >> > assign_expr
> >> >  :   IDENTIFIER ASSIGN expr -> ^(ASSIGN IDENTIFIER expr)
> >> >  ;
> >> >
> >> > math_expr
> >> >  :   mult_expr ((ADD^|SUB^) mult_expr)*
> >> >  ;
> >> >
> >> > mult_expr
> >> >  :   pow_expr ((MUL^|DIV^|MOD^) pow_expr)*
> >> >  ;
> >> >
> >> > pow_expr
> >> >  :   unary_expr ((POW^) unary_expr)*
> >> >  ;
> >> >
> >> > unary_expr
> >> >  :   NOT? atom
> >> >  ;
> >> >
> >> > atom
> >> >  :     literal
> >> >  |     LPAREN! expr RPAREN!
> >> >  ;
> >> >
> >> > literal
> >> >  :     HEX_LITERAL
> >> >  |     DECIMAL_LITERAL
> >> >  |     OCTAL_LITERAL
> >> >  |     FLOATING_POINT_LITERAL
> >> > //  |     REGEXP_LITERAL
> >> >  |     STRING_LITERAL
> >> >  ;
> >> >
> >> > terminator
> >> >  :     TERMINATOR
> >> >  |     EOF
> >> >  ;
> >> >
> >> > POW :   '^' ;
> >> > MOD :   '%' ;
> >> > ADD :   '+' ;
> >> > SUB :   '-' ;
> >> > DIV :   '/' ;
> >> > MUL :   '*' ;
> >> > NOT :   '!' ;
> >> >
> >> > ASSIGN
> >> >    :   '='
> >> >    ;
> >> >
> >> > LPAREN
> >> >    :   '('
> >> >    ;
> >> >
> >> > RPAREN
> >> >    :   ')'
> >> >    ;
> >> >
> >> > COMMA
> >> >    :   ','
> >> >    ;
> >> >
> >> > DOT :   '.' ;
> >> >
> >> > CHARACTER_LITERAL
> >> >    :   '\'' ( EscapeSequence | ~('\''|'\\') ) '\''
> >> >    ;
> >> >
> >> > STRING_LITERAL
> >> >    :  '"' ( EscapeSequence | ~('\\'|'"') )* '"'
> >> >    ;
> >> >
> >> > /*
> >> > REGEXP_LITERAL
> >> >    :  '/' ( EscapeSequence | ~('\\'|'"') )* '/'
> >> >    ;
> >> > */
> >> >
> >> > HEX_LITERAL : '0' ('x'|'X') HexDigit+ IntegerTypeSuffix? ;
> >> >
> >> > DECIMAL_LITERAL : ('0' | '1'..'9' '0'..'9'*) IntegerTypeSuffix? ;
> >> >
> >> > OCTAL_LITERAL : '0' ('0'..'7')+ IntegerTypeSuffix? ;
> >> >
> >> > fragment
> >> > HexDigit : ('0'..'9'|'a'..'f'|'A'..'F') ;
> >> >
> >> > fragment
> >> > IntegerTypeSuffix
> >> >  : ('l'|'L')
> >> >  | ('u'|'U')  ('l'|'L')?
> >> >  ;
> >> >
> >> > FLOATING_POINT_LITERAL
> >> >    :   ('0'..'9')+ '.' ('0'..'9')* Exponent? FloatTypeSuffix?
> >> >    |   '.' ('0'..'9')+ Exponent? FloatTypeSuffix?
> >> >    |   ('0'..'9')+ Exponent? FloatTypeSuffix?
> >> >  ;
> >> >
> >> > fragment
> >> > Exponent : ('e'|'E') ('+'|'-')? ('0'..'9')+ ;
> >> >
> >> > fragment
> >> > FloatTypeSuffix : ('f'|'F'|'d'|'D') ;
> >> >
> >> > fragment
> >> > EscapeSequence
> >> >    :   '\\' ('b'|'t'|'n'|'f'|'r'|'\"'|'\''|'\\'|'/')
> >> >    |   OctalEscape
> >> >    ;
> >> >
> >> > fragment
> >> > OctalEscape
> >> >    :   '\\' ('0'..'3') ('0'..'7') ('0'..'7')
> >> >    |   '\\' ('0'..'7') ('0'..'7')
> >> >    |   '\\' ('0'..'7')
> >> >    ;
> >> >
> >> > fragment
> >> > UnicodeEscape
> >> >    :   '\\' 'u' HexDigit HexDigit HexDigit HexDigit
> >> >    ;
> >> > COMMENT
> >> >    :   '/*' ( options {greedy=false;} : . )* '*/' {$channel=HIDDEN;}
> >> >    ;
> >> >
> >> > LINE_COMMENT
> >> >    : '//' ~('\n'|'\r')* '\r'? '\n' {$channel=HIDDEN;}
> >> >    ;
> >> >
> >> > IDENTIFIER
> >> >  : ID_LETTER (ID_LETTER|'0'..'9')*
> >> >  ;
> >> >
> >> > fragment
> >> > ID_LETTER
> >> >  : '$'
> >> >  | 'A'..'Z'
> >> >  | 'a'..'z'
> >> >  | '_'
> >> >  ;
> >> >
> >> > TERMINATOR
> >> >  : '\r'? '\n'
> >> >  | ';'
> >> >  ;
> >> >
> >> > WS  :  (' '|'\r'|'\t'|'\u000C') {$channel=HIDDEN;}
> >> >    |  '...' '\r'? '\n'  {$channel=HIDDEN;}
> >> >    ;
> >> >
> >> > /* *************** END *************** */
> >> >
> >> > With this grammar, my tests so far pass, and I'm building trees for
> >> > simple
> >> > arithmetic operations and the like, including involving variables
> (e.g.
> >> > a+1
> >> > and the like), and method calls are working as I expect, including
> when
> >> > passing method call results as args to another method call. But I
> cannot
> >> > get
> >> > input such as "a=b+(c=1)" to parse at all - Debugging in AntlrWorks
> >> > shows me
> >> > that the problem occurs when the parse sees the "b+", when it throws a
> >> > NoViableAlt exception.
> >> >
> >> > I guessed this was because the parser doesn't see the identifier as an
> >> > atom,
> >> > so tries to parse it with the + symbol. So, I tried adding IDENTIFIER
> as
> >> > an
> >> > alternative to the atom rule - but that just broke the parser
> completely
> >> > and
> >> > many of my tests failed with an exception - MismatchedSetException.
> >> >
> >> > I've been playing with this for a few days now but no matter what I
> do,
> >> > even
> >> > when I get the type of syntax I mentioned above (the assign statement)
> >> > working, I invariably break something (or more often, everything! :( )
> >> > else.
> >> > I'm really hoping someone out there will take pity on me and give me
> >> > some
> >> > insight into what I'm doing wrong.
> >> >
> >> > Thanks in advance!
> >> > --
> >> > Ross Bamford - roscoml at gmail.com
> >> >
> >> > List: http://www.antlr.org/mailman/listinfo/antlr-interest
> >> > Unsubscribe:
> >> >
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
> >> >
> >
> >
>
>

From michael.bedward at gmail.com  Fri Oct 14 05:30:05 2011
From: michael.bedward at gmail.com (Michael Bedward)
Date: Fri, 14 Oct 2011 23:30:05 +1100
Subject: [antlr-interest] Can anyone help with a basic grammar problem
 in Antlr 3?
In-Reply-To: <CAMtjaCC4sY7jKcJ75A3shPWHQOKoEdK=8Ci-PQ1kNmO_ZHW-kw@mail.gmail.com>
References: <CAMtjaCB76au0uNCvbVKd4YYX_m70Oz3SFUtdK7J1sRrpKJoSug@mail.gmail.com>
	<CACJVtdMkOsSq4RWm=Bte_CCE4icCu=--2htVOHrqX1GSR3z9Jw@mail.gmail.com>
	<CAMtjaCB5AkNOCvQQoVfHaNhxx5eUmbSAjTMGm8tYC+k4W8+VdQ@mail.gmail.com>
	<CACJVtdMNwtDOsXVmqYhEKzRgNOPp+WC_Ai-HTs=Gp0W530i_Tw@mail.gmail.com>
	<CAMtjaCC4sY7jKcJ75A3shPWHQOKoEdK=8Ci-PQ1kNmO_ZHW-kw@mail.gmail.com>
Message-ID: <CACJVtdMopm0H5eW20VQd3QQqiYRJUPV0sk+c7vFbVYJ8HJygdA@mail.gmail.com>

Hi Ross,

Just a quick response right now (it's bedtime here)...

This is sounding like something best handled in the AST rather than
trying to bung it all in the initial parse. I would look at making the
grammar lenient enough to accept your naked method calls and then
disambiguate on a subsequent pass when you have a symbol table hooked
up.

I'll have a proper look tomorrow, and perhaps others here might
suggest a better approach in the mean time.

Michael

On 14 October 2011 23:11, Ross Bamford <roscoml at gmail.com> wrote:
> Hi Michael,
> I've tried adding IDENTIFIER into the atom rule, and that solved the
> assignment expression issues I was having, but unfortunately it broke the
> method call parsing completely - the issue seemed to stem from the parser
> not being able to differentiate between a function call, and a plain
> identifier - cue many and varied MismatchedSetExceptions :(. After much
> debugging with ANTLRWorks (what a great tool by the way!!) the only thing
> I've found that fixes this is to make parens mandatory on a method call.
> Having done that after making the other changes you suggested I've now got
> my tests passing (except obviously the ones that call methods without
> parens). I've also made some other changes based on another of your messages
> I found in the archives, to make input such as "foo(1 2)" throw an exception
> rather than just printing a warning and ignoring the "2" - so thanks again!
> :)
> I would still really like to have optional parens on method calls, which I
> know is difficult... I have a little experience with parsing Ruby, for
> example, and I know there's an ambiguous case such as:
> a = foo
> whereby do I treat foo as a var or a method? In other projects I've managed
> to handle that at runtime by treating foo as a var only if an assignment
> statement such as "foo = 1" has been seen before, and I seem to recall I
> simply parsed all such cases as a bare IDENTIFIER to be resolved later, but
> I have no idea how to make this work in my current Antlr parser.
> Here is my grammar as it stands now:
> /* ************* GRAMMAR **************** */
> grammar BasicLang;
> options {
> ? ? output=AST;
> ? ? ASTLabelType=CommonTree;
> ? ? backtrack=true;
> ? ? memoize=true;
> }
> tokens {
> ? ASSIGN;
> ? METHOD_CALL;
> ? SELF;
> }
> @parser::members {
> ? /* throw exceptions rather than silently failing... */
> protected void mismatch(IntStream input, int ttype, BitSet follow)
> ??throws RecognitionException
> {
> ??throw new MismatchedTokenException(ttype, input);
> }
> @Override
> public Object recoverFromMismatchedSet(IntStream input, RecognitionException
> e, BitSet follow)
> ??throws RecognitionException
> {
> ??throw e;
> }
> @Override
> protected Object recoverFromMismatchedToken(IntStream input, int
> ttype, BitSet follow) throws RecognitionException {
> ?? ?if (ttype == RPAREN) {
> ?? ? ? ?throw new UnwantedTokenException(); // ("Invalid input in argument
> list");
> ?? ?}
> ?? ?return super.recoverFromMismatchedToken(input, ttype, follow);
> }
> }
> @rulecatch {
> // throw exceptions rather than silently failing...
> catch (RecognitionException e) {
> ??throw e;
> }
> }
> start_rule
> ? : ? script
> ? ;
> script
> ? : ? statement+
> ? | ? EOF!
> ? ;
> statement
> ? : ? expr terminator!
> ? ;
>
> expr
> ? : ? assign_expr
> ? | ? math_expr
> ? | ? meth_call_expr
> ? ;
>
> meth_call_expr
> ? : ? (IDENTIFIER DOT)? func_call_expr -> ^(METHOD_CALL IDENTIFIER?
> func_call_expr)
> ? | ? (STRING_LITERAL DOT)? func_call_expr -> ^(METHOD_CALL STRING_LITERAL?
> func_call_expr)
> ? ;
>
> fragment
> func_call_expr
> ? : ? IDENTIFIER^ argument_list
> ? ;
>
> fragment
> argument_list
> ? : ? LPAREN! (expr (COMMA! expr)*)? RPAREN!
> ? ;
>
> assign_expr
> ? : ? IDENTIFIER ASSIGN expr -> ^(ASSIGN IDENTIFIER expr)
> ? ;
> math_expr
> ? : ? mult_expr ((ADD^|SUB^) mult_expr)*
> ? ;
> mult_expr
> ? : ? pow_expr ((MUL^|DIV^|MOD^) pow_expr)*
> ? ;
>
> pow_expr
> ? : ? unary_expr ((POW^) unary_expr)*
> ? ;
>
> unary_expr
> ? : ? NOT? atom
> ? ;
> atom
> ? : ? ? literal
> ? | ? ? IDENTIFIER
> ? | ? ? LPAREN! expr RPAREN!
> ? ;
>
> literal
> ? : ? ? HEX_LITERAL
> ? | ? ? DECIMAL_LITERAL
> ? | ? ? OCTAL_LITERAL
> ? | ? ? FLOATING_POINT_LITERAL
> // ?| ? ? REGEXP_LITERAL
> ? | ? ? STRING_LITERAL
> ? ;
>
> terminator
> ? : ? ? TERMINATOR
> ? | ? ? EOF
> ? ;
> POW : ? '^' ;
> MOD : ? '%' ;
> ADD : ? '+' ;
> SUB : ? '-' ;
> DIV : ? '/' ;
> MUL : ? '*' ;
> NOT : ? '!' ;
> ASSIGN
> ? ? : ? '='
> ? ? ;
>
> LPAREN
> ? ? : ? '('
> ? ? ;
>
> RPAREN
> ? ? : ? ')'
> ? ? ;
>
> COMMA
> ? ? : ? ','
> ? ? ;
>
> DOT : ? '.' ;
> CHARACTER_LITERAL
> ? ? : ? '\'' ( EscapeSequence | ~('\''|'\\') ) '\''
> ? ? ;
> STRING_LITERAL
> ? ? : ?'"' ( EscapeSequence | ~('\\'|'"') )* '"'
> ? ? ;
> /*
> REGEXP_LITERAL
> ? ? : ?'/' ( EscapeSequence | ~('\\'|'"') )* '/'
> ? ? ;
> */
> HEX_LITERAL : '0' ('x'|'X') HexDigit+ IntegerTypeSuffix? ;
> DECIMAL_LITERAL : ('0' | '1'..'9' '0'..'9'*) IntegerTypeSuffix? ;
> OCTAL_LITERAL : '0' ('0'..'7')+ IntegerTypeSuffix? ;
> fragment
> HexDigit : ('0'..'9'|'a'..'f'|'A'..'F') ;
> fragment
> IntegerTypeSuffix
> ? : ('l'|'L')
> ? | ('u'|'U') ?('l'|'L')?
> ? ;
> FLOATING_POINT_LITERAL
> ? ? : ? ('0'..'9')+ '.' ('0'..'9')* Exponent? FloatTypeSuffix?
> ? ? | ? '.' ('0'..'9')+ Exponent? FloatTypeSuffix?
> ? ? | ? ('0'..'9')+ Exponent? FloatTypeSuffix?
> ? ;
> fragment
> Exponent : ('e'|'E') ('+'|'-')? ('0'..'9')+ ;
> fragment
> FloatTypeSuffix : ('f'|'F'|'d'|'D') ;
> fragment
> EscapeSequence
> ? ? : ? '\\' ('b'|'t'|'n'|'f'|'r'|'\"'|'\''|'\\'|'/')
> ? ? | ? OctalEscape
> ? ? ;
> fragment
> OctalEscape
> ? ? : ? '\\' ('0'..'3') ('0'..'7') ('0'..'7')
> ? ? | ? '\\' ('0'..'7') ('0'..'7')
> ? ? | ? '\\' ('0'..'7')
> ? ? ;
> fragment
> UnicodeEscape
> ? ? : ? '\\' 'u' HexDigit HexDigit HexDigit HexDigit
> ? ? ;
> COMMENT
> ? ? : ? '/*' ( options {greedy=false;} : . )* '*/' {$channel=HIDDEN;}
> ? ? ;
> LINE_COMMENT
> ? ? : '//' ~('\n'|'\r')* '\r'? '\n' {$channel=HIDDEN;}
> ? ? ;
>
> IDENTIFIER
> ? : ID_LETTER (ID_LETTER|'0'..'9')*
> ? ;
>
> fragment
> ID_LETTER
> ? : '$'
> ? | 'A'..'Z'
> ? | 'a'..'z'
> ? | '_'
> ? ;
> TERMINATOR
> ? : '\r'? '\n'
> ? | ';'
> ? ;
> WS ?: ?(' '|'\r'|'\t'|'\u000C') {$channel=HIDDEN;}
> ? ? | ?'...' '\r'? '\n' ?{$channel=HIDDEN;}
> ? ? ;
> /* ************* END ************************ */
>
>
> On Fri, Oct 14, 2011 at 2:12 AM, Michael
> Bedward?<michael.bedward at gmail.com>?wrote:
>>
>> Ah yes, it's getting stuck on the "b" because you haven't told it that
>> identifiers are atoms...
>>
>> atom
>> ?: ? ? literal
>> ?| ? ? IDENTIFIER
>> ?| ? ? LPAREN! expr RPAREN!
>> ?;
>>
>> Michael
>>
>>
>> On 14 October 2011 11:42, Ross Bamford <roscoml at gmail.com> wrote:
>> > Hi Michael,
>> > Thanks for the response! And thanks for being kind about my basic
>> > grammar
>> > :)
>> > I tried reordering the alternatives in expr as you suggested, and am a
>> > bit
>> > closer now than I was before! It's definitely parsing?a = 1 + (b = 2)
>> > fine,
>> > but I'm still seeing NoViableAltExceptions with, for example
>> > "a=b+(c=2)".
>> > Looking at the debugger step by step it seems to still be trying to grab
>> > "b+" as a token, rather than seeing the "b" then the "+", which is why I
>> > tried adding IDENTIFIER to the "atom" rule previously. I tried adding it
>> > again after making the change you suggested but it still caused a lot of
>> > problems in other places.
>> > Thanks,
>> > Ross
>> >
>> > On Fri, Oct 14, 2011 at 1:04 AM, Michael Bedward
>> > <michael.bedward at gmail.com>
>> > wrote:
>> >>
>> >> Hi Ross,
>> >>
>> >> For a bit of a newbie that's a nice grammar - much neater than any of
>> >> mine
>> >> :)
>> >>
>> >> If you rearrange your expr rule so that the assign_expr is the first
>> >> alternative...
>> >>
>> >> expr
>> >> ?: ? assign_expr
>> >> ?| ? math_expr
>> >> ?| ? meth_call_expr
>> >> ?;
>> >>
>> >> ...I think that the grammar should be able to parse things like a = 1 +
>> >> (b
>> >> = 2)
>> >>
>> >> Michael
>> >>
>> >>
>> >> On 14 October 2011 10:38, Ross Bamford <roscoml at gmail.com> wrote:
>> >> > Hi Guys,
>> >> >
>> >> > I'm a bit of an Antlr newbie - I've successfully created and used
>> >> > Antlr
>> >> > 2
>> >> > grammars in the past but mostly by trial and error, and occasionally
>> >> > random
>> >> > hacking until it "worked"... I've recently become involved in a
>> >> > project
>> >> > that
>> >> > requires a very simple scripting language, and have decided to use
>> >> > Antlr
>> >> > 3
>> >> > for this, but I'm getting stuck quite early on - I think I have a
>> >> > fundamental problem in my grammar but after much hacking at it and
>> >> > trying
>> >> > various ideas I got from Google, I'm still hitting a bit of a brick
>> >> > wall.
>> >> >
>> >> > Basically I'm at the point where I have mathematical expressions and
>> >> > various
>> >> > literal types implemented, and am adding in function and method call
>> >> > handling - I want to be able to call methods with or without and
>> >> > explicit
>> >> > receiver, and in my language parenthesis are optional (I know that
>> >> > complicates matters a bit but it's what I need for this project).
>> >> > I've
>> >> > written the grammar so far against a set of functional tests, and all
>> >> > is
>> >> > well with most of my syntax. Here is my grammar:
>> >> >
>> >> > /* ********* GRAMMAR *********** */
>> >> > grammar BasicLang;
>> >> >
>> >> > options {
>> >> > ? ?output=AST;
>> >> > ? ?ASTLabelType=CommonTree;
>> >> > ? ?backtrack=true;
>> >> > ? ?memoize=true;
>> >> > }
>> >> >
>> >> > tokens {
>> >> > ?ASSIGN;
>> >> > ?METHOD_CALL;
>> >> > ?SELF;
>> >> > }
>> >> >
>> >> > @parser::members {
>> >> > ?/* throw exceptions rather than silently failing... */
>> >> > protected void mismatch(IntStream input, int ttype, BitSet follow)
>> >> > ?throws RecognitionException
>> >> > {
>> >> > ?throw new MismatchedTokenException(ttype, input);
>> >> > }
>> >> > ?public Object recoverFromMismatchedSet(IntStream input,
>> >> > RecognitionException e, BitSet follow)
>> >> > ?throws RecognitionException
>> >> > {
>> >> > ?throw e;
>> >> > }
>> >> > }
>> >> >
>> >> > @rulecatch {
>> >> > // throw exceptions rather than silently failing...
>> >> > catch (RecognitionException e) {
>> >> > ?throw e;
>> >> > }
>> >> > }
>> >> >
>> >> > start_rule
>> >> > ?: ? script
>> >> > ?;
>> >> >
>> >> > script
>> >> > ?: ? statement*
>> >> > ?;
>> >> >
>> >> > statement
>> >> > ?: ? expr terminator!
>> >> > ?;
>> >> >
>> >> > expr
>> >> > ?: ? math_expr
>> >> > ?| ? assign_expr
>> >> > ?| ? meth_call_expr
>> >> > ?;
>> >> >
>> >> > meth_call_expr
>> >> > ?: ? (IDENTIFIER DOT)? func_call_expr -> ^(METHOD_CALL IDENTIFIER?
>> >> > func_call_expr)
>> >> > ?| ? (STRING_LITERAL DOT)? func_call_expr -> ^(METHOD_CALL
>> >> > STRING_LITERAL?
>> >> > func_call_expr)
>> >> > ?;
>> >> >
>> >> > fragment
>> >> > func_call_expr
>> >> > ?: ? IDENTIFIER^ argument_list
>> >> > ?;
>> >> >
>> >> > fragment
>> >> > argument_list
>> >> > ?: ? LPAREN!? (expr (COMMA! expr)*)? RPAREN!?
>> >> > ?;
>> >> >
>> >> > assign_expr
>> >> > ?: ? IDENTIFIER ASSIGN expr -> ^(ASSIGN IDENTIFIER expr)
>> >> > ?;
>> >> >
>> >> > math_expr
>> >> > ?: ? mult_expr ((ADD^|SUB^) mult_expr)*
>> >> > ?;
>> >> >
>> >> > mult_expr
>> >> > ?: ? pow_expr ((MUL^|DIV^|MOD^) pow_expr)*
>> >> > ?;
>> >> >
>> >> > pow_expr
>> >> > ?: ? unary_expr ((POW^) unary_expr)*
>> >> > ?;
>> >> >
>> >> > unary_expr
>> >> > ?: ? NOT? atom
>> >> > ?;
>> >> >
>> >> > atom
>> >> > ?: ? ? literal
>> >> > ?| ? ? LPAREN! expr RPAREN!
>> >> > ?;
>> >> >
>> >> > literal
>> >> > ?: ? ? HEX_LITERAL
>> >> > ?| ? ? DECIMAL_LITERAL
>> >> > ?| ? ? OCTAL_LITERAL
>> >> > ?| ? ? FLOATING_POINT_LITERAL
>> >> > // ?| ? ? REGEXP_LITERAL
>> >> > ?| ? ? STRING_LITERAL
>> >> > ?;
>> >> >
>> >> > terminator
>> >> > ?: ? ? TERMINATOR
>> >> > ?| ? ? EOF
>> >> > ?;
>> >> >
>> >> > POW : ? '^' ;
>> >> > MOD : ? '%' ;
>> >> > ADD : ? '+' ;
>> >> > SUB : ? '-' ;
>> >> > DIV : ? '/' ;
>> >> > MUL : ? '*' ;
>> >> > NOT : ? '!' ;
>> >> >
>> >> > ASSIGN
>> >> > ? ?: ? '='
>> >> > ? ?;
>> >> >
>> >> > LPAREN
>> >> > ? ?: ? '('
>> >> > ? ?;
>> >> >
>> >> > RPAREN
>> >> > ? ?: ? ')'
>> >> > ? ?;
>> >> >
>> >> > COMMA
>> >> > ? ?: ? ','
>> >> > ? ?;
>> >> >
>> >> > DOT : ? '.' ;
>> >> >
>> >> > CHARACTER_LITERAL
>> >> > ? ?: ? '\'' ( EscapeSequence | ~('\''|'\\') ) '\''
>> >> > ? ?;
>> >> >
>> >> > STRING_LITERAL
>> >> > ? ?: ?'"' ( EscapeSequence | ~('\\'|'"') )* '"'
>> >> > ? ?;
>> >> >
>> >> > /*
>> >> > REGEXP_LITERAL
>> >> > ? ?: ?'/' ( EscapeSequence | ~('\\'|'"') )* '/'
>> >> > ? ?;
>> >> > */
>> >> >
>> >> > HEX_LITERAL : '0' ('x'|'X') HexDigit+ IntegerTypeSuffix? ;
>> >> >
>> >> > DECIMAL_LITERAL : ('0' | '1'..'9' '0'..'9'*) IntegerTypeSuffix? ;
>> >> >
>> >> > OCTAL_LITERAL : '0' ('0'..'7')+ IntegerTypeSuffix? ;
>> >> >
>> >> > fragment
>> >> > HexDigit : ('0'..'9'|'a'..'f'|'A'..'F') ;
>> >> >
>> >> > fragment
>> >> > IntegerTypeSuffix
>> >> > ?: ('l'|'L')
>> >> > ?| ('u'|'U') ?('l'|'L')?
>> >> > ?;
>> >> >
>> >> > FLOATING_POINT_LITERAL
>> >> > ? ?: ? ('0'..'9')+ '.' ('0'..'9')* Exponent? FloatTypeSuffix?
>> >> > ? ?| ? '.' ('0'..'9')+ Exponent? FloatTypeSuffix?
>> >> > ? ?| ? ('0'..'9')+ Exponent? FloatTypeSuffix?
>> >> > ?;
>> >> >
>> >> > fragment
>> >> > Exponent : ('e'|'E') ('+'|'-')? ('0'..'9')+ ;
>> >> >
>> >> > fragment
>> >> > FloatTypeSuffix : ('f'|'F'|'d'|'D') ;
>> >> >
>> >> > fragment
>> >> > EscapeSequence
>> >> > ? ?: ? '\\' ('b'|'t'|'n'|'f'|'r'|'\"'|'\''|'\\'|'/')
>> >> > ? ?| ? OctalEscape
>> >> > ? ?;
>> >> >
>> >> > fragment
>> >> > OctalEscape
>> >> > ? ?: ? '\\' ('0'..'3') ('0'..'7') ('0'..'7')
>> >> > ? ?| ? '\\' ('0'..'7') ('0'..'7')
>> >> > ? ?| ? '\\' ('0'..'7')
>> >> > ? ?;
>> >> >
>> >> > fragment
>> >> > UnicodeEscape
>> >> > ? ?: ? '\\' 'u' HexDigit HexDigit HexDigit HexDigit
>> >> > ? ?;
>> >> > COMMENT
>> >> > ? ?: ? '/*' ( options {greedy=false;} : . )* '*/' {$channel=HIDDEN;}
>> >> > ? ?;
>> >> >
>> >> > LINE_COMMENT
>> >> > ? ?: '//' ~('\n'|'\r')* '\r'? '\n' {$channel=HIDDEN;}
>> >> > ? ?;
>> >> >
>> >> > IDENTIFIER
>> >> > ?: ID_LETTER (ID_LETTER|'0'..'9')*
>> >> > ?;
>> >> >
>> >> > fragment
>> >> > ID_LETTER
>> >> > ?: '$'
>> >> > ?| 'A'..'Z'
>> >> > ?| 'a'..'z'
>> >> > ?| '_'
>> >> > ?;
>> >> >
>> >> > TERMINATOR
>> >> > ?: '\r'? '\n'
>> >> > ?| ';'
>> >> > ?;
>> >> >
>> >> > WS ?: ?(' '|'\r'|'\t'|'\u000C') {$channel=HIDDEN;}
>> >> > ? ?| ?'...' '\r'? '\n' ?{$channel=HIDDEN;}
>> >> > ? ?;
>> >> >
>> >> > /* *************** END *************** */
>> >> >
>> >> > With this grammar, my tests so far pass, and I'm building trees for
>> >> > simple
>> >> > arithmetic operations and the like, including involving variables
>> >> > (e.g.
>> >> > a+1
>> >> > and the like), and method calls are working as I expect, including
>> >> > when
>> >> > passing method call results as args to another method call. But I
>> >> > cannot
>> >> > get
>> >> > input such as "a=b+(c=1)" to parse at all - Debugging in AntlrWorks
>> >> > shows me
>> >> > that the problem occurs when the parse sees the "b+", when it throws
>> >> > a
>> >> > NoViableAlt exception.
>> >> >
>> >> > I guessed this was because the parser doesn't see the identifier as
>> >> > an
>> >> > atom,
>> >> > so tries to parse it with the + symbol. So, I tried adding IDENTIFIER
>> >> > as
>> >> > an
>> >> > alternative to the atom rule - but that just broke the parser
>> >> > completely
>> >> > and
>> >> > many of my tests failed with an exception - MismatchedSetException.
>> >> >
>> >> > I've been playing with this for a few days now but no matter what I
>> >> > do,
>> >> > even
>> >> > when I get the type of syntax I mentioned above (the assign
>> >> > statement)
>> >> > working, I invariably break something (or more often, everything! :(
>> >> > )
>> >> > else.
>> >> > I'm really hoping someone out there will take pity on me and give me
>> >> > some
>> >> > insight into what I'm doing wrong.
>> >> >
>> >> > Thanks in advance!
>> >> > --
>> >> > Ross Bamford -?roscoml at gmail.com
>> >> >
>> >> > List:?http://www.antlr.org/mailman/listinfo/antlr-interest
>> >> > Unsubscribe:
>> >>
>> >> > >?http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>> >> >
>> >
>> >
>>
>

From louis.burroughs at gmail.com  Fri Oct 14 07:10:06 2011
From: louis.burroughs at gmail.com (Louis Burroughs)
Date: Fri, 14 Oct 2011 10:10:06 -0400
Subject: [antlr-interest] Java synpred fragment generating errors
Message-ID: <CABDk1ByMbraCgTJV6Stb-TVB-=XBwkPMeiSV17G6UjTmWh9u2A@mail.gmail.com>

antlr 3.4
java 1.6
os: windows xp

Hello,

When I try to use syntactic predicates in my grammar I am getting an error
in the generated grammar parser file.  My variables are not initialized
correctly.  I am new to antlr and syntactic predicates so I am not sure if
the problem is in my grammar or in the template.  This also happens when I
turn the backtracking option to true and remove the predicates from my
grammar.



// $ANTLR start synpred50_EsqlGrammar
    public final void synpred50_EsqlGrammar_fragment() throws
RecognitionException {
  -->   *void  =null;*


        // C:\\EsqlParser\\src\\com\\abc\\iaf\\plugin\\EsqlGrammar.g:393:23:
( LEFT_BRACKET var_atom1= atom RIGHT_BRACKET )
        // C:\\EsqlParser\\src\\com\\abc\\iaf\\plugin\\EsqlGrammar.g:393:24:
LEFT_BRACKET var_atom1= atom RIGHT_BRACKET
        {

match(input,LEFT_BRACKET,FOLLOW_LEFT_BRACKET_in_synpred50_EsqlGrammar2008);
if (state.failed) return ;

        pushFollow(FOLLOW_atom_in_synpred50_EsqlGrammar2012);
        var_atom1=atom();

        state._fsp--;
        if (state.failed) return ;


match(input,RIGHT_BRACKET,FOLLOW_RIGHT_BRACKET_in_synpred50_EsqlGrammar2014);
if (state.failed) return ;

        }

    }

Grammar Syntax:

variable
  :
  var_id1=IDENTIFIER ((LEFT_BRACKET var_atom1=atom
RIGHT_BRACKET)=>LEFT_BRACKET var_atom1=atom RIGHT_BRACKET)?
(pe+=path_element)*
    ->
      ^(VARIABLE ^(BRACKET $var_atom1)$var_id1  $pe* )
  ;


This also happens with tokens:

Token =null;

Thanks in advance,
Louis Burroughs

From jimi at temporal-wave.com  Fri Oct 14 08:57:00 2011
From: jimi at temporal-wave.com (Jim Idle)
Date: Fri, 14 Oct 2011 08:57:00 -0700
Subject: [antlr-interest] Java synpred fragment generating errors
In-Reply-To: <CABDk1ByMbraCgTJV6Stb-TVB-=XBwkPMeiSV17G6UjTmWh9u2A@mail.gmail.com>
References: <CABDk1ByMbraCgTJV6Stb-TVB-=XBwkPMeiSV17G6UjTmWh9u2A@mail.gmail.com>
Message-ID: <10542b9bcf7687ff686296e6bc0bec61@mail.gmail.com>

((LEFT_BRACKET atom RIGHT_BRACKET)=>


Don't add a label in to the predicate.


Jim

> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of Louis Burroughs
> Sent: Friday, October 14, 2011 7:10 AM
> To: antlr-interest at antlr.org
> Subject: [antlr-interest] Java synpred fragment generating errors
>
> antlr 3.4
> java 1.6
> os: windows xp
>
> Hello,
>
> When I try to use syntactic predicates in my grammar I am getting an
> error in the generated grammar parser file.  My variables are not
> initialized correctly.  I am new to antlr and syntactic predicates so I
> am not sure if the problem is in my grammar or in the template.  This
> also happens when I turn the backtracking option to true and remove the
> predicates from my grammar.
>
>
>
> // $ANTLR start synpred50_EsqlGrammar
>     public final void synpred50_EsqlGrammar_fragment() throws
> RecognitionException {
>   -->   *void  =null;*
>
>
>         //
> C:\\EsqlParser\\src\\com\\abc\\iaf\\plugin\\EsqlGrammar.g:393:23:
> ( LEFT_BRACKET var_atom1= atom RIGHT_BRACKET )
>         //
> C:\\EsqlParser\\src\\com\\abc\\iaf\\plugin\\EsqlGrammar.g:393:24:
> LEFT_BRACKET var_atom1= atom RIGHT_BRACKET
>         {
>
> match(input,LEFT_BRACKET,FOLLOW_LEFT_BRACKET_in_synpred50_EsqlGrammar20
> 08);
> if (state.failed) return ;
>
>         pushFollow(FOLLOW_atom_in_synpred50_EsqlGrammar2012);
>         var_atom1=atom();
>
>         state._fsp--;
>         if (state.failed) return ;
>
>
> match(input,RIGHT_BRACKET,FOLLOW_RIGHT_BRACKET_in_synpred50_EsqlGrammar
> 2014);
> if (state.failed) return ;
>
>         }
>
>     }
>
> Grammar Syntax:
>
> variable
>   :
>   var_id1=IDENTIFIER ((LEFT_BRACKET var_atom1=atom
> RIGHT_BRACKET)=>LEFT_BRACKET var_atom1=atom RIGHT_BRACKET)?
> (pe+=path_element)*
>     ->
>       ^(VARIABLE ^(BRACKET $var_atom1)$var_id1  $pe* )
>   ;
>
>
> This also happens with tokens:
>
> Token =null;
>
> Thanks in advance,
> Louis Burroughs
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
> email-address

From roscoml at gmail.com  Sat Oct 15 05:40:19 2011
From: roscoml at gmail.com (Ross Bamford)
Date: Sat, 15 Oct 2011 13:40:19 +0100
Subject: [antlr-interest] Rewrite action causing error in parser?
Message-ID: <CAMtjaCAvZB1gHSMzp9bpfXNbC7dt+66-dvo0wwN8NyOQCzuY=w@mail.gmail.com>

Hi all,

I have a grammar I'm currently working on (posted in another thread the
other day), which has the following rule:

meth_call_expr
  :   (id = IDENTIFIER DOT)? func_call_expr -> ^(METHOD_CALL { ($id==null) ?
adaptor.create(SELF, "SELF") : adaptor.create(IDENTIFIER, $id.getText()) }
func_call_expr)
  ;

As you can see, I'm using an action in the rewrite rule to insert either the
(optional) IDENTIFIER, or an imaginary SELF node if IDENTIFIER is not
specified. The problem I'm having is that this generates a parser that won't
compile. Specifically, it generates the following bit of code (edited by
hand for brevity and to highlight the error):

/* **** [ CODE ] **** */
    // $ANTLR start synpred6_BasicLang
    public final void synpred6_BasicLang_fragment() throws
RecognitionException {

        Token =null; // <-- ERROR HERE

        /* ... later on ... */

        switch (alt23) {
            case 1 :
                //
C:\\Users\\chantelle\\workspace\\basiclang\\src\\com\\roscopeco\\basiclang\\parser\\BasicLang.g:99:8:
id= IDENTIFIER DOT
                {

id=(Token)match(input,IDENTIFIER,FOLLOW_IDENTIFIER_in_synpred6_BasicLang232);
if (state.failed) return ; // <-- AND HERE

                match(input,DOT,FOLLOW_DOT_in_synpred6_BasicLang234); if
(state.failed) return ;

                }
                break;

        }
/* **** [ END ] **** */

Obviously the problem is the "Token =null" line, which should be "Token id =
null". Changing it by hand fixes the errors and makes the parser work as
expected.

So I have two questions - is this the right way to go about inserting an
imaginary token if an optional token isn't in the input, and if so, what am
I doing wrong to cause the error above?

Thanks in advance,
Ross

From hellojinjie at gmail.com  Sat Oct 15 07:22:41 2011
From: hellojinjie at gmail.com (=?UTF-8?B?6YeR5p2w?=)
Date: Sat, 15 Oct 2011 22:22:41 +0800
Subject: [antlr-interest] Problem with autotools while using antlr3 C
	runtime
In-Reply-To: <fba74f3f47305cd41728b2cd40a66fae@mail.gmail.com>
References: <CAKZS5e_aqxeG4U=b2+0WxCX99rcQNWZdN9V8UFWTKoKGYWp_Pg@mail.gmail.com>
	<CA+bn5rx4n0xNmvT34=FgAWatu=wyThmxEPwUgYizfoE_BC4pfw@mail.gmail.com>
	<fba74f3f47305cd41728b2cd40a66fae@mail.gmail.com>
Message-ID: <CAKZS5e8boeBz0Yv-s6yKHGcppY1VHmLqR8KSJEmV2rnV-QRKuA@mail.gmail.com>

Thank you for your answer.
@kirby.bohling
when we use no-define, PACKAGE and VERSION will not be #define'd in config.h
, other PACKAGE_* variables will still be #define'd, so it's not that way.

@Jim
Don't you think that it is better not to distribute the antlr3config.h along
with include files?
the apache portable runtime (apr) also use autotools, http://apr.apache.org/
apr also generate a config file
 AC_CONFIG_HEADER(include/arch/unix/apr_private.h)
but when we install this library using "make install", the config file
apr_private.h is not included in the include files.
personally speaking, the generated config file should be private, that is to
say, we should include the generated config file in *.c source, not *.h
headers

thank you again.

BTW, I wrote a tutorial about antlr3 C runtime, this is very simple and
crude. it is in chinese
http://hellojinjie.iteye.com/admin/blogs/1197529

On Tue, Oct 11, 2011 at 11:35 PM, Jim Idle <jimi at temporal-wave.com> wrote:

> Yeah, I think that we can probably do that as the C runtime does not
> reference those defines. Ideally, you should not encounter a need to
> include
> config.h from two separate non-sub-packages.
>
> Jim
>
> > -----Original Message-----
> > From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> > bounces at antlr.org] On Behalf Of Kirby Bohling
> > Sent: Tuesday, October 11, 2011 7:01 AM
> > To: ??
> > Cc: antlr-interest at antlr.org
> > Subject: Re: [antlr-interest] Problem with autotools while using antlr3
> > C runtime
> >
> > Use no-define in the configure.ac file.
> >
> > AM_INIT_AUTOMAKE(PACKAGE, VERSION, [NO-DEFINE])
> >
> > See:
> > http://gcc.gnu.org/svn/gcc/branches/cilkplus/libstdc++-v3/configure.ac
> > or
> > http://www.delorie.com/gnu/docs/automake/automake_24.html
> >
> > I think this is a sign you or the other package are using the config.h
> > file wrong, but that's a different discussion.  At least that's my
> > guess, I haven't tried it.
> >
> > Kirby
> >
> >
> > On Tue, Oct 11, 2011 at 3:36 AM, ?? <hellojinjie at gmail.com> wrote:
> > > Hi All,
> > >
> > > the antlr3 C runtime is build with autotools.
> > > the autotools generate a header antlr3config.h, this header has
> > > defined: #define PACKAGE "libantlr3c"
> > >
> > > my project is also build with autotools, there is a header config.h,
> > > which
> > > define: #define PACKAGE "polaris"
> > > when I compile my code, there is an error:
> > >
> > > In file included from /opt/antlr3c/include/antlr3defs.h:246,
> > >                 from /opt/antlr3c/include/antlr3.h:33,
> > >                 from PolarisAdmin.cc:13:
> > > /opt/antlr3c/include/antlr3config.h:96:1: error: "PACKAGE" redefined
> > >
> > > the error indicate that  "PACKAGE" has redefined.
> > >
> > > is it a bug?  (:
> > > how can I avoid this error?
> > >
> > > thank you in advance.
> > > --
> > > hellojinjie
> > >
> > > List: http://www.antlr.org/mailman/listinfo/antlr-interest
> > > Unsubscribe:
> > > http://www.antlr.org/mailman/options/antlr-interest/your-email-
> > address
> > >
> >
> > List: http://www.antlr.org/mailman/listinfo/antlr-interest
> > Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
> > email-address
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>



-- 
??

From ruslan_zasukhin at valentina-db.com  Sat Oct 15 07:54:18 2011
From: ruslan_zasukhin at valentina-db.com (Ruslan Zasukhin)
Date: Sat, 15 Oct 2011 17:54:18 +0300
Subject: [antlr-interest] [Q] how rewrite tree for this simple rule with
	alternatives?
Message-ID: <CABF794A.F396D%ruslan_zasukhin@valentina-db.com>

Hi All,
Hi Terrence,


What still wonders me a lot in ANTLR v3  is that fact that we must quite
often to use helper rules_leafs to build trees.

============================================
EXAMPLE in v2 rule looks as

alter_trigger_statement
    :    "alter"! "trigger"! trigger_name ( "enable" | "disable" )
            { ## = #(#[ALTER_TRIGGER, "ALTER_TRIGGER"],##); }
    ;



============================================
ANTLR3 working solution:

alter_trigger_statement
    :    alter_trigger_statement_leaf
            -> ^( ALTER_TRIGGER alter_trigger_statement_leaf )
    ;
    
alter_trigger_statement_leaf
    :    T_ALTER! T_TRIGGER! trigger_name ( T_ENABLE | T_DISABLE )
    ;



============================================
Because attempts to make it in SINGLE rule way  -- not works:

alter_trigger_statement
    :    T_ALTER T_TRIGGER trigger_name ( T_ENABLE | T_DISABLE )
            -> ^( ALTER_TRIGGER trigger_name (T_ENABLE | T_DISABLE) )
    ;


PROBLEM comes from this alternative (T_ENABLE | T_DISABLE ) ...
We cannot label it right?

And it is wrong make both tokens optional

alter_trigger_statement
    :    T_ALTER T_TRIGGER trigger_name ( T_ENABLE | T_DISABLE )
            -> ^( ALTER_TRIGGER trigger_name T_ENABLE? T_DISABLE? )
    ;


And we have many such places, when IMAGINARY token,
added in v2 as easy as one line, requires in v3 adding one more RULE.

As for me, this not sounds, as "more clear and powerful way to build trees".


Am I really blind and not see some easy way for v3?
In examples of ANTLR I have not found any that use imaginary tokens btw...

Thank you for any ideas...




-- 
Best regards,

Ruslan Zasukhin
VP Engineering and New Technology
Paradigma Software, Inc

Valentina - Joining Worlds of Information
http://www.paradigmasoft.com

[I feel the need: the need for speed]



From lizhipeng at gmail.com  Sat Oct 15 09:15:58 2011
From: lizhipeng at gmail.com (=?UTF-8?B?5p2O5b+X6bmP?=)
Date: Sun, 16 Oct 2011 00:15:58 +0800
Subject: [antlr-interest] Something Wrong in Antlr3CSharpReleases 3.4?
Message-ID: <CACTOmx_BximoWLp5nHmeMWU9m1HqKF8mXA8DTVEBhsPbb7itHw@mail.gmail.com>

Hello All

I'm a newbie in Antlr in C#

I start my study from http://www.antlr.org/download/CSharp3.pdf, step by
step, I use Antlr Bootstrap version is 3.3.1.7705, just like CSharp3.pdf
said.

It works well, i write a simple code, and vs2010 compile well.

But when I change the Bootstrap to Latest version from
http://www.antlr.org/wiki/display/ANTLR3/Antlr3CSharpReleases, which version
is 3.4.1.9004, I can't compile my code again.

The error is this:

*------ Rebuild All started: Project: AntlrTest, Configuration: Debug x86
------*
*F:\antlr\AntlrTest\Reference\Antlr\Antlr3.targets(123,5): error AC1000:
Unknown build error: Exception has been thrown by the target of an
invocation.*
*========== Rebuild All: 0 succeeded, 1 failed, 0 skipped ==========*
*
*
Anyone Else come with the Same question? How to solve it?

From sharwell at pixelminegames.com  Sat Oct 15 10:10:11 2011
From: sharwell at pixelminegames.com (Sam Harwell)
Date: Sat, 15 Oct 2011 12:10:11 -0500
Subject: [antlr-interest] Something Wrong in Antlr3CSharpReleases 3.4?
In-Reply-To: <CACTOmx_BximoWLp5nHmeMWU9m1HqKF8mXA8DTVEBhsPbb7itHw@mail.gmail.com>
References: <CACTOmx_BximoWLp5nHmeMWU9m1HqKF8mXA8DTVEBhsPbb7itHw@mail.gmail.com>
Message-ID: <0d8f01cc8b5d$4cef91d0$e6ceb570$@pixelminegames.com>

Hello,

The CSharp3.pdf document you are using is old. All the links on antlr.org
should already be updated to point to the newer documentation on the
Antlr3CSharpReleases page. I suggest going through the updated document to
see if the problem gets resolved.

Thanks,
Sam

-----Original Message-----
From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-bounces at antlr.
org] On Behalf Of ???
Sent: Saturday, October 15, 2011 11:16 AM
To: antlr-interest at antlr.org
Subject: [antlr-interest] Something Wrong in Antlr3CSharpReleases 3.4?

Hello All

I'm a newbie in Antlr in C#

I start my study from http://www.antlr.org/download/CSharp3.pdf, step by
step, I use Antlr Bootstrap version is 3.3.1.7705, just like CSharp3.pdf
said.

It works well, i write a simple code, and vs2010 compile well.

But when I change the Bootstrap to Latest version from
http://www.antlr.org/wiki/display/ANTLR3/Antlr3CSharpReleases, which version
is 3.4.1.9004, I can't compile my code again.

The error is this:

*------ Rebuild All started: Project: AntlrTest, Configuration: Debug x86
------*
*F:\antlr\AntlrTest\Reference\Antlr\Antlr3.targets(123,5): error AC1000:
Unknown build error: Exception has been thrown by the target of an
invocation.*
*========== Rebuild All: 0 succeeded, 1 failed, 0 skipped ==========*
*
*
Anyone Else come with the Same question? How to solve it?

List: http://www.antlr.org/mailman/listinfo/antlr-interest
Unsubscribe:
http://www.antlr.org/mailman/options/antlr-interest/your-email-address


From jeremy.long at gmail.com  Sat Oct 15 13:23:19 2011
From: jeremy.long at gmail.com (Jeremy Long)
Date: Sat, 15 Oct 2011 16:23:19 -0400
Subject: [antlr-interest] Custom ASTLabelType - setParent called with Null?
Message-ID: <CAKAumBGuFXQXSP2pPPL=9Rg7Zwn_dwirEUVb2-OMR12dhymgWA@mail.gmail.com>

Hello,

I'm still relatively new to antlr, but basically I'm trying to generate an
AST and auto-populate a Neo4j Graph. My initial thought was to use a custom
ASTLabelType with my object over-riding the setParent method of the
CommonTree to build the relationship. However, on a very simple grammar
(Expr.g) parsing the input of  "1+2\n" of the 10 calls to setParent, 6 of
the calls where passed a null token?  Any thoughts on this?

The grammar, extended commonTree, and test case are below (however, none of
this will run as the overall project is bigger than this one piece).

Thanks in advance if anyone can clue me into why there are so many calls to
setParent passing a null token in.

--Jeremy



//////////////////////Eval Grammar

grammar Eval;

options {
ASTLabelType=BaseModelNode;
output = AST;
}

@header {

package org.sangine.translator.antlr3.generated;

import org.sangine.translator.antlr3.model.BaseModelNode;

}
@lexer::header {
package org.sangine.translator.antlr3.generated;

import org.sangine.translator.antlr3.model.BaseModelNode;
}

prog : stat+
;

stat : expr NEWLINE
| ID '=' expr NEWLINE
| NEWLINE
;


expr
: multExpr (('+'|'-') multExpr)*
;
multExpr
: atom ('*' atom)*
;
atom
: INT
| ID
| '(' expr ')'
;

ID : ('a'..'z'|'A'..'Z')+;
INT : '0'..'9'+;
NEWLINE : '\r'?'\n';
WS : (' '|'\t'|'\n'|'\r')+ {skip();};

---------------------------------------------------

/////////////////////////////////////////BaseModelNode.java


/**
 *
 */
package org.sangine.translator.antlr3.model;

import org.antlr.runtime.Token;
import org.antlr.runtime.tree.CommonTree;
import org.antlr.runtime.tree.Tree;
import org.neo4j.graphdb.Node;
import org.sangine.model.ModelNode;
import org.sangine.model.ModelRelationshipType;
import org.sangine.store.ApplicationGraph;

/**
 * @author Jeremy
 *
 */
public class BaseModelNode extends CommonTree {

private final Node underlyingNode;
 protected Node getUnderlyingNode()
{
return underlyingNode;
}
 /**
 *
 */
public BaseModelNode(Node node)
{
this.underlyingNode = node;
}

/**
 *
 */
public BaseModelNode(BaseModelNode node)
{
this.underlyingNode = node.underlyingNode;
}
 /**
 * @param node
 */
public BaseModelNode(CommonTree node) {
super(node);
this.underlyingNode = ApplicationGraph.getInstance().createNode();
}

/**
 * @param t
 */
public BaseModelNode(Token t) {
super(t);
this.underlyingNode = ApplicationGraph.getInstance().createNode();
 if (t==null) {
System.err.println("token was null");
return;
}
System.err.println("token was NOT null");
this.underlyingNode.setProperty("text", t.getText());
this.underlyingNode.setProperty("linenumber", t.getLine());
this.underlyingNode.setProperty("offset", t.getCharPositionInLine());
}

public BaseModelNode()
{
this.underlyingNode = ApplicationGraph.getInstance().createNode();
}

 @Override
public void setParent(Tree t) {
if (t==null) return;
this.parent = (CommonTree) t;
BaseModelNode parent = (BaseModelNode) t;
parent.underlyingNode.createRelationshipTo(this.underlyingNode,
ModelRelationshipType.NEXT);
}
 @Override
public int hashCode()
{
    return underlyingNode.hashCode();
}

@Override
public boolean equals( Object o )
{
    return o instanceof BaseModelNode &&
            underlyingNode.equals( ( (BaseModelNode)o ).getUnderlyingNode()
);
}

@Override
public String toString()
{
    return "BaseModelNode[]";
}

}

/////////////////////////////////////////////////////////// test code

package org.sangine;

import org.antlr.runtime.ANTLRStringStream;
import org.antlr.runtime.CommonTokenStream;
import org.antlr.runtime.RecognitionException;
import org.neo4j.graphdb.Transaction;
import org.sangine.store.ApplicationGraph;
import org.sangine.translator.antlr3.ModelTreeAdaptor;
import org.sangine.translator.antlr3.generated.EvalLexer;
import org.sangine.translator.antlr3.generated.EvalParser;

import junit.framework.Test;
import junit.framework.TestCase;
import junit.framework.TestSuite;

public class EvalTest
    extends TestCase
{

public EvalTest( String testName )
    {
        super( testName );
    }

    public static Test suite()
    {
        return new TestSuite( EvalTest.class );
    }

    public void testApp()
    {
    ApplicationGraph.loadOrCreateDB("evaldb");

    Transaction tx =
ApplicationGraph.getInstance().getGraphDatabaseService().beginTx();

    String java = "1+2";

    ANTLRStringStream input = null;
input = new org.antlr.runtime.ANTLRStringStream(java);


EvalLexer lexer = new EvalLexer(input);


    CommonTokenStream tokens = new CommonTokenStream(lexer);

    ModelTreeAdaptor adaptor = new ModelTreeAdaptor();

    EvalParser parser = new EvalParser(tokens);
    parser.setTreeAdaptor(adaptor);

    EvalParser.stat_return cu = null;

    try {
cu = parser.stat();
tx.success();
assertTrue( true );
} catch (RecognitionException e) {
// TODO Auto-generated catch block
e.printStackTrace();
assertTrue( false );
}
    finally {
    tx.finish();
    ApplicationGraph.close();
    }
    }
}

From passionist_81 at yahoo.co.uk  Sat Oct 15 13:40:36 2011
From: passionist_81 at yahoo.co.uk (faraz ahmed)
Date: Sat, 15 Oct 2011 21:40:36 +0100 (BST)
Subject: [antlr-interest] (no subject)
Message-ID: <1318711236.63863.YahooMailMobile@web24819.mail.ird.yahoo.com>

http://cathydavies.com/designer/inbex.html

From jimi at temporal-wave.com  Sat Oct 15 14:34:13 2011
From: jimi at temporal-wave.com (Jim Idle)
Date: Sat, 15 Oct 2011 14:34:13 -0700
Subject: [antlr-interest] Rewrite action causing error in parser?
In-Reply-To: <CAMtjaCAvZB1gHSMzp9bpfXNbC7dt+66-dvo0wwN8NyOQCzuY=w@mail.gmail.com>
References: <CAMtjaCAvZB1gHSMzp9bpfXNbC7dt+66-dvo0wwN8NyOQCzuY=w@mail.gmail.com>
Message-ID: <c64f45370daa6f84a516ac3548080590@mail.gmail.com>

Your problem does not look to be the rewrite rule, but the fact that you
are referencing a local variable in a predicate, or have tried to assign
from a token in a predicate.

Look for something like this

((id=IDENTIFIER)=> id=IDENTIFIER)? ....


But regardless, this is the rewrite rule that is the problem as far as I
can see. Try commenting it out for instance.

Jim

> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of Ross Bamford
> Sent: Saturday, October 15, 2011 5:40 AM
> To: antlr-interest at antlr.org
> Subject: [antlr-interest] Rewrite action causing error in parser?
>
> Hi all,
>
> I have a grammar I'm currently working on (posted in another thread the
> other day), which has the following rule:
>
> meth_call_expr
>   :   (id = IDENTIFIER DOT)? func_call_expr -> ^(METHOD_CALL {
> ($id==null) ?
> adaptor.create(SELF, "SELF") : adaptor.create(IDENTIFIER,
> $id.getText()) }
> func_call_expr)
>   ;
>
> As you can see, I'm using an action in the rewrite rule to insert
> either the
> (optional) IDENTIFIER, or an imaginary SELF node if IDENTIFIER is not
> specified. The problem I'm having is that this generates a parser that
> won't compile. Specifically, it generates the following bit of code
> (edited by hand for brevity and to highlight the error):
>
> /* **** [ CODE ] **** */
>     // $ANTLR start synpred6_BasicLang
>     public final void synpred6_BasicLang_fragment() throws
> RecognitionException {
>
>         Token =null; // <-- ERROR HERE
>
>         /* ... later on ... */
>
>         switch (alt23) {
>             case 1 :
>                 //
> C:\\Users\\chantelle\\workspace\\basiclang\\src\\com\\roscopeco\\basicl
> ang\\parser\\BasicLang.g:99:8:
> id= IDENTIFIER DOT
>                 {
>
> id=(Token)match(input,IDENTIFIER,FOLLOW_IDENTIFIER_in_synpred6_BasicLan
> g232);
> if (state.failed) return ; // <-- AND HERE
>
>                 match(input,DOT,FOLLOW_DOT_in_synpred6_BasicLang234);
> if
> (state.failed) return ;
>
>                 }
>                 break;
>
>         }
> /* **** [ END ] **** */
>
> Obviously the problem is the "Token =null" line, which should be "Token
> id = null". Changing it by hand fixes the errors and makes the parser
> work as expected.
>
> So I have two questions - is this the right way to go about inserting
> an imaginary token if an optional token isn't in the input, and if so,
> what am I doing wrong to cause the error above?
>
> Thanks in advance,
> Ross
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
> email-address

From jimi at temporal-wave.com  Sat Oct 15 14:38:02 2011
From: jimi at temporal-wave.com (Jim Idle)
Date: Sat, 15 Oct 2011 14:38:02 -0700
Subject: [antlr-interest] [Q] how rewrite tree for this simple rule with
	alternatives?
In-Reply-To: <CABF794A.F396D%ruslan_zasukhin@valentina-db.com>
References: <CABF794A.F396D%ruslan_zasukhin@valentina-db.com>
Message-ID: <fabbd268611cc4ea2ba39a529c62fc96@mail.gmail.com>

> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of Ruslan Zasukhin
> Sent: Saturday, October 15, 2011 7:54 AM
> To: antlr-interest at antlr.org
> Subject: [antlr-interest] [Q] how rewrite tree for this simple rule
> with alternatives?
>
> Hi All,
> Hi Terrence,
>
>
> What still wonders me a lot in ANTLR v3  is that fact that we must
> quite often to use helper rules_leafs to build trees.
>


> ============================================
> Because attempts to make it in SINGLE rule way  -- not works:
>
> alter_trigger_statement
>     :    T_ALTER T_TRIGGER trigger_name ( T_ENABLE | T_DISABLE )
>             -> ^( ALTER_TRIGGER trigger_name (T_ENABLE | T_DISABLE) )
>     ;
>
>
> PROBLEM comes from this alternative (T_ENABLE | T_DISABLE ) ...
> We cannot label it right?
>
> And it is wrong make both tokens optional
>
> alter_trigger_statement
>     :    T_ALTER T_TRIGGER trigger_name ( T_ENABLE | T_DISABLE )
>             -> ^( ALTER_TRIGGER trigger_name T_ENABLE? T_DISABLE? )
>     ;
>


-> ^( ALTER_TRIGGER trigger_name T_ENABLE? T_DISABLE? )

You just have to think about the rewrite ordinality indicators, not the
rule syntax.


Jim

From jimi at temporal-wave.com  Sat Oct 15 14:40:08 2011
From: jimi at temporal-wave.com (Jim Idle)
Date: Sat, 15 Oct 2011 14:40:08 -0700
Subject: [antlr-interest] Custom ASTLabelType - setParent called with
	Null?
In-Reply-To: <CAKAumBGuFXQXSP2pPPL=9Rg7Zwn_dwirEUVb2-OMR12dhymgWA@mail.gmail.com>
References: <CAKAumBGuFXQXSP2pPPL=9Rg7Zwn_dwirEUVb2-OMR12dhymgWA@mail.gmail.com>
Message-ID: <f3a768b494e80854dd0aeacbd7b8c029@mail.gmail.com>

It just means that the node does not have a parent, probably 'yet'; which
happens when the AST is in the process of being built.

Jim

> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of Jeremy Long
> Sent: Saturday, October 15, 2011 1:23 PM
> To: antlr-interest at antlr.org
> Subject: [antlr-interest] Custom ASTLabelType - setParent called with
> Null?
>
> Hello,
>
> I'm still relatively new to antlr, but basically I'm trying to generate
> an AST and auto-populate a Neo4j Graph. My initial thought was to use a
> custom ASTLabelType with my object over-riding the setParent method of
> the CommonTree to build the relationship. However, on a very simple
> grammar
> (Expr.g) parsing the input of  "1+2\n" of the 10 calls to setParent, 6
> of the calls where passed a null token?  Any thoughts on this?
>
> The grammar, extended commonTree, and test case are below (however,
> none of this will run as the overall project is bigger than this one
> piece).
>
> Thanks in advance if anyone can clue me into why there are so many
> calls to setParent passing a null token in.
>
> --Jeremy
>
>
>
> //////////////////////Eval Grammar
>
> grammar Eval;
>
> options {
> ASTLabelType=BaseModelNode;
> output = AST;
> }
>
> @header {
>
> package org.sangine.translator.antlr3.generated;
>
> import org.sangine.translator.antlr3.model.BaseModelNode;
>
> }
> @lexer::header {
> package org.sangine.translator.antlr3.generated;
>
> import org.sangine.translator.antlr3.model.BaseModelNode;
> }
>
> prog : stat+
> ;
>
> stat : expr NEWLINE
> | ID '=' expr NEWLINE
> | NEWLINE
> ;
>
>
> expr
> : multExpr (('+'|'-') multExpr)*
> ;
> multExpr
> : atom ('*' atom)*
> ;
> atom
> : INT
> | ID
> | '(' expr ')'
> ;
>
> ID : ('a'..'z'|'A'..'Z')+;
> INT : '0'..'9'+;
> NEWLINE : '\r'?'\n';
> WS : (' '|'\t'|'\n'|'\r')+ {skip();};
>
> ---------------------------------------------------
>
> /////////////////////////////////////////BaseModelNode.java
>
>
> /**
>  *
>  */
> package org.sangine.translator.antlr3.model;
>
> import org.antlr.runtime.Token;
> import org.antlr.runtime.tree.CommonTree;
> import org.antlr.runtime.tree.Tree;
> import org.neo4j.graphdb.Node;
> import org.sangine.model.ModelNode;
> import org.sangine.model.ModelRelationshipType;
> import org.sangine.store.ApplicationGraph;
>
> /**
>  * @author Jeremy
>  *
>  */
> public class BaseModelNode extends CommonTree {
>
> private final Node underlyingNode;
>  protected Node getUnderlyingNode()
> {
> return underlyingNode;
> }
>  /**
>  *
>  */
> public BaseModelNode(Node node)
> {
> this.underlyingNode = node;
> }
>
> /**
>  *
>  */
> public BaseModelNode(BaseModelNode node) { this.underlyingNode =
> node.underlyingNode; }
>  /**
>  * @param node
>  */
> public BaseModelNode(CommonTree node) {
> super(node);
> this.underlyingNode = ApplicationGraph.getInstance().createNode();
> }
>
> /**
>  * @param t
>  */
> public BaseModelNode(Token t) {
> super(t);
> this.underlyingNode = ApplicationGraph.getInstance().createNode();
>  if (t==null) {
> System.err.println("token was null");
> return;
> }
> System.err.println("token was NOT null");
> this.underlyingNode.setProperty("text", t.getText());
> this.underlyingNode.setProperty("linenumber", t.getLine());
> this.underlyingNode.setProperty("offset", t.getCharPositionInLine()); }
>
> public BaseModelNode()
> {
> this.underlyingNode = ApplicationGraph.getInstance().createNode();
> }
>
>  @Override
> public void setParent(Tree t) {
> if (t==null) return;
> this.parent = (CommonTree) t;
> BaseModelNode parent = (BaseModelNode) t;
> parent.underlyingNode.createRelationshipTo(this.underlyingNode,
> ModelRelationshipType.NEXT);
> }
>  @Override
> public int hashCode()
> {
>     return underlyingNode.hashCode();
> }
>
> @Override
> public boolean equals( Object o )
> {
>     return o instanceof BaseModelNode &&
>             underlyingNode.equals( ( (BaseModelNode)o
> ).getUnderlyingNode() ); }
>
> @Override
> public String toString()
> {
>     return "BaseModelNode[]";
> }
>
> }
>
> /////////////////////////////////////////////////////////// test code
>
> package org.sangine;
>
> import org.antlr.runtime.ANTLRStringStream;
> import org.antlr.runtime.CommonTokenStream;
> import org.antlr.runtime.RecognitionException;
> import org.neo4j.graphdb.Transaction;
> import org.sangine.store.ApplicationGraph;
> import org.sangine.translator.antlr3.ModelTreeAdaptor;
> import org.sangine.translator.antlr3.generated.EvalLexer;
> import org.sangine.translator.antlr3.generated.EvalParser;
>
> import junit.framework.Test;
> import junit.framework.TestCase;
> import junit.framework.TestSuite;
>
> public class EvalTest
>     extends TestCase
> {
>
> public EvalTest( String testName )
>     {
>         super( testName );
>     }
>
>     public static Test suite()
>     {
>         return new TestSuite( EvalTest.class );
>     }
>
>     public void testApp()
>     {
>     ApplicationGraph.loadOrCreateDB("evaldb");
>
>     Transaction tx =
> ApplicationGraph.getInstance().getGraphDatabaseService().beginTx();
>
>     String java = "1+2";
>
>     ANTLRStringStream input = null;
> input = new org.antlr.runtime.ANTLRStringStream(java);
>
>
> EvalLexer lexer = new EvalLexer(input);
>
>
>     CommonTokenStream tokens = new CommonTokenStream(lexer);
>
>     ModelTreeAdaptor adaptor = new ModelTreeAdaptor();
>
>     EvalParser parser = new EvalParser(tokens);
>     parser.setTreeAdaptor(adaptor);
>
>     EvalParser.stat_return cu = null;
>
>     try {
> cu = parser.stat();
> tx.success();
> assertTrue( true );
> } catch (RecognitionException e) {
> // TODO Auto-generated catch block
> e.printStackTrace();
> assertTrue( false );
> }
>     finally {
>     tx.finish();
>     ApplicationGraph.close();
>     }
>     }
> }
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
> email-address

From researcher0x00 at gmail.com  Sat Oct 15 18:32:50 2011
From: researcher0x00 at gmail.com (The Researcher)
Date: Sat, 15 Oct 2011 21:32:50 -0400
Subject: [antlr-interest] Beginning ANTLR documentation. Need a few people
 to sanity check it before release.
Message-ID: <CAN45N12OUNiYC_zDBgr4oUKXfeQM95TEUxUyPzFNyyqLTrOJBw@mail.gmail.com>

To help other first time ANTLR users, I created some documentation,
tutorials, and reference guides that I wish I had when starting.

If you just want to see the documents then they should be *freely* available
in a month or so depending upon quantity and the quality of the feedback.

If you are interested in checking the documents and sending feedback to help
me out it would be appreciated.

The documents have a few categories

   1. Create an ANTLR appliance using Virtual Box, Debian, ANTLR, ANTLRWorks
   and NetBeans.
   2. A Reference Manual for org.antlr.Tool command line options, and
   ANTLRWorks.
   3. Additional notes for VirtualBox, Debian, and ANTLRWorks.
   4. A basic tutorial for using org.antlr.Tool, ANTLRWorks.
   5. How to setup NetBeans to debug/step through at the source code level
   for both org.antlr.Tool and ANTLRWorks. This is not recommended but is
   documented because when you need it, it is nice to have.

If you do decide to help, I would ask that you take the time to work through
the instructions/tutorials in full which should take the better part of a
day or two. Since you will be building a virtual machine with VirtualBox,
you will need a machine that can spare at least 512 Meg for the virtual
machine.

Since I don't run a web server, I can only e-mail them to you.
Also, until they are correct and published, you cannot share them with
anyone. I don't want them indexed by a search engine and contributing more
invalid info to the Internet.


Sequence - Document -  Size

002 Preface 5,175,718

003 Install VirtualBox 1,487,708

004 VirtualBox Notes 360,220

005 Common VirtualBox Steps 2,902,846

006 Create Virtual Box virtual machine for Debian 6 (Squeeze) 866,391

007 Install Debian 6 (Squeeze) No GNOME 5,077,635

008 Install gnome-core on Debian 6 (Squeeze) 507,395

010 Common Debian Steps 17,321,468

013 Debian Notes 351,766

014 Debian - Personal Configuration 169,267

015 Install Java Development Kit (JDK) 1,416,777

017 Install Packaged Utilities 2,538,901

018 Install NFS 398,033

021 Install ZGRViewer 2,019,806

022 Install Maven 1,882,918

023 Install Scripts 26,823

025 Demonstration Grammars 550,802

030 Install ANTLR 3.4 267,009

032 ANTLR Tool - Reference Manual 14,366,470

033 Using ANTLR Tool - Expression Evaluator 1,083,546

035 ANTLR - Other command line tools 444,861

040 Install ANTLRWorks 1,965,279

042 ANTLRWorks Notes 2,176,458

045 ANTLRWorks - Reference Manual 29,571,591

046 Using ANTLRWorks 5,106,738

052 Create source directory 716,740

060 Install NetBeans 7.0.1 2,648,763

061 Debug ANTLR source with Netbeans 14,538,637


Thanks, Eric

From lizhipeng at gmail.com  Sat Oct 15 19:11:40 2011
From: lizhipeng at gmail.com (=?GB2312?B?wO7WvsX0?=)
Date: Sun, 16 Oct 2011 10:11:40 +0800
Subject: [antlr-interest] Something Wrong in Antlr3CSharpReleases 3.4?
In-Reply-To: <0d8f01cc8b5d$4cef91d0$e6ceb570$@pixelminegames.com>
References: <CACTOmx_BximoWLp5nHmeMWU9m1HqKF8mXA8DTVEBhsPbb7itHw@mail.gmail.com>
	<0d8f01cc8b5d$4cef91d0$e6ceb570$@pixelminegames.com>
Message-ID: <CACTOmx93h4cX7rjibKWde_OoBvaycFp4Ou71jZ92+hRsVHWhFA@mail.gmail.com>

thank sam

but

? 2011-10-16 ??1:10?"Sam Harwell" <sharwell at pixelminegames.com>???

Hello,

The CSharp3.pdf document you are using is old. All the links on antlr.org
should already be updated to point to the newer documentation on the
Antlr3CSharpReleases page. I suggest going through the updated document to
see if the problem gets resolved.

Thanks,
Sam

-----Original Message-----
From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-bounces at antlr.
org] On Behalf Of ???
Sent: Saturday, October 15, 2011 11:16 AM
To: antlr-interest at antlr.org
Subject: [antlr-interest] Something Wrong in Antlr3CSharpReleases 3.4?


Hello All

I'm a newbie in Antlr in C#

I start my study from http://www.antlr.org/download/CSharp3...
*------ Rebuild All started: Project: AntlrTest, Configuration: Debug x86
------*
*F:\antlr\AntlrTest\Reference\Antlr\Antlr3.targets(123,5): error AC1000:

Unknown build error: Exception has been thrown by the target of an
invocation.*
*========== Rebuild All: 0 succeeded, 1 failed, 0 skipped ==========*
*

*
Anyone Else come with the Same question? How to solve it?
List: http://www.antlr.org/mailman/listinfo/antlr-interest
Unsubscribe:
http://www.antlr.org/mailman/options/antlr-interest/your-email-address

From lizhipeng at gmail.com  Sat Oct 15 19:58:12 2011
From: lizhipeng at gmail.com (=?UTF-8?B?5p2O5b+X6bmP?=)
Date: Sun, 16 Oct 2011 10:58:12 +0800
Subject: [antlr-interest] Something Wrong in Antlr3CSharpReleases 3.4?
In-Reply-To: <CACTOmx9WVVuA=Xp4Q7tMr3Ud_-FbcwfjjdNb-X9noAUy4b9nrQ@mail.gmail.com>
References: <CACTOmx_BximoWLp5nHmeMWU9m1HqKF8mXA8DTVEBhsPbb7itHw@mail.gmail.com>
	<0d8f01cc8b5d$4cef91d0$e6ceb570$@pixelminegames.com>
	<CACTOmx9WVVuA=Xp4Q7tMr3Ud_-FbcwfjjdNb-X9noAUy4b9nrQ@mail.gmail.com>
Message-ID: <CACTOmx89p28VPj4vCeXOn2u3kVDo2gUnFkNxmPiyuoAQn1M63w@mail.gmail.com>

thank sam
but where can I find the latest document?
and any notes about difference in 3.4 3.3?

? 2011-10-16 ??1:10?"Sam Harwell" <sharwell at pixelminegames.com>???

Hello,

The CSharp3.pdf document you are using is old. All the links on antlr.org
should already be updated to point to the newer documentation on the
Antlr3CSharpReleases page. I suggest going through the updated document to
see if the problem gets resolved.

Thanks,
Sam

-----Original Message-----
From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-bounces at antlr.
org] On Behalf Of ???
Sent: Saturday, October 15, 2011 11:16 AM
To: antlr-interest at antlr.org
Subject: [antlr-interest] Something Wrong in Antlr3CSharpReleases 3.4?


Hello All

I'm a newbie in Antlr in C#

I start my study from http://www.antlr.org/download/CSharp3...
*------ Rebuild All started: Project: AntlrTest, Configuration: Debug x86
------*
*F:\antlr\AntlrTest\Reference\Antlr\Antlr3.targets(123,5): error AC1000:

Unknown build error: Exception has been thrown by the target of an
invocation.*
*========== Rebuild All: 0 succeeded, 1 failed, 0 skipped ==========*
*

*
Anyone Else come with the Same question? How to solve it?
List: http://www.antlr.org/mailman/listinfo/antlr-interest
Unsubscribe:
http://www.antlr.org/mailman/options/antlr-interest/your-email-address

From macolange at gmail.com  Sun Oct 16 15:53:12 2011
From: macolange at gmail.com (Maximilien Colange)
Date: Mon, 17 Oct 2011 00:53:12 +0200
Subject: [antlr-interest] Rewrite action causing error in parser?
In-Reply-To: <c64f45370daa6f84a516ac3548080590@mail.gmail.com>
References: <CAMtjaCAvZB1gHSMzp9bpfXNbC7dt+66-dvo0wwN8NyOQCzuY=w@mail.gmail.com>
	<c64f45370daa6f84a516ac3548080590@mail.gmail.com>
Message-ID: <4E9B6058.7090702@gmail.com>

It appears that this "bug" is frequently reported.
It would be nice if ANTLR raised an error (or a warning) when a token is 
given a reference in a syntactic predicate.

However, I do not know whether it is easy to detect. I already 
encountered this problem, and it occured in a "hidden" ANTLR-generated 
syntactic predicate. I am afraid the error is difficult to detect in 
such cases.

And just for curiosity, why is not it possible to reference local 
variables or to assign from token in a syntactic predicate ?

-- 
Maximilien

Le 10/15/11 11:34 PM, Jim Idle a ?crit :
> Your problem does not look to be the rewrite rule, but the fact that you
> are referencing a local variable in a predicate, or have tried to assign
> from a token in a predicate.
>
> Look for something like this
>
> ((id=IDENTIFIER)=>  id=IDENTIFIER)? ....
>
>
> But regardless, this is the rewrite rule that is the problem as far as I
> can see. Try commenting it out for instance.
>
> Jim
>
>> -----Original Message-----
>> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
>> bounces at antlr.org] On Behalf Of Ross Bamford
>> Sent: Saturday, October 15, 2011 5:40 AM
>> To: antlr-interest at antlr.org
>> Subject: [antlr-interest] Rewrite action causing error in parser?
>>
>> Hi all,
>>
>> I have a grammar I'm currently working on (posted in another thread the
>> other day), which has the following rule:
>>
>> meth_call_expr
>>    :   (id = IDENTIFIER DOT)? func_call_expr ->  ^(METHOD_CALL {
>> ($id==null) ?
>> adaptor.create(SELF, "SELF") : adaptor.create(IDENTIFIER,
>> $id.getText()) }
>> func_call_expr)
>>    ;
>>
>> As you can see, I'm using an action in the rewrite rule to insert
>> either the
>> (optional) IDENTIFIER, or an imaginary SELF node if IDENTIFIER is not
>> specified. The problem I'm having is that this generates a parser that
>> won't compile. Specifically, it generates the following bit of code
>> (edited by hand for brevity and to highlight the error):
>>
>> /* **** [ CODE ] **** */
>>      // $ANTLR start synpred6_BasicLang
>>      public final void synpred6_BasicLang_fragment() throws
>> RecognitionException {
>>
>>          Token =null; //<-- ERROR HERE
>>
>>          /* ... later on ... */
>>
>>          switch (alt23) {
>>              case 1 :
>>                  //
>> C:\\Users\\chantelle\\workspace\\basiclang\\src\\com\\roscopeco\\basicl
>> ang\\parser\\BasicLang.g:99:8:
>> id= IDENTIFIER DOT
>>                  {
>>
>> id=(Token)match(input,IDENTIFIER,FOLLOW_IDENTIFIER_in_synpred6_BasicLan
>> g232);
>> if (state.failed) return ; //<-- AND HERE
>>
>>                  match(input,DOT,FOLLOW_DOT_in_synpred6_BasicLang234);
>> if
>> (state.failed) return ;
>>
>>                  }
>>                  break;
>>
>>          }
>> /* **** [ END ] **** */
>>
>> Obviously the problem is the "Token =null" line, which should be "Token
>> id = null". Changing it by hand fixes the errors and makes the parser
>> work as expected.
>>
>> So I have two questions - is this the right way to go about inserting
>> an imaginary token if an optional token isn't in the input, and if so,
>> what am I doing wrong to cause the error above?
>>
>> Thanks in advance,
>> Ross
>>
>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
>> email-address
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address


From roscoml at gmail.com  Sun Oct 16 16:40:55 2011
From: roscoml at gmail.com (Ross Bamford)
Date: Mon, 17 Oct 2011 00:40:55 +0100
Subject: [antlr-interest] Rewrite action causing error in parser?
In-Reply-To: <4E9B6058.7090702@gmail.com>
References: <CAMtjaCAvZB1gHSMzp9bpfXNbC7dt+66-dvo0wwN8NyOQCzuY=w@mail.gmail.com>
	<c64f45370daa6f84a516ac3548080590@mail.gmail.com>
	<4E9B6058.7090702@gmail.com>
Message-ID: <CAMtjaCDt4Aas4vr63D_unLEbj-yBfs9YP9eSRgUHbMsHzDbz4w@mail.gmail.com>

Further investigation confirms that this does seem to crop up quite a bit,
which suggests I'm definitely doing something wrong. I'm just hoping that
someone might be able to suggest a different way to do what I need to do
(i.e. insert an imaginary token in place of the optional one if it's not
specified)?

Thanks,
Ross


On Sun, Oct 16, 2011 at 11:53 PM, Maximilien Colange <macolange at gmail.com>wrote:

> It appears that this "bug" is frequently reported.
> It would be nice if ANTLR raised an error (or a warning) when a token is
> given a reference in a syntactic predicate.
>
> However, I do not know whether it is easy to detect. I already
> encountered this problem, and it occured in a "hidden" ANTLR-generated
> syntactic predicate. I am afraid the error is difficult to detect in
> such cases.
>
> And just for curiosity, why is not it possible to reference local
> variables or to assign from token in a syntactic predicate ?
>
> --
> Maximilien
>
> Le 10/15/11 11:34 PM, Jim Idle a ?crit :
> > Your problem does not look to be the rewrite rule, but the fact that you
> > are referencing a local variable in a predicate, or have tried to assign
> > from a token in a predicate.
> >
> > Look for something like this
> >
> > ((id=IDENTIFIER)=>  id=IDENTIFIER)? ....
> >
> >
> > But regardless, this is the rewrite rule that is the problem as far as I
> > can see. Try commenting it out for instance.
> >
> > Jim
> >
> >> -----Original Message-----
> >> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> >> bounces at antlr.org] On Behalf Of Ross Bamford
> >> Sent: Saturday, October 15, 2011 5:40 AM
> >> To: antlr-interest at antlr.org
> >> Subject: [antlr-interest] Rewrite action causing error in parser?
> >>
> >> Hi all,
> >>
> >> I have a grammar I'm currently working on (posted in another thread the
> >> other day), which has the following rule:
> >>
> >> meth_call_expr
> >>    :   (id = IDENTIFIER DOT)? func_call_expr ->  ^(METHOD_CALL {
> >> ($id==null) ?
> >> adaptor.create(SELF, "SELF") : adaptor.create(IDENTIFIER,
> >> $id.getText()) }
> >> func_call_expr)
> >>    ;
> >>
> >> As you can see, I'm using an action in the rewrite rule to insert
> >> either the
> >> (optional) IDENTIFIER, or an imaginary SELF node if IDENTIFIER is not
> >> specified. The problem I'm having is that this generates a parser that
> >> won't compile. Specifically, it generates the following bit of code
> >> (edited by hand for brevity and to highlight the error):
> >>
> >> /* **** [ CODE ] **** */
> >>      // $ANTLR start synpred6_BasicLang
> >>      public final void synpred6_BasicLang_fragment() throws
> >> RecognitionException {
> >>
> >>          Token =null; //<-- ERROR HERE
> >>
> >>          /* ... later on ... */
> >>
> >>          switch (alt23) {
> >>              case 1 :
> >>                  //
> >> C:\\Users\\chantelle\\workspace\\basiclang\\src\\com\\roscopeco\\basicl
> >> ang\\parser\\BasicLang.g:99:8:
> >> id= IDENTIFIER DOT
> >>                  {
> >>
> >> id=(Token)match(input,IDENTIFIER,FOLLOW_IDENTIFIER_in_synpred6_BasicLan
> >> g232);
> >> if (state.failed) return ; //<-- AND HERE
> >>
> >>                  match(input,DOT,FOLLOW_DOT_in_synpred6_BasicLang234);
> >> if
> >> (state.failed) return ;
> >>
> >>                  }
> >>                  break;
> >>
> >>          }
> >> /* **** [ END ] **** */
> >>
> >> Obviously the problem is the "Token =null" line, which should be "Token
> >> id = null". Changing it by hand fixes the errors and makes the parser
> >> work as expected.
> >>
> >> So I have two questions - is this the right way to go about inserting
> >> an imaginary token if an optional token isn't in the input, and if so,
> >> what am I doing wrong to cause the error above?
> >>
> >> Thanks in advance,
> >> Ross
> >>
> >> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> >> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
> >> email-address
> > List: http://www.antlr.org/mailman/listinfo/antlr-interest
> > Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>

From douglasgodfrey at gmail.com  Sun Oct 16 19:21:38 2011
From: douglasgodfrey at gmail.com (Douglas Godfrey)
Date: Sun, 16 Oct 2011 22:21:38 -0400
Subject: [antlr-interest] Rewrite action causing error in parser?
In-Reply-To: <4E9B6058.7090702@gmail.com>
Message-ID: <CAC1085E.4C83%douglasgodfrey@gmail.com>

The reason why you cannot reference a local rule variable from a predicate
is because the predicate MAY be "hoisted" to a parent rule for lookahead.
This only happens for a predicate that occurs before the first token or
alternative selection. The predicate executes in the context of the parent
rule and does not have addressability to any local variables from the rule
where it was defined.

This situation should cause antlr to automatically suppress hoisting of
the affected predicate to a parent rule but it does not.




On 10/16/11 6:53 PM, "Maximilien Colange" <macolange at gmail.com> wrote:

>It appears that this "bug" is frequently reported.
>It would be nice if ANTLR raised an error (or a warning) when a token is
>given a reference in a syntactic predicate.
>
>However, I do not know whether it is easy to detect. I already
>encountered this problem, and it occured in a "hidden" ANTLR-generated
>syntactic predicate. I am afraid the error is difficult to detect in
>such cases.
>
>And just for curiosity, why is not it possible to reference local
>variables or to assign from token in a syntactic predicate ?
>
>-- 
>Maximilien
>
>Le 10/15/11 11:34 PM, Jim Idle a ?crit :
>> Your problem does not look to be the rewrite rule, but the fact that you
>> are referencing a local variable in a predicate, or have tried to assign
>> from a token in a predicate.
>>
>> Look for something like this
>>
>> ((id=IDENTIFIER)=>  id=IDENTIFIER)? ....
>>
>>
>> But regardless, this is the rewrite rule that is the problem as far as I
>> can see. Try commenting it out for instance.
>>
>> Jim
>>
>>> -----Original Message-----
>>> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
>>> bounces at antlr.org] On Behalf Of Ross Bamford
>>> Sent: Saturday, October 15, 2011 5:40 AM
>>> To: antlr-interest at antlr.org
>>> Subject: [antlr-interest] Rewrite action causing error in parser?
>>>
>>> Hi all,
>>>
>>> I have a grammar I'm currently working on (posted in another thread the
>>> other day), which has the following rule:
>>>
>>> meth_call_expr
>>>    :   (id = IDENTIFIER DOT)? func_call_expr ->  ^(METHOD_CALL {
>>> ($id==null) ?
>>> adaptor.create(SELF, "SELF") : adaptor.create(IDENTIFIER,
>>> $id.getText()) }
>>> func_call_expr)
>>>    ;
>>>
>>> As you can see, I'm using an action in the rewrite rule to insert
>>> either the
>>> (optional) IDENTIFIER, or an imaginary SELF node if IDENTIFIER is not
>>> specified. The problem I'm having is that this generates a parser that
>>> won't compile. Specifically, it generates the following bit of code
>>> (edited by hand for brevity and to highlight the error):
>>>
>>> /* **** [ CODE ] **** */
>>>      // $ANTLR start synpred6_BasicLang
>>>      public final void synpred6_BasicLang_fragment() throws
>>> RecognitionException {
>>>
>>>          Token =null; //<-- ERROR HERE
>>>
>>>          /* ... later on ... */
>>>
>>>          switch (alt23) {
>>>              case 1 :
>>>                  //
>>> C:\\Users\\chantelle\\workspace\\basiclang\\src\\com\\roscopeco\\basicl
>>> ang\\parser\\BasicLang.g:99:8:
>>> id= IDENTIFIER DOT
>>>                  {
>>>
>>> id=(Token)match(input,IDENTIFIER,FOLLOW_IDENTIFIER_in_synpred6_BasicLan
>>> g232);
>>> if (state.failed) return ; //<-- AND HERE
>>>
>>>                  match(input,DOT,FOLLOW_DOT_in_synpred6_BasicLang234);
>>> if
>>> (state.failed) return ;
>>>
>>>                  }
>>>                  break;
>>>
>>>          }
>>> /* **** [ END ] **** */
>>>
>>> Obviously the problem is the "Token =null" line, which should be "Token
>>> id = null". Changing it by hand fixes the errors and makes the parser
>>> work as expected.
>>>
>>> So I have two questions - is this the right way to go about inserting
>>> an imaginary token if an optional token isn't in the input, and if so,
>>> what am I doing wrong to cause the error above?
>>>
>>> Thanks in advance,
>>> Ross
>>>
>>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>>> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
>>> email-address
>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>> Unsubscribe: 
>>http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>
>
>List: http://www.antlr.org/mailman/listinfo/antlr-interest
>Unsubscribe: 
>http://www.antlr.org/mailman/options/antlr-interest/your-email-address



From bvarnai at gmail.com  Mon Oct 17 02:15:48 2011
From: bvarnai at gmail.com (Balazs Varnai)
Date: Mon, 17 Oct 2011 11:15:48 +0200
Subject: [antlr-interest] Lexer grammar for filtering
Message-ID: <CA+iZJ08ivucSBAzehykmPP0KiQrDQd05n6vPfP5vUZEjDqz2Hg@mail.gmail.com>

Hi All,

I have a simple grammar to collapse white-spaces and comment from a c source
code input. Also I would like to filter out some variables with a specific
name. These have a strict format, so no "real" C parsing needed.
Works fine but for example a line "#define PC_HASH_VALUE 1" is not
recognized. As far I remember from previous ANTLR usage, this was working
straight away. Any suggestions? Thanks!

/* **** [ CODE ] **** */
lexer grammar Collapse;

options {
  language = Java;
  filter = true;
}
@header {
package rewriter;
import java.util.*;
import java.io.*;

}

@members {
PrintStream out;

public Collapse(CharStream input, PrintStream out) {
    this(input);
    this.out = out;
}
}

PC: 'PC_HASH_VALUE' text=DIGIT {$channel=HIDDEN;};

fragment
DIGIT: '0'..'9';

COMMENT
    :   '//' ~('\n'|'\r')* '\r'? '\n' {$channel=HIDDEN;}
    |   '/*' ( options {greedy=false;} : . )* '*/' {$channel=HIDDEN;}
    ;

WS  :   ( ' '
        | '\t'
        | '\r'
        | '\n'
        ) {$channel=HIDDEN;}
    ;

ELSE : c=. {out.print((char)$c);} ; // match any char and emit
/* **** [ END ] **** */

From bkiers at gmail.com  Mon Oct 17 02:20:42 2011
From: bkiers at gmail.com (Bart Kiers)
Date: Mon, 17 Oct 2011 11:20:42 +0200
Subject: [antlr-interest] Lexer grammar for filtering
In-Reply-To: <CA+iZJ08ivucSBAzehykmPP0KiQrDQd05n6vPfP5vUZEjDqz2Hg@mail.gmail.com>
References: <CA+iZJ08ivucSBAzehykmPP0KiQrDQd05n6vPfP5vUZEjDqz2Hg@mail.gmail.com>
Message-ID: <CAOrgODar=A=YV7izvskM1BeLE_7J4o+OP2USf_=8V1xi95nrAw@mail.gmail.com>

Hi Balazs,

Since PC is not a parser rule, you need to account for the space(s) between
'PC_HASH_VALUE' and DIGIT.
And since you've set `filter=true`, you don't need a fall-through rule ELSE,
AFAIK.

Regards,

Bart.


On Mon, Oct 17, 2011 at 11:15 AM, Balazs Varnai <bvarnai at gmail.com> wrote:

> Hi All,
>
> I have a simple grammar to collapse white-spaces and comment from a c
> source
> code input. Also I would like to filter out some variables with a specific
> name. These have a strict format, so no "real" C parsing needed.
> Works fine but for example a line "#define PC_HASH_VALUE 1" is not
> recognized. As far I remember from previous ANTLR usage, this was working
> straight away. Any suggestions? Thanks!
>
> /* **** [ CODE ] **** */
> lexer grammar Collapse;
>
> options {
>  language = Java;
>  filter = true;
> }
> @header {
> package rewriter;
> import java.util.*;
> import java.io.*;
>
> }
>
> @members {
> PrintStream out;
>
> public Collapse(CharStream input, PrintStream out) {
>    this(input);
>    this.out = out;
> }
> }
>
> PC: 'PC_HASH_VALUE' text=DIGIT {$channel=HIDDEN;};
>
> fragment
> DIGIT: '0'..'9';
>
> COMMENT
>    :   '//' ~('\n'|'\r')* '\r'? '\n' {$channel=HIDDEN;}
>    |   '/*' ( options {greedy=false;} : . )* '*/' {$channel=HIDDEN;}
>    ;
>
> WS  :   ( ' '
>        | '\t'
>        | '\r'
>        | '\n'
>        ) {$channel=HIDDEN;}
>    ;
>
> ELSE : c=. {out.print((char)$c);} ; // match any char and emit
> /* **** [ END ] **** */
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>

From bvarnai at gmail.com  Mon Oct 17 02:34:05 2011
From: bvarnai at gmail.com (Balazs Varnai)
Date: Mon, 17 Oct 2011 11:34:05 +0200
Subject: [antlr-interest] Lexer grammar for filtering
In-Reply-To: <CAOrgODar=A=YV7izvskM1BeLE_7J4o+OP2USf_=8V1xi95nrAw@mail.gmail.com>
References: <CA+iZJ08ivucSBAzehykmPP0KiQrDQd05n6vPfP5vUZEjDqz2Hg@mail.gmail.com>
	<CAOrgODar=A=YV7izvskM1BeLE_7J4o+OP2USf_=8V1xi95nrAw@mail.gmail.com>
Message-ID: <CA+iZJ0_yuDZkg_rTHDAjsftYmo4neDvdUcJsu6gV2c92QkW6uQ@mail.gmail.com>

Hi Bart,

Thanks! Adding a WS* solved the problem.
I use the ELSE because it's kind of reverse filter, I specify what to
exclude from input to output.

Regards,
Balazs

On Mon, Oct 17, 2011 at 11:20 AM, Bart Kiers <bkiers at gmail.com> wrote:

> Hi Balazs,
>
> Since PC is not a parser rule, you need to account for the space(s) between
> 'PC_HASH_VALUE' and DIGIT.
> And since you've set `filter=true`, you don't need a fall-through rule
> ELSE, AFAIK.
>
> Regards,
>
> Bart.
>
>
> On Mon, Oct 17, 2011 at 11:15 AM, Balazs Varnai <bvarnai at gmail.com> wrote:
>
>> Hi All,
>>
>> I have a simple grammar to collapse white-spaces and comment from a c
>> source
>> code input. Also I would like to filter out some variables with a specific
>> name. These have a strict format, so no "real" C parsing needed.
>> Works fine but for example a line "#define PC_HASH_VALUE 1" is not
>> recognized. As far I remember from previous ANTLR usage, this was working
>> straight away. Any suggestions? Thanks!
>>
>> /* **** [ CODE ] **** */
>> lexer grammar Collapse;
>>
>> options {
>>  language = Java;
>>  filter = true;
>> }
>> @header {
>> package rewriter;
>> import java.util.*;
>> import java.io.*;
>>
>> }
>>
>> @members {
>> PrintStream out;
>>
>> public Collapse(CharStream input, PrintStream out) {
>>    this(input);
>>    this.out = out;
>> }
>> }
>>
>> PC: 'PC_HASH_VALUE' text=DIGIT {$channel=HIDDEN;};
>>
>> fragment
>> DIGIT: '0'..'9';
>>
>> COMMENT
>>    :   '//' ~('\n'|'\r')* '\r'? '\n' {$channel=HIDDEN;}
>>    |   '/*' ( options {greedy=false;} : . )* '*/' {$channel=HIDDEN;}
>>    ;
>>
>> WS  :   ( ' '
>>        | '\t'
>>        | '\r'
>>        | '\n'
>>        ) {$channel=HIDDEN;}
>>    ;
>>
>> ELSE : c=. {out.print((char)$c);} ; // match any char and emit
>> /* **** [ END ] **** */
>>
>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>> Unsubscribe:
>> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>>
>
>

From jimi at temporal-wave.com  Mon Oct 17 16:27:12 2011
From: jimi at temporal-wave.com (Jim Idle)
Date: Mon, 17 Oct 2011 16:27:12 -0700
Subject: [antlr-interest] Rewrite action causing error in parser?
In-Reply-To: <CAMtjaCDt4Aas4vr63D_unLEbj-yBfs9YP9eSRgUHbMsHzDbz4w@mail.gmail.com>
References: <CAMtjaCAvZB1gHSMzp9bpfXNbC7dt+66-dvo0wwN8NyOQCzuY=w@mail.gmail.com>
	<c64f45370daa6f84a516ac3548080590@mail.gmail.com>	<4E9B6058.7090702@gmail.com>
	<CAMtjaCDt4Aas4vr63D_unLEbj-yBfs9YP9eSRgUHbMsHzDbz4w@mail.gmail.com>
Message-ID: <1865af2192284e7affb72c2385415d23@mail.gmail.com>

x
@init {Boolean isPresent = false;}
:
  (A { isPresent = true; })? B

	-> {isPresent}? ^(A B)
     -> ^(IMAGINE B)
;

Jim

> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of Ross Bamford
> Sent: Sunday, October 16, 2011 4:41 PM
> To: Maximilien Colange
> Cc: antlr-interest at antlr.org
> Subject: Re: [antlr-interest] Rewrite action causing error in parser?
>
> Further investigation confirms that this does seem to crop up quite a
> bit, which suggests I'm definitely doing something wrong. I'm just
> hoping that someone might be able to suggest a different way to do what
> I need to do (i.e. insert an imaginary token in place of the optional
> one if it's not specified)?
>
> Thanks,
> Ross
>
>
> On Sun, Oct 16, 2011 at 11:53 PM, Maximilien Colange
> <macolange at gmail.com>wrote:
>
> > It appears that this "bug" is frequently reported.
> > It would be nice if ANTLR raised an error (or a warning) when a token
> > is given a reference in a syntactic predicate.
> >
> > However, I do not know whether it is easy to detect. I already
> > encountered this problem, and it occured in a "hidden" ANTLR-
> generated
> > syntactic predicate. I am afraid the error is difficult to detect in
> > such cases.
> >
> > And just for curiosity, why is not it possible to reference local
> > variables or to assign from token in a syntactic predicate ?
> >
> > --
> > Maximilien
> >
> > Le 10/15/11 11:34 PM, Jim Idle a ?crit :
> > > Your problem does not look to be the rewrite rule, but the fact
> that
> > > you are referencing a local variable in a predicate, or have tried
> > > to assign from a token in a predicate.
> > >
> > > Look for something like this
> > >
> > > ((id=IDENTIFIER)=>  id=IDENTIFIER)? ....
> > >
> > >
> > > But regardless, this is the rewrite rule that is the problem as far
> > > as I can see. Try commenting it out for instance.
> > >
> > > Jim
> > >
> > >> -----Original Message-----
> > >> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> > >> bounces at antlr.org] On Behalf Of Ross Bamford
> > >> Sent: Saturday, October 15, 2011 5:40 AM
> > >> To: antlr-interest at antlr.org
> > >> Subject: [antlr-interest] Rewrite action causing error in parser?
> > >>
> > >> Hi all,
> > >>
> > >> I have a grammar I'm currently working on (posted in another
> thread
> > >> the other day), which has the following rule:
> > >>
> > >> meth_call_expr
> > >>    :   (id = IDENTIFIER DOT)? func_call_expr ->  ^(METHOD_CALL {
> > >> ($id==null) ?
> > >> adaptor.create(SELF, "SELF") : adaptor.create(IDENTIFIER,
> > >> $id.getText()) }
> > >> func_call_expr)
> > >>    ;
> > >>
> > >> As you can see, I'm using an action in the rewrite rule to insert
> > >> either the
> > >> (optional) IDENTIFIER, or an imaginary SELF node if IDENTIFIER is
> > >> not specified. The problem I'm having is that this generates a
> > >> parser that won't compile. Specifically, it generates the
> following
> > >> bit of code (edited by hand for brevity and to highlight the
> error):
> > >>
> > >> /* **** [ CODE ] **** */
> > >>      // $ANTLR start synpred6_BasicLang
> > >>      public final void synpred6_BasicLang_fragment() throws
> > >> RecognitionException {
> > >>
> > >>          Token =null; //<-- ERROR HERE
> > >>
> > >>          /* ... later on ... */
> > >>
> > >>          switch (alt23) {
> > >>              case 1 :
> > >>                  //
> > >>
> C:\\Users\\chantelle\\workspace\\basiclang\\src\\com\\roscopeco\\ba
> > >> sicl
> > >> ang\\parser\\BasicLang.g:99:8:
> > >> id= IDENTIFIER DOT
> > >>                  {
> > >>
> > >>
> id=(Token)match(input,IDENTIFIER,FOLLOW_IDENTIFIER_in_synpred6_Basi
> > >> cLan
> > >> g232);
> > >> if (state.failed) return ; //<-- AND HERE
> > >>
> > >>
> > >> match(input,DOT,FOLLOW_DOT_in_synpred6_BasicLang234);
> > >> if
> > >> (state.failed) return ;
> > >>
> > >>                  }
> > >>                  break;
> > >>
> > >>          }
> > >> /* **** [ END ] **** */
> > >>
> > >> Obviously the problem is the "Token =null" line, which should be
> > >> "Token id = null". Changing it by hand fixes the errors and makes
> > >> the parser work as expected.
> > >>
> > >> So I have two questions - is this the right way to go about
> > >> inserting an imaginary token if an optional token isn't in the
> > >> input, and if so, what am I doing wrong to cause the error above?
> > >>
> > >> Thanks in advance,
> > >> Ross
> > >>
> > >> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> > >> Unsubscribe:
> > >> http://www.antlr.org/mailman/options/antlr-interest/your-
> > >> email-address
> > > List: http://www.antlr.org/mailman/listinfo/antlr-interest
> > > Unsubscribe:
> > http://www.antlr.org/mailman/options/antlr-interest/your-email-
> address
> >
> >
> > List: http://www.antlr.org/mailman/listinfo/antlr-interest
> > Unsubscribe:
> > http://www.antlr.org/mailman/options/antlr-interest/your-email-
> address
> >
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
> email-address

From weissig at rbg.informatik.tu-darmstadt.de  Tue Oct 18 00:10:39 2011
From: weissig at rbg.informatik.tu-darmstadt.de (=?ISO-8859-15?Q?Yves_Wei=DFig?=)
Date: Tue, 18 Oct 2011 09:10:39 +0200
Subject: [antlr-interest] Beginner needing help with rewrite rules
Message-ID: <4E9D266F.9020704@rbg.informatik.tu-darmstadt.de>

Hi ANTLR list,
I'm using ANTLR within my master's thesis in order to parse the RTF file
format. Everything is fine so far, I can parse simple RTF documents. The
next step is to generate an AST. Here is where the problems start, it
seems as if I have an error in one of my rewrite-rules. If you look at
the grammar, what I want to do, is nest the groups. This means, a
"group" is child of a "group" if the subrule group in the rule group is
called: sg=group space* -> ^(GROUP $sg+). Maybe you try the grammar
using a simple RTF snippet, e.g.
  {\pard\fs32\b NOTES\par}
  {\pard\fs26 Recently I skimmed {\i Structure and Interpretation of
   Computer Programs}, by Sussman and Abelson, and I think there should
   have been more pictures.
  \line I like pictures.  Is that so na\'efve?
  \par}
from: http://search.cpan.org/~sburke/RTF-Writer/lib/RTF/Cookbook.pod
Do you have any comments or ideas what I'm doing wrong?
Best regards, Yves
-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: RtfParser.g
Url: http://www.antlr.org/pipermail/antlr-interest/attachments/20111018/3e62d5bf/attachment.pl 
-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: RtfLexer.g
Url: http://www.antlr.org/pipermail/antlr-interest/attachments/20111018/3e62d5bf/attachment-0001.pl 

From roscoml at gmail.com  Tue Oct 18 02:48:10 2011
From: roscoml at gmail.com (Ross Bamford)
Date: Tue, 18 Oct 2011 10:48:10 +0100
Subject: [antlr-interest] Rewrite action causing error in parser?
In-Reply-To: <1865af2192284e7affb72c2385415d23@mail.gmail.com>
References: <CAMtjaCAvZB1gHSMzp9bpfXNbC7dt+66-dvo0wwN8NyOQCzuY=w@mail.gmail.com>
	<c64f45370daa6f84a516ac3548080590@mail.gmail.com>
	<4E9B6058.7090702@gmail.com>
	<CAMtjaCDt4Aas4vr63D_unLEbj-yBfs9YP9eSRgUHbMsHzDbz4w@mail.gmail.com>
	<1865af2192284e7affb72c2385415d23@mail.gmail.com>
Message-ID: <CAMtjaCCyF0j2+CSO+P-ujkCs1RrY3+pS2P1yjynS2bDjB99xdQ@mail.gmail.com>

Works like a charm! Thanks Jim :)


On Tue, Oct 18, 2011 at 12:27 AM, Jim Idle <jimi at temporal-wave.com> wrote:

> x
> @init {Boolean isPresent = false;}
> :
>  (A { isPresent = true; })? B
>
>        -> {isPresent}? ^(A B)
>     -> ^(IMAGINE B)
> ;
>
> Jim
>
> > -----Original Message-----
> > From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> > bounces at antlr.org] On Behalf Of Ross Bamford
> > Sent: Sunday, October 16, 2011 4:41 PM
> > To: Maximilien Colange
> > Cc: antlr-interest at antlr.org
> > Subject: Re: [antlr-interest] Rewrite action causing error in parser?
> >
> > Further investigation confirms that this does seem to crop up quite a
> > bit, which suggests I'm definitely doing something wrong. I'm just
> > hoping that someone might be able to suggest a different way to do what
> > I need to do (i.e. insert an imaginary token in place of the optional
> > one if it's not specified)?
> >
> > Thanks,
> > Ross
> >
> >
> > On Sun, Oct 16, 2011 at 11:53 PM, Maximilien Colange
> > <macolange at gmail.com>wrote:
> >
> > > It appears that this "bug" is frequently reported.
> > > It would be nice if ANTLR raised an error (or a warning) when a token
> > > is given a reference in a syntactic predicate.
> > >
> > > However, I do not know whether it is easy to detect. I already
> > > encountered this problem, and it occured in a "hidden" ANTLR-
> > generated
> > > syntactic predicate. I am afraid the error is difficult to detect in
> > > such cases.
> > >
> > > And just for curiosity, why is not it possible to reference local
> > > variables or to assign from token in a syntactic predicate ?
> > >
> > > --
> > > Maximilien
> > >
> > > Le 10/15/11 11:34 PM, Jim Idle a ?crit :
> > > > Your problem does not look to be the rewrite rule, but the fact
> > that
> > > > you are referencing a local variable in a predicate, or have tried
> > > > to assign from a token in a predicate.
> > > >
> > > > Look for something like this
> > > >
> > > > ((id=IDENTIFIER)=>  id=IDENTIFIER)? ....
> > > >
> > > >
> > > > But regardless, this is the rewrite rule that is the problem as far
> > > > as I can see. Try commenting it out for instance.
> > > >
> > > > Jim
> > > >
> > > >> -----Original Message-----
> > > >> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> > > >> bounces at antlr.org] On Behalf Of Ross Bamford
> > > >> Sent: Saturday, October 15, 2011 5:40 AM
> > > >> To: antlr-interest at antlr.org
> > > >> Subject: [antlr-interest] Rewrite action causing error in parser?
> > > >>
> > > >> Hi all,
> > > >>
> > > >> I have a grammar I'm currently working on (posted in another
> > thread
> > > >> the other day), which has the following rule:
> > > >>
> > > >> meth_call_expr
> > > >>    :   (id = IDENTIFIER DOT)? func_call_expr ->  ^(METHOD_CALL {
> > > >> ($id==null) ?
> > > >> adaptor.create(SELF, "SELF") : adaptor.create(IDENTIFIER,
> > > >> $id.getText()) }
> > > >> func_call_expr)
> > > >>    ;
> > > >>
> > > >> As you can see, I'm using an action in the rewrite rule to insert
> > > >> either the
> > > >> (optional) IDENTIFIER, or an imaginary SELF node if IDENTIFIER is
> > > >> not specified. The problem I'm having is that this generates a
> > > >> parser that won't compile. Specifically, it generates the
> > following
> > > >> bit of code (edited by hand for brevity and to highlight the
> > error):
> > > >>
> > > >> /* **** [ CODE ] **** */
> > > >>      // $ANTLR start synpred6_BasicLang
> > > >>      public final void synpred6_BasicLang_fragment() throws
> > > >> RecognitionException {
> > > >>
> > > >>          Token =null; //<-- ERROR HERE
> > > >>
> > > >>          /* ... later on ... */
> > > >>
> > > >>          switch (alt23) {
> > > >>              case 1 :
> > > >>                  //
> > > >>
> > C:\\Users\\chantelle\\workspace\\basiclang\\src\\com\\roscopeco\\ba
> > > >> sicl
> > > >> ang\\parser\\BasicLang.g:99:8:
> > > >> id= IDENTIFIER DOT
> > > >>                  {
> > > >>
> > > >>
> > id=(Token)match(input,IDENTIFIER,FOLLOW_IDENTIFIER_in_synpred6_Basi
> > > >> cLan
> > > >> g232);
> > > >> if (state.failed) return ; //<-- AND HERE
> > > >>
> > > >>
> > > >> match(input,DOT,FOLLOW_DOT_in_synpred6_BasicLang234);
> > > >> if
> > > >> (state.failed) return ;
> > > >>
> > > >>                  }
> > > >>                  break;
> > > >>
> > > >>          }
> > > >> /* **** [ END ] **** */
> > > >>
> > > >> Obviously the problem is the "Token =null" line, which should be
> > > >> "Token id = null". Changing it by hand fixes the errors and makes
> > > >> the parser work as expected.
> > > >>
> > > >> So I have two questions - is this the right way to go about
> > > >> inserting an imaginary token if an optional token isn't in the
> > > >> input, and if so, what am I doing wrong to cause the error above?
> > > >>
> > > >> Thanks in advance,
> > > >> Ross
> > > >>
> > > >> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> > > >> Unsubscribe:
> > > >> http://www.antlr.org/mailman/options/antlr-interest/your-
> > > >> email-address
> > > > List: http://www.antlr.org/mailman/listinfo/antlr-interest
> > > > Unsubscribe:
> > > http://www.antlr.org/mailman/options/antlr-interest/your-email-
> > address
> > >
> > >
> > > List: http://www.antlr.org/mailman/listinfo/antlr-interest
> > > Unsubscribe:
> > > http://www.antlr.org/mailman/options/antlr-interest/your-email-
> > address
> > >
> >
> > List: http://www.antlr.org/mailman/listinfo/antlr-interest
> > Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
> > email-address
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>

From ramponjerome at yahoo.fr  Tue Oct 18 06:08:59 2011
From: ramponjerome at yahoo.fr (Rampon Jerome)
Date: Tue, 18 Oct 2011 14:08:59 +0100 (BST)
Subject: [antlr-interest] lexer mode controlled in grammar rules ?
Message-ID: <1318943339.50070.YahooMailNeo@web24705.mail.ird.yahoo.com>




Hi,


I noticed in the following link

http://www.antlr.org/wiki/display/ANTLR3/1.+Lexer
the possibility to use lexer modes (controlled in the example via the boolean tagMode settings in lexer rules)

Is there one way to switch the lexer mode at grammar rule level or is it only possible at lexer level ?
Apparently @members declarations are not shared in both lexer and parser?
and? lexer::members, parser::members declaration are dedicated to the lexer for the 1st one, 

and the parser for 2nd one


One way to do it if not via @members ?

Thanks

Jerome

From researcher0x00 at gmail.com  Tue Oct 18 08:04:20 2011
From: researcher0x00 at gmail.com (Eric)
Date: Tue, 18 Oct 2011 11:04:20 -0400
Subject: [antlr-interest] lexer mode controlled in grammar rules ?
In-Reply-To: <1318943339.50070.YahooMailNeo@web24705.mail.ird.yahoo.com>
References: <1318943339.50070.YahooMailNeo@web24705.mail.ird.yahoo.com>
Message-ID: <CAN45N10+TE9GtTanjXYktO_zq02PJbye_YfyO01XpXdii0yVrg@mail.gmail.com>

On Tue, Oct 18, 2011 at 9:08 AM, Rampon Jerome <ramponjerome at yahoo.fr>wrote:

>
>
>
> Hi,
>
>
> I noticed in the following link
>
> http://www.antlr.org/wiki/display/ANTLR3/1.+Lexer
> the possibility to use lexer modes (controlled in the example via the
> boolean tagMode settings in lexer rules)
>
> Is there one way to switch the lexer mode at grammar rule level or is it
> only possible at lexer level ?
>

The parser also supports gated semantic predicates.While you may find more
info about gated semantic predicates by using http://antlr.markmail.org/ and
searching on "gated semantic predicate", if you are serious about using
ANTLR, I would strongly suggest you buy
http://pragprog.com/book/tpantlr/the-definitive-antlr-reference The book has
the most accurate info on the subject less reading the source code.



> Apparently @members declarations are not shared in both lexer and parser
> and  lexer::members, parser::members declaration are dedicated to the lexer
> for the 1st one,
>
> and the parser for 2nd one
>

See: http://www.antlr.org/wiki/pages/viewpage.action?pageId=4882470

The lexer runs first and creates a list of tokens. Then the parser is feed
the list of tokens created by the lexer. The parser does not communicate
with the lexer.



>
>
> One way to do it if not via @members ?
>
> Thanks
>
> Jerome
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>
>
>
Hope this helps, Eric

From jimi at temporal-wave.com  Tue Oct 18 14:11:06 2011
From: jimi at temporal-wave.com (Jim Idle)
Date: Tue, 18 Oct 2011 14:11:06 -0700
Subject: [antlr-interest] Beginner needing help with rewrite rules
In-Reply-To: <4E9D266F.9020704@rbg.informatik.tu-darmstadt.de>
References: <4E9D266F.9020704@rbg.informatik.tu-darmstadt.de>
Message-ID: <8c94f51788d9027f8a3c6e09931684f1@mail.gmail.com>

Looks like you need:

group		:	(OPEN
				space*
				(
				sg=group space* |
				p=plaintext space* |
				((c1=command)+ space) |
				(e=escape) space*
				)+
				((c2=command)+)?
			CLOSE) -> ^(GROUP ^(GROUP $sg)* $p+ $c1+ $e+ $c2+)

At a rough guess.


Jim


> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of Yves Wei?ig
> Sent: Tuesday, October 18, 2011 12:11 AM
> To: antlr-interest at antlr.org
> Subject: [antlr-interest] Beginner needing help with rewrite rules
>
> Hi ANTLR list,
> I'm using ANTLR within my master's thesis in order to parse the RTF
> file format. Everything is fine so far, I can parse simple RTF
> documents. The next step is to generate an AST. Here is where the
> problems start, it seems as if I have an error in one of my rewrite-
> rules. If you look at the grammar, what I want to do, is nest the
> groups. This means, a "group" is child of a "group" if the subrule
> group in the rule group is
> called: sg=group space* -> ^(GROUP $sg+). Maybe you try the grammar
> using a simple RTF snippet, e.g.
>   {\pard\fs32\b NOTES\par}
>   {\pard\fs26 Recently I skimmed {\i Structure and Interpretation of
>    Computer Programs}, by Sussman and Abelson, and I think there should
>    have been more pictures.
>   \line I like pictures.  Is that so na\'efve?
>   \par}
> from: http://search.cpan.org/~sburke/RTF-Writer/lib/RTF/Cookbook.pod
> Do you have any comments or ideas what I'm doing wrong?
> Best regards, Yves

From ramponjerome at yahoo.fr  Tue Oct 18 15:07:01 2011
From: ramponjerome at yahoo.fr (Rampon Jerome)
Date: Tue, 18 Oct 2011 23:07:01 +0100 (BST)
Subject: [antlr-interest] Re :  lexer mode controlled in grammar rules ?
In-Reply-To: <CAN45N10+TE9GtTanjXYktO_zq02PJbye_YfyO01XpXdii0yVrg@mail.gmail.com>
References: <1318943339.50070.YahooMailNeo@web24705.mail.ird.yahoo.com>
	<CAN45N10+TE9GtTanjXYktO_zq02PJbye_YfyO01XpXdii0yVrg@mail.gmail.com>
Message-ID: <1318975621.24165.YahooMailNeo@web24712.mail.ird.yahoo.com>




Hi Eric,


Thank you for your answer.
As long as lexer & parser can not apparently interact, I will use some semantic gate predicate.

My goal was to simplify some contextual checking and avoid lexical conflicts with some local rules control
in various places of my grammar.


For ex, with your response, I will use sth like:

a1:?? bool_var '=' init_val;

...

init_val:?? nb=NUMBER;
{$nb.text == "0" || $nb.text == "1" }?
NUMBER: ('0'..'9')+

Originally, I wanted to switch a lexer mode at begin/end of init_val?
and use a specific lexer rule BOOL_VALUE to avoid lexical conflicts
with NUMBER? ('0'..'9')+ for ex
sth like
init_val:??? {fullNb=false;} BOOL_NB {fullNb=true;}


BOOL_VALUE: {!fullNb}? ('0'|'1')
NUMBER: {fullNb}? ('0'..'9')+
Apparently, no way, right ?
Here, '0' or '1' is a simple test in init_val but

my grammar have some more complex init_val set for ex conflicting with NUMBER (more complex
than simple 0..9+ and would have been nice to have a specific lexer rule for it to minimize context checking ;-( 

Regards

Jerome



________________________________
De?: Eric <researcher0x00 at gmail.com>
??: Rampon Jerome <ramponjerome at yahoo.fr>; ANTLR interest <antlr-interest at antlr.org>
Envoy? le : Mardi 18 Octobre 2011 17h04
Objet?: Re: [antlr-interest] lexer mode controlled in grammar rules ?





On Tue, Oct 18, 2011 at 9:08 AM, Rampon Jerome <ramponjerome at yahoo.fr> wrote:


>
>
>Hi,
>
>
>I noticed in the following link
>
>http://www.antlr.org/wiki/display/ANTLR3/1.+Lexer
>the possibility to use lexer modes (controlled in the example via the boolean tagMode settings in lexer rules)
>
>Is there one way to switch the lexer mode at grammar rule level or is it only possible at lexer level ?
>
?
The parser also supports gated semantic predicates.While you may?find more info about gated semantic predicates by using http://antlr.markmail.org/?and searching?on "gated semantic predicate", if you are serious about using ANTLR, I would strongly suggest you buy http://pragprog.com/book/tpantlr/the-definitive-antlr-reference?The book has the most accurate info on the subject less reading the source code.
?
?
Apparently @members declarations are not shared in both lexer and parser?
>and? lexer::members, parser::members declaration are dedicated to the lexer for the 1st one,
>
>and the parser for 2nd one
>
?
See: http://www.antlr.org/wiki/pages/viewpage.action?pageId=4882470
?
The lexer?runs first and creates a list of tokens. Then the parser is feed the list of tokens created by the lexer. The parser does not communicate with the lexer. 
?
?

>
>One way to do it if not via @members ?
>
>Thanks
>
>Jerome
>
>List: http://www.antlr.org/mailman/listinfo/antlr-interest
>Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>
>?
Hope this helps, Eric

From jjtapia at gmail.com  Tue Oct 18 16:06:09 2011
From: jjtapia at gmail.com (Jose Juan Tapia)
Date: Tue, 18 Oct 2011 19:06:09 -0400
Subject: [antlr-interest] Conditional grammar
Message-ID: <CAPQEofYyKNdijTy6Y354YWNxd=YRCYfv2ruz1eR88N3WHvWOYA@mail.gmail.com>

How can make it so that certain parts of my grammar are only executed when a
certain condition is met. For example,

method1:
(myCondtion? INT) STRING;


method1 would require that INT STRING if myCondition evaluates to true. And
only STRING otherwise. I know I've seen this
somewhere in the ANTLR reference but for the life of me I can't find it
again. And all my google searches through the newsgroup leads to conditional
tree rewrite or something similar.


-- 
Jos? Juan Tapia Valenzuela
Research Associate
University of Pittsburgh
3076.1 Biological Sciences Tower 3
Pittsburgh, Pa 15260

From jimi at temporal-wave.com  Tue Oct 18 16:07:29 2011
From: jimi at temporal-wave.com (Jim Idle)
Date: Tue, 18 Oct 2011 16:07:29 -0700
Subject: [antlr-interest] Conditional grammar
In-Reply-To: <CAPQEofYyKNdijTy6Y354YWNxd=YRCYfv2ruz1eR88N3WHvWOYA@mail.gmail.com>
References: <CAPQEofYyKNdijTy6Y354YWNxd=YRCYfv2ruz1eR88N3WHvWOYA@mail.gmail.com>
Message-ID: <ffe6ab0bccd01e28d686fb41283bcea5@mail.gmail.com>

Gated semantic predicates.

Jim

> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of Jose Juan Tapia
> Sent: Tuesday, October 18, 2011 4:06 PM
> To: antlr-interest at antlr.org
> Subject: [antlr-interest] Conditional grammar
>
> How can make it so that certain parts of my grammar are only executed
> when a certain condition is met. For example,
>
> method1:
> (myCondtion? INT) STRING;
>
>
> method1 would require that INT STRING if myCondition evaluates to true.
> And only STRING otherwise. I know I've seen this somewhere in the ANTLR
> reference but for the life of me I can't find it again. And all my
> google searches through the newsgroup leads to conditional tree rewrite
> or something similar.
>
>
> --
> Jos? Juan Tapia Valenzuela
> Research Associate
> University of Pittsburgh
> 3076.1 Biological Sciences Tower 3
> Pittsburgh, Pa 15260
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
> email-address

From jjtapia at gmail.com  Tue Oct 18 16:09:34 2011
From: jjtapia at gmail.com (Jose Juan Tapia)
Date: Tue, 18 Oct 2011 19:09:34 -0400
Subject: [antlr-interest] Conditional grammar
In-Reply-To: <ffe6ab0bccd01e28d686fb41283bcea5@mail.gmail.com>
References: <CAPQEofYyKNdijTy6Y354YWNxd=YRCYfv2ruz1eR88N3WHvWOYA@mail.gmail.com>
	<ffe6ab0bccd01e28d686fb41283bcea5@mail.gmail.com>
Message-ID: <CAPQEofYpsY2LkAW+iiP4-NYjw+O+yXFxWg9M_UUJkdzj17bb6g@mail.gmail.com>

Thank you. That was it. I had tried this option but I hadn't realized you
explicitly have to provide the alternative grammar when your condition is
not satisfied.


On Tue, Oct 18, 2011 at 7:07 PM, Jim Idle <jimi at temporal-wave.com> wrote:

> Gated semantic predicates.
>
> Jim
>
> > -----Original Message-----
> > From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> > bounces at antlr.org] On Behalf Of Jose Juan Tapia
> > Sent: Tuesday, October 18, 2011 4:06 PM
> > To: antlr-interest at antlr.org
> > Subject: [antlr-interest] Conditional grammar
> >
> > How can make it so that certain parts of my grammar are only executed
> > when a certain condition is met. For example,
> >
> > method1:
> > (myCondtion? INT) STRING;
> >
> >
> > method1 would require that INT STRING if myCondition evaluates to true.
> > And only STRING otherwise. I know I've seen this somewhere in the ANTLR
> > reference but for the life of me I can't find it again. And all my
> > google searches through the newsgroup leads to conditional tree rewrite
> > or something similar.
> >
> >
> > --
> > Jos? Juan Tapia Valenzuela
> > Research Associate
> > University of Pittsburgh
> > 3076.1 Biological Sciences Tower 3
> > Pittsburgh, Pa 15260
> >
> > List: http://www.antlr.org/mailman/listinfo/antlr-interest
> > Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
> > email-address
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>



-- 
Jos? Juan Tapia Valenzuela
Research Associate
University of Pittsburgh
3076.1 Biological Sciences Tower 3
Pittsburgh, Pa 15260

From andy.voelkel at plantronics.com  Tue Oct 18 17:10:28 2011
From: andy.voelkel at plantronics.com (Voelkel, Andy)
Date: Wed, 19 Oct 2011 00:10:28 +0000
Subject: [antlr-interest] This learning curve is getting me down (error
 messages using examples) NEWBIE NEEDS HELP
Message-ID: <92E9AB4D42199B4793CE24E094BAEE070D0290@USSCMB03.plt.plantronics.com>

Hi,
After getting quite excited reading through the first few chapters of Language Implementation Patterns", I decided it was worth an investment of time on my part.
So I've been fighting my way through getting the latest version of Antlr working with Visual Studio 2010. I'm having all sorts of problems, such as configuration and tutorial documentation being spread all over the place and with various vintages. Nonetheless, I've finally managed to get a simple grammar working using the instructions here:
www.antlr.org/depot/antlrcs/.../ANTLRCSharpDocumentation.docx<http://www.antlr.org/depot/antlrcs/.../ANTLRCSharpDocumentation.docx>
However, when I tried something a little more involved (still very simple), using the treeparser example code for target Csharp2 (god only knows where I found that, I can't seem to retrace my steps).
First I got an error that was eliminated when I commented out the use of HIDDEN:
WS : (' '|'\n') /*{$channel=HIDDEN;}*/ ;
Now I'm getting an error caused by Console.Out.WriteLine, presumably because the generated code does not contain a "using" reference to System, and I don't know how to put that in a grammar file.
decl : ^(DECL type declarator)
       // label.start, label.start, label.text
       {Console.Out.WriteLine("int "+$declarator.text);}
     ;
How normal are these sorts of startup problems? Are the examples generally not working in this way? And how much will it help to get the Definitive Guide To ANTLR? Will ANTLRworks flag problems like this, which are presumably specific to the C#/.NET platform?
And while I'm at it, once I'm done with this, will I easily be able to get ANTLR to put line and column numbers from my source files into the nodes in ASTs that I build? That's important to me.
THANKS FOR ANY HELP!

-          Andy


________________________________

CONFIDENTIALITY NOTICE: This e-mail transmission, and any documents, files or previous e-mail messages attached to it, may contain information that is confidential and/or legally privileged. If you are not the intended recipient, or a person responsible for delivering it to the intended recipient, please DO NOT disclose the contents to another person, store or copy the information in any medium, or use any of the information contained in or attached to this transmission for any purpose. If you have received this transmission in error, please immediately notify the sender by reply email or at privacy at plantronics.com, and destroy the original transmission and its attachments without reading or saving in any manner.

For further information about Plantronics - the Company, its products, brands, partners, please visit our website www.plantronics.com.

From Norman at dunbar-it.co.uk  Wed Oct 19 00:39:14 2011
From: Norman at dunbar-it.co.uk (Norman Dunbar)
Date: Wed, 19 Oct 2011 08:39:14 +0100
Subject: [antlr-interest] This learning curve is getting me down (error
 messages using examples) NEWBIE NEEDS HELP
In-Reply-To: <92E9AB4D42199B4793CE24E094BAEE070D0290@USSCMB03.plt.plantronics.com>
References: <92E9AB4D42199B4793CE24E094BAEE070D0290@USSCMB03.plt.plantronics.com>
Message-ID: <4E9E7EA2.7010500@dunbar-it.co.uk>

Morning Andy,

> After getting quite excited reading through the first few chapters of Language Implementation Patterns",
Possibly, just possibly, not the best book to start with. Ask me how I know!

 > ...

> How normal are these sorts of startup problems? Are the examples generally not working in this way?
I'd say pretty normal. I suspect you, like me, are not a computer 
science student (or graduate) and so, "compiler" writing is for fun. So 
we are on the back foot from the start.

Equally, as with any half decent system, regardless of what it is, 
documentation is occasionally out of date, or plain wrong, of whatever. 
It's a chore to find something that is decent, current and works. :-)

I had a very similar problem when I started using DocBook for document 
production. I spend ages trying and failing to find anything good enough 
to use for an absolute beginner.

Talking of which, is CSharp a good place to start as a beginner? 
Probably not. Start simple - try building the calculator example from 
the ALTLR website (and in the book as I remember).

When you get that working, try adding on the divide ability (I seem to 
remember that it was a three function calculator - add, subtract, 
multiply but no divide!).

Then build a small "language" to do something equally as simple, and 
then you can build on it. It's the old saying "walk before you run".

 > And how much will it help to get the Definitive Guide To ANTLR?
A lot! This is the book I think you should have started with. I got mine 
from the Book Depository (via Amazon.co.uk) and I'm working my way 
through it for the first time, before I start doing anything.

Also, are you using ANTLRworks? I would if I was you! You can see how 
your grammer will work, or not!

> Will ANTLRworks flag problems like this, which are presumably specific to the C#/.NET platform?
I imagine it will, yes.

> And while I'm at it, once I'm done with this, will I easily be able to get ANTLR to put line and column numbers from my source files into the nodes in ASTs that I build? That's important to me.
I seem to remember reading in the Definitive Guide, that this is 
possible. From the footnote on page 44:

You can put anything you want into the token structure. ANTLR?s default 
CommonToken objects include start/stop indexes into the character 
buffer, the line number, and the token?s character position within that
line, among other things.


Good luck.

-- 
Norman Dunbar
Dunbar IT Consultants Ltd

Registered address:
Thorpe House
61 Richardshaw Lane
Pudsey
West Yorkshire
United Kingdom
LS28 7EL

Company Number: 05132767

From weissig at rbg.informatik.tu-darmstadt.de  Wed Oct 19 02:52:08 2011
From: weissig at rbg.informatik.tu-darmstadt.de (=?UTF-8?B?WXZlcyBXZWnDn2ln?=)
Date: Wed, 19 Oct 2011 11:52:08 +0200
Subject: [antlr-interest] Beginner needing help with rewrite rules
In-Reply-To: <8c94f51788d9027f8a3c6e09931684f1@mail.gmail.com>
References: <4E9D266F.9020704@rbg.informatik.tu-darmstadt.de>
	<8c94f51788d9027f8a3c6e09931684f1@mail.gmail.com>
Message-ID: <4E9E9DC8.2000700@rbg.informatik.tu-darmstadt.de>

Hi!

Thanks for the answers!
That was a good rough guess Jim... I finally came up with this:

group		:	(OPEN
				children+=space*
				(
				children+=group children+=space* |
				children+=plaintext children+=space* |
				children+=command children+=space* |
				children+=escape children+=space*
				)+
			CLOSE) -> ^(GROUP $children*) ;

Works like a charme, subgroups are created automatically... I had to add
everything to "children" because I need to remain the order of the elements.

Thanks again!

Yves

Am 18.10.2011 23:11, schrieb Jim Idle:
> Looks like you need:
> 
> group		:	(OPEN
> 				space*
> 				(
> 				sg=group space* |
> 				p=plaintext space* |
> 				((c1=command)+ space) |
> 				(e=escape) space*
> 				)+
> 				((c2=command)+)?
> 			CLOSE) -> ^(GROUP ^(GROUP $sg)* $p+ $c1+ $e+ $c2+)
> 
> At a rough guess.
> 
> 
> Jim
> 
> 
>> -----Original Message-----
>> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
>> bounces at antlr.org] On Behalf Of Yves Wei?ig
>> Sent: Tuesday, October 18, 2011 12:11 AM
>> To: antlr-interest at antlr.org
>> Subject: [antlr-interest] Beginner needing help with rewrite rules
>>
>> Hi ANTLR list,
>> I'm using ANTLR within my master's thesis in order to parse the RTF
>> file format. Everything is fine so far, I can parse simple RTF
>> documents. The next step is to generate an AST. Here is where the
>> problems start, it seems as if I have an error in one of my rewrite-
>> rules. If you look at the grammar, what I want to do, is nest the
>> groups. This means, a "group" is child of a "group" if the subrule
>> group in the rule group is
>> called: sg=group space* -> ^(GROUP $sg+). Maybe you try the grammar
>> using a simple RTF snippet, e.g.
>>   {\pard\fs32\b NOTES\par}
>>   {\pard\fs26 Recently I skimmed {\i Structure and Interpretation of
>>    Computer Programs}, by Sussman and Abelson, and I think there should
>>    have been more pictures.
>>   \line I like pictures.  Is that so na\'efve?
>>   \par}
>> from: http://search.cpan.org/~sburke/RTF-Writer/lib/RTF/Cookbook.pod
>> Do you have any comments or ideas what I'm doing wrong?
>> Best regards, Yves
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address

From chwchw at gmx.de  Wed Oct 19 05:39:40 2011
From: chwchw at gmx.de (Christian)
Date: Wed, 19 Oct 2011 14:39:40 +0200
Subject: [antlr-interest] Rewriting a list of tokens to a list of custom
	tokens
In-Reply-To: <4E9DF7F0.9040504@gmx.de>
References: <4E9DF7F0.9040504@gmx.de>
Message-ID: <4E9EC50C.30904@gmx.de>

Hello ANTLR community,

I want to get

    t+='void' (t+='*')*

to a list of a custom token type, say TYPE. That is, each element/token
of the list should change its original type to the type TYPE.
The following approach does not work because invalid java code is generated:

    t+='void' (t+='*')* -> ^(TYPE[$t]+)

The following implicit list generation works fine, however each element
retains its original type:

    t+='void' (t+='*')* -> ^($t+)

Can anyone tell me, whether and how this could be done?

Thanks in advance,
Christian

From andy.voelkel at plantronics.com  Wed Oct 19 07:21:12 2011
From: andy.voelkel at plantronics.com (Voelkel, Andy)
Date: Wed, 19 Oct 2011 14:21:12 +0000
Subject: [antlr-interest] How viable is the Csharp3 target?
Message-ID: <92E9AB4D42199B4793CE24E094BAEE070D03E2@USSCMB03.plt.plantronics.com>

Hi,



I wrote a post yesterday about the trouble I'm having getting started with ANTLR. Overnight, I thought about it some more, and I'm becoming convinced that the latest problems I'm having are either problems with the Csharp target or backwards compatibility problems between ANTRL example code and the CSharp target. I have now purchase "the definitive guide", and I can work through examples using the Java based tools. But I do need the generated code to ultimately be in C# and to work.



If the Csharp target are actively developed and "supported" here, then I can use ANTLR for my project(s) and spread the technology around my workplace. Otherwise, I'll have to go back building simpler parser by hand :-( I sure hope that that is not the case.



I'm willing to contribute to shaking down the target, contributing and cleaning up example code, and write installation help for newbies.



- Andy

________________________________

CONFIDENTIALITY NOTICE: This e-mail transmission, and any documents, files or previous e-mail messages attached to it, may contain information that is confidential and/or legally privileged. If you are not the intended recipient, or a person responsible for delivering it to the intended recipient, please DO NOT disclose the contents to another person, store or copy the information in any medium, or use any of the information contained in or attached to this transmission for any purpose. If you have received this transmission in error, please immediately notify the sender by reply email or at privacy at plantronics.com, and destroy the original transmission and its attachments without reading or saving in any manner.

For further information about Plantronics - the Company, its products, brands, partners, please visit our website www.plantronics.com.

From contact at maik-schmidt.de  Wed Oct 19 07:36:14 2011
From: contact at maik-schmidt.de (pragmaik)
Date: Wed, 19 Oct 2011 07:36:14 -0700 (PDT)
Subject: [antlr-interest] How viable is the Csharp3 target?
In-Reply-To: <92E9AB4D42199B4793CE24E094BAEE070D03E2@USSCMB03.plt.plantronics.com>
References: <92E9AB4D42199B4793CE24E094BAEE070D03E2@USSCMB03.plt.plantronics.com>
Message-ID: <1319034974453-6908949.post@n2.nabble.com>

Hi Andy!

I am using ANTLR's C# target for a couple of weeks now to create a domain
specific language that is a subset of the C programming language.

My experience is similar to yours, but I can assure you that the C# target
works and that it is actively maintained. It differs from the Java target in
a few places, but it works.

The biggest problem is finding documentation. I've both of Terence Parr's
books on my desk and the folks on this mailing list are very friendly and
competent.

Cheers,
Maik


--
View this message in context: http://antlr.1301665.n2.nabble.com/How-viable-is-the-Csharp3-target-tp6908890p6908949.html
Sent from the ANTLR mailing list archive at Nabble.com.

From lizhipeng at gmail.com  Wed Oct 19 07:48:30 2011
From: lizhipeng at gmail.com (=?UTF-8?B?5p2O5b+X6bmP?=)
Date: Wed, 19 Oct 2011 22:48:30 +0800
Subject: [antlr-interest] How viable is the Csharp3 target?
In-Reply-To: <1319034974453-6908949.post@n2.nabble.com>
References: <92E9AB4D42199B4793CE24E094BAEE070D03E2@USSCMB03.plt.plantronics.com>
	<1319034974453-6908949.post@n2.nabble.com>
Message-ID: <CACTOmx_RkzRP-GMj2Cms1z7KNNTQKx4eY0LkcUTT329OSPFVsw@mail.gmail.com>

which version c# runtime do you use? 3.4 or 3.3? download from official
website?

i am newbie, want to build simple project could run an example, but two
weeks passed, i failed?

? 2011-10-19 ??10:36?"pragmaik" <contact at maik-schmidt.de>???

Hi Andy!

I am using ANTLR's C# target for a couple of weeks now to create a domain
specific language that is a subset of the C programming language.

My experience is similar to yours, but I can assure you that the C# target
works and that it is actively maintained. It differs from the Java target in
a few places, but it works.

The biggest problem is finding documentation. I've both of Terence Parr's
books on my desk and the folks on this mailing list are very friendly and
competent.

Cheers,
Maik


--
View this message in context:
http://antlr.1301665.n2.nabble.com/How-viable-is-the-Csharp3-target-tp6908890p6908949.html
Sent from the ANTLR mailing list archive at Nabble.com.


List: http://www.antlr.org/mailman/listinfo/antlr-interest
Unsubscribe: http://www.antlr.org/mailma...

From sharwell at pixelminegames.com  Wed Oct 19 07:59:20 2011
From: sharwell at pixelminegames.com (Sam Harwell)
Date: Wed, 19 Oct 2011 09:59:20 -0500
Subject: [antlr-interest] How viable is the Csharp3 target?
In-Reply-To: <1319034974453-6908949.post@n2.nabble.com>
References: <92E9AB4D42199B4793CE24E094BAEE070D03E2@USSCMB03.plt.plantronics.com>
	<1319034974453-6908949.post@n2.nabble.com>
Message-ID: <0f5001cc8e6f$aef94eb0$0cebec10$@pixelminegames.com>

Hi Andy & Maik,

I agree that the C# target documentation is lacking in many ways. I try to
keep enough documentation at the following page to get you started on the
right path:
http://www.antlr.org/wiki/display/ANTLR3/Antlr3CSharpReleases

I've been using the CSharp3 target in a commercial product for 3 years now.
At this point, most of the remaining the issues I have with it are
basic/technical limitations of ANTLR 3 that will hopefully be resolved in
later versions.

Sam

-----Original Message-----
From: antlr-interest-bounces at antlr.org
[mailto:antlr-interest-bounces at antlr.org] On Behalf Of pragmaik
Sent: Wednesday, October 19, 2011 9:36 AM
To: antlr-interest at antlr.org
Subject: Re: [antlr-interest] How viable is the Csharp3 target?

Hi Andy!

I am using ANTLR's C# target for a couple of weeks now to create a domain
specific language that is a subset of the C programming language.

My experience is similar to yours, but I can assure you that the C# target
works and that it is actively maintained. It differs from the Java target in
a few places, but it works.

The biggest problem is finding documentation. I've both of Terence Parr's
books on my desk and the folks on this mailing list are very friendly and
competent.

Cheers,
Maik


--
View this message in context:
http://antlr.1301665.n2.nabble.com/How-viable-is-the-Csharp3-target-tp690889
0p6908949.html
Sent from the ANTLR mailing list archive at Nabble.com.

List: http://www.antlr.org/mailman/listinfo/antlr-interest
Unsubscribe:
http://www.antlr.org/mailman/options/antlr-interest/your-email-address


From kcherr1 at tigers.lsu.edu  Wed Oct 19 08:12:50 2011
From: kcherr1 at tigers.lsu.edu (Kevin Cherry)
Date: Wed, 19 Oct 2011 10:12:50 -0500
Subject: [antlr-interest] How viable is the Csharp3 target?
In-Reply-To: <0f5001cc8e6f$aef94eb0$0cebec10$@pixelminegames.com>
References: <92E9AB4D42199B4793CE24E094BAEE070D03E2@USSCMB03.plt.plantronics.com>
	<1319034974453-6908949.post@n2.nabble.com>
	<0f5001cc8e6f$aef94eb0$0cebec10$@pixelminegames.com>
Message-ID: <CAD_pYmk4t8vxkAAR8xuJJi_SBHw2iFCsYCEndTxfhYp4HA=66Q@mail.gmail.com>

I kind of got turned off when CSharp3 target was first introduced and the
code template had bugs in it. For example, at the end it would print out a
single line comment with the keyword namespace and the name of the namespace
(i.e. // namespace foo). The problem was somebody put a newline after the
"//" and so "namespace foo" was taken in as code and caused even simple
grammars to generate syntactically incorrect code. This wasn't the only bug.
I basically had to modify the code template, but good luck trying to figure
out how to do that and still use Antlrworks. I basically used 7zip to unzip
the Antlrworks.jar file, locate the csharp code template, change it, then
use java to archive it back into a jar and run it. I will say, though, that
I enjoy now knowing how to control other aspects of the generated code (like
the visibility of the class, which really should just be an antlr option
considering how dead simple it would be to implement (but I'll leave that
alone)). Anyway, if you are having any issues with the generated code, try
the above approach to get Antlrworks to use your own modified template.

On Wed, Oct 19, 2011 at 9:59 AM, Sam Harwell <sharwell at pixelminegames.com>wrote:

> Hi Andy & Maik,
>
> I agree that the C# target documentation is lacking in many ways. I try to
> keep enough documentation at the following page to get you started on the
> right path:
> http://www.antlr.org/wiki/display/ANTLR3/Antlr3CSharpReleases
>
> I've been using the CSharp3 target in a commercial product for 3 years now.
> At this point, most of the remaining the issues I have with it are
> basic/technical limitations of ANTLR 3 that will hopefully be resolved in
> later versions.
>
> Sam
>
> -----Original Message-----
> From: antlr-interest-bounces at antlr.org
> [mailto:antlr-interest-bounces at antlr.org] On Behalf Of pragmaik
> Sent: Wednesday, October 19, 2011 9:36 AM
> To: antlr-interest at antlr.org
> Subject: Re: [antlr-interest] How viable is the Csharp3 target?
>
> Hi Andy!
>
> I am using ANTLR's C# target for a couple of weeks now to create a domain
> specific language that is a subset of the C programming language.
>
> My experience is similar to yours, but I can assure you that the C# target
> works and that it is actively maintained. It differs from the Java target
> in
> a few places, but it works.
>
> The biggest problem is finding documentation. I've both of Terence Parr's
> books on my desk and the folks on this mailing list are very friendly and
> competent.
>
> Cheers,
> Maik
>
>
> --
> View this message in context:
>
> http://antlr.1301665.n2.nabble.com/How-viable-is-the-Csharp3-target-tp690889
> 0p6908949.html
> Sent from the ANTLR mailing list archive at Nabble.com.
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>

From Norman at dunbar-it.co.uk  Wed Oct 19 08:22:59 2011
From: Norman at dunbar-it.co.uk (Norman Dunbar)
Date: Wed, 19 Oct 2011 16:22:59 +0100
Subject: [antlr-interest] This learning curve is getting me down (error
 messages using examples) NEWBIE NEEDS HELP
In-Reply-To: <4E9E7EA2.7010500@dunbar-it.co.uk>
References: <92E9AB4D42199B4793CE24E094BAEE070D0290@USSCMB03.plt.plantronics.com>
	<4E9E7EA2.7010500@dunbar-it.co.uk>
Message-ID: <4E9EEB53.3040102@dunbar-it.co.uk>

Afternoon Andy,

On 19/10/11 08:39, Norman Dunbar wrote:

 > ...
> Talking of which, is CSharp a good place to start as a beginner?
Sigh! Wish I could read.

When you wrote "using the treeparser example code for target Csharp2" I 
missed the word "target" and thought that you were playing with a 
grammar for the whole of the Csharp2 language.

Apologies.


Cheers,
Norm.

-- 
Norman Dunbar
Dunbar IT Consultants Ltd

Registered address:
Thorpe House
61 Richardshaw Lane
Pudsey
West Yorkshire
United Kingdom
LS28 7EL

Company Number: 05132767

From jimi at temporal-wave.com  Wed Oct 19 08:40:51 2011
From: jimi at temporal-wave.com (Jim Idle)
Date: Wed, 19 Oct 2011 08:40:51 -0700
Subject: [antlr-interest] Rewriting a list of tokens to a list of custom
	tokens
In-Reply-To: <4E9EC50C.30904@gmx.de>
References: <4E9DF7F0.9040504@gmx.de> <4E9EC50C.30904@gmx.de>
Message-ID: <fbfbedb88933732815fef4b46a906639@mail.gmail.com>

t1+='void' (t2+='*')* -> ^(LIST TYPE[$t1]+ TYPE[$t2]+)

By interpolating from your question. At least, that should get you on the
right track.


Jim

> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of Christian
> Sent: Wednesday, October 19, 2011 5:40 AM
> To: antlr-interest at antlr.org
> Subject: [antlr-interest] Rewriting a list of tokens to a list of
> custom tokens
>
> Hello ANTLR community,
>
> I want to get
>
>     t+='void' (t+='*')*
>
> to a list of a custom token type, say TYPE. That is, each element/token
> of the list should change its original type to the type TYPE.
> The following approach does not work because invalid java code is
> generated:
>
>     t+='void' (t+='*')* -> ^(TYPE[$t]+)
>
> The following implicit list generation works fine, however each element
> retains its original type:
>
>     t+='void' (t+='*')* -> ^($t+)
>
> Can anyone tell me, whether and how this could be done?
>
> Thanks in advance,
> Christian
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
> email-address

From jimi at temporal-wave.com  Wed Oct 19 08:44:57 2011
From: jimi at temporal-wave.com (Jim Idle)
Date: Wed, 19 Oct 2011 08:44:57 -0700
Subject: [antlr-interest] How viable is the Csharp3 target?
In-Reply-To: <0f5001cc8e6f$aef94eb0$0cebec10$@pixelminegames.com>
References: <92E9AB4D42199B4793CE24E094BAEE070D03E2@USSCMB03.plt.plantronics.com>
	<1319034974453-6908949.post@n2.nabble.com>
	<0f5001cc8e6f$aef94eb0$0cebec10$@pixelminegames.com>
Message-ID: <796d49f7741e94f12ff569dce3f675cc@mail.gmail.com>

I can confirm that the Csharp3 target is very viable and works perfectly
well. I think that your problems are more to do with being new to ANTLR
and then trying to use the CSharp target as your first try. If you used
the Java target purely inside ANTLRWorks just until you get going, then
you will be able to see where you are going wrong in the VS2010 vs where
your grammar is incorrect.


Jim

> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of Sam Harwell
> Sent: Wednesday, October 19, 2011 7:59 AM
> To: 'pragmaik'; antlr-interest at antlr.org
> Subject: Re: [antlr-interest] How viable is the Csharp3 target?
>
> Hi Andy & Maik,
>
> I agree that the C# target documentation is lacking in many ways. I try
> to keep enough documentation at the following page to get you started
> on the right path:
> http://www.antlr.org/wiki/display/ANTLR3/Antlr3CSharpReleases
>
> I've been using the CSharp3 target in a commercial product for 3 years
> now.
> At this point, most of the remaining the issues I have with it are
> basic/technical limitations of ANTLR 3 that will hopefully be resolved
> in later versions.
>
> Sam
>
> -----Original Message-----
> From: antlr-interest-bounces at antlr.org
> [mailto:antlr-interest-bounces at antlr.org] On Behalf Of pragmaik
> Sent: Wednesday, October 19, 2011 9:36 AM
> To: antlr-interest at antlr.org
> Subject: Re: [antlr-interest] How viable is the Csharp3 target?
>
> Hi Andy!
>
> I am using ANTLR's C# target for a couple of weeks now to create a
> domain specific language that is a subset of the C programming
> language.
>
> My experience is similar to yours, but I can assure you that the C#
> target works and that it is actively maintained. It differs from the
> Java target in a few places, but it works.
>
> The biggest problem is finding documentation. I've both of Terence
> Parr's books on my desk and the folks on this mailing list are very
> friendly and competent.
>
> Cheers,
> Maik
>
>
> --
> View this message in context:
> http://antlr.1301665.n2.nabble.com/How-viable-is-the-Csharp3-target-
> tp690889
> 0p6908949.html
> Sent from the ANTLR mailing list archive at Nabble.com.
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
> email-address

From peedee.nick at gmail.com  Wed Oct 19 08:51:53 2011
From: peedee.nick at gmail.com (Patrick Nick)
Date: Wed, 19 Oct 2011 17:51:53 +0200
Subject: [antlr-interest] Matching an arbitrary string until the next
	whitespace occurrence
In-Reply-To: <CAH+7_B39eRiRRmeCaOkRPf57EwYEsp4jQEieqAyBA118pA=+NA@mail.gmail.com>
References: <mailman.292.1319009996.3141.antlr-interest@antlr.org>
	<CAH+7_B1Le9GyCPgXpth-sSwQqH8K8XvQxM=XPbOu4eOT87r6iw@mail.gmail.com>
	<B4ED2FA0-6094-4D95-A970-FCE6B47773F2@cs.usfca.edu>
	<CAH+7_B39eRiRRmeCaOkRPf57EwYEsp4jQEieqAyBA118pA=+NA@mail.gmail.com>
Message-ID: <CAH+7_B3KJcCk73FTknRcmfCnKtPuu3w-1J96N3ybr7DsYoP1Gg@mail.gmail.com>

Hi all,

I just started using antlr and was able to construct a nice grammar that
fulfills my application's needs. There is one thing which I haven't been
able to get to work though.
My grammar is parsing program arguments which the user supplied when
starting the program, and some of that input will need to be forwarded to
another program. This implies that I have almost no control over those
strings and need to be able to parse them only knowing that they are
delimited by whitespace. So what I need (I think) is a lexer rule to match
an arbitrary string which doesn't contain whitespace.

Here is what I tried, with the intention that it should match anything that
doesn't contain one of the four characters.

STRING :    (~(' '|'\t'|'\r'|'\n'))+ ;

However, that does not seem to be working, it doesn't recognize numbers for
example, and I don't understand why.
Any hints?

Regards
Patrick

From jimi at temporal-wave.com  Wed Oct 19 09:16:53 2011
From: jimi at temporal-wave.com (Jim Idle)
Date: Wed, 19 Oct 2011 09:16:53 -0700
Subject: [antlr-interest] Matching an arbitrary string until the next
 whitespace occurrence
In-Reply-To: <CAH+7_B3KJcCk73FTknRcmfCnKtPuu3w-1J96N3ybr7DsYoP1Gg@mail.gmail.com>
References: <mailman.292.1319009996.3141.antlr-interest@antlr.org>
	<CAH+7_B1Le9GyCPgXpth-sSwQqH8K8XvQxM=XPbOu4eOT87r6iw@mail.gmail.com>
	<B4ED2FA0-6094-4D95-A970-FCE6B47773F2@cs.usfca.edu>	<CAH+7_B39eRiRRmeCaOkRPf57EwYEsp4jQEieqAyBA118pA=+NA@mail.gmail.com>
	<CAH+7_B3KJcCk73FTknRcmfCnKtPuu3w-1J96N3ybr7DsYoP1Gg@mail.gmail.com>
Message-ID: <22394e141b2955e506427e6173ddf6fc@mail.gmail.com>

I suggest that you want to use getargs, and not try to parse things like
this with ANTLR as the specification is too vague. The lexer is not
context driven, so placing a rule like that in lexer will match everything
that is whitespace to the detriment of any other rule at all.


Jim


> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of Patrick Nick
> Sent: Wednesday, October 19, 2011 8:52 AM
> To: antlr-interest at antlr.org
> Subject: [antlr-interest] Matching an arbitrary string until the next
> whitespace occurrence
>
> Hi all,
>
> I just started using antlr and was able to construct a nice grammar
> that fulfills my application's needs. There is one thing which I
> haven't been able to get to work though.
> My grammar is parsing program arguments which the user supplied when
> starting the program, and some of that input will need to be forwarded
> to another program. This implies that I have almost no control over
> those strings and need to be able to parse them only knowing that they
> are delimited by whitespace. So what I need (I think) is a lexer rule
> to match an arbitrary string which doesn't contain whitespace.
>
> Here is what I tried, with the intention that it should match anything
> that doesn't contain one of the four characters.
>
> STRING :    (~(' '|'\t'|'\r'|'\n'))+ ;
>
> However, that does not seem to be working, it doesn't recognize numbers
> for example, and I don't understand why.
> Any hints?
>
> Regards
> Patrick
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
> email-address

From andy.voelkel at plantronics.com  Wed Oct 19 11:25:39 2011
From: andy.voelkel at plantronics.com (Voelkel, Andy)
Date: Wed, 19 Oct 2011 18:25:39 +0000
Subject: [antlr-interest] How viable is the Csharp3 target? (more
 specific questions)
Message-ID: <92E9AB4D42199B4793CE24E094BAEE070D05C3@USSCMB03.plt.plantronics.com>

Hi,



First, thanks for the encouragement. Knowing there are active users out there makes all the difference.



I've now taken the first example from "the definitive ANTLR reference" and tried to get it to work, first using the Visual Studio Extensions and templates, and then also manually running the ANTLR3.exe file at the command line, just to verify that my problems are in the generated code and are not errors generated during the generation of code (since the Visual Studio Extensions and associated instructions seem to produce projects that both generate code and then build it).



So my grammar is this simple:



grammar Lexer1;



options {

    language=CSharp3;

}



/** Match things like "call foo;" */

r : 'call' ID ';' {System.out.println("invoke "+$ID.text);} ;

ID: 'a'..'z'+ ;

WS: (' '|'\n'|'\r')+   {$channel=HIDDEN;} ; // ignore whitespace



When I compile the code generated by ANTLR3, I get these errors:


K:\Plantronics\Development Sandbox\AntlrTest\AntlrTest\obj\x86\Debug\Lexer1Parser.cs(28,2): warning CS3021: 'Lexer1Parser' does not need a CLSCompliant attribute because the assembly does not have a CLSCompliant attribute
K:\Plantronics\Development Sandbox\AntlrTest\AntlrTest\obj\x86\Debug\Lexer1Parser.cs(86,11): error CS1041: Identifier expected; 'out' is a keyword
K:\Plantronics\Development Sandbox\AntlrTest\AntlrTest\obj\x86\Debug\Lexer1Parser.cs(86,11): error CS1525: Invalid expression term 'out'
K:\Plantronics\Development Sandbox\AntlrTest\AntlrTest\obj\x86\Debug\Lexer1Lexer.cs(28,2): warning CS3021: 'Lexer1Lexer' does not need a CLSCompliant attribute because the assembly does not have a CLSCompliant attribute
K:\Plantronics\Development Sandbox\AntlrTest\AntlrTest\obj\x86\Debug\Lexer1Lexer.cs(276,13): error CS0103: The name 'HIDDEN' does not exist in the current context



The errors regarding "System.out" make sense, that seems like a call to a Java function that does not exist in C#. However the error with HIDDEN is confusing to me, and it is the result of sub a basic construct ({$channel=HIDDEN:};). I can't imagine what I am doing wrong to cause this, and since it is the first example pulled out of the book, you would think it would work!



Can someone help me here? I'm gaining confidence, but I'm having trouble even walking before I can run!



Oh, also: What are the files Antlr3.Targets.CSharp2.dll and Antlr3.Targets.CSharp3.dll for?



-          Andy





-----Original Message-----
From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-bounces at antlr.org] On Behalf Of Sam Harwell
Sent: Wednesday, October 19, 2011 7:59 AM
To: 'pragmaik'; antlr-interest at antlr.org
Subject: Re: [antlr-interest] How viable is the Csharp3 target?



Hi Andy & Maik,



I agree that the C# target documentation is lacking in many ways. I try to keep enough documentation at the following page to get you started on the right path:

http://www.antlr.org/wiki/display/ANTLR3/Antlr3CSharpReleases



I've been using the CSharp3 target in a commercial product for 3 years now.

At this point, most of the remaining the issues I have with it are basic/technical limitations of ANTLR 3 that will hopefully be resolved in later versions.



Sam



-----Original Message-----

From: antlr-interest-bounces at antlr.org<mailto:antlr-interest-bounces at antlr.org>

[mailto:antlr-interest-bounces at antlr.org]<mailto:[mailto:antlr-interest-bounces at antlr.org]> On Behalf Of pragmaik

Sent: Wednesday, October 19, 2011 9:36 AM

To: antlr-interest at antlr.org<mailto:antlr-interest at antlr.org>

Subject: Re: [antlr-interest] How viable is the Csharp3 target?



Hi Andy!



I am using ANTLR's C# target for a couple of weeks now to create a domain specific language that is a subset of the C programming language.



My experience is similar to yours, but I can assure you that the C# target works and that it is actively maintained. It differs from the Java target in a few places, but it works.



The biggest problem is finding documentation. I've both of Terence Parr's books on my desk and the folks on this mailing list are very friendly and competent.



Cheers,

Maik





--

View this message in context:

http://antlr.1301665.n2.nabble.com/How-viable-is-the-Csharp3-target-tp690889

0p6908949.html

Sent from the ANTLR mailing list archive at Nabble.com.



List: http://www.antlr.org/mailman/listinfo/antlr-interest

Unsubscribe:

http://www.antlr.org/mailman/options/antlr-interest/your-email-address





List: http://www.antlr.org/mailman/listinfo/antlr-interest

Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address



________________________________

CONFIDENTIALITY NOTICE: This e-mail transmission, and any documents, files or previous e-mail messages attached to it, may contain information that is confidential and/or legally privileged. If you are not the intended recipient, or a person responsible for delivering it to the intended recipient, please DO NOT disclose the contents to another person, store or copy the information in any medium, or use any of the information contained in or attached to this transmission for any purpose. If you have received this transmission in error, please immediately notify the sender by reply email or at privacy at plantronics.com, and destroy the original transmission and its attachments without reading or saving in any manner.

For further information about Plantronics - the Company, its products, brands, partners, please visit our website www.plantronics.com.

From jmurray at aerotech.com  Wed Oct 19 11:31:40 2011
From: jmurray at aerotech.com (Justin Murray)
Date: Wed, 19 Oct 2011 14:31:40 -0400
Subject: [antlr-interest] How viable is the Csharp3 target? (more
	specific questions)
In-Reply-To: <92E9AB4D42199B4793CE24E094BAEE070D05C3@USSCMB03.plt.plantronics.com>
References: <92E9AB4D42199B4793CE24E094BAEE070D05C3@USSCMB03.plt.plantronics.com>
Message-ID: <6B458D23F5D4A24ABCDB3C78EA97393B02AFFE4C@EXCH-VIRTUAL.aerotechad.com>

Try using Console.WriteLine() instead of System.out.println(). What is 
inside of the curly braces is directly injected into the C# code being 
generated, and therefore needs to be C# syntax, not Java.

- Justin

On 10/19/2011 2:25 PM, Voelkel, Andy wrote:
> Hi,
>
>
>
> First, thanks for the encouragement. Knowing there are active users out there makes all the difference.
>
>
>
> I've now taken the first example from "the definitive ANTLR reference" and tried to get it to work, first using the Visual Studio Extensions and templates, and then also manually running the ANTLR3.exe file at the command line, just to verify that my problems are in the generated code and are not errors generated during the generation of code (since the Visual Studio Extensions and associated instructions seem to produce projects that both generate code and then build it).
>
>
>
> So my grammar is this simple:
>
>
>
> grammar Lexer1;
>
>
>
> options {
>
>      language=CSharp3;
>
> }
>
>
>
> /** Match things like "call foo;" */
>
> r : 'call' ID ';' {System.out.println("invoke "+$ID.text);} ;
>
> ID: 'a'..'z'+ ;
>
> WS: (' '|'\n'|'\r')+   {$channel=HIDDEN;} ; // ignore whitespace
>
>
>
> When I compile the code generated by ANTLR3, I get these errors:
>
>
> K:\Plantronics\Development Sandbox\AntlrTest\AntlrTest\obj\x86\Debug\Lexer1Parser.cs(28,2): warning CS3021: 'Lexer1Parser' does not need a CLSCompliant attribute because the assembly does not have a CLSCompliant attribute
> K:\Plantronics\Development Sandbox\AntlrTest\AntlrTest\obj\x86\Debug\Lexer1Parser.cs(86,11): error CS1041: Identifier expected; 'out' is a keyword
> K:\Plantronics\Development Sandbox\AntlrTest\AntlrTest\obj\x86\Debug\Lexer1Parser.cs(86,11): error CS1525: Invalid expression term 'out'
> K:\Plantronics\Development Sandbox\AntlrTest\AntlrTest\obj\x86\Debug\Lexer1Lexer.cs(28,2): warning CS3021: 'Lexer1Lexer' does not need a CLSCompliant attribute because the assembly does not have a CLSCompliant attribute
> K:\Plantronics\Development Sandbox\AntlrTest\AntlrTest\obj\x86\Debug\Lexer1Lexer.cs(276,13): error CS0103: The name 'HIDDEN' does not exist in the current context
>
>
>
> The errors regarding "System.out" make sense, that seems like a call to a Java function that does not exist in C#. However the error with HIDDEN is confusing to me, and it is the result of sub a basic construct ({$channel=HIDDEN:};). I can't imagine what I am doing wrong to cause this, and since it is the first example pulled out of the book, you would think it would work!
>
>
>
> Can someone help me here? I'm gaining confidence, but I'm having trouble even walking before I can run!
>
>
>
> Oh, also: What are the files Antlr3.Targets.CSharp2.dll and Antlr3.Targets.CSharp3.dll for?
>
>
>
> -          Andy
>
>
>
>
>
> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-bounces at antlr.org] On Behalf Of Sam Harwell
> Sent: Wednesday, October 19, 2011 7:59 AM
> To: 'pragmaik'; antlr-interest at antlr.org
> Subject: Re: [antlr-interest] How viable is the Csharp3 target?
>
>
>
> Hi Andy&  Maik,
>
>
>
> I agree that the C# target documentation is lacking in many ways. I try to keep enough documentation at the following page to get you started on the right path:
>
> http://www.antlr.org/wiki/display/ANTLR3/Antlr3CSharpReleases
>
>
>
> I've been using the CSharp3 target in a commercial product for 3 years now.
>
> At this point, most of the remaining the issues I have with it are basic/technical limitations of ANTLR 3 that will hopefully be resolved in later versions.
>
>
>
> Sam
>
>
>
> -----Original Message-----
>
> From: antlr-interest-bounces at antlr.org<mailto:antlr-interest-bounces at antlr.org>
>
> [mailto:antlr-interest-bounces at antlr.org]<mailto:[mailto:antlr-interest-bounces at antlr.org]>  On Behalf Of pragmaik
>
> Sent: Wednesday, October 19, 2011 9:36 AM
>
> To: antlr-interest at antlr.org<mailto:antlr-interest at antlr.org>
>
> Subject: Re: [antlr-interest] How viable is the Csharp3 target?
>
>
>
> Hi Andy!
>
>
>
> I am using ANTLR's C# target for a couple of weeks now to create a domain specific language that is a subset of the C programming language.
>
>
>
> My experience is similar to yours, but I can assure you that the C# target works and that it is actively maintained. It differs from the Java target in a few places, but it works.
>
>
>
> The biggest problem is finding documentation. I've both of Terence Parr's books on my desk and the folks on this mailing list are very friendly and competent.
>
>
>
> Cheers,
>
> Maik
>
>
>
>
>
> --
>
> View this message in context:
>
> http://antlr.1301665.n2.nabble.com/How-viable-is-the-Csharp3-target-tp690889
>
> 0p6908949.html
>
> Sent from the ANTLR mailing list archive at Nabble.com.
>
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>
> Unsubscribe:
>
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>
>
>
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>
>
>
> ________________________________
>
> CONFIDENTIALITY NOTICE: This e-mail transmission, and any documents, files or previous e-mail messages attached to it, may contain information that is confidential and/or legally privileged. If you are not the intended recipient, or a person responsible for delivering it to the intended recipient, please DO NOT disclose the contents to another person, store or copy the information in any medium, or use any of the information contained in or attached to this transmission for any purpose. If you have received this transmission in error, please immediately notify the sender by reply email or at privacy at plantronics.com, and destroy the original transmission and its attachments without reading or saving in any manner.
>
> For further information about Plantronics - the Company, its products, brands, partners, please visit our website www.plantronics.com.
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address

From jimi at temporal-wave.com  Wed Oct 19 11:33:48 2011
From: jimi at temporal-wave.com (Jim Idle)
Date: Wed, 19 Oct 2011 11:33:48 -0700
Subject: [antlr-interest] How viable is the Csharp3 target? (more
	specific questions)
In-Reply-To: <92E9AB4D42199B4793CE24E094BAEE070D05C3@USSCMB03.plt.plantronics.com>
References: <92E9AB4D42199B4793CE24E094BAEE070D05C3@USSCMB03.plt.plantronics.com>
Message-ID: <87484cac62f0b17e5a2799fc41ff6456@mail.gmail.com>

System.out.println("invoke "+$ID.text);}

Is Java code, which is why I encourage you to just use ANTLRWorks with
Java to get your head around ANTLR, then you will be able to see the woods
from the trees switching to C#.

Jim

> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of Voelkel, Andy
> Sent: Wednesday, October 19, 2011 11:26 AM
> To: Sam Harwell; 'pragmaik'; antlr-interest at antlr.org
> Subject: Re: [antlr-interest] How viable is the Csharp3 target? (more
> specific questions)
>
> Hi,
>
>
>
> First, thanks for the encouragement. Knowing there are active users out
> there makes all the difference.
>
>
>
> I've now taken the first example from "the definitive ANTLR reference"
> and tried to get it to work, first using the Visual Studio Extensions
> and templates, and then also manually running the ANTLR3.exe file at
> the command line, just to verify that my problems are in the generated
> code and are not errors generated during the generation of code (since
> the Visual Studio Extensions and associated instructions seem to
> produce projects that both generate code and then build it).
>
>
>
> So my grammar is this simple:
>
>
>
> grammar Lexer1;
>
>
>
> options {
>
>     language=CSharp3;
>
> }
>
>
>
> /** Match things like "call foo;" */
>
> r : 'call' ID ';' {System.out.println("invoke "+$ID.text);} ;
>
> ID: 'a'..'z'+ ;
>
> WS: (' '|'\n'|'\r')+   {$channel=HIDDEN;} ; // ignore whitespace
>
>
>
> When I compile the code generated by ANTLR3, I get these errors:
>
>
> K:\Plantronics\Development
> Sandbox\AntlrTest\AntlrTest\obj\x86\Debug\Lexer1Parser.cs(28,2):
> warning CS3021: 'Lexer1Parser' does not need a CLSCompliant attribute
> because the assembly does not have a CLSCompliant attribute
> K:\Plantronics\Development
> Sandbox\AntlrTest\AntlrTest\obj\x86\Debug\Lexer1Parser.cs(86,11): error
> CS1041: Identifier expected; 'out' is a keyword
> K:\Plantronics\Development
> Sandbox\AntlrTest\AntlrTest\obj\x86\Debug\Lexer1Parser.cs(86,11): error
> CS1525: Invalid expression term 'out'
> K:\Plantronics\Development
> Sandbox\AntlrTest\AntlrTest\obj\x86\Debug\Lexer1Lexer.cs(28,2): warning
> CS3021: 'Lexer1Lexer' does not need a CLSCompliant attribute because
> the assembly does not have a CLSCompliant attribute
> K:\Plantronics\Development
> Sandbox\AntlrTest\AntlrTest\obj\x86\Debug\Lexer1Lexer.cs(276,13): error
> CS0103: The name 'HIDDEN' does not exist in the current context
>
>
>
> The errors regarding "System.out" make sense, that seems like a call to
> a Java function that does not exist in C#. However the error with
> HIDDEN is confusing to me, and it is the result of sub a basic
> construct ({$channel=HIDDEN:};). I can't imagine what I am doing wrong
> to cause this, and since it is the first example pulled out of the
> book, you would think it would work!
>
>
>
> Can someone help me here? I'm gaining confidence, but I'm having
> trouble even walking before I can run!
>
>
>
> Oh, also: What are the files Antlr3.Targets.CSharp2.dll and
> Antlr3.Targets.CSharp3.dll for?
>
>
>
> -          Andy
>
>
>
>
>
> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of Sam Harwell
> Sent: Wednesday, October 19, 2011 7:59 AM
> To: 'pragmaik'; antlr-interest at antlr.org
> Subject: Re: [antlr-interest] How viable is the Csharp3 target?
>
>
>
> Hi Andy & Maik,
>
>
>
> I agree that the C# target documentation is lacking in many ways. I try
> to keep enough documentation at the following page to get you started
> on the right path:
>
> http://www.antlr.org/wiki/display/ANTLR3/Antlr3CSharpReleases
>
>
>
> I've been using the CSharp3 target in a commercial product for 3 years
> now.
>
> At this point, most of the remaining the issues I have with it are
> basic/technical limitations of ANTLR 3 that will hopefully be resolved
> in later versions.
>
>
>
> Sam
>
>
>
> -----Original Message-----
>
> From: antlr-interest-bounces at antlr.org<mailto:antlr-interest-
> bounces at antlr.org>
>
> [mailto:antlr-interest-bounces at antlr.org]<mailto:[mailto:antlr-
> interest-bounces at antlr.org]> On Behalf Of pragmaik
>
> Sent: Wednesday, October 19, 2011 9:36 AM
>
> To: antlr-interest at antlr.org<mailto:antlr-interest at antlr.org>
>
> Subject: Re: [antlr-interest] How viable is the Csharp3 target?
>
>
>
> Hi Andy!
>
>
>
> I am using ANTLR's C# target for a couple of weeks now to create a
> domain specific language that is a subset of the C programming
> language.
>
>
>
> My experience is similar to yours, but I can assure you that the C#
> target works and that it is actively maintained. It differs from the
> Java target in a few places, but it works.
>
>
>
> The biggest problem is finding documentation. I've both of Terence
> Parr's books on my desk and the folks on this mailing list are very
> friendly and competent.
>
>
>
> Cheers,
>
> Maik
>
>
>
>
>
> --
>
> View this message in context:
>
> http://antlr.1301665.n2.nabble.com/How-viable-is-the-Csharp3-target-
> tp690889
>
> 0p6908949.html
>
> Sent from the ANTLR mailing list archive at Nabble.com.
>
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>
> Unsubscribe:
>
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>
>
>
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
> email-address
>
>
>
> ________________________________
>
> CONFIDENTIALITY NOTICE: This e-mail transmission, and any documents,
> files or previous e-mail messages attached to it, may contain
> information that is confidential and/or legally privileged. If you are
> not the intended recipient, or a person responsible for delivering it
> to the intended recipient, please DO NOT disclose the contents to
> another person, store or copy the information in any medium, or use any
> of the information contained in or attached to this transmission for
> any purpose. If you have received this transmission in error, please
> immediately notify the sender by reply email or at
> privacy at plantronics.com, and destroy the original transmission and its
> attachments without reading or saving in any manner.
>
> For further information about Plantronics - the Company, its products,
> brands, partners, please visit our website www.plantronics.com.
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
> email-address

From kcarroll at signmgmt.com  Wed Oct 19 11:35:18 2011
From: kcarroll at signmgmt.com (Kevin Carroll)
Date: Wed, 19 Oct 2011 13:35:18 -0500
Subject: [antlr-interest] How viable is the Csharp3 target? (more
 specific questions)
In-Reply-To: <92E9AB4D42199B4793CE24E094BAEE070D05C3@USSCMB03.plt.plantronics.com>
References: <92E9AB4D42199B4793CE24E094BAEE070D05C3@USSCMB03.plt.plantronics.com>
Message-ID: <80A5CDD2686EA042AE41C526324D44550105006F8648@EXCHANGE2007.signmgmt.local>

Andy,

In addition to the other's suggestions, change HIDDEN to Hidden.  The C# target attempts to use standard C# conventions when possible. It can be frustrating when working from the books and Java-focused documentation, but once you get past the few differences and gain some momentum, you should not have too many other compatibility issues.

Kevin Carroll

-----Original Message-----
From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-bounces at antlr.org] On Behalf Of Voelkel, Andy
Sent: Wednesday, October 19, 2011 1:26 PM
To: Sam Harwell; 'pragmaik'; antlr-interest at antlr.org
Subject: Re: [antlr-interest] How viable is the Csharp3 target? (more specific questions)

Hi,



First, thanks for the encouragement. Knowing there are active users out there makes all the difference.



I've now taken the first example from "the definitive ANTLR reference" and tried to get it to work, first using the Visual Studio Extensions and templates, and then also manually running the ANTLR3.exe file at the command line, just to verify that my problems are in the generated code and are not errors generated during the generation of code (since the Visual Studio Extensions and associated instructions seem to produce projects that both generate code and then build it).



So my grammar is this simple:



grammar Lexer1;



options {

    language=CSharp3;

}



/** Match things like "call foo;" */

r : 'call' ID ';' {System.out.println("invoke "+$ID.text);} ;

ID: 'a'..'z'+ ;

WS: (' '|'\n'|'\r')+   {$channel=HIDDEN;} ; // ignore whitespace



When I compile the code generated by ANTLR3, I get these errors:


K:\Plantronics\Development Sandbox\AntlrTest\AntlrTest\obj\x86\Debug\Lexer1Parser.cs(28,2): warning CS3021: 'Lexer1Parser' does not need a CLSCompliant attribute because the assembly does not have a CLSCompliant attribute K:\Plantronics\Development Sandbox\AntlrTest\AntlrTest\obj\x86\Debug\Lexer1Parser.cs(86,11): error CS1041: Identifier expected; 'out' is a keyword K:\Plantronics\Development Sandbox\AntlrTest\AntlrTest\obj\x86\Debug\Lexer1Parser.cs(86,11): error CS1525: Invalid expression term 'out'
K:\Plantronics\Development Sandbox\AntlrTest\AntlrTest\obj\x86\Debug\Lexer1Lexer.cs(28,2): warning CS3021: 'Lexer1Lexer' does not need a CLSCompliant attribute because the assembly does not have a CLSCompliant attribute K:\Plantronics\Development Sandbox\AntlrTest\AntlrTest\obj\x86\Debug\Lexer1Lexer.cs(276,13): error CS0103: The name 'HIDDEN' does not exist in the current context



The errors regarding "System.out" make sense, that seems like a call to a Java function that does not exist in C#. However the error with HIDDEN is confusing to me, and it is the result of sub a basic construct ({$channel=HIDDEN:};). I can't imagine what I am doing wrong to cause this, and since it is the first example pulled out of the book, you would think it would work!



Can someone help me here? I'm gaining confidence, but I'm having trouble even walking before I can run!



Oh, also: What are the files Antlr3.Targets.CSharp2.dll and Antlr3.Targets.CSharp3.dll for?



-          Andy





-----Original Message-----
From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-bounces at antlr.org] On Behalf Of Sam Harwell
Sent: Wednesday, October 19, 2011 7:59 AM
To: 'pragmaik'; antlr-interest at antlr.org
Subject: Re: [antlr-interest] How viable is the Csharp3 target?



Hi Andy & Maik,



I agree that the C# target documentation is lacking in many ways. I try to keep enough documentation at the following page to get you started on the right path:

http://www.antlr.org/wiki/display/ANTLR3/Antlr3CSharpReleases



I've been using the CSharp3 target in a commercial product for 3 years now.

At this point, most of the remaining the issues I have with it are basic/technical limitations of ANTLR 3 that will hopefully be resolved in later versions.



Sam



-----Original Message-----

From: antlr-interest-bounces at antlr.org<mailto:antlr-interest-bounces at antlr.org>

[mailto:antlr-interest-bounces at antlr.org]<mailto:[mailto:antlr-interest-bounces at antlr.org]> On Behalf Of pragmaik

Sent: Wednesday, October 19, 2011 9:36 AM

To: antlr-interest at antlr.org<mailto:antlr-interest at antlr.org>

Subject: Re: [antlr-interest] How viable is the Csharp3 target?



Hi Andy!



I am using ANTLR's C# target for a couple of weeks now to create a domain specific language that is a subset of the C programming language.



My experience is similar to yours, but I can assure you that the C# target works and that it is actively maintained. It differs from the Java target in a few places, but it works.



The biggest problem is finding documentation. I've both of Terence Parr's books on my desk and the folks on this mailing list are very friendly and competent.



Cheers,

Maik





--

View this message in context:

http://antlr.1301665.n2.nabble.com/How-viable-is-the-Csharp3-target-tp690889

0p6908949.html

Sent from the ANTLR mailing list archive at Nabble.com.



List: http://www.antlr.org/mailman/listinfo/antlr-interest

Unsubscribe:

http://www.antlr.org/mailman/options/antlr-interest/your-email-address





List: http://www.antlr.org/mailman/listinfo/antlr-interest

Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address



________________________________

CONFIDENTIALITY NOTICE: This e-mail transmission, and any documents, files or previous e-mail messages attached to it, may contain information that is confidential and/or legally privileged. If you are not the intended recipient, or a person responsible for delivering it to the intended recipient, please DO NOT disclose the contents to another person, store or copy the information in any medium, or use any of the information contained in or attached to this transmission for any purpose. If you have received this transmission in error, please immediately notify the sender by reply email or at privacy at plantronics.com, and destroy the original transmission and its attachments without reading or saving in any manner.

For further information about Plantronics - the Company, its products, brands, partners, please visit our website www.plantronics.com.

List: http://www.antlr.org/mailman/listinfo/antlr-interest
Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address

From andy.voelkel at plantronics.com  Wed Oct 19 12:16:38 2011
From: andy.voelkel at plantronics.com (Voelkel, Andy)
Date: Wed, 19 Oct 2011 19:16:38 +0000
Subject: [antlr-interest] How viable is the Csharp3 target? (more
 specific questions)
In-Reply-To: <80A5CDD2686EA042AE41C526324D44550105006F8648@EXCHANGE2007.signmgmt.local>
References: <92E9AB4D42199B4793CE24E094BAEE070D05C3@USSCMB03.plt.plantronics.com>
	<80A5CDD2686EA042AE41C526324D44550105006F8648@EXCHANGE2007.signmgmt.local>
Message-ID: <92E9AB4D42199B4793CE24E094BAEE070D0653@USSCMB03.plt.plantronics.com>

Hi Kevin,



That's the ticket (change HIDDEN to Hidden)! But doesn't that make the grammar non-portable, and aren't portable grammars a goal of ANTLR?



Also, it verifies my suspicion that the example code I got (for Csharp) was wrong. All the examples I downloaded are wrong, I just checked. So I went back and tried to retrace where I got them from, but found the same examples on the Antlr site with the same folder organization, but without the errors. Frustrating. I sure haven't figured my way around the ANTLR site properly yet, I guess! And there are stale examples out there, since I got them only yesterday!



Anyhow, I think I'm unstuck for the moment. Thanks to all of you!



Now I can go see if I can figure out how to use AntlrWorks, since everyone seems to rave about it, even though it seems that I need to use grammars that are a little different (unfortunately), because it's all Java



-          Andy





-----Original Message-----
From: Kevin Carroll [mailto:kcarroll at signmgmt.com]
Sent: Wednesday, October 19, 2011 11:35 AM
To: Voelkel, Andy; antlr-interest at antlr.org
Subject: RE: [antlr-interest] How viable is the Csharp3 target? (more specific questions)



Andy,



In addition to the other's suggestions, change HIDDEN to Hidden.  The C# target attempts to use standard C# conventions when possible. It can be frustrating when working from the books and Java-focused documentation, but once you get past the few differences and gain some momentum, you should not have too many other compatibility issues.



Kevin Carroll



-----Original Message-----

From: antlr-interest-bounces at antlr.org<mailto:antlr-interest-bounces at antlr.org> [mailto:antlr-interest-bounces at antlr.org]<mailto:[mailto:antlr-interest-bounces at antlr.org]> On Behalf Of Voelkel, Andy

Sent: Wednesday, October 19, 2011 1:26 PM

To: Sam Harwell; 'pragmaik'; antlr-interest at antlr.org<mailto:antlr-interest at antlr.org>

Subject: Re: [antlr-interest] How viable is the Csharp3 target? (more specific questions)



Hi,







First, thanks for the encouragement. Knowing there are active users out there makes all the difference.







I've now taken the first example from "the definitive ANTLR reference" and tried to get it to work, first using the Visual Studio Extensions and templates, and then also manually running the ANTLR3.exe file at the command line, just to verify that my problems are in the generated code and are not errors generated during the generation of code (since the Visual Studio Extensions and associated instructions seem to produce projects that both generate code and then build it).







So my grammar is this simple:







grammar Lexer1;







options {



    language=CSharp3;



}







/** Match things like "call foo;" */



r : 'call' ID ';' {System.out.println("invoke "+$ID.text);} ;



ID: 'a'..'z'+ ;



WS: (' '|'\n'|'\r')+   {$channel=HIDDEN;} ; // ignore whitespace







When I compile the code generated by ANTLR3, I get these errors:





K:\Plantronics\Development Sandbox\AntlrTest\AntlrTest\obj\x86\Debug\Lexer1Parser.cs(28,2): warning CS3021: 'Lexer1Parser' does not need a CLSCompliant attribute because the assembly does not have a CLSCompliant attribute K:\Plantronics\Development Sandbox\AntlrTest\AntlrTest\obj\x86\Debug\Lexer1Parser.cs(86,11): error CS1041: Identifier expected; 'out' is a keyword K:\Plantronics\Development Sandbox\AntlrTest\AntlrTest\obj\x86\Debug\Lexer1Parser.cs(86,11): error CS1525: Invalid expression term 'out'

K:\Plantronics\Development Sandbox\AntlrTest\AntlrTest\obj\x86\Debug\Lexer1Lexer.cs(28,2): warning CS3021: 'Lexer1Lexer' does not need a CLSCompliant attribute because the assembly does not have a CLSCompliant attribute K:\Plantronics\Development Sandbox\AntlrTest\AntlrTest\obj\x86\Debug\Lexer1Lexer.cs(276,13): error CS0103: The name 'HIDDEN' does not exist in the current context







The errors regarding "System.out" make sense, that seems like a call to a Java function that does not exist in C#. However the error with HIDDEN is confusing to me, and it is the result of sub a basic construct ({$channel=HIDDEN:};). I can't imagine what I am doing wrong to cause this, and since it is the first example pulled out of the book, you would think it would work!







Can someone help me here? I'm gaining confidence, but I'm having trouble even walking before I can run!







Oh, also: What are the files Antlr3.Targets.CSharp2.dll and Antlr3.Targets.CSharp3.dll for?







-          Andy











-----Original Message-----

From: antlr-interest-bounces at antlr.org<mailto:antlr-interest-bounces at antlr.org> [mailto:antlr-interest-bounces at antlr.org]<mailto:[mailto:antlr-interest-bounces at antlr.org]> On Behalf Of Sam Harwell

Sent: Wednesday, October 19, 2011 7:59 AM

To: 'pragmaik'; antlr-interest at antlr.org<mailto:antlr-interest at antlr.org>

Subject: Re: [antlr-interest] How viable is the Csharp3 target?







Hi Andy & Maik,







I agree that the C# target documentation is lacking in many ways. I try to keep enough documentation at the following page to get you started on the right path:



http://www.antlr.org/wiki/display/ANTLR3/Antlr3CSharpReleases







I've been using the CSharp3 target in a commercial product for 3 years now.



At this point, most of the remaining the issues I have with it are basic/technical limitations of ANTLR 3 that will hopefully be resolved in later versions.







Sam







-----Original Message-----



From: antlr-interest-bounces at antlr.org<mailto:antlr-interest-bounces at antlr.org<mailto:antlr-interest-bounces at antlr.org%3cmailto:antlr-interest-bounces at antlr.org>>



[mailto:antlr-interest-bounces at antlr.org]<mailto:[mailto:antlr-interest-bounces at antlr.org]><mailto:[mailto:antlr-interest-bounces at antlr.org]> On Behalf Of pragmaik



Sent: Wednesday, October 19, 2011 9:36 AM



To: antlr-interest at antlr.org<mailto:antlr-interest at antlr.org<mailto:antlr-interest at antlr.org%3cmailto:antlr-interest at antlr.org>>



Subject: Re: [antlr-interest] How viable is the Csharp3 target?







Hi Andy!







I am using ANTLR's C# target for a couple of weeks now to create a domain specific language that is a subset of the C programming language.







My experience is similar to yours, but I can assure you that the C# target works and that it is actively maintained. It differs from the Java target in a few places, but it works.







The biggest problem is finding documentation. I've both of Terence Parr's books on my desk and the folks on this mailing list are very friendly and competent.







Cheers,



Maik











--



View this message in context:



http://antlr.1301665.n2.nabble.com/How-viable-is-the-Csharp3-target-tp690889



0p6908949.html



Sent from the ANTLR mailing list archive at Nabble.com.







List: http://www.antlr.org/mailman/listinfo/antlr-interest



Unsubscribe:



http://www.antlr.org/mailman/options/antlr-interest/your-email-address











List: http://www.antlr.org/mailman/listinfo/antlr-interest



Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address







________________________________



CONFIDENTIALITY NOTICE: This e-mail transmission, and any documents, files or previous e-mail messages attached to it, may contain information that is confidential and/or legally privileged. If you are not the intended recipient, or a person responsible for delivering it to the intended recipient, please DO NOT disclose the contents to another person, store or copy the information in any medium, or use any of the information contained in or attached to this transmission for any purpose. If you have received this transmission in error, please immediately notify the sender by reply email or at privacy at plantronics.com<mailto:privacy at plantronics.com>, and destroy the original transmission and its attachments without reading or saving in any manner.



For further information about Plantronics - the Company, its products, brands, partners, please visit our website www.plantronics.com<http://www.plantronics.com>.



List: http://www.antlr.org/mailman/listinfo/antlr-interest

Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address



________________________________

CONFIDENTIALITY NOTICE: This e-mail transmission, and any documents, files or previous e-mail messages attached to it, may contain information that is confidential and/or legally privileged. If you are not the intended recipient, or a person responsible for delivering it to the intended recipient, please DO NOT disclose the contents to another person, store or copy the information in any medium, or use any of the information contained in or attached to this transmission for any purpose. If you have received this transmission in error, please immediately notify the sender by reply email or at privacy at plantronics.com, and destroy the original transmission and its attachments without reading or saving in any manner.

For further information about Plantronics - the Company, its products, brands, partners, please visit our website www.plantronics.com.

From researcher0x00 at gmail.com  Wed Oct 19 12:26:37 2011
From: researcher0x00 at gmail.com (Eric)
Date: Wed, 19 Oct 2011 15:26:37 -0400
Subject: [antlr-interest] Fwd: How viable is the Csharp3 target? (more
 specific questions)
In-Reply-To: <CAN45N11pAhpvwfRQFxcsbHUMNqHCO2v6mRb7uAaaLmAx0px4OA@mail.gmail.com>
References: <92E9AB4D42199B4793CE24E094BAEE070D05C3@USSCMB03.plt.plantronics.com>
	<80A5CDD2686EA042AE41C526324D44550105006F8648@EXCHANGE2007.signmgmt.local>
	<92E9AB4D42199B4793CE24E094BAEE070D0653@USSCMB03.plt.plantronics.com>
	<CAN45N11pAhpvwfRQFxcsbHUMNqHCO2v6mRb7uAaaLmAx0px4OA@mail.gmail.com>
Message-ID: <CAN45N10Kui9f850nhzc5_0SJcKjmP=i2a_LNq+Ajh-MWB=p0WA@mail.gmail.com>

---------- Forwarded message ----------
From: Eric <researcher0x00 at gmail.com>
Date: Wed, Oct 19, 2011 at 3:25 PM
Subject: Re: [antlr-interest] How viable is the Csharp3 target? (more
specific questions)
To: "Voelkel, Andy" <andy.voelkel at plantronics.com>




On Wed, Oct 19, 2011 at 3:16 PM, Voelkel, Andy <andy.voelkel at plantronics.com
> wrote:

> Hi Kevin,
>
>
>
> That's the ticket (change HIDDEN to Hidden)! But doesn't that make the
> grammar non-portable, and aren't portable grammars a goal of ANTLR?
>
Depends upon your definition of portable. The grammar will be portable, but
the embedded code will be specific to the target language. Depending upon
the grammar, you may not even need to embed target source code. Most
grammars have little to none embedded target code, which is usually just
snippets of several lines or less that can be converted in an hour our so by
someone experienced in both target languages.


>
>
>
> Also, it verifies my suspicion that the example code I got (for Csharp) was
> wrong. All the examples I downloaded are wrong, I just checked. So I went
> back and tried to retrace where I got them from, but found the same examples
> on the Antlr site with the same folder organization, but without the errors.
> Frustrating. I sure haven't figured my way around the ANTLR site properly
> yet, I guess! And there are stale examples out there, since I got them only
> yesterday!
>

Anyhow, I think I'm unstuck for the moment. Thanks to all of you!



Now I can go see if I can figure out how to use AntlrWorks, since everyone
seems to rave about it, even though it seems that I need to use grammars
that are a little different (unfortunately), because it's all Java

Wise choice.

If you are using ANTLRWorks, don't trust the Interpreter, the debugger is
OK.


>
>
>
> -          Andy
>
>
>
>
>
> -----Original Message-----
> From: Kevin Carroll [mailto:kcarroll at signmgmt.com]
> Sent: Wednesday, October 19, 2011 11:35 AM
> To: Voelkel, Andy; antlr-interest at antlr.org
> Subject: RE: [antlr-interest] How viable is the Csharp3 target? (more
> specific questions)
>
>
>
> Andy,
>
>
>
> In addition to the other's suggestions, change HIDDEN to Hidden.  The C#
> target attempts to use standard C# conventions when possible. It can be
> frustrating when working from the books and Java-focused documentation, but
> once you get past the few differences and gain some momentum, you should not
> have too many other compatibility issues.
>
>
>
> Kevin Carroll
>
>
>
> -----Original Message-----
>
> From: antlr-interest-bounces at antlr.org<mailto:
> antlr-interest-bounces at antlr.org> [mailto:antlr-interest-bounces at antlr.org
> ]<mailto:[mailto:antlr-interest-bounces at antlr.org]> On Behalf Of Voelkel,
> Andy
>
> Sent: Wednesday, October 19, 2011 1:26 PM
>
> To: Sam Harwell; 'pragmaik'; antlr-interest at antlr.org<mailto:
> antlr-interest at antlr.org>
>
> Subject: Re: [antlr-interest] How viable is the Csharp3 target? (more
> specific questions)
>
>
>
> Hi,
>
>
>
>
>
>
>
> First, thanks for the encouragement. Knowing there are active users out
> there makes all the difference.
>
>
>
>
>
>
>
> I've now taken the first example from "the definitive ANTLR reference" and
> tried to get it to work, first using the Visual Studio Extensions and
> templates, and then also manually running the ANTLR3.exe file at the command
> line, just to verify that my problems are in the generated code and are not
> errors generated during the generation of code (since the Visual Studio
> Extensions and associated instructions seem to produce projects that both
> generate code and then build it).
>
>
>
>
>
>
>
> So my grammar is this simple:
>
>
>
>
>
>
>
> grammar Lexer1;
>
>
>
>
>
>
>
> options {
>
>
>
>    language=CSharp3;
>
>
>
> }
>
>
>
>
>
>
>
> /** Match things like "call foo;" */
>
>
>
> r : 'call' ID ';' {System.out.println("invoke "+$ID.text);} ;
>
>
>
> ID: 'a'..'z'+ ;
>
>
>
> WS: (' '|'\n'|'\r')+   {$channel=HIDDEN;} ; // ignore whitespace
>
>
>
>
>
>
>
> When I compile the code generated by ANTLR3, I get these errors:
>
>
>
>
>
> K:\Plantronics\Development
> Sandbox\AntlrTest\AntlrTest\obj\x86\Debug\Lexer1Parser.cs(28,2): warning
> CS3021: 'Lexer1Parser' does not need a CLSCompliant attribute because the
> assembly does not have a CLSCompliant attribute K:\Plantronics\Development
> Sandbox\AntlrTest\AntlrTest\obj\x86\Debug\Lexer1Parser.cs(86,11): error
> CS1041: Identifier expected; 'out' is a keyword K:\Plantronics\Development
> Sandbox\AntlrTest\AntlrTest\obj\x86\Debug\Lexer1Parser.cs(86,11): error
> CS1525: Invalid expression term 'out'
>
> K:\Plantronics\Development
> Sandbox\AntlrTest\AntlrTest\obj\x86\Debug\Lexer1Lexer.cs(28,2): warning
> CS3021: 'Lexer1Lexer' does not need a CLSCompliant attribute because the
> assembly does not have a CLSCompliant attribute K:\Plantronics\Development
> Sandbox\AntlrTest\AntlrTest\obj\x86\Debug\Lexer1Lexer.cs(276,13): error
> CS0103: The name 'HIDDEN' does not exist in the current context
>
>
>
>
>
>
>
> The errors regarding "System.out" make sense, that seems like a call to a
> Java function that does not exist in C#. However the error with HIDDEN is
> confusing to me, and it is the result of sub a basic construct
> ({$channel=HIDDEN:};). I can't imagine what I am doing wrong to cause this,
> and since it is the first example pulled out of the book, you would think it
> would work!
>
>
>
>
>
>
>
> Can someone help me here? I'm gaining confidence, but I'm having trouble
> even walking before I can run!
>
>
>
>
>
>
>
> Oh, also: What are the files Antlr3.Targets.CSharp2.dll and
> Antlr3.Targets.CSharp3.dll for?
>
>
>
>
>
>
>
> -          Andy
>
>
>
>
>
>
>
>
>
>
>
> -----Original Message-----
>
> From: antlr-interest-bounces at antlr.org<mailto:
> antlr-interest-bounces at antlr.org> [mailto:antlr-interest-bounces at antlr.org
> ]<mailto:[mailto:antlr-interest-bounces at antlr.org]> On Behalf Of Sam
> Harwell
>
> Sent: Wednesday, October 19, 2011 7:59 AM
>
> To: 'pragmaik'; antlr-interest at antlr.org<mailto:antlr-interest at antlr.org>
>
> Subject: Re: [antlr-interest] How viable is the Csharp3 target?
>
>
>
>
>
>
>
> Hi Andy & Maik,
>
>
>
>
>
>
>
> I agree that the C# target documentation is lacking in many ways. I try to
> keep enough documentation at the following page to get you started on the
> right path:
>
>
>
> http://www.antlr.org/wiki/display/ANTLR3/Antlr3CSharpReleases
>
>
>
>
>
>
>
> I've been using the CSharp3 target in a commercial product for 3 years now.
>
>
>
> At this point, most of the remaining the issues I have with it are
> basic/technical limitations of ANTLR 3 that will hopefully be resolved in
> later versions.
>
>
>
>
>
>
>
> Sam
>
>
>
>
>
>
>
> -----Original Message-----
>
>
>
> From: antlr-interest-bounces at antlr.org<mailto:
> antlr-interest-bounces at antlr.org<mailto:antlr-interest-bounces at antlr.org%
> 3cmailto:antlr-interest-bounces at antlr.org>>
>
>
>
> [mailto:antlr-interest-bounces at antlr.org]<mailto:[mailto:
> antlr-interest-bounces at antlr.org]><mailto:[mailto:
> antlr-interest-bounces at antlr.org]> On Behalf Of pragmaik
>
>
>
> Sent: Wednesday, October 19, 2011 9:36 AM
>
>
>
> To: antlr-interest at antlr.org<mailto:antlr-interest at antlr.org<mailto:
> antlr-interest at antlr.org%3cmailto:antlr-interest at antlr.org>>
>
>
>
> Subject: Re: [antlr-interest] How viable is the Csharp3 target?
>
>
>
>
>
>
>
> Hi Andy!
>
>
>
>
>
>
>
> I am using ANTLR's C# target for a couple of weeks now to create a domain
> specific language that is a subset of the C programming language.
>
>
>
>
>
>
>
> My experience is similar to yours, but I can assure you that the C# target
> works and that it is actively maintained. It differs from the Java target in
> a few places, but it works.
>
>
>
>
>
>
>
> The biggest problem is finding documentation. I've both of Terence Parr's
> books on my desk and the folks on this mailing list are very friendly and
> competent.
>
>
>
>
>
>
>
> Cheers,
>
>
>
> Maik
>
>
>
>
>
>
>
>
>
>
>
> --
>
>
>
> View this message in context:
>
>
>
>
> http://antlr.1301665.n2.nabble.com/How-viable-is-the-Csharp3-target-tp690889
>
>
>
> 0p6908949.html
>
>
>
> Sent from the ANTLR mailing list archive at Nabble.com.
>
>
>
>
>
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>
>
>
> Unsubscribe:
>
>
>
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>
>
>
>
>
>
>
>
>
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>
>
>
> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>
>
>
>
>
>
>
> ________________________________
>
>
>
> CONFIDENTIALITY NOTICE: This e-mail transmission, and any documents, files
> or previous e-mail messages attached to it, may contain information that is
> confidential and/or legally privileged. If you are not the intended
> recipient, or a person responsible for delivering it to the intended
> recipient, please DO NOT disclose the contents to another person, store or
> copy the information in any medium, or use any of the information contained
> in or attached to this transmission for any purpose. If you have received
> this transmission in error, please immediately notify the sender by reply
> email or at privacy at plantronics.com<mailto:privacy at plantronics.com>, and
> destroy the original transmission and its attachments without reading or
> saving in any manner.
>
>
>
> For further information about Plantronics - the Company, its products,
> brands, partners, please visit our website www.plantronics.com<
> http://www.plantronics.com>.
>
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>
> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>
>
>
> ________________________________
>
> CONFIDENTIALITY NOTICE: This e-mail transmission, and any documents, files
> or previous e-mail messages attached to it, may contain information that is
> confidential and/or legally privileged. If you are not the intended
> recipient, or a person responsible for delivering it to the intended
> recipient, please DO NOT disclose the contents to another person, store or
> copy the information in any medium, or use any of the information contained
> in or attached to this transmission for any purpose. If you have received
> this transmission in error, please immediately notify the sender by reply
> email or at privacy at plantronics.com, and destroy the original transmission
> and its attachments without reading or saving in any manner.
>
> For further information about Plantronics - the Company, its products,
> brands, partners, please visit our website www.plantronics.com.
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>

From chwchw at gmx.de  Wed Oct 19 14:23:41 2011
From: chwchw at gmx.de (Christian)
Date: Wed, 19 Oct 2011 23:23:41 +0200
Subject: [antlr-interest] Rewriting a list of tokens to a list of custom
 tokens
In-Reply-To: <fbfbedb88933732815fef4b46a906639@mail.gmail.com>
References: <4E9DF7F0.9040504@gmx.de> <4E9EC50C.30904@gmx.de>
	<fbfbedb88933732815fef4b46a906639@mail.gmail.com>
Message-ID: <4E9F3FDD.8060103@gmx.de>

No, your solution still generates invalid java code for me. Did you test
your solution? The TYPE token does not accept a list as parameter. It is
a simple token defined within the token block at the top of the grammar.
It seems that the construction of an implicit list is only possible for
rules and read token within the rule, but not for imaginary tokens. I
hope I am wrong.

Please make more solution suggestions.

Am 19.10.2011 17:40, schrieb Jim Idle:
> t1+='void' (t2+='*')* -> ^(LIST TYPE[$t1]+ TYPE[$t2]+)
>
> By interpolating from your question. At least, that should get you on the
> right track.
>
>
> Jim
>
>> -----Original Message-----
>> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
>> bounces at antlr.org] On Behalf Of Christian
>> Sent: Wednesday, October 19, 2011 5:40 AM
>> To: antlr-interest at antlr.org
>> Subject: [antlr-interest] Rewriting a list of tokens to a list of
>> custom tokens
>>
>> Hello ANTLR community,
>>
>> I want to get
>>
>>     t+='void' (t+='*')*
>>
>> to a list of a custom token type, say TYPE. That is, each element/token
>> of the list should change its original type to the type TYPE.
>> The following approach does not work because invalid java code is
>> generated:
>>
>>     t+='void' (t+='*')* -> ^(TYPE[$t]+)
>>
>> The following implicit list generation works fine, however each element
>> retains its original type:
>>
>>     t+='void' (t+='*')* -> ^($t+)
>>
>> Can anyone tell me, whether and how this could be done?
>>
>> Thanks in advance,
>> Christian
>>
>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
>> email-address
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>


From jimi at temporal-wave.com  Wed Oct 19 14:38:47 2011
From: jimi at temporal-wave.com (Jim Idle)
Date: Wed, 19 Oct 2011 14:38:47 -0700
Subject: [antlr-interest] Rewriting a list of tokens to a list of custom
	tokens
In-Reply-To: <4E9F3FDD.8060103@gmx.de>
References: <4E9DF7F0.9040504@gmx.de> <4E9EC50C.30904@gmx.de>
	<fbfbedb88933732815fef4b46a906639@mail.gmail.com>
	<4E9F3FDD.8060103@gmx.de>
Message-ID: <2225f9bad68b9969b42c5dc09eacc169@mail.gmail.com>

Sorry, I did not see that list thing, but I was trying to get you on the
right track.

First, don't use literals
Put the tokens in subrules
Change the token type in subrule (I usually just set the type field in the
token, but that is a bit of a cheat)
I don't have time to test every code snippet that I post here


x: t1+=void (t2+=star)* -> ^(LIST $t1 $t2*) ;

void: t=VOID -> TYPE[$t];
stat: t=STAR -> TYPE[$t];

VOID: 'void';
STAR: '*';

Jim



> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of Christian
> Sent: Wednesday, October 19, 2011 2:24 PM
> To: antlr-interest at antlr.org
> Subject: Re: [antlr-interest] Rewriting a list of tokens to a list of
> custom tokens
>
> No, your solution still generates invalid java code for me. Did you
> test your solution? The TYPE token does not accept a list as parameter.
> It is a simple token defined within the token block at the top of the
> grammar.
> It seems that the construction of an implicit list is only possible for
> rules and read token within the rule, but not for imaginary tokens. I
> hope I am wrong.
>
> Please make more solution suggestions.
>
> Am 19.10.2011 17:40, schrieb Jim Idle:
> > t1+='void' (t2+='*')* -> ^(LIST TYPE[$t1]+ TYPE[$t2]+)
> >
> > By interpolating from your question. At least, that should get you on
> > the right track.
> >
> >
> > Jim
> >
> >> -----Original Message-----
> >> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> >> bounces at antlr.org] On Behalf Of Christian
> >> Sent: Wednesday, October 19, 2011 5:40 AM
> >> To: antlr-interest at antlr.org
> >> Subject: [antlr-interest] Rewriting a list of tokens to a list of
> >> custom tokens
> >>
> >> Hello ANTLR community,
> >>
> >> I want to get
> >>
> >>     t+='void' (t+='*')*
> >>
> >> to a list of a custom token type, say TYPE. That is, each
> >> element/token of the list should change its original type to the
> type TYPE.
> >> The following approach does not work because invalid java code is
> >> generated:
> >>
> >>     t+='void' (t+='*')* -> ^(TYPE[$t]+)
> >>
> >> The following implicit list generation works fine, however each
> >> element retains its original type:
> >>
> >>     t+='void' (t+='*')* -> ^($t+)
> >>
> >> Can anyone tell me, whether and how this could be done?
> >>
> >> Thanks in advance,
> >> Christian
> >>
> >> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> >> Unsubscribe:
> >> http://www.antlr.org/mailman/options/antlr-interest/your-
> >> email-address
> > List: http://www.antlr.org/mailman/listinfo/antlr-interest
> > Unsubscribe:
> > http://www.antlr.org/mailman/options/antlr-interest/your-email-
> address
> >
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
> email-address

From nunomdp at gmail.com  Thu Oct 20 02:31:37 2011
From: nunomdp at gmail.com (Nuno Pedrosa)
Date: Thu, 20 Oct 2011 10:31:37 +0100
Subject: [antlr-interest] IDs and keywords
Message-ID: <CAA_nJQsz4AcCNp09vApmircQtaf+j3TDwvnMR6TDp2opUgC_ZA@mail.gmail.com>

Hello everyone,

I have just started a project to convert our current way of processing the
file generated by our program into a more elegant way by using a parser
generator.

ANTLR so far as proven to be quite powerful but I think I have hit a bit of
a wall.

here is an extract of my grammar:
>>>>>>>>>>>>>>>>>>>>>>>
grammar MFL;

options{
 language = C;
}

model:
'MODEL'  ID  'ASSOC' cpa_vars id1=ID? id2=ID? ';'
;

cpa_vars returns [long var]:
    'CPA'     {$var = JVCPA;}
    | 'PSAT'  {$var = JVSVP;}
;

ID
    :('a'..'z'|'A'..'Z'|'0'..'9'|'_')
('a'..'z'|'A'..'Z'|'0'..'9'|'_'|'-'|','|'+'|'.')*
;
>>>>>>>>>>>>>>>>>>>>>>>>

I think this should be enough to explain my problem.

the rule model should match things like, but there are situation where it
does not work as I expected:
example: this matches OK
MODEL mymodel ASSOC CPA BIP1 ;

but says that <missing ID> where cpa is.
MODEL cpa ASSOC CPA BIP1 ;

debugging the code I understand the lexer has assigned token type to the
literal present in the cpa_vars rule instead of the mode generic ID token
type.

My question is: how do I make sure I match ID instead of  'CPA' of another
rule for this case?

The configuration file I am trying to parse follows this structure that
depending in the place the tokens are, they are considered actual tokens or
else they are just general identifiers.

I sure will appreciate any help on this.

Best regards,

Nuno

From chwchw at gmx.de  Thu Oct 20 03:49:40 2011
From: chwchw at gmx.de (Christian)
Date: Thu, 20 Oct 2011 12:49:40 +0200
Subject: [antlr-interest] Rewriting a list of tokens to a list of custom
 tokens
In-Reply-To: <2225f9bad68b9969b42c5dc09eacc169@mail.gmail.com>
References: <4E9DF7F0.9040504@gmx.de> <4E9EC50C.30904@gmx.de>
	<fbfbedb88933732815fef4b46a906639@mail.gmail.com>
	<4E9F3FDD.8060103@gmx.de>
	<2225f9bad68b9969b42c5dc09eacc169@mail.gmail.com>
Message-ID: <4E9FFCC4.1000808@gmx.de>

Works fine. Thanks, Jim !

I solely did not have to use keywords for the rule name, because 'void'
is a keyword in Java.

Many greetings,
Christian

Am 19.10.2011 23:38, schrieb Jim Idle:
> Sorry, I did not see that list thing, but I was trying to get you on the
> right track.
>
> First, don't use literals
> Put the tokens in subrules
> Change the token type in subrule (I usually just set the type field in the
> token, but that is a bit of a cheat)
> I don't have time to test every code snippet that I post here
>
>
> x: t1+=void (t2+=star)* -> ^(LIST $t1 $t2*) ;
>
> void: t=VOID -> TYPE[$t];
> stat: t=STAR -> TYPE[$t];
>
> VOID: 'void';
> STAR: '*';
>
> Jim
>
>
>
>> -----Original Message-----
>> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
>> bounces at antlr.org] On Behalf Of Christian
>> Sent: Wednesday, October 19, 2011 2:24 PM
>> To: antlr-interest at antlr.org
>> Subject: Re: [antlr-interest] Rewriting a list of tokens to a list of
>> custom tokens
>>
>> No, your solution still generates invalid java code for me. Did you
>> test your solution? The TYPE token does not accept a list as parameter.
>> It is a simple token defined within the token block at the top of the
>> grammar.
>> It seems that the construction of an implicit list is only possible for
>> rules and read token within the rule, but not for imaginary tokens. I
>> hope I am wrong.
>>
>> Please make more solution suggestions.
>>
>> Am 19.10.2011 17:40, schrieb Jim Idle:
>>> t1+='void' (t2+='*')* -> ^(LIST TYPE[$t1]+ TYPE[$t2]+)
>>>
>>> By interpolating from your question. At least, that should get you on
>>> the right track.
>>>
>>>
>>> Jim
>>>
>>>> -----Original Message-----
>>>> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
>>>> bounces at antlr.org] On Behalf Of Christian
>>>> Sent: Wednesday, October 19, 2011 5:40 AM
>>>> To: antlr-interest at antlr.org
>>>> Subject: [antlr-interest] Rewriting a list of tokens to a list of
>>>> custom tokens
>>>>
>>>> Hello ANTLR community,
>>>>
>>>> I want to get
>>>>
>>>>     t+='void' (t+='*')*
>>>>
>>>> to a list of a custom token type, say TYPE. That is, each
>>>> element/token of the list should change its original type to the
>> type TYPE.
>>>> The following approach does not work because invalid java code is
>>>> generated:
>>>>
>>>>     t+='void' (t+='*')* -> ^(TYPE[$t]+)
>>>>
>>>> The following implicit list generation works fine, however each
>>>> element retains its original type:
>>>>
>>>>     t+='void' (t+='*')* -> ^($t+)
>>>>
>>>> Can anyone tell me, whether and how this could be done?
>>>>
>>>> Thanks in advance,
>>>> Christian
>>>>
>>>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>>>> Unsubscribe:
>>>> http://www.antlr.org/mailman/options/antlr-interest/your-
>>>> email-address
>>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>>> Unsubscribe:
>>> http://www.antlr.org/mailman/options/antlr-interest/your-email-
>> address
>>
>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
>> email-address
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>


From peedee.nick at gmail.com  Thu Oct 20 04:57:32 2011
From: peedee.nick at gmail.com (Patrick Nick)
Date: Thu, 20 Oct 2011 13:57:32 +0200
Subject: [antlr-interest] Matching an arbitrary string until the next
 whitespace occurrence
In-Reply-To: <22394e141b2955e506427e6173ddf6fc@mail.gmail.com>
References: <mailman.292.1319009996.3141.antlr-interest@antlr.org>
	<CAH+7_B1Le9GyCPgXpth-sSwQqH8K8XvQxM=XPbOu4eOT87r6iw@mail.gmail.com>
	<B4ED2FA0-6094-4D95-A970-FCE6B47773F2@cs.usfca.edu>
	<CAH+7_B39eRiRRmeCaOkRPf57EwYEsp4jQEieqAyBA118pA=+NA@mail.gmail.com>
	<CAH+7_B3KJcCk73FTknRcmfCnKtPuu3w-1J96N3ybr7DsYoP1Gg@mail.gmail.com>
	<22394e141b2955e506427e6173ddf6fc@mail.gmail.com>
Message-ID: <CAH+7_B2B0gtMapXpfrnOJ+vszr-K3DUqL6eLfEDhUMUgj1+vJA@mail.gmail.com>

It makes sense, but I don't want to use getargs. To be more precise, I am
already using that, and only one of my arguments needs further parsing and
that's what I need my grammar for. This one argument is a tree of
parenthesized subexpressions, for example "(A AND B) OR ((C OR D) AND E)".
Now every one of those letters should contain one of a predefined set of
keywords, followed by an arbitrary string.

I could delimit that arbitrary string by some designated character like for
example double quotes, but the problem of matching everything in between
those doublequotes (no escape characters for now) remains. How should I go
about that? Is it possible with normal lexer and parser rules?

Thanks
Patrick


On Wed, Oct 19, 2011 at 6:16 PM, Jim Idle <jimi at temporal-wave.com> wrote:

> I suggest that you want to use getargs, and not try to parse things like
> this with ANTLR as the specification is too vague. The lexer is not
> context driven, so placing a rule like that in lexer will match everything
> that is whitespace to the detriment of any other rule at all.
>
>
> Jim
>
>
> > -----Original Message-----
> > From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> > bounces at antlr.org] On Behalf Of Patrick Nick
> > Sent: Wednesday, October 19, 2011 8:52 AM
> > To: antlr-interest at antlr.org
> > Subject: [antlr-interest] Matching an arbitrary string until the next
> > whitespace occurrence
> >
> > Hi all,
> >
> > I just started using antlr and was able to construct a nice grammar
> > that fulfills my application's needs. There is one thing which I
> > haven't been able to get to work though.
> > My grammar is parsing program arguments which the user supplied when
> > starting the program, and some of that input will need to be forwarded
> > to another program. This implies that I have almost no control over
> > those strings and need to be able to parse them only knowing that they
> > are delimited by whitespace. So what I need (I think) is a lexer rule
> > to match an arbitrary string which doesn't contain whitespace.
> >
> > Here is what I tried, with the intention that it should match anything
> > that doesn't contain one of the four characters.
> >
> > STRING :    (~(' '|'\t'|'\r'|'\n'))+ ;
> >
> > However, that does not seem to be working, it doesn't recognize numbers
> > for example, and I don't understand why.
> > Any hints?
> >
> > Regards
> > Patrick
> >
> > List: http://www.antlr.org/mailman/listinfo/antlr-interest
> > Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
> > email-address
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>

From jimi at temporal-wave.com  Thu Oct 20 08:44:10 2011
From: jimi at temporal-wave.com (Jim Idle)
Date: Thu, 20 Oct 2011 08:44:10 -0700
Subject: [antlr-interest] IDs and keywords
In-Reply-To: <CAA_nJQsz4AcCNp09vApmircQtaf+j3TDwvnMR6TDp2opUgC_ZA@mail.gmail.com>
References: <CAA_nJQsz4AcCNp09vApmircQtaf+j3TDwvnMR6TDp2opUgC_ZA@mail.gmail.com>
Message-ID: <cca3ecfcd8c7106a1cb759eabd4b2648@mail.gmail.com>

This is well covered in this forum, so use the search engine. But:

1) Do not use 'LITERALS', create real tokens;
2) Use a rule id instead of the token ID
3) The id rule has ID and all the keywords as alts, if producing AST, then
change type to ID;
4) Where this introduces ambiguity, use a one token predicate, or explicit
k=1;


Assuming AST...

id:  ID
  |  CPA    -> ID[$CPA]
  |  ASSOC  -> ID[$ASSOC]
... etc


model: MODEL id ASSOC cpa_vars id? id? SEMI ;

CPA  : 'CPA';
PSAT : 'PSAT';

etc...

Jim

> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of Nuno Pedrosa
> Sent: Thursday, October 20, 2011 2:32 AM
> To: antlr-interest at antlr.org
> Subject: [antlr-interest] IDs and keywords
>
> Hello everyone,
>
> I have just started a project to convert our current way of processing
> the file generated by our program into a more elegant way by using a
> parser generator.
>
> ANTLR so far as proven to be quite powerful but I think I have hit a
> bit of a wall.
>
> here is an extract of my grammar:
> >>>>>>>>>>>>>>>>>>>>>>>
> grammar MFL;
>
> options{
>  language = C;
> }
>
> model:
> 'MODEL'  ID  'ASSOC' cpa_vars id1=ID? id2=ID? ';'
> ;
>
> cpa_vars returns [long var]:
>     'CPA'     {$var = JVCPA;}
>     | 'PSAT'  {$var = JVSVP;}
> ;
>
> ID
>     :('a'..'z'|'A'..'Z'|'0'..'9'|'_')
> ('a'..'z'|'A'..'Z'|'0'..'9'|'_'|'-'|','|'+'|'.')*
> ;
> >>>>>>>>>>>>>>>>>>>>>>>>
>
> I think this should be enough to explain my problem.
>
> the rule model should match things like, but there are situation where
> it does not work as I expected:
> example: this matches OK
> MODEL mymodel ASSOC CPA BIP1 ;
>
> but says that <missing ID> where cpa is.
> MODEL cpa ASSOC CPA BIP1 ;
>
> debugging the code I understand the lexer has assigned token type to
> the literal present in the cpa_vars rule instead of the mode generic ID
> token type.
>
> My question is: how do I make sure I match ID instead of  'CPA' of
> another rule for this case?
>
> The configuration file I am trying to parse follows this structure that
> depending in the place the tokens are, they are considered actual
> tokens or else they are just general identifiers.
>
> I sure will appreciate any help on this.
>
> Best regards,
>
> Nuno
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
> email-address

From ruslan_zasukhin at valentina-db.com  Thu Oct 20 07:02:22 2011
From: ruslan_zasukhin at valentina-db.com (Ruslan Zasukhin)
Date: Thu, 20 Oct 2011 17:02:22 +0300
Subject: [antlr-interest] Typo in comments in C runtime... and Where is
	mismatchRecover() ??
Message-ID: <CAC6049E.F3DA3%ruslan_zasukhin@valentina-db.com>

Hi Jim,

For your info:

FILE  antlr3baserecognizer.c
 

/// The exception that was passed in, in the java implementation is
/// sorted in the recognizer exception stack in the C version. To 'throw' it
we set the
/// error flag and rules cascade back when this is set.
///
static void *    
recoverFromMismatchedToken  (pANTLR3_BASE_RECOGNIZER recognizer,
ANTLR3_UINT32 ttype, pANTLR3_BITSET_LIST follow)



sorted in the recognizer
^^^^^^^^^^

I think should be stored ...



======================
Also functions match() and mismatch() have comments,
Where is said that 

override mismatchRecover() and have it call
/// plain mismatch(), which does not recover

But Greep search over ANTLR 3.4 sources find only 3 mentions of this
mismatchRecover
And they all are in the comments.

antlr3baserecognizer.c: /// recovery, override mismatchRecover() and have it
call
antlr3baserecognizer.c: /// differently.  Override and call
mismatchRecover(input, ttype, follow)
antlr3baserecognizer.c: /// single token insertion and deletion. Override
mismatchRecover


There is no such function.

So where it is?  Comments are wrong?


I try now find way disable recover for our Valentina SQL parser...
Have re-read book section. But there only Java code ..
Have check C target docs ? nothing about recover ...
Have try search email list ? so far nothing useful found...


I think ? C target docs should have example code ...
Because very different to Java ... No exceptions ...


-- 
Best regards,

Ruslan Zasukhin
VP Engineering and New Technology
Paradigma Software, Inc

Valentina - Joining Worlds of Information
http://www.paradigmasoft.com

[I feel the need: the need for speed]


From jimi at temporal-wave.com  Thu Oct 20 08:46:29 2011
From: jimi at temporal-wave.com (Jim Idle)
Date: Thu, 20 Oct 2011 08:46:29 -0700
Subject: [antlr-interest] Rewriting a list of tokens to a list of custom
	tokens
In-Reply-To: <4E9FFCC4.1000808@gmx.de>
References: <4E9DF7F0.9040504@gmx.de> <4E9EC50C.30904@gmx.de>
	<fbfbedb88933732815fef4b46a906639@mail.gmail.com>	<4E9F3FDD.8060103@gmx.de>
	<2225f9bad68b9969b42c5dc09eacc169@mail.gmail.com>
	<4E9FFCC4.1000808@gmx.de>
Message-ID: <3d41305543bc5a2e0f652e3c6adb41d0@mail.gmail.com>

You have to rename the token is all...

KVOID: 'void' ;

Jim

> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of Christian
> Sent: Thursday, October 20, 2011 3:50 AM
> To: antlr-interest at antlr.org
> Subject: Re: [antlr-interest] Rewriting a list of tokens to a list of
> custom tokens
>
> Works fine. Thanks, Jim !
>
> I solely did not have to use keywords for the rule name, because 'void'
> is a keyword in Java.
>
> Many greetings,
> Christian
>
> Am 19.10.2011 23:38, schrieb Jim Idle:
> > Sorry, I did not see that list thing, but I was trying to get you on
> > the right track.
> >
> > First, don't use literals
> > Put the tokens in subrules
> > Change the token type in subrule (I usually just set the type field
> in
> > the token, but that is a bit of a cheat) I don't have time to test
> > every code snippet that I post here
> >
> >
> > x: t1+=void (t2+=star)* -> ^(LIST $t1 $t2*) ;
> >
> > void: t=VOID -> TYPE[$t];
> > stat: t=STAR -> TYPE[$t];
> >
> > VOID: 'void';
> > STAR: '*';
> >
> > Jim
> >
> >
> >
> >> -----Original Message-----
> >> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> >> bounces at antlr.org] On Behalf Of Christian
> >> Sent: Wednesday, October 19, 2011 2:24 PM
> >> To: antlr-interest at antlr.org
> >> Subject: Re: [antlr-interest] Rewriting a list of tokens to a list
> of
> >> custom tokens
> >>
> >> No, your solution still generates invalid java code for me. Did you
> >> test your solution? The TYPE token does not accept a list as
> parameter.
> >> It is a simple token defined within the token block at the top of
> the
> >> grammar.
> >> It seems that the construction of an implicit list is only possible
> >> for rules and read token within the rule, but not for imaginary
> >> tokens. I hope I am wrong.
> >>
> >> Please make more solution suggestions.
> >>
> >> Am 19.10.2011 17:40, schrieb Jim Idle:
> >>> t1+='void' (t2+='*')* -> ^(LIST TYPE[$t1]+ TYPE[$t2]+)
> >>>
> >>> By interpolating from your question. At least, that should get you
> >>> on the right track.
> >>>
> >>>
> >>> Jim
> >>>
> >>>> -----Original Message-----
> >>>> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> >>>> bounces at antlr.org] On Behalf Of Christian
> >>>> Sent: Wednesday, October 19, 2011 5:40 AM
> >>>> To: antlr-interest at antlr.org
> >>>> Subject: [antlr-interest] Rewriting a list of tokens to a list of
> >>>> custom tokens
> >>>>
> >>>> Hello ANTLR community,
> >>>>
> >>>> I want to get
> >>>>
> >>>>     t+='void' (t+='*')*
> >>>>
> >>>> to a list of a custom token type, say TYPE. That is, each
> >>>> element/token of the list should change its original type to the
> >> type TYPE.
> >>>> The following approach does not work because invalid java code is
> >>>> generated:
> >>>>
> >>>>     t+='void' (t+='*')* -> ^(TYPE[$t]+)
> >>>>
> >>>> The following implicit list generation works fine, however each
> >>>> element retains its original type:
> >>>>
> >>>>     t+='void' (t+='*')* -> ^($t+)
> >>>>
> >>>> Can anyone tell me, whether and how this could be done?
> >>>>
> >>>> Thanks in advance,
> >>>> Christian
> >>>>
> >>>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> >>>> Unsubscribe:
> >>>> http://www.antlr.org/mailman/options/antlr-interest/your-
> >>>> email-address
> >>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> >>> Unsubscribe:
> >>> http://www.antlr.org/mailman/options/antlr-interest/your-email-
> >> address
> >>
> >> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> >> Unsubscribe:
> >> http://www.antlr.org/mailman/options/antlr-interest/your-
> >> email-address
> > List: http://www.antlr.org/mailman/listinfo/antlr-interest
> > Unsubscribe:
> > http://www.antlr.org/mailman/options/antlr-interest/your-email-
> address
> >
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
> email-address

From WeikEngOff at aol.com  Thu Oct 20 09:12:19 2011
From: WeikEngOff at aol.com (Udo Weik)
Date: Thu, 20 Oct 2011 18:12:19 +0200
Subject: [antlr-interest] Jim Idle: C-Runtime, *.c-file should be *.cpp
Message-ID: <4EA04863.3030608@aol.com>

Hello Jim,

is there any simple way that the generated *.c-file is named *.cpp?


Many thanks and greetings
Udo

From jimi at temporal-wave.com  Thu Oct 20 11:07:13 2011
From: jimi at temporal-wave.com (Jim Idle)
Date: Thu, 20 Oct 2011 11:07:13 -0700
Subject: [antlr-interest] Jim Idle: C-Runtime, *.c-file should be *.cpp
In-Reply-To: <4EA04863.3030608@aol.com>
References: <4EA04863.3030608@aol.com>
Message-ID: <5c3bb2195d63cd1ca46e02196937c7ab@mail.gmail.com>

You can change the CTarget.java and rebuild the tool, but it is much
easier to just add the "Compile as C++" flag to the compiler:

MS:  /TP
gcc: -x cpp


Or you could trivially add a makefile rule to rename them after the antlr
tool is run.


Jim


> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of Udo Weik
> Sent: Thursday, October 20, 2011 9:12 AM
> To: antlr-interest at antlr.org
> Subject: [antlr-interest] Jim Idle: C-Runtime, *.c-file should be *.cpp
>
> Hello Jim,
>
> is there any simple way that the generated *.c-file is named *.cpp?
>
>
> Many thanks and greetings
> Udo
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
> email-address

From chwchw at gmx.de  Thu Oct 20 11:11:56 2011
From: chwchw at gmx.de (Christian)
Date: Thu, 20 Oct 2011 20:11:56 +0200
Subject: [antlr-interest] Rewriting a list of tokens to a list of custom
 tokens
In-Reply-To: <3d41305543bc5a2e0f652e3c6adb41d0@mail.gmail.com>
References: <4E9DF7F0.9040504@gmx.de> <4E9EC50C.30904@gmx.de>
	<fbfbedb88933732815fef4b46a906639@mail.gmail.com>	<4E9F3FDD.8060103@gmx.de>
	<2225f9bad68b9969b42c5dc09eacc169@mail.gmail.com>
	<4E9FFCC4.1000808@gmx.de>
	<3d41305543bc5a2e0f652e3c6adb41d0@mail.gmail.com>
Message-ID: <4EA0646C.90506@gmx.de>

Yes sure, I know, although I meant the rule name, not the token name. I
just wanted to mention it.

Am 20.10.2011 17:46, schrieb Jim Idle:
> You have to rename the token is all...
>
> KVOID: 'void' ;
>
> Jim
>
>> -----Original Message-----
>> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
>> bounces at antlr.org] On Behalf Of Christian
>> Sent: Thursday, October 20, 2011 3:50 AM
>> To: antlr-interest at antlr.org
>> Subject: Re: [antlr-interest] Rewriting a list of tokens to a list of
>> custom tokens
>>
>> Works fine. Thanks, Jim !
>>
>> I solely did not have to use keywords for the rule name, because 'void'
>> is a keyword in Java.
>>
>> Many greetings,
>> Christian
>>
>> Am 19.10.2011 23:38, schrieb Jim Idle:
>>> Sorry, I did not see that list thing, but I was trying to get you on
>>> the right track.
>>>
>>> First, don't use literals
>>> Put the tokens in subrules
>>> Change the token type in subrule (I usually just set the type field
>> in
>>> the token, but that is a bit of a cheat) I don't have time to test
>>> every code snippet that I post here
>>>
>>>
>>> x: t1+=void (t2+=star)* -> ^(LIST $t1 $t2*) ;
>>>
>>> void: t=VOID -> TYPE[$t];
>>> stat: t=STAR -> TYPE[$t];
>>>
>>> VOID: 'void';
>>> STAR: '*';
>>>
>>> Jim
>>>
>>>
>>>
>>>> -----Original Message-----
>>>> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
>>>> bounces at antlr.org] On Behalf Of Christian
>>>> Sent: Wednesday, October 19, 2011 2:24 PM
>>>> To: antlr-interest at antlr.org
>>>> Subject: Re: [antlr-interest] Rewriting a list of tokens to a list
>> of
>>>> custom tokens
>>>>
>>>> No, your solution still generates invalid java code for me. Did you
>>>> test your solution? The TYPE token does not accept a list as
>> parameter.
>>>> It is a simple token defined within the token block at the top of
>> the
>>>> grammar.
>>>> It seems that the construction of an implicit list is only possible
>>>> for rules and read token within the rule, but not for imaginary
>>>> tokens. I hope I am wrong.
>>>>
>>>> Please make more solution suggestions.
>>>>
>>>> Am 19.10.2011 17:40, schrieb Jim Idle:
>>>>> t1+='void' (t2+='*')* -> ^(LIST TYPE[$t1]+ TYPE[$t2]+)
>>>>>
>>>>> By interpolating from your question. At least, that should get you
>>>>> on the right track.
>>>>>
>>>>>
>>>>> Jim
>>>>>
>>>>>> -----Original Message-----
>>>>>> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
>>>>>> bounces at antlr.org] On Behalf Of Christian
>>>>>> Sent: Wednesday, October 19, 2011 5:40 AM
>>>>>> To: antlr-interest at antlr.org
>>>>>> Subject: [antlr-interest] Rewriting a list of tokens to a list of
>>>>>> custom tokens
>>>>>>
>>>>>> Hello ANTLR community,
>>>>>>
>>>>>> I want to get
>>>>>>
>>>>>>     t+='void' (t+='*')*
>>>>>>
>>>>>> to a list of a custom token type, say TYPE. That is, each
>>>>>> element/token of the list should change its original type to the
>>>> type TYPE.
>>>>>> The following approach does not work because invalid java code is
>>>>>> generated:
>>>>>>
>>>>>>     t+='void' (t+='*')* -> ^(TYPE[$t]+)
>>>>>>
>>>>>> The following implicit list generation works fine, however each
>>>>>> element retains its original type:
>>>>>>
>>>>>>     t+='void' (t+='*')* -> ^($t+)
>>>>>>
>>>>>> Can anyone tell me, whether and how this could be done?
>>>>>>
>>>>>> Thanks in advance,
>>>>>> Christian
>>>>>>
>>>>>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>>>>>> Unsubscribe:
>>>>>> http://www.antlr.org/mailman/options/antlr-interest/your-
>>>>>> email-address
>>>>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>>>>> Unsubscribe:
>>>>> http://www.antlr.org/mailman/options/antlr-interest/your-email-
>>>> address
>>>>
>>>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>>>> Unsubscribe:
>>>> http://www.antlr.org/mailman/options/antlr-interest/your-
>>>> email-address
>>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>>> Unsubscribe:
>>> http://www.antlr.org/mailman/options/antlr-interest/your-email-
>> address
>>
>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
>> email-address
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>


From WeikEngOff at aol.com  Thu Oct 20 12:01:04 2011
From: WeikEngOff at aol.com (Udo Weik)
Date: Thu, 20 Oct 2011 21:01:04 +0200
Subject: [antlr-interest] Jim Idle: C-Runtime,
	C-Compilers - no breakpoints after 65535 lines?
Message-ID: <4EA06FF0.5040002@aol.com>

Hello again Jim,

thanks for the last answer.

What is your experience with MS/GCC and other C-Compilers -
are there (still) any limitations in the number of lines
where breakpints can be set, e. g. 65535?


Many thanks and greetings
Udo

From jimi at temporal-wave.com  Thu Oct 20 12:02:47 2011
From: jimi at temporal-wave.com (Jim Idle)
Date: Thu, 20 Oct 2011 12:02:47 -0700
Subject: [antlr-interest] Jim Idle: C-Runtime,
 C-Compilers - no breakpoints after 65535 lines?
In-Reply-To: <4EA06FF0.5040002@aol.com>
References: <4EA06FF0.5040002@aol.com>
Message-ID: <a4a3140818c0156b8fa2945026cd0ad1@mail.gmail.com>

I think that the VS2010 compiler fixed this, which was a limitation in the
debug information database. However, I cannot guarantee that.

Jim

> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of Udo Weik
> Sent: Thursday, October 20, 2011 12:01 PM
> To: antlr-interest at antlr.org
> Subject: [antlr-interest] Jim Idle: C-Runtime, C-Compilers - no
> breakpoints after 65535 lines?
>
> Hello again Jim,
>
> thanks for the last answer.
>
> What is your experience with MS/GCC and other C-Compilers - are there
> (still) any limitations in the number of lines where breakpints can be
> set, e. g. 65535?
>
>
> Many thanks and greetings
> Udo
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
> email-address

From ruslan_zasukhin at valentina-db.com  Thu Oct 20 14:41:35 2011
From: ruslan_zasukhin at valentina-db.com (Ruslan Zasukhin)
Date: Fri, 21 Oct 2011 00:41:35 +0300
Subject: [antlr-interest] [C target][HEELP :-] About disable recovery
 ... Override recoverFromMismatchedToken() ... Linker error
In-Reply-To: <8602ad99219ef7fdc3dc4da51a7f16b5@mail.gmail.com>
Message-ID: <CAC6703F.F3E6B%ruslan_zasukhin@valentina-db.com>

On 10/21/11 12:35 AM, "Jim Idle" <jimi at temporal-wave.com> wrote:

Okay I see ... Thank you for point.


Hmm. 

Jim, I think it will be better and simpler, if you will add right into
antlr3baserecognizer.c file this small function

void* recoverFromMismatchedToken_off(
????pANTLR3_BASE_RECOGNIZER recognizer, ANTLR3_UINT32 ttype,
pANTLR3_BITSET_LIST follow)
{
????mismatch( recognizer, ttype, follow );
????return NULL;
}


And provide for us easy way to switch to it in the @parser::apifuncs

Then WE - users of ANTLR, will need just one line to switch.
This will be good yes?  :-)



> You need to copy the mismatch locally or call it via a pointer (if it is in
> the interface, but I think it is not).

> Jim



> *From:* Ruslan Zasukhin [mailto:ruslan_zasukhin at valentina-db.com]
> *Sent:* Thursday, October 20, 2011 2:30 PM
> *To:* Jim Idle
> *Subject:* [C target][HEELP :-] About disable recovery ... Override
> recoverFromMismatchedToken() ... Linker error
> 
> 
> 
> Hi Jim,
> 
> So it seems I have realize (like prev person who did ask same)
> That  this comment is out of date and  mismatchRecover()
> was renamed to recoverFromMismatchedToken()
> 
> -----------------------------------------------------------
> /// To turn off single token insertion or deletion error
> /// recovery, override mismatchRecover() and have it call
> /// plain mismatch(), which does not recover.  Then any error
> /// in a rule will cause an exception and immediate exit from
> /// rule.  Rule would recover by resynchronizing to the set of
> /// symbols that can follow rule ref.
> ///
> static void *
> match(    pANTLR3_BASE_RECOGNIZER recognizer,
>         ANTLR3_UINT32 ttype, pANTLR3_BITSET_LIST follow)
> -----------------------------------------------------------
> 
> 
> So I have try made this function as next:
> 
> void* recoverFromMismatchedToken_off(
>     pANTLR3_BASE_RECOGNIZER recognizer, ANTLR3_UINT32 ttype,
> pANTLR3_BITSET_LIST follow)
> {
>     mismatch( recognizer, ttype, follow );
>     return NULL;
> }
> 
> @parser::apifuncs
> {
>     // Install custom error message display
>     //
>     RECOGNIZER->displayRecognitionError = vdb_BuildRecognitionErrorStr;
>     RECOGNIZER->recoverFromMismatchedToken = recoverFromMismatchedToken_off;
> .......
> 
> 
> ==========================================
> *PROBLEM IS:
> *
> Method match() is declared as static  in the antlr3baserecognizer.c
> So linker of course give us error.
> 
> Then I wonder:
>     why comment says that we must call  mismatch() ?
>     how ??
> 
> 
> We should change sources of ANTLR3 ? I hope not.
> But so far I do not see other way ...
> Static method is static method ...
> 
> 

-- 
Best regards,

Ruslan Zasukhin
VP Engineering and New Technology
Paradigma Software, Inc

Valentina - Joining Worlds of Information
http://www.paradigmasoft.com

[I feel the need: the need for speed]



From ruslan_zasukhin at valentina-db.com  Thu Oct 20 14:54:41 2011
From: ruslan_zasukhin at valentina-db.com (Ruslan Zasukhin)
Date: Fri, 21 Oct 2011 00:54:41 +0300
Subject: [antlr-interest] [C target][HEELP :-] About disable recovery
 ... Override recoverFromMismatchedToken() ... Linker error
In-Reply-To: <CAC6703F.F3E6B%ruslan_zasukhin@valentina-db.com>
Message-ID: <CAC67351.F3E71%ruslan_zasukhin@valentina-db.com>

On 10/21/11 12:41 AM, "Ruslan Zasukhin" <ruslan_zasukhin at valentina-db.com>
wrote:

>> You need to copy the mismatch locally or call it via a pointer (if it is in
>> the interface, but I think it is not).

Jim,

This not works, because mismatch() calls other static hidden functions.
Oops ... E.g. 


error: 'mismatchIsUnwantedToken' was not declared in this scope


Something is not good here

Anybody really was able do this for C Target?  :-)



-- 
Best regards,

Ruslan Zasukhin
VP Engineering and New Technology
Paradigma Software, Inc

Valentina - Joining Worlds of Information
http://www.paradigmasoft.com

[I feel the need: the need for speed]



From ruslan_zasukhin at valentina-db.com  Fri Oct 21 01:24:03 2011
From: ruslan_zasukhin at valentina-db.com (Ruslan Zasukhin)
Date: Fri, 21 Oct 2011 11:24:03 +0300
Subject: [antlr-interest] [C target] About disable recovery ... [Solution?]
In-Reply-To: <CAC67351.F3E71%ruslan_zasukhin@valentina-db.com>
Message-ID: <CAC706D3.F3EC6%ruslan_zasukhin@valentina-db.com>

Hi All,

I want describe for archive of this list solution which I have found after 3
days learning issue.

So ... Story is.

1) I have read book ... Here info only for Java ... Overrite this. Catch
exception.. But in C no exception, so it is clear I must find info for C.

2) I jump to site -> docs -> C target   ===>  NOTHING ?
    but should be info + example here, because C target
    differs from Java. No exceptions.

3) I start search list archive... Nothing useful except last letter from
guy, which note that C comment says we must override mismatchRecover(),
But there is no such function, probably it was renamed to
recoverFromMismatchedToken()
 

4) Okay, I try override this function in MY ,cpp file.
But... Ops.  mismatch() function,  is STATIC, so I cannot link to it from my
sourcs.

Jim have suggest copy to my sources mismatch() also,
Okay I try that and ... It even not compiles, because mismatch() calls other
static funcs ...   

Dirty force then:  I make it in the antlr3baserecognizer.c

Compiles links ...  HAPPY -> start do tests  ....
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

And I see that for example such SQL query with error
    
    "DRO TABLE T1"

Still do 3 iterations ...

Debugging shows me that I even do not get into recoverFromMismatchedToken()
Oops again...

After some debugging, I have note, that each rule, always calls recover(),
and exactly this method clears error flag.

So I do next attempt:  I make own simple recover()

void vdb_recover_off( pANTLR3_BASE_RECOGNIZER recognizer )
{
    return;
}


And replace default in the parser:

@parser::apifuncs
{
    // Install custom error message display
    //
    RECOGNIZER->displayRecognitionError = vdb_BuildRecognitionErrorStr;
    RECOGNIZER->recover = vdb_recover_off;



And finally !!!!    It works as I want that ...
Parser builds error string and stops right on the first work  DRO.
 
I will write also now separate letter to Terrence and Jim,
where I will try explain why such simple thing as
        option RECOVER = FALSE

Should not take 3 days from users of ANTLR :)

I hope this letter will save time to future C users of ANTRL.


===================
P.S. 

Also while I did learn this recover dances on ANTLR,
And read that we must override recoverFromMismatchedToken()
I have asked self:

here exists yet 
    recoverFromMismatchedSet(),
    recoverFromMismatchedElement
    recover()


Why only ONE that function should be overriden?

I think in Docs, Books, Comments, this should be explained also in clean
way. Right?


-- 
Best regards,

Ruslan Zasukhin
VP Engineering and New Technology
Paradigma Software, Inc

Valentina - Joining Worlds of Information
http://www.paradigmasoft.com

[I feel the need: the need for speed]



From roohul17 at yahoo.com  Fri Oct 21 02:51:19 2011
From: roohul17 at yahoo.com (Roohul)
Date: Fri, 21 Oct 2011 02:51:19 -0700 (PDT)
Subject: [antlr-interest] Traverse Switch case to If-else
Message-ID: <1319190679.49460.YahooMailNeo@web39423.mail.mud.yahoo.com>

Hi,

I am translating from one language to another using ANTLR. The language which I am translating is having Switch case and the target language does not have Switch Case. I need to traverse the Switch Cases to If-elseif-else . How I can do that ???

I appreciate you help in this regard.?
?
Regards

Roohul 

From WeikEngOff at aol.com  Fri Oct 21 04:44:32 2011
From: WeikEngOff at aol.com (Udo Weik)
Date: Fri, 21 Oct 2011 13:44:32 +0200
Subject: [antlr-interest] Getting names of lexer/parser rules from a Runtime
Message-ID: <4EA15B20.60806@aol.com>

Hello,

I already asked Jim that question concerning the C-Runtime.
His answer:
 > No - you have to code that. But they are rarely useful. If you want them
 > as indicators for error refinement, then implement a global scope and add
 > it to each rule, in the rule set a scope member variable to a predefined
 > value for each rule, then access the scope stack in the error reporting
 > method.

So my question is - what is the simplest way to get these names? I'm working
with complex grammars, so at least I want to automate adding necessary (action)
code snippets (e. g. via Regex search and replace). Any other/better ideas?


Many thanks and greetings
Udo

From weissig at rbg.informatik.tu-darmstadt.de  Fri Oct 21 05:00:23 2011
From: weissig at rbg.informatik.tu-darmstadt.de (=?ISO-8859-15?Q?Yves_Wei=DFig?=)
Date: Fri, 21 Oct 2011 14:00:23 +0200
Subject: [antlr-interest] Beginner needing help with tree grammar
Message-ID: <4EA15ED7.1020800@rbg.informatik.tu-darmstadt.de>

Hi list,

I'm stucked with a problem in a tree grammar. I'm trying to extent my
grammar from my previous post by adding an output module using
TreeGrammar and String Template. My TreeGrammar looks like this:

prog      : (space | group)+ ;

plaintext : TEXT | AZ | HYPHEN | UNDERSCORE | TILDE | APOSTROPHE | INT ;

command   : ^(COMMAND n=AZ v=INT?) -> command(n={$n.text},v={$v.text}) ;

escape    :
            ^(ESCAPE v=OPEN) -> escape(v={$v.text}) |
            ^(ESCAPE v=CLOSE) -> escape(v={$v.text}) |
            ^(ESCAPE v=BACKSLASH) -> escape(v={$v.text}) |
            ^(ESCAPE v=ASTERISK) -> escape(v={$v.text}) |
            ^(ESCAPE v=HYPHEN) -> escape(v={$v.text}) |
            ^(ESCAPE v=UNDERSCORE) -> escape(v={$v.text}) |
            ^(ESCAPE v=TILDE) -> escape(v={$v.text}) |
            ^(ESCAPE v=HEXESCAPE) -> hexescape(v={$v.text}) ;

space     :
            ^(WS v=WS) -> ws(v={$v.text}) |
            ^(TAB v=TAB) -> tab(v={$v.text}) |
            ^(NEWLINE v=NEWLINE) -> newline(v={$v.text}) ;

delimiter :
            ^(DELIMITER v=WS) -> ws(v={$v.text}) |
            ^(DELIMITER v=TAB) -> tab(v={$v.text}) |
            ^(DELIMITER v=NEWLINE) -> newline(v={$v.text}) ;

group     :
            ^(GROUP v+=space*
              (v+=group v+=space* |
              v+=plaintext v+=space* |
              (v+=command | v+=escape)
              (v+=delimiter v+=space+ | v+=delimiter | ))+) ->
group(v={$v}) ;

Now given the previous example RTF text my parser works fine and gives me:

(WS   ) (GROUP (COMMAND pard) (COMMAND fs 32) (COMMAND b) (DELIMITER  )
NOTES (COMMAND par)) (NEWLINE
) (WS   ) (GROUP (COMMAND pard) (COMMAND fs 26) (DELIMITER  ) Recently
(WS  ) I (WS  ) skimmed (WS  ) (GROUP (COMMAND i) (DELIMITER  )
Structure (WS  ) and (WS  ) Interpretation (WS  ) of (NEWLINE
) (WS    ) Computer (WS  ) Programs) , (WS  ) by (WS  ) Sussman (WS  )
and (WS  ) Abelson , (WS  ) and (WS  ) I (WS  ) think (WS  ) there (WS
) should (NEWLINE
) (WS    ) have (WS  ) been (WS  ) more (WS      ) (TAB 	) (WS  )
pictures . (NEWLINE
) (WS   ) (COMMAND line) (DELIMITER  ) I (WS  ) like (WS  ) pictures .
(WS   ) Is (WS  ) that (WS  ) so (WS  ) na (ESCAPE \'ef) ve ? (NEWLINE
) (WS   ) (COMMAND par))

the tree walker now fails:

node from line 1:0 required (...)+ loop did not match anything at input 'WS'

but there is a WS node at the beginning, what am I doing wrong?

Best regards, Yves

From tim at poole.co.uk  Fri Oct 21 09:39:23 2011
From: tim at poole.co.uk (Tim Poole)
Date: Fri, 21 Oct 2011 17:39:23 +0100
Subject: [antlr-interest] getText()
Message-ID: <4EA1A03B.3040709@poole.co.uk>

Hi,

I have just had to use this to change the single quotes around a string 
to double quotes:

STRINGLITERAL
     : (QUOTE (ESCAPEQUOTE | CHARNOQUOTE)* QUOTE)
     | (APOS  (ESCAPEAPOS | CHARNOAPOS)* APOS) 
{setText(getText().replace('\'','\"'));}
     ;

It's an adaptation of:

http://antlr.org/grammar/1264460091565/XPath2.g

I tried to do the following, without success:

STRINGLITERAL
     : (QUOTE (ESCAPEQUOTE | CHARNOQUOTE)* QUOTE)
     | (APOS st=(ESCAPEAPOS | CHARNOAPOS)* APOS) {setText("\"" + 
$st.text + "\"");}
     ;

Any ideas on how I can implement something along the lines of the second 
one?  It was easy to rewrite this time, but next time might not be so easy!

Thanks in advance,

Tim.

From jimi at temporal-wave.com  Fri Oct 21 09:48:29 2011
From: jimi at temporal-wave.com (Jim Idle)
Date: Fri, 21 Oct 2011 09:48:29 -0700
Subject: [antlr-interest] [C target][HEELP :-] About disable recovery
 ... Override recoverFromMismatchedToken() ... Linker error
In-Reply-To: <CAC67351.F3E71%ruslan_zasukhin@valentina-db.com>
References: <CAC6703F.F3E6B%ruslan_zasukhin@valentina-db.com>
	<CAC67351.F3E71%ruslan_zasukhin@valentina-db.com>
Message-ID: <70cccd78fa8e31c963064b8448b73d59@mail.gmail.com>

In the baserecognizer code, the functions are called directly, but they
are all available indirectly via the pointer interface. I think you are
not fundamentally understanding this. So, they are all static to their
source code files and do not pollute the namespace, and when they are not
being called internally, you call them via their pointers in the
interface.

Do you see this in the antlr3BaseRecognizerNew():

recognizer->match                       = match;
    recognizer->matchAny                    = matchAny;
    recognizer->memoize                     = memoize;
    recognizer->mismatch                    = mismatch;
    recognizer->mismatchIsUnwantedToken     = mismatchIsUnwantedToken;
    recognizer->mismatchIsMissingToken      = mismatchIsMissingToken;
    recognizer->recover                     = recover;
    recognizer->recoverFromMismatchedElement=
recoverFromMismatchedElement;
    recognizer->recoverFromMismatchedSet    = recoverFromMismatchedSet;
    recognizer->recoverFromMismatchedToken  = recoverFromMismatchedToken;

etc


So, install your own versions of whatever you like, then in your external
version, call the methods via the pointers in the interface. Easy. This is
true of ALL the interfaces, so that you can override any method you like.
Now, perhaps I should have called the error recovery methods indirectly in
the library itself, but they are all bound together and it is a trivial
matter for you to call mismatch indirectly instead of directly in your
code.

Jim



> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of Ruslan Zasukhin
> Sent: Thursday, October 20, 2011 2:55 PM
> To: antlr-interest at antlr.org
> Subject: Re: [antlr-interest] [C target][HEELP :-] About disable
> recovery ... Override recoverFromMismatchedToken() ... Linker error
>
> On 10/21/11 12:41 AM, "Ruslan Zasukhin" <ruslan_zasukhin at valentina-
> db.com>
> wrote:
>
> >> You need to copy the mismatch locally or call it via a pointer (if
> it
> >> is in the interface, but I think it is not).
>
> Jim,
>
> This not works, because mismatch() calls other static hidden functions.
> Oops ... E.g.
>
>
> error: 'mismatchIsUnwantedToken' was not declared in this scope
>
>
> Something is not good here
>
> Anybody really was able do this for C Target?  :-)
>
>
>
> --
> Best regards,
>
> Ruslan Zasukhin
> VP Engineering and New Technology
> Paradigma Software, Inc
>
> Valentina - Joining Worlds of Information http://www.paradigmasoft.com
>
> [I feel the need: the need for speed]
>
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
> email-address

From jimi at temporal-wave.com  Fri Oct 21 09:52:55 2011
From: jimi at temporal-wave.com (Jim Idle)
Date: Fri, 21 Oct 2011 09:52:55 -0700
Subject: [antlr-interest] [C target] About disable recovery ...
	[Solution?]
In-Reply-To: <CAC706D3.F3EC6%ruslan_zasukhin@valentina-db.com>
References: <CAC67351.F3E71%ruslan_zasukhin@valentina-db.com>
	<CAC706D3.F3EC6%ruslan_zasukhin@valentina-db.com>
Message-ID: <ac54818eaffe2e3e8e329f763e00f1be@mail.gmail.com>

If you read through the source code, you would have seen that you did not
need to do this.

Jim

> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of Ruslan Zasukhin
> Sent: Friday, October 21, 2011 1:24 AM
> To: antlr-interest at antlr.org
> Subject: [antlr-interest] [C target] About disable recovery ...
> [Solution?]
>
> Hi All,
>
> I want describe for archive of this list solution which I have found
> after 3 days learning issue.
>
> So ... Story is.
>
> 1) I have read book ... Here info only for Java ... Overrite this.
> Catch exception.. But in C no exception, so it is clear I must find
> info for C.
>
> 2) I jump to site -> docs -> C target   ===>  NOTHING ?
>     but should be info + example here, because C target
>     differs from Java. No exceptions.
>
> 3) I start search list archive... Nothing useful except last letter
> from guy, which note that C comment says we must override
> mismatchRecover(), But there is no such function, probably it was
> renamed to
> recoverFromMismatchedToken()
>
>
> 4) Okay, I try override this function in MY ,cpp file.
> But... Ops.  mismatch() function,  is STATIC, so I cannot link to it
> from my sourcs.
>
> Jim have suggest copy to my sources mismatch() also, Okay I try that
> and ... It even not compiles, because mismatch() calls other
> static funcs ...
>
> Dirty force then:  I make it in the antlr3baserecognizer.c
>
> Compiles links ...  HAPPY -> start do tests  ....
> ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
>
> And I see that for example such SQL query with error
>
>     "DRO TABLE T1"
>
> Still do 3 iterations ...
>
> Debugging shows me that I even do not get into
> recoverFromMismatchedToken() Oops again...
>
> After some debugging, I have note, that each rule, always calls
> recover(), and exactly this method clears error flag.
>
> So I do next attempt:  I make own simple recover()
>
> void vdb_recover_off( pANTLR3_BASE_RECOGNIZER recognizer ) {
>     return;
> }
>
>
> And replace default in the parser:
>
> @parser::apifuncs
> {
>     // Install custom error message display
>     //
>     RECOGNIZER->displayRecognitionError = vdb_BuildRecognitionErrorStr;
>     RECOGNIZER->recover = vdb_recover_off;
>
>
>
> And finally !!!!    It works as I want that ...
> Parser builds error string and stops right on the first work  DRO.
>
> I will write also now separate letter to Terrence and Jim, where I will
> try explain why such simple thing as
>         option RECOVER = FALSE
>
> Should not take 3 days from users of ANTLR :)
>
> I hope this letter will save time to future C users of ANTRL.
>
>
> ===================
> P.S.
>
> Also while I did learn this recover dances on ANTLR, And read that we
> must override recoverFromMismatchedToken() I have asked self:
>
> here exists yet
>     recoverFromMismatchedSet(),
>     recoverFromMismatchedElement
>     recover()
>
>
> Why only ONE that function should be overriden?
>
> I think in Docs, Books, Comments, this should be explained also in
> clean way. Right?
>
>
> --
> Best regards,
>
> Ruslan Zasukhin
> VP Engineering and New Technology
> Paradigma Software, Inc
>
> Valentina - Joining Worlds of Information http://www.paradigmasoft.com
>
> [I feel the need: the need for speed]
>
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
> email-address

From jimi at temporal-wave.com  Fri Oct 21 10:00:23 2011
From: jimi at temporal-wave.com (Jim Idle)
Date: Fri, 21 Oct 2011 10:00:23 -0700
Subject: [antlr-interest] Getting names of lexer/parser rules from a
	Runtime
In-Reply-To: <4EA15B20.60806@aol.com>
References: <4EA15B20.60806@aol.com>
Message-ID: <52c71d9de8615fd366ab594868ebd95f@mail.gmail.com>

Again, why do you want the NAMES of the rules? But there is no automated
way to program this.

Jim

> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of Udo Weik
> Sent: Friday, October 21, 2011 4:45 AM
> To: antlr-interest at antlr.org
> Subject: [antlr-interest] Getting names of lexer/parser rules from a
> Runtime
>
> Hello,
>
> I already asked Jim that question concerning the C-Runtime.
> His answer:
>  > No - you have to code that. But they are rarely useful. If you want
> them  > as indicators for error refinement, then implement a global
> scope and add  > it to each rule, in the rule set a scope member
> variable to a predefined  > value for each rule, then access the scope
> stack in the error reporting  > method.
>
> So my question is - what is the simplest way to get these names? I'm
> working with complex grammars, so at least I want to automate adding
> necessary (action) code snippets (e. g. via Regex search and replace).
> Any other/better ideas?
>
>
> Many thanks and greetings
> Udo
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
> email-address

From jimi at temporal-wave.com  Fri Oct 21 10:02:03 2011
From: jimi at temporal-wave.com (Jim Idle)
Date: Fri, 21 Oct 2011 10:02:03 -0700
Subject: [antlr-interest] Beginner needing help with tree grammar
In-Reply-To: <4EA15ED7.1020800@rbg.informatik.tu-darmstadt.de>
References: <4EA15ED7.1020800@rbg.informatik.tu-darmstadt.de>
Message-ID: <a724d7bbeac0945d564c2d271424a4ba@mail.gmail.com>

A node with no children is specified as simply:

space: WS

Not

space: ^(WS WS)


Jim

> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of Yves Wei?ig
> Sent: Friday, October 21, 2011 5:00 AM
> To: antlr-interest at antlr.org
> Subject: [antlr-interest] Beginner needing help with tree grammar
>
> Hi list,
>
> I'm stucked with a problem in a tree grammar. I'm trying to extent my
> grammar from my previous post by adding an output module using
> TreeGrammar and String Template. My TreeGrammar looks like this:
>
> prog      : (space | group)+ ;
>
> plaintext : TEXT | AZ | HYPHEN | UNDERSCORE | TILDE | APOSTROPHE | INT
> ;
>
> command   : ^(COMMAND n=AZ v=INT?) -> command(n={$n.text},v={$v.text})
> ;
>
> escape    :
>             ^(ESCAPE v=OPEN) -> escape(v={$v.text}) |
>             ^(ESCAPE v=CLOSE) -> escape(v={$v.text}) |
>             ^(ESCAPE v=BACKSLASH) -> escape(v={$v.text}) |
>             ^(ESCAPE v=ASTERISK) -> escape(v={$v.text}) |
>             ^(ESCAPE v=HYPHEN) -> escape(v={$v.text}) |
>             ^(ESCAPE v=UNDERSCORE) -> escape(v={$v.text}) |
>             ^(ESCAPE v=TILDE) -> escape(v={$v.text}) |
>             ^(ESCAPE v=HEXESCAPE) -> hexescape(v={$v.text}) ;
>
> space     :
>             ^(WS v=WS) -> ws(v={$v.text}) |
>             ^(TAB v=TAB) -> tab(v={$v.text}) |
>             ^(NEWLINE v=NEWLINE) -> newline(v={$v.text}) ;
>
> delimiter :
>             ^(DELIMITER v=WS) -> ws(v={$v.text}) |
>             ^(DELIMITER v=TAB) -> tab(v={$v.text}) |
>             ^(DELIMITER v=NEWLINE) -> newline(v={$v.text}) ;
>
> group     :
>             ^(GROUP v+=space*
>               (v+=group v+=space* |
>               v+=plaintext v+=space* |
>               (v+=command | v+=escape)
>               (v+=delimiter v+=space+ | v+=delimiter | ))+) ->
> group(v={$v}) ;
>
> Now given the previous example RTF text my parser works fine and gives
> me:
>
> (WS   ) (GROUP (COMMAND pard) (COMMAND fs 32) (COMMAND b) (DELIMITER  )
> NOTES (COMMAND par)) (NEWLINE
> ) (WS   ) (GROUP (COMMAND pard) (COMMAND fs 26) (DELIMITER  ) Recently
> (WS  ) I (WS  ) skimmed (WS  ) (GROUP (COMMAND i) (DELIMITER  )
> Structure (WS  ) and (WS  ) Interpretation (WS  ) of (NEWLINE
> ) (WS    ) Computer (WS  ) Programs) , (WS  ) by (WS  ) Sussman (WS  )
> and (WS  ) Abelson , (WS  ) and (WS  ) I (WS  ) think (WS  ) there (WS
> ) should (NEWLINE
> ) (WS    ) have (WS  ) been (WS  ) more (WS      ) (TAB 	) (WS  )
> pictures . (NEWLINE
> ) (WS   ) (COMMAND line) (DELIMITER  ) I (WS  ) like (WS  ) pictures .
> (WS   ) Is (WS  ) that (WS  ) so (WS  ) na (ESCAPE \'ef) ve ? (NEWLINE
> ) (WS   ) (COMMAND par))
>
> the tree walker now fails:
>
> node from line 1:0 required (...)+ loop did not match anything at input
> 'WS'
>
> but there is a WS node at the beginning, what am I doing wrong?
>
> Best regards, Yves
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
> email-address

From jimi at temporal-wave.com  Fri Oct 21 10:11:43 2011
From: jimi at temporal-wave.com (Jim Idle)
Date: Fri, 21 Oct 2011 10:11:43 -0700
Subject: [antlr-interest] getText()
In-Reply-To: <4EA1A03B.3040709@poole.co.uk>
References: <4EA1A03B.3040709@poole.co.uk>
Message-ID: <e9263db3da4f5569ad09b93cc05578f7@mail.gmail.com>

I wouldn't even bother doing this here in the lexer, it is extra work.
Just process the token if you use it later. However:

STRINGLITERAL
      : (QUOTE (ESCAPEQUOTE | CHARNOQUOTE)* QUOTE)
      | (APOS st=EC
		{setText("\"" + $st.text + "\"");}
      ;

fragment EC : (ESCAPEAPOS | CHARNOAPOS)* ;

Should do it (untested).

Jim

> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of Tim Poole
> Sent: Friday, October 21, 2011 9:39 AM
> To: antlr-interest at antlr.org
> Subject: [antlr-interest] getText()
>
> Hi,
>
> I have just had to use this to change the single quotes around a string
> to double quotes:
>
> STRINGLITERAL
>      : (QUOTE (ESCAPEQUOTE | CHARNOQUOTE)* QUOTE)
>      | (APOS  (ESCAPEAPOS | CHARNOAPOS)* APOS)
> {setText(getText().replace('\'','\"'));}
>      ;
>
> It's an adaptation of:
>
> http://antlr.org/grammar/1264460091565/XPath2.g
>
> I tried to do the following, without success:
>
> STRINGLITERAL
>      : (QUOTE (ESCAPEQUOTE | CHARNOQUOTE)* QUOTE)
>      | (APOS st=(ESCAPEAPOS | CHARNOAPOS)* APOS) {setText("\"" +
> $st.text + "\"");}
>      ;
>
> Any ideas on how I can implement something along the lines of the
> second one?  It was easy to rewrite this time, but next time might not
> be so easy!
>
> Thanks in advance,
>
> Tim.
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
> email-address

From pgardiner at rogers.com  Fri Oct 21 10:13:09 2011
From: pgardiner at rogers.com (Paul Gardiner)
Date: Fri, 21 Oct 2011 13:13:09 -0400
Subject: [antlr-interest] Objective C Runtime with IOS
Message-ID: <CAG_LuT7N0QPudPaBef5xfZvTY_7612A52BkeOLN+D0OmzkS23Q@mail.gmail.com>

Is it possible to use antlr with iPhone/IOS applications?  The runtime has
<Cocoa/Cocoa.h> headers, so my apps don't compile with the generated code.
 Is there an alternate framework package for IOS?

Thanks,
Paul

From jimi at temporal-wave.com  Fri Oct 21 10:16:00 2011
From: jimi at temporal-wave.com (Jim Idle)
Date: Fri, 21 Oct 2011 10:16:00 -0700
Subject: [antlr-interest] Objective C Runtime with IOS
In-Reply-To: <CAG_LuT7N0QPudPaBef5xfZvTY_7612A52BkeOLN+D0OmzkS23Q@mail.gmail.com>
References: <CAG_LuT7N0QPudPaBef5xfZvTY_7612A52BkeOLN+D0OmzkS23Q@mail.gmail.com>
Message-ID: <1851a859631e6991e78407de8a257ddd@mail.gmail.com>

It works IOS as an external C library that you add to your xcode project.
You need to compile it with the cross compiler though. At least one person
has done this already, and I started to do it to prove the point, and
can't see any issues with it. Use the configure script to add the
necessary CC and arguments to the xcode compiler.


Jim



> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of Paul Gardiner
> Sent: Friday, October 21, 2011 10:13 AM
> To: antlr-interest at antlr.org
> Subject: [antlr-interest] Objective C Runtime with IOS
>
> Is it possible to use antlr with iPhone/IOS applications?  The runtime
> has <Cocoa/Cocoa.h> headers, so my apps don't compile with the
> generated code.
>  Is there an alternate framework package for IOS?
>
> Thanks,
> Paul
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
> email-address

From andy.voelkel at plantronics.com  Fri Oct 21 12:10:20 2011
From: andy.voelkel at plantronics.com (Voelkel, Andy)
Date: Fri, 21 Oct 2011 19:10:20 +0000
Subject: [antlr-interest] More problems with ANTRL C#3 target and tools
Message-ID: <92E9AB4D42199B4793CE24E094BAEE070D332F@USSCMB03.plt.plantronics.com>

Hi,
I got over a first round of problems and got a few trivial example working. I then moved on to trying to convert on of the examples from "The Definitive Guide to ANTLR" from Java-compatible to C# compatible:
http://media.pragprog.com/titles/tpantlr/code/tour/eval/Expr.g
It is a simple calculator example, before he introduces ASTs.
I have run into two problems. The first seems to be related to Sam's visual studio integration tools, and particularly to the use of partial classes. This seems in some cases to cause this error:
K:\Plantronics\Development Sandbox\ANTLR\AntlrTest\AntlrTest3\Program.cs(13,30): error CS1729: 'AntlrTest3.Combined1Lexer' does not contain a constructor that takes 1 arguments
One of the partial class definitions for Combined1Lexer does not indicate that Combined1Lexer inherits from Lexer and that presumably causes the constructor not to be found. If I remove the file containing the partial class definition from the project, that problem goes away. The funny thing is that this problem seems to happen on some projects and not others, which is weird. Another weird thing is that explicitly changing the partial class definition to inherit from Lexer causes a different problem:
K:\Plantronics\Development Sandbox\ANTLR\AntlrTest\AntlrTest3\Combined1.g3.lexer.cs(5,17): error CS0534: 'AntlrTest3.Combined1Lexer' does not implement inherited abstract member 'Antlr.Runtime.Lexer.mTokens()'

The second problem is that the example code in the book contains a call to one of the rules, in my code this looks like this:
Combined1Parser parser = new Combined1Parser(tokens);
// Begin parsing at rule prog
parser.prog();

But the generated code for CombinedParser defines prog() as being a private method, meaning that I can't call it. Can someone explain this?

Just when it looks like I'm gaining traction, I run into more weird stuff.


-    Andy

P.S. I've run this example in Antlrworks with the Java-compatible version, and everything works fine, so these problems all seem to be related to the C# target.



________________________________

CONFIDENTIALITY NOTICE: This e-mail transmission, and any documents, files or previous e-mail messages attached to it, may contain information that is confidential and/or legally privileged. If you are not the intended recipient, or a person responsible for delivering it to the intended recipient, please DO NOT disclose the contents to another person, store or copy the information in any medium, or use any of the information contained in or attached to this transmission for any purpose. If you have received this transmission in error, please immediately notify the sender by reply email or at privacy at plantronics.com, and destroy the original transmission and its attachments without reading or saving in any manner.

For further information about Plantronics - the Company, its products, brands, partners, please visit our website www.plantronics.com.

From sharwell at pixelminegames.com  Fri Oct 21 12:55:12 2011
From: sharwell at pixelminegames.com (Sam Harwell)
Date: Fri, 21 Oct 2011 14:55:12 -0500
Subject: [antlr-interest] More problems with ANTRL C#3 target and tools
In-Reply-To: <92E9AB4D42199B4793CE24E094BAEE070D332F@USSCMB03.plt.plantronics.com>
References: <92E9AB4D42199B4793CE24E094BAEE070D332F@USSCMB03.plt.plantronics.com>
Message-ID: <109001cc902b$5927b630$0b772290$@pixelminegames.com>

For the first problem, you probably have your grammar and helper files in
different namespaces. It looks like you're using a combined grammar, which
means you'll want this in the grammar:

@lexer::namespace{Namespace.Goes.Here}
@parser::namespace{Namespace.Goes.Here}

Then you'll use a matching namespace in your partial file.

 

For the second problem, just declare the rule public as mentioned in section
5.2 of the documentation:

http://www.antlr.org/wiki/display/ANTLR3/Antlr3CSharpReleases

 

Thanks,

Sam

 

 

From: Voelkel, Andy [mailto:andy.voelkel at plantronics.com] 
Sent: Friday, October 21, 2011 2:10 PM
To: antlr-interest at antlr.org
Cc: Sam Harwell (sharwell at pixelminegames.com)
Subject: More problems with ANTRL C#3 target and tools

 

Hi,

I got over a first round of problems and got a few trivial example working.
I then moved on to trying to convert on of the examples from "The Definitive
Guide to ANTLR" from Java-compatible to C# compatible:

http://media.pragprog.com/titles/tpantlr/code/tour/eval/Expr.g

It is a simple calculator example, before he introduces ASTs.

I have run into two problems. The first seems to be related to Sam's visual
studio integration tools, and particularly to the use of partial classes.
This seems in some cases to cause this error:

K:\Plantronics\Development
Sandbox\ANTLR\AntlrTest\AntlrTest3\Program.cs(13,30): error CS1729:
'AntlrTest3.Combined1Lexer' does not contain a constructor that takes 1
arguments

One of the partial class definitions for Combined1Lexer does not indicate
that Combined1Lexer inherits from Lexer and that presumably causes the
constructor not to be found. If I remove the file containing the partial
class definition from the project, that problem goes away. The funny thing
is that this problem seems to happen on some projects and not others, which
is weird. Another weird thing is that explicitly changing the partial class
definition to inherit from Lexer causes a different problem:

K:\Plantronics\Development
Sandbox\ANTLR\AntlrTest\AntlrTest3\Combined1.g3.lexer.cs(5,17): error
CS0534: 'AntlrTest3.Combined1Lexer' does not implement inherited abstract
member 'Antlr.Runtime.Lexer.mTokens()'

 

The second problem is that the example code in the book contains a call to
one of the rules, in my code this looks like this:

Combined1Parser parser = new Combined1Parser(tokens);

// Begin parsing at rule prog

parser.prog();

 

But the generated code for CombinedParser defines prog() as being a private
method, meaning that I can't call it. Can someone explain this?

 

Just when it looks like I'm gaining traction, I run into more weird stuff.

 

-    Andy

 

P.S. I've run this example in Antlrworks with the Java-compatible version,
and everything works fine, so these problems all seem to be related to the
C# target. 

 

 

 

  _____  


CONFIDENTIALITY NOTICE: This e-mail transmission, and any documents, files
or previous e-mail messages attached to it, may contain information that is
confidential and/or legally privileged. If you are not the intended
recipient, or a person responsible for delivering it to the intended
recipient, please DO NOT disclose the contents to another person, store or
copy the information in any medium, or use any of the information contained
in or attached to this transmission for any purpose. If you have received
this transmission in error, please immediately notify the sender by reply
email or at privacy at plantronics.com, and destroy the original transmission
and its attachments without reading or saving in any manner.

For further information about Plantronics - the Company, its products,
brands, partners, please visit our website www.plantronics.com.


From andy.voelkel at plantronics.com  Fri Oct 21 13:09:49 2011
From: andy.voelkel at plantronics.com (Voelkel, Andy)
Date: Fri, 21 Oct 2011 20:09:49 +0000
Subject: [antlr-interest] More problems with ANTRL C#3 target and tools
In-Reply-To: <109001cc902b$5927b630$0b772290$@pixelminegames.com>
References: <92E9AB4D42199B4793CE24E094BAEE070D332F@USSCMB03.plt.plantronics.com>
	<109001cc902b$5927b630$0b772290$@pixelminegames.com>
Message-ID: <92E9AB4D42199B4793CE24E094BAEE070D33CA@USSCMB03.plt.plantronics.com>

Indeed, it seems that the generated code contains no namespace definitions, and the template code generated by your tool contains a namespace declaration which it the name of the project. So two questions:
Does this mean that every C# grammar should have a @namespace declaration?
Why does this not always cause a problem? I've got another project that builds just fine, and it looks just the same. I can understand why you might not have an answer for this.
While we're at it, it seems that with your Visual Studio extensions, the code generation is run, and then the generated files are automagically included in the build for the project, even though they aren't visibly part of the project. Is the mechanism explained anywhere? I can solve problems better when I know how things work under the hood.
Finally, once I get the example code working, is there a place I can submit it so that others can use it?

-          Andy

From: Sam Harwell [mailto:sharwell at pixelminegames.com]
Sent: Friday, October 21, 2011 12:55 PM
To: Voelkel, Andy; antlr-interest at antlr.org
Subject: RE: More problems with ANTRL C#3 target and tools

For the first problem, you probably have your grammar and helper files in different namespaces. It looks like you're using a combined grammar, which means you'll want this in the grammar:
@lexer::namespace{Namespace.Goes.Here}
@parser::namespace{Namespace.Goes.Here}
Then you'll use a matching namespace in your partial file.

For the second problem, just declare the rule public as mentioned in section 5.2 of the documentation:
http://www.antlr.org/wiki/display/ANTLR3/Antlr3CSharpReleases

Thanks,
Sam


From: Voelkel, Andy [mailto:andy.voelkel at plantronics.com]<mailto:[mailto:andy.voelkel at plantronics.com]>
Sent: Friday, October 21, 2011 2:10 PM
To: antlr-interest at antlr.org<mailto:antlr-interest at antlr.org>
Cc: Sam Harwell (sharwell at pixelminegames.com<mailto:sharwell at pixelminegames.com>)
Subject: More problems with ANTRL C#3 target and tools

Hi,
I got over a first round of problems and got a few trivial example working. I then moved on to trying to convert on of the examples from "The Definitive Guide to ANTLR" from Java-compatible to C# compatible:
http://media.pragprog.com/titles/tpantlr/code/tour/eval/Expr.g
It is a simple calculator example, before he introduces ASTs.
I have run into two problems. The first seems to be related to Sam's visual studio integration tools, and particularly to the use of partial classes. This seems in some cases to cause this error:
K:\Plantronics\Development Sandbox\ANTLR\AntlrTest\AntlrTest3\Program.cs(13,30): error CS1729: 'AntlrTest3.Combined1Lexer' does not contain a constructor that takes 1 arguments
One of the partial class definitions for Combined1Lexer does not indicate that Combined1Lexer inherits from Lexer and that presumably causes the constructor not to be found. If I remove the file containing the partial class definition from the project, that problem goes away. The funny thing is that this problem seems to happen on some projects and not others, which is weird. Another weird thing is that explicitly changing the partial class definition to inherit from Lexer causes a different problem:
K:\Plantronics\Development Sandbox\ANTLR\AntlrTest\AntlrTest3\Combined1.g3.lexer.cs(5,17): error CS0534: 'AntlrTest3.Combined1Lexer' does not implement inherited abstract member 'Antlr.Runtime.Lexer.mTokens()'

The second problem is that the example code in the book contains a call to one of the rules, in my code this looks like this:
Combined1Parser parser = new Combined1Parser(tokens);
// Begin parsing at rule prog
parser.prog();

But the generated code for CombinedParser defines prog() as being a private method, meaning that I can't call it. Can someone explain this?

Just when it looks like I'm gaining traction, I run into more weird stuff.


-    Andy

P.S. I've run this example in Antlrworks with the Java-compatible version, and everything works fine, so these problems all seem to be related to the C# target.



________________________________

CONFIDENTIALITY NOTICE: This e-mail transmission, and any documents, files or previous e-mail messages attached to it, may contain information that is confidential and/or legally privileged. If you are not the intended recipient, or a person responsible for delivering it to the intended recipient, please DO NOT disclose the contents to another person, store or copy the information in any medium, or use any of the information contained in or attached to this transmission for any purpose. If you have received this transmission in error, please immediately notify the sender by reply email or at privacy at plantronics.com<mailto:privacy at plantronics.com>, and destroy the original transmission and its attachments without reading or saving in any manner.

For further information about Plantronics - the Company, its products, brands, partners, please visit our website www.plantronics.com<http://www.plantronics.com>.

________________________________

CONFIDENTIALITY NOTICE: This e-mail transmission, and any documents, files or previous e-mail messages attached to it, may contain information that is confidential and/or legally privileged. If you are not the intended recipient, or a person responsible for delivering it to the intended recipient, please DO NOT disclose the contents to another person, store or copy the information in any medium, or use any of the information contained in or attached to this transmission for any purpose. If you have received this transmission in error, please immediately notify the sender by reply email or at privacy at plantronics.com, and destroy the original transmission and its attachments without reading or saving in any manner.

For further information about Plantronics - the Company, its products, brands, partners, please visit our website www.plantronics.com.

From driscoll at cs.wisc.edu  Fri Oct 21 13:58:27 2011
From: driscoll at cs.wisc.edu (Evan Driscoll)
Date: Fri, 21 Oct 2011 15:58:27 -0500
Subject: [antlr-interest] Using Ant with Antlr3
Message-ID: <4EA1DCF3.3080106@cs.wisc.edu>

I have a problem with ant and Antlr and I don't know what's going on.

I took the SimpleCalc grammar from 
<http://www.antlr.org/wiki/display/ANTLR3/Five+minute+introduction+to+ANTLR+3> 
and put it into a directory with the following build.xml:

<project name="cminus" default="antlr" basedir=".">

<!-- Antlr3 is called here -->
<target name="antlr">
<antlr:ant-antlr3 xmlns:antlr="antlib:org/apache/tools/ant/antlr"
verbose="true"
outputdirectory="."
target="SimpleCalc.g"/>
</target>

</project>

(This is taken from about halfway down 
<http://www.antlr.org/wiki/display/ANTLR3/How+to+use+ant+with+ANTLR3> 
except that I replaced CMinus.g with SimpleCalc.g.)


I'm on a large network and there are machines with different 
environments. On my machine, I have RHEL 5, and everything works 
swimmingly. I run 'ant' and it builds SimpleCalcLexer.java and 
SimpleCalcParser.java, I can compile those, and run those.

However, if I log into a machine with RHEL 6, then it doesn't work:

Buildfile: build.xml

antlr:

BUILD FAILED
/afs/cs.wisc.edu/u/d/r/driscoll/delete/antlr/build.xml:8: Problem: 
failed to create task or type antlib:org/apache/tools/ant/antlr:ant-antlr3
Cause: The name is undefined.
Action: Check the spelling.
Action: Check that any custom tasks/types have been declared.
Action: Check that any <presetdef>/<macrodef> declarations have taken place.
No types or tasks have been defined in this namespace yet

This appears to be an antlib declaration.
Action: Check that the implementing library exists in one of:
         -/usr/share/ant/lib
         -/u/d/r/driscoll/.ant/lib
         -a directory added on the command line with the -lib argument


Total time: 0 seconds



The Antlr3 task is definitely in my ~/.ant/lib:
   ~/delete/antlr : ls ~/.ant/lib
   antlr-3.4-complete.jar  ant-antlr3.jar

and if I remove those it won't work on my own computer. Furthermore, I'm 
running exactly the same code in the same environment in both cases; ~ 
is on a network drive and I just go to the same location.


If I run 'ant -diagnostics | grep -i antlr' I get this on my machine:
   antlr-3.4-complete.jar (2388361 bytes)
   ant-antlr3.jar (20889 bytes)
   antlr : Not Available (the implementation class is not present)
   user.dir : /afs/cs.wisc.edu/u/d/r/driscoll/delete/antlr

and this on the RHEL 6 machine:
   ant-antlr.jar (5926 bytes)
   antlr-3.4-complete.jar (2388361 bytes)
   ant-antlr3.jar (20889 bytes)
   user.dir : /afs/cs.wisc.edu/u/d/r/driscoll/delete/antlr

(there are also a couple hits in java.class.path)


The difference seems to be the presence of ant-antlr.jar -- which I 
guess is for a previous version of Antlr? That is installed in a system 
directory in RHEL 6:
    ~/delete/antlr : locate ant-antlr.jar
   
/usr/lib64/eclipse/plugins/org.apache.ant_1.7.1.v20100518-1145/lib/ant-antlr.jar
   /usr/share/ant/lib/ant-antlr.jar
   /usr/share/java/ant/ant-antlr.jar

while locate does not find it on my RHEL 5 machine. (Disclaimer: locate 
won't find stuff on our network drives.)


I'm not very familiar with Ant, so I'm not sure what's going on. Any 
ideas of how to fix it?

Evan


From rprememail at yahoo.com  Fri Oct 21 18:17:53 2011
From: rprememail at yahoo.com (Premkumar)
Date: Fri, 21 Oct 2011 18:17:53 -0700 (PDT)
Subject: [antlr-interest] (no subject)
Message-ID: <1319246273.46399.yint-ygo-j2me@web124714.mail.ne1.yahoo.com>

Hi! Congratulate me, please! My first site is very nice and useful! I want you to visit it!.. http://alpha-photo.fr/com.page.php?uspage=92b5

From dariusz.brzezinski at cs.put.poznan.pl  Fri Oct 21 17:25:17 2011
From: dariusz.brzezinski at cs.put.poznan.pl (Darek)
Date: Sat, 22 Oct 2011 00:25:17 +0000 (UTC)
Subject: [antlr-interest] Something Wrong in Antlr3CSharpReleases 3.4?
References: <CACTOmx_BximoWLp5nHmeMWU9m1HqKF8mXA8DTVEBhsPbb7itHw@mail.gmail.com>
Message-ID: <loom.20111022T020039-257@post.gmane.org>

> But when I change the Bootstrap to Latest version from
> http://www.antlr.org/wiki/display/ANTLR3/Antlr3CSharpReleases, which version
> is 3.4.1.9004, I can't compile my code again.
> 
> The error is this:
> 
> *F:\antlr\AntlrTest\Reference\Antlr\Antlr3.targets(123,5): error AC1000:
> Unknown build error: Exception has been thrown by the target of an
> invocation.*
> *========== Rebuild All: 0 succeeded, 1 failed, 0 skipped ==========*

I'm facing a similar problem. I've read the latest release notes and I'm quite 
sure I followed the instructions in the ANTLRCSharopDocumentation - 9004.xps. 
I'm using Visual Studio 2010 Ultimate on a 32-bit windows 7 system.

Any clues?













From ruslan_zasukhin at valentina-db.com  Sat Oct 22 00:29:59 2011
From: ruslan_zasukhin at valentina-db.com (Ruslan Zasukhin)
Date: Sat, 22 Oct 2011 10:29:59 +0300
Subject: [antlr-interest] [C target][HEELP :-] About disable recovery
 ... Override recoverFromMismatchedToken() ... Linker error
In-Reply-To: <70cccd78fa8e31c963064b8448b73d59@mail.gmail.com>
Message-ID: <CAC84BA7.F3F75%ruslan_zasukhin@valentina-db.com>

On 10/21/11 7:48 PM, "Jim Idle" <jimi at temporal-wave.com> wrote:

Aha, 

So I was stupid enough (shame on me :-) to not see that I can do things as

void* recoverFromMismatchedToken_off(
????pANTLR3_BASE_RECOGNIZER recognizer,
    ANTLR3_UINT32 ttype,
    pANTLR3_BITSET_LIST follow)
{
????recognizer->mismatch( recognizer, ttype, follow );
    ^^^^^^^^^^^^ magic :)?

???return NULL;
}


Thank you for point, Jim.  I will try this way,
but as I have pointed query

    DRO TABLE T1;

Even do not call recoverFromMismatchedToken handler,
Because here no viable alternative happens  ...
So I was need override recover()

> In the baserecognizer code, the functions are called directly, but they
> are all available indirectly via the pointer interface. I think you are
> not fundamentally understanding this. So, they are all static to their
> source code files and do not pollute the namespace, and when they are not
> being called internally, you call them via their pointers in the
> interface.

Of course I have read sources and even debug them, and have see that
pointers, because I already did override error builder func ...

Just, try please understand, that reading sources is not best way to catch
HOW TO USE library.

I think if even me - C++ developer 20 years, have not to see that way of
call indirectly your internal methods ...it will be not easy for other
developers also ...

Because this is quite unusual for LIBRARIES ... You use very smart
techniques in ANTLR/C, this is cool ... But they are not so obvious for
others as you may think :)

Will be very helpful to have such
    C/Examples/DisableRevocer

Thank you for patience :)
 
> Do you see this in the antlr3BaseRecognizerNew():
> 
> recognizer->match                       = match;
>     recognizer->matchAny                    = matchAny;
>     recognizer->memoize                     = memoize;
>     recognizer->mismatch                    = mismatch;
>     recognizer->mismatchIsUnwantedToken     = mismatchIsUnwantedToken;
>     recognizer->mismatchIsMissingToken      = mismatchIsMissingToken;
>     recognizer->recover                     = recover;
>     recognizer->recoverFromMismatchedElement=
> recoverFromMismatchedElement;
>     recognizer->recoverFromMismatchedSet    = recoverFromMismatchedSet;
>     recognizer->recoverFromMismatchedToken  = recoverFromMismatchedToken;
> 
> etc
> 
> 
> So, install your own versions of whatever you like, then in your external
> version, call the methods via the pointers in the interface. Easy. This is
> true of ALL the interfaces, so that you can override any method you like.
> Now, perhaps I should have called the error recovery methods indirectly in
> the library itself, but they are all bound together and it is a trivial
> matter for you to call mismatch indirectly instead of directly in your
> code.


-- 
Best regards,

Ruslan Zasukhin
VP Engineering and New Technology
Paradigma Software, Inc

Valentina - Joining Worlds of Information
http://www.paradigmasoft.com

[I feel the need: the need for speed]



From dariusz.brzezinski at cs.put.poznan.pl  Sat Oct 22 00:52:13 2011
From: dariusz.brzezinski at cs.put.poznan.pl (Darek)
Date: Sat, 22 Oct 2011 07:52:13 +0000 (UTC)
Subject: [antlr-interest] Something Wrong in Antlr3CSharpReleases 3.4?
References: <CACTOmx_BximoWLp5nHmeMWU9m1HqKF8mXA8DTVEBhsPbb7itHw@mail.gmail.com>
	<loom.20111022T020039-257@post.gmane.org>
Message-ID: <loom.20111022T094813-268@post.gmane.org>

Darek <dariusz.brzezinski at ...> writes:

EDIT: On my home machine with Visual Studio 2010 Ultimate I'm having no problems.

At work on a machine with Visual SStudio Ultimate 2010 SP 1 I'm getting the
 target invocation exception. I've mingling with the *.targets file but with no 
results. 

Hope somebody can help me or suggest where to look for bugs.







From lizhipeng at gmail.com  Sat Oct 22 04:52:45 2011
From: lizhipeng at gmail.com (=?UTF-8?B?5p2O5b+X6bmP?=)
Date: Sat, 22 Oct 2011 19:52:45 +0800
Subject: [antlr-interest] Something Wrong in Antlr3CSharpReleases 3.4?
In-Reply-To: <loom.20111022T094813-268@post.gmane.org>
References: <CACTOmx_BximoWLp5nHmeMWU9m1HqKF8mXA8DTVEBhsPbb7itHw@mail.gmail.com>
	<loom.20111022T020039-257@post.gmane.org>
	<loom.20111022T094813-268@post.gmane.org>
Message-ID: <CACTOmx9KgqM4s53a5WA2gBO=ZxDe6kfJs1H1=A+bigKS2CJWQQ@mail.gmail.com>

same as me

VS2010 ultimate with sp1

target invocation exception, but antlr3CSharp 3.3 no problem.

I use 3.3 now.


On Saturday, October 22, 2011, Darek wrote:

> Darek <dariusz.brzezinski at ...> writes:
>
> EDIT: On my home machine with Visual Studio 2010 Ultimate I'm having no
> problems.
>
> At work on a machine with Visual SStudio Ultimate 2010 SP 1 I'm getting the
>  target invocation exception. I've mingling with the *.targets file but
> with no
> results.
>
> Hope somebody can help me or suggest where to look for bugs.
>
>
>
>
>
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>

From lizhipeng at gmail.com  Sat Oct 22 06:52:36 2011
From: lizhipeng at gmail.com (=?UTF-8?B?5p2O5b+X6bmP?=)
Date: Sat, 22 Oct 2011 21:52:36 +0800
Subject: [antlr-interest] Something Wrong in Antlr3CSharpReleases 3.4?
In-Reply-To: <4EA2BDF4.1090201@cs.put.poznan.pl>
References: <CACTOmx_BximoWLp5nHmeMWU9m1HqKF8mXA8DTVEBhsPbb7itHw@mail.gmail.com>
	<loom.20111022T020039-257@post.gmane.org>
	<loom.20111022T094813-268@post.gmane.org>
	<CACTOmx9KgqM4s53a5WA2gBO=ZxDe6kfJs1H1=A+bigKS2CJWQQ@mail.gmail.com>
	<4EA2BDF4.1090201@cs.put.poznan.pl>
Message-ID: <CACTOmx9XvX-nc8rE5izWFci4t3H=HUr3kcBCSRUBCiB6gMzFWQ@mail.gmail.com>

yes, I copy en.stg to zh.stg(my language is simplified Chinese), and build
ok now

but I find things change a lot from 3.3 to 3.4. Such as **Parser.***_return
changes to AstParserRuleReturnScope<CommonTree,CommonToken>

this might more coincidental  with C# language.

Thanks Dariusz for your information.



On Saturday, October 22, 2011, Dariusz Brzezi?ski wrote:

>  I think I found what's wrong:
>
> The MSBuild task takes locale into account and tries to select an
> appropriate messages file. Since my locale are Polish, the task was looking
> for the file pl.stg in Antlr\Tool\Templates\messages\languages. There was an
> error when it didn't find it.
>
> Quick solution: copy and rename en.stg to <your locale>.stg. In my case
> pl.stg.
>
> Hope this helps.
>
> Cheers,
> Darek
>
> W dniu 10/22/2011 1:52 PM, ??? pisze:
>
> same as me
>
>  VS2010 ultimate with sp1
>
>  target invocation exception, but antlr3CSharp 3.3 no problem.
>
>  I use 3.3 now.
>
>
> On Saturday, October 22, 2011, Darek wrote:
>
>> Darek <dariusz.brzezinski at ...> <javascript:_e({}, 'cvml',
>> 'dariusz.brzezinski at ...');> writes:
>>
>> EDIT: On my home machine with Visual Studio 2010 Ultimate I'm having no
>> problems.
>>
>> At work on a machine with Visual SStudio Ultimate 2010 SP 1 I'm getting
>> the
>>  target invocation exception. I've mingling with the *.targets file but
>> with no
>> results.
>>
>> Hope somebody can help me or suggest where to look for bugs.
>>
>>
>>
>>
>>
>>
>>
>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>> Unsubscribe:
>> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>>
>
>

From andy.voelkel at plantronics.com  Sat Oct 22 09:14:17 2011
From: andy.voelkel at plantronics.com (Voelkel, Andy)
Date: Sat, 22 Oct 2011 16:14:17 +0000
Subject: [antlr-interest] Should I contribute working example code for
	CSharp3 target?
In-Reply-To: <92E9AB4D42199B4793CE24E094BAEE070D332F@USSCMB03.plt.plantronics.com>
References: <92E9AB4D42199B4793CE24E094BAEE070D332F@USSCMB03.plt.plantronics.com>
Message-ID: <92E9AB4D42199B4793CE24E094BAEE070D36EA@USSCMB03.plt.plantronics.com>

Hi,
Thanks to the generous help from this list, I seem to have got over the worst of the learning curve for the Antlr C# target. I've also started to notice the logic in how the C# target deviates from the Java target, so I don't think I'll have to pester the list with stupid questions quite so much going forward. The C# target part of the learning curve has been for me much more difficult than the Antr learning curve itself, mostly because there is a lot of broken or out of date example code for the C# target floating around and it is hard to know where to look for useful examples that do work properly.
Anyhow, I've converted all the "calculator" examples from the first section of The Definitive Guide To Antlr to the CSharp3 target and they all seem to work. If there is interest and if I know how to do it, I would be happy to contribute them to the Antlr community. I'll probably continue to convert more examples as I work my way through the book.
I have to laugh, because for all I know there are up to date examples for all of these and I just don't know where they are!
I'd also be happy to contribute a few paragraphs on how the CSharp3 target grammar files and test harness differ from the Java target. These might be useful to newcomers such as myself since one generally loses "the beginners perspective" over time and thing become obvious that might not be obvious to beginners.

-          Andy

________________________________

CONFIDENTIALITY NOTICE: This e-mail transmission, and any documents, files or previous e-mail messages attached to it, may contain information that is confidential and/or legally privileged. If you are not the intended recipient, or a person responsible for delivering it to the intended recipient, please DO NOT disclose the contents to another person, store or copy the information in any medium, or use any of the information contained in or attached to this transmission for any purpose. If you have received this transmission in error, please immediately notify the sender by reply email or at privacy at plantronics.com, and destroy the original transmission and its attachments without reading or saving in any manner.

For further information about Plantronics - the Company, its products, brands, partners, please visit our website www.plantronics.com.

From WeikEngOff at aol.com  Sat Oct 22 09:41:12 2011
From: WeikEngOff at aol.com (Udo Weik)
Date: Sat, 22 Oct 2011 18:41:12 +0200
Subject: [antlr-interest] ANTLRWorks 2 (for ANTLR v4)/Hotkeys, Shortcuts;
 multi-monitor support
In-Reply-To: <AB1371DA-26C7-48FD-9FBE-4CDD28E0B56B@antlr.org>
References: <AB1371DA-26C7-48FD-9FBE-4CDD28E0B56B@antlr.org>
Message-ID: <4EA2F228.4060001@aol.com>

Hello all,

and now my really humble wishes - hotkeys/shortcuts everywhere
and unique names for all the dialogs.

I'm working since many years with Speech Recognition (SR)
(yep, Ter), that means all my apps are controlled with speech
commands. Additionally I'm using a touchscreen with application
specific dynamic keyboard layouts. The basic requirement for
both is a reliable way to "trigger" the wanted command of an
app. The main problem are context menus - which can, as the name
implies, change depending on the context. Therefore it's not
reliable just to move n items down, press Enter and for submenus
repeat that.
(And pls. GUI-programmers - always be so kind and think about
disabled persons - catchword "accessibility" [of software] -
fortunately I'm not a disabled person, but when you work with
SR your senses are sharpend on that subject).

When working with SR, there are three types of commands:
1. global
2. application-specfic
3. window-specific

For type 3., window-specific commands, e. g. all kinds of dialogs,
a unique name of the dialog is necessary so that the corresponding
SR-commands are only valid when that dialog is shown.


Last I hope that ANTLRWorks 2 supports multiple monitors - all windows
should be de/attachable.

More wishes will follow, Christmas is comming soon...


Many thanks so far and greetings
Udo

From parrt at cs.usfca.edu  Sat Oct 22 09:42:07 2011
From: parrt at cs.usfca.edu (Terence Parr)
Date: Sat, 22 Oct 2011 09:42:07 -0700
Subject: [antlr-interest] Should I contribute working example code for
	CSharp3 target?
In-Reply-To: <92E9AB4D42199B4793CE24E094BAEE070D36EA@USSCMB03.plt.plantronics.com>
References: <92E9AB4D42199B4793CE24E094BAEE070D332F@USSCMB03.plt.plantronics.com>
	<92E9AB4D42199B4793CE24E094BAEE070D36EA@USSCMB03.plt.plantronics.com>
Message-ID: <598C228E-9B34-444E-8066-5EA77B76F10E@cs.usfca.edu>

sure. send me a zip.
Ter
On Oct 22, 2011, at 9:14 AM, Voelkel, Andy wrote:

> Hi,
> Thanks to the generous help from this list, I seem to have got over the worst of the learning curve for the Antlr C# target. I've also started to notice the logic in how the C# target deviates from the Java target, so I don't think I'll have to pester the list with stupid questions quite so much going forward. The C# target part of the learning curve has been for me much more difficult than the Antr learning curve itself, mostly because there is a lot of broken or out of date example code for the C# target floating around and it is hard to know where to look for useful examples that do work properly.
> Anyhow, I've converted all the "calculator" examples from the first section of The Definitive Guide To Antlr to the CSharp3 target and they all seem to work. If there is interest and if I know how to do it, I would be happy to contribute them to the Antlr community. I'll probably continue to convert more examples as I work my way through the book.
> I have to laugh, because for all I know there are up to date examples for all of these and I just don't know where they are!
> I'd also be happy to contribute a few paragraphs on how the CSharp3 target grammar files and test harness differ from the Java target. These might be useful to newcomers such as myself since one generally loses "the beginners perspective" over time and thing become obvious that might not be obvious to beginners.
> 
> -          Andy
> 
> ________________________________
> 
> CONFIDENTIALITY NOTICE: This e-mail transmission, and any documents, files or previous e-mail messages attached to it, may contain information that is confidential and/or legally privileged. If you are not the intended recipient, or a person responsible for delivering it to the intended recipient, please DO NOT disclose the contents to another person, store or copy the information in any medium, or use any of the information contained in or attached to this transmission for any purpose. If you have received this transmission in error, please immediately notify the sender by reply email or at privacy at plantronics.com, and destroy the original transmission and its attachments without reading or saving in any manner.
> 
> For further information about Plantronics - the Company, its products, brands, partners, please visit our website www.plantronics.com.
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address


From lizhipeng at gmail.com  Sat Oct 22 09:52:42 2011
From: lizhipeng at gmail.com (=?UTF-8?B?5p2O5b+X6bmP?=)
Date: Sun, 23 Oct 2011 00:52:42 +0800
Subject: [antlr-interest] Should I contribute working example code for
 CSharp3 target?
In-Reply-To: <598C228E-9B34-444E-8066-5EA77B76F10E@cs.usfca.edu>
References: <92E9AB4D42199B4793CE24E094BAEE070D332F@USSCMB03.plt.plantronics.com>
	<92E9AB4D42199B4793CE24E094BAEE070D36EA@USSCMB03.plt.plantronics.com>
	<598C228E-9B34-444E-8066-5EA77B76F10E@cs.usfca.edu>
Message-ID: <CACTOmx92yip_T5oKRPtVhdK6zZd9qJ4B6UeE9HXfd5FNRxt-Gg@mail.gmail.com>

me too, I have trouble at begin for C# too.



On Sunday, October 23, 2011, Terence Parr wrote:

> sure. send me a zip.
> Ter
> On Oct 22, 2011, at 9:14 AM, Voelkel, Andy wrote:
>
> > Hi,
> > Thanks to the generous help from this list, I seem to have got over the
> worst of the learning curve for the Antlr C# target. I've also started to
> notice the logic in how the C# target deviates from the Java target, so I
> don't think I'll have to pester the list with stupid questions quite so much
> going forward. The C# target part of the learning curve has been for me much
> more difficult than the Antr learning curve itself, mostly because there is
> a lot of broken or out of date example code for the C# target floating
> around and it is hard to know where to look for useful examples that do work
> properly.
> > Anyhow, I've converted all the "calculator" examples from the first
> section of The Definitive Guide To Antlr to the CSharp3 target and they all
> seem to work. If there is interest and if I know how to do it, I would be
> happy to contribute them to the Antlr community. I'll probably continue to
> convert more examples as I work my way through the book.
> > I have to laugh, because for all I know there are up to date examples for
> all of these and I just don't know where they are!
> > I'd also be happy to contribute a few paragraphs on how the CSharp3
> target grammar files and test harness differ from the Java target. These
> might be useful to newcomers such as myself since one generally loses "the
> beginners perspective" over time and thing become obvious that might not be
> obvious to beginners.
> >
> > -          Andy
> >
> > ________________________________
> >
> > CONFIDENTIALITY NOTICE: This e-mail transmission, and any documents,
> files or previous e-mail messages attached to it, may contain information
> that is confidential and/or legally privileged. If you are not the intended
> recipient, or a person responsible for delivering it to the intended
> recipient, please DO NOT disclose the contents to another person, store or
> copy the information in any medium, or use any of the information contained
> in or attached to this transmission for any purpose. If you have received
> this transmission in error, please immediately notify the sender by reply
> email or at privacy at plantronics.com <javascript:;>, and destroy the
> original transmission and its attachments without reading or saving in any
> manner.
> >
> > For further information about Plantronics - the Company, its products,
> brands, partners, please visit our website www.plantronics.com.
> >
> > List: http://www.antlr.org/mailman/listinfo/antlr-interest
> > Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>

From lizhipeng at gmail.com  Sun Oct 23 07:43:20 2011
From: lizhipeng at gmail.com (=?UTF-8?B?5p2O5b+X6bmP?=)
Date: Sun, 23 Oct 2011 22:43:20 +0800
Subject: [antlr-interest] how to deal with this function?
Message-ID: <CACTOmx-T3GPGf6X1qhLtRpY6W3a4HAzjkm_OES_+CUgk0T9OZg@mail.gmail.com>

hello all:

In my rule, I have a function named "Between".

It has more than one parameters, the first is compare value, the next two
define a range, and next two next range, and so on. if only one parameter
left, it means the range has no upper limit.

such as:

Between(a, 1, 20, 25, 30), it means   (a>1 and a<20) or (a >25 and a<30)
Between(a, 1, 20, 25)  it means  (a>1 and a<20) or (a >25)

I wonder how to describe it in rules, and how to describe it in Tree
grammar, and how to  build an AST tree, and how to deal it in tree walker.

thanks for your help.

From WeikEngOff at aol.com  Sun Oct 23 11:28:09 2011
From: WeikEngOff at aol.com (Udo Weik)
Date: Sun, 23 Oct 2011 20:28:09 +0200
Subject: [antlr-interest]  Jim Idle: C-Runtime, position of elements
Message-ID: <4EA45CB9.7080705@aol.com>

Hello Jim,

my string looks like:
012345
   abcd
pos (lexer) is 1

012345
  abcd
pos (lexer) is 0

012345
abcd
pos (lexer) is -1

Is that as it should be?

And is there any way to get line/pos in the parser?
I need this from all elements.


Many thanks and greetings
Udo

From jimi at temporal-wave.com  Sun Oct 23 13:35:44 2011
From: jimi at temporal-wave.com (Jim Idle)
Date: Sun, 23 Oct 2011 13:35:44 -0700
Subject: [antlr-interest] Jim Idle: C-Runtime, position of elements
In-Reply-To: <4EA45CB9.7080705@aol.com>
References: <4EA45CB9.7080705@aol.com>
Message-ID: <de40fbde85dee21cc061bc66b515b20c@mail.gmail.com>

If it is -1 then it is just saying that it is the very first character in
the very first line.

Jim

> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of Udo Weik
> Sent: Sunday, October 23, 2011 11:28 AM
> To: antlr-interest at antlr.org
> Subject: [antlr-interest] Jim Idle: C-Runtime, position of elements
>
> Hello Jim,
>
> my string looks like:
> 012345
>    abcd
> pos (lexer) is 1
>
> 012345
>   abcd
> pos (lexer) is 0
>
> 012345
> abcd
> pos (lexer) is -1
>
> Is that as it should be?
>
> And is there any way to get line/pos in the parser?
> I need this from all elements.
>
>
> Many thanks and greetings
> Udo
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
> email-address

From WeikEngOff at aol.com  Sun Oct 23 13:35:33 2011
From: WeikEngOff at aol.com (Udo Weik)
Date: Sun, 23 Oct 2011 22:35:33 +0200
Subject: [antlr-interest] Getting names of lexer/parser rules from a
	Runtime
In-Reply-To: <52c71d9de8615fd366ab594868ebd95f@mail.gmail.com>
References: <4EA15B20.60806@aol.com>
	<52c71d9de8615fd366ab594868ebd95f@mail.gmail.com>
Message-ID: <4EA47A95.6010105@aol.com>

Hello again Jim,

> Again, why do you want the NAMES of the rules? But there is no automated
> way to program this.

I want to use the C-runtime only as a wrapper, the actual code will be
executed in an event driven scripting engine. Therefore I must know
which rule triggered the event.

Many thanks and greetings
Udo


>> -----Original Message-----
>> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
>> bounces at antlr.org] On Behalf Of Udo Weik
>> Sent: Friday, October 21, 2011 4:45 AM
>> To: antlr-interest at antlr.org
>> Subject: [antlr-interest] Getting names of lexer/parser rules from a
>> Runtime
>>
>> Hello,
>>
>> I already asked Jim that question concerning the C-Runtime.
>> His answer:
>>   >  No - you have to code that. But they are rarely useful. If you want
>> them>  as indicators for error refinement, then implement a global
>> scope and add>  it to each rule, in the rule set a scope member
>> variable to a predefined>  value for each rule, then access the scope
>> stack in the error reporting>  method.
>>
>> So my question is - what is the simplest way to get these names? I'm
>> working with complex grammars, so at least I want to automate adding
>> necessary (action) code snippets (e. g. via Regex search and replace).
>> Any other/better ideas?
>>
>>
>> Many thanks and greetings
>> Udo
>>
>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
>> email-address
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address

From jimi at temporal-wave.com  Sun Oct 23 14:16:38 2011
From: jimi at temporal-wave.com (Jim Idle)
Date: Sun, 23 Oct 2011 14:16:38 -0700
Subject: [antlr-interest] Getting names of lexer/parser rules from a
	Runtime
In-Reply-To: <4EA47A95.6010105@aol.com>
References: <4EA15B20.60806@aol.com>	<52c71d9de8615fd366ab594868ebd95f@mail.gmail.com>
	<4EA47A95.6010105@aol.com>
Message-ID: <3d7321dd6c8bc2f2b2049f7572fdfabe@mail.gmail.com>

Why would you need the names of the rules to do this?

Jim

> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of Udo Weik
> Sent: Sunday, October 23, 2011 1:36 PM
> To: antlr-interest at antlr.org
> Subject: Re: [antlr-interest] Getting names of lexer/parser rules from
> a Runtime
>
> Hello again Jim,
>
> > Again, why do you want the NAMES of the rules? But there is no
> > automated way to program this.
>
> I want to use the C-runtime only as a wrapper, the actual code will be
> executed in an event driven scripting engine. Therefore I must know
> which rule triggered the event.
>
> Many thanks and greetings
> Udo
>
>
> >> -----Original Message-----
> >> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> >> bounces at antlr.org] On Behalf Of Udo Weik
> >> Sent: Friday, October 21, 2011 4:45 AM
> >> To: antlr-interest at antlr.org
> >> Subject: [antlr-interest] Getting names of lexer/parser rules from a
> >> Runtime
> >>
> >> Hello,
> >>
> >> I already asked Jim that question concerning the C-Runtime.
> >> His answer:
> >>   >  No - you have to code that. But they are rarely useful. If you
> >> want
> >> them>  as indicators for error refinement, then implement a global
> >> scope and add>  it to each rule, in the rule set a scope member
> >> variable to a predefined>  value for each rule, then access the
> scope
> >> stack in the error reporting>  method.
> >>
> >> So my question is - what is the simplest way to get these names? I'm
> >> working with complex grammars, so at least I want to automate adding
> >> necessary (action) code snippets (e. g. via Regex search and
> replace).
> >> Any other/better ideas?
> >>
> >>
> >> Many thanks and greetings
> >> Udo
> >>
> >> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> >> Unsubscribe:
> >> http://www.antlr.org/mailman/options/antlr-interest/your-
> >> email-address
> >
> > List: http://www.antlr.org/mailman/listinfo/antlr-interest
> > Unsubscribe:
> > http://www.antlr.org/mailman/options/antlr-interest/your-email-
> address
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
> email-address

From jimi at temporal-wave.com  Sun Oct 23 14:22:50 2011
From: jimi at temporal-wave.com (Jim Idle)
Date: Sun, 23 Oct 2011 14:22:50 -0700
Subject: [antlr-interest] Jim Idle: C-Runtime, position of elements
In-Reply-To: <4EA45CB9.7080705@aol.com>
References: <4EA45CB9.7080705@aol.com>
Message-ID: <424036642b34cee8b22a15443190eaa9@mail.gmail.com>

Look at the interface for CommonToken you can see that there is the
ability to get the line number (it assumes \n is the delimiter unless you
change that.


Jim



> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of Udo Weik
> Sent: Sunday, October 23, 2011 11:28 AM
> To: antlr-interest at antlr.org
> Subject: [antlr-interest] Jim Idle: C-Runtime, position of elements
>
> Hello Jim,
>
> my string looks like:
> 012345
>    abcd
> pos (lexer) is 1
>
> 012345
>   abcd
> pos (lexer) is 0
>
> 012345
> abcd
> pos (lexer) is -1
>
> Is that as it should be?
>
> And is there any way to get line/pos in the parser?
> I need this from all elements.
>
>
> Many thanks and greetings
> Udo
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
> email-address

From kierans777 at gmail.com  Sun Oct 23 18:54:41 2011
From: kierans777 at gmail.com (Kieran Simpson)
Date: Mon, 24 Oct 2011 12:54:41 +1100
Subject: [antlr-interest] Release of C target 3.4 documentation
Message-ID: <4EA4C561.9080602@gmail.com>

Jim given you've released the 3.4 tarball, any timeline of when the 3.4 
documentation will be posted to http://www.antlr.org/api/C/index.html

Cheers,

From kierans777 at gmail.com  Sun Oct 23 19:54:54 2011
From: kierans777 at gmail.com (Kieran Simpson)
Date: Mon, 24 Oct 2011 13:54:54 +1100
Subject: [antlr-interest] How to make the lexer thread-safe (C target)?
In-Reply-To: <1933daeb4ea8b80f90a390849acc92c8@mail.gmail.com>
References: <1933daeb4ea8b80f90a390849acc92c8@mail.gmail.com>
Message-ID: <4EA4D37E.4040308@gmail.com>

Jim,
   What docs are you referring to?  I saw your example of @context and 
@apifuncs however I can't find what they mean.

My underlying query is to determine if the C target parsers are thread 
safe as I want to be able to parse multiple input sources concurrently.

Cheers,

From jimi at temporal-wave.com  Sun Oct 23 21:17:18 2011
From: jimi at temporal-wave.com (Jim Idle)
Date: Sun, 23 Oct 2011 21:17:18 -0700
Subject: [antlr-interest] How to make the lexer thread-safe (C target)?
In-Reply-To: <4EA4D37E.4040308@gmail.com>
References: <1933daeb4ea8b80f90a390849acc92c8@mail.gmail.com>
	<4EA4D37E.4040308@gmail.com>
Message-ID: <079399cd13ab060199c87933bd4eb9a5@mail.gmail.com>

As it says in the docs, they are free thereading.

Jim

> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of Kieran Simpson
> Sent: Sunday, October 23, 2011 7:55 PM
> To: antlr-interest at antlr.org
> Subject: Re: [antlr-interest] How to make the lexer thread-safe (C
> target)?
>
> Jim,
>    What docs are you referring to?  I saw your example of @context and
> @apifuncs however I can't find what they mean.
>
> My underlying query is to determine if the C target parsers are thread
> safe as I want to be able to parse multiple input sources concurrently.
>
> Cheers,
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
> email-address

From patrick.ericx at gmail.com  Mon Oct 24 01:26:39 2011
From: patrick.ericx at gmail.com (Patrick Ericx)
Date: Mon, 24 Oct 2011 10:26:39 +0200
Subject: [antlr-interest] suggestion for the static initializer too big in
	java
Message-ID: <CAGCWanqR1z381CvSriiA6hXpjOc4MbjSi3GvShBndrB9ud-9gw@mail.gmail.com>

Hi folks,

when I build a grammar, first line of my java generated code is always :

 public static final String[] tokenNames = new String[] { verly large array
list }

followed by a very long list of

 public static final int ;

it's not the first thread on blowing the 65K static initializer when you
have a lot of tokens or rules.

Why not use more recent structures like Enum (available since java 1.5) that
can hold a string and an int for each token ? I think enum is final by
default.
as a little test, I made an enum class with all my tokens manually and that
enum class compiles fine.
Unfortunately, as the code has compile errors in java, refactoring is not
an  option , and manually search / replace in 80.000 lines of generated code
will drive me nuts,


PS: is that mailing list available online? how can I access it ? receiving
all these mails in my mailbox becomes a little overhead for me.

keep on doing such a great job,
best regards,
patrick ericx

From boodweb at gmail.com  Mon Oct 24 01:29:11 2011
From: boodweb at gmail.com (Bood Qian)
Date: Mon, 24 Oct 2011 16:29:11 +0800
Subject: [antlr-interest] False error 208?
Message-ID: <CAG0n-W-UjoeXJab-9JAKcx84FtsK813PjVP72mo4U_Wg1S4Abw@mail.gmail.com>

I don't understand why the following grammar leads to error 208 complaining
IF will be never matched

ANTLRWorks 1.4.3
ANTLT 3.4
=====================
grammar test;

@lexer::members {
  private boolean rawAhead() {
  }
}

parse    :    IF*;

RAW    :    ({rawAhead()}?=> . )+;
IF      :    'if';
ID    :    ('A'..'Z'|'a'..'z')+;
======================

Either remove RAW rule or ID rule solves the error...
>From my point of view, IF has the possibility to be matched.

From bkiers at gmail.com  Mon Oct 24 02:01:22 2011
From: bkiers at gmail.com (Bart Kiers)
Date: Mon, 24 Oct 2011 11:01:22 +0200
Subject: [antlr-interest] suggestion for the static initializer too big
	in java
In-Reply-To: <CAGCWanqR1z381CvSriiA6hXpjOc4MbjSi3GvShBndrB9ud-9gw@mail.gmail.com>
References: <CAGCWanqR1z381CvSriiA6hXpjOc4MbjSi3GvShBndrB9ud-9gw@mail.gmail.com>
Message-ID: <CAOrgODY=FqVxU_BNFDSasWKLPknU74=nVROTyqkTzzC3CxA-qw@mail.gmail.com>

On Mon, Oct 24, 2011 at 10:26 AM, Patrick Ericx <patrick.ericx at gmail.com>wrote:

> ...
>
> PS: is that mailing list available online? how can I access it ? receiving
> all these mails in my mailbox becomes a little overhead for me.
>

Yes, here it is: http://antlr.markmail.org

Regards,

Bart.

From bkiers at gmail.com  Mon Oct 24 02:46:04 2011
From: bkiers at gmail.com (Bart Kiers)
Date: Mon, 24 Oct 2011 11:46:04 +0200
Subject: [antlr-interest] Rule precedence works differently when using a
	predicate?
Message-ID: <CAOrgODYN0CqBLj0jy8jwVXhR7my9rss4ZLAdJiQyrarvJz8FXw@mail.gmail.com>

Hi all,

As I understand it, ANTLR's lexer matches rules from top to bottom in the .g
grammar file and when two rules match the same number of characters, the one
that is defined first has precedence over the later one(s).

However, take the following grammar:

grammar T;

@lexer::members {
  private boolean test() {
    return true;
  }
}

parse
  :  (t=. {System.out.println(tokenNames[$t.type] + " :: " +  $t.text);})*
EOF
  ;

KEY
  :  'key'
  ;

ANY
  :  ({test()}?=> . )+
  ;


And the test class:"

import org.antlr.runtime.*;


public class Main {
  public static void main(String[] args) throws Exception {
    TLexer lexer = new TLexer(new ANTLRStringStream("key"));
    TParser parser = new TParser(new CommonTokenStream(lexer));
    parser.parse();
  }
}


I'd expected "KEY :: key" to be printed to the console, however, "ANY :: key"
is printed instead. So the last rule is matched, while the KEY rule also
matches the same input and is defined before ANY. Why?

Kind regards,

Bart.

From weissig at rbg.informatik.tu-darmstadt.de  Mon Oct 24 03:34:49 2011
From: weissig at rbg.informatik.tu-darmstadt.de (=?ISO-8859-15?Q?Yves_Wei=DFig?=)
Date: Mon, 24 Oct 2011 12:34:49 +0200
Subject: [antlr-interest] Compiling C runtime & linking
Message-ID: <4EA53F49.6030205@rbg.informatik.tu-darmstadt.de>

Hi list,
I successfully compiled the C runtime for ANTLR with VS 2010.
Now I want to compile the generated code (Lexer and Parser) with this
command:
g++ -Iantlrinclude -static -L. -lantlr3c RtfLexer.c RtfParser.c
as you may notice, antlr.h and all includefiles are in antlrinclude and
the antlr3c.lib (copied from the Release dir of VS solution) lies in the
current working dir. I would like to include the runtime statically
("-static").
But it throws:
C:\Users\Yves\AppData\Local\Temp/ccctgQP2.o:RtfLexer.c:(.text+0xb9):
undefined reference to `antlr3LexerNewStream'
which makes me believe the library is not correctly linked... what is
wrong here?
Best regards, Yves

From ramponjerome at yahoo.fr  Mon Oct 24 05:52:53 2011
From: ramponjerome at yahoo.fr (Rampon Jerome)
Date: Mon, 24 Oct 2011 13:52:53 +0100 (BST)
Subject: [antlr-interest] show decision DFA
Message-ID: <1319460773.23613.YahooMailNeo@web24711.mail.ird.yahoo.com>

Hi,


I am running antlr-3.4
and antlrworks-1.3.4

under ubuntu 10.04 64bits but also 32bits on a different computer.
I made also experiments under windows 7 (64 bits)? (dual boot)

It sends an operation in progress window when selecting a DFA (after highlighting DFA tag on)
and calling show decision DFA

and never stops neither generates any output.

I got the following output trace in terminal where I start the tool


Exception in thread "Thread-83" java.lang.NoClassDefFoundError: Could not initialize class org.antlr.tool.DOTGenerator
??? at org.antlr.works.grammar.decisiondfa.DecisionDFA.getDOTString(DecisionDFA.java:83)
??? at org.antlr.works.grammar.GrammarDOTTab.generateDOTFile(GrammarDOTTab.java:152)
??? at org.antlr.works.grammar.GrammarDOTTab.generate(GrammarDOTTab.java:146)
??? at org.antlr.works.grammar.GrammarDOTTab.run(GrammarDOTTab.java:187)
??? at java.lang.Thread.run(Thread.java:679)


It happens with the grammar I am working on, pretty large, but also
with very small examples from documentation

Anyone with similar issues ? I did not find any topic talking about.
I properly set graphviz program and set path in preferences (if not, it complains). 

I made a separate try in terminal with dot to check it was ok and can generate outputs and it is ???
Any help welcome as it would help me solve various issues on my grammar

Thanks

Jerome

From dieter.habelitz at habelitz.com  Mon Oct 24 07:41:31 2011
From: dieter.habelitz at habelitz.com (Dieter Habelitz)
Date: Mon, 24 Oct 2011 16:41:31 +0200
Subject: [antlr-interest] ANTLR v3.4 generates compiler errors (that v3.3
	doesn't generate)
Message-ID: <CAC3B97F-0350-4D01-93FF-AC6E02709A2B@habelitz.com>

Hi folks,

When feeding ANTLR 3.4 with my Java grammars it doesn't generate valid 
Java sources (26 compiler errors) - with v3.3 everything is okay.

Here's a snipped of the grammar that raises one of the problems:

statement
   :   block
   |   assertStatement
   |   ifStatement   
   |   forStatement
   |	[... and so on ...]
   ;           

ifStatement
	: IF parenthesizedExpression ifStat=statement 
       (   ELSE elseStat=statement -> ^(IF parenthesizedExpression $ifStat $elseStat)
       |                           -> ^(IF parenthesizedExpression $ifStat)
       )
	;

Amongst other things v3.4 generates the following code for the 'ELSE' branch
of the rule 'ifStatement' (have a look at the local 'variable 
declaration': void  =null;):

   public final void synpred137_Java_fragment() throws RecognitionException {
       void  =null;

       // [... some comments not relevant here ...]
       {
       match(input,ELSE,FOLLOW_ELSE_in_synpred137_Java9244); if (state.failed) return ;

       pushFollow(FOLLOW_statement_in_synpred137_Java9248);
       elseStat=statement();

       state._fsp--;
       if (state.failed) return ;

       }

   }

However, v3.3 generates the following code from the same grammar:

   public final void synpred137_Java_fragment() throws RecognitionException {   
       JavaParser.statement_return elseStat = null;


       // [... some comments not relevant here ...]
       {
       match(input,ELSE,FOLLOW_ELSE_in_synpred137_Java9244); if (state.failed) return ;
       pushFollow(FOLLOW_statement_in_synpred137_Java9248);
       elseStat=statement();

       state._fsp--;
       if (state.failed) return ;

       }
   }

The complete grammars can be found at ...
http://www.habelitz.com/index.php?option=com_content&task=view&id=12&Itemid=8

Any hints? A bug within v3.4?

Ciao
Dieter


From jimi at temporal-wave.com  Mon Oct 24 08:09:18 2011
From: jimi at temporal-wave.com (Jim Idle)
Date: Mon, 24 Oct 2011 08:09:18 -0700
Subject: [antlr-interest] False error 208?
In-Reply-To: <CAG0n-W-UjoeXJab-9JAKcx84FtsK813PjVP72mo4U_Wg1S4Abw@mail.gmail.com>
References: <CAG0n-W-UjoeXJab-9JAKcx84FtsK813PjVP72mo4U_Wg1S4Abw@mail.gmail.com>
Message-ID: <cbd4fcabc99cf770e181368af79f4555@mail.gmail.com>

parse    :    IF* EOF;


Jim

> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of Bood Qian
> Sent: Monday, October 24, 2011 1:29 AM
> To: antlr-interest at antlr.org
> Subject: [antlr-interest] False error 208?
>
> I don't understand why the following grammar leads to error 208
> complaining IF will be never matched
>
> ANTLRWorks 1.4.3
> ANTLT 3.4
> =====================
> grammar test;
>
> @lexer::members {
>   private boolean rawAhead() {
>   }
> }
>
> parse    :    IF*;
>
> RAW    :    ({rawAhead()}?=> . )+;
> IF      :    'if';
> ID    :    ('A'..'Z'|'a'..'z')+;
> ======================
>
> Either remove RAW rule or ID rule solves the error...
> >From my point of view, IF has the possibility to be matched.
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
> email-address

From weissig at rbg.informatik.tu-darmstadt.de  Mon Oct 24 08:12:21 2011
From: weissig at rbg.informatik.tu-darmstadt.de (=?windows-1252?Q?Yves_Wei=DFig?=)
Date: Mon, 24 Oct 2011 17:12:21 +0200
Subject: [antlr-interest] Compiling C runtime & linking
In-Reply-To: <4EA53F49.6030205@rbg.informatik.tu-darmstadt.de>
References: <4EA53F49.6030205@rbg.informatik.tu-darmstadt.de>
Message-ID: <4EA58055.9090706@rbg.informatik.tu-darmstadt.de>

Hi again,
this seems to be a problem with Windows (still the same error), but I
tried the same under Linux and everything went fine. Compiled with
./configure, then make & make install. After that:

g++ -I/usr/local/include -shared -oRtfToolkit.lib -static
-L/usr/local/lib -lantlr3c RtfLexer.c RtfParser.c

Without Parser it works fine, with Parser it throws several:

RtfParser.c: In function ?RtfParser_group_return
group(RtfParser_Ctx_struct*)?:
RtfParser.c:2113: error: no match for ?operator=? in ?children = space(ctx)?
RtfParser.h:198: note: candidates are:
RtfParser_delimiter_return_struct&
RtfParser_delimiter_return_struct::operator=(const
RtfParser_delimiter_return_struct&)

I don't know what that means...

The grammar rule looks like:

group		:	(OPEN
				children+=space*
				(
				children+=group children+=space* |
				children+=plaintext children+=space* |
				(children+=command | children+=escape)
				(children+=delimiter children+=space+ | children+=delimiter | )
				)+
			CLOSE) -> ^(GROUP $children*) ;

And one final question, how can I link the ANTLR runtime statically...
the above statement (without compiling the Parser) generates a small lib
of 16kb, so the ANTLR runtime is not linked static, or am I missing a
point here?

Best regards, Yves

Am 24.10.2011 12:34, schrieb Yves Wei?ig:
> Hi list,
> I successfully compiled the C runtime for ANTLR with VS 2010.
> Now I want to compile the generated code (Lexer and Parser) with this
> command:
> g++ -Iantlrinclude -static -L. -lantlr3c RtfLexer.c RtfParser.c
> as you may notice, antlr.h and all includefiles are in antlrinclude and
> the antlr3c.lib (copied from the Release dir of VS solution) lies in the
> current working dir. I would like to include the runtime statically
> ("-static").
> But it throws:
> C:\Users\Yves\AppData\Local\Temp/ccctgQP2.o:RtfLexer.c:(.text+0xb9):
> undefined reference to `antlr3LexerNewStream'
> which makes me believe the library is not correctly linked... what is
> wrong here?
> Best regards, Yves
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address

From jimi at temporal-wave.com  Mon Oct 24 08:12:33 2011
From: jimi at temporal-wave.com (Jim Idle)
Date: Mon, 24 Oct 2011 08:12:33 -0700
Subject: [antlr-interest] Compiling C runtime & linking
In-Reply-To: <4EA53F49.6030205@rbg.informatik.tu-darmstadt.de>
References: <4EA53F49.6030205@rbg.informatik.tu-darmstadt.de>
Message-ID: <bec66539dfbcd0b63e93d86900828587@mail.gmail.com>

You need to send the output of the library build and your session. Here
you say you are building with VS2010 and trying to compile with GNU C++,
which makes no sense. What operating system? What compiler? Which version
of ANTLR?

Jim

> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of Yves Wei?ig
> Sent: Monday, October 24, 2011 3:35 AM
> To: antlr-interest at antlr.org
> Subject: [antlr-interest] Compiling C runtime & linking
>
> Hi list,
> I successfully compiled the C runtime for ANTLR with VS 2010.
> Now I want to compile the generated code (Lexer and Parser) with this
> command:
> g++ -Iantlrinclude -static -L. -lantlr3c RtfLexer.c RtfParser.c
> as you may notice, antlr.h and all includefiles are in antlrinclude and
> the antlr3c.lib (copied from the Release dir of VS solution) lies in
> the current working dir. I would like to include the runtime statically
> ("-static").
> But it throws:
> C:\Users\Yves\AppData\Local\Temp/ccctgQP2.o:RtfLexer.c:(.text+0xb9):
> undefined reference to `antlr3LexerNewStream'
> which makes me believe the library is not correctly linked... what is
> wrong here?
> Best regards, Yves
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
> email-address

From jimi at temporal-wave.com  Mon Oct 24 08:16:23 2011
From: jimi at temporal-wave.com (Jim Idle)
Date: Mon, 24 Oct 2011 08:16:23 -0700
Subject: [antlr-interest] Compiling C runtime & linking
In-Reply-To: <4EA58055.9090706@rbg.informatik.tu-darmstadt.de>
References: <4EA53F49.6030205@rbg.informatik.tu-darmstadt.de>
	<4EA58055.9090706@rbg.informatik.tu-darmstadt.de>
Message-ID: <b19e8710477fae984be93d5cf5b099b5@mail.gmail.com>

To link statically you need to reference the .a version of the library I
think. I don't know what your other errors are as I can?t see your source
code.


Jim

> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of Yves Wei?ig
> Sent: Monday, October 24, 2011 8:12 AM
> Cc: antlr-interest at antlr.org
> Subject: Re: [antlr-interest] Compiling C runtime & linking
>
> Hi again,
> this seems to be a problem with Windows (still the same error), but I
> tried the same under Linux and everything went fine. Compiled with
> ./configure, then make & make install. After that:
>
> g++ -I/usr/local/include -shared -oRtfToolkit.lib -static
> -L/usr/local/lib -lantlr3c RtfLexer.c RtfParser.c
>
> Without Parser it works fine, with Parser it throws several:
>
> RtfParser.c: In function ?RtfParser_group_return
> group(RtfParser_Ctx_struct*)?:
> RtfParser.c:2113: error: no match for ?operator=? in ?children =
> space(ctx)?
> RtfParser.h:198: note: candidates are:
> RtfParser_delimiter_return_struct&
> RtfParser_delimiter_return_struct::operator=(const
> RtfParser_delimiter_return_struct&)
>
> I don't know what that means...
>
> The grammar rule looks like:
>
> group		:	(OPEN
> 				children+=space*
> 				(
> 				children+=group children+=space* |
> 				children+=plaintext children+=space* |
> 				(children+=command | children+=escape)
> 				(children+=delimiter children+=space+ |
> children+=delimiter | )
> 				)+
> 			CLOSE) -> ^(GROUP $children*) ;
>
> And one final question, how can I link the ANTLR runtime statically...
> the above statement (without compiling the Parser) generates a small
> lib of 16kb, so the ANTLR runtime is not linked static, or am I missing
> a point here?
>
> Best regards, Yves
>
> Am 24.10.2011 12:34, schrieb Yves Wei?ig:
> > Hi list,
> > I successfully compiled the C runtime for ANTLR with VS 2010.
> > Now I want to compile the generated code (Lexer and Parser) with this
> > command:
> > g++ -Iantlrinclude -static -L. -lantlr3c RtfLexer.c RtfParser.c
> > as you may notice, antlr.h and all includefiles are in antlrinclude
> > and the antlr3c.lib (copied from the Release dir of VS solution) lies
> > in the current working dir. I would like to include the runtime
> > statically ("-static").
> > But it throws:
> > C:\Users\Yves\AppData\Local\Temp/ccctgQP2.o:RtfLexer.c:(.text+0xb9):
> > undefined reference to `antlr3LexerNewStream'
> > which makes me believe the library is not correctly linked... what is
> > wrong here?
> > Best regards, Yves
> >
> > List: http://www.antlr.org/mailman/listinfo/antlr-interest
> > Unsubscribe:
> > http://www.antlr.org/mailman/options/antlr-interest/your-email-
> address
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
> email-address

From bkiers at gmail.com  Mon Oct 24 08:20:03 2011
From: bkiers at gmail.com (Bart Kiers)
Date: Mon, 24 Oct 2011 17:20:03 +0200
Subject: [antlr-interest] False error 208?
In-Reply-To: <cbd4fcabc99cf770e181368af79f4555@mail.gmail.com>
References: <CAG0n-W-UjoeXJab-9JAKcx84FtsK813PjVP72mo4U_Wg1S4Abw@mail.gmail.com>
	<cbd4fcabc99cf770e181368af79f4555@mail.gmail.com>
Message-ID: <CAOrgODb3GM+7Vc+4Z=ubrd7+K_pdKYcZkzU+VqHo0pw+UZ=_mg@mail.gmail.com>

Hi Jim,

No, that doesn't make a difference: the error (IF can never be matched)
still remains.
Not that _I_ know what is going wrong though...

Regards,

Bart.


On Mon, Oct 24, 2011 at 5:09 PM, Jim Idle <jimi at temporal-wave.com> wrote:

> parse    :    IF* EOF;
>
>
> Jim
>
> > -----Original Message-----
> > From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> > bounces at antlr.org] On Behalf Of Bood Qian
> > Sent: Monday, October 24, 2011 1:29 AM
> > To: antlr-interest at antlr.org
> > Subject: [antlr-interest] False error 208?
> >
> > I don't understand why the following grammar leads to error 208
> > complaining IF will be never matched
> >
> > ANTLRWorks 1.4.3
> > ANTLT 3.4
> > =====================
> > grammar test;
> >
> > @lexer::members {
> >   private boolean rawAhead() {
> >   }
> > }
> >
> > parse    :    IF*;
> >
> > RAW    :    ({rawAhead()}?=> . )+;
> > IF      :    'if';
> > ID    :    ('A'..'Z'|'a'..'z')+;
> > ======================
> >
> > Either remove RAW rule or ID rule solves the error...
> > >From my point of view, IF has the possibility to be matched.
> >
> > List: http://www.antlr.org/mailman/listinfo/antlr-interest
> > Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
> > email-address
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>

From weissig at rbg.informatik.tu-darmstadt.de  Mon Oct 24 08:20:19 2011
From: weissig at rbg.informatik.tu-darmstadt.de (=?UTF-8?B?WXZlcyBXZWnDn2ln?=)
Date: Mon, 24 Oct 2011 17:20:19 +0200
Subject: [antlr-interest] Compiling C runtime & linking
In-Reply-To: <bec66539dfbcd0b63e93d86900828587@mail.gmail.com>
References: <4EA53F49.6030205@rbg.informatik.tu-darmstadt.de>
	<bec66539dfbcd0b63e93d86900828587@mail.gmail.com>
Message-ID: <4EA58233.8070401@rbg.informatik.tu-darmstadt.de>

I compile under Windows with VS2010:

U:\libantlr3c-3.4-beta4>DEVENV C.sln /Build Release

Microsoft (R) Visual Studio Version 10.0.30319.1.
Copyright (C) Microsoft Corp. Alle Rechte vorbehalten.
1>------ Erstellen gestartet: Projekt: C, Konfiguration: Release Win32
------
1>Der Buildvorgang wurde am 24.10.2011 12:24:00 gestartet.
1>InitializeBuildStatus:
1>  "Release\C.unsuccessfulbuild" wird erstellt, da "AlwaysCreate"
angegeben wur
de.
1>ClCompile:
1>  antlr3baserecognizer.c
1>  antlr3basetree.c
1>  antlr3basetreeadaptor.c
1>  antlr3bitset.c
1>  antlr3collections.c
1>  antlr3commontoken.c
1>  antlr3commontree.c
1>  antlr3commontreeadaptor.c
1>  antlr3commontreenodestream.c
1>  antlr3convertutf.c
1>  antlr3cyclicdfa.c
1>  antlr3debughandlers.c
1>  antlr3encodings.c
1>  antlr3exception.c
1>  antlr3filestream.c
1>  antlr3inputstream.c
1>  antlr3intstream.c
1>  antlr3lexer.c
1>  antlr3parser.c
1>  antlr3rewritestreams.c
1>  Kompilieren...
1>  antlr3string.c
1>  antlr3tokenstream.c
1>  antlr3treeparser.c
1>Lib:
1>  C.vcxproj -> U:\01. Education\01.
TUD\Master_Thesis_2\techniques\ANTLR\liban
tlr3c-3.4-beta4\Release\antlr3c.lib
1>FinalizeBuildStatus:
1>  Die Datei "Release\C.unsuccessfulbuild" wird gel?scht.
1>  Aktualisieren des Timestamps von "Release\C.lastbuildstate".
1>
1>Das Erstellen war erfolgreich.
1>
1>Verstrichene Zeit 00:00:15.81
========== Erstellen: 1 erfolgreich, Fehler bei 0, 0 aktuell, 0
?bersprungen ===
=======

I use runtime "libantlr3c-3.4-beta4", ANTLR "antlr-3.4-complete.jar" and
"antlrworks-1.4.3.jar".

Compiling parser and lexer should be done with MinGW:

d:\Programme\MinGW\bin>g++ --version
g++ (GCC) 3.4.5 (mingw-vista special r3)
Copyright (C) 2004 Free Software Foundation, Inc.
This is free software; see the source for copying conditions.  There is
NO warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR
PURPOSE.

Best regards and thanks for the help...

Yves

Am 24.10.2011 17:12, schrieb Jim Idle:
> You need to send the output of the library build and your session. Here
> you say you are building with VS2010 and trying to compile with GNU C++,
> which makes no sense. What operating system? What compiler? Which version
> of ANTLR?
> 
> Jim
> 
>> -----Original Message-----
>> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
>> bounces at antlr.org] On Behalf Of Yves Wei?ig
>> Sent: Monday, October 24, 2011 3:35 AM
>> To: antlr-interest at antlr.org
>> Subject: [antlr-interest] Compiling C runtime & linking
>>
>> Hi list,
>> I successfully compiled the C runtime for ANTLR with VS 2010.
>> Now I want to compile the generated code (Lexer and Parser) with this
>> command:
>> g++ -Iantlrinclude -static -L. -lantlr3c RtfLexer.c RtfParser.c
>> as you may notice, antlr.h and all includefiles are in antlrinclude and
>> the antlr3c.lib (copied from the Release dir of VS solution) lies in
>> the current working dir. I would like to include the runtime statically
>> ("-static").
>> But it throws:
>> C:\Users\Yves\AppData\Local\Temp/ccctgQP2.o:RtfLexer.c:(.text+0xb9):
>> undefined reference to `antlr3LexerNewStream'
>> which makes me believe the library is not correctly linked... what is
>> wrong here?
>> Best regards, Yves
>>
>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
>> email-address
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address

From jimi at temporal-wave.com  Mon Oct 24 08:26:21 2011
From: jimi at temporal-wave.com (Jim Idle)
Date: Mon, 24 Oct 2011 08:26:21 -0700
Subject: [antlr-interest] False error 208?
In-Reply-To: <CAOrgODb3GM+7Vc+4Z=ubrd7+K_pdKYcZkzU+VqHo0pw+UZ=_mg@mail.gmail.com>
References: <CAG0n-W-UjoeXJab-9JAKcx84FtsK813PjVP72mo4U_Wg1S4Abw@mail.gmail.com>
	<cbd4fcabc99cf770e181368af79f4555@mail.gmail.com>
	<CAOrgODb3GM+7Vc+4Z=ubrd7+K_pdKYcZkzU+VqHo0pw+UZ=_mg@mail.gmail.com>
Message-ID: <fb0a4bcc1c5eaf62e3d6ba69071cc58b@mail.gmail.com>

Oh ? I did not see it was a lexer error.



Reorder the rules:

IF     :    'if';

ID     :    ('A'..'Z'|'a'..'z')+;

RAW    :    ({rawAhead()}?=> . )+;



However IF and ID will always be produced like this. If they should not be,
then you want:





IF     :    {!rawAhead()}?=>'if';

ID     :    {!rawAhead()}?=> ('A'..'Z'|'a'..'z')+;

RAW    :   .+;



Jim



*From:* Bart Kiers [mailto:bkiers at gmail.com]
*Sent:* Monday, October 24, 2011 8:20 AM
*To:* Jim Idle
*Cc:* antlr-interest at antlr.org
*Subject:* Re: [antlr-interest] False error 208?



Hi Jim,



No, that doesn't make a difference: the error (IF can never be matched)
still remains.

Not that _I_ know what is going wrong though...



Regards,



Bart.



On Mon, Oct 24, 2011 at 5:09 PM, Jim Idle <jimi at temporal-wave.com> wrote:

parse    :    IF* EOF;


Jim

> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of Bood Qian
> Sent: Monday, October 24, 2011 1:29 AM
> To: antlr-interest at antlr.org
> Subject: [antlr-interest] False error 208?

>
> I don't understand why the following grammar leads to error 208
> complaining IF will be never matched
>
> ANTLRWorks 1.4.3
> ANTLT 3.4
> =====================
> grammar test;
>
> @lexer::members {
>   private boolean rawAhead() {
>   }
> }
>
> parse    :    IF*;
>
> RAW    :    ({rawAhead()}?=> . )+;
> IF      :    'if';
> ID    :    ('A'..'Z'|'a'..'z')+;
> ======================
>
> Either remove RAW rule or ID rule solves the error...
> >From my point of view, IF has the possibility to be matched.
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
> email-address

List: http://www.antlr.org/mailman/listinfo/antlr-interest
Unsubscribe:
http://www.antlr.org/mailman/options/antlr-interest/your-email-address

From bkiers at gmail.com  Mon Oct 24 08:33:11 2011
From: bkiers at gmail.com (Bart Kiers)
Date: Mon, 24 Oct 2011 17:33:11 +0200
Subject: [antlr-interest] False error 208?
In-Reply-To: <fb0a4bcc1c5eaf62e3d6ba69071cc58b@mail.gmail.com>
References: <CAG0n-W-UjoeXJab-9JAKcx84FtsK813PjVP72mo4U_Wg1S4Abw@mail.gmail.com>
	<cbd4fcabc99cf770e181368af79f4555@mail.gmail.com>
	<CAOrgODb3GM+7Vc+4Z=ubrd7+K_pdKYcZkzU+VqHo0pw+UZ=_mg@mail.gmail.com>
	<fb0a4bcc1c5eaf62e3d6ba69071cc58b@mail.gmail.com>
Message-ID: <CAOrgODZ9+Lk+a--C5T3HDiff9CBrn06TvcPy+bsa-2kmb3Bgmg@mail.gmail.com>

On Mon, Oct 24, 2011 at 5:26 PM, Jim Idle <jimi at temporal-wave.com> wrote:

> Oh ? I did not see it was a lexer error.
>
>
>
> Reorder the rules:
>
> IF     :    'if';
>
> ID     :    ('A'..'Z'|'a'..'z')+;
>
> RAW    :    ({rawAhead()}?=> . )+;
>


Yeah, that is what I thought as well, but the above will cause the input
"if" to be matched as a RAW-token, where I (and Boon) expected an
IF-token...
See my post: http://antlr.markmail.org/message/mkrpypwuccs25bgd

Regards,

Bart.

From bkiers at gmail.com  Mon Oct 24 08:34:33 2011
From: bkiers at gmail.com (Bart Kiers)
Date: Mon, 24 Oct 2011 17:34:33 +0200
Subject: [antlr-interest] False error 208?
In-Reply-To: <CAOrgODZ9+Lk+a--C5T3HDiff9CBrn06TvcPy+bsa-2kmb3Bgmg@mail.gmail.com>
References: <CAG0n-W-UjoeXJab-9JAKcx84FtsK813PjVP72mo4U_Wg1S4Abw@mail.gmail.com>
	<cbd4fcabc99cf770e181368af79f4555@mail.gmail.com>
	<CAOrgODb3GM+7Vc+4Z=ubrd7+K_pdKYcZkzU+VqHo0pw+UZ=_mg@mail.gmail.com>
	<fb0a4bcc1c5eaf62e3d6ba69071cc58b@mail.gmail.com>
	<CAOrgODZ9+Lk+a--C5T3HDiff9CBrn06TvcPy+bsa-2kmb3Bgmg@mail.gmail.com>
Message-ID: <CAOrgODb=D=n=djqMO_0axeOdVo=OfrE_VM7N8iNHma2q9P63fg@mail.gmail.com>

On Mon, Oct 24, 2011 at 5:33 PM, Bart Kiers <bkiers at gmail.com> wrote:

> ... where I (and Boon) ...
>


Sorry, "Bood", not "Boon"...

From WeikEngOff at aol.com  Mon Oct 24 08:58:35 2011
From: WeikEngOff at aol.com (Udo Weik)
Date: Mon, 24 Oct 2011 17:58:35 +0200
Subject: [antlr-interest] Jim Idle: C-Runtime, position of elements
In-Reply-To: <424036642b34cee8b22a15443190eaa9@mail.gmail.com>
References: <4EA45CB9.7080705@aol.com>
	<424036642b34cee8b22a15443190eaa9@mail.gmail.com>
Message-ID: <4EA58B2B.5060808@aol.com>

Hello Jim,

> Look at the interface for CommonToken you can see that there is the
> ability to get the line number (it assumes \n is the delimiter unless you
> change that.

yep, there is an ANTLR3_COMMON_TOKEN_struct. But I need additional infos -
e. g. where is that struct populated the first time.
Do you have a dependency graph/sketch which structures are used (and when)
based on a simple grammar?

Many thanks and greetings
Udo


>> -----Original Message-----
>> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
>> bounces at antlr.org] On Behalf Of Udo Weik
>> Sent: Sunday, October 23, 2011 11:28 AM
>> To: antlr-interest at antlr.org
>> Subject: [antlr-interest] Jim Idle: C-Runtime, position of elements
>>
>> Hello Jim,
>>
>> my string looks like:
>> 012345
>>     abcd
>> pos (lexer) is 1
>>
>> 012345
>>    abcd
>> pos (lexer) is 0
>>
>> 012345
>> abcd
>> pos (lexer) is -1
>>
>> Is that as it should be?
>>
>> And is there any way to get line/pos in the parser?
>> I need this from all elements.
>>
>>
>> Many thanks and greetings
>> Udo
>>
>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
>> email-address
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address


From weissig at rbg.informatik.tu-darmstadt.de  Mon Oct 24 09:32:32 2011
From: weissig at rbg.informatik.tu-darmstadt.de (=?UTF-8?B?WXZlcyBXZWnDn2ln?=)
Date: Mon, 24 Oct 2011 18:32:32 +0200
Subject: [antlr-interest] Compiling C runtime & linking
In-Reply-To: <b19e8710477fae984be93d5cf5b099b5@mail.gmail.com>
References: <4EA53F49.6030205@rbg.informatik.tu-darmstadt.de>	<4EA58055.9090706@rbg.informatik.tu-darmstadt.de>
	<b19e8710477fae984be93d5cf5b099b5@mail.gmail.com>
Message-ID: <4EA59320.2040309@rbg.informatik.tu-darmstadt.de>

I attached the generated code...
static RtfParser_group_return
group(pRtfParser ctx)
begins at line 2015.
first error is thrown at line 2113.
maybe my rule is wrong? but output to java works fine.
best regards, yves

Am 24.10.2011 17:16, schrieb Jim Idle:
> To link statically you need to reference the .a version of the library I
> think. I don't know what your other errors are as I can?t see your source
> code.
> 
> 
> Jim
> 
>> -----Original Message-----
>> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
>> bounces at antlr.org] On Behalf Of Yves Wei?ig
>> Sent: Monday, October 24, 2011 8:12 AM
>> Cc: antlr-interest at antlr.org
>> Subject: Re: [antlr-interest] Compiling C runtime & linking
>>
>> Hi again,
>> this seems to be a problem with Windows (still the same error), but I
>> tried the same under Linux and everything went fine. Compiled with
>> ./configure, then make & make install. After that:
>>
>> g++ -I/usr/local/include -shared -oRtfToolkit.lib -static
>> -L/usr/local/lib -lantlr3c RtfLexer.c RtfParser.c
>>
>> Without Parser it works fine, with Parser it throws several:
>>
>> RtfParser.c: In function ?RtfParser_group_return
>> group(RtfParser_Ctx_struct*)?:
>> RtfParser.c:2113: error: no match for ?operator=? in ?children =
>> space(ctx)?
>> RtfParser.h:198: note: candidates are:
>> RtfParser_delimiter_return_struct&
>> RtfParser_delimiter_return_struct::operator=(const
>> RtfParser_delimiter_return_struct&)
>>
>> I don't know what that means...
>>
>> The grammar rule looks like:
>>
>> group		:	(OPEN
>> 				children+=space*
>> 				(
>> 				children+=group children+=space* |
>> 				children+=plaintext children+=space* |
>> 				(children+=command | children+=escape)
>> 				(children+=delimiter children+=space+ |
>> children+=delimiter | )
>> 				)+
>> 			CLOSE) -> ^(GROUP $children*) ;
>>
>> And one final question, how can I link the ANTLR runtime statically...
>> the above statement (without compiling the Parser) generates a small
>> lib of 16kb, so the ANTLR runtime is not linked static, or am I missing
>> a point here?
>>
>> Best regards, Yves
>>
>> Am 24.10.2011 12:34, schrieb Yves Wei?ig:
>>> Hi list,
>>> I successfully compiled the C runtime for ANTLR with VS 2010.
>>> Now I want to compile the generated code (Lexer and Parser) with this
>>> command:
>>> g++ -Iantlrinclude -static -L. -lantlr3c RtfLexer.c RtfParser.c
>>> as you may notice, antlr.h and all includefiles are in antlrinclude
>>> and the antlr3c.lib (copied from the Release dir of VS solution) lies
>>> in the current working dir. I would like to include the runtime
>>> statically ("-static").
>>> But it throws:
>>> C:\Users\Yves\AppData\Local\Temp/ccctgQP2.o:RtfLexer.c:(.text+0xb9):
>>> undefined reference to `antlr3LexerNewStream'
>>> which makes me believe the library is not correctly linked... what is
>>> wrong here?
>>> Best regards, Yves
>>>
>>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>>> Unsubscribe:
>>> http://www.antlr.org/mailman/options/antlr-interest/your-email-
>> address
>>
>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
>> email-address
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: RtfParser.h
Url: http://www.antlr.org/pipermail/antlr-interest/attachments/20111024/6d1842d8/attachment-0001.h 
-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: RtfParser.tokens
Url: http://www.antlr.org/pipermail/antlr-interest/attachments/20111024/6d1842d8/attachment-0001.asc 
-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: RtfParser.c
Url: http://www.antlr.org/pipermail/antlr-interest/attachments/20111024/6d1842d8/attachment-0001.c 

From researcher0x00 at gmail.com  Mon Oct 24 12:24:38 2011
From: researcher0x00 at gmail.com (Eric)
Date: Mon, 24 Oct 2011 15:24:38 -0400
Subject: [antlr-interest] ANTLR v3.4 generates compiler errors (that
 v3.3 doesn't generate)
In-Reply-To: <CAC3B97F-0350-4D01-93FF-AC6E02709A2B@habelitz.com>
References: <CAC3B97F-0350-4D01-93FF-AC6E02709A2B@habelitz.com>
Message-ID: <CAN45N131Qsz+X-v2R6LvV9yKw=GGOvTZd+snSj+qN6NQaYyomQ@mail.gmail.com>

On Mon, Oct 24, 2011 at 10:41 AM, Dieter Habelitz <
dieter.habelitz at habelitz.com> wrote:

> Hi folks,
>
> When feeding ANTLR 3.4 with my Java grammars it doesn't generate valid
> Java sources (26 compiler errors) - with v3.3 everything is okay.
>
> Here's a snipped of the grammar that raises one of the problems:
>
> statement
>   :   block
>   |   assertStatement
>   |   ifStatement
>   |   forStatement
>   |    [... and so on ...]
>   ;
>
> ifStatement
>        : IF parenthesizedExpression ifStat=statement
>       (   ELSE elseStat=statement -> ^(IF parenthesizedExpression $ifStat
> $elseStat)
>       |                           -> ^(IF parenthesizedExpression $ifStat)
>       )
>        ;
>
> Amongst other things v3.4 generates the following code for the 'ELSE'
> branch
> of the rule 'ifStatement' (have a look at the local 'variable
> declaration': void  =null;):
>
>   public final void synpred137_Java_fragment() throws RecognitionException
> {
>       void  =null;
>
>       // [... some comments not relevant here ...]
>       {
>       match(input,ELSE,FOLLOW_ELSE_in_synpred137_Java9244); if
> (state.failed) return ;
>
>       pushFollow(FOLLOW_statement_in_synpred137_Java9248);
>       elseStat=statement();
>
>       state._fsp--;
>       if (state.failed) return ;
>
>       }
>
>   }
>
> However, v3.3 generates the following code from the same grammar:
>
>   public final void synpred137_Java_fragment() throws RecognitionException
> {
>       JavaParser.statement_return elseStat = null;
>
>
>       // [... some comments not relevant here ...]
>       {
>       match(input,ELSE,FOLLOW_ELSE_in_synpred137_Java9244); if
> (state.failed) return ;
>       pushFollow(FOLLOW_statement_in_synpred137_Java9248);
>       elseStat=statement();
>
>       state._fsp--;
>       if (state.failed) return ;
>
>       }
>   }
>
> The complete grammars can be found at ...
>
> http://www.habelitz.com/index.php?option=com_content&task=view&id=12&Itemid=8
>
> Any hints? Switch back to org.antlr.Tool 3.3




> A bug within v3.4? Yes
>

Ter is aware of it but is holding off on fixing the bugs for org.antlr.Tool
3.4.


>
> Ciao
> Dieter
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>

From bgeffon at linkedin.com  Mon Oct 24 13:25:51 2011
From: bgeffon at linkedin.com (Brian Geffon)
Date: Mon, 24 Oct 2011 20:25:51 +0000
Subject: [antlr-interest] Refactor grammar without semantic predicates
Message-ID: <CACB17E1.2303%bgeffon@linkedin.com>

Hi,
I'm working on a grammar and I can't figure out how to refactor it without using semantic predicates. Essentially, what I'm trying to do with RAW_TEXT is a catch all if none of the tags match, the only way I could make it work was by using Semantic Predicates, does anyone have ideas? Thanks in advance. The problem is that I need { tokens to be parsed as RAW_TEXT if they do not match the other tag types.

Brian
PS. I apologize for hitting the antlr-dev mailing list by accident with this question



grammar Dust;

options {
  language=Java;
  output=AST;
  ASTLabelType=CommonTree;
}

/* LEXER RULES */
tokens {
        TAG;
        SPECIAL_TAG;
        LOOP_SECTION;
        EXISTS_SECTION;
        NOT_EXISTS_SECTION;
        CONTEXT_HELPER_SECTION;
        INLINE_PARTIAL_SECTION;
        PRAGMA_SECTION;
        CUSTOM_SECTION;
        BLOCK_SECTION;
        END_SECTION;
        PARTIAL;
        BUFFER;
        COMMENT;
        QUOTED_PARAM;
        IDENT_PARAM;
        CONTEXT;
        SEC_START_TAG;
        SEC_END_TAG;
        BODY;
        IDENT;
        FILTER;
        ELSE_BODY;
        CUSTOM_BLK;
        SELF_CLOSE;
}

@lexer::members{
  boolean inTag = false;

}


/* LEXER RULES */
COMMENT_T : '{!' .* '!}';
ID : { inTag }? => (LETTER | '_' | '$') (LETTER | '_' | DIGIT | '$')*;
IDENTIFIER :     (('.'? ID ('.' ID)*));
RAW_TEXT : { !inTag }? =>  ~('{'|'}')+;
fragment DIGIT  : '0'..'9';
fragment LETTER : ('a'..'z' | 'A'..'Z');
LD  @init { inTag = true; }     : '{' ;
RD  @init { inTag = false; }    :       '}' ;
QUOTED_STR : { inTag }? => '"' ~('\n' | '\r' | '"')* '"';

/* DUST PARSER RULES */
start : body? EOF
            ;

body    : (  tag
         | special_tag
         | section
         | partial
         | comment
         | buffer )+
            ;

buffer
      : RAW_TEXT -> ^(BUFFER RAW_TEXT)
      ;

ident   :       IDENTIFIER -> ^(IDENT IDENTIFIER)
      | ID -> ^(IDENT ID)
      | '.' -> ^(IDENT '.')
                        ;

special_tag
      : LD '~' ID RD -> ^(SPECIAL_TAG ID)
            ;

filter
      : '|' ID -> ^(FILTER ID)
      ;

tag
      : LD ident filter* RD -> ^(TAG ident filter*)
      ;

parameter
      : ' ' i1=ident '=' ( QUOTED_STR -> ^(QUOTED_PARAM $i1 QUOTED_STR)                         | i2=ident -> ^(IDENT_PARAM $i1 $i2) )
                        ;

context
      : ':' ident -> ^(CONTEXT ident)
      ;

partial
      : LD '>' ident context? '/' RD -> ^(PARTIAL ident context?)
      ;

section_start_tag
            : ident context? parameter* -> ^(SEC_START_TAG ident context? parameter*)
            ;

section_end_tag
            : LD '/' ident RD -> ^(SEC_END_TAG ident)
            ;

else_section
            : ( LD ':else' RD body? ) -> ^(ELSE_BODY body?)
            ;

loop_section
            : LD '#' section_start_tag RD
              body?
              else_section?
              section_end_tag -> ^(LOOP_SECTION section_start_tag ^(BODY body?) else_section? section_end_tag)
            | LD '#' section_start_tag '/' RD -> ^(LOOP_SECTION section_start_tag SELF_CLOSE)
            ;

exists_section
            : LD '?' section_start_tag RD
              body?
              else_section?
              section_end_tag -> ^(EXISTS_SECTION section_start_tag ^(BODY body?) else_section? section_end_tag)
            | LD '?' section_start_tag '/' RD -> ^(EXISTS_SECTION section_start_tag SELF_CLOSE)
            ;

not_exists_section
            : LD '^' section_start_tag RD
              body?
              else_section?
              section_end_tag -> ^(NOT_EXISTS_SECTION section_start_tag ^(BODY body?) else_section? section_end_tag)
            | LD '^' section_start_tag '/' RD -> ^(NOT_EXISTS_SECTION section_start_tag SELF_CLOSE)
            ;

context_helper_section
            : LD '@' section_start_tag RD
              body?
              section_end_tag -> ^(CONTEXT_HELPER_SECTION section_start_tag ^(BODY body?) section_end_tag)
            | LD '@' section_start_tag '/' RD -> ^(CONTEXT_HELPER_SECTION section_start_tag SELF_CLOSE)
            ;

pragma_section
            : LD '%' section_start_tag RD
              body?
              section_end_tag -> ^(PRAGMA_SECTION section_start_tag ^(BODY body?) section_end_tag)
            | LD '%' section_start_tag '/' RD -> ^(PRAGMA_SECTION section_start_tag SELF_CLOSE)
            ;

block_section
            : LD '+' section_start_tag RD
              body?
              section_end_tag -> ^(BLOCK_SECTION section_start_tag ^(BODY body?) section_end_tag)
            | LD '+' section_start_tag '/' RD -> ^(BLOCK_SECTION section_start_tag SELF_CLOSE)
            ;

inline_partial_section
            : LD '<' section_start_tag RD
              body?
              section_end_tag -> ^(INLINE_PARTIAL_SECTION section_start_tag ^(BODY body?) section_end_tag)
            | LD '<' section_start_tag '/' RD -> ^(INLINE_PARTIAL_SECTION section_start_tag SELF_CLOSE)
            ;

custom_section
                : LD '*' section_start_tag '/' RD -> ^(CUSTOM_SECTION section_start_tag SELF_CLOSE)
                ;
section
      : loop_section
      | exists_section
      | not_exists_section
      | context_helper_section
      | pragma_section
      | block_section
      | inline_partial_section
      | custom_section
      ;

comment
      :  COMMENT_T -> ^(COMMENT COMMENT_T)
      ;


From andy.voelkel at plantronics.com  Mon Oct 24 14:44:49 2011
From: andy.voelkel at plantronics.com (Voelkel, Andy)
Date: Mon, 24 Oct 2011 21:44:49 +0000
Subject: [antlr-interest] Should I contribute working example code for
 CSharp3 target?
In-Reply-To: <CACTOmx92yip_T5oKRPtVhdK6zZd9qJ4B6UeE9HXfd5FNRxt-Gg@mail.gmail.com>
References: <92E9AB4D42199B4793CE24E094BAEE070D332F@USSCMB03.plt.plantronics.com>
	<92E9AB4D42199B4793CE24E094BAEE070D36EA@USSCMB03.plt.plantronics.com>
	<598C228E-9B34-444E-8066-5EA77B76F10E@cs.usfca.edu>
	<CACTOmx92yip_T5oKRPtVhdK6zZd9qJ4B6UeE9HXfd5FNRxt-Gg@mail.gmail.com>
Message-ID: <92E9AB4D42199B4793CE24E094BAEE070E3A38@USSCMB03.plt.plantronics.com>

I just sent Terence 3 examples from his book, converted to the C# target. If you?d like, I can send you the same zip file


-          Andy

From: ??? [mailto:lizhipeng at gmail.com]
Sent: Saturday, October 22, 2011 9:53 AM
To: Terence Parr
Cc: Voelkel, Andy; antlr-interest Interest
Subject: Re: [antlr-interest] Should I contribute working example code for CSharp3 target?

me too, I have trouble at begin for C# too.



On Sunday, October 23, 2011, Terence Parr wrote:
sure. send me a zip.
Ter
On Oct 22, 2011, at 9:14 AM, Voelkel, Andy wrote:

> Hi,
> Thanks to the generous help from this list, I seem to have got over the worst of the learning curve for the Antlr C# target. I've also started to notice the logic in how the C# target deviates from the Java target, so I don't think I'll have to pester the list with stupid questions quite so much going forward. The C# target part of the learning curve has been for me much more difficult than the Antr learning curve itself, mostly because there is a lot of broken or out of date example code for the C# target floating around and it is hard to know where to look for useful examples that do work properly.
> Anyhow, I've converted all the "calculator" examples from the first section of The Definitive Guide To Antlr to the CSharp3 target and they all seem to work. If there is interest and if I know how to do it, I would be happy to contribute them to the Antlr community. I'll probably continue to convert more examples as I work my way through the book.
> I have to laugh, because for all I know there are up to date examples for all of these and I just don't know where they are!
> I'd also be happy to contribute a few paragraphs on how the CSharp3 target grammar files and test harness differ from the Java target. These might be useful to newcomers such as myself since one generally loses "the beginners perspective" over time and thing become obvious that might not be obvious to beginners.
>
> -          Andy
>
> ________________________________
>
> CONFIDENTIALITY NOTICE: This e-mail transmission, and any documents, files or previous e-mail messages attached to it, may contain information that is confidential and/or legally privileged. If you are not the intended recipient, or a person responsible for delivering it to the intended recipient, please DO NOT disclose the contents to another person, store or copy the information in any medium, or use any of the information contained in or attached to this transmission for any purpose. If you have received this transmission in error, please immediately notify the sender by reply email or at privacy at plantronics.com, and destroy the original transmission and its attachments without reading or saving in any manner.
>
> For further information about Plantronics - the Company, its products, brands, partners, please visit our website www.plantronics.com<http://www.plantronics.com>.
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address


List: http://www.antlr.org/mailman/listinfo/antlr-interest
Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address

________________________________

CONFIDENTIALITY NOTICE: This e-mail transmission, and any documents, files or previous e-mail messages attached to it, may contain information that is confidential and/or legally privileged. If you are not the intended recipient, or a person responsible for delivering it to the intended recipient, please DO NOT disclose the contents to another person, store or copy the information in any medium, or use any of the information contained in or attached to this transmission for any purpose. If you have received this transmission in error, please immediately notify the sender by reply email or at privacy at plantronics.com, and destroy the original transmission and its attachments without reading or saving in any manner.

For further information about Plantronics - the Company, its products, brands, partners, please visit our website www.plantronics.com.

From hashutosh at apache.org  Mon Oct 24 16:15:29 2011
From: hashutosh at apache.org (Ashutosh Chauhan)
Date: Mon, 24 Oct 2011 16:15:29 -0700
Subject: [antlr-interest] ANTLR v3.4 generates compiler errors (that
 v3.3 doesn't generate)
In-Reply-To: <CAN45N131Qsz+X-v2R6LvV9yKw=GGOvTZd+snSj+qN6NQaYyomQ@mail.gmail.com>
References: <CAC3B97F-0350-4D01-93FF-AC6E02709A2B@habelitz.com>
	<CAN45N131Qsz+X-v2R6LvV9yKw=GGOvTZd+snSj+qN6NQaYyomQ@mail.gmail.com>
Message-ID: <CA+FBdFT43vARF5SFJMgpKnncPH0EaU0n5=UO7uyZD6_snABxWA@mail.gmail.com>

Ter is aware of it but is holding off on fixing the bugs for org.antlr.Tool
3.4.

Is there any timeline on when will be the next release. I will be eager to
try it out as we want to upgrade, which we can't because of the issue I
reported on a different thread.

On Mon, Oct 24, 2011 at 12:24, Eric <researcher0x00 at gmail.com> wrote:

> On Mon, Oct 24, 2011 at 10:41 AM, Dieter Habelitz <
> dieter.habelitz at habelitz.com> wrote:
>
> > Hi folks,
> >
> > When feeding ANTLR 3.4 with my Java grammars it doesn't generate valid
> > Java sources (26 compiler errors) - with v3.3 everything is okay.
> >
> > Here's a snipped of the grammar that raises one of the problems:
> >
> > statement
> >   :   block
> >   |   assertStatement
> >   |   ifStatement
> >   |   forStatement
> >   |    [... and so on ...]
> >   ;
> >
> > ifStatement
> >        : IF parenthesizedExpression ifStat=statement
> >       (   ELSE elseStat=statement -> ^(IF parenthesizedExpression $ifStat
> > $elseStat)
> >       |                           -> ^(IF parenthesizedExpression
> $ifStat)
> >       )
> >        ;
> >
> > Amongst other things v3.4 generates the following code for the 'ELSE'
> > branch
> > of the rule 'ifStatement' (have a look at the local 'variable
> > declaration': void  =null;):
> >
> >   public final void synpred137_Java_fragment() throws
> RecognitionException
> > {
> >       void  =null;
> >
> >       // [... some comments not relevant here ...]
> >       {
> >       match(input,ELSE,FOLLOW_ELSE_in_synpred137_Java9244); if
> > (state.failed) return ;
> >
> >       pushFollow(FOLLOW_statement_in_synpred137_Java9248);
> >       elseStat=statement();
> >
> >       state._fsp--;
> >       if (state.failed) return ;
> >
> >       }
> >
> >   }
> >
> > However, v3.3 generates the following code from the same grammar:
> >
> >   public final void synpred137_Java_fragment() throws
> RecognitionException
> > {
> >       JavaParser.statement_return elseStat = null;
> >
> >
> >       // [... some comments not relevant here ...]
> >       {
> >       match(input,ELSE,FOLLOW_ELSE_in_synpred137_Java9244); if
> > (state.failed) return ;
> >       pushFollow(FOLLOW_statement_in_synpred137_Java9248);
> >       elseStat=statement();
> >
> >       state._fsp--;
> >       if (state.failed) return ;
> >
> >       }
> >   }
> >
> > The complete grammars can be found at ...
> >
> >
> http://www.habelitz.com/index.php?option=com_content&task=view&id=12&Itemid=8
> >
> > Any hints? Switch back to org.antlr.Tool 3.3
>
>
>
>
> > A bug within v3.4? Yes
> >
>
> Ter is aware of it but is holding off on fixing the bugs for org.antlr.Tool
> 3.4.
>
>
> >
> > Ciao
> > Dieter
> >
> >
> > List: http://www.antlr.org/mailman/listinfo/antlr-interest
> > Unsubscribe:
> > http://www.antlr.org/mailman/options/antlr-interest/your-email-address
> >
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>

From jan.graefen at rwth-aachen.de  Mon Oct 24 19:50:48 2011
From: jan.graefen at rwth-aachen.de (=?ISO-8859-15?Q?Jan_Gr=E4fen?=)
Date: Tue, 25 Oct 2011 04:50:48 +0200
Subject: [antlr-interest] Resolving Member-References
Message-ID: <4EA62408.3070606@rwth-aachen.de>

Hey guys,

I have a quick question.

memberReference
     :   (start='this' | start='parent') ('.' member+=(methodCall | 
Identifier))*
     ;

I have this simplified rule above and I want to save all methodCalls and 
Identifiers into $members.
This doesn't seem to work since methodCall is a rule and Identifier is a 
token.
Any idea how to accomplish this?

With kind regards,
Jan

From chwchw at gmx.de  Tue Oct 25 02:44:38 2011
From: chwchw at gmx.de (Christian)
Date: Tue, 25 Oct 2011 11:44:38 +0200
Subject: [antlr-interest] one rewrite rule for all alternative literals
Message-ID: <4EA68506.1030908@gmx.de>

Hi community,

I want to use only one rewrite rule for all alternatives within a rule.
Here is an example of what I want to do, but what does not work:

class_modifier
  :
  m=('new'
  | 'public'
  | 'protected'
  | 'internal'
  | 'private'
  | 'abstract'
  | 'sealed'
  | 'static'
  | 'unsafe') -> ^(CLASS_MODIFIER $m)
  ;

Why does this not work and how can I solve my problem?

Greetings,
Christian

From bkiers at gmail.com  Tue Oct 25 02:51:59 2011
From: bkiers at gmail.com (Bart Kiers)
Date: Tue, 25 Oct 2011 11:51:59 +0200
Subject: [antlr-interest] one rewrite rule for all alternative literals
In-Reply-To: <4EA68506.1030908@gmx.de>
References: <4EA68506.1030908@gmx.de>
Message-ID: <CAOrgODaa=CAxwwc5R=D=K+WKLsHtv4Bv3vW9_wq_+0Bn9=RNKQ@mail.gmail.com>

Hi Christian,

Because you can't assign a label to an "OR-ed" group. You need to do
something similar to this:

class_modifier
 : mod -> ^(CLASS_MODIFIER mod)
 ;

mod
 : 'new'
 | 'public'
 | 'protected'
 | 'internal'
 | 'private'
 | 'abstract'
 | 'sealed'
 | 'static'
 | 'unsafe'
 ;

Or like this:

foo
 : class_modifier ID -> ^(FOO ID ^(CLASS_MODIFIER class_modifier))
 ;

class_modifier
 : 'new'
 | 'public'
 | 'protected'
 | 'internal'
 | 'private'
 | 'abstract'
 | 'sealed'
 | 'static'
 | 'unsafe'
 ;

Regards,

Bart.


On Tue, Oct 25, 2011 at 11:44 AM, Christian <chwchw at gmx.de> wrote:

> Hi community,
>
> I want to use only one rewrite rule for all alternatives within a rule.
> Here is an example of what I want to do, but what does not work:
>
> class_modifier
>  :
>  m=('new'
>  | 'public'
>  | 'protected'
>  | 'internal'
>  | 'private'
>  | 'abstract'
>  | 'sealed'
>  | 'static'
>  | 'unsafe') -> ^(CLASS_MODIFIER $m)
>  ;
>
> Why does this not work and how can I solve my problem?
>
> Greetings,
> Christian
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>

From chwchw at gmx.de  Tue Oct 25 03:06:58 2011
From: chwchw at gmx.de (Christian)
Date: Tue, 25 Oct 2011 12:06:58 +0200
Subject: [antlr-interest] one rewrite rule for all alternative literals
In-Reply-To: <CAOrgODaa=CAxwwc5R=D=K+WKLsHtv4Bv3vW9_wq_+0Bn9=RNKQ@mail.gmail.com>
References: <4EA68506.1030908@gmx.de>
	<CAOrgODaa=CAxwwc5R=D=K+WKLsHtv4Bv3vW9_wq_+0Bn9=RNKQ@mail.gmail.com>
Message-ID: <4EA68A42.4060809@gmx.de>

Wonderful! Thank you, Bart. I have already seen this technique a cupple
of times. I try to apply it the next times if I get stuck again.

Am 25.10.2011 11:51, schrieb Bart Kiers:
> Hi Christian,
>
> Because you can't assign a label to an "OR-ed" group. You need to do
> something similar to this:
>
> class_modifier
>  : mod -> ^(CLASS_MODIFIER mod)
>  ;
>
> mod
>  : 'new'
>  | 'public'
>  | 'protected'
>  | 'internal'
>  | 'private'
>  | 'abstract'
>  | 'sealed'
>  | 'static'
>  | 'unsafe'
>  ;
>
> Or like this:
>
> foo
>  : class_modifier ID -> ^(FOO ID ^(CLASS_MODIFIER class_modifier))
>  ;
>  
> class_modifier
>  : 'new'
>  | 'public'
>  | 'protected'
>  | 'internal'
>  | 'private'
>  | 'abstract'
>  | 'sealed'
>  | 'static'
>  | 'unsafe'
>  ;
>
> Regards,
>
> Bart.
>
>
> On Tue, Oct 25, 2011 at 11:44 AM, Christian <chwchw at gmx.de
> <mailto:chwchw at gmx.de>> wrote:
>
>     Hi community,
>
>     I want to use only one rewrite rule for all alternatives within a
>     rule.
>     Here is an example of what I want to do, but what does not work:
>
>     class_modifier
>      :
>      m=('new'
>      | 'public'
>      | 'protected'
>      | 'internal'
>      | 'private'
>      | 'abstract'
>      | 'sealed'
>      | 'static'
>      | 'unsafe') -> ^(CLASS_MODIFIER $m)
>      ;
>
>     Why does this not work and how can I solve my problem?
>
>     Greetings,
>     Christian
>
>     List: http://www.antlr.org/mailman/listinfo/antlr-interest
>     Unsubscribe:
>     http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>
>


From contact at maik-schmidt.de  Tue Oct 25 06:58:42 2011
From: contact at maik-schmidt.de (pragmaik)
Date: Tue, 25 Oct 2011 06:58:42 -0700 (PDT)
Subject: [antlr-interest] How to integrate a symbol table with StringTemplate
Message-ID: <1319551122824-6928895.post@n2.nabble.com>

Hi!

I am writing a small domain specific language that basically is a subset of
the C language. The output of my compiler is C# code that gets translated by
the Microsoft compiler later on.

At the moment I have an architectural problem, that is I do not know how to
integrate the information in my symbol table with the tree grammar that
actually emits the final string template.

To be concrete: whenever a function is called in my language I'd like to
traverse the actual parameters and compare them to the formal parameters
stored in the symbol table. I need this, so I can add some special
conversion functions to the string template.

My tree grammar starts like this:

tree grammar Translator;

options {
    language = CSharp3;
    tokenVocab = MyTokens;
    ASTLabelType = MyAST;
	output = template;
}

public
compilationUnit
    :    (d+=methodDeclaration | d+=variableDeclaration)+ -> file(defs={$d})
    ;

methodDeclaration
    :    ^(METHOD_DECL type IDENTIFIER a+=formalParameter* block) ->
method(name={$IDENTIFIER.text}, retType={$type.st}, args={$a},
block={$block.st})
    ;

formalParameter
    :    ^(ARG_DECL type IDENTIFIER) -> arg(name={$IDENTIFIER.text},
type={$type.st})
    ;

variableDeclaration
    :    ^(VAR_DECL type IDENTIFIER expression) ->
decl(name={$IDENTIFIER.text}, type={$type.st}, init={$expression.st})
    ;

block 
    :    ^(BLOCK s+=statement*) -> block(stats={$s})
    ;

statement
    :    block                                                            ->
{$block.st}
	|    variableDeclaration                                              ->
{$variableDeclaration.st}
	|	 ^('=' a=expression b=expression)                                 ->
assign(a={$a.st}, b={$b.st})
	|    ^('return' expression?)                                          ->
return(v={$expression.st})
	|    ^('if' expression b1=block b2=block?)                            ->
if(cond={$expression.st}, block1={$b1.st}, block2={$b2.st})
	|    ^(FOREACH type IDENTIFIER  b=block e1=expression e2=expression?) ->
foreach(type={$type.st}, name={$IDENTIFIER.text}, e={$e1.st}, c={$e2.st},
block={$b.st}, counter={COUNTER++})
	|    ^(EXPR ^(CALL IDENTIFIER ^(ELIST p+=expr*)))                     ->
callstat(name={$IDENTIFIER.text}, args={$p})
	;

...

The last rule matches function calls and delegates all the work to
StringTemplate. How could I intercept here and use the information stored in
the symbol table. I already have a Translator constructor that expects a
SymbolTable instance and stores it in a private member named _symbolTable.

Cheers,
Maik


--
View this message in context: http://antlr.1301665.n2.nabble.com/How-to-integrate-a-symbol-table-with-StringTemplate-tp6928895p6928895.html
Sent from the ANTLR mailing list archive at Nabble.com.

From WeikEngOff at aol.com  Tue Oct 25 07:02:23 2011
From: WeikEngOff at aol.com (Udo Weik)
Date: Tue, 25 Oct 2011 16:02:23 +0200
Subject: [antlr-interest] Eclipse (Indigo Release) and ANTLR 3.4: Debugging
Message-ID: <4EA6C16F.4040602@aol.com>

Hello,

when I try to step into ANTLRStringStream, the debugger
complains "Source not found". Via button "Edit Source
Lookup Path" I tried to add the runtime-sources at
...\ANTLR3\antlr-3.4\runtime\Java\src\main\java\org\antlr\runtime
without success. Code snippet:

import org.antlr.runtime.*;

public class Test {
     public static void main(String[] args) throws Exception {
         // Create an input character stream from standard in
         ANTLRStringStream input = new ANTLRStringStream( "..." );
...

\org\... is already included in the \src-folder of the project
and antlr-3.4-complete.jar as "Referenced Libraries".

And I can run the test application. Any hints?


Many thanks and greetings
Udo



From tim at poole.co.uk  Tue Oct 25 08:53:22 2011
From: tim at poole.co.uk (Tim Poole)
Date: Tue, 25 Oct 2011 16:53:22 +0100
Subject: [antlr-interest] getText()
Message-ID: <4EA6DB72.6030606@poole.co.uk>

Jim,

Thanks for this - I didn't reply immediately because this didn't work, I 
think because the ESCAPEQUOTE and CHARNOQUOTE needed to be in the same 
rule for some reason, so I resorted to a regular expression.

The good news is that I used this fragment technique for another 
challenge in the same grammar, and it worked beautifully, so thank you!

Regards,

Tim.

On 21/10/2011 18:11, Jim Idle wrote:
> I wouldn't even bother doing this here in the lexer, it is extra work.
> Just process the token if you use it later. However:
>
> STRINGLITERAL
>        : (QUOTE (ESCAPEQUOTE | CHARNOQUOTE)* QUOTE)
>        | (APOS st=EC
>         {setText("\"" + $st.text + "\"");}
>        ;
>
> fragment EC : (ESCAPEAPOS | CHARNOAPOS)* ;
>
> Should do it (untested).
>
> Jim
>
>> -----Original Message-----
>> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
>> bounces at antlr.org] On Behalf Of Tim Poole
>> Sent: Friday, October 21, 2011 9:39 AM
>> To: antlr-interest at antlr.org
>> Subject: [antlr-interest] getText()
>>
>> Hi,
>>
>> I have just had to use this to change the single quotes around a string
>> to double quotes:
>>
>> STRINGLITERAL
>>       : (QUOTE (ESCAPEQUOTE | CHARNOQUOTE)* QUOTE)
>>       | (APOS  (ESCAPEAPOS | CHARNOAPOS)* APOS)
>> {setText(getText().replace('\'','\"'));}
>>       ;
>>
>> It's an adaptation of:
>>
>> http://antlr.org/grammar/1264460091565/XPath2.g
>>
>> I tried to do the following, without success:
>>
>> STRINGLITERAL
>>       : (QUOTE (ESCAPEQUOTE | CHARNOQUOTE)* QUOTE)
>>       | (APOS st=(ESCAPEAPOS | CHARNOAPOS)* APOS) {setText("\"" +
>> $st.text + "\"");}
>>       ;
>>
>> Any ideas on how I can implement something along the lines of the
>> second one?  It was easy to rewrite this time, but next time might not
>> be so easy!
>>
>> Thanks in advance,
>>
>> Tim.
>>
>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
>> email-address
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: 
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>
>
> -----
> No virus found in this message.
> Checked by AVG - www.avg.com
> Version: 2012.0.1831 / Virus Database: 2092/4565 - Release Date: 10/21/11

From tim at poole.co.uk  Tue Oct 25 08:53:59 2011
From: tim at poole.co.uk (Tim Poole)
Date: Tue, 25 Oct 2011 16:53:59 +0100
Subject: [antlr-interest] Multiple string template rule
Message-ID: <4EA6DB97.4010200@poole.co.uk>

Hi all,

I'm trying to use the += in the following rule, but I'm not sure if my 
use of it is correct.

Does anyone have any thoughts?

I'm trying to convert:

rule != "working" and mental_state == "distressed"

into:

rule != "working" && mental_state == "distressed"

Obviously, this snippet of grammar doesn't cover the expressions 
(andExpr) on either side of the "and", but I hope it gives you a flavour 
of what I'm trying to achieve.

orExpr
     : a=andExpr (OR b+=andExpr)* -> template(a={$a.text}, bf={$b}) 
"<a><bf; separator=\" && \">"
     ;

Regards,

Tim.

From jimi at temporal-wave.com  Tue Oct 25 09:02:29 2011
From: jimi at temporal-wave.com (Jim Idle)
Date: Tue, 25 Oct 2011 09:02:29 -0700
Subject: [antlr-interest] Multiple string template rule
In-Reply-To: <4EA6DB97.4010200@poole.co.uk>
References: <4EA6DB97.4010200@poole.co.uk>
Message-ID: <527b99d47d78cd28273667bf2108f093@mail.gmail.com>

Probably because you are modifying the OR rule and not the AND rule.

Jim

> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of Tim Poole
> Sent: Tuesday, October 25, 2011 8:54 AM
> To: antlr-interest at antlr.org
> Subject: [antlr-interest] Multiple string template rule
>
> Hi all,
>
> I'm trying to use the += in the following rule, but I'm not sure if my
> use of it is correct.
>
> Does anyone have any thoughts?
>
> I'm trying to convert:
>
> rule != "working" and mental_state == "distressed"
>
> into:
>
> rule != "working" && mental_state == "distressed"
>
> Obviously, this snippet of grammar doesn't cover the expressions
> (andExpr) on either side of the "and", but I hope it gives you a
> flavour of what I'm trying to achieve.
>
> orExpr
>      : a=andExpr (OR b+=andExpr)* -> template(a={$a.text}, bf={$b})
> "<a><bf; separator=\" && \">"
>      ;
>
> Regards,
>
> Tim.
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
> email-address

From weissig at rbg.informatik.tu-darmstadt.de  Tue Oct 25 09:28:07 2011
From: weissig at rbg.informatik.tu-darmstadt.de (=?UTF-8?B?WXZlcyBXZWnDn2ln?=)
Date: Tue, 25 Oct 2011 18:28:07 +0200
Subject: [antlr-interest] Compiling C runtime & linking
In-Reply-To: <4EA59320.2040309@rbg.informatik.tu-darmstadt.de>
References: <4EA53F49.6030205@rbg.informatik.tu-darmstadt.de>	<4EA58055.9090706@rbg.informatik.tu-darmstadt.de>	<b19e8710477fae984be93d5cf5b099b5@mail.gmail.com>
	<4EA59320.2040309@rbg.informatik.tu-darmstadt.de>
Message-ID: <4EA6E397.3040001@rbg.informatik.tu-darmstadt.de>

Hi,
does anybody have an answer to this?
The structs do not match. I think this results from my rule:
group		:	(OPEN
				children+=space*
				(
				children+=group children+=space* |
				children+=plaintext children+=space* |
				(children+=command | children+=escape)
				(children+=delimiter children+=space+ | children+=delimiter | )
				)+
			CLOSE) -> ^(GROUP $children*) ;
Do you have a workaround?
Best regards, Yves

Am 24.10.2011 18:32, schrieb Yves Wei?ig:
> I attached the generated code...
> static RtfParser_group_return
> group(pRtfParser ctx)
> begins at line 2015.
> first error is thrown at line 2113.
> maybe my rule is wrong? but output to java works fine.
> best regards, yves
> 
> Am 24.10.2011 17:16, schrieb Jim Idle:
>> To link statically you need to reference the .a version of the library I
>> think. I don't know what your other errors are as I can?t see your source
>> code.
>>
>>
>> Jim
>>
>>> -----Original Message-----
>>> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
>>> bounces at antlr.org] On Behalf Of Yves Wei?ig
>>> Sent: Monday, October 24, 2011 8:12 AM
>>> Cc: antlr-interest at antlr.org
>>> Subject: Re: [antlr-interest] Compiling C runtime & linking
>>>
>>> Hi again,
>>> this seems to be a problem with Windows (still the same error), but I
>>> tried the same under Linux and everything went fine. Compiled with
>>> ./configure, then make & make install. After that:
>>>
>>> g++ -I/usr/local/include -shared -oRtfToolkit.lib -static
>>> -L/usr/local/lib -lantlr3c RtfLexer.c RtfParser.c
>>>
>>> Without Parser it works fine, with Parser it throws several:
>>>
>>> RtfParser.c: In function ?RtfParser_group_return
>>> group(RtfParser_Ctx_struct*)?:
>>> RtfParser.c:2113: error: no match for ?operator=? in ?children =
>>> space(ctx)?
>>> RtfParser.h:198: note: candidates are:
>>> RtfParser_delimiter_return_struct&
>>> RtfParser_delimiter_return_struct::operator=(const
>>> RtfParser_delimiter_return_struct&)
>>>
>>> I don't know what that means...
>>>
>>> The grammar rule looks like:
>>>
>>> group		:	(OPEN
>>> 				children+=space*
>>> 				(
>>> 				children+=group children+=space* |
>>> 				children+=plaintext children+=space* |
>>> 				(children+=command | children+=escape)
>>> 				(children+=delimiter children+=space+ |
>>> children+=delimiter | )
>>> 				)+
>>> 			CLOSE) -> ^(GROUP $children*) ;
>>>
>>> And one final question, how can I link the ANTLR runtime statically...
>>> the above statement (without compiling the Parser) generates a small
>>> lib of 16kb, so the ANTLR runtime is not linked static, or am I missing
>>> a point here?
>>>
>>> Best regards, Yves
>>>
>>> Am 24.10.2011 12:34, schrieb Yves Wei?ig:
>>>> Hi list,
>>>> I successfully compiled the C runtime for ANTLR with VS 2010.
>>>> Now I want to compile the generated code (Lexer and Parser) with this
>>>> command:
>>>> g++ -Iantlrinclude -static -L. -lantlr3c RtfLexer.c RtfParser.c
>>>> as you may notice, antlr.h and all includefiles are in antlrinclude
>>>> and the antlr3c.lib (copied from the Release dir of VS solution) lies
>>>> in the current working dir. I would like to include the runtime
>>>> statically ("-static").
>>>> But it throws:
>>>> C:\Users\Yves\AppData\Local\Temp/ccctgQP2.o:RtfLexer.c:(.text+0xb9):
>>>> undefined reference to `antlr3LexerNewStream'
>>>> which makes me believe the library is not correctly linked... what is
>>>> wrong here?
>>>> Best regards, Yves
>>>>
>>>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>>>> Unsubscribe:
>>>> http://www.antlr.org/mailman/options/antlr-interest/your-email-
>>> address
>>>
>>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>>> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
>>> email-address
>>
>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>>
>>
>>
>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address

From weissig at rbg.informatik.tu-darmstadt.de  Tue Oct 25 09:37:17 2011
From: weissig at rbg.informatik.tu-darmstadt.de (=?ISO-8859-15?Q?Yves_Wei=DFig?=)
Date: Tue, 25 Oct 2011 18:37:17 +0200
Subject: [antlr-interest] Tree grammar, can't find the error
Message-ID: <4EA6E5BD.90603@rbg.informatik.tu-darmstadt.de>

Hi list,

I trying to write a tree grammar for this tree:

(PROG (WSN   ) (GROUP (COMMAND pard) ) ... )

So, a PROG node is parent of multiple WSN, GROUP, etc. nodes.

My rules look like:
prog      : ^('PROG' (v+=space | v+=group)+) -> emit(v={$v}) ;
space     : ^('WSN' v=.*) -> emit(v={$v}) |
            ^('TABN' v=.*) -> emit(v={$v}) |
            ^('NEWLINEN' v=.*) -> emit(v={$v}) ;
group     : ^('GROUP' v+=space*
              (v+=group v+=space* |
              v+=plaintext v+=space* |
              (v+=command | v+=escape)
              (v+=delimiter v+=space+ | v+=delimiter | ))+) -> grp(v={$v}) ;
...

This throws "can't look backwards more than one token in this stream",
so I assume I have an error in my tree grammar... I just managed to write:

prog      : ^('PROG' v+=.*) -> emit(v={$v}) ;

which gives me:

WSNGROUP

But I want to output the subtrees, so I need the first approach. Can
anybody tell me what I'm doing wrong?

Best regards, Yves

From tim at poole.co.uk  Tue Oct 25 10:00:22 2011
From: tim at poole.co.uk (Tim Poole)
Date: Tue, 25 Oct 2011 18:00:22 +0100
Subject: [antlr-interest] Multiple string template rule
In-Reply-To: <527b99d47d78cd28273667bf2108f093@mail.gmail.com>
References: <4EA6DB97.4010200@poole.co.uk>
	<527b99d47d78cd28273667bf2108f093@mail.gmail.com>
Message-ID: <4EA6EB26.3040302@poole.co.uk>

:$

That's a bit embarrasing!

OK, so I am actually trying to do a similar thing for both the OR 
statements and the AND statements.

What I didn't explain was that the "<bf ...>" expression isn't 
contributing anything, so it looks like the "b+=andExpr" isn't catching 
anything from the token.

There is an example rule including "( p+=parameterDef )*" but this is 
slightly different to my "(OR b+=andExpr)*".

I suspect that I probably need something closer to "<bf:{ expr | \|\| 
<expr> }>".
I have tried something similar, but the lack of data in bf seems to be 
the limiting factor.

I'm hoping it's possible, just that I don't understand how to do it, yet.

Any thoughts gratefully received...

I'm trying to convert:

rule != "working" or mental_state == "distressed"

into:

rule != "working" || mental_state == "distressed"

Obviously, this snippet of grammar doesn't cover the expressions
(andExpr) on either side of the "or", but I hope it gives you a
flavour of what I'm trying to achieve.

orExpr
      : a=andExpr (OR b+=andExpr)* ->  template(a={$a.text}, bf={$b}) "<a><bf; separator=\" || \">"
      ;

Regards,

Tim.

On 25/10/2011 17:02, Jim Idle wrote:
> Probably because you are modifying the OR rule and not the AND rule.
>
> Jim
>
>> -----Original Message-----
>> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
>> bounces at antlr.org] On Behalf Of Tim Poole
>> Sent: Tuesday, October 25, 2011 8:54 AM
>> To: antlr-interest at antlr.org
>> Subject: [antlr-interest] Multiple string template rule
>>
>> Hi all,
>>
>> I'm trying to use the += in the following rule, but I'm not sure if my
>> use of it is correct.
>>
>> Does anyone have any thoughts?
>>
>> I'm trying to convert:
>>
>> rule != "working" and mental_state == "distressed"
>>
>> into:
>>
>> rule != "working"&&  mental_state == "distressed"
>>
>> Obviously, this snippet of grammar doesn't cover the expressions
>> (andExpr) on either side of the "and", but I hope it gives you a
>> flavour of what I'm trying to achieve.
>>
>> orExpr
>>       : a=andExpr (OR b+=andExpr)* ->  template(a={$a.text}, bf={$b})
>> "<a><bf; separator=\"&&  \">"
>>       ;
>>
>> Regards,
>>
>> Tim.
>>
>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
>> email-address
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>
>
> -----
> No virus found in this message.
> Checked by AVG - www.avg.com
> Version: 2012.0.1834 / Virus Database: 2092/4572 - Release Date: 10/24/11

From jimi at temporal-wave.com  Tue Oct 25 11:50:58 2011
From: jimi at temporal-wave.com (Jim Idle)
Date: Tue, 25 Oct 2011 11:50:58 -0700
Subject: [antlr-interest] Compiling C runtime & linking
In-Reply-To: <4EA6E397.3040001@rbg.informatik.tu-darmstadt.de>
References: <4EA53F49.6030205@rbg.informatik.tu-darmstadt.de>
	<4EA58055.9090706@rbg.informatik.tu-darmstadt.de>	<b19e8710477fae984be93d5cf5b099b5@mail.gmail.com>
	<4EA59320.2040309@rbg.informatik.tu-darmstadt.de>
	<4EA6E397.3040001@rbg.informatik.tu-darmstadt.de>
Message-ID: <a4f5640cad8ab0939d5a79a79b19e74b@mail.gmail.com>

You cannot add different return types to 'children' like that. put the alts
in a subrule in the same order and accumulate the subrule. What is your
output= option?

Jim

> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of Yves Wei?ig
> Sent: Tuesday, October 25, 2011 9:28 AM
> To: antlr-interest at antlr.org
> Subject: Re: [antlr-interest] Compiling C runtime & linking
>
> Hi,
> does anybody have an answer to this?
> The structs do not match. I think this results from my rule:
> group		:	(OPEN
> 				children+=space*
> 				(
> 				children+=group children+=space* |
> 				children+=plaintext children+=space* |
> 				(children+=command | children+=escape)
> 				(children+=delimiter children+=space+ |
> children+=delimiter | )
> 				)+
> 			CLOSE) -> ^(GROUP $children*) ;
> Do you have a workaround?
> Best regards, Yves
>
> Am 24.10.2011 18:32, schrieb Yves Wei?ig:
> > I attached the generated code...
> > static RtfParser_group_return
> > group(pRtfParser ctx)
> > begins at line 2015.
> > first error is thrown at line 2113.
> > maybe my rule is wrong? but output to java works fine.
> > best regards, yves
> >
> > Am 24.10.2011 17:16, schrieb Jim Idle:
> >> To link statically you need to reference the .a version of the
> >> library I think. I don't know what your other errors are as I can?t
> >> see your source code.
> >>
> >>
> >> Jim
> >>
> >>> -----Original Message-----
> >>> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> >>> bounces at antlr.org] On Behalf Of Yves Wei?ig
> >>> Sent: Monday, October 24, 2011 8:12 AM
> >>> Cc: antlr-interest at antlr.org
> >>> Subject: Re: [antlr-interest] Compiling C runtime & linking
> >>>
> >>> Hi again,
> >>> this seems to be a problem with Windows (still the same error), but
> >>> I tried the same under Linux and everything went fine. Compiled
> with
> >>> ./configure, then make & make install. After that:
> >>>
> >>> g++ -I/usr/local/include -shared -oRtfToolkit.lib -static
> >>> -L/usr/local/lib -lantlr3c RtfLexer.c RtfParser.c
> >>>
> >>> Without Parser it works fine, with Parser it throws several:
> >>>
> >>> RtfParser.c: In function ?RtfParser_group_return
> >>> group(RtfParser_Ctx_struct*)?:
> >>> RtfParser.c:2113: error: no match for ?operator=? in ?children =
> >>> space(ctx)?
> >>> RtfParser.h:198: note: candidates are:
> >>> RtfParser_delimiter_return_struct&
> >>> RtfParser_delimiter_return_struct::operator=(const
> >>> RtfParser_delimiter_return_struct&)
> >>>
> >>> I don't know what that means...
> >>>
> >>> The grammar rule looks like:
> >>>
> >>> group		:	(OPEN
> >>> 				children+=space*
> >>> 				(
> >>> 				children+=group children+=space* |
> >>> 				children+=plaintext children+=space* |
> >>> 				(children+=command | children+=escape)
> >>> 				(children+=delimiter children+=space+ |
> >>> children+=delimiter | )
> >>> 				)+
> >>> 			CLOSE) -> ^(GROUP $children*) ;
> >>>
> >>> And one final question, how can I link the ANTLR runtime
> statically...
> >>> the above statement (without compiling the Parser) generates a
> small
> >>> lib of 16kb, so the ANTLR runtime is not linked static, or am I
> >>> missing a point here?
> >>>
> >>> Best regards, Yves
> >>>
> >>> Am 24.10.2011 12:34, schrieb Yves Wei?ig:
> >>>> Hi list,
> >>>> I successfully compiled the C runtime for ANTLR with VS 2010.
> >>>> Now I want to compile the generated code (Lexer and Parser) with
> >>>> this
> >>>> command:
> >>>> g++ -Iantlrinclude -static -L. -lantlr3c RtfLexer.c RtfParser.c
> >>>> as you may notice, antlr.h and all includefiles are in
> antlrinclude
> >>>> and the antlr3c.lib (copied from the Release dir of VS solution)
> >>>> lies in the current working dir. I would like to include the
> >>>> runtime statically ("-static").
> >>>> But it throws:
> >>>>
> C:\Users\Yves\AppData\Local\Temp/ccctgQP2.o:RtfLexer.c:(.text+0xb9):
> >>>> undefined reference to `antlr3LexerNewStream'
> >>>> which makes me believe the library is not correctly linked... what
> >>>> is wrong here?
> >>>> Best regards, Yves
> >>>>
> >>>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> >>>> Unsubscribe:
> >>>> http://www.antlr.org/mailman/options/antlr-interest/your-email-
> >>> address
> >>>
> >>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> >>> Unsubscribe:
> >>> http://www.antlr.org/mailman/options/antlr-interest/your-
> >>> email-address
> >>
> >> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> >> Unsubscribe:
> >> http://www.antlr.org/mailman/options/antlr-interest/your-email-
> addres
> >> s
> >>
> >>
> >>
> >> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> >> Unsubscribe:
> >> http://www.antlr.org/mailman/options/antlr-interest/your-email-
> addres
> >> s
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
> email-address

From jimi at temporal-wave.com  Tue Oct 25 11:54:32 2011
From: jimi at temporal-wave.com (Jim Idle)
Date: Tue, 25 Oct 2011 11:54:32 -0700
Subject: [antlr-interest] Tree grammar, can't find the error
In-Reply-To: <4EA6E5BD.90603@rbg.informatik.tu-darmstadt.de>
References: <4EA6E5BD.90603@rbg.informatik.tu-darmstadt.de>
Message-ID: <e11922e974e1069c63fdcc65703293d4@mail.gmail.com>

You are just typing the tree syntax like a parser syntax and that will not
work. Walk the tree and produce the dot spec, produce the .png
representation and you will see the point. This is all recursive...

Think of how an expression tree is written:

expr : ^(PLUS expr expr)
	| ^(MINUS expr expr)
	| NUMBER
	;

You might need to start with the simple examples before trying to detangle
the parser that you have, but definitely start looking at the tree
graphically.

Jim

> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of Yves Wei?ig
> Sent: Tuesday, October 25, 2011 9:37 AM
> To: antlr-interest at antlr.org
> Subject: [antlr-interest] Tree grammar, can't find the error
>
> Hi list,
>
> I trying to write a tree grammar for this tree:
>
> (PROG (WSN   ) (GROUP (COMMAND pard) ) ... )
>
> So, a PROG node is parent of multiple WSN, GROUP, etc. nodes.
>
> My rules look like:
> prog      : ^('PROG' (v+=space | v+=group)+) -> emit(v={$v}) ;
> space     : ^('WSN' v=.*) -> emit(v={$v}) |
>             ^('TABN' v=.*) -> emit(v={$v}) |
>             ^('NEWLINEN' v=.*) -> emit(v={$v}) ;
> group     : ^('GROUP' v+=space*
>               (v+=group v+=space* |
>               v+=plaintext v+=space* |
>               (v+=command | v+=escape)
>               (v+=delimiter v+=space+ | v+=delimiter | ))+) ->
> grp(v={$v}) ; ...
>
> This throws "can't look backwards more than one token in this stream",
> so I assume I have an error in my tree grammar... I just managed to
> write:
>
> prog      : ^('PROG' v+=.*) -> emit(v={$v}) ;
>
> which gives me:
>
> WSNGROUP
>
> But I want to output the subtrees, so I need the first approach. Can
> anybody tell me what I'm doing wrong?
>
> Best regards, Yves
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
> email-address

From jimi at temporal-wave.com  Tue Oct 25 11:55:38 2011
From: jimi at temporal-wave.com (Jim Idle)
Date: Tue, 25 Oct 2011 11:55:38 -0700
Subject: [antlr-interest] Multiple string template rule
In-Reply-To: <4EA6EB26.3040302@poole.co.uk>
References: <4EA6DB97.4010200@poole.co.uk>	<527b99d47d78cd28273667bf2108f093@mail.gmail.com>
	<4EA6EB26.3040302@poole.co.uk>
Message-ID: <470520aae895893484abb717a2bb3769@mail.gmail.com>

Are all your rules either setting $st before they return or creating a
template with ->template(.... or similar? Producing the template is not
automatic.

Jim

> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of Tim Poole
> Sent: Tuesday, October 25, 2011 10:00 AM
> To: antlr-interest at antlr.org
> Subject: Re: [antlr-interest] Multiple string template rule
>
> :$
>
> That's a bit embarrasing!
>
> OK, so I am actually trying to do a similar thing for both the OR
> statements and the AND statements.
>
> What I didn't explain was that the "<bf ...>" expression isn't
> contributing anything, so it looks like the "b+=andExpr" isn't catching
> anything from the token.
>
> There is an example rule including "( p+=parameterDef )*" but this is
> slightly different to my "(OR b+=andExpr)*".
>
> I suspect that I probably need something closer to "<bf:{ expr | \|\|
> <expr> }>".
> I have tried something similar, but the lack of data in bf seems to be
> the limiting factor.
>
> I'm hoping it's possible, just that I don't understand how to do it,
> yet.
>
> Any thoughts gratefully received...
>
> I'm trying to convert:
>
> rule != "working" or mental_state == "distressed"
>
> into:
>
> rule != "working" || mental_state == "distressed"
>
> Obviously, this snippet of grammar doesn't cover the expressions
> (andExpr) on either side of the "or", but I hope it gives you a flavour
> of what I'm trying to achieve.
>
> orExpr
>       : a=andExpr (OR b+=andExpr)* ->  template(a={$a.text}, bf={$b})
> "<a><bf; separator=\" || \">"
>       ;
>
> Regards,
>
> Tim.
>
> On 25/10/2011 17:02, Jim Idle wrote:
> > Probably because you are modifying the OR rule and not the AND rule.
> >
> > Jim
> >
> >> -----Original Message-----
> >> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> >> bounces at antlr.org] On Behalf Of Tim Poole
> >> Sent: Tuesday, October 25, 2011 8:54 AM
> >> To: antlr-interest at antlr.org
> >> Subject: [antlr-interest] Multiple string template rule
> >>
> >> Hi all,
> >>
> >> I'm trying to use the += in the following rule, but I'm not sure if
> >> my use of it is correct.
> >>
> >> Does anyone have any thoughts?
> >>
> >> I'm trying to convert:
> >>
> >> rule != "working" and mental_state == "distressed"
> >>
> >> into:
> >>
> >> rule != "working"&&  mental_state == "distressed"
> >>
> >> Obviously, this snippet of grammar doesn't cover the expressions
> >> (andExpr) on either side of the "and", but I hope it gives you a
> >> flavour of what I'm trying to achieve.
> >>
> >> orExpr
> >>       : a=andExpr (OR b+=andExpr)* ->  template(a={$a.text},
> bf={$b})
> >> "<a><bf; separator=\"&&  \">"
> >>       ;
> >>
> >> Regards,
> >>
> >> Tim.
> >>
> >> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> >> Unsubscribe:
> >> http://www.antlr.org/mailman/options/antlr-interest/your-
> >> email-address
> > List: http://www.antlr.org/mailman/listinfo/antlr-interest
> > Unsubscribe:
> > http://www.antlr.org/mailman/options/antlr-interest/your-email-
> address
> >
> >
> > -----
> > No virus found in this message.
> > Checked by AVG - www.avg.com
> > Version: 2012.0.1834 / Virus Database: 2092/4572 - Release Date:
> > 10/24/11
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
> email-address

From tim at poole.co.uk  Tue Oct 25 13:37:11 2011
From: tim at poole.co.uk (Tim Poole)
Date: Tue, 25 Oct 2011 21:37:11 +0100
Subject: [antlr-interest] Multiple string template rule
In-Reply-To: <470520aae895893484abb717a2bb3769@mail.gmail.com>
References: <4EA6DB97.4010200@poole.co.uk>	<527b99d47d78cd28273667bf2108f093@mail.gmail.com>
	<4EA6EB26.3040302@poole.co.uk>
	<470520aae895893484abb717a2bb3769@mail.gmail.com>
Message-ID: <4EA71DF7.3050906@poole.co.uk>

Yes, my other re-writing rules have a similar structure. This is an 
example of one that's working:

unaryExpr
     :        ((PLUS|MINUS)?) valueExpr
     |        NOT valueExpr -> template(a={$valueExpr.text}) "not <a>"
     ;

And a conditional one:

generalComp
     :   gc=GENERAL_COMP
     -> {($gc.text).equals("=")}? template() "=="
     -> template(a={$gc.text}) "<a>"
     ;

On 25/10/2011 19:55, Jim Idle wrote:
> Are all your rules either setting $st before they return or creating a
> template with ->template(.... or similar? Producing the template is not
> automatic.
>
> Jim
>
>> -----Original Message-----
>> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
>> bounces at antlr.org] On Behalf Of Tim Poole
>> Sent: Tuesday, October 25, 2011 10:00 AM
>> To: antlr-interest at antlr.org
>> Subject: Re: [antlr-interest] Multiple string template rule
>>
>> :$
>>
>> That's a bit embarrasing!
>>
>> OK, so I am actually trying to do a similar thing for both the OR
>> statements and the AND statements.
>>
>> What I didn't explain was that the "<bf ...>" expression isn't
>> contributing anything, so it looks like the "b+=andExpr" isn't catching
>> anything from the token.
>>
>> There is an example rule including "( p+=parameterDef )*" but this is
>> slightly different to my "(OR b+=andExpr)*".
>>
>> I suspect that I probably need something closer to "<bf:{ expr | \|\|
>> <expr>  }>".
>> I have tried something similar, but the lack of data in bf seems to be
>> the limiting factor.
>>
>> I'm hoping it's possible, just that I don't understand how to do it,
>> yet.
>>
>> Any thoughts gratefully received...
>>
>> I'm trying to convert:
>>
>> rule != "working" or mental_state == "distressed"
>>
>> into:
>>
>> rule != "working" || mental_state == "distressed"
>>
>> Obviously, this snippet of grammar doesn't cover the expressions
>> (andExpr) on either side of the "or", but I hope it gives you a flavour
>> of what I'm trying to achieve.
>>
>> orExpr
>>        : a=andExpr (OR b+=andExpr)* ->   template(a={$a.text}, bf={$b})
>> "<a><bf; separator=\" || \">"
>>        ;
>>
>> Regards,
>>
>> Tim.
>>
>> On 25/10/2011 17:02, Jim Idle wrote:
>>> Probably because you are modifying the OR rule and not the AND rule.
>>>
>>> Jim
>>>
>>>> -----Original Message-----
>>>> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
>>>> bounces at antlr.org] On Behalf Of Tim Poole
>>>> Sent: Tuesday, October 25, 2011 8:54 AM
>>>> To: antlr-interest at antlr.org
>>>> Subject: [antlr-interest] Multiple string template rule
>>>>
>>>> Hi all,
>>>>
>>>> I'm trying to use the += in the following rule, but I'm not sure if
>>>> my use of it is correct.
>>>>
>>>> Does anyone have any thoughts?
>>>>
>>>> I'm trying to convert:
>>>>
>>>> rule != "working" and mental_state == "distressed"
>>>>
>>>> into:
>>>>
>>>> rule != "working"&&   mental_state == "distressed"
>>>>
>>>> Obviously, this snippet of grammar doesn't cover the expressions
>>>> (andExpr) on either side of the "and", but I hope it gives you a
>>>> flavour of what I'm trying to achieve.
>>>>
>>>> orExpr
>>>>        : a=andExpr (OR b+=andExpr)* ->   template(a={$a.text},
>> bf={$b})
>>>> "<a><bf; separator=\"&&   \">"
>>>>        ;
>>>>
>>>> Regards,
>>>>
>>>> Tim.
>>>>
>>>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>>>> Unsubscribe:
>>>> http://www.antlr.org/mailman/options/antlr-interest/your-
>>>> email-address
>>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>>> Unsubscribe:
>>> http://www.antlr.org/mailman/options/antlr-interest/your-email-
>> address
>>>
>>> -----
>>> No virus found in this message.
>>> Checked by AVG - www.avg.com
>>> Version: 2012.0.1834 / Virus Database: 2092/4572 - Release Date:
>>> 10/24/11
>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
>> email-address
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>
>
> -----
> No virus found in this message.
> Checked by AVG - www.avg.com
> Version: 2012.0.1834 / Virus Database: 2092/4573 - Release Date: 10/25/11

From jimi at temporal-wave.com  Tue Oct 25 13:58:15 2011
From: jimi at temporal-wave.com (Jim Idle)
Date: Tue, 25 Oct 2011 13:58:15 -0700
Subject: [antlr-interest] Multiple string template rule
In-Reply-To: <4EA71DF7.3050906@poole.co.uk>
References: <4EA6DB97.4010200@poole.co.uk>	<527b99d47d78cd28273667bf2108f093@mail.gmail.com>
	<4EA6EB26.3040302@poole.co.uk>	<470520aae895893484abb717a2bb3769@mail.gmail.com>
	<4EA71DF7.3050906@poole.co.uk>
Message-ID: <c59d0ade9c3861b27835202fefbfa9c4@mail.gmail.com>

In this rule:

unaryExpr
      :        ((PLUS|MINUS)?) valueExpr
      |        NOT valueExpr -> template(a={$valueExpr.text}) "not <a>"
      ;

Your first alt is not producing a template. It is also likely that you do
not want left associativity with unary expressions but want:

unaryExpr
      :        PLUS u=unaryExpr -> template(a={$u.text}) "+ <a>"
      :        MINUS u=unaryExpr -> template(a={$u.text}) "- <a>"
      |        NOT u=unaryExpr -> template(a={$u.text}) "not <a>"
	  | v=valueExpr  { $st = $v.st; }
      ;


So, I would double check your alts and/or post the entire grammar.

Jim

> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of Tim Poole
> Sent: Tuesday, October 25, 2011 1:37 PM
> To: antlr-interest at antlr.org
> Subject: Re: [antlr-interest] Multiple string template rule
>
> Yes, my other re-writing rules have a similar structure. This is an
> example of one that's working:
>
> unaryExpr
>      :        ((PLUS|MINUS)?) valueExpr
>      |        NOT valueExpr -> template(a={$valueExpr.text}) "not <a>"
>      ;
>
> And a conditional one:
>
> generalComp
>      :   gc=GENERAL_COMP
>      -> {($gc.text).equals("=")}? template() "=="
>      -> template(a={$gc.text}) "<a>"
>      ;
>
> On 25/10/2011 19:55, Jim Idle wrote:
> > Are all your rules either setting $st before they return or creating
> a
> > template with ->template(.... or similar? Producing the template is
> > not automatic.
> >
> > Jim
> >
> >> -----Original Message-----
> >> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> >> bounces at antlr.org] On Behalf Of Tim Poole
> >> Sent: Tuesday, October 25, 2011 10:00 AM
> >> To: antlr-interest at antlr.org
> >> Subject: Re: [antlr-interest] Multiple string template rule
> >>
> >> :$
> >>
> >> That's a bit embarrasing!
> >>
> >> OK, so I am actually trying to do a similar thing for both the OR
> >> statements and the AND statements.
> >>
> >> What I didn't explain was that the "<bf ...>" expression isn't
> >> contributing anything, so it looks like the "b+=andExpr" isn't
> >> catching anything from the token.
> >>
> >> There is an example rule including "( p+=parameterDef )*" but this
> is
> >> slightly different to my "(OR b+=andExpr)*".
> >>
> >> I suspect that I probably need something closer to "<bf:{ expr |
> \|\|
> >> <expr>  }>".
> >> I have tried something similar, but the lack of data in bf seems to
> >> be the limiting factor.
> >>
> >> I'm hoping it's possible, just that I don't understand how to do it,
> >> yet.
> >>
> >> Any thoughts gratefully received...
> >>
> >> I'm trying to convert:
> >>
> >> rule != "working" or mental_state == "distressed"
> >>
> >> into:
> >>
> >> rule != "working" || mental_state == "distressed"
> >>
> >> Obviously, this snippet of grammar doesn't cover the expressions
> >> (andExpr) on either side of the "or", but I hope it gives you a
> >> flavour of what I'm trying to achieve.
> >>
> >> orExpr
> >>        : a=andExpr (OR b+=andExpr)* ->   template(a={$a.text},
> bf={$b})
> >> "<a><bf; separator=\" || \">"
> >>        ;
> >>
> >> Regards,
> >>
> >> Tim.
> >>
> >> On 25/10/2011 17:02, Jim Idle wrote:
> >>> Probably because you are modifying the OR rule and not the AND
> rule.
> >>>
> >>> Jim
> >>>
> >>>> -----Original Message-----
> >>>> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> >>>> bounces at antlr.org] On Behalf Of Tim Poole
> >>>> Sent: Tuesday, October 25, 2011 8:54 AM
> >>>> To: antlr-interest at antlr.org
> >>>> Subject: [antlr-interest] Multiple string template rule
> >>>>
> >>>> Hi all,
> >>>>
> >>>> I'm trying to use the += in the following rule, but I'm not sure
> if
> >>>> my use of it is correct.
> >>>>
> >>>> Does anyone have any thoughts?
> >>>>
> >>>> I'm trying to convert:
> >>>>
> >>>> rule != "working" and mental_state == "distressed"
> >>>>
> >>>> into:
> >>>>
> >>>> rule != "working"&&   mental_state == "distressed"
> >>>>
> >>>> Obviously, this snippet of grammar doesn't cover the expressions
> >>>> (andExpr) on either side of the "and", but I hope it gives you a
> >>>> flavour of what I'm trying to achieve.
> >>>>
> >>>> orExpr
> >>>>        : a=andExpr (OR b+=andExpr)* ->   template(a={$a.text},
> >> bf={$b})
> >>>> "<a><bf; separator=\"&&   \">"
> >>>>        ;
> >>>>
> >>>> Regards,
> >>>>
> >>>> Tim.
> >>>>
> >>>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> >>>> Unsubscribe:
> >>>> http://www.antlr.org/mailman/options/antlr-interest/your-
> >>>> email-address
> >>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> >>> Unsubscribe:
> >>> http://www.antlr.org/mailman/options/antlr-interest/your-email-
> >> address
> >>>
> >>> -----
> >>> No virus found in this message.
> >>> Checked by AVG - www.avg.com
> >>> Version: 2012.0.1834 / Virus Database: 2092/4572 - Release Date:
> >>> 10/24/11
> >> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> >> Unsubscribe:
> >> http://www.antlr.org/mailman/options/antlr-interest/your-
> >> email-address
> > List: http://www.antlr.org/mailman/listinfo/antlr-interest
> > Unsubscribe:
> > http://www.antlr.org/mailman/options/antlr-interest/your-email-
> address
> >
> >
> > -----
> > No virus found in this message.
> > Checked by AVG - www.avg.com
> > Version: 2012.0.1834 / Virus Database: 2092/4573 - Release Date:
> > 10/25/11
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
> email-address

From tim at poole.co.uk  Tue Oct 25 14:40:46 2011
From: tim at poole.co.uk (Tim Poole)
Date: Tue, 25 Oct 2011 22:40:46 +0100
Subject: [antlr-interest] Multiple string template rule
In-Reply-To: <c59d0ade9c3861b27835202fefbfa9c4@mail.gmail.com>
References: <4EA6DB97.4010200@poole.co.uk>	<527b99d47d78cd28273667bf2108f093@mail.gmail.com>
	<4EA6EB26.3040302@poole.co.uk>	<470520aae895893484abb717a2bb3769@mail.gmail.com>
	<4EA71DF7.3050906@poole.co.uk>
	<c59d0ade9c3861b27835202fefbfa9c4@mail.gmail.com>
Message-ID: <4EA72CDE.1020100@poole.co.uk>

Thanks, will look at that tomorrow.

On 25/10/2011 21:58, Jim Idle wrote:
> In this rule:
>
> unaryExpr
>        :        ((PLUS|MINUS)?) valueExpr
>        |        NOT valueExpr ->  template(a={$valueExpr.text}) "not<a>"
>        ;
>
> Your first alt is not producing a template. It is also likely that you do
> not want left associativity with unary expressions but want:
>
> unaryExpr
>        :        PLUS u=unaryExpr ->  template(a={$u.text}) "+<a>"
>        :        MINUS u=unaryExpr ->  template(a={$u.text}) "-<a>"
>        |        NOT u=unaryExpr ->  template(a={$u.text}) "not<a>"
> 	  | v=valueExpr  { $st = $v.st; }
>        ;
>
>
> So, I would double check your alts and/or post the entire grammar.
>
> Jim
>
>> -----Original Message-----
>> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
>> bounces at antlr.org] On Behalf Of Tim Poole
>> Sent: Tuesday, October 25, 2011 1:37 PM
>> To: antlr-interest at antlr.org
>> Subject: Re: [antlr-interest] Multiple string template rule
>>
>> Yes, my other re-writing rules have a similar structure. This is an
>> example of one that's working:
>>
>> unaryExpr
>>       :        ((PLUS|MINUS)?) valueExpr
>>       |        NOT valueExpr ->  template(a={$valueExpr.text}) "not<a>"
>>       ;
>>
>> And a conditional one:
>>
>> generalComp
>>       :   gc=GENERAL_COMP
>>       ->  {($gc.text).equals("=")}? template() "=="
>>       ->  template(a={$gc.text}) "<a>"
>>       ;
>>
>> On 25/10/2011 19:55, Jim Idle wrote:
>>> Are all your rules either setting $st before they return or creating
>> a
>>> template with ->template(.... or similar? Producing the template is
>>> not automatic.
>>>
>>> Jim
>>>
>>>> -----Original Message-----
>>>> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
>>>> bounces at antlr.org] On Behalf Of Tim Poole
>>>> Sent: Tuesday, October 25, 2011 10:00 AM
>>>> To: antlr-interest at antlr.org
>>>> Subject: Re: [antlr-interest] Multiple string template rule
>>>>
>>>> :$
>>>>
>>>> That's a bit embarrasing!
>>>>
>>>> OK, so I am actually trying to do a similar thing for both the OR
>>>> statements and the AND statements.
>>>>
>>>> What I didn't explain was that the "<bf ...>" expression isn't
>>>> contributing anything, so it looks like the "b+=andExpr" isn't
>>>> catching anything from the token.
>>>>
>>>> There is an example rule including "( p+=parameterDef )*" but this
>> is
>>>> slightly different to my "(OR b+=andExpr)*".
>>>>
>>>> I suspect that I probably need something closer to "<bf:{ expr |
>> \|\|
>>>> <expr>   }>".
>>>> I have tried something similar, but the lack of data in bf seems to
>>>> be the limiting factor.
>>>>
>>>> I'm hoping it's possible, just that I don't understand how to do it,
>>>> yet.
>>>>
>>>> Any thoughts gratefully received...
>>>>
>>>> I'm trying to convert:
>>>>
>>>> rule != "working" or mental_state == "distressed"
>>>>
>>>> into:
>>>>
>>>> rule != "working" || mental_state == "distressed"
>>>>
>>>> Obviously, this snippet of grammar doesn't cover the expressions
>>>> (andExpr) on either side of the "or", but I hope it gives you a
>>>> flavour of what I'm trying to achieve.
>>>>
>>>> orExpr
>>>>         : a=andExpr (OR b+=andExpr)* ->    template(a={$a.text},
>> bf={$b})
>>>> "<a><bf; separator=\" || \">"
>>>>         ;
>>>>
>>>> Regards,
>>>>
>>>> Tim.
>>>>
>>>> On 25/10/2011 17:02, Jim Idle wrote:
>>>>> Probably because you are modifying the OR rule and not the AND
>> rule.
>>>>> Jim
>>>>>
>>>>>> -----Original Message-----
>>>>>> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
>>>>>> bounces at antlr.org] On Behalf Of Tim Poole
>>>>>> Sent: Tuesday, October 25, 2011 8:54 AM
>>>>>> To: antlr-interest at antlr.org
>>>>>> Subject: [antlr-interest] Multiple string template rule
>>>>>>
>>>>>> Hi all,
>>>>>>
>>>>>> I'm trying to use the += in the following rule, but I'm not sure
>> if
>>>>>> my use of it is correct.
>>>>>>
>>>>>> Does anyone have any thoughts?
>>>>>>
>>>>>> I'm trying to convert:
>>>>>>
>>>>>> rule != "working" and mental_state == "distressed"
>>>>>>
>>>>>> into:
>>>>>>
>>>>>> rule != "working"&&    mental_state == "distressed"
>>>>>>
>>>>>> Obviously, this snippet of grammar doesn't cover the expressions
>>>>>> (andExpr) on either side of the "and", but I hope it gives you a
>>>>>> flavour of what I'm trying to achieve.
>>>>>>
>>>>>> orExpr
>>>>>>         : a=andExpr (OR b+=andExpr)* ->    template(a={$a.text},
>>>> bf={$b})
>>>>>> "<a><bf; separator=\"&&    \">"
>>>>>>         ;
>>>>>>
>>>>>> Regards,
>>>>>>
>>>>>> Tim.
>>>>>>
>>>>>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>>>>>> Unsubscribe:
>>>>>> http://www.antlr.org/mailman/options/antlr-interest/your-
>>>>>> email-address
>>>>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>>>>> Unsubscribe:
>>>>> http://www.antlr.org/mailman/options/antlr-interest/your-email-
>>>> address
>>>>> -----
>>>>> No virus found in this message.
>>>>> Checked by AVG - www.avg.com
>>>>> Version: 2012.0.1834 / Virus Database: 2092/4572 - Release Date:
>>>>> 10/24/11
>>>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>>>> Unsubscribe:
>>>> http://www.antlr.org/mailman/options/antlr-interest/your-
>>>> email-address
>>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>>> Unsubscribe:
>>> http://www.antlr.org/mailman/options/antlr-interest/your-email-
>> address
>>>
>>> -----
>>> No virus found in this message.
>>> Checked by AVG - www.avg.com
>>> Version: 2012.0.1834 / Virus Database: 2092/4573 - Release Date:
>>> 10/25/11
>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
>> email-address
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>
>
> -----
> No virus found in this message.
> Checked by AVG - www.avg.com
> Version: 2012.0.1834 / Virus Database: 2092/4573 - Release Date: 10/25/11

From sharwell at pixelminegames.com  Tue Oct 25 14:57:56 2011
From: sharwell at pixelminegames.com (Sam Harwell)
Date: Tue, 25 Oct 2011 16:57:56 -0500
Subject: [antlr-interest] Exceptions on C#-Target
In-Reply-To: <4E5B71A7.40105@googlemail.com>
References: <4E5B71A7.40105@googlemail.com>
Message-ID: <128801cc9361$28290730$787b1590$@pixelminegames.com>

Hello,

I just ran your test, and it didn't throw any externally visible exceptions. Internally I would expect a very large number of exceptions because your lexer has no rules that match any of your input except comments, whitespace, the word CREATE, and the semicolon at the end.

Sam

-----Original Message-----
From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-bounces at antlr.org] On Behalf Of Anonym
Sent: Monday, August 29, 2011 6:02 AM
To: antlr-interest at antlr.org
Subject: [antlr-interest] Exceptions on C#-Target

i?m working with antlrworks 1.4.2
i have the following, extremly simple grammar (combined lexer and parser):
*
public sqlfile :
commands*
EOF
;

commands:
STARTWORD (options { greedy=false; } : .*) SEM
;

STARTWORD
: ('SELECT'|'INSERT'|'UPDATE'|'DELETE')
;

SEM : ';' ;

COMMENT : '/*' ( options { greedy=false; } : .*) '*/'
{
$channel = 2;
}
;

SHARP
: '#' ( options { greedy=false; } : .*) NL
{
$channel = 2;
}
;
SINGLELINECOMMENT
: '--' ( options { greedy=false; } : .*) NL
{
$channel = 2;
}
;
WS : (' '|'\t')+ { $channel = 5; } ;
NL : ('\r' '\n'? | '\n') { $channel = 5; } ;
*

i?ve debugged it in antlrworks and works fine (as expected). i used this
test-string:
*--
-- SQL to create the guestbook table
--


CREATE TABLE `guestbook` (
`id` int(11) NOT NULL auto_increment,
`TimeStamp` int(11) default '0',
`Email` varchar(60) default NULL,
`Name` varchar(100) NOT NULL default '',
`Website` varchar(60) default NULL,
`Title` varchar(255) default NULL,
`Message` text,
`Verified` smallint(1) NOT NULL default '0',
`Code` varchar(40) NOT NULL default '',
UNIQUE KEY `id` (`id`)
) TYPE=MyISAM AUTO_INCREMENT=6 ;
*

then i build against csharp3-target and used the parser in my
c#-application.
while executing the parser.sqlfile()-Method 317 Exceptions
(MissmatchToken and NoViableAlt) are thrown!
now i wonder why, because my grammar is REALLY simple and should match,
like it in the java-target did (no error in antlrworks-console).
In the C#-Output the exceptions are thrown at the line
STARTWORD1=(IToken)Match(input,STARTWORD,Follow._STARTWORD_in_commands135);
in commands()-Rule

where is my mistake?


List: http://www.antlr.org/mailman/listinfo/antlr-interest
Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address


From weissig at rbg.informatik.tu-darmstadt.de  Tue Oct 25 15:11:16 2011
From: weissig at rbg.informatik.tu-darmstadt.de (=?UTF-8?B?WXZlcyBXZWnDn2ln?=)
Date: Wed, 26 Oct 2011 00:11:16 +0200
Subject: [antlr-interest] Tree grammar, can't find the error
In-Reply-To: <e11922e974e1069c63fdcc65703293d4@mail.gmail.com>
References: <4EA6E5BD.90603@rbg.informatik.tu-darmstadt.de>
	<e11922e974e1069c63fdcc65703293d4@mail.gmail.com>
Message-ID: <4EA73404.7070108@rbg.informatik.tu-darmstadt.de>

Hi,

thanks for your hints, I now produce the dot spec with:
DOTTreeGenerator gen = new DOTTreeGenerator();
StringTemplate st = gen.toDOT(t);
System.out.println(st);
The tree pretty much assembles what I thought when I run it through dot.
Small examples work for me, I worked through them.
A rule like this:
(1) prog      : ^('PROG' v='WSN') -> emit(v={$v}) ;
would match a node WSN being a child of PROG, or?
(2) prog      : ^('PROG' v='WSN' x+=.*) -> emit(v={$v}, x={$x}) ;
then this would match a node WSN and other nodes being children of PROG?
(3) prog      : ^('PROG' x+=.*) -> emit(x={$x}) ;
and this would match all children of PROG?
Only (3) works for me, although WSN is a child of PROG, the output of
(3), something like 'WSN GROUP WSN GROUP ...' and the dot spec assure me...

Yves

Am 25.10.2011 20:54, schrieb Jim Idle:
> You are just typing the tree syntax like a parser syntax and that will not
> work. Walk the tree and produce the dot spec, produce the .png
> representation and you will see the point. This is all recursive...
> 
> Think of how an expression tree is written:
> 
> expr : ^(PLUS expr expr)
> 	| ^(MINUS expr expr)
> 	| NUMBER
> 	;
> 
> You might need to start with the simple examples before trying to detangle
> the parser that you have, but definitely start looking at the tree
> graphically.
> 
> Jim
> 
>> -----Original Message-----
>> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
>> bounces at antlr.org] On Behalf Of Yves Wei?ig
>> Sent: Tuesday, October 25, 2011 9:37 AM
>> To: antlr-interest at antlr.org
>> Subject: [antlr-interest] Tree grammar, can't find the error
>>
>> Hi list,
>>
>> I trying to write a tree grammar for this tree:
>>
>> (PROG (WSN   ) (GROUP (COMMAND pard) ) ... )
>>
>> So, a PROG node is parent of multiple WSN, GROUP, etc. nodes.
>>
>> My rules look like:
>> prog      : ^('PROG' (v+=space | v+=group)+) -> emit(v={$v}) ;
>> space     : ^('WSN' v=.*) -> emit(v={$v}) |
>>             ^('TABN' v=.*) -> emit(v={$v}) |
>>             ^('NEWLINEN' v=.*) -> emit(v={$v}) ;
>> group     : ^('GROUP' v+=space*
>>               (v+=group v+=space* |
>>               v+=plaintext v+=space* |
>>               (v+=command | v+=escape)
>>               (v+=delimiter v+=space+ | v+=delimiter | ))+) ->
>> grp(v={$v}) ; ...
>>
>> This throws "can't look backwards more than one token in this stream",
>> so I assume I have an error in my tree grammar... I just managed to
>> write:
>>
>> prog      : ^('PROG' v+=.*) -> emit(v={$v}) ;
>>
>> which gives me:
>>
>> WSNGROUP
>>
>> But I want to output the subtrees, so I need the first approach. Can
>> anybody tell me what I'm doing wrong?
>>
>> Best regards, Yves
>>
>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
>> email-address
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address

From weissig at rbg.informatik.tu-darmstadt.de  Tue Oct 25 15:14:55 2011
From: weissig at rbg.informatik.tu-darmstadt.de (=?UTF-8?B?WXZlcyBXZWnDn2ln?=)
Date: Wed, 26 Oct 2011 00:14:55 +0200
Subject: [antlr-interest] Compiling C runtime & linking
In-Reply-To: <a4f5640cad8ab0939d5a79a79b19e74b@mail.gmail.com>
References: <4EA53F49.6030205@rbg.informatik.tu-darmstadt.de>	<4EA58055.9090706@rbg.informatik.tu-darmstadt.de>	<b19e8710477fae984be93d5cf5b099b5@mail.gmail.com>	<4EA59320.2040309@rbg.informatik.tu-darmstadt.de>	<4EA6E397.3040001@rbg.informatik.tu-darmstadt.de>
	<a4f5640cad8ab0939d5a79a79b19e74b@mail.gmail.com>
Message-ID: <4EA734DF.6090703@rbg.informatik.tu-darmstadt.de>

output = AST;

Java forgives me this error...

I will look at that tomorrow and will try to change the rules according
to your suggestion. Thanks!

Yves

Am 25.10.2011 20:50, schrieb Jim Idle:
> You cannot add different return types to 'children' like that. put the alts
> in a subrule in the same order and accumulate the subrule. What is your
> output= option?
> 
> Jim
> 
>> -----Original Message-----
>> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
>> bounces at antlr.org] On Behalf Of Yves Wei?ig
>> Sent: Tuesday, October 25, 2011 9:28 AM
>> To: antlr-interest at antlr.org
>> Subject: Re: [antlr-interest] Compiling C runtime & linking
>>
>> Hi,
>> does anybody have an answer to this?
>> The structs do not match. I think this results from my rule:
>> group		:	(OPEN
>> 				children+=space*
>> 				(
>> 				children+=group children+=space* |
>> 				children+=plaintext children+=space* |
>> 				(children+=command | children+=escape)
>> 				(children+=delimiter children+=space+ |
>> children+=delimiter | )
>> 				)+
>> 			CLOSE) -> ^(GROUP $children*) ;
>> Do you have a workaround?
>> Best regards, Yves
>>
>> Am 24.10.2011 18:32, schrieb Yves Wei?ig:
>>> I attached the generated code...
>>> static RtfParser_group_return
>>> group(pRtfParser ctx)
>>> begins at line 2015.
>>> first error is thrown at line 2113.
>>> maybe my rule is wrong? but output to java works fine.
>>> best regards, yves
>>>
>>> Am 24.10.2011 17:16, schrieb Jim Idle:
>>>> To link statically you need to reference the .a version of the
>>>> library I think. I don't know what your other errors are as I can?t
>>>> see your source code.
>>>>
>>>>
>>>> Jim
>>>>
>>>>> -----Original Message-----
>>>>> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
>>>>> bounces at antlr.org] On Behalf Of Yves Wei?ig
>>>>> Sent: Monday, October 24, 2011 8:12 AM
>>>>> Cc: antlr-interest at antlr.org
>>>>> Subject: Re: [antlr-interest] Compiling C runtime & linking
>>>>>
>>>>> Hi again,
>>>>> this seems to be a problem with Windows (still the same error), but
>>>>> I tried the same under Linux and everything went fine. Compiled
>> with
>>>>> ./configure, then make & make install. After that:
>>>>>
>>>>> g++ -I/usr/local/include -shared -oRtfToolkit.lib -static
>>>>> -L/usr/local/lib -lantlr3c RtfLexer.c RtfParser.c
>>>>>
>>>>> Without Parser it works fine, with Parser it throws several:
>>>>>
>>>>> RtfParser.c: In function ?RtfParser_group_return
>>>>> group(RtfParser_Ctx_struct*)?:
>>>>> RtfParser.c:2113: error: no match for ?operator=? in ?children =
>>>>> space(ctx)?
>>>>> RtfParser.h:198: note: candidates are:
>>>>> RtfParser_delimiter_return_struct&
>>>>> RtfParser_delimiter_return_struct::operator=(const
>>>>> RtfParser_delimiter_return_struct&)
>>>>>
>>>>> I don't know what that means...
>>>>>
>>>>> The grammar rule looks like:
>>>>>
>>>>> group		:	(OPEN
>>>>> 				children+=space*
>>>>> 				(
>>>>> 				children+=group children+=space* |
>>>>> 				children+=plaintext children+=space* |
>>>>> 				(children+=command | children+=escape)
>>>>> 				(children+=delimiter children+=space+ |
>>>>> children+=delimiter | )
>>>>> 				)+
>>>>> 			CLOSE) -> ^(GROUP $children*) ;
>>>>>
>>>>> And one final question, how can I link the ANTLR runtime
>> statically...
>>>>> the above statement (without compiling the Parser) generates a
>> small
>>>>> lib of 16kb, so the ANTLR runtime is not linked static, or am I
>>>>> missing a point here?
>>>>>
>>>>> Best regards, Yves
>>>>>
>>>>> Am 24.10.2011 12:34, schrieb Yves Wei?ig:
>>>>>> Hi list,
>>>>>> I successfully compiled the C runtime for ANTLR with VS 2010.
>>>>>> Now I want to compile the generated code (Lexer and Parser) with
>>>>>> this
>>>>>> command:
>>>>>> g++ -Iantlrinclude -static -L. -lantlr3c RtfLexer.c RtfParser.c
>>>>>> as you may notice, antlr.h and all includefiles are in
>> antlrinclude
>>>>>> and the antlr3c.lib (copied from the Release dir of VS solution)
>>>>>> lies in the current working dir. I would like to include the
>>>>>> runtime statically ("-static").
>>>>>> But it throws:
>>>>>>
>> C:\Users\Yves\AppData\Local\Temp/ccctgQP2.o:RtfLexer.c:(.text+0xb9):
>>>>>> undefined reference to `antlr3LexerNewStream'
>>>>>> which makes me believe the library is not correctly linked... what
>>>>>> is wrong here?
>>>>>> Best regards, Yves
>>>>>>
>>>>>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>>>>>> Unsubscribe:
>>>>>> http://www.antlr.org/mailman/options/antlr-interest/your-email-
>>>>> address
>>>>>
>>>>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>>>>> Unsubscribe:
>>>>> http://www.antlr.org/mailman/options/antlr-interest/your-
>>>>> email-address
>>>>
>>>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>>>> Unsubscribe:
>>>> http://www.antlr.org/mailman/options/antlr-interest/your-email-
>> addres
>>>> s
>>>>
>>>>
>>>>
>>>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>>>> Unsubscribe:
>>>> http://www.antlr.org/mailman/options/antlr-interest/your-email-
>> addres
>>>> s
>>
>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
>> email-address
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address

From andy.voelkel at plantronics.com  Tue Oct 25 15:54:55 2011
From: andy.voelkel at plantronics.com (Voelkel, Andy)
Date: Tue, 25 Oct 2011 22:54:55 +0000
Subject: [antlr-interest] Can StringTemplate do this? and Is StringTemplate
	different for C#?
Message-ID: <92E9AB4D42199B4793CE24E094BAEE070E638F@USSCMB03.plt.plantronics.com>

Hi,



I'm just getting started with StringTemplate after starting to climb the steep Antlr learning curve. I've done a quick look over of the documentation, not enough to really understand it in depth, but I'm wondering if it will do something that I've done before. I want to print out end of line C++ style comments (// this kind) for generated code for C structure definitions, one comment for each structure member. I want the start of the comments to all to align vertically for readability. This means that they have to be in a column far enough over not to collide with end of the variable names. But I don't want to put them over farther than necessary. So what I've done in the past is format all the variable name strings in a structure and put them aside, then calculate the length of the longest formatted string, and then use that to determine the column for the start of the comments. This is done separately for each structure, which gives a good compromise between readability and line length. You can extend the idea past C structure definitions, but you get the idea.



Can I do this with StringTemplates?



While I'm at, I might as well ask - does StringTemplate differ as much from java based platforms to C# based platforms as Antlr does?



Thanks for any help!



-          Andy

________________________________

CONFIDENTIALITY NOTICE: This e-mail transmission, and any documents, files or previous e-mail messages attached to it, may contain information that is confidential and/or legally privileged. If you are not the intended recipient, or a person responsible for delivering it to the intended recipient, please DO NOT disclose the contents to another person, store or copy the information in any medium, or use any of the information contained in or attached to this transmission for any purpose. If you have received this transmission in error, please immediately notify the sender by reply email or at privacy at plantronics.com, and destroy the original transmission and its attachments without reading or saving in any manner.

For further information about Plantronics - the Company, its products, brands, partners, please visit our website www.plantronics.com.

From chwchw at gmx.de  Wed Oct 26 03:29:13 2011
From: chwchw at gmx.de (Christian)
Date: Wed, 26 Oct 2011 12:29:13 +0200
Subject: [antlr-interest] Rewrite only if rule returns non-empty result
Message-ID: <4EA7E0F9.7000802@gmx.de>

Hi community,

I have the following rule:

unary_expression
  : unary_expr -> ^(UNARY_EXPRESSION unary_expr)
  ;

I want to rewrite it only if unary_expr returns a non-empty result.
Actually, I want to solve the
org.antlr.runtime.tree.RewriteEmptyStreamException: rule unary_expr. I
think, it is quite easy, but I am too new to ANTLR.

Regards,
Christian

From kierans777 at gmail.com  Wed Oct 26 03:33:53 2011
From: kierans777 at gmail.com (Kieran Simpson)
Date: Wed, 26 Oct 2011 21:33:53 +1100
Subject: [antlr-interest] Gunit 3.4 incorrectly failing test due to bug
Message-ID: <4EA7E211.2010705@gmail.com>

I'm starting to write my grammar so am setting up the build/tests.  I'm 
fetching gunit-3.4 via Apache Ivy, and am using the tools ability to 
generate JUnit classes so that our reporting tools can run over the results.

My grammar consists of:

grammar CoreConfiguration;

SCOPE_BEGIN: '{';
SCOPE_END: '}';

WS: ( ' ' | '\t' | '\r' | '\n') {$channel=HIDDEN;};

configuration
   : SCOPE_BEGIN SCOPE_END;

My Gunit test case is:

gunit CoreConfiguration;

//------------------- configuration
configuration:

"{ }" OK

"{ ]" FAIL

I translate the gunit file to JUnit using the -o switch of the 
org.antlr.gunit.Interp class and compile the code.  Upon running the 
test I get the following output:

     [junit] testing rule configuration expected:<OK> but was:<FAIL, >
     [junit] junit.framework.AssertionFailedError: testing rule 
configuration expected:<OK> but was:<FAIL, >

Looking through the gunit source, I've tracked the problem to the 
gUnitBaseTest::examineExecResult() method on line 467.  It's checking 
whether the member variable 'stderr' is null and if not returns the 
concatenation of "FAIL" and the contents ie:

return "FAIL, "+this.stderr;

However it appears that this.stderr is being set to empty on line 242, 
so my test(s) will always fail.  This is a bug.

Cheers,

From chwchw at gmx.de  Wed Oct 26 03:43:55 2011
From: chwchw at gmx.de (Christian)
Date: Wed, 26 Oct 2011 12:43:55 +0200
Subject: [antlr-interest] Several different tokens for the same literal
Message-ID: <4EA7E46B.2010206@gmx.de>

Hi community,

I want to use, e.g., the MINUS and the POSITIVE token for the '-'
literal. Is there a way to write it shorter than with rewrite rules?

For example, I want to replace the following
    '-' unary_expression -> ^(NEGATIVE unary_expression);
by
    '-'<NEGATIVE> unary_expression;
or
    NEGATIVE['-'] unary_expression;

I know that and why the last two aproaches do not work. But perhaps
there is another way that I do not know so far.

Regards,
Christian

From roscoml at gmail.com  Wed Oct 26 15:36:55 2011
From: roscoml at gmail.com (Ross Bamford)
Date: Wed, 26 Oct 2011 23:36:55 +0100
Subject: [antlr-interest] Ambiguity between floating point literal and
	method call
Message-ID: <CAMtjaCCzb4LjWpZUCCECogFarEbvaUgt40AkbRwDrThX59epoQ@mail.gmail.com>

Hi all,

Have posted here recently, and thanks again for all your help in getting my
various problems fixed. I'm implementing a basic scripting language for use
in embedded systems, and I've come across another problem that, after much
googling and tinkering I still can seem to fix. In this language, numbers
are first-class objects, and I need to be able to call methods on them, in
the standard way, e.g. 1.foo() . However, I'm coming up against a problem
whereby the parser can't distinguish between this and floating point
literals. I've tried various combinations of predicates and the like, but
just don't seem to be able to get it working. Any help would be much
appreciated!

Thanks in advance,
Ross Bamford

/* ** GRAMMAR FOLLOWS ** */
grammar BasicLang;

options {
    output=AST;
    ASTLabelType=CommonTree;
    backtrack=true;
    memoize=true;
}

tokens {
  ASSIGN;
  METHOD_CALL;
  ARGS;
  BLOCK;
  ORBLOCK;
  SELF;
  ASSIGN_RECEIVER;
  ASSIGN_LOCAL;
  FIELD_ACCESS;
  LVALUE;
}

start_rule
  :   script
  ;

script
  :   statement+
  |   EOF!
  ;

statement
  :   expr terminator!
  ;

expr
  :   assign_expr
  |   math_expr
  ;

assign_expr
@init {boolean explicitReceiver=false;}
  :   (rec=IDENTIFIER DOT {explicitReceiver=true;})? id=IDENTIFIER ASSIGN
expr -> {explicitReceiver}? ^(ASSIGN ASSIGN_RECEIVER[$rec.getText()]
LVALUE[$id.getText()] expr) -> ^(ASSIGN ASSIGN_LOCAL LVALUE[$id.getText()]
expr)
  ;

math_expr
  :   mult_expr ((ADD^|SUB^) mult_expr)*
  ;

mult_expr
  :   pow_expr ((MUL^|DIV^|MOD^) pow_expr)*
  ;

pow_expr
  :   unary_expr ((POW^) unary_expr)*
  ;

unary_expr
  :   NOT? atom
  ;

meth_call
@init {boolean explicitReceiver=false;}
  :   (IDENTIFIER DOT {explicitReceiver=true;})? func_call_expr ->
{explicitReceiver}? ^(METHOD_CALL IDENTIFIER func_call_expr) ->
^(METHOD_CALL SELF func_call_expr)
  |   literal DOT func_call_expr -> ^(METHOD_CALL literal func_call_expr)
  ;

fragment
func_call_expr
  :   IDENTIFIER^ argument_list block? orblock?
  ;

fragment
block
  :   LCURLY TERMINATOR? statement* RCURLY -> ^(BLOCK statement*)
  ;

fragment
orblock
  :   OR LCURLY TERMINATOR? statement* RCURLY -> ^(ORBLOCK statement*)
  ;

fragment
argument_list
  :   LPAREN (expr (COMMA expr)*)? RPAREN -> ^(ARGS expr expr*)?
  ;

class_identifier
  :     rec=IDENTIFIER DOT id=IDENTIFIER -> ^(FIELD_ACCESS $rec $id)
  ;

literal
  :     DECIMAL_LITERAL
  |     OCTAL_LITERAL
  |     HEX_LITERAL
  |     FLOATING_POINT_LITERAL
  |     STRING_LITERAL
  |     CHARACTER_LITERAL
  ;

atom
  :     literal
  |     meth_call
  |     IDENTIFIER
  |     class_identifier
  |     LPAREN! expr RPAREN!
  ;

terminator
  :     TERMINATOR
  |     EOF
  ;

OR  :   'or';

POW :   '^' ;
MOD :   '%' ;
ADD :   '+' ;
SUB :   '-' ;
DIV :   '/' ;
MUL :   '*' ;
NOT :   '!' ;

ASSIGN
    :   '='
    ;

LPAREN
    :   '('
    ;

RPAREN
    :   ')'
    ;

LCURLY
    :   '{'
    ;

RCURLY
    :   '}'
    ;

COMMA
    :   ','
    ;

DOT :   '.' ;

IDENTIFIER
  : ID_LETTER (ID_LETTER|'0'..'9')*
  ;

fragment
ID_LETTER
  : '$'
  | 'A'..'Z'
  | 'a'..'z'
  | '_'
  ;

CHARACTER_LITERAL
    :   '\'' ( EscapeSequence | ~('\''|'\\') ) '\''
    ;

STRING_LITERAL
    :  '"' ( EscapeSequence | ~('\\'|'"') )* '"'
    ;

HEX_LITERAL : '0' ('x'|'X') HexDigit+ IntegerTypeSuffix? ;

DECIMAL_LITERAL : ('0' | '1'..'9' '0'..'9'*) IntegerTypeSuffix? ;

OCTAL_LITERAL : '0' ('0'..'7')+ IntegerTypeSuffix? ;

fragment
HexDigit : ('0'..'9'|'a'..'f'|'A'..'F') ;

fragment
IntegerTypeSuffix
  : ('l'|'L')
  | ('u'|'U')  ('l'|'L')?
  ;

FLOATING_POINT_LITERAL
    :   ('0'..'9')+ '.' ('0'..'9')* Exponent? FloatTypeSuffix?
    |   '.' ('0'..'9')+ Exponent? FloatTypeSuffix?
    |   ('0'..'9')+ Exponent? FloatTypeSuffix?
  ;

fragment
Exponent : ('e'|'E') ('+'|'-')? ('0'..'9')+ ;

fragment
FloatTypeSuffix : ('f'|'F'|'d'|'D') ;

fragment
EscapeSequence
    :   '\\' ('b'|'t'|'n'|'f'|'r'|'\"'|'\''|'\\'|'/')
    |   OctalEscape
    |   UnicodeEscape
    ;

fragment
OctalEscape
    :   '\\' ('0'..'3') ('0'..'7') ('0'..'7')
    |   '\\' ('0'..'7') ('0'..'7')
    |   '\\' ('0'..'7')
    ;

fragment
UnicodeEscape
    :   '\\' 'u' HexDigit HexDigit HexDigit HexDigit
    ;
COMMENT
    :   '/*' ( options {greedy=false;} : . )* '*/' {$channel=HIDDEN;}
    ;

LINE_COMMENT
    : '//' ~('\n'|'\r')* '\r'? '\n' {$channel=HIDDEN;}
    ;

TERMINATOR
  : '\r'? '\n'
  | ';'
  ;

WS  :  (' '|'\r'|'\t'|'\u000C') {$channel=HIDDEN;}
    |  '...' '\r'? '\n'  {$channel=HIDDEN;}
    ;

From jimi at temporal-wave.com  Wed Oct 26 16:02:00 2011
From: jimi at temporal-wave.com (Jim Idle)
Date: Wed, 26 Oct 2011 16:02:00 -0700
Subject: [antlr-interest] Ambiguity between floating point literal and
 method call
In-Reply-To: <CAMtjaCCzb4LjWpZUCCECogFarEbvaUgt40AkbRwDrThX59epoQ@mail.gmail.com>
References: <CAMtjaCCzb4LjWpZUCCECogFarEbvaUgt40AkbRwDrThX59epoQ@mail.gmail.com>
Message-ID: <b1178be1c52c87b171d94a52d99f72d7@mail.gmail.com>

Please see the FAQ:

http://www.antlr.org/wiki/display/ANTLR3/Lexer+grammar+for+floating+point%
2C+dot%2C+range%2C+time+specs

Which you can modify for your purpose, then you can add INTEGER DOT ID in
your parser. If you were to download the source code for the JavaFX
compiler, you will see that it supports that exact syntax.


Jim

> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of Ross Bamford
> Sent: Wednesday, October 26, 2011 3:37 PM
> To: antlr-interest at antlr.org
> Subject: [antlr-interest] Ambiguity between floating point literal and
> method call
>
> Hi all,
>
> Have posted here recently, and thanks again for all your help in
> getting my various problems fixed. I'm implementing a basic scripting
> language for use in embedded systems, and I've come across another
> problem that, after much googling and tinkering I still can seem to
> fix. In this language, numbers are first-class objects, and I need to
> be able to call methods on them, in the standard way, e.g. 1.foo() .
> However, I'm coming up against a problem whereby the parser can't
> distinguish between this and floating point literals. I've tried
> various combinations of predicates and the like, but just don't seem to
> be able to get it working. Any help would be much appreciated!
>
> Thanks in advance,
> Ross Bamford
>
> /* ** GRAMMAR FOLLOWS ** */
> grammar BasicLang;
>
> options {
>     output=AST;
>     ASTLabelType=CommonTree;
>     backtrack=true;
>     memoize=true;
> }
>
> tokens {
>   ASSIGN;
>   METHOD_CALL;
>   ARGS;
>   BLOCK;
>   ORBLOCK;
>   SELF;
>   ASSIGN_RECEIVER;
>   ASSIGN_LOCAL;
>   FIELD_ACCESS;
>   LVALUE;
> }
>
> start_rule
>   :   script
>   ;
>
> script
>   :   statement+
>   |   EOF!
>   ;
>
> statement
>   :   expr terminator!
>   ;
>
> expr
>   :   assign_expr
>   |   math_expr
>   ;
>
> assign_expr
> @init {boolean explicitReceiver=false;}
>   :   (rec=IDENTIFIER DOT {explicitReceiver=true;})? id=IDENTIFIER
> ASSIGN
> expr -> {explicitReceiver}? ^(ASSIGN ASSIGN_RECEIVER[$rec.getText()]
> LVALUE[$id.getText()] expr) -> ^(ASSIGN ASSIGN_LOCAL
> LVALUE[$id.getText()]
> expr)
>   ;
>
> math_expr
>   :   mult_expr ((ADD^|SUB^) mult_expr)*
>   ;
>
> mult_expr
>   :   pow_expr ((MUL^|DIV^|MOD^) pow_expr)*
>   ;
>
> pow_expr
>   :   unary_expr ((POW^) unary_expr)*
>   ;
>
> unary_expr
>   :   NOT? atom
>   ;
>
> meth_call
> @init {boolean explicitReceiver=false;}
>   :   (IDENTIFIER DOT {explicitReceiver=true;})? func_call_expr ->
> {explicitReceiver}? ^(METHOD_CALL IDENTIFIER func_call_expr) ->
> ^(METHOD_CALL SELF func_call_expr)
>   |   literal DOT func_call_expr -> ^(METHOD_CALL literal
> func_call_expr)
>   ;
>
> fragment
> func_call_expr
>   :   IDENTIFIER^ argument_list block? orblock?
>   ;
>
> fragment
> block
>   :   LCURLY TERMINATOR? statement* RCURLY -> ^(BLOCK statement*)
>   ;
>
> fragment
> orblock
>   :   OR LCURLY TERMINATOR? statement* RCURLY -> ^(ORBLOCK statement*)
>   ;
>
> fragment
> argument_list
>   :   LPAREN (expr (COMMA expr)*)? RPAREN -> ^(ARGS expr expr*)?
>   ;
>
> class_identifier
>   :     rec=IDENTIFIER DOT id=IDENTIFIER -> ^(FIELD_ACCESS $rec $id)
>   ;
>
> literal
>   :     DECIMAL_LITERAL
>   |     OCTAL_LITERAL
>   |     HEX_LITERAL
>   |     FLOATING_POINT_LITERAL
>   |     STRING_LITERAL
>   |     CHARACTER_LITERAL
>   ;
>
> atom
>   :     literal
>   |     meth_call
>   |     IDENTIFIER
>   |     class_identifier
>   |     LPAREN! expr RPAREN!
>   ;
>
> terminator
>   :     TERMINATOR
>   |     EOF
>   ;
>
> OR  :   'or';
>
> POW :   '^' ;
> MOD :   '%' ;
> ADD :   '+' ;
> SUB :   '-' ;
> DIV :   '/' ;
> MUL :   '*' ;
> NOT :   '!' ;
>
> ASSIGN
>     :   '='
>     ;
>
> LPAREN
>     :   '('
>     ;
>
> RPAREN
>     :   ')'
>     ;
>
> LCURLY
>     :   '{'
>     ;
>
> RCURLY
>     :   '}'
>     ;
>
> COMMA
>     :   ','
>     ;
>
> DOT :   '.' ;
>
> IDENTIFIER
>   : ID_LETTER (ID_LETTER|'0'..'9')*
>   ;
>
> fragment
> ID_LETTER
>   : '$'
>   | 'A'..'Z'
>   | 'a'..'z'
>   | '_'
>   ;
>
> CHARACTER_LITERAL
>     :   '\'' ( EscapeSequence | ~('\''|'\\') ) '\''
>     ;
>
> STRING_LITERAL
>     :  '"' ( EscapeSequence | ~('\\'|'"') )* '"'
>     ;
>
> HEX_LITERAL : '0' ('x'|'X') HexDigit+ IntegerTypeSuffix? ;
>
> DECIMAL_LITERAL : ('0' | '1'..'9' '0'..'9'*) IntegerTypeSuffix? ;
>
> OCTAL_LITERAL : '0' ('0'..'7')+ IntegerTypeSuffix? ;
>
> fragment
> HexDigit : ('0'..'9'|'a'..'f'|'A'..'F') ;
>
> fragment
> IntegerTypeSuffix
>   : ('l'|'L')
>   | ('u'|'U')  ('l'|'L')?
>   ;
>
> FLOATING_POINT_LITERAL
>     :   ('0'..'9')+ '.' ('0'..'9')* Exponent? FloatTypeSuffix?
>     |   '.' ('0'..'9')+ Exponent? FloatTypeSuffix?
>     |   ('0'..'9')+ Exponent? FloatTypeSuffix?
>   ;
>
> fragment
> Exponent : ('e'|'E') ('+'|'-')? ('0'..'9')+ ;
>
> fragment
> FloatTypeSuffix : ('f'|'F'|'d'|'D') ;
>
> fragment
> EscapeSequence
>     :   '\\' ('b'|'t'|'n'|'f'|'r'|'\"'|'\''|'\\'|'/')
>     |   OctalEscape
>     |   UnicodeEscape
>     ;
>
> fragment
> OctalEscape
>     :   '\\' ('0'..'3') ('0'..'7') ('0'..'7')
>     |   '\\' ('0'..'7') ('0'..'7')
>     |   '\\' ('0'..'7')
>     ;
>
> fragment
> UnicodeEscape
>     :   '\\' 'u' HexDigit HexDigit HexDigit HexDigit
>     ;
> COMMENT
>     :   '/*' ( options {greedy=false;} : . )* '*/' {$channel=HIDDEN;}
>     ;
>
> LINE_COMMENT
>     : '//' ~('\n'|'\r')* '\r'? '\n' {$channel=HIDDEN;}
>     ;
>
> TERMINATOR
>   : '\r'? '\n'
>   | ';'
>   ;
>
> WS  :  (' '|'\r'|'\t'|'\u000C') {$channel=HIDDEN;}
>     |  '...' '\r'? '\n'  {$channel=HIDDEN;}
>     ;
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
> email-address

From chwchw at gmx.de  Thu Oct 27 05:04:11 2011
From: chwchw at gmx.de (Christian)
Date: Thu, 27 Oct 2011 14:04:11 +0200
Subject: [antlr-interest] Several different tokens for the same literal
In-Reply-To: <4EA7E46B.2010206@gmx.de>
References: <4EA7E46B.2010206@gmx.de>
Message-ID: <4EA948BB.5060807@gmx.de>

Does nobody know a solution other than the one with rewrite rules?

Am 26.10.2011 12:43, schrieb Christian:
> Hi community,
>
> I want to use, e.g., the MINUS and the POSITIVE token for the '-'
> literal. Is there a way to write it shorter than with rewrite rules?
>
> For example, I want to replace the following
>     '-' unary_expression -> ^(NEGATIVE unary_expression);
> by
>     '-'<NEGATIVE> unary_expression;
> or
>     NEGATIVE['-'] unary_expression;
>
> I know that and why the last two aproaches do not work. But perhaps
> there is another way that I do not know so far.
>
> Regards,
> Christian
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>


From chwchw at gmx.de  Thu Oct 27 05:12:45 2011
From: chwchw at gmx.de (Christian)
Date: Thu, 27 Oct 2011 14:12:45 +0200
Subject: [antlr-interest] Rewrite only if rule returns non-empty result
In-Reply-To: <4EA7E0F9.7000802@gmx.de>
References: <4EA7E0F9.7000802@gmx.de>
Message-ID: <4EA94ABD.80907@gmx.de>

Perhaps, you need more information about unary_expr:

unary_expr
  : cast_expression
  | '+' unary_expression -> ^(POSITIVE unary_expression)
  | '-' unary_expression -> ^(NEGATIVE unary_expression)
  | '!' unary_expression
  | '~' unary_expression
  | PRE_INC unary_expression
  | pre_decrement_expression
  | primary_or_array_creation_expression '++'? '--'?
  | pointer_indirection_expression
  | addressof_expression
  ;

Am 26.10.2011 12:29, schrieb Christian:
> Hi community,
>
> I have the following rule:
>
> unary_expression
>   : unary_expr -> ^(UNARY_EXPRESSION unary_expr)
>   ;
>
> I want to rewrite it only if unary_expr returns a non-empty result.
> Actually, I want to solve the
> org.antlr.runtime.tree.RewriteEmptyStreamException: rule unary_expr. I
> think, it is quite easy, but I am too new to ANTLR.
>
> Regards,
> Christian
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>


From Stefan.Maetje at esd-electronics.com  Thu Oct 27 08:16:19 2011
From: Stefan.Maetje at esd-electronics.com (Stefan =?iso-8859-1?b?TeR0amU=?= (d))
Date: Thu, 27 Oct 2011 17:16:19 +0200
Subject: [antlr-interest] Looking for some simplifications in a tree grammar
 using StringTemplate output
Message-ID: <1319728579.2439.0@pc-stefanm>

Hi all,

I'm building a language to language translator with C++ as target language.  
I've built a
preliminary version of the language description and I try to produce some  
output using
StringTemplate. It works so far but I'm looking for some simplifications of my  
output
rules.

The first rule of interest is my "expr" rule that should build expressions. It  
looks like
this:

expr
     :(  ^(op=OP_EQ l=expr r=expr)
     |   ^(op=OP_NE l=expr r=expr)
     |   ^(OP_LT l=expr r=expr)
     |   ^(OP_GT l=expr r=expr)
     |   ^(OP_PLUS l=expr r=expr)
     |   ^(OP_MINUS l=expr r=expr)
     |   ^(OP_MUL l=expr r=expr)
     |   ^(OP_DIV l=expr r=expr)
     |   ^(OP_IDIV l=expr r=expr)
         )           -> dyadExpr(op={$$$$},left={$l.st},right={$r.st})
     |   ID          -> template(id={$ID.text}) "<id>"
     |   literal     -> dumpSt(stVal={$literal.st})
     ;

All the OP_* nodes could be handled by one template "dyadExpr" with the  
parameters "op",
"left" and "right". But I need a way to specify the needed operator. Putting  
"$op.type"
in the above rule at the point where "$$$$" is yield the lexer token number.  
Any ideas
how to connect the token number with the appropriate operator string? The maps  
in the
StringTemplate Group only support mapping strings to strings.


The second problem is that some rules simply need to deliver the output of  
another rule.
I solved this by introducing a helper template "dumpSt" that simply delivers  
the given
input. The helper template is defined in the *.stg file as follows:

// Simply dump the value of another string template call
dumpSt(stValue)    ::= "<stVal>"

An example of the rules that refer to this helper template is following:

/** Declarations allowed on MODULE level */
mod_dcl
     :   var_dcl    -> dumpSt(stVal={$var_dcl.st})
     |   func_dcl   -> dumpSt(stVal={$func_dcl.st})
     |   proc_dcl   -> dumpSt(stVal={$proc_dcl.st})
     ;

var_dcl:
     ^(VAR_DCL basicType (i+=ID)+)
     -> var_dcl(type={$basicType.st}, names={$i})
     ;

basicType
     :   'FIXED' -> dumpSt(stVal={"int16_t"})
     |   'FLOAT' -> dumpSt(stVal={"float"})
     ;

Could I get rid of the "dumpSt" template in "mod_dcl" rule and write that more  
directly.
In the "basicType" rule is it possible to get the "int16_t" down into the  
*.stg file?

Any hints appreciated. Thanks.

Best regards,
	Stefan M?tje

From jimi at temporal-wave.com  Thu Oct 27 08:27:18 2011
From: jimi at temporal-wave.com (Jim Idle)
Date: Thu, 27 Oct 2011 08:27:18 -0700
Subject: [antlr-interest] Looking for some simplifications in a tree
 grammar using StringTemplate output
In-Reply-To: <1319728579.2439.0@pc-stefanm>
References: <1319728579.2439.0@pc-stefanm>
Message-ID: <e409dc5efd3c990722d31ddf4641eae1@mail.gmail.com>

If you need the token text, then $op.getText() should do that, though you
might need $op.start.getText() for some instances.

For passing up unchanged templates:


xxxx:  l=rule {$st = $l.st;};


And you are probably doing something wrong if you are trying to map token
numbers in to the operator string as the operator string is the text of
the token so you should pass in that, and not the token number.

Rather than using a dumpTxt template, you can just return a string from
the rule, but it does not make much difference in the end unless you have
so many that you can measure the performance difference. You can also use
->template(  directly.


Jim

> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of Stefan M?tje (d)
> Sent: Thursday, October 27, 2011 8:16 AM
> To: antlr-interest
> Subject: [antlr-interest] Looking for some simplifications in a tree
> grammar using StringTemplate output
>
> Hi all,
>
> I'm building a language to language translator with C++ as target
> language.
> I've built a
> preliminary version of the language description and I try to produce
> some output using StringTemplate. It works so far but I'm looking for
> some simplifications of my output rules.
>
> The first rule of interest is my "expr" rule that should build
> expressions. It looks like
> this:
>
> expr
>      :(  ^(op=OP_EQ l=expr r=expr)
>      |   ^(op=OP_NE l=expr r=expr)
>      |   ^(OP_LT l=expr r=expr)
>      |   ^(OP_GT l=expr r=expr)
>      |   ^(OP_PLUS l=expr r=expr)
>      |   ^(OP_MINUS l=expr r=expr)
>      |   ^(OP_MUL l=expr r=expr)
>      |   ^(OP_DIV l=expr r=expr)
>      |   ^(OP_IDIV l=expr r=expr)
>          )           -> dyadExpr(op={$$$$},left={$l.st},right={$r.st})
>      |   ID          -> template(id={$ID.text}) "<id>"
>      |   literal     -> dumpSt(stVal={$literal.st})
>      ;
>
> All the OP_* nodes could be handled by one template "dyadExpr" with the
> parameters "op", "left" and "right". But I need a way to specify the
> needed operator. Putting "$op.type"
> in the above rule at the point where "$$$$" is yield the lexer token
> number.
> Any ideas
> how to connect the token number with the appropriate operator string?
> The maps in the StringTemplate Group only support mapping strings to
> strings.
>
>
> The second problem is that some rules simply need to deliver the output
> of another rule.
> I solved this by introducing a helper template "dumpSt" that simply
> delivers the given input. The helper template is defined in the *.stg
> file as follows:
>
> // Simply dump the value of another string template call
> dumpSt(stValue)    ::= "<stVal>"
>
> An example of the rules that refer to this helper template is
> following:
>
> /** Declarations allowed on MODULE level */ mod_dcl
>      :   var_dcl    -> dumpSt(stVal={$var_dcl.st})
>      |   func_dcl   -> dumpSt(stVal={$func_dcl.st})
>      |   proc_dcl   -> dumpSt(stVal={$proc_dcl.st})
>      ;
>
> var_dcl:
>      ^(VAR_DCL basicType (i+=ID)+)
>      -> var_dcl(type={$basicType.st}, names={$i})
>      ;
>
> basicType
>      :   'FIXED' -> dumpSt(stVal={"int16_t"})
>      |   'FLOAT' -> dumpSt(stVal={"float"})
>      ;
>
> Could I get rid of the "dumpSt" template in "mod_dcl" rule and write
> that more directly.
> In the "basicType" rule is it possible to get the "int16_t" down into
> the *.stg file?
>
> Any hints appreciated. Thanks.
>
> Best regards,
> 	Stefan M?tje
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
> email-address

From Stefan.Maetje at esd-electronics.com  Thu Oct 27 08:56:53 2011
From: Stefan.Maetje at esd-electronics.com (Stefan =?iso-8859-1?b?TeR0amU=?= (d))
Date: Thu, 27 Oct 2011 17:56:53 +0200
Subject: [antlr-interest] Looking for some simplifications in a tree
 grammar using StringTemplate output
In-Reply-To: <e409dc5efd3c990722d31ddf4641eae1@mail.gmail.com> (from
	jimi@temporal-wave.com on Thu Oct 27 17:27:18 2011)
Message-ID: <1319731013.2439.1@pc-stefanm>

Am 27.10.2011 17:27:18 schrieb(en) Jim Idle:
> If you need the token text, then $op.getText() should do that, though you
> might need $op.start.getText() for some instances.
> 
> For passing up unchanged templates:
> 
> 
> xxxx:  l=rule {$st = $l.st;};

Thank you. That works.

> And you are probably doing something wrong if you are trying to map token
> numbers in to the operator string as the operator string is the text of
> the token so you should pass in that, and not the token number.

Well I startet with the OP_* token in my mind because the source language has
multiple operator strings that map to one operator token. See an excerpt from
my lexer rules below. Therefore the "text" attribute is ambiguous.

/** Operators for comparison */
OP_EQ:	('=='|'EQ');	// rank 5
OP_NE:	('/='|'NE');	// rank 5

OP_LT:	('<'|'LT');	// rank 4
OP_GT:	('>'|'GT');	// rank 4

But with your hint it will be easily solved. I can give the operator text to
the template and then resolve the ambiguity with a map in the *.stg file.

> Rather than using a dumpTxt template, you can just return a string from
> the rule, but it does not make much difference in the end unless you have
> so many that you can measure the performance difference. You can also use
> ->template(  directly.

My goal was only to get the output strings away from the output grammar. But
this can wait for later.

> 
> Jim
> 

Thanks for the prompt reply,
	Stefan

> > -----Original Message-----
> > From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> > bounces at antlr.org] On Behalf Of Stefan M?tje (d)
> > Sent: Thursday, October 27, 2011 8:16 AM
> > To: antlr-interest
> > Subject: [antlr-interest] Looking for some simplifications in a tree
> > grammar using StringTemplate output
> >
> > Hi all,
> >
> > I'm building a language to language translator with C++ as target
> > language.
> > I've built a
> > preliminary version of the language description and I try to produce
> > some output using StringTemplate. It works so far but I'm looking for
> > some simplifications of my output rules.
> >
> > The first rule of interest is my "expr" rule that should build
> > expressions. It looks like
> > this:
> >
> > expr
> >      :(  ^(op=OP_EQ l=expr r=expr)
> >      |   ^(op=OP_NE l=expr r=expr)
> >      |   ^(OP_LT l=expr r=expr)
> >      |   ^(OP_GT l=expr r=expr)
> >      |   ^(OP_PLUS l=expr r=expr)
> >      |   ^(OP_MINUS l=expr r=expr)
> >      |   ^(OP_MUL l=expr r=expr)
> >      |   ^(OP_DIV l=expr r=expr)
> >      |   ^(OP_IDIV l=expr r=expr)
> >          )           -> dyadExpr(op={$$$$},left={$l.st},right={$r.st})
> >      |   ID          -> template(id={$ID.text}) "<id>"
> >      |   literal     -> dumpSt(stVal={$literal.st})
> >      ;
> >
> > All the OP_* nodes could be handled by one template "dyadExpr" with the
> > parameters "op", "left" and "right". But I need a way to specify the
> > needed operator. Putting "$op.type"
> > in the above rule at the point where "$$$$" is yield the lexer token
> > number.
> > Any ideas
> > how to connect the token number with the appropriate operator string?
> > The maps in the StringTemplate Group only support mapping strings to
> > strings.
> >
> >
> > The second problem is that some rules simply need to deliver the output
> > of another rule.
> > I solved this by introducing a helper template "dumpSt" that simply
> > delivers the given input. The helper template is defined in the *.stg
> > file as follows:
> >
> > // Simply dump the value of another string template call
> > dumpSt(stValue)    ::= "<stVal>"
> >
> > An example of the rules that refer to this helper template is
> > following:
> >
> > /** Declarations allowed on MODULE level */ mod_dcl
> >      :   var_dcl    -> dumpSt(stVal={$var_dcl.st})
> >      |   func_dcl   -> dumpSt(stVal={$func_dcl.st})
> >      |   proc_dcl   -> dumpSt(stVal={$proc_dcl.st})
> >      ;
> >
> > var_dcl:
> >      ^(VAR_DCL basicType (i+=ID)+)
> >      -> var_dcl(type={$basicType.st}, names={$i})
> >      ;
> >
> > basicType
> >      :   'FIXED' -> dumpSt(stVal={"int16_t"})
> >      |   'FLOAT' -> dumpSt(stVal={"float"})
> >      ;
> >
> > Could I get rid of the "dumpSt" template in "mod_dcl" rule and write
> > that more directly.
> > In the "basicType" rule is it possible to get the "int16_t" down into
> > the *.stg file?
> >
> > Any hints appreciated. Thanks.
> >
> > Best regards,
> > 	Stefan M?tje
> >
> > List: http://www.antlr.org/mailman/listinfo/antlr-interest
> > Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
> > email-address
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-
> address
> 



From jimi at temporal-wave.com  Thu Oct 27 09:16:44 2011
From: jimi at temporal-wave.com (Jim Idle)
Date: Thu, 27 Oct 2011 09:16:44 -0700
Subject: [antlr-interest] Looking for some simplifications in a tree
 grammar using StringTemplate output
In-Reply-To: <1319728579.2439.0@pc-stefanm>
References: <1319728579.2439.0@pc-stefanm>
Message-ID: <6367cc8efce118175578b8f1da363824@mail.gmail.com>

The other thing is to not be afraid to make a code gen interface rather
than go directly to the template engine. I almost always use code to
control/model the output, then the code generator methods return the
template:


x: A B r=rule {$st = cgen.genX($A, $B, $r,st); }


Jim

> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of Stefan M?tje (d)
> Sent: Thursday, October 27, 2011 8:16 AM
> To: antlr-interest
> Subject: [antlr-interest] Looking for some simplifications in a tree
> grammar using StringTemplate output
>
> Hi all,
>
> I'm building a language to language translator with C++ as target
> language.
> I've built a
> preliminary version of the language description and I try to produce
> some output using StringTemplate. It works so far but I'm looking for
> some simplifications of my output rules.
>
> The first rule of interest is my "expr" rule that should build
> expressions. It looks like
> this:
>
> expr
>      :(  ^(op=OP_EQ l=expr r=expr)
>      |   ^(op=OP_NE l=expr r=expr)
>      |   ^(OP_LT l=expr r=expr)
>      |   ^(OP_GT l=expr r=expr)
>      |   ^(OP_PLUS l=expr r=expr)
>      |   ^(OP_MINUS l=expr r=expr)
>      |   ^(OP_MUL l=expr r=expr)
>      |   ^(OP_DIV l=expr r=expr)
>      |   ^(OP_IDIV l=expr r=expr)
>          )           -> dyadExpr(op={$$$$},left={$l.st},right={$r.st})
>      |   ID          -> template(id={$ID.text}) "<id>"
>      |   literal     -> dumpSt(stVal={$literal.st})
>      ;
>
> All the OP_* nodes could be handled by one template "dyadExpr" with the
> parameters "op", "left" and "right". But I need a way to specify the
> needed operator. Putting "$op.type"
> in the above rule at the point where "$$$$" is yield the lexer token
> number.
> Any ideas
> how to connect the token number with the appropriate operator string?
> The maps in the StringTemplate Group only support mapping strings to
> strings.
>
>
> The second problem is that some rules simply need to deliver the output
> of another rule.
> I solved this by introducing a helper template "dumpSt" that simply
> delivers the given input. The helper template is defined in the *.stg
> file as follows:
>
> // Simply dump the value of another string template call
> dumpSt(stValue)    ::= "<stVal>"
>
> An example of the rules that refer to this helper template is
> following:
>
> /** Declarations allowed on MODULE level */ mod_dcl
>      :   var_dcl    -> dumpSt(stVal={$var_dcl.st})
>      |   func_dcl   -> dumpSt(stVal={$func_dcl.st})
>      |   proc_dcl   -> dumpSt(stVal={$proc_dcl.st})
>      ;
>
> var_dcl:
>      ^(VAR_DCL basicType (i+=ID)+)
>      -> var_dcl(type={$basicType.st}, names={$i})
>      ;
>
> basicType
>      :   'FIXED' -> dumpSt(stVal={"int16_t"})
>      |   'FLOAT' -> dumpSt(stVal={"float"})
>      ;
>
> Could I get rid of the "dumpSt" template in "mod_dcl" rule and write
> that more directly.
> In the "basicType" rule is it possible to get the "int16_t" down into
> the *.stg file?
>
> Any hints appreciated. Thanks.
>
> Best regards,
> 	Stefan M?tje
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
> email-address

From parrt at cs.usfca.edu  Thu Oct 27 09:55:43 2011
From: parrt at cs.usfca.edu (Terence Parr)
Date: Thu, 27 Oct 2011 09:55:43 -0700
Subject: [antlr-interest] bugs
In-Reply-To: <4568CD36-3DB2-4177-8157-14E94DBF2319@cs.usfca.edu>
References: <CAC3B97F-0350-4D01-93FF-AC6E02709A2B@habelitz.com>
	<4568CD36-3DB2-4177-8157-14E94DBF2319@cs.usfca.edu>
Message-ID: <BAD86925-E20F-441C-88D0-FD575FF3969C@cs.usfca.edu>

* Dieter Habelitz reported bug in java code gen with synpreds. labels were
  being carried from grammar into synpreds but weren't typed properly (they
  were "void x=null;" for x=ruleref labels)

Fixed. pushed. grab at http://antlr.org/depot/antlr3/main/tool/target/

please let me know if it works.

Ter
On Oct 24, 2011, at 7:49 AM, Terence Parr wrote:

> 
> 
> Begin forwarded message:
> 
>> From: Dieter Habelitz 
>> Subject: [antlr-interest] ANTLR v3.4 generates compiler errors (that v3.3 doesn't generate)
>> Date: October 24, 2011 7:41:31 AM PDT
>> To: antlr-interest at antlr.org
>> 
>> Hi folks,
>> 
>> When feeding ANTLR 3.4 with my Java grammars it doesn't generate valid 
>> Java sources (26 compiler errors) - with v3.3 everything is okay.
>> 
>> Here's a snipped of the grammar that raises one of the problems:
>> 
>> statement
>>   :   block
>>   |   assertStatement
>>   |   ifStatement   
>>   |   forStatement
>>   |	[... and so on ...]
>>   ;           
>> 
>> ifStatement
>> 	: IF parenthesizedExpression ifStat=statement 
>>       (   ELSE elseStat=statement -> ^(IF parenthesizedExpression $ifStat $elseStat)
>>       |                           -> ^(IF parenthesizedExpression $ifStat)
>>       )
>> 	;
>> 
>> Amongst other things v3.4 generates the following code for the 'ELSE' branch
>> of the rule 'ifStatement' (have a look at the local 'variable 
>> declaration': void  =null;):
>> 
>>   public final void synpred137_Java_fragment() throws RecognitionException {
>>       void  =null;
>> 
>>       // [... some comments not relevant here ...]
>>       {
>>       match(input,ELSE,FOLLOW_ELSE_in_synpred137_Java9244); if (state.failed) return ;
>> 
>>       pushFollow(FOLLOW_statement_in_synpred137_Java9248);
>>       elseStat=statement();
>> 
>>       state._fsp--;
>>       if (state.failed) return ;
>> 
>>       }
>> 
>>   }
>> 
>> However, v3.3 generates the following code from the same grammar:
>> 
>>   public final void synpred137_Java_fragment() throws RecognitionException {   
>>       JavaParser.statement_return elseStat = null;
>> 
>> 
>>       // [... some comments not relevant here ...]
>>       {
>>       match(input,ELSE,FOLLOW_ELSE_in_synpred137_Java9244); if (state.failed) return ;
>>       pushFollow(FOLLOW_statement_in_synpred137_Java9248);
>>       elseStat=statement();
>> 
>>       state._fsp--;
>>       if (state.failed) return ;
>> 
>>       }
>>   }
>> 
>> The complete grammars can be found at ...
>> http://www.habelitz.com/index.php?option=com_content&task=view&id=12&Itemid=8
>> 
>> Any hints? A bug within v3.4?
>> 
>> Ciao
>> Dieter
>> 
>> 
>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
> 


From parrt at cs.usfca.edu  Thu Oct 27 10:40:28 2011
From: parrt at cs.usfca.edu (Terence Parr)
Date: Thu, 27 Oct 2011 10:40:28 -0700
Subject: [antlr-interest] bugs
In-Reply-To: <BAD86925-E20F-441C-88D0-FD575FF3969C@cs.usfca.edu>
References: <CAC3B97F-0350-4D01-93FF-AC6E02709A2B@habelitz.com>
	<4568CD36-3DB2-4177-8157-14E94DBF2319@cs.usfca.edu>
	<BAD86925-E20F-441C-88D0-FD575FF3969C@cs.usfca.edu>
Message-ID: <F1BC930B-6717-400F-B393-FA099DD45C0B@cs.usfca.edu>

ooops. have to back this out. Sam Harwell is fixing differently.
T
On Oct 27, 2011, at 9:55 AM, Terence Parr wrote:

> * Dieter Habelitz reported bug in java code gen with synpreds. labels were
>  being carried from grammar into synpreds but weren't typed properly (they
>  were "void x=null;" for x=ruleref labels)
> 
> Fixed. pushed. grab at http://antlr.org/depot/antlr3/main/tool/target/
> 
> please let me know if it works.
> 
> Ter
> On Oct 24, 2011, at 7:49 AM, Terence Parr wrote:
> 
>> 
>> 
>> Begin forwarded message:
>> 
>>> From: Dieter Habelitz 
>>> Subject: [antlr-interest] ANTLR v3.4 generates compiler errors (that v3.3 doesn't generate)
>>> Date: October 24, 2011 7:41:31 AM PDT
>>> To: antlr-interest at antlr.org
>>> 
>>> Hi folks,
>>> 
>>> When feeding ANTLR 3.4 with my Java grammars it doesn't generate valid 
>>> Java sources (26 compiler errors) - with v3.3 everything is okay.
>>> 
>>> Here's a snipped of the grammar that raises one of the problems:
>>> 
>>> statement
>>>  :   block
>>>  |   assertStatement
>>>  |   ifStatement   
>>>  |   forStatement
>>>  |	[... and so on ...]
>>>  ;           
>>> 
>>> ifStatement
>>> 	: IF parenthesizedExpression ifStat=statement 
>>>      (   ELSE elseStat=statement -> ^(IF parenthesizedExpression $ifStat $elseStat)
>>>      |                           -> ^(IF parenthesizedExpression $ifStat)
>>>      )
>>> 	;
>>> 
>>> Amongst other things v3.4 generates the following code for the 'ELSE' branch
>>> of the rule 'ifStatement' (have a look at the local 'variable 
>>> declaration': void  =null;):
>>> 
>>>  public final void synpred137_Java_fragment() throws RecognitionException {
>>>      void  =null;
>>> 
>>>      // [... some comments not relevant here ...]
>>>      {
>>>      match(input,ELSE,FOLLOW_ELSE_in_synpred137_Java9244); if (state.failed) return ;
>>> 
>>>      pushFollow(FOLLOW_statement_in_synpred137_Java9248);
>>>      elseStat=statement();
>>> 
>>>      state._fsp--;
>>>      if (state.failed) return ;
>>> 
>>>      }
>>> 
>>>  }
>>> 
>>> However, v3.3 generates the following code from the same grammar:
>>> 
>>>  public final void synpred137_Java_fragment() throws RecognitionException {   
>>>      JavaParser.statement_return elseStat = null;
>>> 
>>> 
>>>      // [... some comments not relevant here ...]
>>>      {
>>>      match(input,ELSE,FOLLOW_ELSE_in_synpred137_Java9244); if (state.failed) return ;
>>>      pushFollow(FOLLOW_statement_in_synpred137_Java9248);
>>>      elseStat=statement();
>>> 
>>>      state._fsp--;
>>>      if (state.failed) return ;
>>> 
>>>      }
>>>  }
>>> 
>>> The complete grammars can be found at ...
>>> http://www.habelitz.com/index.php?option=com_content&task=view&id=12&Itemid=8
>>> 
>>> Any hints? A bug within v3.4?
>>> 
>>> Ciao
>>> Dieter
>>> 
>>> 
>>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>>> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>> 
> 
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address


From dawood at us.ibm.com  Thu Oct 27 10:47:50 2011
From: dawood at us.ibm.com (David Wood)
Date: Thu, 27 Oct 2011 13:47:50 -0400
Subject: [antlr-interest] NPE parsing tree grammar
Message-ID: <OF9DEB9E4C.A4A426E5-ON85257936.0061A0B4-85257936.0061C3ED@us.ibm.com>

I would submit a bug, but I can't find a JIRA admin on the site to create 
me an account.

Exception in thread "main" java.lang.NullPointerException
        at org.antlr.runtime.tree.BaseTreeAdaptor.becomeRoot(
BaseTreeAdaptor.java:145)
        at 
com.ibm.watson.dsm.parser.dsm.antlr.DSMTreeGrammar.relationalExpression(
DSMTreeGrammar.java:3058)
        at 
com.ibm.watson.dsm.parser.dsm.antlr.DSMTreeGrammar.equalityExpression(
DSMTreeGrammar.java:2920)
        at 
com.ibm.watson.dsm.parser.dsm.antlr.DSMTreeGrammar.andExpression(
DSMTreeGrammar.java:2819)
        at 
com.ibm.watson.dsm.parser.dsm.antlr.DSMTreeGrammar.exclusiveOrExpression(
DSMTreeGrammar.java:2718)
        at 
com.ibm.watson.dsm.parser.dsm.antlr.DSMTreeGrammar.inclusiveOrExpression(
DSMTreeGrammar.java:2617)
        at 
com.ibm.watson.dsm.parser.dsm.antlr.DSMTreeGrammar.conditionalAndExpression(
DSMTreeGrammar.java:2516)
        at 
com.ibm.watson.dsm.parser.dsm.antlr.DSMTreeGrammar.conditionalOrExpression(
DSMTreeGrammar.java:2415)
        at com.ibm.watson.dsm.parser.dsm.antlr.DSMTreeGrammar.expression(
DSMTreeGrammar.java:2355)
        at 
com.ibm.watson.dsm.parser.dsm.antlr.DSMTreeGrammar.conditionalExpression(
DSMTreeGrammar.java:2293)
        at com.ibm.watson.dsm.parser.dsm.antlr.DSMTreeGrammar.rule(
DSMTreeGrammar.java:1338)
        at 
com.ibm.watson.dsm.parser.dsm.antlr.DSMTreeGrammar.ruleStatement(
DSMTreeGrammar.java:1230)
        at com.ibm.watson.dsm.parser.dsm.antlr.DSMTreeGrammar.ruleSet(
DSMTreeGrammar.java:1155)
        at com.ibm.watson.dsm.parser.dsm.antlr.DSMTreeGrammar.root(
DSMTreeGrammar.java:170)
        at com.ibm.watson.dsm.parser.dsm.DSMParser.parse(DSMParser.java:63
)
        at com.ibm.watson.dsm.parser.dsm.DSMParser.main(DSMParser.java:79)



David Wood 
Computing Systems for Wireless Networks
IBM TJ Watson Research Center
dawood at us.ibm.com
914-784-5123 (office), 914-396-6515 (mobile)
-------------- next part --------------
A non-text attachment was scrubbed...
Name: DSMGrammar.g
Type: application/octet-stream
Size: 27921 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20111027/09a08c82/attachment.obj 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: DSMTreeGrammar.g
Type: application/octet-stream
Size: 4095 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20111027/09a08c82/attachment-0001.obj 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: DSMParser.java
Type: application/octet-stream
Size: 2984 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20111027/09a08c82/attachment-0002.obj 

From bkiers at gmail.com  Thu Oct 27 10:56:26 2011
From: bkiers at gmail.com (Bart Kiers)
Date: Thu, 27 Oct 2011 19:56:26 +0200
Subject: [antlr-interest] Fwd: Rule precedence works differently when using
	a predicate?
In-Reply-To: <CAOrgODYN0CqBLj0jy8jwVXhR7my9rss4ZLAdJiQyrarvJz8FXw@mail.gmail.com>
References: <CAOrgODYN0CqBLj0jy8jwVXhR7my9rss4ZLAdJiQyrarvJz8FXw@mail.gmail.com>
Message-ID: <CAOrgODZgXmgRzojj45acGo3ctFnsbKfNjjaA9Jnr8td7QKoifQ@mail.gmail.com>

Just a little bump, in case it got buried under some of the newer posts.
And in case my previous grammar wasn't entirely clear, the following
grammar:

grammar T;

@lexer::members {
  private boolean test() {
    return true;
  }
}

parse
  :  KEY EOF
  ;

KEY
  :  'key'
  ;

ANY
  :  ({test()}?=> . )+
  ;


with the test class:

import org.antlr.runtime.*;

public class Main {
  public static void main(String[] args) throws Exception {
    TLexer lexer = new TLexer(new ANTLRStringStream("key"));
    TParser parser = new TParser(new CommonTokenStream(lexer));
    parser.parse();
  }
}


Produces the following error:

line 1:0 mismatched input 'key' expecting KEY


In other words, 'key' is being tokenized as ANY instead of KEY.
Is this expected behavior or a bug? And if it's expected behavior, could
someone point me to the documentation (book) or wiki-link that explains
this?

Cheers & regards,

Bart.

-------------------

From: Bart Kiers <bkiers at gmail.com>
Date: Mon, Oct 24, 2011 at 11:46 AM
Subject: Rule precedence works differently when using a predicate?
To: "antlr-interest at antlr.org interest" <antlr-interest at antlr.org>


Hi all,

As I understand it, ANTLR's lexer matches rules from top to bottom in the .g
grammar file and when two rules match the same number of characters, the one
that is defined first has precedence over the later one(s).

However, take the following grammar:

grammar T;

@lexer::members {
  private boolean test() {
    return true;
  }
}

parse
  :  (t=. {System.out.println(tokenNames[$t.type] + " :: " +  $t.text);})*
EOF
  ;

KEY
  :  'key'
  ;

ANY
  :  ({test()}?=> . )+
  ;


And the test class:"

import org.antlr.runtime.*;


public class Main {
  public static void main(String[] args) throws Exception {
    TLexer lexer = new TLexer(new ANTLRStringStream("key"));
    TParser parser = new TParser(new CommonTokenStream(lexer));
    parser.parse();
  }
}


I'd expected "KEY :: key" to be printed to the console, however, "ANY :: key"
is printed instead. So the last rule is matched, while the KEY rule also
matches the same input and is defined before ANY. Why?

Kind regards,

Bart.

From jimi at temporal-wave.com  Thu Oct 27 11:54:08 2011
From: jimi at temporal-wave.com (Jim Idle)
Date: Thu, 27 Oct 2011 11:54:08 -0700
Subject: [antlr-interest] Fwd: Rule precedence works differently when
 using a predicate?
In-Reply-To: <CAOrgODZgXmgRzojj45acGo3ctFnsbKfNjjaA9Jnr8td7QKoifQ@mail.gmail.com>
References: <CAOrgODYN0CqBLj0jy8jwVXhR7my9rss4ZLAdJiQyrarvJz8FXw@mail.gmail.com>
	<CAOrgODZgXmgRzojj45acGo3ctFnsbKfNjjaA9Jnr8td7QKoifQ@mail.gmail.com>
Message-ID: <0e913d1aef59594029549851f3367870@mail.gmail.com>

As I said earlier you need more predicates:

But you also need to not use .+, which essentially match anything anyway
once it is triggered. Try something like this.

fragment KEY : ;

ANY
   : {!test()}?=> 'KEY')
   | ({test()}?=> . )
   ;


But once you take out .+ , then it might just work as it was anyway.

Jim

> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of Bart Kiers
> Sent: Thursday, October 27, 2011 10:56 AM
> To: antlr-interest at antlr.org interest
> Subject: [antlr-interest] Fwd: Rule precedence works differently when
> using a predicate?
>
> Just a little bump, in case it got buried under some of the newer
> posts.
> And in case my previous grammar wasn't entirely clear, the following
> grammar:
>
> grammar T;
>
> @lexer::members {
>   private boolean test() {
>     return true;
>   }
> }
>
> parse
>   :  KEY EOF
>   ;
>
> KEY
>   :  'key'
>   ;
>
> ANY
>   :  ({test()}?=> . )+
>   ;
>
>
> with the test class:
>
> import org.antlr.runtime.*;
>
> public class Main {
>   public static void main(String[] args) throws Exception {
>     TLexer lexer = new TLexer(new ANTLRStringStream("key"));
>     TParser parser = new TParser(new CommonTokenStream(lexer));
>     parser.parse();
>   }
> }
>
>
> Produces the following error:
>
> line 1:0 mismatched input 'key' expecting KEY
>
>
> In other words, 'key' is being tokenized as ANY instead of KEY.
> Is this expected behavior or a bug? And if it's expected behavior,
> could someone point me to the documentation (book) or wiki-link that
> explains this?
>
> Cheers & regards,
>
> Bart.
>
> -------------------
>
> From: Bart Kiers <bkiers at gmail.com>
> Date: Mon, Oct 24, 2011 at 11:46 AM
> Subject: Rule precedence works differently when using a predicate?
> To: "antlr-interest at antlr.org interest" <antlr-interest at antlr.org>
>
>
> Hi all,
>
> As I understand it, ANTLR's lexer matches rules from top to bottom in
> the .g grammar file and when two rules match the same number of
> characters, the one that is defined first has precedence over the later
> one(s).
>
> However, take the following grammar:
>
> grammar T;
>
> @lexer::members {
>   private boolean test() {
>     return true;
>   }
> }
>
> parse
>   :  (t=. {System.out.println(tokenNames[$t.type] + " :: " +
> $t.text);})* EOF
>   ;
>
> KEY
>   :  'key'
>   ;
>
> ANY
>   :  ({test()}?=> . )+
>   ;
>
>
> And the test class:"
>
> import org.antlr.runtime.*;
>
>
> public class Main {
>   public static void main(String[] args) throws Exception {
>     TLexer lexer = new TLexer(new ANTLRStringStream("key"));
>     TParser parser = new TParser(new CommonTokenStream(lexer));
>     parser.parse();
>   }
> }
>
>
> I'd expected "KEY :: key" to be printed to the console, however, "ANY
> :: key"
> is printed instead. So the last rule is matched, while the KEY rule
> also matches the same input and is defined before ANY. Why?
>
> Kind regards,
>
> Bart.
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
> email-address

From parrt at cs.usfca.edu  Thu Oct 27 12:19:11 2011
From: parrt at cs.usfca.edu (Terence Parr)
Date: Thu, 27 Oct 2011 12:19:11 -0700
Subject: [antlr-interest] NPE parsing tree grammar
In-Reply-To: <OF9DEB9E4C.A4A426E5-ON85257936.0061A0B4-85257936.0061C3ED@us.ibm.com>
References: <OF9DEB9E4C.A4A426E5-ON85257936.0061A0B4-85257936.0061C3ED@us.ibm.com>
Message-ID: <8C54F2A9-A18A-4D34-97EA-47DE7F61DAD5@cs.usfca.edu>

works in latest v3 main trunk. can u grab from depot/...on site?
T
On Oct 27, 2011, at 10:47 AM, David Wood wrote:

> I would submit a bug, but I can't find a JIRA admin on the site to create 
> me an account.
> 
> Exception in thread "main" java.lang.NullPointerException
>        at org.antlr.runtime.tree.BaseTreeAdaptor.becomeRoot(
> BaseTreeAdaptor.java:145)
>        at 
> com.ibm.watson.dsm.parser.dsm.antlr.DSMTreeGrammar.relationalExpression(
> DSMTreeGrammar.java:3058)
>        at 
> com.ibm.watson.dsm.parser.dsm.antlr.DSMTreeGrammar.equalityExpression(
> DSMTreeGrammar.java:2920)
>        at 
> com.ibm.watson.dsm.parser.dsm.antlr.DSMTreeGrammar.andExpression(
> DSMTreeGrammar.java:2819)
>        at 
> com.ibm.watson.dsm.parser.dsm.antlr.DSMTreeGrammar.exclusiveOrExpression(
> DSMTreeGrammar.java:2718)
>        at 
> com.ibm.watson.dsm.parser.dsm.antlr.DSMTreeGrammar.inclusiveOrExpression(
> DSMTreeGrammar.java:2617)
>        at 
> com.ibm.watson.dsm.parser.dsm.antlr.DSMTreeGrammar.conditionalAndExpression(
> DSMTreeGrammar.java:2516)
>        at 
> com.ibm.watson.dsm.parser.dsm.antlr.DSMTreeGrammar.conditionalOrExpression(
> DSMTreeGrammar.java:2415)
>        at com.ibm.watson.dsm.parser.dsm.antlr.DSMTreeGrammar.expression(
> DSMTreeGrammar.java:2355)
>        at 
> com.ibm.watson.dsm.parser.dsm.antlr.DSMTreeGrammar.conditionalExpression(
> DSMTreeGrammar.java:2293)
>        at com.ibm.watson.dsm.parser.dsm.antlr.DSMTreeGrammar.rule(
> DSMTreeGrammar.java:1338)
>        at 
> com.ibm.watson.dsm.parser.dsm.antlr.DSMTreeGrammar.ruleStatement(
> DSMTreeGrammar.java:1230)
>        at com.ibm.watson.dsm.parser.dsm.antlr.DSMTreeGrammar.ruleSet(
> DSMTreeGrammar.java:1155)
>        at com.ibm.watson.dsm.parser.dsm.antlr.DSMTreeGrammar.root(
> DSMTreeGrammar.java:170)
>        at com.ibm.watson.dsm.parser.dsm.DSMParser.parse(DSMParser.java:63
> )
>        at com.ibm.watson.dsm.parser.dsm.DSMParser.main(DSMParser.java:79)
> 
> 
> 
> David Wood 
> Computing Systems for Wireless Networks
> IBM TJ Watson Research Center
> dawood at us.ibm.com
> 914-784-5123 (office), 914-396-6515 (mobile)
> <DSMGrammar.g><DSMTreeGrammar.g><DSMParser.java>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address


From bkiers at gmail.com  Thu Oct 27 12:22:54 2011
From: bkiers at gmail.com (Bart Kiers)
Date: Thu, 27 Oct 2011 21:22:54 +0200
Subject: [antlr-interest] Fwd: Fwd: Rule precedence works differently when
 using a predicate?
In-Reply-To: <CAOrgODbNriC6A2QibRVuHcH_hWj2A2yOSL48zcL7Na-KzBwvNg@mail.gmail.com>
References: <CAOrgODYN0CqBLj0jy8jwVXhR7my9rss4ZLAdJiQyrarvJz8FXw@mail.gmail.com>
	<CAOrgODZgXmgRzojj45acGo3ctFnsbKfNjjaA9Jnr8td7QKoifQ@mail.gmail.com>
	<0e913d1aef59594029549851f3367870@mail.gmail.com>
	<CAOrgODbNriC6A2QibRVuHcH_hWj2A2yOSL48zcL7Na-KzBwvNg@mail.gmail.com>
Message-ID: <CAOrgODZuHmQ3Fy_z+-9qSj1eqbx7S6D8zCK9A0YQJ4MMPjVKeA@mail.gmail.com>

Apologies Jim, forgot to send to the list...

---------- Forwarded message ----------
From: Bart Kiers <bkiers at gmail.com>
Date: Thu, Oct 27, 2011 at 9:21 PM
Subject: Re: [antlr-interest] Fwd: Rule precedence works differently when
using a predicate?
To: Jim Idle <jimi at temporal-wave.com>


On Thu, Oct 27, 2011 at 8:54 PM, Jim Idle <jimi at temporal-wave.com> wrote:

> As I said earlier you need more predicates:
>
>
Sorry Jim, I did not know you replied to my message below before.



> But you also need to not use .+, which essentially match anything anyway
> once it is triggered.
>

Err, no, not with a predicate, AFAIK (see the rule ANY_EXEPT_B in my example
below which does not match anything).



> Try something like this.
> fragment KEY : ;
>
> ANY
>   : {!test()}?=> 'KEY')
>   | ({test()}?=> . )
>   ;
>
>
> But once you take out .+ , then it might just work as it was anyway.
>
> Jim
>

Thanks for your suggestion, but I know how to make it work. My question was
more about why, when two rules match the same amount of characters, the rule
later defined in the grammar is used to create a token.
Let me give another example grammar:

grammar T;

@parser::members {
  public static void main(String[] args) throws Exception {
    TLexer lexer = new TLexer(new ANTLRStringStream("aaaBaa"));
    TParser parser = new TParser(new CommonTokenStream(lexer));
    parser.parse();
  }
}

@lexer::members {
  private boolean noBAhead() {
    return input.LA(1) != 'B';
  }
}

parse
  :  (t=. {System.out.printf("\%-15s \%s\n", tokenNames[$t.type],
$t.text);})+ EOF
  ;

MANY_A
  :  'a'+
  ;

B
  :  'B'
  ;

ANY_EXEPT_B
  :  ({noBAhead()}?=> . )+
  ;

If you run the TParser class, you will see the following output when parsing
"aaaBaa":

ANY_EXEPT_B     aaa
B               B
ANY_EXEPT_B     aa

I.e., although the rule MANY_A also matches both "aaa" and "aa", ANY_EXEPT_B
matches them where I thought the rule defined first (MANY_A) would match
them.

Regards,

Bart.



> > -----Original Message-----
> > From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> > bounces at antlr.org] On Behalf Of Bart Kiers
> > Sent: Thursday, October 27, 2011 10:56 AM
> > To: antlr-interest at antlr.org interest
> > Subject: [antlr-interest] Fwd: Rule precedence works differently when
> > using a predicate?
> >
> > Just a little bump, in case it got buried under some of the newer
> > posts.
> > And in case my previous grammar wasn't entirely clear, the following
> > grammar:
> >
> > grammar T;
> >
> > @lexer::members {
> >   private boolean test() {
> >     return true;
> >   }
> > }
> >
> > parse
> >   :  KEY EOF
> >   ;
> >
> > KEY
> >   :  'key'
> >   ;
> >
> > ANY
> >   :  ({test()}?=> . )+
> >   ;
> >
> >
> > with the test class:
> >
> > import org.antlr.runtime.*;
> >
> > public class Main {
> >   public static void main(String[] args) throws Exception {
> >     TLexer lexer = new TLexer(new ANTLRStringStream("key"));
> >     TParser parser = new TParser(new CommonTokenStream(lexer));
> >     parser.parse();
> >   }
> > }
> >
> >
> > Produces the following error:
> >
> > line 1:0 mismatched input 'key' expecting KEY
> >
> >
> > In other words, 'key' is being tokenized as ANY instead of KEY.
> > Is this expected behavior or a bug? And if it's expected behavior,
> > could someone point me to the documentation (book) or wiki-link that
> > explains this?
> >
> > Cheers & regards,
> >
> > Bart.
> >
> > -------------------
> >
> > From: Bart Kiers <bkiers at gmail.com>
> > Date: Mon, Oct 24, 2011 at 11:46 AM
> > Subject: Rule precedence works differently when using a predicate?
> > To: "antlr-interest at antlr.org interest" <antlr-interest at antlr.org>
> >
> >
> > Hi all,
> >
> > As I understand it, ANTLR's lexer matches rules from top to bottom in
> > the .g grammar file and when two rules match the same number of
> > characters, the one that is defined first has precedence over the later
> > one(s).
> >
> > However, take the following grammar:
> >
> > grammar T;
> >
> > @lexer::members {
> >   private boolean test() {
> >     return true;
> >   }
> > }
> >
> > parse
> >   :  (t=. {System.out.println(tokenNames[$t.type] + " :: " +
> > $t.text);})* EOF
> >   ;
> >
> > KEY
> >   :  'key'
> >   ;
> >
> > ANY
> >   :  ({test()}?=> . )+
> >   ;
> >
> >
> > And the test class:"
> >
> > import org.antlr.runtime.*;
> >
> >
> > public class Main {
> >   public static void main(String[] args) throws Exception {
> >     TLexer lexer = new TLexer(new ANTLRStringStream("key"));
> >     TParser parser = new TParser(new CommonTokenStream(lexer));
> >     parser.parse();
> >   }
> > }
> >
> >
> > I'd expected "KEY :: key" to be printed to the console, however, "ANY
> > :: key"
> > is printed instead. So the last rule is matched, while the KEY rule
> > also matches the same input and is defined before ANY. Why?
> >
> > Kind regards,
> >
> > Bart.
> >
> > List: http://www.antlr.org/mailman/listinfo/antlr-interest
> > Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
> > email-address
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>

From bkiers at gmail.com  Thu Oct 27 14:02:55 2011
From: bkiers at gmail.com (Bart Kiers)
Date: Thu, 27 Oct 2011 23:02:55 +0200
Subject: [antlr-interest] Fwd: Rule precedence works differently when
 using a predicate?
In-Reply-To: <e1e9659ce60e9623cb96d71f9c0b5c11@mail.gmail.com>
References: <CAOrgODYN0CqBLj0jy8jwVXhR7my9rss4ZLAdJiQyrarvJz8FXw@mail.gmail.com>
	<CAOrgODZgXmgRzojj45acGo3ctFnsbKfNjjaA9Jnr8td7QKoifQ@mail.gmail.com>
	<0e913d1aef59594029549851f3367870@mail.gmail.com>
	<CAOrgODbNriC6A2QibRVuHcH_hWj2A2yOSL48zcL7Na-KzBwvNg@mail.gmail.com>
	<e1e9659ce60e9623cb96d71f9c0b5c11@mail.gmail.com>
Message-ID: <CAOrgODYWm_rKs-fQsYFVzjP9TZO8bnfE2fuNh=ZxamM5V-ffAw@mail.gmail.com>

Hi Jim, others,

Sorry, but I'd appreciate it if you (or someone else) could answer my
question with a bit more detail because I really don't understand you (Jim).

You say `.+` matches forever, but in my example, there is a predicate in
front of the `.` causing it _not_ to match forever as you can see yourself.
The input "aaaBaa" is tokenized into 3 different tokens: "aaa", "B" and "aa"
and _not_ into one single token by the rule that has the `.+` and the
predicate in it. Your last comment suggests to me that you imply that
"aaaBaa" will be tokenized as a single token (which, again, is not the
case).

My question therefor remains the same: why are "aaa" and "aa" from the input
"aaaBaa" being tokenized as ANY_EXEPT_B instead of MANY_A, where MANY_A is
defined  before ANY_EXEPT_B and MANY_A matches exactly the same amount of
characters as ANY_EXEPT_B does?

To me, it's as if input "while" would be matched by the ID rule instead of
the WHILE rule in:

WHILE : 'while';
ID : 'a'..'z'+;

(which is not the case, of course!)

Regards,

Bart.


On Thu, Oct 27, 2011 at 10:34 PM, Jim Idle <jimi at temporal-wave.com> wrote:

> .+ matches forever
>
>
>
> Jim
>
>
>
> *From:* Bart Kiers [mailto:bkiers at gmail.com]
> *Sent:* Thursday, October 27, 2011 12:22 PM
> *To:* Jim Idle
> *Subject:* Re: [antlr-interest] Fwd: Rule precedence works differently
> when using a predicate?
>
>
>
> On Thu, Oct 27, 2011 at 8:54 PM, Jim Idle <jimi at temporal-wave.com> wrote:
>
> As I said earlier you need more predicates:
>
>
>
> Sorry Jim, I did not know you replied to my message below before.
>
>
>
>
>
> But you also need to not use .+, which essentially match anything anyway
> once it is triggered.
>
>
>
> Err, no, not with a predicate, AFAIK (see the rule ANY_EXEPT_B in my
> example below which does not match anything).
>
>
>
>
>
> Try something like this.
> fragment KEY : ;
>
> ANY
>   : {!test()}?=> 'KEY')
>   | ({test()}?=> . )
>   ;
>
>
> But once you take out .+ , then it might just work as it was anyway.
>
> Jim
>
>
>
> Thanks for your suggestion, but I know how to make it work. My question was
> more about why, when two rules match the same amount of characters, the rule
> later defined in the grammar is used to create a token.
>
> Let me give another example grammar:
>
>
>
> grammar T;
>
>
>
> @parser::members {
>
>   public static void main(String[] args) throws Exception {
>
>     TLexer lexer = new TLexer(new ANTLRStringStream("aaaBaa"));
>
>     TParser parser = new TParser(new CommonTokenStream(lexer));
>
>     parser.parse();
>
>   }
>
> }
>
>
>
> @lexer::members {
>
>   private boolean noBAhead() {
>
>     return input.LA(1) != 'B';
>
>   }
>
> }
>
>
>
> parse
>
>   :  (t=. {System.out.printf("\%-15s \%s\n", tokenNames[$t.type],
> $t.text);})+ EOF
>
>   ;
>
>
>
> MANY_A
>
>   :  'a'+
>
>   ;
>
>
>
> B
>
>   :  'B'
>
>   ;
>
>
>
> ANY_EXEPT_B
>
>   :  ({noBAhead()}?=> . )+
>
>   ;
>
>
>
> If you run the TParser class, you will see the following output when
> parsing "aaaBaa":
>
>
>
> ANY_EXEPT_B     aaa
>
> B               B
>
> ANY_EXEPT_B     aa
>
>
>
> I.e., although the rule MANY_A also matches both "aaa" and
> "aa", ANY_EXEPT_B matches them where I thought the rule defined first
> (MANY_A) would match them.
>
>
>
> Regards,
>
>
>
> Bart.
>
>
>
>
>
>
> > -----Original Message-----
> > From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> > bounces at antlr.org] On Behalf Of Bart Kiers
> > Sent: Thursday, October 27, 2011 10:56 AM
> > To: antlr-interest at antlr.org interest
> > Subject: [antlr-interest] Fwd: Rule precedence works differently when
>
> > using a predicate?
> >
> > Just a little bump, in case it got buried under some of the newer
> > posts.
> > And in case my previous grammar wasn't entirely clear, the following
> > grammar:
> >
> > grammar T;
> >
> > @lexer::members {
> >   private boolean test() {
> >     return true;
> >   }
> > }
> >
> > parse
> >   :  KEY EOF
> >   ;
> >
> > KEY
> >   :  'key'
> >   ;
> >
> > ANY
> >   :  ({test()}?=> . )+
> >   ;
> >
> >
> > with the test class:
> >
> > import org.antlr.runtime.*;
> >
> > public class Main {
> >   public static void main(String[] args) throws Exception {
> >     TLexer lexer = new TLexer(new ANTLRStringStream("key"));
> >     TParser parser = new TParser(new CommonTokenStream(lexer));
> >     parser.parse();
> >   }
> > }
> >
> >
> > Produces the following error:
> >
> > line 1:0 mismatched input 'key' expecting KEY
> >
> >
> > In other words, 'key' is being tokenized as ANY instead of KEY.
> > Is this expected behavior or a bug? And if it's expected behavior,
> > could someone point me to the documentation (book) or wiki-link that
> > explains this?
> >
> > Cheers & regards,
> >
> > Bart.
> >
> > -------------------
> >
> > From: Bart Kiers <bkiers at gmail.com>
> > Date: Mon, Oct 24, 2011 at 11:46 AM
> > Subject: Rule precedence works differently when using a predicate?
> > To: "antlr-interest at antlr.org interest" <antlr-interest at antlr.org>
> >
> >
> > Hi all,
> >
> > As I understand it, ANTLR's lexer matches rules from top to bottom in
> > the .g grammar file and when two rules match the same number of
> > characters, the one that is defined first has precedence over the later
> > one(s).
> >
> > However, take the following grammar:
> >
> > grammar T;
> >
> > @lexer::members {
> >   private boolean test() {
> >     return true;
> >   }
> > }
> >
> > parse
> >   :  (t=. {System.out.println(tokenNames[$t.type] + " :: " +
> > $t.text);})* EOF
> >   ;
> >
> > KEY
> >   :  'key'
> >   ;
> >
> > ANY
> >   :  ({test()}?=> . )+
> >   ;
> >
> >
> > And the test class:"
> >
> > import org.antlr.runtime.*;
> >
> >
> > public class Main {
> >   public static void main(String[] args) throws Exception {
> >     TLexer lexer = new TLexer(new ANTLRStringStream("key"));
> >     TParser parser = new TParser(new CommonTokenStream(lexer));
> >     parser.parse();
> >   }
> > }
> >
> >
> > I'd expected "KEY :: key" to be printed to the console, however, "ANY
> > :: key"
> > is printed instead. So the last rule is matched, while the KEY rule
> > also matches the same input and is defined before ANY. Why?
> >
> > Kind regards,
> >
> > Bart.
> >
>
> > List: http://www.antlr.org/mailman/listinfo/antlr-interest
> > Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
> > email-address
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>
>
>

From andy.voelkel at plantronics.com  Thu Oct 27 15:26:08 2011
From: andy.voelkel at plantronics.com (Voelkel, Andy)
Date: Thu, 27 Oct 2011 22:26:08 +0000
Subject: [antlr-interest] What's the right way to do this?
Message-ID: <92E9AB4D42199B4793CE24E094BAEE070E87E3@USSCMB03.plt.plantronics.com>

Hi,

I'm developing tools for generating various C source files from a simple DSL. I've got the lexing/parsing/tree-creation part of it working to my satisfaction, and am comfortable with my level of understanding (though I will continue to work my way all the way through Terence's book). But I'm confused about the best approach to generating one of the output files I need, which should look like this:

toplevel name = {
  { // begin group1
    { // begin block1
      item 1,
      item 2
    }, // end block1
    { // begin block2
      item 1,
      item 2
    } // end block2
  }, // end group1
  { // begin block3
    item 1,
    item 2,
    item 3
  }, // end block3
  { // begin group2
    { // begin block4
      item 1,
      item 2
    }, // end block4
    { // begin block5
      item 1,
      item 2
    } // end block5
  } // end group2
};

The problem is putting the "," characters on all elements in the nested structure except for the last one at that level, and I'm wondering what the best approach to the problem is. It seems like I could pass a "last one" parameter down to subrules when the item invoking the subrule is the last in the list of a rule, and use that as a way to avoid printing the ",". Alternatively, I get the feeling that this could be handled by the right StringTemplate magic, but I haven't found the right StringTemplate tutorials to get comfortable with this problem, which is obviously recursive, and where the items in a list are not all of the same type. The toplevel structure can contain groups or blocks, and groups can contain other groups:

group: 'group'^ ID '{'! (block | group)+ '}'! ;
block: 'block'^ ID '{'! (assign)+ '}'! ;

What would be the right way to get the output I'm looking for?

- Andy

________________________________

CONFIDENTIALITY NOTICE: This e-mail transmission, and any documents, files or previous e-mail messages attached to it, may contain information that is confidential and/or legally privileged. If you are not the intended recipient, or a person responsible for delivering it to the intended recipient, please DO NOT disclose the contents to another person, store or copy the information in any medium, or use any of the information contained in or attached to this transmission for any purpose. If you have received this transmission in error, please immediately notify the sender by reply email or at privacy at plantronics.com, and destroy the original transmission and its attachments without reading or saving in any manner.

For further information about Plantronics - the Company, its products, brands, partners, please visit our website www.plantronics.com.

From michael.bedward at gmail.com  Thu Oct 27 17:17:30 2011
From: michael.bedward at gmail.com (Michael Bedward)
Date: Fri, 28 Oct 2011 11:17:30 +1100
Subject: [antlr-interest] What's the right way to do this?
In-Reply-To: <92E9AB4D42199B4793CE24E094BAEE070E87E3@USSCMB03.plt.plantronics.com>
References: <92E9AB4D42199B4793CE24E094BAEE070E87E3@USSCMB03.plt.plantronics.com>
Message-ID: <CACJVtdNPqE2n=j=cPq-1ftjJR6z3zTA1R7U_+9=kKbg+RohHvg@mail.gmail.com>

Hello Andy,

Here is an example of doing this with stringtemplate v3:

// A function call with comma-delimited list of args
call(name, args) ::= <<
<name>(<args; separator=", ">)
>>

You can see this usage on the stringtemplate cheat sheet:
http://www.antlr.org/wiki/display/ST/StringTemplate+cheat+sheet

Michael


On 28 October 2011 09:26, Voelkel, Andy <andy.voelkel at plantronics.com> wrote:
> Hi,
>
> I'm developing tools for generating various C source files from a simple DSL. I've got the lexing/parsing/tree-creation part of it working to my satisfaction, and am comfortable with my level of understanding (though I will continue to work my way all the way through Terence's book). But I'm confused about the best approach to generating one of the output files I need, which should look like this:
>
> toplevel name = {
> ?{ // begin group1
> ? ?{ // begin block1
> ? ? ?item 1,
> ? ? ?item 2
> ? ?}, // end block1
> ? ?{ // begin block2
> ? ? ?item 1,
> ? ? ?item 2
> ? ?} // end block2
> ?}, // end group1
> ?{ // begin block3
> ? ?item 1,
> ? ?item 2,
> ? ?item 3
> ?}, // end block3
> ?{ // begin group2
> ? ?{ // begin block4
> ? ? ?item 1,
> ? ? ?item 2
> ? ?}, // end block4
> ? ?{ // begin block5
> ? ? ?item 1,
> ? ? ?item 2
> ? ?} // end block5
> ?} // end group2
> };
>
> The problem is putting the "," characters on all elements in the nested structure except for the last one at that level, and I'm wondering what the best approach to the problem is. It seems like I could pass a "last one" parameter down to subrules when the item invoking the subrule is the last in the list of a rule, and use that as a way to avoid printing the ",". Alternatively, I get the feeling that this could be handled by the right StringTemplate magic, but I haven't found the right StringTemplate tutorials to get comfortable with this problem, which is obviously recursive, and where the items in a list are not all of the same type. The toplevel structure can contain groups or blocks, and groups can contain other groups:
>
> group: 'group'^ ID '{'! (block | group)+ '}'! ;
> block: 'block'^ ID '{'! (assign)+ '}'! ;
>
> What would be the right way to get the output I'm looking for?
>
> - Andy
>
> ________________________________
>
> CONFIDENTIALITY NOTICE: This e-mail transmission, and any documents, files or previous e-mail messages attached to it, may contain information that is confidential and/or legally privileged. If you are not the intended recipient, or a person responsible for delivering it to the intended recipient, please DO NOT disclose the contents to another person, store or copy the information in any medium, or use any of the information contained in or attached to this transmission for any purpose. If you have received this transmission in error, please immediately notify the sender by reply email or at privacy at plantronics.com, and destroy the original transmission and its attachments without reading or saving in any manner.
>
> For further information about Plantronics - the Company, its products, brands, partners, please visit our website www.plantronics.com.
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>

From andy.voelkel at plantronics.com  Thu Oct 27 20:38:21 2011
From: andy.voelkel at plantronics.com (Voelkel, Andy)
Date: Fri, 28 Oct 2011 03:38:21 +0000
Subject: [antlr-interest] Can someone send a simple working C#
 StringTemplate example? (I'm frustrated)
In-Reply-To: <CACJVtdNPqE2n=j=cPq-1ftjJR6z3zTA1R7U_+9=kKbg+RohHvg@mail.gmail.com>
References: <92E9AB4D42199B4793CE24E094BAEE070E87E3@USSCMB03.plt.plantronics.com>
	<CACJVtdNPqE2n=j=cPq-1ftjJR6z3zTA1R7U_+9=kKbg+RohHvg@mail.gmail.com>
Message-ID: <92E9AB4D42199B4793CE24E094BAEE070E8941@USSCMB03.plt.plantronics.com>

Hi,

I've moved on from trying to get the C# version of Antlr working (successfully - with help from this list!) to trying to get StringTemplate working in the C# version. I've tried to "port" this example from Terence's book:

import org.antlr.stringtemplate.*;
...
StringTemplate hello = new StringTemplate("Hello <name>" );
hello.setAttribute("name" , "World" );
System.out.println(hello.toString());

Seems easy enough, right? Well, given the version of the C# runtime I've got, StringTemplate seems to be named Template, and doesn't have a setAttribute method (or a SetAttribute method), and displays nonsensical output from the toString (actually ToString) method.

I looked on the StringTemplate website, and the examples there don't even refer to a StringTemplate or a Template, they talk about an "ST" (for both Java and C#).

Can someone point me at a simple example of a StringTemplate example (such as the above) that works with the C# runtime Antlr4.StringTemplate dll (version v2.0.50727)? I can probably go from there, using the forensic techniques I learned trying to figure out how the Java version of Antlr maps to the C# version.

- Andy

P.S. Editorial comment. These are really powerful tools, but the amount of out of date or missing documentation and examples on the websites is maddening. Thank god for this list, or I would have given up two weeks ago!



-----Original Message-----
From: Michael Bedward [mailto:michael.bedward at gmail.com]
Sent: Thursday, October 27, 2011 5:18 PM
To: Voelkel, Andy
Cc: antlr-interest at antlr.org
Subject: Re: [antlr-interest] What's the right way to do this?

Hello Andy,

Here is an example of doing this with stringtemplate v3:

// A function call with comma-delimited list of args
call(name, args) ::= <<
<name>(<args; separator=", ">)
>>

You can see this usage on the stringtemplate cheat sheet:
http://www.antlr.org/wiki/display/ST/StringTemplate+cheat+sheet

Michael


On 28 October 2011 09:26, Voelkel, Andy <andy.voelkel at plantronics.com> wrote:
> Hi,
>
> I'm developing tools for generating various C source files from a simple DSL. I've got the lexing/parsing/tree-creation part of it working to my satisfaction, and am comfortable with my level of understanding (though I will continue to work my way all the way through Terence's book). But I'm confused about the best approach to generating one of the output files I need, which should look like this:
>
> toplevel name = {
>  { // begin group1
>    { // begin block1
>      item 1,
>      item 2
>    }, // end block1
>    { // begin block2
>      item 1,
>      item 2
>    } // end block2
>  }, // end group1
>  { // begin block3
>    item 1,
>    item 2,
>    item 3
>  }, // end block3
>  { // begin group2
>    { // begin block4
>      item 1,
>      item 2
>    }, // end block4
>    { // begin block5
>      item 1,
>      item 2
>    } // end block5
>  } // end group2
> };
>
> The problem is putting the "," characters on all elements in the nested structure except for the last one at that level, and I'm wondering what the best approach to the problem is. It seems like I could pass a "last one" parameter down to subrules when the item invoking the subrule is the last in the list of a rule, and use that as a way to avoid printing the ",". Alternatively, I get the feeling that this could be handled by the right StringTemplate magic, but I haven't found the right StringTemplate tutorials to get comfortable with this problem, which is obviously recursive, and where the items in a list are not all of the same type. The toplevel structure can contain groups or blocks, and groups can contain other groups:
>
> group: 'group'^ ID '{'! (block | group)+ '}'! ;
> block: 'block'^ ID '{'! (assign)+ '}'! ;
>
> What would be the right way to get the output I'm looking for?
>
> - Andy
>
> ________________________________
>
> CONFIDENTIALITY NOTICE: This e-mail transmission, and any documents, files or previous e-mail messages attached to it, may contain information that is confidential and/or legally privileged. If you are not the intended recipient, or a person responsible for delivering it to the intended recipient, please DO NOT disclose the contents to another person, store or copy the information in any medium, or use any of the information contained in or attached to this transmission for any purpose. If you have received this transmission in error, please immediately notify the sender by reply email or at privacy at plantronics.com, and destroy the original transmission and its attachments without reading or saving in any manner.
>
> For further information about Plantronics - the Company, its products, brands, partners, please visit our website www.plantronics.com.
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>


________________________________

CONFIDENTIALITY NOTICE: This e-mail transmission, and any documents, files or previous e-mail messages attached to it, may contain information that is confidential and/or legally privileged. If you are not the intended recipient, or a person responsible for delivering it to the intended recipient, please DO NOT disclose the contents to another person, store or copy the information in any medium, or use any of the information contained in or attached to this transmission for any purpose. If you have received this transmission in error, please immediately notify the sender by reply email or at privacy at plantronics.com, and destroy the original transmission and its attachments without reading or saving in any manner.

For further information about Plantronics - the Company, its products, brands, partners, please visit our website www.plantronics.com.

From andy.voelkel at plantronics.com  Thu Oct 27 20:44:37 2011
From: andy.voelkel at plantronics.com (Voelkel, Andy)
Date: Fri, 28 Oct 2011 03:44:37 +0000
Subject: [antlr-interest] Can someone send a simple working C#
 StringTemplate example? (NEVER MIND!)
In-Reply-To: <92E9AB4D42199B4793CE24E094BAEE070E8941@USSCMB03.plt.plantronics.com>
References: <92E9AB4D42199B4793CE24E094BAEE070E87E3@USSCMB03.plt.plantronics.com>
	<CACJVtdNPqE2n=j=cPq-1ftjJR6z3zTA1R7U_+9=kKbg+RohHvg@mail.gmail.com>
	<92E9AB4D42199B4793CE24E094BAEE070E8941@USSCMB03.plt.plantronics.com>
Message-ID: <92E9AB4D42199B4793CE24E094BAEE070E8959@USSCMB03.plt.plantronics.com>

Never mind, I pieced the following example together from a couple different places:

namespace StringTemplateTest {
  class Program {
    static void Main(string[] args) {
      Template hello = new Template("Hello <name>");
      hello.Add("name" , "World" );
      Console.WriteLine(hello.Render());
    }
  }
}

-----Original Message-----
From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-bounces at antlr.org] On Behalf Of Voelkel, Andy
Sent: Thursday, October 27, 2011 8:38 PM
To: antlr-interest at antlr.org
Subject: [antlr-interest] Can someone send a simple working C# StringTemplate example? (I'm frustrated)

Hi,

I've moved on from trying to get the C# version of Antlr working (successfully - with help from this list!) to trying to get StringTemplate working in the C# version. I've tried to "port" this example from Terence's book:

import org.antlr.stringtemplate.*;
...
StringTemplate hello = new StringTemplate("Hello <name>" );
hello.setAttribute("name" , "World" );
System.out.println(hello.toString());

Seems easy enough, right? Well, given the version of the C# runtime I've got, StringTemplate seems to be named Template, and doesn't have a setAttribute method (or a SetAttribute method), and displays nonsensical output from the toString (actually ToString) method.

I looked on the StringTemplate website, and the examples there don't even refer to a StringTemplate or a Template, they talk about an "ST" (for both Java and C#).

Can someone point me at a simple example of a StringTemplate example (such as the above) that works with the C# runtime Antlr4.StringTemplate dll (version v2.0.50727)? I can probably go from there, using the forensic techniques I learned trying to figure out how the Java version of Antlr maps to the C# version.

- Andy

P.S. Editorial comment. These are really powerful tools, but the amount of out of date or missing documentation and examples on the websites is maddening. Thank god for this list, or I would have given up two weeks ago!



-----Original Message-----
From: Michael Bedward [mailto:michael.bedward at gmail.com]
Sent: Thursday, October 27, 2011 5:18 PM
To: Voelkel, Andy
Cc: antlr-interest at antlr.org
Subject: Re: [antlr-interest] What's the right way to do this?

Hello Andy,

Here is an example of doing this with stringtemplate v3:

// A function call with comma-delimited list of args
call(name, args) ::= <<
<name>(<args; separator=", ">)
>>

You can see this usage on the stringtemplate cheat sheet:
http://www.antlr.org/wiki/display/ST/StringTemplate+cheat+sheet

Michael


On 28 October 2011 09:26, Voelkel, Andy <andy.voelkel at plantronics.com> wrote:
> Hi,
>
> I'm developing tools for generating various C source files from a simple DSL. I've got the lexing/parsing/tree-creation part of it working to my satisfaction, and am comfortable with my level of understanding (though I will continue to work my way all the way through Terence's book). But I'm confused about the best approach to generating one of the output files I need, which should look like this:
>
> toplevel name = {
>  { // begin group1
>    { // begin block1
>      item 1,
>      item 2
>    }, // end block1
>    { // begin block2
>      item 1,
>      item 2
>    } // end block2
>  }, // end group1
>  { // begin block3
>    item 1,
>    item 2,
>    item 3
>  }, // end block3
>  { // begin group2
>    { // begin block4
>      item 1,
>      item 2
>    }, // end block4
>    { // begin block5
>      item 1,
>      item 2
>    } // end block5
>  } // end group2
> };
>
> The problem is putting the "," characters on all elements in the nested structure except for the last one at that level, and I'm wondering what the best approach to the problem is. It seems like I could pass a "last one" parameter down to subrules when the item invoking the subrule is the last in the list of a rule, and use that as a way to avoid printing the ",". Alternatively, I get the feeling that this could be handled by the right StringTemplate magic, but I haven't found the right StringTemplate tutorials to get comfortable with this problem, which is obviously recursive, and where the items in a list are not all of the same type. The toplevel structure can contain groups or blocks, and groups can contain other groups:
>
> group: 'group'^ ID '{'! (block | group)+ '}'! ;
> block: 'block'^ ID '{'! (assign)+ '}'! ;
>
> What would be the right way to get the output I'm looking for?
>
> - Andy
>
> ________________________________
>
> CONFIDENTIALITY NOTICE: This e-mail transmission, and any documents, files or previous e-mail messages attached to it, may contain information that is confidential and/or legally privileged. If you are not the intended recipient, or a person responsible for delivering it to the intended recipient, please DO NOT disclose the contents to another person, store or copy the information in any medium, or use any of the information contained in or attached to this transmission for any purpose. If you have received this transmission in error, please immediately notify the sender by reply email or at privacy at plantronics.com, and destroy the original transmission and its attachments without reading or saving in any manner.
>
> For further information about Plantronics - the Company, its products, brands, partners, please visit our website www.plantronics.com.
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>


________________________________

CONFIDENTIALITY NOTICE: This e-mail transmission, and any documents, files or previous e-mail messages attached to it, may contain information that is confidential and/or legally privileged. If you are not the intended recipient, or a person responsible for delivering it to the intended recipient, please DO NOT disclose the contents to another person, store or copy the information in any medium, or use any of the information contained in or attached to this transmission for any purpose. If you have received this transmission in error, please immediately notify the sender by reply email or at privacy at plantronics.com, and destroy the original transmission and its attachments without reading or saving in any manner.

For further information about Plantronics - the Company, its products, brands, partners, please visit our website www.plantronics.com.

List: http://www.antlr.org/mailman/listinfo/antlr-interest
Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address


________________________________

CONFIDENTIALITY NOTICE: This e-mail transmission, and any documents, files or previous e-mail messages attached to it, may contain information that is confidential and/or legally privileged. If you are not the intended recipient, or a person responsible for delivering it to the intended recipient, please DO NOT disclose the contents to another person, store or copy the information in any medium, or use any of the information contained in or attached to this transmission for any purpose. If you have received this transmission in error, please immediately notify the sender by reply email or at privacy at plantronics.com, and destroy the original transmission and its attachments without reading or saving in any manner.

For further information about Plantronics - the Company, its products, brands, partners, please visit our website www.plantronics.com.

From michael.bedward at gmail.com  Thu Oct 27 20:57:59 2011
From: michael.bedward at gmail.com (Michael Bedward)
Date: Fri, 28 Oct 2011 14:57:59 +1100
Subject: [antlr-interest] Can someone send a simple working C#
	StringTemplate example? (I'm frustrated)
In-Reply-To: <92E9AB4D42199B4793CE24E094BAEE070E8941@USSCMB03.plt.plantronics.com>
References: <92E9AB4D42199B4793CE24E094BAEE070E87E3@USSCMB03.plt.plantronics.com>
	<CACJVtdNPqE2n=j=cPq-1ftjJR6z3zTA1R7U_+9=kKbg+RohHvg@mail.gmail.com>
	<92E9AB4D42199B4793CE24E094BAEE070E8941@USSCMB03.plt.plantronics.com>
Message-ID: <CACJVtdNyHzAKgrCm2K36bp+d-MNdfZ_E+2LmohAFJvKaXCwaeA@mail.gmail.com>

I don't use C# so can't help you there, but regarding StringTemplate
vs ST: the former is the class in version 3 of the library:
http://www.antlr.org/wiki/display/ST/StringTemplate+3+Documentation

while the latter is the new, improved, shiny class in the completely
re-written version 4:
http://www.antlr.org/wiki/display/ST4/StringTemplate+4+Documentation

Also, just a general comment on the frustration that you express.
Writing docs for any open source project of reasonable size is hard.
Keeping them up to date is harder. Worse still, while OS code
development is sometimes funded, docs are usually a labour of love.
I'm not involved in ANTLR or StringTemplate development but do work on
other OS projects and see similar complaints or expressions of anguish
about docs being out of date or contradictory all the time, but
getting people to actually help with the docs is nigh on impossible.
So... hint, hint :)

Michael


On 28 October 2011 14:38, Voelkel, Andy <andy.voelkel at plantronics.com> wrote:
> Hi,
>
> I've moved on from trying to get the C# version of Antlr working (successfully - with help from this list!) to trying to get StringTemplate working in the C# version. I've tried to "port" this example from Terence's book:
>
> import org.antlr.stringtemplate.*;
> ...
> StringTemplate hello = new StringTemplate("Hello <name>" );
> hello.setAttribute("name" , "World" );
> System.out.println(hello.toString());
>
> Seems easy enough, right? Well, given the version of the C# runtime I've got, StringTemplate seems to be named Template, and doesn't have a setAttribute method (or a SetAttribute method), and displays nonsensical output from the toString (actually ToString) method.
>
> I looked on the StringTemplate website, and the examples there don't even refer to a StringTemplate or a Template, they talk about an "ST" (for both Java and C#).
>
> Can someone point me at a simple example of a StringTemplate example (such as the above) that works with the C# runtime Antlr4.StringTemplate dll (version v2.0.50727)? I can probably go from there, using the forensic techniques I learned trying to figure out how the Java version of Antlr maps to the C# version.
>
> - Andy
>
> P.S. Editorial comment. These are really powerful tools, but the amount of out of date or missing documentation and examples on the websites is maddening. Thank god for this list, or I would have given up two weeks ago!
>
>
>
> -----Original Message-----
> From: Michael Bedward [mailto:michael.bedward at gmail.com]
> Sent: Thursday, October 27, 2011 5:18 PM
> To: Voelkel, Andy
> Cc: antlr-interest at antlr.org
> Subject: Re: [antlr-interest] What's the right way to do this?
>
> Hello Andy,
>
> Here is an example of doing this with stringtemplate v3:
>
> // A function call with comma-delimited list of args
> call(name, args) ::= <<
> <name>(<args; separator=", ">)
>>>
>
> You can see this usage on the stringtemplate cheat sheet:
> http://www.antlr.org/wiki/display/ST/StringTemplate+cheat+sheet
>
> Michael
>
>
> On 28 October 2011 09:26, Voelkel, Andy <andy.voelkel at plantronics.com> wrote:
>> Hi,
>>
>> I'm developing tools for generating various C source files from a simple DSL. I've got the lexing/parsing/tree-creation part of it working to my satisfaction, and am comfortable with my level of understanding (though I will continue to work my way all the way through Terence's book). But I'm confused about the best approach to generating one of the output files I need, which should look like this:
>>
>> toplevel name = {
>> ?{ // begin group1
>> ? ?{ // begin block1
>> ? ? ?item 1,
>> ? ? ?item 2
>> ? ?}, // end block1
>> ? ?{ // begin block2
>> ? ? ?item 1,
>> ? ? ?item 2
>> ? ?} // end block2
>> ?}, // end group1
>> ?{ // begin block3
>> ? ?item 1,
>> ? ?item 2,
>> ? ?item 3
>> ?}, // end block3
>> ?{ // begin group2
>> ? ?{ // begin block4
>> ? ? ?item 1,
>> ? ? ?item 2
>> ? ?}, // end block4
>> ? ?{ // begin block5
>> ? ? ?item 1,
>> ? ? ?item 2
>> ? ?} // end block5
>> ?} // end group2
>> };
>>
>> The problem is putting the "," characters on all elements in the nested structure except for the last one at that level, and I'm wondering what the best approach to the problem is. It seems like I could pass a "last one" parameter down to subrules when the item invoking the subrule is the last in the list of a rule, and use that as a way to avoid printing the ",". Alternatively, I get the feeling that this could be handled by the right StringTemplate magic, but I haven't found the right StringTemplate tutorials to get comfortable with this problem, which is obviously recursive, and where the items in a list are not all of the same type. The toplevel structure can contain groups or blocks, and groups can contain other groups:
>>
>> group: 'group'^ ID '{'! (block | group)+ '}'! ;
>> block: 'block'^ ID '{'! (assign)+ '}'! ;
>>
>> What would be the right way to get the output I'm looking for?
>>
>> - Andy
>>
>> ________________________________
>>
>> CONFIDENTIALITY NOTICE: This e-mail transmission, and any documents, files or previous e-mail messages attached to it, may contain information that is confidential and/or legally privileged. If you are not the intended recipient, or a person responsible for delivering it to the intended recipient, please DO NOT disclose the contents to another person, store or copy the information in any medium, or use any of the information contained in or attached to this transmission for any purpose. If you have received this transmission in error, please immediately notify the sender by reply email or at privacy at plantronics.com, and destroy the original transmission and its attachments without reading or saving in any manner.
>>
>> For further information about Plantronics - the Company, its products, brands, partners, please visit our website www.plantronics.com.
>>
>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>>
>
>
> ________________________________
>
> CONFIDENTIALITY NOTICE: This e-mail transmission, and any documents, files or previous e-mail messages attached to it, may contain information that is confidential and/or legally privileged. If you are not the intended recipient, or a person responsible for delivering it to the intended recipient, please DO NOT disclose the contents to another person, store or copy the information in any medium, or use any of the information contained in or attached to this transmission for any purpose. If you have received this transmission in error, please immediately notify the sender by reply email or at privacy at plantronics.com, and destroy the original transmission and its attachments without reading or saving in any manner.
>
> For further information about Plantronics - the Company, its products, brands, partners, please visit our website www.plantronics.com.
>

From andy.voelkel at plantronics.com  Thu Oct 27 21:31:22 2011
From: andy.voelkel at plantronics.com (Voelkel, Andy)
Date: Fri, 28 Oct 2011 04:31:22 +0000
Subject: [antlr-interest] C# StringTemplate,
	and being a contributor instead of just a mooch.
In-Reply-To: <CACJVtdNyHzAKgrCm2K36bp+d-MNdfZ_E+2LmohAFJvKaXCwaeA@mail.gmail.com>
References: <92E9AB4D42199B4793CE24E094BAEE070E87E3@USSCMB03.plt.plantronics.com>
	<CACJVtdNPqE2n=j=cPq-1ftjJR6z3zTA1R7U_+9=kKbg+RohHvg@mail.gmail.com>
	<92E9AB4D42199B4793CE24E094BAEE070E8941@USSCMB03.plt.plantronics.com>
	<CACJVtdNyHzAKgrCm2K36bp+d-MNdfZ_E+2LmohAFJvKaXCwaeA@mail.gmail.com>
Message-ID: <92E9AB4D42199B4793CE24E094BAEE070E8984@USSCMB03.plt.plantronics.com>

I did get your suggestion working in C#, it shows that what you suggest will indeed work:

namespace StringTemplateTest {
  class Program {
    static void Main(string[] args) {
      Template outer = new Template("{\n  <elems>\n}");
      Template inner = new Template("<names; separator = \", \n\"> ");
      string[] names = new string[3] {"one", "two", "three"};
      inner.Add("names", names);
      outer.Add("elems", inner);
      Console.WriteLine(outer.Render());
    }
  }
}

Regards your other comment: The updated documentation you point to shows outdated usages in the documentation. I completely understand the difficulty of keeping things up to date. I've offered to send converted examples that I wrote for ANTLR, from Terence's book, and I'd even put them up on the website if I could. I'm in a good position to help since I'm a beginner (at this stuff). Terence answered to send him an email with a zip file of my converted examples. So I did, and the email bounced. I wrote another email to him explaining that it bounced, figuring that maybe the attachments were a problem. That email didn't bounce (to my knowledge), but I got no answer.

I'd be happy to help!! It's a worthwhile cause. But how??

- Andy


-----Original Message-----
From: Michael Bedward [mailto:michael.bedward at gmail.com]
Sent: Thursday, October 27, 2011 8:58 PM
To: Voelkel, Andy
Cc: antlr-interest at antlr.org
Subject: Re: Can someone send a simple working C# StringTemplate example? (I'm frustrated)

I don't use C# so can't help you there, but regarding StringTemplate
vs ST: the former is the class in version 3 of the library:
http://www.antlr.org/wiki/display/ST/StringTemplate+3+Documentation

while the latter is the new, improved, shiny class in the completely
re-written version 4:
http://www.antlr.org/wiki/display/ST4/StringTemplate+4+Documentation

Also, just a general comment on the frustration that you express.
Writing docs for any open source project of reasonable size is hard.
Keeping them up to date is harder. Worse still, while OS code
development is sometimes funded, docs are usually a labour of love.
I'm not involved in ANTLR or StringTemplate development but do work on
other OS projects and see similar complaints or expressions of anguish
about docs being out of date or contradictory all the time, but
getting people to actually help with the docs is nigh on impossible.
So... hint, hint :)

Michael


On 28 October 2011 14:38, Voelkel, Andy <andy.voelkel at plantronics.com> wrote:
> Hi,
>
> I've moved on from trying to get the C# version of Antlr working (successfully - with help from this list!) to trying to get StringTemplate working in the C# version. I've tried to "port" this example from Terence's book:
>
> import org.antlr.stringtemplate.*;
> ...
> StringTemplate hello = new StringTemplate("Hello <name>" );
> hello.setAttribute("name" , "World" );
> System.out.println(hello.toString());
>
> Seems easy enough, right? Well, given the version of the C# runtime I've got, StringTemplate seems to be named Template, and doesn't have a setAttribute method (or a SetAttribute method), and displays nonsensical output from the toString (actually ToString) method.
>
> I looked on the StringTemplate website, and the examples there don't even refer to a StringTemplate or a Template, they talk about an "ST" (for both Java and C#).
>
> Can someone point me at a simple example of a StringTemplate example (such as the above) that works with the C# runtime Antlr4.StringTemplate dll (version v2.0.50727)? I can probably go from there, using the forensic techniques I learned trying to figure out how the Java version of Antlr maps to the C# version.
>
> - Andy
>
> P.S. Editorial comment. These are really powerful tools, but the amount of out of date or missing documentation and examples on the websites is maddening. Thank god for this list, or I would have given up two weeks ago!
>
>
>
> -----Original Message-----
> From: Michael Bedward [mailto:michael.bedward at gmail.com]
> Sent: Thursday, October 27, 2011 5:18 PM
> To: Voelkel, Andy
> Cc: antlr-interest at antlr.org
> Subject: Re: [antlr-interest] What's the right way to do this?
>
> Hello Andy,
>
> Here is an example of doing this with stringtemplate v3:
>
> // A function call with comma-delimited list of args
> call(name, args) ::= <<
> <name>(<args; separator=", ">)
>>>
>
> You can see this usage on the stringtemplate cheat sheet:
> http://www.antlr.org/wiki/display/ST/StringTemplate+cheat+sheet
>
> Michael
>
>
> On 28 October 2011 09:26, Voelkel, Andy <andy.voelkel at plantronics.com> wrote:
>> Hi,
>>
>> I'm developing tools for generating various C source files from a simple DSL. I've got the lexing/parsing/tree-creation part of it working to my satisfaction, and am comfortable with my level of understanding (though I will continue to work my way all the way through Terence's book). But I'm confused about the best approach to generating one of the output files I need, which should look like this:
>>
>> toplevel name = {
>>  { // begin group1
>>    { // begin block1
>>      item 1,
>>      item 2
>>    }, // end block1
>>    { // begin block2
>>      item 1,
>>      item 2
>>    } // end block2
>>  }, // end group1
>>  { // begin block3
>>    item 1,
>>    item 2,
>>    item 3
>>  }, // end block3
>>  { // begin group2
>>    { // begin block4
>>      item 1,
>>      item 2
>>    }, // end block4
>>    { // begin block5
>>      item 1,
>>      item 2
>>    } // end block5
>>  } // end group2
>> };
>>
>> The problem is putting the "," characters on all elements in the nested structure except for the last one at that level, and I'm wondering what the best approach to the problem is. It seems like I could pass a "last one" parameter down to subrules when the item invoking the subrule is the last in the list of a rule, and use that as a way to avoid printing the ",". Alternatively, I get the feeling that this could be handled by the right StringTemplate magic, but I haven't found the right StringTemplate tutorials to get comfortable with this problem, which is obviously recursive, and where the items in a list are not all of the same type. The toplevel structure can contain groups or blocks, and groups can contain other groups:
>>
>> group: 'group'^ ID '{'! (block | group)+ '}'! ;
>> block: 'block'^ ID '{'! (assign)+ '}'! ;
>>
>> What would be the right way to get the output I'm looking for?
>>
>> - Andy
>>
>> ________________________________
>>
>> CONFIDENTIALITY NOTICE: This e-mail transmission, and any documents, files or previous e-mail messages attached to it, may contain information that is confidential and/or legally privileged. If you are not the intended recipient, or a person responsible for delivering it to the intended recipient, please DO NOT disclose the contents to another person, store or copy the information in any medium, or use any of the information contained in or attached to this transmission for any purpose. If you have received this transmission in error, please immediately notify the sender by reply email or at privacy at plantronics.com, and destroy the original transmission and its attachments without reading or saving in any manner.
>>
>> For further information about Plantronics - the Company, its products, brands, partners, please visit our website www.plantronics.com.
>>
>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>>
>
>
> ________________________________
>
> CONFIDENTIALITY NOTICE: This e-mail transmission, and any documents, files or previous e-mail messages attached to it, may contain information that is confidential and/or legally privileged. If you are not the intended recipient, or a person responsible for delivering it to the intended recipient, please DO NOT disclose the contents to another person, store or copy the information in any medium, or use any of the information contained in or attached to this transmission for any purpose. If you have received this transmission in error, please immediately notify the sender by reply email or at privacy at plantronics.com, and destroy the original transmission and its attachments without reading or saving in any manner.
>
> For further information about Plantronics - the Company, its products, brands, partners, please visit our website www.plantronics.com.
>


________________________________

CONFIDENTIALITY NOTICE: This e-mail transmission, and any documents, files or previous e-mail messages attached to it, may contain information that is confidential and/or legally privileged. If you are not the intended recipient, or a person responsible for delivering it to the intended recipient, please DO NOT disclose the contents to another person, store or copy the information in any medium, or use any of the information contained in or attached to this transmission for any purpose. If you have received this transmission in error, please immediately notify the sender by reply email or at privacy at plantronics.com, and destroy the original transmission and its attachments without reading or saving in any manner.

For further information about Plantronics - the Company, its products, brands, partners, please visit our website www.plantronics.com.

From michael.bedward at gmail.com  Thu Oct 27 21:41:16 2011
From: michael.bedward at gmail.com (Michael Bedward)
Date: Fri, 28 Oct 2011 15:41:16 +1100
Subject: [antlr-interest] C# StringTemplate,
	and being a contributor instead of just a mooch.
In-Reply-To: <92E9AB4D42199B4793CE24E094BAEE070E8984@USSCMB03.plt.plantronics.com>
References: <92E9AB4D42199B4793CE24E094BAEE070E87E3@USSCMB03.plt.plantronics.com>
	<CACJVtdNPqE2n=j=cPq-1ftjJR6z3zTA1R7U_+9=kKbg+RohHvg@mail.gmail.com>
	<92E9AB4D42199B4793CE24E094BAEE070E8941@USSCMB03.plt.plantronics.com>
	<CACJVtdNyHzAKgrCm2K36bp+d-MNdfZ_E+2LmohAFJvKaXCwaeA@mail.gmail.com>
	<92E9AB4D42199B4793CE24E094BAEE070E8984@USSCMB03.plt.plantronics.com>
Message-ID: <CACJVtdP5SabXNnQJxBapDOnEv5YPmVB=sKJo=ZT1XOqb0tK9fg@mail.gmail.com>

On 28 October 2011 15:31, Voelkel, Andy <andy.voelkel at plantronics.com> wrote:
> I'd be happy to help!! It's a worthwhile cause. But how??
>

It's a wiki. Sign up, log in, share and enjoy !

Michael

From andy.voelkel at plantronics.com  Thu Oct 27 22:24:06 2011
From: andy.voelkel at plantronics.com (Voelkel, Andy)
Date: Fri, 28 Oct 2011 05:24:06 +0000
Subject: [antlr-interest] C# StringTemplate,
 and being a contributor instead of just a mooch.
In-Reply-To: <CACJVtdP5SabXNnQJxBapDOnEv5YPmVB=sKJo=ZT1XOqb0tK9fg@mail.gmail.com>
References: <92E9AB4D42199B4793CE24E094BAEE070E87E3@USSCMB03.plt.plantronics.com>
	<CACJVtdNPqE2n=j=cPq-1ftjJR6z3zTA1R7U_+9=kKbg+RohHvg@mail.gmail.com>
	<92E9AB4D42199B4793CE24E094BAEE070E8941@USSCMB03.plt.plantronics.com>
	<CACJVtdNyHzAKgrCm2K36bp+d-MNdfZ_E+2LmohAFJvKaXCwaeA@mail.gmail.com>
	<92E9AB4D42199B4793CE24E094BAEE070E8984@USSCMB03.plt.plantronics.com>
	<CACJVtdP5SabXNnQJxBapDOnEv5YPmVB=sKJo=ZT1XOqb0tK9fg@mail.gmail.com>
Message-ID: <92E9AB4D42199B4793CE24E094BAEE070E89A3@USSCMB03.plt.plantronics.com>

I didn't know it was that easy! I already fixed a couple things.

- Andy

-----Original Message-----
From: Michael Bedward [mailto:michael.bedward at gmail.com]
Sent: Thursday, October 27, 2011 9:41 PM
To: Voelkel, Andy
Cc: antlr-interest at antlr.org
Subject: Re: C# StringTemplate, and being a contributor instead of just a mooch.

On 28 October 2011 15:31, Voelkel, Andy <andy.voelkel at plantronics.com> wrote:
> I'd be happy to help!! It's a worthwhile cause. But how??
>

It's a wiki. Sign up, log in, share and enjoy !

Michael


________________________________

CONFIDENTIALITY NOTICE: This e-mail transmission, and any documents, files or previous e-mail messages attached to it, may contain information that is confidential and/or legally privileged. If you are not the intended recipient, or a person responsible for delivering it to the intended recipient, please DO NOT disclose the contents to another person, store or copy the information in any medium, or use any of the information contained in or attached to this transmission for any purpose. If you have received this transmission in error, please immediately notify the sender by reply email or at privacy at plantronics.com, and destroy the original transmission and its attachments without reading or saving in any manner.

For further information about Plantronics - the Company, its products, brands, partners, please visit our website www.plantronics.com.

From andy.voelkel at plantronics.com  Thu Oct 27 22:50:38 2011
From: andy.voelkel at plantronics.com (Voelkel, Andy)
Date: Fri, 28 Oct 2011 05:50:38 +0000
Subject: [antlr-interest] Producing multiple output file from a single AST -
	best strategy?
Message-ID: <92E9AB4D42199B4793CE24E094BAEE070E89EF@USSCMB03.plt.plantronics.com>

Hi,

I have a project where I have to produce multiple output files (C source files) from a single AST. It seems clear at this point that using StringTemplate to produce the output files makes the most sense. So how do I get multiple StringTemplate "streams" from a single AST? I can think two ways:


1.       Write separate tree grammars to produce the separate outputs, using built-in ANTLR-to-StringTemplate integration.

2.       Write one tree grammar, and use helper functions to build the separate outputs using manual creation of StringTemplates.

3.       Or is there another way?

Approach #1 has the advantage of being able to use the built in integration between ANTLR and StringTemplate. But the disadvantage is that if I change the AST structure, I have to change all the tree grammar files, rerun the code generation, etc. Right now I'm leaning towards the helper functions which construct StringTemplates manually. Does anyone have any advice? I'm assuming that I can't use ANTLR-StringTemplate integration and also produce multiple StringTemplates with a single tree grammar. Do I have this right?


-          Andy

________________________________

CONFIDENTIALITY NOTICE: This e-mail transmission, and any documents, files or previous e-mail messages attached to it, may contain information that is confidential and/or legally privileged. If you are not the intended recipient, or a person responsible for delivering it to the intended recipient, please DO NOT disclose the contents to another person, store or copy the information in any medium, or use any of the information contained in or attached to this transmission for any purpose. If you have received this transmission in error, please immediately notify the sender by reply email or at privacy at plantronics.com, and destroy the original transmission and its attachments without reading or saving in any manner.

For further information about Plantronics - the Company, its products, brands, partners, please visit our website www.plantronics.com.

From chwchw at gmx.de  Fri Oct 28 00:55:03 2011
From: chwchw at gmx.de (Christian)
Date: Fri, 28 Oct 2011 09:55:03 +0200
Subject: [antlr-interest] Fwd: Re: Rewrite only if rule returns non-empty
 result
In-Reply-To: <4EAA5F6C.2020104@gmx.de>
References: <4EAA5F6C.2020104@gmx.de>
Message-ID: <4EAA5FD7.5080206@gmx.de>

 Ok, I found my error. I did some sort of the following:

myrule: a=attributes? -> ^(ATTR $a);

The rewritten rule always expects something for a, I think. However, in
the original rule, a is optional. After appending a question mark to a
in the rewrite rule, all works fine.

So, is $a generally replaced by the rule without operators?

Am 27.10.2011 17:00, schrieb Trevor John Thompson:
> You are getting no response because your request makes no sense. You say
>>> I want to rewrite it only if unary_expr returns a non-empty result.
> However, unary_expr can only return a non-empty result, assuming cast_expression, pre_decrement_expression, etc. represent what their names suggest.
>
> The distinction you are drawing between unary_expr and unary_expression appears unmotivated and bizarre. You might start by giving examples of the input you are trying to match, and the corresponding trees you are trying to build.
>
> On 2011 Oct 27, at 05:12, Christian wrote:
>
>> Perhaps, you need more information about unary_expr:
>>
>> unary_expr
>>  : cast_expression
>>  | '+' unary_expression -> ^(POSITIVE unary_expression)
>>  | '-' unary_expression -> ^(NEGATIVE unary_expression)
>>  | '!' unary_expression
>>  | '~' unary_expression
>>  | PRE_INC unary_expression
>>  | pre_decrement_expression
>>  | primary_or_array_creation_expression '++'? '--'?
>>  | pointer_indirection_expression
>>  | addressof_expression
>>  ;
>>
>> Am 26.10.2011 12:29, schrieb Christian:
>>> Hi community,
>>>
>>> I have the following rule:
>>>
>>> unary_expression
>>>  : unary_expr -> ^(UNARY_EXPRESSION unary_expr)
>>>  ;
>>>
>>> I want to rewrite it only if unary_expr returns a non-empty result.
>>> Actually, I want to solve the
>>> org.antlr.runtime.tree.RewriteEmptyStreamException: rule unary_expr. I
>>> think, it is quite easy, but I am too new to ANTLR.
>>>
>>> Regards,
>>> Christian
>>>
>>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>>> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>>>
>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
> --
> Trevor John Thompson    (425) 246-4023
> tijet at me.com
> Quidquid Latine scriptum sit, altum videtur.
>
>



From chwchw at gmx.de  Fri Oct 28 01:02:02 2011
From: chwchw at gmx.de (Christian)
Date: Fri, 28 Oct 2011 10:02:02 +0200
Subject: [antlr-interest] Are token aliases possible?
Message-ID: <4EAA617A.8020504@gmx.de>

Hi community,

if there is a real token, say
    CLASS : 'class';
can a define an alias, say
    CLASS_DECL = CLASS
in some way?

Regards,
Christian

From researcher0x00 at gmail.com  Fri Oct 28 04:12:52 2011
From: researcher0x00 at gmail.com (Eric)
Date: Fri, 28 Oct 2011 07:12:52 -0400
Subject: [antlr-interest] Producing multiple output file from a single
 AST - best strategy?
In-Reply-To: <92E9AB4D42199B4793CE24E094BAEE070E89EF@USSCMB03.plt.plantronics.com>
References: <92E9AB4D42199B4793CE24E094BAEE070E89EF@USSCMB03.plt.plantronics.com>
Message-ID: <CAN45N10eHZ9cX77R4Xkh3PhOKMUWvj_pUdrRhAFb6AJJW0MEVg@mail.gmail.com>

On Fri, Oct 28, 2011 at 1:50 AM, Voelkel, Andy <andy.voelkel at plantronics.com
> wrote:

> Hi,
>
> I have a project where I have to produce multiple output files (C source
> files) from a single AST. It seems clear at this point that using
> StringTemplate to produce the output files makes the most sense. So how do I
> get multiple StringTemplate "streams" from a single AST? I can think two
> ways:
>
>
> 1.       Write separate tree grammars to produce the separate outputs,
> using built-in ANTLR-to-StringTemplate integration.
>
> 2.       Write one tree grammar, and use helper functions to build the
> separate outputs using manual creation of StringTemplates.
>
> 3.       Or is there another way?
>
> Approach #1 has the advantage of being able to use the built in integration
> between ANTLR and StringTemplate. But the disadvantage is that if I change
> the AST structure, I have to change all the tree grammar files, rerun the
> code generation, etc. Right now I'm leaning towards the helper functions
> which construct StringTemplates manually. Does anyone have any advice? I'm
> assuming that I can't use ANTLR-StringTemplate integration and also produce
> multiple StringTemplates with a single tree grammar. Do I have this right?
>
>
> -          Andy
>

Hi Andy,

Take a look at the cminus example in
http://www.antlr.org/download/examples-v3.tar.gz. Cminus demonstrates String
Templates by emitting source code for Python, Java, and Bytecode.



Hope that helps, Eric


>
> ________________________________
>
> CONFIDENTIALITY NOTICE: This e-mail transmission, and any documents, files
> or previous e-mail messages attached to it, may contain information that is
> confidential and/or legally privileged. If you are not the intended
> recipient, or a person responsible for delivering it to the intended
> recipient, please DO NOT disclose the contents to another person, store or
> copy the information in any medium, or use any of the information contained
> in or attached to this transmission for any purpose. If you have received
> this transmission in error, please immediately notify the sender by reply
> email or at privacy at plantronics.com, and destroy the original transmission
> and its attachments without reading or saving in any manner.
>
> For further information about Plantronics - the Company, its products,
> brands, partners, please visit our website www.plantronics.com.
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>

From s.barnett-cormack at lancaster.ac.uk  Fri Oct 28 04:19:42 2011
From: s.barnett-cormack at lancaster.ac.uk (Sam Barnett-Cormack)
Date: Fri, 28 Oct 2011 12:19:42 +0100
Subject: [antlr-interest] Are token aliases possible?
In-Reply-To: <4EAA617A.8020504@gmx.de>
References: <4EAA617A.8020504@gmx.de>
Message-ID: <4EAA8FCE.4070206@lancaster.ac.uk>

I think the immediate answer is, "why?"

On 28/10/2011 09:02, Christian wrote:
> Hi community,
>
> if there is a real token, say
>      CLASS : 'class';
> can a define an alias, say
>      CLASS_DECL = CLASS
> in some way?
>
> Regards,
> Christian
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address

From chwchw at gmx.de  Fri Oct 28 04:27:15 2011
From: chwchw at gmx.de (Christian)
Date: Fri, 28 Oct 2011 13:27:15 +0200
Subject: [antlr-interest] Are token aliases possible?
In-Reply-To: <4EAA8FCE.4070206@lancaster.ac.uk>
References: <4EAA617A.8020504@gmx.de> <4EAA8FCE.4070206@lancaster.ac.uk>
Message-ID: <4EAA9193.3090100@gmx.de>

CLASS is only the token name. However, CLASS_DECL represents the
semantics of what was parsed. It allows to be more consequent when
analyzing the generated AST by names like CLASS_DECL, METHOD_DECL,
FIELD_DECL etc.

Example:

switch (node.getType()) {
   case CsRewriteRulesParser.NAMESPACE_DECL:
      // TODO
      break;
   case CsRewriteRulesParser.METHOD_DECL:
      // TODO
      break;
   case CsRewriteRulesParser.CLASS_DECL:
      // TODO
      break;
}

It would be just another name for the integer constant CLASS.

Am 28.10.2011 13:19, schrieb Sam Barnett-Cormack:
> I think the immediate answer is, "why?"
>
> On 28/10/2011 09:02, Christian wrote:
>> Hi community,
>>
>> if there is a real token, say
>>      CLASS : 'class';
>> can a define an alias, say
>>      CLASS_DECL = CLASS
>> in some way?
>>
>> Regards,
>> Christian
>>
>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>> Unsubscribe:
>> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>


From s.barnett-cormack at lancaster.ac.uk  Fri Oct 28 04:34:27 2011
From: s.barnett-cormack at lancaster.ac.uk (Sam Barnett-Cormack)
Date: Fri, 28 Oct 2011 12:34:27 +0100
Subject: [antlr-interest] Are token aliases possible?
In-Reply-To: <4EAA9193.3090100@gmx.de>
References: <4EAA617A.8020504@gmx.de> <4EAA8FCE.4070206@lancaster.ac.uk>
	<4EAA9193.3090100@gmx.de>
Message-ID: <4EAA9343.6040007@lancaster.ac.uk>

I don't know for sure, buut my immediate thought is that it isn't likely 
to be possible (as tokens are generated without reference to parse 
context, and must be unambiguous except where code manually deals with 
the ambiguity). You could however create it as a dummy token name, and 
rewrite to it in the parser, such that the AST generated has a 'virtual' 
CLASS_DECL token generated from the 'real' CLASS token. Pretty sure 
there are examples of this in the wiki.

On 28/10/2011 12:27, Christian wrote:
> CLASS is only the token name. However, CLASS_DECL represents the
> semantics of what was parsed. It allows to be more consequent when
> analyzing the generated AST by names like CLASS_DECL, METHOD_DECL,
> FIELD_DECL etc.
>
> Example:
>
> switch (node.getType()) {
>     case CsRewriteRulesParser.NAMESPACE_DECL:
>        // TODO
>        break;
>     case CsRewriteRulesParser.METHOD_DECL:
>        // TODO
>        break;
>     case CsRewriteRulesParser.CLASS_DECL:
>        // TODO
>        break;
> }
>
> It would be just another name for the integer constant CLASS.
>
> Am 28.10.2011 13:19, schrieb Sam Barnett-Cormack:
>> I think the immediate answer is, "why?"
>>
>> On 28/10/2011 09:02, Christian wrote:
>>> Hi community,
>>>
>>> if there is a real token, say
>>>       CLASS : 'class';
>>> can a define an alias, say
>>>       CLASS_DECL = CLASS
>>> in some way?
>>>
>>> Regards,
>>> Christian
>>>
>>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>>> Unsubscribe:
>>> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>>
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address

From chwchw at gmx.de  Fri Oct 28 04:45:46 2011
From: chwchw at gmx.de (Christian)
Date: Fri, 28 Oct 2011 13:45:46 +0200
Subject: [antlr-interest] Are token aliases possible?
In-Reply-To: <4EAA9343.6040007@lancaster.ac.uk>
References: <4EAA617A.8020504@gmx.de> <4EAA8FCE.4070206@lancaster.ac.uk>
	<4EAA9193.3090100@gmx.de> <4EAA9343.6040007@lancaster.ac.uk>
Message-ID: <4EAA95EA.4040403@gmx.de>

Yes, I know that one can use rewrite rules. Thank you anyway. In some
cases however, I do not want to repeat the rules following the CLASS
token and write an arrow etc. In such cases, it is shorter to just
replace the CLASS by CLASS_DECL and add a few operators instead of a
rewrite rule.

As an example, I want to transform the following rule:

class_declaration
  : CLASS  type_or_generic   class_base?  
type_parameter_constraints_clauses?   class_body   ';'?

into

class_declaration
  : CLASS_DECL  type_or_generic   class_base?  
type_parameter_constraints_clauses?   class_body   ';'!?

versus

class_declaration
  : CLASS  type_or_generic   class_base?  
type_parameter_constraints_clauses?   class_body   ';'?
      -> ^(CLASS_DECL type_or_generic class_base?
type_parameter_constraints_clauses? class_body)
    ;

I think everyone, especially me, would prefer the first solution.

Am 28.10.2011 13:34, schrieb Sam Barnett-Cormack:
> I don't know for sure, buut my immediate thought is that it isn't
> likely to be possible (as tokens are generated without reference to
> parse context, and must be unambiguous except where code manually
> deals with the ambiguity). You could however create it as a dummy
> token name, and rewrite to it in the parser, such that the AST
> generated has a 'virtual' CLASS_DECL token generated from the 'real'
> CLASS token. Pretty sure there are examples of this in the wiki.
>
> On 28/10/2011 12:27, Christian wrote:
>> CLASS is only the token name. However, CLASS_DECL represents the
>> semantics of what was parsed. It allows to be more consequent when
>> analyzing the generated AST by names like CLASS_DECL, METHOD_DECL,
>> FIELD_DECL etc.
>>
>> Example:
>>
>> switch (node.getType()) {
>>     case CsRewriteRulesParser.NAMESPACE_DECL:
>>        // TODO
>>        break;
>>     case CsRewriteRulesParser.METHOD_DECL:
>>        // TODO
>>        break;
>>     case CsRewriteRulesParser.CLASS_DECL:
>>        // TODO
>>        break;
>> }
>>
>> It would be just another name for the integer constant CLASS.
>>
>> Am 28.10.2011 13:19, schrieb Sam Barnett-Cormack:
>>> I think the immediate answer is, "why?"
>>>
>>> On 28/10/2011 09:02, Christian wrote:
>>>> Hi community,
>>>>
>>>> if there is a real token, say
>>>>       CLASS : 'class';
>>>> can a define an alias, say
>>>>       CLASS_DECL = CLASS
>>>> in some way?
>>>>
>>>> Regards,
>>>> Christian
>>>>
>>>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>>>> Unsubscribe:
>>>> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>>>
>>
>>
>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>> Unsubscribe:
>> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>


From sharwell at pixelminegames.com  Fri Oct 28 06:50:31 2011
From: sharwell at pixelminegames.com (Sam Harwell)
Date: Fri, 28 Oct 2011 08:50:31 -0500
Subject: [antlr-interest] Are token aliases possible?
In-Reply-To: <4EAA95EA.4040403@gmx.de>
References: <4EAA617A.8020504@gmx.de>
	<4EAA8FCE.4070206@lancaster.ac.uk>	<4EAA9193.3090100@gmx.de>
	<4EAA9343.6040007@lancaster.ac.uk> <4EAA95EA.4040403@gmx.de>
Message-ID: <13b901cc9578$90163390$b0429ab0$@pixelminegames.com>

In the Java version, the rewrite syntax is the definitive way to specify the
type of a tree node.

In the newer versions of the C# port, you can specify tree node types as a
token option, so you could do this and be equivalent to your rewrite rule.
Note that I added a ^ as well; your first example did not include it but
that's what makes a particular node the root of the created tree. Since the
AST operators (^ and !) perform better in a number of ways than the rewrite
operators, I added this feature to allow me to use AST operators in a number
of places where I previously used rewrite syntax for the sole purpose of
changing a node type.

class_declaration
  : CLASS<CLASS_DECL>^  type_or_generic   class_base?  
type_parameter_constraints_clauses?   class_body   ';'!?


-----Original Message-----
From: antlr-interest-bounces at antlr.org
[mailto:antlr-interest-bounces at antlr.org] On Behalf Of Christian
Sent: Friday, October 28, 2011 6:46 AM
To: antlr-interest at antlr.org
Subject: Re: [antlr-interest] Are token aliases possible?

Yes, I know that one can use rewrite rules. Thank you anyway. In some cases
however, I do not want to repeat the rules following the CLASS token and
write an arrow etc. In such cases, it is shorter to just replace the CLASS
by CLASS_DECL and add a few operators instead of a rewrite rule.

As an example, I want to transform the following rule:

class_declaration
  : CLASS  type_or_generic   class_base?  
type_parameter_constraints_clauses?   class_body   ';'?

into

class_declaration
  : CLASS_DECL  type_or_generic   class_base?  
type_parameter_constraints_clauses?   class_body   ';'!?

versus

class_declaration
  : CLASS  type_or_generic   class_base?  
type_parameter_constraints_clauses?   class_body   ';'?
      -> ^(CLASS_DECL type_or_generic class_base?
type_parameter_constraints_clauses? class_body)
    ;

I think everyone, especially me, would prefer the first solution.

Am 28.10.2011 13:34, schrieb Sam Barnett-Cormack:
> I don't know for sure, buut my immediate thought is that it isn't 
> likely to be possible (as tokens are generated without reference to 
> parse context, and must be unambiguous except where code manually 
> deals with the ambiguity). You could however create it as a dummy 
> token name, and rewrite to it in the parser, such that the AST 
> generated has a 'virtual' CLASS_DECL token generated from the 'real'
> CLASS token. Pretty sure there are examples of this in the wiki.
>
> On 28/10/2011 12:27, Christian wrote:
>> CLASS is only the token name. However, CLASS_DECL represents the 
>> semantics of what was parsed. It allows to be more consequent when 
>> analyzing the generated AST by names like CLASS_DECL, METHOD_DECL, 
>> FIELD_DECL etc.
>>
>> Example:
>>
>> switch (node.getType()) {
>>     case CsRewriteRulesParser.NAMESPACE_DECL:
>>        // TODO
>>        break;
>>     case CsRewriteRulesParser.METHOD_DECL:
>>        // TODO
>>        break;
>>     case CsRewriteRulesParser.CLASS_DECL:
>>        // TODO
>>        break;
>> }
>>
>> It would be just another name for the integer constant CLASS.
>>
>> Am 28.10.2011 13:19, schrieb Sam Barnett-Cormack:
>>> I think the immediate answer is, "why?"
>>>
>>> On 28/10/2011 09:02, Christian wrote:
>>>> Hi community,
>>>>
>>>> if there is a real token, say
>>>>       CLASS : 'class';
>>>> can a define an alias, say
>>>>       CLASS_DECL = CLASS
>>>> in some way?
>>>>
>>>> Regards,
>>>> Christian
>>>>
>>>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>>>> Unsubscribe:
>>>> http://www.antlr.org/mailman/options/antlr-interest/your-email-addr
>>>> ess
>>>
>>
>>
>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>> Unsubscribe:
>> http://www.antlr.org/mailman/options/antlr-interest/your-email-addres
>> s
>


List: http://www.antlr.org/mailman/listinfo/antlr-interest
Unsubscribe:
http://www.antlr.org/mailman/options/antlr-interest/your-email-address


From s.barnett-cormack at lancaster.ac.uk  Fri Oct 28 07:38:44 2011
From: s.barnett-cormack at lancaster.ac.uk (Sam Barnett-Cormack)
Date: Fri, 28 Oct 2011 15:38:44 +0100
Subject: [antlr-interest] Are token aliases possible?
In-Reply-To: <13b901cc9578$90163390$b0429ab0$@pixelminegames.com>
References: <4EAA617A.8020504@gmx.de>
	<4EAA8FCE.4070206@lancaster.ac.uk>	<4EAA9193.3090100@gmx.de>
	<4EAA9343.6040007@lancaster.ac.uk> <4EAA95EA.4040403@gmx.de>
	<13b901cc9578$90163390$b0429ab0$@pixelminegames.com>
Message-ID: <4EAABE74.90706@lancaster.ac.uk>

That looks a very handy feature. I wonder if there's any chance of it 
arriving in the Java version?

Sam

On 28/10/2011 14:50, Sam Harwell wrote:
> In the Java version, the rewrite syntax is the definitive way to specify the
> type of a tree node.
>
> In the newer versions of the C# port, you can specify tree node types as a
> token option, so you could do this and be equivalent to your rewrite rule.
> Note that I added a ^ as well; your first example did not include it but
> that's what makes a particular node the root of the created tree. Since the
> AST operators (^ and !) perform better in a number of ways than the rewrite
> operators, I added this feature to allow me to use AST operators in a number
> of places where I previously used rewrite syntax for the sole purpose of
> changing a node type.
>
> class_declaration
>    : CLASS<CLASS_DECL>^  type_or_generic   class_base?
> type_parameter_constraints_clauses?   class_body   ';'!?
>
>
> -----Original Message-----
> From: antlr-interest-bounces at antlr.org
> [mailto:antlr-interest-bounces at antlr.org] On Behalf Of Christian
> Sent: Friday, October 28, 2011 6:46 AM
> To: antlr-interest at antlr.org
> Subject: Re: [antlr-interest] Are token aliases possible?
>
> Yes, I know that one can use rewrite rules. Thank you anyway. In some cases
> however, I do not want to repeat the rules following the CLASS token and
> write an arrow etc. In such cases, it is shorter to just replace the CLASS
> by CLASS_DECL and add a few operators instead of a rewrite rule.
>
> As an example, I want to transform the following rule:
>
> class_declaration
>    : CLASS  type_or_generic   class_base?
> type_parameter_constraints_clauses?   class_body   ';'?
>
> into
>
> class_declaration
>    : CLASS_DECL  type_or_generic   class_base?
> type_parameter_constraints_clauses?   class_body   ';'!?
>
> versus
>
> class_declaration
>    : CLASS  type_or_generic   class_base?
> type_parameter_constraints_clauses?   class_body   ';'?
>        ->  ^(CLASS_DECL type_or_generic class_base?
> type_parameter_constraints_clauses? class_body)
>      ;
>
> I think everyone, especially me, would prefer the first solution.
>
> Am 28.10.2011 13:34, schrieb Sam Barnett-Cormack:
>> I don't know for sure, buut my immediate thought is that it isn't
>> likely to be possible (as tokens are generated without reference to
>> parse context, and must be unambiguous except where code manually
>> deals with the ambiguity). You could however create it as a dummy
>> token name, and rewrite to it in the parser, such that the AST
>> generated has a 'virtual' CLASS_DECL token generated from the 'real'
>> CLASS token. Pretty sure there are examples of this in the wiki.
>>
>> On 28/10/2011 12:27, Christian wrote:
>>> CLASS is only the token name. However, CLASS_DECL represents the
>>> semantics of what was parsed. It allows to be more consequent when
>>> analyzing the generated AST by names like CLASS_DECL, METHOD_DECL,
>>> FIELD_DECL etc.
>>>
>>> Example:
>>>
>>> switch (node.getType()) {
>>>      case CsRewriteRulesParser.NAMESPACE_DECL:
>>>         // TODO
>>>         break;
>>>      case CsRewriteRulesParser.METHOD_DECL:
>>>         // TODO
>>>         break;
>>>      case CsRewriteRulesParser.CLASS_DECL:
>>>         // TODO
>>>         break;
>>> }
>>>
>>> It would be just another name for the integer constant CLASS.
>>>
>>> Am 28.10.2011 13:19, schrieb Sam Barnett-Cormack:
>>>> I think the immediate answer is, "why?"
>>>>
>>>> On 28/10/2011 09:02, Christian wrote:
>>>>> Hi community,
>>>>>
>>>>> if there is a real token, say
>>>>>        CLASS : 'class';
>>>>> can a define an alias, say
>>>>>        CLASS_DECL = CLASS
>>>>> in some way?
>>>>>
>>>>> Regards,
>>>>> Christian
>>>>>
>>>>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>>>>> Unsubscribe:
>>>>> http://www.antlr.org/mailman/options/antlr-interest/your-email-addr
>>>>> ess
>>>>
>>>
>>>
>>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>>> Unsubscribe:
>>> http://www.antlr.org/mailman/options/antlr-interest/your-email-addres
>>> s
>>
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address

From andy.voelkel at plantronics.com  Fri Oct 28 07:47:46 2011
From: andy.voelkel at plantronics.com (Voelkel, Andy)
Date: Fri, 28 Oct 2011 14:47:46 +0000
Subject: [antlr-interest] Producing multiple output file (at the same
 time) from a single AST - best strategy?
In-Reply-To: <CAN45N10eHZ9cX77R4Xkh3PhOKMUWvj_pUdrRhAFb6AJJW0MEVg@mail.gmail.com>
References: <92E9AB4D42199B4793CE24E094BAEE070E89EF@USSCMB03.plt.plantronics.com>
	<CAN45N10eHZ9cX77R4Xkh3PhOKMUWvj_pUdrRhAFb6AJJW0MEVg@mail.gmail.com>
Message-ID: <92E9AB4D42199B4793CE24E094BAEE070E8B21@USSCMB03.plt.plantronics.com>

I think maybe my original post was confusing. What I meant was is that I need to produce multiple output files from a single AST, not alternative output formats like in cminus. That is, I need to generate a structure definition header file, a structure initialization C file, etc. So ideally, a single run through a single tree grammar would produce multiple string template "streams".

I had one more thought. Is it possible to use ANTLR StringTemplate integration and produce more than one StringTemplate from a rule, if I explicitly declare the rule to have multiple StringValues as the rule return type?


-          Andy

From: Eric [mailto:researcher0x00 at gmail.com]
Sent: Friday, October 28, 2011 4:13 AM
To: Voelkel, Andy; ANTLR interest
Subject: Re: [antlr-interest] Producing multiple output file from a single AST - best strategy?


On Fri, Oct 28, 2011 at 1:50 AM, Voelkel, Andy <andy.voelkel at plantronics.com<mailto:andy.voelkel at plantronics.com>> wrote:
Hi,

I have a project where I have to produce multiple output files (C source files) from a single AST. It seems clear at this point that using StringTemplate to produce the output files makes the most sense. So how do I get multiple StringTemplate "streams" from a single AST? I can think two ways:


1.       Write separate tree grammars to produce the separate outputs, using built-in ANTLR-to-StringTemplate integration.

2.       Write one tree grammar, and use helper functions to build the separate outputs using manual creation of StringTemplates.

3.       Or is there another way?

Approach #1 has the advantage of being able to use the built in integration between ANTLR and StringTemplate. But the disadvantage is that if I change the AST structure, I have to change all the tree grammar files, rerun the code generation, etc. Right now I'm leaning towards the helper functions which construct StringTemplates manually. Does anyone have any advice? I'm assuming that I can't use ANTLR-StringTemplate integration and also produce multiple StringTemplates with a single tree grammar. Do I have this right?


-          Andy

Hi Andy,

Take a look at the cminus example in http://www.antlr.org/download/examples-v3.tar.gz. Cminus demonstrates String Templates by emitting source code for Python, Java, and Bytecode.



Hope that helps, Eric


________________________________

CONFIDENTIALITY NOTICE: This e-mail transmission, and any documents, files or previous e-mail messages attached to it, may contain information that is confidential and/or legally privileged. If you are not the intended recipient, or a person responsible for delivering it to the intended recipient, please DO NOT disclose the contents to another person, store or copy the information in any medium, or use any of the information contained in or attached to this transmission for any purpose. If you have received this transmission in error, please immediately notify the sender by reply email or at privacy at plantronics.com<mailto:privacy at plantronics.com>, and destroy the original transmission and its attachments without reading or saving in any manner.

For further information about Plantronics - the Company, its products, brands, partners, please visit our website www.plantronics.com<http://www.plantronics.com>.

List: http://www.antlr.org/mailman/listinfo/antlr-interest
Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address


________________________________

CONFIDENTIALITY NOTICE: This e-mail transmission, and any documents, files or previous e-mail messages attached to it, may contain information that is confidential and/or legally privileged. If you are not the intended recipient, or a person responsible for delivering it to the intended recipient, please DO NOT disclose the contents to another person, store or copy the information in any medium, or use any of the information contained in or attached to this transmission for any purpose. If you have received this transmission in error, please immediately notify the sender by reply email or at privacy at plantronics.com, and destroy the original transmission and its attachments without reading or saving in any manner.

For further information about Plantronics - the Company, its products, brands, partners, please visit our website www.plantronics.com.

From pink at odahoda.de  Fri Oct 28 08:56:46 2011
From: pink at odahoda.de (Benjamin Niemann)
Date: Fri, 28 Oct 2011 17:56:46 +0200
Subject: [antlr-interest] Antlr3.4 Python bugs, workarounds
In-Reply-To: <CAN51Nt4Dp7yMUSkNqYnrkMvthRB2p0UA4g4TB5DZhi-ywn0THA@mail.gmail.com>
References: <CAN51Nt60R=9DF1+BWvsnMQShLE7GRpXmm5o30DnZ+KLZq8duUA@mail.gmail.com>
	<CAN51Nt4Dp7yMUSkNqYnrkMvthRB2p0UA4g4TB5DZhi-ywn0THA@mail.gmail.com>
Message-ID: <CAE33G67XoyDyGcdL2YmsptmU0S_NyPfTHrb1zanA3Y0t8miDjA@mail.gmail.com>

On Fri, Oct 7, 2011 at 11:17 PM, Benjamin S Wolf <jokeserver at gmail.com> wrote:
> I've discovered two bugs in working with the Python target to generate lexers.
>
> The first is in that when supplying k, the generated code for special
> state transitions is invalid: the "elif" keyword is split across lines
> as "el\nif", so the python interpreter crashes upon reading "el".

That's been reported before, but I have problem reproducing it. Are
you using antlr-3.4-complete.jar (I can only see this problem with
that build) or did you build it yourself from antlr-3.4.tar.gz (or
something else completely)?

> I've
> been working around this in vim by running the following command in
> the generated file:
>
> :%s/\( \+\)el\n\1/\1el/
>
> (Replaces "el\n" preceded and followed with n spaces by n spaces
> followed by "el".)
>
> The second is in the Python antlr3 library. Calling getTokens() on a
> CommonTokenStream will return all but the last token. This is because
> the slice notation [start:stop] is inclusive on the left and exclusive
> on the right, but stop is set to len(self.tokens) - 1.
> http://www.antlr.org/api/Python/antlr3_8py-source.html#l01733
>
> This can be fixed by finding the following lines in getTokens() (in
> antlr3/streams.py):
>
> if stop is None or stop >= len(self.tokens):
> ? ?stop = len(self.tokens) - 1
>
> and changing them to
>
> if stop is None or stop > len(self.tokens):
> ? ?stop = len(self.tokens)
>
> or it can be worked around by using the tokens attribute directly.

Will have a look at that, thanks for reporting.

-Ben


>
> --Ben
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>

From dawood at us.ibm.com  Fri Oct 28 09:27:48 2011
From: dawood at us.ibm.com (David Wood)
Date: Fri, 28 Oct 2011 12:27:48 -0400
Subject: [antlr-interest] NPE parsing tree grammar
In-Reply-To: <8C54F2A9-A18A-4D34-97EA-47DE7F61DAD5@cs.usfca.edu>
References: <OF9DEB9E4C.A4A426E5-ON85257936.0061A0B4-85257936.0061C3ED@us.ibm.com>
	<8C54F2A9-A18A-4D34-97EA-47DE7F61DAD5@cs.usfca.edu>
Message-ID: <OF86AC2001.2607B0DF-ON85257937.005A2251-85257937.005A7014@us.ibm.com>

Short answer is no, unless there is a pre-built jar of the latest and 
greatest.  Do you know if there is a change to my grammars that might 
workaround this problem?

David Wood 
Computing Systems for Wireless Networks
IBM TJ Watson Research Center
dawood at us.ibm.com
914-784-5123 (office), 914-396-6515 (mobile)




From:   Terence Parr <parrt at cs.usfca.edu>
To:     David Wood/Watson/IBM at IBMUS
Cc:     antlr-interest at antlr.org
Date:   10/27/2011 03:27 PM
Subject:        Re: [antlr-interest] NPE parsing tree grammar



works in latest v3 main trunk. can u grab from depot/...on site?
T
On Oct 27, 2011, at 10:47 AM, David Wood wrote:

> I would submit a bug, but I can't find a JIRA admin on the site to 
create 
> me an account.
> 
> Exception in thread "main" java.lang.NullPointerException
>        at org.antlr.runtime.tree.BaseTreeAdaptor.becomeRoot(
> BaseTreeAdaptor.java:145)
>        at 
> com.ibm.watson.dsm.parser.dsm.antlr.DSMTreeGrammar.relationalExpression(
> DSMTreeGrammar.java:3058)
>        at 
> com.ibm.watson.dsm.parser.dsm.antlr.DSMTreeGrammar.equalityExpression(
> DSMTreeGrammar.java:2920)
>        at 
> com.ibm.watson.dsm.parser.dsm.antlr.DSMTreeGrammar.andExpression(
> DSMTreeGrammar.java:2819)
>        at 
> 
com.ibm.watson.dsm.parser.dsm.antlr.DSMTreeGrammar.exclusiveOrExpression(
> DSMTreeGrammar.java:2718)
>        at 
> 
com.ibm.watson.dsm.parser.dsm.antlr.DSMTreeGrammar.inclusiveOrExpression(
> DSMTreeGrammar.java:2617)
>        at 
> 
com.ibm.watson.dsm.parser.dsm.antlr.DSMTreeGrammar.conditionalAndExpression(
> DSMTreeGrammar.java:2516)
>        at 
> 
com.ibm.watson.dsm.parser.dsm.antlr.DSMTreeGrammar.conditionalOrExpression(
> DSMTreeGrammar.java:2415)
>        at com.ibm.watson.dsm.parser.dsm.antlr.DSMTreeGrammar.expression(
> DSMTreeGrammar.java:2355)
>        at 
> 
com.ibm.watson.dsm.parser.dsm.antlr.DSMTreeGrammar.conditionalExpression(
> DSMTreeGrammar.java:2293)
>        at com.ibm.watson.dsm.parser.dsm.antlr.DSMTreeGrammar.rule(
> DSMTreeGrammar.java:1338)
>        at 
> com.ibm.watson.dsm.parser.dsm.antlr.DSMTreeGrammar.ruleStatement(
> DSMTreeGrammar.java:1230)
>        at com.ibm.watson.dsm.parser.dsm.antlr.DSMTreeGrammar.ruleSet(
> DSMTreeGrammar.java:1155)
>        at com.ibm.watson.dsm.parser.dsm.antlr.DSMTreeGrammar.root(
> DSMTreeGrammar.java:170)
>        at 
com.ibm.watson.dsm.parser.dsm.DSMParser.parse(DSMParser.java:63
> )
>        at 
com.ibm.watson.dsm.parser.dsm.DSMParser.main(DSMParser.java:79)
> 
> 
> 
> David Wood 
> Computing Systems for Wireless Networks
> IBM TJ Watson Research Center
> dawood at us.ibm.com
> 914-784-5123 (office), 914-396-6515 (mobile)
> <DSMGrammar.g><DSMTreeGrammar.g><DSMParser.java>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: 
http://www.antlr.org/mailman/options/antlr-interest/your-email-address



From andy.voelkel at plantronics.com  Fri Oct 28 10:01:26 2011
From: andy.voelkel at plantronics.com (Voelkel, Andy)
Date: Fri, 28 Oct 2011 17:01:26 +0000
Subject: [antlr-interest] tool version mismatch for C# target??
Message-ID: <92E9AB4D42199B4793CE24E094BAEE070E8C3C@USSCMB03.plt.plantronics.com>

Hi,

I'm starting to use the built in StringTemplate generation feature of ANTLR (see version below). It generates the following code near the beginning of the output file:

using Antlr3.ST;
using Antlr3.ST.Language;
[System.CodeDom.Compiler.GeneratedCode("ANTLR", "3.4.1.9004")]

But the version of StringTemplate I got with this same "release" is Antlr4.StringTemplate, not Antlr3.ST.

How do I fix this up?


-          Andy

________________________________

CONFIDENTIALITY NOTICE: This e-mail transmission, and any documents, files or previous e-mail messages attached to it, may contain information that is confidential and/or legally privileged. If you are not the intended recipient, or a person responsible for delivering it to the intended recipient, please DO NOT disclose the contents to another person, store or copy the information in any medium, or use any of the information contained in or attached to this transmission for any purpose. If you have received this transmission in error, please immediately notify the sender by reply email or at privacy at plantronics.com, and destroy the original transmission and its attachments without reading or saving in any manner.

For further information about Plantronics - the Company, its products, brands, partners, please visit our website www.plantronics.com.

From jimi at temporal-wave.com  Fri Oct 28 10:34:16 2011
From: jimi at temporal-wave.com (Jim Idle)
Date: Fri, 28 Oct 2011 10:34:16 -0700
Subject: [antlr-interest] Are token aliases possible?
In-Reply-To: <4EAA9193.3090100@gmx.de>
References: <4EAA617A.8020504@gmx.de> <4EAA8FCE.4070206@lancaster.ac.uk>
	<4EAA9193.3090100@gmx.de>
Message-ID: <aa02f4d459d4823f47caa22f1e0b5717@mail.gmail.com>

Don't confuse real tokens with what you put in the tree. Just rewrite
using an imaginary token once you disambiguate the declaration. Also, make
sure that you left factor qualifiers and things like that. Also, remember
that these are all type declarations. See here for some pointers:

http://www.temporal-wave.com/index.php?option=com_psrrun&view=psrrun&Itemi
d=58



Jim

> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of Christian
> Sent: Friday, October 28, 2011 4:27 AM
> Cc: antlr-interest at antlr.org
> Subject: Re: [antlr-interest] Are token aliases possible?
>
> CLASS is only the token name. However, CLASS_DECL represents the
> semantics of what was parsed. It allows to be more consequent when
> analyzing the generated AST by names like CLASS_DECL, METHOD_DECL,
> FIELD_DECL etc.
>
> Example:
>
> switch (node.getType()) {
>    case CsRewriteRulesParser.NAMESPACE_DECL:
>       // TODO
>       break;
>    case CsRewriteRulesParser.METHOD_DECL:
>       // TODO
>       break;
>    case CsRewriteRulesParser.CLASS_DECL:
>       // TODO
>       break;
> }
>
> It would be just another name for the integer constant CLASS.
>
> Am 28.10.2011 13:19, schrieb Sam Barnett-Cormack:
> > I think the immediate answer is, "why?"
> >
> > On 28/10/2011 09:02, Christian wrote:
> >> Hi community,
> >>
> >> if there is a real token, say
> >>      CLASS : 'class';
> >> can a define an alias, say
> >>      CLASS_DECL = CLASS
> >> in some way?
> >>
> >> Regards,
> >> Christian
> >>
> >> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> >> Unsubscribe:
> >> http://www.antlr.org/mailman/options/antlr-interest/your-email-
> addres
> >> s
> >
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
> email-address

From jimi at temporal-wave.com  Fri Oct 28 10:35:00 2011
From: jimi at temporal-wave.com (Jim Idle)
Date: Fri, 28 Oct 2011 10:35:00 -0700
Subject: [antlr-interest] Are token aliases possible?
In-Reply-To: <4EAA95EA.4040403@gmx.de>
References: <4EAA617A.8020504@gmx.de> <4EAA8FCE.4070206@lancaster.ac.uk>
	<4EAA9193.3090100@gmx.de> <4EAA9343.6040007@lancaster.ac.uk>
	<4EAA95EA.4040403@gmx.de>
Message-ID: <ae15c3a0cd5967268d94d04c73e791bf@mail.gmail.com>

Get a reference to the token and just set the type property.

Jim

> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of Christian
> Sent: Friday, October 28, 2011 4:46 AM
> To: antlr-interest at antlr.org
> Subject: Re: [antlr-interest] Are token aliases possible?
>
> Yes, I know that one can use rewrite rules. Thank you anyway. In some
> cases however, I do not want to repeat the rules following the CLASS
> token and write an arrow etc. In such cases, it is shorter to just
> replace the CLASS by CLASS_DECL and add a few operators instead of a
> rewrite rule.
>
> As an example, I want to transform the following rule:
>
> class_declaration
>   : CLASS  type_or_generic   class_base?
> type_parameter_constraints_clauses?   class_body   ';'?
>
> into
>
> class_declaration
>   : CLASS_DECL  type_or_generic   class_base?
> type_parameter_constraints_clauses?   class_body   ';'!?
>
> versus
>
> class_declaration
>   : CLASS  type_or_generic   class_base?
> type_parameter_constraints_clauses?   class_body   ';'?
>       -> ^(CLASS_DECL type_or_generic class_base?
> type_parameter_constraints_clauses? class_body)
>     ;
>
> I think everyone, especially me, would prefer the first solution.
>
> Am 28.10.2011 13:34, schrieb Sam Barnett-Cormack:
> > I don't know for sure, buut my immediate thought is that it isn't
> > likely to be possible (as tokens are generated without reference to
> > parse context, and must be unambiguous except where code manually
> > deals with the ambiguity). You could however create it as a dummy
> > token name, and rewrite to it in the parser, such that the AST
> > generated has a 'virtual' CLASS_DECL token generated from the 'real'
> > CLASS token. Pretty sure there are examples of this in the wiki.
> >
> > On 28/10/2011 12:27, Christian wrote:
> >> CLASS is only the token name. However, CLASS_DECL represents the
> >> semantics of what was parsed. It allows to be more consequent when
> >> analyzing the generated AST by names like CLASS_DECL, METHOD_DECL,
> >> FIELD_DECL etc.
> >>
> >> Example:
> >>
> >> switch (node.getType()) {
> >>     case CsRewriteRulesParser.NAMESPACE_DECL:
> >>        // TODO
> >>        break;
> >>     case CsRewriteRulesParser.METHOD_DECL:
> >>        // TODO
> >>        break;
> >>     case CsRewriteRulesParser.CLASS_DECL:
> >>        // TODO
> >>        break;
> >> }
> >>
> >> It would be just another name for the integer constant CLASS.
> >>
> >> Am 28.10.2011 13:19, schrieb Sam Barnett-Cormack:
> >>> I think the immediate answer is, "why?"
> >>>
> >>> On 28/10/2011 09:02, Christian wrote:
> >>>> Hi community,
> >>>>
> >>>> if there is a real token, say
> >>>>       CLASS : 'class';
> >>>> can a define an alias, say
> >>>>       CLASS_DECL = CLASS
> >>>> in some way?
> >>>>
> >>>> Regards,
> >>>> Christian
> >>>>
> >>>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> >>>> Unsubscribe:
> >>>> http://www.antlr.org/mailman/options/antlr-interest/your-email-
> addr
> >>>> ess
> >>>
> >>
> >>
> >> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> >> Unsubscribe:
> >> http://www.antlr.org/mailman/options/antlr-interest/your-email-
> addres
> >> s
> >
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
> email-address

From jimi at temporal-wave.com  Fri Oct 28 10:36:58 2011
From: jimi at temporal-wave.com (Jim Idle)
Date: Fri, 28 Oct 2011 10:36:58 -0700
Subject: [antlr-interest] Producing multiple output file (at the same
 time) from a single AST - best strategy?
In-Reply-To: <92E9AB4D42199B4793CE24E094BAEE070E8B21@USSCMB03.plt.plantronics.com>
References: <92E9AB4D42199B4793CE24E094BAEE070E89EF@USSCMB03.plt.plantronics.com>
	<CAN45N10eHZ9cX77R4Xkh3PhOKMUWvj_pUdrRhAFb6AJJW0MEVg@mail.gmail.com>
	<92E9AB4D42199B4793CE24E094BAEE070E8B21@USSCMB03.plt.plantronics.com>
Message-ID: <5109d7803219626f81cfc0920804383c@mail.gmail.com>

The built in return type $st has only a single template, but:

a
returns [StringTemplate x, StringTemplate y ....


Is basically the same thing done manually.


Jim

> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of Voelkel, Andy
> Sent: Friday, October 28, 2011 7:48 AM
> To: Eric; ANTLR interest
> Subject: Re: [antlr-interest] Producing multiple output file (at the
> same time) from a single AST - best strategy?
>
> I think maybe my original post was confusing. What I meant was is that
> I need to produce multiple output files from a single AST, not
> alternative output formats like in cminus. That is, I need to generate
> a structure definition header file, a structure initialization C file,
> etc. So ideally, a single run through a single tree grammar would
> produce multiple string template "streams".
>
> I had one more thought. Is it possible to use ANTLR StringTemplate
> integration and produce more than one StringTemplate from a rule, if I
> explicitly declare the rule to have multiple StringValues as the rule
> return type?
>
>
> -          Andy
>
> From: Eric [mailto:researcher0x00 at gmail.com]
> Sent: Friday, October 28, 2011 4:13 AM
> To: Voelkel, Andy; ANTLR interest
> Subject: Re: [antlr-interest] Producing multiple output file from a
> single AST - best strategy?
>
>
> On Fri, Oct 28, 2011 at 1:50 AM, Voelkel, Andy
> <andy.voelkel at plantronics.com<mailto:andy.voelkel at plantronics.com>>
> wrote:
> Hi,
>
> I have a project where I have to produce multiple output files (C
> source files) from a single AST. It seems clear at this point that
> using StringTemplate to produce the output files makes the most sense.
> So how do I get multiple StringTemplate "streams" from a single AST? I
> can think two ways:
>
>
> 1.       Write separate tree grammars to produce the separate outputs,
> using built-in ANTLR-to-StringTemplate integration.
>
> 2.       Write one tree grammar, and use helper functions to build the
> separate outputs using manual creation of StringTemplates.
>
> 3.       Or is there another way?
>
> Approach #1 has the advantage of being able to use the built in
> integration between ANTLR and StringTemplate. But the disadvantage is
> that if I change the AST structure, I have to change all the tree
> grammar files, rerun the code generation, etc. Right now I'm leaning
> towards the helper functions which construct StringTemplates manually.
> Does anyone have any advice? I'm assuming that I can't use ANTLR-
> StringTemplate integration and also produce multiple StringTemplates
> with a single tree grammar. Do I have this right?
>
>
> -          Andy
>
> Hi Andy,
>
> Take a look at the cminus example in
> http://www.antlr.org/download/examples-v3.tar.gz. Cminus demonstrates
> String Templates by emitting source code for Python, Java, and
> Bytecode.
>
>
>
> Hope that helps, Eric
>
>
> ________________________________
>
> CONFIDENTIALITY NOTICE: This e-mail transmission, and any documents,
> files or previous e-mail messages attached to it, may contain
> information that is confidential and/or legally privileged. If you are
> not the intended recipient, or a person responsible for delivering it
> to the intended recipient, please DO NOT disclose the contents to
> another person, store or copy the information in any medium, or use any
> of the information contained in or attached to this transmission for
> any purpose. If you have received this transmission in error, please
> immediately notify the sender by reply email or at
> privacy at plantronics.com<mailto:privacy at plantronics.com>, and destroy
> the original transmission and its attachments without reading or saving
> in any manner.
>
> For further information about Plantronics - the Company, its products,
> brands, partners, please visit our website
> www.plantronics.com<http://www.plantronics.com>.
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
> email-address
>
>
> ________________________________
>
> CONFIDENTIALITY NOTICE: This e-mail transmission, and any documents,
> files or previous e-mail messages attached to it, may contain
> information that is confidential and/or legally privileged. If you are
> not the intended recipient, or a person responsible for delivering it
> to the intended recipient, please DO NOT disclose the contents to
> another person, store or copy the information in any medium, or use any
> of the information contained in or attached to this transmission for
> any purpose. If you have received this transmission in error, please
> immediately notify the sender by reply email or at
> privacy at plantronics.com, and destroy the original transmission and its
> attachments without reading or saving in any manner.
>
> For further information about Plantronics - the Company, its products,
> brands, partners, please visit our website www.plantronics.com.
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
> email-address

From bgeffon at linkedin.com  Fri Oct 28 10:51:06 2011
From: bgeffon at linkedin.com (Brian Geffon)
Date: Fri, 28 Oct 2011 17:51:06 +0000
Subject: [antlr-interest] Predicates inside a + block
Message-ID: <E4683BAFDD8251489C3CBFFF1ADEEB7D26D6CBD1@ESV4-EXC02.linkedin.biz>

Hi, I'm trying to something like this:


loop_section
	@init {
		boolean sectionComplete = false;
	}
	    : LD POUND section_start_tag RD 
	         (
	         	 section_end_tag { sectionComplete = true; }
	         	| { !sectionComplete }? body
	         )+
	    ;

The reason i'm using the predicate is because body can actually match a section_end_tag (token by token), so I would prefer to match second_end_tag fully and then if that fails to advance to matching a body tag. However, when I do this it fails with a cannot find symbol error. If I remove the + from the block it works, any suggestions? The exact error is: [10:49:50]         if ( !(evalPredicate( !sectionComplete ," !sectionComplete ")) ) {

Thanks.
Brian

From sharwell at pixelminegames.com  Fri Oct 28 10:52:28 2011
From: sharwell at pixelminegames.com (Sam Harwell)
Date: Fri, 28 Oct 2011 12:52:28 -0500
Subject: [antlr-interest] tool version mismatch for C# target??
In-Reply-To: <92E9AB4D42199B4793CE24E094BAEE070E8C3C@USSCMB03.plt.plantronics.com>
References: <92E9AB4D42199B4793CE24E094BAEE070E8C3C@USSCMB03.plt.plantronics.com>
Message-ID: <000c01cc959a$5c901370$15b03a50$@pixelminegames.com>

Hi Andy,

I just checked the Wiki and the downloads, and see the inconsistency.
ANTLR.exe uses StringTemplate for code generation, but now only depends on
ST4. I ended up removing ST3 from the Bootstrap download as a result.

You can download ST3 as a separate download from the wiki:
http://www.antlr.org/wiki/display/ANTLR3/Antlr3CSharpReleases

Sam

-----Original Message-----
From: antlr-interest-bounces at antlr.org
[mailto:antlr-interest-bounces at antlr.org] On Behalf Of Voelkel, Andy
Sent: Friday, October 28, 2011 12:01 PM
To: ANTLR interest
Subject: [antlr-interest] tool version mismatch for C# target??

Hi,

I'm starting to use the built in StringTemplate generation feature of ANTLR
(see version below). It generates the following code near the beginning of
the output file:

using Antlr3.ST;
using Antlr3.ST.Language;
[System.CodeDom.Compiler.GeneratedCode("ANTLR", "3.4.1.9004")]

But the version of StringTemplate I got with this same "release" is
Antlr4.StringTemplate, not Antlr3.ST.

How do I fix this up?


-          Andy

________________________________

CONFIDENTIALITY NOTICE: This e-mail transmission, and any documents, files
or previous e-mail messages attached to it, may contain information that is
confidential and/or legally privileged. If you are not the intended
recipient, or a person responsible for delivering it to the intended
recipient, please DO NOT disclose the contents to another person, store or
copy the information in any medium, or use any of the information contained
in or attached to this transmission for any purpose. If you have received
this transmission in error, please immediately notify the sender by reply
email or at privacy at plantronics.com, and destroy the original transmission
and its attachments without reading or saving in any manner.

For further information about Plantronics - the Company, its products,
brands, partners, please visit our website www.plantronics.com.

List: http://www.antlr.org/mailman/listinfo/antlr-interest
Unsubscribe:
http://www.antlr.org/mailman/options/antlr-interest/your-email-address


From andy.voelkel at plantronics.com  Fri Oct 28 11:11:08 2011
From: andy.voelkel at plantronics.com (Voelkel, Andy)
Date: Fri, 28 Oct 2011 18:11:08 +0000
Subject: [antlr-interest] tool version mismatch for C# target??
In-Reply-To: <000c01cc959a$5c901370$15b03a50$@pixelminegames.com>
References: <92E9AB4D42199B4793CE24E094BAEE070E8C3C@USSCMB03.plt.plantronics.com>
	<000c01cc959a$5c901370$15b03a50$@pixelminegames.com>
Message-ID: <92E9AB4D42199B4793CE24E094BAEE070E8CB4@USSCMB03.plt.plantronics.com>

Hi Sam,

Is there a version or Antlr3.exe that produces code which uses Antlr4.StringTemplate? That would the ideal, I would think.

- Andy

-----Original Message-----
From: Sam Harwell [mailto:sharwell at pixelminegames.com]
Sent: Friday, October 28, 2011 10:52 AM
To: Voelkel, Andy; 'ANTLR interest'
Subject: RE: [antlr-interest] tool version mismatch for C# target??

Hi Andy,

I just checked the Wiki and the downloads, and see the inconsistency.
ANTLR.exe uses StringTemplate for code generation, but now only depends on
ST4. I ended up removing ST3 from the Bootstrap download as a result.

You can download ST3 as a separate download from the wiki:
http://www.antlr.org/wiki/display/ANTLR3/Antlr3CSharpReleases

Sam

-----Original Message-----
From: antlr-interest-bounces at antlr.org
[mailto:antlr-interest-bounces at antlr.org] On Behalf Of Voelkel, Andy
Sent: Friday, October 28, 2011 12:01 PM
To: ANTLR interest
Subject: [antlr-interest] tool version mismatch for C# target??

Hi,

I'm starting to use the built in StringTemplate generation feature of ANTLR
(see version below). It generates the following code near the beginning of
the output file:

using Antlr3.ST;
using Antlr3.ST.Language;
[System.CodeDom.Compiler.GeneratedCode("ANTLR", "3.4.1.9004")]

But the version of StringTemplate I got with this same "release" is
Antlr4.StringTemplate, not Antlr3.ST.

How do I fix this up?


-          Andy

________________________________

CONFIDENTIALITY NOTICE: This e-mail transmission, and any documents, files
or previous e-mail messages attached to it, may contain information that is
confidential and/or legally privileged. If you are not the intended
recipient, or a person responsible for delivering it to the intended
recipient, please DO NOT disclose the contents to another person, store or
copy the information in any medium, or use any of the information contained
in or attached to this transmission for any purpose. If you have received
this transmission in error, please immediately notify the sender by reply
email or at privacy at plantronics.com, and destroy the original transmission
and its attachments without reading or saving in any manner.

For further information about Plantronics - the Company, its products,
brands, partners, please visit our website www.plantronics.com.

List: http://www.antlr.org/mailman/listinfo/antlr-interest
Unsubscribe:
http://www.antlr.org/mailman/options/antlr-interest/your-email-address



________________________________

CONFIDENTIALITY NOTICE: This e-mail transmission, and any documents, files or previous e-mail messages attached to it, may contain information that is confidential and/or legally privileged. If you are not the intended recipient, or a person responsible for delivering it to the intended recipient, please DO NOT disclose the contents to another person, store or copy the information in any medium, or use any of the information contained in or attached to this transmission for any purpose. If you have received this transmission in error, please immediately notify the sender by reply email or at privacy at plantronics.com, and destroy the original transmission and its attachments without reading or saving in any manner.

For further information about Plantronics - the Company, its products, brands, partners, please visit our website www.plantronics.com.

From sharwell at pixelminegames.com  Fri Oct 28 11:45:04 2011
From: sharwell at pixelminegames.com (Sam Harwell)
Date: Fri, 28 Oct 2011 13:45:04 -0500
Subject: [antlr-interest] tool version mismatch for C# target??
In-Reply-To: <92E9AB4D42199B4793CE24E094BAEE070E8CB4@USSCMB03.plt.plantronics.com>
References: <92E9AB4D42199B4793CE24E094BAEE070E8C3C@USSCMB03.plt.plantronics.com>
	<000c01cc959a$5c901370$15b03a50$@pixelminegames.com>
	<92E9AB4D42199B4793CE24E094BAEE070E8CB4@USSCMB03.plt.plantronics.com>
Message-ID: <001501cc95a1$b5b8c440$212a4cc0$@pixelminegames.com>

No, as far as I know Antlr 3 will always produce code for ST3. ANTLR 4 will
produce code for ST4 by default.

Sam

-----Original Message-----
From: Voelkel, Andy [mailto:andy.voelkel at plantronics.com] 
Sent: Friday, October 28, 2011 1:11 PM
To: Sam Harwell; 'ANTLR interest'
Subject: RE: [antlr-interest] tool version mismatch for C# target??

Hi Sam,

Is there a version or Antlr3.exe that produces code which uses
Antlr4.StringTemplate? That would the ideal, I would think.

- Andy

-----Original Message-----
From: Sam Harwell [mailto:sharwell at pixelminegames.com]
Sent: Friday, October 28, 2011 10:52 AM
To: Voelkel, Andy; 'ANTLR interest'
Subject: RE: [antlr-interest] tool version mismatch for C# target??

Hi Andy,

I just checked the Wiki and the downloads, and see the inconsistency.
ANTLR.exe uses StringTemplate for code generation, but now only depends on
ST4. I ended up removing ST3 from the Bootstrap download as a result.

You can download ST3 as a separate download from the wiki:
http://www.antlr.org/wiki/display/ANTLR3/Antlr3CSharpReleases

Sam

-----Original Message-----
From: antlr-interest-bounces at antlr.org
[mailto:antlr-interest-bounces at antlr.org] On Behalf Of Voelkel, Andy
Sent: Friday, October 28, 2011 12:01 PM
To: ANTLR interest
Subject: [antlr-interest] tool version mismatch for C# target??

Hi,

I'm starting to use the built in StringTemplate generation feature of ANTLR
(see version below). It generates the following code near the beginning of
the output file:

using Antlr3.ST;
using Antlr3.ST.Language;
[System.CodeDom.Compiler.GeneratedCode("ANTLR", "3.4.1.9004")]

But the version of StringTemplate I got with this same "release" is
Antlr4.StringTemplate, not Antlr3.ST.

How do I fix this up?


-          Andy

________________________________

CONFIDENTIALITY NOTICE: This e-mail transmission, and any documents, files
or previous e-mail messages attached to it, may contain information that is
confidential and/or legally privileged. If you are not the intended
recipient, or a person responsible for delivering it to the intended
recipient, please DO NOT disclose the contents to another person, store or
copy the information in any medium, or use any of the information contained
in or attached to this transmission for any purpose. If you have received
this transmission in error, please immediately notify the sender by reply
email or at privacy at plantronics.com, and destroy the original transmission
and its attachments without reading or saving in any manner.

For further information about Plantronics - the Company, its products,
brands, partners, please visit our website www.plantronics.com.

List: http://www.antlr.org/mailman/listinfo/antlr-interest
Unsubscribe:
http://www.antlr.org/mailman/options/antlr-interest/your-email-address



________________________________

CONFIDENTIALITY NOTICE: This e-mail transmission, and any documents, files
or previous e-mail messages attached to it, may contain information that is
confidential and/or legally privileged. If you are not the intended
recipient, or a person responsible for delivering it to the intended
recipient, please DO NOT disclose the contents to another person, store or
copy the information in any medium, or use any of the information contained
in or attached to this transmission for any purpose. If you have received
this transmission in error, please immediately notify the sender by reply
email or at privacy at plantronics.com, and destroy the original transmission
and its attachments without reading or saving in any manner.

For further information about Plantronics - the Company, its products,
brands, partners, please visit our website www.plantronics.com.


From andy.voelkel at plantronics.com  Fri Oct 28 12:11:04 2011
From: andy.voelkel at plantronics.com (Voelkel, Andy)
Date: Fri, 28 Oct 2011 19:11:04 +0000
Subject: [antlr-interest] tool version mismatch for C# target??
In-Reply-To: <001501cc95a1$b5b8c440$212a4cc0$@pixelminegames.com>
References: <92E9AB4D42199B4793CE24E094BAEE070E8C3C@USSCMB03.plt.plantronics.com>
	<000c01cc959a$5c901370$15b03a50$@pixelminegames.com>
	<92E9AB4D42199B4793CE24E094BAEE070E8CB4@USSCMB03.plt.plantronics.com>
	<001501cc95a1$b5b8c440$212a4cc0$@pixelminegames.com>
Message-ID: <92E9AB4D42199B4793CE24E094BAEE070E8D34@USSCMB03.plt.plantronics.com>

I didn't know there was an ANTLR 4. The website advertises 3.4 as the latest version.

- Andy

-----Original Message-----
From: Sam Harwell [mailto:sharwell at pixelminegames.com]
Sent: Friday, October 28, 2011 11:45 AM
To: Voelkel, Andy; 'ANTLR interest'
Subject: RE: [antlr-interest] tool version mismatch for C# target??

No, as far as I know Antlr 3 will always produce code for ST3. ANTLR 4 will produce code for ST4 by default.

Sam

-----Original Message-----
From: Voelkel, Andy [mailto:andy.voelkel at plantronics.com]
Sent: Friday, October 28, 2011 1:11 PM
To: Sam Harwell; 'ANTLR interest'
Subject: RE: [antlr-interest] tool version mismatch for C# target??

Hi Sam,

Is there a version or Antlr3.exe that produces code which uses Antlr4.StringTemplate? That would the ideal, I would think.

- Andy

-----Original Message-----
From: Sam Harwell [mailto:sharwell at pixelminegames.com]
Sent: Friday, October 28, 2011 10:52 AM
To: Voelkel, Andy; 'ANTLR interest'
Subject: RE: [antlr-interest] tool version mismatch for C# target??

Hi Andy,

I just checked the Wiki and the downloads, and see the inconsistency.
ANTLR.exe uses StringTemplate for code generation, but now only depends on ST4. I ended up removing ST3 from the Bootstrap download as a result.

You can download ST3 as a separate download from the wiki:
http://www.antlr.org/wiki/display/ANTLR3/Antlr3CSharpReleases

Sam

-----Original Message-----
From: antlr-interest-bounces at antlr.org
[mailto:antlr-interest-bounces at antlr.org] On Behalf Of Voelkel, Andy
Sent: Friday, October 28, 2011 12:01 PM
To: ANTLR interest
Subject: [antlr-interest] tool version mismatch for C# target??

Hi,

I'm starting to use the built in StringTemplate generation feature of ANTLR (see version below). It generates the following code near the beginning of the output file:

using Antlr3.ST;
using Antlr3.ST.Language;
[System.CodeDom.Compiler.GeneratedCode("ANTLR", "3.4.1.9004")]

But the version of StringTemplate I got with this same "release" is Antlr4.StringTemplate, not Antlr3.ST.

How do I fix this up?


-          Andy

________________________________

CONFIDENTIALITY NOTICE: This e-mail transmission, and any documents, files or previous e-mail messages attached to it, may contain information that is confidential and/or legally privileged. If you are not the intended recipient, or a person responsible for delivering it to the intended recipient, please DO NOT disclose the contents to another person, store or copy the information in any medium, or use any of the information contained in or attached to this transmission for any purpose. If you have received this transmission in error, please immediately notify the sender by reply email or at privacy at plantronics.com, and destroy the original transmission and its attachments without reading or saving in any manner.

For further information about Plantronics - the Company, its products, brands, partners, please visit our website www.plantronics.com.

List: http://www.antlr.org/mailman/listinfo/antlr-interest
Unsubscribe:
http://www.antlr.org/mailman/options/antlr-interest/your-email-address



________________________________

CONFIDENTIALITY NOTICE: This e-mail transmission, and any documents, files or previous e-mail messages attached to it, may contain information that is confidential and/or legally privileged. If you are not the intended recipient, or a person responsible for delivering it to the intended recipient, please DO NOT disclose the contents to another person, store or copy the information in any medium, or use any of the information contained in or attached to this transmission for any purpose. If you have received this transmission in error, please immediately notify the sender by reply email or at privacy at plantronics.com, and destroy the original transmission and its attachments without reading or saving in any manner.

For further information about Plantronics - the Company, its products, brands, partners, please visit our website www.plantronics.com.



________________________________

CONFIDENTIALITY NOTICE: This e-mail transmission, and any documents, files or previous e-mail messages attached to it, may contain information that is confidential and/or legally privileged. If you are not the intended recipient, or a person responsible for delivering it to the intended recipient, please DO NOT disclose the contents to another person, store or copy the information in any medium, or use any of the information contained in or attached to this transmission for any purpose. If you have received this transmission in error, please immediately notify the sender by reply email or at privacy at plantronics.com, and destroy the original transmission and its attachments without reading or saving in any manner.

For further information about Plantronics - the Company, its products, brands, partners, please visit our website www.plantronics.com.

From sharwell at pixelminegames.com  Fri Oct 28 12:18:12 2011
From: sharwell at pixelminegames.com (Sam Harwell)
Date: Fri, 28 Oct 2011 14:18:12 -0500
Subject: [antlr-interest] tool version mismatch for C# target??
In-Reply-To: <92E9AB4D42199B4793CE24E094BAEE070E8D34@USSCMB03.plt.plantronics.com>
References: <92E9AB4D42199B4793CE24E094BAEE070E8C3C@USSCMB03.plt.plantronics.com>
	<000c01cc959a$5c901370$15b03a50$@pixelminegames.com>
	<92E9AB4D42199B4793CE24E094BAEE070E8CB4@USSCMB03.plt.plantronics.com>
	<001501cc95a1$b5b8c440$212a4cc0$@pixelminegames.com>
	<92E9AB4D42199B4793CE24E094BAEE070E8D34@USSCMB03.plt.plantronics.com>
Message-ID: <001901cc95a6$56aa68a0$03ff39e0$@pixelminegames.com>

That's why I said "will" ;)

Still not sure when it will be released. I know Dr. Parr's been working on
it for quite a while, but I believe it's still a few months away from a
first beta release.

I'm already excited about it though - looks like it will really shake things
up (in a good way)!

Sam

-----Original Message-----
From: Voelkel, Andy [mailto:andy.voelkel at plantronics.com] 
Sent: Friday, October 28, 2011 2:11 PM
To: Sam Harwell; 'ANTLR interest'
Subject: RE: [antlr-interest] tool version mismatch for C# target??

I didn't know there was an ANTLR 4. The website advertises 3.4 as the latest
version.

- Andy

-----Original Message-----
From: Sam Harwell [mailto:sharwell at pixelminegames.com]
Sent: Friday, October 28, 2011 11:45 AM
To: Voelkel, Andy; 'ANTLR interest'
Subject: RE: [antlr-interest] tool version mismatch for C# target??

No, as far as I know Antlr 3 will always produce code for ST3. ANTLR 4 will
produce code for ST4 by default.

Sam

-----Original Message-----
From: Voelkel, Andy [mailto:andy.voelkel at plantronics.com]
Sent: Friday, October 28, 2011 1:11 PM
To: Sam Harwell; 'ANTLR interest'
Subject: RE: [antlr-interest] tool version mismatch for C# target??

Hi Sam,

Is there a version or Antlr3.exe that produces code which uses
Antlr4.StringTemplate? That would the ideal, I would think.

- Andy

-----Original Message-----
From: Sam Harwell [mailto:sharwell at pixelminegames.com]
Sent: Friday, October 28, 2011 10:52 AM
To: Voelkel, Andy; 'ANTLR interest'
Subject: RE: [antlr-interest] tool version mismatch for C# target??

Hi Andy,

I just checked the Wiki and the downloads, and see the inconsistency.
ANTLR.exe uses StringTemplate for code generation, but now only depends on
ST4. I ended up removing ST3 from the Bootstrap download as a result.

You can download ST3 as a separate download from the wiki:
http://www.antlr.org/wiki/display/ANTLR3/Antlr3CSharpReleases

Sam

-----Original Message-----
From: antlr-interest-bounces at antlr.org
[mailto:antlr-interest-bounces at antlr.org] On Behalf Of Voelkel, Andy
Sent: Friday, October 28, 2011 12:01 PM
To: ANTLR interest
Subject: [antlr-interest] tool version mismatch for C# target??

Hi,

I'm starting to use the built in StringTemplate generation feature of ANTLR
(see version below). It generates the following code near the beginning of
the output file:

using Antlr3.ST;
using Antlr3.ST.Language;
[System.CodeDom.Compiler.GeneratedCode("ANTLR", "3.4.1.9004")]

But the version of StringTemplate I got with this same "release" is
Antlr4.StringTemplate, not Antlr3.ST.

How do I fix this up?


-          Andy

________________________________

CONFIDENTIALITY NOTICE: This e-mail transmission, and any documents, files
or previous e-mail messages attached to it, may contain information that is
confidential and/or legally privileged. If you are not the intended
recipient, or a person responsible for delivering it to the intended
recipient, please DO NOT disclose the contents to another person, store or
copy the information in any medium, or use any of the information contained
in or attached to this transmission for any purpose. If you have received
this transmission in error, please immediately notify the sender by reply
email or at privacy at plantronics.com, and destroy the original transmission
and its attachments without reading or saving in any manner.

For further information about Plantronics - the Company, its products,
brands, partners, please visit our website www.plantronics.com.

List: http://www.antlr.org/mailman/listinfo/antlr-interest
Unsubscribe:
http://www.antlr.org/mailman/options/antlr-interest/your-email-address



________________________________

CONFIDENTIALITY NOTICE: This e-mail transmission, and any documents, files
or previous e-mail messages attached to it, may contain information that is
confidential and/or legally privileged. If you are not the intended
recipient, or a person responsible for delivering it to the intended
recipient, please DO NOT disclose the contents to another person, store or
copy the information in any medium, or use any of the information contained
in or attached to this transmission for any purpose. If you have received
this transmission in error, please immediately notify the sender by reply
email or at privacy at plantronics.com, and destroy the original transmission
and its attachments without reading or saving in any manner.

For further information about Plantronics - the Company, its products,
brands, partners, please visit our website www.plantronics.com.



________________________________

CONFIDENTIALITY NOTICE: This e-mail transmission, and any documents, files
or previous e-mail messages attached to it, may contain information that is
confidential and/or legally privileged. If you are not the intended
recipient, or a person responsible for delivering it to the intended
recipient, please DO NOT disclose the contents to another person, store or
copy the information in any medium, or use any of the information contained
in or attached to this transmission for any purpose. If you have received
this transmission in error, please immediately notify the sender by reply
email or at privacy at plantronics.com, and destroy the original transmission
and its attachments without reading or saving in any manner.

For further information about Plantronics - the Company, its products,
brands, partners, please visit our website www.plantronics.com.


From andy.voelkel at plantronics.com  Fri Oct 28 13:47:43 2011
From: andy.voelkel at plantronics.com (Voelkel, Andy)
Date: Fri, 28 Oct 2011 20:47:43 +0000
Subject: [antlr-interest] tool version mismatch for C# target??
In-Reply-To: <001901cc95a6$56aa68a0$03ff39e0$@pixelminegames.com>
References: <92E9AB4D42199B4793CE24E094BAEE070E8C3C@USSCMB03.plt.plantronics.com>
	<000c01cc959a$5c901370$15b03a50$@pixelminegames.com>
	<92E9AB4D42199B4793CE24E094BAEE070E8CB4@USSCMB03.plt.plantronics.com>
	<001501cc95a1$b5b8c440$212a4cc0$@pixelminegames.com>
	<92E9AB4D42199B4793CE24E094BAEE070E8D34@USSCMB03.plt.plantronics.com>
	<001901cc95a6$56aa68a0$03ff39e0$@pixelminegames.com>
Message-ID: <92E9AB4D42199B4793CE24E094BAEE070E8E07@USSCMB03.plt.plantronics.com>

I found the Antlr4 site and read about it a bit, and I agree. It actually clarifies my path for the multiple outputs question I was asking. I'll forego the automatic generation of StringTemplate code and use helper functions instead. That way, I only need Antrl4.StringTemplate. When Antlr4 comes out, I can reevaluate.

- Andy

-----Original Message-----
From: Sam Harwell [mailto:sharwell at pixelminegames.com]
Sent: Friday, October 28, 2011 12:18 PM
To: Voelkel, Andy; 'ANTLR interest'
Subject: RE: [antlr-interest] tool version mismatch for C# target??

That's why I said "will" ;)

Still not sure when it will be released. I know Dr. Parr's been working on it for quite a while, but I believe it's still a few months away from a first beta release.

I'm already excited about it though - looks like it will really shake things up (in a good way)!

Sam

-----Original Message-----
From: Voelkel, Andy [mailto:andy.voelkel at plantronics.com]
Sent: Friday, October 28, 2011 2:11 PM
To: Sam Harwell; 'ANTLR interest'
Subject: RE: [antlr-interest] tool version mismatch for C# target??

I didn't know there was an ANTLR 4. The website advertises 3.4 as the latest version.

- Andy

-----Original Message-----
From: Sam Harwell [mailto:sharwell at pixelminegames.com]
Sent: Friday, October 28, 2011 11:45 AM
To: Voelkel, Andy; 'ANTLR interest'
Subject: RE: [antlr-interest] tool version mismatch for C# target??

No, as far as I know Antlr 3 will always produce code for ST3. ANTLR 4 will produce code for ST4 by default.

Sam

-----Original Message-----
From: Voelkel, Andy [mailto:andy.voelkel at plantronics.com]
Sent: Friday, October 28, 2011 1:11 PM
To: Sam Harwell; 'ANTLR interest'
Subject: RE: [antlr-interest] tool version mismatch for C# target??

Hi Sam,

Is there a version or Antlr3.exe that produces code which uses Antlr4.StringTemplate? That would the ideal, I would think.

- Andy

-----Original Message-----
From: Sam Harwell [mailto:sharwell at pixelminegames.com]
Sent: Friday, October 28, 2011 10:52 AM
To: Voelkel, Andy; 'ANTLR interest'
Subject: RE: [antlr-interest] tool version mismatch for C# target??

Hi Andy,

I just checked the Wiki and the downloads, and see the inconsistency.
ANTLR.exe uses StringTemplate for code generation, but now only depends on ST4. I ended up removing ST3 from the Bootstrap download as a result.

You can download ST3 as a separate download from the wiki:
http://www.antlr.org/wiki/display/ANTLR3/Antlr3CSharpReleases

Sam

-----Original Message-----
From: antlr-interest-bounces at antlr.org
[mailto:antlr-interest-bounces at antlr.org] On Behalf Of Voelkel, Andy
Sent: Friday, October 28, 2011 12:01 PM
To: ANTLR interest
Subject: [antlr-interest] tool version mismatch for C# target??

Hi,

I'm starting to use the built in StringTemplate generation feature of ANTLR (see version below). It generates the following code near the beginning of the output file:

using Antlr3.ST;
using Antlr3.ST.Language;
[System.CodeDom.Compiler.GeneratedCode("ANTLR", "3.4.1.9004")]

But the version of StringTemplate I got with this same "release" is Antlr4.StringTemplate, not Antlr3.ST.

How do I fix this up?


-          Andy

________________________________

CONFIDENTIALITY NOTICE: This e-mail transmission, and any documents, files or previous e-mail messages attached to it, may contain information that is confidential and/or legally privileged. If you are not the intended recipient, or a person responsible for delivering it to the intended recipient, please DO NOT disclose the contents to another person, store or copy the information in any medium, or use any of the information contained in or attached to this transmission for any purpose. If you have received this transmission in error, please immediately notify the sender by reply email or at privacy at plantronics.com, and destroy the original transmission and its attachments without reading or saving in any manner.

For further information about Plantronics - the Company, its products, brands, partners, please visit our website www.plantronics.com.

List: http://www.antlr.org/mailman/listinfo/antlr-interest
Unsubscribe:
http://www.antlr.org/mailman/options/antlr-interest/your-email-address



________________________________

CONFIDENTIALITY NOTICE: This e-mail transmission, and any documents, files or previous e-mail messages attached to it, may contain information that is confidential and/or legally privileged. If you are not the intended recipient, or a person responsible for delivering it to the intended recipient, please DO NOT disclose the contents to another person, store or copy the information in any medium, or use any of the information contained in or attached to this transmission for any purpose. If you have received this transmission in error, please immediately notify the sender by reply email or at privacy at plantronics.com, and destroy the original transmission and its attachments without reading or saving in any manner.

For further information about Plantronics - the Company, its products, brands, partners, please visit our website www.plantronics.com.



________________________________

CONFIDENTIALITY NOTICE: This e-mail transmission, and any documents, files or previous e-mail messages attached to it, may contain information that is confidential and/or legally privileged. If you are not the intended recipient, or a person responsible for delivering it to the intended recipient, please DO NOT disclose the contents to another person, store or copy the information in any medium, or use any of the information contained in or attached to this transmission for any purpose. If you have received this transmission in error, please immediately notify the sender by reply email or at privacy at plantronics.com, and destroy the original transmission and its attachments without reading or saving in any manner.

For further information about Plantronics - the Company, its products, brands, partners, please visit our website www.plantronics.com.



________________________________

CONFIDENTIALITY NOTICE: This e-mail transmission, and any documents, files or previous e-mail messages attached to it, may contain information that is confidential and/or legally privileged. If you are not the intended recipient, or a person responsible for delivering it to the intended recipient, please DO NOT disclose the contents to another person, store or copy the information in any medium, or use any of the information contained in or attached to this transmission for any purpose. If you have received this transmission in error, please immediately notify the sender by reply email or at privacy at plantronics.com, and destroy the original transmission and its attachments without reading or saving in any manner.

For further information about Plantronics - the Company, its products, brands, partners, please visit our website www.plantronics.com.

From chwchw at gmx.de  Fri Oct 28 13:49:07 2011
From: chwchw at gmx.de (Christian)
Date: Fri, 28 Oct 2011 22:49:07 +0200
Subject: [antlr-interest] Are token aliases possible?
In-Reply-To: <4EAABE74.90706@lancaster.ac.uk>
References: <4EAA617A.8020504@gmx.de>
	<4EAA8FCE.4070206@lancaster.ac.uk>	<4EAA9193.3090100@gmx.de>
	<4EAA9343.6040007@lancaster.ac.uk> <4EAA95EA.4040403@gmx.de>
	<13b901cc9578$90163390$b0429ab0$@pixelminegames.com>
	<4EAABE74.90706@lancaster.ac.uk>
Message-ID: <4EAB1543.4020400@gmx.de>

If CLASS_DECL should only be another name with the same type, than, in
Java, it could be easily declared as another constant with the same value:

private final static int CLASS_DECL = CLASS;

However, ANTLR does not support it, at least not independent of the
target language.

Am 28.10.2011 16:38, schrieb Sam Barnett-Cormack:
> That looks a very handy feature. I wonder if there's any chance of it
> arriving in the Java version?
>
> Sam
>
> On 28/10/2011 14:50, Sam Harwell wrote:
>> In the Java version, the rewrite syntax is the definitive way to
>> specify the
>> type of a tree node.
>>
>> In the newer versions of the C# port, you can specify tree node types
>> as a
>> token option, so you could do this and be equivalent to your rewrite
>> rule.
>> Note that I added a ^ as well; your first example did not include it but
>> that's what makes a particular node the root of the created tree.
>> Since the
>> AST operators (^ and !) perform better in a number of ways than the
>> rewrite
>> operators, I added this feature to allow me to use AST operators in a
>> number
>> of places where I previously used rewrite syntax for the sole purpose of
>> changing a node type.
>>
>> class_declaration
>>    : CLASS<CLASS_DECL>^  type_or_generic   class_base?
>> type_parameter_constraints_clauses?   class_body   ';'!?
>>
>>
>> -----Original Message-----
>> From: antlr-interest-bounces at antlr.org
>> [mailto:antlr-interest-bounces at antlr.org] On Behalf Of Christian
>> Sent: Friday, October 28, 2011 6:46 AM
>> To: antlr-interest at antlr.org
>> Subject: Re: [antlr-interest] Are token aliases possible?
>>
>> Yes, I know that one can use rewrite rules. Thank you anyway. In some
>> cases
>> however, I do not want to repeat the rules following the CLASS token and
>> write an arrow etc. In such cases, it is shorter to just replace the
>> CLASS
>> by CLASS_DECL and add a few operators instead of a rewrite rule.
>>
>> As an example, I want to transform the following rule:
>>
>> class_declaration
>>    : CLASS  type_or_generic   class_base?
>> type_parameter_constraints_clauses?   class_body   ';'?
>>
>> into
>>
>> class_declaration
>>    : CLASS_DECL  type_or_generic   class_base?
>> type_parameter_constraints_clauses?   class_body   ';'!?
>>
>> versus
>>
>> class_declaration
>>    : CLASS  type_or_generic   class_base?
>> type_parameter_constraints_clauses?   class_body   ';'?
>>        ->  ^(CLASS_DECL type_or_generic class_base?
>> type_parameter_constraints_clauses? class_body)
>>      ;
>>
>> I think everyone, especially me, would prefer the first solution.
>>
>> Am 28.10.2011 13:34, schrieb Sam Barnett-Cormack:
>>> I don't know for sure, buut my immediate thought is that it isn't
>>> likely to be possible (as tokens are generated without reference to
>>> parse context, and must be unambiguous except where code manually
>>> deals with the ambiguity). You could however create it as a dummy
>>> token name, and rewrite to it in the parser, such that the AST
>>> generated has a 'virtual' CLASS_DECL token generated from the 'real'
>>> CLASS token. Pretty sure there are examples of this in the wiki.
>>>
>>> On 28/10/2011 12:27, Christian wrote:
>>>> CLASS is only the token name. However, CLASS_DECL represents the
>>>> semantics of what was parsed. It allows to be more consequent when
>>>> analyzing the generated AST by names like CLASS_DECL, METHOD_DECL,
>>>> FIELD_DECL etc.
>>>>
>>>> Example:
>>>>
>>>> switch (node.getType()) {
>>>>      case CsRewriteRulesParser.NAMESPACE_DECL:
>>>>         // TODO
>>>>         break;
>>>>      case CsRewriteRulesParser.METHOD_DECL:
>>>>         // TODO
>>>>         break;
>>>>      case CsRewriteRulesParser.CLASS_DECL:
>>>>         // TODO
>>>>         break;
>>>> }
>>>>
>>>> It would be just another name for the integer constant CLASS.
>>>>
>>>> Am 28.10.2011 13:19, schrieb Sam Barnett-Cormack:
>>>>> I think the immediate answer is, "why?"
>>>>>
>>>>> On 28/10/2011 09:02, Christian wrote:
>>>>>> Hi community,
>>>>>>
>>>>>> if there is a real token, say
>>>>>>        CLASS : 'class';
>>>>>> can a define an alias, say
>>>>>>        CLASS_DECL = CLASS
>>>>>> in some way?
>>>>>>
>>>>>> Regards,
>>>>>> Christian
>>>>>>
>>>>>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>>>>>> Unsubscribe:
>>>>>> http://www.antlr.org/mailman/options/antlr-interest/your-email-addr
>>>>>> ess
>>>>>
>>>>
>>>>
>>>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>>>> Unsubscribe:
>>>> http://www.antlr.org/mailman/options/antlr-interest/your-email-addres
>>>> s
>>>
>>
>>
>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>> Unsubscribe:
>> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>>
>>
>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>> Unsubscribe:
>> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>


From s.barnett-cormack at lancaster.ac.uk  Fri Oct 28 15:42:19 2011
From: s.barnett-cormack at lancaster.ac.uk (Sam Barnett-Cormack)
Date: Fri, 28 Oct 2011 23:42:19 +0100
Subject: [antlr-interest] Are token aliases possible?
In-Reply-To: <4EAB1543.4020400@gmx.de>
References: <4EAA617A.8020504@gmx.de>
	<4EAA8FCE.4070206@lancaster.ac.uk>	<4EAA9193.3090100@gmx.de>
	<4EAA9343.6040007@lancaster.ac.uk> <4EAA95EA.4040403@gmx.de>
	<13b901cc9578$90163390$b0429ab0$@pixelminegames.com>
	<4EAABE74.90706@lancaster.ac.uk> <4EAB1543.4020400@gmx.de>
Message-ID: <4EAB2FCB.3030700@lancaster.ac.uk>

The problem is what you're asking for isn't consistent with the way 
ANTLR works. For instance, say it were another constant with the same 
value... in that case, prediction would work correctly, but the tree 
that's created would be indistinguishable because CLASS and CLASS_DECL 
are the same thing, so you wouldn't be able to differentiate between 
them in the AST.

You need to define the node type in the AST, however awkward you find 
the code for that.

Sam

On 28/10/2011 21:49, Christian wrote:
> If CLASS_DECL should only be another name with the same type, than, in
> Java, it could be easily declared as another constant with the same value:
>
> private final static int CLASS_DECL = CLASS;
>
> However, ANTLR does not support it, at least not independent of the
> target language.
>
> Am 28.10.2011 16:38, schrieb Sam Barnett-Cormack:
>> That looks a very handy feature. I wonder if there's any chance of it
>> arriving in the Java version?
>>
>> Sam
>>
>> On 28/10/2011 14:50, Sam Harwell wrote:
>>> In the Java version, the rewrite syntax is the definitive way to
>>> specify the
>>> type of a tree node.
>>>
>>> In the newer versions of the C# port, you can specify tree node types
>>> as a
>>> token option, so you could do this and be equivalent to your rewrite
>>> rule.
>>> Note that I added a ^ as well; your first example did not include it but
>>> that's what makes a particular node the root of the created tree.
>>> Since the
>>> AST operators (^ and !) perform better in a number of ways than the
>>> rewrite
>>> operators, I added this feature to allow me to use AST operators in a
>>> number
>>> of places where I previously used rewrite syntax for the sole purpose of
>>> changing a node type.
>>>
>>> class_declaration
>>>     : CLASS<CLASS_DECL>^  type_or_generic   class_base?
>>> type_parameter_constraints_clauses?   class_body   ';'!?
>>>
>>>
>>> -----Original Message-----
>>> From: antlr-interest-bounces at antlr.org
>>> [mailto:antlr-interest-bounces at antlr.org] On Behalf Of Christian
>>> Sent: Friday, October 28, 2011 6:46 AM
>>> To: antlr-interest at antlr.org
>>> Subject: Re: [antlr-interest] Are token aliases possible?
>>>
>>> Yes, I know that one can use rewrite rules. Thank you anyway. In some
>>> cases
>>> however, I do not want to repeat the rules following the CLASS token and
>>> write an arrow etc. In such cases, it is shorter to just replace the
>>> CLASS
>>> by CLASS_DECL and add a few operators instead of a rewrite rule.
>>>
>>> As an example, I want to transform the following rule:
>>>
>>> class_declaration
>>>     : CLASS  type_or_generic   class_base?
>>> type_parameter_constraints_clauses?   class_body   ';'?
>>>
>>> into
>>>
>>> class_declaration
>>>     : CLASS_DECL  type_or_generic   class_base?
>>> type_parameter_constraints_clauses?   class_body   ';'!?
>>>
>>> versus
>>>
>>> class_declaration
>>>     : CLASS  type_or_generic   class_base?
>>> type_parameter_constraints_clauses?   class_body   ';'?
>>>         ->   ^(CLASS_DECL type_or_generic class_base?
>>> type_parameter_constraints_clauses? class_body)
>>>       ;
>>>
>>> I think everyone, especially me, would prefer the first solution.
>>>
>>> Am 28.10.2011 13:34, schrieb Sam Barnett-Cormack:
>>>> I don't know for sure, buut my immediate thought is that it isn't
>>>> likely to be possible (as tokens are generated without reference to
>>>> parse context, and must be unambiguous except where code manually
>>>> deals with the ambiguity). You could however create it as a dummy
>>>> token name, and rewrite to it in the parser, such that the AST
>>>> generated has a 'virtual' CLASS_DECL token generated from the 'real'
>>>> CLASS token. Pretty sure there are examples of this in the wiki.
>>>>
>>>> On 28/10/2011 12:27, Christian wrote:
>>>>> CLASS is only the token name. However, CLASS_DECL represents the
>>>>> semantics of what was parsed. It allows to be more consequent when
>>>>> analyzing the generated AST by names like CLASS_DECL, METHOD_DECL,
>>>>> FIELD_DECL etc.
>>>>>
>>>>> Example:
>>>>>
>>>>> switch (node.getType()) {
>>>>>       case CsRewriteRulesParser.NAMESPACE_DECL:
>>>>>          // TODO
>>>>>          break;
>>>>>       case CsRewriteRulesParser.METHOD_DECL:
>>>>>          // TODO
>>>>>          break;
>>>>>       case CsRewriteRulesParser.CLASS_DECL:
>>>>>          // TODO
>>>>>          break;
>>>>> }
>>>>>
>>>>> It would be just another name for the integer constant CLASS.
>>>>>
>>>>> Am 28.10.2011 13:19, schrieb Sam Barnett-Cormack:
>>>>>> I think the immediate answer is, "why?"
>>>>>>
>>>>>> On 28/10/2011 09:02, Christian wrote:
>>>>>>> Hi community,
>>>>>>>
>>>>>>> if there is a real token, say
>>>>>>>         CLASS : 'class';
>>>>>>> can a define an alias, say
>>>>>>>         CLASS_DECL = CLASS
>>>>>>> in some way?
>>>>>>>
>>>>>>> Regards,
>>>>>>> Christian
>>>>>>>
>>>>>>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>>>>>>> Unsubscribe:
>>>>>>> http://www.antlr.org/mailman/options/antlr-interest/your-email-addr
>>>>>>> ess
>>>>>>
>>>>>
>>>>>
>>>>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>>>>> Unsubscribe:
>>>>> http://www.antlr.org/mailman/options/antlr-interest/your-email-addres
>>>>> s
>>>>
>>>
>>>
>>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>>> Unsubscribe:
>>> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>>>
>>>
>>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>>> Unsubscribe:
>>> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>>
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address

From boodweb at gmail.com  Fri Oct 28 20:36:58 2011
From: boodweb at gmail.com (Bood Qian)
Date: Sat, 29 Oct 2011 11:36:58 +0800
Subject: [antlr-interest] False error 208?
In-Reply-To: <CAOrgODb=D=n=djqMO_0axeOdVo=OfrE_VM7N8iNHma2q9P63fg@mail.gmail.com>
References: <CAG0n-W-UjoeXJab-9JAKcx84FtsK813PjVP72mo4U_Wg1S4Abw@mail.gmail.com>
	<cbd4fcabc99cf770e181368af79f4555@mail.gmail.com>
	<CAOrgODb3GM+7Vc+4Z=ubrd7+K_pdKYcZkzU+VqHo0pw+UZ=_mg@mail.gmail.com>
	<fb0a4bcc1c5eaf62e3d6ba69071cc58b@mail.gmail.com>
	<CAOrgODZ9+Lk+a--C5T3HDiff9CBrn06TvcPy+bsa-2kmb3Bgmg@mail.gmail.com>
	<CAOrgODb=D=n=djqMO_0axeOdVo=OfrE_VM7N8iNHma2q9P63fg@mail.gmail.com>
Message-ID: <CAG0n-W8h8_+sjHY5FERf2ZYRnjL3MPUzyQq15k17N-x1cSeKcg@mail.gmail.com>

don't want it sink...
still seeking for the answers

On Mon, Oct 24, 2011 at 11:34 PM, Bart Kiers <bkiers at gmail.com> wrote:

> On Mon, Oct 24, 2011 at 5:33 PM, Bart Kiers <bkiers at gmail.com> wrote:
>
> > ... where I (and Boon) ...
> >
>
>
> Sorry, "Bood", not "Boon"...
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>

From chwchw at gmx.de  Sat Oct 29 04:40:34 2011
From: chwchw at gmx.de (Christian)
Date: Sat, 29 Oct 2011 13:40:34 +0200
Subject: [antlr-interest] Are token aliases possible?
In-Reply-To: <ae15c3a0cd5967268d94d04c73e791bf@mail.gmail.com>
References: <4EAA617A.8020504@gmx.de> <4EAA8FCE.4070206@lancaster.ac.uk>
	<4EAA9193.3090100@gmx.de> <4EAA9343.6040007@lancaster.ac.uk>
	<4EAA95EA.4040403@gmx.de>
	<ae15c3a0cd5967268d94d04c73e791bf@mail.gmail.com>
Message-ID: <4EABE632.8010500@gmx.de>

Could you please give an example for your approach?

Am 28.10.2011 19:35, schrieb Jim Idle:
> Get a reference to the token and just set the type property.
>
> Jim
>
>> -----Original Message-----
>> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
>> bounces at antlr.org] On Behalf Of Christian
>> Sent: Friday, October 28, 2011 4:46 AM
>> To: antlr-interest at antlr.org
>> Subject: Re: [antlr-interest] Are token aliases possible?
>>
>> Yes, I know that one can use rewrite rules. Thank you anyway. In some
>> cases however, I do not want to repeat the rules following the CLASS
>> token and write an arrow etc. In such cases, it is shorter to just
>> replace the CLASS by CLASS_DECL and add a few operators instead of a
>> rewrite rule.
>>
>> As an example, I want to transform the following rule:
>>
>> class_declaration
>>   : CLASS  type_or_generic   class_base?
>> type_parameter_constraints_clauses?   class_body   ';'?
>>
>> into
>>
>> class_declaration
>>   : CLASS_DECL  type_or_generic   class_base?
>> type_parameter_constraints_clauses?   class_body   ';'!?
>>
>> versus
>>
>> class_declaration
>>   : CLASS  type_or_generic   class_base?
>> type_parameter_constraints_clauses?   class_body   ';'?
>>       -> ^(CLASS_DECL type_or_generic class_base?
>> type_parameter_constraints_clauses? class_body)
>>     ;
>>
>> I think everyone, especially me, would prefer the first solution.
>>
>> Am 28.10.2011 13:34, schrieb Sam Barnett-Cormack:
>>> I don't know for sure, buut my immediate thought is that it isn't
>>> likely to be possible (as tokens are generated without reference to
>>> parse context, and must be unambiguous except where code manually
>>> deals with the ambiguity). You could however create it as a dummy
>>> token name, and rewrite to it in the parser, such that the AST
>>> generated has a 'virtual' CLASS_DECL token generated from the 'real'
>>> CLASS token. Pretty sure there are examples of this in the wiki.
>>>
>>> On 28/10/2011 12:27, Christian wrote:
>>>> CLASS is only the token name. However, CLASS_DECL represents the
>>>> semantics of what was parsed. It allows to be more consequent when
>>>> analyzing the generated AST by names like CLASS_DECL, METHOD_DECL,
>>>> FIELD_DECL etc.
>>>>
>>>> Example:
>>>>
>>>> switch (node.getType()) {
>>>>     case CsRewriteRulesParser.NAMESPACE_DECL:
>>>>        // TODO
>>>>        break;
>>>>     case CsRewriteRulesParser.METHOD_DECL:
>>>>        // TODO
>>>>        break;
>>>>     case CsRewriteRulesParser.CLASS_DECL:
>>>>        // TODO
>>>>        break;
>>>> }
>>>>
>>>> It would be just another name for the integer constant CLASS.
>>>>
>>>> Am 28.10.2011 13:19, schrieb Sam Barnett-Cormack:
>>>>> I think the immediate answer is, "why?"
>>>>>
>>>>> On 28/10/2011 09:02, Christian wrote:
>>>>>> Hi community,
>>>>>>
>>>>>> if there is a real token, say
>>>>>>       CLASS : 'class';
>>>>>> can a define an alias, say
>>>>>>       CLASS_DECL = CLASS
>>>>>> in some way?
>>>>>>
>>>>>> Regards,
>>>>>> Christian
>>>>>>
>>>>>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>>>>>> Unsubscribe:
>>>>>> http://www.antlr.org/mailman/options/antlr-interest/your-email-
>> addr
>>>>>> ess
>>>>
>>>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>>>> Unsubscribe:
>>>> http://www.antlr.org/mailman/options/antlr-interest/your-email-
>> addres
>>>> s
>>
>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
>> email-address
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>


From chwchw at gmx.de  Sat Oct 29 04:44:04 2011
From: chwchw at gmx.de (Christian)
Date: Sat, 29 Oct 2011 13:44:04 +0200
Subject: [antlr-interest] Are token aliases possible?
In-Reply-To: <aa02f4d459d4823f47caa22f1e0b5717@mail.gmail.com>
References: <4EAA617A.8020504@gmx.de> <4EAA8FCE.4070206@lancaster.ac.uk>
	<4EAA9193.3090100@gmx.de>
	<aa02f4d459d4823f47caa22f1e0b5717@mail.gmail.com>
Message-ID: <4EABE704.8040606@gmx.de>

Sorry, I don't get what you intent with your statement. Should I better
use rewrite rules instead? I also do not know what you mean with "factor
qualifiers". Could you please explain?

Am 28.10.2011 19:34, schrieb Jim Idle:
> Don't confuse real tokens with what you put in the tree. Just rewrite
> using an imaginary token once you disambiguate the declaration. Also, make
> sure that you left factor qualifiers and things like that. Also, remember
> that these are all type declarations. See here for some pointers:
>
> http://www.temporal-wave.com/index.php?option=com_psrrun&view=psrrun&Itemi
> d=58
>
>
>
> Jim
>
>> -----Original Message-----
>> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
>> bounces at antlr.org] On Behalf Of Christian
>> Sent: Friday, October 28, 2011 4:27 AM
>> Cc: antlr-interest at antlr.org
>> Subject: Re: [antlr-interest] Are token aliases possible?
>>
>> CLASS is only the token name. However, CLASS_DECL represents the
>> semantics of what was parsed. It allows to be more consequent when
>> analyzing the generated AST by names like CLASS_DECL, METHOD_DECL,
>> FIELD_DECL etc.
>>
>> Example:
>>
>> switch (node.getType()) {
>>    case CsRewriteRulesParser.NAMESPACE_DECL:
>>       // TODO
>>       break;
>>    case CsRewriteRulesParser.METHOD_DECL:
>>       // TODO
>>       break;
>>    case CsRewriteRulesParser.CLASS_DECL:
>>       // TODO
>>       break;
>> }
>>
>> It would be just another name for the integer constant CLASS.
>>
>> Am 28.10.2011 13:19, schrieb Sam Barnett-Cormack:
>>> I think the immediate answer is, "why?"
>>>
>>> On 28/10/2011 09:02, Christian wrote:
>>>> Hi community,
>>>>
>>>> if there is a real token, say
>>>>      CLASS : 'class';
>>>> can a define an alias, say
>>>>      CLASS_DECL = CLASS
>>>> in some way?
>>>>
>>>> Regards,
>>>> Christian
>>>>
>>>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>>>> Unsubscribe:
>>>> http://www.antlr.org/mailman/options/antlr-interest/your-email-
>> addres
>>>> s
>>
>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
>> email-address
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>


From asicaddress at gmail.com  Sat Oct 29 12:16:40 2011
From: asicaddress at gmail.com (A Z)
Date: Sat, 29 Oct 2011 14:16:40 -0500
Subject: [antlr-interest] v4 Token size
Message-ID: <CAP86aOd8W6NTOc442nvTNUTLPRgqUL2J_5pjdqZeo=d8NZu0jg@mail.gmail.com>

Hello,

  I saw some earlier messages from Sam regarding a much smaller token he was
developing for C#. Is ANTLR v4 going have smaller tokens in the C target, or
perhaps use C++? The tool works great but I had to remove many of the
function pointers from commonToken to reduce memory usage.

Thanks

From jimi at temporal-wave.com  Sat Oct 29 13:22:08 2011
From: jimi at temporal-wave.com (Jim Idle)
Date: Sat, 29 Oct 2011 13:22:08 -0700
Subject: [antlr-interest] v4 Token size
In-Reply-To: <CAP86aOd8W6NTOc442nvTNUTLPRgqUL2J_5pjdqZeo=d8NZu0jg@mail.gmail.com>
References: <CAP86aOd8W6NTOc442nvTNUTLPRgqUL2J_5pjdqZeo=d8NZu0jg@mail.gmail.com>
Message-ID: <7C96D694-30DF-4C0C-A275-03DF704A1941@temporal-wave.com>

The next runtime will be c++ and the tokens will be configured small 

On Oct 29, 2011, at 12:16, A Z <asicaddress at gmail.com> wrote:

> Hello,
> 
>  I saw some earlier messages from Sam regarding a much smaller token he was
> developing for C#. Is ANTLR v4 going have smaller tokens in the C target, or
> perhaps use C++? The tool works great but I had to remove many of the
> function pointers from commonToken to reduce memory usage.
> 
> Thanks
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address

From andy.voelkel at plantronics.com  Sun Oct 30 15:05:07 2011
From: andy.voelkel at plantronics.com (Voelkel, Andy)
Date: Sun, 30 Oct 2011 22:05:07 +0000
Subject: [antlr-interest] working examples for StringTemplate4 and C#? (I'm
	stuck again)
Message-ID: <92E9AB4D42199B4793CE24E094BAEE070E91B5@USSCMB03.plt.plantronics.com>

Hi,

I'm getting stuck trying to start using template group files. I try this to open my .stg file:

TemplateGroup Tg = new TemplateGroupFile("RTX.stg", '<', '>');

.. and I get a UriFormatException, "The format of the URI could not be determined".

Are there any working examples of using ST4 with C# that anyone could point me to? I'll gladly update the ST4 Wiki (which seems to be out of date) as I get simple examples working.

Or would I be better off just sticking with ST3?


-          Andy

________________________________

CONFIDENTIALITY NOTICE: This e-mail transmission, and any documents, files or previous e-mail messages attached to it, may contain information that is confidential and/or legally privileged. If you are not the intended recipient, or a person responsible for delivering it to the intended recipient, please DO NOT disclose the contents to another person, store or copy the information in any medium, or use any of the information contained in or attached to this transmission for any purpose. If you have received this transmission in error, please immediately notify the sender by reply email or at privacy at plantronics.com, and destroy the original transmission and its attachments without reading or saving in any manner.

For further information about Plantronics - the Company, its products, brands, partners, please visit our website www.plantronics.com.

From kierans777 at gmail.com  Sun Oct 30 19:18:54 2011
From: kierans777 at gmail.com (Kieran Simpson)
Date: Mon, 31 Oct 2011 13:18:54 +1100
Subject: [antlr-interest] Gunit 3.4 incorrectly failing test due to bug
In-Reply-To: <4EA7E211.2010705@gmail.com>
References: <4EA7E211.2010705@gmail.com>
Message-ID: <4EAE058E.6000400@gmail.com>

In case anyone else is having this problem, I've attached a patch with a 
fix for the head version of the file (rev 7313).  Hopefully this can be 
incorporated into the official build soon.

Cheers,


On 23/07/64 5:59 AM, Kieran Simpson wrote:
> I'm starting to write my grammar so am setting up the build/tests. I'm
> fetching gunit-3.4 via Apache Ivy, and am using the tools ability to
> generate JUnit classes so that our reporting tools can run over the
> results.
>
> My grammar consists of:
>
> grammar CoreConfiguration;
>
> SCOPE_BEGIN: '{';
> SCOPE_END: '}';
>
> WS: ( ' ' | '\t' | '\r' | '\n') {$channel=HIDDEN;};
>
> configuration
> : SCOPE_BEGIN SCOPE_END;
>
> My Gunit test case is:
>
> gunit CoreConfiguration;
>
> //------------------- configuration
> configuration:
>
> "{ }" OK
>
> "{ ]" FAIL
>
> I translate the gunit file to JUnit using the -o switch of the
> org.antlr.gunit.Interp class and compile the code. Upon running the test
> I get the following output:
>
> [junit] testing rule configuration expected:<OK> but was:<FAIL, >
> [junit] junit.framework.AssertionFailedError: testing rule configuration
> expected:<OK> but was:<FAIL, >
>
> Looking through the gunit source, I've tracked the problem to the
> gUnitBaseTest::examineExecResult() method on line 467. It's checking
> whether the member variable 'stderr' is null and if not returns the
> concatenation of "FAIL" and the contents ie:
>
> return "FAIL, "+this.stderr;
>
> However it appears that this.stderr is being set to empty on line 242,
> so my test(s) will always fail. This is a bug.
>
> Cheers,
>
-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: gUnitBaseTest.java.patch
Url: http://www.antlr.org/pipermail/antlr-interest/attachments/20111031/d9b50cbc/attachment.pl 

From sharwell at pixelminegames.com  Sun Oct 30 20:40:31 2011
From: sharwell at pixelminegames.com (Sam Harwell)
Date: Sun, 30 Oct 2011 22:40:31 -0500
Subject: [antlr-interest] working examples for StringTemplate4 and C#?
	(I'm	stuck again)
In-Reply-To: <92E9AB4D42199B4793CE24E094BAEE070E91B5@USSCMB03.plt.plantronics.com>
References: <92E9AB4D42199B4793CE24E094BAEE070E91B5@USSCMB03.plt.plantronics.com>
Message-ID: <00ae01cc977e$d7dd2690$879773b0$@pixelminegames.com>

Do you have a stack trace or any other information about where the exception
occurs? In Visual Studio, you can get a stack trace even if you don't have
the source code by going to Debug>Exceptions..., checking the box next to
UriFormatException, and then looking at the Call Stack window after the
exception is thrown.

Sam

-----Original Message-----
From: antlr-interest-bounces at antlr.org
[mailto:antlr-interest-bounces at antlr.org] On Behalf Of Voelkel, Andy
Sent: Sunday, October 30, 2011 5:05 PM
To: 'ANTLR interest'
Subject: [antlr-interest] working examples for StringTemplate4 and C#? (I'm
stuck again)

Hi,

I'm getting stuck trying to start using template group files. I try this to
open my .stg file:

TemplateGroup Tg = new TemplateGroupFile("RTX.stg", '<', '>');

.. and I get a UriFormatException, "The format of the URI could not be
determined".

Are there any working examples of using ST4 with C# that anyone could point
me to? I'll gladly update the ST4 Wiki (which seems to be out of date) as I
get simple examples working.

Or would I be better off just sticking with ST3?


-          Andy

________________________________

CONFIDENTIALITY NOTICE: This e-mail transmission, and any documents, files
or previous e-mail messages attached to it, may contain information that is
confidential and/or legally privileged. If you are not the intended
recipient, or a person responsible for delivering it to the intended
recipient, please DO NOT disclose the contents to another person, store or
copy the information in any medium, or use any of the information contained
in or attached to this transmission for any purpose. If you have received
this transmission in error, please immediately notify the sender by reply
email or at privacy at plantronics.com, and destroy the original transmission
and its attachments without reading or saving in any manner.

For further information about Plantronics - the Company, its products,
brands, partners, please visit our website www.plantronics.com.

List: http://www.antlr.org/mailman/listinfo/antlr-interest
Unsubscribe:
http://www.antlr.org/mailman/options/antlr-interest/your-email-address


From jokeserver at gmail.com  Sun Oct 30 21:48:38 2011
From: jokeserver at gmail.com (Benjamin S Wolf)
Date: Mon, 31 Oct 2011 00:48:38 -0400
Subject: [antlr-interest] Antlr3.4 Python bugs, workarounds
In-Reply-To: <CAN51Nt7pQOLgNAfb-NnFEXskGS-zq_mBD7isLq8pSyKJtBaW_A@mail.gmail.com>
References: <CAN51Nt60R=9DF1+BWvsnMQShLE7GRpXmm5o30DnZ+KLZq8duUA@mail.gmail.com>
	<CAN51Nt4Dp7yMUSkNqYnrkMvthRB2p0UA4g4TB5DZhi-ywn0THA@mail.gmail.com>
	<CAE33G67XoyDyGcdL2YmsptmU0S_NyPfTHrb1zanA3Y0t8miDjA@mail.gmail.com>
	<CAN51Nt7pQOLgNAfb-NnFEXskGS-zq_mBD7isLq8pSyKJtBaW_A@mail.gmail.com>
Message-ID: <CAN51Nt4+ALumb+_9zt-Bk9vRQFcTkdwrm1abjcv-b+DSybXVnw@mail.gmail.com>

On Fri, Oct 28, 2011 at 11:56 AM, Benjamin Niemann <pink at odahoda.de> wrote:
> On Fri, Oct 7, 2011 at 11:17 PM, Benjamin S Wolf <jokeserver at gmail.com> wrote:
>> I've discovered two bugs in working with the Python target to generate lexers.
>>
>> The first is in that when supplying k, the generated code for special
>> state transitions is invalid: the "elif" keyword is split across lines
>> as "el\nif", so the python interpreter crashes upon reading "el".
>
> That's been reported before, but I have problem reproducing it. Are
> you using antlr-3.4-complete.jar (I can only see this problem with
> that build) or did you build it yourself from antlr-3.4.tar.gz (or
> something else completely)?

Using antlr-3.4-complete.jar, yes.

I tried reducing my test case as far as I could, but it won't generate
the DFA with the special state transitions if I use fewer than 57
rules. Eventually I tried generating 57 rules to trigger it, and here
is the (excruciatingly ugly) result. (Note that I have rules that
start with 'a' and rules that start with 'b'. This triggers the
"el\nif" case. If I only used 'a' rules, the special state transition
would only need to check "if s == 0" since no other character is
valid.)
-------------- next part --------------
A non-text attachment was scrubbed...
Name: minimal.g
Type: application/octet-stream
Size: 827 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20111031/33310970/attachment.obj 

From dawood at us.ibm.com  Mon Oct 31 06:06:31 2011
From: dawood at us.ibm.com (David Wood)
Date: Mon, 31 Oct 2011 09:06:31 -0400
Subject: [antlr-interest] NPE parsing tree grammar
In-Reply-To: <8C54F2A9-A18A-4D34-97EA-47DE7F61DAD5@cs.usfca.edu>
References: <OF9DEB9E4C.A4A426E5-ON85257936.0061A0B4-85257936.0061C3ED@us.ibm.com>
	<8C54F2A9-A18A-4D34-97EA-47DE7F61DAD5@cs.usfca.edu>
Message-ID: <OF3E47C5E4.5601BE6E-ON8525793A.0047EBDD-8525793A.004802BA@us.ibm.com>

Are you planning a 3.5 release anytime soon?

David Wood 
Computing Systems for Wireless Networks
IBM TJ Watson Research Center
dawood at us.ibm.com
914-784-5123 (office), 914-396-6515 (mobile)




From:   Terence Parr <parrt at cs.usfca.edu>
To:     David Wood/Watson/IBM at IBMUS
Cc:     antlr-interest at antlr.org
Date:   10/27/2011 03:27 PM
Subject:        Re: [antlr-interest] NPE parsing tree grammar



works in latest v3 main trunk. can u grab from depot/...on site?
T
On Oct 27, 2011, at 10:47 AM, David Wood wrote:

> I would submit a bug, but I can't find a JIRA admin on the site to 
create 
> me an account.
> 
> Exception in thread "main" java.lang.NullPointerException
>        at org.antlr.runtime.tree.BaseTreeAdaptor.becomeRoot(
> BaseTreeAdaptor.java:145)
>        at 
> com.ibm.watson.dsm.parser.dsm.antlr.DSMTreeGrammar.relationalExpression(
> DSMTreeGrammar.java:3058)
>        at 
> com.ibm.watson.dsm.parser.dsm.antlr.DSMTreeGrammar.equalityExpression(
> DSMTreeGrammar.java:2920)
>        at 
> com.ibm.watson.dsm.parser.dsm.antlr.DSMTreeGrammar.andExpression(
> DSMTreeGrammar.java:2819)
>        at 
> 
com.ibm.watson.dsm.parser.dsm.antlr.DSMTreeGrammar.exclusiveOrExpression(
> DSMTreeGrammar.java:2718)
>        at 
> 
com.ibm.watson.dsm.parser.dsm.antlr.DSMTreeGrammar.inclusiveOrExpression(
> DSMTreeGrammar.java:2617)
>        at 
> 
com.ibm.watson.dsm.parser.dsm.antlr.DSMTreeGrammar.conditionalAndExpression(
> DSMTreeGrammar.java:2516)
>        at 
> 
com.ibm.watson.dsm.parser.dsm.antlr.DSMTreeGrammar.conditionalOrExpression(
> DSMTreeGrammar.java:2415)
>        at com.ibm.watson.dsm.parser.dsm.antlr.DSMTreeGrammar.expression(
> DSMTreeGrammar.java:2355)
>        at 
> 
com.ibm.watson.dsm.parser.dsm.antlr.DSMTreeGrammar.conditionalExpression(
> DSMTreeGrammar.java:2293)
>        at com.ibm.watson.dsm.parser.dsm.antlr.DSMTreeGrammar.rule(
> DSMTreeGrammar.java:1338)
>        at 
> com.ibm.watson.dsm.parser.dsm.antlr.DSMTreeGrammar.ruleStatement(
> DSMTreeGrammar.java:1230)
>        at com.ibm.watson.dsm.parser.dsm.antlr.DSMTreeGrammar.ruleSet(
> DSMTreeGrammar.java:1155)
>        at com.ibm.watson.dsm.parser.dsm.antlr.DSMTreeGrammar.root(
> DSMTreeGrammar.java:170)
>        at 
com.ibm.watson.dsm.parser.dsm.DSMParser.parse(DSMParser.java:63
> )
>        at 
com.ibm.watson.dsm.parser.dsm.DSMParser.main(DSMParser.java:79)
> 
> 
> 
> David Wood 
> Computing Systems for Wireless Networks
> IBM TJ Watson Research Center
> dawood at us.ibm.com
> 914-784-5123 (office), 914-396-6515 (mobile)
> <DSMGrammar.g><DSMTreeGrammar.g><DSMParser.java>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: 
http://www.antlr.org/mailman/options/antlr-interest/your-email-address



From parrt at cs.usfca.edu  Mon Oct 31 08:26:11 2011
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon, 31 Oct 2011 08:26:11 -0700
Subject: [antlr-interest] NPE parsing tree grammar
In-Reply-To: <OF3E47C5E4.5601BE6E-ON8525793A.0047EBDD-8525793A.004802BA@us.ibm.com>
References: <OF9DEB9E4C.A4A426E5-ON85257936.0061A0B4-85257936.0061C3ED@us.ibm.com>
	<8C54F2A9-A18A-4D34-97EA-47DE7F61DAD5@cs.usfca.edu>
	<OF3E47C5E4.5601BE6E-ON8525793A.0047EBDD-8525793A.004802BA@us.ibm.com>
Message-ID: <C734B660-FCAA-44E7-B718-3E224A6C3377@cs.usfca.edu>

3.4.1? well, we're collecting bugs for a bit. daily builds will be updated. Sam should have fixed now.
Ter
On Oct 31, 2011, at 6:06 AM, David Wood wrote:

> Are you planning a 3.5 release anytime soon? 
> 
> David Wood 
> Computing Systems for Wireless Networks
> IBM TJ Watson Research Center
> dawood at us.ibm.com
> 914-784-5123 (office), 914-396-6515 (mobile)
> 
> 
> 
> 
> From:        Terence Parr <parrt at cs.usfca.edu> 
> To:        David Wood/Watson/IBM at IBMUS 
> Cc:        antlr-interest at antlr.org 
> Date:        10/27/2011 03:27 PM 
> Subject:        Re: [antlr-interest] NPE parsing tree grammar 
> 
> 
> 
> works in latest v3 main trunk. can u grab from depot/...on site?
> T
> On Oct 27, 2011, at 10:47 AM, David Wood wrote:
> 
> > I would submit a bug, but I can't find a JIRA admin on the site to create 
> > me an account.
> > 
> > Exception in thread "main" java.lang.NullPointerException
> >        at org.antlr.runtime.tree.BaseTreeAdaptor.becomeRoot(
> > BaseTreeAdaptor.java:145)
> >        at 
> > com.ibm.watson.dsm.parser.dsm.antlr.DSMTreeGrammar.relationalExpression(
> > DSMTreeGrammar.java:3058)
> >        at 
> > com.ibm.watson.dsm.parser.dsm.antlr.DSMTreeGrammar.equalityExpression(
> > DSMTreeGrammar.java:2920)
> >        at 
> > com.ibm.watson.dsm.parser.dsm.antlr.DSMTreeGrammar.andExpression(
> > DSMTreeGrammar.java:2819)
> >        at 
> > com.ibm.watson.dsm.parser.dsm.antlr.DSMTreeGrammar.exclusiveOrExpression(
> > DSMTreeGrammar.java:2718)
> >        at 
> > com.ibm.watson.dsm.parser.dsm.antlr.DSMTreeGrammar.inclusiveOrExpression(
> > DSMTreeGrammar.java:2617)
> >        at 
> > com.ibm.watson.dsm.parser.dsm.antlr.DSMTreeGrammar.conditionalAndExpression(
> > DSMTreeGrammar.java:2516)
> >        at 
> > com.ibm.watson.dsm.parser.dsm.antlr.DSMTreeGrammar.conditionalOrExpression(
> > DSMTreeGrammar.java:2415)
> >        at com.ibm.watson.dsm.parser.dsm.antlr.DSMTreeGrammar.expression(
> > DSMTreeGrammar.java:2355)
> >        at 
> > com.ibm.watson.dsm.parser.dsm.antlr.DSMTreeGrammar.conditionalExpression(
> > DSMTreeGrammar.java:2293)
> >        at com.ibm.watson.dsm.parser.dsm.antlr.DSMTreeGrammar.rule(
> > DSMTreeGrammar.java:1338)
> >        at 
> > com.ibm.watson.dsm.parser.dsm.antlr.DSMTreeGrammar.ruleStatement(
> > DSMTreeGrammar.java:1230)
> >        at com.ibm.watson.dsm.parser.dsm.antlr.DSMTreeGrammar.ruleSet(
> > DSMTreeGrammar.java:1155)
> >        at com.ibm.watson.dsm.parser.dsm.antlr.DSMTreeGrammar.root(
> > DSMTreeGrammar.java:170)
> >        at com.ibm.watson.dsm.parser.dsm.DSMParser.parse(DSMParser.java:63
> > )
> >        at com.ibm.watson.dsm.parser.dsm.DSMParser.main(DSMParser.java:79)
> > 
> > 
> > 
> > David Wood 
> > Computing Systems for Wireless Networks
> > IBM TJ Watson Research Center
> > dawood at us.ibm.com
> > 914-784-5123 (office), 914-396-6515 (mobile)
> > <DSMGrammar.g><DSMTreeGrammar.g><DSMParser.java>
> > List: http://www.antlr.org/mailman/listinfo/antlr-interest
> > Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
> 
> 


From andy.voelkel at plantronics.com  Mon Oct 31 10:08:10 2011
From: andy.voelkel at plantronics.com (Voelkel, Andy)
Date: Mon, 31 Oct 2011 17:08:10 +0000
Subject: [antlr-interest] working examples for StringTemplate4 and C#?
 (I'm	stuck again)
In-Reply-To: <00ae01cc977e$d7dd2690$879773b0$@pixelminegames.com>
References: <92E9AB4D42199B4793CE24E094BAEE070E91B5@USSCMB03.plt.plantronics.com>
	<00ae01cc977e$d7dd2690$879773b0$@pixelminegames.com>
Message-ID: <92E9AB4D42199B4793CE24E094BAEE070E9605@USSCMB03.plt.plantronics.com>

Hi Sam,

Is this helpful:?

        System.dll!System.Uri.CreateThis(string uri, bool dontEscape, System.UriKind uriKind) + 0x112 bytes
        System.dll!System.Uri.Uri(string uriString) + 0x15 bytes
        Antlr4.StringTemplate.dll!Antlr4.StringTemplate.TemplateGroupFile.TemplateGroupFile(string fileName, char delimiterStartChar, char delimiterStopChar) + 0x135 bytes
>       Tree1.exe!Eval.Eval(Antlr.Runtime.Tree.ITreeNodeStream input, Antlr.Runtime.RecognizerSharedState state) Line 61 + 0x20 bytes   C#
        Tree1.exe!Eval.Eval(Antlr.Runtime.Tree.ITreeNodeStream input) Line 51 + 0x23 bytes      C#
        Tree1.exe!Program.Main(string[] args) Line 25 + 0x18 bytes      C#
        [Native to Managed Transition]
        [Managed to Native Transition]
        mscorlib.dll!System.AppDomain.ExecuteAssembly(string assemblyFile, System.Security.Policy.Evidence assemblySecurity, string[] args) + 0x6d bytes
        Microsoft.VisualStudio.HostingProcess.Utilities.dll!Microsoft.VisualStudio.HostingProcess.HostProc.RunUsersAssembly() + 0x2a bytes
        mscorlib.dll!System.Threading.ThreadHelper.ThreadStart_Context(object state) + 0x63 bytes
        mscorlib.dll!System.Threading.ExecutionContext.Run(System.Threading.ExecutionContext executionContext, System.Threading.ContextCallback callback, object state, bool ignoreSyncCtx) + 0xb0 bytes
        mscorlib.dll!System.Threading.ExecutionContext.Run(System.Threading.ExecutionContext executionContext, System.Threading.ContextCallback callback, object state) + 0x2c bytes
        mscorlib.dll!System.Threading.ThreadHelper.ThreadStart() + 0x44 bytes
        [Native to Managed Transition]


-----Original Message-----
From: Sam Harwell [mailto:sharwell at pixelminegames.com]
Sent: Sunday, October 30, 2011 8:41 PM
To: Voelkel, Andy; 'ANTLR interest'
Subject: RE: [antlr-interest] working examples for StringTemplate4 and C#? (I'm stuck again)

Do you have a stack trace or any other information about where the exception occurs? In Visual Studio, you can get a stack trace even if you don't have the source code by going to Debug>Exceptions..., checking the box next to UriFormatException, and then looking at the Call Stack window after the exception is thrown.

Sam

-----Original Message-----
From: antlr-interest-bounces at antlr.org
[mailto:antlr-interest-bounces at antlr.org] On Behalf Of Voelkel, Andy
Sent: Sunday, October 30, 2011 5:05 PM
To: 'ANTLR interest'
Subject: [antlr-interest] working examples for StringTemplate4 and C#? (I'm stuck again)

Hi,

I'm getting stuck trying to start using template group files. I try this to open my .stg file:

TemplateGroup Tg = new TemplateGroupFile("RTX.stg", '<', '>');

.. and I get a UriFormatException, "The format of the URI could not be determined".

Are there any working examples of using ST4 with C# that anyone could point me to? I'll gladly update the ST4 Wiki (which seems to be out of date) as I get simple examples working.

Or would I be better off just sticking with ST3?


-          Andy

________________________________

CONFIDENTIALITY NOTICE: This e-mail transmission, and any documents, files or previous e-mail messages attached to it, may contain information that is confidential and/or legally privileged. If you are not the intended recipient, or a person responsible for delivering it to the intended recipient, please DO NOT disclose the contents to another person, store or copy the information in any medium, or use any of the information contained in or attached to this transmission for any purpose. If you have received this transmission in error, please immediately notify the sender by reply email or at privacy at plantronics.com, and destroy the original transmission and its attachments without reading or saving in any manner.

For further information about Plantronics - the Company, its products, brands, partners, please visit our website www.plantronics.com.

List: http://www.antlr.org/mailman/listinfo/antlr-interest
Unsubscribe:
http://www.antlr.org/mailman/options/antlr-interest/your-email-address



________________________________

CONFIDENTIALITY NOTICE: This e-mail transmission, and any documents, files or previous e-mail messages attached to it, may contain information that is confidential and/or legally privileged. If you are not the intended recipient, or a person responsible for delivering it to the intended recipient, please DO NOT disclose the contents to another person, store or copy the information in any medium, or use any of the information contained in or attached to this transmission for any purpose. If you have received this transmission in error, please immediately notify the sender by reply email or at privacy at plantronics.com, and destroy the original transmission and its attachments without reading or saving in any manner.

For further information about Plantronics - the Company, its products, brands, partners, please visit our website www.plantronics.com.

From David.Weiler-Thiessen at purina.nestle.com  Mon Oct 31 10:24:28 2011
From: David.Weiler-Thiessen at purina.nestle.com (Weiler-Thiessen, David, SASKATOON,
	Engineering)
Date: Mon, 31 Oct 2011 12:24:28 -0500
Subject: [antlr-interest] How to Parse a datastream of tokens and values
Message-ID: <733EAE2B81DE7E46B9021523960043A601547B36@USSTLE0006.nestle.com>

Hi 

 

I am trying to parse a string that is a collection of tokens and values.   For example:

PRCLINTON

 

Where PR is my token, and CLINTON is the value for the token.

 

I have started a simple grammar, see below, but it won't parse the sample above.

 

message              :               productionReceipt

                ;

                

productionReceipt

                :               PR VALUE

                ;

                

PR           :               'PR'

                ;

                

VALUE  :               ('a'..'z'|'A'..'Z')+

                ;

 

 

What am I doing wrong?  I get a MisMatchedTokenException in ANTLRWorks.

David Weiler-Thiessen 
Nestl? Purina PetCare 
phone: 306-933-0232 
cell: 306-291-9770 

This e-mail, its electronic document attachments, and the contents of its website linkages may contain confidential information. This information is intended solely for use by the individual or entity to whom it is addressed. If you have received this information in error, please notify the sender immediately and promptly destroy the material and any accompanying attachments from your system.


From finis at in.tum.de  Mon Oct 31 10:41:01 2011
From: finis at in.tum.de (Jan Finis)
Date: Mon, 31 Oct 2011 18:41:01 +0100
Subject: [antlr-interest] How to get the end line / end column of a a token
	/ rule
Message-ID: <4EAEDDAD.6070309@in.tum.de>

Hello,

I am trying to build a sophisticated AST using ANTLR. The attributes 
.line and .pos allow me to obtain the start line and column position of 
a token. However, is it also possible to get the end line and column? 
(since I want to have that information in the AST as well to allow 
underlining specific rules in the input text)

I think it would be possible by using .text and then counting chars and 
newlines in that string. However, I think text building is costly and 
not the right way to do it.

So what is the "best" way to get the end line and end column of a token 
or rule in ANTLR?

Best regards,
Jan Finis

From bkiers at gmail.com  Mon Oct 31 11:09:01 2011
From: bkiers at gmail.com (Bart Kiers)
Date: Mon, 31 Oct 2011 19:09:01 +0100
Subject: [antlr-interest] How to Parse a datastream of tokens and values
In-Reply-To: <733EAE2B81DE7E46B9021523960043A601547B36@USSTLE0006.nestle.com>
References: <733EAE2B81DE7E46B9021523960043A601547B36@USSTLE0006.nestle.com>
Message-ID: <CAOrgODZsyk3hhQTMEoBvA8Te96WO8ixAA8tBTM8zx0x3_ZMWZA@mail.gmail.com>

Hi David,

ANTLR's lexer greedily matches characters: the input "PRCLINTON" is being
tokenized as a single VALUE-token, not as a PR- and VALUE-token.

Regards,

Bart.


On Mon, Oct 31, 2011 at 6:24 PM, Weiler-Thiessen, David, SASKATOON,
Engineering <David.Weiler-Thiessen at purina.nestle.com> wrote:

> Hi
>
>
>
> I am trying to parse a string that is a collection of tokens and values.
> For example:
>
> PRCLINTON
>
>
>
> Where PR is my token, and CLINTON is the value for the token.
>
>
>
> I have started a simple grammar, see below, but it won't parse the sample
> above.
>
>
>
> message              :               productionReceipt
>
>                ;
>
>
>
> productionReceipt
>
>                :               PR VALUE
>
>                ;
>
>
>
> PR           :               'PR'
>
>                ;
>
>
>
> VALUE  :               ('a'..'z'|'A'..'Z')+
>
>                ;
>
>
>
>
>
> What am I doing wrong?  I get a MisMatchedTokenException in ANTLRWorks.
>
> David Weiler-Thiessen
> Nestl? Purina PetCare
> phone: 306-933-0232
> cell: 306-291-9770
>
> This e-mail, its electronic document attachments, and the contents of its
> website linkages may contain confidential information. This information is
> intended solely for use by the individual or entity to whom it is
> addressed. If you have received this information in error, please notify
> the sender immediately and promptly destroy the material and any
> accompanying attachments from your system.
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>

From David.Weiler-Thiessen at purina.nestle.com  Mon Oct 31 14:01:02 2011
From: David.Weiler-Thiessen at purina.nestle.com (Weiler-Thiessen, David, SASKATOON,
	Engineering)
Date: Mon, 31 Oct 2011 16:01:02 -0500
Subject: [antlr-interest] How to Parse a datastream of tokens and values
In-Reply-To: <CAOrgODZsyk3hhQTMEoBvA8Te96WO8ixAA8tBTM8zx0x3_ZMWZA@mail.gmail.com>
References: <733EAE2B81DE7E46B9021523960043A601547B36@USSTLE0006.nestle.com>
	<CAOrgODZsyk3hhQTMEoBvA8Te96WO8ixAA8tBTM8zx0x3_ZMWZA@mail.gmail.com>
Message-ID: <733EAE2B81DE7E46B9021523960043A601547CC3@USSTLE0006.nestle.com>

Hi 

 

Yes, I can see how that is happening.

 

So, in my case, because I have token value pairs, and the values are not terminated by something deterministic, I can't use ANTLR to lex the input stream.  Is that correct?

 

Turns out that the input stream is fix length format, so it can be parsed in other ways.  I was just thinking that this might be a problem space that ANTLR could address also.

 

David Weiler-Thiessen 
Nestl? Purina PetCare 
phone: 306-933-0232 
cell: 306-291-9770 

This e-mail, its electronic document attachments, and the contents of its website linkages may contain confidential information. This information is intended solely for use by the individual or entity to whom it is addressed. If you have received this information in error, please notify the sender immediately and promptly destroy the material and any accompanying attachments from your system.

From: Bart Kiers [mailto:bkiers at gmail.com] 
Sent: Monday, October 31, 2011 12:09 PM
To: Weiler-Thiessen,David,SASKATOON,Engineering
Cc: antlr-interest at antlr.org
Subject: Re: [antlr-interest] How to Parse a datastream of tokens and values

 

Hi David,

 

ANTLR's lexer greedily matches characters: the input "PRCLINTON" is being tokenized as a single VALUE-token, not as a PR- and VALUE-token.

 

Regards,

 

Bart.

 

On Mon, Oct 31, 2011 at 6:24 PM, Weiler-Thiessen, David, SASKATOON, Engineering <David.Weiler-Thiessen at purina.nestle.com> wrote:

Hi



I am trying to parse a string that is a collection of tokens and values.   For example:

PRCLINTON



Where PR is my token, and CLINTON is the value for the token.



I have started a simple grammar, see below, but it won't parse the sample above.



message              :               productionReceipt

               ;



productionReceipt

               :               PR VALUE

               ;



PR           :               'PR'

               ;



VALUE  :               ('a'..'z'|'A'..'Z')+

               ;





What am I doing wrong?  I get a MisMatchedTokenException in ANTLRWorks.

David Weiler-Thiessen
Nestl? Purina PetCare
phone: 306-933-0232
cell: 306-291-9770

This e-mail, its electronic document attachments, and the contents of its website linkages may contain confidential information. This information is intended solely for use by the individual or entity to whom it is addressed. If you have received this information in error, please notify the sender immediately and promptly destroy the material and any accompanying attachments from your system.


List: http://www.antlr.org/mailman/listinfo/antlr-interest
Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address

 


From bkiers at gmail.com  Mon Oct 31 14:20:51 2011
From: bkiers at gmail.com (Bart Kiers)
Date: Mon, 31 Oct 2011 22:20:51 +0100
Subject: [antlr-interest] How to Parse a datastream of tokens and values
In-Reply-To: <733EAE2B81DE7E46B9021523960043A601547CC3@USSTLE0006.nestle.com>
References: <733EAE2B81DE7E46B9021523960043A601547B36@USSTLE0006.nestle.com>
	<CAOrgODZsyk3hhQTMEoBvA8Te96WO8ixAA8tBTM8zx0x3_ZMWZA@mail.gmail.com>
	<733EAE2B81DE7E46B9021523960043A601547CC3@USSTLE0006.nestle.com>
Message-ID: <CAOrgODZWqeMzP8G23qGCBnJip-AhOueaA1yRw87t-ss_R6RLgA@mail.gmail.com>

Sure, you can check, using a gated semantic predicate, if there is no "PR"
ahead when matching the VALUE-token.

Something like this:

grammar T;

@lexer::members {
  private boolean ahead(String text) {
    for(int i = 0; i < text.length(); i++) {
      if(text.charAt(i) != input.LA(i + 1)) {
        return false;
      }
    }
    return true;
  }
}

message
  :  productionReceipt EOF
  ;

productionReceipt
  :  PR VALUE
  ;

PR : 'PR';

VALUE
  :  {!ahead("PR")}?=> ('a'..'z'|'A'..'Z')+
  ;


Regards,

Bart.


On Mon, Oct 31, 2011 at 10:01 PM,
Weiler-Thiessen,David,SASKATOON,Engineering <
David.Weiler-Thiessen at purina.nestle.com> wrote:

>  Hi ****
>
> ** **
>
> Yes, I can see how that is happening.****
>
> ** **
>
> So, in my case, because I have token value pairs, and the values are not
> terminated by something deterministic, I can?t use ANTLR to lex the input
> stream.  Is that correct?****
>
> ** **
>
> Turns out that the input stream is fix length format, so it can be parsed
> in other ways.  I was just thinking that this might be a problem space that
> ANTLR could address also.****
>
> ** **
>
> David Weiler-Thiessen
> Nestl? Purina PetCare
> phone: 306-933-0232
> cell: 306-291-9770 ****
>
> *This e-mail, its electronic document attachments, and the contents of
> its website linkages may contain confidential information. This information
> is intended solely for use by the individual or entity to whom it is
> addressed. If you have received this information in error, please notify
> the sender immediately and promptly destroy the material and any
> accompanying attachments from your system.*****
>
> *From:* Bart Kiers [mailto:bkiers at gmail.com]
> *Sent:* Monday, October 31, 2011 12:09 PM
> *To:* Weiler-Thiessen,David,SASKATOON,Engineering
> *Cc:* antlr-interest at antlr.org
> *Subject:* Re: [antlr-interest] How to Parse a datastream of tokens and
> values****
>
> ** **
>
> Hi David,****
>
> ** **
>
> ANTLR's lexer greedily matches characters: the input "PRCLINTON" is being
> tokenized as a single VALUE-token, not as a PR- and VALUE-token.****
>
> ** **
>
> Regards,****
>
> ** **
>
> Bart.****
>
> ** **
>
> On Mon, Oct 31, 2011 at 6:24 PM, Weiler-Thiessen, David, SASKATOON,
> Engineering <David.Weiler-Thiessen at purina.nestle.com> wrote:****
>
> Hi
>
>
>
> I am trying to parse a string that is a collection of tokens and values.
> For example:
>
> PRCLINTON
>
>
>
> Where PR is my token, and CLINTON is the value for the token.
>
>
>
> I have started a simple grammar, see below, but it won't parse the sample
> above.
>
>
>
> message              :               productionReceipt
>
>                ;
>
>
>
> productionReceipt
>
>                :               PR VALUE
>
>                ;
>
>
>
> PR           :               'PR'
>
>                ;
>
>
>
> VALUE  :               ('a'..'z'|'A'..'Z')+
>
>                ;
>
>
>
>
>
> What am I doing wrong?  I get a MisMatchedTokenException in ANTLRWorks.
>
> David Weiler-Thiessen
> Nestl? Purina PetCare
> phone: 306-933-0232
> cell: 306-291-9770
>
> This e-mail, its electronic document attachments, and the contents of its
> website linkages may contain confidential information. This information is
> intended solely for use by the individual or entity to whom it is
> addressed. If you have received this information in error, please notify
> the sender immediately and promptly destroy the material and any
> accompanying attachments from your system.
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address****
>
> ** **
>

From kierans777 at gmail.com  Mon Oct 31 18:04:48 2011
From: kierans777 at gmail.com (Kieran Simpson)
Date: Tue, 01 Nov 2011 12:04:48 +1100
Subject: [antlr-interest] Problem building custom error handlers against C
	target 3.4
Message-ID: <4EAF45B0.2000506@gmail.com>

I'm using the 3.4 tarball (which when decompressed is really 
libantlr3c-3.4-beta4)

I'm wanting to override the default error handlers so that they're more 
flexible in my application.  However trying to compile my (C++) code I get

In file included from <my source>
/usr/include/antlr3lexer.h:130: error: expected unqualified-id before 
')' token

$ g++ -v
Using built-in specs.
Target: x86_64-apple-darwin10
Configured with: ../gcc-4.4.6/configure --prefix=/opt/local 
--build=x86_64-apple-darwin10 
--enable-languages=c,c++,objc,obj-c++,java,fortran 
--libdir=/opt/local/lib/gcc44 --includedir=/opt/local/include/gcc44 
--infodir=/opt/local/share/info --mandir=/opt/local/share/man 
--with-local-prefix=/opt/local --with-system-zlib --disable-nls 
--program-suffix=-mp-4.4 
--with-gxx-include-dir=/opt/local/include/gcc44/c++/ 
--with-gmp=/opt/local --with-mpfr=/opt/local --enable-stage1-checking 
--disable-multilib --enable-fully-dynamic-string
Thread model: posix
gcc version 4.4.6 (GCC)

Has anyone else had this problem on OSX Snow Leopard and the above g++ 
version?

Cheers,

