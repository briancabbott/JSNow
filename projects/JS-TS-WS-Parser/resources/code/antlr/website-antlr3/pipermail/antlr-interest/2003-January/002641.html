<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [antlr-interest] When does AST construction go through factory?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:antlr-interest%40antlr.org?Subject=%5Bantlr-interest%5D%20When%20does%20AST%20construction%20go%20through%20factory%3F&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002640.html">
   <LINK REL="Next"  HREF="002642.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[antlr-interest] When does AST construction go through factory?</H1>
    <B>Daniel Gackle</B> 
    <A HREF="mailto:antlr-interest%40antlr.org?Subject=%5Bantlr-interest%5D%20When%20does%20AST%20construction%20go%20through%20factory%3F&In-Reply-To="
       TITLE="[antlr-interest] When does AST construction go through factory?">gackle at shaw.ca
       </A><BR>
    <I>Thu Jan 16 22:18:19 PST 2003</I>
    <P><UL>
        <LI>Previous message: <A HREF="002640.html">[antlr-interest] Announcing a graduate computer language course at USF
</A></li>
        <LI>Next message: <A HREF="002642.html">[antlr-interest] When does AST construction go through factory?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2641">[ date ]</a>
              <a href="thread.html#2641">[ thread ]</a>
              <a href="subject.html#2641">[ subject ]</a>
              <a href="author.html#2641">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Apologies if this has been discussed before.  I know there was a thread on
this a couple of months ago, but I can't find answers to my questions in the
archives.  I'm seeing different behavior with heterogeneous AST creation.
Sometimes the AST factory gets called and sometimes it doesn't.  For
example, suppose IDENT is a lexer token whereas TYPE is an imaginary token
used in an action statement like ## = #(#[TYPE,&quot;TYPE&quot;], ##).  I map each of
them to a specific AST type:

tokens {
	IDENT&lt;AST=MyIdentifierNode&gt;;
	TYPE&lt;AST=MyTypeNode&gt;;
}

What I'm seeing is that in one case the AST is created via the AST factory:

astFactory.create(TYPE,&quot;TYPE&quot;)

while in the other it is not:

tmp277_AST = new MyIdentifierNode(LT(1));

This seems to be foiling my attempts to intercept the creation of each AST
node by means of a customized AST factory.  My questions are:

(1) When exactly does the AST factory get used, and when does new get used
instead? (Does it have to do with lexer tokens vs. imaginary tokens, or is
there some other criterion?)
(2) Is this the desired behavior?  If so, why?
(3) Any suggestions on a workaround that would allow me to &quot;get at&quot; the AST
construction of those non-factory nodes?

Many thanks,
Daniel


 

Your use of Yahoo! Groups is subject to <A HREF="http://docs.yahoo.com/info/terms/">http://docs.yahoo.com/info/terms/</A> 

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002640.html">[antlr-interest] Announcing a graduate computer language course at USF
</A></li>
	<LI>Next message: <A HREF="002642.html">[antlr-interest] When does AST construction go through factory?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2641">[ date ]</a>
              <a href="thread.html#2641">[ thread ]</a>
              <a href="subject.html#2641">[ subject ]</a>
              <a href="author.html#2641">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.antlr.org/mailman/listinfo/antlr-interest">More information about the antlr-interest
mailing list</a><br>
</body></html>
