<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [antlr-interest] [3.1.1][C-target] @init/@after pairing lost	with	backtracking/semantic predicates?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20%5B3.1.1%5D%5BC-target%5D%20%40init/%40after%20pairing%20lost%0A%09with%09backtracking/semantic%20predicates%3F&In-Reply-To=%3C1241079004.6313.26.camel%40cartman%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="034255.html">
   <LINK REL="Next"  HREF="034247.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[antlr-interest] [3.1.1][C-target] @init/@after pairing lost	with	backtracking/semantic predicates?</H1>
    <B>Sven Van Echelpoel</B> 
    <A HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20%5B3.1.1%5D%5BC-target%5D%20%40init/%40after%20pairing%20lost%0A%09with%09backtracking/semantic%20predicates%3F&In-Reply-To=%3C1241079004.6313.26.camel%40cartman%3E"
       TITLE="[antlr-interest] [3.1.1][C-target] @init/@after pairing lost	with	backtracking/semantic predicates?">sven.van.echelpoel at empolis.com
       </A><BR>
    <I>Thu Apr 30 01:10:04 PDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="034255.html">[antlr-interest] Error with C# target (CSharp3)
</A></li>
        <LI>Next message: <A HREF="034247.html">[antlr-interest] [3.1.1][C-target] @init/@after pairing lost with	backtracking/semantic predicates?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#34235">[ date ]</a>
              <a href="thread.html#34235">[ thread ]</a>
              <a href="subject.html#34235">[ subject ]</a>
              <a href="author.html#34235">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

I have observed that the pairing of @init/@after seems to be lost once
backtracking is introduced, at least in a tree grammar. Most of my rules
look like this:

some_rule
  @init { enterParserRule( SomeRule ); }
  @after { leaveParserRule( SomeRule ); }
  : //  the actual rule
  ;

I have one ordinary grammar and a bunch of tree grammars in a pipeline.
The grammars in the front of the pipeline have some rules that either
have automatic backtracking switched on, or have some syntactic
predicates. The grammars at the end of the pipeline do not require this.
Now, I have observed that those grammars in which I have introduced
backtracking the symmetric pairing of @init/@after is lost. I.E. I get
much more enterParserRule() calls then leaveParserRule(). Because the
code behind it relies on this symmetry, I find myself in somewhat of a
pickle.

Note that I'm not using scopes in these instances, as I want to keep the
actual implementation of the parser neatly separated from the generated
parser. I only use scopes to communicate values up the stack during
parsing.

Would it be correct to say that during backtracking the 'stack' is not
properly unwound, or am I missing something obvious? I'm not saying that
this is a bug or that there may not be very good reasons for this
behavior. I'm just trying to understand what I'm observing, so that I
can properly deal with this.

Any input would be greatly appreciated. Thanks,

Sven

</PRE>







<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="034255.html">[antlr-interest] Error with C# target (CSharp3)
</A></li>
	<LI>Next message: <A HREF="034247.html">[antlr-interest] [3.1.1][C-target] @init/@after pairing lost with	backtracking/semantic predicates?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#34235">[ date ]</a>
              <a href="thread.html#34235">[ thread ]</a>
              <a href="subject.html#34235">[ subject ]</a>
              <a href="author.html#34235">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.antlr.org/mailman/listinfo/antlr-interest">More information about the antlr-interest
mailing list</a><br>
</body></html>
