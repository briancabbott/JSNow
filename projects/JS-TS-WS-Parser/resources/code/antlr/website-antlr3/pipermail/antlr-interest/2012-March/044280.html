<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [antlr-interest] [newbie] AST Rewriting
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20%5Bnewbie%5D%20AST%20Rewriting&In-Reply-To=%3CCAN45N13KUOLhaAogV%3DUaT3qRQy%3D2qwe-CbBVff6qjft8nqN_yA%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="044277.html">
   <LINK REL="Next"  HREF="044282.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[antlr-interest] [newbie] AST Rewriting</H1>
    <B>Eric</B> 
    <A HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20%5Bnewbie%5D%20AST%20Rewriting&In-Reply-To=%3CCAN45N13KUOLhaAogV%3DUaT3qRQy%3D2qwe-CbBVff6qjft8nqN_yA%40mail.gmail.com%3E"
       TITLE="[antlr-interest] [newbie] AST Rewriting">researcher0x00 at gmail.com
       </A><BR>
    <I>Mon Mar 19 08:33:34 PDT 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="044277.html">[antlr-interest] [newbie] AST Rewriting
</A></li>
        <LI>Next message: <A HREF="044282.html">[antlr-interest] [newbie] AST Rewriting
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#44280">[ date ]</a>
              <a href="thread.html#44280">[ thread ]</a>
              <a href="subject.html#44280">[ subject ]</a>
              <a href="author.html#44280">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Robin,

First off, it is very likely that what you want to do can be done by using
tree rewrite rules, I can not say positively because I haven't tried it for
your problem.

I personally have a hard time understanding rewrite rules when I am doing
multi-pass AST transformations, i.e. tree rewrites, as such I now do all
of my transformations via calls to the tree API. Also note that ANTLR
4.x will no longer be supporting tree rewrites in the grammar; currently
ANTLR 3.x be will the last version to support them.

Since you already know how to get the AST, all you have to do now is treat
the AST as any n-ary tree and manipulate.

Instead of jumping right into your problem, take some time to write a tree
walker, a print routine, and some search routines, i.e. find text, find
node type, return a node, return a branch with children, etc.. You will
need to write them because they will help you understand trees and for
debugging.

Next you will need to understand the basic methods in the tree API,
basically the BaseTree, and CommonTree classes.
If you take a look at the previous post &quot;Help with compressin&#8203;g trees and
custom nodes&quot; you will find some C# examples I give for using them.

This suggestion is light on examples because you need to work through it to
learn it.

Remember this is not the only solution, but how I would do it.

Eric





On Mon, Mar 19, 2012 at 7:04 AM, Robin &lt;<A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">diabeteman at gmail.com</A>&gt; wrote:

&gt;<i> Hello list :)
</I>&gt;<i>
</I>&gt;<i> I am trying to rewrite an AST (by filtering out most of the nodes). From
</I>&gt;<i> what i could read on antlr wiki and some interesting forums &amp; other medias,
</I>&gt;<i> you can do this with tree grammars and tree operators &quot;-&gt;&quot;.
</I>&gt;<i>
</I>&gt;<i> The grammar I use to generate AST is here
</I>&gt;<i> <A HREF="http://www.antlr.org/grammar/1207932239307/Java1_5Grammars">http://www.antlr.org/grammar/1207932239307/Java1_5Grammars</A> and here is my
</I>&gt;<i> test rig <A HREF="http://pastebin.com/LeR4miVu">http://pastebin.com/LeR4miVu</A>
</I>&gt;<i>
</I>&gt;<i> I modified JavaTreeParser.g and added the options output = AST; and rewrite
</I>&gt;<i> = true; Also, just for testing purposes, I added &quot;-&gt;&quot; at the end of each
</I>&gt;<i> rule in order to filter out all of the nodes. Here is what it looks like
</I>&gt;<i> <A HREF="http://pastebin.com/u6UG7fEB">http://pastebin.com/u6UG7fEB</A>
</I>&gt;<i>
</I>&gt;<i> The problem is that in my test rig, the returned tree is not rewrited at
</I>&gt;<i> all.
</I>&gt;<i>
</I>&gt;<i> I am sure I'm doing something wrong. Could you help ?
</I>&gt;<i>
</I>&gt;<i> Thanks in advance,
</I>&gt;<i> Robin
</I>&gt;<i>
</I>&gt;<i> List: <A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">http://www.antlr.org/mailman/listinfo/antlr-interest</A>
</I>&gt;<i> Unsubscribe:
</I>&gt;<i> <A HREF="http://www.antlr.org/mailman/options/antlr-interest/your-email-address">http://www.antlr.org/mailman/options/antlr-interest/your-email-address</A>
</I>&gt;<i>
</I></PRE>










<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="044277.html">[antlr-interest] [newbie] AST Rewriting
</A></li>
	<LI>Next message: <A HREF="044282.html">[antlr-interest] [newbie] AST Rewriting
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#44280">[ date ]</a>
              <a href="thread.html#44280">[ thread ]</a>
              <a href="subject.html#44280">[ subject ]</a>
              <a href="author.html#44280">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.antlr.org/mailman/listinfo/antlr-interest">More information about the antlr-interest
mailing list</a><br>
</body></html>
