<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [antlr-interest] C generator is not generating @after  actions
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20C%20generator%20is%20not%20generating%20%40after%20%20actions&In-Reply-To=%3C498C5FC5.2030905%40temporal-wave.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="032782.html">
   <LINK REL="Next"  HREF="032780.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[antlr-interest] C generator is not generating @after  actions</H1>
    <B>Jim Idle</B> 
    <A HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20C%20generator%20is%20not%20generating%20%40after%20%20actions&In-Reply-To=%3C498C5FC5.2030905%40temporal-wave.com%3E"
       TITLE="[antlr-interest] C generator is not generating @after  actions">jimi at temporal-wave.com
       </A><BR>
    <I>Fri Feb  6 08:05:25 PST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="032782.html">[antlr-interest] @SuppressWarnings
</A></li>
        <LI>Next message: <A HREF="032780.html">[antlr-interest] C generator is not generating @after actions
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#32762">[ date ]</a>
              <a href="thread.html#32762">[ thread ]</a>
              <a href="subject.html#32762">[ subject ]</a>
              <a href="author.html#32762">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Gavin Lambert wrote:
&gt;<i> At 12:43 6/02/2009, Jim Idle wrote:
</I>&gt;<i> &gt;Yes, I think that that is a sensible option, however with the C
</I>&gt;<i> &gt;target that implies that you need to link with the socket
</I>&gt;<i> &gt;library and it isn't available everywhere. Maybe a good thing
</I>&gt;<i> &gt;would be to have a -mode=xxxxx option and the xxx options would
</I>&gt;<i> &gt;be just passed into the string templates for the target. Then
</I>&gt;<i> &gt;the target code generation templates could all support target
</I>&gt;<i> &gt;specific things, even if there were some things that made
</I>&gt;<i> &gt;sense to all targets. or perhaps expand -debug to optionally
</I>&gt;<i> &gt;allow -debug=xxxx, yyyy
</I>&gt;<i>
</I>&gt;<i> My point though is that without doing anything extra (no extra command 
</I>&gt;<i> line options, nothing altered in existing grammars) it ought to 
</I>&gt;<i> default to the &quot;robust&quot; mode, that does extra sanity checking (which 
</I>&gt;<i> could compromise performance a bit) -- that way the people who need 
</I>&gt;<i> the benefit the most (those starting out with a new grammar) will get 
</I>&gt;<i> it immediately.
</I>All my experience tells me that I will be answering &quot;How do I make this 
go faster forever though&quot;. It is better require a request for debug 
'style' information/instrumentation, in the way the C compilers do.
&gt;<i>
</I>&gt;<i> Then, once people are confident that their grammars are correct, they 
</I>&gt;<i> set the option to strip out the sanity checks, thereby improving the 
</I>&gt;<i> performance.  Something in the options {} block seems like the best 
</I>&gt;<i> idea for those using ANTLRworks to compile, though a command-line 
</I>&gt;<i> option would be more convenient for those using a build system (then 
</I>&gt;<i> they could compile with sanity checks for their unit test suite and 
</I>&gt;<i> without for the final release).
</I>&gt;<i>
</I>&gt;<i> I don't think it's necessarily target-specific; 
</I>No, neither do I. For instance there could possibly be a 'robust' mode 
in all targets, though exactly what it meant to each target will be 
different.
&gt;<i> while the specific tests might be, I'm sure that there are still 
</I>&gt;<i> sanity checks that could be done even in the other targets.
</I>&gt;<i>
</I>&gt;<i> But for now possibly the &quot;cheapest&quot; option (requiring no changes to 
</I>&gt;<i> ANTLR itself) would be to use something like:
</I>&gt;<i> @headers {
</I>&gt;<i> #define ANTLR_PERFORMANCE
</I>&gt;<i> }
</I>#define ANTLR3_SANITY_CHECK

But otherwise that would do it assuming that I wanted to add lots of 
#ifdefs. It is however easy to extend the debug option, assuming that 
Ter believes the idea is a worthwhile one.

Jim
&gt;<i> and use macros in the generated code that compile to nothing if that 
</I>&gt;<i> is defined.
</I>&gt;<i>
</I>
</PRE>















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="032782.html">[antlr-interest] @SuppressWarnings
</A></li>
	<LI>Next message: <A HREF="032780.html">[antlr-interest] C generator is not generating @after actions
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#32762">[ date ]</a>
              <a href="thread.html#32762">[ thread ]</a>
              <a href="subject.html#32762">[ subject ]</a>
              <a href="author.html#32762">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.antlr.org/mailman/listinfo/antlr-interest">More information about the antlr-interest
mailing list</a><br>
</body></html>
