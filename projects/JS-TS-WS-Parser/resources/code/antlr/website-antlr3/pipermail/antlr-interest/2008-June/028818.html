<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [antlr-interest] AST optimizations
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20AST%20optimizations&In-Reply-To=%3CE7035321714C624BA01ADCBA6F99CADF0102E87093ED%40mercury.pyrogenesis.co.za%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="028817.html">
   <LINK REL="Next"  HREF="028819.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[antlr-interest] AST optimizations</H1>
    <B>Andr&#233; van der Merwe</B> 
    <A HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20AST%20optimizations&In-Reply-To=%3CE7035321714C624BA01ADCBA6F99CADF0102E87093ED%40mercury.pyrogenesis.co.za%3E"
       TITLE="[antlr-interest] AST optimizations">AndrevdM at pyrogenesis.co.za
       </A><BR>
    <I>Thu Jun 26 03:02:05 PDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="028817.html">[antlr-interest] Dear antlr-interest at antlr.org June 83% 0FF
</A></li>
        <LI>Next message: <A HREF="028819.html">[antlr-interest] A simple question in my antlr code. Is it a antlr code bug or some thing wrong with my code
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#28818">[ date ]</a>
              <a href="thread.html#28818">[ thread ]</a>
              <a href="subject.html#28818">[ subject ]</a>
              <a href="author.html#28818">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi all,

I'm trying to figure out what is the best way to do AST changes and optimizations.

I assume that for some (most?) optimisations a tree rewrite grammar will not be powerful enough (e.g. for deciding on eager/lazy loading based on function use). So what is the best way of making these types of changes (assume that the changes can be significant) to an AST? I can think of a few options

1) Use the ANTLR AST and add and remove nodes from it. (I've got no idea how I'd create new nodes though as you need an IToken)
2) Build a custom AST from the ANTLR AST and make modifications to it. (This way I can have different classes for each AST node)

I'm leaning towards option two as I think that would give me the greatest flexibility but I'd like to hear what others are doing.



If I do go with option two I can think of a few issues
1) Can I still generate code using string template and an ANTLR tree grammar? (I think I've read something about using tree adapters for this...)
2) I'll need to store the ITokens in my new AST so that I can do my own error reporting.


Are there any simple examples of this? I guess I could look at the BOO source (I'm pretty sure they use option 2) but it would nice to have a simpler example to start with.


Thanks in advance.


Andre
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://www.antlr.org/pipermail/antlr-interest/attachments/20080626/aa11d49f/attachment.html">http://www.antlr.org/pipermail/antlr-interest/attachments/20080626/aa11d49f/attachment.html</A> 
</PRE>








<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="028817.html">[antlr-interest] Dear antlr-interest at antlr.org June 83% 0FF
</A></li>
	<LI>Next message: <A HREF="028819.html">[antlr-interest] A simple question in my antlr code. Is it a antlr code bug or some thing wrong with my code
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#28818">[ date ]</a>
              <a href="thread.html#28818">[ thread ]</a>
              <a href="subject.html#28818">[ subject ]</a>
              <a href="author.html#28818">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.antlr.org/mailman/listinfo/antlr-interest">More information about the antlr-interest
mailing list</a><br>
</body></html>
