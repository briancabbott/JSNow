<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [antlr-interest] rewrite rule element cardinality
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20rewrite%20rule%20element%20cardinality&In-Reply-To=%3CF358DDF1-7237-4857-BD23-BACDA7D93E56%40cs.usfca.edu%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="037734.html">
   <LINK REL="Next"  HREF="037741.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[antlr-interest] rewrite rule element cardinality</H1>
    <B>Terence Parr</B> 
    <A HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20rewrite%20rule%20element%20cardinality&In-Reply-To=%3CF358DDF1-7237-4857-BD23-BACDA7D93E56%40cs.usfca.edu%3E"
       TITLE="[antlr-interest] rewrite rule element cardinality">parrt at cs.usfca.edu
       </A><BR>
    <I>Tue Feb 23 12:11:48 PST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="037734.html">[antlr-interest] rewrite rule element cardinality
</A></li>
        <LI>Next message: <A HREF="037741.html">[antlr-interest] rewrite rule element cardinality
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#37738">[ date ]</a>
              <a href="thread.html#37738">[ thread ]</a>
              <a href="subject.html#37738">[ subject ]</a>
              <a href="author.html#37738">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Joe, this looks like a bug to me!! yikes. You are correct that you should see only one copy of the tree returned by option for each iteration of the tree constructor in search. grr! ok, I will add a bug. Can you do me a favor and look at the generated code for -&gt; ^(GROUP c option)+?? It might tell you something that will help me fix the bug and also a way for you to get around.
Thanks!
T
On Feb 23, 2010, at 11:40 AM, <A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">joestelmach at gmail.com</A> wrote:

&gt;<i> I'm having some trouble understanding the behavior of AST rewrite rule element cardinality in certain cases. Consider the following grammar:
</I>&gt;<i> 
</I>&gt;<i> grammar Test;
</I>&gt;<i> 
</I>&gt;<i> options {
</I>&gt;<i> output=AST;
</I>&gt;<i> }
</I>&gt;<i> 
</I>&gt;<i> tokens {
</I>&gt;<i> GROUP;
</I>&gt;<i> FOO;
</I>&gt;<i> BAR;
</I>&gt;<i> BAZ;
</I>&gt;<i> }
</I>&gt;<i> 
</I>&gt;<i> search 
</I>&gt;<i> : c (SPACE option)+ -&gt; ^(GROUP c option)+
</I>&gt;<i> ;
</I>&gt;<i> 
</I>&gt;<i> c
</I>&gt;<i> : C -&gt; FOO BAR
</I>&gt;<i> ;
</I>&gt;<i> 
</I>&gt;<i> option 
</I>&gt;<i> : (A | B) -&gt; BAZ
</I>&gt;<i> ;
</I>&gt;<i> 
</I>&gt;<i> A : 'a';
</I>&gt;<i> B : 'b';
</I>&gt;<i> C : 'c';
</I>&gt;<i> SPACE : ' ';
</I>&gt;<i> 
</I>&gt;<i> If we feed the parser the input string: &quot;c a b a&quot;, I'm expecting to see the following AST:
</I>&gt;<i> 
</I>&gt;<i> (GROUP FOO BAR BAZ) (GROUP FOO BAR BAZ) (GROUP FOO BAR BAZ)
</I>&gt;<i> 
</I>&gt;<i> but instead, I get the following:
</I>&gt;<i> 
</I>&gt;<i> (GROUP FOO BAR BAZ) (GROUP FOO BAR BAZ BAZ) (GROUP FOO BAR BAZ BAZ)
</I>&gt;<i> 
</I>&gt;<i> Notice the extra BAZ in each child after the first? Can someone explain why this is happening? I'm using ANTLR 3.2 with the java target.
</I>&gt;<i> 
</I>&gt;<i> Thanks
</I>&gt;<i> 
</I>&gt;<i> - Joe
</I>&gt;<i> 
</I>&gt;<i> List: <A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">http://www.antlr.org/mailman/listinfo/antlr-interest</A>
</I>&gt;<i> Unsubscribe: <A HREF="http://www.antlr.org/mailman/options/antlr-interest/your-email-address">http://www.antlr.org/mailman/options/antlr-interest/your-email-address</A>
</I>
</PRE>


























<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="037734.html">[antlr-interest] rewrite rule element cardinality
</A></li>
	<LI>Next message: <A HREF="037741.html">[antlr-interest] rewrite rule element cardinality
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#37738">[ date ]</a>
              <a href="thread.html#37738">[ thread ]</a>
              <a href="subject.html#37738">[ subject ]</a>
              <a href="author.html#37738">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.antlr.org/mailman/listinfo/antlr-interest">More information about the antlr-interest
mailing list</a><br>
</body></html>
