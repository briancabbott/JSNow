<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [antlr-interest] Function Expressions
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20Function%20Expressions&In-Reply-To=%3CBANLkTimQO3Cfvh_Ceg6hYuyB_2Sa9g7X0A%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="041551.html">
   <LINK REL="Next"  HREF="041554.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[antlr-interest] Function Expressions</H1>
    <B>Jeff Hair</B> 
    <A HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20Function%20Expressions&In-Reply-To=%3CBANLkTimQO3Cfvh_Ceg6hYuyB_2Sa9g7X0A%40mail.gmail.com%3E"
       TITLE="[antlr-interest] Function Expressions">knifed at gmail.com
       </A><BR>
    <I>Wed May  4 10:37:46 PDT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="041551.html">[antlr-interest] Function Expressions
</A></li>
        <LI>Next message: <A HREF="041554.html">[antlr-interest] Function Expressions
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#41553">[ date ]</a>
              <a href="thread.html#41553">[ thread ]</a>
              <a href="subject.html#41553">[ subject ]</a>
              <a href="author.html#41553">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Right. That's basically what I'm doing right now. The problem is that I
can't call do stuff like anonymous function calls (which can be generated by
an expression). So I'm trying to figure out how to do enable that without
getting the recursion errors.

JavaScript allows you to do stuff like (function() { ... })(); in order to
call the function. You can even do it with (1 + 1)(), which of course
returns an error. But the point is that it's possible. That's what I'm
trying to enable.

On Wed, May 4, 2011 at 1:05 PM, Jim Idle &lt;<A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">jimi at temporal-wave.com</A>&gt; wrote:

&gt;<i> Generally when parsing you do this:
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> expr
</I>&gt;<i> ...
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> atom
</I>&gt;<i>  : i=ID
</I>&gt;<i>     (
</I>&gt;<i>          LPAREN e=exprList RPAREN  -&gt;^(FUNC $i $e)
</I>&gt;<i>           | -&gt; ^(IDENT $i)
</I>&gt;<i>     )
</I>&gt;<i>
</I>&gt;<i> ...
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Jim
</I>&gt;<i>
</I>&gt;<i> &gt; -----Original Message-----
</I>&gt;<i> &gt; From: <A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">antlr-interest-bounces at antlr.org</A> [mailto:antlr-interest-
</I>&gt;<i> &gt; <A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">bounces at antlr.org</A>] On Behalf Of Jeff Hair
</I>&gt;<i> &gt; Sent: Wednesday, May 04, 2011 9:27 AM
</I>&gt;<i> &gt; To: <A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">antlr-interest at antlr.org</A>
</I>&gt;<i> &gt; Subject: [antlr-interest] Function Expressions
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Hello all,
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; I have a simple C/JavaScript-style grammar for my interpreter project.
</I>&gt;<i> &gt; Right now, functions can be called via identifier(), or
</I>&gt;<i> &gt; identifier(param1, param2). This works fine for simple cases, but in my
</I>&gt;<i> &gt; language functions are first-class objects. I'm in the process of
</I>&gt;<i> &gt; redoing my identifier logic for properties, arrays, and function calls.
</I>&gt;<i> &gt; I've gotten the first two working.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; I'm trying to allow expressions to be callable as functions, so I can
</I>&gt;<i> &gt; do stuff like createFunction()(), where createFunction would be a
</I>&gt;<i> &gt; function that returns a function. Another example would be (1 + 1)().
</I>&gt;<i> &gt; Obviously that should throw an error, but it should be a permissible
</I>&gt;<i> &gt; language construct.
</I>&gt;<i> &gt; JavaScript allows this.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; The func.g file in my gist is a pared down version of the language
</I>&gt;<i> &gt; grammar, with only the relevant rules in it. Understandably, it fails
</I>&gt;<i> &gt; with the following errors:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; [java] error(210):  The following sets of rules are mutually left-
</I>&gt;<i> &gt; recursive [boolNegation, unary, add, mult, relation, term, expression]
</I>&gt;<i> &gt; [java] error(206): /home/user/955488/func.g:66:2: Alternative 1: after
</I>&gt;<i> &gt; matching input such as IDENT '(' decision cannot predict what comes
</I>&gt;<i> &gt; next due to recursion overflow to relation from expression [java]
</I>&gt;<i> &gt; error(201): /home/user/955488/func.g:66:2: The following alternatives
</I>&gt;<i> &gt; can never be matched: 2
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; <A HREF="https://gist.github.com/955488">https://gist.github.com/955488</A> demonstrates the issue. I've stripped
</I>&gt;<i> &gt; out everything except the expression rules. The gist can be cloned as a
</I>&gt;<i> &gt; git repo and then built via Ant + Ivy.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; I understand why it's failing. There's a conflict between the IDENT
</I>&gt;<i> &gt; expression and IDENT '(' ')' for function calls. What I'm trying to
</I>&gt;<i> &gt; figure out is how to allow both identifiers and function calls. If I
</I>&gt;<i> &gt; figure that out, it should give me the rest of what I need. Any help
</I>&gt;<i> &gt; would be appreciated.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; List: <A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">http://www.antlr.org/mailman/listinfo/antlr-interest</A>
</I>&gt;<i> &gt; Unsubscribe: <A HREF="http://www.antlr.org/mailman/options/antlr-interest/your-">http://www.antlr.org/mailman/options/antlr-interest/your-</A>
</I>&gt;<i> &gt; email-address
</I>&gt;<i>
</I>&gt;<i> List: <A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">http://www.antlr.org/mailman/listinfo/antlr-interest</A>
</I>&gt;<i> Unsubscribe:
</I>&gt;<i> <A HREF="http://www.antlr.org/mailman/options/antlr-interest/your-email-address">http://www.antlr.org/mailman/options/antlr-interest/your-email-address</A>
</I>&gt;<i>
</I></PRE>












<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="041551.html">[antlr-interest] Function Expressions
</A></li>
	<LI>Next message: <A HREF="041554.html">[antlr-interest] Function Expressions
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#41553">[ date ]</a>
              <a href="thread.html#41553">[ thread ]</a>
              <a href="subject.html#41553">[ subject ]</a>
              <a href="author.html#41553">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.antlr.org/mailman/listinfo/antlr-interest">More information about the antlr-interest
mailing list</a><br>
</body></html>
