<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [antlr-interest] ANTLR on Microsoft's Compact Framework?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20ANTLR%20on%20Microsoft%27s%20Compact%20Framework%3F&In-Reply-To=%3CE7035321714C624BA01ADCBA6F99CADF01457A2B41FC%40mercury.pyrogenesis.co.za%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="035962.html">
   <LINK REL="Next"  HREF="035975.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[antlr-interest] ANTLR on Microsoft's Compact Framework?</H1>
    <B>Andr&#233; van der Merwe</B> 
    <A HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20ANTLR%20on%20Microsoft%27s%20Compact%20Framework%3F&In-Reply-To=%3CE7035321714C624BA01ADCBA6F99CADF01457A2B41FC%40mercury.pyrogenesis.co.za%3E"
       TITLE="[antlr-interest] ANTLR on Microsoft's Compact Framework?">AndrevdM at pyrogenesis.co.za
       </A><BR>
    <I>Tue Sep 15 13:46:45 PDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="035962.html">[antlr-interest] ANTLR on Microsoft's Compact Framework?
</A></li>
        <LI>Next message: <A HREF="035975.html">[antlr-interest] ANTLR on Microsoft's Compact Framework?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#35974">[ date ]</a>
              <a href="thread.html#35974">[ thread ]</a>
              <a href="subject.html#35974">[ subject ]</a>
              <a href="author.html#35974">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Its working. Sam you were right all I needed to compile was Antlr.Runtime.



I needed to make a few changed to get it to compile for the CF. In case someone else wants to do this in the future here is what I did

* Created a new CF project and added all the existing .cs files 

* Add &quot;DOTNET2&quot; to the defines

* In AssemblyInfo.cs: Comment out AllowPartiallyTrustedCallers

* In Stats.cs: Replace call to Environment.GetCurrentPath with Asm.GetExecutingAssembly().GetName().CodeBase

* In ErrorManager.cs: Remove all references to StackTrace and StackFrame. It should be possible to get the required information from looking at the Exception parameter's StackTrace property and parsing the string. However I've just set the location to an empty string for now. (Fortunately for me, error handeling is not too important in my DSL)

* In TokenRewriteStream.cs: Replace call to Array.GetRange with a call to a custom method that does what GetRange does.

* In BaseRecogniser.cs: Throw a NotImplementedException in GetRuleInvocationStack(). Again it should be possible to parse the stack trace string but I'm not using this method so I'm just throwing.


All in all it was pretty simple to get working. 



-----Original Message-----
From: Sam Harwell [mailto:<A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">sharwell at pixelminegames.com</A>] 
Sent: 14 September 2009 16:49
To: Andr&#233; van der Merwe; <A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">antlr-interest at antlr.org</A>
Subject: RE: [antlr-interest] ANTLR on Microsoft's Compact Framework?

Are you trying to run a generated parser, or are you actually trying to run Antlr3.exe on the CF to generate your parser?

If you only want to run the generated parser, then you probably only need to compile Antlr3.Runtime.dll (CSharp3 target) or Antlr.Runtime.dll (CSharp/CSharp2 target).

Sam

-----Original Message-----
From: <A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">antlr-interest-bounces at antlr.org</A> [mailto:<A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">antlr-interest-bounces at antlr.org</A>] On Behalf Of Andr&#233; van der Merwe
Sent: Sunday, September 13, 2009 4:05 PM
To: <A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">antlr-interest at antlr.org</A>
Subject: [antlr-interest] ANTLR on Microsoft's Compact Framework?

Hi,

Has anyone managed to get an ANTLR generated parser (C#) working on the .net compact framework?

I doubt there are any major issues with the generated code but the references are going to be a problem. Before I go and recompile everything for the CF I wanted to check if there were known issues or perhaps someone has already done this?


</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="035962.html">[antlr-interest] ANTLR on Microsoft's Compact Framework?
</A></li>
	<LI>Next message: <A HREF="035975.html">[antlr-interest] ANTLR on Microsoft's Compact Framework?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#35974">[ date ]</a>
              <a href="thread.html#35974">[ thread ]</a>
              <a href="subject.html#35974">[ subject ]</a>
              <a href="author.html#35974">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.antlr.org/mailman/listinfo/antlr-interest">More information about the antlr-interest
mailing list</a><br>
</body></html>
