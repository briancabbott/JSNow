From williamyuan at yeah.net  Wed Oct  1 00:07:23 2008
From: williamyuan at yeah.net (William Vian)
Date: Wed, 1 Oct 2008 15:07:23 +0800
Subject: [antlr-interest] how to catch the exception in antlr
Message-ID: <004e01c92394$5b1562f0$010a0a0a@cozilywo0162a0>

Hi ALL,

Question as title

i've tried this ,

defaultErrorHandler = false; 

and 

@rulecatch {
catch (RecognitionException e) {
throw e;
}
}

but seems it doesn't work

I think we are short of documentations ,any one help please, 

Thanks

Bill Vian
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20081001/1a5493f7/attachment.html 

From antlr at mirality.co.nz  Wed Oct  1 02:01:57 2008
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Wed, 01 Oct 2008 22:01:57 +1300
Subject: [antlr-interest] Using ANTLR 3.1 to parse macros (for a Macro
 Assembler)
In-Reply-To: <6.1.2.0.2.20080930204348.04bfc788@mail.webmotif.com>
References: <6.1.2.0.2.20080930204348.04bfc788@mail.webmotif.com>
Message-ID: <20081001090207.CA9872F4316@www.antlr.org>

At 16:54 1/10/2008, Wayne Venables wrote:
 >In ANTLR3, how do I get the parser to switch to a new lexer
 >in the middle of the processing and then retry the match?  Or
 >is there a different/better way of handling this in ANTLR3?
 >I'm using the CSharp target.  So far I haven't had any luck
 >with the book, the online manuals, or google.

If you can unambiguously detect that you need to switch over while 
in the lexer, then you can have a look at the 'island-grammar' 
example in the ANTLR examples pack.  This is by far the simplest 
method.

If things are sufficiently ambiguous that you can't decide until 
the parser, then have a look at this:
   <<http://www.antlr.org/wiki/display/ANTLR3/Island+Grammars+Under+Parser+Control>http://www.antlr.org/wiki/display/ANTLR3/Island+Grammars+Under+Parser+Control>


From lanzi.matteo at okpress.it  Wed Oct  1 05:35:39 2008
From: lanzi.matteo at okpress.it (Matteo Lanzi)
Date: Wed, 1 Oct 2008 14:35:39 +0200
Subject: [antlr-interest] antlr with actionscript 3
Message-ID: <026a01c923c2$36da17e0$a48e47a0$@matteo@okpress.it>

Hi, I'm just moving my first steps with antlr.

Referring to this article,
http://antlr.org/wiki/display/ANTLR3/Antlr3ActionScriptTarget i tried to
create something that can enumerate the methods of a class ( without success
) 

 

-          First of all in the swc lib I can' t find TLexer and TParser but
only Parser and Lexer Class.

So I wrote something like 

 

input= "public function pippo () : Boolean {return true;}";

var lexer:Lexer = new Lexer (new ANTLRStringStream(input));

 

-          then I tried to get tokens in this way but this generate an
exception

        var tokens:CommonTokenStream = CommonTokenStream(lexer);

 

Does anyone know some resources to get start with antlr and actionscript ?

 

Regards 

Matteo Lanzi

 

 

               

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20081001/00cd5827/attachment.html 

From tvial at octo.com  Wed Oct  1 07:01:20 2008
From: tvial at octo.com (Thomas Vial)
Date: Wed, 1 Oct 2008 16:01:20 +0200
Subject: [antlr-interest] ANTLR in Maven Central?
In-Reply-To: <87eb8aee0809120529q4884d390y1ae8af8df0046662@mail.gmail.com>
References: <87eb8aee0809100030i13d912aasb83d3db550fdd5b7@mail.gmail.com>
	<ED0F90B0-C77B-4E11-9E66-572B371CF063@cs.usfca.edu>
	<87eb8aee0809120529q4884d390y1ae8af8df0046662@mail.gmail.com>
Message-ID: <475086500810010701u3fd8c1c9h9608679bcf5008b3@mail.gmail.com>

Hi,

I have just posted a request that ANTLR v3.1 be uploaded to the central
repo.
I'll let you know when this is done.

Regards,
Thomas



On Fri, Sep 12, 2008 at 2:29 PM, Alin Dreghiciu <adreghiciu at gmail.com>wrote:

> Here are some rules about that:
> http://maven.apache.org/guides/mini/guide-central-repository-upload.html
>
> Alin
>
> On Thu, Sep 11, 2008 at 9:11 PM, Terence Parr <parrt at cs.usfca.edu> wrote:
> > I'd love for someone to upload them...i recall something like me needing
> an
> > open http dir or something here i didn't like.
> > Ter
> > On Sep 10, 2008, at 12:30 AM, Alin Dreghiciu wrote:
> >
> >> Hi guys,
> >>
> >> Is there any plan to have antlr 3.1 and string template 3.2 available
> >> from maven central repo?
> >> (http://repo1.maven.org/maven2/org/antlr)
> >>
> >> Thanx,
> >> --
> >> Alin Dreghiciu
> >> http://www.ops4j.org - New Energy for OSS Communities - Open
> >> Participation Software.
> >> http://www.qi4j.org - New Energy for Java - Domain Driven Development.
> >> http://malaysia.jayway.net - New Energy for Projects - Great People
> >> working on Great Projects at Great Places
> >>
> >> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> >> Unsubscribe:
> >>
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
> >>
> >
> >
>
>
>
> --
> Alin Dreghiciu
> http://www.ops4j.org - New Energy for OSS Communities - Open
> Participation Software.
> http://www.qi4j.org - New Energy for Java - Domain Driven Development.
> http://malaysia.jayway.net - New Energy for Projects - Great People
> working on Great Projects at Great Places
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>
>


-- 
..........................................................
Thomas VIAL
OCTO Technology
..........................................................
50, Avenue des Champs-Elys?es
75008 Paris
T?l : (33) 1 58 56 10 00
Fax : (33) 1 58 56 10 01
GSM : (33) 6 28 50 07 64
Web : http://www.octo.com/
..........................................................
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20081001/41cc712c/attachment.html 

From jimi at temporal-wave.com  Wed Oct  1 07:29:39 2008
From: jimi at temporal-wave.com (Jim Idle)
Date: Wed, 01 Oct 2008 07:29:39 -0700
Subject: [antlr-interest] how to catch the exception in antlr
In-Reply-To: <004e01c92394$5b1562f0$010a0a0a@cozilywo0162a0>
References: <004e01c92394$5b1562f0$010a0a0a@cozilywo0162a0>
Message-ID: <1222871379.10689.3.camel@jimi.temporal-wave.com>

On Wed, 2008-10-01 at 15:07 +0800, William Vian wrote:
> Hi ALL,
>  
> Question as title
> 
> i've tried this ,
> 
> defaultErrorHandler = false; 
>  
> and 
> 
> @rulecatch {
> catch (RecognitionException e) {
> throw e;
> }
> }
>  
> but seems it doesn't work
> 
> I think we are short of documentations ,any one help please, 


Check the wiki pages (wiki link), or the mailing list search on mailman
(from the support link) for displayRecognitionError. To catch an
individual error use

@exception {
}


Jim
>  
> Thanks
> 
> Bill Vian
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
> 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20081001/9d6d159f/attachment.html 

From andersen at ontologyworks.com  Wed Oct  1 09:47:27 2008
From: andersen at ontologyworks.com (Bill Andersen)
Date: Wed, 1 Oct 2008 12:47:27 -0400
Subject: [antlr-interest] Nested subtree duplication
Message-ID: <F1559D74-246A-49E5-A5BA-1C5B3260A527@ontologyworks.com>

Folks

I'm trying to use a tree grammar I'm using to implement transforms on  
logical formulae.  The rule in question is

xform
	: ^(AND x=(options{greedy=false;}:sent)* ^(OR y=sent+) z=sent*)
	-> ....
	;

What I want to do is output an AST that represents the distribution of  
the inner OR over AND.  Example

(AND A (OR B C) D) => (OR (AND A B D) (AND A C D))

which involves iteration over the list y (to get B and C in the  
resulting disjuncts) and carrying over [A] and [D] intact.

Can this be done in the grammar without resorting to Java actions?

Bill Andersen
Ontology Works, Inc. (www.ontologyworks.com)
3600 O'Donnell Street, Suite 600
Baltimore, MD 21224
Office: +1.410.675.1201
Cell: +1.443.858.6444
Fax: +1.410.675.1204





From vsmani.chrome at gmail.com  Wed Oct  1 10:21:06 2008
From: vsmani.chrome at gmail.com (Manikandan Subramanian)
Date: Wed, 1 Oct 2008 13:21:06 -0400
Subject: [antlr-interest] why it fails without predicates - Lexer issue
Message-ID: <ba280f0d0810011021g2796b218y31c11307f442d805@mail.gmail.com>

Hi,

I got to identify integer, decimal and EOD tokens (End of Description, like
we have in Copybook)

the following is the grammar

*

grammar* TestDecimal;

*

options* {

language = Java;

}

@lexer::members

{

*private* boolean isNotEOD()

{

*return* (((*char*)input.LA(2)!= *'\f'*) && ((*char*)input.LA(2)!= *'\t'*)
&&((*char*)input.LA(2)!= *'\r'*) && ((*char*)input.LA(2)!= *'\n'*) &&((*char
*)input.LA(2)!= *' '*) && (input.LA(2)!= -1));

}

}

@members

{

*public* static void main(*String* args[]) *throws* *Exception* {

ANTLRStringStream input = *new* ANTLRStringStream(args[0]);

Lexer lexer = *null*;

lexer = *new* TestDecimalLexer(input);

CommonTokenStream tokens = *null*;

tokens = *new* CommonTokenStream(lexer);

*for*(Object obj: tokens.getTokens())

System.out.println(obj);

TestDecimalParser parser = *new* TestDecimalParser (tokens);

parser.document();

}

}

document : *INT* *WS*? *INT* *WS*? *EOD*;

*

INT* : *DIGIT*+ ;

*

Decimal_* : *INT* *DOT* *INT;*

*

EOD* : '.' (*SS*+ | *EOF*);

*

fragment* *DOT* : {isNotEOD()}? => '.';

*

fragment* *DIGIT* : ('0'..'9');

*

fragment* *SS* : (' ' | '\t' | '\f' | '\r' | '\n');

*

WS* : *SS*+;

}
I got the input "01 00. " and got following error:

line 1:5 rule DOT failed predicate: {isNotEOD()}?

[@0,0:1='01',<4>,1:0]

[@1,2:2=' ',<5>,1:2]

[@2,5:6='. ',<6>,1:5]

line 1:5 missing INT at '. '
If I replace the Decimal_  token definition with syntatic predicates like
below, it works fine.
**
*Decimal_* : (*INT*) => *INT* {_type=INT;}| (*INT* *DOT*) => *INT* *DOT* *
INT*;

why it is not able to identify the input correctly with out syntatic
predicates?

Why it fails to identify "00. " as INT EOD.

Is there any way to resolve this without syntatic/sematic predicates. I
would like to resolve this issue with just production rules.

Thanks in advance.

Regards,
Mani
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20081001/ac1109b2/attachment.html 

From jaluber at gmx.de  Wed Oct  1 10:49:49 2008
From: jaluber at gmx.de (Johannes Luber)
Date: Wed, 01 Oct 2008 19:49:49 +0200
Subject: [antlr-interest] why it fails without predicates - Lexer issue
In-Reply-To: <ba280f0d0810011021g2796b218y31c11307f442d805@mail.gmail.com>
References: <ba280f0d0810011021g2796b218y31c11307f442d805@mail.gmail.com>
Message-ID: <48E3B83D.5080202@gmx.de>

Manikandan Subramanian schrieb:
> Hi,
>  
> I got to identify integer, decimal and EOD tokens (End of Description,
> like we have in Copybook)
>  
> the following is the grammar
>  
> *
> 
> grammar
> 
> * TestDecimal;
> 
> *
> 
> options
> 
> * {
> 
> language = Java;
> 
> }
> 
> @lexer::members
> 
> {
> 
> *private* boolean isNotEOD()
> 
> {
> 
> *return* (((*char*)input.LA(2)!= *'\f'*) && ((*char*)input.LA(2)!=
> *'\t'*) &&((*char*)input.LA(2)!= *'\r'*) && ((*char*)input.LA(2)!=
> *'\n'*) &&((*char*)input.LA(2)!= *' '*) && (input.LA(2)!= -1));
> 
> }
> 
> }
> 
> @members
> 
> {
> 
> *public* static void main(/String/ args[]) *throws* /Exception/ {
> 
> ANTLRStringStream input =
> 
> *new* ANTLRStringStream(args[0]);
> 
> Lexer lexer =
> 
> *null*;
> 
> lexer =
> 
> *new* TestDecimalLexer(input);
> 
> CommonTokenStream tokens =
> 
> *null*;
> 
> tokens =
> 
> *new* CommonTokenStream(lexer);
> 
> *for*(Object obj: tokens.getTokens())
> 
> System.out.println(obj);
> 
> TestDecimalParser parser =
> 
> *new* TestDecimalParser (tokens);
> 
> parser.document();
> 
> }
> 
> }
> 
> document
> 
> : /INT/ /WS/? /INT/ /WS/? /EOD/;
> 
> /
> 
> INT
> 
> / : /DIGIT/+ ;
> 
> /
> 
> Decimal_
> 
> / : /INT/ /DOT/ /INT;/
> 
> /
> 
> EOD
> 
> / : '.' (/SS/+ | /EOF/);
> 
> *
> 
> fragment
> 
> * /DOT/ : {isNotEOD()}? => '.';
> 
> *
> 
> fragment
> 
> * /DIGIT/ : ('0'..'9');
> 
> *
> 
> fragment
> 
> * /SS/ : (' ' | '\t' | '\f' | '\r' | '\n');
> 
> /
> 
> WS
> 
> / : /SS/+;
> 
> }
> 
> I got the input "01 00. " and got following error:
> 
> line 1:5 rule DOT failed predicate: {isNotEOD()}?
> 
> [@0,0:1='01',<4>,1:0]
> 
> [@1,2:2=' ',<5>,1:2]
> 
> [@2,5:6='. ',<6>,1:5]
> 
> line 1:5 missing INT at '. '
> 
> If I replace the Decimal_  token definition with syntatic predicates
> like below, it works fine.
> // 
> /Decimal_/ : (/INT/) => /INT/ {_type=INT;}| (/INT/ /DOT/) => /INT/ /DOT/
> /_INT_/;
>  
> why it is not able to identify the input correctly with out syntatic
> predicates?
>  
> Why it fails to identify "00. " as INT EOD.
>  
> Is there any way to resolve this without syntatic/sematic predicates. I
> would like to resolve this issue with just production rules.
>  
> Thanks in advance.

Probably the cause lies in the fact that ANTLR lexers don't switch the
token type once they have chosen one. There are enough cases where the
current behaviour isn't enough. Possibly 3.2 contains a fix for this
issue, so you can't use another solution which isn't predicate-dependent
for now.

Johannes
>  
> Regards,
> Mani
> 
> 
> ------------------------------------------------------------------------
> 
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
> 


From parrt at cs.usfca.edu  Wed Oct  1 14:36:34 2008
From: parrt at cs.usfca.edu (Terence Parr)
Date: Wed, 1 Oct 2008 14:36:34 -0700
Subject: [antlr-interest] ANTLR v3.1.1 released
Message-ID: <126EB79A-5862-46DA-A428-A059006E3DC8@cs.usfca.edu>

3.1.1 released:

	http://www.antlr.org/download.html

Here are the release notes:

	http://www.antlr.org/wiki/display/ANTLR3/ANTLR+3.1.1+Release+Notes

Updated api doc too in case that changed:

	http://www.antlr.org/api

Examples changed a bit to reflect changes:

	http://www.antlr.org/download/examples-v3.tar.gz

Ter

From rschulz at sonic.net  Wed Oct  1 15:41:50 2008
From: rschulz at sonic.net (Randall R Schulz)
Date: Wed, 1 Oct 2008 15:41:50 -0700
Subject: [antlr-interest] ANTLR v3.1.1 released
In-Reply-To: <126EB79A-5862-46DA-A428-A059006E3DC8@cs.usfca.edu>
References: <126EB79A-5862-46DA-A428-A059006E3DC8@cs.usfca.edu>
Message-ID: <200810011541.50544.rschulz@sonic.net>

On Wednesday 01 October 2008 14:36, Terence Parr wrote:
> 3.1.1 released:

Thanks, Terence.

Will there be an ANTLRWorks 1.2.1 to incorporate the ANTLR release?


> ...
>
> Ter


Randall Schulz

From rschulz at sonic.net  Wed Oct  1 15:44:29 2008
From: rschulz at sonic.net (Randall R Schulz)
Date: Wed, 1 Oct 2008 15:44:29 -0700
Subject: [antlr-interest] ANTLR v3.1.1 released
In-Reply-To: <126EB79A-5862-46DA-A428-A059006E3DC8@cs.usfca.edu>
References: <126EB79A-5862-46DA-A428-A059006E3DC8@cs.usfca.edu>
Message-ID: <200810011544.29599.rschulz@sonic.net>

On Wednesday 01 October 2008 14:36, Terence Parr wrote:
> 3.1.1 released:

I'm getting a huge pile of compile errors, now.

Is there a list of breaking API changes somewhere? It's kind of hard to 
diff the 3.1 and 3.1.1 Doxygen or JavaDoc output to figure them out...


Randall Schulz

From jimi at temporal-wave.com  Wed Oct  1 15:59:39 2008
From: jimi at temporal-wave.com (Jim Idle)
Date: Wed, 01 Oct 2008 15:59:39 -0700
Subject: [antlr-interest] ANTLR v3.1.1 released
In-Reply-To: <200810011544.29599.rschulz@sonic.net>
References: <126EB79A-5862-46DA-A428-A059006E3DC8@cs.usfca.edu>
	<200810011544.29599.rschulz@sonic.net>
Message-ID: <1222901979.10689.87.camel@jimi.temporal-wave.com>

On Wed, 2008-10-01 at 15:44 -0700, Randall R Schulz wrote:

> On Wednesday 01 October 2008 14:36, Terence Parr wrote:
> > 3.1.1 released:
> 
> I'm getting a huge pile of compile errors, now.


The runtime library names has changed, your errors are probably about
finding the classes. Make sure you change your build environment to
reference the new jars. I don't think, but could be wrong, that there
are any  breaking changes in this.

Jim

> 
> Is there a list of breaking API changes somewhere? It's kind of hard to 
> diff the 3.1 and 3.1.1 Doxygen or JavaDoc output to figure them out...
> 
> 
> Randall Schulz
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
> 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20081001/15b64329/attachment.html 

From rschulz at sonic.net  Wed Oct  1 16:53:00 2008
From: rschulz at sonic.net (Randall R Schulz)
Date: Wed, 1 Oct 2008 16:53:00 -0700
Subject: [antlr-interest] ANTLR v3.1.1 released
In-Reply-To: <1222901979.10689.87.camel@jimi.temporal-wave.com>
References: <126EB79A-5862-46DA-A428-A059006E3DC8@cs.usfca.edu>
	<200810011544.29599.rschulz@sonic.net>
	<1222901979.10689.87.camel@jimi.temporal-wave.com>
Message-ID: <200810011653.00975.rschulz@sonic.net>

On Wednesday 01 October 2008 15:59, Jim Idle wrote:
> On Wed, 2008-10-01 at 15:44 -0700, Randall R Schulz wrote:
> > On Wednesday 01 October 2008 14:36, Terence Parr wrote:
> > > 3.1.1 released:
> >
> > I'm getting a huge pile of compile errors, now.
>
> The runtime library names has changed,

To be clear, the name of one of the JAR files has changed (beyond the 
version identifier change from "3.1" to "3.1.1"):

% find antlr-3.1 antlr-3.1.1 -iname '*.jar'
antlr-3.1/lib/antlr-2.7.7.jar
antlr-3.1/lib/._stringtemplate-3.2.jar
antlr-3.1/lib/antlr-3.1.jar
antlr-3.1/lib/stringtemplate-3.2.jar
antlr-3.1/lib/antlr-runtime-3.1.jar
antlr-3.1/runtime/ActionScript/project/lib/FlexAntTasks.jar
antlr-3.1.1/lib/antlr-2.7.7.jar
antlr-3.1.1/lib/stringtemplate-3.2.jar
antlr-3.1.1/lib/antlr-3.1.1-runtime.jar
antlr-3.1.1/lib/antlr-3.1.1.jar
antlr-3.1.1/runtime/ActionScript/project/lib/FlexAntTasks.jar

The ANTLR runtime library JAR name (format) changed:

antlr-3.1/lib/antlr-runtime-3.1.jar
antlr-3.1.1/lib/antlr-3.1.1-runtime.jar

So you cannot simply find references to an ANTLR 3.1 and change that 3.1 
to 3.1.1.

Did I miss where this change was mentioned in the email or on-line?


> ...
>
> Jim


Randall Schulz

From parrt at cs.usfca.edu  Wed Oct  1 18:09:07 2008
From: parrt at cs.usfca.edu (Terence Parr)
Date: Wed, 1 Oct 2008 18:09:07 -0700
Subject: [antlr-interest] ANTLR v3.1.1 released
In-Reply-To: <200810011653.00975.rschulz@sonic.net>
References: <126EB79A-5862-46DA-A428-A059006E3DC8@cs.usfca.edu>
	<200810011544.29599.rschulz@sonic.net>
	<1222901979.10689.87.camel@jimi.temporal-wave.com>
	<200810011653.00975.rschulz@sonic.net>
Message-ID: <520946FF-CAF8-4ACE-B19F-97C39D27BF19@cs.usfca.edu>

Sorry...it was only in the e-mail trail of antlr-dev.  Just added to  
change list:

http://www.antlr.org/wiki/display/ANTLR3/ANTLR+3.1.1+Release+Notes

Ter
On Oct 1, 2008, at 4:53 PM, Randall R Schulz wrote:

> On Wednesday 01 October 2008 15:59, Jim Idle wrote:
>> On Wed, 2008-10-01 at 15:44 -0700, Randall R Schulz wrote:
>>> On Wednesday 01 October 2008 14:36, Terence Parr wrote:
>>>> 3.1.1 released:
>>>
>>> I'm getting a huge pile of compile errors, now.
>>
>> The runtime library names has changed,
>
> To be clear, the name of one of the JAR files has changed (beyond the
> version identifier change from "3.1" to "3.1.1"):
>
> % find antlr-3.1 antlr-3.1.1 -iname '*.jar'
> antlr-3.1/lib/antlr-2.7.7.jar
> antlr-3.1/lib/._stringtemplate-3.2.jar
> antlr-3.1/lib/antlr-3.1.jar
> antlr-3.1/lib/stringtemplate-3.2.jar
> antlr-3.1/lib/antlr-runtime-3.1.jar
> antlr-3.1/runtime/ActionScript/project/lib/FlexAntTasks.jar
> antlr-3.1.1/lib/antlr-2.7.7.jar
> antlr-3.1.1/lib/stringtemplate-3.2.jar
> antlr-3.1.1/lib/antlr-3.1.1-runtime.jar
> antlr-3.1.1/lib/antlr-3.1.1.jar
> antlr-3.1.1/runtime/ActionScript/project/lib/FlexAntTasks.jar
>
> The ANTLR runtime library JAR name (format) changed:
>
> antlr-3.1/lib/antlr-runtime-3.1.jar
> antlr-3.1.1/lib/antlr-3.1.1-runtime.jar
>
> So you cannot simply find references to an ANTLR 3.1 and change that  
> 3.1
> to 3.1.1.
>
> Did I miss where this change was mentioned in the email or on-line?
>
>
>> ...
>>
>> Jim
>
>
> Randall Schulz
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>


From parrt at cs.usfca.edu  Wed Oct  1 18:52:21 2008
From: parrt at cs.usfca.edu (Terence Parr)
Date: Wed, 1 Oct 2008 18:52:21 -0700
Subject: [antlr-interest] ANTLRWorks 1.2.1 released :)
Message-ID: <C3FCAB0E-6122-4F94-B18A-65996590D798@cs.usfca.edu>

Hi, this only updates the internal ANTLR to v3.1.1.  No other changes  
yet.

http://www.antlr.org/works/index.html

Ter

From george.scott at gmail.com  Wed Oct  1 20:43:03 2008
From: george.scott at gmail.com (George Scott)
Date: Wed, 1 Oct 2008 20:43:03 -0700
Subject: [antlr-interest]  antlr with actionscript 3
Message-ID: <5d9afe010810012043u30d6969dmf8c74960b9355322@mail.gmail.com>

Matteo,
TLexer and TParser are not included in the runtime library.  Those are just
example class names that would be generated by antlr if you were to run a
grammar named "T" through the antlr compiler.  You shouldn't be using the
Lexer and Parser classes directly as they won't provide you any useful
behavior.  Instead you need to define your grammar in a separate ANTLR file,
and compile it using the antlr compiler tool that is included in the
distribution (note this is a Java program).  The antlr tool will then
generate classes (ActionScript source code) specific to your grammar that
extend the Lexer and Parser classes.

In your example, it appears you are trying to parse ActionScript/ECMAScript
4 source code.  The grammar for that language is quite complex and would be
a significant undertaking if you are completely new to ANTLR.  I would
recommend picking a simpler example to get familiar with how to use ANTLR in
ActionScript using the existing examples first.  Once you understand the
basics you should be able to pick the JavaScript sample grammar available on
the ANTLR website at (http://antlr.org/grammar/1206736738015/JavaScript.g)
as a starting point or ask around to see if anyone has an ActionScript
grammar.  I've seen various posts in the past of people working on a
complete grammar.

George
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20081001/a08e29ae/attachment.html 

From hallorant at gmail.com  Thu Oct  2 06:26:38 2008
From: hallorant at gmail.com (Tim Halloran)
Date: Thu, 2 Oct 2008 09:26:38 -0400
Subject: [antlr-interest] Avoiding ClassCastExceptions in
	org.antlr.runtime.tree.BaseTree (Limitation in ANTLR v 3.1)
In-Reply-To: <a36ab4bc0809241103v387a9cf3vdac81fedc3f2b906@mail.gmail.com>
References: <a36ab4bc0809241103v387a9cf3vdac81fedc3f2b906@mail.gmail.com>
Message-ID: <a36ab4bc0810020626n234a9f7eje9d87d3c627c77fa@mail.gmail.com>

3.1.1 didn't fix the below problem.  I can't get into Jira; but I think the
below is really a bug.

On Wed, Sep 24, 2008 at 2:03 PM, Tim Halloran <hallorant at gmail.com> wrote:

> I'm using the standard Tree implementations (extending BaseTree) in
> combination with a custom implementation of Tree.  The problem is that
> BaseTree assumes that it is only being used with subclasses of BaseTree
> despite it's implementation really not needing to make this assumption.  I
> propose fixing the code to eliminate this problem.
>
> I modified the getChild() and toStringTree() methods in BaseTree.java.  I
> changed lines 56 and 297 to cast to Tree, instead of BaseTree.  For
> example:
>
>     public Tree getChild(int i) {
>         if ( children==null || i>=children.size() ) {
>              return null;
>         }
>         return (Tree) children.get(i);  // line 56
>     }
>
> There might be some other places to change, but I have only encountered
> problems with these.
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20081002/1dcbc83b/attachment.html 

From rschulz at sonic.net  Thu Oct  2 06:48:22 2008
From: rschulz at sonic.net (Randall R Schulz)
Date: Thu, 2 Oct 2008 06:48:22 -0700
Subject: [antlr-interest] ANTLR v3.1.1 released
In-Reply-To: <126EB79A-5862-46DA-A428-A059006E3DC8@cs.usfca.edu>
References: <126EB79A-5862-46DA-A428-A059006E3DC8@cs.usfca.edu>
Message-ID: <200810020648.23027.rschulz@sonic.net>

On Wednesday 01 October 2008 14:36, Terence Parr wrote:
> 3.1.1 released:

I'm starting a new parser and upgraded (to 3.1, yesterday and then to 
3.1.1, later yesterday...). Anyway, I was wondering if the ANTLR 
command-line interface (org.antlr.Tool#main(), i.e.) gives a non-zero 
exit code when there was an error during processing of the ".g" files?


Thanks.


Randall Schulz

From rschulz at sonic.net  Thu Oct  2 07:08:10 2008
From: rschulz at sonic.net (Randall R Schulz)
Date: Thu, 2 Oct 2008 07:08:10 -0700
Subject: [antlr-interest] ANTLR v3.1.1 released
In-Reply-To: <200810020648.23027.rschulz@sonic.net>
References: <126EB79A-5862-46DA-A428-A059006E3DC8@cs.usfca.edu>
	<200810020648.23027.rschulz@sonic.net>
Message-ID: <200810020708.10719.rschulz@sonic.net>

On Thursday 02 October 2008 06:48, Randall R Schulz wrote:
> On Wednesday 01 October 2008 14:36, Terence Parr wrote:
> > 3.1.1 released:
>
> I'm starting a new parser and upgraded (to 3.1, yesterday and then to
> 3.1.1, later yesterday...). Anyway, I was wondering if the ANTLR
> command-line interface (org.antlr.Tool#main(), i.e.) gives a non-zero
> exit code when there was an error during processing of the ".g"
> files?
>
> ...

Empirical testing suggests the answer is "no."

Wasn't this going to be addressed a long time ago? It's very kludgey to 
have to examine the output to decide whether something went wrong, and 
scripts really need to know these things.


Randall Schulz

From parrt at cs.usfca.edu  Thu Oct  2 09:57:20 2008
From: parrt at cs.usfca.edu (Terence Parr)
Date: Thu, 2 Oct 2008 09:57:20 -0700
Subject: [antlr-interest] ANTLR v3.1.1 released
In-Reply-To: <200810020708.10719.rschulz@sonic.net>
References: <126EB79A-5862-46DA-A428-A059006E3DC8@cs.usfca.edu>
	<200810020648.23027.rschulz@sonic.net>
	<200810020708.10719.rschulz@sonic.net>
Message-ID: <9FA2363C-375A-48BE-889E-18E590E64ACA@cs.usfca.edu>


On Oct 2, 2008, at 7:08 AM, Randall R Schulz wrote:

> On Thursday 02 October 2008 06:48, Randall R Schulz wrote:
>> On Wednesday 01 October 2008 14:36, Terence Parr wrote:
>>> 3.1.1 released:
>>
>> I'm starting a new parser and upgraded (to 3.1, yesterday and then to
>> 3.1.1, later yesterday...). Anyway, I was wondering if the ANTLR
>> command-line interface (org.antlr.Tool#main(), i.e.) gives a non-zero
>> exit code when there was an error during processing of the ".g"
>> files?
>>
>> ...
>
> Empirical testing suggests the answer is "no."
>
> Wasn't this going to be addressed a long time ago? It's very kludgey  
> to

I thought so...did you get a error or warning?

Ter


From rschulz at sonic.net  Thu Oct  2 10:06:02 2008
From: rschulz at sonic.net (Randall R Schulz)
Date: Thu, 2 Oct 2008 10:06:02 -0700
Subject: [antlr-interest] ANTLR v3.1.1 released
In-Reply-To: <9FA2363C-375A-48BE-889E-18E590E64ACA@cs.usfca.edu>
References: <126EB79A-5862-46DA-A428-A059006E3DC8@cs.usfca.edu>
	<200810020708.10719.rschulz@sonic.net>
	<9FA2363C-375A-48BE-889E-18E590E64ACA@cs.usfca.edu>
Message-ID: <200810021006.02368.rschulz@sonic.net>

On Thursday 02 October 2008 09:57, Terence Parr wrote:
> On Oct 2, 2008, at 7:08 AM, Randall R Schulz wrote:
> > On Thursday 02 October 2008 06:48, Randall R Schulz wrote:
> >> On Wednesday 01 October 2008 14:36, Terence Parr wrote:
> >>> 3.1.1 released:
> >>
> >> I'm starting a new parser and upgraded (to 3.1, yesterday and then
> >> to 3.1.1, later yesterday...). Anyway, I was wondering if the
> >> ANTLR command-line interface (org.antlr.Tool#main(), i.e.) gives a
> >> non-zero exit code when there was an error during processing of
> >> the ".g" files?
> >>
> >> ...
> >
> > Empirical testing suggests the answer is "no."
> >
> > Wasn't this going to be addressed a long time ago? It's very
> > kludgey to
>
> I thought so...did you get a error or warning?

Regardless of whether ANTLR liked the grammar specification or not, the 
exit status is always 0.


> Ter


Randall Schulz

From rschulz at sonic.net  Thu Oct  2 10:25:49 2008
From: rschulz at sonic.net (Randall R Schulz)
Date: Thu, 2 Oct 2008 10:25:49 -0700
Subject: [antlr-interest] ANTLR v3.1.1 released
In-Reply-To: <200810021006.02368.rschulz@sonic.net>
References: <126EB79A-5862-46DA-A428-A059006E3DC8@cs.usfca.edu>
	<9FA2363C-375A-48BE-889E-18E590E64ACA@cs.usfca.edu>
	<200810021006.02368.rschulz@sonic.net>
Message-ID: <200810021025.49989.rschulz@sonic.net>

On Thursday 02 October 2008 10:06, Randall R Schulz wrote:
> On Thursday 02 October 2008 09:57, Terence Parr wrote:
> > On Oct 2, 2008, at 7:08 AM, Randall R Schulz wrote:
> > > On Thursday 02 October 2008 06:48, Randall R Schulz wrote:
> > >> On Wednesday 01 October 2008 14:36, Terence Parr wrote:
> > >>> 3.1.1 released:
> > >>
> > >> I'm starting a new parser and upgraded (to 3.1, yesterday and
> > >> then to 3.1.1, later yesterday...). Anyway, I was wondering if
> > >> the ANTLR command-line interface (org.antlr.Tool#main(), i.e.)
> > >> gives a non-zero exit code when there was an error during
> > >> processing of the ".g" files?
> > >>
> > >> ...
> > >
> > > Empirical testing suggests the answer is "no."
> > >
> > > Wasn't this going to be addressed a long time ago? It's very
> > > kludgey to
> >
> > I thought so...did you get a error or warning?
>
> Regardless of whether ANTLR liked the grammar specification or not,
> the exit status is always 0.

It just got worse.

I've got a rule that refers ambiguously to itself in a tree building 
construct:

op790Formula
    :   (op780Formula -> op780Formula)
        (
            Or rDisjunct = op790Formula
        ->  ^(Or $op790Formula $rDisjunct)
        ) ?
    ;

ANTLR tells me this:

error(132): P9.g:581:11: reference $op790Formula is ambiguous;
	rule op790Formula is enclosing rule and referenced in the production
	(assuming enclosing rule)


Now it says it assumed the enclosing rule, which is what I want, so I 
figure the resulting code would be OK (and it does generate the usual 
complement of Java source files), but since this is labelled as an 
error, not a warning, my script thinks it cannot go on to run Ant to 
build the class files.


Randall Schulz

From hgutsche at storm.ca  Thu Oct  2 11:02:59 2008
From: hgutsche at storm.ca (Hartmuth Gutsche)
Date: Thu, 2 Oct 2008 14:02:59 -0400 (EDT)
Subject: [antlr-interest] ANTLR 3.1.1 test failures
Message-ID: <31515.208.65.73.201.1222970579.squirrel@home.storm.ca>

I am trying to run the tests under ?org.antlr.test? and get 503 failures
out of 1095 tests. Are they supposed to pass without failure?

I see this in two different Windows environments.



Thanks!



Hartmuth




From parrt at cs.usfca.edu  Thu Oct  2 11:44:04 2008
From: parrt at cs.usfca.edu (Terence Parr)
Date: Thu, 2 Oct 2008 11:44:04 -0700
Subject: [antlr-interest] ANTLR 3.1.1 test failures
In-Reply-To: <31515.208.65.73.201.1222970579.squirrel@home.storm.ca>
References: <31515.208.65.73.201.1222970579.squirrel@home.storm.ca>
Message-ID: <9C0F4B50-23EE-4A16-8469-1C2509C6C3D9@cs.usfca.edu>


On Oct 2, 2008, at 11:02 AM, Hartmuth Gutsche wrote:

> I am trying to run the tests under ?org.antlr.test? and get 503  
> failures
> out of 1095 tests. Are they supposed to pass without failure?
>
> I see this in two different Windows environments.

Mostly likely \n and \r issue.

T

From rschulz at sonic.net  Thu Oct  2 12:24:32 2008
From: rschulz at sonic.net (Randall R Schulz)
Date: Thu, 2 Oct 2008 12:24:32 -0700
Subject: [antlr-interest] Rewriting Repeatable Prefix Operators To Nested
	AST Structure
Message-ID: <200810021224.33226.rschulz@sonic.net>

Hi,

I have a couple of productions that use a prefix operator that may be
repeated arbitrarily. One of them (negation) just has the operator
symbol. The other has a keyword (two different keywords, actually)
followed by an identifier.

For example, with the negation operator, this:

	---p

should produce this tree structure:

	(Not (Not (Not p)))

The other case ("forall" is the keyword, "Forall" the token name):

	forall A forall B forall C q
->
	(Forall A (Forall B (Forall C q)))


I have a similar situation with a repeatable suffix operator (the prime
symbol from calculus or analysis). That's handled properly by this
approach ("Prime" is the token name for the single apostrophe operator):

op300Term
    :   (primitiveTerm  -> primitiveTerm)
        (Prime          -> ^(Prime $op300Term)) *
    ;


However, using an analogous approach with the prefix operators doesn't
seem to work:

op350Formula
    :   (
            Not ->  ^(Not $op350Formula)
        ) *
        (primitiveFormula -> primitiveFormula)
    ;

The result of attempting to parse an instance of this:

Exception in thread "main" org.antlr.runtime.tree.RewriteEmptyStreamException: token retval
        at org.antlr.runtime.tree.RewriteRuleElementStream._next(RewriteRuleElementStream.java:158)
        at org.antlr.runtime.tree.RewriteRuleElementStream.nextTree(RewriteRuleElementStream.java:145)
        at tau.p9.P9Parser.op350Formula(P9Parser.java:2235)


The grammar itself parsed the test input successfully before I added the
AST building constructs shown above.


What's a good way to deal with this sort of prefix, repeatable, nested
construct?

Thanks.

Randall Schulz

From jimi at temporal-wave.com  Thu Oct  2 12:31:06 2008
From: jimi at temporal-wave.com (Jim Idle)
Date: Thu, 02 Oct 2008 12:31:06 -0700
Subject: [antlr-interest] Rewriting Repeatable Prefix Operators
	To	Nested AST Structure
In-Reply-To: <200810021224.33226.rschulz@sonic.net>
References: <200810021224.33226.rschulz@sonic.net>
Message-ID: <1222975866.4148.20.camel@jimi.temporal-wave.com>

On Thu, 2008-10-02 at 12:24 -0700, Randall R Schulz wrote:

> Hi,
> 
> I have a couple of productions that use a prefix operator that may be
> repeated arbitrarily. One of them (negation) just has the operator
> symbol. The other has a keyword (two different keywords, actually)
> followed by an identifier.
> 
> For example, with the negation operator, this:
> 
> 	---p


rule : NEG^ rule
        | next_expr_in_precedence_stack
        ;

See things like the ^ operator in example grammars for right associative
things.

Jim
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20081002/15beae4a/attachment.html 

From antlr at mirality.co.nz  Thu Oct  2 12:39:43 2008
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Fri, 03 Oct 2008 08:39:43 +1300
Subject: [antlr-interest] Rewriting Repeatable Prefix Operators To
 Nested AST Structure
In-Reply-To: <200810021224.33226.rschulz@sonic.net>
References: <200810021224.33226.rschulz@sonic.net>
Message-ID: <20081002193951.C4FD53522B1@www.antlr.org>

At 08:24 3/10/2008, Randall R Schulz wrote:
 >op350Formula
 >    :   (
 >            Not ->  ^(Not $op350Formula)
 >        ) *
 >        (primitiveFormula -> primitiveFormula)
 >    ;

The reason why you're getting the RewriteEmptyStreamException 
there is that on the first pass through you're trying to use the 
tree $op350Formula in the rewrite, but it's empty.

You can avoid the error by changing $op350Formula to 
$op350Formula?, but this still won't produce the tree you want -- 
for the input "---a", you'll get the tree "^(NOT ^(NOT ^(NOT))) a"

The right way to do it is to actually recurse:

op350Formula
   :  Not a=op350Formula -> ^(Not $a)
   |  primitiveFormula -> primitiveFormula
   ;


From rschulz at sonic.net  Thu Oct  2 13:49:01 2008
From: rschulz at sonic.net (Randall R Schulz)
Date: Thu, 2 Oct 2008 13:49:01 -0700
Subject: [antlr-interest] Rewriting Repeatable Prefix Operators To
	Nested AST Structure
In-Reply-To: <1222975866.4148.20.camel@jimi.temporal-wave.com>
References: <200810021224.33226.rschulz@sonic.net>
	<1222975866.4148.20.camel@jimi.temporal-wave.com>
Message-ID: <200810021349.01900.rschulz@sonic.net>

On Thursday 02 October 2008 12:31, Jim Idle wrote:
> On Thu, 2008-10-02 at 12:24 -0700, Randall R Schulz wrote:
> > Hi,
> >
> > I have a couple of productions that use a prefix operator that may
> > be repeated arbitrarily. One of them (negation) just has the
> > operator symbol. The other has a keyword (two different keywords,
> > actually) followed by an identifier.
> >
> > For example, with the negation operator, this:
> >
> > 	---p
>
> rule : NEG^ rule
>
>         | next_expr_in_precedence_stack
>
>         ;
>
> See things like the ^ operator in example grammars for right
> associative things.
>
> Jim


Thanks, Jim. I knew it couldn't be as hard as I was making it.


Randall Schulz

From rschulz at sonic.net  Thu Oct  2 14:23:09 2008
From: rschulz at sonic.net (Randall R Schulz)
Date: Thu, 2 Oct 2008 14:23:09 -0700
Subject: [antlr-interest] Rewriting to Flat Tree Nodes for Associative
	Multiary Operators
Message-ID: <200810021423.09602.rschulz@sonic.net>

Hi,

Next question.

(I've been spoiled by working mostly with strictly prefix languages in 
the past...)


How might I alter a rule such as this one:

op790Formula
    :   (op780Formula -> op780Formula)
        (
            Or rDisjunct = op790Formula
        ->  ^(Or $op790Formula $rDisjunct)
        ) ?
    ;

(parenthetically:
op780Formula
    :   ... // Next higher level of operator precedence (And)
    ;
)

which, when given input like this:

	p | q | r | s

produces this sort of tree:

	(Or p (Or q (Or r s)))

so that I instead get this:

	(Or p q r s)


Every variation I've tried either gives me the fully nested tree or 
elicits a org.antlr.runtime.tree.RewriteEmptyStreamException.


Thanks in advance (again).


Randall Schulz

From jimi at temporal-wave.com  Thu Oct  2 14:29:26 2008
From: jimi at temporal-wave.com (Jim Idle)
Date: Thu, 02 Oct 2008 14:29:26 -0700
Subject: [antlr-interest] Rewriting to Flat Tree Nodes for
	Associative	Multiary Operators
In-Reply-To: <200810021423.09602.rschulz@sonic.net>
References: <200810021423.09602.rschulz@sonic.net>
Message-ID: <1222982966.4148.45.camel@jimi.temporal-wave.com>

On Thu, 2008-10-02 at 14:23 -0700, Randall R Schulz wrote:

> Hi,
> 
> Next question.
> 
> (I've been spoiled by working mostly with strictly prefix languages in 
> the past...)
> 
> 
> How might I alter a rule such as this one:
> 
> op790Formula
>     :   (op780Formula -> op780Formula)
>         (
>             Or rDisjunct = op790Formula
>         ->  ^(Or $op790Formula $rDisjunct)
>         ) ?
>     ;


Have you tried:


o : v1=nextrule 
          ( 
              (Or v2+=nextrule )+ ->^(OR $v1 $v2+)
            | // No OR's, default tree
          )
    ;


Or something similar?

Jim

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20081002/204412fa/attachment.html 

From jimi at temporal-wave.com  Thu Oct  2 14:33:41 2008
From: jimi at temporal-wave.com (Jim Idle)
Date: Thu, 02 Oct 2008 14:33:41 -0700
Subject: [antlr-interest] Rewriting to Flat Tree Nodes
	for	Associative	Multiary Operators
In-Reply-To: <1222982966.4148.45.camel@jimi.temporal-wave.com>
References: <200810021423.09602.rschulz@sonic.net>
	<1222982966.4148.45.camel@jimi.temporal-wave.com>
Message-ID: <1222983221.4148.47.camel@jimi.temporal-wave.com>

On Thu, 2008-10-02 at 14:29 -0700, Jim Idle wrote:

> On Thu, 2008-10-02 at 14:23 -0700, Randall R Schulz wrote: 
> 
> > Hi,
> > 
> > Next question.
> > 
> > (I've been spoiled by working mostly with strictly prefix languages in 
> > the past...)
> > 
> > 
> > How might I alter a rule such as this one:
> > 
> > op790Formula
> >     :   (op780Formula -> op780Formula)
> >         (
> >             Or rDisjunct = op790Formula
> >         ->  ^(Or $op790Formula $rDisjunct)
> >         ) ?
> >     ;
> 
> 
> Have you tried:
> 
> 
> o : v1=nextrule 
>           ( 
>               (Or v2+=nextrule )+ ->^(OR $v1 $v2+)
>             | // No OR's, default tree
>           )
>     ;
> 
> 
> Or something similar?


I should add that this won't be as useful a tree for processing unless
this is a translator and you want to spit this stuff out in that kind of
arrangement.

Jim

> 
> Jim
> 
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
> 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20081002/461fb402/attachment.html 

From rschulz at sonic.net  Thu Oct  2 14:48:30 2008
From: rschulz at sonic.net (Randall R Schulz)
Date: Thu, 2 Oct 2008 14:48:30 -0700
Subject: [antlr-interest]
	=?utf-8?q?Rewriting_to_Flat_Tree_Nodes_for_Assoc?=
	=?utf-8?q?iative=09Multiary_Operators?=
In-Reply-To: <1222983221.4148.47.camel@jimi.temporal-wave.com>
References: <200810021423.09602.rschulz@sonic.net>
	<1222982966.4148.45.camel@jimi.temporal-wave.com>
	<1222983221.4148.47.camel@jimi.temporal-wave.com>
Message-ID: <200810021448.30122.rschulz@sonic.net>

On Thursday 02 October 2008 14:33, Jim Idle wrote:
> ...
>
> I should add that this won't be as useful a tree for processing
> unless this is a translator and you want to spit this stuff out in
> that kind of arrangement.
>
> Jim

Well, in fact I am just writing a transliterator, and since AND and OR 
are each associative-commutative, and since the target language does 
support them as multiary connectives, it's all perfectly fine.

It's perhaps worth mentioning, though certainly tangential, that at 
least in certain circles of logic and theorem proving, the generalized 
form of AND and OR are assumed (and that includes nullary and unary 
forms, as well as those with more than two subformulas) and so the 
strictly binary form is _not_ the most useful one for the kind of 
processing that I have to do.


Infix notation is an illusion...


Randall Schulz

From jimi at temporal-wave.com  Thu Oct  2 14:53:44 2008
From: jimi at temporal-wave.com (Jim Idle)
Date: Thu, 02 Oct 2008 14:53:44 -0700
Subject: [antlr-interest] Rewriting to Flat Tree Nodes
	for	Associative	Multiary Operators
In-Reply-To: <200810021448.30122.rschulz@sonic.net>
References: <200810021423.09602.rschulz@sonic.net>
	<1222982966.4148.45.camel@jimi.temporal-wave.com>
	<1222983221.4148.47.camel@jimi.temporal-wave.com>
	<200810021448.30122.rschulz@sonic.net>
Message-ID: <1222984424.4148.58.camel@jimi.temporal-wave.com>

On Thu, 2008-10-02 at 14:48 -0700, Randall R Schulz wrote:

> On Thursday 02 October 2008 14:33, Jim Idle wrote:
> > ...
> >
> > I should add that this won't be as useful a tree for processing
> > unless this is a translator and you want to spit this stuff out in
> > that kind of arrangement.
> >
> > Jim
> 
> Well, in fact I am just writing a transliterator, and since AND and OR 
> are each associative-commutative, and since the target language does 
> support them as multiary connectives, it's all perfectly fine.
> 
> It's perhaps worth mentioning, though certainly tangential, that at 
> least in certain circles of logic and theorem proving, the generalized 
> form of AND and OR are assumed 


Yep - I know all about that stuff, believe me ;-). However when walking
an AST other representations can still be useful.

> (and that includes nullary and unary 
> forms, as well as those with more than two subformulas) and so the 
> strictly binary form is _not_ the most useful one for the kind of 
> processing that I have to do.


However, more importantly, so that markmail has an answer for the
future, did that construct give you what you needed? ;-)

Jim
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20081002/4cc179f8/attachment.html 

From jbb at acm.org  Thu Oct  2 14:59:42 2008
From: jbb at acm.org (John B. Brodie)
Date: Thu, 2 Oct 2008 17:59:42 -0400
Subject: [antlr-interest] Rewriting to Flat Tree Nodes for Associative
	Multiary Operators
In-Reply-To: <200810021423.09602.rschulz@sonic.net>
References: <200810021423.09602.rschulz@sonic.net>
Message-ID: <200810021759.42722.jbb@acm.org>

Greetings! 

On Thursday 02 October 2008 05:23:09 pm Randall R Schulz wrote:
> How might I alter a rule such as this one:
>
> op790Formula
> ? ? : ? (op780Formula -> op780Formula)
> ? ? ? ? (
> ? ? ? ? ? ? Or rDisjunct = op790Formula
> ? ? ? ? -> ?^(Or $op790Formula $rDisjunct)
> ? ? ? ? ) ?
> ? ? ;
>
> (parenthetically:
> op780Formula
> ? ? : ? ... // Next higher level of operator precedence (And)
> ? ? ;
> )
>
> which, when given input like this:
>
> ????????p | q | r | s
>
> produces this sort of tree:
>
> ????????(Or p (Or q (Or r s)))
>
> so that I instead get this:
>
> ????????(Or p q r s)

have you tried:

op790Formula : op780Formula ( Or^ op790Formula )? ;

or without recursion:

op790Formula : op780Formula ( Or^ op780Formula )* ;

Hope this helps...
   -jbb

From rschulz at sonic.net  Thu Oct  2 15:01:28 2008
From: rschulz at sonic.net (Randall R Schulz)
Date: Thu, 2 Oct 2008 15:01:28 -0700
Subject: [antlr-interest] Rewriting to Flat Tree Nodes for Associative
	Multiary Operators
In-Reply-To: <1222982966.4148.45.camel@jimi.temporal-wave.com>
References: <200810021423.09602.rschulz@sonic.net>
	<1222982966.4148.45.camel@jimi.temporal-wave.com>
Message-ID: <200810021501.28970.rschulz@sonic.net>

On Thursday 02 October 2008 14:29, Jim Idle wrote:
> On Thu, 2008-10-02 at 14:23 -0700, Randall R Schulz wrote:
> > Hi,
> >
> > Next question.
> >
> > (I've been spoiled by working mostly with strictly prefix languages
> > in the past...)
> >
> >
> > How might I alter a rule such as this one:
> >
> > op790Formula
> >
> >     :   (op780Formula -> op780Formula)
> >
> >         (
> >             Or rDisjunct = op790Formula
> >         ->  ^(Or $op790Formula $rDisjunct)
> >         ) ?
> >     ;
>
> Have you tried:
>
>
> o : v1=nextrule
>           (
>               (Or v2+=nextrule )+ ->^(OR $v1 $v2+)
>
>             | // No OR's, default tree
>
>           )
>     ;
>
>
> Or something similar?

Well, it looks to me like it's very similar to what I did try, and this, 
too, yields the org.antlr.runtime.tree.RewriteEmptyStreamException.

Whether you include an empty alternative (as you showed) or make the 
entire sub-rule optional, as I'd tried earlier:

op790FormulaFlat
    :   (op780FormulaFlat -> op780FormulaFlat)
        ( Or rDisjuncts = op790FormulaFlat) + )
    ->  ^(Or $op790FormulaFlat $rDisjuncts+)
    ) ?
    ;

the result is the same: RewriteEmptyStreamException.


> Jim


Randall Schulz

From rschulz at sonic.net  Thu Oct  2 15:04:05 2008
From: rschulz at sonic.net (Randall R Schulz)
Date: Thu, 2 Oct 2008 15:04:05 -0700
Subject: [antlr-interest] Rewriting to Flat Tree Nodes for Associative
	Multiary Operators
In-Reply-To: <200810021501.28970.rschulz@sonic.net>
References: <200810021423.09602.rschulz@sonic.net>
	<1222982966.4148.45.camel@jimi.temporal-wave.com>
	<200810021501.28970.rschulz@sonic.net>
Message-ID: <200810021504.05946.rschulz@sonic.net>

On Thursday 02 October 2008 15:01, Randall R Schulz wrote:
> ...
>
> Whether you include an empty alternative (as you showed) or make the
> entire sub-rule optional, as I'd tried earlier:
>
> op790FormulaFlat
>     :   (op780FormulaFlat -> op780FormulaFlat)
>         ( Or rDisjuncts = op790FormulaFlat) + )
>     ->  ^(Or $op790FormulaFlat $rDisjuncts+)
>     ) ?
>     ;

The missing paren was an editing error of some sort. Naturally, it would 
not compile that way. This was what I'd tried:

op790FormulaFlat
    :   (op780FormulaFlat -> op780FormulaFlat)
    (
        ( Or rDisjuncts = op790FormulaFlat) + )
    ->  ^(Or $op790FormulaFlat $rDisjuncts+)
    ) ?
    ;



RRS

From jimi at temporal-wave.com  Thu Oct  2 15:23:02 2008
From: jimi at temporal-wave.com (Jim Idle)
Date: Thu, 02 Oct 2008 15:23:02 -0700
Subject: [antlr-interest] Rewriting to Flat Tree Nodes for
	Associative	Multiary Operators
In-Reply-To: <200810021501.28970.rschulz@sonic.net>
References: <200810021423.09602.rschulz@sonic.net>
	<1222982966.4148.45.camel@jimi.temporal-wave.com>
	<200810021501.28970.rschulz@sonic.net>
Message-ID: <1222986182.4148.63.camel@jimi.temporal-wave.com>

On Thu, 2008-10-02 at 15:01 -0700, Randall R Schulz wrote:

> On Thursday 02 October 2008 14:29, Jim Idle wrote:



> > Have you tried:
> >
> >
> > o : v1=nextrule
> >           (
> >               (Or v2+=nextrule )+ ->^(OR $v1 $v2+)
> >
> >             | // No OR's, default tree
> >
> >           )
> >     ;
> >
> >
> > Or something similar?
> 
> Well, it looks to me like it's very similar to what I did try, and this, 
> too, yields the org.antlr.runtime.tree.RewriteEmptyStreamException.
> 
> Whether you include an empty alternative (as you showed) or make the 
> entire sub-rule optional, as I'd tried earlier:


Yeah but you are referencing the rule itself there. If you get a rewrite
exception then it could be a bug. I will try a small example - if htat
works, then perhaps your lower down rules are returning empty trees in
cases of error or something way.


> 
> op790FormulaFlat
>     :   (op780FormulaFlat -> op780FormulaFlat)
>         ( Or rDisjuncts = op790FormulaFlat) + )
>     ->  ^(Or $op790FormulaFlat $rDisjuncts+)
>     ) ?
>     ;
> 
> the result is the same: RewriteEmptyStreamException.
> 


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20081002/f51e8c2c/attachment.html 

From rschulz at sonic.net  Thu Oct  2 16:01:08 2008
From: rschulz at sonic.net (Randall R Schulz)
Date: Thu, 2 Oct 2008 16:01:08 -0700
Subject: [antlr-interest] Rewriting to Flat Tree Nodes for Associative
	Multiary Operators
In-Reply-To: <1222986182.4148.63.camel@jimi.temporal-wave.com>
References: <200810021423.09602.rschulz@sonic.net>
	<200810021501.28970.rschulz@sonic.net>
	<1222986182.4148.63.camel@jimi.temporal-wave.com>
Message-ID: <200810021601.08658.rschulz@sonic.net>

On Thursday 02 October 2008 15:23, Jim Idle wrote:
> On Thu, 2008-10-02 at 15:01 -0700, Randall R Schulz wrote:
> > On Thursday 02 October 2008 14:29, Jim Idle wrote:
> > > Have you tried:
> > >
> > >
> > > o : v1=nextrule
> > >           (
> > >               (Or v2+=nextrule )+ ->^(OR $v1 $v2+)
> > >
> > >             | // No OR's, default tree
> > >
> > >           )
> > >     ;
> > >
> > >
> > > Or something similar?
> >
> > Well, it looks to me like it's very similar to what I did try, and
> > this, too, yields the
> > org.antlr.runtime.tree.RewriteEmptyStreamException.
> >
> > Whether you include an empty alternative (as you showed) or make
> > the entire sub-rule optional, as I'd tried earlier:
>
> Yeah but you are referencing the rule itself there. If you get a
> rewrite exception then it could be a bug. I will try a small example
> - if htat works, then perhaps your lower down rules are returning
> empty trees in cases of error or something way.

I'm sure the more deeply nested rules aren't returning empty trees, 
because they're the same rules I use to successfully produce the fully 
nested trees I'm trying to avoid.


Randall Schulz

From rschulz at sonic.net  Thu Oct  2 16:34:48 2008
From: rschulz at sonic.net (Randall R Schulz)
Date: Thu, 2 Oct 2008 16:34:48 -0700
Subject: [antlr-interest] Rewriting to Flat Tree Nodes for Associative
	Multiary Operators
In-Reply-To: <200810021915.24111.jbb@acm.org>
References: <200810021423.09602.rschulz@sonic.net>
	<200810021513.53641.rschulz@sonic.net>
	<200810021915.24111.jbb@acm.org>
Message-ID: <200810021634.48900.rschulz@sonic.net>

On Thursday 02 October 2008 16:15, you wrote:
> ...
>
> yes the second (non-recursion form) acts as you report
>
>
> however the former, recursive, form generates (for me)
>
> (Or p (Or q (Or r s)))
>
> for your input string. I can't remember anymore, is that what you
> wanted?

Nope. I can get that easily. What I'm trying to get is this:

	(Or p q r s)


> Sorry about any confusion I may have caused.

No problem. Perhaps I was too aggressive in trimming earlier quoted 
material.


Randall Schulz

From rschulz at sonic.net  Thu Oct  2 17:21:35 2008
From: rschulz at sonic.net (Randall R Schulz)
Date: Thu, 2 Oct 2008 17:21:35 -0700
Subject: [antlr-interest] ANTLRWorks Glitch Exporting Bitmaps
Message-ID: <200810021721.35402.rschulz@sonic.net>

Hi,

I've noticed that if I've reduced the scale of parse tree or AST 
depiction using the the scale / zoom slider and export an image, it is 
improperly clipped. Specifically, the bounding box of the exported 
image is too small and portions at the lower and right edge are lost.

It doesn't happen if you don't reduce the magnification.

I have not tried the reverse, zooming in to see if excessive bottom and 
right blank regions result.


But for the record: ANTLRWorks is awesome!


Randall Schulz

From rschulz at sonic.net  Thu Oct  2 18:34:11 2008
From: rschulz at sonic.net (Randall R Schulz)
Date: Thu, 2 Oct 2008 18:34:11 -0700
Subject: [antlr-interest] your Or ast question
In-Reply-To: <200810022054.22961.jbb@acm.org>
References: <200810022054.22961.jbb@acm.org>
Message-ID: <200810021834.11275.rschulz@sonic.net>

On Thursday 02 October 2008 17:54, you wrote:
> Mr. Schulz :-

I'm sorry. My father isn't here right now...


> Sorry for this disconnected reply to your last message to me.

It's OK. I hope you don't mind my sending the reply back to the list.

I'm surprised this seems so difficult (not yet conceding 
impossibility!), so I think it would be generally interesting to have 
the whole list membership observe the attempts.


> ...
>
> recapping from memory, you want
>
> p | q | r | s
>
> to be represented, essentially, as an ast of
>
> (| p q r s)

Precisely.


> ...
>
> maybe try this
>
> o : (a->a) ( ('|' a)+ -> ^('|' a+) )? ;

The result is the same:

	(Or p (Or q (Or r (Or s))))


> and also sorry, because i have forgotten your op7xxFormula rule
> naming.

Well, it's idiosyncratic, to be sure, but I just chose it based on the 
language description I was using to write the grammar. There is nothing 
even approximating a BNF for this language, so there's a lot of 
interpretive leeway. That would be fine, but the software I'm trying to 
emulate has a long history and thus I have to replicate it's grammar 
pretty closely, lest I fail to successfully and properly transliterate 
it.


> too many Sorries; but hope this helps...

Really, there's not need to apologize.


>    -jbb

Thanks!

Randall Schulz

From rschulz at sonic.net  Thu Oct  2 18:43:44 2008
From: rschulz at sonic.net (Randall R Schulz)
Date: Thu, 2 Oct 2008 18:43:44 -0700
Subject: [antlr-interest] THE STEAMROLLER PROBLEM!
Message-ID: <200810021843.44902.rschulz@sonic.net>

Hi,

Sorry for shouting, but I really would like a definitive answer to this
question. ("Steamroller" referring to creating a flat AST.)

If one is to parse an infix operator notation, exemplified by this
input:

	1 OP 2 OP 3 OP 4 OP 5

and produce from it this AST:

	(OP 1 2 3 4 5)

How, if it is indeed possible, would one do this?

It seems simple enough, but so far, no suggestion offered nor idea of my
own has succeeded in producing anything other than one of these results:

Result 1:
	(OP 1 (OP 2 (OP 3 (OP 4 5))))

Result 2:
	(OP (OP (OP (OP 1 2) 3) 4) 5))))

Result 3:

Exception in thread "main" org.antlr.runtime.tree.RewriteEmptyStreamException: token OP


Any definitive answers out there? Terence??

Thanks.


Randall Schulz

From lgcraymer at yahoo.com  Thu Oct  2 19:10:31 2008
From: lgcraymer at yahoo.com (Loring Craymer)
Date: Thu, 2 Oct 2008 19:10:31 -0700 (PDT)
Subject: [antlr-interest] THE STEAMROLLER PROBLEM!
Message-ID: <461659.87019.qm@web55903.mail.re3.yahoo.com>

This one is easy with the ^ annotation:

opRule
        :
        term
        (
               OP^
               term
               (
                          OP!
                          term
               )*
         )?
         ;

--Loring




----- Original Message ----
> From: Randall R Schulz <rschulz at sonic.net>
> To: antlr-interest at antlr.org
> Sent: Thursday, October 2, 2008 6:43:44 PM
> Subject: [antlr-interest] THE STEAMROLLER PROBLEM!
> 
> Hi,
> 
> Sorry for shouting, but I really would like a definitive answer to this
> question. ("Steamroller" referring to creating a flat AST.)
> 
> If one is to parse an infix operator notation, exemplified by this
> input:
> 
>     1 OP 2 OP 3 OP 4 OP 5
> 
> and produce from it this AST:
> 
>     (OP 1 2 3 4 5)
> 
> How, if it is indeed possible, would one do this?
> 
> It seems simple enough, but so far, no suggestion offered nor idea of my
> own has succeeded in producing anything other than one of these results:
> 
> Result 1:
>     (OP 1 (OP 2 (OP 3 (OP 4 5))))
> 
> Result 2:
>     (OP (OP (OP (OP 1 2) 3) 4) 5))))
> 
> Result 3:
> 
> Exception in thread "main" org.antlr.runtime.tree.RewriteEmptyStreamException: 
> token OP
> 
> 
> Any definitive answers out there? Terence??
> 
> Thanks.
> 
> 
> Randall Schulz
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: 
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address



      

From jbb at acm.org  Thu Oct  2 19:22:54 2008
From: jbb at acm.org (John B. Brodie)
Date: Thu, 2 Oct 2008 22:22:54 -0400
Subject: [antlr-interest] your Or ast question
In-Reply-To: <200810021834.11275.rschulz@sonic.net>
References: <200810022054.22961.jbb@acm.org>
	<200810021834.11275.rschulz@sonic.net>
Message-ID: <200810022222.54477.jbb@acm.org>

On Thursday 02 October 2008 09:34:11 pm Randall R Schulz wrote:
> On Thursday 02 October 2008 17:54, you wrote:
> > Mr. Schulz :-
>
> I'm sorry. My father isn't here right now...

I happen to believe that everyone deserves respect...

> > Sorry for this disconnected reply to your last message to me.
>
> It's OK. I hope you don't mind my sending the reply back to the list.

It is okay with me.

> I'm surprised this seems so difficult (not yet conceding
> impossibility!), so I think it would be generally interesting to have
> the whole list membership observe the attempts.
>

I do not think that your question is really all that difficult.

> > ...
> >
> > recapping from memory, you want
> >
> > p | q | r | s
> >
> > to be represented, essentially, as an ast of
> >
> > (| p q r s)
>
> Precisely.
>
> > ...
> >
> > maybe try this
> >
> > o : (a->a) ( ('|' a)+ -> ^('|' a+) )? ;
>
> The result is the same:
>
> 	(Or p (Or q (Or r (Or s))))

Not for me. I use the toStringTree method of the java CommonTree to obtain my 
result - is that what you are using?


this grammar file, Test.g :

-----begin cut here ----- cut here ----- cut here
grammar Test;

options {
	output = AST;
	ASTLabelType = CommonTree;
}

@members {
    private static final String [] x = new String[]{
        "s", "p | q | r | s"
    };

    public static void main(String [] args) {
        for( int i = 0; i < x.length; ++i ) {
            try {
                System.out.println("about to parse:`"+x[i]+"`");
                TestLexer lexer = new TestLexer(new ANTLRStringStream(x[i]));
                CommonTokenStream tokens = new CommonTokenStream(lexer);

                TestParser parser = new TestParser(tokens);
                TestParser.start_return p_result = parser.start();

                CommonTree ast = p_result.tree;
                if( ast == null ) {
                   System.out.println("resultant tree: is NULL");
                } else {
                   System.out.println("resultant tree: "+ast.toStringTree());
                }
                System.out.println();
            } catch(Exception e) {
                e.printStackTrace();
            }
        }
    }
}

start : o EOF! ;

o : (a->a) ( ('|' a)+ -> ^('|' a+) )? ;

a : 'p' | 'q' | 'r' | 's' ;

WS : ' '+ { $channel=HIDDEN; } ;
-----end cut here ----- cut here ----- cut here -----


using this command line in Ubuntu 8.04 Linux :

-----begin cut here ----- cut here ----- cut here
java org.antlr.Tool Test.g ; javac *.java ; java TestParser
-----end cut here ----- cut here ----- cut here -----


gets this result printed on the unix standard output device:

-----begin cut here ----- cut here ----- cut here
ANTLR Parser Generator  Version 3.1 (August 12, 2008)  1989-2008
about to parse:`s`
resultant tree: s

about to parse:`p | q | r | s`
resultant tree: (| q r s)
-----end cut here ----- cut here ----- cut here -----


do you get anything similiar to the above?

still not what you want, but perhaps closer.

so, i think, we just need to work out an appropriate use of the ANTLR tree 
building operator += on the Left Hand Side of the -> operator in order to 
compose a complete list of sub-terms.

Does this seem reasonable? 

Is that really so hard?

>....remainder of quoted message snipped....



From jbb at acm.org  Thu Oct  2 19:28:34 2008
From: jbb at acm.org (John B. Brodie)
Date: Thu, 2 Oct 2008 22:28:34 -0400
Subject: [antlr-interest] THE STEAMROLLER PROBLEM!
In-Reply-To: <200810021843.44902.rschulz@sonic.net>
References: <200810021843.44902.rschulz@sonic.net>
Message-ID: <200810022228.34312.jbb@acm.org>

On Thursday 02 October 2008 09:43:44 pm Randall R Schulz wrote:
> Hi,
>
> Sorry for shouting, but I really would like a definitive answer to this
> question. ("Steamroller" referring to creating a flat AST.)
>
> If one is to parse an infix operator notation, exemplified by this
> input:
>
> 	1 OP 2 OP 3 OP 4 OP 5
>
> and produce from it this AST:
>
> 	(OP 1 2 3 4 5)
>
> How, if it is indeed possible, would one do this?
>
> It seems simple enough, but so far, no suggestion offered nor idea of my
> own has succeeded in producing anything other than one of these results:
>
> Result 1:
> 	(OP 1 (OP 2 (OP 3 (OP 4 5))))
>
> Result 2:
> 	(OP (OP (OP (OP 1 2) 3) 4) 5))))
>
> Result 3:
>
> Exception in thread "main"
> org.antlr.runtime.tree.RewriteEmptyStreamException: token OP
>
>
> Any definitive answers out there? Terence??
>
> Thanks.
>
>
> Randall Schulz
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address

Solution attached.

-------------- next part --------------
A non-text attachment was scrubbed...
Name: Test.g
Type: text/x-java
Size: 1171 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20081002/9c10ab8d/attachment.bin 

From hgutsche at storm.ca  Thu Oct  2 19:38:30 2008
From: hgutsche at storm.ca (Hartmuth Gutsche)
Date: Thu, 2 Oct 2008 22:38:30 -0400
Subject: [antlr-interest] ANTLR 3.1.1 test failures
References: <31515.208.65.73.201.1222970579.squirrel@home.storm.ca>
	<9C0F4B50-23EE-4A16-8469-1C2509C6C3D9@cs.usfca.edu>
Message-ID: <002501c92501$229624f0$6900a8c0@uranus>

Definitely such a kind of problem. One of the cases I am looking at is the
following:

...
public void testRuleLabelOnTwoDifferentRulesAST() throws Exception {
String grammar =
"grammar T;\n"+
"options {output=AST;}\n"+
"s : x+=a x+=b {System.out.println($x);} ;" +
"a : 'a';\n"+
"b : 'b';\n"+
"WS : (' '|'\n') {skip();};\n";
...

and what I find generated for mWS() in the lexer TLexer.java is:
...
switch (alt1) {
case 1 :
// C:\\DOCUME~1\\HARTMU~1\\LOCALS~1\\Temp\\antlr-1222999104471\\T.g:5:7: ' '
{
match(' ');
}
break;
case 2 :
// C:\\DOCUME~1\\HARTMU~1\\LOCALS~1\\Temp\\antlr-1222999104471\\T.g:5:11:
'\r\n'
{
match("               <<<<<<<-------
");                       <<<<<<<-------

}
break;
...


The "broken call" to match is of course what javac complains about with all
its consequences.
Any idea how to make that "unhappen"?
I still think is has something to-do with my environment setup I just don't
know what to look for.
Which environmental settings could possibly affect the generated code in the
above way?

Hartmuth


----- Original Message ----- 
From: "Terence Parr" <parrt at cs.usfca.edu>
To: "Hartmuth Gutsche" <hgutsche at storm.ca>
Cc: <antlr-interest at antlr.org>
Sent: Thursday, October 02, 2008 2:44 PM
Subject: Re: [antlr-interest] ANTLR 3.1.1 test failures



On Oct 2, 2008, at 11:02 AM, Hartmuth Gutsche wrote:

> I am trying to run the tests under ?org.antlr.test? and get 503
> failures
> out of 1095 tests. Are they supposed to pass without failure?
>
> I see this in two different Windows environments.

Mostly likely \n and \r issue.

T



From hgutsche at storm.ca  Thu Oct  2 19:49:53 2008
From: hgutsche at storm.ca (Hartmuth Gutsche)
Date: Thu, 2 Oct 2008 22:49:53 -0400
Subject: [antlr-interest] ANTLR 3.1.1 test failures
References: <31515.208.65.73.201.1222970579.squirrel@home.storm.ca><9C0F4B50-23EE-4A16-8469-1C2509C6C3D9@cs.usfca.edu>
	<002501c92501$229624f0$6900a8c0@uranus>
Message-ID: <003301c92502$b988ea90$6900a8c0@uranus>

I just looked at the generated T.g file and that one looks like this:

grammar T;
options {output=AST;}
s : x+=a x+=b {System.out.println($x);} ;a : 'a';
b : 'b';
WS : (' '|'
') {skip();};


Which means that the problem shows up in the generated test grammar file.
Does the actual test generation have a problem?

Hartmuth


----- Original Message ----- 
From: "Hartmuth Gutsche" <hgutsche at storm.ca>
To: "Terence Parr" <parrt at cs.usfca.edu>
Cc: <antlr-interest at antlr.org>
Sent: Thursday, October 02, 2008 10:38 PM
Subject: Re: [antlr-interest] ANTLR 3.1.1 test failures


Definitely such a kind of problem. One of the cases I am looking at is the
following:

...
public void testRuleLabelOnTwoDifferentRulesAST() throws Exception {
String grammar =
"grammar T;\n"+
"options {output=AST;}\n"+
"s : x+=a x+=b {System.out.println($x);} ;" +
"a : 'a';\n"+
"b : 'b';\n"+
"WS : (' '|'\n') {skip();};\n";
...

and what I find generated for mWS() in the lexer TLexer.java is:
...
switch (alt1) {
case 1 :
// C:\\DOCUME~1\\HARTMU~1\\LOCALS~1\\Temp\\antlr-1222999104471\\T.g:5:7: ' '
{
match(' ');
}
break;
case 2 :
// C:\\DOCUME~1\\HARTMU~1\\LOCALS~1\\Temp\\antlr-1222999104471\\T.g:5:11:
'\r\n'
{
match("               <<<<<<<-------
");                       <<<<<<<-------

}
break;
...


The "broken call" to match is of course what javac complains about with all
its consequences.
Any idea how to make that "unhappen"?
I still think is has something to-do with my environment setup I just don't
know what to look for.
Which environmental settings could possibly affect the generated code in the
above way?

Hartmuth


----- Original Message ----- 
From: "Terence Parr" <parrt at cs.usfca.edu>
To: "Hartmuth Gutsche" <hgutsche at storm.ca>
Cc: <antlr-interest at antlr.org>
Sent: Thursday, October 02, 2008 2:44 PM
Subject: Re: [antlr-interest] ANTLR 3.1.1 test failures



On Oct 2, 2008, at 11:02 AM, Hartmuth Gutsche wrote:

> I am trying to run the tests under ?org.antlr.test? and get 503
> failures
> out of 1095 tests. Are they supposed to pass without failure?
>
> I see this in two different Windows environments.

Mostly likely \n and \r issue.

T



List: http://www.antlr.org/mailman/listinfo/antlr-interest
Unsubscribe:
http://www.antlr.org/mailman/options/antlr-interest/your-email-address



From antlr at mirality.co.nz  Fri Oct  3 03:02:02 2008
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Fri, 03 Oct 2008 23:02:02 +1300
Subject: [antlr-interest] Rewriting to Flat Tree Nodes for Associative
 Multiary Operators
In-Reply-To: <200810021504.05946.rschulz@sonic.net>
References: <200810021423.09602.rschulz@sonic.net>
	<1222982966.4148.45.camel@jimi.temporal-wave.com>
	<200810021501.28970.rschulz@sonic.net>
	<200810021504.05946.rschulz@sonic.net>
Message-ID: <20081003100210.974D0CE952@www.antlr.org>

At 11:04 3/10/2008, Randall R Schulz wrote:
 >op790FormulaFlat
 >    :   (op780FormulaFlat -> op780FormulaFlat)
 >    (
 >        ( Or rDisjuncts = op790FormulaFlat) + )
 >    ->  ^(Or $op790FormulaFlat $rDisjuncts+)
 >    ) ?
 >    ;

That's a completely different form from what Jim suggested (for 
starters, it uses recursion within an iterative loop, which can 
cause complications).

Try this instead:

op790FormulaFlat
   :  (a=op780FormulaFlat -> op780FormulaFlat)
      ( (Or b+=op780FormulaFlat)+ -> ^(Or $a $b+) )?
   ;


From atort at lsi.upc.edu  Fri Oct  3 04:42:03 2008
From: atort at lsi.upc.edu (Albert Tort Pugibet)
Date: Fri, 03 Oct 2008 13:42:03 +0200
Subject: [antlr-interest] Control-flow in a tree-base interpeter using ANTLR
	v3
Message-ID: <48E6050B.3060206@lsi.upc.edu>

An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20081003/0f4bded4/attachment.html 

From rschulz at sonic.net  Fri Oct  3 06:59:23 2008
From: rschulz at sonic.net (Randall R Schulz)
Date: Fri, 3 Oct 2008 06:59:23 -0700
Subject: [antlr-interest] Rewriting to Flat Tree Nodes for Associative
	Multiary Operators
In-Reply-To: <200810031002.m93A2AeP001535@h.mx.sonic.net>
References: <200810021423.09602.rschulz@sonic.net>
	<200810021504.05946.rschulz@sonic.net>
	<200810031002.m93A2AeP001535@h.mx.sonic.net>
Message-ID: <200810030659.23184.rschulz@sonic.net>

On Friday 03 October 2008 03:02, Gavin Lambert wrote:
> At 11:04 3/10/2008, Randall R Schulz wrote:
>  >op790FormulaFlat
>  >
>  >    :   (op780FormulaFlat -> op780FormulaFlat)
>  >
>  >    (
>  >        ( Or rDisjuncts = op790FormulaFlat) + )
>  >    ->  ^(Or $op790FormulaFlat $rDisjuncts+)
>  >    ) ?
>  >    ;
>
> That's a completely different form from what Jim suggested (for
> starters, it uses recursion within an iterative loop, which can
> cause complications).
>
> Try this instead:
>
> op790FormulaFlat
>
>    :  (a=op780FormulaFlat -> op780FormulaFlat)
>
>       ( (Or b+=op780FormulaFlat)+ -> ^(Or $a $b+) )?
>    ;

Beautiful.

Thanks, Gavin and Jim.

Again, I knew there had to be a simple solution, but I just wasn't 
seeing it.

I'm such a dilettante when it comes to this stuff. As I said to someone 
off-list, I never get in deeper than I need to to get the next parser 
done and then I stop learning (and start forgetting, I think).


Randall Schulz

From pcc482719 at gmail.com  Fri Oct  3 09:03:37 2008
From: pcc482719 at gmail.com (Peter C. Chapin)
Date: Fri, 03 Oct 2008 12:03:37 -0400
Subject: [antlr-interest] ANTLRworks 1.2.1?
Message-ID: <48E64259.6020405@gmail.com>

I saw in a recent message that ANTLRworks 1.2.1 was out (incorporating
ANTLR 3.1.1). However, I don't see it on the web site. Am I just missing
it or has the web site perhaps not yet been updated? In any case... what
was that download URL again? :-)

Peter


From rschulz at sonic.net  Fri Oct  3 09:08:40 2008
From: rschulz at sonic.net (Randall R Schulz)
Date: Fri, 3 Oct 2008 09:08:40 -0700
Subject: [antlr-interest] ANTLRworks 1.2.1?
In-Reply-To: <48E64259.6020405@gmail.com>
References: <48E64259.6020405@gmail.com>
Message-ID: <200810030908.40568.rschulz@sonic.net>

On Friday 03 October 2008 09:03, Peter C. Chapin wrote:
> I saw in a recent message that ANTLRworks 1.2.1 was out
> (incorporating ANTLR 3.1.1). However, I don't see it on the web site.
> Am I just missing it or has the web site perhaps not yet been
> updated? In any case... what was that download URL again? :-)
>
> Peter

The links on the main ANTLR download page have not been updated, yet.

Terence posted the link to the page with the ANTLRWorks 1.2.1 download:

    <http://www.antlr.org/works/index.html>


Randall Schulz

From pcc482719 at gmail.com  Fri Oct  3 09:30:11 2008
From: pcc482719 at gmail.com (Peter C. Chapin)
Date: Fri, 03 Oct 2008 12:30:11 -0400
Subject: [antlr-interest] ANTLRworks 1.2.1?
In-Reply-To: <200810030908.40568.rschulz@sonic.net>
References: <48E64259.6020405@gmail.com> <200810030908.40568.rschulz@sonic.net>
Message-ID: <48E64893.10405@gmail.com>

Randall R Schulz wrote:

> The links on the main ANTLR download page have not been updated, yet.
>
> Terence posted the link to the page with the ANTLRWorks 1.2.1 download:
>
>     <http://www.antlr.org/works/index.html>
>   

Great! Thanks.

Peter


From parrt at cs.usfca.edu  Fri Oct  3 10:30:46 2008
From: parrt at cs.usfca.edu (Terence Parr)
Date: Fri, 3 Oct 2008 10:30:46 -0700
Subject: [antlr-interest] ANTLRworks 1.2.1?
In-Reply-To: <200810030908.40568.rschulz@sonic.net>
References: <48E64259.6020405@gmail.com> <200810030908.40568.rschulz@sonic.net>
Message-ID: <C772DED8-A06D-4B81-A408-B68B0805D9AB@cs.usfca.edu>

ooops.
updated.
T
On Oct 3, 2008, at 9:08 AM, Randall R Schulz wrote:

> On Friday 03 October 2008 09:03, Peter C. Chapin wrote:
>> I saw in a recent message that ANTLRworks 1.2.1 was out
>> (incorporating ANTLR 3.1.1). However, I don't see it on the web site.
>> Am I just missing it or has the web site perhaps not yet been
>> updated? In any case... what was that download URL again? :-)
>>
>> Peter
>
> The links on the main ANTLR download page have not been updated, yet.
>
> Terence posted the link to the page with the ANTLRWorks 1.2.1  
> download:
>
>    <http://www.antlr.org/works/index.html>
>
>
> Randall Schulz
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>


From rschulz at sonic.net  Sat Oct  4 08:05:13 2008
From: rschulz at sonic.net (Randall R Schulz)
Date: Sat, 4 Oct 2008 08:05:13 -0700
Subject: [antlr-interest] "returns" Clause Including An Array?
Message-ID: <200810040805.13327.rschulz@sonic.net>

Hi,

I'd like to return an array from a parser rule (in a tree grammar, if it 
matters):

application
returns [ String appliedName, Term[] args ]
    :   ^(plainName argTerms?)
    {
        ...
    }
    ;


Unfortunately, the Java array declaration syntax, [], appears to be 
interfering with ANTLR's ability to parse the "returns" clause.

Is there a trick to get around this, or must I return a List and convert 
it to an array later on?


Randall Schulz

From jaluber at gmx.de  Sat Oct  4 08:42:16 2008
From: jaluber at gmx.de (Johannes Luber)
Date: Sat, 04 Oct 2008 17:42:16 +0200
Subject: [antlr-interest] "returns" Clause Including An Array?
In-Reply-To: <200810040805.13327.rschulz@sonic.net>
References: <200810040805.13327.rschulz@sonic.net>
Message-ID: <48E78ED8.1080105@gmx.de>

Randall R Schulz schrieb:
> Hi,
> 
> I'd like to return an array from a parser rule (in a tree grammar, if it 
> matters):
> 
> application
> returns [ String appliedName, Term[] args ]
>     :   ^(plainName argTerms?)
>     {
>         ...
>     }
>     ;
> 
> 
> Unfortunately, the Java array declaration syntax, [], appears to be 
> interfering with ANTLR's ability to parse the "returns" clause.
> 
> Is there a trick to get around this, or must I return a List and convert 
> it to an array later on?

I think, that you must use "\[\]" or "\]" instead. Not sure which method
is the correct one.

Johannes
> 
> 
> Randall Schulz
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
> 


From cyrilg31 at free.fr  Sun Oct  5 02:22:08 2008
From: cyrilg31 at free.fr (cyrilg31 at free.fr)
Date: Sun, 05 Oct 2008 11:22:08 +0200
Subject: [antlr-interest] MismatchedTokenException in sample grammar
Message-ID: <1223198528.48e88740afeaa@imp.free.fr>


Hello,

I would like to recover information in String separated by tags like /WR, /BR
...

here is my grammar:
grammar example;

SLASH : '/';

CHAR : ('a'..'z'|'A'..'Z'|'.'|'-');

SEPARATOR_WR : SLASH 'WR';
SEPARATOR_BR : SLASH 'BR';
SEPARATOR_YH : SLASH 'YH';

abvalue: (CHAR | SLASH)*;
brvalue: (CHAR | SLASH)*;
yhvalue: (CHAR | SLASH)*;

message  :    SEPARATOR_WR abvalue SEPARATOR_BR  brvalue SEPARATOR_YH  yhvalue;

When I try with this message: /WRblabla/BRRFT/PNmj/YHkijg , no problem, it is
working fine.

When I try with this message: /WRblabla/BRRFT/WNmj/YHkijg , I have a " problem
matching token at 1:18 MismatchedTokenException(78!=82)" and I don't recover all
the information

When I try with this message: /WRblabla/BRRFT/WRmj/YHkijg , I have a "No Viable
Alt Exception".

It seems to be a problem of lexer and not parser, but I don't know how to
correct this.

Could you help me please, indicates me what it is wrong, or where to find
information. I read a lots of message in this forum and the "Definitive ANTLR
Reference" from Terence Parr but I didn't find information to solve my problem.

 Thank you very much

Cyril

From antlr at mirality.co.nz  Sun Oct  5 03:09:47 2008
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Sun, 05 Oct 2008 23:09:47 +1300
Subject: [antlr-interest] MismatchedTokenException in sample grammar
In-Reply-To: <1223198528.48e88740afeaa@imp.free.fr>
References: <1223198528.48e88740afeaa@imp.free.fr>
Message-ID: <20081005100957.02E2D11ED7B@www.antlr.org>

At 22:22 5/10/2008, cyrilg31 at free.fr wrote:
 >SLASH : '/';
 >
 >CHAR : ('a'..'z'|'A'..'Z'|'.'|'-');
 >
 >SEPARATOR_WR : SLASH 'WR';
 >SEPARATOR_BR : SLASH 'BR';
 >SEPARATOR_YH : SLASH 'YH';
[...]
 >When I try with this message: /WRblabla/BRRFT/WNmj/YHkijg , I 
have
 >a " problem matching token at 1:18 
MismatchedTokenException(78!=82)"
 >and I don't recover all the information

The problem is the way that ambiguous tokens like these are 
resolved.  Given the rules defined above, ANTLR sees a leading '/' 
and says "ok, if the next character is a W then it's a 
SEPARATOR_WR, if it's a B then it's a SEPARATOR_BR, if it's a Y 
then it's a SEPARATOR_YH, if it's anything else then it's just a 
SLASH".  It's not until it gets "inside" the SEPARATOR_WR rule 
that it looks at the character following that, discovers that it's 
not an R, and throws an error.

(Essentially, ANTLR always statically chooses the least amount of 
lookahead it can get away with to disambiguate between each 
possible single token; it doesn't consider sequences of tokens or 
possible mismatches "later on" within the token.)

You can resolve this sort of problem by merging the rules together 
and using predicates to force ANTLR to look ahead further (and it 
also helps to extract common prefixes):

fragment SEPARATOR_WR: 'WR';
fragment SEPARATOR_BR: 'BR';
fragment SEPARATOR_YH: 'YH';

SLASH
   : '/'
     ( (SEPARATOR_WR) => SEPARATOR_WR { $type = SEPARATOR_WR; }
     | (SEPARATOR_BR) => SEPARATOR_BR { $type = SEPARATOR_BR; }
     | (SEPARATOR_YH) => SEPARATOR_YH { $type = SEPARATOR_YH; }
     )?
   ;


From rschulz at sonic.net  Sun Oct  5 11:39:41 2008
From: rschulz at sonic.net (Randall R Schulz)
Date: Sun, 5 Oct 2008 11:39:41 -0700
Subject: [antlr-interest] Position of Action Blocks in Combination with
	Rewrites
Message-ID: <200810051139.41738.rschulz@sonic.net>

Hi,

I just discovered that in parser rules with both a rewrite clause _and_
an action block, the action block must _precede_ the rewrite clause or
the generated Java code is malformed and will not compile.


This is OK:

setOption
    :   Set LParen plainName RParen Period
    {
        if ($plainName.text.equals(cPrologStyleVariables)) {
            fPrologStyleVariablesSpecified = true;
            fPrologStyleVariables = true;
        }
    }
    ->  ^(Set plainName)
    ;


But this is not:

setOption
    :   Set LParen plainName RParen Period
    ->  ^(Set plainName)
    {
        if ($plainName.text.equals(cPrologStyleVariables)) {
            fPrologStyleVariablesSpecified = true;
            fPrologStyleVariables = true;
        }
    }
    ;

The generated Java code for this is:

-==--==--==--==--==--==--==--==--==--==--==--==--==--==--==--==--==--==-
            // 810:2: -> ^( Set plainName )
            {
                // P9.g:810:5: ^( Set plainName )
                {
                CommonTree root_1 = (CommonTree)adaptor.nil();
                root_1 = (CommonTree)adaptor.becomeRoot(stream_Set.nextNode(), root_1);

                adaptor.addChild(root_1, stream_plainName.nextTree());

                adaptor.addChild(root_0, root_1);
                }
                adaptor.addChild(root_0,
                        if ((plainName153!=null?input.toString(plainName153.start,plainName153.stop):null).equals(cPrologStyleVariables)) {
                            fPrologStyleVariablesSpecified = true;
                            fPrologStyleVariables = true;
                        }
                    );

            }
-==--==--==--==--==--==--==--==--==--==--==--==--==--==--==--==--==--==-

To which javac reacts thusly:

    [javac] Compiling 3 source files to /dar/tau/obj
    [javac] /dar/tau/src/tau/p9/P9Parser.java:5355: illegal start of expression
    [javac]                         if ((plainName153!=null?input.toString(plainName153.start,plainName153.stop):null).equals(cPrologStyleVariables)) {
    [javac]                         ^
    [javac] /dar/tau/src/tau/p9/P9Parser.java:5355: ';' expected
    [javac]                         if ((plainName153!=null?input.toString(plainName153.start,plainName153.stop):null).equals(cPrologStyleVariables)) {
    [javac]                           ^
    [javac] /dar/tau/src/tau/p9/P9Parser.java:5355: ';' expected
    [javac]                         if ((plainName153!=null?input.toString(plainName153.start,plainName153.stop):null).equals(cPrologStyleVariables)) {
    [javac]                                                                                                                                         ^
    [javac] /dar/tau/src/tau/p9/P9Parser.java:5359: illegal start of expression
    [javac]                     );
    [javac]                     ^
    [javac] 4 errors


I don't know if this is a bug or not, but I thought I'd report it.

I'm running ANTLR 3.1.1 with Sun JDK 1.6.0_10 rc2-b32 on x86 Linux.


Randall Schulz

From antlr at mirality.co.nz  Sun Oct  5 12:34:11 2008
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Mon, 06 Oct 2008 08:34:11 +1300
Subject: [antlr-interest] Position of Action Blocks in Combination with
 Rewrites
In-Reply-To: <200810051139.41738.rschulz@sonic.net>
References: <200810051139.41738.rschulz@sonic.net>
Message-ID: <20081005193416.14DCB11ED5F@www.antlr.org>

At 07:39 6/10/2008, Randall R Schulz wrote:
 >I just discovered that in parser rules with both a rewrite 
clause
 >_and_ an action block, the action block must _precede_ the 
rewrite
 >clause or the generated Java code is malformed and will not 
compile.
[...]
 >I don't know if this is a bug or not, but I thought I'd report 
it.

I don't believe it is a bug.  Code blocks within a rewrite clause 
are assumed to be an expression to be inserted into the rewrite 
tree, IIRC.

(I keep forgetting about that, though.)


From o.b.fischer at gmx.de  Sun Oct  5 06:16:13 2008
From: o.b.fischer at gmx.de (Oliver B. Fischer)
Date: Sun, 05 Oct 2008 15:16:13 +0200
Subject: [antlr-interest] Semantic predicates during AST construction
Message-ID: <48E8BE1D.9090101@gmx.de>

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Dear all,

I found an old post to this list, suggesting to support semantic
predicates during AST construction:
http://www.antlr.org/pipermail/antlr-interest/2005-January/011050.html
(See: > 4.)  Alternatives and construction predicates:  ^{ {<test>}? A |
B })

Has this features been implemented? This is exactly what I need now... ;-)


Bye

Oliver

- --
Oliver B. Fischer, Sch?nhauser Allee 64, 10437 Berlin
Tel. +49 30 44793251, Mobil: +49 178 7903538
Mail: o.b.fischer at gmx.de Blog: http://www.sw-blog.net
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.8 (MingW32)
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org

iEYEARECAAYFAkjovKcACgkQbyc4N0PdoAza2ACgp9hGnv7InQ4rSc76mTZrqr0U
+sAAoKDx27Zgd8SAACarZAAM9B3E2yPF
=qGYa
-----END PGP SIGNATURE-----


From mark at helmstetter.com  Sun Oct  5 14:18:00 2008
From: mark at helmstetter.com (Mark Helmstetter)
Date: Sun, 5 Oct 2008 17:18:00 -0400 (EDT)
Subject: [antlr-interest] Fixed minor 3.1 compatibility issue with v2 v3
	converter
Message-ID: <1084.192.168.2.1.1223241480.squirrel@helmstetter.gotdns.com>

I downloaded the v2 v3 migration tool from:
http://www.antlr.org/download/v2v3-0.2.tar.gz

And when running it using the antlr-3.1.1 jar I was getting the following
exception:

C:\tools\antlr-2.7.7\v2v3migration>java -cp
.;C:\tools\antlr-3.1.1\lib\antlr-3.1.1.jar v3me XQuery_0
_9.g
Exception in thread "main" java.lang.NoSuchFieldError: channel
        at ANTLRLexer.mML_COMMENT(ANTLRLexer.java:626)
        at ANTLRLexer.mTokens(ANTLRLexer.java:2920)
        at org.antlr.runtime.Lexer.nextToken(Lexer.java:84)
        at
org.antlr.runtime.CommonTokenStream.fillBuffer(CommonTokenStream.java:95)
        at
org.antlr.runtime.CommonTokenStream.LT(CommonTokenStream.java:238)
at
org.antlr.runtime.CommonTokenStream.LA(CommonTokenStream.java:300)
at ANTLRParser.antlrGrammar(ANTLRParser.java:124)
        at v3me.main(v3me.java:25)


After digging a little, it looks like this is caused by some minor changes
between 3.0 and 3.1.

I was able to fix the issue by:
1. Change "token=" with "$token=" in v2v3migration/ANTLR.g (lines 456 and
574)
2. Run antlr on ANTLR.g (java -cp antlr-3.1.1.jar org.antlr.Tool ANTLR.g)
3. Recompile v2v3migration sources


Just thought I'd share in case someone else encounters the same issue.

--Mark






From jimi at temporal-wave.com  Sun Oct  5 16:25:25 2008
From: jimi at temporal-wave.com (Jim Idle)
Date: Sun, 05 Oct 2008 16:25:25 -0700
Subject: [antlr-interest] Semantic predicates during AST construction
In-Reply-To: <48E8BE1D.9090101@gmx.de>
References: <48E8BE1D.9090101@gmx.de>
Message-ID: <1223249125.4407.3.camel@jimi.temporal-wave.com>

On Sun, 2008-10-05 at 15:16 +0200, Oliver B. Fischer wrote:

> -----BEGIN PGP SIGNED MESSAGE-----
> Hash: SHA1
> 
> Dear all,
> 
> I found an old post to this list, suggesting to support semantic
> predicates during AST construction:
> http://www.antlr.org/pipermail/antlr-interest/2005-January/011050.html
> (See: > 4.)  Alternatives and construction predicates:  ^{ {<test>}? A |
> B })
> 
> Has this features been implemented? This is exactly what I need now... ;-)



It isn't clear what you are asking for - that post is from 2005.

Do you mean you want to know how to use semantic predicates, or that you
want to know how to conditionally create one type of tree over another:

{ predicate1 }? -> ^(THIS)
{ predicate2 }? -> ^(OR THAT)
-> ELSE


Jim

> 
> 
> Bye
> 
> Oliver
> 
> - --
> Oliver B. Fischer, Sch?nhauser Allee 64, 10437 Berlin
> Tel. +49 30 44793251, Mobil: +49 178 7903538
> Mail: o.b.fischer at gmx.de Blog: http://www.sw-blog.net
> -----BEGIN PGP SIGNATURE-----
> Version: GnuPG v1.4.8 (MingW32)
> Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org
> 
> iEYEARECAAYFAkjovKcACgkQbyc4N0PdoAza2ACgp9hGnv7InQ4rSc76mTZrqr0U
> +sAAoKDx27Zgd8SAACarZAAM9B3E2yPF
> =qGYa
> -----END PGP SIGNATURE-----
> 
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
> 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20081005/7718d668/attachment.html 

From o.b.fischer at gmx.de  Mon Oct  6 00:30:29 2008
From: o.b.fischer at gmx.de (Oliver B. Fischer)
Date: Mon, 06 Oct 2008 09:30:29 +0200
Subject: [antlr-interest] Semantic predicates during AST construction
In-Reply-To: <1223249125.4407.3.camel@jimi.temporal-wave.com>
References: <48E8BE1D.9090101@gmx.de>
	<1223249125.4407.3.camel@jimi.temporal-wave.com>
Message-ID: <48E9BE95.9080203@gmx.de>

Jim Idle schrieb:
>> It isn't clear what you are asking for - that post is from 2005.
> 
>> Do you mean you want to know how to use semantic predicates, or that you
>> want to know how to conditionally create one type of tree over another:
> 
>> { predicate1 }? -> ^(THIS)
>> { predicate2 }? -> ^(OR THAT)
>> -> ELSE
> 

I know this syntax and I am using it already. But now I would like to
know if it is possible to use semantic predicates to control the
construction of specific parts of the tree?

I would like to express things like:

-> ^(ROOT A ({condition}? B | C)

Evaluates condition to true, I would like to get ^(ROOT A B). Otherwise
the result should be ^(ROOT A C).

Bye

Oliver

-- 
Oliver B. Fischer, Sch?nhauser Allee 64, 10437 Berlin
Tel. +49 30 44793251, Mobil: +49 178 7903538
Mail: o.b.fischer at gmx.de Blog: http://www.sw-blog.net

From tvial at octo.com  Mon Oct  6 01:39:45 2008
From: tvial at octo.com (Thomas Vial)
Date: Mon, 6 Oct 2008 10:39:45 +0200
Subject: [antlr-interest] Update of maven3-antlr-plugin
Message-ID: <475086500810060139k3d51e366vc9d6f84a3a77b731@mail.gmail.com>

Hi,


Is anybody working on antlr3-maven-plugin to re-release it with ANTLR 3.1
support? A patch was posted on Codehaus's JIRA (
http://jira.codehaus.org/browse/MANTLRTHREE-10) but it does not add support
for gUnit (which is now distributed with ANTLR). If no one is working on
these 2 important (for me) updates I'd be happy to contribute; let me know!

NB: as a prerequesite, a request was made to have ANTLR 3.1 available in
Maven's central repo.


Thanks,

Thomas
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20081006/4da67513/attachment.html 

From antlr at mirality.co.nz  Mon Oct  6 03:15:20 2008
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Mon, 06 Oct 2008 23:15:20 +1300
Subject: [antlr-interest] Semantic predicates during AST  construction
In-Reply-To: <48E9BE95.9080203@gmx.de>
References: <48E8BE1D.9090101@gmx.de>
	<1223249125.4407.3.camel@jimi.temporal-wave.com>
	<48E9BE95.9080203@gmx.de>
Message-ID: <20081006101532.9615F11EDDD@www.antlr.org>

At 20:30 6/10/2008, Oliver B. Fischer wrote:
 >I would like to express things like:
 >
 >-> ^(ROOT A ({condition}? B | C)
 >
 >Evaluates condition to true, I would like to get ^(ROOT A B).
 >Otherwise the result should be ^(ROOT A C).

If B and C are tokens that exist on the matching side (left of the 
arrow) then I think you can do this (haven't tried it, though, so 
I could be wrong):

A b=B c=C -> ^(ROOT A { (condition) ? $b : $c })

It's probably possible to do this sort of thing with imaginary 
tokens as well, although I'm not sure exactly what the syntax 
would be.


From arik_tg at yahoo.com  Mon Oct  6 05:53:59 2008
From: arik_tg at yahoo.com (Arik Ter-Galstyan)
Date: Mon, 6 Oct 2008 05:53:59 -0700 (PDT)
Subject: [antlr-interest] Problem building AST.
Message-ID: <557972.9448.qm@web33102.mail.mud.yahoo.com>


Recently downloaded the Verilog grammar file from ANTLR website, generated the corresponding lexer and parser files and compiled them successfully with VS2008. Even wrote a small driver for the generated lexer and parser and successfully parsed a couple of verilog files. When setting the BuilsAST=1 in the options section, the generated lexer and parser files compile successfully however this time the same driver fails to parse the verilog files. It just crashes and brings the standard Microsoft error window to send an error report. Please note that in both cases it has been used the same driver. Besides, I have tried it with ANTLR 2.7.5, 2.7.6 and 2.7.7. Result is the same in all cases. Please share any ideas what I did wrong.

Below is given the driver code:

#include "stdafx.h"

#include "iostream"
#include "fstream"
#include "VerilogLexer.hpp"
#include "VerilogParser.hpp"

using namespace std;
using namespace antlr;


void parseFile(istream& s) {
	
	try {
	       // Create scanner that reads from input stream passed to us.
		VerilogLexer lexer(s);						

		// Create parser that reads from scanner.
		VerilogParser parser(lexer);

		// start parsing at the source_text rule.
		parser.source_text();				
	}
	catch (exception& e) {
		cerr << "parser exception: " << e.what() << endl;
	}
}

int _tmain(int argc, _TCHAR* argv[])
{
try {
		if (argc > 1 ) {
			
			cerr << "Parsing..." << endl;
			for(int i=1; i< argc;i++) {
				ifstream file(argv[i]);
				parseFile(file);
			}
		}
		else
			cerr << "Usage: VerilogParser <file names>" << endl;
	}
	catch(exception& e) {
		cerr << "exception: " << e.what() << endl;
	}

	return 0;
}


Thanks
Arik


      

From rschulz at sonic.net  Mon Oct  6 07:00:40 2008
From: rschulz at sonic.net (Randall R Schulz)
Date: Mon, 6 Oct 2008 07:00:40 -0700
Subject: [antlr-interest] Good "dot" Invocation Options for Visualizing ASTs?
Message-ID: <200810060700.40876.rschulz@sonic.net>

Hi,

Has anybody come up with good recipes for using the GraphViz 
package's "dot" command for rendering the graphs of ASTs produced by 
ANTLR 3 (.1.1)? If so, could you share? Or point me to resources that 
would be me a head start on coming up with good incantations of the dot 
command?

Thanks.


Randall Schulz

From janvanmansum at gmail.com  Mon Oct  6 08:02:52 2008
From: janvanmansum at gmail.com (Jan van Mansum)
Date: Mon, 6 Oct 2008 17:02:52 +0200
Subject: [antlr-interest] Adding one newline changes tokens recognized
Message-ID: <ddda310e0810060802u78e1247bg3322cfaf61b651e2@mail.gmail.com>

Hello group,

I have the following grammar:

--- TestComment.g ---
grammar TestComment;

input
    :    (statement ';')*
    ;

statement
    :    ANNOTATION
    ;

ANNOTATION
       :       '--!' .*  '\n'
       ;

COMMENT
    :       '--' .* '\r'? '\n' {$channel = HIDDEN;}
       ;

WS    :    (' '|'\n'|'\r'|'\t')+ {$channel = HIDDEN;}
    ;
---

And the following input (without the double quotes):

"--!myAnnotation
;"

This doesn't work. "--!myAnnotation" is considered an ordinary comment by
Antlr and hidden. I don't understand why, as I thought that antlr should
match the tokens in order, and so find that ANNOTATION matches the input.

If I add one more newline to the file that does happen.

Can anyone explain to me why that is? I am puzzled.

I am using antlr 3.0.1 by the way.

Thanks for any help,

best regards,

-- 
Jan van Mansum
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20081006/66565ec4/attachment.html 

From jimi at temporal-wave.com  Mon Oct  6 08:36:46 2008
From: jimi at temporal-wave.com (Jim Idle)
Date: Mon, 06 Oct 2008 08:36:46 -0700
Subject: [antlr-interest] Good "dot" Invocation Options for
	Visualizing	ASTs?
In-Reply-To: <200810060700.40876.rschulz@sonic.net>
References: <200810060700.40876.rschulz@sonic.net>
Message-ID: <1223307406.4089.11.camel@jimi.temporal-wave.com>

On Mon, 2008-10-06 at 07:00 -0700, Randall R Schulz wrote:

> Hi,
> 
> Has anybody come up with good recipes for using the GraphViz 
> package's "dot" command for rendering the graphs of ASTs produced by 
> ANTLR 3 (.1.1)? If so, could you share? Or point me to resources that 
> would be me a head start on coming up with good incantations of the dot 
> command?
> 


it is built in to the Java and C runtimes. For Java:


  public static StringTemplate _treeST =
                new StringTemplate(
			"digraph {\n" +
			"  ordering=out;\n" +
			"  ranksep=.4;\n" +
            "  bgcolor=\"lightgrey\";" +
			"  node [shape=box, fixedsize=false, fontsize=12, fontname=\"Helvetica-bold\", fontcolor=\"blue\"\n" +
			"        width=.25, height=.25, color=\"black\", fillcolor=\"white\", style=\"filled, solid, bold\"];\n" +
			"  edge [arrowsize=.5, color=\"black\", style=\"bold\"]\n" +
			"  $nodes$\n" +
			"  $edges$\n" +
			"}\n");


    public static StringTemplate _edgeST =
		new StringTemplate("$parent$ -> $child$ // \"$parentText$\" -> \"$childText$\"\n");

...

                    // Use the ANLTR built in dot generator
                    //
                    DOTTreeGenerator gen = new DOTTreeGenerator();
                    
                    // Which we can cause to generate the DOT specification
                    // with the input file name suffixed with .dot. You can then use
                    // the graphviz tools or zgrviewer (Java) to view the grahpical
                    // version of the dot file.
                    //
                    source = source.substring(0, source.length()-3);
                    String outputName = source + "dot";
                    
                    System.out.println("    Producing AST dot (graphviz) file");
                    
                    // It produces a jguru string template.
                    //
                    StringTemplate st = gen.toDOT(t, new CommonTreeAdaptor(), _treeST, _edgeST);

                    // Create the output file and write the dot spec to it
                    //
                    FileWriter outputStream = new FileWriter(outputName);
                    outputStream.write(st.toString());
                    outputStream.close();

                    // Invoke dot to generate a .png file
                    //
                    System.out.println("    Producing png graphic for tree");
                    pStart = System.currentTimeMillis();
                    Process proc = Runtime.getRuntime().exec("dot -Tpng -o" + source + "png " + outputName);
                    proc.waitFor();
                    stop = System.currentTimeMillis();
                    System.out.println("      PNG graphic produced in " + (stop - pStart) + "ms.");



> Thanks.
> 
> 
> Randall Schulz
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
> 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20081006/59c68c43/attachment.html 

From rschulz at sonic.net  Mon Oct  6 08:46:53 2008
From: rschulz at sonic.net (Randall R Schulz)
Date: Mon, 6 Oct 2008 08:46:53 -0700
Subject: [antlr-interest] Good "dot" Invocation Options for Visualizing
	ASTs?
In-Reply-To: <1223307406.4089.11.camel@jimi.temporal-wave.com>
References: <200810060700.40876.rschulz@sonic.net>
	<1223307406.4089.11.camel@jimi.temporal-wave.com>
Message-ID: <200810060846.53821.rschulz@sonic.net>

On Monday 06 October 2008 08:36, you wrote:
> On Mon, 2008-10-06 at 07:00 -0700, Randall R Schulz wrote:
> > Hi,
> >
> > Has anybody come up with good recipes for using the GraphViz
> > package's "dot" command for rendering the graphs of ASTs produced
> > by ANTLR 3 (.1.1)? If so, could you share? Or point me to resources
> > that would be me a head start on coming up with good incantations
> > of the dot command?
>
> it is built in to the Java and C runtimes. For Java:
>
>   public static StringTemplate _treeST =
>                 new StringTemplate(
> 			"digraph {\n" +
> 			"  ordering=out;\n" +
> 			"  ranksep=.4;\n" +
>             "  bgcolor=\"lightgrey\";" +
> 			"  node [shape=box, fixedsize=false, fontsize=12,
> fontname=\"Helvetica-bold\", fontcolor=\"blue\"\n" + "       
> width=.25, height=.25, color=\"black\", fillcolor=\"white\",
> style=\"filled, solid, bold\"];\n" + "  edge [arrowsize=.5,
> color=\"black\", style=\"bold\"]\n" + "  $nodes$\n" +
> 			"  $edges$\n" +
> 			"}\n");

A few things:

1) I don't get good results from the defaults.
2) Those are not the options I see when using DOTTreeGenerator in 3.1.1.

This is what I see at the top of all the DOT files written by the 
aforementioned class:

  ordering=out;
  ranksep=.4;
  node [shape=plaintext, fixedsize=true, fontsize=11,
        fontname="Courier", width=.25, height=.25];
  edge [arrowsize=.5]


Actually, I'd prefer if all that were omitted, leaving only the graph 
structure itself, and that the rendering options were left to the "dot" 
invocation. I have a cover script for invoking DOT that supplies 
defaults that I've concocted (they're not great, but they're much 
better than those shown above) plus it makes it easy (well, slightly 
easier than the "dot" CLI itself) to selectively modify those defaults.


> ...


Randall Schulz

From rschulz at sonic.net  Mon Oct  6 08:50:35 2008
From: rschulz at sonic.net (Randall R Schulz)
Date: Mon, 6 Oct 2008 08:50:35 -0700
Subject: [antlr-interest] Good "dot" Invocation Options for Visualizing
	ASTs?
In-Reply-To: <200810060700.40876.rschulz@sonic.net>
References: <200810060700.40876.rschulz@sonic.net>
Message-ID: <200810060850.35415.rschulz@sonic.net>

On Monday 06 October 2008 07:00, Randall R Schulz wrote:
> Hi,
>
> Has anybody come up with good recipes for using the GraphViz
> package's "dot" command for rendering the graphs of ASTs produced by
> ANTLR 3 (.1.1)?


Actually, what I'd really like is to recreate the layouts that 
ANTLRWorks produces, but I haven't hit on the "dot" invocation that 
does that, if in fact it's possible.


Randall Schulz

From jimi at temporal-wave.com  Mon Oct  6 08:54:02 2008
From: jimi at temporal-wave.com (Jim Idle)
Date: Mon, 06 Oct 2008 08:54:02 -0700
Subject: [antlr-interest] Good "dot" Invocation Options for
	Visualizing	ASTs?
In-Reply-To: <200810060846.53821.rschulz@sonic.net>
References: <200810060700.40876.rschulz@sonic.net>
	<1223307406.4089.11.camel@jimi.temporal-wave.com>
	<200810060846.53821.rschulz@sonic.net>
Message-ID: <1223308442.4089.22.camel@jimi.temporal-wave.com>

On Mon, 2008-10-06 at 08:46 -0700, Randall R Schulz wrote:

> On Monday 06 October 2008 08:36, you wrote:
> > On Mon, 2008-10-06 at 07:00 -0700, Randall R Schulz wrote:
> > > Hi,
> > >
> > > Has anybody come up with good recipes for using the GraphViz
> > > package's "dot" command for rendering the graphs of ASTs produced
> > > by ANTLR 3 (.1.1)? If so, could you share? Or point me to resources
> > > that would be me a head start on coming up with good incantations
> > > of the dot command?
> >
> > it is built in to the Java and C runtimes. For Java:
> >
> >   public static StringTemplate _treeST =
> >                 new StringTemplate(
> > 			"digraph {\n" +
> > 			"  ordering=out;\n" +
> > 			"  ranksep=.4;\n" +
> >             "  bgcolor=\"lightgrey\";" +
> > 			"  node [shape=box, fixedsize=false, fontsize=12,
> > fontname=\"Helvetica-bold\", fontcolor=\"blue\"\n" + "       
> > width=.25, height=.25, color=\"black\", fillcolor=\"white\",
> > style=\"filled, solid, bold\"];\n" + "  edge [arrowsize=.5,
> > color=\"black\", style=\"bold\"]\n" + "  $nodes$\n" +
> > 			"  $edges$\n" +
> > 			"}\n");
> 
> A few things:
> 
> 1) I don't get good results from the defaults.


These are not the defaults, they are the settings I use for this:

http://www.temporal-wave.com/comp/twcsc.php


> 2) Those are not the options I see when using DOTTreeGenerator in 3.1.1.


These are overrides, that you pass in here:

  StringTemplate st = gen.toDOT(t, new CommonTreeAdaptor(), _treeST,
_edgeST);




> Actually, I'd prefer if all that were omitted, leaving only the graph 
> structure itself,


So, pass in a string template that doesn't have those things in it and
just has "digraph {\n\n" + $edges + "\n{");


>  and that the rendering options were left to the "dot" 
> invocation. I have a cover script for invoking DOT that supplies 
> defaults that I've concocted (they're not great, but they're much 
> better than those shown above) 


Well, if they are not great, why not use the ones I just gave you, which
are pretty good? The code I sent is the entire invocation and a decent
template.

Jim

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20081006/dd4a9359/attachment.html 

From jimi at temporal-wave.com  Mon Oct  6 08:56:16 2008
From: jimi at temporal-wave.com (Jim Idle)
Date: Mon, 06 Oct 2008 08:56:16 -0700
Subject: [antlr-interest] Good "dot" Invocation Options for
	Visualizing	ASTs?
In-Reply-To: <200810060850.35415.rschulz@sonic.net>
References: <200810060700.40876.rschulz@sonic.net>
	<200810060850.35415.rschulz@sonic.net>
Message-ID: <1223308576.4089.26.camel@jimi.temporal-wave.com>

On Mon, 2008-10-06 at 08:50 -0700, Randall R Schulz wrote:

> On Monday 06 October 2008 07:00, Randall R Schulz wrote:
> > Hi,
> >
> > Has anybody come up with good recipes for using the GraphViz
> > package's "dot" command for rendering the graphs of ASTs produced by
> > ANTLR 3 (.1.1)?
> 
> 
> Actually, what I'd really like is to recreate the layouts that 
> ANTLRWorks produces, but I haven't hit on the "dot" invocation that 
> does that, if in fact it's possible.


It doesn't use dot, check the source code and steal it? In general
Jean's code displays tress in an easier to read way, but there is more
work. Maybe he would be willing to expose and interface, if you ask
nicely.

Jim
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20081006/5e296330/attachment.html 

From rschulz at sonic.net  Mon Oct  6 09:00:14 2008
From: rschulz at sonic.net (Randall R Schulz)
Date: Mon, 6 Oct 2008 09:00:14 -0700
Subject: [antlr-interest] Good "dot" Invocation Options for Visualizing
	ASTs?
In-Reply-To: <1223308576.4089.26.camel@jimi.temporal-wave.com>
References: <200810060700.40876.rschulz@sonic.net>
	<200810060850.35415.rschulz@sonic.net>
	<1223308576.4089.26.camel@jimi.temporal-wave.com>
Message-ID: <200810060900.14309.rschulz@sonic.net>

On Monday 06 October 2008 08:56, Jim Idle wrote:
> On Mon, 2008-10-06 at 08:50 -0700, Randall R Schulz wrote:
> > On Monday 06 October 2008 07:00, Randall R Schulz wrote:
> > > Hi,
> > >
> > > Has anybody come up with good recipes for using the GraphViz
> > > package's "dot" command for rendering the graphs of ASTs produced
> > > by ANTLR 3 (.1.1)?
> >
> > Actually, what I'd really like is to recreate the layouts that
> > ANTLRWorks produces, but I haven't hit on the "dot" invocation that
> > does that, if in fact it's possible.
>
> It doesn't use dot,

I know that.


> check the source code and steal it? In general 
> Jean's code displays tress in an easier to read way, but there is
> more work. Maybe he would be willing to expose and interface, if you
> ask nicely.

This is not important important enough for me to go to that trouble. If 
I can't make dot do it, it's just not going to happen.


> Jim


Randall Schulz

From rschulz at sonic.net  Mon Oct  6 09:05:53 2008
From: rschulz at sonic.net (Randall R Schulz)
Date: Mon, 6 Oct 2008 09:05:53 -0700
Subject: [antlr-interest] Good "dot" Invocation Options for Visualizing
	ASTs?
In-Reply-To: <1223308442.4089.22.camel@jimi.temporal-wave.com>
References: <200810060700.40876.rschulz@sonic.net>
	<200810060846.53821.rschulz@sonic.net>
	<1223308442.4089.22.camel@jimi.temporal-wave.com>
Message-ID: <200810060905.53668.rschulz@sonic.net>

On Monday 06 October 2008 08:54, Jim Idle wrote:
> ...
>
> These are not the defaults, they are the settings I use for this:
>
> http://www.temporal-wave.com/comp/twcsc.php

I doesn't seem to work if I just press the "Parse to AST" button with 
the existing C# code. No AST graph is ever drawn.


> > 2) Those are not the options I see when using DOTTreeGenerator in
> > 3.1.1.
>
> These are overrides, that you pass in here:
>
>   StringTemplate st = gen.toDOT(t, new CommonTreeAdaptor(), _treeST,
> _edgeST);
>
> > ...
>
> So, pass in a string template that doesn't have those things in it
> and just has "digraph {\n\n" + $edges + "\n{");

That's good to know.


> > ...
>
> Well, if they are not great, why not use the ones I just gave you,
> which are pretty good? The code I sent is the entire invocation and a
> decent template.

Thanks. I'll give those a try.


> Jim


Randall Schulz

From weberjn at gmail.com  Mon Oct  6 11:53:01 2008
From: weberjn at gmail.com (Juergen Weber)
Date: Mon, 6 Oct 2008 20:53:01 +0200
Subject: [antlr-interest] antlr-interest via nabble
Message-ID: <1964cfb60810061153m6fcec512y7e4c3df0923e892e@mail.gmail.com>

Any chance to access antlr-interest via nabble?

See, how Geronimo does it:
http://geronimo.apache.org/discussion-forums.html

Thanks,
Juergen

From weberjn at gmail.com  Mon Oct  6 11:54:11 2008
From: weberjn at gmail.com (Juergen Weber)
Date: Mon, 6 Oct 2008 20:54:11 +0200
Subject: [antlr-interest] getTemplate() has to be cast
Message-ID: <1964cfb60810061154md933170ibf852363b39eca03@mail.gmail.com>

There seems to be a little error in theThe Definitive ANTLR Reference
p. 205: r.getTemplate() has to be cast to StringTemplate.
The error is in the downloadable code, too.

Thanks,
Juergen

From parrt at cs.usfca.edu  Mon Oct  6 12:30:24 2008
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon, 6 Oct 2008 12:30:24 -0700
Subject: [antlr-interest] getTemplate() has to be cast
In-Reply-To: <1964cfb60810061154md933170ibf852363b39eca03@mail.gmail.com>
References: <1964cfb60810061154md933170ibf852363b39eca03@mail.gmail.com>
Message-ID: <1E5FE5AF-F443-4AA0-916D-8E92439769CC@cs.usfca.edu>

that changed in a new version of ST. sorry
T
On Oct 6, 2008, at 11:54 AM, Juergen Weber wrote:

> There seems to be a little error in theThe Definitive ANTLR Reference
> p. 205: r.getTemplate() has to be cast to StringTemplate.
> The error is in the downloadable code, too.
>
> Thanks,
> Juergen
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>


From aaron at sqlpower.ca  Mon Oct  6 12:30:31 2008
From: aaron at sqlpower.ca (Aaron Niedbala)
Date: Mon, 6 Oct 2008 15:30:31 -0400
Subject: [antlr-interest] Reusing the text editor in ANTLRworks
Message-ID: <db69f5a60810061230xe0f55d7ha3fe63eefdcb0aa@mail.gmail.com>

Hello,

I'm working on a syntax highlighting SQL editor component, building my SQL
grammar using ANTLRworks. While I was working, I realized how solid and
full-featured the grammar editor is in ANTLRworks.

Now I'm trying to reuse that component as my SQL editor component.

Is there any precedent for this? Can anyone comment on whether or not it's a
good idea to try, and if it is a good idea, any suggestions on which parts
of ANTLRworks to keep with it and which ones to trim away would be really
helpful to me.

Thanks.

Aaron
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20081006/41852c54/attachment.html 

From parrt at cs.usfca.edu  Mon Oct  6 12:36:46 2008
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon, 6 Oct 2008 12:36:46 -0700
Subject: [antlr-interest] Reusing the text editor in ANTLRworks
In-Reply-To: <db69f5a60810061230xe0f55d7ha3fe63eefdcb0aa@mail.gmail.com>
References: <db69f5a60810061230xe0f55d7ha3fe63eefdcb0aa@mail.gmail.com>
Message-ID: <AB75F0CB-1F33-4618-8C7E-CE4576B6AE47@cs.usfca.edu>

Hi, AW is indeed a well structured development environment. Jean Bovet  
did an awesome job. I just asked myself about adding new syntax  
highlighting and so on for the new ANTLR tools coming soon to a  
theater near you. I asked him to give me a few words on all of the  
classes; here is how he responded:

> - ATESyntaxEngine: this is the main abstract class for the syntax  
> highlighting. It has several concrete classes. For example, to  
> highlight Java code, I use the ATEJavaSyntaxEngine which extends  
> ATELanguageSyntaxEngine which extends ATESyntaxEngine. This class  
> mainly creates the parser and lexer and define a few attributes.
> - ATESyntaxLexer: this is the lexer class. Again, for Java, I use  
> the ATEJavaSyntaxLexer extends ATELanguageLexer extends  
> ATESyntaxLexer.
> - ATESyntaxParser: same as the lexer but for the parser.
>
> The class GrammarSyntaxEngine is the engine for the grammar. It  
> extends, again, ATELanguageSyntaxEngine extends ATESyntaxEngine.
>
> We have that to summarize:
> - ATEJavaSyntaxEngine < ATELanguageSyntaxEngine < ATESyntaxEngine
> - GrammarSyntaxEngine < ATELanguageSyntaxEngine < ATESyntaxEngine
>
> So if you want to create something for a new language, I would mimic  
> the ATEJavaXXX classes and adapt them to your language.
>
> The ANTLRGrammarEngine (and impl) is used as a wrapper around your  
> org.antlr.tool.Grammar.

Terence


From devel at hunsicker.de  Mon Oct  6 12:47:33 2008
From: devel at hunsicker.de (Marco Hunsicker)
Date: Mon, 06 Oct 2008 21:47:33 +0200
Subject: [antlr-interest] Reusing the text editor in ANTLRworks
In-Reply-To: <db69f5a60810061230xe0f55d7ha3fe63eefdcb0aa@mail.gmail.com>
References: <db69f5a60810061230xe0f55d7ha3fe63eefdcb0aa@mail.gmail.com>
Message-ID: <48EA6B55.3090407@hunsicker.de>

Hello Aaron,

> While I was working, I realized how solid and
> full-featured the grammar editor is in ANTLRworks.
> 
> Now I'm trying to reuse that component as my SQL editor component.
> 
> Is there any precedent for this? Can anyone comment on whether or not it's a
> good idea to try, and if it is a good idea,

It's definitely possible and feasible to re-use the ANTLRWorks editor 
component in your own project. It's still quite a bit of work to extract 
the interesting pieces and add highlighting support for your target 
language.

You therefore might be better off with a ready-to-use editor component. 
I'm only aware of two specific components. Both have support for SQL.

http://code.google.com/p/jsyntaxpane/ APL 2.0
http://fifesoft.com/rsyntaxtextarea/  LGPL

Cheers,

Marco

From sharwell at pixelminegames.com  Mon Oct  6 13:15:55 2008
From: sharwell at pixelminegames.com (Sam Harwell)
Date: Mon, 6 Oct 2008 15:15:55 -0500
Subject: [antlr-interest] Reusing the text editor in ANTLRworks
In-Reply-To: <48EA6B55.3090407@hunsicker.de>
References: <db69f5a60810061230xe0f55d7ha3fe63eefdcb0aa@mail.gmail.com>
	<48EA6B55.3090407@hunsicker.de>
Message-ID: <86403CA0939415448BCCB83855EFE09A64E526@Bloodymary.ironwillgames.com>

Depending on your target platform, you can also target the Visual Studio
Shell (free). Might take you a bit to get a skeleton language service
working but it's lightning fast and packed full of features. Once you
get your feet under you it's not bad at all; at this point if I was
given a working grammar I could create a functional language service for
it in a day, and implement a good portion of the IntelliSense features
in a week at most. I grabbed the Antlr V3 grammar from ANTLRworks (or
maybe it was the Eclipse plugin) and put one together with
auto-complete, go-to definition, hover tips, and more in about 2 days.

Sam

-----Original Message-----
From: antlr-interest-bounces at antlr.org
[mailto:antlr-interest-bounces at antlr.org] On Behalf Of Marco Hunsicker
Sent: Monday, October 06, 2008 2:48 PM
To: undisclosed-recipients
Cc: antlr-interest at antlr.org
Subject: Re: [antlr-interest] Reusing the text editor in ANTLRworks

Hello Aaron,

> While I was working, I realized how solid and
> full-featured the grammar editor is in ANTLRworks.
> 
> Now I'm trying to reuse that component as my SQL editor component.
> 
> Is there any precedent for this? Can anyone comment on whether or not
it's a
> good idea to try, and if it is a good idea,

It's definitely possible and feasible to re-use the ANTLRWorks editor 
component in your own project. It's still quite a bit of work to extract

the interesting pieces and add highlighting support for your target 
language.

You therefore might be better off with a ready-to-use editor component. 
I'm only aware of two specific components. Both have support for SQL.

http://code.google.com/p/jsyntaxpane/ APL 2.0
http://fifesoft.com/rsyntaxtextarea/  LGPL

Cheers,

Marco

List: http://www.antlr.org/mailman/listinfo/antlr-interest
Unsubscribe:
http://www.antlr.org/mailman/options/antlr-interest/your-email-addr
ess


From aaron at sqlpower.ca  Mon Oct  6 14:06:02 2008
From: aaron at sqlpower.ca (Aaron Niedbala)
Date: Mon, 6 Oct 2008 17:06:02 -0400
Subject: [antlr-interest] Reusing the text editor in ANTLRworks
In-Reply-To: <86403CA0939415448BCCB83855EFE09A64E526@Bloodymary.ironwillgames.com>
References: <db69f5a60810061230xe0f55d7ha3fe63eefdcb0aa@mail.gmail.com>
	<48EA6B55.3090407@hunsicker.de>
	<86403CA0939415448BCCB83855EFE09A64E526@Bloodymary.ironwillgames.com>
Message-ID: <db69f5a60810061406g41e385a5x66307eed72449771@mail.gmail.com>

2008/10/6 Marco Hunsicker <devel at hunsicker.de>
>
> You therefore might be better off with a ready-to-use editor component.
> I'm only aware of two specific components. Both have support for SQL.
>
> http://code.google.com/p/jsyntaxpane/ APL 2.0
> http://fifesoft.com/rsyntaxtextarea/  LGPL


2008/10/6 Sam Harwell <sharwell at pixelminegames.com>
>
> Depending on your target platform, you can also target the Visual Studio
> Shell (free). Might take you a bit to get a skeleton language service

Thanks Sam and Marco,

Our app targets all platforms that have Swing support, so the Visual
Studio Shell is not an option (but thanks for mentioning it).

We've decided to run with rsyntaxtextarea. It works with Java 5, which
we're still stuck on thanks to Apple blocking the Java 6 update on all
but their newest hardware. About 30% of users on our other products
are Mac users, so we feel it's worth catering to Mac still.

Thanks also to Terrence. We still intend to look at extracting the
editor from ANTLRworks because it's much more powerful than
rsyntaxtextarea, which is only a tokenizer. But to get the whole
project off the ground quickly, rsyntaxtextarea looks like an
excellent compromise.

Aaron

From o.b.fischer at gmx.de  Mon Oct  6 15:02:10 2008
From: o.b.fischer at gmx.de (Oliver B. Fischer)
Date: Tue, 07 Oct 2008 00:02:10 +0200
Subject: [antlr-interest] Semantic predicates during AST  construction
In-Reply-To: <20081006101533.10382gmx1@mx035.gmx.net>
References: <48E8BE1D.9090101@gmx.de>
	<1223249125.4407.3.camel@jimi.temporal-wave.com>
	<48E9BE95.9080203@gmx.de> <20081006101533.10382gmx1@mx035.gmx.net>
Message-ID: <48EA8AE2.1080604@gmx.de>

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

It is possible, if you call the ctor directly, but this is a language
dependend solution.

Here is an example:

- -> ^(PLUS $ruleA $ruleB
     {(true != false) ? new SymbolTree(INT2FLOAT) : null })

I would like to have a more generic solution...


Gavin Lambert schrieb:
> At 20:30 6/10/2008, Oliver B. Fischer wrote:
>>I would like to express things like:
>>
>>-> ^(ROOT A ({condition}? B | C)
>>
>>Evaluates condition to true, I would like to get ^(ROOT A B).
>>Otherwise the result should be ^(ROOT A C).
> 
> If B and C are tokens that exist on the matching side (left of the
> arrow) then I think you can do this (haven't tried it, though, so I
> could be wrong):
> 
> A b=B c=C -> ^(ROOT A { (condition) ? $b : $c })
> 
> It's probably possible to do this sort of thing with imaginary tokens as
> well, although I'm not sure exactly what the syntax would be.
> 

- --
Oliver B. Fischer, Sch?nhauser Allee 64, 10437 Berlin
Tel. +49 30 44793251, Mobil: +49 178 7903538
Mail: o.b.fischer at gmx.de Blog: http://www.sw-blog.net
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.8 (MingW32)
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org

iEYEARECAAYFAkjqiuIACgkQbyc4N0PdoAxnrgCfdp3I0sEESrVQgGIcHSxzh1hq
i2EAoLDSUYNpABOJDe02pGY1vcysPtCo
=VF4H
-----END PGP SIGNATURE-----

From jaluber at gmx.de  Mon Oct  6 15:47:58 2008
From: jaluber at gmx.de (Johannes Luber)
Date: Tue, 07 Oct 2008 00:47:58 +0200
Subject: [antlr-interest] Semantic predicates during AST  construction
In-Reply-To: <48EA8AE2.1080604@gmx.de>
References: <48E8BE1D.9090101@gmx.de>	<1223249125.4407.3.camel@jimi.temporal-wave.com>	<48E9BE95.9080203@gmx.de>
	<20081006101533.10382gmx1@mx035.gmx.net> <48EA8AE2.1080604@gmx.de>
Message-ID: <48EA959E.5050703@gmx.de>

Oliver B. Fischer schrieb:
> -----BEGIN PGP SIGNED MESSAGE-----
> Hash: SHA1
> 
> It is possible, if you call the ctor directly, but this is a language
> dependend solution.
> 
> Here is an example:
> 
> - -> ^(PLUS $ruleA $ruleB
>      {(true != false) ? new SymbolTree(INT2FLOAT) : null })
> 
> I would like to have a more generic solution...

Actions are in ANTLR always language dependent. Once Loring finishes
ANTLR/Yggdrasil (hey, are you still working on this, Loring?), this
won't be true if you decide to switch the system. Yggdrasil has some
differences compared to pure ANTLR, but is then language independent.

Johannes
> 
> 
> Gavin Lambert schrieb:
>> At 20:30 6/10/2008, Oliver B. Fischer wrote:
>>> I would like to express things like:
>>>
>>> -> ^(ROOT A ({condition}? B | C)
>>>
>>> Evaluates condition to true, I would like to get ^(ROOT A B).
>>> Otherwise the result should be ^(ROOT A C).
>> If B and C are tokens that exist on the matching side (left of the
>> arrow) then I think you can do this (haven't tried it, though, so I
>> could be wrong):
>>
>> A b=B c=C -> ^(ROOT A { (condition) ? $b : $c })
>>
>> It's probably possible to do this sort of thing with imaginary tokens as
>> well, although I'm not sure exactly what the syntax would be.
>>
> 
> - --
> Oliver B. Fischer, Sch?nhauser Allee 64, 10437 Berlin
> Tel. +49 30 44793251, Mobil: +49 178 7903538
> Mail: o.b.fischer at gmx.de Blog: http://www.sw-blog.net
> -----BEGIN PGP SIGNATURE-----
> Version: GnuPG v1.4.8 (MingW32)
> Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org
> 
> iEYEARECAAYFAkjqiuIACgkQbyc4N0PdoAxnrgCfdp3I0sEESrVQgGIcHSxzh1hq
> i2EAoLDSUYNpABOJDe02pGY1vcysPtCo
> =VF4H
> -----END PGP SIGNATURE-----
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
> 


From lgcraymer at yahoo.com  Mon Oct  6 16:10:45 2008
From: lgcraymer at yahoo.com (Loring Craymer)
Date: Mon, 6 Oct 2008 16:10:45 -0700 (PDT)
Subject: [antlr-interest] Semantic predicates during AST  construction
Message-ID: <252588.1120.qm@web55901.mail.re3.yahoo.com>





----- Original Message ----
> From: Johannes Luber <jaluber at gmx.de>
> To: Oliver B. Fischer <o.b.fischer at gmx.de>
> Cc: antlr-interest at antlr.org
> Sent: Monday, October 6, 2008 3:47:58 PM
> Subject: Re: [antlr-interest] Semantic predicates during AST construction
>?

?
> Actions are in ANTLR always language dependent. Once Loring finishes
> ANTLR/Yggdrasil (hey, are you still working on this, Loring?), this
> won't be true if you decide to switch the system. Yggdrasil has some
> differences compared to pure ANTLR, but is then language independent.

Johannes--

Actually, I'm very close to being at a point where I would be comfortable doing a release.? I'm in the last stages of test and debug for the grammar generator and am?working on?the graph rewriting?code that does the attribute modeling--all of the other machinery is working.? Once that is complete, I'll have to clean up the command line options and document them, do some minor work on the overall documentation, and get the sourceforge site up and running with an initial release.? That might happen by the end of November.

--Loring

> 
> Johannes
> > 



      

From yuihuiqin at yahoo.com.cn  Mon Oct  6 23:32:18 2008
From: yuihuiqin at yahoo.com.cn (Huiqin Yu)
Date: Tue, 7 Oct 2008 14:32:18 +0800 (CST)
Subject: [antlr-interest] how to go on interpreting the input file ignoring
	current mismatch?
Message-ID: <668703.81116.qm@web15902.mail.cnb.yahoo.com>

hi,
    I write a grammar and want to parse a input file.
   if input file is not right,anltr will throw a exception and tell me the mismatch with wrong line No and character count.
  But how can I ignore the current error line of input file and go on interpreting the next line of input file?
   
   
  Regards

       
---------------------------------
 ????????????
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20081007/3bd81bcf/attachment.html 

From J.Kraaijeveld at Askesis.nl  Tue Oct  7 00:51:26 2008
From: J.Kraaijeveld at Askesis.nl (Joost Kraaijeveld)
Date: Tue, 07 Oct 2008 09:51:26 +0200
Subject: [antlr-interest] ANTLRWorks /debugger question?
Message-ID: <1223365886.5721.25.camel@panoramix.askesis.nl>

Hi, 

I have a grammar that if I do a "check grammar" reports that it is OK.
If I run it through the debugger the debugger stops in the end, but the
left (stop?) button in the debugger screen stays black. and the debugger
active.

My question: should the debugger stop after parsing the file? Is so, I
assume that my (very simple but than too difficult for me) grammar is
not correct: is there something special about handling EOF ?


TIA



NB. all sources can be seen from a Trac/SVN:

http://trac.askesis.nl/tidbits/browser/AntlrTest

grammar:
http://trac.askesis.nl/tidbits/browser/AntlrTest/Specification.g

test input file: 
http://trac.askesis.nl/tidbits/browser/AntlrTest/Specification.spec

Java test application: 
http://trac.askesis.nl/tidbits/browser/AntlrTest/src/nl/askesis/Application.java



-- 
Groeten,

Joost Kraaijeveld
Askesis B.V.
Molukkenstraat 14
6524NB Nijmegen
tel: 024-3888063 / 06-51855277
fax: 024-3608416
web: www.askesis.nl



From hp67 at bluewin.ch  Tue Oct  7 05:20:56 2008
From: hp67 at bluewin.ch (Mr. Armin Nievergelt)
Date: Tue, 07 Oct 2008 14:20:56 +0200
Subject: [antlr-interest] Q: ANTLRWorks code generation error
Message-ID: <48EB5428.8000302@bluewin.ch>

Hi all,

I works since ANTLR 3.0 with ANTLRWorks. I am a little confused
that all versions before 1.2 and 1.2.1 works very well, but i cannot 
generate
code with the new versions of ANTLRWorks. I see the following message.
Next i have tested the code generation from the command line and with 
Netbeans.
Both is ok, so i think the classpath is ok.

Can anyone help me?

Best regards

Armin



[12:30:11] error(1):  cannot write file Java.tokens: 
java.io.FileNotFoundException: 
J:\Sun\netbeans-5.5.1-bluej\nbproject\java\src\J:\Sun\netbeans-5.5.1-bluej\nbproject\java\src\JavaParser.java 
(Die Syntax f?r den Dateinamen, Verzeichnisnamen oder die 
Datentr?gerbezeichnung ist falsch)
java.io.FileOutputStream.open(Native Method)
java.io.FileOutputStream.<init>(Unknown Source)
java.io.FileOutputStream.<init>(Unknown Source)
java.io.FileWriter.<init>(Unknown Source)
org.antlr.Tool.getOutputFile(Tool.java:555)
org.antlr.codegen.CodeGenerator.write(CodeGenerator.java:1271)
org.antlr.codegen.Target.genRecognizerFile(Target.java:94)
org.antlr.codegen.CodeGenerator.genRecognizer(CodeGenerator.java:460)
org.antlr.Tool.generateRecognizer(Tool.java:420)
org.antlr.Tool.process(Tool.java:287)
org.antlr.works.generate.CodeGenerate.generate(Unknown Source)
org.antlr.works.generate.CodeGenerate.run(Unknown Source)
java.lang.Thread.run(Unknown Source)
[12:30:11] error(1):  cannot write file Java__.g: 
java.io.FileNotFoundException: 
J:\Sun\netbeans-5.5.1-bluej\nbproject\java\src\J:\Sun\netbeans-5.5.1-bluej\nbproject\java\src\Java__.g 
(Die Syntax f?r den Dateinamen, Verzeichnisnamen oder die 
Datentr?gerbezeichnung ist falsch)
java.io.FileOutputStream.open(Native Method)
java.io.FileOutputStream.<init>(Unknown Source)
java.io.FileOutputStream.<init>(Unknown Source)
java.io.FileWriter.<init>(Unknown Source)
org.antlr.Tool.getOutputFile(Tool.java:555)
org.antlr.Tool.process(Tool.java:313)
org.antlr.works.generate.CodeGenerate.generate(Unknown Source)
org.antlr.works.generate.CodeGenerate.run(Unknown Source)
java.lang.Thread.run(Unknown Source)


From cerbff at cs.tu-berlin.de  Tue Oct  7 05:53:53 2008
From: cerbff at cs.tu-berlin.de (Florian Friedemann)
Date: Tue, 7 Oct 2008 14:53:53 +0200 (MEST)
Subject: [antlr-interest] (no subject)
Message-ID: <Pine.SOC.4.64.0810071447310.21471@condesa>

Hi,
I'm currently working on a parser generating an AST.
Into that AST I want to put information that hasn't been parsed but generated during the process of parsing
(one example would be the Integer-typed index of a parsed variable within a scope).
So I wrote a function creating a CommonTree.

When I put this Tree into a rewrite rule I now get the warning:
   [org.antlr.works.debugger.tree.DBASTModel - event 15416] Warning: [addChild] Child node 900 not found, ignoring.
And the generated AST doesn't contain the tree generated by that function.

The function looks like this (implemented according to chapter 7 on tree construction of the reference)

CommonTree getTree() {
 	TreeAdaptor adaptor = new CommonTreeAdaptor();
 	CommonTree varRefList = (CommonTree)adaptor.nil();

 	varRefList.addChild((CommonTree)adaptor.create(INT, frameCnt.toString()));
 	varRefList.addChild((CommonTree)adaptor.create(INT, varId.toString()));

 	return varRefList;
}
were frameCnt and varId are member variables of type Integer

the rule were it is used looks similar to this:

identifier
scope {
 	CommonTree varRefTree;
}
    :  (ID {$identifier::varRefTree = getVarId($ID.getText()).getTree();}
 	-> ^(IDENTIFIER ^(VAR_REF ID {$identifier::varRefTree}))
 	)

parser options are:
backtrack=true;
memoize=true;
output=AST;
ASTLabelType=CommonTree;

Versions:
ANTLRWorks: 1.2
ANTLR: 3.1

So my questions are:
Is this approach (building the tree "by hand") flawed in general?
If not, what can I do to avoid those warnings and add the tree to the generated AST.
If it is flawed, is there any other way I can add information that was generated during parsing to the AST?

Many thanks in advance


From jaluber at gmx.de  Tue Oct  7 06:07:23 2008
From: jaluber at gmx.de (Johannes Luber)
Date: Tue, 07 Oct 2008 15:07:23 +0200
Subject: [antlr-interest] ANTLRWorks /debugger question?
In-Reply-To: <1223365886.5721.25.camel@panoramix.askesis.nl>
References: <1223365886.5721.25.camel@panoramix.askesis.nl>
Message-ID: <48EB5F0B.1060603@gmx.de>

Joost Kraaijeveld schrieb:
> Hi, 
> 
> I have a grammar that if I do a "check grammar" reports that it is OK.
> If I run it through the debugger the debugger stops in the end, but the
> left (stop?) button in the debugger screen stays black. and the debugger
> active.
> 
> My question: should the debugger stop after parsing the file? Is so, I
> assume that my (very simple but than too difficult for me) grammar is
> not correct: is there something special about handling EOF ?

I'd say that the debugger should stop, as long one can still rollback.
EOF is used to tell the parser, that it shouldn't simply say that it
parsed things ok, if some trash comes afterwards. That way EOF is
usually on the top parser rule.

Johannes
> 
> 
> TIA
> 
> 
> 
> NB. all sources can be seen from a Trac/SVN:
> 
> http://trac.askesis.nl/tidbits/browser/AntlrTest
> 
> grammar:
> http://trac.askesis.nl/tidbits/browser/AntlrTest/Specification.g
> 
> test input file: 
> http://trac.askesis.nl/tidbits/browser/AntlrTest/Specification.spec
> 
> Java test application: 
> http://trac.askesis.nl/tidbits/browser/AntlrTest/src/nl/askesis/Application.java
> 
> 
> 


From jaluber at gmx.de  Tue Oct  7 06:12:31 2008
From: jaluber at gmx.de (Johannes Luber)
Date: Tue, 07 Oct 2008 15:12:31 +0200
Subject: [antlr-interest] Q: ANTLRWorks code generation error
In-Reply-To: <48EB5428.8000302@bluewin.ch>
References: <48EB5428.8000302@bluewin.ch>
Message-ID: <48EB603F.9060804@gmx.de>

Mr. Armin Nievergelt schrieb:
> Hi all,
> 
> I works since ANTLR 3.0 with ANTLRWorks. I am a little confused
> that all versions before 1.2 and 1.2.1 works very well, but i cannot 
> generate
> code with the new versions of ANTLRWorks. I see the following message.
> Next i have tested the code generation from the command line and with 
> Netbeans.
> Both is ok, so i think the classpath is ok.
> 
> Can anyone help me?
> 
> Best regards
> 
> Armin
> 
> 
> 
> [12:30:11] error(1):  cannot write file Java.tokens: 
> java.io.FileNotFoundException: 
> J:\Sun\netbeans-5.5.1-bluej\nbproject\java\src\J:\Sun\netbeans-5.5.1-bluej\nbproject\java\src\JavaParser.java 
> (Die Syntax f?r den Dateinamen, Verzeichnisnamen oder die 
> Datentr?gerbezeichnung ist falsch)

Not sure why, but the exception says that ANTLRworks somehow added the
base path to the output file twice. Can you send the grammar to the list
or at least to Jean Bovet (jean_bovet at mac.com), the maintainer of
ANTLRworks?

Johannes
> java.io.FileOutputStream.open(Native Method)
> java.io.FileOutputStream.<init>(Unknown Source)
> java.io.FileOutputStream.<init>(Unknown Source)
> java.io.FileWriter.<init>(Unknown Source)
> org.antlr.Tool.getOutputFile(Tool.java:555)
> org.antlr.codegen.CodeGenerator.write(CodeGenerator.java:1271)
> org.antlr.codegen.Target.genRecognizerFile(Target.java:94)
> org.antlr.codegen.CodeGenerator.genRecognizer(CodeGenerator.java:460)
> org.antlr.Tool.generateRecognizer(Tool.java:420)
> org.antlr.Tool.process(Tool.java:287)
> org.antlr.works.generate.CodeGenerate.generate(Unknown Source)
> org.antlr.works.generate.CodeGenerate.run(Unknown Source)
> java.lang.Thread.run(Unknown Source)
> [12:30:11] error(1):  cannot write file Java__.g: 
> java.io.FileNotFoundException: 
> J:\Sun\netbeans-5.5.1-bluej\nbproject\java\src\J:\Sun\netbeans-5.5.1-bluej\nbproject\java\src\Java__.g 
> (Die Syntax f?r den Dateinamen, Verzeichnisnamen oder die 
> Datentr?gerbezeichnung ist falsch)
> java.io.FileOutputStream.open(Native Method)
> java.io.FileOutputStream.<init>(Unknown Source)
> java.io.FileOutputStream.<init>(Unknown Source)
> java.io.FileWriter.<init>(Unknown Source)
> org.antlr.Tool.getOutputFile(Tool.java:555)
> org.antlr.Tool.process(Tool.java:313)
> org.antlr.works.generate.CodeGenerate.generate(Unknown Source)
> org.antlr.works.generate.CodeGenerate.run(Unknown Source)
> java.lang.Thread.run(Unknown Source)
> 
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
> 


From rschulz at sonic.net  Tue Oct  7 06:12:48 2008
From: rschulz at sonic.net (Randall R Schulz)
Date: Tue, 7 Oct 2008 06:12:48 -0700
Subject: [antlr-interest] Dynamic Grammars
Message-ID: <200810070612.48802.rschulz@sonic.net>

Hi,

I recently had to write a parser for a language that, like Prolog, 
allows definition of new operators and redefinition of the precedence, 
arity and associativity of existing operators. (I did use ANTLR and was 
forced to simply fix the default operator structure to that language's 
defaults, which technically means I didn't really implement that 
language, but it's the best I could do within the time I have available 
for what is a non-essential support tool in my project.)

Now, I'm virtually certain this cannot be done with ANTLR or any of its 
brethren, but I was wondering if anybody here knows how such things are 
handled? Are there in fact any parser generators that could handle such 
a language? Am I wrong in thinking ANTLR cannot?


Thanks.


Randall Schulz

From jimi at temporal-wave.com  Tue Oct  7 07:16:48 2008
From: jimi at temporal-wave.com (Jim Idle)
Date: Tue, 07 Oct 2008 07:16:48 -0700
Subject: [antlr-interest] ANTLRWorks /debugger question?
In-Reply-To: <1223365886.5721.25.camel@panoramix.askesis.nl>
References: <1223365886.5721.25.camel@panoramix.askesis.nl>
Message-ID: <1223389008.4291.3.camel@jimi.temporal-wave.com>

On Tue, 2008-10-07 at 09:51 +0200, Joost Kraaijeveld wrote:

> Hi, 
> 
> I have a grammar that if I do a "check grammar" reports that it is OK.
> If I run it through the debugger the debugger stops in the end, but the
> left (stop?) button in the debugger screen stays black. and the debugger
> active.
> 
> My question: should the debugger stop after parsing the file? Is so, I
> assume that my (very simple but than too difficult for me) grammar is
> not correct: is there something special about handling EOF ?


No, it does not stop the debugger because if you look at the debugging
controls, you can now step backwards through the parse, rewind to the
start and so on, so if the debugger stopped when your parser finishes,
you would not be able to do that. 

The only thing about EOF is that you should tell your parser to expect
EOF, if there is anything special to you about EOF. IN other words, if
you parser should stop at the end of valid input, and not complain about
anything that follows valid input, then don't put an EOF marker in the
parser, but if the parser should try to consume all the available input,
then do place an EOF at the end of your top rule. The debugger won't
stop when it gets there though for the same reasons as above.

Jim
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20081007/ba18e2cd/attachment.html 

From jimi at temporal-wave.com  Tue Oct  7 07:19:58 2008
From: jimi at temporal-wave.com (Jim Idle)
Date: Tue, 07 Oct 2008 07:19:58 -0700
Subject: [antlr-interest] Q: ANTLRWorks code generation error
In-Reply-To: <48EB5428.8000302@bluewin.ch>
References: <48EB5428.8000302@bluewin.ch>
Message-ID: <1223389198.4291.6.camel@jimi.temporal-wave.com>

On Tue, 2008-10-07 at 14:20 +0200, Mr. Armin Nievergelt wrote:

> Hi all,
> 
> I works since ANTLR 3.0 with ANTLRWorks. I am a little confused
> that all versions before 1.2 and 1.2.1 works very well, but i cannot 
> generate
> code with the new versions of ANTLRWorks. I see the following message.
> Next i have tested the code generation from the command line and with 
> Netbeans.
> Both is ok, so i think the classpath is ok.
> 
> Can anyone help me?
> 
> Best regards
> 
> Armin
> 
> 
> 
> [12:30:11] error(1):  cannot write file Java.tokens: 
> java.io.FileNotFoundException: 
> J:\Sun\netbeans-5.5.1-bluej\nbproject\java\src\J:\Sun\netbeans-5.5.1-bluej\nbproject\java\src\JavaParser.java 


Check your preferences - something does not look quite right wiht that
path :-) (but it coudl be the error message), and make sure that you
have write access to J:\Sun\netbeans-5.5.1-bluej\nbproject\java\src
\JavaParser.java 

Jim
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20081007/3a07c62c/attachment.html 

From jimi at temporal-wave.com  Tue Oct  7 07:24:22 2008
From: jimi at temporal-wave.com (Jim Idle)
Date: Tue, 07 Oct 2008 07:24:22 -0700
Subject: [antlr-interest] (no subject)
In-Reply-To: <Pine.SOC.4.64.0810071447310.21471@condesa>
References: <Pine.SOC.4.64.0810071447310.21471@condesa>
Message-ID: <1223389462.4291.11.camel@jimi.temporal-wave.com>

On Tue, 2008-10-07 at 14:53 +0200, Florian Friedemann wrote:

> Hi,
> I'm currently working on a parser generating an AST.
> Into that AST I want to put information that hasn't been parsed but generated during the process of parsing
> (one example would be the Integer-typed index of a parsed variable within a scope).
> So I wrote a function creating a CommonTree.



> If it is flawed, is there any other way I can add information that was generated during parsing to the AST?


Make a subclass of CommonTree that contains the information fields you
need.
Change the option ASTLabelType=MyCommonTreeSubClass.
Element references are now to objects of your new type and you can add
the information you need.

But, you might really be wanting Heterogeneous tree nodes? See wiki
articles on this.

Jim


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20081007/fb0856da/attachment.html 

From jimi at temporal-wave.com  Tue Oct  7 07:25:12 2008
From: jimi at temporal-wave.com (Jim Idle)
Date: Tue, 07 Oct 2008 07:25:12 -0700
Subject: [antlr-interest] ANTLRWorks /debugger question?
In-Reply-To: <48EB5F0B.1060603@gmx.de>
References: <1223365886.5721.25.camel@panoramix.askesis.nl>
	<48EB5F0B.1060603@gmx.de>
Message-ID: <1223389512.4291.13.camel@jimi.temporal-wave.com>

On Tue, 2008-10-07 at 15:07 +0200, Johannes Luber wrote:

> Joost Kraaijeveld schrieb:
> > Hi, 
> > 
> > I have a grammar that if I do a "check grammar" reports that it is OK.
> > If I run it through the debugger the debugger stops in the end, but the
> > left (stop?) button in the debugger screen stays black. and the debugger
> > active.
> > 
> > My question: should the debugger stop after parsing the file? Is so, I
> > assume that my (very simple but than too difficult for me) grammar is
> > not correct: is there something special about handling EOF ?
> 
> I'd say that the debugger should stop, as long one can still rollback.

I think you meant should "NOT" stop?

Jim
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20081007/5eeaf4be/attachment.html 

From bergschloss at ukr.net  Tue Oct  7 07:40:51 2008
From: bergschloss at ukr.net (Sergiy Karpenko)
Date: Tue, 07 Oct 2008 17:40:51 +0300
Subject: [antlr-interest] How exclude a symbol from lexer rule?
Message-ID: <E1KnDk3-000Ltp-S1@ffe9.ukr.net>

Hi, all    
For axample we have a lexer rule:    
    
CHAR : ('a'..'z')|('0'..'9');    
    
But, I want exclude from this sequence 'k' symbol.?    
Somethig like    
EXTCHAR: CHAR ~'k' ;    
    
Thanks    
  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20081007/4adc1802/attachment.html 

From rschulz at sonic.net  Tue Oct  7 09:07:42 2008
From: rschulz at sonic.net (Randall R Schulz)
Date: Tue, 7 Oct 2008 09:07:42 -0700
Subject: [antlr-interest] ANTLR 3.0 -> 3.1.1 Broke Working Parser
Message-ID: <200810070907.42251.rschulz@sonic.net>

Hi,

I've just discovered that an ANTLR parser created using version 3.0 that
I'd been using successfully for over a year is broken now that I rebuilt
it using ANTLR 3.1.1.

The rules in question (hopefully this tiny excerpt is sufficient for
someone to recognize a change between 3.0 and 3.1) are:



termSequence
    :   ( term | SequenceMark ) *
    ;

atom
    :   ( Open term termSequence Close )
    ->  ^( Atom term termSequence )

    |   ...

("Open" and "Close" are left and right parens. "SequenceMark" is an
ellipsis, "...". "Atom" is a pseudo-token.)


This is eliciting the following excpetion on inputs in which there are
zero repetitions of the RHS of termSequence:

Exception in thread "main" org.antlr.runtime.tree.RewriteEmptyStreamException: rule termSequence
        at org.antlr.runtime.tree.RewriteRuleElementStream._next(RewriteRuleElementStream.java:158)
        at org.antlr.runtime.tree.RewriteRuleElementStream.nextTree(RewriteRuleElementStream.java:145)
        at tau.cl.CLIFParser.atom(CLIFParser.java:2460)


The relevant CLIFParser.java code is:

    root_0 = (CommonTree)adaptor.nil();
    // 673:2: -> ^( Atom term termSequence )
    {
        dbg.location(673,5);
        // CLIF.g:673:5: ^( Atom term termSequence )
        {
        CommonTree root_1 = (CommonTree)adaptor.nil();
        dbg.location(673,8);
        root_1 = (CommonTree)adaptor.becomeRoot((CommonTree)adaptor.create(Atom, "Atom"), root_1);

        dbg.location(673,13);
        adaptor.addChild(root_1, stream_term.nextTree());
        dbg.location(673,18);
        adaptor.addChild(root_1, stream_termSequence.nextTree());

        adaptor.addChild(root_0, root_1);
        }

    }


Please let me know if:

1) This is a known change (or fix) in ANTLR from 3.0 to 3.1.1
1a) If so, what is the fix for my grammar

2) This is not enough information to go on.


Thanks.

Randall Schulz

From jimi at temporal-wave.com  Tue Oct  7 09:13:46 2008
From: jimi at temporal-wave.com (Jim Idle)
Date: Tue, 07 Oct 2008 09:13:46 -0700
Subject: [antlr-interest] ANTLR 3.0 -> 3.1.1 Broke Working Parser
In-Reply-To: <200810070907.42251.rschulz@sonic.net>
References: <200810070907.42251.rschulz@sonic.net>
Message-ID: <1223396026.4291.26.camel@jimi.temporal-wave.com>

On Tue, 2008-10-07 at 09:07 -0700, Randall R Schulz wrote:

> Hi,
> 
> I've just discovered that an ANTLR parser created using version 3.0 that
> I'd been using successfully for over a year is broken now that I rebuilt
> it using ANTLR 3.1.1.
> 
> The rules in question (hopefully this tiny excerpt is sufficient for
> someone to recognize a change between 3.0 and 3.1) are:
> 
> 
> 
> termSequence
>     :   ( term | SequenceMark ) *
>     ;
> 
> atom
>     :   ( Open term termSequence Close )
>     ->  ^( Atom term termSequence )


Obviously, termSequence can be empty. It was a bug in 3.0 in fact, so
all you need do is this:

->  ^( Atom term termSequence? )

Jim
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20081007/d5f63451/attachment.html 

From jaluber at gmx.de  Tue Oct  7 09:59:33 2008
From: jaluber at gmx.de (Johannes Luber)
Date: Tue, 07 Oct 2008 18:59:33 +0200
Subject: [antlr-interest] ANTLRWorks /debugger question?
In-Reply-To: <1223389512.4291.13.camel@jimi.temporal-wave.com>
References: <1223365886.5721.25.camel@panoramix.askesis.nl>	
	<48EB5F0B.1060603@gmx.de>
	<1223389512.4291.13.camel@jimi.temporal-wave.com>
Message-ID: <48EB9575.9080509@gmx.de>

Jim Idle schrieb:
> On Tue, 2008-10-07 at 15:07 +0200, Johannes Luber wrote:
>> Joost Kraaijeveld schrieb:
>> > Hi, 
>> > 
>> > I have a grammar that if I do a "check grammar" reports that it is OK.
>> > If I run it through the debugger the debugger stops in the end, but the
>> > left (stop?) button in the debugger screen stays black. and the debugger
>> > active.
>> > 
>> > My question: should the debugger stop after parsing the file? Is so, I
>> > assume that my (very simple but than too difficult for me) grammar is
>> > not correct: is there something special about handling EOF ?
>>
>> I'd say that the debugger should stop, as long one can still rollback.
> I think you meant should "NOT" stop?

You're right.

Johannes
> 
> Jim


From andersen at ontologyworks.com  Tue Oct  7 10:02:06 2008
From: andersen at ontologyworks.com (Bill Andersen)
Date: Tue, 7 Oct 2008 13:02:06 -0400
Subject: [antlr-interest] Composite tree grammar
Message-ID: <43CD9ADA-2258-40C0-A404-77C342168550@ontologyworks.com>

Folks,

I want to use grammar import on tree grammars and did the test below  
using ANTLRWorks 1.2.  I wrote a simple grammar (Foo) to output an  
AST, a tree grammar (FooAST) to parse the latter, and another  
(FooASTImport) that imports FooAST and attempts to override the one  
rule in FooAST.  Code here.  I get a syntax error (in attached  
snapshot) but can't see where I'm going wrong.  Any help appreciated.

	.bill

grammar Foo;
options {
	output=AST;
}
tokens {
	FOO = 'foo';
	BAR = 'bar';
	ZAP;
}
start
	: FOO BAR
		-> ^(ZAP FOO BAR)
	;
	
-----------------------------------

tree grammar FooAST;
options {
	tokenVocab=Foo;
	output=AST;
}
start
	: ^(ZAP FOO BAR)
		-> ^(ZAP BAR FOO)
	;

-----------------------------------

tree grammar FooASTImport;
import FooAST;

options {
	tokenVocab=Foo;
	output=AST;
}

start
	: ^(ZAP FOO BAR)
		-> ^(ZAP FOO BAR)
	;

-------------- next part --------------
A non-text attachment was scrubbed...
Name: pastedGraphic.png
Type: image/png
Size: 20289 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20081007/b0be80d7/attachment.png 
-------------- next part --------------



Bill Andersen
Ontology Works, Inc. (www.ontologyworks.com)
3600 O'Donnell Street, Suite 600
Baltimore, MD 21224
Office: +1.410.675.1201
Cell: +1.443.858.6444
Fax: +1.410.675.1204





From jaluber at gmx.de  Tue Oct  7 10:02:05 2008
From: jaluber at gmx.de (Johannes Luber)
Date: Tue, 07 Oct 2008 19:02:05 +0200
Subject: [antlr-interest] How exclude a symbol from lexer rule?
In-Reply-To: <E1KnDk3-000Ltp-S1@ffe9.ukr.net>
References: <E1KnDk3-000Ltp-S1@ffe9.ukr.net>
Message-ID: <48EB960D.40408@gmx.de>

Sergiy Karpenko schrieb:
> 
> Hi, all
> For axample we have a lexer rule:
> 
> CHAR : ('a'..'z')|('0'..'9');
> 
> But, I want exclude from this sequence 'k' symbol. 
> Somethig like
> EXTCHAR: CHAR ~'k' ;
> 
> Thanks

ANTLR doesn't support this kind of syntax, though it is sometimes quite
handy. You have to do it manually.

Johannes

From Dennis.Benzinger at gmx.net  Tue Oct  7 10:08:19 2008
From: Dennis.Benzinger at gmx.net (Dennis Benzinger)
Date: Tue, 07 Oct 2008 19:08:19 +0200
Subject: [antlr-interest] How exclude a symbol from lexer rule?
In-Reply-To: <E1KnDk3-000Ltp-S1@ffe9.ukr.net>
References: <E1KnDk3-000Ltp-S1@ffe9.ukr.net>
Message-ID: <48EB9783.3080808@gmx.net>

Am 07.10.2008 16:40, Sergiy Karpenko schrieb:
> Hi, all    
> For axample we have a lexer rule:    
>     
> CHAR : ('a'..'z')|('0'..'9');    
>     
> But, I want exclude from this sequence 'k' symbol.     
> Somethig like    
> EXTCHAR: CHAR ~'k' ;    
> [...]

You can do it the other way around:

EXTCHAR: ('a'..'j')|('l'..'z')|('0'..'9');
CHAR: EXTCHAR|'k';


HTH,
Dennis Benzinger

From jimi at temporal-wave.com  Tue Oct  7 10:22:38 2008
From: jimi at temporal-wave.com (Jim Idle)
Date: Tue, 07 Oct 2008 10:22:38 -0700
Subject: [antlr-interest] How exclude a symbol from lexer rule?
In-Reply-To: <48EB9783.3080808@gmx.net>
References: <E1KnDk3-000Ltp-S1@ffe9.ukr.net>  <48EB9783.3080808@gmx.net>
Message-ID: <1223400158.4291.67.camel@jimi.temporal-wave.com>

On Tue, 2008-10-07 at 19:08 +0200, Dennis Benzinger wrote:

> Am 07.10.2008 16:40, Sergiy Karpenko schrieb:
> > Hi, all    
> > For axample we have a lexer rule:    
> >     
> > CHAR : ('a'..'z')|('0'..'9');    
> >     
> > But, I want exclude from this sequence 'k' symbol.     
> > Somethig like    
> > EXTCHAR: CHAR ~'k' ;    
> > [...]
> 
> You can do it the other way around:
> 
> EXTCHAR: ('a'..'j')|('l'..'z')|('0'..'9');
> CHAR: EXTCHAR|'k';
> 

Except that you now have two lexer rules that are ambiguous, so you
can't.

In general, when you start seeing things like this, it should trigger
that you are probably trying to do too much in the lexer. For good error
reporting, you want to move errors as high up the food chain as
possible. A semantic error such as "Cannot use character 'k' in a foo
bar" is usually vastly clearer than "No viable alt at 'k' ". 

Jim
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20081007/275a43cb/attachment.html 

From bergschloss at ukr.net  Tue Oct  7 12:05:17 2008
From: bergschloss at ukr.net (Sergiy Karpenko)
Date: Tue, 07 Oct 2008 22:05:17 +0300
Subject: [antlr-interest] How exclude a symbol from lexer rule?
In-Reply-To: <48EB9783.3080808@gmx.net>
Message-ID: <E1KnHrx-000AMr-2o@ffe8.ukr.net>

Yeah  I know this way. But it is complicated when lexer rule has a lot of subrules. And I need both of them. Original rule and modified.      
    So, in this case there is a lot of work for update each subrule.  
  Decision, I chose, is:      
    CHAR: ??CHARSET_WITHOUT_EXCHARS ? ?I ? ?EXCLUDED_CHARS;      
    CHARSET_WITHOUT_EXCHARS:?('a'..'j')|('l'..'z')|('0'..'9');      
    EXCLUDED_CHARS: ? 'k';      
    Thanks  
      
    Am 07.10.2008 16:40, Sergiy Karpenko schrieb:    
> Hi, all    
> For axample we have a lexer rule:    
>    
> CHAR : ('a'..'z')|('0'..'9');    
>    
> But, I want exclude from this sequence 'k' symbol.    
> Somethig like    
> EXTCHAR: CHAR ~'k' ;    
> [...]    
    
You can do it the other way around:    
    
EXTCHAR: ('a'..'j')|('l'..'z')|('0'..'9');    
CHAR: EXTCHAR|'k';    
    
HTH,    
Dennis Benzinger    
    
    
    
    
    
  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20081007/d221b6dd/attachment.html 

From andersen at ontologyworks.com  Wed Oct  8 12:59:57 2008
From: andersen at ontologyworks.com (Bill Andersen)
Date: Wed, 8 Oct 2008 15:59:57 -0400
Subject: [antlr-interest] Composite tree grammar
References: <43CD9ADA-2258-40C0-A404-77C342168550@ontologyworks.com>
Message-ID: <F569B985-56FD-4B5C-A28C-A1243C16616D@ontologyworks.com>

Everyone,

Yesterday I described a problem with composite tree grammars  
(below).   Can't tell for sure if it's an ANTLRWorks problem, but even  
doing code gen on the second file (which ought to have no dependencies  
on the third) breaks.  Same grammar error reported as before.

Begin forwarded message:

> From: Bill Andersen <andersen at ontologyworks.com>
> Date: October 7, 2008 1:02:06 PM EDT
> To: antlr-interest at antlr.org
> Subject: [antlr-interest] Composite tree grammar
>
> Folks,
>
> I want to use grammar import on tree grammars and did the test below  
> using ANTLRWorks 1.2.  I wrote a simple grammar (Foo) to output an  
> AST, a tree grammar (FooAST) to parse the latter, and another  
> (FooASTImport) that imports FooAST and attempts to override the one  
> rule in FooAST.  Code here.  I get a syntax error (in attached  
> snapshot) but can't see where I'm going wrong.  Any help appreciated.
>
> 	.bill
>
> grammar Foo;
> options {
> 	output=AST;
> }
> tokens {
> 	FOO = 'foo';
> 	BAR = 'bar';
> 	ZAP;
> }
> start
> 	: FOO BAR
> 		-> ^(ZAP FOO BAR)
> 	;
> 	
> -----------------------------------
>
> tree grammar FooAST;
> options {
> 	tokenVocab=Foo;
> 	output=AST;
> }
> start
> 	: ^(ZAP FOO BAR)
> 		-> ^(ZAP BAR FOO)
> 	;
>
> -----------------------------------
>
> tree grammar FooASTImport;
> import FooAST;
>
> options {
> 	tokenVocab=Foo;
> 	output=AST;
> }
>
> start
> 	: ^(ZAP FOO BAR)
> 		-> ^(ZAP FOO BAR)
> 	;
>
>
>
>
> Bill Andersen
> Ontology Works, Inc. (www.ontologyworks.com)
> 3600 O'Donnell Street, Suite 600
> Baltimore, MD 21224
> Office: +1.410.675.1201
> Cell: +1.443.858.6444
> Fax: +1.410.675.1204
>
>
>
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>

Bill Andersen
Ontology Works, Inc. (www.ontologyworks.com)
3600 O'Donnell Street, Suite 600
Baltimore, MD 21224
Office: +1.410.675.1201
Cell: +1.443.858.6444
Fax: +1.410.675.1204




-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20081008/772406ff/attachment.html 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: pastedGraphic.png
Type: image/png
Size: 20289 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20081008/772406ff/attachment.png 

From anders43 at gmail.com  Wed Oct  8 21:51:52 2008
From: anders43 at gmail.com (ajk .)
Date: Thu, 9 Oct 2008 12:51:52 +0800
Subject: [antlr-interest] How exclude a symbol from lexer rule? (Sergiy
	Karpenko)
Message-ID: <614b3f5f0810082151u9b61247r3be5ff0e0d321715@mail.gmail.com>

CHAR: { LA(1) != 'k' )? ('a'..'z')|('0'..'9') ;

?


--------- Forwarded message ----------
> From: "Sergiy Karpenko" <bergschloss at ukr.net>
> To: Dennis Benzinger <Dennis.Benzinger at gmx.net>
> Date: Tue, 07 Oct 2008 22:05:17 +0300
> Subject: Re: [antlr-interest] How exclude a symbol from lexer rule?
>  Yeah I know this way. But it is complicated when lexer rule has a lot of
> subrules. And I need both of them. Original rule and modified.
>
>  So, in this case there is a lot of work for update each subrule.
> Decision, I chose, is:
>
>  CHAR:   CHARSET_WITHOUT_EXCHARS    I    EXCLUDED_CHARS;
>
>  CHARSET_WITHOUT_EXCHARS: ('a'..'j')|('l'..'z')|('0'..'9');
>
>  EXCLUDED_CHARS:   'k';
>
>  Thanks
>
> Am 07.10.2008 16:40, Sergiy Karpenko schrieb:
> > Hi, all
> > For axample we have a lexer rule:
> >
> > CHAR : ('a'..'z')|('0'..'9');
> >
> > But, I want exclude from this sequence 'k' symbol.
> > Somethig like
> > EXTCHAR: CHAR ~'k' ;
> > [...]
>
> You can do it the other way around:
>
> EXTCHAR: ('a'..'j')|('l'..'z')|('0'..'9');
> CHAR: EXTCHAR|'k';
>
> HTH,
> Dennis Benzinger
>
>
>
>
>
>
> _______________________________________________
> antlr-interest mailing list
> antlr-interest at antlr.org
> http://www.antlr.org/mailman/listinfo/antlr-interest
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20081009/a14a1f96/attachment.html 

From antlr at mirality.co.nz  Wed Oct  8 23:41:46 2008
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Thu, 09 Oct 2008 19:41:46 +1300
Subject: [antlr-interest] Composite tree grammar
In-Reply-To: <43CD9ADA-2258-40C0-A404-77C342168550@ontologyworks.com>
References: <43CD9ADA-2258-40C0-A404-77C342168550@ontologyworks.com>
Message-ID: <20081009064155.52BAF11EC29@www.antlr.org>

At 06:02 8/10/2008, Bill Andersen wrote:
 >I want to use grammar import on tree grammars and did the test
 >below using ANTLRWorks 1.2.  I wrote a simple grammar (Foo) to
 >output an AST, a tree grammar (FooAST) to parse the latter,
 >and another (FooASTImport) that imports FooAST and attempts to
 >override the one rule in FooAST.  Code here.  I get a syntax
 >error (in attached snapshot) but can't see where I'm going
 >wrong.  Any help appreciated.
[...]
 >tree grammar FooAST;
 >options {
 >	tokenVocab=Foo;
 >	output=AST;
 >}
 >start
 >	: ^(ZAP FOO BAR)
 >		-> ^(ZAP BAR FOO)
 >	;

Given that the attached screenshot reports an error on line 10 of 
FooAST.g, and there doesn't appear to be that many lines in the 
file, I suspect some kind of EOL problem.

Especially since you're on MacOS.  Maybe the file is being saved 
with Mac CR-only line endings (or some other strange 
construction), while ANTLR requires either LF-only or CRLF.


From stoneyrh at gmail.com  Wed Oct  8 23:59:19 2008
From: stoneyrh at gmail.com (Ronghui Yu)
Date: Thu, 9 Oct 2008 14:59:19 +0800
Subject: [antlr-interest] How to reuse lexer object and parser object
Message-ID: <c0b1975b0810082359o43a3af37t57f3ff91ae966307@mail.gmail.com>

Hi, Jim,

Sorry to bother you again.
As I mentioned before, I use the same lexer and parser object for parsing
different SQL statements.
When using ANTLR3.0.1, everything works fine, but when upgrade to ANTLR3.1,
I found that it is necessary to save the
ctx->pParser->rec->state->tokenNames before calling setTokenStream, and
restore it to the previous value after.

But we found that it is not enough yet. Sometimes, it needs to set
ctx->pParser->rec->state->tokFactory to NULL, otherwise, it will result in
crash. What I do now is closing the tokFactory and setting it to NULL.

The problem is, I am not sure if there are other fields I need to reset, or
what values I should set them to.
Could you give me some advices?
Or if possible, you may provide an API for doing this job.

Thanks a lot.


-- 
===========================
Regards
Ronghui Yu
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20081009/65774ffd/attachment.html 

From antlr at mirality.co.nz  Thu Oct  9 00:12:59 2008
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Thu, 09 Oct 2008 20:12:59 +1300
Subject: [antlr-interest] How to reuse lexer object and parser  object
In-Reply-To: <c0b1975b0810082359o43a3af37t57f3ff91ae966307@mail.gmail.co
 m>
References: <c0b1975b0810082359o43a3af37t57f3ff91ae966307@mail.gmail.com>
Message-ID: <20081009071311.E606A35229C@www.antlr.org>

At 19:59 9/10/2008, Ronghui Yu wrote:
>As I mentioned before, I use the same lexer and parser object for 
>parsing different SQL statements.

Is there some particular reason why you don't want to construct a 
new instance?


From stoneyrh at gmail.com  Thu Oct  9 00:30:39 2008
From: stoneyrh at gmail.com (Ronghui Yu)
Date: Thu, 9 Oct 2008 15:30:39 +0800
Subject: [antlr-interest] How to reuse lexer object and parser object
In-Reply-To: <48edaf07.1f09360a.2905.ffff8dd4SMTPIN_ADDED@mx.google.com>
References: <c0b1975b0810082359o43a3af37t57f3ff91ae966307@mail.gmail.com>
	<48edaf07.1f09360a.2905.ffff8dd4SMTPIN_ADDED@mx.google.com>
Message-ID: <c0b1975b0810090030gae68ccbg838a59c68ac068b3@mail.gmail.com>

Yes, this is the easiest way to make it work.
It is not I who designed the architecture. But I think the reason may be the
performance, the parser object contains over 1000 fields needed to be set,
it may be much faster to reuse it by resetting some fields of it.

On Thu, Oct 9, 2008 at 3:12 PM, Gavin Lambert <antlr at mirality.co.nz> wrote:

> At 19:59 9/10/2008, Ronghui Yu wrote:
>
>> As I mentioned before, I use the same lexer and parser object for parsing
>> different SQL statements.
>>
>
> Is there some particular reason why you don't want to construct a new
> instance?
>
>


-- 
===========================
Regards
Ronghui Yu
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20081009/bc5e9a86/attachment.html 

From tcurdt at vafer.org  Thu Oct  9 02:56:18 2008
From: tcurdt at vafer.org (Torsten Curdt)
Date: Thu, 9 Oct 2008 11:56:18 +0200
Subject: [antlr-interest] iterating trees and maps
Message-ID: <4FB22E3F-25B9-4CA4-BE38-DD49B5498CFC@vafer.org>

Hey there,

Hope this is the right mailing list for stringtemplate questions.  
(Wasn't obvious from the site)

I have some trouble figuring out how to output tree like structures  
and maps with stringtemplate. Could not find an example for it.

Let's say I have

     Map<Integer, String> map = new HashMap<Integer, String();
     map.put(1, "test1");
     map.put(2, "test2")

While I accessing the values for the keys should be no problem - how  
do I iterate over all the keys to display the corresponding value?
This obviously does not work.

		    <map:{ m |
		
		      <m.key> <m.value>
		
		    }; separator="\n">

Another problem. Again iteration:

     public interface Node {
       Node getParent();
     }

How would I iterate this list? What if was a tree?

cheers
--
Torsten

From tcurdt at vafer.org  Thu Oct  9 04:05:36 2008
From: tcurdt at vafer.org (Torsten Curdt)
Date: Thu, 9 Oct 2008 13:05:36 +0200
Subject: [antlr-interest] iterating trees and maps
In-Reply-To: <4FB22E3F-25B9-4CA4-BE38-DD49B5498CFC@vafer.org>
References: <4FB22E3F-25B9-4CA4-BE38-DD49B5498CFC@vafer.org>
Message-ID: <1ECDBD72-2486-4521-998F-C778DAF0F7DD@vafer.org>

Found the map iteration explained here

http://www.antlr.org/wiki/display/ST/Expressions

For iteration of lists/trees - recursively call the templates?

cheers
--
Torsten

From tcurdt at vafer.org  Thu Oct  9 05:16:21 2008
From: tcurdt at vafer.org (Torsten Curdt)
Date: Thu, 9 Oct 2008 14:16:21 +0200
Subject: [antlr-interest] indirect template references
Message-ID: <859D8483-6A0E-49F6-A293-A98F841D8195@vafer.org>

What wrong with the following indirect reference?

<attributes:{ a |
     <a:(write<typeMap.(a.type)>)>
}>

typeMap ::= [
         "int":"INTEGER",
         "string":"STRING",
         default:"OBJECT"
]

writeSTRING(a) ::= <<
   // STRING
 >>

writeINTEGER(a) ::= <<
   // INT
 >>

writeOBJECT(a) ::= <<
   // OBJECT
 >>

cheers
--
Torsten

From tcurdt at vafer.org  Thu Oct  9 05:26:54 2008
From: tcurdt at vafer.org (Torsten Curdt)
Date: Thu, 9 Oct 2008 14:26:54 +0200
Subject: [antlr-interest] indirect template references
In-Reply-To: <859D8483-6A0E-49F6-A293-A98F841D8195@vafer.org>
References: <859D8483-6A0E-49F6-A293-A98F841D8195@vafer.org>
Message-ID: <DF1C1516-B356-46E6-9F2B-BA69059CC117@vafer.org>

Seem it needs to be

	<a:(typeMap.(a.type))()>
or
	<(typeMap.(a.type))(a)>


But how do I add a prefix?

cheers
--
Torsten

On Oct 9, 2008, at 14:16, Torsten Curdt wrote:

> What wrong with the following indirect reference?
>
> <attributes:{ a |
>     <a:(write<typeMap.(a.type)>)>
> }>
>
> typeMap ::= [
>         "int":"INTEGER",
>         "string":"STRING",
>         default:"OBJECT"
> ]
>
> writeSTRING(a) ::= <<
>   // STRING
>>>
>
> writeINTEGER(a) ::= <<
>   // INT
>>>
>
> writeOBJECT(a) ::= <<
>   // OBJECT
>>>
>
> cheers
> --
> Torsten
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>


From tcurdt at vafer.org  Thu Oct  9 06:26:25 2008
From: tcurdt at vafer.org (Torsten Curdt)
Date: Thu, 9 Oct 2008 15:26:25 +0200
Subject: [antlr-interest] template parameter passing
Message-ID: <87B5826B-1FAB-495F-832D-46E9BCBEF21A@vafer.org>

Why does this fail

     <slots.keys:{ key | <reading(key, slots.(key))> }; separator="\n">
   >>

   reading(number,slots) ::= <<
   >>

while this works fine?

     <slots.keys:{ key | <reading(slots.(key))> }; separator="\n">
   >>

   reading(slots) ::= <<
   >>

The underlying object is of type

  Map<Integer, Collection<Slot>>

Any idea?

cheers
--
Torsten

From rschulz at sonic.net  Thu Oct  9 06:27:51 2008
From: rschulz at sonic.net (Randall R Schulz)
Date: Thu, 9 Oct 2008 06:27:51 -0700
Subject: [antlr-interest] How to reuse lexer object and parser object
In-Reply-To: <c0b1975b0810090030gae68ccbg838a59c68ac068b3@mail.gmail.com>
References: <c0b1975b0810082359o43a3af37t57f3ff91ae966307@mail.gmail.com>
	<48edaf07.1f09360a.2905.ffff8dd4SMTPIN_ADDED@mx.google.com>
	<c0b1975b0810090030gae68ccbg838a59c68ac068b3@mail.gmail.com>
Message-ID: <200810090627.51452.rschulz@sonic.net>

On Thursday 09 October 2008 00:30, Ronghui Yu wrote:

> On Thu, Oct 9, 2008 at 3:12 PM, Gavin Lambert <antlr at mirality.co.nz> 
wrote:
> > At 19:59 9/10/2008, Ronghui Yu wrote:
> >> As I mentioned before, I use the same lexer and parser object for
> >> parsing different SQL statements.
> >
> > Is there some particular reason why you don't want to construct a
> > new instance?
>
> Yes, this is the easiest way to make it work.
> It is not I who designed the architecture. But I think the reason may
> be the performance, the parser object contains over 1000 fields
> needed to be set, it may be much faster to reuse it by resetting some
> fields of it.

Why don't you refactor the design so that pile of state is a separate 
object? It doesn't sound like it belongs in the parser.

I like to define an interface, an "acceptor" that is passed to the tree 
parser constructor. All the AST parser does is the minimum required to 
interpret the AST it's parsing. All the specifics of what happens with 
each individual target language construct resides in the acceptor. I 
usually create a "null acceptor" that implements all the acceptor 
interface's methods but does nothing. It's the default acceptor and can 
be used as a base class for implementing acceptors that don't need to 
handle every construct in the target language.

This setup allows a given language to be processed in many different 
ways. It would also serve to separate the voluminous state you have 
from the AST parser proper.


Randall Schulz

From tcurdt at vafer.org  Thu Oct  9 07:53:09 2008
From: tcurdt at vafer.org (Torsten Curdt)
Date: Thu, 9 Oct 2008 16:53:09 +0200
Subject: [antlr-interest] template parameter passing
In-Reply-To: <87B5826B-1FAB-495F-832D-46E9BCBEF21A@vafer.org>
References: <87B5826B-1FAB-495F-832D-46E9BCBEF21A@vafer.org>
Message-ID: <45D4B945-DA94-4946-A55E-267BCECD1FE7@vafer.org>

I obviously enjoy talking to myself ;)

  <slots.keys:{ key | <reading(number=key, slots=slots.(key))> };  
separator="\n">

it is :)

cheers
--
Torsten

On Oct 9, 2008, at 15:26, Torsten Curdt wrote:

> Why does this fail
>
>     <slots.keys:{ key | <reading(key, slots.(key))> }; separator="\n">
>>>
>
>   reading(number,slots) ::= <<
>>>
>
> while this works fine?
>
>     <slots.keys:{ key | <reading(slots.(key))> }; separator="\n">
>>>
>
>   reading(slots) ::= <<
>>>
>
> The underlying object is of type
>
>  Map<Integer, Collection<Slot>>
>
> Any idea?
>
> cheers
> --
> Torsten
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>


From weberjn at gmail.com  Thu Oct  9 08:19:55 2008
From: weberjn at gmail.com (Juergen Weber)
Date: Thu, 9 Oct 2008 17:19:55 +0200
Subject: [antlr-interest] tokens - when to use?
Message-ID: <1964cfb60810090819r13cd4a82mc4c52659f2f7352d@mail.gmail.com>

Hi,

for the grammar below, when it parses the input

REMOVE NONE

there is a MismatchedSetException

When I change the NONE in r1 to NON the phrase is parsed.

Seems that the NONE is in a list of known tokens and cannot be entered
for ID, isn't it?

It surprises me, that using a TOKEN breaks a rule. It works after changing to

tokens { NONE;}
r1        :        'DELUSER' ('ALL' | NONE);


Can someony explain this behaviour? One should expect that r1 and r2
have a sufficently different prefix to make the parser know which rule
is current.

I didn't find anything on the web site nor in the book, the token
statement is not in the book, is it?
When should one use the tokens statement? Should every 'TOKEN' in
quotes be in the tokens section? This would be quite some kind of
work.

Thanks,
Juergen


grammar T;

options {
    output=template;
}


r         :         r1 | r2;


r1        :        'DELUSER' ('ALL' | 'NONE');

r2        :        'REMOVE' id;


id: ID | QUOTEDSTRING;


QUOTEDSTRING
    :
      '\''
      ( ~('\'') )*
      '\''
        ;

ID        :        ('0'..'9' | 'a'..'z'|'A'..'Z')+ ;

WS  :   (' '|'\t')+ { $channel=HIDDEN; } ;

From mail at martin-probst.com  Thu Oct  9 10:29:59 2008
From: mail at martin-probst.com (Martin Probst)
Date: Thu, 9 Oct 2008 19:29:59 +0200
Subject: [antlr-interest] tokens - when to use?
In-Reply-To: <1964cfb60810090819r13cd4a82mc4c52659f2f7352d@mail.gmail.com>
References: <1964cfb60810090819r13cd4a82mc4c52659f2f7352d@mail.gmail.com>
Message-ID: <2E3124D2-FC29-4531-89C4-70957FAE3583@martin-probst.com>

> Seems that the NONE is in a list of known tokens and cannot be entered
> for ID, isn't it?
>
> It surprises me, that using a TOKEN breaks a rule. It works after  
> changing to

This is due to the way Lexer and Parser separation works - the lexer  
produces tokens, which the parser consumes and uses to decide on which  
rule to take by their identifier. The token 'NONE' gets its own,  
distinct identifier, which is different from the identifier of your  
'ID' token.

The easiest way to work around this is to allow all tokens that are  
valid explicitly also as identifiers:

id: ID | QUOTEDSTRING | NONE | REMOVE | ...;

... which is a bit inconvenient as you'll have to add all the  
identifiers.

Your change probably wont work, your grammar will fail to recognize  
"DELUSER NONE".

HTH,
Martin

From weberjn at gmail.com  Thu Oct  9 14:32:58 2008
From: weberjn at gmail.com (Juergen Weber)
Date: Thu, 9 Oct 2008 23:32:58 +0200
Subject: [antlr-interest] antlr-interest Digest, Vol 47, Issue 9
In-Reply-To: <mailman.1.1223578801.9190.antlr-interest@antlr.org>
References: <mailman.1.1223578801.9190.antlr-interest@antlr.org>
Message-ID: <1964cfb60810091432w1ec78495o5679f075c10607b4@mail.gmail.com>

>
> From: Martin Probst <mail at martin-probst.com>
> Subject: Re: [antlr-interest] tokens - when to use?
>
> The easiest way to work around this is to allow all tokens that are
> valid explicitly also as identifiers:
>
> id: ID | QUOTEDSTRING | NONE | REMOVE | ...;
>
> ... which is a bit inconvenient as you'll have to add all the
> identifiers.
>
> Your change probably wont work, your grammar will fail to recognize
> "DELUSER NONE".
>

No, DELUSER NONE indeed works, I checked in ANTLRWorks. And having to
add lots of Tokens to id is very impractical.

Yes, I saw in the debugger that the token IDs did not match. But why
would 'NONE' get a token ID and why would ANTLR try to match the ID?

Naively I'd expect something like if match('REMOVE') then
match(('0'..'9' | 'a'..'z'|'A'..'Z')+ ). Why should rule r2 have any
relation to the 'NONE' ID?

And, please, is there a FAQ or chapter in the book which explains this
and the token section?

Thanks,
Juergen

From andersen at ontologyworks.com  Thu Oct  9 17:02:26 2008
From: andersen at ontologyworks.com (Bill Andersen)
Date: Thu, 9 Oct 2008 20:02:26 -0400
Subject: [antlr-interest] Composite tree grammar
In-Reply-To: <20081009064155.AE5021D0FC@mxout-04.mxes.net>
References: <43CD9ADA-2258-40C0-A404-77C342168550@ontologyworks.com>
	<20081009064155.AE5021D0FC@mxout-04.mxes.net>
Message-ID: <3B7B9B27-5F5F-4B02-AB09-E038D6DAF1AE@ontologyworks.com>

Gavin,

Yeah, I goofed the line numbers up.  Here are the files again.  My  
question is whether the syntax is correct.  I can't see anything  
wrong.  Thanks for any help.

grammar Foo;

options {
	output=AST;
}

tokens {
	FOO = 'foo';
	BAR = 'bar';
	ZAP;
}

start
	: FOO BAR EOF
		-> ^(ZAP FOO BAR)
	;
	
----------------------
tree grammar FooAST;

options {
	ASTLabelType=CommonTree;
	tokenVocab=Foo;
	output=AST;
}

start
	: ^(ZAP FOO BAR)
		-> ^(ZAP BAR FOO)
	;
----------------------
tree grammar Import;
import FooAST;

  options {
	ASTLabelType=CommonTree;
	tokenVocab=Foo;
	output=AST;
}

start
	: ^(ZAP FOO BAR)
		-> ^(ZAP FOO BAR)
	;


On Oct 9, 2008, at 02:41 , Gavin Lambert wrote:

> At 06:02 8/10/2008, Bill Andersen wrote:
> >I want to use grammar import on tree grammars and did the test
> >below using ANTLRWorks 1.2.  I wrote a simple grammar (Foo) to
> >output an AST, a tree grammar (FooAST) to parse the latter,
> >and another (FooASTImport) that imports FooAST and attempts to
> >override the one rule in FooAST.  Code here.  I get a syntax
> >error (in attached snapshot) but can't see where I'm going
> >wrong.  Any help appreciated.
> [...]
> >tree grammar FooAST;
> >options {
> >	tokenVocab=Foo;
> >	output=AST;
> >}
> >start
> >	: ^(ZAP FOO BAR)
> >		-> ^(ZAP BAR FOO)
> >	;
>
> Given that the attached screenshot reports an error on line 10 of  
> FooAST.g, and there doesn't appear to be that many lines in the  
> file, I suspect some kind of EOL problem.
>
> Especially since you're on MacOS.  Maybe the file is being saved  
> with Mac CR-only line endings (or some other strange construction),  
> while ANTLR requires either LF-only or CRLF.
>

Bill Andersen
Ontology Works, Inc. (www.ontologyworks.com)
3600 O'Donnell Street, Suite 600
Baltimore, MD 21224
Office: +1.410.675.1201
Cell: +1.443.858.6444
Fax: +1.410.675.1204





From rschulz at sonic.net  Thu Oct  9 17:29:55 2008
From: rschulz at sonic.net (Randall R Schulz)
Date: Thu, 9 Oct 2008 17:29:55 -0700
Subject: [antlr-interest] Java *_return Access Level
Message-ID: <200810091729.55498.rschulz@sonic.net>

Hi,

Is there any reason the many *_return classes generated when a grammar 
uses the "returns [ ... ]" construct (under Java) cannot be 
declared "private" (or, at least, "protected")?

This would have the salutary effect of excluding them from the external 
JavaDoc HTML typically generated from ANTLR-generated sources, which 
usually excludes private members.


Randall Schulz

From parrt at cs.usfca.edu  Thu Oct  9 17:32:18 2008
From: parrt at cs.usfca.edu (Terence Parr)
Date: Thu, 9 Oct 2008 17:32:18 -0700
Subject: [antlr-interest] Java *_return Access Level
In-Reply-To: <200810091729.55498.rschulz@sonic.net>
References: <200810091729.55498.rschulz@sonic.net>
Message-ID: <ED682C58-D40D-485E-B0EF-162202C25F82@cs.usfca.edu>

Hi. I had not thought of that. yes that is a problem, but you need to  
access the return structures to pull results from the start symbol  
like the tree.
Ter
On Oct 9, 2008, at 5:29 PM, Randall R Schulz wrote:

> Hi,
>
> Is there any reason the many *_return classes generated when a grammar
> uses the "returns [ ... ]" construct (under Java) cannot be
> declared "private" (or, at least, "protected")?
>
> This would have the salutary effect of excluding them from the  
> external
> JavaDoc HTML typically generated from ANTLR-generated sources, which
> usually excludes private members.
>
>
> Randall Schulz
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>


From rschulz at sonic.net  Thu Oct  9 17:43:06 2008
From: rschulz at sonic.net (Randall R Schulz)
Date: Thu, 9 Oct 2008 17:43:06 -0700
Subject: [antlr-interest] Java *_return Access Level
In-Reply-To: <ED682C58-D40D-485E-B0EF-162202C25F82@cs.usfca.edu>
References: <200810091729.55498.rschulz@sonic.net>
	<ED682C58-D40D-485E-B0EF-162202C25F82@cs.usfca.edu>
Message-ID: <200810091743.06964.rschulz@sonic.net>

On Thursday 09 October 2008 17:32, Terence Parr wrote:
> On Oct 9, 2008, at 5:29 PM, Randall R Schulz wrote:
> > Hi,
> >
> > Is there any reason the many *_return classes generated when a
> > grammar uses the "returns [ ... ]" construct (under Java) cannot be
> > declared "private" (or, at least, "protected")?
> >
> > This would have the salutary effect of excluding them from the
> > external JavaDoc HTML typically generated from ANTLR-generated
> > sources, which usually excludes private members.
> >
> >
> > Randall Schulz
>
> Hi. I had not thought of that. yes that is a problem, but you need to
> access the return structures to pull results from the start symbol
> like the tree.
> Ter

I think it's worth some elaboration of the design.

As I mentioned in a posting this morning, I channel all high-level 
parsing actions through an acceptor interface, an instance of which is 
always supplied to the (tree) parser. Thus I typically need never 
access to any of the "returns" classes generated and they're 100% 
clutter in the generated documentation.

So a couple of options suggest themselves right off:

1) (Crude) A single option that specifies the protection level of the 
generated parser code's returns classes (or structs or whatever they're 
called in other target languages).

2) (Refined) An option that enumerates which returns classes require 
public access.


Randall Schulz

From parrt at cs.usfca.edu  Thu Oct  9 17:46:05 2008
From: parrt at cs.usfca.edu (Terence Parr)
Date: Thu, 9 Oct 2008 17:46:05 -0700
Subject: [antlr-interest] Java *_return Access Level
In-Reply-To: <200810091743.06964.rschulz@sonic.net>
References: <200810091729.55498.rschulz@sonic.net>
	<ED682C58-D40D-485E-B0EF-162202C25F82@cs.usfca.edu>
	<200810091743.06964.rschulz@sonic.net>
Message-ID: <F95FFD3F-D7AF-4467-828B-81009A95C8F3@cs.usfca.edu>


On Oct 9, 2008, at 5:43 PM, Randall R Schulz wrote:
> So a couple of options suggest themselves right off:
>
> 1) (Crude) A single option that specifies the protection level of the
> generated parser code's returns classes (or structs or whatever  
> they're
> called in other target languages).
>
> 2) (Refined) An option that enumerates which returns classes require
> public access.

Or, cut/paste/munge the output template to add private keyword. Put  
the text file first in the class path and, Bob's your uncle, you're in  
heaven.  Or,Just edit the template file in place.  Should be org/antlr/ 
codegen/templates/yourlanguage/AST.stg

Ter

From cvrebert at gmail.com  Thu Oct  9 22:50:52 2008
From: cvrebert at gmail.com (Chris Rebert)
Date: Thu, 9 Oct 2008 22:50:52 -0700
Subject: [antlr-interest] opaque non-LL(*) decision error
Message-ID: <47c890dc0810092250j100fccb9iafbd67aa46361c7f@mail.gmail.com>

I'm getting a non-LL(*) decision error when trying to generate code
for my grammar, which is at http://rebertia.com/Iguana.g (it's a bit
long, otherwise I'd post it).
I've tried looking at the flowcharts in ANTLRWorks to figure out what
the problem is, but I can't make heads or tails of what the
complicated arrows are trying to indicate (or even where they supposed
to start from).
Any help or advice would be greatly appreciated.

Cheers,
Chris
-- 
Follow the path of the Iguana...
http://rebertia.com

From weberjn at gmail.com  Thu Oct  9 23:17:37 2008
From: weberjn at gmail.com (Juergen Weber)
Date: Fri, 10 Oct 2008 08:17:37 +0200
Subject: [antlr-interest] tokens - when to use?
Message-ID: <1964cfb60810092317h7da5e2cag6e3d2d72064e61a6@mail.gmail.com>

[Fixed the subject]

>
> From: Martin Probst <mail at martin-probst.com>
> Subject: Re: [antlr-interest] tokens - when to use?
>
> The easiest way to work around this is to allow all tokens that are
> valid explicitly also as identifiers:
>
> id: ID | QUOTEDSTRING | NONE | REMOVE | ...;
>
> ... which is a bit inconvenient as you'll have to add all the
> identifiers.
>
> Your change probably wont work, your grammar will fail to recognize
> "DELUSER NONE".
>

No, DELUSER NONE indeed works, I checked in ANTLRWorks. And having to
add lots of Tokens to id is very impractical.

Yes, I saw in the debugger that the token IDs did not match. But why
would 'NONE' get a token ID and why would ANTLR try to match the ID?

Naively I'd expect something like if match('REMOVE') then
match(('0'..'9' | 'a'..'z'|'A'..'Z')+ ). Why should rule r2 have any
relation to the 'NONE' ID?

And, please, is there a FAQ or chapter in the book which explains this
and the token section?

Thanks,
Juergen

From antlr at mirality.co.nz  Fri Oct 10 01:50:11 2008
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Fri, 10 Oct 2008 21:50:11 +1300
Subject: [antlr-interest] Composite tree grammar
In-Reply-To: <3B7B9B27-5F5F-4B02-AB09-E038D6DAF1AE@ontologyworks.com>
References: <43CD9ADA-2258-40C0-A404-77C342168550@ontologyworks.com>
	<20081009064155.AE5021D0FC@mxout-04.mxes.net>
	<3B7B9B27-5F5F-4B02-AB09-E038D6DAF1AE@ontologyworks.com>
Message-ID: <20081010085021.1BD2A11ECAB@www.antlr.org>

At 13:02 10/10/2008, Bill Andersen wrote:
 >Yeah, I goofed the line numbers up.  Here are the files again.
 >My question is whether the syntax is correct.  I can't see
 >anything wrong.  Thanks for any help.

I can't see anything wrong with it either.  Sorry :)


From antlr at mirality.co.nz  Fri Oct 10 01:58:22 2008
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Fri, 10 Oct 2008 21:58:22 +1300
Subject: [antlr-interest] tokens - when to use?
In-Reply-To: <1964cfb60810092317h7da5e2cag6e3d2d72064e61a6@mail.gmail.co
 m>
References: <1964cfb60810092317h7da5e2cag6e3d2d72064e61a6@mail.gmail.com>
Message-ID: <20081010085833.4EC1835229C@www.antlr.org>

At 19:17 10/10/2008, Juergen Weber wrote:
 >Yes, I saw in the debugger that the token IDs did not match.
 >But why would 'NONE' get a token ID and why would ANTLR try
 >to match the ID?

This:

r  : r1 | r2;
r1 : 'DELUSER' ('ALL' | 'NONE');
r2 : 'REMOVE' id;
id : ID | QUOTEDSTRING;

ID : ... ;
QUOTEDSTRING : ...;

is essentially identical to this:

r  : r1 | r2;
r1 : T16 (T17 | T18);
r2 : T19 id;
id : ID | QUOTEDSTRING;

T16 : 'DELUSER';
T17 : 'ALL';
T18 : 'NONE';
T19 : 'REMOVE';
ID : ... ;
QUOTEDSTRING : ...;

Once you realise that, the next step to understanding how ANTLR 
works is to look at just the lexer rules alone (forget that the 
parser rules are even there!) to see how ANTLR tokenises the 
input.  Only *after* the lexer has completely finished and 
tokenised everything does the parser start processing its first 
rule.

In general I think people (especially newcomers to ANTLR) should 
avoid using quoted literals in parser rules.  It gets you into bad 
habits and makes it too easy to forget (or not realise) how things 
work under the covers :)


From niclas at hedhman.org  Fri Oct 10 02:37:41 2008
From: niclas at hedhman.org (Niclas Hedhman)
Date: Fri, 10 Oct 2008 17:37:41 +0800
Subject: [antlr-interest] LastElement treatment...
Message-ID: <caf30e2a0810100237w5b5d6e2dpe4777b460e48daa1@mail.gmail.com>

Gang,

I am totally newbie to ANTLR and forgive me if this is a FAQ (I have
been search a lot for an answer).

In principle, I want to do;

Syntax being
 a.b.c.d -> e.f.g.h

translated to

 e.getF().getG.setH( a.getB().getC().getD() );

I have no problems with any of it, except the "setH()" part. In my AST, I have

^(MEMBER_DECLARATION member_reference
{
// removed for clarity
}
)

member_reference returns [StringTemplate member]
    : member
    {
    // a lot of stuff
    };

but if I change the AST rule to

member_reference returns [StringTemplate member]
    : (member
    {
    // a lot of stuff
    })*;

member_reference returns [StringTemplate member]
    : (member
    {
        // a lot of stuff
    })*
    member
    {
        // special last element handling
    }
    ;

I get an error;
" member is a non-unique reference"


How is one supposed to make such distinction??


Cheers
Niclas

From stoneyrh at gmail.com  Fri Oct 10 08:11:16 2008
From: stoneyrh at gmail.com (Ronghui Yu)
Date: Fri, 10 Oct 2008 23:11:16 +0800
Subject: [antlr-interest] A bug of ANTLR3.1 C Target
Message-ID: <48EF7094.6010500@gmail.com>

Hi, Jim,

Just let you know this information, it may be a bug, the index exceeds
the boundary of the vector.

Breakpoint 8, tokLT (ts=0x8428088, k=2) at src/antlr3tokenstream.c:306
306 n = 1;
2: i = <value optimized out>
1: *cts->tokens = {elements = 0x8428148, count = 5, factoryMade = 0,
elementsSize = 8, free = 0xb7301850 <antlr3VectorFree>,
del = 0xb73018e0 <antlr3VectorDel>, get = 0xb7301990 <antlr3VectorGet>,
remove = 0xb73019b0 <antrl3VectorRemove>,
clear = 0xb73017e0 <antlr3VectorClear>, add = 0xb7301b10
<antlr3VectorAdd>, set = 0xb7301b70 <antlr3VectorSet>,
size = 0xb7301be0 <antlr3VectorSize>}
(gdb) c
Continuing.

Breakpoint 9, tokLT (ts=0x8428088, k=2) at src/antlr3tokenstream.c:329
329 return (pANTLR3_COMMON_TOKEN)cts->tokens->elements[i].element;
2: i = 5
1: *cts->tokens = {elements = 0x8428148, count = 5, factoryMade = 0,
elementsSize = 8, free = 0xb7301850 <antlr3VectorFree>,
del = 0xb73018e0 <antlr3VectorDel>, get = 0xb7301990 <antlr3VectorGet>,
remove = 0xb73019b0 <antrl3VectorRemove>,
clear = 0xb73017e0 <antlr3VectorClear>, add = 0xb7301b10
<antlr3VectorAdd>, set = 0xb7301b70 <antlr3VectorSet>,
size = 0xb7301be0 <antlr3VectorSize>}
(gdb)



-- 

Regards

Ronghui Yu

================================

EMAIL:stoneyrh at 163.com <mailto:stoneyrh at 163.com>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20081010/46d5b3ac/attachment.html 

From rschulz at sonic.net  Fri Oct 10 08:39:36 2008
From: rschulz at sonic.net (Randall R Schulz)
Date: Fri, 10 Oct 2008 08:39:36 -0700
Subject: [antlr-interest] ANTLR Doxygen Config?
Message-ID: <200810100839.36514.rschulz@sonic.net>

Hi,

I really like the Doxygen HTML files on the ANTLR Web site. Once upon a 
time, I tried using Doxygen, and I don't recall ever getting it to make 
such nice output.

Is the Doxygen config file used to generate them available somewhere?


Thanks.

Randall Schulz

From tcurdt at vafer.org  Fri Oct 10 09:05:40 2008
From: tcurdt at vafer.org (Torsten Curdt)
Date: Fri, 10 Oct 2008 18:05:40 +0200
Subject: [antlr-interest] ANTLR Doxygen Config?
In-Reply-To: <200810100839.36514.rschulz@sonic.net>
References: <200810100839.36514.rschulz@sonic.net>
Message-ID: <99AC8FCD-32F4-49A5-80F3-5549A9A39D75@vafer.org>


On Oct 10, 2008, at 17:39, Randall R Schulz wrote:

> Hi,
>
> I really like the Doxygen HTML files on the ANTLR Web site.

Hm ...I was lately thinking the exact opposite :)

In fact I was hoping to find some javadocs online somwhere. Anyone  
know if there are any?

cheers
--
Torsten

From rschulz at sonic.net  Fri Oct 10 09:28:27 2008
From: rschulz at sonic.net (Randall R Schulz)
Date: Fri, 10 Oct 2008 09:28:27 -0700
Subject: [antlr-interest] ANTLR Doxygen Config?
In-Reply-To: <99AC8FCD-32F4-49A5-80F3-5549A9A39D75@vafer.org>
References: <200810100839.36514.rschulz@sonic.net>
	<99AC8FCD-32F4-49A5-80F3-5549A9A39D75@vafer.org>
Message-ID: <200810100928.27748.rschulz@sonic.net>

On Friday 10 October 2008 09:05, Torsten Curdt wrote:
> On Oct 10, 2008, at 17:39, Randall R Schulz wrote:
> > Hi,
> >
> > I really like the Doxygen HTML files on the ANTLR Web site.
>
> Hm ...I was lately thinking the exact opposite :)

Well, I wasn't necessarily thinking instead of, but rather in addition 
to (the JavaDoc HTML). What I most like about the Doxygen HTML are the 
inheritance and collaboration diagrams. In many cases, this saves me 
from having to generate such things in SimpleUML (in IDEA).

As for ANTLR JavaDoc HTML, I generate it directly into my project's own 
JavaDocs (it's strictly internal), so I already have them.


> In fact I was hoping to find some javadocs online somwhere. Anyone
> know if there are any?

Since the source is available, it's pretty easy to create your own.


> cheers
> --
> Torsten


Randall Schulz

From tcurdt at vafer.org  Fri Oct 10 10:33:45 2008
From: tcurdt at vafer.org (Torsten Curdt)
Date: Fri, 10 Oct 2008 19:33:45 +0200
Subject: [antlr-interest] ANTLR Doxygen Config?
In-Reply-To: <200810100928.27748.rschulz@sonic.net>
References: <200810100839.36514.rschulz@sonic.net>
	<99AC8FCD-32F4-49A5-80F3-5549A9A39D75@vafer.org>
	<200810100928.27748.rschulz@sonic.net>
Message-ID: <86C803F4-B2AB-483E-ACAD-F0821ABE5513@vafer.org>

> Well, I wasn't necessarily thinking instead of, but rather in addition
> to (the JavaDoc HTML).

Me neither. Both would be great.

> What I most like about the Doxygen HTML are the
> inheritance and collaboration diagrams.

Yes, they are indeed quite nice.

> In many cases, this saves me
> from having to generate such things in SimpleUML (in IDEA).

Usually the type hierarchy is enough for me.

> As for ANTLR JavaDoc HTML, I generate it directly into my project's  
> own
> JavaDocs (it's strictly internal), so I already have them.

Nice for you :)

>> In fact I was hoping to find some javadocs online somwhere. Anyone
>> know if there are any?
>
> Since the source is available, it's pretty easy to create your own.

Yeah ... one can do that. But it's inconvenient.

Pretty much very java project on the planet has it's javadocs  
published :)

cheers
--
Torsten

From parrt at cs.usfca.edu  Fri Oct 10 10:50:59 2008
From: parrt at cs.usfca.edu (Terence Parr)
Date: Fri, 10 Oct 2008 10:50:59 -0700
Subject: [antlr-interest] Composite tree grammar
In-Reply-To: <3B7B9B27-5F5F-4B02-AB09-E038D6DAF1AE@ontologyworks.com>
References: <43CD9ADA-2258-40C0-A404-77C342168550@ontologyworks.com>
	<20081009064155.AE5021D0FC@mxout-04.mxes.net>
	<3B7B9B27-5F5F-4B02-AB09-E038D6DAF1AE@ontologyworks.com>
Message-ID: <5D2D1968-B3BD-44B6-8ED2-7FAB79226E97@cs.usfca.edu>

Hi guys...i'm working like crazy on the design patterns book; sorry  
for the miserable response time. Added a bug:

http://www.antlr.org:8888/browse/ANTLR-340

Ter

From rschulz at sonic.net  Fri Oct 10 10:54:38 2008
From: rschulz at sonic.net (Randall R Schulz)
Date: Fri, 10 Oct 2008 10:54:38 -0700
Subject: [antlr-interest] ANTLR Doxygen Config?
In-Reply-To: <86C803F4-B2AB-483E-ACAD-F0821ABE5513@vafer.org>
References: <200810100839.36514.rschulz@sonic.net>
	<200810100928.27748.rschulz@sonic.net>
	<86C803F4-B2AB-483E-ACAD-F0821ABE5513@vafer.org>
Message-ID: <200810101054.39042.rschulz@sonic.net>

On Friday 10 October 2008 10:33, Torsten Curdt wrote:
> ...
> >
> > Since the source is available, it's pretty easy to create your own.
>
> Yeah ... one can do that. But it's inconvenient.

Well, I just configure it into my Ant build.xml. It's "set and forget," 
really.


> Pretty much very java project on the planet has it's javadocs
> published :)

Pretty much. 'Cept for the ones that publish Doxygen docs...


> cheers
> --
> Torsten


Randall Schulz

From jimi at temporal-wave.com  Fri Oct 10 12:08:19 2008
From: jimi at temporal-wave.com (Jim Idle)
Date: Fri, 10 Oct 2008 12:08:19 -0700
Subject: [antlr-interest] How to reuse lexer object and parser object
In-Reply-To: <c0b1975b0810082359o43a3af37t57f3ff91ae966307@mail.gmail.com>
References: <c0b1975b0810082359o43a3af37t57f3ff91ae966307@mail.gmail.com>
Message-ID: <1223665699.4226.8.camel@jimi.temporal-wave.com>

On Thu, 2008-10-09 at 14:59 +0800, Ronghui Yu wrote:
> Hi, Jim,
>  
> Sorry to bother you again.
> As I mentioned before, I use the same lexer and parser object for
> parsing different SQL statements.
> When using ANTLR3.0.1, everything works fine, but when upgrade to
> ANTLR3.1, I found that it is necessary to save the
> ctx->pParser->rec->state->tokenNames before calling setTokenStream,
> and restore it to the previous value after.
>  
> But we found that it is not enough yet. Sometimes, it needs to set
> ctx->pParser->rec->state->tokFactory to NULL, otherwise, it will
> result in crash. What I do now is closing the tokFactory and setting
> it to NULL.
>  
> The problem is, I am not sure if there are other fields I need to
> reset, or what values I should set them to.
> Could you give me some advices?
> Or if possible, you may provide an API for doing this job.


I will have to look in to the code, but also please try the 3.1.1 code
as I think I corrected at least one issue for that. However, creating
the objects doesn't really take any time either - it isn't very costly
to allocate the memory and fill in  the method addresses.

Jim
>  
> Thanks a lot.
> 
> 
> -- 
> ===========================
> Regards
> Ronghui Yu
> 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20081010/ce26bf3b/attachment.html 

From java.nagila at gmail.com  Fri Oct 10 12:42:51 2008
From: java.nagila at gmail.com (java nagila)
Date: Fri, 10 Oct 2008 22:42:51 +0300
Subject: [antlr-interest] my code is marked with start/end tokens
Message-ID: <d19811c70810101242k7e44f8f3l465e8954b1b082df@mail.gmail.com>

hi all,
i'm new to antlr, and my first real language has this thing where the code
could be divided to many parts in arbitrary text.

here is an example input, where the code (java in this case) comes in parts
and marked by start/end tokens ( '(|' and  '|)' ):

********
bla bla bla
********
(|
import foo.bar.*;
|)
bla etc.
(| import com.example.*; |)
comment comment arbitrary text bla bla
(|
/* My Class C */
class C {
    // one line comment
}
|)
bla bla bla

i've tried many way to hide the text around the actual code, a-la the
non-greedy comment rule, but couldn't find the right way.

note that:
    1. i _really_ don't care what's outside of the '(|' .* '|)' code blocks.
    it could be another language with my code in a comment, for all i
care. (e.g. "<a><b><!-- (| class C {} |) --></b></a>").
    this also means i'd like the lexer to hide it and not gather it in a
parser rule.

    2. my code could be divided to these parts only in well known places
(parser rules), so, in contrast to #1 above, i really care about where the
'(|' '|)' tokens are (and so i guess that my parser should be aware of
them).
    if my language was java, as in the example above, i'd allow only
importDeclarations or classDefinitions between the start/end tokens.

    3. other than that, my language is quite normal - i hide WS as usual, i
have only one line comments and multiple files are loaded with an 'import'
(and not an '#include'). oh, i have #IFDEFs, but they can't span over more
than one '(|...|)' part.

help anyone?

thanks, asaf :-)
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20081010/b9a17fbd/attachment.html 

From gary.rosales at neovera.com  Fri Oct 10 12:45:38 2008
From: gary.rosales at neovera.com (Gary Rosales)
Date: Fri, 10 Oct 2008 15:45:38 -0400
Subject: [antlr-interest] Would antlr be suited for this task?
Message-ID: <002701c92b10$c57a5690$506f03b0$@rosales@neovera.com>

Hi, 

 

I am a newbie with ANTLR but I have a question that it's been itching me to
ask for a while. I am in a project where we are migrating a bunch of c code
that has embedded SQL (E/SQL from Informix) to c code that has also embedded
SQL but in another format (Pro*C from Oracle). The Informix c code (ec
files) is full of non-ANSI 92 SQL that needs to be converted, this code is
inside strcpy, sprintf, strcat, and so on. For instance, code fragments
like:

 

strcpy(sqlstr, "select x, y, z from t1, outer t2, outer t3 where t1_t2.id =
t2_id  and t2_t3.id = t3.id");

 

would be translated to 

 

strcpy(sqlstr, "select x,y,z from t1 left join t2 on t1_t2.id = t2_id  left
join t3 on t2_t3 = t3.id ");

 

and 

 

  strcpy(UpdSqlStr, "UPDATE ");

  strcat(UpdSqlStr, HELLO);

  strcat(UpdSqlStr, " SET (");

  strcat(UpdSqlStr, "foo,");

  strcat(UpdSqlStr, "bar");

  strcat(UpdSqlStr, ") = (");

 

  strcpy(sqlcomstr, UpdSqlStr);

  strcat(sqlcomstr, ":p_var,");             

  strcat(sqlcomstr, ":p_var");        

  strcat(sqlcomstr, " WHERE hello.name = :p_var");

 

would be :

 

  strcpy(UpdSqlStr, "UPDATE ");

  strcat(UpdSqlStr, HELLO);

  strcat(UpdSqlStr, " SET foo =:p_var, bar=:p_var ");

  strcat(UpdSqlStr, " WHERE hello.name =:p_var ");

 

 

there are many fragments like this (but they are longer and more complex).  

There is already a tool that does this that it's provided by Oracle, but
it's incomplete because it doesn't work on cases like the example I just
gave. So we do use the tool; the tool takes care of other embedded sql that
it's not within strings variables but, would it be possible to create a
compiler to transform the dynamic sql that it's generated in the variables.
There are many files that use definitions on other files (macros and such)
that are used  for the business logic in the dynamic sql, so the compiler
would have to link the files and do semantic checking. Is this feasible? The
approach we have right now is using a custom framework with match and
replace files for the source, it's quite tedious and I 'd love to hear of a
better way to do this. I would think it's possible but I'd rather ask people
who have much more experienced than me with compiler creation and ANTLR.

 

Thank you for your help.

 

Gary Rosales

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20081010/eb73456b/attachment.html 

From jimi at temporal-wave.com  Fri Oct 10 12:56:37 2008
From: jimi at temporal-wave.com (Jim Idle)
Date: Fri, 10 Oct 2008 12:56:37 -0700
Subject: [antlr-interest] A bug of ANTLR3.1 C Target
In-Reply-To: <48EF7094.6010500@gmail.com>
References: <48EF7094.6010500@gmail.com>
Message-ID: <1223668597.4226.23.camel@jimi.temporal-wave.com>

On Fri, 2008-10-10 at 23:11 +0800, Ronghui Yu wrote:

> Hi, Jim,
> 
> Just let you know this information, it may be a bug, the index exceeds
> the boundary of the vector.



Is this 3.1 or 3.1.1? I suspect that this is something to do with the
reset() you are doing to be honest.

Jim



> 
> Breakpoint 8, tokLT (ts=0x8428088, k=2) at src/antlr3tokenstream.c:306
> 306             n       = 1;
> 2: i = <value optimized out>
> 1: *cts->tokens = {elements = 0x8428148, count = 5, factoryMade = 0,
> elementsSize = 8, free = 0xb7301850 <antlr3VectorFree>,
>   del = 0xb73018e0 <antlr3VectorDel>, get = 0xb7301990
> <antlr3VectorGet>, remove = 0xb73019b0 <antrl3VectorRemove>,
>   clear = 0xb73017e0 <antlr3VectorClear>, add = 0xb7301b10
> <antlr3VectorAdd>, set = 0xb7301b70 <antlr3VectorSet>,
>   size = 0xb7301be0 <antlr3VectorSize>}
> (gdb) c
> Continuing.
> 
> Breakpoint 9, tokLT (ts=0x8428088, k=2) at src/antlr3tokenstream.c:329
> 329             return
> (pANTLR3_COMMON_TOKEN)cts->tokens->elements[i].element;
> 2: i = 5
> 1: *cts->tokens = {elements = 0x8428148, count = 5, factoryMade = 0,
> elementsSize = 8, free = 0xb7301850 <antlr3VectorFree>,
>   del = 0xb73018e0 <antlr3VectorDel>, get = 0xb7301990
> <antlr3VectorGet>, remove = 0xb73019b0 <antrl3VectorRemove>,
>   clear = 0xb73017e0 <antlr3VectorClear>, add = 0xb7301b10
> <antlr3VectorAdd>, set = 0xb7301b70 <antlr3VectorSet>,
>   size = 0xb7301be0 <antlr3VectorSize>}
> (gdb)
> 
> 
> 
> 
> -- 
> 
> 
> Regards
> 
> Ronghui Yu
> 
> ================================
> 
> EMAIL:stoneyrh at 163.com
> 
> 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20081010/fa58ac72/attachment.html 

From jimi at temporal-wave.com  Fri Oct 10 13:00:12 2008
From: jimi at temporal-wave.com (Jim Idle)
Date: Fri, 10 Oct 2008 13:00:12 -0700
Subject: [antlr-interest] my code is marked with start/end tokens
In-Reply-To: <d19811c70810101242k7e44f8f3l465e8954b1b082df@mail.gmail.com>
References: <d19811c70810101242k7e44f8f3l465e8954b1b082df@mail.gmail.com>
Message-ID: <1223668812.4226.25.camel@jimi.temporal-wave.com>

On Fri, 2008-10-10 at 22:42 +0300, java nagila wrote:
> hi all,
> 
> 
> 
> i'm new to antlr, and my first real language has this thing where the
> code could be divided to many parts in arbitrary text.
> 
> 
> here is an example input, where the code (java in this case) comes in
> parts and marked by start/end tokens ( '(|' and  '|)' ):



Look at the island grammar example for how to do this. Download the
examples from the download page on the web site.


Jim
> 
> 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20081010/fadcc739/attachment.html 

From java.nagila at gmail.com  Fri Oct 10 13:09:09 2008
From: java.nagila at gmail.com (java nagila)
Date: Fri, 10 Oct 2008 23:09:09 +0300
Subject: [antlr-interest] my code is marked with start/end tokens
In-Reply-To: <1223668812.4226.25.camel@jimi.temporal-wave.com>
References: <d19811c70810101242k7e44f8f3l465e8954b1b082df@mail.gmail.com>
	<1223668812.4226.25.camel@jimi.temporal-wave.com>
Message-ID: <d19811c70810101309p2723ce9cx1c3036cc170d7f44@mail.gmail.com>

Thanks for the quick reply. i'll have a look. asaf :-)

On Fri, Oct 10, 2008 at 11:00 PM, Jim Idle <jimi at temporal-wave.com> wrote:

>  On Fri, 2008-10-10 at 22:42 +0300, java nagila wrote:
>
> hi all,
>
>
>
>  i'm new to antlr, and my first real language has this thing where the
> code could be divided to many parts in arbitrary text.
>
>
>
>  here is an example input, where the code (java in this case) comes in
> parts and marked by start/end tokens ( '(|' and  '|)' ):
>
>
>
> Look at the island grammar example for how to do this. Download the
> examples from the download page on the web site.
>
> Jim
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20081010/8b10268f/attachment.html 

From rschulz at sonic.net  Fri Oct 10 13:16:10 2008
From: rschulz at sonic.net (Randall R Schulz)
Date: Fri, 10 Oct 2008 13:16:10 -0700
Subject: [antlr-interest] Would antlr be suited for this task?
In-Reply-To: <002701c92b10$c57a5690$506f03b0$@rosales@neovera.com>
References: <002701c92b10$c57a5690$506f03b0$@rosales@neovera.com>
Message-ID: <200810101316.10335.rschulz@sonic.net>

On Friday 10 October 2008 12:45, Gary Rosales wrote:
> Hi,
>
>
>
> I am a newbie with ANTLR but I have a question that it's been itching
> me to ask for a while. I am in a project where we are migrating a
> bunch of c code that has embedded SQL (E/SQL from Informix) to c code
> that has also embedded SQL but in another format (Pro*C from Oracle).
> The Informix c code (ec files) is full of non-ANSI 92 SQL that needs
> to be converted, this code is inside strcpy, sprintf, strcat, and so
> on. For instance, code fragments like:
>
> ...
>
> there are many fragments like this (but they are longer and more
> complex).

I surely hope that as part of your conversion you turn those into 
PreparedStatement instances!


> There is already a tool that does this that it's provided by Oracle,
> but it's incomplete because it doesn't work on cases like the example
> I just gave. So we do use the tool; the tool takes care of other
> embedded sql that it's not within strings variables but, would it be
> possible to create a compiler to transform the dynamic sql that it's
> generated in the variables. There are many files that use definitions
> on other files (macros and such) that are used  for the business
> logic in the dynamic sql, so the compiler would have to link the
> files and do semantic checking. Is this feasible? The approach we
> have right now is using a custom framework with match and replace
> files for the source, it's quite tedious and I 'd love to hear of a
> better way to do this. I would think it's possible but I'd rather ask
> people who have much more experienced than me with compiler creation
> and ANTLR.

I have not actually used this feature, but JetBrains (formerly 
IntellifJ) IDEA has something called "structural search and replace" 
which may do what you need. I suggest you search on their site for that 
feature and, perhaps, ask in the IntelliJ IDEA Community Forum whether 
this can be done:

- IntelliJ IDEA Forums
  <http://www.intellij.net/forums/category.jspa?categoryID=8>

- IDEA Community Forum (general questions)
  <http://www.intellij.net/forums/forum.jspa?forumID=27>


I know IDEA isn't cheap, but my guess it buying, installing and learning 
to use it enough for this task would be cheaper than the cost an 
engineer's time required to create a purpose-built solution.


> Thank you for your help.
>
> Gary Rosales


Randall Schulz

From antlr at jazillian.com  Fri Oct 10 14:01:51 2008
From: antlr at jazillian.com (Andy Tripp)
Date: Fri, 10 Oct 2008 17:01:51 -0400
Subject: [antlr-interest] Would antlr be suited for this task?
In-Reply-To: <002701c92b10$c57a5690$506f03b0$@rosales@neovera.com>
References: <002701c92b10$c57a5690$506f03b0$@rosales@neovera.com>
Message-ID: <48EFC2BF.4010009@jazillian.com>

Gary,

I don't think ANTLR can help you much with this.
If you do want to parse this input and create an AST
(and perhaps then walk the AST), then ANTLR is the best tool for that
(assuming there isn't an already-existing ANTLR-like tool that parses
E/SQL).

But I think 99% or more of your work will be in doing that mapping from
E/SQL to Pro*C. There's no tool that's going to make that easier.

Take your strcpy/strcat code as an example. The parsing is pretty trivial -
you parse a strcpy() call, a strcat() call, and perhaps a few calls.
That might be a day or two's work at most, using ANTLR or not.
All the work is then in figuring out how to map those calls to
their replacements. The issue there is how general it needs to be.
For example, if you just look for a single strcpy() call followed by zero or
more strcat() calls, that's easy. But what if you have
the following code:

strcpy(UpdSqlStr, "UPDATE" " ");   // 2 strings instead of 1
strcpy(somethingElse, "whatever");  // an completely unrelated statement
MY_STRCAT(UpdSqlStr, HELLO);   // MY_STRCAT is some macro or your own strcpy() wrapper
sprintf(UpdSqlStr, "%s SET (", UpdSqlStr);  // sprintf instead of strcat
strcat(UpdSqlStr, foo());      // the arg is not just a fixed string
if (a) {                       // control flow analysis needed to figure out "bar" vs. "bar2"
 strcat(UpdSqlStr, "bar");
} else {
 strcat(UpdSqlStr, "bar2");
}

...you get the idea. This looks like a case where automating it might look easy,
but end up taking far longer than doing it by hand.

That's my two cents,
Andy

Gary Rosales wrote:
> Hi,
> 
>  
> 
> I am a newbie with ANTLR but I have a question that it?s been itching me 
> to ask for a while. I am in a project where we are migrating a bunch of 
> c code that has embedded SQL (E/SQL from Informix) to c code that has 
> also embedded SQL but in another format (Pro*C from Oracle). The 
> Informix c code (ec files) is full of non-ANSI 92 SQL that needs to be 
> converted, this code is inside strcpy, sprintf, strcat, and so on. For 
> instance, code fragments like:
> 
>  
> 
> strcpy(sqlstr, ?select x, y, z from t1, outer t2, outer t3 where 
> t1_t2.id = t2_id  and t2_t3.id = t3.id?);
> 
>  
> 
> would be translated to
> 
>  
> 
> strcpy(sqlstr, ?select x,y,z from t1 left join t2 on t1_t2.id = t2_id 
>  left join t3 on t2_t3 = t3.id ?);
> 
>  
> 
> and
> 
>  
> 
>   strcpy(UpdSqlStr, "UPDATE ");
> 
>   strcat(UpdSqlStr, HELLO);
> 
>   strcat(UpdSqlStr, " SET (");
> 
>   strcat(UpdSqlStr, "foo,");
> 
>   strcat(UpdSqlStr, "bar");
> 
>   strcat(UpdSqlStr, ") = (");
> 
>  
> 
>   strcpy(sqlcomstr, UpdSqlStr);
> 
>   strcat(sqlcomstr, ":p_var,");            
> 
>   strcat(sqlcomstr, ?:p_var?);       
> 
>   strcat(sqlcomstr, " WHERE hello.name = :p_var");
> 
>  
> 
> would be :
> 
>  
> 
>   strcpy(UpdSqlStr, "UPDATE ");
> 
>   strcat(UpdSqlStr, HELLO);
> 
>   strcat(UpdSqlStr, " SET foo =:p_var, bar=:p_var ?);
> 
>   strcat(_UpdSqlStr, _" WHERE hello.name =:p_var ?);__
> 
>  
> 
>  
> 
> there are many fragments like this (but they are longer and more complex).  
> 
> There is already a tool that does this that it?s provided by Oracle, but 
> it?s incomplete because it doesn?t work on cases like the example I just 
> gave. So we do use the tool; the tool takes care of other embedded sql 
> that it?s not within strings variables but, would it be possible to 
> create a compiler to transform the dynamic sql that it?s generated in 
> the variables. There are many files that use definitions on other files 
> (macros and such) that are used  for the business logic in the dynamic 
> sql, so the compiler would have to link the files and do semantic 
> checking. Is this feasible? The approach we have right now is using a 
> custom framework with match and replace files for the source, it?s quite 
> tedious and I ?d love to hear of a better way to do this. I would think 
> it?s possible but I?d rather ask people who have much more experienced 
> than me with compiler creation and ANTLR.
> 
>  
> 
> Thank you for your help.
> 
>  
> 
> Gary Rosales
> 
> 
> ------------------------------------------------------------------------
> 
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
> 


From antlr at jazillian.com  Fri Oct 10 14:08:55 2008
From: antlr at jazillian.com (Andy Tripp)
Date: Fri, 10 Oct 2008 17:08:55 -0400
Subject: [antlr-interest] ANTLR Doxygen Config?
In-Reply-To: <99AC8FCD-32F4-49A5-80F3-5549A9A39D75@vafer.org>
References: <200810100839.36514.rschulz@sonic.net>
	<99AC8FCD-32F4-49A5-80F3-5549A9A39D75@vafer.org>
Message-ID: <48EFC467.9050909@jazillian.com>

The Javadoc is missing from the ANTLR website.
See this: http://www.antlr.org/pipermail/antlr-interest/2008-August/029673.html
for details and how to run javadoc yourself.

After using Javadoc for so long, Doxygen is like a breath of fresh pure oxygen...
it makes me dizzy ;)

Andy

Torsten Curdt wrote:
> On Oct 10, 2008, at 17:39, Randall R Schulz wrote:
> 
>> Hi,
>>
>> I really like the Doxygen HTML files on the ANTLR Web site.
> 
> Hm ...I was lately thinking the exact opposite :)
> 
> In fact I was hoping to find some javadocs online somwhere. Anyone  
> know if there are any?
> 
> cheers
> --
> Torsten
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
> 


From parrt at cs.usfca.edu  Fri Oct 10 14:22:04 2008
From: parrt at cs.usfca.edu (Terence Parr)
Date: Fri, 10 Oct 2008 14:22:04 -0700
Subject: [antlr-interest] ANTLR Doxygen Config?
In-Reply-To: <48EFC467.9050909@jazillian.com>
References: <200810100839.36514.rschulz@sonic.net>
	<99AC8FCD-32F4-49A5-80F3-5549A9A39D75@vafer.org>
	<48EFC467.9050909@jazillian.com>
Message-ID: <2BA05F2C-3BFC-4798-B6E4-4B26B06723C8@cs.usfca.edu>


On Oct 10, 2008, at 2:08 PM, Andy Tripp wrote:

> The Javadoc is missing from the ANTLR website.

We use doxygen in lieu; the doc isn't missing per se

http://www.antlr.org/api/Java/index.html

Ter

From gary.rosales at neovera.com  Fri Oct 10 14:27:37 2008
From: gary.rosales at neovera.com (Gary Rosales)
Date: Fri, 10 Oct 2008 17:27:37 -0400
Subject: [antlr-interest] Would antlr be suited for this task?
In-Reply-To: <48EFC2BF.4010009@jazillian.com>
References: <002701c92b10$c57a5690$506f03b0$@rosales@neovera.com>
	<48EFC2BF.4010009@jazillian.com>
Message-ID: <005401c92b1f$046358d0$0d2a0a70$@rosales@neovera.com>

Hi Andy,

Yeap, I get what you are saying about the complexity of automating this. I
just wanted to see if ANTLR would be a good tool to tackle this, but I guess
it isn't. I'll still try to automate some simple stmts using regex, but the
complex parts will have to be transformed manually.

Thanks for your 2 cents!

Gary

-----Original Message-----
From: Andy Tripp [mailto:antlr at jazillian.com] 
Sent: Friday, October 10, 2008 5:02 PM
To: Gary Rosales
Cc: antlr-interest at antlr.org
Subject: Re: [antlr-interest] Would antlr be suited for this task?

Gary,

I don't think ANTLR can help you much with this.
If you do want to parse this input and create an AST
(and perhaps then walk the AST), then ANTLR is the best tool for that
(assuming there isn't an already-existing ANTLR-like tool that parses
E/SQL).

But I think 99% or more of your work will be in doing that mapping from
E/SQL to Pro*C. There's no tool that's going to make that easier.

Take your strcpy/strcat code as an example. The parsing is pretty trivial -
you parse a strcpy() call, a strcat() call, and perhaps a few calls.
That might be a day or two's work at most, using ANTLR or not.
All the work is then in figuring out how to map those calls to
their replacements. The issue there is how general it needs to be.
For example, if you just look for a single strcpy() call followed by zero or
more strcat() calls, that's easy. But what if you have
the following code:

strcpy(UpdSqlStr, "UPDATE" " ");   // 2 strings instead of 1
strcpy(somethingElse, "whatever");  // an completely unrelated statement
MY_STRCAT(UpdSqlStr, HELLO);   // MY_STRCAT is some macro or your own
strcpy() wrapper
sprintf(UpdSqlStr, "%s SET (", UpdSqlStr);  // sprintf instead of strcat
strcat(UpdSqlStr, foo());      // the arg is not just a fixed string
if (a) {                       // control flow analysis needed to figure out
"bar" vs. "bar2"
 strcat(UpdSqlStr, "bar");
} else {
 strcat(UpdSqlStr, "bar2");
}

...you get the idea. This looks like a case where automating it might look
easy,
but end up taking far longer than doing it by hand.

That's my two cents,
Andy

Gary Rosales wrote:
> Hi,
> 
>  
> 
> I am a newbie with ANTLR but I have a question that it's been itching me 
> to ask for a while. I am in a project where we are migrating a bunch of 
> c code that has embedded SQL (E/SQL from Informix) to c code that has 
> also embedded SQL but in another format (Pro*C from Oracle). The 
> Informix c code (ec files) is full of non-ANSI 92 SQL that needs to be 
> converted, this code is inside strcpy, sprintf, strcat, and so on. For 
> instance, code fragments like:
> 
>  
> 
> strcpy(sqlstr, "select x, y, z from t1, outer t2, outer t3 where 
> t1_t2.id = t2_id  and t2_t3.id = t3.id");
> 
>  
> 
> would be translated to
> 
>  
> 
> strcpy(sqlstr, "select x,y,z from t1 left join t2 on t1_t2.id = t2_id 
>  left join t3 on t2_t3 = t3.id ");
> 
>  
> 
> and
> 
>  
> 
>   strcpy(UpdSqlStr, "UPDATE ");
> 
>   strcat(UpdSqlStr, HELLO);
> 
>   strcat(UpdSqlStr, " SET (");
> 
>   strcat(UpdSqlStr, "foo,");
> 
>   strcat(UpdSqlStr, "bar");
> 
>   strcat(UpdSqlStr, ") = (");
> 
>  
> 
>   strcpy(sqlcomstr, UpdSqlStr);
> 
>   strcat(sqlcomstr, ":p_var,");            
> 
>   strcat(sqlcomstr, ":p_var");       
> 
>   strcat(sqlcomstr, " WHERE hello.name = :p_var");
> 
>  
> 
> would be :
> 
>  
> 
>   strcpy(UpdSqlStr, "UPDATE ");
> 
>   strcat(UpdSqlStr, HELLO);
> 
>   strcat(UpdSqlStr, " SET foo =:p_var, bar=:p_var ");
> 
>   strcat(_UpdSqlStr, _" WHERE hello.name =:p_var ");__
> 
>  
> 
>  
> 
> there are many fragments like this (but they are longer and more complex).

> 
> There is already a tool that does this that it's provided by Oracle, but 
> it's incomplete because it doesn't work on cases like the example I just 
> gave. So we do use the tool; the tool takes care of other embedded sql 
> that it's not within strings variables but, would it be possible to 
> create a compiler to transform the dynamic sql that it's generated in 
> the variables. There are many files that use definitions on other files 
> (macros and such) that are used  for the business logic in the dynamic 
> sql, so the compiler would have to link the files and do semantic 
> checking. Is this feasible? The approach we have right now is using a 
> custom framework with match and replace files for the source, it's quite 
> tedious and I 'd love to hear of a better way to do this. I would think 
> it's possible but I'd rather ask people who have much more experienced 
> than me with compiler creation and ANTLR.
> 
>  
> 
> Thank you for your help.
> 
>  
> 
> Gary Rosales
> 
> 
> ------------------------------------------------------------------------
> 
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
http://www.antlr.org/mailman/options/antlr-interest/your-email-address
> 


From rschulz at sonic.net  Fri Oct 10 14:29:05 2008
From: rschulz at sonic.net (Randall R Schulz)
Date: Fri, 10 Oct 2008 14:29:05 -0700
Subject: [antlr-interest] ANTLR Doxygen Config?
In-Reply-To: <2BA05F2C-3BFC-4798-B6E4-4B26B06723C8@cs.usfca.edu>
References: <200810100839.36514.rschulz@sonic.net>
	<48EFC467.9050909@jazillian.com>
	<2BA05F2C-3BFC-4798-B6E4-4B26B06723C8@cs.usfca.edu>
Message-ID: <200810101429.05652.rschulz@sonic.net>

On Friday 10 October 2008 14:22, Terence Parr wrote:
> On Oct 10, 2008, at 2:08 PM, Andy Tripp wrote:
> > The Javadoc is missing from the ANTLR website.
>
> We use doxygen in lieu; the doc isn't missing per se
>
> http://www.antlr.org/api/Java/index.html

Any chance of getting my original question answered?

Is your Doxygen config file available??


> Ter


Randall Schulz

From parrt at cs.usfca.edu  Fri Oct 10 14:31:45 2008
From: parrt at cs.usfca.edu (Terence Parr)
Date: Fri, 10 Oct 2008 14:31:45 -0700
Subject: [antlr-interest] ANTLR Doxygen Config?
In-Reply-To: <200810101429.05652.rschulz@sonic.net>
References: <200810100839.36514.rschulz@sonic.net>
	<48EFC467.9050909@jazillian.com>
	<2BA05F2C-3BFC-4798-B6E4-4B26B06723C8@cs.usfca.edu>
	<200810101429.05652.rschulz@sonic.net>
Message-ID: <065F93CB-0032-4FB8-80C0-9C02479F2B3A@cs.usfca.edu>

they aren't in the distributions? I should have them in the runtime/ 
language/doxyfile
Ter
On Oct 10, 2008, at 2:29 PM, Randall R Schulz wrote:

> On Friday 10 October 2008 14:22, Terence Parr wrote:
>> On Oct 10, 2008, at 2:08 PM, Andy Tripp wrote:
>>> The Javadoc is missing from the ANTLR website.
>>
>> We use doxygen in lieu; the doc isn't missing per se
>>
>> http://www.antlr.org/api/Java/index.html
>
> Any chance of getting my original question answered?
>
> Is your Doxygen config file available??
>
>
>> Ter
>
>
> Randall Schulz
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>


From jimi at temporal-wave.com  Fri Oct 10 14:33:23 2008
From: jimi at temporal-wave.com (Jim Idle)
Date: Fri, 10 Oct 2008 14:33:23 -0700
Subject: [antlr-interest] ANTLR Doxygen Config?
In-Reply-To: <200810101429.05652.rschulz@sonic.net>
References: <200810100839.36514.rschulz@sonic.net>
	<48EFC467.9050909@jazillian.com>
	<2BA05F2C-3BFC-4798-B6E4-4B26B06723C8@cs.usfca.edu>
	<200810101429.05652.rschulz@sonic.net>
Message-ID: <1223674403.4885.9.camel@jimi.temporal-wave.com>

On Fri, 2008-10-10 at 14:29 -0700, Randall R Schulz wrote:

> On Friday 10 October 2008 14:22, Terence Parr wrote:
> > On Oct 10, 2008, at 2:08 PM, Andy Tripp wrote:
> > > The Javadoc is missing from the ANTLR website.
> >
> > We use doxygen in lieu; the doc isn't missing per se
> >
> > http://www.antlr.org/api/Java/index.html
> 
> Any chance of getting my original question answered?
> 
> Is your Doxygen config file available??


It is in the source code, so just download it from fisheye.

http://fisheye2.atlassian.com/browse/antlr/runtime/Java
http://fisheye2.atlassian.com/browse/antlr/runtime/C

etc. Always look here before posting, you can save a lot of time for
everyone.

Jim

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20081010/4901bdf8/attachment.html 

From rschulz at sonic.net  Fri Oct 10 14:53:18 2008
From: rschulz at sonic.net (Randall R Schulz)
Date: Fri, 10 Oct 2008 14:53:18 -0700
Subject: [antlr-interest] ANTLR Doxygen Config?
In-Reply-To: <1223674403.4885.9.camel@jimi.temporal-wave.com>
References: <200810100839.36514.rschulz@sonic.net>
	<200810101429.05652.rschulz@sonic.net>
	<1223674403.4885.9.camel@jimi.temporal-wave.com>
Message-ID: <200810101453.18473.rschulz@sonic.net>

On Friday 10 October 2008 14:33, Jim Idle wrote:
> On Fri, 2008-10-10 at 14:29 -0700, Randall R Schulz wrote:
> > On Friday 10 October 2008 14:22, Terence Parr wrote:
> > > On Oct 10, 2008, at 2:08 PM, Andy Tripp wrote:
> > > > The Javadoc is missing from the ANTLR website.
> > >
> > > We use doxygen in lieu; the doc isn't missing per se
> > >
> > > http://www.antlr.org/api/Java/index.html
> >
> > Any chance of getting my original question answered?
> >
> > Is your Doxygen config file available??
>
> It is in the source code, so just download it from fisheye.

Yes, of course I have the source code. How else could I generate the 
JavaDoc HTML??


> etc. Always look here before posting, you can save a lot of time for
> everyone.

Jeez. If I knew what to look for I wouldn't have to ask.


> Jim


Randall Schulz

From jimi at temporal-wave.com  Fri Oct 10 14:59:10 2008
From: jimi at temporal-wave.com (Jim Idle)
Date: Fri, 10 Oct 2008 14:59:10 -0700
Subject: [antlr-interest] ANTLR Doxygen Config?
In-Reply-To: <200810101453.18473.rschulz@sonic.net>
References: <200810100839.36514.rschulz@sonic.net>
	<200810101429.05652.rschulz@sonic.net>
	<1223674403.4885.9.camel@jimi.temporal-wave.com>
	<200810101453.18473.rschulz@sonic.net>
Message-ID: <1223675950.4885.17.camel@jimi.temporal-wave.com>

On Fri, 2008-10-10 at 14:53 -0700, Randall R Schulz wrote:

> On Friday 10 October 2008 14:33, Jim Idle wrote:
> > On Fri, 2008-10-10 at 14:29 -0700, Randall R Schulz wrote:
> > > On Friday 10 October 2008 14:22, Terence Parr wrote:
> > > > On Oct 10, 2008, at 2:08 PM, Andy Tripp wrote:
> > > > > The Javadoc is missing from the ANTLR website.
> > > >
> > > > We use doxygen in lieu; the doc isn't missing per se
> > > >
> > > > http://www.antlr.org/api/Java/index.html
> > >
> > > Any chance of getting my original question answered?
> > >
> > > Is your Doxygen config file available??
> >
> > It is in the source code, so just download it from fisheye.
> 
> Yes, of course I have the source code. How else could I generate the 
> JavaDoc HTML??
> 
> 
> > etc. Always look here before posting, you can save a lot of time for
> > everyone.
> 
> Jeez. If I knew what to look for I wouldn't have to ask.


Err, taking issue with me telling you where the source code tree browser
is (and giving you the links to the doxygen config file) is is a bit
rich don't you think? How could you NOT know what to look for if you
know how to run doxygen? Don't worry though, I won't make the mistake of
offending you again by trying to help.

Jim

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20081010/6e722853/attachment.html 

From rschulz at sonic.net  Fri Oct 10 15:07:36 2008
From: rschulz at sonic.net (Randall R Schulz)
Date: Fri, 10 Oct 2008 15:07:36 -0700
Subject: [antlr-interest] ANTLR Doxygen Config?
In-Reply-To: <1223675950.4885.17.camel@jimi.temporal-wave.com>
References: <200810100839.36514.rschulz@sonic.net>
	<200810101453.18473.rschulz@sonic.net>
	<1223675950.4885.17.camel@jimi.temporal-wave.com>
Message-ID: <200810101507.36350.rschulz@sonic.net>

On Friday 10 October 2008 14:59, Jim Idle wrote:
> On Fri, 2008-10-10 at 14:53 -0700, Randall R Schulz wrote:
> > On Friday 10 October 2008 14:33, Jim Idle wrote:
> > > On Fri, 2008-10-10 at 14:29 -0700, Randall R Schulz wrote:
> > > > ...
> > > >
> > > > Any chance of getting my original question answered?
> > > >
> > > > Is your Doxygen config file available??
> > >
> > > It is in the source code, so just download it from fisheye.
> >
> > Yes, of course I have the source code. How else could I generate
> > the JavaDoc HTML??
> >
> > > etc. Always look here before posting, you can save a lot of time
> > > for everyone.
> >
> > Jeez. If I knew what to look for I wouldn't have to ask.
>
> Err, taking issue with me telling you where the source code tree
> browser is (and giving you the links to the doxygen config file)

Though in fact you did not give me "... the links to the doxygen config 
file," only a pointer to the large set of files in which it might be 
found. And you did this even though it was clear from my earlier 
postings in this thread that I had the source code already. You 
could "... save a lot of time for everyone ..." by paying attention to 
the threads to which you're posting.


> is a bit rich don't you think? How could you NOT know what to look
> for if you know how to run doxygen?

Doxygen makes no demands on the name of the config file, so one really 
has nothing to go on a priori in seeking it within a source 
distribution of, as is the case with ANTLR 3.1.1, 89 directories and 
802 files.


> Don't worry though, I won't make the mistake of offending you again by
> trying to help. 

By using the word "jeez" to express mild exasperation you conclude I'm 
offended?

Nonetheless, I feel I will survive without your insights. You may feel 
free to put me in your killfile. I will sleep soundly even if you do.


> Jim


Randall Schulz

From jimi at temporal-wave.com  Fri Oct 10 15:18:54 2008
From: jimi at temporal-wave.com (Jim Idle)
Date: Fri, 10 Oct 2008 15:18:54 -0700
Subject: [antlr-interest] ANTLR Doxygen Config?
In-Reply-To: <200810101507.36350.rschulz@sonic.net>
References: <200810100839.36514.rschulz@sonic.net>
	<200810101453.18473.rschulz@sonic.net>
	<1223675950.4885.17.camel@jimi.temporal-wave.com>
	<200810101507.36350.rschulz@sonic.net>
Message-ID: <1223677134.4885.26.camel@jimi.temporal-wave.com>

On Fri, 2008-10-10 at 15:07 -0700, Randall R Schulz wrote:

> On Friday 10 October 2008 14:59, Jim Idle wrote:
> > On Fri, 2008-10-10 at 14:53 -0700, Randall R Schulz wrote:
> > > On Friday 10 October 2008 14:33, Jim Idle wrote:
> > > > On Fri, 2008-10-10 at 14:29 -0700, Randall R Schulz wrote:
> > > > > ...
> > > > >
> > > > > Any chance of getting my original question answered?
> > > > >
> > > > > Is your Doxygen config file available??
> > > >
> > > > It is in the source code, so just download it from fisheye.
> > >
> > > Yes, of course I have the source code. How else could I generate
> > > the JavaDoc HTML??
> > >
> > > > etc. Always look here before posting, you can save a lot of time
> > > > for everyone.
> > >
> > > Jeez. If I knew what to look for I wouldn't have to ask.
> >
> > Err, taking issue with me telling you where the source code tree
> > browser is (and giving you the links to the doxygen config file)
> 
> Though in fact you did not give me "... the links to the doxygen config 
> file," only a pointer to the large set of files in which it might be 
> found. And you did this even though it was clear from my earlier 
> postings in this thread that I had the source code already. You 
> could "... save a lot of time for everyone ..." by paying attention to 
> the threads to which you're posting.


Unreal, you  take issue that I give you a link to a list of files at the
top level runtime directory, which in the case of Java consists of a
list of 1 file, which is called 'doxyfile'. Obviously you didn't
actually bother to click on the link, but just decided to assume it was
a list of all the source code.


> 
> 
> > is a bit rich don't you think? How could you NOT know what to look
> > for if you know how to run doxygen?
> 
> Doxygen makes no demands on the name of the config file, so one really 
> has nothing to go on a priori in seeking it within a source 
> distribution of, as is the case with ANTLR 3.1.1, 89 directories and 
> 802 files.


Oh yeah, because everyone calls the config file zarquon and never places
it at the top of the directory tree.


> 
> 
> > Don't worry though, I won't make the mistake of offending you again by
> > trying to help. 
> 
> By using the word "jeez" to express mild exasperation you conclude I'm 
> offended?
> 
> Nonetheless, I feel I will survive without your insights. 


But you won't get very far without the insights given to you on this
group it seems, given that you post about 5 times as many questions as
anyone else. You might want to turn down the levels on your righteous
indignation buttons.


> You may feel 
> free to put me in your killfile. I will sleep soundly even if you do.


I have no doubt that you will, but I have no time for this nonsense.

Jim

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20081010/495e9a96/attachment.html 

From tcurdt at vafer.org  Fri Oct 10 15:26:47 2008
From: tcurdt at vafer.org (Torsten Curdt)
Date: Sat, 11 Oct 2008 00:26:47 +0200
Subject: [antlr-interest] ANTLR Doxygen Config?
In-Reply-To: <48EFC467.9050909@jazillian.com>
References: <200810100839.36514.rschulz@sonic.net>
	<99AC8FCD-32F4-49A5-80F3-5549A9A39D75@vafer.org>
	<48EFC467.9050909@jazillian.com>
Message-ID: <B70FB48A-3EE8-4FA9-8A08-9AE422F0F9F4@vafer.org>


On Oct 10, 2008, at 23:08, Andy Tripp wrote:

> The Javadoc is missing from the ANTLR website.
> See this: http://www.antlr.org/pipermail/antlr-interest/2008-August/029673.html
> for details and how to run javadoc yourself.

That wasn't my point. Thanks for the pointer though :)

Well, given that I seem to be in the minority preferring javadocs I  
might just publish them myself. Would have thought antlr.org would be  
the best place for it. Still I think it would be nice to give the  
build.xml at least a "javadoc" target.

> After using Javadoc for so long, Doxygen is like a breath of fresh  
> pure oxygen...
> it makes me dizzy ;)

Careful - too much oxygen can be poisonous under pressure ;-)

cheers
--
Torsten

From rschulz at sonic.net  Fri Oct 10 15:36:15 2008
From: rschulz at sonic.net (Randall R Schulz)
Date: Fri, 10 Oct 2008 15:36:15 -0700
Subject: [antlr-interest] ANTLR Doxygen Config?
In-Reply-To: <1223677134.4885.26.camel@jimi.temporal-wave.com>
References: <200810100839.36514.rschulz@sonic.net>
	<200810101507.36350.rschulz@sonic.net>
	<1223677134.4885.26.camel@jimi.temporal-wave.com>
Message-ID: <200810101536.15914.rschulz@sonic.net>

On Friday 10 October 2008 15:18, Jim Idle wrote:
> ...
>
> But you won't get very far without the insights given to you on this
> group it seems, given that you post about 5 times as many questions
> as anyone else. You might want to turn down the levels on your
> righteous indignation buttons.

But it is _you_ who expressed indignation, not me.

And your "5 times as many" number is ludicrous.


> > You may feel free to put me in your killfile. I will sleep soundly
> > even if you do.
>
> I have no doubt that you will, but I have no time for this nonsense.

Whatever.


> Jim


Randall Schulz

From stoneyrh at gmail.com  Fri Oct 10 18:56:51 2008
From: stoneyrh at gmail.com (Ronghui Yu)
Date: Sat, 11 Oct 2008 09:56:51 +0800
Subject: [antlr-interest] A bug of ANTLR3.1 C Target
In-Reply-To: <1223668597.4226.23.camel@jimi.temporal-wave.com>
References: <48EF7094.6010500@gmail.com>
	<1223668597.4226.23.camel@jimi.temporal-wave.com>
Message-ID: <c0b1975b0810101856i45a7b76cu134aaeb33682bb24@mail.gmail.com>

It is 3.1.
I didn't change any source code of ANTLR, and I create a totally new lexer
and parser object, as welll as input stream and token stream.



On Sat, Oct 11, 2008 at 3:56 AM, Jim Idle <jimi at temporal-wave.com> wrote:

>  On Fri, 2008-10-10 at 23:11 +0800, Ronghui Yu wrote:
>
> Hi, Jim,
>
> Just let you know this information, it may be a bug, the index exceeds the
> boundary of the vector.
>
>
>
> Is this 3.1 or 3.1.1? I suspect that this is something to do with the
> reset() you are doing to be honest.
>
> Jim
>
>
>
>
>
> Regards
>
> Ronghui Yu
>
> ================================
>
> EMAIL:stoneyrh at 163.com
>
>
>


-- 
===========================
Regards
Ronghui Yu
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20081011/e1c08b60/attachment.html 

From stoneyrh at gmail.com  Sat Oct 11 08:44:45 2008
From: stoneyrh at gmail.com (Ronghui Yu)
Date: Sat, 11 Oct 2008 23:44:45 +0800
Subject: [antlr-interest] A bug of ANTLR3.1.1 C Target
Message-ID: <48F0C9ED.5020407@gmail.com>

Hi, Jim,

I just switched to ANTLR3.1.1 from 3.1, and I found an error I never saw
before.
Here is the stack information:

(gdb) c
Continuing.
the statement being parsed is->create something

Program received signal SIGSEGV, Segmentation fault.
0x00e15b54 in getText (token=0x9fa2070) at src/antlr3commontoken.c:346
346 token->tokText.text = token->strFactory->newStr8(token->strFactory,
(pANTLR3_UINT8)"<EOF>");
Current language: auto; currently c
(gdb) where
#0 0x00e15b54 in getText (token=0x9fa2070) at src/antlr3commontoken.c:346
#1 0x00fcedb8 in tokenEquals (token=0x9fa2070, word=0x602f002 ";") at
Common/LMSQLParser/common/Util.cpp:29
#2 0x05af26fe in sql_statement (ctx=0x9fb43a8) at
Common/LMSQLParser/oracle/PLSQLParser.c:180772
#3 0x05af23e3 in start (ctx=0x9fb43a8, ptr=0xbff734a0) at
Common/LMSQLParser/oracle/PLSQLParser.c:180656
...
(gdb) print *token
$1 = {type = 4294967295, factoryMade = 1, strFactory = 0x0, line = 2,
lineStart = 0x0, charPosition = -1, channel = 0, input = 0x0,
index = 0, start = 4, stop = 4, textState = 0, tokText = {chars = 0x0,
text = 0x0}, user1 = 0, user2 = 0, user3 = 0, custom = 0x0,
freeCustom = 0, getText = 0xe15aa0 <getText>, setText = 0xe15ba0
<setText>, setText8 = 0xe15b60 <setText8>, getType = 0xe15bc0 <getType>,
setType = 0xe15bd0 <setType>, getLine = 0xe15be0 <getLine>, setLine =
0xe15bf0 <setLine>,
getCharPositionInLine = 0xe15c00 <getCharPositionInLine>,
setCharPositionInLine = 0xe15c10 <setCharPositionInLine>,
getChannel = 0xe15c20 <getChannel>, setChannel = 0xe15c30 <setChannel>,
getTokenIndex = 0xe15c40 <getTokenIndex>,
setTokenIndex = 0xe15c50 <setTokenIndex>, getStartIndex = 0xe15c60
<getStartIndex>, setStartIndex = 0xe15c80 <setStartIndex>,
getStopIndex = 0xe15c90 <getStopIndex>, setStopIndex = 0xe15ca0
<setStopIndex>, toString = 0xe15cb0 <toString>}
(gdb)

When parsing an invalid statement, our parser crashes with this error.

The function tokenEquals above is called as tokenEquals(LT(1),";") in
semantic predicate action, within which, the token->getText(token) is
called to retrieve the text string, then error happens.




-- 

Regards

Ronghui Yu


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20081011/cb61edef/attachment.html 

From braincode at gmail.com  Sat Oct 11 14:34:03 2008
From: braincode at gmail.com (brainstorm)
Date: Sat, 11 Oct 2008 23:34:03 +0200
Subject: [antlr-interest] How to work with ANTLRNoCaseFilestream (case
	insensitivity) + ANTLWorks
Message-ID: <32137c140810111434o1185d8e0pd98dc5626185be54@mail.gmail.com>

Hi ! First post on this mailing list :)

I'm working in a DSL (for educational purposes) and I don't know how
to archieve token case insensitivity while working with antlrworks
1.2.1. I don't want to kludge the grammar with lower & uppercase token
definitions like:

'INT' | 'int' | 'InT' ...

I taken the the advice from "How do I get case insensitivity?"[1] wiki
resource, but my problem is about integrating this solution to
antlrworks without having to build a custom antlrworks or antlr-3.1.1
jar myself.

The problem is that, when debugging, ANTLworks generates a
__Test__.java file using:

CLLexer lex = new CLLexer(new ANTLRFileStream("input0"));

As the default filestream for testcases... but I want antlrworks to
use the extended NoCaseFilestream class... what is the cleanest method
to do it ?

Thanks in advance !

[1] http://www.antlr.org/wiki/pages/viewpage.action?pageId=1782

From magnus at rubidium.dyndns.org  Sat Oct 11 14:36:46 2008
From: magnus at rubidium.dyndns.org (Magnus Danielson)
Date: Sat, 11 Oct 2008 23:36:46 +0200
Subject: [antlr-interest] rule names collision with reserved words in target
	language
Message-ID: <48F11C6E.5070809@rubidium.dyndns.org>

Hi!

As I was working on a project I had a bug that took some time to figure 
out. It crashed and burned as I compiled it. The trouble was that I hade 
a rule named const in my grammar, and producting a routine called const 
in the produced C code. Now, const is a reserved word so GCC spewed 
severly upon it.

If I had used prefixing it would have solved itself. Renaming it solved 
it, but you would rather want either a warning/error occur up in the 
ANTLR front or a backend renaming to occur to avoid it, if needed (i.e. 
if reserved for the target language and no prefixing is used).

I think this problem can occur with other languages than C, so it could 
be worth considering. Oh, I was using 3.0.1 if you where asking.

Cheers,
Magnus

From jaluber at gmx.de  Sat Oct 11 14:51:07 2008
From: jaluber at gmx.de (Johannes Luber)
Date: Sat, 11 Oct 2008 23:51:07 +0200
Subject: [antlr-interest] How to work with ANTLRNoCaseFilestream (case
 insensitivity) + ANTLWorks
In-Reply-To: <32137c140810111434o1185d8e0pd98dc5626185be54@mail.gmail.com>
References: <32137c140810111434o1185d8e0pd98dc5626185be54@mail.gmail.com>
Message-ID: <48F11FCB.8010102@gmx.de>

brainstorm schrieb:
> Hi ! First post on this mailing list :)
> 
> I'm working in a DSL (for educational purposes) and I don't know how
> to archieve token case insensitivity while working with antlrworks
> 1.2.1. I don't want to kludge the grammar with lower & uppercase token
> definitions like:
> 
> 'INT' | 'int' | 'InT' ...
> 
> I taken the the advice from "How do I get case insensitivity?"[1] wiki
> resource, but my problem is about integrating this solution to
> antlrworks without having to build a custom antlrworks or antlr-3.1.1
> jar myself.
> 
> The problem is that, when debugging, ANTLworks generates a
> __Test__.java file using:
> 
> CLLexer lex = new CLLexer(new ANTLRFileStream("input0"));
> 
> As the default filestream for testcases... but I want antlrworks to
> use the extended NoCaseFilestream class... what is the cleanest method
> to do it ?
> 
> Thanks in advance !

The only other way I know is to change in the preferences the option
that you are going to be asked if ANTLRworks recompiles the code before
debugging. Then you can manually edit __Test__.java without losing your
changes - or better make a copy which you can use to overwrite the test
class, once you did regenerate the files.

Johannes
> 
> [1] http://www.antlr.org/wiki/pages/viewpage.action?pageId=1782
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
> 


From jaluber at gmx.de  Sat Oct 11 14:54:50 2008
From: jaluber at gmx.de (Johannes Luber)
Date: Sat, 11 Oct 2008 23:54:50 +0200
Subject: [antlr-interest] rule names collision with reserved words in
 target	language
In-Reply-To: <48F11C6E.5070809@rubidium.dyndns.org>
References: <48F11C6E.5070809@rubidium.dyndns.org>
Message-ID: <48F120AA.50102@gmx.de>

Magnus Danielson schrieb:
> Hi!
> 
> As I was working on a project I had a bug that took some time to figure 
> out. It crashed and burned as I compiled it. The trouble was that I hade 
> a rule named const in my grammar, and producting a routine called const 
> in the produced C code. Now, const is a reserved word so GCC spewed 
> severly upon it.
> 
> If I had used prefixing it would have solved itself. Renaming it solved 
> it, but you would rather want either a warning/error occur up in the 
> ANTLR front or a backend renaming to occur to avoid it, if needed (i.e. 
> if reserved for the target language and no prefixing is used).
> 
> I think this problem can occur with other languages than C, so it could 
> be worth considering. Oh, I was using 3.0.1 if you where asking.

This problem is known, but until name mangling is implemented not much
can be done. ANTLR is largely language agnostic and doesn't know if a
rule has the same name as a reserved word. Maybe putting a warning on
the wiki to that effect.

Johannes
> 
> Cheers,
> Magnus
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
> 


From rkevinburton at charter.net  Sat Oct 11 15:00:52 2008
From: rkevinburton at charter.net (rkevinburton at charter.net)
Date: Sat, 11 Oct 2008 15:00:52 -0700
Subject: [antlr-interest] JScript (ECMA 4) grammar?
Message-ID: <20081011180053.BYQXG.37621.root@mp17>

I was wondering if there has been an implementation of what Microsoft terms as ECMAscript 4. Basically it is Microsift's proposed additions to the current ECMA script spec. I am most interested in a Jscript grammar that handles the object structures such as 'class'.

http://msdn.microsoft.com/en-us/library/49zhkzs5.aspx

Thank you.

Kevin

From braincode at gmail.com  Sat Oct 11 15:56:36 2008
From: braincode at gmail.com (brainstorm)
Date: Sun, 12 Oct 2008 00:56:36 +0200
Subject: [antlr-interest] How to work with ANTLRNoCaseFilestream (case
	insensitivity) + ANTLWorks
In-Reply-To: <48F11FCB.8010102@gmx.de>
References: <32137c140810111434o1185d8e0pd98dc5626185be54@mail.gmail.com>
	<48F11FCB.8010102@gmx.de>
Message-ID: <32137c140810111556yc4217d2r76cf0637da33dccb@mail.gmail.com>

Thanks for your advice !

I've checked out the preference option you mentioned, but all is
regenerated anyway (Continue or Generate & Compile) :/

Problem is that after Ctrl+D (new debug session), all files (including
__Test__.java) are regenerated *and* just afterwards the debugger
starts... I cannot find a way to feed the debugger with my custom
__Test__.java by stopping the process and copying my file in the right
place before a new debugger session starts.

Alternative suggestions ?

Thanks a lot !
Roman

On Sat, Oct 11, 2008 at 11:51 PM, Johannes Luber <jaluber at gmx.de> wrote:
> brainstorm schrieb:
>> Hi ! First post on this mailing list :)
>>
>> I'm working in a DSL (for educational purposes) and I don't know how
>> to archieve token case insensitivity while working with antlrworks
>> 1.2.1. I don't want to kludge the grammar with lower & uppercase token
>> definitions like:
>>
>> 'INT' | 'int' | 'InT' ...
>>
>> I taken the the advice from "How do I get case insensitivity?"[1] wiki
>> resource, but my problem is about integrating this solution to
>> antlrworks without having to build a custom antlrworks or antlr-3.1.1
>> jar myself.
>>
>> The problem is that, when debugging, ANTLworks generates a
>> __Test__.java file using:
>>
>> CLLexer lex = new CLLexer(new ANTLRFileStream("input0"));
>>
>> As the default filestream for testcases... but I want antlrworks to
>> use the extended NoCaseFilestream class... what is the cleanest method
>> to do it ?
>>
>> Thanks in advance !
>
> The only other way I know is to change in the preferences the option
> that you are going to be asked if ANTLRworks recompiles the code before
> debugging. Then you can manually edit __Test__.java without losing your
> changes - or better make a copy which you can use to overwrite the test
> class, once you did regenerate the files.
>
> Johannes
>>
>> [1] http://www.antlr.org/wiki/pages/viewpage.action?pageId=1782
>>
>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>>
>
>

From jimi at temporal-wave.com  Sat Oct 11 18:28:02 2008
From: jimi at temporal-wave.com (Jim Idle)
Date: Sat, 11 Oct 2008 18:28:02 -0700
Subject: [antlr-interest] How to work with ANTLRNoCaseFilestream
	(case	insensitivity) + ANTLWorks
In-Reply-To: <32137c140810111434o1185d8e0pd98dc5626185be54@mail.gmail.com>
References: <32137c140810111434o1185d8e0pd98dc5626185be54@mail.gmail.com>
Message-ID: <1223774882.5174.3.camel@jimi.temporal-wave.com>

On Sat, 2008-10-11 at 23:34 +0200, brainstorm wrote:

> Hi ! First post on this mailing list :)
> 
> I'm working in a DSL (for educational purposes) and I don't know how
> to archieve token case insensitivity while working with antlrworks
> 1.2.1. I don't want to kludge the grammar with lower & uppercase token
> definitions like:
> 
> 'INT' | 'int' | 'InT' ...
> 
> I taken the the advice from "How do I get case insensitivity?"[1] wiki
> resource, but my problem is about integrating this solution to
> antlrworks without having to build a custom antlrworks or antlr-3.1.1
> jar myself.
> 
> The problem is that, when debugging, ANTLworks generates a
> __Test__.java file using:
> 
> CLLexer lex = new CLLexer(new ANTLRFileStream("input0"));



What I do is change the string template that generates the hook file and
have my own input class available.

However, you will find it is really pretty easy to build your parser
within netbeans/eclipse/intellij/etc and generate the parser with
-debug , then debug remote, which works perfectly.

Jim

> 
> As the default filestream for testcases... but I want antlrworks to
> use the extended NoCaseFilestream class... what is the cleanest method
> to do it ?
> 
> Thanks in advance !
> 
> [1] http://www.antlr.org/wiki/pages/viewpage.action?pageId=1782
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
> 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20081011/4a234b41/attachment.html 

From jimi at temporal-wave.com  Sat Oct 11 18:30:41 2008
From: jimi at temporal-wave.com (Jim Idle)
Date: Sat, 11 Oct 2008 18:30:41 -0700
Subject: [antlr-interest] rule names collision with reserved words
	in	target	language
In-Reply-To: <48F120AA.50102@gmx.de>
References: <48F11C6E.5070809@rubidium.dyndns.org>  <48F120AA.50102@gmx.de>
Message-ID: <1223775041.5174.6.camel@jimi.temporal-wave.com>

On Sat, 2008-10-11 at 23:54 +0200, Johannes Luber wrote:

> Magnus Danielson schrieb:
> > Hi!
> > 
> > As I was working on a project I had a bug that took some time to figure 
> > out. It crashed and burned as I compiled it. The trouble was that I hade 
> > a rule named const in my grammar, and producting a routine called const 
> > in the produced C code. Now, const is a reserved word so GCC spewed 
> > severly upon it.
> > 
> > If I had used prefixing it would have solved itself. Renaming it solved 
> > it, but you would rather want either a warning/error occur up in the 
> > ANTLR front or a backend renaming to occur to avoid it, if needed (i.e. 
> > if reserved for the target language and no prefixing is used).
> > 
> > I think this problem can occur with other languages than C, so it could 
> > be worth considering. Oh, I was using 3.0.1 if you where asking.
> 
> This problem is known, but until name mangling is implemented not much
> can be done. ANTLR is largely language agnostic and doesn't know if a
> rule has the same name as a reserved word. Maybe putting a warning on
> the wiki to that effect.


Because one of the goals is to generate somewhat readable/decipherable
code, this name mangling won't be done. Once the generated code is in an
IDE you want to be able to navigate to the tokens and rules and so on.
It is a minor restriction that you cannot use the names of built-ins and
keywords and so on.

Jim


> 
> Johannes
> > 
> > Cheers,
> > Magnus
> > 
> > List: http://www.antlr.org/mailman/listinfo/antlr-interest
> > Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
> > 
> 
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
> 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20081011/3367731d/attachment.html 

From sidharth.kuruvila at gmail.com  Sun Oct 12 22:55:55 2008
From: sidharth.kuruvila at gmail.com (Sidharth Kuruvila)
Date: Mon, 13 Oct 2008 11:25:55 +0530
Subject: [antlr-interest] An Antlr runtime for Php
Message-ID: <2ab2ed550810122255j30830d7fi91a4ddd2a8bad713@mail.gmail.com>

Hi,
I've been working on porting the antlr runtime to php. You can check it out
from

    svn checkout
http://antlrphpruntime.googlecode.com/svn/trunk/antlrphpruntime-read-only

It's still pretty early stages and a lot is missing.

I couldn't find any test grammars for the java version of the runtime, I
have been using the test grammars that come with the python runtime and they
have been working out great. It would be nice if there was an official set
of test grammars to test against.

I also noticed a bug with the java target in one of the test cases for the
python grammar, t013parser.g. Antlr appears to add a marchAny before a match
for a grammar that needs to consume only one token.

-- 
I am but a man.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20081013/67f055b1/attachment.html 

From jaluber at gmx.de  Mon Oct 13 03:09:04 2008
From: jaluber at gmx.de (Johannes Luber)
Date: Mon, 13 Oct 2008 12:09:04 +0200
Subject: [antlr-interest] An Antlr runtime for Php
In-Reply-To: <2ab2ed550810122255j30830d7fi91a4ddd2a8bad713@mail.gmail.com>
References: <2ab2ed550810122255j30830d7fi91a4ddd2a8bad713@mail.gmail.com>
Message-ID: <48F31E40.4010602@gmx.de>

Sidharth Kuruvila schrieb:
> Hi,
> I've been working on porting the antlr runtime to php. You can check it
> out from
> 
>     svn checkout http://antlrphpruntime.googlecode.com/svn/trunk/
> antlrphpruntime-read-only

It would be better if the development is done on the same SCMS as the
other targets. Ask Ter about the details and download the appropriate
Perforce binary. Furthermore, there is a ANTLR-dev mailing list, where
these kinds of discussions take place. The required information should
be listed under the support page.
> 
> It's still pretty early stages and a lot is missing.
> 
> I couldn't find any test grammars for the java version of the runtime, I
> have been using the test grammars that come with the python runtime and
> they have been working out great. It would be nice if there was an
> official set of test grammars to test against.  

There are example grammars for all supported languages. They should be
on the download page.

Johannes
> 
> I also noticed a bug with the java target in one of the test cases for
> the python grammar, t013parser.g. Antlr appears to add a marchAny before
> a match for a grammar that needs to consume only one token.
> 
> -- 
> I am but a man.
> 
> 
> ------------------------------------------------------------------------
> 
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
> 


From espina.edgar at gmail.com  Mon Oct 13 10:59:35 2008
From: espina.edgar at gmail.com (Edgar Espina)
Date: Mon, 13 Oct 2008 14:59:35 -0300
Subject: [antlr-interest] ANTLR IDE v1.1.0 released
Message-ID: <92b42db60810131059i792181cetd269b17d081587b0@mail.gmail.com>

*New Features*:
* Integrated ANTLR/Java Launcher and Debugger(beta). ANTLR breakpoints not
supported yet
* ANTLR Built-in Interpreter improved
* 2141320- *Support ANTLR v3.1.1*
* 2111725- Default text on dark background
* 2108014- Add support for comment actions
* 2107550- Support per-grammar output folders
* 2063912- Add a compile grammar action
* 1895724- Initial debugging support

*Bugs Fixed*:
* 2120955- Must choose absolute output folder
* 2107994- Preference change ignored until you close/reopen grammar
* 2106279- Generate grammar action ignores package
* 2104295- NPE opening .g file
* 2095456- NPE in generate source action
* 2051128- Add a ANTLR IDE properties tabs at the grammar level
* 2051074- NPE with 1.0

*ANTLR IDE*
   Release notes: http://antlrv3ide.sourceforge.net/
   Update site:
http://antlrv3ide.sourceforge.net/updates<http://goog_1223905234221>
   Download:   https://sourceforge.net/project/showfiles.php?group_id=213306
   Demos:
              Getting started:
http://antlrv3ide.sourceforge.net/resources/getting-started/getting-started.htm
              How to use the Code generator:
http://antlrv3ide.sourceforge.net/resources/code-generator/code-generator.htm
              How to use the ANTLR Built-in Interpreter:
http://antlrv3ide.sourceforge.net/resources/built-in-interpreter/built-in-interpreter.htm
              How to launch a ANTLR/Java grammar:
http://antlrv3ide.sourceforge.net/resources/java-launch/java-launch.htm
-- 
edgar
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20081013/69a47888/attachment.html 

From parrt at cs.usfca.edu  Mon Oct 13 11:04:15 2008
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon, 13 Oct 2008 11:04:15 -0700
Subject: [antlr-interest] ANTLR IDE v1.1.0 released
In-Reply-To: <92b42db60810131059i792181cetd269b17d081587b0@mail.gmail.com>
References: <92b42db60810131059i792181cetd269b17d081587b0@mail.gmail.com>
Message-ID: <F81DF24B-AE33-40D5-AE88-57E196832883@cs.usfca.edu>

Cool! Great work.
Ter
On Oct 13, 2008, at 10:59 AM, Edgar Espina wrote:

> New Features:
> * Integrated ANTLR/Java Launcher and Debugger(beta). ANTLR  
> breakpoints not supported yet
> * ANTLR Built-in Interpreter improved
> * 2141320- Support ANTLR v3.1.1
> * 2111725- Default text on dark background
> * 2108014- Add support for comment actions
> * 2107550- Support per-grammar output folders
> * 2063912- Add a compile grammar action
> * 1895724- Initial debugging support
>
> Bugs Fixed:
> * 2120955- Must choose absolute output folder
> * 2107994- Preference change ignored until you close/reopen grammar
> * 2106279- Generate grammar action ignores package
> * 2104295- NPE opening .g file
> * 2095456- NPE in generate source action
> * 2051128- Add a ANTLR IDE properties tabs at the grammar level
> * 2051074- NPE with 1.0
>
> ANTLR IDE
>    Release notes: http://antlrv3ide.sourceforge.net/
>    Update site: http://antlrv3ide.sourceforge.net/updates
>    Download:   https://sourceforge.net/project/showfiles.php?group_id=213306
>    Demos:
>               Getting started: http://antlrv3ide.sourceforge.net/resources/getting-started/getting-started.htm
>               How to use the Code generator: http://antlrv3ide.sourceforge.net/resources/code-generator/code-generator.htm
>               How to use the ANTLR Built-in Interpreter: http://antlrv3ide.sourceforge.net/resources/built-in-interpreter/built-in-interpreter.htm
>               How to launch a ANTLR/Java grammar: http://antlrv3ide.sourceforge.net/resources/java-launch/java-launch.htm
> -- 
> edgar
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>


From espina.edgar at gmail.com  Mon Oct 13 11:05:59 2008
From: espina.edgar at gmail.com (Edgar Espina)
Date: Mon, 13 Oct 2008 15:05:59 -0300
Subject: [antlr-interest] ANTLR IDE v1.1.0 released
In-Reply-To: <F81DF24B-AE33-40D5-AE88-57E196832883@cs.usfca.edu>
References: <92b42db60810131059i792181cetd269b17d081587b0@mail.gmail.com>
	<F81DF24B-AE33-40D5-AE88-57E196832883@cs.usfca.edu>
Message-ID: <92b42db60810131105j3c8b3a3ak51fbc3a4058376ed@mail.gmail.com>

thanks!

On Mon, Oct 13, 2008 at 3:04 PM, Terence Parr <parrt at cs.usfca.edu> wrote:

> Cool! Great work.
> Ter
>
> On Oct 13, 2008, at 10:59 AM, Edgar Espina wrote:
>
>  New Features:
>> * Integrated ANTLR/Java Launcher and Debugger(beta). ANTLR breakpoints not
>> supported yet
>> * ANTLR Built-in Interpreter improved
>> * 2141320- Support ANTLR v3.1.1
>> * 2111725- Default text on dark background
>> * 2108014- Add support for comment actions
>> * 2107550- Support per-grammar output folders
>> * 2063912- Add a compile grammar action
>> * 1895724- Initial debugging support
>>
>> Bugs Fixed:
>> * 2120955- Must choose absolute output folder
>> * 2107994- Preference change ignored until you close/reopen grammar
>> * 2106279- Generate grammar action ignores package
>> * 2104295- NPE opening .g file
>> * 2095456- NPE in generate source action
>> * 2051128- Add a ANTLR IDE properties tabs at the grammar level
>> * 2051074- NPE with 1.0
>>
>> ANTLR IDE
>>   Release notes: http://antlrv3ide.sourceforge.net/
>>   Update site: http://antlrv3ide.sourceforge.net/updates
>>   Download:
>> https://sourceforge.net/project/showfiles.php?group_id=213306
>>   Demos:
>>              Getting started:
>> http://antlrv3ide.sourceforge.net/resources/getting-started/getting-started.htm
>>              How to use the Code generator:
>> http://antlrv3ide.sourceforge.net/resources/code-generator/code-generator.htm
>>              How to use the ANTLR Built-in Interpreter:
>> http://antlrv3ide.sourceforge.net/resources/built-in-interpreter/built-in-interpreter.htm
>>              How to launch a ANTLR/Java grammar:
>> http://antlrv3ide.sourceforge.net/resources/java-launch/java-launch.htm
>> --
>> edgar
>>
>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>> Unsubscribe:
>> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>>
>>
>


-- 
edgar
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20081013/e6e6112b/attachment.html 

From yotommy at gmail.com  Mon Oct 13 11:49:37 2008
From: yotommy at gmail.com (Tom Smith)
Date: Mon, 13 Oct 2008 14:49:37 -0400
Subject: [antlr-interest] generating multiple files from a single input file
Message-ID: <82dc0d190810131149n4539bfd6ved5a5d5587f0be1f@mail.gmail.com>

Hello,

Right now I have a multipass translator to generate code based on a
program written in a DSL (using StringTemplate rewrites).  I just
realized that I have enough information in my AST to generate some
other supporting files as well.  Is there a straightforward way to
structure this task?

Thanks,
Tom.

From tcurdt at vafer.org  Mon Oct 13 12:26:23 2008
From: tcurdt at vafer.org (Torsten Curdt)
Date: Mon, 13 Oct 2008 21:26:23 +0200
Subject: [antlr-interest] artifacts in maven repo
Message-ID: <1ACEF478-EEDD-4503-8577-50AADA6F899A@vafer.org>

Seems like the latest releases of antlr and stringtemplate are both  
not available through

  http://repo1.maven.org/maven2/org/antlr/

yet. Am I looking at the wrong place? Or did no one bother to submit it?

  http://jira.codehaus.org/secure/CreateIssue.jspa?pid=10367&issuetype=3

cheers
--
Torsten

From jimi at temporal-wave.com  Mon Oct 13 12:41:28 2008
From: jimi at temporal-wave.com (Jim Idle)
Date: Mon, 13 Oct 2008 12:41:28 -0700
Subject: [antlr-interest] artifacts in maven repo
In-Reply-To: <1ACEF478-EEDD-4503-8577-50AADA6F899A@vafer.org>
References: <1ACEF478-EEDD-4503-8577-50AADA6F899A@vafer.org>
Message-ID: <1223926888.4235.23.camel@jimi.temporal-wave.com>

On Mon, 2008-10-13 at 21:26 +0200, Torsten Curdt wrote:

> Seems like the latest releases of antlr and stringtemplate are both  
> not available through
> 
>   http://repo1.maven.org/maven2/org/antlr/
> 
> yet. Am I looking at the wrong place? Or did no one bother to submit it?
> 
>   http://jira.codehaus.org/secure/CreateIssue.jspa?pid=10367&issuetype=3
> 


I think that we should get this organized better as maven is a good
system and it should be easy to write some scripts for Ter to run for
each release and create the maven requirements. So, I will undertake to
do this and supply the necessary for Ter, after which, we can probably
automate the updates.

Jim


> cheers
> --
> Torsten
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
> 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20081013/3897dc2e/attachment.html 

From tcurdt at vafer.org  Mon Oct 13 13:01:14 2008
From: tcurdt at vafer.org (Torsten Curdt)
Date: Mon, 13 Oct 2008 22:01:14 +0200
Subject: [antlr-interest] artifacts in maven repo
In-Reply-To: <1223926888.4235.23.camel@jimi.temporal-wave.com>
References: <1ACEF478-EEDD-4503-8577-50AADA6F899A@vafer.org>
	<1223926888.4235.23.camel@jimi.temporal-wave.com>
Message-ID: <474960E2-D867-47C3-949E-CEAE88F82AD6@vafer.org>


On Oct 13, 2008, at 21:41, Jim Idle wrote:

> On Mon, 2008-10-13 at 21:26 +0200, Torsten Curdt wrote:
>>
>> Seems like the latest releases of antlr and stringtemplate are both
>> not available through
>>
>>   http://repo1.maven.org/maven2/org/antlr/
>>
>> yet. Am I looking at the wrong place? Or did no one bother to  
>> submit it?
>>
>>   http://jira.codehaus.org/secure/CreateIssue.jspa?pid=10367&issuetype=3
>>
>
> I think that we should get this organized better as maven is a good  
> system and it should be easy to write some scripts for Ter to run  
> for each release and create the maven requirements. So, I will  
> undertake to do this and supply the necessary for Ter, after which,  
> we can probably automate the updates.

At organization like Apache and Codehaus we synchronize to the repo.  
So that makes it really easy. (see http://maven.apache.org/guides/mini/guide-central-repository-upload.html)

For now I could just submit the jira's (I need them in there rather  
soonish) ...but it would be better if an antlr project member would do  
it.

Please just let me know.

cheers
--
Torsten

From antlr at mirality.co.nz  Mon Oct 13 13:11:36 2008
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Tue, 14 Oct 2008 09:11:36 +1300
Subject: [antlr-interest] generating multiple files from a single input
 file
In-Reply-To: <82dc0d190810131149n4539bfd6ved5a5d5587f0be1f@mail.gmail.co
 m>
References: <82dc0d190810131149n4539bfd6ved5a5d5587f0be1f@mail.gmail.com>
Message-ID: <20081013201151.87CB211EE29@www.antlr.org>

At 07:49 14/10/2008, Tom Smith wrote:
 >Right now I have a multipass translator to generate code based 
on
 >a program written in a DSL (using StringTemplate rewrites).  I 
just
 >realized that I have enough information in my AST to generate 
some
 >other supporting files as well.  Is there a straightforward way 
to
 >structure this task?

Probably the simplest way to do it would be to just create 
multiple tree walkers that you run in turn, each one creating one 
of the outputs.

Otherwise you could use a single tree walker and write multiple 
sets of output to different streams.  I'm not sure if this is 
compatible with use of StringTemplate, though.

I thought there was an example somewhere demonstrating writing out 
.c files together with .h files, but I can't find it at the moment.


From vl.homutov at gmail.com  Mon Oct 13 13:20:50 2008
From: vl.homutov at gmail.com (`VL)
Date: Tue, 14 Oct 2008 00:20:50 +0400
Subject: [antlr-interest] Understanding ANTLR's 'multiple alternatives'
Message-ID: <200810140020.51126.vl@localhost>

Hello ALL.

Thirst, i'd like to say that ANLTR is a great tool. I recently started
to use and like it very much. Thanks,authors!

But i steel need to understand a lot. Below is what i'm trying to do and what i get.

I need to parse a file with quite simple syntax, but it has one caveat: file can
include environment variables in a form of $(VAR) at any place inside. This is not
a problem for software that uses it since it just evaluates values and parses results.
But i want to write a tool that will work with such files as is and do not evaluate such vars.
Currently i just send this vars to hidden channel, like comments and have rules to match
'normal' syntax. 

For example, i have thing like this to parse:

DIR=/some/path
DOCS=/home/$(USER)/docs

Say, i have such simple rule for absolute path:

fragment PATH:   ( '/' (ID|INT)* )+;

I thought that i can match path with $(VAR) embedded somewhere inside it with
something like this:

fragment ENVAR:  '$' '(' ID ')';
ENPATH:   ( ENVAR* PATH* ENVAR* )+ ;

As i suggest, that would mean 'enpath is zero or more ENVAR, later zero or more PATH, later zero or more ENVAR, repeating.
When i try to compile this, i get 

Decision can match input such as "'$''('{'$', '.', 'A'..'Z', '_', 'a'..'z'}')'" using multiple alternatives: 1, 2
As a result, alternative(s) 2 were disabled for that input

Well, i read a chapter in ANTLR book about ambiguities and for now i understand this (in current context) as:
if path in center is empty, ANTLR don't know which ENVAR it should use: in the begin or in the end one?

Please, tell me if i'm wrong. What is worse - i don't know what to do in this situation ;-). How can i accomplish
my task - in the example above i'd like to get value of DOCS variable as literal string /home/$(USER)/docs AND
match only valid paths  (/home//docs/ is a valid path if environment variable is thrown out). 

Thank you, ALL!




From mark.langezaal at xs4all.nl  Mon Oct 13 18:12:07 2008
From: mark.langezaal at xs4all.nl (Mark Langezaal)
Date: Tue, 14 Oct 2008 03:12:07 +0200
Subject: [antlr-interest] "become root" operator ^ sometimes fails
Message-ID: <48F3F1E7.2020202@xs4all.nl>

Hello,

During the construction of a grammar I encountered an anomaly in the 
creation of root nodes when using the "become root" operator ^.
I use ANTLRWorks version 1.2
With the below simplified grammar it can be reproduced.
The okExpr rule generates the expected AST. for input: 1 + 2
But the badExpr rule does NOT generate a new root node for '+' token.

Can one of you experts confirm (or deny) this is a genuine problem?

Best regards,
Mark langezaal

===================================
grammar foo;

options {
   output = AST;
   ASTLabelType = CommonTree;
}

// Input: 1 + 2
// Generated AST: ^(+ 1 2)
okExpr
   :    NUM (('+'|'-')^ NUM)*
   ;

// Input: 1 + 2
// Generated AST: (1 + 2)
badExpr
   :    NUM (('+')^ NUM)*
   ;

NUM
   :   ('0'..'9')+
   ;

WS
   : ('\r'|'\n'|'\t'|' ')+  {skip();}
   ;





From parrt at cs.usfca.edu  Mon Oct 13 18:16:42 2008
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon, 13 Oct 2008 18:16:42 -0700
Subject: [antlr-interest] "become root" operator ^ sometimes fails
In-Reply-To: <48F3F1E7.2020202@xs4all.nl>
References: <48F3F1E7.2020202@xs4all.nl>
Message-ID: <3B90E76C-29D0-44C7-A366-B1438204239A@cs.usfca.edu>

Hi. ('+')^ is probably better as '+'^ since I think there has been  
some subrule-as-set funkiness.
Ter
On Oct 13, 2008, at 6:12 PM, Mark Langezaal wrote:

> Hello,
>
> During the construction of a grammar I encountered an anomaly in the
> creation of root nodes when using the "become root" operator ^.
> I use ANTLRWorks version 1.2
> With the below simplified grammar it can be reproduced.
> The okExpr rule generates the expected AST. for input: 1 + 2
> But the badExpr rule does NOT generate a new root node for '+' token.
>
> Can one of you experts confirm (or deny) this is a genuine problem?
>
> Best regards,
> Mark langezaal
>
> ===================================
> grammar foo;
>
> options {
>   output = AST;
>   ASTLabelType = CommonTree;
> }
>
> // Input: 1 + 2
> // Generated AST: ^(+ 1 2)
> okExpr
>   :    NUM (('+'|'-')^ NUM)*
>   ;
>
> // Input: 1 + 2
> // Generated AST: (1 + 2)
> badExpr
>   :    NUM (('+')^ NUM)*
>   ;
>
> NUM
>   :   ('0'..'9')+
>   ;
>
> WS
>   : ('\r'|'\n'|'\t'|' ')+  {skip();}
>   ;
>
>
>
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>


From antlr at mirality.co.nz  Tue Oct 14 00:20:02 2008
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Tue, 14 Oct 2008 20:20:02 +1300
Subject: [antlr-interest] Understanding ANTLR's 'multiple alternatives'
In-Reply-To: <200810140020.51126.vl@localhost>
References: <200810140020.51126.vl@localhost>
Message-ID: <20081014072012.C0ABC312970@www.antlr.org>

At 09:20 14/10/2008, `VL wrote:
 >I need to parse a file with quite simple syntax, but it has one
 >caveat: file can include environment variables in a form of 
$(VAR)
 >at any place inside. This is not a problem for software that 
uses
 >it since it just evaluates values and parses results.
[...]
 >DIR=/some/path
 >DOCS=/home/$(USER)/docs
 >
 >Say, i have such simple rule for absolute path:
 >
 >fragment PATH:   ( '/' (ID|INT)* )+;
 >
 >I thought that i can match path with $(VAR) embedded somewhere
 >inside it with something like this:
 >
 >fragment ENVAR:  '$' '(' ID ')';
 >ENPATH:   ( ENVAR* PATH* ENVAR* )+ ;

The problem with this approach is it doesn't consider the case 
where the environment variable contains a /, or where it forms 
only part of the path (eg. "/home/user-$(USER)/docs".

A better combination that supports these as well would be:

fragment ENVAR : '$' '(' ID ')';

PATH : ( '/' (ID|INT|ENVAR)* )+;


On the other hand, the file structure given above is simple enough 
that using ANTLR seems like overkill.  Why not just read each line 
and split it at the first '='?


From AndrevdM at pyrogenesis.co.za  Tue Oct 14 01:35:33 2008
From: AndrevdM at pyrogenesis.co.za (=?iso-8859-1?Q?Andr=E9_van_der_Merwe?=)
Date: Tue, 14 Oct 2008 10:35:33 +0200
Subject: [antlr-interest] VS2008 Integration Example
Message-ID: <E7035321714C624BA01ADCBA6F99CADF010354E8E9BE@mercury.pyrogenesis.co.za>

Does anyone have a simple example VS2008 solution that calls ANTLR as part of the build (i.e. not a pre-build event).

I've followed the instructions on the web site but I'm doing something wrong....


Thanks
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20081014/4e80a5a1/attachment.html 

From antlr at mirality.co.nz  Tue Oct 14 02:09:06 2008
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Tue, 14 Oct 2008 22:09:06 +1300
Subject: [antlr-interest] VS2008 Integration Example
In-Reply-To: <E7035321714C624BA01ADCBA6F99CADF010354E8E9BE@mercury.pyrog
	enesis.co.za>
References: <E7035321714C624BA01ADCBA6F99CADF010354E8E9BE@mercury.pyrogenesis.co.za>
Message-ID: <20081014091115.16C8B31296F@www.antlr.org>

At 21:35 14/10/2008, Andr? van der Merwe wrote:
>Does anyone have a simple example VS2008 
>solution that calls ANTLR as part of the build 
>(i.e. not a pre-build event).
>
>I?ve followed the instructions on the web site 
>but I?m doing something wrong....

For which target language?

This is the method I use for C# projects (will 
probably also work with other .NET languages, but *not* C/C++):

1. Right-click, Unload Project, Right-click, Edit 
project.  (If you're using Express, you don't 
have this option, but you can edit the project 
file outside of VS instead.)
2. Somewhere inside the first <PropertyGroup> section, add these:

     <AntlrFolder>D:\path\to\antlr\lib</AntlrFolder>
     <AntlrClassPath>$(AntlrFolder)\antlr-3.jar;$(AntlrFolder)\stringtemplate-3.2.jar;$(AntlrFolder)\antlr-2.7.7.jar</AntlrClassPath>

3. Immediately below the 
<ItemGroup>...</ItemGroup> block containing your 
normal source files, add this:

     <ItemGroup>
       <Antlr3 Include="Your.g">
         <OutputFiles>YourLexer.g;YourParser.g;Your.tokens</OutputFiles>
       </Antlr3>
       <Antlr3 Include="YourTree.g">
         <InputFiles>Your.tokens</InputFiles>
         <OutputFiles>YourTree.cs</OutputFiles>
       </Antlr3>
       <Compile Include="YourLexer.cs">
         <AutoGen>True</AutoGen>
         <DesignTime>True</DesignTime>
         <DependentUpon>Your.g</DependentUpon>
       </Compile>
       <Compile Include="YourParser.cs">
         <AutoGen>True</AutoGen>
         <DesignTime>True</DesignTime>
         <DependentUpon>Your.g</DependentUpon>
       </Compile>
       <Compile Include="YourTree.cs">
         <AutoGen>True</AutoGen>
         <DesignTime>True</DesignTime>
         <DependentUpon>YourTree.g</DependentUpon>
       </Compile>
     </ItemGroup>

4. Immediately above the closing </Project> tag, add this:

     <Target Name="GenerateAntlrCode"
             Inputs="@(Antlr3);%(Antlr3.InputFiles)"
             Outputs="%(Antlr3.OutputFiles)">
       <Exec Command="java -cp 
&quot;$(AntlrClassPath)&quot; org.antlr.Tool 
-message-format vs2005 @(Antlr3)"
             Outputs="%(Antlr3.OutputFiles)" />
     </Target>
     <PropertyGroup>
       <BuildDependsOn>GenerateAntlrCode;$(BuildDependsOn)</BuildDependsOn>
     </PropertyGroup>

5. Edit the above to suit your real files.

There's probably better ways to do this (I'm not 
really all that experienced with MSBuild), but 
the above works for me.  It's a little bit clunky 
in that you have to manually edit the project 
whenever you add new grammar files (or outputs), 
but that's usually not something that happens very often.

One caveat: Visual Studio does weird things if 
you have the generated .cs files open when you 
build, especially if you've modified the 
grammar.  It's best to close the .cs files before 
you build.  (It sometimes seems to compile the 
version of the code that's shown in the editor -- 
ie. the old code -- instead of the newly 
generated code.  This is especially true if it 
thinks the code has been modified -- which 
includes the line-ending adjustment it likes 
making when you open them.)


From tcurdt at vafer.org  Tue Oct 14 03:04:56 2008
From: tcurdt at vafer.org (Torsten Curdt)
Date: Tue, 14 Oct 2008 12:04:56 +0200
Subject: [antlr-interest] artifacts in maven repo
In-Reply-To: <474960E2-D867-47C3-949E-CEAE88F82AD6@vafer.org>
References: <1ACEF478-EEDD-4503-8577-50AADA6F899A@vafer.org>
	<1223926888.4235.23.camel@jimi.temporal-wave.com>
	<474960E2-D867-47C3-949E-CEAE88F82AD6@vafer.org>
Message-ID: <8A4F65C1-D6BE-44A1-B2AD-4841F4223ADE@vafer.org>


On Oct 13, 2008, at 22:01, Torsten Curdt wrote:

>
> On Oct 13, 2008, at 21:41, Jim Idle wrote:
>
>> On Mon, 2008-10-13 at 21:26 +0200, Torsten Curdt wrote:
>>>
>>> Seems like the latest releases of antlr and stringtemplate are both
>>> not available through
>>>
>>>  http://repo1.maven.org/maven2/org/antlr/
>>>
>>> yet. Am I looking at the wrong place? Or did no one bother to
>>> submit it?
>>>
>>>  http://jira.codehaus.org/secure/CreateIssue.jspa?pid=10367&issuetype=3
>>>
>>
>> I think that we should get this organized better as maven is a good
>> system and it should be easy to write some scripts for Ter to run
>> for each release and create the maven requirements. So, I will
>> undertake to do this and supply the necessary for Ter, after which,
>> we can probably automate the updates.
>
> At organization like Apache and Codehaus we synchronize to the repo.
> So that makes it really easy. (see http://maven.apache.org/guides/mini/guide-central-repository-upload.html)
>
> For now I could just submit the jira's (I need them in there rather
> soonish) ...but it would be better if an antlr project member would do
> it.

So would it be OK if I prepare the bundles and submit them? Any  
objections from the antlr team? Terence?

cheers
--
Torsten

From mark.langezaal at xs4all.nl  Tue Oct 14 05:59:41 2008
From: mark.langezaal at xs4all.nl (Mark Langezaal)
Date: Tue, 14 Oct 2008 14:59:41 +0200 (CEST)
Subject: [antlr-interest] "become root" operator ^ sometimes fails
Message-ID: <20085.212.159.240.25.1223989181.squirrel@webmail.xs4all.nl>

Uhh, subtitles please...
Do you mean this is a kind of a bug, but there is an easy workaround by
removing the brackets?

Regards,
/Mark

> Hi. ('+')^ is probably better as '+'^ since I think there has been
> some subrule-as-set funkiness.
> Ter
> On Oct 13, 2008, at 6:12 PM, Mark Langezaal wrote:
>
>> Hello,
>>
>> During the construction of a grammar I encountered an anomaly in the
>> creation of root nodes when using the "become root" operator ^.
>> I use ANTLRWorks version 1.2
>> With the below simplified grammar it can be reproduced.
>> The okExpr rule generates the expected AST. for input: 1 + 2
>> But the badExpr rule does NOT generate a new root node for '+' token.
>>
>> Can one of you experts confirm (or deny) this is a genuine problem?
>>
>> Best regards,
>> Mark langezaal
>>
>> ===================================
>> grammar foo;
>>
>> options {
>>   output = AST;
>>   ASTLabelType = CommonTree;
>> }
>>
>> // Input: 1 + 2
>> // Generated AST: ^(+ 1 2)
>> okExpr
>>   :    NUM (('+'|'-')^ NUM)*
>>   ;
>>
>> // Input: 1 + 2
>> // Generated AST: (1 + 2)
>> badExpr
>>   :    NUM (('+')^ NUM)*
>>   ;
>>
>> NUM
>>   :   ('0'..'9')+
>>   ;
>>
>> WS
>>   : ('\r'|'\n'|'\t'|' ')+  {skip();}
>>   ;
>>
>>


From yotommy at gmail.com  Tue Oct 14 06:26:52 2008
From: yotommy at gmail.com (Tom Smith)
Date: Tue, 14 Oct 2008 09:26:52 -0400
Subject: [antlr-interest] generating multiple files from a single input
	file
In-Reply-To: <48f3ab83.4c1f2c0a.5c01.fffffd56SMTPIN_ADDED@mx.google.com>
References: <82dc0d190810131149n4539bfd6ved5a5d5587f0be1f@mail.gmail.com>
	<48f3ab83.4c1f2c0a.5c01.fffffd56SMTPIN_ADDED@mx.google.com>
Message-ID: <82dc0d190810140626rd078d58q758c73ec817db10f@mail.gmail.com>

Gavin, thanks for the idea.

In addition to Gavin's suggestion, I guess it is possible to have a single tree
walker that uses different StringTemplate groups to form the output.  Does
anyone have thoughts on the workability of these approaches?

Thanks,
Tom.

On Mon, Oct 13, 2008 at 4:11 PM, Gavin Lambert <antlr at mirality.co.nz> wrote:
> At 07:49 14/10/2008, Tom Smith wrote:
>>Right now I have a multipass translator to generate code based on
>>a program written in a DSL (using StringTemplate rewrites).  I just
>>realized that I have enough information in my AST to generate some
>>other supporting files as well.  Is there a straightforward way to
>>structure this task?
>
> Probably the simplest way to do it would be to just create multiple tree
> walkers that you run in turn, each one creating one of the outputs.
>
> Otherwise you could use a single tree walker and write multiple sets of
> output to different streams.  I'm not sure if this is compatible with use of
> StringTemplate, though.
>
> I thought there was an example somewhere demonstrating writing out .c files
> together with .h files, but I can't find it at the moment.
>
>

From jimi at temporal-wave.com  Tue Oct 14 08:23:52 2008
From: jimi at temporal-wave.com (Jim Idle)
Date: Tue, 14 Oct 2008 08:23:52 -0700
Subject: [antlr-interest] VS2008 Integration Example
In-Reply-To: <E7035321714C624BA01ADCBA6F99CADF010354E8E9BE@mercury.pyrogenesis.co.za>
References: <E7035321714C624BA01ADCBA6F99CADF010354E8E9BE@mercury.pyrogenesis.co.za>
Message-ID: <1223997832.5040.1.camel@jimi.temporal-wave.com>

On Tue, 2008-10-14 at 10:35 +0200, Andr? van der Merwe wrote:
> Does anyone have a simple example VS2008 solution that calls ANTLR as
> part of the build (i.e. not a pre-build event). 
> 
>  
> 
> I?ve followed the instructions on the web site but I?m doing something
> wrong....


For C# or VC generation? The C# stuff on the web site works for vs2005
but for vs2008 you have to move things around a bit. I will try to
update that soon. For C, you just add the .rules files then choose what
type of grammar you have when you add it to the project.

Jim

> 
>  
> 
>  
> 
> Thanks
> 
> 
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
> 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20081014/a88c81b0/attachment.html 

From jimi at temporal-wave.com  Tue Oct 14 08:26:02 2008
From: jimi at temporal-wave.com (Jim Idle)
Date: Tue, 14 Oct 2008 08:26:02 -0700
Subject: [antlr-interest] artifacts in maven repo
In-Reply-To: <8A4F65C1-D6BE-44A1-B2AD-4841F4223ADE@vafer.org>
References: <1ACEF478-EEDD-4503-8577-50AADA6F899A@vafer.org>
	<1223926888.4235.23.camel@jimi.temporal-wave.com>
	<474960E2-D867-47C3-949E-CEAE88F82AD6@vafer.org>
	<8A4F65C1-D6BE-44A1-B2AD-4841F4223ADE@vafer.org>
Message-ID: <1223997962.5040.4.camel@jimi.temporal-wave.com>

On Tue, 2008-10-14 at 12:04 +0200, Torsten Curdt wrote:

> On Oct 13, 2008, at 22:01, Torsten Curdt wrote:
> 
> >
> > On Oct 13, 2008, at 21:41, Jim Idle wrote:
> >
> >> On Mon, 2008-10-13 at 21:26 +0200, Torsten Curdt wrote:
> >>>
> >>> Seems like the latest releases of antlr and stringtemplate are both
> >>> not available through
> >>>
> >>>  http://repo1.maven.org/maven2/org/antlr/
> >>>
> >>> yet. Am I looking at the wrong place? Or did no one bother to
> >>> submit it?
> >>>
> >>>  http://jira.codehaus.org/secure/CreateIssue.jspa?pid=10367&issuetype=3
> >>>
> >>
> >> I think that we should get this organized better as maven is a good
> >> system and it should be easy to write some scripts for Ter to run
> >> for each release and create the maven requirements. So, I will
> >> undertake to do this and supply the necessary for Ter, after which,
> >> we can probably automate the updates.
> >
> > At organization like Apache and Codehaus we synchronize to the repo.
> > So that makes it really easy. (see http://maven.apache.org/guides/mini/guide-central-repository-upload.html)
> >
> > For now I could just submit the jira's (I need them in there rather
> > soonish) ...but it would be better if an antlr project member would do
> > it.
> 
> So would it be OK if I prepare the bundles and submit them? Any  
> objections from the antlr team? Terence?


Not from me, but Ter and I are preparing the build process to get rsync
and so on working so that Maven can autoupdate. If you have the current
task definitions and so on, then send them to me off list so I can get
them in to perforce and we can then configure accordingly.

Cheers,

Jim

> 
> cheers
> --
> Torsten
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
> 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20081014/e71fc70f/attachment.html 

From jimi at temporal-wave.com  Tue Oct 14 08:36:47 2008
From: jimi at temporal-wave.com (Jim Idle)
Date: Tue, 14 Oct 2008 08:36:47 -0700
Subject: [antlr-interest] "become root" operator ^ sometimes fails
In-Reply-To: <20085.212.159.240.25.1223989181.squirrel@webmail.xs4all.nl>
References: <20085.212.159.240.25.1223989181.squirrel@webmail.xs4all.nl>
Message-ID: <1223998607.5040.14.camel@jimi.temporal-wave.com>

On Tue, 2008-10-14 at 14:59 +0200, Mark Langezaal wrote:

> Uhh, subtitles please...
> Do you mean this is a kind of a bug, but there is an easy workaround by
> removing the brackets?
> 



> >> // Input: 1 + 2
> >> // Generated AST: ^(+ 1 2)
> >> okExpr
> >>   :    NUM (('+'|'-')^ NUM)*



basiaclly, I think you want:

NUM ((('+')^|('-')^) NUM)*

You can also do:

NUM (arithOp^ NUM)*;

arithOp : '+' | '-' ;


Though I personally would get rid of all the literals in the parser
grammar and replace them with lexer tokens.

Jim
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20081014/46059aea/attachment.html 

From sharwell at pixelminegames.com  Tue Oct 14 09:28:10 2008
From: sharwell at pixelminegames.com (Sam Harwell)
Date: Tue, 14 Oct 2008 11:28:10 -0500
Subject: [antlr-interest] VS2008 Integration Example
In-Reply-To: <20081014091115.16C8B31296F@www.antlr.org>
References: <E7035321714C624BA01ADCBA6F99CADF010354E8E9BE@mercury.pyrogenesis.co.za>
	<20081014091115.16C8B31296F@www.antlr.org>
Message-ID: <86403CA0939415448BCCB83855EFE09A64E5D1@Bloodymary.ironwillgames.com>

Here's how you can get the Clean and Rebuild tasks working as well. If you delete the .tokens files associated with each grammar, then the grammar will get properly rebuilt:

 

<PropertyGroup>

        <CoreCleanDependsOn>$(CoreCleanDependsOn);CleanAntlrCode</CoreCleanDependsOn>

</PropertyGroup>

<Target Name="CleanAntlrCode">

        <ItemGroup>

                <_CleanAntlrFileWrites Include="@(Antlr3->'%(RelativeDir)%(Filename).tokens')" />

        </ItemGroup>

        <Message Importance="normal" Text="Antlr: Deleting output files '@(_CleanAntlrFileWrites)'" />

        <Delete Files="@(_CleanAntlrFileWrites)" />

</Target>

 

Sam

 

-----Original Message-----
From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-bounces at antlr.org] On Behalf Of Gavin Lambert
Sent: Tuesday, October 14, 2008 4:09 AM
To: Andr? van der Merwe; antlr-interest at antlr.org
Subject: Re: [antlr-interest] VS2008 Integration Example

 

At 21:35 14/10/2008, Andr? van der Merwe wrote:

>Does anyone have a simple example VS2008 

>solution that calls ANTLR as part of the build 

>(i.e. not a pre-build event).

> 

>I've followed the instructions on the web site 

>but I'm doing something wrong....

 

For which target language?

 

This is the method I use for C# projects (will 

probably also work with other .NET languages, but *not* C/C++):

 

1. Right-click, Unload Project, Right-click, Edit 

project.  (If you're using Express, you don't 

have this option, but you can edit the project 

file outside of VS instead.)

2. Somewhere inside the first <PropertyGroup> section, add these:

 

     <AntlrFolder>D:\path\to\antlr\lib</AntlrFolder>

     <AntlrClassPath>$(AntlrFolder)\antlr-3.jar;$(AntlrFolder)\stringtemplate-3.2.jar;$(AntlrFolder)\antlr-2.7.7.jar</AntlrClassPath>

 

3. Immediately below the 

<ItemGroup>...</ItemGroup> block containing your 

normal source files, add this:

 

     <ItemGroup>

       <Antlr3 Include="Your.g">

         <OutputFiles>YourLexer.g;YourParser.g;Your.tokens</OutputFiles>

       </Antlr3>

       <Antlr3 Include="YourTree.g">

         <InputFiles>Your.tokens</InputFiles>

         <OutputFiles>YourTree.cs</OutputFiles>

       </Antlr3>

       <Compile Include="YourLexer.cs">

         <AutoGen>True</AutoGen>

         <DesignTime>True</DesignTime>

         <DependentUpon>Your.g</DependentUpon>

       </Compile>

       <Compile Include="YourParser.cs">

         <AutoGen>True</AutoGen>

         <DesignTime>True</DesignTime>

         <DependentUpon>Your.g</DependentUpon>

       </Compile>

       <Compile Include="YourTree.cs">

         <AutoGen>True</AutoGen>

         <DesignTime>True</DesignTime>

         <DependentUpon>YourTree.g</DependentUpon>

       </Compile>

     </ItemGroup>

 

4. Immediately above the closing </Project> tag, add this:

 

     <Target Name="GenerateAntlrCode"

             Inputs="@(Antlr3);%(Antlr3.InputFiles)"

             Outputs="%(Antlr3.OutputFiles)">

       <Exec Command="java -cp 

&quot;$(AntlrClassPath)&quot; org.antlr.Tool 

-message-format vs2005 @(Antlr3)"

             Outputs="%(Antlr3.OutputFiles)" />

     </Target>

     <PropertyGroup>

       <BuildDependsOn>GenerateAntlrCode;$(BuildDependsOn)</BuildDependsOn>

     </PropertyGroup>

 

5. Edit the above to suit your real files.

 

There's probably better ways to do this (I'm not 

really all that experienced with MSBuild), but 

the above works for me.  It's a little bit clunky 

in that you have to manually edit the project 

whenever you add new grammar files (or outputs), 

but that's usually not something that happens very often.

 

One caveat: Visual Studio does weird things if 

you have the generated .cs files open when you 

build, especially if you've modified the 

grammar.  It's best to close the .cs files before 

you build.  (It sometimes seems to compile the 

version of the code that's shown in the editor -- 

ie. the old code -- instead of the newly 

generated code.  This is especially true if it 

thinks the code has been modified -- which 

includes the line-ending adjustment it likes 

making when you open them.)

 

 

List: http://www.antlr.org/mailman/listinfo/antlr-interest

Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20081014/44e614c3/attachment.html 

From jimi at temporal-wave.com  Tue Oct 14 09:36:56 2008
From: jimi at temporal-wave.com (Jim Idle)
Date: Tue, 14 Oct 2008 09:36:56 -0700
Subject: [antlr-interest] VS2008 Integration Example
In-Reply-To: <86403CA0939415448BCCB83855EFE09A64E5D1@Bloodymary.ironwillgames.com>
References: <E7035321714C624BA01ADCBA6F99CADF010354E8E9BE@mercury.pyrogenesis.co.za>
	<20081014091115.16C8B31296F@www.antlr.org>
	<86403CA0939415448BCCB83855EFE09A64E5D1@Bloodymary.ironwillgames.com>
Message-ID: <1224002216.5040.48.camel@jimi.temporal-wave.com>

On Tue, 2008-10-14 at 11:28 -0500, Sam Harwell wrote:
> Here?s how you can get the Clean and Rebuild tasks working as well. If
> you delete the .tokens files associated with each grammar, then the
> grammar will get properly rebuilt:
> 
>  
> 
> <PropertyGroup>
> 
> 
> <CoreCleanDependsOn>$(CoreCleanDependsOn);CleanAntlrCode</CoreCleanDependsOn>
> 
> </PropertyGroup>
> 
> <Target Name="CleanAntlrCode">
> 
>         <ItemGroup>
> 
>                 <_CleanAntlrFileWrites
> Include="@(Antlr3->'%(RelativeDir)%(Filename).tokens')" />
> 
>         </ItemGroup>
> 
>         <Message Importance="normal" Text="Antlr: Deleting output
> files '@(_CleanAntlrFileWrites)'"/>
> 
>         <Delete Files="@(_CleanAntlrFileWrites)" />
> 
> </Target>
> 


Guys,

We really need to update the WIki article rather than/as well as, post
here - this is all useful information.

Jim

>  
> 
> Sam
> 
>  
> 
> -----Original Message-----
> From: antlr-interest-bounces at antlr.org
> [mailto:antlr-interest-bounces at antlr.org] On Behalf Of Gavin Lambert
> Sent: Tuesday, October 14, 2008 4:09 AM
> To: Andr? van der Merwe; antlr-interest at antlr.org
> Subject: Re: [antlr-interest] VS2008 Integration Example
> 
>  
> 
> At 21:35 14/10/2008, Andr? van der Merwe wrote:
> 
> >Does anyone have a simple example VS2008 
> 
> >solution that calls ANTLR as part of the build 
> 
> >(i.e. not a pre-build event).
> 
> > 
> 
> >I?ve followed the instructions on the web site 
> 
> >but I?m doing something wrong....
> 
>  
> 
> For which target language?
> 
>  
> 
> This is the method I use for C# projects (will 
> 
> probably also work with other .NET languages, but *not* C/C++):
> 
>  
> 
> 1. Right-click, Unload Project, Right-click, Edit 
> 
> project.  (If you're using Express, you don't 
> 
> have this option, but you can edit the project 
> 
> file outside of VS instead.)
> 
> 2. Somewhere inside the first <PropertyGroup> section, add these:
> 
>  
> 
>      <AntlrFolder>D:\path\to\antlr\lib</AntlrFolder>
> 
>      <AntlrClassPath>$(AntlrFolder)\antlr-3.jar;
> $(AntlrFolder)\stringtemplate-3.2.jar;
> $(AntlrFolder)\antlr-2.7.7.jar</AntlrClassPath>
> 
>  
> 
> 3. Immediately below the 
> 
> <ItemGroup>...</ItemGroup> block containing your 
> 
> normal source files, add this:
> 
>  
> 
>      <ItemGroup>
> 
>        <Antlr3 Include="Your.g">
> 
> 
> <OutputFiles>YourLexer.g;YourParser.g;Your.tokens</OutputFiles>
> 
>        </Antlr3>
> 
>        <Antlr3 Include="YourTree.g">
> 
>          <InputFiles>Your.tokens</InputFiles>
> 
>          <OutputFiles>YourTree.cs</OutputFiles>
> 
>        </Antlr3>
> 
>        <Compile Include="YourLexer.cs">
> 
>          <AutoGen>True</AutoGen>
> 
>          <DesignTime>True</DesignTime>
> 
>          <DependentUpon>Your.g</DependentUpon>
> 
>        </Compile>
> 
>        <Compile Include="YourParser.cs">
> 
>          <AutoGen>True</AutoGen>
> 
>          <DesignTime>True</DesignTime>
> 
>          <DependentUpon>Your.g</DependentUpon>
> 
>        </Compile>
> 
>        <Compile Include="YourTree.cs">
> 
>          <AutoGen>True</AutoGen>
> 
>          <DesignTime>True</DesignTime>
> 
>          <DependentUpon>YourTree.g</DependentUpon>
> 
>        </Compile>
> 
>      </ItemGroup>
> 
>  
> 
> 4. Immediately above the closing </Project> tag, add this:
> 
>  
> 
>      <Target Name="GenerateAntlrCode"
> 
>              Inputs="@(Antlr3);%(Antlr3.InputFiles)"
> 
>              Outputs="%(Antlr3.OutputFiles)">
> 
>        <Exec Command="java -cp 
> 
> &quot;$(AntlrClassPath)&quot; org.antlr.Tool 
> 
> -message-format vs2005 @(Antlr3)"
> 
>              Outputs="%(Antlr3.OutputFiles)" />
> 
>      </Target>
> 
>      <PropertyGroup>
> 
>        <BuildDependsOn>GenerateAntlrCode;
> $(BuildDependsOn)</BuildDependsOn>
> 
>      </PropertyGroup>
> 
>  
> 
> 5. Edit the above to suit your real files.
> 
>  
> 
> There's probably better ways to do this (I'm not 
> 
> really all that experienced with MSBuild), but 
> 
> the above works for me.  It's a little bit clunky 
> 
> in that you have to manually edit the project 
> 
> whenever you add new grammar files (or outputs), 
> 
> but that's usually not something that happens very often.
> 
>  
> 
> One caveat: Visual Studio does weird things if 
> 
> you have the generated .cs files open when you 
> 
> build, especially if you've modified the 
> 
> grammar.  It's best to close the .cs files before 
> 
> you build.  (It sometimes seems to compile the 
> 
> version of the code that's shown in the editor -- 
> 
> ie. the old code -- instead of the newly 
> 
> generated code.  This is especially true if it 
> 
> thinks the code has been modified -- which 
> 
> includes the line-ending adjustment it likes 
> 
> making when you open them.)
> 
>  
> 
>  
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> 
> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
> 
>  
> 
> 
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
> 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20081014/e20cb0ba/attachment.html 

From parrt at cs.usfca.edu  Tue Oct 14 10:13:07 2008
From: parrt at cs.usfca.edu (Terence Parr)
Date: Tue, 14 Oct 2008 10:13:07 -0700
Subject: [antlr-interest] artifacts in maven repo
In-Reply-To: <8A4F65C1-D6BE-44A1-B2AD-4841F4223ADE@vafer.org>
References: <1ACEF478-EEDD-4503-8577-50AADA6F899A@vafer.org>
	<1223926888.4235.23.camel@jimi.temporal-wave.com>
	<474960E2-D867-47C3-949E-CEAE88F82AD6@vafer.org>
	<8A4F65C1-D6BE-44A1-B2AD-4841F4223ADE@vafer.org>
Message-ID: <B2F7A78E-18E8-4444-883F-7A1E64196B63@cs.usfca.edu>

Jim will do the work to set up :)  I just made accounts for him.
Ter
On Oct 14, 2008, at 3:04 AM, Torsten Curdt wrote:

>
> On Oct 13, 2008, at 22:01, Torsten Curdt wrote:
>
>>
>> On Oct 13, 2008, at 21:41, Jim Idle wrote:
>>
>>> On Mon, 2008-10-13 at 21:26 +0200, Torsten Curdt wrote:
>>>>
>>>> Seems like the latest releases of antlr and stringtemplate are both
>>>> not available through
>>>>
>>>> http://repo1.maven.org/maven2/org/antlr/
>>>>
>>>> yet. Am I looking at the wrong place? Or did no one bother to
>>>> submit it?
>>>>
>>>> http://jira.codehaus.org/secure/CreateIssue.jspa?pid=10367&issuetype=3
>>>>
>>>
>>> I think that we should get this organized better as maven is a good
>>> system and it should be easy to write some scripts for Ter to run
>>> for each release and create the maven requirements. So, I will
>>> undertake to do this and supply the necessary for Ter, after which,
>>> we can probably automate the updates.
>>
>> At organization like Apache and Codehaus we synchronize to the repo.
>> So that makes it really easy. (see http://maven.apache.org/guides/mini/guide-central-repository-upload.html)
>>
>> For now I could just submit the jira's (I need them in there rather
>> soonish) ...but it would be better if an antlr project member would  
>> do
>> it.
>
> So would it be OK if I prepare the bundles and submit them? Any
> objections from the antlr team? Terence?
>
> cheers
> --
> Torsten
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>


From aheller at gmx.at  Tue Oct 14 10:57:43 2008
From: aheller at gmx.at (Arnulf Heller)
Date: Tue, 14 Oct 2008 19:57:43 +0200
Subject: [antlr-interest] generating multiple files from a single input
 file
In-Reply-To: <20081013201151.87CB211EE29@www.antlr.org>
References: <82dc0d190810131149n4539bfd6ved5a5d5587f0be1f@mail.gmail.com>
	<20081013201151.87CB211EE29@www.antlr.org>
Message-ID: <20081014175759.EFES9167.viefep15-int.chello.at@edge05.upc.biz>


>
>I thought there was an example somewhere demonstrating writing out
>.c files together with .h files, but I can't find it at the moment.

Look at the ANTLR code generator (at least in the source distribution 
you can find it):

CodeGenerator.java
C.stg
CPP.stg

This is a quite good example how you can build .c and .h files at once.



From tcurdt at vafer.org  Tue Oct 14 11:14:38 2008
From: tcurdt at vafer.org (Torsten Curdt)
Date: Tue, 14 Oct 2008 20:14:38 +0200
Subject: [antlr-interest] artifacts in maven repo
In-Reply-To: <1223997962.5040.4.camel@jimi.temporal-wave.com>
References: <1ACEF478-EEDD-4503-8577-50AADA6F899A@vafer.org>
	<1223926888.4235.23.camel@jimi.temporal-wave.com>
	<474960E2-D867-47C3-949E-CEAE88F82AD6@vafer.org>
	<8A4F65C1-D6BE-44A1-B2AD-4841F4223ADE@vafer.org>
	<1223997962.5040.4.camel@jimi.temporal-wave.com>
Message-ID: <300762C8-067F-4EFB-A153-D511D2D72CF3@vafer.org>

> If you have the current task definitions and so on, then send them  
> to me off list so I can get them in to perforce and we can then  
> configure accordingly.

More of a maven user - so no tasks. But if you need help feel free to  
contact me off-list.

cheers
--
Torsten


From tcurdt at vafer.org  Tue Oct 14 11:14:43 2008
From: tcurdt at vafer.org (Torsten Curdt)
Date: Tue, 14 Oct 2008 20:14:43 +0200
Subject: [antlr-interest] artifacts in maven repo
In-Reply-To: <B2F7A78E-18E8-4444-883F-7A1E64196B63@cs.usfca.edu>
References: <1ACEF478-EEDD-4503-8577-50AADA6F899A@vafer.org>
	<1223926888.4235.23.camel@jimi.temporal-wave.com>
	<474960E2-D867-47C3-949E-CEAE88F82AD6@vafer.org>
	<8A4F65C1-D6BE-44A1-B2AD-4841F4223ADE@vafer.org>
	<B2F7A78E-18E8-4444-883F-7A1E64196B63@cs.usfca.edu>
Message-ID: <89102964-1826-4FAF-9F86-A0BD584F3515@vafer.org>

On Oct 14, 2008, at 19:13, Terence Parr wrote:

> Jim will do the work to set up :)  I just made accounts for him.

Awesome. Thanks, guys!

cheers
--
Torsten

From aheller at gmx.at  Tue Oct 14 11:16:36 2008
From: aheller at gmx.at (Arnulf Heller)
Date: Tue, 14 Oct 2008 20:16:36 +0200
Subject: [antlr-interest] generating multiple files from a single input
 file
In-Reply-To: <82dc0d190810131149n4539bfd6ved5a5d5587f0be1f@mail.gmail.co
 m>
References: <82dc0d190810131149n4539bfd6ved5a5d5587f0be1f@mail.gmail.com>
Message-ID: <20081014181729.FEMT9167.viefep15-int.chello.at@edge03.upc.biz>

At 20:49 13.10.2008, Tom Smith wrote:
>Hello,
>
>Right now I have a multipass translator to generate code based on a
>program written in a DSL (using StringTemplate rewrites).  I just
>realized that I have enough information in my AST to generate some
>other supporting files as well.  Is there a straightforward way to
>structure this task?

If performance matters you should try to run your parser once and the 
code generation multiple times with the generated AST.

If you want to make use of the string template rewrite mechanism (the 
"->" notation), I think the best way is to have one tree walker and 
run it multiple times with different string template groups (with 
setTemplateLib). If your target files are very similar (like .h and 
.cpp files) consider using the template inheritance mechanism.

If you have a simple grammar, you can also build up a simple data 
structure (e.g. lists of java objects) that you can throw at your 
string templates after parsing. This is probably the fastest way.

A good starting point are the ANTLR sources, particularly the code generator 


From yotommy at gmail.com  Tue Oct 14 11:23:52 2008
From: yotommy at gmail.com (Tom Smith)
Date: Tue, 14 Oct 2008 14:23:52 -0400
Subject: [antlr-interest] generating multiple files from a single input
	file
In-Reply-To: <20081014181729.FEMT9167.viefep15-int.chello.at@edge03.upc.biz>
References: <82dc0d190810131149n4539bfd6ved5a5d5587f0be1f@mail.gmail.com>
	<20081014181729.FEMT9167.viefep15-int.chello.at@edge03.upc.biz>
Message-ID: <82dc0d190810141123l651c4e38wa0571d75da4dd69a@mail.gmail.com>

Thanks very much --- this is just the kind of advice I was seeking!

On Tue, Oct 14, 2008 at 2:16 PM, Arnulf Heller <aheller at gmx.at> wrote:
>
> If performance matters you should try to run your parser once and the code
> generation multiple times with the generated AST.
>
> If you want to make use of the string template rewrite mechanism (the "->"
> notation), I think the best way is to have one tree walker and run it
> multiple times with different string template groups (with setTemplateLib).
> If your target files are very similar (like .h and .cpp files) consider
> using the template inheritance mechanism.
>
> If you have a simple grammar, you can also build up a simple data structure
> (e.g. lists of java objects) that you can throw at your string templates
> after parsing. This is probably the fastest way.
>
> A good starting point are the ANTLR sources, particularly the code generator
>

From sharwell at pixelminegames.com  Tue Oct 14 11:53:51 2008
From: sharwell at pixelminegames.com (Sam Harwell)
Date: Tue, 14 Oct 2008 13:53:51 -0500
Subject: [antlr-interest] Explicitly setting the text for a lexer fragment
Message-ID: <86403CA0939415448BCCB83855EFE09A64E5DC@Bloodymary.ironwillgames.com>

I'm converting an antlr2 grammar (with Java target) to antlr3 (with C#
target), and I'm having some trouble with one of the antlr2 features.

 

Here is the fragment rule that's causing the problem. The commented part
is the antlr2 version, and the uncommented part is the antlr3 version.

 

//protected

//ESC_CHAR returns [char uc='\u0000']

//      :       "\\n"! {uc = '\n';}

//      |       "\\r"! {uc = '\r';}

//      |       "\\t"! {uc = '\t';}

//      |       "\\ "! {uc = ' ';}

//      |       "\\u"! a:HEX! b:HEX! c:HEX! d:HEX!

//              {uc =
(char)Integer.parseInt(a.getText()+b.getText()+c.getText()+d.getText(),
16);}

//      ;

fragment

ESC_CHAR

        :       '\\'

                (       'n' {$text = "\n";}

                |       'r' {$text = "\r";}

                |       't' {$text = "\t";}

                |       ' ' {$text = " ";}

                |       'u' a=HEX b=HEX c=HEX d=HEX

                        { $text = new
string((char)int.Parse($a.text+$b.text+$c.text+$d.text,
System.Globalization.NumberStyles.AllowHexSpecifier ), 1); }

                )

        ;

 

At first, I tried simply using a return value and setting it in the
rule:

 

fragment

ESC_CHAR returns [char uc='\0']

        :       '\\'

                (       'n' {$uc = '\n';}

                |       ...

                )

        ;

 

But I found out that lexer rules can't return values.

 

The problem I'm hitting now is setting the $text in a lexer fragment
rule whacks the text for the entire token (replacing even the text for
the rule that called the fragment rule). Any suggestions? Here's a
cropped version of the rule that's calling the fragment:

 

ACTION

@init

{

        StringBuffer buf = null;

}

        :       ('<\\') =>

                // Match escapes not in a string like <\n\ufea5>

                {

                        buf = new StringBuffer();

                }

                '<' (ESC_CHAR {buf.append($ESC_CHAR.text);} )+ '>'

                {

                        $text = buf.ToString();

                        $type = LITERAL;

                }

        |       ...

        ;

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20081014/44c19054/attachment.html 

From antlr at mirality.co.nz  Tue Oct 14 13:13:53 2008
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Wed, 15 Oct 2008 09:13:53 +1300
Subject: [antlr-interest] Understanding ANTLR's 'multiple alternatives'
In-Reply-To: <200810142254.01158.vl@localhost>
References: <200810140020.51126.vl@localhost>
	<48f4482b.27052c0a.68cc.ffff9b66SMTPIN_ADDED@mx.google.com>
	<200810142254.01158.vl@localhost>
Message-ID: <20081014201402.3E52E3D16ED@www.antlr.org>

At 07:54 15/10/2008, `VL wrote:
 >Hmm. This looks better. But it doesn't match construction
 >like this: $(VAR)/some/path.

That's a different form than what you were showing before :)

To match that, you can treat them all as equals:

PATH : ('/' | ENVAR | ID | INT)+;

Of course, this no longer guarantees that there is a '/' present 
at all.

Another option specifically for the leading-ENVAR case (basically 
assuming that all paths must be absolute, but the base path may be 
contained in an ENVAR):

PATH : ENVAR? ('/' (ID | INT)*)+;


You do need to be careful you're not doing too much work in the 
lexer, though.  Remember that the lexer is context-free, and all 
top-level rules are always candidates to match the input.  You may 
therefore end up with a different token type than you're 
expecting, if there is overlap between the token rules.


From antlr at mirality.co.nz  Tue Oct 14 13:22:53 2008
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Wed, 15 Oct 2008 09:22:53 +1300
Subject: [antlr-interest] VS2008 Integration Example
In-Reply-To: <86403CA0939415448BCCB83855EFE09A64E5D1@Bloodymary.ironwill
	games.com>
References: <E7035321714C624BA01ADCBA6F99CADF010354E8E9BE@mercury.pyrogenesis.co.za>
	<20081014091115.16C8B31296F@www.antlr.org>
	<86403CA0939415448BCCB83855EFE09A64E5D1@Bloodymary.ironwillgames.com>
Message-ID: <20081014202312.DB8E03D16F5@www.antlr.org>

At 05:28 15/10/2008, Sam Harwell wrote:
>Here's how you can get the Clean and Rebuild tasks working as 
>well. If you delete the .tokens files associated with each 
>grammar, then the grammar will get properly rebuilt:
>
><PropertyGroup>
> 
><CoreCleanDependsOn>$(CoreCleanDependsOn);CleanAntlrCode</CoreCleanDependsOn>
></PropertyGroup>
><Target Name="CleanAntlrCode">
>         <ItemGroup>
>                 <_CleanAntlrFileWrites 
> Include="@(Antlr3->'%(RelativeDir)%(Filename).tokens')" />
>         </ItemGroup>
>         <Message Importance="normal" Text="Antlr: Deleting 
> output files '@(_CleanAntlrFileWrites)'" />
>         <Delete Files="@(_CleanAntlrFileWrites)" />
></Target>

Wouldn't it be better to remove all the output files, not just the 
.tokens file?  You should be able to do that by using this line 
instead (though I haven't tested it):

<Delete Files="%(Antlr3.OutputFiles)" />


From sharwell at pixelminegames.com  Tue Oct 14 13:25:01 2008
From: sharwell at pixelminegames.com (Sam Harwell)
Date: Tue, 14 Oct 2008 15:25:01 -0500
Subject: [antlr-interest] VS2008 Integration Example
In-Reply-To: <BLOODYMARY8O7TRURqY00000899@Bloodymary.ironwillgames.com>
References: <E7035321714C624BA01ADCBA6F99CADF010354E8E9BE@mercury.pyrogenesis.co.za>
	<20081014091115.16C8B31296F@www.antlr.org>
	<86403CA0939415448BCCB83855EFE09A64E5D1@Bloodymary.ironwillgames.com>
	<BLOODYMARY8O7TRURqY00000899@Bloodymary.ironwillgames.com>
Message-ID: <86403CA0939415448BCCB83855EFE09A64E5EE@Bloodymary.ironwillgames.com>

Delete doesn't properly handle ; delimited lists of files. :( Plus we check the generated .cs files into Perforce so it's good to have them around (in our case).

Sam

-----Original Message-----
From: Gavin Lambert [mailto:antlr at mirality.co.nz] 
Sent: Tuesday, October 14, 2008 3:23 PM
To: Sam Harwell; Andr? van der Merwe; antlr-interest at antlr.org
Subject: RE: [antlr-interest] VS2008 Integration Example

At 05:28 15/10/2008, Sam Harwell wrote:
>Here's how you can get the Clean and Rebuild tasks working as 
>well. If you delete the .tokens files associated with each 
>grammar, then the grammar will get properly rebuilt:
>
><PropertyGroup>
> 
><CoreCleanDependsOn>$(CoreCleanDependsOn);CleanAntlrCode</CoreCleanDependsOn>
></PropertyGroup>
><Target Name="CleanAntlrCode">
>         <ItemGroup>
>                 <_CleanAntlrFileWrites 
> Include="@(Antlr3->'%(RelativeDir)%(Filename).tokens')" />
>         </ItemGroup>
>         <Message Importance="normal" Text="Antlr: Deleting 
> output files '@(_CleanAntlrFileWrites)'" />
>         <Delete Files="@(_CleanAntlrFileWrites)" />
></Target>

Wouldn't it be better to remove all the output files, not just the 
.tokens file?  You should be able to do that by using this line 
instead (though I haven't tested it):

<Delete Files="%(Antlr3.OutputFiles)" />


From westlifezs at gmail.com  Tue Oct 14 18:18:01 2008
From: westlifezs at gmail.com (Su Zhang)
Date: Tue, 14 Oct 2008 18:18:01 -0700
Subject: [antlr-interest] is there any good example can change prolog to
	.dot file by antlr?
Message-ID: <e2842950810141818v4b1d124bia85bbd0ea9a2888d@mail.gmail.com>

question is the same as subject
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20081014/c522c87f/attachment.html 

From elldekaa at gmail.com  Wed Oct 15 11:56:16 2008
From: elldekaa at gmail.com (LdK ^^)
Date: Wed, 15 Oct 2008 20:56:16 +0200
Subject: [antlr-interest] Problem with multiple treeparser ...
Message-ID: <b3e94fd60810151156qc50cb17mb7020fe788f94d29@mail.gmail.com>

Hi,
I have a problem when i use multiple treeparser,
the first is in same file that the parser
but the second is in a other file and i always get an "" when i make a
get.text() in this tree parser
so i dont uderstand, are there any options to share informations ???
thx a lot,

Herve
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20081015/852c2d6f/attachment.html 

From antlr at mirality.co.nz  Wed Oct 15 12:28:03 2008
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Thu, 16 Oct 2008 08:28:03 +1300
Subject: [antlr-interest] Problem with multiple treeparser ...
In-Reply-To: <b3e94fd60810151156qc50cb17mb7020fe788f94d29@mail.gmail.com
 >
References: <b3e94fd60810151156qc50cb17mb7020fe788f94d29@mail.gmail.com>
Message-ID: <20081015192814.0EDC811EE11@www.antlr.org>

At 07:56 16/10/2008, LdK ^^ wrote:
>I have a problem when i use multiple treeparser,
>the first is in same file that the parser

You can't make a tree parser in the same grammar file as your 
lexer/parser.

>but the second is in a other file and i always get an "" when i 
>make a get.text() in this tree parser

When you construct the tree parser (in your driver code), you need 
to pass the AST node stream from the parser into it and you need 
to give it access to the underlying token stream as well.


From elldekaa at gmail.com  Wed Oct 15 13:51:11 2008
From: elldekaa at gmail.com (LdK ^^)
Date: Wed, 15 Oct 2008 22:51:11 +0200
Subject: [antlr-interest] Problem with multiple treeparser ...
In-Reply-To: <48f6444e.4c1f2c0a.08e5.124aSMTPIN_ADDED@mx.google.com>
References: <b3e94fd60810151156qc50cb17mb7020fe788f94d29@mail.gmail.com>
	<48f6444e.4c1f2c0a.08e5.124aSMTPIN_ADDED@mx.google.com>
Message-ID: <b3e94fd60810151351x23ab21c0n50f7a9573c04dca6@mail.gmail.com>

 I have a problem when i use multiple treeparser,
>> the first is in same file that the parser
>>
>
> You can't make a tree parser in the same grammar file as your lexer/parser.


i don't know if there are some difference but i work with the version 2.7.6
of antlr (my school version)
and i'm sur that i can put the parser and treeparser in the same grammar
file


>  but the second is in a other file and i always get an "" when i make a
>> get.text() in this tree parser
>>
>
> When you construct the tree parser (in your driver code), you need to pass
> the AST node stream from the parser into it and you need to give it access
> to the underlying token stream as well.
>
>
yeah i do that


that's my code (the two tree parser make the same thing, that's just to
debbug) :

PARSER.G

class XHTMLParser extends Parser;
options {
    importVocab=XHTML;
    k = 1;
    buildAST = true;
    defaultErrorHandler=false;
}

//TODO

table        : TAB^ (milieu)+ TABF! EOF!;
milieu        : TRD^ (ligne)+ TRF!;
ligne        : TDD! STR TDF!;

///===========================================================================

{import java.util.*;}
class XHTMLTreeParser   extends  TreeParser;

options    {
        k=1;
        buildAST = true;
    }


{
int n;
String S="";
}

table returns [String chaine=new String()]
            : #(TAB (milieu)*) {chaine=S;}
            ;

milieu            : #(tr:TRD{
            n=tr.getNumberOfChildren();
            } (ligne)*){
            S=S.concat(System.getProperty("line.separator"));
            }
            ;

ligne            : e:STR {
            S=S.concat("\""+e.getText());
            n--;
            if(n!=0) S=S.concat(",");
            }
            ;



//TODO


NEXT FILE :

{import java.util.*;}
class XHTMLNewTreeParser extends TreeParser;

options    {
        buildAST = true;

    }
{
int n;
String S="";
}


table returns [String chaine=new String()]
            : #(TAB (milieu)*) {chaine=S;}
            ;

milieu            : #(tr:TRD{
            n=tr.getNumberOfChildren();
            } (ligne)*){
            S=S.concat(System.getProperty("line.separator"));
            }
            ;

ligne            : e:STR {
            S=S.concat("\""+e.getText());
            n--;
            if(n!=0) S=S.concat(",");
            }
            ;


AND MAIN.JAVA :


import java.io.*;
import java.util.*;
import antlr.collections.AST;
import antlr.debug.misc.ASTFrame;
public class Main {
   public static void main(String args[]) {
      if(args.length==0) { error(); }

      FileInputStream fileInput = null;
      try {
         fileInput = new FileInputStream(args[0]);
      } catch(Exception e) { error(); }

      try {
         DataInputStream input = new DataInputStream(fileInput);

         XHTMLLexer xhtmlLexer =   new XHTMLLexer(input);
         XHTMLParser xhtmlParser = new XHTMLParser(xhtmlLexer);
         xhtmlParser.table();

         AST t = (AST)xhtmlParser.getAST();

            // Print the resulting tree out in LISP notation
            //System.out.println(t.toStringTree()+"\n\n");
                    //Show the resulting tree out in a frame
            ASTFrame frame = new ASTFrame("AST", t);
            frame.setVisible(true);

                    //-----------------------------------------------

                    //Tree Parser
            XHTMLNewTreeParser newtparser = new XHTMLNewTreeParser();
             String space = newtparser.table(t);
            System.out.println(space);
            //System.out.println(space[0]+","+space[0]);
            XHTMLTreeParser tparser = new XHTMLTreeParser();
            String s = tparser.table(t);
            System.out.println(s);
            FileWriter fw = new FileWriter ("ddd.txt");
            fw.write(s);
            fw.close();

      } catch(Exception e) { System.err.println(e.getMessage()); }
   }

   private static void error() {
      System.out.println("*----------------------------------*");
      System.out.println("| USAGE:                           |");
      System.out.println("|   java Main inputfile              |");
      System.out.println("*----------------------------------*");
      System.exit(0);
   }
}


Thx a lot to your help and sorry for my poor englsih ...
Herve
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20081015/b8d9fb47/attachment.html 

From smbogan at gmail.com  Wed Oct 15 19:11:19 2008
From: smbogan at gmail.com (Shaun Bogan)
Date: Wed, 15 Oct 2008 21:11:19 -0500
Subject: [antlr-interest] [C Target] Example without treewalker
Message-ID: <31160efe0810151911y2ee65491pd3ebd3699da31145@mail.gmail.com>

Is anyone aware of an example for the C target that doesn't use a tree
parser.  I prefer to walk the AST myself for my application.  I've had
considerable luck using the C# target, but the C target seems to elude
me.  I can't even do simple things like print out the text of a node,
etc.  If anyone has an example that would help me greatly.  Unless I
missed one, none of the examples in the downloads section walk the
tree manually.

Thanks,
Shaun Bogan

On Wed, Oct 15, 2008 at 2:00 PM,  <antlr-interest-request at antlr.org> wrote:
> Send antlr-interest mailing list submissions to
>        antlr-interest at antlr.org
>
> To subscribe or unsubscribe via the World Wide Web, visit
>        http://www.antlr.org/mailman/listinfo/antlr-interest
> or, via email, send a message with subject or body 'help' to
>        antlr-interest-request at antlr.org
>
> You can reach the person managing the list at
>        antlr-interest-owner at antlr.org
>
> When replying, please edit your Subject line so it is more specific
> than "Re: Contents of antlr-interest digest..."
>
>
> Today's Topics:
>
>   1. Re: Understanding ANTLR's 'multiple alternatives' (Gavin Lambert)
>   2. Re: VS2008 Integration Example (Gavin Lambert)
>   3. Re: VS2008 Integration Example (Sam Harwell)
>   4. is there any good example can change prolog to    .dot file by
>      antlr? (Su Zhang)
>   5. Problem with multiple treeparser ... (LdK ^^)
>
>
> ----------------------------------------------------------------------
>
> Message: 1
> Date: Wed, 15 Oct 2008 09:13:53 +1300
> From: Gavin Lambert <antlr at mirality.co.nz>
> Subject: Re: [antlr-interest] Understanding ANTLR's 'multiple
>        alternatives'
> To: `VL <vl.homutov at gmail.com>, "antlr-interest at antlr.org"
>        <antlr-interest at antlr.org>
> Message-ID: <20081014201402.3E52E3D16ED at www.antlr.org>
> Content-Type: text/plain; charset="us-ascii"; format=flowed
>
> At 07:54 15/10/2008, `VL wrote:
>  >Hmm. This looks better. But it doesn't match construction
>  >like this: $(VAR)/some/path.
>
> That's a different form than what you were showing before :)
>
> To match that, you can treat them all as equals:
>
> PATH : ('/' | ENVAR | ID | INT)+;
>
> Of course, this no longer guarantees that there is a '/' present
> at all.
>
> Another option specifically for the leading-ENVAR case (basically
> assuming that all paths must be absolute, but the base path may be
> contained in an ENVAR):
>
> PATH : ENVAR? ('/' (ID | INT)*)+;
>
>
> You do need to be careful you're not doing too much work in the
> lexer, though.  Remember that the lexer is context-free, and all
> top-level rules are always candidates to match the input.  You may
> therefore end up with a different token type than you're
> expecting, if there is overlap between the token rules.
>
>
>
> ------------------------------
>
> Message: 2
> Date: Wed, 15 Oct 2008 09:22:53 +1300
> From: Gavin Lambert <antlr at mirality.co.nz>
> Subject: Re: [antlr-interest] VS2008 Integration Example
> To: "Sam Harwell" <sharwell at pixelminegames.com>, Andr?  van der Merwe
>        <AndrevdM at pyrogenesis.co.za>, <antlr-interest at antlr.org>
> Message-ID: <20081014202312.DB8E03D16F5 at www.antlr.org>
> Content-Type: text/plain; charset="us-ascii"; format=flowed
>
> At 05:28 15/10/2008, Sam Harwell wrote:
>>Here's how you can get the Clean and Rebuild tasks working as
>>well. If you delete the .tokens files associated with each
>>grammar, then the grammar will get properly rebuilt:
>>
>><PropertyGroup>
>>
>><CoreCleanDependsOn>$(CoreCleanDependsOn);CleanAntlrCode</CoreCleanDependsOn>
>></PropertyGroup>
>><Target Name="CleanAntlrCode">
>>         <ItemGroup>
>>                 <_CleanAntlrFileWrites
>> Include="@(Antlr3->'%(RelativeDir)%(Filename).tokens')" />
>>         </ItemGroup>
>>         <Message Importance="normal" Text="Antlr: Deleting
>> output files '@(_CleanAntlrFileWrites)'" />
>>         <Delete Files="@(_CleanAntlrFileWrites)" />
>></Target>
>
> Wouldn't it be better to remove all the output files, not just the
> .tokens file?  You should be able to do that by using this line
> instead (though I haven't tested it):
>
> <Delete Files="%(Antlr3.OutputFiles)" />
>
>
>
> ------------------------------
>
> Message: 3
> Date: Tue, 14 Oct 2008 15:25:01 -0500
> From: "Sam Harwell" <sharwell at pixelminegames.com>
> Subject: Re: [antlr-interest] VS2008 Integration Example
> To: "Gavin Lambert" <antlr at mirality.co.nz>, Andr?  van der Merwe
>        <AndrevdM at pyrogenesis.co.za>,   <antlr-interest at antlr.org>
> Message-ID:
>        <86403CA0939415448BCCB83855EFE09A64E5EE at Bloodymary.ironwillgames.com>
> Content-Type: text/plain;       charset="iso-8859-1"
>
> Delete doesn't properly handle ; delimited lists of files. :( Plus we check the generated .cs files into Perforce so it's good to have them around (in our case).
>
> Sam
>
> -----Original Message-----
> From: Gavin Lambert [mailto:antlr at mirality.co.nz]
> Sent: Tuesday, October 14, 2008 3:23 PM
> To: Sam Harwell; Andr? van der Merwe; antlr-interest at antlr.org
> Subject: RE: [antlr-interest] VS2008 Integration Example
>
> At 05:28 15/10/2008, Sam Harwell wrote:
>>Here's how you can get the Clean and Rebuild tasks working as
>>well. If you delete the .tokens files associated with each
>>grammar, then the grammar will get properly rebuilt:
>>
>><PropertyGroup>
>>
>><CoreCleanDependsOn>$(CoreCleanDependsOn);CleanAntlrCode</CoreCleanDependsOn>
>></PropertyGroup>
>><Target Name="CleanAntlrCode">
>>         <ItemGroup>
>>                 <_CleanAntlrFileWrites
>> Include="@(Antlr3->'%(RelativeDir)%(Filename).tokens')" />
>>         </ItemGroup>
>>         <Message Importance="normal" Text="Antlr: Deleting
>> output files '@(_CleanAntlrFileWrites)'" />
>>         <Delete Files="@(_CleanAntlrFileWrites)" />
>></Target>
>
> Wouldn't it be better to remove all the output files, not just the
> .tokens file?  You should be able to do that by using this line
> instead (though I haven't tested it):
>
> <Delete Files="%(Antlr3.OutputFiles)" />
>
>
>
> ------------------------------
>
> Message: 4
> Date: Tue, 14 Oct 2008 18:18:01 -0700
> From: "Su Zhang" <westlifezs at gmail.com>
> Subject: [antlr-interest] is there any good example can change prolog
>        to      .dot file by antlr?
> To: antlr-interest at antlr.org
> Message-ID:
>        <e2842950810141818v4b1d124bia85bbd0ea9a2888d at mail.gmail.com>
> Content-Type: text/plain; charset="iso-8859-1"
>
> question is the same as subject
> -------------- next part --------------
> An HTML attachment was scrubbed...
> URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20081014/c522c87f/attachment-0001.html
>
> ------------------------------
>
> Message: 5
> Date: Wed, 15 Oct 2008 20:56:16 +0200
> From: "LdK ^^" <elldekaa at gmail.com>
> Subject: [antlr-interest] Problem with multiple treeparser ...
> To: antlr-interest at antlr.org
> Message-ID:
>        <b3e94fd60810151156qc50cb17mb7020fe788f94d29 at mail.gmail.com>
> Content-Type: text/plain; charset="iso-8859-1"
>
> Hi,
> I have a problem when i use multiple treeparser,
> the first is in same file that the parser
> but the second is in a other file and i always get an "" when i make a
> get.text() in this tree parser
> so i dont uderstand, are there any options to share informations ???
> thx a lot,
>
> Herve
> -------------- next part --------------
> An HTML attachment was scrubbed...
> URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20081015/852c2d6f/attachment-0001.html
>
> ------------------------------
>
> _______________________________________________
> antlr-interest mailing list
> antlr-interest at antlr.org
> http://www.antlr.org/mailman/listinfo/antlr-interest
>
>
> End of antlr-interest Digest, Vol 47, Issue 15
> **********************************************
>

From jimi at temporal-wave.com  Wed Oct 15 20:11:42 2008
From: jimi at temporal-wave.com (Jim Idle)
Date: Wed, 15 Oct 2008 20:11:42 -0700
Subject: [antlr-interest] [C Target] Example without treewalker
In-Reply-To: <31160efe0810151911y2ee65491pd3ebd3699da31145@mail.gmail.com>
References: <31160efe0810151911y2ee65491pd3ebd3699da31145@mail.gmail.com>
Message-ID: <1224126702.8413.6.camel@jimi.temporal-wave.com>

On Wed, 2008-10-15 at 21:11 -0500, Shaun Bogan wrote:

> Is anyone aware of an example for the C target that doesn't use a tree
> parser.  I prefer to walk the AST myself for my application.  I've had
> considerable luck using the C# target, but the C target seems to elude
> me.  I can't even do simple things like print out the text of a node,
> etc.  If anyone has an example that would help me greatly.  Unless I
> missed one, none of the examples in the downloads section walk the
> tree manually.


Well, if you have worked out how to walk the tree manually in C# there
is really little difference in C. A good way to find out things is to
use VS 2008 and just type '->', which gives you all the 'methods' and
which you will find are pretty much exactly the same, other than being
nX faster. The C source code also shows you how to do so, but where are
you having problems getting started? It might be easier to help if I
know what you are trying to do as walking the tree manually is just a
few (i =0; ... and getChild() calls. For instance a good example in the
3.1.1 source is the methods that produce a .dot spec of any tree. The
codes is about 40 lines worth.

I may also be guilty of assuming that anyone using my C target is
willing to dive in to the sources and so on, but I have tried to
document the code :-)

Jim


> 
> Thanks,
> Shaun Bogan
> 
> On Wed, Oct 15, 2008 at 2:00 PM,  <antlr-interest-request at antlr.org> wrote:
> > Send antlr-interest mailing list submissions to
> >        antlr-interest at antlr.org
> >
> > To subscribe or unsubscribe via the World Wide Web, visit
> >        http://www.antlr.org/mailman/listinfo/antlr-interest
> > or, via email, send a message with subject or body 'help' to
> >        antlr-interest-request at antlr.org
> >
> > You can reach the person managing the list at
> >        antlr-interest-owner at antlr.org
> >
> > When replying, please edit your Subject line so it is more specific
> > than "Re: Contents of antlr-interest digest..."
> >
> >
> > Today's Topics:
> >
> >   1. Re: Understanding ANTLR's 'multiple alternatives' (Gavin Lambert)
> >   2. Re: VS2008 Integration Example (Gavin Lambert)
> >   3. Re: VS2008 Integration Example (Sam Harwell)
> >   4. is there any good example can change prolog to    .dot file by
> >      antlr? (Su Zhang)
> >   5. Problem with multiple treeparser ... (LdK ^^)
> >
> >
> > ----------------------------------------------------------------------
> >
> > Message: 1
> > Date: Wed, 15 Oct 2008 09:13:53 +1300
> > From: Gavin Lambert <antlr at mirality.co.nz>
> > Subject: Re: [antlr-interest] Understanding ANTLR's 'multiple
> >        alternatives'
> > To: `VL <vl.homutov at gmail.com>, "antlr-interest at antlr.org"
> >        <antlr-interest at antlr.org>
> > Message-ID: <20081014201402.3E52E3D16ED at www.antlr.org>
> > Content-Type: text/plain; charset="us-ascii"; format=flowed
> >
> > At 07:54 15/10/2008, `VL wrote:
> >  >Hmm. This looks better. But it doesn't match construction
> >  >like this: $(VAR)/some/path.
> >
> > That's a different form than what you were showing before :)
> >
> > To match that, you can treat them all as equals:
> >
> > PATH : ('/' | ENVAR | ID | INT)+;
> >
> > Of course, this no longer guarantees that there is a '/' present
> > at all.
> >
> > Another option specifically for the leading-ENVAR case (basically
> > assuming that all paths must be absolute, but the base path may be
> > contained in an ENVAR):
> >
> > PATH : ENVAR? ('/' (ID | INT)*)+;
> >
> >
> > You do need to be careful you're not doing too much work in the
> > lexer, though.  Remember that the lexer is context-free, and all
> > top-level rules are always candidates to match the input.  You may
> > therefore end up with a different token type than you're
> > expecting, if there is overlap between the token rules.
> >
> >
> >
> > ------------------------------
> >
> > Message: 2
> > Date: Wed, 15 Oct 2008 09:22:53 +1300
> > From: Gavin Lambert <antlr at mirality.co.nz>
> > Subject: Re: [antlr-interest] VS2008 Integration Example
> > To: "Sam Harwell" <sharwell at pixelminegames.com>, Andr?  van der Merwe
> >        <AndrevdM at pyrogenesis.co.za>, <antlr-interest at antlr.org>
> > Message-ID: <20081014202312.DB8E03D16F5 at www.antlr.org>
> > Content-Type: text/plain; charset="us-ascii"; format=flowed
> >
> > At 05:28 15/10/2008, Sam Harwell wrote:
> >>Here's how you can get the Clean and Rebuild tasks working as
> >>well. If you delete the .tokens files associated with each
> >>grammar, then the grammar will get properly rebuilt:
> >>
> >><PropertyGroup>
> >>
> >><CoreCleanDependsOn>$(CoreCleanDependsOn);CleanAntlrCode</CoreCleanDependsOn>
> >></PropertyGroup>
> >><Target Name="CleanAntlrCode">
> >>         <ItemGroup>
> >>                 <_CleanAntlrFileWrites
> >> Include="@(Antlr3->'%(RelativeDir)%(Filename).tokens')" />
> >>         </ItemGroup>
> >>         <Message Importance="normal" Text="Antlr: Deleting
> >> output files '@(_CleanAntlrFileWrites)'" />
> >>         <Delete Files="@(_CleanAntlrFileWrites)" />
> >></Target>
> >
> > Wouldn't it be better to remove all the output files, not just the
> > .tokens file?  You should be able to do that by using this line
> > instead (though I haven't tested it):
> >
> > <Delete Files="%(Antlr3.OutputFiles)" />
> >
> >
> >
> > ------------------------------
> >
> > Message: 3
> > Date: Tue, 14 Oct 2008 15:25:01 -0500
> > From: "Sam Harwell" <sharwell at pixelminegames.com>
> > Subject: Re: [antlr-interest] VS2008 Integration Example
> > To: "Gavin Lambert" <antlr at mirality.co.nz>, Andr?  van der Merwe
> >        <AndrevdM at pyrogenesis.co.za>,   <antlr-interest at antlr.org>
> > Message-ID:
> >        <86403CA0939415448BCCB83855EFE09A64E5EE at Bloodymary.ironwillgames.com>
> > Content-Type: text/plain;       charset="iso-8859-1"
> >
> > Delete doesn't properly handle ; delimited lists of files. :( Plus we check the generated .cs files into Perforce so it's good to have them around (in our case).
> >
> > Sam
> >
> > -----Original Message-----
> > From: Gavin Lambert [mailto:antlr at mirality.co.nz]
> > Sent: Tuesday, October 14, 2008 3:23 PM
> > To: Sam Harwell; Andr? van der Merwe; antlr-interest at antlr.org
> > Subject: RE: [antlr-interest] VS2008 Integration Example
> >
> > At 05:28 15/10/2008, Sam Harwell wrote:
> >>Here's how you can get the Clean and Rebuild tasks working as
> >>well. If you delete the .tokens files associated with each
> >>grammar, then the grammar will get properly rebuilt:
> >>
> >><PropertyGroup>
> >>
> >><CoreCleanDependsOn>$(CoreCleanDependsOn);CleanAntlrCode</CoreCleanDependsOn>
> >></PropertyGroup>
> >><Target Name="CleanAntlrCode">
> >>         <ItemGroup>
> >>                 <_CleanAntlrFileWrites
> >> Include="@(Antlr3->'%(RelativeDir)%(Filename).tokens')" />
> >>         </ItemGroup>
> >>         <Message Importance="normal" Text="Antlr: Deleting
> >> output files '@(_CleanAntlrFileWrites)'" />
> >>         <Delete Files="@(_CleanAntlrFileWrites)" />
> >></Target>
> >
> > Wouldn't it be better to remove all the output files, not just the
> > .tokens file?  You should be able to do that by using this line
> > instead (though I haven't tested it):
> >
> > <Delete Files="%(Antlr3.OutputFiles)" />
> >
> >
> >
> > ------------------------------
> >
> > Message: 4
> > Date: Tue, 14 Oct 2008 18:18:01 -0700
> > From: "Su Zhang" <westlifezs at gmail.com>
> > Subject: [antlr-interest] is there any good example can change prolog
> >        to      .dot file by antlr?
> > To: antlr-interest at antlr.org
> > Message-ID:
> >        <e2842950810141818v4b1d124bia85bbd0ea9a2888d at mail.gmail.com>
> > Content-Type: text/plain; charset="iso-8859-1"
> >
> > question is the same as subject
> > -------------- next part --------------
> > An HTML attachment was scrubbed...
> > URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20081014/c522c87f/attachment-0001.html
> >
> > ------------------------------
> >
> > Message: 5
> > Date: Wed, 15 Oct 2008 20:56:16 +0200
> > From: "LdK ^^" <elldekaa at gmail.com>
> > Subject: [antlr-interest] Problem with multiple treeparser ...
> > To: antlr-interest at antlr.org
> > Message-ID:
> >        <b3e94fd60810151156qc50cb17mb7020fe788f94d29 at mail.gmail.com>
> > Content-Type: text/plain; charset="iso-8859-1"
> >
> > Hi,
> > I have a problem when i use multiple treeparser,
> > the first is in same file that the parser
> > but the second is in a other file and i always get an "" when i make a
> > get.text() in this tree parser
> > so i dont uderstand, are there any options to share informations ???
> > thx a lot,
> >
> > Herve
> > -------------- next part --------------
> > An HTML attachment was scrubbed...
> > URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20081015/852c2d6f/attachment-0001.html
> >
> > ------------------------------
> >
> > _______________________________________________
> > antlr-interest mailing list
> > antlr-interest at antlr.org
> > http://www.antlr.org/mailman/listinfo/antlr-interest
> >
> >
> > End of antlr-interest Digest, Vol 47, Issue 15
> > **********************************************
> >
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
> 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20081015/c1e94d73/attachment.html 

From antlr at mirality.co.nz  Thu Oct 16 03:44:00 2008
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Thu, 16 Oct 2008 23:44:00 +1300
Subject: [antlr-interest] Problem with multiple treeparser ...
In-Reply-To: <b3e94fd60810151351x23ab21c0n50f7a9573c04dca6@mail.gmail.co
 m>
References: <b3e94fd60810151156qc50cb17mb7020fe788f94d29@mail.gmail.com>
	<48f6444e.4c1f2c0a.08e5.124aSMTPIN_ADDED@mx.google.com>
	<b3e94fd60810151351x23ab21c0n50f7a9573c04dca6@mail.gmail.com>
Message-ID: <20081016104408.1D1EE11ED96@www.antlr.org>

At 09:51 16/10/2008, LdK ^^ wrote:
>i don't know if there are some difference but i work with the 
>version 2.7.6 of antlr (my school version)
>and i'm sur that i can put the parser and treeparser in the same 
>grammar file

Oh, right.  You didn't say that before :)  The default now is to 
assume ANTLR v3 unless otherwise specified, and you can't do that 
in v3.

>NEXT FILE :
>
>{import java.util.*;}
>class XHTMLNewTreeParser extends TreeParser;
>
>options    {
>         buildAST = true;
>
>     }

When you have a tree parser in a separate file like this, you need 
to specify the importVocab option, so that it knows how to find 
the token definitions.

// in the parser
options {
   exportVocab = XHTML;
}

// in the tree parser
options {
   importVocab = XHTML;
}


From elldekaa at gmail.com  Thu Oct 16 05:58:31 2008
From: elldekaa at gmail.com (LdK ^^)
Date: Thu, 16 Oct 2008 14:58:31 +0200
Subject: [antlr-interest] Problem with multiple treeparser ...
In-Reply-To: <48f71af7.2d352c0a.2589.ffffd2b0SMTPIN_ADDED@mx.google.com>
References: <b3e94fd60810151156qc50cb17mb7020fe788f94d29@mail.gmail.com>
	<48f6444e.4c1f2c0a.08e5.124aSMTPIN_ADDED@mx.google.com>
	<b3e94fd60810151351x23ab21c0n50f7a9573c04dca6@mail.gmail.com>
	<48f71af7.2d352c0a.2589.ffffd2b0SMTPIN_ADDED@mx.google.com>
Message-ID: <b3e94fd60810160558p3d519823mab8404b409e75e8d@mail.gmail.com>

that works ..
thank you very much !!!

2008/10/16 Gavin Lambert <antlr at mirality.co.nz>

> At 09:51 16/10/2008, LdK ^^ wrote:
>
>> i don't know if there are some difference but i work with the version
>> 2.7.6 of antlr (my school version)
>> and i'm sur that i can put the parser and treeparser in the same grammar
>> file
>>
>
> Oh, right.  You didn't say that before :)  The default now is to assume
> ANTLR v3 unless otherwise specified, and you can't do that in v3.
>
>  NEXT FILE :
>>
>> {import java.util.*;}
>> class XHTMLNewTreeParser extends TreeParser;
>>
>> options    {
>>        buildAST = true;
>>
>>    }
>>
>
> When you have a tree parser in a separate file like this, you need to
> specify the importVocab option, so that it knows how to find the token
> definitions.
>
> // in the parser
> options {
>  exportVocab = XHTML;
> }
>
> // in the tree parser
> options {
>  importVocab = XHTML;
> }
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20081016/c26344d6/attachment.html 

From canjren at yahoo.com  Thu Oct 16 08:18:42 2008
From: canjren at yahoo.com (Can Zhen)
Date: Thu, 16 Oct 2008 08:18:42 -0700 (PDT)
Subject: [antlr-interest] Parser does not exit immediately upon first
	recognition error
Message-ID: <235526.93376.qm@web39707.mail.mud.yahoo.com>

I work on a project that requires that Parser does exit immediately upon first recognition error. So I overrode two methods, mismatch() and recoverFromMismatchedSet and add the following to parser grammar:
@rulecatch 
{
?? catch (RecognitionException re) 
?? {
????? throw re;
?? }
}
?
Most of the time, parser does exit immediately upon first recognition error. But sometimes, it only wrote the first RecognitionException message to the System output and continued instead of throwing the exception and exiting out. Any idea why that happened and how to fix it??
?


      
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20081016/d6e45083/attachment.html 

From andersen at ontologyworks.com  Thu Oct 16 10:28:24 2008
From: andersen at ontologyworks.com (Bill Andersen)
Date: Thu, 16 Oct 2008 13:28:24 -0400
Subject: [antlr-interest] Manual tree construction - using existing tokens
	file
Message-ID: <08E3D265-9EBD-4912-A3DB-AA979CF96B9F@ontologyworks.com>

Folks,

I'm working on some code that needs to manipulate ASTs constructed  
manually except that I want to use code generated from a tree grammar  
to do it.  So I'm looking for some way to get the tokens file the tree  
grammars use bound to the code I'm using to build the trees.  I don't  
think it would be too hard to write, but does anyone have an easy way  
to do this?

	.bill

Bill Andersen
Ontology Works, Inc. (www.ontologyworks.com)
3600 O'Donnell Street, Suite 600
Baltimore, MD 21224
Office: +1.410.675.1201
Cell: +1.443.858.6444
Fax: +1.410.675.1204





From sharwell at pixelminegames.com  Thu Oct 16 10:37:05 2008
From: sharwell at pixelminegames.com (Sam Harwell)
Date: Thu, 16 Oct 2008 12:37:05 -0500
Subject: [antlr-interest] Manual tree construction - using existing
	tokensfile
In-Reply-To: <08E3D265-9EBD-4912-A3DB-AA979CF96B9F@ontologyworks.com>
References: <08E3D265-9EBD-4912-A3DB-AA979CF96B9F@ontologyworks.com>
Message-ID: <86403CA0939415448BCCB83855EFE09A64E621@Bloodymary.ironwillgames.com>

If your target language is C#, then the tokens are declared as constants
in the parser class which are updated whenever the parser is generated.
For example, if your grammar is MyGrammar which generates
MyGrammarLexer.cs and MyGrammarParser.cs, then you could do the
following:

switch ( token.Type )
{
case MyGrammarParser.NEWLINE:
  break;
case MyGrammarParser.IDENTIFIER:
  break;
}

etc.

Sam

-----Original Message-----
From: antlr-interest-bounces at antlr.org
[mailto:antlr-interest-bounces at antlr.org] On Behalf Of Bill Andersen
Sent: Thursday, October 16, 2008 12:28 PM
To: antlr-interest at antlr.org
Subject: [antlr-interest] Manual tree construction - using existing
tokensfile

Folks,

I'm working on some code that needs to manipulate ASTs constructed  
manually except that I want to use code generated from a tree grammar  
to do it.  So I'm looking for some way to get the tokens file the tree  
grammars use bound to the code I'm using to build the trees.  I don't  
think it would be too hard to write, but does anyone have an easy way  
to do this?

	.bill

Bill Andersen
Ontology Works, Inc. (www.ontologyworks.com)
3600 O'Donnell Street, Suite 600
Baltimore, MD 21224
Office: +1.410.675.1201
Cell: +1.443.858.6444
Fax: +1.410.675.1204





List: http://www.antlr.org/mailman/listinfo/antlr-interest
Unsubscribe:
http://www.antlr.org/mailman/options/antlr-interest/your-email-addr
ess


From andersen at ontologyworks.com  Thu Oct 16 10:39:34 2008
From: andersen at ontologyworks.com (Bill Andersen)
Date: Thu, 16 Oct 2008 13:39:34 -0400
Subject: [antlr-interest] Manual tree construction - using existing
	tokensfile
In-Reply-To: <86403CA0939415448BCCB83855EFE09A64E621@Bloodymary.ironwillgames.com>
References: <08E3D265-9EBD-4912-A3DB-AA979CF96B9F@ontologyworks.com>
	<86403CA0939415448BCCB83855EFE09A64E621@Bloodymary.ironwillgames.com>
Message-ID: <B4BD36B5-F362-49D7-8C61-D1ADC1D51EEB@ontologyworks.com>

Sam,

I'm using Java, but your solution would work there just as well.   
Ashamed I didn't think of it myself.  Thanks!

	.bill

On Oct 16, 2008, at 13:37 , Sam Harwell wrote:

> If your target language is C#, then the tokens are declared as  
> constants
> in the parser class which are updated whenever the parser is  
> generated.
> For example, if your grammar is MyGrammar which generates
> MyGrammarLexer.cs and MyGrammarParser.cs, then you could do the
> following:
>
> switch ( token.Type )
> {
> case MyGrammarParser.NEWLINE:
>  break;
> case MyGrammarParser.IDENTIFIER:
>  break;
> }
>
> etc.
>
> Sam
>
> -----Original Message-----
> From: antlr-interest-bounces at antlr.org
> [mailto:antlr-interest-bounces at antlr.org] On Behalf Of Bill Andersen
> Sent: Thursday, October 16, 2008 12:28 PM
> To: antlr-interest at antlr.org
> Subject: [antlr-interest] Manual tree construction - using existing
> tokensfile
>
> Folks,
>
> I'm working on some code that needs to manipulate ASTs constructed
> manually except that I want to use code generated from a tree grammar
> to do it.  So I'm looking for some way to get the tokens file the tree
> grammars use bound to the code I'm using to build the trees.  I don't
> think it would be too hard to write, but does anyone have an easy way
> to do this?
>
> 	.bill
>
> Bill Andersen
> Ontology Works, Inc. (www.ontologyworks.com)
> 3600 O'Donnell Street, Suite 600
> Baltimore, MD 21224
> Office: +1.410.675.1201
> Cell: +1.443.858.6444
> Fax: +1.410.675.1204
>
>
>
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-addr
> ess
>

Bill Andersen
Ontology Works, Inc. (www.ontologyworks.com)
3600 O'Donnell Street, Suite 600
Baltimore, MD 21224
Office: +1.410.675.1201
Cell: +1.443.858.6444
Fax: +1.410.675.1204





From sharwell at pixelminegames.com  Thu Oct 16 20:36:19 2008
From: sharwell at pixelminegames.com (Sam Harwell)
Date: Thu, 16 Oct 2008 22:36:19 -0500
Subject: [antlr-interest] Visual Studio language services: ManagedMyC meets
	ANTLR
Message-ID: <86403CA0939415448BCCB83855EFE09A64E62C@Bloodymary.ironwillgames.com>

I just finished my first blog post about Visual Studio language services
that use ANTLR. It's scratch work to some extent, but a user familiar
with Visual Studio and ANTLR should be able to figure it out. At this
point it's truly bare-bones. It has rudimentary syntax highlighting and
brace matching, but no error reporting or any of dozens of other
features it will need. I'll probably be adding one major feature per
blog post for a while so people can see what it takes to really get a
language service put together.

 

Custom Visual Studio language services: ManagedMyC meets ANTLR

http://blog.280z28.org/archives/2008/10/21/

 

Sam

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20081016/6eb2bc6a/attachment.html 

From vasanthi.ak at gmail.com  Thu Oct 16 21:47:02 2008
From: vasanthi.ak at gmail.com (vasanthi a)
Date: Fri, 17 Oct 2008 10:17:02 +0530
Subject: [antlr-interest] Need Antlr Grammar on Action script
Message-ID: <307cfdc90810162147v51c04feck18fa1dac466a1af3@mail.gmail.com>

Hi All

I need Antlr Gramamr on Action script. Can someone mail me if you have.

Regards
Vasanthi.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20081017/2f917e18/attachment.html 

From Axelle.Ziegler.01 at normalesup.org  Fri Oct 17 02:12:26 2008
From: Axelle.Ziegler.01 at normalesup.org (Axelle Ziegler)
Date: Fri, 17 Oct 2008 11:12:26 +0200
Subject: [antlr-interest] Difference between * and +
Message-ID: <ced6eb420810170212u7f618b48sb0564274a7819d9d@mail.gmail.com>

Hi,
I'm feeling I'm missing something pretty fundamental here, if someone
can enlight me. I've been switching from antlr 3.0.1 to antlr 3.1 and
got some weird errors with my variable names rule. In the end, I've
narrowed it down to this small example, using antlrWorks :

grammar Test;

atoms :
VARNAME;

private MIN :('a'..'z');
private MAJ :('A'..'Z');
private CHAR :('_')|('.')|(':')|('!')|('?')|('\'');

VARNAME : MIN(MAJ|MIN|CHAR|'0'..'9')*;

Under 3.0, this (atoms rule) match "dfqsdfq" as one would expect.
Under 3.1 however, it seems that only 'd' (the first letter) is matched.
How ever the same grammar with VARNAME : (MAJ|MIN|CHAR|'0'..'9')+;
seems to work properly in both cases. (but matches variables starting
with uppercases obviously)
Is the error coming from AntlrWorks ? Am I missing something ?

Thanks for your help.

From lars.vonwedel at bayertechnology.com  Fri Oct 17 03:38:15 2008
From: lars.vonwedel at bayertechnology.com (lars.vonwedel at bayertechnology.com)
Date: Fri, 17 Oct 2008 12:38:15 +0200
Subject: [antlr-interest] Antwort: Visual Studio language services:
	ManagedMyC meets	ANTLR
In-Reply-To: <86403CA0939415448BCCB83855EFE09A64E62C@Bloodymary.ironwillgames.com>
Message-ID: <OF6C676E0C.D49C8F6F-ONC12574E5.003A4DCD-C12574E5.003A6EB8@bayer.de>

Dear Sam,

I just finished my first blog post about Visual Studio language services 
that use ANTLR.

that looks really interesting! I'm eager to study the example and see more 
of your blog postings!

Freundliche Gr??e / Best Regards
Lars von Wedel
_________________________________________

Bayer Technology Services GmbH
BTS-PT-PD-ES
Leverkusen, E 41
Phone: +49 214 30 56456
Fax: +49 214 30 62677
E-mail: lars.vonwedel at bayertechnology.com
Web: www.bayertechnology.com

Gesch?ftsf?hrer: Achim Noack
Aufsichtsratsvorsitzender: Dr. Wolfgang Plischke
Sitz der Gesellschaft: Leverkusen   |   Eintragung: Amtsgericht K?ln, HRB 
49896




"Sam Harwell" <sharwell at pixelminegames.com> 
Gesendet von: antlr-interest-bounces at antlr.org
17.10.2008 05:36

An
<antlr-interest at antlr.org>
Kopie

Thema
[antlr-interest] Visual Studio language services: ManagedMyC meets ANTLR






I just finished my first blog post about Visual Studio language services 
that use ANTLR. It?s scratch work to some extent, but a user familiar with 
Visual Studio and ANTLR should be able to figure it out. At this point 
it?s truly bare-bones. It has rudimentary syntax highlighting and brace 
matching, but no error reporting or any of dozens of other features it 
will need. I?ll probably be adding one major feature per blog post for a 
while so people can see what it takes to really get a language service put 
together.
 
Custom Visual Studio language services: ManagedMyC meets ANTLR
http://blog.280z28.org/archives/2008/10/21/
 
Sam
List: http://www.antlr.org/mailman/listinfo/antlr-interest
Unsubscribe: 
http://www.antlr.org/mailman/options/antlr-interest/your-email-address



-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20081017/fedf3fa4/attachment.html 

From jaluber at gmx.de  Fri Oct 17 06:45:46 2008
From: jaluber at gmx.de (Johannes Luber)
Date: Fri, 17 Oct 2008 15:45:46 +0200
Subject: [antlr-interest] Difference between * and +
In-Reply-To: <ced6eb420810170212u7f618b48sb0564274a7819d9d@mail.gmail.com>
References: <ced6eb420810170212u7f618b48sb0564274a7819d9d@mail.gmail.com>
Message-ID: <48F8970A.6040907@gmx.de>

Axelle Ziegler schrieb:
> Hi,
> I'm feeling I'm missing something pretty fundamental here, if someone
> can enlight me. I've been switching from antlr 3.0.1 to antlr 3.1 and
> got some weird errors with my variable names rule. In the end, I've
> narrowed it down to this small example, using antlrWorks :
> 
> grammar Test;
> 
> atoms :
> VARNAME;
> 
> private MIN :('a'..'z');
> private MAJ :('A'..'Z');
> private CHAR :('_')|('.')|(':')|('!')|('?')|('\'');
> 
> VARNAME : MIN(MAJ|MIN|CHAR|'0'..'9')*;

There are two errors. The first is that "private" isn't currently used
(though it is allowed syntactically). I think you want "fragment" here.
The other problem is that in lexer rules '*' should not be used. Or more
specifically: You may not create empty tokens. Doing so increases in the
best case merely the code size and doesn't work in the worst case.

Johannes
> 
> Under 3.0, this (atoms rule) match "dfqsdfq" as one would expect.
> Under 3.1 however, it seems that only 'd' (the first letter) is matched.
> How ever the same grammar with VARNAME : (MAJ|MIN|CHAR|'0'..'9')+;
> seems to work properly in both cases. (but matches variables starting
> with uppercases obviously)
> Is the error coming from AntlrWorks ? Am I missing something ?
> 
> Thanks for your help.
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
> 


From kaleb.pederson at gmail.com  Fri Oct 17 07:06:31 2008
From: kaleb.pederson at gmail.com (Kaleb Pederson)
Date: Fri, 17 Oct 2008 07:06:31 -0700
Subject: [antlr-interest] Need Antlr Grammar on Action script
In-Reply-To: <307cfdc90810162147v51c04feck18fa1dac466a1af3@mail.gmail.com>
References: <307cfdc90810162147v51c04feck18fa1dac466a1af3@mail.gmail.com>
Message-ID: <200810170706.31990.kaleb.pederson@gmail.com>

On Thursday 16 October 2008 09:47:02 pm vasanthi a wrote:
> Hi All
>
> I need Antlr Gramamr on Action script. Can someone mail me if you have.

I'm not sure exactly what you need. Do you need:

- An Grammar for the ANTLR grammar with ActionScript actions?
- A Grammar for ActionScript in the ANTLR syntax?

I know Adobe uses ANTLR, so you might be able to grab a copy of the their 
source (it is Open Source now) and get an exact copy of their grammar.  I'm 
not positive that they use it for both the compiler and FlexBuilder, but it 
would be worth checking out.

Best of luck.

--Kaleb


From jimi at temporal-wave.com  Fri Oct 17 07:43:10 2008
From: jimi at temporal-wave.com (Jim Idle)
Date: Fri, 17 Oct 2008 07:43:10 -0700
Subject: [antlr-interest] Difference between * and +
In-Reply-To: <48F8970A.6040907@gmx.de>
References: <ced6eb420810170212u7f618b48sb0564274a7819d9d@mail.gmail.com>
	<48F8970A.6040907@gmx.de>
Message-ID: <1224254590.5244.19.camel@localhost>

On Fri, 2008-10-17 at 15:45 +0200, Johannes Luber wrote:

> Axelle Ziegler schrieb:
> > Hi,
> > I'm feeling I'm missing something pretty fundamental here, if someone
> > can enlight me. I've been switching from antlr 3.0.1 to antlr 3.1 and
> > got some weird errors with my variable names rule. In the end, I've
> > narrowed it down to this small example, using antlrWorks :
> > 
> > grammar Test;
> > 
> > atoms :
> > VARNAME;
> > 
> > private MIN :('a'..'z');
> > private MAJ :('A'..'Z');
> > private CHAR :('_')|('.')|(':')|('!')|('?')|('\'');
> > 
> > VARNAME : MIN(MAJ|MIN|CHAR|'0'..'9')*;
> 
> There are two errors. The first is that "private" isn't currently used
> (though it is allowed syntactically). I think you want "fragment" here.


Yes - the lack of fragment is matching the MIN as a token in its own
right.


> The other problem is that in lexer rules '*' should not be used. Or more
> specifically: You may not create empty tokens. Doing so increases in the
> best case merely the code size and doesn't work in the worst case.


However, he has not done that here as the VARNAME rule starts with one
MIN followed by any number of the following tokens, so it does not
create an empty token (lack of spaces in the rule spec makes it harder
to see that I think).


Jim
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20081017/9c710df5/attachment.html 

From duffymo at gmail.com  Fri Oct 17 07:49:58 2008
From: duffymo at gmail.com (Michael Duffy)
Date: Fri, 17 Oct 2008 10:49:58 -0400
Subject: [antlr-interest] Problem With CLASSPATH During Generate When Using
	ANTLRWorks
Message-ID: <b0c1769b0810170749w16656e0fy5cc6f715d7f6a5bc@mail.gmail.com>

I'm using the latest ANTLRWorks plug-in with IntelliJ 7.0.4 and ANTLR 3.1.1.
I'm working my way through "Definitive ANTLR Reference" to climb the
learning curve.  So far, so good.  Brilliantly done - kudos to Terence Parr
and everyone who contributes.

I've hit a snag in section 3.2 when I start adding actions to the expression
grammar.  The code in the book works fine, but I tried adding a wrinkle.  I
added Apache Commons Logging JARs to my CLASSPATH, created a Log as a member
using their LogFactory, and logged to info instead of printing to
System.out.  ANTLRWorks writes failure messages to the console when I
generate the lexer/parser, saying that package org.apache.commons.logging
does not exist.

I can see the library in my IntelliJ project browser.  It includes the
package, classes, and methods that I'm invoking.  I know how to add 3rd
party JARs to IntelliJ well enough to make ANTLR work fine without the
logging.  Did I miss something important here?  I've included the modified
grammar.  Any advice would be most welcome.  Thanks.

grammar Eval;

@header
{
    import java.util.Map;
    import java.util.HashMap;
    import org.apache.commons.logging.Log;
    import org.apache.commons.logging.LogFactory;
}

@members
{
    Map memory = new HashMap();
    Log logger = LogFactory.getLog(EvalParser.class);
}

program    :    statement+;

statement:    expr { logger.info($expr.value); }
            |     ID EQUALS expr NEWLINE { memory.put($ID.text, new
Integer($expr.value)); }
            |     NEWLINE;

expr returns [int value]
            :    e=multExpr {$value = $e.value; }
            ( '+' e=multExpr { $value += $e.value; }
            | '-' e=multExpr { $value -= $e.value; }
            )*;

multExpr returns [int value]
            :    e=atom {$value = $e.value; } ('*' e=atom { $value =
$e.value; })*;

atom returns [int value]
            : INT { $value = Integer.parseInt($INT.text); }
            | ID
            {
                Integer v = (Integer)memory.get($ID.text);
                if (v != null)
                {
                    $value = v.intValue();
                }
                else
                {
                    logger.error("undefined variable " + $ID.text);
                }
            }
            | LPAREN expr RPAREN { $value = $expr.value; };

ID         : ('a'..'z'|'A'..'Z'|'_')+ | ('"' (~'"')* '"');
INT        : '0'..'9'+;

NEWLINE     : '\n'|'\r'('\n')? { skip(); };

COMMENT     : '#' ( ~('\n'|'\r') )* NEWLINE? { skip(); };
LBRACE    : '{';
RBRACE    : '}';
LPAREN    : '(';
RPAREN    : ')';
EQUALS    : '=';
SEMI        : ';';
SPACE        : ' ';
TAB        : '\t';

WS         : (SPACE
            | NEWLINE
            | TAB
            )+ { skip(); };
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20081017/c998225b/attachment.html 

From duffymo at gmail.com  Fri Oct 17 11:27:58 2008
From: duffymo at gmail.com (Michael Duffy)
Date: Fri, 17 Oct 2008 14:27:58 -0400
Subject: [antlr-interest] Cannot Find Eval.tokens File
Message-ID: <b0c1769b0810171127s75ebbb01kc4531c8c7665998f@mail.gmail.com>

When I went to generate a grammar for walking the AST for the expression
evaluation I got the following pop-up message:

"cannot find tokens file <unset-dir>\Expr.tokens
Consult the console for more information."

The console is empty.  I tell ANTLRWorks to write generated files to a
directory /generated, a child of the directory where I store grammars.  The
Expr.tokens file is there, along with all the .java files.

How do I tell ANTLR the path for finding the tokens file?

Here's the complete grammar:

tree grammar Walker;

options
{
   tokenVocab=Expr;
    ASTLabelType=CommonTree;
}

@header
{
    import java.util.Map;
    import java.util.HashMap;
}

@members
{
    Map memory = new HashMap();
}

program    :    statement+;

statement:    expr { System.out.println($expr.value); }
            |     ^(EQUALS ID expr) { memory.put($ID.text, new
Integer($expr.value)); }
            ;

expr returns [int value]
        :    ^('+' a=expr b=expr) { $value = a+b; }
        |     ^('-' a=expr b=expr) { $value = a-b; }
        |     ^('*' a=expr b=expr) { $value = a*b; }
        |     ID
            {
                Integer v = memory.get($ID.text);
                if (v != null)
                {
                    $value = v.intValue();
                }
                else
                {
                    System.err.println("undefined variable " + $ID.text);
                }
            }
        |     INT
        ;
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20081017/81360918/attachment.html 

From greg at smolyn.org  Fri Oct 17 12:03:52 2008
From: greg at smolyn.org (Greg Smolyn)
Date: Fri, 17 Oct 2008 12:03:52 -0700
Subject: [antlr-interest] Inserting tokens?
Message-ID: <2AC72D2A-DA69-4E06-8693-17A62CF92559@smolyn.org>

Hi everyone, hopefully this is a stupid question with a similarly easy  
answer.

I have a beautiful CSS grammar that I carefully built based on W3C  
specs (my first mistake!).  However, it seems those crazy web  
programmers are one step ahead and have done some crazy things. :)

So basically, I have some lexer rules defining class and id parameters:

HASH : '#' F_IDENT;
CLASS: '.' F_IDENT;

The grammar is one that uses spaces, so I have a rule

selector:  simple_selector (combinator simple_selector)*;

where combinator can be a space (which defines the standard combinator).

So, generally, you're supposed to do things like "table td #someId" or  
"table td .someClass".  In this case, they've gone and put "table  
td#someId", and similarly for class (where table and td are IDENT  
tokens).

Does it makes sense to modify the IDENT token so it looks like

IDENT: F_IDENT | F_IDENTWITHHASH | F_IDENTWITHCLASS ;

and in the latter two actually emit an IDENT, Space, and HASH or CLASS  
token?

Thanks for your help!

-greg


From andersen at ontologyworks.com  Fri Oct 17 13:23:58 2008
From: andersen at ontologyworks.com (Bill Andersen)
Date: Fri, 17 Oct 2008 16:23:58 -0400
Subject: [antlr-interest] Eclipse ANTLR IDE package issue
Message-ID: <722C340F-245B-4E90-B561-BFE3B22316D8@ontologyworks.com>

I have some grammars living in a directory for package P in Eclipse in  
which I've included header blocks specifying "package P;".  When I go  
to generate code using ANTLR IDE (1.1.0), the generated Java ends up  
in a package directory P.P while the file headers have, correctly,  
"package P".  I have set the options on the ANTLR IDE to put generated  
files in the same directory as the grammars, but that isn't happening.

Anyone else see this?

Bill Andersen
Ontology Works, Inc. (www.ontologyworks.com)
3600 O'Donnell Street, Suite 600
Baltimore, MD 21224
Office: +1.410.675.1201
Cell: +1.443.858.6444
Fax: +1.410.675.1204





From andersen at ontologyworks.com  Fri Oct 17 13:31:27 2008
From: andersen at ontologyworks.com (Bill Andersen)
Date: Fri, 17 Oct 2008 16:31:27 -0400
Subject: [antlr-interest] ASTs: copying info to imaginary nodes
Message-ID: <88CC7677-519A-466A-97F6-03FB4C581373@ontologyworks.com>


I have a tree-producing grammar with a production

name
	: NAME -> ^(AS_NAME NAME)
	;

where NAME is a lexical category and AS_NAME is an imaginary node for  
the abstract syntax I want to generate.  I know the above doesn't do  
what I want, though.  What I'd like to do is to set the text of the  
generated AS_NAME node to the text of NAME.  The book isn't clear on  
this case.  Anything wrong with the following:

name
	: t=NAME -> ^(AS_NAME[$t])

??


Bill Andersen
Ontology Works, Inc. (www.ontologyworks.com)
3600 O'Donnell Street, Suite 600
Baltimore, MD 21224
Office: +1.410.675.1201
Cell: +1.443.858.6444
Fax: +1.410.675.1204





From antlr at mirality.co.nz  Fri Oct 17 13:37:11 2008
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Sat, 18 Oct 2008 09:37:11 +1300
Subject: [antlr-interest] Cannot Find Eval.tokens File
In-Reply-To: <b0c1769b0810171127s75ebbb01kc4531c8c7665998f@mail.gmail.co
 m>
References: <b0c1769b0810171127s75ebbb01kc4531c8c7665998f@mail.gmail.com>
Message-ID: <20081017203728.CBF3111EC75@www.antlr.org>

At 07:27 18/10/2008, Michael Duffy wrote:
>"cannot find tokens file <unset-dir>\Expr.tokens
>Consult the console for more information."
>
>The console is empty.  I tell ANTLRWorks to write generated files 
>to a directory /generated, a child of the directory where I store 
>grammars.  The Expr.tokens file is there, along with all the 
>.java files.
>
>How do I tell ANTLR the path for finding the tokens file?

If you run ANTLR with no command line options, it'll tell you all 
the options it supports.

Notable among them is -lib, which it specifies as the location to 
look for token files.  (I believe it also looks in the output 
directory as well, though I'm not sure about that.)


From antlr at mirality.co.nz  Fri Oct 17 13:42:15 2008
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Sat, 18 Oct 2008 09:42:15 +1300
Subject: [antlr-interest] Inserting tokens?
In-Reply-To: <2AC72D2A-DA69-4E06-8693-17A62CF92559@smolyn.org>
References: <2AC72D2A-DA69-4E06-8693-17A62CF92559@smolyn.org>
Message-ID: <20081017204224.0747A312961@www.antlr.org>

At 08:03 18/10/2008, Greg Smolyn wrote:
 >Does it makes sense to modify the IDENT token so it looks like
 >
 >IDENT: F_IDENT | F_IDENTWITHHASH | F_IDENTWITHCLASS ;
 >
 >and in the latter two actually emit an IDENT, Space, and HASH or 

 >CLASS token?

No, because only the top-level lexer rule can emit tokens.

I think a better idea would be to make combinator optional in the 
selector rule.  That way the space is allowed but not required.

I'm a little surprised that you're not hiding whitespace, 
though.  I didn't think CSS was whitespace-sensitive..?  (Not that 
there's anything wrong with not hiding whitespace.)


From antlr at mirality.co.nz  Fri Oct 17 14:12:53 2008
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Sat, 18 Oct 2008 10:12:53 +1300
Subject: [antlr-interest] ASTs: copying info to imaginary nodes
In-Reply-To: <88CC7677-519A-466A-97F6-03FB4C581373@ontologyworks.com>
References: <88CC7677-519A-466A-97F6-03FB4C581373@ontologyworks.com>
Message-ID: <20081017211302.71DBD11EDC8@www.antlr.org>

At 09:31 18/10/2008, Bill Andersen wrote:
 >What I'd like to do is to set the text of the generated
 >AS_NAME node to the text of NAME.  The book isn't clear
 >on this case.  Anything wrong with the following:
 >
 >name
 >	: t=NAME -> ^(AS_NAME[$t])
 >
 >??

What happened when you tried it?


If you just want the text alone copied over (and not the 
line/column/index info) then you should use $t.text 
instead.  Using $t (or just t, I forget which) will try to copy 
all characteristics of the "real" token and just change the token 
type.


From andersen at ontologyworks.com  Fri Oct 17 14:27:11 2008
From: andersen at ontologyworks.com (Bill Andersen)
Date: Fri, 17 Oct 2008 17:27:11 -0400
Subject: [antlr-interest] ASTs: copying info to imaginary nodes
In-Reply-To: <20081017211302.ABE3921D995@mxout-12.mxes.net>
References: <88CC7677-519A-466A-97F6-03FB4C581373@ontologyworks.com>
	<20081017211302.ABE3921D995@mxout-12.mxes.net>
Message-ID: <9A91959C-C38D-4089-9603-1CFDF6CEE944@ontologyworks.com>

Thanks, Gavin...

I think this worked -- tried it right after I posted.  Just wasn't  
sure of the behavior but you cleared that up.


On Oct 17, 2008, at 17:12 , Gavin Lambert wrote:

> At 09:31 18/10/2008, Bill Andersen wrote:
> >What I'd like to do is to set the text of the generated
> >AS_NAME node to the text of NAME.  The book isn't clear
> >on this case.  Anything wrong with the following:
> >
> >name
> >	: t=NAME -> ^(AS_NAME[$t])
> >
> >??
>
> What happened when you tried it?
>
>
> If you just want the text alone copied over (and not the line/column/ 
> index info) then you should use $t.text instead.  Using $t (or just  
> t, I forget which) will try to copy all characteristics of the  
> "real" token and just change the token type.
>

Bill Andersen
Ontology Works, Inc. (www.ontologyworks.com)
3600 O'Donnell Street, Suite 600
Baltimore, MD 21224
Office: +1.410.675.1201
Cell: +1.443.858.6444
Fax: +1.410.675.1204





From sharwell at pixelminegames.com  Sun Oct 19 15:44:19 2008
From: sharwell at pixelminegames.com (Sam Harwell)
Date: Sun, 19 Oct 2008 17:44:19 -0500
Subject: [antlr-interest] Visual Studio language services: ManagedMyC
	meetsANTLR
In-Reply-To: <86403CA0939415448BCCB83855EFE09A64E62C@Bloodymary.ironwillgames.com>
References: <86403CA0939415448BCCB83855EFE09A64E62C@Bloodymary.ironwillgames.com>
Message-ID: <86403CA0939415448BCCB83855EFE09A64E63E@Bloodymary.ironwillgames.com>

I've now made 4 posts on the subject, and the 4th contains an updated
copy of the source code. At this point, a tree walker is integrated into
the project and the TypeAndMemberDropdownBars are working (and working
well enough that the code behind it would be hard to beat in a full
language service, much less a sample/tutorial). This is all IMO of
course. J

 

Parts 1-4 are on my blog.

http://blog.280z28.org/

 

Sam

 

From: antlr-interest-bounces at antlr.org
[mailto:antlr-interest-bounces at antlr.org] On Behalf Of Sam Harwell
Sent: Thursday, October 16, 2008 10:36 PM
To: antlr-interest at antlr.org
Subject: [antlr-interest] Visual Studio language services: ManagedMyC
meetsANTLR

 

I just finished my first blog post about Visual Studio language services
that use ANTLR. It's scratch work to some extent, but a user familiar
with Visual Studio and ANTLR should be able to figure it out. At this
point it's truly bare-bones. It has rudimentary syntax highlighting and
brace matching, but no error reporting or any of dozens of other
features it will need. I'll probably be adding one major feature per
blog post for a while so people can see what it takes to really get a
language service put together.

 

Custom Visual Studio language services: ManagedMyC meets ANTLR

http://blog.280z28.org/archives/2008/10/21/

 

Sam

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20081019/9d7d21ee/attachment.html 

From Y.Yang at tue.nl  Mon Oct 20 06:49:15 2008
From: Y.Yang at tue.nl (Yang, Y.)
Date: Mon, 20 Oct 2008 15:49:15 +0200
Subject: [antlr-interest] [Help] Question about CTarget of ANTLR
Message-ID: <E5B3EFA8CA024F439622A75D0CDD548E038CBDAD@EXCHANGE3.campus.tue.nl>

Dear All

When I try to compiler the tree parser example in example-V3 c
directory, I encountered the following problem in Visual Stuido.

>d:\antlr\examples-v3\examples-v3\c\treeparser\langparser.h(83) : error
C2061: syntax error : identifier 'tree'
1>d\antlr\examples-v3\examples-v3\c\treeparser\langparser.h(85) : error
C2059: syntax error : '}'
1>d:\antlr\examples-v3\examples-v3\c\treeparser\langparser.h(94) : error
C2061: syntax error : identifier 'tree'
1>d:\antlr\examples-v3\examples-v3\c\treeparser\langparser.h(96) : error
C2059: syntax error : '}'
1>d:\antlr\examples-v3\examples-v3\c\treeparser\langparser.h(105) :
error C2061: syntax error : identifier 'tree'
1>d:\antlr\examples-v3\examples-v3\c\treeparser\langparser.h(107) :
error C2059: syntax error : '}'
1>d:\antlr\examples-v3\examples-v3\c\treeparser\langparser.h(123) :
error C2061: syntax error : identifier 'LangParser_start_return'
1>d:\antlr\examples-v3\examples-v3\c\treeparser\langparser.h(124) :
error C2143: syntax error : missing ')' before '*'

And I browse the langparser.h and found 

typedef struct LangParser_start_return_struct
{
    /** Generic return elements for ANTLR3 rules that are not in tree
parsers or returning trees
     */
    pANTLR3_COMMON_TOKEN    start;
    pANTLR3_COMMON_TOKEN    stop;
    	tree;
   
}
    LangParser_start_return;


It seems the tree missing the type, however it is generated by ANTLR. Is
it a bug or I missing sth,

Best regards

Yang

From jaluber at gmx.de  Mon Oct 20 06:56:29 2008
From: jaluber at gmx.de (Johannes Luber)
Date: Mon, 20 Oct 2008 15:56:29 +0200
Subject: [antlr-interest] [Help] Question about CTarget of ANTLR
In-Reply-To: <E5B3EFA8CA024F439622A75D0CDD548E038CBDAD@EXCHANGE3.campus.tue.nl>
References: <E5B3EFA8CA024F439622A75D0CDD548E038CBDAD@EXCHANGE3.campus.tue.nl>
Message-ID: <48FC8E0D.1050105@gmx.de>

Yang, Y. schrieb:
> Dear All
> 
> When I try to compiler the tree parser example in example-V3 c
> directory, I encountered the following problem in Visual Stuido.
> 
>> d:\antlr\examples-v3\examples-v3\c\treeparser\langparser.h(83) : error
> C2061: syntax error : identifier 'tree'
> 1>d\antlr\examples-v3\examples-v3\c\treeparser\langparser.h(85) : error
> C2059: syntax error : '}'
> 1>d:\antlr\examples-v3\examples-v3\c\treeparser\langparser.h(94) : error
> C2061: syntax error : identifier 'tree'
> 1>d:\antlr\examples-v3\examples-v3\c\treeparser\langparser.h(96) : error
> C2059: syntax error : '}'
> 1>d:\antlr\examples-v3\examples-v3\c\treeparser\langparser.h(105) :
> error C2061: syntax error : identifier 'tree'
> 1>d:\antlr\examples-v3\examples-v3\c\treeparser\langparser.h(107) :
> error C2059: syntax error : '}'
> 1>d:\antlr\examples-v3\examples-v3\c\treeparser\langparser.h(123) :
> error C2061: syntax error : identifier 'LangParser_start_return'
> 1>d:\antlr\examples-v3\examples-v3\c\treeparser\langparser.h(124) :
> error C2143: syntax error : missing ')' before '*'
> 
> And I browse the langparser.h and found 
> 
> typedef struct LangParser_start_return_struct
> {
>     /** Generic return elements for ANTLR3 rules that are not in tree
> parsers or returning trees
>      */
>     pANTLR3_COMMON_TOKEN    start;
>     pANTLR3_COMMON_TOKEN    stop;
>     	tree;
>    
> }
>     LangParser_start_return;
> 
> 
> It seems the tree missing the type, however it is generated by ANTLR. Is
> it a bug or I missing sth,
> 
> Best regards
> 
> Yang

I believe you have to put into the options

ASTLabelType= pANTLR3_BASE_TREE;

to get things working.

Johannes
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
> 


From jimi at temporal-wave.com  Mon Oct 20 07:44:28 2008
From: jimi at temporal-wave.com (Jim Idle)
Date: Mon, 20 Oct 2008 07:44:28 -0700
Subject: [antlr-interest] [Help] Question about CTarget of ANTLR
In-Reply-To: <E5B3EFA8CA024F439622A75D0CDD548E038CBDAD@EXCHANGE3.campus.tue.nl>
References: <E5B3EFA8CA024F439622A75D0CDD548E038CBDAD@EXCHANGE3.campus.tue.nl>
Message-ID: <1224513868.15374.1.camel@jimi>

On Mon, 2008-10-20 at 15:49 +0200, Yang, Y. wrote:

> Dear All
> 
> When I try to compiler the tree parser example in example-V3 c
> directory, I encountered the following problem in Visual Stuido.



> 
> It seems the tree missing the type, however it is generated by ANTLR. Is
> it a bug or I missing sth,


Please see numerous past posts and the examples, you need to have:

options
{
    ASTLabelType = pANTLR3_BASE_TREE;
}

in the options section of your grammar.

Jim

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20081020/e34227ac/attachment.html 

From tcurdt at vafer.org  Mon Oct 20 09:48:29 2008
From: tcurdt at vafer.org (Torsten Curdt)
Date: Mon, 20 Oct 2008 18:48:29 +0200
Subject: [antlr-interest] artifacts in maven repo
In-Reply-To: <89102964-1826-4FAF-9F86-A0BD584F3515@vafer.org>
References: <1ACEF478-EEDD-4503-8577-50AADA6F899A@vafer.org>
	<1223926888.4235.23.camel@jimi.temporal-wave.com>
	<474960E2-D867-47C3-949E-CEAE88F82AD6@vafer.org>
	<8A4F65C1-D6BE-44A1-B2AD-4841F4223ADE@vafer.org>
	<B2F7A78E-18E8-4444-883F-7A1E64196B63@cs.usfca.edu>
	<89102964-1826-4FAF-9F86-A0BD584F3515@vafer.org>
Message-ID: <34BA5C24-581D-41FB-B936-372B9195B159@vafer.org>


On Oct 14, 2008, at 20:14, Torsten Curdt wrote:

> On Oct 14, 2008, at 19:13, Terence Parr wrote:
>
>> Jim will do the work to set up :)  I just made accounts for him.
>
> Awesome. Thanks, guys!

What's the status? Need any help?

cheers
--
Torsten


From jimi at temporal-wave.com  Mon Oct 20 10:03:35 2008
From: jimi at temporal-wave.com (Jim Idle)
Date: Mon, 20 Oct 2008 10:03:35 -0700
Subject: [antlr-interest] artifacts in maven repo
In-Reply-To: <34BA5C24-581D-41FB-B936-372B9195B159@vafer.org>
References: <1ACEF478-EEDD-4503-8577-50AADA6F899A@vafer.org>
	<1223926888.4235.23.camel@jimi.temporal-wave.com>
	<474960E2-D867-47C3-949E-CEAE88F82AD6@vafer.org>
	<8A4F65C1-D6BE-44A1-B2AD-4841F4223ADE@vafer.org>
	<B2F7A78E-18E8-4444-883F-7A1E64196B63@cs.usfca.edu>
	<89102964-1826-4FAF-9F86-A0BD584F3515@vafer.org>
	<34BA5C24-581D-41FB-B936-372B9195B159@vafer.org>
Message-ID: <1224522215.6421.0.camel@jimi>

On Mon, 2008-10-20 at 18:48 +0200, Torsten Curdt wrote:

> On Oct 14, 2008, at 20:14, Torsten Curdt wrote:
> 
> > On Oct 14, 2008, at 19:13, Terence Parr wrote:
> >
> >> Jim will do the work to set up :)  I just made accounts for him.
> >
> > Awesome. Thanks, guys!
> 
> What's the status? Need any help?


Should be this week. I need to convince Ter to change a few directory
depths and move some .g files (so I have to save up for expensive
wine ;-).

Jim

> 
> cheers
> --
> Torsten
> 
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
> 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20081020/3f2bf95a/attachment.html 

From sharwell at pixelminegames.com  Mon Oct 20 10:09:51 2008
From: sharwell at pixelminegames.com (Sam Harwell)
Date: Mon, 20 Oct 2008 12:09:51 -0500
Subject: [antlr-interest] ANTLR v3 integration in Visual Studio
Message-ID: <86403CA0939415448BCCB83855EFE09A64E648@Bloodymary.ironwillgames.com>

I put up a tech preview of the tool I wrote to help with my language
services development. It's a basic ANTLR v3 language service that
integrates into Visual Studio. While it doesn't have the feature set of,
say, ANTLRworks, it's still proven extremely useful for my development
tasks.

 

If you use Visual Studio for projects involving grammars (whether it's
following my blog articles on language service development or
otherwise), you may find it useful. The main page for the project is
here:

http://wiki.pixelminegames.com/index.php?title=Tools:nFringe:Antlr

 

And a list of features with screenshots is here:

http://wiki.pixelminegames.com/index.php?title=Tools:nFringe:Antlr:Featu
res

 

Sam

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20081020/3e22404c/attachment.html 

From parrt at cs.usfca.edu  Mon Oct 20 11:26:43 2008
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon, 20 Oct 2008 11:26:43 -0700
Subject: [antlr-interest] wildcard in tree grammar
Message-ID: <59B5D09B-0C80-4F82-8ED3-91B02962AF10@cs.usfca.edu>

Hi gang.  We have a problem in terms of wildcards. bug:

http://www.antlr.org:8888/browse/ANTLR-248

says it all:

wildcard is single node in tree grammar analysis but node or tree at  
runtime

We need both single node wildcard and tree wildcard. DFA analysis sees  
'.' as a single node.

If you say ^('+' . .), that expects two single nodes as children at  
analysis time. The problem is that at runtime we want wildcard to  
match a subtree as well. We need to tell the analysis specifically  
which one we mean. I can see a situation where you want to match  
literally a single node versus a subtree. I don't want to flip  
wildcard mean subtree.

I proposed a syntax to mean wildcard subtree: ^. instead of simple .  
or, perhaps ^(.) as special syntax, which might be a bit more explicit  
right? The new syntax would force the analysis to see ". DOWN .+ UP".   
Ack, the way to do this is actually to make the grammar create the  
appropriate NFA rather than tweaking the analysis.

Anyway, those in favor of ^(.) and . to mean wild-card tree (must be a  
tree) and wildcard (single node)?  those opposed?

I need to fix this for the new book examples. I'm doing this really  
cool filter mode for trees where you can say "for any addition you  
find in the tree, do this".

Ter

From jaluber at gmx.de  Mon Oct 20 11:33:29 2008
From: jaluber at gmx.de (Johannes Luber)
Date: Mon, 20 Oct 2008 20:33:29 +0200
Subject: [antlr-interest] wildcard in tree grammar
In-Reply-To: <59B5D09B-0C80-4F82-8ED3-91B02962AF10@cs.usfca.edu>
References: <59B5D09B-0C80-4F82-8ED3-91B02962AF10@cs.usfca.edu>
Message-ID: <48FCCEF9.3010908@gmx.de>

Terence Parr schrieb:
> Hi gang.  We have a problem in terms of wildcards. bug:
> 
> http://www.antlr.org:8888/browse/ANTLR-248
> 
> says it all:
> 
> wildcard is single node in tree grammar analysis but node or tree at  
> runtime
> 
> We need both single node wildcard and tree wildcard. DFA analysis sees  
> '.' as a single node.
> 
> If you say ^('+' . .), that expects two single nodes as children at  
> analysis time. The problem is that at runtime we want wildcard to  
> match a subtree as well. We need to tell the analysis specifically  
> which one we mean. I can see a situation where you want to match  
> literally a single node versus a subtree. I don't want to flip  
> wildcard mean subtree.
> 
> I proposed a syntax to mean wildcard subtree: ^. instead of simple .  
> or, perhaps ^(.) as special syntax, which might be a bit more explicit  
> right? The new syntax would force the analysis to see ". DOWN .+ UP".   
> Ack, the way to do this is actually to make the grammar create the  
> appropriate NFA rather than tweaking the analysis.
> 
> Anyway, those in favor of ^(.) and . to mean wild-card tree (must be a  
> tree) and wildcard (single node)?  those opposed?
> 
> I need to fix this for the new book examples. I'm doing this really  
> cool filter mode for trees where you can say "for any addition you  
> find in the tree, do this".

I don't see anything wrong with this suggestion, even if it creates some
work on my side. ;) Looking at the nature of the bug, fixing it this way
won't change the behaviour of already generated and written grammars, right?

Johannes
> 
> Ter
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
> 


From parrt at cs.usfca.edu  Mon Oct 20 11:36:21 2008
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon, 20 Oct 2008 11:36:21 -0700
Subject: [antlr-interest] wildcard in tree grammar
In-Reply-To: <59B5D09B-0C80-4F82-8ED3-91B02962AF10@cs.usfca.edu>
References: <59B5D09B-0C80-4F82-8ED3-91B02962AF10@cs.usfca.edu>
Message-ID: <96BD6C38-2AFC-4EF9-9B5B-8D0B1AEFCFF4@cs.usfca.edu>

Actually, tree pattern matching tools and languages typically use '_'  
to mean wildcard subtree (or actually "don't care"). I wonder if this  
is better because it is more readable:

^('+' _ _ )

  looks better than

^('+' ^(.) ^(.))

Then

^('+' . .)

would indicate matching '+'-rooted subtree with two leaf nodes as  
children.  If the children were subtrees, you'd get a syntax error.

Hmm... ^(.) or _ actually is just a rule:

wildcard : ^(. .+) ;

 From Johannes' post:

> I don't see anything wrong with this suggestion, even if it creates  
> some
> work on my side. ;) Looking at the nature of the bug, fixing it this  
> way
> won't change the behaviour of already generated and written  
> grammars, right?

Actually, it might break some things because '.' matches an entire  
subtree right now; I would be changing in to specifically match a  
node. The problem is that we use it for both right now, which is just  
plain wrong. anybody using it has a potential bug in there.   
Fortunately, people are probably not using wildcard entry grammars too  
much.

ugh... sorry about this, I thought I was being clever at some point in  
the past; blech.

Ter

On Oct 20, 2008, at 11:26 AM, Terence Parr wrote:

> Hi gang.  We have a problem in terms of wildcards. bug:
>
> http://www.antlr.org:8888/browse/ANTLR-248
>
> says it all:
>
> wildcard is single node in tree grammar analysis but node or tree at
> runtime
>
> We need both single node wildcard and tree wildcard. DFA analysis sees
> '.' as a single node.
>
> If you say ^('+' . .), that expects two single nodes as children at
> analysis time. The problem is that at runtime we want wildcard to
> match a subtree as well. We need to tell the analysis specifically
> which one we mean. I can see a situation where you want to match
> literally a single node versus a subtree. I don't want to flip
> wildcard mean subtree.
>
> I proposed a syntax to mean wildcard subtree: ^. instead of simple .
> or, perhaps ^(.) as special syntax, which might be a bit more explicit
> right? The new syntax would force the analysis to see ". DOWN .+ UP".
> Ack, the way to do this is actually to make the grammar create the
> appropriate NFA rather than tweaking the analysis.
>
> Anyway, those in favor of ^(.) and . to mean wild-card tree (must be a
> tree) and wildcard (single node)?  those opposed?
>
> I need to fix this for the new book examples. I'm doing this really
> cool filter mode for trees where you can say "for any addition you
> find in the tree, do this".
>
> Ter
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>


From sharwell at pixelminegames.com  Mon Oct 20 11:41:12 2008
From: sharwell at pixelminegames.com (Sam Harwell)
Date: Mon, 20 Oct 2008 13:41:12 -0500
Subject: [antlr-interest] wildcard in tree grammar
In-Reply-To: <59B5D09B-0C80-4F82-8ED3-91B02962AF10@cs.usfca.edu>
References: <59B5D09B-0C80-4F82-8ED3-91B02962AF10@cs.usfca.edu>
Message-ID: <86403CA0939415448BCCB83855EFE09A64E653@Bloodymary.ironwillgames.com>

Since ^(. item) is valid, I think ^. as a dedicated operator is more
appropriate than ^(.).

Sam

-----Original Message-----
From: antlr-interest-bounces at antlr.org
[mailto:antlr-interest-bounces at antlr.org] On Behalf Of Terence Parr
Sent: Monday, October 20, 2008 1:27 PM
To: antlr-interest Interest
Subject: [antlr-interest] wildcard in tree grammar

Hi gang.  We have a problem in terms of wildcards. bug:

http://www.antlr.org:8888/browse/ANTLR-248

says it all:

wildcard is single node in tree grammar analysis but node or tree at  
runtime

We need both single node wildcard and tree wildcard. DFA analysis sees  
'.' as a single node.

If you say ^('+' . .), that expects two single nodes as children at  
analysis time. The problem is that at runtime we want wildcard to  
match a subtree as well. We need to tell the analysis specifically  
which one we mean. I can see a situation where you want to match  
literally a single node versus a subtree. I don't want to flip  
wildcard mean subtree.

I proposed a syntax to mean wildcard subtree: ^. instead of simple .  
or, perhaps ^(.) as special syntax, which might be a bit more explicit  
right? The new syntax would force the analysis to see ". DOWN .+ UP".   
Ack, the way to do this is actually to make the grammar create the  
appropriate NFA rather than tweaking the analysis.

Anyway, those in favor of ^(.) and . to mean wild-card tree (must be a  
tree) and wildcard (single node)?  those opposed?

I need to fix this for the new book examples. I'm doing this really  
cool filter mode for trees where you can say "for any addition you  
find in the tree, do this".

Ter

List: http://www.antlr.org/mailman/listinfo/antlr-interest
Unsubscribe:
http://www.antlr.org/mailman/options/antlr-interest/your-email-addr
ess


From parrt at cs.usfca.edu  Mon Oct 20 11:53:49 2008
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon, 20 Oct 2008 11:53:49 -0700
Subject: [antlr-interest] wildcard in tree grammar
In-Reply-To: <86403CA0939415448BCCB83855EFE09A64E653@Bloodymary.ironwillgames.com>
References: <59B5D09B-0C80-4F82-8ED3-91B02962AF10@cs.usfca.edu>
	<86403CA0939415448BCCB83855EFE09A64E653@Bloodymary.ironwillgames.com>
Message-ID: <D5711DD7-8131-4C69-AA7B-40656D73968D@cs.usfca.edu>


On Oct 20, 2008, at 11:41 AM, Sam Harwell wrote:

> Since ^(. item) is valid, I think ^. as a dedicated operator is more
> appropriate than ^(.).

I just tried ^(. X) and it fails to compile ;)

Wildcard seems super broken in tree grammars I'm afraid.

Ter

From sharwell at pixelminegames.com  Mon Oct 20 11:56:22 2008
From: sharwell at pixelminegames.com (Sam Harwell)
Date: Mon, 20 Oct 2008 13:56:22 -0500
Subject: [antlr-interest] wildcard in tree grammar
In-Reply-To: <D5711DD7-8131-4C69-AA7B-40656D73968D@cs.usfca.edu>
References: <59B5D09B-0C80-4F82-8ED3-91B02962AF10@cs.usfca.edu>
	<86403CA0939415448BCCB83855EFE09A64E653@Bloodymary.ironwillgames.com>
	<D5711DD7-8131-4C69-AA7B-40656D73968D@cs.usfca.edu>
Message-ID: <86403CA0939415448BCCB83855EFE09A64E656@Bloodymary.ironwillgames.com>

I meant valid in theory. :)

Sam

-----Original Message-----
From: Terence Parr [mailto:parrt at cs.usfca.edu] 
Sent: Monday, October 20, 2008 1:54 PM
To: Sam Harwell
Cc: antlr-interest Interest
Subject: Re: [antlr-interest] wildcard in tree grammar


On Oct 20, 2008, at 11:41 AM, Sam Harwell wrote:

> Since ^(. item) is valid, I think ^. as a dedicated operator is more
> appropriate than ^(.).

I just tried ^(. X) and it fails to compile ;)

Wildcard seems super broken in tree grammars I'm afraid.

Ter

From Y.Yang at tue.nl  Mon Oct 20 12:42:38 2008
From: Y.Yang at tue.nl (Yang, Y.)
Date: Mon, 20 Oct 2008 21:42:38 +0200
Subject: [antlr-interest] [Help] Question about CTarget of ANTLR
References: <E5B3EFA8CA024F439622A75D0CDD548E038CBDAD@EXCHANGE3.campus.tue.nl>
	<48FC8E0D.1050105@gmx.de>
Message-ID: <E5B3EFA8CA024F439622A75D0CDD548E024E8A83@EXCHANGE3.campus.tue.nl>

Hi, Johannes

Thanks, it works now.:-)

Best regards

Yang


-----Original Message-----
From: Johannes Luber [mailto:jaluber at gmx.de]
Sent: Mon 10/20/2008 3:56 PM
To: Yang, Y.
Cc: antlr-interest at antlr.org
Subject: Re: [antlr-interest] [Help] Question about CTarget of ANTLR
 
Yang, Y. schrieb:
> Dear All
> 
> When I try to compiler the tree parser example in example-V3 c
> directory, I encountered the following problem in Visual Stuido.
> 
>> d:\antlr\examples-v3\examples-v3\c\treeparser\langparser.h(83) : error
> C2061: syntax error : identifier 'tree'
> 1>d\antlr\examples-v3\examples-v3\c\treeparser\langparser.h(85) : error
> C2059: syntax error : '}'
> 1>d:\antlr\examples-v3\examples-v3\c\treeparser\langparser.h(94) : error
> C2061: syntax error : identifier 'tree'
> 1>d:\antlr\examples-v3\examples-v3\c\treeparser\langparser.h(96) : error
> C2059: syntax error : '}'
> 1>d:\antlr\examples-v3\examples-v3\c\treeparser\langparser.h(105) :
> error C2061: syntax error : identifier 'tree'
> 1>d:\antlr\examples-v3\examples-v3\c\treeparser\langparser.h(107) :
> error C2059: syntax error : '}'
> 1>d:\antlr\examples-v3\examples-v3\c\treeparser\langparser.h(123) :
> error C2061: syntax error : identifier 'LangParser_start_return'
> 1>d:\antlr\examples-v3\examples-v3\c\treeparser\langparser.h(124) :
> error C2143: syntax error : missing ')' before '*'
> 
> And I browse the langparser.h and found 
> 
> typedef struct LangParser_start_return_struct
> {
>     /** Generic return elements for ANTLR3 rules that are not in tree
> parsers or returning trees
>      */
>     pANTLR3_COMMON_TOKEN    start;
>     pANTLR3_COMMON_TOKEN    stop;
>     	tree;
>    
> }
>     LangParser_start_return;
> 
> 
> It seems the tree missing the type, however it is generated by ANTLR. Is
> it a bug or I missing sth,
> 
> Best regards
> 
> Yang

I believe you have to put into the options

ASTLabelType= pANTLR3_BASE_TREE;

to get things working.

Johannes
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
> 



From smbogan at gmail.com  Mon Oct 20 18:29:58 2008
From: smbogan at gmail.com (Shaun Bogan)
Date: Mon, 20 Oct 2008 20:29:58 -0500
Subject: [antlr-interest] ANTLRWorks Parse Tree
Message-ID: <31160efe0810201829q297c96dcy6887d6ca52397aad@mail.gmail.com>

Anyone else notice that the Debugger's parse tree has 'and' for every
match in the tree?  It seems the tree structure itself is correct, but
every node is 'and' and it doesn't seem to be getting this from my
grammar.  I tried my grammer in the last version of ANTLRWorks and it
works fine.  The Interpreter still works correctly.

Thanks,
Shaun

From parrt at cs.usfca.edu  Mon Oct 20 18:45:24 2008
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon, 20 Oct 2008 18:45:24 -0700
Subject: [antlr-interest] ANTLRWorks Parse Tree
In-Reply-To: <31160efe0810201829q297c96dcy6887d6ca52397aad@mail.gmail.com>
References: <31160efe0810201829q297c96dcy6887d6ca52397aad@mail.gmail.com>
Message-ID: <46ADA37A-1190-4463-9B86-DA581CB3652F@cs.usfca.edu>

a websearch will reveal you have spaces in your dir name
Ter
On Oct 20, 2008, at 6:29 PM, Shaun Bogan wrote:

> Anyone else notice that the Debugger's parse tree has 'and' for every
> match in the tree?  It seems the tree structure itself is correct, but
> every node is 'and' and it doesn't seem to be getting this from my
> grammar.  I tried my grammer in the last version of ANTLRWorks and it
> works fine.  The Interpreter still works correctly.
>
> Thanks,
> Shaun
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>


From smbogan at gmail.com  Mon Oct 20 19:57:51 2008
From: smbogan at gmail.com (Shaun Bogan)
Date: Mon, 20 Oct 2008 21:57:51 -0500
Subject: [antlr-interest] Rules of this form no longer working for me under
	new ANTLR
Message-ID: <31160efe0810201957m1b9be064j31714eff5de3b190@mail.gmail.com>

I've been migrating to the newest version of ANTLRWorks (and I presume
there must be a new version of ANTLR underlying it).  Several rules
that worked previously, no longer work.

squarecall
	:	(SQUARELEFT (statementnocolon (',' statementnocolon)*)?
SQUARERIGHT)-> statementnocolon*
	;

Which should match both [a,b,c,d] and [], but only works for the first
form.  In the second form I get a rewrite exception saying the stream
is empty.  Is there an option that used to be default, that I have
off, or does the new version of ANTLR work differently for this?  If I
don't attempt to rewrite it (i.e. get rid of the "->
statementnocolon*") it doesn't cause an error, but I obviously get '['
and ']' in my output.

Any help is appreciated.

Thanks,
S M Bogan

From hgutsche at storm.ca  Mon Oct 20 20:13:33 2008
From: hgutsche at storm.ca (Hartmuth Gutsche)
Date: Mon, 20 Oct 2008 23:13:33 -0400
Subject: [antlr-interest] ANTLR 3.1.1 test failures
References: <31515.208.65.73.201.1222970579.squirrel@home.storm.ca>
	<9C0F4B50-23EE-4A16-8469-1C2509C6C3D9@cs.usfca.edu>
Message-ID: <006501c9332b$03696960$6900a8c0@uranus>

I finally continued to investigate and found the following issues with the
tests:
Environment is W2K using Eclipse. Java SDK 6

a) For those using Eclipse. One has to set the "PATH" variable explicitly to
the directory where javac.exe resides in the run configuration for JUNIT.

b) a few cases are caused by the problem described below. Some expected
texts contain explicitly "\n" while the test result generated uses the
system value for "newline" which is "\r\n" on Windows. The subsequent
comparison consequently fails.

c) In a few cases the grammar text contains '\n' where '\\n' is meant, which
generates a line break instead of a '\n' in the generated T.g file.

d) In some places (e.g. testAttributes) some tests report errors with data
that stem from the previous test executed. The reason is that BaseTest.setUp
should contain the statement ErrorManager.removeErrorListener() (the way I
fixed it). Otherwise reported errors/warnings are not removed from
ErrorManager before the next test is executed.

e) Many cases of  TestCharDFAConversion( and in other test, too, e.g.
TestIntervalSet) fail because the expected value is \uFFFE instead of the
returned value \uFFFF. Probably caused by making \uFFFF a valid character.

f) In many cases the expected results differ in the sequence of the textual
elements. This seems to be caused by comparing results contained in "map"
objects with an expected sequence.

I guess not many run those tests on Windows. Hope it helps somewhere.

Hartmuth

----- Original Message ----- 
From: "Terence Parr" <parrt at cs.usfca.edu>
To: "Hartmuth Gutsche" <hgutsche at storm.ca>
Cc: <antlr-interest at antlr.org>
Sent: Thursday, October 02, 2008 2:44 PM
Subject: Re: [antlr-interest] ANTLR 3.1.1 test failures



On Oct 2, 2008, at 11:02 AM, Hartmuth Gutsche wrote:

> I am trying to run the tests under ?org.antlr.test? and get 503
> failures
> out of 1095 tests. Are they supposed to pass without failure?
>
> I see this in two different Windows environments.

Mostly likely \n and \r issue.

T



From antlr at mirality.co.nz  Tue Oct 21 00:02:01 2008
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Tue, 21 Oct 2008 20:02:01 +1300
Subject: [antlr-interest] wildcard in tree grammar
In-Reply-To: <59B5D09B-0C80-4F82-8ED3-91B02962AF10@cs.usfca.edu>
References: <59B5D09B-0C80-4F82-8ED3-91B02962AF10@cs.usfca.edu>
Message-ID: <20081021070213.DA48111EB00@www.antlr.org>

At 07:26 21/10/2008, Terence Parr wrote:
 >wildcard is single node in tree grammar analysis but node or 
tree
 >at runtime
 >
 >We need both single node wildcard and tree wildcard. DFA 
analysis
 >sees '.' as a single node.
 >
 >If you say ^('+' . .), that expects two single nodes as children 

 >at analysis time. The problem is that at runtime we want 
wildcard
 >to match a subtree as well. We need to tell the analysis
 >specifically which one we mean. I can see a situation where you
 >want to match literally a single node versus a subtree. I don't
 >want to flip wildcard mean subtree.

For analysis purposes, shouldn't ^(anything at all) be considered 
equivalent to a single node anyway?  In much the same way that in 
the expression "x + (y + z)", "x" and "(y + z)" are both atoms (in 
terms of precedence).

I'm a bit rusty on ANTLR's internal tree representation, but 
certainly in a "normal" tree this is the case -- any given node 
can have a subtree (or not), and you can uniquely refer to any 
subtree by pointing at its root node.  I don't see why ANTLR would 
need to behave any differently (and I can see quite a few cases 
where it'd be beneficial if it could handle both cases at runtime, 
not compile time).

Given the original problem mentioned in the issue:
   input: ^(not ^(and ^(= a b) ^(= c d)))
   rule: ^('not' ^('and' c51=. c52=.)) -> ...

I don't see how this can be misinterpreted.  While processing the 
'and' subtree, it reads the first child node, discovers that it's 
a subtree, reads the whole thing in and assigns the root node 
(with dangling subtree) to c51.  Then it does the same for the 
next subtree and c52.

Introducing separate operators for "single node" and "subtree" 
seems like a kludge, and it means that flexibility is lost; 
certain possible input trees simply won't be able to be parsed any 
more (or at least not as nicely).


From antlr at mirality.co.nz  Tue Oct 21 00:09:25 2008
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Tue, 21 Oct 2008 20:09:25 +1300
Subject: [antlr-interest] Rules of this form no longer working for me
 under new ANTLR
In-Reply-To: <31160efe0810201957m1b9be064j31714eff5de3b190@mail.gmail.co
 m>
References: <31160efe0810201957m1b9be064j31714eff5de3b190@mail.gmail.com>
Message-ID: <20081021070935.722B011EDAC@www.antlr.org>

At 15:57 21/10/2008, Shaun Bogan wrote:
 >squarecall
 >	:	(SQUARELEFT (statementnocolon (',' statementnocolon)*)?
 >SQUARERIGHT)-> statementnocolon*
 >	;

If the problem really is in this rule, then try:

   squarecall
     :  SQUARELEFT (a+=statementnocolon
          (',' a+=statementnocolon)*)? SQUARERIGHT
          -> $a*
     ;

(I can never remember if that $ is supposed to be there or not, 
though.)

However I think it's much more likely that the problem is not with 
this rule itself but rather with the rule that calls this.  I bet 
you're doing something like this:

    ... squarecall ... -> ... squarecall ...

Since squarecall can produce an empty tree, you need to use this 
instead:

    ... squarecall ... -> ... squarecall? ...


From antlr at mirality.co.nz  Tue Oct 21 00:26:49 2008
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Tue, 21 Oct 2008 20:26:49 +1300
Subject: [antlr-interest] wildcard in tree grammar
In-Reply-To: <20081021070213.DA48111EB00@www.antlr.org>
References: <59B5D09B-0C80-4F82-8ED3-91B02962AF10@cs.usfca.edu>
	<20081021070213.DA48111EB00@www.antlr.org>
Message-ID: <20081021072701.168D011EE47@www.antlr.org>

A few minutes ago, I wrote:
 >certain possible input trees simply won't be able to
 >be parsed any more (or at least not as nicely).

Well, ok, that's a bit too much of an exaggeration; after all, 
this:

   ^('not' ^('and' c51=. c52=.))

with "." handling both cases (as I still maintain it should) could 
be rendered like this if there were separate . and _ operators 
(which I still dislike):

   ^('not' ^('and' c51=wild c52=wild))

wild : . | _ ;

But that seems really silly.


From sharwell at pixelminegames.com  Tue Oct 21 01:24:38 2008
From: sharwell at pixelminegames.com (Sam Harwell)
Date: Tue, 21 Oct 2008 03:24:38 -0500
Subject: [antlr-interest] StringTemplate editing in Visual Studio
Message-ID: <86403CA0939415448BCCB83855EFE09A64E65C@Bloodymary.ironwillgames.com>

I'm in the initial stages of the StringTemplate portion of an editor for
Visual Studio. At this point, it doesn't do anything crazy but I'm
posting a screenshot to try and draw some feedback. Does anyone have an
idea what the syntax highlighting for StringTemplate should look like
optimally? I have a few ideas I'll run with for now and hopefully
they'll prove usable.

The screenshot is under the StringTemplate section on this page:
http://wiki.pixelminegames.com/index.php?title=Tools:nFringe:Antlr:Featu
res

On a side note, the current preview release (16251) doesn't include the
StringTemplate syntax highlighter. It'll be in the next one.

Sam

From lgcraymer at yahoo.com  Tue Oct 21 01:35:10 2008
From: lgcraymer at yahoo.com (Loring Craymer)
Date: Tue, 21 Oct 2008 01:35:10 -0700 (PDT)
Subject: [antlr-interest] StringTemplate editing in Visual Studio
Message-ID: <410314.76514.qm@web55904.mail.re3.yahoo.com>

That looks like a good start.  I'd add a color for arguments (both in the header and when referenced), and another for method invocations and template qualifiers ('separator = "\n"').

--Loring



----- Original Message ----
> From: Sam Harwell <sharwell at pixelminegames.com>
> To: antlr-interest Interest <antlr-interest at antlr.org>; stringtemplate-interest <stringtemplate-interest at antlr.org>
> Sent: Tuesday, October 21, 2008 1:24:38 AM
> Subject: [antlr-interest] StringTemplate editing in Visual Studio
> 
> I'm in the initial stages of the StringTemplate portion of an editor for
> Visual Studio. At this point, it doesn't do anything crazy but I'm
> posting a screenshot to try and draw some feedback. Does anyone have an
> idea what the syntax highlighting for StringTemplate should look like
> optimally? I have a few ideas I'll run with for now and hopefully
> they'll prove usable.
> 
> The screenshot is under the StringTemplate section on this page:
> http://wiki.pixelminegames.com/index.php?title=Tools:nFringe:Antlr:Featu
> res
> 
> On a side note, the current preview release (16251) doesn't include the
> StringTemplate syntax highlighter. It'll be in the next one.
> 
> Sam
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: 
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address


__________________________________________________
Do You Yahoo!?
Tired of spam?  Yahoo! Mail has the best spam protection around 
http://mail.yahoo.com 

From braincode at gmail.com  Tue Oct 21 02:28:35 2008
From: braincode at gmail.com (brainstorm)
Date: Tue, 21 Oct 2008 11:28:35 +0200
Subject: [antlr-interest] IDENTifier rule not working for some tokens
Message-ID: <32137c140810210228t1fdd99f0gf0ebf32fd1c7e672@mail.gmail.com>

Hello,

Newbie question :)

I'm developing my grammar and I get to a point where a simple token
like "bb" is not recognized as a regular identifier. I'm using the
following IDENT definition, like many grammars in antlr.org's
Downloads section:

IDENT	:	'a'..'z' ('a'..'z'|'A'..'Z'|'0'..'9')* ;
INTCONST:	('0'..'9')+ ;

I used to work with antlr v2 and C++, the definition for this token on
the same grammar was straightforward and worked well:

#token IDENT        "[a-zA-Z][a-zA-Z0-9]*"
#token INTCONST     "[0-9]+"

I'm attaching:

1) The grammar
2) jp2: For instance, the IDENT "p12" is correctly recognized an
placed on correct child on the parse tree.
3) jp4: The ident "bb" is splitted in the parse tree as "b" "b" on
different nodes, not detected as a whole identifier, why ? What am I
doing wrong ? :/

Thanks in advance !
Roman
-------------- next part --------------
A non-text attachment was scrubbed...
Name: CL.g
Type: application/octet-stream
Size: 2836 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20081021/970df9c3/attachment.obj 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: jp4
Type: application/octet-stream
Size: 821 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20081021/970df9c3/attachment-0001.obj 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: jp2
Type: application/octet-stream
Size: 602 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20081021/970df9c3/attachment-0002.obj 

From lars.vonwedel at bayertechnology.com  Tue Oct 21 03:12:42 2008
From: lars.vonwedel at bayertechnology.com (lars.vonwedel at bayertechnology.com)
Date: Tue, 21 Oct 2008 12:12:42 +0200
Subject: [antlr-interest] Templates for ANTLR post processing ?
Message-ID: <OF96C5E32B.61B763F3-ONC12574E9.0037F1C8-C12574E9.003817F2@bayer.de>

Hello,

I'd like to further process some of ANTLR's output (e.g. the contents of 
the .tokens file).

Would it be possible to submit a string template to ANTLR that is called 
during the generation process ?

Freundliche Gr??e / Best Regards
Lars von Wedel
_________________________________________

Bayer Technology Services GmbH
BTS-PT-PD-ES
Leverkusen, E 41
Phone: +49 214 30 56456
Fax: +49 214 30 62677
E-mail: lars.vonwedel at bayertechnology.com
Web: www.bayertechnology.com

Gesch?ftsf?hrer: Achim Noack
Aufsichtsratsvorsitzender: Dr. Wolfgang Plischke
Sitz der Gesellschaft: Leverkusen   |   Eintragung: Amtsgericht K?ln, HRB 
49896
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20081021/b128711a/attachment.html 

From jaluber at gmx.de  Tue Oct 21 03:20:06 2008
From: jaluber at gmx.de (Johannes Luber)
Date: Tue, 21 Oct 2008 12:20:06 +0200
Subject: [antlr-interest] Templates for ANTLR post processing ?
In-Reply-To: <OF96C5E32B.61B763F3-ONC12574E9.0037F1C8-C12574E9.003817F2@bayer.de>
References: <OF96C5E32B.61B763F3-ONC12574E9.0037F1C8-C12574E9.003817F2@bayer.de>
Message-ID: <48FDACD6.1080403@gmx.de>

lars.vonwedel at bayertechnology.com schrieb:
> 
> Hello,
> 
> I'd like to further process some of ANTLR's output (e.g. the contents of
> the .tokens file).
> 
> Would it be possible to submit a string template to ANTLR that is called
> during the generation process ?

Currently ANTLR doesn't support such a mechanism. In the worst case, you
have to create an own program which feeds the values into a
StringTemplate structure.

Johannes
> 
> Freundliche Gr??e / Best Regards
> Lars von Wedel
> _________________________________________
> 
> Bayer Technology Services GmbH
> BTS-PT-PD-ES
> Leverkusen, E 41
> Phone: +49 214 30 56456
> Fax: +49 214 30 62677
> E-mail: lars.vonwedel at bayertechnology.com
> Web: www.bayertechnology.com
> 
> Gesch?ftsf?hrer: Achim Noack
> Aufsichtsratsvorsitzender: Dr. Wolfgang Plischke
> Sitz der Gesellschaft: Leverkusen   |   Eintragung: Amtsgericht K?ln,
> HRB 49896
> 
> 
> ------------------------------------------------------------------------
> 
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
> 


From arnulf.heller at cnsystems.at  Tue Oct 21 03:48:30 2008
From: arnulf.heller at cnsystems.at (arnulf.heller at cnsystems.at)
Date: Tue, 21 Oct 2008 12:48:30 +0200
Subject: [antlr-interest] Antwort:  Templates for ANTLR post processing ?
In-Reply-To: <OF96C5E32B.61B763F3-ONC12574E9.0037F1C8-C12574E9.003817F2@bayer.de>
Message-ID: <OFF739F908.53BD58A3-ONC12574E9.003A57F6-C12574E9.003B5FDD@cnsystems.at>

antlr-interest-bounces at antlr.org schrieb am 21.10.2008 12:12:42:

> 
> Hello, 
> 
> I'd like to further process some of ANTLR's output (e.g. the 
> contents of the .tokens file). 
> 
> Would it be possible to submit a string template to ANTLR that is 
> called during the generation process ? 

You might also consider writing a backend for ANTLR. As ANTLR parses a 
grammar file, it builds up internal data structures which are subsequently 
handled to the string templates of the target language.

These data structures do have complete knowledge of you grammar because 
they are used to build the parser.

There is an article on the wiki which describes how to build a backend. 
You are in the lucky situation that you don't need to write the runtime 
thus it should be pretty easy to do that.

> 
> Freundliche Gr??e / Best Regards
> Lars von Wedel
> _________________________________________
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20081021/bf08e2e2/attachment.html 

From parrt at cs.usfca.edu  Tue Oct 21 08:33:51 2008
From: parrt at cs.usfca.edu (Terence Parr)
Date: Tue, 21 Oct 2008 08:33:51 -0700
Subject: [antlr-interest] [stringtemplate-interest] StringTemplate
	editing in Visual Studio
In-Reply-To: <86403CA0939415448BCCB83855EFE09A64E65C@Bloodymary.ironwillgames.com>
References: <86403CA0939415448BCCB83855EFE09A64E65C@Bloodymary.ironwillgames.com>
Message-ID: <69604806-5720-4394-923C-05C43A856FA3@cs.usfca.edu>

That looks great!  I was going to explore for ANTLRWorks sometime this  
year.  Great job...now I can copy you! ;)
Ter
On Oct 21, 2008, at 1:24 AM, Sam Harwell wrote:

> I'm in the initial stages of the StringTemplate portion of an editor  
> for
> Visual Studio. At this point, it doesn't do anything crazy but I'm
> posting a screenshot to try and draw some feedback. Does anyone have  
> an
> idea what the syntax highlighting for StringTemplate should look like
> optimally? I have a few ideas I'll run with for now and hopefully
> they'll prove usable.
>
> The screenshot is under the StringTemplate section on this page:
> http://wiki.pixelminegames.com/index.php?title=Tools:nFringe:Antlr:Featu
> res
>
> On a side note, the current preview release (16251) doesn't include  
> the
> StringTemplate syntax highlighter. It'll be in the next one.
>
> Sam
> _______________________________________________
> stringtemplate-interest mailing list
> stringtemplate-interest at antlr.org
> http://www.antlr.org/mailman/listinfo/stringtemplate-interest


From sharwell at pixelminegames.com  Tue Oct 21 08:47:13 2008
From: sharwell at pixelminegames.com (Sam Harwell)
Date: Tue, 21 Oct 2008 10:47:13 -0500
Subject: [antlr-interest] [stringtemplate-interest] StringTemplate
	editing in Visual Studio
In-Reply-To: <69604806-5720-4394-923C-05C43A856FA3@cs.usfca.edu>
References: <86403CA0939415448BCCB83855EFE09A64E65C@Bloodymary.ironwillgames.com>
	<69604806-5720-4394-923C-05C43A856FA3@cs.usfca.edu>
Message-ID: <86403CA0939415448BCCB83855EFE09A64E665@Bloodymary.ironwillgames.com>

I'm using a barely-modified group.g3 in my C# StringTemplate 3.2 port,
and the colorizer uses it directly. As I was mentioning on my blog, the
key to using ANTLR lexers in a syntax highlighter making sure the lexer
can cleanly handle *any* single line of source without context other
than a single integer used for marking the state at the beginning of a
line.

I'm working on a framework for automatic handling of island grammars in
this kind of line-by-line lexer, at which point I'll be able to
arbitrarily highlight any tokens of the StringTemplate sub-grammars.
You'll have to write your own highlighter since it won't be in Visual
Studio, but I can detail some of the method once it's up and running.

Since many lexers use few (if any) actions, we've had remarkable success
getting new syntax highlighters up and running. Once I had the
StringTemplate C# port running, it took less than 2hrs to build the
syntax highlighter as it sits now.

Sam

-----Original Message-----
From: Terence Parr [mailto:parrt at cs.usfca.edu] 
Sent: Tuesday, October 21, 2008 10:34 AM
To: Sam Harwell
Cc: antlr-interest Interest; stringtemplate-interest
Subject: Re: [stringtemplate-interest] StringTemplate editing in Visual
Studio

That looks great!  I was going to explore for ANTLRWorks sometime this  
year.  Great job...now I can copy you! ;)
Ter
On Oct 21, 2008, at 1:24 AM, Sam Harwell wrote:

> I'm in the initial stages of the StringTemplate portion of an editor  
> for
> Visual Studio. At this point, it doesn't do anything crazy but I'm
> posting a screenshot to try and draw some feedback. Does anyone have  
> an
> idea what the syntax highlighting for StringTemplate should look like
> optimally? I have a few ideas I'll run with for now and hopefully
> they'll prove usable.
>
> The screenshot is under the StringTemplate section on this page:
>
http://wiki.pixelminegames.com/index.php?title=Tools:nFringe:Antlr:Featu
> res
>
> On a side note, the current preview release (16251) doesn't include  
> the
> StringTemplate syntax highlighter. It'll be in the next one.
>
> Sam
> _______________________________________________
> stringtemplate-interest mailing list
> stringtemplate-interest at antlr.org
> http://www.antlr.org/mailman/listinfo/stringtemplate-interest


From jimi at temporal-wave.com  Tue Oct 21 09:04:47 2008
From: jimi at temporal-wave.com (Jim Idle)
Date: Tue, 21 Oct 2008 09:04:47 -0700
Subject: [antlr-interest] IDENTifier rule not working for some tokens
In-Reply-To: <32137c140810210228t1fdd99f0gf0ebf32fd1c7e672@mail.gmail.com>
References: <32137c140810210228t1fdd99f0gf0ebf32fd1c7e672@mail.gmail.com>
Message-ID: <1224605087.4489.63.camel@jimi>

On Tue, 2008-10-21 at 11:28 +0200, brainstorm wrote:

> grammar CL;
> 
> options
> {
>         output = AST;
> //      backtrack = true;


Don't use this unless there is no other readable way.


> //      caseSensitive = false;  // no case insensitivity implemented
> yet on ANTLRv3, see: 
>                                 //
> http://www.antlr.org/wiki/pages/viewpage.action?pageId=1782
>                                 // and:
>                                 //
> http://www.antlr.org/pipermail/antlr-interest/2007-January/019008.html
>                                 //
>                                 // Update: There's no need for the
> above howto's, defining the WS special token (below) is sufficient


I am not sure how your WS token definition helps you with case
insensitivity, however, calling the builtin method in the C runtime to
ask for case insensitive matching is a lot easier than specifying all
combinations of tokens, which may be why your 'bb' isn't working. Adding
the override for Java is the same.

If you are using ANTLRWorks, are you using the interpreter or the
debugger - use the debugger pretty much always - the interpreter is
handy for a quick verification of a sub rule and so on.


>                                 
> //      memoize = true;
> }
> 
> tokens {
>         IDENT;


Take this IDENT def out too, you are defining it in the lexer.


> //      PROGRAM; ENDPROGRAM; //...
>         // waste of time, better define tokens on the grammar using ''
>         // ANTLR will generate this list for us (CL.tokens).
> }


Especially when you are new to ANTLR 3 it is better not to use literals
in the grammar but to define tokens in the lexer. The ambiguities
between lexer tokens are obfuscated when using grammar level literals
and typos change things that are difficult to discover.



> 
> program:        'PROGRAM'^ l_dec_vars l_dec_blocs l_instrs
> 'ENDPROGRAM'!;
>         
> l_dec_vars:     ('VARS'! (dec_var)* 'ENDVARS'!|);
>         
> dec_var:        IDENT^ constr_type;
> 
> l_dec_blocs:    (dec_bloc)*;
> 
> dec_bloc:       'PROCEDURE'^ header_proc l_dec_vars l_dec_blocs
> l_instrs 'ENDPROCEDURE'! 


This is where literals start to get confusing 'PROCEDURE'^ vs PROCEDURE
and a lexer definition.


> 
> constr_type:    ('INT' | 'Int' | 'int')  |  ('BOOL'|'bool')


And this is probably where your bb goes wrong. I would bet that the
lexer is starting to match 'bool' and gives up. Also, your case
insensitivity is inconsistent with Int and Bool. These really need to be
( ('I'|'i')('N'|'n') and so on.


> expsimple:      IDENT^ (func_call|) ('['^ expression ']'!)* ('.'^
> IDENT ('['^ expression ']'!|))*       //XXX: match bb as identifier


You probably are not getting here for input 'bb'.


> 
> IDENT   :       'a'..'z' ('a'..'z'|'A'..'Z'|'0'..'9')* ;
> INTCONST:       ('0'..'9')+ ;
> 
> WS      :       (' '|'\r'|'\t'|'\u000C'|'\n') {$channel=HIDDEN;};
> COMMA   :       ',';
> STRING  :       '~[]*'; // XXX


Not sure what STRING is meant to match, but you know it matches the
literal string ~[]* right?

So:

1) Use the case insensitive match routine and specify our lexer tokens
in UPPERCASE;
2) Take the literals out and make real lexer tokens;

Then you will at least be able to see what is going wrong (but my
felling is that it won't go wrong when you do that unless your STRING
rule is really ~('['| ']')* ? If you are just trying to pick up any
characters that are not matched by anything else, just use:

unknown : ANY+;
ANY : . ;

Jim

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20081021/4f45b837/attachment.html 

From jaluber at gmx.de  Tue Oct 21 09:18:17 2008
From: jaluber at gmx.de (Johannes Luber)
Date: Tue, 21 Oct 2008 18:18:17 +0200
Subject: [antlr-interest] [stringtemplate-interest] StringTemplate
	editing in Visual	Studio
In-Reply-To: <86403CA0939415448BCCB83855EFE09A64E665@Bloodymary.ironwillgames.com>
References: <86403CA0939415448BCCB83855EFE09A64E65C@Bloodymary.ironwillgames.com>	<69604806-5720-4394-923C-05C43A856FA3@cs.usfca.edu>
	<86403CA0939415448BCCB83855EFE09A64E665@Bloodymary.ironwillgames.com>
Message-ID: <48FE00C9.4070504@gmx.de>

Sam Harwell schrieb:
> I'm using a barely-modified group.g3 in my C# StringTemplate 3.2 port,

Did you add the missing stuff or did you port from Java directly? If the
latter, did you do it manually or with a tool?

Johannes
> and the colorizer uses it directly. As I was mentioning on my blog, the
> key to using ANTLR lexers in a syntax highlighter making sure the lexer
> can cleanly handle *any* single line of source without context other
> than a single integer used for marking the state at the beginning of a
> line.
> 
> I'm working on a framework for automatic handling of island grammars in
> this kind of line-by-line lexer, at which point I'll be able to
> arbitrarily highlight any tokens of the StringTemplate sub-grammars.
> You'll have to write your own highlighter since it won't be in Visual
> Studio, but I can detail some of the method once it's up and running.
> 
> Since many lexers use few (if any) actions, we've had remarkable success
> getting new syntax highlighters up and running. Once I had the
> StringTemplate C# port running, it took less than 2hrs to build the
> syntax highlighter as it sits now.
> 
> Sam
> 
> -----Original Message-----
> From: Terence Parr [mailto:parrt at cs.usfca.edu] 
> Sent: Tuesday, October 21, 2008 10:34 AM
> To: Sam Harwell
> Cc: antlr-interest Interest; stringtemplate-interest
> Subject: Re: [stringtemplate-interest] StringTemplate editing in Visual
> Studio
> 
> That looks great!  I was going to explore for ANTLRWorks sometime this  
> year.  Great job...now I can copy you! ;)
> Ter
> On Oct 21, 2008, at 1:24 AM, Sam Harwell wrote:
> 
>> I'm in the initial stages of the StringTemplate portion of an editor  
>> for
>> Visual Studio. At this point, it doesn't do anything crazy but I'm
>> posting a screenshot to try and draw some feedback. Does anyone have  
>> an
>> idea what the syntax highlighting for StringTemplate should look like
>> optimally? I have a few ideas I'll run with for now and hopefully
>> they'll prove usable.
>>
>> The screenshot is under the StringTemplate section on this page:
>>
> http://wiki.pixelminegames.com/index.php?title=Tools:nFringe:Antlr:Featu
>> res
>>
>> On a side note, the current preview release (16251) doesn't include  
>> the
>> StringTemplate syntax highlighter. It'll be in the next one.
>>
>> Sam
>> _______________________________________________
>> stringtemplate-interest mailing list
>> stringtemplate-interest at antlr.org
>> http://www.antlr.org/mailman/listinfo/stringtemplate-interest
> 
> _______________________________________________
> stringtemplate-interest mailing list
> stringtemplate-interest at antlr.org
> http://www.antlr.org/mailman/listinfo/stringtemplate-interest
> 


From sharwell at pixelminegames.com  Tue Oct 21 09:39:09 2008
From: sharwell at pixelminegames.com (Sam Harwell)
Date: Tue, 21 Oct 2008 11:39:09 -0500
Subject: [antlr-interest] [stringtemplate-interest] StringTemplate
	editing in Visual Studio
In-Reply-To: <48FE00C9.4070504@gmx.de>
References: <86403CA0939415448BCCB83855EFE09A64E65C@Bloodymary.ironwillgames.com>	<69604806-5720-4394-923C-05C43A856FA3@cs.usfca.edu>
	<86403CA0939415448BCCB83855EFE09A64E665@Bloodymary.ironwillgames.com>
	<48FE00C9.4070504@gmx.de>
Message-ID: <86403CA0939415448BCCB83855EFE09A64E668@Bloodymary.ironwillgames.com>

Fresh port by hand using all ANTLR3 grammars. Hello C# 3.0 Extension
Methods. :) I also have a C# 3 port of the ANTLR runtime using generics
& Linq in places. I'm working on lazy evaluation of lexers in the
parser, etc., but that isn't complete yet.

After the StringTemplate unit tests all passed (including fixing the
'\n'/'\r\n' issues in the tests and implementation) I refactored some
System.Collections.IDictionary and IList to generics. I'll be posting
the StringTemplate source in the near future and keeping it updated. The
StringTemplate port happened because I'm working on a full ANTLR3 port
to C# 3 so I can completely integrate the build, debugging, and new
modular/extensible codegen optimization passes into my Visual Studio
language service. Now that even Mono supports most (all?) of the
relevant C# 3 features, I felt that was the best way to go on a fresh
port. C# 2 users (Visual Studio 2005, etc) won't be able to compile the
source within Visual Studio (command line works), but they *will* be
able to reference/use it in their projects and even benefit from the new
lazy evaluation features.

And now I'm rambling. :o

Sam

-----Original Message-----
From: Johannes Luber [mailto:jaluber at gmx.de] 
Sent: Tuesday, October 21, 2008 11:18 AM
To: Sam Harwell
Cc: Terence Parr; stringtemplate-interest; antlr-interest Interest
Subject: Re: [stringtemplate-interest] StringTemplate editing in Visual
Studio

Sam Harwell schrieb:
> I'm using a barely-modified group.g3 in my C# StringTemplate 3.2 port,

Did you add the missing stuff or did you port from Java directly? If the
latter, did you do it manually or with a tool?

Johannes
> and the colorizer uses it directly. As I was mentioning on my blog,
the
> key to using ANTLR lexers in a syntax highlighter making sure the
lexer
> can cleanly handle *any* single line of source without context other
> than a single integer used for marking the state at the beginning of a
> line.
> 
> I'm working on a framework for automatic handling of island grammars
in
> this kind of line-by-line lexer, at which point I'll be able to
> arbitrarily highlight any tokens of the StringTemplate sub-grammars.
> You'll have to write your own highlighter since it won't be in Visual
> Studio, but I can detail some of the method once it's up and running.
> 
> Since many lexers use few (if any) actions, we've had remarkable
success
> getting new syntax highlighters up and running. Once I had the
> StringTemplate C# port running, it took less than 2hrs to build the
> syntax highlighter as it sits now.
> 
> Sam
> 
> -----Original Message-----
> From: Terence Parr [mailto:parrt at cs.usfca.edu] 
> Sent: Tuesday, October 21, 2008 10:34 AM
> To: Sam Harwell
> Cc: antlr-interest Interest; stringtemplate-interest
> Subject: Re: [stringtemplate-interest] StringTemplate editing in
Visual
> Studio
> 
> That looks great!  I was going to explore for ANTLRWorks sometime this

> year.  Great job...now I can copy you! ;)
> Ter
> On Oct 21, 2008, at 1:24 AM, Sam Harwell wrote:
> 
>> I'm in the initial stages of the StringTemplate portion of an editor

>> for
>> Visual Studio. At this point, it doesn't do anything crazy but I'm
>> posting a screenshot to try and draw some feedback. Does anyone have

>> an
>> idea what the syntax highlighting for StringTemplate should look like
>> optimally? I have a few ideas I'll run with for now and hopefully
>> they'll prove usable.
>>
>> The screenshot is under the StringTemplate section on this page:
>>
>
http://wiki.pixelminegames.com/index.php?title=Tools:nFringe:Antlr:Featu
>> res
>>
>> On a side note, the current preview release (16251) doesn't include  
>> the
>> StringTemplate syntax highlighter. It'll be in the next one.
>>
>> Sam
>> _______________________________________________
>> stringtemplate-interest mailing list
>> stringtemplate-interest at antlr.org
>> http://www.antlr.org/mailman/listinfo/stringtemplate-interest
> 
> _______________________________________________
> stringtemplate-interest mailing list
> stringtemplate-interest at antlr.org
> http://www.antlr.org/mailman/listinfo/stringtemplate-interest
> 


From parrt at cs.usfca.edu  Tue Oct 21 10:09:14 2008
From: parrt at cs.usfca.edu (Terence Parr)
Date: Tue, 21 Oct 2008 10:09:14 -0700
Subject: [antlr-interest] Call for Papers: Language Descriptions Tools and
	Applications 2009
Message-ID: <8A61C8D9-75ED-49D3-BA01-1F647FFDC0C0@cs.usfca.edu>

LDTA: Workshop on Language Descriptions Tools and Applications

===Call For Papers 2009===

This is the Call For Papers for the Ninth Workshop on Language
Descriptions, Tools and Applications (LDTA 2009)

LDTA is a two-day satellite event of ETAPS which takes on the 28th and
29th of March 2009 in York, England.

==Scope==

LDTA is an application and tool oriented forum on meta programming in
a broad sense. A meta program is a program that takes other programs
as input or output. The focus of LDTA is on generated or otherwise
efficiently implemented meta programs, possibly using high level
descriptions of programming languages. Tools and techniques presented
at LDTA are usually applicable in the context of "Language
Workbenches" or "Meta Programming Systems" or simply as parts of
advanced programming environments or IDEs. The applications areas
include, but are not limited to:
* Program analysis, transformation, generation and verification
* Implementation of Domain Specific Languages (both visual and textual)
* Reverse engineering and reengineering
* Refactoring and other source-to-source transformations
* Application modelling (MDE, MDA, Software Factories, Software  
product lines)
* Grammar engineering / Grammarware
* Language definition and language prototyping
* Debugging, profiling and testing
* IDE construction
* Compiler construction

LDTA is a well-established workshop next to other conferences and
workshops on (programming) language engineering topics such as SLE and
GPCE.LDTA is traditionally a forum where computer science theories are
put to the test of real-world software engineering issues, for example
by applying:

* context-free grammars to parser generation for real programming  
languages,
* attribute grammars to static analyzer and compiler generation,
* term rewriting to source-to-source transformation,
* action semantics to programming language implementation,
* model checking to software verification.

Note that LDTA solicits submissions from any technological or
theoretical domain, as long as the paper is within the application
scope.

==Submission Procedure and Publication==

Submissions in the following categories are admissible:
* research papers,
* tool papers,
* experience papers

The final versions of accepted papers will probably(*) be published in
Electronic Notes in Theoretical Computer Science (ENTCS), Elsevier
Science, and will be made available during the workshop. (*)Due to
organizational changes at Elsevier, publication by ENTCS publication
is provisional; another comparable venue will be found otherwise.

Each submission must:
* clearly and unambiguously state in which of the three categories it  
falls
* be original, i.e. not published or submitted elsewhere,
* contain a clear motivation,
* contain a thorough analysis of the claimed contributions (for
example by comparing to related work),
* be written in less than 15 pages (research papers and experience
reports), or less than 10 pages (tool papers)
* use the ENTCS style.

The authors of each submission are required to give a presentation at
LDTA 2009. The authors of the tool papers are required to include an
interactive demonstration in their presentations.

The authors of the best papers will be invited to write a journal
version of their paper which will be separately reviewed and, assuming
acceptance, be published in journal form. As in past years, this will
be done in a special issue devoted to LDTA 2009 of the journal Science
of Computer Programming (Elsevier Science).

The authors of the best tool papers will be invited to write a paper
and submit the source of code of their tool, which will both be
separately reviewed and, assuming acceptance, be published in the
special issue on Experimental Software and Toolkits (EST) of the
journal Science of Computer Programming (Elsevier Science).

Please submit your abstract and paper using
http://www.easychair.org/conferences/?conf=ldta2009

==Program Committee==

Jurgen Vinju, CWI, Amsterdam (co-chair)
Torbj?rn Ekman, Oxford, UK (co-chair)
Erik Meijer, Microsoft, Redmond, USA
Walid Taha, Rice University, Houston USA
Bob Fuhrer, IBM TJ Watson, USA
Susan Eisenbach, Imperial College, UK
Jean-Marie Jacquet, FUNDP, Namur, Belgium
Sibylle Schuppe, Chalmers, Sweden
Elizabeth Scott, RHUL, UK
Robert Grimm, NYU, USA
Judith Bishop, Pretoria, South Africa
Tudor Girba, Univ of Berne, Switzerland
Marjan Mernik, University of Maribor, Slovenia
Thomas Dean, Fondazione Bruno Kessler - IRST, Italy
Martin Bravenboer, Univ. of Oregon, USA
Pierre-Etienne Moreau, INRIA-LORIA, France
Gabi Taentzer, Philipps-Universit?t Marburg, Germany
Joao Saraiva, Universidade do Minho, Braga, Portugal
Tijs van der Storm, CWI, The Netherlands
Stephen Edwards, Columbia University, USA
Peter Thiemann, Universit?t Freiburg, Germany

==Important Dates==

Abstract submission deadline:Friday November 28th, 2008
Paper submission deadline:Friday December 5th, 2008
Notification of acceptance:Friday February 6th, 2009
Workshop date:28th and 29th of March, 2009

From jaluber at gmx.de  Tue Oct 21 10:12:08 2008
From: jaluber at gmx.de (Johannes Luber)
Date: Tue, 21 Oct 2008 19:12:08 +0200
Subject: [antlr-interest] [stringtemplate-interest] StringTemplate
	editing in Visual Studio
In-Reply-To: <86403CA0939415448BCCB83855EFE09A64E668@Bloodymary.ironwillgames.com>
References: <86403CA0939415448BCCB83855EFE09A64E65C@Bloodymary.ironwillgames.com>	<69604806-5720-4394-923C-05C43A856FA3@cs.usfca.edu>
	<86403CA0939415448BCCB83855EFE09A64E665@Bloodymary.ironwillgames.com>
	<48FE00C9.4070504@gmx.de>
	<86403CA0939415448BCCB83855EFE09A64E668@Bloodymary.ironwillgames.com>
Message-ID: <48FE0D68.40501@gmx.de>

Sam Harwell schrieb:
> Fresh port by hand using all ANTLR3 grammars. Hello C# 3.0 Extension
> Methods. :) I also have a C# 3 port of the ANTLR runtime using generics
> & Linq in places. I'm working on lazy evaluation of lexers in the
> parser, etc., but that isn't complete yet.
> 
> After the StringTemplate unit tests all passed (including fixing the
> '\n'/'\r\n' issues in the tests and implementation) I refactored some
> System.Collections.IDictionary and IList to generics. I'll be posting
> the StringTemplate source in the near future and keeping it updated.

So I guess you are willing to take the job as the StringTemplate
maintainer? The current one is practically unreachable and has basically
no time. I'm also interested in your port of the ANTLR runtime. I
haven't got around to improve on the runtime because of the license
issue, which my predecessor introduced, and I didn't want to start the
work if there was a chance that it was a waste of time.

Also I haven't heard of anyone needing the new features so there wasn't
much pressure doing so anyway. But now it seems the best course of
action to get rid of the main parts of the hassle with using your port.
BTW, you did you the correct license, didn't you? And did you use
"tainted" files as your base? I don't want to deal with the same
problems again. We can discuss the details of checking the files in the
perforce repo privately.

> The
> StringTemplate port happened because I'm working on a full ANTLR3 port
> to C# 3 so I can completely integrate the build, debugging, and new
> modular/extensible codegen optimization passes into my Visual Studio
> language service. Now that even Mono supports most (all?) of the
> relevant C# 3 features,

Mono doesn't support LINQ to SQL yet, but the rest of the 3.5 features
(but not the 3.0 ones) is there.

> I felt that was the best way to go on a fresh
> port. C# 2 users (Visual Studio 2005, etc) won't be able to compile the
> source within Visual Studio (command line works), but they *will* be
> able to reference/use it in their projects and even benefit from the new
> lazy evaluation features.

Just that I understand it correctly: VS 2005 users can merely compile
the runtime on the command line despite using C# 3 features? Can they
jump into the source code files while debugging? Is it possible to use
2.0 as the compile target for users of .NET 2 and the ones of .NET 3.5
at once? That would simplify the maintainence.

Johannes
> 
> And now I'm rambling. :o
> 
> Sam
> 
> -----Original Message-----
> From: Johannes Luber [mailto:jaluber at gmx.de] 
> Sent: Tuesday, October 21, 2008 11:18 AM
> To: Sam Harwell
> Cc: Terence Parr; stringtemplate-interest; antlr-interest Interest
> Subject: Re: [stringtemplate-interest] StringTemplate editing in Visual
> Studio
> 
> Sam Harwell schrieb:
>> I'm using a barely-modified group.g3 in my C# StringTemplate 3.2 port,
> 
> Did you add the missing stuff or did you port from Java directly? If the
> latter, did you do it manually or with a tool?
> 
> Johannes
>> and the colorizer uses it directly. As I was mentioning on my blog,
> the
>> key to using ANTLR lexers in a syntax highlighter making sure the
> lexer
>> can cleanly handle *any* single line of source without context other
>> than a single integer used for marking the state at the beginning of a
>> line.
>>
>> I'm working on a framework for automatic handling of island grammars
> in
>> this kind of line-by-line lexer, at which point I'll be able to
>> arbitrarily highlight any tokens of the StringTemplate sub-grammars.
>> You'll have to write your own highlighter since it won't be in Visual
>> Studio, but I can detail some of the method once it's up and running.
>>
>> Since many lexers use few (if any) actions, we've had remarkable
> success
>> getting new syntax highlighters up and running. Once I had the
>> StringTemplate C# port running, it took less than 2hrs to build the
>> syntax highlighter as it sits now.
>>
>> Sam
>>
>> -----Original Message-----
>> From: Terence Parr [mailto:parrt at cs.usfca.edu] 
>> Sent: Tuesday, October 21, 2008 10:34 AM
>> To: Sam Harwell
>> Cc: antlr-interest Interest; stringtemplate-interest
>> Subject: Re: [stringtemplate-interest] StringTemplate editing in
> Visual
>> Studio
>>
>> That looks great!  I was going to explore for ANTLRWorks sometime this
> 
>> year.  Great job...now I can copy you! ;)
>> Ter
>> On Oct 21, 2008, at 1:24 AM, Sam Harwell wrote:
>>
>>> I'm in the initial stages of the StringTemplate portion of an editor
> 
>>> for
>>> Visual Studio. At this point, it doesn't do anything crazy but I'm
>>> posting a screenshot to try and draw some feedback. Does anyone have
> 
>>> an
>>> idea what the syntax highlighting for StringTemplate should look like
>>> optimally? I have a few ideas I'll run with for now and hopefully
>>> they'll prove usable.
>>>
>>> The screenshot is under the StringTemplate section on this page:
>>>
> http://wiki.pixelminegames.com/index.php?title=Tools:nFringe:Antlr:Featu
>>> res
>>>
>>> On a side note, the current preview release (16251) doesn't include  
>>> the
>>> StringTemplate syntax highlighter. It'll be in the next one.
>>>
>>> Sam
>>> _______________________________________________
>>> stringtemplate-interest mailing list
>>> stringtemplate-interest at antlr.org
>>> http://www.antlr.org/mailman/listinfo/stringtemplate-interest
>> _______________________________________________
>> stringtemplate-interest mailing list
>> stringtemplate-interest at antlr.org
>> http://www.antlr.org/mailman/listinfo/stringtemplate-interest
>>
> 


From parrt at cs.usfca.edu  Tue Oct 21 10:15:17 2008
From: parrt at cs.usfca.edu (Terence Parr)
Date: Tue, 21 Oct 2008 10:15:17 -0700
Subject: [antlr-interest] wildcard in tree grammar
In-Reply-To: <20081021070213.DA48111EB00@www.antlr.org>
References: <59B5D09B-0C80-4F82-8ED3-91B02962AF10@cs.usfca.edu>
	<20081021070213.DA48111EB00@www.antlr.org>
Message-ID: <8A421E28-6639-4361-BD30-D2E7D4A8C103@cs.usfca.edu>


On Oct 21, 2008, at 12:02 AM, Gavin Lambert wrote:
> For analysis purposes, shouldn't ^(anything at all) be considered
> equivalent to a single node anyway?  In much the same way that in
> the expression "x + (y + z)", "x" and "(y + z)" are both atoms (in
> terms of precedence).
>
> I'm a bit rusty on ANTLR's internal tree representation, but
> certainly in a "normal" tree this is the case -- any given node
> can have a subtree (or not), and you can uniquely refer to any
> subtree by pointing at its root node.  I don't see why ANTLR would
> need to behave any differently (and I can see quite a few cases
> where it'd be beneficial if it could handle both cases at runtime,
> not compile time).

Hi. It turns out that parsing in two dimensions is a bit tricky ;)  
antlr serializes trees too one-dimensional strings, injecting  
imaginary down and up nodes to represent structure. so, we need to be  
able to distinguish between

^(X Y Z)

and

^(X ^(Y Z))

A subtree is very different terms of lookahead from a linear list.  A  
B is different than ^(A B). Lookahead is AB on the first one (LL(2))  
and ADOWN on the second one.

>
> Given the original problem mentioned in the issue:
>   input: ^(not ^(and ^(= a b) ^(= c d)))
>   rule: ^('not' ^('and' c51=. c52=.)) -> ...
>
> I don't see how this can be misinterpreted.  While processing the
> 'and' subtree, it reads the first child node, discovers that it's
> a subtree, reads the whole thing in and assigns the root node
> (with dangling subtree) to c51.  Then it does the same for the
> next subtree and c52.

Agreed. After playing around all day yesterday, I came to the  
conclusion that the wild-card should in fact mean single node or  
subtree, which is normally what you want. I have simply altered the  
analysis to consider wild-card as  really ^(. .*) :)

Ter

From parrt at cs.usfca.edu  Tue Oct 21 10:17:54 2008
From: parrt at cs.usfca.edu (Terence Parr)
Date: Tue, 21 Oct 2008 10:17:54 -0700
Subject: [antlr-interest] Templates for ANTLR post processing ?
In-Reply-To: <OF96C5E32B.61B763F3-ONC12574E9.0037F1C8-C12574E9.003817F2@bayer.de>
References: <OF96C5E32B.61B763F3-ONC12574E9.0037F1C8-C12574E9.003817F2@bayer.de>
Message-ID: <7B923EBA-8E61-49AA-9243-09DF63E5450F@cs.usfca.edu>


On Oct 21, 2008, at 3:12 AM, lars.vonwedel at bayertechnology.com wrote:

>
> Hello,
>
> I'd like to further process some of ANTLR's output (e.g. the  
> contents of the .tokens file).
>
> Would it be possible to submit a string template to ANTLR that is  
> called during the generation process ?

Not at this time. Unfortunately also this one in particular is hard to  
alter! I hardcoded the template inside CodeGenerator. doh!

	protected final static String vocabFilePattern =
		"<tokens:{<attr.name>=<attr.type>\n}>" +
		"<literals:{<attr.name>=<attr.type>\n}>";

Ter

From parrt at cs.usfca.edu  Tue Oct 21 10:22:14 2008
From: parrt at cs.usfca.edu (Terence Parr)
Date: Tue, 21 Oct 2008 10:22:14 -0700
Subject: [antlr-interest] [stringtemplate-interest] StringTemplate
	editing in Visual Studio
In-Reply-To: <48FE0D68.40501@gmx.de>
References: <86403CA0939415448BCCB83855EFE09A64E65C@Bloodymary.ironwillgames.com>	<69604806-5720-4394-923C-05C43A856FA3@cs.usfca.edu>
	<86403CA0939415448BCCB83855EFE09A64E665@Bloodymary.ironwillgames.com>
	<48FE00C9.4070504@gmx.de>
	<86403CA0939415448BCCB83855EFE09A64E668@Bloodymary.ironwillgames.com>
	<48FE0D68.40501@gmx.de>
Message-ID: <AD179D38-F387-40B5-88A4-E860D40D9BFD@cs.usfca.edu>


On Oct 21, 2008, at 10:12 AM, Johannes Luber wrote:

> Sam Harwell schrieb:
>> Fresh port by hand using all ANTLR3 grammars. Hello C# 3.0 Extension
>> Methods. :) I also have a C# 3 port of the ANTLR runtime using  
>> generics
>> & Linq in places. I'm working on lazy evaluation of lexers in the
>> parser, etc., but that isn't complete yet.
>>
>> After the StringTemplate unit tests all passed (including fixing the
>> '\n'/'\r\n' issues in the tests and implementation) I refactored some
>> System.Collections.IDictionary and IList to generics. I'll be posting
>> the StringTemplate source in the near future and keeping it updated.
>
> So I guess you are willing to take the job as the StringTemplate
> maintainer?

  that would be awesome!

> The current one is practically unreachable and has basically
> no time. I'm also interested in your port of the ANTLR runtime. I
> haven't got around to improve on the runtime because of the license
> issue, which my predecessor introduced, and I didn't want to start the
> work if there was a chance that it was a waste of time.

Actually, I believe that he used the correct license on ST#, which is  
why I'm mystified he used a different one on ANTLR C# output.  
Apparently, he thinks they're different software and deserve different  
licenses (that's what he said in his e-mail anyway).

I think we are clean on this license.

Ter

From parrt at cs.usfca.edu  Tue Oct 21 10:49:38 2008
From: parrt at cs.usfca.edu (Terence Parr)
Date: Tue, 21 Oct 2008 10:49:38 -0700
Subject: [antlr-interest] Fixed meaning of . wildcard in tree grammar
Message-ID: <7DB571D6-A6BD-44E7-AB9C-07007CB0C82C@cs.usfca.edu>

Howdy.  So, wildcard '.' in tree grammar means node OR subtree  
officially now (and correctly).  I fixed a number of code gen issues  
with '.' during AST construction in tree grammars.  Because it can be  
a subtree, ^(. foo) is invalid.  Fortunately, the root says what to do  
and you would rarely ask for any root.  if wanted it, a simple DFS  
would suffice rather than a pattern match.

Fixed these bugs (for v3.2):

http://www.antlr.org:8888/browse/ANTLR-248
http://www.antlr.org:8888/browse/ANTLR-344

Added a bunch of unit tests.

More testing then a daily release soon.

Ter

From dejas9000 at gmail.com  Tue Oct 21 11:18:12 2008
From: dejas9000 at gmail.com (Dejas Ninethousand)
Date: Tue, 21 Oct 2008 13:18:12 -0500
Subject: [antlr-interest] Additional tokens not being passed to
	Create(IToken token) ?
Message-ID: <38a26f430810211118u12bf0886j177acfe8ad25f09b@mail.gmail.com>

Consider the following grammar file snippet:

grammar CSharpDoc;

options {
    language='CSharp';
    output=AST;
    backtrack=true;
}

tokens {
NAMESPACE_COMPLETE; // I am a imaginary token, I have no definition
elsewhere in the file.
}

...

namespace_decl
    :    NAMESPACE IDENT -> NAMESPACE IDENT NAMESPACE_COMPLETE;

NAMESPACE
    :     'namespace';

IDENT
    :   ID_START (ID_PART)*
    ;

...


I am using a custom TreeAdaptor and have overloaded the Create(IToken token)
method to create my own SyntaxTree internally "on the side" within my custom
tree adapter as tokens flow through Create.  I have used this technique
before with other grammars without a problem.  But for some reason in this
implementation I never see any NAMESPACE_COMPLETE tokens passed to Create.
So, for example:

  public override object Create(IToken token)
        {
            if (token != null)
            {
                switch (token.Type)
                {
                    case(CSharpDocLexer.NAMESPACE_COMPLETE):
                    {
                            // program never reaches this case
                    }
                      ... // do custom tree construction in the rest of the
function
                }
            }
            return base.Create(token);
       }

I can't for the life of me figurure out why, in this instance, i'm not
seeing that extra token.

So for some statement like "namespace cat" I would expect to see the
following tokens pass trough the Create method in this order:

NAMESPACE
IDENT
NAMESPACE_COMPLETE

but what I am seeing is:

NAMESPACE
IDENT

What am I missing?

Thanks,
Matt
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20081021/4f2f933d/attachment.html 

From parrt at cs.usfca.edu  Tue Oct 21 11:33:43 2008
From: parrt at cs.usfca.edu (Terence Parr)
Date: Tue, 21 Oct 2008 11:33:43 -0700
Subject: [antlr-interest] Additional tokens not being passed to
	Create(IToken token) ?
In-Reply-To: <38a26f430810211118u12bf0886j177acfe8ad25f09b@mail.gmail.com>
References: <38a26f430810211118u12bf0886j177acfe8ad25f09b@mail.gmail.com>
Message-ID: <B40DBF3F-780A-4FAA-9C72-DC9EF583C1A1@cs.usfca.edu>

Hi. I believe you need some dup methods too in the adaptor.
Ter
On Oct 21, 2008, at 11:18 AM, Dejas Ninethousand wrote:

> Consider the following grammar file snippet:
>
> grammar CSharpDoc;
>
> options {
>     language='CSharp';
>     output=AST;
>     backtrack=true;
> }
>
> tokens {
> NAMESPACE_COMPLETE; // I am a imaginary token, I have no definition  
> elsewhere in the file.
> }
>
> ...
>
> namespace_decl
>     :    NAMESPACE IDENT -> NAMESPACE IDENT NAMESPACE_COMPLETE;
>
> NAMESPACE
>     :     'namespace';
>
> IDENT
>     :   ID_START (ID_PART)*
>     ;
>
> ...
>
>
> I am using a custom TreeAdaptor and have overloaded the  
> Create(IToken token) method to create my own SyntaxTree internally  
> "on the side" within my custom tree adapter as tokens flow through  
> Create.  I have used this technique before with other grammars  
> without a problem.  But for some reason in this implementation I  
> never see any NAMESPACE_COMPLETE tokens passed to Create.  So, for  
> example:
>
>   public override object Create(IToken token)
>         {
>             if (token != null)
>             {
>                 switch (token.Type)
>                 {
>                     case(CSharpDocLexer.NAMESPACE_COMPLETE):
>                     {
>                             // program never reaches this case
>                     }
>                       ... // do custom tree construction in the rest  
> of the function
>                 }
>             }
>             return base.Create(token);
>        }
>
> I can't for the life of me figurure out why, in this instance, i'm  
> not seeing that extra token.
>
> So for some statement like "namespace cat" I would expect to see the  
> following tokens pass trough the Create method in this order:
>
> NAMESPACE
> IDENT
> NAMESPACE_COMPLETE
>
> but what I am seeing is:
>
> NAMESPACE
> IDENT
>
> What am I missing?
>
> Thanks,
> Matt
>
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>


From parrt at cs.usfca.edu  Tue Oct 21 11:36:00 2008
From: parrt at cs.usfca.edu (Terence Parr)
Date: Tue, 21 Oct 2008 11:36:00 -0700
Subject: [antlr-interest] ANTLR v3.1.1 released
In-Reply-To: <200810021006.02368.rschulz@sonic.net>
References: <126EB79A-5862-46DA-A428-A059006E3DC8@cs.usfca.edu>
	<200810020708.10719.rschulz@sonic.net>
	<9FA2363C-375A-48BE-889E-18E590E64ACA@cs.usfca.edu>
	<200810021006.02368.rschulz@sonic.net>
Message-ID: <156F2CD2-6361-424E-83C9-DA6DE752BEBA@cs.usfca.edu>

Hi Randall, I see

	public static void main(String[] args) {
		ErrorManager.info("ANTLR Parser Generator  Version " +
						  VERSION); // + " (August 12, 2008)  1989-2008");
		Tool antlr = new Tool(args);
		antlr.process();
		if ( ErrorManager.getNumErrors() > 0 ) {
			System.exit(1);
		}
		System.exit(0);
	}

in Tool.  It calls exit(1) upon syntax.  Which error didn't return 1  
for you?

Ter
On Oct 2, 2008, at 10:06 AM, Randall R Schulz wrote:

> On Thursday 02 October 2008 09:57, Terence Parr wrote:
>> On Oct 2, 2008, at 7:08 AM, Randall R Schulz wrote:
>>> On Thursday 02 October 2008 06:48, Randall R Schulz wrote:
>>>> On Wednesday 01 October 2008 14:36, Terence Parr wrote:
>>>>> 3.1.1 released:
>>>>
>>>> I'm starting a new parser and upgraded (to 3.1, yesterday and then
>>>> to 3.1.1, later yesterday...). Anyway, I was wondering if the
>>>> ANTLR command-line interface (org.antlr.Tool#main(), i.e.) gives a
>>>> non-zero exit code when there was an error during processing of
>>>> the ".g" files?
>>>>
>>>> ...
>>>
>>> Empirical testing suggests the answer is "no."
>>>
>>> Wasn't this going to be addressed a long time ago? It's very
>>> kludgey to
>>
>> I thought so...did you get a error or warning?
>
> Regardless of whether ANTLR liked the grammar specification or not,  
> the
> exit status is always 0.
>
>
>> Ter
>
>
> Randall Schulz
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>


From rschulz at sonic.net  Tue Oct 21 11:41:29 2008
From: rschulz at sonic.net (Randall R Schulz)
Date: Tue, 21 Oct 2008 11:41:29 -0700
Subject: [antlr-interest] ANTLR v3.1.1 released
In-Reply-To: <156F2CD2-6361-424E-83C9-DA6DE752BEBA@cs.usfca.edu>
References: <126EB79A-5862-46DA-A428-A059006E3DC8@cs.usfca.edu>
	<200810021006.02368.rschulz@sonic.net>
	<156F2CD2-6361-424E-83C9-DA6DE752BEBA@cs.usfca.edu>
Message-ID: <200810211141.30017.rschulz@sonic.net>

On Tuesday 21 October 2008 11:36, Terence Parr wrote:
> Hi Randall, I see
>
> 	public static void main(String[] args) {
> 		ErrorManager.info("ANTLR Parser Generator  Version " +
> 						  VERSION); // + " (August 12, 2008)  1989-2008");
> 		Tool antlr = new Tool(args);
> 		antlr.process();
> 		if ( ErrorManager.getNumErrors() > 0 ) {
> 			System.exit(1);
> 		}
> 		System.exit(0);
> 	}
>
> in Tool.  It calls exit(1) upon syntax.  Which error didn't return 1
> for you?

Well, during my most recent parser development (when I sent that), I 
naturally had many errors along the way and never got an exit status 
other than 0


> Ter


Randall Schulz

From parrt at cs.usfca.edu  Tue Oct 21 11:44:31 2008
From: parrt at cs.usfca.edu (Terence Parr)
Date: Tue, 21 Oct 2008 11:44:31 -0700
Subject: [antlr-interest] ANTLR v3.1.1 released
In-Reply-To: <200810211141.30017.rschulz@sonic.net>
References: <126EB79A-5862-46DA-A428-A059006E3DC8@cs.usfca.edu>
	<200810021006.02368.rschulz@sonic.net>
	<156F2CD2-6361-424E-83C9-DA6DE752BEBA@cs.usfca.edu>
	<200810211141.30017.rschulz@sonic.net>
Message-ID: <97C1565F-C9E9-4E2D-A79D-23A93064E3DB@cs.usfca.edu>

It's hard to see a code trace that could given an error (not warning)  
that wouldn't be trapped here.  Hmm...ok, let me know if you find a  
future issue.
Ter
On Oct 21, 2008, at 11:41 AM, Randall R Schulz wrote:

> On Tuesday 21 October 2008 11:36, Terence Parr wrote:
>> Hi Randall, I see
>>
>> 	public static void main(String[] args) {
>> 		ErrorManager.info("ANTLR Parser Generator  Version " +
>> 						  VERSION); // + " (August 12, 2008)  1989-2008");
>> 		Tool antlr = new Tool(args);
>> 		antlr.process();
>> 		if ( ErrorManager.getNumErrors() > 0 ) {
>> 			System.exit(1);
>> 		}
>> 		System.exit(0);
>> 	}
>>
>> in Tool.  It calls exit(1) upon syntax.  Which error didn't return 1
>> for you?
>
> Well, during my most recent parser development (when I sent that), I
> naturally had many errors along the way and never got an exit status
> other than 0
>
>
>> Ter
>
>
> Randall Schulz
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>


From parrt at cs.usfca.edu  Tue Oct 21 11:51:26 2008
From: parrt at cs.usfca.edu (Terence Parr)
Date: Tue, 21 Oct 2008 11:51:26 -0700
Subject: [antlr-interest] Additional tokens not being passed to
	Create(IToken token) ?
In-Reply-To: <38a26f430810211146vd9927b9hac95cb821b985579@mail.gmail.com>
References: <38a26f430810211118u12bf0886j177acfe8ad25f09b@mail.gmail.com>
	<B40DBF3F-780A-4FAA-9C72-DC9EF583C1A1@cs.usfca.edu>
	<38a26f430810211146vd9927b9hac95cb821b985579@mail.gmail.com>
Message-ID: <CCBB73C7-08A8-4889-84B6-2FA09F50BB7F@cs.usfca.edu>

Can we have the generated code for:

namespace_decl
     :    NAMESPACE IDENT -> NAMESPACE IDENT NAMESPACE_COMPLETE;

?

Try NAMESPACE_COMPLETE["blort"] also.

Are you setting a break pt in Create?
Ter

From rschulz at sonic.net  Tue Oct 21 11:52:52 2008
From: rschulz at sonic.net (Randall R Schulz)
Date: Tue, 21 Oct 2008 11:52:52 -0700
Subject: [antlr-interest] ANTLR v3.1.1 released
In-Reply-To: <97C1565F-C9E9-4E2D-A79D-23A93064E3DB@cs.usfca.edu>
References: <126EB79A-5862-46DA-A428-A059006E3DC8@cs.usfca.edu>
	<200810211141.30017.rschulz@sonic.net>
	<97C1565F-C9E9-4E2D-A79D-23A93064E3DB@cs.usfca.edu>
Message-ID: <200810211152.52801.rschulz@sonic.net>

On Tuesday 21 October 2008 11:44, Terence Parr wrote:
> On Oct 21, 2008, at 11:41 AM, Randall R Schulz wrote:
> > On Tuesday 21 October 2008 11:36, Terence Parr wrote:
> >> Hi Randall, I see
> >>
> >> 	public static void main(String[] args) {
> >> 		ErrorManager.info("ANTLR Parser Generator  Version " +
> >> 						  VERSION); // + " (August 12, 2008)  1989-2008");
> >> 		Tool antlr = new Tool(args);
> >> 		antlr.process();
> >> 		if ( ErrorManager.getNumErrors() > 0 ) {
> >> 			System.exit(1);
> >> 		}
> >> 		System.exit(0);
> >> 	}
> >>
> >> in Tool.  It calls exit(1) upon syntax.  Which error didn't return
> >> 1 for you?
> >
> > Well, during my most recent parser development (when I sent that),
> > I naturally had many errors along the way and never got an exit
> > status other than 0
> >
> >> Ter
> >
> > Randall Schulz
>
> It's hard to see a code trace that could given an error (not warning)
> that wouldn't be trapped here.  Hmm...ok, let me know if you find a
> future issue.
>
> Ter

From the 3.1.1 source:

-==--==--==--==--==--==--==--==--==--==--==--==--==--==--==--==-
    public static ErrorState getErrorState() {
        ErrorState ec =
            (ErrorState)threadToErrorStateMap.get(Thread.currentThread());
        if ( ec==null ) {
            ec = new ErrorState();
            threadToErrorStateMap.put(Thread.currentThread(), ec);
        }
        return ec;
    }

    public static int getNumErrors() {
        return getErrorState().errors;
    }
-==--==--==--==--==--==--==--==--==--==--==--==--==--==--==--==-


Perhaps its some kind of thread issue / mix-up?


Randall Schulz

From rschulz at sonic.net  Tue Oct 21 12:08:48 2008
From: rschulz at sonic.net (Randall R Schulz)
Date: Tue, 21 Oct 2008 12:08:48 -0700
Subject: [antlr-interest] ANTLR v3.1.1 released
In-Reply-To: <200810211152.52801.rschulz@sonic.net>
References: <126EB79A-5862-46DA-A428-A059006E3DC8@cs.usfca.edu>
	<97C1565F-C9E9-4E2D-A79D-23A93064E3DB@cs.usfca.edu>
	<200810211152.52801.rschulz@sonic.net>
Message-ID: <200810211208.48639.rschulz@sonic.net>

On Tuesday 21 October 2008 11:52, Randall R Schulz wrote:
> On Tuesday 21 October 2008 11:44, Terence Parr wrote:
> > ...
> >
> > It's hard to see a code trace that could given an error (not
> > warning) that wouldn't be trapped here.  Hmm...ok, let me know if
> > you find a future issue.
> >
> > Ter
>
> From the 3.1.1 source:
>
> -==--==--==--==--==--==--==--==--==--==--==--==--==--==--==--==-
>     public static ErrorState getErrorState() {
>         ErrorState ec = (ErrorState)threadToErrorStateMap.get(Thread.currentThread()); if ( ec==null ) {
>             ec = new ErrorState();
>             threadToErrorStateMap.put(Thread.currentThread(), ec);
>         }
>         return ec;
>     }
>
>     public static int getNumErrors() {
>         return getErrorState().errors;
>     }
> -==--==--==--==--==--==--==--==--==--==--==--==--==--==--==--==-
>
>
> Perhaps its some kind of thread issue / mix-up?


I see something called "two-threaded DFA conversion" and a class called
NFAConversionThread. Maybe the errors are getting reported on a thread
other than the one you check when wrapping up?


Randall Schulz


From antlr at mirality.co.nz  Tue Oct 21 12:13:51 2008
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Wed, 22 Oct 2008 08:13:51 +1300
Subject: [antlr-interest] [stringtemplate-interest] StringTemplate
 editing in Visual Studio
In-Reply-To: <48FE0D68.40501@gmx.de>
References: <86403CA0939415448BCCB83855EFE09A64E65C@Bloodymary.ironwillgames.com>
	<69604806-5720-4394-923C-05C43A856FA3@cs.usfca.edu>
	<86403CA0939415448BCCB83855EFE09A64E665@Bloodymary.ironwillgames.com>
	<48FE00C9.4070504@gmx.de>
	<86403CA0939415448BCCB83855EFE09A64E668@Bloodymary.ironwillgames.com>
	<48FE0D68.40501@gmx.de>
Message-ID: <20081021191401.19E3DCE97E@www.antlr.org>

[I would CC this to stringtemplate-interest as well, but I'm not 
subscribed so I can't.]

At 06:12 22/10/2008, Johannes Luber wrote:
 >Just that I understand it correctly: VS 2005 users can merely
 >compile the runtime on the command line despite using C# 3
 >features? Can they jump into the source code files while
 >debugging? Is it possible to use 2.0 as the compile target
 >for users of .NET 2 and the ones of .NET 3.5 at once? That
 >would simplify the maintainence.

As I understand it, if the runtime uses new *language* features 
(eg. extension methods, lambdas, etc), but not new *runtime* 
features (like LINQ, WPF, etc), then the precompiled binary will 
work on a machine that only has .NET 2, but it won't be able to be 
recompiled.

To be compilable, the dev will have to at minimum install .NET 3.5 
on their own machine and use the C# command line compiler that 
comes with the framework; again, if no runtime features are used 
then it will still be compatible with the .NET 2.0 runtime and 
won't increase the deployment requirement.  (Assuming the project 
specifies 2.0 as the minimum runtime.)

If runtime features like LINQ are used, then while the application 
using the library can still be 2.0-only, it will need to ensure 
that .NET 3.5 is installed on the target machine.


From parrt at cs.usfca.edu  Tue Oct 21 12:44:21 2008
From: parrt at cs.usfca.edu (Terence Parr)
Date: Tue, 21 Oct 2008 12:44:21 -0700
Subject: [antlr-interest] Additional tokens not being passed to
	Create(IToken token) ?
In-Reply-To: <38a26f430810211203l70226a13sce373297618038d9@mail.gmail.com>
References: <38a26f430810211118u12bf0886j177acfe8ad25f09b@mail.gmail.com>
	<B40DBF3F-780A-4FAA-9C72-DC9EF583C1A1@cs.usfca.edu>
	<38a26f430810211146vd9927b9hac95cb821b985579@mail.gmail.com>
	<CCBB73C7-08A8-4889-84B6-2FA09F50BB7F@cs.usfca.edu>
	<38a26f430810211203l70226a13sce373297618038d9@mail.gmail.com>
Message-ID: <2FC40412-CB75-4078-9061-90049B0027BA@cs.usfca.edu>


On Oct 21, 2008, at 12:03 PM, Dejas Ninethousand wrote:

>
>
> On Tue, Oct 21, 2008 at 1:51 PM, Terence Parr <parrt at cs.usfca.edu>  
> wrote:
> Can we have the generated code for:
>
> namespace_decl
>     :    NAMESPACE IDENT -> NAMESPACE IDENT NAMESPACE_COMPLETE;
>
> ?
>
> I'm not sure what you mean for generated code for that production.   
> Wouldn't that be in the parser?

yes, please post just that part to save us trouble :)

the gen'd code should tell us what's happening.
Ter

From parrt at cs.usfca.edu  Tue Oct 21 12:45:06 2008
From: parrt at cs.usfca.edu (Terence Parr)
Date: Tue, 21 Oct 2008 12:45:06 -0700
Subject: [antlr-interest] ANTLR v3.1.1 released
In-Reply-To: <200810211208.48639.rschulz@sonic.net>
References: <126EB79A-5862-46DA-A428-A059006E3DC8@cs.usfca.edu>
	<97C1565F-C9E9-4E2D-A79D-23A93064E3DB@cs.usfca.edu>
	<200810211152.52801.rschulz@sonic.net>
	<200810211208.48639.rschulz@sonic.net>
Message-ID: <E257CA8F-BBC8-4F84-8123-D719798829C4@cs.usfca.edu>

Hi. Good thought, though it should not be doing threads by default.
Ter
On Oct 21, 2008, at 12:08 PM, Randall R Schulz wrote:

> On Tuesday 21 October 2008 11:52, Randall R Schulz wrote:
>> On Tuesday 21 October 2008 11:44, Terence Parr wrote:
>>> ...
>>>
>>> It's hard to see a code trace that could given an error (not
>>> warning) that wouldn't be trapped here.  Hmm...ok, let me know if
>>> you find a future issue.
>>>
>>> Ter
>>
>> From the 3.1.1 source:
>>
>> -==--==--==--==--==--==--==--==--==--==--==--==--==--==--==--==-
>>    public static ErrorState getErrorState() {
>>        ErrorState ec =  
>> (ErrorState)threadToErrorStateMap.get(Thread.currentThread()); if  
>> ( ec==null ) {
>>            ec = new ErrorState();
>>            threadToErrorStateMap.put(Thread.currentThread(), ec);
>>        }
>>        return ec;
>>    }
>>
>>    public static int getNumErrors() {
>>        return getErrorState().errors;
>>    }
>> -==--==--==--==--==--==--==--==--==--==--==--==--==--==--==--==-
>>
>>
>> Perhaps its some kind of thread issue / mix-up?
>
>
> I see something called "two-threaded DFA conversion" and a class  
> called
> NFAConversionThread. Maybe the errors are getting reported on a thread
> other than the one you check when wrapping up?
>
>
> Randall Schulz
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>


From dejas9000 at gmail.com  Tue Oct 21 13:31:07 2008
From: dejas9000 at gmail.com (Dejas Ninethousand)
Date: Tue, 21 Oct 2008 15:31:07 -0500
Subject: [antlr-interest] Additional tokens not being passed to
	Create(IToken token) ?
In-Reply-To: <2FC40412-CB75-4078-9061-90049B0027BA@cs.usfca.edu>
References: <38a26f430810211118u12bf0886j177acfe8ad25f09b@mail.gmail.com>
	<B40DBF3F-780A-4FAA-9C72-DC9EF583C1A1@cs.usfca.edu>
	<38a26f430810211146vd9927b9hac95cb821b985579@mail.gmail.com>
	<CCBB73C7-08A8-4889-84B6-2FA09F50BB7F@cs.usfca.edu>
	<38a26f430810211203l70226a13sce373297618038d9@mail.gmail.com>
	<2FC40412-CB75-4078-9061-90049B0027BA@cs.usfca.edu>
Message-ID: <38a26f430810211331y7fd10d0erbf53f05610f2b4@mail.gmail.com>

I attached the whole parser file last reply, but here is the namespace_decl
production:

 // $ANTLR start namespace_decl
    //
D:\\projects\\AGLDoc\\COM\\CONTINENTAL\\WWW\\Technology\\Library\\Language\\Parsers\\CSharp\\CommentParser\\CSharpDoc.g:38:1:
namespace_decl : NAMESPACE IDENT -> NAMESPACE IDENT
NAMESPACE_COMPLETE[\"blort\"] ;
    public namespace_decl_return namespace_decl() // throws
RecognitionException [1]
    {
        namespace_decl_return retval = new namespace_decl_return();
        retval.start = input.LT(1);

        object root_0 = null;

        IToken NAMESPACE19 = null;
        IToken IDENT20 = null;

        object NAMESPACE19_tree=null;
        object IDENT20_tree=null;
        RewriteRuleTokenStream stream_NAMESPACE = new
RewriteRuleTokenStream(adaptor,"token NAMESPACE");
        RewriteRuleTokenStream stream_IDENT = new
RewriteRuleTokenStream(adaptor,"token IDENT");

        try
        {
            //
D:\\projects\\AGLDoc\\COM\\CONTINENTAL\\WWW\\Technology\\Library\\Language\\Parsers\\CSharp\\CommentParser\\CSharpDoc.g:39:2:
( NAMESPACE IDENT -> NAMESPACE IDENT NAMESPACE_COMPLETE[\"blort\"] )
            //
D:\\projects\\AGLDoc\\COM\\CONTINENTAL\\WWW\\Technology\\Library\\Language\\Parsers\\CSharp\\CommentParser\\CSharpDoc.g:39:4:
NAMESPACE IDENT
            {
                NAMESPACE19 = (IToken)input.LT(1);

Match(input,NAMESPACE,FOLLOW_NAMESPACE_in_namespace_decl172); if (failed)
return retval;
                if ( backtracking==0 ) stream_NAMESPACE.Add(NAMESPACE19);

                IDENT20 = (IToken)input.LT(1);
                Match(input,IDENT,FOLLOW_IDENT_in_namespace_decl174); if
(failed) return retval;
                if ( backtracking==0 ) stream_IDENT.Add(IDENT20);


                // AST REWRITE
                // elements:          NAMESPACE, IDENT
                // token labels:
                // rule labels:       retval
                // token list labels:
                // rule list labels:
                if ( backtracking==0 ) {
                retval.tree = root_0;
                RewriteRuleSubtreeStream stream_retval = new
RewriteRuleSubtreeStream(adaptor, "token retval", (retval!=null ?
retval.Tree : null));

                root_0 = (object)adaptor.GetNilNode();
                // 39:20: -> NAMESPACE IDENT NAMESPACE_COMPLETE[\"blort\"]
                {
                    adaptor.AddChild(root_0, stream_NAMESPACE.Next());
                    adaptor.AddChild(root_0, stream_IDENT.Next());
                    adaptor.AddChild(root_0,
adaptor.Create(NAMESPACE_COMPLETE, "blort"));

                }

                }

            }

            retval.stop = input.LT(-1);

            if ( backtracking==0 )
            {    retval.tree = (object)adaptor.RulePostProcessing(root_0);
                adaptor.SetTokenBoundaries(retval.Tree, retval.start,
retval.stop);
            }
        }
        catch (RecognitionException re)
        {
            ReportError(re);
            Recover(input,re);
        }
        finally
        {
        }
        return retval;
    }
    // $ANTLR end namespace_decl



On Tue, Oct 21, 2008 at 2:44 PM, Terence Parr <parrt at cs.usfca.edu> wrote:

>
> On Oct 21, 2008, at 12:03 PM, Dejas Ninethousand wrote:
>
>
>>
>> On Tue, Oct 21, 2008 at 1:51 PM, Terence Parr <parrt at cs.usfca.edu> wrote:
>> Can we have the generated code for:
>>
>> namespace_decl
>>    :    NAMESPACE IDENT -> NAMESPACE IDENT NAMESPACE_COMPLETE;
>>
>> ?
>>
>> I'm not sure what you mean for generated code for that production.
>>  Wouldn't that be in the parser?
>>
>
> yes, please post just that part to save us trouble :)
>
> the gen'd code should tell us what's happening.
> Ter
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20081021/dd849eba/attachment.html 

From parrt at cs.usfca.edu  Tue Oct 21 13:31:44 2008
From: parrt at cs.usfca.edu (Terence Parr)
Date: Tue, 21 Oct 2008 13:31:44 -0700
Subject: [antlr-interest] ANTLR v3.2-2008-10-21.13 available
Message-ID: <B8D34AC9-771B-4797-8431-016168FCF36E@cs.usfca.edu>

Howdy, just pushed a daily build that fixes the tree grammar usage of  
wildcards.

http://www.antlr.org/download/build/antlr-2008-10-21.13.tar.gz

Ter


From parrt at cs.usfca.edu  Tue Oct 21 13:33:51 2008
From: parrt at cs.usfca.edu (Terence Parr)
Date: Tue, 21 Oct 2008 13:33:51 -0700
Subject: [antlr-interest] Additional tokens not being passed to
	Create(IToken token) ?
In-Reply-To: <38a26f430810211331y7fd10d0erbf53f05610f2b4@mail.gmail.com>
References: <38a26f430810211118u12bf0886j177acfe8ad25f09b@mail.gmail.com>
	<B40DBF3F-780A-4FAA-9C72-DC9EF583C1A1@cs.usfca.edu>
	<38a26f430810211146vd9927b9hac95cb821b985579@mail.gmail.com>
	<CCBB73C7-08A8-4889-84B6-2FA09F50BB7F@cs.usfca.edu>
	<38a26f430810211203l70226a13sce373297618038d9@mail.gmail.com>
	<2FC40412-CB75-4078-9061-90049B0027BA@cs.usfca.edu>
	<38a26f430810211331y7fd10d0erbf53f05610f2b4@mail.gmail.com>
Message-ID: <96AF6415-7235-4E4C-934F-81C172420227@cs.usfca.edu>


On Oct 21, 2008, at 1:31 PM, Dejas Ninethousand wrote:

> I attached the whole parser file last reply, but here is the  
> namespace_decl production:

right you have to make it as easy as possible on people so they are  
willing to help. We are all lazy ;)

Anyhoo, your problem seems strange because it clearly calls

                     adaptor.AddChild(root_0,  
adaptor.Create(NAMESPACE_COMPLETE, "blort"));

create. If you set a breakpoint at it does not get there, the only  
explanation is that an exception occurs or something else that  
prevents it from going there.

Ter


From dejas9000 at gmail.com  Tue Oct 21 13:47:02 2008
From: dejas9000 at gmail.com (Dejas Ninethousand)
Date: Tue, 21 Oct 2008 15:47:02 -0500
Subject: [antlr-interest] Additional tokens not being passed to
	Create(IToken token) ?
In-Reply-To: <96AF6415-7235-4E4C-934F-81C172420227@cs.usfca.edu>
References: <38a26f430810211118u12bf0886j177acfe8ad25f09b@mail.gmail.com>
	<B40DBF3F-780A-4FAA-9C72-DC9EF583C1A1@cs.usfca.edu>
	<38a26f430810211146vd9927b9hac95cb821b985579@mail.gmail.com>
	<CCBB73C7-08A8-4889-84B6-2FA09F50BB7F@cs.usfca.edu>
	<38a26f430810211203l70226a13sce373297618038d9@mail.gmail.com>
	<2FC40412-CB75-4078-9061-90049B0027BA@cs.usfca.edu>
	<38a26f430810211331y7fd10d0erbf53f05610f2b4@mail.gmail.com>
	<96AF6415-7235-4E4C-934F-81C172420227@cs.usfca.edu>
Message-ID: <38a26f430810211347w5a5852f2yfe28f5ff06b7cb95@mail.gmail.com>

I see the problem now.  I put a breakpoint in the parser and that production
was never hit.  The reason is that in my root production namespace_decl is
preceded by non-terminal filler:

cs_file    :    filler    namespace_decl LBRACE ((comment)* class_def)*
RBRACE;


filler    :    ( options {greedy=false;} : . )*;

removing filler causes my case statement breakpoint to be hit.  I must have
misunderstood the nature of "greedy=false".  I interpreted that to mean
"consume all characters that could not constitute other non terminals".  I
saw this construct in an example grammar file for block comments:

COMMENT_BLOCK
    :   '/*' ( options {greedy=false;} : . )* '*/'

If indeed  my interpretation is wrong, then how does the (.)* regex avoid
eating the closing */ in a block comment?

-- Matt

On Tue, Oct 21, 2008 at 3:33 PM, Terence Parr <parrt at cs.usfca.edu> wrote:

>
> On Oct 21, 2008, at 1:31 PM, Dejas Ninethousand wrote:
>
>  I attached the whole parser file last reply, but here is the
>> namespace_decl production:
>>
>
> right you have to make it as easy as possible on people so they are willing
> to help. We are all lazy ;)
>
> Anyhoo, your problem seems strange because it clearly calls
>
>                    adaptor.AddChild(root_0,
> adaptor.Create(NAMESPACE_COMPLETE, "blort"));
>
> create. If you set a breakpoint at it does not get there, the only
> explanation is that an exception occurs or something else that prevents it
> from going there.
>
> Ter
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20081021/52e5f7b3/attachment.html 

From parrt at cs.usfca.edu  Tue Oct 21 14:01:17 2008
From: parrt at cs.usfca.edu (Terence Parr)
Date: Tue, 21 Oct 2008 14:01:17 -0700
Subject: [antlr-interest] Additional tokens not being passed to
	Create(IToken token) ?
In-Reply-To: <38a26f430810211347w5a5852f2yfe28f5ff06b7cb95@mail.gmail.com>
References: <38a26f430810211118u12bf0886j177acfe8ad25f09b@mail.gmail.com>
	<B40DBF3F-780A-4FAA-9C72-DC9EF583C1A1@cs.usfca.edu>
	<38a26f430810211146vd9927b9hac95cb821b985579@mail.gmail.com>
	<CCBB73C7-08A8-4889-84B6-2FA09F50BB7F@cs.usfca.edu>
	<38a26f430810211203l70226a13sce373297618038d9@mail.gmail.com>
	<2FC40412-CB75-4078-9061-90049B0027BA@cs.usfca.edu>
	<38a26f430810211331y7fd10d0erbf53f05610f2b4@mail.gmail.com>
	<96AF6415-7235-4E4C-934F-81C172420227@cs.usfca.edu>
	<38a26f430810211347w5a5852f2yfe28f5ff06b7cb95@mail.gmail.com>
Message-ID: <84113E98-BBEE-43C3-8A24-3EFCAD4D5803@cs.usfca.edu>


On Oct 21, 2008, at 1:47 PM, Dejas Ninethousand wrote:

> I see the problem now.  I put a breakpoint in the parser and that  
> production was never hit.  The reason is that in my root production  
> namespace_decl is preceded by non-terminal filler:
>
> cs_file    :    filler    namespace_decl LBRACE ((comment)*  
> class_def)* RBRACE;
>
>
> filler    :    ( options {greedy=false;} : . )*;
>
> removing filler causes my case statement breakpoint to be hit.  I  
> must have misunderstood the nature of "greedy=false".  I interpreted  
> that to mean "consume all characters that could not constitute other  
> non terminals".  I saw this construct in an example grammar file for  
> block comments:
>
> COMMENT_BLOCK
>     :   '/*' ( options {greedy=false;} : . )* '*/'
>
> If indeed  my interpretation is wrong, then how does the (.)* regex  
> avoid eating the closing */ in a block comment?

it says "consume until you see what follows".
Ter

From jaluber at gmx.de  Tue Oct 21 14:03:32 2008
From: jaluber at gmx.de (Johannes Luber)
Date: Tue, 21 Oct 2008 23:03:32 +0200
Subject: [antlr-interest] Additional tokens not being passed
 to	Create(IToken token) ?
In-Reply-To: <38a26f430810211347w5a5852f2yfe28f5ff06b7cb95@mail.gmail.com>
References: <38a26f430810211118u12bf0886j177acfe8ad25f09b@mail.gmail.com>	<B40DBF3F-780A-4FAA-9C72-DC9EF583C1A1@cs.usfca.edu>	<38a26f430810211146vd9927b9hac95cb821b985579@mail.gmail.com>	<CCBB73C7-08A8-4889-84B6-2FA09F50BB7F@cs.usfca.edu>	<38a26f430810211203l70226a13sce373297618038d9@mail.gmail.com>	<2FC40412-CB75-4078-9061-90049B0027BA@cs.usfca.edu>	<38a26f430810211331y7fd10d0erbf53f05610f2b4@mail.gmail.com>	<96AF6415-7235-4E4C-934F-81C172420227@cs.usfca.edu>
	<38a26f430810211347w5a5852f2yfe28f5ff06b7cb95@mail.gmail.com>
Message-ID: <48FE43A4.5080609@gmx.de>

Dejas Ninethousand schrieb:
> I see the problem now.  I put a breakpoint in the parser and that
> production was never hit.  The reason is that in my root production
> namespace_decl is preceded by non-terminal filler:
> 
> cs_file    :    filler    namespace_decl LBRACE ((comment)* class_def)*
> RBRACE;
> 
> 
> filler    :    ( options {greedy=false;} : . )*;
> 
> removing filler causes my case statement breakpoint to be hit.  I must
> have misunderstood the nature of "greedy=false".  I interpreted that to
> mean "consume all characters that could not constitute other non
> terminals".  I saw this construct in an example grammar file for block
> comments:
> 
> COMMENT_BLOCK
>     :   '/*' ( options {greedy=false;} : . )* '*/'
> 
> If indeed  my interpretation is wrong, then how does the (.)* regex
> avoid eating the closing */ in a block comment?

Actually, with greedy=true; - the default - the lexer would consume
everything until the last '*/'. greedy=false; says: Stop at the first
'*/'. To solve your little filler problem, you have put some kind of
literal after the *. Or just be more explicit, what constitutes a filler.

Johannes
> 
> -- Matt
> 
> On Tue, Oct 21, 2008 at 3:33 PM, Terence Parr <parrt at cs.usfca.edu
> <mailto:parrt at cs.usfca.edu>> wrote:
> 
> 
>     On Oct 21, 2008, at 1:31 PM, Dejas Ninethousand wrote:
> 
>         I attached the whole parser file last reply, but here is the
>         namespace_decl production:
> 
> 
>     right you have to make it as easy as possible on people so they are
>     willing to help. We are all lazy ;)
> 
>     Anyhoo, your problem seems strange because it clearly calls
> 
> 
>                        adaptor.AddChild(root_0,
>     adaptor.Create(NAMESPACE_COMPLETE, "blort"));
> 
>     create. If you set a breakpoint at it does not get there, the only
>     explanation is that an exception occurs or something else that
>     prevents it from going there.
> 
>     Ter
> 
> 
> 
> ------------------------------------------------------------------------
> 
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
> 


From shaohua.wen at gmail.com  Tue Oct 21 22:31:05 2008
From: shaohua.wen at gmail.com (=?UTF-8?B?5paH5bCR5Y2O?=)
Date: Wed, 22 Oct 2008 13:31:05 +0800
Subject: [antlr-interest] combined grammar filter options is invalid now?
Message-ID: <5694af40810212231td89a750v4fa66a4ec4f3348@mail.gmail.com>

Hi there,
  In antlr 3.0.1 , it works , but now it will report error for grammar
optoins like:

grammar test;

options {
  k = 3;
  filter=true;
  output = AST;
  backtrack = true;
  memoize = true;
}

Is this a bug or something changed but not in the change log?
BR.
Holy
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20081022/b1f934aa/attachment.html 

From cocoa at gmx.ch  Wed Oct 22 06:07:10 2008
From: cocoa at gmx.ch (cocoa at gmx.ch)
Date: Wed, 22 Oct 2008 15:07:10 +0200
Subject: [antlr-interest] Tree Operators vs. Tree Rewrite Rules
Message-ID: <20081022130710.240270@gmx.net>

Hi 

I try to build an AST for the following sentences:

a.b.c;

or

a.b.c.d.e;

The grammar is shown below. The expected tree (for the first example) is

^('.' ^('.' 'a' 'b') 'c')

It works as expected with tree operators:

prog
	:	expr ';'!
	;
	
expr
	:	primary ('.'^ ID )*
	;

primary
	:	ID
	;

However, I can't get the same tree using tree rewrite rules. Is it possible at all? If so, could somebody please show me how?

Thanks
Simon

PS: ultimately, I want to build an AST for a Java like language (method calls, field access, ...)
-- 
GMX Kostenlose Spiele: Einfach online spielen und Spa? haben mit Pastry Passion!
http://games.entertainment.gmx.net/de/entertainment/games/free/puzzle/6169196

From myan at csdn.net  Wed Oct 22 06:35:48 2008
From: myan at csdn.net (=?gb2312?B?w8/R0g==?=)
Date: Wed, 22 Oct 2008 21:35:48 +0800
Subject: [antlr-interest] Newbie: Is it an ANTLRWorks bug or a feature?
Message-ID: <000a01c9344b$1af2ef90$50d8ceb0$@net>

Hi all,

I am learning ANTLR and just joined this mailing list. I don?t know where
to submit bugs, is here the right place?

 

Anyway, I found something unusual in ANTLRWorks. Consider this grammar:

 

/////////////////////////////////////////

grammar G;

 

expr :        INT (('+' INT {System.out.println("matched +");})

                       |('-' INT {System.out.println("matched -");})


                       |('*' INT {System.out.println("matched *");})

                       )* NEWLINE;

INT   :        '0'..'9'+;

NEWLINE :        '\r'? '\n';

///////////////////////////////////////

 

In ANTLRWorks 1.2, put this grammar text in the main editor, switch to the
?Interpreter? tab view, input ?3+2<Enter>? or ?3*2<Enter>? and click
the triangle button, it will show the right tree diagram. Nevertheless, the
?3-2<Enter>? expression will encounter a wrong diagram. I tried several
times, and it turns out that the whatever the second sub-expression will
fail to generate correct tree diagram. 

 

Is it a bug or a feature?

 

Regards,

 

Mike Meng

October 22, 2008

 

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20081022/04329768/attachment.html 

From sharathms at gmail.com  Wed Oct 22 08:09:42 2008
From: sharathms at gmail.com (Sharath MS)
Date: Wed, 22 Oct 2008 20:39:42 +0530
Subject: [antlr-interest] Translating recurring input with python target and
	stringtemplate
Message-ID: <6e9359260810220809t7eb7db26tc87b2aaf1ccf7fb7@mail.gmail.com>

Hi,

I'm using antlr-3.1b2 with Python as my target language along with
stringtemplate. I'm trying to translate the following text:

a1,aa2,aa3,b1

to

a1 | aa2 | aa3 | b1

basically replacing the commas with pipes.

However, the output that I'm getting is something like this:

[@0,0:1=u'a1',<4>,1:0] | [@2,3:5=u'aa2',<4>,1:3] |
[@4,7:9=u'aa3',<4>,1:7] | [@6,11:12=u'b1',<4>,1:11]

Seems that the list being passed to the template contains more than
just the text. Also, I'm using the rewrite option  and a
TokenRewriteStream as i need to add to an existing grammar. Any help
in translating this text in this setup, would be greatly appreciated.
Thanks!

Here is the .g, .stg and .py files for your reference:

--------------------------------------------------

Foo.g:

grammar Foo;
options {
  language=Python;
  output=template;
  rewrite = true;
}

prog: stat+;

stat:
p+=SYM (',' p+=SYM )*
        -> printfoo(symbols={$p})
    ;

SYM
    : ('a'..'z')+ ('0'..'9')*
    ;

--------------------------------------------------

Foo.stg:

group Foo;
printfoo(symbols) ::= << <symbols; separator=" | "> >>



--------------------------------------------------

Foo.py:


import sys
import antlr3
import stringtemplate3
from FooParser import FooParser
from FooLexer import FooLexer

inputFileName = sys.argv[1]
templateFileName = sys.argv[2]

templates = stringtemplate3.StringTemplateGroup(
    file=open(templateFileName, 'r'), lexer='angle-bracket'
)

input = antlr3.ANTLRFileStream(inputFileName)
lexer = FooLexer(input)
tokens = antlr3.TokenRewriteStream(lexer)
parser = FooParser(tokens)
parser.templateLib = templates
parser.prog()
print tokens.toString()

----------------------------------------------------


Best Regards,
Sharath MS

From jimi at temporal-wave.com  Wed Oct 22 08:32:30 2008
From: jimi at temporal-wave.com (Jim Idle)
Date: Wed, 22 Oct 2008 08:32:30 -0700
Subject: [antlr-interest] combined grammar filter options is invalid now?
In-Reply-To: <5694af40810212231td89a750v4fa66a4ec4f3348@mail.gmail.com>
References: <5694af40810212231td89a750v4fa66a4ec4f3348@mail.gmail.com>
Message-ID: <1224689550.4489.200.camel@jimi>

On Wed, 2008-10-22 at 13:31 +0800, ??? wrote:

> Hi there,
>   In antlr 3.0.1 , it works , but now it will report error for grammar
> optoins like:
> 
> grammar test;
> 
> options {
>   k = 3;
>   filter=true;
>   output = AST; 
>   backtrack = true; 
>   memoize = true;
> }
> 
> Is this a bug or something changed but not in the change log?


It is a bug in your grammar I think. filter=true is a lexer grammar
option that cannot be used in a combined grammar. Also, are you sure you
want to use backtrack at a global level? Your parser will (usually) be
quite a lot slower than it would be if you factored the grammar. If
speed isn't an issue, and locality of bug reporting is also not a
problem, then don't worry about it though.


JIm

> BR.
> Holy
> 
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
> 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20081022/f7b96333/attachment.html 

From heinrich at silasvalley.com  Wed Oct 22 08:45:26 2008
From: heinrich at silasvalley.com (Heinrich du Toit)
Date: Wed, 22 Oct 2008 17:45:26 +0200
Subject: [antlr-interest] [c target] templates
Message-ID: <48FF4A96.2070904@silasvalley.com>

Hi

It seems that if you have template in the .g file the C target doesn't work.

Is it possibly to still hack into the token stream somehow and add a few 
additional "tokens"..
and hopefully write the file out again in modified form?

I think it should be, would appreciate it if somebody just tell me where 
to look.

Another question...
Are the tokens in the token stream and in the tree the same tokens?

Thanks
Heinrich

From jimi at temporal-wave.com  Wed Oct 22 09:43:15 2008
From: jimi at temporal-wave.com (Jim Idle)
Date: Wed, 22 Oct 2008 09:43:15 -0700
Subject: [antlr-interest] Translating recurring input with python target
 and stringtemplate
In-Reply-To: <6e9359260810220809t7eb7db26tc87b2aaf1ccf7fb7@mail.gmail.com>
References: <6e9359260810220809t7eb7db26tc87b2aaf1ccf7fb7@mail.gmail.com>
Message-ID: <1224693795.4489.205.camel@jimi>

On Wed, 2008-10-22 at 20:39 +0530, Sharath MS wrote:

> Hi,
> 
> I'm using antlr-3.1b2 with Python as my target language along with
> stringtemplate. I'm trying to translate the following text:
> 
> a1,aa2,aa3,b1
> 
> to
> 
> a1 | aa2 | aa3 | b1
> 
> basically replacing the commas with pipes.
> 
> However, the output that I'm getting is something like this:
> 
> [@0,0:1=u'a1',<4>,1:0] | [@2,3:5=u'aa2',<4>,1:3] |
> [@4,7:9=u'aa3',<4>,1:7] | [@6,11:12=u'b1',<4>,1:11]



THis looks like a text serialization of the entire token..

> 
> Seems that the list being passed to the template contains more than
> just the text. Also, I'm using the rewrite option  and a
> TokenRewriteStream as i need to add to an existing grammar. Any help
> in translating this text in this setup, would be greatly appreciated.
> Thanks!
> 
> Here is the .g, .stg and .py files for your reference:
> 
> --------------------------------------------------
> 
> Foo.g:
> 
> grammar Foo;
> options {
>   language=Python;
>   output=template;
>   rewrite = true;
> }
> 
> prog: stat+;
> 
> stat:
> p+=SYM (',' p+=SYM )*
>         -> printfoo(symbols={$p})


Try $p.text


Jim
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20081022/1b5f8e3c/attachment.html 

From jimi at temporal-wave.com  Wed Oct 22 09:56:41 2008
From: jimi at temporal-wave.com (Jim Idle)
Date: Wed, 22 Oct 2008 09:56:41 -0700
Subject: [antlr-interest] [c target] templates
In-Reply-To: <48FF4A96.2070904@silasvalley.com>
References: <48FF4A96.2070904@silasvalley.com>
Message-ID: <1224694601.4489.217.camel@jimi>

On Wed, 2008-10-22 at 17:45 +0200, Heinrich du Toit wrote:

> Hi
> 
> It seems that if you have template in the .g file the C target doesn't work.


Templates are only supported by object oriented languages; at least for
the moment.

> 
> Is it possibly to still hack into the token stream somehow and add a few 
> additional "tokens"..
> and hopefully write the file out again in modified form?

StringTemplate is a convenience and design feature, it isn't needed for
any kind of functionality. It is just often a neater way to separate
your parsing code and output.

> 
> I think it should be, would appreciate it if somebody just tell me where 
> to look.

Perhaps it would be easier if you gave an example of what you want to
do. The text is available to your code, so you can do anything. Have a
look through the C examples for the basics and the C API for the rest.

> 
> Another question...
> Are the tokens in the token stream and in the tree the same tokens?


The tokens are the same, but they are carried around as payloads in tree
nodes. 

Jim

> 
> Thanks
> Heinrich
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
> 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20081022/4648fadc/attachment.html 

From sharathms at gmail.com  Wed Oct 22 10:37:31 2008
From: sharathms at gmail.com (Sharath)
Date: Wed, 22 Oct 2008 23:07:31 +0530
Subject: [antlr-interest] Translating recurring input with python target
 and stringtemplate
In-Reply-To: <1224693795.4489.205.camel@jimi>
References: <6e9359260810220809t7eb7db26tc87b2aaf1ccf7fb7@mail.gmail.com>
	<1224693795.4489.205.camel@jimi>
Message-ID: <48FF64DB.4050009@gmail.com>

Jim Idle wrote:
> On Wed, 2008-10-22 at 20:39 +0530, Sharath MS wrote:
>> Hi,
>>
>> I'm using antlr-3.1b2 with Python as my target language along with
>> stringtemplate. I'm trying to translate the following text:
>>
>> a1,aa2,aa3,b1
>>
>> to
>>
>> a1 | aa2 | aa3 | b1
>>
>> basically replacing the commas with pipes.
>>
>> However, the output that I'm getting is something like this:
>>
>> [@0,0:1=u'a1',<4>,1:0] | [@2,3:5=u'aa2',<4>,1:3] |
>> [@4,7:9=u'aa3',<4>,1:7] | [@6,11:12=u'b1',<4>,1:11]
>>     
>
>
> THis looks like a text serialization of the entire token..
>> Seems that the list being passed to the template contains more than
>> just the text. Also, I'm using the rewrite option  and a
>> TokenRewriteStream as i need to add to an existing grammar. Any help
>> in translating this text in this setup, would be greatly appreciated.
>> Thanks!
>>
>> Here is the .g, .stg and .py files for your reference:
>>
>> --------------------------------------------------
>>
>> Foo.g:
>>
>> grammar Foo;
>> options {
>>   language=Python;
>>   output=template;
>>   rewrite = true;
>> }
>>
>> prog: stat+;
>>
>> stat:
>> p+=SYM (',' p+=SYM )*
>>         -> printfoo(symbols={$p})
>>     
>
> Try $p.text
>
>
> Jim 
Hi Jim,

I tried $p.text and on running the python script, this was the result:
AttributeError: 'list' object has no attribute 'text'.

I also tried modifying the grammar such that a csv string is passed to
the template instead of a list, but as expected, the separator treats
the text as one whole item and does not replace the commas with pipes.

Thanks for your time!

Sharath

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 189 bytes
Desc: OpenPGP digital signature
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20081022/71993514/attachment.bin 

From jimi at temporal-wave.com  Wed Oct 22 11:11:14 2008
From: jimi at temporal-wave.com (Jim Idle)
Date: Wed, 22 Oct 2008 11:11:14 -0700
Subject: [antlr-interest] Translating recurring input with python target
 and stringtemplate
In-Reply-To: <48FF64DB.4050009@gmail.com>
References: <6e9359260810220809t7eb7db26tc87b2aaf1ccf7fb7@mail.gmail.com>
	<1224693795.4489.205.camel@jimi>  <48FF64DB.4050009@gmail.com>
Message-ID: <1224699074.4489.220.camel@jimi>

On Wed, 2008-10-22 at 23:07 +0530, Sharath wrote:

> Jim Idle wrote:
> > On Wed, 2008-10-22 at 20:39 +0530, Sharath MS wrote:
> >> Hi,



> >> prog: stat+;
> >>
> >> stat:
> >> p+=SYM (',' p+=SYM )*
> >>         -> printfoo(symbols={$p})
> >>     
> >
> > Try $p.text
> >
> >
> > Jim 
> Hi Jim,
> 
> I tried $p.text and on running the python script, this was the result:
> AttributeError: 'list' object has no attribute 'text'.


Doh - I answered too quickly. You are passing a List to the string
template, so in the string template you need to iterate the collection
and get the text attribute of each member, using the separator you want.

Jim
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20081022/6d1f8134/attachment.html 

From parrt at cs.usfca.edu  Wed Oct 22 14:01:10 2008
From: parrt at cs.usfca.edu (Terence Parr)
Date: Wed, 22 Oct 2008 14:01:10 -0700
Subject: [antlr-interest] add new support methods in BaseTree?
Message-ID: <3875E1AB-66B7-4F49-9152-5F0DC7BB33C8@cs.usfca.edu>

Hi, i'm thinking of adding this to BaseTree:

     /** Walk upwards looking for ancestor of this token type */
     public boolean hasAncestor(int ttype) {
         CommonTree t = this;
         t = t.parent;
         while ( t!=null ) {
             if ( t.getType()==ttype ) return true;
             t = t.parent;
         }
         return false;
     }

and perhaps a few more context computations.    In a tree grammar, you  
might want to do this:

{((VecMathNode)input.LT(1)).hasAncestor(PRINT)}? ID // match only IDs  
in expr of print statements

Any objections or votes in support?

Ter

From gerald at certiv.net  Wed Oct 22 14:10:51 2008
From: gerald at certiv.net (Gerald Rosenberg)
Date: Wed, 22 Oct 2008 14:10:51 -0700
Subject: [antlr-interest] add new support methods in BaseTree?
In-Reply-To: <3875E1AB-66B7-4F49-9152-5F0DC7BB33C8@cs.usfca.edu>
References: <3875E1AB-66B7-4F49-9152-5F0DC7BB33C8@cs.usfca.edu>
Message-ID: <200810222112.m9MLCBXD027036@zinc.newtechlaw.com>

At 02:01 PM 10/22/2008, Terence Parr wrote:
>Hi, i'm thinking of adding this to BaseTree:
>
>      /** Walk upwards looking for ancestor of this token type */
>      public boolean hasAncestor(int ttype) {
>          CommonTree t = this;
>          t = t.parent;
>          while ( t!=null ) {
>              if ( t.getType()==ttype ) return true;
>              t = t.parent;
>          }
>          return false;
>      }
>
>and perhaps a few more context computations.    In a tree grammar, you
>might want to do this:
>
>{((VecMathNode)input.LT(1)).hasAncestor(PRINT)}? ID // match only IDs
>in expr of print statements
>
>Any objections or votes in support?

Yes, this would be quite helpful.  What other functions are you considering?

Gerald 


From braincode at gmail.com  Wed Oct 22 15:27:02 2008
From: braincode at gmail.com (brainstorm)
Date: Thu, 23 Oct 2008 00:27:02 +0200
Subject: [antlr-interest] IDENTifier rule not working for some tokens
In-Reply-To: <1224605087.4489.63.camel@jimi>
References: <32137c140810210228t1fdd99f0gf0ebf32fd1c7e672@mail.gmail.com>
	<1224605087.4489.63.camel@jimi>
Message-ID: <32137c140810221527i11facd3aq2b6377596d640e61@mail.gmail.com>

Thanks a lot for your suggestions ! :) I'm starting a new svn branch
with your advices, but I have some questions... (replying/asking
between lines).

On Tue, Oct 21, 2008 at 6:04 PM, Jim Idle <jimi at temporal-wave.com> wrote:
> On Tue, 2008-10-21 at 11:28 +0200, brainstorm wrote:
>
> grammar CL;
>
> options
> {
>         output = AST;
> //      backtrack = true;
>
> Don't use this unless there is no other readable way.


What do you mean by that ? By the way, looks like it's the preferred
way for ANTLR if output is not defined:

warning(149): CL.g:0:0: rewrite syntax or operator with no output
option; setting output=AST



>
> If you are using ANTLRWorks, are you using the interpreter or the debugger -
> use the debugger pretty much always - the interpreter is handy for a quick
> verification of a sub rule and so on.
>


Yes, I do use ANTLRWorks with the jp{2,4} files I attached on my
previous email :)


>
> Especially when you are new to ANTLR 3 it is better not to use literals in
> the grammar but to define tokens in the lexer. The ambiguities between lexer
> tokens are obfuscated when using grammar level literals and typos change
> things that are difficult to discover.
>


I really see your point (and I'm applying it in my grammar), but have
a look at public grammars on:

http://www.antlr.org/grammar/list

Take the first, Java 1.5, for instance:

http://www.antlr.org/grammar/1152141644268/Java.g

They use literals directly on the grammar avoiding to declare them
first on tokens {}. I think it's better to:

1) Let the tool (ANTLR) do the job for you (grammar.tokens).
2) Do not replicate code (tokens declarations vs simple literal
definition on the grammar itself).


In fact, I hit a problem when defining those tokens:

tokens {
(... other tokens defined...)
INT = 'INT';
}

If I just declare "INT" (only LHS), ANTLR complains:

warning(105): CL.g:120:14: no lexer rule corresponding to token: INT

I have to keep writing redundant statements like: INT = 'INT'; why is that ?


>
> program:        'PROGRAM'^ l_dec_vars l_dec_blocs l_instrs 'ENDPROGRAM'!;
>
> l_dec_vars:     ('VARS'! (dec_var)* 'ENDVARS'!|);
>
> dec_var:        IDENT^ constr_type;
>
> l_dec_blocs:    (dec_bloc)*;
>
> dec_bloc:       'PROCEDURE'^ header_proc l_dec_vars l_dec_blocs l_instrs
> 'ENDPROCEDURE'!
>
> This is where literals start to get confusing 'PROCEDURE'^ vs PROCEDURE and
> a lexer definition.


I don't see what's confusing here, there's no PROCEDURE, only
'PROCEDURE', no imaginary tokens, just the token itself in the right
place, isn't it ?


>
> constr_type:    ('INT' | 'Int' | 'int')  |  ('BOOL'|'bool')
>
> And this is probably where your bb goes wrong. I would bet that the lexer is
> starting to match 'bool' and gives up. Also, your case insensitivity is
> inconsistent with Int and Bool. These really need to be ( ('I'|'i')('N'|'n')
> and so on.


Ahhh, ok, now I see why it's that way on the "nocase" wiki page... thanks ! :)


> expsimple:      IDENT^ (func_call|) ('['^ expression ']'!)* ('.'^ IDENT
> ('['^ expression ']'!|))*       //XXX: match bb as identifier
>
> You probably are not getting here for input 'bb'.
>
>
> IDENT   :       'a'..'z' ('a'..'z'|'A'..'Z'|'0'..'9')* ;
> INTCONST:       ('0'..'9')+ ;
>
> WS      :       (' '|'\r'|'\t'|'\u000C'|'\n') {$channel=HIDDEN;};
> COMMA   :       ',';
> STRING  :       '~[]*'; // XXX
>
> Not sure what STRING is meant to match, but you know it matches the literal
> string ~[]* right?


Ok, that was just the simple definition on my C++ based, I'll try to
adjust to the new syntax...


> So:
>
> 1) Use the case insensitive match routine and specify our lexer tokens in
> UPPERCASE;


OK, done :)


> 2) Take the literals out and make real lexer tokens;


I wish to see a way cleaner (non-redundant) way to do that if it's
possible. Thanks again for your attention and patience ! :)


> Then you will at least be able to see what is going wrong (but my felling is
> that it won't go wrong when you do that unless your STRING rule is really
> ~('['| ']')* ? If you are just trying to pick up any characters that are not
> matched by anything else, just use:
>
> unknown : ANY+;
> ANY : . ;
>
> Jim
>
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>
>
>

From parrt at cs.usfca.edu  Wed Oct 22 15:46:57 2008
From: parrt at cs.usfca.edu (Terence Parr)
Date: Wed, 22 Oct 2008 15:46:57 -0700
Subject: [antlr-interest] add new support methods in BaseTree?
In-Reply-To: <200810222112.m9MLCBXD027036@zinc.newtechlaw.com>
References: <3875E1AB-66B7-4F49-9152-5F0DC7BB33C8@cs.usfca.edu>
	<200810222112.m9MLCBXD027036@zinc.newtechlaw.com>
Message-ID: <43EE69B8-B5BA-4115-BDE8-A1EC09717BF1@cs.usfca.edu>


On Oct 22, 2008, at 2:10 PM, Gerald Rosenberg wrote:
> Yes, this would be quite helpful.  What other functions are you  
> considering?

I'm wide open to suggestions.

I'm thinking we need a general:

public boolean inContext(String ctx);

where we could use contexts of "CLASS ... METHOD" that says I'm  
directly below a METHOD which is a descendent of a CLASS somewhere  
above. "..." would really be a sort of .* reg ex.  Perhaps an xpath  
[shudder] like thing too where "/CLASS ..." means root must be CLASS...

Also hasAncestor() should have getAncestor() variant too I guess.

Perhaps getAncestors()?  Would return a list of nodes on path to root.

Ter

From parrt at cs.usfca.edu  Wed Oct 22 16:09:41 2008
From: parrt at cs.usfca.edu (Terence Parr)
Date: Wed, 22 Oct 2008 16:09:41 -0700
Subject: [antlr-interest] add new support methods in BaseTree?
In-Reply-To: <43EE69B8-B5BA-4115-BDE8-A1EC09717BF1@cs.usfca.edu>
References: <3875E1AB-66B7-4F49-9152-5F0DC7BB33C8@cs.usfca.edu>
	<200810222112.m9MLCBXD027036@zinc.newtechlaw.com>
	<43EE69B8-B5BA-4115-BDE8-A1EC09717BF1@cs.usfca.edu>
Message-ID: <9A879B3D-067B-4807-8C80-685DFF427E10@cs.usfca.edu>


On Oct 22, 2008, at 3:46 PM, Terence Parr wrote:

>
> On Oct 22, 2008, at 2:10 PM, Gerald Rosenberg wrote:
>> Yes, this would be quite helpful.  What other functions are you
>> considering?
>
> I'm wide open to suggestions.
>
> I'm thinking we need a general:
>
> public boolean inContext(String ctx);
>
> where we could use contexts of "CLASS ... METHOD" that says I'm
> directly below a METHOD which is a descendent of a CLASS somewhere
> above. "..." would really be a sort of .* reg ex.  Perhaps an xpath
> [shudder] like thing too where "/CLASS ..." means root must be  
> CLASS...
>
> Also hasAncestor() should have getAncestor() variant too I guess.
>
> Perhaps getAncestors()?  Would return a list of nodes on path to root.

ok, all of that is done and easy. except the context one.  CLASS and  
METHOD etc... are token names, which are meaningless to a general tree  
routine...we need something to convert CLASS and METHOD strings to  
token types...perhaps we put in BaseRecognizer and then leverage  
getTokenNames.  It returns an array like this:

     public static final String[] tokenNames = new String[] {
         "<invalid>", "<EOR>", "<DOWN>", "<UP>", "UNIT", "SLIST",  
"ELIST", "CLOSURE", "LIST", "SET", "ARGS", "ARG", "FILTER", "DICT",  
"TUPLE", "COMPREHENSION", "APPLY", "EXPR", "PIPE", "RANGE", "PROGRAM",  
"METHOD", "FIELD", "CALL", "INDEX",
...};

as we walk up tree, we compare tokenNames[ttype] to CLASS and  
METHOD...cool!

ok, in BaseRecog it goes.  Actually...in TreeParser.  only place it's  
useful.

Hmm...i knew this was familiar.  TreeWizard has:

	/** Compute a Map<String, Integer> that is an inverted index of
	 *  tokenNames (which maps int token types to names).
	 */
	public Map computeTokenTypes(String[] tokenNames) {...}

	/** Using the map of token names to token types, return the type. */
	public int getTokenType(String tokenName) {...}

Maybe it belongs in there?

Ter

From parrt at cs.usfca.edu  Wed Oct 22 17:17:48 2008
From: parrt at cs.usfca.edu (Terence Parr)
Date: Wed, 22 Oct 2008 17:17:48 -0700
Subject: [antlr-interest] add new support methods in BaseTree?
In-Reply-To: <200810222112.m9MLCBXD027036@zinc.newtechlaw.com>
References: <3875E1AB-66B7-4F49-9152-5F0DC7BB33C8@cs.usfca.edu>
	<200810222112.m9MLCBXD027036@zinc.newtechlaw.com>
Message-ID: <7787F5A6-96A2-4A48-9603-62D46DB59721@cs.usfca.edu>

Ok, to TreeParser, I have added the methods below...want to try it  
out?  I tried this:

CREATE TREE FROM SOME INPUT

         String input =
             "x = 3+4\n" +
             "print x * [2, 3, 4]";

         VecMathLexer lex = new VecMathLexer(new  
ANTLRStringStream(input));
         CommonTokenStream tokens = new CommonTokenStream(lex);
         VecMathParser g = new VecMathParser(tokens);
         g.setTreeAdaptor(myadaptor);
	    VecMathParser.prog_return result = g.prog();
	    CommonTree tree = (CommonTree)result.tree;
         System.out.println(tree.toStringTree());

PRINTS

(= x (+ 3 4)) (print (* x (VEC 2 3 4)))

USE TREEWIZARD TO GRAB THE 3 NODE DOWN DEEP

         TreeAdaptor adaptor = new CommonTreeAdaptor();
         String[] tokenNames = g.getTokenNames();
         TreeWizard wiz = new TreeWizard(adaptor, tokenNames);
         Map labels = new HashMap();
         boolean valid = wiz.parse(tree.getChild(1), "(PRINT (MULT ID  
(VEC INT %x:INT INT)))", labels);
         System.out.println("labels: "+labels);

PRINTS

labels: {x=3}

CREATE DUMMY WALKER SO WE CAN USE inContext METHOD

         CommonTreeNodeStream nodes = new CommonTreeNodeStream(tree);
         MyWalker p = new MyWalker(nodes);
         boolean ctx = p.inContext(labels.get("x"), "PRINT ...  
VEC ...");
         System.out.println("inContext: "+ctx);

PRINTS

inContext: true

So, in a grammar, you can say:

	{inContext("METHOD ... VARDECL")}? ID

which means "only match an ID if it's parent is VARDECL and there is a  
METHOD ancestor".  Cool, eh?

Ter

-------------------

     /** "METHOD ... VARDEF" "CLASS VARDEF"  */
     public boolean inContext(String context) {
         return inContext(input.LT(1), context);
     }

     public boolean inContext(Object t, String context) {
         String[] tokenNames = getTokenNames();
         String[] nodes = context.split("\\s");
         int ni = nodes.length-1;
         TreeAdaptor adaptor = input.getTreeAdaptor();
         t = adaptor.getParent(t);
         while ( ni>=0 && t!=null ) {
             if ( nodes[ni].equals("...") ) {
                 // walk upwards until we see nodes[ni-1] then  
continue walking
                 if ( ni==0 ) return true; // ... at start is no-op
                 String goal = nodes[ni-1];
                 Object ancestor = getAncestor(t, goal);
                 if ( ancestor==null ) return false;
                 t = ancestor;
                 ni--;
             }
             String name = tokenNames[adaptor.getType(t)];
             if ( !name.equals(nodes[ni]) ) {
                 //System.err.println("not matched: "+nodes[ni]+" at  
"+t);
                 return false;
             }
             // advance to parent and to previous element in context  
node list
             ni--;
             t = adaptor.getParent(t);
         }

         return true;
     }

     public Object getAncestor(Object t, String goal) {
         String[] tokenNames = getTokenNames();
         TreeAdaptor adaptor = input.getTreeAdaptor();
         while ( t!=null ) {
             String name = tokenNames[adaptor.getType(t)];
             if ( name.equals(goal) ) return t;
             // advance to parent and to previous element in context  
node list
             t = adaptor.getParent(t);
         }
         return null;
     }



From parrt at cs.usfca.edu  Wed Oct 22 18:22:36 2008
From: parrt at cs.usfca.edu (Terence Parr)
Date: Wed, 22 Oct 2008 18:22:36 -0700
Subject: [antlr-interest] added new tree functions
Message-ID: <FE41C3F9-0AB4-4FE3-8BD3-55AB8004124A@cs.usfca.edu>

Added cool new methods per earlier discussion

http://www.antlr.org/download/build/antlr-2008-10-22.18.tar.gz

CHANGES

October 22, 2008

* Added inContext() to TreeParser.  Very useful for predicating
   tree grammar productions according to context (their parent list).
   Added new TestTreeContext unit tests (15).

     /** Check if current node in input has a context.  Context means  
sequence
      *  of nodes towards root of tree.  For example, you might say  
context
      *  is "MULT" which means my parent must be MULT.  "CLASS VARDEF"  
says
      *  current node must be child of a VARDEF and whose parent is a  
CLASS node.
      *  You can use "..." to mean zero-or-more nodes.  "METHOD ...  
VARDEF"
      *  means my parent is VARDEF and somewhere above that is a  
METHOD node.
      *  The first node in the context is not necessarily the root.   
The context
      *  matcher stops matching and returns true when it runs out of  
context.
      *  There is no way to force the first node to be the root.
      */
     public boolean inContext(String context) {...}

* Added 3 methods to Tree interface [BREAKS BACKWARD COMPATIBILITY]

     /** Is there is a node above with token type ttype? */
     public boolean hasAncestor(int ttype);

     /** Walk upwards and get first ancestor with this token type. */
     public Tree getAncestor(int ttype);

     /** Return a list of all ancestors of this node.  The first node of
      *  list is the root and the last is the parent of this node.
      */
     public List getAncestors();


From Fromm at dresden-informatik.de  Wed Oct 22 22:43:43 2008
From: Fromm at dresden-informatik.de (Fromm, Stefan)
Date: Thu, 23 Oct 2008 07:43:43 +0200
Subject: [antlr-interest] Quoted Strings in ANTLR 3.0.1 and 3.1.1
Message-ID: <2E109F4DFC3D73448EBFE1BC31CF552D977893@di-server.di-netz.de>

Hello,
 
I have written a grammar for a subset of SQL which has to accept quoted
SQL strings. With ANTLR 3.0.1 the grammar is working. When porting to
ANTLR 3.1.1 the grammar is not working anymore. I have extracted a
simple test grammar:


grammar QuotedStringTest;

QUOTED_STRING
	:	'\'' ( '\'\'' | ~('\'') )* '\'';
	
NUMBER
  :	 ('+' | '-')? '0'..'9'+ ('.' '0'..'9'+)?;

value_expr
  :	 QUOTED_STRING | NUMBER;



With ANTLR 3.0.1 these test cases work fine. In 3.1.1 I received these
results:

''''          matched
''''''        matched
'''a'         matched
'''a'''       matched
'''a''b'      matched
'''a''b'''    matched


'a'''         not matched, expected to match
'a''b'        matched, but with 'a''
'a''b''c'     matched, but with 'a''

However the following test case works neither in 3.0.1 nor in 3.1.1:

''a''         matched, expected not to match



Does my grammar have errors or has ANTLR changed lexing/parsing strategy
since 3.0.1? Is there any hint about the last test case?

Best regards
Stefan

From antlr at mirality.co.nz  Thu Oct 23 00:16:00 2008
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Thu, 23 Oct 2008 20:16:00 +1300
Subject: [antlr-interest] Additional tokens not being passed to
 Create(IToken token) ?
In-Reply-To: <38a26f430810211347w5a5852f2yfe28f5ff06b7cb95@mail.gmail.co
 m>
References: <38a26f430810211118u12bf0886j177acfe8ad25f09b@mail.gmail.com>
	<B40DBF3F-780A-4FAA-9C72-DC9EF583C1A1@cs.usfca.edu>
	<38a26f430810211146vd9927b9hac95cb821b985579@mail.gmail.com>
	<CCBB73C7-08A8-4889-84B6-2FA09F50BB7F@cs.usfca.edu>
	<38a26f430810211203l70226a13sce373297618038d9@mail.gmail.com>
	<2FC40412-CB75-4078-9061-90049B0027BA@cs.usfca.edu>
	<38a26f430810211331y7fd10d0erbf53f05610f2b4@mail.gmail.com>
	<96AF6415-7235-4E4C-934F-81C172420227@cs.usfca.edu>
	<38a26f430810211347w5a5852f2yfe28f5ff06b7cb95@mail.gmail.com>
Message-ID: <20081023071612.12BD011EDD0@www.antlr.org>

At 09:47 22/10/2008, Dejas Ninethousand wrote:
>I see the problem now.  I put a breakpoint in the parser and that 
>production was never hit.  The reason is that in my root 
>production namespace_decl is preceded by non-terminal filler:
>
>cs_file    :    filler    namespace_decl LBRACE ((comment)* 
>class_def)* RBRACE;
>
>
>filler    :    ( options {greedy=false;} : . )*;
>
>removing filler causes my case statement breakpoint to be hit.  I 
>must have misunderstood the nature of "greedy=false".  I 
>interpreted that to mean "consume all characters that could not 
>constitute other non terminals".

That's a parser rule, so replace "characters" in your sentence 
with "tokens".  Parser rules don't get to have anything to do with 
characters.

Additionally, "greedy=false" cannot see outside the rule it is 
mentioned in (which makes sense if you think about it, because it 
might be called from multiple rules), so in the snippet above it 
will have no choice but to consume every single token remaining in 
the input stream.

(It does have another option if you enable backtracking, but even 
there I'm not convinced it'd work the way you want it to, and it'd 
definitely have worse performance than doing it properly.)

If you really want to skip everything before the namespace_decl, 
then first of all you could try inlining it (replacing the 
reference to the filler rule with the contents of the filler 
rule).  If that doesn't work, you could try being more specific, 
eg. (~NAMESPACE)*.


Also: you realise that C# files can contain zero or more namespace 
blocks, each of which can contain zero or more class definitions 
(and other things), right?


From antlr at mirality.co.nz  Thu Oct 23 00:32:03 2008
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Thu, 23 Oct 2008 20:32:03 +1300
Subject: [antlr-interest] IDENTifier rule not working for some  tokens
In-Reply-To: <32137c140810221527i11facd3aq2b6377596d640e61@mail.gmail.co
 m>
References: <32137c140810210228t1fdd99f0gf0ebf32fd1c7e672@mail.gmail.com>
	<1224605087.4489.63.camel@jimi>
	<32137c140810221527i11facd3aq2b6377596d640e61@mail.gmail.com>
Message-ID: <20081023073216.DB4C211EE49@www.antlr.org>

At 11:27 23/10/2008, brainstorm wrote:
 >> options
 >> {
 >>         output = AST;
 >> //      backtrack = true;
 >>
 >> Don't use this unless there is no other readable way.
 >
 >What do you mean by that ? By the way, looks like it's the
 >preferred way for ANTLR if output is not defined:

I think he was referring to the backtrack option.  While it can 
sometimes be useful, it can significantly slow performance of the 
parser, so it's better to avoid it if possible.

 >In fact, I hit a problem when defining those tokens:
 >
 >tokens {
 >(... other tokens defined...)
 >INT = 'INT';
 >}
 >
 >If I just declare "INT" (only LHS), ANTLR complains:
 >
 >warning(105): CL.g:120:14: no lexer rule corresponding to token: 

 >INT
 >
 >I have to keep writing redundant statements like: INT = 'INT'; 
why
 >is that ?

Using INT by itself defines what's called an "imaginary token" -- 
one that cannot match any input by itself, but can be emitted from 
either the lexer or parser via explicit code.

Using INT='INT' defines a real token that matches that literal 
text in the input -- it's exactly identical to defining the 
following rule at the top of your grammar:

INT: 'INT';

So it's not redundant nor a duplication -- one is defining the 
name of the token while the other is defining the text that it 
matches.


If you did want to create an imaginary token for use in the lexer, 
there is however one somewhat annoying quirk where it also 
generates the warning you mentioned above.  You can either choose 
to ignore this warning (which is why it's a warning, not an 
error), or remove it from the tokens section and declare it as a 
rule like this instead:

fragment INT: '0';

The important points here are that it should be a fragment rule 
(since you don't want ANTLR to try to generate it itself, you just 
want to create a token id that you can refer to from other rules), 
and unless you're actually using it within the matching side of 
another lexer rule then its actual contents don't really matter 
(but they can't be empty or you'll get another warning).


From antlr at mirality.co.nz  Thu Oct 23 01:05:41 2008
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Thu, 23 Oct 2008 21:05:41 +1300
Subject: [antlr-interest] Quoted Strings in ANTLR 3.0.1 and 3.1.1
In-Reply-To: <2E109F4DFC3D73448EBFE1BC31CF552D977893@di-server.di-netz.d
 e>
References: <2E109F4DFC3D73448EBFE1BC31CF552D977893@di-server.di-netz.de>
Message-ID: <20081023080550.743E511EEC2@www.antlr.org>

At 18:43 23/10/2008, Fromm, Stefan wrote:
 >QUOTED_STRING
 >	:	'\'' ( '\'\'' | ~('\'') )* '\'';

This could be a little tricky, since your single termination 
character is also permitted within the content, and ANTLR 
sometimes only uses single-character lookahead.  It might be a 
good idea to force explicit lookahead:

QUOTED_STRING
   : '\''
     ( ('\'\'') => '\'\''
     | ~'\''
     )*
     '\''
   ;

 >value_expr
 >  :	QUOTED_STRING | NUMBER;

Note that this by itself will only match one quoted string or 
number.  If you want to match more than one you'll need to wrap it 
in a * or + block (or call it from another rule that does so).

Also, your top-level rule should end with EOF if you want parsing 
to fail if it cannot match the complete input.


From heinrich at silasvalley.com  Thu Oct 23 01:16:34 2008
From: heinrich at silasvalley.com (Heinrich du Toit)
Date: Thu, 23 Oct 2008 10:16:34 +0200
Subject: [antlr-interest] Newbie: Is it an ANTLRWorks bug or a feature?
In-Reply-To: <000a01c9344b$1af2ef90$50d8ceb0$@net>
References: <000a01c9344b$1af2ef90$50d8ceb0$@net>
Message-ID: <490032E2.6060700@silasvalley.com>


expr : INT (('+'|'-'|'*') INT )*

NEWLINE?;


I'm not sure why your version doesn't work.
Maybe it is a bug with how the interpreter in antlrworks work?


?? wrote:
>
> Hi all,
>
> I am learning ANTLR and just joined this mailing list. I don?t know
> where to submit bugs, is here the right place?
>
> Anyway, I found something unusual in ANTLRWorks. Consider this grammar:
>
> /////////////////////////////////////////
>
> grammar G;
>
> expr : INT (('+' INT {System.out.println("matched +");})
>
> |('-' INT {System.out.println("matched -");})
>
> |('*' INT {System.out.println("matched *");})
>
> )* NEWLINE;
>
> INT : '0'..'9'+;
>
> NEWLINE : '\r'? '\n';
>
> ///////////////////////////////////////
>
> In ANTLRWorks 1.2, put this grammar text in the main editor, switch to
> the ?Interpreter? tab view, input ?3+2<Enter>? or ?3*2<Enter>? and
> click the triangle button, it will show the right tree diagram.
> Nevertheless, the ?3-2<Enter>? expression will encounter a wrong
> diagram. I tried several times, and it turns out that the whatever the
> second sub-expression will fail to generate correct tree diagram.
>
> Is it a bug or a feature?
>
> Regards,
>
> Mike Meng
>
> October 22, 2008
>
> ------------------------------------------------------------------------
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>
>   


From lars.vonwedel at bayertechnology.com  Thu Oct 23 03:18:26 2008
From: lars.vonwedel at bayertechnology.com (lars.vonwedel at bayertechnology.com)
Date: Thu, 23 Oct 2008 12:18:26 +0200
Subject: [antlr-interest] Interactive interpreter and line continuation
	characters
Message-ID: <OF0F2BE182.6944640D-ONC12574EB.003552BA-C12574EB.00389F13@bayer.de>

Hello,

I am trying to build an interactive interpreter shell for an application. 
A simple approach is obviously to read a line from the command line and 
send it to the lexer/parser.  However, the input language permits line 
continuation by special characters. If a line ends with a ';' or ',' it is 
supposed to be continued on the next line. 

To make things worse, some valid statements can end with multiple ',' 
characters. In this case, a special statement termination character '!' is 
used(and can be followed by arbitrary input to be disregarded).

My current line of thinking is to send a line entered by the user to the 
lexer, let it skip anything beyond '!' and then look at the last token. If 
that is a ';' or ',' then obtain another line and concatenate the token 
streams before actually running the parser.

Are there any better ideas how to deal with this ?

Freundliche Gr??e / Best Regards
Lars von Wedel
_________________________________________

Bayer Technology Services GmbH
E-mail: lars.vonwedel at bayertechnology.com
Web: www.bayertechnology.com

Gesch?ftsf?hrer: Achim Noack
Aufsichtsratsvorsitzender: Dr. Wolfgang Plischke
Sitz der Gesellschaft: Leverkusen   |   Eintragung: Amtsgericht K?ln, HRB 
49896
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20081023/7d87ed4b/attachment.html 

From sharwell at pixelminegames.com  Thu Oct 23 09:26:03 2008
From: sharwell at pixelminegames.com (Sam Harwell)
Date: Thu, 23 Oct 2008 11:26:03 -0500
Subject: [antlr-interest] Interactive interpreter and line
	continuationcharacters
In-Reply-To: <OF0F2BE182.6944640D-ONC12574EB.003552BA-C12574EB.00389F13@bayer.de>
References: <OF0F2BE182.6944640D-ONC12574EB.003552BA-C12574EB.00389F13@bayer.de>
Message-ID: <86403CA0939415448BCCB83855EFE09A64E6A1@Bloodymary.ironwillgames.com>

Keep a flag (bool) in the lexer that sets whether or not the input it was fed (could be multiple lines) represents a complete statement. Make sure that the lexer can lex a single line without bombing - you should have a rule similar to the one below. After enter is pressed, lex the input from the start of the current statement (not line) through the end of the last line of the statement entered. Then check the lexer's statement completed flag; if true send the input to the parser, otherwise discard those results and wait for another line of text to be entered. Since an interactive shell's individual lexer inputs are short, there will be little overhead for repeatedly lexing the lines of a multi-line input.

 

// Very last rule of the lexer to stop troublesome NoViableAltException

ANYCHAR

        :       .

        ;

 

Sam

 

From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-bounces at antlr.org] On Behalf Of lars.vonwedel at bayertechnology.com
Sent: Thursday, October 23, 2008 5:18 AM
To: antlr-interest at antlr.org
Subject: [antlr-interest] Interactive interpreter and line continuationcharacters

 


Hello, 

I am trying to build an interactive interpreter shell for an application. A simple approach is obviously to read a line from the command line and send it to the lexer/parser.  However, the input language permits line continuation by special characters. If a line ends with a ';' or ',' it is supposed to be continued on the next line. 

To make things worse, some valid statements can end with multiple ',' characters. In this case, a special statement termination character '!' is used(and can be followed by arbitrary input to be disregarded). 

My current line of thinking is to send a line entered by the user to the lexer, let it skip anything beyond '!' and then look at the last token. If that is a ';' or ',' then obtain another line and concatenate the token streams before actually running the parser. 

Are there any better ideas how to deal with this ? 

Freundliche Gr??e / Best Regards
Lars von Wedel
_________________________________________

Bayer Technology Services GmbH
E-mail: lars.vonwedel at bayertechnology.com
Web: www.bayertechnology.com

Gesch?ftsf?hrer: Achim Noack
Aufsichtsratsvorsitzender: Dr. Wolfgang Plischke
Sitz der Gesellschaft: Leverkusen   |   Eintragung: Amtsgericht K?ln, HRB 49896

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20081023/6ac89b73/attachment.html 

From Fromm at dresden-informatik.de  Thu Oct 23 10:51:48 2008
From: Fromm at dresden-informatik.de (Fromm, Stefan)
Date: Thu, 23 Oct 2008 19:51:48 +0200
Subject: [antlr-interest] Quoted Strings in ANTLR 3.0.1 and 3.1.1
References: <2E109F4DFC3D73448EBFE1BC31CF552D977893@di-server.di-netz.de>
	<DI-SERVERnPlpNvHXsp000006e4@MailSrv.dresden-informatik.de>
Message-ID: <2E109F4DFC3D73448EBFE1BC31CF552D9778A3@di-server.di-netz.de>

Hello Gavin,

EOF at the end of my top-level rule eliminated the error with accepting
''a''. Thank you for that tip. 

> QUOTED_STRING
>    : '\''
>      ( ('\'\'') => '\'\''
>      | ~'\''
>      )*
>      '\''
>    ;

did not work either. But now I'm not able to parse correctly:

'''a'
'''a'''
'''a''b'''

'a'''         
'a''b'
'a''b''c'

with ANTLR 3.1.1. 

''
''''
''''''
'''a''b'

are parsed correctly.

ANTLR 3.0.1 is working now with all test cases. I'll stick to that older
version for now. But still I'm curious what has changed from 3.0 to 3.1
that suddenly it stops working.

Best regards
Stefan


From parrt at cs.usfca.edu  Thu Oct 23 11:04:26 2008
From: parrt at cs.usfca.edu (Terence Parr)
Date: Thu, 23 Oct 2008 11:04:26 -0700
Subject: [antlr-interest] filter mode for tree grammars
Message-ID: <02968811-CC10-41F2-9A35-F91AE348A0BB@cs.usfca.edu>

Hi.

Filter mode for lexers is incredibly useful.  I propose to do the same  
for tree grammars:

http://www.antlr.org/wiki/display/~admin/2008/10/23/tree+pattern 
+matching+grammars

Comments?

Ter

From sharwell at pixelminegames.com  Thu Oct 23 11:15:05 2008
From: sharwell at pixelminegames.com (Sam Harwell)
Date: Thu, 23 Oct 2008 13:15:05 -0500
Subject: [antlr-interest] Quoted Strings in ANTLR 3.0.1 and 3.1.1
In-Reply-To: <2E109F4DFC3D73448EBFE1BC31CF552D9778A3@di-server.di-netz.de>
References: <2E109F4DFC3D73448EBFE1BC31CF552D977893@di-server.di-netz.de><DI-SERVERnPlpNvHXsp000006e4@MailSrv.dresden-informatik.de>
	<2E109F4DFC3D73448EBFE1BC31CF552D9778A3@di-server.di-netz.de>
Message-ID: <86403CA0939415448BCCB83855EFE09A64E6A5@Bloodymary.ironwillgames.com>

All of your test cases below work correctly in ANTLRworks 1.2 using
ANTLR 3.1 (not 3.1.1). Here is the complete grammar (no synpred on the
'') and input I used for testing.

grammar TestQuotedString;

value
	:	(	QUOTED_STRING
		|	NUMBER
		)*
		EOF
	;

QUOTED_STRING
	:	'\'' ( '\'\'' | ~('\'') )* '\''
	;

NUMBER
	:	('+' | '-')?
		('0'..'9')+
		('.' ('0'..'9')+)?
	;

Input string was:
'''a'0'''a'''0'''a''b'''0'a'''0'a''b'0'a''b''c'0''0''''0''''''0'''a''b'

What target are you using? Is there any way you can test 3.1 to see if
the problematic change occurred between 3.1 and 3.1.1? It limits the
scope. :)

Sam

-----Original Message-----
From: antlr-interest-bounces at antlr.org
[mailto:antlr-interest-bounces at antlr.org] On Behalf Of Fromm, Stefan
Sent: Thursday, October 23, 2008 12:52 PM
To: antlr-interest at antlr.org
Subject: Re: [antlr-interest] Quoted Strings in ANTLR 3.0.1 and 3.1.1

Hello Gavin,

EOF at the end of my top-level rule eliminated the error with accepting
''a''. Thank you for that tip. 

> QUOTED_STRING
>    : '\''
>      ( ('\'\'') => '\'\''
>      | ~'\''
>      )*
>      '\''
>    ;

did not work either. But now I'm not able to parse correctly:

'''a'
'''a'''
'''a''b'''

'a'''         
'a''b'
'a''b''c'

with ANTLR 3.1.1. 

''
''''
''''''
'''a''b'

are parsed correctly.

ANTLR 3.0.1 is working now with all test cases. I'll stick to that older
version for now. But still I'm curious what has changed from 3.0 to 3.1
that suddenly it stops working.

Best regards
Stefan


List: http://www.antlr.org/mailman/listinfo/antlr-interest
Unsubscribe:
http://www.antlr.org/mailman/options/antlr-interest/your-email-addr
ess


From parrt at cs.usfca.edu  Thu Oct 23 18:12:40 2008
From: parrt at cs.usfca.edu (Terence Parr)
Date: Thu, 23 Oct 2008 18:12:40 -0700
Subject: [antlr-interest] add a tree visitor?
Message-ID: <0F4A5141-0913-498F-9251-C278BCC930BF@cs.usfca.edu>

Howdy, as part of my tree grammar filter mode, I need an external tree  
visitor. It's just a depth first walk that triggers a pattern match  
for each node as it walks back up the tree. I might as well make it a  
generic action, which means I need an interface in Java. [java doesn't  
have function pointers...sigh]

     public interface TreeVisitorAction {
         public void visit(Object t);
     }

Then the depth first recursive walk can trigger a generic action after  
visiting the children, us, doing a bottom-up walk:

    public static void visit(CommonTree t, TreeVisitorAction action) {
         if ( t.getChildCount()>0 ) {
             List children = t.getChildren();
             for (int i=0; i<children.size(); i++) {
                 CommonTree child = (CommonTree)children.get(i);
                 filter(child, action);
             }
         }
         action.visit(t);
     }

Is this a reasonable bit of code to insert in the main distribution?   
C and other languages can use function pointers to perform the true  
intent of the interface.

Such a plain "visit every node" visitor is not particularly useful  
unless the triggered action does something interesting. In my case, I  
tell it to try to match one of the tree patterns:

        public static void filter(CommonTree t) {
             filter(t, new TreeVisitorAction() {
                 public void visit(Object t) { match((CommonTree)t); }
             });
         }

where match(t) creates a tree parser and tries to match that subtree  
to one of the patterns.

Ter

From parrt at cs.usfca.edu  Thu Oct 23 18:15:46 2008
From: parrt at cs.usfca.edu (Terence Parr)
Date: Thu, 23 Oct 2008 18:15:46 -0700
Subject: [antlr-interest] add a tree visitor?
In-Reply-To: <0F4A5141-0913-498F-9251-C278BCC930BF@cs.usfca.edu>
References: <0F4A5141-0913-498F-9251-C278BCC930BF@cs.usfca.edu>
Message-ID: <4B98ED32-6B5D-4722-B93A-1A2499C9D660@cs.usfca.edu>


On Oct 23, 2008, at 6:12 PM, Terence Parr wrote:
>    public static void visit(CommonTree t, TreeVisitorAction action) {
>         if ( t.getChildCount()>0 ) {
>             List children = t.getChildren();
>             for (int i=0; i<children.size(); i++) {
>                 CommonTree child = (CommonTree)children.get(i);
>                 filter(child, action);

Ooops...make that visit(child, action)

Ter


From Fromm at dresden-informatik.de  Thu Oct 23 23:00:28 2008
From: Fromm at dresden-informatik.de (Fromm, Stefan)
Date: Fri, 24 Oct 2008 08:00:28 +0200
Subject: [antlr-interest] Quoted Strings in ANTLR 3.0.1 and 3.1.1
References: <2E109F4DFC3D73448EBFE1BC31CF552D977893@di-server.di-netz.de><DI-SERVERnPlpNvHXsp000006e4@MailSrv.dresden-informatik.de>
	<2E109F4DFC3D73448EBFE1BC31CF552D9778A3@di-server.di-netz.de>
	<86403CA0939415448BCCB83855EFE09A64E6A5@Bloodymary.ironwillgames.com>
Message-ID: <2E109F4DFC3D73448EBFE1BC31CF552D9778A4@di-server.di-netz.de>

 I tested it again with ANTLR version 3.0.1, 3.1 and 3.1.1. Furthermore
I added tests with a slightly changed lexer rule for quoted strings.
Here are my results.

grammar QuotedStringTest1;

QUOTED_STRING
   : '\'' ( '\'\'' | ~('\'') )* '\''
   ;
	
NUMBER
  :	 ('+' | '-')? '0'..'9'+ ('.' '0'..'9'+)?
  ;

value_expr
  :	 (QUOTED_STRING | NUMBER) EOF
  ;

Pattern         ANTLR 3.0.1                  ANTLR 3.1
ANTLR 3.1.1
                ANTLRworks 1.1.7             ANTLRworks 1.2
ANTLRworks 1.2.1
------------------------------------------------------------------------
---------------------------
''              matched as expected          matched as expected
matched as expected
''''            matched as expected          matched as expected
matched as expected
''''''          matched as expected          matched as expected
matched as expected
'''a'           matched as expected          matched as expected
matched as expected
'''a'''         matched as expected          matched as expected
matched as expected
'''a''b'        matched as expected          matched as expected
matched as expected
'''a''b'''      matched as expected          matched as expected
matched as expected
 

'a'''           matched as expected          no match, expected match
no match, expected match
'a''b'          matched as expected          matched partly, only 'a''
matched partly, only 'a''
'a''b''c'       matched as expected          no match, expected match
no match, expected match



grammar QuotedStringTest2;

QUOTED_STRING
   : '\'' ( ~('\'') | '\'\'')* '\''
   ;
	
NUMBER
  :	 ('+' | '-')? '0'..'9'+ ('.' '0'..'9'+)?
  ;

value_expr
  :	 (QUOTED_STRING | NUMBER) EOF
  ;

Pattern         ANTLR 3.0.1                  ANTLR 3.1
ANTLR 3.1.1
                ANTLRworks 1.1.7             ANTLRworks 1.2
ANTLRworks 1.2.1
------------------------------------------------------------------------
---------------------------
''              matched as expected          matched as expected
matched as expected
''''            matched as expected          no match, expected match
no match, expected match
''''''          matched as expected          no match, expected match
no match, expected match
'''a'           matched as expected          no match, expected match
no match, expected match
'''a'''         matched as expected          no match, expected match
no match, expected match
'''a''b'        matched as expected          no match, expected match
no match, expected match
'''a''b'''      matched as expected          no match, expected match
no match, expected match
                
'a'''           matched as expected          matched as expected
matched as expected
'a''b'          matched as expected          matched as expected
matched as expected
'a''b''c'       matched as expected          matched as expected
matched as expected

Interestingly changing the order of ('\'\'' | ~('\'')) to (~('\'') |
'\'\'') makes exactly the opposite test cases fail in 3.1 and 3.1.1.
First variant lets pass all expressions where first escaped quotes ''
come before any letter. Second variant lets pass all expressions where
first escaped quotes come after any letter.



I have also tried the grammar of Sam with all three versions:

grammar TestQuotedString;

value
	:	(	QUOTED_STRING
		|	NUMBER
		)*
		EOF
	;

QUOTED_STRING
	:	'\'' ( '\'\'' | ~('\'') )* '\''
	;

NUMBER
	:	('+' | '-')?
		('0'..'9')+
		('.' ('0'..'9')+)?
	;



Pattern         ANTLR 3.0.1                  ANTLR 3.1
ANTLR 3.1.1
                ANTLRworks 1.1.7             ANTLRworks 1.2
ANTLRworks 1.2.1
------------------------------------------------------------------------
---------------------------
''              matched as expected          matched as expected
matched as expected
''''            matched as expected          matched as expected
matched as expected
''''''          matched as expected          matched as expected
matched as expected
'''a'           matched as expected          matched as expected
matched as expected
'''a'''         matched as expected          matched as expected
matched as expected
'''a''b'        matched as expected          matched as expected
matched as expected
'''a''b'''      matched as expected          matched as expected
matched as expected
                
'a'''           matched as expected          matched only EOF
matched only EOF
'a''b'          matched as expected          matched only 'a''
matched only 'a''
'a''b''c'       matched as expected          matched 'a'' and 'b''
matched 'a'' and 'b''

The long test
'''a'0'''a'''0'''a''b'''0'a'''0'a''b'0'a''b''c'0''0''''0''''''0'''a''b'
matched exactly as expected in all three versions. In fact Sams grammar
would not be usable for my use case, because SQL does not allow mixing
of quoted strings/numbers in value expressions.

Stefan

From sharwell at pixelminegames.com  Fri Oct 24 00:08:20 2008
From: sharwell at pixelminegames.com (Sam Harwell)
Date: Fri, 24 Oct 2008 02:08:20 -0500
Subject: [antlr-interest] Quoted Strings in ANTLR 3.0.1 and 3.1.1
In-Reply-To: <2E109F4DFC3D73448EBFE1BC31CF552D9778A4@di-server.di-netz.de>
References: <2E109F4DFC3D73448EBFE1BC31CF552D977893@di-server.di-netz.de><DI-SERVERnPlpNvHXsp000006e4@MailSrv.dresden-informatik.de><2E109F4DFC3D73448EBFE1BC31CF552D9778A3@di-server.di-netz.de><86403CA0939415448BCCB83855EFE09A64E6A5@Bloodymary.ironwillgames.com>
	<2E109F4DFC3D73448EBFE1BC31CF552D9778A4@di-server.di-netz.de>
Message-ID: <86403CA0939415448BCCB83855EFE09A64E6BA@Bloodymary.ironwillgames.com>

You're running it in the interpreter, not the debugger. The actual
generated code works across the board with all three versions of the
grammar below.

Sam

-----Original Message-----
From: antlr-interest-bounces at antlr.org
[mailto:antlr-interest-bounces at antlr.org] On Behalf Of Fromm, Stefan
Sent: Friday, October 24, 2008 1:00 AM
To: antlr-interest at antlr.org
Subject: Re: [antlr-interest] Quoted Strings in ANTLR 3.0.1 and 3.1.1

 I tested it again with ANTLR version 3.0.1, 3.1 and 3.1.1. Furthermore
I added tests with a slightly changed lexer rule for quoted strings.
Here are my results.

grammar QuotedStringTest1;

QUOTED_STRING
   : '\'' ( '\'\'' | ~('\'') )* '\''
   ;
	
NUMBER
  :	 ('+' | '-')? '0'..'9'+ ('.' '0'..'9'+)?
  ;

value_expr
  :	 (QUOTED_STRING | NUMBER) EOF
  ;

Pattern         ANTLR 3.0.1                  ANTLR 3.1
ANTLR 3.1.1
                ANTLRworks 1.1.7             ANTLRworks 1.2
ANTLRworks 1.2.1
------------------------------------------------------------------------
---------------------------
''              matched as expected          matched as expected
matched as expected
''''            matched as expected          matched as expected
matched as expected
''''''          matched as expected          matched as expected
matched as expected
'''a'           matched as expected          matched as expected
matched as expected
'''a'''         matched as expected          matched as expected
matched as expected
'''a''b'        matched as expected          matched as expected
matched as expected
'''a''b'''      matched as expected          matched as expected
matched as expected
 

'a'''           matched as expected          no match, expected match
no match, expected match
'a''b'          matched as expected          matched partly, only 'a''
matched partly, only 'a''
'a''b''c'       matched as expected          no match, expected match
no match, expected match



grammar QuotedStringTest2;

QUOTED_STRING
   : '\'' ( ~('\'') | '\'\'')* '\''
   ;
	
NUMBER
  :	 ('+' | '-')? '0'..'9'+ ('.' '0'..'9'+)?
  ;

value_expr
  :	 (QUOTED_STRING | NUMBER) EOF
  ;

Pattern         ANTLR 3.0.1                  ANTLR 3.1
ANTLR 3.1.1
                ANTLRworks 1.1.7             ANTLRworks 1.2
ANTLRworks 1.2.1
------------------------------------------------------------------------
---------------------------
''              matched as expected          matched as expected
matched as expected
''''            matched as expected          no match, expected match
no match, expected match
''''''          matched as expected          no match, expected match
no match, expected match
'''a'           matched as expected          no match, expected match
no match, expected match
'''a'''         matched as expected          no match, expected match
no match, expected match
'''a''b'        matched as expected          no match, expected match
no match, expected match
'''a''b'''      matched as expected          no match, expected match
no match, expected match
                
'a'''           matched as expected          matched as expected
matched as expected
'a''b'          matched as expected          matched as expected
matched as expected
'a''b''c'       matched as expected          matched as expected
matched as expected

Interestingly changing the order of ('\'\'' | ~('\'')) to (~('\'') |
'\'\'') makes exactly the opposite test cases fail in 3.1 and 3.1.1.
First variant lets pass all expressions where first escaped quotes ''
come before any letter. Second variant lets pass all expressions where
first escaped quotes come after any letter.



I have also tried the grammar of Sam with all three versions:

grammar TestQuotedString;

value
	:	(	QUOTED_STRING
		|	NUMBER
		)*
		EOF
	;

QUOTED_STRING
	:	'\'' ( '\'\'' | ~('\'') )* '\''
	;

NUMBER
	:	('+' | '-')?
		('0'..'9')+
		('.' ('0'..'9')+)?
	;



Pattern         ANTLR 3.0.1                  ANTLR 3.1
ANTLR 3.1.1
                ANTLRworks 1.1.7             ANTLRworks 1.2
ANTLRworks 1.2.1
------------------------------------------------------------------------
---------------------------
''              matched as expected          matched as expected
matched as expected
''''            matched as expected          matched as expected
matched as expected
''''''          matched as expected          matched as expected
matched as expected
'''a'           matched as expected          matched as expected
matched as expected
'''a'''         matched as expected          matched as expected
matched as expected
'''a''b'        matched as expected          matched as expected
matched as expected
'''a''b'''      matched as expected          matched as expected
matched as expected
                
'a'''           matched as expected          matched only EOF
matched only EOF
'a''b'          matched as expected          matched only 'a''
matched only 'a''
'a''b''c'       matched as expected          matched 'a'' and 'b''
matched 'a'' and 'b''

The long test
'''a'0'''a'''0'''a''b'''0'a'''0'a''b'0'a''b''c'0''0''''0''''''0'''a''b'
matched exactly as expected in all three versions. In fact Sams grammar
would not be usable for my use case, because SQL does not allow mixing
of quoted strings/numbers in value expressions.

Stefan

List: http://www.antlr.org/mailman/listinfo/antlr-interest
Unsubscribe:
http://www.antlr.org/mailman/options/antlr-interest/your-email-addr
ess


From arik_tg at yahoo.com  Fri Oct 24 01:02:31 2008
From: arik_tg at yahoo.com (Arik Ter-Galstyan)
Date: Fri, 24 Oct 2008 01:02:31 -0700 (PDT)
Subject: [antlr-interest] Please help me with building AST.
Message-ID: <718660.23637.qm@web33108.mail.mud.yahoo.com>


Almost a month I am trying to get a working Verilog parser in C++ with AST via ANTLR and Verilog grammar file downloaded from ANTLR website. I have tried it in every possible way with different ANTLR versions, different modifications of grammar file, no success. After all I think that it should work by simply adding the buildAST=true option at the top of grammar file. No way. Without buildAST=true option the generated parser works fine, however with the option set the generated parser even fails to parse the verilog files. PLEASE TELL ME WHAT I AM MISSING ?


Thanks
Arik.


      

From cerbff at cs.tu-berlin.de  Fri Oct 24 03:20:57 2008
From: cerbff at cs.tu-berlin.de (Florian Friedemann)
Date: Fri, 24 Oct 2008 12:20:57 +0200 (MEST)
Subject: [antlr-interest] Heterogenous Nodes lead to "addChild: Child not
	found, ignoring"
Message-ID: <Pine.SOC.4.64.0810241201200.14594@condesa>

Hi,
Currently I'm trying to create ASTs containing heterogenous nodes as 
described in the ANTLR wiki
However, whenever I use this feature on the right hand side of the rewrite 
operator I get runtime warnings that addChild couldn't find the child and 
the generated AST doesn't contain the heterogenous node.
I even tried a very simple implementation with the tree containing no 
additional information so I really wonder what I might have missed.

The rule in the Grammar looks like this:

tmplId : name -> name ID<Id>; // the generated ID node doesn't show up in 
the tree

the Id class looks like this:

 	class Id extends CommonTree {
 		public Id(Token tok) {
 			this.token = tok;
 		}
 		public Id(int ttype) {
 			this.token = new CommonToken(ttype, "");
 		}
 		public Id(Id node) {
 			super(node);
 		}
 		public Tree dupNode() {
 			return new Id(this);
 		}
 		public String toString() {
 			return (token!=null?token.getText():"") + "<Id>";
 		}
 	}

Versions:
ANTLRWorks: 1.2
ANTLR: 3.1

options:
backtracking=false;
output=AST;
ASTLabelType=CommonTree;

PS:
Strange enough... if I only return the ID<Id> and print out the resulting 
tree of that rule it seems to yield the expected output (from toString()) 
so the created tree is not null or something like that.

Thanks in advance.

From jaluber at gmx.de  Fri Oct 24 03:46:50 2008
From: jaluber at gmx.de (Johannes Luber)
Date: Fri, 24 Oct 2008 12:46:50 +0200
Subject: [antlr-interest] Please help me with building AST.
In-Reply-To: <718660.23637.qm@web33108.mail.mud.yahoo.com>
References: <718660.23637.qm@web33108.mail.mud.yahoo.com>
Message-ID: <4901A79A.3090704@gmx.de>

Arik Ter-Galstyan schrieb:
> Almost a month I am trying to get a working Verilog parser in C++ with AST via ANTLR
> and Verilog grammar file downloaded from ANTLR website. I have tried
it in every
> possible way with different ANTLR versions, different modifications of
grammar file,
> no success. After all I think that it should work by simply adding the
buildAST=true
> option at the top of grammar file. No way. Without buildAST=true
option the generated
> parser works fine, however with the option set the generated parser
even fails to parse
> the verilog files. PLEASE TELL ME WHAT I AM MISSING ?

Do you use ANTLR 2.7.7? buildAST isn't used by ANTLR 3.x.

Johannes
> 
> Thanks
> Arik.
> 
> 
>       
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
> 


From jaluber at gmx.de  Fri Oct 24 05:08:46 2008
From: jaluber at gmx.de (Johannes Luber)
Date: Fri, 24 Oct 2008 14:08:46 +0200
Subject: [antlr-interest] Please help me with building AST.
In-Reply-To: <96333.2929.qm@web33103.mail.mud.yahoo.com>
References: <96333.2929.qm@web33103.mail.mud.yahoo.com>
Message-ID: <4901BACE.8020300@gmx.de>

Arik Ter-Galstyan schrieb:
> Johannes,
> 
> I have used ANTRL 2.7.5, 2.7.6, 2.7.7 inclusive. The same problem exists for all versions.
> If it's not a trouble for you I can send the VS2008 project to you to
analyze. Maybe it
> could help you to find what I am doing wrong.

I never used ANTLR 2.7.7 or earlier, so I don't know where potential
traps lie there.

Johannes
> 
> 
> Regards
> Arik.
> 
> 
> --- On Fri, 10/24/08, Johannes Luber <jaluber at gmx.de> wrote:
> 
>> From: Johannes Luber <jaluber at gmx.de>
>> Subject: Re: [antlr-interest] Please help me with building AST.
>> To: arik_tg at yahoo.com
>> Cc: antlr-interest at antlr.org
>> Date: Friday, October 24, 2008, 3:46 AM
>> Arik Ter-Galstyan schrieb:
>>> Almost a month I am trying to get a working Verilog
>> parser in C++ with AST via ANTLR
>>> and Verilog grammar file downloaded from ANTLR
>> website. I have tried
>> it in every
>>> possible way with different ANTLR versions, different
>> modifications of
>> grammar file,
>>> no success. After all I think that it should work by
>> simply adding the
>> buildAST=true
>>> option at the top of grammar file. No way. Without
>> buildAST=true
>> option the generated
>>> parser works fine, however with the option set the
>> generated parser
>> even fails to parse
>>> the verilog files. PLEASE TELL ME WHAT I AM MISSING ?
>> Do you use ANTLR 2.7.7? buildAST isn't used by ANTLR
>> 3.x.
>>
>> Johannes
>>> Thanks
>>> Arik.
>>>
>>>
>>>       
>>>
>>> List:
>> http://www.antlr.org/mailman/listinfo/antlr-interest
>>> Unsubscribe:
>> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
> 
> 
>       
> 


From aravinda777 at gmail.com  Fri Oct 24 06:57:58 2008
From: aravinda777 at gmail.com (Aravinda Dassanayake)
Date: Fri, 24 Oct 2008 19:27:58 +0530
Subject: [antlr-interest] Java grammar - capturing anonymous inner classes
Message-ID: <c1960e000810240657x3300efdfka3a1aeced8f2bf0d@mail.gmail.com>

Hi,
I am looking for a rule set to catch anonymous inner classes in Java, using
Terrence's Java grammar.
What are the relevant rules that I can use to catch
the occurrence of anonymous inner classes?

Regards,
Aravinda
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20081024/12a2f45c/attachment.html 

From jimi at temporal-wave.com  Fri Oct 24 08:55:16 2008
From: jimi at temporal-wave.com (Jim Idle)
Date: Fri, 24 Oct 2008 08:55:16 -0700
Subject: [antlr-interest] New Maven Artifiacts
Message-ID: <1224863716.4489.566.camel@jimi>

In preparation for maintaining our own maven repository, I have created
new artifacts for the ANTLR and StringTemplate releases and requested
that they be uploaded to Maven via:

http://jira.codehaus.org/browse/MAVENUPLOAD-2249

If you are interested in this happening, please visit that JIRA report
and vote for it. I don't know how much that influences the upload but it
may well help to get someone to upload it quicker than otherwise.

If you have never heard of Maven, or only slightly, then if your
development is Java based (though it purports to work for other things),
I would suggest taking a look. Basically it replaces mountains of ANT
XML and knows how to download and use just about any components you can
think of, including ANTLR 2 and 3 thanks to the efforts of third party
developers. Well worth the day or so's effort of getting to know how it
works. 

Another side effect of using it is that there is a plugin for IDEs (at
least, Netbeans, IntelliJ/IDEA and eclipse) that means you can just open
the maven defined project and it knows what to do. This means the new
project definitions for ANTLR (released shortly) will mean you can build
ANTLR from source with ease.

However, all being well, we will soon have our own ANTLR repository for
Ter to deploy to, which will be auto synced to Maven and then as new
versions of ANTLR are released, they should automatically show up in
Maven.

One final note here is that there is of course no need to switch any of
your build procedures to Maven to use ANTLR - if you don't like it or
can;t be bothered with it, then just carry on with your current
procedure. The only side effect is that we will move the .g files around
in the ANTLR 3 source for 3.2 (details will be sent to the development
list once Ter is happy with it all), which is not really likely to
affect anyone (here is some advance notice of course ;-).

Share and Enjoy!

Jim
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20081024/945fc039/attachment.html 

From Fromm at dresden-informatik.de  Fri Oct 24 09:12:51 2008
From: Fromm at dresden-informatik.de (Fromm, Stefan)
Date: Fri, 24 Oct 2008 18:12:51 +0200
Subject: [antlr-interest] Quoted Strings in ANTLR 3.0.1 and 3.1.1
References: <2E109F4DFC3D73448EBFE1BC31CF552D977893@di-server.di-netz.de><DI-SERVERnPlpNvHXsp000006e4@MailSrv.dresden-informatik.de><2E109F4DFC3D73448EBFE1BC31CF552D9778A3@di-server.di-netz.de><86403CA0939415448BCCB83855EFE09A64E6A5@Bloodymary.ironwillgames.com>
	<2E109F4DFC3D73448EBFE1BC31CF552D9778A4@di-server.di-netz.de>
	<86403CA0939415448BCCB83855EFE09A64E6BA@Bloodymary.ironwillgames.com>
Message-ID: <2E109F4DFC3D73448EBFE1BC31CF552D9778B9@di-server.di-netz.de>

Hello,

that's right. I thought that the interpreter delivers reliable results. Sorry for wasting time. I have tested it with the debugger and in fact the test cases are working.

What for is the interpreter in ANTLRworks?

Regards
Stefan



> -----Urspr?ngliche Nachricht-----
> Von: Sam Harwell [mailto:sharwell at pixelminegames.com] 
> Gesendet: Freitag, 24. Oktober 2008 09:08
> An: Fromm, Stefan; antlr-interest at antlr.org
> Betreff: RE: [antlr-interest] Quoted Strings in ANTLR 3.0.1 and 3.1.1
> 
> You're running it in the interpreter, not the debugger. The 
> actual generated code works across the board with all three 
> versions of the grammar below.
> 
> Sam
> 
> -----Original Message-----
> From: antlr-interest-bounces at antlr.org
> [mailto:antlr-interest-bounces at antlr.org] On Behalf Of Fromm, Stefan
> Sent: Friday, October 24, 2008 1:00 AM
> To: antlr-interest at antlr.org
> Subject: Re: [antlr-interest] Quoted Strings in ANTLR 3.0.1 and 3.1.1
> 
>  I tested it again with ANTLR version 3.0.1, 3.1 and 3.1.1. 
> Furthermore I added tests with a slightly changed lexer rule 
> for quoted strings.
> Here are my results.
> 
> grammar QuotedStringTest1;
> 
> QUOTED_STRING
>    : '\'' ( '\'\'' | ~('\'') )* '\''
>    ;
> 	
> NUMBER
>   :	 ('+' | '-')? '0'..'9'+ ('.' '0'..'9'+)?
>   ;
> 
> value_expr
>   :	 (QUOTED_STRING | NUMBER) EOF
>   ;
> 
> Pattern         ANTLR 3.0.1                  ANTLR 3.1
> ANTLR 3.1.1
>                 ANTLRworks 1.1.7             ANTLRworks 1.2
> ANTLRworks 1.2.1
> --------------------------------------------------------------
> ----------
> ---------------------------
> ''              matched as expected          matched as expected
> matched as expected
> ''''            matched as expected          matched as expected
> matched as expected
> ''''''          matched as expected          matched as expected
> matched as expected
> '''a'           matched as expected          matched as expected
> matched as expected
> '''a'''         matched as expected          matched as expected
> matched as expected
> '''a''b'        matched as expected          matched as expected
> matched as expected
> '''a''b'''      matched as expected          matched as expected
> matched as expected
>  
> 
> 'a'''           matched as expected          no match, expected match
> no match, expected match
> 'a''b'          matched as expected          matched partly, only 'a''
> matched partly, only 'a''
> 'a''b''c'       matched as expected          no match, expected match
> no match, expected match
> 
> 
> 
> grammar QuotedStringTest2;
> 
> QUOTED_STRING
>    : '\'' ( ~('\'') | '\'\'')* '\''
>    ;
> 	
> NUMBER
>   :	 ('+' | '-')? '0'..'9'+ ('.' '0'..'9'+)?
>   ;
> 
> value_expr
>   :	 (QUOTED_STRING | NUMBER) EOF
>   ;
> 
> Pattern         ANTLR 3.0.1                  ANTLR 3.1
> ANTLR 3.1.1
>                 ANTLRworks 1.1.7             ANTLRworks 1.2
> ANTLRworks 1.2.1
> --------------------------------------------------------------
> ----------
> ---------------------------
> ''              matched as expected          matched as expected
> matched as expected
> ''''            matched as expected          no match, expected match
> no match, expected match
> ''''''          matched as expected          no match, expected match
> no match, expected match
> '''a'           matched as expected          no match, expected match
> no match, expected match
> '''a'''         matched as expected          no match, expected match
> no match, expected match
> '''a''b'        matched as expected          no match, expected match
> no match, expected match
> '''a''b'''      matched as expected          no match, expected match
> no match, expected match
>                 
> 'a'''           matched as expected          matched as expected
> matched as expected
> 'a''b'          matched as expected          matched as expected
> matched as expected
> 'a''b''c'       matched as expected          matched as expected
> matched as expected
> 
> Interestingly changing the order of ('\'\'' | ~('\'')) to (~('\'') |
> '\'\'') makes exactly the opposite test cases fail in 3.1 and 3.1.1.
> First variant lets pass all expressions where first escaped quotes ''
> come before any letter. Second variant lets pass all 
> expressions where first escaped quotes come after any letter.
> 
> 
> 
> I have also tried the grammar of Sam with all three versions:
> 
> grammar TestQuotedString;
> 
> value
> 	:	(	QUOTED_STRING
> 		|	NUMBER
> 		)*
> 		EOF
> 	;
> 
> QUOTED_STRING
> 	:	'\'' ( '\'\'' | ~('\'') )* '\''
> 	;
> 
> NUMBER
> 	:	('+' | '-')?
> 		('0'..'9')+
> 		('.' ('0'..'9')+)?
> 	;
> 
> 
> 
> Pattern         ANTLR 3.0.1                  ANTLR 3.1
> ANTLR 3.1.1
>                 ANTLRworks 1.1.7             ANTLRworks 1.2
> ANTLRworks 1.2.1
> --------------------------------------------------------------
> ----------
> ---------------------------
> ''              matched as expected          matched as expected
> matched as expected
> ''''            matched as expected          matched as expected
> matched as expected
> ''''''          matched as expected          matched as expected
> matched as expected
> '''a'           matched as expected          matched as expected
> matched as expected
> '''a'''         matched as expected          matched as expected
> matched as expected
> '''a''b'        matched as expected          matched as expected
> matched as expected
> '''a''b'''      matched as expected          matched as expected
> matched as expected
>                 
> 'a'''           matched as expected          matched only EOF
> matched only EOF
> 'a''b'          matched as expected          matched only 'a''
> matched only 'a''
> 'a''b''c'       matched as expected          matched 'a'' and 'b''
> matched 'a'' and 'b''
> 
> The long test
> '''a'0'''a'''0'''a''b'''0'a'''0'a''b'0'a''b''c'0''0''''0''''''
> 0'''a''b'
> matched exactly as expected in all three versions. In fact 
> Sams grammar would not be usable for my use case, because SQL 
> does not allow mixing of quoted strings/numbers in value expressions.
> 
> Stefan
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-
> email-addr
> ess
> 
> 

From sharwell at pixelminegames.com  Fri Oct 24 09:14:54 2008
From: sharwell at pixelminegames.com (Sam Harwell)
Date: Fri, 24 Oct 2008 11:14:54 -0500
Subject: [antlr-interest] Quoted Strings in ANTLR 3.0.1 and 3.1.1
In-Reply-To: <2E109F4DFC3D73448EBFE1BC31CF552D9778B9@di-server.di-netz.de>
References: <2E109F4DFC3D73448EBFE1BC31CF552D977893@di-server.di-netz.de><DI-SERVERnPlpNvHXsp000006e4@MailSrv.dresden-informatik.de><2E109F4DFC3D73448EBFE1BC31CF552D9778A3@di-server.di-netz.de><86403CA0939415448BCCB83855EFE09A64E6A5@Bloodymary.ironwillgames.com><2E109F4DFC3D73448EBFE1BC31CF552D9778A4@di-server.di-netz.de><86403CA0939415448BCCB83855EFE09A64E6BA@Bloodymary.ironwillgames.com>
	<2E109F4DFC3D73448EBFE1BC31CF552D9778B9@di-server.di-netz.de>
Message-ID: <86403CA0939415448BCCB83855EFE09A64E6C4@Bloodymary.ironwillgames.com>

No time wasted, now we have a great set of test cases for fixing the interpreter bugs. :) Good to hear it's resolved for you.

Sam

-----Original Message-----
From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-bounces at antlr.org] On Behalf Of Fromm, Stefan
Sent: Friday, October 24, 2008 11:13 AM
To: antlr-interest at antlr.org
Subject: Re: [antlr-interest] Quoted Strings in ANTLR 3.0.1 and 3.1.1

Hello,

that's right. I thought that the interpreter delivers reliable results. Sorry for wasting time. I have tested it with the debugger and in fact the test cases are working.

What for is the interpreter in ANTLRworks?

Regards
Stefan



> -----Urspr?ngliche Nachricht-----
> Von: Sam Harwell [mailto:sharwell at pixelminegames.com] 
> Gesendet: Freitag, 24. Oktober 2008 09:08
> An: Fromm, Stefan; antlr-interest at antlr.org
> Betreff: RE: [antlr-interest] Quoted Strings in ANTLR 3.0.1 and 3.1.1
> 
> You're running it in the interpreter, not the debugger. The 
> actual generated code works across the board with all three 
> versions of the grammar below.
> 
> Sam
> 
> -----Original Message-----
> From: antlr-interest-bounces at antlr.org
> [mailto:antlr-interest-bounces at antlr.org] On Behalf Of Fromm, Stefan
> Sent: Friday, October 24, 2008 1:00 AM
> To: antlr-interest at antlr.org
> Subject: Re: [antlr-interest] Quoted Strings in ANTLR 3.0.1 and 3.1.1
> 
>  I tested it again with ANTLR version 3.0.1, 3.1 and 3.1.1. 
> Furthermore I added tests with a slightly changed lexer rule 
> for quoted strings.
> Here are my results.
> 
> grammar QuotedStringTest1;
> 
> QUOTED_STRING
>    : '\'' ( '\'\'' | ~('\'') )* '\''
>    ;
> 	
> NUMBER
>   :	 ('+' | '-')? '0'..'9'+ ('.' '0'..'9'+)?
>   ;
> 
> value_expr
>   :	 (QUOTED_STRING | NUMBER) EOF
>   ;
> 
> Pattern         ANTLR 3.0.1                  ANTLR 3.1
> ANTLR 3.1.1
>                 ANTLRworks 1.1.7             ANTLRworks 1.2
> ANTLRworks 1.2.1
> --------------------------------------------------------------
> ----------
> ---------------------------
> ''              matched as expected          matched as expected
> matched as expected
> ''''            matched as expected          matched as expected
> matched as expected
> ''''''          matched as expected          matched as expected
> matched as expected
> '''a'           matched as expected          matched as expected
> matched as expected
> '''a'''         matched as expected          matched as expected
> matched as expected
> '''a''b'        matched as expected          matched as expected
> matched as expected
> '''a''b'''      matched as expected          matched as expected
> matched as expected
>  
> 
> 'a'''           matched as expected          no match, expected match
> no match, expected match
> 'a''b'          matched as expected          matched partly, only 'a''
> matched partly, only 'a''
> 'a''b''c'       matched as expected          no match, expected match
> no match, expected match
> 
> 
> 
> grammar QuotedStringTest2;
> 
> QUOTED_STRING
>    : '\'' ( ~('\'') | '\'\'')* '\''
>    ;
> 	
> NUMBER
>   :	 ('+' | '-')? '0'..'9'+ ('.' '0'..'9'+)?
>   ;
> 
> value_expr
>   :	 (QUOTED_STRING | NUMBER) EOF
>   ;
> 
> Pattern         ANTLR 3.0.1                  ANTLR 3.1
> ANTLR 3.1.1
>                 ANTLRworks 1.1.7             ANTLRworks 1.2
> ANTLRworks 1.2.1
> --------------------------------------------------------------
> ----------
> ---------------------------
> ''              matched as expected          matched as expected
> matched as expected
> ''''            matched as expected          no match, expected match
> no match, expected match
> ''''''          matched as expected          no match, expected match
> no match, expected match
> '''a'           matched as expected          no match, expected match
> no match, expected match
> '''a'''         matched as expected          no match, expected match
> no match, expected match
> '''a''b'        matched as expected          no match, expected match
> no match, expected match
> '''a''b'''      matched as expected          no match, expected match
> no match, expected match
>                 
> 'a'''           matched as expected          matched as expected
> matched as expected
> 'a''b'          matched as expected          matched as expected
> matched as expected
> 'a''b''c'       matched as expected          matched as expected
> matched as expected
> 
> Interestingly changing the order of ('\'\'' | ~('\'')) to (~('\'') |
> '\'\'') makes exactly the opposite test cases fail in 3.1 and 3.1.1.
> First variant lets pass all expressions where first escaped quotes ''
> come before any letter. Second variant lets pass all 
> expressions where first escaped quotes come after any letter.
> 
> 
> 
> I have also tried the grammar of Sam with all three versions:
> 
> grammar TestQuotedString;
> 
> value
> 	:	(	QUOTED_STRING
> 		|	NUMBER
> 		)*
> 		EOF
> 	;
> 
> QUOTED_STRING
> 	:	'\'' ( '\'\'' | ~('\'') )* '\''
> 	;
> 
> NUMBER
> 	:	('+' | '-')?
> 		('0'..'9')+
> 		('.' ('0'..'9')+)?
> 	;
> 
> 
> 
> Pattern         ANTLR 3.0.1                  ANTLR 3.1
> ANTLR 3.1.1
>                 ANTLRworks 1.1.7             ANTLRworks 1.2
> ANTLRworks 1.2.1
> --------------------------------------------------------------
> ----------
> ---------------------------
> ''              matched as expected          matched as expected
> matched as expected
> ''''            matched as expected          matched as expected
> matched as expected
> ''''''          matched as expected          matched as expected
> matched as expected
> '''a'           matched as expected          matched as expected
> matched as expected
> '''a'''         matched as expected          matched as expected
> matched as expected
> '''a''b'        matched as expected          matched as expected
> matched as expected
> '''a''b'''      matched as expected          matched as expected
> matched as expected
>                 
> 'a'''           matched as expected          matched only EOF
> matched only EOF
> 'a''b'          matched as expected          matched only 'a''
> matched only 'a''
> 'a''b''c'       matched as expected          matched 'a'' and 'b''
> matched 'a'' and 'b''
> 
> The long test
> '''a'0'''a'''0'''a''b'''0'a'''0'a''b'0'a''b''c'0''0''''0''''''
> 0'''a''b'
> matched exactly as expected in all three versions. In fact 
> Sams grammar would not be usable for my use case, because SQL 
> does not allow mixing of quoted strings/numbers in value expressions.
> 
> Stefan
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-
> email-addr
> ess
> 
> 

List: http://www.antlr.org/mailman/listinfo/antlr-interest
Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address


From Fromm at dresden-informatik.de  Fri Oct 24 09:17:15 2008
From: Fromm at dresden-informatik.de (Fromm, Stefan)
Date: Fri, 24 Oct 2008 18:17:15 +0200
Subject: [antlr-interest] Quoted Strings in ANTLR 3.0.1 and 3.1.1
References: <2E109F4DFC3D73448EBFE1BC31CF552D977893@di-server.di-netz.de><DI-SERVERnPlpNvHXsp000006e4@MailSrv.dresden-informatik.de><2E109F4DFC3D73448EBFE1BC31CF552D9778A3@di-server.di-netz.de><86403CA0939415448BCCB83855EFE09A64E6A5@Bloodymary.ironwillgames.com><2E109F4DFC3D73448EBFE1BC31CF552D9778A4@di-server.di-netz.de><86403CA0939415448BCCB83855EFE09A64E6BA@Bloodymary.ironwillgames.com>
	<2E109F4DFC3D73448EBFE1BC31CF552D9778B9@di-server.di-netz.de>
	<86403CA0939415448BCCB83855EFE09A64E6C4@Bloodymary.ironwillgames.com>
Message-ID: <2E109F4DFC3D73448EBFE1BC31CF552D9778BB@di-server.di-netz.de>

Hello Sam,

thanks for giving sense to  the spent time :)

Stefan

> -----Urspr?ngliche Nachricht-----
> Von: Sam Harwell [mailto:sharwell at pixelminegames.com] 
> Gesendet: Freitag, 24. Oktober 2008 18:15
> An: Fromm, Stefan; antlr-interest at antlr.org
> Betreff: RE: [antlr-interest] Quoted Strings in ANTLR 3.0.1 and 3.1.1
> 
> No time wasted, now we have a great set of test cases for 
> fixing the interpreter bugs. :) Good to hear it's resolved for you.
> 
> Sam
> 
> -----Original Message-----
> From: antlr-interest-bounces at antlr.org 
> [mailto:antlr-interest-bounces at antlr.org] On Behalf Of Fromm, Stefan
> Sent: Friday, October 24, 2008 11:13 AM
> To: antlr-interest at antlr.org
> Subject: Re: [antlr-interest] Quoted Strings in ANTLR 3.0.1 and 3.1.1
> 
> Hello,
> 
> that's right. I thought that the interpreter delivers 
> reliable results. Sorry for wasting time. I have tested it 
> with the debugger and in fact the test cases are working.
> 
> What for is the interpreter in ANTLRworks?
> 
> Regards
> Stefan
> 
> 
> 
> > -----Urspr?ngliche Nachricht-----
> > Von: Sam Harwell [mailto:sharwell at pixelminegames.com]
> > Gesendet: Freitag, 24. Oktober 2008 09:08
> > An: Fromm, Stefan; antlr-interest at antlr.org
> > Betreff: RE: [antlr-interest] Quoted Strings in ANTLR 3.0.1 
> and 3.1.1
> > 
> > You're running it in the interpreter, not the debugger. The actual 
> > generated code works across the board with all three 
> versions of the 
> > grammar below.
> > 
> > Sam
> > 
> > -----Original Message-----
> > From: antlr-interest-bounces at antlr.org 
> > [mailto:antlr-interest-bounces at antlr.org] On Behalf Of Fromm, Stefan
> > Sent: Friday, October 24, 2008 1:00 AM
> > To: antlr-interest at antlr.org
> > Subject: Re: [antlr-interest] Quoted Strings in ANTLR 3.0.1 
> and 3.1.1
> > 
> >  I tested it again with ANTLR version 3.0.1, 3.1 and 3.1.1. 
> > Furthermore I added tests with a slightly changed lexer rule for 
> > quoted strings.
> > Here are my results.
> > 
> > grammar QuotedStringTest1;
> > 
> > QUOTED_STRING
> >    : '\'' ( '\'\'' | ~('\'') )* '\''
> >    ;
> > 	
> > NUMBER
> >   :	 ('+' | '-')? '0'..'9'+ ('.' '0'..'9'+)?
> >   ;
> > 
> > value_expr
> >   :	 (QUOTED_STRING | NUMBER) EOF
> >   ;
> > 
> > Pattern         ANTLR 3.0.1                  ANTLR 3.1
> > ANTLR 3.1.1
> >                 ANTLRworks 1.1.7             ANTLRworks 1.2
> > ANTLRworks 1.2.1
> > --------------------------------------------------------------
> > ----------
> > ---------------------------
> > ''              matched as expected          matched as expected
> > matched as expected
> > ''''            matched as expected          matched as expected
> > matched as expected
> > ''''''          matched as expected          matched as expected
> > matched as expected
> > '''a'           matched as expected          matched as expected
> > matched as expected
> > '''a'''         matched as expected          matched as expected
> > matched as expected
> > '''a''b'        matched as expected          matched as expected
> > matched as expected
> > '''a''b'''      matched as expected          matched as expected
> > matched as expected
> >  
> > 
> > 'a'''           matched as expected          no match, 
> expected match
> > no match, expected match
> > 'a''b'          matched as expected          matched 
> partly, only 'a''
> > matched partly, only 'a''
> > 'a''b''c'       matched as expected          no match, 
> expected match
> > no match, expected match
> > 
> > 
> > 
> > grammar QuotedStringTest2;
> > 
> > QUOTED_STRING
> >    : '\'' ( ~('\'') | '\'\'')* '\''
> >    ;
> > 	
> > NUMBER
> >   :	 ('+' | '-')? '0'..'9'+ ('.' '0'..'9'+)?
> >   ;
> > 
> > value_expr
> >   :	 (QUOTED_STRING | NUMBER) EOF
> >   ;
> > 
> > Pattern         ANTLR 3.0.1                  ANTLR 3.1
> > ANTLR 3.1.1
> >                 ANTLRworks 1.1.7             ANTLRworks 1.2
> > ANTLRworks 1.2.1
> > --------------------------------------------------------------
> > ----------
> > ---------------------------
> > ''              matched as expected          matched as expected
> > matched as expected
> > ''''            matched as expected          no match, 
> expected match
> > no match, expected match
> > ''''''          matched as expected          no match, 
> expected match
> > no match, expected match
> > '''a'           matched as expected          no match, 
> expected match
> > no match, expected match
> > '''a'''         matched as expected          no match, 
> expected match
> > no match, expected match
> > '''a''b'        matched as expected          no match, 
> expected match
> > no match, expected match
> > '''a''b'''      matched as expected          no match, 
> expected match
> > no match, expected match
> >                 
> > 'a'''           matched as expected          matched as expected
> > matched as expected
> > 'a''b'          matched as expected          matched as expected
> > matched as expected
> > 'a''b''c'       matched as expected          matched as expected
> > matched as expected
> > 
> > Interestingly changing the order of ('\'\'' | ~('\'')) to (~('\'') |
> > '\'\'') makes exactly the opposite test cases fail in 3.1 and 3.1.1.
> > First variant lets pass all expressions where first escaped 
> quotes ''
> > come before any letter. Second variant lets pass all 
> expressions where 
> > first escaped quotes come after any letter.
> > 
> > 
> > 
> > I have also tried the grammar of Sam with all three versions:
> > 
> > grammar TestQuotedString;
> > 
> > value
> > 	:	(	QUOTED_STRING
> > 		|	NUMBER
> > 		)*
> > 		EOF
> > 	;
> > 
> > QUOTED_STRING
> > 	:	'\'' ( '\'\'' | ~('\'') )* '\''
> > 	;
> > 
> > NUMBER
> > 	:	('+' | '-')?
> > 		('0'..'9')+
> > 		('.' ('0'..'9')+)?
> > 	;
> > 
> > 
> > 
> > Pattern         ANTLR 3.0.1                  ANTLR 3.1
> > ANTLR 3.1.1
> >                 ANTLRworks 1.1.7             ANTLRworks 1.2
> > ANTLRworks 1.2.1
> > --------------------------------------------------------------
> > ----------
> > ---------------------------
> > ''              matched as expected          matched as expected
> > matched as expected
> > ''''            matched as expected          matched as expected
> > matched as expected
> > ''''''          matched as expected          matched as expected
> > matched as expected
> > '''a'           matched as expected          matched as expected
> > matched as expected
> > '''a'''         matched as expected          matched as expected
> > matched as expected
> > '''a''b'        matched as expected          matched as expected
> > matched as expected
> > '''a''b'''      matched as expected          matched as expected
> > matched as expected
> >                 
> > 'a'''           matched as expected          matched only EOF
> > matched only EOF
> > 'a''b'          matched as expected          matched only 'a''
> > matched only 'a''
> > 'a''b''c'       matched as expected          matched 'a'' and 'b''
> > matched 'a'' and 'b''
> > 
> > The long test
> > '''a'0'''a'''0'''a''b'''0'a'''0'a''b'0'a''b''c'0''0''''0''''''
> > 0'''a''b'
> > matched exactly as expected in all three versions. In fact Sams 
> > grammar would not be usable for my use case, because SQL does not 
> > allow mixing of quoted strings/numbers in value expressions.
> > 
> > Stefan
> > 
> > List: http://www.antlr.org/mailman/listinfo/antlr-interest
> > Unsubscribe:
> > http://www.antlr.org/mailman/options/antlr-interest/your-
> > email-addr
> > ess
> > 
> > 
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: 
> http://www.antlr.org/mailman/options/antlr-interest/your-
> email-address
> 
> 

From parrt at cs.usfca.edu  Fri Oct 24 11:17:11 2008
From: parrt at cs.usfca.edu (Terence Parr)
Date: Fri, 24 Oct 2008 11:17:11 -0700
Subject: [antlr-interest] Quoted Strings in ANTLR 3.0.1 and 3.1.1
In-Reply-To: <2E109F4DFC3D73448EBFE1BC31CF552D9778A4@di-server.di-netz.de>
References: <2E109F4DFC3D73448EBFE1BC31CF552D977893@di-server.di-netz.de><DI-SERVERnPlpNvHXsp000006e4@MailSrv.dresden-informatik.de>
	<2E109F4DFC3D73448EBFE1BC31CF552D9778A3@di-server.di-netz.de>
	<86403CA0939415448BCCB83855EFE09A64E6A5@Bloodymary.ironwillgames.com>
	<2E109F4DFC3D73448EBFE1BC31CF552D9778A4@di-server.di-netz.de>
Message-ID: <B52D5F39-45E0-4144-A9E1-DC3A91C096E9@cs.usfca.edu>

thanks!  Added as bug:

http://www.antlr.org:8888/browse/ANTLR-345

Ter

From pwyckoff at facebook.com  Fri Oct 24 13:55:02 2008
From: pwyckoff at facebook.com (Pete Wyckoff)
Date: Fri, 24 Oct 2008 13:55:02 -0700
Subject: [antlr-interest] Generating help/completions from antlr
Message-ID: <C5278436.30C3B%pwyckoff@facebook.com>


I am using antlr to parse commands entered in jline and am wondering:

1. is there a pretty print for antlr grammers that prints it out in user
friendly format for a 'help' command.

2. Is it possible to use the ast on a partial input to generate a list of
potential next tokens (assuming backtracking is off).

Thanks, pete



From cocoa at gmx.ch  Sat Oct 25 02:57:02 2008
From: cocoa at gmx.ch (Simon)
Date: Sat, 25 Oct 2008 11:57:02 +0200
Subject: [antlr-interest] Tree Operators vs. Tree Rewrite Rules
In-Reply-To: <20081022130710.240270@gmx.net>
References: <20081022130710.240270@gmx.net>
Message-ID: <803C418B-DAA0-4EF6-A2E8-7A086F2E726C@gmx.ch>

Is it so obvious? Or is it simply not possible to achieve the same  
thing using rewrite rules?

On Oct 22, 2008, at 3:07 PM, cocoa at gmx.ch wrote:

> Hi
>
> I try to build an AST for the following sentences:
>
> a.b.c;
>
> or
>
> a.b.c.d.e;
>
> The grammar is shown below. The expected tree (for the first  
> example) is
>
> ^('.' ^('.' 'a' 'b') 'c')
>
> It works as expected with tree operators:
>
> prog
> 	:	expr ';'!
> 	;
> 	
> expr
> 	:	primary ('.'^ ID )*
> 	;
>
> primary
> 	:	ID
> 	;
>
> However, I can't get the same tree using tree rewrite rules. Is it  
> possible at all? If so, could somebody please show me how?
>
> Thanks
> Simon
>
> PS: ultimately, I want to build an AST for a Java like language  
> (method calls, field access, ...)
> -- 
> GMX Kostenlose Spiele: Einfach online spielen und Spa? haben mit  
> Pastry Passion!
> http://games.entertainment.gmx.net/de/entertainment/games/free/puzzle/6169196
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address


From antlr at mirality.co.nz  Sat Oct 25 03:40:15 2008
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Sat, 25 Oct 2008 23:40:15 +1300
Subject: [antlr-interest] Tree Operators vs. Tree Rewrite Rules
In-Reply-To: <803C418B-DAA0-4EF6-A2E8-7A086F2E726C@gmx.ch>
References: <20081022130710.240270@gmx.net>
	<803C418B-DAA0-4EF6-A2E8-7A086F2E726C@gmx.ch>
Message-ID: <20081025104024.A08613D167E@www.antlr.org>

At 22:57 25/10/2008, Simon wrote:
 >Is it so obvious? Or is it simply not possible to achieve
the same thing using rewrite rules?

It is possible, and it's not quite so obvious (though it has been 
mentioned a few times in the archives).  But messages sometimes 
slip through the cracks :)

 >> ^('.' ^('.' 'a' 'b') 'c')
[...]
 >> expr
 >> 	:	primary ('.'^ ID )*
 >> 	;
[...]
 >> However, I can't get the same tree using tree rewrite
 >> rules. Is it possible at all? If so, could somebody
 >> please show me how?

expr
   :  (primary -> primary)
      ('.' ID -> ^('.' $expr ID))*
   ;


From Development at ChrisSek.de  Sat Oct 25 03:56:15 2008
From: Development at ChrisSek.de (Chris Sekszczynska)
Date: Sat, 25 Oct 2008 12:56:15 +0200
Subject: [antlr-interest] How to pass-through comments and complete
	sentences in ANTLR3.1
Message-ID: <FFBEE8A6-048D-4DEE-A41A-0252A278012D@ChrisSek.de>

Hi all,

while I familiarize myself with ANTLR to translate from one high-level
language to another, I wasn't able to find a good starting point showing
how to pass-through stuff from the input stream to templates.

Can someone give me a little hint? I'm using the latest version of
ANTLR to generate ASTs for an input stream. With the latest version of
StringTemplate I'm generating code from the AST using templates.

Concretely, I must retain stuff of the input stream in the following
situations:

    1) Single line comments must be kept while parsing

    2) Multi line comments must also be kept but have to be converted  
into
       Single line comments

    3) If a parsing error occurred, the complete sentence of the input
       stream (which produces the error) must passed into the AST to
       write it into the resulting code. Moreover, ANTLR must continue
       parsing when running into this situation.

I've already found Terence article at [1] but I'm not sure whether  
this is
the best way under ANTLR3. As I'm writing comment into the hidden  
channel,
it would be great to deal with this channels rather than modifying  
ANTLR.

Is there a sophisticated solution for my three problems?

Thank you very much in advance.

Kind regards,

Chris Sekszczynska

Student of computer engineering
at University of Applied Sciences Bremen, Germany


[1] http://www.antlr.org/article/preserving.token.order/preserving.token.order.tml

From jimi at temporal-wave.com  Sat Oct 25 13:13:29 2008
From: jimi at temporal-wave.com (Jim Idle)
Date: Sat, 25 Oct 2008 13:13:29 -0700
Subject: [antlr-interest] Tree Operators vs. Tree Rewrite Rules
In-Reply-To: <803C418B-DAA0-4EF6-A2E8-7A086F2E726C@gmx.ch>
References: <20081022130710.240270@gmx.net>
	<803C418B-DAA0-4EF6-A2E8-7A086F2E726C@gmx.ch>
Message-ID: <1224965609.4826.4.camel@jimi>

On Sat, 2008-10-25 at 11:57 +0200, Simon wrote:

> Is it so obvious? Or is it simply not possible to achieve the same  
> thing using rewrite rules?


Have you tried a few things yourself? It won't explode if you do it
wrong :-)

Try things akin to:

e
: p -> $p
   (
     a='.' i=id
       ->^($a $e $i) // Or $a $i $e
   )*
;

Jim


> 
> On Oct 22, 2008, at 3:07 PM, cocoa at gmx.ch wrote:
> 
> > Hi
> >
> > I try to build an AST for the following sentences:
> >
> > a.b.c;
> >
> > or
> >
> > a.b.c.d.e;
> >
> > The grammar is shown below. The expected tree (for the first  
> > example) is
> >
> > ^('.' ^('.' 'a' 'b') 'c')
> >
> > It works as expected with tree operators:
> >
> > prog
> > 	:	expr ';'!
> > 	;
> > 	
> > expr
> > 	:	primary ('.'^ ID )*
> > 	;
> >
> > primary
> > 	:	ID
> > 	;
> >
> > However, I can't get the same tree using tree rewrite rules. Is it  
> > possible at all? If so, could somebody please show me how?
> >
> > Thanks
> > Simon
> >
> > PS: ultimately, I want to build an AST for a Java like language  
> > (method calls, field access, ...)
> > -- 
> > GMX Kostenlose Spiele: Einfach online spielen und Spa? haben mit  
> > Pastry Passion!
> > http://games.entertainment.gmx.net/de/entertainment/games/free/puzzle/6169196
> >
> > List: http://www.antlr.org/mailman/listinfo/antlr-interest
> > Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
> 
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
> 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20081025/35d9338f/attachment.html 

From cocoa at gmx.ch  Sat Oct 25 14:36:49 2008
From: cocoa at gmx.ch (Simon)
Date: Sat, 25 Oct 2008 23:36:49 +0200
Subject: [antlr-interest] Tree Operators vs. Tree Rewrite Rules
In-Reply-To: <20081025104025.31137gmx1@mx100.gmx.net>
References: <20081022130710.240270@gmx.net>
	<803C418B-DAA0-4EF6-A2E8-7A086F2E726C@gmx.ch>
	<20081025104025.31137gmx1@mx100.gmx.net>
Message-ID: <5D6256DD-BB0F-4328-AD0A-55F751162DC4@gmx.ch>



On Oct 25, 2008, at 12:40 PM, Gavin Lambert wrote:

> At 22:57 25/10/2008, Simon wrote:
> >Is it so obvious? Or is it simply not possible to achieve
> the same thing using rewrite rules?
>
> It is possible, and it's not quite so obvious (though it has been  
> mentioned a few times in the archives).  But messages sometimes slip  
> through the cracks :)
>

Yep, RTFM... http://www.antlr.org/wiki/display/ANTLR3/Tree 
+construction at the top...

> >> ^('.' ^('.' 'a' 'b') 'c')
> [...]
> >> expr
> >> 	:	primary ('.'^ ID )*
> >> 	;
> [...]
> >> However, I can't get the same tree using tree rewrite
> >> rules. Is it possible at all? If so, could somebody
> >> please show me how?
>
> expr
>  :  (primary -> primary)
>     ('.' ID -> ^('.' $expr ID))*
>  ;

Ok, thank you very much, that did it.

The answer leads to the next question. I've tried to split the rule  
into an additional selector subrule, but without success.

expr
     :    primary selector*
     ;

selector
     :    '.' ID
     |    '[' expr ']'
     ;

I went one step further and added array access to the selector (to  
make the example a bit more realistic).

My head is starting to spin from all those tree rewrite rules. If I'm  
again missing the obvious, please just send me a link to the correct  
information. This time, I've at least searched the list archive and  
read the manual... Or even better, if somebody has a tree grammar for  
Java expressions (that builds the tree as laid out in my original  
post), could you please send it to me?

Simon


From gerald at certiv.net  Sat Oct 25 19:02:24 2008
From: gerald at certiv.net (Gerald Rosenberg)
Date: Sat, 25 Oct 2008 19:02:24 -0700
Subject: [antlr-interest] New version of AntlrDT is available
Message-ID: <200810260202.m9Q22cfr022967@zinc.newtechlaw.com>

Just published AntlrDT 0.5.0 at http://www.certiv.net/projects/antlrdt.html

This version:
Uses Antlr 3.1.1 in both the editor and builder
Uses StringTemplate 3.2
Uses DLTK 0.95.1 -- the current (Ganymede standard) DLTK release
Adds a grammar Launcher -- any parser rule can be selected as the 
initial rule to run.
Improves syntax directed editing actions.
Fixed support for split lexer/parser grammars.
Fixed a bunch of bugs

Enjoy.


From tcurdt at vafer.org  Sun Oct 26 06:25:38 2008
From: tcurdt at vafer.org (Torsten Curdt)
Date: Sun, 26 Oct 2008 14:25:38 +0100
Subject: [antlr-interest] New Maven Artifiacts
In-Reply-To: <1224863716.4489.566.camel@jimi>
References: <1224863716.4489.566.camel@jimi>
Message-ID: <6c59d89a0810260625p56d63d85oa158d75c49722114@mail.gmail.com>

Hey Jim,

Thanks for looking into that.

> If you are interested in this happening, please visit that JIRA report and
> vote for it. I don't know how much that influences the upload but it may
> well help to get someone to upload it quicker than otherwise.

Upload requests are served on a volunteer basis. So there isn't really
a schedule or priority queue. What helps though is to poke the folks
(that have access) at #maven on irc.codehaus.org.

> However, all being well, we will soon have our own ANTLR repository for Ter
> to deploy to, which will be auto synced to Maven and then as new versions of
> ANTLR are released, they should automatically show up in Maven.

Great news. That's certainly easier. Just wrote a blog post on how to
set this up:

http://vafer.org/blog/20081026142413

cheers
--
Torsten

From jimi at temporal-wave.com  Sun Oct 26 10:14:00 2008
From: jimi at temporal-wave.com (Jim Idle)
Date: Sun, 26 Oct 2008 10:14:00 -0700
Subject: [antlr-interest] New Maven Artifiacts
In-Reply-To: <6c59d89a0810260625p56d63d85oa158d75c49722114@mail.gmail.com>
References: <1224863716.4489.566.camel@jimi>
	<6c59d89a0810260625p56d63d85oa158d75c49722114@mail.gmail.com>
Message-ID: <1225041240.4826.49.camel@jimi>

On Sun, 2008-10-26 at 14:25 +0100, Torsten Curdt wrote:

> Hey Jim,
> 
> Thanks for looking into that.
> 
> > If you are interested in this happening, please visit that JIRA report and
> > vote for it. I don't know how much that influences the upload but it may
> > well help to get someone to upload it quicker than otherwise.
> 
> Upload requests are served on a volunteer basis. So there isn't really
> a schedule or priority queue. What helps though is to poke the folks
> (that have access) at #maven on irc.codehaus.org.


I see - I don't have access to that, but perhaps you can be an advocate
for this? In fact I have got the 3.1 and 3.1.1 stuff ready and published
on my own repository (ready for the real ANTLR one), so if no one does
the upload, then perhaps I will be ready for a repository sync anyway.

> 
> > However, all being well, we will soon have our own ANTLR repository for Ter
> > to deploy to, which will be auto synced to Maven and then as new versions of
> > ANTLR are released, they should automatically show up in Maven.
> 
> Great news. That's certainly easier. Just wrote a blog post on how to
> set this up:
> 
> http://vafer.org/blog/20081026142413


I'll check this out - I have it all working locally, and today I am
going to see if the antlr.org stuff that Ter set up for me is also
working. I have also updated Dave Holdroyd's plugin and am going to make
a progammable interface to the tool so that we don't have to keep
copying code from Tool.java into the plugin - much neater obviously. 

Though there is a bit of a learning curce to set this up, I htink that
as a user of the tool sets it is really a good choice of build
environments (learning curve is a lot shorter if you are just
configuring a build and not making artifacts yourself).

Jim



> 
> cheers
> --
> Torsten
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20081026/b90921e8/attachment.html 

From tcurdt at vafer.org  Sun Oct 26 10:41:16 2008
From: tcurdt at vafer.org (Torsten Curdt)
Date: Sun, 26 Oct 2008 18:41:16 +0100
Subject: [antlr-interest] New Maven Artifiacts
In-Reply-To: <1225041240.4826.49.camel@jimi>
References: <1224863716.4489.566.camel@jimi>
	<6c59d89a0810260625p56d63d85oa158d75c49722114@mail.gmail.com>
	<1225041240.4826.49.camel@jimi>
Message-ID: <6c59d89a0810261041l3476e810nd61f224f3fef0f35@mail.gmail.com>

> Upload requests are served on a volunteer basis. So there isn't really
> a schedule or priority queue. What helps though is to poke the folks
> (that have access) at #maven on irc.codehaus.org.
>
> I see - I don't have access to that, but perhaps you can be an advocate for
> this?

Anyone should be allowed to join the IRC channel :) But I can
certainly do some poking myself.

> In fact I have got the 3.1 and 3.1.1 stuff ready and published on my
> own repository (ready for the real ANTLR one), so if no one does the upload,
> then perhaps I will be ready for a repository sync anyway.

True. I you are ready for the repo sync soon then that might be the
better thing to push for.

> Great news. That's certainly easier. Just wrote a blog post on how to
> set this up:
>
> http://vafer.org/blog/20081026142413
>
> I'll check this out - I have it all working locally, and today I am going to
> see if the antlr.org stuff that Ter set up for me is also working.

Great.

> Though there is a bit of a learning curce to set this up, I htink that as a
> user of the tool sets it is really a good choice of build environments
> (learning curve is a lot shorter if you are just configuring a build and not
> making artifacts yourself).

Just let me know if you run into problems.

cheers
--
Torsten

From cocoa at gmx.ch  Sun Oct 26 14:25:43 2008
From: cocoa at gmx.ch (Simon)
Date: Sun, 26 Oct 2008 22:25:43 +0100
Subject: [antlr-interest] Tree Operators vs. Tree Rewrite Rules
In-Reply-To: <5D6256DD-BB0F-4328-AD0A-55F751162DC4@gmx.ch>
References: <20081022130710.240270@gmx.net>
	<803C418B-DAA0-4EF6-A2E8-7A086F2E726C@gmx.ch>
	<20081025104025.31137gmx1@mx100.gmx.net>
	<5D6256DD-BB0F-4328-AD0A-55F751162DC4@gmx.ch>
Message-ID: <82048031-6A73-402F-93C2-D62AF44B09BA@gmx.ch>

>
> Ok, thank you very much, that did it.
>
> The answer leads to the next question. I've tried to split the rule
> into an additional selector subrule, but without success.
>
> expr
>     :    primary selector*
>     ;
>
> selector
>     :    '.' ID
>     |    '[' expr ']'
>     ;
>
> I went one step further and added array access to the selector (to
> make the example a bit more realistic).
>
> My head is starting to spin from all those tree rewrite rules. If I'm
> again missing the obvious, please just send me a link to the correct
> information. This time, I've at least searched the list archive and
> read the manual... Or even better, if somebody has a tree grammar for
> Java expressions (that builds the tree as laid out in my original
> post), could you please send it to me?

Here is the answer to my own question. After many unsuccessful tries I  
got it...

expr
  :   (primary -> primary)
      (selector[$expr.tree] -> ^(selector))*
  ;
	
primary
  :   identifier
  ;

selector[Object ast]
  :   '.' identifier -> ^(CALL {$ast} identifier)
  |   '[' INT ']' -> ^(ARRIDX {$ast} INT)
  ;

... I need some additional time to figure out how exactly the tree is  
constructed. Again, any help is appreciated.

Thanks
Simon



From geoff_hendrey at yahoo.com  Sun Oct 26 17:02:53 2008
From: geoff_hendrey at yahoo.com (Geoff hendrey)
Date: Sun, 26 Oct 2008 17:02:53 -0700 (PDT)
Subject: [antlr-interest] how to bail on MissingTokenException
Message-ID: <638862.12767.qm@web31813.mail.mud.yahoo.com>

Hi,

I recently upgraded to ANTLR 3.1.1.

I want to know how to handle MissingTokenException, so that the paring throws a RecognitionException when there is a missing token.

My grammar file aready has this:

@members{
protected void mismatch(IntStream input, int ttype, BitSet follow)throws RecognitionException{
    throw new MismatchedTokenException(ttype, input);
}    
public Object recoverFromMismatchedSet(IntStream input, RecognitionException e, BitSet follow)throws RecognitionException{
    throw e;
}

}
@rulecatch{
catch(RecognitionException e){
    throw e;
}

Can you tell me what to add so that MissingTokenException will throw a RecognitionException and abort the parsing?

(also, this is a bit of a tangent, but why do you document the ANTLR runtime API's Java Classes using Doxygen? I find it much harder to read and navigate than JavaDoc. Are JavaDocs available?)

-geoff
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20081026/8643706b/attachment.html 

From bgedik at gmail.com  Sun Oct 26 17:52:44 2008
From: bgedik at gmail.com (=?ISO-8859-9?Q?Bu=F0ra_Gedik?=)
Date: Sun, 26 Oct 2008 20:52:44 -0400
Subject: [antlr-interest] C Runtime problem with $channel=HIDDEN and SKIP()
Message-ID: <e577fe370810261752o234b9c1as92a1fb6605aa4d23@mail.gmail.com>

Hi (Jim),
With the C runtime when using $channel=HIDDEN the hidden tokens DO NOT
appear when printing a rule with $text->chars, whereas with the Java runtime
they appear (which I assume is the expected behaviour). The problem can be
solved by using SKIP() instead with the C runtime, but the SKIP function has
a bug (I saw it the official list of bugs), it messes up the next token
(includes the spaces).

I'm using 3.1 (not 3.1.1). Any plans on fixing these? Or, are they fixed in
3.1.1?

Cheers,
-bugra
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20081026/50fd7c38/attachment.html 

From bgedik at gmail.com  Sun Oct 26 18:41:35 2008
From: bgedik at gmail.com (=?ISO-8859-9?Q?Bu=F0ra_Gedik?=)
Date: Sun, 26 Oct 2008 21:41:35 -0400
Subject: [antlr-interest] C Runtime problem with $channel=HIDDEN and
	SKIP()
In-Reply-To: <e577fe370810261752o234b9c1as92a1fb6605aa4d23@mail.gmail.com>
References: <e577fe370810261752o234b9c1as92a1fb6605aa4d23@mail.gmail.com>
Message-ID: <e577fe370810261841t260940e9h4e2da440646de5be@mail.gmail.com>

Adding the line "LEXSTATE->tokenStartCharIndex += $text->size -1;" after the
SKIP() fixes the SKIP bug.
But then, the behavior of SKIP and $channel=HIDDEN become the same with
respect to my original problem, that is when I print the rule text using
$text->chars, I do not get the hidden or skipped tokens. This seems to be
the expected behavior with skip() in Java runtime. However, with
$channel=hidden in Java runtime, I get the hidden chars in the text of the
rule, using $text, which is inconsistent with the C runtime.

Cheers,
-bugra


On Sun, Oct 26, 2008 at 8:52 PM, Bu?ra Gedik <bgedik at gmail.com> wrote:

> Hi (Jim),
> With the C runtime when using $channel=HIDDEN the hidden tokens DO NOT
> appear when printing a rule with $text->chars, whereas with the Java runtime
> they appear (which I assume is the expected behaviour). The problem can be
> solved by using SKIP() instead with the C runtime, but the SKIP function has
> a bug (I saw it the official list of bugs), it messes up the next token
> (includes the spaces).
>
> I'm using 3.1 (not 3.1.1). Any plans on fixing these? Or, are they fixed in
> 3.1.1?
>
> Cheers,
> -bugra
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20081026/70d1b0fb/attachment.html 

From bgedik at gmail.com  Sun Oct 26 22:40:45 2008
From: bgedik at gmail.com (=?ISO-8859-9?Q?Bu=F0ra_Gedik?=)
Date: Mon, 27 Oct 2008 01:40:45 -0400
Subject: [antlr-interest] C Runtime problem with $channel=HIDDEN and
	SKIP()
In-Reply-To: <e577fe370810261841t260940e9h4e2da440646de5be@mail.gmail.com>
References: <e577fe370810261752o234b9c1as92a1fb6605aa4d23@mail.gmail.com>
	<e577fe370810261841t260940e9h4e2da440646de5be@mail.gmail.com>
Message-ID: <e577fe370810262240p30e5c0atc37577a4f3d3fe71@mail.gmail.com>

Apparently, putting tstream->discardOffChannel = ANTLR3_FALSE;
into the driver program solves the issue with the hidden tokens not showing
up in $text->chars. However, I think it will be better to keep the defaults
same with the other runtimes.

2008/10/26 Bu?ra Gedik <bgedik at gmail.com>

> Adding the line "LEXSTATE->tokenStartCharIndex += $text->size -1;" after
> the SKIP() fixes the SKIP bug.
> But then, the behavior of SKIP and $channel=HIDDEN become the same with
> respect to my original problem, that is when I print the rule text using
> $text->chars, I do not get the hidden or skipped tokens. This seems to be
> the expected behavior with skip() in Java runtime. However, with
> $channel=hidden in Java runtime, I get the hidden chars in the text of the
> rule, using $text, which is inconsistent with the C runtime.
>
> Cheers,
> -bugra
>
>
>
> On Sun, Oct 26, 2008 at 8:52 PM, Bu?ra Gedik <bgedik at gmail.com> wrote:
>
>> Hi (Jim),
>> With the C runtime when using $channel=HIDDEN the hidden tokens DO NOT
>> appear when printing a rule with $text->chars, whereas with the Java runtime
>> they appear (which I assume is the expected behaviour). The problem can be
>> solved by using SKIP() instead with the C runtime, but the SKIP function has
>> a bug (I saw it the official list of bugs), it messes up the next token
>> (includes the spaces).
>>
>> I'm using 3.1 (not 3.1.1). Any plans on fixing these? Or, are they fixed
>> in 3.1.1?
>>
>> Cheers,
>> -bugra
>>
>>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20081027/1efefd2f/attachment.html 

From dennis at conus.info  Mon Oct 27 01:32:29 2008
From: dennis at conus.info (Dennis Yurichev)
Date: Mon, 27 Oct 2008 10:32:29 +0200
Subject: [antlr-interest] Build grammar automatically?
Message-ID: <49057C9D.9090305@conus.info>

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Hi!

Sorry if my question is not suitable for this list.

Let's say I have a huge text files written on *some*programming*language*.
It is possible somehow to build grammar automatically from these texts?
Theoretically, these texts represent all possible language constructs in
various forms.
It will be OK if output grammar be in need of some rework.
So, is there anything usable?

- --
My PGP public key: http://yurichev.com/dennis.yurichev.asc
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.8 (MingW32)
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org

iEYEARECAAYFAkkFfJ0ACgkQ1YPmFmJG++N5lgCfdygGPsgLJjkTXtSz3w3q0W82
0KIAnj1gpx+vp9sQC2UieRT6W1ra0iKP
=nWUX
-----END PGP SIGNATURE-----

From jaluber at gmx.de  Mon Oct 27 04:22:20 2008
From: jaluber at gmx.de (Johannes Luber)
Date: Mon, 27 Oct 2008 12:22:20 +0100
Subject: [antlr-interest] Build grammar automatically?
In-Reply-To: <49057C9D.9090305@conus.info>
References: <49057C9D.9090305@conus.info>
Message-ID: <4905A46C.1070404@gmx.de>

Dennis Yurichev schrieb:
> -----BEGIN PGP SIGNED MESSAGE-----
> Hash: SHA1
> 
> Hi!
> 
> Sorry if my question is not suitable for this list.
> 
> Let's say I have a huge text files written on *some*programming*language*.
> It is possible somehow to build grammar automatically from these texts?
> Theoretically, these texts represent all possible language constructs in
> various forms.
> It will be OK if output grammar be in need of some rework.
> So, is there anything usable?

Sounds like machine learning. I don't know if one can actually create
grammars via the use of such a special program or if one can, if you
really manage to get a large enough sample to derive the correct
structures (after all, every language has some obscure constructs). I
can imagine that the machine-created grammar allows disallowed
constructs and disallows allowed constructs and you have to find those
cases. But even if you get a working grammar out of it, it won't be
actually human-readable because the rules don't have sensible names.

Anyways, ANTLR isn't suitable for this task, but may be actually faster
to create grammars than your proposal as the rework is in part doing
things, which one would do using ANTLR. In fact, starting with an
official grammar is far easier than inventing your own.

Johannes
> 
> - --
> My PGP public key: http://yurichev.com/dennis.yurichev.asc
> -----BEGIN PGP SIGNATURE-----
> Version: GnuPG v1.4.8 (MingW32)
> Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org
> 
> iEYEARECAAYFAkkFfJ0ACgkQ1YPmFmJG++N5lgCfdygGPsgLJjkTXtSz3w3q0W82
> 0KIAnj1gpx+vp9sQC2UieRT6W1ra0iKP
> =nWUX
> -----END PGP SIGNATURE-----
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
> 


From sebastien.laigre at gmail.com  Mon Oct 27 06:47:28 2008
From: sebastien.laigre at gmail.com (=?ISO-8859-1?Q?S=E9bastien_Laigre?=)
Date: Mon, 27 Oct 2008 14:47:28 +0100
Subject: [antlr-interest] Trying to compile a program which uses ANTLR 2.7.7
	on MSVC
Message-ID: <842c20050810270647r324807edv7e005e8a5bc9c696@mail.gmail.com>

Hi,

At the beginning I had a program which uses ANTLR 2.7.6 (lexer and parser
are also generated using 2.7.6 version). Under linux OS they are generated
and the program compiles and works. But as soon as I try to compile under
windows (XP) and visual C++ (2008), I have plenty of link errors. I read
posts of people who had a problems with 2.7.6 version, so I tried 2.7.7
version(lexer and parser are the same than the last ones). But I still can
not compile ! When I use the \NODEFAULTLIB option, My program can not find
cout << etc. When I do not use it, I have conflicts between antlr and
microsoft libraries...
So, do I have to use this option or not ? Then what I have to do because
there is still a problem ?Do I have to include dlls which are in the lib/
folder ?

Thank you in advance.

S?bastien
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20081027/b20bf929/attachment.html 

From alex.carpe at gmail.com  Mon Oct 27 07:53:07 2008
From: alex.carpe at gmail.com (Alex Carpentieri)
Date: Mon, 27 Oct 2008 15:53:07 +0100
Subject: [antlr-interest] C++ tree parser
Message-ID: <1225119187.6297.27.camel@alex-laptop>

Hi,

I'm a new bie and i'm searching something about tree parser for c++
grammar. Has someone use some c++ grammars? Where can I get some
documentation or examples for their use?

Best regards,

Alex Carpentieri


From jimi at temporal-wave.com  Mon Oct 27 07:57:44 2008
From: jimi at temporal-wave.com (Jim Idle)
Date: Mon, 27 Oct 2008 07:57:44 -0700
Subject: [antlr-interest] C Runtime problem with $channel=HIDDEN and
 SKIP()
In-Reply-To: <e577fe370810261752o234b9c1as92a1fb6605aa4d23@mail.gmail.com>
References: <e577fe370810261752o234b9c1as92a1fb6605aa4d23@mail.gmail.com>
Message-ID: <1225119464.4826.122.camel@jimi>

On Sun, 2008-10-26 at 20:52 -0400, Bu?ra Gedik wrote:

> Hi (Jim),
> 
> 
> 
> With the C runtime when using $channel=HIDDEN the hidden tokens DO NOT
> appear when printing a rule with $text->chars, 


As in the text for the whole rule I presume you mean. OK - this must be
some change Ter did to Java that I did not pick up.

> whereas with the Java runtime they appear (which I assume is the
> expected behaviour). The problem can be solved by using SKIP() instead
> with the C runtime, but the SKIP function has a bug (I saw it the
> official list of bugs), it messes up the next token (includes the
> spaces).
> 
> 
> I'm using 3.1 (not 3.1.1). Any plans on fixing these? Or, are they
> fixed in 3.1.1?


I will be doing some bug fixes and catchups this week, so I will make
sure I look at both of these.

Jim
> 
> 
> Cheers,
> -bugra
> 
> 
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
> 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20081027/bf1f4dd6/attachment.html 

From jimi at temporal-wave.com  Mon Oct 27 08:00:51 2008
From: jimi at temporal-wave.com (Jim Idle)
Date: Mon, 27 Oct 2008 08:00:51 -0700
Subject: [antlr-interest] C Runtime problem with $channel=HIDDEN and
 SKIP()
In-Reply-To: <e577fe370810261841t260940e9h4e2da440646de5be@mail.gmail.com>
References: <e577fe370810261752o234b9c1as92a1fb6605aa4d23@mail.gmail.com>
	<e577fe370810261841t260940e9h4e2da440646de5be@mail.gmail.com>
Message-ID: <1225119651.4826.130.camel@jimi>

On Sun, 2008-10-26 at 21:41 -0400, Bu?ra Gedik wrote:

> Adding the line "LEXSTATE->tokenStartCharIndex += $text->size
> -1;" after the SKIP() fixes the SKIP bug. 
> 
> 
> 
> But then, the behavior of SKIP and $channel=HIDDEN become the same
> with respect to my original problem, that is when I print the rule
> text using $text->chars, I do not get the hidden or skipped tokens.
> This seems to be the expected behavior with skip() in Java runtime.
> However, with $channel=hidden in Java runtime, I get the hidden chars
> in the text of the rule, using $text, which is inconsistent with the C
> runtime.



Though generally the text for the whole rule isn't that useful, I can
see that it might be in some cases. I will review the Java code and see
if this was deliberately changed to do this or is just a side effect. I
can see arguments for both, but when you get the start and end span in
an AST node, then it includes the HIDDEN tokens, so it probably should
do so in the rule text.

Jim

> 
> 
> Cheers,
> -bugra
> 
> 
> 
> 
> 
> On Sun, Oct 26, 2008 at 8:52 PM, Bu?ra Gedik <bgedik at gmail.com> wrote:
> 
>         Hi (Jim),
>         
>         
>         
>         With the C runtime when using $channel=HIDDEN the hidden
>         tokens DO NOT appear when printing a rule with $text->chars,
>         whereas with the Java runtime they appear (which I assume is
>         the expected behaviour). The problem can be solved by using
>         SKIP() instead with the C runtime, but the SKIP function has a
>         bug (I saw it the official list of bugs), it messes up the
>         next token (includes the spaces).
>         
>         
>         I'm using 3.1 (not 3.1.1). Any plans on fixing these? Or, are
>         they fixed in 3.1.1?
>         
>         
>         Cheers,
>         -bugra
>         
>         
> 
> 
> 
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
> 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20081027/72ff1b23/attachment.html 

From qwizv9b02 at sneakemail.com  Mon Oct 27 08:10:53 2008
From: qwizv9b02 at sneakemail.com (Hendrik Maryns)
Date: Mon, 27 Oct 2008 16:10:53 +0100
Subject: [antlr-interest] Newbie: some advice on setup
Message-ID: <ge4llu$3h6$1@ger.gmane.org>

Hi,

I want to parse some lisp-like formulas given by the user into my own
Java Formulas.  I already wrote a grammer in antlr which is so easy that
is should be correct, but now I do not know how to continue.  How would
you go from this?  Create an AST and write a TreeParser or introduce
formula constructors in the parser grammar directly?

Let me give some examples.

(in x X) should result in new Inclusion(x, X), where x and X are
variables, which are either newly created or retrieved from a map if
they have occurred elsewhere in the formula.

(word x Einf?hrung) should result in new Inclusion(x, new
Predicate("Einf?hrung")), with the same rule for x as above.  Maybe I
should define a separate WordFormula instead of reusing Inclusion, but
that is another matter.

(=> formula1 formula2) should result in new Implication(formula1,
formula2), where of course f1 and f2 are to be parsed recursively.

And so on.  Some rules for atomic formulas, and the usual stuff for the
logical connectors.

My grammar I have now looks as follows:

grammar fsq;

options {
	language = Java;
}

tokens {
// LISP
  OPEN = '(';
  CLOSE = ')';
// labels
  FUNCTION = 'fct';
  CATEGORY = 'cat';
  WORD = 'word';
  LEMMA = 'lemma';
  MORPHOLOGY = 'morph';

  SENTENCE = 'sent';
// atomic
  CONTAINMENT = 'in';
  EQUALITY = '=';
  PROPER_DOMINANCE = '>+';
  IMMEDIATE_DOMINANCE = '>';
  DOMINANCE = '>>';
  IMMEDIATE_PRECEDENCE = '.';
  PRECEDENCE = '..';
// unary
  NEGATION = '!';
// binary
  IMPLICATION = '->';
  EQUIVALENCE = '<->';
// n-ary
  DISJUNCTION = '|';
  CONJUNCTION = '&';
// quantification
  SECOND_ORDER_UNIVERSAL = 'A2';
  SECOND_ORDER_EXISTENTIAL = 'E2';
  FIRST_ORDER_UNIVERSAL = 'A1';
  FIRST_ORDER_EXISTENTIAL = 'E1';
}

@header { package de.uni_tuebingen.sfb.lichtenstein.formulas.parsing; }

@lexer::header { package
de.uni_tuebingen.sfb.lichtenstein.formulas.parsing; }

@members {
}

/*------------------------------------------------------------------
 * PARSER RULES
 *------------------------------------------------------------------*/

/**
 * One formula on each line.
 */
formulaList : ( formula NEWLINE? )* EOF ;

/**
 * A formula is enclosed by braces.
 */
formula : OPEN body CLOSE ;

body : label | atomic | unary | binary | n_ary | quantor ;

// label formulas
label : labelHead WHITESPACE VARIABLE WHITESPACE LABEL ;

labelHead : FUNCTION | CATEGORY | WORD | LEMMA | MORPHOLOGY ;

// atomic relations
atomic : atomicHead WHITESPACE VARIABLE WHITESPACE VARIABLE ;

atomicHead : CONTAINMENT | EQUALITY | PROPER_DOMINANCE |
IMMEDIATE_DOMINANCE | DOMINANCE | IMMEDIATE_PRECEDENCE | PRECEDENCE ;

// unary junctors
unary : unaryHead formula ;

unaryHead : NEGATION ;

// binary junctors
binary : binaryHead formula formula ;

binaryHead : IMPLICATION | EQUIVALENCE ;

// n-ary junctors
n_ary : n_aryHead formula+ ;

n_aryHead : CONJUNCTION | DISJUNCTION ;

// quantors
quantor : quantorHead VARIABLE formula ;

quantorHead : FIRST_ORDER_EXISTENTIAL | FIRST_ORDER_UNIVERSAL |
SECOND_ORDER_EXISTENTIAL | SECOND_ORDER_UNIVERSAL ;

/*------------------------------------------------------------------
 * LEXER RULES
 *------------------------------------------------------------------*/

WHITESPACE : ( '\t' | ' ' )+ ;

NEWLINE: ('\r'? '\n')+;

VARIABLE : ( DIGIT | LETTER )+ ;

fragment DIGIT  : '0'..'9' ;
fragment LETTER : LOWERCASE | UPPERCASE ;
fragment LOWERCASE : 'a'..'z' ;
fragment UPPERCASE : 'A'..'Z' ;

LABEL : ~(')')+ ;


Other remarks most welcome also, of course!

Cheers, H.
-- 
Hendrik Maryns
http://tcl.sfs.uni-tuebingen.de/~hendrik/
==================
Ask smart questions, get good answers:
http://www.catb.org/~esr/faqs/smart-questions.html

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 257 bytes
Desc: OpenPGP digital signature
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20081027/f9d00d20/attachment.bin 

From laurent.caillette at gmail.com  Mon Oct 27 10:25:37 2008
From: laurent.caillette at gmail.com (Laurent Caillette)
Date: Mon, 27 Oct 2008 18:25:37 +0100
Subject: [antlr-interest] Only one import level with ANTLR-3.1.1?
Message-ID: <3b7c64070810271025rf8f8c29p9a698a6b7eedc953@mail.gmail.com>

Hi all,

The import feature of ANTLR is great but I've found what seems to be a
bug with ANTLR-3.1.1.

Consider we have:
- A lexer grammar L.
- A parser grammar P1, importing L.
- A parser grammar P2, importing P1 (and L, but it doesn't matter here).

As a pure parser grammar, ANTLR doesn't let P1 import L. It produces
errors like this:
  error(103): P1.g:6:0: parser rule letter not allowed in lexer
The message denotes some kind of confusion because P1 is the *parser*,
so parser rules should be allowed here.

If I declare P1 as a combined grammar, ANTLR generates the code for P1
but fails on P2 as import of combined grammars is not supported. So I
see no way to go beyond one import level.

I can send some example code if needed but this should be easy to reproduce.

Does anybody know a workaround for this?

Regards,

c.

From parrt at cs.usfca.edu  Mon Oct 27 10:42:14 2008
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon, 27 Oct 2008 10:42:14 -0700
Subject: [antlr-interest] Only one import level with ANTLR-3.1.1?
In-Reply-To: <3b7c64070810271025rf8f8c29p9a698a6b7eedc953@mail.gmail.com>
References: <3b7c64070810271025rf8f8c29p9a698a6b7eedc953@mail.gmail.com>
Message-ID: <6A5A2CDC-9BFB-49B8-8EF2-A8317BE14E05@cs.usfca.edu>


On Oct 27, 2008, at 10:25 AM, Laurent Caillette wrote:

> Hi all,
>
> The import feature of ANTLR is great but I've found what seems to be a
> bug with ANTLR-3.1.1.
>
> Consider we have:
> - A lexer grammar L.
> - A parser grammar P1, importing L.
> - A parser grammar P2, importing P1 (and L, but it doesn't matter  
> here).
>
> As a pure parser grammar, ANTLR doesn't let P1 import L. It produces
> errors like this:

Parsers cannot import Lexers. you should be able to import a lexer  
into a combined grammar, however. There is currently a limitation I  
think that you cannot import a combined into a combined.

Ter
>
>  error(103): P1.g:6:0: parser rule letter not allowed in lexer
> The message denotes some kind of confusion because P1 is the *parser*,
> so parser rules should be allowed here.
>
> If I declare P1 as a combined grammar, ANTLR generates the code for P1
> but fails on P2 as import of combined grammars is not supported. So I
> see no way to go beyond one import level.
>
> I can send some example code if needed but this should be easy to  
> reproduce.
>
> Does anybody know a workaround for this?
>
> Regards,
>
> c.
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>


From laurent.caillette at gmail.com  Mon Oct 27 12:49:36 2008
From: laurent.caillette at gmail.com (Laurent Caillette)
Date: Mon, 27 Oct 2008 20:49:36 +0100
Subject: [antlr-interest] Imports + headers with ANTLR-3.1.1
Message-ID: <3b7c64070810271249l64bec8ear3fed294fa53e878c@mail.gmail.com>

Hi all again,

I've discovered a strange behavior with imports and headers.
Considering the two following grammars:

- - - - - - - - - - - - -
parser grammar P1 ;

...

- - - - - - - - - - - - -
grammar P2 ;
import P1 ;

@parser::header {
package acme ;
}

...

- - - - - - - - - - - - -

As expected, ANTLR generates three java files:

P2.java: header present.
P2_P1.java: header present.
P1.java: missing header!

If I add the missing header to P1.g then ANTLR doesn't like it:
>> error(144): P1.g:27:10: redefinition of header action

I guess that two possibly different headers make the choice hard for
generating the P2_P1.java file. Would it be reasonable to "propagate"
the header of the root grammar to all the imported ones?

ANTLR rocks,

c.

From laurent.caillette at gmail.com  Mon Oct 27 14:30:31 2008
From: laurent.caillette at gmail.com (Laurent Caillette)
Date: Mon, 27 Oct 2008 22:30:31 +0100
Subject: [antlr-interest] Duplicate members when generating code with 2
	import levels in Java with ANTLR-3.1.1
Message-ID: <3b7c64070810271430h29c4a0a6kf975787395e34edf@mail.gmail.com>

Hi all,

Here is a composite grammar C which imports parser P2 which imports parser P1:

- - - - - - - - - - - - - - - - - -
lexer grammar L ;

LETTER : 'a'..'z' ;
SPACE : ' ' ;

- - - - - - - - - - - - - - - - - -
parser grammer P1 ;

letter : LETTER ;
spaces : SPACE+ ;

- - - - - - - - - - - - - - - - - -
parser grammer P2 ;
import P1 ;

letters : letter+ ;

- - - - - - - - - - - - - - - - - -
grammar C ;
import L, P1, P2 ;

stuff : ( letters spaces )+ ;

- - - - - - - - - - - - - - - - - -


Generating code with ANTLR-3.1.1 I get this in CParser.java:

    // delegates
    public C_P1 gP1;
    public C_P2_P1 gP1;
    public C_P2 gP2;

Ooops ! gP1 appears twice and causes compilation errors.

Regards,

c.

From parrt at cs.usfca.edu  Mon Oct 27 14:34:08 2008
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon, 27 Oct 2008 14:34:08 -0700
Subject: [antlr-interest] Duplicate members when generating code with 2
	import levels in Java with ANTLR-3.1.1
In-Reply-To: <3b7c64070810271430h29c4a0a6kf975787395e34edf@mail.gmail.com>
References: <3b7c64070810271430h29c4a0a6kf975787395e34edf@mail.gmail.com>
Message-ID: <AC0BBCDC-0506-43D9-A300-89DC560FF7F0@cs.usfca.edu>

You are importing a grammar more than once into C.  probably not what  
you want; the error is correct I guess.
Ter
On Oct 27, 2008, at 2:30 PM, Laurent Caillette wrote:

> Hi all,
>
> Here is a composite grammar C which imports parser P2 which imports  
> parser P1:
>
> - - - - - - - - - - - - - - - - - -
> lexer grammar L ;
>
> LETTER : 'a'..'z' ;
> SPACE : ' ' ;
>
> - - - - - - - - - - - - - - - - - -
> parser grammer P1 ;
>
> letter : LETTER ;
> spaces : SPACE+ ;
>
> - - - - - - - - - - - - - - - - - -
> parser grammer P2 ;
> import P1 ;
>
> letters : letter+ ;
>
> - - - - - - - - - - - - - - - - - -
> grammar C ;
> import L, P1, P2 ;
>
> stuff : ( letters spaces )+ ;
>
> - - - - - - - - - - - - - - - - - -
>
>
> Generating code with ANTLR-3.1.1 I get this in CParser.java:
>
>    // delegates
>    public C_P1 gP1;
>    public C_P2_P1 gP1;
>    public C_P2 gP2;
>
> Ooops ! gP1 appears twice and causes compilation errors.
>
> Regards,
>
> c.
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>


From jimi at temporal-wave.com  Mon Oct 27 14:46:02 2008
From: jimi at temporal-wave.com (Jim Idle)
Date: Mon, 27 Oct 2008 14:46:02 -0700
Subject: [antlr-interest] Duplicate members when generating code with 2
 import levels in Java with ANTLR-3.1.1
In-Reply-To: <3b7c64070810271430h29c4a0a6kf975787395e34edf@mail.gmail.com>
References: <3b7c64070810271430h29c4a0a6kf975787395e34edf@mail.gmail.com>
Message-ID: <1225143962.4826.229.camel@jimi>

On Mon, 2008-10-27 at 22:30 +0100, Laurent Caillette wrote:

> Hi all,
> 
> Here is a composite grammar C which imports parser P2 which imports parser P1:
> 
> - - - - - - - - - - - - - - - - - -
> lexer grammar L ;
> 
> LETTER : 'a'..'z' ;
> SPACE : ' ' ;
> 
> - - - - - - - - - - - - - - - - - -
> parser grammer P1 ;
> 
> letter : LETTER ;
> spaces : SPACE+ ;
> 
> - - - - - - - - - - - - - - - - - -
> parser grammer P2 ;
> import P1 ;
> 
> letters : letter+ ;
> 
> - - - - - - - - - - - - - - - - - -
> grammar C ;
> import L, P1, P2 ;


You import P1 here and then in P2 you import P1 again, hence there are
two instances of P1 created and this is not allowed. Either do not
import P1 in P2, or just import P2 in C.

Jim

> 
> stuff : ( letters spaces )+ ;
> 
> - - - - - - - - - - - - - - - - - -
> 
> 
> Generating code with ANTLR-3.1.1 I get this in CParser.java:
> 
>     // delegates
>     public C_P1 gP1;
>     public C_P2_P1 gP1;

Tough of seemingly different type, they are both gP1.



>     public C_P2 gP2;
> 
> Ooops ! gP1 appears twice and causes compilation errors.
> 
> Regards,
> 
> c.
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
> 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20081027/bbc64582/attachment.html 

From laurent.caillette at gmail.com  Mon Oct 27 15:56:41 2008
From: laurent.caillette at gmail.com (Laurent Caillette)
Date: Mon, 27 Oct 2008 23:56:41 +0100
Subject: [antlr-interest] Duplicate members when generating code with 2
	import levels in Java with ANTLR-3.1.1
In-Reply-To: <1225143962.4826.229.camel@jimi>
References: <3b7c64070810271430h29c4a0a6kf975787395e34edf@mail.gmail.com>
	<1225143962.4826.229.camel@jimi>
Message-ID: <3b7c64070810271556g1894906el8fee3af3a4fd5ced@mail.gmail.com>

Ok, thanks a lot. I was not fully aware of how imports were resolved.

Terence, the sample I suggested is wrong, C should not import P1.
http://www.antlr.org/wiki/display/ANTLR3/Composite+Grammars#CompositeGrammars-Legalimports

I suggest to add a few words at the end of the introduction to explain
this behavior. Could be:
<<
[There is no need to copy any rules from the delegate grammars into
the root grammar.]
Because of this "whiteboard" approach, each grammar should be imported
only once. If B relies on rules in A, it should not import A if R
already imports B. Otherwise it would cause some duplicate members in
generated code.
>>

Regards,

c.

http://novelang.sf.net


On Mon, Oct 27, 2008 at 10:34 PM, Terence Parr <parrt at cs.usfca.edu> wrote:
> You are importing a grammar more than once into C.  probably not what you
> want; the error is correct I guess.


On Mon, Oct 27, 2008 at 10:46 PM, Jim Idle <jimi at temporal-wave.com> wrote:
> You import P1 here and then in P2 you import P1 again, hence there are two
> instances of P1 created and this is not allowed. Either do not import P1 in
> P2, or just import P2 in C.
>
> Jim

From parrt at cs.usfca.edu  Mon Oct 27 15:59:15 2008
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon, 27 Oct 2008 15:59:15 -0700
Subject: [antlr-interest] Duplicate members when generating code with 2
	import levels in Java with ANTLR-3.1.1
In-Reply-To: <3b7c64070810271556g1894906el8fee3af3a4fd5ced@mail.gmail.com>
References: <3b7c64070810271430h29c4a0a6kf975787395e34edf@mail.gmail.com>
	<1225143962.4826.229.camel@jimi>
	<3b7c64070810271556g1894906el8fee3af3a4fd5ced@mail.gmail.com>
Message-ID: <E8004DA3-C31F-4656-AFD8-D37B70628AFE@cs.usfca.edu>

Hi, can you sign up for the wiki and make the changes yourself?
Thanks!
Ter
On Oct 27, 2008, at 3:56 PM, Laurent Caillette wrote:

> Ok, thanks a lot. I was not fully aware of how imports were resolved.
>
> Terence, the sample I suggested is wrong, C should not import P1.
> http://www.antlr.org/wiki/display/ANTLR3/Composite+Grammars#CompositeGrammars-Legalimports
>
> I suggest to add a few words at the end of the introduction to explain
> this behavior. Could be:
> <<
> [There is no need to copy any rules from the delegate grammars into
> the root grammar.]
> Because of this "whiteboard" approach, each grammar should be imported
> only once. If B relies on rules in A, it should not import A if R
> already imports B. Otherwise it would cause some duplicate members in
> generated code.
>>>
>
> Regards,
>
> c.
>
> http://novelang.sf.net
>
>
> On Mon, Oct 27, 2008 at 10:34 PM, Terence Parr <parrt at cs.usfca.edu>  
> wrote:
>> You are importing a grammar more than once into C.  probably not  
>> what you
>> want; the error is correct I guess.
>
>
> On Mon, Oct 27, 2008 at 10:46 PM, Jim Idle <jimi at temporal-wave.com>  
> wrote:
>> You import P1 here and then in P2 you import P1 again, hence there  
>> are two
>> instances of P1 created and this is not allowed. Either do not  
>> import P1 in
>> P2, or just import P2 in C.
>>
>> Jim
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>


From lgcraymer at yahoo.com  Mon Oct 27 16:04:58 2008
From: lgcraymer at yahoo.com (Loring Craymer)
Date: Mon, 27 Oct 2008 16:04:58 -0700 (PDT)
Subject: [antlr-interest] Duplicate members when generating code with 2
	import levels in Java with ANTLR-3.1.1
Message-ID: <680442.28558.qm@web55908.mail.re3.yahoo.com>

Ter--

Just my 2 cents, but shouldn't duplicate imports be supported at the language level, as is true for Java, C#, and even C/C++ with the usual #ifdef wrapping?? It seems to me that leaving dependency management to the user limits the convenience of composition.

--Loring



----- Original Message ----
> From: Terence Parr <parrt at cs.usfca.edu>
> To: Laurent Caillette <laurent.caillette at gmail.com>
> Cc: antlr-interest Interest <antlr-interest at antlr.org>
> Sent: Monday, October 27, 2008 3:59:15 PM
> Subject: Re: [antlr-interest] Duplicate members when generating code with 2 import levels in Java with ANTLR-3.1.1
> 
> Hi, can you sign up for the wiki and make the changes yourself?
> Thanks!
> Ter
> On Oct 27, 2008, at 3:56 PM, Laurent Caillette wrote:
> 
> > Ok, thanks a lot. I was not fully aware of how imports were resolved.
> >
> > Terence, the sample I suggested is wrong, C should not import P1.
> > 
> http://www.antlr.org/wiki/display/ANTLR3/Composite+Grammars#CompositeGrammars-Legalimports
> >
> > I suggest to add a few words at the end of the introduction to explain
> > this behavior. Could be:
> > <<
> > [There is no need to copy any rules from the delegate grammars into
> > the root grammar.]
> > Because of this "whiteboard" approach, each grammar should be imported
> > only once. If B relies on rules in A, it should not import A if R
> > already imports B. Otherwise it would cause some duplicate members in
> > generated code.
> >>>
> >
> > Regards,
> >
> > c.
> >
> > http://novelang.sf.net
> >
> >
> > On Mon, Oct 27, 2008 at 10:34 PM, Terence Parr ? 
> > wrote:
> >> You are importing a grammar more than once into C.? probably not? 
> >> what you
> >> want; the error is correct I guess.
> >
> >
> > On Mon, Oct 27, 2008 at 10:46 PM, Jim Idle ? 
> > wrote:
> >> You import P1 here and then in P2 you import P1 again, hence there? 
> >> are two
> >> instances of P1 created and this is not allowed. Either do not? 
> >> import P1 in
> >> P2, or just import P2 in C.
> >>
> >> Jim
> >
> > List: http://www.antlr.org/mailman/listinfo/antlr-interest
> > Unsubscribe: 
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
> >
> 
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: 
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address



      

From parrt at cs.usfca.edu  Mon Oct 27 16:09:53 2008
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon, 27 Oct 2008 16:09:53 -0700
Subject: [antlr-interest] Duplicate members when generating code with 2
	import levels in Java with ANTLR-3.1.1
In-Reply-To: <680442.28558.qm@web55908.mail.re3.yahoo.com>
References: <680442.28558.qm@web55908.mail.re3.yahoo.com>
Message-ID: <3C0D3CD3-9425-4564-8FFD-3D2AEA6D01BA@cs.usfca.edu>


On Oct 27, 2008, at 4:04 PM, Loring Craymer wrote:

> Ter--
>
> Just my 2 cents, but shouldn't duplicate imports be supported at the  
> language level, as is true for Java, C#, and even C/C++ with the  
> usual #ifdef wrapping?  It seems to me that leaving dependency  
> management to the user limits the convenience of composition.

hi. just haven't had a chance to write the graph dependency checker,  
looking for duplicates. It should really give an error.

Ter

From lgcraymer at yahoo.com  Mon Oct 27 16:47:58 2008
From: lgcraymer at yahoo.com (Loring Craymer)
Date: Mon, 27 Oct 2008 16:47:58 -0700 (PDT)
Subject: [antlr-interest] Duplicate members when generating code with 2
	import levels in Java with ANTLR-3.1.1
Message-ID: <766117.98075.qm@web55906.mail.re3.yahoo.com>

Ter--

Should it be an error, though?? I do not see a strong likelihood of circular dependencies, but if we extend Laurent's example to have?another subgrammar?(imported by C)?P3?that imports P1 but does not overlap P2, shouldn't P2 and P3 use the same instance of P1 to avoid a similar collision?? It seems to me that this would be quite common when P1 is, say,?an expression grammar and that the composition machinery should make this "just work".

Cheers!

--Loring



----- Original Message ----
> From: Terence Parr <parrt at cs.usfca.edu>
> To: Loring Craymer <lgcraymer at yahoo.com>
> Cc: Laurent Caillette <laurent.caillette at gmail.com>; antlr-interest Interest <antlr-interest at antlr.org>
> Sent: Monday, October 27, 2008 4:09:53 PM
> Subject: Re: [antlr-interest] Duplicate members when generating code with 2 import levels in Java with ANTLR-3.1.1
> 
> 
> On Oct 27, 2008, at 4:04 PM, Loring Craymer wrote:
> 
> > Ter--
> >
> > Just my 2 cents, but shouldn't duplicate imports be supported at the? 
> > language level, as is true for Java, C#, and even C/C++ with the? 
> > usual #ifdef wrapping?? It seems to me that leaving dependency? 
> > management to the user limits the convenience of composition.
> 
> hi. just haven't had a chance to write the graph dependency checker,? 
> looking for duplicates. It should really give an error.
> 
> Ter



      

From parrt at cs.usfca.edu  Mon Oct 27 16:51:36 2008
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon, 27 Oct 2008 16:51:36 -0700
Subject: [antlr-interest] Duplicate members when generating code with 2
	import levels in Java with ANTLR-3.1.1
In-Reply-To: <766117.98075.qm@web55906.mail.re3.yahoo.com>
References: <766117.98075.qm@web55906.mail.re3.yahoo.com>
Message-ID: <9EA60640-A018-4DFA-95AC-413A66B7DFE1@cs.usfca.edu>

was wondering that myself, but there is likely issues with the  
delegation impl. model I'm using.  We can start with an error and see  
what comes up.  I'm worried about lexers a bit.
Ter
On Oct 27, 2008, at 4:47 PM, Loring Craymer wrote:

> Ter--
>
> Should it be an error, though?  I do not see a strong likelihood of  
> circular dependencies, but if we extend Laurent's example to have  
> another subgrammar (imported by C) P3 that imports P1 but does not  
> overlap P2, shouldn't P2 and P3 use the same instance of P1 to avoid  
> a similar collision?  It seems to me that this would be quite common  
> when P1 is, say, an expression grammar and that the composition  
> machinery should make this "just work".
>
> Cheers!
>
> --Loring
>
>
>
> ----- Original Message ----
>> From: Terence Parr <parrt at cs.usfca.edu>
>> To: Loring Craymer <lgcraymer at yahoo.com>
>> Cc: Laurent Caillette <laurent.caillette at gmail.com>; antlr-interest  
>> Interest <antlr-interest at antlr.org>
>> Sent: Monday, October 27, 2008 4:09:53 PM
>> Subject: Re: [antlr-interest] Duplicate members when generating  
>> code with 2 import levels in Java with ANTLR-3.1.1
>>
>>
>> On Oct 27, 2008, at 4:04 PM, Loring Craymer wrote:
>>
>>> Ter--
>>>
>>> Just my 2 cents, but shouldn't duplicate imports be supported at the
>>> language level, as is true for Java, C#, and even C/C++ with the
>>> usual #ifdef wrapping?  It seems to me that leaving dependency
>>> management to the user limits the convenience of composition.
>>
>> hi. just haven't had a chance to write the graph dependency checker,
>> looking for duplicates. It should really give an error.
>>
>> Ter
>
>
>
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>


From antlr at mirality.co.nz  Mon Oct 27 17:05:28 2008
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Tue, 28 Oct 2008 13:05:28 +1300
Subject: [antlr-interest] Duplicate members when generating code with 2
 import levels in Java with ANTLR-3.1.1
In-Reply-To: <680442.28558.qm@web55908.mail.re3.yahoo.com>
References: <680442.28558.qm@web55908.mail.re3.yahoo.com>
Message-ID: <20081028000542.D44A011EDEB@www.antlr.org>

At 12:04 28/10/2008, Loring Craymer wrote:
 >Just my 2 cents, but shouldn't duplicate imports be supported at 

 >the language level, as is true for Java, C#, and even C/C++ with 

 >the usual #ifdef wrapping?  It seems to me that leaving 
dependency
 >management to the user limits the convenience of composition.

If you think of grammar imports as class inheritance (which is 
what they behave most like), then I think you'll find that those 
other languages don't really support it all that well either :)

In C#, multiple inheritance of interfaces is supported cleanly, 
but interfaces carry no implementation.  Since the 
implementation-inheritance model is single-inheritance, there's no 
possibility of a serious clash.  I'm not sure about Java exactly, 
but I believe it's similar.

In C++, if you try to make class C inherit from both B1 and B2 
(where B2 inherits from B1), then it will indeed include an extra 
copy of B1 (in what's known as a "deadly diamond"), unless B1 is a 
virtual base class.  This seems like the same behaviour as what 
ANTLR exhibits, except that (currently at least) ANTLR provides no 
means to make it a virtual base :)


From lgcraymer at yahoo.com  Mon Oct 27 17:43:57 2008
From: lgcraymer at yahoo.com (Loring Craymer)
Date: Mon, 27 Oct 2008 17:43:57 -0700 (PDT)
Subject: [antlr-interest] Duplicate members when generating code with 2
	import levels in Java with ANTLR-3.1.1
Message-ID: <559892.76757.qm@web55907.mail.re3.yahoo.com>

Gavin--

I think that your analogy is way off.? The ANTLR 3 composition looks much more like Python's "import module"?than it does OO? inheritance.? In an OO setting, A inheriting from B2, B3 with B2 and B3 each inheriting from C has the problem that data duplication is either essential or a big problem; ANTLR composites can safely avoid that (at least, for the most part).

--Loring



----- Original Message ----
> From: Gavin Lambert <antlr at mirality.co.nz>
> To: Loring Craymer <lgcraymer at yah oo.com>; Terence Parr <parrt at cs.usfca.edu>; Laurent Caillette <laurent.caillette at gmail.com>
> Cc: antlr-interest Interest <antlr-interest at antlr.org>
> Sent: Monday, October 27, 2008 5:05:28 PM
> Subject: Re: [antlr-interest] Duplicate members when generating code with 2 import levels in Java with ANTLR-3.1.1
> 
> At 12:04 28/10/2008, Loring Craymer wrote:
> >Just my 2 cents, but shouldn't duplicate imports be supported at 
> 
> >the language level, as is true for Java, C#, and even C/C++ with 
> 
> >the usual #ifdef wrapping?? It seems to me that leaving 
> dependency
> >management to the user limits the convenience of composition.
> 
> If you think of grammar imports as class inheritance (which is 
> what they behave most like), then I think you'll find that those 
> other languages don't really support it all that well either :)
> 
> In C#, multiple inheritance of interfaces is supported cleanly, 
> but interfaces carry no implementation.? Since the 
> implementation-inheritance model is single-inheritance, there's no 
> possibility of a serious clash.? I'm not sure about Java exactly, 
> but I believe it's similar.
> 
> In C++, if you try to make class C inherit from both B1 and B2 
> (where B2 inherits from B1), then it will indeed include an extra 
> copy of B1 (in what's known as a "deadly diamond"), unless B1 is a 
> virtual base class.? This seems like the same behaviour as what 
> ANTLR exhibits, except that (currently at least) ANTLR provides no 
> means to make it a virtual base :)



      

From geoff_hendrey at yahoo.com  Mon Oct 27 18:16:10 2008
From: geoff_hendrey at yahoo.com (Geoff hendrey)
Date: Mon, 27 Oct 2008 18:16:10 -0700 (PDT)
Subject: [antlr-interest] how to bail on MissingTokenException
Message-ID: <611390.89026.qm@web31815.mail.mud.yahoo.com>

Sorry to repost my question, but I'm very eager to get a response on how to make the parser bail out (abort) on MissingTokenException.

Any advice?



----- Forwarded Message ----
From: Geoff hendrey <geoff_hendrey at yahoo.com>
To: antlr-interest at antlr.org
Sent: Sunday, October 26, 2008 5:02:53 PM
Subject: how to bail on MissingTokenException


Hi,

I recently upgraded to ANTLR 3.1.1.

I want to know how to handle MissingTokenException, so that the paring throws a RecognitionException when there is a missing token.

My grammar file aready has this:

@members{
protected void mismatch(IntStream input, int ttype, BitSet follow)throws RecognitionException{
    throw new MismatchedTokenException(ttype, input);
}    
public Object recoverFromMismatchedSet(IntStream input, RecognitionException e, BitSet follow)throws RecognitionException{
    throw e;
}

}
@rulecatch{
catch(RecognitionException e){
    throw e;
}

Can you tell me what to add so that MissingTokenException will throw a RecognitionException and abort the parsing?

(also, this is a bit of a tangent, but why do you document the ANTLR runtime API's Java Classes using Doxygen? I find it much harder to read and navigate than JavaDoc. Are JavaDocs available?)

-geoff
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20081027/ed4a2527/attachment.html 

From parrt at cs.usfca.edu  Mon Oct 27 19:15:10 2008
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon, 27 Oct 2008 19:15:10 -0700
Subject: [antlr-interest] Duplicate members when generating code with 2
	import levels in Java with ANTLR-3.1.1
In-Reply-To: <559892.76757.qm@web55907.mail.re3.yahoo.com>
References: <559892.76757.qm@web55907.mail.re3.yahoo.com>
Message-ID: <E3FA3FF7-0C9A-4C44-9565-BCB57965CD07@cs.usfca.edu>


On Oct 27, 2008, at 5:43 PM, Loring Craymer wrote:

> Gavin--
>
> I think that your analogy is way off.  The ANTLR 3 composition looks  
> much more like Python's "import module" than it does OO  inheritance.

actually, i designed it to be polymorphic and everything; should be  
multiple inheritance exactly.  I impl with delegation though not  
inheritance.

Ter


From lgcraymer at yahoo.com  Mon Oct 27 21:50:04 2008
From: lgcraymer at yahoo.com (Loring Craymer)
Date: Mon, 27 Oct 2008 21:50:04 -0700 (PDT)
Subject: [antlr-interest] Duplicate members when generating code with 2
	import levels in Java with ANTLR-3.1.1
Message-ID: <490828.42540.qm@web55905.mail.re3.yahoo.com>

Ter

Interesting.  I thought that you just imported the production methods, but if you truly support polymorphism, then rules are imported not just on the basis of their names but on their signatures as well.  Somehow I missed that in the code.

Are you sure that grammar composition does not look more like module importation?

--Loring





----- Original Message ----
> From: Terence Parr <parrt at cs.usfca.edu>
> To: antlr-interest Interest <antlr-interest at antlr.org>
> Sent: Monday, October 27, 2008 7:15:10 PM
> Subject: Re: [antlr-interest] Duplicate members when generating code with 2 import levels in Java with ANTLR-3.1.1
> 
> 
> On Oct 27, 2008, at 5:43 PM, Loring Craymer wrote:
> 
> > Gavin--
> >
> > I think that your analogy is way off.  The ANTLR 3 composition looks  
> > much more like Python's "import module" than it does OO  inheritance.
> 
> actually, i designed it to be polymorphic and everything; should be  
> multiple inheritance exactly.  I impl with delegation though not  
> inheritance.
> 
> Ter
> 
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: 
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address



      

From parrt at cs.usfca.edu  Mon Oct 27 22:49:16 2008
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon, 27 Oct 2008 22:49:16 -0700
Subject: [antlr-interest] Duplicate members when generating code with 2
	import levels in Java with ANTLR-3.1.1
In-Reply-To: <490828.42540.qm@web55905.mail.re3.yahoo.com>
References: <490828.42540.qm@web55905.mail.re3.yahoo.com>
Message-ID: <3DF0344A-A5BA-4659-BF3F-F9801BB9E0D7@cs.usfca.edu>


On Oct 27, 2008, at 9:50 PM, Loring Craymer wrote:

> Ter
>
> Interesting.  I thought that you just imported the production  
> methods, but if you truly support polymorphism, then rules are  
> imported not just on the basis of their names but on their  
> signatures as well.  Somehow I missed that in the code.
>
> Are you sure that grammar composition does not look more like module  
> importation?

Well, not sure what you call it but manual explains it as:
> Rules in delegate grammars that reference rules overridden in a  
> delegator reference the overridden rule. This is identical to the  
> rules for overridden methods in an object oriented programming  
> language.
>
Here is a unit test.  Now that i look at it, it sucks but it does  
indicate that it matches "c" via S.a then M.b from M.  S.b does not  
match 'c' (or anything actually).

     public void testDelegatorRuleOverridesDelegate() throws Exception {
         String slave =
             "parser grammar S;\n" +
             "a : b {System.out.println(\"S.a\");} ;\n" +
             "b : B ;\n" ;
         mkdir(tmpdir);
         writeFile(tmpdir, "S.g", slave);
         String master =
             "grammar M;\n" +
             "import S;\n" +
             "b : 'b'|'c' ;\n" +
             "WS : (' '|'\\n') {skip();} ;\n" ;
         String found = execParser("M.g", master, "MParser", "MLexer",
                                   "a", "c", debug);
         assertEquals("S.a\n", found);
     }

So if you have an S parser, a invokes S.b.  BUT, if you import S into  
M and then invoke 'a' from M, you get S.a calling S.b.  It's using  
delegate pointers.  Basically M defines

a() { gS.a(); }

and S defines:

b() { gParent.b(); }

if I remember.  So, it behaves as you'd expect: "the receiver, M,  
decides how to answer message b".  If I'm an S, a calls S.b.  If I'm  
an M, a calls M.b.  the gS and gParent act sort of like a vtable I  
think.

Ter
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20081027/43aeca00/attachment.html 

From lgcraymer at yahoo.com  Tue Oct 28 01:35:04 2008
From: lgcraymer at yahoo.com (Loring Craymer)
Date: Tue, 28 Oct 2008 01:35:04 -0700 (PDT)
Subject: [antlr-interest] Duplicate members when generating code with 2
	import levels in Java with ANTLR-3.1.1
Message-ID: <530199.77357.qm@web55905.mail.re3.yahoo.com>

Ter--

Indirect execution is a very weak form of polymorphism, and the mechanism you describe depends on compiler type awareness.

Assume that you have two versions of rule b, defined in separate but included grammars

b[int foo] : a b c ;  // version 1

b returns int :  d e f ; // version 2

These have different type signatures; in an OO system, b[int x] would translate to version 1, and z = b would imply version 2.  As you mention, interpretation depends on the message sent, and part of the message are the data type expectations.

On another note, ANTLR lacks the data abstractions that go with the OO idea of inheritance.  The mechanism implemented in ANTLR 3 looks much more like Python's module import facility than it does inheritance.

--Loring





________________________________
From: Terence Parr <parrt at cs.usfca.edu>
To: Loring Craymer <lgcraymer at yahoo.com>
Cc: antlr-interest Interest <antlr-interest at antlr.org>
Sent: Monday, October 27, 2008 10:49:16 PM
Subject: Re: [antlr-interest] Duplicate members when generating code with 2 import levels in Java with ANTLR-3.1.1



On Oct 27, 2008, at 9:50 PM, Loring Craymer wrote:

Ter

Interesting.  I thought that you just imported the production methods, but if you truly support polymorphism, then rules are imported not just on the basis of their names but on their signatures as well.  Somehow I missed that in the code.

Are you sure that grammar composition does not look more like module importation?


Well, not sure what you call it but manual explains it as:
Rules in delegate grammars that reference rules overridden in a delegator reference the overridden rule. This is identical to the rules for overridden methods in an object oriented programming language.
Here is a unit test.  Now that i look at it, it sucks but it does indicate that it matches "c" via S.a then M.b from M.  S.b does not match 'c' (or anything actually).

    public void testDelegatorRuleOverridesDelegate() throws Exception {
        String slave =
            "parser grammar S;\n" +
            "a : b {System.out.println(\"S.a\");} ;\n" +
            "b : B ;\n" ;
        mkdir(tmpdir);
        writeFile(tmpdir, "S.g", slave);
        String master =
            "grammar M;\n" +
            "import S;\n" +
            "b : 'b'|'c' ;\n" +
            "WS : (' '|'\\n') {skip();} ;\n" ;
        String found = execParser("M.g", master, "MParser", "MLexer",
                                  "a", "c", debug);
        assertEquals("S.a\n", found);
    }

So if you have an S parser, a invokes S.b.  BUT, if you import S into M and then invoke 'a' from M, you get S.a calling S.b.  It's using delegate pointers.  Basically M defines 

a() { gS.a(); }

and S defines:

b() { gParent.b(); }

if I remember.  So, it behaves as you'd expect: "the receiver, M, decides how to answer message b".  If I'm an S, a calls S.b.  If I'm an M, a calls M.b.  the gS and gParent act sort of like a vtable I think.

Ter


      
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20081028/dd911758/attachment.html 

From qwizv9b02 at sneakemail.com  Tue Oct 28 05:36:43 2008
From: qwizv9b02 at sneakemail.com (Hendrik Maryns)
Date: Tue, 28 Oct 2008 13:36:43 +0100
Subject: [antlr-interest] =?utf-8?q?How_to_specify_=E2=80=98any_non-contro?=
	=?utf-8?b?bCBzeW1ib2zigJk/?=
Message-ID: <ge710s$m1c$1@ger.gmane.org>

Hi,

I want to define a LABEL lexer rule which should match almost anything.
 Let?s say any non-control Unicode symbol.  Antlr wouldn?t accept .* or
.+.  I probably don?t want a closing brace in there since it is a
lisp-like grammar, but even space would be fine (although it probably
won?t occur), so I did ~(')')+ but that feels like a hack.  Can I use
POSIX regex classes such as p{alphnum} or something of the like?

H.
-- 
Hendrik Maryns
http://tcl.sfs.uni-tuebingen.de/~hendrik/
==================
Ask smart questions, get good answers:
http://www.catb.org/~esr/faqs/smart-questions.html

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 257 bytes
Desc: OpenPGP digital signature
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20081028/e78e5a7b/attachment.bin 

From jaluber at gmx.de  Tue Oct 28 06:02:31 2008
From: jaluber at gmx.de (Johannes Luber)
Date: Tue, 28 Oct 2008 14:02:31 +0100
Subject: [antlr-interest]
 =?utf-8?q?How_to_specify_=E2=80=98any_non-contro?=
 =?utf-8?b?bCBzeW1ib2zigJk/?=
In-Reply-To: <ge710s$m1c$1@ger.gmane.org>
References: <ge710s$m1c$1@ger.gmane.org>
Message-ID: <49070D67.8080500@gmx.de>

Hendrik Maryns schrieb:
> Hi,
> 
> I want to define a LABEL lexer rule which should match almost anything.
>  Let?s say any non-control Unicode symbol.  Antlr wouldn?t accept .* or
> .+.  I probably don?t want a closing brace in there since it is a
> lisp-like grammar, but even space would be fine (although it probably
> won?t occur), so I did ~(')')+ but that feels like a hack.  Can I use
> POSIX regex classes such as p{alphnum} or something of the like?
> 
> H.

Currently ANTLR doesn't support Unicode classes. The only workaround
would be to define manually all code points (manually means
semi-automatic via use of some existing table as starting point). You
should be aware that ANTLR doesn't accept code points above \uffff, so
you'd have to translate UTF-32 into UTF-16 surrogates.

BTW, while it at first seems to be good idea to this kind of
discrimination in the lexer, you get far better error messages if you
push the error checking into the parser. Doing so requires merely to
make the lexer discriminate the potential classes in the minimal way. If
you like I can send you a lexer of mine using this strategy for
comparison purposes.

Johannes
> 
>  
> ------------------------------------------------------------------------
> 
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
> 


From qwizv9b02 at sneakemail.com  Tue Oct 28 06:26:18 2008
From: qwizv9b02 at sneakemail.com (Hendrik Maryns)
Date: Tue, 28 Oct 2008 14:26:18 +0100
Subject: [antlr-interest]
 =?utf-8?q?How_to_specify_=E2=80=98any_non-contro?=
 =?utf-8?b?bCBzeW1ib2zigJk/?=
In-Reply-To: <49070D67.8080500@gmx.de>
References: <ge710s$m1c$1@ger.gmane.org> <49070D67.8080500@gmx.de>
Message-ID: <ge73tt$oq$1@ger.gmane.org>

Johannes Luber schreef:
> Hendrik Maryns schrieb:
>> Hi,
>>
>> I want to define a LABEL lexer rule which should match almost anything.
>>  Let?s say any non-control Unicode symbol.  Antlr wouldn?t accept .* or
>> .+.  I probably don?t want a closing brace in there since it is a
>> lisp-like grammar, but even space would be fine (although it probably
>> won?t occur), so I did ~(')')+ but that feels like a hack.  Can I use
>> POSIX regex classes such as p{alphnum} or something of the like?
> 
> Currently ANTLR doesn't support Unicode classes. The only workaround
> would be to define manually all code points (manually means
> semi-automatic via use of some existing table as starting point). You
> should be aware that ANTLR doesn't accept code points above \uffff, so
> you'd have to translate UTF-32 into UTF-16 surrogates.

This is what it already seem to do internally, see the attached image
Antlrworks produced.

> BTW, while it at first seems to be good idea to this kind of
> discrimination in the lexer, you get far better error messages if you
> push the error checking into the parser. Doing so requires merely to
> make the lexer discriminate the potential classes in the minimal way. If
> you like I can send you a lexer of mine using this strategy for
> comparison purposes.

I don?t understand this.   What do you mean by ?this kind of
discriminations? and in which way am I putting it in the lexer and could
push it into the parser?  I am afraid I am too new in this area to
follow you here.

H.
-- 
Hendrik Maryns
http://tcl.sfs.uni-tuebingen.de/~hendrik/
==================
Ask smart questions, get good answers:
http://www.catb.org/~esr/faqs/smart-questions.html
-------------- next part --------------
A non-text attachment was scrubbed...
Name: label.eps
Type: application/postscript
Size: 14010 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20081028/64e6d937/attachment.eps 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 257 bytes
Desc: OpenPGP digital signature
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20081028/64e6d937/attachment.bin 

From qwizv9b02 at sneakemail.com  Tue Oct 28 06:28:33 2008
From: qwizv9b02 at sneakemail.com (Hendrik Maryns)
Date: Tue, 28 Oct 2008 14:28:33 +0100
Subject: [antlr-interest] Debugging: how? (Why do I get
 MismatchedTokenException or UnwantedTokenException?) Unhelpful error
 messages.
Message-ID: <ge7422$n0$1@ger.gmane.org>

Hi all,

I showed you my grammar yesterday.  Now trying it out on some simple
inputs blows me away right away: it doesn?t even parse anything.

For example, if I give ?(word x Einf?hrung)? as input to the rule
?formula?, I get MismatchedTokenException (0!=0).  Strangely enough, I
do not think 0 is not equal to 0, but I have no idea what this is
supposed to tell me.

If I feed it to formulaList, I get an UnwantedTokenException followed by
an EOF, which doesn?t make me any wiser at this point.

Grateful for any suggestions,
H.

This is my current grammar:

grammar fsq;

options {
	language = Java;
	output=AST;
}

tokens {
// LISP
  OPEN = '[';
  CLOSE = ']';
// labels
  FUNCTION = 'fct';
  CATEGORY = 'cat';
  WORD = 'word';
  LEMMA = 'lemma';
  MORPHOLOGY = 'morph';

  SENTENCE = 'sent';
// atomic
  CONTAINMENT = 'in';
  EQUALITY = '=';
  PROPER_DOMINANCE = '>+';
  IMMEDIATE_DOMINANCE = '>';
  DOMINANCE = '>>';
  IMMEDIATE_PRECEDENCE = '.';
  PRECEDENCE = '..';
// unary
  NEGATION = '!';
// binary
  IMPLICATION = '->';
  EQUIVALENCE = '<->';
// n-ary
  DISJUNCTION = '|';
  CONJUNCTION = '&';
// quantification
  SECOND_ORDER_UNIVERSAL = 'A2';
  SECOND_ORDER_EXISTENTIAL = 'E2';
  FIRST_ORDER_UNIVERSAL = 'A1';
  FIRST_ORDER_EXISTENTIAL = 'E1';
}

@header { package de.uni_tuebingen.sfb.lichtenstein.formulas.parsing; }

@lexer::header { package
de.uni_tuebingen.sfb.lichtenstein.formulas.parsing; }

@members {
}

/*------------------------------------------------------------------
 * PARSER RULES
 *------------------------------------------------------------------*/

/**
 * One formula on each line.
 */
formulaList : ( formula )* EOF ;

/**
 * A formula is enclosed by braces.
 */
formula : OPEN body CLOSE ;

body : label | atomic | unary | binary | n_ary | quantor ;

// label formulas
label : labelHead VARIABLE LABEL ;

labelHead : FUNCTION | CATEGORY | WORD | LEMMA | MORPHOLOGY ;

// atomic relations
atomic : atomicHead VARIABLE VARIABLE ;

atomicHead : CONTAINMENT | EQUALITY | PROPER_DOMINANCE |
IMMEDIATE_DOMINANCE | DOMINANCE | IMMEDIATE_PRECEDENCE | PRECEDENCE ;

// unary junctors
unary : unaryHead formula ;

unaryHead : NEGATION ;

// binary junctors
binary : binaryHead formula formula ;

binaryHead : IMPLICATION | EQUIVALENCE ;

// n-ary junctors
n_ary : n_aryHead formula+ ;

n_aryHead : CONJUNCTION | DISJUNCTION ;

// quantors
quantor : quantorHead VARIABLE formula ;

quantorHead : FIRST_ORDER_EXISTENTIAL | FIRST_ORDER_UNIVERSAL |
SECOND_ORDER_EXISTENTIAL | SECOND_ORDER_UNIVERSAL ;

/*------------------------------------------------------------------
 * LEXER RULES
 *------------------------------------------------------------------*/

WHITESPACE  :  (' '|'\r'|'\t'|'\u000C'|'\n') {$channel=HIDDEN;}
    ;

COMMENT
    :   '/*' .* '*/' {$channel=HIDDEN;}
    ;
LINE_COMMENT
    : '//' ~('\n'|'\r')* '\r'? '\n' {$channel=HIDDEN;}
    ;

VARIABLE : ( DIGIT | LETTER )+ ;

fragment DIGIT  : '0'..'9' ;
fragment LETTER : LOWERCASE | UPPERCASE ;
fragment LOWERCASE : 'a'..'z' ;
fragment UPPERCASE : 'A'..'Z' ;

LABEL : ~(')')+ ;

-- 
Hendrik Maryns
http://tcl.sfs.uni-tuebingen.de/~hendrik/
==================
Ask smart questions, get good answers:
http://www.catb.org/~esr/faqs/smart-questions.html

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 257 bytes
Desc: OpenPGP digital signature
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20081028/6df7c8fa/attachment.bin 

From lars.vonwedel at bayertechnology.com  Tue Oct 28 06:50:31 2008
From: lars.vonwedel at bayertechnology.com (lars.vonwedel at bayertechnology.com)
Date: Tue, 28 Oct 2008 14:50:31 +0100
Subject: [antlr-interest] Antwort: RE: Interactive interpreter and line
 continuationcharacters
In-Reply-To: <86403CA0939415448BCCB83855EFE09A64E6A1@Bloodymary.ironwillgames.com>
Message-ID: <OF45D90E7C.EE508F96-ONC12574F0.004BF35E-C12574F0.004C0949@bayer.de>

Thanks a lot, that worked out very well !

Freundliche Gr??e / Best Regards
Lars von Wedel
_________________________________________

Bayer Technology Services GmbH





"Sam Harwell" <sharwell at pixelminegames.com> 
23.10.2008 18:26

An
<lars.vonwedel at bayertechnology.com>, <antlr-interest at antlr.org>
Kopie

Thema
RE: [antlr-interest] Interactive interpreter and line 
continuationcharacters






Keep a flag (bool) in the lexer that sets whether or not the input it was 
fed (could be multiple lines) represents a complete statement. Make sure 
that the lexer can lex a single line without bombing ? you should have a 
rule similar to the one below. After enter is pressed, lex the input from 
the start of the current statement (not line) through the end of the last 
line of the statement entered. Then check the lexer?s statement completed 
flag; if true send the input to the parser, otherwise discard those 
results and wait for another line of text to be entered. Since an 
interactive shell?s individual lexer inputs are short, there will be 
little overhead for repeatedly lexing the lines of a multi-line input.
 
// Very last rule of the lexer to stop troublesome NoViableAltException
ANYCHAR
        :       .
        ;
 
Sam
 
From: antlr-interest-bounces at antlr.org 
[mailto:antlr-interest-bounces at antlr.org] On Behalf Of 
lars.vonwedel at bayertechnology.com
Sent: Thursday, October 23, 2008 5:18 AM
To: antlr-interest at antlr.org
Subject: [antlr-interest] Interactive interpreter and line 
continuationcharacters
 

Hello, 

I am trying to build an interactive interpreter shell for an application. 
A simple approach is obviously to read a line from the command line and 
send it to the lexer/parser.  However, the input language permits line 
continuation by special characters. If a line ends with a ';' or ',' it is 
supposed to be continued on the next line. 

To make things worse, some valid statements can end with multiple ',' 
characters. In this case, a special statement termination character '!' is 
used(and can be followed by arbitrary input to be disregarded). 

My current line of thinking is to send a line entered by the user to the 
lexer, let it skip anything beyond '!' and then look at the last token. If 
that is a ';' or ',' then obtain another line and concatenate the token 
streams before actually running the parser. 

Are there any better ideas how to deal with this ? 

Freundliche Gr??e / Best Regards
Lars von Wedel
_________________________________________

Bayer Technology Services GmbH
E-mail: lars.vonwedel at bayertechnology.com
Web: www.bayertechnology.com

Gesch?ftsf?hrer: Achim Noack
Aufsichtsratsvorsitzender: Dr. Wolfgang Plischke
Sitz der Gesellschaft: Leverkusen   |   Eintragung: Amtsgericht K?ln, HRB 
49896
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20081028/7c51cdd0/attachment.html 

From lars.vonwedel at bayertechnology.com  Tue Oct 28 07:08:56 2008
From: lars.vonwedel at bayertechnology.com (lars.vonwedel at bayertechnology.com)
Date: Tue, 28 Oct 2008 15:08:56 +0100
Subject: [antlr-interest] Accessing generated AST root node within parser ?
Message-ID: <OF70FC8493.A3638F87-ONC12574F0.004CEDEB-C12574F0.004DB8E6@bayer.de>

Hello,

I would like to do something with the generated root node while parsing, 
similar to this (which of course does not work):

init
        :       KW_INITIALISE ( ( SEMICOLON) data )*
                { VerifyInitData( $init, 0, 4, 1 ); }
                -> ^(KW_INITIALISE data*) 
        ;

Is there any equivalent construct I might use ? Or would use of a tree 
walker be the clean approach ?

Freundliche Gr??e / Best Regards
Lars von Wedel
_________________________________________

Bayer Technology Services GmbH
Web: www.bayertechnology.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20081028/22736158/attachment.html 

From jaluber at gmx.de  Tue Oct 28 07:18:38 2008
From: jaluber at gmx.de (Johannes Luber)
Date: Tue, 28 Oct 2008 15:18:38 +0100
Subject: [antlr-interest]
 =?utf-8?q?How_to_specify_=E2=80=98any_non-contro?=
 =?utf-8?b?bCBzeW1ib2zigJk/?=
In-Reply-To: <ge73tt$oq$1@ger.gmane.org>
References: <ge710s$m1c$1@ger.gmane.org> <49070D67.8080500@gmx.de>
	<ge73tt$oq$1@ger.gmane.org>
Message-ID: <49071F3E.9030409@gmx.de>

Hendrik Maryns schrieb:
> Johannes Luber schreef:
>> Hendrik Maryns schrieb:
>>> Hi,
>>>
>>> I want to define a LABEL lexer rule which should match almost anything.
>>>  Let?s say any non-control Unicode symbol.  Antlr wouldn?t accept .* or
>>> .+.  I probably don?t want a closing brace in there since it is a
>>> lisp-like grammar, but even space would be fine (although it probably
>>> won?t occur), so I did ~(')')+ but that feels like a hack.  Can I use
>>> POSIX regex classes such as p{alphnum} or something of the like?
>> Currently ANTLR doesn't support Unicode classes. The only workaround
>> would be to define manually all code points (manually means
>> semi-automatic via use of some existing table as starting point). You
>> should be aware that ANTLR doesn't accept code points above \uffff, so
>> you'd have to translate UTF-32 into UTF-16 surrogates.
> 
> This is what it already seem to do internally, see the attached image
> Antlrworks produced.

It looks to me as if the code handles merely UCS-2 and not UTF-16.
Without seeing at least rule you used as input I can't be entirely sure,
though.
> 
>> BTW, while it at first seems to be good idea to this kind of
>> discrimination in the lexer, you get far better error messages if you
>> push the error checking into the parser. Doing so requires merely to
>> make the lexer discriminate the potential classes in the minimal way. If
>> you like I can send you a lexer of mine using this strategy for
>> comparison purposes.
> 
> I don?t understand this.   What do you mean by ?this kind of
> discriminations?

I mean checking the input in such way that no illegal character is used
to create a token, but making the lexer bail out immediately. Then your
error messages won't be able to say much about the context.

> and in which way am I putting it in the lexer and could
> push it into the parser?  I am afraid I am too new in this area to
> follow you here.

Let's assume that identifiers may not start with uppercase letters. Then
the above mentioned method would be to define the rule as:

ident: LOWERCASE (LOWERCASE | UPPERCASE)*;

My proposal is to use:

ident: (LOWERCASE | UPPERCASE)+;

Then the parser can tell you that "identifier PascalCase starts with an
uppercase character".

Johannes

> 
> H.
> 
> 
> ------------------------------------------------------------------------
> 
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
> 


From jaluber at gmx.de  Tue Oct 28 07:23:18 2008
From: jaluber at gmx.de (Johannes Luber)
Date: Tue, 28 Oct 2008 15:23:18 +0100
Subject: [antlr-interest]
 =?utf-8?q?How_to_specify_=E2=80=98any_non-contro?=
 =?utf-8?b?bCBzeW1ib2zigJk/?=
In-Reply-To: <49071F3E.9030409@gmx.de>
References: <ge710s$m1c$1@ger.gmane.org>
	<49070D67.8080500@gmx.de>	<ge73tt$oq$1@ger.gmane.org>
	<49071F3E.9030409@gmx.de>
Message-ID: <49072056.3020103@gmx.de>

Johannes Luber schrieb:
> Hendrik Maryns schrieb:
>> Johannes Luber schreef:
>>> Hendrik Maryns schrieb:
>>>> Hi,
>>>>
>>>> I want to define a LABEL lexer rule which should match almost anything.
>>>>  Let?s say any non-control Unicode symbol.  Antlr wouldn?t accept .* or
>>>> .+.  I probably don?t want a closing brace in there since it is a
>>>> lisp-like grammar, but even space would be fine (although it probably
>>>> won?t occur), so I did ~(')')+ but that feels like a hack.  Can I use
>>>> POSIX regex classes such as p{alphnum} or something of the like?
>>> Currently ANTLR doesn't support Unicode classes. The only workaround
>>> would be to define manually all code points (manually means
>>> semi-automatic via use of some existing table as starting point). You
>>> should be aware that ANTLR doesn't accept code points above \uffff, so
>>> you'd have to translate UTF-32 into UTF-16 surrogates.
>> This is what it already seem to do internally, see the attached image
>> Antlrworks produced.
> 
> It looks to me as if the code handles merely UCS-2 and not UTF-16.
> Without seeing at least rule you used as input I can't be entirely sure,
> though.
>>> BTW, while it at first seems to be good idea to this kind of
>>> discrimination in the lexer, you get far better error messages if you
>>> push the error checking into the parser. Doing so requires merely to
>>> make the lexer discriminate the potential classes in the minimal way. If
>>> you like I can send you a lexer of mine using this strategy for
>>> comparison purposes.
>> I don?t understand this.   What do you mean by ?this kind of
>> discriminations?
> 
> I mean checking the input in such way that no illegal character is used
> to create a token, but making the lexer bail out immediately. Then your
> error messages won't be able to say much about the context.
> 
>> and in which way am I putting it in the lexer and could
>> push it into the parser?  I am afraid I am too new in this area to
>> follow you here.
> 
> Let's assume that identifiers may not start with uppercase letters. Then
> the above mentioned method would be to define the rule as:
> 
> ident: LOWERCASE (LOWERCASE | UPPERCASE)*;
> 
> My proposal is to use:
> 
> ident: (LOWERCASE | UPPERCASE)+;
> 
> Then the parser can tell you that "identifier PascalCase starts with an
> uppercase character".
> 
> Johannes

I should amend the examples that one wouldn't create tokens for each
character but build a single token like:

IDENT: (LOWERCASE | UPPERCASE)+;

fragment LOWERCASE: 'a'..'z';

fragment UPPERCASE: 'A'..'Z';

Doesn't change the actual point.

Johannes
> 
>> H.
>>
>>
>> ------------------------------------------------------------------------
>>
>>
>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>>
> 
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
> 


From antlr at jazillian.com  Tue Oct 28 08:15:03 2008
From: antlr at jazillian.com (Andy Tripp)
Date: Tue, 28 Oct 2008 11:15:03 -0400
Subject: [antlr-interest] add a tree visitor?
In-Reply-To: <0F4A5141-0913-498F-9251-C278BCC930BF@cs.usfca.edu>
References: <0F4A5141-0913-498F-9251-C278BCC930BF@cs.usfca.edu>
Message-ID: <49072C77.8090903@jazillian.com>

Terence Parr wrote:
> Howdy, as part of my tree grammar filter mode, I need an external tree  
> visitor. It's just a depth first walk that triggers a pattern match  
> for each node as it walks back up the tree. I might as well make it a  
> generic action, which means I need an interface in Java. [java doesn't  
> have function pointers...sigh]
> 
>      public interface TreeVisitorAction {
>          public void visit(Object t);
>      }
> 
> Then the depth first recursive walk can trigger a generic action after  
> visiting the children, us, doing a bottom-up walk:
> 
>     public static void visit(CommonTree t, TreeVisitorAction action) {
>          if ( t.getChildCount()>0 ) {
>              List children = t.getChildren();
>              for (int i=0; i<children.size(); i++) {
>                  CommonTree child = (CommonTree)children.get(i);
>                  filter(child, action);
>              }
>          }
>          action.visit(t);
>      }
> 
> Is this a reasonable bit of code to insert in the main distribution?   
> C and other languages can use function pointers to perform the true  
> intent of the interface.

Yep, that's the Visitor design pattern...seems like a good thing to add.
The TreeVisitorAction method is usually called "accept()", though.
And the Java 1.5 foreach and generics would make the code cleaner.

Andy

From qwizv9b02 at sneakemail.com  Tue Oct 28 08:23:04 2008
From: qwizv9b02 at sneakemail.com (Hendrik Maryns)
Date: Tue, 28 Oct 2008 16:23:04 +0100
Subject: [antlr-interest]
 =?utf-8?q?How_to_specify_=E2=80=98any_non-contro?=
 =?utf-8?b?bCBzeW1ib2zigJk/?=
In-Reply-To: <49071F3E.9030409@gmx.de>
References: <ge710s$m1c$1@ger.gmane.org> <49070D67.8080500@gmx.de>
	<ge73tt$oq$1@ger.gmane.org> <49071F3E.9030409@gmx.de>
Message-ID: <ge7aoo$sci$1@ger.gmane.org>

Johannes Luber jaluber-at-gmx.de |news.gmane.org| schreef:
> Hendrik Maryns schrieb:
>> Johannes Luber schreef:
>>> Hendrik Maryns schrieb:
>>>> Hi,
>>>>
>>>> I want to define a LABEL lexer rule which should match almost anything.
>>>>  Let?s say any non-control Unicode symbol.  Antlr wouldn?t accept .* or
>>>> .+.  I probably don?t want a closing brace in there since it is a
>>>> lisp-like grammar, but even space would be fine (although it probably
>>>> won?t occur), so I did ~(')')+ but that feels like a hack.  Can I use
>>>> POSIX regex classes such as p{alphnum} or something of the like?
>>> Currently ANTLR doesn't support Unicode classes. The only workaround
>>> would be to define manually all code points (manually means
>>> semi-automatic via use of some existing table as starting point). You
>>> should be aware that ANTLR doesn't accept code points above \uffff, so
>>> you'd have to translate UTF-32 into UTF-16 surrogates.
>> This is what it already seem to do internally, see the attached image
>> Antlrworks produced.
> 
> It looks to me as if the code handles merely UCS-2 and not UTF-16.
> Without seeing at least rule you used as input I can't be entirely sure,
> though.
>>> BTW, while it at first seems to be good idea to this kind of
>>> discrimination in the lexer, you get far better error messages if you
>>> push the error checking into the parser. Doing so requires merely to
>>> make the lexer discriminate the potential classes in the minimal way. If
>>> you like I can send you a lexer of mine using this strategy for
>>> comparison purposes.
>> I don?t understand this.   What do you mean by ?this kind of
>> discriminations?
> 
> I mean checking the input in such way that no illegal character is used
> to create a token, but making the lexer bail out immediately. Then your
> error messages won't be able to say much about the context.

It took me a while to parse this, but I think I understand you now.
There remains the question how the parser is then supposed to find out
that the token is illegal.

>> and in which way am I putting it in the lexer and could
>> push it into the parser?  I am afraid I am too new in this area to
>> follow you here.
> 
> Let's assume that identifiers may not start with uppercase letters. Then
> the above mentioned method would be to define the rule as:
> 
> ident: LOWERCASE (LOWERCASE | UPPERCASE)*;
> 
> My proposal is to use:
> 
> ident: (LOWERCASE | UPPERCASE)+;
> 
> Then the parser can tell you that "identifier PascalCase starts with an
> uppercase character".

And how would it do that?  What would I have to specify in order for the
parser to check for that?

H.
-- 
Hendrik Maryns
http://tcl.sfs.uni-tuebingen.de/~hendrik/
==================
Ask smart questions, get good answers:
http://www.catb.org/~esr/faqs/smart-questions.html
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 257 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20081028/ba65b5ab/attachment.bin 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 257 bytes
Desc: OpenPGP digital signature
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20081028/ba65b5ab/attachment-0001.bin 

From jbb at acm.org  Tue Oct 28 08:36:59 2008
From: jbb at acm.org (John B. Brodie)
Date: Tue, 28 Oct 2008 11:36:59 -0400
Subject: [antlr-interest] Debugging: how? (Why do I get
	MismatchedTokenException or UnwantedTokenException?)
	Unhelpful error messages.
In-Reply-To: <ge7422$n0$1@ger.gmane.org>
References: <ge7422$n0$1@ger.gmane.org>
Message-ID: <200810281136.59755.jbb@acm.org>

Greetings!

Hendrik Maryns asked:
> I showed you my grammar yesterday. ?Now trying it out on some simple
> inputs blows me away right away: it doesn?t even parse anything.

Your problem seems to be with your Lexer rule for LABEL which is :

LABEL : ~(')')+ ;

this means that any sequence of characters that is not a ')' must be a LABEL.

another problem is that ')' is not matched by any Lexer rule. did you want 
OPEN and CLOSE to be parens?

> For example, if I give ?(word x Einf?hrung)? as input to the rule
> ?formula?,

so all of the characters but the last are consumed as a LABEL token and we are 
left with a ')' which is not matched by any Lexer rule.

> I get MismatchedTokenException (0!=0). ?Strangely enough, I
> do not think 0 is not equal to 0, but I have no idea what this is
> supposed to tell me.

I do not use AntlrWorks so can not help here. But I have seen similar messages 
when I have not re-compiled every source file after applying a change to a 
grammar.

> If I feed it to formulaList, I get an UnwantedTokenException followed by
> an EOF, which doesn?t make me any wiser at this point.

Yes. Confusing message. Which is just one of the reasons I do not use 
AntlrWorks.... (i assume you are using AntlrWroks? if so, maybe there is more 
useful information in the console window?)

When I use a command line based test setup, I get thus:

line 1:18 no viable alternative at character ')'
line 1:0 extraneous input '(word x Einf?hrung' expecting EOF

> Grateful for any suggestions,
>.....remainder of message snipped....

Hope this helps
__
   -jbb

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20081028/c578849e/attachment.html 

From thomas.dill at teleport.ch  Tue Oct 28 09:05:36 2008
From: thomas.dill at teleport.ch (Thomas Dill)
Date: Tue, 28 Oct 2008 17:05:36 +0100
Subject: [antlr-interest] unexpected NoViableAltException
Message-ID: <00e001c93917$044f59b0$0cee0d10$@dill@teleport.ch>

Hi,

 

I'm new in developing with ANTLR and I created a short grammar for a
particular type of file (both are attached). If a fieldname is equal to a
keyword or the fieldname starts with the name of a keyword followed by a '_'
I got a 'NoViableAltException(0@[null])' (with antlrworks). Why is that? 

 

Can somebody help me, please?

 

Thanks!

 

Best regards,

Thomas

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20081028/9a23053a/attachment.html 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: MasterFileDescription.g
Type: application/octet-stream
Size: 2607 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20081028/9a23053a/attachment.obj 
-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: dataobj.txt
Url: http://www.antlr.org/pipermail/antlr-interest/attachments/20081028/9a23053a/attachment.txt 

From parrt at cs.usfca.edu  Tue Oct 28 10:25:21 2008
From: parrt at cs.usfca.edu (Terence Parr)
Date: Tue, 28 Oct 2008 10:25:21 -0700
Subject: [antlr-interest] Duplicate members when generating code with 2
	import levels in Java with ANTLR-3.1.1
In-Reply-To: <530199.77357.qm@web55905.mail.re3.yahoo.com>
References: <530199.77357.qm@web55905.mail.re3.yahoo.com>
Message-ID: <A9828CC2-092E-441D-9A40-15B59CB4F3E6@cs.usfca.edu>


On Oct 28, 2008, at 1:35 AM, Loring Craymer wrote:

> Ter--
>
> Indirect execution is a very weak form of polymorphism, and the  
> mechanism you describe depends on compiler type awareness.
>
> Assume that you have two versions of rule b, defined in separate but  
> included grammars
>
> b[int foo] : a b c ;  // version 1
>
> b returns int :  d e f ; // version 2
>
> These have different type signatures; in an OO system, b[int x]  
> would translate to version 1, and z = b would imply version 2.

  isn't that overloading rather than overwriting? nothing to do with  
object-oriented programming if I remember correctly.

> As you mention, interpretation depends on the message sent, and part  
> of the message are the data type expectations.

but unless you are using ML and so on,  most languages are not  
polymorphic on the argument types or the return signatures.

> On another note, ANTLR lacks the data abstractions that go with the  
> OO idea of inheritance.  The mechanism implemented in ANTLR 3 looks  
> much more like Python's module import facility than it does  
> inheritance.

Can you give an example of what you can't do with antlr's grammar  
composition that you could do with an ordinary object oriented  
language?  *the* quintessential example of polymorphism is the one I  
gave where you inherit method that calls a method overridden in the  
subclass. If your language doesn't do that, it's not polymorphic. what  
you're talking about is something totally different: parameter-based  
polymorphism or simple overloading as you describe above.
Ter

From parrt at cs.usfca.edu  Tue Oct 28 10:28:53 2008
From: parrt at cs.usfca.edu (Terence Parr)
Date: Tue, 28 Oct 2008 10:28:53 -0700
Subject: [antlr-interest] add a tree visitor?
In-Reply-To: <49072C77.8090903@jazillian.com>
References: <0F4A5141-0913-498F-9251-C278BCC930BF@cs.usfca.edu>
	<49072C77.8090903@jazillian.com>
Message-ID: <98910715-FD20-4016-9564-E4FEBBBA74F4@cs.usfca.edu>


On Oct 28, 2008, at 8:15 AM, Andy Tripp wrote:
> Yep, that's the Visitor design pattern...seems like a good thing to  
> add.
> The TreeVisitorAction method is usually called "accept()", though.

I decided to allow both pre-and post:

/** How to execute code for node t when a visitor visits node t.   
Execute
  *  pre() before visiting children and execute post() after visiting  
children.
  */
public interface TreeVisitorAction {
     /** Execute an action before visiting children of t.  Return t or
      *  a rewritten t.  Children of returned value will be visited.
      */
     public Object pre(Object t);

     /** Execute an action after visiting children of t.  Return t or
      *  a rewritten t.  It is up to the visitor to decide what to do
      *  with the return value.
      */
     public Object post(Object t);
}

> And the Java 1.5 foreach and generics would make the code cleaner.

I hate that syntax because it looks so nice, but crashes if you have a  
null list. stupidest thing I've ever seen in my life. plus, I can't  
rely on 1.5 yet.

I agree it would be nice if that syntax did something nice. :) don't  
get me started on how bad the generic stuff works when you want  
List<AST> to work with List<MyAST>. blech. renders it useless. sorry  
to be so negative on a Tuesday morning. Just getting sick of all of  
these Java "enhancements".

Ter

From ron.hunter-duvar at oracle.com  Tue Oct 28 13:31:40 2008
From: ron.hunter-duvar at oracle.com (Ron Hunter-Duvar)
Date: Tue, 28 Oct 2008 14:31:40 -0600
Subject: [antlr-interest] Unspecified licenses for grammars on Antlr.org
Message-ID: <490776AC.2040201@oracle.com>

Hi,

I noticed that some of the grammars listed on 
http://www.antlr.org/grammar/list such as the Java 1.5 grammar have a 
license specified, but others do not. Is there some default license that 
is considered to apply to the unspecified ones? Are they considered 
public domain? Or are they considered property of the author(s) and 
would need to have a license negotiated to use? Of course, probably few 
if any of us here are lawyers, but I'm wondering what the community's 
view is.

Thanks,
Ron

-- 
Ron Hunter-Duvar | Software Developer V | 403-272-6580
Oracle Service Engineering
Gulf Canada Square 401 - 9th Avenue S.W., Calgary, AB, Canada T2P 3C5

All opinions expressed here are mine, and do not necessarily represent
those of my employer.


From lgcraymer at yahoo.com  Tue Oct 28 13:42:16 2008
From: lgcraymer at yahoo.com (Loring Craymer)
Date: Tue, 28 Oct 2008 13:42:16 -0700 (PDT)
Subject: [antlr-interest] Duplicate members when generating code with 2
	import levels in Java with ANTLR-3.1.1
Message-ID: <882843.33141.qm@web55902.mail.re3.yahoo.com>





----- Original Message ----
> From: Terence Parr <parrt at cs.usfca.edu>
> To: Loring Craymer <lgcraymer at yahoo.com>
> Cc: antlr-interest Interest <antlr-interest at antlr.org>
> Sent: Tuesday, October 28, 2008 10:25:21 AM
> Subject: Re: [antlr-interest] Duplicate members when generating code with 2 import levels in Java with ANTLR-3.1.1
> 
> 
> On Oct 28, 2008, at 1:35 AM, Loring Craymer wrote:
> 
> > Ter--
> >
> > Indirect execution is a very weak form of polymorphism, and the? 
> > mechanism you describe depends on compiler type awareness.
> >
> > Assume that you have two versions of rule b, defined in separate but? 
> > included grammars
> >
> > b[int foo] : a b c ;? // version 1
> >
> > b returns int :? d e f ; // version 2
> >
> > These have different type signatures; in an OO system, b[int x]? 
> > would translate to version 1, and z = b would imply version 2.
> 
> ? isn't that overloading rather than overwriting? nothing to do with? 
> object-oriented programming if I remember correctly.

Overwriting?? What does that have to do with polymorphism?? Maybe you are thinking of Java's type erasure in generics.? Overloading is a mechanism for implementing polymorphism.

> 
> > As you mention, interpretation depends on the message sent, and part? 
> > of the message are the data type expectations.
> 
> but unless you are using ML and so on,? most languages are not? 
> polymorphic on the argument types or the return signatures.

Actually, modern languages are, although the polymorphism is static.? Consider the usual Java?examples
toString()
toString(int indent)
...

Java supports argument polymorphism, but not return type polymorphism; I believe that the same is true for C++ and C#, but am not sure of that--C++ name mangling is capable of supporting return type polymorphism.

> 
> > On another note, ANTLR lacks the data abstractions that go with the? 
> > OO idea of inheritance.? The mechanism implemented in ANTLR 3 looks? 
> > much more like Python's module import facility than it does? 
> > inheritance.
> 
> Can you give an example of what you can't do with antlr's grammar? 
> composition that you could do with an ordinary object oriented? 
> language?? *the* quintessential example of polymorphism is the one I? 
> gave where you inherit method that calls a method overridden in the? 
> subclass. If your language doesn't do that, it's not polymorphic. what? 
> you're talking about is something totally different: parameter-based? 
> polymorphism or simple overloading as you describe above.

Unless I am very much mistaken, composed grammars do not?incorporate action code from subgrammars, other than that embedded in productions.? That is, data and behavioral semantics from?subgrammars are not inherited and thus the OO paradigm is violated.? Productions are also?not polymorphic, as discussed above.

I repeat:? as implemented, grammar composition is almost identical to Python's module imports and does not fit the OO inheritance model except by a long stretch of the imagination.

--Loring


> Ter



      

From parrt at cs.usfca.edu  Tue Oct 28 13:48:27 2008
From: parrt at cs.usfca.edu (Terence Parr)
Date: Tue, 28 Oct 2008 13:48:27 -0700
Subject: [antlr-interest] Duplicate members when generating code with 2
	import levels in Java with ANTLR-3.1.1
In-Reply-To: <882843.33141.qm@web55902.mail.re3.yahoo.com>
References: <882843.33141.qm@web55902.mail.re3.yahoo.com>
Message-ID: <029513A3-EE44-485B-AFA4-AF08AEC9D4B0@cs.usfca.edu>


On Oct 28, 2008, at 1:42 PM, Loring Craymer wrote:

>>   isn't that overloading rather than overwriting? nothing to do with
>> object-oriented programming if I remember correctly.
>
> Overwriting?

overriding...voice recog error.

>>> As you mention, interpretation depends on the message sent, and part
>>> of the message are the data type expectations.
>>
>> but unless you are using ML and so on,  most languages are not
>> polymorphic on the argument types or the return signatures.
>
> Actually, modern languages are, although the polymorphism is  
> static.  Consider the usual Java examples
> toString()
> toString(int indent)
> ...
>
> Java supports argument polymorphism, but not return type polymorphism;

that's overloading not polymorphism bro.

foo(X x) {;}
foo(Y y) {;}

Object o = ...;
foo(o);

which does it execute?  Java says "huh?" and polym. calls would at  
runtime do the right dispatch.

>>> On another note, ANTLR lacks the data abstractions that go with the
>>> OO idea of inheritance.  The mechanism implemented in ANTLR 3 looks
>>> much more like Python's module import facility than it does
>>> inheritance.
>>
>> Can you give an example of what you can't do with antlr's grammar
>> composition that you could do with an ordinary object oriented
>> language?  *the* quintessential example of polymorphism is the one I
>> gave where you inherit method that calls a method overridden in the
>> subclass. If your language doesn't do that, it's not polymorphic.  
>> what
>> you're talking about is something totally different: parameter-based
>> polymorphism or simple overloading as you describe above.
>
> Unless I am very much mistaken, composed grammars do not incorporate  
> action code from subgrammars, other than that embedded in  
> productions.  That is, data and behavioral semantics from  
> subgrammars are not inherited and thus the OO paradigm is violated.   
> Productions are also not polymorphic, as discussed above.

Actions?  You mean fields?  that's not necessary for polymorphism.

> I repeat:  as implemented, grammar composition is almost identical  
> to Python's module imports and does not fit the OO inheritance model  
> except by a long stretch of the imagination.

We're talking polymorphism of rules.  Inheritance is an include minus  
polymorphism and the type eqiv stuff.

Ter

From stoneyrh at gmail.com  Tue Oct 28 14:11:31 2008
From: stoneyrh at gmail.com (Ronghui Yu)
Date: Tue, 28 Oct 2008 17:11:31 -0400
Subject: [antlr-interest] unexpected NoViableAltException
In-Reply-To: <-2754477844634371724@unknownmsgid>
References: <-2754477844634371724@unknownmsgid>
Message-ID: <c0b1975b0810281411k246b96e3yc113b2edab66fabb@mail.gmail.com>

check with this
http://www.antlr.org/wiki/pages/viewpage.action?pageId=1741



On 10/28/08, Thomas Dill <thomas.dill at teleport.ch> wrote:
>
>  Hi,
>
>
>
> I'm new in developing with ANTLR and I created a short grammar for a
> particular type of file (both are attached). If a fieldname is equal to a
> keyword or the fieldname starts with the name of a keyword followed by a '_'
> I got a 'NoViableAltException(0@[null])' (with antlrworks). Why is that?
>
>
>
> Can somebody help me, please?
>
>
>
> Thanks!
>
>
>
> Best regards,
>
> Thomas
>
>
>
>


-- 
===========================
Regards
Ronghui Yu
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20081028/8be896c9/attachment.html 

From antlr at jazillian.com  Tue Oct 28 15:20:39 2008
From: antlr at jazillian.com (Andy Tripp)
Date: Tue, 28 Oct 2008 18:20:39 -0400
Subject: [antlr-interest] add a tree visitor?
In-Reply-To: <98910715-FD20-4016-9564-E4FEBBBA74F4@cs.usfca.edu>
References: <0F4A5141-0913-498F-9251-C278BCC930BF@cs.usfca.edu>
	<49072C77.8090903@jazillian.com>
	<98910715-FD20-4016-9564-E4FEBBBA74F4@cs.usfca.edu>
Message-ID: <49079037.3070003@jazillian.com>

Terence Parr wrote:

>> And the Java 1.5 foreach and generics would make the code cleaner.
> 
> I hate that syntax because it looks so nice, but crashes if you have a 
> null list. stupidest thing I've ever seen in my life. 


Hehe, yea, I guess I've finally just gotten used to allocating an empty
List at each declaration.

> plus, I can't rely 
> on 1.5 yet.

That's too bad. Are there really a fair number of people who aren't on
1.5 yet? 

> 
> I agree it would be nice if that syntax did something nice. :) don't get 
> me started on how bad the generic stuff works when you want List<AST> to 
> work with List<MyAST>. blech. renders it useless. sorry to be so 
> negative on a Tuesday morning. Just getting sick of all of these Java 
> "enhancements".

Yea, I was very skeptical about the 1.5 enhancements, but now I'm a convert.
Though of course I wretch when confronted with having to use generic wildcards,
like everyone else :)

Andy
> 
> Ter
> 


From parrt at cs.usfca.edu  Tue Oct 28 17:00:21 2008
From: parrt at cs.usfca.edu (Terence Parr)
Date: Tue, 28 Oct 2008 17:00:21 -0700
Subject: [antlr-interest] add a tree visitor?
In-Reply-To: <49079037.3070003@jazillian.com>
References: <0F4A5141-0913-498F-9251-C278BCC930BF@cs.usfca.edu>
	<49072C77.8090903@jazillian.com>
	<98910715-FD20-4016-9564-E4FEBBBA74F4@cs.usfca.edu>
	<49079037.3070003@jazillian.com>
Message-ID: <00BE79C6-A9DF-4B08-A0C5-4D4F0AEAA10E@cs.usfca.edu>


On Oct 28, 2008, at 3:20 PM, Andy Tripp wrote:
> Hehe, yea, I guess I've finally just gotten used to allocating an  
> empty
> List at each declaration.

yeah, it's amazing how it just crashes. blech.

>>
>> plus, I can't rely
>> on 1.5 yet.
>
> That's too bad. Are there really a fair number of people who aren't on
> 1.5 yet?

i guess we're getting to that point where we can jump forward...was  
worried about java micro edition and other smaller runtimes.

>>
>> I agree it would be nice if that syntax did something nice. :)  
>> don't get
>> me started on how bad the generic stuff works when you want  
>> List<AST> to
>> work with List<MyAST>. blech. renders it useless. sorry to be so
>> negative on a Tuesday morning. Just getting sick of all of these Java
>> "enhancements".
>
> Yea, I was very skeptical about the 1.5 enhancements, but now I'm a  
> convert.
> Though of course I wretch when confronted with having to use  
> generic wildcards,
> like everyone else :)

Yeah, the guy who impl'd that was a total genius; i can't understand  
it.  I know him. He *is* a genius.  I have trouble keeping up with  
the guy when he talks. :)

Ter

From sebastien.laigre at gmail.com  Wed Oct 29 03:20:38 2008
From: sebastien.laigre at gmail.com (=?ISO-8859-1?Q?S=E9bastien_Laigre?=)
Date: Wed, 29 Oct 2008 11:20:38 +0100
Subject: [antlr-interest] Linux -> windows, execution problem
Message-ID: <842c20050810290320v595b51e5k74154f47cabaa905@mail.gmail.com>

Hello everbody !

I have a program (which works with antlr 2.7.6) which works very well on
linux (kubuntu 8.04) but not on windows. In fact, lexer and parsers are well
generated (on both platforms), but when I execute on windows, the program
handle an exception when it encounters the first char ! Then it stops...
For example if I try to analyze "DT NN.", it writes "exception : unexpected
char 'D' "
I have defined dt : "DT" in the parser but it doesn't recognize...

Do I have to regenerate lexer and parser when compiling on windows ? Do I
have to activate an option ??

Thank you in advance for any help.

Sebastien
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20081029/ec81af3f/attachment.html 

From Vitaliy at dbsophic.com  Wed Oct 29 05:05:10 2008
From: Vitaliy at dbsophic.com (Vitaliy)
Date: Wed, 29 Oct 2008 14:05:10 +0200
Subject: [antlr-interest] Error handeling - Illigal input termination
Message-ID: <B0DE8B66453D0F4AA67D2A150934999B048C0D8C62@ex01.dbsophicHQ.com>

Hi,



I would like Antlr to fail upon any error, instead of trying to recover.

I've managed to do this for almost all types of errors, following the directives in the reference,

but for some reason if there is an illegal input termination, Antlr won't report an error for it.



That is, If we've got the input:

LegalStatement1,

LegalStatement2,

...

LegalStatementN,

IllegalStatement,



Antlr would stop on LegalStatementN,

Instead of reporting an error for IllegalStatement.



Following are all the steps I took to achieve the bail-upon-any-error behavior:



1.       Overriding NextToken method of the lexer, so it would always throw an exception

2.       Overriding methods Mismatch and RecoverFromMismatchedSet of the parser, so they would always throw an exception

3.       Adding @parser::rulecatch directive, so a RecognitionException would always be thrown.



So, what did I miss?



I would really appreciate any help,

Vitaliy

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20081029/2ed75730/attachment.html 

From kitsune2097 at gmail.com  Wed Oct 29 05:40:30 2008
From: kitsune2097 at gmail.com (Fabio Santschi)
Date: Wed, 29 Oct 2008 13:40:30 +0100
Subject: [antlr-interest] Can anyone help me convert this antlr 2.0 grammar
	file to antlr 3.0 syntax?
Message-ID: <44b6a1fc0810290540p104424f1j700a80570f94a0d2@mail.gmail.com>

I mistakenly posted this on the gouple groups mirror page.

I converted the 'easy' parts (fragment,  @header and @member
declerations etc.), but since I'm new to Antlr I have  a really hard
time converting the Tree statements etc.

The grammar file can be found here:

http://jena.cvs.sourceforge.net/viewvc/*checkout*/jena/jena2/src/com/...<http://jena.cvs.sourceforge.net/viewvc/*checkout*/jena/jena2/src/com/hp/hpl/jena/n3/n3.g>

Below you can find some examples where I run into problems:

[For instance, I have problems with:]

n3Directive0!:
                d:AT_PREFIX ns:nsprefix u:uriref
                {directive(#d, #ns, #u);}
                ;

[or]

propertyList![AST subj]
        : NAME_OP! anonnode[subj] propertyList[subj]
        | propValue[subj] (SEMI propertyList[subj])?
        |               // void : allows for [ :a :b ] and empty list "; .".

        ;

propValue [AST subj]
        :  v1:verb objectList[subj, #v1]
                // Reverse the subject and object
        |  v2:verbReverse subjectList[subj, #v2]
        ;

subjectList![AST oldSub, AST prop]
        : obj:item { emitQuad(#obj, prop, oldSub) ; }
                (COMMA subjectList[oldSub, prop])? ;
objectList! [AST subj, AST prop]
        : obj:item { emitQuad(subj,prop,#obj) ; }
                (COMMA objectList[subj, prop])?
    | // Allows for empty list ", ."
    ;
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20081029/6c5a1a55/attachment.html 

From heinrich at silasvalley.com  Wed Oct 29 09:39:15 2008
From: heinrich at silasvalley.com (Heinrich du Toit)
Date: Wed, 29 Oct 2008 18:39:15 +0200
Subject: [antlr-interest] what is best?
Message-ID: <490891B3.8010600@silasvalley.com>

Hi

this goes towards how predicates work...

First possbility:

a: ('{')=> b
    | c;
b: '{' ID '}';

second possibility:
a: b | c ;
b: ('{')=> '{' ID '}' ;

It's just an example but the question is where do I put the syn-pred for 
the best effect?
with backtrace enabled I'm guessing it will auto imlement the second option?

Thanks

From geoff_hendrey at yahoo.com  Wed Oct 29 12:53:27 2008
From: geoff_hendrey at yahoo.com (Geoff hendrey)
Date: Wed, 29 Oct 2008 12:53:27 -0700 (PDT)
Subject: [antlr-interest] (POST THIRD TIME) how to bail on
	MissingTokenException
Message-ID: <241850.70939.qm@web31806.mail.mud.yahoo.com>

Can someone on the list at least "ack" this question. Is it a really stupid question or something? I have searched as many available forms of documentation as I can find, including the Antlr printed book, and I can't find the answer. Please, pretty please with sugar on top, can someone point me to the answer? (original posts below)



----- Forwarded Message ----
From: Geoff hendrey <geoff_hendrey at yahoo.com>
To: antlr-interest at antlr.org
Sent: Monday, October 27, 2008 6:16:10 PM
Subject: how to bail on MissingTokenException


Sorry to repost my question, but I'm very eager to get a response on how to make the parser bail out (abort) on MissingTokenException.

Any advice?



----- Forwarded Message ----
From: Geoff hendrey <geoff_hendrey at yahoo.com>
To: antlr-interest at antlr.org
Sent: Sunday, October 26, 2008 5:02:53 PM
Subject: how to bail on MissingTokenException


Hi,

I recently upgraded to ANTLR 3.1.1.

I want to know how to handle MissingTokenException, so that the paring throws a RecognitionException when there is a missing token.

My grammar file aready has this:

@members{
protected void mismatch(IntStream input, int ttype, BitSet follow)throws RecognitionException{
    throw new MismatchedTokenException(ttype, input);
}    
public Object recoverFromMismatchedSet(IntStream input, RecognitionException e, BitSet follow)throws RecognitionException{
    throw e;
}

}
@rulecatch{
catch(RecognitionException e){
    throw e;
}

Can you tell me what to add so that MissingTokenException will throw a RecognitionException and abort the parsing?

(also, this is a bit of a tangent, but why do you document the ANTLR runtime API's Java Classes using Doxygen? I find it much harder to read and navigate than JavaDoc. Are JavaDocs available?)

-geoff
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20081029/8d3098a0/attachment.html 

From parrt at cs.usfca.edu  Wed Oct 29 12:58:28 2008
From: parrt at cs.usfca.edu (Terence Parr)
Date: Wed, 29 Oct 2008 12:58:28 -0700
Subject: [antlr-interest] (POST THIRD TIME) how to bail on
	MissingTokenException
In-Reply-To: <241850.70939.qm@web31806.mail.mud.yahoo.com>
References: <241850.70939.qm@web31806.mail.mud.yahoo.com>
Message-ID: <71F3CF25-19B2-4DA8-A9E2-047758FD67DF@cs.usfca.edu>

Hi Geoff, isn't there something in the source code that says "  
override me if you want to turn off automatic in-line error recovery  
for mismatch token"?
Ter

From Fred.Brisard at ca.com  Wed Oct 29 13:12:46 2008
From: Fred.Brisard at ca.com (Brisard, Fred D)
Date: Wed, 29 Oct 2008 16:12:46 -0400
Subject: [antlr-interest] Enforcing that a statement parm is only specified
	one time
Message-ID: <7D50572C73BC634F92EE211BFF16F4A106DC91D7@USILMS12.ca.com>

Is there a standard pattern for allowing a single instance of a phrase
on a given statement?

For example, I have statement of the syntax of

Stmtname [keyword1 keyvalue1] [keyword2 keyvalue2]

I want to allow keyword1 or keyword2 to be specified in any order but I
don't want to allow the specification of either keyword more than once.

I have some statements with up to 8 different keywords that should only
occur once but in any order.

Thanks for any suggestions.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20081029/0f5c23dd/attachment.html 

From jimi at temporal-wave.com  Wed Oct 29 13:45:44 2008
From: jimi at temporal-wave.com (Jim Idle)
Date: Wed, 29 Oct 2008 13:45:44 -0700
Subject: [antlr-interest] Enforcing that a statement parm is only
 specified one time
In-Reply-To: <7D50572C73BC634F92EE211BFF16F4A106DC91D7@USILMS12.ca.com>
References: <7D50572C73BC634F92EE211BFF16F4A106DC91D7@USILMS12.ca.com>
Message-ID: <1225313144.4826.467.camel@jimi>

On Wed, 2008-10-29 at 16:12 -0400, Brisard, Fred D wrote:

> Is there a standard pattern for allowing a single instance of a phrase
> on a given statement?
> 
> For example, I have statement of the syntax of
> 
> Stmtname [keyword1 keyvalue1] [keyword2 keyvalue2]
> 
> I want to allow keyword1 or keyword2 to be specified in any order but
> I don?t want to allow the specification of either keyword more than
> once.
> 
> I have some statements with up to 8 different keywords that should
> only occur once but in any order.


Use semantic errors for this as the feedback to the users is much better
than "Syntax error at...". 

Lots of ways to do it but something like (not checked for syntax, just
typed into the email):

keyWordSet

Scope {
 int key1;
 int key2; // etc
}
@init
{
   $keyWordSet::key1 = 0;
  $keyWordSet::key2 = =
  // etc
}
: keywords*
;

keywords
 : KEY1 { if ( $keyWordSet::key1++ > 1) { myErrorHandler(E_TOO_MANY,
$KEY1); }
 | etc


Probably better to do this in the AST parser if you are using one. Your
error will then say:

Error: line 2, offset nn : You can only specify 'flort' once in this
construct.
blah blah flort blah blah flort
                          ^

If you want to be clever, you can record the first location in the scope
and indicate where it was first specified. You could also classify such
things as warnings rather than errors as saying the same thing twice or
more just confirms that is what they want:

Warning line 2, offset nn : You have said 'plumber' 12 times in the same
construct. Are you campaigning?
wink joe the plumber plumber joe wink joe the bloody plumber plumber
plumber
                     ^                               ^       ^       ^


Basically, for anything other than a one off script parser or something,
never try to do things like this in the grammar itself, ALWAYS accept
anything that is vaguely legal, count or flag what is present, then give
specific errors. Similar things include:

Error: line 2, offset nn : You cannot combine 'baseball' and 'obama' in
the same timeslot.
schedule blah blah obama blah blah baseball
                                   ^

Rather than:

Syntax error near 'baseball', perhaps you meant a real sport like
'cricket'?

And so on.


Jim
 

> 
> Thanks for any suggestions.
> 
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
> 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20081029/a0aaf151/attachment.html 

From brent.yates at gmail.com  Wed Oct 29 13:55:21 2008
From: brent.yates at gmail.com (Brent Yates)
Date: Wed, 29 Oct 2008 16:55:21 -0400
Subject: [antlr-interest] Enforcing that a statement parm is only
	specified one time
In-Reply-To: <1225313144.4826.467.camel@jimi>
References: <7D50572C73BC634F92EE211BFF16F4A106DC91D7@USILMS12.ca.com>
	<1225313144.4826.467.camel@jimi>
Message-ID: <6edc6c380810291355v46197e2n60df53c29cc5d99d@mail.gmail.com>

> Syntax error near 'baseball', perhaps you meant a real sport like 'cricket'?

Ok,  I was laughing until this line ;)

Brent

From jimi at temporal-wave.com  Wed Oct 29 14:59:32 2008
From: jimi at temporal-wave.com (Jim Idle)
Date: Wed, 29 Oct 2008 14:59:32 -0700
Subject: [antlr-interest] Enforcing that a statement parm is only
 specified one time
In-Reply-To: <6edc6c380810291355v46197e2n60df53c29cc5d99d@mail.gmail.com>
References: <7D50572C73BC634F92EE211BFF16F4A106DC91D7@USILMS12.ca.com>
	<1225313144.4826.467.camel@jimi>
	<6edc6c380810291355v46197e2n60df53c29cc5d99d@mail.gmail.com>
Message-ID: <1225317572.4826.468.camel@jimi>

On Wed, 2008-10-29 at 16:55 -0400, Brent Yates wrote:

> > Syntax error near 'baseball', perhaps you meant a real sport like 'cricket'?
> 
> Ok,  I was laughing until this line ;)
> 


I was going to use 'football' but that means American football here of
course ;-)


> Brent
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20081029/552c1da2/attachment.html 

From lgcraymer at yahoo.com  Wed Oct 29 15:08:40 2008
From: lgcraymer at yahoo.com (Loring Craymer)
Date: Wed, 29 Oct 2008 15:08:40 -0700 (PDT)
Subject: [antlr-interest] Enforcing that a statement parm is only
	specified one time
References: <7D50572C73BC634F92EE211BFF16F4A106DC91D7@USILMS12.ca.com>
Message-ID: <950401.32605.qm@web55903.mail.re3.yahoo.com>

The cleanest approach is just to add items to a set (or table) as they are matched; in case of duplicates, post a warning or error message directly instead of throwing an exception that would terminate syntactic analysis.

--Loring




________________________________
From: "Brisard, Fred D" <Fred.Brisard at ca.com>
To: antlr-interest at antlr.org
Sent: Wednesday, October 29, 2008 1:12:46 PM
Subject: [antlr-interest] Enforcing that a statement parm is only specified one time


Is there a standard pattern for allowing a singleinstance of a phrase on a given statement?
For example, Ihave statement of the syntax of
Stmtname [keyword1 keyvalue1] [keyword2 keyvalue2]
I want to allow keyword1 or keyword2 to be specified in any order but I don?t want to allow the specification of either keyword more than once.
I have some statements with up to 8 different keywords that should only occur once but in any order.
Thanks for any suggestions.


      
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20081029/a4dccbc5/attachment.html 

From parrt at cs.usfca.edu  Wed Oct 29 15:12:47 2008
From: parrt at cs.usfca.edu (Terence Parr)
Date: Wed, 29 Oct 2008 15:12:47 -0700
Subject: [antlr-interest] Enforcing that a statement parm is only
	specified one time
In-Reply-To: <1225313144.4826.467.camel@jimi>
References: <7D50572C73BC634F92EE211BFF16F4A106DC91D7@USILMS12.ca.com>
	<1225313144.4826.467.camel@jimi>
Message-ID: <6EE1923A-1C6C-4842-8100-B37B9CA75064@cs.usfca.edu>

On Oct 29, 2008, at 1:45 PM, Jim Idle wrote:
> Warning line 2, offset nn : You have said 'plumber' 12 times in the  
> same construct. Are you campaigning?
> wink joe the plumber plumber joe wink joe the bloody plumber plumber  
> plumber
>                      ^                               ^       ^       ^
>
> Basically, for anything other than a one off script parser or  
> something, never try to do things like this in the grammar itself,  
> ALWAYS accept anything that is vaguely legal, count or flag what is  
> present, then give specific errors. Similar things include:
>
> Error: line 2, offset nn : You cannot combine 'baseball' and 'obama'  
> in the same timeslot.
> schedule blah blah obama blah blah baseball
>                                    ^

Error: line 2, offset nn: You're not an idiot, you're a maverick,  
you're VP is a maverick, and your mother looks like one too.  The  
horse you rode in on is a maverick too.

Terence

From parrt at cs.usfca.edu  Wed Oct 29 15:47:30 2008
From: parrt at cs.usfca.edu (Terence Parr)
Date: Wed, 29 Oct 2008 15:47:30 -0700
Subject: [antlr-interest] I'm way off topic,
	was [Enforcing that a statement parm is only specified one time]
In-Reply-To: <6EE1923A-1C6C-4842-8100-B37B9CA75064@cs.usfca.edu>
References: <7D50572C73BC634F92EE211BFF16F4A106DC91D7@USILMS12.ca.com>
	<1225313144.4826.467.camel@jimi>
	<6EE1923A-1C6C-4842-8100-B37B9CA75064@cs.usfca.edu>
Message-ID: <0E5F1DC4-6BEE-4B34-A43F-CB561513C803@cs.usfca.edu>

Oh, and I suppose we need some Obama ones too:

line 2: don't be so parsimonious with those semicolons; spread the  
wealth.

line 2: perhaps if you had more experience, you would know where to  
put semicolons.

ha! this is fun. Okay, back to work.

Ter

From braincode at gmail.com  Wed Oct 29 17:34:15 2008
From: braincode at gmail.com (brainstorm)
Date: Thu, 30 Oct 2008 01:34:15 +0100
Subject: [antlr-interest] IDENTifier rule not working for some tokens
In-Reply-To: <49002881.060bca0a.67c9.00deSMTPIN_ADDED@mx.google.com>
References: <32137c140810210228t1fdd99f0gf0ebf32fd1c7e672@mail.gmail.com>
	<1224605087.4489.63.camel@jimi>
	<32137c140810221527i11facd3aq2b6377596d640e61@mail.gmail.com>
	<49002881.060bca0a.67c9.00deSMTPIN_ADDED@mx.google.com>
Message-ID: <32137c140810291734r739bfb67h1f841b06bef141f4@mail.gmail.com>

On Thu, Oct 23, 2008 at 8:32 AM, Gavin Lambert <antlr at mirality.co.nz> wrote:
> At 11:27 23/10/2008, brainstorm wrote:
>>> options
>>> {
>>>         output = AST;
>>> //      backtrack = true;
>>>
>>> Don't use this unless there is no other readable way.
>>
>>What do you mean by that ? By the way, looks like it's the
>>preferred way for ANTLR if output is not defined:
>
> I think he was referring to the backtrack option.  While it can sometimes be
> useful, it can significantly slow performance of the parser, so it's better
> to avoid it if possible.
>
>>In fact, I hit a problem when defining those tokens:
>>
>>tokens {
>>(... other tokens defined...)
>>INT = 'INT';
>>}
>>
>>If I just declare "INT" (only LHS), ANTLR complains:
>>
>>warning(105): CL.g:120:14: no lexer rule corresponding to token:
>>INT
>>
>>I have to keep writing redundant statements like: INT = 'INT'; why
>>is that ?
>
> Using INT by itself defines what's called an "imaginary token" -- one that
> cannot match any input by itself, but can be emitted from either the lexer
> or parser via explicit code.
>
> Using INT='INT' defines a real token that matches that literal text in the
> input -- it's exactly identical to defining the following rule at the top of
> your grammar:
>
> INT: 'INT';
>
> So it's not redundant nor a duplication -- one is defining the name of the
> token while the other is defining the text that it matches.


I understand the concept, but I'm more on the side of:

1) Declaring an imaginary token without defining it: using the
imaginary token as real token *by default*.
2) If you want to override behaviour 1 (imaginary token differs from
the real one), actually *define* the token, for instance: ASSIG =
':=';

I think this could lead to way cleaner grammars, getting rid of
fragments and other hacks. I'm more on the side of "convention over
configuration"[1] ideal applied to code. The less verbose, the
simpler, the better.

[1] http://en.wikipedia.org/wiki/Convention_over_configuration

So I think I'm sticking with the warnings for now :_/ Any way of
silencing them ?

By the way, I've been trying the NoCaseFileStream, and cannot get it
working right for jp0:

PROGRAM

yields:

line 1:0 no viable alternative at character 'P'
line 1:2 no viable alternative at character 'O'
line 1:2 no viable alternative at character 'O'
line 1:3 no viable alternative at character 'G'
line 1:5 no viable alternative at character 'A'
line 1:5 no viable alternative at character 'A'
line 1:6 no viable alternative at character 'M'

Anyone knows why is this happening ? By the way, having to use an
special FileStream, means no practical way to use ANTLRWorks excellent
debugger... meaning: back to hard dark days of PCCTS and C++... any
easy workaround not involving setting up eclipse or similar external
IDE for more visual debugging ?

And by the way, I'm not the one to restart the case insensitivity &
i18n thread, but I definitively advocate for a simple ASCII case
insensitive FileStreamer *by default*, extending it for weird cases
such as non-ASCII exotic languages. Or perhaps a useful caseInsensitve
option ? Please, Terence, please, take it back ;P

Thanks in advance !
Roman


>
> If you did want to create an imaginary token for use in the lexer, there is
> however one somewhat annoying quirk where it also generates the warning you
> mentioned above.  You can either choose to ignore this warning (which is why
> it's a warning, not an error), or remove it from the tokens section and
> declare it as a rule like this instead:
>
> fragment INT: '0';
>
> The important points here are that it should be a fragment rule (since you
> don't want ANTLR to try to generate it itself, you just want to create a
> token id that you can refer to from other rules), and unless you're actually
> using it within the matching side of another lexer rule then its actual
> contents don't really matter (but they can't be empty or you'll get another
> warning).
>
>

From me.tk82c at gmail.com  Wed Oct 29 17:47:37 2008
From: me.tk82c at gmail.com (me tk82c)
Date: Wed, 29 Oct 2008 21:47:37 -0300
Subject: [antlr-interest] Antlr dependencies
Message-ID: <277aaded0810291747w1d609838k43c249f0254ad1a7@mail.gmail.com>

Hello! I'm trying to create a language to dynamic run on my J2ME and .NET
Compact Framework app.

What kind of dependency I have with jar files of ANTLR? I have to deploy the
entire antlr.jar to put the things to work?

thanks!

tk82c
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20081029/84b2a825/attachment.html 

From jimi at temporal-wave.com  Wed Oct 29 18:08:55 2008
From: jimi at temporal-wave.com (Jim Idle)
Date: Wed, 29 Oct 2008 18:08:55 -0700
Subject: [antlr-interest] Antlr dependencies
In-Reply-To: <277aaded0810291747w1d609838k43c249f0254ad1a7@mail.gmail.com>
References: <277aaded0810291747w1d609838k43c249f0254ad1a7@mail.gmail.com>
Message-ID: <1225328935.4826.477.camel@jimi>

On Wed, 2008-10-29 at 21:47 -0300, me tk82c wrote:

> Hello! I'm trying to create a language to dynamic run on my J2ME
> and .NET Compact Framework app.
> 
> What kind of dependency I have with jar files of ANTLR? I have to
> deploy the entire antlr.jar to put the things to work? 


Just the antlr runtime jar/assembly which are 1.4 binary level (Java
wise) and so should be fine on ME I think as it uses the basics and no
strange interfaces.

Jim

> 
> thanks!
> 
> tk82c
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
> 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20081029/10b65002/attachment.html 

From Fred.Brisard at ca.com  Wed Oct 29 19:48:46 2008
From: Fred.Brisard at ca.com (Brisard, Fred D)
Date: Wed, 29 Oct 2008 22:48:46 -0400
Subject: [antlr-interest] Enforcing that a statement parm is
	onlyspecified one time
In-Reply-To: <6EE1923A-1C6C-4842-8100-B37B9CA75064@cs.usfca.edu>
References: <7D50572C73BC634F92EE211BFF16F4A106DC91D7@USILMS12.ca.com><1225313144.4826.467.camel@jimi>
	<6EE1923A-1C6C-4842-8100-B37B9CA75064@cs.usfca.edu>
Message-ID: <7D50572C73BC634F92EE211BFF16F4A106DC932E@USILMS12.ca.com>

Ok - so the parser should just accept whatever is valid syntax and then
worry about the semantics (duplicate parameter) by traversing the AST.
Right?


-----Original Message-----
From: antlr-interest-bounces at antlr.org
[mailto:antlr-interest-bounces at antlr.org] On Behalf Of Terence Parr
Sent: Wednesday, October 29, 2008 6:13 PM
To: Jim Idle
Cc: antlr-interest at antlr.org
Subject: Re: [antlr-interest] Enforcing that a statement parm is
onlyspecified one time

On Oct 29, 2008, at 1:45 PM, Jim Idle wrote:
> Warning line 2, offset nn : You have said 'plumber' 12 times in the  
> same construct. Are you campaigning?
> wink joe the plumber plumber joe wink joe the bloody plumber plumber  
> plumber
>                      ^                               ^       ^       ^
>
> Basically, for anything other than a one off script parser or  
> something, never try to do things like this in the grammar itself,  
> ALWAYS accept anything that is vaguely legal, count or flag what is  
> present, then give specific errors. Similar things include:
>
> Error: line 2, offset nn : You cannot combine 'baseball' and 'obama'  
> in the same timeslot.
> schedule blah blah obama blah blah baseball
>                                    ^

Error: line 2, offset nn: You're not an idiot, you're a maverick,  
you're VP is a maverick, and your mother looks like one too.  The  
horse you rode in on is a maverick too.

Terence

List: http://www.antlr.org/mailman/listinfo/antlr-interest
Unsubscribe:
http://www.antlr.org/mailman/options/antlr-interest/your-email-addr
ess



From me.tk82c at gmail.com  Wed Oct 29 19:51:39 2008
From: me.tk82c at gmail.com (me tk82c)
Date: Wed, 29 Oct 2008 23:51:39 -0300
Subject: [antlr-interest] Antlr dependencies
In-Reply-To: <1225328935.4826.477.camel@jimi>
References: <277aaded0810291747w1d609838k43c249f0254ad1a7@mail.gmail.com>
	<1225328935.4826.477.camel@jimi>
Message-ID: <277aaded0810291951x338f388bnf0f5fcfeaef0d0e9@mail.gmail.com>

Hello Jim,

    We're talking about a JAR file of 1.4mb that is huge to many cell phones
:-(

    I think that if i have to deploy all content of this jar file, my life
with antlr will be very short.

    Could you tell me if there is any way to use a smaller jar (only with
necessary files, for example)?

Thanks!

tk


On Wed, Oct 29, 2008 at 10:08 PM, Jim Idle <jimi at temporal-wave.com> wrote:

>  On Wed, 2008-10-29 at 21:47 -0300, me tk82c wrote:
>
> Hello! I'm trying to create a language to dynamic run on my J2ME and .NET
> Compact Framework app.
>
> What kind of dependency I have with jar files of ANTLR? I have to deploy
> the entire antlr.jar to put the things to work?
>
>
> Just the antlr runtime jar/assembly which are 1.4 binary level (Java wise)
> and so should be fine on ME I think as it uses the basics and no strange
> interfaces.
>
> Jim
>
>
> thanks!
>
> tk82c
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20081029/29a65a60/attachment.html 

From jimi at temporal-wave.com  Wed Oct 29 21:00:40 2008
From: jimi at temporal-wave.com (Jim Idle)
Date: Wed, 29 Oct 2008 21:00:40 -0700
Subject: [antlr-interest] Antlr dependencies
In-Reply-To: <277aaded0810291951x338f388bnf0f5fcfeaef0d0e9@mail.gmail.com>
References: <277aaded0810291747w1d609838k43c249f0254ad1a7@mail.gmail.com>
	<1225328935.4826.477.camel@jimi>
	<277aaded0810291951x338f388bnf0f5fcfeaef0d0e9@mail.gmail.com>
Message-ID: <1225339240.4826.495.camel@jimi>

On Wed, 2008-10-29 at 23:51 -0300, me tk82c wrote:

> Hello Jim,
> 
>     We're talking about a JAR file of 1.4mb that is huge to many cell
> phones :-(


No, you are looking at the wrong Jar :-). That is the jar that contains
the tool and so on. The runtime  only jar is currently:

-rw-rw-r-- 1 jimi jimi 138042 2008-10-28 15:47
antlr-runtime-3.2-SNAPSHOT.jar

You can probably make this smaller by un-jaring it, and removing some of
the debugging and string template stuff (assuming that you are not using
that). Check with reference to the source. Hmm, maybe I can make a
deployment target for Maven with an ME oriented runtime that is smaller
than that, but you can certainly do it manually, unjar, carefully
remove .class files you don't need (and that are not essential), rejar.

Jim

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20081029/3a66580b/attachment.html 

From geoff_hendrey at yahoo.com  Wed Oct 29 21:25:49 2008
From: geoff_hendrey at yahoo.com (Geoff hendrey)
Date: Wed, 29 Oct 2008 21:25:49 -0700 (PDT)
Subject: [antlr-interest] (POST THIRD TIME) how to bail on
	MissingTokenException
References: <241850.70939.qm@web31806.mail.mud.yahoo.com>
	<71F3CF25-19B2-4DA8-A9E2-047758FD67DF@cs.usfca.edu>
Message-ID: <138094.88434.qm@web31807.mail.mud.yahoo.com>

Hi,

thanks for the response, I really appreciate it. Do you mean "mismatch" or "missing"? Just to be sure we are on the same page, I am getting a MissingTokenException, not MismatchedTokenException. My grammar file already deals with MismatchedTokenException, nd I have no problem with that. I need to find out how to abort parsing on MISSINGTokenException.

Thanks, and sorry for using caps and bold. Just wanted to make sure we are on the same page.

 -geoff






________________________________
From: Terence Parr <parrt at cs.usfca.edu>
To: Geoff hendrey <geoff_hendrey at yahoo.com>
Cc: antlr-interest at antlr.org
Sent: Wednesday, October 29, 2008 12:58:28 PM
Subject: Re: [antlr-interest] (POST THIRD TIME) how to bail on MissingTokenException

Hi Geoff, isn't there something in the source code that says " override me if you want to turn off automatic in-line error recovery for mismatch token"?
Ter
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20081029/2254224d/attachment.html 

From antlr at mirality.co.nz  Thu Oct 30 00:44:03 2008
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Thu, 30 Oct 2008 20:44:03 +1300
Subject: [antlr-interest] Linux -> windows, execution problem
In-Reply-To: <842c20050810290320v595b51e5k74154f47cabaa905@mail.gmail.co
 m>
References: <842c20050810290320v595b51e5k74154f47cabaa905@mail.gmail.com>
Message-ID: <20081030074413.5E9FF3D1687@www.antlr.org>

At 23:20 29/10/2008, S?bastien Laigre wrote:
>I have a program (which works with antlr 2.7.6) 
>which works very well on linux (kubuntu 8.04) 
>but not on windows. In fact, lexer and parsers 
>are well generated (on both platforms), but when 
>I execute on windows, the program handle an 
>exception when it encounters the first char ! Then it stops...
>For example if I try to analyze "DT NN.", it 
>writes "exception : unexpected char 'D' "
>I have defined dt : "DT" in the parser but it 
>doesn't recognize...

Have you defined your newline/whitespace rules to 
handle the differences between EOLs in Linux vs. Windows?


From antlr at mirality.co.nz  Thu Oct 30 00:48:26 2008
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Thu, 30 Oct 2008 20:48:26 +1300
Subject: [antlr-interest] what is best?
In-Reply-To: <490891B3.8010600@silasvalley.com>
References: <490891B3.8010600@silasvalley.com>
Message-ID: <20081030074836.A6E193D1687@www.antlr.org>

At 05:39 30/10/2008, Heinrich du Toit wrote:
 >First possbility:
 >
 >a: ('{')=> b
 >    | c;
 >b: '{' ID '}';
 >
 >second possibility:
 >a: b | c ;
 >b: ('{')=> '{' ID '}' ;
 >
 >It's just an example but the question is where do I put the
 >syn-pred for the best effect?

The first is much better.  (On the other hand, it's also usually 
unnecessary, since ANTLR will automatically put in single-token 
lookahead in 'a' to decide between 'b' and 'c' anyway.)


From amartinez at atc.ugr.es  Thu Oct 30 01:06:09 2008
From: amartinez at atc.ugr.es (amartinez at atc.ugr.es)
Date: Thu, 30 Oct 2008 09:06:09 +0100 (CET)
Subject: [antlr-interest] maillist test
Message-ID: <50172.193.145.230.7.1225353969.squirrel@atc.ugr.es>

maillist test

From qwizv9b02 at sneakemail.com  Thu Oct 30 03:08:08 2008
From: qwizv9b02 at sneakemail.com (Hendrik Maryns)
Date: Thu, 30 Oct 2008 11:08:08 +0100
Subject: [antlr-interest] Modified wiki page on Lexer
Message-ID: <gec12b$gnc$1@ger.gmane.org>

Hi,

I just wanted to notify that I put a statement on the wikipage about the
Lexer: http://www.antlr.org/wiki/pages/viewpage.action?pageId=4882470.

Since I am rather new to ANTLR, you might want to review it, but I
believe it is very helpful, since this stupid misunderstanding cost me
three days of frustration.

H.
-- 
Hendrik Maryns
http://tcl.sfs.uni-tuebingen.de/~hendrik/
==================
Ask smart questions, get good answers:
http://www.catb.org/~esr/faqs/smart-questions.html

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 257 bytes
Desc: OpenPGP digital signature
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20081030/fb33e2b6/attachment.bin 

From qwizv9b02 at sneakemail.com  Thu Oct 30 04:52:05 2008
From: qwizv9b02 at sneakemail.com (Hendrik Maryns)
Date: Thu, 30 Oct 2008 12:52:05 +0100
Subject: [antlr-interest] Antlr 3 Ant task?
Message-ID: <gec755$62m$1@ger.gmane.org>

Hi,

I want to call ANTLR from Ant.  This works now by adapting the code
found at http://www.ociweb.com/jnb/jnbJun2008.html#AntTips (and download
elsewhere).

However, I?d prefer to use the antlr task directly.  This only works
with Antlr 2.  I found
file:///home/hendrik/Java/antlr3-task/antlr3-task.htm, but was unable to
get this to work.  Ant complains about the xmlns not found or something.
 Can somebody give a step-by-step instruction on how to get the antlr3
task to work.

Is there any progress in making this the default antlr ant task, or to
update the existing one with a version attribute?

H.
-- 
Hendrik Maryns
http://tcl.sfs.uni-tuebingen.de/~hendrik/
==================
Ask smart questions, get good answers:
http://www.catb.org/~esr/faqs/smart-questions.html

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 257 bytes
Desc: OpenPGP digital signature
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20081030/fb5903c4/attachment.bin 

From qwizv9b02 at sneakemail.com  Thu Oct 30 05:16:32 2008
From: qwizv9b02 at sneakemail.com (Hendrik Maryns)
Date: Thu, 30 Oct 2008 13:16:32 +0100
Subject: [antlr-interest] Antlr 3 Ant task?
In-Reply-To: <gec755$62m$1@ger.gmane.org>
References: <gec755$62m$1@ger.gmane.org>
Message-ID: <gec8j0$aqk$1@ger.gmane.org>

Cross-posted to ant group/list.

Hendrik Maryns schreef:
> Hi,
> 
> I want to call ANTLR from Ant.  This works now by adapting the code
> found at http://www.ociweb.com/jnb/jnbJun2008.html#AntTips (and download
> elsewhere).
> 
> However, I?d prefer to use the antlr task directly.  This only works
> with Antlr 2.  I found
> file:///home/hendrik/Java/antlr3-task/antlr3-task.htm, but was unable to
> get this to work.  Ant complains about the xmlns not found or something.
>  Can somebody give a step-by-step instruction on how to get the antlr3
> task to work.
> 
> Is there any progress in making this the default antlr ant task, or to
> update the existing one with a version attribute?
> 
> H.
-- 
Hendrik Maryns
http://tcl.sfs.uni-tuebingen.de/~hendrik/
==================
Ask smart questions, get good answers:
http://www.catb.org/~esr/faqs/smart-questions.html

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 257 bytes
Desc: OpenPGP digital signature
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20081030/d13fa29f/attachment.bin 

From heinrich at silasvalley.com  Thu Oct 30 05:53:33 2008
From: heinrich at silasvalley.com (Heinrich du Toit)
Date: Thu, 30 Oct 2008 14:53:33 +0200
Subject: [antlr-interest] [csharp2] - scope privacy
Message-ID: <4909AE4D.9010203@silasvalley.com>

Hi

In c# target..

The global scope class that's created is created protected inside the 
parser class.

Can I somehow get the generator to declare this public.
As I want the info inside the scope to be exported to an outside api class.

It would be easier to simply export the scope class rather than having a 
whole lot of function calls for every bit of information.

Thanks in advance!
Heinrich

From jaluber at gmx.de  Thu Oct 30 05:57:04 2008
From: jaluber at gmx.de (Johannes Luber)
Date: Thu, 30 Oct 2008 13:57:04 +0100
Subject: [antlr-interest] [csharp2] - scope privacy
In-Reply-To: <4909AE4D.9010203@silasvalley.com>
References: <4909AE4D.9010203@silasvalley.com>
Message-ID: <4909AF20.5020604@gmx.de>

Heinrich du Toit schrieb:
> Hi
> 
> In c# target..
> 
> The global scope class that's created is created protected inside the 
> parser class.
> 
> Can I somehow get the generator to declare this public.
> As I want the info inside the scope to be exported to an outside api class.
> 
> It would be easier to simply export the scope class rather than having a 
> whole lot of function calls for every bit of information.
> 
> Thanks in advance!
> Heinrich

Currently there is no way to do so beyond modifying the StringTemplate
files. Maybe Ter will add another option in a later version.

Johannes
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
> 


From qwizv9b02 at sneakemail.com  Thu Oct 30 07:28:47 2008
From: qwizv9b02 at sneakemail.com (Hendrik Maryns)
Date: Thu, 30 Oct 2008 15:28:47 +0100
Subject: [antlr-interest] Debugging: how? (Why do I get
 MismatchedTokenException or UnwantedTokenException?) Unhelpful error
 messages.
In-Reply-To: <200810281136.59755.jbb@acm.org>
References: <ge7422$n0$1@ger.gmane.org> <200810281136.59755.jbb@acm.org>
Message-ID: <gecgav$8sj$1@ger.gmane.org>

John B. Brodie schreef:
> Greetings!
> 
> Hendrik Maryns asked:
> 
>> I showed you my grammar yesterday.  Now trying it out on some simple
>> inputs blows me away right away: it doesn?t even parse anything.

> Your problem seems to be with your Lexer rule for LABEL which is :
> 
> LABEL : ~(')')+ ;
> 
> this means that any sequence of characters that is not a ')' must be a
> LABEL.

I am starting to understand the difference between lexer and parser now.
 I was thinking of it as some sort of regular expression parser, but
since the lexer does not know anything about the parser, it doesn?t care
about it.

> another problem is that ')' is not matched by any Lexer rule. did you
> want OPEN and CLOSE to be parens?

Yes, sorry, a relict of debugging.

>> Grateful for any suggestions,
> 
>>.....remainder of message snipped....
> 
> Hope this helps

It did, in that I know what is wrong, but I still have no solution to my
problem: how can I make the variable in my label rule be anything?  That
is, I would think anything except whitespace and braces and control
characters would be fine.  In particular, it definitely has to accept
any word in any script, along with some punctuation characters such as .
- _ $ and probably more.

H.
-- 
Hendrik Maryns
http://tcl.sfs.uni-tuebingen.de/~hendrik/
==================
Ask smart questions, get good answers:
http://www.catb.org/~esr/faqs/smart-questions.html

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 257 bytes
Desc: OpenPGP digital signature
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20081030/a644aab8/attachment.bin 

From qwizv9b02 at sneakemail.com  Thu Oct 30 07:46:25 2008
From: qwizv9b02 at sneakemail.com (Hendrik Maryns)
Date: Thu, 30 Oct 2008 15:46:25 +0100
Subject: [antlr-interest]
 =?utf-8?q?How_to_specify_=E2=80=98any_non-contro?=
 =?utf-8?b?bCBzeW1ib2zigJk/?=
In-Reply-To: <49072056.3020103@gmx.de>
References: <ge710s$m1c$1@ger.gmane.org>	<49070D67.8080500@gmx.de>	<ge73tt$oq$1@ger.gmane.org>	<49071F3E.9030409@gmx.de>
	<49072056.3020103@gmx.de>
Message-ID: <gechc2$cm2$1@ger.gmane.org>

Johannes Luber schreef:
> Johannes Luber schrieb:
>> Hendrik Maryns schrieb:
>>> Johannes Luber schreef:
>>>> Hendrik Maryns schrieb:
>>>>> Hi,
>>>>>
>>>>> I want to define a LABEL lexer rule which should match almost anything.
>>>>>  Let?s say any non-control Unicode symbol.  Antlr wouldn?t accept .* or
>>>>> .+.  I probably don?t want a closing brace in there since it is a
>>>>> lisp-like grammar, but even space would be fine (although it probably
>>>>> won?t occur), so I did ~(')')+ but that feels like a hack.  Can I use
>>>>> POSIX regex classes such as p{alphnum} or something of the like?
>>>> Currently ANTLR doesn't support Unicode classes. The only workaround
>>>> would be to define manually all code points (manually means
>>>> semi-automatic via use of some existing table as starting point). You
>>>> should be aware that ANTLR doesn't accept code points above \uffff, so
>>>> you'd have to translate UTF-32 into UTF-16 surrogates.
>>> This is what it already seem to do internally, see the attached image
>>> Antlrworks produced.
>> It looks to me as if the code handles merely UCS-2 and not UTF-16.
>> Without seeing at least rule you used as input I can't be entirely sure,
>> though.
>>>> BTW, while it at first seems to be good idea to this kind of
>>>> discrimination in the lexer, you get far better error messages if you
>>>> push the error checking into the parser. Doing so requires merely to
>>>> make the lexer discriminate the potential classes in the minimal way. If
>>>> you like I can send you a lexer of mine using this strategy for
>>>> comparison purposes.
>>> I don?t understand this.   What do you mean by ?this kind of
>>> discriminations?
>> I mean checking the input in such way that no illegal character is used
>> to create a token, but making the lexer bail out immediately. Then your
>> error messages won't be able to say much about the context.
>>
>>> and in which way am I putting it in the lexer and could
>>> push it into the parser?  I am afraid I am too new in this area to
>>> follow you here.
>> Let's assume that identifiers may not start with uppercase letters. Then
>> the above mentioned method would be to define the rule as:
>>
>> ident: LOWERCASE (LOWERCASE | UPPERCASE)*;
>>
>> My proposal is to use:
>>
>> ident: (LOWERCASE | UPPERCASE)+;
>>
>> Then the parser can tell you that "identifier PascalCase starts with an
>> uppercase character".
>>
>> Johannes
> 
> I should amend the examples that one wouldn't create tokens for each
> character but build a single token like:
> 
> IDENT: (LOWERCASE | UPPERCASE)+;
> 
> fragment LOWERCASE: 'a'..'z';
> 
> fragment UPPERCASE: 'A'..'Z';
> 
> Doesn't change the actual point.

I am afraid this is no viable solution for me.  Let me explain what I want:

label : labelHead VARIABLE LABEL ;

labelHead is a fixed group of possibilities, VARIABLE can be any
identifier of letters and numbers.  This part is easy, but LABEL can be
anything: from -- to 3.Sg.Acc to Einf?hrung to ??????????? to
?????? to ????.

I don?t feel like trying to accommodate all of these character classes
by specifying \u ranges.

I see that probably I should make VARIABLE a parser rule which delegates
to a lexer rule IDENTIFIER or something, and indeed do some checking on
that like you suggest, but really my problem is LABEL.

H.
-- 
Hendrik Maryns
http://tcl.sfs.uni-tuebingen.de/~hendrik/
==================
Ask smart questions, get good answers:
http://www.catb.org/~esr/faqs/smart-questions.html

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 257 bytes
Desc: OpenPGP digital signature
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20081030/2333f44d/attachment.bin 

From sharwell at pixelminegames.com  Thu Oct 30 07:50:18 2008
From: sharwell at pixelminegames.com (Sam Harwell)
Date: Thu, 30 Oct 2008 09:50:18 -0500
Subject: [antlr-interest] [csharp2] - scope privacy
In-Reply-To: <4909AF20.5020604@gmx.de>
References: <4909AE4D.9010203@silasvalley.com> <4909AF20.5020604@gmx.de>
Message-ID: <86403CA0939415448BCCB83855EFE09A64E74B@Bloodymary.ironwillgames.com>

IMO, ideally the following would apply:

* Parser rules and global scopes are private by default
* Parser rules and global scopes can be marked by the keywords 'public'
or 'protected', similar to how 'fragment' can sit on a lexer rule.
* Classes holding parser rule return values (when present) take on the
visibility of the parser rule
* Local scopes inherit the visibility of their parent rule by default,
but can also be marked with explicit visibility

Sam

-----Original Message-----
From: antlr-interest-bounces at antlr.org
[mailto:antlr-interest-bounces at antlr.org] On Behalf Of Johannes Luber
Sent: Thursday, October 30, 2008 7:57 AM
To: Heinrich du Toit
Cc: antlr-interest at antlr.org
Subject: Re: [antlr-interest] [csharp2] - scope privacy

Heinrich du Toit schrieb:
> Hi
> 
> In c# target..
> 
> The global scope class that's created is created protected inside the 
> parser class.
> 
> Can I somehow get the generator to declare this public.
> As I want the info inside the scope to be exported to an outside api
class.
> 
> It would be easier to simply export the scope class rather than having
a 
> whole lot of function calls for every bit of information.
> 
> Thanks in advance!
> Heinrich

Currently there is no way to do so beyond modifying the StringTemplate
files. Maybe Ter will add another option in a later version.

Johannes
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
http://www.antlr.org/mailman/options/antlr-interest/your-email-addr
ess
> 


List: http://www.antlr.org/mailman/listinfo/antlr-interest
Unsubscribe:
http://www.antlr.org/mailman/options/antlr-interest/your-email-addr
ess


From qwizv9b02 at sneakemail.com  Thu Oct 30 08:10:32 2008
From: qwizv9b02 at sneakemail.com (Hendrik Maryns)
Date: Thu, 30 Oct 2008 16:10:32 +0100
Subject: [antlr-interest]
 =?utf-8?q?How_to_specify_=E2=80=98any_non-contro?=
 =?utf-8?b?bCBzeW1ib2zigJk/?=
In-Reply-To: <gechc2$cm2$1@ger.gmane.org>
References: <ge710s$m1c$1@ger.gmane.org>	<49070D67.8080500@gmx.de>	<ge73tt$oq$1@ger.gmane.org>	<49071F3E.9030409@gmx.de>	<49072056.3020103@gmx.de>
	<gechc2$cm2$1@ger.gmane.org>
Message-ID: <gecip8$im3$1@ger.gmane.org>

Hendrik Maryns schreef:
> Johannes Luber schreef:
>> Johannes Luber schrieb:
>>> Hendrik Maryns schrieb:
>>>> Johannes Luber schreef:
>>>>> Hendrik Maryns schrieb:
>>>>>> Hi,
>>>>>>
>>>>>> I want to define a LABEL lexer rule which should match almost anything.
>>>>>>  Let?s say any non-control Unicode symbol.  Antlr wouldn?t accept .* or
>>>>>> .+.  I probably don?t want a closing brace in there since it is a
>>>>>> lisp-like grammar, but even space would be fine (although it probably
>>>>>> won?t occur), so I did ~(')')+ but that feels like a hack.  Can I use
>>>>>> POSIX regex classes such as p{alphnum} or something of the like?
>>>>> Currently ANTLR doesn't support Unicode classes. The only workaround
>>>>> would be to define manually all code points (manually means
>>>>> semi-automatic via use of some existing table as starting point). You
>>>>> should be aware that ANTLR doesn't accept code points above \uffff, so
>>>>> you'd have to translate UTF-32 into UTF-16 surrogates.
>>>> This is what it already seem to do internally, see the attached image
>>>> Antlrworks produced.
>>> It looks to me as if the code handles merely UCS-2 and not UTF-16.
>>> Without seeing at least rule you used as input I can't be entirely sure,
>>> though.
>>>>> BTW, while it at first seems to be good idea to this kind of
>>>>> discrimination in the lexer, you get far better error messages if you
>>>>> push the error checking into the parser. Doing so requires merely to
>>>>> make the lexer discriminate the potential classes in the minimal way. If
>>>>> you like I can send you a lexer of mine using this strategy for
>>>>> comparison purposes.
>>>> I don?t understand this.   What do you mean by ?this kind of
>>>> discriminations?
>>> I mean checking the input in such way that no illegal character is used
>>> to create a token, but making the lexer bail out immediately. Then your
>>> error messages won't be able to say much about the context.
>>>
>>>> and in which way am I putting it in the lexer and could
>>>> push it into the parser?  I am afraid I am too new in this area to
>>>> follow you here.
>>> Let's assume that identifiers may not start with uppercase letters. Then
>>> the above mentioned method would be to define the rule as:
>>>
>>> ident: LOWERCASE (LOWERCASE | UPPERCASE)*;
>>>
>>> My proposal is to use:
>>>
>>> ident: (LOWERCASE | UPPERCASE)+;
>>>
>>> Then the parser can tell you that "identifier PascalCase starts with an
>>> uppercase character".
>>>
>>> Johannes
>> I should amend the examples that one wouldn't create tokens for each
>> character but build a single token like:
>>
>> IDENT: (LOWERCASE | UPPERCASE)+;
>>
>> fragment LOWERCASE: 'a'..'z';
>>
>> fragment UPPERCASE: 'A'..'Z';
>>
>> Doesn't change the actual point.
> 
> I am afraid this is no viable solution for me.  Let me explain what I want:
> 
> label : labelHead VARIABLE LABEL ;
> 
> labelHead is a fixed group of possibilities, VARIABLE can be any
> identifier of letters and numbers.  This part is easy, but LABEL can be
> anything: from -- to 3.Sg.Acc to Einf?hrung to ??????????? to
> ?????? to ????.

Have fun searching Wiktionary, they?re all there :-p

> I don?t feel like trying to accommodate all of these character classes
> by specifying \u ranges.

As a workaround, I have
// I hate to do this, but it seems I have to specify explicit unicode
ranges here
// () come between ' and *, leave out control characters, whitespace and ()
LABEL :
  ( '!'..'\''
  | '*'..'\uffff'
  )+ ;

which works with the inputs above, but I am afraid of modifier letters,
CJK spacing and stuff.

Why doesn?t

LABEL : ~(WHITESPACE | '(' | ')')+ ;

work?

(139): set complement is empty - (208): The following token definitions
can never be matched because prior tokens match the same input: LABEL

H.
-- 
Hendrik Maryns
http://tcl.sfs.uni-tuebingen.de/~hendrik/
==================
Ask smart questions, get good answers:
http://www.catb.org/~esr/faqs/smart-questions.html

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 257 bytes
Desc: OpenPGP digital signature
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20081030/7dfc496e/attachment.bin 

From laurent.caillette at gmail.com  Thu Oct 30 08:16:44 2008
From: laurent.caillette at gmail.com (Laurent Caillette)
Date: Thu, 30 Oct 2008 16:16:44 +0100
Subject: [antlr-interest] Antlr dependencies
In-Reply-To: <1225339240.4826.495.camel@jimi>
References: <277aaded0810291747w1d609838k43c249f0254ad1a7@mail.gmail.com>
	<1225328935.4826.477.camel@jimi>
	<277aaded0810291951x338f388bnf0f5fcfeaef0d0e9@mail.gmail.com>
	<1225339240.4826.495.camel@jimi>
Message-ID: <3b7c64070810300816q37a6de24x34e03157aad4f6ea@mail.gmail.com>

Maybe you could consider using a jar obfuscator, which shortens method
names and removes unused code. Tools of that kind claim to make the
code 30% smaller.

On Thu, Oct 30, 2008 at 5:00 AM, Jim Idle <jimi at temporal-wave.com> wrote:
> On Wed, 2008-10-29 at 23:51 -0300, me tk82c wrote:
>
> Hello Jim,
>
>     We're talking about a JAR file of 1.4mb that is huge to many cell phones
> :-(
>
> No, you are looking at the wrong Jar :-). That is the jar that contains the
> tool and so on. The runtime  only jar is currently:
>
> -rw-rw-r-- 1 jimi jimi 138042 2008-10-28 15:47
> antlr-runtime-3.2-SNAPSHOT.jar
>
> You can probably make this smaller by un-jaring it, and removing some of the
> debugging and string template stuff (assuming that you are not using that).
> Check with reference to the source. Hmm, maybe I can make a deployment
> target for Maven with an ME oriented runtime that is smaller than that, but
> you can certainly do it manually, unjar, carefully remove .class files you
> don't need (and that are not essential), rejar.
>
> Jim
>
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>
>
>

From tcurdt at vafer.org  Thu Oct 30 08:44:53 2008
From: tcurdt at vafer.org (Torsten Curdt)
Date: Thu, 30 Oct 2008 16:44:53 +0100
Subject: [antlr-interest] Antlr dependencies
In-Reply-To: <3b7c64070810300816q37a6de24x34e03157aad4f6ea@mail.gmail.com>
References: <277aaded0810291747w1d609838k43c249f0254ad1a7@mail.gmail.com>
	<1225328935.4826.477.camel@jimi>
	<277aaded0810291951x338f388bnf0f5fcfeaef0d0e9@mail.gmail.com>
	<1225339240.4826.495.camel@jimi>
	<3b7c64070810300816q37a6de24x34e03157aad4f6ea@mail.gmail.com>
Message-ID: <DC3084B8-54CC-4521-9A4D-C5B73F45841B@vafer.org>

Not only claiming :) Savings can be huge. Even when you strip just on  
a class basis.

http://vafer.org/blog/20060110134647

There is also jarjar and proguard.

cheers
--
Torsten

http://vafer.org/blog
http://twitter.com/tcurdt

On Oct 30, 2008, at 16:16, Laurent Caillette wrote:

> Maybe you could consider using a jar obfuscator, which shortens method
> names and removes unused code. Tools of that kind claim to make the
> code 30% smaller.
>
> On Thu, Oct 30, 2008 at 5:00 AM, Jim Idle <jimi at temporal-wave.com>  
> wrote:
>> On Wed, 2008-10-29 at 23:51 -0300, me tk82c wrote:
>>
>> Hello Jim,
>>
>>    We're talking about a JAR file of 1.4mb that is huge to many  
>> cell phones
>> :-(
>>
>> No, you are looking at the wrong Jar :-). That is the jar that  
>> contains the
>> tool and so on. The runtime  only jar is currently:
>>
>> -rw-rw-r-- 1 jimi jimi 138042 2008-10-28 15:47
>> antlr-runtime-3.2-SNAPSHOT.jar
>>
>> You can probably make this smaller by un-jaring it, and removing  
>> some of the
>> debugging and string template stuff (assuming that you are not  
>> using that).
>> Check with reference to the source. Hmm, maybe I can make a  
>> deployment
>> target for Maven with an ME oriented runtime that is smaller than  
>> that, but
>> you can certainly do it manually, unjar, carefully remove .class  
>> files you
>> don't need (and that are not essential), rejar.
>>
>> Jim
>>
>>
>>
>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>> Unsubscribe:
>> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>>
>>
>>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>


From jimi at temporal-wave.com  Thu Oct 30 08:49:25 2008
From: jimi at temporal-wave.com (Jim Idle)
Date: Thu, 30 Oct 2008 08:49:25 -0700
Subject: [antlr-interest] (POST THIRD TIME) how to bail on
 MissingTokenException
In-Reply-To: <138094.88434.qm@web31807.mail.mud.yahoo.com>
References: <241850.70939.qm@web31806.mail.mud.yahoo.com>
	<71F3CF25-19B2-4DA8-A9E2-047758FD67DF@cs.usfca.edu>
	<138094.88434.qm@web31807.mail.mud.yahoo.com>
Message-ID: <1225381765.4826.500.camel@jimi>

On Wed, 2008-10-29 at 21:25 -0700, Geoff hendrey wrote:
> Hi,
> 
> thanks for the response, I really appreciate it. Do you mean
> "mismatch" or "missing"? Just to be sure we are on the same page, I am
> getting a MissingTokenException, not MismatchedTokenException. My
> grammar file already deals with MismatchedTokenException, nd I have no
> problem with that. I need to find out how to abort parsing on
> MISSINGTokenException.
> 
> Thanks, and sorry for using caps and bold. Just wanted to make sure we
> are on the same page.


Look at the comments for the methods in base recognizer. They tell you
how to override a method so that you don't get missing token exceptions.
Your issue is that when the standard mechanisms predict that there is a
missing or extraneous token, they can report the error, insert or delete
the token, then carry on without an exception being thrown. Overriding
the base recognizer allows you to not check for such things but just
throw an exception. The comments explain it. Perhaps there should be a
wiki article but it needs someone to take the time to write it. Perhaps
you can write this article when you have it working, as most people
don't wish to override it.

This kind of thing can also be necessary because there are situations
where the input could be construed as either having an extra token or a
missing token and the default isn't the best for all circumstances
(though it usually is).

Jim

>  
> 
> -geoff
> 
> 
> 
> 
> 
> 
> 
> ______________________________________________________________________
> From: Terence Parr <parrt at cs.usfca.edu>
> To: Geoff hendrey <geoff_hendrey at yahoo.com>
> Cc: antlr-interest at antlr.org
> Sent: Wednesday, October 29, 2008 12:58:28 PM
> Subject: Re: [antlr-interest] (POST THIRD TIME) how to bail on
> MissingTokenException
> 
> Hi Geoff, isn't there something in the source code that says "
> override me if you want to turn off automatic in-line error recovery
> for mismatch token"?
> Ter
> 
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
> 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20081030/049c0452/attachment.html 

From jimi at temporal-wave.com  Thu Oct 30 08:57:10 2008
From: jimi at temporal-wave.com (Jim Idle)
Date: Thu, 30 Oct 2008 08:57:10 -0700
Subject: [antlr-interest] Antlr 3 Ant task?
In-Reply-To: <gec755$62m$1@ger.gmane.org>
References: <gec755$62m$1@ger.gmane.org>
Message-ID: <1225382230.4826.507.camel@jimi>

On Thu, 2008-10-30 at 12:52 +0100, Hendrik Maryns wrote:

> Hi,
> 
> I want to call ANTLR from Ant.  This works now by adapting the code
> found at http://www.ociweb.com/jnb/jnbJun2008.html#AntTips (and download
> elsewhere).
> 
> However, I?d prefer to use the antlr task directly.  This only works
> with Antlr 2.  I found
> file:///home/hendrik/Java/antlr3-task/antlr3-task.htm, but was unable to
> get this to work.  Ant complains about the xmlns not found or something.
>  Can somebody give a step-by-step instruction on how to get the antlr3
> task to work.
> 
> Is there any progress in making this the default antlr ant task, or to
> update the existing one with a version attribute?


The one you can download from the main downloads page works for me so
long as the ANT configuration is good and you put the jar in the correct
place for extensions. Just follow the instructions in the embedded html
page in the download.

Jim

> 
> H.
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
> 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20081030/8f576bc4/attachment.html 

From jbb at acm.org  Thu Oct 30 09:08:03 2008
From: jbb at acm.org (John B. Brodie)
Date: Thu, 30 Oct 2008 12:08:03 -0400
Subject: [antlr-interest] Debugging: how? (Why do I get
	MismatchedTokenException or UnwantedTokenException?)
	Unhelpful error messages.
In-Reply-To: <gecgav$8sj$1@ger.gmane.org>
References: <ge7422$n0$1@ger.gmane.org> <200810281136.59755.jbb@acm.org>
	<gecgav$8sj$1@ger.gmane.org>
Message-ID: <200810301208.03706.jbb@acm.org>

>...snipped....
>> ...... but I still have no solution to my
> problem: how can I make the variable in my label rule be anything? ?That
> is, I would think anything except whitespace and braces and control
> characters would be fine. ?In particular, it definitely has to accept
> any word in any script, along with some punctuation characters such as .
> - _ $ and probably more.

The best solution is to redefine your language such a LABEL is a quoted string 
or something similiar that the Lexer can identify.

But you probably don't have control over your language definition, otherwise 
you would have done the redefinition already and moved on to more important 
stuff.

So anyway....

An alternative - that has lots of problems - I hesitate to mention it - is too 
make LABEL a parser rule, like this (just 1 way, other ways are possible, 
probably involving syntax predicates):

// label formulas
label : labelHead VARIABLE labelTail ;

labelHead : FUNCTION | CATEGORY | WORD | LEMMA | MORPHOLOGY ;
labelTail : (~CLOSE)+ ;

Now this also means that a Lexer rule such as:

ANY : . ;

must be added as the VERY LAST rule in the Lexer. This ensures that any 
character not recognized as a token by the other Lexer rules gets identified 
as an ANY token - note that ANY is intentionally not `.+` as that would trip 
across the greedy nature of Antlr's Lexing strategy and consume all 
characters. ANY could be tweeked to exclude control characters and perhaps 
other charcters.

So anyway...

Under the above Parser rules a labelTail will match any non-empty sequence of 
tokens upto but not including a CLOSE token.

but it will also match whitespace and comments - since those tokens are on the 
HIDDEN channel and not seen by the parser.

Not sure if that is what you want, it is, I believe, the same functionality as 
your original LABEL : ~(')')+; rule which also happily ate whitespace and 
comments.....

Another bad part of the above labelTail rule is that it is now a list of 
tokens rather than a single token. So whatever processing you are performing 
upon the parsed result - eventually and AST perhaps? - will be much more 
complicated. And further the list of tokens may seem goofy in that your 
original example of test input: "(word x Einf?hrung)"  the labelTail will be a 
list of 3 tokens: VARIABLE, ANY, VARIABLE. That is, it will be the tokens for 
"Einf" a VARIABLE, "?" an ANY, and "hrung" a VARIABLE. I do not speak your 
language so I am only marginally bothered by this, but your mileage may vary.

Hope this helps...
   -jbb

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20081030/4a2e6124/attachment.html 

From jimi at temporal-wave.com  Thu Oct 30 09:16:53 2008
From: jimi at temporal-wave.com (Jim Idle)
Date: Thu, 30 Oct 2008 09:16:53 -0700
Subject: [antlr-interest] Debugging: how? (Why do I get
 MismatchedTokenException or UnwantedTokenException?) Unhelpful error
 messages.
In-Reply-To: <gecgav$8sj$1@ger.gmane.org>
References: <ge7422$n0$1@ger.gmane.org> <200810281136.59755.jbb@acm.org>
	<gecgav$8sj$1@ger.gmane.org>
Message-ID: <1225383413.4826.526.camel@jimi>

On Thu, 2008-10-30 at 15:28 +0100, Hendrik Maryns wrote:

> John B. Brodie schreef:
> > Greetings!
> > 
> > Hendrik Maryns asked:
> > 
> >> I showed you my grammar yesterday.  Now trying it out on some simple
> >> inputs blows me away right away: it doesn?t even parse anything.
> 
> > Your problem seems to be with your Lexer rule for LABEL which is :
> > 
> > LABEL : ~(')')+ ;
> > 
> > this means that any sequence of characters that is not a ')' must be a
> > LABEL.
> 
> I am starting to understand the difference between lexer and parser now.
>  I was thinking of it as some sort of regular expression parser, but
> since the lexer does not know anything about the parser, it doesn?t care
> about it.
> 
> > another problem is that ')' is not matched by any Lexer rule. did you
> > want OPEN and CLOSE to be parens?
> 
> Yes, sorry, a relict of debugging.
> 
> >> Grateful for any suggestions,
> > 
> >>.....remainder of message snipped....
> > 
> > Hope this helps
> 
> It did, in that I know what is wrong, but I still have no solution to my
> problem: how can I make the variable in my label rule be anything?  That
> is, I would think anything except whitespace and braces and control
> characters would be fine.  In particular, it definitely has to accept
> any word in any script, along with some punctuation characters such as .
> - _ $ and probably more.


There are a couple of solutions, but you don't say what the lexical
significance of your labels are, or whether this is a language you are
inventing (in which case don't do that), or one you are following a spec
for. 

In general, such labels tend to be valid in certain places only, such as
the start of a line/statement, only following goto and so on. If this is
the case, then you use a semantic predicate to check if you are at the
first character position in a line, then consume everything up to
whitespace and return LABEL. After goto and gosub, then consume the
label spec within the definitions of such keywords, make the text of the
token be the label, and extract the label from the token in the parser.
You just have to think creatively about the trigger points that indicate
a label is/could be, next. 

What language is this? This knowledge may help people help you.

If there are no lexical points that trigger a label interpretation, then
the next best thing is to construct a parser rule that accumulates label
components:

label : WORD ( { checkNoSpace() }?=> labelstuff )* ;

labelstuff
       : WORD | DOT | UNDERSCORE | BANG | keywords ... ;

Then build the text of the label from the text of the individual tokens
and rewrite as a LABEL for the AST.

Can't be any more specific without knowing what you are trying to parse.
You usually have to look for specific solutions for your DSL when you
get in to this stuff as usually it means the language design was weak in
the first place.

Jim


> 
> H.
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
> 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20081030/600d408c/attachment.html 

From jimi at temporal-wave.com  Thu Oct 30 09:22:25 2008
From: jimi at temporal-wave.com (Jim Idle)
Date: Thu, 30 Oct 2008 09:22:25 -0700
Subject: [antlr-interest]
 =?utf-8?q?How_to_specify_=E2=80=98any_non-contro?=
 =?utf-8?b?bCBzeW1ib2zigJk/?=
In-Reply-To: <gecip8$im3$1@ger.gmane.org>
References: <ge710s$m1c$1@ger.gmane.org>	<49070D67.8080500@gmx.de>
	<ge73tt$oq$1@ger.gmane.org>	<49071F3E.9030409@gmx.de>
	<49072056.3020103@gmx.de> <gechc2$cm2$1@ger.gmane.org>
	<gecip8$im3$1@ger.gmane.org>
Message-ID: <1225383745.4826.529.camel@jimi>

On Thu, 2008-10-30 at 16:10 +0100, Hendrik Maryns wrote:

> Hendrik Maryns schreef:
> > Johannes Luber schreef:



> Why doesn?t
> 
> LABEL : ~(WHITESPACE | '(' | ')')+ ;
> 


Your WHITESPACE rule probably defines a sequence rather than a set.
Create a:

fragment WSCHARS : (' ' | '\t' | '\f');

Then:

LABEL : ( ~ (WSCHARS | '(' | ')' ) )+;

Will probably work, though you are probably gong to create huge lexer
tables (which we are hoping to do something about shortly).

Jim 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20081030/8013861e/attachment.html 

From toddobryan at gmail.com  Thu Oct 30 10:05:44 2008
From: toddobryan at gmail.com (Todd O'Bryan)
Date: Thu, 30 Oct 2008 13:05:44 -0400
Subject: [antlr-interest] Precedence problem
Message-ID: <904774730810301005w7662bedel579c3fd9bb408369@mail.gmail.com>

I've assigned my high school programming students a symbolic algebra
project and provided them an ANTLR parser so they could translate
Strings to values easily. I used an AST, so the translation is pretty
easy. The basic idea is a mapping like this:

"sin(x ^ 2)" --> new Sin(new Exp(new Var(), new Number(2.0))

Everything was working great, until... I wanted exponentiation to have
higher precedence than unary operators, so

"~x^3" ---> new Neg(new Exp(new Var(), new Number(2.0)))
"sin x ^ 2" ---> new Sin(new Exp(new Var(), new Number(2.0)))

But a student tried this:

"sin(x) ^ 2"

Clearly this SHOULD be new Exp(new Sin(new Var()), new Number(2.0)),
but since ^ has higher precedence than sin, it doesn't work.

I can't figure out how to fix it, however, because sin(...) should
have the same precedence as a parenthesized expression (higher than
^), but sin ... should have lower precedence. I tried a syntactic
predicate, but since the sin rule is in two rules, I can't get rid of
the ambiguity. Here's my grammar that doesn't work. Can anybody help?

grammar Expression;
options {
  output = AST;
  ASTLabelType=CommonTree;
}

expr : addExpr EOF!
  ;

addExpr : multExpr (('+'^|'-'^) multExpr)*
  ;

multExpr : unaryExpr (('*'^|'/'^) unaryExpr)*
  ;

unaryExpr : ('sin'^|'cos'^|'ln'^|'~'^) expExpr
  | expExpr
  ;

expExpr : atom ('^'^ atom)*
  ;

parenExpr : ('sin'^|'cos'^|'ln'^|'~'^)? '('! addExpr ')'!
  ;

atom : parenExpr
  | NUMBER
  | VAR
  ;

NUMBER : '-'? '0'..'9'+ ('.' '0'..'9'*)? ;
VAR : 'x' ;
WHITESPACE : (' '|'\t'|'\n'|'\r')+ { skip(); } ;

From qwizv9b02 at sneakemail.com  Thu Oct 30 10:09:02 2008
From: qwizv9b02 at sneakemail.com (Hendrik Maryns)
Date: Thu, 30 Oct 2008 18:09:02 +0100
Subject: [antlr-interest] Antlr 3 Ant task?
In-Reply-To: <1225382230.4826.507.camel@jimi>
References: <gec755$62m$1@ger.gmane.org> <1225382230.4826.507.camel@jimi>
Message-ID: <gecpng$e5m$1@ger.gmane.org>

Jim Idle schreef:
> On Thu, 2008-10-30 at 12:52 +0100, Hendrik Maryns wrote:
>> Hi,
>>
>> I want to call ANTLR from Ant.  This works now by adapting the code
>> found at http://www.ociweb.com/jnb/jnbJun2008.html#AntTips (and download
>> elsewhere).
>>
>> However, I?d prefer to use the antlr task directly.  This only works
>> with Antlr 2.  I found
>> file:///home/hendrik/Java/antlr3-task/antlr3-task.htm, but was unable to
>> get this to work.  Ant complains about the xmlns not found or something.
>>  Can somebody give a step-by-step instruction on how to get the antlr3
>> task to work.
>>
>> Is there any progress in making this the default antlr ant task, or to
>> update the existing one with a version attribute?
> 
> The one you can download from the main downloads page works for me so
> long as the ANT configuration is good and you put the jar in the correct
> place for extensions. Just follow the instructions in the embedded html
> page in the download.

I didn?t find any reference to ant on http://www.antlr.org/download.html.

The relevant instruction in my build file is:

<antlr:antlr3 xmlns:antlr="antlib:org/apache/tools/ant/antlr"
              target="${srcdir}/ANTLR/${grammar.name}.g">
	<classpath path="/home/hendrik/Java/antlr-3.1.1/lib" />
</antlr:antlr3>

Where /home/hendrik/Java/antlr-3.1.1/lib contains
> ls /home/hendrik/Java/antlr-3.1.1/lib
antlr-2.7.7.jar  antlr-3.1.1-runtime.jar
antlr-3.1.1.jar  stringtemplate-3.2.jar

I am on openSUSE 11.0.

The Ant error message is:

BUILD FAILED
/home/hendrik/workspace/MonaSearch-own-formulas/build.xml:85: Problem:
failed to create task or type antlib:org/apache/tools/ant/antlr:antlr3
Cause: The name is undefined.
Action: Check the spelling.
Action: Check that any custom tasks/types have been declared.
Action: Check that any <presetdef>/<macrodef> declarations have taken place.

This appears to be an antlib declaration.
Action: Check that the implementing library exists in one of:
        -/usr/local/eclipse/plugins/org.apache.ant_1.7.0.v200803061910/lib
        -/home/hendrik/.ant/lib
        -a directory added on the command line with the -lib argument

Now I had this before with jUnit, and it didn?t help putting the
antlr.jar in any of the mentioned directories.  For junit, the solution
was to install ant-junit from YaST, but that doesn?t work for antlr,
since it installs a task for antlr2.

even

> ant -lib /home/hendrik/Java/antlr-3.1.1/lib/ antlr

doesn?t work.

More suggestions?

H.
-- 
Hendrik Maryns
http://tcl.sfs.uni-tuebingen.de/~hendrik/
==================
Ask smart questions, get good answers:
http://www.catb.org/~esr/faqs/smart-questions.html

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 257 bytes
Desc: OpenPGP digital signature
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20081030/0ef42745/attachment.bin 

From hallorant at gmail.com  Thu Oct 30 10:44:35 2008
From: hallorant at gmail.com (Tim Halloran)
Date: Thu, 30 Oct 2008 13:44:35 -0400
Subject: [antlr-interest] Precedence problem
In-Reply-To: <904774730810301005w7662bedel579c3fd9bb408369@mail.gmail.com>
References: <904774730810301005w7662bedel579c3fd9bb408369@mail.gmail.com>
Message-ID: <a36ab4bc0810301044h7e9aee4bnb0ebecf43f6c98ad@mail.gmail.com>

Well, one fix is to separate, taking "sin" as an example, sin SPACE from sin(

I just made the SPACE significant -- It seems to work on all your
examples.  Good luck

grammar Expression;
options {
 output = AST;
 ASTLabelType=CommonTree;
}

expr
	: addExpr EOF!
	;

addExpr
	: multExpr (('+'^|'-'^) multExpr)*
	;

multExpr
	: unaryExpr (('*'^|'/'^) unaryExpr)*
	;

unaryExpr
	: '~'^ expExpr
	| sinExpr
	| cosExpr
	| lnExpr
	| expExpr
 ;

sinExpr
	: 'sin ' expExpr
	;

cosExpr
	: 'cos ' WHITESPACE expExpr
	;
	
lnExpr
	: 'ln ' WHITESPACE expExpr
	;

expExpr
	: atom ('^'^ atom)*
	;


atom
	: parenExpr
	| NUMBER
	| VAR
	;

 parenExpr
 	: 'sin(' addExpr ')'
 	| 'cos(' addExpr ')'
 	| 'ln(' addExpr ')'
 	| '('! addExpr ')'!
	;

NUMBER : '-'? '0'..'9'+ ('.' '0'..'9'*)? ;
VAR : 'x' ;
WHITESPACE : (' '|'\t'|'\n'|'\r')+ { skip(); } ;

On Thu, Oct 30, 2008 at 1:05 PM, Todd O'Bryan <toddobryan at gmail.com> wrote:
> I've assigned my high school programming students a symbolic algebra
> project and provided them an ANTLR parser so they could translate
> Strings to values easily. I used an AST, so the translation is pretty
> easy. The basic idea is a mapping like this:
>
> "sin(x ^ 2)" --> new Sin(new Exp(new Var(), new Number(2.0))
>
> Everything was working great, until... I wanted exponentiation to have
> higher precedence than unary operators, so
>
> "~x^3" ---> new Neg(new Exp(new Var(), new Number(2.0)))
> "sin x ^ 2" ---> new Sin(new Exp(new Var(), new Number(2.0)))
>
> But a student tried this:
>
> "sin(x) ^ 2"
>
> Clearly this SHOULD be new Exp(new Sin(new Var()), new Number(2.0)),
> but since ^ has higher precedence than sin, it doesn't work.
>
> I can't figure out how to fix it, however, because sin(...) should
> have the same precedence as a parenthesized expression (higher than
> ^), but sin ... should have lower precedence. I tried a syntactic
> predicate, but since the sin rule is in two rules, I can't get rid of
> the ambiguity. Here's my grammar that doesn't work. Can anybody help?
>
> grammar Expression;
> options {
>  output = AST;
>  ASTLabelType=CommonTree;
> }
>
> expr : addExpr EOF!
>  ;
>
> addExpr : multExpr (('+'^|'-'^) multExpr)*
>  ;
>
> multExpr : unaryExpr (('*'^|'/'^) unaryExpr)*
>  ;
>
> unaryExpr : ('sin'^|'cos'^|'ln'^|'~'^) expExpr
>  | expExpr
>  ;
>
> expExpr : atom ('^'^ atom)*
>  ;
>
> parenExpr : ('sin'^|'cos'^|'ln'^|'~'^)? '('! addExpr ')'!
>  ;
>
> atom : parenExpr
>  | NUMBER
>  | VAR
>  ;
>
> NUMBER : '-'? '0'..'9'+ ('.' '0'..'9'*)? ;
> VAR : 'x' ;
> WHITESPACE : (' '|'\t'|'\n'|'\r')+ { skip(); } ;
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>
>

From qwizv9b02 at sneakemail.com  Thu Oct 30 10:44:40 2008
From: qwizv9b02 at sneakemail.com (Hendrik Maryns)
Date: Thu, 30 Oct 2008 18:44:40 +0100
Subject: [antlr-interest]
 =?utf-8?q?How_to_specify_=E2=80=98any_non-contro?=
 =?utf-8?b?bCBzeW1ib2zigJk/?=
In-Reply-To: <1225383745.4826.529.camel@jimi>
References: <ge710s$m1c$1@ger.gmane.org>	<49070D67.8080500@gmx.de>	<ge73tt$oq$1@ger.gmane.org>	<49071F3E.9030409@gmx.de>	<49072056.3020103@gmx.de>
	<gechc2$cm2$1@ger.gmane.org>	<gecip8$im3$1@ger.gmane.org>
	<1225383745.4826.529.camel@jimi>
Message-ID: <gecrqa$lts$1@ger.gmane.org>

Jim Idle schreef:
> On Thu, 2008-10-30 at 16:10 +0100, Hendrik Maryns wrote:
>> Hendrik Maryns schreef:
>> > Johannes Luber schreef:
> 
>> Why doesn?t
>>
>> LABEL : ~(WHITESPACE | '(' | ')')+ ;
>>
> 
> Your WHITESPACE rule probably defines a sequence rather than a set.

Nope, but it does declare $channel = HIDDEN, maybe that is the problem?

WHITESPACE : (' '|'\r'|'\t'|'\u000C'|'\n') {$channel=HIDDEN;} ;

> Create a:
> 
> fragment WSCHARS : (' ' | '\t' | '\f');
> 
> Then:
> 
> LABEL : ( ~ (WSCHARS | '(' | ')' ) )+;
> 
> Will probably work, though you are probably gong to create huge lexer
> tables (which we are hoping to do something about shortly).

This does not work either: it parses O)) successfully, but I do not
understand why.

Even substituting the whitespace characters explicitly doesn?t work.

Similarly,

LABEL :  ( '!'..'\'' | '*'..'\uffff' )+ ;

accepts the input O)) as well.  This seems like a bug to me.  Oh, when
talking about bugs: antlr doesn?t allow characters like ? and other
Unicode in a grammar, not even in a comment!

H.
-- 
Hendrik Maryns
http://tcl.sfs.uni-tuebingen.de/~hendrik/
==================
Ask smart questions, get good answers:
http://www.catb.org/~esr/faqs/smart-questions.html

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 257 bytes
Desc: OpenPGP digital signature
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20081030/24a98d69/attachment.bin 

From hallorant at gmail.com  Thu Oct 30 10:45:34 2008
From: hallorant at gmail.com (Tim Halloran)
Date: Thu, 30 Oct 2008 13:45:34 -0400
Subject: [antlr-interest] Precedence problem
In-Reply-To: <a36ab4bc0810301044h7e9aee4bnb0ebecf43f6c98ad@mail.gmail.com>
References: <904774730810301005w7662bedel579c3fd9bb408369@mail.gmail.com>
	<a36ab4bc0810301044h7e9aee4bnb0ebecf43f6c98ad@mail.gmail.com>
Message-ID: <a36ab4bc0810301045q3340c649u15be7973d71667fc@mail.gmail.com>

Upps, delete the WHITESPACE from cosExpr and lnExpr (harmless but bad)

On Thu, Oct 30, 2008 at 1:44 PM, Tim Halloran <hallorant at gmail.com> wrote:
> Well, one fix is to separate, taking "sin" as an example, sin SPACE from sin(
>
> I just made the SPACE significant -- It seems to work on all your
> examples.  Good luck
>
> grammar Expression;
> options {
>  output = AST;
>  ASTLabelType=CommonTree;
> }
>
> expr
>        : addExpr EOF!
>        ;
>
> addExpr
>        : multExpr (('+'^|'-'^) multExpr)*
>        ;
>
> multExpr
>        : unaryExpr (('*'^|'/'^) unaryExpr)*
>        ;
>
> unaryExpr
>        : '~'^ expExpr
>        | sinExpr
>        | cosExpr
>        | lnExpr
>        | expExpr
>  ;
>
> sinExpr
>        : 'sin ' expExpr
>        ;
>
> cosExpr
>        : 'cos ' WHITESPACE expExpr
>        ;
>
> lnExpr
>        : 'ln ' WHITESPACE expExpr
>        ;
>
> expExpr
>        : atom ('^'^ atom)*
>        ;
>
>
> atom
>        : parenExpr
>        | NUMBER
>        | VAR
>        ;
>
>  parenExpr
>        : 'sin(' addExpr ')'
>        | 'cos(' addExpr ')'
>        | 'ln(' addExpr ')'
>        | '('! addExpr ')'!
>        ;
>
> NUMBER : '-'? '0'..'9'+ ('.' '0'..'9'*)? ;
> VAR : 'x' ;
> WHITESPACE : (' '|'\t'|'\n'|'\r')+ { skip(); } ;
>
> On Thu, Oct 30, 2008 at 1:05 PM, Todd O'Bryan <toddobryan at gmail.com> wrote:
>> I've assigned my high school programming students a symbolic algebra
>> project and provided them an ANTLR parser so they could translate
>> Strings to values easily. I used an AST, so the translation is pretty
>> easy. The basic idea is a mapping like this:
>>
>> "sin(x ^ 2)" --> new Sin(new Exp(new Var(), new Number(2.0))
>>
>> Everything was working great, until... I wanted exponentiation to have
>> higher precedence than unary operators, so
>>
>> "~x^3" ---> new Neg(new Exp(new Var(), new Number(2.0)))
>> "sin x ^ 2" ---> new Sin(new Exp(new Var(), new Number(2.0)))
>>
>> But a student tried this:
>>
>> "sin(x) ^ 2"
>>
>> Clearly this SHOULD be new Exp(new Sin(new Var()), new Number(2.0)),
>> but since ^ has higher precedence than sin, it doesn't work.
>>
>> I can't figure out how to fix it, however, because sin(...) should
>> have the same precedence as a parenthesized expression (higher than
>> ^), but sin ... should have lower precedence. I tried a syntactic
>> predicate, but since the sin rule is in two rules, I can't get rid of
>> the ambiguity. Here's my grammar that doesn't work. Can anybody help?
>>
>> grammar Expression;
>> options {
>>  output = AST;
>>  ASTLabelType=CommonTree;
>> }
>>
>> expr : addExpr EOF!
>>  ;
>>
>> addExpr : multExpr (('+'^|'-'^) multExpr)*
>>  ;
>>
>> multExpr : unaryExpr (('*'^|'/'^) unaryExpr)*
>>  ;
>>
>> unaryExpr : ('sin'^|'cos'^|'ln'^|'~'^) expExpr
>>  | expExpr
>>  ;
>>
>> expExpr : atom ('^'^ atom)*
>>  ;
>>
>> parenExpr : ('sin'^|'cos'^|'ln'^|'~'^)? '('! addExpr ')'!
>>  ;
>>
>> atom : parenExpr
>>  | NUMBER
>>  | VAR
>>  ;
>>
>> NUMBER : '-'? '0'..'9'+ ('.' '0'..'9'*)? ;
>> VAR : 'x' ;
>> WHITESPACE : (' '|'\t'|'\n'|'\r')+ { skip(); } ;
>>
>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>>
>>
>

From qwizv9b02 at sneakemail.com  Thu Oct 30 10:54:53 2008
From: qwizv9b02 at sneakemail.com (Hendrik Maryns)
Date: Thu, 30 Oct 2008 18:54:53 +0100
Subject: [antlr-interest] Debugging: how? (Why do I get
 MismatchedTokenException or UnwantedTokenException?) Unhelpful error
 messages.
In-Reply-To: <1225383413.4826.526.camel@jimi>
References: <ge7422$n0$1@ger.gmane.org>
	<200810281136.59755.jbb@acm.org>	<gecgav$8sj$1@ger.gmane.org>
	<1225383413.4826.526.camel@jimi>
Message-ID: <gecsde$o2j$1@ger.gmane.org>

Jim Idle schreef:
> On Thu, 2008-10-30 at 15:28 +0100, Hendrik Maryns wrote:
>> John B. Brodie schreef:
>> > Greetings!
>> > 
>> > Hendrik Maryns asked:
>> > 
>> >> I showed you my grammar yesterday.  Now trying it out on some simple
>> >> inputs blows me away right away: it doesn?t even parse anything.
>>
>> > Your problem seems to be with your Lexer rule for LABEL which is :
>> > 
>> > LABEL : ~(')')+ ;
>> > 
>> > this means that any sequence of characters that is not a ')' must be a
>> > LABEL.
>>
>> I am starting to understand the difference between lexer and parser now.
>>  I was thinking of it as some sort of regular expression parser, but
>> since the lexer does not know anything about the parser, it doesn?t care
>> about it.
>>
>> > another problem is that ')' is not matched by any Lexer rule. did you
>> > want OPEN and CLOSE to be parens?
>>
>> Yes, sorry, a relict of debugging.
>>
>> >> Grateful for any suggestions,
>> > 
>> >>.....remainder of message snipped....
>> > 
>> > Hope this helps
>>
>> It did, in that I know what is wrong, but I still have no solution to my
>> problem: how can I make the variable in my label rule be anything?  That
>> is, I would think anything except whitespace and braces and control
>> characters would be fine.  In particular, it definitely has to accept
>> any word in any script, along with some punctuation characters such as .
>> - _ $ and probably more.
> 
> There are a couple of solutions, but you don't say what the lexical
> significance of your labels are, or whether this is a language you are
> inventing (in which case don't do that), or one you are following a spec
> for.

I like your suggestion: don?t do that!

Well, I am following a spec, but I am free to change it.  Although I
cannot believe why this wouldn?t be possible: I simply want a lisp-like
grammar that takes whatever is there.  See my other posts.

Expected input: (word x whatever), where whatever can be really
anything, in particular, any word in any human language, so also
Chinese, etc.  And additionally, some punctuation should be allowed.
The ?whatever? is clearly defined though: it starts after the space and
ends before the brace.  It would be a piece of cake to write this as a
regex: /[^ ][^)]*/, but unfortunately, as John pointed out, if I would
make a lexer rule out of this, it would eat everything, also the (word,
which of course should not be matched.  I think the lexer rules are
stupid, it shoul simply apply the rules in order of appearance, I see
absolutely no reason for this ?rule which eats most wins? system.

> In general, such labels tend to be valid in certain places only, such as
> the start of a line/statement, only following goto and so on. If this is
> the case, then you use a semantic predicate to check if you are at the
> first character position in a line, then consume everything up to
> whitespace and return LABEL. After goto and gosub, then consume the
> label spec within the definitions of such keywords, make the text of the
> token be the label, and extract the label from the token in the parser.
> You just have to think creatively about the trigger points that indicate
> a label is/could be, next.

This seems like the way to go.  Could you write this down in newbie
words please?  While I can make some sense of it, it is too abstract to
be able to implement it yet.

> What language is this? This knowledge may help people help you.

I describe it at
http://tcl.sfs.uni-tuebingen.de/MonaSearch/doc/#formula-syntax, but note
that I can change that if need be.  I would prefer not to, since it
would break existing formulas, but there are not so many of them.

> If there are no lexical points that trigger a label interpretation, then
> the next best thing is to construct a parser rule that accumulates label
> components:
> 
> label : WORD ( { checkNoSpace() }?=> labelstuff )* ;

I have been wondering what this => in some grammars is.  Where can I
read about it?

> labelstuff
>        : WORD | DOT | UNDERSCORE | BANG | keywords ... ;
> 
> Then build the text of the label from the text of the individual tokens
> and rewrite as a LABEL for the AST.
> 
> Can't be any more specific without knowing what you are trying to parse.
> You usually have to look for specific solutions for your DSL when you
> get in to this stuff as usually it means the language design was weak in
> the first place.

I suppose it is.  I think I should start using quoted strings.  But it
is also a very educational discussion which, to me is showing off some
of ANTLR?s weaknesses (such as no \p{alpha} classes).

H.
-- 
Hendrik Maryns
http://tcl.sfs.uni-tuebingen.de/~hendrik/
==================
Ask smart questions, get good answers:
http://www.catb.org/~esr/faqs/smart-questions.html

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 257 bytes
Desc: OpenPGP digital signature
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20081030/3fac3ba0/attachment.bin 

From parrt at cs.usfca.edu  Thu Oct 30 10:55:51 2008
From: parrt at cs.usfca.edu (Terence Parr)
Date: Thu, 30 Oct 2008 10:55:51 -0700
Subject: [antlr-interest] (POST THIRD TIME) how to bail on
	MissingTokenException
In-Reply-To: <138094.88434.qm@web31807.mail.mud.yahoo.com>
References: <241850.70939.qm@web31806.mail.mud.yahoo.com>
	<71F3CF25-19B2-4DA8-A9E2-047758FD67DF@cs.usfca.edu>
	<138094.88434.qm@web31807.mail.mud.yahoo.com>
Message-ID: <54EC0078-6998-4A40-BFB4-F7379C9D1ABB@cs.usfca.edu>

Missing comes from the automatic in-line error recovery. You need to  
override

	protected Object recoverFromMismatchedToken(IntStream input, int  
ttype, BitSet follow)

just throw an exception. make sure you don't catch anything later...  
this should be in the book under how to make the parser bail on first  
exception.
Ter
On Oct 29, 2008, at 9:25 PM, Geoff hendrey wrote:

> Hi,
>
> thanks for the response, I really appreciate it. Do you mean  
> "mismatch" or "missing"? Just to be sure we are on the same page, I  
> am getting a MissingTokenException, not MismatchedTokenException. My  
> grammar file already deals with MismatchedTokenException, nd I have  
> no problem with that. I need to find out how to abort parsing on  
> MISSINGTokenException.
>
> Thanks, and sorry for using caps and bold. Just wanted to make sure  
> we are on the same page.
>
> -geoff
>
>
>
> From: Terence Parr <parrt at cs.usfca.edu>
> To: Geoff hendrey <geoff_hendrey at yahoo.com>
> Cc: antlr-interest at antlr.org
> Sent: Wednesday, October 29, 2008 12:58:28 PM
> Subject: Re: [antlr-interest] (POST THIRD TIME) how to bail on  
> MissingTokenException
>
> Hi Geoff, isn't there something in the source code that says "  
> override me if you want to turn off automatic in-line error recovery  
> for mismatch token"?
> Ter
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>


From jaluber at gmx.de  Thu Oct 30 14:04:08 2008
From: jaluber at gmx.de (Johannes Luber)
Date: Thu, 30 Oct 2008 22:04:08 +0100
Subject: [antlr-interest]
 =?utf-8?q?How_to_specify_=E2=80=98any_non-contro?=
 =?utf-8?b?bCBzeW1ib2zigJk/?=
In-Reply-To: <gecrqa$lts$1@ger.gmane.org>
References: <ge710s$m1c$1@ger.gmane.org>	<49070D67.8080500@gmx.de>	<ge73tt$oq$1@ger.gmane.org>	<49071F3E.9030409@gmx.de>	<49072056.3020103@gmx.de>	<gechc2$cm2$1@ger.gmane.org>	<gecip8$im3$1@ger.gmane.org>	<1225383745.4826.529.camel@jimi>
	<gecrqa$lts$1@ger.gmane.org>
Message-ID: <490A2148.6090801@gmx.de>

Hendrik Maryns schrieb:
> This seems like a bug to me.  Oh, when
> talking about bugs: antlr doesn?t allow characters like ? and other
> Unicode in a grammar, not even in a comment!

The reason for this lies in the fact, that ANTLR is still using 2.7.7
internally. 2.7.7 has as one limitation that input characters may range
only from 0 to 127. I don't know if 3.2 is finally self-hosting.

Johannes
> 
> H.
> 
> 
> ------------------------------------------------------------------------
> 
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
> 


From gmdidro at gmail.com  Thu Oct 30 15:45:50 2008
From: gmdidro at gmail.com (=?KOI8-R?B?8MXU0s/XIOHMxcvTwc7E0g==?=)
Date: Fri, 31 Oct 2008 01:45:50 +0300
Subject: [antlr-interest] Attribute in Tree grammar. Semantic predicates
	with Alternative clause Problem
Message-ID: <1dcb5c470810301545g44e191caka5ca37654cea0494@mail.gmail.com>

Hello,

I'm using semantic predicates in tree grammar:

//deviceID is a rule
deviceFuncID
:     ^(NODE1 ^(NODE2 ^(NODE3 deviceID)))
        (
	{
                   //IsID function has signature:  bool IsID(string id)
                    IsID(
	           $deviceID.text,
                          )
                  }?
	-> oneTemplate(...)
                |-> otherTemplate(...)
         );

deviceID	:	'this'->{%{"this"}}

But when I try to compile generated C# code (antlr 3.1.1)I have many
errors like that:

---- The name 'deviceID25' does not exist in the current context

In antlr 3.0.1 such grammar produce compilable code.
If I rewrite that code as (remove brackets)

deviceFuncID
:     ^(CCALL ^(CSYNCCALL ^(OBJECTNAME deviceID)))

	{
                    IsID(
	           $deviceID.text,
                          )
                  }?
	-> oneTemplate(...)
               // |-> otherTemplate(...)

Then all right, but I want to have alternative clause for semantic predicate.
If I uncomment alternative clause, then I have:

---- error(201):  The following alternatives can never be matched: 2

What should I do ? What is the cause of such errors ?

Thank you

From jaluber at gmx.de  Thu Oct 30 16:08:10 2008
From: jaluber at gmx.de (Johannes Luber)
Date: Fri, 31 Oct 2008 00:08:10 +0100
Subject: [antlr-interest] Attribute in Tree grammar. Semantic predicates
 with Alternative clause Problem
In-Reply-To: <1dcb5c470810301545g44e191caka5ca37654cea0494@mail.gmail.com>
References: <1dcb5c470810301545g44e191caka5ca37654cea0494@mail.gmail.com>
Message-ID: <490A3E5A.1070709@gmx.de>

?????? ????????? schrieb:
> Hello,
> 
> I'm using semantic predicates in tree grammar:
> 
> //deviceID is a rule
> deviceFuncID
> :     ^(NODE1 ^(NODE2 ^(NODE3 deviceID)))
>         (
> 	{
>                    //IsID function has signature:  bool IsID(string id)
>                     IsID(
> 	           $deviceID.text,
>                           )
>                   }?
> 	-> oneTemplate(...)
>                 |-> otherTemplate(...)
>          );
> 
> deviceID	:	'this'->{%{"this"}}
> 
> But when I try to compile generated C# code (antlr 3.1.1)I have many
> errors like that:
> 
> ---- The name 'deviceID25' does not exist in the current context
> 
> In antlr 3.0.1 such grammar produce compilable code.
> If I rewrite that code as (remove brackets)
> 
> deviceFuncID
> :     ^(CCALL ^(CSYNCCALL ^(OBJECTNAME deviceID)))
> 
> 	{
>                     IsID(
> 	           $deviceID.text,
>                           )
>                   }?
> 	-> oneTemplate(...)
>                // |-> otherTemplate(...)
> 
> Then all right, but I want to have alternative clause for semantic predicate.
> If I uncomment alternative clause, then I have:
> 
> ---- error(201):  The following alternatives can never be matched: 2
> 
> What should I do ? What is the cause of such errors ?
> 
> Thank you

Without the full tree grammar I can't check for the source of the
problems. Can you send it to me along with the combined grammar (or at
least the tokens file of the combined grammar)?

Johannes
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
> 


From toddobryan at gmail.com  Thu Oct 30 16:30:57 2008
From: toddobryan at gmail.com (Todd O'Bryan)
Date: Thu, 30 Oct 2008 19:30:57 -0400
Subject: [antlr-interest] Precedence problem
In-Reply-To: <a36ab4bc0810301045q3340c649u15be7973d71667fc@mail.gmail.com>
References: <904774730810301005w7662bedel579c3fd9bb408369@mail.gmail.com>
	<a36ab4bc0810301044h7e9aee4bnb0ebecf43f6c98ad@mail.gmail.com>
	<a36ab4bc0810301045q3340c649u15be7973d71667fc@mail.gmail.com>
Message-ID: <904774730810301630l4cdd52c6k46f783f3bd000d0c@mail.gmail.com>

That makes perfect sense! I was too busy thinking that spaces were
insignificant to realize that they're significant. Thanks!

On Thu, Oct 30, 2008 at 1:45 PM, Tim Halloran <hallorant at gmail.com> wrote:
> Upps, delete the WHITESPACE from cosExpr and lnExpr (harmless but bad)
>
> On Thu, Oct 30, 2008 at 1:44 PM, Tim Halloran <hallorant at gmail.com> wrote:
>> Well, one fix is to separate, taking "sin" as an example, sin SPACE from sin(
>>
>> I just made the SPACE significant -- It seems to work on all your
>> examples.  Good luck
>>
>> grammar Expression;
>> options {
>>  output = AST;
>>  ASTLabelType=CommonTree;
>> }
>>
>> expr
>>        : addExpr EOF!
>>        ;
>>
>> addExpr
>>        : multExpr (('+'^|'-'^) multExpr)*
>>        ;
>>
>> multExpr
>>        : unaryExpr (('*'^|'/'^) unaryExpr)*
>>        ;
>>
>> unaryExpr
>>        : '~'^ expExpr
>>        | sinExpr
>>        | cosExpr
>>        | lnExpr
>>        | expExpr
>>  ;
>>
>> sinExpr
>>        : 'sin ' expExpr
>>        ;
>>
>> cosExpr
>>        : 'cos ' WHITESPACE expExpr
>>        ;
>>
>> lnExpr
>>        : 'ln ' WHITESPACE expExpr
>>        ;
>>
>> expExpr
>>        : atom ('^'^ atom)*
>>        ;
>>
>>
>> atom
>>        : parenExpr
>>        | NUMBER
>>        | VAR
>>        ;
>>
>>  parenExpr
>>        : 'sin(' addExpr ')'
>>        | 'cos(' addExpr ')'
>>        | 'ln(' addExpr ')'
>>        | '('! addExpr ')'!
>>        ;
>>
>> NUMBER : '-'? '0'..'9'+ ('.' '0'..'9'*)? ;
>> VAR : 'x' ;
>> WHITESPACE : (' '|'\t'|'\n'|'\r')+ { skip(); } ;
>>
>> On Thu, Oct 30, 2008 at 1:05 PM, Todd O'Bryan <toddobryan at gmail.com> wrote:
>>> I've assigned my high school programming students a symbolic algebra
>>> project and provided them an ANTLR parser so they could translate
>>> Strings to values easily. I used an AST, so the translation is pretty
>>> easy. The basic idea is a mapping like this:
>>>
>>> "sin(x ^ 2)" --> new Sin(new Exp(new Var(), new Number(2.0))
>>>
>>> Everything was working great, until... I wanted exponentiation to have
>>> higher precedence than unary operators, so
>>>
>>> "~x^3" ---> new Neg(new Exp(new Var(), new Number(2.0)))
>>> "sin x ^ 2" ---> new Sin(new Exp(new Var(), new Number(2.0)))
>>>
>>> But a student tried this:
>>>
>>> "sin(x) ^ 2"
>>>
>>> Clearly this SHOULD be new Exp(new Sin(new Var()), new Number(2.0)),
>>> but since ^ has higher precedence than sin, it doesn't work.
>>>
>>> I can't figure out how to fix it, however, because sin(...) should
>>> have the same precedence as a parenthesized expression (higher than
>>> ^), but sin ... should have lower precedence. I tried a syntactic
>>> predicate, but since the sin rule is in two rules, I can't get rid of
>>> the ambiguity. Here's my grammar that doesn't work. Can anybody help?
>>>
>>> grammar Expression;
>>> options {
>>>  output = AST;
>>>  ASTLabelType=CommonTree;
>>> }
>>>
>>> expr : addExpr EOF!
>>>  ;
>>>
>>> addExpr : multExpr (('+'^|'-'^) multExpr)*
>>>  ;
>>>
>>> multExpr : unaryExpr (('*'^|'/'^) unaryExpr)*
>>>  ;
>>>
>>> unaryExpr : ('sin'^|'cos'^|'ln'^|'~'^) expExpr
>>>  | expExpr
>>>  ;
>>>
>>> expExpr : atom ('^'^ atom)*
>>>  ;
>>>
>>> parenExpr : ('sin'^|'cos'^|'ln'^|'~'^)? '('! addExpr ')'!
>>>  ;
>>>
>>> atom : parenExpr
>>>  | NUMBER
>>>  | VAR
>>>  ;
>>>
>>> NUMBER : '-'? '0'..'9'+ ('.' '0'..'9'*)? ;
>>> VAR : 'x' ;
>>> WHITESPACE : (' '|'\t'|'\n'|'\r')+ { skip(); } ;
>>>
>>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>>> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>>>
>>>
>>
>

From parrt at cs.usfca.edu  Thu Oct 30 17:55:33 2008
From: parrt at cs.usfca.edu (Terence Parr)
Date: Thu, 30 Oct 2008 17:55:33 -0700
Subject: [antlr-interest] ANTLR book going for 3rd printing
Message-ID: <43BA1A59-FB10-4D11-B6DB-FFE1E571024C@cs.usfca.edu>

howdy, the publisher is going to do another printing of the definitive  
antlr reference book. They wanted to fix the errata of course, but  
they want to know how long it would take to update the book to be  
compatible with 3.1.1. I told him that most of the book would be okay,  
but some areas such as error handling could use a number of fixes. I  
might have to wait until next reprint to totally fix things because of  
the tight schedule for reprinting.

Can anybody give me a quick idea of what would need to change when  
moving forward to 3.1.1 from 3.0? In other words, what problems /  
incompatibilities have you found in the book when using it with 3.1.1?

Ter

From me.tk82c at gmail.com  Thu Oct 30 18:25:15 2008
From: me.tk82c at gmail.com (me tk82c)
Date: Thu, 30 Oct 2008 22:25:15 -0300
Subject: [antlr-interest] Java Grammar and how to use it to create a script
	language to my app
Message-ID: <277aaded0810301825x28112f35ue7542751bf70c282@mail.gmail.com>

Hello Everybody!

I'm trying to create a new language to allow my users to write small scripts
in our web app.

There is any short way to do that? Something like, download the existent
java grammar from ANTLR and implement the specific functions that users will
use in my app with this "Java" version.

Please, help!

tk
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20081030/07ef38b3/attachment.html 

From rschulz at sonic.net  Thu Oct 30 20:03:50 2008
From: rschulz at sonic.net (Randall R Schulz)
Date: Thu, 30 Oct 2008 20:03:50 -0700
Subject: [antlr-interest] Java Grammar and how to use it to create a
	script language to my app
In-Reply-To: <277aaded0810301825x28112f35ue7542751bf70c282@mail.gmail.com>
References: <277aaded0810301825x28112f35ue7542751bf70c282@mail.gmail.com>
Message-ID: <200810302003.50631.rschulz@sonic.net>

On Thursday 30 October 2008 18:25, me tk82c wrote:
> Hello Everybody!
>
> I'm trying to create a new language to allow my users to write small
> scripts in our web app.
>
> There is any short way to do that? Something like, download the
> existent java grammar from ANTLR and implement the specific functions
> that users will use in my app with this "Java" version.

I don't think Java is a good model or pattern for an extension or 
application scripting language.

I am personally fond of Lisp and the general use of S-Expressions for 
programming languages of all stripes, but many people feel such 
languages cumbersome.

You'd probably be best advised to craft a language specific to the 
system it will control or drive and which will seem natural to its 
users.

ANTLR will help you detect and either eliminate or accommodate any 
abiguities in the grammar you devise, which is one of its many virtues.

And if Java really _is_ a good language for your purposes, then perhaps 
BeanShell would be appropriate. You should probably also consider, 
JavaScript or another JSR-223-compliant language before starting out 
from scratch inventing a scripting language.

Lastly, there are several dynamic languages that integrate well with 
Java and which can serve as scripting languages for programs written in 
Java. They include (but are by no means limited to) Groovy, Scala and 
Clojure.


In short, don't invent something you don't need and don't use a language 
that is too low-level (by which I mean Java itself) for your intended 
requirements and audience.


> Please, help!
>
> tk


Randall Schulz

From sprevrha at gmail.com  Thu Oct 30 21:49:35 2008
From: sprevrha at gmail.com (Sven Prevrhal)
Date: Thu, 30 Oct 2008 21:49:35 -0700
Subject: [antlr-interest] ints and fractions - how to avoid "Decision can
	match input such as "INT SLASH INT" using multiple
	alternatives" warnings
Message-ID: <490a8e71.081b600a.0a71.ffffe88a@mx.google.com>

Essentially, I want a return of type double for e.g.

3

1.523

1 2/3

 

Below's my grammar with C# actions, and I get 

"Decision can match input such as "INT SLASH INT" using multiple
alternatives" in Antlrworks. 

 

Thanks for your help!!

Sven

 

//

//Trouble Grammar

//

number returns [double n]

                :               

                (INT {$n = (double)int.Parse($INT.text);}) (f = fraction {$n
+= f;})? | 

                f = fraction {$n = f;} | 

                AFLOAT {$n = double.Parse($AFLOAT.text);};

 

fraction  returns [double f]          :               

                i1=INT SLASH i2=INT {$f = (double)int.Parse($i1.text) /
(double)int.Parse($i2.text);};

 

AFLOAT                :               INT DOT INT?;

 

INT         :               '0'..'9'+;

 

SLASH   :               '/';

 

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20081030/4cf5358e/attachment.html 

From cvrebert+antlr at gmail.com  Thu Oct 30 22:05:36 2008
From: cvrebert+antlr at gmail.com (Chris Rebert)
Date: Thu, 30 Oct 2008 22:05:36 -0700
Subject: [antlr-interest] ints and fractions - how to avoid "Decision
	can match input such as "INT SLASH INT" using multiple
	alternatives" warnings
In-Reply-To: <490a8e71.081b600a.0a71.ffffe88a@mx.google.com>
References: <490a8e71.081b600a.0a71.ffffe88a@mx.google.com>
Message-ID: <47c890dc0810302205h13a09a75u941924fc38bb3364@mail.gmail.com>

In plain English, that error message means: input such as e.g. "1/2"
is ambiguous since it could be interpreted as either a float literal
using the fraction syntax or as a division expression with 2 integer
operands.
You'll have to disambiguate your grammar so ANTLR can know which
interpretation you intend.

Cheers,
Chris
-- 
Follow the path of the Iguana...
http://rebertia.com


On Thu, Oct 30, 2008 at 9:49 PM, Sven Prevrhal <sprevrha at gmail.com> wrote:
> Essentially, I want a return of type double for e.g.
>
> 3
>
> 1.523
>
> 1 2/3
>
>
>
> Below's my grammar with C# actions, and I get
>
> "Decision can match input such as "INT SLASH INT" using multiple
> alternatives" in Antlrworks.
>
>
>
> Thanks for your help!!
>
> Sven
>
>
>
> //
>
> //Trouble Grammar
>
> //
>
> number returns [double n]
>
>                 :
>
>                 (INT {$n = (double)int.Parse($INT.text);}) (f = fraction {$n
> += f;})? |
>
>                 f = fraction {$n = f;} |
>
>                 AFLOAT {$n = double.Parse($AFLOAT.text);};
>
>
>
> fraction  returns [double f]          :
>
>                 i1=INT SLASH i2=INT {$f = (double)int.Parse($i1.text) /
> (double)int.Parse($i2.text);};
>
>
>
> AFLOAT                :               INT DOT INT?;
>
>
>
> INT         :               '0'..'9'+;
>
>
>
> SLASH   :               '/';
>
>
>
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>
>
>

From geoff_hendrey at yahoo.com  Thu Oct 30 22:40:42 2008
From: geoff_hendrey at yahoo.com (Geoff hendrey)
Date: Thu, 30 Oct 2008 22:40:42 -0700 (PDT)
Subject: [antlr-interest] (POST THIRD TIME) how to bail on
	MissingTokenException
References: <241850.70939.qm@web31806.mail.mud.yahoo.com>
	<71F3CF25-19B2-4DA8-A9E2-047758FD67DF@cs.usfca.edu>
	<138094.88434.qm@web31807.mail.mud.yahoo.com>
	<54EC0078-6998-4A40-BFB4-F7379C9D1ABB@cs.usfca.edu>
Message-ID: <414827.16936.qm@web31806.mail.mud.yahoo.com>

I already have the following in my grammer:

@members{
protected void mismatch(IntStream input, int ttype, BitSet follow)throws RecognitionException{
    throw new MismatchedTokenException(ttype, input);
}
public Object recoverFromMismatchedSet(IntStream input, RecognitionException e, BitSet follow)throws RecognitionException{
    throw e;
}
}
@rulecatch{
catch(RecognitionException e){
    throw e;
}

And when I look in the generated parser I find this:

    protected void mismatch(IntStream input, int ttype, BitSet follow)throws RecognitionException{
        throw new MismatchedTokenException(ttype, input);
    }
    public Object recoverFromMismatchedSet(IntStream input, RecognitionException e, BitSet follow)throws RecognitionException{
        throw e;
    }

 
But it doesn't seem to make any difference. The parser still silently accepts syntactically incorrect inputs. In ANTLRWorks I can see the MissingTokenExceptions in the concrete parse tree. (see attached picture). But the AST just happily builds, even though my input includes a token that is supposed to be surrounded with a pair of angle brackets, but isn't. I've got a rule in my grammar that should force the Identifier to be surrounded by angle brackets.

typedSURID    
    :    'SURID' '<' queryNames'>' Identifier ->^(SURID queryNames Identifier)


I can substitute square brackets instead of angle brackets in my input, and I still just get MissingTokenException in the concrete parse tree, with the AST happily building and no exception thrown out to my application that invokes the parser.

-geoff






________________________________
From: Terence Parr <parrt at cs.usfca.edu>
To: Geoff hendrey <geoff_hendrey at yahoo.com>
Cc: antlr-interest at antlr.org
Sent: Thursday, October 30, 2008 10:55:51 AM
Subject: Re: [antlr-interest] (POST THIRD TIME) how to bail on MissingTokenException

Missing comes from the automatic in-line error recovery. You need to override

    protected Object recoverFromMismatchedToken(IntStream input, int ttype, BitSet follow)

just throw an exception. make sure you don't catch anything later... this should be in the book under how to make the parser bail on first exception.
Ter
On Oct 29, 2008, at 9:25 PM, Geoff hendrey wrote:

> Hi,
> 
> thanks for the response, I really appreciate it. Do you mean "mismatch" or "missing"? Just to be sure we are on the same page, I am getting a MissingTokenException, not MismatchedTokenException. My grammar file already deals with MismatchedTokenException, nd I have no problem with that. I need to find out how to abort parsing on MISSINGTokenException.
> 
> Thanks, and sorry for using caps and bold. Just wanted to make sure we are on the same page.
> 
> -geoff
> 
> 
> 
> From: Terence Parr <parrt at cs.usfca.edu>
> To: Geoff hendrey <geoff_hendrey at yahoo.com>
> Cc: antlr-interest at antlr.org
> Sent: Wednesday, October 29, 2008 12:58:28 PM
> Subject: Re: [antlr-interest] (POST THIRD TIME) how to bail on MissingTokenException
> 
> Hi Geoff, isn't there something in the source code that says " override me if you want to turn off automatic in-line error recovery for mismatch token"?
> Ter
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
> 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20081030/4c16e912/attachment.html 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: Picture 2.png
Type: image/png
Size: 25124 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20081030/4c16e912/attachment.png 

From qwizv9b02 at sneakemail.com  Fri Oct 31 02:41:26 2008
From: qwizv9b02 at sneakemail.com (Hendrik Maryns)
Date: Fri, 31 Oct 2008 10:41:26 +0100
Subject: [antlr-interest] Passing arguments to rules
Message-ID: <geejs7$f5d$1@ger.gmane.org>

Hi,

I have a rule as follows:

firstOrderAtomic returns [Formula result] :
firstOrderAtomicHead[$first.result, $second.result] { $result =
$firstOrderAtomicHead.result;}
first=firstOrderVariable
second=firstOrderVariable ;

I hoped the rule firstOrderAtomicHead would receive the results from
first and second, but looking at the produced code, it doesn?t.  How
would I do this to be able to pass the two variables to the head.  I am
still working on a Lisp-like language, where this rule would e.g. match

(= x y)

and should produce new FirstOrderEquality(varX, varY), where varX and
varY are retrieved from a variable map or created if not present.

I think probably moving to an AST instead of trying to do this directly
in the parser would be a solution, but you probably can judge this
better, so that?s why I?m asking?

TIA, H.
-- 
Hendrik Maryns
http://tcl.sfs.uni-tuebingen.de/~hendrik/
==================
Ask smart questions, get good answers:
http://www.catb.org/~esr/faqs/smart-questions.html

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 257 bytes
Desc: OpenPGP digital signature
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20081031/a7c3eaa1/attachment.bin 

From qwizv9b02 at sneakemail.com  Fri Oct 31 02:43:36 2008
From: qwizv9b02 at sneakemail.com (Hendrik Maryns)
Date: Fri, 31 Oct 2008 10:43:36 +0100
Subject: [antlr-interest] Debugging: how? (Why do I get
 MismatchedTokenException or UnwantedTokenException?) Unhelpful error
 messages.
In-Reply-To: <200810281136.59755.jbb@acm.org>
References: <ge7422$n0$1@ger.gmane.org> <200810281136.59755.jbb@acm.org>
Message-ID: <geek08$f5d$2@ger.gmane.org>

John B. Brodie schreef:
>> If I feed it to formulaList, I get an UnwantedTokenException followed by
>> an EOF, which doesn?t make me any wiser at this point.
> 
> Yes. Confusing message. Which is just one of the reasons I do not use
> AntlrWorks.... (i assume you are using AntlrWroks? if so, maybe there is
> more useful information in the console window?)

I have been experimenting with it, but until now, I like AntlrIDE, the
Eclipse plugin better.  Mainly because it has elements instead of images
in the parse tree, and if you click on them, you see what they
correspond to.

H.
-- 
Hendrik Maryns
http://tcl.sfs.uni-tuebingen.de/~hendrik/
==================
Ask smart questions, get good answers:
http://www.catb.org/~esr/faqs/smart-questions.html

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 257 bytes
Desc: OpenPGP digital signature
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20081031/79721085/attachment.bin 

From antlr at mirality.co.nz  Fri Oct 31 03:15:30 2008
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Fri, 31 Oct 2008 23:15:30 +1300
Subject: [antlr-interest] Passing arguments to rules
In-Reply-To: <geejs7$f5d$1@ger.gmane.org>
References: <geejs7$f5d$1@ger.gmane.org>
Message-ID: <20081031101538.A324011EDE6@www.antlr.org>

At 22:41 31/10/2008, Hendrik Maryns wrote:
 >I have a rule as follows:
 >
 >firstOrderAtomic returns [Formula result] :
 >firstOrderAtomicHead[$first.result, $second.result] { $result =
 >$firstOrderAtomicHead.result;}
 >first=firstOrderVariable
 >second=firstOrderVariable ;
 >
 >I hoped the rule firstOrderAtomicHead would receive the results
 >from first and second, but looking at the produced code, it
 >doesn't.  How would I do this to be able to pass the two
 >variables to the head.

I'm fairly certain that you can't do that, 
because things are called in the order they're 
found, so first and second aren't populated when 
firstOrderAtomicHead is called.  (Given that 
firstOrderAtomic has no idea how much of the 
input stream firstOrderAtomicHead will consume, 
it couldn't work any other way.)

You could use a post-processing action, though:

firstOrderAtomic returns [Formula result]
   : head=firstOrderAtomicHead
     first=firstOrderVariable second=firstOrderVariable
     { $result = CreateFormula($head, 
$first.result, $second.result); }
   ;

(You might need to specify an attribute on $head, 
eg. $head.text or $head.result.)

 >I think probably moving to an AST instead of trying to do this
 >directly in the parser would be a solution, but you probably
 >can judge this better, so that's why I'm asking


That's another option.  It'd probably lead to 
slightly cleaner code, and it'd be handy if you 
wanted to do multiple passes or different sets of 
actions for the same basic input -- but it is a 
little extra overhead.  Up to you to decide which you prefer :)


From zirrus at gmail.com  Fri Oct 31 03:36:20 2008
From: zirrus at gmail.com (=?ISO-8859-1?Q?Javier_Luis_C=E1novas_Izquierdo?=)
Date: Fri, 31 Oct 2008 11:36:20 +0100
Subject: [antlr-interest] Problem generating the Java parser for Oracle
	PL/SQL grammar
Message-ID: <45c28e3e0810310336s4c046fd2veb7029cbce3e55e8@mail.gmail.com>

Hi,

I am working with ANTLRv3 and the Oracle PL/SQL grammar definition
which is located in the antlr grammar list webpage and whose author is
Andrey Kharitonkin. I need to enrich the grammar in order to create a
data structure of the parsed plsql text. However, I have a problem on
the first phase: I cannot generate the Java parser with ANTLR tool
from the grammar of the webpage.

The grammar has activated the backtrack and memoize options and the k
value is *. When I try to generate the parser, I get a
"java.lang.OutOfMemoryError: Java heap space" (firstTrace.txt file
contains the stack trace of this situation). I have tried to
deactivate the backtrack and memoize options and to set the k value to
1 (although it will cause warnings during the generation) and the
problem keeps on (secondTrace.txt file contains the stack trace of
this situation).

I have changed the parameters of the JVM to increase the memory limit
of the virtual machine to 1gb and again, the problem goes on .
However, the memory charge of the java instance does not exceed 100mb.
I cannot understand it.

I have to be doing some wrong because the grammar that I am using is
the same of the grammar list, I have not change anything. I have seen
that the grammar has the "language=CSharp" option. Could that be the
problem? Could you help me?

Thanks

-- 
Javier Luis C?novas Izquierdo
http://zirrus.es
zirrus at gmail.com
-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: firstTrace.txt
Url: http://www.antlr.org/pipermail/antlr-interest/attachments/20081031/14f3b739/attachment.txt 
-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: secondTrace.txt
Url: http://www.antlr.org/pipermail/antlr-interest/attachments/20081031/14f3b739/attachment-0001.txt 

From qwizv9b02 at sneakemail.com  Fri Oct 31 03:36:27 2008
From: qwizv9b02 at sneakemail.com (Hendrik Maryns)
Date: Fri, 31 Oct 2008 11:36:27 +0100
Subject: [antlr-interest] Another little bug: allow \u104a0 (more than 4
	after \u)
Message-ID: <geen3b$p2k$1@ger.gmane.org>

Hi all,

If one wants to specify exotic Unicode ranges, they go beyond \ufff.
Feature request: allow longer ones, such as \u104a0 (Osmanian digit 0: ?).
This symbol is parsed unproblematically by javac , so you?ll have to
adapt you Java parser as well, Terence!  (At least, Eclipse doesn?t
complain, although it doesn?t render it properly.)

Probably, you want

fragment JavaIDDigit
  : '\u0030'..'\u0039'
  | '\u0660'..'\u0669'
  | '\u06f0'..'\u06f9'
  | '\u07c0'..'\u07c9'
  | '\u0966'..'\u096f'
  | '\u09e6'..'\u09ef'
  | '\u0a66'..'\u0a6f'
  | '\u0ae6'..'\u0aef'
  | '\u0b66'..'\u0b6f'
  | '\u0be6'..'\u0bef'
  | '\u0c66'..'\u0c6f'
  | '\u0ce6'..'\u0cef'
  | '\u0d66'..'\u0d6f'
  | '\u0e50'..'\u0e59'
  | '\u0ed0'..'\u0ed9'
  | '\u0f20'..'\u0f33'
  | '\u1040'..'\u1049'
  | '\u1369'..'\u1371'
  | '\u17e0'..'\u17e9'
  | '\u1810'..'\u1819'
  | '\u1946'..'\u194f'
  | '\u19d0'..'\u19d9'
  | '\u1b50'..'\u1b59'
//  | '\u104a0'..'\u104a9' osmanian, ANTLR bug!
//  | '\u10a40'..'\u10a43'
//  | '\u1d360'..'\u1d371'
  ;

and I?m leaving out the mathematical digits here, didn?t test them with
javac.  Similarly, you?ll have to expand Letter.

H.
-- 
Hendrik Maryns
http://tcl.sfs.uni-tuebingen.de/~hendrik/
==================
Ask smart questions, get good answers:
http://www.catb.org/~esr/faqs/smart-questions.html

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 257 bytes
Desc: OpenPGP digital signature
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20081031/6581eb8a/attachment.bin 

From jaluber at gmx.de  Fri Oct 31 04:17:42 2008
From: jaluber at gmx.de (Johannes Luber)
Date: Fri, 31 Oct 2008 12:17:42 +0100
Subject: [antlr-interest] ANTLR book going for 3rd printing
In-Reply-To: <43BA1A59-FB10-4D11-B6DB-FFE1E571024C@cs.usfca.edu>
References: <43BA1A59-FB10-4D11-B6DB-FFE1E571024C@cs.usfca.edu>
Message-ID: <490AE956.9020101@gmx.de>

Terence Parr schrieb:
> howdy, the publisher is going to do another printing of the definitive  
> antlr reference book. They wanted to fix the errata of course, but  
> they want to know how long it would take to update the book to be  
> compatible with 3.1.1. I told him that most of the book would be okay,  
> but some areas such as error handling could use a number of fixes. I  
> might have to wait until next reprint to totally fix things because of  
> the tight schedule for reprinting.
> 
> Can anybody give me a quick idea of what would need to change when  
> moving forward to 3.1.1 from 3.0? In other words, what problems /  
> incompatibilities have you found in the book when using it with 3.1.1?
> 
> Ter

The one I remember is that you changed for explicit lexer and parser
grammars the generated filenames in 3.1.

Johannes
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
> 


From jaluber at gmx.de  Fri Oct 31 04:26:50 2008
From: jaluber at gmx.de (Johannes Luber)
Date: Fri, 31 Oct 2008 12:26:50 +0100
Subject: [antlr-interest] Problem generating the Java parser for Oracle
 PL/SQL grammar
In-Reply-To: <45c28e3e0810310336s4c046fd2veb7029cbce3e55e8@mail.gmail.com>
References: <45c28e3e0810310336s4c046fd2veb7029cbce3e55e8@mail.gmail.com>
Message-ID: <490AEB7A.5000808@gmx.de>

Javier Luis C?novas Izquierdo schrieb:
> Hi,
> 
> I am working with ANTLRv3 and the Oracle PL/SQL grammar definition
> which is located in the antlr grammar list webpage and whose author is
> Andrey Kharitonkin. I need to enrich the grammar in order to create a
> data structure of the parsed plsql text. However, I have a problem on
> the first phase: I cannot generate the Java parser with ANTLR tool
> from the grammar of the webpage.
> 
> The grammar has activated the backtrack and memoize options and the k
> value is *. When I try to generate the parser, I get a
> "java.lang.OutOfMemoryError: Java heap space" (firstTrace.txt file
> contains the stack trace of this situation). I have tried to
> deactivate the backtrack and memoize options and to set the k value to
> 1 (although it will cause warnings during the generation) and the
> problem keeps on (secondTrace.txt file contains the stack trace of
> this situation).
> 
> I have changed the parameters of the JVM to increase the memory limit
> of the virtual machine to 1gb and again, the problem goes on .
> However, the memory charge of the java instance does not exceed 100mb.
> I cannot understand it.
> 
> I have to be doing some wrong because the grammar that I am using is
> the same of the grammar list, I have not change anything. I have seen
> that the grammar has the "language=CSharp" option. Could that be the
> problem? Could you help me?
> 
> Thanks

You have two problems: The first is that you need to tell the Java VM to
use more memory like "java -Xmx1024m ...". Adjust the number to your
needs. The second problem is that the grammar has been developed with C#
as the output language. Changing "CSharp" to "Java" (or removing that
line) won't help entirely, as all actions are written in C#. You have to
go trough them one by one and fix any incompatibilities.

Johannes
> 
> 
> 
> ------------------------------------------------------------------------
> 
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
> 


From jaluber at gmx.de  Fri Oct 31 04:31:58 2008
From: jaluber at gmx.de (Johannes Luber)
Date: Fri, 31 Oct 2008 12:31:58 +0100
Subject: [antlr-interest] Another little bug: allow \u104a0 (more than
 4	after \u)
In-Reply-To: <geen3b$p2k$1@ger.gmane.org>
References: <geen3b$p2k$1@ger.gmane.org>
Message-ID: <490AECAE.50705@gmx.de>

Hendrik Maryns schrieb:
> Hi all,
> 
> If one wants to specify exotic Unicode ranges, they go beyond \ufff.
> Feature request: allow longer ones, such as \u104a0 (Osmanian digit 0: ?).
> This symbol is parsed unproblematically by javac , so you?ll have to
> adapt you Java parser as well, Terence!  (At least, Eclipse doesn?t
> complain, although it doesn?t render it properly.)
> 
> Probably, you want
> 
> fragment JavaIDDigit
>   : '\u0030'..'\u0039'
>   | '\u0660'..'\u0669'
>   | '\u06f0'..'\u06f9'
>   | '\u07c0'..'\u07c9'
>   | '\u0966'..'\u096f'
>   | '\u09e6'..'\u09ef'
>   | '\u0a66'..'\u0a6f'
>   | '\u0ae6'..'\u0aef'
>   | '\u0b66'..'\u0b6f'
>   | '\u0be6'..'\u0bef'
>   | '\u0c66'..'\u0c6f'
>   | '\u0ce6'..'\u0cef'
>   | '\u0d66'..'\u0d6f'
>   | '\u0e50'..'\u0e59'
>   | '\u0ed0'..'\u0ed9'
>   | '\u0f20'..'\u0f33'
>   | '\u1040'..'\u1049'
>   | '\u1369'..'\u1371'
>   | '\u17e0'..'\u17e9'
>   | '\u1810'..'\u1819'
>   | '\u1946'..'\u194f'
>   | '\u19d0'..'\u19d9'
>   | '\u1b50'..'\u1b59'
> //  | '\u104a0'..'\u104a9' osmanian, ANTLR bug!
> //  | '\u10a40'..'\u10a43'
> //  | '\u1d360'..'\u1d371'
>   ;
> 
> and I?m leaving out the mathematical digits here, didn?t test them with
> javac.  Similarly, you?ll have to expand Letter.
> 
> H.

If Java does handle characters above \uffff correctly (I've heard of
some problems) you can simulate \Uxxxxxxxx via assuming UTF-16 encoding
and explicitely parse surrogate characters. As those you are needing
seem to be on a single plane each, this should go somewhat economical.
Until Ter does finally add this feature my suggestion is probably the
only way.

Johannes
> 
> 
> ------------------------------------------------------------------------
> 
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
> 


From qwizv9b02 at sneakemail.com  Fri Oct 31 06:09:22 2008
From: qwizv9b02 at sneakemail.com (Hendrik Maryns)
Date: Fri, 31 Oct 2008 14:09:22 +0100
Subject: [antlr-interest] Another little bug: allow \u104a0 (more than 4
	after \u)
In-Reply-To: <490AECAE.50705@gmx.de>
References: <geen3b$p2k$1@ger.gmane.org> <490AECAE.50705@gmx.de>
Message-ID: <gef023$ku6$1@ger.gmane.org>

Johannes Luber schreef:
> Hendrik Maryns schrieb:
>> Hi all,
>>
>> If one wants to specify exotic Unicode ranges, they go beyond \ufff.
>> Feature request: allow longer ones, such as \u104a0 (Osmanian digit 0: ?).
>> This symbol is parsed unproblematically by javac , so you?ll have to
>> adapt you Java parser as well, Terence!  (At least, Eclipse doesn?t
>> complain, although it doesn?t render it properly.)
>>
>> Probably, you want
>>
>> fragment JavaIDDigit
>>   : '\u0030'..'\u0039'
>>   | '\u0660'..'\u0669'
>>   | '\u06f0'..'\u06f9'
>>   | '\u07c0'..'\u07c9'
>>   | '\u0966'..'\u096f'
>>   | '\u09e6'..'\u09ef'
>>   | '\u0a66'..'\u0a6f'
>>   | '\u0ae6'..'\u0aef'
>>   | '\u0b66'..'\u0b6f'
>>   | '\u0be6'..'\u0bef'
>>   | '\u0c66'..'\u0c6f'
>>   | '\u0ce6'..'\u0cef'
>>   | '\u0d66'..'\u0d6f'
>>   | '\u0e50'..'\u0e59'
>>   | '\u0ed0'..'\u0ed9'
>>   | '\u0f20'..'\u0f33'
>>   | '\u1040'..'\u1049'
>>   | '\u1369'..'\u1371'
>>   | '\u17e0'..'\u17e9'
>>   | '\u1810'..'\u1819'
>>   | '\u1946'..'\u194f'
>>   | '\u19d0'..'\u19d9'
>>   | '\u1b50'..'\u1b59'
>> //  | '\u104a0'..'\u104a9' osmanian, ANTLR bug!
>> //  | '\u10a40'..'\u10a43'
>> //  | '\u1d360'..'\u1d371'
>>   ;
>>
>> and I?m leaving out the mathematical digits here, didn?t test them with
>> javac.  Similarly, you?ll have to expand Letter.
>>
>> H.
> 
> If Java does handle characters above \uffff correctly (I've heard of
> some problems) you can simulate \Uxxxxxxxx via assuming UTF-16 encoding
> and explicitely parse surrogate characters. As those you are needing
> seem to be on a single plane each, this should go somewhat economical.
> Until Ter does finally add this feature my suggestion is probably the
> only way.

Thanks, I will simply ignore them and wait for the fix.  In practice,
these symbols will probably not occur anyway.

H.
-- 
Hendrik Maryns
http://tcl.sfs.uni-tuebingen.de/~hendrik/
==================
Ask smart questions, get good answers:
http://www.catb.org/~esr/faqs/smart-questions.html

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 257 bytes
Desc: OpenPGP digital signature
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20081031/8c832aa4/attachment.bin 

From jimi at temporal-wave.com  Fri Oct 31 07:41:25 2008
From: jimi at temporal-wave.com (Jim Idle)
Date: Fri, 31 Oct 2008 07:41:25 -0700
Subject: [antlr-interest] ints and fractions - how to avoid "Decision
 can match input such as "INT SLASH INT" using multiple alternatives"
 warnings
In-Reply-To: <490a8e71.081b600a.0a71.ffffe88a@mx.google.com>
References: <490a8e71.081b600a.0a71.ffffe88a@mx.google.com>
Message-ID: <1225464085.8005.212.camel@jimi>

On Thu, 2008-10-30 at 21:49 -0700, Sven Prevrhal wrote:
> Essentially, I want a return of type double for e.g.


Consult:

http://www.antlr.org/wiki/display/ANTLR3/Lexer+grammar+for+floating
+point%2C+dot%2C+range%2C+time+specs

To see how to lex floating point numbers and so on, then steal an
expression parser from one of the examples grammars such as Java or C
(whichever sample is closest to your language). The book will also help
you here of course.

Jim

> 
> 3
> 
> 1.523
> 
> 1 2/3
> 
>  
> 
> Below?s my grammar with C# actions, and I get 
> 
> ?Decision can match input such as "INT SLASH INT" using multiple
> alternatives? in Antlrworks. 
> 
>  
> 
> Thanks for your help!!
> 
> Sven
> 
>  
> 
> //
> 
> //Trouble Grammar
> 
> //
> 
> number returns [double n]
> 
>                 :               
> 
>                 (INT {$n = (double)int.Parse($INT.text);}) (f =
> fraction {$n += f;})? | 
> 
>                 f = fraction {$n = f;} | 
> 
>                 AFLOAT {$n = double.Parse($AFLOAT.text);};
> 
>  
> 
> fraction  returns [double f]          :               
> 
>                 i1=INT SLASH i2=INT {$f =
> (double)int.Parse($i1.text) / (double)int.Parse($i2.text);};
> 
>  
> 
> AFLOAT                :               INT DOT INT?;
> 
>  
> 
> INT         :               '0'..'9'+;
> 
>  
> 
> SLASH   :               '/';
> 
>  
> 
>  
> 
> 
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
> 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20081031/5e9fbec6/attachment.html 

From robert at rvaessen.com  Fri Oct 31 07:59:26 2008
From: robert at rvaessen.com (Robert Vaessen)
Date: Fri, 31 Oct 2008 10:59:26 -0400
Subject: [antlr-interest] Thank You
Message-ID: <490B1D4E.8000808@rvaessen.com>

An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20081031/f5849794/attachment.html 

From zirrus at gmail.com  Fri Oct 31 05:18:04 2008
From: zirrus at gmail.com (=?ISO-8859-1?Q?Javier_Luis_C=E1novas_Izquierdo?=)
Date: Fri, 31 Oct 2008 13:18:04 +0100
Subject: [antlr-interest] Problem generating the Java parser for Oracle
	PL/SQL grammar
In-Reply-To: <490AEB7A.5000808@gmx.de>
References: <45c28e3e0810310336s4c046fd2veb7029cbce3e55e8@mail.gmail.com>
	<490AEB7A.5000808@gmx.de>
Message-ID: <45c28e3e0810310518u6f99c234m649cdf94b0a4712d@mail.gmail.com>

Hi Johannes, thanks for your fast response.

Maybe I have not explined the problem correctly, sorry. I have just
proved that changes.

I have specified the parameter for the JVM for increasing the memory
limit of the JVM. Actually, it is "-Xms1024m -Xmx1024m" (will it need
more? really?) and the options section does not contain the line which
specifies the output language (it only contains the output and k
options).

I did not check that the grammar does not contain C# code. However, I
suppose that the parser process generation should not depends on the
actions included by the user. The problem should appear once the
parser is generated, is it true?. Anyway I have just checked the
grammar and I have cleaned it to remove the C# actions. The problem
keeps on.

I have tested the grammar with antlr 3.0.1 and 3.1.1 and both fail. I
think that there should be some wrong (or maybe there is a problem
with the antlr parser tool). I attach the grammar that I am using and
the trace of the last execution.

Thanks!

2008/10/31 Johannes Luber <jaluber at gmx.de>:
> Javier Luis C?novas Izquierdo schrieb:
>> Hi,
>>
>> I am working with ANTLRv3 and the Oracle PL/SQL grammar definition
>> which is located in the antlr grammar list webpage and whose author is
>> Andrey Kharitonkin. I need to enrich the grammar in order to create a
>> data structure of the parsed plsql text. However, I have a problem on
>> the first phase: I cannot generate the Java parser with ANTLR tool
>> from the grammar of the webpage.
>>
>> The grammar has activated the backtrack and memoize options and the k
>> value is *. When I try to generate the parser, I get a
>> "java.lang.OutOfMemoryError: Java heap space" (firstTrace.txt file
>> contains the stack trace of this situation). I have tried to
>> deactivate the backtrack and memoize options and to set the k value to
>> 1 (although it will cause warnings during the generation) and the
>> problem keeps on (secondTrace.txt file contains the stack trace of
>> this situation).
>>
>> I have changed the parameters of the JVM to increase the memory limit
>> of the virtual machine to 1gb and again, the problem goes on .
>> However, the memory charge of the java instance does not exceed 100mb.
>> I cannot understand it.
>>
>> I have to be doing some wrong because the grammar that I am using is
>> the same of the grammar list, I have not change anything. I have seen
>> that the grammar has the "language=CSharp" option. Could that be the
>> problem? Could you help me?
>>
>> Thanks
>
> You have two problems: The first is that you need to tell the Java VM to
> use more memory like "java -Xmx1024m ...". Adjust the number to your
> needs. The second problem is that the grammar has been developed with C#
> as the output language. Changing "CSharp" to "Java" (or removing that
> line) won't help entirely, as all actions are written in C#. You have to
> go trough them one by one and fix any incompatibilities.
>
> Johannes
>>
>>
>>
>> ------------------------------------------------------------------------
>>
>>
>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>>
>
>



--
Javier Luis C?novas Izquierdo
http://zirrus.es
zirrus at gmail.com
-------------- next part --------------
A non-text attachment was scrubbed...
Name: PLSQL3.g3
Type: application/octet-stream
Size: 36832 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20081031/ae2af93b/attachment-0001.obj 
-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: trace.txt
Url: http://www.antlr.org/pipermail/antlr-interest/attachments/20081031/ae2af93b/attachment-0001.txt 

From parrt at cs.usfca.edu  Fri Oct 31 08:34:41 2008
From: parrt at cs.usfca.edu (Terence Parr)
Date: Fri, 31 Oct 2008 08:34:41 -0700
Subject: [antlr-interest] (POST THIRD TIME) how to bail on
	MissingTokenException
In-Reply-To: <414827.16936.qm@web31806.mail.mud.yahoo.com>
References: <241850.70939.qm@web31806.mail.mud.yahoo.com>
	<71F3CF25-19B2-4DA8-A9E2-047758FD67DF@cs.usfca.edu>
	<138094.88434.qm@web31807.mail.mud.yahoo.com>
	<54EC0078-6998-4A40-BFB4-F7379C9D1ABB@cs.usfca.edu>
	<414827.16936.qm@web31806.mail.mud.yahoo.com>
Message-ID: <B35F4B81-7125-42D0-B8BB-0A23DAFBD0CE@cs.usfca.edu>

Interesting. then, the debugger is your friend.  A simple grmmar + dbg  
should explain all. please post what was wrong.  I've not had a  
problem before.
Ter
On Oct 30, 2008, at 10:40 PM, Geoff hendrey wrote:

> I already have the following in my grammer:
>
> @members{
> protected void mismatch(IntStream input, int ttype, BitSet  
> follow)throws RecognitionException{
>     throw new MismatchedTokenException(ttype, input);
> }
> public Object recoverFromMismatchedSet(IntStream input,  
> RecognitionException e, BitSet follow)throws RecognitionException{
>     throw e;
> }
> }
> @rulecatch{
> catch(RecognitionException e){
>     throw e;
> }
>
> And when I look in the generated parser I find this:
>
>     protected void mismatch(IntStream input, int ttype, BitSet  
> follow)throws RecognitionException{
>         throw new MismatchedTokenException(ttype, input);
>     }
>     public Object recoverFromMismatchedSet(IntStream input,  
> RecognitionException e, BitSet follow)throws RecognitionException{
>         throw e;
>     }
>
>
> But it doesn't seem to make any difference. The parser still  
> silently accepts syntactically incorrect inputs. In ANTLRWorks I can  
> see the MissingTokenExceptions in the concrete parse tree. (see  
> attached picture). But the AST just happily builds, even though my  
> input includes a token that is supposed to be surrounded with a pair  
> of angle brackets, but isn't. I've got a rule in my grammar that  
> should force the Identifier to be surrounded by angle brackets.
>
> typedSURID
>     :    'SURID' '<' queryNames'>' Identifier ->^(SURID queryNames  
> Identifier)
>
> I can substitute square brackets instead of angle brackets in my  
> input, and I still just get MissingTokenException in the concrete  
> parse tree, with the AST happily building and no exception thrown  
> out to my application that invokes the parser.
>
> -geoff
>
>
>
> From: Terence Parr <parrt at cs.usfca.edu>
> To: Geoff hendrey <geoff_hendrey at yahoo.com>
> Cc: antlr-interest at antlr.org
> Sent: Thursday, October 30, 2008 10:55:51 AM
> Subject: Re: [antlr-interest] (POST THIRD TIME) how to bail on  
> MissingTokenException
>
> Missing comes from the automatic in-line error recovery. You need to  
> override
>
>     protected Object recoverFromMismatchedToken(IntStream input, int  
> ttype, BitSet follow)
>
> just throw an exception. make sure you don't catch anything later...  
> this should be in the book under how to make the parser bail on  
> first exception.
> Ter
> On Oct 29, 2008, at 9:25 PM, Geoff hendrey wrote:
>
> > Hi,
> >
> > thanks for the response, I really appreciate it. Do you mean  
> "mismatch" or "missing"? Just to be sure we are on the same page, I  
> am getting a MissingTokenException, not MismatchedTokenException. My  
> grammar file already deals with MismatchedTokenException, nd I have  
> no problem with that. I need to find out how to abort parsing on  
> MISSINGTokenException.
> >
> > Thanks, and sorry for using caps and bold. Just wanted to make  
> sure we are on the same page.
> >
> > -geoff
> >
> >
> >
> > From: Terence Parr <parrt at cs.usfca.edu>
> > To: Geoff hendrey <geoff_hendrey at yahoo.com>
> > Cc: antlr-interest at antlr.org
> > Sent: Wednesday, October 29, 2008 12:58:28 PM
> > Subject: Re: [antlr-interest] (POST THIRD TIME) how to bail on  
> MissingTokenException
> >
> > Hi Geoff, isn't there something in the source code that says "  
> override me if you want to turn off automatic in-line error recovery  
> for mismatch token"?
> > Ter
> >
> > List: http://www.antlr.org/mailman/listinfo/antlr-interest
> > Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
> >
>
> <Picture 2.png>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20081031/1103735b/attachment.html 

From parrt at cs.usfca.edu  Fri Oct 31 08:35:28 2008
From: parrt at cs.usfca.edu (Terence Parr)
Date: Fri, 31 Oct 2008 08:35:28 -0700
Subject: [antlr-interest] Debugging: how? (Why do I get
	MismatchedTokenException or UnwantedTokenException?)
	Unhelpful error messages.
In-Reply-To: <geek08$f5d$2@ger.gmane.org>
References: <ge7422$n0$1@ger.gmane.org> <200810281136.59755.jbb@acm.org>
	<geek08$f5d$2@ger.gmane.org>
Message-ID: <E2493F7E-3773-490D-B3B8-9F75DA65FB9A@cs.usfca.edu>


On Oct 31, 2008, at 2:43 AM, Hendrik Maryns wrote:

> John B. Brodie schreef:
>>> If I feed it to formulaList, I get an UnwantedTokenException  
>>> followed by
>>> an EOF, which doesn?t make me any wiser at this point.
>>
>> Yes. Confusing message. Which is just one of the reasons I do not use
>> AntlrWorks.... (i assume you are using AntlrWroks? if so, maybe  
>> there is
>> more useful information in the console window?)
>
> I have been experimenting with it, but until now, I like AntlrIDE, the
> Eclipse plugin better.  Mainly because it has elements instead of  
> images
> in the parse tree, and if you click on them, you see what they
> correspond to.

Same with AW in dbg mode. clikc on tree node (AST or parse tree) and  
it highlights input and grammar rule that matched it.

Ter

From parrt at cs.usfca.edu  Fri Oct 31 08:36:09 2008
From: parrt at cs.usfca.edu (Terence Parr)
Date: Fri, 31 Oct 2008 08:36:09 -0700
Subject: [antlr-interest] Thank You
In-Reply-To: <490B1D4E.8000808@rvaessen.com>
References: <490B1D4E.8000808@rvaessen.com>
Message-ID: <CBCD806D-7022-4AEA-994D-C06DFC092484@cs.usfca.edu>

Glad to hear you're enjoying yourself :)
Ter


From adman1108 at gmail.com  Fri Oct 31 13:54:14 2008
From: adman1108 at gmail.com (AlanM)
Date: Fri, 31 Oct 2008 16:54:14 -0400
Subject: [antlr-interest] How to get Javadocs for integration with Eclipse?
Message-ID: <490B7076.5040507@gmail.com>

Hello, this is my first post to antlr-interest. I know this topic has 
come up before but I couldn't find an answer to this question:

How can I get or build complete Javadocs so that I can smoothly 
integrate the generated Java classes with the rest of my Eclipse 
projects? Eclipse doesn't like the online Javadocs at 
http://www.antlr.org/api/Java/index.html -- it doesn't recognize them as 
valid.

Or alternatively -- how can I download the complete source of 
antlr-3.1.1? The source in the antlr-3.1.1.jar is missing the vital 
org.antlr.runtime package.

Thanks for any advice
Alan

From robert.soule at gmail.com  Fri Oct 31 14:07:27 2008
From: robert.soule at gmail.com (Robert Soule)
Date: Fri, 31 Oct 2008 17:07:27 -0400
Subject: [antlr-interest] lexer problem
Message-ID: <d1316fd70810311407r176180a5sef9cc21a3795cef2@mail.gmail.com>

Hi,

I was hoping someone might be able to help me out. I have the following
grammar:

grammar Test;
start: '[' AB ']' | A;
A: '[a]';
AB: ('a' | 'b')+;

In English, there is a keyword in my language '[a]', and
all other statements are of the form: [(a|b)+]. I tried this
with two test cases:

test [ab] fails unexpectedly (no viable alternative)
test [ba] succeeds

I believe that the lexer sees a '[' character followed by
an 'a' characters, and expects a ']' next, even though
'a' or 'b' could also be valid next input characters. Has
anyone had any experience with this type of issue?

thank you,
Robert Soule

From iar73 at freemail.hu  Fri Oct 31 16:36:09 2008
From: iar73 at freemail.hu (=?ISO-8859-2?Q?Imre_Andr=E1s?=)
Date: Sat, 1 Nov 2008 00:36:09 +0100 (CET)
Subject: [antlr-interest] (no subject)
Message-ID: <freemail.20081001003609.902@fm25.freemail.hu>

Hi,

I'm playing with ANTLRWorks 1.2.1. When I try to debug my grammar, the result is a compile error, unreachable statement. Any hints on how to correct this?

Please find the grammar and the console error message included at the bottom.


Thanks,
  Andr?s

--- unreachable.g --------------------
grammar unreachable;

ID  :   ('a'..'z'|'A'..'Z')+ ;
DEFINES : '::=' ;
WS  :   (' '|'\t')+ {skip();} ;

prog:   stat+ ;
                
stat:   assignment;

assignment    :    leftValue WS* DEFINES WS* rightValue {System.out.println($leftValue.value + "=" + $rightValue.value);};

leftValue returns [String value]:    ID {return $ID.text;};
rightValue returns [String value]:    ID {return $ID.text;}| sequence {return $sequence.value;};

sequence returns [String value]:    'SEQUENCE' WS* '{' WS* e=rightValue {$value=$e.value;} (WS* ',' WS* e=rightValue {$value += $e.value;})* WS* '}' {return $value;};


--- console tab --------------------
[00:10:23] C:\Documents and Settings\iar\My Documents\output\unreachableParser.java:419: unreachable statement
[00:10:23]                     break;
[00:10:23]                     ^
[00:10:23] C:\Documents and Settings\iar\My Documents\output\unreachableParser.java:435: unreachable statement
[00:10:23]                     break;
[00:10:23]                     ^
[00:10:23] 2 errors

--- end of info ---
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20081101/10f9b0d6/attachment.html 

From wbgillis at gmail.com  Fri Oct 31 16:47:10 2008
From: wbgillis at gmail.com (Ben Gillis)
Date: Fri, 31 Oct 2008 18:47:10 -0500
Subject: [antlr-interest] C# Target Unreachable Code
Message-ID: <6E872CECFD894C9FA8DF91E04F2F379B@homelaptop>

why the unreachable code generation?

...
else if ( (true) )
{
    alt8 = 3;
}
else 
{
    if ( state.backtracking > 0 ) {state.failed = true; return retval;}
    NoViableAltException nvae_d8s1 =
    new NoViableAltException("", 8, 1, input);
    throw nvae_d8s1;
}

It seems fairly harmless to disable 0219 (unused variables), but disabling unreachable code warnings perhaps not.

Regards,
Ben
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20081031/db065864/attachment.html 

From parrt at cs.usfca.edu  Fri Oct 31 17:23:47 2008
From: parrt at cs.usfca.edu (Terence Parr)
Date: Fri, 31 Oct 2008 17:23:47 -0700
Subject: [antlr-interest] (no subject)
In-Reply-To: <freemail.20081001003609.902@fm25.freemail.hu>
References: <freemail.20081001003609.902@fm25.freemail.hu>
Message-ID: <83F4A5CA-D527-4EF5-A498-8AC2D94E7569@cs.usfca.edu>

return $ID.text should be $value = $ID.text.
Ter

From gerald at certiv.net  Fri Oct 31 17:37:59 2008
From: gerald at certiv.net (Gerald Rosenberg)
Date: Fri, 31 Oct 2008 17:37:59 -0700
Subject: [antlr-interest] (no subject)
In-Reply-To: <freemail.20081001003609.902@fm25.freemail.hu>
References: <freemail.20081001003609.902@fm25.freemail.hu>
Message-ID: <200811010038.mA10c0AV025801@zinc.newtechlaw.com>

At 04:36 PM 10/31/2008, =?ISO-8859-2?Q?Imre_Andr=E1s?= wrote:

>--- unreachable.g --------------------
>grammar unreachable;
>
>ID  :   ('a'..'z'|'A'..'Z')+ ;

....

>sequence returns [String value]:    'SEQUENCE' WS* '{' WS* 
>e=rightValue {$value=$e.value;} (WS* ',' WS* e=rightValue {$value += 
>$e.value;})* WS* '}' {return $value;};

The unreacheable compile analysis-time error is likely due to the 
fact that ID will consume all alpha characters, leaving no way to 
match the literal 'SEQUENCE'.

BTW, since you are skip()ing whitespace, you can remove the WS* from 
the parser rules with no affect. 


From wbgillis at gmail.com  Fri Oct 31 18:00:14 2008
From: wbgillis at gmail.com (Ben Gillis)
Date: Fri, 31 Oct 2008 20:00:14 -0500
Subject: [antlr-interest] QUESTION on: How do I handle abbreviated keywords?
Message-ID: <F6CBE06B817147B29C0466E492DCD8CA@homelaptop>

see http://www.antlr.org/wiki/pages/viewpage.action?pageId=1802308.

It's not clear to me the connection between the tokens block (and its auto-gen'd code), and this statement in the 
above URL:

"might simply consult an IDictionary<string,int> map of all keywords (incl abbreviations). "

The tokens block ends up in a string array named tokenNames (CSharp2 target).  My tokens keywords are mixed with other entries related to the grammar definition.

Am I supposed to write an initialization routine that builds a dictionary?  If so, I have to filter through the auto-gen'd tokenNames making sure to enter only my keywords, otherwise I'll get false hits in my CheckKeywordsTable routine.  Somehow, this doesn't seem quite right, ???


Regards,
Ben




-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20081031/b6e93f1b/attachment.html 

From iar73 at freemail.hu  Fri Oct 31 18:04:25 2008
From: iar73 at freemail.hu (=?ISO-8859-2?Q?Imre_Andr=E1s?=)
Date: Sat, 1 Nov 2008 02:04:25 +0100 (CET)
Subject: [antlr-interest] (no subject)
In-Reply-To: <83F4A5CA-D527-4EF5-A498-8AC2D94E7569@cs.usfca.edu>
Message-ID: <freemail.20081001020425.91696@fm25.freemail.hu>

Thanks for the quick reply, Terence.

I corrected it at all occurences, and that worked.


Andr?s

Terence Parr <parrt at cs.usfca.edu> ?rta: 


> return $ID.text should be $value = $ID.text.
> Ter
> 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20081101/5ccdd2e5/attachment.html 

From iar73 at freemail.hu  Fri Oct 31 18:39:50 2008
From: iar73 at freemail.hu (=?ISO-8859-2?Q?Imre_Andr=E1s?=)
Date: Sat, 1 Nov 2008 02:39:50 +0100 (CET)
Subject: [antlr-interest] (no subject)
In-Reply-To: <200811010038.mA10c0AV025801@zinc.newtechlaw.com>
Message-ID: <freemail.20081001023950.19446@fm25.freemail.hu>

Gerald Rosenberg <gerald at certiv.net> ?rta: 


> At 04:36 PM 10/31/2008, =?ISO-8859-2?Q?Imre_Andr=E1s?= wrote:
> 
> >--- unreachable.g --------------------
> >grammar unreachable;
> >
> >ID  :   ('a'..'z'|'A'..'Z')+ ;
> 
> ....
> 
> >sequence returns [String value]:    'SEQUENCE' WS* '{' WS* 
> >e=rightValue {$value=$e.value;} (WS* ',' WS* e=rightValue {$value += 
> >$e.value;})* WS* '}' {return $value;};
> 
> The unreacheable compile analysis-time error is likely due to the 
> fact that ID will consume all alpha characters, leaving no way to 
> match the literal 'SEQUENCE'.
> 
> BTW, since you are skip()ing whitespace, you can remove the WS* from 
> the parser rules with no affect. 
> 
> ady got rid of the unreachable error based on Terence's comments. However, you have a point that the ID and SEQUENCE are ambigous. Interpreting A ::= SEQUENCE{ SEQUENCE } gives a MismatchedTokenException, though parsing continues after a resync.

I put SEQUENCE : 'SEQUENCE' in the grammar, and modified the sequence rule to use it. Now it does not compile because of the ambiguity.

Now how can I explicitly tell that SEQUENCE is a keyword, and not a valid ID?


Thanks,
  Andr?s
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20081101/f9e38a2e/attachment.html 

From gerald at certiv.net  Fri Oct 31 19:09:47 2008
From: gerald at certiv.net (Gerald Rosenberg)
Date: Fri, 31 Oct 2008 19:09:47 -0700
Subject: [antlr-interest] (no subject)
In-Reply-To: <freemail.20081001023950.19446@fm25.freemail.hu>
References: <200811010038.mA10c0AV025801@zinc.newtechlaw.com>
	<freemail.20081001023950.19446@fm25.freemail.hu>
Message-ID: <200811010215.mA12F0s3026471@zinc.newtechlaw.com>

At 06:39 PM 10/31/2008, =?ISO-8859-2?Q?Imre_Andr=E1s?= wrote:

>Now how can I explicitly tell that SEQUENCE is a keyword, and not a valid ID?


tokens { SQ; }

ID:        { 'SEQUENCE' }=> 'SEQUENCE'  {$type = SQ}
         | ('a'..'z'|'A'..'Z')+ ;





>Thanks,
>   Andr?s


From antlr at mirality.co.nz  Fri Oct 31 19:40:04 2008
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Sat, 01 Nov 2008 15:40:04 +1300
Subject: [antlr-interest] lexer problem
In-Reply-To: <d1316fd70810311407r176180a5sef9cc21a3795cef2@mail.gmail.co
 m>
References: <d1316fd70810311407r176180a5sef9cc21a3795cef2@mail.gmail.com>
Message-ID: <20081101024011.7CB9B35229D@www.antlr.org>

At 10:07 1/11/2008, Robert Soule wrote:
 >I was hoping someone might be able to help me out. I have the
 >following grammar:
 >
 >grammar Test;
 >start: '[' AB ']' | A;
 >A: '[a]';
 >AB: ('a' | 'b')+;
 >
 >In English, there is a keyword in my language '[a]', and
 >all other statements are of the form: [(a|b)+]. I tried this
 >with two test cases:
 >
 >test [ab] fails unexpectedly (no viable alternative)
 >test [ba] succeeds
 >
 >I believe that the lexer sees a '[' character followed by
 >an 'a' characters, and expects a ']' next, even though
 >'a' or 'b' could also be valid next input characters. Has
 >anyone had any experience with this type of issue?

Yeah, this is a common prefix problem :)  (By which I both mean 
that it's a common problem and that it's a problem with common 
prefixes.)

Essentially what you've got above are the following lexer rules:

T15: '[';
T16: ']';
A: '[a]';
AB: ('a' | 'b')+;

To decide between these top-level alternatives, ANTLR essentially 
builds a least-lookahead disambiguation table.  With only one 
character of lookahead, it can instantly recognise the difference 
between T16, AB, and *either* of T15 and A, but it needs at least 
two characters to tell between T15 and A.  It never checks that 
third character, which is what it'd need to look at to decide 
between a single A vs. a T15 *followed by* an AB.

To deal with this kind of problem, you need to manually force the 
necessary lookahead.  You can do this by combining the rules with 
common prefixes:

fragment A: '[a]';
LSQUARE: '[' ('a]' { $type = A; })? ;

Another way of writing it:

fragment A: '[a]';
LSQUARE
   :  (A) => A { $type = A; }
   |  '['
   ;

(Either way, of course, you'll need to refer to LSQUARE in your 
parser rules after this.)


From antlr at mirality.co.nz  Fri Oct 31 19:52:34 2008
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Sat, 01 Nov 2008 15:52:34 +1300
Subject: [antlr-interest] QUESTION on: How do I handle abbreviated
 keywords?
In-Reply-To: <F6CBE06B817147B29C0466E492DCD8CA@homelaptop>
References: <F6CBE06B817147B29C0466E492DCD8CA@homelaptop>
Message-ID: <20081101025314.A017611EDF3@www.antlr.org>

At 14:00 1/11/2008, Ben Gillis wrote:
>see 
>http://www.antlr.org/wiki/pages/viewpage.action?pageId=1802308.
>
>It's not clear to me the connection between the tokens block (and 
>its auto-gen'd code), and this statement in the above URL:
>
>"might simply consult an IDictionary<string,int> map of all 
>keywords (incl abbreviations). "
>
>The tokens block ends up in a string array named tokenNames 
>(CSharp2 target).  My tokens keywords are mixed with other 
>entries related to the grammar definition.
>
>Am I supposed to write an initialization routine that builds a 
>dictionary?  If so, I have to filter through the auto-gen'd 
>tokenNames making sure to enter only my keywords, otherwise I'll 
>get false hits in my CheckKeywordsTable routine.  Somehow, this 
>doesn't seem quite right, ???

The tokenNames array is a list of token *names*, which is useless 
for that purpose, since for that particular keyword matching 
strategy what you're after is a mapping of keyword *text* to token 
*value*, which is an entirely different thing.

Say you have the keywords "begin", "end", and "while".  Your 
tokens block declares imaginary token types like this:

tokens {
   BEGIN;
   END;
   WHILE;
}

These carry no text and can't do any matching by themselves, but 
they *do* allocate a token ID for them.  In your lexer's 
constructor, you additionally set up a dictionary mapping like so:

   keywordTable.Add("begin", BEGIN);
   keywordTable.Add("end", END);
   keywordTable.Add("while", WHILE);

Then in the CheckKeywordsTable function you use that mapping to 
return the "real" token type, be that one listed in the table or 
the catch-all IDENTIFIER (when it doesn't look like a 
keyword).  For more complicated cases you may need to do something 
smarter than a dictionary lookup, but that's up to you.

(To handle abbreviations, which is what that page is primarily 
focused on, then obviously you'll have to add the valid 
abbreviations of the keywords to the table as well.)


From wbgillis at gmail.com  Fri Oct 31 22:53:42 2008
From: wbgillis at gmail.com (Ben Gillis)
Date: Sat, 1 Nov 2008 00:53:42 -0500
Subject: [antlr-interest] QUESTION on: How do I handle abbreviated
	keywords?
References: <F6CBE06B817147B29C0466E492DCD8CA@homelaptop>
	<490bc49a.0c0bca0a.2ec8.ffffb1e5SMTPIN_ADDED@mx.google.com>
Message-ID: <458D50E380214757BA4CEAEC978E6BC9@homelaptop>

Thank you, Gavin, for taking the time to reply.

>Am I supposed to write an initialization routine that builds a dictionary?
So, this is what I have to do.

In my CSharp2 target, there *already* is both components necessary for this 
dicationary; string values of the tokens and the corresponding integer token 
type.
It appears I have to duplicate some of that to make a dictionary, which is 
OK, but surprising since ANTLR doc/publication stresses efficiency. i.e. it 
seems the target could've reorg'd it in such a way as to provide this vs. 
requiring manual duplication of it.  Just thinking out loud, not 
complaining...overall, I'm loving ANTLR.  :-)

Regards,
Ben



----- Original Message ----- 
From: "Gavin Lambert" <antlr at mirality.co.nz>
To: "Ben Gillis" <wbgillis at gmail.com>; <antlr-interest at antlr.org>
Sent: Friday, October 31, 2008 9:52 PM
Subject: Re: [antlr-interest] QUESTION on: How do I handle abbreviated 
keywords?


> At 14:00 1/11/2008, Ben Gillis wrote:
>>see http://www.antlr.org/wiki/pages/viewpage.action?pageId=1802308.
>>
>>It's not clear to me the connection between the tokens block (and its 
>>auto-gen'd code), and this statement in the above URL:
>>
>>"might simply consult an IDictionary<string,int> map of all keywords (incl 
>>abbreviations). "
>>
>>The tokens block ends up in a string array named tokenNames (CSharp2 
>>target).  My tokens keywords are mixed with other entries related to the 
>>grammar definition.
>>
>>Am I supposed to write an initialization routine that builds a dictionary? 
>>If so, I have to filter through the auto-gen'd tokenNames making sure to 
>>enter only my keywords, otherwise I'll get false hits in my 
>>CheckKeywordsTable routine.  Somehow, this doesn't seem quite right, ???
>
> The tokenNames array is a list of token *names*, which is useless for that 
> purpose, since for that particular keyword matching strategy what you're 
> after is a mapping of keyword *text* to token *value*, which is an 
> entirely different thing.
>
> Say you have the keywords "begin", "end", and "while".  Your tokens block 
> declares imaginary token types like this:
>
> tokens {
>   BEGIN;
>   END;
>   WHILE;
> }
>
> These carry no text and can't do any matching by themselves, but they *do* 
> allocate a token ID for them.  In your lexer's constructor, you 
> additionally set up a dictionary mapping like so:
>
>   keywordTable.Add("begin", BEGIN);
>   keywordTable.Add("end", END);
>   keywordTable.Add("while", WHILE);
>
> Then in the CheckKeywordsTable function you use that mapping to return the 
> "real" token type, be that one listed in the table or the catch-all 
> IDENTIFIER (when it doesn't look like a keyword).  For more complicated 
> cases you may need to do something smarter than a dictionary lookup, but 
> that's up to you.
>
> (To handle abbreviations, which is what that page is primarily focused on, 
> then obviously you'll have to add the valid abbreviations of the keywords 
> to the table as well.)
> 


From antlr at mirality.co.nz  Fri Oct 31 23:36:05 2008
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Sat, 01 Nov 2008 19:36:05 +1300
Subject: [antlr-interest] QUESTION on: How do I handle abbreviated
 keywords?
In-Reply-To: <458D50E380214757BA4CEAEC978E6BC9@homelaptop>
References: <F6CBE06B817147B29C0466E492DCD8CA@homelaptop>
	<490bc49a.0c0bca0a.2ec8.ffffb1e5SMTPIN_ADDED@mx.google.com>
	<458D50E380214757BA4CEAEC978E6BC9@homelaptop>
Message-ID: <20081101063615.9E95D31296B@www.antlr.org>

At 18:53 1/11/2008, Ben Gillis wrote:
 >In my CSharp2 target, there *already* is both components 
necessary
 >for this dicationary; string values of the tokens and the
 >corresponding integer token type.

No, there isn't :)

If you have a token called BEGIN, the string you'll find in 
tokenNames is "BEGIN" -- which is a different string from "begin", 
the keyword in the input language that you actually want to 
match.  And it's different again from "bgn", which might be a 
valid abbreviation for the same keyword (and thus should translate 
to the same token type).

The token name is purely arbitrary -- it could be called 
BEGIN_KEYWORD, or KW_BEGIN, or BLOCK_START, or even FOO.  While 
it's usually convenient to name it similar to what it's going to 
end up matching in the input language, there's no requirement to 
do so -- and that's especially true of imaginary tokens, which 
don't actually match anything in the input language at all (or at 
least not directly).

There's no way this kind of information can be generated 
automatically -- hence if you want to do things that way, then you 
have to do them yourself :)

 >It appears I have to duplicate some of that to make a 
dictionary,
 >which is OK, but surprising since ANTLR doc/publication stresses 

 >efficiency.  i.e. it seems the target could've reorg'd it in 
such
 >a way as to provide this vs. requiring manual duplication of 
it.
 >Just thinking out loud, not complaining...overall, I'm loving
 >ANTLR.  :-)

Well, this is a bit of a side path, after all.  That's not how 
you'd normally define keywords.  (At least, it's not how I ever do 
it; some people do prefer that sort of thing though.)


