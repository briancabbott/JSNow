<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [antlr-interest] Additional char from LEXER-&gt;getText
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20Additional%20char%20from%20LEXER-%3EgetText&In-Reply-To=%3CE908C789-F632-4EDE-9948-BBA5524B61C2%40temporal-wave.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="045146.html">
   <LINK REL="Next"  HREF="045139.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[antlr-interest] Additional char from LEXER-&gt;getText</H1>
    <B>Jim Idle</B> 
    <A HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20Additional%20char%20from%20LEXER-%3EgetText&In-Reply-To=%3CE908C789-F632-4EDE-9948-BBA5524B61C2%40temporal-wave.com%3E"
       TITLE="[antlr-interest] Additional char from LEXER-&gt;getText">jimi at temporal-wave.com
       </A><BR>
    <I>Fri Aug 31 08:53:30 PDT 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="045146.html">[antlr-interest] Additional char from LEXER-&gt;getText
</A></li>
        <LI>Next message: <A HREF="045139.html">[antlr-interest] Java.g -&gt; AST == exception
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#45148">[ date ]</a>
              <a href="thread.html#45148">[ thread ]</a>
              <a href="subject.html#45148">[ subject ]</a>
              <a href="author.html#45148">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I added support for $text because so many examples had it. It is fine if you are not doing anything that is performance or memory sensitive. 

I think that the goal of non language specific action isn't that realistic and will get in the way of doing things correctly. 

Also note that the case insensitive option only works on ASCII and not the full Unicode code point set. 

Jim

On Aug 31, 2012, at 12:26 AM, Mike Lischke &lt;<A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">mike at lischke-online.de</A>&gt; wrote:

&gt;<i> 
</I>&gt;<i> Hi Jim,
</I>&gt;<i> 
</I>&gt;&gt;<i> Actually, those routines are really only there for convenience. You will
</I>&gt;&gt;<i> find them too slow and and cumbersome for any complicated tasks. It is
</I>&gt;&gt;<i> better to use the pointer to the input stream directly and avoid any
</I>&gt;&gt;<i> copying and malloc() calls.
</I>&gt;<i> 
</I>&gt;<i> Well, this is what the target uses for the $text token in the grammar. If the used code is not good shouldn't the code generator then use a better one? I would like to avoid language specific stuff in my grammar where I can.
</I>&gt;<i> 
</I>&gt;&gt;<i> However is this because you have a UTF8 input but are using the 8 bit
</I>&gt;&gt;<i> input stream?
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> My setup goes like this:
</I>&gt;<i> 
</I>&gt;<i>  input = antlr3StringStreamNew((pANTLR3_UINT8)utf8.c_str(), ANTLR3_ENC_UTF8, utf8.size(), (pANTLR3_UINT8)&quot;sql-script&quot;);
</I>&gt;<i>  input-&gt;setUcaseLA(input, ANTLR3_TRUE); // Make input case-insensitive. String literals must all be upper case in the grammer!
</I>&gt;<i> 
</I>&gt;<i>  lexer = MySQL56LexerNew(input);
</I>&gt;<i>  tokens = antlr3CommonTokenStreamSourceNew(ANTLR3_SIZE_HINT, TOKENSOURCE(lexer));
</I>&gt;<i>  parser = MySQL56ParserNew(tokens);
</I>&gt;<i> 
</I>&gt;<i>  MySQL56Parser_query_return ast = parser-&gt;query(parser);
</I>&gt;<i> 
</I>&gt;<i> Isn't that how it is supposed to work?
</I>&gt;<i> 
</I>&gt;<i> Mike
</I>&gt;<i> -- 
</I>&gt;<i> www.soft-gems.net
</I>&gt;<i> 
</I>&gt;<i> 
</I></PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="045146.html">[antlr-interest] Additional char from LEXER-&gt;getText
</A></li>
	<LI>Next message: <A HREF="045139.html">[antlr-interest] Java.g -&gt; AST == exception
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#45148">[ date ]</a>
              <a href="thread.html#45148">[ thread ]</a>
              <a href="subject.html#45148">[ subject ]</a>
              <a href="author.html#45148">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.antlr.org/mailman/listinfo/antlr-interest">More information about the antlr-interest
mailing list</a><br>
</body></html>
