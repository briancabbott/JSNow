<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [antlr-interest] Fwd:  Mismatched token problem
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20Fwd%3A%20%20Mismatched%20token%20problem&In-Reply-To=%3C20090115170105.257540%40gmx.net%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="032338.html">
   <LINK REL="Next"  HREF="032347.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[antlr-interest] Fwd:  Mismatched token problem</H1>
    <B>Johannes Luber</B> 
    <A HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20Fwd%3A%20%20Mismatched%20token%20problem&In-Reply-To=%3C20090115170105.257540%40gmx.net%3E"
       TITLE="[antlr-interest] Fwd:  Mismatched token problem">JALuber at gmx.de
       </A><BR>
    <I>Thu Jan 15 09:01:05 PST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="032338.html">[antlr-interest] Fwd:  Mismatched token problem
</A></li>
        <LI>Next message: <A HREF="032347.html">[antlr-interest] crash in C runtime during PREPORTERROR()
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#32340">[ date ]</a>
              <a href="thread.html#32340">[ thread ]</a>
              <a href="subject.html#32340">[ subject ]</a>
              <a href="author.html#32340">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>&gt;<i> Just realized that when I hit &quot;Reply&quot; it sent the message to Kevin
</I>&gt;<i> instead of the list.  Can't we change the mailman configuration to set
</I>&gt;<i> the Reply-To: header in the email to always be to the mailing list?
</I>
There have been several discussions about changing this behaviour already - all ended with the result, that it is ultimately up to Ter who likes the current behaviour.

Johannes

&gt;<i> 
</I>&gt;<i> Rich
</I>&gt;<i> 
</I>&gt;<i> ---------- Forwarded message ----------
</I>&gt;<i> From: Richard Wallace &lt;<A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">rwallace at thewallacepack.net</A>&gt;
</I>&gt;<i> Date: Wed, Jan 14, 2009 at 7:19 PM
</I>&gt;<i> Subject: Re: [antlr-interest] Mismatched token problem
</I>&gt;<i> To: &quot;Kevin J. Cummings&quot; &lt;<A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">cummings at kjchome.homeip.net</A>&gt;
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> So, rather than continuing to talk about it all in an abstract way and
</I>&gt;<i> showing you just bits I threw up the project I'm working on on Google
</I>&gt;<i> Code &lt;<A HREF="http://code.google.com/p/cssselectors/">http://code.google.com/p/cssselectors/</A>&gt;.  It's a library for
</I>&gt;<i> using CSS selectors to get elements out of XML documents.  I'm hoping
</I>&gt;<i> to be able to use it in integration tests of web applications rather
</I>&gt;<i> than having to use XPath which I've never really liked.  The ANTLR
</I>&gt;<i> grammar can be found at
</I>&gt;<i> &lt;<A HREF="http://code.google.com/p/cssselectors/source/browse/trunk/src/main/antlr/com/threelevers/css/CssSelectors.g">http://code.google.com/p/cssselectors/source/browse/trunk/src/main/antlr/com/threelevers/css/CssSelectors.g</A>&gt;.
</I>&gt;<i> 
</I>&gt;<i> On Wed, Jan 14, 2009 at 4:51 PM, Kevin J. Cummings
</I>&gt;<i> &lt;<A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">cummings at kjchome.homeip.net</A>&gt; wrote:
</I>&gt;<i> &gt; Richard Wallace wrote:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;&gt; Ok, I'm feeling really dense right now.  I put the rules in as follows:
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; fragment IDENTFRAGMENT
</I>&gt;<i> &gt;&gt;    : ('_' | 'a'..'z'| 'A'..'Z' | '\u0100'..'\ufffe' )
</I>&gt;<i> &gt;&gt;    ;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; fragment IDENTNUMFRAGMENT
</I>&gt;<i> &gt;&gt;    : IDENTFRAGMENT | '0' .. '9'
</I>&gt;<i> &gt;&gt;    ;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; IDENT
</I>&gt;<i> &gt;&gt;    : IDENTFRAGMENT ( DASH | IDENTNUMFRAGMENT )*
</I>&gt;<i> &gt;&gt;    ;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; DASH
</I>&gt;<i> &gt;&gt;    : '-' ( options{greedy=true;} : IDENTFRAGMENT { $type = IDENT; } )?
</I>&gt;<i> &gt;&gt;    ;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; And I even understand what it means (I think), but I'm still running
</I>&gt;<i> &gt;&gt; into the problem that in the expression 4n-1, n-1 is still being
</I>&gt;<i> &gt;&gt; considered an expression.  I had to change protected to fragment to
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Sorry I thought you were using Antlr 2.7.7, that must of been someone
</I>&gt;<i> else I
</I>&gt;<i> &gt; was chatting with, yes, fragment is correct for Antlr 3.x
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;&gt; get the lexer to not try and match 4 as a IDENTNUMFRAGMENT and the
</I>&gt;<i> &gt;&gt; IDENT rule to match the language.  But I don't think that should cause
</I>&gt;<i> &gt;&gt; this not to work, should it?  I must be missing something.  Any ideas?
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; In your expr rule you specify S* as possible whitespace seperators.
</I>&gt;<i> Also, if
</I>&gt;<i> &gt; you need to match n-1 as an IDENT, then its possible that you need do
</I>&gt;<i> &gt; another fragment to catch the 'n' and what follows as an IDENT.
</I>&gt;<i> &gt;
</I>&gt;<i> 
</I>&gt;<i> Sorry, in this case I don't want n-1 to be an IDENT.  It should be in
</I>&gt;<i> most cases, but in this case, when inside a :nth-child() function it
</I>&gt;<i> shouldn't be considered an IDENT.  In CSS it is perfectly valid to
</I>&gt;<i> have something like
</I>&gt;<i>    #n-1
</I>&gt;<i> where n-1 is the id of the element we want to find.
</I>&gt;<i> 
</I>&gt;<i> The reason I include whitespace explicitly in some places rather than
</I>&gt;<i> ignoring it is because it is important in one context in CSS.  In the
</I>&gt;<i> selector
</I>&gt;<i>    #a .b
</I>&gt;<i> the space between the #a and #b is significant because it indicates
</I>&gt;<i> that we are looking for an element with a class of &quot;b&quot; that is a
</I>&gt;<i> descendant of an element with an id of &quot;a&quot;.  I couldn't figure out a
</I>&gt;<i> way to make the spaces everywhere else be ignored but still have this
</I>&gt;<i> one be recognized properly.  If the space isn't recognized properly,
</I>&gt;<i> &quot;#a .b&quot; is treated the same as &quot;#a.b&quot; which has a completely different
</I>&gt;<i> meaning.
</I>&gt;<i> 
</I>&gt;<i> &gt; By default, ANTLR does greedy matching of tokens. In other words, it
</I>&gt;<i> tries
</I>&gt;<i> &gt; to match as much as possible based on your rules.  It also tokenizes
</I>&gt;<i> before
</I>&gt;<i> &gt; it parses.  So, if you don't want 4n-1 to be NUMBER IDENT, then you need
</I>&gt;<i> to
</I>&gt;<i> &gt; have a lexer rule to catch something different.  Does it help if you try
</I>&gt;<i> a
</I>&gt;<i> &gt; lexer rule that catches NUMBER 'n' as a TOKEN? and then use *that* in
</I>&gt;<i> your
</I>&gt;<i> &gt; expr rule?
</I>&gt;<i> &gt;
</I>&gt;<i> 
</I>&gt;<i> I'm not sure exactly what you mean here.  I've looked at a bunch of
</I>&gt;<i> examples and can't figure it out.  I tried adding a
</I>&gt;<i> 
</I>&gt;<i> tokens {
</I>&gt;<i>    MAGN;
</I>&gt;<i> }
</I>&gt;<i> 
</I>&gt;<i> but then I'm not sure where to put the lexer rule.  I tried
</I>&gt;<i> 
</I>&gt;<i> ATERM : ( NUMBER? 'n' ) -&gt; MAGN
</I>&gt;<i> 
</I>&gt;<i> but ANTLR claims MAGN is an unexpected token so obviously I'm doing
</I>&gt;<i> something wrong.
</I>&gt;<i> 
</I>&gt;<i> &gt; Also, when I code expression parsers that don't care about whitespace, I
</I>&gt;<i> &gt; just set whitespace to be ignored in the lexer.  ANTLR will still stop
</I>&gt;<i> &gt; lexing tokens when it finds a whitespace.  So, in general, I never
</I>&gt;<i> reference
</I>&gt;<i> &gt; whitespace in the parser.  You need to fix your token stream so that the
</I>&gt;<i> &gt; parser does the right thing with what it finds.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Make a lexer rule for:  DASH? NUMBER? 'n'  Or maybe just for NUMBER 'n'
</I>&gt;<i> &gt;
</I>&gt;<i> 
</I>&gt;<i> I tried a rule called ATERM that looked like
</I>&gt;<i> 
</I>&gt;<i> ATERM : DASH? NUMBER? 'n' ;
</I>&gt;<i> 
</I>&gt;<i> and tried putting that in the nth_child_expr as
</I>&gt;<i> 
</I>&gt;<i> nth_child_expr : ATERM S* ('+' | DASH) S* NUMBER and that didn't help
</I>&gt;<i> either.
</I>&gt;<i> 
</I>&gt;<i> &gt; Sorry for being vague, but I hope its helpful.
</I>&gt;<i> &gt;
</I>&gt;<i> 
</I>&gt;<i> Hopefully, now that my full grammar is out there you can take a better
</I>&gt;<i> look at it and see what's going on.  I appreciate all the help, it's
</I>&gt;<i> been really valuable and I'm learning a lot (mostly how much I have to
</I>&gt;<i> learn about antlr ;)).
</I>&gt;<i> 
</I>&gt;<i> &gt;&gt; Rich
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; --
</I>&gt;<i> &gt; Kevin J. Cummings
</I>&gt;<i> &gt; <A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">kjchome at rcn.com</A>
</I>&gt;<i> &gt; <A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">cummings at kjchome.homeip.net</A>
</I>&gt;<i> &gt; <A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">cummings at kjc386.framingham.ma.us</A>
</I>&gt;<i> &gt; Registered Linux User #1232 (<A HREF="http://counter.li.org">http://counter.li.org</A>)
</I>&gt;<i> &gt;
</I>&gt;<i> 
</I>&gt;<i> List: <A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">http://www.antlr.org/mailman/listinfo/antlr-interest</A>
</I>&gt;<i> Unsubscribe:
</I>&gt;<i> <A HREF="http://www.antlr.org/mailman/options/antlr-interest/your-email-address">http://www.antlr.org/mailman/options/antlr-interest/your-email-address</A>
</I>
-- 
Psssst! Schon vom neuen GMX MultiMessenger geh&#246;rt? Der kann`s mit allen: <A HREF="http://www.gmx.net/de/go/multimessenger">http://www.gmx.net/de/go/multimessenger</A>
</PRE>
























<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="032338.html">[antlr-interest] Fwd:  Mismatched token problem
</A></li>
	<LI>Next message: <A HREF="032347.html">[antlr-interest] crash in C runtime during PREPORTERROR()
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#32340">[ date ]</a>
              <a href="thread.html#32340">[ thread ]</a>
              <a href="subject.html#32340">[ subject ]</a>
              <a href="author.html#32340">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.antlr.org/mailman/listinfo/antlr-interest">More information about the antlr-interest
mailing list</a><br>
</body></html>
