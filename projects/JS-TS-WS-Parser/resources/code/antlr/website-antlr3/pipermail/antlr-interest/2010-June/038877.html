<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [antlr-interest] Comments, EOF, and Debugger
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20Comments%2C%20EOF%2C%20and%20Debugger&In-Reply-To=%3C4FDBBD17-772F-494B-84AB-96A50663E5EB%40gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="038876.html">
   <LINK REL="Next"  HREF="038880.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[antlr-interest] Comments, EOF, and Debugger</H1>
    <B>Nathan Eloe</B> 
    <A HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20Comments%2C%20EOF%2C%20and%20Debugger&In-Reply-To=%3C4FDBBD17-772F-494B-84AB-96A50663E5EB%40gmail.com%3E"
       TITLE="[antlr-interest] Comments, EOF, and Debugger">powerofazure at gmail.com
       </A><BR>
    <I>Tue Jun  1 06:33:15 PDT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="038876.html">[antlr-interest] ANTLR3 C Target Runtime Error
</A></li>
        <LI>Next message: <A HREF="038880.html">[antlr-interest] Comments, EOF, and Debugger
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#38877">[ date ]</a>
              <a href="thread.html#38877">[ thread ]</a>
              <a href="subject.html#38877">[ subject ]</a>
              <a href="author.html#38877">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Hello all,
I'm working on an AST parser for the Bash language and I've come across the following strange behavior:
I'm trying to handle comments, so I used the comments token you can get when you start a new grammar in ANTLRworks.  It works.  

COMMENT
    :   '#' ~('\n'|'\r')* '\r'? '\n' {$channel=HIDDEN;}
    ;

The problem arises when the comment is the last thing from the input (i.e, no new line before EOF).  Removing the '\n' from the token causes it to freak out when I run the tests, but I can't get it to match comments at the end of file.  Leaving that '\n' in lets the code compile, but I still can't match that last case.

Here's where the interesting part happens.  When I run it through the debugger with the same test case that I use in gunit, the debugger allows the input and parses it correctly (meaning, it ignores it as it should) and correctly generates the expected AST.

Does the debugger allow the code to be more robust in its decision making abilities?  Or does it do something to the input to allow it to be matched to a token.

Thanks for the help!

Nathan
-----BEGIN PGP SIGNATURE-----
Version: GnuPG/MacGPG2 v2.0.14 (Darwin)

iEYEARECAAYFAkwFDBsACgkQFpoRlVgtqKZHIgCfRWHiKc6fr51t7tHT1xtxlVYG
s9sAmwak2ZHv3XPVPeMgwYNDbqhXJztq
=2bxk
-----END PGP SIGNATURE-----
</PRE>




<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="038876.html">[antlr-interest] ANTLR3 C Target Runtime Error
</A></li>
	<LI>Next message: <A HREF="038880.html">[antlr-interest] Comments, EOF, and Debugger
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#38877">[ date ]</a>
              <a href="thread.html#38877">[ thread ]</a>
              <a href="subject.html#38877">[ subject ]</a>
              <a href="author.html#38877">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.antlr.org/mailman/listinfo/antlr-interest">More information about the antlr-interest
mailing list</a><br>
</body></html>
