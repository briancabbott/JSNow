<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [antlr-interest] ANTLR installation/use on Unix
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20ANTLR%20installation/use%20on%20Unix&In-Reply-To=%3C385D30640CEA444BAAAB2F7C00363812%40DFW5RB41%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="031797.html">
   <LINK REL="Next"  HREF="031762.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[antlr-interest] ANTLR installation/use on Unix</H1>
    <B>Gary R. Van Sickle</B> 
    <A HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20ANTLR%20installation/use%20on%20Unix&In-Reply-To=%3C385D30640CEA444BAAAB2F7C00363812%40DFW5RB41%3E"
       TITLE="[antlr-interest] ANTLR installation/use on Unix">g.r.vansickle at att.net
       </A><BR>
    <I>Sun Nov 30 15:50:42 PST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="031797.html">[antlr-interest] ANTLR installation/use on Unix
</A></li>
        <LI>Next message: <A HREF="031762.html">[antlr-interest] 'Expression Evaluator Tutorial' not working
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#31804">[ date ]</a>
              <a href="thread.html#31804">[ thread ]</a>
              <a href="subject.html#31804">[ subject ]</a>
              <a href="author.html#31804">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>&gt;<i> From:  Jim Idle
</I>&gt;<i> 
</I>&gt;<i> On Sun, 2008-11-30 at 03:06 -0600, Gary R. Van Sickle wrote: 
</I>&gt;<i> 
</I>&gt;<i> 	
</I>&gt;<i> 	&gt; From: Jim Idle
</I>&gt;<i> 	&gt; 
</I>&gt;<i> 	&gt; On Fri, 2008-11-28 at 21:28 -0600, Gary R. Van Sickle wrote: 
</I>&gt;<i> 	&gt; 
</I>&gt;<i> 	&gt; 	
</I>&gt;<i> 	&gt; 	Hi Terence et al,
</I>&gt;<i> 	&gt; 	
</I>&gt;<i> 	&gt; 	Am I just getting old, or shouldn't I be able to (in a 
</I>&gt;<i> 	&gt; More Ideal World(tm),
</I>&gt;<i> 	&gt; 	of course) do something like this on a Unix-like box?:
</I>&gt;<i> 	&gt; 	
</I>&gt;<i> 	&gt; 	$ cd antlr-src-distro-dir/
</I>&gt;<i> 	&gt; 	$ make install
</I>&gt;<i> 	&gt; 	$ antlr --version
</I>&gt;<i> 	&gt; 
</I>&gt;<i> 	&gt; 
</I>&gt;<i> 	&gt; Well, ANTLR is a Java tool,
</I>&gt;<i> 	
</I>&gt;<i> 	It's a tool.  There's no reason the user should have to 
</I>&gt;<i> care what language
</I>&gt;<i> 	it's implemented in simply in order to use it.  
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> I am not talking about using it, I am talking about building 
</I>&gt;<i> it!
</I>
Well, I guess that's our first disconnect. ;-)  I just want to use the dern
thing!

&gt;<i> To run it as if it were a command, you can set up a bash script.
</I>&gt;<i> 
</I>
Yeah, I can, and I have (and also you forgot &quot;manually put the JARs
somewhere&quot;).  That doesn't mean I should have had to.  I didn't have to do
anything of the sort with flex, bison, or any of a hundred other tools I use
every day.  Why am I, Mr. ANTLR User, expected to treat this one
differently?

&gt;<i> 	Gcc is written in C, but I
</I>&gt;<i> 	don't care about that when I use it to compile C++, 
</I>&gt;<i> Fortran, or Java code.
</I>&gt;<i> 	I don't actually know what languages Flex or Bison are 
</I>&gt;<i> written in (though I
</I>&gt;<i> 	of course have a pretty good idea), but that doesn't in 
</I>&gt;<i> the least prevent me
</I>&gt;<i> 	from invoking them like this:
</I>&gt;<i> 	
</I>&gt;<i> 		$ flex [whatever]
</I>&gt;<i> 		$ bison [whatever]
</I>&gt;<i> 	
</I>&gt;<i> 	Is there a reason why I shouldn't be able to do the 
</I>&gt;<i> equivalent with ANTLR?
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> Well, only if you can't write a one line bash script.
</I>
Unfortunately it takes more than one line to do it semi-right.  But you're
missing my point: Why did I have to write a shell script at all?

&gt;<i> flex 
</I>&gt;<i> and bison are native programs and as such are easier to just 
</I>&gt;<i> stick in /usr/local/bin and forget about it.
</I>&gt;<i> 
</I>
Your argument starts to fray when one realizes that:

1. Shell scripts aren't native programs either.
2. I've never manually moved a flex or bison binary anywhere.  I bet you
haven't either.

Just because ANTLR is written in Java, it somehow gets special dispensation
to not behave like all other tools (including others that are also written
in Java)?  Sorry, that dog won't hunt.

Seriously, the last time I had to write a wrapper script for a
&quot;compiler-like&quot; tool simply in order to run it was... well, technically
never.  I say, let's use my now-broken
never-had-to-write-a-wrapper-just-to-run-a-tool streak as an opportunity to
save the next guy the same hassle - turn lemons into lemonade, if you will!

&gt;<i> 	
</I>&gt;<i> 	&gt; The ANTLR source can be bult from scratch now using 
</I>&gt;<i> maven though:
</I>&gt;<i> 	&gt; 
</I>&gt;<i> 	&gt; 1) In stall Maven 2.0.9 or better;
</I>&gt;<i> 	&gt; 2) Find the directories with pom.xml in them
</I>&gt;<i> 	&gt; 3) cd to them and type: mvn
</I>&gt;<i> 	&gt; 4) Look at the output of the build to see where the .jar 
</I>&gt;<i> 	&gt; files go if are not familiar with Maven.
</I>&gt;<i> 	&gt; 
</I>&gt;<i> 	
</I>&gt;<i> 	I'm less concerned with the building of it than the 
</I>&gt;<i> installation and use of
</I>&gt;<i> 	it.  Can I do this?:
</I>&gt;<i> 	
</I>&gt;<i> 		$ cd antlr-src-distro-dir/
</I>&gt;<i> 		$ mvn install
</I>&gt;<i> 		$ antlr [whatever]
</I>&gt;<i> 	
</I>&gt;<i> 	Like I said, it's the 20th century.  
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> Is it really?
</I>
At the utter most.  If you're one of those who would believe what the
calendars tell you, consider: Would any citizen of the 21st century be
reduced to moving files around and writing shell scripts simply to invoke
his tools?  Why, it strains all credulity my good sir!

&gt;<i> I must have missed something. Maven does not 
</I>&gt;<i> require you to do any of this as it is from the 21st century :-)
</I>&gt;<i> 
</I>
This &quot;Maven&quot; of which you speak sounds like quite the tool.  I'll have to
investigate how effortlessly it is able to build and install projects
consisting of source written in an arbitrary mix of non-Java languages such
as C, C++, lex, yacc, ANTLR, some custom built sources, etc etc, with
various interdependencies between the various source files.  Since it will
most certainly be at least the 21st century before I am able to get to that,
may I humbly suggest that in the interim we work together and arrange it so
that ANTLR does not dictate the build system used to invoke it?

&gt;<i> 	I, as the user, shouldn't have to be
</I>&gt;<i> 	&quot;looking at the output&quot; of anything, picking out the 
</I>&gt;<i> &quot;artifacts&quot; (as the
</I>&gt;<i> 	kids call 'em these days), worrying about where they 
</I>&gt;<i> should go, and then
</I>&gt;<i> 	have to move them manually.  As you indicated above, I 
</I>&gt;<i> don't have to with
</I>&gt;<i> 	the C runtime, why should I have to for the tool itself?
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> Well, I took the time to create a configure script and Visual 
</I>&gt;<i> Studio projects.
</I>
Hear hear, many hands make light work!

&gt;<i> Still, people have problems with this and I 
</I>&gt;<i> think that as soon as it goes wrong, your make install would 
</I>&gt;<i> be more confusing than a simple bash script.
</I>
My &quot;make install&quot; installs a simple shell script.  (Not &quot;bash script&quot; BTW,
remember this is Unix: there's a non-zero possibility that there's one guy
out there somewhere running the original &quot;sh&quot;, and hence we cannot use any
shell constructs introduced since 1971.)

&gt;<i> If you are using 
</I>&gt;<i> Maven,
</I>
I'm not.  Millions of people are not.  Why should that fact deprive them of
ANTLRy goodnesss?

&gt;<i> then there is no need to do any of this because maven 
</I>&gt;<i> already knows where to get the latest jars from and how to 
</I>&gt;<i> build .g files using it. This is only useful for java output 
</I>&gt;<i> though of course.
</I>&gt;<i> 
</I>
Of course.  Considering ANTLR can target about a half-dozen non-Java
languages, doesn't that seem like a less-than-ideal solution?

&gt;<i> 	&gt; Note that the Maven build, as well as constructing the ANTLR 
</I>&gt;<i> 	&gt; .jar file also creates a complete executable (I.e Java -jar) 
</I>&gt;<i> 	&gt; jar file that includes all the dependencies  to make things 
</I>&gt;<i> 	&gt; easier for developers.
</I>&gt;<i> 	&gt; 
</I>&gt;<i> 	
</I>&gt;<i> 	Ok, so can't it go the last mile and also create a 
</I>&gt;<i> simple shell script
</I>&gt;<i> 	wrapper so I can:
</I>&gt;<i> 	
</I>&gt;<i> 		$ antlr MyGrammar.g
</I>&gt;<i> 	
</I>&gt;<i> 	?  In fact, rumor has it that the Maven tool of which 
</I>&gt;<i> you speak uses exactly
</I>&gt;<i> 	that approach itself.
</I>&gt;<i> 	
</I>&gt;<i> 	To answer my own question, I broke out my autotools- 
</I>&gt;<i> and script-fu last
</I>&gt;<i> 	night and rolled an 
</I>&gt;<i> automake+autoconf+built-shell-script which does in fact
</I>&gt;<i> 	allow me to:
</I>&gt;<i> 	
</I>&gt;<i> 		$ ./configure
</I>&gt;<i> 		$ make
</I>&gt;<i> 		$ make install
</I>&gt;<i> 		$ antlr
</I>&gt;<i> 		ANTLR Parser Generator  Version 3.1.1
</I>&gt;<i> 		[etc etc]
</I>&gt;<i> 	
</I>&gt;<i> 	The JARs aren't actually built, but rather the 
</I>&gt;<i> pre-built one in the source
</I>&gt;<i> 	distro's /lib directory is installed, and the &quot;antlr&quot; 
</I>&gt;<i> shell script is
</I>&gt;<i> 	generated from a template (a default Java interpreter 
</I>&gt;<i> and the path to the
</I>&gt;<i> 	JAR are substituted).  &quot;make install&quot; puts everything 
</I>&gt;<i> in reasonable places
</I>&gt;<i> 	and, Bob's your uncle, everything works just as it should.
</I>&gt;<i> 	
</I>&gt;<i> 	Terence (or anybody), any interest in this?  I could 
</I>&gt;<i> certainly BSD-license
</I>&gt;<i> 	it and contribute it.
</I>&gt;<i> 
</I>&gt;<i> You know - I was just trying to point you in the right 
</I>&gt;<i> direction - there is no need to get all huffy,
</I>
Whoah whoah whoah, nobody here's getting &quot;all huffy&quot;.  I'm here to help, as
clearly indicated in the sentence above.

&gt;<i> rant at me 
</I>&gt;<i> about being in the wrong century
</I>
Well, unless you have a nuclear-turbine-powered flying car you'd like to
sell me, I'm afraid that shoe fits all of us. ;-)

&gt;<i> and complain that ANTLR 
</I>&gt;<i> isn't an instant install on your particular system and so on. 
</I>
On who's particular system is ANTLR's install on par with, say, bison's?  As
far as I can discern, nobody's, unless possibly they are using this thing
you call &quot;Maven&quot;.

&gt;<i> All you need is the composite jar and:
</I>&gt;<i> 
</I>&gt;<i> #! /bin/bash
</I>&gt;<i> java -jar whereverthejaris.jar $*
</I>&gt;<i> 
</I>
Well, that's a start... now where did I put that JAR?  ;-)

&gt;<i> With make install, you have to detect the java install,
</I>
Wrong.  *I* don't.  The dudes providing the ANTLR tool do.  I'm guessing
they'll do that at &quot;make install&quot;-time, but whatever, none of my business,
all that *I*, Mr. ANTLR User, need to know is:

	$ antlr MyGrammar.g

...and it's all good.  Give to Caesar what is Caesars, sez I.

&gt;<i> find 
</I>&gt;<i> the dependencies,
</I>
I thought they were all in the JAR?

&gt;<i> it only works on *nix etc.
</I>
Hey hey hey, one front at a time!  *nix alone opens up a pretty big chunk of
real estate, wouldn't you say?  Including OSX and Windows (in Cygwin form).

&gt;<i> Generic 
</I>&gt;<i> installers are a lot more work and maintaining a configure 
</I>&gt;<i> script for this does not seem worth it to me
</I>
Right, that's why I left that part up to the autotools.

&gt;<i> - it is Ter's 
</I>&gt;<i> call in the end though.
</I>&gt;<i> 
</I>&gt;<i> Jim
</I>
Terence, what say you?  Should I send you what I have?  It's pretty sweet
;-).

-- 
Gary R. Van Sickle
 

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="031797.html">[antlr-interest] ANTLR installation/use on Unix
</A></li>
	<LI>Next message: <A HREF="031762.html">[antlr-interest] 'Expression Evaluator Tutorial' not working
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#31804">[ date ]</a>
              <a href="thread.html#31804">[ thread ]</a>
              <a href="subject.html#31804">[ subject ]</a>
              <a href="author.html#31804">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.antlr.org/mailman/listinfo/antlr-interest">More information about the antlr-interest
mailing list</a><br>
</body></html>
