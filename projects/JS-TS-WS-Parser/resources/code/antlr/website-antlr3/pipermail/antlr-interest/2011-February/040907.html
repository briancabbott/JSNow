<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [antlr-interest] Problem in grammar (#a, #b, #c, #d, #f are not well recognized)
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20Problem%20in%20grammar%20%28%23a%2C%20%23b%2C%20%23c%2C%20%23d%2C%0A%20%23f%20are%20not%20well%20recognized%29&In-Reply-To=%3C4a66c6d02d381a84cfd6560ec22e22dc%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="040903.html">
   <LINK REL="Next"  HREF="040911.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[antlr-interest] Problem in grammar (#a, #b, #c, #d, #f are not well recognized)</H1>
    <B>Jim Idle</B> 
    <A HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20Problem%20in%20grammar%20%28%23a%2C%20%23b%2C%20%23c%2C%20%23d%2C%0A%20%23f%20are%20not%20well%20recognized%29&In-Reply-To=%3C4a66c6d02d381a84cfd6560ec22e22dc%40mail.gmail.com%3E"
       TITLE="[antlr-interest] Problem in grammar (#a, #b, #c, #d, #f are not well recognized)">jimi at temporal-wave.com
       </A><BR>
    <I>Fri Feb 25 12:58:40 PST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="040903.html">[antlr-interest] Problem in grammar (#a, #b, #c, #d,	#f are not well recognized)
</A></li>
        <LI>Next message: <A HREF="040911.html">[antlr-interest] Problem in grammar (#a, #b, #c, #d,	#f are not well recognized)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#40907">[ date ]</a>
              <a href="thread.html#40907">[ thread ]</a>
              <a href="subject.html#40907">[ subject ]</a>
              <a href="author.html#40907">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Why don't you try the grammar I contributed on antlr download page and see
if that works. The grammar you have here is not going to work as you have
hard coded the tokens in the grammar and ANTLR is generating a lexer that
will fall over on keywords etc. CSS is lot more difficult to parse than
you think.

Microsoft were going to hire me to write some parsers for a project but
they cancelled the project before I was even hired. I had jumped the gun
and written the CSS parser to get a head start on the project, so I just
contributed the grammar. I did not do a lot of testing, but it is pretty
accurate I think.

<A HREF="http://www.antlr.org/grammar/1240941192304/css21.g">http://www.antlr.org/grammar/1240941192304/css21.g</A>

Jim

&gt;<i> -----Original Message-----
</I>&gt;<i> From: <A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">antlr-interest-bounces at antlr.org</A> [mailto:antlr-interest-
</I>&gt;<i> <A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">bounces at antlr.org</A>] On Behalf Of Aur&#233;lien Baudet
</I>&gt;<i> Sent: Friday, February 25, 2011 11:43 AM
</I>&gt;<i> To: <A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">antlr-interest at antlr.org</A>
</I>&gt;<i> Subject: [antlr-interest] Problem in grammar (#a, #b, #c, #d, #f are
</I>&gt;<i> not well recognized)
</I>&gt;<i>
</I>&gt;<i>    Hello,
</I>&gt;<i>
</I>&gt;<i> I'm currently writing an xtext plugin for css. I have a problem and I
</I>&gt;<i> don't find any solution. My grammar works quite well for many css files
</I>&gt;<i> but it fails on that:
</I>&gt;<i>
</I>&gt;<i> .dj_iPad #header #formSearch.disabled {
</I>&gt;<i> 	opacity: 1;
</I>&gt;<i> }
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> However, it works for (g instead of h) :
</I>&gt;<i>
</I>&gt;<i> .dj_iPad #header #gormSearch.disabled {
</I>&gt;<i> 	opacity: 1;
</I>&gt;<i> }
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> It works for any character different from a, b, c, e, f...
</I>&gt;<i>
</I>&gt;<i> So I think the parser recognize that as hex character.
</I>&gt;<i>
</I>&gt;<i> Can somebody help me fixing this bug ?
</I>&gt;<i>
</I>&gt;<i> The grammar:
</I>&gt;<i>
</I>&gt;<i> grammar css;
</I>&gt;<i>
</I>&gt;<i> options {
</I>&gt;<i> 	output=AST;
</I>&gt;<i> 	ASTLabelType=CommonTree;
</I>&gt;<i> 	language=Java;
</I>&gt;<i> 	//k=4;
</I>&gt;<i> }
</I>&gt;<i>
</I>&gt;<i> tokens {
</I>&gt;<i> 	IMPORT;
</I>&gt;<i> 	NESTED;
</I>&gt;<i> 	NEST;
</I>&gt;<i> 	RULE;
</I>&gt;<i> 	ATTRIB;
</I>&gt;<i> 	PARENTOF;
</I>&gt;<i> 	PRECEDEDS;
</I>&gt;<i> 	ATTRIBEQUAL;
</I>&gt;<i> 	HASVALUE;
</I>&gt;<i> 	BEGINSWITH;
</I>&gt;<i> 	PSEUDO;
</I>&gt;<i> 	PROPERTY;
</I>&gt;<i> 	FUNCTION;
</I>&gt;<i> 	TAG;
</I>&gt;<i> 	ID;
</I>&gt;<i> 	CLASS;
</I>&gt;<i> 	PERCENTAGE;
</I>&gt;<i> 	UNIT;
</I>&gt;<i> 	PERCENTAGE;
</I>&gt;<i> 	EMS;
</I>&gt;<i> 	EXS;
</I>&gt;<i> 	LENGTH;
</I>&gt;<i> 	ANGLE;
</I>&gt;<i> 	TIME;
</I>&gt;<i> 	FREQ;
</I>&gt;<i> }
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> stylesheet:
</I>&gt;<i> 	charset?
</I>&gt;<i> 	importRule*
</I>&gt;<i> 	namespace*
</I>&gt;<i> 	(ruleset | media | page | font_face | keyframes)+;
</I>&gt;<i>
</I>&gt;<i> charset:
</I>&gt;<i> 	'@charset' STRING ';';
</I>&gt;<i>
</I>&gt;<i> namespace:
</I>&gt;<i> 	'@namespace' IDENT? (STRING|url) ';';
</I>&gt;<i>
</I>&gt;<i> importRule:
</I>&gt;<i> 	'@import' (STRING|url) (medias)? ';';
</I>&gt;<i>
</I>&gt;<i> medias:
</I>&gt;<i> 	IDENT (',' IDENT)*;
</I>&gt;<i>
</I>&gt;<i> keyframes:
</I>&gt;<i> 	'@keyframes' IDENT '{' keyframes_blocks* '}';
</I>&gt;<i>
</I>&gt;<i> keyframes_blocks:
</I>&gt;<i> 	keyframes_selectors block;
</I>&gt;<i>
</I>&gt;<i> keyframes_selectors:
</I>&gt;<i> 	'from' | 'to' | PERCENTAGE (',' 'from' | 'to' | PERCENTAGE)*;
</I>&gt;<i>
</I>&gt;<i> media:
</I>&gt;<i> 	'@media' medias '{' ruleset* '}';
</I>&gt;<i>
</I>&gt;<i> page:
</I>&gt;<i> 	'@page' IDENT? (':' IDENT)? block;
</I>&gt;<i>
</I>&gt;<i> font_face:
</I>&gt;<i> 	'@font-face' block;
</I>&gt;<i>
</I>&gt;<i> ruleset:
</I>&gt;<i> 	selectors block;
</I>&gt;<i>
</I>&gt;<i> selectors:
</I>&gt;<i> 	selector (',' selector)*;
</I>&gt;<i>
</I>&gt;<i> selector:
</I>&gt;<i> 	simple_selector (selectop? simple_selector)*;
</I>&gt;<i>
</I>&gt;<i> simple_selector:
</I>&gt;<i> 	(elem | '*') (attrib | pseudo)?;
</I>&gt;<i>
</I>&gt;<i> block:
</I>&gt;<i> 	'{' properties* ';'? '}';
</I>&gt;<i>
</I>&gt;<i> properties:
</I>&gt;<i> 	declaration (';' declaration)*;
</I>&gt;<i>
</I>&gt;<i> elem:
</I>&gt;<i> 	IDENT
</I>&gt;<i> 	| '#' IDENT
</I>&gt;<i> 	| '.' IDENT;
</I>&gt;<i>
</I>&gt;<i> pseudo:
</I>&gt;<i> 	(':' | '::') IDENT
</I>&gt;<i> 	| (':' | '::') function;
</I>&gt;<i>
</I>&gt;<i> attrib:
</I>&gt;<i> 	'[' IDENT (attribRelate (STRING | IDENT))? ']';
</I>&gt;<i>
</I>&gt;<i> declaration:
</I>&gt;<i> 	IDENT ':' args '!important'?;
</I>&gt;<i>
</I>&gt;<i> args:
</I>&gt;<i> 	expr (','? expr)*;
</I>&gt;<i>
</I>&gt;<i> expr:
</I>&gt;<i> 	('-' | '+')? (NUM | PERCENTAGE | LENGTH | EMS | EXS | ANGLE | TIME
</I>&gt;<i> | FREQ)
</I>&gt;<i> 	| IDENT
</I>&gt;<i> 	//| COLOR
</I>&gt;<i> 	| STRING
</I>&gt;<i> 	| URI
</I>&gt;<i> 	| function;
</I>&gt;<i>
</I>&gt;<i> function:
</I>&gt;<i> 	IDENT '(' args ')';
</I>&gt;<i>
</I>&gt;<i> // TODO: autoriser url(<A HREF="http://...">http://...</A>)
</I>&gt;<i> url:
</I>&gt;<i> 	'url(' STRING ')';
</I>&gt;<i>
</I>&gt;<i> attribRelate:
</I>&gt;<i> 	'='
</I>&gt;<i> 	| '~='
</I>&gt;<i> 	| '|=';
</I>&gt;<i>
</I>&gt;<i> selectop:
</I>&gt;<i> 	'&gt;'
</I>&gt;<i> 	| '+';
</I>&gt;<i>
</I>&gt;<i>  URI:
</I>&gt;<i> 	'url(' STRING ')'
</I>&gt;<i> 	| 'url(' ('a'..'~')* ')';
</I>&gt;<i>
</I>&gt;<i>  PERCENTAGE:
</I>&gt;<i> 	NUM '%';
</I>&gt;<i>
</I>&gt;<i>  EMS:
</I>&gt;<i> 	NUM 'em';
</I>&gt;<i>
</I>&gt;<i>  EXS:
</I>&gt;<i> 	NUM 'ex';
</I>&gt;<i>
</I>&gt;<i>  LENGTH:
</I>&gt;<i> 	NUM ('px' | 'cm' | 'mm' | 'in' | 'pt' | 'pc');
</I>&gt;<i>
</I>&gt;<i>  ANGLE:
</I>&gt;<i> 	NUM ('deg' | 'rad' | 'grad');
</I>&gt;<i>
</I>&gt;<i>  TIME:
</I>&gt;<i> 	NUM ('ms' | 's');
</I>&gt;<i>
</I>&gt;<i>  FREQ:
</I>&gt;<i> 	NUM ('khz' | 'hz');
</I>&gt;<i>
</I>&gt;<i>  IDENT:
</I>&gt;<i> 	('_' | 'a'..'z' | 'A'..'Z') ('_' | '-' | 'a'..'z' | 'A'..'Z' |
</I>&gt;<i> '0'..'9')*
</I>&gt;<i> 	| '-' ('_' | 'a'..'z' | 'A'..'Z') ('_' | '-' | 'a'..'z' | 'A'..'Z'
</I>&gt;<i> | '0'..'9')*;
</I>&gt;<i>
</I>&gt;<i>  NUM:
</I>&gt;<i> 	(('0'..'9')* '.')? ('0'..'9')+;
</I>&gt;<i>
</I>&gt;<i>  COLOR:
</I>&gt;<i> 	'#' ('0'..'9' | 'a'..'f' | 'A'..'F')+;
</I>&gt;<i>
</I>&gt;<i> STRING	:
</I>&gt;<i> 			'&quot;' ( '\\' ('b'|'t'|'n'|'f'|'r'|'&quot;'|'\''|'\\') |
</I>&gt;<i> ~('\\'|'&quot;') )* '&quot;' |
</I>&gt;<i> 			'\'' ( '\\' ('b'|'t'|'n'|'f'|'r'|'&quot;'|'\''|'\\') |
</I>&gt;<i> ~('\\'|'\'') )* '\''
</I>&gt;<i> 		;
</I>&gt;<i>
</I>&gt;<i> // Single-line comments
</I>&gt;<i> SL_COMMENT
</I>&gt;<i> 	:	'//'
</I>&gt;<i> 		(~('\n'|'\r'))* ('\n'|'\r'('\n')?)
</I>&gt;<i> 		{$channel=HIDDEN;}
</I>&gt;<i> 	;
</I>&gt;<i>
</I>&gt;<i> // multiple-line comments
</I>&gt;<i> COMMENT
</I>&gt;<i> 	:	'/*' .* '*/' { $channel = HIDDEN; }
</I>&gt;<i> 	;
</I>&gt;<i>
</I>&gt;<i> // Whitespace -- ignored
</I>&gt;<i> WS	: ( ' ' | '\t' | '\r' | '\n' | '\f' )+ { $channel = HIDDEN; }
</I>&gt;<i> 	;
</I>&gt;<i>
</I>&gt;<i> List: <A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">http://www.antlr.org/mailman/listinfo/antlr-interest</A>
</I>&gt;<i> Unsubscribe: <A HREF="http://www.antlr.org/mailman/options/antlr-interest/your-">http://www.antlr.org/mailman/options/antlr-interest/your-</A>
</I>&gt;<i> email-address
</I></PRE>








<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="040903.html">[antlr-interest] Problem in grammar (#a, #b, #c, #d,	#f are not well recognized)
</A></li>
	<LI>Next message: <A HREF="040911.html">[antlr-interest] Problem in grammar (#a, #b, #c, #d,	#f are not well recognized)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#40907">[ date ]</a>
              <a href="thread.html#40907">[ thread ]</a>
              <a href="subject.html#40907">[ subject ]</a>
              <a href="author.html#40907">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.antlr.org/mailman/listinfo/antlr-interest">More information about the antlr-interest
mailing list</a><br>
</body></html>
