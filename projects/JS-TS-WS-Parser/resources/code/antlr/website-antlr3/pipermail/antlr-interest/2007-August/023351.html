<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [antlr-interest] AST generating grammar not building for C target
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20AST%20generating%20grammar%20not%20building%20for%20C%20target&In-Reply-To=%3C75939f220708210032n324d2d97ybbe3ef4594cddd33%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="023354.html">
   <LINK REL="Next"  HREF="023352.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[antlr-interest] AST generating grammar not building for C target</H1>
    <B>Josh Scholar</B> 
    <A HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20AST%20generating%20grammar%20not%20building%20for%20C%20target&In-Reply-To=%3C75939f220708210032n324d2d97ybbe3ef4594cddd33%40mail.gmail.com%3E"
       TITLE="[antlr-interest] AST generating grammar not building for C target">joshscholar at nightstudies.net
       </A><BR>
    <I>Tue Aug 21 00:32:13 PDT 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="023354.html">[antlr-interest] Help, I can't download C target
</A></li>
        <LI>Next message: <A HREF="023352.html">[antlr-interest] AST generating grammar not building for C	target
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23351">[ date ]</a>
              <a href="thread.html#23351">[ thread ]</a>
              <a href="subject.html#23351">[ subject ]</a>
              <a href="author.html#23351">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I solved my earlier problem by downloading the full source
distribution rather than getting the C code from FishEye (though it
would still be nice to keep up with development).

But my first test, an AST making grammar the compiles under Java isn't
compiling in Visual C++ 2005.

Whether I use the 3.0 or the 3.0.1 C include code (and using the
latest AntlrWorks) I get:

c:\assembler\antlr3\scratch\scratch\stuffparser.c(3008) : warning
C4003: not enough actual parameters for macro 'TOKTEXT'
c:\assembler\antlr3\scratch\scratch\stuffparser.c(3008) : error C2059:
syntax error : ')'

for line 3008 in the generated &quot;[grammar name]parser.c&quot;

            	        root_1 = ADAPTOR-&gt;becomeRoot(ADAPTOR,
ADAPTOR-&gt;createTypeTokenText(ADAPTOR, LIST, TOKTEXT(h)), root_1);


or for a bit more context:

            /* AST REWRITE
             * elements          : head, dot, rest
             * token labels      :
             * rule labels       : retval, rest, head, dot
             * token list labels :
             * rule list labels  :
             */
            if ( BACKTRACKING==0 )
            {
            	pANTLR3_REWRITE_RULE_SUBTREE_STREAM stream_retval;
            	pANTLR3_REWRITE_RULE_SUBTREE_STREAM stream_rest;
            	pANTLR3_REWRITE_RULE_SUBTREE_STREAM stream_head;
            	pANTLR3_REWRITE_RULE_SUBTREE_STREAM stream_dot;

            	stream_retval=antlr3RewriteRuleSubtreeStreamNewAEE(ADAPTOR,
(pANTLR3_UINT8)&quot;token retval&quot;, retval.tree != NULL ? retval.tree :
NULL);
            	stream_rest=antlr3RewriteRuleSubtreeStreamNewAEE(ADAPTOR,
(pANTLR3_UINT8)&quot;token rest&quot;, rest.tree != NULL ? rest.tree : NULL);
            	stream_head=antlr3RewriteRuleSubtreeStreamNewAEE(ADAPTOR,
(pANTLR3_UINT8)&quot;token head&quot;, head.tree != NULL ? head.tree : NULL);
            	stream_dot=antlr3RewriteRuleSubtreeStreamNewAEE(ADAPTOR,
(pANTLR3_UINT8)&quot;token dot&quot;, dot.tree != NULL ? dot.tree : NULL);

            	root_0			    = ADAPTOR-&gt;nil(ADAPTOR);
            	retval.tree    = root_0;
            	// 29:78: -&gt; ^( LIST[$h] ( $head)? ( $rest)* ( ^( DOT[$d]
$dot) )? )
            	{
            	    //
C:\\assembler\\antlr3\\scratch\\scratch\\stuff.g:29:80: ^( LIST[$h] (
$head)? ( $rest)* ( ^( DOT[$d] $dot) )? )
            	    {
            	        pANTLR3_BASE_TREE root_1 = ADAPTOR-&gt;nil(ADAPTOR);
            	        root_1 = ADAPTOR-&gt;becomeRoot(ADAPTOR,
ADAPTOR-&gt;createTypeTokenText(ADAPTOR, LIST, TOKTEXT(h)), root_1);

            	        //
C:\\assembler\\antlr3\\scratch\\scratch\\stuff.g:29:91: ( $head)?
            	        {
            	        	if ( stream_head-&gt;hasNext(stream_head) )
            	        	{
            	        		ADAPTOR-&gt;addChild(ADAPTOR, root_1,
stream_head-&gt;next(stream_head));

            	        	}
            	        	stream_head-&gt;reset(stream_head);

            	        }
</PRE>







<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="023354.html">[antlr-interest] Help, I can't download C target
</A></li>
	<LI>Next message: <A HREF="023352.html">[antlr-interest] AST generating grammar not building for C	target
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23351">[ date ]</a>
              <a href="thread.html#23351">[ thread ]</a>
              <a href="subject.html#23351">[ subject ]</a>
              <a href="author.html#23351">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.antlr.org/mailman/listinfo/antlr-interest">More information about the antlr-interest
mailing list</a><br>
</body></html>
