<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [antlr-interest] Re: [antlr-dev] ANT build cruft?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:antlr-interest%40antlr.org?Subject=%5Bantlr-interest%5D%20Re%3A%20%5Bantlr-dev%5D%20ANT%20build%20cruft%3F&In-Reply-To=BA022380-629E-46BB-953B-C54D46E12720%40martin-probst.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="016301.html">
   <LINK REL="Next"  HREF="016293.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[antlr-interest] Re: [antlr-dev] ANT build cruft?</H1>
    <B>Matt Benson</B> 
    <A HREF="mailto:antlr-interest%40antlr.org?Subject=%5Bantlr-interest%5D%20Re%3A%20%5Bantlr-dev%5D%20ANT%20build%20cruft%3F&In-Reply-To=BA022380-629E-46BB-953B-C54D46E12720%40martin-probst.com"
       TITLE="[antlr-interest] Re: [antlr-dev] ANT build cruft?">gudnabrsam at yahoo.com
       </A><BR>
    <I>Thu May 18 08:51:53 PDT 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="016301.html">[antlr-interest] Re: [antlr-dev] ANT build cruft?
</A></li>
        <LI>Next message: <A HREF="016293.html">[antlr-interest] file names and grammar names
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16307">[ date ]</a>
              <a href="thread.html#16307">[ thread ]</a>
              <a href="subject.html#16307">[ subject ]</a>
              <a href="author.html#16307">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>--- Martin Probst &lt;<A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">mail at martin-probst.com</A>&gt; wrote:

&gt;<i> Hi,
</I>&gt;<i> 
</I>&gt;<i> &gt; - The new task addresses the shortcomings of the
</I>&gt;<i> &gt; existing apache-hosted task.  I don't remember
</I>&gt;<i> what
</I>&gt;<i> &gt; they are actually; having gotten frustrated with
</I>&gt;<i> that
</I>&gt;<i> &gt; task many years ago I have actually used &lt;java
</I>&gt;<i> &gt; class=&quot;antlr.Tool&quot;&gt; or the commandline since.  Can
</I>&gt;<i> any
</I>&gt;<i> &gt; current users offer input here (except for that
</I>&gt;<i> silly
</I>&gt;<i> &gt; &quot;ANTLR task should create its own output dir&quot;
</I>&gt;<i> stuff).
</I>&gt;<i> 
</I>&gt;<i> The problem is dependency management and time
</I>&gt;<i> stamps. To ANT it looks  
</I>&gt;<i> like ANTLR has one input file, foo.g, and
</I>&gt;<i> potentially several output  
</I>&gt;<i> files, fooLexer.java, FooParser.java, etc. Now if I
</I>&gt;<i> change the  
</I>&gt;<i> grammar, ANT thinks it needs to update all three
</I>&gt;<i> files. But when it  
</I>&gt;<i> runs ANTLR, ANTLR only updates the files it really
</I>&gt;<i> has to. So there  
</I>&gt;<i> can be changes which actually don't change anything
</I>&gt;<i> in the files, and  
</I>&gt;<i> changes which only change some of the files. In any
</I>&gt;<i> of these, ANT  
</I>&gt;<i> keeps running the ANTLR task every time because it
</I>&gt;<i> doesn't expect  
</I>&gt;<i> this behaviour.
</I>&gt;<i> 
</I>&gt;<i> For C++ people this careful behaviour about
</I>&gt;<i> modifying/touching files  
</I>&gt;<i> might actually be very nice (less C++ compiling),
</I>&gt;<i> but for Java it's  
</I>&gt;<i> generally a lot more annoying to have ANTLR running
</I>&gt;<i> every time than  
</I>&gt;<i> compiling two Java files once more than absolutely
</I>&gt;<i> necessary. I think  
</I>&gt;<i> anyone with a real build system uses the old &quot;touch
</I>&gt;<i> file&quot; strategy,  
</I>&gt;<i> which actually results in an optimal solution.
</I>&gt;<i> However I think a  
</I>&gt;<i> built-in task can hardly start creating magic
</I>&gt;<i> &quot;touch&quot; files, so it  
</I>&gt;<i> should maybe resort to saying: &quot;one of the output
</I>&gt;<i> files is newer than  
</I>&gt;<i> the grammar&quot; instead of &quot;all of the output files are
</I>&gt;<i> newer than the  
</I>&gt;<i> grammar&quot;, if that's possible in ANT?
</I>
I am 99% sure that is doable using existing features;
if not it would be trivial.  It still remains that it
would be nice to have a uniform way of knowing what
those target files are.  If this could be accessed via
some forthcoming ANTLR API we could wrap that up into
an Ant file mapper (these can have multiple outputs
for a given input).  The API is IMO necessary due to
ANTLR's myriad implementation languages.

-Matt

&gt;<i> 
</I>&gt;<i> Martin
</I>&gt;<i> 
</I>

__________________________________________________
Do You Yahoo!?
Tired of spam?  Yahoo! Mail has the best spam protection around 
<A HREF="http://mail.yahoo.com">http://mail.yahoo.com</A> 
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="016301.html">[antlr-interest] Re: [antlr-dev] ANT build cruft?
</A></li>
	<LI>Next message: <A HREF="016293.html">[antlr-interest] file names and grammar names
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16307">[ date ]</a>
              <a href="thread.html#16307">[ thread ]</a>
              <a href="subject.html#16307">[ subject ]</a>
              <a href="author.html#16307">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.antlr.org/mailman/listinfo/antlr-interest">More information about the antlr-interest
mailing list</a><br>
</body></html>
