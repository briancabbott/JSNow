<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [antlr-interest] Imaginary Node with Constructor Syntax,	broken Java code generated?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20Imaginary%20Node%20with%20Constructor%20Syntax%2C%0A%09broken%20Java%20code%20generated%3F&In-Reply-To=%3CC3E4E3E2-B955-4CA8-97D7-6ADCF0F963ED%40cs.usfca.edu%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="041053.html">
   <LINK REL="Next"  HREF="041054.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[antlr-interest] Imaginary Node with Constructor Syntax,	broken Java code generated?</H1>
    <B>Terence Parr</B> 
    <A HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20Imaginary%20Node%20with%20Constructor%20Syntax%2C%0A%09broken%20Java%20code%20generated%3F&In-Reply-To=%3CC3E4E3E2-B955-4CA8-97D7-6ADCF0F963ED%40cs.usfca.edu%3E"
       TITLE="[antlr-interest] Imaginary Node with Constructor Syntax,	broken Java code generated?">parrt at cs.usfca.edu
       </A><BR>
    <I>Sun Mar 13 10:40:20 PDT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="041053.html">[antlr-interest] Imaginary Node with Constructor Syntax,	broken Java code generated?
</A></li>
        <LI>Next message: <A HREF="041054.html">[antlr-interest] #include mechanism for grammar files?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#41060">[ date ]</a>
              <a href="thread.html#41060">[ thread ]</a>
              <a href="subject.html#41060">[ subject ]</a>
              <a href="author.html#41060">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Boy that sure seems like a bug..weird. adding. can I link to that page you sent or will it disappear sometime in the future?

Ter

On Mar 12, 2011, at 8:06 PM, Michael Nygard wrote:

&gt;<i> Hi all,
</I>&gt;<i> 
</I>&gt;<i> Here's a small fragment of an AST grammar:
</I>&gt;<i> 
</I>&gt;<i> qualifiedNameList 
</I>&gt;<i>    :   qnames+=qualifiedName (',' qnames+=qualifiedName )*
</I>&gt;<i>        -&gt; ^(TYPEREF[$qnames.text])+
</I>&gt;<i>    ;
</I>&gt;<i> 
</I>&gt;<i> qualifiedName
</I>&gt;<i>    :   IDENTIFIER ('.' IDENTIFIER )* 
</I>&gt;<i>        -&gt; {new CommonTree(new CommonToken(QNAME, $qualifiedName.text))}
</I>&gt;<i>    ;
</I>&gt;<i> 
</I>&gt;<i> I'm trying to manipulate the tree so it's easy to process from Clojure, by reducing some AST nodes down to text. ANTLR seems OK with this construct, but the code that it generates won't compile:
</I>&gt;<i> 
</I>&gt;<i> /Users/mtnygard/work/atg-xref/indexer/src/gen-java/ImaginaryNodeBugParser.java:139: illegal start of expression
</I>&gt;<i>                if ( !() ) {
</I>&gt;<i>                       ^
</I>&gt;<i> /Users/mtnygard/work/atg-xref/indexer/src/gen-java/ImaginaryNodeBugParser.java:142: illegal start of expression
</I>&gt;<i>                while (  ) {
</I>&gt;<i>                         ^
</I>&gt;<i> 
</I>&gt;<i> Sure enough, when I check the generated code, I see conditionals that are completely empty! Is this a bug in codegen for the Java runtime, or am I doing something wrong with my cardinality?
</I>&gt;<i> 
</I>&gt;<i> The whole grammar, the generated parser source, and the errors are visible at <A HREF="https://gist.github.com/867853.">https://gist.github.com/867853.</A>
</I>&gt;<i> 
</I>&gt;<i> Cheers,
</I>&gt;<i> -Michael Nygard
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> Michael T. Nygard
</I>&gt;<i> <A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">mtnygard at gmail.com</A>
</I>&gt;<i> <A HREF="http://www.michaelnygard.com/">http://www.michaelnygard.com/</A>
</I>&gt;<i> 
</I>&gt;<i> Release It! Design and Deploy Production-Ready Software
</I>&gt;<i> <A HREF="http://bit.ly/ReleaseIt">http://bit.ly/ReleaseIt</A>
</I>&gt;<i> 
</I>&gt;<i> Beautiful Architecture
</I>&gt;<i> <A HREF="http://bit.ly/BeautifulArchitecture">http://bit.ly/BeautifulArchitecture</A>
</I>&gt;<i> 
</I>&gt;<i> 97 Things Every Software Architect Should Know
</I>&gt;<i> <A HREF="http://bit.ly/97Things">http://bit.ly/97Things</A>
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> List: <A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">http://www.antlr.org/mailman/listinfo/antlr-interest</A>
</I>&gt;<i> Unsubscribe: <A HREF="http://www.antlr.org/mailman/options/antlr-interest/your-email-address">http://www.antlr.org/mailman/options/antlr-interest/your-email-address</A>
</I>
</PRE>




<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="041053.html">[antlr-interest] Imaginary Node with Constructor Syntax,	broken Java code generated?
</A></li>
	<LI>Next message: <A HREF="041054.html">[antlr-interest] #include mechanism for grammar files?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#41060">[ date ]</a>
              <a href="thread.html#41060">[ thread ]</a>
              <a href="subject.html#41060">[ subject ]</a>
              <a href="author.html#41060">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.antlr.org/mailman/listinfo/antlr-interest">More information about the antlr-interest
mailing list</a><br>
</body></html>
