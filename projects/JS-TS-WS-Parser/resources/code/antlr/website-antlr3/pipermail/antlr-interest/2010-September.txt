From arodmail at gmail.com  Wed Sep  1 11:30:04 2010
From: arodmail at gmail.com (Alex Rodriguez)
Date: Wed, 1 Sep 2010 11:30:04 -0700
Subject: [antlr-interest] White space
Message-ID: <AANLkTi=TtsOO0nqaPTMmYYgOjEUc=RdSh+pGf7wMJMvY@mail.gmail.com>

Greetings,

Given a very simple grammar for a language that only has an 'if'
statement, I would like to be able to parse white space within literal
values. So far, this works (case 1):

if(value=='white space'){doThis('arg')}

But this doesn't work (case 2):

if (value == 'white space') { doThis('arg') }

Note that case 2 is spaced for readability.

Debugging case 2 in ANTLRWorks produces a MismatchedTokenException.

What is the best way to handle both cases? Here is the grammar:

grammar Lang;

statement
	:
		'if' LPAREN ID EQ literalValue RPAREN '{' action '}'
	;

literalValue
	:
		'\'' ID '\''
	;
	
action
	:
		ID LPAREN literalValue RPAREN
	;
		
ID
	:
		('a'..'z' | 'A'..'Z' | '0'..'9' | '@' | ':' | '_' | ' ' | '+')+
	;

LPAREN
	:
		'('
	;
	
RPAREN
	:
		')'
	;
	
EQ
	:
		'=='
	;
	
WS
	:
		(' ' |'\t' |'\r' |'\n' )+ { $channel=HIDDEN; }
	;

From ALehotsky at ABINITIO.COM  Wed Sep  1 12:22:40 2010
From: ALehotsky at ABINITIO.COM (Alan Lehotsky)
Date: Wed, 1 Sep 2010 15:22:40 -0400
Subject: [antlr-interest] Matching balanced parentheses in a tree grammar
Message-ID: <OF46692F21.29177BC7-ON85257791.006A42F7-85257791.006A723F@LocalDomain>

The contributed plsql.g doesn't handle FOR i IN ( SELECT ... ) LOOP  .... 
quite right - it slurps EVERYTHING after the IN up to the LOOP by


                   ~(LOOP)+

Since I want to disambiguate between normal for-loops where you have 

                 FOR i IN 1 .. 10 LOOP ....

and those with a SQL select expression, I need to be smarter here.  It's 
not sufficient to have a rule like


         for_statement :  FOR ID IN LPAREN (~RPAREN)+ RPAREN LOOP ......

because the SELECT expression can have nested parentheses.  So we need 
something smarter.

I studied 
http://www.antlr.org/pipermail/antlr-interest/2009-October/036333.html 
which tackles this problem for lexers, and implemented
something similar.  I almost have it with the following (using a C 
runtime)  I have the  rules:

for_loop_statement scope { ANTLR3_UINT32 depth; }
       @init { $for_loop_statement::depth = plsql_paren_depth;
               plsql_paren_depth = 0;
             }
       @after{ plsql_paren_depth = $for_loop_statement::depth; }
    :
       FOR ID IN LPAREN {++plsql_paren_depth;} SELECT swallow_to_rparen 
RPAREN

          LOOP ( statement SEMI )+ END LOOP label_name?   -> ^(FOR ID 
^(SELECT swallow_to_rparen ) statement+)
    ;

swallow_to_rparen : 
       {parenMatch(ctx)}?
    ;

Where we have a validating semantic predicate (op. cit Antlr Ref, p285) 
match that checks parenMatch(ctx).  And parenMatch is implemented as a 
method with

@parser::members {
  int plsql_paren_depth;
  static ANTLR3_BOOLEAN parenMatch (pplsqlParser ctx) {
    pANTLR3_PARSER parser = ctx->pParser;
    pANTLR3_TOKEN_STREAM ts = parser->getTokenStream(parser);
    ANTLR3_UINT32 tok;

    if (plsql_paren_depth == 0) return false; // no pending RPAREN needed

      while ((tok=LA(1)) != EOF) {
        switch (tok) {
        case LPAREN: ++plsql_paren_depth; break;
        case RPAREN: --plsql_paren_depth; break;
        default: break;
        }

        if (plsql_paren_depth == 0) return true;
        ts->istream->consume(ts->istream); // munch the token
      }

      if (tok == EOF) return false;
    return false;               // unreachable
  }
}

This looks ahead to find the LPARENs or RPARENs and adjusts the depth 
appropriately.  Once the depth is zero
it can return success.

The only problem (of course) is that we are consuming the tokens not 
buffering them up for the swallow_to_rparen rule to return. So I end up 
constructing a
parse tree for the for_statement that has an empty list for the SELECT 
subtree

How can I fix this?  Or is there a better way to obtain the balanced paren 
match without having to extend my grammar to understand the guts of the 
SELECT.
(I plan to take the select tokens and send them off to an existing Bison 
parser that knows all about SQL statements)

Do I need to have an ANTLR_LIST that I concat tokens onto (inside my 
validating semantic predicate)  and somehow make that the result of the 
swallow_to_rparen rule?


ForwardSourceID:NT000798C2 

  
NOTICE  from Ab Initio: If received in error, please destroy and notify sender, and make no further use, disclosure, or distribution. This email (including attachments) may contain information subject to confidentiality obligations, and sender does not waive confidentiality or privilege.   

From jbb at acm.org  Wed Sep  1 13:19:32 2010
From: jbb at acm.org (John B. Brodie)
Date: Wed, 01 Sep 2010 16:19:32 -0400
Subject: [antlr-interest] White space
In-Reply-To: <AANLkTi=TtsOO0nqaPTMmYYgOjEUc=RdSh+pGf7wMJMvY@mail.gmail.com>
References: <AANLkTi=TtsOO0nqaPTMmYYgOjEUc=RdSh+pGf7wMJMvY@mail.gmail.com>
Message-ID: <1283372372.11266.4.camel@gecko.home.org>

Greetings!

On Wed, 2010-09-01 at 11:30 -0700, Alex Rodriguez wrote:
> Greetings,
> 
> Given a very simple grammar for a language that only has an 'if'
> statement, I would like to be able to parse white space within literal
> values. So far, this works (case 1):
> 
> if(value=='white space'){doThis('arg')}
> 
> But this doesn't work (case 2):
> 
> if (value == 'white space') { doThis('arg') }

because you have permitted blanks in an ID, the string "if " above is an
ID under your rules and *NOT* the keyword 'if' followed by a blank.

> 
> Note that case 2 is spaced for readability.
> 
> Debugging case 2 in ANTLRWorks produces a MismatchedTokenException.
> 
> What is the best way to handle both cases? Here is the grammar:

move your literalValue rule into the lexer and take out the blank from
ID.

see attached for the way i would change your grammar to solve this
issue.

hope this helps...
   -jbb


> 
> grammar Lang;
> 
> statement
> 	:
> 		'if' LPAREN ID EQ literalValue RPAREN '{' action '}'
> 	;
> 
> literalValue
> 	:
> 		'\'' ID '\''
> 	;
> 	
> action
> 	:
> 		ID LPAREN literalValue RPAREN
> 	;
> 		
> ID
> 	:
> 		('a'..'z' | 'A'..'Z' | '0'..'9' | '@' | ':' | '_' | ' ' | '+')+
> 	;
> 
> LPAREN
> 	:
> 		'('
> 	;
> 	
> RPAREN
> 	:
> 		')'
> 	;
> 	
> EQ
> 	:
> 		'=='
> 	;
> 	
> WS
> 	:
> 		(' ' |'\t' |'\r' |'\n' )+ { $channel=HIDDEN; }
> 	;

-------------- next part --------------
grammar Test;

options {
   output = AST;
   ASTLabelType = CommonTree;
}

@members {
   private static final String [] x = new String[] {
      "if(value=='white space'){doThis('arg')}",
      "if (value == 'white space') { doThis('arg') }"
   };

   public static void main(String [] args) {
      for( int i = 0; i < x.length; ++i ) {
         try {
            System.out.println("about to parse:`"+x[i]+"`");
            TestLexer lexer = new TestLexer(new ANTLRStringStream(x[i]));
            CommonTokenStream tokens = new CommonTokenStream(lexer);
            System.out.println("tokens:"+tokens.toString());

            TestParser parser = new TestParser(tokens);
            TestParser.start_return p_result = parser.start();

            CommonTree ast = p_result.tree;
            if( ast == null ) {
               System.out.println("resultant tree: is NULL");
            } else {
               System.out.println("resultant tree: " + ast.toStringTree());
            }
            System.out.println();
         } catch(Exception e) {
            e.printStackTrace();
         }
      }
   }
}

start : statement EOF!;

statement : IF_KW LPAREN ID EQ literalValue RPAREN LBRAK action RBRAK ;

literalValue : STRING ;

action : ID LPAREN literalValue RPAREN ;
                
IF_KW : 'if'  ; 

fragment LETTER : 'a'..'z' | 'A'..'Z' ;
fragment DIGIT : '0'..'9' ;
ID : LETTER (LETTER | DIGIT | '@' | ':' | '_' | '+')* ;

LPAREN : '(' ;
RPAREN : ')' ;

LBRAK : '{' ;
RBRAK : '}' ;
        
EQ : '==' ;
        
STRING : '\'' ( options{ greedy=false; }: ~('\'') )* '\'' ;
        
WS : (' ' |'\t' |'\r' |'\n' )+ { $channel=HIDDEN; } ;

From arodmail at gmail.com  Wed Sep  1 13:54:08 2010
From: arodmail at gmail.com (Alex Rodriguez)
Date: Wed, 1 Sep 2010 13:54:08 -0700
Subject: [antlr-interest] White space
In-Reply-To: <1283372372.11266.4.camel@gecko.home.org>
References: <AANLkTi=TtsOO0nqaPTMmYYgOjEUc=RdSh+pGf7wMJMvY@mail.gmail.com>
	<1283372372.11266.4.camel@gecko.home.org>
Message-ID: <AANLkTi=UeF3JRVdZgOmH7=FC315gA6o11XJdE0xaoxi4@mail.gmail.com>

John,

Yes. And it is infinitely better this way. Thank you, sir.

- Alex :)

On Wed, Sep 1, 2010 at 1:19 PM, John B. Brodie <jbb at acm.org> wrote:
> Greetings!
>
> On Wed, 2010-09-01 at 11:30 -0700, Alex Rodriguez wrote:
>> Greetings,
>>
>> Given a very simple grammar for a language that only has an 'if'
>> statement, I would like to be able to parse white space within literal
>> values. So far, this works (case 1):
>>
>> if(value=='white space'){doThis('arg')}
>>
>> But this doesn't work (case 2):
>>
>> if (value == 'white space') { doThis('arg') }
>
> because you have permitted blanks in an ID, the string "if " above is an
> ID under your rules and *NOT* the keyword 'if' followed by a blank.
>
>>
>> Note that case 2 is spaced for readability.
>>
>> Debugging case 2 in ANTLRWorks produces a MismatchedTokenException.
>>
>> What is the best way to handle both cases? Here is the grammar:
>
> move your literalValue rule into the lexer and take out the blank from
> ID.
>
> see attached for the way i would change your grammar to solve this
> issue.
>
> hope this helps...
> ? -jbb
>
>
>>
>> grammar Lang;
>>
>> statement
>> ? ? ? :
>> ? ? ? ? ? ? ? 'if' LPAREN ID EQ literalValue RPAREN '{' action '}'
>> ? ? ? ;
>>
>> literalValue
>> ? ? ? :
>> ? ? ? ? ? ? ? '\'' ID '\''
>> ? ? ? ;
>>
>> action
>> ? ? ? :
>> ? ? ? ? ? ? ? ID LPAREN literalValue RPAREN
>> ? ? ? ;
>>
>> ID
>> ? ? ? :
>> ? ? ? ? ? ? ? ('a'..'z' | 'A'..'Z' | '0'..'9' | '@' | ':' | '_' | ' ' | '+')+
>> ? ? ? ;
>>
>> LPAREN
>> ? ? ? :
>> ? ? ? ? ? ? ? '('
>> ? ? ? ;
>>
>> RPAREN
>> ? ? ? :
>> ? ? ? ? ? ? ? ')'
>> ? ? ? ;
>>
>> EQ
>> ? ? ? :
>> ? ? ? ? ? ? ? '=='
>> ? ? ? ;
>>
>> WS
>> ? ? ? :
>> ? ? ? ? ? ? ? (' ' |'\t' |'\r' |'\n' )+ { $channel=HIDDEN; }
>> ? ? ? ;
>
>

From stempuro2 at gmail.com  Thu Sep  2 09:45:54 2010
From: stempuro2 at gmail.com (st3)
Date: Thu, 2 Sep 2010 09:45:54 -0700 (PDT)
Subject: [antlr-interest] if/else if/else vs. if/elif/else
Message-ID: <1283445954761-5491890.post@n2.nabble.com>


Hi,

I have defined a simple if/else if/else rule (below):

ifExpr	:	'if' LRND ifCond=rightExpr RRND ifBlock=block
		('else if' LRND elifCond+=rightExpr RRND elifBlock+=block)*
		('else' elseBlock=block)?

this throws the following error:

mismatched character '{' expecting 'i'
extraneous input '}' expecting 'return '

I can solve it by changing 'else if' to 'elif' - as clearly 'else if' and
'else' are confusing the lexer/parser.

However, I was hoping to have the easer-to-read 'else if'.

Can someone suggest how I can accomplish that?

I tried the syntactic predicate ('else if')=> - but that did not work.

Thank you!
-- 
View this message in context: http://antlr.1301665.n2.nabble.com/if-else-if-else-vs-if-elif-else-tp5491890p5491890.html
Sent from the ANTLR mailing list archive at Nabble.com.

From antlr at shmuelhome.mine.nu  Thu Sep  2 10:34:40 2010
From: antlr at shmuelhome.mine.nu (shmuel siegel)
Date: Thu, 02 Sep 2010 20:34:40 +0300
Subject: [antlr-interest] if/else if/else vs. if/elif/else
In-Reply-To: <1283445954761-5491890.post@n2.nabble.com>
References: <1283445954761-5491890.post@n2.nabble.com>
Message-ID: <4C7FE030.6030006@shmuelhome.mine.nu>

  Answering to the list after I accidentally answered off-line
On 9/2/2010 8:01 PM, Serghei A wrote:
> Hi,
>
> I tried your suggestion - created tokens for IF and ELSE:
>
> ifExpr    :    IF LRND ifCond=rightExpr RRND ifBlock=block
>             (ELSE IF LRND elifCond+=rightExpr RRND elifBlock+=block)*
>             (ELSE elseBlock=block)?
>             ->    ^(ASTFuncNode<ASTFuncNode>["ASTFuncNode", "if", 
> createIfCommand($ifCond.tree, $ifBlock.tree, $elifCond, $elifBlock, 
> $elseBlock.tree)])
>         ;
>
> however this throws the following error:
>
> the following token definitions can never be matched because prior 
> tokens match the same input IF, ELSE...
>
> Does it mean I'm practically stuck with using "elif" for "else if" 
> clause?
>
> Thanks for your help.
>
No, it means that you lexer grammar is not what you think it is. Try to 
explicitly define all of the tokens for your lexer. Don't use any quoted 
strings in the parser.
>
> On Thu, Sep 2, 2010 at 12:55 PM, shmuel siegel 
> <antlr at shmuelhome.mine.nu <mailto:antlr at shmuelhome.mine.nu>> wrote:
>
>      On 9/2/2010 7:45 PM, st3 wrote:
>
>         Hi,
>
>         I have defined a simple if/else if/else rule (below):
>
>         ifExpr  :       'if' LRND ifCond=rightExpr RRND ifBlock=block
>                        ('else if' LRND elifCond+=rightExpr RRND
>         elifBlock+=block)*
>                        ('else' elseBlock=block)?
>
>         this throws the following error:
>
>         mismatched character '{' expecting 'i'
>         extraneous input '}' expecting 'return '
>
>         I can solve it by changing 'else if' to 'elif' - as clearly
>         'else if' and
>         'else' are confusing the lexer/parser.
>
>         However, I was hoping to have the easer-to-read 'else if'.
>
>         Can someone suggest how I can accomplish that?
>
>         I tried the syntactic predicate ('else if')=>  - but that did
>         not work.
>
>         Thank you!
>
>     To start with, this reads like you are trying to distinguish
>     "else" from "else if" in the lexer. Probably a mistake. You then
>     try to correct it with a parser rule. This will never work.
>     Mismatched char is a lexer error. When the lexer sees the space
>     character it tries to match the longer token and then fails.
>     Make else and if separate tokens.
>
>



From lgcraymer at yahoo.com  Thu Sep  2 10:52:16 2010
From: lgcraymer at yahoo.com (Loring Craymer)
Date: Thu, 2 Sep 2010 10:52:16 -0700 (PDT)
Subject: [antlr-interest] if/else if/else vs. if/elif/else
In-Reply-To: <1283445954761-5491890.post@n2.nabble.com>
References: <1283445954761-5491890.post@n2.nabble.com>
Message-ID: <216964.71761.qm@web55902.mail.re3.yahoo.com>

The problem is that you are considering 'else if' as a single token instead of 
thinking of the second 'if' as being part of its own statement.  Just delete the 
'else if' part of your ifExpr production and make sure that block can be an 
ifExpr.  That is,

if (cond1) block1
else if (cond2) block2
else block3

is interpreted as

if (cond) block1
else { if (cond2) block2
          else block3
}

which, you should find, is what you really want.

--Loring





----- Original Message ----
> From: st3 <stempuro2 at gmail.com>
> To: antlr-interest at antlr.org
> Sent: Thu, September 2, 2010 9:45:54 AM
> Subject: [antlr-interest] if/else if/else vs. if/elif/else
> 
> 
> Hi,
> 
> I have defined a simple if/else if/else rule  (below):
> 
> ifExpr    :    'if' LRND  ifCond=rightExpr RRND ifBlock=block
>          ('else if' LRND elifCond+=rightExpr RRND  elifBlock+=block)*
>         ('else'  elseBlock=block)?
> 
> this throws the following error:
> 
> mismatched  character '{' expecting 'i'
> extraneous input '}' expecting 'return '
> 
> I  can solve it by changing 'else if' to 'elif' - as clearly 'else if'  and
> 'else' are confusing the lexer/parser.
> 
> However, I was hoping to  have the easer-to-read 'else if'.
> 
> Can someone suggest how I can  accomplish that?
> 
> I tried the syntactic predicate ('else if')=> - but  that did not work.
> 
> Thank you!
> -- 
> View this message in context: 
>http://antlr.1301665.n2.nabble.com/if-else-if-else-vs-if-elif-else-tp5491890p5491890.html
>
> Sent  from the ANTLR mailing list archive at Nabble.com.
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: 
>http://www.antlr.org/mailman/options/antlr-interest/your-email-address
> 


      


From j at junkwallah.org  Thu Sep  2 10:57:19 2010
From: j at junkwallah.org (Junkman)
Date: Thu, 02 Sep 2010 10:57:19 -0700
Subject: [antlr-interest] Issue ANTLR-397 - CommonTreeNodeStream.index()
Message-ID: <4C7FE57F.4030508@junkwallah.org>

Greetings,

I've encountered the issue noted in the subject -
CommonTreeNodeStream.index() does not return the correct current index
into the stream.  Just reporting to give it any extra visibility it may
so that its fix is incorporated into the next release.

It was an entertaining bug in my case, though.  The method seems to
return an index into its node buffer, and the index may adjust depending
on invocation of LT(n) probably because it can cause buffering
additional nodes.  So, given the same input, I could get different
outcomes if I trace it under a debugger while monitoring LT(n) - like a
heisenbug. :-)  More specifically in my instance, the error recovery
code that uses index() to see if the error recovery is getting stuck, it
leads to different outcomes depending on the index() values when
encountering multiple errors.

BufferedTreeNodeStream seems to serve well as an alternative for now.

Regards,

J




From stempuro2 at gmail.com  Thu Sep  2 11:33:20 2010
From: stempuro2 at gmail.com (Serghei A)
Date: Thu, 2 Sep 2010 14:33:20 -0400
Subject: [antlr-interest] if/else if/else vs. if/elif/else
In-Reply-To: <216964.71761.qm@web55902.mail.re3.yahoo.com>
References: <1283445954761-5491890.post@n2.nabble.com>
	<216964.71761.qm@web55902.mail.re3.yahoo.com>
Message-ID: <AANLkTinBJmGnuRL9OY9i7hoXS_1cLCH+WHZLzzoJbYZw@mail.gmail.com>

Thank you Guys!

I think I get the point now - I will re-implement the statement as follows:

ifClause    :     'if' LRND ifCond=rightExpr RRND ifBlock=block
                ;

ifExpr        :    ifClause ('else' ifClause)* ('else' elseBlock=block)?
                ;


does it look reasonable to you as above?



On Thu, Sep 2, 2010 at 1:52 PM, Loring Craymer <lgcraymer at yahoo.com> wrote:

> The problem is that you are considering 'else if' as a single token instead
> of
> thinking of the second 'if' as being part of its own statement.  Just
> delete the
> 'else if' part of your ifExpr production and make sure that block can be an
> ifExpr.  That is,
>
> if (cond1) block1
> else if (cond2) block2
> else block3
>
> is interpreted as
>
> if (cond) block1
> else { if (cond2) block2
>          else block3
> }
>
> which, you should find, is what you really want.
>
> --Loring
>
>
>
>
>
> ----- Original Message ----
> > From: st3 <stempuro2 at gmail.com>
> > To: antlr-interest at antlr.org
> > Sent: Thu, September 2, 2010 9:45:54 AM
> > Subject: [antlr-interest] if/else if/else vs. if/elif/else
> >
> >
> > Hi,
> >
> > I have defined a simple if/else if/else rule  (below):
> >
> > ifExpr    :    'if' LRND  ifCond=rightExpr RRND ifBlock=block
> >          ('else if' LRND elifCond+=rightExpr RRND  elifBlock+=block)*
> >         ('else'  elseBlock=block)?
> >
> > this throws the following error:
> >
> > mismatched  character '{' expecting 'i'
> > extraneous input '}' expecting 'return '
> >
> > I  can solve it by changing 'else if' to 'elif' - as clearly 'else if'
>  and
> > 'else' are confusing the lexer/parser.
> >
> > However, I was hoping to  have the easer-to-read 'else if'.
> >
> > Can someone suggest how I can  accomplish that?
> >
> > I tried the syntactic predicate ('else if')=> - but  that did not work.
> >
> > Thank you!
> > --
> > View this message in context:
> >
> http://antlr.1301665.n2.nabble.com/if-else-if-else-vs-if-elif-else-tp5491890p5491890.html
> >
> > Sent  from the ANTLR mailing list archive at Nabble.com.
> >
> > List: http://www.antlr.org/mailman/listinfo/antlr-interest
> > Unsubscribe:
> >http://www.antlr.org/mailman/options/antlr-interest/your-email-address
> >
>
>
>
>
>

From stempuro2 at gmail.com  Thu Sep  2 12:14:34 2010
From: stempuro2 at gmail.com (Serghei A)
Date: Thu, 2 Sep 2010 15:14:34 -0400
Subject: [antlr-interest] if/else if/else vs. if/elif/else
In-Reply-To: <AANLkTinBJmGnuRL9OY9i7hoXS_1cLCH+WHZLzzoJbYZw@mail.gmail.com>
References: <1283445954761-5491890.post@n2.nabble.com>
	<216964.71761.qm@web55902.mail.re3.yahoo.com>
	<AANLkTinBJmGnuRL9OY9i7hoXS_1cLCH+WHZLzzoJbYZw@mail.gmail.com>
Message-ID: <AANLkTi=L1R16Eb-kFCRrm+Ni0NkYKqf+Q8bQcqeJDy7P@mail.gmail.com>

Ok - my last post was rushed.

I think this should be the correct IF/ELSE IF/ELSE statement:

ifExpr    :    'if' '(' rightExpr ')' block ('else' (ifExpr | block) )?
            ;



On Thu, Sep 2, 2010 at 2:33 PM, Serghei A <stempuro2 at gmail.com> wrote:

> Thank you Guys!
>
> I think I get the point now - I will re-implement the statement as follows:
>
> ifClause    :     'if' LRND ifCond=rightExpr RRND ifBlock=block
>                 ;
>
> ifExpr        :    ifClause ('else' ifClause)* ('else' elseBlock=block)?
>                 ;
>
>
> does it look reasonable to you as above?
>
>
>
>
> On Thu, Sep 2, 2010 at 1:52 PM, Loring Craymer <lgcraymer at yahoo.com>wrote:
>
>> The problem is that you are considering 'else if' as a single token
>> instead of
>> thinking of the second 'if' as being part of its own statement.  Just
>> delete the
>> 'else if' part of your ifExpr production and make sure that block can be
>> an
>> ifExpr.  That is,
>>
>> if (cond1) block1
>> else if (cond2) block2
>> else block3
>>
>> is interpreted as
>>
>> if (cond) block1
>> else { if (cond2) block2
>>          else block3
>> }
>>
>> which, you should find, is what you really want.
>>
>> --Loring
>>
>>
>>
>>
>>
>> ----- Original Message ----
>> > From: st3 <stempuro2 at gmail.com>
>> > To: antlr-interest at antlr.org
>> > Sent: Thu, September 2, 2010 9:45:54 AM
>> > Subject: [antlr-interest] if/else if/else vs. if/elif/else
>> >
>> >
>> > Hi,
>> >
>> > I have defined a simple if/else if/else rule  (below):
>> >
>> > ifExpr    :    'if' LRND  ifCond=rightExpr RRND ifBlock=block
>> >          ('else if' LRND elifCond+=rightExpr RRND  elifBlock+=block)*
>> >         ('else'  elseBlock=block)?
>> >
>> > this throws the following error:
>> >
>> > mismatched  character '{' expecting 'i'
>> > extraneous input '}' expecting 'return '
>> >
>> > I  can solve it by changing 'else if' to 'elif' - as clearly 'else if'
>>  and
>> > 'else' are confusing the lexer/parser.
>> >
>> > However, I was hoping to  have the easer-to-read 'else if'.
>> >
>> > Can someone suggest how I can  accomplish that?
>> >
>> > I tried the syntactic predicate ('else if')=> - but  that did not work.
>> >
>> > Thank you!
>> > --
>> > View this message in context:
>> >
>> http://antlr.1301665.n2.nabble.com/if-else-if-else-vs-if-elif-else-tp5491890p5491890.html
>> >
>> > Sent  from the ANTLR mailing list archive at Nabble.com.
>> >
>> > List: http://www.antlr.org/mailman/listinfo/antlr-interest
>> > Unsubscribe:
>> >http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>> >
>>
>>
>>
>>
>>
>

From wws_ques at yahoo.com  Thu Sep  2 13:28:41 2010
From: wws_ques at yahoo.com (wws_ques at yahoo.com)
Date: Thu, 2 Sep 2010 13:28:41 -0700 (PDT)
Subject: [antlr-interest] A Problem Using VS2008
Message-ID: <940390.57174.qm@web113205.mail.gq1.yahoo.com>

I tried to follow the following tutorial: ?How do I make ANTLRWorks and Visual Studio work together? (CSharp as target language) at http://www.antlr.org/wiki/pages/viewpage.action?pageId=557075. 
After finishing all 12 steps under "Use ANTLR

from Visual Studio", how can I run the project. What I did is as follows:
In antlrworks, I switch to "Interpreter" and then choose CRLF for "Line Endings".
I type 2+3*4 in the left-hand side window. Last, I click on the arrow. I got the

following msg:

The interpreter does not run actions nor evaluate syntactic predicate.
Use the debugger if you want to use these Anltr features

I get confused about how to run the project.... Maybe someone should tell me step 13... Thanks.
Blueski



      

From Enrique.PradosValiente at reale.es  Fri Sep  3 00:02:33 2010
From: Enrique.PradosValiente at reale.es (Prados Valiente Enrique)
Date: Fri, 3 Sep 2010 09:02:33 +0200
Subject: [antlr-interest] problem with token
In-Reply-To: <1283372372.11266.4.camel@gecko.home.org>
References: <AANLkTi=TtsOO0nqaPTMmYYgOjEUc=RdSh+pGf7wMJMvY@mail.gmail.com>
	<1283372372.11266.4.camel@gecko.home.org>
Message-ID: <931DCC17C6D7A849AEE684BF5B13E199EFF4A2@BLPOSTIN.reale.net>

Hi,

I have a sql.g grammar, and I use token NULL = 'null';

I get error NoViableAltException

Error: False
Linea: 39 Char: 48
UnexpectedType 69
Reale.Parsers.SqlOracle
[@604,917:920='NULL',<69>,39:48]


Se produjo una excepci?n de tipo 'Antlr.Runtime.NoViableAltException'.
   en Reale.Parsers.SqlOracle.SQLOracleParser.columnValue() en e:\antlr\lexerexample\sqloracleparser.cs:l?nea 2335


nulo  :
	 NULL // this way doesn't work !!!
	//'NULL' // this way work !!!
	;


I show fragment of my grammar:


grammar SQLOracle;

options {
	language=CSharp2;
	backtrack=true;
	memoize=true;
	output=AST;
	//ASTLabelType=CommonTree;
	ASTLabelType=SqlOracleAST;
	
    //tokenVocab=FKVM;
	
}

...more...

constant 
:
	stringLiteral  
	| nulo
	//nonNegativeInteger 
	//| Real 
	//| intervalLiteral 
	//| HexLiteral
	// subset of ISO 8601 recommended for SQL Server 2005
	//| Iso8601DateTime 
	//| TIMESTAMP s = stringLiteral 
	// currency & system variables not supported
	;	
	
	
// SQL 92 allows string literals broken by whitespace/comments
// (as long as it contains a newline - we're more permissive than that,
// and also allow mixing ASCII parts into Unicode strings).
stringLiteral :
	singleStringLiteral ( singleStringLiteral )*
	;

singleStringLiteral  :
	UnicodeStringLiteral 
	| AsciiStringLiteral 
	;
		
		
   	
nulo  :
	 NULL // this way doesn't work !!!
	//'NULL' // this way work !!!
	;



...more...

NULL : 'null' ;

fragment
AsciiStringRun :
	// single-line literals only
	( '\t' | ' ' .. '&' | '(' .. '~' )+
	;

AsciiStringLiteral :
	'\'' { $text = ""; }
	( s = AsciiStringRun { $text = $s.text; } )? '\''
	( '\'' {
			$text = $text + "\'";
		} ( s = AsciiStringRun { $text = $text + $s.text; } )? '\''
	)*
	;

fragment
UnicodeStringRun :
	(~ '\'' )+
	;

UnicodeStringLiteral :
	'n' '\'' { $text = ""; }
	( s = UnicodeStringRun { $text = $s.text; } )? '\''
	( '\'' {
			$text = $text + "\'";
		} ( s = UnicodeStringRun { $text = $text + $s.text; } )? '\''
	)*
	;


Any suggestions, please

From Enrique.PradosValiente at reale.es  Fri Sep  3 02:47:52 2010
From: Enrique.PradosValiente at reale.es (Prados Valiente Enrique)
Date: Fri, 3 Sep 2010 11:47:52 +0200
Subject: [antlr-interest] Characters ISO-8859-1 in grammars
Message-ID: <931DCC17C6D7A849AEE684BF5B13E199EFF4A8@BLPOSTIN.reale.net>

Hi all,

 

Can I use characters like 

 

http://www.parthia.com/fonts/crossfont_test_ISO-8859-1.htm

 

? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?

 

 

In my gramar ??

 

Any samples, please ??

 

 

 


From Enrique.PradosValiente at reale.es  Fri Sep  3 02:55:20 2010
From: Enrique.PradosValiente at reale.es (Prados Valiente Enrique)
Date: Fri, 3 Sep 2010 11:55:20 +0200
Subject: [antlr-interest] Characters ISO-8859-1 in grammars UPDATED
In-Reply-To: <931DCC17C6D7A849AEE684BF5B13E199EFF4A8@BLPOSTIN.reale.net>
References: <931DCC17C6D7A849AEE684BF5B13E199EFF4A8@BLPOSTIN.reale.net>
Message-ID: <931DCC17C6D7A849AEE684BF5B13E199EFF4AB@BLPOSTIN.reale.net>

Sorry, add more information

Hi all,

 

Can I use characters like 

 

http://www.parthia.com/fonts/crossfont_test_ISO-8859-1.htm

 

? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?

 
 

In my gramar ??

 
Now, I have this:



fragment
AsciiStringRun :
	// single-line literals only
	( '\t' | ' ' .. '&' | '(' .. '~' )+
	;

AsciiStringLiteral :
	'\'' { $text = ""; }
	( s = AsciiStringRun { $text = $s.text; } )? '\''
	( '\'' {
			$text = $text + "\'";
		} ( s = AsciiStringRun { $text = $text + $s.text; } )? '\''
	)*
	;

fragment
UnicodeStringRun :
	(~ '\'' )+
	;

UnicodeStringLiteral :
	'n' '\'' { $text = ""; }
	( s = UnicodeStringRun { $text = $s.text; } )? '\''
	( '\'' {
			$text = $text + "\'";
		} ( s = UnicodeStringRun { $text = $text + $s.text; } )? '\''
	)*
	;


But with this value

'Recepci?nEnv?o'


I get the error: NoViableAltException


Error: False
Linea: 21 Char: 85
UnexpectedType 49
Reale.Parsers.SqlOracle
[@293,795:810=''Recepci?nEnv?o'',<49>,21:85]


Se produjo una excepci?n de tipo 'Antlr.Runtime.NoViableAltException'.
   en Reale.Parsers.SqlOracle.SQLOracleParser.constant() en e:\trabajo\sqlparser\antlr\pruebas\lexerexample\reale.parsers.sqloracle\simple\sqloracleparser.cs:l?nea 5061


If I use this value:

'RecepcionEnvio'

all is OK

Any samples, please ??

 

 

 


List: http://www.antlr.org/mailman/listinfo/antlr-interest
Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address

From srimks11 at gmail.com  Fri Sep  3 05:26:36 2010
From: srimks11 at gmail.com (Mukkaysh Srivastav)
Date: Fri, 3 Sep 2010 15:26:36 +0300
Subject: [antlr-interest] Cuda Target
In-Reply-To: <268653.47931.qm@web113315.mail.gq1.yahoo.com>
References: <268653.47931.qm@web113315.mail.gq1.yahoo.com>
Message-ID: <AANLkTinh_90MQEACZ8SVAOzijR2fpyR6-E1=76c7wa-+@mail.gmail.com>

David,

What are you really looking for.

I can help/work for it. Seems to be an interesting thought.

Let me know.

~BR
Mukkaysh Srivastav
http://www.mukkaysh.blogspot.com

On Sun, Aug 29, 2010 at 1:24 AM, David Blubaugh <davidblubaugh2000 at yahoo.com
> wrote:

> To All,
>
> Would anyone be interested in assisting me in developing a cuda ANTLR
> target ??
>
> Thank You,
>
> David Blubaugh
>
>
>
>
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>

From jimi at temporal-wave.com  Fri Sep  3 09:07:15 2010
From: jimi at temporal-wave.com (Jim Idle)
Date: Fri, 3 Sep 2010 09:07:15 -0700
Subject: [antlr-interest] Characters ISO-8859-1 in grammars
In-Reply-To: <931DCC17C6D7A849AEE684BF5B13E199EFF4A8@BLPOSTIN.reale.net>
References: <931DCC17C6D7A849AEE684BF5B13E199EFF4A8@BLPOSTIN.reale.net>
Message-ID: <012f01cb4b82$136e79b0$3a4b6d10$@temporal-wave.com>

You can use anything that Java can use, but when using such characters in
the lexer, you are best advised to spell them out as the unicode code point
escape sequence such as:

CHARS: '\u1234\u3455' ;

Because when you perform actions like cutting and pasting to documents and
so on, various programs will transform non ASCII characters to invalid
sequences and otherwise screw up.

Jim

> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of Prados Valiente Enrique
> Sent: Friday, September 03, 2010 2:48 AM
> To: antlr-interest at antlr.org
> Subject: [antlr-interest] Characters ISO-8859-1 in grammars
> 
> Hi all,
> 
> 
> 
> Can I use characters like
> 
> 
> 
> http://www.parthia.com/fonts/crossfont_test_ISO-8859-1.htm
> 
> 
> 
> ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?
> 
> 
> 
> 
> 
> In my gramar ??
> 
> 
> 
> Any samples, please ??
> 
> 
> 
> 
> 
> 
> 
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
> email-address


From davidblubaugh2000 at yahoo.com  Fri Sep  3 12:02:21 2010
From: davidblubaugh2000 at yahoo.com (David Blubaugh)
Date: Fri, 3 Sep 2010 12:02:21 -0700 (PDT)
Subject: [antlr-interest] Cuda Target
In-Reply-To: <AANLkTinh_90MQEACZ8SVAOzijR2fpyR6-E1=76c7wa-+@mail.gmail.com>
Message-ID: <403135.51689.qm@web113316.mail.gq1.yahoo.com>

Sir,
?
?
I am in the process of determining if ANTLR can be utilized to develop a Matlab clone language to be compiled directly to the assembly source code for the NVidia GPU coprocessors.? This will be done to determine the possibilities of utilizing ANTLR to develop a MATLAB clone scripting language directly into assembly code for determining if ANTLR can be utilized for concurrency design of languages !? 
?
Please stand by !! More information is coming !!!
?
?
Respectfully,
?
David Blubaugh
?
? 

--- On Fri, 9/3/10, Mukkaysh Srivastav <srimks11 at gmail.com> wrote:


From: Mukkaysh Srivastav <srimks11 at gmail.com>
Subject: Re: [antlr-interest] Cuda Target
To: "David Blubaugh" <davidblubaugh2000 at yahoo.com>
Cc: antlr-interest at antlr.org
Date: Friday, September 3, 2010, 8:26 AM



David,

What are you really looking for.

I can help/work for it. Seems to be an interesting thought.

Let me know.

~BR
Mukkaysh Srivastav
http://www.mukkaysh.blogspot.com 


On Sun, Aug 29, 2010 at 1:24 AM, David Blubaugh <davidblubaugh2000 at yahoo.com> wrote:

To All,
?
Would anyone be interested in assisting me in developing a cuda ANTLR target ??
?
Thank You,
?
David Blubaugh
?
?




List: http://www.antlr.org/mailman/listinfo/antlr-interest
Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address




      

From wws_ques at yahoo.com  Fri Sep  3 14:33:53 2010
From: wws_ques at yahoo.com (wws_ques at yahoo.com)
Date: Fri, 3 Sep 2010 14:33:53 -0700 (PDT)
Subject: [antlr-interest] A Problem Using VS2008
In-Reply-To: <940390.57174.qm@web113205.mail.gq1.yahoo.com>
Message-ID: <607983.99691.qm@web113205.mail.gq1.yahoo.com>

I just followed the steps following "Debugging with ANTLRWorks" and I got an error when debugging the project. The error is that javac cannot find TestParser.java in the MSVS project directory. But why antlrwork looks for a java file instead of a cs file that is located in that directory. Something wrong with my steps. I did not set up the following step: 

2 Add an exception to the Windows Firewall (or other firewall) to grant 
network access to java.exe and javaw.exe.? By default these programs are
 installed to C:\program files (x86)\java\jre6\bin.

I really need some help to run the example in tutorial. Thanks a lot in advance.
Blueski

--- On Thu, 9/2/10, wws_ques at yahoo.com <wws_ques at yahoo.com> wrote:

From: wws_ques at yahoo.com <wws_ques at yahoo.com>
Subject: [antlr-interest] A Problem Using VS2008
To: antlr-interest at antlr.org
Date: Thursday, September 2, 2010, 4:28 PM

I tried to follow the following tutorial: ?How do I make ANTLRWorks and Visual Studio work together? (CSharp as target language) at http://www.antlr.org/wiki/pages/viewpage.action?pageId=557075. 
After finishing all 12 steps under "Use ANTLR

from Visual Studio", how can I run the project. What I did is as follows:
In antlrworks, I switch to "Interpreter" and then choose CRLF for "Line Endings".
I type 2+3*4 in the left-hand side window. Last, I click on the arrow. I got the

following msg:

The interpreter does not run actions nor evaluate syntactic predicate.
Use the debugger if you want to use these Anltr features

I get confused about how to run the project.... Maybe someone should tell me step 13... Thanks.
Blueski



? ? ? 

List: http://www.antlr.org/mailman/listinfo/antlr-interest
Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address



      

From garethmcox at gmail.com  Sat Sep  4 13:20:03 2010
From: garethmcox at gmail.com (Gareth Cox)
Date: Sat, 4 Sep 2010 16:20:03 -0400
Subject: [antlr-interest] source repository
Message-ID: <AANLkTi=FbffK1QAEDr=VMCqAKDK8XC19Yt6OQfU6bp3Q@mail.gmail.com>

How do I get access to the source repository?  I would like to get the
latest C# source which I understand has support for antlr 3.2.  Clicking on
the link to fisheye doesn't seem to work.

Gareth

From silhanek.m at gmail.com  Sun Sep  5 13:27:35 2010
From: silhanek.m at gmail.com (Milos Silhanek)
Date: Sun, 5 Sep 2010 22:27:35 +0200
Subject: [antlr-interest] Help - ANTLR and localized keywords
Message-ID: <AANLkTi=Zqdp2SAgE0bJKtSknwBTNCDDSZ21DF8Cpp4Na@mail.gmail.com>

Hi,

I have implemented Karel language support in NetBeans Platform and I will
use ANTLR to generate lexer, parser and AST.
Karel language is described on
http://karelnb.sourceforge.net/introduction.html

But Karel's keywords are nationale specific (and case insensitive) - the
STEP command in English is KROK in Czech. I tried several ways. Using
predicates generates code into parser but not in lexer. Advices in mailing
list didn't help me.

How can I test keywords in different languages in lexer?

Can I translate localized keywords into basic (English) in AntlrCharStream ?


I suppose to load localized keywords in each lexer/parser. Program will be
able to translate Karel sources from one language to others.

Thanks for help.

Milos Silhanek
silhanek.m at seznam.cz

From dr.jaymahdi at gmail.com  Sun Sep  5 13:37:23 2010
From: dr.jaymahdi at gmail.com (Jay T)
Date: Sun, 5 Sep 2010 16:37:23 -0400
Subject: [antlr-interest] (Antlr C Target) Need help converting uint8_t to
	string
Message-ID: <AANLkTikq3W133f2S3wJnz2tzShyz+1hJuKtDnjJfEDr2@mail.gmail.com>

Hi everyone:

I am very new to Antlr so please be patient with me.
I am writing a grammar that will be generated for a C target, compiled using
C++.

The problem I have is I am trying to convert a token text into a string text
which will be used for my internal data structures written in C++.
One error that I keep getting is " ToyParser.c:415: error: invalid
conversion from ?uint8_t*? to ?char? ".
I have searched exhaustively on Google trying to figure out how to convert a
uint8_t to a string and unfortunately could not find any resolution -- so
hopefully an Antlr C programmer guru can give me some advice on how to a
solution to this problem.

Below is a "Toy" Grammar file. I am simply trying to convert any received
token text into a string, and use this as a basis to convert certain tokens
to int's for my own custom data structure.

If someone could please kindly respond, it would be greatly appreciated.

Thanks







grammar Toy;

options {
  language = C;
}

@Scope
{
    string typeName;
}

@header
{
    #include <iostream>
    #include <string>
    #define ANTLR3_INLINE_INPUT_ASCII

    using namespace std;
}


@members
{

#include <iostream>
#include <string>
#include "ToyLexer.h"

using namespace std;

int main(int argc, char * argv[])
{

  pANTLR3_INPUT_STREAM           input;               //Create the input
stream
  pToyLexer               lex;
//Lexer supplied by pANTLR3_INPUT_STREAM (Translate to tokens)
  pANTLR3_COMMON_TOKEN_STREAM    tokens; //Token stream supplied by parser
(Store tokens)
  pToyParser              parser;                                  //Parser
gets the tokens and sementally understands the tokens in order



  input  = antlr3AsciiFileStreamNew          ((pANTLR3_UINT8)argv[1]);
            //Provide file input
  lex    = ToyLexerNew                (input);
                              //Create instance of lexer and set it to the
file name input
  tokens = antlr3CommonTokenStreamSourceNew  (ANTLR3_SIZE_HINT,
TOKENSOURCE(lex));    //Create token stream from the lexer
  parser = ToyParserNew               (tokens);
                                                      //Feed in tokens into
the parser

  string Name;

  parser  ->declarator(parser, Name);
                        //Call the parser rule

  parser ->free(parser);
  tokens ->free(tokens);
  lex    ->free(lex);
  input  ->close(input);

  cout << "Received name: " << Name << endl;

  return 0;
 }

}




//----- PARSER RULES -----//

declarator [string &typeName]
    :    ID     {
                typeName.append(1,$ID.text->chars);
            }
    ;

//----- LEXER RULES -----//

ID
    :    ('A'..'Z' | 'a'..'z')+
    ;

DIGIT
    :    ('0'..'9')+
    ;

WS
    :    (' ' | '\t' | '\r' | '\f' | '\n')+ {$channel=HIDDEN;}
    ;

From dr.jaymahdi at gmail.com  Sun Sep  5 14:15:12 2010
From: dr.jaymahdi at gmail.com (Jay T)
Date: Sun, 5 Sep 2010 17:15:12 -0400
Subject: [antlr-interest] (Antlr C Target) Need help converting uint8_t
	to string
In-Reply-To: <AANLkTikq3W133f2S3wJnz2tzShyz+1hJuKtDnjJfEDr2@mail.gmail.com>
References: <AANLkTikq3W133f2S3wJnz2tzShyz+1hJuKtDnjJfEDr2@mail.gmail.com>
Message-ID: <AANLkTikOhH48tMQUE71VEE=ss3ZJ-O7CO1p9PSi2Hh8d@mail.gmail.com>

Nevermind, I answered my own question I think ... not sure if it is the
golden solution but just worked for me...

J



declarator [string &typeName]
    :    ID     {
                    uint8_t *widget;
                    widget = ($ID.text->chars);
                    typeName.append(1,*widget);
            }
    ;


PS. Please forgive my dumb / unintentional nuisance questions.





On Sun, Sep 5, 2010 at 4:37 PM, Jay T <dr.jaymahdi at gmail.com> wrote:

> Hi everyone:
>
> I am very new to Antlr so please be patient with me.
> I am writing a grammar that will be generated for a C target, compiled
> using C++.
>
> The problem I have is I am trying to convert a token text into a string
> text which will be used for my internal data structures written in C++.
> One error that I keep getting is " ToyParser.c:415: error: invalid
> conversion from ?uint8_t*? to ?char? ".
> I have searched exhaustively on Google trying to figure out how to convert
> a uint8_t to a string and unfortunately could not find any resolution -- so
> hopefully an Antlr C programmer guru can give me some advice on how to a
> solution to this problem.
>
> Below is a "Toy" Grammar file. I am simply trying to convert any received
> token text into a string, and use this as a basis to convert certain tokens
> to int's for my own custom data structure.
>
> If someone could please kindly respond, it would be greatly appreciated.
>
> Thanks
>
>
>
>
>
>
>
> grammar Toy;
>
> options {
>   language = C;
> }
>
> @Scope
> {
>     string typeName;
> }
>
> @header
> {
>     #include <iostream>
>     #include <string>
>     #define ANTLR3_INLINE_INPUT_ASCII
>
>     using namespace std;
> }
>
>
> @members
> {
>
> #include <iostream>
> #include <string>
> #include "ToyLexer.h"
>
> using namespace std;
>
> int main(int argc, char * argv[])
> {
>
>   pANTLR3_INPUT_STREAM           input;               //Create the input
> stream
>   pToyLexer               lex;
> //Lexer supplied by pANTLR3_INPUT_STREAM (Translate to tokens)
>   pANTLR3_COMMON_TOKEN_STREAM    tokens; //Token stream supplied by parser
> (Store tokens)
>   pToyParser              parser;                                  //Parser
> gets the tokens and sementally understands the tokens in order
>
>
>
>   input  = antlr3AsciiFileStreamNew          ((pANTLR3_UINT8)argv[1]);
>             //Provide file input
>   lex    = ToyLexerNew                (input);
>                               //Create instance of lexer and set it to the
> file name input
>   tokens = antlr3CommonTokenStreamSourceNew  (ANTLR3_SIZE_HINT,
> TOKENSOURCE(lex));    //Create token stream from the lexer
>   parser = ToyParserNew               (tokens);
>                                                       //Feed in tokens into
> the parser
>
>   string Name;
>
>   parser  ->declarator(parser, Name);
>                             //Call the parser rule
>
>   parser ->free(parser);
>   tokens ->free(tokens);
>   lex    ->free(lex);
>   input  ->close(input);
>
>   cout << "Received name: " << Name << endl;
>
>   return 0;
>  }
>
> }
>
>
>
>
> //----- PARSER RULES -----//
>
> declarator [string &typeName]
>     :    ID     {
>                 typeName.append(1,$ID.text->chars);
>             }
>     ;
>
> //----- LEXER RULES -----//
>
> ID
>     :    ('A'..'Z' | 'a'..'z')+
>     ;
>
> DIGIT
>     :    ('0'..'9')+
>     ;
>
> WS
>     :    (' ' | '\t' | '\r' | '\f' | '\n')+ {$channel=HIDDEN;}
>     ;
>
>

From claespeter at home.se  Sun Sep  5 14:21:06 2010
From: claespeter at home.se (Peter Andersson)
Date: Sun, 5 Sep 2010 23:21:06 +0200
Subject: [antlr-interest] Filter mode and C#
Message-ID: <AMECLHDNIHHAAJMPDEIOGEDOCEAA.claespeter@home.se>

Hi,

I've been trying to use the filter mode to do some optimization to an AST
tree.
I can't make it work. It seems that it doesn't use filter mode even if I set
the
filter option to true. The downup (or Downup) method also seems to be
missing.
I'm using C# and I saw a comment somewhere that filter mode only works with
Java
as the target language. Is that true?

An alternative would be to use a full grammar but is it really possible in a
non-filter grammar to specify special cases that are candidates for
optimization?
I tried to use syntactic predicates but that doesn't seem to be supported in
tree grammars.

Thanks for your help,
Peter Andersson


From jimi at temporal-wave.com  Sun Sep  5 14:24:57 2010
From: jimi at temporal-wave.com (Jim Idle)
Date: Sun, 5 Sep 2010 14:24:57 -0700
Subject: [antlr-interest] (Antlr C Target) Need help converting uint8_t
	to	string
In-Reply-To: <AANLkTikq3W133f2S3wJnz2tzShyz+1hJuKtDnjJfEDr2@mail.gmail.com>
References: <AANLkTikq3W133f2S3wJnz2tzShyz+1hJuKtDnjJfEDr2@mail.gmail.com>
Message-ID: <028001cb4d40$ca2291e0$5e67b5a0$@temporal-wave.com>

It is just suing that type because I cannot know what the real type is, so
just cast it. However, as per the many times I have answered this in
antlr.markmail.org, the $text stuff is just a convenience, which should not
be used if you are using a parser that will parse large amounts of input.
This is because it autocreates pANTLR_STRING structures, which are not
released until the parser is freed. 

So, just use the token itself to create your C++ strings and not $text. In
the token you will find a pointer to the first byte that starts the string
and the end of the string. You must know what the encoding is, so use these
to find the length or otherwise construct the string directly. The pointer
types are u_int8 *but perhaps I should have made them void (and might do so
yet as people are already casting them anyway). 

Jim


> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of Jay T
> Sent: Sunday, September 05, 2010 1:37 PM
> To: antlr-interest at antlr.org
> Subject: [antlr-interest] (Antlr C Target) Need help converting uint8_t to
> string
> 
> Hi everyone:
> 
> I am very new to Antlr so please be patient with me.
> I am writing a grammar that will be generated for a C target, compiled
using
> C++.
> 
> The problem I have is I am trying to convert a token text into a string
text
> which will be used for my internal data structures written in C++.
> One error that I keep getting is " ToyParser.c:415: error: invalid
conversion
> from 'uint8_t*' to 'char' ".
> I have searched exhaustively on Google trying to figure out how to convert
a
> uint8_t to a string and unfortunately could not find any resolution -- so
> hopefully an Antlr C programmer guru can give me some advice on how to a
> solution to this problem.
> 
> Below is a "Toy" Grammar file. I am simply trying to convert any received
> token text into a string, and use this as a basis to convert certain
tokens to
> int's for my own custom data structure.
> 
> If someone could please kindly respond, it would be greatly appreciated.
> 
> Thanks
> 
> 
> 
> 
> 
> 
> 
> grammar Toy;
> 
> options {
>   language = C;
> }
> 
> @Scope
> {
>     string typeName;
> }
> 
> @header
> {
>     #include <iostream>
>     #include <string>
>     #define ANTLR3_INLINE_INPUT_ASCII
> 
>     using namespace std;
> }
> 
> 
> @members
> {
> 
> #include <iostream>
> #include <string>
> #include "ToyLexer.h"
> 
> using namespace std;
> 
> int main(int argc, char * argv[])
> {
> 
>   pANTLR3_INPUT_STREAM           input;               //Create the input
> stream
>   pToyLexer               lex;
> //Lexer supplied by pANTLR3_INPUT_STREAM (Translate to tokens)
>   pANTLR3_COMMON_TOKEN_STREAM    tokens; //Token stream supplied
> by parser
> (Store tokens)
>   pToyParser              parser;
//Parser
> gets the tokens and sementally understands the tokens in order
> 
> 
> 
>   input  = antlr3AsciiFileStreamNew          ((pANTLR3_UINT8)argv[1]);
>             //Provide file input
>   lex    = ToyLexerNew                (input);
>                               //Create instance of lexer and set it to the
file name input
>   tokens = antlr3CommonTokenStreamSourceNew  (ANTLR3_SIZE_HINT,
> TOKENSOURCE(lex));    //Create token stream from the lexer
>   parser = ToyParserNew               (tokens);
>                                                       //Feed in tokens
into the parser
> 
>   string Name;
> 
>   parser  ->declarator(parser, Name);
>                         //Call the parser rule
> 
>   parser ->free(parser);
>   tokens ->free(tokens);
>   lex    ->free(lex);
>   input  ->close(input);
> 
>   cout << "Received name: " << Name << endl;
> 
>   return 0;
>  }
> 
> }
> 
> 
> 
> 
> //----- PARSER RULES -----//
> 
> declarator [string &typeName]
>     :    ID     {
>                 typeName.append(1,$ID.text->chars);
>             }
>     ;
> 
> //----- LEXER RULES -----//
> 
> ID
>     :    ('A'..'Z' | 'a'..'z')+
>     ;
> 
> DIGIT
>     :    ('0'..'9')+
>     ;
> 
> WS
>     :    (' ' | '\t' | '\r' | '\f' | '\n')+ {$channel=HIDDEN;}
>     ;
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
> email-address


From jimi at temporal-wave.com  Sun Sep  5 14:32:54 2010
From: jimi at temporal-wave.com (Jim Idle)
Date: Sun, 5 Sep 2010 14:32:54 -0700
Subject: [antlr-interest] Help - ANTLR and localized keywords
In-Reply-To: <AANLkTi=Zqdp2SAgE0bJKtSknwBTNCDDSZ21DF8Cpp4Na@mail.gmail.com>
References: <AANLkTi=Zqdp2SAgE0bJKtSknwBTNCDDSZ21DF8Cpp4Na@mail.gmail.com>
Message-ID: <028b01cb4d41$e64b5220$b2e1f660$@temporal-wave.com>

Your options are:

1) Write a custom lexer returning the same token numbers but recognizing
locale for the sequence;
2) Write a separate ANTLR lexer for each locale, sharing the toke
definitions, invoke the lexer that corresponds to the locale;

Either way, you will need to create a list of tokens to import as a vocab to
either the ANTLR lexers or the parser. 

Changing the definition of tokens according to the locale is not a very good
idea I think. If I send you my program and your locale is different, how
does the compiler know what locale the source is in unless it is flagged in
the source? Also, this implies that the language we are using is likely to
be shared amongst different language speakers, but now instead of having at
least a common token set to feast our eyes on, there might be 30; and unless
I know Czech, then I am lost. So, this makes the implied purpose impossible.


Hence the only use is where the code is in fact only in use in a single
language domain (or ones where it is common to speak two, such as say French
and English...) and the intent is to make local programmers more efficient.
Anyway, as you did not invent the language, that is hardly relevant ;-) but
I would write a custom lexer I think (though either is a good solution
really)

Jim



> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of Milos Silhanek
> Sent: Sunday, September 05, 2010 1:28 PM
> To: antlr-interest at antlr.org
> Subject: [antlr-interest] Help - ANTLR and localized keywords
> 
> Hi,
> 
> I have implemented Karel language support in NetBeans Platform and I will
> use ANTLR to generate lexer, parser and AST.
> Karel language is described on
> http://karelnb.sourceforge.net/introduction.html
> 
> But Karel's keywords are nationale specific (and case insensitive) - the
STEP
> command in English is KROK in Czech. I tried several ways. Using
predicates
> generates code into parser but not in lexer. Advices in mailing list
didn't help
> me.
> 
> How can I test keywords in different languages in lexer?
> 
> Can I translate localized keywords into basic (English) in AntlrCharStream
?
> 
> 
> I suppose to load localized keywords in each lexer/parser. Program will be
> able to translate Karel sources from one language to others.
> 
> Thanks for help.
> 
> Milos Silhanek
> silhanek.m at seznam.cz
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
> email-address


From garethmcox at gmail.com  Sun Sep  5 15:10:03 2010
From: garethmcox at gmail.com (Gareth Cox)
Date: Sun, 5 Sep 2010 18:10:03 -0400
Subject: [antlr-interest] Filter mode and C#
In-Reply-To: <AMECLHDNIHHAAJMPDEIOGEDOCEAA.claespeter@home.se>
References: <AMECLHDNIHHAAJMPDEIOGEDOCEAA.claespeter@home.se>
Message-ID: <AANLkTikha6ryGnkusiBp3oeGTnai-xBTyig7-Yx08wwy@mail.gmail.com>

Hey Peter,

I'm basically trying to do the same thing.  Google search showed that antlr
3.2 supports filter mode and the c# build is only 3.1.  Apparently if you
get the top of the source tree there is a work in progress version.
Unfortunately I've been unable to do that from the antlr website.






On Sun, Sep 5, 2010 at 5:21 PM, Peter Andersson <claespeter at home.se> wrote:

> Hi,
>
> I've been trying to use the filter mode to do some optimization to an AST
> tree.
> I can't make it work. It seems that it doesn't use filter mode even if I
> set
> the
> filter option to true. The downup (or Downup) method also seems to be
> missing.
> I'm using C# and I saw a comment somewhere that filter mode only works with
> Java
> as the target language. Is that true?
>
> An alternative would be to use a full grammar but is it really possible in
> a
> non-filter grammar to specify special cases that are candidates for
> optimization?
> I tried to use syntactic predicates but that doesn't seem to be supported
> in
> tree grammars.
>
> Thanks for your help,
> Peter Andersson
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>

From nvivo.misc at gmail.com  Sun Sep  5 15:19:32 2010
From: nvivo.misc at gmail.com (Natan)
Date: Sun, 05 Sep 2010 19:19:32 -0300
Subject: [antlr-interest] Filter mode and C#
In-Reply-To: <AANLkTikha6ryGnkusiBp3oeGTnai-xBTyig7-Yx08wwy@mail.gmail.com>
References: <AMECLHDNIHHAAJMPDEIOGEDOCEAA.claespeter@home.se>
	<AANLkTikha6ryGnkusiBp3oeGTnai-xBTyig7-Yx08wwy@mail.gmail.com>
Message-ID: <4C841774.7060407@gmail.com>

  You are not alone. Has been almost 1 year since 3.2 has been release, 
and I'm still hoping to use those new features.
You may be able to find some old posts with preview builds, but not 
access to the source. Not sure what is wrong with the C# port... looks 
like its abandoned.

On 5/9/2010 19:10, Gareth Cox wrote:
> Hey Peter,
>
> I'm basically trying to do the same thing.  Google search showed that antlr
> 3.2 supports filter mode and the c# build is only 3.1.  Apparently if you
> get the top of the source tree there is a work in progress version.
> Unfortunately I've been unable to do that from the antlr website.


From isabelle.perseil at enst.fr  Mon Sep  6 02:18:03 2010
From: isabelle.perseil at enst.fr (Isabelle Perseil)
Date: Mon, 6 Sep 2010 11:18:03 +0200
Subject: [antlr-interest] =?iso-8859-1?q?_LAST_CALL_FOR_PAPERS_=3A_UML=26F?=
 =?iso-8859-1?q?M=922010?=
Message-ID: <0376c5ba03631c03b1316dfe5b2be071.squirrel@webmail1.telecom-paristech.fr>

**********************************************************************
                   CALL FOR PAPERS :  UML&FM?2010
            3rd INTERNATIONAL WORKSHOP ON UML&FORMAL METHODS
          http://www.artist-embedded.org/artist/UML-FM-2010.html

               Workshop held in conjunction with ICFEM 2010
                   The 12th International Conference on
                      Formal Engineering Methods
                 http://www.sei.ecnu.edu.cn/icfem2010/
                           November 16th, 2010
                             Shanghai, China
************************************************************************

                     Submission deadline: September 15th, 2010
                     -----------------------------------------


Many interest groups from a research perspective are in favour of the
creation of this workshop.

For more than a decade now, the two communities of UML and formal methods
have been working together to produce a simultaneously practical (via UML)
and rigorous (via formal methods) approach to software engineering.

UML is the de facto standard for modelling various aspects of software
systems in both industry and academia, despite the inconvenience that its
current specification is complex and its syntax imprecise.

The fact that the UML semantics is too informal have led many researchers
to formalize it with all kinds of existing formal languages, like OCL, Z,
B, CSP, VDM, Petri Nets, UPPAAL, HOL, Coq, PVS etc.

This third edition of the workshop will be open to various subjects as the
main objective is to encourage new initiatives of building bridges between
informal, semi-formal and formal notations.


Topics:
======

This workshop seeks contributions from researchers and practitioners
interested in all aspects of integrating UML and formal methods. To this
end, we solicit papers (no more than 8 pages long) related to, but not
limited to, the following principal topics:

?        Consistent specifications, model transformations (QVT technologies,
         transformation repositories). Transformations to make models more
         analyzable so as to make them executable.

?        Automation of traceability through transformations

?        Refinement techniques: developing detailed design from a UML
         abstract specification

?        Refinement of OCL specification as well

?        Formal reasoning on models for code generation

?        Technologies for compositional verification of models

?        Specification of a formal semantics for the UML.
         Giving an abstract syntax to UML diagrams

?        Formal validation and verification of software

?        Co-modeling methods formal/informal mapping techniques

?        End-to-end methodologies or software process
         engineering,correct-by-construction design providing and
         supporting tools for safety-critical embedded systems design


Workshop Format
===============
This full-day workshop will consist of an introduction of the topic by the
workshop organizers, presentations of accepted papers, and in depth
discussion of previously identified subjects emerging from the
submissions. A summary of the discussions will be made available.


Submission and Publication
==========================
To contribute, please send a position paper or a technical paper

to agusti[dot]canals[at]c-s[dot]fr with ?ICFEM 2010 UML&FM Workshop? in
the title.

All the selected papers will be published in the ACM Software Engineering
Notes (SEN), January 2011. Papers should not exceed 8 pages. Submitted
manuscripts should be in English and formatted in the style of the SEN
format.
http://www.stidolph.com/SEN/index.html
Preferably, submissions should be in PDF format.

Slides will be made available through the workshop website.

Let?s notice that 7 papers will selected to be published after the
workshop in a 2011 special issue of the SoSyM journal. The authors of the
7 best papers will be asked to send an extended version of their paper.
These extended versions should not exceed 20 pages, must be based on the
same results as the original but different. Submitted manuscripts should
be in English and formatted in the style of the SoSyM Springer format.
http://www.sosym.org/submission/
Preferably, submissions should be in PDF format. Please, follow the
guidelines at the "Authors information" heading in the SoSyM website.


IMPORTANT DATES
===============
Submission deadline:                                 September 15th, 2010
All Notification of acceptance:                      September 30th, 2010
Final copy :                                         October 15th, 2010
Workshop date :                                      November 16th, 2010


Organizers
==========

Organizational sponsors :

OMG      (http://www.omg.org/)
ARTIST   (http://www.artist-embedded.org/artist/)


Organizers and Programme Steering committee:

Jean-Michel Bruel (Liuppa, France)
Agusti Canals (CS, France)
Robert de Simone (INRIA, France)
S?bastien G?rard (CEA-LIST, France)
Elie Najm (Telecom ParisTech, France)
Isabelle Perseil (Inserm, France)

Publicity Chair:
Sun Meng (CWI, The Netherlands)

IEEE CS Coordinator:

Mike Hinchey (Lero and NASA GSFC , Ireland)


Program Committee:

    * Nazareno Aguirre (Universidad Nacional de R?o Cuarto, Argentina)
    * Pascal Andr? (LINA, University of Nantes, France)
    * Yamine Ait Ameur (LISI / ENSMA, France)
    * Luciano Baresi (Politecnico di Milano, Italia)
    * Yves Bernard (AIRBUS France, France)
    * Jean-Paul Bodeveix (IRIT, France)
    * Agusti Canals (CS, France) ? General Chair
    * Sebastien Demathieu (THALES, France)
    * Jean-Marie Favre (University Joseph Fourier of Grenoble, France)
    * Mamoun Filali (IRIT, France)
    * Madeleine Faug?re (THALES, France)
    * Robert France (Colorado State University, USA)
    * S?bastien G?rard (CEA-LIST, France)
    * Martin Gogolla (University of Bremen, Germany)
    * Irfan Hamid (Microsoft Corp, Canada)
    * Wooter Joosen (Catholic University of Leuven, Belgium)
    * Sharon Keidar-Barner (IBM Haifa Research Laboratory, Israel)
    * Kevin Lano (King?s College London, United Kingdom)
    * Tom Maibaum (McMaster University, Canada )
    * Manuel Mazzara (Newcastle University, United Kingdom)
    * Stephen J.Mellor (Accelerated Technologies, Tucson AZ, USA)
    * Sun Meng (CWI, The Netherlands)
    * Dominique Mery (LORIA, France)
    * Alexandre Mota (Universidade Federal de Pernambuco, Brazil)
    * Elie Najm (Telecom ParisTech, France)
    * Kazuhiro Ogata (Japan Advanced Institute of Science and Technology,
      Japan)
    * Richard Paige (University of York, United Kingdom)
    * Dorina Petriu (Carlton University, USA)
    * Pierre-Yves Schobbens (University of Namur, Belgium)
    * Douglas C. Schmidt (Vanderbild University, USA)
    * Fran?oise Simonot Lion (LORIA, France)
    * Jing Sun (University of Auckland, New Zealand)
    * Jun Suzuki (University of Massachusetts, Boston, USA)
    * Martin T?rngren (Royal Institute of Technology, Sweden)
    * Tatsuhiro Tsuchiya (Osaka University, Japan)
    * Naoyasu Ubayashi (Kyushu Institute of Technology, Japan)
    * Stefan Van Baelen (Catholic University of Leuven, Belgium)
    * Tullio Vardanega (University of Padua, Italia)
    * Fran?ois Vernadat (CNRS-LAAS, France)
    * Eugenio Villar (Universidad de Cantabria, Spain)
    * Tim Weilkiens (OOSE Innovative Informatik, Germany)
    * Andr? Windisch (EADS Military Aircraft, Germany)
    * John Whittle (George Mason University, USA)
    * Sergio Yovine (CNRS-Verimag, France)



From thomas.davis at student.adelaide.edu.au  Mon Sep  6 05:06:36 2010
From: thomas.davis at student.adelaide.edu.au (Thomas Davis)
Date: Mon, 6 Sep 2010 21:36:36 +0930
Subject: [antlr-interest] Compilation linking error with ANTLR 3.x
Message-ID: <AANLkTikxq2bh1HQGf6Hkk-jxmdb=vKiPOoXbT95exrOq@mail.gmail.com>

Hi all,

Just wondering if anyone could help me out with this. I've got ANTLR 3.2 as
part of a qt project, its compiled using qmake and then makefiles to
initiate the compilation. Within one of my files i include the antlr lexer
and parser which was produced using the C target. I should mention this is
being compiled into a c++ project. Whenever i try to compile i get the
following error:


make[1]: Entering directory
`/home/timmas/UniWork/2010/semester2/SEGP2_RSP2010/projects/guiGen/trunk/src'
g++ -c -pipe -frtti -Wall -Wextra -pg -fprofile-arcs -ftest-coverage -frtti
-Wall -Wextra -pg -fprofile-arcs -ftest-coverage -g -Wall -W
-I/usr/local/include/yaml-cpp -D_REENTRANT -DQT_GUI_LIB -DQT_CORE_LIB
-DQT_SHARED -I/usr/share/qt4/mkspecs/linux-g++ -I. -I/usr/include/qt4/QtCore
-I/usr/include/qt4/QtGui -I/usr/include/qt4 -I. -I.. -I../include
-I../include/lib -I../include -I../include/lib -I../include/components
-I../build -o ../build/ComponentDescriptorUtil.o
../src/components/ComponentDescriptorUtil.cpp
In file included from /usr/local/include/antlr3baserecognizer.h:363,
                 from /usr/local/include/antlr3cyclicdfa.h:38,
                 from /usr/local/include/antlr3.h:40,
                 from ../include/components/AntlrLexer.h:96,
                 from ../include/components/ExpressionParser.h:3,
                 from ../include/components/ConditionTree.h:5,
                 from ../include/components/ComponentDescriptor.h:25,
                 from ../include/components/NodeItem.h:8,
                 from ../include/components/ComponentDescriptorUtil.h:5,
                 from ../src/components/ComponentDescriptorUtil.cpp:1:
/usr/local/include/antlr3lexer.h:130: error: expected unqualified-id before
?)? token
make[1]: *** [../build/ComponentDescriptorUtil.o] Error 1
make[1]: Leaving directory
`/home/timmas/UniWork/2010/semester2/SEGP2_RSP2010/projects/guiGen/trunk/src'
make: *** [sub-src-make_default-ordered] Error 2


AntlrLexer.h is the header file for the lexer produced by ANTLR, which is
included from expression parser which is included from ConditionTree etc.. I
have absolutely no idea what this error is or how to fix it, and i've tried
installation of the antlr libraries (all 3.x version) across both windows
and Ubuntu and both give me the same error in the same file, i.e. at this
line in the Antlr Source:

    /** Pointer to a function that constructs a new token from the lexer
stored information
     */
    pANTLR3_COMMON_TOKEN    (*emit)            (struct ANTLR3_LEXER_struct *
lexer);


Any help with this issue would be greatly appreciated, as i've wasted
countless hours trying to solve it :(

Cheers,

Tom

From jimi at temporal-wave.com  Mon Sep  6 09:18:10 2010
From: jimi at temporal-wave.com (Jim Idle)
Date: Mon, 6 Sep 2010 09:18:10 -0700
Subject: [antlr-interest] Compilation linking error with ANTLR 3.x
In-Reply-To: <AANLkTikxq2bh1HQGf6Hkk-jxmdb=vKiPOoXbT95exrOq@mail.gmail.com>
References: <AANLkTikxq2bh1HQGf6Hkk-jxmdb=vKiPOoXbT95exrOq@mail.gmail.com>
Message-ID: <009001cb4ddf$18fada90$4af08fb0$@temporal-wave.com>

You are almost certainly #defining something that is in conflict with the
generated headers. You should start with the basic generated code, then add
in your headers one at a time until you find out which one goes awry. Quite
often an include order change will fix thigns.

But generally, you should have almost zero code embedded in your grammar
except references to some external helper object that does all the work for
you. It looks to me like your code is all glommed together and interrelated?

Jim

> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of Thomas Davis
> Sent: Monday, September 06, 2010 5:07 AM
> To: antlr-interest at antlr.org
> Subject: [antlr-interest] Compilation linking error with ANTLR 3.x
> 
> Hi all,
> 
> Just wondering if anyone could help me out with this. I've got ANTLR 3.2
as
> part of a qt project, its compiled using qmake and then makefiles to
initiate
> the compilation. Within one of my files i include the antlr lexer and
parser
> which was produced using the C target. I should mention this is being
> compiled into a c++ project. Whenever i try to compile i get the following
> error:
> 
> 
> make[1]: Entering directory
> `/home/timmas/UniWork/2010/semester2/SEGP2_RSP2010/projects/guiGe
> n/trunk/src'
> g++ -c -pipe -frtti -Wall -Wextra -pg -fprofile-arcs -ftest-coverage
> g++ -frtti
> -Wall -Wextra -pg -fprofile-arcs -ftest-coverage -g -Wall -W -
> I/usr/local/include/yaml-cpp -D_REENTRANT -DQT_GUI_LIB -DQT_CORE_LIB
> -DQT_SHARED -I/usr/share/qt4/mkspecs/linux-g++ -I. -
> I/usr/include/qt4/QtCore -I/usr/include/qt4/QtGui -I/usr/include/qt4 -I.
-I.. -
> I../include -I../include/lib -I../include -I../include/lib
-I../include/components
> -I../build -o ../build/ComponentDescriptorUtil.o
> ../src/components/ComponentDescriptorUtil.cpp
> In file included from /usr/local/include/antlr3baserecognizer.h:363,
>                  from /usr/local/include/antlr3cyclicdfa.h:38,
>                  from /usr/local/include/antlr3.h:40,
>                  from ../include/components/AntlrLexer.h:96,
>                  from ../include/components/ExpressionParser.h:3,
>                  from ../include/components/ConditionTree.h:5,
>                  from ../include/components/ComponentDescriptor.h:25,
>                  from ../include/components/NodeItem.h:8,
>                  from ../include/components/ComponentDescriptorUtil.h:5,
>                  from ../src/components/ComponentDescriptorUtil.cpp:1:
> /usr/local/include/antlr3lexer.h:130: error: expected unqualified-id
before ')'
> token
> make[1]: *** [../build/ComponentDescriptorUtil.o] Error 1
> make[1]: Leaving directory
> `/home/timmas/UniWork/2010/semester2/SEGP2_RSP2010/projects/guiGe
> n/trunk/src'
> make: *** [sub-src-make_default-ordered] Error 2
> 
> 
> AntlrLexer.h is the header file for the lexer produced by ANTLR, which is
> included from expression parser which is included from ConditionTree etc..
I
> have absolutely no idea what this error is or how to fix it, and i've
tried
> installation of the antlr libraries (all 3.x version) across both windows
and
> Ubuntu and both give me the same error in the same file, i.e. at this line
in
> the Antlr Source:
> 
>     /** Pointer to a function that constructs a new token from the lexer
stored
> information
>      */
>     pANTLR3_COMMON_TOKEN    (*emit)            (struct ANTLR3_LEXER_struct
> *
> lexer);
> 
> 
> Any help with this issue would be greatly appreciated, as i've wasted
> countless hours trying to solve it :(
> 
> Cheers,
> 
> Tom
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
> email-address


From tirelli at post.com  Mon Sep  6 10:06:21 2010
From: tirelli at post.com (Edson Tirelli)
Date: Mon, 6 Sep 2010 13:06:21 -0400
Subject: [antlr-interest] Help - ANTLR and localized keywords
In-Reply-To: <AANLkTi=Zqdp2SAgE0bJKtSknwBTNCDDSZ21DF8Cpp4Na@mail.gmail.com>
References: <AANLkTi=Zqdp2SAgE0bJKtSknwBTNCDDSZ21DF8Cpp4Na@mail.gmail.com>
Message-ID: <AANLkTikiNScsokmhW0WHj4F+v2d_XYyDEmS=O0-KHBLB@mail.gmail.com>

    Milos,

    We had to do something similar (although with different goals) for
Drools. That is how I would do it (assuming your parser is generating
an AST):

    First, do not define keywords in the lexer. Just define an ID
lexer rule that will serve as your lexer token for both keywords and
regular IDs:

ID = ...;

    Second, define a virtual token for each of your keywords:

tokens {
    VT_STEP;
}

    Third, define a "keyword rule" in your parser for each of your keywords:

step_key	:	{validateIdentifierKey(SoftKeywords.STEP)}?=>  id=ID
		->	VT_STEP[$id]
	;

    Where "SoftKeywords.STEP" returns the actual keyword you are
trying to recognize for whatever locale you are working with at the
moment.

    Fourth, define the "validateIdentifierKey" function either as some
method on a helper class or even as a parser method directly.
Basically the function would be something like:

// this is pseudo-code... some null checks are advisable on real code
private boolean validateIdentifierKey(String text) {
    return text.equalsIgnoreCase( input.LT(1).getText() );
}

    Fifth, write your parser rules using your keyword rules in place
of your keywords:

step_statement: step_key ... ;

    That works for us. Because our grammar is quite complex, there are
a few keywords we had to keep as "hard keywords" defined in the lexer,
but for the most part it works pretty well.

    Our grammar can be found here if you want to take a look:

http://anonsvn.jboss.org/repos/labs/labs/jbossrules/branches/etirelli/drools-compiler/src/main/resources/org/drools/lang/DRL.g

    Hope it helps,
        Edson


2010/9/5 Milos Silhanek <silhanek.m at gmail.com>:
> Hi,
>
> I have implemented Karel language support in NetBeans Platform and I will
> use ANTLR to generate lexer, parser and AST.
> Karel language is described on
> http://karelnb.sourceforge.net/introduction.html
>
> But Karel's keywords are nationale specific (and case insensitive) - the
> STEP command in English is KROK in Czech. I tried several ways. Using
> predicates generates code into parser but not in lexer. Advices in mailing
> list didn't help me.
>
> How can I test keywords in different languages in lexer?
>
> Can I translate localized keywords into basic (English) in AntlrCharStream ?
>
>
> I suppose to load localized keywords in each lexer/parser. Program will be
> able to translate Karel sources from one language to others.
>
> Thanks for help.
>
> Milos Silhanek
> silhanek.m at seznam.cz
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>



-- 
? Edson Tirelli
? JBoss Drools Core Development
? JBoss by Red Hat @ www.jboss.com

From kontakt at beberlei.de  Mon Sep  6 12:12:54 2010
From: kontakt at beberlei.de (Benjamin Eberlei)
Date: Mon, 06 Sep 2010 21:12:54 +0200
Subject: [antlr-interest] Improvements to the Antlr PHP Target
Message-ID: <1283800374.3278.24.camel@benny-pc>

Hello,

We are currently building an open-source PHP ORM
(http://www.doctrine-project.org) that utilizes a hand-written Top-Down,
Recursive-Descent Parser for our Query Language. That is why we are
looking for ways how to automate the parser generation for a future
major release to increase maintainability. This his going to be a
potential long-run refactoring for our project, so we are looking into
possible solutions as early as possible.

We know Antlr exists and have found the ongoing effort to write an Antlr
Target for PHP at http://code.google.com/p/antlrphpruntime/. However it
seems development of that target has come to halt. Additionally we had
doubts with regard to some design decisions in the Runtime engine.

Over the weekend I have forked that project at
http://github.com/beberlei/antlr-php-runtime and changed the
following stuff:

* Migrated Runtime to PHP 5.3 Namespaces (Antlr\Runtime\*)
* Fixed formatting of all files to comply to PEAR/Zend Coding Standards
(Php.stg is not yet generation compliant code)
* Fixed functional testsuite to pass up to test 41 of the Python
testsuite (with the exception of Test 22)
* Refactored testsuite to have distinct sub-directories for grammer and
generated code to enhance readibility/maintainability.
* Removed class "Set" and implemented follow sets with simple PHP arrays
for performance reasons.
* Removed "public static" token and "constants" and used PHP class
constants for performance reasons (compile vs runtime generation)
* Rewrote DFA code (although this still does not support unicode and
probably has other bugs)
* Lots of other refactorings to make use of PHP internal features.

How should the development of this target continue given that the
original code is in the Google SVN? For the namespace and test-cleanup
refactoring I moved almost all files to new directories, so this could
be a bit cumbersome to merge back (sorry for that! :()

Additionally for further development it would be helpful if anyone could
help me with these questions:

1. Is it really required to have a Runtime of "StringTemplate" library
in PHP? What is it used for at runtime? When is the ST.stg template used
at all?
2. Can i escape strings from the template generator? In <description>
there are sometimes literals of the kind "?>" which end the PHP mode
even if they are inside comments and make the code fail. I would like to
strip "?>" from each <description> I render.
3. How stable are the runtimes? I see very little commits to them, so
probably very stable. But how will that change with Antlr v4 in
development?
4. After the basic Parser/Lexer support, what would be the next step in
target development? AST support with the Tree Runtime namespace?

greetings,
Benjamin


From kcarroll at signmgmt.com  Tue Sep  7 04:58:48 2010
From: kcarroll at signmgmt.com (Kevin Carroll)
Date: Tue, 7 Sep 2010 06:58:48 -0500
Subject: [antlr-interest] Filter mode and C#
In-Reply-To: <4C841774.7060407@gmail.com>
References: <AMECLHDNIHHAAJMPDEIOGEDOCEAA.claespeter@home.se>
	<AANLkTikha6ryGnkusiBp3oeGTnai-xBTyig7-Yx08wwy@mail.gmail.com>
	<4C841774.7060407@gmail.com>
Message-ID: <80A5CDD2686EA042AE41C526324D44558EF2DAD1E7@EXCHANGE2007.signmgmt.local>

I have been using Sam Harwell's CSharp3 target (ANTLR 3.2) for some time, and filter mode works for me.  The version I am using came from the link in the following post from Sam on 6/23/2010 (Titled - Runtime Library of v 3.2 for C#):

-------------------------
The CSharp3 target should support the ANTLR 3.2 features. There are a few known issues, such as the fact that the method generated for the bottomUp and topDown rules doesn't match the name expected by the current CSharp3 runtime (BottomUp and TopDown), so you have to manually override the BottomUp and TopDown methods to call bottomUp and topDown instead.

To use the CSharp3 target, you'll need to generate your grammar using the C# port of the ANTLR tool (Antlr3.exe). The binaries for the tool and the
CSharp3 runtime can be found here:
http://www.280z28.org/downloads/antlr/antlr-dotnet-binaries-3.2.0.6805.7z

Thanks,
Sam
-------------------------
Kevin Carroll
 

-----Original Message-----
From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-bounces at antlr.org] On Behalf Of Natan
Sent: Sunday, September 05, 2010 5:20 PM
To: antlr-interest at antlr.org
Subject: Re: [antlr-interest] Filter mode and C#

  You are not alone. Has been almost 1 year since 3.2 has been release, 
and I'm still hoping to use those new features.
You may be able to find some old posts with preview builds, but not 
access to the source. Not sure what is wrong with the C# port... looks 
like its abandoned.

On 5/9/2010 19:10, Gareth Cox wrote:
> Hey Peter,
>
> I'm basically trying to do the same thing.  Google search showed that antlr
> 3.2 supports filter mode and the c# build is only 3.1.  Apparently if you
> get the top of the source tree there is a work in progress version.
> Unfortunately I've been unable to do that from the antlr website.


List: http://www.antlr.org/mailman/listinfo/antlr-interest
Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address

From garethmcox at gmail.com  Tue Sep  7 07:02:52 2010
From: garethmcox at gmail.com (Gareth Cox)
Date: Tue, 7 Sep 2010 10:02:52 -0400
Subject: [antlr-interest] Filter mode and C#
In-Reply-To: <80A5CDD2686EA042AE41C526324D44558EF2DAD1E7@EXCHANGE2007.signmgmt.local>
References: <AMECLHDNIHHAAJMPDEIOGEDOCEAA.claespeter@home.se>
	<AANLkTikha6ryGnkusiBp3oeGTnai-xBTyig7-Yx08wwy@mail.gmail.com>
	<4C841774.7060407@gmail.com>
	<80A5CDD2686EA042AE41C526324D44558EF2DAD1E7@EXCHANGE2007.signmgmt.local>
Message-ID: <AANLkTim-VnJWbgdH3wd+AFFvhZVew+8XJhrNFLO0T9X7@mail.gmail.com>

Awesome thanks.



On Tue, Sep 7, 2010 at 7:58 AM, Kevin Carroll <kcarroll at signmgmt.com> wrote:

> I have been using Sam Harwell's CSharp3 target (ANTLR 3.2) for some time,
> and filter mode works for me.  The version I am using came from the link in
> the following post from Sam on 6/23/2010 (Titled - Runtime Library of v 3.2
> for C#):
>
> -------------------------
> The CSharp3 target should support the ANTLR 3.2 features. There are a few
> known issues, such as the fact that the method generated for the bottomUp
> and topDown rules doesn't match the name expected by the current CSharp3
> runtime (BottomUp and TopDown), so you have to manually override the
> BottomUp and TopDown methods to call bottomUp and topDown instead.
>
> To use the CSharp3 target, you'll need to generate your grammar using the
> C# port of the ANTLR tool (Antlr3.exe). The binaries for the tool and the
> CSharp3 runtime can be found here:
> http://www.280z28.org/downloads/antlr/antlr-dotnet-binaries-3.2.0.6805.7z
>
> Thanks,
> Sam
> -------------------------
> Kevin Carroll
>
>
> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:
> antlr-interest-bounces at antlr.org] On Behalf Of Natan
> Sent: Sunday, September 05, 2010 5:20 PM
> To: antlr-interest at antlr.org
> Subject: Re: [antlr-interest] Filter mode and C#
>
>  You are not alone. Has been almost 1 year since 3.2 has been release,
> and I'm still hoping to use those new features.
> You may be able to find some old posts with preview builds, but not
> access to the source. Not sure what is wrong with the C# port... looks
> like its abandoned.
>
> On 5/9/2010 19:10, Gareth Cox wrote:
> > Hey Peter,
> >
> > I'm basically trying to do the same thing.  Google search showed that
> antlr
> > 3.2 supports filter mode and the c# build is only 3.1.  Apparently if you
> > get the top of the source tree there is a work in progress version.
> > Unfortunately I've been unable to do that from the antlr website.
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>

From asicaddress at gmail.com  Tue Sep  7 11:22:25 2010
From: asicaddress at gmail.com (A Z)
Date: Tue, 7 Sep 2010 12:22:25 -0600
Subject: [antlr-interest] Handling range-limited tokens
Message-ID: <AANLkTimRNeKemF+UcSzsBZ6J8R7-WrtjhC-nnUjBPmgT@mail.gmail.com>

Hello all,

  The grammar I am trying to implement has many cases where the terminals
are special cases of identifiers. Below is an excerpt from the EBNF.

seq_input_list ::= level_input_list | edge_input_list
level_input_list ::= level_symbol { level_symbol }
edge_input_list ::= { level_symbol } edge_indicator { level_symbol }
edge_indicator ::= ( level_symbol level_symbol ) | edge_symbol
current_state ::= level_symbol
next_state ::= output_symbol | -
output_symbol ::= 0 | 1 | x | X
level_symbol ::= 0 | 1 | x | X | ? | b | B
edge_symbol ::= r | R | f | F | p | P | n | N | *

simple_identifier ::= [ a-zA-Z_ ] { [ a-zA-Z0-9_$ ] }

My ANTLR grammar is coded like this

edge_input_list :
    level_symbol* edge_indicator level_symbol*;

edge_indicator :
    LPARAN level_symbol level_symbol RPARAN
  | edge_symbol;

current_state :
    level_symbol;

next_state :
    output_symbol
  | MINUS;

output_symbol :
    BINNUM; // 0 | 1 | x | X

level_symbol :
    BINNUM
  | SIMPLE_IDENT; // 0 | 1 | x | X | ? | b | B

edge_symbol :
    ASTERISK
  | SIMPLE_IDENT; // r | R | f | F | p | P | n | N | *

I now have a problem where ANTLR can't resolve level_symbol* in rule
edge_input_list because both level_symbol and edge_indicator(through
edge_symbol) resolve to a SIMPLE_IDENT token. However you'll notice the
actual characters allowed are unique for each terminal. What is the best way
to handle this?
  Originally I had separate tokens for each of the characters and made
simple_ident a parser rule as follows:

ANYCASER : 'r' | 'R';
ANYCASEB : 'b' | 'B';
SIMPLE_IDENT : (Alpha | '_') ('0'..'9' | 'a'..'z' | 'A'..'Z' | '_' | '$')*;

simple_identifier : SIMPLE_IDENT | ANYCASEB | ANYCASER | ...;

This works but quickly becomes unwieldy as there are other places in the
grammar that have similar situations using overlapping character sets.

Thanks

From l10n.moz at googlemail.com  Tue Sep  7 11:57:31 2010
From: l10n.moz at googlemail.com (Axel Hecht)
Date: Tue, 7 Sep 2010 20:57:31 +0200
Subject: [antlr-interest] Trying antlr for python/javascript targets,
	bad timing?
Message-ID: <AANLkTi=SRGRVtNgoKoB_3MZnS3PnAPtLYYLEqWZrs1KS@mail.gmail.com>

Hi all,

quick intro, I'm Axel Hecht, and I work on l10n infrastructure at Mozilla.

I'm looking into antlr for parsing a new l10n file format we're working on,
and we're looking for parsers in both JavaScript and Python.

I'm struggling finding a good starting point right now:

- 3.2.1 has broken JS support, and there's no python runtime for it.
- fisheye is down
- github is rather busted, version numbers don't match, code removal of
imports etc.
- hudson is offline
- 3.2.1 isn't tagged on github, so there's no obvious branch point, if I
ignored for a moment that JS is busted there.

So, am I sneaking in on this in a bad timing? Any recommendations on where
to focus my efforts?

Thanks

Axel

From jimi at temporal-wave.com  Tue Sep  7 12:15:53 2010
From: jimi at temporal-wave.com (Jim Idle)
Date: Tue, 7 Sep 2010 12:15:53 -0700
Subject: [antlr-interest] Trying antlr for python/javascript targets,
	bad timing?
In-Reply-To: <AANLkTi=SRGRVtNgoKoB_3MZnS3PnAPtLYYLEqWZrs1KS@mail.gmail.com>
References: <AANLkTi=SRGRVtNgoKoB_3MZnS3PnAPtLYYLEqWZrs1KS@mail.gmail.com>
Message-ID: <01df01cb4ec1$1752d430$45f87c90$@temporal-wave.com>

Axel,

As far as I can tell, both the Python and Javascript targets have been
abandoned by their original authors. Some people seem to have had some
limited success with Python in earlier versions of ANLTR, but I am loathe to
promote it to you as I don't use Python. If you must have parsers in those
languages, then it might be better to hand craft them; unless your input is
more complicated than your use case implies?

Jim

> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of Axel Hecht
> Sent: Tuesday, September 07, 2010 11:58 AM
> To: antlr-interest at antlr.org
> Subject: [antlr-interest] Trying antlr for python/javascript targets, bad
> timing?
> 
> Hi all,
> 
> quick intro, I'm Axel Hecht, and I work on l10n infrastructure at Mozilla.
> 
> I'm looking into antlr for parsing a new l10n file format we're working
on, and
> we're looking for parsers in both JavaScript and Python.
> 
> I'm struggling finding a good starting point right now:
> 
> - 3.2.1 has broken JS support, and there's no python runtime for it.
> - fisheye is down
> - github is rather busted, version numbers don't match, code removal of
> imports etc.
> - hudson is offline
> - 3.2.1 isn't tagged on github, so there's no obvious branch point, if I
ignored
> for a moment that JS is busted there.
> 
> So, am I sneaking in on this in a bad timing? Any recommendations on where
> to focus my efforts?
> 
> Thanks
> 
> Axel
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
> email-address


From kenneth.domino at domemtech.com  Tue Sep  7 12:22:58 2010
From: kenneth.domino at domemtech.com (Kenneth Domino)
Date: Tue, 7 Sep 2010 15:22:58 -0400
Subject: [antlr-interest] getText() of C runtime.
Message-ID: <D947DE9B614C4B129D0A14B4E2A76765@KenPC2010>

Hi All,

I'm using the C runtime of an Antlr-generated parser.  I noticed a huge 
memory leak in my code,
but it turns out it's because I call function getText() (def'ed in 
antlr3commontoken.c of the Antlr C runtime)
quite a bit, on tree nodes during my hand-coded tree walking interpreter. 
Apparently, getText() creates
a new copy of the string every time. Eg:

pANTLR3_BASE_TREE node = ...;
char * text = node->getText(node);
char * text2 = node->getText(node); // text2 is another malloc'ed buffer 
containing the same string for node.

However, if you read the source code, it obviously intends to do some 
memoizing, because it takes into
consideration "token->textState", where the previous value computed is 
returned for
ANTLR3_TEXT_STRING.  I can, of course, and probably will, create a string 
table wrapper for getText().
But I'm wondering if anyone knows if there is some way of hooking into this 
part of the API so that
that I don't have to.

Ken

The source for the runtime function is:

static  pANTLR3_STRING  getText         (pANTLR3_COMMON_TOKEN token)
{
    switch (token->textState)
    {
        case ANTLR3_TEXT_STRING:

            // Someone already created a string for this token, so we just
            // use it.
            //
            return  token->tokText.text;
            break;

        case ANTLR3_TEXT_CHARP:

            // We had a straight text pointer installed, now we
            // must convert it to a string. Note we have to do this here
            // or otherwise setText8() will just install the same char*
            //
            if  (token->strFactory != NULL)
            {
                token->tokText.text = 
token->strFactory->newStr8(token->strFactory, 
(pANTLR3_UINT8)token->tokText.chars);
                token->textState    = ANTLR3_TEXT_STRING;
                return token->tokText.text;
            }
            else
            {
                // We cannot do anything here
                //
                return NULL;
            }
            break;

        default:

            // EOF is a special case
            //
            if (token->type == ANTLR3_TOKEN_EOF)
            {
                token->tokText.text = 
token->strFactory->newStr8(token->strFactory, (pANTLR3_UINT8)"<EOF>");
                token->textState    = ANTLR3_TEXT_STRING;
                return token->tokText.text;
            }


            // We had nothing installed in the token, create a new string
            // from the input stream
            //

            if  (token->input != NULL)
            {

////////////////////// The following code does a malloc/string copy every 
time I call getText. //////////
                return  token->input->substr(   token->input,
                                                token->getStartIndex(token),
                                                token->getStopIndex(token)
                                            );
            }

            // Nothing to return, there is no input stream
            //
            return NULL;
            break;
    }
}




From jimi at temporal-wave.com  Tue Sep  7 12:38:12 2010
From: jimi at temporal-wave.com (Jim Idle)
Date: Tue, 7 Sep 2010 12:38:12 -0700
Subject: [antlr-interest] getText() of C runtime.
In-Reply-To: <D947DE9B614C4B129D0A14B4E2A76765@KenPC2010>
References: <D947DE9B614C4B129D0A14B4E2A76765@KenPC2010>
Message-ID: <01e101cb4ec4$35175830$9f460890$@temporal-wave.com>

Please consult markmail.antlr.org, where I answer this question numerous
times ;-), the documentation of the API, or the code. I am contemplating
just getting rid of it and having C programmers just use the token to build
the string in whatever way they want.

The STRING stuff is meant as an aide and is not useful if you want to parse
lots of things. Also, it is not a leak as it auto tracks the memory and
releases it when you free the tree walker. It is basically the support for
$text. It gets a new copy at each reference because I cannot know what you
did with the last copy. So, you must store the pointer if you want to reuse
it.

However, if you want something more efficient, then you must use the token
struct directly, which will give you pointers directly to the text in the
input. The demo C parser in the downloadable examples shows some
manipulation of this, but it is just a pointer to the start of the text and
a pointer to the end of the text. Assuming that you know the encoding of
your input, then you have everything you need. If you are not manipulating
the text, then you can use it directly without copying it, as in the
downloadable examples.

Jim

> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of Kenneth Domino
> Sent: Tuesday, September 07, 2010 12:23 PM
> To: antlr-interest at antlr.org
> Subject: [antlr-interest] getText() of C runtime.
> 
> Hi All,
> 
> I'm using the C runtime of an Antlr-generated parser.  I noticed a huge
> memory leak in my code, but it turns out it's because I call function
getText()
> (def'ed in antlr3commontoken.c of the Antlr C runtime) quite a bit, on
tree
> nodes during my hand-coded tree walking interpreter.
> Apparently, getText() creates
> a new copy of the string every time. Eg:
> 
> pANTLR3_BASE_TREE node = ...;
> char * text = node->getText(node);
> char * text2 = node->getText(node); // text2 is another malloc'ed buffer
> containing the same string for node.
> 
> However, if you read the source code, it obviously intends to do some
> memoizing, because it takes into consideration "token->textState", where
> the previous value computed is returned for ANTLR3_TEXT_STRING.  I can, of
> course, and probably will, create a string table wrapper for getText().
> But I'm wondering if anyone knows if there is some way of hooking into
this
> part of the API so that that I don't have to.
> 
> Ken
> 
> The source for the runtime function is:
> 
> static  pANTLR3_STRING  getText         (pANTLR3_COMMON_TOKEN token)
> {
>     switch (token->textState)
>     {
>         case ANTLR3_TEXT_STRING:
> 
>             // Someone already created a string for this token, so we just
>             // use it.
>             //
>             return  token->tokText.text;
>             break;
> 
>         case ANTLR3_TEXT_CHARP:
> 
>             // We had a straight text pointer installed, now we
>             // must convert it to a string. Note we have to do this here
>             // or otherwise setText8() will just install the same char*
>             //
>             if  (token->strFactory != NULL)
>             {
>                 token->tokText.text =
> token->strFactory->newStr8(token->strFactory,
> (pANTLR3_UINT8)token->tokText.chars);
>                 token->textState    = ANTLR3_TEXT_STRING;
>                 return token->tokText.text;
>             }
>             else
>             {
>                 // We cannot do anything here
>                 //
>                 return NULL;
>             }
>             break;
> 
>         default:
> 
>             // EOF is a special case
>             //
>             if (token->type == ANTLR3_TOKEN_EOF)
>             {
>                 token->tokText.text =
> token->strFactory->newStr8(token->strFactory, (pANTLR3_UINT8)"<EOF>");
>                 token->textState    = ANTLR3_TEXT_STRING;
>                 return token->tokText.text;
>             }
> 
> 
>             // We had nothing installed in the token, create a new string
>             // from the input stream
>             //
> 
>             if  (token->input != NULL)
>             {
> 
> ////////////////////// The following code does a malloc/string copy every
> time I call getText. //////////
>                 return  token->input->substr(   token->input,
>
token->getStartIndex(token),
>                                                 token->getStopIndex(token)
>                                             );
>             }
> 
>             // Nothing to return, there is no input stream
>             //
>             return NULL;
>             break;
>     }
> }
> 
> 
> 
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
> email-address


From jimi at temporal-wave.com  Tue Sep  7 12:40:33 2010
From: jimi at temporal-wave.com (Jim Idle)
Date: Tue, 7 Sep 2010 12:40:33 -0700
Subject: [antlr-interest] getText() of C runtime.
In-Reply-To: <01e101cb4ec4$35175830$9f460890$@temporal-wave.com>
References: <D947DE9B614C4B129D0A14B4E2A76765@KenPC2010>
	<01e101cb4ec4$35175830$9f460890$@temporal-wave.com>
Message-ID: <01e301cb4ec4$89555aa0$9c000fe0$@temporal-wave.com>

Sorry, that is antlr.markmail.org 

Jim

> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of Jim Idle
> Sent: Tuesday, September 07, 2010 12:38 PM
> To: antlr-interest at antlr.org
> Subject: Re: [antlr-interest] getText() of C runtime.
> 
> Please consult markmail.antlr.org, where I answer this question numerous
> times ;-), the documentation of the API, or the code. I am contemplating
just
> getting rid of it and having C programmers just use the token to build the
> string in whatever way they want.
> 
> The STRING stuff is meant as an aide and is not useful if you want to
parse
> lots of things. Also, it is not a leak as it auto tracks the memory and
releases it
> when you free the tree walker. It is basically the support for $text. It
gets a
> new copy at each reference because I cannot know what you did with the
> last copy. So, you must store the pointer if you want to reuse it.
> 
> However, if you want something more efficient, then you must use the
> token struct directly, which will give you pointers directly to the text
in the
> input. The demo C parser in the downloadable examples shows some
> manipulation of this, but it is just a pointer to the start of the text
and a
> pointer to the end of the text. Assuming that you know the encoding of
your
> input, then you have everything you need. If you are not manipulating the
> text, then you can use it directly without copying it, as in the
downloadable
> examples.
> 
> Jim
> 
> > -----Original Message-----
> > From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> > bounces at antlr.org] On Behalf Of Kenneth Domino
> > Sent: Tuesday, September 07, 2010 12:23 PM
> > To: antlr-interest at antlr.org
> > Subject: [antlr-interest] getText() of C runtime.
> >
> > Hi All,
> >
> > I'm using the C runtime of an Antlr-generated parser.  I noticed a
> > huge memory leak in my code, but it turns out it's because I call
> > function
> getText()
> > (def'ed in antlr3commontoken.c of the Antlr C runtime) quite a bit, on
> tree
> > nodes during my hand-coded tree walking interpreter.
> > Apparently, getText() creates
> > a new copy of the string every time. Eg:
> >
> > pANTLR3_BASE_TREE node = ...;
> > char * text = node->getText(node);
> > char * text2 = node->getText(node); // text2 is another malloc'ed
> > buffer containing the same string for node.
> >
> > However, if you read the source code, it obviously intends to do some
> > memoizing, because it takes into consideration "token->textState",
> > where the previous value computed is returned for ANTLR3_TEXT_STRING.
> > I can, of course, and probably will, create a string table wrapper for
> getText().
> > But I'm wondering if anyone knows if there is some way of hooking into
> this
> > part of the API so that that I don't have to.
> >
> > Ken
> >
> > The source for the runtime function is:
> >
> > static  pANTLR3_STRING  getText         (pANTLR3_COMMON_TOKEN token)
> > {
> >     switch (token->textState)
> >     {
> >         case ANTLR3_TEXT_STRING:
> >
> >             // Someone already created a string for this token, so we
just
> >             // use it.
> >             //
> >             return  token->tokText.text;
> >             break;
> >
> >         case ANTLR3_TEXT_CHARP:
> >
> >             // We had a straight text pointer installed, now we
> >             // must convert it to a string. Note we have to do this here
> >             // or otherwise setText8() will just install the same char*
> >             //
> >             if  (token->strFactory != NULL)
> >             {
> >                 token->tokText.text =
> > token->strFactory->newStr8(token->strFactory,
> > (pANTLR3_UINT8)token->tokText.chars);
> >                 token->textState    = ANTLR3_TEXT_STRING;
> >                 return token->tokText.text;
> >             }
> >             else
> >             {
> >                 // We cannot do anything here
> >                 //
> >                 return NULL;
> >             }
> >             break;
> >
> >         default:
> >
> >             // EOF is a special case
> >             //
> >             if (token->type == ANTLR3_TOKEN_EOF)
> >             {
> >                 token->tokText.text =
> > token->strFactory->newStr8(token->strFactory,
> (pANTLR3_UINT8)"<EOF>");
> >                 token->textState    = ANTLR3_TEXT_STRING;
> >                 return token->tokText.text;
> >             }
> >
> >
> >             // We had nothing installed in the token, create a new
string
> >             // from the input stream
> >             //
> >
> >             if  (token->input != NULL)
> >             {
> >
> > ////////////////////// The following code does a malloc/string copy
> > every time I call getText. //////////
> >                 return  token->input->substr(   token->input,
> >
> token->getStartIndex(token),
> >
token->getStopIndex(token)
> >                                             );
> >             }
> >
> >             // Nothing to return, there is no input stream
> >             //
> >             return NULL;
> >             break;
> >     }
> > }
> >
> >
> >
> >
> > List: http://www.antlr.org/mailman/listinfo/antlr-interest
> > Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
> > email-address
> 
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
> email-address


From l10n.moz at googlemail.com  Tue Sep  7 15:04:47 2010
From: l10n.moz at googlemail.com (Axel Hecht)
Date: Wed, 8 Sep 2010 00:04:47 +0200
Subject: [antlr-interest] Trying antlr for python/javascript targets,
	bad timing?
In-Reply-To: <01df01cb4ec1$1752d430$45f87c90$@temporal-wave.com>
References: <AANLkTi=SRGRVtNgoKoB_3MZnS3PnAPtLYYLEqWZrs1KS@mail.gmail.com>
	<01df01cb4ec1$1752d430$45f87c90$@temporal-wave.com>
Message-ID: <AANLkTimSS72bBY56KJQVSJN8SUpzE6aQdL78saPrc-L7@mail.gmail.com>

My use-case is somewhat involved in that we're changing l10n paradigms,
moving towards a declarative programming language. The overall structure is
simple, but it does end up with a templating language with expressions and
filters. We want to be able to do some level of static analysis on those
"programs" to make sure that references from one localized string to another
work, and the type definitions within that programming language depend on
the human language. I.e., a noun in English is different to a noun in
Polish.

And of course, the details of the underlying grammar are not laid in stone
at this point.

The goal is to take source code in what we call 'lol files' and turn them
into js code that is then read and runtime and used as state machine to
generate the final localized strings.

Further reading is at https://wiki.mozilla.org/L20n. The grammar is a tad
simpler at places, and a tad more complex at others than the one at
http://people.mozilla.com/~axel/l20n/grammar.html.

So, we're not really simple in both the input, the output, and the
processing requirements, and I'd love to be able to not reinvent wheels.
That said, I've forgotten most of what I ever knew about java, and never did
any real work. I'm a python toolchain guy for the most part these days, with
some js.

Axel

2010/9/7 Jim Idle <jimi at temporal-wave.com>

> Axel,
>
> As far as I can tell, both the Python and Javascript targets have been
> abandoned by their original authors. Some people seem to have had some
> limited success with Python in earlier versions of ANLTR, but I am loathe
> to
> promote it to you as I don't use Python. If you must have parsers in those
> languages, then it might be better to hand craft them; unless your input is
> more complicated than your use case implies?
>
> Jim
>
> > -----Original Message-----
> > From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> > bounces at antlr.org] On Behalf Of Axel Hecht
> > Sent: Tuesday, September 07, 2010 11:58 AM
> > To: antlr-interest at antlr.org
> > Subject: [antlr-interest] Trying antlr for python/javascript targets, bad
> > timing?
> >
> > Hi all,
> >
> > quick intro, I'm Axel Hecht, and I work on l10n infrastructure at
> Mozilla.
> >
> > I'm looking into antlr for parsing a new l10n file format we're working
> on, and
> > we're looking for parsers in both JavaScript and Python.
> >
> > I'm struggling finding a good starting point right now:
> >
> > - 3.2.1 has broken JS support, and there's no python runtime for it.
> > - fisheye is down
> > - github is rather busted, version numbers don't match, code removal of
> > imports etc.
> > - hudson is offline
> > - 3.2.1 isn't tagged on github, so there's no obvious branch point, if I
> ignored
> > for a moment that JS is busted there.
> >
> > So, am I sneaking in on this in a bad timing? Any recommendations on
> where
> > to focus my efforts?
> >
> > Thanks
> >
> > Axel
> >
> > List: http://www.antlr.org/mailman/listinfo/antlr-interest
> > Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
> > email-address
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>

From JALuber at gmx.de  Tue Sep  7 23:59:02 2010
From: JALuber at gmx.de (Johannes Luber)
Date: Wed, 08 Sep 2010 08:59:02 +0200
Subject: [antlr-interest] Filter mode and C#
In-Reply-To: <4C841774.7060407@gmail.com>
References: <AMECLHDNIHHAAJMPDEIOGEDOCEAA.claespeter@home.se>
	<AANLkTikha6ryGnkusiBp3oeGTnai-xBTyig7-Yx08wwy@mail.gmail.com>
	<4C841774.7060407@gmail.com>
Message-ID: <20100908065902.37520@gmx.net>

>   You are not alone. Has been almost 1 year since 3.2 has been release, 
> and I'm still hoping to use those new features.
> You may be able to find some old posts with preview builds, but not 
> access to the source. Not sure what is wrong with the C# port... looks 
> like its abandoned.

Hi,

I haven't abandoned the C# target, just being busy with work stuff. In fact, the current version in repo is nearly in sync with ANTLR 3.3. The only problem which prevents me right now to make an official beta is that my build process is broken and I haven't figured out how to repair this. Without build process I can't test if my templates still need some updates and I don't like to release software which is possible broken from the beginning.

For build process bug search purposes I wouldn't mind to send out my workingspace as it is. Need to find out where the problem actually is - the build scripts or my maven installation.

Johannes
> 
> On 5/9/2010 19:10, Gareth Cox wrote:
> > Hey Peter,
> >
> > I'm basically trying to do the same thing.  Google search showed that
> antlr
> > 3.2 supports filter mode and the c# build is only 3.1.  Apparently if
> you
> > get the top of the source tree there is a work in progress version.
> > Unfortunately I've been unable to do that from the antlr website.
> 
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address

-- 
GMX DSL SOMMER-SPECIAL: Surf & Phone Flat 16.000 f?r nur 19,99 Euro/mtl.!*
http://portal.gmx.net/de/go/dsl

From rhann at rationalcommerce.com  Wed Sep  8 03:34:10 2010
From: rhann at rationalcommerce.com (rhann at rationalcommerce.com)
Date: Wed, 8 Sep 2010 11:34:10 +0100
Subject: [antlr-interest] Using composite grammars
Message-ID: <1409154139.20100908113410@rationalcommerce.com>

I seem to be making an elementary blunder with composite grammars.

Can anyone point out documentation describing the use of composite
grammars in more detail than is found in the wiki article?  I'm
getting this:

[10:48:39] error(161): dbSQL.g:14:8: combined grammar dbSQL cannot import combined grammar dbDML
[10:48:39] error(100): dbSQL.g:15:1: syntax error: antlr: dbSQL.g:15:1: unexpected token: import
[10:48:39] error(150):  grammar file dbSQL.g has no rules

Roy



From jimi at temporal-wave.com  Wed Sep  8 08:27:04 2010
From: jimi at temporal-wave.com (Jim Idle)
Date: Wed, 8 Sep 2010 08:27:04 -0700
Subject: [antlr-interest] Using composite grammars
In-Reply-To: <1409154139.20100908113410@rationalcommerce.com>
References: <1409154139.20100908113410@rationalcommerce.com>
Message-ID: <028601cb4f6a$4ac12250$e04366f0$@temporal-wave.com>

It is likely that your import statement is in the wrong order with respect
to options {} and @lexer:: etc. Just move it around until it works. Also the
syntax is one import command with a comma separated list of the grammars to
import.

Jim

> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of rhann at rationalcommerce.com
> Sent: Wednesday, September 08, 2010 3:34 AM
> To: antlr-interest at antlr.org
> Subject: [antlr-interest] Using composite grammars
> 
> I seem to be making an elementary blunder with composite grammars.
> 
> Can anyone point out documentation describing the use of composite
> grammars in more detail than is found in the wiki article?  I'm getting
this:
> 
> [10:48:39] error(161): dbSQL.g:14:8: combined grammar dbSQL cannot import
> combined grammar dbDML [10:48:39] error(100): dbSQL.g:15:1: syntax error:
> antlr: dbSQL.g:15:1: unexpected token: import [10:48:39] error(150):
> grammar file dbSQL.g has no rules
> 
> Roy
> 
> 
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
> email-address


From brownrig at ucar.edu  Wed Sep  8 13:20:04 2010
From: brownrig at ucar.edu (Rick Brownrigg)
Date: Wed, 08 Sep 2010 14:20:04 -0600
Subject: [antlr-interest] Trying antlr for python/javascript targets,
	bad timing?
Message-ID: <web-31873334@mail.ucar.edu>

Is the issue with Python simply a matter of care and feeding, or is 
there substantial work required to bring the runtime up to date?  (And 
it was never clear to me whether or not StringTemplates were 
supported?).  The combo of Antlr/Python is potentially quite useful to 
us, and I might consider volunteering for the support role. However, I 
don't think I could manage if the runtime is in bad shape -- I'm still 
wrestling with Antlr itself.

Rick

From wsu_techie at yahoo.com  Wed Sep  8 17:38:42 2010
From: wsu_techie at yahoo.com (J W)
Date: Wed, 8 Sep 2010 17:38:42 -0700 (PDT)
Subject: [antlr-interest] Java Heap Out of Memory exception
Message-ID: <498940.70355.qm@web111410.mail.gq1.yahoo.com>

Hopefully someone can help me figure out my issue.? I have a fairly 
simple grammar.? If I verify my script using CommonTokenStream, I 
receive a Java heap out of memory exception.? However, if I use the 
ANTLR plugin to test with the same value, I do not receive the exception
 and I see the NoViableAlt exception as expected.

Here is the block I'm verifying:

Action Group 3 Needs Attention
?? BranchHours
?? Contact A Branch
????? Call 1, Ack=Contact, NoConnect=Contact
?? EndContact
EndAction

There are two errors with the script above.? The first is the Needs Attention text after Action Group 3.? The second is the Branch text after Contact A.? These were values entered during negative testing that caused the out of memory exception.? Yet, if I copy and paste this script into the Eclipse ANTLR interpreter and verify I see the NoViableAltException I'm expecting.

Below is the code used to verify the script:
??? ??? CharStream charStream = new ANTLRStringStream(script.getScriptText());
??? ??? CallingScriptLexer lexer = new CallingScriptLexer(charStream);
??? ??? TokenStream tokenStream = new CommonTokenStream(lexer);
??? ??? CallingScriptParser parser = new CallingScriptParser(tokenStream);
??? ??? VerifiedScriptResponse response = new VerifiedScriptResponse(script);
??? ??? 
??? ??? try
??? ??? {
??? ??? ??? parser.callingScript();
??? ??? ??? if (!parser.success) {
??? ??? ??? ??? response.setValid(false);
??? ??? ??? ??? response.setValidationErrors((ValidationError[])parser.errors.toArray(new ValidationError[0]));??? ??? ??? ??? 
??? ??? ??? } else {
??? ??? ??? ??? response.setValid(true);
??? ??? ??? }
??? ??? }
??? ??? catch (RecognitionException regExc)
??? ??? {
??? ??? ??? response.setValid(false);
??? ??? ??? ValidationError[] parseException = new ValidationError[1];
??? ??? ??? parseException[0].setDescription(regExc.getMessage());
??? ??? ??? parseException[0].setLineNumber(regExc.line);
??? ??? ??? parseException[0].setCharacterPosition(regExc.charPositionInLine);
??? ??? ??? parseException[0].setExcerpt(regExc.getCause().getMessage());
??? ??? ??? response.setValidationErrors(parseException);
??? ??? }
??? ??? catch (Exception exc)
??? ??? {
??? ??? ??? response.setValid(false);
??? ??? ??? ValidationError[] parseException = new ValidationError[1];??? ??? ??? 
??? ??? ??? parseException[0].setDescription(exc.getMessage());
??? ??? ??? response.setValidationErrors(parseException);
??? ??? }
??? ??? 
??? ??? return response;
?

And finally the grammar is below.? Any help would be greatly appreciated.

grammar CallingScript;

options {
? language = Java;
}

@header {
??? package com.ncr.project24.scriptlanguagebusiness.server.antlr.antlrgenerated;
???? import com.ncr.project24.scriptlanguagebusiness.server.antlr.evaluators.*;
???? import com.ncr.project24.iincidentdata.dto.server.script.*; ??? 
????
 import java.util.Vector;
}

@lexer::header {
???? package com.ncr.project24.scriptlanguagebusiness.server.antlr.antlrgenerated;
???? import com.ncr.project24.scriptlanguagebusiness.server.antlr.evaluators.*;
???? import com.ncr.project24.iincidentdata.dto.server.script.*; ??? 
???? import java.util.Vector; ??? 
}

@members {
??? public boolean success = true;
??? public Vector<ValidationError> errors = new Vector<ValidationError>();
??? 
??? protected void AddError(RecognitionException exc)
??? {
??? ??? success = false;
??? ??? String[] tokenNames = this.getTokenNames();
??? ??? String errorMessage =
 this.getErrorMessage(exc, tokenNames);
??? ??? 
??? ??? ValidationError _valError = new ValidationError(); 
??? ??? _valError.setDescription(errorMessage);
??? ??? errors.add(_valError);??? ??? 
??? }
??? 
??? protected void Evaluate(Evaluator eval, int line, int pos, String text)
??? {
??? ??? try
??? ??? {
??? ??? ??? ValidationError _valError = eval.evaluate();
??? ??? ??? String _errDescription = _valError.getDescription();
??? ??? ? ??? if (_errDescription.length() > 0) {
???
 ??? ? ??? ??? success = false;
??? ??? ? ??? ??? _valError.setLineNumber(line);
??? ??? ? ??? ??? _valError.setCharacterPosition(pos);
??? ??? ? ??? ??? _valError.setExcerpt(text);
??? ??? ? ??? ??? errors.add(_valError);
??? ??? ? ??? }??? ??? 
??? ??? }
??? ??? catch (Exception exc)
??? ??? {
??? ??? ??? success = false;
??? ??? ??? ValidationError _valError =
 new ValidationError();
??? ??? ??? _valError.setDescription(exc.getMessage());
??? ??? ??? errors.add(_valError);
??? ??? }
??? }
}??? 
callingScript
??? :??? actionGroupBlock+
??? ;
??? catch [RecognitionException ex] {
??? ??? AddError(ex);??? ?
??? }

actionGroupBlock
??? :??? ACTION GROUP INTEGER??? ??? ??? 
??? ??? ??? hoursStatement+ 
??? ??? ??? contactBlock+
??? ??? ENDACTION
??? ;
??? catch
 [RecognitionException ex] {
??? ??? AddError(ex);??? ?
??? }
??? 
contactBlock
??? :??? CONTACT NUMIDENT
??? ??? ??? callStatement+
??? ??? ENDCONTACT
??? ;
??? catch [RecognitionException ex] {
??? ??? AddError(ex); 
??? }
??? 
callStatement
???
 :??? CALL i1=INTEGER ((',' ACK '=' CONTACT ',' NOCONNECT '=' 
CONTACT)|(',' ACK '=' t1=(INTEGERPIPETIME | TIME | TIMETICKS) ',' 
NOCONNECT '=' t2=(INTEGERPIPETIME | TIME | TIMETICKS)))?
??? ??? {
??? ??? ??? Evaluator eval = new TimeTicksEvaluator($t1.text);
???
 ??? ??? Evaluate(eval, $t1.line, $t1.pos, $t1.text);
??? ??? ? ??? eval = new TimeTicksEvaluator($t2.text);
??? ??? ??? Evaluate(eval, $t2.line, $t2.pos, $t2.text);
??? ??? ??? eval = new CallStatementEvaluator($i1.text);
??? ??? ??? Evaluate(eval, $i1.line, $i1.pos, $i1.text); 
??? ??? }
??? ;
??? catch [RecognitionException ex] {
??? ??? AddError(ex);??? ?
??? }
??? ??? 
hoursStatement
??? :??? BRANCHHOURS
??? |??? AFTERHOURS
??? |???
 OTHERHOURS
??? |??? PEAKHOURS
??? |??? OFFPEAKHOURS
??? |??? hoursRange
??? |??? hoursHoliday??? ??? 
??? ;
??? catch [RecognitionException ex] {
??? ??? AddError(ex);??? ?
??? }
??? ??? 
hoursRange
??? :??? HOURSLITERAL dayRange '('t1=TIME '-' t2=TIME ')'
??? ??? {
??? ??? ??? Evaluator eval = new TimeEvaluator($t1.text);
??? ??? ??? Evaluate(eval, $t1.line, $t1.pos, $t1.text);
??? ??? ??? eval = new TimeEvaluator($t2.text);
???
 ??? ??? Evaluate(eval, $t2.line, $t2.pos, $t2.text);
??? ??? ??? eval = new TimeRangeEvaluator($t1.text, $t2.text);
??? ??? ??? Evaluate(eval, $t1.line, $t1.pos, $t1.text + '-' + $t2.text);
??? ??? }??? ??? 
??? ;
??? catch [RecognitionException ex] {
??? ??? AddError(ex);??? ?
??? }
??? 
hoursHoliday
??? :??? HOURSLITERAL INTEGER
??? ;
??? catch [RecognitionException ex] {
??? ??? AddError(ex);??? ?
??? }
??? 
numericRange
??? :??? i1=INTEGER ((',' |
 '-') i2=INTEGER)*
??? ??? {
??? ??? ??? Evaluator eval = new ActionCodeEvaluator($i1.text);
??? ??? ??? Evaluate(eval, $i1.line, $i1.pos, $i1.text);
??? ??? ??? 
??? ??? ??? eval = new ActionCodeEvaluator($i2.text);
??? ??? ??? Evaluate(eval, $i2.line, $i2.pos, $i2.text);
??? ??? }
??? ;
??? catch [RecognitionException ex] {
??? ??? AddError(ex);??? ?
??? }
??? ??? 
dayRange
??? :??? DAYIDENT ((',' | '-') DAYIDENT)*
??? ;
??? catch
 [RecognitionException ex] {
??? ??? AddError(ex);??? ?
??? }
??? 
relation
??? : ('=' | '!=' | '<' | '<=' | '>=' | '>')
??? ;
??? catch [RecognitionException ex] {
??? ??? AddError(ex);??? ?
??? }
??? 
AND: ('a' | 'A')('n' | 'N')('d' | 'D');
OR: ('o' | 'O')('r' | 'R');
MATHEMATICAL: (AND | OR | '*' | '/' | '+' | '-');
ACTION: ('a' | 'A')('c' | 'C')('t' | 'T')('i' | 'I')('o' | 'O')('n' | 'N');
GROUP: ('g' | 'G')('r' | 'R')('o' | 'O')('u' | 'U')('p' | 'P');
END: ('e' | 'E')('n' | 'N')('d' | 'D');
ENDACTION: END ACTION;
BRANCH: ('b' | 'B')('r' | 'R')('a' | 'A')('n' | 'N')('c' | 'C')('h' | 'H');
AFTER: ('a' | 'A')('f' | 'F')('t' | 'T')('e' | 'E')('r' | 'R');
OTHER: ('o' | 'O')('t' |
 'T')('h' | 'H')('e' | 'E')('r' | 'R');
PEAK: ('p' | 'P')('e' | 'E')('a' | 'A')('k' | 'K');
OFFPEAK: ('o' | 'O')('f' | 'F')('f' | 'F')PEAK;
HOURSLITERAL: ('h' | 'H')('o' | 'O')('u' | 'U')('r' | 'R')('s' | 'S');
CONTACT: ('c' | 'C')('o' | 'O')('n' | 'N')('t' | 'T')('a' | 'A')('c' | 'C')('t' | 'T');
CALL: ('c' | 'C')('a' | 'A')('l' | 'L')('l' | 'L');
ACK: ('a' | 'A')('c' | 'C')('k' | 'K');
NOCONNECT: ('n' | 'N')('o' | 'O')('c' | 'C')('o' | 'O')('n' | 'N')('n' | 'N')('e' | 'E')('c' | 'C')('t' | 'T');
USE: ('u' | 'U')('s' | 'S')('e' | 'E');
SERVICE: ('s' | 'S')('e' | 'E')('r' | 'R')('v' | 'V')('i' | 'I')('c' | 'C')('e' | 'E');
TIMER: ('t' | 'T')('i' | 'I')('m' | 'M')('e' | 'E')('r' | 'R');
REPEAT: ('r' | 'R')('e' | 'E')('p' | 'P')('e' | 'E')('a' | 'A')('t' | 'T');
WHEN: ('w' | 'W')('h' | 'H')('e' | 'E')('n' | 'N');
ACKED: ('a' | 'A')('c' | 'C')('k' | 'K')('e' | 'E')('d' | 'D');
ARRIVAL: ('a' | 'A')('r' | 'R')('r' |
 'R')('i' | 'I')('v' | 'V')('a' | 'A')('l' | 'L');
ARRIVED: ('a' | 'A')('r' | 'R')('r' | 'R')('i' | 'I')('v' | 'V')('e' | 'E')('d' | 'D');
YES: ('y' | 'Y')('e' | 'E')('s' | 'S');
NO: ('n' | 'N')('o' | 'O');
TRUE: ('t' | 'T')('r' | 'R')('u' | 'U')('e' | 'E');
FALSE: ('f' | 'F')('a' | 'A')('l' | 'L')('s' | 'S')('e' | 'E');
ELAPSED: ('e' | 'E')('l' | 'L')('a' | 'A')('p' | 'P')('s' | 'S')('e' | 'E')('d' | 'D');
CLEAR: ('c' | 'C')('l' | 'L')('e' | 'E')('a' | 'A')('r' | 'R');
CLOSED: ('c' | 'C')('l' | 'L')('o' | 'O')('s' | 'S')('e' | 'E')('d' | 'D');
TICKET: ('t' | 'T')('i' | 'I')('c' | 'C')('k' | 'K')('e' | 'E')('t' | 'T');
CANCEL: ('c' | 'C')('a' | 'A')('n' | 'N')('c' | 'C')('e' | 'E')('l' | 'L');
CHANGE: ('c' | 'C')('h' | 'H')('a' | 'A')('n' | 'N')('g' | 'G')('e' | 'E');
GENERATE: ('g' | 'G')('e' | 'E')('n' | 'N')('e' | 'E')('r' | 'R')('a' | 'A')('t' | 'T')('e' | 'E');
STATUS: ('s' | 'S')('t' | 'T')('a' | 'A')('t' |
 'T')('u' | 'U')('s' | 'S');
CHECK: ('c' | 'C')('h' | 'H')('e' | 'E')('c' | 'C')('k' | 'K');
RESULT: ('r' | 'R')('e' | 'E')('s' | 'S')('u' | 'U')('l' | 'L')('t' | 'T');
IF: ('i' | 'I')('f' | 'F');
ELSE: ('e' | 'E')('l' | 'L')('s' | 'S')('e' | 'E');
DEFERUNTIL: ('d' | 'D')('e' | 'E')('f' | 'F')('e' | 'E')('r' | 'R')('u' | 'U')('n' | 'N')('t' | 'T')('i' | 'I')('l' | 'L');
CONCURRENT: ('c' | 'C')('o' | 'O')('n' | 'N')('c' | 'C')('u' | 'U')('r' | 'R')('r' | 'R')('e' | 'E')('n' | 'N')('t' | 'T');
DISPATCHACTION: ('d' | 'D')('i' | 'I')('s' | 'S')('p' | 'P')('a' | 'A')('t' | 'T')('c' | 'C')('h' | 'H') ACTION;
SITEDISPATCHACTION: ('s' | 'S')('i' | 'I')('t' | 'T')('e' | 'E') '.' DISPATCHACTION;
IN: ('i' | 'I')('n' | 'N');
DONE: ('d' | 'D')('o' | 'O')('n' | 'N')('e' | 'E');
ID: ('i' | 'I')('d' | 'D');
HOLD: ('h' | 'H')('o' | 'O')('l' | 'L')('d' | 'D');
INITIATE: ('i' | 'I')('n' | 'N')('i' | 'I')('t' | 'T')('i' | 'I')('a' |
 'A')('t' | 'T')('e' | 'E');
INFO: ('i' | 'I')('n' | 'N')('f' | 'F')('o' | 'O');
SCRIPT: ('s' | 'S')('c' | 'C')('r' | 'R')('i' | 'I')('p' | 'P')('t' | 'T');
COLOR: ('c' | 'C')('o' | 'O')('l' | 'L')('o' | 'O')('r' | 'R');
WAIT: ('w' | 'W')('a' | 'A')('i' | 'I')('t' | 'T');
REEVALUATE: ('r' | 'R')('e' | 'E')('e' | 'E')('v' | 'V')('a' | 'A')('l' | 'L')('u' | 'U')('a' | 'A')('t' | 'T')('e' | 'E');
DO: ('d' | 'D')('o' | 'O');
COMMAND: ('c' | 'C')('o' | 'O')('m' | 'M')('m' | 'M')('a' | 'A')('n' | 'N')('d' | 'D');
OBJECT: ('o' | 'O')('b' | 'B')('j' | 'J')('e' | 'E')('c' | 'C')('t' | 'T');
COUNTER: ('c' | 'C')('o' | 'O')('u' | 'U')('n' | 'N')('t' | 'T')('e' | 'E')('r' | 'R');
INCREMENT: ('i' | 'I')('n' | 'N')('c' | 'C')('r' | 'R')('e' | 'E')('m' | 'M')('e' | 'E')('n' | 'N')('t' | 'T');
STATE: ('s' | 'S')('t' | 'T')('a' | 'A')('t' | 'T')('e' | 'E');
ACTIVATE: ('a' | 'A')('c' | 'C')('t' | 'T')('i' | 'I')('v' | 'V')('a' |
 'A')('t' | 'T')('e' | 'E');
THRESHOLD: ('t' | 'T')('h' | 'H')('r' | 'R')('e' | 'E')('s' | 'S')('h' | 'H')('o' | 'O')('l' | 'L')('d' | 'D');
DEACTIVATE: ('d' | 'D')('e' | 'E') ACTIVATE;
DECREMENT: ('d' | 'D')('e' | 'E')('c' | 'C')('r' | 'R')('e' | 'E')('m' | 'M')('e' | 'E')('n' | 'N')('t' | 'T');
WITHIN: ('w' | 'W')('i' | 'I')('t' | 'T')('h' | 'H')('i' | 'I')('n' | 'N');

ACTIONGROUP: ACTION GROUP;
ENDIF: END IF;
CHANGESTATUS: CHANGE STATUS;
CANCELSERVICE: CANCEL SERVICE;
INITIATESERVICE: INITIATE SERVICE;
CHECKSTATUS: CHECK STATUS;
CHECKSTATUSRESULT: CHECKSTATUS '.' RESULT;
COMMANDRESULT: COMMAND '.' RESULT;
OBJECTCOUNTER: OBJECT '.' COUNTER;
OBJECTSTATE: OBJECT '.' STATE;
OBJECTTHRESHOLD: OBJECT '.' THRESHOLD;
GENERATESTATUS: GENERATE STATUS;
ENDWHEN: END WHEN;
ENDTIMER: END TIMER;
ENDSERVICE: END SERVICE;
ENDCONTACT: END CONTACT;
BRANCHHOURS: BRANCH HOURSLITERAL;
AFTERHOURS: AFTER
 HOURSLITERAL;
OTHERHOURS: OTHER HOURSLITERAL;
PEAKHOURS: PEAK HOURSLITERAL;
OFFPEAKHOURS: OFFPEAK HOURSLITERAL;
TICKETCOLOR: TICKET '.' COLOR;
TIME: INTEGER ':' INTEGER;
INTEGERPIPETIME: (INTEGER '|')? TIME; 
TIMETICKS: (INTEGER '|')? TIME ('/' INTEGER)?;
ANDOR: (AND | OR)?;

INTEGER : '0'..'9'+ ;
DAYIDENT: 'n' | 'N' | 'm' | 'M' | 't' | 'T' | 'w' | 'W' | 'r' | 'R' | 'f' | 'F' | 's' | 'S';
NUMIDENT: (('0'..'9') | ('A'..'Z') | ('a'..'z') | '*' | '#')+;
WS : (' ' | '\t' | '\n' | '\r' | '\f')+ {$channel = HIDDEN;};
COMMENT : '\'' .* ('\n' | '\r') {$channel = HIDDEN;};


      

From jbb at acm.org  Wed Sep  8 18:16:58 2010
From: jbb at acm.org (John B. Brodie)
Date: Wed, 08 Sep 2010 21:16:58 -0400
Subject: [antlr-interest] Java Heap Out of Memory exception
In-Reply-To: <498940.70355.qm@web111410.mail.gq1.yahoo.com>
References: <498940.70355.qm@web111410.mail.gq1.yahoo.com>
Message-ID: <1283995018.28754.20.camel@gecko.home.org>

Greetings!

I have not fully studied your grammar, but I did notice one *BIG*
problem as noted below.

On Wed, 2010-09-08 at 17:38 -0700, J W wrote:
> Hopefully someone can help me figure out my issue.  I have a fairly 
> simple grammar.  If I verify my script using CommonTokenStream, I 
> receive a Java heap out of memory exception.  However, if I use the 
> ANTLR plugin to test with the same value, I do not receive the exception
>  and I see the NoViableAlt exception as expected.
> 
> Here is the block I'm verifying:
> 
> Action Group 3 Needs Attention
>    BranchHours
>    Contact A Branch
>       Call 1, Ack=Contact, NoConnect=Contact
>    EndContact
> EndAction
> 
> There are two errors with the script above.  The first is the Needs Attention text after Action Group 3.  The second is the Branch text after Contact A.  These were values entered during negative testing that caused the out of memory exception.  Yet, if I copy and paste this script into the Eclipse ANTLR interpreter and verify I see the NoViableAltException I'm expecting.

Your ANDOR lexer rule says that the *EMPTY* string is a valid token!

So when any sequence of characters that are not recognizable is
encountered, the lexer must insert the empty token (ANDOR in this case)
before the erroneous text ----- because you said the empty string is a
valid token. and when we encounter an invalid token we must deliver all
possible valid tokens (the ANDOR empty token in this case) before
announcing the error condition.

I do not see where your grammar is able to tokenize the string "Needs"
and so the above stuff happens.

So this is why you get an out of memory condition. Because there are
infinitely many empty ANDOR tokens in front of the the illegal character
sequence "Needs" ----- because you have said that the empty string is a
valid Token.

and so now why does the ANTLRWorks interpreter do something different? i
do not know, but, well, perhaps, it is because the interpreter does not
do the same thing that the generated code does. I believe this is a well
known problem, search the mail archives on markmail to verify.

Avoid any lexer rule that recognizes the *EMPTY* string.


and as an aside it appears that you are trying to do too much work in
your lexer.....

.....snipped.....
> ANDOR: (AND | OR)?;


Hope this helps...
   -jbb



From rhann at rationalcommerce.com  Thu Sep  9 01:58:34 2010
From: rhann at rationalcommerce.com (rhann at rationalcommerce.com)
Date: Thu, 9 Sep 2010 09:58:34 +0100
Subject: [antlr-interest] Composite grammars and ANTLRWorks
Message-ID: <877274377.20100909095834@rationalcommerce.com>

I continue to struggle with a composite grammar.

Until a couple of days ago I hadn't even heard of composite grammars.
I need to rescue my grammar that has become too big to compile.

Am I making a rod for my own back by trying to use ANTLRWorks now? I
can't get even the trivial example composite grammars from the wiki
page to work in ANTLRWorks (version 1.4).  I have unsuccessfully
tried George Cowan's advice from the wiki comments, but perhaps I am
not understanding him.

Any words of encouragement would be welcome.

Roy



From Andi.Clemens at gmx.net  Thu Sep  9 03:31:01 2010
From: Andi.Clemens at gmx.net (Andi Clemens)
Date: Thu, 09 Sep 2010 12:31:01 +0200
Subject: [antlr-interest] Remote Debug C Target parser
Message-ID: <20100909103101.56300@gmx.net>

Hi,

I try to debug a Parser written for the C-Target.
Since I can not debug it in ANTLworks directly, I wrote a small test app that includes the parser and parses one line:

http://pastebin.com/WzXrvTxr

The parser and lexer have been compiled with the "-debug" option.
I can connect to the port in ANTLworks, but as soon as I click "step forward" in the debugger, my program finishes and the debugger doesn't display anything.

This is the console output I get:

[...]
unknown debug event: location 796 5
unknown debug event: enterRule PLSQL3c.g select_expression
unknown debug event: exitSubRule 153
unknown debug event: location 646 5
unknown debug event: enterRule PLSQL3c.g select_statement
unknown debug event: location 640 5
unknown debug event: enterRule PLSQL3c.g select_command
unknown debug event: location 583 5
unknown debug event: enterRule PLSQL3c.g to_modify_data
unknown debug event: location 574 5
unknown debug event: enterRule PLSQL3c.g sql_command
unknown debug event: location 569 5
unknown debug event: enterRule PLSQL3c.g sql_statement
unknown debug event: location 147 5
unknown debug event: enterRule PLSQL3c.g statement
unknown debug event: location 126 14
unknown debug event: enterSubRule 20
unknown debug event: enterDecision 20
unknown debug event: LT 1 9 4 0 1 22 ";
unknown debug event: LT 2 0 -1 0 1 -1 "<EOF>
unknown debug event: exitDecision 20
unknown debug event: exitSubRule 20
unknown debug event: location 126 32
unknown debug event: enterSubRule 21
unknown debug event: enterDecision 21
unknown debug event: LT 1 9 4 0 1 22 ";
unknown debug event: exitDecision 21
unknown debug event: enterAlt 1
unknown debug event: location 126 32
unknown debug event: LT 1 9 4 0 1 22 ";
unknown debug event: consumeToken 9 4 0 1 22 ";
unknown debug event: exitSubRule 21
unknown debug event: location 126 38
unknown debug event: LT 1 0 -1 0 1 -1 "<EOF>
unknown debug event: consumeToken 0 -1 0 1 -1 "<EOF>
unknown debug event: location 127 2
unknown debug event: enterRule PLSQL3c.g parse_statements
java.net.SocketException: Connection reset
java.net.SocketException: Connection reset
        at java.net.SocketInputStream.read(SocketInputStream.java:168)
        at sun.nio.cs.StreamDecoder.readBytes(StreamDecoder.java:264)
        at sun.nio.cs.StreamDecoder.implRead(StreamDecoder.java:306)
        at sun.nio.cs.StreamDecoder.read(StreamDecoder.java:158)
        at java.io.InputStreamReader.read(InputStreamReader.java:167)
        at java.io.BufferedReader.fill(BufferedReader.java:136)
        at java.io.BufferedReader.readLine(BufferedReader.java:299)
        at java.io.BufferedReader.readLine(BufferedReader.java:362)
        at org.antlr.runtime.debug.RemoteDebugEventSocketListener.eventHandler(R
emoteDebugEventSocketListener.java:178)
        at org.antlr.runtime.debug.RemoteDebugEventSocketListener.run(RemoteDebu
gEventSocketListener.java:472)
        at java.lang.Thread.run(Thread.java:619)


What am I doing wrong?

Andi

-- 
Achtung Sicherheitswarnung: GMX warnt vor Phishing-Attacken!
http://portal.gmx.net/de/go/sicherheitspaket

From Andi.Clemens at gmx.net  Thu Sep  9 05:44:43 2010
From: Andi.Clemens at gmx.net (Andi Clemens)
Date: Thu, 09 Sep 2010 14:44:43 +0200
Subject: [antlr-interest] Tell ANTLR to ignore parsing errors?
Message-ID: <20100909124443.56320@gmx.net>

Hi,

I use this ANTLR grammar file to parse Oracle PL/SQL statements:
http://pastebin.com/uy0wZTax

But some of the statements produce errors when I try to parse them, for example:

"create user u1 identified by p1 account unlock;"

I get the following error message:

==============================
statementString(1)  : error 3 : , at offset -1
    near [Index: 0 (Start: 141054912-Stop: 141054917) ='create', type<50> Line:
1 LinePos:-1]
     : cannot match to any predicted input...
==============================

But why? The rule looks like this:
==============================
create_user_statement
	:	'CREATE' 'USER' identifier 'INDENTIFIED' .*
	;
==============================

Could the wildcard character be the problem?
Actually I just want to parse known Statements with my grammar, all unknown statements (parsing errors) could be ignored.

Can I tell ANTLR (for the C target) to ignore those error messages and just return FALSE or something like that, so that I can decide wether to take an appropiate action?

I get a lot of those error messages, and to be honest, the error messages are not helping me here. I can not see problems with the grammar.
Unfortunately I'm not able to debug the grammar with ANTLRworks.

Can someone show me the error or tell me a way to disable those error messages in the ANTLR C target?

Andi

-- 
GMX DSL SOMMER-SPECIAL: Surf & Phone Flat 16.000 f?r nur 19,99 Euro/mtl.!*
http://portal.gmx.net/de/go/dsl

From jimi at temporal-wave.com  Thu Sep  9 07:08:35 2010
From: jimi at temporal-wave.com (Jim Idle)
Date: Thu, 9 Sep 2010 07:08:35 -0700
Subject: [antlr-interest] Composite grammars and ANTLRWorks
In-Reply-To: <877274377.20100909095834@rationalcommerce.com>
References: <877274377.20100909095834@rationalcommerce.com>
Message-ID: <040701cb5028$7e05bbd0$7a113370$@temporal-wave.com>

The development of ANTLRWorks for composite grammars was never quite
finished I think, so you will probably have a few problems. Personally, once
I get to that point, I just use the remote debugger, which seems to work, or
just the native target language debugger which is almost as good because the
code is straight forward. Best to to debug in ANTLR works with smaller
examples of everything.

Jim

> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of rhann at rationalcommerce.com
> Sent: Thursday, September 09, 2010 1:59 AM
> To: antlr-interest at antlr.org
> Subject: [antlr-interest] Composite grammars and ANTLRWorks
> 
> I continue to struggle with a composite grammar.
> 
> Until a couple of days ago I hadn't even heard of composite grammars.
> I need to rescue my grammar that has become too big to compile.
> 
> Am I making a rod for my own back by trying to use ANTLRWorks now? I can't
> get even the trivial example composite grammars from the wiki page to work
> in ANTLRWorks (version 1.4).  I have unsuccessfully tried George Cowan's
> advice from the wiki comments, but perhaps I am not understanding him.
> 
> Any words of encouragement would be welcome.
> 
> Roy
> 
> 
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
> email-address


From jimi at temporal-wave.com  Thu Sep  9 07:11:21 2010
From: jimi at temporal-wave.com (Jim Idle)
Date: Thu, 9 Sep 2010 07:11:21 -0700
Subject: [antlr-interest] Remote Debug C Target parser
In-Reply-To: <20100909103101.56300@gmx.net>
References: <20100909103101.56300@gmx.net>
Message-ID: <040901cb5028$e0df8510$a29e8f30$@temporal-wave.com>

You are better using the native debugger at that release point. I think that
ANTLRWorks and the C runtime got out of sync. The current development branch
is working if you want to use that, but it isn't tested very much of course.

Jim

> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of Andi Clemens
> Sent: Thursday, September 09, 2010 3:31 AM
> To: antlr-interest at antlr.org
> Subject: [antlr-interest] Remote Debug C Target parser
> 
> Hi,
> 
> I try to debug a Parser written for the C-Target.
> Since I can not debug it in ANTLworks directly, I wrote a small test app
that
> includes the parser and parses one line:
> 
> http://pastebin.com/WzXrvTxr
> 
> The parser and lexer have been compiled with the "-debug" option.
> I can connect to the port in ANTLworks, but as soon as I click "step
forward"
> in the debugger, my program finishes and the debugger doesn't display
> anything.
> 
> This is the console output I get:
> 
> [...]
> unknown debug event: location 796 5
> unknown debug event: enterRule PLSQL3c.g select_expression unknown
> debug event: exitSubRule 153 unknown debug event: location 646 5
> unknown debug event: enterRule PLSQL3c.g select_statement unknown
> debug event: location 640 5 unknown debug event: enterRule PLSQL3c.g
> select_command unknown debug event: location 583 5 unknown debug
> event: enterRule PLSQL3c.g to_modify_data unknown debug event: location
> 574 5 unknown debug event: enterRule PLSQL3c.g sql_command unknown
> debug event: location 569 5 unknown debug event: enterRule PLSQL3c.g
> sql_statement unknown debug event: location 147 5 unknown debug event:
> enterRule PLSQL3c.g statement unknown debug event: location 126 14
> unknown debug event: enterSubRule 20 unknown debug event:
> enterDecision 20 unknown debug event: LT 1 9 4 0 1 22 "; unknown debug
> event: LT 2 0 -1 0 1 -1 "<EOF> unknown debug event: exitDecision 20
> unknown debug event: exitSubRule 20 unknown debug event: location 126
> 32 unknown debug event: enterSubRule 21 unknown debug event:
> enterDecision 21 unknown debug event: LT 1 9 4 0 1 22 "; unknown debug
> event: exitDecision 21 unknown debug event: enterAlt 1 unknown debug
> event: location 126 32 unknown debug event: LT 1 9 4 0 1 22 "; unknown
> debug event: consumeToken 9 4 0 1 22 "; unknown debug event:
> exitSubRule 21 unknown debug event: location 126 38 unknown debug
> event: LT 1 0 -1 0 1 -1 "<EOF> unknown debug event: consumeToken 0 -1 0 1
> -1 "<EOF> unknown debug event: location 127 2 unknown debug event:
> enterRule PLSQL3c.g parse_statements
> java.net.SocketException: Connection reset
> java.net.SocketException: Connection reset
>         at java.net.SocketInputStream.read(SocketInputStream.java:168)
>         at sun.nio.cs.StreamDecoder.readBytes(StreamDecoder.java:264)
>         at sun.nio.cs.StreamDecoder.implRead(StreamDecoder.java:306)
>         at sun.nio.cs.StreamDecoder.read(StreamDecoder.java:158)
>         at java.io.InputStreamReader.read(InputStreamReader.java:167)
>         at java.io.BufferedReader.fill(BufferedReader.java:136)
>         at java.io.BufferedReader.readLine(BufferedReader.java:299)
>         at java.io.BufferedReader.readLine(BufferedReader.java:362)
>         at
> org.antlr.runtime.debug.RemoteDebugEventSocketListener.eventHandler(R
> emoteDebugEventSocketListener.java:178)
>         at
> org.antlr.runtime.debug.RemoteDebugEventSocketListener.run(RemoteDeb
> u
> gEventSocketListener.java:472)
>         at java.lang.Thread.run(Thread.java:619)
> 
> 
> What am I doing wrong?
> 
> Andi
> 
> --
> Achtung Sicherheitswarnung: GMX warnt vor Phishing-Attacken!
> http://portal.gmx.net/de/go/sicherheitspaket
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
> email-address


From Andi.Clemens at gmx.net  Thu Sep  9 07:13:56 2010
From: Andi.Clemens at gmx.net (Andi Clemens)
Date: Thu, 09 Sep 2010 16:13:56 +0200
Subject: [antlr-interest] Remote Debug C Target parser
In-Reply-To: <040901cb5028$e0df8510$a29e8f30$@temporal-wave.com>
References: <20100909103101.56300@gmx.net>
	<040901cb5028$e0df8510$a29e8f30$@temporal-wave.com>
Message-ID: <20100909141356.56310@gmx.net>

ok, thanks for the tipp!

Andi

-------- Original-Nachricht --------
> Datum: Thu, 9 Sep 2010 07:11:21 -0700
> Von: "Jim Idle" <jimi at temporal-wave.com>
> An: antlr-interest at antlr.org
> Betreff: Re: [antlr-interest] Remote Debug C Target parser

> You are better using the native debugger at that release point. I think
> that
> ANTLRWorks and the C runtime got out of sync. The current development
> branch
> is working if you want to use that, but it isn't tested very much of
> course.
> 
> Jim
> 
> > -----Original Message-----
> > From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> > bounces at antlr.org] On Behalf Of Andi Clemens
> > Sent: Thursday, September 09, 2010 3:31 AM
> > To: antlr-interest at antlr.org
> > Subject: [antlr-interest] Remote Debug C Target parser
> > 
> > Hi,
> > 
> > I try to debug a Parser written for the C-Target.
> > Since I can not debug it in ANTLworks directly, I wrote a small test app
> that
> > includes the parser and parses one line:
> > 
> > http://pastebin.com/WzXrvTxr
> > 
> > The parser and lexer have been compiled with the "-debug" option.
> > I can connect to the port in ANTLworks, but as soon as I click "step
> forward"
> > in the debugger, my program finishes and the debugger doesn't display
> > anything.
> > 
> > This is the console output I get:
> > 
> > [...]
> > unknown debug event: location 796 5
> > unknown debug event: enterRule PLSQL3c.g select_expression unknown
> > debug event: exitSubRule 153 unknown debug event: location 646 5
> > unknown debug event: enterRule PLSQL3c.g select_statement unknown
> > debug event: location 640 5 unknown debug event: enterRule PLSQL3c.g
> > select_command unknown debug event: location 583 5 unknown debug
> > event: enterRule PLSQL3c.g to_modify_data unknown debug event: location
> > 574 5 unknown debug event: enterRule PLSQL3c.g sql_command unknown
> > debug event: location 569 5 unknown debug event: enterRule PLSQL3c.g
> > sql_statement unknown debug event: location 147 5 unknown debug event:
> > enterRule PLSQL3c.g statement unknown debug event: location 126 14
> > unknown debug event: enterSubRule 20 unknown debug event:
> > enterDecision 20 unknown debug event: LT 1 9 4 0 1 22 "; unknown debug
> > event: LT 2 0 -1 0 1 -1 "<EOF> unknown debug event: exitDecision 20
> > unknown debug event: exitSubRule 20 unknown debug event: location 126
> > 32 unknown debug event: enterSubRule 21 unknown debug event:
> > enterDecision 21 unknown debug event: LT 1 9 4 0 1 22 "; unknown debug
> > event: exitDecision 21 unknown debug event: enterAlt 1 unknown debug
> > event: location 126 32 unknown debug event: LT 1 9 4 0 1 22 "; unknown
> > debug event: consumeToken 9 4 0 1 22 "; unknown debug event:
> > exitSubRule 21 unknown debug event: location 126 38 unknown debug
> > event: LT 1 0 -1 0 1 -1 "<EOF> unknown debug event: consumeToken 0 -1 0
> 1
> > -1 "<EOF> unknown debug event: location 127 2 unknown debug event:
> > enterRule PLSQL3c.g parse_statements
> > java.net.SocketException: Connection reset
> > java.net.SocketException: Connection reset
> >         at java.net.SocketInputStream.read(SocketInputStream.java:168)
> >         at sun.nio.cs.StreamDecoder.readBytes(StreamDecoder.java:264)
> >         at sun.nio.cs.StreamDecoder.implRead(StreamDecoder.java:306)
> >         at sun.nio.cs.StreamDecoder.read(StreamDecoder.java:158)
> >         at java.io.InputStreamReader.read(InputStreamReader.java:167)
> >         at java.io.BufferedReader.fill(BufferedReader.java:136)
> >         at java.io.BufferedReader.readLine(BufferedReader.java:299)
> >         at java.io.BufferedReader.readLine(BufferedReader.java:362)
> >         at
> > org.antlr.runtime.debug.RemoteDebugEventSocketListener.eventHandler(R
> > emoteDebugEventSocketListener.java:178)
> >         at
> > org.antlr.runtime.debug.RemoteDebugEventSocketListener.run(RemoteDeb
> > u
> > gEventSocketListener.java:472)
> >         at java.lang.Thread.run(Thread.java:619)
> > 
> > 
> > What am I doing wrong?
> > 
> > Andi
> > 
> > --
> > Achtung Sicherheitswarnung: GMX warnt vor Phishing-Attacken!
> > http://portal.gmx.net/de/go/sicherheitspaket
> > 
> > List: http://www.antlr.org/mailman/listinfo/antlr-interest
> > Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
> > email-address
> 
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address

-- 
Achtung Sicherheitswarnung: GMX warnt vor Phishing-Attacken!
http://portal.gmx.net/de/go/sicherheitspaket

From Andi.Clemens at gmx.net  Thu Sep  9 07:15:16 2010
From: Andi.Clemens at gmx.net (Andi Clemens)
Date: Thu, 09 Sep 2010 16:15:16 +0200
Subject: [antlr-interest] Tell ANTLR to ignore parsing errors?
In-Reply-To: <20100909124443.56320@gmx.net>
References: <20100909124443.56320@gmx.net>
Message-ID: <20100909141516.56320@gmx.net>

I found a way to remove the error messages, which is nice, but still I'd rather prefer to fix the errors than just ignoring them :-)


-------- Original-Nachricht --------
> Datum: Thu, 09 Sep 2010 14:44:43 +0200
> Von: "Andi Clemens" <Andi.Clemens at gmx.net>
> An: antlr-interest at antlr.org
> Betreff: [antlr-interest] Tell ANTLR to ignore parsing errors?

> Hi,
> 
> I use this ANTLR grammar file to parse Oracle PL/SQL statements:
> http://pastebin.com/uy0wZTax
> 
> But some of the statements produce errors when I try to parse them, for
> example:
> 
> "create user u1 identified by p1 account unlock;"
> 
> I get the following error message:
> 
> ==============================
> statementString(1)  : error 3 : , at offset -1
>     near [Index: 0 (Start: 141054912-Stop: 141054917) ='create', type<50>
> Line:
> 1 LinePos:-1]
>      : cannot match to any predicted input...
> ==============================
> 
> But why? The rule looks like this:
> ==============================
> create_user_statement
> 	:	'CREATE' 'USER' identifier 'INDENTIFIED' .*
> 	;
> ==============================
> 
> Could the wildcard character be the problem?
> Actually I just want to parse known Statements with my grammar, all
> unknown statements (parsing errors) could be ignored.
> 
> Can I tell ANTLR (for the C target) to ignore those error messages and
> just return FALSE or something like that, so that I can decide wether to take
> an appropiate action?
> 
> I get a lot of those error messages, and to be honest, the error messages
> are not helping me here. I can not see problems with the grammar.
> Unfortunately I'm not able to debug the grammar with ANTLRworks.
> 
> Can someone show me the error or tell me a way to disable those error
> messages in the ANTLR C target?
> 
> Andi
> 
> -- 
> GMX DSL SOMMER-SPECIAL: Surf & Phone Flat 16.000 f?r nur 19,99
> Euro/mtl.!*
> http://portal.gmx.net/de/go/dsl
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address

-- 
GRATIS f?r alle GMX-Mitglieder: Die maxdome Movie-FLAT!
Jetzt freischalten unter http://portal.gmx.net/de/go/maxdome

From jimi at temporal-wave.com  Thu Sep  9 07:21:45 2010
From: jimi at temporal-wave.com (Jim Idle)
Date: Thu, 9 Sep 2010 07:21:45 -0700
Subject: [antlr-interest] Tell ANTLR to ignore parsing errors?
In-Reply-To: <20100909124443.56320@gmx.net>
References: <20100909124443.56320@gmx.net>
Message-ID: <040d01cb502a$55294e50$ff7beaf0$@temporal-wave.com>

If you are getting errors it is because your grammar is incorrect. Oracle SQL is a huge grammar to undertake and you cannot 'hack' it. Your token in the parser (which you should move to the lexer anyway and not use 'LITERAL' in your parser code) is CREATEE but your input is create. Did you tell the runtime to be case insensitive?

Read the API or use antlr.markmail.org to see how to override displayRecognitionError(). You cannot just ignore errors though because somehow you have to recover. You could just make them silent and when the parser returns if the error count is >0 then ignore that source or something.

I will have a commercial version of Oracle SQOL and PLSQL available before too long too. 

Jim



> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of Andi Clemens
> Sent: Thursday, September 09, 2010 5:45 AM
> To: antlr-interest at antlr.org
> Subject: [antlr-interest] Tell ANTLR to ignore parsing errors?
> 
> Hi,
> 
> I use this ANTLR grammar file to parse Oracle PL/SQL statements:
> http://pastebin.com/uy0wZTax
> 
> But some of the statements produce errors when I try to parse them, for
> example:
> 
> "create user u1 identified by p1 account unlock;"
> 
> I get the following error message:
> 
> ==============================
> statementString(1)  : error 3 : , at offset -1
>     near [Index: 0 (Start: 141054912-Stop: 141054917) ='create', type<50> Line:
> 1 LinePos:-1]
>      : cannot match to any predicted input...
> ==============================
> 
> But why? The rule looks like this:
> ==============================
> create_user_statement
> 	:	'CREATE' 'USER' identifier 'INDENTIFIED' .*
> 	;
> ==============================
> 
> Could the wildcard character be the problem?
> Actually I just want to parse known Statements with my grammar, all
> unknown statements (parsing errors) could be ignored.
> 
> Can I tell ANTLR (for the C target) to ignore those error messages and just
> return FALSE or something like that, so that I can decide wether to take an
> appropiate action?
> 
> I get a lot of those error messages, and to be honest, the error messages are
> not helping me here. I can not see problems with the grammar.
> Unfortunately I'm not able to debug the grammar with ANTLRworks.
> 
> Can someone show me the error or tell me a way to disable those error
> messages in the ANTLR C target?
> 
> Andi
> 
> --
> GMX DSL SOMMER-SPECIAL: Surf & Phone Flat 16.000 f?r nur 19,99
> Euro/mtl.!* http://portal.gmx.net/de/go/dsl
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
> email-address


From Andi.Clemens at gmx.net  Thu Sep  9 07:32:23 2010
From: Andi.Clemens at gmx.net (Andi Clemens)
Date: Thu, 09 Sep 2010 16:32:23 +0200
Subject: [antlr-interest] Tell ANTLR to ignore parsing errors?
In-Reply-To: <040d01cb502a$55294e50$ff7beaf0$@temporal-wave.com>
References: <20100909124443.56320@gmx.net>
	<040d01cb502a$55294e50$ff7beaf0$@temporal-wave.com>
Message-ID: <20100909143223.56320@gmx.net>

Yes it is case insensitive. What is the difference if I add "CREATE" or similar to the lexer?
Is it more reliable in detecting the right tokens?

Andi

-------- Original-Nachricht --------
> Datum: Thu, 9 Sep 2010 07:21:45 -0700
> Von: "Jim Idle" <jimi at temporal-wave.com>
> An: antlr-interest at antlr.org
> Betreff: Re: [antlr-interest] Tell ANTLR to ignore parsing errors?

> If you are getting errors it is because your grammar is incorrect. Oracle
> SQL is a huge grammar to undertake and you cannot 'hack' it. Your token in
> the parser (which you should move to the lexer anyway and not use 'LITERAL'
> in your parser code) is CREATEE but your input is create. Did you tell the
> runtime to be case insensitive?
> 
> Read the API or use antlr.markmail.org to see how to override
> displayRecognitionError(). You cannot just ignore errors though because somehow you
> have to recover. You could just make them silent and when the parser returns
> if the error count is >0 then ignore that source or something.
> 
> I will have a commercial version of Oracle SQOL and PLSQL available before
> too long too. 
> 
> Jim
> 
> 
> 
> > -----Original Message-----
> > From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> > bounces at antlr.org] On Behalf Of Andi Clemens
> > Sent: Thursday, September 09, 2010 5:45 AM
> > To: antlr-interest at antlr.org
> > Subject: [antlr-interest] Tell ANTLR to ignore parsing errors?
> > 
> > Hi,
> > 
> > I use this ANTLR grammar file to parse Oracle PL/SQL statements:
> > http://pastebin.com/uy0wZTax
> > 
> > But some of the statements produce errors when I try to parse them, for
> > example:
> > 
> > "create user u1 identified by p1 account unlock;"
> > 
> > I get the following error message:
> > 
> > ==============================
> > statementString(1)  : error 3 : , at offset -1
> >     near [Index: 0 (Start: 141054912-Stop: 141054917) ='create',
> type<50> Line:
> > 1 LinePos:-1]
> >      : cannot match to any predicted input...
> > ==============================
> > 
> > But why? The rule looks like this:
> > ==============================
> > create_user_statement
> > 	:	'CREATE' 'USER' identifier 'INDENTIFIED' .*
> > 	;
> > ==============================
> > 
> > Could the wildcard character be the problem?
> > Actually I just want to parse known Statements with my grammar, all
> > unknown statements (parsing errors) could be ignored.
> > 
> > Can I tell ANTLR (for the C target) to ignore those error messages and
> just
> > return FALSE or something like that, so that I can decide wether to take
> an
> > appropiate action?
> > 
> > I get a lot of those error messages, and to be honest, the error
> messages are
> > not helping me here. I can not see problems with the grammar.
> > Unfortunately I'm not able to debug the grammar with ANTLRworks.
> > 
> > Can someone show me the error or tell me a way to disable those error
> > messages in the ANTLR C target?
> > 
> > Andi
> > 
> > --
> > GMX DSL SOMMER-SPECIAL: Surf & Phone Flat 16.000 f?r nur 19,99
> > Euro/mtl.!* http://portal.gmx.net/de/go/dsl
> > 
> > List: http://www.antlr.org/mailman/listinfo/antlr-interest
> > Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
> > email-address
> 
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address

-- 
GMX DSL SOMMER-SPECIAL: Surf & Phone Flat 16.000 f?r nur 19,99 Euro/mtl.!*
http://portal.gmx.net/de/go/dsl

From jimi at temporal-wave.com  Thu Sep  9 08:26:59 2010
From: jimi at temporal-wave.com (Jim Idle)
Date: Thu, 9 Sep 2010 08:26:59 -0700
Subject: [antlr-interest] Tell ANTLR to ignore parsing errors?
In-Reply-To: <20100909143223.56320@gmx.net>
References: <20100909124443.56320@gmx.net>
	<040d01cb502a$55294e50$ff7beaf0$@temporal-wave.com>
	<20100909143223.56320@gmx.net>
Message-ID: <041501cb5033$71ff44e0$55fdcea0$@temporal-wave.com>

When putting things in the parser, you have not enough control over the tokens both in terms of what they are named in code generation time (hence error messages are difficult, and producing a tree parser is difficult), and you cannot see the potential ambiguities in your lexer. It just makes things more difficult for no(IMO) advantage.

If you have told the input stream to be case insensitive, then I am afraid that the problem is going to be with your grammar. You will have to single step though the code to find out why.

Jim

> -----Original Message-----
> From: Andi Clemens [mailto:Andi.Clemens at gmx.net]
> Sent: Thursday, September 09, 2010 7:32 AM
> To: Jim Idle; antlr-interest at antlr.org
> Subject: Re: [antlr-interest] Tell ANTLR to ignore parsing errors?
> 
> Yes it is case insensitive. What is the difference if I add "CREATE" or similar to
> the lexer?
> Is it more reliable in detecting the right tokens?
> 
> Andi
> 
> -------- Original-Nachricht --------
> > Datum: Thu, 9 Sep 2010 07:21:45 -0700
> > Von: "Jim Idle" <jimi at temporal-wave.com>
> > An: antlr-interest at antlr.org
> > Betreff: Re: [antlr-interest] Tell ANTLR to ignore parsing errors?
> 
> > If you are getting errors it is because your grammar is incorrect.
> > Oracle SQL is a huge grammar to undertake and you cannot 'hack' it.
> > Your token in the parser (which you should move to the lexer anyway and
> not use 'LITERAL'
> > in your parser code) is CREATEE but your input is create. Did you tell
> > the runtime to be case insensitive?
> >
> > Read the API or use antlr.markmail.org to see how to override
> > displayRecognitionError(). You cannot just ignore errors though
> > because somehow you have to recover. You could just make them silent
> > and when the parser returns if the error count is >0 then ignore that source
> or something.
> >
> > I will have a commercial version of Oracle SQOL and PLSQL available
> > before too long too.
> >
> > Jim
> >
> >
> >
> > > -----Original Message-----
> > > From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> > > bounces at antlr.org] On Behalf Of Andi Clemens
> > > Sent: Thursday, September 09, 2010 5:45 AM
> > > To: antlr-interest at antlr.org
> > > Subject: [antlr-interest] Tell ANTLR to ignore parsing errors?
> > >
> > > Hi,
> > >
> > > I use this ANTLR grammar file to parse Oracle PL/SQL statements:
> > > http://pastebin.com/uy0wZTax
> > >
> > > But some of the statements produce errors when I try to parse them,
> > > for
> > > example:
> > >
> > > "create user u1 identified by p1 account unlock;"
> > >
> > > I get the following error message:
> > >
> > > ==============================
> > > statementString(1)  : error 3 : , at offset -1
> > >     near [Index: 0 (Start: 141054912-Stop: 141054917) ='create',
> > type<50> Line:
> > > 1 LinePos:-1]
> > >      : cannot match to any predicted input...
> > > ==============================
> > >
> > > But why? The rule looks like this:
> > > ==============================
> > > create_user_statement
> > > 	:	'CREATE' 'USER' identifier 'INDENTIFIED' .*
> > > 	;
> > > ==============================
> > >
> > > Could the wildcard character be the problem?
> > > Actually I just want to parse known Statements with my grammar, all
> > > unknown statements (parsing errors) could be ignored.
> > >
> > > Can I tell ANTLR (for the C target) to ignore those error messages
> > > and
> > just
> > > return FALSE or something like that, so that I can decide wether to
> > > take
> > an
> > > appropiate action?
> > >
> > > I get a lot of those error messages, and to be honest, the error
> > messages are
> > > not helping me here. I can not see problems with the grammar.
> > > Unfortunately I'm not able to debug the grammar with ANTLRworks.
> > >
> > > Can someone show me the error or tell me a way to disable those
> > > error messages in the ANTLR C target?
> > >
> > > Andi
> > >
> > > --
> > > GMX DSL SOMMER-SPECIAL: Surf & Phone Flat 16.000 f?r nur 19,99
> > > Euro/mtl.!* http://portal.gmx.net/de/go/dsl
> > >
> > > List: http://www.antlr.org/mailman/listinfo/antlr-interest
> > > Unsubscribe:
> > > http://www.antlr.org/mailman/options/antlr-interest/your-
> > > email-address
> >
> >
> > List: http://www.antlr.org/mailman/listinfo/antlr-interest
> > Unsubscribe:
> > http://www.antlr.org/mailman/options/antlr-interest/your-email-address
> 
> --
> GMX DSL SOMMER-SPECIAL: Surf & Phone Flat 16.000 f?r nur 19,99
> Euro/mtl.!* http://portal.gmx.net/de/go/dsl


From Andi.Clemens at gmx.net  Thu Sep  9 09:56:31 2010
From: Andi.Clemens at gmx.net (Andi Clemens)
Date: Thu, 09 Sep 2010 18:56:31 +0200
Subject: [antlr-interest] Tell ANTLR to ignore parsing errors?
In-Reply-To: <041501cb5033$71ff44e0$55fdcea0$@temporal-wave.com>
References: <20100909124443.56320@gmx.net>
	<040d01cb502a$55294e50$ff7beaf0$@temporal-wave.com>
	<20100909143223.56320@gmx.net>
	<041501cb5033$71ff44e0$55fdcea0$@temporal-wave.com>
Message-ID: <20100909165631.66500@gmx.net>

Ok, thanks for the answers.

One final question: Would it be better to have tokens like "CREATE USER" and "CREATE TABLE" in the lexer or doesn't this work anyway because of the whitespace?

Andi

-------- Original-Nachricht --------
> Datum: Thu, 9 Sep 2010 08:26:59 -0700
> Von: "Jim Idle" <jimi at temporal-wave.com>
> An: antlr-interest at antlr.org
> Betreff: Re: [antlr-interest] Tell ANTLR to ignore parsing errors?

> When putting things in the parser, you have not enough control over the
> tokens both in terms of what they are named in code generation time (hence
> error messages are difficult, and producing a tree parser is difficult), and
> you cannot see the potential ambiguities in your lexer. It just makes
> things more difficult for no(IMO) advantage.
> 
> If you have told the input stream to be case insensitive, then I am afraid
> that the problem is going to be with your grammar. You will have to single
> step though the code to find out why.
> 
> Jim
> 
> > -----Original Message-----
> > From: Andi Clemens [mailto:Andi.Clemens at gmx.net]
> > Sent: Thursday, September 09, 2010 7:32 AM
> > To: Jim Idle; antlr-interest at antlr.org
> > Subject: Re: [antlr-interest] Tell ANTLR to ignore parsing errors?
> > 
> > Yes it is case insensitive. What is the difference if I add "CREATE" or
> similar to
> > the lexer?
> > Is it more reliable in detecting the right tokens?
> > 
> > Andi
> > 
> > -------- Original-Nachricht --------
> > > Datum: Thu, 9 Sep 2010 07:21:45 -0700
> > > Von: "Jim Idle" <jimi at temporal-wave.com>
> > > An: antlr-interest at antlr.org
> > > Betreff: Re: [antlr-interest] Tell ANTLR to ignore parsing errors?
> > 
> > > If you are getting errors it is because your grammar is incorrect.
> > > Oracle SQL is a huge grammar to undertake and you cannot 'hack' it.
> > > Your token in the parser (which you should move to the lexer anyway
> and
> > not use 'LITERAL'
> > > in your parser code) is CREATEE but your input is create. Did you tell
> > > the runtime to be case insensitive?
> > >
> > > Read the API or use antlr.markmail.org to see how to override
> > > displayRecognitionError(). You cannot just ignore errors though
> > > because somehow you have to recover. You could just make them silent
> > > and when the parser returns if the error count is >0 then ignore that
> source
> > or something.
> > >
> > > I will have a commercial version of Oracle SQOL and PLSQL available
> > > before too long too.
> > >
> > > Jim
> > >
> > >
> > >
> > > > -----Original Message-----
> > > > From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> > > > bounces at antlr.org] On Behalf Of Andi Clemens
> > > > Sent: Thursday, September 09, 2010 5:45 AM
> > > > To: antlr-interest at antlr.org
> > > > Subject: [antlr-interest] Tell ANTLR to ignore parsing errors?
> > > >
> > > > Hi,
> > > >
> > > > I use this ANTLR grammar file to parse Oracle PL/SQL statements:
> > > > http://pastebin.com/uy0wZTax
> > > >
> > > > But some of the statements produce errors when I try to parse them,
> > > > for
> > > > example:
> > > >
> > > > "create user u1 identified by p1 account unlock;"
> > > >
> > > > I get the following error message:
> > > >
> > > > ==============================
> > > > statementString(1)  : error 3 : , at offset -1
> > > >     near [Index: 0 (Start: 141054912-Stop: 141054917) ='create',
> > > type<50> Line:
> > > > 1 LinePos:-1]
> > > >      : cannot match to any predicted input...
> > > > ==============================
> > > >
> > > > But why? The rule looks like this:
> > > > ==============================
> > > > create_user_statement
> > > > 	:	'CREATE' 'USER' identifier 'INDENTIFIED' .*
> > > > 	;
> > > > ==============================
> > > >
> > > > Could the wildcard character be the problem?
> > > > Actually I just want to parse known Statements with my grammar, all
> > > > unknown statements (parsing errors) could be ignored.
> > > >
> > > > Can I tell ANTLR (for the C target) to ignore those error messages
> > > > and
> > > just
> > > > return FALSE or something like that, so that I can decide wether to
> > > > take
> > > an
> > > > appropiate action?
> > > >
> > > > I get a lot of those error messages, and to be honest, the error
> > > messages are
> > > > not helping me here. I can not see problems with the grammar.
> > > > Unfortunately I'm not able to debug the grammar with ANTLRworks.
> > > >
> > > > Can someone show me the error or tell me a way to disable those
> > > > error messages in the ANTLR C target?
> > > >
> > > > Andi
> > > >
> > > > --
> > > > GMX DSL SOMMER-SPECIAL: Surf & Phone Flat 16.000 f?r nur 19,99
> > > > Euro/mtl.!* http://portal.gmx.net/de/go/dsl
> > > >
> > > > List: http://www.antlr.org/mailman/listinfo/antlr-interest
> > > > Unsubscribe:
> > > > http://www.antlr.org/mailman/options/antlr-interest/your-
> > > > email-address
> > >
> > >
> > > List: http://www.antlr.org/mailman/listinfo/antlr-interest
> > > Unsubscribe:
> > > http://www.antlr.org/mailman/options/antlr-interest/your-email-address
> > 
> > --
> > GMX DSL SOMMER-SPECIAL: Surf & Phone Flat 16.000 f?r nur 19,99
> > Euro/mtl.!* http://portal.gmx.net/de/go/dsl
> 
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address

-- 
Achtung Sicherheitswarnung: GMX warnt vor Phishing-Attacken!
http://portal.gmx.net/de/go/sicherheitspaket

From jimi at temporal-wave.com  Thu Sep  9 10:05:54 2010
From: jimi at temporal-wave.com (Jim Idle)
Date: Thu, 9 Sep 2010 10:05:54 -0700
Subject: [antlr-interest] Tell ANTLR to ignore parsing errors?
In-Reply-To: <20100909165631.66500@gmx.net>
References: <20100909124443.56320@gmx.net>	<040d01cb502a$55294e50$ff7beaf0$@temporal-wave.com>	<20100909143223.56320@gmx.net>
	<041501cb5033$71ff44e0$55fdcea0$@temporal-wave.com>
	<20100909165631.66500@gmx.net>
Message-ID: <047a01cb5041$43432000$c9c96000$@temporal-wave.com>

No - don?t make whitespace significant unless the language absolutely makes you do so.

What you have to do is left factor:

create
    : CREATE
    (
           cr_table
        | cr_user
        | cr_trigger
    )
 ;

cr_table
 : TABLE .....

Jim

> -----Original Message-----
> From: Andi Clemens [mailto:Andi.Clemens at gmx.net]
> Sent: Thursday, September 09, 2010 9:57 AM
> To: Jim Idle; antlr-interest at antlr.org
> Subject: Re: [antlr-interest] Tell ANTLR to ignore parsing errors?
> 
> Ok, thanks for the answers.
> 
> One final question: Would it be better to have tokens like "CREATE USER"
> and "CREATE TABLE" in the lexer or doesn't this work anyway because of the
> whitespace?
> 
> Andi
> 
> -------- Original-Nachricht --------
> > Datum: Thu, 9 Sep 2010 08:26:59 -0700
> > Von: "Jim Idle" <jimi at temporal-wave.com>
> > An: antlr-interest at antlr.org
> > Betreff: Re: [antlr-interest] Tell ANTLR to ignore parsing errors?
> 
> > When putting things in the parser, you have not enough control over
> > the tokens both in terms of what they are named in code generation
> > time (hence error messages are difficult, and producing a tree parser
> > is difficult), and you cannot see the potential ambiguities in your
> > lexer. It just makes things more difficult for no(IMO) advantage.
> >
> > If you have told the input stream to be case insensitive, then I am
> > afraid that the problem is going to be with your grammar. You will
> > have to single step though the code to find out why.
> >
> > Jim
> >
> > > -----Original Message-----
> > > From: Andi Clemens [mailto:Andi.Clemens at gmx.net]
> > > Sent: Thursday, September 09, 2010 7:32 AM
> > > To: Jim Idle; antlr-interest at antlr.org
> > > Subject: Re: [antlr-interest] Tell ANTLR to ignore parsing errors?
> > >
> > > Yes it is case insensitive. What is the difference if I add "CREATE"
> > > or
> > similar to
> > > the lexer?
> > > Is it more reliable in detecting the right tokens?
> > >
> > > Andi
> > >
> > > -------- Original-Nachricht --------
> > > > Datum: Thu, 9 Sep 2010 07:21:45 -0700
> > > > Von: "Jim Idle" <jimi at temporal-wave.com>
> > > > An: antlr-interest at antlr.org
> > > > Betreff: Re: [antlr-interest] Tell ANTLR to ignore parsing errors?
> > >
> > > > If you are getting errors it is because your grammar is incorrect.
> > > > Oracle SQL is a huge grammar to undertake and you cannot 'hack' it.
> > > > Your token in the parser (which you should move to the lexer
> > > > anyway
> > and
> > > not use 'LITERAL'
> > > > in your parser code) is CREATEE but your input is create. Did you
> > > > tell the runtime to be case insensitive?
> > > >
> > > > Read the API or use antlr.markmail.org to see how to override
> > > > displayRecognitionError(). You cannot just ignore errors though
> > > > because somehow you have to recover. You could just make them
> > > > silent and when the parser returns if the error count is >0 then
> > > > ignore that
> > source
> > > or something.
> > > >
> > > > I will have a commercial version of Oracle SQOL and PLSQL
> > > > available before too long too.
> > > >
> > > > Jim
> > > >
> > > >
> > > >
> > > > > -----Original Message-----
> > > > > From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> > > > > bounces at antlr.org] On Behalf Of Andi Clemens
> > > > > Sent: Thursday, September 09, 2010 5:45 AM
> > > > > To: antlr-interest at antlr.org
> > > > > Subject: [antlr-interest] Tell ANTLR to ignore parsing errors?
> > > > >
> > > > > Hi,
> > > > >
> > > > > I use this ANTLR grammar file to parse Oracle PL/SQL statements:
> > > > > http://pastebin.com/uy0wZTax
> > > > >
> > > > > But some of the statements produce errors when I try to parse
> > > > > them, for
> > > > > example:
> > > > >
> > > > > "create user u1 identified by p1 account unlock;"
> > > > >
> > > > > I get the following error message:
> > > > >
> > > > > ==============================
> > > > > statementString(1)  : error 3 : , at offset -1
> > > > >     near [Index: 0 (Start: 141054912-Stop: 141054917) ='create',
> > > > type<50> Line:
> > > > > 1 LinePos:-1]
> > > > >      : cannot match to any predicted input...
> > > > > ==============================
> > > > >
> > > > > But why? The rule looks like this:
> > > > > ==============================
> > > > > create_user_statement
> > > > > 	:	'CREATE' 'USER' identifier 'INDENTIFIED' .*
> > > > > 	;
> > > > > ==============================
> > > > >
> > > > > Could the wildcard character be the problem?
> > > > > Actually I just want to parse known Statements with my grammar,
> > > > > all unknown statements (parsing errors) could be ignored.
> > > > >
> > > > > Can I tell ANTLR (for the C target) to ignore those error
> > > > > messages and
> > > > just
> > > > > return FALSE or something like that, so that I can decide wether
> > > > > to take
> > > > an
> > > > > appropiate action?
> > > > >
> > > > > I get a lot of those error messages, and to be honest, the error
> > > > messages are
> > > > > not helping me here. I can not see problems with the grammar.
> > > > > Unfortunately I'm not able to debug the grammar with ANTLRworks.
> > > > >
> > > > > Can someone show me the error or tell me a way to disable those
> > > > > error messages in the ANTLR C target?
> > > > >
> > > > > Andi
> > > > >
> > > > > --
> > > > > GMX DSL SOMMER-SPECIAL: Surf & Phone Flat 16.000 f?r nur 19,99
> > > > > Euro/mtl.!* http://portal.gmx.net/de/go/dsl
> > > > >
> > > > > List: http://www.antlr.org/mailman/listinfo/antlr-interest
> > > > > Unsubscribe:
> > > > > http://www.antlr.org/mailman/options/antlr-interest/your-
> > > > > email-address
> > > >
> > > >
> > > > List: http://www.antlr.org/mailman/listinfo/antlr-interest
> > > > Unsubscribe:
> > > > http://www.antlr.org/mailman/options/antlr-interest/your-email-add
> > > > ress
> > >
> > > --
> > > GMX DSL SOMMER-SPECIAL: Surf & Phone Flat 16.000 f?r nur 19,99
> > > Euro/mtl.!* http://portal.gmx.net/de/go/dsl
> >
> >
> > List: http://www.antlr.org/mailman/listinfo/antlr-interest
> > Unsubscribe:
> > http://www.antlr.org/mailman/options/antlr-interest/your-email-address
> 
> --
> Achtung Sicherheitswarnung: GMX warnt vor Phishing-Attacken!
> http://portal.gmx.net/de/go/sicherheitspaket


From j at junkwallah.org  Thu Sep  9 10:06:52 2010
From: j at junkwallah.org (Junkman)
Date: Thu, 09 Sep 2010 10:06:52 -0700
Subject: [antlr-interest] Composite grammars and ANTLRWorks
In-Reply-To: <877274377.20100909095834@rationalcommerce.com>
References: <877274377.20100909095834@rationalcommerce.com>
Message-ID: <4C89142C.2000500@junkwallah.org>

On 9/9/2010 1:58 AM, rhann at rationalcommerce.com wrote:
> I continue to struggle with a composite grammar.
> 
> Until a couple of days ago I hadn't even heard of composite grammars.
> I need to rescue my grammar that has become too big to compile.
> 
> Am I making a rod for my own back by trying to use ANTLRWorks now? I
> can't get even the trivial example composite grammars from the wiki
> page to work in ANTLRWorks (version 1.4).  I have unsuccessfully
> tried George Cowan's advice from the wiki comments, but perhaps I am
> not understanding him.
> 
> Any words of encouragement would be welcome.
> 
> Roy
> 
> 
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
> 

Hi Roy,

I don't have any insight specific to your situation, just morale support
from another noob. :-)

AntlrWorks has many fantastic features, but I found it to act kookie
sometimes, so I'd double check with the Antlr command line to verify the
problem is with your grammar.

Good luck,

Jay





From guillaumh at gmail.com  Thu Sep  9 13:28:46 2010
From: guillaumh at gmail.com (Guillaume Hoffmann)
Date: Thu, 9 Sep 2010 22:28:46 +0200
Subject: [antlr-interest] Remote Debug C Target parser
In-Reply-To: <20100909141356.56310@gmx.net>
References: <20100909103101.56300@gmx.net>
	<040901cb5028$e0df8510$a29e8f30$@temporal-wave.com>
	<20100909141356.56310@gmx.net>
Message-ID: <AANLkTikAL4F5az7iEuCfVNjYryyV2g_1aEb08FuzfQKy@mail.gmail.com>

I have the same problem than Andi.

Would it be possible that someone updated of the files:

http://www.antlr.org/download//antlr-master-3.2.1-SNAPSHOT-completejar.jar
http://www.antlr.org/download//C/libantlr3c-3.3-SNAPSHOT.tar.gz

so that it would be easy to get an unstable version of ANTLR where
debugging with C target works?

regards,

Guillaume

On Thu, Sep 9, 2010 at 4:13 PM, Andi Clemens <Andi.Clemens at gmx.net> wrote:
> ok, thanks for the tipp!
>
> Andi
>
> -------- Original-Nachricht --------
>> Datum: Thu, 9 Sep 2010 07:11:21 -0700
>> Von: "Jim Idle" <jimi at temporal-wave.com>
>> An: antlr-interest at antlr.org
>> Betreff: Re: [antlr-interest] Remote Debug C Target parser
>
>> You are better using the native debugger at that release point. I think
>> that
>> ANTLRWorks and the C runtime got out of sync. The current development
>> branch
>> is working if you want to use that, but it isn't tested very much of
>> course.
>>
>> Jim
>>
>> > -----Original Message-----
>> > From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
>> > bounces at antlr.org] On Behalf Of Andi Clemens
>> > Sent: Thursday, September 09, 2010 3:31 AM
>> > To: antlr-interest at antlr.org
>> > Subject: [antlr-interest] Remote Debug C Target parser
>> >
>> > Hi,
>> >
>> > I try to debug a Parser written for the C-Target.
>> > Since I can not debug it in ANTLworks directly, I wrote a small test app
>> that
>> > includes the parser and parses one line:
>> >
>> > http://pastebin.com/WzXrvTxr
>> >
>> > The parser and lexer have been compiled with the "-debug" option.
>> > I can connect to the port in ANTLworks, but as soon as I click "step
>> forward"
>> > in the debugger, my program finishes and the debugger doesn't display
>> > anything.
>> >
>> > This is the console output I get:
>> >
>> > [...]
>> > unknown debug event: location 796 5
>> > unknown debug event: enterRule PLSQL3c.g select_expression unknown
>> > debug event: exitSubRule 153 unknown debug event: location 646 5
>> > unknown debug event: enterRule PLSQL3c.g select_statement unknown
>> > debug event: location 640 5 unknown debug event: enterRule PLSQL3c.g
>> > select_command unknown debug event: location 583 5 unknown debug
>> > event: enterRule PLSQL3c.g to_modify_data unknown debug event: location
>> > 574 5 unknown debug event: enterRule PLSQL3c.g sql_command unknown
>> > debug event: location 569 5 unknown debug event: enterRule PLSQL3c.g
>> > sql_statement unknown debug event: location 147 5 unknown debug event:
>> > enterRule PLSQL3c.g statement unknown debug event: location 126 14
>> > unknown debug event: enterSubRule 20 unknown debug event:
>> > enterDecision 20 unknown debug event: LT 1 9 4 0 1 22 "; unknown debug
>> > event: LT 2 0 -1 0 1 -1 "<EOF> unknown debug event: exitDecision 20
>> > unknown debug event: exitSubRule 20 unknown debug event: location 126
>> > 32 unknown debug event: enterSubRule 21 unknown debug event:
>> > enterDecision 21 unknown debug event: LT 1 9 4 0 1 22 "; unknown debug
>> > event: exitDecision 21 unknown debug event: enterAlt 1 unknown debug
>> > event: location 126 32 unknown debug event: LT 1 9 4 0 1 22 "; unknown
>> > debug event: consumeToken 9 4 0 1 22 "; unknown debug event:
>> > exitSubRule 21 unknown debug event: location 126 38 unknown debug
>> > event: LT 1 0 -1 0 1 -1 "<EOF> unknown debug event: consumeToken 0 -1 0
>> 1
>> > -1 "<EOF> unknown debug event: location 127 2 unknown debug event:
>> > enterRule PLSQL3c.g parse_statements
>> > java.net.SocketException: Connection reset
>> > java.net.SocketException: Connection reset
>> > ? ? ? ? at java.net.SocketInputStream.read(SocketInputStream.java:168)
>> > ? ? ? ? at sun.nio.cs.StreamDecoder.readBytes(StreamDecoder.java:264)
>> > ? ? ? ? at sun.nio.cs.StreamDecoder.implRead(StreamDecoder.java:306)
>> > ? ? ? ? at sun.nio.cs.StreamDecoder.read(StreamDecoder.java:158)
>> > ? ? ? ? at java.io.InputStreamReader.read(InputStreamReader.java:167)
>> > ? ? ? ? at java.io.BufferedReader.fill(BufferedReader.java:136)
>> > ? ? ? ? at java.io.BufferedReader.readLine(BufferedReader.java:299)
>> > ? ? ? ? at java.io.BufferedReader.readLine(BufferedReader.java:362)
>> > ? ? ? ? at
>> > org.antlr.runtime.debug.RemoteDebugEventSocketListener.eventHandler(R
>> > emoteDebugEventSocketListener.java:178)
>> > ? ? ? ? at
>> > org.antlr.runtime.debug.RemoteDebugEventSocketListener.run(RemoteDeb
>> > u
>> > gEventSocketListener.java:472)
>> > ? ? ? ? at java.lang.Thread.run(Thread.java:619)
>> >
>> >
>> > What am I doing wrong?
>> >
>> > Andi
>> >
>> > --
>> > Achtung Sicherheitswarnung: GMX warnt vor Phishing-Attacken!
>> > http://portal.gmx.net/de/go/sicherheitspaket
>> >
>> > List: http://www.antlr.org/mailman/listinfo/antlr-interest
>> > Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
>> > email-address
>>
>>
>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>> Unsubscribe:
>> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>
> --
> Achtung Sicherheitswarnung: GMX warnt vor Phishing-Attacken!
> http://portal.gmx.net/de/go/sicherheitspaket
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>

From jimi at temporal-wave.com  Thu Sep  9 13:30:35 2010
From: jimi at temporal-wave.com (Jim Idle)
Date: Thu, 9 Sep 2010 13:30:35 -0700
Subject: [antlr-interest] Remote Debug C Target parser
In-Reply-To: <AANLkTikAL4F5az7iEuCfVNjYryyV2g_1aEb08FuzfQKy@mail.gmail.com>
References: <20100909103101.56300@gmx.net>
	<040901cb5028$e0df8510$a29e8f30$@temporal-wave.com>
	<20100909141356.56310@gmx.net>
	<AANLkTikAL4F5az7iEuCfVNjYryyV2g_1aEb08FuzfQKy@mail.gmail.com>
Message-ID: <051701cb505d$db4fece0$91efc6a0$@temporal-wave.com>

I'll try to do that this weekend.

Jim

> -----Original Message-----
> From: Guillaume Hoffmann [mailto:guillaumh at gmail.com]
> Sent: Thursday, September 09, 2010 1:29 PM
> To: Andi Clemens
> Cc: Jim Idle; antlr-interest at antlr.org
> Subject: Re: [antlr-interest] Remote Debug C Target parser
> 
> I have the same problem than Andi.
> 
> Would it be possible that someone updated of the files:
> 
> http://www.antlr.org/download//antlr-master-3.2.1-SNAPSHOT-
> completejar.jar
> http://www.antlr.org/download//C/libantlr3c-3.3-SNAPSHOT.tar.gz
> 
> so that it would be easy to get an unstable version of ANTLR where
> debugging with C target works?
> 
> regards,
> 
> Guillaume
> 
> On Thu, Sep 9, 2010 at 4:13 PM, Andi Clemens <Andi.Clemens at gmx.net>
> wrote:
> > ok, thanks for the tipp!
> >
> > Andi
> >
> > -------- Original-Nachricht --------
> >> Datum: Thu, 9 Sep 2010 07:11:21 -0700
> >> Von: "Jim Idle" <jimi at temporal-wave.com>
> >> An: antlr-interest at antlr.org
> >> Betreff: Re: [antlr-interest] Remote Debug C Target parser
> >
> >> You are better using the native debugger at that release point. I
> >> think that ANTLRWorks and the C runtime got out of sync. The current
> >> development branch is working if you want to use that, but it isn't
> >> tested very much of course.
> >>
> >> Jim
> >>
> >> > -----Original Message-----
> >> > From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> >> > bounces at antlr.org] On Behalf Of Andi Clemens
> >> > Sent: Thursday, September 09, 2010 3:31 AM
> >> > To: antlr-interest at antlr.org
> >> > Subject: [antlr-interest] Remote Debug C Target parser
> >> >
> >> > Hi,
> >> >
> >> > I try to debug a Parser written for the C-Target.
> >> > Since I can not debug it in ANTLworks directly, I wrote a small
> >> > test app
> >> that
> >> > includes the parser and parses one line:
> >> >
> >> > http://pastebin.com/WzXrvTxr
> >> >
> >> > The parser and lexer have been compiled with the "-debug" option.
> >> > I can connect to the port in ANTLworks, but as soon as I click
> >> > "step
> >> forward"
> >> > in the debugger, my program finishes and the debugger doesn't
> >> > display anything.
> >> >
> >> > This is the console output I get:
> >> >
> >> > [...]
> >> > unknown debug event: location 796 5 unknown debug event: enterRule
> >> > PLSQL3c.g select_expression unknown debug event: exitSubRule 153
> >> > unknown debug event: location 646 5 unknown debug event: enterRule
> >> > PLSQL3c.g select_statement unknown debug event: location 640 5
> >> > unknown debug event: enterRule PLSQL3c.g select_command unknown
> >> > debug event: location 583 5 unknown debug
> >> > event: enterRule PLSQL3c.g to_modify_data unknown debug event:
> >> > location
> >> > 574 5 unknown debug event: enterRule PLSQL3c.g sql_command unknown
> >> > debug event: location 569 5 unknown debug event: enterRule
> >> > PLSQL3c.g sql_statement unknown debug event: location 147 5 unknown
> debug event:
> >> > enterRule PLSQL3c.g statement unknown debug event: location 126 14
> >> > unknown debug event: enterSubRule 20 unknown debug event:
> >> > enterDecision 20 unknown debug event: LT 1 9 4 0 1 22 "; unknown
> >> > debug
> >> > event: LT 2 0 -1 0 1 -1 "<EOF> unknown debug event: exitDecision 20
> >> > unknown debug event: exitSubRule 20 unknown debug event: location
> >> > 126
> >> > 32 unknown debug event: enterSubRule 21 unknown debug event:
> >> > enterDecision 21 unknown debug event: LT 1 9 4 0 1 22 "; unknown
> >> > debug
> >> > event: exitDecision 21 unknown debug event: enterAlt 1 unknown
> >> > debug
> >> > event: location 126 32 unknown debug event: LT 1 9 4 0 1 22 ";
> >> > unknown debug event: consumeToken 9 4 0 1 22 "; unknown debug
> event:
> >> > exitSubRule 21 unknown debug event: location 126 38 unknown debug
> >> > event: LT 1 0 -1 0 1 -1 "<EOF> unknown debug event: consumeToken 0
> >> > -1 0
> >> 1
> >> > -1 "<EOF> unknown debug event: location 127 2 unknown debug event:
> >> > enterRule PLSQL3c.g parse_statements
> >> > java.net.SocketException: Connection reset
> >> > java.net.SocketException: Connection reset
> >> >         at
> >> > java.net.SocketInputStream.read(SocketInputStream.java:168)
> >> >         at
> >> > sun.nio.cs.StreamDecoder.readBytes(StreamDecoder.java:264)
> >> >         at
> >> > sun.nio.cs.StreamDecoder.implRead(StreamDecoder.java:306)
> >> >         at sun.nio.cs.StreamDecoder.read(StreamDecoder.java:158)
> >> >         at
> >> > java.io.InputStreamReader.read(InputStreamReader.java:167)
> >> >         at java.io.BufferedReader.fill(BufferedReader.java:136)
> >> >         at java.io.BufferedReader.readLine(BufferedReader.java:299)
> >> >         at java.io.BufferedReader.readLine(BufferedReader.java:362)
> >> >         at
> >> > org.antlr.runtime.debug.RemoteDebugEventSocketListener.eventHandler
> >> > (R
> >> > emoteDebugEventSocketListener.java:178)
> >> >         at
> >> > org.antlr.runtime.debug.RemoteDebugEventSocketListener.run(RemoteDe
> >> > b
> >> > u
> >> > gEventSocketListener.java:472)
> >> >         at java.lang.Thread.run(Thread.java:619)
> >> >
> >> >
> >> > What am I doing wrong?
> >> >
> >> > Andi
> >> >
> >> > --
> >> > Achtung Sicherheitswarnung: GMX warnt vor Phishing-Attacken!
> >> > http://portal.gmx.net/de/go/sicherheitspaket
> >> >
> >> > List: http://www.antlr.org/mailman/listinfo/antlr-interest
> >> > Unsubscribe:
> >> > http://www.antlr.org/mailman/options/antlr-interest/your-
> >> > email-address
> >>
> >>
> >> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> >> Unsubscribe:
> >> http://www.antlr.org/mailman/options/antlr-interest/your-email-addres
> >> s
> >
> > --
> > Achtung Sicherheitswarnung: GMX warnt vor Phishing-Attacken!
> > http://portal.gmx.net/de/go/sicherheitspaket
> >
> > List: http://www.antlr.org/mailman/listinfo/antlr-interest
> > Unsubscribe:
> > http://www.antlr.org/mailman/options/antlr-interest/your-email-address
> >


From troy.daniels at baesystems.com  Thu Sep  9 14:18:25 2010
From: troy.daniels at baesystems.com (Daniels, Troy (US SSA))
Date: Thu, 9 Sep 2010 17:18:25 -0400
Subject: [antlr-interest] Tell ANTLR to ignore parsing errors?
In-Reply-To: <047a01cb5041$43432000$c9c96000$@temporal-wave.com>
References: <20100909124443.56320@gmx.net>
	<040d01cb502a$55294e50$ff7beaf0$@temporal-wave.com>
	<20100909143223.56320@gmx.net>
	<041501cb5033$71ff44e0$55fdcea0$@temporal-wave.com>
	<20100909165631.66500@gmx.net>
	<047a01cb5041$43432000$c9c96000$@temporal-wave.com>
Message-ID: <ED474DDA5167ED448245DD89A4718EC9A23A076594@GLDMS60322.goldlnk.rootlnka.net>

 The na?ve way to do that creates problems:

CREATE_USER: "CREATE USER";

Only one of the next three lines will match that, but you almost certainly want all of them to match.

CREATE USER
CREATE  USER
CREATE<tab>USER

You could write it as 

CREATE_USER: "CREATE" WS+ "USER";

Even so, when the user types "CREATE UZER" instead, this will give a lexer error, rather than a parser error.  Its much more difficult to provide a meaningful error message from the lexer, since it does not have the context that the parser does.

If there are situations where CREATE is a valid user-specified identifier, you can't handle that case if you have CREATE_USER as a lexer token.

Troy

> -----Original Message-----
> From: antlr-interest-bounces at antlr.org 
> [mailto:antlr-interest-bounces at antlr.org] On Behalf Of Jim Idle
> Sent: Thursday, September 09, 2010 1:06 PM
> To: antlr-interest at antlr.org
> Subject: Re: [antlr-interest] Tell ANTLR to ignore parsing errors?
> 
> No - don't make whitespace significant unless the language 
> absolutely makes you do so.
> 
> What you have to do is left factor:
> 
> create
>     : CREATE
>     (
>            cr_table
>         | cr_user
>         | cr_trigger
>     )
>  ;
> 
> cr_table
>  : TABLE .....
> 
> Jim
> 
> > -----Original Message-----
> > From: Andi Clemens [mailto:Andi.Clemens at gmx.net]
> > Sent: Thursday, September 09, 2010 9:57 AM
> > To: Jim Idle; antlr-interest at antlr.org
> > Subject: Re: [antlr-interest] Tell ANTLR to ignore parsing errors?
> > 
> > Ok, thanks for the answers.
> > 
> > One final question: Would it be better to have tokens like 
> "CREATE USER"
> > and "CREATE TABLE" in the lexer or doesn't this work anyway 
> because of 
> > the whitespace?
> > 
> > Andi
> > 
> > -------- Original-Nachricht --------
> > > Datum: Thu, 9 Sep 2010 08:26:59 -0700
> > > Von: "Jim Idle" <jimi at temporal-wave.com>
> > > An: antlr-interest at antlr.org
> > > Betreff: Re: [antlr-interest] Tell ANTLR to ignore parsing errors?
> > 
> > > When putting things in the parser, you have not enough 
> control over 
> > > the tokens both in terms of what they are named in code 
> generation 
> > > time (hence error messages are difficult, and producing a tree 
> > > parser is difficult), and you cannot see the potential 
> ambiguities 
> > > in your lexer. It just makes things more difficult for 
> no(IMO) advantage.
> > >
> > > If you have told the input stream to be case insensitive, 
> then I am 
> > > afraid that the problem is going to be with your grammar. 
> You will 
> > > have to single step though the code to find out why.
> > >
> > > Jim
> > >
> > > > -----Original Message-----
> > > > From: Andi Clemens [mailto:Andi.Clemens at gmx.net]
> > > > Sent: Thursday, September 09, 2010 7:32 AM
> > > > To: Jim Idle; antlr-interest at antlr.org
> > > > Subject: Re: [antlr-interest] Tell ANTLR to ignore 
> parsing errors?
> > > >
> > > > Yes it is case insensitive. What is the difference if I 
> add "CREATE"
> > > > or
> > > similar to
> > > > the lexer?
> > > > Is it more reliable in detecting the right tokens?
> > > >
> > > > Andi
> > > >
> > > > -------- Original-Nachricht --------
> > > > > Datum: Thu, 9 Sep 2010 07:21:45 -0700
> > > > > Von: "Jim Idle" <jimi at temporal-wave.com>
> > > > > An: antlr-interest at antlr.org
> > > > > Betreff: Re: [antlr-interest] Tell ANTLR to ignore 
> parsing errors?
> > > >
> > > > > If you are getting errors it is because your grammar 
> is incorrect.
> > > > > Oracle SQL is a huge grammar to undertake and you 
> cannot 'hack' it.
> > > > > Your token in the parser (which you should move to the lexer 
> > > > > anyway
> > > and
> > > > not use 'LITERAL'
> > > > > in your parser code) is CREATEE but your input is create. Did 
> > > > > you tell the runtime to be case insensitive?
> > > > >
> > > > > Read the API or use antlr.markmail.org to see how to override 
> > > > > displayRecognitionError(). You cannot just ignore 
> errors though 
> > > > > because somehow you have to recover. You could just make them 
> > > > > silent and when the parser returns if the error count 
> is >0 then 
> > > > > ignore that
> > > source
> > > > or something.
> > > > >
> > > > > I will have a commercial version of Oracle SQOL and PLSQL 
> > > > > available before too long too.
> > > > >
> > > > > Jim
> > > > >
> > > > >
> > > > >
> > > > > > -----Original Message-----
> > > > > > From: antlr-interest-bounces at antlr.org 
> [mailto:antlr-interest- 
> > > > > > bounces at antlr.org] On Behalf Of Andi Clemens
> > > > > > Sent: Thursday, September 09, 2010 5:45 AM
> > > > > > To: antlr-interest at antlr.org
> > > > > > Subject: [antlr-interest] Tell ANTLR to ignore 
> parsing errors?
> > > > > >
> > > > > > Hi,
> > > > > >
> > > > > > I use this ANTLR grammar file to parse Oracle 
> PL/SQL statements:
> > > > > > http://pastebin.com/uy0wZTax
> > > > > >
> > > > > > But some of the statements produce errors when I 
> try to parse 
> > > > > > them, for
> > > > > > example:
> > > > > >
> > > > > > "create user u1 identified by p1 account unlock;"
> > > > > >
> > > > > > I get the following error message:
> > > > > >
> > > > > > ==============================
> > > > > > statementString(1)  : error 3 : , at offset -1
> > > > > >     near [Index: 0 (Start: 141054912-Stop: 141054917) 
> > > > > > ='create',
> > > > > type<50> Line:
> > > > > > 1 LinePos:-1]
> > > > > >      : cannot match to any predicted input...
> > > > > > ==============================
> > > > > >
> > > > > > But why? The rule looks like this:
> > > > > > ============================== create_user_statement
> > > > > > 	:	'CREATE' 'USER' identifier 'INDENTIFIED' .*
> > > > > > 	;
> > > > > > ==============================
> > > > > >
> > > > > > Could the wildcard character be the problem?
> > > > > > Actually I just want to parse known Statements with my 
> > > > > > grammar, all unknown statements (parsing errors) 
> could be ignored.
> > > > > >
> > > > > > Can I tell ANTLR (for the C target) to ignore those error 
> > > > > > messages and
> > > > > just
> > > > > > return FALSE or something like that, so that I can decide 
> > > > > > wether to take
> > > > > an
> > > > > > appropiate action?
> > > > > >
> > > > > > I get a lot of those error messages, and to be honest, the 
> > > > > > error
> > > > > messages are
> > > > > > not helping me here. I can not see problems with 
> the grammar.
> > > > > > Unfortunately I'm not able to debug the grammar 
> with ANTLRworks.
> > > > > >
> > > > > > Can someone show me the error or tell me a way to disable 
> > > > > > those error messages in the ANTLR C target?
> > > > > >
> > > > > > Andi
> > > > > >
> > > > > > --
> > > > > > GMX DSL SOMMER-SPECIAL: Surf & Phone Flat 16.000 
> f?r nur 19,99
> > > > > > Euro/mtl.!* http://portal.gmx.net/de/go/dsl
> > > > > >
> > > > > > List: http://www.antlr.org/mailman/listinfo/antlr-interest
> > > > > > Unsubscribe:
> > > > > > http://www.antlr.org/mailman/options/antlr-interest/your-
> > > > > > email-address
> > > > >
> > > > >
> > > > > List: http://www.antlr.org/mailman/listinfo/antlr-interest
> > > > > Unsubscribe:
> > > > > 
> http://www.antlr.org/mailman/options/antlr-interest/your-email-a
> > > > > dd
> > > > > ress
> > > >
> > > > --
> > > > GMX DSL SOMMER-SPECIAL: Surf & Phone Flat 16.000 f?r nur 19,99
> > > > Euro/mtl.!* http://portal.gmx.net/de/go/dsl
> > >
> > >
> > > List: http://www.antlr.org/mailman/listinfo/antlr-interest
> > > Unsubscribe:
> > > 
> http://www.antlr.org/mailman/options/antlr-interest/your-email-addre
> > > ss
> > 
> > --
> > Achtung Sicherheitswarnung: GMX warnt vor Phishing-Attacken!
> > http://portal.gmx.net/de/go/sicherheitspaket
> 
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: 
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
> 

From thomas.davis at student.adelaide.edu.au  Fri Sep 10 05:39:20 2010
From: thomas.davis at student.adelaide.edu.au (Thomas Davis)
Date: Fri, 10 Sep 2010 22:09:20 +0930
Subject: [antlr-interest] Recursive Tree Walking C Target
Message-ID: <AANLkTim_KznvE5rMgRi5mrFM3OTS_BzWbC+_VwDbCcDT@mail.gmail.com>

Just wondering if anyone had any tips for recursively walking an
ANTLR_BASE_TREE produced from a parser. I seem to be getting some memory
issues.

I.e. A snippet of my evaluate method is:

std::string ConditionTree::evaluate(pANTLR3_BASE_TREE root) {

 //Variable declarations
 std::string value1 = "";
 std::string value2 = "";

 //Firstly get the textual description from the node
 std::string nodeText = (const char*) root->getText(root)->chars;
 qDebug() << "Node Text: " << nodeText.c_str() << "\n";

 //Get the nodes children and check to make sure there are some
 pANTLR3_VECTOR children = root->children;
 qDebug() << "Got the chidlren";

 if(children != NULL) {
  int count = children->count;
  qDebug() << "Number of Children: " << count;

   pANTLR3_BASE_TREE c1 = (pANTLR3_BASE_TREE) children->get(children,0);
   pANTLR3_BASE_TREE c2 = (pANTLR3_BASE_TREE) children->get(children,1);
   value1 = evaluate(c1);
   value2 = evaluate(c2);

}

There's extra bits of code between and surrounding but this is just showing
the basics of what i'm trying to achieve. When i first enter this method i
do:

 pANTLR3_VECTOR children = m_tree->children;
 pANTLR3_BASE_TREE root = (pANTLR3_BASE_TREE) children->get(children,0);
 m_currValue = evaluate(root);

Because i need to ignore the first part of the node. The problem i get now
is that passing root in i wont get the correct node text, and either with
the children, its just printing out garbage. Is there anything i'm doing
thats obviously wrong. I just had the thought that maybe i should be
declaring root as a class variable to keep it in scope and cleaning it up in
the destructor?? In my full implementation you can get several levels of
recursion deep, i.e. evaluate(c1) may go a number of extra levels down.

Any help would be great on this problem, its probably something obvious, lol
:)

Tom

From kenneth.domino at domemtech.com  Fri Sep 10 09:14:48 2010
From: kenneth.domino at domemtech.com (Kenneth Domino)
Date: Fri, 10 Sep 2010 12:14:48 -0400
Subject: [antlr-interest] Recursive Tree Walking C Target
In-Reply-To: <AANLkTim_KznvE5rMgRi5mrFM3OTS_BzWbC+_VwDbCcDT@mail.gmail.com>
References: <AANLkTim_KznvE5rMgRi5mrFM3OTS_BzWbC+_VwDbCcDT@mail.gmail.com>
Message-ID: <B33D06EF21594FE3B7E23FB9D55E1F7C@KenPC2010>

> Just wondering if anyone had any tips for recursively walking an
> ANTLR_BASE_TREE produced from a parser. I seem to be getting some memory
> issues.

FYI, I transform the Antlr tree into my own C++ data structure for tree 
walking.
E.g.,

#pragma once
#include <vector>
class TREE
{
public:
   int GetType();
   char * GetText();
   TREE * GetChild(int index);
   int GetChildCount();
   void SetText(char * text);
   void SetType(int type);
   void AddChild(TREE * child);
private:
   std::vector<TREE*> children;
   int type;
   char * text;
};

and,

// Convert an Antlr tree into TREE data structure.
TREE * convert(pANTLR3_BASE_TREE node)
{
   TREE * result = new TREE();
   char * text =
     CUDA_EMULATOR::Singleton()->StringTableEntry(
            (char*)node->getText(node)->chars);
   result->SetText(text);
   int type = node->getType(node);
   result->SetType(type);
   for (int i = 0; i < (int)node->getChildCount(node); ++i)
   {
      pANTLR3_BASE_TREE child = (pANTLR3_BASE_TREE)node->getChild(node, i);
      TREE * c = convert(child);
      result->AddChild(c);
   }
   return result;
}

...
   pANTLR3_BASE_TREE tree = langAST.tree;
   TREE * result = convert(tree);
...

With this conversion, I can now do things more easily, because I don't use
the Antlr C runtime data structures, which are hard for me to understand and
debug.  (I still cannot understand why the target isn't just C++.)  I can 
now
add an iterator for tree walking, or change the behavior of getText(), which
allocates a new copy of the string everytime it is called.
In addition, in my tree walker I need to associate associate some data
with each node. I could create a std::map<pANTLR3_BASE_TREE, DATA *>
but this was slow because of all the thousands of nodes.
Alternatively, I could have tried to modify the default node
type in tree construction, but I could not find an example to make my life
easier, and I am not motivated enough to read and understand
"newPoolTree (pANTLR3_ARBORETUM factory)" in antlr3commontree.c.
The examples in http://www.antlr.org/download/examples-v3.tar.gz, via
http://antlr.org/download.html, are not that useful.
And although there was some discussion of default node type construction in
the C target in the past (
http://antlr.markmail.org/message/cqhgi7dzc36ntl6n?q=%2Btree+%2Badaptor+c+target
http://antlr.markmail.org/message/eryizmbwlsxzlswf?q=%2Btree+node++default+c
http://antlr.markmail.org/message/nh5ws6vqxt3zjpwa?q=tree+node++default+c+custom
), it is not concrete enough for me.

Ken
 


From jimi at temporal-wave.com  Fri Sep 10 09:26:40 2010
From: jimi at temporal-wave.com (Jim Idle)
Date: Fri, 10 Sep 2010 09:26:40 -0700
Subject: [antlr-interest] Recursive Tree Walking C Target
In-Reply-To: <AANLkTim_KznvE5rMgRi5mrFM3OTS_BzWbC+_VwDbCcDT@mail.gmail.com>
References: <AANLkTim_KznvE5rMgRi5mrFM3OTS_BzWbC+_VwDbCcDT@mail.gmail.com>
Message-ID: <05ad01cb5104$f2b07240$d81156c0$@temporal-wave.com>

I would not use the getText() method if I were you as that is just a
convenience I created if you are just hacking something up. Look at what
that method does and copy it to produce your c_str directly.

Next, you are assuming that there are always 2 children, but ANTLR produces
a tree which has 0..n nodes.

So, look at the function makeDot() in antlr3basetreeadaptor.c and copy it.
This code does in fact use getText(), but it does so because I don't know
how long you will want to keep the strings around so they are tracked by the
string factory and released when you free the tree.

Jim

> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of Thomas Davis
> Sent: Friday, September 10, 2010 5:39 AM
> To: antlr-interest at antlr.org
> Subject: [antlr-interest] Recursive Tree Walking C Target
> 
> Just wondering if anyone had any tips for recursively walking an
> ANTLR_BASE_TREE produced from a parser. I seem to be getting some memory
> issues.
> 
> I.e. A snippet of my evaluate method is:
> 
> std::string ConditionTree::evaluate(pANTLR3_BASE_TREE root) {
> 
>  //Variable declarations
>  std::string value1 = "";
>  std::string value2 = "";
> 
>  //Firstly get the textual description from the node  std::string
> nodeText = (const char*) root->getText(root)->chars;
>  qDebug() << "Node Text: " << nodeText.c_str() << "\n";
> 
>  //Get the nodes children and check to make sure there are some
> pANTLR3_VECTOR children = root->children;
>  qDebug() << "Got the chidlren";
> 
>  if(children != NULL) {
>   int count = children->count;
>   qDebug() << "Number of Children: " << count;
> 
>    pANTLR3_BASE_TREE c1 = (pANTLR3_BASE_TREE) children->get(children,0);
>    pANTLR3_BASE_TREE c2 = (pANTLR3_BASE_TREE) children->get(children,1);
>    value1 = evaluate(c1);
>    value2 = evaluate(c2);
> 
> }
> 
> There's extra bits of code between and surrounding but this is just
> showing the basics of what i'm trying to achieve. When i first enter
> this method i
> do:
> 
>  pANTLR3_VECTOR children = m_tree->children;  pANTLR3_BASE_TREE root =
> (pANTLR3_BASE_TREE) children->get(children,0);  m_currValue =
> evaluate(root);
> 
> Because i need to ignore the first part of the node. The problem i get
> now is that passing root in i wont get the correct node text, and either
> with the children, its just printing out garbage. Is there anything i'm
> doing thats obviously wrong. I just had the thought that maybe i should
> be declaring root as a class variable to keep it in scope and cleaning
> it up in the destructor?? In my full implementation you can get several
> levels of recursion deep, i.e. evaluate(c1) may go a number of extra
> levels down.
> 
> Any help would be great on this problem, its probably something obvious,
> lol
> :)
> 
> Tom
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
> email-address


From jimi at temporal-wave.com  Fri Sep 10 10:36:20 2010
From: jimi at temporal-wave.com (Jim Idle)
Date: Fri, 10 Sep 2010 10:36:20 -0700
Subject: [antlr-interest] Recursive Tree Walking C Target
In-Reply-To: <B33D06EF21594FE3B7E23FB9D55E1F7C@KenPC2010>
References: <AANLkTim_KznvE5rMgRi5mrFM3OTS_BzWbC+_VwDbCcDT@mail.gmail.com>
	<B33D06EF21594FE3B7E23FB9D55E1F7C@KenPC2010>
Message-ID: <05d001cb510e$ae278a50$0a769ef0$@temporal-wave.com>



> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of Kenneth Domino
> Sent: Friday, September 10, 2010 9:15 AM
> To: Thomas Davis; antlr-interest at antlr.org
> Subject: Re: [antlr-interest] Recursive Tree Walking C Target
> 
> > Just wondering if anyone had any tips for recursively walking an
> > ANTLR_BASE_TREE produced from a parser. I seem to be getting some
> > memory issues.
> 
> FYI, I transform the Antlr tree into my own C++ data structure for tree
> walking.

Not sure why you would need to do this, you are just adding an extra layer
and I don't see that you are getting much for your added complexity.

> E.g.,
> 
> #pragma once
> #include <vector>


> With this conversion, I can now do things more easily, because I don't
> use the Antlr C runtime data structures, which are hard for me to
> understand and debug.  (I still cannot understand why the target isn't
> just C++.)  
 
For a start, a C++ target will generally have more overhead as it isn't
quite as close to the metal. Secondly though, C++ compilers are not
universally available, whereas almost every platform has a C compiler.
Thirdly, many professional software companies do not allow C++ because not
enough people understand it properly and they end up with unfathomable,
uncommented, C++. Hence C is the basis of everything and in this case
deliberately so.

> I can now add an iterator for tree walking, or change the
> behavior of getText(), which allocates a new copy of the string
> everytime it is called.

Unless you install your own function, which is why all the structures use
pointers to functions. But as I have said many times, getText() is really
not meant for hard core work. I also explained to you that I can't know what
you want to do with the text, so if you call getText, you will get another
copy. If I don't do that, then you would manipulate what I give you and it
would become the text for the token as a byproduct of using it, which is not
what you want (generally). If you want to preserve the text, don't call
getText - cache it. There is even a pointer that you can use in the token
structure. If I made the default be what you want, then it would be
incorrect for most purposes. You also misunderstood the code as you were
looking at the code that decides if the lexer has overridden the default
text or not, but don't let that stop you commenting. Finally, if you are not
changing the text, then don't copy it at all, just use the pointer to the
input, which is stored in the token.

The C code is completely flexible, but it is raw C, aimed at being as fast
as it can be and does not come for free. I can't help thinking that you have
done a lot more work here than you would have done if you had read through
the docs or asked a few more questions even. 

> In addition, in my tree walker I need to associate associate some data
> with each node. I could create a std::map<pANTLR3_BASE_TREE, DATA *> but
> this was slow because of all the thousands of nodes.

Yes, because you are performing thousands of new(), another reason I did not
write this in C++. You say you don't understand why it isn't C++ but  in the
next breath, you immediately run across one of the problems of doing that in
C++ or trying to make the runtime be all encompassing for all purposes; it
deliberately isn't. Reading the comments, you would have seen that I thought
of all that and that is why there is a void * that you can use for anything
you like. 
 

> Alternatively, I could have tried to modify the default node type in
> tree construction, but I could not find an example to make my life
> easier, and I am not motivated enough to read and understand
> "newPoolTree (pANTLR3_ARBORETUM factory)" in antlr3commontree.c.

Well, if you are not going to read the code and comments and doxygen, you
won't see that there are fields in the default node that are specifically
reserved for holding data. They are also documented in the doxygen docs.

----
void *  u 
  Generic void pointer allows the grammar programmer to attach any structure
they like to a tree node, 
  in many cases saving the need to create their own tree and tree adaptors. 
---


I am happy that you have something working that fits your needs, but you say
that you don't understand the code, and you don't have the background
information for the WHYs (though that is in the comments and doxygen), and
you say you are not motivated enough (I hope your employer doesn't read this
list :-) to put the time in to read the docs... 

  ...so perhaps you should reserve your opinions as to why I put things
together the way I did instead of trying to lead others down the same path
as yourself? I don't mind you finding your own way through it, but...

Jim 



From Nieves.Salor.Moral at esa.int  Fri Sep 10 12:09:02 2010
From: Nieves.Salor.Moral at esa.int (Nieves.Salor.Moral at esa.int)
Date: Fri, 10 Sep 2010 21:09:02 +0200
Subject: [antlr-interest] Nieves Salor Moral is out of the office.
Message-ID: <OF091003B4.095237AD-ONC125779A.00693297-C125779A.00693297@esa.int>

I will be out of the office starting  10/09/2010 and will not return until
26/09/2010.

I will respond to your message when I return. For urgent matters, please
contact Serge Valera.


From pureza at gmail.com  Fri Sep 10 14:37:24 2010
From: pureza at gmail.com (Luis Pureza)
Date: Fri, 10 Sep 2010 22:37:24 +0100
Subject: [antlr-interest] Parsing portions of the input with different
	grammars.
Message-ID: <AANLkTinP45dRa=KWdduu-UZT0m-cfxr-_wdrpz9GC+CS@mail.gmail.com>

Hi,

Is there any way i can parse a portion of text using a rule from
grammar A, while parsing the rest of the text with grammar B?

More concretely, I have an expression grammar which is central to my
project and used everywhere. But now, I need to parse new kinds of
inputs which may contain expressions inside. For this, I'm creating a
new grammar. However, I'd like to reuse the old grammar just to parse
the expressions. I don't want to modify it because it is a generic
grammar and the new use-case is too specific. Moreover, I'd prefer not
to copy the entire grammar verbatim into the new one, because then I'd
have two expression grammars to maintain.

What I really want is some mechanism that allows me to express "Parse
the entire thing with grammar A, except expressions, which are
delegated to the Expression grammar".

What is the best way to achieve this?

Thank you,

Lu?s Pureza

From jimi at temporal-wave.com  Fri Sep 10 15:06:40 2010
From: jimi at temporal-wave.com (Jim Idle)
Date: Fri, 10 Sep 2010 15:06:40 -0700
Subject: [antlr-interest] Parsing portions of the input with
	different	grammars.
In-Reply-To: <AANLkTinP45dRa=KWdduu-UZT0m-cfxr-_wdrpz9GC+CS@mail.gmail.com>
References: <AANLkTinP45dRa=KWdduu-UZT0m-cfxr-_wdrpz9GC+CS@mail.gmail.com>
Message-ID: <064d01cb5134$7208ce00$561a6a00$@temporal-wave.com>

Look at the examples and find 'island grammars', If your switch over can be
triggered lexically, then it is very easy.

Jim

> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of Luis Pureza
> Sent: Friday, September 10, 2010 2:37 PM
> To: antlr-interest at antlr.org
> Subject: [antlr-interest] Parsing portions of the input with different
> grammars.
> 
> Hi,
> 
> Is there any way i can parse a portion of text using a rule from grammar
> A, while parsing the rest of the text with grammar B?
> 
> More concretely, I have an expression grammar which is central to my
> project and used everywhere. But now, I need to parse new kinds of
> inputs which may contain expressions inside. For this, I'm creating a
> new grammar. However, I'd like to reuse the old grammar just to parse
> the expressions. I don't want to modify it because it is a generic
> grammar and the new use-case is too specific. Moreover, I'd prefer not
> to copy the entire grammar verbatim into the new one, because then I'd
> have two expression grammars to maintain.
> 
> What I really want is some mechanism that allows me to express "Parse
> the entire thing with grammar A, except expressions, which are delegated
> to the Expression grammar".
> 
> What is the best way to achieve this?
> 
> Thank you,
> 
> Lu?s Pureza
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
> email-address


From parrt at cs.usfca.edu  Sat Sep 11 11:49:25 2010
From: parrt at cs.usfca.edu (Terence Parr)
Date: Sat, 11 Sep 2010 11:49:25 -0700
Subject: [antlr-interest] parrt offline for 1 month Sept 15 - Oct 15, 2010
Message-ID: <845E7FAA-CAD9-4C68-83B8-62CF48CAF155@cs.usfca.edu>

Hiya, I'll be on minimal email for one month due to medical leave  
starting Tue or so next week.

Ter

From mobile at majumdar.org.uk  Sat Sep 11 16:51:35 2010
From: mobile at majumdar.org.uk (Dibyendu Majumdar)
Date: Sun, 12 Sep 2010 00:51:35 +0100
Subject: [antlr-interest] ANTLR first time user getting error
Message-ID: <AANLkTin6pb1MCd0_g07MNAPz+2fe_8TK+t4TQeTewmje@mail.gmail.com>

Hi,

I am trying to use ANTLR for the first time, and am getting an error when
trying to run the grammar shown below; I would be grateful for any help in
identifying what the issue is.

The test input I am using is:

package test;

I am using the Eclipse ANTLR IDE plugin and when I try to interpret above, I
get:
MimatchedTokenException: Line 1:7 mismatched input '' expecting '\u0006'

Below is the grammar I am using:

----------------------------------

grammar Problematic;

options {
  language = Java;
}

compilationUnit
    :   packageDeclaration
    ;

packageDeclaration
    :   PACKAGE qualifiedName SEMI
    ;

qualifiedName
    :   IDENTIFIER (DOT IDENTIFIER)*
    ;

WS
    :   (
             ' '
        |    '\r'
        |    '\t'
        |    '\u000C'
        |    '\n'
        )
            {
                skip();
            }
    ;

PACKAGE
    :   'package'
    ;

SEMI
    :   ';'
    ;

DOT
    :   '.'
    ;

IDENTIFIER
    :   ('a'..'z'|'A'..'Z'|'_'|'$') ('a'..'z'|'A'..'Z'|'_'|'0'..'9'|'$')*
    ;

From mobile at majumdar.org.uk  Sat Sep 11 17:20:58 2010
From: mobile at majumdar.org.uk (Dibyendu Majumdar)
Date: Sun, 12 Sep 2010 01:20:58 +0100
Subject: [antlr-interest] Fwd: ANTLR first time user getting error
In-Reply-To: <AANLkTin6pb1MCd0_g07MNAPz+2fe_8TK+t4TQeTewmje@mail.gmail.com>
References: <AANLkTin6pb1MCd0_g07MNAPz+2fe_8TK+t4TQeTewmje@mail.gmail.com>
Message-ID: <AANLkTinPtnuWoz6uNhMEFahFF5RnJiJ7PuvkEVZQ_G2c@mail.gmail.com>

The grammar works if  I change the packageDeclaration production as follows:

packageDeclaration

    :   PACKAGE WS qualifiedName SEMI

    ;
So it seems something is amiss with the handling of whitespace. Any tips?

Thanks and Regards
Dibyendu

---------- Forwarded message ----------
From: Dibyendu Majumdar <mobile at majumdar.org.uk>
Date: 12 September 2010 00:51
Subject: ANTLR first time user getting error
To: antlr-interest at antlr.org


Hi,

I am trying to use ANTLR for the first time, and am getting an error when
trying to run the grammar shown below; I would be grateful for any help in
identifying what the issue is.

The test input I am using is:

package test;

I am using the Eclipse ANTLR IDE plugin and when I try to interpret above, I
get:
MimatchedTokenException: Line 1:7 mismatched input '' expecting '\u0006'

Below is the grammar I am using:

----------------------------------

grammar Problematic;

options {
  language = Java;
}

compilationUnit
    :   packageDeclaration
    ;

packageDeclaration
    :   PACKAGE qualifiedName SEMI
    ;

qualifiedName
    :   IDENTIFIER (DOT IDENTIFIER)*
    ;

WS
    :   (
             ' '
        |    '\r'
        |    '\t'
        |    '\u000C'
        |    '\n'
        )
            {
                skip();
            }
    ;

PACKAGE
    :   'package'
    ;

SEMI
    :   ';'
    ;

DOT
    :   '.'
    ;

IDENTIFIER
    :   ('a'..'z'|'A'..'Z'|'_'|'$') ('a'..'z'|'A'..'Z'|'_'|'0'..'9'|'$')*
    ;

From bkiers at gmail.com  Sat Sep 11 23:57:24 2010
From: bkiers at gmail.com (Bart Kiers)
Date: Sun, 12 Sep 2010 08:57:24 +0200
Subject: [antlr-interest] ANTLR first time user getting error
In-Reply-To: <AANLkTin6pb1MCd0_g07MNAPz+2fe_8TK+t4TQeTewmje@mail.gmail.com>
References: <AANLkTin6pb1MCd0_g07MNAPz+2fe_8TK+t4TQeTewmje@mail.gmail.com>
Message-ID: <AANLkTi=EHr5yQGc35CDx-ZBb4s=eQJrHzRBnVSX5fVhc@mail.gmail.com>

On Sun, Sep 12, 2010 at 1:51 AM, Dibyendu Majumdar
<mobile at majumdar.org.uk>wrote:

> Hi,
>
> I am trying to use ANTLR for the first time, and am getting an error when
> trying to run the grammar shown below; I would be grateful for any help in
> identifying what the issue is.
>
> The test input I am using is:
>
> package test;
>
> I am using the Eclipse ANTLR IDE plugin and when I try to interpret above,
> I
> get:
> MimatchedTokenException: Line 1:7 mismatched input '' expecting '\u0006'
>
>

Here's the same grammar except with a little main method in the parser:

grammar Problematic;

@members {
    public static void main(String[] args) throws Exception {
        String source = "package test;";
        ANTLRStringStream in = new ANTLRStringStream(source);
        ProblematicLexer lexer = new ProblematicLexer(in);
        CommonTokenStream tokens = new CommonTokenStream(lexer);
        ProblematicParser parser = new ProblematicParser(tokens);
        parser.compilationUnit();
    }
}

compilationUnit
   :   packageDeclaration
   ;

packageDeclaration
   :   PACKAGE qualifiedName SEMI
   ;

qualifiedName
   :   IDENTIFIER (DOT IDENTIFIER)*
   ;

WS
   :   (    ' '
       |    '\r'
       |    '\t'
       |    '\u000C'
       |    '\n'
       )
           {
               skip();
           }
   ;

PACKAGE
   :   'package'
   ;

SEMI
   :   ';'
   ;

DOT
   :   '.'
   ;

IDENTIFIER
   :   ('a'..'z'|'A'..'Z'|'_'|'$') ('a'..'z'|'A'..'Z'|'_'|'0'..'9'|'$')*
   ;


and when generating a parser/lexer from the grammar, and running the
parser (under Windows, replace the colons in the commands below by
semi-colons.):

java -cp antlr-3.2.jar org.antlr.Tool Problematic.g
javac -cp .:antlr-3.2.jar *.java
java -cp .:antlr-3.2.jar ProblematicParser


there are no problems whatsoever.
So there must be something wrong with your Eclipse plugin and not with ANTLR
itself.

Regards,

Bart.

From dr.jaymahdi at gmail.com  Sun Sep 12 08:17:29 2010
From: dr.jaymahdi at gmail.com (Jay T)
Date: Sun, 12 Sep 2010 11:17:29 -0400
Subject: [antlr-interest] Eclipse Settings? - TreeWalker Grammar never
	compiles in ANTLR IDE
Message-ID: <AANLkTimocobAv=rhB_2ftNyM3j-oozsMGvgfF28fNHOK@mail.gmail.com>

Hi:

I have a question in regards of the settings in Eclipse 3.5.2 and ANTLR IDE
2.0.2 .

For some reason, my TreeWalker (or TreeGrammar) never compiles with the
accompanying parserGrammar; however my TreeGrammar does compile in
antlrworks v. 1.4 . Is there a missing setting that I need to apply for
TreeGrammars in Eclipse? Or is this a bug that I can work around with
antlrworks?

Thanks

J

From tomasz.belina at gmail.com  Sun Sep 12 13:46:16 2010
From: tomasz.belina at gmail.com (Tomasz Belina)
Date: Sun, 12 Sep 2010 22:46:16 +0200
Subject: [antlr-interest] Seperating parsing phase from action execution
Message-ID: <AANLkTinuiw5Qnk7-MxcYzFfc_XiR7yDKkuJK1JAEjzWV@mail.gmail.com>

Hi,

I wrote grammer for expression evaluator and this grammer contains
actions resposible for evalutions. Single expression will be evaluated
more then once so I want to avoid multiple parsing the same
expression. It would be greate to build syntax tree on time and use
this tree to evaluated expression in multiple contexts. Is there
simple way in antlr to do such thing ?

Tomasz

From bourgon.a at gmail.com  Sun Sep 12 13:59:53 2010
From: bourgon.a at gmail.com (Armel BOURGON-DROUOT)
Date: Sun, 12 Sep 2010 22:59:53 +0200
Subject: [antlr-interest] Issue when compiling c files generate by antlr
Message-ID: <AANLkTikCmVg_uf8kuEYUd0ekws_Cer1ut0ZcSE5YNRsS@mail.gmail.com>

Hello everyone,

I will use antlr in an academic project. For now I just want to set up
the environment (under mac osx 10.6.
Following the examples from my teacher I face an issue:

1) I have installed ANTLRWorks, and I'm able to generate *Lexer.c/h and
*Parser.c/h from the *.g file given by my teacher.

2) To compile these files I download libantlr3c then I compile and install
it by :
./configure
make
sudo make install
 After that I have libantlr3c.a, libantlr3c.la and libantlr3c.dylib in
/usr/local/lib.

3) I try to compile the c files using this makefile :

name = Calculette

all: ./output/$(name)Parser.c ./output/$(name)Parser.h
gcc main.c ./output/$(name)Lexer.c ./output/$(name)Parser.c -L/usr/local/lib
-l antlr3c -o run

Main.c is a part of my teacher example.
but I get this message :

gcc main.c ./output/CalculetteLexer.c ./output/CalculetteParser.c
-L/usr/local/lib -l antlr3c -o run
ld: warning: in /usr/local/lib/libantlr3c.a, file was built for unsupported
file format which is not the architecture being linked (x86_64)
Undefined symbols:
  "_antlr3CommonTokenStreamSourceNew", referenced from:
      _main in ccdRYqut.o
  "_antlr3ParserNewStream", referenced from:
      _CalculetteParserNewSSD in ccwb3FmC.o
  "_antlr3AsciiFileStreamNew", referenced from:
      _main in ccdRYqut.o
  "_antlr3LexerNewStream", referenced from:
      _CalculetteLexerNewSSD in cciBqC4b.o
ld: symbol(s) not found
collect2: ld returned 1 exit status
make: *** [all] Error 1

Maybe I can try to compile libantlr3c for x86_64 but i don't know how. Any
ideas ?
-- 
Armel BOURGON-DROUOT

From dr.jaymahdi at gmail.com  Sun Sep 12 16:40:25 2010
From: dr.jaymahdi at gmail.com (Jay T)
Date: Sun, 12 Sep 2010 19:40:25 -0400
Subject: [antlr-interest] Issue when compiling c files generate by antlr
In-Reply-To: <AANLkTikCmVg_uf8kuEYUd0ekws_Cer1ut0ZcSE5YNRsS@mail.gmail.com>
References: <AANLkTikCmVg_uf8kuEYUd0ekws_Cer1ut0ZcSE5YNRsS@mail.gmail.com>
Message-ID: <AANLkTikZMF3cmEWnC8xbs_w-xSpY3xcc6UFrO1w4fiFE@mail.gmail.com>

Hi:

Try compiling with ./configure --enable-64bit, and also don't forget to
include the -I '/path/to/antlr/header/files' in your gcc . Hopefully that
works.

Cheers

J



On Sun, Sep 12, 2010 at 4:59 PM, Armel BOURGON-DROUOT
<bourgon.a at gmail.com>wrote:

> Hello everyone,
>
> I will use antlr in an academic project. For now I just want to set up
> the environment (under mac osx 10.6.
> Following the examples from my teacher I face an issue:
>
> 1) I have installed ANTLRWorks, and I'm able to generate *Lexer.c/h and
> *Parser.c/h from the *.g file given by my teacher.
>
> 2) To compile these files I download libantlr3c then I compile and install
> it by :
> ./configure
> make
> sudo make install
>  After that I have libantlr3c.a, libantlr3c.la and libantlr3c.dylib in
> /usr/local/lib.
>
> 3) I try to compile the c files using this makefile :
>
> name = Calculette
>
> all: ./output/$(name)Parser.c ./output/$(name)Parser.h
> gcc main.c ./output/$(name)Lexer.c ./output/$(name)Parser.c
> -L/usr/local/lib
> -l antlr3c -o run
>
> Main.c is a part of my teacher example.
> but I get this message :
>
> gcc main.c ./output/CalculetteLexer.c ./output/CalculetteParser.c
> -L/usr/local/lib -l antlr3c -o run
> ld: warning: in /usr/local/lib/libantlr3c.a, file was built for unsupported
> file format which is not the architecture being linked (x86_64)
> Undefined symbols:
>  "_antlr3CommonTokenStreamSourceNew", referenced from:
>      _main in ccdRYqut.o
>  "_antlr3ParserNewStream", referenced from:
>      _CalculetteParserNewSSD in ccwb3FmC.o
>  "_antlr3AsciiFileStreamNew", referenced from:
>      _main in ccdRYqut.o
>  "_antlr3LexerNewStream", referenced from:
>      _CalculetteLexerNewSSD in cciBqC4b.o
> ld: symbol(s) not found
> collect2: ld returned 1 exit status
> make: *** [all] Error 1
>
> Maybe I can try to compile libantlr3c for x86_64 but i don't know how. Any
> ideas ?
> --
> Armel BOURGON-DROUOT
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>

From dr.jaymahdi at gmail.com  Sun Sep 12 16:41:01 2010
From: dr.jaymahdi at gmail.com (Jay T)
Date: Sun, 12 Sep 2010 19:41:01 -0400
Subject: [antlr-interest] Eclipse Settings? - TreeWalker Grammar never
	compiles in ANTLR IDE
In-Reply-To: <AANLkTimocobAv=rhB_2ftNyM3j-oozsMGvgfF28fNHOK@mail.gmail.com>
References: <AANLkTimocobAv=rhB_2ftNyM3j-oozsMGvgfF28fNHOK@mail.gmail.com>
Message-ID: <AANLkTi=oV4+nO7Jfo6=qC_evwYmOBZbbfnwp0j=n+uhe@mail.gmail.com>

Nevermind, downloading the latest version of Eclipse and ANTLR IDE fixed
everything :-)

J



On Sun, Sep 12, 2010 at 11:17 AM, Jay T <dr.jaymahdi at gmail.com> wrote:

> Hi:
>
> I have a question in regards of the settings in Eclipse 3.5.2 and ANTLR IDE
> 2.0.2 .
>
> For some reason, my TreeWalker (or TreeGrammar) never compiles with the
> accompanying parserGrammar; however my TreeGrammar does compile in
> antlrworks v. 1.4 . Is there a missing setting that I need to apply for
> TreeGrammars in Eclipse? Or is this a bug that I can work around with
> antlrworks?
>
> Thanks
>
> J
>
>
>
>

From douglasgodfrey at gmail.com  Mon Sep 13 00:01:50 2010
From: douglasgodfrey at gmail.com (Douglas Godfrey)
Date: Mon, 13 Sep 2010 03:01:50 -0400
Subject: [antlr-interest] how to find the grammar line in error for
 [error(104): cannot find an attribute name in attribute declaration]
Message-ID: <AANLkTinTA6QLxS+seLeJaC=hRqPByd4SkPrDB7qEoXMa@mail.gmail.com>

I get multiple instances of error 104 followed by a crash whenever I try to
generate my grammar.
The grammar is 1200 lines and uses many rule input and return values.
How do I identify the line that is causing the error.

[02:48:17] error(104):  cannot find an attribute name in attribute
declaration
[02:48:17] java.lang.StringIndexOutOfBoundsException: String index out of
range: -1
    at java.lang.String.charAt(String.java:558)
    at org.antlr.tool.Attribute.extractAttribute(Attribute.java:99)
    at org.antlr.tool.Attribute.<init>(Attribute.java:47)
    at org.antlr.tool.AttributeScope.addAttributes(AttributeScope.java:122)
    at
org.antlr.grammar.v2.DefineGrammarItemsWalker.ruleScopeSpec(DefineGrammarItemsWalker.java:1052)
    at
org.antlr.grammar.v2.DefineGrammarItemsWalker.rule(DefineGrammarItemsWalker.java:891)
    at
org.antlr.grammar.v2.DefineGrammarItemsWalker.rules(DefineGrammarItemsWalker.java:576)
    at
org.antlr.grammar.v2.DefineGrammarItemsWalker.grammarSpec(DefineGrammarItemsWalker.java:361)
    at
org.antlr.grammar.v2.DefineGrammarItemsWalker.grammar(DefineGrammarItemsWalker.java:193)
    at org.antlr.tool.Grammar.defineGrammarSymbols(Grammar.java:702)
    at
org.antlr.tool.CompositeGrammar.defineGrammarSymbols(CompositeGrammar.java:351)
    at org.antlr.tool.Grammar.setGrammarContent(Grammar.java:579)
    at
org.antlr.works.grammar.antlr.ANTLRGrammarEngineImpl.createNewGrammar(ANTLRGrammarEngineImpl.java:192)
    at
org.antlr.works.grammar.antlr.ANTLRGrammarEngineImpl.createParserGrammar(ANTLRGrammarEngineImpl.java:225)
    at
org.antlr.works.grammar.antlr.ANTLRGrammarEngineImpl.createCombinedGrammar(ANTLRGrammarEngineImpl.java:203)
    at
org.antlr.works.grammar.antlr.ANTLRGrammarEngineImpl.createGrammars(ANTLRGrammarEngineImpl.java:165)
    at
org.antlr.works.grammar.antlr.ANTLRGrammarEngineImpl.analyze(ANTLRGrammarEngineImpl.java:272)
    at
org.antlr.works.grammar.engine.GrammarEngineImpl.analyze(GrammarEngineImpl.java:325)
    at org.antlr.works.grammar.CheckGrammar.run(CheckGrammar.java:70)
    at java.lang.Thread.run(Thread.java:613)

From bourgon.a at gmail.com  Mon Sep 13 03:22:39 2010
From: bourgon.a at gmail.com (Armel BOURGON-DROUOT)
Date: Mon, 13 Sep 2010 12:22:39 +0200
Subject: [antlr-interest] Issue when compiling c files generate by antlr
In-Reply-To: <AANLkTikZMF3cmEWnC8xbs_w-xSpY3xcc6UFrO1w4fiFE@mail.gmail.com>
References: <AANLkTikCmVg_uf8kuEYUd0ekws_Cer1ut0ZcSE5YNRsS@mail.gmail.com>
	<AANLkTikZMF3cmEWnC8xbs_w-xSpY3xcc6UFrO1w4fiFE@mail.gmail.com>
Message-ID: <AANLkTinYNQ=iSuDvWvznCjpy8p7ZzTOFbgB3p95dZMPj@mail.gmail.com>

Hi,

I have recompiled libantlr3c using ./configure --enable-64bit, and all is
fine now.
thanks !

Cheers

On Mon, Sep 13, 2010 at 1:40 AM, Jay T <dr.jaymahdi at gmail.com> wrote:

> Hi:
>
> Try compiling with ./configure --enable-64bit, and also don't forget to
> include the -I '/path/to/antlr/header/files' in your gcc . Hopefully that
> works.
>
> Cheers
>
> J
>
>
>
> On Sun, Sep 12, 2010 at 4:59 PM, Armel BOURGON-DROUOT <bourgon.a at gmail.com
> > wrote:
>
>> Hello everyone,
>>
>> I will use antlr in an academic project. For now I just want to set up
>> the environment (under mac osx 10.6.
>> Following the examples from my teacher I face an issue:
>>
>> 1) I have installed ANTLRWorks, and I'm able to generate *Lexer.c/h and
>> *Parser.c/h from the *.g file given by my teacher.
>>
>> 2) To compile these files I download libantlr3c then I compile and install
>> it by :
>> ./configure
>> make
>> sudo make install
>>  After that I have libantlr3c.a, libantlr3c.la and libantlr3c.dylib in
>> /usr/local/lib.
>>
>> 3) I try to compile the c files using this makefile :
>>
>> name = Calculette
>>
>> all: ./output/$(name)Parser.c ./output/$(name)Parser.h
>> gcc main.c ./output/$(name)Lexer.c ./output/$(name)Parser.c
>> -L/usr/local/lib
>> -l antlr3c -o run
>>
>> Main.c is a part of my teacher example.
>> but I get this message :
>>
>> gcc main.c ./output/CalculetteLexer.c ./output/CalculetteParser.c
>> -L/usr/local/lib -l antlr3c -o run
>> ld: warning: in /usr/local/lib/libantlr3c.a, file was built for
>> unsupported
>> file format which is not the architecture being linked (x86_64)
>> Undefined symbols:
>>  "_antlr3CommonTokenStreamSourceNew", referenced from:
>>      _main in ccdRYqut.o
>>  "_antlr3ParserNewStream", referenced from:
>>      _CalculetteParserNewSSD in ccwb3FmC.o
>>  "_antlr3AsciiFileStreamNew", referenced from:
>>      _main in ccdRYqut.o
>>  "_antlr3LexerNewStream", referenced from:
>>      _CalculetteLexerNewSSD in cciBqC4b.o
>> ld: symbol(s) not found
>> collect2: ld returned 1 exit status
>> make: *** [all] Error 1
>>
>> Maybe I can try to compile libantlr3c for x86_64 but i don't know how. Any
>> ideas ?
>> --
>> Armel BOURGON-DROUOT
>>
>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>> Unsubscribe:
>> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>>
>
>


-- 
Armel BOURGON-DROUOT
?l?ve-ing?nieur Esial 2A

From scott_boag at us.ibm.com  Mon Sep 13 07:37:07 2010
From: scott_boag at us.ibm.com (scott_boag at us.ibm.com)
Date: Mon, 13 Sep 2010 10:37:07 -0400
Subject: [antlr-interest] Example of plugging in custom lexer to C-target?
Message-ID: <OF404CE4FA.34D963DD-ON8525779D.004FA148-8525779D.00504D9C@lotus.com>

Hello all,

I apologize if this information is in some obvious place... so far I've 
not been able to locate it.

I would like to plug in a custom lexer to the C target generation.  To be 
specific, I want to plug in a Flex C++ lexer.  In Java I do this with 
JFlex, and it's really simple.  But I'm trying to reverse engineer the 
Lexer/TokenStreams/TokenSource/etc. for the C target, and it looks to be 
fairly tricky.  I'm hoping someone might have an example to make this a 
bit simpler?

(I'm constrained at the moment to 3.1.3).

Thanks!

From jimi at temporal-wave.com  Mon Sep 13 09:26:14 2010
From: jimi at temporal-wave.com (Jim Idle)
Date: Mon, 13 Sep 2010 09:26:14 -0700
Subject: [antlr-interest] Issue when compiling c files generate by antlr
In-Reply-To: <AANLkTikCmVg_uf8kuEYUd0ekws_Cer1ut0ZcSE5YNRsS@mail.gmail.com>
References: <AANLkTikCmVg_uf8kuEYUd0ekws_Cer1ut0ZcSE5YNRsS@mail.gmail.com>
Message-ID: <07ba01cb5360$62ca9300$285fb900$@temporal-wave.com>

Why don't you try:

configure --help

Where you will see that there is an option to build for 64 bit systems. Did
you read through the API docs? They explain the --help option.

http://www.antlr.org/api/C/index.html

Jim

> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of Armel BOURGON-DROUOT
> Sent: Sunday, September 12, 2010 2:00 PM
> To: antlr-interest at antlr.org
> Subject: [antlr-interest] Issue when compiling c files generate by antlr
> 
> Hello everyone,
> 
> I will use antlr in an academic project. For now I just want to set up
> the environment (under mac osx 10.6.
> Following the examples from my teacher I face an issue:
> 
> 1) I have installed ANTLRWorks, and I'm able to generate *Lexer.c/h and
> *Parser.c/h from the *.g file given by my teacher.
> 
> 2) To compile these files I download libantlr3c then I compile and
> install it by :
> ./configure
> make
> sudo make install
>  After that I have libantlr3c.a, libantlr3c.la and libantlr3c.dylib in
> /usr/local/lib.
> 
> 3) I try to compile the c files using this makefile :
> 
> name = Calculette
> 
> all: ./output/$(name)Parser.c ./output/$(name)Parser.h gcc main.c
> ./output/$(name)Lexer.c ./output/$(name)Parser.c -L/usr/local/lib -l
> antlr3c -o run
> 
> Main.c is a part of my teacher example.
> but I get this message :
> 
> gcc main.c ./output/CalculetteLexer.c ./output/CalculetteParser.c -
> L/usr/local/lib -l antlr3c -o run
> ld: warning: in /usr/local/lib/libantlr3c.a, file was built for
> unsupported file format which is not the architecture being linked
> (x86_64) Undefined symbols:
>   "_antlr3CommonTokenStreamSourceNew", referenced from:
>       _main in ccdRYqut.o
>   "_antlr3ParserNewStream", referenced from:
>       _CalculetteParserNewSSD in ccwb3FmC.o
>   "_antlr3AsciiFileStreamNew", referenced from:
>       _main in ccdRYqut.o
>   "_antlr3LexerNewStream", referenced from:
>       _CalculetteLexerNewSSD in cciBqC4b.o
> ld: symbol(s) not found
> collect2: ld returned 1 exit status
> make: *** [all] Error 1
> 
> Maybe I can try to compile libantlr3c for x86_64 but i don't know how.
> Any ideas ?
> --
> Armel BOURGON-DROUOT
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
> email-address


From jimi at temporal-wave.com  Mon Sep 13 09:46:24 2010
From: jimi at temporal-wave.com (Jim Idle)
Date: Mon, 13 Sep 2010 09:46:24 -0700
Subject: [antlr-interest] Example of plugging in custom lexer to
	C-target?
In-Reply-To: <OF404CE4FA.34D963DD-ON8525779D.004FA148-8525779D.00504D9C@lotus.com>
References: <OF404CE4FA.34D963DD-ON8525779D.004FA148-8525779D.00504D9C@lotus.com>
Message-ID: <07db01cb5363$33ba82c0$9b2f8840$@temporal-wave.com>

No one has needed to do this before, but all you have to do is generate a
really simple C lexer (one rule) and see that you need just a couple of
methods. Easiest way to see this is to single step one of the examples in
visual studio. Trace through the LT(1) call and you will see what happens
when you end up in the lexer.

Jim



> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of scott_boag at us.ibm.com
> Sent: Monday, September 13, 2010 7:37 AM
> To: antlr-interest at antlr.org
> Subject: [antlr-interest] Example of plugging in custom lexer to C-
> target?
> 
> Hello all,
> 
> I apologize if this information is in some obvious place... so far I've
> not been able to locate it.
> 
> I would like to plug in a custom lexer to the C target generation.  To
> be specific, I want to plug in a Flex C++ lexer.  In Java I do this with
> JFlex, and it's really simple.  But I'm trying to reverse engineer the
> Lexer/TokenStreams/TokenSource/etc. for the C target, and it looks to be
> fairly tricky.  I'm hoping someone might have an example to make this a
> bit simpler?
> 
> (I'm constrained at the moment to 3.1.3).
> 
> Thanks!
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-
> email-address


From scott_boag at us.ibm.com  Mon Sep 13 11:37:22 2010
From: scott_boag at us.ibm.com (scott_boag at us.ibm.com)
Date: Mon, 13 Sep 2010 14:37:22 -0400
Subject: [antlr-interest] Example of plugging in custom lexer
	to	C-target?
In-Reply-To: <07db01cb5363$33ba82c0$9b2f8840$@temporal-wave.com>
References: <OF404CE4FA.34D963DD-ON8525779D.004FA148-8525779D.00504D9C@lotus.com>
	<07db01cb5363$33ba82c0$9b2f8840$@temporal-wave.com>
Message-ID: <OF0FD047DA.0B70DCE5-ON8525779D.0065A76C-8525779D.00664CBE@lotus.com>

Thanks for your reply, Jim.  That's what I was afraid of.  Seems like a 
lot of people have done hook-ups with custom lexers in Java... wonder why 
it hasn't come up yet in C.  Anyway, OK, will try to reverse engineer from 
a simple generated ANTLR lexer.

-scott

From David.Biesack at sas.com  Mon Sep 13 14:03:31 2010
From: David.Biesack at sas.com (David J. Biesack)
Date: Mon, 13 Sep 2010 17:03:31 -0400
Subject: [antlr-interest] squeeze some space out of ANTLR Java target
Message-ID: <ytblj75pd98.fsf@sas.com>


I've noticed that when a rule in a template grammar does not have a 
'returns [...]' clause, ANTLR 3.2 still generates a default *_returns class:

    public static class my_rule_return extends ParserRuleReturnScope {
        public StringTemplate st;
        public Object getTemplate() { return st; }
        public String toString() { return st==null?null:st.toString(); }
    };

Several of my grammar rule accept a java.util collection input parameter
which they modify, so there is no returns value. Tus, I now have at least 
7 of these *_return classes which differ only in name.

Though each such class is small, I suggest putting a DefaultParserReturnScope
class in the ANTLR runtime and instead of these generated classes, use
DefaultParserReturnScope. It will save a bit of class data/byte code as well as
time to load and validate these classes.

Going further, the generated code for these rules allocate an instance of the
*_return class and sets fields (retval.start, retval.stop) in the instance, but
do nothing else with it. The call sites discard the value. This extra object
allocation on each call to the rule (and subsequent garbage collection) might
also be eliminated. If so, no DefaultParserReturnScope class would be needed.

I don't know if eliminating the instance is possible in all cases, but from the
generated Java for my example, it seems true that:

* The generated methods can be changed to void
* the local *_return instance declaration and instantiation can be removed
* the lines
        retval.start = input.LT(1);
        retval.stop = input.LT(-1);
  can be removed
* the 
       return retval;
  statement can be changed to
       return;

(Sorry if there is already an option to suppress these objects and I just don't
know about it.)

thanks,
djb


-- 
David J. Biesack, SAS
SAS Campus Dr. Cary, NC 27513
www.sas.com    (919) 531-7771

From jrk1987 at yahoo.co.in  Mon Sep 13 17:03:03 2010
From: jrk1987 at yahoo.co.in (J.R Karthikeyan)
Date: Tue, 14 Sep 2010 05:33:03 +0530 (IST)
Subject: [antlr-interest] command line option.
Message-ID: <65986.99858.qm@web94603.mail.in2.yahoo.com>



Hi,

   I know that in grammar file we can specify as

   options
{
language = C;
}  
 
to generate the lexer and parser in C. Wondering is it possible to specify this 
option in command line.

for eg. 
java org.antlr.Tool -C sample.g so that it will generate lexer and parser in c. 
Is this feasible?

Thanks,
Karthikeyan



From hitesh.p.shetty at gmail.com  Tue Sep 14 03:34:45 2010
From: hitesh.p.shetty at gmail.com (Hitesh Shetty)
Date: Tue, 14 Sep 2010 16:04:45 +0530
Subject: [antlr-interest] Is there a way to convert the input stream to
	uppercase for parsing
Message-ID: <AANLkTimpdFT8Oc0TNNhK-kY-=BCHCk4_insif41vmNOg@mail.gmail.com>

Hello,
Im trying to convert an existing grammar written for C target into one for Java.
In the C grammar there exists an init section which I figured
converted the input stream into lowercase, as:
@init {
 ANTLR_UINT32 (*oldLA) ( struct ANTLR3_INT_STREAM_struct *, ANTLR_INT32 );
oldLA = INPUT-> istream->_LA;
INPUT->setUcaseLA(INPUT, ANTLR3_FALSE);
}
Is there any equivalent way of doing this for the Java target?
Any help would be appreciated.

From sam at samknows.com  Tue Sep 14 06:04:29 2010
From: sam at samknows.com (Sam Crawford)
Date: Tue, 14 Sep 2010 14:04:29 +0100
Subject: [antlr-interest] Writing a DSL for benchmarking IO
Message-ID: <AANLkTim7ZoCRFFWfaW6GWxewujZim7eXCzDZ2fbDaQKr@mail.gmail.com>

Hello,

Please forgive me if this is the wrong list to post to; I was
recommended to try here by a friend.

I run a platform that allows for benchmarking of various operations
(I/O, network, etc) across a wide array of devices. The majority of
our end users are engineers, but predominantly without professional
programming experience. I'm currently exploring the idea of writing a
DSL to allow users of our platform to write their own benchmarks,
without them having to learn C/C++.

Ultimately the idea is that we'd provide a small, simple language
focussed on the benchmarking constructs they're interested in, and
then convert it to C before compilation (we have many targets - x86,
ARM, MIPS, etc).

I have a broad idea of how this would take shape, but I was wondering if:

1) Anyone was familiar with anything like this in the wild
2) ANTLR would be a good fit for this kind of use-case

Thanks in advance,

Sam

From bill.andersen at mac.com  Tue Sep 14 10:15:03 2010
From: bill.andersen at mac.com (Bill Andersen)
Date: Tue, 14 Sep 2010 13:15:03 -0400
Subject: [antlr-interest] Literal - ID clash resolution
Message-ID: <16BAA9AD-C620-4357-8A20-6D0B8F14D2BD@mac.com>

Folks

I'm having a small problem.   Not that I can't solve it myself but it's one of those things for which:

a) I'm sure there exists a good stock solution, and

b) Google is especially poorly suited to find in a search

Here it is.  I have rules in the grammar for my DSL that have '=' as a literal appearing them.  Like this

option
  : optionName=ID '=' STRING
  ;

The DSL parses a language specification and that specification can define reserved words, one of which (in my test case) is '='.  This creates a problem: The DSL grammar must recognize '=' as an instance of identifier (ID - I'm using ANTLRWorks default lexer rule template, slightly modified, for now) but it can't recognize '=' as such because it's already a literal used in the DSL grammar.

Can anyone tell me what the best way to deal with this is?

If my explanation doesn't make sense (seems mine often don't for some reason) I'll be glad to post the whole grammar, but I don't think that's necessary.

	.bill




From j at junkwallah.org  Tue Sep 14 11:04:03 2010
From: j at junkwallah.org (Junkman)
Date: Tue, 14 Sep 2010 11:04:03 -0700
Subject: [antlr-interest] Literal - ID clash resolution
In-Reply-To: <16BAA9AD-C620-4357-8A20-6D0B8F14D2BD@mac.com>
References: <16BAA9AD-C620-4357-8A20-6D0B8F14D2BD@mac.com>
Message-ID: <4C8FB913.7090700@junkwallah.org>

I'd guess the common first stab would be to have '=' as a distinct token
and elevate ID into a parsing symbol:

EQUAL: '=';
id: (ID | EQUAL) ;
option: optionName=id EQUAL STRING ;

It might become bit more interesting if you also need to make optionName
optional.

But maybe you could rewind the stack a bit, and reconsider if you really
want/need '=' as a valid identifier?

J

On 9/14/2010 10:15 AM, Bill Andersen wrote:
> Folks
> 
> I'm having a small problem.   Not that I can't solve it myself but it's one of those things for which:
> 
> a) I'm sure there exists a good stock solution, and
> 
> b) Google is especially poorly suited to find in a search
> 
> Here it is.  I have rules in the grammar for my DSL that have '=' as a literal appearing them.  Like this
> 
> option
>   : optionName=ID '=' STRING
>   ;
> 
> The DSL parses a language specification and that specification can define reserved words, one of which (in my test case) is '='.  This creates a problem: The DSL grammar must recognize '=' as an instance of identifier (ID - I'm using ANTLRWorks default lexer rule template, slightly modified, for now) but it can't recognize '=' as such because it's already a literal used in the DSL grammar.
> 
> Can anyone tell me what the best way to deal with this is?
> 
> If my explanation doesn't make sense (seems mine often don't for some reason) I'll be glad to post the whole grammar, but I don't think that's necessary.
> 
> 	.bill
> 
> 
> 
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
> 


From lgcraymer at yahoo.com  Tue Sep 14 11:05:04 2010
From: lgcraymer at yahoo.com (Loring Craymer)
Date: Tue, 14 Sep 2010 11:05:04 -0700 (PDT)
Subject: [antlr-interest] Writing a DSL for benchmarking IO
In-Reply-To: <AANLkTim7ZoCRFFWfaW6GWxewujZim7eXCzDZ2fbDaQKr@mail.gmail.com>
References: <AANLkTim7ZoCRFFWfaW6GWxewujZim7eXCzDZ2fbDaQKr@mail.gmail.com>
Message-ID: <587257.5526.qm@web55903.mail.re3.yahoo.com>

ANTLR is a good tool for building DSLs, but the major issue here is actually 
language design and documentation.  If you can clearly delimit the problem 
domain, then it is possible to design a minimal language and not have to 
modify/grow it very much.  If not, then your DSL is likely to grow 
uncontrollably and give you versioning headaches; benchmarking and testing is a 
broad enough domain that your DSL is likely to evolve into a general purpose 
language--not a good thing.  As an alternative, I'd suggest using Python 
augmented with runtime support for the specific features you need.  The big 
advantages to this are that you only have to document the features you have 
added along with a minimal Python vocabulary and can point users to existing 
Python documentation and texts if they want to do more; also, some of your users 
will have a smattering of Python to start with and can ask around for help if 
necessary.

Since Python is available in C source form, you should not have much problem in 
getting it on your various platforms; also, SWIG is very handy for adding 
extensions.

--Loring



----- Original Message ----
> From: Sam Crawford <sam at samknows.com>
> To: antlr-interest at antlr.org
> Sent: Tue, September 14, 2010 6:04:29 AM
> Subject: [antlr-interest] Writing a DSL for benchmarking IO
> 
> Hello,
> 
> Please forgive me if this is the wrong list to post to; I  was
> recommended to try here by a friend.
> 
> I run a platform that allows  for benchmarking of various operations
> (I/O, network, etc) across a wide  array of devices. The majority of
> our end users are engineers, but  predominantly without professional
> programming experience. I'm currently  exploring the idea of writing a
> DSL to allow users of our platform to write  their own benchmarks,
> without them having to learn C/C++.
> 
> Ultimately  the idea is that we'd provide a small, simple language
> focussed on the  benchmarking constructs they're interested in, and
> then convert it to C  before compilation (we have many targets - x86,
> ARM, MIPS, etc).
> 
> I  have a broad idea of how this would take shape, but I was wondering  if:
> 
> 1) Anyone was familiar with anything like this in the wild
> 2)  ANTLR would be a good fit for this kind of use-case
> 
> Thanks in  advance,
> 
> Sam
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: 
>http://www.antlr.org/mailman/options/antlr-interest/your-email-address
> 


      


From David.Biesack at sas.com  Tue Sep 14 11:29:31 2010
From: David.Biesack at sas.com (David J. Biesack)
Date: Tue, 14 Sep 2010 14:29:31 -0400
Subject: [antlr-interest] Is there a way to convert the input stream to
 uppercase for parsing
In-Reply-To: <AANLkTimpdFT8Oc0TNNhK-kY-=BCHCk4_insif41vmNOg@mail.gmail.com>
	(message from Hitesh Shetty on Tue, 14 Sep 2010 16:04:45 +0530)
References: <AANLkTimpdFT8Oc0TNNhK-kY-=BCHCk4_insif41vmNOg@mail.gmail.com>
Message-ID: <ytb4odsp4ac.fsf@sas.com>


Hitesh;

Check the ANTLR FAQ "How do I get case insensitivity?"

http://www.antlr.org/wiki/pages/viewpage.action?pageId=1782

> Date: Tue, 14 Sep 2010 16:04:45 +0530
> From: Hitesh Shetty <hitesh.p.shetty at gmail.com>
> 
> Hello,
> Im trying to convert an existing grammar written for C target into one for Java.
> In the C grammar there exists an init section which I figured
> converted the input stream into lowercase, as:
> @init {
>  ANTLR_UINT32 (*oldLA) ( struct ANTLR3_INT_STREAM_struct *, ANTLR_INT32 );
> oldLA = INPUT-> istream->_LA;
> INPUT->setUcaseLA(INPUT, ANTLR3_FALSE);
> }
> Is there any equivalent way of doing this for the Java target?
> Any help would be appreciated.

-- 
David J. Biesack, SAS
SAS Campus Dr. Cary, NC 27513
www.sas.com    (919) 531-7771

From jsvede at yahoo.com  Tue Sep 14 12:29:28 2010
From: jsvede at yahoo.com (Jon Svede)
Date: Tue, 14 Sep 2010 12:29:28 -0700 (PDT)
Subject: [antlr-interest] comparing two parse trees
Message-ID: <454751.4676.qm@web113601.mail.gq1.yahoo.com>

Hi,

I am new to ANTLR.

I want to be able to compare formulas to see if the are the same formula, something like the following:

(A + B / C)^D

Compared to

(W+X)/Y^Z

I don't particularly care about the actual terms of the equations (well, not right now anyway), I just want to know if they are structurally the same.

Can anyone point me in the right direction as far as docs that talk about this? Is this covered in the book "The Definitive Guide to ANTLR"?  I don't recall reading anything about this(or maybe I missed it?)...

Thanks in advance for any assistance!

Sincerely,

Jon



      


From lgcraymer at yahoo.com  Tue Sep 14 13:01:24 2010
From: lgcraymer at yahoo.com (Loring Craymer)
Date: Tue, 14 Sep 2010 13:01:24 -0700 (PDT)
Subject: [antlr-interest] comparing two parse trees
In-Reply-To: <454751.4676.qm@web113601.mail.gq1.yahoo.com>
References: <454751.4676.qm@web113601.mail.gq1.yahoo.com>
Message-ID: <825733.10441.qm@web55906.mail.re3.yahoo.com>

This involves algebraic rewrites; you want to extend an algebraic normal form 
(see wikipedia article) to include exponentiation and express division in terms 
of negative exponents and compare formulae after conversion to normal form.  And 
you probably want to do constant folding (another wikipedia article) while you 
are at it.

--Loring



----- Original Message ----
> From: Jon Svede <jsvede at yahoo.com>
> To: antlr-interest at antlr.org
> Sent: Tue, September 14, 2010 12:29:28 PM
> Subject: [antlr-interest] comparing two parse trees
> 
> Hi,
> 
> I am new to ANTLR.
> 
> I want to be able to compare formulas to  see if the are the same formula, 
>something like the following:
> 
> (A + B /  C)^D
> 
> Compared to
> 
> (W+X)/Y^Z
> 
> I don't particularly care about  the actual terms of the equations (well, not 
>right now anyway), I just want to  know if they are structurally the same.
> 
> Can anyone point me in the right  direction as far as docs that talk about 
>this? Is this covered in the book "The  Definitive Guide to ANTLR"?  I don't 
>recall reading anything about this(or  maybe I missed it?)...
> 
> Thanks in advance for any  assistance!
> 
> Sincerely,
> 
> Jon
> 
> 
> 
>       
> 
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: 
>http://www.antlr.org/mailman/options/antlr-interest/your-email-address
> 


      


From jsvede at yahoo.com  Tue Sep 14 13:19:58 2010
From: jsvede at yahoo.com (Jon Svede)
Date: Tue, 14 Sep 2010 13:19:58 -0700 (PDT)
Subject: [antlr-interest] comparing two parse trees
In-Reply-To: <825733.10441.qm@web55906.mail.re3.yahoo.com>
Message-ID: <529801.18841.qm@web113617.mail.gq1.yahoo.com>

Thanks, Loring, I will have a look at your suggestions!

Sincerely,

Jon


--- On Tue, 9/14/10, Loring Craymer <lgcraymer at yahoo.com> wrote:

> From: Loring Craymer <lgcraymer at yahoo.com>
> Subject: Re: [antlr-interest] comparing two parse trees
> To: "Jon Svede" <jsvede at yahoo.com>, antlr-interest at antlr.org
> Date: Tuesday, September 14, 2010, 2:01 PM
> This involves algebraic rewrites; you
> want to extend an algebraic normal form 
> (see wikipedia article) to include exponentiation and
> express division in terms 
> of negative exponents and compare formulae after conversion
> to normal form.? And 
> you probably want to do constant folding (another wikipedia
> article) while you 
> are at it.
> 
> --Loring
> 
> 
> 
> ----- Original Message ----
> > From: Jon Svede <jsvede at yahoo.com>
> > To: antlr-interest at antlr.org
> > Sent: Tue, September 14, 2010 12:29:28 PM
> > Subject: [antlr-interest] comparing two parse trees
> > 
> > Hi,
> > 
> > I am new to ANTLR.
> > 
> > I want to be able to compare formulas to? see if
> the are the same formula, 
> >something like the following:
> > 
> > (A + B /? C)^D
> > 
> > Compared to
> > 
> > (W+X)/Y^Z
> > 
> > I don't particularly care about? the actual terms
> of the equations (well, not 
> >right now anyway), I just want to? know if they
> are structurally the same.
> > 
> > Can anyone point me in the right? direction as
> far as docs that talk about 
> >this? Is this covered in the book "The? Definitive
> Guide to ANTLR"?? I don't 
> >recall reading anything about this(or? maybe I
> missed it?)...
> > 
> > Thanks in advance for any? assistance!
> > 
> > Sincerely,
> > 
> > Jon
> > 
> > 
> > 
> >? ? ???
> > 
> > 
> > List: http://www.antlr.org/mailman/listinfo/antlr-interest
> > Unsubscribe: 
> >http://www.antlr.org/mailman/options/antlr-interest/your-email-address
> > 
> 
> 
> ? ? ? 
> 
> 


      


From asicaddress at gmail.com  Wed Sep 15 11:52:34 2010
From: asicaddress at gmail.com (A Z)
Date: Wed, 15 Sep 2010 12:52:34 -0600
Subject: [antlr-interest] Limitation of method size in Java target
Message-ID: <AANLkTimkjABB_Hm2eoiTw=5wJPMdgH3wCCQzgxT27Pxs@mail.gmail.com>

Hello,

  I have a somewhat large grammar that I just recently got compiling
with ANTLR with no problems most of the time. I still get timeout
errors occasionally. I'm now at the point where I'd like to run my
test suite against the grammar however the java compiler fails with
the following:

10. ERROR in /output/errorParser.java (at line 15)
        public class errorParser extends DebugParser {
                     ^^^^^^^^^^^
The code for the static initializer is exceeding the 65535 bytes limit


I found a thread from last year regarding this issue:

http://groups.google.com/group/il-antlr-interest/browse_thread/thread/f3a4ce6c3a5c803f

I tried a few combinations of the various settings however they either
caused the ANTLR compile to fail or did not resolve the java compile
issue. Is modifying the .java files the only reliable workaround at
this point? It looks like the 4000 "public static final BitSet
FOLLOW*' statements are the cause but I'm not sure how grammar coding
changes can reduce them.


Thanks

From isabelle.perseil at enst.fr  Wed Sep 15 15:38:18 2010
From: isabelle.perseil at enst.fr (Isabelle Perseil)
Date: Thu, 16 Sep 2010 00:38:18 +0200
Subject: [antlr-interest] =?iso-8859-1?q?_EXTENDED_DEADLINE_=3A_UML=26FM?=
 =?iso-8859-1?q?=922010?=
Message-ID: <fe066bb4c628782712d6974804d9ffb1.squirrel@webmail1.telecom-paristech.fr>

**********************************************************************
                   CALL FOR PAPERS :  UML&FM?2010
            3rd INTERNATIONAL WORKSHOP ON UML&FORMAL METHODS
          http://www.artist-embedded.org/artist/UML-FM-2010.html

               Workshop held in conjunction with ICFEM 2010
                   The 12th International Conference on
                      Formal Engineering Methods
                 http://www.sei.ecnu.edu.cn/icfem2010/
                           November 16th, 2010
                             Shanghai, China
************************************************************************

              Extended Submission deadline: September 19th, 2010
              --------------------------------------------------


Many interest groups from a research perspective are in favour of the
creation of this workshop.

For more than a decade now, the two communities of UML and formal methods
have been working together to produce a simultaneously practical (via UML)
and rigorous (via formal methods) approach to software engineering.

UML is the de facto standard for modelling various aspects of software
systems in both industry and academia, despite the inconvenience that its
current specification is complex and its syntax imprecise.

The fact that the UML semantics is too informal have led many researchers
to formalize it with all kinds of existing formal languages, like OCL, Z,
B, CSP, VDM, Petri Nets, UPPAAL, HOL, Coq, PVS etc.

This third edition of the workshop will be open to various subjects as the
main objective is to encourage new initiatives of building bridges between
informal, semi-formal and formal notations.


Topics:
======

This workshop seeks contributions from researchers and practitioners
interested in all aspects of integrating UML and formal methods. To this
end, we solicit papers (no more than 8 pages long) related to, but not
limited to, the following principal topics:

?        Consistent specifications, model transformations (QVT technologies,
         transformation repositories). Transformations to make models more
         analyzable so as to make them executable.

?        Automation of traceability through transformations

?        Refinement techniques: developing detailed design from a UML
         abstract specification

?        Refinement of OCL specification as well

?        Formal reasoning on models for code generation

?        Technologies for compositional verification of models

?        Specification of a formal semantics for the UML.
         Giving an abstract syntax to UML diagrams

?        Formal validation and verification of software

?        Co-modeling methods formal/informal mapping techniques

?        End-to-end methodologies or software process
         engineering,correct-by-construction design providing and
         supporting tools for safety-critical embedded systems design


Workshop Format
===============
This full-day workshop will consist of an introduction of the topic by the
workshop organizers, presentations of accepted papers, and in depth
discussion of previously identified subjects emerging from the
submissions. A summary of the discussions will be made available.


Submission and Publication
==========================
To contribute, please send a position paper or a technical paper

to agusti[dot]canals[at]c-s[dot]fr with ?ICFEM 2010 UML&FM Workshop? in
the title.

All the selected papers will be published in the ACM Software Engineering
Notes (SEN), January 2011. Papers should not exceed 8 pages. Submitted
manuscripts should be in English and formatted in the style of the SEN
format.
http://www.stidolph.com/SEN/index.html
Preferably, submissions should be in PDF format.

Slides will be made available through the workshop website.

Let?s notice that 7 papers will selected to be published after the
workshop in a 2011 special issue of the SoSyM journal. The authors of the
7 best papers will be asked to send an extended version of their paper.
These extended versions should not exceed 20 pages, must be based on the
same results as the original but different. Submitted manuscripts should
be in English and formatted in the style of the SoSyM Springer format.
http://www.sosym.org/submission/
Preferably, submissions should be in PDF format. Please, follow the
guidelines at the "Authors information" heading in the SoSyM website.


IMPORTANT DATES
===============
Submission deadline:                                 September 19th, 2010
All Notification of acceptance:                      September 30th, 2010
Final copy :                                         October 15th, 2010
Workshop date :                                      November 16th, 2010


Organizers
==========

Organizational sponsors :

OMG      (http://www.omg.org/)
ARTIST   (http://www.artist-embedded.org/artist/)


Organizers and Programme Steering committee:

Jean-Michel Bruel (Liuppa, France)
Agusti Canals (CS, France)
Robert de Simone (INRIA, France)
S?bastien G?rard (CEA-LIST, France)
Elie Najm (Telecom ParisTech, France)
Isabelle Perseil (Inserm, France)

Publicity Chair:
Sun Meng (CWI, The Netherlands)

IEEE CS Coordinator:

Mike Hinchey (Lero and NASA GSFC , Ireland)


Program Committee:

    * Nazareno Aguirre (Universidad Nacional de R?o Cuarto, Argentina)
    * Pascal Andr? (LINA, University of Nantes, France)
    * Yamine Ait Ameur (LISI / ENSMA, France)
    * Luciano Baresi (Politecnico di Milano, Italia)
    * Yves Bernard (AIRBUS France, France)
    * Jean-Paul Bodeveix (IRIT, France)
    * Agusti Canals (CS, France) ? General Chair
    * Sebastien Demathieu (THALES, France)
    * Jean-Marie Favre (University Joseph Fourier of Grenoble, France)
    * Mamoun Filali (IRIT, France)
    * Madeleine Faug?re (THALES, France)
    * Robert France (Colorado State University, USA)
    * S?bastien G?rard (CEA-LIST, France)
    * Martin Gogolla (University of Bremen, Germany)
    * Irfan Hamid (Microsoft Corp, Canada)
    * Wooter Joosen (Catholic University of Leuven, Belgium)
    * Sharon Keidar-Barner (IBM Haifa Research Laboratory, Israel)
    * Kevin Lano (King?s College London, United Kingdom)
    * Tom Maibaum (McMaster University, Canada )
    * Manuel Mazzara (Newcastle University, United Kingdom)
    * Stephen J.Mellor (Accelerated Technologies, Tucson AZ, USA)
    * Sun Meng (CWI, The Netherlands)
    * Dominique Mery (LORIA, France)
    * Alexandre Mota (Universidade Federal de Pernambuco, Brazil)
    * Elie Najm (Telecom ParisTech, France)
    * Kazuhiro Ogata (Japan Advanced Institute of Science and Technology,
      Japan)
    * Richard Paige (University of York, United Kingdom)
    * Dorina Petriu (Carlton University, USA)
    * Pierre-Yves Schobbens (University of Namur, Belgium)
    * Douglas C. Schmidt (Vanderbild University, USA)
    * Fran?oise Simonot Lion (LORIA, France)
    * Jing Sun (University of Auckland, New Zealand)
    * Jun Suzuki (University of Massachusetts, Boston, USA)
    * Martin T?rngren (Royal Institute of Technology, Sweden)
    * Tatsuhiro Tsuchiya (Osaka University, Japan)
    * Naoyasu Ubayashi (Kyushu Institute of Technology, Japan)
    * Stefan Van Baelen (Catholic University of Leuven, Belgium)
    * Tullio Vardanega (University of Padua, Italia)
    * Fran?ois Vernadat (CNRS-LAAS, France)
    * Eugenio Villar (Universidad de Cantabria, Spain)
    * Tim Weilkiens (OOSE Innovative Informatik, Germany)
    * Andr? Windisch (EADS Military Aircraft, Germany)
    * John Whittle (George Mason University, USA)
    * Sergio Yovine (CNRS-Verimag, France)








From fridi70 at gmx.de  Thu Sep 16 13:35:58 2010
From: fridi70 at gmx.de (fridi)
Date: Thu, 16 Sep 2010 22:35:58 +0200
Subject: [antlr-interest] ANTLR + ST Question
Message-ID: <4C927FAE.70705@gmx.de>

  Hi,

I have a parser grammar that generates code using ST.

One rule is

andExpression
     :
     c1=condintion (AND c2+=condition)* -> andExpressionTmpl(c1={c1.st}; 
c2={c2})
     ;


So the rule consumes a first condition, and afterwords it accumulates 
all following conditions into c2.
For something like A AND B AND C where (A,B,C are conditions), it would 
process A,B,C in one template call.
Is it possible to get working like (A AND) AND C? (w/o using tree grammar?)

Thanks for any hint,
   Fridi


From zep_antlr at bahj.com  Thu Sep 16 17:09:17 2010
From: zep_antlr at bahj.com (Zachary Palmer)
Date: Thu, 16 Sep 2010 20:09:17 -0400
Subject: [antlr-interest] ANTLR ANTLR Grammar
Message-ID: <4C92B1AD.3040407@bahj.com>

Hello all,

I just tried to use the ANTLR grammar for ANTLR v3 which appears here: 
http://www.antlr.org/grammar/ANTLR

I tried building it in ANTLR v3.1.3 and got the following messages:

warning(105): /resources/grammar/ANTLRv3.g:93:9: no lexer rule 
corresponding to token: DOC_COMMENT
  |---> :   DOC_COMMENT?

warning(105): /resources/grammar/ANTLRv3.g:248:6: no lexer rule 
corresponding to token: SEMPRED
  |---> |   SEMPRED ( g='=>' -> GATED_SEMPRED[$g] | -> SEMPRED )

warning(105): /resources/grammar/ANTLRv3.g:157:4: no lexer rule 
corresponding to token: DOC_COMMENT
  |---> :    DOC_COMMENT?

warning(105): /resources/grammar/ANTLRv3.g:354:22: no lexer rule 
corresponding to token: SEMPRED
  |---> :    (rew+='->' preds+=SEMPRED predicated+=rewrite_alternative)*

warning(200): /resources/grammar/ANTLRv3.g:472:5: Decision can match 
input such as "' ''$''A''N''T''L''R'' ''s''r''c'' ''"''\\''\'''"'' 
''0'..'9'" using multiple alternatives: 1, 2
As a result, alternative(s) 2 were disabled for that input
  |---> (    ' $ANTLR ' SRC // src directive

I looked through the grammar and the messages seem to be correct: 
DOC_COMMENT is defined as a special token and not as a lexical 
terminal.  Anyone have any suggestions as to what I should do about 
this?  I want to write some utilities to analyze the grammar I've 
written and doing so by walking over an AST of the grammar seemed to be 
the most promising choice.

Thanks,

Zach

From antlr at shmuelhome.mine.nu  Thu Sep 16 17:40:26 2010
From: antlr at shmuelhome.mine.nu (shmuel siegel)
Date: Fri, 17 Sep 2010 02:40:26 +0200
Subject: [antlr-interest] ANTLR ANTLR Grammar
In-Reply-To: <4C92B1AD.3040407@bahj.com>
References: <4C92B1AD.3040407@bahj.com>
Message-ID: <4C92B8FA.1040802@shmuelhome.mine.nu>

  On 9/17/2010 2:09 AM, Zachary Palmer wrote:
> Hello all,
>
> I just tried to use the ANTLR grammar for ANTLR v3 which appears here:
> http://www.antlr.org/grammar/ANTLR
>
> I tried building it in ANTLR v3.1.3 and got the following messages:
>
> warning(105): /resources/grammar/ANTLRv3.g:93:9: no lexer rule
> corresponding to token: DOC_COMMENT
>    |--->  :   DOC_COMMENT?
>
> warning(105): /resources/grammar/ANTLRv3.g:248:6: no lexer rule
> corresponding to token: SEMPRED
>    |--->  |   SEMPRED ( g='=>' ->  GATED_SEMPRED[$g] | ->  SEMPRED )
>
> warning(105): /resources/grammar/ANTLRv3.g:157:4: no lexer rule
> corresponding to token: DOC_COMMENT
>    |--->  :    DOC_COMMENT?
>
> warning(105): /resources/grammar/ANTLRv3.g:354:22: no lexer rule
> corresponding to token: SEMPRED
>    |--->  :    (rew+='->' preds+=SEMPRED predicated+=rewrite_alternative)*
>
> warning(200): /resources/grammar/ANTLRv3.g:472:5: Decision can match
> input such as "' ''$''A''N''T''L''R'' ''s''r''c'' ''"''\\''\'''"''
> ''0'..'9'" using multiple alternatives: 1, 2
> As a result, alternative(s) 2 were disabled for that input
>    |--->  (    ' $ANTLR ' SRC // src directive
>
> I looked through the grammar and the messages seem to be correct:
> DOC_COMMENT is defined as a special token and not as a lexical
> terminal.  Anyone have any suggestions as to what I should do about
> this?  I want to write some utilities to analyze the grammar I've
> written and doing so by walking over an AST of the grammar seemed to be
> the most promising choice.
>
> Thanks,
>
> Zach
The token warnings are exactly that. They are warnings. Even though 
there aren't any lexer rules by these names the lexer can produce these 
tokens. DOC_COMMENT is a special case of ML_COMMENT and SEMPRED is a 
special case of ACTION. The ambiguous rule is probably okay; the 
alternative picked is probably the one that you want. In other words, 
these warnings can be ignored for your purpose.


From guillaumh at gmail.com  Fri Sep 17 00:31:41 2010
From: guillaumh at gmail.com (Guillaume Hoffmann)
Date: Fri, 17 Sep 2010 09:31:41 +0200
Subject: [antlr-interest] Remote Debug C Target parser
In-Reply-To: <051701cb505d$db4fece0$91efc6a0$@temporal-wave.com>
References: <20100909103101.56300@gmx.net>
	<040901cb5028$e0df8510$a29e8f30$@temporal-wave.com>
	<20100909141356.56310@gmx.net>
	<AANLkTikAL4F5az7iEuCfVNjYryyV2g_1aEb08FuzfQKy@mail.gmail.com>
	<051701cb505d$db4fece0$91efc6a0$@temporal-wave.com>
Message-ID: <AANLkTik+r5NcsRtAnKHLriyUjfBX8RY2_=LZye8SeCNX@mail.gmail.com>

Hi Jim,

any update on this issue?

I have attempted to fix that by hand by taking the archive
http://www.antlr.org/download//C/libantlr3c-3.3-SNAPSHOT.tar.gz and
replacing the file ./src/antlr3debughandlers.c by the version present
in the git repository of Antlr on github (which has differences in the
sprintf format strings), and with that I could at least have a
beginning of debugging working with antlrworks. But after a few steps
antlrworks fails with this exception:

$ java -jar antlrworks-1.4.jar
java.lang.NullPointerException
java.lang.NullPointerException
	at org.antlr.runtime.debug.RemoteDebugEventSocketListener.unEscapeNewlines(RemoteDebugEventSocketListener.java:515)
	at org.antlr.runtime.debug.RemoteDebugEventSocketListener.deserializeToken(RemoteDebugEventSocketListener.java:453)
	at org.antlr.runtime.debug.RemoteDebugEventSocketListener.dispatch(RemoteDebugEventSocketListener.java:301)
	at org.antlr.runtime.debug.RemoteDebugEventSocketListener.eventHandler(RemoteDebugEventSocketListener.java:176)
	at org.antlr.runtime.debug.RemoteDebugEventSocketListener.run(RemoteDebugEventSocketListener.java:472)
	at java.lang.Thread.run(Thread.java:636)

This happens with the latest stable antlrworks  jarfile available on
the website.

regards,

Guillaume


2010/9/9 Jim Idle <jimi at temporal-wave.com>:
> I'll try to do that this weekend.
>
> Jim
>
>> -----Original Message-----
>> From: Guillaume Hoffmann [mailto:guillaumh at gmail.com]
>> Sent: Thursday, September 09, 2010 1:29 PM
>> To: Andi Clemens
>> Cc: Jim Idle; antlr-interest at antlr.org
>> Subject: Re: [antlr-interest] Remote Debug C Target parser
>>
>> I have the same problem than Andi.
>>
>> Would it be possible that someone updated of the files:
>>
>> http://www.antlr.org/download//antlr-master-3.2.1-SNAPSHOT-
>> completejar.jar
>> http://www.antlr.org/download//C/libantlr3c-3.3-SNAPSHOT.tar.gz
>>
>> so that it would be easy to get an unstable version of ANTLR where
>> debugging with C target works?
>>
>> regards,
>>
>> Guillaume
>>
>> On Thu, Sep 9, 2010 at 4:13 PM, Andi Clemens <Andi.Clemens at gmx.net>
>> wrote:
>> > ok, thanks for the tipp!
>> >
>> > Andi
>> >
>> > -------- Original-Nachricht --------
>> >> Datum: Thu, 9 Sep 2010 07:11:21 -0700
>> >> Von: "Jim Idle" <jimi at temporal-wave.com>
>> >> An: antlr-interest at antlr.org
>> >> Betreff: Re: [antlr-interest] Remote Debug C Target parser
>> >
>> >> You are better using the native debugger at that release point. I
>> >> think that ANTLRWorks and the C runtime got out of sync. The current
>> >> development branch is working if you want to use that, but it isn't
>> >> tested very much of course.
>> >>
>> >> Jim
>> >>
>> >> > -----Original Message-----
>> >> > From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
>> >> > bounces at antlr.org] On Behalf Of Andi Clemens
>> >> > Sent: Thursday, September 09, 2010 3:31 AM
>> >> > To: antlr-interest at antlr.org
>> >> > Subject: [antlr-interest] Remote Debug C Target parser
>> >> >
>> >> > Hi,
>> >> >
>> >> > I try to debug a Parser written for the C-Target.
>> >> > Since I can not debug it in ANTLworks directly, I wrote a small
>> >> > test app
>> >> that
>> >> > includes the parser and parses one line:
>> >> >
>> >> > http://pastebin.com/WzXrvTxr
>> >> >
>> >> > The parser and lexer have been compiled with the "-debug" option.
>> >> > I can connect to the port in ANTLworks, but as soon as I click
>> >> > "step
>> >> forward"
>> >> > in the debugger, my program finishes and the debugger doesn't
>> >> > display anything.
>> >> >
>> >> > This is the console output I get:
>> >> >
>> >> > [...]
>> >> > unknown debug event: location 796 5 unknown debug event: enterRule
>> >> > PLSQL3c.g select_expression unknown debug event: exitSubRule 153
>> >> > unknown debug event: location 646 5 unknown debug event: enterRule
>> >> > PLSQL3c.g select_statement unknown debug event: location 640 5
>> >> > unknown debug event: enterRule PLSQL3c.g select_command unknown
>> >> > debug event: location 583 5 unknown debug
>> >> > event: enterRule PLSQL3c.g to_modify_data unknown debug event:
>> >> > location
>> >> > 574 5 unknown debug event: enterRule PLSQL3c.g sql_command unknown
>> >> > debug event: location 569 5 unknown debug event: enterRule
>> >> > PLSQL3c.g sql_statement unknown debug event: location 147 5 unknown
>> debug event:
>> >> > enterRule PLSQL3c.g statement unknown debug event: location 126 14
>> >> > unknown debug event: enterSubRule 20 unknown debug event:
>> >> > enterDecision 20 unknown debug event: LT 1 9 4 0 1 22 "; unknown
>> >> > debug
>> >> > event: LT 2 0 -1 0 1 -1 "<EOF> unknown debug event: exitDecision 20
>> >> > unknown debug event: exitSubRule 20 unknown debug event: location
>> >> > 126
>> >> > 32 unknown debug event: enterSubRule 21 unknown debug event:
>> >> > enterDecision 21 unknown debug event: LT 1 9 4 0 1 22 "; unknown
>> >> > debug
>> >> > event: exitDecision 21 unknown debug event: enterAlt 1 unknown
>> >> > debug
>> >> > event: location 126 32 unknown debug event: LT 1 9 4 0 1 22 ";
>> >> > unknown debug event: consumeToken 9 4 0 1 22 "; unknown debug
>> event:
>> >> > exitSubRule 21 unknown debug event: location 126 38 unknown debug
>> >> > event: LT 1 0 -1 0 1 -1 "<EOF> unknown debug event: consumeToken 0
>> >> > -1 0
>> >> 1
>> >> > -1 "<EOF> unknown debug event: location 127 2 unknown debug event:
>> >> > enterRule PLSQL3c.g parse_statements
>> >> > java.net.SocketException: Connection reset
>> >> > java.net.SocketException: Connection reset
>> >> > ? ? ? ? at
>> >> > java.net.SocketInputStream.read(SocketInputStream.java:168)
>> >> > ? ? ? ? at
>> >> > sun.nio.cs.StreamDecoder.readBytes(StreamDecoder.java:264)
>> >> > ? ? ? ? at
>> >> > sun.nio.cs.StreamDecoder.implRead(StreamDecoder.java:306)
>> >> > ? ? ? ? at sun.nio.cs.StreamDecoder.read(StreamDecoder.java:158)
>> >> > ? ? ? ? at
>> >> > java.io.InputStreamReader.read(InputStreamReader.java:167)
>> >> > ? ? ? ? at java.io.BufferedReader.fill(BufferedReader.java:136)
>> >> > ? ? ? ? at java.io.BufferedReader.readLine(BufferedReader.java:299)
>> >> > ? ? ? ? at java.io.BufferedReader.readLine(BufferedReader.java:362)
>> >> > ? ? ? ? at
>> >> > org.antlr.runtime.debug.RemoteDebugEventSocketListener.eventHandler
>> >> > (R
>> >> > emoteDebugEventSocketListener.java:178)
>> >> > ? ? ? ? at
>> >> > org.antlr.runtime.debug.RemoteDebugEventSocketListener.run(RemoteDe
>> >> > b
>> >> > u
>> >> > gEventSocketListener.java:472)
>> >> > ? ? ? ? at java.lang.Thread.run(Thread.java:619)
>> >> >
>> >> >
>> >> > What am I doing wrong?
>> >> >
>> >> > Andi
>> >> >
>> >> > --
>> >> > Achtung Sicherheitswarnung: GMX warnt vor Phishing-Attacken!
>> >> > http://portal.gmx.net/de/go/sicherheitspaket
>> >> >
>> >> > List: http://www.antlr.org/mailman/listinfo/antlr-interest
>> >> > Unsubscribe:
>> >> > http://www.antlr.org/mailman/options/antlr-interest/your-
>> >> > email-address
>> >>
>> >>
>> >> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>> >> Unsubscribe:
>> >> http://www.antlr.org/mailman/options/antlr-interest/your-email-addres
>> >> s
>> >
>> > --
>> > Achtung Sicherheitswarnung: GMX warnt vor Phishing-Attacken!
>> > http://portal.gmx.net/de/go/sicherheitspaket
>> >
>> > List: http://www.antlr.org/mailman/listinfo/antlr-interest
>> > Unsubscribe:
>> > http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>> >
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>

From jimi at temporal-wave.com  Fri Sep 17 09:07:27 2010
From: jimi at temporal-wave.com (Jim Idle)
Date: Fri, 17 Sep 2010 09:07:27 -0700
Subject: [antlr-interest] ANTLR ANTLR Grammar
In-Reply-To: <4C92B1AD.3040407@bahj.com>
References: <4C92B1AD.3040407@bahj.com>
Message-ID: <002f01cb5682$6c2396c0$446ac440$@temporal-wave.com>

That is out of date a bit now - we have new parsers for ANTLR 4 that start
with reference grammars so that everyone has a start point.

For now though I think that you can ignore those as the ambig is OK and the
lexer rule is because they are imaginary I think.

Jim 

-----Original Message-----
From: antlr-interest-bounces at antlr.org
[mailto:antlr-interest-bounces at antlr.org] On Behalf Of Zachary Palmer
Sent: Thursday, September 16, 2010 5:09 PM
To: antlr-interest at antlr.org
Subject: [antlr-interest] ANTLR ANTLR Grammar

Hello all,

I just tried to use the ANTLR grammar for ANTLR v3 which appears here: 
http://www.antlr.org/grammar/ANTLR

I tried building it in ANTLR v3.1.3 and got the following messages:

warning(105): /resources/grammar/ANTLRv3.g:93:9: no lexer rule corresponding
to token: DOC_COMMENT
  |---> :   DOC_COMMENT?

warning(105): /resources/grammar/ANTLRv3.g:248:6: no lexer rule
corresponding to token: SEMPRED
  |---> |   SEMPRED ( g='=>' -> GATED_SEMPRED[$g] | -> SEMPRED )

warning(105): /resources/grammar/ANTLRv3.g:157:4: no lexer rule
corresponding to token: DOC_COMMENT
  |---> :    DOC_COMMENT?

warning(105): /resources/grammar/ANTLRv3.g:354:22: no lexer rule
corresponding to token: SEMPRED
  |---> :    (rew+='->' preds+=SEMPRED predicated+=rewrite_alternative)*

warning(200): /resources/grammar/ANTLRv3.g:472:5: Decision can match input
such as "' ''$''A''N''T''L''R'' ''s''r''c'' ''"''\\''\'''"'' 
''0'..'9'" using multiple alternatives: 1, 2 As a result, alternative(s) 2
were disabled for that input
  |---> (    ' $ANTLR ' SRC // src directive

I looked through the grammar and the messages seem to be correct: 
DOC_COMMENT is defined as a special token and not as a lexical terminal.
Anyone have any suggestions as to what I should do about this?  I want to
write some utilities to analyze the grammar I've written and doing so by
walking over an AST of the grammar seemed to be the most promising choice.

Thanks,

Zach

List: http://www.antlr.org/mailman/listinfo/antlr-interest
Unsubscribe:
http://www.antlr.org/mailman/options/antlr-interest/your-email-address


From jimi at temporal-wave.com  Fri Sep 17 09:21:42 2010
From: jimi at temporal-wave.com (Jim Idle)
Date: Fri, 17 Sep 2010 09:21:42 -0700
Subject: [antlr-interest] Remote Debug C Target parser
In-Reply-To: <AANLkTik+r5NcsRtAnKHLriyUjfBX8RY2_=LZye8SeCNX@mail.gmail.com>
References: <20100909103101.56300@gmx.net>
	<040901cb5028$e0df8510$a29e8f30$@temporal-wave.com>
	<20100909141356.56310@gmx.net>
	<AANLkTikAL4F5az7iEuCfVNjYryyV2g_1aEb08FuzfQKy@mail.gmail.com>
	<051701cb505d$db4fece0$91efc6a0$@temporal-wave.com>
	<AANLkTik+r5NcsRtAnKHLriyUjfBX8RY2_=LZye8SeCNX@mail.gmail.com>
Message-ID: <003101cb5684$69eaf9f0$3dc0edd0$@temporal-wave.com>

Have not had time yet - sorry. I have not forgotten though.

Jim

-----Original Message-----
From: Guillaume Hoffmann [mailto:guillaumh at gmail.com] 
Sent: Friday, September 17, 2010 12:32 AM
To: Jim Idle
Cc: antlr-interest at antlr.org
Subject: Re: [antlr-interest] Remote Debug C Target parser

Hi Jim,

any update on this issue?

I have attempted to fix that by hand by taking the archive http://www.antlr.org/download//C/libantlr3c-3.3-SNAPSHOT.tar.gz and replacing the file ./src/antlr3debughandlers.c by the version present in the git repository of Antlr on github (which has differences in the sprintf format strings), and with that I could at least have a beginning of debugging working with antlrworks. But after a few steps antlrworks fails with this exception:

$ java -jar antlrworks-1.4.jar
java.lang.NullPointerException
java.lang.NullPointerException
	at org.antlr.runtime.debug.RemoteDebugEventSocketListener.unEscapeNewlines(RemoteDebugEventSocketListener.java:515)
	at org.antlr.runtime.debug.RemoteDebugEventSocketListener.deserializeToken(RemoteDebugEventSocketListener.java:453)
	at org.antlr.runtime.debug.RemoteDebugEventSocketListener.dispatch(RemoteDebugEventSocketListener.java:301)
	at org.antlr.runtime.debug.RemoteDebugEventSocketListener.eventHandler(RemoteDebugEventSocketListener.java:176)
	at org.antlr.runtime.debug.RemoteDebugEventSocketListener.run(RemoteDebugEventSocketListener.java:472)
	at java.lang.Thread.run(Thread.java:636)

This happens with the latest stable antlrworks  jarfile available on the website.

regards,

Guillaume


2010/9/9 Jim Idle <jimi at temporal-wave.com>:
> I'll try to do that this weekend.
>
> Jim
>
>> -----Original Message-----
>> From: Guillaume Hoffmann [mailto:guillaumh at gmail.com]
>> Sent: Thursday, September 09, 2010 1:29 PM
>> To: Andi Clemens
>> Cc: Jim Idle; antlr-interest at antlr.org
>> Subject: Re: [antlr-interest] Remote Debug C Target parser
>>
>> I have the same problem than Andi.
>>
>> Would it be possible that someone updated of the files:
>>
>> http://www.antlr.org/download//antlr-master-3.2.1-SNAPSHOT-
>> completejar.jar
>> http://www.antlr.org/download//C/libantlr3c-3.3-SNAPSHOT.tar.gz
>>
>> so that it would be easy to get an unstable version of ANTLR where 
>> debugging with C target works?
>>
>> regards,
>>
>> Guillaume
>>
>> On Thu, Sep 9, 2010 at 4:13 PM, Andi Clemens <Andi.Clemens at gmx.net>
>> wrote:
>> > ok, thanks for the tipp!
>> >
>> > Andi
>> >
>> > -------- Original-Nachricht --------
>> >> Datum: Thu, 9 Sep 2010 07:11:21 -0700
>> >> Von: "Jim Idle" <jimi at temporal-wave.com>
>> >> An: antlr-interest at antlr.org
>> >> Betreff: Re: [antlr-interest] Remote Debug C Target parser
>> >
>> >> You are better using the native debugger at that release point. I 
>> >> think that ANTLRWorks and the C runtime got out of sync. The 
>> >> current development branch is working if you want to use that, but 
>> >> it isn't tested very much of course.
>> >>
>> >> Jim
>> >>
>> >> > -----Original Message-----
>> >> > From: antlr-interest-bounces at antlr.org [mailto:antlr-interest- 
>> >> > bounces at antlr.org] On Behalf Of Andi Clemens
>> >> > Sent: Thursday, September 09, 2010 3:31 AM
>> >> > To: antlr-interest at antlr.org
>> >> > Subject: [antlr-interest] Remote Debug C Target parser
>> >> >
>> >> > Hi,
>> >> >
>> >> > I try to debug a Parser written for the C-Target.
>> >> > Since I can not debug it in ANTLworks directly, I wrote a small 
>> >> > test app
>> >> that
>> >> > includes the parser and parses one line:
>> >> >
>> >> > http://pastebin.com/WzXrvTxr
>> >> >
>> >> > The parser and lexer have been compiled with the "-debug" option.
>> >> > I can connect to the port in ANTLworks, but as soon as I click 
>> >> > "step
>> >> forward"
>> >> > in the debugger, my program finishes and the debugger doesn't 
>> >> > display anything.
>> >> >
>> >> > This is the console output I get:
>> >> >
>> >> > [...]
>> >> > unknown debug event: location 796 5 unknown debug event: 
>> >> > enterRule PLSQL3c.g select_expression unknown debug event: 
>> >> > exitSubRule 153 unknown debug event: location 646 5 unknown 
>> >> > debug event: enterRule PLSQL3c.g select_statement unknown debug 
>> >> > event: location 640 5 unknown debug event: enterRule PLSQL3c.g 
>> >> > select_command unknown debug event: location 583 5 unknown debug
>> >> > event: enterRule PLSQL3c.g to_modify_data unknown debug event:
>> >> > location
>> >> > 574 5 unknown debug event: enterRule PLSQL3c.g sql_command 
>> >> > unknown debug event: location 569 5 unknown debug event: 
>> >> > enterRule PLSQL3c.g sql_statement unknown debug event: location 
>> >> > 147 5 unknown
>> debug event:
>> >> > enterRule PLSQL3c.g statement unknown debug event: location 126 
>> >> > 14 unknown debug event: enterSubRule 20 unknown debug event:
>> >> > enterDecision 20 unknown debug event: LT 1 9 4 0 1 22 "; unknown 
>> >> > debug
>> >> > event: LT 2 0 -1 0 1 -1 "<EOF> unknown debug event: exitDecision 
>> >> > 20 unknown debug event: exitSubRule 20 unknown debug event: 
>> >> > location
>> >> > 126
>> >> > 32 unknown debug event: enterSubRule 21 unknown debug event:
>> >> > enterDecision 21 unknown debug event: LT 1 9 4 0 1 22 "; unknown 
>> >> > debug
>> >> > event: exitDecision 21 unknown debug event: enterAlt 1 unknown 
>> >> > debug
>> >> > event: location 126 32 unknown debug event: LT 1 9 4 0 1 22 "; 
>> >> > unknown debug event: consumeToken 9 4 0 1 22 "; unknown debug
>> event:
>> >> > exitSubRule 21 unknown debug event: location 126 38 unknown 
>> >> > debug
>> >> > event: LT 1 0 -1 0 1 -1 "<EOF> unknown debug event: consumeToken 
>> >> > 0
>> >> > -1 0
>> >> 1
>> >> > -1 "<EOF> unknown debug event: location 127 2 unknown debug event:
>> >> > enterRule PLSQL3c.g parse_statements
>> >> > java.net.SocketException: Connection reset
>> >> > java.net.SocketException: Connection reset
>> >> >         at
>> >> > java.net.SocketInputStream.read(SocketInputStream.java:168)
>> >> >         at
>> >> > sun.nio.cs.StreamDecoder.readBytes(StreamDecoder.java:264)
>> >> >         at
>> >> > sun.nio.cs.StreamDecoder.implRead(StreamDecoder.java:306)
>> >> >         at sun.nio.cs.StreamDecoder.read(StreamDecoder.java:158)
>> >> >         at
>> >> > java.io.InputStreamReader.read(InputStreamReader.java:167)
>> >> >         at java.io.BufferedReader.fill(BufferedReader.java:136)
>> >> >         at 
>> >> > java.io.BufferedReader.readLine(BufferedReader.java:299)
>> >> >         at 
>> >> > java.io.BufferedReader.readLine(BufferedReader.java:362)
>> >> >         at
>> >> > org.antlr.runtime.debug.RemoteDebugEventSocketListener.eventHand
>> >> > ler
>> >> > (R
>> >> > emoteDebugEventSocketListener.java:178)
>> >> >         at
>> >> > org.antlr.runtime.debug.RemoteDebugEventSocketListener.run(Remot
>> >> > eDe
>> >> > b
>> >> > u
>> >> > gEventSocketListener.java:472)
>> >> >         at java.lang.Thread.run(Thread.java:619)
>> >> >
>> >> >
>> >> > What am I doing wrong?
>> >> >
>> >> > Andi
>> >> >
>> >> > --
>> >> > Achtung Sicherheitswarnung: GMX warnt vor Phishing-Attacken!
>> >> > http://portal.gmx.net/de/go/sicherheitspaket
>> >> >
>> >> > List: http://www.antlr.org/mailman/listinfo/antlr-interest
>> >> > Unsubscribe:
>> >> > http://www.antlr.org/mailman/options/antlr-interest/your-
>> >> > email-address
>> >>
>> >>
>> >> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>> >> Unsubscribe:
>> >> http://www.antlr.org/mailman/options/antlr-interest/your-email-add
>> >> res
>> >> s
>> >
>> > --
>> > Achtung Sicherheitswarnung: GMX warnt vor Phishing-Attacken!
>> > http://portal.gmx.net/de/go/sicherheitspaket
>> >
>> > List: http://www.antlr.org/mailman/listinfo/antlr-interest
>> > Unsubscribe:
>> > http://www.antlr.org/mailman/options/antlr-interest/your-email-addr
>> > ess
>> >
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: 
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>


From bijoys_2000 at yahoo.com  Fri Sep 17 15:32:05 2010
From: bijoys_2000 at yahoo.com (bijoys_2000 at yahoo.com)
Date: Fri, 17 Sep 2010 15:32:05 
Subject: [antlr-interest] [SPAM] why are you so hard to reach
Message-ID: 1e0653312372d7624705ed540eaad244@[192.168.1.1]

t  Hi boss, it's been quite some time now. Since times are hard as hell we need to rely on the internet to save us... I found a solution and I wanted to tell you about it. This page changed my life... I quit my job because I make more money online now.  Sounds silly but check out this 1 article about it here goes,  <a href="http://carilfi.info">View the news paper</a> v4h6

From scott at rice.edu  Sun Sep 19 09:47:41 2010
From: scott at rice.edu (Scott Warren)
Date: Sun, 19 Sep 2010 11:47:41 -0500
Subject: [antlr-interest] problem with nested composite grammars
Message-ID: <43409079-B2D4-4D8F-ACEB-6180216C8C68@rice.edu>

Hi,

I'm working on a large open-source grammar and I've hit a problem with nested composite grammars. In short, "single inheritance" rule overriding in nested composite grammars does not work like inheritance in Java. I think this is a bug. It does not depend on the grammars being large.

Here's a brief example. Three grammars G1, G2, and G3 are "nested" in the sense that G3 imports G2 and G2 imports G1. A rule is defined in G1 and then overridden in G2. When G3 imports G2 I expect it to get the version of the rule defined in G2. In fact, ANTLR uses the rule from G1. (More precisely, G3Parser.java delegates the rule to G3_G2_G1.java rather than to G3_G2.java.) The example grammars and associated lexer are:

----------------------
lexer grammar L;
T1: '1';
T2: '2';
T3: '3';
T4: '4';
----------------------
parser grammar G1;
s: a | b;
a: T1;
b: T2;
----------------------
parser grammar G2;
import G1;
a: T3;
----------------------
grammar G3;
import G2;
b: T4;
----------------------

Using ANTLRWorks 1.4 containing ANTLR 3.2, when I generate these grammars and examine the file "G3Parser.java", I see the following lines of code for delegating methods:

----------------------
   // Delegated rules
   public void s() throws RecognitionException { gG1.s(); }
   public void a() throws RecognitionException { gG1.a(); }
----------------------

I think the last of these lines should say "gG2.a()"! The generated Java source will not compile.

Scott Warren


Sent from my iPad

From bijoys_2000 at yahoo.com  Mon Sep 20 08:41:21 2010
From: bijoys_2000 at yahoo.com (bijoys_2000 at yahoo.com)
Date: Mon, 20 Sep 2010 08:41:21 
Subject: [antlr-interest] [SPAM] Re: this economy
Message-ID: 4756c20eddb17878f1515d9ddc15ac98@[192.168.1.1]

p  Hi boss, it's been quite some time now. Since times are hard as hell we need to rely on the internet to save us... I found a solution and I wanted to tell you about it. This page changed my life... I quit my job because I make more money online now.  Sounds silly but check out this 9 article about it here goes,  <a href="http://cherite.info">View the news paper</a> t8w2

From damir.franusic at gmail.com  Tue Sep 21 15:38:07 2010
From: damir.franusic at gmail.com (Damir Franusic)
Date: Wed, 22 Sep 2010 00:38:07 +0200
Subject: [antlr-interest] imaginary node problem
Message-ID: <AANLkTimguKeLfri8htMe_ng5LUipzZOnCZOiqXBK7nvS@mail.gmail.com>

First of all Hi to everybody, This is my first email here, I have just
recently started using ANTLR. I'm working on some DSL and since i haven't
got any experience with antlr, i have stumbled across some issues.
I am trying to use "rewrite rules" to create a nice two dimensional AST. I
have declared couple of imaginary nodes but what happens is when i for
example do something like:

rule
  : L_SQ_B ANNT (ra=ON | ra=OFF) R_SQ_B COLON RULE L_SQ_B d=DIGITS* R_SQ_B
WS* curlyblock
  -> ^(RULE_NODE $ra)
  ;


This create an imaginary node and then on the outer rule(the one that gets
called last) i am trying to add a root node and assign this RULE_NODE to
that root node:

input
  : (filter)* EOF
  -> ^(ROOT_NODE RULE_NODE)
  ;


..and after this I end up with ROOT_NODE and just a new/blank RULE_NODE. How
do these nodes work? Do they oney work once and get rewritten when you use
them twice? You get my point I hope

Thanks,
Damir

From bijoys_2000 at yahoo.com  Tue Sep 21 19:49:07 2010
From: bijoys_2000 at yahoo.com (bijoys_2000 at yahoo.com)
Date: Tue, 21 Sep 2010 19:49:07 
Subject: [antlr-interest] [SPAM] Fwd: is this really happening to me rpf
Message-ID: 134e2dc3040bd931f76d7b0b87d722e2@[192.168.1.1]

hey, I know how rough it's been for everyone with less money flow. I was fired from my job a year and a half ago myself. I ended up startng my own thing. It's hard to explain but I found a local news article that can put it in better words. You should really check it out and earn 400 a day like them!  <a href="http://o.ly/sjQ">Check the article right now</a>       odx

From renjipanicker+antlr at gmail.com  Wed Sep 22 05:46:27 2010
From: renjipanicker+antlr at gmail.com (Renji Panicker)
Date: Wed, 22 Sep 2010 18:16:27 +0530
Subject: [antlr-interest] Error compiling C code generated by antlr3c.
Message-ID: <AANLkTikxjWO_7=vbShFmd0h3C4ruDr080ZQ2p54NBu_L@mail.gmail.com>

Hi everyone,

I'm trying to compile the following grammar into C code:
 //------------------------------------------------------
grammar SimpleG;

options
{
   language=C;
   backtrack=true;
}

@header{
#include <QtCore/QStringList>
#undef emit
}

 external_function_call_expression
 @declarations{
    QStringList tlist;
    QStringList vlist;
 }:
 (
        id0=ID
 |       qualified_type[tlist]
 |       qualified_id[vlist]
 )
;

 qualified_id[QStringList& list]
 @init {
 }:
     id0=ID
     (
         DOT
         id1=ID
     )*
     ;

 qualified_type [QStringList& list]:
    id0=ID
     (
        SCOPE
        id1=ID
    )*
    ;

DOT : '.';
SCOPE : '::';
ID :   ('A'..'Z')+ ;
 //------------------------------------------------------


Its a bit contrived, because the external_function_call_expression
rule could be left factored, but I am using it to demonstrate the bug.
When this grammar is run through antlr3.2, the resultant
SimpleGParser.c file  has the following function at line 781:

 //------------------------------------------------------
static void synpred2_SimpleG_fragment(pSimpleGParser ctx )
{
   // SimpleG.g:22:10: ( qualified_type[tlist] )
   // SimpleG.g:22:10: qualified_type[tlist]
   {
       FOLLOWPUSH(FOLLOW_qualified_type_in_synpred2_SimpleG70);
       qualified_type(ctx, tlist);

       FOLLOWPOP();
       if  (HASEXCEPTION())
       {
           goto rulesynpred2_SimpleGEx;
       }
       if (HASFAILED())
       {
           return ;
       }

   }

// This is where rules clean up and exit
//
goto rulesynpred2_SimpleGEx; /* Prevent compiler warnings */
rulesynpred2_SimpleGEx: ;

}
 //------------------------------------------------------

This does not compile because it refers to 'tlist', which is nowhere
in the current scope. I hope I haven't missed out something obvious.

Regards,
-/renji

From pat at pat.net  Wed Sep 22 08:59:37 2010
From: pat at pat.net (Patrick Niemeyer)
Date: Wed, 22 Sep 2010 10:59:37 -0500
Subject: [antlr-interest] C# runtime libs for Silverlight?
Message-ID: <E3429AB4-EB42-4E5F-AA1C-96ABE18D4473@pat.net>


Hi,

I'm wondering if anyone has had any success deploying an ANTLR C# targeted parser in Silverlight?

Does anyone know if it is or is not possible to build the runtime libs as a Silverlight library?
(Better yet has anyone done this? :))

thanks,

Pat Niemeyer
Author Learning Java, O'Reilly & Associates and the BeanShell scripting language.


From Martin.Piper at qg.com  Wed Sep 22 09:46:09 2010
From: Martin.Piper at qg.com (Piper, Martin)
Date: Wed, 22 Sep 2010 11:46:09 -0500
Subject: [antlr-interest] imaginary node problem
In-Reply-To: <AANLkTimguKeLfri8htMe_ng5LUipzZOnCZOiqXBK7nvS@mail.gmail.com>
References: <AANLkTimguKeLfri8htMe_ng5LUipzZOnCZOiqXBK7nvS@mail.gmail.com>
Message-ID: <648C0C8B82B47D4AA66D36A62246784B012D0469CC@WAEXMB3.qg.com>

Something seems to be missing in your rules, I assume ROOT_NODE and RULE_NODE are both imaginary nodes?
Also 
rule: appears somewhere in the filter rule?

But When you have in your rewrite rules
rule: SOME stuff IN here ->^(IMAGINARY_NODE_A IMAGINARY_NODE_B)

Two new imaginary nodes are created and inserted into the tree, You can't reference these imaginary nodes directly in the parent rule. The parent rule references the rule that creates these instead.

What I think you are trying to do though:

parent: (child)* EOF -> ^(ROOT_NODE child*);

child: SOME stuff IN here -> ^(RULE_NODE stuff)


on in particular in your case: (I'm cutting out the middle stuff that I don't know about)

input: (rule)* EOF ->^(ROOT_NODE rule*);

rule
  : L_SQ_B ANNT (ra=ON | ra=OFF) R_SQ_B COLON RULE L_SQ_B d=DIGITS* R_SQ_B
WS* curlyblock
  -> ^(RULE_NODE $ra)
  ;

This will create a tree of the form:

(ROOT_NODE(RULE_NODE $ra)(RULE_NODE $ra)(RULE_NODE $ra)...)


-----Original Message-----
From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-bounces at antlr.org] On Behalf Of Damir Franusic
Sent: Tuesday, September 21, 2010 5:38 PM
To: antlr-interest at antlr.org
Subject: [antlr-interest] imaginary node problem

First of all Hi to everybody, This is my first email here, I have just
recently started using ANTLR. I'm working on some DSL and since i haven't
got any experience with antlr, i have stumbled across some issues.
I am trying to use "rewrite rules" to create a nice two dimensional AST. I
have declared couple of imaginary nodes but what happens is when i for
example do something like:

rule
  : L_SQ_B ANNT (ra=ON | ra=OFF) R_SQ_B COLON RULE L_SQ_B d=DIGITS* R_SQ_B
WS* curlyblock
  -> ^(RULE_NODE $ra)
  ;


This create an imaginary node and then on the outer rule(the one that gets
called last) i am trying to add a root node and assign this RULE_NODE to
that root node:

input
  : (filter)* EOF
  -> ^(ROOT_NODE RULE_NODE)
  ;


..and after this I end up with ROOT_NODE and just a new/blank RULE_NODE. How
do these nodes work? Do they oney work once and get rewritten when you use
them twice? You get my point I hope

Thanks,
Damir

List: http://www.antlr.org/mailman/listinfo/antlr-interest
Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address

From JALuber at gmx.de  Wed Sep 22 10:16:12 2010
From: JALuber at gmx.de (Johannes Luber)
Date: Wed, 22 Sep 2010 19:16:12 +0200
Subject: [antlr-interest] C# runtime libs for Silverlight?
In-Reply-To: <E3429AB4-EB42-4E5F-AA1C-96ABE18D4473@pat.net>
References: <E3429AB4-EB42-4E5F-AA1C-96ABE18D4473@pat.net>
Message-ID: <20100922171612.144010@gmx.net>

> Hi,
> 
> I'm wondering if anyone has had any success deploying an ANTLR C# targeted
> parser in Silverlight?
> 
> Does anyone know if it is or is not possible to build the runtime libs as
> a Silverlight library?
> (Better yet has anyone done this? :))

Hi,

I've once received feedback that you have to change a few things to make it work, but never got a contribution detailing those changes. So I can't tell you how involved these changes actually were. :( But I doubt that they will be too difficult.

Johannes
> 
> thanks,
> 
> Pat Niemeyer
> Author Learning Java, O'Reilly & Associates and the BeanShell scripting
> language.
> 
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address

-- 
Neu: GMX De-Mail - Einfach wie E-Mail, sicher wie ein Brief!  
Jetzt De-Mail-Adresse reservieren: http://portal.gmx.net/de/go/demail

From pat at pat.net  Wed Sep 22 10:28:46 2010
From: pat at pat.net (Patrick Niemeyer)
Date: Wed, 22 Sep 2010 12:28:46 -0500
Subject: [antlr-interest] C# runtime libs for Silverlight?
In-Reply-To: <20100922171612.144010@gmx.net>
References: <E3429AB4-EB42-4E5F-AA1C-96ABE18D4473@pat.net>
	<20100922171612.144010@gmx.net>
Message-ID: <8AFCF572-CDAC-45C0-9AF1-24992F961982@pat.net>


So, do you know if I need to build both Antlr3.Runtime? and antlr.runtime.dll?
(as distributed in the binary)

Or is the antlr.runtime there for projects compiled against an older API/


thanks,
Pat

On Sep 22, 2010, at 12:16 PM, Johannes Luber wrote:

>> Hi,
>> 
>> I'm wondering if anyone has had any success deploying an ANTLR C# targeted
>> parser in Silverlight?
>> 
>> Does anyone know if it is or is not possible to build the runtime libs as
>> a Silverlight library?
>> (Better yet has anyone done this? :))
> 
> Hi,
> 
> I've once received feedback that you have to change a few things to make it work, but never got a contribution detailing those changes. So I can't tell you how involved these changes actually were. :( But I doubt that they will be too difficult.
> 
> Johannes
>> 
>> thanks,
>> 
>> Pat Niemeyer
>> Author Learning Java, O'Reilly & Associates and the BeanShell scripting
>> language.
>> 
>> 
>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>> Unsubscribe:
>> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
> 
> -- 
> Neu: GMX De-Mail - Einfach wie E-Mail, sicher wie ein Brief!  
> Jetzt De-Mail-Adresse reservieren: http://portal.gmx.net/de/go/demail
> 


Pat


From jimi at temporal-wave.com  Wed Sep 22 10:35:46 2010
From: jimi at temporal-wave.com (Jim Idle)
Date: Wed, 22 Sep 2010 10:35:46 -0700
Subject: [antlr-interest] Error compiling C code generated by antlr3c.
In-Reply-To: <AANLkTikxjWO_7=vbShFmd0h3C4ruDr080ZQ2p54NBu_L@mail.gmail.com>
References: <AANLkTikxjWO_7=vbShFmd0h3C4ruDr080ZQ2p54NBu_L@mail.gmail.com>
Message-ID: <038e01cb5a7c$96a93ff0$c3fbbfd0$@temporal-wave.com>

Please look for "hoisted predicates generating local references" (or
similar) on antlr.markmail.org and see that you need to use a scope variable
for this.

Cheers,

Jim

-----Original Message-----
From: antlr-interest-bounces at antlr.org
[mailto:antlr-interest-bounces at antlr.org] On Behalf Of Renji Panicker
Sent: Wednesday, September 22, 2010 5:46 AM
To: antlr-interest at antlr.org
Subject: [antlr-interest] Error compiling C code generated by antlr3c.

Hi everyone,

I'm trying to compile the following grammar into C code:
 //------------------------------------------------------
grammar SimpleG;

options
{
   language=C;
   backtrack=true;
}

@header{
#include <QtCore/QStringList>
#undef emit
}

 external_function_call_expression
 @declarations{
    QStringList tlist;
    QStringList vlist;
 }:
 (
        id0=ID
 |       qualified_type[tlist]
 |       qualified_id[vlist]
 )
;

 qualified_id[QStringList& list]
 @init {
 }:
     id0=ID
     (
         DOT
         id1=ID
     )*
     ;

 qualified_type [QStringList& list]:
    id0=ID
     (
        SCOPE
        id1=ID
    )*
    ;

DOT : '.';
SCOPE : '::';
ID :   ('A'..'Z')+ ;
 //------------------------------------------------------


Its a bit contrived, because the external_function_call_expression rule
could be left factored, but I am using it to demonstrate the bug.
When this grammar is run through antlr3.2, the resultant SimpleGParser.c
file  has the following function at line 781:

 //------------------------------------------------------
static void synpred2_SimpleG_fragment(pSimpleGParser ctx ) {
   // SimpleG.g:22:10: ( qualified_type[tlist] )
   // SimpleG.g:22:10: qualified_type[tlist]
   {
       FOLLOWPUSH(FOLLOW_qualified_type_in_synpred2_SimpleG70);
       qualified_type(ctx, tlist);

       FOLLOWPOP();
       if  (HASEXCEPTION())
       {
           goto rulesynpred2_SimpleGEx;
       }
       if (HASFAILED())
       {
           return ;
       }

   }

// This is where rules clean up and exit // goto rulesynpred2_SimpleGEx; /*
Prevent compiler warnings */
rulesynpred2_SimpleGEx: ;

}
 //------------------------------------------------------

This does not compile because it refers to 'tlist', which is nowhere in the
current scope. I hope I haven't missed out something obvious.

Regards,
-/renji

List: http://www.antlr.org/mailman/listinfo/antlr-interest
Unsubscribe:
http://www.antlr.org/mailman/options/antlr-interest/your-email-address


From JALuber at gmx.de  Wed Sep 22 12:50:31 2010
From: JALuber at gmx.de (Johannes Luber)
Date: Wed, 22 Sep 2010 21:50:31 +0200
Subject: [antlr-interest] C# runtime libs for Silverlight?
In-Reply-To: <8AFCF572-CDAC-45C0-9AF1-24992F961982@pat.net>
References: <E3429AB4-EB42-4E5F-AA1C-96ABE18D4473@pat.net>
	<20100922171612.144010@gmx.net>
	<8AFCF572-CDAC-45C0-9AF1-24992F961982@pat.net>
Message-ID: <20100922195031.228850@gmx.net>

> 
> So, do you know if I need to build both Antlr3.Runtime? and
> antlr.runtime.dll?
> (as distributed in the binary)
> 
> Or is the antlr.runtime there for projects compiled against an older API/

The antlr.runtime.dll is, IIRC, from ANTLR 2 and used only for StringTemplate 3.1. I couldn't remove this dependency as ST 3.2 requires .NET 3.5 (as being built with CSharp3). I suggest to exchange the library for Silverlight ports and to build upon the current state in the repo, even if there may be some bugs left. The CSharp2 target changed so much internally that you would have to redo a port completely.

Johannes
> 
> 
> thanks,
> Pat
> 
> On Sep 22, 2010, at 12:16 PM, Johannes Luber wrote:
> 
> >> Hi,
> >> 
> >> I'm wondering if anyone has had any success deploying an ANTLR C#
> targeted
> >> parser in Silverlight?
> >> 
> >> Does anyone know if it is or is not possible to build the runtime libs
> as
> >> a Silverlight library?
> >> (Better yet has anyone done this? :))
> > 
> > Hi,
> > 
> > I've once received feedback that you have to change a few things to make
> it work, but never got a contribution detailing those changes. So I can't
> tell you how involved these changes actually were. :( But I doubt that they
> will be too difficult.
> > 
> > Johannes
> >> 
> >> thanks,
> >> 
> >> Pat Niemeyer
> >> Author Learning Java, O'Reilly & Associates and the BeanShell scripting
> >> language.
> >> 
> >> 
> >> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> >> Unsubscribe:
> >> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
> > 
> > -- 
> > Neu: GMX De-Mail - Einfach wie E-Mail, sicher wie ein Brief!  
> > Jetzt De-Mail-Adresse reservieren: http://portal.gmx.net/de/go/demail
> > 
> 
> 
> Pat
> 

-- 
Neu: GMX De-Mail - Einfach wie E-Mail, sicher wie ein Brief!  
Jetzt De-Mail-Adresse reservieren: http://portal.gmx.net/de/go/demail

From renjipanicker+antlr at gmail.com  Wed Sep 22 18:36:42 2010
From: renjipanicker+antlr at gmail.com (Renji Panicker)
Date: Thu, 23 Sep 2010 07:06:42 +0530
Subject: [antlr-interest] Error compiling C code generated by antlr3c.
In-Reply-To: <038e01cb5a7c$96a93ff0$c3fbbfd0$@temporal-wave.com>
References: <AANLkTikxjWO_7=vbShFmd0h3C4ruDr080ZQ2p54NBu_L@mail.gmail.com>
	<038e01cb5a7c$96a93ff0$c3fbbfd0$@temporal-wave.com>
Message-ID: <AANLkTin1112_TfWaarR+kvycC5UO=KbawG-AizNAmyrV@mail.gmail.com>

Thanks Jim! I found this:
http://www.mail-archive.com/il-antlr-interest at googlegroups.com/msg03823.html

-/renji


On Wed, Sep 22, 2010 at 11:05 PM, Jim Idle <jimi at temporal-wave.com> wrote:
> Please look for "hoisted predicates generating local references" (or
> similar) on antlr.markmail.org and see that you need to use a scope variable
> for this.
>
> Cheers,
>
> Jim
>
> -----Original Message-----
> From: antlr-interest-bounces at antlr.org
> [mailto:antlr-interest-bounces at antlr.org] On Behalf Of Renji Panicker
> Sent: Wednesday, September 22, 2010 5:46 AM
> To: antlr-interest at antlr.org
> Subject: [antlr-interest] Error compiling C code generated by antlr3c.
>
> Hi everyone,
>
> I'm trying to compile the following grammar into C code:
> ?//------------------------------------------------------
> grammar SimpleG;
>
> options
> {
> ? language=C;
> ? backtrack=true;
> }
>
> @header{
> #include <QtCore/QStringList>
> #undef emit
> }
>
> ?external_function_call_expression
> ?@declarations{
> ? ?QStringList tlist;
> ? ?QStringList vlist;
> ?}:
> ?(
> ? ? ? ?id0=ID
> ?| ? ? ? qualified_type[tlist]
> ?| ? ? ? qualified_id[vlist]
> ?)
> ;
>
> ?qualified_id[QStringList& list]
> ?@init {
> ?}:
> ? ? id0=ID
> ? ? (
> ? ? ? ? DOT
> ? ? ? ? id1=ID
> ? ? )*
> ? ? ;
>
> ?qualified_type [QStringList& list]:
> ? ?id0=ID
> ? ? (
> ? ? ? ?SCOPE
> ? ? ? ?id1=ID
> ? ?)*
> ? ?;
>
> DOT : '.';
> SCOPE : '::';
> ID : ? ('A'..'Z')+ ;
> ?//------------------------------------------------------
>
>
> Its a bit contrived, because the external_function_call_expression rule
> could be left factored, but I am using it to demonstrate the bug.
> When this grammar is run through antlr3.2, the resultant SimpleGParser.c
> file ?has the following function at line 781:
>
> ?//------------------------------------------------------
> static void synpred2_SimpleG_fragment(pSimpleGParser ctx ) {
> ? // SimpleG.g:22:10: ( qualified_type[tlist] )
> ? // SimpleG.g:22:10: qualified_type[tlist]
> ? {
> ? ? ? FOLLOWPUSH(FOLLOW_qualified_type_in_synpred2_SimpleG70);
> ? ? ? qualified_type(ctx, tlist);
>
> ? ? ? FOLLOWPOP();
> ? ? ? if ?(HASEXCEPTION())
> ? ? ? {
> ? ? ? ? ? goto rulesynpred2_SimpleGEx;
> ? ? ? }
> ? ? ? if (HASFAILED())
> ? ? ? {
> ? ? ? ? ? return ;
> ? ? ? }
>
> ? }
>
> // This is where rules clean up and exit // goto rulesynpred2_SimpleGEx; /*
> Prevent compiler warnings */
> rulesynpred2_SimpleGEx: ;
>
> }
> ?//------------------------------------------------------
>
> This does not compile because it refers to 'tlist', which is nowhere in the
> current scope. I hope I haven't missed out something obvious.
>
> Regards,
> -/renji
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>

From pat at pat.net  Wed Sep 22 20:05:40 2010
From: pat at pat.net (Patrick Niemeyer)
Date: Wed, 22 Sep 2010 22:05:40 -0500
Subject: [antlr-interest] C# runtime libs for Silverlight?
In-Reply-To: <20100922195031.228850@gmx.net>
References: <E3429AB4-EB42-4E5F-AA1C-96ABE18D4473@pat.net>
	<20100922171612.144010@gmx.net>
	<8AFCF572-CDAC-45C0-9AF1-24992F961982@pat.net>
	<20100922195031.228850@gmx.net>
Message-ID: <5AB31E98-C849-4B80-B321-BAF94B35B8A0@pat.net>


On Sep 22, 2010, at 2:50 PM, Johannes Luber wrote:

>> 
>> So, do you know if I need to build both Antlr3.Runtime? and
>> antlr.runtime.dll?
>> (as distributed in the binary)
>> 
>> Or is the antlr.runtime there for projects compiled against an older API/
> 
> The antlr.runtime.dll is, IIRC, from ANTLR 2 and used only for StringTemplate 3.1. I couldn't remove this dependency as ST 3.2 requires .NET 3.5 (as being built with CSharp3). I suggest to exchange the library for Silverlight ports and to build upon the current state in the repo, even if there may be some bugs left. The CSharp2 target changed so much internally that you would have to redo a port completely.

I was able today to build the runtime lib from the 3.1.3 distribution for Silverlight mostly just by redefining the missing Serializable attributes and changing the ArrayList and Hashtable to use the Generics collections.  I found that the parser that I had generated (actually from a 3.2 build in ANTLRworks I think) compiled against this fine with the same kinds of changes and seems to be working in a Silverlight app... though I haven't tested it well yet.

I found that only the antlr dll was required to run the parser and that I did not need StringTemplate.

I was confused because there are two directories under the runtimes path in the distribution:  CSharp and CSharp3.  I initially tried to build CSharp3 but it seems incomplete so I switched to CSharp...

I'm not sure that I understand your info above...but assuming I pull the latest from github I guess I should try again to build the CSharp3 runtime?  Are there any big advantages to the output aside from, I'm guessing, being a bit more concise?


thanks,
Pat Niemeyer





From daniel.lidstrom at gpsgate.com  Thu Sep 23 06:50:27 2010
From: daniel.lidstrom at gpsgate.com (=?iso-8859-1?Q?Daniel_Lidstr=F6m?=)
Date: Thu, 23 Sep 2010 15:50:27 +0200
Subject: [antlr-interest] First grammar a simple string template language
Message-ID: <4599666A3CFE4DA68A7C8D388328F0F8@DanielPC>

Hello,

I am trying out Antlr for the very first time. My task is to define a string 
template language, similar to
StringTemplate but with some formatting requirements. So I thought Antlr 
would be suitable for this
task. I have managed to define the first part, well almost. I'd like to get 
some feedback on my approach
as I feel I might be heading down the wrong path. Given a format string 
"[yyyy]-[M]-[d] [H]:[m]"
the desired result is "2010-9-23 15:28". Right now I am getting 
"20109231528".

How do I "capture" the dash and colon? Here's my grammar:

grammar TemplateCommand;

options {
    language=CSharp2;
}

tokens {
    TIMEFILTER = 'TimeFilter';
    YEAR       = 'yyyy';
    MONTH      = 'M';
    DAY        = 'd';
    HOUR       = 'H';
    MINUTE     = 'm';
}

@header {
using System.Text;
using System.Collections.Generic;
}

@members {
// Build template command using a StringBuilder
private StringBuilder builder = new StringBuilder();

// Used to resolve variables
private readonly IDictionary<string, string> resolver;

public TemplateCommandParser(ITokenStream input, IDictionary<string, string> 
resolver)
    : this(input)
{
    this.resolver = resolver;
}

public string Result
{ get { return builder.ToString(); } }
}

// parser rules:

prog returns [string result]
	: expression=templateExpression
	  { result = $expression.text; }
	;

templateExpression
	: var=(WS | Text | Number | variable)+
	  { builder.Append($var.text); }
	;

variable
	: '[' var=(TIMEFILTER | YEAR | MONTH | DAY | HOUR | MINUTE) ']'
	  { builder.Append(resolver[$var.text]); }
	;

// lexer rules:

Text : ('a'..'z' | 'A'..'Z' | ':' | ';' | '-')+ ;

Number : '1'..'9' ('0'..'9')* ;

WS : ' '+ 	;

I pass a dictionary to the parser during construction. This dictionary 
contains the variable
substitutions. Why isn't the templateExpression action able to capture the 
dash and colon?
Is there an approach better suited to my task than using actions in this 
way?

Thanks in advance!

(I have read up on StringTemplate and it doesn't quite fit with our 
requirements.)

Daniel 


From cummings at kjchome.homeip.net  Thu Sep 23 08:48:52 2010
From: cummings at kjchome.homeip.net (Kevin J. Cummings)
Date: Thu, 23 Sep 2010 11:48:52 -0400
Subject: [antlr-interest] First grammar a simple string template language
In-Reply-To: <4599666A3CFE4DA68A7C8D388328F0F8@DanielPC>
References: <4599666A3CFE4DA68A7C8D388328F0F8@DanielPC>
Message-ID: <4C9B76E4.404@kjchome.homeip.net>

On 09/23/2010 09:50 AM, Daniel Lidstr?m wrote:
> Hello,
> 
> I am trying out Antlr for the very first time. My task is to define a string 
> template language, similar to
> StringTemplate but with some formatting requirements. So I thought Antlr 
> would be suitable for this
> task. I have managed to define the first part, well almost. I'd like to get 
> some feedback on my approach
> as I feel I might be heading down the wrong path. Given a format string 
> "[yyyy]-[M]-[d] [H]:[m]"
> the desired result is "2010-9-23 15:28". Right now I am getting 
> "20109231528".

> How do I "capture" the dash and colon? Here's my grammar:

If the "-" and ":" are a part of your format string, then they are not a
part of your input, are they?  I would think that outputting them would
be a function of how you handle your format string (which you included
above).  It looks like you are outputting just the "variable" part of
your format string and not the "constant" part....

When you parse your format string, you will need to save the constant
parts verbatim.

Perhaps you can use the "dot notation" (of the lexer) to save anything
that isn't one of your tokens listed below, and output them verbatim.
So, you need another token type to catch "anything else".

> grammar TemplateCommand;
> 
> options {
>     language=CSharp2;
> }
> 
> tokens {
>     TIMEFILTER = 'TimeFilter';
>     YEAR       = 'yyyy';
>     MONTH      = 'M';
>     DAY        = 'd';
>     HOUR       = 'H';
>     MINUTE     = 'm';
> }
> 
> @header {
> using System.Text;
> using System.Collections.Generic;
> }
> 
> @members {
> // Build template command using a StringBuilder
> private StringBuilder builder = new StringBuilder();
> 
> // Used to resolve variables
> private readonly IDictionary<string, string> resolver;
> 
> public TemplateCommandParser(ITokenStream input, IDictionary<string, string> 
> resolver)
>     : this(input)
> {
>     this.resolver = resolver;
> }
> 
> public string Result
> { get { return builder.ToString(); } }
> }
> 
> // parser rules:
> 
> prog returns [string result]
> 	: expression=templateExpression
> 	  { result = $expression.text; }
> 	;
> 
> templateExpression
> 	: var=(WS | Text | Number | variable)+
> 	  { builder.Append($var.text); }
> 	;
> 
> variable
> 	: '[' var=(TIMEFILTER | YEAR | MONTH | DAY | HOUR | MINUTE) ']'
> 	  { builder.Append(resolver[$var.text]); }
> 	;
> 
> // lexer rules:
> 
> Text : ('a'..'z' | 'A'..'Z' | ':' | ';' | '-')+ ;
> 
> Number : '1'..'9' ('0'..'9')* ;
> 
> WS : ' '+ 	;
> 
> I pass a dictionary to the parser during construction. This dictionary 
> contains the variable
> substitutions. Why isn't the templateExpression action able to capture the 
> dash and colon?
> Is there an approach better suited to my task than using actions in this 
> way?
> 
> Thanks in advance!
> 
> (I have read up on StringTemplate and it doesn't quite fit with our 
> requirements.)
> 
> Daniel 
> 
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address


-- 
Kevin J. Cummings
kjchome at rcn.com
cummings at kjchome.homeip.net
cummings at kjc386.framingham.ma.us
Registered Linux User #1232 (http://counter.li.org)

From tounsimolka at yahoo.fr  Thu Sep 23 13:06:26 2010
From: tounsimolka at yahoo.fr (Molka Tounsi)
Date: Thu, 23 Sep 2010 20:06:26 +0000 (GMT)
Subject: [antlr-interest] (no subject)
Message-ID: <491347.36577.qm@web26403.mail.ukl.yahoo.com>

Hello,
I need your help please
I tried this example which translates of C in  SQL and he has worked before, but 
now he does not work  he shows me: "Warning : the grammar used by the remote 
parser is not the same ( CSQL.g )"

grammar CSQL;
options {
  language = Java;
  output = AST;
  ASTLabelType = CommonTree;
}
tokens {
 CLASSDEF;
 VARDEF;
}
// parser
program : (declaration { System.out.println($declaration.tree.toStringTree()); } 
) + ;

declaration : class_statement '{' (variable_statement)* '}'
                -> ^(class_statement variable_statement*) ;

class_statement : scope_modifier 'class' ID
                   -> ^(CLASSDEF ID) ;

variable_statement : scope_modifier type ID  ';'
                      -> ^(VARDEF type ID) ;

scope_modifier : 'public' ;

// more can be added
type : 'string'
     | 'int'
     | 'decimal'
     | 'DateTime' ;

// lexer
ID  :   ('a'..'z'|'A'..'Z'|'_') ('a'..'z'|'A'..'Z'|'0'..'9'|'_') * ;

WS  :   ( ' ' | '\t' | '\r' | '\n' )+ { $channel = HIDDEN; } ;


tree grammar translator;

options {
  language = Java;
  tokenVocab = CSQL;
  ASTLabelType = CommonTree;
}

@members {
 String className;
 List<String> columns = new ArrayList<String>();
}

program : (declaration
          {
           String table = "CREATE TABLE " + className + '\n' + "(" + '\n';
           String seperator = ",";
           Object[] arrayColumns = columns.toArray();
           for(int i = 0; i < arrayColumns.length; i++) {
            if(i == arrayColumns.length - 1) seperator = "";
            table += " " + arrayColumns[i].toString() + seperator + '\n';
           }
           table += ")";
           System.out.println(table);
           columns.clear();
          } ) + ;

declaration : ^(CLASSDEF ID variable_statement*) { className = $ID.text; } ;

variable_statement : ^(VARDEF type ID)
                     {
                      columns.add($ID.text + " " + $type.value + " NOT NULL");
                     } ;

type returns [String value]
    : 'string' { $value = "nvarchar(255)"; }
    | 'int'   { $value = "integer"; }
    | 'decimal' { $value = "number(21,6)"; }
    | 'DateTime'  { $value = "date"; };

 what  is the problem?

Another problem, I need to use this type of rule:

expression: expression ' land ' expression;

He shows me: " expression is left-recursive rule"

Thanks  



      

From david.grieve at oracle.com  Thu Sep 23 19:18:03 2010
From: david.grieve at oracle.com (David Grieve)
Date: Thu, 23 Sep 2010 22:18:03 -0400
Subject: [antlr-interest] which is better?
Message-ID: <EFCB9A0D-E5D5-48AF-8A02-18969E751013@oracle.com>


Is it better to have the fragment rule match the token string, or have a rule that matches the token string and just use the fragment as the token type? By better I mean in terms of code size and performance. 

For example, say I have fragments FOO and BAR that match 'foo' and 'bar' (regardless of case), and then I use these in a rule FOO_OR_BAR.

fragment A : 'a' | 'A';
fragment B : 'b' | 'B';
... you get the picture ...
fragment Z : 'z' | 'Z';

fragment FOO : F O O;
fragment BAR : B A R;

FOO_OR_BAR
	: FOO { $type = FOO }
	| BAR { $type = BAR }
	;

or this?

fragment A : 'a' | 'A';
fragment B : 'b' | 'B';
... you get the picture ...
fragment Z : 'z' | 'Z';

fragment FOO : ;
fragment BAR : ;

FOO_OR_BAR
	: F O O { $type = FOO }
	| B A R { $type = BAR }
	;

It is necessary for me to to this 'fragmented' approach. Due to conflicts in the grammar, FOO and BAR cannot themselves be tokens. Well, I guess I could resolve the conflicts with syntactic predicates, but I have a large number of these and wound up with a 'code segment too large' problem. 

I'm thinking the first way is better.

--
David Grieve
603-312-1013
david.grieve at oracle.com






From daniel.lidstrom at gpsgate.com  Fri Sep 24 04:56:26 2010
From: daniel.lidstrom at gpsgate.com (=?iso-8859-1?Q?Daniel_Lidstr=F6m?=)
Date: Fri, 24 Sep 2010 13:56:26 +0200
Subject: [antlr-interest] First grammar a simple string template language
In-Reply-To: <4C9B76E4.404@kjchome.homeip.net>
References: <4599666A3CFE4DA68A7C8D388328F0F8@DanielPC>
	<4C9B76E4.404@kjchome.homeip.net>
Message-ID: <FEDFE82A0D9B484CAD1C83E81F78CF52@DanielPC>

From: "Kevin J. Cummings" <cummings at kjchome.homeip.net>
> On 09/23/2010 09:50 AM, Daniel Lidstr?m wrote:
>> How do I "capture" the dash and colon? Here's my grammar:
>
> If the "-" and ":" are a part of your format string, then they are not a
> part of your input, are they?  I would think that outputting them would
> be a function of how you handle your format string (which you included
> above).  It looks like you are outputting just the "variable" part of
> your format string and not the "constant" part....
>
> When you parse your format string, you will need to save the constant
> parts verbatim.
>
> Perhaps you can use the "dot notation" (of the lexer) to save anything
> that isn't one of your tokens listed below, and output them verbatim.
> So, you need another token type to catch "anything else".

Thanks for the suggestion. I have taken a step back and my grammar now looks 
like this:

program
	: statement*
	;

statement
	: TEXT
	| variable
	;

variable
	: '[' LETTERS ']'
	;

fragment LETTER : 'a'..'z' | 'A'..'Z' ;
LETTERS : LETTER+ ;
TEXT : ~('[' | ']')+ ;


Using Antlr IDE within Eclipse I can see that this parses something like 
"set status [yyyy]-[M]-[d] [H]:[m]"
correctly (all [...] are treated like variables, the rest are statements). 
My TEXT lexer seems to be working fine. If I try to use the dot, I get an 
error:

TEXT : .+ ;

error(201): /TemplateCommand/src/com/gpsgate/TemplateCommand.g:31:8: The 
following alternatives can never be matched: 1
 |---> TEXT : .+ ;

Is there a way to use dot or should I just be fine with the TEXT lexer as 
is?

Daniel 


From cummings at kjchome.homeip.net  Fri Sep 24 06:36:58 2010
From: cummings at kjchome.homeip.net (Kevin J. Cummings)
Date: Fri, 24 Sep 2010 09:36:58 -0400
Subject: [antlr-interest] First grammar a simple string template language
In-Reply-To: <FEDFE82A0D9B484CAD1C83E81F78CF52@DanielPC>
References: <4599666A3CFE4DA68A7C8D388328F0F8@DanielPC>
	<4C9B76E4.404@kjchome.homeip.net>
	<FEDFE82A0D9B484CAD1C83E81F78CF52@DanielPC>
Message-ID: <4C9CA97A.5090304@kjchome.homeip.net>

On 09/24/2010 07:56 AM, Daniel Lidstr?m wrote:
> From: "Kevin J. Cummings" <cummings at kjchome.homeip.net>
>> On 09/23/2010 09:50 AM, Daniel Lidstr?m wrote:
>>> How do I "capture" the dash and colon? Here's my grammar:
>>
>> If the "-" and ":" are a part of your format string, then they are not a
>> part of your input, are they?  I would think that outputting them would
>> be a function of how you handle your format string (which you included
>> above).  It looks like you are outputting just the "variable" part of
>> your format string and not the "constant" part....
>>
>> When you parse your format string, you will need to save the constant
>> parts verbatim.
>>
>> Perhaps you can use the "dot notation" (of the lexer) to save anything
>> that isn't one of your tokens listed below, and output them verbatim.
>> So, you need another token type to catch "anything else".
> 
> Thanks for the suggestion. I have taken a step back and my grammar now
> looks like this:
> 
> program
>     : statement*
>     ;
> 
> statement
>     : TEXT
>     | variable
>     ;
> 
> variable
>     : '[' LETTERS ']'
>     ;
> 
> fragment LETTER : 'a'..'z' | 'A'..'Z' ;
> LETTERS : LETTER+ ;
> TEXT : ~('[' | ']')+ ;
> 
> Using Antlr IDE within Eclipse I can see that this parses something like
> "set status [yyyy]-[M]-[d] [H]:[m]"
> correctly (all [...] are treated like variables, the rest are
> statements). My TEXT lexer seems to be working fine. If I try to use the
> dot, I get an error:
> 
> TEXT : .+ ;
> 
> error(201): /TemplateCommand/src/com/gpsgate/TemplateCommand.g:31:8: The
> following alternatives can never be matched: 1
> |---> TEXT : .+ ;
> 
> Is there a way to use dot or should I just be fine with the TEXT lexer
> as is?

You've done fine.  Watch for conflicts between LETTERS and TEXT.
Remember that the lexer tries to match as large a token at once as it
can.  I seem to remember that TEXT should be one of your last rules so
that explicit spelling will take precedence over it.  If you run into
specific conflicts, you might be able to help differentiate them with
syntactic predicates in your lexer.  Jim Idle always points towards the
floating point number/integer/date/range example as to how to best do that.

Have fun!

> Daniel

-- 
Kevin J. Cummings
kjchome at rcn.com
cummings at kjchome.homeip.net
cummings at kjc386.framingham.ma.us
Registered Linux User #1232 (http://counter.li.org)

From bijoys_2000 at yahoo.com  Sat Sep 25 12:54:05 2010
From: bijoys_2000 at yahoo.com (bijoys_2000 at yahoo.com)
Date: Sat, 25 Sep 2010 12:54:05 
Subject: [antlr-interest] [SPAM] Re: yo do you want to earn on the internet
Message-ID: e9e35436a4aa8a566bd6b8ea412397dd@[192.168.1.1]

 Hi, We havne't talked in so long, I hope everything is going good for u. Anwyays I feel like you're always working. Well, I found a local news article that describes ways you can earn some extra money. It's easier than it sounds You should really check out and make like 1k a day like them!  <a href="http://cru.ms/087395">Look over this page</a>

From arthur.r.perry at gmail.com  Sat Sep 25 11:12:58 2010
From: arthur.r.perry at gmail.com (Arthur Perry)
Date: Sat, 25 Sep 2010 13:12:58 -0500
Subject: [antlr-interest] Error output from org.antlr.Tool with
 language=Python, but generates code OK
In-Reply-To: <AANLkTi=gDDkLQH47_SfVQtgnUDa1dsmfQ9nxbTDsGzpP@mail.gmail.com>
References: <AANLkTi=gDDkLQH47_SfVQtgnUDa1dsmfQ9nxbTDsGzpP@mail.gmail.com>
Message-ID: <AANLkTimOBEskihz15nLPvP=31Mmw3UFLU3fEG1Vmt-h9@mail.gmail.com>

I am getting the same error - did you ever figure out the issue?

Art


> ---- bernt wrote: ----
>
> When executing the command:
>
> java -cp antlrworks-1.2.2.jar org.antlr.Tool Expr.g
>
> on a minimal Expr.g file (and any other grammar file with language=Python):
> ---
> grammar Expr;
> options {
> ? ? ? ?language=Python;
> }
>
> prog:;
> ---
>
> the following happens:
>
> - the tool exits with error code 1, and writes an error message to the console:
> ANTLR Parser Generator ?Version 3.1.1
> error(10): ?internal error: eval tree parse error : <AST>:0:0:
> unexpected AST node:
>
> org.antlr.stringtemplate.language.ActionEvaluator.expr(Unknown Source)
> ...
> ...
> org.antlr.Tool.main(Unknown Source)
>
> - but the ExprParser.py file is generated just fine.
>
>
> Is there something wrong in org.antlr.Tool? Or am I doing something wrong?
>
> Regards,
> Bernt
>

From cummings at kjchome.homeip.net  Sat Sep 25 13:21:36 2010
From: cummings at kjchome.homeip.net (Kevin J. Cummings)
Date: Sat, 25 Sep 2010 16:21:36 -0400
Subject: [antlr-interest] Error output from org.antlr.Tool with
 language=Python, but generates code OK
In-Reply-To: <AANLkTimOBEskihz15nLPvP=31Mmw3UFLU3fEG1Vmt-h9@mail.gmail.com>
References: <AANLkTi=gDDkLQH47_SfVQtgnUDa1dsmfQ9nxbTDsGzpP@mail.gmail.com>
	<AANLkTimOBEskihz15nLPvP=31Mmw3UFLU3fEG1Vmt-h9@mail.gmail.com>
Message-ID: <4C9E59D0.40700@kjchome.homeip.net>

On 09/25/2010 02:12 PM, Arthur Perry wrote:
> I am getting the same error - did you ever figure out the issue?

In Bernt's example below, prog is an empty rule.  Not a good idea.
Probably deserving of a better error message though.

If this is specific to the python project, you'd have to get an answer
from one of the Python maintainers.

> Art
> 
> 
>> ---- bernt wrote: ----
>>
>> When executing the command:
>>
>> java -cp antlrworks-1.2.2.jar org.antlr.Tool Expr.g
>>
>> on a minimal Expr.g file (and any other grammar file with language=Python):
>> ---
>> grammar Expr;
>> options {
>>        language=Python;
>> }
>>
>> prog:;
>> ---
>>
>> the following happens:
>>
>> - the tool exits with error code 1, and writes an error message to the console:
>> ANTLR Parser Generator  Version 3.1.1
>> error(10):  internal error: eval tree parse error : <AST>:0:0:
>> unexpected AST node:
>>
>> org.antlr.stringtemplate.language.ActionEvaluator.expr(Unknown Source)
>> ...
>> ...
>> org.antlr.Tool.main(Unknown Source)
>>
>> - but the ExprParser.py file is generated just fine.
>>
>>
>> Is there something wrong in org.antlr.Tool? Or am I doing something wrong?
>>
>> Regards,
>> Bernt

-- 
Kevin J. Cummings
kjchome at rcn.com
cummings at kjchome.homeip.net
cummings at kjc386.framingham.ma.us
Registered Linux User #1232 (http://counter.li.org)

From jimi at temporal-wave.com  Sat Sep 25 14:22:01 2010
From: jimi at temporal-wave.com (Jim Idle)
Date: Sat, 25 Sep 2010 14:22:01 -0700
Subject: [antlr-interest] Error output from org.antlr.Tool with
	language=Python, but generates code OK
In-Reply-To: <AANLkTimOBEskihz15nLPvP=31Mmw3UFLU3fEG1Vmt-h9@mail.gmail.com>
References: <AANLkTi=gDDkLQH47_SfVQtgnUDa1dsmfQ9nxbTDsGzpP@mail.gmail.com>
	<AANLkTimOBEskihz15nLPvP=31Mmw3UFLU3fEG1Vmt-h9@mail.gmail.com>
Message-ID: <007001cb5cf7$b19dd6e0$14d984a0$@temporal-wave.com>

You have no lexer rules. It is just a syntax error in your .g file. These
will be better reported in ANTLR 4

Jim

-----Original Message-----
From: antlr-interest-bounces at antlr.org
[mailto:antlr-interest-bounces at antlr.org] On Behalf Of Arthur Perry
Sent: Saturday, September 25, 2010 11:13 AM
To: antlr-interest at antlr.org
Subject: Re: [antlr-interest] Error output from org.antlr.Tool with
language=Python, but generates code OK

I am getting the same error - did you ever figure out the issue?

Art


> ---- bernt wrote: ----
>
> When executing the command:
>
> java -cp antlrworks-1.2.2.jar org.antlr.Tool Expr.g
>
> on a minimal Expr.g file (and any other grammar file with
language=Python):
> ---
> grammar Expr;
> options {
> ? ? ? ?language=Python;
> }
>
> prog:;
> ---
>
> the following happens:
>
> - the tool exits with error code 1, and writes an error message to the
console:
> ANTLR Parser Generator ?Version 3.1.1
> error(10): ?internal error: eval tree parse error : <AST>:0:0:
> unexpected AST node:
>
> org.antlr.stringtemplate.language.ActionEvaluator.expr(Unknown Source) 
> ...
> ...
> org.antlr.Tool.main(Unknown Source)
>
> - but the ExprParser.py file is generated just fine.
>
>
> Is there something wrong in org.antlr.Tool? Or am I doing something wrong?
>
> Regards,
> Bernt
>

List: http://www.antlr.org/mailman/listinfo/antlr-interest
Unsubscribe:
http://www.antlr.org/mailman/options/antlr-interest/your-email-address


From scott at rice.edu  Sat Sep 25 16:16:43 2010
From: scott at rice.edu (Scott Warren)
Date: Sat, 25 Sep 2010 18:16:43 -0500
Subject: [antlr-interest] problem with composite grammars (repost)
Message-ID: <BC5629B6-42E9-444F-A76C-5BC2659E22C9@rice.edu>

(Sorry if you've seen this -- I had a mail configuration error and I wonder if people may have missed it.)

Hi,

I'm working on a large open-source grammar and I've hit a problem with nested composite grammars. In short, "single inheritance" rule overriding in nested composite grammars does not work like inheritance in Java. I think this is a bug. It does not depend on the grammars being large.

Here's a brief example. Three grammars G1, G2, and G3 are "nested" in the sense that G3 imports G2 and G2 imports G1. A rule is defined in G1 and then overridden in G2. When G3 imports G2 I expect it to get the version of the rule defined in G2. In fact, ANTLR uses the rule from G1. (More precisely, G3Parser.java delegates the rule to G3_G2_G1.java rather than to G3_G2.java.) The example grammars and associated lexer are:

----------------------
lexer grammar L;
T1: '1';
T2: '2';
T3: '3';
T4: '4';
----------------------
parser grammar G1;
s: a | b;
a: T1;
b: T2;
----------------------
parser grammar G2;
import G1;
a: T3;
----------------------
grammar G3;
import G2;
b: T4;
----------------------

Using ANTLRWorks 1.4 containing ANTLR 3.2, when I generate these grammars and examine the file "G3Parser.java", I see the following lines of code for delegating methods:

----------------------
   // Delegated rules
   public void s() throws RecognitionException { gG1.s(); }
   public void a() throws RecognitionException { gG1.a(); }
----------------------

I think the last of these lines should say "gG2.a()"! The generated Java source will not compile.

Scott Warren



From paul at baumgart.us  Sat Sep 25 23:06:19 2010
From: paul at baumgart.us (Paul Baumgart)
Date: Sat, 25 Sep 2010 23:06:19 -0700
Subject: [antlr-interest] Build Problem - "Unable to download the artifact
	from an repository"
Message-ID: <AANLkTik0P3Zo2yeWWde5g84f1bdXBMZt=N-OdLspW0Vt@mail.gmail.com>

Hi folks,

I want to try out the JavaScript target for ANTLR, and read that I
need to build from source to do so. I cloned the GitHub repository,
and tried to follow the instructions in BUILD.txt

I get the following error, however:

"Cannot find parent: org.antlr:antlr-master for project:
org.antlr:antlr-runtime:jar:null for project
org.antlr:antlr-runtime:jar:null"

Full output: http://gist.github.com/597644

Also, this is the version of Maven I have installed:
$ mvn --version
Apache Maven 2.2.0 (r788681; 2009-06-26 06:04:01-0700)
Java version: 1.6.0_20
Java home: /System/Library/Frameworks/JavaVM.framework/Versions/1.6.0/Home
Default locale: en_US, platform encoding: MacRoman
OS name: "mac os x" version: "10.6.4" arch: "x86_64" Family: "mac"

The error message is similar to the one reported here, but that's the
closest I've been able to find with Google:
http://www.antlr.org/pipermail/antlr-interest/2009-May/034268.html

Any ideas on what I'm doing wrong?

Thanks,
Paul

From jimi at temporal-wave.com  Sun Sep 26 09:47:59 2010
From: jimi at temporal-wave.com (Jim Idle)
Date: Sun, 26 Sep 2010 09:47:59 -0700
Subject: [antlr-interest] Build Problem - "Unable to download the
	artifact	from an repository"
In-Reply-To: <AANLkTik0P3Zo2yeWWde5g84f1bdXBMZt=N-OdLspW0Vt@mail.gmail.com>
References: <AANLkTik0P3Zo2yeWWde5g84f1bdXBMZt=N-OdLspW0Vt@mail.gmail.com>
Message-ID: <002b01cb5d9a$93dd6d20$bb984760$@temporal-wave.com>

Download the source tarball from the downloads and build the source from
there.

Jim

-----Original Message-----
From: antlr-interest-bounces at antlr.org
[mailto:antlr-interest-bounces at antlr.org] On Behalf Of Paul Baumgart
Sent: Saturday, September 25, 2010 11:06 PM
To: antlr-interest at antlr.org
Subject: [antlr-interest] Build Problem - "Unable to download the artifact
from an repository"

Hi folks,

I want to try out the JavaScript target for ANTLR, and read that I need to
build from source to do so. I cloned the GitHub repository, and tried to
follow the instructions in BUILD.txt

I get the following error, however:

"Cannot find parent: org.antlr:antlr-master for project:
org.antlr:antlr-runtime:jar:null for project
org.antlr:antlr-runtime:jar:null"

Full output: http://gist.github.com/597644

Also, this is the version of Maven I have installed:
$ mvn --version
Apache Maven 2.2.0 (r788681; 2009-06-26 06:04:01-0700) Java version:
1.6.0_20 Java home:
/System/Library/Frameworks/JavaVM.framework/Versions/1.6.0/Home
Default locale: en_US, platform encoding: MacRoman OS name: "mac os x"
version: "10.6.4" arch: "x86_64" Family: "mac"

The error message is similar to the one reported here, but that's the
closest I've been able to find with Google:
http://www.antlr.org/pipermail/antlr-interest/2009-May/034268.html

Any ideas on what I'm doing wrong?

Thanks,
Paul

List: http://www.antlr.org/mailman/listinfo/antlr-interest
Unsubscribe:
http://www.antlr.org/mailman/options/antlr-interest/your-email-address


From arthur.r.perry at gmail.com  Sun Sep 26 14:37:49 2010
From: arthur.r.perry at gmail.com (Arthur Perry)
Date: Sun, 26 Sep 2010 16:37:49 -0500
Subject: [antlr-interest] Error output from org.antlr.Tool with
 language=Python, but generates code OK
Message-ID: <AANLkTinTQ2SxS3ku-rjkiWNo+K8ZDiNjhLJvBkCfk1fQ@mail.gmail.com>

Sorry - I actually am using a real grammar with parser and lexer
rules.  I'll paste the grammar at the end of this message, it is
pretty long.  I just thought I'd see if Bernt figured out the issue,
because I am getting the exact same error with the same version of
Antlrworks - 1.2.2

I do not get the error at all when I generate the Python code with
Antlrworks 1.4.  However, the the latest Python runtime seems to be
3.1.2, and Antlrworks 1.4 generates code for the 3.2 runtime.

If there is a Python runtime for 3.2, that would probably solve my
problem.  Can someone point me to it?

Thanks!

-Art


> From: "Kevin J. Cummings" <cummings at kjchome.homeip.net>
> In Bernt's example below, prog is an empty rule. ?Not a good idea.
> Probably deserving of a better error message though.
>
> If this is specific to the python project, you'd have to get an answer
> from one of the Python maintainers.

> From: "Jim Idle" <jimi at temporal-wave.com>
> You have no lexer rules. It is just a syntax error in your .g file. These
> will be better reported in ANTLR 4
>
> Jim
>

grammar PricingP;
options { language=Python;}

@members  { pricingHelper = "" }

pricingScript
	:	(condCase | clauseCase)+  'endCase:'? EOF
	;

condCase
	: 	{self.pricingHelper.incrementIndent()}
		'condCase:' condExpr 'then:' ((condCase | clauseCase)+ 'endCase:' |
pcTypeExpr )
		{self.pricingHelper.decrementIndent()}
		;

condExpr
	:	{ 	
			self.pricingHelper.resetIntermediateBuffer()
		}
		((dateRange | finRatio | extRating | balCond | hlt | outsideCondition )
			(andOr=STRING
			{	self.pricingHelper.addLineToResult(self.pricingHelper.intermediateBuffer.toString()
+ " " + self.pricingHelper.trimColon($andOr.text))
				self.pricingHelper.resetIntermediateBuffer()
			}		
			)?
		)+
		{self.pricingHelper.addLineToResult(self.pricingHelper.intermediateBuffer.toString());
		}
		;

outsideCondition
	:	'OUT:' outsideConditionCode=RIDSTRING outsideConditionValue=STRING
		{				
			self.pricingHelper.getIntermediateBuffer().append( "If( " +
self.pricingHelper.getNot($outsideConditionValue.text) + " " +
self.pricingHelper.lookupOutsideCondition(self.pricingHelper.trimCurlies($outsideConditionCode.text))
+ " )")
		}
	;

balCond
	:	'balCond:' pricingOptionOrAmount=RIDSTRING balanceType=RIDSTRING
facOrDeal=RIDSTRING minBalOp=STRING (('mn:' minBalValue=RIDSTRING) |
minBalValue=STRING) maxBalOp=STRING (('mn:' maxBalValue=RIDSTRING ) |
maxBalValue=STRING)
		{
			balType = ""
			if self.pricingHelper.trimCurlies($pricingOptionOrAmount.text).equalsIgnoreCase("AVG")
:
				balType = self.pricingHelper.lookupBalanceType(self.pricingHelper.trimCurlies($balanceType.text))
			else :
				balType = self.pricingHelper.lookupPricingOption(self.pricingHelper.trimCurlies($balanceType.text))
			
			self.pricingHelper.getIntermediateBuffer().append("( " +
self.pricingHelper.lookupFacOrDeal(self.pricingHelper.trimCurlies($facOrDeal.text))
+ " " + balType
			+ " ) From: ( " + $minBalOp.text + " ): " +
self.pricingHelper.formatCurrency($minBalValue.text) + " To ( " +
$maxBalOp.text + " ): " +
self.pricingHelper.formatCurrency($maxBalValue.text))
		}
	;
	
hlt :	 'HLT:' hltValue=STRING
		{	self.pricingHelper.getIntermediateBuffer().append( "If( " +
self.pricingHelper.getNot($hltValue.text) + " HLT )")}
		;

dateRange
	:	'dateRange:' minDateOp=STRING 'mn:'? minDateValue=RIDSTRING
maxDateOp=STRING 'mn:'? maxDateValue=RIDSTRING
	{self.pricingHelper.getIntermediateBuffer().append("From ( " +
$minDateOp.text + " ): " +
self.pricingHelper.formatDate(self.pricingHelper.trimCurlies($minDateValue.text))
+ " To ( " +  $maxDateOp.text + " ): " +
self.pricingHelper.formatDate(self.pricingHelper.trimCurlies($maxDateValue.text)))};
	
finRatio
	:	'finRatio:' finRatioType=RIDSTRING minFinRatioOp=STRING  (('mn:'
minFinRatioValue=RIDSTRING) | minFinRatioValue=STRING)
maxFinRatioOp=STRING (('mn:' maxFinRatioValue=RIDSTRING) |
maxFinRatioValue=STRING)
	{self.pricingHelper.getIntermediateBuffer().append("( Financial Ratio
- " + self.pricingHelper.lookupFinancialRatio(self.pricingHelper.trimCurlies($finRatioType.text))
+ " ) From ( " + $minFinRatioOp.text + " ): " + $minFinRatioValue.text
+ " To ( " + $maxFinRatioOp.text + " ): " + $maxFinRatioValue.text)};
	

extRating
	:	'extRating:' extRatingType=RIDSTRING extRatingRID=RIDSTRING
minRatingOp=STRING minRatingValue=RIDSTRING  maxRatingOp=STRING
maxRatingValue=RIDSTRING
		{	
		    self.pricingHelper.getIntermediateBuffer().append("( " +
self.pricingHelper.trimCurlies(self.pricingHelper.lookupCustomer($extRatingRID.text))
+ " - " + self.pricingHelper.trimCurlies(self.pricingHelper.lookupExternalRatingCode($extRatingType.text))
+ " ) From ( " + $minRatingOp.text + " ): " +
self.pricingHelper.trimCurlies($minRatingValue.text) + " To ( " +
$maxRatingOp.text + " ): " +
self.pricingHelper.trimCurlies($maxRatingValue.text))
		};
	
clauseCase
	:	{self.pricingHelper.incrementIndent()}
		'clauseCase:'  (fee | option)
		'then:' ((condCase | clauseCase)+  'endCase:'| pcTypeExpr)
		{self.pricingHelper.decrementIndent()}
		;

fee :	
		'feeType:' feeTypeCode=RIDSTRING  feeCategory=RIDSTRING bankCode=RIDSTRING
		{	self.pricingHelper.addLineToResult(self.pricingHelper.lookupPricingFeeCategory(self.pricingHelper.trimCurlies($feeCategory.text))
+ " - " + self.pricingHelper.lookupFeeTypeCode(self.pricingHelper.trimCurlies($feeTypeCode.text)))}
		;

option
	:	
		'optName:' optname=RIDSTRING  optOption=RIDSTRING
		{	self.pricingHelper.addLineToResult(self.pricingHelper.lookupPricingOptionName(self.pricingHelper.trimCurlies($optname.text))+":")}
	;

pcTypeExpr
	:	{	self.pricingHelper.incrementIndent()
			self.pricingHelper.resetIntermediateBuffer()
		}
		'pcType:' pcType=RIDSTRING ('minAmt:' minAmtValue=STRING)?',' rateExpr
		{	self.pricingHelper.addLineToResult(self.pricingHelper.getIntermediateBuffer().toString())
			self.pricingHelper.decrementIndent()
		};
		
rateExpr
	:	(rate | bal) (op (spread|cdsrate))? ;
	
bal :	'bal:' balType=RIDSTRING
		{
 			self.pricingHelper.getIntermediateBuffer().append(self.pricingHelper.lookupFeeBalanceType(self.pricingHelper.trimCurlies($balType.text)))
		}
	;

rate
	:	((compareExpr | baseRate)) ;
	
compareExpr 	:	rateCompare=('HO' | 'LO' | 'AO' | 'BP' ) '('
				{	self.pricingHelper.getIntermediateBuffer().append(self.pricingHelper.lookupRateCompare($rateCompare.text)
+ " ( ")
				}
				((baseRate|floorCeiling)
','{self.pricingHelper.getIntermediateBuffer().append(", ")}
				)+
				
				(baseRate|floorCeiling) ')'
				{ 	self.pricingHelper.getIntermediateBuffer().append(" ) ")
				}
				(baseSpread)?;

baseRate
 	:	'baseRate:' rateName=RIDSTRING
 		{
 			self.pricingHelper.getIntermediateBuffer().append(" ( " +
self.pricingHelper.lookupBaseRate(self.pricingHelper.trimCurlies($rateName.text)))
 		}
 		(baseSpread)?
 		{ self.pricingHelper.getIntermediateBuffer().append(" )") }
 		;	

baseSpread	:
		{	values = []      }
		(op1=STRING spreadValueType1=STRING spreadValue1=STRING
		{ 	val = [$op1.text, $spreadValue1.text, $spreadValueType1.text ]
		  	values.append(val)
		  }
		)+
		{	
			if len(values)<2:
				val = values[0]
				self.pricingHelper.getIntermediateBuffer().append(" " + val[0] + "
" + self.pricingHelper.calculateSpreadValue(val[1], val[2]) +
self.pricingHelper.lookupSpreadValueType(val[2]))
			else :
				self.pricingHelper.getIntermediateBuffer().append(" " + values[0][0] + " (")
				i = 0
				for val in values:
					if i > 0:
						self.pricingHelper.getIntermediateBuffer().append(" " + val[0] + " ")
					
					self.pricingHelper.getIntermediateBuffer().append(self.pricingHelper.calculateSpreadValue(val[1],
val[2]) + self.pricingHelper.lookupSpreadValueType(val[2]))
					i = i+1
				
				self.pricingHelper.getIntermediateBuffer().append(")")
			
		};	
			
floorCeiling
	:	spreadValueType2=STRING spreadValue2=STRING
			{	self.pricingHelper.getIntermediateBuffer().append(" " +
self.pricingHelper.calculateSpreadValue($spreadValue2.text,
$spreadValueType2.text) +
self.pricingHelper.lookupSpreadValueType($spreadValueType2.text))
			}
	;			

op 	:	'op:' opValue=STRING
			{	
				if $opValue.text == "*" :
					self.pricingHelper.getIntermediateBuffer().append(" X Rate " )
				elif $opValue.text == "+" :
					self.pricingHelper.getIntermediateBuffer().append(" " +
($opValue.text) + " Spread " )
				
			};	


spread 	:	'spread:' spreadValueType=RIDSTRING spreadValue=STRING
			{	self.pricingHelper.getIntermediateBuffer().append( "(" +
self.pricingHelper.calculateSpreadValue($spreadValue.text,
$spreadValueType.text) +
self.pricingHelper.lookupSpreadValueType($spreadValueType.text) + ")
")
			};	
cdsrate	:	'cdsRate:(' ((STRING|RIDSTRING)(',')?)+ ')'
			{
				self.pricingHelper.getIntermediateBuffer().append( "(FLOATING)" )
			};	
RIDSTRING : '{'('a'..'z' | 'A'..'Z' |  '0'..'9' | '.'| '<'| '('| '+'|
'!'| '*'| ')'| ';'| '>'| '?'| ':'| '#'| '@'| '=' | '/' | '-' | ','
|'$')+'}';
STRING 	: ('a'..'z' | 'A'..'Z' |  '0'..'9' | '.' | '=' | '<' | '>' |
':' | '/' | '+' | '-' | '{' | '}' | '*'| '!' | ';'| '?' | '@')+ ; // |
'(' | ')' | ','
WS 	: (' ' |'\t' | '\r' | '\n')+ {self.skip()} ;

From metatheorem at gmail.com  Mon Sep 27 05:40:07 2010
From: metatheorem at gmail.com (Ryan Twitchell)
Date: Mon, 27 Sep 2010 08:40:07 -0400
Subject: [antlr-interest] Matching a token from only one rule?
Message-ID: <4CA090A7.7050400@gmail.com>

 Hi all,

At the start of one parser rule I would like, as one alternative, to
match nearly any input ending before a certain character value.  I would
like this to match as a single token if possible.  I am not sure how to
achieve this, and have tried a number of things so far.  Here is my best
shot so far:

elem
    :    DECL ';'
    |    ID '=' expr ';'
    ;

DECL: (DECL_CHAR+ ';') => DECL_CHAR+
    ;

fragment
DECL_CHAR
    :    ~(';'|'=')
    ;

Working with the above, ANTLR reports that tokens such as ID can never
be matched, since DECL matches them already.  I had not thought this
would be the case with a syntactic predicate in front of the alternative.


So far, I have only had success by incorporating the end character into
the token, as follows.  But I believe this will lead to the token
matching in other, unexpected places.

DECL:  DECL_CHAR+ ';'
    ;

The important problem is that I don't want DECL to match at other parts
of the grammar. 

TIA for any advice,

Ryan Twitchell


From daniel.lidstrom at gpsgate.com  Mon Sep 27 08:16:02 2010
From: daniel.lidstrom at gpsgate.com (=?iso-8859-1?Q?Daniel_Lidstr=F6m?=)
Date: Mon, 27 Sep 2010 17:16:02 +0200
Subject: [antlr-interest] Whitespace is significant sometimes
Message-ID: <54C02B9217A84D2EA961EDA03614085C@DanielPC>

Hello,

I am trying to parse a simple templating language that may look like this:

"a  aa [T * 2]a a"

Here, the part inside [] should be calculated (T has an integer value) and 
replaced. The other part
is supposed to be left as-is. With those rules, the output should be "a aa 
30a a" (when T is 15).
I want to be able to have whitespace surrounding the '*', so I am sending ' 
' to the hidden channel.
But that breaks the parts outside [] into pieces. Is there a way to capture 
the part outside [] as-is,
with whitespace exactly like written, and the part inside [] is relaxed 
where whitespace to go hidden
channel?

Daniel

Here's my grammar, btw:

parse
	: (IDENT | variable)+ EOF
	;

variable
	: '[' mult ']'
	;

// the multiplication is optional
mult
	: IDENT ('*' INTEGER)?
	;

fragment DIGIT : '0'..'9' ;
INTEGER : DIGIT+ ;

fragment LETTER : 'a'..'z' | 'A'..'Z';
IDENT : LETTER+ ;

WS : ' '+ { $channel = HIDDEN; } ;
 


From yotommy at gmail.com  Mon Sep 27 08:17:34 2010
From: yotommy at gmail.com (Tom Smith)
Date: Mon, 27 Sep 2010 11:17:34 -0400
Subject: [antlr-interest] tree matcher: catch-all?
Message-ID: <AANLkTin4=Vdqa3xtxkeufB4Z+_MXMGJ6bYVxcpmqc1mc@mail.gmail.com>

I am using a tree matcher to operate on specific subtrees.  However,
sometimes when I make changes to the tree-generation phase, I fail to
make the required matching changes in my tree matcher.  The result is
that the subtree doesn't match, which does not bother the tree matcher
in the least.  Instead, I'd like to flag this situation, so that I
realize I have a programming error.

In particular, my Trans.g looks like:

tree grammar Trans;

options {
	tokenVocab=SsipAST;
	output=AST;
	ASTLabelType=CTree;
	filter = true;
}

topdown: transition;

transition:    ^(TRANSITION s1=stateName s2=stateName arcBody[$s1.text]
               {  // Do some management here
               };

Every subtree that starts with TRANSITION should match this rule, but
in the development process, sometimes they don't.  Any suggestions how
to catch these situations?

I tried something like:

transition:    ^(TRANSITION ( s1=stateName s2=stateName
arcBody[$s1.text] { ... } | .* { FLAG_ERROR_HERE() } );

... but this of course leads to ambiguity warnings:

Decision can match input such as "PREDICATE DOWN Identifier DOWN..UP"
using multiple alternatives: 1, 2
As a result, alternative(s) 2 were disabled for that input

Ideas?

Thanks,
Tom Smith.

From daniel.lidstrom at gpsgate.com  Tue Sep 28 00:03:09 2010
From: daniel.lidstrom at gpsgate.com (=?iso-8859-1?Q?Daniel_Lidstr=F6m?=)
Date: Tue, 28 Sep 2010 09:03:09 +0200
Subject: [antlr-interest] Whitespace is significant sometimes
In-Reply-To: <54C02B9217A84D2EA961EDA03614085C@DanielPC>
References: <54C02B9217A84D2EA961EDA03614085C@DanielPC>
Message-ID: <C5BC475607864EA2B0B819735B4A9483@DanielPC>

From: "Daniel Lidstr?m" <daniel.lidstrom at gpsgate.com>
[...]
> Is there a way to capture
> the part outside [] as-is,
> with whitespace exactly like written, and the part inside [] is relaxed
> where whitespace to go hidden
> channel?
>
> Daniel
>
> Here's my grammar, btw:
>
> parse
> : (IDENT | variable)+ EOF
> ;
>
> variable
> : '[' mult ']'
> ;
>
> // the multiplication is optional
> mult
> : IDENT ('*' INTEGER)?
> ;
>
> fragment DIGIT : '0'..'9' ;
> INTEGER : DIGIT+ ;
>
> fragment LETTER : 'a'..'z' | 'A'..'Z';
> IDENT : LETTER+ ;
>
> WS : ' '+ { $channel = HIDDEN; } ;

I will try to answer myself. After a good nights sleep I think I have found 
a way to solve
this problem, using actions. I am going to build an abstract syntax tree 
from this grammar.
Then I figured I can keep a context variable within my parser. Whenever I am 
parsing a
variable (rule above) I set the variableContext to true. Then I capture 
whitespace within
the WS rule but only when the variableContext is set to false. I haven't 
worked out the
details yet but I am positive it should work. Is there anyone who knows of 
an online
grammar example that does something like this?

Daniel 


From lgcraymer at yahoo.com  Tue Sep 28 00:43:37 2010
From: lgcraymer at yahoo.com (Loring Craymer)
Date: Tue, 28 Sep 2010 00:43:37 -0700 (PDT)
Subject: [antlr-interest] Whitespace is significant sometimes
In-Reply-To: <C5BC475607864EA2B0B819735B4A9483@DanielPC>
References: <54C02B9217A84D2EA961EDA03614085C@DanielPC>
	<C5BC475607864EA2B0B819735B4A9483@DanielPC>
Message-ID: <282508.47024.qm@web55906.mail.re3.yahoo.com>

This is the sort of problem that can be solved with lexer modes.  ANTLR 3 does 
not support lexer modes, however, so the usual approach is two phase parsing, 
where the first pass would parse text outside of [ ] but recognizes [ ... ] 
constructs as single tokens.  The second pass processes the text inside of 
braces.  Not pretty, but it works.  Trying to implement something which requires 
feedback between parser and lexer is a bad idea, even if you can get it to work: 
 the resulting grammars will be very fragile.

--Loring



----- Original Message ----
> From: Daniel Lidstr?m <daniel.lidstrom at gpsgate.com>
> To: Antlr <antlr-interest at antlr.org>
> Sent: Tue, September 28, 2010 12:03:09 AM
> Subject: Re: [antlr-interest] Whitespace is significant sometimes
> 
> From: "Daniel Lidstr?m" <daniel.lidstrom at gpsgate.com>
> [...]
> >  Is there a way to capture
> > the part outside [] as-is,
> > with  whitespace exactly like written, and the part inside [] is relaxed
> > where  whitespace to go hidden
> > channel?
> >
> > Daniel
> >
> >  Here's my grammar, btw:
> >
> > parse
> > : (IDENT | variable)+  EOF
> > ;
> >
> > variable
> > : '[' mult ']'
> >  ;
> >
> > // the multiplication is optional
> > mult
> > : IDENT  ('*' INTEGER)?
> > ;
> >
> > fragment DIGIT : '0'..'9' ;
> >  INTEGER : DIGIT+ ;
> >
> > fragment LETTER : 'a'..'z' |  'A'..'Z';
> > IDENT : LETTER+ ;
> >
> > WS : ' '+ { $channel =  HIDDEN; } ;
> 
> I will try to answer myself. After a good nights sleep I  think I have found 
> a way to solve
> this problem, using actions. I am going  to build an abstract syntax tree 
> from this grammar.
> Then I figured I can  keep a context variable within my parser. Whenever I am 
> parsing  a
> variable (rule above) I set the variableContext to true. Then I capture 
> whitespace within
> the WS rule but only when the variableContext is set to  false. I haven't 
> worked out the
> details yet but I am positive it should  work. Is there anyone who knows of 
> an online
> grammar example that does  something like this?
> 
> Daniel 
> 
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: 
>http://www.antlr.org/mailman/options/antlr-interest/your-email-address
> 


      


From daniel.lidstrom at gpsgate.com  Tue Sep 28 02:46:55 2010
From: daniel.lidstrom at gpsgate.com (=?iso-8859-1?Q?Daniel_Lidstr=F6m?=)
Date: Tue, 28 Sep 2010 11:46:55 +0200
Subject: [antlr-interest] Whitespace is significant sometimes
In-Reply-To: <282508.47024.qm@web55906.mail.re3.yahoo.com>
References: <54C02B9217A84D2EA961EDA03614085C@DanielPC>
	<C5BC475607864EA2B0B819735B4A9483@DanielPC>
	<282508.47024.qm@web55906.mail.re3.yahoo.com>
Message-ID: <7AA70457F05A4500835B4B71B2867F0E@DanielPC>

From: "Loring Craymer" <lgcraymer at yahoo.com>
> This is the sort of problem that can be solved with lexer modes.  ANTLR 3 
> does
> not support lexer modes, however, so the usual approach is two phase 
> parsing,
> where the first pass would parse text outside of [ ] but recognizes [ 
> ... ]
> constructs as single tokens.  The second pass processes the text inside of
> braces.  Not pretty, but it works.  Trying to implement something which 
> requires
> feedback between parser and lexer is a bad idea, even if you can get it to 
> work:
> the resulting grammars will be very fragile.
>
> --Loring

Hello Loring. I was just about to implement my scheme when I realized just 
what
you are saying. The approach you suggest does seem a lot easier. I figured I 
can
use semantic actions at each rule to build an expression tree of my own 
classes.
Then I can build a special node that handles the "inner" grammar of variable 
rules ([xxx]).
Sounds reasonable to me, at the moment anyway.
Thank you for your suggestion!

Daniel
 


From amartinez at atc.ugr.es  Tue Sep 28 11:13:05 2010
From: amartinez at atc.ugr.es (=?ISO-8859-1?Q?Antonio_Mart=EDnez_=C1lvarez?=)
Date: Tue, 28 Sep 2010 20:13:05 +0200
Subject: [antlr-interest] How to distinguish between an assembler comment
	and a literal integer
Message-ID: <4CA23031.9030207@atc.ugr.es>

Hi All ,
I'm working on an MSP430 assembly parser and I have this problem:

Fist of all this is a possible input for my grammar:

###################
#  Theese are comments     #
#                                            #
#    bla bla bla                      #
###################
labelA:
MOV.W  #0x1234, R5



As you an see '#' is used either for an introductory log and also to 
express a literal hex integer.

I'm trying something like (without success):


HEX_LITERAL    :   '0x' HEX_DIGIT HEX_DIGIT HEX_DIGIT HEX_DIGIT ;
fragment HEX_DIGIT : ('0'..'9'|'a'..'f'|'A'..'F') ;

COMMENT
     :   '//' ~('\n'|'\r')* '\r'? '\n' {$channel=HIDDEN;}
     |    '#' '0x' => HEX_LITERAL
     |   '/*' ( options {greedy=false;} : . )* '*/' {$channel=HIDDEN;}
     ;


Result: [20:06:35] error(100): msp430.g:111:11: syntax error: antlr: 
msp430.g:111:11: unexpected token: '0x'


Could you please help me? How can I capture literal integer within this 
grammar?

From bijoys_2000 at yahoo.com  Tue Sep 28 14:43:33 2010
From: bijoys_2000 at yahoo.com (bijoys_2000 at yahoo.com)
Date: Tue, 28 Sep 2010 14:43:33 
Subject: [antlr-interest] [SPAM] Re: YO ANTLR!!!
Message-ID: 1089ee09354ac13af96b518d2443b2d7@[192.168.1.1]

al do you know about this?? my associates and I found a method to make around $099 - $2,439 dollars weekly i didn't think it was possible since the start the income has only gone up. you only must sign up 4 the program <a href="http://hooder.info">click to see it</a> A garden pushes the calculus. thomasocean The elected book complains. dasha

From kirby.bohling at gmail.com  Tue Sep 28 12:36:34 2010
From: kirby.bohling at gmail.com (Kirby Bohling)
Date: Tue, 28 Sep 2010 14:36:34 -0500
Subject: [antlr-interest] How to distinguish between an assembler
 comment and a literal integer
In-Reply-To: <4CA23031.9030207@atc.ugr.es>
References: <4CA23031.9030207@atc.ugr.es>
Message-ID: <AANLkTin9w7BxdoXo=-LQuf+KHKmZJHjnTWmEYNM4rqLa@mail.gmail.com>

Do the #'s that start a comment have to be the first character?  Can
there ever be a '#' that is a literal on the first character of the
line?

If those questions are respectively: Yes, and No, then you use a
predicate to determine if the '#' is the first character of the line,
and pick the token type based upon that.  I'd also use the approach of
spotting a '#' and then picking comment or not a comment, rather then
the approach you are taking.

I think what you want is some type of predicate or look ahead that has
two alternatives, one to use if think it is a hex value, and one if
you think it is a comment.

That example is way more powerful then what you actually need, but it
has what you want buried in it if you dig it out:

http://www.antlr.org/wiki/display/ANTLR3/Lexer+grammar+for+floating+point%2C+dot%2C+range%2C+time+specs

That example uses a lot of look ahead, and has more advanced error
handling.  Understanding it is very useful if you want to produce a
more useful and end user friendly parser/grammar.

Kirby


2010/9/28 Antonio Mart?nez ?lvarez <amartinez at atc.ugr.es>:
> Hi All ,
> I'm working on an MSP430 assembly parser and I have this problem:
>
> Fist of all this is a possible input for my grammar:
>
> ###################
> # ?Theese are comments ? ? #
> # ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?#
> # ? ?bla bla bla ? ? ? ? ? ? ? ? ? ? ?#
> ###################
> labelA:
> MOV.W ?#0x1234, R5
>
>
>
> As you an see '#' is used either for an introductory log and also to
> express a literal hex integer.
>
> I'm trying something like (without success):
>
>
> HEX_LITERAL ? ?: ? '0x' HEX_DIGIT HEX_DIGIT HEX_DIGIT HEX_DIGIT ;
> fragment HEX_DIGIT : ('0'..'9'|'a'..'f'|'A'..'F') ;
>
> COMMENT
> ? ? : ? '//' ~('\n'|'\r')* '\r'? '\n' {$channel=HIDDEN;}
> ? ? | ? ?'#' '0x' => HEX_LITERAL
> ? ? | ? '/*' ( options {greedy=false;} : . )* '*/' {$channel=HIDDEN;}
> ? ? ;
>
>
> Result: [20:06:35] error(100): msp430.g:111:11: syntax error: antlr:
> msp430.g:111:11: unexpected token: '0x'
>
>
> Could you please help me? How can I capture literal integer within this
> grammar?
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>

From tounsimolka at yahoo.fr  Tue Sep 28 13:46:42 2010
From: tounsimolka at yahoo.fr (Molka Tounsi)
Date: Tue, 28 Sep 2010 20:46:42 +0000 (GMT)
Subject: [antlr-interest] Warning : the grammar used by the remote parser is
	not the same.
Message-ID: <137317.4457.qm@web26404.mail.ukl.yahoo.com>

Hello,
I tried this example which translates of C in  SQL and he has worked before, but 
now he does not work  he shows me: "Warning : the grammar used by the remote 
parser is not the same ( CSQL.g )".
 what  is the problem?
thanks.


      

From andrey.desyatov at gmail.com  Wed Sep 29 08:51:45 2010
From: andrey.desyatov at gmail.com (Andrey Desyatov)
Date: Wed, 29 Sep 2010 19:51:45 +0400
Subject: [antlr-interest] Rule FOLLOW sets
In-Reply-To: <AANLkTimoxRcor=9XQp1LFjrUCupP8HFyOSLd+qjGCnVA@mail.gmail.com>
References: <AANLkTimoxRcor=9XQp1LFjrUCupP8HFyOSLd+qjGCnVA@mail.gmail.com>
Message-ID: <AANLkTinVTQLJ_Kf=Z-AeopkG3SKfi1YVkSVkizRjM+1C@mail.gmail.com>

Hi,

I have a strange behavior with the FOLLOW sets that are generated by antlr.
I have following rule:

variableSyntax
: storageClass* typeModifier* ident ident
 ;

storageClass
: 'extern' | 'nointerpolation' | 'precise' | 'shared' | 'groupshared' |
'static' | 'uniform' | 'volatile'
 ;
typeModifier
: 'const' | 'row_major' | 'column_major'
 ;

ident
        : Identifier
        ;


In this case antlr generate code where FOLLOW_storageClass_in_variableSyntax
and FOLLOW_typeModifier_in_variableSyntax are the same.
Why can this happen? Is it concerning the syntax of the grammar or just
internal implementation of the library?

Best regards,
Andrey



-- 
? ?????????,
??????? ??????

