<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [antlr-interest] C++ is slower than Java?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:antlr-interest%40antlr.org?Subject=%5Bantlr-interest%5D%20C%2B%2B%20is%20slower%20than%20Java%3F&In-Reply-To=a5aph0%2Beuqh%40eGroups.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000705.html">
   <LINK REL="Next"  HREF="000711.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[antlr-interest] C++ is slower than Java?</H1>
    <B>Ric Klaren</B> 
    <A HREF="mailto:antlr-interest%40antlr.org?Subject=%5Bantlr-interest%5D%20C%2B%2B%20is%20slower%20than%20Java%3F&In-Reply-To=a5aph0%2Beuqh%40eGroups.com"
       TITLE="[antlr-interest] C++ is slower than Java?">klaren at cs.utwente.nl
       </A><BR>
    <I>Mon Feb 25 03:24:30 PST 2002</I>
    <P><UL>
        <LI>Previous message: <A HREF="000705.html">[antlr-interest] C++ is slower than Java?
</A></li>
        <LI>Next message: <A HREF="000711.html">[antlr-interest] Re: C++ is slower than Java?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#710">[ date ]</a>
              <a href="thread.html#710">[ thread ]</a>
              <a href="subject.html#710">[ subject ]</a>
              <a href="author.html#710">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

On Sun, Feb 24, 2002 at 01:23:44PM -0000, keren_jefet wrote:
&gt;<i> I have tested the java.g example both on Java-generated parser, and
</I>&gt;<i> on Cpp-generated parser (antlr-2.7.1, buildAST=true).
</I>&gt;<i> Surprisingly, I found out that the Java parser, was significantly
</I>&gt;<i> faster than the Cpp one, especially when handling long java source
</I>&gt;<i> files. (sometimes even 600% faster...)
</I>&gt;<i>
</I>&gt;<i> How can that be?
</I>&gt;<i> Is this related to the specific java.g grammar definitions, or maybe
</I>&gt;<i> it is true for all parsers, no matter of the grammar complexity?
</I>
Hmm strange. Ok I had a quick look now. And noted the following:

Platform specifics:

ANTLR: antlr 2.7.2a1

C++:
  g++ 2.95.3,
  Sun Ultra-60: Solaris 2.8, 1 Gigabyte of main memory, 450 MHz UltraSPARC-II CPU
  All tests on a local disc.
  Relevant compiler options: -O2 -DANTLR_SUPPORT_XML -felide-constructors
  (yields binary of 1Mb)

Java:
  java version &quot;1.2.2&quot;
  Solaris VM (build Solaris_JDK_1.2.2_07a, native threads, sunwjit)
  jikes version 1.11 (10 jan 2000) used as javac

- java.g java.tree.g from 2.7.1 distro. Generated parsers with 2.7.2a2.
  Test files the main antlr/java tree.
- Ported one small change from java version to C++ version.
- The C++ version of the treewalker barfs on several files. Guess there's a
  bug or something in the 2.7.2a1 C++ codegen or javacodegen. (My guess is
  the first)
- Removed the files that misparsed tested again. (this makes my results
  quite questionable I know...) But I presume that if there's no error
  reported that the whole thing gets parsed and that the difference should
  be neglectible (then again it might not..)

Java version comes down to this:

real       20.9
user       10.7
sys         6.6

C++ version to this:

real        7.1
user        6.1
sys         0.0

These results are may vary one or two tenth per number between runs. So I
don't see the behaviour you do, not even the slightest indication of it.
You might post some more specifics on your testrig. Feel free to mail me
your testfiles and I'll run them here.

Ric

PS Oh yah and I had my xmms still playing Tristania's World of Glass album
which is btw very enjoyable ;)
--
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- <A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">klaren at cs.utwente.nl</A> ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
     Human beings, who are almost unique in having the ability to learn
   from the experience of others, are also remarkable for their apparent
         disinclination to do so. --- Douglas Adams, Last Chance to See


 

Your use of Yahoo! Groups is subject to <A HREF="http://docs.yahoo.com/info/terms/">http://docs.yahoo.com/info/terms/</A> 

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000705.html">[antlr-interest] C++ is slower than Java?
</A></li>
	<LI>Next message: <A HREF="000711.html">[antlr-interest] Re: C++ is slower than Java?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#710">[ date ]</a>
              <a href="thread.html#710">[ thread ]</a>
              <a href="subject.html#710">[ subject ]</a>
              <a href="author.html#710">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.antlr.org/mailman/listinfo/antlr-interest">More information about the antlr-interest
mailing list</a><br>
</body></html>
