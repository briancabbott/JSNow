<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [antlr-interest] C Runtime problem with $channel=HIDDEN and SKIP()
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20C%20Runtime%20problem%20with%20%24channel%3DHIDDEN%20and%0A%20SKIP%28%29&In-Reply-To=%3C1225119651.4826.130.camel%40jimi%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="031231.html">
   <LINK REL="Next"  HREF="031236.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[antlr-interest] C Runtime problem with $channel=HIDDEN and SKIP()</H1>
    <B>Jim Idle</B> 
    <A HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20C%20Runtime%20problem%20with%20%24channel%3DHIDDEN%20and%0A%20SKIP%28%29&In-Reply-To=%3C1225119651.4826.130.camel%40jimi%3E"
       TITLE="[antlr-interest] C Runtime problem with $channel=HIDDEN and SKIP()">jimi at temporal-wave.com
       </A><BR>
    <I>Mon Oct 27 08:00:51 PDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="031231.html">[antlr-interest] C Runtime problem with $channel=HIDDEN and	SKIP()
</A></li>
        <LI>Next message: <A HREF="031236.html">[antlr-interest] C Runtime problem with $channel=HIDDEN and SKIP()
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#31237">[ date ]</a>
              <a href="thread.html#31237">[ thread ]</a>
              <a href="subject.html#31237">[ subject ]</a>
              <a href="author.html#31237">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Sun, 2008-10-26 at 21:41 -0400, Bu&#287;ra Gedik wrote:

&gt;<i> Adding the line &quot;LEXSTATE-&gt;tokenStartCharIndex += $text-&gt;size
</I>&gt;<i> -1;&quot; after the SKIP() fixes the SKIP bug. 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> But then, the behavior of SKIP and $channel=HIDDEN become the same
</I>&gt;<i> with respect to my original problem, that is when I print the rule
</I>&gt;<i> text using $text-&gt;chars, I do not get the hidden or skipped tokens.
</I>&gt;<i> This seems to be the expected behavior with skip() in Java runtime.
</I>&gt;<i> However, with $channel=hidden in Java runtime, I get the hidden chars
</I>&gt;<i> in the text of the rule, using $text, which is inconsistent with the C
</I>&gt;<i> runtime.
</I>


Though generally the text for the whole rule isn't that useful, I can
see that it might be in some cases. I will review the Java code and see
if this was deliberately changed to do this or is just a side effect. I
can see arguments for both, but when you get the start and end span in
an AST node, then it includes the HIDDEN tokens, so it probably should
do so in the rule text.

Jim

&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> Cheers,
</I>&gt;<i> -bugra
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> On Sun, Oct 26, 2008 at 8:52 PM, Bu&#287;ra Gedik &lt;<A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">bgedik at gmail.com</A>&gt; wrote:
</I>&gt;<i> 
</I>&gt;<i>         Hi (Jim),
</I>&gt;<i>         
</I>&gt;<i>         
</I>&gt;<i>         
</I>&gt;<i>         With the C runtime when using $channel=HIDDEN the hidden
</I>&gt;<i>         tokens DO NOT appear when printing a rule with $text-&gt;chars,
</I>&gt;<i>         whereas with the Java runtime they appear (which I assume is
</I>&gt;<i>         the expected behaviour). The problem can be solved by using
</I>&gt;<i>         SKIP() instead with the C runtime, but the SKIP function has a
</I>&gt;<i>         bug (I saw it the official list of bugs), it messes up the
</I>&gt;<i>         next token (includes the spaces).
</I>&gt;<i>         
</I>&gt;<i>         
</I>&gt;<i>         I'm using 3.1 (not 3.1.1). Any plans on fixing these? Or, are
</I>&gt;<i>         they fixed in 3.1.1?
</I>&gt;<i>         
</I>&gt;<i>         
</I>&gt;<i>         Cheers,
</I>&gt;<i>         -bugra
</I>&gt;<i>         
</I>&gt;<i>         
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> List: <A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">http://www.antlr.org/mailman/listinfo/antlr-interest</A>
</I>&gt;<i> Unsubscribe: <A HREF="http://www.antlr.org/mailman/options/antlr-interest/your-email-address">http://www.antlr.org/mailman/options/antlr-interest/your-email-address</A>
</I>&gt;<i> 
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://www.antlr.org/pipermail/antlr-interest/attachments/20081027/72ff1b23/attachment.html">http://www.antlr.org/pipermail/antlr-interest/attachments/20081027/72ff1b23/attachment.html</A> 
</PRE>






<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="031231.html">[antlr-interest] C Runtime problem with $channel=HIDDEN and	SKIP()
</A></li>
	<LI>Next message: <A HREF="031236.html">[antlr-interest] C Runtime problem with $channel=HIDDEN and SKIP()
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#31237">[ date ]</a>
              <a href="thread.html#31237">[ thread ]</a>
              <a href="subject.html#31237">[ subject ]</a>
              <a href="author.html#31237">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.antlr.org/mailman/listinfo/antlr-interest">More information about the antlr-interest
mailing list</a><br>
</body></html>
