<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [antlr-interest] Improvements to the Antlr PHP Target
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20Improvements%20to%20the%20Antlr%20PHP%20Target&In-Reply-To=%3C1283800374.3278.24.camel%40benny-pc%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="039651.html">
   <LINK REL="Next"  HREF="039656.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[antlr-interest] Improvements to the Antlr PHP Target</H1>
    <B>Benjamin Eberlei</B> 
    <A HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20Improvements%20to%20the%20Antlr%20PHP%20Target&In-Reply-To=%3C1283800374.3278.24.camel%40benny-pc%3E"
       TITLE="[antlr-interest] Improvements to the Antlr PHP Target">kontakt at beberlei.de
       </A><BR>
    <I>Mon Sep  6 12:12:54 PDT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="039651.html">[antlr-interest] Compilation linking error with ANTLR 3.x
</A></li>
        <LI>Next message: <A HREF="039656.html">[antlr-interest] Handling range-limited tokens
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#39653">[ date ]</a>
              <a href="thread.html#39653">[ thread ]</a>
              <a href="subject.html#39653">[ subject ]</a>
              <a href="author.html#39653">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello,

We are currently building an open-source PHP ORM
(<A HREF="http://www.doctrine-project.org">http://www.doctrine-project.org</A>) that utilizes a hand-written Top-Down,
Recursive-Descent Parser for our Query Language. That is why we are
looking for ways how to automate the parser generation for a future
major release to increase maintainability. This his going to be a
potential long-run refactoring for our project, so we are looking into
possible solutions as early as possible.

We know Antlr exists and have found the ongoing effort to write an Antlr
Target for PHP at <A HREF="http://code.google.com/p/antlrphpruntime/.">http://code.google.com/p/antlrphpruntime/.</A> However it
seems development of that target has come to halt. Additionally we had
doubts with regard to some design decisions in the Runtime engine.

Over the weekend I have forked that project at
<A HREF="http://github.com/beberlei/antlr-php-runtime">http://github.com/beberlei/antlr-php-runtime</A> and changed the
following stuff:

* Migrated Runtime to PHP 5.3 Namespaces (Antlr\Runtime\*)
* Fixed formatting of all files to comply to PEAR/Zend Coding Standards
(Php.stg is not yet generation compliant code)
* Fixed functional testsuite to pass up to test 41 of the Python
testsuite (with the exception of Test 22)
* Refactored testsuite to have distinct sub-directories for grammer and
generated code to enhance readibility/maintainability.
* Removed class &quot;Set&quot; and implemented follow sets with simple PHP arrays
for performance reasons.
* Removed &quot;public static&quot; token and &quot;constants&quot; and used PHP class
constants for performance reasons (compile vs runtime generation)
* Rewrote DFA code (although this still does not support unicode and
probably has other bugs)
* Lots of other refactorings to make use of PHP internal features.

How should the development of this target continue given that the
original code is in the Google SVN? For the namespace and test-cleanup
refactoring I moved almost all files to new directories, so this could
be a bit cumbersome to merge back (sorry for that! :()

Additionally for further development it would be helpful if anyone could
help me with these questions:

1. Is it really required to have a Runtime of &quot;StringTemplate&quot; library
in PHP? What is it used for at runtime? When is the ST.stg template used
at all?
2. Can i escape strings from the template generator? In &lt;description&gt;
there are sometimes literals of the kind &quot;?&gt;&quot; which end the PHP mode
even if they are inside comments and make the code fail. I would like to
strip &quot;?&gt;&quot; from each &lt;description&gt; I render.
3. How stable are the runtimes? I see very little commits to them, so
probably very stable. But how will that change with Antlr v4 in
development?
4. After the basic Parser/Lexer support, what would be the next step in
target development? AST support with the Tree Runtime namespace?

greetings,
Benjamin

</PRE>





<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="039651.html">[antlr-interest] Compilation linking error with ANTLR 3.x
</A></li>
	<LI>Next message: <A HREF="039656.html">[antlr-interest] Handling range-limited tokens
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#39653">[ date ]</a>
              <a href="thread.html#39653">[ thread ]</a>
              <a href="subject.html#39653">[ subject ]</a>
              <a href="author.html#39653">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.antlr.org/mailman/listinfo/antlr-interest">More information about the antlr-interest
mailing list</a><br>
</body></html>
