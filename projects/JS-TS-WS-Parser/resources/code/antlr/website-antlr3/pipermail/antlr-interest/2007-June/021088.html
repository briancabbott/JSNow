<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [antlr-interest] java.lang.OutOfMemoryError: Java heap space
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20java.lang.OutOfMemoryError%3A%20Java%20heap%20space&In-Reply-To=%3C9516FA5D-C8FA-4499-9C3B-DA60766CEE9F%40wincent.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="021081.html">
   <LINK REL="Next"  HREF="021090.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[antlr-interest] java.lang.OutOfMemoryError: Java heap space</H1>
    <B>Wincent Colaiuta</B> 
    <A HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20java.lang.OutOfMemoryError%3A%20Java%20heap%20space&In-Reply-To=%3C9516FA5D-C8FA-4499-9C3B-DA60766CEE9F%40wincent.com%3E"
       TITLE="[antlr-interest] java.lang.OutOfMemoryError: Java heap space">win at wincent.com
       </A><BR>
    <I>Tue Jun  5 11:18:39 PDT 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="021081.html">[antlr-interest] All except...
</A></li>
        <LI>Next message: <A HREF="021090.html">[antlr-interest] java.lang.OutOfMemoryError: Java heap space
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21088">[ date ]</a>
              <a href="thread.html#21088">[ thread ]</a>
              <a href="subject.html#21088">[ subject ]</a>
              <a href="author.html#21088">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I'm trying to develop a parser for wiki markup and part of that  
requires the recognition of URI tokens according to RFC 3986 (&lt;http:// 
www.ietf.org/rfc/rfc3986.txt&gt;). The internal structure of the URI  
isn't of any interest to me, I just want to get a token for each URI,  
so I'm doing all this in the lexer.

For testing purposes, I'm doing this first in a separate grammar,  
which you can see here:

   &lt;<A HREF="http://pastie.textmate.org/68006">http://pastie.textmate.org/68006</A>&gt;

Basically this is the grammar from the RFC, but converted from the  
ABNF used in that document (the ABNF is itself described in &lt;http:// 
www.ietf.org/rfc/rfc2234.txt&gt;) to use ANTLR's EBNF notation, and then  
with some minor tweaks to eliminate ANTLRWorks warnings about  
ambiguity or analysis problems. As far as I can tell, however, the  
grammar matches the description in the RFC.

When I try to pipe this through ANTLR (v3 final) I get this:

   Exception in thread &quot;main&quot; java.lang.OutOfMemoryError: Java heap  
space

I tried cranking up the heap size, 256 MB, 512 MB, 768 MB and so on...

   java -Xms32m -Xmx2048m org.antlr.Tool RFC3986.g

But to no avail... I got up to almost a gig and a half before swap  
start thrashing itself to death and I had to kill the ANTLR process.  
The funny thing is the grammar check works fine in ANTLRWorks (no  
warnings printed to the console), it has no problems showing me  
syntax diagrams, producing rule dependency graphs, or handling input  
that I pass in via the interpreter.

I tried this with both C and Java as the target language, so the  
problem seems to be language independent. From what I've read on this  
list I guess the cause is something nasty in my grammar that I'll  
need to work around. The trouble is, I don't even know where to begin  
to look. Can anybody provide some pointers?

Cheers,
Wincent

</PRE>


























<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="021081.html">[antlr-interest] All except...
</A></li>
	<LI>Next message: <A HREF="021090.html">[antlr-interest] java.lang.OutOfMemoryError: Java heap space
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21088">[ date ]</a>
              <a href="thread.html#21088">[ thread ]</a>
              <a href="subject.html#21088">[ subject ]</a>
              <a href="author.html#21088">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.antlr.org/mailman/listinfo/antlr-interest">More information about the antlr-interest
mailing list</a><br>
</body></html>
