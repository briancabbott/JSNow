<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [antlr-interest] beginner help - Mac OSX trouble?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:antlr-interest%40antlr.org?Subject=%5Bantlr-interest%5D%20beginner%20help%20-%20Mac%20OSX%20trouble%3F&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="004662.html">
   <LINK REL="Next"  HREF="004665.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[antlr-interest] beginner help - Mac OSX trouble?</H1>
    <B>mzukowski at yci.com</B> 
    <A HREF="mailto:antlr-interest%40antlr.org?Subject=%5Bantlr-interest%5D%20beginner%20help%20-%20Mac%20OSX%20trouble%3F&In-Reply-To="
       TITLE="[antlr-interest] beginner help - Mac OSX trouble?">mzukowski at yci.com
       </A><BR>
    <I>Mon Jul 28 11:46:18 PDT 2003</I>
    <P><UL>
        <LI>Previous message: <A HREF="004662.html">[antlr-interest] beginner help - Mac OSX trouble?
</A></li>
        <LI>Next message: <A HREF="004665.html">[antlr-interest] syntactic predicates??
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4663">[ date ]</a>
              <a href="thread.html#4663">[ thread ]</a>
              <a href="subject.html#4663">[ subject ]</a>
              <a href="author.html#4663">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>You have to initialize the AST factory, something like this:

 ANTLR_USE_NAMESPACE(antlr)ASTFactory my_factory;
  initializeASTFactory(my_factory);
  setASTFactory(&amp;my_factory);

Monty

-----Original Message-----
From: kurtschwehr [mailto:<A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">kurtschwehr at yahoo.com</A>] 
Sent: Monday, July 28, 2003 11:44 AM
To: <A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">antlr-interest at yahoogroups.com</A>
Subject: [antlr-interest] beginner help - Mac OSX trouble?


Hey All,

Could someone please tell me what I'm doing wrong in this C++ simple parser?
Is it 
something I did or trouble with Mac OSX 10.2.6.  I'm also using gcc 3.1.

Thanks!
-kurt


from gdb:

(1+1)

Program received signal EXC_BAD_ACCESS, Could not access memory.
antlr::ASTFactory::create(antlr::RefCount&lt;antlr::Token&gt;) (this=0x0, tok={ref
= 0x2e6960}) at /usr/include/gcc/darwin/3.1/g++-v3/bits/stl_iterator.h:584

(gdb) bt
#0  antlr::ASTFactory::create(antlr::RefCount&lt;antlr::Token&gt;)
(this=0x0, tok={ref = 0x2e6960}) at
/usr/include/gcc/darwin/3.1/g++-v3/bits/stl_iterator.h:584
#1  0x00004770 in CalcParser::expr() (this=0xbffff9a0) at CalcParser.cpp:40
#2  0x00005128 in main (argc=1, argv=0xbffffab4) at main.C:16 #3  0x00002940
in _start (argc=1, argv=0xbffffab4, envp=0xbffffabc) at
/SourceCache/Csu/Csu-45/crt.c:267 #4  0x000027c0 in start ()

from CalcParser::expr():
                tmp1_AST = astFactory-&gt;create(LT(1));


And here is the code:

main.C:


int main(int argc, char **argv)
{
  try {
    CalcLexer lexer(cin);
    CalcParser parser(lexer);
    parser.expr();
    RefAST t = parser.getAST();
    cout &lt;&lt; t-&gt;toStringList() &lt;&lt; endl;
  } catch(exception&amp; e) {
       cerr &lt;&lt; &quot;exception: &quot; &lt;&lt; e.what() &lt;&lt; endl;
  }
}


calc.g:

options
{
  language=&quot;Cpp&quot;;
}
class CalcLexer extends Lexer;
public
INTEGER: (DIGIT)+;
LPAREN: '(';
RPAREN: ')';
PLUS: '+';
protected
DIGIT: '0'..'9';

class CalcParser extends Parser;
options
{
  buildAST=true;
}
expr: LPAREN INTEGER (PLUS INTEGER)* RPAREN;


 

Your use of Yahoo! Groups is subject to <A HREF="http://docs.yahoo.com/info/terms/">http://docs.yahoo.com/info/terms/</A> 


 

Your use of Yahoo! Groups is subject to <A HREF="http://docs.yahoo.com/info/terms/">http://docs.yahoo.com/info/terms/</A> 


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="004662.html">[antlr-interest] beginner help - Mac OSX trouble?
</A></li>
	<LI>Next message: <A HREF="004665.html">[antlr-interest] syntactic predicates??
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4663">[ date ]</a>
              <a href="thread.html#4663">[ thread ]</a>
              <a href="subject.html#4663">[ subject ]</a>
              <a href="author.html#4663">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.antlr.org/mailman/listinfo/antlr-interest">More information about the antlr-interest
mailing list</a><br>
</body></html>
