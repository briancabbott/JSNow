<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [antlr-interest] 1st look at Java classfile parser
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:antlr-interest%40antlr.org?Subject=%5Bantlr-interest%5D%201st%20look%20at%20Java%20classfile%20parser&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000522.html">
   <LINK REL="Next"  HREF="000513.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[antlr-interest] 1st look at Java classfile parser</H1>
    <B>Andreas Rueckert</B> 
    <A HREF="mailto:antlr-interest%40antlr.org?Subject=%5Bantlr-interest%5D%201st%20look%20at%20Java%20classfile%20parser&In-Reply-To="
       TITLE="[antlr-interest] 1st look at Java classfile parser">a_rueckert at gmx.net
       </A><BR>
    <I>Tue Jan 22 06:26:21 PST 2002</I>
    <P><UL>
        <LI>Previous message: <A HREF="000522.html">[antlr-interest] Re: Problems parsing real numbers
</A></li>
        <LI>Next message: <A HREF="000513.html">[antlr-interest] ANTLR Rights and Open Source issues
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#512">[ date ]</a>
              <a href="thread.html#512">[ thread ]</a>
              <a href="subject.html#512">[ subject ]</a>
              <a href="author.html#512">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi!

Sorry, but it seems the following text was missing in my last mail...?

Terence liked the idea of posting an early version of the classfile parser here,
because some of you might be interested in taking a look and commenting.

There are a couple of issues with this version:

- I started with an AST, that was very close to the Classfile specs. Was very
fast, but not very easy to understand for those, who are only familiar to the
Java (tree) parser. I'm trying to generate an AST, that is closer to a tree,
representing a Java source file. This transition is not yet completed, that's
why there's nothing like a classblock in the type definition.

- The AST generation in general is not very elegant at some points (i.e.
compared to the Java grammar). I want to work on this as my skills are getting
better.

- There are still lots of comments missing, that explain what's going on inside
the Classfile parser. But even with the comments, you'll need some knowledge of
the classfile specs to understand most of the actions. The idea of them is, to
leave the constant pool completely out of the AST, and to transform the info in
it to a structure, that is close(r) to a Java sourcefile.

- At this point, I complety ignore bytecode and just parse it as a byte array.
AFAIK, that's why I cannot parse some features, like var initializers. That's
not a big problem to _me_, since I'm mainly interested in generating a nice
classdiagram for some libs. I'm not sure, if there's a good workaround, since
adding a recompiler would bloat the grammar to a degree, that would make it
hard to maintain and maybe too slow to actually use it. Performance was an
issue to me, since some Argo users are spoiled and want to import megabyte
sized jars into Argo. That's the reason, why I couldn't use a Antlr-generated
lexer. It simply added too much overhead and slowed down the RE process.

- I cannot really tell you, if the attached sourcecode will work for you. That
is, because the version I use here, is a Argo module. It means, that it's
cluttered with code to generate all kinds of Metamodel objects and add them to
the current Argo model. I tried to remove all this code (and package info) from
the Antlr files, before I zipped them. If you think, that some essential part
is missing, it's very likely that I was too ambitious with with deleting
process :-). Just ask then.

Feel free to flame,

Andreas





 

Your use of Yahoo! Groups is subject to <A HREF="http://docs.yahoo.com/info/terms/">http://docs.yahoo.com/info/terms/</A> 

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000522.html">[antlr-interest] Re: Problems parsing real numbers
</A></li>
	<LI>Next message: <A HREF="000513.html">[antlr-interest] ANTLR Rights and Open Source issues
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#512">[ date ]</a>
              <a href="thread.html#512">[ thread ]</a>
              <a href="subject.html#512">[ subject ]</a>
              <a href="author.html#512">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.antlr.org/mailman/listinfo/antlr-interest">More information about the antlr-interest
mailing list</a><br>
</body></html>
