<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [antlr-interest] Error in generated C code (struct referenced without being initialized)
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20Error%20in%20generated%20C%20code%20%28struct%20referenced%0A%20without%20being%20initialized%29&In-Reply-To=%3C4988A6DB.4010605%40temporal-wave.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="032700.html">
   <LINK REL="Next"  HREF="032702.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[antlr-interest] Error in generated C code (struct referenced without being initialized)</H1>
    <B>Jim Idle</B> 
    <A HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20Error%20in%20generated%20C%20code%20%28struct%20referenced%0A%20without%20being%20initialized%29&In-Reply-To=%3C4988A6DB.4010605%40temporal-wave.com%3E"
       TITLE="[antlr-interest] Error in generated C code (struct referenced without being initialized)">jimi at temporal-wave.com
       </A><BR>
    <I>Tue Feb  3 12:19:39 PST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="032700.html">[antlr-interest] Evaluate the AST tree Twice
</A></li>
        <LI>Next message: <A HREF="032702.html">[antlr-interest] ActionScript target - new to parsers
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#32701">[ date ]</a>
              <a href="thread.html#32701">[ thread ]</a>
              <a href="subject.html#32701">[ subject ]</a>
              <a href="author.html#32701">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Gavin Lambert wrote:
&gt;<i> At 07:46 4/02/2009, Jim Idle wrote:
</I>&gt;<i> &gt;I can no longer remember why it does not do this. I will look
</I>&gt;<i> &gt;in to it, but I think that the issue is you can return anything
</I>&gt;<i> &gt;you like in the structure and so if it is not something that
</I>&gt;<i> &gt;can be initialized to NULL, it breaks the code generation.
</I>&gt;<i>
</I>&gt;<i> You could memset(foo, 0, sizeof(*foo)) it... :)  (Arguably this should 
</I>&gt;<i> be done for scopes as well, especially if you're reusing previously 
</I>&gt;<i> populated structures.)
</I>&gt;<i>
</I>The overhead of memset is too much. That is why I changed from callocing 
it to having the user initialize the data. Valgrind makes it painfully 
obvious that these sorts of things really drag down the performance and 
it is better to explicitly initialize and free just those things that 
need to be. I also think that for maintainability it is better to 
program with explicit intent.

Jim

</PRE>




<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="032700.html">[antlr-interest] Evaluate the AST tree Twice
</A></li>
	<LI>Next message: <A HREF="032702.html">[antlr-interest] ActionScript target - new to parsers
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#32701">[ date ]</a>
              <a href="thread.html#32701">[ thread ]</a>
              <a href="subject.html#32701">[ subject ]</a>
              <a href="author.html#32701">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.antlr.org/mailman/listinfo/antlr-interest">More information about the antlr-interest
mailing list</a><br>
</body></html>
