<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [antlr-interest] C target: How to handle lexer exceptions??
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20C%20target%3A%20How%20to%20handle%20lexer%20exceptions%3F%3F&In-Reply-To=%3C4a80712f0904070120w37c72d86we29d89e9e78eacd2%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="033940.html">
   <LINK REL="Next"  HREF="033937.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[antlr-interest] C target: How to handle lexer exceptions??</H1>
    <B>register reg.ini</B> 
    <A HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20C%20target%3A%20How%20to%20handle%20lexer%20exceptions%3F%3F&In-Reply-To=%3C4a80712f0904070120w37c72d86we29d89e9e78eacd2%40mail.gmail.com%3E"
       TITLE="[antlr-interest] C target: How to handle lexer exceptions??">register72 at gmail.com
       </A><BR>
    <I>Tue Apr  7 01:20:40 PDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="033940.html">[antlr-interest] Why doesn't this work?
</A></li>
        <LI>Next message: <A HREF="033937.html">[antlr-interest] C target: How to handle lexer exceptions??
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#33935">[ date ]</a>
              <a href="thread.html#33935">[ thread ]</a>
              <a href="subject.html#33935">[ subject ]</a>
              <a href="author.html#33935">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I have done a little more research and found that the lexer main loop is
found in the nextTokenStr function.
This function handles lexer exceptions and tries to recover from them. This
means that after a successful recovery the

lexer-&gt;rec-&gt;state-&gt;error and  lexer-&gt;rec-&gt;state-&gt;failed attributes are set
to FALSE and that the final state of the lexer does not necessarily contain
information about previous occurred errors. It seems to me that I have to
overload lexer's reportError or displayRecognitionError functions in a way
suitable for my needs. Does the C runtime provide a facility to embed this
overload directly in the grammar (like java's @member or *catch* sections )
or should I add the overload in the generated code?

Thanks,

Luca


P.S: Tim, sorry for posting my previous mail only to you and not on the
mailing list. I didn't mean to be rude: I just hit the wrong button.


On Mon, Apr 6, 2009 at 5:37 PM, register reg.ini &lt;<A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">register72 at gmail.com</A>&gt;wrote:

&gt;<i> Sorry to ask more questions but I am hitting a stumbling block.
</I>&gt;<i>
</I>&gt;<i> I tryed the following since it is the only thing that makes sense to me
</I>&gt;<i> after reading the source code:
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> tstream-&gt;tstream-&gt;_LT(tstream-&gt;tstream, 1);
</I>&gt;<i>
</I>&gt;<i> pANTLR3_LEXER lexer;
</I>&gt;<i>
</I>&gt;<i> lexer = (pANTLR3_LEXER)(tstream-&gt;tstream-&gt;tokenSource-&gt;super);
</I>&gt;<i>
</I>&gt;<i> size_t nerr=lexer-&gt;rec-&gt;getNumberOfSyntaxErrors(lexer-&gt;rec);
</I>&gt;<i>
</I>&gt;<i> if(nerr!=0)
</I>&gt;<i>
</I>&gt;<i> printf(
</I>&gt;<i> &quot;Syntax errors \n&quot;);
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> but this does not work. I really don't understand the relation between the
</I>&gt;<i> recognizers, lexers and parsers....
</I>&gt;<i>
</I>&gt;<i> Also I really don't understand why one should use a catch all lexer rule
</I>&gt;<i> like ANY: how could I then detect the offending lexer rule? I don't see any
</I>&gt;<i> example of this pattern anywhere ( I own Terence's book) maybe a few
</I>&gt;<i> examples could help in clarifying matters.
</I>&gt;<i>
</I>&gt;<i> Thanks for your help, I really appreciate it very much.
</I>&gt;<i>
</I>&gt;<i> Regards,
</I>&gt;<i>
</I>&gt;<i> Luca
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://www.antlr.org/pipermail/antlr-interest/attachments/20090407/eedb613c/attachment.html">http://www.antlr.org/pipermail/antlr-interest/attachments/20090407/eedb613c/attachment.html</A> 
</PRE>













<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="033940.html">[antlr-interest] Why doesn't this work?
</A></li>
	<LI>Next message: <A HREF="033937.html">[antlr-interest] C target: How to handle lexer exceptions??
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#33935">[ date ]</a>
              <a href="thread.html#33935">[ thread ]</a>
              <a href="subject.html#33935">[ subject ]</a>
              <a href="author.html#33935">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.antlr.org/mailman/listinfo/antlr-interest">More information about the antlr-interest
mailing list</a><br>
</body></html>
