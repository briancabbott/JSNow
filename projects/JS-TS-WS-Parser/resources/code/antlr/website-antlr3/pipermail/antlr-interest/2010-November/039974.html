<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [antlr-interest] copy a tree in c
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20copy%20a%20tree%20in%20c&In-Reply-To=%3Ce4f0ecedde8fdb439f11febbfe285400%40temporal-wave.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="039972.html">
   <LINK REL="Next"  HREF="039975.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[antlr-interest] copy a tree in c</H1>
    <B>Jim Idle</B> 
    <A HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20copy%20a%20tree%20in%20c&In-Reply-To=%3Ce4f0ecedde8fdb439f11febbfe285400%40temporal-wave.com%3E"
       TITLE="[antlr-interest] copy a tree in c">jimi at temporal-wave.com
       </A><BR>
    <I>Sat Nov  6 05:30:40 PDT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="039972.html">[antlr-interest] ANSI C tree grammar for Antlr3
</A></li>
        <LI>Next message: <A HREF="039975.html">[antlr-interest] Grammar issue
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#39974">[ date ]</a>
              <a href="thread.html#39974">[ thread ]</a>
              <a href="subject.html#39974">[ subject ]</a>
              <a href="author.html#39974">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>If you just want to evaluate it, then don't duplicate it, just keep the pointer - it won't be deallocated until you free the main tree. Also, you should only use the toString stuff if you don't really care about performance and memory usage. Without knowing what you tried to code, I can't really help, but it is unlikely that you need to duplicate the tree. Usually such questions mean that you are trying to achieve something that should be achieved differently, so why don't you step back and say what you are trying to do rather than ask how to duplicate the tree?

Jim



-----Original Message-----
From: <A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">antlr-interest-bounces at antlr.org</A> [mailto:<A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">antlr-interest-bounces at antlr.org</A>] On Behalf Of Stefan Lind
Sent: Friday, October 22, 2010 1:26 AM
To: <A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">antlr-interest at antlr.org</A>
Subject: [antlr-interest] copy a tree in c

Hi,
I am trying to copy a part of a tree with the goal to evaluate this part to a later point. I wasn't able to find any tutorials or posts which describes a solution for my problem so i hope you can help me.
The most promising function i found is the dupTree() function from the pANTLR_BASE_TREE which i used as follows:
pANTLR3_BASE_TREE pBaseTree = (pANTLR3_BASE_TREE) FUNCTION_DEF10-&gt;dupTree(FUNCTION_DEF10);
Then i tryed to reuse the tree pBaseTree to a later point but it failed already when i used the toStringTree() function on it.
std::string treeString = (const char*)
pBaseTree-&gt;toStringTree(pBaseTree)-&gt;chars;
The output of the string treeString is nil. Between the dupTree() and toStringTree(), antlr continues to evaluate the tree.
When i call the toStringTree() function right after the dupTree() call, it delivers the correct ouput.

Does anyone see my mistake, or has any suggestion where i can find help?

Regards,
Stefan

List: <A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">http://www.antlr.org/mailman/listinfo/antlr-interest</A>
Unsubscribe: <A HREF="http://www.antlr.org/mailman/options/antlr-interest/your-email-address">http://www.antlr.org/mailman/options/antlr-interest/your-email-address</A>



</PRE>




<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="039972.html">[antlr-interest] ANSI C tree grammar for Antlr3
</A></li>
	<LI>Next message: <A HREF="039975.html">[antlr-interest] Grammar issue
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#39974">[ date ]</a>
              <a href="thread.html#39974">[ thread ]</a>
              <a href="subject.html#39974">[ subject ]</a>
              <a href="author.html#39974">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.antlr.org/mailman/listinfo/antlr-interest">More information about the antlr-interest
mailing list</a><br>
</body></html>
