<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [antlr-interest] parsing a very large file
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20parsing%20a%20very%20large%20file&In-Reply-To=%3C20090326210636.29315341841B%40www.antlr.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="033715.html">
   <LINK REL="Next"  HREF="033725.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[antlr-interest] parsing a very large file</H1>
    <B>Gavin Lambert</B> 
    <A HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20parsing%20a%20very%20large%20file&In-Reply-To=%3C20090326210636.29315341841B%40www.antlr.org%3E"
       TITLE="[antlr-interest] parsing a very large file">antlr at mirality.co.nz
       </A><BR>
    <I>Thu Mar 26 14:06:11 PDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="033715.html">[antlr-interest] parsing a very large file
</A></li>
        <LI>Next message: <A HREF="033725.html">[antlr-interest] parsing a very large file
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#33724">[ date ]</a>
              <a href="thread.html#33724">[ thread ]</a>
              <a href="subject.html#33724">[ subject ]</a>
              <a href="author.html#33724">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>At 05:10 27/03/2009, Vladimir Konrad wrote:
 &gt;
 &gt;I have read in the ANTLR book (from pragmatic book-store) that
 &gt;ANTLR always loads entire file/stream into memory. Is this
 &gt;still the case?

Yes, by default.

 &gt;I would need to load a data file which is quite large (100MB+) 
but
 &gt;parsing it with ANTLR uses over 1GB of RAM. Is there any way to
 &gt;use ANTLR to load such a data file without so big memory 
consumption?
 &gt;If not what other (java) options are there?

Have a look in the Wiki.  I believe that there's some info there 
regarding overriding the token stream to not preload all the 
tokens; that will keep the initial memory budget down.

However I don't think there's any way to avoid having it load 
everything in simultaneously at some point -- the tokens don't 
actually copy the data, they just hold references to its position 
in the input stream (and of course even if they did copy it that'd 
still end up taking up just as much memory).  You certainly 
wouldn't be able to produce an AST without having the entire input 
file in memory and tokenised.

Is there some way you can split up the input externally from ANTLR 
first?  I've used it before to parse some large data files 
(~80MB), but they were archive files that contained chunks of 
about ~500KB each that could be parsed independently of each 
other, so it was fairly straightforward.

</PRE>





<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="033715.html">[antlr-interest] parsing a very large file
</A></li>
	<LI>Next message: <A HREF="033725.html">[antlr-interest] parsing a very large file
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#33724">[ date ]</a>
              <a href="thread.html#33724">[ thread ]</a>
              <a href="subject.html#33724">[ subject ]</a>
              <a href="author.html#33724">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.antlr.org/mailman/listinfo/antlr-interest">More information about the antlr-interest
mailing list</a><br>
</body></html>
