<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [antlr-interest] Problems with rule variable initilization
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20Problems%20with%20rule%20variable%20initilization&In-Reply-To=%3C4115de880805170643h246b3b49ta03c3e2b4090d7a9%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="028246.html">
   <LINK REL="Next"  HREF="028244.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[antlr-interest] Problems with rule variable initilization</H1>
    <B>Moschakis, Ioannis</B> 
    <A HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20Problems%20with%20rule%20variable%20initilization&In-Reply-To=%3C4115de880805170643h246b3b49ta03c3e2b4090d7a9%40mail.gmail.com%3E"
       TITLE="[antlr-interest] Problems with rule variable initilization">imoschak at gmail.com
       </A><BR>
    <I>Sat May 17 06:43:17 PDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="028246.html">[antlr-interest] C# Target Poll
</A></li>
        <LI>Next message: <A HREF="028244.html">[antlr-interest] C# Target Poll
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#28243">[ date ]</a>
              <a href="thread.html#28243">[ thread ]</a>
              <a href="subject.html#28243">[ subject ]</a>
              <a href="author.html#28243">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello all,
I am trying to create a lexer/parser for sql in C with ANTLR and C target.
The problem that arises is that the code generated by ANTLR always tries to
initilize rule variables to NULL which is not acceptable at least for the
GCC compiler for variables of type ANTLR3_STRING_struct.
For example:
attr_assign_value returns [ ANTLR3_STRING_struct attName,
ANTLR3_STRING_struct val ]
    :   attr_name EQT value {
             $attName.appendS(&amp;$attName,&amp;$attr_name.attrName);
             $val.appendS(&amp;$val,&amp;$value.value);
         }
    ;

the previous rule generates the following code (part of it shown here) :
...
ANTLR3_STRING_struct attr_name1;
    #undef    RETURN_TYPE_attr_name1
    #define    RETURN_TYPE_attr_name1 ANTLR3_STRING_struct

    ANTLR3_STRING_struct value2;
    #undef    RETURN_TYPE_value2
    #define    RETURN_TYPE_value2 ANTLR3_STRING_struct

    /* Initialize rule variables
     */


    attr_name1 =  NULL;
    value2 = NULL;
    retval.start = LT(1);
...
The compiler says that attr_name1 = NULL and value2=NULL are incompatible
types which is ofcourse correct. Is there a way to tell ANTLR not to
generate these lines or generate custom code instead of this? Thanks in
advance for any help. Sorry for my bad English.

Regards,
imoschak
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://www.antlr.org/pipermail/antlr-interest/attachments/20080517/bdbad3da/attachment.html">http://www.antlr.org/pipermail/antlr-interest/attachments/20080517/bdbad3da/attachment.html</A> 
</PRE>

























<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="028246.html">[antlr-interest] C# Target Poll
</A></li>
	<LI>Next message: <A HREF="028244.html">[antlr-interest] C# Target Poll
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#28243">[ date ]</a>
              <a href="thread.html#28243">[ thread ]</a>
              <a href="subject.html#28243">[ subject ]</a>
              <a href="author.html#28243">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.antlr.org/mailman/listinfo/antlr-interest">More information about the antlr-interest
mailing list</a><br>
</body></html>
