From ilia at obnovlenie.ru  Fri Sep  1 00:43:50 2006
From: ilia at obnovlenie.ru (Ilia Kantor)
Date: Fri Sep  1 00:44:46 2006
Subject: [antlr-interest] newline in Antlr3
In-Reply-To: <9E666557-A8AB-4533-8C31-33AD4B876FEE@cs.usfca.edu>
References: <200609010058.12477.ilia@obnovlenie.ru>
	<200609010208.18781.ilia@obnovlenie.ru>
	<9E666557-A8AB-4533-8C31-33AD4B876FEE@cs.usfca.edu>
Message-ID: <200609011143.51022.ilia@obnovlenie.ru>


Ok, I removed brackedLevel in favour of stack, but it still doesn't work.

----------- output -----
Line 1 pos 0 type 7: grammar
Line 1 pos 7 type 10:  
Line 1 pos 8 type 7: a
Line 1 pos 9 type 8: ;
Line 1 pos 10 type 10: 

Line 2 pos 0 type 10: 

Line 3 pos 0 type 7: output
Line 3 pos 6 type 10:  
Line 3 pos 7 type 7: ruleO
Line 3 pos 12 type 10:  
[mTokens, mBLOCK, mBLOCK, mBLOCK]: line 8:0 mismatched char: '?' on line 8; 
expecting char '}'

--------------------- target ----------
grammar a;

output ruleO { something  
 { bracketed }
}

rule ruleR { blabla }

---------------- grammar (3.0b4) -----------

lexer grammar MainLexer;

BLOCK : '{' (BLOCK | ~'{')* '}' ;

ID : ( LETTER | '_' ) (NAMECHAR)* ;

DC: ';';

fragment NAMECHAR
    : LETTER | DIGIT | '.' | '-' | '_' | ':'
    ;

fragment DIGIT
    :    '0'..'9'
    ;

fragment LETTER
    : 'a'..'z'
    | 'A'..'Z'
    ;

WS  :  
       (' '|'\r'|'\t'|'\u000C'|'\n' ) {channel=99;}
    ;

> On Aug 31, 2006, at 3:08 PM, Ilia Kantor wrote:
> > Hmmm indeed.. I just want ANY rule to read all nested brackets, like
> > { ..{..}. }
> >
> > How you'd recommend to implement it ?
>
> HI.
>
> "Use the stack, Luke"
>
> BLOCK : '{' (BLOCK | ~'{')* '}' ;
>
> Ter
From lgcraymer at yahoo.com  Fri Sep  1 00:50:56 2006
From: lgcraymer at yahoo.com (Loring Craymer)
Date: Fri Sep  1 00:51:00 2006
Subject: [antlr-interest] newline in Antlr3
In-Reply-To: <200609011143.51022.ilia@obnovlenie.ru>
Message-ID: <20060901075056.79595.qmail@web55903.mail.re3.yahoo.com>

You missed Ter's correction--the ~ phrase should be
~ ('{' | '}' )*
to avoid eating the terminal '}' characters.

--Loring

Ilia Kantor <ilia@obnovlenie.ru> wrote: 
Ok, I removed brackedLevel in favour of stack, but it still doesn't work.

----------- output -----
Line 1 pos 0 type 7: grammar
Line 1 pos 7 type 10:  
Line 1 pos 8 type 7: a
Line 1 pos 9 type 8: ;
Line 1 pos 10 type 10: 

Line 2 pos 0 type 10: 

Line 3 pos 0 type 7: output
Line 3 pos 6 type 10:  
Line 3 pos 7 type 7: ruleO
Line 3 pos 12 type 10:  
[mTokens, mBLOCK, mBLOCK, mBLOCK]: line 8:0 mismatched char: '?' on line 8; 
expecting char '}'

--------------------- target ----------
grammar a;

output ruleO { something  
 { bracketed }
}

rule ruleR { blabla }

---------------- grammar (3.0b4) -----------

lexer grammar MainLexer;

BLOCK : '{' (BLOCK | ~'{')* '}' ;

ID : ( LETTER | '_' ) (NAMECHAR)* ;

DC: ';';

fragment NAMECHAR
    : LETTER | DIGIT | '.' | '-' | '_' | ':'
    ;

fragment DIGIT
    :    '0'..'9'
    ;

fragment LETTER
    : 'a'..'z'
    | 'A'..'Z'
    ;

WS  :  
       (' '|'\r'|'\t'|'\u000C'|'\n' ) {channel=99;}
    ;

> On Aug 31, 2006, at 3:08 PM, Ilia Kantor wrote:
> > Hmmm indeed.. I just want ANY rule to read all nested brackets, like
> > { ..{..}. }
> >
> > How you'd recommend to implement it ?
>
> HI.
>
> "Use the stack, Luke"
>
> BLOCK : '{' (BLOCK | ~'{')* '}' ;
>
> Ter


 		
---------------------------------
Do you Yahoo!?
 Get on board. You're invited to try the new Yahoo! Mail.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060901/c73100b1/attachment.html
From dave at badgers-in-foil.co.uk  Fri Sep  1 00:51:11 2006
From: dave at badgers-in-foil.co.uk (David Holroyd)
Date: Fri Sep  1 00:51:15 2006
Subject: [antlr-interest] Why isn't Token an interface?
In-Reply-To: <5AEBEAD4-415D-4DC1-9C4F-AA8466C666DE@cs.usfca.edu>
References: <20060831155759.GA1583@badgers-in-foil.co.uk>
	<5AEBEAD4-415D-4DC1-9C4F-AA8466C666DE@cs.usfca.edu>
Message-ID: <20060901075111.GA14729@badgers-in-foil.co.uk>

On Thu, Aug 31, 2006 at 09:29:20AM -0700, Terence Parr wrote:
> 
> On Aug 31, 2006, at 8:57 AM, David Holroyd wrote:
> 
> >...it's not that this is a problem for me at the moment, but the Token
> >class seems to be begging to become an interface.
> >
> >Just out of interest, why does this class have the slightly odd
> >structure that it does?
> 
> Can you be more specific?

Well, all the methods are abstract apart from setText(), which is
implemented as a no-op.  That's why I said 'slightly odd', because I
can't see a pattern there.  Probably I'm just being dim :)

Apart from that non-abstract method (and all the existing code that
'extends Token' rather than 'implements Token), I can't see any reason
for Token being a class rather than an interface.

I can imagine Token becoming an interface being useful for people
wanting to do hackery like retrofitting existing types of object also be
ANTLR tokens, and so on.  Possibly it's a bit late in the release cycle
for such a change though, so maybe something to consider for ANTLR 4? ;)

ta,
dave

-- 
http://david.holroyd.me.uk/
From ilia at obnovlenie.ru  Fri Sep  1 00:56:34 2006
From: ilia at obnovlenie.ru (Ilia Kantor)
Date: Fri Sep  1 00:57:29 2006
Subject: [antlr-interest] newline in Antlr3
In-Reply-To: <20060901075056.79595.qmail@web55903.mail.re3.yahoo.com>
References: <20060901075056.79595.qmail@web55903.mail.re3.yahoo.com>
Message-ID: <200609011156.34981.ilia@obnovlenie.ru>


Ah. Works fine now =).

> You missed Ter's correction--the ~ phrase should be
> ~ ('{' | '}' )*
> to avoid eating the terminal '}' characters.
>
> --Loring
>
> Ilia Kantor <ilia@obnovlenie.ru> wrote:
> Ok, I removed brackedLevel in favour of stack, but it still doesn't work.
>
> ----------- output -----
> Line 1 pos 0 type 7: grammar
> Line 1 pos 7 type 10:
> Line 1 pos 8 type 7: a
> Line 1 pos 9 type 8: ;
> Line 1 pos 10 type 10:
>
> Line 2 pos 0 type 10:
>
> Line 3 pos 0 type 7: output
> Line 3 pos 6 type 10:
> Line 3 pos 7 type 7: ruleO
> Line 3 pos 12 type 10:
> [mTokens, mBLOCK, mBLOCK, mBLOCK]: line 8:0 mismatched char: '?' on line 8;
> expecting char '}'
>
> --------------------- target ----------
> grammar a;
>
> output ruleO { something
>  { bracketed }
> }
>
> rule ruleR { blabla }
>
> ---------------- grammar (3.0b4) -----------
>
> lexer grammar MainLexer;
>
> BLOCK : '{' (BLOCK | ~'{')* '}' ;
>
> ID : ( LETTER | '_' ) (NAMECHAR)* ;
>
> DC: ';';
>
> fragment NAMECHAR
>
>     : LETTER | DIGIT | '.' | '-' | '_' | ':'
>
>     ;
>
> fragment DIGIT
>
>     :    '0'..'9'
>
>     ;
>
> fragment LETTER
>
>     : 'a'..'z'
>     :
>     | 'A'..'Z'
>
>     ;
>
> WS  :
>        (' '|'\r'|'\t'|'\u000C'|'\n' ) {channel=99;}
>     ;
>
> > On Aug 31, 2006, at 3:08 PM, Ilia Kantor wrote:
> > > Hmmm indeed.. I just want ANY rule to read all nested brackets, like
> > > { ..{..}. }
> > >
> > > How you'd recommend to implement it ?
> >
> > HI.
> >
> > "Use the stack, Luke"
> >
> > BLOCK : '{' (BLOCK | ~'{')* '}' ;
> >
> > Ter
>
> ---------------------------------
> Do you Yahoo!?
>  Get on board. You're invited to try the new Yahoo! Mail.
From ilia at obnovlenie.ru  Fri Sep  1 04:24:11 2006
From: ilia at obnovlenie.ru (Ilia Kantor)
Date: Fri Sep  1 04:25:11 2006
Subject: [antlr-interest] My first antlr v3 parser
Message-ID: <200609011524.11747.ilia@obnovlenie.ru>


Trying to attach a parser to MainLexer using XML example.
However, antlr.Tool doesn't compile this;

------- grammar ----------------

parser grammar MainParser;

options {
    tokenVocab=MainLexer;
}

grammar : grammarDefinition (output | rule | formula)*


grammarDefinition: GRAMMAR ID DC;

output: OUTPUT ID BLOCK;
rule: RULE ID BLOCK;
formula: FORMULA ID BLOCK;

------------- output -----------------

ANTLR Parser Generator   Early Access Version 3.0b4 (??, 2006)  1989-2006
7:1: syntax error: antlr: parser.g:7:1: unexpected token: grammar
0:0: syntax error: assign.types: <AST>:0:0: unexpected end of subtree
0:0: syntax error: define: <AST>:0:0: unexpected end of subtree
0:0: syntax error: buildnfa: <AST>:0:0: unexpected end of subtree
0:0: syntax error: codegen: <AST>:0:0: unexpected end of subtree

---- BUG ? 
files null.java, null.tokens appear in working folder.










From kroepke at classdump.org  Fri Sep  1 04:30:07 2006
From: kroepke at classdump.org (Kay Roepke)
Date: Fri Sep  1 04:30:13 2006
Subject: [antlr-interest] My first antlr v3 parser
In-Reply-To: <200609011524.11747.ilia@obnovlenie.ru>
References: <200609011524.11747.ilia@obnovlenie.ru>
Message-ID: <7FC8B01D-1136-44C6-B331-78DD1FD89B6F@classdump.org>


On 1. Sep 2006, at 13:24 Uhr, Ilia Kantor wrote:

> Trying to attach a parser to MainLexer using XML example.
> However, antlr.Tool doesn't compile this;

`grammar' is a reserved word, you can't use that for a rule name,  
that's what ANTLR is trying to tell you with the
first error message, and also why the grammar file name is null.

cheers,
-k

-- 
Kay R?pke <kroepke@classdump.org>
classdump Software
Key fingerprint = A849 0F2C C322 4022 379E  8661 7E1B FE0D 4CD2 A6D0



From parrt at cs.usfca.edu  Fri Sep  1 10:53:33 2006
From: parrt at cs.usfca.edu (Terence Parr)
Date: Fri Sep  1 10:53:40 2006
Subject: [antlr-interest] antlr project web site will be flaky
Message-ID: <6ADC0F59-52C4-47B4-B733-56454B4F1489@cs.usfca.edu>

Hi, moving antlr.org etc... to much faster box hopefully in the next  
few hours...expect issues over the weekend.
Ter
From FranklinChen at cmu.edu  Fri Sep  1 12:32:44 2006
From: FranklinChen at cmu.edu (FranklinChen at cmu.edu)
Date: Fri, 1 Sep 2006 15:32:44 -0400
Subject: [antlr-interest] Lexer modes
Message-ID: <17656.35548.388298.347917@swan.psy.cmu.edu>

Is there an estimate on when an ANTLR with lexer modes will be
available?  I have been holding off on implementing part of a program
until this feature exists.

-- 
Franklin

From parrt at cs.usfca.edu  Fri Sep  1 13:43:00 2006
From: parrt at cs.usfca.edu (Terence Parr)
Date: Fri, 1 Sep 2006 13:43:00 -0700
Subject: [antlr-interest] all clear signal!
Message-ID: <7F32A6B2-E1A3-422E-926F-88427BB000F7@cs.usfca.edu>

Ok, looks like new antlr.org box is up, running, and DNS is  
propagating.  If your DNS cache pays attention to TTL then you should  
have the new values.

perforce server has been upgraded to latest version and is up at  
antlr.org:666.  visual clients should all work with it now.  use  
antlr2.cs.usfca.edu as IP if antlr.org has not propagated.

Ter

From ilia at obnovlenie.ru  Fri Sep  1 14:31:42 2006
From: ilia at obnovlenie.ru (Ilia Kantor)
Date: Sat, 2 Sep 2006 01:31:42 +0400
Subject: [antlr-interest] create interpreter with antlr
Message-ID: <200609020131.42373.ilia@obnovlenie.ru>


What is a recommended way to create interpreter using antlr ?

Should I make AST and then walk it in code ?

Or maybe embed actions in parser with [return statements] ?

From ilia at obnovlenie.ru  Fri Sep  1 14:32:33 2006
From: ilia at obnovlenie.ru (Ilia Kantor)
Date: Sat, 2 Sep 2006 01:32:33 +0400
Subject: [antlr-interest] Lexer modes
In-Reply-To: <17656.35548.388298.347917@swan.psy.cmu.edu>
References: <17656.35548.388298.347917@swan.psy.cmu.edu>
Message-ID: <200609020132.33654.ilia@obnovlenie.ru>


> Is there an estimate on when an ANTLR with lexer modes will be
> available?  

I remember selectors and {conditions}=>, that serve this purpose...

From phil.goodwin at gmail.com  Sat Sep  2 00:59:12 2006
From: phil.goodwin at gmail.com (Phil Goodwin)
Date: Sat, 2 Sep 2006 00:59:12 -0700
Subject: [antlr-interest] AST rewrites for recursive rules
Message-ID: <3dbbdf1d0609020059k5412aea2v64b8c74b537bdda9@mail.gmail.com>

I'm building a grammar for a language that is loosely based on the Java
example grammar in v3. I liked the way methodDeclaration was defined
recursively so I wrote a toy parser to see if I could use it to build an
AST. I hunted around in the documentation and examples but I couldn't find
the syntax I needed in order to access the tree returned by a referenced
rule, so I decided to try and see if I could implement it using actions. I
started with a recognizer:

methodDeclaration
    :    TYPE IDENTIFIER ':' methodDeclaratorRest
    ;
methodDeclaratorRest
    :    formalParameters?
    ;
formalParameters
    :    TYPE formalParameterDeclsRest
    ;
formalParameterDeclsRest
    : IDENTIFIER (',' formalParameters)*
    ;
TYPE
    : '<type''0'..'9''>'
    ;
IDENTIFIER
    : '<Identifier''0'..'9''>'
    ;


When I started writing the AST code the first thing I thought was that I'd
need to make the parse iterative instead of recursive, but I'm a stubborn
sort and I liked the recusive algorithm. So I set out to just add the AST
generation code. What I ended up with takes this input:
<type0><Identifier0>:<type1><Identifier1>,<type2><Identifier2>,<type3><Identifier3>
and generates a tree that looks like this:
tree: (METHOD <Identifier0> <type0> (PARAMETERS (<type1> <Identifier1>)
(<type2> <Identifier2>) (<type3> <Identifier3>)))

I've pasted the code below. Here's my question: is there a better way to
access and manipulate the tree generated by a referenced rule? The AST
generation code below mirrors the elegance of the original recognizer but
that is lost amid the brutality done to the returned trees.

methodDeclaration
    :    t=TYPE i=IDENTIFIER ':' r=methodDeclaratorRest
    ->    ^(METHOD $i $t $r)
    ;
methodDeclaratorRest
    :    formalParameters?
    ->    ^(PARAMETERS formalParameters?)
    ;
formalParameters
    :    t=TYPE r=formalParameterDeclsRest
    ->    {((Tree)r.getTree()).getChildCount() > 1}? ^($t
{((BaseTree)r.getTree()).deleteChild(0)}) $r
    ->    ^($t $r)
    ;
formalParameterDeclsRest
    :    i=IDENTIFIER
        (',' f=formalParameters -> $i $f
        |            -> $i
        )
    ;
TYPE
    :    '<type''0'..'9''>'
    ;
IDENTIFIER
    :    '<Identifier''0'..'9''>'
    ;
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060902/f17577c5/attachment.html 

From jbb at acm.org  Sat Sep  2 07:51:45 2006
From: jbb at acm.org (John B. Brodie)
Date: Sat, 02 Sep 2006 10:51:45 -0400
Subject: [antlr-interest] AST rewrites for recursive rules
In-Reply-To: <3dbbdf1d0609020059k5412aea2v64b8c74b537bdda9@mail.gmail.com>
	(message from Phil Goodwin on Sat, 02 Sep 2006 00:59:12 -0700)
References: <3dbbdf1d0609020059k5412aea2v64b8c74b537bdda9@mail.gmail.com>
Message-ID: <E1GJWqX-0007K6-00@gecko>

Greetings!

>....snipped...
>I've pasted the code below. Here's my question: is there a better way to
>access and manipulate the tree generated by a referenced rule? The AST
>generation code below mirrors the elegance of the original recognizer but
>that is lost amid the brutality done to the returned trees.
>....snipped...

How about passing the formal type as a parameter?

formalParameters
    :    t=TYPE formalParameterDeclsRest[$t] -> formalParameterDeclsRest
    ;
formalParameterDeclsRest[ Token t ]
    :    i=IDENTIFIER
        ( ( ',' formalParameters -> ^({$t} $i) formalParameters )
        | ( /*empty*/            -> ^({$t} $i) )
        )
    ;

Hope this helps...
   -jbb

From ilia at obnovlenie.ru  Sat Sep  2 12:09:32 2006
From: ilia at obnovlenie.ru (Ilia Kantor)
Date: Sat, 2 Sep 2006 23:09:32 +0400
Subject: [antlr-interest] Island grammar in AntlrV3
Message-ID: <200609022309.32178.ilia@obnovlenie.ru>


I have island grammar, that becomes known on parsing stage.

How can I parse it with separate lexer/parser, 
  adding result to common tree ?

In my case, such grammar is inside BLOCK token in rule output,
output: OUTPUT ID BLOCK;



From ilia at obnovlenie.ru  Sat Sep  2 15:14:55 2006
From: ilia at obnovlenie.ru (Ilia Kantor)
Date: Sun, 3 Sep 2006 02:14:55 +0400
Subject: [antlr-interest] How to disable recovery in antlr3 ?
Message-ID: <200609030214.55220.ilia@obnovlenie.ru>


I don't want parser to 'recover' from errors. How can I disable recovery and 
just let exception slip out ?




From dave at badgers-in-foil.co.uk  Sat Sep  2 16:01:43 2006
From: dave at badgers-in-foil.co.uk (David Holroyd)
Date: Sat, 2 Sep 2006 23:01:43 +0000
Subject: [antlr-interest] Island grammar in AntlrV3
In-Reply-To: <200609022309.32178.ilia@obnovlenie.ru>
References: <200609022309.32178.ilia@obnovlenie.ru>
Message-ID: <20060902230143.GA10590@badgers-in-foil.co.uk>

On Sat, Sep 02, 2006 at 11:09:32PM +0400, Ilia Kantor wrote:
> I have island grammar, that becomes known on parsing stage.
> 
> How can I parse it with separate lexer/parser, 
>   adding result to common tree ?

I've also been wondering about this, but I don't have an answer yet.

I'm worried that by the time the parser has the chance to try and fiddle
with the lexer, lookahead has consumed the input anyway.  Maybe the
standard infrastructure can let the input character stream 'backtrack'?

My specific use case is regular expression literals, e.g. I'd like to be
able to handle,

  r =   / b; f = r/m;  // regexp literal with 'm' flag
  r = a / b; f = r/m;  // two expr-statements involving division

It seems that the lexer needs context from the grammar in order to tell
what to do on seeing '/'.

I've seen that the ECMAscript grammar on antlr.org sidesteps this
difficulty by dispensing with a lexer per se, and doing everything in the
parser.  This makes my brain itch.  :)


Any clues?
ta,
dave

-- 
http://david.holroyd.me.uk/

From parrt at cs.usfca.edu  Sat Sep  2 16:40:04 2006
From: parrt at cs.usfca.edu (Terence Parr)
Date: Sat, 2 Sep 2006 16:40:04 -0700
Subject: [antlr-interest] Island grammar in AntlrV3
In-Reply-To: <20060902230143.GA10590@badgers-in-foil.co.uk>
References: <200609022309.32178.ilia@obnovlenie.ru>
	<20060902230143.GA10590@badgers-in-foil.co.uk>
Message-ID: <92833D6C-C37D-4E46-9CFD-81875A9E6560@cs.usfca.edu>

Hi.

have you seen the island grammar example in the examples-v3 tarball?

Ter

On Sep 2, 2006, at 4:01 PM, David Holroyd wrote:

> On Sat, Sep 02, 2006 at 11:09:32PM +0400, Ilia Kantor wrote:
>> I have island grammar, that becomes known on parsing stage.
>>
>> How can I parse it with separate lexer/parser,
>>   adding result to common tree ?
>
> I've also been wondering about this, but I don't have an answer yet.
>
> I'm worried that by the time the parser has the chance to try and  
> fiddle
> with the lexer, lookahead has consumed the input anyway.  Maybe the
> standard infrastructure can let the input character stream  
> 'backtrack'?
>
> My specific use case is regular expression literals, e.g. I'd like  
> to be
> able to handle,
>
>   r =   / b; f = r/m;  // regexp literal with 'm' flag
>   r = a / b; f = r/m;  // two expr-statements involving division
>
> It seems that the lexer needs context from the grammar in order to  
> tell
> what to do on seeing '/'.
>
> I've seen that the ECMAscript grammar on antlr.org sidesteps this
> difficulty by dispensing with a lexer per se, and doing everything  
> in the
> parser.  This makes my brain itch.  :)
>
>
> Any clues?
> ta,
> dave
>
> -- 
> http://david.holroyd.me.uk/


From timothyjwashington at yahoo.ca  Sat Sep  2 17:31:26 2006
From: timothyjwashington at yahoo.ca (Timothy Washington)
Date: Sat, 2 Sep 2006 20:31:26 -0400 (EDT)
Subject: [antlr-interest] Grammar Inheritance for Newbies
Message-ID: <20060903003126.90484.qmail@web30308.mail.mud.yahoo.com>


Hello there. I have another newbie question for which
I can't seem to find answers in the antlr docs.

I want to define my own lexical grammar rules. As
well, I want to be able to import and use some XML
grammar rules in a separate file. Through trial and
error, I've tried:

i) using 1 'importVocab' statement for each grammar
file/definition I want to use. This doesn't work as
antly only seems to pick up the first 'importVocab'
lexical rule. 

ii) trying to call 'exportVocab' in many files to the
same lexical class. This doesn't seem to work either
as the 2nd 'exportVocab' rule overwrites the first
one. 

iii) trying to have my custom 'Lexer' extend another
lexer. But this does not work as Grammar inheritance
only seems to work for Parsers. 

I'm at the end of my rope as I don't know how to do
this one simple thing. Am I missing something? Thanks
for any help. 


Tim


__________________________________________________
Do You Yahoo!?
Tired of spam?  Yahoo! Mail has the best spam protection around 
http://mail.yahoo.com 

From phil.goodwin at gmail.com  Sat Sep  2 22:03:40 2006
From: phil.goodwin at gmail.com (Phil Goodwin)
Date: Sat, 2 Sep 2006 22:03:40 -0700
Subject: [antlr-interest] AST rewrites for recursive rules
In-Reply-To: <E1GJWqX-0007K6-00@gecko>
References: <3dbbdf1d0609020059k5412aea2v64b8c74b537bdda9@mail.gmail.com>
	<E1GJWqX-0007K6-00@gecko>
Message-ID: <3dbbdf1d0609022203m1e472012y1254bf2b1b8a0202@mail.gmail.com>

Hi John,

Yes, that is very helpful! So, instead of accessing the generated tree and
rearranging it, we pass the parts that we already have to the referenced
rule and let it do the work once it gathers the rest of the information.
Works perfectly and gives me a different way to think about tree generation.

Thanks a lot,

Phil

On 9/2/06, John B. Brodie <jbb at acm.org> wrote:
>
> Greetings!
>
> >....snipped...
> >I've pasted the code below. Here's my question: is there a better way to
> >access and manipulate the tree generated by a referenced rule? The AST
> >generation code below mirrors the elegance of the original recognizer but
> >that is lost amid the brutality done to the returned trees.
> >....snipped...
>
> How about passing the formal type as a parameter?
>
> formalParameters
>     :    t=TYPE formalParameterDeclsRest[$t] -> formalParameterDeclsRest
>     ;
> formalParameterDeclsRest[ Token t ]
>     :    i=IDENTIFIER
>         ( ( ',' formalParameters -> ^({$t} $i) formalParameters )
>         | ( /*empty*/            -> ^({$t} $i) )
>         )
>     ;
>
> Hope this helps...
>    -jbb
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060902/d1351711/attachment.html 

From ilia at obnovlenie.ru  Sun Sep  3 01:46:16 2006
From: ilia at obnovlenie.ru (Ilia Kantor)
Date: Sun, 3 Sep 2006 12:46:16 +0400
Subject: [antlr-interest] Island grammar in AntlrV3
In-Reply-To: <92833D6C-C37D-4E46-9CFD-81875A9E6560@cs.usfca.edu>
References: <200609022309.32178.ilia@obnovlenie.ru>
	<20060902230143.GA10590@badgers-in-foil.co.uk>
	<92833D6C-C37D-4E46-9CFD-81875A9E6560@cs.usfca.edu>
Message-ID: <200609031246.16985.ilia@obnovlenie.ru>


Yes, but you parse island grammar at lexer-stage in that example.

And we find it at parsing-stage.

I guess its a matter of few lines to process this case correctly...

> have you seen the island grammar example in the examples-v3 tarball?
>
> Ter
>
> On Sep 2, 2006, at 4:01 PM, David Holroyd wrote:
> > On Sat, Sep 02, 2006 at 11:09:32PM +0400, Ilia Kantor wrote:
> >> I have island grammar, that becomes known on parsing stage.
> >>
> >> How can I parse it with separate lexer/parser,
> >>   adding result to common tree ?
> >
> > I've also been wondering about this, but I don't have an answer yet.
> >
> > I'm worried that by the time the parser has the chance to try and
> > fiddle
> > with the lexer, lookahead has consumed the input anyway.  Maybe the
> > standard infrastructure can let the input character stream
> > 'backtrack'?
> >
> > My specific use case is regular expression literals, e.g. I'd like
> > to be
> > able to handle,
> >
> >   r =   / b; f = r/m;  // regexp literal with 'm' flag
> >   r = a / b; f = r/m;  // two expr-statements involving division
> >
> > It seems that the lexer needs context from the grammar in order to
> > tell
> > what to do on seeing '/'.
> >
> > I've seen that the ECMAscript grammar on antlr.org sidesteps this
> > difficulty by dispensing with a lexer per se, and doing everything
> > in the
> > parser.  This makes my brain itch.  :)
> >
> >
> > Any clues?
> > ta,
> > dave
> >
> > --
> > http://david.holroyd.me.uk/

From ilia at obnovlenie.ru  Sun Sep  3 04:27:46 2006
From: ilia at obnovlenie.ru (Ilia Kantor)
Date: Sun, 3 Sep 2006 15:27:46 +0400
Subject: [antlr-interest] How to disable recovery in antlr3 ?
In-Reply-To: <200609030214.55220.ilia@obnovlenie.ru>
References: <200609030214.55220.ilia@obnovlenie.ru>
Message-ID: <200609031527.47050.ilia@obnovlenie.ru>

? ????????? ?? 3 ???????? 2006 02:14 Ilia Kantor ???????(a):
> I don't want parser to 'recover' from errors. How can I disable recovery
> and just let exception slip out ?

Seems found the solution. Hope that helps someone.


@rulecatch { }

@parser::members {
    // override it to disable recovery
    protected void mismatch(IntStream input, int ttype, BitSet follow) throws 
RecognitionException
    { 
        MismatchedTokenException mte = new MismatchedTokenException(ttype, 
input);
        throw mte;
    }
}
	

From dieter_frej at gmx.net  Sun Sep  3 07:02:03 2006
From: dieter_frej at gmx.net (Dieter Frej)
Date: Sun, 03 Sep 2006 16:02:03 +0200
Subject: [antlr-interest] How to disable recovery in antlr3 ?
In-Reply-To: <200609031527.47050.ilia@obnovlenie.ru>
References: <200609030214.55220.ilia@obnovlenie.ru>
	<200609031527.47050.ilia@obnovlenie.ru>
Message-ID: <44FAE05B.2060107@gmx.net>

Hi Ilia,

a while ago Ter wrote in one of his emails (10.07.2006 23:20):

"By default ANTLR does not send the exceptions back out...it tries to
recover.  Override reportError and recover if you want; also can set
trycatchclause action I think it is."

Did you try this?

- Didi



Ilia Kantor wrote:
> ? ????????? ?? 3 ???????? 2006 02:14 Ilia Kantor ???????(a):
> 
>>I don't want parser to 'recover' from errors. How can I disable recovery
>>and just let exception slip out ?
> 
> 
> Seems found the solution. Hope that helps someone.
> 
> 
> @rulecatch { }
> 
> @parser::members {
>     // override it to disable recovery
>     protected void mismatch(IntStream input, int ttype, BitSet follow) throws 
> RecognitionException
>     { 
>         MismatchedTokenException mte = new MismatchedTokenException(ttype, 
> input);
>         throw mte;
>     }
> }
> 	
> 
> 


From ilia at obnovlenie.ru  Sun Sep  3 12:42:43 2006
From: ilia at obnovlenie.ru (Ilia Kantor)
Date: Sun, 3 Sep 2006 23:42:43 +0400
Subject: [antlr-interest] How to disable recovery in antlr3 ?
In-Reply-To: <44FAE05B.2060107@gmx.net>
References: <200609030214.55220.ilia@obnovlenie.ru>
	<200609031527.47050.ilia@obnovlenie.ru> <44FAE05B.2060107@gmx.net>
Message-ID: <200609032342.44024.ilia@obnovlenie.ru>


Maybe it referred to past versions of ANTLR.

It does not work in 3.0b4.

> a while ago Ter wrote in one of his emails (10.07.2006 23:20):
>
> "By default ANTLR does not send the exceptions back out...it tries to
> recover.  Override reportError and recover if you want; also can set
> trycatchclause action I think it is."
>
> Did you try this?
>
> - Didi
>
> Ilia Kantor wrote:
> > ? ????????? ?? 3 ???????? 2006 02:14 Ilia Kantor ???????(a):
> >>I don't want parser to 'recover' from errors. How can I disable recovery
> >>and just let exception slip out ?
> >
> > Seems found the solution. Hope that helps someone.
> >
> >
> > @rulecatch { }
> >
> > @parser::members {
> >     // override it to disable recovery
> >     protected void mismatch(IntStream input, int ttype, BitSet follow)
> > throws RecognitionException
> >     {
> >         MismatchedTokenException mte = new
> > MismatchedTokenException(ttype, input);
> >         throw mte;
> >     }
> > }

From ilia at obnovlenie.ru  Mon Sep  4 02:37:46 2006
From: ilia at obnovlenie.ru (Ilia Kantor)
Date: Mon, 4 Sep 2006 13:37:46 +0400
Subject: [antlr-interest] Evaluating exprs+
Message-ID: <200609041337.46405.ilia@obnovlenie.ru>


I have a rule 
exprs returns [String value]: expr+;

Thanks to Terrence and ANTLR3, it works.

How can I concatenate all values returned by expr ?

Something like
exprs returns [String value]: a b { return a+b };
but for antlr3 and working in my case.





From ilia at obnovlenie.ru  Mon Sep  4 04:20:29 2006
From: ilia at obnovlenie.ru (Ilia Kantor)
Date: Mon, 4 Sep 2006 15:20:29 +0400
Subject: [antlr-interest] Evaluating exprs+
In-Reply-To: <200609041337.46405.ilia@obnovlenie.ru>
References: <200609041337.46405.ilia@obnovlenie.ru>
Message-ID: <200609041520.29760.ilia@obnovlenie.ru>


Wops.. Solved that by adding cumulative sum variable =).

> I have a rule
> exprs returns [String value]: expr+;
>
> Thanks to Terrence and ANTLR3, it works.
>
> How can I concatenate all values returned by expr ?
>
> Something like
> exprs returns [String value]: a b { return a+b };
> but for antlr3 and working in my case.

From porcelli at uol.com.br  Mon Sep  4 09:44:50 2006
From: porcelli at uol.com.br (Alexandre Porcelli)
Date: Mon, 4 Sep 2006 13:44:50 -0300
Subject: [antlr-interest] v3 - How to deal with include Files?
In-Reply-To: <ee873c070609040941l60c6aa3et5b31e0867c8dd8ce@mail.gmail.com>
References: <ee873c070608231414w66992335lcadb8959e2d3858b@mail.gmail.com>
	<ee873c070609040941l60c6aa3et5b31e0867c8dd8ce@mail.gmail.com>
Message-ID: <ee873c070609040944k7246a23fve233b576b30e3ee4@mail.gmail.com>

Terence, I couldn't understand how to do it... I already saw the
island grammar sample but I couldn't understand how to "translate" it
to solve the include problem.

Alexandre Porcelli

On 9/4/06, Alexandre Porcelli <alexandre.porcelli at gmail.com> wrote:
> Terence, I couldn't understand how to do it... I already saw the
> island grammar sample but I couldn't understand how to "translate" it
> to solve the include problem.
>
> Alexandre Porcelli
>
>
> On 8/23/06, Alexandre Porcelli <porcelli at uol.com.br> wrote:
> > Hi All,
> >
> >   Id like to know how to deal with include Files?
> >
> >    In v2 there is TokenStreamSelector, how can I solve a include file
> > problem using v3?
> >
> > Best Regards,
> > Alexandre Porcelli
> >
>

From parrt at cs.usfca.edu  Mon Sep  4 10:00:56 2006
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon, 4 Sep 2006 10:00:56 -0700
Subject: [antlr-interest] v3 - How to deal with include Files?
In-Reply-To: <ee873c070609040944k7246a23fve233b576b30e3ee4@mail.gmail.com>
References: <ee873c070608231414w66992335lcadb8959e2d3858b@mail.gmail.com>
	<ee873c070609040941l60c6aa3et5b31e0867c8dd8ce@mail.gmail.com>
	<ee873c070609040944k7246a23fve233b576b30e3ee4@mail.gmail.com>
Message-ID: <17FD5503-30CD-4419-BCFB-FC3A15E5954B@cs.usfca.edu>

hi. for includes, I'd probably just make my input character stream  
look for and do the includes so the lexer sees a continuous stream of  
char ready to process.

Ter
On Sep 4, 2006, at 9:44 AM, Alexandre Porcelli wrote:

> Terence, I couldn't understand how to do it... I already saw the
> island grammar sample but I couldn't understand how to "translate" it
> to solve the include problem.
>
> Alexandre Porcelli
>
> On 9/4/06, Alexandre Porcelli <alexandre.porcelli at gmail.com> wrote:
>> Terence, I couldn't understand how to do it... I already saw the
>> island grammar sample but I couldn't understand how to "translate" it
>> to solve the include problem.
>>
>> Alexandre Porcelli
>>
>>
>> On 8/23/06, Alexandre Porcelli <porcelli at uol.com.br> wrote:
>> > Hi All,
>> >
>> >   Id like to know how to deal with include Files?
>> >
>> >    In v2 there is TokenStreamSelector, how can I solve a include  
>> file
>> > problem using v3?
>> >
>> > Best Regards,
>> > Alexandre Porcelli
>> >
>>


From porcelli at uol.com.br  Mon Sep  4 11:08:35 2006
From: porcelli at uol.com.br (Alexandre Porcelli)
Date: Mon, 4 Sep 2006 15:08:35 -0300
Subject: [antlr-interest] v3 - How to deal with include Files?
In-Reply-To: <ee873c070609040944k7246a23fve233b576b30e3ee4@mail.gmail.com>
References: <ee873c070608231414w66992335lcadb8959e2d3858b@mail.gmail.com>
	<ee873c070609040941l60c6aa3et5b31e0867c8dd8ce@mail.gmail.com>
	<ee873c070609040944k7246a23fve233b576b30e3ee4@mail.gmail.com>
Message-ID: <ee873c070609041108sfa83458vd4219458657e1691@mail.gmail.com>

Now I understood your solution, but isn't it more complicate? Because
you will need to handle lexical instructions inside the input stream
(you can have several different kinds of "include" statements in
several languages - include, copy, -inc, ...) and we can have same
more sofisticates include statements (like an ASP file that is not
just a statement is a tag).
And the second problem that I can see with this solution is to control
file positions (line and column position) because you will need to add
one more internal thing : fileName (to get info about what is the
active file name).
I?d like to know your opinion about this.

Regards,
Alexandre Porcelli


> hi. for includes, I'd probably just make my input character stream
> look for and do the includes so the lexer sees a continuous stream of
> char ready to process.
>
> Ter
> On Sep 4, 2006, at 9:44 AM, Alexandre Porcelli wrote:
>
>> Terence, I couldn't understand how to do it... I already saw the
>> island grammar sample but I couldn't understand how to "translate" it
>> to solve the include problem.
>>
>> Alexandre Porcelli
>>
>> On 9/4/06, Alexandre Porcelli <alexandre.porcelli at gmail.com> wrote:
>>> Terence, I couldn't understand how to do it... I already saw the
>>> island grammar sample but I couldn't understand how to "translate" it
>>> to solve the include problem.
>>>
>>> Alexandre Porcelli
>>>
>>>
>>> On 8/23/06, Alexandre Porcelli <porcelli at uol.com.br> wrote:
>>> > Hi All,
>>> >
>>> >   Id like to know how to deal with include Files?
>>> >
>>> >    In v2 there is TokenStreamSelector, how can I solve a include
>>> file
>>> > problem using v3?
>>> >
>>> > Best Regards,
>>> > Alexandre Porcelli
>>> >
>>>

From lgcraymer at yahoo.com  Mon Sep  4 12:33:10 2006
From: lgcraymer at yahoo.com (Loring Craymer)
Date: Mon, 4 Sep 2006 12:33:10 -0700 (PDT)
Subject: [antlr-interest] v3 - How to deal with include Files?
In-Reply-To: <ee873c070609041108sfa83458vd4219458657e1691@mail.gmail.com>
Message-ID: <20060904193310.20648.qmail@web55902.mail.re3.yahoo.com>

I don't think that "lex everything twice" as Ter suggests is a good solution.  It does work--that's what a preprocessor does--but additional overhead is added to cover mapping positions (file and line directives).

I think that the better approach is to recognize "import foo" (or whatever) as a token in the lexer.  That works reasonably well with ANTLR 2 but may not work in ANTLR 3 yet (due to synpred problems).  Your lexer rule would look something like:

TEXT
    :
    (IMPORT)=> IMPORT
    |
    <standard TEXT def'n>
    ;

IMPORT
    :
    'i' "mport" <recognize rest of text, execute import actions, mark token as "SKIP">
    ;

(Separating the 'i' in "import" effectively means that the synpred is only invoked when there is a leading 'i'.)

--Loring

Alexandre Porcelli <porcelli at uol.com.br> wrote: Now I understood your solution, but isn't it more complicate? Because
you will need to handle lexical instructions inside the input stream
(you can have several different kinds of "include" statements in
several languages - include, copy, -inc, ...) and we can have same
more sofisticates include statements (like an ASP file that is not
just a statement is a tag).
And the second problem that I can see with this solution is to control
file positions (line and column position) because you will need to add
one more internal thing : fileName (to get info about what is the
active file name).
I?d like to know your opinion about this.

Regards,
Alexandre Porcelli


> hi. for includes, I'd probably just make my input character stream
> look for and do the includes so the lexer sees a continuous stream of
> char ready to process.
>
> Ter
> On Sep 4, 2006, at 9:44 AM, Alexandre Porcelli wrote:
>
>> Terence, I couldn't understand how to do it... I already saw the
>> island grammar sample but I couldn't understand how to "translate" it
>> to solve the include problem.
>>
>> Alexandre Porcelli
>>
>> On 9/4/06, Alexandre Porcelli  wrote:
>>> Terence, I couldn't understand how to do it... I already saw the
>>> island grammar sample but I couldn't understand how to "translate" it
>>> to solve the include problem.
>>>
>>> Alexandre Porcelli
>>>
>>>
>>> On 8/23/06, Alexandre Porcelli 
 wrote:
>>> > Hi All,
>>> >
>>> >   Id like to know how to deal with include Files?
>>> >
>>> >    In v2 there is TokenStreamSelector, how can I solve a include
>>> file
>>> > problem using v3?
>>> >
>>> > Best Regards,
>>> > Alexandre Porcelli
>>> >
>>>



 		
---------------------------------
 All-new Yahoo! Mail - Fire up a more powerful email and get things done faster.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060904/d5c04410/attachment.html 

From ric.klaren at gmail.com  Tue Sep  5 05:27:11 2006
From: ric.klaren at gmail.com (Ric Klaren)
Date: Tue, 5 Sep 2006 14:27:11 +0200
Subject: [antlr-interest] Recognising XML in a grammar
In-Reply-To: <20060831172807.30932.qmail@web30303.mail.mud.yahoo.com>
References: <20060831172807.30932.qmail@web30303.mail.mud.yahoo.com>
Message-ID: <bc607a4e0609050527x1d79275frb96ce54bb3591bec@mail.gmail.com>

Hi,

On 8/31/06, Timothy Washington <timothyjwashington at yahoo.ca> wrote:
> Hello there. I am new to ANTLR and parser generators
> in general, so I hope you'll forgive what might seem a
> simple question. I want to know how my parser can
> recognise an XML block inside of my grammar.

There's multiple ways to solve this.

> GRAMMAR
> I want to take as an example, the xml grammar file
> '$ANTLR_2.7.6/examples/java/xml/xml.g' in antlr. I'm
> writing a grammar that can contain xml (with
> namespaces and declarations) as a token. So a command
> could look like this for example:
> create
>         (entry
>                 (
>                         <?xml version='1.0' encoding='UTF-8'?>
>                         <debit xmlns='com/interrupt/bookkeeping/account'
> amount='100.00'>,
>                         <?xml version='1.0' encoding='UTF-8'?>
>                         <credit xmlns='com/interrupt/bookkeeping/account'
> amount='100.00'>
>                 )
>         )

> IMPORTING .g FILES
> I want to write a grammar that recognises all the
> tokens in this command, including the raw XML. How
> could I use the grammar definitions in 'xml.g', in my
> own grammar file. For starters, I believe you use the
> 'importVocab' grammar option.
> Class MyParser extends Parser
> options { ? importVocab=V; ?}

importVocab is only used to carry around token definitions (e.g. the
mapping of this piece of text to a unique number that's used in
subsequent (tree)parse phases)

For what you are trying to do you had better look at the token stream
multiplexing
examples. (for one solution)

> RECOGNISING XML BLOCKS
> But what I really want to know is how my parser can
> recognise a block of XML inside of my command. With
> the said 'xml.g' grammar, I can recognise start and
> end tags and cdata and so on. But I just want to
> recognise an entire XML block and pass it as a token
> to some command.

I guess it's probably best to first determine what lexing strategy is
best for what you want to do... Do you want to have:

1) one lexer that can cut up the character stream in all possible
types of tokens (for your normal grammar *and* for all the tokens that
can occur in XML) (this may become tricky or perform badly due to
conflicts between token types)

2) one lexer for your normal grammar tokens and one lexer that can
tokenize XML. And use tokenstream multiplexing to switch between them
(see the example for dealing with javadoc comments)

3) one lexer that cuts up the character stream into the tokens for
your normal grammar and passes XML chunks as one big XML token to your
parser. (this could become a variant of solution 2)

After deciding what you're going to do with the lexer you should think
of what you want to do in the parser.

For lexer solution 1+2 you probably would get a deal with everything parser.

For lexer solution 3 you might start building an AST and when you
encounter an XML token parse it's contents inline and maybe insert the
generated AST into the AST you're generating. (e.g. have a complete
xml lexer/parser/treebuilder that you call from action code) Then in a
subsequent parse phase you might grab the combined AST and do 'your
stuff'.

Well there's more ways in which you can make manageable chunks of the
parsing problem you have. The above is just a start there's more ways
of cutting up the complexity. If you try to do too much in one go you
will probably end up with something unmanageable. So I'd recommend
cutting things up at some point.

Cheers,

Ric

From timothyjwashington at yahoo.ca  Tue Sep  5 07:15:13 2006
From: timothyjwashington at yahoo.ca (Timothy Washington)
Date: Tue, 5 Sep 2006 10:15:13 -0400 (EDT)
Subject: [antlr-interest] Recognising XML in a grammar
In-Reply-To: <bc607a4e0609050527x1d79275frb96ce54bb3591bec@mail.gmail.com>
Message-ID: <20060905141513.70287.qmail@web30314.mail.mud.yahoo.com>


--- Ric Klaren <ric.klaren at gmail.com> wrote:

> Hi,
> 
...
> 
> 3) one lexer that cuts up the character stream into
> the tokens for
> your normal grammar and passes XML chunks as one big
> XML token to your
> parser. (this could become a variant of solution 2)
> 
> After deciding what you're going to do with the
> lexer you should think
> of what you want to do in the parser.
> 
...
> 
> For lexer solution 3 you might start building an AST
> and when you
> encounter an XML token parse it's contents inline
> and maybe insert the
> generated AST into the AST you're generating. (e.g.
> have a complete
> xml lexer/parser/treebuilder that you call from
> action code) Then in a
> subsequent parse phase you might grab the combined
> AST and do 'your
> stuff'.
> 
> Well there's more ways in which you can make
> manageable chunks of the
> parsing problem you have. The above is just a start
> there's more ways
> of cutting up the complexity. If you try to do too
> much in one go you
> will probably end up with something unmanageable. So
> I'd recommend
> cutting things up at some point.
> 
> Cheers,
> 
> Ric
> 


Hey there Ric, thanks for responding. Your option
number 3 is what I'm after. The software that I am
writing will have another tool that takes that XML
chunk and deals with it. So really, I just want to
pass the XML as a string to my application. But the
grammar has to recognise a complete xml document (
with or without declaration ), as there can be a list
of XMLs passed to it in 1 command ( comma is the
delimiter ). I've come pretty far using the xml.g
example. The only remaining thing to do is to
distinguish between 1 and many XMLs. So for example,
in fig.1, the parser recognises 0 or more starttag,
endtag, et al. within a start and an end tag. So it
doesn't distinguish between different documents. 

** What I want is something like fig.2, where the
parser recognises nested XMLs. I've gotten some
success with fig.2, ie, it recognises nested XML ( see
fig.3 ). I just need to figure out how to delimit 1
XML document from another without
errors(non-determinisms). So it seems to be working,
but there's still some lexical nondeterminism ( fig.3
). I 'think' that only empty tags need to be
recognised as a complete node ( xml.g just defines
them as part of the start tag ).

class BookkeepingParser extends Parser;
options {
	k=10;
	importVocab=BookkeepingLexer; 
	
}

token_literal: ((PI)? 
		( STARTTAG 
				( WS |  PI  | STARTTAG  | ENDTAG  | COMMENT  |
CDATABLOCK   )* 
			ENDTAG)) { System.out.println("TOKEN LITERAL"); }; 
fig.1


...
token_literal: ((PI)? 
		( STARTTAG 
				( WS |  PI   | COMMENT  | CDATABLOCK   )* 
				(token_literal)*
			(ENDTAG)?)) { System.out.println("TOKEN LITERAL");
}; 
fig.2



ANTLR Parser Generator   Version 2.7.6 (2005-12-22)  
1989-2005
ANTLR Parser Generator   Version 2.7.6 (2005-12-22)  
1989-2005
grammar/bookkeeping.parser.g:17:
warning:nondeterminism upon
grammar/bookkeeping.parser.g:17:     k==1:PI
grammar/bookkeeping.parser.g:17:    
k==2:PI,COMMENT,ENDTAG,STARTTAG,CDATABLOCK,WS
...
grammar/bookkeeping.parser.g:17:    
k==9:PI,COMMENT,ENDTAG,STARTTAG,CDATABLOCK,WS
grammar/bookkeeping.parser.g:17:    
k==10:PI,COMMENT,ENDTAG,STARTTAG,CDATABLOCK,WS
grammar/bookkeeping.parser.g:17:     between alt 2 and
exit branch of block
BookkeepingMain INPUT length[1] / content[<?xml
version='1.0' encoding='UTF-8'?>
<bookkeeping
xmlns:account='com/interrupt/bookkeeping/account'
xmlns:journal='com/interrupt/bookkeeping/journal'
xmlns='com/interrupt/bookkeeping' id='' >  <!-- 1.
account types are: asset, liability, expense, revenue
2. each account has a given counter weight
<account:account type='asset'               id=''
name='' counterWeight='debit' /> <account:account
type='expense'     id=' name=' counterWeight='debit'
/> <account:account type='liability'   id='' name=''
counterWeight='credit' <account:account type='revenue'
    id='' name='' counterWeight='credit' /> -->
<account:accounts id='a1' ><!-- each account can have
a debit / credit to it. These are duplicated from
journal entries.  **Therefore adding entries to a
<journal/> or <transaction/> will also add the
corresponding debit/credit to the corresponding
account.  ** Adding <entry/> to a <transaction/> will
also add the entry to the corresponding <journal/>
Also 'debits/credits' in all <account/> should match
with 'debits/credits' in all
<journal><enrtry/></journal> --> 
<account:account id='1' name='office equipment'
type='asset' counterWeight='debit' ><account:debit
id='' amount='10.00' entryid='' accountid='1'
/></account:account><account:account id='2' name='tax'
type='expense' counterWeight='debit' ><account:debit
id='' amount='1.50' entryid='' accountid='2'
/></account:account><account:account id='3'
name='bank' type='asset' counterWeight='debit'
><account:credit id='' amount='11.50' entryid=''
accountid='3' /></account:account><journal:journals
id='' ><journal:journal id='j1' name='generalledger'
type='' balance=''><journal:entries id='' 
><journal:entry id='e1' entrynum='' state=''
journalid='' date='' ><account:debit id=''
amount='10.00' entryid='' accountid='1'
/><account:debit id='' amount='1.50' entryid=''
accountid='2' /><account:credit id='' amount='11.50'
entryid='' accountid='3'
/></journal:entry></journal:entries></journal:journal></journal:journals></account:accounts></bookkeeping>,
<anotherXml/>]	//*** input is a LIST of XML separated
by comma 

ATTRIBUTE: version=1.0
ATTRIBUTE: encoding=UTF-8
XMLDECL: xml

ATTRIBUTE:
xmlns:account=com/interrupt/bookkeeping/account
ATTRIBUTE:
xmlns:journal=com/interrupt/bookkeeping/journal
ATTRIBUTE: xmlns=com/interrupt/bookkeeping
ATTRIBUTE: id=
STARTTAG: bookkeeping

COMMENT:  1. account types are: asset, liability,
expense, revenue 2. each account has a given counter
weight <account:account type='asset'              
id='' name='' counterWeight='debit' />
<account:account type='expense'     id=' name='
counterWeight='debit' /> <account:account
type='liability'   id='' name=''
counterWeight='credit' <account:account type='revenue'
    id='' name='' counterWeight='credit' /> 	//***
COMMENT has commas, but NO DELIMITER

...

EMTYTAG: account:credit
ENDTAG: journal:entry
TOKEN LITERAL
ENDTAG: journal:entries
TOKEN LITERAL
ENDTAG: journal:journal
TOKEN LITERAL
ENDTAG: journal:journals
TOKEN LITERAL
ENDTAG: account:accounts
TOKEN LITERAL
ENDTAG: bookkeeping
TOKEN LITERAL
DELIMITER ','			//*** DELIMITER HERE 
line 1:2026: expecting ENDTAG, found ','

WHITE SPACE ' '
EMTYTAG: anotherXml		//*** NEXT XML DOCUMENT HERE 
line 1:2041: expecting ENDTAG, found 'null'
line 1:2041: expecting ENDTAG, found 'null'
line 1:2041: expecting ENDTAG, found 'null'
line 1:2041: expecting ENDTAG, found 'null'
line 1:2041: expecting ENDTAG, found 'null'
line 1:2041: expecting ENDTAG, found 'null'
fig.3 


Tim




__________________________________________________
Do You Yahoo!?
Tired of spam?  Yahoo! Mail has the best spam protection around 
http://mail.yahoo.com 

From ric.klaren at gmail.com  Tue Sep  5 08:14:51 2006
From: ric.klaren at gmail.com (Ric Klaren)
Date: Tue, 5 Sep 2006 17:14:51 +0200
Subject: [antlr-interest] Recognising XML in a grammar
In-Reply-To: <20060905141513.70287.qmail@web30314.mail.mud.yahoo.com>
References: <bc607a4e0609050527x1d79275frb96ce54bb3591bec@mail.gmail.com>
	<20060905141513.70287.qmail@web30314.mail.mud.yahoo.com>
Message-ID: <bc607a4e0609050814n2500eeddha886266bc613e6dd@mail.gmail.com>

Hi,

On 9/5/06, Timothy Washington <timothyjwashington at yahoo.ca> wrote:
> Hey there Ric, thanks for responding. Your option
> number 3 is what I'm after. The software that I am
> writing will have another tool that takes that XML
> chunk and deals with it. So really, I just want to
> pass the XML as a string to my application.

Note that in what you're making now you have to rebuild the original
XML string by concatenating the tokens...

Also you say you'd like to do option 3 I presented, but you're
implementing option 1 it seems. It seems you mix up lexing and parsing
(this is actually pretty normal when you're pretty new to
antlr/parsing).

If you want to get one easy string in your parser for a chunk of
complete XML then you'll have to do this in the lexer. You can
probably use chunks from the original xml lexer and just count open
and close tags untill you got a complete chunk of xml (I assume you
don't have to validate the XML input at this stage).

First try to get a lexer running that can deal with your input and
delivers the chunks you want. E.g. only tokens from your language and
say some XML_TOKEN that contains a complete chunk of XML. After that
it will be easy to deal with comma delimited chunks of XML_TOKEN's.

If I take your earlier example:

create
         (entry
                 (
                         <?xml version='1.0' encoding='UTF-8'?>
                         <debit xmlns='com/interrupt/bookkeeping/account'
 amount='100.00'/>,
                        <?xml version='1.0' encoding='UTF-8'?>
                         <credit xmlns='com/interrupt/bookkeeping/account'
 amount='100.00'/>
                 )
         )

(I changed the <debit xml... 00'> to <debit xml... 00'/> I assume
that's a mistake)

For how you explain things I'd expect to get the following tokens from
the lexer:

CREATE   - with text 'create' (assuming you handle this as a keyword)
LPAREN - with text '('
ENTRY - with text 'entry' (assuming you handle this as a keyword)
LPAREN - with text '('
XMLTOKEN - with text '<?xml version='1.0' encoding='UTF-8'?>
                         <debit xmlns='com/interrupt/bookkeeping/account'
 amount='100.00'/>'
COMMA - with text ','
XMLTOKEN - with text '<?xml version='1.0' encoding='UTF-8'?>
                         <debit xmlns='com/interrupt/bookkeeping/account'
 amount='100.00'/>'
RPAREN - with text ')'
RPAREN - with text ')'
EOF

The in the parser you'd have a rule:

create_cmd: CREATE LPAREN ENTRY LPAREN
  XMLTOKEN (COMMA XMLTOKEN)*
RPAREN RPAREN;

Inside the action code in this rule then you could just use the
getText() method on the XMLTOKENS to access the XML as a string and
pass it to another stage.

With the solution you seem to be following now you'd have to
concatenate a bunch of tags etc. together back to one string.

> class BookkeepingParser extends Parser;
> options {
>         k=10;
>         importVocab=BookkeepingLexer;
> }

As aside note k=10 is generally spoken pretty high. Normally you'd
have something like k=2-3 a bit depending on things. Non determinism
you can fix with predicates. When you get things running you can
refactor your grammar to get rid of the worst predicates.

Cheers,

Ric

From swalton at cs.utah.edu  Tue Sep  5 09:02:21 2006
From: swalton at cs.utah.edu (Sean Walton)
Date: Tue, 05 Sep 2006 10:02:21 -0600
Subject: [antlr-interest] Switching keywords
In-Reply-To: <7F32A6B2-E1A3-422E-926F-88427BB000F7@cs.usfca.edu>
References: <7F32A6B2-E1A3-422E-926F-88427BB000F7@cs.usfca.edu>
Message-ID: <44FD9F8D.6020808@cs.utah.edu>

[This is for anyone that can answer this problem.]
I am building a language (B) on top of another language (A).  This 
causes a particular problem with any new reserved words defined in 
Language B.  For example, if there needs to be a reserved word 'set' in 
Language B, but when in the context of Language A, 'set' still needs to 
be an identifier.
Does anyone have any ideas how to do this?
-Sean Walton
PS. The real development is honestly more complicated than the above: 
there is a third language (C) involved.  Why?  I guess I like pain.... ;)

From parrt at cs.usfca.edu  Tue Sep  5 09:51:30 2006
From: parrt at cs.usfca.edu (Terence Parr)
Date: Tue, 5 Sep 2006 09:51:30 -0700
Subject: [antlr-interest] Lexer modes
In-Reply-To: <17656.35548.388298.347917@swan.psy.cmu.edu>
References: <17656.35548.388298.347917@swan.psy.cmu.edu>
Message-ID: <8736D0E5-7CBA-4CB2-B94C-29D19C59802F@cs.usfca.edu>


On Sep 1, 2006, at 12:32 PM, FranklinChen at cmu.edu wrote:

> Is there an estimate on when an ANTLR with lexer modes will be
> available?  I have been holding off on implementing part of a program
> until this feature exists.

   I am not sure about timing, but I want these for sure.

Ter


From lgcraymer at yahoo.com  Tue Sep  5 10:04:24 2006
From: lgcraymer at yahoo.com (Loring Craymer)
Date: Tue, 5 Sep 2006 10:04:24 -0700 (PDT)
Subject: [antlr-interest] Switching keywords
In-Reply-To: <44FD9F8D.6020808@cs.utah.edu>
Message-ID: <20060905170425.74394.qmail@web55902.mail.re3.yahoo.com>

What do you mean by "on top of"?  Do you mean that "A" statements are embedded in "B" programs?  Or that "B" compiles to "A"?

If you just need to handle tokens that are keywords in one context and not another, then these are best handled as

keyword
    :
    { LT(1).getText().equals("keyword") }? TEXT
    ;

and then use "keyword" in the appropriate context.  Semantic predicate hoisting is very handy, and "is a keyword only in context" is a common problem.

--Loring


Sean Walton <swalton at cs.utah.edu> wrote: [This is for anyone that can answer this problem.]
I am building a language (B) on top of another language (A).  This 
causes a particular problem with any new reserved words defined in 
Language B.  For example, if there needs to be a reserved word 'set' in 
Language B, but when in the context of Language A, 'set' still needs to 
be an identifier.
Does anyone have any ideas how to do this?
-Sean Walton
PS. The real development is honestly more complicated than the above: 
there is a third language (C) involved.  Why?  I guess I like pain.... ;)


 		
---------------------------------
How low will we go? Check out Yahoo! Messenger?s low  PC-to-Phone call rates.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060905/7ec32b63/attachment.html 

From timothyjwashington at yahoo.ca  Tue Sep  5 10:51:26 2006
From: timothyjwashington at yahoo.ca (Timothy Washington)
Date: Tue, 5 Sep 2006 13:51:26 -0400 (EDT)
Subject: [antlr-interest] Recognising XML in a grammar
In-Reply-To: <bc607a4e0609050814n2500eeddha886266bc613e6dd@mail.gmail.com>
Message-ID: <20060905175127.26121.qmail@web30311.mail.mud.yahoo.com>


--- Ric Klaren <ric.klaren at gmail.com> wrote:

> Hi,
> 
> On 9/5/06, Timothy Washington
> <timothyjwashington at yahoo.ca> wrote:
> > Hey there Ric, thanks for responding. Your option
> > number 3 is what I'm after. The software that I am
> > writing will have another tool that takes that XML
> > chunk and deals with it. So really, I just want to
> > pass the XML as a string to my application.
> 
> Note that in what you're making now you have to
> rebuild the original
> XML string by concatenating the tokens...
> 
> Also you say you'd like to do option 3 I presented,
> but you're
> implementing option 1 it seems. It seems you mix up
> lexing and parsing
> (this is actually pretty normal when you're pretty
> new to
> antlr/parsing).
> 
> If you want to get one easy string in your parser
> for a chunk of
> complete XML then you'll have to do this in the
> lexer. You can
> probably use chunks from the original xml lexer and
> just count open
> and close tags untill you got a complete chunk of
> xml (I assume you
> don't have to validate the XML input at this stage).


Yeah, you nailed it Ric, I am new to parser
generators. I actually tried to write my own parser
before realising that I better use a packaged
solution. I actually got pretty far along - I was
using an interpreter pattern on an input stream text.
My difficulty came in breaking the input into
expressions recursively (and executing them as such). 

On that note, I can see how the 'token_literal' rule
defined in the Parser can be put in the lexer, if I'm
understanding you correctly. This is so as not to mix
up parsing and lexing. So I don't have to validate the
XML, but it has to be well-formed so that the lexer
can recognize it as input. 


> 
> First try to get a lexer running that can deal with
> your input and
> delivers the chunks you want. E.g. only tokens from
> your language and
> say some XML_TOKEN that contains a complete chunk of
> XML. After that
> it will be easy to deal with comma delimited chunks
> of XML_TOKEN's.

Right right, I see.


> 
> If I take your earlier example:
> 
> create
>          (entry
>                  (
>                          <?xml version='1.0'
> encoding='UTF-8'?>
>                          <debit
> xmlns='com/interrupt/bookkeeping/account'
>  amount='100.00'/>,
>                         <?xml version='1.0'
> encoding='UTF-8'?>
>                          <credit
> xmlns='com/interrupt/bookkeeping/account'
>  amount='100.00'/>
>                  )
>          )
> 
> (I changed the <debit xml... 00'> to <debit xml...
> 00'/> I assume
> that's a mistake)
> 
> For how you explain things I'd expect to get the
> following tokens from
> the lexer:
> 
> CREATE   - with text 'create' (assuming you handle
> this as a keyword)
> LPAREN - with text '('
> ENTRY - with text 'entry' (assuming you handle this
> as a keyword)
> LPAREN - with text '('
> XMLTOKEN - with text '<?xml version='1.0'
> encoding='UTF-8'?>
>                          <debit
> xmlns='com/interrupt/bookkeeping/account'
>  amount='100.00'/>'
> COMMA - with text ','
> XMLTOKEN - with text '<?xml version='1.0'
> encoding='UTF-8'?>
>                          <debit
> xmlns='com/interrupt/bookkeeping/account'
>  amount='100.00'/>'
> RPAREN - with text ')'
> RPAREN - with text ')'
> EOF
> 
> The in the parser you'd have a rule:
> 
> create_cmd: CREATE LPAREN ENTRY LPAREN
>   XMLTOKEN (COMMA XMLTOKEN)*
> RPAREN RPAREN;
> 
> Inside the action code in this rule then you could
> just use the
> getText() method on the XMLTOKENS to access the XML
> as a string and
> pass it to another stage.

I'm going to try your suggestion and let you know the
results. This is actually what I really wanted to do,
but didn't quite get the lexing/parsing barrier. The
only question I have left is how to attach actions to
a parser rule, but let me look at the docs for that. 


> 
> With the solution you seem to be following now you'd
> have to
> concatenate a bunch of tags etc. together back to
> one string.
> 
> > class BookkeepingParser extends Parser;
> > options {
> >         k=10;
> >         importVocab=BookkeepingLexer;
> > }
> 
> As aside note k=10 is generally spoken pretty high.
> Normally you'd
> have something like k=2-3 a bit depending on things.
> Non determinism
> you can fix with predicates. When you get things
> running you can
> refactor your grammar to get rid of the worst
> predicates.

Predicates ( semantic and syntactic ) are something
that I don't really understand yet. I read the antlr
docs, but that doesn't give me a real sense of the
why. For example, I have 2 similar options in my
syntax that look like A. and B. For this example, I
had to put my 'k' value to 7 to distinguish between A
and B. Does a syntactic predicate look like C, so that
now my 'k' or lookahead value only has to be 2 to
distinguish between A and B? 

A. "-entry"
B. "-entrynum" 
C. {"-entr"}


> 
> Cheers,
> 
> Ric
> 

Cheers Ric, 

Tim 


__________________________________________________
Do You Yahoo!?
Tired of spam?  Yahoo! Mail has the best spam protection around 
http://mail.yahoo.com 

From lgcraymer at yahoo.com  Tue Sep  5 11:23:45 2006
From: lgcraymer at yahoo.com (Loring Craymer)
Date: Tue, 5 Sep 2006 11:23:45 -0700 (PDT)
Subject: [antlr-interest] Lexer modes
In-Reply-To: <8736D0E5-7CBA-4CB2-B94C-29D19C59802F@cs.usfca.edu>
Message-ID: <20060905182346.59247.qmail@web55909.mail.re3.yahoo.com>

Ter--

Lexer modes may be very easy to implement.  Have multiple mToken (single token returned) rules underneath mTokens selected by sempreds.  Syntax might be

mode FOO {
    TEXT, NUMBER, 'hello'
}

to list the rules recognized in a mode.  Multiple mTokens_ might be faster, and could be done easily if empty rules with sempreds work:

TOMBSTONE
    :
    { mode != lastMode }? { lastMode = mode }?
    ;

Then you could follow the mTokens_ loops with TOMBSTONE as a termination condition and have a master mTokens rule.

Much of the simplicity comes from the artificially generated mTokens approach that you already have in place--that's a very clever way of letting ANTLR do the analysis.

--Loring

Terence Parr <parrt at cs.usfca.edu> wrote: 
On Sep 1, 2006, at 12:32 PM, FranklinChen at cmu.edu wrote:

> Is there an estimate on when an ANTLR with lexer modes will be
> available?  I have been holding off on implementing part of a program
> until this feature exists.

   I am not sure about timing, but I want these for sure.

Ter



 		
---------------------------------
Do you Yahoo!?
 Get on board. You're invited to try the new Yahoo! Mail.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060905/aaed744c/attachment.html 

From swalton at cs.utah.edu  Tue Sep  5 12:00:35 2006
From: swalton at cs.utah.edu (Sean Walton)
Date: Tue, 05 Sep 2006 13:00:35 -0600
Subject: [antlr-interest] Switching keywords
In-Reply-To: <20060905170425.74394.qmail@web55902.mail.re3.yahoo.com>
References: <20060905170425.74394.qmail@web55902.mail.re3.yahoo.com>
Message-ID: <44FDC953.2090109@cs.utah.edu>

I mean "'A' statements are embedded in 'B' programs".
Thanks for the tip.  I am using 3.0 -- would 
"input.LT(1).getText().equals("includes")}?" be a reasonable solution?
-Sean

Loring Craymer wrote:
> What do you mean by "on top of"?  Do you mean that "A" statements are 
> embedded in "B" programs?  Or that "B" compiles to "A"?
>
> If you just need to handle tokens that are keywords in one context and 
> not another, then these are best handled as
>
> keyword
>     :
>     { LT(1).getText().equals("keyword") }? TEXT
>     ;
>
> and then use "keyword" in the appropriate context.  Semantic predicate 
> hoisting is very handy, and "is a keyword only in context" is a common 
> problem.
>
> --Loring
>
>
> */Sean Walton <swalton at cs.utah.edu>/* wrote:
>
>     [This is for anyone that can answer this problem.]
>     I am building a language (B) on top of another language (A). This
>     causes a particular problem with any new reserved words defined in
>     Language B. For example, if there needs to be a reserved word
>     'set' in
>     Language B, but when in the context of Language A, 'set' still
>     needs to
>     be an identifier.
>     Does anyone have any ideas how to do this?
>     -Sean Walton
>     PS. The real development is honestly more complicated than the above:
>     there is a third language (C) involved. Why? I guess I like
>     pain.... ;)
>
>
> ------------------------------------------------------------------------
> How low will we go? Check out Yahoo! Messenger's low PC-to-Phone call 
> rates. 
> <http://us.rd.yahoo.com/mail_us/taglines/postman8/*http://us.rd.yahoo.com/evt=39663/*http://voice.yahoo.com>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060905/4dd342aa/attachment.html 

From swalton at cs.utah.edu  Tue Sep  5 12:19:00 2006
From: swalton at cs.utah.edu (Sean Walton)
Date: Tue, 05 Sep 2006 13:19:00 -0600
Subject: [antlr-interest] Switching keywords
In-Reply-To: <44FDC953.2090109@cs.utah.edu>
References: <20060905170425.74394.qmail@web55902.mail.re3.yahoo.com>
	<44FDC953.2090109@cs.utah.edu>
Message-ID: <44FDCDA4.9010407@cs.utah.edu>

Sean Walton wrote:
> I mean "'A' statements are embedded in 'B' programs".
> Thanks for the tip.  I am using 3.0 -- would 
> "input.LT(1).getText().equals("includes")}?" be a reasonable solution?
> -Sean
Here's a more specific example.  Could you help me with the variable?

rule1
    : (v='target' | v='within' | v='get' | v='set') '(' identifier ')'
            -> ^(RULE_MODULE $v identifier)
    ;


-Sean

From lgcraymer at yahoo.com  Tue Sep  5 13:28:06 2006
From: lgcraymer at yahoo.com (Loring Craymer)
Date: Tue, 5 Sep 2006 13:28:06 -0700 (PDT)
Subject: [antlr-interest] Switching keywords
In-Reply-To: <44FDCDA4.9010407@cs.utah.edu>
Message-ID: <20060905202806.52692.qmail@web55901.mail.re3.yahoo.com>

I'd tend to do the individual keywords as separate rules:

target:
    :    
    { input.LT(1).getText().equals("target") }? TEXT
    ;

and then lump them in a rule

variable
    :
    target
    |
        within
    |
        get
    |
        set
    ;

and then

v = keyword

to replace the subrule in rule1.  Or you could just do

{ input.LT(1).getText().equals("target"}?  v = TEXT
|
    { input.LT(1).getText().equals("within")}? v = TEXT
...

or even just do one horrible looking sempred.

--Loring

Sean Walton <swalton at cs.utah.edu> wrote: Sean Walton wrote:
> I mean "'A' statements are embedded in 'B' programs".
> Thanks for the tip.  I am using 3.0 -- would 
> "input.LT(1).getText().equals("includes")}?" be a reasonable solution?
> -Sean
Here's a more specific example.  Could you help me with the variable?

rule1
    : (v='target' | v='within' | v='get' | v='set') '(' identifier ')'
            -> ^(RULE_MODULE $v identifier)
    ;


-Sean


 		
---------------------------------
How low will we go? Check out Yahoo! Messenger?s low  PC-to-Phone call rates.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060905/534625ef/attachment.html 

From timothyjwashington at yahoo.ca  Tue Sep  5 15:47:16 2006
From: timothyjwashington at yahoo.ca (Timothy Washington)
Date: Tue, 5 Sep 2006 18:47:16 -0400 (EDT)
Subject: [antlr-interest] Syntactic predicate - simple case
Message-ID: <20060905224716.84000.qmail@web30309.mail.mud.yahoo.com>


Hey all, I'm trying to write some lexer rules for XML
<starttag> and <emtytag/>. Now both tags can start
with "<tag (attr)*". A start tag ends with ">" while
an empty tag ends with "/>". Having similar lexer
rules for both gives me a lexical non-determinism for
the first chunk of text. I think I can use a syntactic
predicate for this problem, but I'm still getting
errors with the following syntax:

I'missing something basic here. If I want to match on
the ">" for the EMTYTAG, should my rule look like A.
B. or C.

A.        ( STARTCHUNK (WS)? "/>" )=> 	g:( STARTCHUNK
(WS)? "/>" ) 
B.        ( STARTCHUNK )=> 				g:( STARTCHUNK (WS)?
"/>" ) 
C.        ( STARTCHUNK )=> 				g:( "/>" ) 



Lexer Rules: 
EMPTYTAG: 
        ( STARTCHUNK (WS)? "/>" )=> g:( STARTCHUNK
(WS)? "/>" )  	//*** line 150
        { System.out.println("EMTYTAG: "+g.getText());
 };

STARTTAG: 
        ( STARTCHUNK (WS)? '>' )=> g:( STARTCHUNK
(WS)? '>' ) 
        { System.out.println("STARTTAG:
"+g.getText()); };

STARTCHUNK:	
        ( '<' g:NAME ( WS )? ( ATTR ( WS )? )* )      

        { System.out.println("STARTCHUNK:
"+g.getText()); } ;


Errors:
grammar/bookkeeping.lexer.g: warning:lexical
nondeterminism between rules EMPTYTAG and STARTCHUNK
upon
...
grammar/bookkeeping.lexer.g: warning:lexical
nondeterminism between rules EMPTYTAG and STARTTAG
upon
...
grammar/bookkeeping.lexer.g: warning:lexical
nondeterminism between rules STARTCHUNK and STARTTAG
upon
...
grammar/bookkeeping.lexer.g:150: warning:Syntactic
predicate ignored for single alternative ()


Tim



__________________________________________________
Do You Yahoo!?
Tired of spam?  Yahoo! Mail has the best spam protection around 
http://mail.yahoo.com 

From antlr-list at arizona-software.ch  Tue Sep  5 20:54:55 2006
From: antlr-list at arizona-software.ch (Jean Bovet)
Date: Tue, 5 Sep 2006 20:54:55 -0700
Subject: [antlr-interest] ANTLRWorks 1.0b2 released
Message-ID: <9F604FB3-6DDC-41C3-8776-E74AE46CC61F@arizona-software.ch>

Hello,

I've just released AW 1.0b2 with the following changes:

- clear console status message when console is cleared
- save automatically the position and size of each project's window
- new startup option: open last saved document, open all opened  
documents when ANTLRWorks was closed

- fixed a bug where the cursor highlighting couldn't be turned off
- fixed a bug in text rendering that prevented the cursor to be  
positioned at the correct location
- fixed a bug in the text rendering that prevented the selected text  
to be highlighted correctly

I'm still working on some requested features so stay tuned ;-)

It can be downloaded as usual here:

http://www.antlr.org/works/index.html

Regards,

Jean


From lgcraymer at yahoo.com  Tue Sep  5 22:20:57 2006
From: lgcraymer at yahoo.com (Loring Craymer)
Date: Tue, 5 Sep 2006 22:20:57 -0700 (PDT)
Subject: [antlr-interest] Syntactic predicate - simple case
In-Reply-To: <20060905224716.84000.qmail@web30309.mail.mud.yahoo.com>
Message-ID: <20060906052057.37111.qmail@web55915.mail.re3.yahoo.com>

1.) With ANTLR 2, STARTCHUNK should be a "protected" rule; with ANTLR 3, it should be a "fragment.

2.)  synpreds distinguish alternatives--you need a rule that looks something like

CHUNK
    :
    ( STARTCHUNK (WS)? "/>" )=> ( STARTCHUNK(WS)? "/>" ) 
        { $setType(EMTYTAG); }
    |
       ( STARTCHUNK (WS)? '>' ) 
        { $setType(STARTTAG); }
    ;

but it is still better to simply left factor:

LCHUNK
    :
    STARTCHUNK (WS)?
    (    "/>"     { $setType(EMTYTAG); }
        |
            '>'     { $setType(STARTTAG); }
    ;

--Loring

Timothy Washington <timothyjwashington at yahoo.ca> wrote: 
Hey all, I'm trying to write some lexer rules for XML
 and . Now both tags can start
with "" while
an empty tag ends with "/>". Having similar lexer
rules for both gives me a lexical non-determinism for
the first chunk of text. I think I can use a syntactic
predicate for this problem, but I'm still getting
errors with the following syntax:

I'missing something basic here. If I want to match on
the ">" for the EMTYTAG, should my rule look like A.
B. or C.

A.        ( STARTCHUNK (WS)? "/>" )=>  g:( STARTCHUNK
(WS)? "/>" ) 
B.        ( STARTCHUNK )=>     g:( STARTCHUNK (WS)?
"/>" ) 
C.        ( STARTCHUNK )=>     g:( "/>" ) 



Lexer Rules: 
EMPTYTAG: 
        ( STARTCHUNK (WS)? "/>" )=> g:( STARTCHUNK
(WS)? "/>" )   //*** line 150
        { System.out.println("EMTYTAG: "+g.getText());
 };

STARTTAG: 
        ( STARTCHUNK (WS)? '>' )=> g:( STARTCHUNK
(WS)? '>' ) 
        { System.out.println("STARTTAG:
"+g.getText()); };

STARTCHUNK: 
        ( '<' g:NAME ( WS )? ( ATTR ( WS )? )* )      

        { System.out.println("STARTCHUNK:
"+g.getText()); } ;


Errors:
grammar/bookkeeping.lexer.g: warning:lexical
nondeterminism between rules EMPTYTAG and STARTCHUNK
upon
...
grammar/bookkeeping.lexer.g: warning:lexical
nondeterminism between rules EMPTYTAG and STARTTAG
upon
...
grammar/bookkeeping.lexer.g: warning:lexical
nondeterminism between rules STARTCHUNK and STARTTAG
upon
...
grammar/bookkeeping.lexer.g:150: warning:Syntactic
predicate ignored for single alternative ()


Tim



__________________________________________________
Do You Yahoo!?
Tired of spam?  Yahoo! Mail has the best spam protection around 
http://mail.yahoo.com 


 		
---------------------------------
 All-new Yahoo! Mail - Fire up a more powerful email and get things done faster.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060905/0898f104/attachment.html 

From ilia at obnovlenie.ru  Wed Sep  6 02:38:39 2006
From: ilia at obnovlenie.ru (Ilia Kantor)
Date: Wed, 6 Sep 2006 13:38:39 +0400
Subject: [antlr-interest] ANTLRWorks 1.0b2 released
In-Reply-To: <9F604FB3-6DDC-41C3-8776-E74AE46CC61F@arizona-software.ch>
References: <9F604FB3-6DDC-41C3-8776-E74AE46CC61F@arizona-software.ch>
Message-ID: <200609061338.39519.ilia@obnovlenie.ru>


Cool! I really love AW.

Is undo/redo going to work in AW IDEA plugin ?

>
> I've just released AW 1.0b2 with the following changes:
>
> - clear console status message when console is cleared
> - save automatically the position and size of each project's window
> - new startup option: open last saved document, open all opened
> documents when ANTLRWorks was closed
>
> - fixed a bug where the cursor highlighting couldn't be turned off
> - fixed a bug in text rendering that prevented the cursor to be
> positioned at the correct location
> - fixed a bug in the text rendering that prevented the selected text
> to be highlighted correctly
>
> I'm still working on some requested features so stay tuned ;-)
>
> It can be downloaded as usual here:
>
> http://www.antlr.org/works/index.html
>
> Regards,
>
> Jean

From prashant.deva at gmail.com  Wed Sep  6 05:08:43 2006
From: prashant.deva at gmail.com (Prashant Deva)
Date: Wed, 6 Sep 2006 05:08:43 -0700
Subject: [antlr-interest] Tutorial on using ANTLR while creating IDEs on top
	of Eclipse
Message-ID: <41fed8f80609060508g5eaeffa2l16da5e4a72544bee@mail.gmail.com>

I am publishing a 3 part series on IBM developerworks that describe how to
create commercial quality IDEs on top of Eclipse.
I also talk about the internals of ANTLR Studio to provide a case study for
commercial quality IDEs.

ANTLR is used significantly to recognize the text in the editor.

If you are planning to use ANTLR to create an editor for Eclipse and cant
figure out how to go about providing code complete, etc or want to know to
use ANTLR in your IDEs in a more general way or just want to learn pure IDE
design, this might be just for you.

Find the tutorial at -
http://www-128.ibm.com/developerworks

Click on 'Creating Commercial quality Eclipse plug-ins'.
Note that I have had a talk with the IBM guys and they might have renamed
the tutorial to 'Creating Commercial quality Eclipse IDEs' by the time you
read this.

Feedback is welcome :)
-- 
Prashant Deva
Creator, ANTLR Studio
Founder, Placid Systems, www.placidsystems.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060906/75c5a708/attachment-0001.html 

From prashant.deva at gmail.com  Wed Sep  6 05:41:03 2006
From: prashant.deva at gmail.com (Prashant Deva)
Date: Wed, 6 Sep 2006 05:41:03 -0700
Subject: [antlr-interest] Tutorial on using ANTLR while creating IDEs on
	top of Eclipse
In-Reply-To: <OFC8BE93D5.E3FA5F44-ONC12571E1.0044F37C-C12571E1.004544E6@Axi.be>
References: <41fed8f80609060508g5eaeffa2l16da5e4a72544bee@mail.gmail.com>
	<OFC8BE93D5.E3FA5F44-ONC12571E1.0044F37C-C12571E1.004544E6@Axi.be>
Message-ID: <41fed8f80609060541sf063409l74435fd690cdd4a1@mail.gmail.com>

Hi Michiel,

* (How) can I download the complete series at once?
>    I can only find something like "print this page" on a per page bases.
>

Currently only the first part has been published by IBM. the second and
third parts should be published in the coming weeks.

As for downloading the tutorial, once you sign in, you will find a link on
the right which allows you to download the entire tutorial as a pdf file.

* Furthermore I can only find Part 1 by following the specified link.
>    Am I too hasty or missing something?
>

Currently only the first part has been published.


-- 
Prashant Deva
Creator, ANTLR Studio
Founder, Placid Systems, www.placidsystems.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060906/f649c2fc/attachment.html 

From dave at badgers-in-foil.co.uk  Wed Sep  6 06:37:22 2006
From: dave at badgers-in-foil.co.uk (David Holroyd)
Date: Wed, 6 Sep 2006 13:37:22 +0000
Subject: [antlr-interest] ANTLR 3 & hidden token management?
In-Reply-To: <20060806201734.GC29734@badgers-in-foil.co.uk>
References: <20060806171038.GB29734@badgers-in-foil.co.uk>
	<5DEEF0F3-3731-4778-A267-0666078C218C@cs.usfca.edu>
	<20060806201734.GC29734@badgers-in-foil.co.uk>
Message-ID: <20060906133722.GB5800@badgers-in-foil.co.uk>

On Sun, Aug 06, 2006 at 08:17:34PM +0000, David Holroyd wrote:
> Having to potentially update startIndex/endIndex values in the whole
> tree on insertion/deletion sounds a bit hairy.  Does this leave me
> needing custom, linked-list Tree/Token implementations?

I went ahead and implemented something along these lines.  The code is a
bit hairy still:

  http://svn.badgers-in-foil.co.uk/metaas/trunk/src/java/uk/co/badgersinfoil/metaas/impl/antlr/

These class allow me to parse a document in my chosen language, insert
new nodes into the AST, and then simply seralize the updated list of
tokens back to a stream (given huge efforts by the application to insert
all the extra non-AST tokens, of course).

I hope that's of use to someone else one day :)


ta,
dave

-- 
http://david.holroyd.me.uk/

From amohombe at yahoo.com  Wed Sep  6 07:15:34 2006
From: amohombe at yahoo.com (Ahmed Mohombe)
Date: Wed, 06 Sep 2006 16:15:34 +0200
Subject: [antlr-interest] Tutorial on using ANTLR while creating IDEs on
	top of Eclipse
In-Reply-To: <41fed8f80609060508g5eaeffa2l16da5e4a72544bee@mail.gmail.com>
References: <41fed8f80609060508g5eaeffa2l16da5e4a72544bee@mail.gmail.com>
Message-ID: <edml64$c5d$1@sea.gmane.org>

> Find the tutorial at -
> http://www-128.ibm.com/developerworks
Requires registration :).

Ahmed.


From timothyjwashington at yahoo.ca  Wed Sep  6 08:37:44 2006
From: timothyjwashington at yahoo.ca (Timothy Washington)
Date: Wed, 6 Sep 2006 11:37:44 -0400 (EDT)
Subject: [antlr-interest] Syntactic predicate - simple case
In-Reply-To: <20060906052057.37111.qmail@web55915.mail.re3.yahoo.com>
Message-ID: <20060906153744.10780.qmail@web30305.mail.mud.yahoo.com>


--- Loring Craymer <lgcraymer at yahoo.com> wrote:

> 1.) With ANTLR 2, STARTCHUNK should be a "protected"
> rule; with ANTLR 3, it should be a "fragment.
> 
> 2.)  synpreds distinguish alternatives--you need a
> rule that looks something like
> 
> CHUNK
>     :
>     ( STARTCHUNK (WS)? "/>" )=> ( STARTCHUNK(WS)?
> "/>" ) 
>         { $setType(EMTYTAG); }
>     |
>        ( STARTCHUNK (WS)? '>' ) 
>         { $setType(STARTTAG); }
>     ;
> 
> but it is still better to simply left factor:
> 
> LCHUNK
>     :
>     STARTCHUNK (WS)?
>     (    "/>"     { $setType(EMTYTAG); }
>         |
>             '>'     { $setType(STARTTAG); }
>     ;
> 
> --Loring

Yes yes, this works. The systactic predicate makes
more sense now. Thanks very much Loring. 

Tim



__________________________________________________
Do You Yahoo!?
Tired of spam?  Yahoo! Mail has the best spam protection around 
http://mail.yahoo.com 

From parrt at cs.usfca.edu  Wed Sep  6 11:27:49 2006
From: parrt at cs.usfca.edu (Terence Parr)
Date: Wed, 6 Sep 2006 11:27:49 -0700
Subject: [antlr-interest] ANTLR 2.7.7 release candidate 1
Message-ID: <23A812AF-EBE0-47D2-A65D-3B3190867F9A@cs.usfca.edu>

Get it while it's hot:

http://www.antlr.org/download/antlr-2.7.7rc1.tar.gz

I want to go out the door tomorrow with final. Only some bug fixes in  
this release and we just need to see how badly I've messed up the  
distribution file ;)

Ter

From laomao at jaxwiki.net  Wed Sep  6 19:42:35 2006
From: laomao at jaxwiki.net (Jun Lu)
Date: Wed, 6 Sep 2006 22:42:35 -0400
Subject: [antlr-interest] Grammar file for HTML template
Message-ID: <e9ff57410609061942x3fbda4b5oe034cab4413afa5b@mail.gmail.com>

Hi,

I am thinking to start an open source project of PhpBB Java clone. I
want to take advantage of the available PhpBB templates, languages and
images.

One problem is how to convert phpBB templates into some form of Java
or JSP. A sample template (tpl file) is attached below.

There are 3 patterns I need to deal with.
1. variables: {[A-Z_]+}  : replaced with a bean property
2. loop: <!-- BEGIN [a-z_]+_rows --> ....   <!-- END [a-z_]+_rows -->
: replaced with array of beans
3. condition:    <!-- BEGIN switch_[a-z_]+ --> ...   <!-- END
switch_[a-z_]+ --> : replaced with "if (..)"

I am new to Antlr. I am not sure if this makes sense.

Can anyone help me find a sample grammar file of this kind so I can
continue to work on?

Any opinions on would be appreciated.

Mao



<tr>
    <th class="thHead" colspan="2">{L_ADD_A_POLL}</th>
   </tr>
   <tr>
    <td class="row1" colspan="2"><span
class="gensmall">{L_ADD_POLL_EXPLAIN}</span></td>
   </tr>
   <tr>
    <td class="row1"><span class="gen"><b>{L_POLL_QUESTION}</b></span></td>
    <td class="row2"><span class="genmed"><input type="text"
name="poll_title" size="50" maxlength="255" class="post"
value="{POLL_TITLE}" /></span></td>
   </tr>
   <!-- BEGIN poll_option_rows -->
   <tr>
    <td class="row1"><span class="gen"><b>{L_POLL_OPTION}</b></span></td>
    <td class="row2"><span class="genmed"><input type="text"
name="poll_option_text[{poll_option_rows.S_POLL_OPTION_NUM}]"
size="50" class="post" maxlength="255"
value="{poll_option_rows.POLL_OPTION}" /></span> &nbsp;<input
type="submit" name="edit_poll_option" value="{L_UPDATE_OPTION}"
class="liteoption" /> <input type="submit"
name="del_poll_option[{poll_option_rows.S_POLL_OPTION_NUM}]"
value="{L_DELETE_OPTION}" class="liteoption" /></td>
   </tr>
   <!-- END poll_option_rows -->
   <tr>
    <td class="row1"><span class="gen"><b>{L_POLL_OPTION}</b></span></td>
    <td class="row2"><span class="genmed"><input type="text"
name="add_poll_option_text" size="50" maxlength="255" class="post"
value="{ADD_POLL_OPTION}" /></span> &nbsp;<input type="submit"
name="add_poll_option" value="{L_ADD_OPTION}" class="liteoption"
/></td>
   </tr>
   <tr>
    <td class="row1"><span class="gen"><b>{L_POLL_LENGTH}</b></span></td>
    <td class="row2"><span class="genmed"><input type="text"
name="poll_length" size="3" maxlength="3" class="post"
value="{POLL_LENGTH}" /></span>&nbsp;<span
class="gen"><b>{L_DAYS}</b></span> &nbsp; <span
class="gensmall">{L_POLL_LENGTH_EXPLAIN}</span></td>
   </tr>
   <!-- BEGIN switch_poll_delete_toggle -->
   <tr>
    <td class="row1"><span class="gen"><b>{L_POLL_DELETE}</b></span></td>
    <td class="row2"><input type="checkbox" name="poll_delete" /></td>
   </tr>
   <!-- END switch_poll_delete_toggle -->

From cvrebert at gmail.com  Wed Sep  6 21:54:52 2006
From: cvrebert at gmail.com (Chris Rebert)
Date: Wed, 06 Sep 2006 21:54:52 -0700
Subject: [antlr-interest] newbie Q: infinite recursion in grammar
Message-ID: <44FFA61C.5030904@gmail.com>

Hello.

This is probably a newbie question, but with my grammar
(http://home.mindspring.com/~krebert/iguana.g), I get a bunch of errors
of the form:

"infinite recursion to rule expr from rule $some_grammar_production"

when running ANTLR on it.
I think this has something to do with precedence in my grammar.
I couldn't find any way to set the precedence of grammar rules like I
can in yacc in the docs.
If it's not possible to set precedence in this way, could someone advise
me (roughly) as to how I need to restructure my grammar?

Thank you for taking the time to read this.

- Chris R.

From kroepke at classdump.org  Wed Sep  6 23:56:17 2006
From: kroepke at classdump.org (Kay Roepke)
Date: Thu, 7 Sep 2006 08:56:17 +0200
Subject: [antlr-interest] newbie Q: infinite recursion in grammar
In-Reply-To: <44FFA61C.5030904@gmail.com>
References: <44FFA61C.5030904@gmail.com>
Message-ID: <81BF0015-8ABF-4D04-80D6-FD12555506A5@classdump.org>

Hi Chris!

On 7. Sep 2006, at 6:54 Uhr, Chris Rebert wrote:

> "infinite recursion to rule expr from rule $some_grammar_production"
>
> when running ANTLR on it.
> I think this has something to do with precedence in my grammar.

Actually, it has to do with the (non-immediate) left recursion  
involving expr and type.
I didn't check for other left recursion, but the same principle applies.

If you've got the Dragon Book (Compilers - Principles, Techniques,  
and Tools by Aho et al) check out
Chapter 2.4 Heading "Left Recursion", Chapter 2.5 and Chapter 4.3  
"Elimination of Left Recursion". If you don't, get it ;)
(Or look for those terms on Google, there should be a lot of material  
available.)
Anyway, here's the gist of it:

If you've got a rule like
	expr : expr "+" term | term;
it is left-recursive and cannot be recognized by a LL recursive- 
descent parser like ANTLR. This is because
expr would end up calling itself, being on the left edge of the rule,  
endlessly and eventually you'd run out of
stack space.
A solution to this is to restructure like this:
	expr : term expr_dash;
	expr_dash : "+" term expr_dash | /* empty */;
or alternatively without recursion:
	expr : term ("+" term)*
The problem with it is that + will not be left-associative anymore,  
but instead right-associative, if you generate trees.
Big Pain here. But you could stick the action inside the ("+" term)*  
loop and calculate the value like this (as an example to achieve
left-associativity, a bit contrived, but still ;) ):
	expr : t:term {sum = $t.somehowGetValueHere(); }("+" t1:term { sum  
+= $t1.somehowGetValueHere();})*

In your case, you have the really nasty case of indirect left- 
recursion, in that it takes a couple rule invocations to complete
for the recursion to appear.
This, naturally, is a bit more difficult to solve. I'm not gonna  
write down the algorithm here, since it is available on the net (and I'm
a lazy SOB and have a serious lack of coffee :)) See http:// 
web.cs.wpi.edu/~kal/courses/compilers/module2/mytopdown.html (at the  
end of
Section 2.1.2) for an example. This just popped out of Google, I'm  
sure there are better presentations to be found (maybe even at  
wikipedia *shudder*).

> I couldn't find any way to set the precedence of grammar rules like I
> can in yacc in the docs.
> If it's not possible to set precedence in this way, could someone  
> advise
> me (roughly) as to how I need to restructure my grammar?

As I outlined above, precedence in LL-grammars is determined with the  
direction of recursion (right-recursion yields right-associativity).
There is no mechanism to spell out precendence rules like in bison/yacc.
Since left-recursion isn't possible, you'll have to hack around it  
(unless Ter has a really smart idea *wink* ;))

Somehow this got more verbose than I intended it to be, but maybe it  
will help and is not completely wrong, considering the aforementioned  
lack
of fuel, err, coffee.

Good morning :),

-k
-- 
Kay R?pke <kroepke at classdump.org>
classdump Software
Key fingerprint = A849 0F2C C322 4022 379E  8661 7E1B FE0D 4CD2 A6D0




From sandy.pec at gmail.com  Thu Sep  7 01:31:12 2006
From: sandy.pec at gmail.com (Sandeep Gupta)
Date: Thu, 7 Sep 2006 14:01:12 +0530
Subject: [antlr-interest] Newbie Ques: How to remove mutual left-recursion
	among rules
Message-ID: <6368ffc60609070131o56494971o793b470ca26a6899@mail.gmail.com>

I have the following rules, which throw a mutual left-recursion with other
rules. I am unable to figure out how to solve this problem.

fragment choiceLists
    :    cp ( '|' contentParticle )+
    ;

fragment sequenceLists
    :    contentParticle ( ',' contentParticle)*
    ;

fragment contentParticle
    :    (name | choiceLists | sequenceLists) Qualifier?
    ;


- Sandeep
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060907/67c9c025/attachment.html 

From sandy.pec at gmail.com  Thu Sep  7 02:31:58 2006
From: sandy.pec at gmail.com (Sandeep Gupta)
Date: Thu, 7 Sep 2006 15:01:58 +0530
Subject: [antlr-interest] Newbie Ques: How to remove mutual
	left-recursion among rules
In-Reply-To: <6368ffc60609070131o56494971o793b470ca26a6899@mail.gmail.com>
References: <6368ffc60609070131o56494971o793b470ca26a6899@mail.gmail.com>
Message-ID: <6368ffc60609070231v504ae262tf7df1a5c32899bf7@mail.gmail.com>

I apologize for the rules mentioned in the previous mail were wrongly
specified. The rules should have been

fragment choiceLists
    :    '(' contentParticle ( '|' contentParticle )+ ')'
    ;

fragment sequenceLists
    :    '(' contentParticle ( ',' contentParticle )* ')'
    ;

fragment contentParticle
    :    (name | choiceLists | sequenceLists) Qualifier?
    ;

I have tried using the algorithm quoted at
http://web.cs.wpi.edu/~kal/courses/compilers/images/PLTelralgorithm.gif but
to no avail. Can any one guide me how to remove such mutual left-recursions
and also how to handle the + and * qualifiers for it.

- Sandeep
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060907/a809a43c/attachment.html 

From jbb at acm.org  Thu Sep  7 06:03:56 2006
From: jbb at acm.org (John B. Brodie)
Date: Thu, 07 Sep 2006 09:03:56 -0400
Subject: [antlr-interest] Newbie Ques: How to remove
 mutual	left-recursion among rules
In-Reply-To: <6368ffc60609070231v504ae262tf7df1a5c32899bf7@mail.gmail.com>
	(message from Sandeep Gupta on Thu, 07 Sep 2006 15:01:58 +0530)
References: <6368ffc60609070131o56494971o793b470ca26a6899@mail.gmail.com>
	<6368ffc60609070231v504ae262tf7df1a5c32899bf7@mail.gmail.com>
Message-ID: <E1GLJXw-0000XL-00@gecko>

Hi!

Sandeep Gupta wrote:
>I apologize for the rules mentioned in the previous mail were wrongly
>specified. The rules should have been
>
>fragment choiceLists
>    :    '(' contentParticle ( '|' contentParticle )+ ')'
>    ;
>
>fragment sequenceLists
>    :    '(' contentParticle ( ',' contentParticle )* ')'
>    ;
>
>fragment contentParticle
>    :    (name | choiceLists | sequenceLists) Qualifier?
>    ;
>
>I have tried using the algorithm quoted at
>http://web.cs.wpi.edu/~kal/courses/compilers/images/PLTelralgorithm.gif but
>to no avail. Can any one guide me how to remove such mutual left-recursions
>and also how to handle the + and * qualifiers for it.

When running the org.antlr.Tool on the above rules, the tool suggests
left-factoring. so lets do that. e.g. we should merge the two list rules:

list :'(' contentParticle (choiceTail | sequenceTail) ')' ;

choiceTail : ( '|' contentParticle )+ ;

sequenceTail : ( ',' contentParticle )* ;

contentParticle : (name | list) Qualifier? ;




or maybe this would build a better tree:

list
    :'('! contentParticle
        ( ( '|'^^ contentParticle )+
        | ( ','^^ contentParticle )*
        ) ')'!
    ;


Hope this helps...
   -jbb

From heuer at semagia.com  Thu Sep  7 06:17:20 2006
From: heuer at semagia.com (Lars Heuer)
Date: Thu, 7 Sep 2006 15:17:20 +0200
Subject: [antlr-interest] Grammar file for HTML template
In-Reply-To: <e9ff57410609061942x3fbda4b5oe034cab4413afa5b@mail.gmail.com>
References: <e9ff57410609061942x3fbda4b5oe034cab4413afa5b@mail.gmail.com>
Message-ID: <1057053137.20060907151720@semagia.com>

Hi Jun,

[...]
> One problem is how to convert phpBB templates into some form of Java
> or JSP. A sample template (tpl file) is attached below.

> There are 3 patterns I need to deal with.
> 1. variables: {[A-Z_]+}  : replaced with a bean property
> 2. loop: <!-- BEGIN [a-z_]+_rows --> ....   <!-- END [a-z_]+_rows -->
> : replaced with array of beans
> 3. condition:    <!-- BEGIN switch_[a-z_]+ --> ...   <!-- END
> switch_[a-z_]+ --> : replaced with "if (..)"

> Any opinions on would be appreciated.

Since the templates look like [PHPLib] templates, I'd use some RegExes
and wouldn't use ANTLR at all. Look into the [template] class of the
PHPLib.

[PHPLib] http://phplib.sf.net/
[template] <http://phplib.cvs.sourceforge.net/phplib/php-lib-stable/php/template.inc?revision=1.15&view=markup>

Best regards,
Lars
-- 
http://www.semagia.com


From timothyjwashington at yahoo.ca  Thu Sep  7 07:26:50 2006
From: timothyjwashington at yahoo.ca (Timothy Washington)
Date: Thu, 7 Sep 2006 10:26:50 -0400 (EDT)
Subject: [antlr-interest] Solving Lexical Non-Determinism
Message-ID: <20060907142650.86112.qmail@web30309.mail.mud.yahoo.com>


Hey all, this is more of a strategic question I guess.
I want to be able to recognise an entire block of XML
via my lexer. However, I have some lexical
non-determinism between the XML block rule (
TOKEN_LITERAL ) and it's sub-components. And it makes
sense that upon encountering an xml declaration, for
example, does the lexer start to match on the 'PI' or
the 'TOKEN_LITERAL' rule. Is there a way to make
TOKEN_LITERAL a block of all it's sub-components - the
() brackets are not sufficient in this case: 

warnings:
warning:lexical nondeterminism between rules PI and
TOKEN_LITERAL
warning:lexical nondeterminism between rules EMPTYTAG
and TOKEN_LITERAL
warning:lexical nondeterminism between rules STARTTAG
and TOKEN_LITERAL

rule:
TOKEN_LITERAL:
    (
        (PI)?   
        (       
            ( STARTTAG 
                ( WS |  PI   | COMMENT  | CDATABLOCK  
)* 
                (TOKEN_LITERAL)*
            ENDTAG )
            |       
            (EMPTYTAG)
        )       
    ) 
    { System.out.println("TOKEN LITERAL >>> Lexer");
}; 


Tim


__________________________________________________
Do You Yahoo!?
Tired of spam?  Yahoo! Mail has the best spam protection around 
http://mail.yahoo.com 

From stuart.dootson at gmail.com  Thu Sep  7 11:17:36 2006
From: stuart.dootson at gmail.com (Stuart Dootson)
Date: Thu, 7 Sep 2006 19:17:36 +0100
Subject: [antlr-interest] Problem with ANTLRWorks debugger?
Message-ID: <8b56cad40609071117u27a83959ka172b48ab45d6cc0@mail.gmail.com>

I've downloaded ANTLRworks 1.0ea11, beta 1 and beta 2 and, while the
overall experience has been extremely favourable (I wish I'd had it
when I was starting with Antlr 2!), I've had the same problem in each
- either I'm misunderstanding how I should be using the ANTLRworks
debugger, or there's a problem with it.

Anyway - my problem. I have a simple grammar (shown below) that I've
been using to investigate ANTLR 3 and the tree rewriting rules (which
is where ANTLRWorks 1.0b2 debugger's AST display would be handy!).
When I feed it the sample text (also shown below) using the
interpreter, everything's tickety-boo and I get the output I expect.
However, feeding it the same text through the debugger leads to
whitespace raising a MismatchedTokenException. It strikes me that
there's no way of telling the debugger which tokens (i.e. WS!) to
ignore?

BTW - tested on Windows 2000 and OS X. Also BTW, on OS X, the
File->Save As... doesn't appear to work - no panel pops up, anyway.

And a feature request - will there be any way of displaying an output
AST with ANTLRworks that doesn't use the debugger. If not, could you
make it so, please :-)

Stuart Dootson

-------------------- Cut here - grammar --------------------
grammar Classes;

options {output=AST;}

tokens { CLASS; VARS; METHS; }

classes
       : (classDecl ';')+
       ;

classDecl
       : 'class' name=ID 'is'
            ((v+=varDecl | m+=methodDecl) ';')*
         'end' ID?
         -> ^(CLASS $name ^(VARS $v) ^(METHS $m) )
       ;

varDecl
       : ID ':' modifiers? ID
       ;

methodDecl
       : ID '(' (argDecl (';' argDecl)* )? ')'('returns' ID)?
       ;

argDecl
       : ID ':' ('in' | 'out' | 'in' 'out') ID
       ;

modifiers
       : 'const'
       | 'volatile'
       ;

ID      : ('a'..'z'|'A'..'Z') ('a'..'z'|'A'..'Z'|'_'|'0'..'9')*
       ;

WS
       : ( ' ' | '\t' | '\f' ) +
       | ( '\r' '\n' | '\n' )
       { channel=99; }
       ;
-------------------- Cut here - grammar --------------------


----------------- Cut here - sample input ------------------
class Pooh is
  a : x;
  y : b;
  b() returns fff;
  b(a : in x;b : out y;c : in out z) returns df;
end Pooh;
----------------- Cut here - sample input ------------------

From prashant.deva at gmail.com  Thu Sep  7 11:34:03 2006
From: prashant.deva at gmail.com (Prashant Deva)
Date: Thu, 7 Sep 2006 11:34:03 -0700
Subject: [antlr-interest] Tutorial on using ANTLR while creating IDEs on
	top of Eclipse
In-Reply-To: <edml64$c5d$1@sea.gmane.org>
References: <41fed8f80609060508g5eaeffa2l16da5e4a72544bee@mail.gmail.com>
	<edml64$c5d$1@sea.gmane.org>
Message-ID: <41fed8f80609071134q1ff47247m12b89bbf2d09bb1d@mail.gmail.com>

Yes, the registration is a bit of a problem,
But worry not, you can go to bugmenot.com and type www.ibm.com to get a
id/password.

Here is one which works -
id: yonofui at hotmail.com
pass: mantramantra

I hope the IBM guys dont have any trouble with me posting this ;)

On 9/6/06, Ahmed Mohombe <amohombe at yahoo.com> wrote:
>
> > Find the tutorial at -
> > http://www-128.ibm.com/developerworks
> Requires registration :).
>
> Ahmed.
>
>


-- 
Prashant Deva
Creator, ANTLR Studio
Founder, Placid Systems, www.placidsystems.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060907/e40abd3d/attachment-0001.html 

From parrt at cs.usfca.edu  Thu Sep  7 17:08:31 2006
From: parrt at cs.usfca.edu (Terence Parr)
Date: Thu, 7 Sep 2006 17:08:31 -0700
Subject: [antlr-interest] little languages for antlr book
Message-ID: <590F3FB9-98F6-47FC-9DAE-F575A292209B@cs.usfca.edu>

Howdy,

So, we need a bunch of small domain specific languages for the antlr  
book.  I'm thinking of things on the level of config files (no XML  
for this!), simple XML, a simple interpreted language, simple  
graphics language, java -> class hierarchy generator (using DOT  
format), ...

Care to suggest some simple languages or simple tasks on languages  
for which grammars are available?

Thanks,
Ter

From cvrebert at gmail.com  Thu Sep  7 17:16:38 2006
From: cvrebert at gmail.com (Chris Rebert)
Date: Thu, 07 Sep 2006 17:16:38 -0700
Subject: [antlr-interest] newbie Q: infinite recursion in grammar
In-Reply-To: <81BF0015-8ABF-4D04-80D6-FD12555506A5@classdump.org>
References: <44FFA61C.5030904@gmail.com>
	<81BF0015-8ABF-4D04-80D6-FD12555506A5@classdump.org>
Message-ID: <4500B666.5080606@gmail.com>

Darn. Hmmm. In that case, could someone point me to a parser (if any) 
that could parse this?
Or does anyone else have some advice? I really would like to stick with 
ANTLR if possible.

Thanks.

- Chris R.

Kay Roepke wrote:
> Hi Chris!
> 
> On 7. Sep 2006, at 6:54 Uhr, Chris Rebert wrote:
> 
>> "infinite recursion to rule expr from rule $some_grammar_production"
>>
>> when running ANTLR on it.
>> I think this has something to do with precedence in my grammar.
> 
> Actually, it has to do with the (non-immediate) left recursion involving 
> expr and type.
> I didn't check for other left recursion, but the same principle applies.
> 
> If you've got the Dragon Book (Compilers - Principles, Techniques, and 
> Tools by Aho et al) check out
> Chapter 2.4 Heading "Left Recursion", Chapter 2.5 and Chapter 4.3 
> "Elimination of Left Recursion". If you don't, get it ;)
> (Or look for those terms on Google, there should be a lot of material 
> available.)
> Anyway, here's the gist of it:
> 
> If you've got a rule like
>     expr : expr "+" term | term;
> it is left-recursive and cannot be recognized by a LL recursive-descent 
> parser like ANTLR. This is because
> expr would end up calling itself, being on the left edge of the rule, 
> endlessly and eventually you'd run out of
> stack space.
> A solution to this is to restructure like this:
>     expr : term expr_dash;
>     expr_dash : "+" term expr_dash | /* empty */;
> or alternatively without recursion:
>     expr : term ("+" term)*
> The problem with it is that + will not be left-associative anymore, but 
> instead right-associative, if you generate trees.
> Big Pain here. But you could stick the action inside the ("+" term)* 
> loop and calculate the value like this (as an example to achieve
> left-associativity, a bit contrived, but still ;) ):
>     expr : t:term {sum = $t.somehowGetValueHere(); }("+" t1:term { sum 
> += $t1.somehowGetValueHere();})*
> 
> In your case, you have the really nasty case of indirect left-recursion, 
> in that it takes a couple rule invocations to complete
> for the recursion to appear.
> This, naturally, is a bit more difficult to solve. I'm not gonna write 
> down the algorithm here, since it is available on the net (and I'm
> a lazy SOB and have a serious lack of coffee :)) See 
> http://web.cs.wpi.edu/~kal/courses/compilers/module2/mytopdown.html (at 
> the end of
> Section 2.1.2) for an example. This just popped out of Google, I'm sure 
> there are better presentations to be found (maybe even at wikipedia 
> *shudder*).
> 
>> I couldn't find any way to set the precedence of grammar rules like I
>> can in yacc in the docs.
>> If it's not possible to set precedence in this way, could someone advise
>> me (roughly) as to how I need to restructure my grammar?
> 
> As I outlined above, precedence in LL-grammars is determined with the 
> direction of recursion (right-recursion yields right-associativity).
> There is no mechanism to spell out precendence rules like in bison/yacc.
> Since left-recursion isn't possible, you'll have to hack around it 
> (unless Ter has a really smart idea *wink* ;))
> 
> Somehow this got more verbose than I intended it to be, but maybe it 
> will help and is not completely wrong, considering the aforementioned lack
> of fuel, err, coffee.
> 
> Good morning :),
> 
> -k
> --Kay R?pke <kroepke at classdump.org>
> classdump Software
> Key fingerprint = A849 0F2C C322 4022 379E  8661 7E1B FE0D 4CD2 A6D0
> 
> 
> 
> 

From parrt at cs.usfca.edu  Thu Sep  7 17:20:40 2006
From: parrt at cs.usfca.edu (Terence Parr)
Date: Thu, 7 Sep 2006 17:20:40 -0700
Subject: [antlr-interest] newbie Q: infinite recursion in grammar
In-Reply-To: <4500B666.5080606@gmail.com>
References: <44FFA61C.5030904@gmail.com>
	<81BF0015-8ABF-4D04-80D6-FD12555506A5@classdump.org>
	<4500B666.5080606@gmail.com>
Message-ID: <E574A856-B554-47B9-989B-5B9B86F76468@cs.usfca.edu>


On Sep 7, 2006, at 5:16 PM, Chris Rebert wrote:

> Darn. Hmmm. In that case, could someone point me to a parser (if  
> any) that could parse this?
> Or does anyone else have some advice? I really would like to stick  
> with ANTLR if possible.

ANTLRWorks knows how to remove left recursion in every rule of your  
grammar.  Well, the immediately left recursive stuff.

Ter

From kroepke at classdump.org  Thu Sep  7 21:57:04 2006
From: kroepke at classdump.org (Kay Roepke)
Date: Fri, 8 Sep 2006 06:57:04 +0200
Subject: [antlr-interest] newbie Q: infinite recursion in grammar
In-Reply-To: <4500B666.5080606@gmail.com>
References: <44FFA61C.5030904@gmail.com>
	<81BF0015-8ABF-4D04-80D6-FD12555506A5@classdump.org>
	<4500B666.5080606@gmail.com>
Message-ID: <5B516D74-47AD-4CB8-ADF6-60576A76681D@classdump.org>


On 8. Sep 2006, at 2:16 Uhr, Chris Rebert wrote:

> Darn. Hmmm. In that case, could someone point me to a parser (if  
> any) that could parse this?
> Or does anyone else have some advice? I really would like to stick  
> with ANTLR if possible.
Hi Chris,

it isn't that bad, you only have to be aware of the fact. Also take a  
look at the mail by John yesterday.
Alternatively, I would suggest building trees and do your translation/ 
execution from that, after you fix up the tree (See [1] for a good  
abstract on
manually building trees with ANTLR).
Really take a look at the algorithm to remove non-immediate left- 
recursion [2]. It's not really intuitive at first, but
once you play around with a relatively simple example, you get the  
hang of it. Also, use ANTLRWorks to show you the tree that gets built.
And never underestimate the power of pen and paper! :)

[1] http://antlr.org/article/1137964510001/manual.tree.construction.txt
[2] Actually, in this case the wikipedia article <http:// 
en.wikipedia.org/wiki/Left_recursion> gives a pretty good picture of  
it. Who'd have thought?
     It even references a couple of papers that seems pretty good and  
also gives pictures of trees that should help. The second last  
external link
     is pretty much the stuff that's in the Dragon Book, FWIW.

Good luck!

-k
-- 
Kay R?pke <kroepke at classdump.org>
classdump Software
Key fingerprint = A849 0F2C C322 4022 379E  8661 7E1B FE0D 4CD2 A6D0




From mark.venbrux at gmail.com  Thu Sep  7 23:36:14 2006
From: mark.venbrux at gmail.com (Mark Venbrux)
Date: Fri, 8 Sep 2006 08:36:14 +0200
Subject: [antlr-interest] handling include files
Message-ID: <fa6015a20609072336v251bbb65l8aab0b6a751a238e@mail.gmail.com>

Hi,

I figured out a way with little impact to handle include files... But
it is different from the suggested approach in this mailing list. It
is shown in the simple grammar below, so please comment.
An issue that pops up when handling include file is that the source of
an error in the parsed input becomes less clear. So I added an
'ExtCommonToken' class that shows the input source name in its
toString() method.
Is this a decent approach? Or are there better ways?
Cheers,
Mark
-


grammar Simple;
@parser::members {
    	public void reportError(RecognitionException e) {
    		if ( e.input instanceof ANTLRFileStream ) {
    			System.err.print("File: '" +
    					   ((ANTLRFileStream)e.input).getSourceName() +"'");
    		}

    		super.reportError(e);
    	}

}
@lexer::header {
import java.io.IOException;
}
@lexer::members {
        protected java.util.Stack<CharStream> includeStack = new
java.util.Stack<CharStream>();
	public void EnterInclude(CharStream include) {
		includeStack.push(this.input);
		this.input = include;
		skip();
	}

	/** Return a token from this source; i.e., match a token on the char
	 *  stream. Pop the include stack upon EOF.
	 */
	public Token nextToken() {
		// First pop the include stack as far as needed...
		while (input.LA(1) == CharStream.EOF && !includeStack.empty()) {
			input = includeStack.pop();
		}		
		return super.nextToken();
	}
	/** The standard method called to automatically emit a token at the
	 *  outermost lexical rule.  The token object should point into the
	 *  char buffer start..stop.  If there is a text override in 'text',
	 *  use that to set the token's text.
	 */
	public Token emit(int tokenType,
			  int line, int charPosition,
			  int channel,
			  int start, int stop)
	{
		Token t = new ExtCommonToken(input, tokenType, channel, start, stop);
		t.setLine(line);
		t.setText(text);
		t.setCharPositionInLine(charPosition);
		emit(t);
		return t;
	}	
	
    	public void reportError(RecognitionException e) {
    		if ( e.input instanceof ANTLRFileStream ) {
    			System.err.print("File: '" +
 				((ANTLRFileStream)e.input).getSourceName() +"'");
    		}

    		super.reportError(e);
    	}

}
program : (variable)*
        ;
variable: 'int' ID ('=' INT)? ';'
        ;



ID      : ('a'..'z'|'A'..'Z')+ ;
INT     : ('0'..'9')+ ;
WS      : (' '|'\t'|'\n')+ {channel=99;}
        ;
protected
StringLiteral
    :  '"' (  ~('"') )* '"'
    ;


INCLUDE : '#include' WS* fileNameToken=StringLiteral WS* ';' {channel=99;}
{
    String fileName = $fileNameToken.getText().substring(1,
$fileNameToken.getText().length()-1);
    System.out.println("enter include: " + fileName);
    CharStream includedFile = null;
    try {
    	includedFile = new ANTLRFileStream(fileName);
    } catch (IOException e) {
    	e.printStackTrace();
    }
    EnterInclude(includedFile);
}
    ;



-- 
Mvg,
    Mark

From serefarikan at kurumsalteknoloji.com  Fri Sep  8 01:06:36 2006
From: serefarikan at kurumsalteknoloji.com (Seref Arikan)
Date: Fri, 08 Sep 2006 11:06:36 +0300
Subject: [antlr-interest] grammar writing best practices
In-Reply-To: <8b56cad40609071117u27a83959ka172b48ab45d6cc0@mail.gmail.com>
References: <8b56cad40609071117u27a83959ka172b48ab45d6cc0@mail.gmail.com>
Message-ID: <4501248C.1040408@kurumsalteknoloji.com>

Hi there,
Are there any books or documents that can be used as a practical guide 
for writing grammars? I have pretty good resources like the dragon book 
and many other docs, but I have not seen any source that has a 
pragmattic approach to subject
By pragmattic, I mean a systematic approach to task.  Assume that I have 
to produce a mini language, or a domain spesific language. It'd be great 
to have a systematic apporach. Is it to much to ask? The 
analysis-design-development parts of the application lifecycle seems a 
little bit hard to project into grammar writing and generating a parser. 
Some well defined milestones in the process would be a huge asset.
Are there any resources that you'd recommend for such insight? Or should 
I be reading the dragon book again?

Regards
Seref Arikan



-- 
No virus found in this outgoing message.
Checked by AVG Free Edition.
Version: 7.1.405 / Virus Database: 268.12.2/441 - Release Date: 9/7/2006


From timo.du.four at telenet.be  Fri Sep  8 03:45:32 2006
From: timo.du.four at telenet.be (timo.du.four at telenet.be)
Date: Fri, 08 Sep 2006 10:45:32 +0000
Subject: [antlr-interest] (no subject)
Message-ID: <W1173032543124781157712332@nocme1bl6.telenet-ops.be>

Dear ANTLR users,

I am currently doing some research on parser generators for my master-thesis.  I have to find a generator that is able to parse a number of dialects of COBOL.  I already worked with ANTLR for a project last year, so I know it generates a Lexer, a parser and a treeParser.  Now my question is: is it possible to make a generalParser for the cobol-language, for the part of the language that is the same for all dialects, and then make a subclass of it for each dialect. Or is there a better way to do this?

Greetings,

Travin



From timo.du.four at telenet.be  Fri Sep  8 05:15:48 2006
From: timo.du.four at telenet.be (timo.du.four at telenet.be)
Date: Fri, 08 Sep 2006 12:15:48 +0000
Subject: [antlr-interest] working with different dialects
Message-ID: <W1755517639256561157717748@nocme1bl6.telenet-ops.be>

Dear ANTLR users,

(Sorry for the repost, but I corrected a few things in my mail)

I am currently doing some research on parser generators for my master-thesis. I have to find a generator that is able to generate a parser which is able to parse a number of dialects of COBOL. I already worked with ANTLR for a project last year, so I know it generates a Lexer, a Parser and a treeParser. Now my question is: is it possible to make a generalParser for the COBOL-language, for the part of the language that is the same for all dialects, and then make a subclass of it for each dialect. Or is there a better way to do this?

Greetings,

Travin




From gudnabrsam at yahoo.com  Fri Sep  8 07:32:55 2006
From: gudnabrsam at yahoo.com (Matt Benson)
Date: Fri, 8 Sep 2006 07:32:55 -0700 (PDT)
Subject: [antlr-interest] little languages for antlr book
In-Reply-To: <590F3FB9-98F6-47FC-9DAE-F575A292209B@cs.usfca.edu>
Message-ID: <20060908143255.15668.qmail@web55102.mail.re4.yahoo.com>

--- Terence Parr <parrt at cs.usfca.edu> wrote:

> Howdy,
> 
> So, we need a bunch of small domain specific
> languages for the antlr  
> book.  I'm thinking of things on the level of config
> files (no XML  
> for this!), simple XML, a simple interpreted
> language, simple  
> graphics language, java -> class hierarchy generator
> (using DOT  
> format), ...
> 
> Care to suggest some simple languages or simple
> tasks on languages  
> for which grammars are available?

~ how many lines/grammar (lexer + parser) are you
thinking of here?

-Matt

> 
> Thanks,
> Ter
> 


__________________________________________________
Do You Yahoo!?
Tired of spam?  Yahoo! Mail has the best spam protection around 
http://mail.yahoo.com 

From rodrigobamboo at gmail.com  Fri Sep  8 07:34:23 2006
From: rodrigobamboo at gmail.com (Rodrigo B. de Oliveira)
Date: Fri, 8 Sep 2006 11:34:23 -0300
Subject: [antlr-interest] little languages for antlr book
In-Reply-To: <590F3FB9-98F6-47FC-9DAE-F575A292209B@cs.usfca.edu>
References: <590F3FB9-98F6-47FC-9DAE-F575A292209B@cs.usfca.edu>
Message-ID: <5917478b0609080734o4725585etb7d20ea181eefe6b@mail.gmail.com>

YAML (http://www.yaml.org/)

On 9/7/06, Terence Parr <parrt at cs.usfca.edu> wrote:
> Howdy,
>
> So, we need a bunch of small domain specific languages for the antlr
> book.  I'm thinking of things on the level of config files (no XML
> for this!), simple XML, a simple interpreted language, simple
> graphics language, java -> class hierarchy generator (using DOT
> format), ...
>
> Care to suggest some simple languages or simple tasks on languages
> for which grammars are available?
>
> Thanks,
> Ter
>


-- 
bamboo

From madcapmaggie at yahoo.com  Fri Sep  8 07:53:46 2006
From: madcapmaggie at yahoo.com (Peggy Fieland)
Date: Fri, 8 Sep 2006 07:53:46 -0700 (PDT)
Subject: [antlr-interest] working with different dialects
In-Reply-To: <W1755517639256561157717748@nocme1bl6.telenet-ops.be>
Message-ID: <20060908145346.24915.qmail@web60014.mail.yahoo.com>

Tim,

There are several approaches:

Write a general cobol parser and clone it.

Pass a parameter into the parser specifiying which 
dialect you are parsing, then use it in the grammar.

Write a parser that does all of them if they are
similar enough.

Subclasses.

I support a number of  dialects of SQL from various
vendors and I've got a parser for each one.  The
dialects within the vendors are handled in the
individual parsers.  The treewalker (handwritten) is a
template instantiated for each parser.

Peggy

--- timo.du.four at telenet.be wrote:

> Dear ANTLR users,
> 
> (Sorry for the repost, but I corrected a few things
> in my mail)
> 
> I am currently doing some research on parser
> generators for my master-thesis. I have to find a
> generator that is able to generate a parser which is
> able to parse a number of dialects of COBOL. I
> already worked with ANTLR for a project last year,
> so I know it generates a Lexer, a Parser and a
> treeParser. Now my question is: is it possible to
> make a generalParser for the COBOL-language, for the
> part of the language that is the same for all
> dialects, and then make a subclass of it for each
> dialect. Or is there a better way to do this?
> 
> Greetings,
> 
> Travin
> 
> 
> 
> 


From timothyjwashington at yahoo.ca  Fri Sep  8 10:13:03 2006
From: timothyjwashington at yahoo.ca (Timothy Washington)
Date: Fri, 8 Sep 2006 13:13:03 -0400 (EDT)
Subject: [antlr-interest] Recognising XML in a grammar
In-Reply-To: <bc607a4e0609050814n2500eeddha886266bc613e6dd@mail.gmail.com>
Message-ID: <20060908171303.73479.qmail@web30312.mail.mud.yahoo.com>

Hey there Ric, 

I can't seem to get a proper recursive lexical rule
going for a block of XML. I want to recognise a block
of XML in my lexer. I'm able to recognise nested XML
nodes with the 'TOKEN_LITERAL' lexical rule, but the
lexer doesn't know when to end a document, or match
root XML nodes (I'm using the lexical rule in fig. 2).
The parser rule I'm using is in fig. 1. Has anyone
written an XML lexical grammar that I can compare
with? 


expr: TOKEN_LITERAL ( DELIMITER TOKEN_LITERAL )* 
    { System.out.println( "EXPRESSION >>> Parser" );
}; 

fig. 1


DELIMITER:      ','; 

TOKEN_LITERAL:
    (
        (PI)? (WS)?
        (       
            ( tag:STARTTAG
                ( WS | PI   | COMMENT  | CDATABLOCK )*

                (TOKEN_LITERAL)*
            ENDTAG ) { System.out.println("      TOKEN
LITERAL ["+ tag.getText() +"]"); }
            | 
            (tag2:EMPTYTAG) { System.out.println("    
 TOKEN LITERAL ["+ tag2.getText() +"]"); }
        )       
    ) 

fig.2 


Cheers. Tim. 


--- Ric Klaren <ric.klaren at gmail.com> wrote:

> Hi,
> 
> On 9/5/06, Timothy Washington
> <timothyjwashington at yahoo.ca> wrote:
> > Hey there Ric, thanks for responding. Your option
> > number 3 is what I'm after. The software that I am
> > writing will have another tool that takes that XML
> > chunk and deals with it. So really, I just want to
> > pass the XML as a string to my application.
> 
> Note that in what you're making now you have to
> rebuild the original
> XML string by concatenating the tokens...
> 
> Also you say you'd like to do option 3 I presented,
> but you're
> implementing option 1 it seems. It seems you mix up
> lexing and parsing
> (this is actually pretty normal when you're pretty
> new to
> antlr/parsing).
> 
> If you want to get one easy string in your parser
> for a chunk of
> complete XML then you'll have to do this in the
> lexer. You can
> probably use chunks from the original xml lexer and
> just count open
> and close tags untill you got a complete chunk of
> xml (I assume you
> don't have to validate the XML input at this stage).
> 
> First try to get a lexer running that can deal with
> your input and
> delivers the chunks you want. E.g. only tokens from
> your language and
> say some XML_TOKEN that contains a complete chunk of
> XML. After that
> it will be easy to deal with comma delimited chunks
> of XML_TOKEN's.
> 
> If I take your earlier example:
> 
> create
>          (entry
>                  (
>                          <?xml version='1.0'
> encoding='UTF-8'?>
>                          <debit
> xmlns='com/interrupt/bookkeeping/account'
>  amount='100.00'/>,
>                         <?xml version='1.0'
> encoding='UTF-8'?>
>                          <credit
> xmlns='com/interrupt/bookkeeping/account'
>  amount='100.00'/>
>                  )
>          )
> 
> (I changed the <debit xml... 00'> to <debit xml...
> 00'/> I assume
> that's a mistake)
> 
> For how you explain things I'd expect to get the
> following tokens from
> the lexer:
> 
> CREATE   - with text 'create' (assuming you handle
> this as a keyword)
> LPAREN - with text '('
> ENTRY - with text 'entry' (assuming you handle this
> as a keyword)
> LPAREN - with text '('
> XMLTOKEN - with text '<?xml version='1.0'
> encoding='UTF-8'?>
>                          <debit
> xmlns='com/interrupt/bookkeeping/account'
>  amount='100.00'/>'
> COMMA - with text ','
> XMLTOKEN - with text '<?xml version='1.0'
> encoding='UTF-8'?>
>                          <debit
> xmlns='com/interrupt/bookkeeping/account'
>  amount='100.00'/>'
> RPAREN - with text ')'
> RPAREN - with text ')'
> EOF
> 
> The in the parser you'd have a rule:
> 
> create_cmd: CREATE LPAREN ENTRY LPAREN
>   XMLTOKEN (COMMA XMLTOKEN)*
> RPAREN RPAREN;
> 
> Inside the action code in this rule then you could
> just use the
> getText() method on the XMLTOKENS to access the XML
> as a string and
> pass it to another stage.
> 
> With the solution you seem to be following now you'd
> have to
> concatenate a bunch of tags etc. together back to
> one string.
> 
> > class BookkeepingParser extends Parser;
> > options {
> >         k=10;
> >         importVocab=BookkeepingLexer;
> > }
> 
> As aside note k=10 is generally spoken pretty high.
> Normally you'd
> have something like k=2-3 a bit depending on things.
> Non determinism
> you can fix with predicates. When you get things
> running you can
> refactor your grammar to get rid of the worst
> predicates.
> 
> Cheers,
> 
> Ric
> 


__________________________________________________
Do You Yahoo!?
Tired of spam?  Yahoo! Mail has the best spam protection around 
http://mail.yahoo.com 

From mtengelmann at yahoo.com.br  Fri Sep  8 13:08:25 2006
From: mtengelmann at yahoo.com.br (Marcos Tengelmann)
Date: Fri, 8 Sep 2006 17:08:25 -0300
Subject: [antlr-interest] Newbie question
In-Reply-To: <20060908171303.73479.qmail@web30312.mail.mud.yahoo.com>
Message-ID: <024701c6d382$8c79f590$a4a7fea9@incredibles>

Hi,

I am very new to ANTLR (Which BTW is great...) and have a doubt in order to
accomplish the following:

I am trying to do a parser to read a user written file.
In this file we are gonna have the structure (Example):

Function String[] getNames(int bucket) {
	return new String[] {"Name1", "Name2", "Name3"};
}

The whole idea is AFTER the word function, it is a Java Lanaguage method
definition.
What I would like to do is parse this and get the text:
"String[] getNames(int bucket) {
	return new String[] {"Name1", "Name2", "Name3"};
}"

I really do not care for parsing anything after the word function, just to
pick up the text and send it to a java compiler.

Any ideas of how to do it?

Thanks in Advance!

Marcos


		
_______________________________________________________ 
Yahoo! Acesso Gr?tis - Internet r?pida e gr?tis. Instale 
o discador agora! 
http://br.acesso.yahoo.com

From parrt at cs.usfca.edu  Fri Sep  8 13:17:54 2006
From: parrt at cs.usfca.edu (Terence Parr)
Date: Fri, 8 Sep 2006 13:17:54 -0700
Subject: [antlr-interest] little languages for antlr book
In-Reply-To: <20060908143255.15668.qmail@web55102.mail.re4.yahoo.com>
References: <20060908143255.15668.qmail@web55102.mail.re4.yahoo.com>
Message-ID: <3245DD59-E4B5-4BD7-A41B-6A4B067014B5@cs.usfca.edu>


On Sep 8, 2006, at 7:32 AM, Matt Benson wrote:
>> Care to suggest some simple languages or simple
>> tasks on languages
>> for which grammars are available?
>
> ~ how many lines/grammar (lexer + parser) are you
> thinking of here?

As small as possible...grammar fitting on one page for sure then  
actions can be more.
Ter

From sohail at taggedtype.net  Fri Sep  8 20:30:35 2006
From: sohail at taggedtype.net (Sohail Somani)
Date: Fri, 08 Sep 2006 20:30:35 -0700
Subject: [antlr-interest] little languages for antlr book
In-Reply-To: <3245DD59-E4B5-4BD7-A41B-6A4B067014B5@cs.usfca.edu>
References: <20060908143255.15668.qmail@web55102.mail.re4.yahoo.com>
	<3245DD59-E4B5-4BD7-A41B-6A4B067014B5@cs.usfca.edu>
Message-ID: <1157772636.5512.8.camel@localhost.localdomain>

On Fri, 2006-09-08 at 13:17 -0700, Terence Parr wrote:
> On Sep 8, 2006, at 7:32 AM, Matt Benson wrote:
> >> Care to suggest some simple languages or simple
> >> tasks on languages
> >> for which grammars are available?
> >
> > ~ how many lines/grammar (lexer + parser) are you
> > thinking of here?
> 
> As small as possible...grammar fitting on one page for sure then  
> actions can be more.

Lisp!


From laomao at jaxwiki.net  Sun Sep 10 19:39:45 2006
From: laomao at jaxwiki.net (Jun Lu)
Date: Mon, 11 Sep 2006 10:39:45 +0800
Subject: [antlr-interest] Grammar file for HTML template
In-Reply-To: <1057053137.20060907151720@semagia.com>
References: <e9ff57410609061942x3fbda4b5oe034cab4413afa5b@mail.gmail.com>
	<1057053137.20060907151720@semagia.com>
Message-ID: <e9ff57410609101939g1d69fc3av98767bb530c825c3@mail.gmail.com>

Hi Lars,

Thank you for the information and suggestions. I tested the program
with RegEx. It is simple. The initial result is very promising. I will
update the group once I have something can show.

Cheers.

Jun

On 9/7/06, Lars Heuer <heuer at semagia.com> wrote:
> Hi Jun,
>
> [...]
> > One problem is how to convert phpBB templates into some form of Java
> > or JSP. A sample template (tpl file) is attached below.
>
> > There are 3 patterns I need to deal with.
> > 1. variables: {[A-Z_]+}  : replaced with a bean property
> > 2. loop: <!-- BEGIN [a-z_]+_rows --> ....   <!-- END [a-z_]+_rows -->
> > : replaced with array of beans
> > 3. condition:    <!-- BEGIN switch_[a-z_]+ --> ...   <!-- END
> > switch_[a-z_]+ --> : replaced with "if (..)"
>
> > Any opinions on would be appreciated.
>
> Since the templates look like [PHPLib] templates, I'd use some RegExes
> and wouldn't use ANTLR at all. Look into the [template] class of the
> PHPLib.
>
> [PHPLib] http://phplib.sf.net/
> [template] <http://phplib.cvs.sourceforge.net/phplib/php-lib-stable/php/template.inc?revision=1.15&view=markup>
>
> Best regards,
> Lars
> --
> http://www.semagia.com
>
>

From belayda at usfca.edu  Sun Sep 10 23:17:47 2006
From: belayda at usfca.edu (Bernardo Elayda)
Date: Sun, 10 Sep 2006 23:17:47 -0700
Subject: [antlr-interest] little languages for antlr book
Message-ID: <9058149081b2.9081b2905814@usfca.edu>

Hi,
I would recommend that you use the MCS, EXO, and/or JEDEC file formats as small 
grammars.

The grammars are publicly available and small  Anyone who has to writes a compiler for am 
embeded processor 
will eventually have to create an output in at least 1 of these 3 file formats for their target 
design.  The 
grammars are small and have simple sematnci checks.  For example, the MCS format adds up 
the data bytes of 
a 'row' into a byte checksum.

Regards,
Bernardo Elayda


----- Original Message -----
From: Terence Parr <parrt at cs.usfca.edu>
Date: Thursday, September 7, 2006 5:08 pm
Subject: [antlr-interest] little languages for antlr book
> Howdy,
> 
> So, we need a bunch of small domain specific languages for the 
> antlr  
> book.  I'm thinking of things on the level of config files (no XML  
> for this!), simple XML, a simple interpreted language, simple  
> graphics language, java -> class hierarchy generator (using DOT  
> format), ...
> 
> Care to suggest some simple languages or simple tasks on languages  
> for which grammars are available?
> 
> Thanks,
> Ter
> 

From Imran.AR at in.bosch.com  Sun Sep 10 23:35:26 2006
From: Imran.AR at in.bosch.com (Imran A R (RBIN/EDM2))
Date: Mon, 11 Sep 2006 12:05:26 +0530
Subject: [antlr-interest] Problem with REAL and INT
Message-ID: <141D986BB4749448AB843778A4DD236B04C07FD3@kormail02.in.bosch.com>


Hello all

	I have a antlr lexer for REAL and INT grammer  as follows.

	INT: (DIGITSET '.')=> REAL { $setType (REAL) ;}
	 | DIGITSET {$setType (INT) ;};

	protected DIGITSET: ('0'..'9')('0'..'9')*; 

	protected ALPHABETS :'a'..'z' |'A'..'Z';

	protected REAL: DIGITSET '.' DIGITSET;


	protected PARTIALSTRING : (ALPHABETS|'_') (ALPHABETS |'0'..'9'
| '_' )*;

	IDENT options{ testLiterals = true;}: PARTIALSTRING ( '.'
PARTIALSTRING )* ;

	
	
	I have a small parser as follows

	rule:(speed:"speed" EQUAL speed_val:REAL SEMI){

	printf("%s\n",speed->getText().c_str());

	printf("%s\n",speed_val->getText().c_str());
	
	};



	when I give speed = 19.2;, it is working fine. 

	but when I give 19 it is giving 

	"line 1:8: expecting REAL, found '19'"

	Can you please help me to solve this problem.

Thank you 
Imran

From peter.paulus at nerocmediaware.nl  Mon Sep 11 03:01:39 2006
From: peter.paulus at nerocmediaware.nl (Peter Paulus)
Date: Mon, 11 Sep 2006 12:01:39 +0200
Subject: [antlr-interest] ANTLR 2.7.6/C++: parser controlled conditional
	lexer whitespace skipping?
Message-ID: <84C3E404-417C-11DB-BA15-0003930FEA9E@nerocmediaware.nl>

Hello all,

For a project I'm trying to create a CSS 2.1 parser (I started from the 
ccs2.1.g shared grammar on the website).

The shared css2.1.g grammar has the following whitespace lexer rule:

WS:	( ' '
	| '\t'
	| '\f'
	| ( options { generateAmbigWarnings = false; }
		: "\r\n"
		| '\r'
		| '\n'
		) { newline(); }
	)+ { _ttype = antlr::Token::SKIP; } // C++
	;

Now whitespace is both whitespace and a combinator in CSS2.1 (See 
section 5.2 paragraph 3 of specification - "Was there no better 
alternative for that particular combinator that was both human and 
machine-readable? - ).  So skipping whitespace in the lexer doesn't 
look like a good idea.

I've been looking at some strategies as how to solve this, but got 
stuck.

1. Handle whitespace explicitly in the parser. This look like a viable  
strategy, but is probably a lot of (hopefully unneeded?) work.

2. Use the 'ignore=WS' option. For CSS 2.1. you'd have to ignore WS on 
the starting rule  of the grammar (it's whitespace most of the time). 
As far as I could tell this propagates down into subrules. I could not 
find however how to reset this option on a subrule.

3.  A conditional Token::SKIP in the WS lexer rule:

WS:	( ' '
	| '\t'
	| '\f'
	| ( options { generateAmbigWarnings = false; }
		: "\r\n"
		| '\r'
		| '\n'
		) { newline(); }
	)+ { if (preserveWS == false) _ttype = antlr::Token::SKIP; } // C++
	;

In this case you would want the starting rule of the grammar to set 
'preserveWS' to 'false' and have the 'entry'-action of a subrule (near 
where you are parsing the combinator) set 'preserveWS' to 'true'. This 
leads to 2 problems:

How can parser and lexer interact? As far as I could tell the parser 
has no visibility to the lexer, only to the lexer's enclosed 
tokenstream. This means I could add a method to the lexer: public: 
setPreserveWS(bool mode = true) { this->preserveWS = mode; }. But I'm 
unsure if I could ever call this method from the parser.

There does not seem to be an 'exit'-action. How could the 'preserveWS' 
be safely reset to 'false' when the combinator subrule has been 
recognized/failed. Perhaps I would need to specify the same action in 
every branch of the subrule.

Looking at the note in the documentation regarding TokenStream 
filtering this seems like the best alternative - no costly creation of 
WS tokens when there is no need for them.

4. Use a variation on the 'TokenStreamBasicFilter'. This way the lexer 
does not skip WS, but puts it in the TokenStream. One could make a 
'CustomTokenStreamFilter', that allows you to toggle preserveWS in the 
filter. Except: how do I get to the filter (i.e. tokenstream) from the 
parser? I managed to find: this->getInputState().getInput() to arrive 
at the TokenBuffer. The TokenBuffer does not seem to have a (public) 
method to produce it's associated TokenStream.

Perhaps there are some other strategies that I didn't think of.

Could someone help me with this?

Thanks in advance.

With kind regards,
Peter Paulus


From jie.forest at hotmail.com  Mon Sep 11 03:51:47 2006
From: jie.forest at hotmail.com (jie.forest at hotmail.com)
Date: Mon, 11 Sep 2006 10:51:47 +0000
Subject: [antlr-interest] applicate your permission
Message-ID: <BAY22-F21E72F035BB65BA081E0739E2A0@phx.gbl>

Dear Dr.Terence Parr,
I am a Chinese, my name is Qiang Li. I am very interested in ANTLR v2.76 
tool and ANTLR V3. I want to translate < ANTLR Reference Manual> to Chinese 
documents. I wish to gain your permission and gain your more documents 
about ANTLR V3.
If you agree to my opinion, I will make great efforts to finish it.
Sincerely yours,
                                               Qiang Li
                                              Sep, 11 2006

_________________________________________________________________
??????????????? MSN Hotmail?  http://www.hotmail.com  


From vnpham.us at gmail.com  Mon Sep 11 09:17:22 2006
From: vnpham.us at gmail.com (Vinh N. Pham)
Date: Mon, 11 Sep 2006 12:17:22 -0400
Subject: [antlr-interest] Question about antlr 3 AST tree building
Message-ID: <45058C12.4070201@gmail.com>

Hi,
    First of all, I would like to thanks the antr developers for the 
wonderful tool.  It is one of the best parser generators I've ever used.
    I'm currently have some difficulty of using antlr 3.  In one of my 
project, I want to write a parser for a language, produce the AST for 
other developers to use as input so that they can get the information 
and do whatever translations they want.  Since most of other developers 
are not computer scientists, I think it is best to describe the AST tree 
in term of the target language (Java or C++) for them without referring 
about antlr or tree parser/walker at all because that means they have to 
learn another tool.  However, in antlr 3, the tree construction 
mechanism only build tree with type Object, and it is difficult to get a 
particular data member because it doesn't have a descriptive name.  Of 
course, I can create the whole tree manually but I'm hoping there are 
some mechanisms in antlr 3 to do this automatically.  After all, all 
information needed are already in the grammar file.
    Also, if even if we use the tree parser, what should we do if we 
need more than one way to do the translation from of the same node (an 
expression node for example)?  Using more than one tree parser may be a 
little bit confusing.

    for example, can we do this in the same grammar file
        subroutineName1=expression: ......... will be translated to 
subroutine named subroutineName1
        subroutineName2=expression: ......... will be translated to 
subroutine named subroutineName2

    Please let me know what I should use

Thanks,

Vinh N. Pham

From parrt at cs.usfca.edu  Mon Sep 11 09:23:31 2006
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon, 11 Sep 2006 09:23:31 -0700
Subject: [antlr-interest] Question about antlr 3 AST tree building
In-Reply-To: <45058C12.4070201@gmail.com>
References: <45058C12.4070201@gmail.com>
Message-ID: <7F5070CD-4F87-4AD5-80B9-F2CAD5DEAC07@cs.usfca.edu>


On Sep 11, 2006, at 9:17 AM, Vinh N. Pham wrote:

> Hi,
>    First of all, I would like to thanks the antr developers for the  
> wonderful tool.  It is one of the best parser generators I've ever  
> used.

Hooray!

>    I'm currently have some difficulty of using antlr 3.  In one of  
> my project, I want to write a parser for a language, produce the  
> AST for other developers to use as input so that they can get the  
> information and do whatever translations they want.  Since most of  
> other developers are not computer scientists, I think it is best to  
> describe the AST tree in term of the target language (Java or C++)  
> for them without referring about antlr or tree parser/walker at all  
> because that means they have to learn another tool.  However, in  
> antlr 3, the tree construction mechanism only build tree with type  
> Object, and it is difficult to get a particular data member because  
> it doesn't have a descriptive name.  Of course, I can create the  
> whole tree manually but I'm hoping there are some mechanisms in  
> antlr 3 to do this automatically.  After all, all information  
> needed are already in the grammar file.

You can use whatever tree type you want.  Set ASTLabelType I think as  
an option  in the grammar.

>    Also, if even if we use the tree parser, what should we do if we  
> need more than one way to do the translation from of the same node  
> (an expression node for example)?  Using more than one tree parser  
> may be a little bit confusing.
>
>    for example, can we do this in the same grammar file
>        subroutineName1=expression: ......... will be translated to  
> subroutine named subroutineName1
>        subroutineName2=expression: ......... will be translated to  
> subroutine named subroutineName2

That differs by an ID...how are you differentiating them?

Ter


From parrt at cs.usfca.edu  Mon Sep 11 09:24:13 2006
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon, 11 Sep 2006 09:24:13 -0700
Subject: [antlr-interest] applicate your permission
In-Reply-To: <BAY22-F21E72F035BB65BA081E0739E2A0@phx.gbl>
References: <BAY22-F21E72F035BB65BA081E0739E2A0@phx.gbl>
Message-ID: <EC2C1307-E29C-48E4-910A-39E033178459@cs.usfca.edu>


On Sep 11, 2006, at 3:51 AM, <jie.forest at hotmail.com>  
<jie.forest at hotmail.com> wrote:

> Dear Dr.Terence Parr,
> I am a Chinese, my name is Qiang Li. I am very interested in ANTLR  
> v2.76 tool and ANTLR V3. I want to translate < ANTLR Reference  
> Manual> to Chinese documents. I wish to gain your permission and  
> gain your more documents about ANTLR V3.
> If you agree to my opinion, I will make great efforts to finish it.

Sure.  Please do, but please keep the original authors' names on  
there etc...

Terence


From ric.klaren at gmail.com  Mon Sep 11 13:37:34 2006
From: ric.klaren at gmail.com (Ric Klaren)
Date: Mon, 11 Sep 2006 22:37:34 +0200
Subject: [antlr-interest] Recognising XML in a grammar
In-Reply-To: <20060908171303.73479.qmail@web30312.mail.mud.yahoo.com>
References: <bc607a4e0609050814n2500eeddha886266bc613e6dd@mail.gmail.com>
	<20060908171303.73479.qmail@web30312.mail.mud.yahoo.com>
Message-ID: <bc607a4e0609111337g2d84c39fwf325215fa20ffc4a@mail.gmail.com>

Hi,

I messed a bit around with the xml lexer wondering if it would be
possible to keep it inside a lexer rule.

I attached what I came up with the XMLCHUNK rule seems to grab a lot..
but it's not perfect. Trying to do complete XML matching inside one
lexer rule is probably not something you'd want to do, it's pretty
tricky. I left out the PI stuff to keep things more readable.

I used a trick with a predicate to match start and end tags together.
This makes keeps at least close and end tags 'well-formed'. Using the
official rule for chardata breaks things though. I didn't want to
spend much more time on it so I didn't figure out what goes wrong
there... There are warnings.. I'm not sure wether there's a serious
one in it.

When you combine the rule with another lexer then you probably have to
resolve ambiguity. Or alternatively use a multiLexer approach (check
out the example in the distribution)

Anyway hope it's of some use ;)

Cheers,

Ric

PS if you start taking this as a start, edit and test it in little
incremental steps and safe copies to go back to previous versions.
PPS you'll probably get better results if you use a real XML parser
and a multiLexer combination.. but writing the glue between the antlr
input buffering and the XML parser is probably tricky.
-------------- next part --------------
A non-text attachment was scrubbed...
Name: xml.g
Type: application/octet-stream
Size: 2910 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20060911/a3fbe56c/attachment.obj 

From rvclayton at acm.org  Mon Sep 11 18:33:51 2006
From: rvclayton at acm.org (r. clayton)
Date: 11 Sep 2006 21:33:51 -0400
Subject: [antlr-interest] What replaces setASTNodeTYPE()?
Message-ID: <87fyexdg1s.fsf@UlanBator.myhome.westell.com>

According to most of the 2.7.6 documentation I've found (and javac),
setASTNodeTYPE() is deprecated (the manual has lots of setASTNodeTYPE() and not
one mention of deprecation).  But nothing I've found tells me what to use in
its place.  What do I use in place of setASTNodeTYPE()?


From antlr-list at arizona-software.ch  Mon Sep 11 20:25:26 2006
From: antlr-list at arizona-software.ch (Jean Bovet)
Date: Mon, 11 Sep 2006 20:25:26 -0700
Subject: [antlr-interest] ANTLRWorks 1.0b2 released
In-Reply-To: <200609061338.39519.ilia@obnovlenie.ru>
References: <9F604FB3-6DDC-41C3-8776-E74AE46CC61F@arizona-software.ch>
	<200609061338.39519.ilia@obnovlenie.ru>
Message-ID: <F0FA4D0A-095B-4835-AA99-E26F86EB0034@arizona-software.ch>

Thanks! It should work but I don't know yet how to integrate myself  
with the undo/redo menu item of IntelliJ. If someone knows how to do  
that, let me know.

Jean

On Sep 6, 2006, at 2:38 AM, Ilia Kantor wrote:

>
> Cool! I really love AW.
>
> Is undo/redo going to work in AW IDEA plugin ?
>
>>
>> I've just released AW 1.0b2 with the following changes:
>>
>> - clear console status message when console is cleared
>> - save automatically the position and size of each project's window
>> - new startup option: open last saved document, open all opened
>> documents when ANTLRWorks was closed
>>
>> - fixed a bug where the cursor highlighting couldn't be turned off
>> - fixed a bug in text rendering that prevented the cursor to be
>> positioned at the correct location
>> - fixed a bug in the text rendering that prevented the selected text
>> to be highlighted correctly
>>
>> I'm still working on some requested features so stay tuned ;-)
>>
>> It can be downloaded as usual here:
>>
>> http://www.antlr.org/works/index.html
>>
>> Regards,
>>
>> Jean


From ryan.hollom at us.lawson.com  Tue Sep 12 07:27:22 2006
From: ryan.hollom at us.lawson.com (Ryan Hollom)
Date: Tue, 12 Sep 2006 09:27:22 -0500
Subject: [antlr-interest] Simple lexical predicate question
Message-ID: <OF419BBC92.872E455A-ON862571E7.004F4F72-862571E7.004F69E7@lawson.com>

Greetings-

I am writing a parser/lexer for a language with the following constructs, 
and am having difficulty getting the lexer to work properly.

identifier is a Field
        identifier is a LocalField
        identifier is Numeric
        identifier is an AddressField

So, I have the keywords 'is a Field', 'is a', 'is', and 'is an' 
('LocalField' and 'AddressField' can be any name, and 'Numeric' can be one 
of about 30 different things).

I've had a difficult time defining the rules for these, as I get a lexer 
no viable alt error.  Here is an example of my rule:
fieldDefinition :
        identifier 'is a Field'
                (identifier 
                        (('is a' | 'is an') identifier) | 'is' 
primitiveType)
                );

primitiveType : 'Alpha' | 'Numeric';

The lexer then chokes on input like:
MyField is a Field
        MyNumericField is Numeric

with a no viable alt line 2:20; char='N'

I assume that I need to define lexer rules for the 'is ...' keywords with 
some type of predicate, but haven't been able to figure it out yet.  Could 
someone point me in the right direction?

Thanks in advance,
Ryan
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060912/a9bfb939/attachment.html 

From jie.forest at hotmail.com  Tue Sep 12 19:38:00 2006
From: jie.forest at hotmail.com (jie.forest at hotmail.com)
Date: Wed, 13 Sep 2006 02:38:00 +0000
Subject: [antlr-interest] A problem when I use ANTLR V2.76 to parse html.g
	file
Message-ID: <BAY22-F1025290AFCBF515E1179799E280@phx.gbl>

Dear, Dr.Terence Parr
When I read and debug the 'html.g  v1.3' program that Alexis Hinds and you 
wrote, I found a problem. 
firstly, I use ANTLR V2.76 for Eclipse to parse 'html.g' and run 
'Main.java', I can get the correct result.
However, I divide the 'html.g' file to two files correctly, one is 
'HTMLParser.g', another is 'HTMLLexer.g'. I can use ANTLR V2.76 for Eclipse 
to parse them correctly. But when I run the 'Main.java' program, I get 46 
wong result, as follows: ( I cann't find any reason, please tell me why.)

Severity and Description	Path	Resource	Location	Creation Time	Id
ATTR cannot be resolved	Example3/src	HTMLLexer.g	line 582	1158114822921	
302776
ATTR cannot be resolved	Example3/src	HTMLLexer.java	line 861	1158114822625	
302677
BFONT_OR_BASE cannot be resolved	Example3/src	HTMLLexer.g	line 482	
1158114822937	302784
BFONT_OR_BASE cannot be resolved	Example3/src	HTMLLexer.java	line 3333	
1158114822640	302755
CDFN cannot be resolved	Example3/src	HTMLLexer.g	line 366	1158114822937	
302782
CDFN cannot be resolved	Example3/src	HTMLLexer.java	line 2758	1158114822640	
302753
CDIR_OR_CDIV cannot be resolved	Example3/src	HTMLLexer.g	line 190	
1158114822921	302777
CDIR_OR_CDIV cannot be resolved	Example3/src	HTMLLexer.java	line 1908	
1158114822625	302715
CFORM_OR_CFONT cannot be resolved	Example3/src	HTMLLexer.g	line 464	
1158114822937	302783
CFORM_OR_CFONT cannot be resolved	Example3/src	HTMLLexer.java	line 3299	
1158114822640	302754
COMMENT cannot be resolved	Example3/src	HTMLLexer.g	line 553	1158114822937	
302786
COMMENT cannot be resolved	Example3/src	HTMLLexer.java	line 3543	
1158114822640	302757
COMMENT_DATA cannot be resolved	Example3/src	HTMLLexer.g	line 532	
1158114822937	302785
COMMENT_DATA cannot be resolved	Example3/src	HTMLLexer.java	line 3501	
1158114822640	302756
CST_LEFT_FACTORED cannot be resolved	Example3/src	HTMLLexer.g	line 314	
1158114822921	302779
CST_LEFT_FACTORED cannot be resolved	Example3/src	HTMLLexer.java	line 2532	
1158114822625	302743
CSUB_OR_CSUP cannot be resolved	Example3/src	HTMLLexer.g	line 348	
1158114822937	302780
CSUB_OR_CSUP cannot be resolved	Example3/src	HTMLLexer.java	line 2685	
1158114822640	302751
DIGIT cannot be resolved	Example3/src	HTMLLexer.g	line 666	1158114822937	
302791
DIGIT cannot be resolved	Example3/src	HTMLLexer.java	line 3673	
1158114822640	302762
HEXDIGIT cannot be resolved	Example3/src	HTMLLexer.g	line 671	1158114822937	
302795
HEXDIGIT cannot be resolved	Example3/src	HTMLLexer.java	line 3778	
1158114822640	302766
HEXINT cannot be resolved	Example3/src	HTMLLexer.g	line 649	1158114822937	
302794
HEXINT cannot be resolved	Example3/src	HTMLLexer.java	line 3752	
1158114822640	302765
HEXNUM cannot be resolved	Example3/src	HTMLLexer.g	line 640	1158114822937	
302789
HEXNUM cannot be resolved	Example3/src	HTMLLexer.java	line 3646	
1158114822640	302760
INT cannot be resolved	Example3/src	HTMLLexer.g	line 645	1158114822937	
302788
INT cannot be resolved	Example3/src	HTMLLexer.java	line 3620	1158114822640	
302759
LCLETTER cannot be resolved	Example3/src	HTMLLexer.g	line 677	1158114822937	
302790
LCLETTER cannot be resolved	Example3/src	HTMLLexer.java	line 3660	
1158114822640	302761
ODFN cannot be resolved	Example3/src	HTMLLexer.g	line 363	1158114822937	
302781
ODFN cannot be resolved	Example3/src	HTMLLexer.java	line 2745	1158114822640	
302752
OSTRIKE_OR_OSTRONG cannot be resolved	Example3/src	HTMLLexer.g	line 306	
1158114822921	302778
OSTRIKE_OR_OSTRONG cannot be resolved	Example3/src	HTMLLexer.java	line 2498	
1158114822625	302742
SPECIAL cannot be resolved	Example3/src	HTMLLexer.g	line 635	1158114822937	
302793
SPECIAL cannot be resolved	Example3/src	HTMLLexer.java	line 3724	
1158114822640	302764
STRING cannot be resolved	Example3/src	HTMLLexer.g	line 624	1158114822921	
302775
STRING cannot be resolved	Example3/src	HTMLLexer.java	line 712	
1158114822625	302671
UNDEFINED_TOKEN cannot be resolved	Example3/src	HTMLLexer.g	line 682	
1158114822937	302796
UNDEFINED_TOKEN cannot be resolved	Example3/src	HTMLLexer.java	line 3809	
1158114822640	302767
WORD cannot be resolved	Example3/src	HTMLLexer.g	line 592	1158114822937	
302787
WORD cannot be resolved	Example3/src	HTMLLexer.java	line 3559	1158114822640	
302758
WS cannot be resolved	Example3/src	HTMLLexer.g	line 562	1158114822921	
302774
WS cannot be resolved	Example3/src	HTMLLexer.java	line 663	1158114822625	
302670
WSCHARS cannot be resolved	Example3/src	HTMLLexer.g	line 630	1158114822937	
302792
WSCHARS cannot be resolved	Example3/src	HTMLLexer.java	line 3686	
1158114822640	302763
lexical nondeterminism between rules BPARA1 and BPARA2 upon k==1:'{' 
k==2:'A'..'Z','a'..'z' k==3:'A'..'Z','a'..'z','}' 
k==4:<end-of-token>,'A'..'Z','a'..'z','}'	TextoSQL/src	MyLexer1.g	Unknown	
1158040767825	235438
lexical nondeterminism between rules BPARA1 and BPARA3 upon k==1:'{' 
k==2:'A'..'Z','a'..'z' k==3:'A'..'Z','a'..'z','}' 
k==4:<end-of-token>,'A'..'Z','a'..'z','}'	TextoSQL/src	MyLexer1.g	Unknown	
1158040767825	235439
lexical nondeterminism between rules BPARA1 and PARAM1 upon k==1:'{' 
k==2:'A'..'Z','a'..'z' k==3:'A'..'Z','a'..'z','}' 
k==4:<end-of-token>,'A'..'Z','a'..'z','}'	TextoSQL/src	MyLexer1.g	Unknown	
1158040767825	235440
lexical nondeterminism between rules BPARA2 and BPARA3 upon k==1:'{' 
k==2:'A'..'Z','a'..'z' k==3:'A'..'Z','a'..'z','}' 
k==4:<end-of-token>,'A'..'Z','a'..'z','}'	TextoSQL/src	MyLexer1.g	Unknown	
1158040767825	235441
lexical nondeterminism between rules BPARA2 and PARAM1 upon k==1:'{' 
k==2:'A'..'Z','a'..'z' k==3:'A'..'Z','a'..'z','}' 
k==4:<end-of-token>,'A'..'Z','a'..'z','}'	TextoSQL/src	MyLexer1.g	Unknown	
1158040767825	235442
lexical nondeterminism between rules BPARA3 and PARAM1 upon k==1:'{' 
k==2:'A'..'Z','a'..'z' k==3:'A'..'Z','a'..'z','}' 
k==4:<end-of-token>,'A'..'Z','a'..'z','}'	TextoSQL/src	MyLexer1.g	Unknown	
1158040767825	235443
lexical nondeterminism upon k==1:'a'..'z' 
k==2:<end-of-token>,'A'..'Z','a'..'z' k==3:<end-of-token>,'A'..'Z','a'..'z' 
k==4:<end-of-token>,'A'..'Z','a'..'z' between alt 1 and exit branch of 
block	TextoSQL/src	MyLexer1.g	line 47	1158040767841	235444
lexical nondeterminism upon k==1:'A'..'Z' 
k==2:<end-of-token>,'A'..'Z','a'..'z' k==3:<end-of-token>,'A'..'Z','a'..'z' 
k==4:<end-of-token>,'A'..'Z','a'..'z' between alt 2 and exit branch of 
block	TextoSQL/src	MyLexer1.g	line 47	1158040767841	235445
nongreedy block may exit incorrectly due to limitations of linear 
approximate lookahead (first k-1 sets in lookahead not singleton).	
Example2/src	xml.g	line 73	1158041029059	236693
The import antlr.ANTLRException is never used	Example1/src	
DemoJavaDocLexer.java	line 9	1157438410892	227445
The import antlr.ANTLRException is never used	Example1/src	
DemoJavaDocParser.java	line 6	1157438410939	227461
The import antlr.ANTLRException is never used	Example1/src	
DemoJavaLexer.java	line 9	1157438411048	227466
The import antlr.ANTLRException is never used	Example1/src	
DemoJavaParser.java	line 6	1157438411126	227480
The import antlr.ANTLRException is never used	Example3/src	HTMLParser.java	
line 6	1158114822843	302769
The import antlr.ANTLRHashString is never used	Example1/src	
DemoJavaDocLexer.java	line 22	1157438410892	227449
The import antlr.CharScanner is never used	Example1/src	
DemoJavaDocLexer.java	line 12	1157438410892	227446
The import antlr.CharScanner is never used	Example1/src	DemoJavaLexer.java	
line 12	1157438411048	227467
The import antlr.collections.AST is never used	Example1/src	Main.java	line 
2	1157438411173	227485
The import antlr.collections.impl is never used	Example1/src	Main.java	line 
3	1157438411173	227486
The import antlr.collections.impl.BitSet is never used	Example1/src	
DemoJavaDocLexer.java	line 24	1157438410908	227450
The import antlr.collections.impl.BitSet is never used	Example1/src	
DemoJavaLexer.java	line 24	1157438411048	227470
The import antlr.CommonToken is never used	Example1/src	
DemoJavaDocLexer.java	line 17	1157438410892	227447
The import antlr.CommonToken is never used	Example1/src	DemoJavaLexer.java	
line 17	1157438411048	227468
The import antlr.debug.misc is never used	Example1/src	Main.java	line 4	
1157438411173	227487
The import antlr.LLkParser is never used	Example1/src	
DemoJavaDocParser.java	line 7	1157438410939	227462
The import antlr.LLkParser is never used	Example1/src	DemoJavaParser.java	
line 7	1157438411126	227481
The import antlr.LLkParser is never used	Example3/src	HTMLParser.java	line 
7	1158114822843	302770
The import antlr.MismatchedCharException is never used	Example1/src	
DemoJavaDocLexer.java	line 20	1157438410892	227448
The import antlr.MismatchedCharException is never used	Example1/src	
DemoJavaLexer.java	line 20	1157438411048	227469
The import antlr.MismatchedTokenException is never used	Example1/src	
DemoJavaDocParser.java	line 12	1157438410939	227464
The import antlr.MismatchedTokenException is never used	Example1/src	
DemoJavaParser.java	line 12	1157438411126	227483
The import antlr.MismatchedTokenException is never used	Example3/src	
HTMLParser.java	line 12	1158114822843	302772
The import antlr.NoViableAltException is never used	Example1/src	
DemoJavaDocParser.java	line 11	1157438410939	227463
The import antlr.SemanticException is never used	Example1/src	
DemoJavaDocLexer.java	line 25	1157438410908	227451
The import antlr.SemanticException is never used	Example1/src	
DemoJavaDocParser.java	line 13	1157438410939	227465
The import antlr.SemanticException is never used	Example1/src	
DemoJavaLexer.java	line 25	1157438411048	227471
The import antlr.SemanticException is never used	Example1/src	
DemoJavaParser.java	line 13	1157438411126	227484
The import antlr.SemanticException is never used	Example3/src	
HTMLParser.java	line 13	1158114822843	302773
The import antlr.Token is never used	Example1/src	DemoJavaParser.java	line 
8	1157438411126	227482
The import antlr.Token is never used	Example3/src	HTMLParser.java	line 8	
1158114822843	302771
The import antlr.TokenStreamIOException is never used	Example1/src	
DemoJavaDocParser.java	line 5	1157438410923	227460
The import antlr.TokenStreamIOException is never used	Example1/src	
DemoJavaParser.java	line 5	1157438411126	227479
The import antlr.TokenStreamIOException is never used	Example3/src	
HTMLParser.java	line 5	1158114822843	302768
The local variable _saveIndex is never read	Example1/src	
DemoJavaDocLexer.java	line 105	1157438410908	227454
The local variable _saveIndex is never read	Example1/src	
DemoJavaDocLexer.java	line 120	1157438410908	227455
The local variable _saveIndex is never read	Example1/src	
DemoJavaDocLexer.java	line 167	1157438410908	227456
The local variable _saveIndex is never read	Example1/src	
DemoJavaDocLexer.java	line 188	1157438410908	227457
The local variable _saveIndex is never read	Example1/src	
DemoJavaDocLexer.java	line 202	1157438410908	227458
The local variable _saveIndex is never read	Example1/src	
DemoJavaDocLexer.java	line 217	1157438410908	227459
The local variable _saveIndex is never read	Example1/src	DemoJavaLexer.java	
line 117	1157438411048	227475
The local variable _saveIndex is never read	Example1/src	DemoJavaLexer.java	
line 131	1157438411048	227476
The local variable _saveIndex is never read	Example1/src	DemoJavaLexer.java	
line 157	1157438411048	227477
The local variable _saveIndex is never read	Example1/src	DemoJavaLexer.java	
line 170	1157438411048	227478
The local variable _saveIndex is never read	Example3/src	HTMLLexer.java	
line 767	1158114822625	302672
The local variable _saveIndex is never read	Example3/src	HTMLLexer.java	
line 780	1158114822625	302673
The local variable _saveIndex is never read	Example3/src	HTMLLexer.java	
line 793	1158114822625	302674
The local variable _saveIndex is never read	Example3/src	HTMLLexer.java	
line 806	1158114822625	302675
The local variable _saveIndex is never read	Example3/src	HTMLLexer.java	
line 819	1158114822625	302676
The local variable _saveIndex is never read	Example3/src	HTMLLexer.java	
line 1184	1158114822625	302678
The local variable _saveIndex is never read	Example3/src	HTMLLexer.java	
line 1197	1158114822625	302679
The local variable _saveIndex is never read	Example3/src	HTMLLexer.java	
line 1210	1158114822625	302680
The local variable _saveIndex is never read	Example3/src	HTMLLexer.java	
line 1223	1158114822625	302681
The local variable _saveIndex is never read	Example3/src	HTMLLexer.java	
line 1236	1158114822625	302682
The local variable _saveIndex is never read	Example3/src	HTMLLexer.java	
line 1249	1158114822625	302683
The local variable _saveIndex is never read	Example3/src	HTMLLexer.java	
line 1265	1158114822625	302684
The local variable _saveIndex is never read	Example3/src	HTMLLexer.java	
line 1294	1158114822625	302685
The local variable _saveIndex is never read	Example3/src	HTMLLexer.java	
line 1323	1158114822625	302686
The local variable _saveIndex is never read	Example3/src	HTMLLexer.java	
line 1355	1158114822625	302687
The local variable _saveIndex is never read	Example3/src	HTMLLexer.java	
line 1368	1158114822625	302688
The local variable _saveIndex is never read	Example3/src	HTMLLexer.java	
line 1400	1158114822625	302689
The local variable _saveIndex is never read	Example3/src	HTMLLexer.java	
line 1413	1158114822625	302690
The local variable _saveIndex is never read	Example3/src	HTMLLexer.java	
line 1445	1158114822625	302691
The local variable _saveIndex is never read	Example3/src	HTMLLexer.java	
line 1458	1158114822625	302692
The local variable _saveIndex is never read	Example3/src	HTMLLexer.java	
line 1490	1158114822625	302693
The local variable _saveIndex is never read	Example3/src	HTMLLexer.java	
line 1503	1158114822625	302694
The local variable _saveIndex is never read	Example3/src	HTMLLexer.java	
line 1535	1158114822625	302695
The local variable _saveIndex is never read	Example3/src	HTMLLexer.java	
line 1548	1158114822625	302696
The local variable _saveIndex is never read	Example3/src	HTMLLexer.java	
line 1580	1158114822625	302697
The local variable _saveIndex is never read	Example3/src	HTMLLexer.java	
line 1593	1158114822625	302698
The local variable _saveIndex is never read	Example3/src	HTMLLexer.java	
line 1606	1158114822625	302699
The local variable _saveIndex is never read	Example3/src	HTMLLexer.java	
line 1619	1158114822625	302700
The local variable _saveIndex is never read	Example3/src	HTMLLexer.java	
line 1651	1158114822625	302701
The local variable _saveIndex is never read	Example3/src	HTMLLexer.java	
line 1664	1158114822625	302702
The local variable _saveIndex is never read	Example3/src	HTMLLexer.java	
line 1696	1158114822625	302703
The local variable _saveIndex is never read	Example3/src	HTMLLexer.java	
line 1709	1158114822625	302704
The local variable _saveIndex is never read	Example3/src	HTMLLexer.java	
line 1741	1158114822625	302705
The local variable _saveIndex is never read	Example3/src	HTMLLexer.java	
line 1754	1158114822625	302706
The local variable _saveIndex is never read	Example3/src	HTMLLexer.java	
line 1786	1158114822625	302707
The local variable _saveIndex is never read	Example3/src	HTMLLexer.java	
line 1799	1158114822625	302708
The local variable _saveIndex is never read	Example3/src	HTMLLexer.java	
line 1831	1158114822625	302709
The local variable _saveIndex is never read	Example3/src	HTMLLexer.java	
line 1844	1158114822625	302710
The local variable _saveIndex is never read	Example3/src	HTMLLexer.java	
line 1857	1158114822625	302711
The local variable _saveIndex is never read	Example3/src	HTMLLexer.java	
line 1870	1158114822625	302712
The local variable _saveIndex is never read	Example3/src	HTMLLexer.java	
line 1883	1158114822625	302713
The local variable _saveIndex is never read	Example3/src	HTMLLexer.java	
line 1896	1158114822625	302714
The local variable _saveIndex is never read	Example3/src	HTMLLexer.java	
line 1943	1158114822625	302716
The local variable _saveIndex is never read	Example3/src	HTMLLexer.java	
line 1975	1158114822625	302717
The local variable _saveIndex is never read	Example3/src	HTMLLexer.java	
line 1988	1158114822625	302718
The local variable _saveIndex is never read	Example3/src	HTMLLexer.java	
line 2001	1158114822625	302719
The local variable _saveIndex is never read	Example3/src	HTMLLexer.java	
line 2033	1158114822625	302720

_________________________________________________________________
?????????????? MSN Messenger:  http://messenger.msn.com/cn  


From swalton at cs.utah.edu  Wed Sep 13 16:40:26 2006
From: swalton at cs.utah.edu (Sean Walton)
Date: Wed, 13 Sep 2006 17:40:26 -0600
Subject: [antlr-interest] Dropping keywords in lexer
In-Reply-To: <44FD9F8D.6020808@cs.utah.edu>
References: <7F32A6B2-E1A3-422E-926F-88427BB000F7@cs.usfca.edu>
	<44FD9F8D.6020808@cs.utah.edu>
Message-ID: <450896EA.7020905@cs.utah.edu>

I am trying to drop the keyword '__extension__' found in gcc.  This is 
essentially a "do-nothing" keyword and it is getting in the way of some 
of my parsing.  Is there a way to create a Lexer rule that will absorb 
the token and toss it?  I tried:

    TOSSERS
        : '__extension__' {channel=99;}
        ;

But, I get an "unreachable definition" error.
Ideas?
-Sean Walton
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060913/46e03f23/attachment.html 

From parrt at cs.usfca.edu  Wed Sep 13 19:02:41 2006
From: parrt at cs.usfca.edu (Terence Parr)
Date: Wed, 13 Sep 2006 19:02:41 -0700
Subject: [antlr-interest] Dropping keywords in lexer
In-Reply-To: <450896EA.7020905@cs.utah.edu>
References: <7F32A6B2-E1A3-422E-926F-88427BB000F7@cs.usfca.edu>
	<44FD9F8D.6020808@cs.utah.edu> <450896EA.7020905@cs.utah.edu>
Message-ID: <49344CB5-F793-4B67-8A87-C998BB302C0A@cs.usfca.edu>

try action {skip();}
Ter
On Sep 13, 2006, at 4:40 PM, Sean Walton wrote:

> I am trying to drop the keyword '__extension__' found in gcc.  This  
> is essentially a "do-nothing" keyword and it is getting in the way  
> of some of my parsing.  Is there a way to create a Lexer rule that  
> will absorb the token and toss it?  I tried:
> TOSSERS
>     : '__extension__' {channel=99;}
>     ;
> But, I get an "unreachable definition" error.
> Ideas?
> -Sean Walton


From antlr-list at arizona-software.ch  Wed Sep 13 19:32:11 2006
From: antlr-list at arizona-software.ch (Jean Bovet)
Date: Wed, 13 Sep 2006 19:32:11 -0700
Subject: [antlr-interest] ANTLRWorks 1.0b3
Message-ID: <63F6B36F-0555-42BB-B40A-08B6F9032CFA@arizona-software.ch>

Hello,

I just released a maintenance version of ANTLRWorks, fixing a few  
bugs reported these last weeks. The new version is available as usual  
here: www.antlr.org/works

Regards,

Jean


From selvaraj.v at gmail.com  Thu Sep 14 00:33:59 2006
From: selvaraj.v at gmail.com (Selvaraj Varadharajan)
Date: Thu, 14 Sep 2006 13:03:59 +0530
Subject: [antlr-interest] Need Clarrification on Antlr Ant task
Message-ID: <dd94da6f0609140033y57438283x6e0861858390910c@mail.gmail.com>

Hi,
     I am using ANTLR version 2.7.6 and i configured my ANTLR with the
following ant task


<project name="antlrBuild" basedir="." default="antlrTask">
    <target name="antlrTask" >
        <antlr target="grammer.g" outputdirectory="." />
    </target>
</project>


When i am  running this task, i am not getting any .java files and
completing with Successful build.

If any thing wrong in the ant task, plz correct me.

Regards,
Selvaraj.V
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060914/3d7bdaee/attachment.html 

From mantu_lists at yahoo.com.br  Thu Sep 14 05:10:18 2006
From: mantu_lists at yahoo.com.br (luciano mantuaneli)
Date: Thu, 14 Sep 2006 12:10:18 +0000 (GMT)
Subject: [antlr-interest] TreeParser grammar development: How to match an
	or-based parser grammar rule in the AST?
Message-ID: <20060914121018.70421.qmail@web39515.mail.mud.yahoo.com>

Greetings.
I'm developing a TreeParser to run through the tree generated by this Java 1.4 grammar . I'm having some dificulty in match interface methods, and I guess that the problem lives in my incapacity on understand how to match, in my TreeParser,  this rule:

field!
    : ...

        |    // A generic method has the typeParameters before the return type.
            // This is not allowed for variable definitions, but this production
            // allows it, a semantic check could be used if you wanted.
            (typeParameters)? t:typeSpec[false]  // method or variable declaration(s)
            (    IDENT  // the name of the method

                // parse the formal parameter declarations.
                LPAREN! param:parameterDeclarationList RPAREN!

                rt:declaratorBrackets[#t]

                // get the list of exceptions that this method is
                // declared to throw
                (tc:throwsClause)?

                ( s2:compoundStatement | SEMI )
                {#field = #(#[METHOD_DEF,"METHOD_DEF"],
                             mods,
                             #(#[TYPE,"TYPE"],rt),
                             IDENT,
                             param,
                             tc,
                             s2);}
            |    v:variableDefinitions[#mods,#t] SEMI
//                {#field = #(#[VARIABLE_DEF,"VARIABLE_DEF"], v);}
                {#field = #v;}
            )
        )
        |...
        ;

I guess my problem is how to match the "( s2:compoundStatement | SEMI )" in my TreeParser.
Here is the rule of my TreeParser which (try to) matches an method declaration:

...
    methodDef{
        String type, name;
        ArrayList types = new ArrayList();
    }:
        #(METHOD_DEF dontCare type=typeDef name=anything (parameterList)? (throwsDecl)? methodBlock/*block*/)
    ;
...
    methodBlock{
    }:
        stmList|
        SEMI
    ;
...
    anything returns [String result]{
        result = "";
    }:
        literal:.{
            result = literal.getText();
        }
    ;
    dontCare:
        .
    ;

    


If I run my TreeParser, I got  the message "<AST>:0:0: unexpected end of subtree" every time when a interface method (ended with ";") is found, and then I "lose" those methods.
My question: What am I doing wrong? Why my code can't match  the  text???
Please, help me people!...
If you wish, you can get the full code which I'm developing in this site:
http://www.comp.ufscar.br/~lumantu/Projetos/J2CSharp/Out/

Thanks in advance
My best regards
Mantu
 		
---------------------------------
 Yahoo! Acesso Gr?tis - Internet r?pida e gr?tis. Instale o discador agora! 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060914/b5aa22ec/attachment.html 

From mailinglist.taras.tielkes at gmail.com  Thu Sep 14 05:15:47 2006
From: mailinglist.taras.tielkes at gmail.com (Taras Tielkes)
Date: Thu, 14 Sep 2006 14:15:47 +0200
Subject: [antlr-interest] ANTLRWorks 1.0b2 released
In-Reply-To: <F0FA4D0A-095B-4835-AA99-E26F86EB0034@arizona-software.ch>
References: <9F604FB3-6DDC-41C3-8776-E74AE46CC61F@arizona-software.ch>	<200609061338.39519.ilia@obnovlenie.ru>
	<F0FA4D0A-095B-4835-AA99-E26F86EB0034@arizona-software.ch>
Message-ID: <450947F3.1090404@gmail.com>

Jean Bovet wrote:
> Thanks! It should work but I don't know yet how to integrate myself 
> with the undo/redo menu item of IntelliJ. If someone knows how to do 
> that, let me know.
>
The basic idea is that your actions should be run using 
CommandProcessor.getInstance().executeCommand(...)

But I think you'll get more and more detailed answers on the jetbrains 
newsgroups.

Regards,
Taras

From gudnabrsam at yahoo.com  Thu Sep 14 06:59:50 2006
From: gudnabrsam at yahoo.com (Matt Benson)
Date: Thu, 14 Sep 2006 06:59:50 -0700 (PDT)
Subject: [antlr-interest] Need Clarrification on Antlr Ant task
In-Reply-To: <dd94da6f0609140033y57438283x6e0861858390910c@mail.gmail.com>
Message-ID: <20060914135950.59767.qmail@web55114.mail.re4.yahoo.com>



--- Selvaraj Varadharajan <selvaraj.v at gmail.com>
wrote:

> Hi,
>      I am using ANTLR version 2.7.6 and i configured
> my ANTLR with the
> following ant task
> 
> 
> <project name="antlrBuild" basedir="."
> default="antlrTask">
>     <target name="antlrTask" >
>         <antlr target="grammer.g"
> outputdirectory="." />
>     </target>
> </project>
> 
> 
> When i am  running this task, i am not getting any
> .java files and
> completing with Successful build.
> 
> If any thing wrong in the ant task, plz correct me.

I don't regularly use the ANTLR task; however I am a
member of the Ant development team.  Your usage here
looks like the examples in the manual, as far as I can
tell.  You should:

1) verify ANTLR can process your grammar from the
command line.
2) run ant with the -v argument for verbose logging to
see if that sheds any light.
3) run ant with the -d argument for debug logging, if
verbose logging didn't give more information.  There
is not much debug-level logging in the ANTLR task, but
in case your problem lies elsewhere in your build file
it might be useful.  Be prepared for a mountain of
logging in this case.

HTH,
Matt


> 
> Regards,
> Selvaraj.V
> 


__________________________________________________
Do You Yahoo!?
Tired of spam?  Yahoo! Mail has the best spam protection around 
http://mail.yahoo.com 

From sombekke at gmail.com  Thu Sep 14 07:01:57 2006
From: sombekke at gmail.com (Niek Sombekke)
Date: Thu, 14 Sep 2006 16:01:57 +0200
Subject: [antlr-interest] Scanning whether a dot is part of a keyword or of
	a namespace.
Message-ID: <343f91a20609140701o59ecc148u5fa2a0de29d8a354@mail.gmail.com>

Hi all,

The problem I have can be described as follows. I'm trying to write a lexer
to scan a .NET IL file. A number of keywords in IL can contain a dot.
E.gboth next instructions are valid.

  tokens
  {
    DOT_ASSEMBLY = ".assembly" ;
    ASSEMBLY = "assembly";
  }

On the other hand, it is possible to have a namespace System.Object, which
after scanning should deliver the tokentypes
    System - ID
    . - DOT
    Object - ID


While testing a bogus line, e.g. ".assembly System.Object", my scanner
delivers (depending on my grammar) either the tokens
    .assembly - DOT_ASSEMBLY
    System - ID
    .Object - ID
or
    . - DOT
    assembly - ASSEMBLY
    System - ID
    . - DOT
    Object - ID

Obviously, both are incorrect! In the first case, the '.' should be
seperated from 'Object'. In the second case, the '.' should be combined with
'assembly' making it a DOT_ASSEMBLY token.

How can I let ANTLR determine whether the dot is part of a keyword, or that
it seperates two identifiers within a namespace?


-- Niek
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060914/5ffb2268/attachment-0001.html 

From devnull at raffael.ch  Thu Sep 14 07:57:09 2006
From: devnull at raffael.ch (Raffael Herzog)
Date: Thu, 14 Sep 2006 16:57:09 +0200
Subject: [antlr-interest] ANTLR 3.0b4: NullPointerException in
	NFAToDFAConverter
Message-ID: <eebqk5$ecg$1@sea.gmane.org>

Hi,

I suddenly run into an NPE at line 989 of NFAToDFAConverter when I try
to compile my syntax with antlr 3.0b4.

Looking at the code, it's rather obvious that this code can't be right:

if ( (gatedPreds==null && existingStateGatedPreds==null) ||
    (gatedPreds!=null && existingStateGatedPreds!=null) ||
    gatedPreds.equals(existingStateGatedPreds) )

If both are null, evaluation will stop with true. If both are non-null,
evaluation will also stop with true. So, if we get the the equals
statement, we know for sure that one of them is null, so we also know
that this equals statement will either evaluate to false or throw an
NPE.

Probably, this should be a null-safe equals. If so, a corrected version
of this if statement could look like this:

if ( (gatedPreds==null && existingStateGatedPreds==null) ||
    (!(gatedPreds==null ^ existingStateGatedPreds==null) &&
    gatedPreds.equals(existingStateGatedPreds)) )

cu,
   Raffi



From mantu_lists at yahoo.com.br  Thu Sep 14 11:40:23 2006
From: mantu_lists at yahoo.com.br (luciano mantuaneli)
Date: Thu, 14 Sep 2006 18:40:23 +0000 (GMT)
Subject: [antlr-interest] TreeParser grammar development: How to match
	an or-based parser grammar rule in the AST?
Message-ID: <20060914184023.25998.qmail@web39508.mail.mud.yahoo.com>


Thank you very much, Bryan!
Rewriting like you suggest don't work (I guess that even you expect it, as we don't known how to treat the SEMI token)
But your answer shed some light in the problem...
I don't know the consequences, but here it goues what I did:
I moved the SEMI from "( s2:compoundStatement | SEMI )" and place it in the CompoundStatement rule:

compoundStatement
    :    lc:LCURLY^ {#lc.setType(SLIST);}
            // include the (possibly-empty) list of statements
            (statement)*
        RCURLY!|
        SEMI
    ;

It just work well!
Again, thank you very much, Bryan!!!

Bryan Ewbank <ewbank at gmail.com> escreveu: The first thing that jumps out - perhaps not the root of the problem,
but it will cause you errors if it is not already - is that "s2" is
not always defined when it is used:

On 9/14/06, luciano mantuaneli  wrote:
> field!
>     : ...
>
>         |    // A generic method has the typeParameters before the return type.
>             // This is not allowed for variable definitions, but this production
>             // allows it, a semantic check could be used if you wanted.
>              (typeParameters)? t:typeSpec[false]  // method or variable declaration(s)
>             (    IDENT  // the name of the method
>
>                 // parse the formal parameter declarations.
>                 LPAREN! param:parameterDeclarationList RPAREN!
>
>                 rt:declaratorBrackets[#t]
>
>                  // get the list of exceptions that this method is
>                 // declared to throw
>                 (tc:throwsClause)?
>
>                  ( s2:compoundStatement | SEMI )
>                 {#field = #(#[METHOD_DEF,"METHOD_DEF"],
>                              mods,
>                              #(#[TYPE,"TYPE"],rt),
>                              IDENT,
>                              param,
>                              tc,
>                               s2);}
>             |    v:variableDefinitions[#mods,#t] SEMI
> //              {#field = #(#[VARIABLE_DEF,"VARIABLE_DEF"], v);}
>                 {#field = #v;}
>             )
>         )
>         |...
>         ;
>
> I guess my problem is how to match the "( s2:compoundStatement | SEMI )" in my TreeParser.
> Here is the  rule of my TreeParser which (try to) matches an  method declaration:

The value of "s2" will be undefined when "( s2:compoundStatement | SEMI )"
matches a semi.  A rewrite might be:

>      ( s2:compoundStatement
>           { #field = #(#[METHOD_DEF,"METHOD_DEF"],
>                 mods, #(#[TYPE,"TYPE"],rt), IDENT, param, tc, s2);
>           }
>      | SEMI
>           // ?? what should the value of #field be for this side?
>      )

This emphasizes another issue - what is #field supposed to be when a
SEMI is seen?

    

---------------------------------
  Voc? quer respostas para suas perguntas? Ou voc? sabe muito e quer compartilhar seu conhecimento? Experimente o Yahoo! Respostas!

 		
---------------------------------
 Novidade no Yahoo! Mail: receba alertas de novas mensagens no seu celular. Registre seu aparelho agora!
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060914/eef480ce/attachment.html 

From jbb at acm.org  Thu Sep 14 13:19:13 2006
From: jbb at acm.org (John B. Brodie)
Date: Thu, 14 Sep 2006 16:19:13 -0400
Subject: [antlr-interest] [v3] A Nit-Pick: ! and ? together
Message-ID: <E1GNxg1-00040E-00@gecko>

Greetings :-

I have a situation where the semicolon at the end of a particular
statement is optional.  I do not need/want that semicolon in the tree
(it is just syntactic sugar).

Given that now in v3 the ()'s are no longer required for the ?, *, and
+ on single items; I tried:

foo1 : bar1 ';'!? ; // error
foo2 : bar2 ';'?! ; // error

foo3 : bar3 (';'!)? ; // works!

foo4 : bar4 (';'?)! ; // did not try this one...


an extremely small issue....
   -jbb

From parrt at cs.usfca.edu  Thu Sep 14 13:29:41 2006
From: parrt at cs.usfca.edu (Terence Parr)
Date: Thu, 14 Sep 2006 13:29:41 -0700
Subject: [antlr-interest] [v3] A Nit-Pick: ! and ? together
In-Reply-To: <E1GNxg1-00040E-00@gecko>
References: <E1GNxg1-00040E-00@gecko>
Message-ID: <EBA379EE-309B-4473-8FE1-7F18081E373F@cs.usfca.edu>

added to list:

http://www.antlr.org/wiki/pages/viewpage.action?pageId=1422

Ter

From parrt at cs.usfca.edu  Thu Sep 14 14:19:25 2006
From: parrt at cs.usfca.edu (Terence Parr)
Date: Thu, 14 Sep 2006 14:19:25 -0700
Subject: [antlr-interest] ANTLR 3.0b4: NullPointerException in
	NFAToDFAConverter
In-Reply-To: <eebqk5$ecg$1@sea.gmane.org>
References: <eebqk5$ecg$1@sea.gmane.org>
Message-ID: <DE716212-254D-4C5A-A18F-E0521DB5AB66@cs.usfca.edu>


On Sep 14, 2006, at 7:57 AM, Raffael Herzog wrote:

> Hi,
>
> I suddenly run into an NPE at line 989 of NFAToDFAConverter when I try
> to compile my syntax with antlr 3.0b4.
>
> Looking at the code, it's rather obvious that this code can't be  
> right:
>
> if ( (gatedPreds==null && existingStateGatedPreds==null) ||
>     (gatedPreds!=null && existingStateGatedPreds!=null) ||
>     gatedPreds.equals(existingStateGatedPreds) )
>
> If both are null, evaluation will stop with true. If both are non- 
> null,
> evaluation will also stop with true. So, if we get the the equals
> statement, we know for sure that one of them is null, so we also know
> that this equals statement will either evaluate to false or throw an
> NPE.
>
> Probably, this should be a null-safe equals. If so, a corrected  
> version
> of this if statement could look like this:
>
> if ( (gatedPreds==null && existingStateGatedPreds==null) ||
>     (!(gatedPreds==null ^ existingStateGatedPreds==null) &&
>     gatedPreds.equals(existingStateGatedPreds)) )

Hi Raffi,

Thanks!  You are right!  Changed to:

// we already have an accept state for alt;
// Are their gate sem pred contexts the same?
// For now we assume a braindead version: both must not
// have gated preds or share exactly same single gated pred.
// The equals() method is only defined on Predicate contexts not
// OR etc...
SemanticContext gatedPreds = d.getGatedPredicatesInNFAConfigurations();
SemanticContext existingStateGatedPreds =
         acceptStateForAlt.getGatedPredicatesInNFAConfigurations();
if ( (gatedPreds==null && existingStateGatedPreds==null) ||
      ((gatedPreds!=null && existingStateGatedPreds!=null) &&
           gatedPreds.equals(existingStateGatedPreds)) )

Ter

From sunjigang1965 at yahoo.com.cn  Thu Sep 14 15:50:16 2006
From: sunjigang1965 at yahoo.com.cn (=?gb2312?q?=CB=EF=BC=CD=B8=D5=20Jigang=20(Robert)=20Sun?=)
Date: Fri, 15 Sep 2006 06:50:16 +0800 (CST)
Subject: [antlr-interest] best way do type-checking
Message-ID: <20060914225016.27664.qmail@web15707.mail.cnb.yahoo.com>

Hello list,

I am using 2.7.7 and target language is c#.

For doing type checking, I feel I have to generate a class object for each rule when I walk the
AST generated during parsing, then fall to use the coventional visitor method. Could anyone tell
me if this is right way that antlr expects? 

Thanks.

Jigang 


		
___________________________________________________________ 
??????-3.5G???20M?? 
http://cn.mail.yahoo.com/

From peter.paulus at nerocmediaware.nl  Fri Sep 15 02:39:04 2006
From: peter.paulus at nerocmediaware.nl (Peter Paulus)
Date: Fri, 15 Sep 2006 11:39:04 +0200
Subject: [antlr-interest] ANTLR 2.7.6/C++: parser controlled conditional
	lexer whitespace skipping?
Message-ID: <0675DB4B-449E-11DB-84DE-0003930FEA9E@nerocmediaware.nl>

Hello all,

Meanwhile I've completed a large part of my first strategy: explicit 
whitespace in the grammar.

The grammar below does parse successfully. Below the grammar and a 
(non-coherent) sample input are in included.

On the declarationBlock rule however I keep having difficulties that 
the last declaration, if specified with the "!important" clause, may 
not omit the SEMICOLON. Whereas a declaration, without the "!important" 
clause, may have an optional SEMICOLOM, optional whitespace before the 
RBRACE.

For instance these are okay:
{border: green solid 1pt}
{border: green solid 1pt;}
{border: green solid 1pt; }
{border: green solid 1pt !important;}

But this isn't:
{border: green solid 1pt !important}

I keep getting the non-determenism between 1 alternative of expr and 
the exit block.

By the way I found that whitespace had a third overloaded meaning: it 
acts as a list separator in expr.

Could someone help me iron out this last bit?

On the other strategies, did I miss the obvious; Or was I not 
netiquette enough with my little CSS whitespace observation? I had 
certainly hoped there would be an alternate approach to landing this. 
But since no one responded I guess this question stays open.

As far as what I've come up with concerns. I still have to do comments 
which probably adds an other layer of complexity.

With kind regards,
Peter Paulus

ANTLR 2.7.6 grammar (on request I can give you the entire grammar, 
including lexer):
class CSSParser extends Parser;
options {
	k=3;
	buildAST=true;
}

tokens {
FUNCTION;
DECLARATION;
}

stylesheet: (WS!)? (charset (WS!)?)? (import (WS!)?)*  ((medium | 
ruleset | page) (WS!)?)*;

charset: CHARSET_SYMBOL^ WS! string (WS!)? SEMICOLON;

import: IMPORT_SYMBOL^ WS! string (WS!)? (IDENT (COMMA (WS!)? IDENT 
(WS!)?)*)? SEMICOLON;

medium:	MEDIA_SYMBOL^
		WS!
		IDENT
		(WS!)?
		(COMMA (WS!)? IDENT (WS!)?)*
		LBRACE (WS!)?
		(ruleset (WS!)?)*
		(RBRACE | EOF)
		;

ruleset:	compositeselector
		LBRACE
		(WS!)?
		(declarationBlock)?
		(RBRACE | EOF)
		;

page: 	PAGE_SYMBOL^
		(WS!)?
		(COLON IDENT (WS!)?)?
		LBRACE
		(WS!)?
		(declarationBlock)?
		(RBRACE | EOF)
		;

compositeselector: selector
		(
			((WS)? COMMA)=> (WS!)? COMMA (WS!)? selector
			| ((WS)? PLUS)=> (WS!)? PLUS (WS!)?selector
			| ((WS)? GREATER) => (WS!)? GREATER (WS!)? selector
			| (WS LBRACE) => WS!
			| WS selector
		)*
		;

selector: (typeselector | universalselector) (idselector | 
classselector | attributeselector)* (pseudo)?
		| (idselector | classselector | attributeselector)+ (pseudo)?
		;

typeselector: IDENT;

universalselector: STAR;

idselector: HASH^ IDENT;

classselector: DOT^ IDENT;

attributeselector: LSQUARE^ RSQUARE; // incomplete rule

pseudo: COLON^ IDENT;

declarationBlock:   declaration
		(
			 (SEMICOLON (WS)? (RBRACE|EOF))=> SEMICOLON (WS!)?
  				| SEMICOLON (WS!)? declaration
		)*
		;

declaration: 	id:IDENT^
			(WS!)?
			COLON
			(WS!)?
			expr
			(IMPORTANT_SYMBOL)?
			{ #id->setType(DECLARATION); }
			;

expr:		term
			(
				(WS (SEMICOLON | RBRACE | EOF | IMPORTANT_SYMBOL))=> WS!
				| (WS term)=> WS term
  				| (WS COMMA)=> WS! COMMA (WS!)? term
				| (WS SLASH)=> WS! SLASH (WS!)? term
				| SLASH (WS!)? term
  				| COMMA (WS!)? term
			)*
			;
			
term
	: ((PLUS|MINUS)? DIGIT)=> length
	| hexcolor
	| function // including rgb(), srgb(), url()
	| string
	| identifier // including wellknown colors
	| keyword
	;

string: STRING;

keyword:	AUTO | INHERIT;

identifier: IDENT;

function: id:IDENT^ LPARENTHESIS arguments RPARENTHESIS { 
#id->setType(FUNCTION); };

arguments: (term)? ((COMMA|SLASH) WS term)*;

hexcolor :  hexLiteral;

hexLiteral: HASH (HEX_DIGIT HEX_DIGIT HEX_DIGIT) (HEX_DIGIT HEX_DIGIT 
HEX_DIGIT)?;

length:  NUM^ (unit)?;

unit: PERCENT | PX | PT | PC |  CM | MM | IN | DEG | RAD | GRAD | MS | 
S | KHZ | HZ;

-------------- next part --------------
A non-text attachment was scrubbed...
Name: table.css
Type: model/vrml
Size: 527 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20060915/9a727744/attachment.vrml 
-------------- next part --------------


Begin forwarded message:

> From: Peter Paulus <peter.paulus at nerocmediaware.nl>
> Date: Mon Sep 11, 2006  12:01:39 Europe/Amsterdam
> To: antlr-interest at antlr.org
> Subject: [antlr-interest] ANTLR 2.7.6/C++: parser controlled 
> conditional lexer whitespace skipping?
>
> Hello all,
>
> For a project I'm trying to create a CSS 2.1 parser (I started from 
> the ccs2.1.g shared grammar on the website).
>
> The shared css2.1.g grammar has the following whitespace lexer rule:
>
> WS:	( ' '
> 	| '\t'
> 	| '\f'
> 	| ( options { generateAmbigWarnings = false; }
> 		: "\r\n"
> 		| '\r'
> 		| '\n'
> 		) { newline(); }
> 	)+ { _ttype = antlr::Token::SKIP; } // C++
> 	;
>
> Now whitespace is both whitespace and a combinator in CSS2.1 (See 
> section 5.2 paragraph 3 of specification - "Was there no better 
> alternative for that particular combinator that was both human and 
> machine-readable? - ).  So skipping whitespace in the lexer doesn't 
> look like a good idea.
>
> I've been looking at some strategies as how to solve this, but got 
> stuck.
>
> 1. Handle whitespace explicitly in the parser. This look like a viable 
>  strategy, but is probably a lot of (hopefully unneeded?) work.
>
> 2. Use the 'ignore=WS' option. For CSS 2.1. you'd have to ignore WS on 
> the starting rule  of the grammar (it's whitespace most of the time). 
> As far as I could tell this propagates down into subrules. I could not 
> find however how to reset this option on a subrule.
>
> 3.  A conditional Token::SKIP in the WS lexer rule:
>
> WS:	( ' '
> 	| '\t'
> 	| '\f'
> 	| ( options { generateAmbigWarnings = false; }
> 		: "\r\n"
> 		| '\r'
> 		| '\n'
> 		) { newline(); }
> 	)+ { if (preserveWS == false) _ttype = antlr::Token::SKIP; } // C++
> 	;
>
> In this case you would want the starting rule of the grammar to set 
> 'preserveWS' to 'false' and have the 'entry'-action of a subrule (near 
> where you are parsing the combinator) set 'preserveWS' to 'true'. This 
> leads to 2 problems:
>
> How can parser and lexer interact? As far as I could tell the parser 
> has no visibility to the lexer, only to the lexer's enclosed 
> tokenstream. This means I could add a method to the lexer: public: 
> setPreserveWS(bool mode = true) { this->preserveWS = mode; }. But I'm 
> unsure if I could ever call this method from the parser.
>
> There does not seem to be an 'exit'-action. How could the 'preserveWS' 
> be safely reset to 'false' when the combinator subrule has been 
> recognized/failed. Perhaps I would need to specify the same action in 
> every branch of the subrule.
>
> Looking at the note in the documentation regarding TokenStream 
> filtering this seems like the best alternative - no costly creation of 
> WS tokens when there is no need for them.
>
> 4. Use a variation on the 'TokenStreamBasicFilter'. This way the lexer 
> does not skip WS, but puts it in the TokenStream. One could make a 
> 'CustomTokenStreamFilter', that allows you to toggle preserveWS in the 
> filter. Except: how do I get to the filter (i.e. tokenstream) from the 
> parser? I managed to find: this->getInputState().getInput() to arrive 
> at the TokenBuffer. The TokenBuffer does not seem to have a (public) 
> method to produce it's associated TokenStream.
>
> Perhaps there are some other strategies that I didn't think of.
>
> Could someone help me with this?
>
> Thanks in advance.
>
> With kind regards,
> Peter Paulus
>

From mantu_lists at yahoo.com.br  Fri Sep 15 07:51:58 2006
From: mantu_lists at yahoo.com.br (luciano mantuaneli)
Date: Fri, 15 Sep 2006 14:51:58 +0000 (GMT)
Subject: [antlr-interest] TreeParser development: How to build an effective
	"dont care" rule?
Message-ID: <20060915145158.80085.qmail@web39507.mail.mud.yahoo.com>

Hi!
I'm developing a TreeParser, and I wish to know how to create an rule that do nothing on matching any token.
I tried to do this with this rule:

dontCare:
    .
;

But, this rule doesn't seems to work properly. Depending on how my TreeParser  grammar is written, I get the following error message:

<AST>: Mismatched Token: expecting any AST node

My questions:
1)My dontCare rule is proper for the task mentioned above?
2)Do you know how this error message is related with my dontCare rule?

 		
---------------------------------
 O Yahoo! est? de cara nova. Venha conferir!
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060915/af4e6896/attachment.html 

From open.zone at virgin.net  Fri Sep 15 08:21:36 2006
From: open.zone at virgin.net (Micheal J)
Date: Fri, 15 Sep 2006 16:21:36 +0100
Subject: [antlr-interest] best way do type-checking
In-Reply-To: <20060914225016.27664.qmail@web15707.mail.cnb.yahoo.com>
Message-ID: <009301c6d8da$a3787b10$c704a8c0@hercules>

Hi,

> I am using 2.7.7 and target language is c#.
> 
> For doing type checking, I feel I have to generate a class 
> object for each rule when I walk the AST generated during 
> parsing, then fall to use the coventional visitor method. 
> Could anyone tell me if this is right way that antlr expects? 

There is no right way that ANTLR expects.

If your AST is an homogenous ANTLR AST (all nodes are instances of the same
type), you can use ANTLR TreeParser(s) or you could write your own ad-hoc
type checker (like Andy Tripp does).

If you wish to use the visitor pattern with ANTLR ASTs, you should develop
and use heterogeneous ANTLR AST nodes.

Otherwise you could use a custom AST implementation with the visitor pattern
(or some other ad-hoc solution). The TreeDL toolset
(http://treedl.sourceforge.net/) can generate a lot of the code for the AST
Nodes as well as visitor templates etc for you in this case. I've tested the
C# output and it does work reasonably well.


Micheal

-----------------------
The best way to contact me is via the list/forum. My time is very limited.


From vnpham.us at gmail.com  Fri Sep 15 14:08:26 2006
From: vnpham.us at gmail.com (Vinh N. Pham)
Date: Fri, 15 Sep 2006 17:08:26 -0400
Subject: [antlr-interest] Symbol table
Message-ID: <450B164A.8010003@adelphia.net>

Hi,
    I've seen in the Antlr overview slides a question "What if we want 
to keep the symbol tables around after parsing?" but I do not see the 
answer.  So, what is the answer for this question?

Thanks,

Vinh N. Pham

From vnpham.us at gmail.com  Fri Sep 15 14:10:44 2006
From: vnpham.us at gmail.com (Vinh N. Pham)
Date: Fri, 15 Sep 2006 17:10:44 -0400
Subject: [antlr-interest] Symbol Table
Message-ID: <450B16D4.7030606@gmail.com>

Hi,
   I've seen in the Antlr overview slides a question "What if we want to 
keep the symbol tables around after parsing?" but I do not see the 
answer.  So, what is the answer for this question?

Thanks,

Vinh N. Pham

From gudnabrsam at yahoo.com  Fri Sep 15 14:52:41 2006
From: gudnabrsam at yahoo.com (Matt Benson)
Date: Fri, 15 Sep 2006 14:52:41 -0700 (PDT)
Subject: [antlr-interest] [antlr-dev] Token is an interface now
In-Reply-To: <8F792FC0-685C-43F8-ADC4-7CDD19BE7526@cs.usfca.edu>
Message-ID: <20060915215241.50670.qmail@web55110.mail.re4.yahoo.com>

So what all belongs in the runtime jar?

-Matt

--- Terence Parr <parrt at cs.usfca.edu> wrote:

> and I have removed dependencies in runtime to
> nonruntime stuff.   
> added class org.antlr.runtime.misc.Stats
> 
> Ter
> _______________________________________________
> antlr-dev mailing list
> antlr-dev at antlr.org
> http://www.antlr.org/mailman/listinfo/antlr-dev
> 


__________________________________________________
Do You Yahoo!?
Tired of spam?  Yahoo! Mail has the best spam protection around 
http://mail.yahoo.com 

From parrt at cs.usfca.edu  Fri Sep 15 14:54:23 2006
From: parrt at cs.usfca.edu (Terence Parr)
Date: Fri, 15 Sep 2006 14:54:23 -0700
Subject: [antlr-interest] [antlr-dev] Token is an interface now
In-Reply-To: <20060915215241.50670.qmail@web55110.mail.re4.yahoo.com>
References: <20060915215241.50670.qmail@web55110.mail.re4.yahoo.com>
Message-ID: <50631C4F-A889-4B42-941E-002F04632257@cs.usfca.edu>


On Sep 15, 2006, at 2:52 PM, Matt Benson wrote:

> So what all belongs in the runtime jar?

only stuff needed at runtime and nothing needed purely by the tool.

Ter


From gudnabrsam at yahoo.com  Fri Sep 15 15:01:12 2006
From: gudnabrsam at yahoo.com (Matt Benson)
Date: Fri, 15 Sep 2006 15:01:12 -0700 (PDT)
Subject: [antlr-interest] [antlr-dev] Token is an interface now
In-Reply-To: <50631C4F-A889-4B42-941E-002F04632257@cs.usfca.edu>
Message-ID: <20060915220113.56734.qmail@web55103.mail.re4.yahoo.com>

If you all could only see my eyes rolling...

I MEAN, do you know what those are, or do we need a
tool to tell us?  :)

I assume org.antlr.runtime, and ... what?  org.antlr.*
?  What about the IntSet class you mentioned?

-Matt

--- Terence Parr <parrt at cs.usfca.edu> wrote:

> 
> On Sep 15, 2006, at 2:52 PM, Matt Benson wrote:
> 
> > So what all belongs in the runtime jar?
> 
> only stuff needed at runtime and nothing needed
> purely by the tool.
> 
> Ter
> 
> 


__________________________________________________
Do You Yahoo!?
Tired of spam?  Yahoo! Mail has the best spam protection around 
http://mail.yahoo.com 

From parrt at cs.usfca.edu  Fri Sep 15 15:05:30 2006
From: parrt at cs.usfca.edu (Terence Parr)
Date: Fri, 15 Sep 2006 15:05:30 -0700
Subject: [antlr-interest] [antlr-dev] Token is an interface now
In-Reply-To: <20060915220113.56734.qmail@web55103.mail.re4.yahoo.com>
References: <20060915220113.56734.qmail@web55103.mail.re4.yahoo.com>
Message-ID: <4F8890A4-EFD7-4BFF-8C69-CB99BB6CC313@cs.usfca.edu>


On Sep 15, 2006, at 3:01 PM, Matt Benson wrote:

> If you all could only see my eyes rolling...
>
> I MEAN, do you know what those are, or do we need a
> tool to tell us?  :)

just call me literal. ;)

>
> I assume org.antlr.runtime, and ... what?  org.antlr.*
> ?  What about the IntSet class you mentioned?

I just cleaned it up.  I changed IntSet to a Object ptr as that was  
that it needed.  Moved GrammarReport.stddev() stats routines to  
Stats.  Done. :)

Ter

From sunjigang1965 at yahoo.com.cn  Sat Sep 16 07:28:58 2006
From: sunjigang1965 at yahoo.com.cn (=?gb2312?q?=CB=EF=BC=CD=B8=D5=20Jigang=20(Robert)=20Sun?=)
Date: Sat, 16 Sep 2006 22:28:58 +0800 (CST)
Subject: [antlr-interest] antlr v3 rebuilt
Message-ID: <20060916142858.7545.qmail@web15713.mail.cnb.yahoo.com>

I am not a java user. So could anyone give me detailed instruction on rebuilding antlr v3 b2. I
could not understand what on http://www.antlr.org/wiki/pages/viewpage.action?pageId=732, espcially
CLASSPATH.

Thanks.
Jigang


		
___________________________________________________________ 
????????-3.5G???20M??? 
http://cn.mail.yahoo.com

From ewbank at gmail.com  Sat Sep 16 15:36:39 2006
From: ewbank at gmail.com (Bryan Ewbank)
Date: Sat, 16 Sep 2006 18:36:39 -0400
Subject: [antlr-interest] Symbol Table
In-Reply-To: <450B16D4.7030606@gmail.com>
References: <450B16D4.7030606@gmail.com>
Message-ID: <dd3a065f0609161536o5c74c6bfy8d0036e7867efb5f@mail.gmail.com>

Well, once you define the content of the symbol table, simply create a
symbol table before you create your parser, and register the symbol
table with your parser via either a constructor parameter or another
interface.

There are other ways, too; just think of the symbol table as an
object, and figure out where it lives... then put it there.

On 9/15/06, Vinh N. Pham <vnpham.us at gmail.com> wrote:
> Hi,
>    I've seen in the Antlr overview slides a question "What if we want to
> keep the symbol tables around after parsing?" but I do not see the
> answer.  So, what is the answer for this question?
>
> Thanks,
>
> Vinh N. Pham
>

From sunjigang1965 at yahoo.com.cn  Sun Sep 17 05:31:55 2006
From: sunjigang1965 at yahoo.com.cn (=?gb2312?q?=CB=EF=BC=CD=B8=D5=20Jigang=20(Robert)=20Sun?=)
Date: Sun, 17 Sep 2006 20:31:55 +0800 (CST)
Subject: [antlr-interest] =?gb2312?b?u9i4tKO6IFJlOiAgYmVzdCB3YXkgZG8gdHlw?=
 =?gb2312?b?ZS1jaGVja2luZw==?=
In-Reply-To: <009301c6d8da$a3787b10$c704a8c0@hercules>
Message-ID: <20060917123156.79411.qmail@web15706.mail.cnb.yahoo.com>

>From v3 introduction, I know it supports parameter passing to sub rule and a rule can return
mutiple results. With this function, I can excute actions while walking AST. Unfortunately
currently it could not generate c#. Who knows when?

--- Micheal J <open.zone at virgin.net>??:

> Hi,
> 
> > I am using 2.7.7 and target language is c#.
> > 
> > For doing type checking, I feel I have to generate a class 
> > object for each rule when I walk the AST generated during 
> > parsing, then fall to use the coventional visitor method. 
> > Could anyone tell me if this is right way that antlr expects? 
> 
> There is no right way that ANTLR expects.
> 
> If your AST is an homogenous ANTLR AST (all nodes are instances of the same
> type), you can use ANTLR TreeParser(s) or you could write your own ad-hoc
> type checker (like Andy Tripp does).
> 
> If you wish to use the visitor pattern with ANTLR ASTs, you should develop
> and use heterogeneous ANTLR AST nodes.
> 
> Otherwise you could use a custom AST implementation with the visitor pattern
> (or some other ad-hoc solution). The TreeDL toolset
> (http://treedl.sourceforge.net/) can generate a lot of the code for the AST
> Nodes as well as visitor templates etc for you in this case. I've tested the
> C# output and it does work reasonably well.
> 
> 
> Micheal
> 
> -----------------------
> The best way to contact me is via the list/forum. My time is very limited.
> 
> 



		
___________________________________________________________ 
??????-3.5G???20M?? 
http://cn.mail.yahoo.com/

From greg at onvoq.com  Sun Sep 17 11:00:38 2006
From: greg at onvoq.com (Greg Clemenson)
Date: Sun, 17 Sep 2006 11:00:38 -0700
Subject: [antlr-interest] @SuppressWarnings("all")
Message-ID: <F0059D5F-E7ED-4437-841F-82E0336902BF@onvoq.com>

In Antlr 3.0b4 I can't figure out how to get @SuppressWarnings("all")  
just before the Parser or Lexer class definition in Java.  Putting it  
in the @parser::header section doesn't work, since the Java template  
inserts additional import statements following the inserted  
@SuppressWarnings("all"), causing a Java compile error.  I was  
thinking there might be some sort of @header::preamble section (also  
@lexer::preamble) that could insert such things before the class  
declarations.  Perhaps there is already a mechanism for doing this,  
but I just can't find it?

Thanks,
Greg


From parrt at cs.usfca.edu  Sun Sep 17 17:35:55 2006
From: parrt at cs.usfca.edu (Terence Parr)
Date: Sun, 17 Sep 2006 17:35:55 -0700
Subject: [antlr-interest] @SuppressWarnings("all")
In-Reply-To: <F0059D5F-E7ED-4437-841F-82E0336902BF@onvoq.com>
References: <F0059D5F-E7ED-4437-841F-82E0336902BF@onvoq.com>
Message-ID: <B97C3B66-6335-4965-9FE0-83D9992E28A5@cs.usfca.edu>

hi. You can just tweak the templates in org.antlr.codegen.templates/ 
Java/Java.stg :)  call it GregJava.stg and then use language=GregJava  
in the options. :)

Ter
On Sep 17, 2006, at 11:00 AM, Greg Clemenson wrote:

> In Antlr 3.0b4 I can't figure out how to get @SuppressWarnings 
> ("all") just before the Parser or Lexer class definition in Java.   
> Putting it in the @parser::header section doesn't work, since the  
> Java template inserts additional import statements following the  
> inserted @SuppressWarnings("all"), causing a Java compile error.  I  
> was thinking there might be some sort of @header::preamble section  
> (also @lexer::preamble) that could insert such things before the  
> class declarations.  Perhaps there is already a mechanism for doing  
> this, but I just can't find it?
>
> Thanks,
> Greg
>


From craig.p.walters at monsanto.com  Sun Sep 17 20:25:13 2006
From: craig.p.walters at monsanto.com (WALTERS, CRAIG P [AG/1000])
Date: Sun, 17 Sep 2006 22:25:13 -0500
Subject: [antlr-interest] Newbie needs guidance on parsing SQL
Message-ID: <633248C3A654B740B4C2FFD67A42C6CA01D5D4C4@NA1000EXM02.na.ds.monsanto.com>

I am doing my 1st antlr project (version 2.7.6).  I downloaded DmlSQL2/SQL2
and converted them from C++ to Java.  What I need to do is scan a string
containing (Oracle) SQL DML and extract all of the names of the tables that
are the targets of modifications (INSERT, UPDATE, DELETE, TRUNCATE).  I
can't figure out how to get the table names.  Can someone give me some
suggestions?

Craig

---------------------------------------------------------------------------------------------------------
This e-mail message may contain privileged and/or confidential information, and is intended to be received only by persons entitled to receive such information. If you have received this e-mail in error, please notify the sender immediately. Please delete it and all attachments from any servers, hard drives or any other media. Other use of this e-mail by you is strictly prohibited.


All e-mails and attachments sent and received are subject to monitoring, reading and archival by Monsanto. The recipient of this e-mail is solely responsible for checking for the presence of "Viruses" or other "Malware". Monsanto accepts no liability for any damage caused by any such code transmitted by or accompanying this e-mail or any attachment.
---------------------------------------------------------------------------------------------------------


From rhill03 at eds.com  Mon Sep 18 00:51:29 2006
From: rhill03 at eds.com (Hill, Robert)
Date: Mon, 18 Sep 2006 08:51:29 +0100
Subject: [antlr-interest] ANTLRWorks 1.0b3
In-Reply-To: <F0510ECF-44CE-41C0-AD0A-4CB754D1C4E3@arizona-software.ch>
Message-ID: <2E909902FD3A03419E3A905908AE3DD40259DD6D@UKNSM201.emea.corp.eds.com>

Thanks Jean.
	I realise now that Q2 is intrinsically related to Q1..D'Oh!
Lol, should've left factored the questions list before I pressed send ;)

Cheers! 
Rob

--
Rob Hill
EDS - Hallamshire Business Park
F1E/045
Sheffield	
T:	+44 (0) 114 291 1928
M:	+44 (0) 791 732 1227
E:	rhill03 at eds.com

 

>-----Original Message-----
>From: Jean Bovet [mailto:antlr-list at arizona-software.ch] 
>Sent: 16 September 2006 00:04
>To: Hill, Robert
>Cc: Terence Parr
>Subject: Re: [antlr-interest] ANTLRWorks 1.0b3
>
>Dear Rob,
>
>Thanks for your e-mail!
>
>>
>> 1) is the IntelliJ plug-in always in sync with the 
>AntlrWorks Release?
>
>Almost... it is still at the b2 version.
>
>> 2) When will the plug-in incorporate Kunle's C# Target? 
>(Picture me on 
>> my knees begging ;) )
>>
>
>Mmm... good question. It's more an ANTLR question: I'm 
>embedding ANTLR 3.0b4 so if it's in there, you are all set. 
>Any comment Terence?
>
>> I have to say its an absolutely outstanding bit of kit mate. 
>Excellent 
>> job!
>>
>
>Thanks!
>
>Jean
>
>

From e.papegaaij at student.utwente.nl  Mon Sep 18 01:16:50 2006
From: e.papegaaij at student.utwente.nl (Emond Papegaaij)
Date: Mon, 18 Sep 2006 10:16:50 +0200
Subject: [antlr-interest] @SuppressWarnings("all")
In-Reply-To: <F0059D5F-E7ED-4437-841F-82E0336902BF@onvoq.com>
References: <F0059D5F-E7ED-4437-841F-82E0336902BF@onvoq.com>
Message-ID: <200609181016.50513.e.papegaaij@student.utwente.nl>

On Sunday 17 September 2006 20:00, Greg Clemenson wrote:
> In Antlr 3.0b4 I can't figure out how to get @SuppressWarnings("all")
> just before the Parser or Lexer class definition in Java.  Putting it
> in the @parser::header section doesn't work, since the Java template
> inserts additional import statements following the inserted
> @SuppressWarnings("all"), causing a Java compile error.  I was
> thinking there might be some sort of @header::preamble section (also
> @lexer::preamble) that could insert such things before the class
> declarations.  Perhaps there is already a mechanism for doing this,
> but I just can't find it?

I'm using this ant rule:
<replaceregexp file="${filename}.java"
    match="^public class"
    replace="@SuppressWarnings(&quot;unchecked&quot;) public class"
    flags="m" />

Maybe ANTLR should have a Java5 target? :)

Best regards,
Emond

From ewbank at gmail.com  Mon Sep 18 06:06:08 2006
From: ewbank at gmail.com (Bryan Ewbank)
Date: Mon, 18 Sep 2006 09:06:08 -0400
Subject: [antlr-interest] TreeParser development: How to build an
	effective "dont care" rule?
In-Reply-To: <20060915145158.80085.qmail@web39507.mail.mud.yahoo.com>
References: <20060915145158.80085.qmail@web39507.mail.mud.yahoo.com>
Message-ID: <dd3a065f0609180606y129643f2na1e38d6ae735515d@mail.gmail.com>

The rule looks correct; however,  I suspect that you have problems where the
rule is used.  There must be a rule somewhere else that has one too many
"dontCare" matches in its production.

Perhaps something like a declaration that has an optional initial value?

To help you debug, use the "-trace" option and discover the rule being
processed when the error is detected.

On 9/15/06, luciano mantuaneli <mantu_lists at yahoo.com.br> wrote:
>
> Hi!
> I'm developing a TreeParser, and I wish to know how to create an rule that
> do nothing on matching any token.
> I tried to do this with this rule:
>
> dontCare:
>     .
> ;
>
> But, this rule doesn't seems to work properly. Depending on how my
> TreeParser  grammar is written, I get the following error message:
>
> <AST>: Mismatched Token: expecting any AST node
>
> My questions:
> 1)My dontCare rule is proper for the task mentioned above?
> 2)Do you know how this error message is related with my dontCare rule?
>
> ------------------------------
> O Yahoo! est? de cara nova. Venha conferir <http://br.yahoo.com>!
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060918/d0fc6c63/attachment.html 

From pismikrop at gmail.com  Mon Sep 18 06:14:48 2006
From: pismikrop at gmail.com (=?ISO-8859-9?Q?F=FDrat_K=DC=C7=DCK?=)
Date: Mon, 18 Sep 2006 16:14:48 +0300
Subject: [antlr-interest] separate lexer and parser
Message-ID: <8e210baf0609180614r7a2326ddl605fa31a873051ea@mail.gmail.com>

Hi,
i separate lexer and parser into two files.
but parser does not evaluate java codes in the parser file.

i used antlr-v4b4.
What should i do?

-- 
??r. G?r. F?rat K???K
ADAMYO Distance Learning
SAKARYA University / TURKEY
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060918/b4d6ef89/attachment.html 

From peter.paulus at nerocmediaware.nl  Mon Sep 18 08:03:08 2006
From: peter.paulus at nerocmediaware.nl (Peter Paulus)
Date: Mon, 18 Sep 2006 17:03:08 +0200
Subject: [antlr-interest] E-mail noise
Message-ID: <8819B81C-19EB-4183-A3C7-A953E74A0CA0@nerocmediaware.nl>

Hello all,

My message of last friday 'Re: [antlr-interest] ANTLR 2.7.6/C++:  
parser controlled conditional lexer whitespace skipping?' somehow got  
resent a few times. I have been busy transferring my mailboxes to  
another machine. Somehow the mail program decided to resent some  
messages.

My apologies for the noise this has created. That was never intended.

With kind regards,
Peter Paulus
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060918/fa14e298/attachment.html 

From ewbank at gmail.com  Mon Sep 18 11:04:34 2006
From: ewbank at gmail.com (Bryan Ewbank)
Date: Mon, 18 Sep 2006 14:04:34 -0400
Subject: [antlr-interest] TreeParser development: How to build an
	effective "dont care" rule?
In-Reply-To: <20060915145158.80085.qmail@web39507.mail.mud.yahoo.com>
References: <20060915145158.80085.qmail@web39507.mail.mud.yahoo.com>
Message-ID: <dd3a065f0609181104g48bec8ebg2d0b41a58699dfd@mail.gmail.com>

The rule looks correct; however,  I suspect that you have problems
where the rule is used.  There must be a rule somewhere else that has
one too many "dontCare" matches in its production.

Perhaps something like a declaration that has an optional initial value?

To help you debug, use the "-trace" option and discover the rule being
processed when the error is detected.

- Bryan

On 9/15/06, luciano mantuaneli <mantu_lists at yahoo.com.br> wrote:
> Hi!
> I'm developing a TreeParser, and I wish to know how to create an rule that
> do nothing on matching any token.
> I tried to do this with this rule:
>
> dontCare:
>     .
> ;
>
> But, this rule doesn't seems to work properly. Depending on how my
> TreeParser  grammar is written, I get the following error message:
>
> <AST>: Mismatched Token: expecting any AST node
>
> My questions:
> 1)My dontCare rule is proper for the task mentioned above?
> 2)Do you know how this error message is related with my dontCare rule?

From mantu_lists at yahoo.com.br  Mon Sep 18 13:58:08 2006
From: mantu_lists at yahoo.com.br (luciano mantuaneli)
Date: Mon, 18 Sep 2006 20:58:08 +0000 (GMT)
Subject: [antlr-interest] TreeParser development: How to build an
	effective "dont care" rule?
Message-ID: <20060918205808.42249.qmail@web39505.mail.mud.yahoo.com>

  Indeed, you're right, Bryan! After read your post, I checked my grammar with more attention and i faound an optional value that i treated in a wrong way.
  Thank you very much!

Bryan Ewbank <ewbank at gmail.com> escreveu:
  The rule looks correct; however, I suspect that you have problems
where the rule is used. There must be a rule somewhere else that has
one too many "dontCare" matches in its production.

Perhaps something like a declaration that has an optional initial value?

To help you debug, use the "-trace" option and discover the rule being
processed when the error is detected.

- Bryan

On 9/15/06, luciano mantuaneli wrote:
> Hi!
> I'm developing a TreeParser, and I wish to know how to create an rule that
> do nothing on matching any token.
> I tried to do this with this rule:
>
> dontCare:
> .
> ;
>
> But, this rule doesn't seems to work properly. Depending on how my
> TreeParser grammar is written, I get the following error message:
>
> : Mismatched Token: expecting any AST node
>
> My questions:
> 1)My dontCare rule is proper for the task mentioned above?
> 2)Do you know how this error message is related with my dontCare rule?

    
---------------------------------
  

 		
---------------------------------
 Novidade no Yahoo! Mail: receba alertas de novas mensagens no seu celular. Registre seu aparelho agora!
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060918/15bba4ab/attachment.html 

From johnvms11 at yahoo.com  Mon Sep 18 17:47:29 2006
From: johnvms11 at yahoo.com (John Vanderburg)
Date: Mon, 18 Sep 2006 17:47:29 -0700 (PDT)
Subject: [antlr-interest] ANTLR 3.0b4 and C# Target
Message-ID: <20060919004729.56036.qmail@web60620.mail.yahoo.com>

Has anyone had success using the C# target with 3.0b4?   I'm getting errors in the CyclicDFAs area of the Lexer, for example:

    public static readonly short[][] DFA10_transition = {
        dfa10_transition1,
        dfa10_transition0,
        dfa10_transition_null,

Error    5    The name 'dfa10_transition1' does not exist in the current context

The Java version generates:

    public static final String[] DFA10_transition = {
        "\1\2\1\uffff\12\1",
        "\1\3\1\uffff\12\1",
        "",
        "",

I've looked at the templates but can't locate were this is generated.  Any help would be appreciated.

Thanks

John Vanderburg, johnvms11 at yahoo.com

"Why prolong the agony?  All men must die."
- Roger Waters, 5:01 AM (The Pros and Cons of Hitchhiking)

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060918/ad3218ef/attachment.html 

From ogirard at student.ethz.ch  Tue Sep 19 00:04:46 2006
From: ogirard at student.ethz.ch (Olivier Girard)
Date: Tue, 19 Sep 2006 09:04:46 +0200
Subject: [antlr-interest] testLiterals in ANTLR v3?
Message-ID: <000601c6dbb9$e3ba06d0$3c531eac@parislaptop>

Hi, 

I'd like to parse keyword queries using ANTLR v3.0b4.
Such as:
    'key word and query'

This is a list of words (idents), which is fine. But 'and' is a special
keyword too. So I'd like to let my parser recognize this. If I use &&
instead of the keyword 'and', there's no problem. So the grammar would work.

Is there a possibility to check keywords in ANTLR v3 (similar to the
testLiterals option in previous versions)? How can this be done in a simple
way?

Thanks for help.

Best, Olivier



Olivier Girard
MSc Student, ETH Z?rich
Dept. of Computer Science

o.girard at gmx.ch
ogirard at student.ethz.ch


From Michiel_Vermandel at axi.be  Tue Sep 19 00:19:51 2006
From: Michiel_Vermandel at axi.be (Michiel Vermandel)
Date: Tue, 19 Sep 2006 09:19:51 +0200
Subject: [antlr-interest] Tutorial on using ANTLR while creating IDEs
 on	top of Eclipse
In-Reply-To: <41fed8f80609060541sf063409l74435fd690cdd4a1@mail.gmail.com>
Message-ID: <OF6785D92B.3D70EDFA-ONC12571EE.002807C8-C12571EE.002844F6@Axi.be>

Hi,

Can you tell when the next parts of this tutorial will be available on the 
IBM website?
I am really interested in the full story!

Thanks!

Michiel






"Prashant Deva" <prashant.deva at gmail.com> 
Sent by: antlr-interest-bounces at antlr.org
06/09/2006 14:41

To
"Michiel Vermandel" <Michiel_Vermandel at axi.be>
cc
Antlr Interest <antlr-interest at antlr.org>
Subject
Re: [antlr-interest] Tutorial on using ANTLR while creating IDEs on top of 
Eclipse






Hi Michiel,

* (How) can I download the complete series at once? 
   I can only find something like "print this page" on a per page bases.

Currently only the first part has been published by IBM. the second and 
third parts should be published in the coming weeks.

As for downloading the tutorial, once you sign in, you will find a link on 
the right which allows you to download the entire tutorial as a pdf file.

* Furthermore I can only find Part 1 by following the specified link. 
   Am I too hasty or missing something?

Currently only the first part has been published.


-- 
Prashant Deva
Creator, ANTLR Studio
Founder, Placid Systems, www.placidsystems.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060919/9da0e4d1/attachment.html 

From prashant.deva at gmail.com  Tue Sep 19 01:21:16 2006
From: prashant.deva at gmail.com (Prashant Deva)
Date: Tue, 19 Sep 2006 01:21:16 -0700
Subject: [antlr-interest] Tutorial on using ANTLR while creating IDEs on
	top of Eclipse
In-Reply-To: <OF6785D92B.3D70EDFA-ONC12571EE.002807C8-C12571EE.002844F6@Axi.be>
References: <41fed8f80609060541sf063409l74435fd690cdd4a1@mail.gmail.com>
	<OF6785D92B.3D70EDFA-ONC12571EE.002807C8-C12571EE.002844F6@Axi.be>
Message-ID: <41fed8f80609190121k32ffa879k433e02bbd5906314@mail.gmail.com>

>Can you tell when the next parts of this tutorial will be available on the
IBM website?
>I am really interested in the full story!

Well its really IBM which decides when to publish the tutorials, so i really
dont know.
Although ibm developerworks updates each week and i have already submitted
all the 3 of them.

I can tell you a bit about the next parts though-
The next 2 parts mainly deal with implementing the UI, so you are gonna see
a lot of code and eclipse apis in action.
If you want to know hard core theory, the 2nd part may not be much to your
taste but you will enjoy the latter parts of the 3rd tutorial, which deals
with how to make your IDE stand out and shows you some of the tricks used in
commercial IDEs.

-- 
Prashant Deva
Creator, ANTLR Studio
Founder, Placid Systems, www.placidsystems.com

On 9/19/06, Michiel Vermandel <Michiel_Vermandel at axi.be> wrote:
>
>
> Hi,
>
> Can you tell when the next parts of this tutorial will be available on the
> IBM website?
> I am really interested in the full story!
>
> Thanks!
>
> Michiel
>
>
>
>
>
>  *"Prashant Deva" <prashant.deva at gmail.com>*
> Sent by: antlr-interest-bounces at antlr.org
>
> 06/09/2006 14:41
>   To
> "Michiel Vermandel" <Michiel_Vermandel at axi.be>  cc
> Antlr Interest <antlr-interest at antlr.org>
>  Subject
> Re: [antlr-interest] Tutorial on using ANTLR while creating IDEs on
>  top of Eclipse
>
>
>
>
>
>
> Hi Michiel,
>
> * (How) can I download the complete series at once?
>   I can only find something like "print this page" on a per page bases.
>
> Currently only the first part has been published by IBM. the second and
> third parts should be published in the coming weeks.
>
> As for downloading the tutorial, once you sign in, you will find a link on
> the right which allows you to download the entire tutorial as a pdf file.
>
> * Furthermore I can only find Part 1 by following the specified link.
>   Am I too hasty or missing something?
>
> Currently only the first part has been published.
>
>
> --
> Prashant Deva
> Creator, ANTLR Studio
> Founder, Placid Systems, *www.placidsystems.com*<http://www.placidsystems.com/>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060919/b7d41937/attachment.html 

From sunjigang1965 at yahoo.com.cn  Tue Sep 19 03:40:37 2006
From: sunjigang1965 at yahoo.com.cn (=?gb2312?q?=CB=EF=BC=CD=B8=D5=20Jigang=20(Robert)=20Sun?=)
Date: Tue, 19 Sep 2006 18:40:37 +0800 (CST)
Subject: [antlr-interest] antlr download page does know v4
Message-ID: <20060919104037.23185.qmail@web15706.mail.cnb.yahoo.com>

I have asked my supervisor a silly question, c# target generation with v3, and I was told v3 beta
4 has the capacity. I have always been expecting the latest version from the download page. Why
not put the beta 4 link there.

Jigang 


	

	
		
___________________________________________________________ 
Mp3???-???????
http://music.yahoo.com.cn/?source=mail_mailbox_footer

From parrt at cs.usfca.edu  Tue Sep 19 08:28:27 2006
From: parrt at cs.usfca.edu (Terence Parr)
Date: Tue, 19 Sep 2006 08:28:27 -0700
Subject: [antlr-interest] antlr download page does know v4
In-Reply-To: <20060919104037.23185.qmail@web15706.mail.cnb.yahoo.com>
References: <20060919104037.23185.qmail@web15706.mail.cnb.yahoo.com>
Message-ID: <F1C74619-21C6-442A-BE2C-3FDCA363F8B1@cs.usfca.edu>

Ooops...fixed.  Sorry.  it was under news section of site though, right?
Ter
On Sep 19, 2006, at 3:40 AM, ??? Jigang ((Robert)) Sun wrote:

> I have asked my supervisor a silly question, c# target generation  
> with v3, and I was told v3 beta
> 4 has the capacity. I have always been expecting the latest version  
> from the download page. Why
> not put the beta 4 link there.
>
> Jigang
>
>
> 	
>
> 	
> 		
> ___________________________________________________________
> Mp3???-???????
> http://music.yahoo.com.cn/?source=mail_mailbox_footer


From sunjigang1965 at yahoo.com.cn  Tue Sep 19 09:15:14 2006
From: sunjigang1965 at yahoo.com.cn (=?gb2312?q?=CB=EF=BC=CD=B8=D5=20Jigang=20(Robert)=20Sun?=)
Date: Wed, 20 Sep 2006 00:15:14 +0800 (CST)
Subject: [antlr-interest] Problem to run Beta 4
In-Reply-To: <F1C74619-21C6-442A-BE2C-3FDCA363F8B1@cs.usfca.edu>
Message-ID: <20060919161514.51680.qmail@web15711.mail.cnb.yahoo.com>


I tried variuos windows dos commands to run v3 beta4, one of the example is

D:\MiniClean\Clean>path=d:\j2sdk1.4.2_05\bin

D:\MiniClean\Clean>set classpath=D:\minifram\antlr-3.0b4\lib\antlr-2.7.6.jar;D:\minifram\antlr
-3.0b4\lib\antlr-3.0b4.jar;D:\minifram\antlr-3.0b4\src\org\antlr

D:\MiniClean\Clean>java  D:\minifram\antlr-3.0b4\src\org\antlr.Tool par.g


Error message:

Exception in thread "main" java.lang.NoClassDefFoundError: D:\minifram\antlr-3/0b4\src\org\ant
lr/Tool

I have downloaded and extracted beta 4 onto D:\minifram\.

Could anyone give me an idea?  I am not a java user, so I have this kind of problems.

Thanks.

Jigang




		
___________________________________________________________ 
????????-3.5G???20M??? 
http://cn.mail.yahoo.com

From johnvms11 at yahoo.com  Tue Sep 19 09:40:33 2006
From: johnvms11 at yahoo.com (John Vanderburg)
Date: Tue, 19 Sep 2006 09:40:33 -0700 (PDT)
Subject: [antlr-interest] Problem to run Beta 4
In-Reply-To: <20060919161514.51680.qmail@web15711.mail.cnb.yahoo.com>
Message-ID: <20060919164033.54511.qmail@web60625.mail.yahoo.com>

I have Beta 4 install in C:\antlr\30b4  and use the following .bat file to run the antlr.Tool
 
 
@echo off
set CP=C:\antlr\30b4\lib\antlr-3.0b4.jar;C:\antlr\30b4\lib\antlr-2.7.6.jar;C:\antlr\30b4\lib\stringtemplate-2.3b9.jar;%CLASSPATH%
set cmd=java -classpath "%CP%" org.antlr.Tool %*
echo %cmd%
%cmd%
set CP
 
I have CLASSPATH set as an environment variable (Right click on My Computer, Click on the Advanced Tab and edit System Variables), as follows (note the '.' at the beginning of the line):
 
.;C:\Program Files\Java\jre1.5.0_06\lib\ext\QTJava.zip
 
 
Also, I wasn't able to get the C# target to work, so I've been using Java to test with.  I use the following .bat file to 
 
The file is called antlrv3jc.bat
 
@echo off
set CP=C:\antlr\30b4\lib\antlr-3.0b4.jar;C:\antlr\30b4\lib\antlr-2.7.6.jar;C:\antlr\30b4\lib\stringtemplate-2.3b9.jar;%CLASSPATH%
set cmd=javac -classpath "%CP%" %1 
echo %cmd%
%cmd%
set CP=

 
Hope this helps
 

 
John Vanderburg, johnvms11 at yahoo.com

"Why prolong the agony? All men must die."
- Roger Waters, 5:01 AM (The Pros and Cons of Hitchhiking) 



----- Original Message ----
From: ??? Jigang (Robert) Sun <sunjigang1965 at yahoo.com.cn>
To: antlr-interest at antlr.org
Sent: Tuesday, September 19, 2006 11:15:14 AM
Subject: [antlr-interest] Problem to run Beta 4


I tried variuos windows dos commands to run v3 beta4, one of the example is

D:\MiniClean\Clean>path=d:\j2sdk1.4.2_05\bin

D:\MiniClean\Clean>set classpath=D:\minifram\antlr-3.0b4\lib\antlr-2.7.6.jar;D:\minifram\antlr
-3.0b4\lib\antlr-3.0b4.jar;D:\minifram\antlr-3.0b4\src\org\antlr

D:\MiniClean\Clean>java  D:\minifram\antlr-3.0b4\src\org\antlr.Tool par.g


Error message:

Exception in thread "main" java.lang.NoClassDefFoundError: D:\minifram\antlr-3/0b4\src\org\ant
lr/Tool

I have downloaded and extracted beta 4 onto D:\minifram\.

Could anyone give me an idea?  I am not a java user, so I have this kind of problems.

Thanks.

Jigang




        
___________________________________________________________ 
????????-3.5G???20M??? 
http://cn.mail.yahoo.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060919/74eaf48d/attachment.html 

From jimi at intersystems.com  Tue Sep 19 09:44:30 2006
From: jimi at intersystems.com (Jim Idle)
Date: Tue, 19 Sep 2006 12:44:30 -0400
Subject: [antlr-interest] Problem to run Beta 4
Message-ID: <20060919164431.28FA915DD@mail.intersystems.com>

java classpaths are a pain, especially in Windows.

To run rc3, you need a few things:

1) The version that Ter distributes is built for JDK 1.4.x not 1.5. I have a 1.5 version as I use JDK 1.5 for various reasons. So, you can build it on JDK 1.5. You might be better off though, as an inexperienced java user, to use the JRE that Ter has built this on. You can build it on 1.5 but really, you need to know a bit more about java to be honest, so try to stick with what is distributed so far. That said, JDK 1.5 should run it I think.

2) You require the antrl2.7.6 jar, which I see you are tying to include in the PATH;

3) You require the stringtemplate library as well though or you will get errors trying to run it. Same thing applies to JDK 1.5.

4) Assuming that you have the appropriate pieces, then:

C:\>set CLASSPATH=C:\antlr3\antlr.jar;C:\antlr3\stringtemplate.jar;C:/antlr3/antlr276.jar

C:\>java org.antlr.Tool

ANTLR Parser Generator   Early Access Version 3.0b5 (??, 2006)  1989-2006
usage: java org.antlr.Tool [args] file.g [file2.g file3.g ...]
  -o outputDir   specify output directory where all output is generated
  -fo outputDir  same as -o but force even files with relative paths to dir
  -lib dir       specify location of token files
  -report        print out a report about the grammar(s) processed
  -print         print out the grammar without actions
  -debug         generate a parser that emits debugging events
  -profile       generate a parser that computes profiling information
  -nfa           generate an NFA for each rule
  -dfa           generate a DFA for each decision point
  -X             display extended argument list

Will do the trick, with directories replaced as appropriate. You might find it easier to set this PATH as a system variable in your environment.

Jim

-----Original Message-----
From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-bounces at antlr.org] On Behalf Of ??? Jigang (Robert) Sun
Sent: Tuesday, September 19, 2006 9:15 AM
To: antlr-interest at antlr.org
Subject: [antlr-interest] Problem to run Beta 4


I tried variuos windows dos commands to run v3 beta4, one of the example is

D:\MiniClean\Clean>path=d:\j2sdk1.4.2_05\bin

D:\MiniClean\Clean>set classpath=D:\minifram\antlr-3.0b4\lib\antlr-2.7.6.jar;D:\minifram\antlr
-3.0b4\lib\antlr-3.0b4.jar;D:\minifram\antlr-3.0b4\src\org\antlr

D:\MiniClean\Clean>java  D:\minifram\antlr-3.0b4\src\org\antlr.Tool par.g


Error message:

Exception in thread "main" java.lang.NoClassDefFoundError: D:\minifram\antlr-3/0b4\src\org\ant
lr/Tool

I have downloaded and extracted beta 4 onto D:\minifram\.

Could anyone give me an idea?  I am not a java user, so I have this kind of problems.

Thanks.

Jigang




		
___________________________________________________________ 
????????-3.5G???20M??? 
http://cn.mail.yahoo.com

-- 
No virus found in this incoming message.
Checked by AVG Free Edition.
Version: 7.1.405 / Virus Database: 268.12.5/450 - Release Date: 9/18/2006
 

-- 
No virus found in this outgoing message.
Checked by AVG Free Edition.
Version: 7.1.405 / Virus Database: 268.12.5/450 - Release Date: 9/18/2006
 

From greg at onvoq.com  Tue Sep 19 11:43:49 2006
From: greg at onvoq.com (Greg Clemenson)
Date: Tue, 19 Sep 2006 11:43:49 -0700
Subject: [antlr-interest] @SuppressWarnings("all")
Message-ID: <4C37AC1C-2A34-413D-9E3F-F9B175B0E469@onvoq.com>

Ter,

Thank you for your reply to my question.  I was not quite able to  
make things work by creating a GregJava.stg.  However, I did get this  
approach to work via just editing Java.stg and rebuilding Antlr.   
This change is OK for me since i am exclusively doing Java 5  
development.  The part of Java.stg changed now reads like this:

<@imports>
import org.antlr.runtime.*;
<if(TREE_PARSER)>
import org.antlr.runtime.tree.*;
<endif>
import java.util.Stack;
import java.util.List;
import java.util.ArrayList;
<if(backtracking)>
import java.util.Map;
import java.util.HashMap;
<endif>
@SuppressWarnings({"unused", "cast"})
<@end>

I suppressed a more specific set of warnings, namely "unused" and  
"cast".

Thank you,
Greg


----------------------
hi. You can just tweak the templates in org.antlr.codegen.templates/ 
Java/Java.stg :)  call it GregJava.stg and then use language=GregJava  
in the options. :)

Ter
On Sep 17, 2006, at 11:00 AM, Greg Clemenson wrote:


In Antlr 3.0b4 I can't figure out how to get @SuppressWarnings("all")  
just before the Parser or Lexer class definition in Java.  Putting it  
in the @parser::header section doesn't work, since the Java template  
inserts additional import statements following the inserted  
@SuppressWarnings("all"), causing a Java compile error.  I was  
thinking there might be some sort of @header::preamble section (also  
@lexer::preamble) that could insert such things before the class  
declarations.  Perhaps there is already a mechanism for doing this,  
but I just can't find it?

Thanks,
Greg


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060919/55cc8a28/attachment.html 

From sunjigang1965 at yahoo.com.cn  Tue Sep 19 12:48:42 2006
From: sunjigang1965 at yahoo.com.cn (=?gb2312?q?=CB=EF=BC=CD=B8=D5=20Jigang=20(Robert)=20Sun?=)
Date: Wed, 20 Sep 2006 03:48:42 +0800 (CST)
Subject: [antlr-interest] request .exe version of v3 beta 4
Message-ID: <20060919194843.76397.qmail@web15703.mail.cnb.yahoo.com>

Would anyone please covert v3 beta 4 into an excutable version run on Windows platform?

Jigang 


		
___________________________________________________________ 
??????-3.5G???20M?? 
http://cn.mail.yahoo.com/

From sunjigang1965 at yahoo.com.cn  Tue Sep 19 14:44:10 2006
From: sunjigang1965 at yahoo.com.cn (=?gb2312?q?=CB=EF=BC=CD=B8=D5=20Jigang=20(Robert)=20Sun?=)
Date: Wed, 20 Sep 2006 05:44:10 +0800 (CST)
Subject: [antlr-interest] =?gb2312?b?u9i4tKO6IFJlOiAgUHJvYmxlbSB0byBydW4g?=
 =?gb2312?b?QmV0YSA0?=
In-Reply-To: <20060919164033.54511.qmail@web60625.mail.yahoo.com>
Message-ID: <20060919214410.66299.qmail@web15707.mail.cnb.yahoo.com>

I put the three .jar files into my working directory, my DOS batch file contains:

path=d:\j2sdk1.4.2_05\bin
java -cp antlr-30b4.jar;stringtemplate-23b9.jar;antlr-276.jar org.antlr.Tool ep.g

excuting the .bat file:

D:\MiniClean\Clean>path=d:\j2sdk1.4.2_05\bin

D:\MiniClean\Clean>java -cp antlr-30b4.jar;stringtemplate-23b9.jar;antlr-276.jar org.antlr.Too
l ep.g
no such locale file org/antlr/tool/templates/messages/zh.stg retrying with English locale
ANTLR Parser Generator   Early Access Version 3.0b4 (??, 2006)  1989-2006

D:\MiniClean\Clean>

I am not sure if it is successful, for "no such locale file.." is echoed, nevertherless it has
produced parser and lexer file, they are .java files. What I want is c# target. Could anyone give
me a quick guidance? Unlike v2 grammar, I have not found a "options { language  = "CSharp";} "
switch permitted in v3 grammar.

Thanks.

Jigang  


--- John Vanderburg <johnvms11 at yahoo.com>??:

> I have Beta 4 install in C:\antlr\30b4  and use the following .bat file to run the antlr.Tool
>  
>  
> @echo off
> set
>
CP=C:\antlr\30b4\lib\antlr-3.0b4.jar;C:\antlr\30b4\lib\antlr-2.7.6.jar;C:\antlr\30b4\lib\stringtemplate-2.3b9.jar;%CLASSPATH%
> set cmd=java -classpath "%CP%" org.antlr.Tool %*
> echo %cmd%
> %cmd%
> set CP
>  
> I have CLASSPATH set as an environment variable (Right click on My Computer, Click on the
> Advanced Tab and edit System Variables), as follows (note the '.' at the beginning of the line):
>  
> .;C:\Program Files\Java\jre1.5.0_06\lib\ext\QTJava.zip
>  
>  
> Also, I wasn't able to get the C# target to work, so I've been using Java to test with.  I use
> the following .bat file to 
>  
> The file is called antlrv3jc.bat
>  
> @echo off
> set
>
CP=C:\antlr\30b4\lib\antlr-3.0b4.jar;C:\antlr\30b4\lib\antlr-2.7.6.jar;C:\antlr\30b4\lib\stringtemplate-2.3b9.jar;%CLASSPATH%
> set cmd=javac -classpath "%CP%" %1 
> echo %cmd%
> %cmd%
> set CP=
> 
>  
> Hope this helps
>  
> 
>  
> John Vanderburg, johnvms11 at yahoo.com
> 
> "Why prolong the agony? All men must die."
> - Roger Waters, 5:01 AM (The Pros and Cons of Hitchhiking) 
> 
> 
> 
> ----- Original Message ----
> From: ??? Jigang (Robert) Sun <sunjigang1965 at yahoo.com.cn>
> To: antlr-interest at antlr.org
> Sent: Tuesday, September 19, 2006 11:15:14 AM
> Subject: [antlr-interest] Problem to run Beta 4
> 
> 
> I tried variuos windows dos commands to run v3 beta4, one of the example is
> 
> D:\MiniClean\Clean>path=d:\j2sdk1.4.2_05\bin
> 
> D:\MiniClean\Clean>set classpath=D:\minifram\antlr-3.0b4\lib\antlr-2.7.6.jar;D:\minifram\antlr
> -3.0b4\lib\antlr-3.0b4.jar;D:\minifram\antlr-3.0b4\src\org\antlr
> 
> D:\MiniClean\Clean>java  D:\minifram\antlr-3.0b4\src\org\antlr.Tool par.g
> 
> 
> Error message:
> 
> Exception in thread "main" java.lang.NoClassDefFoundError: D:\minifram\antlr-3/0b4\src\org\ant
> lr/Tool
> 
> I have downloaded and extracted beta 4 onto D:\minifram\.
> 
> Could anyone give me an idea?  I am not a java user, so I have this kind of problems.
> 
> Thanks.
> 
> Jigang
> 
> 
> 
> 
>         
> ___________________________________________________________ 
> ????????-3.5G???20M??? 
> http://cn.mail.yahoo.com



	

	
		
___________________________________________________________ 
Mp3???-???????
http://music.yahoo.com.cn/?source=mail_mailbox_footer

From zen at freedbms.net  Tue Sep 19 16:03:20 2006
From: zen at freedbms.net (Zenaan Harkness)
Date: Wed, 20 Sep 2006 09:03:20 +1000
Subject: [antlr-interest] Cygwin build env/ files - was Re: Problem to run
	Beta 4
In-Reply-To: <20060919164431.28FA915DD@mail.intersystems.com>
References: <20060919164431.28FA915DD@mail.intersystems.com>
Message-ID: <20060919230320.GA3636@zen700m>

I prefer being in cygwin when I have to be on windows (mutt, grep,
find etc etc), but Java 1.5/5 broke my old build scripts.

Here are the files I have built up over quite some time, for those
who might find them useful.

I also recommend GNU Screen. If anyone needs a Cygwin ready
.screen conf, just ask. For cygwin, I set up XFree and use XTerms
rather than Bash console for Windows, since I can arbitrarily
resize the xterms with mouse.

Cheers
Zenaan


--- ~/bin/go.sh (this makes it easy to get into my working directory):
$ cat /home/zen/bin/go.sh 
#!/bin/sh
# run with ". ~/bin/go.sh"
BASED="/home/zen/my/working/dir"
cd $BASED
. $BASED/conf/env


--- Then, inside ~/my/working/dir, I have the following:
bin/[build,clean,run,etc]
conf/[env,env.path,etc]
doc/
lib/[antlr.jar,st.jar,log4j.jar,yaml.jar,etc]
out/[output of build files]
src/[all inputs to build process - my java packages, conf/, data/ etc]


--- conf/env.path:
$ cat conf/env.path
#!/bin/bash
# to use this file, source it, eg. ". conf/env.sh

JDKBASE="/cygdrive/c/Program Files/Java/jdk1.5.0_08"

PATH=./bin:$JDKBASE/bin:$PATH

export PATH
export BUILDPATH_DEFINED="true"


--- conf/env (aliases j and jc to run java & javac manually,
--- instead of via bin/build and bin/run, which is useful):
--- Note: even though I use these files by sourcing them instead
--- of running them, having the first line makes for nice
--- highlighting when editing.
$ cat conf/env
#!/bin/bash
# to use this file, source it, eg. ". conf/env.sh". For debugging,
# use first line "#!/bin/bash -x"

if [ ! $BUILDPATH_DEFINED ]; then
   . conf/env.path
fi

# Project directories:
CONF=conf
DOC=doc
BIN=bin
LIB=lib
SRC=src
OUT=out
TEMP=$OUT/tmp

BASED=`pwd`

# There are two $CONF directories, src/$CONF and simply $CONF;
# src/$CONF contains release files:
CONFD=$BASED/$SRC/$CONF
TEMPD=$BASED/$TEMP
DOCD=$BASED/$DOC
BIND=$BASED/$BIN
LIBD=$BASED/$LIB
SRCD=$BASED/$SRC
OUTD=$BASED/$OUT

# This should be relative, but at least with SUN's javac from JDK
# 1.5.0_08 on cygwin, paths must be absolute:
CLASSPATH=$LIBD/yaml.jar:$LIBD/st.jar:$LIBD/antlr.jar:$LIBD/foj.jar:$LIBD/log4j.jar
CLASSPATH_LOCAL="`cygpath -wp \"$CLASSPATH:$OUTD\"`"

# Because javac 1.5.0_08 is so flaky with respect to CLASSPATH (at
# least on cygwin/msw),
# we must have separate commends, slightly different, for JAVAC
# and for alias jc:
   JAVAC="javac -d $OUT -sourcepath $SRC -cp $CLASSPATH_LOCAL"
alias jc="javac -d $OUT -sourcepath \"$SRC\" -cp \"$CLASSPATH_LOCAL\""

   JAVA="java -cp $CLASSPATH_LOCAL"
alias j="java -cp \"$CLASSPATH_LOCAL\""

export CONF TEMP DOC BIN LIB SRC OUT BASED CONFD TEMPD DOCD
export BIND LIBD SRCD OUTD CLASSPATH CLASSPATH_LOCAL

# Signal that environment is now configured:
export CONFENV="true"


--- bin/clean, to clean up my build output dir:
$ cat bin/clean
#!/bin/bash
. conf/env
if [ ! -d $OUT ]; then
   exit 0
fi
cd $OUT
# You may prefer to delete everything in out, in which case just rm -rf it.
TODELETE="conf log4j.properties test tmp dir1 package2 etc"
for i in $TODELETE; do
   if [ -d $i ]; then
      rm -r $i
   fi
   if [ -a $i ]; then
      rm $i
   fi
   # Cygwin has a bug where it returns false for existence check (generic)
   # against symlinked file:
   if [ -h $i ]; then
      rm $i
   fi
done


--- bin/build - this is the guts of the funkiness for cygwin, besides conf/env:
$ cat bin/build 
#!/bin/bash
#!/bin/bash -x

bin/clean

. conf/env

# Auto in-code output build-versioning feature:
# File containing template string, located in $SRC subdirectory:
SED_FILE="package/InterfaceContainingVersionString.java"
# Template string - use this in the SED_FILE file(s):
TEMPLATE_STRING="SED_version"
# Replacement version string:
VERSION_STRING=`date +%Y%m%d-%H.%M`
# Text file to create containing just the version string:
VERSION_FILENAME="build-version"

# Files to be compiled by javac:
JAVA_FILES="test/TestYaml.java"

# HTML files to be processed during build, to create output (todo):
#HTML_FILES="index.html"

if [ ! -d $SRC ]; then
   echo "There is no $SRC/ directory - cannot compile anything. Are you in a
working tree?"
   exit 1
fi 
echo "Building ..."

# prepare new version/date string:
SRC_SED_FILE=$SRCD/$SED_FILE
DST_SED_FILE=$TEMPD/$SED_FILE

echo "Munging version strings: $SED_FILE"
SED_DIR=`dirname $DST_SED_FILE`
if [ ! -d $SED_DIR ]; then
   mkdir -p $SED_DIR
fi
sed -e "s#$TEMPLATE_STRING#$VERSION_STRING#g;" $SRC_SED_FILE > $DST_SED_FILE

# Create text file which contains the version string:
VERSION_FILE=$DSTD/$VERSION_FILENAME
if [ -e $VERSION_FILE ]; then
   rm $VERSION_FILE
fi 
echo "$VERSION_STRING" > $VERSION_FILE

# conf/ Log4j configuration:
cd $OUTD
if [ ! -d $CONF ]; then
   echo "Copying: cp $SRC/$CONF $OUT/$CONF/"
   cp --recursive --dereference $CONFD .
   # log4j.properties (WARNING, on cygwin, DO NOT SYMLINK! file cannot be
   # read by log4j in such case!):
   cp $CONF/logger log4j.properties
fi

# compile java files
echo
cd $BASED
ALL_FILES=$TEMP/$SED_FILE
for i in $JAVA_FILES; do
   ALL_FILES="$ALL_FILES $SRC/$i"
done
echo "Compiling: $ALL_FILES"
$JAVAC $ALL_FILES

echo "... done."


--- bin/run - final convenience:
$ cat bin/run 
#!/bin/bash
. conf/env
#cd $OUT
RUNCLASS=test.TestYaml
#echo $JAVA $RUNCLASS
$JAVA $RUNCLASS \
   $*


Of course, you must also have src/conf/logger for the log4j bit to
work.

Hope that's useful - took me a while to get these scripts to this
point, so perhaps this will save someone else the little
frustrations along the way.

Regards
Zen


-- 
Free Australia - www.UPMART.org
Please respect the confidentiality of this email as sensibly warranted.

From parrt at cs.usfca.edu  Tue Sep 19 17:30:47 2006
From: parrt at cs.usfca.edu (Terence Parr)
Date: Tue, 19 Sep 2006 17:30:47 -0700
Subject: [antlr-interest] @SuppressWarnings("all")
In-Reply-To: <4C37AC1C-2A34-413D-9E3F-F9B175B0E469@onvoq.com>
References: <4C37AC1C-2A34-413D-9E3F-F9B175B0E469@onvoq.com>
Message-ID: <21824F1D-A288-4313-8EF5-5A63D4D1603B@cs.usfca.edu>


On Sep 19, 2006, at 11:43 AM, Greg Clemenson wrote:

> Ter,
>
> Thank you for your reply to my question.  I was not quite able to  
> make things work by creating a GregJava.stg.

I think you would need to make sure that GregJava.stg was in a  
directory with the same root name underneath the templates directory,  
mimicking the Java target.

>   However, I did get this approach to work via just editing  
> Java.stg and rebuilding Antlr.

Note there is no point in rebuilding ANTLR as it dynamically loads  
those templates.. :)

>   This change is OK for me since i am exclusively doing Java 5  
> development.  The part of Java.stg changed now reads like this:
>
> <@imports>
> import org.antlr.runtime.*;
> <if(TREE_PARSER)>
> import org.antlr.runtime.tree.*;
> <endif>
> import java.util.Stack;
> import java.util.List;
> import java.util.ArrayList;
> <if(backtracking)>
> import java.util.Map;
> import java.util.HashMap;
> <endif>
> @SuppressWarnings({"unused", "cast"})
> <@end>
>
> I suppressed a more specific set of warnings, namely "unused" and  
> "cast".

Hooray.

Ter

From costa_basil at yahoo.ca  Tue Sep 19 22:07:15 2006
From: costa_basil at yahoo.ca (Costa Basil)
Date: Wed, 20 Sep 2006 01:07:15 -0400 (EDT)
Subject: [antlr-interest] javacc like ast generator for antlr
Message-ID: <20060920050715.59815.qmail@web54309.mail.yahoo.com>

Does anybody know if there is an add-on that allows me to generate parsing trees with antlr 2.7.6/c++ similar with the ones supported by javacc? In case you are wondering what I mean, the javacc ASTs are driven by non-terminals while the ASTs that you create with antlr are "terminal" oriented. 

Thanks



 		
---------------------------------
Now you can have a huge leap forward in email: get the new Yahoo! Mail. 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060920/dfbbac3c/attachment.html 

From rhill03 at eds.com  Wed Sep 20 05:18:04 2006
From: rhill03 at eds.com (Hill, Robert)
Date: Wed, 20 Sep 2006 13:18:04 +0100
Subject: [antlr-interest] ANTLRWorks 1.0b3
In-Reply-To: <1ABCCF11-29D2-43D6-B212-97806449340B@cs.usfca.edu>
Message-ID: <2E909902FD3A03419E3A905908AE3DD40264F951@UKNSM201.emea.corp.eds.com>

I'm using the IntelliJ plugin, I tried the language option, but you just
get a dialog box saying it "Can only generate grammar for Java Language"
, I guess this is expected since Jean says the plugin is .b2 and the
first c# target was built into .b3 :( oh well, at least I'll get a
chance to play with Java for a while!.

Thanks!

Rob



--
Rob Hill
EDS - Hallamshire Business Park
F1E/045
Sheffield	
T:	+44 (0) 114 291 1928
M:	+44 (0) 791 732 1227
E:	rhill03 at eds.com

 

>-----Original Message-----
>From: Terence Parr [mailto:parrt at cs.usfca.edu] 
>Sent: 18 September 2006 19:18
>To: Jean Bovet
>Cc: Hill, Robert; Kunle Odutola; Micheal J
>Subject: Re: [antlr-interest] ANTLRWorks 1.0b3
>
>
>On Sep 15, 2006, at 4:03 PM, Jean Bovet wrote:
>
>> Dear Rob,
>>
>> Thanks for your e-mail!
>>
>>>
>>> 1) is the IntelliJ plug-in always in sync with the AntlrWorks 
>>> Release?
>>
>> Almost... it is still at the b2 version.
>>
>>> 2) When will the plug-in incorporate Kunle's C# Target? (Picture me 
>>> on my knees begging ;) )
>>>
>>
>> Mmm... good question. It's more an ANTLR question: I'm 
>embedding ANTLR 
>> 3.0b4 so if it's in there, you are all set. Any comment Terence?
>
>   Well I have no idea what shape it's in, but you should see 
>what happens when you use language = CSharp.
>
>Ter
>
>>> I have to say its an absolutely outstanding bit of kit mate.  
>>> Excellent
>>> job!
>>>
>>
>> Thanks!
>>
>> Jean
>>
>
>

From mach_ray at yahoo.com  Wed Sep 20 08:11:55 2006
From: mach_ray at yahoo.com (Mach Ray)
Date: Wed, 20 Sep 2006 08:11:55 -0700 (PDT)
Subject: [antlr-interest] parsing the string "text"
Message-ID: <20060920151155.26869.qmail@web60815.mail.yahoo.com>

Hello,

I have a rather simple looking problem related to the 
following lexer rule.

NAME_STR: (CAP_LT|SML_LT)
(CAP_LT|SML_LT|DIGIT|'_'|'-'|':'|'/')+
        ;
protected
DIGIT: '0'..'9';

protected
CAP_LT: 'A'..'Z'; 

protected
SML_LT: 'a'..'z';

Whenever the string "text" appears in the input file,
the parser throws the error

: expecting NAME_STR, found ?text?

Can somebody please point out the problem here?

Thanks
Awais

__________________________________________________
Do You Yahoo!?
Tired of spam?  Yahoo! Mail has the best spam protection around 
http://mail.yahoo.com 

From jose.ventura.roda at gmail.com  Wed Sep 20 08:23:54 2006
From: jose.ventura.roda at gmail.com (Jose Ventura)
Date: Wed, 20 Sep 2006 17:23:54 +0200
Subject: [antlr-interest] =?iso-8859-1?q?JVM_versi=F3n_required_in_antlr_2?=
	=?iso-8859-1?q?=2E7=2E5?=
Message-ID: <e39abda10609200823o542b9b31u65a6f2c2ae0a9a67@mail.gmail.com>

Hi all,

Does someboy tell me what is the jvm versi?n required for antlr 2.7.5?

Thanks a lot.
Jos? Ventura
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060920/88a562d0/attachment.html 

From nwilson at categoric.com  Wed Sep 20 09:15:37 2006
From: nwilson at categoric.com (Nicholas Wilson)
Date: Wed, 20 Sep 2006 17:15:37 +0100
Subject: [antlr-interest] treeparser for MS SQL Server 2000 SELECT statement
	grammar
Message-ID: <45116929.1030208@categoric.com>

Hello all,

  Below is a parser/lexer for a MS SQL Server 2000 SELECT statement 
grammar (written by Tomasz).
It is made out of a Lexer (called 'SqlLexer') and a Parser (called 
'SqlParser').
I am trying to add a TreeParser to it so that it makes tree nodes as 
opposed to leaf nodes when it
comes to a '+'.  In other words, at the moment, the statement:

"select columnname from tablename where user_id = 70"

produces the following parsing:

( select columnname ) ( from tablename ) ( where user_id + 5 = 70 ).

I would like it to make a tree node out of the '+' sign so that it is 
instead parsed as:

( select columnname ) ( from tablename ) ( where ( + user_id 5 ) = 70 )

If anybody can help, I would be extremely grateful.

Thanks in advance,

Kind regards,

Nicholas.
*

MS SQL Server 2000 SELECT statement*

// Version: 0.8
// ANTLR Version: 2.7.2
// Date: 2003.08.25
//
// Description: This is a MS SQL Server 2000 SELECT statement grammar.
//
// 
======================================================================================= 

// Author: Tomasz Jastrzebski
// Contact: tdjastrzebski at yahoo.com <mailto:tdjastrzebski at yahoo.com>
// Working parser/lexer generated based on this grammar will available 
for some time at:
// http://jastrzebski.europe.webmatrixhosting.net/mssqlparser.aspx

options {
   language = "CSharp";
}

// PARSER 
******************************************************************************** 


class SqlParser extends Parser;
options {
   k = 2;
}

// starting rule
statement
   : selectStatement (SEMICOLON)? EOF
   ;

selectStatement
   :
   queryExpression
   (computeClause)?
   (forClause)?
   (optionClause)?
   ;

queryExpression
   : subQueryExpression (unionOperator subQueryExpression)* 
(orderByClause)?
   ;

subQueryExpression
   :
     querySpecification
   | LPAREN queryExpression RPAREN
   ;

querySpecification
   :
   selectClause
   (fromClause)?
   (whereClause)?
   (groupByClause (havingClause)? )?
   ;
       selectClause
   : SELECT (ALL | DISTINCT)? (TOP Integer (PERCENT)? (WITH TIES)? )? 
selectList
   ;

whereClause
   : WHERE searchCondition
   ;

orderByClause
   : ORDER BY expression (ASC | DESC)? (COMMA expression (ASC | DESC)? )*
   ;

groupByClause
   : GROUP BY (ALL)? expression (COMMA expression)* (WITH (CUBE | 
ROLLUP) )?
   ;

havingClause
   : HAVING searchCondition
   ;

optionClause
   : OPTION LPAREN queryHint (COMMA queryHint)* RPAREN
   ;

queryHint
   :
     (HASH | ORDER) GROUP
   | (CONCAT | HASH | MERGE) UNION
   | (LOOP | MERGE | HASH) JOIN
   | FAST Integer
   | FORCE ORDER
   | MAXDOP Integer
   | ROBUST PLAN
   | KEEP PLAN
   | KEEPFIXED PLAN
   | EXPAND VIEWS
   ;

forClause
   :
   FOR (
     BROWSE
   | XML (RAW | AUTO | EXPLICIT) (COMMA XMLDATA)? (COMMA ELEMENTS)? 
(COMMA BINARY BASE64)
   )
   ;

computeClause
   :
   COMPUTE
   // only allowed functions are: AVG, COUNT, MAX, MIN, STDEV, STDEVP, 
VAR, VARP, SUM
   identifier LPAREN expression RPAREN
   (COMMA identifier LPAREN expression RPAREN)*
   (BY expression (COMMA expression)* )?
   ;

searchCondition
   : subSearchCondition ( (AND | OR) subSearchCondition )*
   ;

subSearchCondition
   :
   (NOT)? (
         (LPAREN searchCondition RPAREN) => LPAREN searchCondition RPAREN
       | predicate
       )
   ;

predicate
   :
   (
     expression (
       // expression comparisonOperator expression
       comparisonOperator (
           expression
         | (ALL | SOME | ANY) LPAREN selectStatement RPAREN
         )
     | IS (NOT)? NULL
     | (NOT)? (
           LIKE expression (ESCAPE expression)? // only single char
         | BETWEEN expression AND expression
         | IN LPAREN (
               (selectStatement) => selectStatement
             | expression (COMMA expression)*
             ) RPAREN
         )
     | CONTAINS LPAREN (dbObject | STAR) COMMA (stringLiteral | 
Variable) RPAREN
     | FREETEXT LPAREN (dbObject | STAR) COMMA (stringLiteral | 
Variable) RPAREN
     )
   | EXISTS LPAREN selectStatement RPAREN
   )
   ;

selectList
   : selectItem ( COMMA selectItem )*
   ;

selectItem
   :
     STAR // "*, *" is a valid select list
   | (
     // starts with: "alias = column_name"
     (alias2) => (
         (alias2 dbObject COMMA) => alias2 column
       | (alias2 dbObject (binaryOperator | LPAREN)) => alias2 expression
       | (alias2 column) => alias2 column
       | (alias2 expression) => alias2 expression
       )

     // all table columns: "table.*"
   | (tableColumns) => tableColumns
        // some shortcuts:
   | (dbObject (alias1)? COMMA) => column (alias1)?
   | (dbObject (binaryOperator | LPAREN) ) => expression (alias1)?
        // less obvious cases:
   | (column) => column (alias1)?
   | (expression) => expression (alias1)?
   )
   ;

fromClause
   : FROM tableSource (COMMA tableSource)*
   ;

tableSource
   : subTableSource (joinedTable)*
   ;

subTableSource
   :
   (
     LPAREN (
           (joinedTables) => joinedTables RPAREN
         | (queryExpression) => queryExpression RPAREN alias1 // 
"derived table", mandatory alias
         )
   | (function) => function (alias1)?
   | dbObject (alias1)? ( (WITH)? LPAREN tableHint (COMMA tableHint)* 
RPAREN )?
   | Variable (alias1)?
   | (CONTAINSTABLE | FREETEXTTABLE) LPAREN
       dbObject COMMA (dbObject | STAR) COMMA (stringLiteral | Variable) 
(COMMA Integer)?
       RPAREN (alias1)?
   | COLON COLON function (alias1)? // built-in function
   )
   ;

joinedTable
   :
     CROSS JOIN subTableSource
     // "joinHint JOIN" is invalid join expression
   | ( (INNER | (LEFT | RIGHT | FULL) (OUTER)? ) (joinHint)? )? JOIN 
tableSource ON searchCondition
   ;   
joinedTables
   : subTableSource (joinedTable)+
   ;

joinHint
   :
     LOOP
   | HASH
   | MERGE
   | REMOTE
   ;

tableHint
   :
     INDEX (
         LPAREN (identifier | Integer) ( COMMA (identifier | Integer) )* 
RPAREN
       | ASSIGNEQUAL identifier    // old index hint syntax
       )
   | FASTFIRSTROW
   | HOLDLOCK
   | NOLOCK
   | PAGLOCK
   | READCOMMITED
   | READPAST
   | READUNCOMMITED
   | REPEATABLEREAD
   | ROWLOCK
   | SERIALIZABLE
   | TABLOCK
   | TABLOCKX
   | UPDLOCK
   | XLOCK
   ;

collate
   : COLLATE identifier
   ;
   alias1
   : // alias name can also be single-quoted literal (but not for table 
names)
   (AS)? (
         identifier
       | stringLiteral
       | keywordAsIdentifier
       )
   ;

alias2
   :
   (
     identifier
   | stringLiteral
   | keywordAsIdentifier
   )
   ASSIGNEQUAL
   ;
   tableColumns
   :
   o:dbObject DOT_STAR
   ;

column
   :
   (PLUS)* // "++column_name" is valid and updatable column name
   (
     dbObject
     // for expression like "(column)" SQL Server returns updatable column
   | LPAREN column RPAREN
   )
   (collate)? // it is not well documented but COLLATE can be used 
almost anywhere ...
   ;

expression
   : // current definition ignores operator precedence
     subExpression (binaryOperator subExpression)*
   ;

subExpression
   :
   (unaryOperator)?
   (
     constant
   | Variable
   | (function) => function
   | LPAREN (
         (selectStatement) => selectStatement // select statement 
returning a single value
       | expression
       ) RPAREN
   | dbObject    // column
   | parameterlessFunction
   | caseFunction
   | castFunction
   )
   (collate)?    // it is not well documented but COLLATE can be used 
almost everywhere ...
   ;

// todo: create a separate rule for aggregate functions
function
   : // LEFT and RIGHT keywords are also function names
   (dbObject | LEFT | RIGHT) LPAREN (
         expression (COMMA expression)*
       | STAR    // aggregate functions like Count(), Checksum() accept 
"*" as a parameter
       | (ALL | DISTINCT) (STAR | expression) // aggregate function
       | Variable ASSIGNEQUAL expression (COMMA Variable ASSIGNEQUAL 
expression)*
       )?
   RPAREN
   ;

caseFunction
   : CASE (
         expression (WHEN expression THEN expression)+
       | (WHEN searchCondition THEN expression)+    // boolean expression
       )
   (ELSE expression)? END
   ;

castFunction
   : CAST LPAREN expression AS identifier (LPAREN Integer (COMMA 
Integer)? RPAREN)? RPAREN
   ;

dbObject
   // server.catalog.schema.object
   // server.catalog..object
   :
   (identifier | IDENTITYCOL | ROWGUIDCOL | keywordAsIdentifier) (
         DOT (identifier | IDENTITYCOL | ROWGUIDCOL | keywordAsIdentifier)
       | (DOT DOT) => DOT DOT (identifier | IDENTITYCOL | ROWGUIDCOL | 
keywordAsIdentifier)
   )*
   ;

parameterlessFunction
   : // any others ?
     CURRENT_TIMESTAMP
   | CURRENT_USER
   | SESSION_USER
   | SYSTEM_USER
   ;

systemVariable
   :
     F_CONNECTIONS
   | F_CPU_BUSY
   | F_CURSOR_ROWS
   | F_DATEFIRST
   | F_DBTS
   | F_ERROR
   | F_FETCH_STATUS
   | F_IDENTITY
   | F_IDLE
   | F_IO_BUSY
   | F_LANGID
   | F_LANGUAGE
   | F_LOCK_TIMEOUT
   | F_MAX_CONNECTIONS
   | F_MAX_PRECISION
   | F_NESTLEVEL
   | F_OPTIONS
   | F_PACK_RECEIVED
   | F_PACK_SENT
   | F_PACKET_ERRORS
   | F_PROCID
   | F_REMSERVER
   | F_ROWCOUNT
   | F_SERVERNAME
   | F_SERVICENAME
   | F_SPID
   | F_TEXTSIZE
   | F_TIMETICKS
   | F_TOTAL_ERRORS
   | F_TOTAL_READ
   | F_TOTAL_WRITE
   | F_TRANCOUNT
   | F_VERSION
   ;   
keywordAsIdentifier
   :
   (
     AUTO
   | BASE64
   | BINARY
   | CAST
   | CONCAT
   | CUBE
   | ELEMENTS
   | EXPAND
   | EXPLICIT
   | FAST
   | FASTFIRSTROW
   | FORCE
   | HASH
   | KEEP
   | KEEPFIXED
   | LOOP
   | MAXDOP
   | MERGE
   | NOLOCK
   | PAGLOCK
   | RAW
   | READCOMMITED
   | READPAST
   | READUNCOMMITED
   | REMOTE
   | REPEATABLEREAD
   | ROBUST
   | ROLLUP
   | ROWLOCK
   | SERIALIZABLE
   | TABLOCK
   | TABLOCKX
   | TIES
   | UPDLOCK
   | VIEWS
   | XLOCK
   | XML
   | XMLDATA
   )
   ;

stringLiteral
   :
     UnicodeStringLiteral
   | ASCIIStringLiteral
   ;

identifier
   :
     NonQuotedIdentifier
   | QuotedIdentifier
   ;

constant
   : Integer | Real | NULL | stringLiteral | HexLiteral | Currency | 
ODBCDateTime | systemVariable
   ;

unaryOperator
   : PLUS | MINUS | TILDE
   ;
   binaryOperator
   : arithmeticOperator | bitwiseOperator
   ;
   arithmeticOperator
   : PLUS | MINUS | STAR | DIVIDE | MOD
   ;

bitwiseOperator
   : AMPERSAND | TILDE | BITWISEOR | BITWISEXOR
   ;

comparisonOperator
   :
     ASSIGNEQUAL | NOTEQUAL1 | NOTEQUAL2 | LESSTHANOREQUALTO1 | 
LESSTHANOREQUALTO2
   | LESSTHAN | GREATERTHANOREQUALTO1 | GREATERTHANOREQUALTO2 | GREATERTHAN
   ;
       logicalOperator
   : ALL | AND | ANY | BETWEEN | EXISTS | IN | LIKE | NOT | OR | SOME
   ;

unionOperator
   : UNION (ALL)?
   ;
   // LEXER 
********************************************************************************* 


class SqlLexer extends Lexer;

options {
   testLiterals = false;
   k = 2;
   caseSensitive = false;
   caseSensitiveLiterals = false;
   charVocabulary='\u0000'..'\uFFFE';
}

tokens {
   ADD = "add" ;
   ALL = "all" ;
   ALTER = "alter" ;
   AND = "and" ;
   ANY = "any" ;
   AS = "as" ;
   ASC = "asc" ;
   AUTHORIZATION = "authorization" ;
   AUTO = "auto" ;
   BACKUP = "backup" ;
   BASE64 = "base64" ;
   BEGIN = "begin" ;
   BETWEEN = "between" ;
   BINARY = "binary" ;
   BREAK = "break" ;
   BROWSE = "browse" ;
   BULK = "bulk" ;
   BY = "by" ;
   CASCADE = "cascade" ;
   CASE = "case" ;
   CAST = "cast" ;
   CHECK = "check" ;
   CHECKPOINT = "checkpoint" ;
   CLOSE = "close" ;
   CLUSTERED = "clustered" ;
   // COALESCE = "coalesce" ;
   COLLATE = "collate" ;
   COLUMN = "column" ;
   COMMIT = "commit" ;
   COMPUTE = "compute" ;
   CONCAT = "concat" ;
   CONSTRAINT = "constraint" ;
   CONTAINS = "contains" ;
   CONTAINSTABLE = "containstable" ;
   CONTINUE = "continue" ;
   // CONVERT = "convert" ;
   CREATE = "create" ;
   CROSS = "cross" ;
   CUBE = "cube" ;
   CURRENT = "current" ;
   CURRENT_DATE = "current_date" ;
   CURRENT_TIME = "current_time" ;
   CURRENT_TIMESTAMP = "current_timestamp" ;
   CURRENT_USER = "current_user" ;
   CURSOR = "cursor" ;
   DATABASE = "database" ;
   DBCC = "dbcc" ;
   DEALLOCATE = "deallocate" ;
   DECLARE = "declare" ;
   DEFAULT = "default" ;
   DELETE = "delete" ;
   DENY = "deny" ;
   DESC = "desc" ;
   DISK = "disk" ;
   DISTINCT = "distinct" ;
   DISTRIBUTED = "distributed" ;
   DOUBLE = "double" ;
   DROP = "drop" ;
   // DUMMY = "dummy" ;
   DUMP = "dump" ;
   ELEMENTS = "elements" ;
   ELSE = "else" ;
   END = "end" ;
   ERRLVL = "errlvl" ;
   ESCAPE = "escape" ;
   EXCEPT = "except" ;
   EXEC = "exec" ;
   EXECUTE = "execute" ;
   EXISTS = "exists" ;
   EXIT = "exit" ;
   EXPAND = "expand" ;
   EXPLICIT = "explicit" ;
   FAST = "fast" ;
   FASTFIRSTROW = "fastfirstrow" ;
   FETCH = "fetch" ;
   FILE = "file" ;
   FILLFACTOR = "fillfactor" ;
   FOR = "for" ;
   FORCE = "force" ;
   FOREIGN = "foreign" ;
   FREETEXT = "freetext" ;
   FREETEXTTABLE = "freetexttable" ;
   FROM = "from" ;
   FULL = "full" ;
   FUNCTION = "function" ;
   GOTO = "goto" ;
   GRANT = "grant" ;
   GROUP = "group" ;
   HASH = "hash" ;
   HAVING = "having" ;
   HOLDLOCK = "holdlock" ;
   IDENTITY = "identity" ;
   IDENTITY_INSERT = "identity_insert" ;
   IDENTITYCOL = "identitycol" ;
   IF = "if" ;
   IN = "in" ;
   INDEX = "index" ;
   INNER = "inner" ;
   INSERT = "insert" ;
   INTERSECT = "intersect" ;
   INTO = "into" ;
   IS = "is" ;
   JOIN = "join" ;
   KEEP = "keep" ;
   KEEPFIXED = "keepfixed" ;
   KEY = "key" ;
   KILL = "kill" ;
   LEFT = "left" ;
   LIKE = "like" ;
   LINENO = "lineno" ;
   LOAD = "load" ;
   LOOP = "loop" ;
   MAXDOP = "maxdop" ;
   MERGE = "merge" ;
   NATIONAL = "national" ;
   NOCHECK = "nocheck" ;
   NOLOCK = "nolock" ;
   NONCLUSTERED = "nonclustered" ;
   NOT = "not" ;
   NULL = "null" ;
   // NULLIF = "nullif" ;
   OF = "of" ;
   OFF = "off" ;
   OFFSETS = "offsets" ;
   ON = "on" ;
   OPEN = "open" ;
   OPENDATASOURCE = "opendatasource" ;
   OPENQUERY = "openquery" ;
   OPENROWSET = "openrowset" ;
   OPENXML = "openxml" ;
   OPTION = "option" ;
   OR = "or" ;
   ORDER = "order" ;
   OUTER = "outer" ;
   OVER = "over" ;
   PAGLOCK = "paglock" ;
   PERCENT = "percent" ;
   PLAN = "plan" ;
   PRECISION = "precision" ;
   PRIMARY = "primary" ;
   PRINT = "print" ;
   PROC = "proc" ;
   PROCEDURE = "procedure" ;
   PUBLIC = "public" ;
   RAISERROR = "raiserror" ;
   RAW = "raw" ;
   READ = "read" ;
   READCOMMITED = "readcommited" ;
   READPAST = "readpast" ;
   READTEXT = "readtext" ;
   READUNCOMMITED = "readuncommited" ;
   RECONFIGURE = "reconfigure" ;
   REFERENCES = "references" ;
   REMOTE = "remote" ;
   REPEATABLEREAD = "repeatableread" ;
   REPLICATION = "replication" ;
   RESTORE = "restore" ;
   RESTRICT = "restrict" ;
   RETURN = "return" ;
   REVOKE = "revoke" ;
   RIGHT = "right" ;
   ROBUST = "robust" ;
   ROLLBACK = "rollback" ;
   ROLLUP = "rollup" ;
   ROWCOUNT = "rowcount" ;
   ROWGUIDCOL = "rowguidcol" ;
   ROWLOCK = "rowlock" ;
   RULE = "rule" ;
   SAVE = "save" ;
   SCHEMA = "schema" ;
   SELECT = "select" ;
   SERIALIZABLE = "serializable" ;
   SESSION_USER = "session_user" ;
   SET = "set" ;
   SETUSER = "setuser" ;
   SHUTDOWN = "shutdown" ;
   SOME = "some" ;
   STATISTICS = "statistics" ;
   SYSTEM_USER = "system_user" ;
   TABLE = "table" ;
   TABLOCK = "tablock" ;
   TABLOCKX = "tablockx" ;
   TEXTSIZE = "textsize" ;
   THEN = "then" ;
   TIES = "ties" ;
   TO = "to" ;
   TOP = "top" ;
   TRAN = "tran" ;
   TRANSACTION = "transaction" ;
   TRIGGER = "trigger" ;
   TRUNCATE = "truncate" ;
   TSEQUAL = "tsequal" ;
   UNION = "union" ;
   UNIQUE = "unique" ;
   UPDATE = "update" ;
   UPDATETEXT = "updatetext" ;
   UPDLOCK = "updlock" ;
   USE = "use" ;
   USER = "user" ;
   VALUES = "values" ;
   VARYING = "varying" ;
   VIEW = "view" ;
   VIEWS = "views" ;
   WAITFOR = "waitfor" ;
   WHEN = "when" ;
   WHERE = "where" ;
   WHILE = "while" ;
   WITH = "with" ;
   WRITETEXT = "writetext" ;
   XLOCK = "xlock" ;
   XML = "xml" ;
   XMLDATA = "xmldata" ;
      // system variables
   F_CONNECTIONS = "@@connections" ;
   F_CPU_BUSY = "@@cpu_busy" ;
   F_CURSOR_ROWS = "@@cursor_rows" ;
   F_DATEFIRST = "@@datefirst" ;
   F_DBTS = "@@dbts" ;
   F_ERROR = "@@error" ;
   F_FETCH_STATUS = "@@fetch_status" ;
   F_IDENTITY = "@@identity" ;
   F_IDLE = "@@idle" ;
   F_IO_BUSY = "@@io_busy" ;
   F_LANGID = "@@langid" ;
   F_LANGUAGE = "@@language" ;
   F_LOCK_TIMEOUT = "@@lock_timeout" ;
   F_MAX_CONNECTIONS = "@@max_connections" ;
   F_MAX_PRECISION = "@@max_precision" ;
   F_NESTLEVEL = "@@nestlevel" ;
   F_OPTIONS = "@@options" ;
   F_PACK_RECEIVED = "@@pack_received" ;
   F_PACK_SENT = "@@pack_sent" ;
   F_PACKET_ERRORS = "@@packet_errors" ;
   F_PROCID = "@@procid" ;
   F_REMSERVER = "@@remserver" ;
   F_ROWCOUNT = "@@rowcount" ;
   F_SERVERNAME = "@@servername" ;
   F_SERVICENAME = "@@servicename" ;
   F_SPID = "@@spid" ;
   F_TEXTSIZE = "@@textsize" ;
   F_TIMETICKS = "@@timeticks" ;
   F_TOTAL_ERRORS = "@@total_errors" ;
   F_TOTAL_READ = "@@total_read" ;
   F_TOTAL_WRITE = "@@total_write" ;
   F_TRANCOUNT = "@@trancount" ;
   F_VERSION = "@@version" ;
}

// Operators

protected DOT:; // generated as a part of Number rule
COLON : ':' ;
COMMA : ',' ;
SEMICOLON : ';' ;

LPAREN : '(' ;
RPAREN : ')' ;
//LSQUARE : '[' ;
//RSQUARE : ']' ;

ASSIGNEQUAL : '=' ;
NOTEQUAL1 : "<>" ;
NOTEQUAL2 : "!=" ;
LESSTHANOREQUALTO1 : "<=" ;
LESSTHANOREQUALTO2 : "!>" ;
LESSTHAN : "<" ;
GREATERTHANOREQUALTO1 : ">=" ;
GREATERTHANOREQUALTO2 : "!<" ;
GREATERTHAN : ">" ;

DIVIDE : '/' ;
PLUS : '+' ;
MINUS : '-' ;
STAR : '*' ;
MOD : '%' ;

AMPERSAND : '&' ;
TILDE : '~' ;
BITWISEOR : '|' ;
BITWISEXOR : '^' ;
DOT_STAR : ".*" ;

Whitespace
   : (' ' | '\t' | '\n' | '\r')
   { _ttype = Token.SKIP; }
   ;

// COMMENTS
SingleLineComment
   : "--"( ~('\r' | '\n') )*
   { _ttype = Token.SKIP; }
   ;

MultiLineComment
   : "/*" (~'*')* '*' ('*' | ( ~('*' | '/') (~'*')* '*') )* '/'
   { _ttype = Token.SKIP; }
   ;

// LITERALS

protected
Letter
   : 'a'..'z' | '_' | '#' | '@' | '\u0080'..'\ufffe'
   ;

protected
Digit
   : '0'..'9'
   ;

protected
Integer :;

protected
Real :;

protected
Exponent
   : 'e' ( '+' | '-' )? (Digit)+
   ;

Number
   :
     ( (Digit)+ ('.' | 'e') ) => (Digit)+ ( '.' (Digit)* (Exponent)? | 
Exponent) { _ttype = Real; }
   | '.' { _ttype = DOT; } ( (Digit)+ (Exponent)? { _ttype = Real; } )?
   | (Digit)+ { _ttype = Integer; }
   | "0x" ('a'..'f' | Digit)* { _ttype = HexLiteral; } // "0x" is valid 
hex literal
   ;

protected
Currency
   : // generated as a part of NonQuotedIdentifier rule
   ('$' | '\u00a3'..'\u00a5' | '\u09f2'..'\u09f3' | '\u0e3f' | 
'\u20a0'..'\u20a4' | '\u20a6'..'\u20ab')
   ((Digit)+ ('.' (Digit)* )? | '.' (Digit)+)
   ;

ODBCDateTime
   : '{' (Whitespace)? ("ts" | 't' | 'd') (Whitespace)?
       ('n')? '\'' (~'\'')* '\'' ( '\'' (~'\'')* '\'' )* (Whitespace)? '}'
   ;

NonQuotedIdentifier
   options { testLiterals = true; }
   :
     (Currency) => Currency { _ttype = Currency; }
   | ('a'..'z' | '_' | '#' | '\u0080'..'\ufffe') (Letter | Digit)* // 
first char other than '@'
   ;

QuotedIdentifier
   :
   (
     '[' (~']')* ']' (']' (~']')* ']')*
   | '"' (~'"')* '"' ('"' (~'"')* '"')*
   )
   ;
   Variable
   // test for literals in case of a function begining with '@' (eg. 
"@@ERROR")
   options { testLiterals = true; }
   : '@' (Letter | Digit)+
   ;
   ASCIIStringLiteral
   :
   '\'' (~'\'')* '\'' ( '\'' (~'\'')* '\'' )*
   ;

UnicodeStringLiteral
   :
   'n' '\'' (~'\'')* '\'' ( '\'' (~'\'')* '\'' )*
   ;

// Numeric Constants

protected
HexLiteral // generated as a part of Number rule
   : // "0x" ('0'..'9' | 'a'..'f')*
   ;

From jimi at intersystems.com  Wed Sep 20 09:41:16 2006
From: jimi at intersystems.com (Jim Idle)
Date: Wed, 20 Sep 2006 12:41:16 -0400
Subject: [antlr-interest]
	=?gb2312?b?u9i4tKO6IFJlOiAgUHJvYmxlbSB0byBydW4g?=
	=?gb2312?b?QmV0YSA0?=
Message-ID: <20060920164117.C11C81505@mail.intersystems.com>

If you are getting the java outputs, then it is indeed working. the locale thing is because Ter has added support for languages/locations other than English (not the yanks actually speak that ;-) and the US. 

What this message is saying is that your computer has it's locale set to something for which  locale specific messages have yet to be written. I am sure that if you were willing to translate the English messages into your native language, that this would be useful. However we would of course have no way to know whether you had translated "Syntax error" into "Go stick your head in a fish". 

To select the output language, two things need to happen:

1) The latest .stg file for that language needs to be in the jar. I believe that the C# one is in the release you are using, but I had better let the author of the C# implementation comment on that I think;
2) Your grammar needs to specify the output language thus:

grammar mygrammar;

options {
	language=<target>;
}

For instance:

options {
	language=C;
}

Will select the C output. For C#, use:

language=CSharp;



However, on the latest version I get:

C:\Temp>java org.antlr.Tool t.g
ANTLR Parser Generator   Early Access Version 3.0b5 (??, 2006)  1989-2006
internal error: problem parsing group <unknown>: line 1:4: expecting '\n', found
 '\r' : line 1:4: expecting '\n', found '\r'
org.antlr.stringtemplate.language.GroupLexer.nextToken(Unknown Source)
antlr.TokenBuffer.fill(TokenBuffer.java:69)
antlr.TokenBuffer.LA(TokenBuffer.java:80)


Which suggests that the templates for CSharp are in a form that is confusing ANTLR. Maybe it is just my local build though - try it and see. It might be that the current release is just slightly too early for targets other than java. I know that the C output is about right but not quite and that the current C distribution (which I am about to announce) requires the templates in the current source snapshot for instance.

In other words, you may need to wait for the next RC, but you atl teast have things hanging together now.

Jim


-----Original Message-----
From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-bounces at antlr.org] On Behalf Of ??? Jigang (Robert) Sun
Sent: Tuesday, September 19, 2006 2:44 PM
To: antlr-interest at antlr.org
Subject: [antlr-interest] ??? Re: Problem to run Beta 4

I put the three .jar files into my working directory, my DOS batch file contains:

path=d:\j2sdk1.4.2_05\bin
java -cp antlr-30b4.jar;stringtemplate-23b9.jar;antlr-276.jar org.antlr.Tool ep.g

excuting the .bat file:

D:\MiniClean\Clean>path=d:\j2sdk1.4.2_05\bin

D:\MiniClean\Clean>java -cp antlr-30b4.jar;stringtemplate-23b9.jar;antlr-276.jar org.antlr.Too
l ep.g
no such locale file org/antlr/tool/templates/messages/zh.stg retrying with English locale
ANTLR Parser Generator   Early Access Version 3.0b4 (??, 2006)  1989-2006

D:\MiniClean\Clean>

I am not sure if it is successful, for "no such locale file.." is echoed, nevertherless it has
produced parser and lexer file, they are .java files. What I want is c# target. Could anyone give
me a quick guidance? Unlike v2 grammar, I have not found a "options { language  = "CSharp";} "
switch permitted in v3 grammar.

Thanks.

Jigang  


--- John Vanderburg <johnvms11 at yahoo.com>??:

> I have Beta 4 install in C:\antlr\30b4  and use the following .bat file to run the antlr.Tool
>  
>  
> @echo off
> set
>
CP=C:\antlr\30b4\lib\antlr-3.0b4.jar;C:\antlr\30b4\lib\antlr-2.7.6.jar;C:\antlr\30b4\lib\stringtemplate-2.3b9.jar;%CLASSPATH%
> set cmd=java -classpath "%CP%" org.antlr.Tool %*
> echo %cmd%
> %cmd%
> set CP
>  
> I have CLASSPATH set as an environment variable (Right click on My Computer, Click on the
> Advanced Tab and edit System Variables), as follows (note the '.' at the beginning of the line):
>  
> .;C:\Program Files\Java\jre1.5.0_06\lib\ext\QTJava.zip
>  
>  
> Also, I wasn't able to get the C# target to work, so I've been using Java to test with.  I use
> the following .bat file to 
>  
> The file is called antlrv3jc.bat
>  
> @echo off
> set
>
CP=C:\antlr\30b4\lib\antlr-3.0b4.jar;C:\antlr\30b4\lib\antlr-2.7.6.jar;C:\antlr\30b4\lib\stringtemplate-2.3b9.jar;%CLASSPATH%
> set cmd=javac -classpath "%CP%" %1 
> echo %cmd%
> %cmd%
> set CP=
> 
>  
> Hope this helps
>  
> 
>  
> John Vanderburg, johnvms11 at yahoo.com
> 
> "Why prolong the agony? All men must die."
> - Roger Waters, 5:01 AM (The Pros and Cons of Hitchhiking) 
> 
> 
> 
> ----- Original Message ----
> From: ??? Jigang (Robert) Sun <sunjigang1965 at yahoo.com.cn>
> To: antlr-interest at antlr.org
> Sent: Tuesday, September 19, 2006 11:15:14 AM
> Subject: [antlr-interest] Problem to run Beta 4
> 
> 
> I tried variuos windows dos commands to run v3 beta4, one of the example is
> 
> D:\MiniClean\Clean>path=d:\j2sdk1.4.2_05\bin
> 
> D:\MiniClean\Clean>set classpath=D:\minifram\antlr-3.0b4\lib\antlr-2.7.6.jar;D:\minifram\antlr
> -3.0b4\lib\antlr-3.0b4.jar;D:\minifram\antlr-3.0b4\src\org\antlr
> 
> D:\MiniClean\Clean>java  D:\minifram\antlr-3.0b4\src\org\antlr.Tool par.g
> 
> 
> Error message:
> 
> Exception in thread "main" java.lang.NoClassDefFoundError: D:\minifram\antlr-3/0b4\src\org\ant
> lr/Tool
> 
> I have downloaded and extracted beta 4 onto D:\minifram\.
> 
> Could anyone give me an idea?  I am not a java user, so I have this kind of problems.
> 
> Thanks.
> 
> Jigang
> 
> 
> 
> 
>         
> ___________________________________________________________ 
> ????????-3.5G???20M??? 
> http://cn.mail.yahoo.com



	

	
		
___________________________________________________________ 
Mp3???-???????
http://music.yahoo.com.cn/?source=mail_mailbox_footer

-- 
No virus found in this incoming message.
Checked by AVG Free Edition.
Version: 7.1.405 / Virus Database: 268.12.5/450 - Release Date: 9/18/2006
 

-- 
No virus found in this outgoing message.
Checked by AVG Free Edition.
Version: 7.1.405 / Virus Database: 268.12.5/451 - Release Date: 9/19/2006
 

From craig.p.walters at monsanto.com  Wed Sep 20 09:53:30 2006
From: craig.p.walters at monsanto.com (WALTERS, CRAIG P [AG/1000])
Date: Wed, 20 Sep 2006 11:53:30 -0500
Subject: [antlr-interest] Newbie needs guidance on parsing SQL
Message-ID: <633248C3A654B740B4C2FFD67A42C6CA01D5D4FB@NA1000EXM02.na.ds.monsanto.com>


I am doing my 1st antlr project (version 2.7.6).  I downloaded DmlSQL2/SQL2
and converted them from C++ to Java.  What I need to do is scan a string
containing (Oracle) SQL DML and extract all of the names of the tables that
are the targets of modifications (INSERT, UPDATE, DELETE, TRUNCATE).  I
can't figure out how to get the table names.  Can someone give me some
suggestions?

Craig

---------------------------------------------------------------------------------------------------------
This e-mail message may contain privileged and/or confidential information, and is intended to be received only by persons entitled to receive such information. If you have received this e-mail in error, please notify the sender immediately. Please delete it and all attachments from any servers, hard drives or any other media. Other use of this e-mail by you is strictly prohibited.


All e-mails and attachments sent and received are subject to monitoring, reading and archival by Monsanto. The recipient of this e-mail is solely responsible for checking for the presence of "Viruses" or other "Malware". Monsanto accepts no liability for any damage caused by any such code transmitted by or accompanying this e-mail or any attachment.
---------------------------------------------------------------------------------------------------------


From parrt at cs.usfca.edu  Wed Sep 20 11:16:27 2006
From: parrt at cs.usfca.edu (Terence Parr)
Date: Wed, 20 Sep 2006 11:16:27 -0700
Subject: [antlr-interest] Newbie needs guidance on parsing SQL
In-Reply-To: <633248C3A654B740B4C2FFD67A42C6CA01D5D4FB@NA1000EXM02.na.ds.monsanto.com>
References: <633248C3A654B740B4C2FFD67A42C6CA01D5D4FB@NA1000EXM02.na.ds.monsanto.com>
Message-ID: <11CD4165-2874-4428-95E7-BB6575A3D8E3@cs.usfca.edu>


On Sep 20, 2006, at 9:53 AM, WALTERS, CRAIG P [AG/1000] wrote:

>
> I am doing my 1st antlr project (version 2.7.6).  I downloaded  
> DmlSQL2/SQL2
> and converted them from C++ to Java.  What I need to do is scan a  
> string
> containing (Oracle) SQL DML and extract all of the names of the  
> tables that
> are the targets of modifications (INSERT, UPDATE, DELETE,  
> TRUNCATE).  I
> can't figure out how to get the table names.  Can someone give me some
> suggestions?

Hi. Write the grammar for the subset and then put in an action that  
references the IDENTIFIER matched for table name.  Use the text for  
that ID as you wish.

Ter


From parrt at cs.usfca.edu  Wed Sep 20 11:16:45 2006
From: parrt at cs.usfca.edu (Terence Parr)
Date: Wed, 20 Sep 2006 11:16:45 -0700
Subject: [antlr-interest]
 =?iso-8859-1?q?JVM_versi=F3n_required_in_antlr_2?=
 =?iso-8859-1?q?=2E7=2E5?=
In-Reply-To: <e39abda10609200823o542b9b31u65a6f2c2ae0a9a67@mail.gmail.com>
References: <e39abda10609200823o542b9b31u65a6f2c2ae0a9a67@mail.gmail.com>
Message-ID: <7817ED5A-79A2-4F46-8428-998C39B153BD@cs.usfca.edu>

min version is 1.4 I think.
Ter
On Sep 20, 2006, at 8:23 AM, Jose Ventura wrote:

> Hi all,
>
> Does someboy tell me what is the jvm versi?n required for antlr 2.7.5?
>
> Thanks a lot.
> Jos? Ventura


From parrt at cs.usfca.edu  Wed Sep 20 11:17:52 2006
From: parrt at cs.usfca.edu (Terence Parr)
Date: Wed, 20 Sep 2006 11:17:52 -0700
Subject: [antlr-interest] parsing the string "text"
In-Reply-To: <20060920151155.26869.qmail@web60815.mail.yahoo.com>
References: <20060920151155.26869.qmail@web60815.mail.yahoo.com>
Message-ID: <1B420215-4E8A-4E1C-B02F-7336D31AC3B1@cs.usfca.edu>

Most likely you have a token mismatch issue.  Rebuild all grammars  
and make sure you do it in the correct order if you have import vocab  
stuff.
ter
On Sep 20, 2006, at 8:11 AM, Mach Ray wrote:

> Hello,
>
> I have a rather simple looking problem related to the
> following lexer rule.
>
> NAME_STR: (CAP_LT|SML_LT)
> (CAP_LT|SML_LT|DIGIT|'_'|'-'|':'|'/')+
>         ;
> protected
> DIGIT: '0'..'9';
>
> protected
> CAP_LT: 'A'..'Z';
>
> protected
> SML_LT: 'a'..'z';
>
> Whenever the string "text" appears in the input file,
> the parser throws the error
>
> : expecting NAME_STR, found ?text?
>
> Can somebody please point out the problem here?
>
> Thanks
> Awais
>
> __________________________________________________
> Do You Yahoo!?
> Tired of spam?  Yahoo! Mail has the best spam protection around
> http://mail.yahoo.com


From ryan.hollom at us.lawson.com  Wed Sep 20 14:16:34 2006
From: ryan.hollom at us.lawson.com (Ryan Hollom)
Date: Wed, 20 Sep 2006 16:16:34 -0500
Subject: [antlr-interest] 'filter' option in ANTLR 3.0
Message-ID: <OF3EDB5C8E.ABD358B5-ON862571EF.0072BB5D-862571EF.0074E075@lawson.com>

Greetings-
I have a grammar with several multi-word keywords, and I'm having trouble 
properly tokenizing the input.  For example, I have the rules 

classDef : ID 'is a ClassDefinition';
fieldDef: ID ('is a' | 'is an') ID
inlineDef : ID 'is' ('Alpha' | 'Numeric')

So the 'is'-prefixed keywords are 'is a ClassDefinition', 'is a Class', 
'is a', 'is an', and 'is'.  With these rules, the lexer chokes on input 
like:

MyClass is a ClassDefinition
        MyNumericField is Numeric

with a no viable alt line 2:20; char='N'

It would seem to me that the lexer should try to match the longest 
multi-word keyword it can, and, in this case, should create the tokens 
<MyClass>, <'is a ClassDefinition'>, <MyNumericField>, <'is'>, and 
<'Numeric'>.  I have tried to use the filter option to properly tokenize, 
but this forces me to list all of my keywords in the order in which they 
should be recognized (correct?), which seems like it would be a big issue 
when importing a different vocab/super grammar.

Am I missing an obvious solution here?  I've tried many different 
permutations and can't seem to get it just right.

Thanks in advance, 
Ryan

PS - Why is it that when the filter option is set to true, semantic 
actions are handled differently?  For the rule

fieldDef: ID { printId(); } 'is a' ID;

generates to 
if (backtracking == 1) { printId(); }
with filter=true vs
if (backtracking == 0) { printId(); }
when filter=false.

I am using antlr3.0 b4.  Thanks again!
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060920/d67bc5ed/attachment.html 

From parrt at cs.usfca.edu  Wed Sep 20 14:27:00 2006
From: parrt at cs.usfca.edu (Terence Parr)
Date: Wed, 20 Sep 2006 14:27:00 -0700
Subject: [antlr-interest] 'filter' option in ANTLR 3.0
In-Reply-To: <OF3EDB5C8E.ABD358B5-ON862571EF.0072BB5D-862571EF.0074E075@lawson.com>
References: <OF3EDB5C8E.ABD358B5-ON862571EF.0072BB5D-862571EF.0074E075@lawson.com>
Message-ID: <996BB5DE-8D03-4341-9C75-01AEEC242A73@cs.usfca.edu>


On Sep 20, 2006, at 2:16 PM, Ryan Hollom wrote:

>
> Greetings-
> I have a grammar with several multi-word keywords, and I'm having  
> trouble properly tokenizing the input.  For example, I have the rules
>
> classDef : ID 'is a ClassDefinition';
> fieldDef: ID ('is a' | 'is an') ID
> inlineDef : ID 'is' ('Alpha' | 'Numeric')
>
> So the 'is'-prefixed keywords are 'is a ClassDefinition', 'is a  
> Class', 'is a', 'is an', and 'is'.  With these rules, the lexer  
> chokes on input like:
>
> MyClass is a ClassDefinition
>         MyNumericField is Numeric
>
> with a no viable alt line 2:20; char='N'
>
> It would seem to me that the lexer should try to match the longest  
> multi-word keyword it can, and, in this case, should create the  
> tokens <MyClass>, <'is a ClassDefinition'>,

Hi Ryan,

It probably is matching the longest it can, but there are maybe a  
rule that matches the whitespace for something also that is messing  
this up.

> <MyNumericField>, <'is'>, and <'Numeric'>.  I have tried to use the  
> filter option to properly tokenize, but this forces me to list all  
> of my keywords in the order in which they should be recognized  
> (correct?), which seems like it would be a big issue when importing  
> a different vocab/super grammar.

  your problem does not seem like a filtering problem to me.  Can you  
explain why are using the filter option?

>
> Am I missing an obvious solution here?  I've tried many different  
> permutations and can't seem to get it just right.
>
> Thanks in advance,
> Ryan
>
> PS - Why is it that when the filter option is set to true, semantic  
> actions are handled differently?  For the rule

great question! if you look at the nextToken method in the output you  
will note that it turns on backtracking to sequentially try the rules  
in order that you have specified looking for a match.  Because of  
that actions are executed while the lexer is technically backtracking.

>
> fieldDef: ID { printId(); } 'is a' ID;
>
> generates to
> if (backtracking == 1) { printId(); }
> with filter=true vs
> if (backtracking == 0) { printId(); }
> when filter=false.

hence you will see this backtracking check for level 1 instead of  
level 0.

Ter

From parrt at cs.usfca.edu  Wed Sep 20 14:27:40 2006
From: parrt at cs.usfca.edu (Terence Parr)
Date: Wed, 20 Sep 2006 14:27:40 -0700
Subject: [antlr-interest] javacc like ast generator for antlr
In-Reply-To: <20060920050715.59815.qmail@web54309.mail.yahoo.com>
References: <20060920050715.59815.qmail@web54309.mail.yahoo.com>
Message-ID: <B859A4DA-BF7A-40A4-95AE-7C098CAE3645@cs.usfca.edu>

Hi.  you want a parse tree, which is easy to build by overriding the  
match method and the traceIn/traceOut methods.

Ter
On Sep 19, 2006, at 10:07 PM, Costa Basil wrote:

> Does anybody know if there is an add-on that allows me to generate  
> parsing trees with antlr 2.7.6/c++ similar with the ones supported  
> by javacc? In case you are wondering what I mean, the javacc ASTs  
> are driven by non-terminals while the ASTs that you create with  
> antlr are "terminal" oriented.
>
> Thanks
>
>
>
> Now you can have a huge leap forward in email: get the new Yahoo!  
> Mail.


From mark.heieis at shaw.ca  Wed Sep 20 15:21:30 2006
From: mark.heieis at shaw.ca (Mark Heieis)
Date: Wed, 20 Sep 2006 15:21:30 -0700
Subject: [antlr-interest] ANTLRWorks 1.03b - can't connect to debugger
	(timeout)
Message-ID: <4511BEEA.9020202@shaw.ca>

Hi Guys,

Just uploaded antlrworks 1.03b and got this message when starting a 
debug session:

"Connection Error" "Cannot launch the debugger" "Time-out waiting to 
connect to the remote parser.

I didn't have this problem with 1.01b. See the message below. Any 
thoughts? (using jdk1.5.0_01 and antlr 3.0b4)

Cheers,

mrh.


debugger output message:

java.lang.UnsupportedClassVersionError: __Test__ (Unsupported 
major.minor version 49.0)
	at java.lang.ClassLoader.defineClass0(Native Method)
	at java.lang.ClassLoader.defineClass(Unknown Source)
	at java.security.SecureClassLoader.defineClass(Unknown Source)
	at java.net.URLClassLoader.defineClass(Unknown Source)
	at java.net.URLClassLoader.access$100(Unknown Source)
	at java.net.URLClassLoader$1.run(Unknown Source)
	at java.security.AccessController.doPrivileged(Native Method)
	at java.net.URLClassLoader.findClass(Unknown Source)
	at java.lang.ClassLoader.loadClass(Unknown Source)
	at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)
	at java.lang.ClassLoader.loadClass(Unknown Source)
	at java.lang.ClassLoader.loadClassInternal(Unknown Source)
Exception in thread "main"




From dave at badgers-in-foil.co.uk  Wed Sep 20 15:41:36 2006
From: dave at badgers-in-foil.co.uk (David Holroyd)
Date: Wed, 20 Sep 2006 22:41:36 +0000
Subject: [antlr-interest] [v3] Rule references in rewrite rules?
In-Reply-To: <20060821125524.GA18462@badgers-in-foil.co.uk>
References: <20060821125524.GA18462@badgers-in-foil.co.uk>
Message-ID: <20060920224136.GA23930@badgers-in-foil.co.uk>

On Mon, Aug 21, 2006 at 12:55:24PM +0000, David Holroyd wrote:
> Should the following do what I think it should..?
> 
>   compilationUnit:
>           'package' packageBlock -> ^(COMPILATION_UNIT $compilationUnit)
>       ;
> 
> I was expecting this to give me a result tree which looks like,
> 
>   #( COMPILATION_UNIT 'package' ..etc.. )
> 
> but instead I just get,
> 
>   #( COMPILATION_UNIT )
> 
> 
> Is my syntax wrong, or is $compilationUnit not actually a reference to
> the entire pre-rewrite tree for the compilationUnit rule?  (I can't
> remember where I read that it should be, any more.)

To answer my own question for the record:

I think that the issue is that $rulename is assigned the result of the
last rewrite which executed in the current rule, and before that it is
empty.

So, $rulename can't be used as a shorthand for the default tree for the
l.h.s., as I had for some reason hoped.

ta,
dave

-- 
http://david.holroyd.me.uk/

From sunjigang1965 at yahoo.com.cn  Wed Sep 20 15:54:26 2006
From: sunjigang1965 at yahoo.com.cn (=?gb2312?q?=CB=EF=BC=CD=B8=D5=20Jigang=20(Robert)=20Sun?=)
Date: Thu, 21 Sep 2006 06:54:26 +0800 (CST)
Subject: [antlr-interest] V3 grammar line count
Message-ID: <20060920225426.93353.qmail@web15709.mail.cnb.yahoo.com>

The v3.0b is reporting a problem with my lexer grammar. But the line being indicated is an blank
line - there is nothing wrong with this empty rule.  I am using Microsoft Visual studio to edit
grammar file.

Jigang


		
___________________________________________________________ 
??????-3.5G???20M?? 
http://cn.mail.yahoo.com/

From jimi at intersystems.com  Wed Sep 20 16:01:57 2006
From: jimi at intersystems.com (Jim Idle)
Date: Wed, 20 Sep 2006 19:01:57 -0400
Subject: [antlr-interest] 'filter' option in ANTLR 3.0
Message-ID: <20060920230153.2717D14BE@mail.intersystems.com>

Ryan, 

 

I suggest that you will have more traction specifying these words as individual keywords and not using spaces within the keywords. I presume that you want filter mode for some other reason though? You would not normally require it for ?normal? parsing. Then again maybe this is not a parser as such?

 

So: Try this, (with suitable mods of course)

grammar test;

 

test

      : ( classDef | fieldDef | inlineDef)+

      ;

      

classDef: ID IS A CLASSDEFINITION   ;

fieldDef: ID IS (A | AN) ID ;

inlineDef: ID IS (ALPHA | NUMERIC) ;

 

A     : 'a' ;

ALPHA : 'Alpha' ;

AN    : 'an';

CLASSDEFINITION : 'ClassDefinition' ;

IS    : 'is' ;

NUMERIC : 'Numeric';

 

WS    : (' ' | '\t' | 'n' | '\r') { channel=99;} ;

 

ID : IDCHARS IDCHARS*;

 

 

fragment

IDCHARS: ('a'..'z' | 'A'.. 'Z') ;

 

 

This works perfectly in ANTLRWorks 1.0b3 with the input:





Elephant is a ClassDefinition

Socrates is an Elephant

AllElephants is a Socrates

 

 

Ter ? this reminds me that though we have debated the case insensitive lexing thing, I no longer remember what the conclusion was [meaning los in meta levels ;-) ]? Just overriding things in the end was it?

 

Jim

 

 

   _____  

From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-bounces at antlr.org] On Behalf Of Ryan Hollom
Sent: Wednesday, September 20, 2006 2:17 PM
To: antlr-interest at antlr.org
Subject: [antlr-interest] 'filter' option in ANTLR 3.0

 


Greetings- 
I have a grammar with several multi-word keywords, and I'm having trouble properly tokenizing the input.  For example, I have the rules 

classDef : ID 'is a ClassDefinition'; 
fieldDef: ID ('is a' | 'is an') ID 
inlineDef : ID 'is' ('Alpha' | 'Numeric') 

So the 'is'-prefixed keywords are 'is a ClassDefinition', 'is a Class', 'is a', 'is an', and 'is'.  With these rules, the lexer chokes on input like: 

MyClass is a ClassDefinition 
        MyNumericField is Numeric 

with a no viable alt line 2:20; char='N' 

It would seem to me that the lexer should try to match the longest multi-word keyword it can, and, in this case, should create the tokens <MyClass>, <'is a ClassDefinition'>, <MyNumericField>, <'is'>, and <'Numeric'>.  I have tried to use the filter option to properly tokenize, but this forces me to list all of my keywords in the order in which they should be recognized (correct?), which seems like it would be a big issue when importing a different vocab/super grammar. 

Am I missing an obvious solution here?  I've tried many different permutations and can't seem to get it just right. 

Thanks in advance, 
Ryan 

PS - Why is it that when the filter option is set to true, semantic actions are handled differently?  For the rule 

fieldDef: ID { printId(); } 'is a' ID; 

generates to 
if (backtracking == 1) { printId(); } 
with filter=true vs 
if (backtracking == 0) { printId(); } 
when filter=false. 

I am using antlr3.0 b4.  Thanks again! 

--
No virus found in this incoming message.
Checked by AVG Free Edition.
Version: 7.1.405 / Virus Database: 268.12.5/450 - Release Date: 9/18/2006


-- 
No virus found in this outgoing message.
Checked by AVG Free Edition.
Version: 7.1.405 / Virus Database: 268.12.5/450 - Release Date: 9/18/2006
 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060920/f9db6bb7/attachment-0001.html 

From rob.hill at blueyonder.co.uk  Wed Sep 20 16:37:57 2006
From: rob.hill at blueyonder.co.uk (Robert Hill)
Date: Thu, 21 Sep 2006 00:37:57 +0100
Subject: [antlr-interest] ANTLRWorks 1.03b - can't connect to
	debugger(timeout)
In-Reply-To: <4511BEEA.9020202@shaw.ca>
Message-ID: <20060920234348.E583C190A53@www.antlr.org>

I had trouble with the Antlrworks intellij plugin with JDK 5.
Dropping back to 1.4 seemed to fix all the locking up and dodgy exceptions.
ISTR someone saying Ter build 3.0bx with 1.4 ..

Cheers!

Rob


-----Original Message-----
From: antlr-interest-bounces at antlr.org
[mailto:antlr-interest-bounces at antlr.org] On Behalf Of Mark Heieis
Sent: 20 September 2006 23:22
To: Antlr List
Subject: [antlr-interest] ANTLRWorks 1.03b - can't connect to
debugger(timeout)

Hi Guys,

Just uploaded antlrworks 1.03b and got this message when starting a debug
session:

"Connection Error" "Cannot launch the debugger" "Time-out waiting to connect
to the remote parser.

I didn't have this problem with 1.01b. See the message below. Any thoughts?
(using jdk1.5.0_01 and antlr 3.0b4)

Cheers,

mrh.


debugger output message:

java.lang.UnsupportedClassVersionError: __Test__ (Unsupported major.minor
version 49.0)
	at java.lang.ClassLoader.defineClass0(Native Method)
	at java.lang.ClassLoader.defineClass(Unknown Source)
	at java.security.SecureClassLoader.defineClass(Unknown Source)
	at java.net.URLClassLoader.defineClass(Unknown Source)
	at java.net.URLClassLoader.access$100(Unknown Source)
	at java.net.URLClassLoader$1.run(Unknown Source)
	at java.security.AccessController.doPrivileged(Native Method)
	at java.net.URLClassLoader.findClass(Unknown Source)
	at java.lang.ClassLoader.loadClass(Unknown Source)
	at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)
	at java.lang.ClassLoader.loadClass(Unknown Source)
	at java.lang.ClassLoader.loadClassInternal(Unknown Source) Exception
in thread "main"






From jimi at intersystems.com  Wed Sep 20 16:48:35 2006
From: jimi at intersystems.com (Jim Idle)
Date: Wed, 20 Sep 2006 19:48:35 -0400
Subject: [antlr-interest] V3 grammar line count
Message-ID: <20060920234831.49E6F161E@mail.intersystems.com>

You need to post the error output and the lines around the specified location to get more help. There will be an error there somewhere, but error reporting/recovery is not as good as it will be once antlr3 is built with itself.

Jim

-----Original Message-----
From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-bounces at antlr.org] On Behalf Of ??? Jigang (Robert) Sun
Sent: Wednesday, September 20, 2006 3:54 PM
To: antlr-interest at antlr.org
Subject: [antlr-interest] V3 grammar line count

The v3.0b is reporting a problem with my lexer grammar. But the line being indicated is an blank
line - there is nothing wrong with this empty rule.  I am using Microsoft Visual studio to edit
grammar file.

Jigang


		
___________________________________________________________ 
??????-3.5G???20M?? 
http://cn.mail.yahoo.com/

-- 
No virus found in this incoming message.
Checked by AVG Free Edition.
Version: 7.1.405 / Virus Database: 268.12.5/450 - Release Date: 9/18/2006
 

-- 
No virus found in this outgoing message.
Checked by AVG Free Edition.
Version: 7.1.405 / Virus Database: 268.12.5/450 - Release Date: 9/18/2006
 

From peter.schay at ingres.com  Wed Sep 20 17:19:01 2006
From: peter.schay at ingres.com (Peter Schay)
Date: Wed, 20 Sep 2006 17:19:01 -0700
Subject: [antlr-interest] antlr 3 python question
Message-ID: <1158797941.8449.22.camel@earth.ingres.prv>

Is python runtime support planned for antlr 3? 

Thanks!



From kroepke at classdump.org  Wed Sep 20 17:43:56 2006
From: kroepke at classdump.org (Kay Roepke)
Date: Thu, 21 Sep 2006 02:43:56 +0200
Subject: [antlr-interest] antlr 3 python question
In-Reply-To: <1158797941.8449.22.camel@earth.ingres.prv>
References: <1158797941.8449.22.camel@earth.ingres.prv>
Message-ID: <01F258BC-C4ED-4A31-A3B5-BCF88C323C0C@classdump.org>


On 21. Sep 2006, at 2:19 Uhr, Peter Schay wrote:

> Is python runtime support planned for antlr 3?

Hi Peter!

According to memory and the current wiki page <http://www.antlr.org/ 
wiki/display/ANTLR3/Code+Generation+Targets> there has been interest  
in doing that, yes, but I don't know whether any progress has been made.

cheers,
-k
-- 
Kay R?pke <kroepke at classdump.org>
classdump Software
Key fingerprint = A849 0F2C C322 4022 379E  8661 7E1B FE0D 4CD2 A6D0




From sandy.pec at gmail.com  Wed Sep 20 20:47:21 2006
From: sandy.pec at gmail.com (Sandeep Gupta)
Date: Thu, 21 Sep 2006 09:17:21 +0530
Subject: [antlr-interest] ANTLRWorks 1.03b - can't connect to debugger
	(timeout)
Message-ID: <6368ffc60609202047j96e5719u9d2d98f00bdb85c@mail.gmail.com>

Hi Mark,

The error is due to the fact that you are trying to run it on JDK
1.4probably. But as you mentioned that you are using JDK
1.5.0.01, please check your JAVA_HOME environment variable and also your
PATH settings. It seems the JRE, your system is picking up is for JAVA 1.4.
(Evident from the fact that the error says "Unsupported
major.minor version 49.0", the version 49.0 being for JDK 1.5

Hope this helps.


Regards,

Sandeep Gupta








Hi Guys,

Just uploaded antlrworks 1.03b and got this message when starting a
debug session:

"Connection Error" "Cannot launch the debugger" "Time-out waiting to
connect to the remote parser.

I didn't have this problem with 1.01b. See the message below. Any
thoughts? (using jdk1.5.0_01 and antlr 3.0b4)

Cheers,

mrh.


debugger output message:

java.lang.UnsupportedClassVersionError: __Test__ (Unsupported
major.minor version 49.0)
       at java.lang.ClassLoader.defineClass0(Native Method)
       at java.lang.ClassLoader.defineClass(Unknown Source)
       at java.security.SecureClassLoader.defineClass(Unknown Source)
       at java.net.URLClassLoader.defineClass(Unknown Source)
       at java.net.URLClassLoader.access$100(Unknown Source)
       at java.net.URLClassLoader$1.run(Unknown Source)
       at java.security.AccessController.doPrivileged(Native Method)
       at java.net.URLClassLoader.findClass(Unknown Source)
       at java.lang.ClassLoader.loadClass(Unknown Source)
       at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)
       at java.lang.ClassLoader.loadClass(Unknown Source)
       at java.lang.ClassLoader.loadClassInternal(Unknown Source)
Exception in thread "main"
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060921/cc2c8426/attachment.html 

From sandy.pec at gmail.com  Wed Sep 20 22:10:24 2006
From: sandy.pec at gmail.com (Sandeep Gupta)
Date: Thu, 21 Sep 2006 10:40:24 +0530
Subject: [antlr-interest] Newbie Q: detect rule based on previous rule
Message-ID: <6368ffc60609202210h68b2afebxbe0db3f0f4612896@mail.gmail.com>

Hi

I am dont know much about compilers or grammars per se. I have started
learning and for an example was writing a sample grammar to parse DTDs. Now
I am facing a problem in writing the grammar, of which a few rules are as
under:

fragment comment    :    '<!--' commentText CommentEnd    ;

fragment commentText    :     ~(CommentEnd)*    ;

CommentEnd    :    '-->'    ;

Question 1: To read whole of the text between the tokens for CommentStart
and CommentEnd, I have tried using (options {greedy=false;} : .)* but this
fails and throws a NoViableAltException after parsing the first comment it
encounters. But this way the comments are parsed completely? If someone
could explain me the difference in both the approaches.


Question 2: While writing the grammar I sometimes find a situation where I
want that ANTLR shoudl only see this rule as valid, if a previous rule has
just been parsed through. Like for a rule (to parse quoted strings) like

fragment quotedString     :    ('"' ((~('<' | '&' | '"' )) )* '"')    ;

ANTLR says

 [10:21:25] dtd.g:210:43: Decision can match input such as
"{CommentEnd..Letter, CharReference..'%', '\''..'NOTATION'}" using multiple
alternatives: 1, 2
As a result, alternative(s) 2 were disabled for that input

Now the thing here is like I know that CommentEnd can only come if there has
been a CommentStart. How can I code this.There have been a lot of terms
being used here in the mailing lists like Syntactic predicates, lexer modes
etc. Is it anything related to it. If someone could refer me a good book to
start with to learn the concepts (except the tutorials on ANTLR, already
going through them).

Any suggestions would be most most welcome.


Regards,
Sandeep Gupta
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060921/8813297f/attachment.html 

From cameron.taggart at gmail.com  Wed Sep 20 23:42:57 2006
From: cameron.taggart at gmail.com (Cameron Taggart)
Date: Wed, 20 Sep 2006 23:42:57 -0700
Subject: [antlr-interest] tiny filter grammar
Message-ID: <c3606140609202342n447d8047t4f918cf778b414d4@mail.gmail.com>

Hi I'm trying to build a grammar so that I can parse an existing
filter text.  Here is an example filter text:

( IsNull( {a}) or {b} =1 ) // comment
  AND ( IsNull ({c}) or  {d} = 1 )
 AND {e} = "Please Help!"

Being an antlr newbie, I'm having a hard time figuring out the secret
sauce for dealing with the various expression types.  I'm not really
sure how to deal with groups.  Here is my antlr v3 grammar in its
entirety:

grammar FilterParser;

group : '(' (expression|logical) ')';
expression : relational|isNull; // |logical; recursion overflow to
logical from expression
logical : (expression|group) (logicalOp (expression|group))+;
relational : Variable relationalOp (Number|String);
isNull : 'IsNull' '(' Variable ')';
relationalOp : '='|'!='|'>'|'<'|'>='|'<=';
logicalOp : 'AND'|'or'; // TODO case insensitive

LineComment : '//' ~('\n'|'r')+ {channel=99;};	
Variable : '{' ~('}')* '}';
Number : ('-'|'+')?('0'..'9')+('.'('0'..'9')+)?;
String	: '"' ~('"')* '"';

cheers,
Cameron

From sishen_freecity at 126.com  Wed Sep 20 23:44:35 2006
From: sishen_freecity at 126.com (sishen)
Date: Thu, 21 Sep 2006 14:44:35 +0800
Subject: [antlr-interest] [Lexer] how to make keyword case insensitive?
Message-ID: <451234D3.8070203@126.com>

Hey. everyone.

How can i make keywork case insensitive?

in my Lexer options, i have already turn off the caseSensitive.

options {
  testLiterals=false;    // don't automatically test for literals
  k=3;                         // two characters of lookahead
  caseSensitive=false;
}

But i found that it does't make sence to 'tokens';

tokens {
    AND = "and";
}

I want [A|a][N|n][D|d] match the keyword AND.  But only "and" matches.

I can define as this way:

AND : "and";

it works. But have a conflict with IDENT.
IDENT
  options {testLiterals=true;}
  : ('a'..'z') ('a'..'z'|'0'..'9')*
  ;

Of course it does.

I hate the warning. So i not prefer this way.

query.g: warning:lexical nondeterminism between rules AND and IDENT upon
query.g:     k==1:'a'
query.g:     k==2:'n'
query.g:     k==3:'d'


I want to know whether there is another way which an make keyword case 
insensitive? 
What should i do?


From Michiel_Vermandel at axi.be  Thu Sep 21 00:56:46 2006
From: Michiel_Vermandel at axi.be (Michiel Vermandel)
Date: Thu, 21 Sep 2006 09:56:46 +0200
Subject: [antlr-interest] Newbie needs guidance on parsing SQL
In-Reply-To: <11CD4165-2874-4428-95E7-BB6575A3D8E3@cs.usfca.edu>
Message-ID: <OFA4A26D1A.CD098DA0-ONC12571F0.0029ECF2-C12571F0.002BA67E@Axi.be>

Hi,

I have written a Forms, Sql and Plsql Parser.

I solved the problem in the following way:

(Lets see to an Insert statement)

insert into my_table (...)
values(...)
;


In my sql.g I have the following:

insert_command: 
        "insert" "into" selected_table 
        column_list
        ( ( "values" OPEN_PAREN! plsql_exp_list CLOSE_PAREN! ) 
        | select_statement ) 
   { ## = #([INSERT_STATEMENT, "insert_statement"], ##); }
        ;

with  selected_table:

selected_table:
        ( table_spec | subquery ) ( table_alias )?
        ;

table_spec:
        ( schema_name DOT )? table_reference ( AT_SIGN link_name )?
        ;

table_reference: 
        object_name 
   { ## = #([TABLE_REF, "ref_table"], ##); }
        ; 

object_name:
   ( identifier ( DOT (object_dot_name) )?
   )
   { #object_name = #([OBJECT_NAME, "<#OBJECT_NAME#>"], #object_name); };

In this way I get in my AST something like

INSERT_STATEMENT
        TABLE_REF
                OBJECT_NAME
                        "my_table"

I walk the AST tree (own code) and whenever I get a TABLE_REF node I 
expect it to have a child node OBJECT_NAME which must have a child node on 
its own which contains the table name.

For every TABLE_REF I create a custom made SqlTable object and add it to a 
list of references. 
Then in a second face I try to resolve all objects in my references list 
by looking them up in a repository...







Terence Parr <parrt at cs.usfca.edu> 
Sent by: antlr-interest-bounces at antlr.org
20/09/2006 20:16

To
Antlr List <antlr-interest at antlr.org>
cc

Subject
Re: [antlr-interest] Newbie needs guidance on parsing SQL







On Sep 20, 2006, at 9:53 AM, WALTERS, CRAIG P [AG/1000] wrote:

>
> I am doing my 1st antlr project (version 2.7.6).  I downloaded 
> DmlSQL2/SQL2
> and converted them from C++ to Java.  What I need to do is scan a 
> string
> containing (Oracle) SQL DML and extract all of the names of the 
> tables that
> are the targets of modifications (INSERT, UPDATE, DELETE, 
> TRUNCATE).  I
> can't figure out how to get the table names.  Can someone give me some
> suggestions?

Hi. Write the grammar for the subset and then put in an action that 
references the IDENTIFIER matched for table name.  Use the text for 
that ID as you wish.

Ter


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060921/369958e9/attachment-0001.html 

From sunjigang1965 at yahoo.com.cn  Thu Sep 21 01:24:00 2006
From: sunjigang1965 at yahoo.com.cn (=?gb2312?q?=CB=EF=BC=CD=B8=D5=20Jigang=20(Robert)=20Sun?=)
Date: Thu, 21 Sep 2006 16:24:00 +0800 (CST)
Subject: [antlr-interest] =?gb2312?b?u9i4tKO6IFJlOiAgVjMgZ3JhbW1hciBsaW5l?=
 =?gb2312?b?IGNvdW50?=
In-Reply-To: <20060920234831.49E6F161E@mail.intersystems.com>
Message-ID: <20060921082401.88938.qmail@web15701.mail.cnb.yahoo.com>

Attached is the grammar, error message is as follow:

D:\cleanV3>java org.antlr.Tool lex.g
no such locale file org/antlr/tool/templates/messages/zh.stg retrying with English locale
ANTLR Parser Generator   Early Access Version 3.0b4 (??, 2006)  1989-2006
lex.g:40:11: The following token definitions are unreachable: Sign,Slash,UpperCaseChar,LowerCa
seChar,SpecialChar,Digit,OctDigit,HexDigit,StringEsc,CharEsc,AnyChar

You can see line 40 is an empty line. Sometimes the grammar problem is in line 34 which reported
as lin35.

Regards
Jigang 

--- Jim Idle <jimi at intersystems.com>??:

> You need to post the error output and the lines around the specified location to get more help.
> There will be an error there somewhere, but error reporting/recovery is not as good as it will
> be once antlr3 is built with itself.
> 
> Jim
> 
> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-bounces at antlr.org] On Behalf Of
> ??? Jigang (Robert) Sun
> Sent: Wednesday, September 20, 2006 3:54 PM
> To: antlr-interest at antlr.org
> Subject: [antlr-interest] V3 grammar line count
> 
> The v3.0b is reporting a problem with my lexer grammar. But the line being indicated is an blank
> line - there is nothing wrong with this empty rule.  I am using Microsoft Visual studio to edit
> grammar file.
> 
> Jigang
> 
> 
> 		
> ___________________________________________________________ 
> ??????-3.5G???20M?? 
> http://cn.mail.yahoo.com/
> 
> -- 
> No virus found in this incoming message.
> Checked by AVG Free Edition.
> Version: 7.1.405 / Virus Database: 268.12.5/450 - Release Date: 9/18/2006
>  
> 
> -- 
> No virus found in this outgoing message.
> Checked by AVG Free Edition.
> Version: 7.1.405 / Virus Database: 268.12.5/450 - Release Date: 9/18/2006
>  
> 


		
___________________________________________________________ 
??????-3.5G???20M?? 
http://cn.mail.yahoo.com/
-------------- next part --------------
A non-text attachment was scrubbed...
Name: lex.g
Type: application/octet-stream
Size: 1307 bytes
Desc: 2935795476-lex.g
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20060921/46aa4a21/attachment.obj 

From adrian.creegan at blanwhite.com  Thu Sep 21 02:30:50 2006
From: adrian.creegan at blanwhite.com (Adrian Creegan)
Date: Thu, 21 Sep 2006 10:30:50 +0100
Subject: [antlr-interest] ANTLR 3.0b4 and C# Target
Message-ID: <001701c6dd60$a109f0e0$6501a8c0@ntdomain.local>

Hi all,

This is a contribution to John Vanderburg's posting Sep 18.  I have a
similar problem with 3.0b4 emitting c#.  As input I used the Java 1.5
grammar for ANTLR v3 that ships with the examples using the recommended
compile params and a language=CSharp directive in the options block.  In
fact I got two errors one being an incorrect boolean declaration:

 

    protected boolean enumIsKeyword = false;

 

in the JavaParserLexer.cs output and the second being transition tables
referencing undeclared transition arrays (forgive me if terminology
incorrect, I am new to this).  I did see a posting from Terence Parr on the
dev news list (July 25) indicating that code generation in this area may
have been recently been re-structured.  Has this broken the C# generation or
does somebody know what I/we are doing wrong?

Thanks

Adrian.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060921/a6c4bf3e/attachment.html 

From e.papegaaij at student.utwente.nl  Thu Sep 21 03:19:14 2006
From: e.papegaaij at student.utwente.nl (Emond Papegaaij)
Date: Thu, 21 Sep 2006 12:19:14 +0200
Subject: [antlr-interest] options for mTokens
Message-ID: <200609211219.15042.e.papegaaij@student.utwente.nl>

Hello,

I'm faced with a problem with a combined grammar. My lexer contains mutual 
recursive rules, hence I cannot use LL(*) for the mTokens rule. However it 
does not seem to be possible to change the options for the generated 
lexer. Specifying 'k = 2' in the top level options of the grammar only 
results in 'k = 2' for the parser, not for the lexer. I would suspect 
something like 'lexer::options' to work, but it is not valid according to 
the syntax of ANTLR. Is there any way to set global options for the lexer 
in a combined grammar (without splitting the grammar in a separate lexer 
and parser)?

Another thing that bothers me is that it only seems to be possible to 
specify options for the mTokens rule by specifying global options. If I 
want to use LL(*) for all tokens, except mTokens I have to 
repeat 'options{k=*;}' in every rule. Also is it not possible for ANTLR to 
try to use LL(*) for mTokens and fall back to LL(k)[1] with backtracking 
if LL(*) is not possible?

Best regards,
Emond Papegaaij

[1] Of course the value to use for k might be difficult to deduce. Perhaps 
it can be the lowest value for which the following holds: 'diff(k) == 
diff(k+1)' where 'diff(k)' is the number of token rules that can be 
differentiated with LL(k). The remainder of the rules (if any) would need 
backtracking.

From sishen_freecity at 126.com  Thu Sep 21 04:56:44 2006
From: sishen_freecity at 126.com (sishen)
Date: Thu, 21 Sep 2006 19:56:44 +0800
Subject: [antlr-interest] Proglem about the root of ASTree
Message-ID: <45127DFC.9010301@126.com>

I set buildAST = true;

I found something doesn't work when i defined a root.


for example:

test :  ID  op expr

op:
         ">"
    |   "<"
    ;


i want "op"  to be the root of  expression.
but i can't just write  "op^".  it's a  fault.

However, when i write op  suffix  the operator ">"/"<".  it's also unuseful.

What should i do?   thx all~


From sunjigang1965 at yahoo.com.cn  Thu Sep 21 05:22:34 2006
From: sunjigang1965 at yahoo.com.cn (=?gb2312?q?=CB=EF=BC=CD=B8=D5=20Jigang=20(Robert)=20Sun?=)
Date: Thu, 21 Sep 2006 20:22:34 +0800 (CST)
Subject: [antlr-interest] request a c# sample start program main
Message-ID: <20060921122234.59343.qmail@web15705.mail.cnb.yahoo.com>

Could anyone give me a c# start program main? All entry program in examples-v3 are java, which I
tried could not be modified to c#.
Thanks.
Jigang


	

	
		
___________________________________________________________ 
Mp3???-???????
http://music.yahoo.com.cn/?source=mail_mailbox_footer

From ewbank at gmail.com  Thu Sep 21 05:40:31 2006
From: ewbank at gmail.com (Bryan Ewbank)
Date: Thu, 21 Sep 2006 08:40:31 -0400
Subject: [antlr-interest] Proglem about the root of ASTree
In-Reply-To: <45127DFC.9010301@126.com>
References: <45127DFC.9010301@126.com>
Message-ID: <dd3a065f0609210540r1781cfb4x57642581ffc91f7e@mail.gmail.com>

Yes, this is a restriction - the '^' has to be at a token, because
that way it's guaranteed to be a single tree node. Rewrite it this
way:

        test : ID ( ">"^ | "<"^ ) expr ;

Hope this helps,
- Bryan Ewbank

On 9/21/06, sishen <sishen_freecity at 126.com> wrote:
> I set buildAST = true;
>
> I found something doesn't work when i defined a root.
>
>
> for example:
>
> test :  ID  op expr
>
> op:
>          ">"
>     |   "<"
>     ;
>
>
> i want "op"  to be the root of  expression.
> but i can't just write  "op^".  it's a  fault.
>
> However, when i write op  suffix  the operator ">"/"<".  it's also unuseful.
>
> What should i do?   thx all~
>
>

From sishen_freecity at 126.com  Thu Sep 21 06:42:50 2006
From: sishen_freecity at 126.com (sishen)
Date: Thu, 21 Sep 2006 21:42:50 +0800
Subject: [antlr-interest] Proglem about the root of ASTree
In-Reply-To: <dd3a065f0609210540r1781cfb4x57642581ffc91f7e@mail.gmail.com>
References: <45127DFC.9010301@126.com>
	<dd3a065f0609210540r1781cfb4x57642581ffc91f7e@mail.gmail.com>
Message-ID: <451296DA.8060109@126.com>

Thanks.

In my opinion, This restriction is too strict. :(
it's can't be reuseable.
And i should use multiple label to mark the token..... like  op1:">"^ |  
op2:"<"^ | op3:"=".....



Bryan Ewbank wrote:
> Yes, this is a restriction - the '^' has to be at a token, because
> that way it's guaranteed to be a single tree node. Rewrite it this
> way:
>
>        test : ID ( ">"^ | "<"^ ) expr ;
>
> Hope this helps,
> - Bryan Ewbank
>
> On 9/21/06, sishen <sishen_freecity at 126.com> wrote:
>> I set buildAST = true;
>>
>> I found something doesn't work when i defined a root.
>>
>>
>> for example:
>>
>> test :  ID  op expr
>>
>> op:
>>          ">"
>>     |   "<"
>>     ;
>>
>>
>> i want "op"  to be the root of  expression.
>> but i can't just write  "op^".  it's a  fault.
>>
>> However, when i write op  suffix  the operator ">"/"<".  it's also 
>> unuseful.
>>
>> What should i do?   thx all~
>>
>>
>
>



From ewbank at gmail.com  Thu Sep 21 07:43:29 2006
From: ewbank at gmail.com (Bryan Ewbank)
Date: Thu, 21 Sep 2006 10:43:29 -0400
Subject: [antlr-interest] Proglem about the root of ASTree
In-Reply-To: <451296DA.8060109@126.com>
References: <45127DFC.9010301@126.com>
	<dd3a065f0609210540r1781cfb4x57642581ffc91f7e@mail.gmail.com>
	<451296DA.8060109@126.com>
Message-ID: <dd3a065f0609210743h24b8e21fua047a5dbccf84dd0@mail.gmail.com>

This very strictness makes the job of creating ANTLR much easier, because it
provides an automatic way to require that things marked to be the root with
'^' are exactly one token.  Certainly, you could do the analysis to ensure
that a rule marked with '^' is guaranteed to return exactly one token --
that's on a wish list, I think -- but it's never been high enough priority
to deliver.

Generally, tokens show up in just a few places in the grammar, so "reuse"
isn't really compelling.  Some of what you suggest might be addressible by
introducing a scanner and using symbolic names for the tokens.

On 9/21/06, sishen <sishen_freecity at 126.com> wrote:
>
> Thanks.
>
> In my opinion, This restriction is too strict. :(
> it's can't be reuseable.
> And i should use multiple label to mark the token..... like  op1:">"^ |
> op2:"<"^ | op3:"=".....
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060921/08149560/attachment.html 

From ryan.hollom at us.lawson.com  Thu Sep 21 07:46:59 2006
From: ryan.hollom at us.lawson.com (Ryan Hollom)
Date: Thu, 21 Sep 2006 09:46:59 -0500
Subject: [antlr-interest] 'filter' option in ANTLR 3.0
In-Reply-To: <996BB5DE-8D03-4341-9C75-01AEEC242A73@cs.usfca.edu>
Message-ID: <OF63B37331.3B10DDC7-ON862571F0.00500677-862571F0.0051356D@lawson.com>

Thanks for the response.  I have trimmed down the grammar to a (seemingly) 
simple case, and am still getting a lexer error with my input. 
>Can you explain why are using the filter option?
Because I was getting lexer errors, I turned the filter option on to avoid 
the errors as I developed, so there is no explicit reason for me to use 
this option.

So, given the grammar:

grammar testgrammar;
options { language=Java; output=AST; }

bc_definition
        : ID 'is a ClassDefinition' NEWLINE
                persistentField* ;
 
persistentField : ID (inlineDef | fieldDef) NEWLINE ; 
fieldDef        : ('is an' | 'is a') ID;
inlineDef       : ('is' ('Alpha' | 'Numeric'));

NEWLINE :   (('\r')? '\n' )+ ;
ID      :       ( 'A' .. 'Z' | '0' .. '9') ( 'A' .. 'Z' | 'a' .. 'z' | '0' 
.. '9')* ; 
WS      :       (' '|'\t')+ {channel=99;};

and the input

MyClass is a ClassDefinition
        TestField is Numeric
        MyField is an AwesomeField

I get the error(s):

[]: line 3:11 1:1: Tokens : ( T7 | T8 | T9 | T10 | T11 | T12 | NEWLINE | 
ID | WS ); state 10 (decision=5) no viable alt line 3:11; char='i'
[]: line 3:12 1:1: Tokens : ( T7 | T8 | T9 | T10 | T11 | T12 | NEWLINE | 
ID | WS ); state 0 (decision=5) no viable alt line 3:12; char='s'
[bc_definition, persistentField]: line 3:14 state 0 (decision=2) no viable 
alt; token=[@4,55:61='Numeric',<12>,3:14]

is this expected behavior?

Thanks again!
-Ryan




Terence Parr <parrt at cs.usfca.edu> 
Sent by: antlr-interest-bounces at antlr.org
09/20/2006 04:27 PM

To
ANTLR Interest <antlr-interest at antlr.org>
cc

Subject
Re: [antlr-interest] 'filter' option in ANTLR 3.0







On Sep 20, 2006, at 2:16 PM, Ryan Hollom wrote:

>
> Greetings-
> I have a grammar with several multi-word keywords, and I'm having 
> trouble properly tokenizing the input.  For example, I have the rules
>
> classDef : ID 'is a ClassDefinition';
> fieldDef: ID ('is a' | 'is an') ID
> inlineDef : ID 'is' ('Alpha' | 'Numeric')
>
> So the 'is'-prefixed keywords are 'is a ClassDefinition', 'is a 
> Class', 'is a', 'is an', and 'is'.  With these rules, the lexer 
> chokes on input like:
>
> MyClass is a ClassDefinition
>         MyNumericField is Numeric
>
> with a no viable alt line 2:20; char='N'
>
> It would seem to me that the lexer should try to match the longest 
> multi-word keyword it can, and, in this case, should create the 
> tokens <MyClass>, <'is a ClassDefinition'>,

Hi Ryan,

It probably is matching the longest it can, but there are maybe a 
rule that matches the whitespace for something also that is messing 
this up.

> <MyNumericField>, <'is'>, and <'Numeric'>.  I have tried to use the 
> filter option to properly tokenize, but this forces me to list all 
> of my keywords in the order in which they should be recognized 
> (correct?), which seems like it would be a big issue when importing 
> a different vocab/super grammar.

  your problem does not seem like a filtering problem to me.  Can you 
explain why are using the filter option?

>
> Am I missing an obvious solution here?  I've tried many different 
> permutations and can't seem to get it just right.
>
> Thanks in advance,
> Ryan
>
> PS - Why is it that when the filter option is set to true, semantic 
> actions are handled differently?  For the rule

great question! if you look at the nextToken method in the output you 
will note that it turns on backtracking to sequentially try the rules 
in order that you have specified looking for a match.  Because of 
that actions are executed while the lexer is technically backtracking.

>
> fieldDef: ID { printId(); } 'is a' ID;
>
> generates to
> if (backtracking == 1) { printId(); }
> with filter=true vs
> if (backtracking == 0) { printId(); }
> when filter=false.

hence you will see this backtracking check for level 1 instead of 
level 0.

Ter


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060921/27ca476e/attachment-0001.html 

From ryan.hollom at us.lawson.com  Thu Sep 21 07:54:08 2006
From: ryan.hollom at us.lawson.com (Ryan Hollom)
Date: Thu, 21 Sep 2006 09:54:08 -0500
Subject: [antlr-interest] 'filter' option in ANTLR 3.0
In-Reply-To: <20060920230153.2717D14BE@mail.intersystems.com>
Message-ID: <OF17FE50E1.461E7F41-ON862571F0.00514017-862571F0.0051DD06@lawson.com>

Thanks for the advice, Jim.  If I must, I could break apart all of the 
multi-word keywords into single word keywords -- I'm not sure if I would 
run in to other issues or not.  However, I'm also using the generated 
parser for content assist in an editor, and would very much like to 
present multi word keywords in their full form, rather than breaking them 
apart into individual options.  Perhaps a small concession to get the 
parser working, but a desire nonetheless!

Please refer to my previous post for a trimmed down example of my 
language, and the issues that I'm still seeing.

Thanks again,
Ryan




"Jim Idle" <jimi at intersystems.com> 
Sent by: antlr-interest-bounces at antlr.org
09/20/2006 06:01 PM

To
Ryan Hollom/Lawson at Lawson, <antlr-interest at antlr.org>
cc

Subject
Re: [antlr-interest] 'filter' option in ANTLR 3.0






Ryan, 
 
I suggest that you will have more traction specifying these words as 
individual keywords and not using spaces within the keywords. I presume 
that you want filter mode for some other reason though? You would not 
normally require it for ?normal? parsing. Then again maybe this is not a 
parser as such?
 
So: Try this, (with suitable mods of course)

grammar test;
 
test
      : ( classDef | fieldDef | inlineDef)+
      ;
 
classDef: ID IS A CLASSDEFINITION   ;
fieldDef: ID IS (A | AN) ID ;
inlineDef: ID IS (ALPHA | NUMERIC) ;
 
A     : 'a' ;
ALPHA : 'Alpha' ;
AN    : 'an';
CLASSDEFINITION : 'ClassDefinition' ;
IS    : 'is' ;
NUMERIC : 'Numeric';
 
WS    : (' ' | '\t' | 'n' | '\r') { channel=99;} ;
 
ID : IDCHARS IDCHARS*;
 
 
fragment
IDCHARS: ('a'..'z' | 'A'.. 'Z') ;
 
 
This works perfectly in ANTLRWorks 1.0b3 with the input:


Elephant is a ClassDefinition
Socrates is an Elephant
AllElephants is a Socrates
 
 
Ter ? this reminds me that though we have debated the case insensitive 
lexing thing, I no longer remember what the conclusion was [meaning los in 
meta levels ;-) ]? Just overriding things in the end was it?
 
Jim
 
 

From: antlr-interest-bounces at antlr.org 
[mailto:antlr-interest-bounces at antlr.org] On Behalf Of Ryan Hollom
Sent: Wednesday, September 20, 2006 2:17 PM
To: antlr-interest at antlr.org
Subject: [antlr-interest] 'filter' option in ANTLR 3.0
 

Greetings- 
I have a grammar with several multi-word keywords, and I'm having trouble 
properly tokenizing the input.  For example, I have the rules 

classDef : ID 'is a ClassDefinition'; 
fieldDef: ID ('is a' | 'is an') ID 
inlineDef : ID 'is' ('Alpha' | 'Numeric') 

So the 'is'-prefixed keywords are 'is a ClassDefinition', 'is a Class', 
'is a', 'is an', and 'is'.  With these rules, the lexer chokes on input 
like: 

MyClass is a ClassDefinition 
        MyNumericField is Numeric 

with a no viable alt line 2:20; char='N' 

It would seem to me that the lexer should try to match the longest 
multi-word keyword it can, and, in this case, should create the tokens 
<MyClass>, <'is a ClassDefinition'>, <MyNumericField>, <'is'>, and 
<'Numeric'>.  I have tried to use the filter option to properly tokenize, 
but this forces me to list all of my keywords in the order in which they 
should be recognized (correct?), which seems like it would be a big issue 
when importing a different vocab/super grammar. 

Am I missing an obvious solution here?  I've tried many different 
permutations and can't seem to get it just right. 

Thanks in advance, 
Ryan 

PS - Why is it that when the filter option is set to true, semantic 
actions are handled differently?  For the rule 

fieldDef: ID { printId(); } 'is a' ID; 

generates to 
if (backtracking == 1) { printId(); } 
with filter=true vs 
if (backtracking == 0) { printId(); } 
when filter=false. 

I am using antlr3.0 b4.  Thanks again! 
--
No virus found in this incoming message.
Checked by AVG Free Edition.
Version: 7.1.405 / Virus Database: 268.12.5/450 - Release Date: 9/18/2006

--
No virus found in this outgoing message.
Checked by AVG Free Edition.
Version: 7.1.405 / Virus Database: 268.12.5/450 - Release Date: 9/18/2006
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060921/680baaa4/attachment.html 

From mantu_lists at yahoo.com.br  Thu Sep 21 07:59:29 2006
From: mantu_lists at yahoo.com.br (luciano mantuaneli)
Date: Thu, 21 Sep 2006 14:59:29 +0000 (GMT)
Subject: [antlr-interest] Problem using the Java 1.5 grammar available in
	antlr site
Message-ID: <20060921145929.42131.qmail@web39508.mail.mud.yahoo.com>

Greetings!
I tried to use the Java 1.5 grammar available at antlr site (The grammar under the
"Java 1.5 + Java preprocessor" option in the grammar page), but i had an odd problem: The parser generated seems to just don't recognize java source!!!
I tried to submit the content of this simple .java file, but the Lexer generated by the mentioned grammar(JavaLexer class) throws the following exception stack trace:

 Character.isLetter(LA(1))
    at antlr.metrics.parsers.java.tiger.JavaLexer.nextToken(JavaLexer.java:382)
    at antlr.TokenBuffer.fill(TokenBuffer.java:69)
    at antlr.TokenBuffer.LA(TokenBuffer.java:80)
    at antlr.LLkParser.LA(LLkParser.java:52)
    at antlr.metrics.parsers.java.tiger.JavaRecognizer.compilationUnit(JavaRecognizer.java:296)
    at antlr.metrics.parsers.java.tiger.Test.getTree(Test.java:51)
    at antlr.metrics.parsers.java.tiger.Test.main(Test.java:64)

All content under antlr.metrics package is of my authoring. The gramar file and the genereted classes are in the antlr.metrics.parsers.java.tiger package

What is going on here?  Why the Lexer throws that exception? am I doing something wrong?

Here you can find my java program files

My best regards!
Mantu


 		
---------------------------------
 Yahoo! Search
 M?sica para ver e ouvir: You're Beautiful, do James Blunt
 		
---------------------------------
 O Yahoo! est? de cara nova. Venha conferir!
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060921/23193473/attachment.html 

From costa_basil at yahoo.ca  Thu Sep 21 13:56:12 2006
From: costa_basil at yahoo.ca (Costa Basil)
Date: Thu, 21 Sep 2006 16:56:12 -0400 (EDT)
Subject: [antlr-interest] javacc like ast generator for antlr
In-Reply-To: <B859A4DA-BF7A-40A4-95AE-7C098CAE3645@cs.usfca.edu>
Message-ID: <20060921205612.28807.qmail@web54303.mail.yahoo.com>

Thank you. Just for the record, this link on your website describes in detail the solution you suggested: http://www.antlr.org/article/parse.trees/index.tml


Terence Parr <parrt at cs.usfca.edu> wrote: Hi.  you want a parse tree, which is easy to build by overriding the  
match method and the traceIn/traceOut methods.

Ter
On Sep 19, 2006, at 10:07 PM, Costa Basil wrote:

> Does anybody know if there is an add-on that allows me to generate  
> parsing trees with antlr 2.7.6/c++ similar with the ones supported  
> by javacc? In case you are wondering what I mean, the javacc ASTs  
> are driven by non-terminals while the ASTs that you create with  
> antlr are "terminal" oriented.
>
> Thanks
>
>
>
> Now you can have a huge leap forward in email: get the new Yahoo!  
> Mail.



 		
---------------------------------
The best gets better. See why everyone is raving about the All-new Yahoo! Mail.  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060921/e8196b5e/attachment.html 

From sunjigang1965 at yahoo.com.cn  Thu Sep 21 16:45:36 2006
From: sunjigang1965 at yahoo.com.cn (=?gb2312?q?=CB=EF=BC=CD=B8=D5=20Jigang=20(Robert)=20Sun?=)
Date: Fri, 22 Sep 2006 07:45:36 +0800 (CST)
Subject: [antlr-interest] Does not report error when generating code
Message-ID: <20060921234536.30348.qmail@web15708.mail.cnb.yahoo.com>

Please have a look at a simple grammar:

grammar CL;
options {
    language  = CSharp;
     output = AST;
}
program: basicValue;
basicValue: INT |REAL ;

INT:Num;
REAL:  Num '.' Num;
fragment Num: Digit+;
fragment Digit:'0'..'9';
WS      : (' '|'\t'|'\n')+ {channel=99;};

When generating c# code, it seems normal, but I tried to run the generated code, compiling errors
were given:

Error	4	The name 'dfa3_transition1' does not exist in the current context
Error	5	The name 'dfa3_transition0' does not exist in the current context	

for code segment
...
  public static readonly short[][] DFA3_transition = {
    	dfa3_transition1,
    	dfa3_transition0,
    	dfa3_transition_null,
    	dfa3_transition_null,
    	dfa3_transition_null
        };
...

in CLLexer.cs.

Thanks.

Jigang


	

	
		
___________________________________________________________ 
Mp3???-???????
http://music.yahoo.com.cn/?source=mail_mailbox_footer

From xu_guoneng at hotmail.com  Fri Sep 22 04:40:17 2006
From: xu_guoneng at hotmail.com (Guoneng Xu)
Date: Fri, 22 Sep 2006 19:40:17 +0800
Subject: [antlr-interest] can't generate Parser with ecmascriptA3.g
Message-ID: <BAY118-F37E6C7D51C3BDA7C072DB3E2210@phx.gbl>

An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060922/2f3b8335/attachment.html 

From johnstephi at googlemail.com  Fri Sep 22 07:42:21 2006
From: johnstephi at googlemail.com (John Goering)
Date: Fri, 22 Sep 2006 16:42:21 +0200
Subject: [antlr-interest] ArrayIndexOutOfBoundsException while generating
	code in v3
Message-ID: <8b74c5ab0609220742s150d4fabh4d5bf386d1cebb6@mail.gmail.com>

Hi there,
while generating code in either antlrWorks or from the command line, I get
the following error and stacktrace:

ANTLR Parser Generator   Early Access Version 3.0b4 (??, 2006)  1989-2006
internal error: t.g : java.lang.ArrayIndexOutOfBoundsException: -1
org.antlr.misc.BitSet.range(BitSet.java:354)
org.antlr.misc.BitSet.addAll(BitSet.java:105)
org.antlr.misc.BitSet.of(BitSet.java:339)
org.antlr.codegen.CodeGenerator.generateLocalFOLLOW(CodeGenerator.java:549)
org.antlr.codegen.CodeGenTreeWalker.atom(CodeGenTreeWalker.java:1797)
org.antlr.codegen.CodeGenTreeWalker.element(CodeGenTreeWalker.java:1353)
org.antlr.codegen.CodeGenTreeWalker.alternative(CodeGenTreeWalker.java:1107)
org.antlr.codegen.CodeGenTreeWalker.block(CodeGenTreeWalker.java:991)
org.antlr.codegen.CodeGenTreeWalker.ebnf(CodeGenTreeWalker.java:2189)
org.antlr.codegen.CodeGenTreeWalker.element(CodeGenTreeWalker.java:1624)
org.antlr.codegen.CodeGenTreeWalker.alternative(CodeGenTreeWalker.java:1107)
org.antlr.codegen.CodeGenTreeWalker.block(CodeGenTreeWalker.java:991)
org.antlr.codegen.CodeGenTreeWalker.rule(CodeGenTreeWalker.java:719)
org.antlr.codegen.CodeGenTreeWalker.rules(CodeGenTreeWalker.java:510)
org.antlr.codegen.CodeGenTreeWalker.grammarSpec(CodeGenTreeWalker.java:452)
org.antlr.codegen.CodeGenTreeWalker.grammar(CodeGenTreeWalker.java:301)
org.antlr.codegen.CodeGenerator.genRecognizer(CodeGenerator.java:409)
org.antlr.Tool.processGrammar(Tool.java:320)
org.antlr.Tool.process(Tool.java:251)
org.antlr.Tool.main(Tool.java:70)

Should I send the grammar as well, am I doing something wrong, or is this a
known problem?

Thanks in advance,
John Goering

-- 
"I love deadlines. I like the whooshing sound they make as they fly by." -
Douglas Adams
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060922/2bf5e1e1/attachment.html 

From vnpham.us at gmail.com  Fri Sep 22 08:27:27 2006
From: vnpham.us at gmail.com (Vinh N. Pham)
Date: Fri, 22 Sep 2006 11:27:27 -0400
Subject: [antlr-interest] Heterogeneous tree in antlr 3
Message-ID: <451400DF.9060106@gmail.com>

Hi,
    Are there still ways to write Heterogeneous AST tree in antlr3 ? 
I've seen in the website some information about Yggdrasil Antlr?  What 
is the plan for that tool? Is it going to be merged with antlr sometimes 
in the future?

Thanks,

Vinh N. Pham

From kroepke at classdump.org  Sat Sep 23 16:54:12 2006
From: kroepke at classdump.org (Kay Roepke)
Date: Sun, 24 Sep 2006 01:54:12 +0200
Subject: [antlr-interest] ArrayIndexOutOfBoundsException while
	generating code in v3
In-Reply-To: <8b74c5ab0609220742s150d4fabh4d5bf386d1cebb6@mail.gmail.com>
References: <8b74c5ab0609220742s150d4fabh4d5bf386d1cebb6@mail.gmail.com>
Message-ID: <2CF5DC16-55BE-448F-A463-3DFB3B896B7C@classdump.org>

Hi John!

On 22. Sep 2006, at 16:42 Uhr, John Goering wrote:

> Should I send the grammar as well, am I doing something wrong, or  
> is this a
> known problem?

I don't think it is a known problem. Please send the grammar, there  
seems to be deeper issue somewhere.

cheers,
-k





From ywangxd at gmail.com  Sun Sep 24 01:30:31 2006
From: ywangxd at gmail.com (yan)
Date: Sun, 24 Sep 2006 16:30:31 +0800
Subject: [antlr-interest] some problem with GnuCParser::attribute()
Message-ID: <45164231.43986980.2a2b.ffffccdc@mx.gmail.com>

Dear everybody:

     I am a graduate student in xidian university of China. Our research
group is doing some research on Evolutionary Testing ( ET). Static analysis
is used to guide the dynamic search in ET.  For static analysis, The ANTLR
tool is used to product lexical analyzer, parser and tree parser. For some
reason, we need the lexical analyzer, parser and tree parser written in C++.
For Monty Zukowski has provided GNU C grammatical descriptions containing
Java actions. For convenience, I rewrite the actions and some relating
classes in C++. But when I use the ANTLR to produce the lexical analyzer,
parser and tree parser, there is some problem. I can't figure out the
reason. 

So I turn to you!  I will be very graceful if you can give me some
suggestions about the error!  I use antlr-2.7.6. 

The following is the mistake!

void GnuCParser::attribute() {

      returnAST = RefTNode(ANTLR_USE_NAMESPACE(antlr)nullAST);

      ANTLR_USE_NAMESPACE(antlr)ASTPair currentAST;

      RefTNode attribute_AST = RefTNode(ANTLR_USE_NAMESPACE(antlr)nullAST);

      

      try {      // for error handling

           { // ( ... )*

           for (;;) {

                 if ((_tokenSet_57.member(LA(1)))) {

                      {

                      RefTNode tmp99_AST =
RefTNode(ANTLR_USE_NAMESPACE(antlr)nullAST);

                      if ( inputState->guessing == 0 ) {

 

////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////

//////////////////////////////There is a
error!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!

//////////////////////////////LT(1) shouldn't be converted to RefAST but
RefTNode!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
!!!!!

                            tmp99_AST =
RefTNode(astFactory->create(ANTLR_USE_NAMESPACE(antlr)RefAST(LT(1))));

////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////

                            astFactory->addASTChild(currentAST,
ANTLR_USE_NAMESPACE(antlr)RefAST(tmp99_AST));

                      }

                      match(_tokenSet_57);

                      }

                 }

                 else if ((LA(1) == LPAREN)) {

                      RefTNode tmp100_AST =
RefTNode(ANTLR_USE_NAMESPACE(antlr)nullAST);

                      if ( inputState->guessing == 0 ) {

                            tmp100_AST = astFactory->create(LT(1));

                            astFactory->addASTChild(currentAST,
ANTLR_USE_NAMESPACE(antlr)RefAST(tmp100_AST));

                      }

                      match(LPAREN);

                      attributeList();

                      if (inputState->guessing==0) {

                            astFactory->addASTChild(currentAST,
ANTLR_USE_NAMESPACE(antlr)RefAST(returnAST));

                      }

                      RefTNode tmp101_AST =
RefTNode(ANTLR_USE_NAMESPACE(antlr)nullAST);

                      if ( inputState->guessing == 0 ) {

                            tmp101_AST = astFactory->create(LT(1));

                            astFactory->addASTChild(currentAST,
ANTLR_USE_NAMESPACE(antlr)RefAST(tmp101_AST));

                      }

                      match(RPAREN);

                 }

                 else {

                      goto _loop129;

                 }

           }

           _loop129:;

           } // ( ... )*

           attribute_AST = RefTNode(currentAST.root);

      }

      catch (ANTLR_USE_NAMESPACE(antlr)RecognitionException& ex) {

           if( inputState->guessing == 0 ) {

                 reportError(ex);

                 recover(ex,_tokenSet_5);

           } else {

                 throw;

           }

      }

      returnAST = attribute_AST;

}

The words in yellow are proposed to be "RefToken" but "RefAST". This is the
only mistake. I am confused totally! 

I sincerely hope you can help me!

When we solve this problem, I will share it in the Internet!

I am looking forwards to hearing from you!

 

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060924/37d64b7e/attachment-0001.html 

From johnstephi at googlemail.com  Sun Sep 24 23:23:59 2006
From: johnstephi at googlemail.com (John Goering)
Date: Mon, 25 Sep 2006 08:23:59 +0200
Subject: [antlr-interest] ArrayIndexOutOfBoundsException while
	generating code in v3
In-Reply-To: <2CF5DC16-55BE-448F-A463-3DFB3B896B7C@classdump.org>
References: <8b74c5ab0609220742s150d4fabh4d5bf386d1cebb6@mail.gmail.com>
	<2CF5DC16-55BE-448F-A463-3DFB3B896B7C@classdump.org>
Message-ID: <8b74c5ab0609242323k11a7aba8ge709a735749af628@mail.gmail.com>

Hi there,
Thanks, here's the grammar (as far as I got when I noticed I could generate
code with it). Please note that I'm still extremely wet behind the ears in
regards to the whole thing. ;)

Thanks in advance for any help...

John
--------------------------

grammar mygrammar;

formula    :    (statement (SEMI | EOF))*
    ;

statement
    :
    'if' parExpression 'then' statement
    | 'for' forInit 'to' expression ('step' expression)? 'do' statement
    | 'while' parExpression statement
    | 'do' statement 'while' parExpression ';'
    | ';'
    | statementExpression ';'
    ;
block
    :    '(' (statement)* ')'
    ;

forInit
    :    variableDeclarator
    ;

variableDeclarator
    :    Identifier assignmentOperator expression
    ;

localVariableDeclaration
    :    variableDeclarator ';'
    ;

forUpdate
    :    expressionList
    ;

expression
    :    conditionalOrExpression (assignmentOperator
conditionalOrExpression)?
    ;

type
    :    primitiveType ('array' | 'range')*
    ;

primitiveType
    :   'booleanvar'
    |    'numbervar'
    |    'stringvar'
    |    'datevar'
    |    'datetimevar'
    ;

assignmentOperator
    :    ':='
    ;

conditionalOrExpression
    :   conditionalAndExpression ( 'or' conditionalAndExpression )*
    ;

conditionalAndExpression
    :   relationalExpression ( 'and' relationalExpression )*
    ;

relationalExpression
    :   additiveExpression ( relationalOp additiveExpression )*
    ;

relationalOp
    :    ('<' '=' | '>' '=' | '<' | '>' | '=')
    ;

additiveExpression
    :   multiplicativeExpression ( ('+' | '-') multiplicativeExpression )*
    ;

multiplicativeExpression
    :   unaryExpression ( ( '*' | '/' ) unaryExpression )*
    ;

unaryExpression
    :   '+' unaryExpression
    |    '-' unaryExpression
    |   primary
    ;

primary
    :    Identifier (arguments)?
    |   primitiveType Identifier
    |   parExpression
    |   literal
    |   field
    ;
field    :    '{' (~'}')+ '}'
    ;

parExpression
    :    '(' expression ')'
    ;

literal
    :   DecimalLiteral
    |   FloatingPointLiteral
    |   CharacterLiteral
    |   StringLiteral
    |   booleanLiteral
    |   'null'
    ;

booleanLiteral
    :   'true'
    |   'false'
    ;
stringliteral
    :    '"' (~'"')* '"'
    ;

expressionList
    :   expression (',' expression)*
    ;

statementExpression
    :    expression
    ;

constantExpression
    :    expression
    ;


arguments
    :    '(' expressionList? ')'
    ;

ID    :    ('a'..'z' | 'A'..'Z')+
    ;

CharacterLiteral
    :   '\'' ( EscapeSequence | ~('\''|'\\') ) '\''
    ;

DecimalLiteral : ('0' | '1'..'9' '0'..'9'*);

FloatingPointLiteral
    :   ('0'..'9')+ '.' ('0'..'9')*
    |   '.' ('0'..'9')+
    ;

StringLiteral
    :  '"' ( EscapeSequence | ~('\\'|'"') )* '"'
    ;


fragment
EscapeSequence
    :   '\\' ('b'|'t'|'n'|'f'|'r'|'\"'|'\''|'\\')
    |   UnicodeEscape
    |   OctalEscape
    ;

fragment
OctalEscape
    :   '\\' ('0'..'3') ('0'..'7') ('0'..'7')
    |   '\\' ('0'..'7') ('0'..'7')
    |   '\\' ('0'..'7')
    ;

fragment
UnicodeEscape
    :   '\\' 'u' HexDigit HexDigit HexDigit HexDigit
    ;

Identifier
    :   Letter (Letter|JavaIDDigit)*
    ;

fragment
HexDigit : ('0'..'9'|'a'..'f'|'A'..'F') ;
fragment
Letter
    :  'A'..'Z'|'a'..'z'
    ;

fragment
JavaIDDigit
    :  '0'..'9'
   ;

SEMI    :    ';';
WS  :   (   ' '
        |   '\t'
        |   '\r'
        |   '\n'
        )+
        { channel=99; }
    ;


On 9/24/06, Kay Roepke <kroepke at classdump.org> wrote:
>
> Hi John!
>
> On 22. Sep 2006, at 16:42 Uhr, John Goering wrote:
>
> > Should I send the grammar as well, am I doing something wrong, or
> > is this a
> > known problem?
>
> I don't think it is a known problem. Please send the grammar, there
> seems to be deeper issue somewhere.
>
> cheers,
> -k
>
>
>
>
>


-- 
"I love deadlines. I like the whooshing sound they make as they fly by." -
Douglas Adams
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060925/ce7107f5/attachment.html 

From johnstephi at googlemail.com  Mon Sep 25 02:49:05 2006
From: johnstephi at googlemail.com (John Goering)
Date: Mon, 25 Sep 2006 11:49:05 +0200
Subject: [antlr-interest] ArrayIndexOutOfBoundsException while
	generating code in v3
In-Reply-To: <8b74c5ab0609242323k11a7aba8ge709a735749af628@mail.gmail.com>
References: <8b74c5ab0609220742s150d4fabh4d5bf386d1cebb6@mail.gmail.com>
	<2CF5DC16-55BE-448F-A463-3DFB3B896B7C@classdump.org>
	<8b74c5ab0609242323k11a7aba8ge709a735749af628@mail.gmail.com>
Message-ID: <8b74c5ab0609250249q1bfe58f7nb273f615068df523@mail.gmail.com>

Hi again,
Quick update: Taking out "EOF" (which I had not defined since I thought it
was implicitly defined) and tinkering around with a few other things (not
sure which ones helped) ended up causing the code to be able to be
generated, so it's no longer a problem for me, but probably still a bug.
Could it have to do with the missing EOF token?

Here's a very simplified version of the grammar which still causes the
exception for me:

grammar blablubb;

program :    (statement (';' | EOF))*
    ;

statement :
        (primary | parExpression)*
    ;

parExpression
    :    '(' primary ')'
    ;

primary :    Identifier
    ;

Identifier
    :   'A'
    ;


Thanks,
John Goering
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060925/bc23c1c5/attachment.html 

From kroepke at classdump.org  Mon Sep 25 03:31:54 2006
From: kroepke at classdump.org (Kay Roepke)
Date: Mon, 25 Sep 2006 12:31:54 +0200
Subject: [antlr-interest] ArrayIndexOutOfBoundsException while
	generating code in v3
In-Reply-To: <8b74c5ab0609250249q1bfe58f7nb273f615068df523@mail.gmail.com>
References: <8b74c5ab0609220742s150d4fabh4d5bf386d1cebb6@mail.gmail.com>
	<2CF5DC16-55BE-448F-A463-3DFB3B896B7C@classdump.org>
	<8b74c5ab0609242323k11a7aba8ge709a735749af628@mail.gmail.com>
	<8b74c5ab0609250249q1bfe58f7nb273f615068df523@mail.gmail.com>
Message-ID: <9E394995-DDE3-4E8A-B50F-67ACF74F5FC8@classdump.org>

Hi John!

On 25. Sep 2006, at 11:49 Uhr, John Goering wrote:

> Quick update: Taking out "EOF" (which I had not defined since I  
> thought it
> was implicitly defined) and tinkering around with a few other  
> things (not
> sure which ones helped) ended up causing the code to be able to be
> generated, so it's no longer a problem for me, but probably still a  
> bug.
> Could it have to do with the missing EOF token?

Thank you very much for the simplified grammar! The problem is indeed  
the EOF token, but not that you didn't define it, but rather that ANTLR
tries to insert it into the local FOLLOW set when it generates code.

It tries to insert -1 in the corresponding bitset, which of course  
fails. Setting bit -1 doesn't seem to be a good idea ;)
After a quick inspection, I don't see an obvious fix, but I'm sure  
Ter will ;)

I add this to the bug list in the wiki.

What exactly do you want to achieve with the program rule? My best  
guess is that you want the ';' to be optional for the last statement  
in the input,
but the way it is written now, the EOF can never be reached (at least  
ANTLR warns to this effect before crashing badly... :))

Thanks for the report!

cheers,
-k

-- 
Kay R?pke <kroepke at classdump.org>
classdump Software
Key fingerprint = A849 0F2C C322 4022 379E  8661 7E1B FE0D 4CD2 A6D0




From johnstephi at googlemail.com  Mon Sep 25 03:36:55 2006
From: johnstephi at googlemail.com (John Goering)
Date: Mon, 25 Sep 2006 12:36:55 +0200
Subject: [antlr-interest] ArrayIndexOutOfBoundsException while
	generating code in v3
In-Reply-To: <9E394995-DDE3-4E8A-B50F-67ACF74F5FC8@classdump.org>
References: <8b74c5ab0609220742s150d4fabh4d5bf386d1cebb6@mail.gmail.com>
	<2CF5DC16-55BE-448F-A463-3DFB3B896B7C@classdump.org>
	<8b74c5ab0609242323k11a7aba8ge709a735749af628@mail.gmail.com>
	<8b74c5ab0609250249q1bfe58f7nb273f615068df523@mail.gmail.com>
	<9E394995-DDE3-4E8A-B50F-67ACF74F5FC8@classdump.org>
Message-ID: <8b74c5ab0609250336q2b4f1f53p2922009f1eacb532@mail.gmail.com>

OK, thanks!
That's right, I wanted ';' to be optional for the last statement. I changed
that now to:

statement? (SEMI statement)* SEMI?

which seems to work well. Is there an easier way than that?
John Goering

On 9/25/06, Kay Roepke <kroepke at classdump.org> wrote:
>
> Hi John!
>
> On 25. Sep 2006, at 11:49 Uhr, John Goering wrote:
>
> > Quick update: Taking out "EOF" (which I had not defined since I
> > thought it
> > was implicitly defined) and tinkering around with a few other
> > things (not
> > sure which ones helped) ended up causing the code to be able to be
> > generated, so it's no longer a problem for me, but probably still a
> > bug.
> > Could it have to do with the missing EOF token?
>
> Thank you very much for the simplified grammar! The problem is indeed
> the EOF token, but not that you didn't define it, but rather that ANTLR
> tries to insert it into the local FOLLOW set when it generates code.
>
> It tries to insert -1 in the corresponding bitset, which of course
> fails. Setting bit -1 doesn't seem to be a good idea ;)
> After a quick inspection, I don't see an obvious fix, but I'm sure
> Ter will ;)
>
> I add this to the bug list in the wiki.
>
> What exactly do you want to achieve with the program rule? My best
> guess is that you want the ';' to be optional for the last statement
> in the input,
> but the way it is written now, the EOF can never be reached (at least
> ANTLR warns to this effect before crashing badly... :))
>
> Thanks for the report!
>
> cheers,
> -k
>
> --
> Kay R?pke <kroepke at classdump.org>
> classdump Software
> Key fingerprint = A849 0F2C C322 4022 379E  8661 7E1B FE0D 4CD2 A6D0
>
>
>
>


-- 
"I love deadlines. I like the whooshing sound they make as they fly by." -
Douglas Adams
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060925/a17c2103/attachment.html 

From kroepke at classdump.org  Mon Sep 25 03:47:46 2006
From: kroepke at classdump.org (Kay Roepke)
Date: Mon, 25 Sep 2006 12:47:46 +0200
Subject: [antlr-interest] ArrayIndexOutOfBoundsException while
	generating code in v3
In-Reply-To: <8b74c5ab0609250335h154cdc13p89a7ab160eab4c05@mail.gmail.com>
References: <8b74c5ab0609220742s150d4fabh4d5bf386d1cebb6@mail.gmail.com>
	<2CF5DC16-55BE-448F-A463-3DFB3B896B7C@classdump.org>
	<8b74c5ab0609242323k11a7aba8ge709a735749af628@mail.gmail.com>
	<8b74c5ab0609250249q1bfe58f7nb273f615068df523@mail.gmail.com>
	<9E394995-DDE3-4E8A-B50F-67ACF74F5FC8@classdump.org>
	<8b74c5ab0609250335h154cdc13p89a7ab160eab4c05@mail.gmail.com>
Message-ID: <6FCB223A-82DE-47C0-8811-FDA8815ECC65@classdump.org>

John,

On 25. Sep 2006, at 12:35 Uhr, John Goering wrote:

> OK, thanks!
> That's right, I wanted ';' to be optional for the last statement. I  
> changed
> that now to:
>
> statement? (SEMI statement)* SEMI?
>
> which seems to work well. Is there an easier way than that?

This is the common way to do it. Be aware that the form above allows:
1)	;		// a lone semicolon
2)			// nothing at all!

That's probably acceptable input, just wanted to point that out ;)

-k
-- 
Kay R?pke <kroepke at classdump.org>
classdump Software
Key fingerprint = A849 0F2C C322 4022 379E  8661 7E1B FE0D 4CD2 A6D0




From Michiel_Vermandel at axi.be  Mon Sep 25 05:34:42 2006
From: Michiel_Vermandel at axi.be (Michiel Vermandel)
Date: Mon, 25 Sep 2006 14:34:42 +0200
Subject: [antlr-interest] covert grammars
Message-ID: <OFA3CE4243.411F9B1B-ONC12571F4.0044FED6-C12571F4.00451896@Axi.be>

Hi,

I have quite some grammers in Antlr 2.7.5.
What is the fastest way of converting them to Antlr 3?
Any directions?

Thanks!
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060925/95b36a9a/attachment-0001.html 

From mai00cas at studserv.uni-leipzig.de  Mon Sep 25 10:45:11 2006
From: mai00cas at studserv.uni-leipzig.de (Magnus Knuth)
Date: Mon, 25 Sep 2006 19:45:11 +0200
Subject: [antlr-interest] Loop until EOF
In-Reply-To: <451400DF.9060106@gmail.com>
References: <451400DF.9060106@gmail.com>
Message-ID: <451815A7.9060102@studserv.uni-leipzig.de>

Hello.

I want to parse a file where "foo( /term?/ )." repeats until EOF and get 
an AST with foo_list as root with all the foos as children. So I use 
these two rules:

foo_simple_list
    :   (foo_entry )* EOF!
{
    ## = #([FOO_LIST, "FooList"], ##);
};

foo_entry
    :    FOO^ LPAREN! ( term )? RPAREN! FULL_STOP!
;
exception catch [RecognitionException ex] {
    reportError(ex);
    consume();
    while (LA(1) != Token.EOF_TYPE && LA(1) != FULL_STOP) {
        consume();
    }
    if (LA(1) == FULL_STOP) {
        System.out.println("recover");
        consume();
    }
    return;
}

My problem is that when there is an spelling error in 'foo' the parser 
throws a RecognitionException "expecting EOF, found 'bar'". But i would 
like the parser to go into foo_entry rule and recover from not finding a 
"foo" until there is nothing but a endoffile.

The produced parser code looks like:
            {
            _loop4159:
            do {
                if ((LA(1)==FOO)) {
                    foo_entry();
                    astFactory.addASTChild(currentAST, returnAST);
                }
                else {
                    break _loop4159;
                }
            } while (true);
            }
            match(Token.EOF_TYPE);

but should be more something like:
            {
            _loop4159:
            do {
                if ((LA(1) != EOF)) {
                    foo_entry();
                    astFactory.addASTChild(currentAST, returnAST);
                }
                else {
                    break _loop4159;
                }
            } while (true);
            }
            match(Token.EOF_TYPE);

How do I get such a behavior? I already tried with syntactic predicates, 
greedyness and many more without success.

Thanks for hints. Magnus.

From antlr at shmuelhome.mine.nu  Mon Sep 25 13:42:46 2006
From: antlr at shmuelhome.mine.nu (shmuel siegel)
Date: Mon, 25 Sep 2006 22:42:46 +0200
Subject: [antlr-interest] Odd lexer rule resolution problem
Message-ID: <45183F46.9000000@shmuelhome.mine.nu>

I don't remember this problem being discussed recently but I have
encountered an unusual (for me ) problem in the antr 2.7.6 lexer generator.

Consider the simple grammar
header
{
    package error;
}

class boo extends Lexer;
options
{
k=2;
charVocabulary = '\3'..'\377'; // LATIN
}

NEWLINE :
        '\n'
        |    '\r'
    | "@@n" //ARB specific new line equivalent not in source
    ;
AT_SIGN: "@";


The "@" in NEWLINE blocks AT_SIGN. Reversing the two rules reverses the
problem. That is, which ever comes first is the one that wins because
antlr generates the following test in nextToken()
                if ((LA(1)=='\n'||LA(1)=='\r'||LA(1)=='@') && (true)) {

Interestingly enough, antlr gets it right if newline was only looking
for "@@n". Is this just another manifestation of the linear lookahead
problem?

The good news is that antlr3 gets it right.


From kroepke at classdump.org  Mon Sep 25 13:24:24 2006
From: kroepke at classdump.org (Kay Roepke)
Date: Mon, 25 Sep 2006 22:24:24 +0200
Subject: [antlr-interest] ArrayIndexOutOfBoundsException while
	generating code in v3
In-Reply-To: <9E394995-DDE3-4E8A-B50F-67ACF74F5FC8@classdump.org>
References: <8b74c5ab0609220742s150d4fabh4d5bf386d1cebb6@mail.gmail.com>
	<2CF5DC16-55BE-448F-A463-3DFB3B896B7C@classdump.org>
	<8b74c5ab0609242323k11a7aba8ge709a735749af628@mail.gmail.com>
	<8b74c5ab0609250249q1bfe58f7nb273f615068df523@mail.gmail.com>
	<9E394995-DDE3-4E8A-B50F-67ACF74F5FC8@classdump.org>
Message-ID: <70D96038-1D14-423E-9E40-709B39847271@classdump.org>

Hi!

FYI:

On 25. Sep 2006, at 12:31 Uhr, Kay Roepke wrote:

> It tries to insert -1 in the corresponding bitset, which of course  
> fails. Setting bit -1 doesn't seem to be a good idea ;)
> After a quick inspection, I don't see an obvious fix, but I'm sure  
> Ter will ;)
>
> I add this to the bug list in the wiki.

Nice turnaround time :) I just submitted a patch to Ter, it after all  
was an easy fix.

Thanks for spotting this!

-k




From rhill03 at eds.com  Mon Sep 25 23:24:57 2006
From: rhill03 at eds.com (Hill, Robert)
Date: Tue, 26 Sep 2006 07:24:57 +0100
Subject: [antlr-interest] Hi All...
Message-ID: <2E909902FD3A03419E3A905908AE3DD40265016A@UKNSM201.emea.corp.eds.com>

Need a quickish answer so I thought I'd post to the list instead of
badgering Jean B. Directly (again..)

Does the antlrworks IntelliJ plugin handle grammars in separate files?
I've set the tokenVocab= of the parser, but all the lexer rules are
coming up unknown.
The grammars compile (via Ant script) & work without error, but I've
lost the intellisense in the Ide :(
Does AntlrWorks IDE handle split grammars?



Cheers!
Rob



--
 <<Picture (Metafile)>> 
DWP ACW
EDS Hallamshire Business Park
F1E/045
Sheffield	
T:	+44 (0) 114 291 1928
M:	+44 (0) 790 318 5516
E:	rhill03 at eds.com


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060926/215c23ba/attachment.html 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: image/bmp
Size: 9486 bytes
Desc: Picture (Metafile)
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20060926/215c23ba/attachment.bmp 

From pismikrop at gmail.com  Tue Sep 26 01:00:43 2006
From: pismikrop at gmail.com (=?ISO-8859-9?Q?F=FDrat_K=DC=C7=DCK?=)
Date: Tue, 26 Sep 2006 11:00:43 +0300
Subject: [antlr-interest] [v3] creating shell for interpreter
Message-ID: <8e210baf0609260100y590b866eh3bddee3c019e67f4@mail.gmail.com>

Hi,

i created a simple interpreter.

CharStream        input  = new ANTLRInputStream(new DataInputStream(
System.in));
SomeLexer         lexer  = new JavyLexer(input);
CommonTokenStream tokens = new CommonTokenStream(lexer);
SomeParser            parser = new JavyParser(tokens);
parser.start();
But interpreter evaluates commands only one time. I want to create a
continuous shell.
What should i do?

-- 
??r. G?r. F?rat K???K
ADAMYO Distance Learning
SAKARYA University / TURKEY
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060926/77df0126/attachment.html 

From pismikrop at gmail.com  Tue Sep 26 05:32:50 2006
From: pismikrop at gmail.com (=?ISO-8859-9?Q?F=FDrat_K=DC=C7=DCK?=)
Date: Tue, 26 Sep 2006 15:32:50 +0300
Subject: [antlr-interest] [v3] creating shell for interpreter
In-Reply-To: <8e210baf0609260100y590b866eh3bddee3c019e67f4@mail.gmail.com>
References: <8e210baf0609260100y590b866eh3bddee3c019e67f4@mail.gmail.com>
Message-ID: <8e210baf0609260532s3e3339c7o7eb28a60e9e17ef6@mail.gmail.com>

ok i found,

import java.io.*;
import org.antlr.runtime.*;
import org.antlr.tool.*;

public class Main {

    public static void main(String[] args) throws Exception {

            BufferedReader in = new BufferedReader(new InputStreamReader(
System.in));

            while (true) {
                System.out.print(">>> ");
                CharStream           input  = new ANTLRStringStream(
in.readLine());
                SomeLexer            lexer  = new SomeLexer(input);
                CommonTokenStream    tokens = new CommonTokenStream(lexer);
                SomeParser           parser = new SomeParser(tokens);
                parser.start();
        }
    }
}

26.09.2006 tarihinde F?rat K???K <pismikrop at gmail.com> yazm??:
>
> Hi,
>
> i created a simple interpreter.
>
> CharStream        input  = new ANTLRInputStream(new DataInputStream(
> System.in));
> SomeLexer         lexer  = new JavyLexer(input);
> CommonTokenStream tokens = new CommonTokenStream(lexer);
> SomeParser            parser = new JavyParser(tokens);
> parser.start();
> But interpreter evaluates commands only one time. I want to create a
> continuous shell.
> What should i do?
>
> --
> ??r. G?r. F?rat K???K
> ADAMYO Distance Learning
> SAKARYA University / TURKEY




-- 
??r. G?r. F?rat K???K
ADAMYO Distance Learning
SAKARYA University / TURKEY
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060926/f48b9672/attachment-0001.html 

From ning883 at gmail.com  Tue Sep 26 07:05:46 2006
From: ning883 at gmail.com (Ning Ji)
Date: Tue, 26 Sep 2006 10:05:46 -0400
Subject: [antlr-interest] how to distinguish a keyword (e.g. "stale") from
	other string literal
Message-ID: <e8a10f300609260705j2eceae39pcaaa999f6db078ad@mail.gmail.com>

hi my old code has this line

IDNET: ('a'..'z')*

now i want to add a keyword "stale",
STALE: "stale"

so my expected code is

switch (LA(1))  {
    case STALE:
    {
        keyword = ....;
        break;
    }
    case IDENT:
    {
        do sth. else
        break;
    }
    ....
}

-------------------------------------------------------------
now STALE conflicts with IDENT, antlr issues a warning as STALE is a special
case of IDENT,
how should i rewrite this ?

Thanks very much !
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060926/f8065a93/attachment.html 

From zhixueyong at hotmail.com  Tue Sep 26 08:51:58 2006
From: zhixueyong at hotmail.com (Xue Yong Zhi)
Date: Tue, 26 Sep 2006 11:51:58 -0400
Subject: [antlr-interest] how to distinguish a keyword (e.g. "stale")
 from other string literal
In-Reply-To: <e8a10f300609260705j2eceae39pcaaa999f6db078ad@mail.gmail.com>
References: <e8a10f300609260705j2eceae39pcaaa999f6db078ad@mail.gmail.com>
Message-ID: <45194C9E.7030406@hotmail.com>

Ning Ji wrote:
> hi my old code has this line
> 
> IDNET: ('a'..'z')*
> 
> now i want to add a keyword "stale",
> STALE: "stale"
> 

Please read the Reference Manual:

http://www.antlr.org/doc/lexer.html#Keywords_and_literals

-- 
Xue Yong Zhi
http://seclib.blogspot.com


From zhixueyong at hotmail.com  Tue Sep 26 08:53:08 2006
From: zhixueyong at hotmail.com (Xue Yong Zhi)
Date: Tue, 26 Sep 2006 11:53:08 -0400
Subject: [antlr-interest] how to distinguish a keyword (e.g. "stale")
 from other string literal
In-Reply-To: <e8a10f300609260705j2eceae39pcaaa999f6db078ad@mail.gmail.com>
References: <e8a10f300609260705j2eceae39pcaaa999f6db078ad@mail.gmail.com>
Message-ID: <efbid1$g7a$2@sea.gmane.org>

Ning Ji wrote:
> hi my old code has this line
> 
> IDNET: ('a'..'z')*
> 
> now i want to add a keyword "stale",
> STALE: "stale"
> 

Please read the Reference Manual:

http://www.antlr.org/doc/lexer.html#Keywords_and_literals

-- 
Xue Yong Zhi
http://seclib.blogspot.com


From gevik at xs4all.nl  Wed Sep 27 04:07:52 2006
From: gevik at xs4all.nl (Gevik Babakhani)
Date: Wed, 27 Sep 2006 13:07:52 +0200 (CEST)
Subject: [antlr-interest] building an interpreter
Message-ID: <6035.213.84.4.128.1159355272.squirrel@webmail.xs4all.nl>

Folks,

I would like to learn to build a pascal language interpreter with antlr. I
have the grammar files. Does anyone know any good books that can be used
to this.

I looked up amazon.com, there are lots of them around but which one can I
use?

Could anyone advice me.

Thank you.



From Michiel_Vermandel at axi.be  Wed Sep 27 05:25:32 2006
From: Michiel_Vermandel at axi.be (Michiel Vermandel)
Date: Wed, 27 Sep 2006 14:25:32 +0200
Subject: [antlr-interest] please help on simple parser antlr v3
Message-ID: <OFAE2AB645.9ECEBCB2-ONC12571F6.00432FE0-C12571F6.0044418B@Axi.be>

Hi,

I started converting my v2 grammars to v3 and ran against some warnings 
when generating code for a very simple test grammar.
Below, you find the parser, followed by the warnings.
This grammar is a part of a grammar in v2 which I am converting.

In v2 the rule QUOTED_STRING was:

QUOTED_STRING: '\'' ( WS | '\'' '\'' | ~('\'') )* '\''; 

Now in v3 I get this list of warnings (see below).
In v2 the WS was needed in the QUOTED_STRING rule in order to increment 
the line counter properly.
I think I can solve the warnings by leaving out the WS rule since in Antlr 
v3 I do not need to bother about incrementing the line counter.

So, Can please someone confirm that I am right in just leaving out the WS 
rule from the QUOTED_STRING rule?

Thanks!


---------------------------------------------------------------------


grammar TestParser;
options {k=2; backtrack=true; memoize=true;}


statement: identifier | quoted_string ;

identifier:      IDENTIFIER;
 
quoted_string: QUOTED_STRING;


fragment
AZ_CHAR: 'a' .. 'z' | '?' | '?' | '?'| '?'  | '?';

fragment
SPECIAL_CHAR: '_' | '$' | '#' ;

fragment
ANY_CHAR: AZ_CHAR | SPECIAL_CHAR;

IDENTIFIER:  ( AZ_CHAR | (N)+)  ANY_CHAR  (ANY_CHAR | N)*;
 
N:  ('0' .. '9')+;

WS      :       (' '
                |       '\t'
                |       ('\n'|'\r'('\n')?)
                )+
        { channel=99; };
 
QUOTED_STRING: '\'' ( WS | '\'' '\'' | ~('\'') )* '\''; 

-------------------------------------------------------------------------------

[14:09:37] test1.g:28:15: Decision can match input such as "'\n'" using 
multiple alternatives: 1, 2
As a result, alternative(s) 2 were disabled for that input
[14:09:37] test1.g:32:48: Decision can match input such as "' '" using 
multiple alternatives: 1, 3
As a result, alternative(s) 3 were disabled for that input
[14:09:37] test1.g:32:48: Decision can match input such as "'\t'" using 
multiple alternatives: 1, 3
As a result, alternative(s) 3 were disabled for that input
[14:09:37] test1.g:32:48: Decision can match input such as "'\r'" using 
multiple alternatives: 1, 3
As a result, alternative(s) 3 were disabled for that input
[14:09:37] test1.g:32:48: Decision can match input such as "'\n'" using 
multiple alternatives: 1, 3
As a result, alternative(s) 3 were disabled for that input
[14:09:37] C:\Documents and Settings\mvrm\My 
Documents\Antlr\grammars\test1.g:28:15: Decision can match input such as 
"'\n'" using multiple alternatives: 1, 2
As a result, alternative(s) 2 were disabled for that input
[14:09:37] C:\Documents and Settings\mvrm\My 
Documents\Antlr\grammars\test1.g:32:48: Decision can match input such as 
"' '" using multiple alternatives: 1, 3
As a result, alternative(s) 3 were disabled for that input
[14:09:37] C:\Documents and Settings\mvrm\My 
Documents\Antlr\grammars\test1.g:32:48: Decision can match input such as 
"'\t'" using multiple alternatives: 1, 3
As a result, alternative(s) 3 were disabled for that input
[14:09:37] C:\Documents and Settings\mvrm\My 
Documents\Antlr\grammars\test1.g:32:48: Decision can match input such as 
"'\r'" using multiple alternatives: 1, 3
As a result, alternative(s) 3 were disabled for that input
[14:09:37] C:\Documents and Settings\mvrm\My 
Documents\Antlr\grammars\test1.g:32:48: Decision can match input such as 
"'\n'" using multiple alternatives: 1, 3
As a result, alternative(s) 3 were disabled for that input 
 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060927/9d5e39f7/attachment.html 

From Michiel_Vermandel at axi.be  Wed Sep 27 05:30:24 2006
From: Michiel_Vermandel at axi.be (Michiel Vermandel)
Date: Wed, 27 Sep 2006 14:30:24 +0200
Subject: [antlr-interest] please help on simple parser antlr v3
In-Reply-To: <OFAE2AB645.9ECEBCB2-ONC12571F6.00432FE0-C12571F6.0044418B@Axi.be>
Message-ID: <OF411EA030.544D76BC-ONC12571F6.0044771E-C12571F6.0044B391@Axi.be>

Sorry,

It would have been better to test the grammar first without the WS rule in 
the QOUTES_STRING rule since I still get warnings (less though) and now I 
can't
figure out how to solve this.
Can someone please tell me how to prevent the multiple alternatives 
warnings?

------------------------new grammar---------------------------

grammar TestParser;
options {k=2; backtrack=true; memoize=true;}


statement: identifier | quoted_string ;

identifier:      IDENTIFIER;
 
quoted_string: QUOTED_STRING;


fragment
AZ_CHAR: 'a' .. 'z' | '?' | '?' | '?'| '?'  | '?';

fragment
SPECIAL_CHAR: '_' | '$' | '#' ;

fragment
ANY_CHAR: AZ_CHAR | SPECIAL_CHAR;

IDENTIFIER:  ( AZ_CHAR | (N)+)  ANY_CHAR  (ANY_CHAR | N)*;
 
N:  ('0' .. '9')+;

WS      :       (' '
                |       '\t'
                |       ('\n'|'\r'('\n')?)
                )+
        { channel=99; };
 
QUOTED_STRING: '\'' (  ~('\'') | '\'' '\'' )* '\'';

--------------------remaining warnings---------------------------------

[14:26:53] test1.g:28:15: Decision can match input such as "'\n'" using 
multiple alternatives: 1, 2
As a result, alternative(s) 2 were disabled for that input
[14:26:53] C:\Documents and Settings\mvrm\My 
Documents\Antlr\grammars\test1.g:28:15: Decision can match input such as 
"'\n'" using multiple alternatives: 1, 2
As a result, alternative(s) 2 were disabled for that input








Hi, 

I started converting my v2 grammars to v3 and ran against some warnings 
when generating code for a very simple test grammar. 
Below, you find the parser, followed by the warnings. 
This grammar is a part of a grammar in v2 which I am converting. 

In v2 the rule QUOTED_STRING was: 

QUOTED_STRING: '\'' ( WS | '\'' '\'' | ~('\'') )* '\'';         

Now in v3 I get this list of warnings (see below). 
In v2 the WS was needed in the QUOTED_STRING rule in order to increment 
the line counter properly. 
I think I can solve the warnings by leaving out the WS rule since in Antlr 
v3 I do not need to bother about incrementing the line counter. 

So, Can please someone confirm that I am right in just leaving out the WS 
rule from the QUOTED_STRING rule? 

Thanks! 


--------------------------------------------------------------------- 


grammar TestParser; 
options {k=2; backtrack=true; memoize=true;} 


statement: identifier | quoted_string ; 

identifier:         IDENTIFIER; 
 
quoted_string: QUOTED_STRING; 


fragment 
AZ_CHAR: 'a' .. 'z' | '?' | '?' | '?'| '?'  | '?'; 

fragment 
SPECIAL_CHAR: '_' | '$' | '#' ; 

fragment 
ANY_CHAR: AZ_CHAR | SPECIAL_CHAR; 

IDENTIFIER:  ( AZ_CHAR | (N)+)  ANY_CHAR  (ANY_CHAR | N)*; 
 
N:  ('0' .. '9')+; 

WS        :        (' ' 
                |        '\t' 
                |        ('\n'|'\r'('\n')?) 
                )+ 
        { channel=99; }; 
 
QUOTED_STRING: '\'' ( WS | '\'' '\'' | ~('\'') )* '\'';         

------------------------------------------------------------------------------- 


[14:09:37] test1.g:28:15: Decision can match input such as "'\n'" using 
multiple alternatives: 1, 2 
As a result, alternative(s) 2 were disabled for that input 
[14:09:37] test1.g:32:48: Decision can match input such as "' '" using 
multiple alternatives: 1, 3 
As a result, alternative(s) 3 were disabled for that input 
[14:09:37] test1.g:32:48: Decision can match input such as "'\t'" using 
multiple alternatives: 1, 3 
As a result, alternative(s) 3 were disabled for that input 
[14:09:37] test1.g:32:48: Decision can match input such as "'\r'" using 
multiple alternatives: 1, 3 
As a result, alternative(s) 3 were disabled for that input 
[14:09:37] test1.g:32:48: Decision can match input such as "'\n'" using 
multiple alternatives: 1, 3 
As a result, alternative(s) 3 were disabled for that input 
[14:09:37] C:\Documents and Settings\mvrm\My 
Documents\Antlr\grammars\test1.g:28:15: Decision can match input such as 
"'\n'" using multiple alternatives: 1, 2 
As a result, alternative(s) 2 were disabled for that input 
[14:09:37] C:\Documents and Settings\mvrm\My 
Documents\Antlr\grammars\test1.g:32:48: Decision can match input such as 
"' '" using multiple alternatives: 1, 3 
As a result, alternative(s) 3 were disabled for that input 
[14:09:37] C:\Documents and Settings\mvrm\My 
Documents\Antlr\grammars\test1.g:32:48: Decision can match input such as 
"'\t'" using multiple alternatives: 1, 3 
As a result, alternative(s) 3 were disabled for that input 
[14:09:37] C:\Documents and Settings\mvrm\My 
Documents\Antlr\grammars\test1.g:32:48: Decision can match input such as 
"'\r'" using multiple alternatives: 1, 3 
As a result, alternative(s) 3 were disabled for that input 
[14:09:37] C:\Documents and Settings\mvrm\My 
Documents\Antlr\grammars\test1.g:32:48: Decision can match input such as 
"'\n'" using multiple alternatives: 1, 3 
As a result, alternative(s) 3 were disabled for that input         
 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060927/1336edeb/attachment-0001.html 

From tbrandonau at gmail.com  Wed Sep 27 05:39:34 2006
From: tbrandonau at gmail.com (Thomas Brandon)
Date: Wed, 27 Sep 2006 22:39:34 +1000
Subject: [antlr-interest] please help on simple parser antlr v3
In-Reply-To: <OF411EA030.544D76BC-ONC12571F6.0044771E-C12571F6.0044B391@Axi.be>
References: <OFAE2AB645.9ECEBCB2-ONC12571F6.00432FE0-C12571F6.0044418B@Axi.be>
	<OF411EA030.544D76BC-ONC12571F6.0044771E-C12571F6.0044B391@Axi.be>
Message-ID: <ebc876d70609270539h4bdf00a4of709b3055458cf89@mail.gmail.com>

I don't think Antlr v3 yet allows you to suppress warnings so these are
unavoidable. You want to check that Antlr is behaving correctly and ignoring
the correct alternatives. As you have no actions it does not matter which
alternative Antlr takes, and it is correctly handling your grammar so you
can ignore the warnings.
I don't think there is any way to refactor out the remaining ambiguity.
Removing the WS rule was correct. It is not needed as it is duplicated by
the ~('\'') alternative, but the ambiguity between '\n' and '\r'('\n')? is
unavoidable, though ideally you would supress the warning.

Tom.
On 9/27/06, Michiel Vermandel <Michiel_Vermandel at axi.be> wrote:
>
>
> Sorry,
>
> It would have been better to test the grammar first without the WS rule in
> the QOUTES_STRING rule since I still get warnings (less though) and now I
> can't
> figure out how to solve this.
> Can someone please tell me how to prevent the *multiple alternatives *
> warnings?
>
> ------------------------new grammar---------------------------
>
> grammar TestParser;
> options {k=2; backtrack=true; memoize=true;}
>
>
> statement: identifier | quoted_string ;
>
> identifier:         IDENTIFIER;
>
> quoted_string: QUOTED_STRING;
>
>
> fragment
> AZ_CHAR: 'a' .. 'z' | '?' | '?' | '?'| '?'  | '?';
>
> fragment
> SPECIAL_CHAR: '_' | '$' | '#' ;
>
> fragment
> ANY_CHAR: AZ_CHAR | SPECIAL_CHAR;
>
> IDENTIFIER:  ( AZ_CHAR | (N)+)  ANY_CHAR  (ANY_CHAR | N)*;
>
> N:  ('0' .. '9')+;
>
> WS        :        (' '
>                 |        '\t'
>                 |        ('\n'|'\r'('\n')?)
>                 )+
>         { channel=99; };
>
> QUOTED_STRING: '\'' (  ~('\'') | '\'' '\'' )* '\'';
>
> --------------------remaining warnings---------------------------------
>
> [14:26:53] test1.g:28:15: Decision can match input such as "'\n'" using
> multiple alternatives: 1, 2
> As a result, alternative(s) 2 were disabled for that input
> [14:26:53] C:\Documents and Settings\mvrm\My
> Documents\Antlr\grammars\test1.g:28:15: Decision can match input such as
> "'\n'" using multiple alternatives: 1, 2
> As a result, alternative(s) 2 were disabled for that input
>
>
>
>
>
>
>
>
> Hi,
>
> I started converting my v2 grammars to v3 and ran against some warnings
> when generating code for a very simple test grammar.
> Below, you find the parser, followed by the warnings.
> This grammar is a part of a grammar in v2 which I am converting.
>
> In v2 the rule QUOTED_STRING was:
>
> QUOTED_STRING: '\'' ( WS | '\'' '\'' | ~('\'') )* '\'';
>
> Now in v3 I get this list of warnings (see below).
> In v2 the WS was needed in the QUOTED_STRING rule in order to increment
> the line counter properly.
> I think I can solve the warnings by leaving out the WS rule since in Antlr
> v3 I do not need to bother about incrementing the line counter.
>
> So, Can please someone confirm that I am right in just leaving out the WS
> rule from the QUOTED_STRING rule?
>
> Thanks!
>
>
> ---------------------------------------------------------------------
>
>
> grammar TestParser;
> options {k=2; backtrack=true; memoize=true;}
>
>
> statement: identifier | quoted_string ;
>
> identifier:         IDENTIFIER;
>
> quoted_string: QUOTED_STRING;
>
>
> fragment
> AZ_CHAR: 'a' .. 'z' | '?' | '?' | '?'| '?'  | '?';
>
> fragment
> SPECIAL_CHAR: '_' | '$' | '#' ;
>
> fragment
> ANY_CHAR: AZ_CHAR | SPECIAL_CHAR;
>
> IDENTIFIER:  ( AZ_CHAR | (N)+)  ANY_CHAR  (ANY_CHAR | N)*;
>
> N:  ('0' .. '9')+;
>
> WS        :        (' '
>                |        '\t'
>                |        ('\n'|'\r'('\n')?)
>                )+
>        { channel=99; };
>
> QUOTED_STRING: '\'' ( WS | '\'' '\'' | ~('\'') )* '\'';
>
>
> -------------------------------------------------------------------------------
>
> [14:09:37] test1.g:28:15: Decision can match input such as "'\n'" using
> multiple alternatives: 1, 2
> As a result, alternative(s) 2 were disabled for that input
> [14:09:37] test1.g:32:48: Decision can match input such as "' '" using
> multiple alternatives: 1, 3
> As a result, alternative(s) 3 were disabled for that input
> [14:09:37] test1.g:32:48: Decision can match input such as "'\t'" using
> multiple alternatives: 1, 3
> As a result, alternative(s) 3 were disabled for that input
> [14:09:37] test1.g:32:48: Decision can match input such as "'\r'" using
> multiple alternatives: 1, 3
> As a result, alternative(s) 3 were disabled for that input
> [14:09:37] test1.g:32:48: Decision can match input such as "'\n'" using
> multiple alternatives: 1, 3
> As a result, alternative(s) 3 were disabled for that input
> [14:09:37] C:\Documents and Settings\mvrm\My
> Documents\Antlr\grammars\test1.g:28:15: Decision can match input such as
> "'\n'" using multiple alternatives: 1, 2
> As a result, alternative(s) 2 were disabled for that input
> [14:09:37] C:\Documents and Settings\mvrm\My
> Documents\Antlr\grammars\test1.g:32:48: Decision can match input such as "'
> '" using multiple alternatives: 1, 3
> As a result, alternative(s) 3 were disabled for that input
> [14:09:37] C:\Documents and Settings\mvrm\My
> Documents\Antlr\grammars\test1.g:32:48: Decision can match input such as
> "'\t'" using multiple alternatives: 1, 3
> As a result, alternative(s) 3 were disabled for that input
> [14:09:37] C:\Documents and Settings\mvrm\My
> Documents\Antlr\grammars\test1.g:32:48: Decision can match input such as
> "'\r'" using multiple alternatives: 1, 3
> As a result, alternative(s) 3 were disabled for that input
> [14:09:37] C:\Documents and Settings\mvrm\My
> Documents\Antlr\grammars\test1.g:32:48: Decision can match input such as
> "'\n'" using multiple alternatives: 1, 3
> As a result, alternative(s) 3 were disabled for that input
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060927/69599c9a/attachment.html 

From Michiel_Vermandel at axi.be  Wed Sep 27 05:52:08 2006
From: Michiel_Vermandel at axi.be (Michiel Vermandel)
Date: Wed, 27 Sep 2006 14:52:08 +0200
Subject: [antlr-interest] please help on simple parser antlr v3
In-Reply-To: <ebc876d70609270539h4bdf00a4of709b3055458cf89@mail.gmail.com>
Message-ID: <OF4B904AC1.844D125A-ONC12571F6.00462B4C-C12571F6.0046B131@Axi.be>

Hi Tom,

Thanks for your explanation.
I made some extra lexer rules and I succeeded in eliminating the warnings.
Though I'm not sure my grammar is still correct and I don't understand why 
this solution does not generate the warnings.

Do you have any idea?

Thanks!

-------------------------grammar with no warnings-----------------------

grammar TestParser;
options {k=2; backtrack=true; memoize=true;}


statement: identifier | quoted_string ;

identifier:      IDENTIFIER;
 
quoted_string: QUOTED_STRING;


fragment
AZ_CHAR: 'a' .. 'z' | '?' | '?' | '?'| '?'  | '?';

fragment
SPECIAL_CHAR: '_' | '$' | '#' ;

fragment
ANY_CHAR: AZ_CHAR | SPECIAL_CHAR;

IDENTIFIER:  ( AZ_CHAR | (N)+)  ANY_CHAR  (ANY_CHAR | N)*;
 
N:  ('0' .. '9')+;

LF      :       '\n' { channel=99; };

CRLF    :       '\r' ('\n')? { channel=99; };

TAB     :       '\t' { channel=99; };

WS      :       (' '
                | TAB
                | CRLF
                | LF
                )+
        { channel=99; };
 
QUOTED_STRING: '\'' (  ~('\'') | '\'' '\'' )* '\'';

DOUBLE_QUOTED_STRING: '"' ( '""' | ~('"') )* '"'; 









I don't think Antlr v3 yet allows you to suppress warnings so these are 
unavoidable. You want to check that Antlr is behaving correctly and 
ignoring the correct alternatives. As you have no actions it does not 
matter which alternative Antlr takes, and it is correctly handling your 
grammar so you can ignore the warnings. 
I don't think there is any way to refactor out the remaining ambiguity. 
Removing the WS rule was correct. It is not needed as it is duplicated by 
the ~('\'') alternative, but the ambiguity between '\n' and '\r'('\n')? is 
unavoidable, though ideally you would supress the warning.

Tom.
On 9/27/06, Michiel Vermandel <Michiel_Vermandel at axi.be> wrote:

Sorry, 

It would have been better to test the grammar first without the WS rule in 
the QOUTES_STRING rule since I still get warnings (less though) and now I 
can't 
figure out how to solve this. 
Can someone please tell me how to prevent the multiple alternatives 
warnings? 

------------------------new grammar--------------------------- 

grammar TestParser; 
options {k=2; backtrack=true; memoize=true;} 


statement: identifier | quoted_string ; 

identifier:         IDENTIFIER; 
 
quoted_string: QUOTED_STRING; 


fragment 
AZ_CHAR: 'a' .. 'z' | '?' | '?' | '?'| '?'  | '?'; 

fragment 
SPECIAL_CHAR: '_' | '$' | '#' ; 

fragment 
ANY_CHAR: AZ_CHAR | SPECIAL_CHAR; 

IDENTIFIER:  ( AZ_CHAR | (N)+)  ANY_CHAR  (ANY_CHAR | N)*; 
 
N:  ('0' .. '9')+; 

WS        :        (' ' 
                |        '\t' 
                |        ('\n'|'\r'('\n')?) 
                )+ 
        { channel=99; }; 
 
QUOTED_STRING: '\'' (  ~('\'') | '\'' '\'' )* '\''; 

--------------------remaining warnings--------------------------------- 

[14:26:53] test1.g:28:15: Decision can match input such as "'\n'" using 
multiple alternatives: 1, 2 
As a result, alternative(s) 2 were disabled for that input 
[14:26:53] C:\Documents and Settings\mvrm\My 
Documents\Antlr\grammars\test1.g:28:15: Decision can match input such as 
"'\n'" using multiple alternatives: 1, 2 

As a result, alternative(s) 2 were disabled for that input 








Hi, 

I started converting my v2 grammars to v3 and ran against some warnings 
when generating code for a very simple test grammar. 
Below, you find the parser, followed by the warnings. 
This grammar is a part of a grammar in v2 which I am converting. 

In v2 the rule QUOTED_STRING was: 

QUOTED_STRING: '\'' ( WS | '\'' '\'' | ~('\'') )* '\'';         

Now in v3 I get this list of warnings (see below). 
In v2 the WS was needed in the QUOTED_STRING rule in order to increment 
the line counter properly. 
I think I can solve the warnings by leaving out the WS rule since in Antlr 
v3 I do not need to bother about incrementing the line counter. 

So, Can please someone confirm that I am right in just leaving out the WS 
rule from the QUOTED_STRING rule? 

Thanks! 


--------------------------------------------------------------------- 


grammar TestParser; 
options {k=2; backtrack=true; memoize=true;} 


statement: identifier | quoted_string ; 

identifier:         IDENTIFIER; 
 
quoted_string: QUOTED_STRING; 


fragment 
AZ_CHAR: 'a' .. 'z' | '?' | '?' | '?'| '?'  | '?'; 

fragment 
SPECIAL_CHAR: '_' | '$' | '#' ; 

fragment 
ANY_CHAR: AZ_CHAR | SPECIAL_CHAR; 

IDENTIFIER:  ( AZ_CHAR | (N)+)  ANY_CHAR  (ANY_CHAR | N)*; 
 
N:  ('0' .. '9')+; 

WS        :        (' ' 
               |        '\t' 
               |        ('\n'|'\r'('\n')?) 
               )+ 
       { channel=99; }; 
 
QUOTED_STRING: '\'' ( WS | '\'' '\'' | ~('\'') )* '\'';         

------------------------------------------------------------------------------- 


[14:09:37] test1.g:28:15: Decision can match input such as "'\n'" using 
multiple alternatives: 1, 2 
As a result, alternative(s) 2 were disabled for that input 
[14:09:37] test1.g:32:48: Decision can match input such as "' '" using 
multiple alternatives: 1, 3 
As a result, alternative(s) 3 were disabled for that input 
[14:09:37] test1.g:32:48: Decision can match input such as "'\t'" using 
multiple alternatives: 1, 3 
As a result, alternative(s) 3 were disabled for that input 
[14:09:37] test1.g:32:48: Decision can match input such as "'\r'" using 
multiple alternatives: 1, 3 
As a result, alternative(s) 3 were disabled for that input 
[14:09:37] test1.g:32:48: Decision can match input such as "'\n'" using 
multiple alternatives: 1, 3 
As a result, alternative(s) 3 were disabled for that input 
[14:09:37] C:\Documents and Settings\mvrm\My 
Documents\Antlr\grammars\test1.g:28:15: Decision can match input such as 
"'\n'" using multiple alternatives: 1, 2 
As a result, alternative(s) 2 were disabled for that input 
[14:09:37] C:\Documents and Settings\mvrm\My 
Documents\Antlr\grammars\test1.g:32:48: Decision can match input such as 
"' '" using multiple alternatives: 1, 3 
As a result, alternative(s) 3 were disabled for that input 
[14:09:37] C:\Documents and Settings\mvrm\My 
Documents\Antlr\grammars\test1.g:32:48: Decision can match input such as 
"'\t'" using multiple alternatives: 1, 3 
As a result, alternative(s) 3 were disabled for that input 
[14:09:37] C:\Documents and Settings\mvrm\My 
Documents\Antlr\grammars\test1.g:32:48: Decision can match input such as 
"'\r'" using multiple alternatives: 1, 3 
As a result, alternative(s) 3 were disabled for that input 
[14:09:37] C:\Documents and Settings\mvrm\My 
Documents\Antlr\grammars\test1.g:32:48: Decision can match input such as 
"'\n'" using multiple alternatives: 1, 3 
As a result, alternative(s) 3 were disabled for that input         
    

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060927/c02a80b9/attachment-0001.html 

From tbrandonau at gmail.com  Wed Sep 27 06:18:57 2006
From: tbrandonau at gmail.com (Thomas Brandon)
Date: Wed, 27 Sep 2006 23:18:57 +1000
Subject: [antlr-interest] please help on simple parser antlr v3
In-Reply-To: <OF4B904AC1.844D125A-ONC12571F6.00462B4C-C12571F6.0046B131@Axi.be>
References: <ebc876d70609270539h4bdf00a4of709b3055458cf89@mail.gmail.com>
	<OF4B904AC1.844D125A-ONC12571F6.00462B4C-C12571F6.0046B131@Axi.be>
Message-ID: <ebc876d70609270618qf381d11ofa001b0a771efde3@mail.gmail.com>

I'm not sure quite sure why that is not giving any warnings, it looks
like it should give a few to me. As far as I can see, there should
still be an ambiguity in the closure in WS between alt 2 (CRLF) and
exit (leading to alt 3). Additionally it looks like there should be
ambiguities between WS and LF\CRLF\TAB, as LR, CRLF and TAB are not
declared as fragment.

Is this a bug, at least in error reporting? Or at least an
undocumented feature, it looks like it should still work and it avoids
the warnings so in this case it's rather useful.

Tom.
On 9/27/06, Michiel Vermandel <Michiel_Vermandel at axi.be> wrote:
>
> Hi Tom,
>
> Thanks for your explanation.
> I made some extra lexer rules and I succeeded in eliminating the warnings.
> Though I'm not sure my grammar is still correct and I don't understand why this solution does not generate the warnings.
>
> Do you have any idea?
>
> Thanks!
>
> -------------------------grammar with no warnings-----------------------
>
> grammar TestParser;
> options {k=2; backtrack=true; memoize=true;}
>
>
> statement: identifier | quoted_string ;
>
> identifier:         IDENTIFIER;
>
> quoted_string: QUOTED_STRING;
>
>
> fragment
> AZ_CHAR: 'a' .. 'z' | '?' | '?' | '?'| '?'  | '?';
>
> fragment
> SPECIAL_CHAR: '_' | '$' | '#' ;
>
> fragment
> ANY_CHAR: AZ_CHAR | SPECIAL_CHAR;
>
> IDENTIFIER:  ( AZ_CHAR | (N)+)  ANY_CHAR  (ANY_CHAR | N)*;
>
> N:  ('0' .. '9')+;
>
> LF        :        '\n' { channel=99; };
>
> CRLF        :        '\r' ('\n')? { channel=99; };
>
> TAB        :        '\t' { channel=99; };
>
> WS        :        (' '
>                 | TAB
>                 | CRLF
>                 | LF
>                 )+
>         { channel=99; };
>
> QUOTED_STRING: '\'' (  ~('\'') | '\'' '\'' )* '\'';
>
> DOUBLE_QUOTED_STRING: '"' ( '""' | ~('"') )* '"';
>
>
>
>
>
>
>
>
>
>
> I don't think Antlr v3 yet allows you to suppress warnings so these are unavoidable. You want to check that Antlr is behaving correctly and ignoring the correct alternatives. As you have no actions it does not matter which alternative Antlr takes, and it is correctly handling your grammar so you can ignore the warnings.
>  I don't think there is any way to refactor out the remaining ambiguity. Removing the WS rule was correct. It is not needed as it is duplicated by the ~('\'') alternative, but the ambiguity between '\n' and '\r'('\n')? is unavoidable, though ideally you would supress the warning.
>
>  Tom.
> On 9/27/06, Michiel Vermandel <Michiel_Vermandel at axi.be> wrote:
>
>  Sorry,
>
>  It would have been better to test the grammar first without the WS rule in the QOUTES_STRING rule since I still get warnings (less though) and now I can't
>  figure out how to solve this.
>  Can someone please tell me how to prevent the multiple alternatives warnings?
>
>  ------------------------new grammar---------------------------
>
>  grammar TestParser;
>  options {k=2; backtrack=true; memoize=true;}
>
>
>  statement: identifier | quoted_string ;
>
>  identifier:         IDENTIFIER;
>
>  quoted_string: QUOTED_STRING;
>
>
>  fragment
>  AZ_CHAR: 'a' .. 'z' | '?' | '?' | '?'| '?'  | '?';
>
>  fragment
>  SPECIAL_CHAR: '_' | '$' | '#' ;
>
>  fragment
>  ANY_CHAR: AZ_CHAR | SPECIAL_CHAR;
>
>  IDENTIFIER:  ( AZ_CHAR | (N)+)  ANY_CHAR  (ANY_CHAR | N)*;
>
>  N:  ('0' .. '9')+;
>
>  WS        :        (' '
>                  |        '\t'
>                  |        ('\n'|'\r'('\n')?)
>                  )+
>          { channel=99; };
>
>  QUOTED_STRING: '\'' (  ~('\'') | '\'' '\'' )* '\'';
>
>  --------------------remaining warnings---------------------------------
>
>  [14:26:53] test1.g:28:15: Decision can match input such as "'\n'" using multiple alternatives: 1, 2
>  As a result, alternative(s) 2 were disabled for that input
>  [14:26:53] C:\Documents and Settings\mvrm\My Documents\Antlr\grammars\test1.g:28:15: Decision can match input such as "'\n'" using multiple alternatives: 1, 2
>
>  As a result, alternative(s) 2 were disabled for that input
>
>
>
>
>
>
>
>
>  Hi,
>
>  I started converting my v2 grammars to v3 and ran against some warnings when generating code for a very simple test grammar.
>  Below, you find the parser, followed by the warnings.
>  This grammar is a part of a grammar in v2 which I am converting.
>
>  In v2 the rule QUOTED_STRING was:
>
>  QUOTED_STRING: '\'' ( WS | '\'' '\'' | ~('\'') )* '\'';
>
>  Now in v3 I get this list of warnings (see below).
>  In v2 the WS was needed in the QUOTED_STRING rule in order to increment the line counter properly.
>  I think I can solve the warnings by leaving out the WS rule since in Antlr v3 I do not need to bother about incrementing the line counter.
>
>  So, Can please someone confirm that I am right in just leaving out the WS rule from the QUOTED_STRING rule?
>
>  Thanks!
>
>
>  ---------------------------------------------------------------------
>
>
>  grammar TestParser;
>  options {k=2; backtrack=true; memoize=true;}
>
>
>  statement: identifier | quoted_string ;
>
>  identifier:         IDENTIFIER;
>
>  quoted_string: QUOTED_STRING;
>
>
>  fragment
>  AZ_CHAR: 'a' .. 'z' | '?' | '?' | '?'| '?'  | '?';
>
>  fragment
>  SPECIAL_CHAR: '_' | '$' | '#' ;
>
>  fragment
>  ANY_CHAR: AZ_CHAR | SPECIAL_CHAR;
>
>  IDENTIFIER:  ( AZ_CHAR | (N)+)  ANY_CHAR  (ANY_CHAR | N)*;
>
>  N:  ('0' .. '9')+;
>
>  WS        :        (' '
>                 |        '\t'
>                 |        ('\n'|'\r'('\n')?)
>                 )+
>         { channel=99; };
>
>  QUOTED_STRING: '\'' ( WS | '\'' '\'' | ~('\'') )* '\'';
>
>  -------------------------------------------------------------------------------
>
>  [14:09:37] test1.g:28:15: Decision can match input such as "'\n'" using multiple alternatives: 1, 2
>  As a result, alternative(s) 2 were disabled for that input
>  [14:09:37] test1.g:32:48: Decision can match input such as "' '" using multiple alternatives: 1, 3
>  As a result, alternative(s) 3 were disabled for that input
>  [14:09:37] test1.g:32:48: Decision can match input such as "'\t'" using multiple alternatives: 1, 3
>  As a result, alternative(s) 3 were disabled for that input
>  [14:09:37] test1.g:32:48: Decision can match input such as "'\r'" using multiple alternatives: 1, 3
>  As a result, alternative(s) 3 were disabled for that input
>  [14:09:37] test1.g:32:48: Decision can match input such as "'\n'" using multiple alternatives: 1, 3
>  As a result, alternative(s) 3 were disabled for that input
>  [14:09:37] C:\Documents and Settings\mvrm\My Documents\Antlr\grammars\test1.g:28:15: Decision can match input such as "'\n'" using multiple alternatives: 1, 2
>  As a result, alternative(s) 2 were disabled for that input
>  [14:09:37] C:\Documents and Settings\mvrm\My Documents\Antlr\grammars\test1.g:32:48: Decision can match input such as "' '" using multiple alternatives: 1, 3
>  As a result, alternative(s) 3 were disabled for that input
>  [14:09:37] C:\Documents and Settings\mvrm\My Documents\Antlr\grammars\test1.g:32:48: Decision can match input such as "'\t'" using multiple alternatives: 1, 3
>  As a result, alternative(s) 3 were disabled for that input
>  [14:09:37] C:\Documents and Settings\mvrm\My Documents\Antlr\grammars\test1.g:32:48: Decision can match input such as "'\r'" using multiple alternatives: 1, 3
>  As a result, alternative(s) 3 were disabled for that input
>  [14:09:37] C:\Documents and Settings\mvrm\My Documents\Antlr\grammars\test1.g:32:48: Decision can match input such as "'\n'" using multiple alternatives: 1, 3
>  As a result, alternative(s) 3 were disabled for that input
>
>
>

From Michiel_Vermandel at axi.be  Wed Sep 27 06:50:04 2006
From: Michiel_Vermandel at axi.be (Michiel Vermandel)
Date: Wed, 27 Sep 2006 15:50:04 +0200
Subject: [antlr-interest] please help on lexer rules antlr v3
In-Reply-To: <OF4B904AC1.844D125A-ONC12571F6.00462B4C-C12571F6.0046B131@Axi.be>
Message-ID: <OFDD05230D.4E4DD17D-ONC12571F6.004B85A6-C12571F6.004BFEC4@Axi.be>

Hi,

I have the following two rules in my lexer.

DIRECTIVE: '--' (TAB | SPACE)* ('axi.locate' | 'axi.reject');

// Single-line comments
SL_COMMENT:  '--' (~('\n'|'\r'))* ('\n'|'\r'('\n')?)  { channel=99; }; 

the general idea is that

-- axi.locate
-- axi.reject

are compiler directives, 

-- followed by anything else 

is a comment.

now (obviously :-/ ) everything starting with -- is consumed by the 
SL_COMMENT rule.

What is the best way to solve this problem so that the compiler directives 
are consumed by the DIRECTIVE lexer rule and the comments by the 
SL_COMMENT lexer rule?

Thanks
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060927/19cf1be5/attachment.html 

From carleton.coffrin at gmail.com  Wed Sep 27 06:54:06 2006
From: carleton.coffrin at gmail.com (Carleton Coffrin)
Date: Wed, 27 Sep 2006 09:54:06 -0400
Subject: [antlr-interest] ANTLR Random Ouput
Message-ID: <190cfd940609270654k45d78522o2cf9c3551cc68e55@mail.gmail.com>

Does ANTLR have any features to aid in generating random parse trees with
out any textual input?  I was thinking this could aid in testing tools which
use an AST generated by ANTLR.

-Carleton
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060927/6ba63d16/attachment.html 

From dmayle at dmayle.com  Wed Sep 27 09:14:25 2006
From: dmayle at dmayle.com (Douglas Mayle)
Date: Wed, 27 Sep 2006 18:14:25 +0200
Subject: [antlr-interest] Parsing length-prefixed strings...
Message-ID: <20060927161425.GB23012@qube.mayle.org>

I was hoping someone here might be able to point me in the right
direction.  I've read most of the FAQ, and the document, and I still
haven't got an idea where to head.  In the language I'm parsing a have a
a token stream that includes integers and characters.  However, my
string literals, rather than being bounded on both sides, have an
opening character, a two digit length, and then that many characters.  I
can't figure out how to match this fixed length stream with a parser.  A
string might look like:

;05Hello

or:

;06World!

So I might have

print;05Helloprint;06World!

Now, this isn't the actual language, but the principal is the same, I
can't capture the string with the lexer, and I know I have to do it with
the parser, but I'm not sure how...

Douglas Mayle



From parrt at cs.usfca.edu  Wed Sep 27 09:46:05 2006
From: parrt at cs.usfca.edu (Terence Parr)
Date: Wed, 27 Sep 2006 09:46:05 -0700
Subject: [antlr-interest] Parsing length-prefixed strings...
In-Reply-To: <20060927161425.GB23012@qube.mayle.org>
References: <20060927161425.GB23012@qube.mayle.org>
Message-ID: <43755928-C000-42E2-9F49-728C17D1EE65@cs.usfca.edu>

Hi, PADS by Kathleen Fisher is better suited to parsing this kind of  
data:

http://portal.acm.org/citation.cfm? 
id=1065046&dl=ACM&coll=&CFID=15151515&CFTOKEN=6184618

Terence
On Sep 27, 2006, at 9:14 AM, Douglas Mayle wrote:

> I was hoping someone here might be able to point me in the right
> direction.  I've read most of the FAQ, and the document, and I still
> haven't got an idea where to head.  In the language I'm parsing a  
> have a
> a token stream that includes integers and characters.  However, my
> string literals, rather than being bounded on both sides, have an
> opening character, a two digit length, and then that many  
> characters.  I
> can't figure out how to match this fixed length stream with a  
> parser.  A
> string might look like:
>
> ;05Hello
>
> or:
>
> ;06World!
>
> So I might have
>
> print;05Helloprint;06World!
>
> Now, this isn't the actual language, but the principal is the same, I
> can't capture the string with the lexer, and I know I have to do it  
> with
> the parser, but I'm not sure how...
>
> Douglas Mayle
>
>


From parrt at cs.usfca.edu  Wed Sep 27 09:46:25 2006
From: parrt at cs.usfca.edu (Terence Parr)
Date: Wed, 27 Sep 2006 09:46:25 -0700
Subject: [antlr-interest] ANTLR Random Ouput
In-Reply-To: <190cfd940609270654k45d78522o2cf9c3551cc68e55@mail.gmail.com>
References: <190cfd940609270654k45d78522o2cf9c3551cc68e55@mail.gmail.com>
Message-ID: <4CDBF3AA-1311-44FC-96C7-637B3FBB3B02@cs.usfca.edu>

In the readme i think v3 shows how to gen random sentences.
Ter
On Sep 27, 2006, at 6:54 AM, Carleton Coffrin wrote:

> Does ANTLR have any features to aid in generating random parse  
> trees with out any textual input?  I was thinking this could aid in  
> testing tools which use an AST generated by ANTLR.
>
> -Carleton
>
>


From parrt at cs.usfca.edu  Wed Sep 27 11:49:51 2006
From: parrt at cs.usfca.edu (Terence Parr)
Date: Wed, 27 Sep 2006 11:49:51 -0700
Subject: [antlr-interest] please help on lexer rules antlr v3
In-Reply-To: <OFDD05230D.4E4DD17D-ONC12571F6.004B85A6-C12571F6.004BFEC4@Axi.be>
References: <OFDD05230D.4E4DD17D-ONC12571F6.004B85A6-C12571F6.004BFEC4@Axi.be>
Message-ID: <D63E50AE-334A-4DC7-A4C1-40D25E9174B8@cs.usfca.edu>


On Sep 27, 2006, at 6:50 AM, Michiel Vermandel wrote:

>
> Hi,
>
> I have the following two rules in my lexer.
>
> DIRECTIVE: '--' (TAB | SPACE)* ('axi.locate' | 'axi.reject');
>
> // Single-line comments
> SL_COMMENT:  '--' (~('\n'|'\r'))* ('\n'|'\r'('\n')?)  { channel=99; };
>
> the general idea is that
>
> -- axi.locate  
> -- axi.reject  
>
> are compiler directives,
>
> -- followed by anything else  
>
> is a comment.
>
> now (obviously :-/ ) everything starting with -- is consumed by the  
> SL_COMMENT rule.

LL(*) should handle this, but if not, then just do

SL_COMMENT : '--' DIRECTIVE | ... ;

fragment DIRECTIVE : ... (TAB | SPACE)* ('axi.locate' | 'axi.reject') ;

Ter


From parrt at cs.usfca.edu  Wed Sep 27 11:51:11 2006
From: parrt at cs.usfca.edu (Terence Parr)
Date: Wed, 27 Sep 2006 11:51:11 -0700
Subject: [antlr-interest] please help on simple parser antlr v3
In-Reply-To: <OF4B904AC1.844D125A-ONC12571F6.00462B4C-C12571F6.0046B131@Axi.be>
References: <OF4B904AC1.844D125A-ONC12571F6.00462B4C-C12571F6.0046B131@Axi.be>
Message-ID: <D62D4EA4-7A6F-4239-96F6-9BE681EE0169@cs.usfca.edu>


On Sep 27, 2006, at 5:52 AM, Michiel Vermandel wrote:

>
> Hi Tom,
>
> Thanks for your explanation.
> I made some extra lexer rules and I succeeded in eliminating the  
> warnings.
> Though I'm not sure my grammar is still correct and I don't  
> understand why this solution does not generate the warnings.

ANTLR (in lexer) gives priority to rules listed first and hence no  
error when there is overlap.

Ter


From Erik.Putrycz at nrc-cnrc.gc.ca  Wed Sep 27 15:20:57 2006
From: Erik.Putrycz at nrc-cnrc.gc.ca (Putrycz, Erik)
Date: Wed, 27 Sep 2006 18:20:57 -0400
Subject: [antlr-interest] Token as token and variable name
Message-ID: <E4D07AB09F5F044299333C8D0FEB45E902C80A7A@nrccenexb1.nrc.ca>

I'm having a problem writing a COBOL parser...

The record names can be anything, even reserved words (isn't that a
screwed up language?).

And I'm not sure how to solve this issue properly; my rule for records
fails when a reserved word is found...

 

This is a sample of the parser:

 

record

{           String rName = "FILLER";

            }

            : rec:INT^ {#rec.setType(RECORD);} 

            (nName:NAME { rName = #nName.getText();} |"FILLER")?

            (redefinesStatement)?

            ...

 

The record name (here NAME), can be any reserved token...

 

Erik Putrycz, Ph.D - Research Associate /
<mailto:erik.putrycz at nrc-cnrc.gc.ca> erik.putrycz at nrc-cnrc.gc.ca / (613)
990 0681

Institute for Information Technology - Software Engineering Group

National Research Council, Canada - Building M-50, 1200 Montreal Road

Ottawa, Ontario, CANADA K1A 0R6

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060927/30db372d/attachment.html 

From tbrandonau at gmail.com  Wed Sep 27 17:47:53 2006
From: tbrandonau at gmail.com (Thomas Brandon)
Date: Thu, 28 Sep 2006 10:47:53 +1000
Subject: [antlr-interest] please help on simple parser antlr v3
In-Reply-To: <D62D4EA4-7A6F-4239-96F6-9BE681EE0169@cs.usfca.edu>
References: <OF4B904AC1.844D125A-ONC12571F6.00462B4C-C12571F6.0046B131@Axi.be>
	<D62D4EA4-7A6F-4239-96F6-9BE681EE0169@cs.usfca.edu>
Message-ID: <ebc876d70609271747l15507edagc3ecc02007c8cf6c@mail.gmail.com>

Wouldn't that mean with the above lexer if you tried to use WS in your
parser to match an LF that nothing would match but you would have got
no warnings (not an issue here as they're all skipped)? Or what if you
had actions in the WS rule (other than skip)? Unless I'm
misunderstanding that seems like it could lead to rather annoying
grammar problems.

Tom.
On 9/28/06, Terence Parr <parrt at cs.usfca.edu> wrote:
>
> On Sep 27, 2006, at 5:52 AM, Michiel Vermandel wrote:
>
> >
> > Hi Tom,
> >
> > Thanks for your explanation.
> > I made some extra lexer rules and I succeeded in eliminating the
> > warnings.
> > Though I'm not sure my grammar is still correct and I don't
> > understand why this solution does not generate the warnings.
>
> ANTLR (in lexer) gives priority to rules listed first and hence no
> error when there is overlap.
>
> Ter
>
>

From sishen_freecity at 126.com  Wed Sep 27 22:12:50 2006
From: sishen_freecity at 126.com (sishen)
Date: Thu, 28 Sep 2006 13:12:50 +0800
Subject: [antlr-interest] Token as token and variable name
In-Reply-To: <E4D07AB09F5F044299333C8D0FEB45E902C80A7A@nrccenexb1.nrc.ca>
References: <E4D07AB09F5F044299333C8D0FEB45E902C80A7A@nrccenexb1.nrc.ca>
Message-ID: <451B59D2.2020102@126.com>

try to set testLiterals=false; to the token.


Putrycz, Erik wrote:
>
> I?m having a problem writing a COBOL parser?
>
> The record names can be anything, even reserved words (isn?t that a 
> screwed up language?).
>
> And I?m not sure how to solve this issue properly; my rule for records 
> fails when a reserved word is found?
>
> This is a sample of the parser:
>
> record
>
> { String rName = "FILLER";
>
> }
>
> : rec:INT^ {#rec.setType(RECORD);}
>
> (nName:NAME { rName = #nName.getText();} |"FILLER")?
>
> (redefinesStatement)?
>
> ?
>
> The record name (here NAME), can be any reserved token?
>
> **Erik Putrycz, Ph.D - Research Associate / 
> ****erik.putrycz at nrc-cnrc.gc.ca** 
> <mailto:erik.putrycz at nrc-cnrc.gc.ca>** / (613) 990 0681**
>
> Institute for Information Technology - Software Engineering Group
>
> National Research Council, Canada - Building M-50, 1200 Montreal Road
>
> Ottawa, Ontario, CANADA K1A 0R6
>



From Michiel_Vermandel at axi.be  Thu Sep 28 00:32:59 2006
From: Michiel_Vermandel at axi.be (Michiel Vermandel)
Date: Thu, 28 Sep 2006 09:32:59 +0200
Subject: [antlr-interest] please help on lexer rules antlr v3
In-Reply-To: <D63E50AE-334A-4DC7-A4C1-40D25E9174B8@cs.usfca.edu>
Message-ID: <OF8C0CD04C.1DE8EB64-ONC12571F7.0028BBA6-C12571F7.0029799D@Axi.be>

Hi Ter,

I tried your solution but unfortunatly still the wrong rule is used...

I stripped down the grammar to it's smallest in order to test (see blow).

I'm using AntlrWorks 1b3 together with the Antlr version delivered with 
AntlWorks.

My test string is:

-- axi.reject

followed by a single CRLF

Any idea why the   -- axi.reject  is still consumed as  a comment (on 
channel 99) ?

Thanks!

Michiel

---------------------------- grammar --------------------------

grammar TestParser;
options {k=2; backtrack=true; memoize=true;}

statement: (directive )+ EOF;

directive: DIRECTIVE;


LF      :       '\n' { channel=99; };

CRLF    :       '\r' ('\n')? { channel=99; };

TAB     :       '\t' { channel=99; };

SPACE   :       ' ' { channel=99; };

fragment
ANYTHING_2_EOL: (~('\n'|'\r' ))* ('\n'|'\r'('\n')?);

fragment
DIRECTIVE: (SPACE | TAB )* ('axi.locate' | 'axi.reject');

// Single-line comment
SL_COMMENT:  '--' ( DIRECTIVE | ( ANYTHING_2_EOL { channel=99;} ) );

WS      :       ( TAB | SPACE | CRLF | LF )+ { channel=99; };


--------------------------------------------------------------------------------------------------------------------








On Sep 27, 2006, at 6:50 AM, Michiel Vermandel wrote:

>
> Hi,
>
> I have the following two rules in my lexer.
>
> DIRECTIVE: '--' (TAB | SPACE)* ('axi.locate' | 'axi.reject');
>
> // Single-line comments
> SL_COMMENT:  '--' (~('\n'|'\r'))* ('\n'|'\r'('\n')?)  { channel=99; };
>
> the general idea is that
>
> -- axi.locate 
> -- axi.reject 
>
> are compiler directives,
>
> -- followed by anything else 
>
> is a comment.
>
> now (obviously :-/ ) everything starting with -- is consumed by the 
> SL_COMMENT rule.

LL(*) should handle this, but if not, then just do

SL_COMMENT : '--' DIRECTIVE | ... ;

fragment DIRECTIVE : ... (TAB | SPACE)* ('axi.locate' | 'axi.reject') ;

Ter


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060928/31ff18c4/attachment.html 

From dave at badgers-in-foil.co.uk  Thu Sep 28 03:58:11 2006
From: dave at badgers-in-foil.co.uk (David Holroyd)
Date: Thu, 28 Sep 2006 10:58:11 +0000
Subject: [antlr-interest] can't generate Parser with ecmascriptA3.g
In-Reply-To: <BAY118-F37E6C7D51C3BDA7C072DB3E2210@phx.gbl>
References: <BAY118-F37E6C7D51C3BDA7C072DB3E2210@phx.gbl>
Message-ID: <20060928105811.GA3999@badgers-in-foil.co.uk>

Can't help with your problems with the ecmascript parser, but..

On Fri, Sep 22, 2006 at 07:40:17PM +0800, Guoneng Xu wrote:
> and another question is, assume i have got the AST from the Parser,
> after altering its contents a bit, how can i output it into a .js file
> in a proper format? any JavascriptEmitter class available at this
> moment? thanks in advance!

I've done something like that for ActionScript (which is actually an
ECMAscript-like language).

My approach is to capture the entire token stream as a linked list, and
then arrange that any modifications to the AST also make the appropriate
modifications to the token stream too.

Emmiting the result is then as simple as dumping the modified token
stream.

The difficulty with this is that code modifying the AST must take great
care to make the proper changes to the token stream, including doing any
pretty printing required, etc.  I think this is worth it though, since
it allows me to preserve the formatting of the original document, which
is difficult to get from a basic pretty-printing emitter that walks the
AST (I know -- I tried that approach first).

The code is open source, if you want to see it.


ta,
dave

-- 
http://david.holroyd.me.uk/

From dmayle at dmayle.com  Thu Sep 28 06:18:44 2006
From: dmayle at dmayle.com (Douglas Mayle)
Date: Thu, 28 Sep 2006 15:18:44 +0200
Subject: [antlr-interest] Parsing length-prefixed strings...
In-Reply-To: <43755928-C000-42E2-9F49-728C17D1EE65@cs.usfca.edu>
References: <20060927161425.GB23012@qube.mayle.org>
	<43755928-C000-42E2-9F49-728C17D1EE65@cs.usfca.edu>
Message-ID: <20060928131844.GA8671@qube.mayle.org>

Thanks for the reference, for anyone else who might be interested, the
project sources can be found at http://www.padproj.org

Unfortunately, PADS is distributed under a non-commercial license, which
makes it all but unusable for me.  

In addition, I have ANTLR already in use in my program, so I wanted to
reuse the libraries that I already had in use.  For anyone else having
the same problem, I solved it with formal parameters and a predicate,
like below:

options { language="Cpp";}
class myLexer extends Lexer;

SEMICOLON: ';'
INT: ('0'..'9')+ ;
LETTER: 'A'..'Z' | 'a'..'z';

class myParser extends Parser;

string: SEMICOLON! iCount:INT letter[ atof(iCount->getText().c_str()) ];

letter[int iCount]
    : { iCount > 1}? LETTER letter[iCount-1]
    | LETTER
    ;

Douglas Mayle


On Wed, Sep 27, 2006 at 09:46:05AM -0700, Terence Parr wrote:
> Hi, PADS by Kathleen Fisher is better suited to parsing this kind of  
> data:
> 
> http://portal.acm.org/citation.cfm? 
> id=1065046&dl=ACM&coll=&CFID=15151515&CFTOKEN=6184618
> 
> Terence
> On Sep 27, 2006, at 9:14 AM, Douglas Mayle wrote:
> 
> >I was hoping someone here might be able to point me in the right
> >direction.  I've read most of the FAQ, and the document, and I still
> >haven't got an idea where to head.  In the language I'm parsing a  
> >have a
> >a token stream that includes integers and characters.  However, my
> >string literals, rather than being bounded on both sides, have an
> >opening character, a two digit length, and then that many  
> >characters.  I
> >can't figure out how to match this fixed length stream with a  
> >parser.  A
> >string might look like:
> >
> >;05Hello
> >
> >or:
> >
> >;06World!
> >
> >So I might have
> >
> >print;05Helloprint;06World!
> >
> >Now, this isn't the actual language, but the principal is the same, I
> >can't capture the string with the lexer, and I know I have to do it  
> >with
> >the parser, but I'm not sure how...
> >
> >Douglas Mayle
> >
> >
> 

From jbb at acm.org  Thu Sep 28 08:18:42 2006
From: jbb at acm.org (John B. Brodie)
Date: Thu, 28 Sep 2006 11:18:42 -0400
Subject: [antlr-interest] please help on lexer rules antlr v3
In-Reply-To: <OF8C0CD04C.1DE8EB64-ONC12571F7.0028BBA6-C12571F7.0029799D@Axi.be>
	(message from Michiel Vermandel on Thu, 28 Sep 2006 09:32:59 +0200)
References: <OF8C0CD04C.1DE8EB64-ONC12571F7.0028BBA6-C12571F7.0029799D@Axi.be>
Message-ID: <E1GSxes-0003ab-00@gecko>

Pardon me for butting in...

Your grammar is incorrect but also exposes a bug in ANTLR (IMHO). See below.

>...snipped...
>My test string is:
>
>-- axi.reject
>
>followed by a single CRLF
>
>Any idea why the   -- axi.reject  is still consumed as  a comment (on 
>channel 99) ?

this in not what i see...

>...snipped...
>---------------------------- grammar --------------------------
>
>grammar TestParser;
>options {k=2; backtrack=true; memoize=true;}
>
>statement: (directive )+ EOF;
>
>directive: DIRECTIVE;
>
>
>LF      :       '\n' { channel=99; };
>
>CRLF    :       '\r' ('\n')? { channel=99; };
>
>TAB     :       '\t' { channel=99; };
>
>SPACE   :       ' ' { channel=99; };
>
>fragment
>ANYTHING_2_EOL: (~('\n'|'\r' ))* ('\n'|'\r'('\n')?);
>
>fragment
>DIRECTIVE: (SPACE | TAB )* ('axi.locate' | 'axi.reject');
>
>// Single-line comment
>SL_COMMENT:  '--' ( DIRECTIVE | ( ANYTHING_2_EOL { channel=99;} ) );
>
>WS      :       ( TAB | SPACE | CRLF | LF )+ { channel=99; };
>
>
>---------------------------------------------------------------------------

actually, when i run your grammar, i get a parsing error indicating no match
was found for this text: -- axi.reject

in your directive rule you use the token DIRECTIVE. yet the lexer rule
DIRECTIVE is marked as a fragment (e.g. not visible to the parser).

Therefore the directive parsing rule will be never matched (because a
DIRECTIVE is never emitted by the lexer, you have told antlr that it is a
fragment of some other token).

change the directive rule to be:

directive: SL_COMMENT; /*and pick better name*/

and things work much better... ;-)



Question for Dr. Parr - shouldn't Antlr disallow parser references to lexer
fragments?



Hope this helps...
   -jbb

From rob.hill at blueyonder.co.uk  Thu Sep 28 08:58:31 2006
From: rob.hill at blueyonder.co.uk (Robert Hill)
Date: Thu, 28 Sep 2006 16:58:31 +0100
Subject: [antlr-interest] v3 & templates question
Message-ID: <20060928161515.4BDD81906E6@www.antlr.org>

I may be missing something but how do I interface templates into a V3 tree
grammar?

I've checked out the V3 Template Construction page, but it's not making much
sense - I cant see any other examples of a v3 grammar using templates that
already exist in group files.

Do I have to use the templates the old way ie, populate them with
setAttribute calls inside the tree grammars actions? , or have I missed a
vitally important blog explaining how to do it?

 

Any pointers to examples would be appreciated!

 

 

Thanks!

 

Rob

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060928/e2443125/attachment.html 

From sunjigang1965 at yahoo.com.cn  Thu Sep 28 11:15:58 2006
From: sunjigang1965 at yahoo.com.cn (=?gb2312?q?=CB=EF=BC=CD=B8=D5=20Jigang=20(Robert)=20Sun?=)
Date: Fri, 29 Sep 2006 02:15:58 +0800 (CST)
Subject: [antlr-interest] lexical set calculation
Message-ID: <20060928181558.29809.qmail@web15714.mail.cnb.yahoo.com>

I want a char set defined by v3 grammar:

MyChar: MyChar:'a'..'m'|'o'..'q'|'s'..'z';  //'a'..'z' except 'n' and 'r'

How can I describe it with an equivelant grammar like
 
MyChar:LowerCaseChar ~ SpecialChar; //'a'..'z' except 'n' and 'r'
fragment LowerCaseChar:'a'..'z';
fragment SpecialChar:'n'|'r';

Cheers.

Jigang



	

	
		
___________________________________________________________ 
Mp3???-???????
http://music.yahoo.com.cn/?source=mail_mailbox_footer

From parrt at cs.usfca.edu  Thu Sep 28 11:26:11 2006
From: parrt at cs.usfca.edu (Terence Parr)
Date: Thu, 28 Sep 2006 11:26:11 -0700
Subject: [antlr-interest] v3 & templates question
In-Reply-To: <20060928161515.4BDD81906E6@www.antlr.org>
References: <20060928161515.4BDD81906E6@www.antlr.org>
Message-ID: <CBA5BA15-BA14-437B-B112-485A0CA28361@cs.usfca.edu>


On Sep 28, 2006, at 8:58 AM, Robert Hill wrote:

> I may be missing something but how do I interface templates into a  
> V3 tree grammar?
>
> I?ve checked out the V3 Template Construction page, but it?s not  
> making much sense ? I cant see any other examples of a v3 grammar  
> using templates that already exist in group files.
>
> Do I have to use the templates the old way ie, populate them with  
> setAttribute calls inside the tree grammars actions? , or have I  
> missed a vitally important blog explaining how to do it?
>
>
>
> Any pointers to examples would be appreciated!

Hi Rob, please see:

http://www.linguamantra.org

Stuff like:

tree grammar CodeGenPhase;

options {
   output=template;
   tokenVocab = Mantra;
   ASTLabelType = MantraAST;
}

...

assignment
     :   // special case "a[i] = expr;"
         ^('=' ^(EXPR ^(INDEX a=expression i=expression))  
rhs=completeExpression)
         -> indexed_assignment(list={$a.st}, index={$i.st}, rhs= 
{$rhs.st})
     |   ^('=' lvalue completeExpression)
         -> assignment(
                 lhs={$lvalue.st},
                 rhs={$completeExpression.st})
     |   ^(assign_op lvalue completeExpression)
         -> assignment_with_op(
                 type={$assign_op.start.type.name},
                 op={$assign_op.text},
                 lhs={$lvalue.st},
                 rhs={$completeExpression.st})
     ;

THen I create with:

         CodeGenerator generator = new CodeGenerator();
         try {
             CommonTreeNodeStream nodeStream = new  
CommonTreeNodeStream(tree);
             CodeGenPhase codegen = new CodeGenPhase 
(nodeStream,                                                    tokens,
                                                     symtab,
                                                     generator);
                codegen.setTemplateLib(generator.templates);
             	codegen.compilationUnit();
         }
         catch (RecognitionException re) {
                 re.printStackTrace();
         }

Ter

From rob.hill at blueyonder.co.uk  Thu Sep 28 12:34:00 2006
From: rob.hill at blueyonder.co.uk (Robert Hill)
Date: Thu, 28 Sep 2006 20:34:00 +0100
Subject: [antlr-interest] v3 & templates question
In-Reply-To: <CBA5BA15-BA14-437B-B112-485A0CA28361@cs.usfca.edu>
Message-ID: <20060928194844.1F65E1907B0@www.antlr.org>

Ahh, there's the missing link right there...

             codegen.setTemplateLib(generator.templates);
   
I did look for some form of linking the templates to the treewalker, (im
using intelliJ) but the intellisense doesn't show that method, hence my
confusion. I saw the references to templates in the rewrite rules, but no
method to make the connection ..

Brilliant! I was hoping for something better than masses of setAttributes
this time round :)

V3 absolutely Rocks.

Cheers Ter!

Rob



-----Original Message-----
From: antlr-interest-bounces at antlr.org
[mailto:antlr-interest-bounces at antlr.org] On Behalf Of Terence Parr
Sent: 28 September 2006 19:26
To: Antlr List
Subject: Re: [antlr-interest] v3 & templates question


On Sep 28, 2006, at 8:58 AM, Robert Hill wrote:

> I may be missing something but how do I interface templates into a  
> V3 tree grammar?
>
> I've checked out the V3 Template Construction page, but it's not  
> making much sense - I cant see any other examples of a v3 grammar  
> using templates that already exist in group files.
>
> Do I have to use the templates the old way ie, populate them with  
> setAttribute calls inside the tree grammars actions? , or have I  
> missed a vitally important blog explaining how to do it?
>
>
>
> Any pointers to examples would be appreciated!

Hi Rob, please see:

http://www.linguamantra.org

Stuff like:

tree grammar CodeGenPhase;

options {
   output=template;
   tokenVocab = Mantra;
   ASTLabelType = MantraAST;
}

...

assignment
     :   // special case "a[i] = expr;"
         ^('=' ^(EXPR ^(INDEX a=expression i=expression))  
rhs=completeExpression)
         -> indexed_assignment(list={$a.st}, index={$i.st}, rhs= 
{$rhs.st})
     |   ^('=' lvalue completeExpression)
         -> assignment(
                 lhs={$lvalue.st},
                 rhs={$completeExpression.st})
     |   ^(assign_op lvalue completeExpression)
         -> assignment_with_op(
                 type={$assign_op.start.type.name},
                 op={$assign_op.text},
                 lhs={$lvalue.st},
                 rhs={$completeExpression.st})
     ;

THen I create with:

         CodeGenerator generator = new CodeGenerator();
         try {
             CommonTreeNodeStream nodeStream = new  
CommonTreeNodeStream(tree);
             CodeGenPhase codegen = new CodeGenPhase 
(nodeStream,                                                    tokens,
                                                     symtab,
                                                     generator);
                codegen.setTemplateLib(generator.templates);
             	codegen.compilationUnit();
         }
         catch (RecognitionException re) {
                 re.printStackTrace();
         }

Ter



From parrt at cs.usfca.edu  Thu Sep 28 13:37:38 2006
From: parrt at cs.usfca.edu (Terence Parr)
Date: Thu, 28 Sep 2006 13:37:38 -0700
Subject: [antlr-interest] v3 & templates question
In-Reply-To: <20060928194844.1F65E1907B0@www.antlr.org>
References: <20060928194844.1F65E1907B0@www.antlr.org>
Message-ID: <E0959E12-0EC5-426E-A8CA-E709503176D2@cs.usfca.edu>


On Sep 28, 2006, at 12:34 PM, Robert Hill wrote:

> Ahh, there's the missing link right there...
>
>              codegen.setTemplateLib(generator.templates);
>
> I did look for some form of linking the templates to the  
> treewalker, (im
> using intelliJ) but the intellisense doesn't show that method,  
> hence my
> confusion. I saw the references to templates in the rewrite rules,  
> but no
> method to make the connection ..
>
> Brilliant! I was hoping for something better than masses of  
> setAttributes
> this time round :)
>
> V3 absolutely Rocks.

Hooray!  I'm glad you like the -> template(args) notation.  I love it  
too...I plan to improve with experience.  Note you can use %template 
(args) etc... inside actions.

Ter


From dmitry.kakurin at gmail.com  Thu Sep 28 18:03:44 2006
From: dmitry.kakurin at gmail.com (Dmitry Kakurin)
Date: Thu, 28 Sep 2006 18:03:44 -0700
Subject: [antlr-interest] Case-insensitive Lexer with ANTLR 3.0
Message-ID: <a1bbc6950609281803k517be579u3077ea3fcc1da451@mail.gmail.com>

How do I create case-insensitive lexer with ANTLR 3.0.
The old option
   caseSensitive=false
does not work.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060928/c6869579/attachment.html 

From parrt at cs.usfca.edu  Thu Sep 28 18:56:34 2006
From: parrt at cs.usfca.edu (Terence Parr)
Date: Thu, 28 Sep 2006 18:56:34 -0700
Subject: [antlr-interest] Case-insensitive Lexer with ANTLR 3.0
In-Reply-To: <a1bbc6950609281803k517be579u3077ea3fcc1da451@mail.gmail.com>
References: <a1bbc6950609281803k517be579u3077ea3fcc1da451@mail.gmail.com>
Message-ID: <ED38FCFE-BF52-4771-AFBD-BD26BE935935@cs.usfca.edu>

Hi,

See the thread here:

http://www.antlr.org/pipermail/antlr-interest/2006-May/016269.html

summary: subclass and override match() and/or alter stream etc...

Ter
On Sep 28, 2006, at 6:03 PM, Dmitry Kakurin wrote:

> How do I create case-insensitive lexer with ANTLR 3.0.
> The old option
>    caseSensitive=false
> does not work.


From rhill03 at eds.com  Thu Sep 28 23:45:01 2006
From: rhill03 at eds.com (Hill, Robert)
Date: Fri, 29 Sep 2006 07:45:01 +0100
Subject: [antlr-interest] please help on lexer rules antlr v3
In-Reply-To: <E1GSxes-0003ab-00@gecko>
Message-ID: <2E909902FD3A03419E3A905908AE3DD4026DF48F@UKNSM201.emea.corp.eds.com>

On a related note to John's Q, I've had a similar problem.
When I specify in the parser options to import the lexer's tokens,
If I mis-spell one of them in the Parser there's no warnings.

Is there a need for a warning here, when you're importing tokens
shouldn't they all be imported, any in the parser that aren't recognised
issuing a warning? 
I can see the flexibility point of view, where you can define tokens in
both Lexer and parser, and I suppose that it doesn't take long to find
the bug when the parser doesn't recognise what you think it should. 

It would be handy to have it bring that to your attention I think...

Cheers!

Rob


--
Rob Hill
EDS - Hallamshire Business Park
F1E/045
Sheffield	
T:	+44 (0) 114 291 1928
M:	+44 (0) 791 732 1227
E:	rhill03 at eds.com

 
[snip]

>
>
>Question for Dr. Parr - shouldn't Antlr disallow parser 
>references to lexer fragments?
>
>
>
>Hope this helps...
>   -jbb
>

From Michiel_Vermandel at axi.be  Fri Sep 29 00:34:02 2006
From: Michiel_Vermandel at axi.be (Michiel Vermandel)
Date: Fri, 29 Sep 2006 09:34:02 +0200
Subject: [antlr-interest] please help on lexer rules antlr v3
In-Reply-To: <E1GSxes-0003ab-00@gecko>
Message-ID: <OFE3B4A012.FB580A32-ONC12571F8.002955C1-C12571F8.002991D5@Axi.be>

Hi John,

Thanks for your remarks.
I made the changes you suggested, though, still the "-- axi.reject" string 
is consumed as an SL_COMMENT...
For the moment I kept the name SL_COMMENT just to make it easier to track 
the changed.
Can you please tell why this modified grammar acts in just the same way as 
the previous?

Thanks!

------------------------------modified grammar----------------------------
grammar TestParser;
options {k=2; backtrack=true; memoize=true;}

statement: (directive )+ EOF;

directive: SL_COMMENT;


LF      :       '\n' { channel=99; };

CRLF    :       '\r' ('\n')? { channel=99; };

TAB     :       '\t' { channel=99; };

SPACE   :       ' ' { channel=99; };

fragment
ANYTHING_2_EOL: (~('\n'|'\r' ))* ('\n'|'\r'('\n')?);

//fragment
//DIRECTIVE: ('axi.locate' | 'axi.reject');

// Single-line comment
SL_COMMENT:  '--' ( 'axi.locate' | 'axi.reject' | ( ANYTHING_2_EOL { 
channel=99; }) );

WS      :       ( TAB | SPACE | CRLF | LF )+ { channel=99; };







Pardon me for butting in...

Your grammar is incorrect but also exposes a bug in ANTLR (IMHO). See 
below.

>...snipped...
>My test string is:
>
>-- axi.reject
>
>followed by a single CRLF
>
>Any idea why the   -- axi.reject  is still consumed as  a comment (on 
>channel 99) ?

this in not what i see...

>...snipped...
>---------------------------- grammar --------------------------
>
>grammar TestParser;
>options {k=2; backtrack=true; memoize=true;}
>
>statement: (directive )+ EOF;
>
>directive: DIRECTIVE;
>
>
>LF      :       '\n' { channel=99; };
>
>CRLF    :       '\r' ('\n')? { channel=99; };
>
>TAB     :       '\t' { channel=99; };
>
>SPACE   :       ' ' { channel=99; };
>
>fragment
>ANYTHING_2_EOL: (~('\n'|'\r' ))* ('\n'|'\r'('\n')?);
>
>fragment
>DIRECTIVE: (SPACE | TAB )* ('axi.locate' | 'axi.reject');
>
>// Single-line comment
>SL_COMMENT:  '--' ( DIRECTIVE | ( ANYTHING_2_EOL { channel=99;} ) );
>
>WS      :       ( TAB | SPACE | CRLF | LF )+ { channel=99; };
>
>
>---------------------------------------------------------------------------

actually, when i run your grammar, i get a parsing error indicating no 
match
was found for this text: -- axi.reject

in your directive rule you use the token DIRECTIVE. yet the lexer rule
DIRECTIVE is marked as a fragment (e.g. not visible to the parser).

Therefore the directive parsing rule will be never matched (because a
DIRECTIVE is never emitted by the lexer, you have told antlr that it is a
fragment of some other token).

change the directive rule to be:

directive: SL_COMMENT; /*and pick better name*/

and things work much better... ;-)



Question for Dr. Parr - shouldn't Antlr disallow parser references to 
lexer
fragments?



Hope this helps...
   -jbb

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060929/9dca8d3a/attachment.html 

From Abhijit_Ghonge at infosys.com  Fri Sep 29 01:31:46 2006
From: Abhijit_Ghonge at infosys.com (Abhijit Nandkumar Ghonge)
Date: Fri, 29 Sep 2006 14:01:46 +0530
Subject: [antlr-interest] how to get tokens
Message-ID: <D72A054DF5002D4FA6CF14252F7997B8D97E42@BLRKECMSG13.ad.infosys.com>




Hi people,

            Can anybody help me with this: Whenever there is an unknown
token, parser throws RecognitionException. Can I, somehow, extract this
token that has caused the exception. E.g I have a construct say:



If ( a> 10 ) then

            Print(a);

Endif;



Someone makes the following error:



Ifddd ( a> 10 ) then

            Print(a);

Endif;



Now "ifddd" is syntax error and this is an unknown token. Can I extract
this in RecognitionException catch block by some method??



Please help.



Abhijit.









**************** CAUTION - Disclaimer *****************
This e-mail contains PRIVILEGED AND CONFIDENTIAL INFORMATION intended solely for the use of the addressee(s). If you are not the intended recipient, please notify the sender by e-mail and delete the original message. Further, you are not to copy, disclose, or distribute this e-mail or its contents to any other person and any such actions are unlawful. This e-mail may contain viruses. Infosys has taken every reasonable precaution to minimize this risk, but is not liable for any damage you may sustain as a result of any virus in this e-mail. You should carry out your own virus checks before opening the e-mail or attachment. Infosys reserves the right to monitor and review the content of all messages sent to or from this e-mail address. Messages sent to or from this e-mail address may be stored on the Infosys e-mail system.
***INFOSYS******** End of Disclaimer ********INFOSYS***
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060929/3bd40b3b/attachment-0001.html 

From sishen_freecity at 126.com  Fri Sep 29 02:08:18 2006
From: sishen_freecity at 126.com (sishen)
Date: Fri, 29 Sep 2006 17:08:18 +0800
Subject: [antlr-interest] how to get tokens
In-Reply-To: <D72A054DF5002D4FA6CF14252F7997B8D97E42@BLRKECMSG13.ad.infosys.com>
References: <D72A054DF5002D4FA6CF14252F7997B8D97E42@BLRKECMSG13.ad.infosys.com>
Message-ID: <451CE282.8000507@126.com>

Abhijit Nandkumar Ghonge wrote:
>
> Hi people,
>
> Can anybody help me with this: Whenever there is an unknown token, 
> parser throws RecognitionException. Can I, somehow, extract this token 
> that has caused the exception. E.g I have a construct say:
>
> If ( a> 10 ) then
>
> Print(a);
>
> Endif;
>
> Someone makes the following error:
>
> *Ifddd* ( a> 10 ) then
>
> Print(a);
>
> Endif;
>
> Now ?ifddd? is syntax error and this is an unknown token. Can I 
> extract this in RecognitionException catch block by some method??
>
What's the output of the default?
is that something like 'unrecognition token "ddd"'
>
> Please help.
>
> Abhijit.
>
> **************** CAUTION - Disclaimer *****************
> This e-mail contains PRIVILEGED AND CONFIDENTIAL INFORMATION intended 
> solely for the use of the addressee(s). If you are not the intended 
> recipient, please notify the sender by e-mail and delete the original 
> message. Further, you are not to copy, disclose, or distribute this 
> e-mail or its contents to any other person and any such actions are 
> unlawful. This e-mail may contain viruses. Infosys has taken every 
> reasonable precaution to minimize this risk, but is not liable for any 
> damage you may sustain as a result of any virus in this e-mail. You 
> should carry out your own virus checks before opening the e-mail or 
> attachment. Infosys reserves the right to monitor and review the 
> content of all messages sent to or from this e-mail address. Messages 
> sent to or from this e-mail address may be stored on the Infosys 
> e-mail system.
> ***INFOSYS******** End of Disclaimer ********INFOSYS***
>



From Abhijit_Ghonge at infosys.com  Fri Sep 29 02:16:51 2006
From: Abhijit_Ghonge at infosys.com (Abhijit Nandkumar Ghonge)
Date: Fri, 29 Sep 2006 14:46:51 +0530
Subject: [antlr-interest] how to get tokens
Message-ID: <D72A054DF5002D4FA6CF14252F7997B8D97E43@BLRKECMSG13.ad.infosys.com>




 The output sometimes is "unexpected token 'ddd'"
But for the below error it says: "expecting LPAREN found 'ddd'"

Abhijit.

> Can anybody help me with this: Whenever there is an unknown token,
> parser throws RecognitionException. Can I, somehow, extract this token

> that has caused the exception. E.g I have a construct say:
>
> If ( a> 10 ) then
>
> Print(a);
>
> Endif;
>
> Someone makes the following error:
>
> *Ifddd* ( a> 10 ) then
>
> Print(a);
>
> Endif;
>
> Now "ifddd" is syntax error and this is an unknown token. Can I
> extract this in RecognitionException catch block by some method??
>
What's the output of the default?
is that something like 'unrecognition token "ddd"'
>
> Please help.
>
> Abhijit.

**************** CAUTION - Disclaimer *****************
This e-mail contains PRIVILEGED AND CONFIDENTIAL INFORMATION intended solely for the use of the addressee(s). If you are not the intended recipient, please notify the sender by e-mail and delete the original message. Further, you are not to copy, disclose, or distribute this e-mail or its contents to any other person and any such actions are unlawful. This e-mail may contain viruses. Infosys has taken every reasonable precaution to minimize this risk, but is not liable for any damage you may sustain as a result of any virus in this e-mail. You should carry out your own virus checks before opening the e-mail or attachment. Infosys reserves the right to monitor and review the content of all messages sent to or from this e-mail address. Messages sent to or from this e-mail address may be stored on the Infosys e-mail system.
***INFOSYS******** End of Disclaimer ********INFOSYS***

From sunjigang1965 at yahoo.com.cn  Fri Sep 29 03:06:09 2006
From: sunjigang1965 at yahoo.com.cn (=?gb2312?q?=CB=EF=BC=CD=B8=D5=20Jigang=20(Robert)=20Sun?=)
Date: Fri, 29 Sep 2006 18:06:09 +0800 (CST)
Subject: [antlr-interest] v3 generats code without complaint,
	but there is an error with the generated code
Message-ID: <20060929100609.54013.qmail@web15705.mail.cnb.yahoo.com>

I have garammar

grammar CL;
options {
    language  = CSharp;
     output = AST;
     k=3;
}
tokens
{
REAL;}

program:Comment ;
UpperCaseId: UpperCaseChar (IdChar)*;
LowerCaseId: LowerCaseChar (IdChar)*;
FunnyId: (SpecialChar)+;
fragment UpperCaseChar: 'A'..'Z';
fragment LowerCaseChar: 'a'..'z';
fragment SpecialChar: '~'|'@' | '#' | '$' | '%' | '^' | '?'|'!'|'+'|'-'|'*' | '<' | '>' | '\\' |
'|' 
				| '&'|'='| ':' | '/';'
fragment IdChar: UpperCaseChar|LowerCaseChar|Digit|'_'|'`';
INT: Sign? (
Digit+ ('.' Digit+ ('E' Sign? Digit+ )?{type=REAL;})? 
| '0x' HexDigit+
)
;

fragment HexDigit: '0'..'9'|'A'..'F'|'a'..'f';
fragment Sign: '+'|'-'|'~';
fragment Digit:'0'..'9';
ReservedChar: '(' | ')' | '{' | '}'| '[' | ']' | ';' | ',' | '.' ;

Chars: CharDel (~CharDel)+ CharDel ;
StringDenot: StringDel (~StringDel)+ StringDel;

fragment AnyChar: IdChar|ReservedChar;
fragment StringDel: '"';	
fragment CharDel: '\'';

WS      : (' '|'\t'|'\n'|'\r')+ {channel=99;};
Comment: '/' ('/' (AnyChar|' '|'\t')+ '\r\n' | '*'  (AnyChar|' '|'\t')+ ( '*/') ) ;

The garammar is passed without error message, but when I run the generated code, compiling error
took place:"Control cannot fall through from one case label ('default:') to another".

the following is the piece of code where the problemtic line is in:

       case '/':
            switch ( input.LA(2) ) 
            {
            case '/':
                int LA21_11 = input.LA(3);
                if ( (LA21_11 == '\t' || LA21_11 == ' ' || (LA21_11 >= '(' && LA21_11 <= ')') ||
LA21_11 == ',' || LA21_11 == '.' || (LA21_11 >= '0' && LA21_11 <= '9') || LA21_11 == ';' ||
(LA21_11 >= 'A' && LA21_11 <= '[') || LA21_11 == ']' || (LA21_11 >= '_' && LA21_11 <= '{') ||
LA21_11 == '}') )
                {
                    alt21 = 9;
                }
                else 
                {
                    alt21 = 3;}
                break;
            case '*':
                int LA21_12 = input.LA(3);
                if ( (LA21_12 == '\t' || LA21_12 == ' ' || (LA21_12 >= '(' && LA21_12 <= ')') ||
LA21_12 == ',' || LA21_12 == '.' || (LA21_12 >= '0' && LA21_12 <= '9') || LA21_12 == ';' ||
(LA21_12 >= 'A' && LA21_12 <= '[') || LA21_12 == ']' || (LA21_12 >= '_' && LA21_12 <= '{') ||
LA21_12 == '}') )
                {
                    alt21 = 9;
                }
                else 
                {
                    alt21 = 3;}
                break;
            	default: // problemtic line
                	alt21 = 3;}
        
            break;

If I disable rule "FunnyId: (SpecialChar)+;" everythis is fine.

You can see I have set k=3,so 

Comment: '/' ('/' (AnyChar|' '|'\t')+ '\r\n' | '*'  (AnyChar|' '|'\t')+ ( '*/') ) ;
FunnyId: (SpecialChar)+; 

could recognise a string like "/* remark */" as Comment other than FunnyId.

I ever report to list the silimar problem that successfully generated code code could not run, but
nobody responded me.

Jigang



		
___________________________________________________________ 
????????-3.5G???20M??? 
http://cn.mail.yahoo.com

From porcelli at uol.com.br  Fri Sep 29 04:34:52 2006
From: porcelli at uol.com.br (Alexandre Porcelli)
Date: Fri, 29 Sep 2006 08:34:52 -0300
Subject: [antlr-interest] Token as token and variable name
Message-ID: <ee873c070609290434j7237fe90p259d93f7df9a235a@mail.gmail.com>

How to solve the same problem (as the example: record name as a
reserved word) using v3 ?

From open.zone at virgin.net  Fri Sep 29 04:47:30 2006
From: open.zone at virgin.net (Micheal J)
Date: Fri, 29 Sep 2006 12:47:30 +0100
Subject: [antlr-interest] Still AWOL...
Message-ID: <03bd01c6e3bd$0cc41920$c704a8c0@hercules>

Hoping to catch a break in a week or so...

Cheers,

Micheal

-----------------------
The best way to contact me is via the list/forum. My time is very limited.


From jbb at acm.org  Fri Sep 29 06:33:17 2006
From: jbb at acm.org (John B. Brodie)
Date: Fri, 29 Sep 2006 09:33:17 -0400
Subject: [antlr-interest] please help on lexer rules antlr v3
In-Reply-To: <OFE3B4A012.FB580A32-ONC12571F8.002955C1-C12571F8.002991D5@Axi.be>
	(message from Michiel Vermandel on Fri, 29 Sep 2006 09:34:02 +0200)
References: <OFE3B4A012.FB580A32-ONC12571F8.002955C1-C12571F8.002991D5@Axi.be>
Message-ID: <E1GTIUP-0003se-00@gecko>

>Can you please tell why this modified grammar acts in just the same way as 
>the previous?

You forgot to allow for whitespace between the '--' and 'axi...'

Your modified grammar accepts "--axi.reject".
   -jbb

From rhill03 at eds.com  Fri Sep 29 06:39:20 2006
From: rhill03 at eds.com (Hill, Robert)
Date: Fri, 29 Sep 2006 14:39:20 +0100
Subject: [antlr-interest] V3 & tree Parsing Q:
Message-ID: <2E909902FD3A03419E3A905908AE3DD4026DF5F0@UKNSM201.emea.corp.eds.com>

I have a parser rule which creates nodes followed by data, - each child
is a TABLEMAPPING_ELEMENT

tableMapping
		: LBrace mappingElements+ RBrace ->
^(TABLEMAPPING_ELEMENT mappingElements)+
	;
Note the + at the end of the re-write rule.

As you'd expect the resulting tree has lots of TABLEMAPPING_ELEMENT
followed by its data.
But in the tree parser I have to put the + closure on the rule that
calls the mapping elements rather than just  thus..
Ie : 

declaration
	:	
	  ^(DATABASE_DECL Identifier)	{ System.out.println("Found
Database Decl"); }
	| ^(USERCLASS_DECL userClass)  	{ System.out.println("User class
Decl"); }
	| ^(TABLEMAPPING_DECL Identifier tableMapping+) 	{
System.out.println("Found Table Mapping"); }
	;

tableMapping
	: ^(TABLEMAPPING_ELEMENT mappingElements)
	;


Note that the + closure is now in the declaration rule. Im confused, Why
the difference in the placement of the + closure? Or rather why does the
Parser allow you to put the + outside the brackets on the rewrite rule
but not in the rule in the TreeWalker - it's a syntax error. ?

Cheers!




--
ROB HILL
DWP ACW
EDS Hallamshire Business Park
F1E/045
Sheffield	
T:	+44 (0) 114 291 1928
M:	+44 (0) 790 318 5516
E:	rhill03 at eds.com


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060929/1ef3dc18/attachment.html 

From Michiel_Vermandel at axi.be  Fri Sep 29 07:41:09 2006
From: Michiel_Vermandel at axi.be (Michiel Vermandel)
Date: Fri, 29 Sep 2006 16:41:09 +0200
Subject: [antlr-interest] please help on lexer rules antlr v3
In-Reply-To: <E1GTIUP-0003se-00@gecko>
Message-ID: <OF338A2FEC.01654AB4-ONC12571F8.0050497D-C12571F8.0050AC25@Axi.be>

John,

Sorry, I forgot to mention that I reduced my test string to "--axi.reject"
, so without the space.
I have done this to strip out every part that is not really crucial.
So even with the "--axi.reject"  test string the grammar I have sent in my 
previous mail results in an EarlyExitException...

I tried as wel to change the rule  to 
SL_COMMENT:  '--' ( ((TAB|SPACE)* ('axi.locate' | 'axi.reject')) | ( 
ANYTHING_2_EOL { channel=90; }) );
but the problem remains...


Please help?







"John B. Brodie" <jbb at acm.org> 
Sent by: antlr-interest-bounces at antlr.org
29/09/2006 15:33

To
Michiel_Vermandel at axi.be
cc
antlr-interest at antlr.org
Subject
Re: [antlr-interest] please help on lexer rules antlr v3






>Can you please tell why this modified grammar acts in just the same way 
as 
>the previous?

You forgot to allow for whitespace between the '--' and 'axi...'

Your modified grammar accepts "--axi.reject".
   -jbb

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060929/2ade791b/attachment.html 

From jbb at acm.org  Fri Sep 29 09:06:22 2006
From: jbb at acm.org (John B. Brodie)
Date: Fri, 29 Sep 2006 12:06:22 -0400
Subject: [antlr-interest] please help on lexer rules antlr v3
In-Reply-To: <OF338A2FEC.01654AB4-ONC12571F8.0050497D-C12571F8.0050AC25@Axi.be>
	(message from Michiel Vermandel on Fri, 29 Sep 2006 16:41:09 +0200)
References: <OF338A2FEC.01654AB4-ONC12571F8.0050497D-C12571F8.0050AC25@Axi.be>
Message-ID: <E1GTKsY-0003cR-00@gecko>

>So even with the "--axi.reject"  test string the grammar I have sent in my 
>previous mail results in an EarlyExitException...

I do not get any exceptions. So maybe there is something missing in my Main?
Here is my Main.java. I use ANTLR 3.0b4. Both your previous grammar and the
attached (simpler to me) grammar just silently process the input. Also
attached is the bash shell script I use to build/compile/run.

Is any of this different from what you are using?

//--- Main.java ----
import java.io.*;
import java.util.*;

import org.antlr.runtime.ANTLRStringStream;
import org.antlr.runtime.CommonTokenStream;
import org.antlr.runtime.Token;
import org.antlr.runtime.tree.*;

class Main {

   public static void main(String[] args) {
      try {
         TestParserLexer lexer =
            new TestParserLexer(new ANTLRStringStream("--axi.reject"));
         CommonTokenStream tokens = new CommonTokenStream(lexer);
         TestParser parser = new TestParser(tokens);
         parser.statement();
      } catch(Exception e) {
         e.printStackTrace();
      }
   }
}
//--- Main.java ----

//--- TestParser.g ----
grammar TestParser;

statement: ( directive )+ EOF;

directive: SL_COMMENT;


fragment ANYTHING_2_EOL: ( ~('\n'|'\r') )* ( '\n'|'\r'('\n')? );

// Directive or Single-line comment
// (comment is discarded, directive is kept)
SL_COMMENT
    :  '--' 
        ( ( ('\t'|' ')* ( 'axi.locate' | 'axi.reject' ) )
        | ( ANYTHING_2_EOL { channel=99; } )
        );

WS : ( '\t' | ' ' | '\r' | '\n' )+ { channel=99; };
//--- TestParser.g ----

//--- make.sh ----
#!/bin/bash

# directory containing the unpacked ANTLR v3 distribution:
V3=/usr/local/antlr-3.0b4/lib/

LIBS=${V3}/antlr-2.7.6.jar:${V3}/antlr-3.0b4.jar:${V3}/stringtemplate-2.3b9.jar
CP=${LIBS}:${CLASSPATH}

java -cp ${CP} org.antlr.Tool TestParser.g

javac -cp ${CP} *.java
java -cp ${CP} Main
//--- make.sh ----

From lo at toolslab.com  Fri Sep 29 09:52:17 2006
From: lo at toolslab.com (K. Lo Shih)
Date: Fri, 29 Sep 2006 11:52:17 -0500
Subject: [antlr-interest] Problem generating simplec.g for ObjC: "Can't find
	template length.st"
Message-ID: <7C761A13-C125-4C34-A194-2EF87845E2F2@toolslab.com>

Hello, I'm new to the list,

I'm having a problem generating an ObjC target for simplec.g where  
StringTemplateGroup throws the exception, saying that "Can't find  
template length.st; context is [outputFile parser genericParser(...)  
bitsetInit]".

     Command while in antlr-3.0b4/lib/ObjC/examples/LL-star/:
         java org.anltr.Tool simplec.g

     Class path includes:
         antlr-3.0b4/lib/antlr-2.7.6.jar
         antlr-3.0b4/lib/antlr-3.0b4.jar
         antlr-3.0b4/lib/stringtemplate-2.3b9.jar

     ANTLR version: antlr-3.0b4
     Java version: 1.5.0_06
     Platform: Mac OS X 10.4.7 (Darwin Kernel Version 8.7.0)


I have to admit, I don't have much of a clue how ANTLR works since  
this is my first try running this, but it seems that there is no  
"length.st" string template. It seems that all grammars with the  
"ObjC" target produces this same error.

Is there some part of my set up that I'm missing?

Kind regards,
Lo

-----
K. Lo Shih
lo;toolslab:com


Full output
-----
ANTLR Parser Generator   Early Access Version 3.0b4 (??, 2006)   
1989-2006
internal error: simplec.g : java.lang.IllegalArgumentException: Can't  
find template length.st; context is [outputFile parser genericParser 
(...) bitsetInit]
org.antlr.stringtemplate.StringTemplateGroup.lookupTemplate 
(StringTemplateGroup.java:485)
org.antlr.stringtemplate.StringTemplateGroup.getInstanceOf 
(StringTemplateGroup.java:372)
org.antlr.stringtemplate.StringTemplateGroup.getEmbeddedInstanceOf 
(StringTemplateGroup.java:416)
org.antlr.stringtemplate.language.ASTExpr.getTemplateInclude 
(ASTExpr.java:596)
org.antlr.stringtemplate.language.ActionEvaluator.templateInclude 
(ActionEvaluator.java:465)
org.antlr.stringtemplate.language.ActionEvaluator.expr 
(ActionEvaluator.java:137)
org.antlr.stringtemplate.language.ActionEvaluator.action 
(ActionEvaluator.java:79)
org.antlr.stringtemplate.language.ASTExpr.write(ASTExpr.java:138)
org.antlr.stringtemplate.StringTemplate.write(StringTemplate.java:789)
org.antlr.stringtemplate.language.ASTExpr.write(ASTExpr.java:660)
org.antlr.stringtemplate.language.ASTExpr.write(ASTExpr.java:677)
org.antlr.stringtemplate.language.ASTExpr.writeAttribute(ASTExpr.java: 
618)
org.antlr.stringtemplate.language.ActionEvaluator.action 
(ActionEvaluator.java:81)
org.antlr.stringtemplate.language.ASTExpr.write(ASTExpr.java:138)
org.antlr.stringtemplate.StringTemplate.write(StringTemplate.java:789)
org.antlr.stringtemplate.language.ASTExpr.write(ASTExpr.java:660)
org.antlr.stringtemplate.language.ASTExpr.writeAttribute(ASTExpr.java: 
618)
org.antlr.stringtemplate.language.ActionEvaluator.action 
(ActionEvaluator.java:81)
org.antlr.stringtemplate.language.ASTExpr.write(ASTExpr.java:138)
org.antlr.stringtemplate.StringTemplate.write(StringTemplate.java:789)
org.antlr.stringtemplate.language.ASTExpr.write(ASTExpr.java:660)
org.antlr.stringtemplate.language.ASTExpr.writeAttribute(ASTExpr.java: 
618)
org.antlr.stringtemplate.language.ActionEvaluator.action 
(ActionEvaluator.java:81)
org.antlr.stringtemplate.language.ASTExpr.write(ASTExpr.java:138)
org.antlr.stringtemplate.StringTemplate.write(StringTemplate.java:789)
org.antlr.stringtemplate.StringTemplate.toString(StringTemplate.java: 
1724)
org.antlr.codegen.CodeGenerator.write(CodeGenerator.java:1081)
org.antlr.codegen.Target.genRecognizerFile(Target.java:92)
org.antlr.codegen.CodeGenerator.genRecognizer(CodeGenerator.java:434)
org.antlr.Tool.processGrammar(Tool.java:320)
org.antlr.Tool.process(Tool.java:251)
org.antlr.Tool.main(Tool.java:70)



From kroepke at classdump.org  Fri Sep 29 10:28:02 2006
From: kroepke at classdump.org (Kay Roepke)
Date: Fri, 29 Sep 2006 19:28:02 +0200
Subject: [antlr-interest] Problem generating simplec.g for ObjC: "Can't
	find template length.st"
In-Reply-To: <7C761A13-C125-4C34-A194-2EF87845E2F2@toolslab.com>
References: <7C761A13-C125-4C34-A194-2EF87845E2F2@toolslab.com>
Message-ID: <CD24FC64-3155-4B84-B621-2B9F36495A5B@classdump.org>


On 29. Sep 2006, at 18:52 Uhr, K. Lo Shih wrote:

> I have to admit, I don't have much of a clue how ANTLR works since  
> this is my first try running this, but it seems that there is no  
> "length.st" string template. It seems that all grammars with the  
> "ObjC" target produces this same error.

Hi!

It seems that your StringTemplate version is not up-to-date. ANTLR  
needs to support the length function to generate Objective C output.
Please try to use the latest StringTemplate version and see if it's  
working with that (it should as I'm developing with the depot  
versions of both ANTLR and ST).

If you need assistance, feel free to ask! I'm always happy about  
getting feedback for the ObjC target :)

cheers,

-k




From kroepke at classdump.org  Fri Sep 29 11:09:05 2006
From: kroepke at classdump.org (Kay Roepke)
Date: Fri, 29 Sep 2006 20:09:05 +0200
Subject: [antlr-interest] Fwd: Problem generating simplec.g for ObjC: "Can't
	find template length.st"
References: <495AD200-5DEA-4E66-BC04-437C7EF4AFEC@classdump.org>
Message-ID: <BE4970D4-A8BA-4BAD-A9FA-FCABC3106E46@classdump.org>

damn. wrong list. ;)

Begin forwarded message:

> Hi!
>
> On 29. Sep 2006, at 19:28 Uhr, Kay Roepke wrote:
>
>> It seems that your StringTemplate version is not up-to-date. ANTLR
>> needs to support the length function to generate Objective C output.
>> Please try to use the latest StringTemplate version and see if it's
>> working with that (it should as I'm developing with the depot
>> versions of both ANTLR and ST).
>
> It is as I thought. ANTLR v3b4 doesn't include the correct
> stringtemplate jar. It is missing the length operator, which is
> strange, since the change got in on 7/24/06 and ANTLR v3b4 was
> released on 8/24/06, a whole month later.
> Anyway, if you use the latest ST release (3.0) it should work as
> expected.
>
> HTH,
>
> -k

-- 
Kay R?pke <kroepke at classdump.org>
classdump Software
Key fingerprint = A849 0F2C C322 4022 379E  8661 7E1B FE0D 4CD2 A6D0




From lo at toolslab.com  Fri Sep 29 11:21:14 2006
From: lo at toolslab.com (K. Lo Shih)
Date: Fri, 29 Sep 2006 13:21:14 -0500
Subject: [antlr-interest] Problem generating simplec.g for ObjC: "Can't
	find template length.st"
In-Reply-To: <CD24FC64-3155-4B84-B621-2B9F36495A5B@classdump.org>
References: <7C761A13-C125-4C34-A194-2EF87845E2F2@toolslab.com>
	<CD24FC64-3155-4B84-B621-2B9F36495A5B@classdump.org>
Message-ID: <1A93D73E-BA34-4626-8B5C-77CAC997BFFC@toolslab.com>

Thanks Kay,

I got it working with stringtemplate-3.0 (http:// 
www.stringtemplate.org/). I was stepping through ActionEvaluator to  
look for who was asking for the "length" template. Thanks for saving  
me from that.

Kind regards,
Lo.

-----
K. Lo Shih
lo;toolslab:com


On Sep 29, 2006, at 12:28, Kay Roepke wrote:

> On 29. Sep 2006, at 18:52 Uhr, K. Lo Shih wrote:
>
>> I have to admit, I don't have much of a clue how ANTLR works since  
>> this is my first try running this, but it seems that there is no  
>> "length.st" string template. It seems that all grammars with the  
>> "ObjC" target produces this same error.
>
> Hi!
>
> It seems that your StringTemplate version is not up-to-date. ANTLR  
> needs to support the length function to generate Objective C output.
> Please try to use the latest StringTemplate version and see if it's  
> working with that (it should as I'm developing with the depot  
> versions of both ANTLR and ST).
>
> If you need assistance, feel free to ask! I'm always happy about  
> getting feedback for the ObjC target :)
>
> cheers,
>
> -k
>
>
>


From lo at toolslab.com  Fri Sep 29 11:33:16 2006
From: lo at toolslab.com (K. Lo Shih)
Date: Fri, 29 Sep 2006 13:33:16 -0500
Subject: [antlr-interest] AST construction with an ObjC target,
	missing "AST.stg"
Message-ID: <F29F9C34-E077-4D49-ACD7-EBEDA0A2CB7C@toolslab.com>

Hello,

I played around a little bit the tree parser example in examples- 
v3.tar.gz targeting Java (as default). But I'm running into a  
"internal error: no such group file AST.stg" after modifying  
"examples-v3/treeparser/LangParser.g" to use "language=ObjC".

     Command while in examples-v3/treeparser/:
         java org.antlr.Tool LangParser.g LangTreeParser.g

     Class path includes:
         antlr-3.0b4/lib/antlr-2.7.6.jar
         antlr-3.0b4/lib/antlr-3.0b4.jar
         stringtemplate-3.0/lib/stringtemplate.jar

     ANTLR version: antlr-3.0b4
     Java version: 1.5.0_06
     Platform: Mac OS X 10.4.7 (Darwin Kernel Version 8.7.0)

It looks like an AST.stg is missing

     antlr-3.0b4/src/org/antlr/codegen/templates/ObjC/AST.stg

I'm not even sure what that template group does. Also, I'm not  
noticing any classes in the ANTLR.framework project (in "antlr-3.0b4/ 
lib/ObjC/ANTLR.xcodeproj") that mirrors the org.antlr.runtime.tree.*  
Java classes, though I haven't really looked in it.

Kay, I see you mention (http://www.antlr.org/wiki/display/ANTLR3/ 
ANTLR3+Objective-C+Target) that you've got it building ASTs, is that  
right?

Kind regards,
Lo

-----
K. Lo Shih
lo;toolslab:com


From kroepke at classdump.org  Fri Sep 29 11:52:03 2006
From: kroepke at classdump.org (Kay Roepke)
Date: Fri, 29 Sep 2006 20:52:03 +0200
Subject: [antlr-interest] AST construction with an ObjC target,
	missing "AST.stg"
In-Reply-To: <F29F9C34-E077-4D49-ACD7-EBEDA0A2CB7C@toolslab.com>
References: <F29F9C34-E077-4D49-ACD7-EBEDA0A2CB7C@toolslab.com>
Message-ID: <489107EC-8470-411B-B72A-A01F13B62E47@classdump.org>

Hi!

On 29. Sep 2006, at 20:33 Uhr, K. Lo Shih wrote:

> It looks like an AST.stg is missing
>
>     antlr-3.0b4/src/org/antlr/codegen/templates/ObjC/AST.stg
>
> I'm not even sure what that template group does. Also, I'm not  
> noticing any classes in the ANTLR.framework project (in  
> "antlr-3.0b4/lib/ObjC/ANTLR.xcodeproj") that mirrors the  
> org.antlr.runtime.tree.* Java classes, though I haven't really  
> looked in it.

The b4 release didn't include the tree stuff, it wasn't done at that  
point.

> Kay, I see you mention (http://www.antlr.org/wiki/display/ANTLR3/ 
> ANTLR3+Objective-C+Target) that you've got it building ASTs, is  
> that right?

Yes. The current depot version has all that. I don't know when Ter  
will cut the next release, but I could pack it up and post the link.
I'd have to include the complete ANTLR source code, though, since  
there were some changes that affect code generation. I have to try  
out the latest changes by Ter first, to make sure you can actually  
use the stuff :)

Let me add that there are a couple of rough edges to the Objective C  
runtime at this point. I've noticed a couple naming issues I want to  
resolve (mostly renaming some methods to be consistent), so be  
prepared for incompatible changes until the 3.0 release.

I'm taking a look at the state of the depot and will give you a link  
to download the most recent version.

cheers,
-k




