<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [antlr-interest] Java 1.4 and Antlr temporary files
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:antlr-interest%40antlr.org?Subject=%5Bantlr-interest%5D%20Java%201.4%20and%20Antlr%20temporary%20files&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000695.html">
   <LINK REL="Next"  HREF="000698.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[antlr-interest] Java 1.4 and Antlr temporary files</H1>
    <B>Robert Colquhoun</B> 
    <A HREF="mailto:antlr-interest%40antlr.org?Subject=%5Bantlr-interest%5D%20Java%201.4%20and%20Antlr%20temporary%20files&In-Reply-To="
       TITLE="[antlr-interest] Java 1.4 and Antlr temporary files">rjc at trump.net.au
       </A><BR>
    <I>Sat Feb 23 02:46:49 PST 2002</I>
    <P><UL>
        <LI>Previous message: <A HREF="000695.html">[antlr-interest] Trees
</A></li>
        <LI>Next message: <A HREF="000698.html">[antlr-interest] C++ is slower than Java?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#697">[ date ]</a>
              <a href="thread.html#697">[ thread ]</a>
              <a href="subject.html#697">[ subject ]</a>
              <a href="author.html#697">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

I was wondering if anyone else is getting a bunch of 'filename.antlr.tmp' 
files in their build directories?

I only noticed this since upgrading to java 1.4 on windows, it does not 
appear to be occurring on unix/java 1.3 or windows/java 1.3.  I traced this 
back to the PreservingFileWriter class in antlr which is doing some sort a 
caching i think.  It creates a temporary .antlr.tmp file which also 
supposedly has deleteOnExit() set to remove it automatically, but for some 
reason this does not happen.

Reading the doc:
<A HREF="http://java.sun.com/j2se/1.4/docs/api/java/io/File.html#deleteOnExit(">http://java.sun.com/j2se/1.4/docs/api/java/io/File.html#deleteOnExit(</A>)

...seems to indicate the file will not be deleted if the virtual machine 
has a abnormal exit - which does not seem to be the case.......a bug then 
perhaps?  The only other thing i could think of is the file is being opened 
twice the first one gets destroyed on exit, but the second then flushes as 
the virtual machine shuts down and writes out the file.

PS  Use of deleteOnExit() implies anltr now requires java 1.2+, ie it will 
*not* work on 1.1 VMs like the MS JVM

PPS For some reason lately i am noticing lots of little irritating, but 
harmless things like the above...maybe it is time for a holiday!  ;-)

  - Robert


 

Your use of Yahoo! Groups is subject to <A HREF="http://docs.yahoo.com/info/terms/">http://docs.yahoo.com/info/terms/</A> 

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000695.html">[antlr-interest] Trees
</A></li>
	<LI>Next message: <A HREF="000698.html">[antlr-interest] C++ is slower than Java?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#697">[ date ]</a>
              <a href="thread.html#697">[ thread ]</a>
              <a href="subject.html#697">[ subject ]</a>
              <a href="author.html#697">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.antlr.org/mailman/listinfo/antlr-interest">More information about the antlr-interest
mailing list</a><br>
</body></html>
