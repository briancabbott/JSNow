<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [antlr-interest] Tokenising for context specific reserved words
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20Tokenising%20for%20context%20specific%20reserved%20words&In-Reply-To=%3C48805062.3040008%40gmx.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="029204.html">
   <LINK REL="Next"  HREF="029205.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[antlr-interest] Tokenising for context specific reserved words</H1>
    <B>Johannes Luber</B> 
    <A HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20Tokenising%20for%20context%20specific%20reserved%20words&In-Reply-To=%3C48805062.3040008%40gmx.de%3E"
       TITLE="[antlr-interest] Tokenising for context specific reserved words">jaluber at gmx.de
       </A><BR>
    <I>Fri Jul 18 01:12:18 PDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="029204.html">[antlr-interest] Tokenising for context specific reserved words
</A></li>
        <LI>Next message: <A HREF="029205.html">[antlr-interest] Tokenising for context specific reserved words
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#29207">[ date ]</a>
              <a href="thread.html#29207">[ thread ]</a>
              <a href="subject.html#29207">[ subject ]</a>
              <a href="author.html#29207">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Jim Idle schrieb:
&gt;<i> On Thu, 2008-07-17 at 17:36 -0700, Loring Craymer wrote:
</I>&gt;&gt;<i> For Yggdrasil, I hide the sempred behind doubly-quoted keywords.  As 
</I>&gt;&gt;<i> to performance:  the sempred is called less often than id (as a 
</I>&gt;&gt;<i> rule--YMMV) and usually much less often.  The issue is aggregate 
</I>&gt;&gt;<i> performance, not local performance; the general principle for 
</I>&gt;&gt;<i> performance tweaking is to worry less about the cost of infrequent 
</I>&gt;&gt;<i> calls than the cost of frequent calls.  Basically, the id approach 
</I>&gt;&gt;<i> adds a method call and bitset inclusion test for every ID, while the 
</I>&gt;&gt;<i> sempred costs the three calls per keyword test.
</I>&gt;<i> 
</I>&gt;<i> OK - I see where you are going. However, most of the cases I come across 
</I>&gt;<i> mean that you would be doing those 3 calls for every keyword and I think 
</I>&gt;<i> it would be quickly unreadable.
</I>
One should create a special rule to test a certain ID as keyword, as 
this strategy removes code duplication. It may add another method call, 
but for this kind of methods most compilers should do an inlining as 
optimization.

Johannes

&gt;<i> Most languages where this happens allow 
</I>&gt;<i> almost all keywords to be used as identifiers when they are not in fact 
</I>&gt;<i> the actual keyword. The lesson then is probably to step back from the 
</I>&gt;<i> solution before implementing either one and see which makes sense for 
</I>&gt;<i> your particular situation. I can imagine that cases where a few new 
</I>&gt;<i> keywords are introduced in a new version of the language but for 
</I>&gt;<i> backward compatibility reasons they are allowed to be identifiers, may 
</I>&gt;<i> well qualify as a sempred candidate for instance.
</I>&gt;<i> 
</I>&gt;<i> There are probably better generic solutions for the whole keyword vs ID 
</I>&gt;<i> issue. Double quoting keywords seems like a reasonable way to flag 
</I>&gt;<i> something as also being available as in identifier, but then it forces 
</I>&gt;<i> the sempred route unless it is further adorned with constructs that may 
</I>&gt;<i> well then inextricably link the parser and lexer, which is 
</I>&gt;<i> probably/possibly best avoided.
</I>&gt;<i> 
</I>&gt;<i> Jim
</I>&gt;<i> 
</I>&gt;&gt;<i>
</I>
</PRE>








<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="029204.html">[antlr-interest] Tokenising for context specific reserved words
</A></li>
	<LI>Next message: <A HREF="029205.html">[antlr-interest] Tokenising for context specific reserved words
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#29207">[ date ]</a>
              <a href="thread.html#29207">[ thread ]</a>
              <a href="subject.html#29207">[ subject ]</a>
              <a href="author.html#29207">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.antlr.org/mailman/listinfo/antlr-interest">More information about the antlr-interest
mailing list</a><br>
</body></html>
