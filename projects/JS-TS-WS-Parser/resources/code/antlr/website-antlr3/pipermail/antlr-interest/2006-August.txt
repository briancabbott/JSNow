From dotnetfr at gmail.com  Tue Aug  1 01:14:36 2006
From: dotnetfr at gmail.com (dotnet fr)
Date: Tue Aug  1 01:14:43 2006
Subject: [antlr-interest] Re: output code generation in c++
Message-ID: <dcb971710608010114r294f08davb22205af57347894@mail.gmail.com>

Hi

I answer between the lines :

> I'm looking to generate output code in c++.
Do you just need ANTLR to output C++?  This is already possible in 2.7.6
(and will be available in v3).

In the antlr steps :
-create the grammar file (parse the file and generate AST)
-generate code in c++.
Now I want to use my AST to generate ouput code (for example .hpp, cpp)
Is it available in Antlr 2.7.6 ? Is it possible ?

> I've found StringTemplate but it's only available in .net and java.
> Is there an equivalent in c++ ?
There was some discussion about this just recently on the list.  I am
also interested in a C++ port of StringTemplate, and have been
investigating the possibility.  There are some tricky bits (reflection),
but I think it should be possible.  I can't guarantee a timeline, but
I'll let the list know when/if I can get something working.

It will be helpfull a lot.

I will look if there is another solution to generate output code in
c++ with Antlr AST.

Cheers

--
Tomy
From jsamort at gmail.com  Tue Aug  1 07:33:45 2006
From: jsamort at gmail.com (Scott Amort)
Date: Tue Aug  1 07:33:53 2006
Subject: [antlr-interest] Re: output code generation in c++
In-Reply-To: <dcb971710608010114r294f08davb22205af57347894@mail.gmail.com>
References: <dcb971710608010114r294f08davb22205af57347894@mail.gmail.com>
Message-ID: <44CF6649.2040403@gmail.com>

Hi,

dotnet fr wrote:
> In the antlr steps :
> -create the grammar file (parse the file and generate AST)
> -generate code in c++.
> Now I want to use my AST to generate ouput code (for example .hpp, cpp)
> Is it available in Antlr 2.7.6 ? Is it possible ?

This is slightly different.  If I understand you correctly, you are 
attempting to convert some language construct to C++?  Certainly it is 
possible, but not in any automatic way.  Your options would be to: (1) 
create a TreeWalker and output your C++ code to stream or file from 
within the various nodes; or (2) take the AST generated by your grammar 
and manually walk it, outputting in a similar way to 1.

Of course, this option does not require that your actual 
lexer/parser/treewalker be C++ code.  You could set ANTLR to use a C#, 
Java or Python target, and then make use of the StringTemplate code 
available now.

Here are a couple of links to discussion for and against using a manual 
approach versus StringTemplate:

http://www.antlr.org/article/1136917339929/stringTemplate.html
http://www.codegeneration.net/tiki-read_article.php?articleId=77

Best,
Scott
From craig at palantir.co.za  Tue Aug  1 09:12:36 2006
From: craig at palantir.co.za (Craig Main)
Date: Tue Aug  1 09:12:49 2006
Subject: [antlr-interest] Rewrite Problem,
In-Reply-To: <89A0C025-6E8C-4A3A-BFF6-78BEE9A11DB6@cs.usfca.edu>
Message-ID: <20060801161245.714CBDCD2F@www.antlr.org>


>> That would need to be inside the loop.
Doh!!

>> Take a look at mantra.g for example:
I missed that small print; perhaps pop it in the samples!

Mantra has the answers I need, and will definitely keep me quiet for a
while.

Thanks
Regards
Craig


From antlr at jazillian.com  Tue Aug  1 09:25:29 2006
From: antlr at jazillian.com (Andy Tripp)
Date: Tue Aug  1 09:25:28 2006
Subject: [antlr-interest] Re: output code generation in c++
In-Reply-To: <44CF6649.2040403@gmail.com>
References: <dcb971710608010114r294f08davb22205af57347894@mail.gmail.com>
	<44CF6649.2040403@gmail.com>
Message-ID: <44CF8079.6050609@jazillian.com>

Scott Amort wrote:

> Hi,
>
> dotnet fr wrote:
>
>> In the antlr steps :
>> -create the grammar file (parse the file and generate AST)
>> -generate code in c++.
>> Now I want to use my AST to generate ouput code (for example .hpp, cpp)
>> Is it available in Antlr 2.7.6 ? Is it possible ?
>
>
> This is slightly different.  If I understand you correctly, you are 
> attempting to convert some language construct to C++?  Certainly it is 
> possible, but not in any automatic way.  Your options would be to: (1) 
> create a TreeWalker and output your C++ code to stream or file from 
> within the various nodes; or (2) take the AST generated by your 
> grammar and manually walk it, outputting in a similar way to 1.
>
> Of course, this option does not require that your actual 
> lexer/parser/treewalker be C++ code.  You could set ANTLR to use a C#, 
> Java or Python target, and then make use of the StringTemplate code 
> available now.
>
> Here are a couple of links to discussion for and against using a 
> manual approach versus StringTemplate:
>
> http://www.antlr.org/article/1136917339929/stringTemplate.html
> http://www.codegeneration.net/tiki-read_article.php?articleId=77


See also this article about the pros and cons (ok, mostly cons) of 
treewalkers vs walking an AST "by hand":
http://www.jazillian.com/articles/treewalkers.html

>
> Best,
> Scott
>

From swalton at cs.utah.edu  Tue Aug  1 14:37:33 2006
From: swalton at cs.utah.edu (Sean Walton)
Date: Tue Aug  1 14:37:36 2006
Subject: [antlr-interest] Using ANT w/ ANTLR
Message-ID: <44CFC99D.8080802@cs.utah.edu>

Anybody got some pointers on how to get ANT 3.0 to work with ANTLR?
-Sean Walton

From Erik.Putrycz at nrc-cnrc.gc.ca  Tue Aug  1 16:30:53 2006
From: Erik.Putrycz at nrc-cnrc.gc.ca (Putrycz, Erik)
Date: Tue Aug  1 16:30:59 2006
Subject: [antlr-interest] parsing Java 5... bug?
Message-ID: <E4D07AB09F5F044299333C8D0FEB45E9028D62DC@nrccenexb1.nrc.ca>

I've been running into some strange issues while trying to parse java
5... I tried the most recent version that comes with a java preprocessor

Character.isLetter(LA(1))

            at nrc.uml2.antlr.JavaLexer.mID_START(JavaLexer.java:1390)

            at nrc.uml2.antlr.JavaLexer.mIDENT(JavaLexer.java:1449)

            at nrc.uml2.antlr.JavaLexer.nextToken(JavaLexer.java:368)

            at antlr.TokenBuffer.fill(TokenBuffer.java:69)

            at antlr.TokenBuffer.LA(TokenBuffer.java:80)

            at antlr.LLkParser.LA(LLkParser.java:52)

            at
nrc.uml2.antlr.JavaRecognizer.compilationUnit(JavaRecognizer.java:296)

...

 

My input is very simple:

package simple;

 

public class BR {

 

            public void runMe() {

                        int result = 1;

                        for (int il = 0;il < 100;il++) {

                                    result = result + il;

                        }

                        if (result > 5)

                                    System.out.println("check");

            }

}

 

Is this a bug in the grammar or something else?

 

Erik Putrycz, Ph.D - Research Associate /
<mailto:erik.putrycz@nrc-cnrc.gc.ca> erik.putrycz@nrc-cnrc.gc.ca / (613)
990 0681

Institute for Information Technology - Software Engineering Group

National Research Council, Canada - Building M-50, 1200 Montreal Road

Ottawa, Ontario, CANADA K1A 0R6

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060801/a00bd434/attachment.html
From the_e57 at yahoo.com  Tue Aug  1 23:59:52 2006
From: the_e57 at yahoo.com (Eugen Cazacu)
Date: Tue Aug  1 23:59:58 2006
Subject: [antlr-interest] Problem with memory management
In-Reply-To: <bc607a4e0607240409y7ff5ed4pd3e3ce27c0263e47@mail.gmail.com>
Message-ID: <20060802065952.6374.qmail@web52111.mail.yahoo.com>



--- Ric Klaren <ric.klaren@gmail.com> wrote:

> Hi,
> 
> On 7/21/06, Eugen Cazacu <the_e57@yahoo.com> wrote:
> > I am writing a verilog parser in antl, actually it
> is
> > finished, now we are running tests on it, one type
> of
> > test revealed a pretty big problem with antlr
> design.
> > I must mention that the generated code is C++.
> > The problem is in the way the AST is built. This
> > nextSibling/firstChild tree design has a problem
> when
> > one node has many children, because they are all
> > stored in a unidirectional list if I use CommonAST
> > class. The problem occures on the destruction of
> the
> > tree. ...  this causes a
> > recursive call if all of the destructors in depth.
> IF
> > a node has as many as 20000-30000 children there
> are
> > at least 20000-30000 recursive calls, if we would
> 
> Yup this is a known problem. Occasionally there's
> someone that runs into it.
> 
> > ...
> > To avoid this probelem I wrote a
> > special destroy function to delete the AST after I
> > don't need it any more, that looks like this:
> >
> > void destroy(RefAST &ast) {
> >   if(!ast.get())
> >     return;
> >   std::cerr << "before destroy" << endl;
> >   std::queue<RefAST> destroyQueue;
> >   destroyQueue.push(ast);
> >   ast = 0;
> >   RefAST temp1, temp2;
> >   while(!destroyQueue.empty()) {
> >     temp1 = destroyQueue.front();
> >     destroyQueue.pop();
> >     temp2 = temp1->getFirstChild();
> >     temp1->setFirstChild(RefAST(0));
> >     if(temp2.get())
> >       destroyQueue.push(temp2);
> >     temp2 = temp1->getNextSibling();
> >     temp1->setNextSibling(RefAST(0));
> >     if(temp2.get())
> >       destroyQueue.push(temp2);
> >     temp1 = 0;
> >     temp2 = 0;
> >   }
> 
> This is indeed a good work around.
> 
> > This make the program terminate correctly. But
> only in
> > the case when the parser doesn't throw any
> exceptions
> > (MismatchedTokenException for example). When the
> > parser does this, it destroyes whatever tree was
> built
> > by itself and if the tree is similar to what I
> > described before, a stack overflow occures and the
> > program end without printing the exception message
> in
> > a segmentation fault, because I can only catch the
> > exceptions after antlr tryes to delete the tree.
> >
> > To avoid this problem I am attempting now to write
> my
> > own AST Node class derived from AST that would
> > simulate the behaviour of it, but would use a more
> > linear structure, small example:
> 
> It's probably easier to override the destructor of
> the parser (e.g.
> add a custom destructor in the .g file) and include
> the previous fix
> to that? Or maybe I'm missing something (don't have
> access to the code
> atm so can't check)
> 
> > But here I got another problem. The reference
> counting
> > antlr nechanism doesn't have a weak reference
> class (I
> > can't use strong references, RefCount, because it
> > would cause a the object to have a counted
> reference
> > to itself and it will never be destroyed, since
> antlr
> > RefCount doesn't check for loop references) , that
> I
> > could use in place of "this" pointer, I need it
> > because all the antlr interface uses Refs. This
> would
> > make me to rewrite antlr code, which I don't want
> to
> > do because when a new version of antlr will appear
> I
> > will have to rewrite some code again. I hope that
> > someone could help with this here.
> 
> The reference counter is something I'd rather not
> touch. It's very
> much tailored to the antlr runtime. Trying to use a
> smarter reference
> counter and inject it into the antlr runtime will
> probably get you
> some gray hairs. Got some work in progress code for
> it but that broke
> around heterogeneous AST's.
> 
> Expect something better in antlr3. I will (re)start
> on the C++ codegen
> for ANTLR 3 in one/two weeks.
> 
> Cheers,
> 
> Ric
> 
In order to avoid this problem I with exceptions, I
made the destructor of a AST node to destroy the whole
tree that is below it by invoking my destroy funstions
for nextSibling and firsChild, I know it might skrew
the tree if in one moment one node might be removed
and the subtree used in another place. In my tests
antlr didn't do stuff like that, I hope this will work
fine
Have a nice day,
--------
Eugen Cazacu

__________________________________________________
Do You Yahoo!?
Tired of spam?  Yahoo! Mail has the best spam protection around 
http://mail.yahoo.com 
From herumor at fastwebnet.it  Wed Aug  2 02:24:20 2006
From: herumor at fastwebnet.it (Herumor)
Date: Wed Aug  2 02:24:29 2006
Subject: [antlr-interest] AST tutorial
Message-ID: <44D06F44.7000806@fastwebnet.it>

Hello guys,
first of all I want to thank you everyone here for the help provided in
the past.
Now let's come to the point: I wish you could provide me some links
where the ANTLR ast trees and options are well described.
Particularly

loop_cond
  : SEMICOLON!
  { #loop_cond = #([NULL_NODE, "null_cond"]); }
  | expr SEMICOLON!
  ;


  { #loop_cond = #([NULL_NODE, "null_cond"]); }

the meaning of this kind of expressions.
I know the meaning of '!' or ^ or when there's nothing next to a rule.
But I haven't got yet the meaning of that expression.
If anyone could explain me it into detail or send me the link to  a web
page that explains it step by step as I'm a newbie in these things that
would be great.
Thank you everyone for helping me.
Davide Pugliese
From tbrandonau at gmail.com  Wed Aug  2 02:49:38 2006
From: tbrandonau at gmail.com (Thomas Brandon)
Date: Wed Aug  2 02:49:40 2006
Subject: [antlr-interest] AST tutorial
In-Reply-To: <44D06F44.7000806@fastwebnet.it>
References: <44D06F44.7000806@fastwebnet.it>
Message-ID: <ebc876d70608020249g7091ed5bg2479b6efa05ee991@mail.gmail.com>

On 8/2/06, Herumor <herumor@fastwebnet.it> wrote:
<SNIP>
>   loop_cond
>  : SEMICOLON!
>  { #loop_cond = #([NULL_NODE, "null_cond"]); }
>  | expr SEMICOLON!
>  ;
>
> the meaning of this kind of expressions.
You want AST Action Translation in the ANTLR Tree Construction section
of the documentation - http://www.antlr.org/doc/trees.html#_bb9. That
is an action where various parts are rewritten by ANTLR for AST
constuction, "#loop_cond" refers to the output AST of the rule,
"#(...)" constucts a tree with the first specified node as root and
subsequent nodes as children, "[NULL_NODE, "null_cond"]" constructs a
synthetic node of type NULL_NODE with text "null_cond". So that will
output the tree "(NULL_NODE)" for that alternative.

Tom.

> Davide Pugliese
>
From 14.08.99 at gmx.de  Wed Aug  2 04:55:42 2006
From: 14.08.99 at gmx.de (Guido)
Date: Wed Aug  2 04:56:22 2006
Subject: [antlr-interest] Hello & Parsing an AST
Message-ID: <44D092BE.2080403@gmx.de>

Hi @all,

just a short "Hello" from a newbie (from Germany). I started using the
eclpise plugin to use antlr to convert a proprietary code into XML.

I managed to build a parser & lexer but got stuck after generating the AST.

This is an example File to parse...
*****
Ident
Src Sys: sys X1 Lang: Ger new
Code: NameOfScript

Code
Start Script "NameOfScript"
  Def Var "x" : int
  Def Var "y" : bool
  Start SubScript "Test1"
   [...]
  End SubScript
  Start SubScript "Test2"
   [...]
  End SubScript
End Script
*****

...and this a part of the parser...
*****
start
  : head "Code"^ script;
head
  : "Ident" "Src" "Sys" (STRING)+ "Lang"
     COLON (STRING)+ "Code" COLON STRING;
script
  : "Start" "Script" STRING (def)* (subScript)* "End" "Script"
[...]
*****

...and finally I want to generate s.t. like this:
*****
<SCRIPT name="NameOfScript" srcSys="sys X1" lang="Ger new">
  <DEF name="x" type="int">
  <DEF name="y" type="bool">
  <SUBSCRIPT name="Test1">
   [...]
  </SUBSCRIPT>
  <SUBSCRIPT name="Test2">
   [...]
  </SUBSCRIPT>
</SCRIPT>
*****

My problem: Up to now I didn't manage to build a Tree Parser, so I would
appreciate any hint...

Thanks,
Guido

From david.crosson at wanadoo.fr  Wed Aug  2 06:40:39 2006
From: david.crosson at wanadoo.fr (David CROSSON)
Date: Wed Aug  2 06:40:46 2006
Subject: [antlr-interest] ANTLR3.0b3, options filter=true,
	why actions are not executed ?
Message-ID: <20650369.1154526039740.JavaMail.www@wwinf1614>

Hello,

  I was wondering why when I turn on filter option, my actions are not executed
although I do not have any grammatical errors. May be I missed something, but I
remember that when I was using ANTLR 2.7 they were executed.

David Crosson.

From david.crosson at wanadoo.fr  Wed Aug  2 07:12:38 2006
From: david.crosson at wanadoo.fr (David CROSSON)
Date: Wed Aug  2 07:12:42 2006
Subject: [antlr-interest] ANTLR3.0b3, options filter=true,	why actions
	are not executed ?
Message-ID: <15045415.1154527958199.JavaMail.www@wwinf1507>

So when I turn off filtering, actions are executed, but I was also
wondering why in the following code, the action which prints
"INSIDE" is only executed once although the DATA token appears
three times : ( DATA {System.out.println("INSIDE"); } )* {System.out.println("OUTSIDE"); }



A small test grammar, and a junit test :
//-----------------------------------------------------------------
grammar TryIt2Parser;
options {
    filter=true;
    output=AST;
}
go : (DATA {System.out.println("INSIDE"); })* {System.out.println("OUTSIDE"); }
       ;
DATA : 'DATA'
     ;
WS : ' ' | '\t' {channel=99;}
   ;
//-----------------------------------------------------------------
import junit.framework.*;
import org.antlr.runtime.ANTLRStringStream;
import org.antlr.runtime.CharStream;
import org.antlr.runtime.CommonTokenStream;
import org.antlr.runtime.RecognitionException;
import stackdumpparser.parsers.TryIt2Parser;
import stackdumpparser.parsers.TryIt2ParserLexer;
import stackdumpparser.parsers.TryItParser;
import stackdumpparser.parsers.TryItParserLexer;

public class AntlrTryItTest extends TestCase {  
    public AntlrTryItTest(String testName) {
        super(testName);
    }
    protected void setUp() throws Exception {
    }
    protected void tearDown() throws Exception {
    }    
    public void testActionExcecution() throws RecognitionException, InterruptedException {
        CharStream in = new ANTLRStringStream("DATA DATA DATA");
        TryIt2ParserLexer lexer = new TryIt2ParserLexer(in);
        CommonTokenStream tokens = new CommonTokenStream(lexer);
        TryIt2Parser parser = new TryIt2Parser(tokens);
        parser.go();
    }
}
//-----------------------------------------------------------------

regards,
David Crosson.
From david.crosson at wanadoo.fr  Wed Aug  2 08:34:47 2006
From: david.crosson at wanadoo.fr (David CROSSON)
Date: Wed Aug  2 08:34:52 2006
Subject: [antlr-interest] What about "lexical modes" support ?
Message-ID: <6249333.1154532887189.JavaMail.www@wwinf1611>

Hello Terence,

  In June there was a thread about adding "lexical modes"
in ANTLR and since no more news about it. Do you plan these
feature for the next release of ANTLR, let's say 3.1 ? Or
did you already achieve it ?

regards,
David Crosson.

From parrt at cs.usfca.edu  Wed Aug  2 08:40:43 2006
From: parrt at cs.usfca.edu (Terence Parr)
Date: Wed Aug  2 08:40:48 2006
Subject: [antlr-interest] What about "lexical modes" support ?
In-Reply-To: <6249333.1154532887189.JavaMail.www@wwinf1611>
References: <6249333.1154532887189.JavaMail.www@wwinf1611>
Message-ID: <CE6F9734-D6DE-4044-9EAC-2202693861B4@cs.usfca.edu>

Hi David. On the list:

http://www.antlr.org/wiki/display/ANTLR3/add+lexer+modes

Ter
On Aug 2, 2006, at 8:34 AM, David CROSSON wrote:

> Hello Terence,
>
>   In June there was a thread about adding "lexical modes"
> in ANTLR and since no more news about it. Do you plan these
> feature for the next release of ANTLR, let's say 3.1 ? Or
> did you already achieve it ?
>
> regards,
> David Crosson.
>

From swalton at cs.utah.edu  Wed Aug  2 08:41:53 2006
From: swalton at cs.utah.edu (Sean Walton)
Date: Wed Aug  2 08:41:58 2006
Subject: [antlr-interest] Get debugger to work
Message-ID: <44D0C7C1.6030509@cs.utah.edu>

Can anyone give me some pointers on how to get the debugger to work?  
When I click on the 'debug' tab, all the buttons are disabled as well as 
the section that looks like the 'interpreter''s sample text section.
Help?
-Sean
From parrt at cs.usfca.edu  Wed Aug  2 08:47:12 2006
From: parrt at cs.usfca.edu (Terence Parr)
Date: Wed Aug  2 08:47:16 2006
Subject: [antlr-interest] Get debugger to work
In-Reply-To: <44D0C7C1.6030509@cs.utah.edu>
References: <44D0C7C1.6030509@cs.utah.edu>
Message-ID: <E5C1C0F5-5BE1-485D-B147-07BD678C45C8@cs.usfca.edu>

Use the debug menu and say "debug...".  It will generate code,  
compile, and run then ask for input and a start rule.  Or can compile  
separately and say "debug remote".

Ter
On Aug 2, 2006, at 8:41 AM, Sean Walton wrote:

> Can anyone give me some pointers on how to get the debugger to  
> work?  When I click on the 'debug' tab, all the buttons are  
> disabled as well as the section that looks like the 'interpreter''s  
> sample text section.
> Help?
> -Sean

From herumor at fastwebnet.it  Wed Aug  2 09:47:16 2006
From: herumor at fastwebnet.it (Herumor)
Date: Wed Aug  2 09:47:21 2006
Subject: [antlr-interest] Cannot find symbol stuff
Message-ID: <44D0D714.5060309@fastwebnet.it>

Hello, since my professor wants the lexer into a file and the parser
into another one I did so.
I added importVocab = "EasyJava" in the parser and exportVocab =
"EasyJava" in the lexer.
I read at some tutorials to learn how changing the type of a token or an
expression just for that rule, but when I do so I get this error.

/
C:\Documents and
Settings\spotted\Documenti\grammatica\codice_generato>javac *.j
ava
EasyJavaLexer.java:485: cannot find symbol
symbol  : variable DOT
location: class EasyJavaLexer
                        _ttype = DOT;
                                 ^
EasyJavaLexer.java:500: cannot find symbol
symbol  : variable DEC_NUMBERS
location: class EasyJavaLexer
                        _ttype = DEC_NUMBERS;
                                 ^
2 errors

C:\Documents and Settings\spotted\Documenti\grammatica\codice_generato>

/The following is the lexer:

/*************************************************                                              

 *                                                                      
                       *
 *                    EASY JAVA
LEXER                                        *
 *                                               
                                              *
 *************************************************/               

class EasyJavaLexer extends Lexer;

options {
  charVocabulary='\3'..'\377';
  exportVocab=EasyJava;      // call the vocabulary "EasyJava"
  testLiterals=false;    // don't automatically test for literals
  k=5;                   // lookahead
}


IDENTIFIER
    options {testLiterals=true; generateAmbigWarnings=false;}
    :    ('a'..'z'|'A'..'Z'|'_'|'$') ('a'..'z'|'A'..'Z'|'_'|'0'..'9'|'$')*
    ;


NUMBERS : ('0' | '1'..'9' ('0'..'9')*) ('.' {_ttype = DOT;} ('0'..'9')+
{$setType(DEC_NUMBERS);})? ;                                           
                                                                       
                                                                       
                                                                       
                                                                       
                                                                       
                                               
 
// OPERATORS
QUESTION    options { paraphrase="?"; }    :    '?'        ;
LRBRACK        options { paraphrase="("; }        :    '('        ;
RRBRACK        options { paraphrase=")"; }        :    ')'        ;
LSBRACK        options { paraphrase="["; }        :    '['        ;
RSBRACK        options { paraphrase="]"; }        :    ']'        ;
LCBRACK        options { paraphrase="{"; }        :    '{'        ;
RCBRACK        options { paraphrase="}"; }        :    '}'        ;
COLON        options { paraphrase=":"; }        :    ':'        ;
COMMA        options { paraphrase=","; }        :    ','        ;
LNOT        options { paraphrase="!"; }        :    '!'        ;
INC            options { paraphrase="++"; }    :    "++"    ;
DEC            options { paraphrase="--"; }    :    "--"    ;
MOD            options { paraphrase="%"; }         :    '%'        ;
SEMI         options { paraphrase=";"; }        :    ';'        ;

//  ARITHMETIC OPERATORS

DIV                :    '/'        ;
PLUS            :    '+'        ;
MINUS            :    '-'        ;
MUL             :    '*'        ;


// LOGICAL OPERATORS

LAND options { paraphrase="&&"; }        :    "&&"    ;
LOR     options { paraphrase="||"; }        :    "||"    ;



// RELATIONAL OPERATORS

LTE    options { paraphrase="<="; }                        :    "<="    ;
LT    options { paraphrase="<;"; }                            :   
'<'        ;
GTE    options { paraphrase=">="; }                        :    ">="    ;
GT    options { paraphrase=">"; }                            :    '>'   
    ;


// ASSIGN OPERATORS
ASSIGN    options { paraphrase="="; }        :    '='        ;

BAND_ASSIGN     options { paraphrase="&="; }        :    "&="    ;
BOR_ASSIGN     options { paraphrase="|="; }        :    "|="    ;
BXOR_ASSIGN     options { paraphrase="^="; }        :    "^="    ;
SL_ASSIGN     options { paraphrase="<<="; }        :    "<<="    ;
BSR_ASSIGN     options { paraphrase=">>>="; }        :    ">>>="    ;
SR_ASSIGN     options { paraphrase=">>="; }        :    ">>="    ;
MOD_ASSIGN     options { paraphrase="%="; }        :    "%="    ;
MUL_ASSIGN     options { paraphrase="*="; }        :    "*="    ;
DIV_ASSIGN     options { paraphrase="/="; }        :    "/="    ;
MINUS_ASSIGN options { paraphrase="-="; }        :    "-="    ;
PLUS_ASSIGN     options { paraphrase="+="; }        :    "+="    ;

// BITWISE OPERATORS

BXOR options { paraphrase="^"; }            :    '^'        ;
BOR     options { paraphrase="|"; }            :    '|'        ;
BAND options { paraphrase="&"; }            :    '&'        ;
BNOT options { paraphrase="~"; }            :    '~'        ;


// EQUALITY OPERATORS

EQUAL        options { paraphrase="=="; }        :    "=="    ;
NOT_EQUAL    options { paraphrase="!="; }        :    "!="    ;



// SHIFT
SR    options { paraphrase=">>"; }            :    ">>"    ;
BSR    options { paraphrase=">>>"; }            :    ">>>"    ;
SL    options { paraphrase="<<"; }            :    "<<"    ;


// Whitespace -- ignored

WS    :    (    ' '
        |    '\t'
        |    '\f'
            // handle newlines
        |    (    options {generateAmbigWarnings=false;}
            :    "\r\n"  // Evil DOS
            |    '\r'    // Macintosh
            |    '\n'    // Unix (the right way)
            )
            { newline(); }
        )+
        { _ttype = Token.SKIP; }
    ;

// Single-line comments

SL_COMMENT
    :    "//"
        (~('\n'|'\r'))* ('\n'|'\r'('\n')?)
        {$setType(Token.SKIP); newline();}
    ;

// multiple-line comments

ML_COMMENT
    :    "/*"
        (
            options {
                generateAmbigWarnings=false;
            }
        :
            { LA(2)!='/' }? '*'
        |    '\r' '\n'        {newline();}
        |    '\r'            {newline();}
        |    '\n'            {newline();}
        |    ~('*'|'\n'|'\r')
        )*
        "*/"
        {$setType(Token.SKIP);}
    ;

    // character literals
CHAR_LITERAL
    :    '\'' ( ESC | ~('\''|'\n'|'\r'|'\\') ) '\''
    ;

// string literals
STRING_LITERAL
    :    '"' (ESC|~('"'|'\\'|'\n'|'\r'))* '"'
    ;
   
    // Sequenza di escape -- viene utilizzato il flag protected in modo
che questa regola sia visibile solo all'interno del lexer

protected
ESC
    :    '\\'
        (    'n'
        |    'r'
        |    't'
        |    'b'
        |    'f'
        |    '"'
        |    '\''
        |    '\\'
        |    '0'..'3'
            (
                options {
                    warnWhenFollowAmbig = false;
                }
            :    '0'..'7'
                (
                    options {
                        warnWhenFollowAmbig = false;
                    }
                :    '0'..'7'
                )?
            )?
        |    '4'..'7'
            (
                options {
                    warnWhenFollowAmbig = false;
                }
            :    '0'..'7'
            )?
        )
    ;
----------------------------------------------------------------

I get the problem either using $settype or _ttype.
Thanks forward for help.




From kroepke at classdump.org  Wed Aug  2 10:08:45 2006
From: kroepke at classdump.org (Kay Roepke)
Date: Wed Aug  2 10:08:56 2006
Subject: [antlr-interest] Cannot find symbol stuff
In-Reply-To: <44D0D714.5060309@fastwebnet.it>
References: <44D0D714.5060309@fastwebnet.it>
Message-ID: <6CD78331-5858-4607-A148-CB2E67089100@classdump.org>

Hi!

On 2. Aug 2006, at 18:47 Uhr, Herumor wrote:

> NUMBERS : ('0' | '1'..'9' ('0'..'9')*) ('.' {_ttype = DOT;}  
> ('0'..'9')+
> {$setType(DEC_NUMBERS);})? ;

What is the lexer supposed to return for the NUMBERS rule?
The parser would either see NUMBERS or DEC_NUMBERS, depending on  
whether the lexer sees '.' ('0'..'9') or not.
The DOT type would never be used in this case anyway, because the  
token type will be set to DEC_NUMBERS if the
optional part matches.
Seems to me that you'd need to rethink your approach to lexing NUMBERS.

To the token types DOT and DEC_NUMBERS:
They are not defined in the lexer grammar, so the lexer wouldn't know  
about them. Consequently they cannot be in
its vocabulary. I'm not sure whether you can use a 'tokens' section  
in a lexer (I guess not) but you could add a
empty protected rule DEC_NUMBERS. DOT I would define as a bona-fide  
token rule, since that's what you use it as.

So, adding

protected
DEC_NUMBERS: ;

and

DOT : '.';

should work. Then you can rewrite your NUMBERS rule like:

NUMBERS : ('0' | '1'..'9' ('0'..'9')*) (DOT ('0'..'9')+ {$setType 
(DEC_NUMBERS);})? ;

but I'd do it a bit differently (see the archives for a lot of  
solutions to this. E.g. search for the thread
"Please advise about float" from September, 19th 2005.)
--> http://www.antlr.org/pipermail/antlr-interest/2005-September/ 
thread.html

HTH,

-k
From greg at onvoq.com  Wed Aug  2 10:17:19 2006
From: greg at onvoq.com (Greg Clemenson)
Date: Wed Aug  2 10:17:24 2006
Subject: [antlr-interest] (no subject)
Message-ID: <DD30C805-4FF9-4003-8BEC-C25C40E8B2FB@onvoq.com>

Hi,

I am a bit new, but I am having a problem with getting the packages  
statement emitted in the generated lexer.  It is probably just some  
piece of documentation I can't find or have somehow overlooked.   
Here's what I am doing now.  I have a *.g file that looks like this:

grammar Xyz;

@header {

package com.path.parser;

import com.path.cmplr.ConstNode;
import com.path.cmplr.ICmplrNode;
...
}


Among other things, this generates files Xyz.java and XyzLexer.java.   
I use the -o to generate the output files in the correct Java source  
directory.  Xyz.java starts out like this, with the correct package:

// $ANTLR 3.0b3 ogrammar.g 2006-08-02 09:47:56

package com.path.parser;

import com.path.cmplr.ConstNode;
import com.path.cmplr.ICmplrNode;
...
import org.antlr.runtime.*;
import java.util.Stack;
import java.util.List;
import java.util.ArrayList;

However XyzLexer.java starts out like this, without a package  
statement, causing a compiler error:

// $ANTLR 3.0b3 ogrammar.g 2006-08-02 09:47:58

import org.antlr.runtime.*;
import java.util.Stack;
import java.util.List;
import java.util.ArrayList;
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060802/0f7bca36/attachment-0001.html
From kroepke at classdump.org  Wed Aug  2 10:19:24 2006
From: kroepke at classdump.org (Kay Roepke)
Date: Wed Aug  2 10:19:32 2006
Subject: [antlr-interest] Hello & Parsing an AST
In-Reply-To: <44D092BE.2080403@gmx.de>
References: <44D092BE.2080403@gmx.de>
Message-ID: <94288867-AAE5-40CF-B826-1DF75D6EFE4B@classdump.org>


On 2. Aug 2006, at 13:55 Uhr, Guido wrote:

> Hi @all,
>
> just a short "Hello" from a newbie (from Germany).

Moin, Guido :)

> I managed to build a parser & lexer but got stuck after generating  
> the AST.

[...]

>
> My problem: Up to now I didn't manage to build a Tree Parser, so I  
> would
> appreciate any hint...

Take a hard look at <http://antlr.org/doc/trees.html#_bb1> and  
<http://antlr.org/doc/sor.html#_bb1>.
Also there is an excellent article on how ANTLR tree building is done  
(if automatic tree building is
not what you want/need) at <http://antlr.org/article/1137964510001/ 
manual.tree.construction.txt>

HTH,

-k
-- 
Kay R?pke <kroepke@classdump.org>
classdump Software


From kroepke at classdump.org  Wed Aug  2 10:29:58 2006
From: kroepke at classdump.org (Kay Roepke)
Date: Wed Aug  2 10:30:04 2006
Subject: [antlr-interest] (no subject)
In-Reply-To: <DD30C805-4FF9-4003-8BEC-C25C40E8B2FB@onvoq.com>
References: <DD30C805-4FF9-4003-8BEC-C25C40E8B2FB@onvoq.com>
Message-ID: <377DC79B-3E63-404A-8A34-B6F502A3156E@classdump.org>


On 2. Aug 2006, at 19:17 Uhr, Greg Clemenson wrote:

> grammar Xyz;
>
> @header {
>
> package com.path.parser;
>
> import com.path.cmplr.ConstNode;
> import com.path.cmplr.ICmplrNode;
> ...
> }

Hi!

In a combined grammar you need to specifically specify what goes into  
the lexer using the right action scope.
This holds true for the other stuff, too (for instance, "members").

grammar foo;

@header { /* this goes into the parser by default */}
@parser::header { /* specifically goes into the parser */ } 	// this  
will actually generate a warning by antlr:
								// actionscope.g:5:10: redefinition of header action
@lexer::header { /* specifically goes into the lexer */ }


HTH,

-k


From open.zone at virgin.net  Wed Aug  2 10:29:08 2006
From: open.zone at virgin.net (Micheal J)
Date: Wed Aug  2 10:32:09 2006
Subject: [antlr-interest] Cannot find symbol stuff
In-Reply-To: <44D0D714.5060309@fastwebnet.it>
Message-ID: <000501c6b659$2a3ca580$c704a8c0@hercules>

Hi,

> Hello, since my professor wants the lexer into a file and the 
> parser into another one I did so. I added importVocab = 
> "EasyJava" in the parser and exportVocab = "EasyJava" in the 
> lexer. I read at some tutorials to learn how changing the 
> type of a token or an expression just for that rule, but when 
> I do so I get this error.
> 
> /
> C:\Documents and 
> Settings\spotted\Documenti\grammatica\codice_generato>javac *.j ava
> EasyJavaLexer.java:485: cannot find symbol
> symbol  : variable DOT
> location: class EasyJavaLexer
>                         _ttype = DOT;
>                                  ^
> EasyJavaLexer.java:500: cannot find symbol
> symbol  : variable DEC_NUMBERS
> location: class EasyJavaLexer
>                         _ttype = DEC_NUMBERS;
>                                  ^
> 2 errors


Where is DOT and DEC_NUMBERS defined?. There are not defined in the lexer.


Micheal

-----------------------
The best way to contact me is via the list/forum. My time is very limited.

From oliver.zeigermann at gmail.com  Wed Aug  2 10:33:41 2006
From: oliver.zeigermann at gmail.com (Oliver Zeigermann)
Date: Wed Aug  2 10:33:48 2006
Subject: [antlr-interest] ANTLR3 tutorial
Message-ID: <9da4f4520608021033q6f36ebd6id7b12624db4f3ee4@mail.gmail.com>

Hi folks!

I finished the first part of my Parsing XML using ANTLR3 tutorial:

http://www.antlr.org/wiki/display/ANTLR3/Parsing+XML

And the first part:

http://www.antlr.org/wiki/display/ANTLR3/Lexer

However, and most frustrating the Wiki made a mess of that page that I
could not even fix after an hour of work :( :( :( I keep trying to
find a solution, any hints highly appreciated.

Anyway, because of this I have the intro and the first part on lexing
here as well:

http://zeigermann.de/antlr/Intro.html
http://zeigermann.de/antlr/Lexing.html

Comments/Improvements on the tutorial itself are highly welcome. Are
the most important questions answered? Can you even follow? Is this
complete crap? Let me know :)

Also, stay tuned for the next part parsing which I am already working on.

Cheers

Oliver
From parrt at cs.usfca.edu  Wed Aug  2 10:48:48 2006
From: parrt at cs.usfca.edu (Terence Parr)
Date: Wed Aug  2 10:48:57 2006
Subject: [antlr-interest] ANTLR3.0b3, options filter=true,
	why actions are not executed ?
In-Reply-To: <15045415.1154527958199.JavaMail.www@wwinf1507>
References: <15045415.1154527958199.JavaMail.www@wwinf1507>
Message-ID: <0A3E6AA0-A0DF-46CF-8E7A-8A7AE1D02578@cs.usfca.edu>

WS : ' ' | '\t' {channel=99;}
    ;

is your problem...you need parens.  ' ' comes out as real token.
Ter

From parrt at cs.usfca.edu  Wed Aug  2 10:50:41 2006
From: parrt at cs.usfca.edu (Terence Parr)
Date: Wed Aug  2 10:50:50 2006
Subject: [antlr-interest] ANTLR3 tutorial
In-Reply-To: <9da4f4520608021033q6f36ebd6id7b12624db4f3ee4@mail.gmail.com>
References: <9da4f4520608021033q6f36ebd6id7b12624db4f3ee4@mail.gmail.com>
Message-ID: <CC53CDB1-FC33-42C7-9BAE-1A91D1D99916@cs.usfca.edu>


On Aug 2, 2006, at 10:33 AM, Oliver Zeigermann wrote:
> However, and most frustrating the Wiki made a mess of that page that I
> could not even fix after an hour of work :( :( :( I keep trying to
> find a solution, any hints highly appreciated.

I started to edit, but I note that Kunle the amazing has already  
started to fix it!

Ter

From parrt at cs.usfca.edu  Wed Aug  2 12:02:07 2006
From: parrt at cs.usfca.edu (Terence Parr)
Date: Wed Aug  2 12:02:17 2006
Subject: [antlr-interest] just added doc on v3 AST construction
Message-ID: <A7AE3937-22C9-4B3B-B3BF-47C2E19896FF@cs.usfca.edu>

http://www.antlr.org/wiki/display/ANTLR3/Tree+construction

Examples taken from Mantra grammar.

Ter
From oliver.zeigermann at gmail.com  Wed Aug  2 12:12:31 2006
From: oliver.zeigermann at gmail.com (Oliver Zeigermann)
Date: Wed Aug  2 12:12:36 2006
Subject: [antlr-interest] ANTLR3 tutorial
In-Reply-To: <CC53CDB1-FC33-42C7-9BAE-1A91D1D99916@cs.usfca.edu>
References: <9da4f4520608021033q6f36ebd6id7b12624db4f3ee4@mail.gmail.com>
	<CC53CDB1-FC33-42C7-9BAE-1A91D1D99916@cs.usfca.edu>
Message-ID: <9da4f4520608021212l79491c86tab8fe60f4e9d952c@mail.gmail.com>

Hey, Kunle!

Thank you so much for making my page actually readable. Awesome action
of altruism :)

Oliver

2006/8/2, Terence Parr <parrt@cs.usfca.edu>:
>
> On Aug 2, 2006, at 10:33 AM, Oliver Zeigermann wrote:
> > However, and most frustrating the Wiki made a mess of that page that I
> > could not even fix after an hour of work :( :( :( I keep trying to
> > find a solution, any hints highly appreciated.
>
> I started to edit, but I note that Kunle the amazing has already
> started to fix it!
>
> Ter
>
>
From jhan at InfinityInfo.com  Wed Aug  2 15:23:56 2006
From: jhan at InfinityInfo.com (Jiho Han)
Date: Wed Aug  2 15:23:56 2006
Subject: [antlr-interest] String literal containing '(single quote)?
Message-ID: <89ACF43E70DC0C4B812FEA71B98CE2EE1B7F41@infsrv00.InfinityInfo.com>

I have a string literal token defined as:

STRINGLITERAL		: '\'' (~'\'')* '\'' ;

How can I make it so that it'll accept a doubled-up single quotes?
i.e.)

"Conan O''Brien"

Thanks

Jiho Han
Senior Software Engineer
Infinity Info Systems
The Sales Technology Experts
Tel: 212.563.4400 x216
Fax: 212.760.0540
jhan@infinityinfo.com
www.infinityinfo.com <http://www.infinityinfo.com/> 


From lgcraymer at yahoo.com  Wed Aug  2 15:35:54 2006
From: lgcraymer at yahoo.com (Loring Craymer)
Date: Wed Aug  2 18:22:39 2006
Subject: [antlr-interest] String literal containing '(single quote)?
In-Reply-To: <89ACF43E70DC0C4B812FEA71B98CE2EE1B7F41@infsrv00.InfinityInfo.com>
Message-ID: <20060802223554.19250.qmail@web55913.mail.re3.yahoo.com>

Change
   
  (~'\'')* 
  to
   
  (
     ( '\'' '\'' )=>  '\'' '\''
      |    
     ~'\''
  )*
   
  --Loring

Jiho Han <jhan@InfinityInfo.com> wrote:
  I have a string literal token defined as:

STRINGLITERAL : '\'' (~'\'')* '\'' ;

How can I make it so that it'll accept a doubled-up single quotes?
i.e.)

"Conan O''Brien"

Thanks

Jiho Han
Senior Software Engineer
Infinity Info Systems
The Sales Technology Experts
Tel: 212.563.4400 x216
Fax: 212.760.0540
jhan@infinityinfo.com
www.infinityinfo.com 




 __________________________________________________
Do You Yahoo!?
Tired of spam?  Yahoo! Mail has the best spam protection around 
http://mail.yahoo.com 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060802/5ad2966f/attachment.html
From prickett at ineighborhood.info  Wed Aug  2 22:01:06 2006
From: prickett at ineighborhood.info (Jeff Prickett)
Date: Wed Aug  2 22:01:21 2006
Subject: [antlr-interest] Unexpected results from an antlr parser
Message-ID: <44D18312.90709@ineighborhood.info>


Hello,

I am attempting to write a parser to parse the mozilla mork grammar. I 
am having problems.
In the first part of the file is usually a dictionary where data (or 
cells) are encoded between parenthesis like this

...(hexId=value)...

Everything works fine up to the equals sign and then it fails to match 
the value.

The output of the program is:

start
magic
space
space
items
object
dict
space
alias
id=D5
line 1:43: expecting LITERAL_1, found 'a'
space

I have tried substituting different rules for LITERAL_1 to see if it was 
not a problem with that rule, but it does not match anything. I even 
tried a dummy rule that match the character 'a' and the string 'a' and 
got no change in output.

I have attached the simplest mork file to demonstrate the problem and 
the Mork.g file.

I am using antlr 2.7.6.

Any help is greatly appreciated.

Thanks,
Jeff Prickett
prickett@ineighborhood.info


-------------- next part --------------
// <!-- <mdb:mork:z v="1.4"/> -->

<(D5=a)>
-------------- next part --------------
header
{
package info.ineighborhood.mork.antlr;
}

class MorkParser extends Parser;

options
{
    k=4;
}    

start
{
    System.out.println("start");
}
: magic (items | group)+;

space
{
    System.out.println("space");
}
: (WHITE)*;

items
{
    System.out.println("items");
}
: (object)*; 

group
{
    System.out.println("group");
}
: gather items (commit | abort);

gather
{
    System.out.println("gather");
}
: space GATHER_START id GATHER_START_2;

commit
{
    System.out.println("commit");
}
: space COMMIT_END id COMMIT_END_2;

abort
{
    System.out.println("abort");
}
: space ABORT_END id COMMIT_END_2;

id
: h:HEX_SEQUENCE
{
    System.out.println("id=" + h.getText());
};    
   

oid
{
    System.out.println("oid");
}
: id | id:scope;

object
{
    System.out.println("object");
}
: (dict);

edit
{
    System.out.println("edit");
}
: EDIT_CHARS;

update
{
    System.out.println("update");
}
: edit(row | table);

dict
{
    System.out.println("dict");
}
: space DICT_START (metadict|alias)* space DICT_END;

metadict
{
    System.out.println("metadict");
}
: DICT_START (cell)* DICT_END;

alias
{
    System.out.println("alias");
}
: CELL_START id EQUALS literal_1 CELL_END;

value
{
    System.out.println("value");
}
: (OID_START oid) | (EQUALS literal_1);

literal_1
{
    System.out.println("literal");
}
: LITERAL_1;

row
{
    System.out.println("row");
}
: ROW_START roid(metarow |cell)* ROW_END;

roid
{
    System.out.println("roid");
}
: oid;

metarow
{
    System.out.println("metarow");
}
: ROW_START (cell)* ROW_END;

cell
{
    System.out.println("cell");
}
: CELL_START col slot CELL_END;

col
{
    System.out.println("col");
}
: (OID_START oid)|name;

slot
{
    System.out.println("slot");
}
: (OID_START oid)|(EQUALS literal_1);

name
{
    System.out.println("name");
}
: (NAME_CHARS)+;

table
{
    System.out.println("table");
}
: TABLE_START toid(metatable | row | roid)* TABLE_END;

toid
{
    System.out.println("toid");
}
: oid;

metatable
{
    System.out.println("metatable");
}
: TABLE_START (cell)* TABLE_END;

magic
{
    System.out.println("magic");
}
: space MAGIC_STRING space;

scope
{
    System.out.println("scope");
}
: (COL1 | COL2 | ATOM1 | ATOM2);

class MorkLexer extends Lexer;

options
{
    k=4;
    charVocabulary='\u0000'..'\ufffe';
}

WHITE: ('\r' | '\f' | '\u0009' | '\u0020' | '\n');
GATHER_START: "@$${";
GATHER_START_2: "{@";
COMMIT_END: "@$$}";
ABORT_END: "@$$}~abort~";
COMMIT_END_2: "@}";
HEX_SEQUENCE: ('0'..'9' | 'a'..'f' | 'A'..'F')+;
EDIT_CHARS: ('+' | '-' | '!');
DICT_START: '<';
DICT_END: '>';
TABLE_START: '{';
TABLE_END: '}';
OID_START: '^';
CELL_START: '(';
CELL_END: ')';
EQUALS: '=';
NAME_CHARS: ('a'..'z' | 'A'..'Z' | ':' | '_')('a'..'z' | 'A'..'Z' | ':' | '_' | '+' | '-' | '?' | '!')*;
MAGIC_STRING: "// <!-- <mdb:mork:z v=\"1.4\"/> -->";
COL1: 'c';
COL2: "col";
ATOM1: 'a';
ATOM2: "atom";
COLON: ':';
LITERALS_1: (~')')*;
From lgcraymer at yahoo.com  Thu Aug  3 00:18:28 2006
From: lgcraymer at yahoo.com (Loring Craymer)
Date: Thu Aug  3 00:18:32 2006
Subject: [antlr-interest] Unexpected results from an antlr parser
In-Reply-To: <44D18312.90709@ineighborhood.info>
Message-ID: <20060803071828.20249.qmail@web55901.mail.re3.yahoo.com>

Your result matches your grammar.  You would get the desired result if your second line was <<(d5=a)>>.  As it is, dict invokes alias (only one DICT_START) and expects (d5=1).  The desired result is that dict invokes metadict which invokes cell.

--Loring

Jeff Prickett <prickett@ineighborhood.info> wrote: 
Hello,

I am attempting to write a parser to parse the mozilla mork grammar. I 
am having problems.
In the first part of the file is usually a dictionary where data (or 
cells) are encoded between parenthesis like this

...(hexId=value)...

Everything works fine up to the equals sign and then it fails to match 
the value.

The output of the program is:

start
magic
space
space
items
object
dict
space
alias
id=D5
line 1:43: expecting LITERAL_1, found 'a'
space

I have tried substituting different rules for LITERAL_1 to see if it was 
not a problem with that rule, but it does not match anything. I even 
tried a dummy rule that match the character 'a' and the string 'a' and 
got no change in output.

I have attached the simplest mork file to demonstrate the problem and 
the Mork.g file.

I am using antlr 2.7.6.

Any help is greatly appreciated.

Thanks,
Jeff Prickett
prickett@ineighborhood.info


//  -->

<(D5=a)>
header
{
package info.ineighborhood.mork.antlr;
}

class MorkParser extends Parser;

options
{
    k=4;
}    

start
{
    System.out.println("start");
}
: magic (items | group)+;

space
{
    System.out.println("space");
}
: (WHITE)*;

items
{
    System.out.println("items");
}
: (object)*; 

group
{
    System.out.println("group");
}
: gather items (commit | abort);

gather
{
    System.out.println("gather");
}
: space GATHER_START id GATHER_START_2;

commit
{
    System.out.println("commit");
}
: space COMMIT_END id COMMIT_END_2;

abort
{
    System.out.println("abort");
}
: space ABORT_END id COMMIT_END_2;

id
: h:HEX_SEQUENCE
{
    System.out.println("id=" + h.getText());
};    
   

oid
{
    System.out.println("oid");
}
: id | id:scope;

object
{
    System.out.println("object");
}
: (dict);

edit
{
    System.out.println("edit");
}
: EDIT_CHARS;

update
{
    System.out.println("update");
}
: edit(row | table);

dict
{
    System.out.println("dict");
}
: space DICT_START (metadict|alias)* space DICT_END;

metadict
{
    System.out.println("metadict");
}
: DICT_START (cell)* DICT_END;

alias
{
    System.out.println("alias");
}
: CELL_START id EQUALS literal_1 CELL_END;

value
{
    System.out.println("value");
}
: (OID_START oid) | (EQUALS literal_1);

literal_1
{
    System.out.println("literal");
}
: LITERAL_1;

row
{
    System.out.println("row");
}
: ROW_START roid(metarow |cell)* ROW_END;

roid
{
    System.out.println("roid");
}
: oid;

metarow
{
    System.out.println("metarow");
}
: ROW_START (cell)* ROW_END;

cell
{
    System.out.println("cell");
}
: CELL_START col slot CELL_END;

col
{
    System.out.println("col");
}
: (OID_START oid)|name;

slot
{
    System.out.println("slot");
}
: (OID_START oid)|(EQUALS literal_1);

name
{
    System.out.println("name");
}
: (NAME_CHARS)+;

table
{
    System.out.println("table");
}
: TABLE_START toid(metatable | row | roid)* TABLE_END;

toid
{
    System.out.println("toid");
}
: oid;

metatable
{
    System.out.println("metatable");
}
: TABLE_START (cell)* TABLE_END;

magic
{
    System.out.println("magic");
}
: space MAGIC_STRING space;

scope
{
    System.out.println("scope");
}
: (COL1 | COL2 | ATOM1 | ATOM2);

class MorkLexer extends Lexer;

options
{
    k=4;
    charVocabulary='\u0000'..'\ufffe';
}

WHITE: ('\r' | '\f' | '\u0009' | '\u0020' | '\n');
GATHER_START: "@$${";
GATHER_START_2: "{@";
COMMIT_END: "@$$}";
ABORT_END: "@$$}~abort~";
COMMIT_END_2: "@}";
HEX_SEQUENCE: ('0'..'9' | 'a'..'f' | 'A'..'F')+;
EDIT_CHARS: ('+' | '-' | '!');
DICT_START: '<';
DICT_END: '>';
TABLE_START: '{';
TABLE_END: '}';
OID_START: '^';
CELL_START: '(';
CELL_END: ')';
EQUALS: '=';
NAME_CHARS: ('a'..'z' | 'A'..'Z' | ':' | '_')('a'..'z' | 'A'..'Z' | ':' | '_' | '+' | '-' | '?' | '!')*;
MAGIC_STRING: "//  -->";
COL1: 'c';
COL2: "col";
ATOM1: 'a';
ATOM2: "atom";
COLON: ':';
LITERALS_1: (~')')*;


 		
---------------------------------
Yahoo! Messenger with Voice. Make PC-to-Phone Calls to the US (and 30+ countries) for 2?/min or less.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060803/3b8687b5/attachment.html
From mail at martin-probst.com  Thu Aug  3 01:09:02 2006
From: mail at martin-probst.com (Martin Probst)
Date: Thu Aug  3 01:09:08 2006
Subject: [antlr-interest] What about "lexical modes" support ?
In-Reply-To: <CE6F9734-D6DE-4044-9EAC-2202693861B4@cs.usfca.edu>
References: <6249333.1154532887189.JavaMail.www@wwinf1611>
	<CE6F9734-D6DE-4044-9EAC-2202693861B4@cs.usfca.edu>
Message-ID: <B31F2A09-98D7-4020-8566-DD3F38A88219@martin-probst.com>

It's nice that other people take my job of annoying Terence with this  
every now and then, thanks! :-)

Am 02.08.2006 um 17:40 schrieb Terence Parr:

> Hi David. On the list:
>
> http://www.antlr.org/wiki/display/ANTLR3/add+lexer+modes
>
> Ter
> On Aug 2, 2006, at 8:34 AM, David CROSSON wrote:
>
>> Hello Terence,
>>
>>   In June there was a thread about adding "lexical modes"
>> in ANTLR and since no more news about it. Do you plan these
>> feature for the next release of ANTLR, let's say 3.1 ? Or
>> did you already achieve it ?
>>
>> regards,
>> David Crosson.
>>
>
>

From dieter_frej at gmx.net  Thu Aug  3 00:19:50 2006
From: dieter_frej at gmx.net (Dieter Frej)
Date: Thu Aug  3 01:22:31 2006
Subject: [antlr-interest] parsing Java 5... bug?
In-Reply-To: <E4D07AB09F5F044299333C8D0FEB45E9028D62DC@nrccenexb1.nrc.ca>
References: <E4D07AB09F5F044299333C8D0FEB45E9028D62DC@nrccenexb1.nrc.ca>
Message-ID: <44D1A396.2020606@gmx.net>

which grammar are you using?

- Didi



Putrycz, Erik wrote:
> I?ve been running into some strange issues while trying to parse java 5? 
> I tried the most recent version that comes with a java preprocessor
> 
> Character.isLetter(LA(1))
> 
>             at nrc.uml2.antlr.JavaLexer.mID_START(JavaLexer.java:1390)
> 
>             at nrc.uml2.antlr.JavaLexer.mIDENT(JavaLexer.java:1449)
> 
>             at nrc.uml2.antlr.JavaLexer.nextToken(JavaLexer.java:368)
> 
>             at antlr.TokenBuffer.fill(TokenBuffer.java:69)
> 
>             at antlr.TokenBuffer.LA(TokenBuffer.java:80)
> 
>             at antlr.LLkParser.LA(LLkParser.java:52)
> 
>             at 
> nrc.uml2.antlr.JavaRecognizer.compilationUnit(JavaRecognizer.java:296)
> 
> ?
> 
>  
> 
> My input is very simple:
> 
> package simple;
> 
>  
> 
> public class BR {
> 
>  
> 
>             public void runMe() {
> 
>                         int result = 1;
> 
>                         for (int il = 0;il < 100;il++) {
> 
>                                     result = result + il;
> 
>                         }
> 
>                         if (result > 5)
> 
>                                     System.out.println("check");
> 
>             }
> 
> }
> 
>  
> 
> Is this a bug in the grammar or something else?
> 
>  
> 
> **Erik Putrycz, Ph.D - Research Associate / 
> ****erik.putrycz@nrc-cnrc.gc.ca** 
> <mailto:erik.putrycz@nrc-cnrc.gc.ca>** / (613) 990 0681**
> 
> Institute for Information Technology - Software Engineering Group
> 
> National Research Council, Canada - Building M-50, 1200 Montreal Road
> 
> Ottawa, Ontario, CANADA K1A 0R6
> 
>  
> 

From Vladimir.Kvashin at Sun.COM  Thu Aug  3 01:23:18 2006
From: Vladimir.Kvashin at Sun.COM (Vladimir Kvashin)
Date: Thu Aug  3 01:24:17 2006
Subject: [antlr-interest] Exporting/importing vocabulary in ANTLR 3
Message-ID: <44D1B276.6080404@sun.com>

Hi,

In Antlr 2.7.x I was able to split lexer and parser into separate 
grammars. I used exportVocab option for them to have a common token set.

Could anybody answer, how can I do this in ANTLR 3?

Thanks,
Vladimir
From mail at martin-probst.com  Thu Aug  3 01:30:14 2006
From: mail at martin-probst.com (Martin Probst)
Date: Thu Aug  3 01:30:20 2006
Subject: [antlr-interest] ANTLR3 tutorial
In-Reply-To: <9da4f4520608021033q6f36ebd6id7b12624db4f3ee4@mail.gmail.com>
References: <9da4f4520608021033q6f36ebd6id7b12624db4f3ee4@mail.gmail.com>
Message-ID: <625BB298-B36F-4F57-9D93-8793D35CB329@martin-probst.com>

Hi,

I'm kind of repeating myself in this, but whatever. I consider myself  
quite an expert on XML (heck, I'm developing an XML database!) so I  
got my 0.02 ? on this.

First, you should at all times avoid tricking people into writing a  
parser for XML. There is absolutely no reason for this. None  
whatsoever. There are XML parsers out there for all languages and a  
variety of different profiles, SAX, DOM, XML Pull, whatever. They are  
highly optimized and it's extremely unlikely you get something faster  
using ANTLR. Plus, you totally spoil the whole XML thing (may not  
have processing instructions, comments, CDATA, entitites, ... except  
from that you don't even support Unicode and have quite some errors  
in that lexer). XML was invented (among other things) to save people  
from having to write their own parser!

Second, there are appropriate techniques to create bindings from XML  
to the language of choice for custom vocabularies. E.g. XML beans and  
friends who do all the parsing plus validation plus create the domain  
specific objects. Again, faster than everything you can write (in a  
reasonable amount of time), plus less errors, plus validation, plus  
some even language independent (YMMV).

Third, and if you really know what you are doing (ie. have spent  
years on XML and have a very specific case in which everything is  
different. This is almost certainly not you, whoever might read  
this :-) ), then don't start by writing an XML lexer, but rather use  
an existing one, e.g. any SAX parser you like. Then use that one as  
the lexer, convert the events to tokens, and implement the  
appropriate ANTLR interface. This might be even easier if you use XML  
Pull as the underlying technology. This way you might get one of the  
most important things (encoding & Unicode) right, which will save  
your users a lot of pain, and you also solved the escaping/entity/ 
etc. thing. And again, it's going to be a lot faster than anything  
ANTLR can generate.

So please don't tell people how to generate their own XML parser.  
Tell them that they are at the wrong address and should rather use a  
pre-built XML parser. It's always the same - the old lex/yacc people  
who think "I need to parse something" and start off with a compiler  
toolkit, trying to solve the same problems over and over again. And  
then they fail and complain about XML being complex because they  
didn't get Unicode or Entities right ...

Martin

Am 02.08.2006 um 19:33 schrieb Oliver Zeigermann:

> Hi folks!
>
> I finished the first part of my Parsing XML using ANTLR3 tutorial:
>
> http://www.antlr.org/wiki/display/ANTLR3/Parsing+XML
>
> And the first part:
>
> http://www.antlr.org/wiki/display/ANTLR3/Lexer
>
> However, and most frustrating the Wiki made a mess of that page that I
> could not even fix after an hour of work :( :( :( I keep trying to
> find a solution, any hints highly appreciated.
>
> Anyway, because of this I have the intro and the first part on lexing
> here as well:
>
> http://zeigermann.de/antlr/Intro.html
> http://zeigermann.de/antlr/Lexing.html
>
> Comments/Improvements on the tutorial itself are highly welcome. Are
> the most important questions answered? Can you even follow? Is this
> complete crap? Let me know :)
>
> Also, stay tuned for the next part parsing which I am already  
> working on.
>
> Cheers
>
> Oliver
>

From oliver.zeigermann at gmail.com  Thu Aug  3 01:46:45 2006
From: oliver.zeigermann at gmail.com (Oliver Zeigermann)
Date: Thu Aug  3 01:46:51 2006
Subject: [antlr-interest] ANTLR3 tutorial
In-Reply-To: <625BB298-B36F-4F57-9D93-8793D35CB329@martin-probst.com>
References: <9da4f4520608021033q6f36ebd6id7b12624db4f3ee4@mail.gmail.com>
	<625BB298-B36F-4F57-9D93-8793D35CB329@martin-probst.com>
Message-ID: <9da4f4520608030146o421a98ffj526c8fe8817a0984@mail.gmail.com>

Hey, Martin,

calm down :) I use SAX for my real life work as well.

This is a tutorial. Nothing more. My simple XML subset is an ideal
candidate to show some ANTLR stuff as it is reasonably tricky and XML
should be known to most people.

If you think this isn't obvious, why don't you add something like a
warning to the front page of the tutorial? I wouldn't mind.

Cheers

Oliver

P.S.: The only case where I really needed my own XML lexer was when I
had to parse XML fragements. Most XML parsers puke when they are fed
with fragments.

2006/8/3, Martin Probst <mail@martin-probst.com>:
> Hi,
>
> I'm kind of repeating myself in this, but whatever. I consider myself
> quite an expert on XML (heck, I'm developing an XML database!) so I
> got my 0.02 ? on this.
>
> First, you should at all times avoid tricking people into writing a
> parser for XML. There is absolutely no reason for this. None
> whatsoever. There are XML parsers out there for all languages and a
> variety of different profiles, SAX, DOM, XML Pull, whatever. They are
> highly optimized and it's extremely unlikely you get something faster
> using ANTLR. Plus, you totally spoil the whole XML thing (may not
> have processing instructions, comments, CDATA, entitites, ... except
> from that you don't even support Unicode and have quite some errors
> in that lexer). XML was invented (among other things) to save people
> from having to write their own parser!
>
> Second, there are appropriate techniques to create bindings from XML
> to the language of choice for custom vocabularies. E.g. XML beans and
> friends who do all the parsing plus validation plus create the domain
> specific objects. Again, faster than everything you can write (in a
> reasonable amount of time), plus less errors, plus validation, plus
> some even language independent (YMMV).
>
> Third, and if you really know what you are doing (ie. have spent
> years on XML and have a very specific case in which everything is
> different. This is almost certainly not you, whoever might read
> this :-) ), then don't start by writing an XML lexer, but rather use
> an existing one, e.g. any SAX parser you like. Then use that one as
> the lexer, convert the events to tokens, and implement the
> appropriate ANTLR interface. This might be even easier if you use XML
> Pull as the underlying technology. This way you might get one of the
> most important things (encoding & Unicode) right, which will save
> your users a lot of pain, and you also solved the escaping/entity/
> etc. thing. And again, it's going to be a lot faster than anything
> ANTLR can generate.
>
> So please don't tell people how to generate their own XML parser.
> Tell them that they are at the wrong address and should rather use a
> pre-built XML parser. It's always the same - the old lex/yacc people
> who think "I need to parse something" and start off with a compiler
> toolkit, trying to solve the same problems over and over again. And
> then they fail and complain about XML being complex because they
> didn't get Unicode or Entities right ...
>
> Martin
>
> Am 02.08.2006 um 19:33 schrieb Oliver Zeigermann:
>
> > Hi folks!
> >
> > I finished the first part of my Parsing XML using ANTLR3 tutorial:
> >
> > http://www.antlr.org/wiki/display/ANTLR3/Parsing+XML
> >
> > And the first part:
> >
> > http://www.antlr.org/wiki/display/ANTLR3/Lexer
> >
> > However, and most frustrating the Wiki made a mess of that page that I
> > could not even fix after an hour of work :( :( :( I keep trying to
> > find a solution, any hints highly appreciated.
> >
> > Anyway, because of this I have the intro and the first part on lexing
> > here as well:
> >
> > http://zeigermann.de/antlr/Intro.html
> > http://zeigermann.de/antlr/Lexing.html
> >
> > Comments/Improvements on the tutorial itself are highly welcome. Are
> > the most important questions answered? Can you even follow? Is this
> > complete crap? Let me know :)
> >
> > Also, stay tuned for the next part parsing which I am already
> > working on.
> >
> > Cheers
> >
> > Oliver
> >
>
>
From endigitalmind at yahoo.co.uk  Thu Aug  3 01:49:56 2006
From: endigitalmind at yahoo.co.uk (Phil Ritchie)
Date: Thu Aug  3 01:50:00 2006
Subject: [antlr-interest] Trying to get template output.
Message-ID: <20060803084956.22134.qmail@web25810.mail.ukl.yahoo.com>

Would a kind soul out there help me get stringtemplate output with my grammar below. I'm using antlrworks-1.0ea11. The simple record oriented grammar works and successfully parses test files. I've read "Language Translation Using ANTLR and StringTemplate" but despite several attempts, I'm getting nowhere - not a single bit of output. If someone would annotate my grammar and show me a sample *.stg file that would give me a working example it would help enormously with my understanding. Just one line of output would be great. I'm honestly not try to get someone to do my work for me - just looking for an example that's linked to my grammar. I've read the cminus example in the v3 examples folder as well but alas I must be dim.
//
// This is a serious attempt to get to grips with ANTLR
//
grammar learningGrammar;
options
{
output = template;
}
@header
{
import org.antlr.stringtemplate.*;
}
file
scope
{
List globals;
}
@init
{
$file::globals = new ArrayList();
}
: record
;
record : (title
  ident
  keywords
  question
  html
  response)+
;
title : 'Title: ' content
;
ident : 'ID: ' ID
;
keywords: 'Keywords: ' content
;
question: 'Question: ' content
;
html : 'HTML: ' BOOLEAN
;
response: 'Response: ' content
;
content : LETTER
;
BOOLEAN : 'yes' | 'no'
;
ID : ('0'..'9')+
;
LETTER : ('a'..'z' | 'A'..'Z' | '/' | ' ' | '<' | '>')+
;
WS : ('\t' | '\r' | '\n')+  { channel = 99; }
;
From dholenstein at gmail.com  Thu Aug  3 02:04:51 2006
From: dholenstein at gmail.com (Dominik Holenstein)
Date: Thu Aug  3 02:04:57 2006
Subject: [antlr-interest] ANTLR3 tutorial
In-Reply-To: <625BB298-B36F-4F57-9D93-8793D35CB329@martin-probst.com>
References: <9da4f4520608021033q6f36ebd6id7b12624db4f3ee4@mail.gmail.com>
	<625BB298-B36F-4F57-9D93-8793D35CB329@martin-probst.com>
Message-ID: <8ab6a9f00608030204h26547f35p6a23ab404b3ce766@mail.gmail.com>

Martin,

I appreciate your knowledge and expertise on XML.
But I think there is one reason for developing my own XML parser with
ANTLR: Learning!

As a newbie to Java, ANTLR and XML I can learn a lot by developing my
own XML parser (or my own specific xml parser to extract just parts of
an XML file).

This is just my opinion and I am very happy and thankful that Oliver
has added this tutorial.

Regards,
Dominik





On 8/3/06, Martin Probst <mail@martin-probst.com> wrote:
> Hi,
>
> I'm kind of repeating myself in this, but whatever. I consider myself
> quite an expert on XML (heck, I'm developing an XML database!) so I
> got my 0.02 ? on this.
>
> First, you should at all times avoid tricking people into writing a
> parser for XML. There is absolutely no reason for this. None
> whatsoever. There are XML parsers out there for all languages and a
> variety of different profiles, SAX, DOM, XML Pull, whatever. They are
> highly optimized and it's extremely unlikely you get something faster
> using ANTLR. Plus, you totally spoil the whole XML thing (may not
> have processing instructions, comments, CDATA, entitites, ... except
> from that you don't even support Unicode and have quite some errors
> in that lexer). XML was invented (among other things) to save people
> from having to write their own parser!
>
> Second, there are appropriate techniques to create bindings from XML
> to the language of choice for custom vocabularies. E.g. XML beans and
> friends who do all the parsing plus validation plus create the domain
> specific objects. Again, faster than everything you can write (in a
> reasonable amount of time), plus less errors, plus validation, plus
> some even language independent (YMMV).
>
> Third, and if you really know what you are doing (ie. have spent
> years on XML and have a very specific case in which everything is
> different. This is almost certainly not you, whoever might read
> this :-) ), then don't start by writing an XML lexer, but rather use
> an existing one, e.g. any SAX parser you like. Then use that one as
> the lexer, convert the events to tokens, and implement the
> appropriate ANTLR interface. This might be even easier if you use XML
> Pull as the underlying technology. This way you might get one of the
> most important things (encoding & Unicode) right, which will save
> your users a lot of pain, and you also solved the escaping/entity/
> etc. thing. And again, it's going to be a lot faster than anything
> ANTLR can generate.
>
> So please don't tell people how to generate their own XML parser.
> Tell them that they are at the wrong address and should rather use a
> pre-built XML parser. It's always the same - the old lex/yacc people
> who think "I need to parse something" and start off with a compiler
> toolkit, trying to solve the same problems over and over again. And
> then they fail and complain about XML being complex because they
> didn't get Unicode or Entities right ...
>
> Martin
>
> Am 02.08.2006 um 19:33 schrieb Oliver Zeigermann:
>
> > Hi folks!
> >
> > I finished the first part of my Parsing XML using ANTLR3 tutorial:
> >
> > http://www.antlr.org/wiki/display/ANTLR3/Parsing+XML
> >
> > And the first part:
> >
> > http://www.antlr.org/wiki/display/ANTLR3/Lexer
> >
> > However, and most frustrating the Wiki made a mess of that page that I
> > could not even fix after an hour of work :( :( :( I keep trying to
> > find a solution, any hints highly appreciated.
> >
> > Anyway, because of this I have the intro and the first part on lexing
> > here as well:
> >
> > http://zeigermann.de/antlr/Intro.html
> > http://zeigermann.de/antlr/Lexing.html
> >
> > Comments/Improvements on the tutorial itself are highly welcome. Are
> > the most important questions answered? Can you even follow? Is this
> > complete crap? Let me know :)
> >
> > Also, stay tuned for the next part parsing which I am already
> > working on.
> >
> > Cheers
> >
> > Oliver
> >
>
>
From mail at martin-probst.com  Thu Aug  3 02:05:06 2006
From: mail at martin-probst.com (Martin Probst)
Date: Thu Aug  3 02:05:14 2006
Subject: [antlr-interest] ANTLR3 tutorial
In-Reply-To: <9da4f4520608030146o421a98ffj526c8fe8817a0984@mail.gmail.com>
References: <9da4f4520608021033q6f36ebd6id7b12624db4f3ee4@mail.gmail.com>
	<625BB298-B36F-4F57-9D93-8793D35CB329@martin-probst.com>
	<9da4f4520608030146o421a98ffj526c8fe8817a0984@mail.gmail.com>
Message-ID: <586AB118-98F7-491E-8DFC-2C006153D8DF@martin-probst.com>

Hi,

did I sound rude or something? Sorry, I didn't mean too. However I  
think it's quite important to educate new users about the scope of  
tools such as ANTLR, I have the feeling that quite some people use  
ANTLR and actually make their life more difficult with it (e.g.  
parsing CSV files).

> If you think this isn't obvious, why don't you add something like a
> warning to the front page of the tutorial? I wouldn't mind.

Eh, another web site login to remember. Well, it's there now ;-)

Regards,
Martin
From mail at martin-probst.com  Thu Aug  3 02:08:59 2006
From: mail at martin-probst.com (Martin Probst)
Date: Thu Aug  3 02:09:04 2006
Subject: [antlr-interest] ANTLR3 tutorial
In-Reply-To: <ebc876d70608030154p6adfdfe8ha4b47546e6fc3272@mail.gmail.com>
References: <9da4f4520608021033q6f36ebd6id7b12624db4f3ee4@mail.gmail.com>
	<625BB298-B36F-4F57-9D93-8793D35CB329@martin-probst.com>
	<ebc876d70608030154p6adfdfe8ha4b47546e6fc3272@mail.gmail.com>
Message-ID: <8625CEA4-1855-4667-932B-B7A82BE0DA42@martin-probst.com>

> I think you are correct though that you should be
> careful that this is a better method than the many available binding
> methods. But I think there are some cases where this is warranted. If
> you have a more complicated schema (constraints not expressible in an
> XSD would be the ultimate example) that doesn't map so easily to the
> object model you want for instance. And if you want to support
> multiple languages then this seems as good a candidate as any other
> proprietary binding mechanism.

There are certainly cases where these XML beans alike tools fail, and  
that XML Schema was a bad idea is not new to anyone ...

The point is, it's somewhat like with the magic rule of optimisation:
1. Don't do it
2. (For real experts) Do it later

If you fancy writing your own XML parser
1. Don't do it
2. (For real experts) Only do it if you've tried everything else

Martin
From tbrandonau at gmail.com  Thu Aug  3 02:10:05 2006
From: tbrandonau at gmail.com (Thomas Brandon)
Date: Thu Aug  3 02:10:08 2006
Subject: [antlr-interest] ANTLR3 tutorial
In-Reply-To: <625BB298-B36F-4F57-9D93-8793D35CB329@martin-probst.com>
References: <9da4f4520608021033q6f36ebd6id7b12624db4f3ee4@mail.gmail.com>
	<625BB298-B36F-4F57-9D93-8793D35CB329@martin-probst.com>
Message-ID: <ebc876d70608030210o68657e85tcaa4c7948e5bfcf9@mail.gmail.com>

On 8/3/06, Martin Probst <mail@martin-probst.com> wrote:
> Hi,
> Third, and if you really know what you are doing (ie. have spent
> years on XML and have a very specific case in which everything is
> different. This is almost certainly not you, whoever might read
> this :-) ), then don't start by writing an XML lexer, but rather use
> an existing one, e.g. any SAX parser you like. Then use that one as
> the lexer, convert the events to tokens, and implement the
> appropriate ANTLR interface.

Or check out ANTXR (http://www.javadude.com/tools/antxr/index.html)
(by Scott Stanchfield) which implements Antlr over a SAX backend as
you describe. I think you are correct though that you should be
careful that this is a better method than the many available binding
methods. But I think there are some cases where this is warranted. If
you have a more complicated schema (constraints not expressible in an
XSD would be the ultimate example) that doesn't map so easily to the
object model you want for instance. And if you want to support
multiple languages then this seems as good a candidate as any other
proprietary binding mechanism.

Tom.
>
> Martin
From 14.08.99 at gmx.de  Thu Aug  3 05:12:19 2006
From: 14.08.99 at gmx.de (Guido)
Date: Thu Aug  3 05:12:44 2006
Subject: [antlr-interest] Hello & Parsing an AST
In-Reply-To: <94288867-AAE5-40CF-B826-1DF75D6EFE4B@classdump.org>
References: <44D092BE.2080403@gmx.de>
	<94288867-AAE5-40CF-B826-1DF75D6EFE4B@classdump.org>
Message-ID: <44D1E823.80101@gmx.de>

Hi,

1.
ty@Kay for the links... I think I managed to get some knowledge (!?)

2.
Is it possible to add some conetent to the constuctor of my TreeParser 
within the *.g-File (so I don't have to change the TreeParser every time 
I compiled the grammar)?

is:
     public GTDLTreeParser() {
         tokenNames = _tokenNames;
     }

wanted:
     public GTDLTreeParser() {
         tokenNames = _tokenNames;
         Document doc = new Document(...);
     }

Greets,
Guido

From herumor at fastwebnet.it  Thu Aug  3 05:29:33 2006
From: herumor at fastwebnet.it (Herumor)
Date: Thu Aug  3 05:29:38 2006
Subject: [antlr-interest] Cannot find symbol stuff
In-Reply-To: <6CD78331-5858-4607-A148-CB2E67089100@classdump.org>
References: <44D0D714.5060309@fastwebnet.it>
	<6CD78331-5858-4607-A148-CB2E67089100@classdump.org>
Message-ID: <44D1EC2D.4050006@fastwebnet.it>

Thx a lot for your solution it fixed the problem.
Now I'm having a look at the webpage you linked.
> Hi!
>
> On 2. Aug 2006, at 18:47 Uhr, Herumor wrote:
>
>> NUMBERS : ('0' | '1'..'9' ('0'..'9')*) ('.' {_ttype = DOT;} ('0'..'9')+
>> {$setType(DEC_NUMBERS);})? ;
>
> What is the lexer supposed to return for the NUMBERS rule?
> The parser would either see NUMBERS or DEC_NUMBERS, depending on
> whether the lexer sees '.' ('0'..'9') or not.
> The DOT type would never be used in this case anyway, because the
> token type will be set to DEC_NUMBERS if the
> optional part matches.
> Seems to me that you'd need to rethink your approach to lexing NUMBERS.
>
> To the token types DOT and DEC_NUMBERS:
> They are not defined in the lexer grammar, so the lexer wouldn't know
> about them. Consequently they cannot be in
> its vocabulary. I'm not sure whether you can use a 'tokens' section in
> a lexer (I guess not) but you could add a
> empty protected rule DEC_NUMBERS. DOT I would define as a bona-fide
> token rule, since that's what you use it as.
>
> So, adding
>
> protected
> DEC_NUMBERS: ;
>
> and
>
> DOT : '.';
>
> should work. Then you can rewrite your NUMBERS rule like:
>
> NUMBERS : ('0' | '1'..'9' ('0'..'9')*) (DOT ('0'..'9')+
> {$setType(DEC_NUMBERS);})? ;
>
> but I'd do it a bit differently (see the archives for a lot of
> solutions to this. E.g. search for the thread
> "Please advise about float" from September, 19th 2005.)
> -->
> http://www.antlr.org/pipermail/antlr-interest/2005-September/thread.html
>
>
> HTH,
>
> -k
>

From Abhijit_Ghonge at infosys.com  Thu Aug  3 05:37:45 2006
From: Abhijit_Ghonge at infosys.com (Abhijit Nandkumar Ghonge)
Date: Thu Aug  3 05:38:19 2006
Subject: [antlr-interest] keywords
Message-ID: <D72A054DF5002D4FA6CF14252F7997B8D97DE0@BLRKECMSG13.ad.infosys.com>


Hi,

            I'm a newbie in Antlr. I have a grammer that uses keywords
like if , while and so on . But all of these are case insensitive. If I
directly use these in my parser as literals, can they be case
insensitive.

            Right now I have defined the keywords in the lexer with
options caseSensitive set to false. E.g



options{

       k = 6;

    testLiterals = false;

    caseSensitive = false;

    caseSensitiveLiterals = false;

    charVocabulary = '\3'..'\377'; // extended ASCII (3-255 in octal
notation)

}





 /*================LANGUAGE STRUCTURE===================*/



ENDIF  :      "endif" ;



THEN   :      "then" ;



ELSE   :      "else" ;



WHILE  :      "while" ;



IF            :      "if" ;



DO            :      "do" ;



GOTO   :      "goto" ;



PRINT  :      "print"       ;



       But the problem is that, the antlr cannot differentiate between
the keywords and the LITERAL token defined:



protected

VALID_ID_CHARS options { testLiterals = true;}

       :      ('a'..'z' | '_')

       ;



protected

CHARLITERAL options { testLiterals = true;}

       :      ('a'..'z' | '_' | '0'..'9' |'@'| '$')

       ;





LITERAL     options { testLiterals = true;}

      :     VALID_ID_CHARS (CHARLITERAL)*

      ;



Can I use my keywords as literals directly in the parser and still
manage to make them case insensitive. Please help.



Abhijit.



**************** CAUTION - Disclaimer *****************
This e-mail contains PRIVILEGED AND CONFIDENTIAL INFORMATION intended solely for the use of the addressee(s). If you are not the intended recipient, please notify the sender by e-mail and delete the original message. Further, you are not to copy, disclose, or distribute this e-mail or its contents to any other person and any such actions are unlawful. This e-mail may contain viruses. Infosys has taken every reasonable precaution to minimize this risk, but is not liable for any damage you may sustain as a result of any virus in this e-mail. You should carry out your own virus checks before opening the e-mail or attachment. Infosys reserves the right to monitor and review the content of all messages sent to or from this e-mail address. Messages sent to or from this e-mail address may be stored on the Infosys e-mail system.
***INFOSYS******** End of Disclaimer ********INFOSYS***
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060803/531ab2f5/attachment-0001.html
From tbrandonau at gmail.com  Thu Aug  3 05:49:47 2006
From: tbrandonau at gmail.com (Thomas Brandon)
Date: Thu Aug  3 05:49:51 2006
Subject: [antlr-interest] keywords
In-Reply-To: <D72A054DF5002D4FA6CF14252F7997B8D97DE0@BLRKECMSG13.ad.infosys.com>
References: <D72A054DF5002D4FA6CF14252F7997B8D97DE0@BLRKECMSG13.ad.infosys.com>
Message-ID: <ebc876d70608030549m2cece818w782af80cd8ddd528@mail.gmail.com>

On 8/3/06, Abhijit Nandkumar Ghonge <Abhijit_Ghonge@infosys.com> wrote:
>
> Hi,Can I use my keywords as literals directly in the parser and still manage to make them
> case insensitive. Please help.
>
> Abhijit.
>
>
Looks like you need to setup you vocabularies properly. Check out the
docs on token vocabularies and the importVocab\exportVocab options.
IIRC you would set exportVocab=MyLang in both the parser and lexer if
they are defined in one file but I could be wrong there.

Tom.
From jbb at acm.org  Thu Aug  3 06:42:21 2006
From: jbb at acm.org (John B. Brodie)
Date: Thu Aug  3 06:42:26 2006
Subject: [antlr-interest] Unexpected results from an antlr parser
In-Reply-To: <44D18312.90709@ineighborhood.info> (message from Jeff Prickett
	on Thu, 03 Aug 2006 01:01:06 -0400)
References: <44D18312.90709@ineighborhood.info>
Message-ID: <E1G8dSv-0003bb-00@gecko>

Jeff Pickett asked:
>Hello,
>
>I am attempting to write a parser to parse the mozilla mork grammar. I 
>am having problems.
>In the first part of the file is usually a dictionary where data (or 
>cells) are encoded between parenthesis like this
>
>...(hexId=value)...
>
>Everything works fine up to the equals sign and then it fails to match 
>the value.
>
>The output of the program is:
>...snipped...

Hi!

You have a naming mismatch between your parser and your lexer...  Your
parser expects a LITERAL_1 yet your lexer produces a LITERALS_1.

From jbb at acm.org  Thu Aug  3 06:52:11 2006
From: jbb at acm.org (John B. Brodie)
Date: Thu Aug  3 06:52:18 2006
Subject: [antlr-interest] keywords
In-Reply-To: <D72A054DF5002D4FA6CF14252F7997B8D97DE0@BLRKECMSG13.ad.infosys.com>
	(message from Abhijit Nandkumar Ghonge on Thu, 03 Aug 2006 18:07:45
	+0530)
References: <D72A054DF5002D4FA6CF14252F7997B8D97DE0@BLRKECMSG13.ad.infosys.com>
Message-ID: <E1G8dcR-0003ck-00@gecko>

Abhijit Nandkumar Ghonge asked:
>Hi,
>
>            I'm a newbie in Antlr. I have a grammer that uses keywords
>like if , while and so on . But all of these are case insensitive. If I
>directly use these in my parser as literals, can they be case
>insensitive.
>
>            Right now I have defined the keywords in the lexer with
>options caseSensitive set to false. E.g
>...snipped...

Hi!

For Antlr v2 you should define your keywords in a tokens section
rather than defining them in individual rules. Something like:

tokens {
   ENDIF = "endif";
   THEN = "then";
// ... and the rest of the keywords go here ...
}

Also you want the `options { testLiterals = true; }` phrase on just
the LITERAL rule and not on its protected sub-rules.

Hope this helps...
   -jbb
From parrt at cs.usfca.edu  Thu Aug  3 08:12:34 2006
From: parrt at cs.usfca.edu (Terence Parr)
Date: Thu Aug  3 08:12:38 2006
Subject: [antlr-interest] ANTLR3 tutorial
In-Reply-To: <625BB298-B36F-4F57-9D93-8793D35CB329@martin-probst.com>
References: <9da4f4520608021033q6f36ebd6id7b12624db4f3ee4@mail.gmail.com>
	<625BB298-B36F-4F57-9D93-8793D35CB329@martin-probst.com>
Message-ID: <850C5CC6-A193-4797-82D8-C4A378DD2662@cs.usfca.edu>

On Aug 3, 2006, at 1:30 AM, Martin Probst wrote:
> First, you should at all times avoid tricking people into writing a  
> parser for XML. There is absolutely no reason for this. None  
> whatsoever. There are XML parsers out there for all languages and a  
> variety of different profiles, SAX, DOM, XML Pull, whatever. They  
> are highly optimized and it's extremely unlikely you get something  
> faster using ANTLR.

Actually, for a specific DTD I can beat any general thingie...plus  
those tools are typical memory pigs are I thought were known to be  
slow! ;)

Ter

From naveed_jee at yahoo.com  Thu Aug  3 09:07:30 2006
From: naveed_jee at yahoo.com (naveed riaz)
Date: Thu Aug  3 09:07:35 2006
Subject: [antlr-interest] Problem with Tree grammar
Message-ID: <20060803160731.14347.qmail@web34209.mail.mud.yahoo.com>

I am using the following tree grammar ,
class VerilogParser extends Parser;
options{
k = 2;                        // two token lookahead
exportVocab = Verilog;
defaultErrorHandler = false;
buildAST = true;       // Call its vocabulary
"Verilog"
}
tokens{
MODULE_NAME;}

source_text :
        ( description )*
    EOF!
        ;

description :
        module
            ;

module options {defaultErrorHandler = true;} :
        p:"module"^ {#p.setType(MODULE_NAME);} 
         name_of_module   ( list_of_ports )? SEMI!
    "endmodule"!
        ;

list_of_ports :
        LPAREN! port ( COMMA^ port )* RPAREN!
        ;

port :
    (port_expression)?
 |
        DOT! name_of_port LPAREN! (port_expression)?
RPAREN!
    ;

port_expression :
        port_reference |
    LBRACE! port_reference ( COMMA^ port_reference )*
RBRACE!
        ;
port_reference :
        ( name_of_variable LBRACK expression COLON )
=>
        name_of_variable LBRACK! expression! COLON!
expression! RBRACK |
        ( name_of_variable LBRACK ) =>
        name_of_variable LBRACK! expression RBRACK |
        name_of_variable
    ;
expression: (|)
;
name_of_module :            local_identifier ;
name_of_port   :             local_identifier;
name_of_variable: local_identifier ;
local_identifier :
        IDENTIFIER
        ;


When i give the input 
module d_ff ( d, clk, q, q_bar);
The parser works fine but it does not show any tree
structure.....Whats the cause???whats faulty in grammar..


 




		
___________________________________________________________ 
Copy addresses and emails from any email account to Yahoo! Mail - quick, easy and free. http://uk.docs.yahoo.com/trueswitch2.html
From swalton at cs.utah.edu  Thu Aug  3 10:24:17 2006
From: swalton at cs.utah.edu (Sean Walton)
Date: Thu Aug  3 10:24:22 2006
Subject: [antlr-interest] (ANTLR3): Inheriting CommonTree??
Message-ID: <44D23141.3090800@cs.utah.edu>

How do I use "Commontree" to generate the tree?  "Mantra" defines 
MantraAST (inherits CommonTree) and provides several public fields, but 
I can't find what and how fields are used in ANTLR3 java files.
Help.
-Sean
From james_cataldo at agilent.com  Thu Aug  3 11:49:26 2006
From: james_cataldo at agilent.com (james_cataldo@agilent.com)
Date: Thu Aug  3 11:49:34 2006
Subject: [antlr-interest] input vs. output ASTs in a tree parser
Message-ID: <6F94DB018DCB9E4AB34E7FE503AF2B168BFD19@wcosmb05.cos.agilent.com>

Hi Folks,

Suppose I have the following very basic tree parser:

> class FooParser extends TreeParser;
>
> options {
>     importVocab = Foo;
>     buildAST = true;
> }
> 
> parent!
> :
>     #(PARENT childLabel:child
>         {#parent = #childLabel;}
>     )
> ;
>
> child!
> :
>     #(CHILD barLabel:BAR
>         {#child = #barLabel;}
>     )
> ;

If I give as input to the parent() method of FooParser a tree of type
> #(PARENT #(CHILD BAR))
does the output of FooPrarser.getAST() return a tree of type
> #(CHILD BAR)
or a tree of type
> #(BAR)

In other words, does #childLabel refer to the input AST parsed by the child subrule or the output AST generated by the child subrule?

Cheers,
Adam Cataldo
From Erik.Putrycz at nrc-cnrc.gc.ca  Thu Aug  3 12:54:23 2006
From: Erik.Putrycz at nrc-cnrc.gc.ca (Putrycz, Erik)
Date: Thu Aug  3 12:54:28 2006
Subject: [antlr-interest] parsing Java 5... bug?
In-Reply-To: <44D1A396.2020606@gmx.net>
Message-ID: <E4D07AB09F5F044299333C8D0FEB45E9028D642D@nrccenexb1.nrc.ca>

I've been trying 
"Java 1.5 + Java preprocessor
Luca Colombi Fri May 12, 2006 10:46
The grammar submitted by Michael Studman and revised by Scott
Wisniewski, adapted to compile without error also in eclipse with antlr
plugin and jdk 1.5, and the java preprocessor ported in Java as a
subclass of Reader."

This is weird... This grammar throws errors even with an empty class.

Erik Putrycz, Ph.D - Research Associate / erik.putrycz@nrc-cnrc.gc.ca /
(613) 990 0681
Institute for Information Technology - Software Engineering Group
National Research Council, Canada - Building M-50, 1200 Montreal Road
Ottawa, Ontario, CANADA K1A 0R6


-----Original Message-----
From: Dieter Frej [mailto:dieter_frej@gmx.net] 
Sent: August 3, 2006 3:20
To: Putrycz, Erik
Cc: antlr-interest@antlr.org
Subject: Re: [antlr-interest] parsing Java 5... bug?


which grammar are you using?

- Didi



Putrycz, Erik wrote:
> I've been running into some strange issues while trying to parse java 
> 5...
> I tried the most recent version that comes with a java preprocessor
> 
> Character.isLetter(LA(1))
> 
>             at nrc.uml2.antlr.JavaLexer.mID_START(JavaLexer.java:1390)
> 
>             at nrc.uml2.antlr.JavaLexer.mIDENT(JavaLexer.java:1449)
> 
>             at nrc.uml2.antlr.JavaLexer.nextToken(JavaLexer.java:368)
> 
>             at antlr.TokenBuffer.fill(TokenBuffer.java:69)
> 
>             at antlr.TokenBuffer.LA(TokenBuffer.java:80)
> 
>             at antlr.LLkParser.LA(LLkParser.java:52)
> 
>             at
> nrc.uml2.antlr.JavaRecognizer.compilationUnit(JavaRecognizer.java:296)
> 
> ...
> 
>  
> 
> My input is very simple:
> 
> package simple;
> 
>  
> 
> public class BR {
> 
>  
> 
>             public void runMe() {
> 
>                         int result = 1;
> 
>                         for (int il = 0;il < 100;il++) {
> 
>                                     result = result + il;
> 
>                         }
> 
>                         if (result > 5)
> 
>                                     System.out.println("check");
> 
>             }
> 
> }
> 
>  
> 
> Is this a bug in the grammar or something else?
> 
>  
> 
> **Erik Putrycz, Ph.D - Research Associate /
> ****erik.putrycz@nrc-cnrc.gc.ca** 
> <mailto:erik.putrycz@nrc-cnrc.gc.ca>** / (613) 990 0681**
> 
> Institute for Information Technology - Software Engineering Group
> 
> National Research Council, Canada - Building M-50, 1200 Montreal Road
> 
> Ottawa, Ontario, CANADA K1A 0R6
> 
>  
> 

From james_cataldo at agilent.com  Thu Aug  3 13:18:18 2006
From: james_cataldo at agilent.com (james_cataldo@agilent.com)
Date: Thu Aug  3 13:18:25 2006
Subject: [antlr-interest] input vs. output ASTs in a tree parser
Message-ID: <6F94DB018DCB9E4AB34E7FE503AF2B168BFD6B@wcosmb05.cos.agilent.com>

I answered my own quesiton by running a test.  It appears that the output is

> #(BAR)

Cheers,
Adam Cataldo

-----Original Message-----
From: antlr-interest-bounces@antlr.org [mailto:antlr-interest-bounces@antlr.org] On Behalf Of james_cataldo@agilent.com
Sent: Thursday, August 03, 2006 11:49 AM
To: antlr-interest@antlr.org
Subject: [antlr-interest] input vs. output ASTs in a tree parser

Hi Folks,

Suppose I have the following very basic tree parser:

> class FooParser extends TreeParser;
>
> options {
>     importVocab = Foo;
>     buildAST = true;
> }
> 
> parent!
> :
>     #(PARENT childLabel:child
>         {#parent = #childLabel;}
>     )
> ;
>
> child!
> :
>     #(CHILD barLabel:BAR
>         {#child = #barLabel;}
>     )
> ;

If I give as input to the parent() method of FooParser a tree of type
> #(PARENT #(CHILD BAR))
does the output of FooPrarser.getAST() return a tree of type
> #(CHILD BAR)
or a tree of type
> #(BAR)

In other words, does #childLabel refer to the input AST parsed by the child subrule or the output AST generated by the child subrule?

Cheers,
Adam Cataldo
From mail at martin-probst.com  Thu Aug  3 13:18:50 2006
From: mail at martin-probst.com (Martin Probst)
Date: Thu Aug  3 13:18:58 2006
Subject: [antlr-interest] ANTLR3 tutorial
In-Reply-To: <850C5CC6-A193-4797-82D8-C4A378DD2662@cs.usfca.edu>
References: <9da4f4520608021033q6f36ebd6id7b12624db4f3ee4@mail.gmail.com>
	<625BB298-B36F-4F57-9D93-8793D35CB329@martin-probst.com>
	<850C5CC6-A193-4797-82D8-C4A378DD2662@cs.usfca.edu>
Message-ID: <9EED308E-663E-4C38-BA2F-6C8355630A08@martin-probst.com>

Hi,

>> First, you should at all times avoid tricking people into writing  
>> a parser for XML. There is absolutely no reason for this. None  
>> whatsoever. There are XML parsers out there for all languages and  
>> a variety of different profiles, SAX, DOM, XML Pull, whatever.  
>> They are highly optimized and it's extremely unlikely you get  
>> something faster using ANTLR.
>
> Actually, for a specific DTD I can beat any general thingie...plus  
> those tools are typical memory pigs are I thought were known to be  
> slow! ;)

Well, that depends largely on what you have. E.g. a SAX parser, which  
is actually more of a lexer, will be very hard to beat. And the  
automata that are constructed by schema typed things shouldn't be all  
that slow either. What do you mean with "those tools"? DOM is  
actually quite a memory hog, but in almost all use cases you don't  
really need it.

Martin


From endigitalmind at yahoo.co.uk  Thu Aug  3 13:36:38 2006
From: endigitalmind at yahoo.co.uk (Phil Ritchie)
Date: Thu Aug  3 13:36:42 2006
Subject: [antlr-interest] ANTLR3 tutorial
In-Reply-To: <9da4f4520608021033q6f36ebd6id7b12624db4f3ee4@mail.gmail.com>
Message-ID: <20060803203638.85576.qmail@web25804.mail.ukl.yahoo.com>

Great tutorial Oliver. Look forward to the next episode!
 
Phil.

----- Original Message ----
From: Oliver Zeigermann <oliver.zeigermann@gmail.com>
To: Antlr Interest <antlr-interest@antlr.org>
Sent: Wednesday, 2 August, 2006 6:33:41 PM
Subject: [antlr-interest] ANTLR3 tutorial


Hi folks!

I finished the first part of my Parsing XML using ANTLR3 tutorial:

http://www.antlr.org/wiki/display/ANTLR3/Parsing+XML

And the first part:

http://www.antlr.org/wiki/display/ANTLR3/Lexer

However, and most frustrating the Wiki made a mess of that page that I
could not even fix after an hour of work :( :( :( I keep trying to
find a solution, any hints highly appreciated.

Anyway, because of this I have the intro and the first part on lexing
here as well:

http://zeigermann.de/antlr/Intro.html
http://zeigermann.de/antlr/Lexing.html

Comments/Improvements on the tutorial itself are highly welcome. Are
the most important questions answered? Can you even follow? Is this
complete crap? Let me know :)

Also, stay tuned for the next part parsing which I am already working on.

Cheers

Oliver
From Abhijit_Ghonge at infosys.com  Thu Aug  3 23:23:50 2006
From: Abhijit_Ghonge at infosys.com (Abhijit Nandkumar Ghonge)
Date: Thu Aug  3 23:26:05 2006
Subject: [antlr-interest] keywords
Message-ID: <D72A054DF5002D4FA6CF14252F7997B8D97DE1@BLRKECMSG13.ad.infosys.com>


Abhijit Nandkumar Ghonge asked:
>Hi,
>
>            I'm a newbie in Antlr. I have a grammer that uses keywords
>like if , while and so on . But all of these are case insensitive. If I
>directly use these in my parser as literals, can they be case
>insensitive.
>
>            Right now I have defined the keywords in the lexer with
>options caseSensitive set to false. E.g
>...snipped...

Hi!

For Antlr v2 you should define your keywords in a tokens section
rather than defining them in individual rules. Something like:

tokens {
   ENDIF = "endif";
   THEN = "then";
// ... and the rest of the keywords go here ...
}

Also you want the `options { testLiterals = true; }` phrase on just
the LITERAL rule and not on its protected sub-rules.

   -jbb


Hi John,
	I put all my keywords in the tokens section. Now its giving me
this error:

unexpected char: 'i'

at position of if statement. I tried to debug in Antlr Studio, the
control enters the assignmentstmnt instead of the ifstmnt and throws the
error.


Abhijit.


**************** CAUTION - Disclaimer *****************
This e-mail contains PRIVILEGED AND CONFIDENTIAL INFORMATION intended solely for the use of the addressee(s). If you are not the intended recipient, please notify the sender by e-mail and delete the original message. Further, you are not to copy, disclose, or distribute this e-mail or its contents to any other person and any such actions are unlawful. This e-mail may contain viruses. Infosys has taken every reasonable precaution to minimize this risk, but is not liable for any damage you may sustain as a result of any virus in this e-mail. You should carry out your own virus checks before opening the e-mail or attachment. Infosys reserves the right to monitor and review the content of all messages sent to or from this e-mail address. Messages sent to or from this e-mail address may be stored on the Infosys e-mail system.
***INFOSYS******** End of Disclaimer ********INFOSYS***
From david.crosson at wanadoo.fr  Fri Aug  4 02:08:07 2006
From: david.crosson at wanadoo.fr (David CROSSON)
Date: Fri Aug  4 02:08:12 2006
Subject: [antlr-interest] ANTLR 3.0b3 : Bug ? Rule action executed when
 filter=false but not when filter=true...
Message-ID: <16523518.1154682487742.JavaMail.www@wwinf1611>

Hello,
From david.crosson at wanadoo.fr  Fri Aug  4 02:13:41 2006
From: david.crosson at wanadoo.fr (David CROSSON)
Date: Fri Aug  4 02:13:44 2006
Subject: [antlr-interest] ANTLR 3.0b3 : Bug ? Rule actions executed when
 filter=false but not when filter=true...
Message-ID: <8486472.1154682821414.JavaMail.www@wwinf1617>

Hello,
  sorry for posting again this message, but I don't see why
using the same data, rule and token actions are executed when
options {filter=false}; but when I use options {filter=true}
only token actions are executed !

The following example gives :

when filter=false : 
  CALLED FROM TOKEN
  CALLED FROM TOKEN
  CALLED FROM TOKEN
  CALLED FROM RULE

when filter=true :
  CALLED FROM TOKEN
  CALLED FROM TOKEN
  CALLED FROM TOKEN



-----------------------------
  grammar TryIt2Parser;
  options {
    filter=true;
    output=AST;
  }
  go : A+ {System.out.println("CALLED FROM RULE"); }
     ;
  A : 'A' {System.out.println("CALLED FROM TOKEN");}
    ;
-----------------------------
Called from the following code :
  CharStream in = new ANTLRStringStream("AAA");
  TryIt2ParserLexer lexer = new TryIt2ParserLexer(in);
  CommonTokenStream tokens = new CommonTokenStream(lexer);
  TryIt2Parser parser = new TryIt2Parser(tokens);
  parser.go();


Regards,
David
From kroepke at classdump.org  Fri Aug  4 03:10:45 2006
From: kroepke at classdump.org (Kay Roepke)
Date: Fri Aug  4 03:10:54 2006
Subject: [antlr-interest] ANTLR 3.0b3 : Bug ? Rule actions executed when
	filter=false but not when filter=true...
In-Reply-To: <8486472.1154682821414.JavaMail.www@wwinf1617>
References: <8486472.1154682821414.JavaMail.www@wwinf1617>
Message-ID: <5007D8B5-CF25-4729-9875-1626BD38A684@classdump.org>


On 4. Aug 2006, at 11:13 Uhr, David CROSSON wrote:

>   sorry for posting again this message, but I don't see why
> using the same data, rule and token actions are executed when
> options {filter=false}; but when I use options {filter=true}
> only token actions are executed !

Hi David!

I think this is because the filter option doesn't work for parsers at  
the moment, it's on the todo list.
<http://antlr.org/wiki/display/ANTLR3/filters+and+pattern+matching+for 
+parser>

When you have a combined grammar, and specify options {filter=true;}  
the option gets set in both the parser and lexer grammars,
though for the parser this will generate incorrect code. The action  
would only be executed when the parser backtracks, which
is never happening, because it doesn't yet know how to do ;)

 From the generated TryIt2Parser.java:
	if ( backtracking==1 ) {
		System.out.println("CALLED FROM RULE");
	}

backtracking will never be incremented in the parser as it is now.  
Thus the todo entry...

If you currently want to have a filtering lexer, you would have to do  
separate grammars, not combined. I think there's currently
no way to specify options solely for the lexer in a combined grammar,  
but I have to check on that. So, e.g. this doesn't work:
-------------------------------------------
grammar foo;

options {
	output=AST;
}
lexer::options {
	filter=true;
}

a: A+;
A: 'A';
-------------------------------------------

But this does:
-------------------------------------------
   parser grammar TryIt2Parser;
   options {
     output=AST;
   }
   go : A+ {System.out.println("CALLED FROM RULE"); }
      ;
-------------------------------------------
lexer grammar TryIt2ParserLexer;
options {
   filter=true;
}
A : 'A' {System.out.println("CALLED FROM TOKEN");}
     ;
-------------------------------------------


But it sure would be nice to have, methinks. Especially one the  
parser learns to backtrack and we want to have only the lexer  
backtrack, but
still want to write a combined grammar.

-> Ter?

HTH,

-k
-- 
Kay R?pke <kroepke@classdump.org>
classdump Software


From srinivasan.subramanian at tcs.com  Fri Aug  4 03:08:23 2006
From: srinivasan.subramanian at tcs.com (srinivasan.subramanian@tcs.com)
Date: Fri Aug  4 03:11:36 2006
Subject: [antlr-interest] Unicode Support
Message-ID: <OFB22A8E20.B33614DF-ON652571C0.0037745E-652571C0.0037F9ED@tcs.com>

Hi,

Can anyone please tell me How to make antlr recognize unicode characters 
(for eg.Japanese characters) in Lexer in ANTLR? 
Any direction in this regard will be of great help.

Regards,
Srinivasan Subramanian
Assistant Systems Engineer
Tata Consultancy Services Limited
Mailto: srinivasan.subramanian@tcs.com
Website: http://www.tcs.com
=====-----=====-----=====
Notice: The information contained in this e-mail
message and/or attachments to it may contain 
confidential or privileged information. If you are 
not the intended recipient, any dissemination, use, 
review, distribution, printing or copying of the 
information contained in this e-mail message 
and/or attachments to it are strictly prohibited. If 
you have received this communication in error, 
please notify us by reply e-mail or telephone and 
immediately and permanently delete the message 
and any attachments. Thank you


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060804/adeb67e6/attachment.html
From mail at martin-probst.com  Fri Aug  4 03:19:36 2006
From: mail at martin-probst.com (Martin Probst)
Date: Fri Aug  4 03:19:46 2006
Subject: [antlr-interest] Unicode Support
In-Reply-To: <OFB22A8E20.B33614DF-ON652571C0.0037745E-652571C0.0037F9ED@tcs.com>
References: <OFB22A8E20.B33614DF-ON652571C0.0037745E-652571C0.0037F9ED@tcs.com>
Message-ID: <D2D07673-354C-4416-83E6-C668DFBBF061@martin-probst.com>

Hi,

there is a Unicode example in the C++ directory, as far as I know. If  
you need help, it might be beneficial to tell the list what version  
of ANTLR your using, if your using C++ and what do you exactly mean  
by "recognizing" unicode characters? Accepting them, or checking if  
the input is valid e.g. UTF-8 or UTF-16?

Martin

Am 04.08.2006 um 12:08 schrieb srinivasan.subramanian@tcs.com:

>
> Hi,
>
> Can anyone please tell me How to make antlr recognize unicode  
> characters (for eg.Japanese characters) in Lexer in ANTLR?
> Any direction in this regard will be of great help.
>
> Regards,
> Srinivasan Subramanian
> Assistant Systems Engineer
> Tata Consultancy Services Limited
> Mailto: srinivasan.subramanian@tcs.com
> Website: http://www.tcs.com=====-----=====-----===== Notice: The  
> information contained in this e-mail message and/or attachments to  
> it may contain confidential or privileged information. If you are  
> not the intended recipient, any dissemination, use, review,  
> distribution, printing or copying of the information contained in  
> this e-mail message and/or attachments to it are strictly  
> prohibited. If you have received this communication in error,  
> please notify us by reply e-mail or telephone and immediately and  
> permanently delete the message and any attachments. Thank you

From endigitalmind at yahoo.co.uk  Fri Aug  4 03:46:02 2006
From: endigitalmind at yahoo.co.uk (Phil Ritchie)
Date: Fri Aug  4 03:46:05 2006
Subject: [antlr-interest] Syntax confirmation
Message-ID: <20060804104602.37370.qmail@web25810.mail.ukl.yahoo.com>

Am I correct in my understanding:
 
[snippet from grammar file]
file
    : rec=record -> {%file(r={$rec.text})}
    ;
 
%file corresponds to a StringTemplate template.
r corresponds to the template parameter
 
So my template could be:
 
file(r) ::= "My record = <r>"
 
From kroepke at classdump.org  Fri Aug  4 04:02:15 2006
From: kroepke at classdump.org (Kay Roepke)
Date: Fri Aug  4 04:02:26 2006
Subject: [antlr-interest] Syntax confirmation
In-Reply-To: <20060804104602.37370.qmail@web25810.mail.ukl.yahoo.com>
References: <20060804104602.37370.qmail@web25810.mail.ukl.yahoo.com>
Message-ID: <4AC3EACB-569E-4384-BECB-BCF807D61E08@classdump.org>

Hi Phil!

On 4. Aug 2006, at 12:46 Uhr, Phil Ritchie wrote:

> Am I correct in my understanding:
>
> [snippet from grammar file]
> file
>     : rec=record -> {%file(r={$rec.text})}
>     ;
>
> %file corresponds to a StringTemplate template.
> r corresponds to the template parameter

Sort of, yes.
The '->' is already a rewrite operation. So the rule must be:
file
	: rec=record -> file(r={$rec.text})
	;

This would indeed use the template you mentioned.
The % notation is for use in actions that are not part of rewrites,  
when you need to instantiate templates yourself:

file
	: rec=record {StringTemplate recTmpl = %file(r={$rec.text});}
	;

This amounts to the same thing, only it is not automatically set in  
the rule's return value.

See the cminus example in the examples <http://www.antlr.org/download/ 
examples-v3.tar.gz> for a lot of template instantiations :)
Or for a real life example look at Ter's Mantra language (<http:// 
linguamantra.org/>).

HTH,

-k

-- 
Kay R?pke <kroepke@classdump.org>
classdump Software


From henryb at ntlworld.com  Fri Aug  4 04:18:38 2006
From: henryb at ntlworld.com (Henry Butowsky)
Date: Fri Aug  4 04:18:48 2006
Subject: [antlr-interest] Custom AST Node
Message-ID: <1154690319.8428.14.camel@localhost>

Hi Guys, 
 I using  Antlr 2.7.5-6   and the cpp runtime.
 I wanted to add line number to my tree parsing error messages so I
created my own AST node called ncoAST ( following the C++ notes in
http://www.antlr.org/doc/cpp-runtime.html#_bb1 )

I have a tree parsing function  called "statements" --this calls other
tree parsing including "out" which is my c like expression evaluator
However in order to get the program to compile I have had to add 
casts where the AST nodes refer to a child or sibling e.g

       run((RefncoAST)(blk->getFirstChild()));
      var=out((RefncoAST)(exp->getFirstChild()));

I would like to sort out ncoAST so I don't have to add casts as code
like above is doted throughout my tree parser -- Im no expert in C++
Pleae help

Many thx 

Regards Henry

  

statements 
{
var_sct *var;

}
    : blk:BLOCK { 
       run((RefncoAST)(blk->getFirstChild()));
            
                }

    | exp:EXPR {
        
      if(exp->getFirstChild()->getType() == ASSIGN)
 	    cout << "Type ASSIGN " <<
exp->getFirstChild()->getFirstChild()->getText() <<endl;
      var=out((RefncoAST)(exp->getFirstChild()));
      var=nco_var_free(var);

      }
              

    | iff:IF {
      bool br;
      var_sct *var1;
      RefncoAST ex;      
	  //Calculate logical expression
	  var1= out( iff->getFirstChild());
	  br=ncap_var_lgcl(var1);
	  var1=nco_var_free(var1);

      if(br) { 
         run(iff->getFirstChild()->getNextSibling() );    
	     }else{ 
           // See if else exists 
         ex=iff->getFirstChild()->getNextSibling()->getNextSibling(); 
         if(ex && ex->getType()==ELSE ) run(ex->getFirstChild());
       }
 
      var=(var_sct*)NULL;
      
      }


    | ELSE {

      }
    
    | def:DEFDIM {
            
        const char *dmn_nm;
        long sz;
            
        dmn_nm=def->getFirstChild()->getText().c_str();
            
        var=out(def->getFirstChild()->getNextSibling());    
        var=nco_var_cnf_typ(NC_INT,var);

        (void)cast_void_nctype(NC_INT,&var->val);
        sz=*var->val.lp;
        var=(var_sct*)nco_var_free(var);
        (void)ncap_def_dim(dmn_nm,sz,prs_arg);
     }
             

    | NULL_NODE {
            }
    ;






From 14.08.99 at gmx.de  Fri Aug  4 04:41:20 2006
From: 14.08.99 at gmx.de (Guido Schwab)
Date: Fri Aug  4 04:41:49 2006
Subject: [antlr-interest] TreeParser Prob...
Message-ID: <44D33260.4060608@gmx.de>

Hi!

Is it possible (when yes, howto) to assign the content of different 
"words" to a single string?

eg.:

input:
  TOKEN1 this is a word TOKEN2

Lexer:
  WORD : ('A'..'Z'|'a'..'z')

TreeParser:
//This does not work, I know... but s.t. that way
  sentence: #(TOKEN1 a:(WORD)+ TOKEN2)
{
  String xy = new String(a.getText());
}


Thanks,
Guido
From srinivasan.subramanian at tcs.com  Fri Aug  4 05:22:36 2006
From: srinivasan.subramanian at tcs.com (srinivasan.subramanian@tcs.com)
Date: Fri Aug  4 05:25:48 2006
Subject: [antlr-interest] Unicode Support
In-Reply-To: <D2D07673-354C-4416-83E6-C668DFBBF061@martin-probst.com>
Message-ID: <OFA3FDD41E.DCCBA4FD-ON652571C0.0043E157-652571C0.004443B4@tcs.com>

Dear Martin,
                I am using Antlr 2.7.1 and Java. I want Antlr to accept 
the japanese characters. I am not validating them. Pls tell me what i shud 
do.


Srinivasan Subramanian
Assistant Systems Engineer
Tata Consultancy Services Limited
Mailto: srinivasan.subramanian@tcs.com
Website: http://www.tcs.com



Martin Probst <mail@martin-probst.com> 
08/04/2006 03:49 PM

To
srinivasan.subramanian@tcs.com
cc
antlr-interest@antlr.org
Subject
Re: [antlr-interest] Unicode Support






Hi,

there is a Unicode example in the C++ directory, as far as I know. If 
you need help, it might be beneficial to tell the list what version 
of ANTLR your using, if your using C++ and what do you exactly mean 
by "recognizing" unicode characters? Accepting them, or checking if 
the input is valid e.g. UTF-8 or UTF-16?

Martin

Am 04.08.2006 um 12:08 schrieb srinivasan.subramanian@tcs.com:

>
> Hi,
>
> Can anyone please tell me How to make antlr recognize unicode 
> characters (for eg.Japanese characters) in Lexer in ANTLR?
> Any direction in this regard will be of great help.
>
> Regards,
> Srinivasan Subramanian
> Assistant Systems Engineer
> Tata Consultancy Services Limited
> Mailto: srinivasan.subramanian@tcs.com
> Website: http://www.tcs.com=====-----=====-----===== Notice: The 
> information contained in this e-mail message and/or attachments to 
> it may contain confidential or privileged information. If you are 
> not the intended recipient, any dissemination, use, review, 
> distribution, printing or copying of the information contained in 
> this e-mail message and/or attachments to it are strictly 
> prohibited. If you have received this communication in error, 
> please notify us by reply e-mail or telephone and immediately and 
> permanently delete the message and any attachments. Thank you

ForwardSourceID:NT00036B4E 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060804/884b0c68/attachment.html
From mail at martin-probst.com  Fri Aug  4 05:30:37 2006
From: mail at martin-probst.com (Martin Probst)
Date: Fri Aug  4 05:30:46 2006
Subject: [antlr-interest] Unicode Support
In-Reply-To: <OFA3FDD41E.DCCBA4FD-ON652571C0.0043E157-652571C0.004443B4@tcs.com>
References: <OFA3FDD41E.DCCBA4FD-ON652571C0.0043E157-652571C0.004443B4@tcs.com>
Message-ID: <8868C3F7-643B-474B-8705-0E01D717FBFE@martin-probst.com>

So did you find that example? It should be included in the  
distribution...

Am 04.08.2006 um 14:22 schrieb srinivasan.subramanian@tcs.com:

>
> Dear Martin,
>                 I am using Antlr 2.7.1 and Java. I want Antlr to  
> accept the japanese characters. I am not validating them. Pls tell  
> me what i shud do.
>
>
> Srinivasan Subramanian
> Assistant Systems Engineer
> Tata Consultancy Services Limited
> Mailto: srinivasan.subramanian@tcs.com
> Website: http://www.tcs.com
>
>
> Martin Probst <mail@martin-probst.com>
> 08/04/2006 03:49 PM
>
> To
> srinivasan.subramanian@tcs.com
> cc
> antlr-interest@antlr.org
> Subject
> Re: [antlr-interest] Unicode Support
>
>
>
>
>
> Hi,
>
> there is a Unicode example in the C++ directory, as far as I know. If
> you need help, it might be beneficial to tell the list what version
> of ANTLR your using, if your using C++ and what do you exactly mean
> by "recognizing" unicode characters? Accepting them, or checking if
> the input is valid e.g. UTF-8 or UTF-16?
>
> Martin
>
> Am 04.08.2006 um 12:08 schrieb srinivasan.subramanian@tcs.com:
>
> >
> > Hi,
> >
> > Can anyone please tell me How to make antlr recognize unicode
> > characters (for eg.Japanese characters) in Lexer in ANTLR?
> > Any direction in this regard will be of great help.
> >
> > Regards,
> > Srinivasan Subramanian
> > Assistant Systems Engineer
> > Tata Consultancy Services Limited
> > Mailto: srinivasan.subramanian@tcs.com
> > Website: http://www.tcs.com=====-----=====-----===== Notice: The
> > information contained in this e-mail message and/or attachments to
> > it may contain confidential or privileged information. If you are
> > not the intended recipient, any dissemination, use, review,
> > distribution, printing or copying of the information contained in
> > this e-mail message and/or attachments to it are strictly
> > prohibited. If you have received this communication in error,
> > please notify us by reply e-mail or telephone and immediately and
> > permanently delete the message and any attachments. Thank you
>
> ForwardSourceID:NT00036B4E

From jsamort at gmail.com  Fri Aug  4 07:14:12 2006
From: jsamort at gmail.com (Scott Amort)
Date: Fri Aug  4 07:14:18 2006
Subject: [antlr-interest] Custom AST Node
In-Reply-To: <1154690319.8428.14.camel@localhost>
References: <1154690319.8428.14.camel@localhost>
Message-ID: <44D35634.6040804@gmail.com>

Hi Henry,

Henry Butowsky wrote:
> However in order to get the program to compile I have had to add 
> casts where the AST nodes refer to a child or sibling e.g
> 
>        run((RefncoAST)(blk->getFirstChild()));
>       var=out((RefncoAST)(exp->getFirstChild()));
> 
> I would like to sort out ncoAST so I don't have to add casts as code
> like above is doted throughout my tree parser -- Im no expert in C++
> Pleae help

Unfortunately, you are stuck with casting in this situation.  The 
standard way to fix this problem would be to override getFirstChild() in 
your custom AST to have it return a RefncoAST type.  However, you will 
get a compiler error related to an invalid covariant return type in this 
case as RefncoAST is not a derived class of RefAST (a C++ requirement 
for covariant returns, i.e. a virtual function being overridden to 
return a different type).  RefAST is a typedef for ASTRefCount<AST>, and 
RefncoAST is a typedef for ASTRefCount<ncoAST>: two separate types.

Best,
Scott
From jbb at acm.org  Fri Aug  4 08:20:51 2006
From: jbb at acm.org (John B. Brodie)
Date: Fri Aug  4 08:20:56 2006
Subject: [antlr-interest] keywords
In-Reply-To: <D72A054DF5002D4FA6CF14252F7997B8D97DE1@BLRKECMSG13.ad.infosys.com>
	(message from Abhijit Nandkumar Ghonge on Fri, 04 Aug 2006 11:53:50
	+0530)
References: <D72A054DF5002D4FA6CF14252F7997B8D97DE1@BLRKECMSG13.ad.infosys.com>
Message-ID: <E1G91Tn-0001Yi-00@gecko>

Abhijit :-

You wrote:
>Hi John,
>	I put all my keywords in the tokens section. Now its giving me
>this error:
>
>unexpected char: 'i'
>
>at position of if statement. I tried to debug in Antlr Studio, the
>control enters the assignmentstmnt instead of the ifstmnt and throws the
>error.

Hi!

I do not use Antlr Studio so I can't help you interpret what it is
trying to tell you.

Do you have your lexer and parser in separate files? if so, the token
numbers expected by the parser may not be what the lexer is generating
- this is a common problem with separated grammars. my memory of this
is fuzzy, but if you have separate lexer/parser then you should have
two *TokenTypes.txt files - 1 for the parser and 1 for the lexer - the
numbers in these should match. if this is your problem you should read
the docs about import/export vocab options.

Other than that, I can not really give any more advice about your
problem without more information.

Have you tried building and then running your grammar using the
antlr.Tool's -trace switch? -trace will give you copious output
regarding the sequencing of rule application.

If the -trace doesn't help you locate the problem, then please post
the smallest possible grammar that still has the problem and we'll try
to help get it fixed.

Hope this helps...
   -jbb
From parrt at cs.usfca.edu  Fri Aug  4 09:55:19 2006
From: parrt at cs.usfca.edu (Terence Parr)
Date: Fri Aug  4 09:55:23 2006
Subject: [antlr-interest] class loaders
Message-ID: <A69E8D67-5375-44B1-9F91-5D5B40611213@cs.usfca.edu>

  hi,

we have to discuss class loaders again ;)

Currently, I load error templates like this:

ClassLoader cl = Thread.currentThread().getContextClassLoader();
InputStream is = cl.getResourceAsStream(fileName);

Jean tells me that integrating with eclipse and Intellij requires  
that the class loader of the surrounding class be used:

InputStream is = ErrorManager.class.getClassLoader 
().getResourceAsStream(fileName);

  we are not sure why but it probably has something to do with  
different versions of ANTLR visible in the class path when embedded  
in other applications.

I know hibernate and other people have asked me to correct this  
previously in ANTLR.the " correct" method was as you see first above.

   So, what is the correct answer? do we need a flag that says which  
flavor to use?

Ter
From swalton at cs.utah.edu  Fri Aug  4 09:57:51 2006
From: swalton at cs.utah.edu (Sean Walton)
Date: Fri Aug  4 09:57:54 2006
Subject: [antlr-interest] Conditional rewrite question
Message-ID: <44D37C8F.3020605@cs.utah.edu>

Does anyone know how to do a conditional rewrite?  For example:

stdc_Statement
    : stdc_LabeledStatement -> ^(STATEMENT stdc_LabeledStatement)
    | ('atomic')? stdc_CompoundStatement
    | ('atomic')? stdc_ExpressionStatement
    | ('atomic')? stdc_SelectionStatement
    | ('atomic')? stdc_IterationStatement
    | stdc_JumpStatement
    ;

I would like to make the next case (stdc_CompoundStatement) return a 
head node "STATEMENT" and "ATOMIC_STATEMENT" when it is declared 'atomic'.

-Sean
From jsamort at gmail.com  Fri Aug  4 10:04:33 2006
From: jsamort at gmail.com (Scott Amort)
Date: Fri Aug  4 10:04:40 2006
Subject: [antlr-interest] Custom AST Node
In-Reply-To: <44D35C50.5090806@ntlworld.com>
References: <1154690319.8428.14.camel@localhost> <44D35634.6040804@gmail.com>
	<44D35C50.5090806@ntlworld.com>
Message-ID: <44D37E21.8040500@gmail.com>

Hi Henry,

Henry Butowsky wrote:
>  What about if I wrote my own versions of
>   getFirstChild(),getNextChild(),getNextSibling(),
>       but changed the names slightly e.g in my derived class thus 
> avoiding the
>   "virtual contract" with the base class ?
> 
>   gFirstChild(), gNextChild() gNextSibling()

Yes, that would work, but it is a bit messy.  You would need something like:

RefncoAST
ncoAST::getNcoFirstChild() const
{
   return static_cast<RefncoAST>(antlr::BaseAST::getFirstChild());
}

You can't really avoid the cast, but you can limit the number of times 
you have to write it!

Best,
Scott
From parrt at cs.usfca.edu  Fri Aug  4 10:11:03 2006
From: parrt at cs.usfca.edu (Terence Parr)
Date: Fri Aug  4 10:11:08 2006
Subject: [antlr-interest] Conditional rewrite question
In-Reply-To: <44D37C8F.3020605@cs.utah.edu>
References: <44D37C8F.3020605@cs.utah.edu>
Message-ID: <C2D23369-FDF9-4747-B84B-F7DDD32A2D96@cs.usfca.edu>

Hi Sean,

  on page:

http://www.antlr.org/wiki/display/ANTLR3/Tree+construction

  I have a section that uses a predicate on the rewrites:

variableDefinition
	:	modifiers typename ID ('=' completeExpression)? ';'
		-> {inMethod}? ^(VARIABLE ID modifiers? typename completeExpression?)
		->             ^(FIELD ID modifiers? typename completeExpression?)
	;

Ter

On Aug 4, 2006, at 9:57 AM, Sean Walton wrote:

> Does anyone know how to do a conditional rewrite?  For example:
>
> stdc_Statement
>    : stdc_LabeledStatement -> ^(STATEMENT stdc_LabeledStatement)
>    | ('atomic')? stdc_CompoundStatement
>    | ('atomic')? stdc_ExpressionStatement
>    | ('atomic')? stdc_SelectionStatement
>    | ('atomic')? stdc_IterationStatement
>    | stdc_JumpStatement
>    ;
>
> I would like to make the next case (stdc_CompoundStatement) return  
> a head node "STATEMENT" and "ATOMIC_STATEMENT" when it is declared  
> 'atomic'.
>
> -Sean

From jhan at InfinityInfo.com  Fri Aug  4 10:25:16 2006
From: jhan at InfinityInfo.com (Jiho Han)
Date: Fri Aug  4 10:25:20 2006
Subject: [antlr-interest] String literal containing '(single quote)?
Message-ID: <89ACF43E70DC0C4B812FEA71B98CE2EE1B7F55@infsrv00.InfinityInfo.com>

Thanks!  That worked great.


________________________________

	From: Loring Craymer [mailto:lgcraymer@yahoo.com] 
	Sent: Wednesday, August 02, 2006 6:36 PM
	To: Jiho Han; antlr-interest@antlr.org
	Subject: Re: [antlr-interest] String literal containing '(single
quote)?
	
	
	Change
	 
	(~'\'')* 
	to
	 
	(
	   ( '\'' '\'' <file://\\''>  )=>  '\'' '\''
	    |    
	   ~'\''
	)*
	 
	--Loring
	
	Jiho Han <jhan@InfinityInfo.com> wrote:

		I have a string literal token defined as:
		
		STRINGLITERAL : '\'' (~'\'')* '\'' ;
		
		How can I make it so that it'll accept a doubled-up
single quotes?
		i.e.)
		
		"Conan O''Brien"
		
		Thanks
		
		Jiho Han
		Senior Software Engineer
		Infinity Info Systems
		The Sales Technology Experts
		Tel: 212.563.4400 x216
		Fax: 212.760.0540
		jhan@infinityinfo.com
		www.infinityinfo.com 
		
		
		


	__________________________________________________
	Do You Yahoo!?
	Tired of spam? Yahoo! Mail has the best spam protection around 
	http://mail.yahoo.com 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060804/69c115cf/attachment.html
From swalton at cs.utah.edu  Fri Aug  4 11:14:00 2006
From: swalton at cs.utah.edu (Sean Walton)
Date: Fri Aug  4 11:14:04 2006
Subject: [antlr-interest] Promoting root nodes
Message-ID: <44D38E68.2010208@cs.utah.edu>

I have tried this in several configurations without success:

stdc_AssignmentExpression
    : stdc_Lvalue ('='^ | '*='^ | '/='^ | '%='^ | '+='^ | '-='^ | '<<='^ 
| '>>='^ | '&='^ | '^='^ | '|='^) stdc_AssignmentExpression
    | stdc_ConditionalExpression
    ;

Instead I get:

 >java -classpath 
"antlr-3.0b3.jar;stringtemplate-2.3b9.jar;antlr-2.7.6.jar" 
org.antlr.Tool ANesC.g
ANTLR Parser Generator   Early Access Version 3.0b3 (July 21, 2006)  
1989-2006
ANesC.g:610:52: Decision can match input such as "'else'" using multiple 
alternatives: 1, 2
As a result, alternative(s) 2 were disabled for that input
internal error: ANesC.g : java.lang.IllegalArgumentException: Can't find 
template tokenRefRoot.st
org.antlr.stringtemplate.StringTemplateGroup.lookupTemplate(StringTemplateGroup.java:485)
org.antlr.stringtemplate.StringTemplateGroup.getInstanceOf(StringTemplateGroup.java:372)
org.antlr.stringtemplate.StringTemplateGroup.getInstanceOf(StringTemplateGroup.java:384)
org.antlr.codegen.CodeGenTreeWalker.getTokenElementST(CodeGenTreeWalker.java:159)
org.antlr.codegen.CodeGenTreeWalker.atom(CodeGenTreeWalker.java:1917)
org.antlr.codegen.CodeGenTreeWalker.element(CodeGenTreeWalker.java:1348)
org.antlr.codegen.CodeGenTreeWalker.alternative(CodeGenTreeWalker.java:1104)
org.antlr.codegen.CodeGenTreeWalker.block(CodeGenTreeWalker.java:988)
org.antlr.codegen.CodeGenTreeWalker.ebnf(CodeGenTreeWalker.java:2161)
org.antlr.codegen.CodeGenTreeWalker.element(CodeGenTreeWalker.java:1619)
org.antlr.codegen.CodeGenTreeWalker.alternative(CodeGenTreeWalker.java:1104)
org.antlr.codegen.CodeGenTreeWalker.block(CodeGenTreeWalker.java:988)
org.antlr.codegen.CodeGenTreeWalker.rule(CodeGenTreeWalker.java:716)
org.antlr.codegen.CodeGenTreeWalker.rules(CodeGenTreeWalker.java:507)
org.antlr.codegen.CodeGenTreeWalker.grammarSpec(CodeGenTreeWalker.java:449)
org.antlr.codegen.CodeGenTreeWalker.grammar(CodeGenTreeWalker.java:301)
org.antlr.codegen.CodeGenerator.genRecognizer(CodeGenerator.java:406)
org.antlr.Tool.processGrammar(Tool.java:320)
org.antlr.Tool.process(Tool.java:251)
org.antlr.Tool.main(Tool.java:70)

which seems to be an internal defect.  I also tried the '^^' without 
success.
Also, if a nonterminal resolves to a finite terminal list (like the 
operators above), why can't I use '^' or '^^'?
-Sean
From lgcraymer at yahoo.com  Fri Aug  4 15:56:12 2006
From: lgcraymer at yahoo.com (Loring Craymer)
Date: Fri Aug  4 15:56:16 2006
Subject: [antlr-interest] Unicode Support
In-Reply-To: <OFA3FDD41E.DCCBA4FD-ON652571C0.0043E157-652571C0.004443B4@tcs.com>
Message-ID: <20060804225613.69317.qmail@web55915.mail.re3.yahoo.com>

2.7.1 is ancient (well over 5 years old); you should upgrade to 2.7.6.  It probably will not require grammar changes, although there could be minor ones, and it should be compatible with whatever version of the JDK you are using (1.2 or better).  I believe that unicode support has improved; 2.7.1 would be the first "real" release and there were many bug fixes after that.

--Loring

srinivasan.subramanian@tcs.com wrote:  
Dear Martin, 
                I am using Antlr 2.7.1 and Java. I want Antlr to accept the japanese characters. I am not validating them. Pls tell me what i shud do. 
 

 Srinivasan Subramanian
 Assistant Systems Engineer
 Tata Consultancy Services Limited
 Mailto: srinivasan.subramanian@tcs.com
 Website: http://www.tcs.com 
 
 
   Martin Probst <mail@martin-probst.com>  08/04/2006 03:49 PM 
    To
 srinivasan.subramanian@tcs.com   cc
 antlr-interest@antlr.org   Subject
 Re: [antlr-interest] Unicode Support 
    

 
 
 
 
Hi,
 
 there is a Unicode example in the C++ directory, as far as I know. If  
 you need help, it might be beneficial to tell the list what version  
 of ANTLR your using, if your using C++ and what do you exactly mean  
 by "recognizing" unicode characters? Accepting them, or checking if  
 the input is valid e.g. UTF-8 or UTF-16?
 
 Martin
 
 Am 04.08.2006 um 12:08 schrieb srinivasan.subramanian@tcs.com:
 
 >
 > Hi,
 >
 > Can anyone please tell me How to make antlr recognize unicode  
 > characters (for eg.Japanese characters) in Lexer in ANTLR?
 > Any direction in this regard will be of great help.
 >
 > Regards,
 > Srinivasan Subramanian
 > Assistant Systems Engineer
 > Tata Consultancy Services Limited
 > Mailto: srinivasan.subramanian@tcs.com
 > Website: http://www.tcs.com=====-----=====-----===== Notice: The  
 > information contained in this e-mail message and/or attachments to  
 > it may contain confidential or privileged information. If you are  
 > not the intended recipient, any dissemination, use, review,  
 > distribution, printing or copying of the information contained in  
 > this e-mail message and/or attachments to it are strictly  
 > prohibited. If you have received this communication in error,  
 > please notify us by reply e-mail or telephone and immediately and  
 > permanently delete the message and any attachments. Thank you
  
ForwardSourceID:NT00036B4E     


 		
---------------------------------
Yahoo! Music Unlimited - Access over 1 million songs.Try it free. 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060804/db0d2e73/attachment.html
From parrt at cs.usfca.edu  Fri Aug  4 20:15:43 2006
From: parrt at cs.usfca.edu (Terence Parr)
Date: Fri Aug  4 20:15:47 2006
Subject: [antlr-interest] Promoting root nodes
In-Reply-To: <44D38E68.2010208@cs.utah.edu>
References: <44D38E68.2010208@cs.utah.edu>
Message-ID: <693070A6-61D3-4F92-B7B6-FF13FAF8942F@cs.usfca.edu>

hi.  don't mix ^ for trees and use output=template.

Ter
On Aug 4, 2006, at 11:14 AM, Sean Walton wrote:

> I have tried this in several configurations without success:
>
> stdc_AssignmentExpression
>    : stdc_Lvalue ('='^ | '*='^ | '/='^ | '%='^ | '+='^ | '-='^ |  
> '<<='^ | '>>='^ | '&='^ | '^='^ | '|='^) stdc_AssignmentExpression
>    | stdc_ConditionalExpression
>    ;
>
> Instead I get:
>
> >java -classpath  
> "antlr-3.0b3.jar;stringtemplate-2.3b9.jar;antlr-2.7.6.jar"  
> org.antlr.Tool ANesC.g
> ANTLR Parser Generator   Early Access Version 3.0b3 (July 21,  
> 2006)  1989-2006
> ANesC.g:610:52: Decision can match input such as "'else'" using  
> multiple alternatives: 1, 2
> As a result, alternative(s) 2 were disabled for that input
> internal error: ANesC.g : java.lang.IllegalArgumentException: Can't  
> find template tokenRefRoot.st
> org.antlr.stringtemplate.StringTemplateGroup.lookupTemplate 
> (StringTemplateGroup.java:485)
> org.antlr.stringtemplate.StringTemplateGroup.getInstanceOf 
> (StringTemplateGroup.java:372)
> org.antlr.stringtemplate.StringTemplateGroup.getInstanceOf 
> (StringTemplateGroup.java:384)
> org.antlr.codegen.CodeGenTreeWalker.getTokenElementST 
> (CodeGenTreeWalker.java:159)
> org.antlr.codegen.CodeGenTreeWalker.atom(CodeGenTreeWalker.java:1917)
> org.antlr.codegen.CodeGenTreeWalker.element(CodeGenTreeWalker.java: 
> 1348)
> org.antlr.codegen.CodeGenTreeWalker.alternative 
> (CodeGenTreeWalker.java:1104)
> org.antlr.codegen.CodeGenTreeWalker.block(CodeGenTreeWalker.java:988)
> org.antlr.codegen.CodeGenTreeWalker.ebnf(CodeGenTreeWalker.java:2161)
> org.antlr.codegen.CodeGenTreeWalker.element(CodeGenTreeWalker.java: 
> 1619)
> org.antlr.codegen.CodeGenTreeWalker.alternative 
> (CodeGenTreeWalker.java:1104)
> org.antlr.codegen.CodeGenTreeWalker.block(CodeGenTreeWalker.java:988)
> org.antlr.codegen.CodeGenTreeWalker.rule(CodeGenTreeWalker.java:716)
> org.antlr.codegen.CodeGenTreeWalker.rules(CodeGenTreeWalker.java:507)
> org.antlr.codegen.CodeGenTreeWalker.grammarSpec 
> (CodeGenTreeWalker.java:449)
> org.antlr.codegen.CodeGenTreeWalker.grammar(CodeGenTreeWalker.java: 
> 301)
> org.antlr.codegen.CodeGenerator.genRecognizer(CodeGenerator.java:406)
> org.antlr.Tool.processGrammar(Tool.java:320)
> org.antlr.Tool.process(Tool.java:251)
> org.antlr.Tool.main(Tool.java:70)
>
> which seems to be an internal defect.  I also tried the '^^'  
> without success.
> Also, if a nonterminal resolves to a finite terminal list (like the  
> operators above), why can't I use '^' or '^^'?
> -Sean

From parrt at cs.usfca.edu  Fri Aug  4 20:26:15 2006
From: parrt at cs.usfca.edu (Terence Parr)
Date: Fri Aug  4 20:26:19 2006
Subject: [antlr-interest] Re: [followup] Promoting root nodes
In-Reply-To: <693070A6-61D3-4F92-B7B6-FF13FAF8942F@cs.usfca.edu>
References: <44D38E68.2010208@cs.utah.edu>
	<693070A6-61D3-4F92-B7B6-FF13FAF8942F@cs.usfca.edu>
Message-ID: <F48A3008-6A76-4C72-80A5-181258CC13CE@cs.usfca.edu>

oh and sorry...forgot to mention it's on my list of stuff to fix ;)   
needs a warning not a crash.

You will need ^^ if you set output=AST

Ter
On Aug 4, 2006, at 8:15 PM, Terence Parr wrote:

> hi.  don't mix ^ for trees and use output=template.
>
> Ter
> On Aug 4, 2006, at 11:14 AM, Sean Walton wrote:
>
>> I have tried this in several configurations without success:
>>
>> stdc_AssignmentExpression
>>    : stdc_Lvalue ('='^ | '*='^ | '/='^ | '%='^ | '+='^ | '-='^ |  
>> '<<='^ | '>>='^ | '&='^ | '^='^ | '|='^) stdc_AssignmentExpression
>>    | stdc_ConditionalExpression
>>    ;
>>
>> Instead I get:
>>
>> >java -classpath  
>> "antlr-3.0b3.jar;stringtemplate-2.3b9.jar;antlr-2.7.6.jar"  
>> org.antlr.Tool ANesC.g
>> ANTLR Parser Generator   Early Access Version 3.0b3 (July 21,  
>> 2006)  1989-2006
>> ANesC.g:610:52: Decision can match input such as "'else'" using  
>> multiple alternatives: 1, 2
>> As a result, alternative(s) 2 were disabled for that input
>> internal error: ANesC.g : java.lang.IllegalArgumentException:  
>> Can't find template tokenRefRoot.st
>> org.antlr.stringtemplate.StringTemplateGroup.lookupTemplate 
>> (StringTemplateGroup.java:485)
>> org.antlr.stringtemplate.StringTemplateGroup.getInstanceOf 
>> (StringTemplateGroup.java:372)
>> org.antlr.stringtemplate.StringTemplateGroup.getInstanceOf 
>> (StringTemplateGroup.java:384)
>> org.antlr.codegen.CodeGenTreeWalker.getTokenElementST 
>> (CodeGenTreeWalker.java:159)
>> org.antlr.codegen.CodeGenTreeWalker.atom(CodeGenTreeWalker.java:1917)
>> org.antlr.codegen.CodeGenTreeWalker.element(CodeGenTreeWalker.java: 
>> 1348)
>> org.antlr.codegen.CodeGenTreeWalker.alternative 
>> (CodeGenTreeWalker.java:1104)
>> org.antlr.codegen.CodeGenTreeWalker.block(CodeGenTreeWalker.java:988)
>> org.antlr.codegen.CodeGenTreeWalker.ebnf(CodeGenTreeWalker.java:2161)
>> org.antlr.codegen.CodeGenTreeWalker.element(CodeGenTreeWalker.java: 
>> 1619)
>> org.antlr.codegen.CodeGenTreeWalker.alternative 
>> (CodeGenTreeWalker.java:1104)
>> org.antlr.codegen.CodeGenTreeWalker.block(CodeGenTreeWalker.java:988)
>> org.antlr.codegen.CodeGenTreeWalker.rule(CodeGenTreeWalker.java:716)
>> org.antlr.codegen.CodeGenTreeWalker.rules(CodeGenTreeWalker.java:507)
>> org.antlr.codegen.CodeGenTreeWalker.grammarSpec 
>> (CodeGenTreeWalker.java:449)
>> org.antlr.codegen.CodeGenTreeWalker.grammar(CodeGenTreeWalker.java: 
>> 301)
>> org.antlr.codegen.CodeGenerator.genRecognizer(CodeGenerator.java:406)
>> org.antlr.Tool.processGrammar(Tool.java:320)
>> org.antlr.Tool.process(Tool.java:251)
>> org.antlr.Tool.main(Tool.java:70)
>>
>> which seems to be an internal defect.  I also tried the '^^'  
>> without success.
>> Also, if a nonterminal resolves to a finite terminal list (like  
>> the operators above), why can't I use '^' or '^^'?
>> -Sean
>

From mail at martin-probst.com  Sat Aug  5 01:56:46 2006
From: mail at martin-probst.com (Martin Probst)
Date: Sat Aug  5 01:56:56 2006
Subject: [antlr-interest] class loaders
In-Reply-To: <A69E8D67-5375-44B1-9F91-5D5B40611213@cs.usfca.edu>
References: <A69E8D67-5375-44B1-9F91-5D5B40611213@cs.usfca.edu>
Message-ID: <DA99D8F9-9174-44E1-8738-8A88613EA62D@martin-probst.com>

Hi,

> I know hibernate and other people have asked me to correct this  
> previously in ANTLR.the " correct" method was as you see first above.
>
>   So, what is the correct answer? do we need a flag that says which  
> flavor to use?

I think the problem is indeed that there is no correct way of doing  
this. Java supports AFAIK two ways of doing this, one is the class  
loader hierarchy that is being used with Class.forName() and the  
other one is the hack with Thread.currentThread 
().getContextClassLoader(), which is used by Tomcat et al. where  
containers can set this class loader for the sub-contexts in the app.  
Both ways have their justification.

Martin

From e.papegaaij at student.utwente.nl  Sat Aug  5 02:38:22 2006
From: e.papegaaij at student.utwente.nl (Emond Papegaaij)
Date: Sat Aug  5 02:38:28 2006
Subject: [antlr-interest] Problem with AST rewrite
Message-ID: <200608051138.22739.e.papegaaij@student.utwente.nl>

Hello,

The attached grammar produces incorrect code (v3b3), which gives the following 
compile error:
  TPLLogic.java:203: cannot find symbol
  symbol  : variable list_SEMI
  location: class TPLLogic
                      list_SEMI.add(SEMI6);
                      ^

It seems to be caused by the usage of ';' in the first rule, while the second 
rule uses 'SEMI'. Is it allowed to mix these two in a single grammar?

Best regards,
Emond Papegaaij
-------------- next part --------------
grammar TPLLogic;

options { output = AST; }
tokens { IFACE_METHOD; }

nodeDecl: ( '{' body '}' | ';' );

body
	: 'iface' (SEMI | '{' METHOD_BODY_ACTION '}')
		-> ^(IFACE_METHOD METHOD_BODY_ACTION?)
	;

SEMI: ';' ;
METHOD_BODY_ACTION: 'body';
WS: ( ' ' | '\t' | '\f' | '\r' | '\n')+ { channel=99; } ;
From swalton at cs.utah.edu  Sat Aug  5 07:14:55 2006
From: swalton at cs.utah.edu (Sean Walton)
Date: Sat Aug  5 07:14:59 2006
Subject: [antlr-interest] Problem with AST rewrite
In-Reply-To: <200608051138.22739.e.papegaaij@student.utwente.nl>
References: <200608051138.22739.e.papegaaij@student.utwente.nl>
Message-ID: <44D4A7DF.2040306@cs.utah.edu>

Emond Papegaaij wrote:
> Hello,
>
> The attached grammar produces incorrect code (v3b3), which gives the following 
> compile error:
>   TPLLogic.java:203: cannot find symbol
>   symbol  : variable list_SEMI
>   location: class TPLLogic
>                       list_SEMI.add(SEMI6);
>                       ^
>
> It seems to be caused by the usage of ';' in the first rule, while the second 
> rule uses 'SEMI'. Is it allowed to mix these two in a single grammar?
>
> Best regards,
> Emond Papegaaij
>   
A quick (inexperienced) stab is the rule "symbol" needs a semicolon.  
So, 'symbol' flows into 'location' as a single rule.
-Sean Walton
From swalton at cs.utah.edu  Sat Aug  5 08:37:17 2006
From: swalton at cs.utah.edu (Sean Walton)
Date: Sat Aug  5 08:37:28 2006
Subject: [antlr-interest] (v3) Header names
Message-ID: <44D4BB2D.9040001@cs.utah.edu>

When I am rewriting some data, I would like to give some header nodes a 
string name, e.g., 'newnode':

    ... -> ^('newnode' $blah $bleah)

I also create a token for 'newnode' and give it a symbolic name:

    tokens {... NEWNODE='newnode';...}

But, when I look at the generated tree, a number appears instead (unlike 
other head nodes that use scanned token strings), and the *Lexer lists 
NEWNODE with the number but has lost the string.
Is there a way to get the original string?

-Sean
From parrt at cs.usfca.edu  Sat Aug  5 08:48:23 2006
From: parrt at cs.usfca.edu (Terence Parr)
Date: Sat Aug  5 08:48:31 2006
Subject: [antlr-interest] (v3) Header names
In-Reply-To: <44D4BB2D.9040001@cs.utah.edu>
References: <44D4BB2D.9040001@cs.utah.edu>
Message-ID: <9460B547-8E61-4FEE-908E-D3BE22A027C6@cs.usfca.edu>

Hi Sean, did you see the tree construction page?  It shows NEWNODE 
['newnode'] constructors...
Ter
On Aug 5, 2006, at 8:37 AM, Sean Walton wrote:

> When I am rewriting some data, I would like to give some header  
> nodes a string name, e.g., 'newnode':
>
>    ... -> ^('newnode' $blah $bleah)
>
> I also create a token for 'newnode' and give it a symbolic name:
>
>    tokens {... NEWNODE='newnode';...}
>
> But, when I look at the generated tree, a number appears instead  
> (unlike other head nodes that use scanned token strings), and the  
> *Lexer lists NEWNODE with the number but has lost the string.
> Is there a way to get the original string?
>
> -Sean

From swalton at cs.utah.edu  Sat Aug  5 10:13:05 2006
From: swalton at cs.utah.edu (Sean Walton)
Date: Sat Aug  5 10:13:12 2006
Subject: [antlr-interest] (v3) Token aggregation
Message-ID: <44D4D1A1.2050906@cs.utah.edu>

With a grammar such as:

path
    : id+=IDENTIFIER ('.' id+=IDENTIFIER) -> ^(PATH $id+)
    ;

Are there option incompatibilities?  Currently, when I use the $id+ in 
the AST section, I get:

ANTLR Parser Generator   Early Access Version 3.0b3 (July 21, 2006)  
1989-2006
0:0: syntax error: assign.types: <AST>:141:55: unexpected AST node: idx
0:0: syntax error: assign.types: <AST>:0:0: expecting EOB, found 
'<end-of-alt>'
0:0: syntax error: assign.types: <AST>:0:0: unexpected end of subtree
0:0: syntax error: define: <AST>:141:55: unexpected AST node: idx
0:0: syntax error: define: <AST>:0:0: expecting EOB, found '<end-of-alt>'
0:0: syntax error: define: <AST>:0:0: unexpected end of subtree
0:0: syntax error: buildnfa: <AST>:141:55: unexpected AST node: idx
internal error: ANesC.g : java.lang.NullPointerException
org.antlr.tool.NFAFactory.build_AlternativeBlock(NFAFactory.java:373)
org.antlr.tool.TreeToNFAConverter.block(TreeToNFAConverter.java:779)
org.antlr.tool.TreeToNFAConverter.rule(TreeToNFAConverter.java:548)
org.antlr.tool.TreeToNFAConverter.rules(TreeToNFAConverter.java:374)
org.antlr.tool.TreeToNFAConverter.grammarSpec(TreeToNFAConverter.java:328)
org.antlr.tool.TreeToNFAConverter.grammar(TreeToNFAConverter.java:188)
org.antlr.tool.Grammar.createNFAs(Grammar.java:677)
org.antlr.tool.Grammar.checkAllRulesForLeftRecursion(Grammar.java:1288)
org.antlr.codegen.CodeGenerator.genRecognizer(CodeGenerator.java:276)
org.antlr.Tool.processGrammar(Tool.java:320)
org.antlr.Tool.process(Tool.java:251)
org.antlr.Tool.main(Tool.java:70)

When I use $id, it "works" (but I only get the first token in the 
loop).  The grammar I adopted has "memoize" and "backtrack".  Are these 
the problem?  Also, what does "memoize" mean (it's not defined in the WIKI)?

-Sean
From kroepke at classdump.org  Sat Aug  5 10:20:19 2006
From: kroepke at classdump.org (Kay Roepke)
Date: Sat Aug  5 10:20:31 2006
Subject: [antlr-interest] (v3) Token aggregation
In-Reply-To: <44D4D1A1.2050906@cs.utah.edu>
References: <44D4D1A1.2050906@cs.utah.edu>
Message-ID: <ECFA433B-4087-4E9A-9FB4-4DA6985425E1@classdump.org>


On 5. Aug 2006, at 19:13 Uhr, Sean Walton wrote:

> Also, what does "memoize" mean (it's not defined in the WIKI)?

Can't comment on the other stuff right now, but memoize means that  
the results of parsing are stored internally, so that when backtracking
is going on specific parts that the parser has already seen and which  
productions are known from that previous parse are reused instead
of reparsed. It's essentially a caching mechanism for backtracking.

-k
-- 
Kay R?pke <kroepke@classdump.org>
classdump Software


From swalton at cs.utah.edu  Sat Aug  5 10:33:47 2006
From: swalton at cs.utah.edu (Sean Walton)
Date: Sat Aug  5 10:33:50 2006
Subject: [antlr-interest] (v3) Token aggregation
In-Reply-To: <44D4D1A1.2050906@cs.utah.edu>
References: <44D4D1A1.2050906@cs.utah.edu>
Message-ID: <44D4D67B.8050300@cs.utah.edu>

I found that the "$id+" is not available in the backtracking mode.  eeek.
-sean

Sean Walton wrote:
> With a grammar such as:
>
> path
>    : id+=IDENTIFIER ('.' id+=IDENTIFIER) -> ^(PATH $id+)
>    ;
>
> Are there option incompatibilities?  Currently, when I use the $id+ in 
> the AST section, I get:
>
> ANTLR Parser Generator   Early Access Version 3.0b3 (July 21, 2006)  
> 1989-2006
> 0:0: syntax error: assign.types: <AST>:141:55: unexpected AST node: idx
> 0:0: syntax error: assign.types: <AST>:0:0: expecting EOB, found 
> '<end-of-alt>'
> 0:0: syntax error: assign.types: <AST>:0:0: unexpected end of subtree
> 0:0: syntax error: define: <AST>:141:55: unexpected AST node: idx
> 0:0: syntax error: define: <AST>:0:0: expecting EOB, found '<end-of-alt>'
> 0:0: syntax error: define: <AST>:0:0: unexpected end of subtree
> 0:0: syntax error: buildnfa: <AST>:141:55: unexpected AST node: idx
> internal error: ANesC.g : java.lang.NullPointerException
> org.antlr.tool.NFAFactory.build_AlternativeBlock(NFAFactory.java:373)
> org.antlr.tool.TreeToNFAConverter.block(TreeToNFAConverter.java:779)
> org.antlr.tool.TreeToNFAConverter.rule(TreeToNFAConverter.java:548)
> org.antlr.tool.TreeToNFAConverter.rules(TreeToNFAConverter.java:374)
> org.antlr.tool.TreeToNFAConverter.grammarSpec(TreeToNFAConverter.java:328) 
>
> org.antlr.tool.TreeToNFAConverter.grammar(TreeToNFAConverter.java:188)
> org.antlr.tool.Grammar.createNFAs(Grammar.java:677)
> org.antlr.tool.Grammar.checkAllRulesForLeftRecursion(Grammar.java:1288)
> org.antlr.codegen.CodeGenerator.genRecognizer(CodeGenerator.java:276)
> org.antlr.Tool.processGrammar(Tool.java:320)
> org.antlr.Tool.process(Tool.java:251)
> org.antlr.Tool.main(Tool.java:70)
>
> When I use $id, it "works" (but I only get the first token in the 
> loop).  The grammar I adopted has "memoize" and "backtrack".  Are 
> these the problem?  Also, what does "memoize" mean (it's not defined 
> in the WIKI)?
>
> -Sean

From ione at citromail.hu  Sat Aug  5 10:54:20 2006
From: ione at citromail.hu (=?ISO-8859-2?Q?vak_botty=E1n?=)
Date: Sat Aug  5 10:54:20 2006
Subject: [antlr-interest] Is it possible?
Message-ID: <20060805175420.1808.qmail@server02.citromail.hu>


					Hi!I am newbie to ANTLR. Before I dig myself into it, I
would like to get some affirmation, that I am choosing the right mean
for my work. I am creating a Java program for matrix calculations (with
heavy swing support). My plan is to create a formula editor for the
matrix-operations. I would like to evaluate expressions similar to
adj(((A + B)*C^-1 - D^3)^T) where capital letters are nominating 2D
matrices and adj=adjungate, ^-1=inverse, ^n=power (where, n=0,1,2..),
^T=transpose of a matrix. In most of the cases, before executing a
matrix-operation, it has to be checked if the given operation can be
executed at all (depending on the type of the matrices). So the
operations are usually made up by
several different algorithms.What do you suggest, should I write an own expr-evaluator specific to my case, or rather use ANTLR?thx,ione



_________________________________________
H?rkeres?.hu - Mindig friss h?rek, toplist?k, szt?rpletyk?k. A legfontosabb 70 h?rforr?s k?zel 2.500 cikke naponta!Ha egy lapon akarsz mindent ?ttekinteni  KLIKK IDE! - http://www.hirkereso.hu/
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060805/4c4335f3/attachment.html
From parrt at cs.usfca.edu  Sat Aug  5 11:00:15 2006
From: parrt at cs.usfca.edu (Terence Parr)
Date: Sat Aug  5 11:00:19 2006
Subject: [antlr-interest] (v3) Token aggregation
In-Reply-To: <44D4D67B.8050300@cs.utah.edu>
References: <44D4D1A1.2050906@cs.utah.edu> <44D4D67B.8050300@cs.utah.edu>
Message-ID: <705860E1-661D-4F3B-A4FC-D1E0798BE2F3@cs.usfca.edu>

actually it's the id+=foo that has been fixed already in my version.

Note the error says idx which means it has nothing to do with the  
rule you provide.

Ter
On Aug 5, 2006, at 10:33 AM, Sean Walton wrote:

> I found that the "$id+" is not available in the backtracking mode.   
> eeek.
> -sean
>
> Sean Walton wrote:
>> With a grammar such as:
>>
>> path
>>    : id+=IDENTIFIER ('.' id+=IDENTIFIER) -> ^(PATH $id+)
>>    ;
>>
>> Are there option incompatibilities?  Currently, when I use the $id 
>> + in the AST section, I get:
>>
>> ANTLR Parser Generator   Early Access Version 3.0b3 (July 21,  
>> 2006)  1989-2006
>> 0:0: syntax error: assign.types: <AST>:141:55: unexpected AST  
>> node: idx
>> 0:0: syntax error: assign.types: <AST>:0:0: expecting EOB, found  
>> '<end-of-alt>'
>> 0:0: syntax error: assign.types: <AST>:0:0: unexpected end of subtree
>> 0:0: syntax error: define: <AST>:141:55: unexpected AST node: idx
>> 0:0: syntax error: define: <AST>:0:0: expecting EOB, found '<end- 
>> of-alt>'
>> 0:0: syntax error: define: <AST>:0:0: unexpected end of subtree
>> 0:0: syntax error: buildnfa: <AST>:141:55: unexpected AST node: idx
>> internal error: ANesC.g : java.lang.NullPointerException
>> org.antlr.tool.NFAFactory.build_AlternativeBlock(NFAFactory.java:373)
>> org.antlr.tool.TreeToNFAConverter.block(TreeToNFAConverter.java:779)
>> org.antlr.tool.TreeToNFAConverter.rule(TreeToNFAConverter.java:548)
>> org.antlr.tool.TreeToNFAConverter.rules(TreeToNFAConverter.java:374)
>> org.antlr.tool.TreeToNFAConverter.grammarSpec 
>> (TreeToNFAConverter.java:328)
>> org.antlr.tool.TreeToNFAConverter.grammar(TreeToNFAConverter.java: 
>> 188)
>> org.antlr.tool.Grammar.createNFAs(Grammar.java:677)
>> org.antlr.tool.Grammar.checkAllRulesForLeftRecursion(Grammar.java: 
>> 1288)
>> org.antlr.codegen.CodeGenerator.genRecognizer(CodeGenerator.java:276)
>> org.antlr.Tool.processGrammar(Tool.java:320)
>> org.antlr.Tool.process(Tool.java:251)
>> org.antlr.Tool.main(Tool.java:70)
>>
>> When I use $id, it "works" (but I only get the first token in the  
>> loop).  The grammar I adopted has "memoize" and "backtrack".  Are  
>> these the problem?  Also, what does "memoize" mean (it's not  
>> defined in the WIKI)?
>>
>> -Sean
>

From kroepke at classdump.org  Sat Aug  5 11:05:03 2006
From: kroepke at classdump.org (Kay Roepke)
Date: Sat Aug  5 11:05:13 2006
Subject: [antlr-interest] Is it possible?
In-Reply-To: <20060805175420.1808.qmail@server02.citromail.hu>
References: <20060805175420.1808.qmail@server02.citromail.hu>
Message-ID: <846C1107-B6B9-4D56-9349-0412B86604FF@classdump.org>


On 5. Aug 2006, at 19:54 Uhr, vak botty?n wrote:

> What do you suggest, should I write an own expr-evaluator specific  
> to my case, or rather use ANTLR?

Yes, and yes ;)

The evaluator you'd have to write anyway, since ANTLR is a(nother)  
tool for language recognition. Whether the input ANTLR
breaks up makes sense in problem domain must be checked by some  
semantic checker.

ANTLR cannot check if some matrix operation makes sense for the  
matrices specified, so in your example
	adj(((A + B)*C^-1 - D^3)^T)
it cannot check if the inverse of (A+B)*C is actually computable.  
That you must do yourself. But ANTLR provides you
with the structure of the expression so you can hook into your  
validity checker at the right spots, and supply the
right information to it.

So, back to your question ;), yes, I'd suggest you use ANTLR for  
parsing the expressions, because that's what it's for. There's
no need to write an expression lexer/parser by hand if you have great  
tools for doing that for you.

HTH,

-k

-- 
Kay R?pke <kroepke@classdump.org>
classdump Software


From ione at citromail.hu  Sat Aug  5 12:16:22 2006
From: ione at citromail.hu (ione)
Date: Sat Aug  5 12:16:22 2006
Subject: [antlr-interest] Is it possible?
Message-ID: <20060805191622.18011.qmail@server02.citromail.hu>


 &gt; What do you suggest, should I write an own expr-evaluator specific &gt; to my case, or rather use ANTLR?  Yes, and yes ;) 
OK, now I see, that was a strange question :)Am I understanding things right? I can define the elements for my matrix-calculation language in ANTLR and it can parse and disassemble the "sentences" of this language. Meanwhile I have to code in java the way these elements are connected - based upon the earlier defined language rules.This is exciting! :) I start reading documentation. Thx.ione

_________________________________________
H?rkeres?.hu - Mindig friss h?rek, toplist?k, szt?rpletyk?k. A legfontosabb 70 h?rforr?s k?zel 2.500 cikke naponta!Ha egy lapon akarsz mindent ?ttekinteni  KLIKK IDE! - http://www.hirkereso.hu/
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060805/f07f01f1/attachment.html
From swalton at cs.utah.edu  Sat Aug  5 15:17:50 2006
From: swalton at cs.utah.edu (Sean Walton)
Date: Sat Aug  5 15:17:54 2006
Subject: [antlr-interest] (v3) Token aggregation
In-Reply-To: <705860E1-661D-4F3B-A4FC-D1E0798BE2F3@cs.usfca.edu>
References: <44D4D1A1.2050906@cs.utah.edu> <44D4D67B.8050300@cs.utah.edu>
	<705860E1-661D-4F3B-A4FC-D1E0798BE2F3@cs.usfca.edu>
Message-ID: <44D5190E.4010104@cs.utah.edu>

Terence Parr wrote:
> actually it's the id+=foo that has been fixed already in my version.
>
> Note the error says idx which means it has nothing to do with the rule 
> you provide.
>
> Ter
oops.  Bad snapshot.
The version you are talking about... is it released yet?  Because here 
is a test case that demonstrates the problem:

    grammar Test;
    options {
        output=AST;
        memoize=true;
        backtrack=true;
    }

    tokens {
        PATH;
    }

    program options{ k=1; backtracking=false; }
        :    id+=IDENTIFIER ('.' id+=IDENTIFIER) -> ^(PATH $id+)
        ;
       
    IDENTIFIER
        :    ('a'..'z'|'A'..'Z')+
        ;

Generates:

     >java -classpath
    "antlr-3.0b3.jar;stringtemplate-2.3b9.jar;antlr-2.7.6.jar"
    org.antlr.Tool t.g
    ANTLR Parser Generator   Early Access Version 3.0b3 (July 21, 2006) 
    1989-2006
    0:0: syntax error: assign.types: <AST>:13:50: unexpected AST node: id
    0:0: syntax error: assign.types: <AST>:0:0: expecting EOB, found
    '<end-of-alt>'
    0:0: syntax error: assign.types: <AST>:0:0: unexpected end of subtree
    0:0: syntax error: define: <AST>:13:50: unexpected AST node: id
    0:0: syntax error: define: <AST>:0:0: expecting EOB, found
    '<end-of-alt>'
    0:0: syntax error: define: <AST>:0:0: unexpected end of subtree
    0:0: syntax error: buildnfa: <AST>:13:50: unexpected AST node: id
    internal error: t.g : java.lang.NullPointerException
    org.antlr.tool.NFAFactory.build_AlternativeBlock(NFAFactory.java:373)
    org.antlr.tool.TreeToNFAConverter.block(TreeToNFAConverter.java:779)
    org.antlr.tool.TreeToNFAConverter.rule(TreeToNFAConverter.java:548)
    org.antlr.tool.TreeToNFAConverter.rules(TreeToNFAConverter.java:374)
    org.antlr.tool.TreeToNFAConverter.grammarSpec(TreeToNFAConverter.java:328)
    org.antlr.tool.TreeToNFAConverter.grammar(TreeToNFAConverter.java:188)
    org.antlr.tool.Grammar.createNFAs(Grammar.java:677)
    org.antlr.tool.Grammar.checkAllRulesForLeftRecursion(Grammar.java:1288)
    org.antlr.codegen.CodeGenerator.genRecognizer(CodeGenerator.java:276)
    org.antlr.Tool.processGrammar(Tool.java:320)
    org.antlr.Tool.process(Tool.java:251)
    org.antlr.Tool.main(Tool.java:70)

Deleting the "backtracking=true;" I get:

     >java -classpath
    "antlr-3.0b3.jar;stringtemplate-2.3b9.jar;antlr-2.7.6.jar"
    org.antlr.Tool t.g
    ANTLR Parser Generator   Early Access Version 3.0b3 (July 21, 2006) 
    1989-2006

     >

Putting it back in and removing the '+' in the rewrite rule, I get:

     >java -classpath
    "antlr-3.0b3.jar;stringtemplate-2.3b9.jar;antlr-2.7.6.jar"
    org.antlr.Tool t.g
    ANTLR Parser Generator   Early Access Version 3.0b3 (July 21, 2006) 
    1989-2006

     >

Any ideas?
-Sean
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060805/8919d9a0/attachment.html
From swalton at cs.utah.edu  Sat Aug  5 15:21:40 2006
From: swalton at cs.utah.edu (Sean Walton)
Date: Sat Aug  5 15:21:42 2006
Subject: [antlr-interest] Silencing known warnings
Message-ID: <44D519F4.8000502@cs.utah.edu>

In 2.* one could turn off warning in specific rules.  Is there a way to 
do this in 3.0?  I looked in the docs [shock and dismay!:] and found 
other options but not this one.  It is frustrating to see the same 
acceptable warnings over and over.  It gets in the way of real problems.
-Sean
From e.papegaaij at student.utwente.nl  Sun Aug  6 00:36:31 2006
From: e.papegaaij at student.utwente.nl (Emond Papegaaij)
Date: Sun Aug  6 00:36:36 2006
Subject: [antlr-interest] Problem with AST rewrite
In-Reply-To: <200608051138.22739.e.papegaaij@student.utwente.nl>
References: <200608051138.22739.e.papegaaij@student.utwente.nl>
Message-ID: <200608060936.31263.e.papegaaij@student.utwente.nl>

On Saturday 05 August 2006 11:38, Emond Papegaaij wrote:
> The attached grammar produces incorrect code (v3b3), which gives the
> following compile error:
>   TPLLogic.java:203: cannot find symbol
>   symbol  : variable list_SEMI
>   location: class TPLLogic
>                       list_SEMI.add(SEMI6);
>                       ^
>
> It seems to be caused by the usage of ';' in the first rule, while the
> second rule uses 'SEMI'. Is it allowed to mix these two in a single
> grammar?

The problem seems to be a mismatch between the name of the list in the 
declaration and the name of the list when used. The list is called 'list_5' 
(from token 5), but the token is added to 'list_SEMI'.

Best regards,
Emond Papegaaij
From dave at badgers-in-foil.co.uk  Sun Aug  6 10:10:38 2006
From: dave at badgers-in-foil.co.uk (David Holroyd)
Date: Sun Aug  6 10:10:45 2006
Subject: [antlr-interest] ANTLR 3 & hidden token management?
Message-ID: <20060806171038.GB29734@badgers-in-foil.co.uk>

ANTLR 2 provides CommonHiddenStreamToken et al, which I try to use for
layout-preserving code rewriting.  I've just been looking at v3 to see
if manipulating ASTs containing hidden tokens has become any easier, but
I don't see equivalent classes.

Is this because there's a radically different way to do this which I've
not spotted, or because it's just not implemented yet?


Thanks for ANTLR!
dave

-- 
http://david.holroyd.me.uk/
From parrt at cs.usfca.edu  Sun Aug  6 10:25:11 2006
From: parrt at cs.usfca.edu (Terence Parr)
Date: Sun Aug  6 10:25:16 2006
Subject: [antlr-interest] ANTLR 3 & hidden token management?
In-Reply-To: <20060806171038.GB29734@badgers-in-foil.co.uk>
References: <20060806171038.GB29734@badgers-in-foil.co.uk>
Message-ID: <5DEEF0F3-3731-4778-A267-0666078C218C@cs.usfca.edu>


On Aug 6, 2006, at 10:10 AM, David Holroyd wrote:

> ANTLR 2 provides CommonHiddenStreamToken et al, which I try to use for
> layout-preserving code rewriting.  I've just been looking at v3 to see
> if manipulating ASTs containing hidden tokens has become any  
> easier, but
> I don't see equivalent classes.
>
> Is this because there's a radically different way to do this which  
> I've
> not spotted, or because it's just not implemented yet?

Hi Dave,

ANTLR v3 in a sense sends all tokens to the parser, with the hidden  
tokens on different "channels".  this is done with a simple channel  
number in each token object.  The commonTokenStream objct filters for  
only those tokens of interest to the parser, but keeps all tokens  
around.  At any point, you can walk forwards/backwards in the buffer  
looking for stuff of interest on other channels.

As for trees, I automatically track start/stop token indexes for all  
rule invocations and hence I know the precise range of tokens  
associated with each rule tree construction.  This includes all  
hidden channels simply because they are in range.  Now, it does *not*  
track whitespace etc... before/after the rule...those will presumably  
be encompassed by other rule's AST construction.

Just added to faq:

http://www.antlr.org/wiki/pages/viewpage.action?pageId=1057

Ter

From dave at badgers-in-foil.co.uk  Sun Aug  6 13:17:34 2006
From: dave at badgers-in-foil.co.uk (David Holroyd)
Date: Sun Aug  6 13:17:58 2006
Subject: [antlr-interest] ANTLR 3 & hidden token management?
In-Reply-To: <5DEEF0F3-3731-4778-A267-0666078C218C@cs.usfca.edu>
References: <20060806171038.GB29734@badgers-in-foil.co.uk>
	<5DEEF0F3-3731-4778-A267-0666078C218C@cs.usfca.edu>
Message-ID: <20060806201734.GC29734@badgers-in-foil.co.uk>

Hi!

On Sun, Aug 06, 2006 at 10:25:11AM -0700, Terence Parr wrote:
> As for trees, I automatically track start/stop token indexes for all  
> rule invocations and hence I know the precise range of tokens  
> associated with each rule tree construction.  This includes all  
> hidden channels simply because they are in range.  Now, it does *not*  
> track whitespace etc... before/after the rule...those will presumably  
> be encompassed by other rule's AST construction.

I can see how that would give access to {channel=99} tokens produced by
lexing and parsing.  However, I want to be able to insert 'synthetic'
nodes into the AST / token stream, as I'm building an API for
programmatic code generation.  For instance, addComment() with ANTLR 2:

http://svn.badgers-in-foil.co.uk/metaas/trunk/src/java/uk/co/badgersinfoil/metaas/impl/ASTStatementList.java

Having to potentially update startIndex/endIndex values in the whole
tree on insertion/deletion sounds a bit hairy.  Does this leave me
needing custom, linked-list Tree/Token implementations?


thanks!
dave

-- 
http://david.holroyd.me.uk/
From prashant.deva at gmail.com  Sun Aug  6 18:10:39 2006
From: prashant.deva at gmail.com (Prashant Deva)
Date: Sun Aug  6 18:10:43 2006
Subject: [antlr-interest] ANTLR 3 & hidden token management?
In-Reply-To: <5DEEF0F3-3731-4778-A267-0666078C218C@cs.usfca.edu>
References: <20060806171038.GB29734@badgers-in-foil.co.uk>
	<5DEEF0F3-3731-4778-A267-0666078C218C@cs.usfca.edu>
Message-ID: <41fed8f80608061810n57d46709j1762f86bfa718153@mail.gmail.com>

The channel stuff is nice, but I dont seem to like the syntax 'channel=99'.

Why do you want to use a no? Why not something friendlier and easier to
remember?
A newcomer looking at a grammar would get really confused when he sees
channel=99.
even something like channel=hidden would convey more information.

I have also noticed in quite a few places that people (esp newcomers) seem
to find the antlr syntax too confusing.
Maybe we should reservere a week just to discuss and try to make the syntax
of antlr 3 more friendly.


Prashant

On 8/6/06, Terence Parr <parrt@cs.usfca.edu> wrote:
>
>
> On Aug 6, 2006, at 10:10 AM, David Holroyd wrote:
>
> > ANTLR 2 provides CommonHiddenStreamToken et al, which I try to use for
> > layout-preserving code rewriting.  I've just been looking at v3 to see
> > if manipulating ASTs containing hidden tokens has become any
> > easier, but
> > I don't see equivalent classes.
> >
> > Is this because there's a radically different way to do this which
> > I've
> > not spotted, or because it's just not implemented yet?
>
> Hi Dave,
>
> ANTLR v3 in a sense sends all tokens to the parser, with the hidden
> tokens on different "channels".  this is done with a simple channel
> number in each token object.  The commonTokenStream objct filters for
> only those tokens of interest to the parser, but keeps all tokens
> around.  At any point, you can walk forwards/backwards in the buffer
> looking for stuff of interest on other channels.
>
> As for trees, I automatically track start/stop token indexes for all
> rule invocations and hence I know the precise range of tokens
> associated with each rule tree construction.  This includes all
> hidden channels simply because they are in range.  Now, it does *not*
> track whitespace etc... before/after the rule...those will presumably
> be encompassed by other rule's AST construction.
>
> Just added to faq:
>
> http://www.antlr.org/wiki/pages/viewpage.action?pageId=1057
>
> Ter
>
>


-- 
Prashant Deva
Creator, ANTLR Studio
Founder, Placid Systems, www.placidsystems.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060807/cc563e31/attachment.html
From kroepke at classdump.org  Sun Aug  6 18:33:29 2006
From: kroepke at classdump.org (Kay Roepke)
Date: Sun Aug  6 18:33:38 2006
Subject: [antlr-interest] ANTLR 3 & hidden token management?
In-Reply-To: <41fed8f80608061810n57d46709j1762f86bfa718153@mail.gmail.com>
References: <20060806171038.GB29734@badgers-in-foil.co.uk>
	<5DEEF0F3-3731-4778-A267-0666078C218C@cs.usfca.edu>
	<41fed8f80608061810n57d46709j1762f86bfa718153@mail.gmail.com>
Message-ID: <18E3EB39-6073-4B6A-839C-1A5DAEA4CAF8@classdump.org>


On 7. Aug 2006, at 3:10 Uhr, Prashant Deva wrote:

> I have also noticed in quite a few places that people (esp  
> newcomers) seem
> to find the antlr syntax too confusing.
> Maybe we should reservere a week just to discuss and try to make  
> the syntax
> of antlr 3 more friendly.

What part of the syntax do you mean? The channel thing is just an  
instance variable assignment (or whatever the Java dudes call this).
Not much different to the method call in v2, is it? To assign the  
channel a name is just a one liner in Token.java or do it yourself in  
the
@members section of your grammar. The important part really is that  
the channel number is not the value of DEFAULT_CHANNEL or it wouldn't
be skipped in the unmodified version of CommonTokenStream.

I find it a bit late in the game to be requesting a discussion about  
syntax. We should be trying to get the thing out of the door ASAP
and not start a new "but I like {}?=>#$%-> better for gating  
sempreds, because that other language is using something similar"- 
flamewar.
The grammars for v3 are still in v2, you know, and changing stuff  
around probably makes it a lot harder for Ter to actually fix the  
outstanding
bugs on the list.

I think the syntax is pretty consistent and powerful. Not hard to  
remember, and not hard to learn. The hardest thing probably is  
understanding
why things don't parse the way you intended them to parse, but that's  
generally just the lack of knowledge about parsing theory more than the
syntax. And really, anyone who even considers writing a grammar  
should be capable of learning that bit of a new syntax to make things  
happen.
There are a lot of non-trivial examples available, the list is  
generally helpful and responsive esp. to newbie questions and the  
wiki starts getting
a good resource, too.

In time v3 goes final we will have a couple of real-world examples,  
too, at least that's what I gather. So this should really be enough.

With all due respect,

-k
-- 
Kay R?pke <kroepke@classdump.org>
classdump Software


From kroepke at classdump.org  Sun Aug  6 18:40:15 2006
From: kroepke at classdump.org (Kay Roepke)
Date: Sun Aug  6 18:40:25 2006
Subject: [antlr-interest] ANTLR 3 & hidden token management?
In-Reply-To: <41fed8f80608061810n57d46709j1762f86bfa718153@mail.gmail.com>
References: <20060806171038.GB29734@badgers-in-foil.co.uk>
	<5DEEF0F3-3731-4778-A267-0666078C218C@cs.usfca.edu>
	<41fed8f80608061810n57d46709j1762f86bfa718153@mail.gmail.com>
Message-ID: <C5145695-580D-4B1E-9EE9-3F6F814A6020@classdump.org>


On 7. Aug 2006, at 3:10 Uhr, Prashant Deva wrote:

> A newcomer looking at a grammar would get really confused when he sees
> channel=99.
> even something like channel=hidden would convey more information.

I forgot to add:

Channel 99 really doesn't mean anything beyond that this token is not  
on the default channel. So calling that channel "hidden" would
plainly be wrong if someone made a TokenStream subclass that did not  
filter tokens according to the original implementation.
Heck, people could even use the channelOverrideMap in the default  
implementation, changing the discard behavior.
FWIW, the whitespace channel could also be 42 or 666. Or the  
TokenStream subclass could implement some more complex algorithm to  
decide
whether or not to hide a token from the parser.

-k
-- 
Kay R?pke <kroepke@classdump.org>
classdump Software


From dave at badgers-in-foil.co.uk  Mon Aug  7 00:30:17 2006
From: dave at badgers-in-foil.co.uk (David Holroyd)
Date: Mon Aug  7 00:30:24 2006
Subject: [antlr-interest] ANTLR 3 & hidden token management?
In-Reply-To: <41fed8f80608061810n57d46709j1762f86bfa718153@mail.gmail.com>
References: <20060806171038.GB29734@badgers-in-foil.co.uk>
	<5DEEF0F3-3731-4778-A267-0666078C218C@cs.usfca.edu>
	<41fed8f80608061810n57d46709j1762f86bfa718153@mail.gmail.com>
Message-ID: <20060807073017.GA14031@badgers-in-foil.co.uk>

On Mon, Aug 07, 2006 at 06:40:39AM +0530, Prashant Deva wrote:
> A newcomer looking at a grammar would get really confused when he sees
> channel=99.
> even something like channel=hidden would convey more information.

FWIW, I have to admit that on first reading of a couple of v3 example
grammars, I initially assumed the {channel=99;} was trying to
demonstrate something clever about placement of actions that v3
supported and v2 didn't.  It was only when I wondered about the lack of
a declaration for 'channel', and then noticed that the action always
appeared in the definition of 'WS' that the light dawned.


dave

-- 
http://david.holroyd.me.uk/
From dotnetfr at gmail.com  Mon Aug  7 01:13:22 2006
From: dotnetfr at gmail.com (dotnet fr)
Date: Mon Aug  7 01:13:27 2006
Subject: [antlr-interest] Antlr 3beta2 and StringTemplate
Message-ID: <dcb971710608070113vc849645x27bc50b90c82d9f3@mail.gmail.com>

Hi Everyone,

I'm looking in c++ to generate output. I've found StringTemplate but
usable only in Java and .NET
Is StringTemplate available in the ANTLR 3beta2 in c++ ?

Cheers

-- 
dotnet
From mail at martin-probst.com  Mon Aug  7 01:39:55 2006
From: mail at martin-probst.com (Martin Probst)
Date: Mon Aug  7 01:40:08 2006
Subject: [antlr-interest] ANTLR 3 & hidden token management?
In-Reply-To: <18E3EB39-6073-4B6A-839C-1A5DAEA4CAF8@classdump.org>
References: <20060806171038.GB29734@badgers-in-foil.co.uk>
	<5DEEF0F3-3731-4778-A267-0666078C218C@cs.usfca.edu>
	<41fed8f80608061810n57d46709j1762f86bfa718153@mail.gmail.com>
	<18E3EB39-6073-4B6A-839C-1A5DAEA4CAF8@classdump.org>
Message-ID: <E51C3590-50EB-46DE-B035-022616E860FF@martin-probst.com>

> I think the syntax is pretty consistent and powerful. Not hard to  
> remember, and not hard to learn.

Well, consistent maybe, but a syntax that uses ! ^ ^^ $ { } ( ) | ->,  
i.e. nearly all symbols imaginable, is certainly not easy to learn  
and remember. However that is in the nature of grammars, everyone  
uses RegExp syntax to be more concise (or something?), so not going  
with the others would probably be more irritating than anything else.

Martin
From m.junker at hm-software.de  Mon Aug  7 01:46:38 2006
From: m.junker at hm-software.de (Mark Junker)
Date: Mon Aug  7 01:47:04 2006
Subject: [antlr-interest] Newbie Q: lexer behaviour and lookahead
Message-ID: <44D6FDEE.2000009@hm-software.de>

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Hi,

first I want to say that ANTLR seems to be a great product that most
likely will fit our needs. But I have a (probably stupid) question about
the Lexer and its supported expressions.

First: I use ANTLR 2.7.6 with the C# code generator on my WinXP Pro SP2 box.

Let's assume that we have a file containing one
"property_id=property_value" per line. The problem is that we want to
allow "==" as "escape sequence" to allow a "=" inside the property_id.

I first tried to use the following token specification:

protected PROPERTY_ID_PART : (~('='|'"'|'\''|'{'|'}'|';'))+;
protected EQUALS_ESCAPE : "==";
SEMICOLON : ';';
PROPERTY_ID : PROPERTY_ID_PART (EQUALS_ESCAPE (PROPERTY_ID_PART)?)*;

In the scanner I used something like this:
property :
	property_id EQUALS property_value SEMICOLON
;

property_id :
	PROPERTY_ID
;

property_value :
	// more stuff ...
;

But I got a problem when I tried to parse the following data:
A=B

I always get the message that '=' was expected, but 'B' was found. What
went wrong? My guess was that when it doesn't find a second '=', it
should simply ignore the first '=' and return the found text as the
token text.

- --
Kind regards,
Mark Junker
HM-Software
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.4 (MingW32)
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org

iD8DBQFE1v3t+vrgfQU/RLsRAhkFAJ972L2JdlLWhJWKaIhvcHuNNrLjmQCcDgTT
bk+/ZoZ5xFuXt9U2hWKibwk=
=+kgO
-----END PGP SIGNATURE-----
-------------- next part --------------
A non-text attachment was scrubbed...
Name: m.junker.vcf
Type: text/x-vcard
Size: 264 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20060807/24f7a1d1/m.junker.vcf
From kroepke at classdump.org  Mon Aug  7 01:49:19 2006
From: kroepke at classdump.org (Kay Roepke)
Date: Mon Aug  7 01:49:32 2006
Subject: [antlr-interest] ANTLR 3 & hidden token management?
In-Reply-To: <E51C3590-50EB-46DE-B035-022616E860FF@martin-probst.com>
References: <20060806171038.GB29734@badgers-in-foil.co.uk>
	<5DEEF0F3-3731-4778-A267-0666078C218C@cs.usfca.edu>
	<41fed8f80608061810n57d46709j1762f86bfa718153@mail.gmail.com>
	<18E3EB39-6073-4B6A-839C-1A5DAEA4CAF8@classdump.org>
	<E51C3590-50EB-46DE-B035-022616E860FF@martin-probst.com>
Message-ID: <447CC19D-59CE-4389-8A14-E5FC50ACE88A@classdump.org>


On 7. Aug 2006, at 10:39 Uhr, Martin Probst wrote:

>> I think the syntax is pretty consistent and powerful. Not hard to  
>> remember, and not hard to learn.
>
> Well, consistent maybe, but a syntax that uses ! ^ ^^ $ { } ( ) | - 
> >, i.e. nearly all symbols imaginable, is certainly not easy to  
> learn and remember. However that is in the nature of grammars,  
> everyone uses RegExp syntax to be more concise (or something?), so  
> not going with the others would probably be more irritating than  
> anything else.

mmmh. I think regexp syntax is used because it is widely known. It is  
a concise way of describing things, yes, but I still maintain that it  
is not hard to learn.

The basic syntax of matching things is not really difficult. Ok, the  
concepts of predicates need a bit intuition, but still I find them  
consistent and their symbols pretty easy to remember.

My question then is, what in particular do you guys find irritating?  
(Maybe I do you wrong, Martin, and you don't find it confusing, but  
the question remains ;))

-k
From m.junker at hm-software.de  Mon Aug  7 01:51:30 2006
From: m.junker at hm-software.de (Mark Junker)
Date: Mon Aug  7 01:51:51 2006
Subject: [antlr-interest] Newbie Q: A token for "other" characters?
Message-ID: <44D6FF12.8010107@hm-software.de>

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Hi,

in flex, I was able to pass all characters to a parser not directly
matched by a specific token. How can I achieve the same behavior with ANTLR?

BTW: I think that this would be something for the FAQ / Wiki if it's not
there yet - but I was unable to find it.

- --
Kind regards,
Mark Junker
HM-Software
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.4 (MingW32)
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org

iD8DBQFE1v8S+vrgfQU/RLsRAibwAJwJNqGy9XCz2a2IjsZ1uLUSycwy7gCglR5O
/EeHZ1NQMiMBaLplm6vUg3U=
=2l1i
-----END PGP SIGNATURE-----
-------------- next part --------------
A non-text attachment was scrubbed...
Name: m.junker.vcf
Type: text/x-vcard
Size: 264 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20060807/180e7197/m.junker.vcf
From lgcraymer at yahoo.com  Mon Aug  7 02:05:34 2006
From: lgcraymer at yahoo.com (Loring Craymer)
Date: Mon Aug  7 02:05:38 2006
Subject: [antlr-interest] Newbie Q: A token for "other" characters?
In-Reply-To: <44D6FF12.8010107@hm-software.de>
Message-ID: <20060807090534.14457.qmail@web55906.mail.re3.yahoo.com>

All ANTLR tokens require rules to define them.  You need an EQUALS rule as well as the EQUALS_ESCAPE rule.

--Loring

Mark Junker <m.junker@hm-software.de> wrote: -----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Hi,

in flex, I was able to pass all characters to a parser not directly
matched by a specific token. How can I achieve the same behavior with ANTLR?

BTW: I think that this would be something for the FAQ / Wiki if it's not
there yet - but I was unable to find it.

- --
Kind regards,
Mark Junker
HM-Software
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.4 (MingW32)
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org

iD8DBQFE1v8S+vrgfQU/RLsRAibwAJwJNqGy9XCz2a2IjsZ1uLUSycwy7gCglR5O
/EeHZ1NQMiMBaLplm6vUg3U=
=2l1i
-----END PGP SIGNATURE-----
begin:vcard
fn:Mark Junker
n:Junker;Mark
org:HM-Software
adr;dom:;;Rampenweg 1b;Adelheidsdorf;;29352
email;internet:m.junker@hm-software.de
tel;work:+49-5085-9894-0
tel;fax:+49-5085-9894-44
x-mozilla-html:FALSE
url:http://www.hm-software.de
version:2.1
end:vcard



 			
---------------------------------
See the all-new, redesigned Yahoo.com.  Check it out.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060807/ce1126bb/attachment.html
From lgcraymer at yahoo.com  Mon Aug  7 02:24:33 2006
From: lgcraymer at yahoo.com (Loring Craymer)
Date: Mon Aug  7 02:24:36 2006
Subject: [antlr-interest] ANTLR 3 & hidden token management?
In-Reply-To: <447CC19D-59CE-4389-8A14-E5FC50ACE88A@classdump.org>
Message-ID: <20060807092433.24165.qmail@web55905.mail.re3.yahoo.com>

Kay--

>From what I've seen, Martin tends to complain about design missteps, and most of his complaints are accurate.  The complaint here is that numbered channels are non-intuitive and it would be better to support symbolic names.  I have to agree--and Ter probably will too when he thinks about it.  One solution would be to add a lexer option, "channels", which takes a string with comma-separated names or some such.  ( channels = "HIDDEN, COMMENTS"; )  Or have a "channels" section in the lexer.

Often the issue with interface design is not "this is bad" but rather "this is not as good as it could be".  That is the case here.  Channels look to be a useful abstraction, but support for symbolic names would be convenient.

--Loring

Kay Roepke <kroepke@classdump.org> wrote: 
On 7. Aug 2006, at 10:39 Uhr, Martin Probst wrote:

>> I think the syntax is pretty consistent and powerful. Not hard to  
>> remember, and not hard to learn.
>
> Well, consistent maybe, but a syntax that uses ! ^ ^^ $ { } ( ) | - 
> >, i.e. nearly all symbols imaginable, is certainly not easy to  
> learn and remember. However that is in the nature of grammars,  
> everyone uses RegExp syntax to be more concise (or something?), so  
> not going with the others would probably be more irritating than  
> anything else.

mmmh. I think regexp syntax is used because it is widely known. It is  
a concise way of describing things, yes, but I still maintain that it  
is not hard to learn.

The basic syntax of matching things is not really difficult. Ok, the  
concepts of predicates need a bit intuition, but still I find them  
consistent and their symbols pretty easy to remember.

My question then is, what in particular do you guys find irritating?  
(Maybe I do you wrong, Martin, and you don't find it confusing, but  
the question remains ;))

-k


 		
---------------------------------
Do you Yahoo!?
 Get on board. You're invited to try the new Yahoo! Mail Beta.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060807/1ef21b82/attachment.html
From m.junker at hm-software.de  Mon Aug  7 02:37:34 2006
From: m.junker at hm-software.de (Mark Junker)
Date: Mon Aug  7 02:37:57 2006
Subject: [antlr-interest] Newbie Q: A token for "other" characters?
In-Reply-To: <20060807090534.14457.qmail@web55906.mail.re3.yahoo.com>
References: <20060807090534.14457.qmail@web55906.mail.re3.yahoo.com>
Message-ID: <44D709DE.9090709@hm-software.de>

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Loring Craymer wrote:
> All ANTLR tokens require rules to define them.  You need an EQUALS rule
> as well as the EQUALS_ESCAPE rule.

Ok, thanks ... but this problem is different from the previous one. I
just forgot to add the EQUALS rule in the example before - but this
problem is a different one and not related to the previous problem.

The reason why I such a feature would be nice is that I want to
implement a syntax where the user may use non-US characters and I think
that it'd be annoying to explicitly write that I want every character
except a, b, c, ... etc...

This problem causes me some headaches. Is there an easy/good solution
available for this problem?

- --
Kind regards,
Mark Junker
HM-Software
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.4 (MingW32)
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org

iD8DBQFE1wne+vrgfQU/RLsRAsYfAKCTeS/H/QuZDQ2GdvtfiwSVlv6xwgCfaO/I
HmRFdWM79oRn80mh0DJqC54=
=rmhD
-----END PGP SIGNATURE-----
-------------- next part --------------
A non-text attachment was scrubbed...
Name: m.junker.vcf
Type: text/x-vcard
Size: 264 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20060807/5a48cee3/m.junker.vcf
From kroepke at classdump.org  Mon Aug  7 02:39:42 2006
From: kroepke at classdump.org (Kay Roepke)
Date: Mon Aug  7 02:39:56 2006
Subject: [antlr-interest] ANTLR 3 & hidden token management?
In-Reply-To: <20060807092433.24165.qmail@web55905.mail.re3.yahoo.com>
References: <20060807092433.24165.qmail@web55905.mail.re3.yahoo.com>
Message-ID: <B54F983C-26DB-4042-A541-9A0A9F6886DF@classdump.org>


On 7. Aug 2006, at 11:24 Uhr, Loring Craymer wrote:

> From what I've seen, Martin tends to complain about design  
> missteps, and most of his complaints are accurate.  The complaint  
> here is that numbered channels are non-intuitive and it would be  
> better to support symbolic names.  I have to agree--and Ter  
> probably will too when he thinks about it.  One solution would be  
> to add a lexer option, "channels", which takes a string with comma- 
> separated names or some such.  ( channels = "HIDDEN, COMMENTS"; )   
> Or have a "channels" section in the lexer.

Loring and *,

I didn't want to sound unappreciative, so if I did come across that  
way, I'm sorry for that. I was just a bit bewildered by the  
proposition to
discuss syntax changes this late in the game (knowing how such  
discussions go, most of the time...).

As for the channel handling, I agree with you that named channels are  
more descriptive and more intuitive than an arbitrarily chosen  
number, e.g. 99.
I was just trying to make the point that this naming scheme shouldn't  
be handled in the default runtime, because there it could lead to  
misunderstandings as to how things work with channels, but that's  
essentially what you say, too.
Effectively, for the standard out-of-the-box CommonTokenStream class,  
all tokens not on the default channel (== 0) are hidden, so I'm a bit  
uneasy
to call channel 99 the "hidden channel", because every other channel,  
save one, are also "the" hidden channel. It really only makes things  
harder
to explain.
Now, if I plan to use multiple channels, I will hopefully have the  
guts to #define me a descriptive name for that and not use raw  
numbers all
over the place. But that's more the responsibility of the grammar  
author anyway.
Maybe it's more useful to be able to specify channelOverrideMap  
(which maps tokentypes to channels in the CommonTokenStream) somehow  
in the grammar, so that lives close to the definition of the tokens  
themselves, the lexer rules.

But I still think that there are more important things, like shipping  
3.0 final and when the ANTLR grammars are rewritten to be self- 
hosted, maybe
Ter can incorporate the outcome of such discussions as this into ANTLR.

Best regards,

-k
-- 
Kay R?pke <kroepke@classdump.org>
classdump Software


From lgcraymer at yahoo.com  Mon Aug  7 02:42:16 2006
From: lgcraymer at yahoo.com (Loring Craymer)
Date: Mon Aug  7 02:42:19 2006
Subject: [antlr-interest] Newbie Q: A token for "other" characters?
In-Reply-To: <44D709DE.9090709@hm-software.de>
Message-ID: <20060807094216.44710.qmail@web55911.mail.re3.yahoo.com>

ANTLR supports wildcard matches [ '.' matches any character], ranges, and negation [  ~ ( 'a'..'z')   matches any character except a through z.]

--Loring

Mark Junker <m.junker@hm-software.de> wrote: -----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Loring Craymer wrote:
> All ANTLR tokens require rules to define them.  You need an EQUALS rule
> as well as the EQUALS_ESCAPE rule.

Ok, thanks ... but this problem is different from the previous one. I
just forgot to add the EQUALS rule in the example before - but this
problem is a different one and not related to the previous problem.

The reason why I such a feature would be nice is that I want to
implement a syntax where the user may use non-US characters and I think
that it'd be annoying to explicitly write that I want every character
except a, b, c, ... etc...

This problem causes me some headaches. Is there an easy/good solution
available for this problem?

- --
Kind regards,
Mark Junker
HM-Software
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.4 (MingW32)
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org

iD8DBQFE1wne+vrgfQU/RLsRAsYfAKCTeS/H/QuZDQ2GdvtfiwSVlv6xwgCfaO/I
HmRFdWM79oRn80mh0DJqC54=
=rmhD
-----END PGP SIGNATURE-----
begin:vcard
fn:Mark Junker
n:Junker;Mark
org:HM-Software
adr;dom:;;Rampenweg 1b;Adelheidsdorf;;29352
email;internet:m.junker@hm-software.de
tel;work:+49-5085-9894-0
tel;fax:+49-5085-9894-44
x-mozilla-html:FALSE
url:http://www.hm-software.de
version:2.1
end:vcard



 __________________________________________________
Do You Yahoo!?
Tired of spam?  Yahoo! Mail has the best spam protection around 
http://mail.yahoo.com 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060807/83a541f2/attachment.html
From m.junker at hm-software.de  Mon Aug  7 02:45:37 2006
From: m.junker at hm-software.de (Mark Junker)
Date: Mon Aug  7 02:45:58 2006
Subject: [antlr-interest] Newbie Q: A token for "other" characters?
In-Reply-To: <20060807094216.44710.qmail@web55911.mail.re3.yahoo.com>
References: <20060807094216.44710.qmail@web55911.mail.re3.yahoo.com>
Message-ID: <44D70BC1.1080603@hm-software.de>

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Loring Craymer wrote:

> ANTLR supports wildcard matches [ '.' matches any character], ranges,
> and negation [  ~ ( 'a'..'z')   matches any character except a through z.]

Yes, but I already knew this - and this suggestions really don't help,
because it simply doesn't work well (== veeery slow) with Unicode
character sets.

- --
Kind regards,
Mark Junker
HM-Software
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.4 (MingW32)
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org

iD8DBQFE1wvB+vrgfQU/RLsRAiKUAJ9VWRd6DS37QoraiRYQJTWCvsU8OQCgqi8c
CQpqeVqJQFcX87nvBmUJdVM=
=9IM6
-----END PGP SIGNATURE-----
-------------- next part --------------
A non-text attachment was scrubbed...
Name: m.junker.vcf
Type: text/x-vcard
Size: 264 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20060807/88b6a59e/m.junker-0001.vcf
From open.zone at virgin.net  Mon Aug  7 02:53:53 2006
From: open.zone at virgin.net (Micheal J)
Date: Mon Aug  7 02:56:47 2006
Subject: [antlr-interest] Newbie Q: A token for "other" characters?
In-Reply-To: <44D6FF12.8010107@hm-software.de>
Message-ID: <001e01c6ba07$65e0b340$c704a8c0@hercules>

Hi,

> in flex, I was able to pass all characters to a parser not 
> directly matched by a specific token. How can I achieve the 
> same behavior with ANTLR?
> 
> BTW: I think that this would be something for the FAQ / Wiki 
> if it's not there yet - but I was unable to find it.

See the filter option:

http://www.antlr.org/doc/lexer.html#Filtering%20Input%20Streams


Micheal

-----------------------
The best way to contact me is via the list/forum. My time is very limited.

From lgcraymer at yahoo.com  Mon Aug  7 03:40:48 2006
From: lgcraymer at yahoo.com (Loring Craymer)
Date: Mon Aug  7 03:40:52 2006
Subject: [antlr-interest] ANTLR 3 & hidden token management?
In-Reply-To: <B54F983C-26DB-4042-A541-9A0A9F6886DF@classdump.org>
Message-ID: <20060807104048.99602.qmail@web55908.mail.re3.yahoo.com>

Kay--

I tend to think that it is "early" rather than "late" in the design process.  This is the first point at which people can comment from experience with a working version of ANTLR 3.  ANTLR 3 is not yet implemented in ANTLR 3; I consider that essential for a "mature" implementation, and consequently see 3.1 as the first "real" release.  For that matter, the parsing engine has not yet been fully shaken down (it's getting close).  Ter keeps making adjustments--mostly for the sake of efficiency at this point--in response to user-detected issues.  There are good reasons for beta testing!

Most of the interface suggestions, like symbolic channels, will not get implemented for ANTLR 3.0.  However, they can still be put on the "to do" list and be implemented later.  Features will not be placed on the "to do" list, however, unless someone points out the desirability.

Nor is the default ANTLR 3 interface going to be the only one.  ANTLR Yggdrasil (see my whitepaper/manual on the antlr.org site) will have some significant advantages.  First of all, there is true separation of target language from grammar specification.  Then too, the first (0.5) release will support heterogeneous trees, automatic code generation for data types, lexer editing (! for deleting characters), and a few other features.  The rewrite syntax is much simpler--and easier to implement--than the complicate mess that Ter came up with for ANTLR 3 (in fairness, I should point out that his is an extension of the attribute grammar syntax used for BNF-based--rather than EBNF--parser generation), as well as being more powerful.  I expect to have a version out this week; I am pretty much down to cleanup work with only a little more testing needed.

--Loring

 		
---------------------------------
Do you Yahoo!?
 Get on board. You're invited to try the new Yahoo! Mail Beta.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060807/ebf2ffd3/attachment.html
From kroepke at classdump.org  Mon Aug  7 05:11:06 2006
From: kroepke at classdump.org (Kay Roepke)
Date: Mon Aug  7 05:11:18 2006
Subject: [antlr-interest] ANTLR 3 & hidden token management?
In-Reply-To: <20060807104048.99602.qmail@web55908.mail.re3.yahoo.com>
References: <20060807104048.99602.qmail@web55908.mail.re3.yahoo.com>
Message-ID: <947BE157-0739-4181-B2A1-3C8CED20C159@classdump.org>


On 7. Aug 2006, at 12:40 Uhr, Loring Craymer wrote:

> I tend to think that it is "early" rather than "late" in the design  
> process.  This is the first point at which people can comment from  
> experience with a working version of ANTLR 3.  ANTLR 3 is not yet  
> implemented in ANTLR 3; I consider that essential for a "mature"  
> implementation, and consequently see 3.1 as the first "real"  
> release.  For that matter, the parsing engine has not yet been  
> fully shaken down (it's getting close).  Ter keeps making  
> adjustments--mostly for the sake of efficiency at this point--in  
> response to user-detected issues.  There are good reasons for beta  
> testing!
>
> Most of the interface suggestions, like symbolic channels, will not  
> get implemented for ANTLR 3.0.  However, they can still be put on  
> the "to do" list and be implemented later.  Features will not be  
> placed on the "to do" list, however, unless someone points out the  
> desirability.

Again, I probably sounded like I didn't want to discuss anything that  
could be made better. This is definitely not the case. Please  
attribute it to my lack of sleep and to those plumbers that are  
tearing down my bathroom at the moment, mere 5 feet away from my head...

I am well aware of the functionality limitations 3.0 will have (no !,  
no incremental parsing, probably not a totally desirable channel  
handling, I'm sure I missed important parts here, too), but my point  
is that getting 3.0 out of the door is an extremely important to  
reach a wider audience than
a 3.0beta ever will. Plus there are a couple of projects waiting that  
are probably not going to use an ANTLR3 beta.

There are many cases where ANTLR could be made better (your paper is  
describing one of them, a very interesting read!), but I think we  
should focus on getting things working now, getting it out to users  
and then adapt later when v3 is self-hosted. Then it should be a lot  
easier to change syntax around
because all the internal grammars must be worked on anyway.

I am/was simply afraid of featuritis and then risk that the timetable  
slips ever further. That's what the original post evoked in me, and  
why I reacted rather strongly to it.

-k

-- 
Kay R?pke <kroepke@classdump.org>
classdump Software


From m.junker at hm-software.de  Mon Aug  7 07:01:02 2006
From: m.junker at hm-software.de (Mark Junker)
Date: Mon Aug  7 07:01:26 2006
Subject: [antlr-interest] Newbie Q: A token for "other" characters?
In-Reply-To: <001e01c6ba07$65e0b340$c704a8c0@hercules>
References: <001e01c6ba07$65e0b340$c704a8c0@hercules>
Message-ID: <44D7479E.7040205@hm-software.de>

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Micheal J wrote:

> See the filter option:
> 
> http://www.antlr.org/doc/lexer.html#Filtering%20Input%20Streams

Sorry, but how can I use an input stream filter that adds lexer tokens
to the output queue? It seems that all characters consumed by this rule
always gets discarded without the ability to append the resulting token
to the output queue ... Any suggestions?

- --
Kind regards,
Mark Junker
HM-Software
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.4 (MingW32)
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org

iD8DBQFE10ee+vrgfQU/RLsRAhU2AKCsrj4EDGk41JT8eZVMyfzNqfkrowCgqJBz
OnthFmKICy7/GuOYv7sb+IA=
=Ufdh
-----END PGP SIGNATURE-----
-------------- next part --------------
A non-text attachment was scrubbed...
Name: m.junker.vcf
Type: text/x-vcard
Size: 264 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20060807/96ad70f0/m.junker.vcf
From parrt at cs.usfca.edu  Mon Aug  7 08:23:40 2006
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Aug  7 08:24:06 2006
Subject: [antlr-interest] ANTLR 3 & hidden token management?
In-Reply-To: <20060807104048.99602.qmail@web55908.mail.re3.yahoo.com>
References: <20060807104048.99602.qmail@web55908.mail.re3.yahoo.com>
Message-ID: <D8C8DD04-BB50-4362-9417-281C3B12CD6D@cs.usfca.edu>


On Aug 7, 2006, at 3:40 AM, Loring Craymer wrote:
> The rewrite syntax is much simpler--and easier to implement--than  
> the complicate mess that Ter came up with for ANTLR 3

eh?  So far I seem to know what programmers want...at least for 17  
years.  The grammar->grammar rewrite notation is correct.

Ter

From dave at badgers-in-foil.co.uk  Mon Aug  7 09:25:33 2006
From: dave at badgers-in-foil.co.uk (David Holroyd)
Date: Mon Aug  7 09:25:41 2006
Subject: [antlr-interest] ANTLR 3 & hidden token management?
In-Reply-To: <20060806201734.GC29734@badgers-in-foil.co.uk>
References: <20060806171038.GB29734@badgers-in-foil.co.uk>
	<5DEEF0F3-3731-4778-A267-0666078C218C@cs.usfca.edu>
	<20060806201734.GC29734@badgers-in-foil.co.uk>
Message-ID: <20060807162533.GA22760@badgers-in-foil.co.uk>

On Sun, Aug 06, 2006 at 08:17:34PM +0000, David Holroyd wrote:
> Hi!
> 
> On Sun, Aug 06, 2006 at 10:25:11AM -0700, Terence Parr wrote:
> > As for trees, I automatically track start/stop token indexes for all  
> > rule invocations and hence I know the precise range of tokens  
> > associated with each rule tree construction.  This includes all  
> > hidden channels simply because they are in range.  Now, it does *not*  
> > track whitespace etc... before/after the rule...those will presumably  
> > be encompassed by other rule's AST construction.
> 
> I can see how that would give access to {channel=99} tokens produced by
> lexing and parsing.  However, I want to be able to insert 'synthetic'
> nodes into the AST / token stream, as I'm building an API for
> programmatic code generation.  For instance, addComment() with ANTLR 2:
> 
> http://svn.badgers-in-foil.co.uk/metaas/trunk/src/java/uk/co/badgersinfoil/metaas/impl/ASTStatementList.java
> 
> Having to potentially update startIndex/endIndex values in the whole
> tree on insertion/deletion sounds a bit hairy.  Does this leave me
> needing custom, linked-list Tree/Token implementations?

Actually, does anyone already have such an implementation to hand?

Google knows of only one reference to org.antlr.runtime.Token at the
moment ;)


many thanks,
dave

-- 
http://david.holroyd.me.uk/
From prashant.deva at gmail.com  Mon Aug  7 12:32:58 2006
From: prashant.deva at gmail.com (Prashant Deva)
Date: Mon Aug  7 12:33:08 2006
Subject: [antlr-interest] ANTLR 3 & hidden token management?
In-Reply-To: <18E3EB39-6073-4B6A-839C-1A5DAEA4CAF8@classdump.org>
References: <20060806171038.GB29734@badgers-in-foil.co.uk>
	<5DEEF0F3-3731-4778-A267-0666078C218C@cs.usfca.edu>
	<41fed8f80608061810n57d46709j1762f86bfa718153@mail.gmail.com>
	<18E3EB39-6073-4B6A-839C-1A5DAEA4CAF8@classdump.org>
Message-ID: <41fed8f80608071232r54e65feva1899a4eb10790b8@mail.gmail.com>

> I find it a bit late in the game to be requesting a discussion about
> syntax. We should be trying to get the thing out of the door ASAP
>

I disagree. It is far easier to make any changes to the syntax right now
before the first version comes out than it is to do later. Everything is
still in beta stage and i dont any company has production level code written
using antlr 3 right now. Any changes to the syntax made now will have far
little impact than what they would have later, right after a final release.

-- 
Prashant Deva
Creator, ANTLR Studio
Founder, Placid Systems, www.placidsystems.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060808/cd1e373a/attachment.html
From swalton at cs.utah.edu  Mon Aug  7 12:34:50 2006
From: swalton at cs.utah.edu (Sean Walton)
Date: Mon Aug  7 12:35:34 2006
Subject: [antlr-interest] (v3) Token aggregation
In-Reply-To: <44D5190E.4010104@cs.utah.edu>
References: <44D4D1A1.2050906@cs.utah.edu> <44D4D67B.8050300@cs.utah.edu>
	<705860E1-661D-4F3B-A4FC-D1E0798BE2F3@cs.usfca.edu>
	<44D5190E.4010104@cs.utah.edu>
Message-ID: <44D795DA.7050205@cs.utah.edu>

Ter-
Have you had any time to look at this?  I'm at the point where I need 
this functionality.
Thanks.
-Sean

Sean Walton wrote:
> Terence Parr wrote:
>> actually it's the id+=foo that has been fixed already in my version.
>>
>> Note the error says idx which means it has nothing to do with the 
>> rule you provide.
>>
>> Ter
> oops.  Bad snapshot.
> The version you are talking about... is it released yet?  Because here 
> is a test case that demonstrates the problem:
>
>     grammar Test;
>     options {
>         output=AST;
>         memoize=true;
>         backtrack=true;
>     }
>
>     tokens {
>         PATH;
>     }
>
>     program options{ k=1; backtracking=false; }
>         :    id+=IDENTIFIER ('.' id+=IDENTIFIER) -> ^(PATH $id+)
>         ;
>        
>     IDENTIFIER
>         :    ('a'..'z'|'A'..'Z')+
>         ;
>
> Generates:
>
>     >java -classpath
>     "antlr-3.0b3.jar;stringtemplate-2.3b9.jar;antlr-2.7.6.jar"
>     org.antlr.Tool t.g
>     ANTLR Parser Generator   Early Access Version 3.0b3 (July 21,
>     2006)  1989-2006
>     0:0: syntax error: assign.types: <AST>:13:50: unexpected AST node: id
>     0:0: syntax error: assign.types: <AST>:0:0: expecting EOB, found
>     '<end-of-alt>'
>     0:0: syntax error: assign.types: <AST>:0:0: unexpected end of subtree
>     0:0: syntax error: define: <AST>:13:50: unexpected AST node: id
>     0:0: syntax error: define: <AST>:0:0: expecting EOB, found
>     '<end-of-alt>'
>     0:0: syntax error: define: <AST>:0:0: unexpected end of subtree
>     0:0: syntax error: buildnfa: <AST>:13:50: unexpected AST node: id
>     internal error: t.g : java.lang.NullPointerException
>     org.antlr.tool.NFAFactory.build_AlternativeBlock(NFAFactory.java:373)
>     org.antlr.tool.TreeToNFAConverter.block(TreeToNFAConverter.java:779)
>     org.antlr.tool.TreeToNFAConverter.rule(TreeToNFAConverter.java:548)
>     org.antlr.tool.TreeToNFAConverter.rules(TreeToNFAConverter.java:374)
>     org.antlr.tool.TreeToNFAConverter.grammarSpec(TreeToNFAConverter.java:328)
>     org.antlr.tool.TreeToNFAConverter.grammar(TreeToNFAConverter.java:188)
>     org.antlr.tool.Grammar.createNFAs(Grammar.java:677)
>     org.antlr.tool.Grammar.checkAllRulesForLeftRecursion(Grammar.java:1288)
>     org.antlr.codegen.CodeGenerator.genRecognizer(CodeGenerator.java:276)
>     org.antlr.Tool.processGrammar(Tool.java:320)
>     org.antlr.Tool.process(Tool.java:251)
>     org.antlr.Tool.main(Tool.java:70)
>
> Deleting the "backtracking=true;" I get:
>
>     >java -classpath
>     "antlr-3.0b3.jar;stringtemplate-2.3b9.jar;antlr-2.7.6.jar"
>     org.antlr.Tool t.g
>     ANTLR Parser Generator   Early Access Version 3.0b3 (July 21,
>     2006)  1989-2006
>
>     >
>
> Putting it back in and removing the '+' in the rewrite rule, I get:
>
>     >java -classpath
>     "antlr-3.0b3.jar;stringtemplate-2.3b9.jar;antlr-2.7.6.jar"
>     org.antlr.Tool t.g
>     ANTLR Parser Generator   Early Access Version 3.0b3 (July 21,
>     2006)  1989-2006
>
>     >
>
> Any ideas?
> -Sean

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060807/308a43ad/attachment.html
From swalton at cs.utah.edu  Mon Aug  7 14:19:56 2006
From: swalton at cs.utah.edu (Sean Walton)
Date: Mon Aug  7 14:20:07 2006
Subject: [antlr-interest] ANTLR 3 & hidden token management?
In-Reply-To: <20060807104048.99602.qmail@web55908.mail.re3.yahoo.com>
References: <20060807104048.99602.qmail@web55908.mail.re3.yahoo.com>
Message-ID: <44D7AE7C.4000805@cs.utah.edu>

Loring Craymer wrote:
> Kay--
>
> I tend to think that it is "early" rather than "late" in the design 
> process.  This is the first point at which people can comment from 
> experience with a working version of ANTLR 3.  ANTLR 3 is not yet 
> implemented in ANTLR 3; I consider that essential for a "mature" 
> implementation, and consequently see 3.1 as the first "real" release.
Wow.  Bootstrapping is an old concept.  Old and out of date.  I would 
focus on features and defects.
>   For that matter, the parsing engine has not yet been fully shaken 
> down (it's getting close).  Ter keeps making adjustments--mostly for 
> the sake of efficiency at this point--in response to user-detected 
> issues.  There are good reasons for beta testing!
Here is the foundational difference between the industry and academics.  
This is far from "beta" stability.  I regularly crash the thing, and 
functionality is less than consistent and stable.  This is what the 
industry calls "alpha-code".  It's "beta" when most of the major defects 
are fixed and most of the phased functionality is in place.  "Phased 
functionality" is a term that describes the incremental 
releases/deployments which include functional features a piece at a 
time.  This helps users/testers evaluate the sections and integration of 
the product.

After working with ANTLR, I was very surprised that this version was 
given a major version number (without even an 'a' or 'b'!), and "early 
release" is simply not descriptive enough.  (How would the Java 
community react if 1.6 crashed all the time! How would Microsoft 
react??).  I know that major version numbers indicate a complete change 
or overhaul to the tool, but it also indicates a certain level of stability.
> ...I expect to have a version out this week; I am pretty much down to 
> cleanup work with only a little more testing needed.
>
> --Loring
I like 3.0, because it is cleaner.  There are some really big show 
stoppers in it right now, but 1) I have committed too much time and 
effort to reverse gears now, 2) the promise of getting these show 
stoppers fixed is too attractive, and 3) using 3.0 for my work will get 
more attention than using 2.x.

-Sean

PS. Beating up a product because you have a "yet to come" bigger and 
better product -- especially when it appears that you have been in the 
ANTLR inner circle is bad form.  It also doesn't help motivate current 
testing.
From parrt at cs.usfca.edu  Mon Aug  7 14:46:40 2006
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Aug  7 14:46:44 2006
Subject: [antlr-interest] ANTLR 3 & hidden token management?
In-Reply-To: <44D7AE7C.4000805@cs.utah.edu>
References: <20060807104048.99602.qmail@web55908.mail.re3.yahoo.com>
	<44D7AE7C.4000805@cs.utah.edu>
Message-ID: <B81D3C10-F742-4386-821D-631B19234931@cs.usfca.edu>


On Aug 7, 2006, at 2:19 PM, Sean Walton wrote:
> Here is the foundational difference between the industry and  
> academics.  This is far from "beta" stability.  I regularly crash  
> the thing, and functionality is less than consistent and stable.

The release says "crashes still if you give it bad code", which you  
do all the time.  I have the warning on there that it's mainly for  
experienced ANTLR folks.  I use it all the time and it works great,  
but I know what valid input is.  This is just not fault-tolerant yet  
with a few known issues I'm trying to track down.

> After working with ANTLR, I was very surprised that this version  
> was given a major version number (without even an 'a' or 'b'!), and  
> "early release" is simply not descriptive enough.  (How would the  
> Java community react if 1.6 crashed all the time! How would  
> Microsoft react??).  I know that major version numbers indicate a  
> complete change or overhaul to the tool, but it also indicates a  
> certain level of stability.

It purely indicates complete overhaul.

Ter
From parrt at cs.usfca.edu  Mon Aug  7 14:54:28 2006
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Aug  7 14:54:40 2006
Subject: [antlr-interest] ANTLR 3 & hidden token management?
In-Reply-To: <20060806201734.GC29734@badgers-in-foil.co.uk>
References: <20060806171038.GB29734@badgers-in-foil.co.uk>
	<5DEEF0F3-3731-4778-A267-0666078C218C@cs.usfca.edu>
	<20060806201734.GC29734@badgers-in-foil.co.uk>
Message-ID: <E5AD5E55-3F62-4A8E-86C2-CE169D3F9519@cs.usfca.edu>


On Aug 6, 2006, at 1:17 PM, David Holroyd wrote:

> Hi!
>
> On Sun, Aug 06, 2006 at 10:25:11AM -0700, Terence Parr wrote:
>> As for trees, I automatically track start/stop token indexes for all
>> rule invocations and hence I know the precise range of tokens
>> associated with each rule tree construction.  This includes all
>> hidden channels simply because they are in range.  Now, it does *not*
>> track whitespace etc... before/after the rule...those will presumably
>> be encompassed by other rule's AST construction.
>
> I can see how that would give access to {channel=99} tokens  
> produced by
> lexing and parsing.  However, I want to be able to insert 'synthetic'
> nodes into the AST / token stream, as I'm building an API for
> programmatic code generation.

Ah!  okay, hmm....  I guess there is no input token number associated  
with these nodes.  If it is the root node, then ANTLR will  
automatically set the start/stop indexes.  If the imaginary node is  
in the middle of the tree somewhere then yes you would have to update  
those indexes yourself.  Are you asking about inserting nodes after  
the fact of tree construction? if so, I simple possibly recursive  
function will handle the token update per my article on the website  
about tracking token indices with version 2.

Ter
From parrt at cs.usfca.edu  Mon Aug  7 14:56:36 2006
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Aug  7 14:56:40 2006
Subject: [antlr-interest] ANTLR 3 & hidden token management?
In-Reply-To: <41fed8f80608061810n57d46709j1762f86bfa718153@mail.gmail.com>
References: <20060806171038.GB29734@badgers-in-foil.co.uk>
	<5DEEF0F3-3731-4778-A267-0666078C218C@cs.usfca.edu>
	<41fed8f80608061810n57d46709j1762f86bfa718153@mail.gmail.com>
Message-ID: <ABFF44D6-C2BE-45FD-BF13-6ECC03C79AA3@cs.usfca.edu>


On Aug 6, 2006, at 6:10 PM, Prashant Deva wrote:

> The channel stuff is nice, but I dont seem to like the syntax  
> 'channel=99'.

Hi Prashant,

  I like the simple idea of an assignment, but you're right: 99 is  
kind of random.  As Kay points out later any number will work and  
there is no such thing as a particular channel all the than the one  
that the parser is listening to. the user can come up with whatever  
constants they want and use them like  
constant=MY_CHANNEL_OF_WEIRD_STUFF; with no problem.

> I have also noticed in quite a few places that people (esp  
> newcomers) seem to find the antlr syntax too confusing.

  that is an assignment statement... not sure where the confusion  
would come in other than the constant. it is a problem of  
documentation not the tool I would say.


Ter
From parrt at cs.usfca.edu  Mon Aug  7 14:57:35 2006
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Aug  7 14:57:42 2006
Subject: [antlr-interest] Antlr 3beta2 and StringTemplate
In-Reply-To: <dcb971710608070113vc849645x27bc50b90c82d9f3@mail.gmail.com>
References: <dcb971710608070113vc849645x27bc50b90c82d9f3@mail.gmail.com>
Message-ID: <4B0A170C-F959-4996-8579-E8200F6C100D@cs.usfca.edu>


On Aug 7, 2006, at 1:13 AM, dotnet fr wrote:

> Hi Everyone,
>
> I'm looking in c++ to generate output. I've found StringTemplate but
> usable only in Java and .NET
> Is StringTemplate available in the ANTLR 3beta2 in c++ ?

   You'll note some discussion about C++ and string template I think  
in the string template group. basically C++ lacks reflection and so  
I'm not sure that it is possible.

Ter

From parrt at cs.usfca.edu  Mon Aug  7 17:04:03 2006
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Aug  7 17:04:14 2006
Subject: [antlr-interest] class loaders
In-Reply-To: <DA99D8F9-9174-44E1-8738-8A88613EA62D@martin-probst.com>
References: <A69E8D67-5375-44B1-9F91-5D5B40611213@cs.usfca.edu>
	<DA99D8F9-9174-44E1-8738-8A88613EA62D@martin-probst.com>
Message-ID: <BB61DE24-D26F-49C3-B929-521B0097E19C@cs.usfca.edu>


On Aug 5, 2006, at 1:56 AM, Martin Probst wrote:

> Hi,
>
>> I know hibernate and other people have asked me to correct this  
>> previously in ANTLR.the " correct" method was as you see first above.
>>
>>   So, what is the correct answer? do we need a flag that says  
>> which flavor to use?
>
> I think the problem is indeed that there is no correct way of doing  
> this. Java supports AFAIK two ways of doing this, one is the class  
> loader hierarchy that is being used with Class.forName() and the  
> other one is the hack with Thread.currentThread 
> ().getContextClassLoader(), which is used by Tomcat et al. where  
> containers can set this class loader for the sub-contexts in the  
> app. Both ways have their justification.

Thanks Martin.  I have set to allow both in both ANTLR and ST:

ClassLoader cl = Thread.currentThread().getContextClassLoader();
if ( cl==null ) {
     cl = this.getClass().getClassLoader();
}
...

Ter
From parrt at cs.usfca.edu  Mon Aug  7 17:07:04 2006
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Aug  7 17:07:11 2006
Subject: [antlr-interest] Problem with AST rewrite
In-Reply-To: <200608051138.22739.e.papegaaij@student.utwente.nl>
References: <200608051138.22739.e.papegaaij@student.utwente.nl>
Message-ID: <E8D31316-0264-400D-A709-E69DFFD495C5@cs.usfca.edu>


On Aug 5, 2006, at 2:38 AM, Emond Papegaaij wrote:

> Hello,
>
> The attached grammar produces incorrect code (v3b3), which gives  
> the following
> compile error:
>   TPLLogic.java:203: cannot find symbol
>   symbol  : variable list_SEMI
>   location: class TPLLogic
>                       list_SEMI.add(SEMI6);
>                       ^
>
> It seems to be caused by the usage of ';' in the first rule, while  
> the second
> rule uses 'SEMI'. Is it allowed to mix these two in a single grammar?

The grammar works on my side no problem...perhaps a post b3 bug fix?

Ter

From parrt at cs.usfca.edu  Mon Aug  7 17:07:37 2006
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Aug  7 17:07:42 2006
Subject: [antlr-interest] Silencing known warnings
In-Reply-To: <44D519F4.8000502@cs.utah.edu>
References: <44D519F4.8000502@cs.utah.edu>
Message-ID: <A3BD3908-BFB0-4663-914B-0C92A3342581@cs.usfca.edu>


On Aug 5, 2006, at 3:21 PM, Sean Walton wrote:

> In 2.* one could turn off warning in specific rules.  Is there a  
> way to do this in 3.0?  I looked in the docs [shock and dismay!:]  
> and found other options but not this one.  It is frustrating to see  
> the same acceptable warnings over and over.  It gets in the way of  
> real problems.

no method yet...i will be using "hush codes" later....

Ter

From prashant.deva at gmail.com  Mon Aug  7 18:57:03 2006
From: prashant.deva at gmail.com (Prashant Deva)
Date: Mon Aug  7 18:57:12 2006
Subject: [antlr-interest] ANTLR Studio: Academic Licenses available
Message-ID: <41fed8f80608071857o6b821f94ub598e90349655b6e@mail.gmail.com>

Due to the huge demand, Academic Licenses of ANTLR Studio are now available.
You can get these for only $25 instead of the usual $99.

To get one send me an email at 'pdeva@placidystems.com' with the subject
Academic License.
The mail should contain the name of your univ, your project details and it
should be from a .edu address.

Have fun  :)
-- 
Prashant Deva
Creator, ANTLR Studio
Founder, Placid Systems, www.placidsystems.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060808/cfa825ba/attachment.html
From thomas.rolfs at cox.net  Mon Aug  7 21:02:04 2006
From: thomas.rolfs at cox.net (Thomas Rolfs)
Date: Mon Aug  7 21:02:12 2006
Subject: [antlr-interest] Detecting incomplete input in ANTLR V2
In-Reply-To: <41fed8f80608071857o6b821f94ub598e90349655b6e@mail.gmail.com>
References: <41fed8f80608071857o6b821f94ub598e90349655b6e@mail.gmail.com>
Message-ID: <64835348.20060807210204@cox.net>



How do I detect incomplete input in ANTLR 2 C++? I'm guessing I just need
to trap to the "no more input" exception or the exception "I got EOF but was
expecting X", but I'm not familiar enough with the code yet to know
how to do this.

If anyone can point me in the right direction I'd be
very grateful. In the meantime I'll just get on with learning the code :-)

-- 
Thomas Rolfs

From e.papegaaij at student.utwente.nl  Tue Aug  8 00:05:18 2006
From: e.papegaaij at student.utwente.nl (Emond Papegaaij)
Date: Tue Aug  8 00:05:37 2006
Subject: [antlr-interest] Problem with AST rewrite
In-Reply-To: <E8D31316-0264-400D-A709-E69DFFD495C5@cs.usfca.edu>
References: <200608051138.22739.e.papegaaij@student.utwente.nl>
	<E8D31316-0264-400D-A709-E69DFFD495C5@cs.usfca.edu>
Message-ID: <200608080905.18286.e.papegaaij@student.utwente.nl>

On Tuesday 08 August 2006 02:07, Terence Parr wrote:
> On Aug 5, 2006, at 2:38 AM, Emond Papegaaij wrote:
> > Hello,
> >
> > The attached grammar produces incorrect code (v3b3), which gives
> > the following
> > compile error:
> >   TPLLogic.java:203: cannot find symbol
> >   symbol  : variable list_SEMI
> >   location: class TPLLogic
> >                       list_SEMI.add(SEMI6);
> >                       ^
> >
> > It seems to be caused by the usage of ';' in the first rule, while
> > the second
> > rule uses 'SEMI'. Is it allowed to mix these two in a single grammar?
>
> The grammar works on my side no problem...perhaps a post b3 bug fix?

It's just a minor issue, so perhaps you fixed it accidentally? :)

Best regards,
Emond Papegaaij
From mail at martin-probst.com  Tue Aug  8 00:38:15 2006
From: mail at martin-probst.com (Martin Probst)
Date: Tue Aug  8 00:38:28 2006
Subject: [antlr-interest] Problem with AST rewrite
In-Reply-To: <200608080905.18286.e.papegaaij@student.utwente.nl>
References: <200608051138.22739.e.papegaaij@student.utwente.nl>
	<E8D31316-0264-400D-A709-E69DFFD495C5@cs.usfca.edu>
	<200608080905.18286.e.papegaaij@student.utwente.nl>
Message-ID: <2ACA213B-DB0E-4155-8CCD-9691367C9911@martin-probst.com>

>> The grammar works on my side no problem...perhaps a post b3 bug fix?
>
> It's just a minor issue, so perhaps you fixed it accidentally? :)

This is how you identify truly great hackers - they don't create bugs  
accidentally, they fix them without intent. If they start programming  
without concentrating, random features start to appear all over the  
software ... :-)

Martin


From open.zone at virgin.net  Tue Aug  8 00:38:39 2006
From: open.zone at virgin.net (Micheal J)
Date: Tue Aug  8 00:42:11 2006
Subject: [antlr-interest] ANTLR Studio: Academic Licenses available
In-Reply-To: <41fed8f80608071857o6b821f94ub598e90349655b6e@mail.gmail.com>
Message-ID: <003b01c6babd$ae683cd0$c704a8c0@hercules>

Prashant,
 
FYI: The .edu domain isn't used by the majority of educational
establishments. Particularly outside the US.
 
Kunle

-----------------------
The best way to contact me is via the list/forum. My time is very limited. 

-----Original Message-----
From: antlr-interest-bounces@antlr.org
[mailto:antlr-interest-bounces@antlr.org] On Behalf Of Prashant Deva
Sent: 08 August 2006 02:57
To: Antlr Interest
Subject: [antlr-interest] ANTLR Studio: Academic Licenses available


Due to the huge demand, Academic Licenses of ANTLR Studio are now available.
You can get these for only $25 instead of the usual $99.

To get one send me an email at ' pdeva@placidystems.com
<mailto:pdeva@placidystems.com> ' with the subject Academic License.
The mail should contain the name of your univ, your project details and it
should be from a .edu address.

Have fun  :)
-- 
Prashant Deva 
Creator, ANTLR Studio
Founder, Placid Systems, www.placidsystems.com


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060808/9bdecc29/attachment.html
From open.zone at virgin.net  Tue Aug  8 00:38:39 2006
From: open.zone at virgin.net (Micheal J)
Date: Tue Aug  8 00:42:18 2006
Subject: [antlr-interest] Antlr 3beta2 and StringTemplate
In-Reply-To: <4B0A170C-F959-4996-8579-E8200F6C100D@cs.usfca.edu>
Message-ID: <003a01c6babd$ad9d24a0$c704a8c0@hercules>

> > Hi Everyone,
> >
> > I'm looking in c++ to generate output. I've found 
> StringTemplate but 
> > usable only in Java and .NET Is StringTemplate available in 
> the ANTLR 
> > 3beta2 in c++ ?
> 
>    You'll note some discussion about C++ and string template I think  
> in the string template group. basically C++ lacks reflection and so  
> I'm not sure that it is possible.

It's definitely possible.

Functional and robust C++ reflection frameworks abound. Stumbling blocks
(apart from actually writing ST++) include support for C and Obj-C,
cross-compiler support, cross-OS support (i.e. just the usual
C++-development-in-the-large issues).


Micheal

-----------------------
The best way to contact me is via the list/forum. My time is very limited.

From open.zone at virgin.net  Tue Aug  8 00:38:39 2006
From: open.zone at virgin.net (Micheal J)
Date: Tue Aug  8 00:42:20 2006
Subject: [antlr-interest] class loaders
In-Reply-To: <BB61DE24-D26F-49C3-B929-521B0097E19C@cs.usfca.edu>
Message-ID: <003901c6babd$ac9f63b0$c704a8c0@hercules>

Hi,

> > I think the problem is indeed that there is no correct way of doing
> > this. Java supports AFAIK two ways of doing this, one is the class  
> > loader hierarchy that is being used with Class.forName() and the  
> > other one is the hack with Thread.currentThread 
> > ().getContextClassLoader(), which is used by Tomcat et al. where  
> > containers can set this class loader for the sub-contexts in the  
> > app. Both ways have their justification.
> 
> Thanks Martin.  I have set to allow both in both ANTLR and ST:
> 
> ClassLoader cl = Thread.currentThread().getContextClassLoader();
> if ( cl==null ) {
>      cl = this.getClass().getClassLoader();
> }
> ...

Would be more useful it it was configurable via some API (preferable on a
per-instance basis). This better supports the use of ST, ANTLR and
ANTLR-based products in embedded mode.

Micheal

From costa_basil at yahoo.ca  Tue Aug  8 00:47:52 2006
From: costa_basil at yahoo.ca (Costa Basil)
Date: Tue Aug  8 00:48:15 2006
Subject: [antlr-interest] antlr 2.7.6: newbie question - getting the last
	matched token
Message-ID: <20060808074752.23247.qmail@web53510.mail.yahoo.com>

How can I get the last matched token? I have the following case:

 (T1 | T2 ... | Tn) { action }
where Ti are terminals. In my action I want to get the token that was matched and I don't want to declare labels to each of the tokens because it is too cumbersome. Also for whatever reason, antlr doesn't let me use identical labels for each alternative.

Thanks


 		
---------------------------------
Be smarter than spam. See how smart SpamGuard is at giving junk email the boot with the All-new Yahoo! Mail  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060808/4a9dfbf8/attachment.html
From open.zone at virgin.net  Tue Aug  8 00:54:26 2006
From: open.zone at virgin.net (Micheal J)
Date: Tue Aug  8 00:57:31 2006
Subject: [antlr-interest] antlr 2.7.6: newbie question - getting the
	lastmatched token
In-Reply-To: <20060808074752.23247.qmail@web53510.mail.yahoo.com>
Message-ID: <004501c6babf$df80fc10$c704a8c0@hercules>

Declare as a subrule and lebel the reference to the subrule. It has a cost
of at least an extra method call but, it does what you want right?
 
Micheal
-----------------------
The best way to contact me is via the list/forum. My time is very limited. 

-----Original Message-----
From: antlr-interest-bounces@antlr.org
[mailto:antlr-interest-bounces@antlr.org] On Behalf Of Costa Basil
Sent: 08 August 2006 08:48
To: antlr-interest@antlr.org
Subject: [antlr-interest] antlr 2.7.6: newbie question - getting the
lastmatched token


How can I get the last matched token? I have the following case:

 (T1 | T2 ... | Tn) { action }
where Ti are terminals. In my action I want to get the token that was
matched and I don't want to declare labels to each of the tokens because it
is too cumbersome. Also for whatever reason, antlr doesn't let me use
identical labels for each alternative.

Thanks





  _____  

Be smarter than spam. See how smart SpamGuard is at giving junk email the
boot with the
<http://us.rd.yahoo.com/evt=40705/*http://mrd.mail.yahoo.com/try_beta?.intl=
ca> All-new Yahoo! Mail 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060808/e3c7dd59/attachment-0001.html
From kroepke at classdump.org  Tue Aug  8 01:00:58 2006
From: kroepke at classdump.org (Kay Roepke)
Date: Tue Aug  8 01:01:57 2006
Subject: [stringtemplate-interest] RE: [antlr-interest] Antlr 3beta2 and
	StringTemplate
In-Reply-To: <003a01c6babd$ad9d24a0$c704a8c0@hercules>
References: <003a01c6babd$ad9d24a0$c704a8c0@hercules>
Message-ID: <40DD25B5-ACA8-4609-8EE5-0222B604D2D8@classdump.org>


On 8. Aug 2006, at 9:38 Uhr, Micheal J wrote:

> Stumbling blocks
> (apart from actually writing ST++) include support for C and Obj-C,
> cross-compiler support, cross-OS support (i.e. just the usual
> C++-development-in-the-large issues).

At least Obj-C shouldn't be a problem. Obj-C doesn't suffer from the  
same problems, but that is mainly because you
don't have to be overconcerned about portability across OS, compilers  
etc. Also there's no reflection problem.
Plain C, on the other hand, could be a very different issue,  
depending on how far you wanted to go in terms of
portability.

-k
-- 
Kay R?pke <kroepke@classdump.org>
classdump Software


From thomas.rolfs at cox.net  Tue Aug  8 01:12:07 2006
From: thomas.rolfs at cox.net (Thomas Rolfs)
Date: Tue Aug  8 01:12:25 2006
Subject: [antlr-interest] Detecting incomplete input in ANTLR V2
In-Reply-To: <64835348.20060807210204@cox.net>
References: <41fed8f80608071857o6b821f94ub598e90349655b6e@mail.gmail.com>
	<64835348.20060807210204@cox.net>
Message-ID: <10010146441.20060808011207@cox.net>




Thomas wrote:

> If anyone can point me in the right direction I'd be
> very grateful. In the meantime I'll just get on with learning the code :-)

No worries, I got it to work. However, I had to hack
RecognitionException so that I could safely up cast to
MismatchedTokenException in my overloaded reportError().

P.S. Sorry for the noise.

-- 
Thomas Rolfs

From open.zone at virgin.net  Tue Aug  8 01:09:54 2006
From: open.zone at virgin.net (Micheal J)
Date: Tue Aug  8 01:12:44 2006
Subject: [stringtemplate-interest] RE: [antlr-interest] Antlr 3beta2 and
	StringTemplate
In-Reply-To: <40DD25B5-ACA8-4609-8EE5-0222B604D2D8@classdump.org>
Message-ID: <004c01c6bac2$09c0f460$c704a8c0@hercules>

Kay,

> From: Kay Roepke 
> Sent: 08 August 2006 09:01

> > Stumbling blocks
> > (apart from actually writing ST++) include support for C and Obj-C, 
> > cross-compiler support, cross-OS support (i.e. just the usual
> > C++-development-in-the-large issues).
> 
> At least Obj-C shouldn't be a problem. Obj-C doesn't suffer from the  
> same problems, but that is mainly because you
> don't have to be overconcerned about portability across OS, 
> compilers  
> etc. Also there's no reflection problem.
> Plain C, on the other hand, could be a very different issue,  
> depending on how far you wanted to go in terms of
> portability.

I was suggesting that there might be problems with supporting Objective-C
fully in a C++ version of ST. An Objective-C version of ST would have no
such problems and would be an easier project perhaps. Not sure how well such
a version would support C++ reflection though...

Anyways, given my basic[ly useless] knowledge of Objective-C, I imagined
full support for reflection over Objective-C types would be an issue for a
pure C++ project. I don't imagine that the C++ reflection frameworks support
Objective-C at all in fact.

As for plain C support, it is possible but it won't be pretty (or easy!).


Micheal

-----------------------
The best way to contact me is via the list/forum. My time is very limited.

From kroepke at classdump.org  Tue Aug  8 01:27:04 2006
From: kroepke at classdump.org (Kay Roepke)
Date: Tue Aug  8 01:27:14 2006
Subject: [stringtemplate-interest] RE: [antlr-interest] Antlr 3beta2 and
	StringTemplate
In-Reply-To: <004c01c6bac2$09c0f460$c704a8c0@hercules>
References: <004c01c6bac2$09c0f460$c704a8c0@hercules>
Message-ID: <5D05E359-56FD-41CE-9882-3737B536D779@classdump.org>


On 8. Aug 2006, at 10:09 Uhr, Micheal J wrote:

> Anyways, given my basic[ly useless] knowledge of Objective-C, I  
> imagined
> full support for reflection over Objective-C types would be an  
> issue for a
> pure C++ project. I don't imagine that the C++ reflection  
> frameworks support
> Objective-C at all in fact.

Could you give me a link to a good C++ reflection framework? I'm not  
a heavy user of C++, so I don't have
an overview of that field.
The Objective-C/C++ integration works ok for the most part, and it  
actually is pretty easy to separate it out into
a C++-only part and then integrate it back via some wrapper classes.  
It ain't pretty, and I would avoid it if
possible, since compilation is pretty slow and you get all the nasty C 
++-ishness into your pretty code ;)

FWIW, I plan on doing an Obj-C version, so I don't know if the  
necessity of a C++/Obj-C hybrid version arises.

> As for plain C support, it is possible but it won't be pretty (or  
> easy!).

Well, you'd probably write a good-sized subset of the ObjC runtime  
(which is written in C) or another
class-simulation in C. shudder.

-k

-- 
Kay R?pke <kroepke@classdump.org>
classdump Software


From sandy.pec at gmail.com  Tue Aug  8 05:17:48 2006
From: sandy.pec at gmail.com (Sandeep Gupta)
Date: Tue Aug  8 05:17:56 2006
Subject: [antlr-interest] How to subtract/and two lexer rules in ANTLR v3.0
Message-ID: <6368ffc60608080517o7a60ab60v40e8ecc54265f8bc@mail.gmail.com>

Hi,

I am a newbie to the parsing stuff and have started trying ANTLR v3.0 Beta 3
for quite some days now. I am trying to write a grammar to parse DTD files
using the official specifications available at the W3C site. But, I am
facing a problem. At various points the grammar given in the DTD
specifications states that

(Char <http://www.w3.org/TR/REC-xml/#NT-Char>* -
(Char<http://www.w3.org/TR/REC-xml/#NT-Char>*
'?>' Char <http://www.w3.org/TR/REC-xml/#NT-Char>*))

Now for such cases I am unable to find equivalent in ANTLR. I have tried
searching the Internet but to no help!.  As there is very less documentation
available about ANTLR v3.0 and the ANTLR site is currently down, kindly let
me know how to "subtract" and "AND" two lexer rule sets in ANTLR v3.0


Regards,
Sandeep Gupta
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060808/88e94425/attachment.html
From kroepke at classdump.org  Tue Aug  8 05:35:04 2006
From: kroepke at classdump.org (Kay Roepke)
Date: Tue Aug  8 05:35:12 2006
Subject: [antlr-interest] How to subtract/and two lexer rules in ANTLR v3.0
In-Reply-To: <6368ffc60608080517o7a60ab60v40e8ecc54265f8bc@mail.gmail.com>
References: <6368ffc60608080517o7a60ab60v40e8ecc54265f8bc@mail.gmail.com>
Message-ID: <4EF43F35-CA39-4CBD-9DA9-DF9109F77A39@classdump.org>


On 8. Aug 2006, at 14:17 Uhr, Sandeep Gupta wrote:

> Now for such cases I am unable to find equivalent in ANTLR. I have  
> tried
> searching the Internet but to no help!.  As there is very less  
> documentation
> available about ANTLR v3.0 and the ANTLR site is currently down,  
> kindly let
> me know how to "subtract" and "AND" two lexer rule sets in ANTLR v3.0

Hi Sandeep!

I'm not sure what you want to achieve. What do you mean by subtract?  
Could you post a link
to the specific parts of the DTD spec you are referring to?

Even though some of the syntax of ANTLR v3 has changed and a couple  
of features are new/different much of the v2
documentation still is valid and a good starting point if nothing else.
Also checking out the wiki and the examples for v3 is a good idea to  
get an idea of how v3 is used and what it is
capable of. That said, it sure is difficult accessing the stuff when  
the site is not reachable ;)
Maybe the google cache has a copy...

HTH,

-k
-- 
Kay R?pke <kroepke@classdump.org>
classdump Software


From oliver.zeigermann at gmail.com  Tue Aug  8 05:50:07 2006
From: oliver.zeigermann at gmail.com (Oliver Zeigermann)
Date: Tue Aug  8 05:50:15 2006
Subject: [antlr-interest] How to subtract/and two lexer rules in ANTLR v3.0
In-Reply-To: <6368ffc60608080517o7a60ab60v40e8ecc54265f8bc@mail.gmail.com>
References: <6368ffc60608080517o7a60ab60v40e8ecc54265f8bc@mail.gmail.com>
Message-ID: <9da4f4520608080550p74873fb4x88c493d071558b1b@mail.gmail.com>

2006/8/8, Sandeep Gupta <sandy.pec@gmail.com>:
> I am a newbie to the parsing stuff and have started trying ANTLR v3.0 Beta 3
> for quite some days now. I am trying to write a grammar to parse DTD files
> using the official specifications available at the W3C site. But, I am
> facing a problem. At various points the grammar given in the DTD
> specifications states that
>
> (Char* - (Char* '?>' Char*))

Which means all kind of characters, but not '?>'. AFAIK there is no
equivalence for this in ANTLR. However, this is not really needed. Try
a construct like this

(options {greedy=false;} : CHAR)* '?>'

This option allows to only consume those characters using the CHAR
rule that do not follow  it, i.e. '?>'

By the way, this is nothing new to ANTLR 3.

HTH

Oliver
From jsamort at gmail.com  Tue Aug  8 06:10:49 2006
From: jsamort at gmail.com (Scott Amort)
Date: Tue Aug  8 06:11:04 2006
Subject: [antlr-interest] Detecting incomplete input in ANTLR V2
In-Reply-To: <10010146441.20060808011207@cox.net>
References: <41fed8f80608071857o6b821f94ub598e90349655b6e@mail.gmail.com>	<64835348.20060807210204@cox.net>
	<10010146441.20060808011207@cox.net>
Message-ID: <44D88D59.2000605@gmail.com>

Hi Thomas,

Thomas Rolfs wrote:
> No worries, I got it to work. However, I had to hack
> RecognitionException so that I could safely up cast to
> MismatchedTokenException in my overloaded reportError().

I'm not sure how (or why) you could do this as MismatchedTokenException 
derives from RecognitionException, not the other way around (i.e. any 
MismatchedTokenException will be caught by the more general 
RecognitionException).  Perhaps you meant downcasting?  But either way, 
I don't see why you would need to have altered RecognitionException.

Best,
Scott

From jsamort at gmail.com  Tue Aug  8 06:36:29 2006
From: jsamort at gmail.com (Scott Amort)
Date: Tue Aug  8 06:36:44 2006
Subject: [stringtemplate-interest] RE: [antlr-interest] Antlr 3beta2 and
	StringTemplate
In-Reply-To: <5D05E359-56FD-41CE-9882-3737B536D779@classdump.org>
References: <004c01c6bac2$09c0f460$c704a8c0@hercules>
	<5D05E359-56FD-41CE-9882-3737B536D779@classdump.org>
Message-ID: <44D8935D.90608@gmail.com>

Hi Kay,

Kay Roepke wrote:
> Could you give me a link to a good C++ reflection framework? I'm not a 
> heavy user of C++, so I don't have
> an overview of that field.

One of the one's that comes up often (and was trying to get into Boost, 
IIRC) is Reflex:

http://seal-reflex.web.cern.ch/seal-reflex/

But I think there were some problems with it.  Unfortunately, 
portability is also a big issue as most of these frameworks depend on 
gccxml (which seems to be very out-of-date and no longer actively 
developed with a last release in early 2004), and hence gcc.

> FWIW, I plan on doing an Obj-C version, so I don't know if the necessity 
> of a C++/Obj-C hybrid version arises.

I'm quite keen on a C++ version, and have been hacking away at it for 
the past week or so.  I haven't reached any of the really hairy bits 
yet, but I think it is definitely possible.  However, like Michael 
suggested, the major headaches will come with cross-platform and 
cross-compiler support.

Regarding a C++/Obj-C hybrid, although I'm all for saving doing the same 
work twice, I would suggest that in the long run it is likely easiest 
(and more maintainable) to focus on a single language choice (i.e., make 
a C++ port *and* make an Obj-C port).

Best,
Scott

From sandy.pec at gmail.com  Tue Aug  8 06:36:55 2006
From: sandy.pec at gmail.com (Sandeep Gupta)
Date: Tue Aug  8 06:37:03 2006
Subject: [antlr-interest] How to subtract/and two lexer rules in ANTLR v3.0
Message-ID: <6368ffc60608080636p7252484aibbbd79847bcef099@mail.gmail.com>

Hi

I have tried using the construct you have mentioned, but it throws a
MisMatchedTokenException.
I have used the following rule

definition  :    '<?' (options {greedy=false;} : Char)* '?>'    ;

where Char is defined as the set of all Unicode Characters mentioned in the
XML specifications. I have tested the Char rule and it works fine. Unable to
figure out what is the problem.


- Sandeep

Which means all kind of characters, but not '?>'. AFAIK there is no
equivalence for this in ANTLR. However, this is not really needed. Try
a construct like this

(options {greedy=false;} : CHAR)* '?>'

This option allows to only consume those characters using the CHAR
rule that do not follow  it, i.e. '?>'

By the way, this is nothing new to ANTLR 3.

HTH

Oliver
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060808/da9e2939/attachment-0001.html
From sandy.pec at gmail.com  Tue Aug  8 06:45:33 2006
From: sandy.pec at gmail.com (Sandeep Gupta)
Date: Tue Aug  8 06:45:37 2006
Subject: [antlr-interest] How to subtract/and two lexer rules in ANTLR v3.0
Message-ID: <6368ffc60608080645r6f8375f1o64427a4167b11a5@mail.gmail.com>

Hi Kay

I am referring to the XML Specifications ver 3.0 at the URL
http://www.w3.org/TR/REC-xml. Please refer to the sections 2.5 and 2.6 for
comments and the PI (article [15] and [16]). I am trying to parse a DTD and
generate an AST. The exercise I am doing is just for practice and gaining
experience with parsing stuff.

By meaning of subtract, I mean that if we have a SET1 of say letters
'a'..'z' | 'A'..'Z' and say SET2 of capital letters 'A'..'Z'. Now if I want
to have small letter set SET# then I want to achieve
SET3 = SET1 - SET2;
instead of writing the whole SET3 = 'a'..'z' It would be particularly useful
when we want to use Unicode Character Sets applicable in the input stream.

I hope I am able to express it better this time.



Sandeep Gupta
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060808/1ae9fcad/attachment.html
From dave at badgers-in-foil.co.uk  Tue Aug  8 06:47:29 2006
From: dave at badgers-in-foil.co.uk (David Holroyd)
Date: Tue Aug  8 06:47:33 2006
Subject: [antlr-interest] ANTLR 3 & hidden token management?
In-Reply-To: <E5AD5E55-3F62-4A8E-86C2-CE169D3F9519@cs.usfca.edu>
References: <20060806171038.GB29734@badgers-in-foil.co.uk>
	<5DEEF0F3-3731-4778-A267-0666078C218C@cs.usfca.edu>
	<20060806201734.GC29734@badgers-in-foil.co.uk>
	<E5AD5E55-3F62-4A8E-86C2-CE169D3F9519@cs.usfca.edu>
Message-ID: <20060808134728.GB5995@badgers-in-foil.co.uk>

On Mon, Aug 07, 2006 at 02:54:28PM -0700, Terence Parr wrote:
> On Aug 6, 2006, at 1:17 PM, David Holroyd wrote:
> >I can see how that would give access to {channel=99} tokens  
> >produced by
> >lexing and parsing.  However, I want to be able to insert 'synthetic'
> >nodes into the AST / token stream, as I'm building an API for
> >programmatic code generation.
> 
> Ah!  okay, hmm....  I guess there is no input token number associated  
> with these nodes.

If I understand ANTLR3's Trees correctly, I think I would need to add
tokens to the stream as well as nodes into the tree, as not all the
nodes are imaginary (the real nodes need to appear when the tree is
eventually pretty-printed)...


> If it is the root node, then ANTLR will  
> automatically set the start/stop indexes.  If the imaginary node is  
> in the middle of the tree somewhere then yes you would have to update  
> those indexes yourself.  Are you asking about inserting nodes after  
> the fact of tree construction? if so, I simple possibly recursive  
> function will handle the token update per my article on the website  
> about tracking token indices with version 2.

I have a sort-of Document Object Model for my target language, where
each DOM node holds a reference to the relevant node within the AST.

So, a user of the DOM can enumerate the method-defs within a class-def
(which was maybe parsed from a file), but then they can use that
method-def object to append additional statements to the method body,
e.g.:

  meth.addStmt("return foo;");

So the implementation of addStmt() calls in to the Parser's 'statement'
production, and links the resulting AST subtree back into the
compilation unit.

In other cases, I don't bother using the Parser to construct the AST
subtree, and just instantiate nodes directly.  For instance, this code
implements the addition of a default: label to a switch-statement in the
target language:

  public StatementContainer newDefault() {
    AST defaultStmt = ASTUtils.newAST(AS3TokenTypes.LITERAL_default,
                                      "default");
    ast.addChild(defaultStmt);
    return new ASTStatementList(defaultStmt);
  }



My planned typical usage of this DOM API will actually construct the
entire compilation unit using lots of invocations of that type, so I'll
need to walk the entire AST on virtually every method call.

Well, maybe that's fine... better not optimise too early, eh? ;)


dave

-- 
http://david.holroyd.me.uk/
From kroepke at classdump.org  Tue Aug  8 06:51:10 2006
From: kroepke at classdump.org (Kay Roepke)
Date: Tue Aug  8 06:51:20 2006
Subject: [stringtemplate-interest] RE: [antlr-interest] Antlr 3beta2 and
	StringTemplate
In-Reply-To: <44D8935D.90608@gmail.com>
References: <004c01c6bac2$09c0f460$c704a8c0@hercules>
	<5D05E359-56FD-41CE-9882-3737B536D779@classdump.org>
	<44D8935D.90608@gmail.com>
Message-ID: <279EAE05-583A-4FFF-B20D-7FD7651CAF3C@classdump.org>

Moin Scott!

On 8. Aug 2006, at 15:36 Uhr, Scott Amort wrote:

> I'm quite keen on a C++ version, and have been hacking away at it  
> for the past week or so.  I haven't reached any of the really hairy  
> bits yet, but I think it is definitely possible.  However, like  
> Michael suggested, the major headaches will come with cross- 
> platform and cross-compiler support.

Yes, those are always the biggies. The code problem will probably  
come when you reach the parts of setting the actual attributes and  
try to figure
out how to support multi-valued attributes. The Java version tries to  
convert anything to an iterable structure so that later parts do not
need to know anything about the actual datastructures passed in. I  
don't think it is impossible, but could be tricky. Maybe this is just a
limitation C++ users would have to live with, but probably they will  
not be surprised to have to pass in STL containers only (or whatever
you choose to support) since they are used to the strict typing in  
their language.

> Regarding a C++/Obj-C hybrid, although I'm all for saving doing the  
> same work twice, I would suggest that in the long run it is likely  
> easiest (and more maintainable) to focus on a single language  
> choice (i.e., make a C++ port *and* make an Obj-C port).

Yes, again ;) I will definitely have the Obj-C port standalone,  
because I do not gain anything by using C++ under the hood. Quite the  
contrary.
I avoid Obj-C++ whenever possible since it tends to clutter the code  
and sometimes has some sharp edges which can be surprising. Though  
I'm told
it has gotten much better these days.
Of course there will be a couple of plain C places in the code, maybe  
we can discuss possible common code and try to share it, maybe not.
I don't mind doing the port by myself, but sharing is always  
nice...esp. if it speeds up development, we'll see.

After I finish the AST support for ANTLR-ObjC I will take a look at  
the ST port, what needs to be done, what parts are the most important  
etc.
I have some of the ST grammars in v3 already (one ANTLR bug is  
currently being investigated by Ter), so I will try to base it on v3  
completely.
That of course is also a limiting factor on the timeframe I'm doing  
the port in.

Regards,

-k

-- 
Kay R?pke <kroepke@classdump.org>
classdump Software


From thomas.rolfs at cox.net  Tue Aug  8 11:14:10 2006
From: thomas.rolfs at cox.net (Thomas Rolfs)
Date: Tue Aug  8 11:14:24 2006
Subject: [antlr-interest] Detecting incomplete input in ANTLR V2
In-Reply-To: <44D88D59.2000605@gmail.com>
References: <41fed8f80608071857o6b821f94ub598e90349655b6e@mail.gmail.com>
	<64835348.20060807210204@cox.net>
	<10010146441.20060808011207@cox.net> <44D88D59.2000605@gmail.com>
Message-ID: <1852832870.20060808111410@cox.net>




Scott wrote:
> I'm not sure how (or why) you could do this as MismatchedTokenException
> derives from RecognitionException, not the other way around (i.e. any 
> MismatchedTokenException will be caught by the more general 
> RecognitionException).  Perhaps you meant downcasting?  But either way, 
> I don't see why you would need to have altered RecognitionException.

Sorry, I meant downcast. RTTI is not an option for me so I had to add
my own RTTI info. However, I'm not familiar with the code and I have
never used C++ exceptions in anger so if there is an elegant solution
I'm all ears.

I also just hit the problem of trying to trap the EOF exception in the
lexer. The lexer catches RecognitionException and re-throws it as
TokeStreamRecognitionException but in the process loses the original
exception information.

Again, if there is a right way to do this I'm all ears.


-- 
Thomas Rolfs

From prashant.deva at gmail.com  Tue Aug  8 11:27:40 2006
From: prashant.deva at gmail.com (Prashant Deva)
Date: Tue Aug  8 11:27:55 2006
Subject: [antlr-interest] ANTLR Studio: Academic Licenses available
In-Reply-To: <003b01c6babd$ae683cd0$c704a8c0@hercules>
References: <41fed8f80608071857o6b821f94ub598e90349655b6e@mail.gmail.com>
	<003b01c6babd$ae683cd0$c704a8c0@hercules>
Message-ID: <41fed8f80608081127i3c4f671cx65fd6126ca3609bb@mail.gmail.com>

Hi Kunle,
  Thanks for letting me know :)

I have removed the requirement for the .edu address.

-- 
Prashant Deva
Creator, ANTLR Studio
Founder, Placid Systems, www.placidsystems.com


On 8/8/06, Micheal J <open.zone@virgin.net> wrote:
>
>  Prashant,
>
> FYI: The .edu domain isn't used by the majority of educational
> establishments. Particularly outside the US.
>
> Kunle
>
> -----------------------
> The best way to contact me is via the list/forum. My time is very limited.
>
>  -----Original Message-----
> *From:* antlr-interest-bounces@antlr.org [mailto:
> antlr-interest-bounces@antlr.org] *On Behalf Of *Prashant Deva
> *Sent:* 08 August 2006 02:57
> *To:* Antlr Interest
> *Subject:* [antlr-interest] ANTLR Studio: Academic Licenses available
>
> Due to the huge demand, Academic Licenses of ANTLR Studio are now
> available.
> You can get these for only $25 instead of the usual $99.
>
> To get one send me an email at ' pdeva@placidystems.com' with the subject
> Academic License.
> The mail should contain the name of your univ, your project details and it
> should be from a .edu address.
>
> Have fun  :)
> --
> Prashant Deva
> Creator, ANTLR Studio
> Founder, Placid Systems, www.placidsystems.com
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060808/1b83217e/attachment.html
From mail at martin-probst.com  Tue Aug  8 12:14:33 2006
From: mail at martin-probst.com (Martin Probst)
Date: Tue Aug  8 12:14:39 2006
Subject: [antlr-interest] How to subtract/and two lexer rules in ANTLR v3.0
In-Reply-To: <6368ffc60608080636p7252484aibbbd79847bcef099@mail.gmail.com>
References: <6368ffc60608080636p7252484aibbbd79847bcef099@mail.gmail.com>
Message-ID: <8989112F-FD8A-4A71-9E04-C4BAA6D14187@martin-probst.com>

Hi,

> definition  :    '<?' (options {greedy=false;} : Char)* '?>'    ;

This should really be a lexer rule, e.g.
DEFINITION: ...;

If it throws a MismatchedTokenException, try writing it as a lexer  
rule, maybe some of the character end up as a wrong token otherwise.

Btw., shouldn't the PI rule be rather something like:
<? NCName ( WS ( Char )* )? ?>
?

HTH,
Martin

From costa_basil at yahoo.ca  Tue Aug  8 12:15:24 2006
From: costa_basil at yahoo.ca (Costa Basil)
Date: Tue Aug  8 12:15:31 2006
Subject: [antlr-interest] antlr 2.7.6: newbie question - getting the
	lastmatched token
In-Reply-To: <004501c6babf$df80fc10$c704a8c0@hercules>
Message-ID: <20060808191524.51826.qmail@web53512.mail.yahoo.com>

  There's got to be an easier way. Would LT(0) work?

Micheal J <open.zone@virgin.net> wrote:   Message    Declare as a subrule and lebel the reference to the  subrule. It has a cost of at least an extra method call but, it does what you  want right?
  
 Micheal
 -----------------------
The best way to contact me is via  the list/forum. My time is very limited. 
    
   -----Original Message-----
From:    antlr-interest-bounces@antlr.org [mailto:antlr-interest-bounces@antlr.org]    On Behalf Of Costa Basil
Sent: 08 August 2006    08:48
To: antlr-interest@antlr.org
Subject:    [antlr-interest] antlr 2.7.6: newbie question - getting the lastmatched    token


How can I get the last matched token? I have the    following case:

 (T1 | T2 ... | Tn) { action }
where Ti are    terminals. In my action I want to get the token that was matched and I don't    want to declare labels to each of the tokens because it is too cumbersome.    Also for whatever reason, antlr doesn't let me use identical labels for each    alternative.

Thanks

      

---------------------------------
   Be smarter than spam. See how smart SpamGuard is at giving junk email the boot    with the All-new    Yahoo! Mail 

 __________________________________________________
Do You Yahoo!?
Tired of spam?  Yahoo! Mail has the best spam protection around 
http://mail.yahoo.com 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060808/a298366b/attachment.html
From lgcraymer at yahoo.com  Tue Aug  8 12:44:16 2006
From: lgcraymer at yahoo.com (Loring Craymer)
Date: Tue Aug  8 12:44:22 2006
Subject: [antlr-interest] antlr 2.7.6: newbie question - getting the
	lastmatched token
In-Reply-To: <20060808191524.51826.qmail@web53512.mail.yahoo.com>
Message-ID: <20060808194416.92472.qmail@web55911.mail.re3.yahoo.com>

Use LT(1) before the match.

--Loring

Costa Basil <costa_basil@yahoo.ca> wrote:   There's got to be an easier way. Would LT(0) work?

Micheal J <open.zone@virgin.net> wrote:   Message    Declare as a subrule and lebel the reference to the  subrule. It has a cost of at least an extra method call but, it does what you  want right?
  
 Micheal
 -----------------------
The best way to contact me is via  the list/forum. My time is very limited. 
    
   -----Original Message-----
From:    antlr-interest-bounces@antlr.org [mailto:antlr-interest-bounces@antlr.org]    On Behalf Of Costa Basil
Sent: 08 August 2006    08:48
To: antlr-interest@antlr.org
Subject:    [antlr-interest] antlr 2.7.6: newbie question - getting the lastmatched    token


How can I get the last matched token? I have the    following case:

 (T1 | T2 ... | Tn) { action }
where Ti are    terminals. In my action I want to get the token that was matched and I don't    want to declare labels to each of the tokens because it is too cumbersome.    Also for whatever reason, antlr doesn't let me use identical labels for each    alternative.

Thanks

      

---------------------------------
    Be smarter than spam. See how smart SpamGuard is at giving junk email the boot    with the All-new    Yahoo! Mail 
 __________________________________________________
Do You Yahoo!?
Tired of spam?  Yahoo! Mail has the best spam protection around 
http://mail.yahoo.com 


 		
---------------------------------
Yahoo! Messenger with Voice. Make PC-to-Phone Calls to the US (and 30+ countries) for 2?/min or less.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060808/6e4e7833/attachment.html
From madcapmaggie at yahoo.com  Tue Aug  8 14:00:54 2006
From: madcapmaggie at yahoo.com (Peggy Fieland)
Date: Tue Aug  8 14:00:59 2006
Subject: [antlr-interest] Detecting incomplete input in ANTLR V2
In-Reply-To: <1852832870.20060808111410@cox.net>
Message-ID: <20060808210055.57068.qmail@web60012.mail.yahoo.com>

I don't know about the right way to solve your
probleem, but you can specify an uponEOF() routine of
your own.



--- Thomas Rolfs <thomas.rolfs@cox.net> wrote:

> 
> 
> 
> Scott wrote:
> > I'm not sure how (or why) you could do this as
> MismatchedTokenException
> > derives from RecognitionException, not the other
> way around (i.e. any 
> > MismatchedTokenException will be caught by the
> more general 
> > RecognitionException).  Perhaps you meant
> downcasting?  But either way, 
> > I don't see why you would need to have altered
> RecognitionException.
> 
> Sorry, I meant downcast. RTTI is not an option for
> me so I had to add
> my own RTTI info. However, I'm not familiar with the
> code and I have
> never used C++ exceptions in anger so if there is an
> elegant solution
> I'm all ears.
> 
> I also just hit the problem of trying to trap the
> EOF exception in the
> lexer. The lexer catches RecognitionException and
> re-throws it as
> TokeStreamRecognitionException but in the process
> loses the original
> exception information.
> 
> Again, if there is a right way to do this I'm all
> ears.
> 
> 
> -- 
> Thomas Rolfs
> 
> 

From thomas.rolfs at cox.net  Tue Aug  8 15:29:34 2006
From: thomas.rolfs at cox.net (Thomas Rolfs)
Date: Tue Aug  8 15:29:40 2006
Subject: [antlr-interest] Detecting incomplete input in ANTLR V2
In-Reply-To: <20060808210055.57068.qmail@web60012.mail.yahoo.com>
References: <1852832870.20060808111410@cox.net>
	<20060808210055.57068.qmail@web60012.mail.yahoo.com>
Message-ID: <39583331.20060808152934@cox.net>


Peggy wrote:
> I don't know about the right way to solve your
> probleem, but you can specify an uponEOF() routine of
> your own.

Thanks, I saw that. Unfortunately it only hooks "normal" EOFs that
appear between rules so you can do lexer state transitions for features like
"#include". It doesn't catch abnormal EOFs that occur within rules due
to incomplete input.

Again, I hacked TokenStreamRecognitionException to propagate the info
I needed and it works now. I am using this feature to automatically
buffer up user input until there is enough valid input to continue.

Up till now I have avoided hacking ANTLR. However, my compiler has
been stable for over a year and I don't plan any upgrades to
newer versions of V2. My next upgrade will be to V3.

I hope V3 won't have the same limitations with exceptions/error
trapping. However, I plan to write my own C++ code generator to meet
my particular runtime needs so the ball will be in my court in that
regard :-)

BTW Ter and Co., I have been using ANTLR in for the last two years to develop a
new scripting language for video game development. I can't begin to
express how powerful and effective ANLTR has been for me. And V3 looks like
it'll be da'bomb too! Well done, all!

-- 
Thomas Rolfs

From swalton at cs.utah.edu  Tue Aug  8 16:29:01 2006
From: swalton at cs.utah.edu (Sean Walton)
Date: Tue Aug  8 16:29:10 2006
Subject: [antlr-interest] (V3) Heterogeneous ASTs
Message-ID: <44D91E3D.7070303@cs.utah.edu>

I noticed that 2.7 supports heterogeneous trees.  The syntax for it is 
not supported in 3.0 (yet?), but can I do the same thing by doing a 
{this.setTreeAdaptor(specialAdaptor);} ?
-Sean
From oliver.zeigermann at gmail.com  Wed Aug  9 04:38:23 2006
From: oliver.zeigermann at gmail.com (Oliver Zeigermann)
Date: Wed Aug  9 04:38:36 2006
Subject: [antlr-interest] ANTLR 3 XML Parsing Tutorial finished
Message-ID: <9da4f4520608090438s508d8e35qa11fecc880d23dae@mail.gmail.com>

Folks!

I have finally finished my XML parsing tutorial at

http://www.antlr.org/wiki/display/ANTLR3/Parsing+XML

I would very much like it to be actually useful. Especially, because I
have spent much more time than planned on this.

Comments, suggestions for enhancement etc. are thus highly welcome.

Cheers

Oliver
From mai00cas at studserv.uni-leipzig.de  Wed Aug  9 07:33:25 2006
From: mai00cas at studserv.uni-leipzig.de (Magnus Knuth)
Date: Wed Aug  9 07:33:33 2006
Subject: [antlr-interest] ANTLR lexer vs. JFace RuleBasedScanner
References: 4EFE19E52F4F844D997F24D759C4A23BD6835C@etg2.etg.local
Message-ID: <44D9F235.5030507@studserv.uni-leipzig.de>

>
> >/ For syntax highlighting I'm at a loss. What is not obvious to me is
> />/ how to avoid the PresentationReconciler, or at least make it use my
> />/ scan/parse already performed.
> /
> As far as I understand that underdocumented and overcomplicated API, you
> can't. They consider reconciling and text highlighting to be two
> completely different things (which might actually be a sane decision).
> You can however implement the Scanner interface and return tokens
> wrapping the ANTLR tokens.
>
> >/ Can someone point me to an example where ANTLR is used for syntax
> />/ highlighting in an Eclipse TextEditor project? Thanks.
> /
> I guess ANTLREclipse does?
>   

No sorry, it doesn't.
That is the reason why the ANTLREclipse editor is somehow boring and
still an embryonic help, it only highlights the ANTLR & JAVA keywords
and comments to you, it does not know much about your grammar, nor it's own.
ANTLR itself is mainly used for cursor-awareness: outline generation and
hovers, not even for simple syntax error recognition or colourful
distinction of token and rule elements.

From parrt at cs.usfca.edu  Wed Aug  9 10:33:33 2006
From: parrt at cs.usfca.edu (Terence Parr)
Date: Wed Aug  9 10:33:53 2006
Subject: [antlr-interest] (V3) Heterogeneous ASTs
In-Reply-To: <44D91E3D.7070303@cs.utah.edu>
References: <44D91E3D.7070303@cs.utah.edu>
Message-ID: <416282C2-630E-4CC7-96AE-E17FCBA4B0B9@cs.usfca.edu>


On Aug 8, 2006, at 4:29 PM, Sean Walton wrote:

> I noticed that 2.7 supports heterogeneous trees.  The syntax for it  
> is not supported in 3.0 (yet?), but can I do the same thing by  
> doing a {this.setTreeAdaptor(specialAdaptor);} ?

Yep :) simply override the create method to make it build different  
type nodes based upon the tokenType coming in.

   Later, we will support more specific typing like 2.7 or something  
more impressive.  Emond Papegaaij is currently working on some very  
interesting ideas in this area. I'm assuming he will provide a public  
link to his report once it is completed.

Terence
From xzheng at doubleclick.net  Wed Aug  9 10:49:27 2006
From: xzheng at doubleclick.net (Zheng, Xiaoran)
Date: Wed Aug  9 10:49:14 2006
Subject: [antlr-interest] handling include directives
Message-ID: <CB8E43806EA4084A9B90A3CB12DB4F6009E20EDD@NYC-EXCLS1.dc1.doubleclick.corp>

I am trying to recognize "include filename;". I saw the example
includeFile that comes with the source distribution, but how would I do
this in the lexer if the word "include" creates nondeterminism with an
identifier rule? 
 
Thanks,
Xiaoran
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060809/56284658/attachment.html
From jarrod at vertigrated.com  Wed Aug  9 11:08:17 2006
From: jarrod at vertigrated.com (jarrod roberson)
Date: Wed Aug  9 11:08:28 2006
Subject: [antlr-interest] Parsing Binary Files with ANTLR V3.x? Any examples?
Message-ID: <2389d4730608091108m33669645l4d3a6f5c4b5f3060@mail.gmail.com>

anyone have any examples on how to parse binary files with ANTLR V3?
I have looked everywhere and can't find anything substaintial.

I have a very basic fixed length binary header that I need to parse,
and instead of writing a parser for C, Java and Python, I want to use
ANTLR to generate them so I only have to manage one file when I get
ready to update the headers.

I know the V3 generators for Python and C might not be cutting edge,
but I wanted to try and be as forward looking as possible.

I can always fall back to 2.x if 3.x isn't ready for prime time.

Thanks in advance.
From parrt at cs.usfca.edu  Wed Aug  9 11:31:59 2006
From: parrt at cs.usfca.edu (Terence Parr)
Date: Wed Aug  9 11:32:05 2006
Subject: [antlr-interest] Parsing Binary Files with ANTLR V3.x? Any
	examples?
In-Reply-To: <2389d4730608091108m33669645l4d3a6f5c4b5f3060@mail.gmail.com>
References: <2389d4730608091108m33669645l4d3a6f5c4b5f3060@mail.gmail.com>
Message-ID: <993CA851-9FCF-4465-997F-4A2BBF1AD410@cs.usfca.edu>


On Aug 9, 2006, at 11:08 AM, jarrod roberson wrote:

> anyone have any examples on how to parse binary files with ANTLR V3?
> I have looked everywhere and can't find anything substaintial.

I have not tried yet, but you'll probably need a new stream other  
than CharStream.  ANTLRByteStream perhaps.

Then, just use unicode '\u00xx' chars in your lexer.
Ter

> I have a very basic fixed length binary header that I need to parse,
> and instead of writing a parser for C, Java and Python, I want to use
> ANTLR to generate them so I only have to manage one file when I get
> ready to update the headers.
>
> I know the V3 generators for Python and C might not be cutting edge,
> but I wanted to try and be as forward looking as possible.
>
> I can always fall back to 2.x if 3.x isn't ready for prime time.
>
> Thanks in advance.

From jbb at acm.org  Wed Aug  9 12:47:45 2006
From: jbb at acm.org (John B. Brodie)
Date: Wed Aug  9 12:47:52 2006
Subject: [antlr-interest] [V3] Null Pointer Exception on bad input
	containing optional options
Message-ID: <E1GAu1p-0002FK-00@gecko>

Greetings!

the following grammar gets a null pointer exception (rather than a
nice error message about its ambiguity):


grammar t;
foo : JUNK* EOF ;
JUNK : 'foo' ( 'bar'? 'baz'? )? ;



did not see anything similar on the wiki's bug list.

is this the best place to report these things?

if it matters, i am using:
ANTLR Parser Generator   Early Access Version 3.0b3 (July 21, 2006)  1989-2006

    -jbb
From parrt at cs.usfca.edu  Wed Aug  9 12:55:01 2006
From: parrt at cs.usfca.edu (Terence Parr)
Date: Wed Aug  9 12:55:06 2006
Subject: [antlr-interest] [V3] Null Pointer Exception on bad input
	containing optional options
In-Reply-To: <E1GAu1p-0002FK-00@gecko>
References: <E1GAu1p-0002FK-00@gecko>
Message-ID: <AED427F7-0DA9-4FCE-A7C1-83F9BF5034B6@cs.usfca.edu>


On Aug 9, 2006, at 12:47 PM, John B. Brodie wrote:

> Greetings!
>
> the following grammar gets a null pointer exception (rather than a
> nice error message about its ambiguity):
>
>
> grammar t;
> foo : JUNK* EOF ;
> JUNK : 'foo' ( 'bar'? 'baz'? )? ;
>
>
>
> did not see anything similar on the wiki's bug list.
>
> is this the best place to report these things?

yep :)

> if it matters, i am using:
> ANTLR Parser Generator   Early Access Version 3.0b3 (July 21,  
> 2006)  1989-2006

Thanks...i fixed this yesterday.  now I get:

ANTLR Parser Generator   Early Access Version 3.0b4 (??, 2006)   
1989-2006
duh.g:5:14: Decision can match input such as "<EOT>" using multiple  
alternatives: 1, 2
As a result, alternative(s) 2 were disabled for that input
duh.g:5:14: The following alternatives are unreachable: 2

which is the correct message.

Ter
From parrt at cs.usfca.edu  Wed Aug  9 12:57:15 2006
From: parrt at cs.usfca.edu (Terence Parr)
Date: Wed Aug  9 12:57:19 2006
Subject: [antlr-interest] ANTLR 3 & hidden token management?
In-Reply-To: <20060808134728.GB5995@badgers-in-foil.co.uk>
References: <20060806171038.GB29734@badgers-in-foil.co.uk>
	<5DEEF0F3-3731-4778-A267-0666078C218C@cs.usfca.edu>
	<20060806201734.GC29734@badgers-in-foil.co.uk>
	<E5AD5E55-3F62-4A8E-86C2-CE169D3F9519@cs.usfca.edu>
	<20060808134728.GB5995@badgers-in-foil.co.uk>
Message-ID: <516D1249-E7FA-4313-A004-8A42044B74BB@cs.usfca.edu>


On Aug 8, 2006, at 6:47 AM, David Holroyd wrote:

> On Mon, Aug 07, 2006 at 02:54:28PM -0700, Terence Parr wrote:
>> On Aug 6, 2006, at 1:17 PM, David Holroyd wrote:
>>> I can see how that would give access to {channel=99} tokens
>>> produced by
>>> lexing and parsing.  However, I want to be able to insert  
>>> 'synthetic'
>>> nodes into the AST / token stream, as I'm building an API for
>>> programmatic code generation.
>>
>> Ah!  okay, hmm....  I guess there is no input token number associated
>> with these nodes.
>
> If I understand ANTLR3's Trees correctly, I think I would need to add
> tokens to the stream as well as nodes into the tree, as not all the
> nodes are imaginary (the real nodes need to appear when the tree is
> eventually pretty-printed)...

using the -> rewrite notation makes it easy to add these, but if  
you're doing manually, I believe you can just create an imaginary  
token to hold your text/type.  See ClassicToken I think.

>> If it is the root node, then ANTLR will
>> automatically set the start/stop indexes.  If the imaginary node is
>> in the middle of the tree somewhere then yes you would have to update
>> those indexes yourself.  Are you asking about inserting nodes after
>> the fact of tree construction? if so, I simple possibly recursive
>> function will handle the token update per my article on the website
>> about tracking token indices with version 2.
>
> I have a sort-of Document Object Model for my target language, where
> each DOM node holds a reference to the relevant node within the AST.
>
> So, a user of the DOM can enumerate the method-defs within a class-def
> (which was maybe parsed from a file), but then they can use that
> method-def object to append additional statements to the method body,
> e.g.:
>
>   meth.addStmt("return foo;");
>
> So the implementation of addStmt() calls in to the Parser's  
> 'statement'
> production, and links the resulting AST subtree back into the
> compilation unit.
>
> In other cases, I don't bother using the Parser to construct the AST
> subtree, and just instantiate nodes directly.  For instance, this code
> implements the addition of a default: label to a switch-statement  
> in the
> target language:
>
>   public StatementContainer newDefault() {
>     AST defaultStmt = ASTUtils.newAST(AS3TokenTypes.LITERAL_default,
>                                       "default");
>     ast.addChild(defaultStmt);
>     return new ASTStatementList(defaultStmt);
>   }

I see.  Well, that makes it harder to use the token stream as you  
say.  Perhaps you are better off replicating the hiddentoken linked  
lists of 2.7.x?

> My planned typical usage of this DOM API will actually construct the
> entire compilation unit using lots of invocations of that type, so  
> I'll
> need to walk the entire AST on virtually every method call.
>
> Well, maybe that's fine... better not optimise too early, eh? ;)

:)

Ter
From jbb at acm.org  Wed Aug  9 12:58:05 2006
From: jbb at acm.org (John B. Brodie)
Date: Wed Aug  9 12:58:13 2006
Subject: [antlr-interest] [V3] error report request - include grammar name
	in message text.
Message-ID: <E1GAuBp-0002Fa-00@gecko>

Greetings!

for this version of antlr:

ANTLR Parser Generator   Early Access Version 3.0b3 (July 21, 2006)  1989-2006

when it prints an error message, it does not identify from which grammar the
error arose.

in a chain of a parser followed by several tree transformations, it would be
nice to know which of the grammars in the chain found the error.




Thanks! (is this the right place to mention these things?)
   -jbb

From parrt at cs.usfca.edu  Wed Aug  9 13:01:21 2006
From: parrt at cs.usfca.edu (Terence Parr)
Date: Wed Aug  9 13:01:29 2006
Subject: [antlr-interest] [V3] error report request - include grammar name
	in message text.
In-Reply-To: <E1GAuBp-0002Fa-00@gecko>
References: <E1GAuBp-0002Fa-00@gecko>
Message-ID: <B55DDB6A-7D49-4DF1-8557-E134FBE3B836@cs.usfca.edu>


On Aug 9, 2006, at 12:58 PM, John B. Brodie wrote:

> Greetings!
>
> for this version of antlr:
>
> ANTLR Parser Generator   Early Access Version 3.0b3 (July 21,  
> 2006)  1989-2006
>
> when it prints an error message, it does not identify from which  
> grammar the
> error arose.

It does for me:

duh.g:5:14: Decision can match input such as "<EOT>" using multiple  
alternatives: 1, 2

what error did you get?

> Thanks! (is this the right place to mention these things?)

Yep.

Ter
From xzheng at doubleclick.net  Wed Aug  9 13:22:26 2006
From: xzheng at doubleclick.net (Zheng, Xiaoran)
Date: Wed Aug  9 13:22:13 2006
Subject: [antlr-interest] java.util.NoSuchElementException
Message-ID: <CB8E43806EA4084A9B90A3CB12DB4F6009E20EDE@NYC-EXCLS1.dc1.doubleclick.corp>

When I have a grammar defined as follows:
 
A : B*C*
B : ...
C : ...
 
why do I get an NoSuchElementException?
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060809/9e1c0157/attachment.html
From jbb at acm.org  Wed Aug  9 13:28:45 2006
From: jbb at acm.org (John B. Brodie)
Date: Wed Aug  9 13:28:48 2006
Subject: [antlr-interest] [V3] error report request - include grammar name
	in message text.
In-Reply-To: <B55DDB6A-7D49-4DF1-8557-E134FBE3B836@cs.usfca.edu> (message from
	Terence Parr on Wed, 09 Aug 2006 13:01:21 -0700)
References: <E1GAuBp-0002Fa-00@gecko>
	<B55DDB6A-7D49-4DF1-8557-E134FBE3B836@cs.usfca.edu>
Message-ID: <E1GAufV-0005OQ-00@gecko>

Sorry, I was imprecise.

>On Aug 9, 2006, at 12:58 PM, John B. Brodie wrote:
>
>> Greetings!
>>
>> for this version of antlr:
>>
>> ANTLR Parser Generator   Early Access Version 3.0b3 (July 21, 2006)  1989-2006
>>
>> when it prints an error message, it does not identify from which  
>> grammar the error arose.
>
>It does for me:
>
>duh.g:5:14: Decision can match input such as "<EOT>" using multiple  
>alternatives: 1, 2
>
>what error did you get?

I meant messages produced by generated parsers, not messages from the Tool.

I am playing with an example expression parser.  ',' is not legal in that
toy grammar.  When I run the generated parser and a subsequent tree walker
on an input containing just a ',' I get:

[program, expression, simple_expr, short_circuit, comparand, signed_term]: line 1:0 state 0 (decision=6) no viable alt; token=[@0,0:0=',',<52>,1:0]
[program]: line 0:0 mismatched tree node: EOF; expecting type <DOWN>

the first message is from the parser and the second from the tree walker, i
think. it would be nice to know for sure which generated parser issued each
message.

(of course i should not execute the tree walker when the parser has
found an error - but i am not that sophisticated ;-)

Thanks!
   -jbb

From parrt at cs.usfca.edu  Wed Aug  9 13:28:49 2006
From: parrt at cs.usfca.edu (Terence Parr)
Date: Wed Aug  9 13:28:57 2006
Subject: [antlr-interest] java.util.NoSuchElementException
In-Reply-To: <CB8E43806EA4084A9B90A3CB12DB4F6009E20EDE@NYC-EXCLS1.dc1.doubleclick.corp>
References: <CB8E43806EA4084A9B90A3CB12DB4F6009E20EDE@NYC-EXCLS1.dc1.doubleclick.corp>
Message-ID: <9C4A2BEE-BFA8-4CD0-A13F-F1FCC079A38B@cs.usfca.edu>


On Aug 9, 2006, at 1:22 PM, Zheng, Xiaoran wrote:

> When I have a grammar defined as follows:
>
> A : B*C*
> B : ...
> C : ...
>
> why do I get an NoSuchElementException?

what version?  you missing a semicolon?  A complete grammar please.
Ter
From xzheng at doubleclick.net  Wed Aug  9 13:31:56 2006
From: xzheng at doubleclick.net (Zheng, Xiaoran)
Date: Wed Aug  9 13:31:44 2006
Subject: [antlr-interest] java.util.NoSuchElementException
Message-ID: <CB8E43806EA4084A9B90A3CB12DB4F6009E20EDF@NYC-EXCLS1.dc1.doubleclick.corp>

 
The exception is thrown from "uponEOF" which I defined in the lexer.

-----Original Message-----
From: antlr-interest-bounces@antlr.org
[mailto:antlr-interest-bounces@antlr.org] On Behalf Of Terence Parr
Sent: Wednesday, August 09, 2006 4:29 PM
To: Antlr Interest
Subject: Re: [antlr-interest] java.util.NoSuchElementException


On Aug 9, 2006, at 1:22 PM, Zheng, Xiaoran wrote:

> When I have a grammar defined as follows:
>
> A : B*C*
> B : ...
> C : ...
>
> why do I get an NoSuchElementException?

what version?  you missing a semicolon?  A complete grammar please.
Ter
From xzheng at doubleclick.net  Wed Aug  9 13:45:38 2006
From: xzheng at doubleclick.net (Zheng, Xiaoran)
Date: Wed Aug  9 13:45:25 2006
Subject: [antlr-interest] Matching keywords in the lexer
Message-ID: <CB8E43806EA4084A9B90A3CB12DB4F6009E20EE0@NYC-EXCLS1.dc1.doubleclick.corp>

 
Hi, I am still working on the problem of nested include files.

I am trying to match "keyword filename;", keyword clashes with the
identifier rule. Is there anyway for me to resolve this in the lexer and
do a "keyword filename;" match?

Thanks.

-----Original Message-----
From: antlr-interest-bounces@antlr.org
[mailto:antlr-interest-bounces@antlr.org] On Behalf Of Zheng, Xiaoran
Sent: Wednesday, August 09, 2006 4:32 PM
To: Antlr Interest
Subject: RE: [antlr-interest] java.util.NoSuchElementException

 
The exception is thrown from "uponEOF" which I defined in the lexer.

-----Original Message-----
From: antlr-interest-bounces@antlr.org
[mailto:antlr-interest-bounces@antlr.org] On Behalf Of Terence Parr
Sent: Wednesday, August 09, 2006 4:29 PM
To: Antlr Interest
Subject: Re: [antlr-interest] java.util.NoSuchElementException


On Aug 9, 2006, at 1:22 PM, Zheng, Xiaoran wrote:

> When I have a grammar defined as follows:
>
> A : B*C*
> B : ...
> C : ...
>
> why do I get an NoSuchElementException?

what version?  you missing a semicolon?  A complete grammar please.
Ter
From xzheng at doubleclick.net  Wed Aug  9 14:31:18 2006
From: xzheng at doubleclick.net (Zheng, Xiaoran)
Date: Wed Aug  9 14:31:06 2006
Subject: [antlr-interest] Matching keywords in the lexer
Message-ID: <CB8E43806EA4084A9B90A3CB12DB4F6009E20EE1@NYC-EXCLS1.dc1.doubleclick.corp>

 I defined this in my lexer to distinguish between the keyword "include"
with other identifiers.

     protected
     ID options{testLiterals=true;/*I have other keywords defined in the
parser*/}
              : ('_'|'a'..'z'|'A'..'Z')('_'|'a'..'z'|'A'..'Z'|'0'..'9')*
              ;
     protected
     INCLUDE  : ("include" STRING SEMI) {/*I will add the code to deal
w/ this later*/}
              ;
     ID_OR_INCLUDE 
              : (ID)=>ID  {$setType(ID);}
              | INCLUDE                          
		  ;

 Is this correct? If so, it doesn't seem to work. What am I doing wrong?

 Any help would be greatly appreciated. Thanks.


-----Original Message-----
From: antlr-interest-bounces@antlr.org
[mailto:antlr-interest-bounces@antlr.org] On Behalf Of Zheng, Xiaoran
Sent: Wednesday, August 09, 2006 4:46 PM
To: Antlr Interest
Subject: [antlr-interest] Matching keywords in the lexer

 
Hi, I am still working on the problem of nested include files.

I am trying to match "keyword filename;", keyword clashes with the
identifier rule. Is there anyway for me to resolve this in the lexer and
do a "keyword filename;" match?

Thanks.

-----Original Message-----
From: antlr-interest-bounces@antlr.org
[mailto:antlr-interest-bounces@antlr.org] On Behalf Of Zheng, Xiaoran
Sent: Wednesday, August 09, 2006 4:32 PM
To: Antlr Interest
Subject: RE: [antlr-interest] java.util.NoSuchElementException

 
The exception is thrown from "uponEOF" which I defined in the lexer.

-----Original Message-----
From: antlr-interest-bounces@antlr.org
[mailto:antlr-interest-bounces@antlr.org] On Behalf Of Terence Parr
Sent: Wednesday, August 09, 2006 4:29 PM
To: Antlr Interest
Subject: Re: [antlr-interest] java.util.NoSuchElementException


On Aug 9, 2006, at 1:22 PM, Zheng, Xiaoran wrote:

> When I have a grammar defined as follows:
>
> A : B*C*
> B : ...
> C : ...
>
> why do I get an NoSuchElementException?

what version?  you missing a semicolon?  A complete grammar please.
Ter
From e.papegaaij at student.utwente.nl  Thu Aug 10 01:08:41 2006
From: e.papegaaij at student.utwente.nl (Emond Papegaaij)
Date: Thu Aug 10 01:10:08 2006
Subject: [antlr-interest] (V3) Heterogeneous ASTs
In-Reply-To: <416282C2-630E-4CC7-96AE-E17FCBA4B0B9@cs.usfca.edu>
References: <44D91E3D.7070303@cs.utah.edu>
	<416282C2-630E-4CC7-96AE-E17FCBA4B0B9@cs.usfca.edu>
Message-ID: <200608101008.42062.e.papegaaij@student.utwente.nl>

On Wednesday 09 August 2006 19:33, Terence Parr wrote:
> On Aug 8, 2006, at 4:29 PM, Sean Walton wrote:
> > I noticed that 2.7 supports heterogeneous trees.  The syntax for it
> > is not supported in 3.0 (yet?), but can I do the same thing by
> > doing a {this.setTreeAdaptor(specialAdaptor);} ?
>
> Yep :) simply override the create method to make it build different
> type nodes based upon the tokenType coming in.
>
>    Later, we will support more specific typing like 2.7 or something
> more impressive.  Emond Papegaaij is currently working on some very
> interesting ideas in this area. I'm assuming he will provide a public
> link to his report once it is completed.

Yes, it should all become publicly available. My current deadline still is 
mid-december, but I should be able to publish some stuff earlier.

Best regards,
Emond
From mail at martin-probst.com  Thu Aug 10 01:24:02 2006
From: mail at martin-probst.com (Martin Probst)
Date: Thu Aug 10 01:24:14 2006
Subject: [antlr-interest] [V3] error report request - include grammar name
	in message text.
In-Reply-To: <E1GAufV-0005OQ-00@gecko>
References: <E1GAuBp-0002Fa-00@gecko>
	<B55DDB6A-7D49-4DF1-8557-E134FBE3B836@cs.usfca.edu>
	<E1GAufV-0005OQ-00@gecko>
Message-ID: <4B7D0616-DED9-4A64-9AAA-900DC513541E@martin-probst.com>

Hi,

> [program, expression, simple_expr, short_circuit, comparand,  
> signed_term]: line 1:0 state 0 (decision=6) no viable alt; token= 
> [@0,0:0=',',<52>,1:0]
> [program]: line 0:0 mismatched tree node: EOF; expecting type <DOWN>
>
> the first message is from the parser and the second from the tree  
> walker, i
> think. it would be nice to know for sure which generated parser  
> issued each
> message.

I think this is somewhat out of the scope for ANTLR. For anything  
more than toy use you will have to write your own main routine,  
including error handlers etc. anyways.

Martin
From e.papegaaij at student.utwente.nl  Thu Aug 10 07:15:38 2006
From: e.papegaaij at student.utwente.nl (Emond Papegaaij)
Date: Thu Aug 10 07:17:33 2006
Subject: [antlr-interest] TreeAdaptor
Message-ID: <200608101615.38767.e.papegaaij@student.utwente.nl>

Hello

I'm trying to implement my own version of the TreeAdaptor interface, but 
have a few questions:

What is the 'getUniqueID' used for? Is it supposed to simply return a 
unique number for every node? As the Javadoc states using 'hashCode()' is 
dangerous. Maybe 'System.identityHashCode()' is an option?

What are the 'getChild(int i)' and 'getChildCount()' methods supposed to 
do? They are not being used anywhere. On which children do they operate? 
Maybe an additional method argument 'Object node' needs to be added?

Best regards,
Emond Papegaaij
From xzheng at doubleclick.net  Thu Aug 10 07:47:09 2006
From: xzheng at doubleclick.net (Zheng, Xiaoran)
Date: Thu Aug 10 07:47:39 2006
Subject: [antlr-interest] NoSuchElementException
Message-ID: <CB8E43806EA4084A9B90A3CB12DB4F6009E20EE2@NYC-EXCLS1.dc1.doubleclick.corp>

 
If I define my grammar as

definition: HELLO type SEMI

the parser makes a call to definition and everything works fine.

But if I change the grammar to

	main: (definition)*
	definition: HELLO type SEMI

the parser makes a call to main and I get NoSuchElementException. Can
someone explain to me why this happens?

Thanks.
From madcapmaggie at yahoo.com  Thu Aug 10 08:10:40 2006
From: madcapmaggie at yahoo.com (Peggy Fieland)
Date: Thu Aug 10 08:10:45 2006
Subject: [antlr-interest] Matching keywords in the lexer
In-Reply-To: <CB8E43806EA4084A9B90A3CB12DB4F6009E20EE1@NYC-EXCLS1.dc1.doubleclick.corp>
Message-ID: <20060810151040.78610.qmail@web60023.mail.yahoo.com>

I did it in the parser.  For example, you might
specify:

ident: ID | INCLUDE;



--- "Zheng, Xiaoran" <xzheng@doubleclick.net> wrote:

>  I defined this in my lexer to distinguish between
> the keyword "include"
> with other identifiers.
> 
>      protected
>      ID options{testLiterals=true;/*I have other
> keywords defined in the
> parser*/}
>               :
>
('_'|'a'..'z'|'A'..'Z')('_'|'a'..'z'|'A'..'Z'|'0'..'9')*
>               ;
>      protected
>      INCLUDE  : ("include" STRING SEMI) {/*I will
> add the code to deal
> w/ this later*/}
>               ;
>      ID_OR_INCLUDE 
>               : (ID)=>ID  {$setType(ID);}
>               | INCLUDE                          
> 		  ;
> 
>  Is this correct? If so, it doesn't seem to work.
> What am I doing wrong?
> 
>  Any help would be greatly appreciated. Thanks.
> 
> 
> -----Original Message-----
> From: antlr-interest-bounces@antlr.org
> [mailto:antlr-interest-bounces@antlr.org] On Behalf
> Of Zheng, Xiaoran
> Sent: Wednesday, August 09, 2006 4:46 PM
> To: Antlr Interest
> Subject: [antlr-interest] Matching keywords in the
> lexer
> 
>  
> Hi, I am still working on the problem of nested
> include files.
> 
> I am trying to match "keyword filename;", keyword
> clashes with the
> identifier rule. Is there anyway for me to resolve
> this in the lexer and
> do a "keyword filename;" match?
> 
> Thanks.
> 
> -----Original Message-----
> From: antlr-interest-bounces@antlr.org
> [mailto:antlr-interest-bounces@antlr.org] On Behalf
> Of Zheng, Xiaoran
> Sent: Wednesday, August 09, 2006 4:32 PM
> To: Antlr Interest
> Subject: RE: [antlr-interest]
> java.util.NoSuchElementException
> 
>  
> The exception is thrown from "uponEOF" which I
> defined in the lexer.
> 
> -----Original Message-----
> From: antlr-interest-bounces@antlr.org
> [mailto:antlr-interest-bounces@antlr.org] On Behalf
> Of Terence Parr
> Sent: Wednesday, August 09, 2006 4:29 PM
> To: Antlr Interest
> Subject: Re: [antlr-interest]
> java.util.NoSuchElementException
> 
> 
> On Aug 9, 2006, at 1:22 PM, Zheng, Xiaoran wrote:
> 
> > When I have a grammar defined as follows:
> >
> > A : B*C*
> > B : ...
> > C : ...
> >
> > why do I get an NoSuchElementException?
> 
> what version?  you missing a semicolon?  A complete
> grammar please.
> Ter
> 

From xzheng at doubleclick.net  Thu Aug 10 08:28:40 2006
From: xzheng at doubleclick.net (Zheng, Xiaoran)
Date: Thu Aug 10 08:34:02 2006
Subject: [antlr-interest] NoSuchElementException
Message-ID: <CB8E43806EA4084A9B90A3CB12DB4F6009E20EE3@NYC-EXCLS1.dc1.doubleclick.corp>

 

Why is it that when I am redefining uponEOF() in my lexer, I get
NoSuchElementException?
From parrt at cs.usfca.edu  Thu Aug 10 08:45:59 2006
From: parrt at cs.usfca.edu (Terence Parr)
Date: Thu Aug 10 08:46:04 2006
Subject: [antlr-interest] NoSuchElementException
In-Reply-To: <CB8E43806EA4084A9B90A3CB12DB4F6009E20EE3@NYC-EXCLS1.dc1.doubleclick.corp>
References: <CB8E43806EA4084A9B90A3CB12DB4F6009E20EE3@NYC-EXCLS1.dc1.doubleclick.corp>
Message-ID: <FACD1EB4-18B1-4CD6-B104-DEF3818A547A@cs.usfca.edu>


On Aug 10, 2006, at 8:28 AM, Zheng, Xiaoran wrote:

>
>
> Why is it that when I am redefining uponEOF() in my lexer, I get
> NoSuchElementException?

I suggest doing normal debugging and answering the key question so  
someone can help you: is it in your code or antlr's?  if antlr's, where?

Ter

From open.zone at virgin.net  Fri Aug 11 00:38:16 2006
From: open.zone at virgin.net (Micheal J)
Date: Fri Aug 11 00:41:13 2006
Subject: [antlr-interest] NoSuchElementException
In-Reply-To: <CB8E43806EA4084A9B90A3CB12DB4F6009E20EE3@NYC-EXCLS1.dc1.doubleclick.corp>
Message-ID: <002601c6bd19$1eef7740$c704a8c0@hercules>

Hi,

> Why is it that when I am redefining uponEOF() in my lexer, I 
> get NoSuchElementException?

http://www.catb.org/~esr/faqs/smart-questions.html#beprecise


Other useful articles:
http://support.microsoft.com/?id=555375
http://www.danielmoth.com/Blog/2005/03/please-read-before-posting-to-ng.html


Micheal

-----------------------
The best way to contact me is via the list/forum. My time is very limited.

From open.zone at virgin.net  Fri Aug 11 00:38:16 2006
From: open.zone at virgin.net (Micheal J)
Date: Fri Aug 11 00:41:16 2006
Subject: [antlr-interest] java.util.NoSuchElementException
In-Reply-To: <CB8E43806EA4084A9B90A3CB12DB4F6009E20EDE@NYC-EXCLS1.dc1.doubleclick.corp>
Message-ID: <002101c6bd19$1e14f5c0$c704a8c0@hercules>

 <http://www.catb.org/~esr/faqs/smart-questions.html>
http://www.catb.org/~esr/faqs/smart-questions.html#beprecise

 

Other useful articles:

 <http://support.microsoft.com/?id=555375>
http://support.microsoft.com/?id=555375

 
<http://www.danielmoth.com/Blog/2005/03/please-read-before-posting-to-ng.htm
l>
http://www.danielmoth.com/Blog/2005/03/please-read-before-posting-to-ng.html

 

Micheal

-----------------------

The best way to contact me is via the list/forum. My time is very limited.

-----Original Message-----
From: antlr-interest-bounces@antlr.org
[mailto:antlr-interest-bounces@antlr.org] On Behalf Of Zheng, Xiaoran
Sent: 09 August 2006 21:22
To: antlr-interest@antlr.org
Subject: [antlr-interest] java.util.NoSuchElementException


When I have a grammar defined as follows:
 
A : B*C*
B : ...
C : ...
 
why do I get an NoSuchElementException?

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060811/4ca60210/attachment.html
From open.zone at virgin.net  Fri Aug 11 00:38:16 2006
From: open.zone at virgin.net (Micheal J)
Date: Fri Aug 11 00:41:17 2006
Subject: [antlr-interest] Matching keywords in the lexer
In-Reply-To: <CB8E43806EA4084A9B90A3CB12DB4F6009E20EE1@NYC-EXCLS1.dc1.doubleclick.corp>
Message-ID: <002001c6bd19$1cbe8d80$c704a8c0@hercules>

Hi,

>  I defined this in my lexer to distinguish between the 
> keyword "include" with other identifiers.
> 
>      protected
>      ID options{testLiterals=true;/*I have other keywords 
> defined in the parser*/}
>               : 
> ('_'|'a'..'z'|'A'..'Z')('_'|'a'..'z'|'A'..'Z'|'0'..'9')*
>               ;
>      protected
>      INCLUDE  : ("include" STRING SEMI) {/*I will add the 
> code to deal w/ this later*/}
>               ;
>      ID_OR_INCLUDE 
>               : (ID)=>ID  {$setType(ID);}
>               | INCLUDE                          
> 		  ;
> 
>  Is this correct? If so, it doesn't seem to work. What am I 
> doing wrong?
> 
>  Any help would be greatly appreciated. Thanks.

That is one option. Using the tokens {...} construct is another option. See
the KCSParse/csharp_v1 C# grammar sample for an example of how keywords can
be defined using the tokens {...} construct. That sample actually shows both
options as it defines non-keyword (but nevertheless significant) lietrals
using the technique above.

Regardless of which option you take, I'd advise losing the ID_OR_INCLUDE
lexer rule. Let the parser decide when/where INCLUDE is a keyword or ID. For
instance the parser in KCSParse includes these rules:

nonKeywordLiterals
	:	"add"
	....
	....
	|	"type"
	;
	
identifier
	:	IDENTIFIER
	|	n:nonKeywordLiterals { #n.setType(IDENTIFIER); }
	;

You can see how the 'identifier' rule decides which tokens represent valid
identifiers.


Micheal

From e.papegaaij at student.utwente.nl  Fri Aug 11 09:22:35 2006
From: e.papegaaij at student.utwente.nl (Emond Papegaaij)
Date: Fri Aug 11 09:22:46 2006
Subject: [antlr-interest] Default values in tree rewrite rules
Message-ID: <200608111822.35246.e.papegaaij@student.utwente.nl>

Hello,

I've got the following parser rule in which 'superclass' is optional:
  nodeDecl
   : (options {k = 1;} : (nodeNames ':')=> bindings=nodeNames ':')?
     (declAbstract=ABSTRACT)?
     type=targetClass
     ('extends' superclass=targetClass)?
     ( CBR_OPEN body CBR_CLOSE | SEMI )
     -> ^(NODE_SPEC $type $declAbstract? $superclass? body? $bindings?)
   ;

Now I want superclass to become the tree ^(TYPE["Node"]) when it is not 
defined in the input (and it will no longer be optional in the rewrite 
rule). Is this possible? All I've come up with is:
     ('extends' superclass=targetClass)? {
       if (superclass == null) {
         superclass = new targetClass_return();
         superclass.tree = adaptor.create(TYPE, "Node");
       }
     }
Which is quite nasty.

Best regards,
Emond
From jbb at acm.org  Fri Aug 11 09:53:49 2006
From: jbb at acm.org (John B. Brodie)
Date: Fri Aug 11 09:53:54 2006
Subject: [antlr-interest] Default values in tree rewrite rules
In-Reply-To: <200608111822.35246.e.papegaaij@student.utwente.nl> (message from
	Emond Papegaaij on Fri, 11 Aug 2006 18:22:35 +0200)
References: <200608111822.35246.e.papegaaij@student.utwente.nl>
Message-ID: <E1GBaGb-0006DS-00@gecko>

Emond Papegaaij asked:

>I've got the following parser rule in which 'superclass' is optional:
>  nodeDecl
>   : (options {k = 1;} : (nodeNames ':')=> bindings=nodeNames ':')?
>     (declAbstract=ABSTRACT)?
>     type=targetClass
>     ('extends' superclass=targetClass)?
>     ( CBR_OPEN body CBR_CLOSE | SEMI )
>     -> ^(NODE_SPEC $type $declAbstract? $superclass? body? $bindings?)
>   ;
>
>Now I want superclass to become the tree ^(TYPE["Node"]) when it is not 
>defined in the input (and it will no longer be optional in the rewrite 
>rule). Is this possible? All I've come up with is:
>     ('extends' superclass=targetClass)? {
>       if (superclass == null) {
>         superclass = new targetClass_return();
>         superclass.tree = adaptor.create(TYPE, "Node");
>       }
>     }
>Which is quite nasty.

indeed. does this work?

nodeDecl
   : (options {k = 1;} : (nodeNames ':')=> bindings=nodeNames ':')?
     (declAbstract=ABSTRACT)?
     type=targetClass
     sc=superClass
     ( CBR_OPEN body CBR_CLOSE | SEMI )
     -> ^(NODE_SPEC $type $declAbstract? $sc body? $bindings?)
   ;

superClass :
     ( /* empty */ -> ^(TYPE["Node"]) )
   | ( ('extends' targetClass) -> targetClass )
;

Hope this helps...
   -jbb
From parrt at cs.usfca.edu  Fri Aug 11 11:35:32 2006
From: parrt at cs.usfca.edu (Terence Parr)
Date: Fri Aug 11 11:35:39 2006
Subject: [antlr-interest] TreeAdaptor
In-Reply-To: <200608101615.38767.e.papegaaij@student.utwente.nl>
References: <200608101615.38767.e.papegaaij@student.utwente.nl>
Message-ID: <211C0032-C664-4CCE-98E8-A0738405C85E@cs.usfca.edu>

On Aug 10, 2006, at 7:15 AM, Emond Papegaaij wrote:

> Hello
>
> I'm trying to implement my own version of the TreeAdaptor  
> interface, but
> have a few questions:
>
> What is the 'getUniqueID' used for? Is it supposed to simply return a
> unique number for every node? As the Javadoc states using 'hashCode 
> ()' is
> dangerous. Maybe 'System.identityHashCode()' is an option?

Didn't know about that!  Sweet...yes, that is it.  We need this for  
sending events to the debugger.  Added to list.

> What are the 'getChild(int i)' and 'getChildCount()' methods  
> supposed to
> do? They are not being used anywhere. On which children do they  
> operate?
> Maybe an additional method argument 'Object node' needs to be added?

doh!  Changed to:

	/** Get a child 0..n-1 node */
	public Object getChild(Object t, int i);

	/** How many children?  If 0, then this is a leaf node */
	public int getChildCount(Object t);

Change 2870.

Ter

From e.papegaaij at student.utwente.nl  Fri Aug 11 14:11:15 2006
From: e.papegaaij at student.utwente.nl (Emond Papegaaij)
Date: Fri Aug 11 14:11:24 2006
Subject: [antlr-interest] Default values in tree rewrite rules
In-Reply-To: <E1GBaGb-0006DS-00@gecko>
References: <200608111822.35246.e.papegaaij@student.utwente.nl>
	<E1GBaGb-0006DS-00@gecko>
Message-ID: <200608112311.15549.e.papegaaij@student.utwente.nl>

On Friday 11 August 2006 18:53, you wrote:
> Emond Papegaaij asked:
> >I've got the following parser rule in which 'superclass' is optional:
> >  nodeDecl
> >
> >   : (options {k = 1;} : (nodeNames ':')=> bindings=nodeNames ':')?
> >
> >     (declAbstract=ABSTRACT)?
> >     type=targetClass
> >     ('extends' superclass=targetClass)?
> >     ( CBR_OPEN body CBR_CLOSE | SEMI )
> >     -> ^(NODE_SPEC $type $declAbstract? $superclass? body? $bindings?)
> >   ;
> >
> >Now I want superclass to become the tree ^(TYPE["Node"]) when it is not
> >defined in the input (and it will no longer be optional in the rewrite
> >rule).
> indeed. does this work? 
>
> nodeDecl
>    : (options {k = 1;} : (nodeNames ':')=> bindings=nodeNames ':')?
>      (declAbstract=ABSTRACT)?
>      type=targetClass
>      sc=superClass
>      ( CBR_OPEN body CBR_CLOSE | SEMI )
>      -> ^(NODE_SPEC $type $declAbstract? $sc body? $bindings?)
>    ;
>
> superClass :
>      ( /* empty */ -> ^(TYPE["Node"]) )
>    | ( ('extends' targetClass) -> targetClass )
> ;
>
Thanks, that seems to be what I'm looking for.

Best regards,
Emond
From vcobra at gmail.com  Fri Aug 11 17:05:59 2006
From: vcobra at gmail.com (Vincente Cobra)
Date: Fri Aug 11 17:06:06 2006
Subject: [antlr-interest] Antlr syntax highlighting help
Message-ID: <876352a00608111705i448f2b2bo4015a7dbc348a3b2@mail.gmail.com>

Hi all,
I am trying to add syntax highlighting to JEditorPane using Antlr in java.
The lexer doesn't seem to match the offset I want in the PlainView. The code
is based on what I have seen on the internet :
- The article Customizing a text editor in Sun web pages :
http://java.sun.com/products/jfc/tsc/articles/text/editor_kit/index.html
- The ostermiller syntax package : http://ostermiller.org/syntax/
- The skunkdav : http://skunkdav.sourceforge.net/
- visualemugen :
http://wwwseidl.informatik.tu-muenchen.de/projekte/visualemugen

Can you help me with the following code please?

Thanks in advance.

package editortest.editor;

import antlr.CharScanner;
import antlr.LexerSharedInputState;
import antlr.Token;

import editortest.swing.DocumentReader;

import editortest.syntax.html.HTMLLexer;
import editortest.syntax.html.HTMLTokenTypes;

import java.awt.Color;
import java.awt.Graphics;

import javax.swing.text.BadLocationException;
import javax.swing.text.Document;
import javax.swing.text.Element;
import javax.swing.text.Segment;
import javax.swing.text.Utilities;
import javax.swing.text.WrappedPlainView;

public class SyntaxView extends WrappedPlainView {
    private DocumentReader reader;
    private CharScanner lexer;

    /**
     *
     * @param elem
     */
    public SyntaxView(Element elem) {
        super(elem, true);

        try {
            Document doc = elem.getDocument();
            reader = new DocumentReader(doc);
            lexer = new HTMLLexer(reader) {
                        public void newline() {
                        }
                    };
            lexer.setColumn(1);
            lexer.setTabSize(1);
        } catch (Exception ex) {
            ex.printStackTrace();
        }
    }

    /**
     *
     * @param pos
     */
    public void updateLexer(int pos) {
        try {
            Document doc = getDocument();
            Element root = doc.getDefaultRootElement();
            int line = root.getElementIndex(pos);
            Element elem = root.getElement(line);
            int p0 = elem.getStartOffset();
            int p1 = elem.getEndOffset();
            reader.update(p0, p1 - p0);
            reader.seek((long) p0);
            lexer.setInputState(new LexerSharedInputState(reader));
        } catch (Exception e) {
        }
    }

    /**
     *
     * @param g
     * @param x
     * @param y
     * @param startindex
     * @param endindex
     * @throws javax.swing.text.BadLocationException
     * @return
     */
    protected int drawUnselectedText(Graphics g, int x, int y, int
startindex,
        int endindex) throws BadLocationException {
        // instantiate the ColorLexer ...
        updateLexer(startindex);

        int start = startindex;
        int mark = startindex; // Marker on startindex
        Token tok = null;

        try {
            while (true) {
                tok = lexer.nextToken(); // get us the next token

                if ((tok == null) && (tok.getType() == Token.EOF_TYPE)) {
                    break;
                }

                int len = 0;

                if (tok.getText() != null) {
                    len += tok.getText().length();
                }

                if ((start + tok.getColumn() + len) <= startindex) {
                    continue; // update areal hasn't even started
                }

                if ((start + tok.getColumn()) >= endindex) {
                    break; // Token begins after our update areal
                }

                if ((start + tok.getColumn()) > mark) { // Token begins
after marker
                    x = draw(mark, (start + tok.getColumn()) - mark,
                            Color.black, g, x, y);

                    // draw area til marker in a neutral way
                }

                int ps = Math.max(start + tok.getColumn(), startindex); //
begin of token
                int pe = Math.min(start + tok.getColumn() + len, endindex);
// end of token

                // paint the token in it's proper color like the Lexer tells
us
                x = draw(ps, pe - ps, HTMLContext.getColor(tok), g, x, y);
                mark = pe; // continue with next token after resetting the
marker
            } // while

            if (endindex > mark) { // marker didn'tt get everything
                x = draw(mark, endindex - mark, Color.black, g, x, y);

                // let's draw the rest
            }
        } catch (Exception e) {
            //            System.err.println("Exception: " + e.toString());
            //            e.printStackTrace();
        }

        return x;
    }

    /**
     * <code>drawSelectedText</code>
     *
     * @param g a <code>Graphics</code> {@link
SourceCodeView#drawUnselectedText}
     * @param x an <code>int</code> {@link
SourceCodeView#drawUnselectedText}
     * @param y an <code>int</code> {@link
SourceCodeView#drawUnselectedText}
     * @param p0 an <code>int</code> {@link
SourceCodeView#drawUnselectedText}
     * @param p1 an <code>int</code> {@link
SourceCodeView#drawUnselectedText}
     * @return an <code>int</code> {@link SourceCodeView#drawUnselectedText}
     * @exception BadLocationException {@link
SourceCodeView#drawUnselectedText}
     */
    protected int drawSelectedText(Graphics g, int x, int y, int p0, int p1)
        throws BadLocationException {
        return drawUnselectedText(g, x, y, p0, p1);
    }

    /**
     *
     * @param a
     * @param l
     * @param c
     * @param g
     * @param x
     * @param y
     * @throws javax.swing.text.BadLocationException
     * @return
     */
    private int draw(int a, int l, Color c, Graphics g, int x, int y)
        throws BadLocationException {
        g.setColor(c);
        getDocument().getText(a, l, getLineBuffer());

        return Utilities.drawTabbedText(getLineBuffer(), x, y, g, this, a);
    }

    private final static class HTMLContext {
        public static Color getColor(Token t) {
            Color c = Color.BLACK;

            if (t.getType() == HTMLTokenTypes.PCDATA) {
            } else if (t.getType() == HTMLTokenTypes.PCDATA) {
            } else if (t.getType() == HTMLTokenTypes.COMMENT) {
                c = Color.DARK_GRAY;
            } else if (t.getType() == HTMLTokenTypes.COMMENT_DATA) {
                c = Color.GREEN;
            } else {
                c = Color.BLUE;
            }

            return c;
        }
    }
}
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060811/d3b9aaef/attachment.html
From jbb at acm.org  Fri Aug 11 19:31:32 2006
From: jbb at acm.org (John B. Brodie)
Date: Fri Aug 11 19:31:42 2006
Subject: [antlr-interest] [V3] '%' in java code obtains unexpected
	StringTemplate error
Message-ID: <E1GBjHg-0003Hw-00@gecko>


Sorry if this is a duplicated report, I did not see anything that I
thought was similar on the wiki...

This grammar:

grammar T;
@members {
    private void hello() { System.out.format("hello%n"); }
}
junk : FOO { System.out.format("junk says:%n"); hello(); } ;
FOO : 'foo' ;

gets this output from the tool:

ANTLR Parser Generator   Early Access Version 3.0b3 (July 21, 2006)  1989-2006
t.g:2:10: invalid StringTemplate % shorthand syntax: '%n")'
t.g:5:12: invalid StringTemplate % shorthand syntax: '%n")'



Workaround: Replacing each occurrence of '%' above with '\%' fixes the
problem. No messages from the tool and javac 1.5 compiles/runs no
problem.

Thanks!
   -jbb
From kroepke at classdump.org  Fri Aug 11 19:37:04 2006
From: kroepke at classdump.org (Kay Roepke)
Date: Fri Aug 11 19:37:12 2006
Subject: [antlr-interest] [V3] '%' in java code obtains unexpected
	StringTemplate error
In-Reply-To: <E1GBjHg-0003Hw-00@gecko>
References: <E1GBjHg-0003Hw-00@gecko>
Message-ID: <F784B570-5BC2-4482-AD26-7F93CC3E9D5C@classdump.org>

Hi John!

On 12. Aug 2006, at 4:31 Uhr, John B. Brodie wrote:

> Workaround: Replacing each occurrence of '%' above with '\%' fixes the
> problem. No messages from the tool and javac 1.5 compiles/runs no
> problem.

NOTABUG ;)

The %'s are inside of actions and ANTLR doesn't interpret custom  
actions.
It cannot know that the '%' is in a string and should be left alone.  
This is
expected behavior, special characters must be escaped properly.

cheers,

-k
-- 
Kay R?pke <kroepke@classdump.org>
classdump Software


From dave at badgers-in-foil.co.uk  Sat Aug 12 07:34:53 2006
From: dave at badgers-in-foil.co.uk (David Holroyd)
Date: Sat Aug 12 07:35:16 2006
Subject: [antlr-interest] unexpected token: :
Message-ID: <20060812143452.GA1370@badgers-in-foil.co.uk>

I'm trying to convert a v2 grammar to v3.  I'm getting lots of errors
about ':' tokens.  Here's a fairly minimal testcase I've made while
trying to track this down:

  grammar AS3Parser;
  x : y | z ;
  y : "class" ;
  z : "package";

Here's the output I get,

ANTLR Parser Generator   Early Access Version 3.0b3 (July 21, 2006) 1989-2006
3:3: syntax error: antlr: src/antlr/org/asdt/core/internal/antlr/as3.g3.testcase:3:3: unexpected token: :
4:5: syntax error: antlr: src/antlr/org/asdt/core/internal/antlr/as3.g3.testcase:4:5: unexpected token: "package"
src/antlr/org/asdt/core/internal/antlr/as3.g3.testcase:2:9: reference to undefined rule: z
src/antlr/org/asdt/core/internal/antlr/as3.g3.testcase:2:5: reference to undefined rule: y

I'm sure it's something really obvious, but I just don't see it.


help!
dave

-- 
http://david.holroyd.me.uk/
From open.zone at virgin.net  Sat Aug 12 07:43:57 2006
From: open.zone at virgin.net (Micheal J)
Date: Sat Aug 12 07:46:46 2006
Subject: [antlr-interest] unexpected token: :
In-Reply-To: <20060812143452.GA1370@badgers-in-foil.co.uk>
Message-ID: <000c01c6be1d$beeed510$c704a8c0@hercules>

Hi,

> I'm trying to convert a v2 grammar to v3.  I'm getting lots 
> of errors about ':' tokens.  Here's a fairly minimal testcase 
> I've made while trying to track this down:
> 
>   grammar AS3Parser;
>   x : y | z ;
>   y : "class" ;
>   z : "package";
> 
> Here's the output I get,

Try:

grammar AS3Parser;
x : y | z ;
y : 'class' ;
z : 'package' ;

Micheal

-----------------------
The best way to contact me is via the list/forum. My time is very limited.

From dave at badgers-in-foil.co.uk  Sat Aug 12 08:29:05 2006
From: dave at badgers-in-foil.co.uk (David Holroyd)
Date: Sat Aug 12 08:29:12 2006
Subject: [antlr-interest] unexpected token: :
In-Reply-To: <000c01c6be1d$beeed510$c704a8c0@hercules>
References: <20060812143452.GA1370@badgers-in-foil.co.uk>
	<000c01c6be1d$beeed510$c704a8c0@hercules>
Message-ID: <20060812152905.GB1370@badgers-in-foil.co.uk>

On Sat, Aug 12, 2006 at 03:43:57PM +0100, Micheal J wrote:
> Hi,
> 
> > I'm trying to convert a v2 grammar to v3.  I'm getting lots 
> > of errors about ':' tokens.  Here's a fairly minimal testcase 
> > I've made while trying to track this down:
> > 
> >   grammar AS3Parser;
> >   x : y | z ;
> >   y : "class" ;
> >   z : "package";
> > 
> > Here's the output I get,
> 
> Try:
> 
> grammar AS3Parser;
> x : y | z ;
> y : 'class' ;
> z : 'package' ;

Thank you!

How about I create a wiki page, 'Differences between ANTLR 2 and ANTLR 3'?


ta,
dave

-- 
http://david.holroyd.me.uk/
From dave at badgers-in-foil.co.uk  Sat Aug 12 09:33:22 2006
From: dave at badgers-in-foil.co.uk (David Holroyd)
Date: Sat Aug 12 09:33:33 2006
Subject: [antlr-interest] Can't find template tokenRefBangTrack.st
Message-ID: <20060812163322.GC1370@badgers-in-foil.co.uk>

So, I've done a very basic conversion from v2 to v3 syntax.

There are hundreds of 'Decision can match input .. using multiple
alternatives' mesages that I need to work out the meaning of, and then,

internal error: src/antlr/org/asdt/core/internal/antlr/as3.g3 : java.lang.IllegalArgumentException: Can't find template tokenRefBangTrack.st
org.antlr.stringtemplate.StringTemplateGroup.lookupTemplate(StringTemplateGroup.java:485)
org.antlr.stringtemplate.StringTemplateGroup.getInstanceOf(StringTemplateGroup.java:372)
org.antlr.stringtemplate.StringTemplateGroup.getInstanceOf(StringTemplateGroup.java:384)
org.antlr.stringtemplate.StringTemplateGroup.lookupTemplate(StringTemplateGroup.java:464)
org.antlr.stringtemplate.StringTemplateGroup.getInstanceOf(StringTemplateGroup.java:372)
org.antlr.stringtemplate.StringTemplateGroup.getInstanceOf(StringTemplateGroup.java:384)
org.antlr.codegen.CodeGenTreeWalker.getTokenElementST(CodeGenTreeWalker.java:159)
org.antlr.codegen.CodeGenTreeWalker.atom(CodeGenTreeWalker.java:1868)
org.antlr.codegen.CodeGenTreeWalker.element(CodeGenTreeWalker.java:1348)
org.antlr.codegen.CodeGenTreeWalker.alternative(CodeGenTreeWalker.java:1104)
org.antlr.codegen.CodeGenTreeWalker.block(CodeGenTreeWalker.java:988)
org.antlr.codegen.CodeGenTreeWalker.rule(CodeGenTreeWalker.java:716)
org.antlr.codegen.CodeGenTreeWalker.rules(CodeGenTreeWalker.java:507)
org.antlr.codegen.CodeGenTreeWalker.grammarSpec(CodeGenTreeWalker.java:449)
org.antlr.codegen.CodeGenTreeWalker.grammar(CodeGenTreeWalker.java:301)
org.antlr.codegen.CodeGenerator.genRecognizer(CodeGenerator.java:406)
org.antlr.Tool.processGrammar(Tool.java:320)
org.antlr.Tool.process(Tool.java:251)
org.antlr.Tool.main(Tool.java:70)


(ANTLR 3.0b3)


ta,
dave

-- 
http://david.holroyd.me.uk/
From parrt at cs.usfca.edu  Sat Aug 12 09:38:17 2006
From: parrt at cs.usfca.edu (Terence Parr)
Date: Sat Aug 12 09:38:23 2006
Subject: [antlr-interest] Can't find template tokenRefBangTrack.st
In-Reply-To: <20060812163322.GC1370@badgers-in-foil.co.uk>
References: <20060812163322.GC1370@badgers-in-foil.co.uk>
Message-ID: <D9C189D4-CEAA-4654-B3C7-87B445FA43E0@cs.usfca.edu>

don't use ! without an output option.
Ter
On Aug 12, 2006, at 9:33 AM, David Holroyd wrote:

> So, I've done a very basic conversion from v2 to v3 syntax.
>
> There are hundreds of 'Decision can match input .. using multiple
> alternatives' mesages that I need to work out the meaning of, and  
> then,
>
> internal error: src/antlr/org/asdt/core/internal/antlr/as3.g3 :  
> java.lang.IllegalArgumentException: Can't find template  
> tokenRefBangTrack.st
> org.antlr.stringtemplate.StringTemplateGroup.lookupTemplate 
> (StringTemplateGroup.java:485)
> org.antlr.stringtemplate.StringTemplateGroup.getInstanceOf 
> (StringTemplateGroup.java:372)
> org.antlr.stringtemplate.StringTemplateGroup.getInstanceOf 
> (StringTemplateGroup.java:384)
> org.antlr.stringtemplate.StringTemplateGroup.lookupTemplate 
> (StringTemplateGroup.java:464)
> org.antlr.stringtemplate.StringTemplateGroup.getInstanceOf 
> (StringTemplateGroup.java:372)
> org.antlr.stringtemplate.StringTemplateGroup.getInstanceOf 
> (StringTemplateGroup.java:384)
> org.antlr.codegen.CodeGenTreeWalker.getTokenElementST 
> (CodeGenTreeWalker.java:159)
> org.antlr.codegen.CodeGenTreeWalker.atom(CodeGenTreeWalker.java:1868)
> org.antlr.codegen.CodeGenTreeWalker.element(CodeGenTreeWalker.java: 
> 1348)
> org.antlr.codegen.CodeGenTreeWalker.alternative 
> (CodeGenTreeWalker.java:1104)
> org.antlr.codegen.CodeGenTreeWalker.block(CodeGenTreeWalker.java:988)
> org.antlr.codegen.CodeGenTreeWalker.rule(CodeGenTreeWalker.java:716)
> org.antlr.codegen.CodeGenTreeWalker.rules(CodeGenTreeWalker.java:507)
> org.antlr.codegen.CodeGenTreeWalker.grammarSpec 
> (CodeGenTreeWalker.java:449)
> org.antlr.codegen.CodeGenTreeWalker.grammar(CodeGenTreeWalker.java: 
> 301)
> org.antlr.codegen.CodeGenerator.genRecognizer(CodeGenerator.java:406)
> org.antlr.Tool.processGrammar(Tool.java:320)
> org.antlr.Tool.process(Tool.java:251)
> org.antlr.Tool.main(Tool.java:70)
>
>
> (ANTLR 3.0b3)
>
>
> ta,
> dave
>
> -- 
> http://david.holroyd.me.uk/

From dave at badgers-in-foil.co.uk  Sat Aug 12 09:48:50 2006
From: dave at badgers-in-foil.co.uk (David Holroyd)
Date: Sat Aug 12 09:48:55 2006
Subject: [antlr-interest] Can't find template tokenRefBangTrack.st
In-Reply-To: <D9C189D4-CEAA-4654-B3C7-87B445FA43E0@cs.usfca.edu>
References: <20060812163322.GC1370@badgers-in-foil.co.uk>
	<D9C189D4-CEAA-4654-B3C7-87B445FA43E0@cs.usfca.edu>
Message-ID: <20060812164850.GD1370@badgers-in-foil.co.uk>


I have,

options {
	k = 2;
	output=AST;
	ASTLabelType=CommonTree;
}

Is that what you mean by an output option?


On Sat, Aug 12, 2006 at 09:38:17AM -0700, Terence Parr wrote:
> don't use ! without an output option.
> Ter
> On Aug 12, 2006, at 9:33 AM, David Holroyd wrote:
> 
> >So, I've done a very basic conversion from v2 to v3 syntax.
> >
> >There are hundreds of 'Decision can match input .. using multiple
> >alternatives' mesages that I need to work out the meaning of, and  
> >then,
> >
> >internal error: src/antlr/org/asdt/core/internal/antlr/as3.g3 :  
> >java.lang.IllegalArgumentException: Can't find template  
> >tokenRefBangTrack.st
> >org.antlr.stringtemplate.StringTemplateGroup.lookupTemplate 
> >(StringTemplateGroup.java:485)
> >org.antlr.stringtemplate.StringTemplateGroup.getInstanceOf 
> >(StringTemplateGroup.java:372)
> >org.antlr.stringtemplate.StringTemplateGroup.getInstanceOf 
> >(StringTemplateGroup.java:384)
> >org.antlr.stringtemplate.StringTemplateGroup.lookupTemplate 
> >(StringTemplateGroup.java:464)
> >org.antlr.stringtemplate.StringTemplateGroup.getInstanceOf 
> >(StringTemplateGroup.java:372)
> >org.antlr.stringtemplate.StringTemplateGroup.getInstanceOf 
> >(StringTemplateGroup.java:384)
> >org.antlr.codegen.CodeGenTreeWalker.getTokenElementST 
> >(CodeGenTreeWalker.java:159)
> >org.antlr.codegen.CodeGenTreeWalker.atom(CodeGenTreeWalker.java:1868)
> >org.antlr.codegen.CodeGenTreeWalker.element(CodeGenTreeWalker.java: 
> >1348)
> >org.antlr.codegen.CodeGenTreeWalker.alternative 
> >(CodeGenTreeWalker.java:1104)
> >org.antlr.codegen.CodeGenTreeWalker.block(CodeGenTreeWalker.java:988)
> >org.antlr.codegen.CodeGenTreeWalker.rule(CodeGenTreeWalker.java:716)
> >org.antlr.codegen.CodeGenTreeWalker.rules(CodeGenTreeWalker.java:507)
> >org.antlr.codegen.CodeGenTreeWalker.grammarSpec 
> >(CodeGenTreeWalker.java:449)
> >org.antlr.codegen.CodeGenTreeWalker.grammar(CodeGenTreeWalker.java: 
> >301)
> >org.antlr.codegen.CodeGenerator.genRecognizer(CodeGenerator.java:406)
> >org.antlr.Tool.processGrammar(Tool.java:320)
> >org.antlr.Tool.process(Tool.java:251)
> >org.antlr.Tool.main(Tool.java:70)
> >
> >
> >(ANTLR 3.0b3)
> >
> >
> >ta,
> >dave
> >
> >-- 
> >http://david.holroyd.me.uk/
> 

-- 
http://david.holroyd.me.uk/
From parrt at cs.usfca.edu  Sat Aug 12 10:34:37 2006
From: parrt at cs.usfca.edu (Terence Parr)
Date: Sat Aug 12 10:34:44 2006
Subject: [antlr-interest] Can't find template tokenRefBangTrack.st
In-Reply-To: <20060812164850.GD1370@badgers-in-foil.co.uk>
References: <20060812163322.GC1370@badgers-in-foil.co.uk>
	<D9C189D4-CEAA-4654-B3C7-87B445FA43E0@cs.usfca.edu>
	<20060812164850.GD1370@badgers-in-foil.co.uk>
Message-ID: <CF8119D6-5481-48C3-8ED8-4C0146CDAB41@cs.usfca.edu>


On Aug 12, 2006, at 9:48 AM, David Holroyd wrote:

>
> I have,
>
> options {
> 	k = 2;
> 	output=AST;
> 	ASTLabelType=CommonTree;
> }
>
> Is that what you mean by an output option?

Ah.  if that is the case, then you probably have label+=FOO! which I  
don't think I've implemented yet.

Ter
From dave at badgers-in-foil.co.uk  Sat Aug 12 11:28:43 2006
From: dave at badgers-in-foil.co.uk (David Holroyd)
Date: Sat Aug 12 11:28:50 2006
Subject: [antlr-interest] Can't find template tokenRefBangTrack.st
In-Reply-To: <CF8119D6-5481-48C3-8ED8-4C0146CDAB41@cs.usfca.edu>
References: <20060812163322.GC1370@badgers-in-foil.co.uk>
	<D9C189D4-CEAA-4654-B3C7-87B445FA43E0@cs.usfca.edu>
	<20060812164850.GD1370@badgers-in-foil.co.uk>
	<CF8119D6-5481-48C3-8ED8-4C0146CDAB41@cs.usfca.edu>
Message-ID: <20060812182842.GE1370@badgers-in-foil.co.uk>

On Sat, Aug 12, 2006 at 10:34:37AM -0700, Terence Parr wrote:
> 
> On Aug 12, 2006, at 9:48 AM, David Holroyd wrote:
> 
> >
> >I have,
> >
> >options {
> >	k = 2;
> >	output=AST;
> >	ASTLabelType=CommonTree;
> >}
> >
> >Is that what you mean by an output option?
> 
> Ah.  if that is the case, then you probably have label+=FOO! which I  
> don't think I've implemented yet.

Actually, I has some productions which were using both tree operators
and rewrite rules.  I think I've fixed those, and now instead I see a
stacktrace with the message "Can't find template matchSetTrack.st".

Do I actually need to convert the entire grammar over to use the ->
syntax, or can I alternate this production-by-production?


ta,
dave

-- 
http://david.holroyd.me.uk/
From dave at badgers-in-foil.co.uk  Sat Aug 12 11:57:46 2006
From: dave at badgers-in-foil.co.uk (David Holroyd)
Date: Sat Aug 12 11:58:01 2006
Subject: [antlr-interest] Can't find template tokenRefBangTrack.st
In-Reply-To: <20060812182842.GE1370@badgers-in-foil.co.uk>
References: <20060812163322.GC1370@badgers-in-foil.co.uk>
	<D9C189D4-CEAA-4654-B3C7-87B445FA43E0@cs.usfca.edu>
	<20060812164850.GD1370@badgers-in-foil.co.uk>
	<CF8119D6-5481-48C3-8ED8-4C0146CDAB41@cs.usfca.edu>
	<20060812182842.GE1370@badgers-in-foil.co.uk>
Message-ID: <20060812185746.GF1370@badgers-in-foil.co.uk>

On Sat, Aug 12, 2006 at 06:28:43PM +0000, David Holroyd wrote:
> On Sat, Aug 12, 2006 at 10:34:37AM -0700, Terence Parr wrote:
> > 
> > On Aug 12, 2006, at 9:48 AM, David Holroyd wrote:
> > 
> > >
> > >I have,
> > >
> > >options {
> > >	k = 2;
> > >	output=AST;
> > >	ASTLabelType=CommonTree;
> > >}
> > >
> > >Is that what you mean by an output option?
> > 
> > Ah.  if that is the case, then you probably have label+=FOO! which I  
> > don't think I've implemented yet.
> 
> Actually, I has some productions which were using both tree operators
> and rewrite rules.  I think I've fixed those, and now instead I see a
> stacktrace with the message "Can't find template matchSetTrack.st".

Oops, I see that this is an FAQ,

  http://www.antlr.org/pipermail/antlr-interest/2006-July/017102.html

I fixed it so the one instance I had of decl=('var|'const') is changed
to,

  variableDefinition[AST mods]
	:	(decl='var'|decl='const') variableDeclarator
		(COMMA variableDeclarator)*
		-> ^($decl variableDeclarator+ {$mods})
	;

however I still get the "Can't find template matchSetTrack.st" error.

> Do I actually need to convert the entire grammar over to use the ->
> syntax, or can I alternate this production-by-production?


any ideas?

dave

-- 
http://david.holroyd.me.uk/
From kerecsen at gmail.com  Sat Aug 12 12:43:44 2006
From: kerecsen at gmail.com (Tamas Kerecsen)
Date: Sat Aug 12 12:43:55 2006
Subject: [antlr-interest] v3 - how to disable error recovery
Message-ID: <1cb672170608121243i1810458h21ab0e1d73692ea0@mail.gmail.com>

Hi Everyone,

Is there an easy way in v3 to completely disable error recovery? I'd like to
receive an exception on any lexer, parser or tree walker issue and just bail
out... v2 had an option that would allow this, but I couldn't find the
equivalent in v3 :(

Thanks,
  Tamas
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060812/163d12ea/attachment.html
From dilipe at coreobjects.com  Sun Aug 13 02:25:22 2006
From: dilipe at coreobjects.com (Dilip Easwaran)
Date: Sun Aug 13 02:08:56 2006
Subject: [antlr-interest] parser not throwing exception
Message-ID: <006301c6beba$68ea0700$6401a8c0@coa2l1olrodqj6>

Hi All:

       I am using antlr version 2.7.5.
       I have for my requirements a calculation utility as part of which  i have defined a function "len": Basically, returns the length of an alphanumeric input

       len returns [ String result = "" ] throws Exception  :
       LENKEYWORD
       (
          LPAREN
          ( 
                result = statement
          )
          RPAREN
         ( 
             { result = ""+result.length(); }
         )
     );


     for Iput : len("Hello!"

     the result is :   line 1:10: expecting RPAREN, found 'null' .   

     But it is logging this error to the stderr and not throwing it. I cant override reportError method in LLkParser to throw an exception.
     how do i go about doing this?

Regards,

Dilip
 


       
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060813/1181bf66/attachment.html
From mail at martin-probst.com  Sun Aug 13 06:45:42 2006
From: mail at martin-probst.com (Martin Probst)
Date: Sun Aug 13 06:45:52 2006
Subject: [antlr-interest] parser not throwing exception
In-Reply-To: <006301c6beba$68ea0700$6401a8c0@coa2l1olrodqj6>
References: <006301c6beba$68ea0700$6401a8c0@coa2l1olrodqj6>
Message-ID: <442DBC0C-DB9E-46DA-A0A7-CD6030890C5E@martin-probst.com>

Like this:

MyParser extends Parser;
options {
   defaultErrorHandler = false;
}

HTH,
Martin

Am 13.08.2006 um 11:25 schrieb Dilip Easwaran:

> Hi All:
>
>        I am using antlr version 2.7.5.
>        I have for my requirements a calculation utility as part of  
> which  i have defined a function "len": Basically, returns the  
> length of an alphanumeric input
>
>        len returns [ String result = "" ] throws Exception  :
>        LENKEYWORD
>        (
>           LPAREN
>           (
>                 result = statement
>           )
>           RPAREN
>          (
>              { result = ""+result.length(); }
>          )
>      );
>
>
>      for Iput : len("Hello!"
>
>      the result is :   line 1:10: expecting RPAREN, found 'null' .
>
>      But it is logging this error to the stderr and not throwing  
> it. I cant override reportError method in LLkParser to throw an  
> exception.
>      how do i go about doing this?
>
> Regards,
>
> Dilip
>
>
>
>
>

From dave at badgers-in-foil.co.uk  Sun Aug 13 06:56:59 2006
From: dave at badgers-in-foil.co.uk (David Holroyd)
Date: Sun Aug 13 06:57:02 2006
Subject: [antlr-interest] Migrating from ANTLR 2 to ANTLR 3
In-Reply-To: <20060812152905.GB1370@badgers-in-foil.co.uk>
References: <20060812143452.GA1370@badgers-in-foil.co.uk>
	<000c01c6be1d$beeed510$c704a8c0@hercules>
	<20060812152905.GB1370@badgers-in-foil.co.uk>
Message-ID: <20060813135659.GA3214@badgers-in-foil.co.uk>

On Sat, Aug 12, 2006 at 03:29:05PM +0000, David Holroyd wrote:
> How about I create a wiki page, 'Differences between ANTLR 2 and ANTLR 3'?

As threatened,

  http://www.antlr.org/wiki/display/ANTLR3/Migrating+from+ANTLR+2+to+ANTLR+3

These are just some things I've picked up so far.  Please add to the
list -- I've not got my grammar working in ANTLR 3 yet.  :)


ta,
dave

-- 
http://david.holroyd.me.uk/
From dwashington at gmx.net  Sun Aug 13 08:58:53 2006
From: dwashington at gmx.net (Denis Washington)
Date: Sun Aug 13 08:58:54 2006
Subject: [antlr-interest] ANTLR v3 compatible with GPL?
Message-ID: <44DF4C3D.2000507@gmx.net>

Hi,
I have read on the antlr.org that ANTLR v3 is BSD licensed. Does that 
mean that is incompatible to the GPL and therefore can't be used with 
GPL'd applications? That would be a big drawback from ANTLR v2 for, 
probably, several apps.

See:
http://www.gnu.org/licenses/license-list.html#OriginalBSD

A modification of the BSD license 
(http://www.gnu.org/licenses/license-list.html#ModifiedBSD) would make 
ANTLR 3 also usable for GPL projects.
From ric.klaren at gmail.com  Sun Aug 13 09:00:59 2006
From: ric.klaren at gmail.com (Ric Klaren)
Date: Sun Aug 13 09:03:01 2006
Subject: [antlr-interest] ANTLR v3 compatible with GPL?
In-Reply-To: <44DF4C3D.2000507@gmx.net>
References: <44DF4C3D.2000507@gmx.net>
Message-ID: <44DF4CBB.9010908@gmail.com>

Hi,

Denis Washington wrote:
> I have read on the antlr.org that ANTLR v3 is BSD licensed. Does that
> mean that is incompatible to the GPL and therefore can't be used with
> GPL'd applications? That would be a big drawback from ANTLR v2 for,
> probably, several apps.
> 
> See:
> http://www.gnu.org/licenses/license-list.html#OriginalBSD
> 
> A modification of the BSD license
> (http://www.gnu.org/licenses/license-list.html#ModifiedBSD) would make
> ANTLR 3 also usable for GPL projects.

ANTLR3 is afaik the modified BSD license. This was discussed quite a lot
in the past, some digging in the archives should turn up the whole
discussion.

Cheers,

Ric
From dave at badgers-in-foil.co.uk  Sun Aug 13 09:17:48 2006
From: dave at badgers-in-foil.co.uk (David Holroyd)
Date: Sun Aug 13 09:17:51 2006
Subject: [antlr-interest] Can't find template tokenRefBangTrack.st
In-Reply-To: <20060812185746.GF1370@badgers-in-foil.co.uk>
References: <20060812163322.GC1370@badgers-in-foil.co.uk>
	<D9C189D4-CEAA-4654-B3C7-87B445FA43E0@cs.usfca.edu>
	<20060812164850.GD1370@badgers-in-foil.co.uk>
	<CF8119D6-5481-48C3-8ED8-4C0146CDAB41@cs.usfca.edu>
	<20060812182842.GE1370@badgers-in-foil.co.uk>
	<20060812185746.GF1370@badgers-in-foil.co.uk>
Message-ID: <20060813161748.GA4897@badgers-in-foil.co.uk>

On Sat, Aug 12, 2006 at 06:57:46PM +0000, David Holroyd wrote:
> however I still get the "Can't find template matchSetTrack.st" error.

I've been digging around, trying to delete various bits of the grammar to
make the error go away.  On a whim I deleted all the -> rewrite rules,
and the error changed.  So, I've just been going though putting them
back a few at a time trying to see which one causes the error.

Seems it was this production:

methodDefinition[AST mods]
	:	'function' ('get'|'set')? IDENT
		parameterDeclarationList
		typeExpression
		(block)?
		-> ^(METHOD_DEF {$mods} $methodDefinition)
	;

If I remove the rewrite rule, I don't get the "Can't find template
matchSetTrack.st" error (however I get a different error, related to the
lexer code gen, I think).

Can anyone point out my mistake?


thanks!
dave

-- 
http://david.holroyd.me.uk/
From parrt at cs.usfca.edu  Sun Aug 13 09:26:59 2006
From: parrt at cs.usfca.edu (Terence Parr)
Date: Sun Aug 13 09:27:04 2006
Subject: [antlr-interest] Can't find template tokenRefBangTrack.st
In-Reply-To: <20060813161748.GA4897@badgers-in-foil.co.uk>
References: <20060812163322.GC1370@badgers-in-foil.co.uk>
	<D9C189D4-CEAA-4654-B3C7-87B445FA43E0@cs.usfca.edu>
	<20060812164850.GD1370@badgers-in-foil.co.uk>
	<CF8119D6-5481-48C3-8ED8-4C0146CDAB41@cs.usfca.edu>
	<20060812182842.GE1370@badgers-in-foil.co.uk>
	<20060812185746.GF1370@badgers-in-foil.co.uk>
	<20060813161748.GA4897@badgers-in-foil.co.uk>
Message-ID: <948F3C14-1A80-4B2B-ACDC-055C1559C78E@cs.usfca.edu>


On Aug 13, 2006, at 9:17 AM, David Holroyd wrote:

> On Sat, Aug 12, 2006 at 06:57:46PM +0000, David Holroyd wrote:
>> however I still get the "Can't find template matchSetTrack.st" error.
>
> I've been digging around, trying to delete various bits of the  
> grammar to
> make the error go away.  On a whim I deleted all the -> rewrite rules,
> and the error changed.  So, I've just been going though putting them
> back a few at a time trying to see which one causes the error.
>
> Seems it was this production:
>
> methodDefinition[AST mods]
> 	:	'function' ('get'|'set')? IDENT
> 		parameterDeclarationList
> 		typeExpression
> 		(block)?
> 		-> ^(METHOD_DEF {$mods} $methodDefinition)
> 	;
>
> If I remove the rewrite rule, I don't get the "Can't find template
> matchSetTrack.st" error (however I get a different error, related  
> to the
> lexer code gen, I think).
>
> Can anyone point out my mistake?

Hi David, great debugging work.  Yes, this is another "to do" item.   
Tracking sets ('get'|'set').  When you use -> it tracks all of the  
stuff on the left even if not ref'd (optimization to be done later).   
sorry bout that.  I should be back sort of off vacation tomorrow.   
The impending storm clouds of the Fall semester are descending upon  
me! ;)

Great work on the v2->v3 page, btw!

Ter
From mail at richard-musiol.de  Sun Aug 13 09:30:58 2006
From: mail at richard-musiol.de (Richard Musiol)
Date: Sun Aug 13 09:31:02 2006
Subject: [antlr-interest] Antlr 3.0b3: lexer super class & "all" scope
	suggestion for @header
Message-ID: <44DF53C2.8090500@richard-musiol.de>

Hi,

I tired to migrate my current project to ANTLR 3 today, but it already 
failed at the beginning. The current beta 3 hasn't got a way to change 
the super class of the lexer. This is important to me, when will it be 
possible?
Another thing I want to suggest is an "all" scope for the @header 
property. I think @header is mostly used for the package declaration and 
some imports. These are typically the same for lexer and parser, so why 
should I write the code twice in a mixed grammar.

Bye,
Richard
From dave at badgers-in-foil.co.uk  Sun Aug 13 09:33:44 2006
From: dave at badgers-in-foil.co.uk (David Holroyd)
Date: Sun Aug 13 09:33:48 2006
Subject: [antlr-interest] Can't find template tokenRefBangTrack.st
In-Reply-To: <948F3C14-1A80-4B2B-ACDC-055C1559C78E@cs.usfca.edu>
References: <20060812163322.GC1370@badgers-in-foil.co.uk>
	<D9C189D4-CEAA-4654-B3C7-87B445FA43E0@cs.usfca.edu>
	<20060812164850.GD1370@badgers-in-foil.co.uk>
	<CF8119D6-5481-48C3-8ED8-4C0146CDAB41@cs.usfca.edu>
	<20060812182842.GE1370@badgers-in-foil.co.uk>
	<20060812185746.GF1370@badgers-in-foil.co.uk>
	<20060813161748.GA4897@badgers-in-foil.co.uk>
	<948F3C14-1A80-4B2B-ACDC-055C1559C78E@cs.usfca.edu>
Message-ID: <20060813163344.GB4897@badgers-in-foil.co.uk>

On Sun, Aug 13, 2006 at 09:26:59AM -0700, Terence Parr wrote:
> >Seems it was this production:
> >
> >methodDefinition[AST mods]
> >	:	'function' ('get'|'set')? IDENT
> >		parameterDeclarationList
> >		typeExpression
> >		(block)?
> >		-> ^(METHOD_DEF {$mods} $methodDefinition)
> >	;
> >
> >If I remove the rewrite rule, I don't get the "Can't find template
> >matchSetTrack.st" error (however I get a different error, related  
> >to the lexer code gen, I think).

> Hi David, great debugging work.  Yes, this is another "to do" item.   
> Tracking sets ('get'|'set').  When you use -> it tracks all of the  
> stuff on the left even if not ref'd (optimization to be done later).   
> sorry bout that.  I should be back sort of off vacation tomorrow.   
> The impending storm clouds of the Fall semester are descending upon  
> me! ;)

Rightoh.  Well I just tried writing it out the 'long' way...

methodDefinition[AST mods]
	:	'function' (mode='get'|mode='set')? IDENT
		parameterDeclarationList
		typeExpression
		(block)?
		-> ^(METHOD_DEF {$mods}
		                mode? IDENT
				parameterDeclarationList
				typeExpression
				block?)
	;

...and this seems to pacify it.  I'll use that for the moment.


> Great work on the v2->v3 page, btw!

ta :)


dave

-- 
http://david.holroyd.me.uk/
From parrt at cs.usfca.edu  Sun Aug 13 10:17:32 2006
From: parrt at cs.usfca.edu (Terence Parr)
Date: Sun Aug 13 10:17:37 2006
Subject: [antlr-interest] v3 - how to disable error recovery
In-Reply-To: <1cb672170608121243i1810458h21ab0e1d73692ea0@mail.gmail.com>
References: <1cb672170608121243i1810458h21ab0e1d73692ea0@mail.gmail.com>
Message-ID: <BA1BD130-7545-4846-85A7-175BA1D27BC0@cs.usfca.edu>


On Aug 12, 2006, at 12:43 PM, Tamas Kerecsen wrote:

> Hi Everyone,
>
> Is there an easy way in v3 to completely disable error recovery?  
> I'd like to receive an exception on any lexer, parser or tree  
> walker issue and just bail out... v2 had an option that would allow  
> this, but I couldn't find the equivalent in v3 :(
>

Hi Tamas,

Try defining an action:

@rulecatch {}

which will replace the rule catch blocks with nothing.  Exceptions  
should fall through to invoking program.

Ter

From kerecsen at gmail.com  Sun Aug 13 22:04:12 2006
From: kerecsen at gmail.com (Tamas Kerecsen)
Date: Sun Aug 13 22:04:26 2006
Subject: [antlr-interest] v3 - how to disable error recovery
In-Reply-To: <BA1BD130-7545-4846-85A7-175BA1D27BC0@cs.usfca.edu>
References: <1cb672170608121243i1810458h21ab0e1d73692ea0@mail.gmail.com>
	<BA1BD130-7545-4846-85A7-175BA1D27BC0@cs.usfca.edu>
Message-ID: <1cb672170608132204j352bba53vc04ad77b0767ef21@mail.gmail.com>

Terence,

Thanks for the quick reply. Your suggestion works fine for the Parser and
the Tree generator, but I couldn't figure out how to get the lexer to
include my rulecatch statement (regardless of whether I put it at the
grammar level or inside the rule). I tried to decypher Java.stg, and it
doesn't seem to have any mention of @rulecatch for lexerRule. As the lexer's
exception handling is different from the parser and my understanding of
antlr's internals is extremely limited, I couldn't come up with an easy hack
to put it in there either.

Granted, it's pretty unlikely that the parser and tree generator will
succeed where the lexer failed, but I'd like to make sure nothing invalid
slips through :)

Thanks,
  Tamas

On 8/13/06, Terence Parr <parrt@cs.usfca.edu> wrote:
>
>
> On Aug 12, 2006, at 12:43 PM, Tamas Kerecsen wrote:
>
> > Hi Everyone,
> >
> > Is there an easy way in v3 to completely disable error recovery?
> > I'd like to receive an exception on any lexer, parser or tree
> > walker issue and just bail out... v2 had an option that would allow
> > this, but I couldn't find the equivalent in v3 :(
> >
>
> Hi Tamas,
>
> Try defining an action:
>
> @rulecatch {}
>
> which will replace the rule catch blocks with nothing.  Exceptions
> should fall through to invoking program.
>
> Ter
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060813/1f9f8cc0/attachment.html
From kerecsen at gmail.com  Sun Aug 13 22:36:41 2006
From: kerecsen at gmail.com (Tamas Kerecsen)
Date: Sun Aug 13 22:36:47 2006
Subject: [antlr-interest] v3 - how to disable error recovery
In-Reply-To: <1cb672170608132204j352bba53vc04ad77b0767ef21@mail.gmail.com>
References: <1cb672170608121243i1810458h21ab0e1d73692ea0@mail.gmail.com>
	<BA1BD130-7545-4846-85A7-175BA1D27BC0@cs.usfca.edu>
	<1cb672170608132204j352bba53vc04ad77b0767ef21@mail.gmail.com>
Message-ID: <1cb672170608132236y738a10fes7665f90a184a64e0@mail.gmail.com>

Terence,

Well, I spent a bit more time looking at it, and I fail to see a solution
other than taking the nextToken method out of the Lexer class, changing its
signature to throw RecognitionException and putting it into the lexer
template in java.stg, using @rulecatch to describe the catch block. Or at
least changing nextToken's throws signature in Lexer and using some sort of
new, overridable method to handle the exception.

Please, please, tell me I've missed an obvious, simple solution!

Thanks,
  Tamas
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060813/b0973723/attachment.html
From pa_inbox at yahoo.com  Mon Aug 14 01:29:21 2006
From: pa_inbox at yahoo.com (Pankaj Agarwal)
Date: Mon Aug 14 01:29:27 2006
Subject: [antlr-interest] An editor GUI for Grammar
Message-ID: <3e8856a10608140129g1daabfcep8f076a5f870c812d@mail.gmail.com>

Hi,
First accept my Congrats...for this excellent tool.
I am new to ANTLR , however I find it ideal for my requirement of developing
a Boolean query engine , I got enough idea on lexers and parsers, however
this engine needs to be end to end...i.e.
the end users should be able to specify these queries in a GUI ...I was
wondering whether there are some third party /open source or non open source
tools available which can help me generate a GUI from the gramamr
itself...since Grammar already has all the information for LHS , OP and RHS
..does this makes sense ?

Any pointers are appreciated.

-TIA
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060814/9df04816/attachment.html
From Abhijit_Ghonge at infosys.com  Mon Aug 14 05:38:03 2006
From: Abhijit_Ghonge at infosys.com (Abhijit Nandkumar Ghonge)
Date: Mon Aug 14 05:39:00 2006
Subject: [antlr-interest] is this right
Message-ID: <D72A054DF5002D4FA6CF14252F7997B8D97DF3@BLRKECMSG13.ad.infosys.com>


Hi all,

Can we catch exceptions for the alternatives like this. If yes, then its
not working for me.



rule: a:A B C

| D E

exception // for alternate

catch [RecognitionException ex] {

reportError(ex.toString());

}

| F G

exception // for alternate

catch [RecognitionException ex] {

reportError(ex.toString());

}



;





This throws following error:



Error: Rule 'rule' already has an exception handler.



Regards,

Abhijit.



**************** CAUTION - Disclaimer *****************
This e-mail contains PRIVILEGED AND CONFIDENTIAL INFORMATION intended solely for the use of the addressee(s). If you are not the intended recipient, please notify the sender by e-mail and delete the original message. Further, you are not to copy, disclose, or distribute this e-mail or its contents to any other person and any such actions are unlawful. This e-mail may contain viruses. Infosys has taken every reasonable precaution to minimize this risk, but is not liable for any damage you may sustain as a result of any virus in this e-mail. You should carry out your own virus checks before opening the e-mail or attachment. Infosys reserves the right to monitor and review the content of all messages sent to or from this e-mail address. Messages sent to or from this e-mail address may be stored on the Infosys e-mail system.
***INFOSYS******** End of Disclaimer ********INFOSYS***
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060814/7ec5d8d1/attachment.html
From swalton at cs.utah.edu  Mon Aug 14 05:41:17 2006
From: swalton at cs.utah.edu (Sean Walton)
Date: Mon Aug 14 05:39:43 2006
Subject: [antlr-interest] TreeAdaptor
In-Reply-To: <211C0032-C664-4CCE-98E8-A0738405C85E@cs.usfca.edu>
References: <200608101615.38767.e.papegaaij@student.utwente.nl>
	<211C0032-C664-4CCE-98E8-A0738405C85E@cs.usfca.edu>
Message-ID: <44E06F6D.90900@cs.utah.edu>

Terence Parr wrote:
> On Aug 10, 2006, at 7:15 AM, Emond Papegaaij wrote:
>
>> Hello
>>
>> I'm trying to implement my own version of the TreeAdaptor interface, but
>> have a few questions:
>>
>> What is the 'getUniqueID' used for? Is it supposed to simply return a
>> unique number for every node? As the Javadoc states using 
>> 'hashCode()' is
>> dangerous. Maybe 'System.identityHashCode()' is an option?
>
> Didn't know about that!  Sweet...yes, that is it.  We need this for 
> sending events to the debugger.  Added to list.
>
>> What are the 'getChild(int i)' and 'getChildCount()' methods supposed to
>> do? They are not being used anywhere. On which children do they operate?
>> Maybe an additional method argument 'Object node' needs to be added?
>
> doh!  Changed to:
>
>     /** Get a child 0..n-1 node */
>     public Object getChild(Object t, int i);
>
>     /** How many children?  If 0, then this is a leaf node */
>     public int getChildCount(Object t);
>
> Change 2870.
>
> Ter
>
You know, this wasn't necessary.  The 'getChild()' and 'getChildCount()' 
methods simply *used to* operate on the current node, because the child 
can be a parent to a different child.  The new method looks more like a 
static call, because it is now independent (i.e., 'static') from the 
current node, resolving getChild() through 't' and not the current 
instance.  If that is the case, it is a more confusing interface than 
the first.
-Sean
From open.zone at virgin.net  Mon Aug 14 05:38:14 2006
From: open.zone at virgin.net (Micheal J)
Date: Mon Aug 14 05:41:06 2006
Subject: [antlr-interest] ANTLR v3 compatible with GPL?
In-Reply-To: <44DF4C3D.2000507@gmx.net>
Message-ID: <001d01c6bf9e$848d5270$c704a8c0@hercules>

Hi,

> Hi,
> I have read on the antlr.org that ANTLR v3 is BSD licensed. Does that 
> mean that is incompatible to the GPL and therefore can't be used with 
> GPL'd applications? That would be a big drawback from ANTLR v2 for, 
> probably, several apps.

Just out of interest, why? (as in why would this be a drawback?). 

Given that alternative codegens and runtimes can be developed for whatever
targets one desires in ANTLR v3, I don't see how the ANTLR tool's license
impacts on the use/licensing of any generated code and/or the [possibly
custom] runtime library.

Micheal

-----------------------
The best way to contact me is via the list/forum. My time is very limited.

From parrt at cs.usfca.edu  Mon Aug 14 08:38:27 2006
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Aug 14 08:38:33 2006
Subject: [antlr-interest] TreeAdaptor
In-Reply-To: <44E06F6D.90900@cs.utah.edu>
References: <200608101615.38767.e.papegaaij@student.utwente.nl>
	<211C0032-C664-4CCE-98E8-A0738405C85E@cs.usfca.edu>
	<44E06F6D.90900@cs.utah.edu>
Message-ID: <7B5C99F0-0056-4109-A76B-5A0893E51C12@cs.usfca.edu>


On Aug 14, 2006, at 5:41 AM, Sean Walton wrote:
>> doh!  Changed to:
>>
>>     /** Get a child 0..n-1 node */
>>     public Object getChild(Object t, int i);
>>
>>     /** How many children?  If 0, then this is a leaf node */
>>     public int getChildCount(Object t);
>>
>> Change 2870.
>>
>> Ter
>>
> You know, this wasn't necessary.  The 'getChild()' and  
> 'getChildCount()' methods simply *used to* operate on the current  
> node, because the child can be a parent to a different child.  The  
> new method looks more like a static call, because it is now  
> independent (i.e., 'static') from the current node, resolving  
> getChild() through 't' and not the current instance.  If that is  
> the case, it is a more confusing interface than the first.

Hi Sean.  There is no such thing as "current node".  To what do you  
refer?

Ter
From parrt at cs.usfca.edu  Mon Aug 14 11:04:07 2006
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Aug 14 11:04:12 2006
Subject: [antlr-interest] Can't find template tokenRefBangTrack.st
In-Reply-To: <20060812185746.GF1370@badgers-in-foil.co.uk>
References: <20060812163322.GC1370@badgers-in-foil.co.uk>
	<D9C189D4-CEAA-4654-B3C7-87B445FA43E0@cs.usfca.edu>
	<20060812164850.GD1370@badgers-in-foil.co.uk>
	<CF8119D6-5481-48C3-8ED8-4C0146CDAB41@cs.usfca.edu>
	<20060812182842.GE1370@badgers-in-foil.co.uk>
	<20060812185746.GF1370@badgers-in-foil.co.uk>
Message-ID: <DEF293B4-645C-4202-8F05-27FC6D6BE567@cs.usfca.edu>


On Aug 12, 2006, at 11:57 AM, David Holroyd wrote:
>> Do I actually need to convert the entire grammar over to use the ->
>> syntax, or can I alternate this production-by-production?
>
>
> any ideas?

production by production works.

Ter


From parrt at cs.usfca.edu  Mon Aug 14 11:07:34 2006
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Aug 14 11:07:38 2006
Subject: [antlr-interest] Antlr 3.0b3: lexer super class & "all" scope
	suggestion for @header
In-Reply-To: <44DF53C2.8090500@richard-musiol.de>
References: <44DF53C2.8090500@richard-musiol.de>
Message-ID: <7A1588C3-4E05-4A1C-940E-2D2E261B732E@cs.usfca.edu>


On Aug 13, 2006, at 9:30 AM, Richard Musiol wrote:

> Hi,
>
> I tired to migrate my current project to ANTLR 3 today, but it  
> already failed at the beginning. The current beta 3 hasn't got a  
> way to change the super class of the lexer. This is important to  
> me, when will it be possible?

Added to list.

> Another thing I want to suggest is an "all" scope for the @header  
> property. I think @header is mostly used for the package  
> declaration and some imports. These are typically the same for  
> lexer and parser, so why should I write the code twice in a mixed  
> grammar.

Imports can be very different.
Ter

From parrt at cs.usfca.edu  Mon Aug 14 11:09:50 2006
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Aug 14 11:09:56 2006
Subject: [antlr-interest] v3 - how to disable error recovery
In-Reply-To: <1cb672170608121243i1810458h21ab0e1d73692ea0@mail.gmail.com>
References: <1cb672170608121243i1810458h21ab0e1d73692ea0@mail.gmail.com>
Message-ID: <F97BEDF4-B11E-4003-AE9F-F21DE06A5AEB@cs.usfca.edu>

Override the lexer to alter nextToken I guess.  It normally tries to  
get another token.
Ter
On Aug 12, 2006, at 12:43 PM, Tamas Kerecsen wrote:

> Hi Everyone,
>
> Is there an easy way in v3 to completely disable error recovery?  
> I'd like to receive an exception on any lexer, parser or tree  
> walker issue and just bail out... v2 had an option that would allow  
> this, but I couldn't find the equivalent in v3 :(
>
> Thanks,
>   Tamas
>

From charles.felstead at gmail.com  Mon Aug 14 14:24:31 2006
From: charles.felstead at gmail.com (Charles Felstead)
Date: Mon Aug 14 14:24:37 2006
Subject: [antlr-interest] Parser seems to confuse strings and literals
Message-ID: <97b85e750608141424m73a66fdcr638acbe9ede7a5d2@mail.gmail.com>

Hello,

I'm getting a message that says something like: Expecting "aaabbb", Found
'aaabbb'. The only apparent difference is the single quotes versus double
quotes.

My parser has a rule that look like this:

root
      :
        TOPEN "aaabbb" WORD EQ ATTR_VAL TCLOSE
        TOPEN "aaabbb" TCLOSE
      ;

I've based my lexer/parser on the IDLv3 grammar from Gary Duzan. I know the
problem has to do with the parser trying to match some LITERAL_aaabbb but
can't figure out a way of making it work. I'm sure this is a basic mistake
... can someone help me out?

Thanks,
 Charles.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060814/1c9e416b/attachment.html
From mail at richard-musiol.de  Mon Aug 14 14:52:31 2006
From: mail at richard-musiol.de (Richard Musiol)
Date: Mon Aug 14 14:52:33 2006
Subject: [antlr-interest] Antlr 3.0b3: lexer super class & "all" scope
	suggestion for @header
In-Reply-To: <7A1588C3-4E05-4A1C-940E-2D2E261B732E@cs.usfca.edu>
References: <44DF53C2.8090500@richard-musiol.de>
	<7A1588C3-4E05-4A1C-940E-2D2E261B732E@cs.usfca.edu>
Message-ID: <44E0F09F.5050707@richard-musiol.de>

Terence Parr wrote:
> 
> On Aug 13, 2006, at 9:30 AM, Richard Musiol wrote:
> 
>> Hi,
>>
>> I tired to migrate my current project to ANTLR 3 today, but it already 
>> failed at the beginning. The current beta 3 hasn't got a way to change 
>> the super class of the lexer. This is important to me, when will it be 
>> possible?
> 
> Added to list.

Thanks.
I saw your comment "Must be separate grammar to use?". Why don't you use 
two options like lexerSuperClass and parserSuperClass or something like 
that?

> 
>> Another thing I want to suggest is an "all" scope for the @header 
>> property. I think @header is mostly used for the package declaration 
>> and some imports. These are typically the same for lexer and parser, 
>> so why should I write the code twice in a mixed grammar.
> 
> Imports can be very different.
> Ter
> 
Yes, imports can be different, but it does not hurt if you import some 
more classes which you only need in the lexer also into the parser. 
Users of my software will write grammars and some additional classes 
themselves, so one of my goals is to keep their code at the smallest and 
easiest level possible (that's why I'm really interested in ANTLR 3.0). 
I think I'll implement this on my own, you've got more important things 
to do for the 3.0 final than this one.

Bye,
Richard
From jbb at acm.org  Mon Aug 14 15:11:40 2006
From: jbb at acm.org (John B. Brodie)
Date: Mon Aug 14 15:11:47 2006
Subject: [antlr-interest] Parser seems to confuse strings and literals
In-Reply-To: <97b85e750608141424m73a66fdcr638acbe9ede7a5d2@mail.gmail.com>
	(message from Charles Felstead on Mon, 14 Aug 2006 17:24:31 -0400)
References: <97b85e750608141424m73a66fdcr638acbe9ede7a5d2@mail.gmail.com>
Message-ID: <E1GCkeq-0006xt-00@gecko>

on Mon, 14 Aug 2006 17:24:31, Charles Felstead asked:
>Hello,
>

Hi!

>I'm getting a message that says something like: Expecting "aaabbb", Found
>'aaabbb'. The only apparent difference is the single quotes versus double
>quotes.
>
>My parser has a rule that look like this:
>
>root
>      :
>        TOPEN "aaabbb" WORD EQ ATTR_VAL TCLOSE
>        TOPEN "aaabbb" TCLOSE
>      ;
>
>I've based my lexer/parser on the IDLv3 grammar from Gary Duzan. I know the
>problem has to do with the parser trying to match some LITERAL_aaabbb but
>can't figure out a way of making it work. I'm sure this is a basic mistake
>... can someone help me out?

if you are using ANTLR v3, use ' instead of " to surround literals in
the grammar.

if you are using ANTLR v2 and have separate lexer and parser .g files,
token definitions are probably out of sync between the two .g files.
check your usage of the importVocab/exportVocab options and ensure you
are running the Tool on the .g files in the proper order. inspect the
*Token.txt files to ensure that consistent numbering of the tokens has
been used.

if neither of the above, then can't help further. need more info...

Hope this helps
   -jbb
From parrt at cs.usfca.edu  Mon Aug 14 16:11:04 2006
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Aug 14 16:11:10 2006
Subject: [antlr-interest] TreeAdaptor
In-Reply-To: <44E0E49F.3070603@cs.utah.edu>
References: <200608101615.38767.e.papegaaij@student.utwente.nl>	<211C0032-C664-4CCE-98E8-A0738405C85E@cs.usfca.edu>	<44E06F6D.90900@cs.utah.edu>
	<7B5C99F0-0056-4109-A76B-5A0893E51C12@cs.usfca.edu>
	<44E0E49F.3070603@cs.utah.edu>
Message-ID: <6B2F90B6-EBD5-4D1F-9568-6FEDAFB38C33@cs.usfca.edu>


On Aug 14, 2006, at 2:01 PM, Sean Walton wrote:

> Terence Parr wrote:
>>
>> On Aug 14, 2006, at 5:41 AM, Sean Walton wrote:
>>>> doh!  Changed to:
>>>>
>>>>     /** Get a child 0..n-1 node */
>>>>     public Object getChild(Object t, int i);
>>>>
>>>>     /** How many children?  If 0, then this is a leaf node */
>>>>     public int getChildCount(Object t);
>>>>
>>>> Change 2870.
>>>>
>>>> Ter
>>>>
>>> You know, this wasn't necessary.  The 'getChild()' and  
>>> 'getChildCount()' methods simply *used to* operate on the current  
>>> node, because the child can be a parent to a different child.   
>>> The new method looks more like a static call, because it is now  
>>> independent (i.e., 'static') from the current node, resolving  
>>> getChild() through 't' and not the current instance.  If that is  
>>> the case, it is a more confusing interface than the first.
>>
>> Hi Sean.  There is no such thing as "current node".  To what do  
>> you refer?
>>
>> Ter
> (Sorry I can't cc the list; I'm at home and the list does not  
> recognize the source ebox.)
> The current node is the one that you get from this code:
>            nesc_Program_return t = g.nesc_Program();
>            Object tree = t.getTree();
> 'tree' points to the "current node" or in other words the head of  
> the tree.  As the program walks over the tree recursively (or even  
> iteratively), 'tree' will always point to the current instance.   
> Getting the child or the child count is simple and IMO elegant as  
> it was.  Adding a reference to the head of the tree (Object t)  
> obviates the need of instance information (referring to OOAD),  
> therefore it is independent from the instance, and therefore, it is  
> more of a static behavior.
> Unless I am missing something very obvious, I prefer the original  
> form, because it is simpler than the new version (and even more  
> elegant than V2).

Hi Sean,

ANTLR  Does not know anything about the node types; they are just  
plain objects. you can in your actions of course always reference  
t.getChild()  but during tree parsing ANTLR cannot know how to  
navigate your trees.  It must ask your adapter how to get children.

Terence
From charles.felstead at gmail.com  Mon Aug 14 17:02:31 2006
From: charles.felstead at gmail.com (Charles Felstead)
Date: Mon Aug 14 17:02:35 2006
Subject: [antlr-interest] Parser seems to confuse strings and literals
In-Reply-To: <E1GCkeq-0006xt-00@gecko>
References: <97b85e750608141424m73a66fdcr638acbe9ede7a5d2@mail.gmail.com>
	<E1GCkeq-0006xt-00@gecko>
Message-ID: <97b85e750608141702x6f8422ddv7e4e53b9be947be9@mail.gmail.com>

John,

after I sent this request, I tried what you just proposed; I created on .g
file for both the lexer and the parser. But it does seem to change anything.
I did a clean build and everything.

I'm using ANTLRv2 so I can't use ['] instead of ["] in the parser rules. My
WORD definition sets the testLiterals option to true (even if that's the
case by default).

I'll check the *tokens files but I really don't know what else to check for,
thanks for your reply.

Charles.

On 8/14/06, John B. Brodie <jbb@acm.org> wrote:
>
> on Mon, 14 Aug 2006 17:24:31, Charles Felstead asked:
> >Hello,
> >
>
> Hi!
>
> >I'm getting a message that says something like: Expecting "aaabbb", Found
> >'aaabbb'. The only apparent difference is the single quotes versus double
> >quotes.
> >
> >My parser has a rule that look like this:
> >
> >root
> >      :
> >        TOPEN "aaabbb" WORD EQ ATTR_VAL TCLOSE
> >        TOPEN "aaabbb" TCLOSE
> >      ;
> >
> >I've based my lexer/parser on the IDLv3 grammar from Gary Duzan. I know
> the
> >problem has to do with the parser trying to match some LITERAL_aaabbb but
> >can't figure out a way of making it work. I'm sure this is a basic
> mistake
> >... can someone help me out?
>
> if you are using ANTLR v3, use ' instead of " to surround literals in
> the grammar.
>
> if you are using ANTLR v2 and have separate lexer and parser .g files,
> token definitions are probably out of sync between the two .g files.
> check your usage of the importVocab/exportVocab options and ensure you
> are running the Tool on the .g files in the proper order. inspect the
> *Token.txt files to ensure that consistent numbering of the tokens has
> been used.
>
> if neither of the above, then can't help further. need more info...
>
> Hope this helps
>    -jbb
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060814/17994422/attachment.html
From parrt at cs.usfca.edu  Mon Aug 14 17:19:29 2006
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Aug 14 17:19:32 2006
Subject: [antlr-interest] Parser seems to confuse strings and literals
In-Reply-To: <97b85e750608141702x6f8422ddv7e4e53b9be947be9@mail.gmail.com>
References: <97b85e750608141424m73a66fdcr638acbe9ede7a5d2@mail.gmail.com>
	<E1GCkeq-0006xt-00@gecko>
	<97b85e750608141702x6f8422ddv7e4e53b9be947be9@mail.gmail.com>
Message-ID: <132B95CA-68E9-45FC-ACE7-56951F519E04@cs.usfca.edu>

Hi. Messages like: "Expecting "aaabbb", Found 'aaabbb'." are always  
about mismatching TokenTypes.   perhaps a rebuild order issue?

Ter
From kerecsen at gmail.com  Mon Aug 14 19:49:24 2006
From: kerecsen at gmail.com (Tamas Kerecsen)
Date: Mon Aug 14 19:49:28 2006
Subject: [antlr-interest] v3 - how to disable error recovery
In-Reply-To: <F97BEDF4-B11E-4003-AE9F-F21DE06A5AEB@cs.usfca.edu>
References: <1cb672170608121243i1810458h21ab0e1d73692ea0@mail.gmail.com>
	<F97BEDF4-B11E-4003-AE9F-F21DE06A5AEB@cs.usfca.edu>
Message-ID: <1cb672170608141949k139f1f7atbce629074ba565ff@mail.gmail.com>

Terence,

The cardinal difficulty is that Lexer.nextToken's 'throws' signature doesn't
allow me to throw an exception even if I override it. For the time being I
hacked around this limitation by adding a new member (using @lexer::members)
to the lexer and overriding nextToken (again, using @lexer::members) to set
the new variable when it encounters a recognition exception. But this isn't
pretty at all, so please add a more convenient mechanism down the line when
you get a chance...

Thanks,
  Tamas

On 8/14/06, Terence Parr <parrt@cs.usfca.edu> wrote:
>
> Override the lexer to alter nextToken I guess.  It normally tries to
> get another token.
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060814/d0d56c5f/attachment.html
From dave at badgers-in-foil.co.uk  Tue Aug 15 07:04:03 2006
From: dave at badgers-in-foil.co.uk (David Holroyd)
Date: Tue Aug 15 07:04:18 2006
Subject: [antlr-interest] Can't find template tokenRefBangTrack.st
In-Reply-To: <DEF293B4-645C-4202-8F05-27FC6D6BE567@cs.usfca.edu>
References: <20060812163322.GC1370@badgers-in-foil.co.uk>
	<D9C189D4-CEAA-4654-B3C7-87B445FA43E0@cs.usfca.edu>
	<20060812164850.GD1370@badgers-in-foil.co.uk>
	<CF8119D6-5481-48C3-8ED8-4C0146CDAB41@cs.usfca.edu>
	<20060812182842.GE1370@badgers-in-foil.co.uk>
	<20060812185746.GF1370@badgers-in-foil.co.uk>
	<DEF293B4-645C-4202-8F05-27FC6D6BE567@cs.usfca.edu>
Message-ID: <20060815140403.GA6649@badgers-in-foil.co.uk>

On Mon, Aug 14, 2006 at 11:04:07AM -0700, Terence Parr wrote:
> 
> On Aug 12, 2006, at 11:57 AM, David Holroyd wrote:
> >>Do I actually need to convert the entire grammar over to use the ->
> >>syntax, or can I alternate this production-by-production?

> production by production works.

Thanks for all your help!

I've finished migrating my grammar (to the point where the resulting
.java files compile anyway).  I now need to port my application over to
the ANTLR 3 runtime to discover if the result is actually functionally
equivalent.


ta,
dave

-- 
http://david.holroyd.me.uk/
From attodorov at gmail.com  Tue Aug 15 07:25:54 2006
From: attodorov at gmail.com (Angel Todorov)
Date: Tue Aug 15 07:26:00 2006
Subject: [antlr-interest] problems with the ECMAScript grammar for ANTLR 3.0
Message-ID: <4ac1e6310608150725w24db684apf3436ce074f21322@mail.gmail.com>

Hi guys,

I am having problems generating a lexer and a parser for the
"official" ECMAScript grammar posted on your website , for ANTLR v
3.0:

java -cp ".;antlr-2.7.6.jar;antlr.3.0b2.jar;stringtemplate-2.3b8.jar"
antlr.Tool ecmascriptA3.g

ANTLR Parser Generator   Version 2.7.6 (2005-12-22)   1989-2005
ecmascriptA3.g:1:1: unexpected token: grammar
error: Token stream error reading grammar(s):
ecmascriptA3.g:60:11: expecting ''', found '*'
ecmascriptA3.g:1:1: rule grammar trapped:
ecmascriptA3.g:1:1: unexpected token: grammar
TokenStreamException: expecting ''', found '*'


Before i dive deeper into solving these problems, am i doing something
completely wrong with the tool , or the grammar file has incorrect
syntax anyway ? Thank you very much in advance.

P.S: Here is a link to the grammar i am using :

http://www.antlr.org/grammar/1153976512034/ecmascriptA3.g

Regards,
Angel Todorov
From dwashington at gmx.net  Tue Aug 15 07:32:00 2006
From: dwashington at gmx.net (Denis Washington)
Date: Tue Aug 15 07:31:53 2006
Subject: [antlr-interest] Variable visibility problem with ANTLR 3 code
	generation
Message-ID: <44E1DAE0.4020208@gmx.net>

Hi,
My ANTLR 3 grammar contains following rule:

multiplicativeExpression returns [Expression expr]
    scope { ArithmeticOperator op; }
    :   e=unaryExpression { expr = e; }
        (            
            (   '*' { $multiplicativeExpression::op =
                            ArithmeticOperator.MULTIPLY; }
            |   '/' { $multiplicativeExpression::op =
                            ArithmeticOperator.DIVIDE; }
            )
            
            e2=multiplicativeExpression
            {
                expr = new ArithmeticExpression(expr, e2,
                        $multiplicativeExpression::op);
                expr.setSource(e);
            }
        )*
    ;

If I generate code for it and try to compile that code, I get errors 
about non-existing variables e and e2 in the part in parenthes. A look 
in the code reveals why: e and e2 get automatically declared at the 
beginning of multiplicativeExpression() as it should be, but during 
decision, another methods with the name "synpred*number*()" are called 
with code for the things in the parenthes (e2=multiplicativeExpression 
and so forth), which is naturally errorous because this method doesn't 
have access to the local variables of multiplicativeExpression(). Is 
this a bug or "a feature"? I need help! (using v3.0b3)
From jbb at acm.org  Tue Aug 15 08:02:31 2006
From: jbb at acm.org (John B. Brodie)
Date: Tue Aug 15 08:02:36 2006
Subject: [antlr-interest] problems with the ECMAScript grammar for ANTLR
	3.0
In-Reply-To: <4ac1e6310608150725w24db684apf3436ce074f21322@mail.gmail.com>
	(message from Angel Todorov on Tue, 15 Aug 2006 17:25:54 +0300)
References: <4ac1e6310608150725w24db684apf3436ce074f21322@mail.gmail.com>
Message-ID: <E1GD0R5-00029J-00@gecko>

on Tue, 15 Aug 2006 17:25:54, Angel Todorov asked:
>Hi guys,

Hi!

>I am having problems generating a lexer and a parser for the
>"official" ECMAScript grammar posted on your website , for ANTLR v
>3.0:
>
>java -cp ".;antlr-2.7.6.jar;antlr.3.0b2.jar;stringtemplate-2.3b8.jar"
>antlr.Tool ecmascriptA3.g
 ^^^^^^^^^^

the invocation name of the ANTLR v3 Tool is org.antlr.Tool purposefully
renamed to be distinguished from the v2 Tool antlr.Tool.

Hope this helps...
   -jbb
From dave at badgers-in-foil.co.uk  Tue Aug 15 08:08:19 2006
From: dave at badgers-in-foil.co.uk (David Holroyd)
Date: Tue Aug 15 08:08:23 2006
Subject: [antlr-interest] Variable visibility problem with ANTLR 3 code
	generation
In-Reply-To: <44E1DAE0.4020208@gmx.net>
References: <44E1DAE0.4020208@gmx.net>
Message-ID: <20060815150819.GB6649@badgers-in-foil.co.uk>

On Tue, Aug 15, 2006 at 04:32:00PM +0200, Denis Washington wrote:
> Hi,
> My ANTLR 3 grammar contains following rule:
> 
> multiplicativeExpression returns [Expression expr]
>    scope { ArithmeticOperator op; }
>    :   e=unaryExpression { expr = e; }
>        (            
>            (   '*' { $multiplicativeExpression::op =
>                            ArithmeticOperator.MULTIPLY; }
>            |   '/' { $multiplicativeExpression::op =
>                            ArithmeticOperator.DIVIDE; }
>            )
>            
>            e2=multiplicativeExpression
>            {
>                expr = new ArithmeticExpression(expr, e2,
>                        $multiplicativeExpression::op);
>                expr.setSource(e);
>            }
>        )*
>    ;
> 
> If I generate code for it and try to compile that code, I get errors 
> about non-existing variables e and e2 in the part in parenthes.

I'm not sure, but don't such label references require a '$' prefix?


ta,
dave

-- 
http://david.holroyd.me.uk/
From attodorov at gmail.com  Tue Aug 15 08:08:20 2006
From: attodorov at gmail.com (Angel Todorov)
Date: Tue Aug 15 08:08:31 2006
Subject: [antlr-interest] problems with the ECMAScript grammar for ANTLR
	3.0
In-Reply-To: <E1GD0R5-00029J-00@gecko>
References: <4ac1e6310608150725w24db684apf3436ce074f21322@mail.gmail.com>
	<E1GD0R5-00029J-00@gecko>
Message-ID: <4ac1e6310608150808s7c300047t8e221cb705717c74@mail.gmail.com>

Hi John,

Yep, i figured that out - stupid me . Thanks

Regards,
Angel Todorov

On 8/15/06, John B. Brodie <jbb@acm.org> wrote:
> on Tue, 15 Aug 2006 17:25:54, Angel Todorov asked:
> >Hi guys,
>
> Hi!
>
> >I am having problems generating a lexer and a parser for the
> >"official" ECMAScript grammar posted on your website , for ANTLR v
> >3.0:
> >
> >java -cp ".;antlr-2.7.6.jar;antlr.3.0b2.jar;stringtemplate-2.3b8.jar"
> >antlr.Tool ecmascriptA3.g
>  ^^^^^^^^^^
>
> the invocation name of the ANTLR v3 Tool is org.antlr.Tool purposefully
> renamed to be distinguished from the v2 Tool antlr.Tool.
>
> Hope this helps...
>    -jbb
>
From open.zone at virgin.net  Tue Aug 15 08:37:45 2006
From: open.zone at virgin.net (Micheal J)
Date: Tue Aug 15 08:40:41 2006
Subject: [antlr-interest] ANTLR v3 compatible with GPL?
In-Reply-To: <44E1C36C.1090405@gmx.net>
Message-ID: <007201c6c080$c3a73560$c704a8c0@hercules>

Hi Denis,

> >> Hi,
> >> I have read on the antlr.org that ANTLR v3 is BSD
> licensed. Does that
> >> mean that is incompatible to the GPL and therefore can't
> be used with
> >> GPL'd applications? That would be a big drawback from
> ANTLR v2 for,
> >> probably, several apps.

> > Just out of interest, why? (as in why would this be a drawback?).
> >
> > Given that alternative codegens and runtimes can be developed for 
> > whatever targets one desires in ANTLR v3, I don't see how the ANTLR 
> > tool's license impacts on the use/licensing of any generated code 
> > and/or the [possibly custom] runtime library.

> The Problem is that the generated code still uses a runtime library, 
> which means your app still is dependent on ANTLR. If ANTLR 3 was 
> licensed under the "original" BSD license, this kind of dependence 
> wouldn't be allowed for a GPL'd program. ANTLR v2 had essentially a 
> do-what-you-want-with-it license, so dependence on ANTLR v2 
> is no issue 
> for an app licensed under the GPL.

Thanks for the clarification. In a sense it simply confirms my earlier
statement.

GPL'ed applications can have binary dependencies. Ergo, many GPL'ed apps run
on (i.e. have a dependency on) Windows, OSX and/or Java for instance. That
being the case, the dependency of a GPL'ed application on the ANTLR v3
runtime library is a non-issue as one can always distribute the runtime
library binaries with the GPL'ed application. Most applications do not [and
should not] embed the ANTLR command-line tool.

AFAICT, the source licensing issue is only relevant if the intention is to
RE-LICENSE the ANTLR v3 sources (tool and runtime) under the GPL as was
common with the ANTLR v2 sources.

Were your comments essentially about allowing the re-licensing of ANTLR v3
sources under the GPL?


Micheal

-----------------------
The best way to contact me is via the list/forum. My time is very limited.

From jsamort at gmail.com  Tue Aug 15 10:31:00 2006
From: jsamort at gmail.com (Scott Amort)
Date: Tue Aug 15 10:31:14 2006
Subject: [antlr-interest] ANTLR v3 compatible with GPL?
In-Reply-To: <007201c6c080$c3a73560$c704a8c0@hercules>
References: <007201c6c080$c3a73560$c704a8c0@hercules>
Message-ID: <1155663060.12372.25.camel@localhost>

Hi Michael,

On Tue, 2006-08-15 at 16:37 +0100, Micheal J wrote:
> GPL'ed applications can have binary dependencies. Ergo, many GPL'ed apps run
> on (i.e. have a dependency on) Windows, OSX and/or Java for instance. That
> being the case, the dependency of a GPL'ed application on the ANTLR v3
> runtime library is a non-issue as one can always distribute the runtime
> library binaries with the GPL'ed application.

I don't believe this is true.  Here is a quote:

"It has always been the FSF's position that dynamically linking
applications to libraries creates a single work derived from both the
library code and the application code. The GPL requires that all
derivative works be licensed under the GPL, an effect which can be
described as 'hereditary.'"

Dependencies on Windows, Java, gcc, etc. fall under the following GPL
exception:

"However, as a special exception, the source code distributed need not
include anything that is normally distributed (in either source or
binary form) with the major components (compiler, kernel, and so on) of
the operating system on which the executable runs, unless that component
itself accompanies the executable."

So, if you are linking to an external library, it must be either GPL or
GPL-compatible.  ANTLR v3's license is the 'new' BSD license, however,
and as such, is compatible with the GPL.

Best,
Scott


From jsamort at gmail.com  Tue Aug 15 10:39:55 2006
From: jsamort at gmail.com (Scott Amort)
Date: Tue Aug 15 10:40:02 2006
Subject: [antlr-interest] ANTLR v3 compatible with GPL?
In-Reply-To: <007201c6c080$c3a73560$c704a8c0@hercules>
References: <007201c6c080$c3a73560$c704a8c0@hercules>
Message-ID: <1155663595.12372.30.camel@localhost>

Oops, one more point:

On Tue, 2006-08-15 at 16:37 +0100, Micheal J wrote:
> AFAICT, the source licensing issue is only relevant if the intention is to
> RE-LICENSE the ANTLR v3 sources (tool and runtime) under the GPL as was
> common with the ANTLR v2 sources.

Yes, and this is what happens if you link to ANTLR v3's library from
GPL-code.  You are in essence re-licensing it as GPL (which is allowed
by the new BSD license, and which is why that license is compatible with
the GPL).

http://www.gnu.org/licenses/gpl-faq.html#WhatDoesCompatMean

Best,
Scott

From parrt at cs.usfca.edu  Tue Aug 15 11:12:15 2006
From: parrt at cs.usfca.edu (Terence Parr)
Date: Tue Aug 15 11:12:22 2006
Subject: [antlr-interest] v3 - how to disable error recovery
In-Reply-To: <1cb672170608141949k139f1f7atbce629074ba565ff@mail.gmail.com>
References: <1cb672170608121243i1810458h21ab0e1d73692ea0@mail.gmail.com>
	<F97BEDF4-B11E-4003-AE9F-F21DE06A5AEB@cs.usfca.edu>
	<1cb672170608141949k139f1f7atbce629074ba565ff@mail.gmail.com>
Message-ID: <293E029C-771C-45B3-9727-138C416A040D@cs.usfca.edu>


On Aug 14, 2006, at 7:49 PM, Tamas Kerecsen wrote:

> Terence,
>
> The cardinal difficulty is that Lexer.nextToken's 'throws'  
> signature doesn't allow me to throw an exception even if I override  
> it.

Oh, right!

> For the time being I hacked around this limitation by adding a new  
> member (using @lexer::members) to the lexer and overriding  
> nextToken (again, using @lexer::members) to set the new variable  
> when it encounters a recognition exception. But this isn't pretty  
> at all, so please add a more convenient mechanism down the line  
> when you get a chance...

  well, this is a very unusual situation; I think that fact is  
probably okay given its low frequency. in general people want the  
lexer to keep trying for more tokens.

Ter


From charles.felstead at gmail.com  Tue Aug 15 12:44:52 2006
From: charles.felstead at gmail.com (Charles Felstead)
Date: Tue Aug 15 12:45:08 2006
Subject: [antlr-interest] Parser seems to confuse strings and literals
In-Reply-To: <20060815011730.95205.qmail@web55905.mail.re3.yahoo.com>
References: <97b85e750608141702x6f8422ddv7e4e53b9be947be9@mail.gmail.com>
	<20060815011730.95205.qmail@web55905.mail.re3.yahoo.com>
Message-ID: <97b85e750608151244i25342e49q1d37480a78f86b8f@mail.gmail.com>

Hello,

John you were right. I checked the *Tokens files and found files from older
versions of my grammar files. That made me realize that I still had
import/export statements (invalid) in my new integrated lexer/parser .g
file. That was causing all the problems!! I got rid of those and my parser
now works just fine...it's so cool!!

However, I would really like to be able to reuse the same lexer for my other
parsers. I tried splitting the single .g into two .g, added the
imports/exports statements and I'm back were I started; I get a message that
says: expected "aaa", found 'aaa'!

Now this time I did real clean build; I removed every .class and all the
generated .java files before running antlr on the two .g files. Then I
generated the lexer, compiled it, and checked that it still works. Finally,
I generated the parser and compiled it but it doesn't work anymore.  So, can
you tell what else I have to do when the lexer/parser grammars are in
seperate files?

Thanks for your help!
Charles.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060815/722e472a/attachment.html
From open.zone at virgin.net  Tue Aug 15 13:34:21 2006
From: open.zone at virgin.net (Micheal J)
Date: Tue Aug 15 13:37:18 2006
Subject: [antlr-interest] ANTLR v3 compatible with GPL?
In-Reply-To: <1155663060.12372.25.camel@localhost>
Message-ID: <009c01c6c0aa$37282930$c704a8c0@hercules>

Hi Scott,

> > GPL'ed applications can have binary dependencies. Ergo, many GPL'ed 
> > apps run on (i.e. have a dependency on) Windows, OSX and/or 
> Java for 
> > instance. That being the case, the dependency of a GPL'ed 
> application 
> > on the ANTLR v3 runtime library is a non-issue as one can always 
> > distribute the runtime library binaries with the GPL'ed application.
> 
> I don't believe this is true.  Here is a quote:
> 
> "It has always been the FSF's position that dynamically 
> linking applications to libraries creates a single work 
> derived from both the library code and the application code. 
> The GPL requires that all derivative works be licensed under 
> the GPL, an effect which can be described as 'hereditary.'"

The FSF statement above is advocating free software. It also says that
derivatives of GPL works must also be GPL. Nothing about external library
dependencies.

> Dependencies on Windows, Java, gcc, etc. fall under the following GPL
> exception:
> 
> "However, as a special exception, the source code distributed 
> need not include anything that is normally distributed (in 
> either source or binary form) with the major components 
> (compiler, kernel, and so on) of the operating system on 
> which the executable runs, unless that component itself 
> accompanies the executable."
> 
> So, if you are linking to an external library, it must be 
> either GPL or GPL-compatible.

Not really. You just need to insert an exception notice for that library in
your license (as with source code works, the copyright owner's permission is
needed for distribution).

http://www.gnu.org/licenses/gpl-faq.html#FSWithNFLibs

The above exception is required in the GPL itself else the GPL would be
irrelevant. I'm guessing no one would use it if they had to distribute an
entire OS/platform with every GPL'ed work.

> ANTLR v3's license is the 
> 'new' BSD license, however, and as such, is compatible with the GPL.

Yes, in as much as it doesn't prevent the re-licensing that GPL requires for
source code works.


Micheal

From open.zone at virgin.net  Tue Aug 15 13:34:21 2006
From: open.zone at virgin.net (Micheal J)
Date: Tue Aug 15 13:37:23 2006
Subject: [antlr-interest] ANTLR v3 compatible with GPL?
In-Reply-To: <1155663595.12372.30.camel@localhost>
Message-ID: <009b01c6c0aa$355dc970$c704a8c0@hercules>

Scott,

> Oops, one more point:
> 
> On Tue, 2006-08-15 at 16:37 +0100, Micheal J wrote:
> > AFAICT, the source licensing issue is only relevant if the 
> intention 
> > is to RE-LICENSE the ANTLR v3 sources (tool and runtime) 
> under the GPL 
> > as was common with the ANTLR v2 sources.
> 
> Yes, and this is what happens if you link to ANTLR v3's 
> library from GPL-code.  You are in essence re-licensing it as 
> GPL (which is allowed by the new BSD license, and which is 
> why that license is compatible with the GPL).
> http://www.gnu.org/licenses/gpl-faq.html#WhatDoesCompatMean


Not if you link to the ANTLR v3 binaries. Only if you wish to include the
ANTLR v3 sources in a GPL'ed program. You need to re-license to satisfy the
GPL requirement that all derivative works (of a GPL-licensed work) must also
be GPL. Actually that should be "must also be available under the GPL". They
may be simultaneously available under other licenses.


Micheal


-----------------------
The best way to contact me is via the list/forum. My time is very limited.

From parrt at cs.usfca.edu  Tue Aug 15 14:45:09 2006
From: parrt at cs.usfca.edu (Terence Parr)
Date: Tue Aug 15 14:45:14 2006
Subject: [antlr-interest] ANTLR v3 compatible with GPL?
In-Reply-To: <009b01c6c0aa$355dc970$c704a8c0@hercules>
References: <009b01c6c0aa$355dc970$c704a8c0@hercules>
Message-ID: <F8A71068-4DE7-41F3-9930-9631CF0DE05E@cs.usfca.edu>


On Aug 15, 2006, at 1:34 PM, Micheal J wrote:
>> Yes, and this is what happens if you link to ANTLR v3's
>> library from GPL-code.  You are in essence re-licensing it as
>> GPL (which is allowed by the new BSD license, and which is
>> why that license is compatible with the GPL).
>> http://www.gnu.org/licenses/gpl-faq.html#WhatDoesCompatMean
>
>
> Not if you link to the ANTLR v3 binaries. Only if you wish to  
> include the
> ANTLR v3 sources in a GPL'ed program. You need to re-license to  
> satisfy the
> GPL requirement that all derivative works (of a GPL-licensed work)  
> must also
> be GPL. Actually that should be "must also be available under the  
> GPL". They
> may be simultaneously available under other licenses.

I will also point out that one must keep my BSD copyright in any  
source code and if in binary distribution I think in the manual or  
whatever...I don't think you can relicense a BSD as GPL.  What would  
it mean to have two licenses in a single file?

Ter
From jbb at acm.org  Tue Aug 15 15:23:45 2006
From: jbb at acm.org (John B. Brodie)
Date: Tue Aug 15 15:23:49 2006
Subject: [antlr-interest] [v2] Separating Parser and Lexer - was: Parser
	seems to confuse strings and literals
In-Reply-To: <97b85e750608151244i25342e49q1d37480a78f86b8f@mail.gmail.com>
	(message from Charles Felstead on Tue, 15 Aug 2006 15:44:52 -0400)
References: <97b85e750608141702x6f8422ddv7e4e53b9be947be9@mail.gmail.com>
	<20060815011730.95205.qmail@web55905.mail.re3.yahoo.com>
	<97b85e750608151244i25342e49q1d37480a78f86b8f@mail.gmail.com>
Message-ID: <E1GD7K5-0006hU-00@gecko>

Charles :-

>Now this time I did real clean build; I removed every .class and all the
>generated .java files before running antlr on the two .g files. Then I
>generated the lexer, compiled it, and checked that it still works. Finally,
 ^^^^^^^^^^^^^^^^^^^                          
>I generated the parser and compiled it but it doesn't work anymore.  So, can
   ^^^^^^^^^^^^^^^^^^^
>you tell what else I have to do when the lexer/parser grammars are in
>seperate files?

It is my understanding that you should exportVocab from the Parser;
importVocab into the Lexer; *AND* generate the Parser *BEFORE* the Lexer.

Here is a short 4 file example which works for me. Does it work for you?

file 1) make.sh - a linux bash script to build the example
// ------------------------------ Begin ------------------------------
#!/bin/bash

java antlr.Tool SepParser.g
java antlr.Tool SepLexer.g

javac *.java

java Main
// ------------------------------  End  ------------------------------

file 2) SepParser.g
// ------------------------------ Begin ------------------------------
class SepParser extends Parser;

options {
    exportVocab = Separate;
}

program
    : "begin"
        ( id:ID EQUALS n:NUMBER
            { System.out.println(id.getText() + " is number " + n.getText()); }
        )+
        "end"
        EOF
    ;
// ------------------------------  End  ------------------------------

file 3) SepLexer.g
// ------------------------------ Begin ------------------------------
class SepLexer extends Lexer;

options {
    testLiterals = false;
    importVocab = Separate;
}

ID options{ testLiterals = true; } : LETTER ( LETTER | DIGIT | '_' )* ;

NUMBER : ( DIGIT )+ ;

EQUALS : '=' ;

protected LETTER : 'a' .. 'z' | 'A' .. 'Z' ;
protected DIGIT  : '0' .. '9' ; 

WS : ( ' ' | ( '\t' { tab(); } ) | '\f' )+ { $setType(Token.SKIP); } ;
NEWLINE : (('\r' ('\n')?) | '\n' ) { newline(); $setType(Token.SKIP); } ;
// ------------------------------  End  ------------------------------

file 4) Main.java
// ------------------------------ Begin ------------------------------
import java.io.*;

class Main {
   public static void main(String[] args) {
      try {
         SepLexer lexer =
            new SepLexer(new StringReader("begin ANTLR = 1 end"));
         SepParser parser = new SepParser(lexer);
         parser.program();
      } catch(Exception e) {
         System.err.println("exception: "+e);
      }
   }
}
// ------------------------------  End  ------------------------------
From dave at badgers-in-foil.co.uk  Tue Aug 15 15:47:15 2006
From: dave at badgers-in-foil.co.uk (David Holroyd)
Date: Tue Aug 15 15:47:19 2006
Subject: [antlr-interest] [v3] LITERAL_xxx tokens?
Message-ID: <20060815224715.GA13969@badgers-in-foil.co.uk>

ANTLR 3 doesn't produce the LITERAL_xxx token type constant definitions
that v2 did.  Hey, I was using them! :)

Should I define a TOKEN='token' for each than my application needs to
know about, or is there (going to be) another way?


ta,
dave

-- 
http://david.holroyd.me.uk/
From parrt at cs.usfca.edu  Tue Aug 15 17:20:23 2006
From: parrt at cs.usfca.edu (Terence Parr)
Date: Tue Aug 15 17:20:27 2006
Subject: [antlr-interest] [v3] LITERAL_xxx tokens?
In-Reply-To: <20060815224715.GA13969@badgers-in-foil.co.uk>
References: <20060815224715.GA13969@badgers-in-foil.co.uk>
Message-ID: <4C4C6143-2E5E-4BFC-892C-973C9C976537@cs.usfca.edu>


On Aug 15, 2006, at 3:47 PM, David Holroyd wrote:

> ANTLR 3 doesn't produce the LITERAL_xxx token type constant  
> definitions
> that v2 did.  Hey, I was using them! :)
>
> Should I define a TOKEN='token' for each than my application needs to
> know about, or is there (going to be) another way?

Yep, literals are rferenced as just 'foo' in tree grammars and  
everwhere.  If you need an identifier, you'll have to create.  What  
do you use them for?
Ter

From dieter_frej at gmx.net  Tue Aug 15 23:27:42 2006
From: dieter_frej at gmx.net (Dieter Frej)
Date: Tue Aug 15 23:27:50 2006
Subject: [antlr-interest] v3: question to usage options
Message-ID: <20060816062742.230740@gmx.net>

Hi Ter,

you wrote that the current java.g grammar should be generated with
java -Xms200M -Xmx400M org.antlr.Tool -dfa -nfa -Xmaxdfaedges 65534 java.g
But how do you know that it has to be generated this way? Simply because
that was the only way it was generated at all? Because
java -Xms200M -Xmx300M org.antlr.Tool java.g
is also working. Is that any better/worse than adding the whole bunch of
options you used in the first run? 

- Didi
-- 


Der GMX SmartSurfer hilft bis zu 70% Ihrer Onlinekosten zu sparen!
Ideal f?r Modem und ISDN: http://www.gmx.net/de/go/smartsurfer
From dieter_frej at gmx.net  Tue Aug 15 23:29:57 2006
From: dieter_frej at gmx.net (Dieter Frej)
Date: Tue Aug 15 23:30:04 2006
Subject: [antlr-interest] v3: going through the AST
Message-ID: <20060816062957.230740@gmx.net>

Hi,

I added output=AST; to the options section of the latest java.g grammar in
order to get the AST. This makes a new method public Object getTree()
available.
What I would like to get was something like the tree structure visualised
in antlrworks. So I tried the following:

CommonTree tree = (CommonTree) parser.compilationUnit().getTree();
String[] names = parser.getTokenNames();
int childCount = tree.getChildCount();
for(int i = 0; i < childCount; ++i) {
    CommonTree ct = (CommonTree) tree.getChild(i);
    System.out.println("childcount: " + ct.getChildCount());
    System.out.println("tree type: " + ct.getType() + "|" + names[ct.getType()]);
    System.out.println("text: " + ct.token.getText());
    System.out.println("line: " + ct.getLine());
    System.out.println("toString: " + ct.toString());
    System.out.println("toStringTree: " + ct.toStringTree());
    System.out.println();
}

but tree.getChildCount() is always 1. It is more like a linked list than a
tree. 

Any suggestions? Or is my code wrong? (because of the lack of examples
that could also be the case ;-)

- Didi
-- 


"Feel free" ? 10 GB Mailbox, 100 FreeSMS/Monat ...
Jetzt GMX TopMail testen: http://www.gmx.net/de/go/topmail
From tbrandonau at gmail.com  Tue Aug 15 23:42:19 2006
From: tbrandonau at gmail.com (Thomas Brandon)
Date: Tue Aug 15 23:42:23 2006
Subject: [antlr-interest] v3: going through the AST
In-Reply-To: <20060816062957.230740@gmx.net>
References: <20060816062957.230740@gmx.net>
Message-ID: <ebc876d70608152342x41dfa48cr615b54530f7a04c3@mail.gmail.com>

Without any restructuring the default tree output from a grammar will
be a single tree node for each token, without any child or parent
relationships. So a rule "a: A B C;" will simply produce the tree "A B
C" which is basically a linked list. You need to add either tree
rewrite rules or tree operators to structure the tree as you would
like. For instance to make a give token the root suffix it with "^".
So something like "a: A^ B C;"
would produce the tree "(A B C)". Or you can use a rewrite rule. So
"a: A B C -> ^(A C B);" would produce the tree "(A C B)".

Also, the Antlrworks debug functionality will allow you to view the
AST tree in a visual form rather than having to print it out to text.

Tom.
On 8/16/06, Dieter Frej <dieter_frej@gmx.net> wrote:
> Hi,
>
> I added output=AST; to the options section of the latest java.g grammar in
> order to get the AST. This makes a new method public Object getTree()
> available.
> What I would like to get was something like the tree structure visualised
> in antlrworks. So I tried the following:
>
> CommonTree tree = (CommonTree) parser.compilationUnit().getTree();
> String[] names = parser.getTokenNames();
> int childCount = tree.getChildCount();
> for(int i = 0; i < childCount; ++i) {
>     CommonTree ct = (CommonTree) tree.getChild(i);
>     System.out.println("childcount: " + ct.getChildCount());
>     System.out.println("tree type: " + ct.getType() + "|" + names[ct.getType()]);
>     System.out.println("text: " + ct.token.getText());
>     System.out.println("line: " + ct.getLine());
>     System.out.println("toString: " + ct.toString());
>     System.out.println("toStringTree: " + ct.toStringTree());
>     System.out.println();
> }
>
> but tree.getChildCount() is always 1. It is more like a linked list than a
> tree.
>
> Any suggestions? Or is my code wrong? (because of the lack of examples
> that could also be the case ;-)
>
> - Didi
> --
>
>
> "Feel free" ? 10 GB Mailbox, 100 FreeSMS/Monat ...
> Jetzt GMX TopMail testen: http://www.gmx.net/de/go/topmail
>
From dave at badgers-in-foil.co.uk  Wed Aug 16 00:41:17 2006
From: dave at badgers-in-foil.co.uk (David Holroyd)
Date: Wed Aug 16 00:41:21 2006
Subject: [antlr-interest] [v3] LITERAL_xxx tokens?
In-Reply-To: <4C4C6143-2E5E-4BFC-892C-973C9C976537@cs.usfca.edu>
References: <20060815224715.GA13969@badgers-in-foil.co.uk>
	<4C4C6143-2E5E-4BFC-892C-973C9C976537@cs.usfca.edu>
Message-ID: <20060816074116.GA20385@badgers-in-foil.co.uk>

On Tue, Aug 15, 2006 at 05:20:23PM -0700, Terence Parr wrote:
> 
> On Aug 15, 2006, at 3:47 PM, David Holroyd wrote:
> 
> >ANTLR 3 doesn't produce the LITERAL_xxx token type constant  
> >definitions
> >that v2 did.  Hey, I was using them! :)
> >
> >Should I define a TOKEN='token' for each than my application needs to
> >know about, or is there (going to be) another way?
> 
> Yep, literals are rferenced as just 'foo' in tree grammars and  
> everwhere.  If you need an identifier, you'll have to create.  What  
> do you use them for?

My application does lots of things like,

  public boolean isStatic() {
    AST modifiers = findModifiers();
    return ASTUtils.findChildByType(modifiers,
                                    AS3TokenTypes.LITERAL_static) != null;
  }

and

  public ASIfStatement newIf(String condition) {
    AST ifStmt = ASTUtils.newAST(AS3TokenTypes.LITERAL_if, "if");
    ast.addChild(ifStmt);
    ifStmt.addChild(ASTUtils.parseExpr(condition));
    ifStmt.addChild(ASTUtils.newBlock());
    return new ASTASIfStatement(ifStmt);
  }

i.e. it's very nice to have the option of doing AST stuff outside of the
ANTLR-generated code.

For the moment, I'll just add lots of entries like

  tokens { IF='if'; STATIC='static'; ... }


ta,
dave

-- 
http://david.holroyd.me.uk/
From Anthony.Youngman at eca-international.com  Wed Aug 16 02:14:19 2006
From: Anthony.Youngman at eca-international.com (Anthony Youngman)
Date: Wed Aug 16 02:14:44 2006
Subject: [antlr-interest] ANTLR v3 compatible with GPL?
In-Reply-To: <F8A71068-4DE7-41F3-9930-9631CF0DE05E@cs.usfca.edu>
Message-ID: <C7FE35004D40FD45AA342991B88CE40401290380@lnml1.eca-international.local>

Acutally, Ter is correct here.

ONLY TER CAN RELICENCE ANTLR (okay, that's not totally true, seeing as
he doesn't own all the copyrights).

Let's say I modify Antlr, and mixing it with GPL3 (or GPL2) software,
and want to distribute it. The GPL says I must licence ALL MY CODE as
GPL (I can dual licence it, if I wish, so I could BSD it as well). It
also says I must licence the collective under the GPL - which in
practical terms means I have to supply *all* the source to *everything*
upon request.

Seeing as Antlr is BSD, and I have (or can legally get) the sources and
redistribute them, that is not a problem. (Oh - I've come across hints
that there may be problems with Antlr and GPL3. If Antlr needs Sun Java
and the source for that is not available, it may not be possible to
distribute Antlr under GPL3.)

So to sum up. Antlr is under the BSD. ONLY TER CAN CHANGE THAT. If I mix
it with GPL software, I must then treat it AS IF the entire thing was
licenced under the GPL. The BSD licence gives me the rights I need to do
that, so there is no problem.


Copyright and licencing is actually a simple problem - IF you understand
the law, and carefully read the relevant licences. The two mistakes I
see time and time again are when people try to force the licensOR to
abide by the licence (hint - they can give themselves permission to do
anything they damn well wish!), and when people don't read the licence
CAREFULLY and misunderstand it. The GPL seems especially prone to this
:-( If you want an education in copyright law and Free Software,
subscribe to debian.legal and read the archives. 

Cheers,
Wol

-----Original Message-----
From: antlr-interest-bounces@antlr.org
[mailto:antlr-interest-bounces@antlr.org] On Behalf Of Terence Parr
Sent: 15 August 2006 22:45
To: Antlr Interest
Subject: Re: [antlr-interest] ANTLR v3 compatible with GPL?


On Aug 15, 2006, at 1:34 PM, Micheal J wrote:
>> Yes, and this is what happens if you link to ANTLR v3's
>> library from GPL-code.  You are in essence re-licensing it as
>> GPL (which is allowed by the new BSD license, and which is
>> why that license is compatible with the GPL).
>> http://www.gnu.org/licenses/gpl-faq.html#WhatDoesCompatMean
>
>
> Not if you link to the ANTLR v3 binaries. Only if you wish to  
> include the
> ANTLR v3 sources in a GPL'ed program. You need to re-license to  
> satisfy the
> GPL requirement that all derivative works (of a GPL-licensed work)  
> must also
> be GPL. Actually that should be "must also be available under the  
> GPL". They
> may be simultaneously available under other licenses.

I will also point out that one must keep my BSD copyright in any  
source code and if in binary distribution I think in the manual or  
whatever...I don't think you can relicense a BSD as GPL.  What would  
it mean to have two licenses in a single file?

Ter

* ************************************************************************ *

This transmission is intended for the named recipient only. It may contain private and confidential information. If this has come to you in error you must not act on anything disclosed in it, nor must you copy it, modify it, disseminate it in any way, or show it to anyone. Please e-mail the sender to inform us of the transmission error or telephone ECA International immediately and delete the e-mail from your information system.

Telephone numbers for ECA International offices are: Sydney +61 (0)2 8272 5300, Hong Kong + 852 2121 2388, London +44 (0)20 7351 5000 and New York +1 212 582 2333.

* ************************************************************************ *
From dave at badgers-in-foil.co.uk  Wed Aug 16 02:15:54 2006
From: dave at badgers-in-foil.co.uk (David Holroyd)
Date: Wed Aug 16 02:16:00 2006
Subject: [antlr-interest] [v3] LITERAL_xxx tokens?
In-Reply-To: <20060816074116.GA20385@badgers-in-foil.co.uk>
References: <20060815224715.GA13969@badgers-in-foil.co.uk>
	<4C4C6143-2E5E-4BFC-892C-973C9C976537@cs.usfca.edu>
	<20060816074116.GA20385@badgers-in-foil.co.uk>
Message-ID: <20060816091554.GC6649@badgers-in-foil.co.uk>

On Wed, Aug 16, 2006 at 07:41:17AM +0000, David Holroyd wrote:
> For the moment, I'll just add lots of entries like
> 
>   tokens { IF='if'; STATIC='static'; ... }

Now that I think about it more, maybe this is actually a better way to
define a concrete interface between the parser and the application than
all those LITERAL_.. thingies anyway.  Nice to have them both using
STATIC to refer to the same thing, eh?

It'll be a *lot* easier to use IDE-auto-complete from the java side
without that common prefix everywhere too! ;)


ta,
dave

-- 
http://david.holroyd.me.uk/
From open.zone at virgin.net  Wed Aug 16 02:15:20 2006
From: open.zone at virgin.net (Micheal J)
Date: Wed Aug 16 02:18:14 2006
Subject: [antlr-interest] v3: question to usage options
In-Reply-To: <20060816062742.230740@gmx.net>
Message-ID: <00a801c6c114$84136c90$c704a8c0@hercules>

Dieter,

> you wrote that the current java.g grammar should be generated 
> with java -Xms200M -Xmx400M org.antlr.Tool -dfa -nfa 
> -Xmaxdfaedges 65534 java.g But how do you know that it has to 
> be generated this way? Simply because that was the only way 
> it was generated at all? Because java -Xms200M -Xmx300M 
> org.antlr.Tool java.g is also working. Is that any 
> better/worse than adding the whole bunch of options you used 
> in the first run? 

At the time the grammar was created, it was needed for ANTLR to successfully
generate the DFA tables. Since then the implementation of cyclic DFA
generation has changed significantly and this may no longer be required in
fact. 

Did you try it without any switches

Micheal


-----------------------
The best way to contact me is via the list/forum. My time is very limited.

From Anthony.Youngman at eca-international.com  Wed Aug 16 02:40:33 2006
From: Anthony.Youngman at eca-international.com (Anthony Youngman)
Date: Wed Aug 16 02:40:53 2006
Subject: [antlr-interest] [v3] LITERAL_xxx tokens?
In-Reply-To: <20060816091554.GC6649@badgers-in-foil.co.uk>
Message-ID: <C7FE35004D40FD45AA342991B88CE40401290382@lnml1.eca-international.local>

Is that defining a variable called IF, or STATIC ... ?

That will blow up a heck of a lot of languages. I guess that's why v2
prefixed everything with LITERAL_ - precisely to prevent explosions when
compiling the grammar.

Note to Ter - not that I have any use for it - might it make sense for
v3 to generate this stuff automatically if asked by a switch - seeing as
people like David have a need for it?

Cheers,
Wol

-----Original Message-----
From: antlr-interest-bounces@antlr.org
[mailto:antlr-interest-bounces@antlr.org] On Behalf Of David Holroyd
Sent: 16 August 2006 10:16
To: antlr-interest@antlr.org
Subject: Re: [antlr-interest] [v3] LITERAL_xxx tokens?

On Wed, Aug 16, 2006 at 07:41:17AM +0000, David Holroyd wrote:
> For the moment, I'll just add lots of entries like
> 
>   tokens { IF='if'; STATIC='static'; ... }

Now that I think about it more, maybe this is actually a better way to
define a concrete interface between the parser and the application than
all those LITERAL_.. thingies anyway.  Nice to have them both using
STATIC to refer to the same thing, eh?

It'll be a *lot* easier to use IDE-auto-complete from the java side
without that common prefix everywhere too! ;)


ta,
dave

-- 
http://david.holroyd.me.uk/

* ************************************************************************ *

This transmission is intended for the named recipient only. It may contain private and confidential information. If this has come to you in error you must not act on anything disclosed in it, nor must you copy it, modify it, disseminate it in any way, or show it to anyone. Please e-mail the sender to inform us of the transmission error or telephone ECA International immediately and delete the e-mail from your information system.

Telephone numbers for ECA International offices are: Sydney +61 (0)2 8272 5300, Hong Kong + 852 2121 2388, London +44 (0)20 7351 5000 and New York +1 212 582 2333.

* ************************************************************************ *
From Abhijit_Ghonge at infosys.com  Wed Aug 16 04:55:13 2006
From: Abhijit_Ghonge at infosys.com (Abhijit Nandkumar Ghonge)
Date: Wed Aug 16 04:56:23 2006
Subject: [antlr-interest] skip the grammer
Message-ID: <D72A054DF5002D4FA6CF14252F7997B8D97DF6@BLRKECMSG13.ad.infosys.com>


Can anybody help me out with this?



I want to skip the grammar for the parser rules till I find the start of
script. i.e. I want to parse the script only between start and end
tokens and skip the rest that is written outside the start and end tags,
like we have %s in lex.



Regards,

Abhijit













**************** CAUTION - Disclaimer *****************
This e-mail contains PRIVILEGED AND CONFIDENTIAL INFORMATION intended solely for the use of the addressee(s). If you are not the intended recipient, please notify the sender by e-mail and delete the original message. Further, you are not to copy, disclose, or distribute this e-mail or its contents to any other person and any such actions are unlawful. This e-mail may contain viruses. Infosys has taken every reasonable precaution to minimize this risk, but is not liable for any damage you may sustain as a result of any virus in this e-mail. You should carry out your own virus checks before opening the e-mail or attachment. Infosys reserves the right to monitor and review the content of all messages sent to or from this e-mail address. Messages sent to or from this e-mail address may be stored on the Infosys e-mail system.
***INFOSYS******** End of Disclaimer ********INFOSYS***
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060816/4ca063f8/attachment.html
From dave at badgers-in-foil.co.uk  Wed Aug 16 06:39:07 2006
From: dave at badgers-in-foil.co.uk (David Holroyd)
Date: Wed Aug 16 06:39:13 2006
Subject: [antlr-interest] [v3] LITERAL_xxx tokens?
In-Reply-To: <C7FE35004D40FD45AA342991B88CE40401290382@lnml1.eca-international.local>
References: <20060816091554.GC6649@badgers-in-foil.co.uk>
	<C7FE35004D40FD45AA342991B88CE40401290382@lnml1.eca-international.local>
Message-ID: <20060816133907.GA24540@badgers-in-foil.co.uk>

On Wed, Aug 16, 2006 at 10:40:33AM +0100, Anthony Youngman wrote:
> Is that defining a variable called IF, or STATIC ... ?

ANTLR 3 defines constants (in both the parser and the lexer) for
explicitly named tokens in the 'tokens { }' section or in the lexer,
yes.  For literals, it appears to be generating constants like 'T123'
for the token-who's-integer-type-value-is-'123', rather than constants
with human-readable names.


> That will blow up a heck of a lot of languages. I guess that's why v2
> prefixed everything with LITERAL_ - precisely to prevent explosions when
> compiling the grammar.

My specific examples above don't cause a problem in my specific target
language (Java).

Anyway, I imagine ANTLR needs some way of 'mangling' values which are
keywords in the target language anyway, no?


> Note to Ter - not that I have any use for it - might it make sense for
> v3 to generate this stuff automatically if asked by a switch - seeing as
> people like David have a need for it?

No need for a switch, IMO.  Keep the UI simple ;)


> -----Original Message-----
> From: antlr-interest-bounces@antlr.org
> [mailto:antlr-interest-bounces@antlr.org] On Behalf Of David Holroyd
> Sent: 16 August 2006 10:16
> To: antlr-interest@antlr.org
> Subject: Re: [antlr-interest] [v3] LITERAL_xxx tokens?
> 
> On Wed, Aug 16, 2006 at 07:41:17AM +0000, David Holroyd wrote:
> > For the moment, I'll just add lots of entries like
> > 
> >   tokens { IF='if'; STATIC='static'; ... }
> 
> Now that I think about it more, maybe this is actually a better way to
> define a concrete interface between the parser and the application than
> all those LITERAL_.. thingies anyway.  Nice to have them both using
> STATIC to refer to the same thing, eh?
> 
> It'll be a *lot* easier to use IDE-auto-complete from the java side
> without that common prefix everywhere too! ;)
> 
> 
> ta,
> dave
> 
> -- 
> http://david.holroyd.me.uk/
> 
> * ************************************************************************ *
> 
> This transmission is intended for the named recipient only. It may contain private and confidential information. If this has come to you in error you must not act on anything disclosed in it, nor must you copy it, modify it, disseminate it in any way, or show it to anyone. Please e-mail the sender to inform us of the transmission error or telephone ECA International immediately and delete the e-mail from your information system.
> 
> Telephone numbers for ECA International offices are: Sydney +61 (0)2 8272 5300, Hong Kong + 852 2121 2388, London +44 (0)20 7351 5000 and New York +1 212 582 2333.
> 
> * ************************************************************************ *

-- 
"Your shoes are on the wrong feet, or your feet are on the wrong legs.
And you have gloves on inside, which we all know is unlucky. I'm actually
in your desk drawer. Don't try and find me though. I'm quick. Really quick."
                                                      -- AW
From jsamort at gmail.com  Wed Aug 16 07:35:38 2006
From: jsamort at gmail.com (Scott Amort)
Date: Wed Aug 16 07:35:54 2006
Subject: [antlr-interest] ANTLR v3 compatible with GPL?
In-Reply-To: <C7FE35004D40FD45AA342991B88CE40401290380@lnml1.eca-international.local>
References: <C7FE35004D40FD45AA342991B88CE40401290380@lnml1.eca-international.local>
Message-ID: <44E32D3A.7010302@gmail.com>

Hi Anthony and Michael,

Anthony Youngman wrote:
> So to sum up. Antlr is under the BSD. ONLY TER CAN CHANGE THAT. If I mix
> it with GPL software, I must then treat it AS IF the entire thing was
> licenced under the GPL. The BSD licence gives me the rights I need to do
> that, so there is no problem.
> 
> On Aug 15, 2006, at 1:34 PM, Micheal J wrote:
>> Not if you link to the ANTLR v3 binaries. Only if you wish to  
>> include the
>> ANTLR v3 sources in a GPL'ed program. You need to re-license to  
>> satisfy the
>> GPL requirement that all derivative works (of a GPL-licensed work)  
>> must also
>> be GPL. Actually that should be "must also be available under the  
>> GPL". They
>> may be simultaneously available under other licenses.
> 
> I will also point out that one must keep my BSD copyright in any  
> source code and if in binary distribution I think in the manual or  
> whatever...I don't think you can relicense a BSD as GPL.  What would  
> it mean to have two licenses in a single file?

Thanks for the clarification!  It does seem that my use of the term 
're-license' was incorrect.  However, what I do understand to be true is 
that if I use ANTLR in a GPL application that is distributed, the 
"complete work" is governed under this section of the GPL:

     2b) You must cause any work that you distribute or publish, that
     in whole or in part contains or is derived from the Program or any
     part thereof, to be licensed as a whole at no charge to all third
     parties under the terms of this License.

And this does include linking to the ANTLR library.  The code generated 
by the ANTLR executable is not subject to a license, but linking to the 
runtime library makes it part of my GPL program as far as the FSF is 
concerned.  Although it is certainly debated (I set off an interesting 
thread asking about this situation elsewhere), I must then be able to 
apply the GPL license requirements to the ANTLR library as well (i.e. be 
able to distribute the source).  And, it is possible to do so and 
satisfy both the GPL and ANTLR's BSD license.  But, if ANTLR were 
otherwise licensed, say by the 'original' BSD, then I could no longer 
use it in my GPL program because I could not satisfy the requirements of 
both licenses.

Now I understand why I didn't go to law school!

Best,
Scott
From dieter_frej at gmx.net  Wed Aug 16 07:54:50 2006
From: dieter_frej at gmx.net (Dieter Frej)
Date: Wed Aug 16 07:54:56 2006
Subject: [antlr-interest] An editor GUI for Grammar
In-Reply-To: <3e8856a10608140129g1daabfcep8f076a5f870c812d@mail.gmail.com>
References: <3e8856a10608140129g1daabfcep8f076a5f870c812d@mail.gmail.com>
Message-ID: <44E331BA.7000909@gmx.net>

are you looking for something like antlrworks?

- Didi



Pankaj Agarwal wrote:
> Hi,
> First accept my Congrats...for this excellent tool.
> I am new to ANTLR , however I find it ideal for my requirement of 
> developing a Boolean query engine , I got enough idea on lexers and 
> parsers, however this engine needs to be end to end...i.e.
> the end users should be able to specify these queries in a GUI ...I was 
> wondering whether there are some third party /open source or non open 
> source tools available which can help me generate a GUI from the gramamr 
> itself...since Grammar already has all the information for LHS , OP and 
> RHS ..does this makes sense ?
>  
> Any pointers are appreciated.
>  
> -TIA

From Anthony.Youngman at eca-international.com  Wed Aug 16 07:58:08 2006
From: Anthony.Youngman at eca-international.com (Anthony Youngman)
Date: Wed Aug 16 07:58:12 2006
Subject: [antlr-interest] ANTLR v3 compatible with GPL?
In-Reply-To: <44E32D3A.7010302@gmail.com>
Message-ID: <C7FE35004D40FD45AA342991B88CE40401290387@lnml1.eca-international.local>

Spot on.

To make things even more complicated, you could take advantage of the
clause that says if you distribute as source, that's the end of the
matter. So with the original BSD *with* the advertising clause, you
can't distribute binaries but you could distribute as source and leave
it to the recipients to compile the result into a working program.

There are "interesting" ways around the GPL - that's why linux distros
include scripts that will auto-download and -install proprietary video
drivers, for instance, but they all involve hassle for the end user. I
think that's deliberate in an accidental kind of way - it makes sure the
end user knows the distributor isn't giving you the rights you're
supposed to have.

Cheers,
Wol

-----Original Message-----
From: antlr-interest-bounces@antlr.org
[mailto:antlr-interest-bounces@antlr.org] On Behalf Of Scott Amort
Sent: 16 August 2006 15:36
To: Antlr Interest
Subject: Re: [antlr-interest] ANTLR v3 compatible with GPL?

Hi Anthony and Michael,

Anthony Youngman wrote:
> So to sum up. Antlr is under the BSD. ONLY TER CAN CHANGE THAT. If I
mix
> it with GPL software, I must then treat it AS IF the entire thing was
> licenced under the GPL. The BSD licence gives me the rights I need to
do
> that, so there is no problem.
> 
> On Aug 15, 2006, at 1:34 PM, Micheal J wrote:
>> Not if you link to the ANTLR v3 binaries. Only if you wish to  
>> include the
>> ANTLR v3 sources in a GPL'ed program. You need to re-license to  
>> satisfy the
>> GPL requirement that all derivative works (of a GPL-licensed work)  
>> must also
>> be GPL. Actually that should be "must also be available under the  
>> GPL". They
>> may be simultaneously available under other licenses.
> 
> I will also point out that one must keep my BSD copyright in any  
> source code and if in binary distribution I think in the manual or  
> whatever...I don't think you can relicense a BSD as GPL.  What would  
> it mean to have two licenses in a single file?

Thanks for the clarification!  It does seem that my use of the term 
're-license' was incorrect.  However, what I do understand to be true is

that if I use ANTLR in a GPL application that is distributed, the 
"complete work" is governed under this section of the GPL:

     2b) You must cause any work that you distribute or publish, that
     in whole or in part contains or is derived from the Program or any
     part thereof, to be licensed as a whole at no charge to all third
     parties under the terms of this License.

And this does include linking to the ANTLR library.  The code generated 
by the ANTLR executable is not subject to a license, but linking to the 
runtime library makes it part of my GPL program as far as the FSF is 
concerned.  Although it is certainly debated (I set off an interesting 
thread asking about this situation elsewhere), I must then be able to 
apply the GPL license requirements to the ANTLR library as well (i.e. be

able to distribute the source).  And, it is possible to do so and 
satisfy both the GPL and ANTLR's BSD license.  But, if ANTLR were 
otherwise licensed, say by the 'original' BSD, then I could no longer 
use it in my GPL program because I could not satisfy the requirements of

both licenses.

Now I understand why I didn't go to law school!

Best,
Scott

* ************************************************************************ *

This transmission is intended for the named recipient only. It may contain private and confidential information. If this has come to you in error you must not act on anything disclosed in it, nor must you copy it, modify it, disseminate it in any way, or show it to anyone. Please e-mail the sender to inform us of the transmission error or telephone ECA International immediately and delete the e-mail from your information system.

Telephone numbers for ECA International offices are: Sydney +61 (0)2 8272 5300, Hong Kong + 852 2121 2388, London +44 (0)20 7351 5000 and New York +1 212 582 2333.

* ************************************************************************ *
From dieter_frej at gmx.net  Wed Aug 16 07:58:18 2006
From: dieter_frej at gmx.net (Dieter Frej)
Date: Wed Aug 16 07:58:27 2006
Subject: [antlr-interest] v3: question to usage options
In-Reply-To: <00a801c6c114$84136c90$c704a8c0@hercules>
References: <00a801c6c114$84136c90$c704a8c0@hercules>
Message-ID: <44E3328A.9090200@gmx.net>

yeap, was generated fine without any problems. Then I am going to change
the header of the grammar. I made some other changes to it as well to
get it more spec conform (mostly rule names changed). I am going to send
it soon.

Thanks

- Didi



Micheal J wrote:
> Dieter,
> 
>> you wrote that the current java.g grammar should be generated 
>> with java -Xms200M -Xmx400M org.antlr.Tool -dfa -nfa 
>> -Xmaxdfaedges 65534 java.g But how do you know that it has to 
>> be generated this way? Simply because that was the only way 
>> it was generated at all? Because java -Xms200M -Xmx300M 
>> org.antlr.Tool java.g is also working. Is that any 
>> better/worse than adding the whole bunch of options you used 
>> in the first run? 
> 
> At the time the grammar was created, it was needed for ANTLR to successfully
> generate the DFA tables. Since then the implementation of cyclic DFA
> generation has changed significantly and this may no longer be required in
> fact. 
> 
> Did you try it without any switches
> 
> Micheal
> 
> 
> -----------------------
> The best way to contact me is via the list/forum. My time is very limited.
> 
> 

From dieter_frej at gmx.net  Wed Aug 16 08:01:03 2006
From: dieter_frej at gmx.net (Dieter Frej)
Date: Wed Aug 16 08:01:09 2006
Subject: [antlr-interest] v3: going through the AST
In-Reply-To: <ebc876d70608152342x41dfa48cr615b54530f7a04c3@mail.gmail.com>
References: <20060816062957.230740@gmx.net>
	<ebc876d70608152342x41dfa48cr615b54530f7a04c3@mail.gmail.com>
Message-ID: <44E3332F.2070309@gmx.net>

that is the reason why I am asking: antlrworks shows immediately the
write way which seems to be different from the way a get it in my
program. How are they doing it? (cannot look since I do not have any
source code of it ;-)

- Didi



Thomas Brandon wrote:
> Without any restructuring the default tree output from a grammar will
> be a single tree node for each token, without any child or parent
> relationships. So a rule "a: A B C;" will simply produce the tree "A B
> C" which is basically a linked list. You need to add either tree
> rewrite rules or tree operators to structure the tree as you would
> like. For instance to make a give token the root suffix it with "^".
> So something like "a: A^ B C;"
> would produce the tree "(A B C)". Or you can use a rewrite rule. So
> "a: A B C -> ^(A C B);" would produce the tree "(A C B)".
> 
> Also, the Antlrworks debug functionality will allow you to view the
> AST tree in a visual form rather than having to print it out to text.
> 
> Tom.
> On 8/16/06, Dieter Frej <dieter_frej@gmx.net> wrote:
>> Hi,
>>
>> I added output=AST; to the options section of the latest java.g 
>> grammar in
>> order to get the AST. This makes a new method public Object getTree()
>> available.
>> What I would like to get was something like the tree structure visualised
>> in antlrworks. So I tried the following:
>>
>> CommonTree tree = (CommonTree) parser.compilationUnit().getTree();
>> String[] names = parser.getTokenNames();
>> int childCount = tree.getChildCount();
>> for(int i = 0; i < childCount; ++i) {
>>     CommonTree ct = (CommonTree) tree.getChild(i);
>>     System.out.println("childcount: " + ct.getChildCount());
>>     System.out.println("tree type: " + ct.getType() + "|" + 
>> names[ct.getType()]);
>>     System.out.println("text: " + ct.token.getText());
>>     System.out.println("line: " + ct.getLine());
>>     System.out.println("toString: " + ct.toString());
>>     System.out.println("toStringTree: " + ct.toStringTree());
>>     System.out.println();
>> }
>>
>> but tree.getChildCount() is always 1. It is more like a linked list 
>> than a
>> tree.
>>
>> Any suggestions? Or is my code wrong? (because of the lack of examples
>> that could also be the case ;-)
>>
>> - Didi
>> -- 
>>
>>
>> "Feel free" ? 10 GB Mailbox, 100 FreeSMS/Monat ...
>> Jetzt GMX TopMail testen: http://www.gmx.net/de/go/topmail
>>
> 
> 

From Anthony.Youngman at eca-international.com  Wed Aug 16 08:05:14 2006
From: Anthony.Youngman at eca-international.com (Anthony Youngman)
Date: Wed Aug 16 08:05:21 2006
Subject: [antlr-interest] ANTLR v3 compatible with GPL?
In-Reply-To: <C7FE35004D40FD45AA342991B88CE40401290387@lnml1.eca-international.local>
Message-ID: <C7FE35004D40FD45AA342991B88CE40401290388@lnml1.eca-international.local>

Oops ... I failed to mention ...

Look at what the GPL says about sublicencing and the licence your
recipients get to code you don't own ... it says basically "each
recipient receives a licence direct from the original copyright holder".

So when you pass on your modified Antlr, the recipients get their
licence to the main Antlr bits direct from Ter. And as the only licence
he grants is the BSD, that's what they get, not the GPL.

Cheers,
Wol

-----Original Message-----
From: antlr-interest-bounces@antlr.org
[mailto:antlr-interest-bounces@antlr.org] On Behalf Of Anthony Youngman
Sent: 16 August 2006 15:58
To: Antlr Interest
Subject: RE: [antlr-interest] ANTLR v3 compatible with GPL?

Spot on.

To make things even more complicated, you could take advantage of the
clause that says if you distribute as source, that's the end of the
matter. So with the original BSD *with* the advertising clause, you
can't distribute binaries but you could distribute as source and leave
it to the recipients to compile the result into a working program.

There are "interesting" ways around the GPL - that's why linux distros
include scripts that will auto-download and -install proprietary video
drivers, for instance, but they all involve hassle for the end user. I
think that's deliberate in an accidental kind of way - it makes sure the
end user knows the distributor isn't giving you the rights you're
supposed to have.

Cheers,
Wol

-----Original Message-----
From: antlr-interest-bounces@antlr.org
[mailto:antlr-interest-bounces@antlr.org] On Behalf Of Scott Amort
Sent: 16 August 2006 15:36
To: Antlr Interest
Subject: Re: [antlr-interest] ANTLR v3 compatible with GPL?

Hi Anthony and Michael,

Anthony Youngman wrote:
> So to sum up. Antlr is under the BSD. ONLY TER CAN CHANGE THAT. If I
mix
> it with GPL software, I must then treat it AS IF the entire thing was
> licenced under the GPL. The BSD licence gives me the rights I need to
do
> that, so there is no problem.
> 
> On Aug 15, 2006, at 1:34 PM, Micheal J wrote:
>> Not if you link to the ANTLR v3 binaries. Only if you wish to  
>> include the
>> ANTLR v3 sources in a GPL'ed program. You need to re-license to  
>> satisfy the
>> GPL requirement that all derivative works (of a GPL-licensed work)  
>> must also
>> be GPL. Actually that should be "must also be available under the  
>> GPL". They
>> may be simultaneously available under other licenses.
> 
> I will also point out that one must keep my BSD copyright in any  
> source code and if in binary distribution I think in the manual or  
> whatever...I don't think you can relicense a BSD as GPL.  What would  
> it mean to have two licenses in a single file?

Thanks for the clarification!  It does seem that my use of the term 
're-license' was incorrect.  However, what I do understand to be true is

that if I use ANTLR in a GPL application that is distributed, the 
"complete work" is governed under this section of the GPL:

     2b) You must cause any work that you distribute or publish, that
     in whole or in part contains or is derived from the Program or any
     part thereof, to be licensed as a whole at no charge to all third
     parties under the terms of this License.

And this does include linking to the ANTLR library.  The code generated 
by the ANTLR executable is not subject to a license, but linking to the 
runtime library makes it part of my GPL program as far as the FSF is 
concerned.  Although it is certainly debated (I set off an interesting 
thread asking about this situation elsewhere), I must then be able to 
apply the GPL license requirements to the ANTLR library as well (i.e. be

able to distribute the source).  And, it is possible to do so and 
satisfy both the GPL and ANTLR's BSD license.  But, if ANTLR were 
otherwise licensed, say by the 'original' BSD, then I could no longer 
use it in my GPL program because I could not satisfy the requirements of

both licenses.

Now I understand why I didn't go to law school!

Best,
Scott

*
************************************************************************
*

This transmission is intended for the named recipient only. It may
contain private and confidential information. If this has come to you in
error you must not act on anything disclosed in it, nor must you copy
it, modify it, disseminate it in any way, or show it to anyone. Please
e-mail the sender to inform us of the transmission error or telephone
ECA International immediately and delete the e-mail from your
information system.

Telephone numbers for ECA International offices are: Sydney +61 (0)2
8272 5300, Hong Kong + 852 2121 2388, London +44 (0)20 7351 5000 and New
York +1 212 582 2333.

*
************************************************************************
*

* ************************************************************************ *

This transmission is intended for the named recipient only. It may contain private and confidential information. If this has come to you in error you must not act on anything disclosed in it, nor must you copy it, modify it, disseminate it in any way, or show it to anyone. Please e-mail the sender to inform us of the transmission error or telephone ECA International immediately and delete the e-mail from your information system.

Telephone numbers for ECA International offices are: Sydney +61 (0)2 8272 5300, Hong Kong + 852 2121 2388, London +44 (0)20 7351 5000 and New York +1 212 582 2333.

* ************************************************************************ *
From jbb at acm.org  Wed Aug 16 09:44:51 2006
From: jbb at acm.org (John B. Brodie)
Date: Wed Aug 16 09:45:01 2006
Subject: [antlr-interest] [v3] Syntax error leads to a null pointer exception
Message-ID: <E1GDOVf-0008ND-00@gecko>

Greetings!

Hope this isn't a duplicate -- this grammar:

grammar T;

options {
    output=AST;
}

@members {
int bar;
}

tokens {
    FOO;
}

program
    :    id+=IDENTIFIER ('.' id+=IDENTIFIER)* -> ^(PATH $id+)
    ;
        
IDENTIFIER
    :    ('a'..'z'|'A'..'Z')+
    ;

gets this from org.antlr.Tool:

ANTLR Parser Generator   Early Access Version 3.0b3 (July 21, 2006)  1989-2006
11:1: syntax error: antlr: t.g:11:1: unexpected token: tokens {
0:0: syntax error: assign.types: <AST>:0:0: unexpected end of subtree
0:0: syntax error: define: <AST>:0:0: unexpected end of subtree
internal error: t.g : java.lang.NullPointerException
org.antlr.tool.DefineGrammarItemsWalker.trimGrammar(DefineGrammarItemsWalker.java:88)
org.antlr.tool.DefineGrammarItemsWalker.finish(DefineGrammarItemsWalker.java:71)
org.antlr.tool.DefineGrammarItemsWalker.grammar(DefineGrammarItemsWalker.java:192)
org.antlr.tool.Grammar.setGrammarContent(Grammar.java:491)
org.antlr.tool.Grammar.<init>(Grammar.java:409)
org.antlr.Tool.process(Tool.java:246)
org.antlr.Tool.main(Tool.java:70)


So the tokens{} must appear before the @members{}, OK, Not sure why, but OK
(some things in life just are the way they are ;-)

But then why does reporting that syntax error deserve a nullpointer?

   -jbb
From pa_inbox at yahoo.com  Wed Aug 16 10:38:30 2006
From: pa_inbox at yahoo.com (Pankaj Agarwal)
Date: Wed Aug 16 10:38:41 2006
Subject: [antlr-interest] An editor GUI for Grammar
In-Reply-To: <44E331BA.7000909@gmx.net>
References: <3e8856a10608140129g1daabfcep8f076a5f870c812d@mail.gmail.com>
	<44E331BA.7000909@gmx.net>
Message-ID: <3e8856a10608161038t19b5a2b6va8d20e7aba7d5201@mail.gmail.com>

Hi ,
No, I am looking for a editor which can work my grammar rules in .g file and
provide validations for inputs to parser rather than validating ANTLR
grammar itself....? does that make sense ?
-TIA

On 8/16/06, Dieter Frej <dieter_frej@gmx.net> wrote:
>
> are you looking for something like antlrworks?
>
> - Didi
>
>
>
> Pankaj Agarwal wrote:
> > Hi,
> > First accept my Congrats...for this excellent tool.
> > I am new to ANTLR , however I find it ideal for my requirement of
> > developing a Boolean query engine , I got enough idea on lexers and
> > parsers, however this engine needs to be end to end...i.e.
> > the end users should be able to specify these queries in a GUI ...I was
> > wondering whether there are some third party /open source or non open
> > source tools available which can help me generate a GUI from the gramamr
> > itself...since Grammar already has all the information for LHS , OP and
> > RHS ..does this makes sense ?
> >
> > Any pointers are appreciated.
> >
> > -TIA
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060816/8ecffb01/attachment-0001.html
From kerecsen at gmail.com  Wed Aug 16 10:56:48 2006
From: kerecsen at gmail.com (Tamas Kerecsen)
Date: Wed Aug 16 10:56:55 2006
Subject: [antlr-interest] skip the grammer
In-Reply-To: <1cb672170608161056u686dab7eucce38c98161e6387@mail.gmail.com>
References: <D72A054DF5002D4FA6CF14252F7997B8D97DF6@BLRKECMSG13.ad.infosys.com>
	<1cb672170608161056u686dab7eucce38c98161e6387@mail.gmail.com>
Message-ID: <1cb672170608161056k696c020ctba2aedac3b85428d@mail.gmail.com>

---------- Forwarded message ----------
From: Tamas Kerecsen <kerecsen@gmail.com>
Date: Aug 16, 2006 11:56 AM
Subject: Re: [antlr-interest] skip the grammer
To: Abhijit Nandkumar Ghonge <Abhijit_Ghonge@infosys.com>

See "Island grammars" in
http://www.cs.usfca.edu/~parrt/course/652/lectures/lexing.html<http://www.cs.usfca.edu/%7Eparrt/course/652/lectures/lexing.html>.


On 8/16/06, Abhijit Nandkumar Ghonge <Abhijit_Ghonge@infosys.com> wrote:
>
>   Can anybody help me out with this?
>
>
>
> I want to skip the grammar for the parser rules till I find the *start* of
> script. i.e*. I want to parse the script only between start and end tokens
> and skip the rest that is written outside the start and end tags, *like we
> have %s in lex.
>
>
>
> Regards,
>
> Abhijit
>
>
>
>
>
>
>
>
>
>
>  **************** CAUTION - Disclaimer *****************
> This e-mail contains PRIVILEGED AND CONFIDENTIAL INFORMATION intended
> solely for the use of the addressee(s). If you are not the intended
> recipient, please notify the sender by e-mail and delete the original
> message. Further, you are not to copy, disclose, or distribute this e-mail
> or its contents to any other person and any such actions are unlawful. This
> e-mail may contain viruses. Infosys has taken every reasonable precaution to
> minimize this risk, but is not liable for any damage you may sustain as a
> result of any virus in this e-mail. You should carry out your own virus
> checks before opening the e-mail or attachment. Infosys reserves the right
> to monitor and review the content of all messages sent to or from this
> e-mail address. Messages sent to or from this e-mail address may be stored
> on the Infosys e-mail system.
> ***INFOSYS******** End of Disclaimer ********INFOSYS***
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060816/cac4036e/attachment.html
From parrt at cs.usfca.edu  Wed Aug 16 10:58:48 2006
From: parrt at cs.usfca.edu (Terence Parr)
Date: Wed Aug 16 10:59:03 2006
Subject: [antlr-interest] skip the grammer
In-Reply-To: <D72A054DF5002D4FA6CF14252F7997B8D97DF6@BLRKECMSG13.ad.infosys.com>
References: <D72A054DF5002D4FA6CF14252F7997B8D97DF6@BLRKECMSG13.ad.infosys.com>
Message-ID: <A5CA98DB-43FC-459E-8122-24A27409B0DB@cs.usfca.edu>

Hi, look at filter mode :)
Terence


From xzheng at doubleclick.net  Wed Aug 16 11:53:53 2006
From: xzheng at doubleclick.net (Zheng, Xiaoran)
Date: Wed Aug 16 12:06:43 2006
Subject: [antlr-interest] skip the grammer
Message-ID: <CB8E43806EA4084A9B90A3CB12DB4F6009E20EF4@NYC-EXCLS1.dc1.doubleclick.corp>

 
But can you do this with parser rules?

Xiaoran

-----Original Message-----
From: antlr-interest-bounces@antlr.org
[mailto:antlr-interest-bounces@antlr.org] On Behalf Of Terence Parr
Sent: Wednesday, August 16, 2006 1:59 PM
To: Antlr Interest
Subject: Re: [antlr-interest] skip the grammer

Hi, look at filter mode :)
Terence
From lgcraymer at yahoo.com  Wed Aug 16 12:09:00 2006
From: lgcraymer at yahoo.com (Loring Craymer)
Date: Wed Aug 16 12:09:12 2006
Subject: [antlr-interest] [v3] Syntax error leads to a null pointer
	exception
In-Reply-To: <E1GDOVf-0008ND-00@gecko>
Message-ID: <20060816190900.77894.qmail@web55902.mail.re3.yahoo.com>

At the moment, I would classify this as a "feature":  the syntax error was detected in the parser (first line) which built an incomplete AST as a result; the first treewalker then blew up while walking the AST.  It is better to let errors cascade in early versions; that might make it easier to characterize the error conditions before cleaning up the error reporting later on.  One of the solutions might be to add "resynchronize after error" code to antlr.g--that has always been the dream--so that these failures do not propagate.  However, that will take a bit of work to implement.
   
  --Loring
  

"John B. Brodie" <jbb@acm.org> wrote:
  Greetings!

Hope this isn't a duplicate -- this grammar:

grammar T;

options {
output=AST;
}

@members {
int bar;
}

tokens {
FOO;
}

program
: id+=IDENTIFIER ('.' id+=IDENTIFIER)* -> ^(PATH $id+)
;

IDENTIFIER
: ('a'..'z'|'A'..'Z')+
;

gets this from org.antlr.Tool:

ANTLR Parser Generator Early Access Version 3.0b3 (July 21, 2006) 1989-2006
11:1: syntax error: antlr: t.g:11:1: unexpected token: tokens {
0:0: syntax error: assign.types: :0:0: unexpected end of subtree
0:0: syntax error: define: :0:0: unexpected end of subtree
internal error: t.g : java.lang.NullPointerException
org.antlr.tool.DefineGrammarItemsWalker.trimGrammar(DefineGrammarItemsWalker.java:88)
org.antlr.tool.DefineGrammarItemsWalker.finish(DefineGrammarItemsWalker.java:71)
org.antlr.tool.DefineGrammarItemsWalker.grammar(DefineGrammarItemsWalker.java:192)
org.antlr.tool.Grammar.setGrammarContent(Grammar.java:491)
org.antlr.tool.Grammar.(Grammar.java:409)
org.antlr.Tool.process(Tool.java:246)
org.antlr.Tool.main(Tool.java:70)


So the tokens{} must appear before the @members{}, OK, Not sure why, but OK
(some things in life just are the way they are ;-)

But then why does reporting that syntax error deserve a nullpointer?

-jbb


 		
---------------------------------
Do you Yahoo!?
 Get on board. You're invited to try the new Yahoo! Mail Beta.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060816/9d620149/attachment.html
From parrt at cs.usfca.edu  Wed Aug 16 12:23:32 2006
From: parrt at cs.usfca.edu (Terence Parr)
Date: Wed Aug 16 12:23:46 2006
Subject: [antlr-interest] skip the grammer
In-Reply-To: <CB8E43806EA4084A9B90A3CB12DB4F6009E20EF4@NYC-EXCLS1.dc1.doubleclick.corp>
References: <CB8E43806EA4084A9B90A3CB12DB4F6009E20EF4@NYC-EXCLS1.dc1.doubleclick.corp>
Message-ID: <456DCDCC-AA33-478B-9FCA-71D72C5894A5@cs.usfca.edu>


On Aug 16, 2006, at 11:53 AM, Zheng, Xiaoran wrote:

>
> But can you do this with parser rules?

skip with lexer until you see tokens of interest...those tokens go to  
parser that parses normally.
Ter
From mail at martin-probst.com  Wed Aug 16 13:53:57 2006
From: mail at martin-probst.com (Martin Probst)
Date: Wed Aug 16 13:54:16 2006
Subject: [antlr-interest] An editor GUI for Grammar
In-Reply-To: <3e8856a10608161038t19b5a2b6va8d20e7aba7d5201@mail.gmail.com>
References: <3e8856a10608140129g1daabfcep8f076a5f870c812d@mail.gmail.com>
	<44E331BA.7000909@gmx.net>
	<3e8856a10608161038t19b5a2b6va8d20e7aba7d5201@mail.gmail.com>
Message-ID: <08024A61-CC7C-48A2-8AA7-D5ECDBAF5E01@martin-probst.com>

Hi,

I think someone once worked on providing something that would take  
a .g file and produce at least the major parts of an Eclipse editor  
component. No idea if there was any progress or something deliverable.

But I think in most cases validation of input will simply be running  
it through the parser. The work I mentioned was mostly targeted at  
syntax highlighting and editor infrastructure like error reporting,  
iirc.

Regards,
Martin

Am 16.08.2006 um 19:38 schrieb Pankaj Agarwal:

> Hi ,
> No, I am looking for a editor which can work my grammar rules in .g  
> file and provide validations for inputs to parser rather than  
> validating ANTLR grammar itself....? does that make sense ?
> -TIA
>
> On 8/16/06, Dieter Frej <dieter_frej@gmx.net> wrote: are you  
> looking for something like antlrworks?
>
> - Didi
>
>
>
> Pankaj Agarwal wrote:
> > Hi,
> > First accept my Congrats...for this excellent tool.
> > I am new to ANTLR , however I find it ideal for my requirement of
> > developing a Boolean query engine , I got enough idea on lexers and
> > parsers, however this engine needs to be end to end...i.e.
> > the end users should be able to specify these queries in a  
> GUI ...I was
> > wondering whether there are some third party /open source or non  
> open
> > source tools available which can help me generate a GUI from the  
> gramamr
> > itself...since Grammar already has all the information for LHS ,  
> OP and
> > RHS ..does this makes sense ?
> >
> > Any pointers are appreciated.
> >
> > -TIA
>
>

From asmith at moncons.co.uk  Wed Aug 16 14:14:48 2006
From: asmith at moncons.co.uk (Montebello)
Date: Wed Aug 16 14:16:16 2006
Subject: [antlr-interest] Token order dependence in V3 grammars
Message-ID: <44E38AC8.6030102@moncons.co.uk>

Hi all,

I am a newbie with ANTLR and doubtless should not be allowed anywhere
near V3. However, I have found an effect that was unexpected to me, ie
that the order of tokens in a grammar can have repercussions. If the
following grammar is run, starting at the unsignedInteger rule then it
will fail to recognise single digit integers, but will find two digits
or more. That is "5" in a file on its own will cause a Mismatched Token
Exception but "55" will be found correctly.

The grammar passes the ANTLRWorks Grammar/Check test and shows no errors
on code generation or compilation. Here is the (rather foolish) grammar:

// This is a cut down grammar to demonstrate a problem
// in ANTLR v3 with the recognition of single digit
// integers. It is intended only as a debugging aid.

grammar UnsInt;
options {k=2; backtrack=true; memoize=true;output=AST;}

//----------------------------------------------------------------------------
// The parser
//----------------------------------------------------------------------------


unsignedInteger
    : NUM_INT
    ;


//----------------------------------------------------------------------------
// The lexer
//----------------------------------------------------------------------------

//----------------------------------------------------------------------------
// Tokens
//----------------------------------------------------------------------------

CHARACTER
	: ~('\\'|'"')
	;

// a numeric literal.  Form is digits

NUM_INT : ('0'..'9')+ ;

If the CHARACTER and NUM_INT tokens are reversed in their order in the
grammar, or if CHARACTER is deleted entirely, then everything behaves as
expected and gives no error on either input.

All the parts have been stripped out of other working grammars to show
the point. A similar grammar in V2.7.6 did not show the effect.

Is this a bug, or merely something which needs better syntax or semantic
error checking? It certainly lost me about half a day finding the needle
in a haystack of 150+ rules.

Thanks,
Andrew Smith
From parrt at cs.usfca.edu  Wed Aug 16 14:50:38 2006
From: parrt at cs.usfca.edu (Terence Parr)
Date: Wed Aug 16 14:50:43 2006
Subject: [antlr-interest] Token order dependence in V3 grammars
In-Reply-To: <44E38AC8.6030102@moncons.co.uk>
References: <44E38AC8.6030102@moncons.co.uk>
Message-ID: <2A5C0CEF-0E8C-4B88-89EC-A852931ABEE3@cs.usfca.edu>

Hi :)

For any rule that is a subset of another rule (CHARACTER can match  
anything 'cept \\ and " for you), the first one gets precedence.

Ter
From pa_inbox at yahoo.com  Wed Aug 16 15:32:35 2006
From: pa_inbox at yahoo.com (Pankaj Agarwal)
Date: Wed Aug 16 15:32:40 2006
Subject: [antlr-interest] An editor GUI for Grammar
In-Reply-To: <08024A61-CC7C-48A2-8AA7-D5ECDBAF5E01@martin-probst.com>
References: <3e8856a10608140129g1daabfcep8f076a5f870c812d@mail.gmail.com>
	<44E331BA.7000909@gmx.net>
	<3e8856a10608161038t19b5a2b6va8d20e7aba7d5201@mail.gmail.com>
	<08024A61-CC7C-48A2-8AA7-D5ECDBAF5E01@martin-probst.com>
Message-ID: <3e8856a10608161532i2c090ca6i243dcfdc88bfb9e3@mail.gmail.com>

Hi Martn,
Thanks for your response... Thats exactly I am looking for ... an editor
infrastructure...because this should be used by an end user.
and I would hate to develop a editor hardcoding each rule ...in the GUI.

-TIA

On 8/16/06, Martin Probst <mail@martin-probst.com> wrote:
>
> Hi,
>
> I think someone once worked on providing something that would take
> a .g file and produce at least the major parts of an Eclipse editor
> component. No idea if there was any progress or something deliverable.
>
> But I think in most cases validation of input will simply be running
> it through the parser. The work I mentioned was mostly targeted at
> syntax highlighting and editor infrastructure like error reporting,
> iirc.
>
> Regards,
> Martin
>
> Am 16.08.2006 um 19:38 schrieb Pankaj Agarwal:
>
> > Hi ,
> > No, I am looking for a editor which can work my grammar rules in .g
> > file and provide validations for inputs to parser rather than
> > validating ANTLR grammar itself....? does that make sense ?
> > -TIA
> >
> > On 8/16/06, Dieter Frej <dieter_frej@gmx.net> wrote: are you
> > looking for something like antlrworks?
> >
> > - Didi
> >
> >
> >
> > Pankaj Agarwal wrote:
> > > Hi,
> > > First accept my Congrats...for this excellent tool.
> > > I am new to ANTLR , however I find it ideal for my requirement of
> > > developing a Boolean query engine , I got enough idea on lexers and
> > > parsers, however this engine needs to be end to end...i.e.
> > > the end users should be able to specify these queries in a
> > GUI ...I was
> > > wondering whether there are some third party /open source or non
> > open
> > > source tools available which can help me generate a GUI from the
> > gramamr
> > > itself...since Grammar already has all the information for LHS ,
> > OP and
> > > RHS ..does this makes sense ?
> > >
> > > Any pointers are appreciated.
> > >
> > > -TIA
> >
> >
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060816/b86cfe48/attachment.html
From mail at richard-musiol.de  Thu Aug 17 04:07:46 2006
From: mail at richard-musiol.de (Richard Musiol)
Date: Thu Aug 17 04:07:47 2006
Subject: [antlr-interest] An editor GUI for Grammar
In-Reply-To: <3e8856a10608161532i2c090ca6i243dcfdc88bfb9e3@mail.gmail.com>
References: <3e8856a10608140129g1daabfcep8f076a5f870c812d@mail.gmail.com>	<44E331BA.7000909@gmx.net>	<3e8856a10608161038t19b5a2b6va8d20e7aba7d5201@mail.gmail.com>	<08024A61-CC7C-48A2-8AA7-D5ECDBAF5E01@martin-probst.com>
	<3e8856a10608161532i2c090ca6i243dcfdc88bfb9e3@mail.gmail.com>
Message-ID: <44E44E02.9000107@richard-musiol.de>

Hi,

that's basically what I'm working on at the moment. My editor is based 
on Eclipse and you can attach several code processors, which consist of 
an ANTLR grammar and some additional Java classes (I recently added 
Groovy support, too).
It currently supports incremental lexer execution, embedded languages 
(like PHP in HTML), requested lexer changes (the PHP processor for 
example looks for "<?" to activate itself), synchronized parser 
execution in multiple threads and some other features to allow the 
editor to understand as much of the input as possible, including the 
relations between different languages.
 From the GUI side of view it currently only supports syntax checking, 
syntax highlighting and experimental indenting and auto completion, but 
this is because I want to finish the core first.
So the whole is still under heavy development, but I think you could be 
interested. What do you think?

Bye,
Richard



Pankaj Agarwal wrote:
> Hi Martn,
> Thanks for your response... Thats exactly I am looking for ... an editor 
> infrastructure...because this should be used by an end user.
> and I would hate to develop a editor hardcoding each rule ...in the GUI.
>  
> -TIA
>  
> On 8/16/06, *Martin Probst* <mail@martin-probst.com 
> <mailto:mail@martin-probst.com>> wrote:
> 
>     Hi,
> 
>     I think someone once worked on providing something that would take
>     a .g file and produce at least the major parts of an Eclipse editor
>     component. No idea if there was any progress or something deliverable.
> 
>     But I think in most cases validation of input will simply be running
>     it through the parser. The work I mentioned was mostly targeted at
>     syntax highlighting and editor infrastructure like error reporting,
>     iirc.
> 
>     Regards,
>     Martin
> 
>     Am 16.08.2006 um 19:38 schrieb Pankaj Agarwal:
> 
>      > Hi ,
>      > No, I am looking for a editor which can work my grammar rules in .g
>      > file and provide validations for inputs to parser rather than
>      > validating ANTLR grammar itself....? does that make sense ?
>      > -TIA
>      >
>      > On 8/16/06, Dieter Frej < dieter_frej@gmx.net
>     <mailto:dieter_frej@gmx.net>> wrote: are you
>      > looking for something like antlrworks?
>      >
>      > - Didi
>      >
>      >
>      >
>      > Pankaj Agarwal wrote:
>      > > Hi,
>      > > First accept my Congrats...for this excellent tool.
>      > > I am new to ANTLR , however I find it ideal for my requirement of
>      > > developing a Boolean query engine , I got enough idea on lexers and
>      > > parsers, however this engine needs to be end to end...i.e.
>      > > the end users should be able to specify these queries in a
>      > GUI ...I was
>      > > wondering whether there are some third party /open source or non
>      > open
>      > > source tools available which can help me generate a GUI from the
>      > gramamr
>      > > itself...since Grammar already has all the information for LHS ,
>      > OP and
>      > > RHS ..does this makes sense ?
>      > >
>      > > Any pointers are appreciated.
>      > >
>      > > -TIA
>      >
>      >
> 
> 
From max.andersen at jboss.com  Thu Aug 17 04:08:26 2006
From: max.andersen at jboss.com (Max Rydahl Andersen)
Date: Thu Aug 17 04:09:55 2006
Subject: [antlr-interest] An editor GUI for Grammar
In-Reply-To: <44E44E02.9000107@richard-musiol.de>
References: <3e8856a10608140129g1daabfcep8f076a5f870c812d@mail.gmail.com>
	<44E331BA.7000909@gmx.net>
	<3e8856a10608161038t19b5a2b6va8d20e7aba7d5201@mail.gmail.com>
	<08024A61-CC7C-48A2-8AA7-D5ECDBAF5E01@martin-probst.com>
	<3e8856a10608161532i2c090ca6i243dcfdc88bfb9e3@mail.gmail.com>
	<44E44E02.9000107@richard-musiol.de>
Message-ID: <op.tefc8cvzsj49yt@xam>


Definitly interesting!

Is it available somewhere ? :)

/max

> Hi,
>
> that's basically what I'm working on at the moment. My editor is based  
> on Eclipse and you can attach several code processors, which consist of  
> an ANTLR grammar and some additional Java classes (I recently added  
> Groovy support, too).
> It currently supports incremental lexer execution, embedded languages  
> (like PHP in HTML), requested lexer changes (the PHP processor for  
> example looks for "<?" to activate itself), synchronized parser  
> execution in multiple threads and some other features to allow the  
> editor to understand as much of the input as possible, including the  
> relations between different languages.
>  From the GUI side of view it currently only supports syntax checking,  
> syntax highlighting and experimental indenting and auto completion, but  
> this is because I want to finish the core first.
> So the whole is still under heavy development, but I think you could be  
> interested. What do you think?
>
> Bye,
> Richard
>
>
>
> Pankaj Agarwal wrote:
>> Hi Martn,
>> Thanks for your response... Thats exactly I am looking for ... an  
>> editor infrastructure...because this should be used by an end user.
>> and I would hate to develop a editor hardcoding each rule ...in the GUI.
>>  -TIA
>>  On 8/16/06, *Martin Probst* <mail@martin-probst.com  
>> <mailto:mail@martin-probst.com>> wrote:
>>      Hi,
>>      I think someone once worked on providing something that would take
>>     a .g file and produce at least the major parts of an Eclipse editor
>>     component. No idea if there was any progress or something  
>> deliverable.
>>      But I think in most cases validation of input will simply be  
>> running
>>     it through the parser. The work I mentioned was mostly targeted at
>>     syntax highlighting and editor infrastructure like error reporting,
>>     iirc.
>>      Regards,
>>     Martin
>>      Am 16.08.2006 um 19:38 schrieb Pankaj Agarwal:
>>       > Hi ,
>>      > No, I am looking for a editor which can work my grammar rules in  
>> .g
>>      > file and provide validations for inputs to parser rather than
>>      > validating ANTLR grammar itself....? does that make sense ?
>>      > -TIA
>>      >
>>      > On 8/16/06, Dieter Frej < dieter_frej@gmx.net
>>     <mailto:dieter_frej@gmx.net>> wrote: are you
>>      > looking for something like antlrworks?
>>      >
>>      > - Didi
>>      >
>>      >
>>      >
>>      > Pankaj Agarwal wrote:
>>      > > Hi,
>>      > > First accept my Congrats...for this excellent tool.
>>      > > I am new to ANTLR , however I find it ideal for my requirement  
>> of
>>      > > developing a Boolean query engine , I got enough idea on  
>> lexers and
>>      > > parsers, however this engine needs to be end to end...i.e.
>>      > > the end users should be able to specify these queries in a
>>      > GUI ...I was
>>      > > wondering whether there are some third party /open source or  
>> non
>>      > open
>>      > > source tools available which can help me generate a GUI from  
>> the
>>      > gramamr
>>      > > itself...since Grammar already has all the information for LHS  
>> ,
>>      > OP and
>>      > > RHS ..does this makes sense ?
>>      > >
>>      > > Any pointers are appreciated.
>>      > >
>>      > > -TIA
>>      >
>>      >
>>



-- 
--
Max Rydahl Andersen
callto://max.rydahl.andersen

Hibernate
max@hibernate.org
http://hibernate.org

JBoss a division of Red Hat
max.andersen@jboss.com
From kksath at yahoo.com  Thu Aug 17 04:23:04 2006
From: kksath at yahoo.com (Sathish K)
Date: Thu Aug 17 04:23:57 2006
Subject: [antlr-interest] Handling negative numbers
Message-ID: <20060817112304.60783.qmail@web52314.mail.yahoo.com>

Could anyone please guide me as to how to handle negative numbers while parsing?
  I am currently unable to handle the number and the sign as a whole.
   
  Thanks,
   
  Sat

 		
---------------------------------
Yahoo! Messenger with Voice. Make PC-to-Phone Calls to the US (and 30+ countries) for 2?/min or less.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060817/561a49b8/attachment.html
From mail at richard-musiol.de  Thu Aug 17 04:26:52 2006
From: mail at richard-musiol.de (Richard Musiol)
Date: Thu Aug 17 04:26:53 2006
Subject: [antlr-interest] An editor GUI for Grammar
In-Reply-To: <op.tefc8cvzsj49yt@xam>
References: <3e8856a10608140129g1daabfcep8f076a5f870c812d@mail.gmail.com>
	<44E331BA.7000909@gmx.net>
	<3e8856a10608161038t19b5a2b6va8d20e7aba7d5201@mail.gmail.com>
	<08024A61-CC7C-48A2-8AA7-D5ECDBAF5E01@martin-probst.com>
	<3e8856a10608161532i2c090ca6i243dcfdc88bfb9e3@mail.gmail.com>
	<44E44E02.9000107@richard-musiol.de> <op.tefc8cvzsj49yt@xam>
Message-ID: <44E4527C.6010107@richard-musiol.de>

Currently only on my hard disk ^^. It still isn't in the development 
state to make it public and I am also not sure about the license I want 
to use.
I think the easiest way for you is to contact me with a messenger (the 
numbers/nicknames are on my homepage).

Richard



Max Rydahl Andersen schrieb:
> 
> Definitly interesting!
> 
> Is it available somewhere ? :)
> 
> /max
> 
>> Hi,
>>
>> that's basically what I'm working on at the moment. My editor is based 
>> on Eclipse and you can attach several code processors, which consist 
>> of an ANTLR grammar and some additional Java classes (I recently added 
>> Groovy support, too).
>> It currently supports incremental lexer execution, embedded languages 
>> (like PHP in HTML), requested lexer changes (the PHP processor for 
>> example looks for "<?" to activate itself), synchronized parser 
>> execution in multiple threads and some other features to allow the 
>> editor to understand as much of the input as possible, including the 
>> relations between different languages.
>>  From the GUI side of view it currently only supports syntax checking, 
>> syntax highlighting and experimental indenting and auto completion, 
>> but this is because I want to finish the core first.
>> So the whole is still under heavy development, but I think you could 
>> be interested. What do you think?
>>
>> Bye,
>> Richard
>>
>>
>>
>> Pankaj Agarwal wrote:
>>> Hi Martn,
>>> Thanks for your response... Thats exactly I am looking for ... an 
>>> editor infrastructure...because this should be used by an end user.
>>> and I would hate to develop a editor hardcoding each rule ...in the GUI.
>>>  -TIA
>>>  On 8/16/06, *Martin Probst* <mail@martin-probst.com 
>>> <mailto:mail@martin-probst.com>> wrote:
>>>      Hi,
>>>      I think someone once worked on providing something that would take
>>>     a .g file and produce at least the major parts of an Eclipse editor
>>>     component. No idea if there was any progress or something 
>>> deliverable.
>>>      But I think in most cases validation of input will simply be 
>>> running
>>>     it through the parser. The work I mentioned was mostly targeted at
>>>     syntax highlighting and editor infrastructure like error reporting,
>>>     iirc.
>>>      Regards,
>>>     Martin
>>>      Am 16.08.2006 um 19:38 schrieb Pankaj Agarwal:
>>>       > Hi ,
>>>      > No, I am looking for a editor which can work my grammar rules 
>>> in .g
>>>      > file and provide validations for inputs to parser rather than
>>>      > validating ANTLR grammar itself....? does that make sense ?
>>>      > -TIA
>>>      >
>>>      > On 8/16/06, Dieter Frej < dieter_frej@gmx.net
>>>     <mailto:dieter_frej@gmx.net>> wrote: are you
>>>      > looking for something like antlrworks?
>>>      >
>>>      > - Didi
>>>      >
>>>      >
>>>      >
>>>      > Pankaj Agarwal wrote:
>>>      > > Hi,
>>>      > > First accept my Congrats...for this excellent tool.
>>>      > > I am new to ANTLR , however I find it ideal for my 
>>> requirement of
>>>      > > developing a Boolean query engine , I got enough idea on 
>>> lexers and
>>>      > > parsers, however this engine needs to be end to end...i.e.
>>>      > > the end users should be able to specify these queries in a
>>>      > GUI ...I was
>>>      > > wondering whether there are some third party /open source or 
>>> non
>>>      > open
>>>      > > source tools available which can help me generate a GUI from 
>>> the
>>>      > gramamr
>>>      > > itself...since Grammar already has all the information for 
>>> LHS ,
>>>      > OP and
>>>      > > RHS ..does this makes sense ?
>>>      > >
>>>      > > Any pointers are appreciated.
>>>      > >
>>>      > > -TIA
>>>      >
>>>      >
>>>
> 
> 
> 
> ----
> Max Rydahl Andersen
> callto://max.rydahl.andersen
> 
> Hibernate
> max@hibernate.org
> http://hibernate.org
> 
> JBoss a division of Red Hat
> max.andersen@jboss.com
> 
> 
From xzheng at doubleclick.net  Thu Aug 17 06:32:37 2006
From: xzheng at doubleclick.net (Zheng, Xiaoran)
Date: Thu Aug 17 06:33:18 2006
Subject: [antlr-interest] Handling negative numbers
Message-ID: <CB8E43806EA4084A9B90A3CB12DB4F6009E20EF5@NYC-EXCLS1.dc1.doubleclick.corp>

 
You can just have a lex rule like
 
NUM: ('+'|'-')?('0'..'9')+ ;
 
and in the parser, you would refer to this token as NUM.
 
 
 
________________________________

From: antlr-interest-bounces@antlr.org [mailto:antlr-interest-bounces@antlr.org] On Behalf Of Sathish K
Sent: Thursday, August 17, 2006 7:23 AM
To: antlr-interest@antlr.org
Subject: [antlr-interest] Handling negative numbers


Could anyone please guide me as to how to handle negative numbers while parsing?
I am currently unable to handle the number and the sign as a whole.
 
Thanks,
 
Sat

________________________________

Yahoo! Messenger with Voice. Make PC-to-Phone Calls <http://us.rd.yahoo.com/mail_us/taglines/postman1/*http://us.rd.yahoo.com/evt=39663/*http://voice.yahoo.com>  to the US (and 30+ countries) for 2?/min or less.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060817/03faf195/attachment.html
From gt54-antlr at cyconix.com  Thu Aug 17 07:11:57 2006
From: gt54-antlr at cyconix.com (Paul Johnson)
Date: Thu Aug 17 07:12:06 2006
Subject: [antlr-interest] Handling negative numbers
In-Reply-To: <20060817112304.60783.qmail@web52314.mail.yahoo.com>
References: <20060817112304.60783.qmail@web52314.mail.yahoo.com>
Message-ID: <44E4792D.4000905@cyconix.com>

Sathish K wrote:
> Could anyone please guide me as to how to handle negative numbers while parsing?
>   I am currently unable to handle the number and the sign as a whole.

Are you sure you want to handle them together? Would it better to parse 
all numbers as positive numbers, and sort out the '-' in semantic analysis?

How do you analyse:

A = B - C    # subtraction
A = B -C     # no operator?
A = -C       # unary minus
A = - C      # unary minus?

From dwashington at gmx.net  Thu Aug 17 11:57:48 2006
From: dwashington at gmx.net (Denis Washington)
Date: Thu Aug 17 11:57:30 2006
Subject: [antlr-interest] Variable visibility problem with ANTLR 3
	code	generation
References: 44E1DAE0.4020208@gmx.net
Message-ID: <44E4BC2C.2060800@gmx.net>

The '$' prefix is not needed, from what I see after code generation it's 
even wrong.
From pa_inbox at yahoo.com  Thu Aug 17 15:43:42 2006
From: pa_inbox at yahoo.com (Pankaj Agarwal)
Date: Thu Aug 17 15:43:47 2006
Subject: [antlr-interest] An editor GUI for Grammar
In-Reply-To: <3e8856a10608161532i2c090ca6i243dcfdc88bfb9e3@mail.gmail.com>
References: <3e8856a10608140129g1daabfcep8f076a5f870c812d@mail.gmail.com>
	<44E331BA.7000909@gmx.net>
	<3e8856a10608161038t19b5a2b6va8d20e7aba7d5201@mail.gmail.com>
	<08024A61-CC7C-48A2-8AA7-D5ECDBAF5E01@martin-probst.com>
	<3e8856a10608161532i2c090ca6i243dcfdc88bfb9e3@mail.gmail.com>
Message-ID: <3e8856a10608171543v680c1b76hc2c9cd819adc5a80@mail.gmail.com>

Hi Richard,
Thanks for your response. I am definitely interested...though I am new to
compiler programming but let me know if I can help.
Also could you give me some pointers where should I start if I want to
develop a very primitive GUI for a very simple grammar primarily for
business users.

-Thanks
Pankaj


Currently only on my hard disk ^^. It still isn't in the development
state to make it public and I am also not sure about the license I want
to use.
I think the easiest way for you is to contact me with a messenger (the
numbers/nicknames are on my homepage).

Richard



Max Rydahl Andersen schrieb:
>*
*>* Definitly interesting!
*>*
*>* Is it available somewhere ? :)
*>*
*>* /max
*>*
*>>* Hi,
*>>*
*>>* that's basically what I'm working on at the moment. My editor is based
*>>* on Eclipse and you can attach several code processors, which consist
*>>* of an ANTLR grammar and some additional Java classes (I recently added
*>>* Groovy support, too).
*>>* It currently supports incremental lexer execution, embedded languages
*>>* (like PHP in HTML), requested lexer changes (the PHP processor for
*>>* example looks for "<?" to activate itself), synchronized parser
*>>* execution in multiple threads and some other features to allow the
*>>* editor to understand as much of the input as possible, including the
*>>* relations between different languages.
*>>*  From the GUI side of view it currently only supports syntax checking,
*>>* syntax highlighting and experimental indenting and auto completion,
*>>* but this is because I want to finish the core first.
*>>* So the whole is still under heavy development, but I think you could
*>>* be interested. What do you think?
*>>*
*>>* Bye,
*>>* Richard*



On 8/16/06, Pankaj Agarwal <pa_inbox@yahoo.com> wrote:
>
>  Hi Martn,
> Thanks for your response... Thats exactly I am looking for ... an editor
> infrastructure...because this should be used by an end user.
> and I would hate to develop a editor hardcoding each rule ...in the GUI.
>
> -TIA
>
>  On 8/16/06, Martin Probst <mail@martin-probst.com> wrote:
> >
> > Hi,
> >
> > I think someone once worked on providing something that would take
> > a .g file and produce at least the major parts of an Eclipse editor
> > component. No idea if there was any progress or something deliverable.
> >
> > But I think in most cases validation of input will simply be running
> > it through the parser. The work I mentioned was mostly targeted at
> > syntax highlighting and editor infrastructure like error reporting,
> > iirc.
> >
> > Regards,
> > Martin
> >
> > Am 16.08.2006 um 19:38 schrieb Pankaj Agarwal:
> >
> > > Hi ,
> > > No, I am looking for a editor which can work my grammar rules in .g
> > > file and provide validations for inputs to parser rather than
> > > validating ANTLR grammar itself....? does that make sense ?
> > > -TIA
> > >
> > > On 8/16/06, Dieter Frej < dieter_frej@gmx.net> wrote: are you
> > > looking for something like antlrworks?
> > >
> > > - Didi
> > >
> > >
> > >
> > > Pankaj Agarwal wrote:
> > > > Hi,
> > > > First accept my Congrats...for this excellent tool.
> > > > I am new to ANTLR , however I find it ideal for my requirement of
> > > > developing a Boolean query engine , I got enough idea on lexers and
> > > > parsers, however this engine needs to be end to end...i.e.
> > > > the end users should be able to specify these queries in a
> > > GUI ...I was
> > > > wondering whether there are some third party /open source or non
> > > open
> > > > source tools available which can help me generate a GUI from the
> > > gramamr
> > > > itself...since Grammar already has all the information for LHS ,
> > > OP and
> > > > RHS ..does this makes sense ?
> > > >
> > > > Any pointers are appreciated.
> > > >
> > > > -TIA
> > >
> > >
> >
> >
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060817/62eaab9c/attachment.html
From parrt at cs.usfca.edu  Thu Aug 17 16:23:13 2006
From: parrt at cs.usfca.edu (Terence Parr)
Date: Thu Aug 17 16:23:17 2006
Subject: [antlr-interest] Variable visibility problem with ANTLR 3
	code	generation
In-Reply-To: <44E4BC2C.2060800@gmx.net>
References: 44E1DAE0.4020208@gmx.net <44E4BC2C.2060800@gmx.net>
Message-ID: <BC7202BD-3240-4949-8BB7-B60CD2223424@cs.usfca.edu>

oh, right.  I need to make that $r goes to _r or something so you  
can't make that mistake...added to wiki.

http://www.antlr.org/wiki/display/ANTLR3/make+it+so+%24r+goes+to+_r

Ter
On Aug 17, 2006, at 11:57 AM, Denis Washington wrote:

> The '$' prefix is not needed, from what I see after code generation  
> it's even wrong.

From peizhao at itee.uq.edu.au  Thu Aug 17 19:16:48 2006
From: peizhao at itee.uq.edu.au (Peizhao)
Date: Thu Aug 17 19:16:21 2006
Subject: [antlr-interest] Handling number Integer and real
Message-ID: <1155867409.5554.72.camel@localhost>

Hi All, 

I am new to antlr. I stuck with defining rules for numbers, such as
integer and real.

I defined the following rules. however, it gives warnings when I compile
them.

Rules:
==============================================
INTEGER		:	('+'|'-')? ('0'..'9')+ ;
HEX_INTEGER	:	'0' ('x'|'X') ('0'..'9'|'A'..'F'|'a'..'f')+ ;
BINARY_INTEGER	:	'0' ('b'|'B') ('0'..'9')+ ;
REAL		:	('+'|'-')? ( ('0'..'9')+ (('e'|'E') ('-'|'+')? ('0'..'9')+) |
(('0'..'9')+ '.' ('0'..'9')* (('e'|'E')('-'|'+')? ('0'..'9')+)?) ) |
( '.' ('0'..'9')+ (('e'|'E') ('-'|'+')? ('0'..'9')+)? );


Warnings:
=============================================
lexical nondeterminism between alts 1 and 2 of block upon k==1:'0'..'9'
k==2:'0'..'9' k==3:'0'..'9','E','e'	

lexical nondeterminism between rules INTEGER and REAL upon
k==1:'+','-','0'..'9' k==2:'0'..'9' k==3:<end-of-token>,'0'..'9'


-- 
Regards;

Peizhao

From alan at blogometer.com  Thu Aug 17 19:16:39 2006
From: alan at blogometer.com (Alan Gutierrez)
Date: Thu Aug 17 19:16:43 2006
Subject: [antlr-interest] The @header directive and ANTLRWorks
Message-ID: <20060818021639.GA24466@maribor.izzy.net>

ANTLRWorks is a amazing. Wow!

Question. When I add a package in the header.

@header {
package com.agtrz.xregex.parser;
}

I'm no longer able to debug the grammar. Is there some way to adjust
the way that ANTLRWorks invokes the debugger?

-- 
Alan Gutierrez - 504 717 1428 - alan@blogometer.com - http://blogometer.com/
                Think New Orleans - http://thinknola.com/
From kerecsen at gmail.com  Thu Aug 17 22:16:00 2006
From: kerecsen at gmail.com (Tamas Kerecsen)
Date: Thu Aug 17 22:16:05 2006
Subject: [antlr-interest] Handling number Integer and real
In-Reply-To: <1155867409.5554.72.camel@localhost>
References: <1155867409.5554.72.camel@localhost>
Message-ID: <1cb672170608172216x74f8215bs6bff0e671ac14f19@mail.gmail.com>

Grab the examples from http://www.antlr.org/download/examples-v3.tar.gz and
look at the C parser to see how it's done. If you want to understand the
"why", borrow a good lex/yacc or other parser-related book from your local
library, or at least work your way though a few tutorials on the web.

I am new to antlr. I stuck with defining rules for numbers, such as
> integer and real.
>
> I defined the following rules. however, it gives warnings when I compile
> them.
>
> Rules:
> ==============================================
> INTEGER         :       ('+'|'-')? ('0'..'9')+ ;
> HEX_INTEGER     :       '0' ('x'|'X') ('0'..'9'|'A'..'F'|'a'..'f')+ ;
> BINARY_INTEGER  :       '0' ('b'|'B') ('0'..'9')+ ;
> REAL            :       ('+'|'-')? ( ('0'..'9')+ (('e'|'E') ('-'|'+')?
> ('0'..'9')+) |
> (('0'..'9')+ '.' ('0'..'9')* (('e'|'E')('-'|'+')? ('0'..'9')+)?) ) |
> ( '.' ('0'..'9')+ (('e'|'E') ('-'|'+')? ('0'..'9')+)? );
>
>
> Warnings:
> =============================================
> lexical nondeterminism between alts 1 and 2 of block upon k==1:'0'..'9'
> k==2:'0'..'9' k==3:'0'..'9','E','e'
>
> lexical nondeterminism between rules INTEGER and REAL upon
> k==1:'+','-','0'..'9' k==2:'0'..'9' k==3:<end-of-token>,'0'..'9'
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060817/f437dc59/attachment.html
From mail at richard-musiol.de  Fri Aug 18 05:25:05 2006
From: mail at richard-musiol.de (Richard Musiol)
Date: Fri Aug 18 05:25:05 2006
Subject: [antlr-interest] v3: semantic predicates in parser
Message-ID: <44E5B1A1.90002@richard-musiol.de>

Hi,

semantic predicates in the parser don't seem to work in beta 3 as they 
did in ANTLR 2. Will they be supported in the final?

For example the following grammar:

grammar Test;

document : (element)* EOF ;
element : theA | B | C	;

theA
	:
		A
		(
			{ someCondition }?=>
			theElement=element
			{
				// do something with theElement
			}
		|
			// quit the rule
		)
	;

A : 'a' ;
B : 'b' ;
C : 'c' ;

ANTLR can't handle it:
"[fatal] rule theA has non-LL(*) decision due to recursive rule 
invocations in alts 1,2. Resolve by left-factoring or using syntactic 
predicates with fixed k lookahead or using backtrack=true option."

At my opinion, ANTLR should use the first alternative if someCondition 
is true and the second one if not.

My second approach was to swap the alternatives:

theA
	:
		A
		(
			{ !someCondition }?=>
			// quit the rule
		|
			theElement=element
			{
				// do something with the element
			}
		)
	;

ANTLR compiles this without any errors, but the resulting code is really 
stange:

[...]
else if ( (LA3_0==A) ) {
	else {
		NoViableAltException nvae = [...];
		throw nvae;
	}
}
[...]

It seems that there is a bug in the code generation. But also the 
decisions are wrong:

[...]
int alt3=2;
int LA3_0 = input.LA(1);
	if ( (LA3_0==EOF) && ( !someCondition )) {
		alt3=1;
	}
[...]

Why should it only quit the rule if an EOF is following? There may be an 
A, B or C too.

I hope this will get fixed until the final, because semantic predicates 
are a really powerful feature.

Regards,
Richard

From malloovidio at bluewin.ch  Fri Aug 18 05:28:25 2006
From: malloovidio at bluewin.ch (Ovidio Mallo)
Date: Fri Aug 18 05:27:55 2006
Subject: [antlr-interest] syntactic predicate and line/column information
Message-ID: <44E5B269.2080607@bluewin.ch>

Hi everyone,

I'm very new to ANTLR. I'm currently using ANTLR to extent a Java grammar
by adding Java 1.5 support to it. My problem is that I want to use the
"syntactic predicate" construct to see whether I have to parse a normal
Java for-statement or an enhanced-for-statement as supported by Java 1.5.

Actually, everything works fine but the problem I have is that while the
syntactic predicate is evaluated by the parser, the line and column information
seem to be altered. Therefore, once the parser knows which of the two
for-statements to parse, this information is actually wrong which gets
reflected in the errors eventually produced by the compiler.

Therefore, I wanted to ask whether it is possible to avoid that line/column
information is altered while evaluating a syntactic predicate or, alternatively,
if it is possible to save this information and restore if after having evaluated
the syntactic predicate...

Of course, I could also gather the line/column information before the
syntactic predicate and then pass it but this does not work too well in my
case.

Well, I guess my explanation is a bit weird but I hope it's clear what I
mean... :-)

In any case, thanks a lot in advance for any help!

Best regards,
   Ovidio

From charles.felstead at gmail.com  Fri Aug 18 08:37:14 2006
From: charles.felstead at gmail.com (Charles Felstead)
Date: Fri Aug 18 08:37:21 2006
Subject: [antlr-interest] Re: [v2] Separating Parser and Lexer - was: Parser
	seems to confuse strings and literals
In-Reply-To: <E1GD7K5-0006hU-00@gecko>
References: <97b85e750608141702x6f8422ddv7e4e53b9be947be9@mail.gmail.com>
	<20060815011730.95205.qmail@web55905.mail.re3.yahoo.com>
	<97b85e750608151244i25342e49q1d37480a78f86b8f@mail.gmail.com>
	<E1GD7K5-0006hU-00@gecko>
Message-ID: <97b85e750608180837q349ccb81tffeebee3f4eb10b@mail.gmail.com>

John, you're the man!!

Your suggestion works perfectly! I applied your suggestion to my
lexer/parser and it worked just fine. I now have two different .g files.
However, I now realize that I can't easily get a generic lexer as it has to
inport the vocabulary for each and every grammar I come up with.

But that problem has more to do with the way I wrote my lexer/grammars. If I
was not using string literals in the grammar, than I would not need to
import them in the lexer. But assuming I need those literals somewhere, than
I would have to put them in the lexer which defeats the prupose of trying to
make a generic lexer?

So in the end, I'm going to stay with one combined lexer/parser .g file for
every file type I need to parser because at least this way, the lexer is
clean; all the specifics are in the grammar.


Thanks very much to all of you for having been very responsive and useful!!

Charles.


On 8/15/06, John B. Brodie <jbb@acm.org> wrote:
>
> Charles :-
>
> >Now this time I did real clean build; I removed every .class and all the
> >generated .java files before running antlr on the two .g files. Then I
> >generated the lexer, compiled it, and checked that it still works.
> Finally,
> ^^^^^^^^^^^^^^^^^^^
> >I generated the parser and compiled it but it doesn't work anymore.  So,
> can
>    ^^^^^^^^^^^^^^^^^^^
> >you tell what else I have to do when the lexer/parser grammars are in
> >seperate files?
>
> It is my understanding that you should exportVocab from the Parser;
> importVocab into the Lexer; *AND* generate the Parser *BEFORE* the Lexer.
>
> Here is a short 4 file example which works for me. Does it work for you?
>
> file 1) make.sh - a linux bash script to build the example
> // ------------------------------ Begin ------------------------------
> #!/bin/bash
>
> java antlr.Tool SepParser.g
> java antlr.Tool SepLexer.g
>
> javac *.java
>
> java Main
> // ------------------------------  End  ------------------------------
>
> file 2) SepParser.g
> // ------------------------------ Begin ------------------------------
> class SepParser extends Parser;
>
> options {
>     exportVocab = Separate;
> }
>
> program
>     : "begin"
>         ( id:ID EQUALS n:NUMBER
>             { System.out.println(id.getText() + " is number " + n.getText());
> }
>         )+
>         "end"
>         EOF
>     ;
> // ------------------------------  End  ------------------------------
>
> file 3) SepLexer.g
> // ------------------------------ Begin ------------------------------
> class SepLexer extends Lexer;
>
> options {
>     testLiterals = false;
>     importVocab = Separate;
> }
>
> ID options{ testLiterals = true; } : LETTER ( LETTER | DIGIT | '_' )* ;
>
> NUMBER : ( DIGIT )+ ;
>
> EQUALS : '=' ;
>
> protected LETTER : 'a' .. 'z' | 'A' .. 'Z' ;
> protected DIGIT  : '0' .. '9' ;
>
> WS : ( ' ' | ( '\t' { tab(); } ) | '\f' )+ { $setType(Token.SKIP); } ;
> NEWLINE : (('\r' ('\n')?) | '\n' ) { newline(); $setType(Token.SKIP); } ;
> // ------------------------------  End  ------------------------------
>
> file 4) Main.java
> // ------------------------------ Begin ------------------------------
> import java.io.*;
>
> class Main {
>    public static void main(String[] args) {
>       try {
>          SepLexer lexer =
>             new SepLexer(new StringReader("begin ANTLR = 1 end"));
>          SepParser parser = new SepParser(lexer);
>          parser.program();
>       } catch(Exception e) {
>          System.err.println("exception: "+e);
>       }
>    }
> }
> // ------------------------------  End  ------------------------------
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060818/59ddcfc9/attachment-0001.html
From parrt at cs.usfca.edu  Fri Aug 18 10:57:55 2006
From: parrt at cs.usfca.edu (Terence Parr)
Date: Fri Aug 18 10:57:59 2006
Subject: [antlr-interest] v3: semantic predicates in parser
In-Reply-To: <44E5B1A1.90002@richard-musiol.de>
References: <44E5B1A1.90002@richard-musiol.de>
Message-ID: <F549B5F5-F32F-4A44-BE59-30F69C36AB6F@cs.usfca.edu>

interesting...this in fact has 2 alts that lead to the same recursive  
rule invocation.  I need to modify this message so it shuts up with  
predicates, but it will have to unravel back to k=1.  When you get  
that message, it means ANTLR will never be able to build the DFA.

Ter

On Aug 18, 2006, at 5:25 AM, Richard Musiol wrote:

> Hi,
>
> semantic predicates in the parser don't seem to work in beta 3 as  
> they did in ANTLR 2. Will they be supported in the final?
>
> For example the following grammar:
>
> grammar Test;
>
> document : (element)* EOF ;
> element : theA | B | C	;
>
> theA
> 	:
> 		A
> 		(
> 			{ someCondition }?=>
> 			theElement=element
> 			{
> 				// do something with theElement
> 			}
> 		|
> 			// quit the rule
> 		)
> 	;
>
> A : 'a' ;
> B : 'b' ;
> C : 'c' ;
>
> ANTLR can't handle it:
> "[fatal] rule theA has non-LL(*) decision due to recursive rule  
> invocations in alts 1,2. Resolve by left-factoring or using  
> syntactic predicates with fixed k lookahead or using backtrack=true  
> option."
>
> At my opinion, ANTLR should use the first alternative if  
> someCondition is true and the second one if not.
>
> My second approach was to swap the alternatives:
>
> theA
> 	:
> 		A
> 		(
> 			{ !someCondition }?=>
> 			// quit the rule
> 		|
> 			theElement=element
> 			{
> 				// do something with the element
> 			}
> 		)
> 	;
>
> ANTLR compiles this without any errors, but the resulting code is  
> really stange:
>
> [...]
> else if ( (LA3_0==A) ) {
> 	else {
> 		NoViableAltException nvae = [...];
> 		throw nvae;
> 	}
> }
> [...]
>
> It seems that there is a bug in the code generation. But also the  
> decisions are wrong:
>
> [...]
> int alt3=2;
> int LA3_0 = input.LA(1);
> 	if ( (LA3_0==EOF) && ( !someCondition )) {
> 		alt3=1;
> 	}
> [...]
>
> Why should it only quit the rule if an EOF is following? There may  
> be an A, B or C too.
>
> I hope this will get fixed until the final, because semantic  
> predicates are a really powerful feature.
>
> Regards,
> Richard
>

From parrt at cs.usfca.edu  Fri Aug 18 12:15:38 2006
From: parrt at cs.usfca.edu (Terence Parr)
Date: Fri Aug 18 12:15:47 2006
Subject: Fwd: [antlr-interest] v3: semantic predicates in parser
References: <20060818182609.53FDE1319@mail.intersystems.com>
Message-ID: <5759E7EB-D8DA-4E6B-84D1-29117F093F04@cs.usfca.edu>

 From Jim Idle.

Begin forwarded message:

> From: "Jim Idle" <Jim.Idle@intersystems.com>
> Date: August 18, 2006 11:26:08 AM PDT
> To: "Terence Parr" <parrt@cs.usfca.edu>, "Antlr-Interest" <antlr- 
> interest@antlr.org>
> Subject: RE: [antlr-interest] v3: semantic predicates in parser
>
> Ter,
>
> Faced with a similar issue, that I sent you a few weeks back, but  
> with gated semantic predicates covering both alts, I discovered  
> that just telling antlr that this was k=1 allowed it to do the  
> right thing:
>
> options {k=1;}
>
> Makes this go away. I had not had occasion to try this with non  
> gated semantic predicates, so I tried it using the example below  
> and it seems to work fine. Whether you would want to unravel this  
> to k=1
>
> Also, in the example provided, theElement=element will not work  
> unless using option output=AST, as it is assigning the value of a  
> rule and this results in declaring theElement as void, which  
> obviously fails. If this is not an AST output, then the rule  
> element needs to return something as would theA.
>
> For simplicity, I have turned on output=AST here so it compiles.  
> The following example will work correctly then I think:
>
> grammar Test;
>
> options { output =AST; }
>
> @members
> {
>     boolean someCondition;
> }
> document : (element)* EOF ;
> element  : theA | B | C	;
>
> theA
>
>  	:
>
>  		A
>  		(
> 		    options {
> 			k=1;     // Allows ANTLR to derive the DFA for
> 				   // the following, despite recursion
> 		    }
> 		    :
> 			    { someCondition }?=>    theElement=element
> 			    {
> 				    // do something with theElement
> 			    }
> 		    |
> 			    // quit the rule
>  		)
>  	;
>
> A : 'a' ;
> B : 'b' ;
> C : 'c' ;
>
> Please note that I haven?t really looked at the code output for the  
> example above, so please verify.
>
> Jim
>
> -----Original Message-----
> From: antlr-interest-bounces@antlr.org [mailto:antlr-interest- 
> bounces@antlr.org] On Behalf Of Terence Parr
> Sent: Friday, August 18, 2006 10:58 AM
> To: Antlr-Interest
> Subject: Re: [antlr-interest] v3: semantic predicates in parser
>
> interesting...this in fact has 2 alts that lead to the same recursive
> rule invocation.  I need to modify this message so it shuts up with
> predicates, but it will have to unravel back to k=1.  When you get
> that message, it means ANTLR will never be able to build the DFA.
>
> Ter
>
> On Aug 18, 2006, at 5:25 AM, Richard Musiol wrote:
>
>> Hi,
>>
>> semantic predicates in the parser don't seem to work in beta 3 as
>> they did in ANTLR 2. Will they be supported in the final?
>>
>> For example the following grammar:
>>
>> grammar Test;
>>
>> document : (element)* EOF ;
>> element : theA | B | C	;
>>
>> theA
>> 	:
>> 		A
>> 		(
>> 			{ someCondition }?=>
>> 			theElement=element
>> 			{
>> 				// do something with theElement
>> 			}
>> 		|
>> 			// quit the rule
>> 		)
>> 	;
>>
>> A : 'a' ;
>> B : 'b' ;
>> C : 'c' ;
>>
>> ANTLR can't handle it:
>> "[fatal] rule theA has non-LL(*) decision due to recursive rule
>> invocations in alts 1,2. Resolve by left-factoring or using
>> syntactic predicates with fixed k lookahead or using backtrack=true
>> option."
>>
>> At my opinion, ANTLR should use the first alternative if
>> someCondition is true and the second one if not.
>>
>> My second approach was to swap the alternatives:
>>
>> theA
>> 	:
>> 		A
>> 		(
>> 			{ !someCondition }?=>
>> 			// quit the rule
>> 		|
>> 			theElement=element
>> 			{
>> 				// do something with the element
>> 			}
>> 		)
>> 	;
>>
>> ANTLR compiles this without any errors, but the resulting code is
>> really stange:
>>
>> [...]
>> else if ( (LA3_0==A) ) {
>> 	else {
>> 		NoViableAltException nvae = [...];
>> 		throw nvae;
>> 	}
>> }
>> [...]
>>
>> It seems that there is a bug in the code generation. But also the
>> decisions are wrong:
>>
>> [...]
>> int alt3=2;
>> int LA3_0 = input.LA(1);
>> 	if ( (LA3_0==EOF) && ( !someCondition )) {
>> 		alt3=1;
>> 	}
>> [...]
>>
>> Why should it only quit the rule if an EOF is following? There may
>> be an A, B or C too.
>>
>> I hope this will get fixed until the final, because semantic
>> predicates are a really powerful feature.
>>
>> Regards,
>> Richard
>>
>
>
> -- 
> No virus found in this incoming message.
> Checked by AVG Free Edition.
> Version: 7.1.405 / Virus Database: 268.11.3/423 - Release Date:  
> 8/18/2006
>
>
> -- 
> No virus found in this outgoing message.
> Checked by AVG Free Edition.
> Version: 7.1.405 / Virus Database: 268.11.3/423 - Release Date:  
> 8/18/2006
>

From dave at badgers-in-foil.co.uk  Sat Aug 19 08:51:53 2006
From: dave at badgers-in-foil.co.uk (David Holroyd)
Date: Sat Aug 19 08:51:57 2006
Subject: [antlr-interest] [v3] Tree building code generation bug?
Message-ID: <20060819155153.GA17385@badgers-in-foil.co.uk>

I had a valid gramar with the production,

methodDefinition[Tree mods]
	:	FUNCTION (mode='get'|mode='set')? IDENT
		parameterDeclarationList
		typeExpression
		(block)?
		-> ^(METHOD_DEF {$mods}
		                $mode? IDENT
				parameterDeclarationList
				typeExpression
				block?)
	;

When I changed that so that the first part reads,

	FUNCTION (mode=GET|mode=SET)? IDENT

(with GET&SET defined in tokens) the resulting generated Java code does
not compile.

The problem lies with lines like this,

    // src/antlr/org/asdt/core/internal/antlr/as3.g3:162:14:
    // mode= GET
    {
    mode=(Token)input.LT(1);
    match(input,GET,FOLLOW_GET_in_methodDefinition652); if (failed) return retval;
    if ( backtracking==0 ) list_GET.add(mode);
    }
    break;

...since no variable named 'list_GET' is defined.  There *is* however a
variable named 'list_41' (41 is the token type value of the GET token).

I am switching over to named tokens because I need a replacement for the
v2-style literal token constants (per my earlier posts to this list with
subject '[v3] LITERAL_xxx tokens?').


ta,
dave

-- 
http://david.holroyd.me.uk/
From mail at richard-musiol.de  Sat Aug 19 15:36:42 2006
From: mail at richard-musiol.de (Richard Musiol)
Date: Sat Aug 19 15:36:44 2006
Subject: [antlr-interest] Re: v3: semantic predicates in parser
In-Reply-To: <5759E7EB-D8DA-4E6B-84D1-29117F093F04@cs.usfca.edu>
References: <20060818182609.53FDE1319@mail.intersystems.com>
	<5759E7EB-D8DA-4E6B-84D1-29117F093F04@cs.usfca.edu>
Message-ID: <44E7927A.6090300@richard-musiol.de>

Thanks!

The k=1 solution works and in my case there is no need for a greater 
lookahead in this rule.

But now I've got an even more difficult case. I want to change the AST 
creation based on a condition:

subrule1
subrule2
( { condition }?=>
	-> ^(subrule1 subrule2)
|
	-> subrule1 subrule2
)

In ANTLR 2 I had done this with much plain Java code, but I thought that 
the new AST syntax could do this in ANTLR 3. Normally it seems to work, 
but in my special case it doesn't. It took me some time to create a test 
grammar - the following is needed to reproduce the error (nothing more, 
but also nothing less - every condition is needed!):

grammar Test;

options { output =AST; }

@members
{
	boolean someCondition;
	boolean anotherCondition;
	boolean thirdCondition;
}
document : (element)* EOF ;
element  : theA | B | C    ;

theA
	:
		A
		( options { k=1; } :
			{ someCondition }?=>
			subrule
			(
				{ thirdCondition }?=>
					-> ^(A subrule)
				|
					-> A subrule
				)
			|
			// quit the rule
		)
	;

subrule
	:
		( options { k=1; } :
			{ anotherCondition }?=>
			element subrule
		|
			// quit the rule
		)
	;

A : 'a' ;
B : 'b' ;
C : 'c' ;

Currently the result is a StackOverflowError with the loop in 
org.antlr.analysis.NFAToDFAConverter.closure
(the comment "// Avoid infinite recursion" doesn't seem to work :-) )
This seems to be a bug, so please fix it. Maybe the grammar looks crazy, 
but I promise you that it makes sense.

Bye,
Richard



Terence Parr schrieb:
>  From Jim Idle.
> 
> Begin forwarded message:
> 
>> From: "Jim Idle" <Jim.Idle@intersystems.com>
>> Date: August 18, 2006 11:26:08 AM PDT
>> To: "Terence Parr" <parrt@cs.usfca.edu>, "Antlr-Interest" 
>> <antlr-interest@antlr.org>
>> Subject: RE: [antlr-interest] v3: semantic predicates in parser
>>
>> Ter,
>>
>> Faced with a similar issue, that I sent you a few weeks back, but with 
>> gated semantic predicates covering both alts, I discovered that just 
>> telling antlr that this was k=1 allowed it to do the right thing:
>>
>> options {k=1;}
>>
>> Makes this go away. I had not had occasion to try this with non gated 
>> semantic predicates, so I tried it using the example below and it 
>> seems to work fine. Whether you would want to unravel this to k=1
>>
>> Also, in the example provided, theElement=element will not work unless 
>> using option output=AST, as it is assigning the value of a rule and 
>> this results in declaring theElement as void, which obviously fails. 
>> If this is not an AST output, then the rule element needs to return 
>> something as would theA.
>>
>> For simplicity, I have turned on output=AST here so it compiles. The 
>> following example will work correctly then I think:
>>
>> grammar Test;
>>
>> options { output =AST; }
>>
>> @members
>> {
>>     boolean someCondition;
>> }
>> document : (element)* EOF ;
>> element  : theA | B | C    ;
>>
>> theA
>>
>>      :
>>
>>          A
>>          (
>>             options {
>>             k=1;     // Allows ANTLR to derive the DFA for
>>                    // the following, despite recursion
>>             }
>>             :
>>                 { someCondition }?=>    theElement=element
>>                 {
>>                     // do something with theElement
>>                 }
>>             |
>>                 // quit the rule
>>          )
>>      ;
>>
>> A : 'a' ;
>> B : 'b' ;
>> C : 'c' ;
>>
>> Please note that I haven?t really looked at the code output for the 
>> example above, so please verify.
>>
>> Jim
>>
>> -----Original Message-----
>> From: antlr-interest-bounces@antlr.org 
>> [mailto:antlr-interest-bounces@antlr.org] On Behalf Of Terence Parr
>> Sent: Friday, August 18, 2006 10:58 AM
>> To: Antlr-Interest
>> Subject: Re: [antlr-interest] v3: semantic predicates in parser
>>
>> interesting...this in fact has 2 alts that lead to the same recursive
>> rule invocation.  I need to modify this message so it shuts up with
>> predicates, but it will have to unravel back to k=1.  When you get
>> that message, it means ANTLR will never be able to build the DFA.
>>
>> Ter
>>
>> On Aug 18, 2006, at 5:25 AM, Richard Musiol wrote:
>>
>>> Hi,
>>>
>>> semantic predicates in the parser don't seem to work in beta 3 as
>>> they did in ANTLR 2. Will they be supported in the final?
>>>
>>> For example the following grammar:
>>>
>>> grammar Test;
>>>
>>> document : (element)* EOF ;
>>> element : theA | B | C    ;
>>>
>>> theA
>>>     :
>>>         A
>>>         (
>>>             { someCondition }?=>
>>>             theElement=element
>>>             {
>>>                 // do something with theElement
>>>             }
>>>         |
>>>             // quit the rule
>>>         )
>>>     ;
>>>
>>> A : 'a' ;
>>> B : 'b' ;
>>> C : 'c' ;
>>>
>>> ANTLR can't handle it:
>>> "[fatal] rule theA has non-LL(*) decision due to recursive rule
>>> invocations in alts 1,2. Resolve by left-factoring or using
>>> syntactic predicates with fixed k lookahead or using backtrack=true
>>> option."
>>>
>>> At my opinion, ANTLR should use the first alternative if
>>> someCondition is true and the second one if not.
>>>
>>> My second approach was to swap the alternatives:
>>>
>>> theA
>>>     :
>>>         A
>>>         (
>>>             { !someCondition }?=>
>>>             // quit the rule
>>>         |
>>>             theElement=element
>>>             {
>>>                 // do something with the element
>>>             }
>>>         )
>>>     ;
>>>
>>> ANTLR compiles this without any errors, but the resulting code is
>>> really stange:
>>>
>>> [...]
>>> else if ( (LA3_0==A) ) {
>>>     else {
>>>         NoViableAltException nvae = [...];
>>>         throw nvae;
>>>     }
>>> }
>>> [...]
>>>
>>> It seems that there is a bug in the code generation. But also the
>>> decisions are wrong:
>>>
>>> [...]
>>> int alt3=2;
>>> int LA3_0 = input.LA(1);
>>>     if ( (LA3_0==EOF) && ( !someCondition )) {
>>>         alt3=1;
>>>     }
>>> [...]
>>>
>>> Why should it only quit the rule if an EOF is following? There may
>>> be an A, B or C too.
>>>
>>> I hope this will get fixed until the final, because semantic
>>> predicates are a really powerful feature.
>>>
>>> Regards,
>>> Richard
>>>
>>
>>
>> --No virus found in this incoming message.
>> Checked by AVG Free Edition.
>> Version: 7.1.405 / Virus Database: 268.11.3/423 - Release Date: 8/18/2006
>>
>>
>> --No virus found in this outgoing message.
>> Checked by AVG Free Edition.
>> Version: 7.1.405 / Virus Database: 268.11.3/423 - Release Date: 8/18/2006
>>
> 
> 
> 
From mail at richard-musiol.de  Sun Aug 20 05:34:25 2006
From: mail at richard-musiol.de (Richard Musiol)
Date: Sun Aug 20 05:34:25 2006
Subject: [antlr-interest] v3: Error position is wrong when created in a
	decision for input.LA(>1)
Message-ID: <44E856D1.7050202@richard-musiol.de>

Hi,

I found another bug in version 3. When there is a decision for LA(>1) 
the NoViableAltException is still created for the first char. So in the 
following example the index of the nvae is one less than it should and 
the char is '<' (but there is nothing wrong with this char in this 
place). Please fix it. Thanks.

         int alt24=3;
         int LA24_0 = input.LA(1);
         if ( (LA24_0=='<') ) {
             int LA24_1 = input.LA(2);
             if ( (LA24_1=='!') ) {
                 [...]
             }
             else if ( [...] ) {
                 alt24=1;
             }
             else {
                 NoViableAltException nvae =
                     new NoViableAltException("...", 24, 1, input);
                 throw nvae;
             }
         }

Bye,
Richard
From dave at badgers-in-foil.co.uk  Mon Aug 21 02:19:45 2006
From: dave at badgers-in-foil.co.uk (David Holroyd)
Date: Mon Aug 21 02:19:49 2006
Subject: [antlr-interest] [v3] Tree building code generation bug?
In-Reply-To: <20060819155153.GA17385@badgers-in-foil.co.uk>
References: <20060819155153.GA17385@badgers-in-foil.co.uk>
Message-ID: <20060821091945.GA15676@badgers-in-foil.co.uk>

On Sat, Aug 19, 2006 at 03:51:53PM +0000, David Holroyd wrote:
> I had a valid gramar with the production,
> 
> methodDefinition[Tree mods]
> 	:	FUNCTION (mode='get'|mode='set')? IDENT
> 		parameterDeclarationList
> 		typeExpression
> 		(block)?
> 		-> ^(METHOD_DEF {$mods}
> 		                $mode? IDENT
> 				parameterDeclarationList
> 				typeExpression
> 				block?)
> 	;
> 
> When I changed that so that the first part reads,
> 
> 	FUNCTION (mode=GET|mode=SET)? IDENT
> 
> (with GET&SET defined in tokens) the resulting generated Java code does
> not compile.
> 
> The problem lies with lines like this,
> 
>     // src/antlr/org/asdt/core/internal/antlr/as3.g3:162:14:
>     // mode= GET
>     {
>     mode=(Token)input.LT(1);
>     match(input,GET,FOLLOW_GET_in_methodDefinition652); if (failed) return retval;
>     if ( backtracking==0 ) list_GET.add(mode);
>     }
>     break;
> 
> ...since no variable named 'list_GET' is defined.  There *is* however a
> variable named 'list_41' (41 is the token type value of the GET token).

For the record...

I've found that a workaround for this is to declare 'proper' tokens,
rather than using the 'tokens' section.

i.e. I get the above problem when the tokens are defined as,

  tokens {
      GET='get';  SET='set';
  }

but it goes away when I replace the above with something like this in
the grammar,

  GET   :   'get';
  SET   :   'set';


ta,
dave

-- 
http://david.holroyd.me.uk/
From dwashington at gmx.net  Mon Aug 21 03:44:38 2006
From: dwashington at gmx.net (Denis Washington)
Date: Mon Aug 21 03:44:40 2006
Subject: [antlr-interest] Variable visibility problem with ANTLR 3code
	generation
In-Reply-To: <20060817204740.BB8121172@mail.intersystems.com>
References: <20060817204740.BB8121172@mail.intersystems.com>
Message-ID: <44E98E96.6020606@gmx.net>

Jim Idle wrote:
> -----Original Message-----
> From: antlr-interest-bounces@antlr.org [mailto:antlr-interest-
>
>   
>> The '$' prefix is not needed, from what I see after code generation it's 
>> even wrong.
>>     
>
>
> If it really is wrong, then there is a bug as the $ prefix is always needed in ANTLR3. 
>
> Depending on what is being generated, it can sometimes be the case that an unadorned reference to a label happens to use the same variable name as your action code and it compiles and works. However, you do need the $. As in the example below (output=AST).
>
> querySpecs
> 	: (
> 		FILENAME	EQ fname   =    STRING      SEMI
>                 GLOBAL          EQ global  =    STRING      SEMI
>                 FILETYPE        EQ ftype   =    NUMBER      SEMI
> 		COMMAND 	EQ command =    STRING      SEMI
> 		TYPE		EQ              query_type  SEMI
>                 (PROCESSOR      EQ output  =    STRING      SEMI)?
>                 OPTIONS         EQ opts    =    STRING      SEMI
>                 SORTED          EQ sorted  =    bool        SEMI
>                 SELECTLIST      EQ sellist =    bool        SEMI
>            )
>                 -> ^(QUERY_SPECS 
>                         FILENAME    $fname 
>                         GLOBAL      $global
>                         FILETYPE    $ftype
>                         COMMAND     $command 
>                         TYPE        query_type 
>                         (PROCESSOR   $output)?
>                         OPTIONS     $opts
>                         SORTED      $sorted 
>                         SELECTLIST  $sellist
>                     )
> 	;
>
> Jim
>
>
>
>   
For the following rule:

declarationStatement returns [DeclarationStatement ds]
    :   var=varOrConstDeclaration
        {
            $ds = new DeclarationStatement($var);
            $ds.setSource($var);
        }
    ;

I get from ANTLR (3.0b3):

schlicht.g:240:9: missing attribute access on rule scope: var

Is this a bug? Or do I still understand the $ prefix wrong?
From dave at badgers-in-foil.co.uk  Mon Aug 21 05:55:24 2006
From: dave at badgers-in-foil.co.uk (David Holroyd)
Date: Mon Aug 21 05:55:28 2006
Subject: [antlr-interest] [v3] Rule references in rewrite rules?
Message-ID: <20060821125524.GA18462@badgers-in-foil.co.uk>

Hello,


Should the following do what I think it should..?

  compilationUnit:
          'package' packageBlock -> ^(COMPILATION_UNIT $compilationUnit)
      ;

I was expecting this to give me a result tree which lookes like,

  #( COMPILATION_UNIT 'package' ..etc.. )

but instead I just get,

  #( COMPILATION_UNIT )


Is my syntax wrong, or is $compilationUnit not actually a reference to
the entire pre-rewrite tree for the compilationUnit rule?  (I can't
remember where I read that it should be, any more.)


Thanks for any suggestions!
dave

-- 
http://david.holroyd.me.uk/
From pradeep_koolkarni at yahoo.com  Mon Aug 21 08:21:26 2006
From: pradeep_koolkarni at yahoo.com (pradeep kulkarni)
Date: Mon Aug 21 08:21:31 2006
Subject: [antlr-interest] Changes for stream offset determination
Message-ID: <20060821152126.91465.qmail@web50614.mail.yahoo.com>

Hey 
can some body provide me the full source code for getting offset values in 
token streams.

thanx in advace
Pradeep

 		
---------------------------------
Stay in the know. Pulse on the new Yahoo.com.  Check it out. 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060821/cd1e47d2/attachment.html
From mail at richard-musiol.de  Mon Aug 21 09:37:15 2006
From: mail at richard-musiol.de (Richard Musiol)
Date: Mon Aug 21 09:37:16 2006
Subject: [antlr-interest] v3: semantic predicates in parser
In-Reply-To: <20060821155514.8ED5413B6@mail.intersystems.com>
References: <20060821155514.8ED5413B6@mail.intersystems.com>
Message-ID: <44E9E13B.6060003@richard-musiol.de>

Wow great! It works.
I didn't know that gates are also possible for rewrites. This solution 
is great and has a much cleaner structure than my attempt. I hope that 
the new documentation will cover this too. The new ANTLR is really 
powerful if you know how to use it.

Thanks,
Richard



Jim Idle schrieb:
> Though there is a bug, it might be that it is not telling you have not covered all rewrite cases or similar. I think you will have more luck by placing the rewrites as conditionals rather than trying to control this via rules. You shudl really be parsing the elements, then saying "OK, now I have eveyhing, how do I want the tree to look:
> 
> theA
> 	: (
> 		A
> 		( options { k=1; } 
> 			: { someCondition }?=> subrule
> 			| // quit the rule
> 		)
> 	   )
> 		-> { someCondition &&   thirdCondition }? -> ^(A subrule)
> 		-> { someCondition && ! thirdCondition }? -> A subrule
> 		->
> 	;
> 
> I am assuming that you want an empty tree if 'someCondition' is not set however if you just want A then that last rewrite rule would be:
> 
> -> A
> 
> Remember that the production you are expressing is what is valid syntactically and you are mixing gated semantic predicates for parsing with how the tree should luck after you have parsed it. Documentation is a little sparse of course at the moment ;-)
> 
> Also, given the gate there, I don't think that you need the epsilon production (// quit the rule) as the gate will either allow that parse or not), but I have not looked at that too closely.
> 
> Jim
> 
> -----Original Message-----
> From: antlr-interest-bounces@antlr.org [mailto:antlr-interest-bounces@antlr.org] On Behalf Of Richard Musiol
> Sent: Saturday, August 19, 2006 3:37 PM
> To: Antlr-Interest
> Subject: [antlr-interest] Re: v3: semantic predicates in parser
> 
> Thanks!
> 
> The k=1 solution works and in my case there is no need for a greater 
> lookahead in this rule.
> 
> But now I've got an even more difficult case. I want to change the AST 
> creation based on a condition:
> 
> subrule1
> subrule2
> ( { condition }?=>
> 	-> ^(subrule1 subrule2)
> |
> 	-> subrule1 subrule2
> )
> 
> In ANTLR 2 I had done this with much plain Java code, but I thought that 
> the new AST syntax could do this in ANTLR 3. Normally it seems to work, 
> but in my special case it doesn't. It took me some time to create a test 
> grammar - the following is needed to reproduce the error (nothing more, 
> but also nothing less - every condition is needed!):
> 
> grammar Test;
> 
> options { output =AST; }
> 
> @members
> {
> 	boolean someCondition;
> 	boolean anotherCondition;
> 	boolean thirdCondition;
> }
> document : (element)* EOF ;
> element  : theA | B | C    ;
> 
> theA
> 	:
> 		A
> 		( options { k=1; } :
> 			{ someCondition }?=>
> 			subrule
> 			(
> 				{ thirdCondition }?=>
> 					-> ^(A subrule)
> 				|
> 					-> A subrule
> 				)
> 			|
> 			// quit the rule
> 		)
> 	;
> 
> subrule
> 	:
> 		( options { k=1; } :
> 			{ anotherCondition }?=>
> 			element subrule
> 		|
> 			// quit the rule
> 		)
> 	;
> 
> A : 'a' ;
> B : 'b' ;
> C : 'c' ;
> 
> Currently the result is a StackOverflowError with the loop in 
> org.antlr.analysis.NFAToDFAConverter.closure
> (the comment "// Avoid infinite recursion" doesn't seem to work :-) )
> This seems to be a bug, so please fix it. Maybe the grammar looks crazy, 
> but I promise you that it makes sense.
> 
> Bye,
> Richard
> 
> 
> 
> Terence Parr schrieb:
>>  From Jim Idle.
>>
>> Begin forwarded message:
>>
>>> From: "Jim Idle" <Jim.Idle@intersystems.com>
>>> Date: August 18, 2006 11:26:08 AM PDT
>>> To: "Terence Parr" <parrt@cs.usfca.edu>, "Antlr-Interest" 
>>> <antlr-interest@antlr.org>
>>> Subject: RE: [antlr-interest] v3: semantic predicates in parser
>>>
>>> Ter,
>>>
>>> Faced with a similar issue, that I sent you a few weeks back, but with 
>>> gated semantic predicates covering both alts, I discovered that just 
>>> telling antlr that this was k=1 allowed it to do the right thing:
>>>
>>> options {k=1;}
>>>
>>> Makes this go away. I had not had occasion to try this with non gated 
>>> semantic predicates, so I tried it using the example below and it 
>>> seems to work fine. Whether you would want to unravel this to k=1
>>>
>>> Also, in the example provided, theElement=element will not work unless 
>>> using option output=AST, as it is assigning the value of a rule and 
>>> this results in declaring theElement as void, which obviously fails. 
>>> If this is not an AST output, then the rule element needs to return 
>>> something as would theA.
>>>
>>> For simplicity, I have turned on output=AST here so it compiles. The 
>>> following example will work correctly then I think:
>>>
>>> grammar Test;
>>>
>>> options { output =AST; }
>>>
>>> @members
>>> {
>>>     boolean someCondition;
>>> }
>>> document : (element)* EOF ;
>>> element  : theA | B | C    ;
>>>
>>> theA
>>>
>>>      :
>>>
>>>          A
>>>          (
>>>             options {
>>>             k=1;     // Allows ANTLR to derive the DFA for
>>>                    // the following, despite recursion
>>>             }
>>>             :
>>>                 { someCondition }?=>    theElement=element
>>>                 {
>>>                     // do something with theElement
>>>                 }
>>>             |
>>>                 // quit the rule
>>>          )
>>>      ;
>>>
>>> A : 'a' ;
>>> B : 'b' ;
>>> C : 'c' ;
>>>
>>> Please note that I haven?t really looked at the code output for the 
>>> example above, so please verify.
>>>
>>> Jim
>>>
>>> -----Original Message-----
>>> From: antlr-interest-bounces@antlr.org 
>>> [mailto:antlr-interest-bounces@antlr.org] On Behalf Of Terence Parr
>>> Sent: Friday, August 18, 2006 10:58 AM
>>> To: Antlr-Interest
>>> Subject: Re: [antlr-interest] v3: semantic predicates in parser
>>>
>>> interesting...this in fact has 2 alts that lead to the same recursive
>>> rule invocation.  I need to modify this message so it shuts up with
>>> predicates, but it will have to unravel back to k=1.  When you get
>>> that message, it means ANTLR will never be able to build the DFA.
>>>
>>> Ter
>>>
>>> On Aug 18, 2006, at 5:25 AM, Richard Musiol wrote:
>>>
>>>> Hi,
>>>>
>>>> semantic predicates in the parser don't seem to work in beta 3 as
>>>> they did in ANTLR 2. Will they be supported in the final?
>>>>
>>>> For example the following grammar:
>>>>
>>>> grammar Test;
>>>>
>>>> document : (element)* EOF ;
>>>> element : theA | B | C    ;
>>>>
>>>> theA
>>>>     :
>>>>         A
>>>>         (
>>>>             { someCondition }?=>
>>>>             theElement=element
>>>>             {
>>>>                 // do something with theElement
>>>>             }
>>>>         |
>>>>             // quit the rule
>>>>         )
>>>>     ;
>>>>
>>>> A : 'a' ;
>>>> B : 'b' ;
>>>> C : 'c' ;
>>>>
>>>> ANTLR can't handle it:
>>>> "[fatal] rule theA has non-LL(*) decision due to recursive rule
>>>> invocations in alts 1,2. Resolve by left-factoring or using
>>>> syntactic predicates with fixed k lookahead or using backtrack=true
>>>> option."
>>>>
>>>> At my opinion, ANTLR should use the first alternative if
>>>> someCondition is true and the second one if not.
>>>>
>>>> My second approach was to swap the alternatives:
>>>>
>>>> theA
>>>>     :
>>>>         A
>>>>         (
>>>>             { !someCondition }?=>
>>>>             // quit the rule
>>>>         |
>>>>             theElement=element
>>>>             {
>>>>                 // do something with the element
>>>>             }
>>>>         )
>>>>     ;
>>>>
>>>> ANTLR compiles this without any errors, but the resulting code is
>>>> really stange:
>>>>
>>>> [...]
>>>> else if ( (LA3_0==A) ) {
>>>>     else {
>>>>         NoViableAltException nvae = [...];
>>>>         throw nvae;
>>>>     }
>>>> }
>>>> [...]
>>>>
>>>> It seems that there is a bug in the code generation. But also the
>>>> decisions are wrong:
>>>>
>>>> [...]
>>>> int alt3=2;
>>>> int LA3_0 = input.LA(1);
>>>>     if ( (LA3_0==EOF) && ( !someCondition )) {
>>>>         alt3=1;
>>>>     }
>>>> [...]
>>>>
>>>> Why should it only quit the rule if an EOF is following? There may
>>>> be an A, B or C too.
>>>>
>>>> I hope this will get fixed until the final, because semantic
>>>> predicates are a really powerful feature.
>>>>
>>>> Regards,
>>>> Richard
>>>>
>>>
>>> --No virus found in this incoming message.
>>> Checked by AVG Free Edition.
>>> Version: 7.1.405 / Virus Database: 268.11.3/423 - Release Date: 8/18/2006
>>>
>>>
>>> --No virus found in this outgoing message.
>>> Checked by AVG Free Edition.
>>> Version: 7.1.405 / Virus Database: 268.11.3/423 - Release Date: 8/18/2006
>>>
>>
>>
> 
From stuart.dootson at gmail.com  Mon Aug 21 11:10:13 2006
From: stuart.dootson at gmail.com (Stuart Dootson)
Date: Mon Aug 21 11:10:16 2006
Subject: [antlr-interest] [v3] Rule references in rewrite rules?
In-Reply-To: <20060821125524.GA18462@badgers-in-foil.co.uk>
References: <20060821125524.GA18462@badgers-in-foil.co.uk>
Message-ID: <8b56cad40608211110lbc8dc11id1d58a7de04411b@mail.gmail.com>

On 8/21/06, David Holroyd <dave@badgers-in-foil.co.uk> wrote:
> Hello,
>
>
> Should the following do what I think it should..?
>
>   compilationUnit:
>           'package' packageBlock -> ^(COMPILATION_UNIT $compilationUnit)
>       ;
>
> I was expecting this to give me a result tree which lookes like,
>
>   #( COMPILATION_UNIT 'package' ..etc.. )
>
> but instead I just get,
>
>   #( COMPILATION_UNIT )
>
>
> Is my syntax wrong, or is $compilationUnit not actually a reference to
> the entire pre-rewrite tree for the compilationUnit rule?  (I can't
> remember where I read that it should be, any more.)
>
>
> Thanks for any suggestions!
> dave

I would imagine you can only reference things on the right hand side
in the rewrite rule - after all, $compilationUnit doesn't really exist
at that point (if you see the rule as a declaration of sorts)? And
what if you had a recursive rule?

Stuart Dootson

PS Izzat Ada you're parsing?
From parrt at cs.usfca.edu  Mon Aug 21 13:25:44 2006
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Aug 21 13:25:51 2006
Subject: [antlr-interest] my status
Message-ID: <33997733-6171-4D31-AA18-4ACBB005D668@cs.usfca.edu>

Hi, was trying to relax before school started a bit and now I'm  
swamped with all the new students and class prep.  I hope to reappear  
to answer email in about a week.

Jean Bovet has an amazing new update to ANTLRWorks that you won't  
believe; he reports that he's ready and just waiting for me...doh!

Ter
From peizhao at itee.uq.edu.au  Mon Aug 21 22:06:03 2006
From: peizhao at itee.uq.edu.au (Peizhao)
Date: Mon Aug 21 22:05:13 2006
Subject: [antlr-interest] how to make different variable and others
Message-ID: <1156223163.5554.85.camel@localhost>

Hi,

I have a file which will contain the followings:

ABSTRACT a short description about what this document is about
ABSTRACT this description is not output to users.

these ABSTRACT statements are conflicting with my variable name
definition. 


ABSTRACT_DESC	: "ABSTRACT " ANYSTRING;
VARIABLE_NAME	:	('a'..'z'|'A'..'Z') ('a'..'z'|'A'..'Z'|'0'..'9'|
SPECIALCHAR)* ;

therefore, my question is that how can i make them different.

-- 
Regards;

Peizhao

From peizhao at itee.uq.edu.au  Mon Aug 21 22:26:13 2006
From: peizhao at itee.uq.edu.au (Peizhao)
Date: Mon Aug 21 22:25:23 2006
Subject: [antlr-interest] lexical nondeterminism
Message-ID: <1156224374.5554.89.camel@localhost>

follow up the previous email, I changed the rules abit as shown:
=========================================================================
protected ANYSTRING	:  (~('\n'|'\r'))* ('\n'|'\r');
protected WS : (  ' ' | '\t' );

PROPERTYNAME	: '%' ('a'..'z'|'A'..'Z') ('a'..'z'|'A'..'Z'|'0'..'9'|
SPECIALCHAR)* ;
COMMENT : "//" ANYSTRING;
ABSTRACT	:	("ABSTRACT" (WS)+) => ("ABSTRACT" (WS)+) ANYSTRING
	|	('a'..'z'|'A'..'Z') ('a'..'z'|'A'..'Z'|'0'..'9'|SPECIALCHAR)*
{ $setType(VARIABLE_NAME); } ;
=========================================================================

then I got the following warning message:

1	lexical nondeterminism upon k==1:'\t',' ' k==2:'\u0003'..'\u00ff'
k==3:<end-of-token>,'\u0003'..'\u00ff' between alt 1 and exit branch of
block	


anyone can help?


-- 
Regards;

Peizhao

From Joerg.Werner at qimonda.com  Tue Aug 22 00:43:17 2006
From: Joerg.Werner at qimonda.com (Joerg.Werner@qimonda.com)
Date: Tue Aug 22 00:43:25 2006
Subject: [antlr-interest] ANTLR 3: throws statement on rule does not work
Message-ID: <8659C7B861F21A4889878EE7CF859D7D01F9BDA4@mucse303.eu.infineon.com>

Hi,

I've been playing with ANTLR 3 for some time now and find it quite nice. I encountered one problem though: If I have a rule which declares that it throws an exception like:

expr returns [Symbol rs=null] throws Exception
    :
        ^(
            '+' e1=expr e2=expr { // Action code which throws Exception } )
    ;

then this exception is not declared in the Java code:

    // $ANTLR start expr
    // FlexibleBitstreamDecoderWalker.g:73:1: expr returns [Symbol rs=null] : ^( '+' e1= expr e2= expr );
    public expr_return expr() throws RecognitionException {    

Is this intended or is this a bug? In ANTLR 2 declaring exceptions was done this way, but maybe this has changed? 

Regards,

J?rg


-- 
Dr. J?rg Werner
Qimonda AG 
Memory Products Division
QAG PD PT TPE C
Am Campeon 1-12
D-85579 Neubiberg
email: joerg.werner@qimonda.com
Tel:  +49 89 234-26602
Fax: +49 89 234-9554740
From dwashington at gmx.net  Tue Aug 22 01:39:14 2006
From: dwashington at gmx.net (Denis Washington)
Date: Tue Aug 22 01:39:17 2006
Subject: [antlr-interest] Variable visibility problem with ANTLR 3code
	generation
In-Reply-To: <20060821161103.275C08E5@mail.intersystems.com>
References: <20060821161103.275C08E5@mail.intersystems.com>
Message-ID: <44EAC2B2.3030007@gmx.net>

Jim Idle wrote:
> -----Original Message-----
> From: Denis Washington [mailto:dwashington@gmx.net] 
> Sent: Monday, August 21, 2006 3:45 AM
> To: Jim Idle; antlr-interest@antlr.org
> Subject: Re: [antlr-interest] Variable visibility problem with ANTLR 3code generation
>
> Jim Idle wrote:
>   
>> -----Original Message-----
>>   
>>     
> For the following rule:
>
> declarationStatement returns [DeclarationStatement ds]
>     :   var=varOrConstDeclaration
>         {
>             $ds = new DeclarationStatement($var);
>             $ds.setSource($var);
>         }
>     ;
>
> I get from ANTLR (3.0b3):
>
> schlicht.g:240:9: missing attribute access on rule scope: var
>
> Is this a bug? Or do I still understand the $ prefix wrong?
>
>
> If you are not producing a tree, then you cannot assign var to the result of a rule, unless the rule returns[] something. The error is telling you that the rule does not return anything. Or perhaps your rule returns multiple elements, in which case you would need $var.element. If you want $var to be an object then the rule needs to return one and construct it within its action code, rather than return multiple elements. Though it is possible that you mean to access the internally constructed object, it is internal and could change, so you should build your own and return that.
>
> In general, you should consider producing a tree for the first pass, then use the tree to do more complicated things.
>
> Jim
>
>   
Hi Jim,

The rule varOrConstDeclaration is returning something, exactly one 
element, through it's action code. so it should work.

Denis
From dave at badgers-in-foil.co.uk  Tue Aug 22 02:29:06 2006
From: dave at badgers-in-foil.co.uk (David Holroyd)
Date: Tue Aug 22 02:29:11 2006
Subject: [antlr-interest] [v3] Rule references in rewrite rules?
In-Reply-To: <8b56cad40608211110lbc8dc11id1d58a7de04411b@mail.gmail.com>
References: <20060821125524.GA18462@badgers-in-foil.co.uk>
	<8b56cad40608211110lbc8dc11id1d58a7de04411b@mail.gmail.com>
Message-ID: <20060822092906.GA1011@badgers-in-foil.co.uk>

On Mon, Aug 21, 2006 at 07:10:13PM +0100, Stuart Dootson wrote:
> On 8/21/06, David Holroyd <dave@badgers-in-foil.co.uk> wrote:
> >Hello,
> >
> >
> >Should the following do what I think it should..?
> >
> >  compilationUnit:
> >          'package' packageBlock -> ^(COMPILATION_UNIT $compilationUnit)
> >      ;
> >
> >I was expecting this to give me a result tree which lookes like,
> >
> >  #( COMPILATION_UNIT 'package' ..etc.. )
> >
> >but instead I just get,
> >
> >  #( COMPILATION_UNIT )
> >
> >
> >Is my syntax wrong, or is $compilationUnit not actually a reference to
> >the entire pre-rewrite tree for the compilationUnit rule?  (I can't
> >remember where I read that it should be, any more.)

> I would imagine you can only reference things on the right hand side
> in the rewrite rule - after all, $compilationUnit doesn't really exist
> at that point (if you see the rule as a declaration of sorts)? And
> what if you had a recursive rule?

Well, the example I was copying from was the last one on the Tree
Construction wiki page:

  http://www.antlr.org/wiki/display/ANTLR3/Tree+construction


> PS Izzat Ada you're parsing?

Nope, ActionScript3 (kinda like ECMAScript4), which has constructs like,

  package foo.bar {  // grammar fragment above lacks the ident
    class Blat {
    }
  }


ta,
dave
From parrt at cs.usfca.edu  Tue Aug 22 08:45:50 2006
From: parrt at cs.usfca.edu (Terence Parr)
Date: Tue Aug 22 08:45:54 2006
Subject: [antlr-interest] ANTLR consultant needed
Message-ID: <A95F74C9-F317-454E-B8DA-F2BE0A62119A@cs.usfca.edu>

Hi, posting for somebody needing a consultant.

Ter

> I'm looking for an antlr consultant.
>
> For about 3 months, starting immediately - fulltime - in the  
> California Bay area or in Vienna, Virginia area,
> plus some ongoing part time support.
>
> We need a gnu C grammar that is not GPL'd plus extensions and tools  
> for doing code transformations.
>
> Please contact me by email (turby@revivesystems.com)
> with your resume if you are interested and give me a phone number  
> where you can
> be reached.
>
> Thanks,
> Dr. Carolyn Turbyfill
> Revive Systems
> turby@revivesystems.com
From kksath at yahoo.com  Tue Aug 22 08:46:32 2006
From: kksath at yahoo.com (Sathish K)
Date: Tue Aug 22 08:46:43 2006
Subject: [antlr-interest] Handling negative numbers
Message-ID: <20060822154632.94796.qmail@web52310.mail.yahoo.com>

Hi All,
   
  Could anyone guide me as to how to handle negative numbers?
   
  Regards,
   
  Sathish

 		
---------------------------------
Stay in the know. Pulse on the new Yahoo.com.  Check it out. 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060822/69c97d66/attachment.html
From dave at badgers-in-foil.co.uk  Tue Aug 22 09:27:31 2006
From: dave at badgers-in-foil.co.uk (David Holroyd)
Date: Tue Aug 22 09:27:38 2006
Subject: [antlr-interest] Handling negative numbers
In-Reply-To: <20060822154632.94796.qmail@web52310.mail.yahoo.com>
References: <20060822154632.94796.qmail@web52310.mail.yahoo.com>
Message-ID: <20060822162731.GA2187@badgers-in-foil.co.uk>

On Tue, Aug 22, 2006 at 08:46:32AM -0700, Sathish K wrote:
>   Could anyone guide me as to how to handle negative numbers?

Don't bother trying to handle them in the lexer, handle uniary-minus in
the parser instead, i.e.,

  simpleExpr
      :   (MINUS)?
          NUM
      ;
----
  MINUS: '-';
  NUM: ('0'..'9')+


ta,
dave

-- 
http://david.holroyd.me.uk/
From jimi at intersystems.com  Tue Aug 22 09:34:31 2006
From: jimi at intersystems.com (Jim Idle)
Date: Tue Aug 22 09:34:36 2006
Subject: [antlr-interest] Variable visibility problem with ANTLR 3code
	generation
Message-ID: <20060822163432.1A7111767@mail.intersystems.com>



-----Original Message-----
From: Denis Washington [mailto:dwashington@gmx.net] 
Sent: Tuesday, August 22, 2006 1:39 AM
To: Jim Idle; antlr-interest@antlr.org
Subject: Re: [antlr-interest] Variable visibility problem with ANTLR 3code generation

> Jim Idle wrote:
> > -----Original Message-----
> > For the following rule:
> >
> > declarationStatement returns [DeclarationStatement ds]
> >     :   var=varOrConstDeclaration
> >         {
> >             $ds = new DeclarationStatement($var);
> >             $ds.setSource($var);
> >         }
> >     ;
> >
> > I get from ANTLR (3.0b3):
> >
> > schlicht.g:240:9: missing attribute access on rule scope: var
> >   
> > Hi Jim,
>
> The rule varOrConstDeclaration is returning something, exactly one 
> element, through it's action code. so it should work.
>
OK - off the top of my head then: is this parser producing a tree output?  If it is then your return value from varOrConstDeclaration will not be a single value but will include start and stop (offsets or trees) as well as your own declarations. Hence you would get the message you show.

If you have:

options
{
	output = AST;
}
...
varOrConstDeclaration returns [ String answer]
: ...

Then you would need

declarationStatement returns [DeclarationStatement ds]
     :   var=varOrConstDeclaration
         {
             $ds = new DeclarationStatement($var.answer);
             $ds.setSource($var.answer);
         }
     ;

Try that and see.

Jim

-- 
No virus found in this outgoing message.
Checked by AVG Free Edition.
Version: 7.1.405 / Virus Database: 268.11.4/424 - Release Date: 8/21/2006
 
From FranklinChen at cmu.edu  Tue Aug 22 11:13:23 2006
From: FranklinChen at cmu.edu (FranklinChen@cmu.edu)
Date: Tue Aug 22 11:13:29 2006
Subject: [antlr-interest] ANTLR 3 plugin for Maven 2?
Message-ID: <17643.18755.14287.18413@swan.psy.cmu.edu>

I am considering using Maven 2 for managing my projects.  There is not
currently a plugin for ANTLR (any version) for Maven 2, so I was
thinking of writing one.  If anyone already has one, please let me
know so that I do not duplicate work :-).

-- 
Franklin
From antlr at jazillian.com  Tue Aug 22 11:32:04 2006
From: antlr at jazillian.com (Andy Tripp)
Date: Tue Aug 22 11:32:04 2006
Subject: [antlr-interest] ANTLR consultant needed
In-Reply-To: <A95F74C9-F317-454E-B8DA-F2BE0A62119A@cs.usfca.edu>
References: <A95F74C9-F317-454E-B8DA-F2BE0A62119A@cs.usfca.edu>
Message-ID: <44EB4DA4.1000502@jazillian.com>

Terence Parr wrote:

> Hi, posting for somebody needing a consultant.
>
> Ter
>
>> I'm looking for an antlr consultant.
>>
>> For about 3 months, starting immediately - fulltime - in the  
>> California Bay area or in Vienna, Virginia area,
>> plus some ongoing part time support.
>>
>> We need a gnu C grammar that is not GPL'd plus extensions and tools  
>> for doing code transformations.
>>
What license is the existing GNU C grammar 
(http://antlr.org/grammar/cgram) under?
I see no license statement anywhere.
From wawong at bea.com  Tue Aug 22 12:13:09 2006
From: wawong at bea.com (Warren Wong)
Date: Tue Aug 22 12:14:20 2006
Subject: [antlr-interest] Error handling in Antlr 
In-Reply-To: <20060822162731.GA2187@badgers-in-foil.co.uk>
Message-ID: <F91503BC8AA6384BA2FFED03EF8E392C016E6995@repbex01.amer.bea.com>

Hi,

I've written a SQL Parser, but since I'm using LA(4), something like the
following:

SELECT x,<keyword> from...

Throws the error invalid token x found.

This is because in the translated code, we have the line:

						if ((((LA(1) >=
LITERAL_leading && LA(1) <= LITERAL_both)) &&
(_tokenSet_45.member(LA(2))) && (_tokenSet_46.member(LA(3))) &&
(_tokenSet_11.member(LA(4))))) {

which when fails, displays the error

throw new NoViableAltException(LT(1), getFilename());

In this case, token x matches, but the error is at the keyword. 

Is there an easy fix for this in pre ANTLR 3.0?

Thanks,
Warren
_______________________________________________________________________
Notice:  This email message, together with any attachments, may contain
information  of  BEA Systems,  Inc.,  its subsidiaries  and  affiliated
entities,  that may be confidential,  proprietary,  copyrighted  and/or
legally privileged, and is intended solely for the use of the individual
or entity named in this message. If you are not the intended recipient,
and have received this message in error, please immediately return this
by email and then delete it.
From porcelli at uol.com.br  Tue Aug 22 13:01:48 2006
From: porcelli at uol.com.br (Alexandre Porcelli)
Date: Tue Aug 22 13:01:53 2006
Subject: [antlr-interest] [v3] newbie Question - How to use the old
	caseSensitive option
Message-ID: <ee873c070608221301i22923200v2854580fa2f0be55@mail.gmail.com>

Hi All!

   I?m new to ANTLR and I?m starting to work with v3.
   I?d like to use the oldest caseSensitive options in my grammar but
it is not working (I just saw it in v2 documentation).
   Is it possible? Is there another alternative?

Best Regards,
Alexandre Porcelli
From jbb at acm.org  Tue Aug 22 13:02:18 2006
From: jbb at acm.org (John B. Brodie)
Date: Tue Aug 22 13:02:26 2006
Subject: [antlr-interest] lexical nondeterminism
In-Reply-To: <1156224374.5554.89.camel@localhost> (message from Peizhao on
	Tue, 22 Aug 2006 15:26:13 +1000)
References: <1156224374.5554.89.camel@localhost>
Message-ID: <E1GFcS2-0001ik-00@gecko>

>follow up the previous email, I changed the rules abit as shown:
>=========================================================================
>protected ANYSTRING	:  (~('\n'|'\r'))* ('\n'|'\r');
>protected WS : (  ' ' | '\t' );
>
>PROPERTYNAME	: '%' ('a'..'z'|'A'..'Z') ('a'..'z'|'A'..'Z'|'0'..'9'|
>SPECIALCHAR)* ;
>COMMENT : "//" ANYSTRING;
>ABSTRACT	:	("ABSTRACT" (WS)+) => ("ABSTRACT" (WS)+) ANYSTRING
>	|	('a'..'z'|'A'..'Z') ('a'..'z'|'A'..'Z'|'0'..'9'|SPECIALCHAR)*
>{ $setType(VARIABLE_NAME); } ;
>=========================================================================
>
>then I got the following warning message:
>
>1	lexical nondeterminism upon k==1:'\t',' ' k==2:'\u0003'..'\u00ff'
>k==3:<end-of-token>,'\u0003'..'\u00ff' between alt 1 and exit branch of
>block	
>
>
>anyone can help?

The problem is with the (WS)+ phrase before the ANYSTRING.

Consider the input "ABSTRACT  ", the second blank could either be part
of the (WS)+ or be the first character of the ANYSTRING, thus the
non-determinism.

I assume you want ANYSTRING to start with the first non-blank
character, so just add ~(' '|'\t) to the from of the ANYSTRING rule.
(and of course, also adjusting any other rule that uses ANYSTRING).

Also you do not really need the predicate since you have a fixed size
lookahead. e.g. k=9 will distinguish "ABSTRACT " from "ABSTRACTION". I
always work really hard to avoid predicates because they involve
backtracking with the possibility of scanning the input text multiple
times.

Anyway, here is a lexer that gets no complaints from the antlr.Tool
(did not actually try to test it any further):

//=========================================================================
class L extends Lexer;

options {
    k = 9;
    charVocabulary = '\3'..'\377';
}

protected SPECIALCHAR : '_';

protected ANYSTRING	:  ~(' '|'\t') (~('\n'|'\r'))* ('\n'|'\r');
protected WS : (  ' ' | '\t' );

protected NAME
    : ('a'..'z'|'A'..'Z') ('a'..'z'|'A'..'Z'|'0'..'9'|SPECIALCHAR)* ;

PROPERTYNAME : '%' NAME ;

COMMENT : "//" (WS)+ ANYSTRING;

ABSTRACT : "ABSTRACT" (WS)+ ANYSTRING ;

VARIABLE_NAME : NAME;
//=========================================================================

Hope this helps...

   -jbb
From oliver.zeigermann at gmail.com  Tue Aug 22 14:13:00 2006
From: oliver.zeigermann at gmail.com (Oliver Zeigermann)
Date: Tue Aug 22 14:13:19 2006
Subject: [antlr-interest] ANTLR consultant needed
In-Reply-To: <44EB4DA4.1000502@jazillian.com>
References: <A95F74C9-F317-454E-B8DA-F2BE0A62119A@cs.usfca.edu>
	<44EB4DA4.1000502@jazillian.com>
Message-ID: <9da4f4520608221413qfa9e452vcf0ca4f6e9507b86@mail.gmail.com>

Well, here it is:

http://antlr.org/grammar/cgram/license.txt

Right?

Sounds BSD-like.

Maybe the company can save its money ;)

Oliver

2006/8/22, Andy Tripp <antlr@jazillian.com>:
> Terence Parr wrote:
>
> > Hi, posting for somebody needing a consultant.
> >
> > Ter
> >
> >> I'm looking for an antlr consultant.
> >>
> >> For about 3 months, starting immediately - fulltime - in the
> >> California Bay area or in Vienna, Virginia area,
> >> plus some ongoing part time support.
> >>
> >> We need a gnu C grammar that is not GPL'd plus extensions and tools
> >> for doing code transformations.
> >>
> What license is the existing GNU C grammar
> (http://antlr.org/grammar/cgram) under?
> I see no license statement anywhere.
>
From sohail at taggedtype.net  Tue Aug 22 14:49:01 2006
From: sohail at taggedtype.net (Sohail Somani)
Date: Tue Aug 22 14:49:19 2006
Subject: [antlr-interest] ANTLR consultant needed
In-Reply-To: <9da4f4520608221413qfa9e452vcf0ca4f6e9507b86@mail.gmail.com>
References: <A95F74C9-F317-454E-B8DA-F2BE0A62119A@cs.usfca.edu>
	<44EB4DA4.1000502@jazillian.com>
	<9da4f4520608221413qfa9e452vcf0ca4f6e9507b86@mail.gmail.com>
Message-ID: <1156283341.27607.1.camel@localhost.localdomain>

On Tue, 2006-08-22 at 23:13 +0200, Oliver Zeigermann wrote:
> Well, here it is:
> 
> http://antlr.org/grammar/cgram/license.txt
> 
> Right?
> 
> Sounds BSD-like.
> 
> Maybe the company can save its money ;)

Someone who knows antlr will be able to modify it as required much
faster than others so I think it would still be beneficial.

Just my 2c.


From attodorov at gmail.com  Wed Aug 23 03:40:19 2006
From: attodorov at gmail.com (Angel Todorov)
Date: Wed Aug 23 03:40:23 2006
Subject: [antlr-interest] ECMAScript grammar for ANTLR v2
Message-ID: <4ac1e6310608230340l197b57f6i3cc30c95fa33ccfd@mail.gmail.com>

Hi all,

I also tried the ECMAscript grammar for ANTLR 2 , posted in the site,
but it also doesn't seem to work - the generated parser doesn't
recognize any javascript input. Are there any plans to fix that in the
near future ? Thanks very much.

Regards,
Angel
From open.zone at virgin.net  Wed Aug 23 04:00:22 2006
From: open.zone at virgin.net (Micheal J)
Date: Wed Aug 23 04:03:07 2006
Subject: [antlr-interest] ECMAScript grammar for ANTLR v2
In-Reply-To: <4ac1e6310608230340l197b57f6i3cc30c95fa33ccfd@mail.gmail.com>
Message-ID: <008101c6c6a3$561f7970$c704a8c0@hercules>

Hi,

> I also tried the ECMAscript grammar for ANTLR 2 , posted in 
> the site, but it also doesn't seem to work - the generated 
> parser doesn't recognize any javascript input. Are there any 
> plans to fix that in the near future ? Thanks very much.
> 
> Regards,
> Angel

It seems you have a need for a working ECMAScript ANTLR grammar. Two
options:

You could take either of the existing non-working grammars (v2 is probably
the logical choice at this point given the wealth of working samples and
documentation[1*]) and improve it till it does what you want.

Or, try to find out what happened to Cesar's ANTLR grammar. He was writing
an ECMAScript compiler for the Mono project using ANTLR a few years ago (he
eventually switched to using a port of Rhino).

In either case, you could then contribute the improved grammar back to the
grammar repository.


Micheal

[1*]	V3 however has the useful AntlrWorks IDE.

-----------------------
The best way to contact me is via the list/forum. My time is very limited.

From open.zone at virgin.net  Wed Aug 23 04:03:32 2006
From: open.zone at virgin.net (Micheal J)
Date: Wed Aug 23 04:06:12 2006
Subject: [antlr-interest] ECMAScript grammar for ANTLR v2
In-Reply-To: <4ac1e6310608230340l197b57f6i3cc30c95fa33ccfd@mail.gmail.com>
Message-ID: <008a01c6c6a3$c7a472d0$c704a8c0@hercules>

> Hi all,
> 
> I also tried the ECMAscript grammar for ANTLR 2 , posted in 
> the site, but it also doesn't seem to work - the generated 
> parser doesn't recognize any javascript input. Are there any 
> plans to fix that in the near future ? Thanks very much.
> 
> Regards,
> Angel

Also, search for Anakreon's ASPA project (not the contributed grammars on
antlr.org).

Micheal

From dwashington at gmx.net  Wed Aug 23 04:13:21 2006
From: dwashington at gmx.net (Denis Washington)
Date: Wed Aug 23 04:13:16 2006
Subject: [antlr-interest] Variable visibility problem with ANTLR 3code
	generation
In-Reply-To: <20060822163432.1A7111767@mail.intersystems.com>
References: <20060822163432.1A7111767@mail.intersystems.com>
Message-ID: <44EC3851.4000102@gmx.net>

Jim Idle wrote:
> -----Original Message-----
> From: Denis Washington [mailto:dwashington@gmx.net] 
> Sent: Tuesday, August 22, 2006 1:39 AM
> To: Jim Idle; antlr-interest@antlr.org
> Subject: Re: [antlr-interest] Variable visibility problem with ANTLR 3code generation
>
>   
>> Jim Idle wrote:
>>     
>>> -----Original Message-----
>>> For the following rule:
>>>
>>> declarationStatement returns [DeclarationStatement ds]
>>>     :   var=varOrConstDeclaration
>>>         {
>>>             $ds = new DeclarationStatement($var);
>>>             $ds.setSource($var);
>>>         }
>>>     ;
>>>
>>> I get from ANTLR (3.0b3):
>>>
>>> schlicht.g:240:9: missing attribute access on rule scope: var
>>>   
>>> Hi Jim,
>>>       
>> The rule varOrConstDeclaration is returning something, exactly one 
>> element, through it's action code. so it should work.
>>
>>     
> OK - off the top of my head then: is this parser producing a tree output?  If it is then your return value from varOrConstDeclaration will not be a single value but will include start and stop (offsets or trees) as well as your own declarations. Hence you would get the message you show.
>
> If you have:
>
> options
> {
> 	output = AST;
> }
> ...
> varOrConstDeclaration returns [ String answer]
> : ...
>
> Then you would need
>
> declarationStatement returns [DeclarationStatement ds]
>      :   var=varOrConstDeclaration
>          {
>              $ds = new DeclarationStatement($var.answer);
>              $ds.setSource($var.answer);
>          }
>      ;
>
> Try that and see.
>
> Jim
>
>   
Thanks for the hint, but the parser has no tree output.

Denis
From dave at badgers-in-foil.co.uk  Wed Aug 23 04:54:22 2006
From: dave at badgers-in-foil.co.uk (David Holroyd)
Date: Wed Aug 23 04:54:26 2006
Subject: [antlr-interest] ECMAScript grammar for ANTLR v2
In-Reply-To: <4ac1e6310608230340l197b57f6i3cc30c95fa33ccfd@mail.gmail.com>
References: <4ac1e6310608230340l197b57f6i3cc30c95fa33ccfd@mail.gmail.com>
Message-ID: <20060823115422.GB20685@badgers-in-foil.co.uk>

On Wed, Aug 23, 2006 at 01:40:19PM +0300, Angel Todorov wrote:
> I also tried the ECMAscript grammar for ANTLR 2 

Which version of ECMSscript?  I am working on a grammar for a language
which is very similar (though possibly not the same) as ECMAscript4.


ta,
dave

-- 
http://david.holroyd.me.uk/
From donnie-armstrong at mn.rr.com  Wed Aug 23 05:24:46 2006
From: donnie-armstrong at mn.rr.com (donnie-armstrong@mn.rr.com)
Date: Wed Aug 23 05:24:51 2006
Subject: [antlr-interest] www.antlr.org down?
Message-ID: <c591e3b9afaf.afafc591e3b9@rdc-kc.rr.com>


I have tried from two different locations, connection refused.

Donnie
From donnie-armstrong at mn.rr.com  Wed Aug 23 05:26:24 2006
From: donnie-armstrong at mn.rr.com (donnie-armstrong@mn.rr.com)
Date: Wed Aug 23 05:26:28 2006
Subject: [antlr-interest] www.antlr.org down?
Message-ID: <fde5dac9d49b.d49bfde5dac9@rdc-kc.rr.com>

I have tried from two different locations, same result... connection
refused.

sorry if it double posted.  webmail...

Donnie
From parrt at cs.usfca.edu  Wed Aug 23 08:15:58 2006
From: parrt at cs.usfca.edu (Terence Parr)
Date: Wed Aug 23 08:16:04 2006
Subject: [antlr-interest] www.antlr.org down?
In-Reply-To: <fde5dac9d49b.d49bfde5dac9@rdc-kc.rr.com>
References: <fde5dac9d49b.d49bfde5dac9@rdc-kc.rr.com>
Message-ID: <DBFBE4A9-BF65-4C5B-9ED5-C831DFF7E33E@cs.usfca.edu>


On Aug 23, 2006, at 5:26 AM, donnie-armstrong@mn.rr.com wrote:

> I have tried from two different locations, same result... connection
> refused.

Sorry about that...as usual confluence running out of memory.  Moving  
to a bigger server soon.  it's restarting.

Ter

From jimi at intersystems.com  Wed Aug 23 08:49:20 2006
From: jimi at intersystems.com (Jim Idle)
Date: Wed Aug 23 08:49:24 2006
Subject: [antlr-interest] Variable visibility problem with ANTLR 3code
	generation
Message-ID: <20060823154922.258411761@mail.intersystems.com>



-----Original Message-----
From: Denis Washington [mailto:dwashington@gmx.net] 
Sent: Wednesday, August 23, 2006 4:13 AM

>>> declarationStatement returns [DeclarationStatement ds]
>>>     :   var=varOrConstDeclaration
>>>         {
>>>             $ds = new DeclarationStatement($var);
>>>             $ds.setSource($var);
>>>         }
>>>     ;
>>>

OK, I see what is happening now. ANTLR is seeing your $ds.setSource as a reference to an attribute of $ds as if you had done this:

Returns [ int setSource, int something else]


This is because you can reference attributes of a $ref such as $ref.text and $ref.tree etc. You will have to disambiguate this a bit.

Either:

declarationStatement returns [DeclarationStatement ds]
:   var=varOrConstDeclaration
    {
	   DeclarationStatement		localDS;

         localDS  = new DeclarationStatement($var);
         localDS.setSource($var);
	   $ds	= localDS;
    }
;

Or it is possible that the following might work (have not tried this though):

($ds).setSource($var);
 
If the above does not work, then perhaps it should as a way to distinguish between label attributes and object elements of the label type.

Jim

-- 
No virus found in this outgoing message.
Checked by AVG Free Edition.
Version: 7.1.405 / Virus Database: 268.11.5/425 - Release Date: 8/22/2006
 
From zhixueyong at hotmail.com  Wed Aug 23 09:09:20 2006
From: zhixueyong at hotmail.com (Xue Yong Zhi)
Date: Wed Aug 23 09:10:02 2006
Subject: [antlr-interest] Re: ECMAScript grammar for ANTLR v2
In-Reply-To: <4ac1e6310608230340l197b57f6i3cc30c95fa33ccfd@mail.gmail.com>
References: <4ac1e6310608230340l197b57f6i3cc30c95fa33ccfd@mail.gmail.com>
Message-ID: <44EC7DB0.8060406@hotmail.com>

Angel Todorov wrote:
> Hi all,
> 
> I also tried the ECMAscript grammar for ANTLR 2 , posted in the site,
> but it also doesn't seem to work - the generated parser doesn't
> recognize any javascript input. Are there any plans to fix that in the
> near future ? Thanks very much.
> 
> Regards,
> Angel
> 

I have looked the ECMAscript grammar posted on antlr.org when it came 
out. Basically it translated the ECMAscript specification to antlr's 
syntax, but to make it really work requires lots of extra efforts.

-- 
Xue Yong Zhi
http://seclib.blogspot.com

From zhixueyong at hotmail.com  Wed Aug 23 09:09:57 2006
From: zhixueyong at hotmail.com (Xue Yong Zhi)
Date: Wed Aug 23 09:16:10 2006
Subject: [antlr-interest] Re: ECMAScript grammar for ANTLR v2
In-Reply-To: <4ac1e6310608230340l197b57f6i3cc30c95fa33ccfd@mail.gmail.com>
References: <4ac1e6310608230340l197b57f6i3cc30c95fa33ccfd@mail.gmail.com>
Message-ID: <echukk$pcj$2@sea.gmane.org>

Angel Todorov wrote:
> Hi all,
> 
> I also tried the ECMAscript grammar for ANTLR 2 , posted in the site,
> but it also doesn't seem to work - the generated parser doesn't
> recognize any javascript input. Are there any plans to fix that in the
> near future ? Thanks very much.
> 
> Regards,
> Angel
> 

I have looked the ECMAscript grammar posted on antlr.org when it came 
out. Basically it translated the ECMAscript specification to antlr's 
syntax, but to make it really work requires lots of extra efforts.

-- 
Xue Yong Zhi
http://seclib.blogspot.com

From prashant.deva at gmail.com  Wed Aug 23 11:32:07 2006
From: prashant.deva at gmail.com (Prashant Deva)
Date: Wed Aug 23 11:32:09 2006
Subject: [antlr-interest] www.antlr.org down?
In-Reply-To: <DBFBE4A9-BF65-4C5B-9ED5-C831DFF7E33E@cs.usfca.edu>
References: <fde5dac9d49b.d49bfde5dac9@rdc-kc.rr.com>
	<DBFBE4A9-BF65-4C5B-9ED5-C831DFF7E33E@cs.usfca.edu>
Message-ID: <41fed8f80608231132l6c8670efy8d7de2f516ea9eb8@mail.gmail.com>

Maybe you should file a bug report with confluence regarding the memory
issues.

On 8/23/06, Terence Parr <parrt@cs.usfca.edu> wrote:
>
>
> On Aug 23, 2006, at 5:26 AM, donnie-armstrong@mn.rr.com wrote:
>
> > I have tried from two different locations, same result... connection
> > refused.
>
> Sorry about that...as usual confluence running out of memory.  Moving
> to a bigger server soon.  it's restarting.
>
> Ter
>
>


-- 
Prashant Deva
Creator, ANTLR Studio
Founder, Placid Systems, www.placidsystems.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060823/d7e07986/attachment.html
From parrt at cs.usfca.edu  Wed Aug 23 11:40:17 2006
From: parrt at cs.usfca.edu (Terence Parr)
Date: Wed Aug 23 11:40:21 2006
Subject: [antlr-interest] www.antlr.org down?
In-Reply-To: <41fed8f80608231132l6c8670efy8d7de2f516ea9eb8@mail.gmail.com>
References: <fde5dac9d49b.d49bfde5dac9@rdc-kc.rr.com>
	<DBFBE4A9-BF65-4C5B-9ED5-C831DFF7E33E@cs.usfca.edu>
	<41fed8f80608231132l6c8670efy8d7de2f516ea9eb8@mail.gmail.com>
Message-ID: <51550993-94FF-46F5-A0F8-6D8F960D0960@cs.usfca.edu>

On Aug 23, 2006, at 11:32 AM, Prashant Deva wrote:

> Maybe you should file a bug report with confluence regarding the  
> memory issues.
>

Already done. ;)   they claim I'm the first one reporting this  
problem. astonishing.

Ter

From ewbank at gmail.com  Wed Aug 23 12:54:21 2006
From: ewbank at gmail.com (Bryan Ewbank)
Date: Wed Aug 23 12:54:24 2006
Subject: [antlr-interest] www.antlr.org down?
In-Reply-To: <51550993-94FF-46F5-A0F8-6D8F960D0960@cs.usfca.edu>
References: <fde5dac9d49b.d49bfde5dac9@rdc-kc.rr.com>
	<DBFBE4A9-BF65-4C5B-9ED5-C831DFF7E33E@cs.usfca.edu>
	<41fed8f80608231132l6c8670efy8d7de2f516ea9eb8@mail.gmail.com>
	<51550993-94FF-46F5-A0F8-6D8F960D0960@cs.usfca.edu>
Message-ID: <dd3a065f0608231254o6988e450m6b9d12cdca41c9fe@mail.gmail.com>

Nah.  They just forgot...

On 8/23/06, Terence Parr <parrt@cs.usfca.edu> wrote:
> On Aug 23, 2006, at 11:32 AM, Prashant Deva wrote:
>
> > Maybe you should file a bug report with confluence regarding the
> > memory issues.
> >
>
> Already done. ;)   they claim I'm the first one reporting this
> problem. astonishing.
>
> Ter
>
>
From charles.felstead at gmail.com  Wed Aug 23 12:59:07 2006
From: charles.felstead at gmail.com (Charles Felstead)
Date: Wed Aug 23 12:59:10 2006
Subject: [antlr-interest] Performance of ANTLR-generated lexer/parsers
Message-ID: <97b85e750608231259t4a91e79cia1f689ab6bf1874f@mail.gmail.com>

Hello,

I've used ANTLR 2.7.6 to create a C++ parser for a simple XML file. The goal
was to compare some metrics with a Xerces-C++ parser (uses DOM).

The first thing we found out (as we expected) is that the ANTLR-generated
parser is much MUCH smaller in static footprint. Regarding the dynamic
footprint, we know the Xerces-based parser uses more memory...but we don't
have all the numbers yet.

Now what really surprised us is the speed of the parsers. We were expecting
the ANTLR-generated parser to be much faster than the Xerces-based parser.
After all, the ANTLR parser is specific to that one type of file I'm parsing
whereas the Xerces is generic. Turns out the Xerces parser, is about 15-25%
faster than the ANTLR one??!

So, my question is, can I flip some switches or configure the
ANTLR-generated parser to improve the performance??

Thanks,
Charles.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060823/11c4e1fa/attachment.html
From lgcraymer at yahoo.com  Wed Aug 23 13:40:24 2006
From: lgcraymer at yahoo.com (Loring Craymer)
Date: Wed Aug 23 13:40:26 2006
Subject: [antlr-interest] Performance of ANTLR-generated lexer/parsers
In-Reply-To: <97b85e750608231259t4a91e79cia1f689ab6bf1874f@mail.gmail.com>
Message-ID: <20060823204024.84781.qmail@web55909.mail.re3.yahoo.com>

Replace the lexer with a flex-based one; lexing is where the biggest performance hit with ANTLR 2 is.

--Loring

Charles Felstead <charles.felstead@gmail.com> wrote: Hello,
 
 I've used ANTLR 2.7.6 to create a C++ parser for a simple XML file. The goal was to compare some metrics with a Xerces-C++ parser (uses DOM). 
 
 The first thing we found out (as we expected) is that the ANTLR-generated parser is much MUCH smaller in static footprint. Regarding the dynamic footprint, we know the Xerces-based parser uses more memory...but we don't have all the numbers yet.
 
 Now what really surprised us is the speed of the parsers. We were expecting the ANTLR-generated parser to be much faster than the Xerces-based parser. After all, the ANTLR parser is specific to that one type of file I'm parsing whereas the Xerces is generic. Turns out the Xerces parser, is about 15-25% faster than the ANTLR one??!
 
 So, my question is, can I flip some switches or configure the ANTLR-generated parser to improve the performance??
 
 Thanks,
 Charles.
 

 				
---------------------------------
Do you Yahoo!?
 Next-gen email? Have it all with the  all-new Yahoo! Mail.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060823/0563b1ed/attachment.html
From parrt at cs.usfca.edu  Wed Aug 23 13:51:01 2006
From: parrt at cs.usfca.edu (Terence Parr)
Date: Wed Aug 23 13:51:04 2006
Subject: [antlr-interest] Performance of ANTLR-generated lexer/parsers
In-Reply-To: <97b85e750608231259t4a91e79cia1f689ab6bf1874f@mail.gmail.com>
References: <97b85e750608231259t4a91e79cia1f689ab6bf1874f@mail.gmail.com>
Message-ID: <DFBC4154-E0AC-401F-9F7B-4FE11BD9FD9F@cs.usfca.edu>

Hi.  You might try ANTLR v3, which is 2x or 3x due to lexer and other  
junk.  still in beta.

Ter
On Aug 23, 2006, at 12:59 PM, Charles Felstead wrote:

> Hello,
>
> I've used ANTLR 2.7.6 to create a C++ parser for a simple XML file.  
> The goal was to compare some metrics with a Xerces-C++ parser (uses  
> DOM).
>
> The first thing we found out (as we expected) is that the ANTLR- 
> generated parser is much MUCH smaller in static footprint.  
> Regarding the dynamic footprint, we know the Xerces-based parser  
> uses more memory...but we don't have all the numbers yet.
>
> Now what really surprised us is the speed of the parsers. We were  
> expecting the ANTLR-generated parser to be much faster than the  
> Xerces-based parser. After all, the ANTLR parser is specific to  
> that one type of file I'm parsing whereas the Xerces is generic.  
> Turns out the Xerces parser, is about 15-25% faster than the ANTLR  
> one??!
>
> So, my question is, can I flip some switches or configure the ANTLR- 
> generated parser to improve the performance??
>
> Thanks,
> Charles.

From porcelli at uol.com.br  Wed Aug 23 14:14:50 2006
From: porcelli at uol.com.br (Alexandre Porcelli)
Date: Wed Aug 23 14:14:59 2006
Subject: [antlr-interest] v3 - How to deal with include Files?
Message-ID: <ee873c070608231414w66992335lcadb8959e2d3858b@mail.gmail.com>

Hi All,

  Id like to know how to deal with include Files?

   In v2 there is TokenStreamSelector, how can I solve a include file
problem using v3?

Best Regards,
Alexandre Porcelli
From sandy.pec at gmail.com  Wed Aug 23 21:46:09 2006
From: sandy.pec at gmail.com (Sandeep Gupta)
Date: Wed Aug 23 21:46:12 2006
Subject: [antlr-interest] ANTLRWorks Update
Message-ID: <6368ffc60608232146q1dd5b488tc4aea8bb3bd7468b@mail.gmail.com>

Ter,

You talked about an update to ANLTRWorks On Aug 21. Unable to find the
update on the website. If you could let me know when are the updates going
to be posted.

-- Sandeep
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060824/12f3132f/attachment.html
From parrt at cs.usfca.edu  Wed Aug 23 22:27:09 2006
From: parrt at cs.usfca.edu (Terence Parr)
Date: Wed Aug 23 22:27:13 2006
Subject: [antlr-interest] ANTLRWorks Update
In-Reply-To: <6368ffc60608232146q1dd5b488tc4aea8bb3bd7468b@mail.gmail.com>
References: <6368ffc60608232146q1dd5b488tc4aea8bb3bd7468b@mail.gmail.com>
Message-ID: <E9CC4B9B-99EF-48A0-A7DF-95A26067374D@cs.usfca.edu>


On Aug 23, 2006, at 9:46 PM, Sandeep Gupta wrote:

> Ter,
>
> You talked about an update to ANLTRWorks On Aug 21. Unable to find  
> the update on the website. If you could let me know when are the  
> updates going to be posted.
>

I hope to release a 3.0b4 tomorrow and then Jean can release AW when  
he has time. :)

Terence

From parrt at cs.usfca.edu  Thu Aug 24 11:39:03 2006
From: parrt at cs.usfca.edu (Terence Parr)
Date: Thu Aug 24 11:39:09 2006
Subject: [antlr-interest] ANTLR 3.0b4 released
Message-ID: <057B3DC5-BD8D-48B5-A0F5-AD451473AA65@cs.usfca.edu>

Get it while it's hot.  new C# target and lots of bug fixes...some  
other targets updated as well.

http://www.antlr.org/v3/index.html

Ter
From dilipe at coreobjects.com  Thu Aug 24 23:35:31 2006
From: dilipe at coreobjects.com (Dilip Easwaran)
Date: Thu Aug 24 23:33:30 2006
Subject: [antlr-interest] vbscript support
Message-ID: <165601c6c810$abbb7960$e403a8c0@coreobjects.com>

Hi ,

    Is there language support for VBScript?

Thanks,

Dilip
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060825/b74553cd/attachment.html
From open.zone at virgin.net  Fri Aug 25 03:52:38 2006
From: open.zone at virgin.net (Micheal J)
Date: Fri Aug 25 03:55:24 2006
Subject: [antlr-interest] vbscript support
In-Reply-To: <165601c6c810$abbb7960$e403a8c0@coreobjects.com>
Message-ID: <004a01c6c834$959c9780$c704a8c0@hercules>

Care to elaborate?
 
Micheal

-----------------------
The best way to contact me is via the list/forum. My time is very limited. 

-----Original Message-----
From: antlr-interest-bounces@antlr.org
[mailto:antlr-interest-bounces@antlr.org] On Behalf Of Dilip Easwaran
Sent: 25 August 2006 07:36
To: antlr-interest@antlr.org
Subject: [antlr-interest] vbscript support


Hi ,
 
    Is there language support for VBScript?
 
Thanks,
 
Dilip

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060825/ba79952f/attachment.html
From open.zone at virgin.net  Fri Aug 25 04:09:08 2006
From: open.zone at virgin.net (Micheal J)
Date: Fri Aug 25 04:11:50 2006
Subject: [antlr-interest] ANTLR 3.0b4 released
In-Reply-To: <057B3DC5-BD8D-48B5-A0F5-AD451473AA65@cs.usfca.edu>
Message-ID: <005101c6c836$e49b73e0$c704a8c0@hercules>

Hi,

> Get it while it's hot.  new C# target and lots of bug fixes...some  
> other targets updated as well.
> 
> http://www.antlr.org/v3/index.html


Any dates for the corresponding AntlrWorks release?

Micheal

-----------------------
The best way to contact me is via the list/forum. My time is very limited.

From parrt at cs.usfca.edu  Fri Aug 25 08:33:17 2006
From: parrt at cs.usfca.edu (Terence Parr)
Date: Fri Aug 25 08:33:21 2006
Subject: [antlr-interest] ANTLR 3.0b4 released
In-Reply-To: <005101c6c836$e49b73e0$c704a8c0@hercules>
References: <005101c6c836$e49b73e0$c704a8c0@hercules>
Message-ID: <84195BEB-56C9-4E50-BEF7-32A3254AADE6@cs.usfca.edu>


On Aug 25, 2006, at 4:09 AM, Micheal J wrote:

> Hi,
>
>> Get it while it's hot.  new C# target and lots of bug fixes...some
>> other targets updated as well.
>>
>> http://www.antlr.org/v3/index.html
>
>
> Any dates for the corresponding AntlrWorks release?

Jean is thinking Saturday :)

Terence

From dieter_frej at gmx.net  Fri Aug 25 10:38:31 2006
From: dieter_frej at gmx.net (Dieter Frej)
Date: Fri Aug 25 10:38:36 2006
Subject: [antlr-interest] v3: conformance of current Java 1.5 grammar
Message-ID: <20060825173831.7570@gmx.net>

Hi everbody,

some time ago, I had some spare time and I checked the conformance
of the current Java 1.5 grammar to the Java Language Specification 3.
And I was really surprised. I attached a file listing the rules and
their corresponding page number in the jls3 pdf. To increase the 
conformity I renamed some rules.

I also attached the changed java grammar. So far, I had no time to
look into overwriting the method, so that exceptions are not
catched by antlr. If this is done (has anyone does this yet?), I can
start compiling the JCK again...

- Didi
-- 


Der GMX SmartSurfer hilft bis zu 70% Ihrer Onlinekosten zu sparen!
Ideal f?r Modem und ISDN: http://www.gmx.net/de/go/smartsurfer
-------------- next part --------------
/**
 * A Java 1.5 grammar for ANTLR v3 derived from the spec
 *
 * This is a very close representation of the spec; the changes
 * are comestic (remove left recursion) and also fixes (the spec
 * isn't exactly perfect). I have run this on the 1.4.2 source
 * and some nasty looking enums from 1.5, but have not really
 * tested for 1.5 compatibility.
 *
 * I built this with:
 * java -Xmx300M org.antlr.Tool java.g
 * and got two errors that are ok:
 * java.g:691:9: Decision can match input such as
 *   "'0'..'9'{'E', 'e'}{'+', '-'}'0'..'9'{'D', 'F', 'd', 'f'}"
 *   using multiple alternatives: 3, 4
 * As a result, alternative(s) 4 were disabled for that input
 * java.g:734:35: Decision can match input such as "{'$', 'A'..'Z',
 *   '_', 'a'..'z', '\u00C0'..'\u00D6', '\u00D8'..'\u00F6',
 *   '\u00F8'..'\u1FFF', '\u3040'..'\u318F', '\u3300'..'\u337F',
 *   '\u3400'..'\u3D2D', '\u4E00'..'\u9FFF', '\uF900'..'\uFAFF'}"
 *   using multiple alternatives: 1, 2
 * As a result, alternative(s) 2 were disabled for that input
 *
 * You can turn enum on/off as a keyword :)
 *
 * Version 1.0 -- initial release July 5, 2006 (requires 3.0b2)
 *
 * Primary author: Terence Parr, July 2006
 */
grammar JavaParser;
options {
	k=2;
	backtrack=true;
	memoize=true;
}

@lexer::members {
	protected boolean enumIsKeyword = false;
}

// starting point for parsing a java file
compilationUnit
	:	annotations?
		packageDeclaration?
      		importDeclaration*
      		typeDeclaration*
	;

packageDeclaration
	:	'package' qualifiedIdentifier ';'
	;

importDeclaration
	:	'import' 'static'? Identifier ('.' Identifier)* ('.' '*')? ';'
	;
	
typeDeclaration
	:	classOrInterfaceDeclaration
	|	';'
	;

classOrInterfaceDeclaration
	:	modifier* (classDeclaration | interfaceDeclaration)
	;
	
classDeclaration
	:	normalClassDeclaration
	|	enumDeclaration
	;
	
normalClassDeclaration
	:	'class' Identifier (typeParameters)?
		('extends' type)?
		('implements' typeList)?
		classBody
	;
	
typeParameters
	:	'<' typeParameter (',' typeParameter)* '>'
	;

typeParameter
	:	Identifier ('extends' bound)?
	;
	
bound
	:	type ('&' type)*
	;

enumDeclaration
	:	ENUM Identifier ('implements' typeList)? enumBody
	;
	
enumBody
	:	'{' enumConstants? ','? enumBodyDeclarations? '}'
	;

enumConstants
	:	enumConstant (',' enumConstant)*
	;
	
enumConstant
	:	annotations? Identifier (arguments)? (classBody)?
	;
	
enumBodyDeclarations
	:	';' (classBodyDeclaration)*
	;
	
interfaceDeclaration
	:	normalInterfaceDeclaration
	|	annotationTypeDeclaration
	;
	
normalInterfaceDeclaration
	:	'interface' Identifier typeParameter? ('extends' typeList)? interfaceBody
	;
	
typeList
	:	type (',' type)*
	;
	
classBody
	:	'{' classBodyDeclaration* '}'
	;
	
interfaceBody
	:	'{' interfaceBodyDeclaration* '}'
	;

classBodyDeclaration
	:	';'
	|	'static'? block
	|	modifier* memberDecl
	;
	
memberDecl
	:	genericMethodOrConstructorDecl
	|	methodDeclaration
	|	fieldDeclaration
	|	'void' Identifier voidMethodDeclaratorRest
	|	Identifier constructorDeclaratorRest
	|	interfaceDeclaration
	|	classDeclaration
	;
	
genericMethodOrConstructorDecl
	:	typeParameters genericMethodOrConstructorRest
	;
	
genericMethodOrConstructorRest
	:	(type | 'void') Identifier methodDeclaratorRest
	|	Identifier constructorDeclaratorRest
	;

methodDeclaration
	:	type Identifier methodDeclaratorRest
	;

fieldDeclaration
	:	type variableDeclarators ';'
	;
	
interfaceBodyDeclaration
	:	';'
	|	modifier* interfaceMemberDecl
	;

interfaceMemberDecl
	:	interfaceMethodOrFieldDecl
	|	interfaceGenericMethodDecl
	|	'void' Identifier voidInterfaceMethodDeclaratorRest
	|	interfaceDeclaration
	|	classDeclaration
	;
	
interfaceMethodOrFieldDecl
	:	type Identifier interfaceMethodOrFieldRest
	;
	
interfaceMethodOrFieldRest
	:	constantDeclaratorsRest ';'
	|	interfaceMethodDeclaratorRest
	;
	
methodDeclaratorRest
	:	formalParameters ('[' ']')*
		('throws' qualifiedIdentifierList)?
		(methodBody | ';')
	;
	
voidMethodDeclaratorRest
	:	formalParameters ('throws' qualifiedIdentifierList)?
		(methodBody | ';')
	;
	
interfaceMethodDeclaratorRest
	:	formalParameters ('[' ']')* ('throws' qualifiedIdentifierList)? ';'
	;
	
interfaceGenericMethodDecl
	:	typeParameters (type | 'void') Identifier
		interfaceMethodDeclaratorRest
	;
	
voidInterfaceMethodDeclaratorRest
	:	formalParameters ('throws' qualifiedIdentifierList)? ';'
	;
	
constructorDeclaratorRest
	:	formalParameters ('throws' qualifiedIdentifierList)? methodBody
	;

constantDeclarator
	:	Identifier constantDeclaratorRest
	;
	
variableDeclarators
	:	variableDeclarator (',' variableDeclarator)*
	;

variableDeclaratorsRest
	:	variableDeclaratorRest (',' variableDeclarator)*
	;
	
variableDeclarator
	:	Identifier variableDeclaratorRest
	;
	
variableDeclaratorRest
	:	('[' ']')+ ('=' variableInitializer)?
	|	'=' variableInitializer
	|
	;

constantDeclaratorsRest
	:   constantDeclaratorRest (',' constantDeclarator)*
	;

constantDeclaratorRest
	:	('[' ']')* '=' variableInitializer
	;
	
variableDeclaratorId
	:	Identifier ('[' ']')*
	;

variableInitializer
	:	arrayInitializer
	|	expression
	;

arrayInitializer
	:	'{' (variableInitializer (',' variableInitializer)* (',')?)? '}'
	;

modifier
	:	annotation
	|	'public'
	|	'protected'
	|	'private'
	|	'static'
	|	'abstract'
	|	'final'
	|	'native'
	|	'synchronized'
	|	'transient'
	|	'volatile'
	|	'strictfp'
	;


packageOrTypeName
	:	Identifier ('.' Identifier)*
	;

enumConstantName
	:	Identifier
	;

typeName
	:	Identifier
	|	packageOrTypeName '.' Identifier
	;

type
	:	Identifier (typeArguments)? ('.' Identifier (typeArguments)?)* ('[' ']')*
	|	basicType ('[' ']')*
	;

basicType
	:	'byte'
	|	'short'
	|	'char'
	|	'int'
	|	'long'
	|	'float'
	|	'double'
	|	'boolean'
	;

variableModifier
	:	'final'
	|	annotation
	;

typeArguments
	:	'<' typeArgument (',' typeArgument)* '>'
	;
	
typeArgument
	:	type
	|	'?' (('extends' | 'super') type)?
	;
	
qualifiedIdentifierList
	:	qualifiedIdentifier (',' qualifiedIdentifier)*
	;
	
formalParameters
	:	'(' formalParameterDecls? ')'
	;

formalParameterDecls
	:	'final'? annotations? type formalParameterDeclsRest?
	;
	
formalParameterDeclsRest
	:	variableDeclaratorId (',' formalParameterDecls)?
	|	'...' variableDeclaratorId
	;
	
methodBody
	:	block
	;

qualifiedIdentifier
	:	Identifier ('.' Identifier)*
	;
	
literal	
	:	integerLiteral
	|	FloatingPointLiteral
	|	CharacterLiteral
	|	StringLiteral
	|	booleanLiteral
	|	'null'
	;

integerLiteral
	:	DecimalIntegerLiteral
	|	HexIntegerLiteral
	|	OctalIntegerLiteral
	;

booleanLiteral
	:	'true'
	|	'false'
	;

// ANNOTATIONS
annotations
	:	annotation+
	;

annotation
	:	'@' typeName ('(' (Identifier '=')? elementValue ')')?
	;
	
elementValue
	:	conditionalExpression
	|	annotation
	|	elementValueArrayInitializer
	;
	
elementValueArrayInitializer
	:	'{' (elementValue)? (',')? '}'
	;
	
annotationTypeDeclaration
	:	'@' 'interface' Identifier annotationTypeBody
	;
	
annotationTypeBody
	:	'{' (annotationTypeElementDeclarations)? '}'
	;
	
annotationTypeElementDeclarations
	:	(annotationTypeElementDeclaration) (annotationTypeElementDeclaration)*
	;

annotationTypeElementDeclaration
	:	(modifier)* annotationTypeElementRest
	;
	
annotationTypeElementRest
	:	type Identifier annotationMethodOrConstantRest ';'
	|	classDeclaration
	|	interfaceDeclaration
	|	enumDeclaration
	|	annotationTypeDeclaration
	;
	
annotationMethodOrConstantRest
	:	annotationMethodRest
	|	annotationConstantRest
	;
	
annotationMethodRest
 	:	'(' ')' (defaultValue)?
 	;
 	
annotationConstantRest
 	:	variableDeclarators
 	;
 	
defaultValue
 	:	'default' elementValue
 	;

// STATEMENTS / BLOCKS
block
	:	'{' blockStatements '}'
	;
	
blockStatements
	:	blockStatement*
	;
	
blockStatement
	:	localVariableDeclarationStatement
	|	classOrInterfaceDeclaration
	|	(Identifier ':')? statement
	;
	
localVariableDeclarationStatement
	:	('final')? type variableDeclarators ';'
	;
	
statement
	:	block
	|	'assert' expression (':' expression)? ';'
	|	'if' parExpression statement ('else' statement)?
	|	'for' '(' forControl ')' statement
	|	'while' parExpression statement
	|	'do' statement 'while' parExpression ';'
	|	'try' block
		(	catches 'finally' block
		|	catches
		|	'finally' block
		)
	|	'switch' parExpression '{' switchBlockStatementGroups '}'
	|	'synchronized' parExpression block
	|	'return' expression? ';'
	|	'throw' expression ';'
	|	'break' Identifier? ';'
	|	'continue' Identifier? ';'
	|	';'
	|	statementExpression ';'
	|	Identifier ':' statement
	;
	
catches
	:	catchClause (catchClause)*
	;
	
catchClause
	:	'catch' '(' formalParameter ')' block
	;

formalParameter
	:	variableModifier* type variableDeclaratorId
	;
	
switchBlockStatementGroups
	:	(switchBlockStatementGroup)*
	;
	
switchBlockStatementGroup
	:	switchLabel blockStatement*
	;
	
switchLabel
	:	'case' constantExpression ':'
	|	'case' enumConstantName ':'
	|	'default' ':'
	;
	
moreStatementExpressions
	:	(',' statementExpression)*
	;

forControl
	:	forVarControl
	|	forInit ';' expression? ';' forUpdate?
	;

forInit
	:	'final'? type variableDeclarators
	|	statementExpressionList
	;
	
forVarControl
	:	'final'? (annotation)? type Identifier forVarControlRest
	;

forVarControlRest
	:	variableDeclaratorsRest ';' expression? ';' forUpdate?
	|	':' expression
	;

forUpdate
	:	statementExpressionList
	;

// EXPRESSIONS
parExpression
	:	'(' expression ')'
	;

statementExpressionList
	:	statementExpression (',' statementExpression)*
	;
	
statementExpression
	:	expression
	;

constantExpression
	:	expression
	;
	
expression
	:	conditionalExpression (assignmentOperator expression)?
	;
	
assignmentOperator
	:	'='
	|	'+='
	|	'-='
	|	'*='
	|	'/='
	|	'&='
	|	'|='
	|	'^='
	|	'%='
	|	'<' '<' '='
	|	'>' '>' '='
	|	'>' '>' '>' '='
	;

conditionalExpression
	:	conditionalOrExpression ('?' expression ':' expression)?
	;

conditionalOrExpression
	:	conditionalAndExpression ('||' conditionalAndExpression)*
	;

conditionalAndExpression
	:	inclusiveOrExpression ('&&' inclusiveOrExpression)*
	;

inclusiveOrExpression
	:	exclusiveOrExpression ('|' exclusiveOrExpression)*
	;

exclusiveOrExpression
	:	andExpression ('^' andExpression)*
	;

andExpression
	:	equalityExpression ('&' equalityExpression)*
	;

equalityExpression
	:	instanceOfExpression (('==' | '!=') instanceOfExpression)*
	;

instanceOfExpression
	:	relationalExpression ('instanceof' type)?
	;

relationalExpression
	:	shiftExpression (relationalOp shiftExpression)*
	;
	
relationalOp
	:	('<' '=' | '>' '=' | '<' | '>')
	;

shiftExpression
	:	additiveExpression (shiftOp additiveExpression)*
	;

// TODO: need a sem pred to check column on these >>>
shiftOp
	:	('<' '<' | '>' '>' '>' | '>' '>')
	;

additiveExpression
	:	multiplicativeExpression (('+' | '-') multiplicativeExpression)*
	;

multiplicativeExpression
	:	unaryExpression (('*' | '/' | '%') unaryExpression)*
	;
	
unaryExpression
	:	'+' unaryExpression
	|	'-' unaryExpression
	|	'++' primary
	|	'--' primary
	|	unaryExpressionNotPlusMinus
	;

unaryExpressionNotPlusMinus
	:	'~' unaryExpression
	| 	'!' unaryExpression
	|	castExpression
	|	primary selector* ('++' | '--')?
	;

castExpression
	:	'(' basicType ')' unaryExpression
	|	'(' (expression | type) ')' unaryExpressionNotPlusMinus
	;

primary
	:	parExpression
	|	nonWildcardTypeArguments (explicitGenericInvocationSuffix | 'this' arguments)
	|	'this' (arguments)?
	|	'super' superSuffix
	|	literal
	|	'new' creator
	|	Identifier ('.' Identifier)* (identifierSuffix)?
	|	basicType ('[' ']')* '.' 'class'
	|	'void' '.' 'class'
	;

identifierSuffix
	:	('[' ']')+ '.' 'class'
	|	('[' expression ']')+ // can also be matched by selector, but do here
	|	arguments
	|	'.' 'class'
	|	'.' explicitGenericInvocation
	|	'.' 'this'
	|	'.' 'super' arguments
	|	'.' 'new' (nonWildcardTypeArguments)? innerCreator
	;
	
creator
	:	nonWildcardTypeArguments? createdName
		(arrayCreatorRest | classCreatorRest)
	;

createdName
	:	Identifier nonWildcardTypeArguments?
		('.' Identifier nonWildcardTypeArguments?)*
	|	basicType
	;
	
innerCreator
	:	Identifier classCreatorRest
	;

arrayCreatorRest
	:	'['
	      	(	']' ('[' ']')* arrayInitializer
		|	expression ']' ('[' expression ']')* ('[' ']')*
		)
	;

classCreatorRest
	:	arguments classBody?
	;
	
explicitGenericInvocation
	:	nonWildcardTypeArguments explicitGenericInvocationSuffix
	;
	
nonWildcardTypeArguments
	:	'<' typeList '>'
	;
	
explicitGenericInvocationSuffix
	:	'super' superSuffix
	|	Identifier arguments
	;
	
selector
	:	'.' Identifier (arguments)?
	|	'.' 'this'
	|	'.' 'super' superSuffix
	|	'.' 'new' (nonWildcardTypeArguments)? innerCreator
	|	'[' expression ']'
	;
	
superSuffix
	:	arguments
	|	'.' Identifier (arguments)?
	;

arguments
	:	'(' statementExpressionList? ')'
	;



// LEXER
HexIntegerLiteral
	:	'0' ('x' | 'X') HexDigit+ IntegerTypeSuffix?
	;

DecimalIntegerLiteral
	:	('0' | '1'..'9' '0'..'9'*) IntegerTypeSuffix?
	;

OctalIntegerLiteral
	:	'0' ('0'..'7')+ IntegerTypeSuffix?
	;

fragment
HexDigit
	:	('0'..'9' | 'a'..'f' | 'A'..'F')
	;

fragment
IntegerTypeSuffix
	:	('l' | 'L')
	;

FloatingPointLiteral
	:	('0'..'9')+ '.' ('0'..'9')* Exponent? FloatTypeSuffix?
	|	'.' ('0'..'9')+ Exponent? FloatTypeSuffix?
	|	('0'..'9')+ Exponent FloatTypeSuffix?
	|	('0'..'9')+ Exponent? FloatTypeSuffix
	;

fragment
Exponent
	:	('e' | 'E') ('+' | '-')? ('0'..'9')+
	;

fragment
FloatTypeSuffix
	:	('f' | 'F' | 'd' | 'D')
	;

CharacterLiteral
	:	'\'' (EscapeSequence | ~('\'' | '\\')) '\''
	;

StringLiteral
	:	'"' (EscapeSequence | ~('\\' | '"'))* '"'
	;

fragment
EscapeSequence
	:	'\\' ('b' | 't' | 'n' | 'f' | 'r' | '\"' | '\'' | '\\')
	|	UnicodeEscape
	|	OctalEscape
	;

fragment
OctalEscape
	:	'\\' ('0'..'3') ('0'..'7') ('0'..'7')
	|	'\\' ('0'..'7') ('0'..'7')
	|	'\\' ('0'..'7')
	;

fragment
UnicodeEscape
	:	'\\' 'u' HexDigit HexDigit HexDigit HexDigit
	;

ENUM
	:	'enum' {if ( !enumIsKeyword ) type=Identifier;}
	;
	
Identifier 
	:	JavaLetter (JavaLetter | JavaLetterOrDigit)*
	;

// I found this char range in JavaCC's grammar, but Letter and Digit overlap.
// Still works, but...
fragment
JavaLetter
	:	'\u0024'
	|	'\u0041'..'\u005a'
	|	'\u005f'
	|	'\u0061'..'\u007a'
	|	'\u00c0'..'\u00d6'
	|	'\u00d8'..'\u00f6'
	|	'\u00f8'..'\u00ff'
	|	'\u0100'..'\u1fff'
	|	'\u3040'..'\u318f'
	|	'\u3300'..'\u337f'
	|	'\u3400'..'\u3d2d'
	|	'\u4e00'..'\u9fff'
	|	'\uf900'..'\ufaff'
	;

fragment
JavaLetterOrDigit
	:	'\u0030'..'\u0039'
	|	'\u0660'..'\u0669'
	|	'\u06f0'..'\u06f9'
	|	'\u0966'..'\u096f'
	|	'\u09e6'..'\u09ef'
	|	'\u0a66'..'\u0a6f'
	|	'\u0ae6'..'\u0aef'
	|	'\u0b66'..'\u0b6f'
	|	'\u0be7'..'\u0bef'
	|	'\u0c66'..'\u0c6f'
	|	'\u0ce6'..'\u0cef'
	|	'\u0d66'..'\u0d6f'
	|	'\u0e50'..'\u0e59'
	|	'\u0ed0'..'\u0ed9'
	|	'\u1040'..'\u1049'
	;

WS
	:	(' ' | '\r' | '\t' | '\u000C' | '\n') {channel=99;}
	;

Comment
	:	'/*' (options {greedy=false;} : . )* '*/' {channel=99;}
	;

EndOfLineComment
	:	'//' ~('\n' | '\r')* '\r'? '\n' {channel=99;}
	;
From dieter_frej at gmx.net  Fri Aug 25 10:39:52 2006
From: dieter_frej at gmx.net (Dieter Frej)
Date: Fri Aug 25 10:39:57 2006
Subject: [antlr-interest] v3: conformance of current Java 1.5 grammar
Message-ID: <20060825173952.7580@gmx.net>

Hi everbody,

some time ago, I had some spare time and I checked the conformance
of the current Java 1.5 grammar to the Java Language Specification 3.
And I was really surprised. I attached a file listing the rules and
their corresponding page number in the jls3 pdf. To increase the 
conformity I renamed some rules.

I also attached the changed java grammar. So far, I had no time to
look into overwriting the method, so that exceptions are not
catched by antlr. If this is done (has anyone does this yet?), I can
start compiling the JCK again...

- Didi
-- 


Der GMX SmartSurfer hilft bis zu 70% Ihrer Onlinekosten zu sparen!
Ideal f?r Modem und ISDN: http://www.gmx.net/de/go/smartsurfer

-- 


"Feel free" ? 10 GB Mailbox, 100 FreeSMS/Monat ...
Jetzt GMX TopMail testen: http://www.gmx.net/de/go/topmail
-------------- next part --------------
/**
 * A Java 1.5 grammar for ANTLR v3 derived from the spec
 *
 * This is a very close representation of the spec; the changes
 * are comestic (remove left recursion) and also fixes (the spec
 * isn't exactly perfect). I have run this on the 1.4.2 source
 * and some nasty looking enums from 1.5, but have not really
 * tested for 1.5 compatibility.
 *
 * I built this with:
 * java -Xmx300M org.antlr.Tool java.g
 * and got two errors that are ok:
 * java.g:691:9: Decision can match input such as
 *   "'0'..'9'{'E', 'e'}{'+', '-'}'0'..'9'{'D', 'F', 'd', 'f'}"
 *   using multiple alternatives: 3, 4
 * As a result, alternative(s) 4 were disabled for that input
 * java.g:734:35: Decision can match input such as "{'$', 'A'..'Z',
 *   '_', 'a'..'z', '\u00C0'..'\u00D6', '\u00D8'..'\u00F6',
 *   '\u00F8'..'\u1FFF', '\u3040'..'\u318F', '\u3300'..'\u337F',
 *   '\u3400'..'\u3D2D', '\u4E00'..'\u9FFF', '\uF900'..'\uFAFF'}"
 *   using multiple alternatives: 1, 2
 * As a result, alternative(s) 2 were disabled for that input
 *
 * You can turn enum on/off as a keyword :)
 *
 * Version 1.0 -- initial release July 5, 2006 (requires 3.0b2)
 *
 * Primary author: Terence Parr, July 2006
 */
grammar JavaParser;
options {
	k=2;
	backtrack=true;
	memoize=true;
}

@lexer::members {
	protected boolean enumIsKeyword = false;
}

// starting point for parsing a java file
compilationUnit
	:	annotations?
		packageDeclaration?
      		importDeclaration*
      		typeDeclaration*
	;

packageDeclaration
	:	'package' qualifiedIdentifier ';'
	;

importDeclaration
	:	'import' 'static'? Identifier ('.' Identifier)* ('.' '*')? ';'
	;
	
typeDeclaration
	:	classOrInterfaceDeclaration
	|	';'
	;

classOrInterfaceDeclaration
	:	modifier* (classDeclaration | interfaceDeclaration)
	;
	
classDeclaration
	:	normalClassDeclaration
	|	enumDeclaration
	;
	
normalClassDeclaration
	:	'class' Identifier (typeParameters)?
		('extends' type)?
		('implements' typeList)?
		classBody
	;
	
typeParameters
	:	'<' typeParameter (',' typeParameter)* '>'
	;

typeParameter
	:	Identifier ('extends' bound)?
	;
	
bound
	:	type ('&' type)*
	;

enumDeclaration
	:	ENUM Identifier ('implements' typeList)? enumBody
	;
	
enumBody
	:	'{' enumConstants? ','? enumBodyDeclarations? '}'
	;

enumConstants
	:	enumConstant (',' enumConstant)*
	;
	
enumConstant
	:	annotations? Identifier (arguments)? (classBody)?
	;
	
enumBodyDeclarations
	:	';' (classBodyDeclaration)*
	;
	
interfaceDeclaration
	:	normalInterfaceDeclaration
	|	annotationTypeDeclaration
	;
	
normalInterfaceDeclaration
	:	'interface' Identifier typeParameter? ('extends' typeList)? interfaceBody
	;
	
typeList
	:	type (',' type)*
	;
	
classBody
	:	'{' classBodyDeclaration* '}'
	;
	
interfaceBody
	:	'{' interfaceBodyDeclaration* '}'
	;

classBodyDeclaration
	:	';'
	|	'static'? block
	|	modifier* memberDecl
	;
	
memberDecl
	:	genericMethodOrConstructorDecl
	|	methodDeclaration
	|	fieldDeclaration
	|	'void' Identifier voidMethodDeclaratorRest
	|	Identifier constructorDeclaratorRest
	|	interfaceDeclaration
	|	classDeclaration
	;
	
genericMethodOrConstructorDecl
	:	typeParameters genericMethodOrConstructorRest
	;
	
genericMethodOrConstructorRest
	:	(type | 'void') Identifier methodDeclaratorRest
	|	Identifier constructorDeclaratorRest
	;

methodDeclaration
	:	type Identifier methodDeclaratorRest
	;

fieldDeclaration
	:	type variableDeclarators ';'
	;
	
interfaceBodyDeclaration
	:	';'
	|	modifier* interfaceMemberDecl
	;

interfaceMemberDecl
	:	interfaceMethodOrFieldDecl
	|	interfaceGenericMethodDecl
	|	'void' Identifier voidInterfaceMethodDeclaratorRest
	|	interfaceDeclaration
	|	classDeclaration
	;
	
interfaceMethodOrFieldDecl
	:	type Identifier interfaceMethodOrFieldRest
	;
	
interfaceMethodOrFieldRest
	:	constantDeclaratorsRest ';'
	|	interfaceMethodDeclaratorRest
	;
	
methodDeclaratorRest
	:	formalParameters ('[' ']')*
		('throws' qualifiedIdentifierList)?
		(methodBody | ';')
	;
	
voidMethodDeclaratorRest
	:	formalParameters ('throws' qualifiedIdentifierList)?
		(methodBody | ';')
	;
	
interfaceMethodDeclaratorRest
	:	formalParameters ('[' ']')* ('throws' qualifiedIdentifierList)? ';'
	;
	
interfaceGenericMethodDecl
	:	typeParameters (type | 'void') Identifier
		interfaceMethodDeclaratorRest
	;
	
voidInterfaceMethodDeclaratorRest
	:	formalParameters ('throws' qualifiedIdentifierList)? ';'
	;
	
constructorDeclaratorRest
	:	formalParameters ('throws' qualifiedIdentifierList)? methodBody
	;

constantDeclarator
	:	Identifier constantDeclaratorRest
	;
	
variableDeclarators
	:	variableDeclarator (',' variableDeclarator)*
	;

variableDeclaratorsRest
	:	variableDeclaratorRest (',' variableDeclarator)*
	;
	
variableDeclarator
	:	Identifier variableDeclaratorRest
	;
	
variableDeclaratorRest
	:	('[' ']')+ ('=' variableInitializer)?
	|	'=' variableInitializer
	|
	;

constantDeclaratorsRest
	:   constantDeclaratorRest (',' constantDeclarator)*
	;

constantDeclaratorRest
	:	('[' ']')* '=' variableInitializer
	;
	
variableDeclaratorId
	:	Identifier ('[' ']')*
	;

variableInitializer
	:	arrayInitializer
	|	expression
	;

arrayInitializer
	:	'{' (variableInitializer (',' variableInitializer)* (',')?)? '}'
	;

modifier
	:	annotation
	|	'public'
	|	'protected'
	|	'private'
	|	'static'
	|	'abstract'
	|	'final'
	|	'native'
	|	'synchronized'
	|	'transient'
	|	'volatile'
	|	'strictfp'
	;


packageOrTypeName
	:	Identifier ('.' Identifier)*
	;

enumConstantName
	:	Identifier
	;

typeName
	:	Identifier
	|	packageOrTypeName '.' Identifier
	;

type
	:	Identifier (typeArguments)? ('.' Identifier (typeArguments)?)* ('[' ']')*
	|	basicType ('[' ']')*
	;

basicType
	:	'byte'
	|	'short'
	|	'char'
	|	'int'
	|	'long'
	|	'float'
	|	'double'
	|	'boolean'
	;

variableModifier
	:	'final'
	|	annotation
	;

typeArguments
	:	'<' typeArgument (',' typeArgument)* '>'
	;
	
typeArgument
	:	type
	|	'?' (('extends' | 'super') type)?
	;
	
qualifiedIdentifierList
	:	qualifiedIdentifier (',' qualifiedIdentifier)*
	;
	
formalParameters
	:	'(' formalParameterDecls? ')'
	;

formalParameterDecls
	:	'final'? annotations? type formalParameterDeclsRest?
	;
	
formalParameterDeclsRest
	:	variableDeclaratorId (',' formalParameterDecls)?
	|	'...' variableDeclaratorId
	;
	
methodBody
	:	block
	;

qualifiedIdentifier
	:	Identifier ('.' Identifier)*
	;
	
literal	
	:	integerLiteral
	|	FloatingPointLiteral
	|	CharacterLiteral
	|	StringLiteral
	|	booleanLiteral
	|	'null'
	;

integerLiteral
	:	DecimalIntegerLiteral
	|	HexIntegerLiteral
	|	OctalIntegerLiteral
	;

booleanLiteral
	:	'true'
	|	'false'
	;

// ANNOTATIONS
annotations
	:	annotation+
	;

annotation
	:	'@' typeName ('(' (Identifier '=')? elementValue ')')?
	;
	
elementValue
	:	conditionalExpression
	|	annotation
	|	elementValueArrayInitializer
	;
	
elementValueArrayInitializer
	:	'{' (elementValue)? (',')? '}'
	;
	
annotationTypeDeclaration
	:	'@' 'interface' Identifier annotationTypeBody
	;
	
annotationTypeBody
	:	'{' (annotationTypeElementDeclarations)? '}'
	;
	
annotationTypeElementDeclarations
	:	(annotationTypeElementDeclaration) (annotationTypeElementDeclaration)*
	;

annotationTypeElementDeclaration
	:	(modifier)* annotationTypeElementRest
	;
	
annotationTypeElementRest
	:	type Identifier annotationMethodOrConstantRest ';'
	|	classDeclaration
	|	interfaceDeclaration
	|	enumDeclaration
	|	annotationTypeDeclaration
	;
	
annotationMethodOrConstantRest
	:	annotationMethodRest
	|	annotationConstantRest
	;
	
annotationMethodRest
 	:	'(' ')' (defaultValue)?
 	;
 	
annotationConstantRest
 	:	variableDeclarators
 	;
 	
defaultValue
 	:	'default' elementValue
 	;

// STATEMENTS / BLOCKS
block
	:	'{' blockStatements '}'
	;
	
blockStatements
	:	blockStatement*
	;
	
blockStatement
	:	localVariableDeclarationStatement
	|	classOrInterfaceDeclaration
	|	(Identifier ':')? statement
	;
	
localVariableDeclarationStatement
	:	('final')? type variableDeclarators ';'
	;
	
statement
	:	block
	|	'assert' expression (':' expression)? ';'
	|	'if' parExpression statement ('else' statement)?
	|	'for' '(' forControl ')' statement
	|	'while' parExpression statement
	|	'do' statement 'while' parExpression ';'
	|	'try' block
		(	catches 'finally' block
		|	catches
		|	'finally' block
		)
	|	'switch' parExpression '{' switchBlockStatementGroups '}'
	|	'synchronized' parExpression block
	|	'return' expression? ';'
	|	'throw' expression ';'
	|	'break' Identifier? ';'
	|	'continue' Identifier? ';'
	|	';'
	|	statementExpression ';'
	|	Identifier ':' statement
	;
	
catches
	:	catchClause (catchClause)*
	;
	
catchClause
	:	'catch' '(' formalParameter ')' block
	;

formalParameter
	:	variableModifier* type variableDeclaratorId
	;
	
switchBlockStatementGroups
	:	(switchBlockStatementGroup)*
	;
	
switchBlockStatementGroup
	:	switchLabel blockStatement*
	;
	
switchLabel
	:	'case' constantExpression ':'
	|	'case' enumConstantName ':'
	|	'default' ':'
	;
	
moreStatementExpressions
	:	(',' statementExpression)*
	;

forControl
	:	forVarControl
	|	forInit ';' expression? ';' forUpdate?
	;

forInit
	:	'final'? type variableDeclarators
	|	statementExpressionList
	;
	
forVarControl
	:	'final'? (annotation)? type Identifier forVarControlRest
	;

forVarControlRest
	:	variableDeclaratorsRest ';' expression? ';' forUpdate?
	|	':' expression
	;

forUpdate
	:	statementExpressionList
	;

// EXPRESSIONS
parExpression
	:	'(' expression ')'
	;

statementExpressionList
	:	statementExpression (',' statementExpression)*
	;
	
statementExpression
	:	expression
	;

constantExpression
	:	expression
	;
	
expression
	:	conditionalExpression (assignmentOperator expression)?
	;
	
assignmentOperator
	:	'='
	|	'+='
	|	'-='
	|	'*='
	|	'/='
	|	'&='
	|	'|='
	|	'^='
	|	'%='
	|	'<' '<' '='
	|	'>' '>' '='
	|	'>' '>' '>' '='
	;

conditionalExpression
	:	conditionalOrExpression ('?' expression ':' expression)?
	;

conditionalOrExpression
	:	conditionalAndExpression ('||' conditionalAndExpression)*
	;

conditionalAndExpression
	:	inclusiveOrExpression ('&&' inclusiveOrExpression)*
	;

inclusiveOrExpression
	:	exclusiveOrExpression ('|' exclusiveOrExpression)*
	;

exclusiveOrExpression
	:	andExpression ('^' andExpression)*
	;

andExpression
	:	equalityExpression ('&' equalityExpression)*
	;

equalityExpression
	:	instanceOfExpression (('==' | '!=') instanceOfExpression)*
	;

instanceOfExpression
	:	relationalExpression ('instanceof' type)?
	;

relationalExpression
	:	shiftExpression (relationalOp shiftExpression)*
	;
	
relationalOp
	:	('<' '=' | '>' '=' | '<' | '>')
	;

shiftExpression
	:	additiveExpression (shiftOp additiveExpression)*
	;

// TODO: need a sem pred to check column on these >>>
shiftOp
	:	('<' '<' | '>' '>' '>' | '>' '>')
	;

additiveExpression
	:	multiplicativeExpression (('+' | '-') multiplicativeExpression)*
	;

multiplicativeExpression
	:	unaryExpression (('*' | '/' | '%') unaryExpression)*
	;
	
unaryExpression
	:	'+' unaryExpression
	|	'-' unaryExpression
	|	'++' primary
	|	'--' primary
	|	unaryExpressionNotPlusMinus
	;

unaryExpressionNotPlusMinus
	:	'~' unaryExpression
	| 	'!' unaryExpression
	|	castExpression
	|	primary selector* ('++' | '--')?
	;

castExpression
	:	'(' basicType ')' unaryExpression
	|	'(' (expression | type) ')' unaryExpressionNotPlusMinus
	;

primary
	:	parExpression
	|	nonWildcardTypeArguments (explicitGenericInvocationSuffix | 'this' arguments)
	|	'this' (arguments)?
	|	'super' superSuffix
	|	literal
	|	'new' creator
	|	Identifier ('.' Identifier)* (identifierSuffix)?
	|	basicType ('[' ']')* '.' 'class'
	|	'void' '.' 'class'
	;

identifierSuffix
	:	('[' ']')+ '.' 'class'
	|	('[' expression ']')+ // can also be matched by selector, but do here
	|	arguments
	|	'.' 'class'
	|	'.' explicitGenericInvocation
	|	'.' 'this'
	|	'.' 'super' arguments
	|	'.' 'new' (nonWildcardTypeArguments)? innerCreator
	;
	
creator
	:	nonWildcardTypeArguments? createdName
		(arrayCreatorRest | classCreatorRest)
	;

createdName
	:	Identifier nonWildcardTypeArguments?
		('.' Identifier nonWildcardTypeArguments?)*
	|	basicType
	;
	
innerCreator
	:	Identifier classCreatorRest
	;

arrayCreatorRest
	:	'['
	      	(	']' ('[' ']')* arrayInitializer
		|	expression ']' ('[' expression ']')* ('[' ']')*
		)
	;

classCreatorRest
	:	arguments classBody?
	;
	
explicitGenericInvocation
	:	nonWildcardTypeArguments explicitGenericInvocationSuffix
	;
	
nonWildcardTypeArguments
	:	'<' typeList '>'
	;
	
explicitGenericInvocationSuffix
	:	'super' superSuffix
	|	Identifier arguments
	;
	
selector
	:	'.' Identifier (arguments)?
	|	'.' 'this'
	|	'.' 'super' superSuffix
	|	'.' 'new' (nonWildcardTypeArguments)? innerCreator
	|	'[' expression ']'
	;
	
superSuffix
	:	arguments
	|	'.' Identifier (arguments)?
	;

arguments
	:	'(' statementExpressionList? ')'
	;



// LEXER
HexIntegerLiteral
	:	'0' ('x' | 'X') HexDigit+ IntegerTypeSuffix?
	;

DecimalIntegerLiteral
	:	('0' | '1'..'9' '0'..'9'*) IntegerTypeSuffix?
	;

OctalIntegerLiteral
	:	'0' ('0'..'7')+ IntegerTypeSuffix?
	;

fragment
HexDigit
	:	('0'..'9' | 'a'..'f' | 'A'..'F')
	;

fragment
IntegerTypeSuffix
	:	('l' | 'L')
	;

FloatingPointLiteral
	:	('0'..'9')+ '.' ('0'..'9')* Exponent? FloatTypeSuffix?
	|	'.' ('0'..'9')+ Exponent? FloatTypeSuffix?
	|	('0'..'9')+ Exponent FloatTypeSuffix?
	|	('0'..'9')+ Exponent? FloatTypeSuffix
	;

fragment
Exponent
	:	('e' | 'E') ('+' | '-')? ('0'..'9')+
	;

fragment
FloatTypeSuffix
	:	('f' | 'F' | 'd' | 'D')
	;

CharacterLiteral
	:	'\'' (EscapeSequence | ~('\'' | '\\')) '\''
	;

StringLiteral
	:	'"' (EscapeSequence | ~('\\' | '"'))* '"'
	;

fragment
EscapeSequence
	:	'\\' ('b' | 't' | 'n' | 'f' | 'r' | '\"' | '\'' | '\\')
	|	UnicodeEscape
	|	OctalEscape
	;

fragment
OctalEscape
	:	'\\' ('0'..'3') ('0'..'7') ('0'..'7')
	|	'\\' ('0'..'7') ('0'..'7')
	|	'\\' ('0'..'7')
	;

fragment
UnicodeEscape
	:	'\\' 'u' HexDigit HexDigit HexDigit HexDigit
	;

ENUM
	:	'enum' {if ( !enumIsKeyword ) type=Identifier;}
	;
	
Identifier 
	:	JavaLetter (JavaLetter | JavaLetterOrDigit)*
	;

// I found this char range in JavaCC's grammar, but Letter and Digit overlap.
// Still works, but...
fragment
JavaLetter
	:	'\u0024'
	|	'\u0041'..'\u005a'
	|	'\u005f'
	|	'\u0061'..'\u007a'
	|	'\u00c0'..'\u00d6'
	|	'\u00d8'..'\u00f6'
	|	'\u00f8'..'\u00ff'
	|	'\u0100'..'\u1fff'
	|	'\u3040'..'\u318f'
	|	'\u3300'..'\u337f'
	|	'\u3400'..'\u3d2d'
	|	'\u4e00'..'\u9fff'
	|	'\uf900'..'\ufaff'
	;

fragment
JavaLetterOrDigit
	:	'\u0030'..'\u0039'
	|	'\u0660'..'\u0669'
	|	'\u06f0'..'\u06f9'
	|	'\u0966'..'\u096f'
	|	'\u09e6'..'\u09ef'
	|	'\u0a66'..'\u0a6f'
	|	'\u0ae6'..'\u0aef'
	|	'\u0b66'..'\u0b6f'
	|	'\u0be7'..'\u0bef'
	|	'\u0c66'..'\u0c6f'
	|	'\u0ce6'..'\u0cef'
	|	'\u0d66'..'\u0d6f'
	|	'\u0e50'..'\u0e59'
	|	'\u0ed0'..'\u0ed9'
	|	'\u1040'..'\u1049'
	;

WS
	:	(' ' | '\r' | '\t' | '\u000C' | '\n') {channel=99;}
	;

Comment
	:	'/*' (options {greedy=false;} : . )* '*/' {channel=99;}
	;

EndOfLineComment
	:	'//' ~('\n' | '\r')* '\r'? '\n' {channel=99;}
	;
-------------- next part --------------
/**
 * A Java 1.5 grammar for ANTLR v3 derived from the spec
 *
 * This is a very close representation of the spec; the changes
 * are comestic (remove left recursion) and also fixes (the spec
 * isn't exactly perfect). I have run this on the 1.4.2 source
 * and some nasty looking enums from 1.5, but have not really
 * tested for 1.5 compatibility.
 *
 * I built this with:
 * java -Xmx300M org.antlr.Tool java.g
 * and got two errors that are ok:
 * java.g:691:9: Decision can match input such as
 *   "'0'..'9'{'E', 'e'}{'+', '-'}'0'..'9'{'D', 'F', 'd', 'f'}"
 *   using multiple alternatives: 3, 4
 * As a result, alternative(s) 4 were disabled for that input
 * java.g:734:35: Decision can match input such as "{'$', 'A'..'Z',
 *   '_', 'a'..'z', '\u00C0'..'\u00D6', '\u00D8'..'\u00F6',
 *   '\u00F8'..'\u1FFF', '\u3040'..'\u318F', '\u3300'..'\u337F',
 *   '\u3400'..'\u3D2D', '\u4E00'..'\u9FFF', '\uF900'..'\uFAFF'}"
 *   using multiple alternatives: 1, 2
 * As a result, alternative(s) 2 were disabled for that input
 *
 * You can turn enum on/off as a keyword :)
 *
 * Version 1.0 -- initial release July 5, 2006 (requires 3.0b2)
 *
 * Primary author: Terence Parr, July 2006
 */
grammar JavaParser;
options {
	k=2;
	backtrack=true;
	memoize=true;
}

@lexer::members {
	protected boolean enumIsKeyword = false;
}

// starting point for parsing a java file
compilationUnit
	:	annotations?
		packageDeclaration?
      		importDeclaration*
      		typeDeclaration*
	;

packageDeclaration
	:	'package' qualifiedIdentifier ';'
	;

importDeclaration
	:	'import' 'static'? Identifier ('.' Identifier)* ('.' '*')? ';'
	;
	
typeDeclaration
	:	classOrInterfaceDeclaration
	|	';'
	;

classOrInterfaceDeclaration
	:	modifier* (classDeclaration | interfaceDeclaration)
	;
	
classDeclaration
	:	normalClassDeclaration
	|	enumDeclaration
	;
	
normalClassDeclaration
	:	'class' Identifier (typeParameters)?
		('extends' type)?
		('implements' typeList)?
		classBody
	;
	
typeParameters
	:	'<' typeParameter (',' typeParameter)* '>'
	;

typeParameter
	:	Identifier ('extends' bound)?
	;
	
bound
	:	type ('&' type)*
	;

enumDeclaration
	:	ENUM Identifier ('implements' typeList)? enumBody
	;
	
enumBody
	:	'{' enumConstants? ','? enumBodyDeclarations? '}'
	;

enumConstants
	:	enumConstant (',' enumConstant)*
	;
	
enumConstant
	:	annotations? Identifier (arguments)? (classBody)?
	;
	
enumBodyDeclarations
	:	';' (classBodyDeclaration)*
	;
	
interfaceDeclaration
	:	normalInterfaceDeclaration
	|	annotationTypeDeclaration
	;
	
normalInterfaceDeclaration
	:	'interface' Identifier typeParameter? ('extends' typeList)? interfaceBody
	;
	
typeList
	:	type (',' type)*
	;
	
classBody
	:	'{' classBodyDeclaration* '}'
	;
	
interfaceBody
	:	'{' interfaceBodyDeclaration* '}'
	;

classBodyDeclaration
	:	';'
	|	'static'? block
	|	modifier* memberDecl
	;
	
memberDecl
	:	genericMethodOrConstructorDecl
	|	methodDeclaration
	|	fieldDeclaration
	|	'void' Identifier voidMethodDeclaratorRest
	|	Identifier constructorDeclaratorRest
	|	interfaceDeclaration
	|	classDeclaration
	;
	
genericMethodOrConstructorDecl
	:	typeParameters genericMethodOrConstructorRest
	;
	
genericMethodOrConstructorRest
	:	(type | 'void') Identifier methodDeclaratorRest
	|	Identifier constructorDeclaratorRest
	;

methodDeclaration
	:	type Identifier methodDeclaratorRest
	;

fieldDeclaration
	:	type variableDeclarators ';'
	;
	
interfaceBodyDeclaration
	:	';'
	|	modifier* interfaceMemberDecl
	;

interfaceMemberDecl
	:	interfaceMethodOrFieldDecl
	|	interfaceGenericMethodDecl
	|	'void' Identifier voidInterfaceMethodDeclaratorRest
	|	interfaceDeclaration
	|	classDeclaration
	;
	
interfaceMethodOrFieldDecl
	:	type Identifier interfaceMethodOrFieldRest
	;
	
interfaceMethodOrFieldRest
	:	constantDeclaratorsRest ';'
	|	interfaceMethodDeclaratorRest
	;
	
methodDeclaratorRest
	:	formalParameters ('[' ']')*
		('throws' qualifiedIdentifierList)?
		(methodBody | ';')
	;
	
voidMethodDeclaratorRest
	:	formalParameters ('throws' qualifiedIdentifierList)?
		(methodBody | ';')
	;
	
interfaceMethodDeclaratorRest
	:	formalParameters ('[' ']')* ('throws' qualifiedIdentifierList)? ';'
	;
	
interfaceGenericMethodDecl
	:	typeParameters (type | 'void') Identifier
		interfaceMethodDeclaratorRest
	;
	
voidInterfaceMethodDeclaratorRest
	:	formalParameters ('throws' qualifiedIdentifierList)? ';'
	;
	
constructorDeclaratorRest
	:	formalParameters ('throws' qualifiedIdentifierList)? methodBody
	;

constantDeclarator
	:	Identifier constantDeclaratorRest
	;
	
variableDeclarators
	:	variableDeclarator (',' variableDeclarator)*
	;

variableDeclaratorsRest
	:	variableDeclaratorRest (',' variableDeclarator)*
	;
	
variableDeclarator
	:	Identifier variableDeclaratorRest
	;
	
variableDeclaratorRest
	:	('[' ']')+ ('=' variableInitializer)?
	|	'=' variableInitializer
	|
	;

constantDeclaratorsRest
	:   constantDeclaratorRest (',' constantDeclarator)*
	;

constantDeclaratorRest
	:	('[' ']')* '=' variableInitializer
	;
	
variableDeclaratorId
	:	Identifier ('[' ']')*
	;

variableInitializer
	:	arrayInitializer
	|	expression
	;

arrayInitializer
	:	'{' (variableInitializer (',' variableInitializer)* (',')?)? '}'
	;

modifier
	:	annotation
	|	'public'
	|	'protected'
	|	'private'
	|	'static'
	|	'abstract'
	|	'final'
	|	'native'
	|	'synchronized'
	|	'transient'
	|	'volatile'
	|	'strictfp'
	;


packageOrTypeName
	:	Identifier ('.' Identifier)*
	;

enumConstantName
	:	Identifier
	;

typeName
	:	Identifier
	|	packageOrTypeName '.' Identifier
	;

type
	:	Identifier (typeArguments)? ('.' Identifier (typeArguments)?)* ('[' ']')*
	|	basicType ('[' ']')*
	;

basicType
	:	'byte'
	|	'short'
	|	'char'
	|	'int'
	|	'long'
	|	'float'
	|	'double'
	|	'boolean'
	;

variableModifier
	:	'final'
	|	annotation
	;

typeArguments
	:	'<' typeArgument (',' typeArgument)* '>'
	;
	
typeArgument
	:	type
	|	'?' (('extends' | 'super') type)?
	;
	
qualifiedIdentifierList
	:	qualifiedIdentifier (',' qualifiedIdentifier)*
	;
	
formalParameters
	:	'(' formalParameterDecls? ')'
	;

formalParameterDecls
	:	'final'? annotations? type formalParameterDeclsRest?
	;
	
formalParameterDeclsRest
	:	variableDeclaratorId (',' formalParameterDecls)?
	|	'...' variableDeclaratorId
	;
	
methodBody
	:	block
	;

qualifiedIdentifier
	:	Identifier ('.' Identifier)*
	;
	
literal	
	:	integerLiteral
	|	FloatingPointLiteral
	|	CharacterLiteral
	|	StringLiteral
	|	booleanLiteral
	|	'null'
	;

integerLiteral
	:	DecimalIntegerLiteral
	|	HexIntegerLiteral
	|	OctalIntegerLiteral
	;

booleanLiteral
	:	'true'
	|	'false'
	;

// ANNOTATIONS
annotations
	:	annotation+
	;

annotation
	:	'@' typeName ('(' (Identifier '=')? elementValue ')')?
	;
	
elementValue
	:	conditionalExpression
	|	annotation
	|	elementValueArrayInitializer
	;
	
elementValueArrayInitializer
	:	'{' (elementValue)? (',')? '}'
	;
	
annotationTypeDeclaration
	:	'@' 'interface' Identifier annotationTypeBody
	;
	
annotationTypeBody
	:	'{' (annotationTypeElementDeclarations)? '}'
	;
	
annotationTypeElementDeclarations
	:	(annotationTypeElementDeclaration) (annotationTypeElementDeclaration)*
	;

annotationTypeElementDeclaration
	:	(modifier)* annotationTypeElementRest
	;
	
annotationTypeElementRest
	:	type Identifier annotationMethodOrConstantRest ';'
	|	classDeclaration
	|	interfaceDeclaration
	|	enumDeclaration
	|	annotationTypeDeclaration
	;
	
annotationMethodOrConstantRest
	:	annotationMethodRest
	|	annotationConstantRest
	;
	
annotationMethodRest
 	:	'(' ')' (defaultValue)?
 	;
 	
annotationConstantRest
 	:	variableDeclarators
 	;
 	
defaultValue
 	:	'default' elementValue
 	;

// STATEMENTS / BLOCKS
block
	:	'{' blockStatements '}'
	;
	
blockStatements
	:	blockStatement*
	;
	
blockStatement
	:	localVariableDeclarationStatement
	|	classOrInterfaceDeclaration
	|	(Identifier ':')? statement
	;
	
localVariableDeclarationStatement
	:	('final')? type variableDeclarators ';'
	;
	
statement
	:	block
	|	'assert' expression (':' expression)? ';'
	|	'if' parExpression statement ('else' statement)?
	|	'for' '(' forControl ')' statement
	|	'while' parExpression statement
	|	'do' statement 'while' parExpression ';'
	|	'try' block
		(	catches 'finally' block
		|	catches
		|	'finally' block
		)
	|	'switch' parExpression '{' switchBlockStatementGroups '}'
	|	'synchronized' parExpression block
	|	'return' expression? ';'
	|	'throw' expression ';'
	|	'break' Identifier? ';'
	|	'continue' Identifier? ';'
	|	';'
	|	statementExpression ';'
	|	Identifier ':' statement
	;
	
catches
	:	catchClause (catchClause)*
	;
	
catchClause
	:	'catch' '(' formalParameter ')' block
	;

formalParameter
	:	variableModifier* type variableDeclaratorId
	;
	
switchBlockStatementGroups
	:	(switchBlockStatementGroup)*
	;
	
switchBlockStatementGroup
	:	switchLabel blockStatement*
	;
	
switchLabel
	:	'case' constantExpression ':'
	|	'case' enumConstantName ':'
	|	'default' ':'
	;
	
moreStatementExpressions
	:	(',' statementExpression)*
	;

forControl
	:	forVarControl
	|	forInit ';' expression? ';' forUpdate?
	;

forInit
	:	'final'? type variableDeclarators
	|	statementExpressionList
	;
	
forVarControl
	:	'final'? (annotation)? type Identifier forVarControlRest
	;

forVarControlRest
	:	variableDeclaratorsRest ';' expression? ';' forUpdate?
	|	':' expression
	;

forUpdate
	:	statementExpressionList
	;

// EXPRESSIONS
parExpression
	:	'(' expression ')'
	;

statementExpressionList
	:	statementExpression (',' statementExpression)*
	;
	
statementExpression
	:	expression
	;

constantExpression
	:	expression
	;
	
expression
	:	conditionalExpression (assignmentOperator expression)?
	;
	
assignmentOperator
	:	'='
	|	'+='
	|	'-='
	|	'*='
	|	'/='
	|	'&='
	|	'|='
	|	'^='
	|	'%='
	|	'<' '<' '='
	|	'>' '>' '='
	|	'>' '>' '>' '='
	;

conditionalExpression
	:	conditionalOrExpression ('?' expression ':' expression)?
	;

conditionalOrExpression
	:	conditionalAndExpression ('||' conditionalAndExpression)*
	;

conditionalAndExpression
	:	inclusiveOrExpression ('&&' inclusiveOrExpression)*
	;

inclusiveOrExpression
	:	exclusiveOrExpression ('|' exclusiveOrExpression)*
	;

exclusiveOrExpression
	:	andExpression ('^' andExpression)*
	;

andExpression
	:	equalityExpression ('&' equalityExpression)*
	;

equalityExpression
	:	instanceOfExpression (('==' | '!=') instanceOfExpression)*
	;

instanceOfExpression
	:	relationalExpression ('instanceof' type)?
	;

relationalExpression
	:	shiftExpression (relationalOp shiftExpression)*
	;
	
relationalOp
	:	('<' '=' | '>' '=' | '<' | '>')
	;

shiftExpression
	:	additiveExpression (shiftOp additiveExpression)*
	;

// TODO: need a sem pred to check column on these >>>
shiftOp
	:	('<' '<' | '>' '>' '>' | '>' '>')
	;

additiveExpression
	:	multiplicativeExpression (('+' | '-') multiplicativeExpression)*
	;

multiplicativeExpression
	:	unaryExpression (('*' | '/' | '%') unaryExpression)*
	;
	
unaryExpression
	:	'+' unaryExpression
	|	'-' unaryExpression
	|	'++' primary
	|	'--' primary
	|	unaryExpressionNotPlusMinus
	;

unaryExpressionNotPlusMinus
	:	'~' unaryExpression
	| 	'!' unaryExpression
	|	castExpression
	|	primary selector* ('++' | '--')?
	;

castExpression
	:	'(' basicType ')' unaryExpression
	|	'(' (expression | type) ')' unaryExpressionNotPlusMinus
	;

primary
	:	parExpression
	|	nonWildcardTypeArguments (explicitGenericInvocationSuffix | 'this' arguments)
	|	'this' (arguments)?
	|	'super' superSuffix
	|	literal
	|	'new' creator
	|	Identifier ('.' Identifier)* (identifierSuffix)?
	|	basicType ('[' ']')* '.' 'class'
	|	'void' '.' 'class'
	;

identifierSuffix
	:	('[' ']')+ '.' 'class'
	|	('[' expression ']')+ // can also be matched by selector, but do here
	|	arguments
	|	'.' 'class'
	|	'.' explicitGenericInvocation
	|	'.' 'this'
	|	'.' 'super' arguments
	|	'.' 'new' (nonWildcardTypeArguments)? innerCreator
	;
	
creator
	:	nonWildcardTypeArguments? createdName
		(arrayCreatorRest | classCreatorRest)
	;

createdName
	:	Identifier nonWildcardTypeArguments?
		('.' Identifier nonWildcardTypeArguments?)*
	|	basicType
	;
	
innerCreator
	:	Identifier classCreatorRest
	;

arrayCreatorRest
	:	'['
	      	(	']' ('[' ']')* arrayInitializer
		|	expression ']' ('[' expression ']')* ('[' ']')*
		)
	;

classCreatorRest
	:	arguments classBody?
	;
	
explicitGenericInvocation
	:	nonWildcardTypeArguments explicitGenericInvocationSuffix
	;
	
nonWildcardTypeArguments
	:	'<' typeList '>'
	;
	
explicitGenericInvocationSuffix
	:	'super' superSuffix
	|	Identifier arguments
	;
	
selector
	:	'.' Identifier (arguments)?
	|	'.' 'this'
	|	'.' 'super' superSuffix
	|	'.' 'new' (nonWildcardTypeArguments)? innerCreator
	|	'[' expression ']'
	;
	
superSuffix
	:	arguments
	|	'.' Identifier (arguments)?
	;

arguments
	:	'(' statementExpressionList? ')'
	;



// LEXER
HexIntegerLiteral
	:	'0' ('x' | 'X') HexDigit+ IntegerTypeSuffix?
	;

DecimalIntegerLiteral
	:	('0' | '1'..'9' '0'..'9'*) IntegerTypeSuffix?
	;

OctalIntegerLiteral
	:	'0' ('0'..'7')+ IntegerTypeSuffix?
	;

fragment
HexDigit
	:	('0'..'9' | 'a'..'f' | 'A'..'F')
	;

fragment
IntegerTypeSuffix
	:	('l' | 'L')
	;

FloatingPointLiteral
	:	('0'..'9')+ '.' ('0'..'9')* Exponent? FloatTypeSuffix?
	|	'.' ('0'..'9')+ Exponent? FloatTypeSuffix?
	|	('0'..'9')+ Exponent FloatTypeSuffix?
	|	('0'..'9')+ Exponent? FloatTypeSuffix
	;

fragment
Exponent
	:	('e' | 'E') ('+' | '-')? ('0'..'9')+
	;

fragment
FloatTypeSuffix
	:	('f' | 'F' | 'd' | 'D')
	;

CharacterLiteral
	:	'\'' (EscapeSequence | ~('\'' | '\\')) '\''
	;

StringLiteral
	:	'"' (EscapeSequence | ~('\\' | '"'))* '"'
	;

fragment
EscapeSequence
	:	'\\' ('b' | 't' | 'n' | 'f' | 'r' | '\"' | '\'' | '\\')
	|	UnicodeEscape
	|	OctalEscape
	;

fragment
OctalEscape
	:	'\\' ('0'..'3') ('0'..'7') ('0'..'7')
	|	'\\' ('0'..'7') ('0'..'7')
	|	'\\' ('0'..'7')
	;

fragment
UnicodeEscape
	:	'\\' 'u' HexDigit HexDigit HexDigit HexDigit
	;

ENUM
	:	'enum' {if ( !enumIsKeyword ) type=Identifier;}
	;
	
Identifier 
	:	JavaLetter (JavaLetter | JavaLetterOrDigit)*
	;

// I found this char range in JavaCC's grammar, but Letter and Digit overlap.
// Still works, but...
fragment
JavaLetter
	:	'\u0024'
	|	'\u0041'..'\u005a'
	|	'\u005f'
	|	'\u0061'..'\u007a'
	|	'\u00c0'..'\u00d6'
	|	'\u00d8'..'\u00f6'
	|	'\u00f8'..'\u00ff'
	|	'\u0100'..'\u1fff'
	|	'\u3040'..'\u318f'
	|	'\u3300'..'\u337f'
	|	'\u3400'..'\u3d2d'
	|	'\u4e00'..'\u9fff'
	|	'\uf900'..'\ufaff'
	;

fragment
JavaLetterOrDigit
	:	'\u0030'..'\u0039'
	|	'\u0660'..'\u0669'
	|	'\u06f0'..'\u06f9'
	|	'\u0966'..'\u096f'
	|	'\u09e6'..'\u09ef'
	|	'\u0a66'..'\u0a6f'
	|	'\u0ae6'..'\u0aef'
	|	'\u0b66'..'\u0b6f'
	|	'\u0be7'..'\u0bef'
	|	'\u0c66'..'\u0c6f'
	|	'\u0ce6'..'\u0cef'
	|	'\u0d66'..'\u0d6f'
	|	'\u0e50'..'\u0e59'
	|	'\u0ed0'..'\u0ed9'
	|	'\u1040'..'\u1049'
	;

WS
	:	(' ' | '\r' | '\t' | '\u000C' | '\n') {channel=99;}
	;

Comment
	:	'/*' (options {greedy=false;} : . )* '*/' {channel=99;}
	;

EndOfLineComment
	:	'//' ~('\n' | '\r')* '\r'? '\n' {channel=99;}
	;
From parrt at cs.usfca.edu  Fri Aug 25 10:45:55 2006
From: parrt at cs.usfca.edu (Terence Parr)
Date: Fri Aug 25 10:45:58 2006
Subject: [antlr-interest] v3: conformance of current Java 1.5 grammar
In-Reply-To: <20060825173952.7580@gmx.net>
References: <20060825173952.7580@gmx.net>
Message-ID: <B63C83C0-A2C0-4B1B-B08F-2D4DFD09A26A@cs.usfca.edu>


On Aug 25, 2006, at 10:39 AM, Dieter Frej wrote:

> Hi everbody,

Hi Dieter,

> some time ago, I had some spare time and I checked the conformance
> of the current Java 1.5 grammar to the Java Language Specification 3.
> And I was really surprised.

In a good way or a bad way?

> I attached a file listing the rules and
> their corresponding page number in the jls3 pdf.

I don't see any information in that conformance.txt file.  Did you  
send the right file?

> To increase the
> conformity I renamed some rules.
>
> I also attached the changed java grammar. So far, I had no time to
> look into overwriting the method,

Which method?

> so that exceptions are not
> catched by antlr. If this is done (has anyone does this yet?), I can
> start compiling the JCK again...

Thanks for putting time into this but I must admit I cannot parse  
this e-mail and determine what exactly you have and don't  
have...sorry! can you try to explain in more detail?

Ter
From ilia at obnovlenie.ru  Fri Aug 25 13:14:39 2006
From: ilia at obnovlenie.ru (Ilia Kantor)
Date: Fri Aug 25 13:15:54 2006
Subject: [antlr-interest] Exception at compile
Message-ID: <200608260014.39295.ilia@obnovlenie.ru>

I'm trying to run antlr on xml.g from 
http://www.antlr.org/wiki/display/ANTLR3/1.+Lexer
and can't evade error:

Exception in thread "main" java.lang.NoClassDefFoundError: antlr/TokenStream
	at org.antlr.tool.ErrorManager.setLocale(ErrorManager.java:357)
	at org.antlr.tool.ErrorManager.<clinit>(ErrorManager.java:323)
	at org.antlr.Tool.main(Tool.java:67)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at 
sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at 
sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:585)
	at com.intellij.rt.execution.application.AppMain.main(AppMain.java:90)

What's up ?

I'm running Tool from IntelliJ IDEA.
The version I use is 3.0b4
Antlr & stringtemplate from the bundle are in classpath.
From parrt at cs.usfca.edu  Fri Aug 25 14:37:56 2006
From: parrt at cs.usfca.edu (Terence Parr)
Date: Fri Aug 25 14:37:59 2006
Subject: [antlr-interest] Exception at compile
In-Reply-To: <200608260014.39295.ilia@obnovlenie.ru>
References: <200608260014.39295.ilia@obnovlenie.ru>
Message-ID: <C9E2BEE9-2F7E-4F5D-AEB4-F6AFD66844BF@cs.usfca.edu>

please add antlr 2.7.6 jar as well...v3 is written in v2 for now.
Ter
On Aug 25, 2006, at 1:14 PM, Ilia Kantor wrote:

> I'm trying to run antlr on xml.g from
> http://www.antlr.org/wiki/display/ANTLR3/1.+Lexer
> and can't evade error:
>
> Exception in thread "main" java.lang.NoClassDefFoundError: antlr/ 
> TokenStream
> 	at org.antlr.tool.ErrorManager.setLocale(ErrorManager.java:357)
> 	at org.antlr.tool.ErrorManager.<clinit>(ErrorManager.java:323)
> 	at org.antlr.Tool.main(Tool.java:67)
> 	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
> 	at
> sun.reflect.NativeMethodAccessorImpl.invoke 
> (NativeMethodAccessorImpl.java:39)
> 	at
> sun.reflect.DelegatingMethodAccessorImpl.invoke 
> (DelegatingMethodAccessorImpl.java:25)
> 	at java.lang.reflect.Method.invoke(Method.java:585)
> 	at com.intellij.rt.execution.application.AppMain.main(AppMain.java: 
> 90)
>
> What's up ?
>
> I'm running Tool from IntelliJ IDEA.
> The version I use is 3.0b4
> Antlr & stringtemplate from the bundle are in classpath.

From parrt at cs.usfca.edu  Fri Aug 25 14:53:02 2006
From: parrt at cs.usfca.edu (Terence Parr)
Date: Fri Aug 25 14:53:06 2006
Subject: [antlr-interest] v3 - How to deal with include Files?
In-Reply-To: <ee873c070608231414w66992335lcadb8959e2d3858b@mail.gmail.com>
References: <ee873c070608231414w66992335lcadb8959e2d3858b@mail.gmail.com>
Message-ID: <D8605DF1-C823-451D-9B38-32CB2151EBD6@cs.usfca.edu>


On Aug 23, 2006, at 2:14 PM, Alexandre Porcelli wrote:

> Hi All,
>
>  Id like to know how to deal with include Files?
>
>   In v2 there is TokenStreamSelector, how can I solve a include file
> problem using v3?

Hi.  These days I am starting to think include files are more easily  
handled with a simple input stream that looks for the #include. there  
is an example of  an island grammar in the version 3 examples dir.

Ter

From dieter_frej at gmx.net  Sat Aug 26 08:47:48 2006
From: dieter_frej at gmx.net (Dieter Frej)
Date: Sat Aug 26 09:50:41 2006
Subject: [antlr-interest] v3: conformance of current Java 1.5 grammar
In-Reply-To: <B63C83C0-A2C0-4B1B-B08F-2D4DFD09A26A@cs.usfca.edu>
References: <20060825173952.7580@gmx.net>
	<B63C83C0-A2C0-4B1B-B08F-2D4DFD09A26A@cs.usfca.edu>
Message-ID: <44F06D24.4040101@gmx.net>

my email webfront seemed to have messed it up.Sorry for that!

Around 73% of the rules in the grammar are like the rules as they are in
the Java Language Specification. I think it is a good value, but judge
for yourself.
Parser: 99 rules of 130 (~ 76%)
Lexer: 11 rules of 20 (~ 55%)
The attache text file containes the rules (taken from the grammar) and
the specification page number if they match.

I also attached the grammar again. I would like to get exceptions thrown
by my JavaParser so that I can analyse them. Therefore, I probably need
to overwrite either BaseRecognizer.recover() or 
BaseRecognizer.reportError(). Then I can start parsing the JCK again. I
would like to do this a) to compare that to the v2 Java 1.5 grammar and
b) compare it to the information provided by the JCK.

- Didi



Terence Parr wrote:
> 
> On Aug 25, 2006, at 10:39 AM, Dieter Frej wrote:
> 
>> Hi everbody,
> 
> 
> Hi Dieter,
> 
>> some time ago, I had some spare time and I checked the conformance
>> of the current Java 1.5 grammar to the Java Language Specification 3.
>> And I was really surprised.
> 
> 
> In a good way or a bad way?
> 
>> I attached a file listing the rules and
>> their corresponding page number in the jls3 pdf.
> 
> 
> I don't see any information in that conformance.txt file.  Did you  send 
> the right file?
> 
>> To increase the
>> conformity I renamed some rules.
>>
>> I also attached the changed java grammar. So far, I had no time to
>> look into overwriting the method,
> 
> 
> Which method?
> 
>> so that exceptions are not
>> catched by antlr. If this is done (has anyone does this yet?), I can
>> start compiling the JCK again...
> 
> 
> Thanks for putting time into this but I must admit I cannot parse  this 
> e-mail and determine what exactly you have and don't  have...sorry! can 
> you try to explain in more detail?
> 
> Ter
> 
> 

-------------- next part --------------
compilationUnit

packageDeclaration

// jls3, p. 592
importDeclaration
	
// jls3, p. 592
typeDeclaration

// jls3, p. 592
classOrInterfaceDeclaration
	
// jls3, p. 592
classDeclaration
	
// jls3, p. 593
normalClassDeclaration
	
// jls3, p. 593
typeParameters

// jls3, p. 593
typeParameter
	
// jls3, p. 593
bound

// jls3, p. 593
enumDeclaration
	
// jls3, p. 593
enumBody

// jls3, p. 593
enumConstants
	
// jls3, p. 593
enumConstant
	
// jls3, p. 593
enumBodyDeclarations
	
// jls3, p. 593
interfaceDeclaration
	
// jls3, p. 593
normalInterfaceDeclaration
	
// jls3, p. 593
typeList
	
// jls3, p. 594
classBody
	
// jls3, p.  594
interfaceBody

// jls3, p. 594
classBodyDeclaration
	
memberDecl
	
// jls3, p. 595
genericMethodOrConstructorDecl
	
// jls3, p. 595
genericMethodOrConstructorRest

methodDeclaration

fieldDeclaration
	
// jls3, p. 595
interfaceBodyDeclaration

// jls3, p. 595
interfaceMemberDecl
	
// jls3, p. 595
interfaceMethodOrFieldDecl
	
// jls3, p. 595
interfaceMethodOrFieldRest
	
// jls3, p. 595
methodDeclaratorRest
	
// jls3, p. 595
voidMethodDeclaratorRest
	
// jls3, p. 595
interfaceMethodDeclaratorRest
	
// jls3, p. 595
interfaceGenericMethodDecl
	
// jls3, p. 595
voidInterfaceMethodDeclaratorRest
	
// jls3, p. 596
constructorDeclaratorRest

// jls3, p. 592
constantDeclarator
	
// jls3, p. 592
variableDeclarators

// jls3, p. 592
variableDeclaratorsRest
	
// jls3, p. 592
variableDeclarator
	
variableDeclaratorRest

// jls3, p. 592
constantDeclaratorsRest

// jls3, p. 592
constantDeclaratorRest

// jls3, p. 592
variableDeclaratorId

// jls3, p. 589
variableInitializer

// jls3, p. 589
arrayInitializer

// jls3, p. 591
modifier

packageOrTypeName

// jls3, p. 596
enumConstantName

// jls3, p. 126
typeName

type

// jls3, p. 589
basicType

// jls3, p. 211
variableModifier

// jls3, p. 586
typeArguments
	
// jls3, p. 586
typeArgument
	
// jls3, p. 596
qualifiedIdentifierList
	
// jls3, p. 596
formalParameters

// jls3, p. 596	
formalParameterDecls
	
// jls3, p. 596
formalParameterDeclsRest
	
// jls3, p. 596
methodBody

// jls3, p. 585
qualifiedIdentifier
	
// jls3, p. 586
literal	

// jls3, p. 22
integerLiteral

// jls3, p. 26
booleanLiteral

// jls3, p. 591
annotations

// jls3, p. 591
annotation
	
// jls3, p. 591
elementValue
	
// jls3, p. 591
elementValueArrayInitializer
	
// jls3, p. 593
annotationTypeDeclaration
	
// jls3, p. 593
annotationTypeBody
	
// jls3, p. 594 (left-recursive resolved)
annotationTypeElementDeclarations

// jls3, p. 594
annotationTypeElementDeclaration
	
// jls3, p. 594
annotationTypeElementRest
	
// jls3, p. 594
annotationMethodOrConstantRest
	
// jls3, p. 594
annotationMethodRest
 	
// jls3, p. 594
annotationConstantRest
 	
// jls3, p. 594
defaultValue

// STATEMENTS / BLOCKS
// jls3, p. 589
block
	
// jls3, p. 590
blockStatements
	
// jls3, p. 590
blockStatement
	
// jls3, p. 590
localVariableDeclarationStatement
	
statement
	
// jls3, p. 590
catches
	
// jls3, p. 590
catchClause

// jls3, p. 211
formalParameter
	
// jls3, p. 590	
switchBlockStatementGroups
	
// jls3, p. 590
switchBlockStatementGroup
	
// jls3, p. 590
switchLabel
	
// jls3, p. 591
moreStatementExpressions

// jls3, p. 591
forControl

forInit
	
// jls3, p. 591
forVarControl

// jls3, p. 591
forVarControlRest

// jls3, p. 384
forUpdate

// EXPRESSIONS
// jls3, p. 589
parExpression

// jls3, p. 384
statementExpressionList
	
// jls3, p. 586
statementExpression

// jls3, p. 586	
constantExpression
	
expression
	
// jls3, p. 586
assignmentOperator

conditionalExpression

conditionalOrExpression

conditionalAndExpression

inclusiveOrExpression

exclusiveOrExpression

andExpression

equalityExpression

instanceOfExpression

relationalExpression
	
relationalOp

shiftExpression

shiftOp

additiveExpression

multiplicativeExpression
	
unaryExpression

unaryExpressionNotPlusMinus

castExpression

// jls3, p. 587
primary

identifierSuffix
	
// jls3, p. 589
creator

createdName
	
// jls3, p. 589
innerCreator

// jls3, p. 589
arrayCreatorRest

// jls3, p. 589
classCreatorRest
	
// jls3, p. 588
explicitGenericInvocation
	
// jls3, p. 588
nonWildcardTypeArguments
	
// jls3, p. 588
explicitGenericInvocationSuffix
	
// jls3, p. 588
selector
	
// jls3, p. 589
superSuffix

arguments



// LEXER
HexIntegerLiteral

DecimalIntegerLiteral

OctalIntegerLiteral

// jls3, p. 23
fragment
HexDigit

// jls3, p. 22
fragment
IntegerTypeSuffix

FloatingPointLiteral

fragment
Exponent

// jls3, p. 25
fragment
FloatTypeSuffix

// jls3, p. 27
CharacterLiteral

// jls3, p. 28
StringLiteral

// jls3, p. 30
fragment
EscapeSequence

// jls3, p. 30
fragment
OctalEscape

// jls3, p. 15
fragment
UnicodeEscape

ENUM
	
Identifier 

// jls3, p. 20
fragment
JavaLetter

// jls3, p. 20
fragment
JavaLetterOrDigit

// jls3, p. 17
WS

Comment

EndOfLineComment
-------------- next part --------------
/**
 * A Java 1.5 grammar for ANTLR v3 derived from the spec
 *
 * This is a very close representation of the spec; the changes
 * are comestic (remove left recursion) and also fixes (the spec
 * isn't exactly perfect). I have run this on the 1.4.2 source
 * and some nasty looking enums from 1.5, but have not really
 * tested for 1.5 compatibility.
 *
 * I built this with:
 * java -Xmx300M org.antlr.Tool java.g
 * and got two errors that are ok:
 * java.g:691:9: Decision can match input such as
 *   "'0'..'9'{'E', 'e'}{'+', '-'}'0'..'9'{'D', 'F', 'd', 'f'}"
 *   using multiple alternatives: 3, 4
 * As a result, alternative(s) 4 were disabled for that input
 * java.g:734:35: Decision can match input such as "{'$', 'A'..'Z',
 *   '_', 'a'..'z', '\u00C0'..'\u00D6', '\u00D8'..'\u00F6',
 *   '\u00F8'..'\u1FFF', '\u3040'..'\u318F', '\u3300'..'\u337F',
 *   '\u3400'..'\u3D2D', '\u4E00'..'\u9FFF', '\uF900'..'\uFAFF'}"
 *   using multiple alternatives: 1, 2
 * As a result, alternative(s) 2 were disabled for that input
 *
 * You can turn enum on/off as a keyword :)
 *
 * Version 1.0 -- initial release July 5, 2006 (requires 3.0b2)
 *
 * Primary author: Terence Parr, July 2006
 */
grammar JavaParser;
options {
	k=2;
	backtrack=true;
	memoize=true;
}

@lexer::members {
	protected boolean enumIsKeyword = false;
}

// starting point for parsing a java file
compilationUnit
	:	annotations?
		packageDeclaration?
      		importDeclaration*
      		typeDeclaration*
	;

packageDeclaration
	:	'package' qualifiedIdentifier ';'
	;

importDeclaration
	:	'import' 'static'? Identifier ('.' Identifier)* ('.' '*')? ';'
	;
	
typeDeclaration
	:	classOrInterfaceDeclaration
	|	';'
	;

classOrInterfaceDeclaration
	:	modifier* (classDeclaration | interfaceDeclaration)
	;
	
classDeclaration
	:	normalClassDeclaration
	|	enumDeclaration
	;
	
normalClassDeclaration
	:	'class' Identifier (typeParameters)?
		('extends' type)?
		('implements' typeList)?
		classBody
	;
	
typeParameters
	:	'<' typeParameter (',' typeParameter)* '>'
	;

typeParameter
	:	Identifier ('extends' bound)?
	;
	
bound
	:	type ('&' type)*
	;

enumDeclaration
	:	ENUM Identifier ('implements' typeList)? enumBody
	;
	
enumBody
	:	'{' enumConstants? ','? enumBodyDeclarations? '}'
	;

enumConstants
	:	enumConstant (',' enumConstant)*
	;
	
enumConstant
	:	annotations? Identifier (arguments)? (classBody)?
	;
	
enumBodyDeclarations
	:	';' (classBodyDeclaration)*
	;
	
interfaceDeclaration
	:	normalInterfaceDeclaration
	|	annotationTypeDeclaration
	;
	
normalInterfaceDeclaration
	:	'interface' Identifier typeParameter? ('extends' typeList)? interfaceBody
	;
	
typeList
	:	type (',' type)*
	;
	
classBody
	:	'{' classBodyDeclaration* '}'
	;
	
interfaceBody
	:	'{' interfaceBodyDeclaration* '}'
	;

classBodyDeclaration
	:	';'
	|	'static'? block
	|	modifier* memberDecl
	;
	
memberDecl
	:	genericMethodOrConstructorDecl
	|	methodDeclaration
	|	fieldDeclaration
	|	'void' Identifier voidMethodDeclaratorRest
	|	Identifier constructorDeclaratorRest
	|	interfaceDeclaration
	|	classDeclaration
	;
	
genericMethodOrConstructorDecl
	:	typeParameters genericMethodOrConstructorRest
	;
	
genericMethodOrConstructorRest
	:	(type | 'void') Identifier methodDeclaratorRest
	|	Identifier constructorDeclaratorRest
	;

methodDeclaration
	:	type Identifier methodDeclaratorRest
	;

fieldDeclaration
	:	type variableDeclarators ';'
	;
	
interfaceBodyDeclaration
	:	';'
	|	modifier* interfaceMemberDecl
	;

interfaceMemberDecl
	:	interfaceMethodOrFieldDecl
	|	interfaceGenericMethodDecl
	|	'void' Identifier voidInterfaceMethodDeclaratorRest
	|	interfaceDeclaration
	|	classDeclaration
	;
	
interfaceMethodOrFieldDecl
	:	type Identifier interfaceMethodOrFieldRest
	;
	
interfaceMethodOrFieldRest
	:	constantDeclaratorsRest ';'
	|	interfaceMethodDeclaratorRest
	;
	
methodDeclaratorRest
	:	formalParameters ('[' ']')*
		('throws' qualifiedIdentifierList)?
		(methodBody | ';')
	;
	
voidMethodDeclaratorRest
	:	formalParameters ('throws' qualifiedIdentifierList)?
		(methodBody | ';')
	;
	
interfaceMethodDeclaratorRest
	:	formalParameters ('[' ']')* ('throws' qualifiedIdentifierList)? ';'
	;
	
interfaceGenericMethodDecl
	:	typeParameters (type | 'void') Identifier
		interfaceMethodDeclaratorRest
	;
	
voidInterfaceMethodDeclaratorRest
	:	formalParameters ('throws' qualifiedIdentifierList)? ';'
	;
	
constructorDeclaratorRest
	:	formalParameters ('throws' qualifiedIdentifierList)? methodBody
	;

constantDeclarator
	:	Identifier constantDeclaratorRest
	;
	
variableDeclarators
	:	variableDeclarator (',' variableDeclarator)*
	;

variableDeclaratorsRest
	:	variableDeclaratorRest (',' variableDeclarator)*
	;
	
variableDeclarator
	:	Identifier variableDeclaratorRest
	;
	
variableDeclaratorRest
	:	('[' ']')+ ('=' variableInitializer)?
	|	'=' variableInitializer
	|
	;

constantDeclaratorsRest
	:   constantDeclaratorRest (',' constantDeclarator)*
	;

constantDeclaratorRest
	:	('[' ']')* '=' variableInitializer
	;
	
variableDeclaratorId
	:	Identifier ('[' ']')*
	;

variableInitializer
	:	arrayInitializer
	|	expression
	;

arrayInitializer
	:	'{' (variableInitializer (',' variableInitializer)* (',')?)? '}'
	;

modifier
	:	annotation
	|	'public'
	|	'protected'
	|	'private'
	|	'static'
	|	'abstract'
	|	'final'
	|	'native'
	|	'synchronized'
	|	'transient'
	|	'volatile'
	|	'strictfp'
	;


packageOrTypeName
	:	Identifier ('.' Identifier)*
	;

enumConstantName
	:	Identifier
	;

typeName
	:	Identifier
	|	packageOrTypeName '.' Identifier
	;

type
	:	Identifier (typeArguments)? ('.' Identifier (typeArguments)?)* ('[' ']')*
	|	basicType ('[' ']')*
	;

basicType
	:	'byte'
	|	'short'
	|	'char'
	|	'int'
	|	'long'
	|	'float'
	|	'double'
	|	'boolean'
	;

variableModifier
	:	'final'
	|	annotation
	;

typeArguments
	:	'<' typeArgument (',' typeArgument)* '>'
	;
	
typeArgument
	:	type
	|	'?' (('extends' | 'super') type)?
	;
	
qualifiedIdentifierList
	:	qualifiedIdentifier (',' qualifiedIdentifier)*
	;
	
formalParameters
	:	'(' formalParameterDecls? ')'
	;

formalParameterDecls
	:	'final'? annotations? type formalParameterDeclsRest?
	;
	
formalParameterDeclsRest
	:	variableDeclaratorId (',' formalParameterDecls)?
	|	'...' variableDeclaratorId
	;
	
methodBody
	:	block
	;

qualifiedIdentifier
	:	Identifier ('.' Identifier)*
	;
	
literal	
	:	integerLiteral
	|	FloatingPointLiteral
	|	CharacterLiteral
	|	StringLiteral
	|	booleanLiteral
	|	'null'
	;

integerLiteral
	:	DecimalIntegerLiteral
	|	HexIntegerLiteral
	|	OctalIntegerLiteral
	;

booleanLiteral
	:	'true'
	|	'false'
	;

// ANNOTATIONS
annotations
	:	annotation+
	;

annotation
	:	'@' typeName ('(' (Identifier '=')? elementValue ')')?
	;
	
elementValue
	:	conditionalExpression
	|	annotation
	|	elementValueArrayInitializer
	;
	
elementValueArrayInitializer
	:	'{' (elementValue)? (',')? '}'
	;
	
annotationTypeDeclaration
	:	'@' 'interface' Identifier annotationTypeBody
	;
	
annotationTypeBody
	:	'{' (annotationTypeElementDeclarations)? '}'
	;
	
annotationTypeElementDeclarations
	:	(annotationTypeElementDeclaration) (annotationTypeElementDeclaration)*
	;

annotationTypeElementDeclaration
	:	(modifier)* annotationTypeElementRest
	;
	
annotationTypeElementRest
	:	type Identifier annotationMethodOrConstantRest ';'
	|	classDeclaration
	|	interfaceDeclaration
	|	enumDeclaration
	|	annotationTypeDeclaration
	;
	
annotationMethodOrConstantRest
	:	annotationMethodRest
	|	annotationConstantRest
	;
	
annotationMethodRest
 	:	'(' ')' (defaultValue)?
 	;
 	
annotationConstantRest
 	:	variableDeclarators
 	;
 	
defaultValue
 	:	'default' elementValue
 	;

// STATEMENTS / BLOCKS
block
	:	'{' blockStatements '}'
	;
	
blockStatements
	:	blockStatement*
	;
	
blockStatement
	:	localVariableDeclarationStatement
	|	classOrInterfaceDeclaration
	|	(Identifier ':')? statement
	;
	
localVariableDeclarationStatement
	:	('final')? type variableDeclarators ';'
	;
	
statement
	:	block
	|	'assert' expression (':' expression)? ';'
	|	'if' parExpression statement ('else' statement)?
	|	'for' '(' forControl ')' statement
	|	'while' parExpression statement
	|	'do' statement 'while' parExpression ';'
	|	'try' block
		(	catches 'finally' block
		|	catches
		|	'finally' block
		)
	|	'switch' parExpression '{' switchBlockStatementGroups '}'
	|	'synchronized' parExpression block
	|	'return' expression? ';'
	|	'throw' expression ';'
	|	'break' Identifier? ';'
	|	'continue' Identifier? ';'
	|	';'
	|	statementExpression ';'
	|	Identifier ':' statement
	;
	
catches
	:	catchClause (catchClause)*
	;
	
catchClause
	:	'catch' '(' formalParameter ')' block
	;

formalParameter
	:	variableModifier* type variableDeclaratorId
	;
	
switchBlockStatementGroups
	:	(switchBlockStatementGroup)*
	;
	
switchBlockStatementGroup
	:	switchLabel blockStatement*
	;
	
switchLabel
	:	'case' constantExpression ':'
	|	'case' enumConstantName ':'
	|	'default' ':'
	;
	
moreStatementExpressions
	:	(',' statementExpression)*
	;

forControl
	:	forVarControl
	|	forInit ';' expression? ';' forUpdate?
	;

forInit
	:	'final'? type variableDeclarators
	|	statementExpressionList
	;
	
forVarControl
	:	'final'? (annotation)? type Identifier forVarControlRest
	;

forVarControlRest
	:	variableDeclaratorsRest ';' expression? ';' forUpdate?
	|	':' expression
	;

forUpdate
	:	statementExpressionList
	;

// EXPRESSIONS
parExpression
	:	'(' expression ')'
	;

statementExpressionList
	:	statementExpression (',' statementExpression)*
	;
	
statementExpression
	:	expression
	;

constantExpression
	:	expression
	;
	
expression
	:	conditionalExpression (assignmentOperator expression)?
	;
	
assignmentOperator
	:	'='
	|	'+='
	|	'-='
	|	'*='
	|	'/='
	|	'&='
	|	'|='
	|	'^='
	|	'%='
	|	'<' '<' '='
	|	'>' '>' '='
	|	'>' '>' '>' '='
	;

conditionalExpression
	:	conditionalOrExpression ('?' expression ':' expression)?
	;

conditionalOrExpression
	:	conditionalAndExpression ('||' conditionalAndExpression)*
	;

conditionalAndExpression
	:	inclusiveOrExpression ('&&' inclusiveOrExpression)*
	;

inclusiveOrExpression
	:	exclusiveOrExpression ('|' exclusiveOrExpression)*
	;

exclusiveOrExpression
	:	andExpression ('^' andExpression)*
	;

andExpression
	:	equalityExpression ('&' equalityExpression)*
	;

equalityExpression
	:	instanceOfExpression (('==' | '!=') instanceOfExpression)*
	;

instanceOfExpression
	:	relationalExpression ('instanceof' type)?
	;

relationalExpression
	:	shiftExpression (relationalOp shiftExpression)*
	;
	
relationalOp
	:	('<' '=' | '>' '=' | '<' | '>')
	;

shiftExpression
	:	additiveExpression (shiftOp additiveExpression)*
	;

// TODO: need a sem pred to check column on these >>>
shiftOp
	:	('<' '<' | '>' '>' '>' | '>' '>')
	;

additiveExpression
	:	multiplicativeExpression (('+' | '-') multiplicativeExpression)*
	;

multiplicativeExpression
	:	unaryExpression (('*' | '/' | '%') unaryExpression)*
	;
	
unaryExpression
	:	'+' unaryExpression
	|	'-' unaryExpression
	|	'++' primary
	|	'--' primary
	|	unaryExpressionNotPlusMinus
	;

unaryExpressionNotPlusMinus
	:	'~' unaryExpression
	| 	'!' unaryExpression
	|	castExpression
	|	primary selector* ('++' | '--')?
	;

castExpression
	:	'(' basicType ')' unaryExpression
	|	'(' (expression | type) ')' unaryExpressionNotPlusMinus
	;

primary
	:	parExpression
	|	nonWildcardTypeArguments (explicitGenericInvocationSuffix | 'this' arguments)
	|	'this' (arguments)?
	|	'super' superSuffix
	|	literal
	|	'new' creator
	|	Identifier ('.' Identifier)* (identifierSuffix)?
	|	basicType ('[' ']')* '.' 'class'
	|	'void' '.' 'class'
	;

identifierSuffix
	:	('[' ']')+ '.' 'class'
	|	('[' expression ']')+ // can also be matched by selector, but do here
	|	arguments
	|	'.' 'class'
	|	'.' explicitGenericInvocation
	|	'.' 'this'
	|	'.' 'super' arguments
	|	'.' 'new' (nonWildcardTypeArguments)? innerCreator
	;
	
creator
	:	nonWildcardTypeArguments? createdName
		(arrayCreatorRest | classCreatorRest)
	;

createdName
	:	Identifier nonWildcardTypeArguments?
		('.' Identifier nonWildcardTypeArguments?)*
	|	basicType
	;
	
innerCreator
	:	Identifier classCreatorRest
	;

arrayCreatorRest
	:	'['
	      	(	']' ('[' ']')* arrayInitializer
		|	expression ']' ('[' expression ']')* ('[' ']')*
		)
	;

classCreatorRest
	:	arguments classBody?
	;
	
explicitGenericInvocation
	:	nonWildcardTypeArguments explicitGenericInvocationSuffix
	;
	
nonWildcardTypeArguments
	:	'<' typeList '>'
	;
	
explicitGenericInvocationSuffix
	:	'super' superSuffix
	|	Identifier arguments
	;
	
selector
	:	'.' Identifier (arguments)?
	|	'.' 'this'
	|	'.' 'super' superSuffix
	|	'.' 'new' (nonWildcardTypeArguments)? innerCreator
	|	'[' expression ']'
	;
	
superSuffix
	:	arguments
	|	'.' Identifier (arguments)?
	;

arguments
	:	'(' statementExpressionList? ')'
	;



// LEXER
HexIntegerLiteral
	:	'0' ('x' | 'X') HexDigit+ IntegerTypeSuffix?
	;

DecimalIntegerLiteral
	:	('0' | '1'..'9' '0'..'9'*) IntegerTypeSuffix?
	;

OctalIntegerLiteral
	:	'0' ('0'..'7')+ IntegerTypeSuffix?
	;

fragment
HexDigit
	:	('0'..'9' | 'a'..'f' | 'A'..'F')
	;

fragment
IntegerTypeSuffix
	:	('l' | 'L')
	;

FloatingPointLiteral
	:	('0'..'9')+ '.' ('0'..'9')* Exponent? FloatTypeSuffix?
	|	'.' ('0'..'9')+ Exponent? FloatTypeSuffix?
	|	('0'..'9')+ Exponent FloatTypeSuffix?
	|	('0'..'9')+ Exponent? FloatTypeSuffix
	;

fragment
Exponent
	:	('e' | 'E') ('+' | '-')? ('0'..'9')+
	;

fragment
FloatTypeSuffix
	:	('f' | 'F' | 'd' | 'D')
	;

CharacterLiteral
	:	'\'' (EscapeSequence | ~('\'' | '\\')) '\''
	;

StringLiteral
	:	'"' (EscapeSequence | ~('\\' | '"'))* '"'
	;

fragment
EscapeSequence
	:	'\\' ('b' | 't' | 'n' | 'f' | 'r' | '\"' | '\'' | '\\')
	|	UnicodeEscape
	|	OctalEscape
	;

fragment
OctalEscape
	:	'\\' ('0'..'3') ('0'..'7') ('0'..'7')
	|	'\\' ('0'..'7') ('0'..'7')
	|	'\\' ('0'..'7')
	;

fragment
UnicodeEscape
	:	'\\' 'u' HexDigit HexDigit HexDigit HexDigit
	;

ENUM
	:	'enum' {if ( !enumIsKeyword ) type=Identifier;}
	;
	
Identifier 
	:	JavaLetter (JavaLetter | JavaLetterOrDigit)*
	;

// I found this char range in JavaCC's grammar, but Letter and Digit overlap.
// Still works, but...
fragment
JavaLetter
	:	'\u0024'
	|	'\u0041'..'\u005a'
	|	'\u005f'
	|	'\u0061'..'\u007a'
	|	'\u00c0'..'\u00d6'
	|	'\u00d8'..'\u00f6'
	|	'\u00f8'..'\u00ff'
	|	'\u0100'..'\u1fff'
	|	'\u3040'..'\u318f'
	|	'\u3300'..'\u337f'
	|	'\u3400'..'\u3d2d'
	|	'\u4e00'..'\u9fff'
	|	'\uf900'..'\ufaff'
	;

fragment
JavaLetterOrDigit
	:	'\u0030'..'\u0039'
	|	'\u0660'..'\u0669'
	|	'\u06f0'..'\u06f9'
	|	'\u0966'..'\u096f'
	|	'\u09e6'..'\u09ef'
	|	'\u0a66'..'\u0a6f'
	|	'\u0ae6'..'\u0aef'
	|	'\u0b66'..'\u0b6f'
	|	'\u0be7'..'\u0bef'
	|	'\u0c66'..'\u0c6f'
	|	'\u0ce6'..'\u0cef'
	|	'\u0d66'..'\u0d6f'
	|	'\u0e50'..'\u0e59'
	|	'\u0ed0'..'\u0ed9'
	|	'\u1040'..'\u1049'
	;

WS
	:	(' ' | '\r' | '\t' | '\u000C' | '\n') {channel=99;}
	;

Comment
	:	'/*' (options {greedy=false;} : . )* '*/' {channel=99;}
	;

EndOfLineComment
	:	'//' ~('\n' | '\r')* '\r'? '\n' {channel=99;}
	;
From obf at gmx.de  Sat Aug 26 11:09:10 2006
From: obf at gmx.de (Oliver Fischer)
Date: Sat Aug 26 11:09:58 2006
Subject: [antlr-interest] Traversing a tree without rebuilding it
Message-ID: <44F08E46.3020407@gmx.de>

Hello,

I am writing a small educational compiler, which should be able to
perfom some optimisations as removing unused variables...

Hence I have to perform some tests on the tree generated by my parser.
It seems so, that a TreeParser can not traverse a tree without
destroying the input tree.

Is it possible only to traverse a given tree without rebuilding it? It
is important to me to keep the input tree unmodified by the TreeParser.

Regards,

Oliver

From johng at as.arizona.edu  Sat Aug 26 15:51:48 2006
From: johng at as.arizona.edu (John Gruenenfelder)
Date: Sat Aug 26 15:52:09 2006
Subject: [antlr-interest] Segfault with very simple parser
Message-ID: <20060826225148.GA11125@as.arizona.edu>

Hello,

I am just starting to use ANTLR, though I have written a parser before using
yacc/bison.

Starting simple, I pieced together a very simple parser and lexer from the
many examples on the ANTLR website. I can run the new parser through ANTLR
without problems and without errors or warnings. I can even compile it without
any issues using g++ 4.1.

It's when I try to run this simple parser that I get a segfault. The C++ code
is:

  ...
  OpCLexer lexer(cin);
  OpCParser parser(lexer);

  parser.expr();
  RefAST t = parser.getAST();
  ...

The parser.expr() line executes and then I can type in a simple expression
like "1+1". As soon as I press return, I get a segfault. Checking with gdb, I
see that the segfault occurs in the antlr::ASTFactory::create() function in
the generated OpCParser.cpp file. The line in question is:

  tmp7_AST = astFactory->create(LT(1));

I ask this here because I am not sure what is going on. Being new to ANTLR I
am unsure if this is due to mistakes in the parser/lexer, something wrong with
my installation of ANTLR, or perhaps some incompatibilty with GCC 4.1. I have
only provided snippets of code, not knowing yet what the etiquette on this
list is regarding attachments, but I can attache them r place them online
elsewhere if needed.

Any help would be greatly appreciated. Thank you.


-- 
--John Gruenenfelder    Research Assistant, UMass Amherst student
                        Systems Manager, MKS Imaging Technology, LLC.
Try Weasel Reader for PalmOS  --  http://gutenpalm.sf.net
"This is the most fun I've had without being drenched in the blood
of my enemies!"
        --Sam of Sam & Max
From ric.klaren at gmail.com  Sat Aug 26 16:06:17 2006
From: ric.klaren at gmail.com (Ric Klaren)
Date: Sat Aug 26 16:06:21 2006
Subject: [antlr-interest] Segfault with very simple parser
In-Reply-To: <20060826225148.GA11125@as.arizona.edu>
References: <20060826225148.GA11125@as.arizona.edu>
Message-ID: <bc607a4e0608261606q3bff8d4bv8b0f290696d315e1@mail.gmail.com>

On 8/27/06, John Gruenenfelder <johng@as.arizona.edu> wrote:
> Starting simple, I pieced together a very simple parser and lexer from the
> many examples on the ANTLR website. I can run the new parser through ANTLR
> without problems and without errors or warnings. I can even compile it without
> any issues using g++ 4.1.
>
> It's when I try to run this simple parser that I get a segfault. The C++ code
> is:
>
>   ...
>   OpCLexer lexer(cin);
>   OpCParser parser(lexer);
>
>   parser.expr();
>   RefAST t = parser.getAST();
>   ...

You probably forgot to set the ASTFactory:

	ASTFactory ast_factory;

	parser.initializeASTFactory(ast_factory);
	parser.setASTFactory(&ast_factory);

Cheers,

Ric
From johng at as.arizona.edu  Sat Aug 26 16:30:57 2006
From: johng at as.arizona.edu (John Gruenenfelder)
Date: Sat Aug 26 16:31:37 2006
Subject: [antlr-interest] Segfault with very simple parser
In-Reply-To: <bc607a4e0608261606q3bff8d4bv8b0f290696d315e1@mail.gmail.com>
References: <20060826225148.GA11125@as.arizona.edu>
	<bc607a4e0608261606q3bff8d4bv8b0f290696d315e1@mail.gmail.com>
Message-ID: <20060826233057.GA11858@as.arizona.edu>

On Sun, Aug 27, 2006 at 01:06:17AM +0200, Ric Klaren wrote:
>>
>>It's when I try to run this simple parser that I get a segfault. The C++ 
>>code
>>is:
>>
>>  ...
>>  OpCLexer lexer(cin);
>>  OpCParser parser(lexer);
>>
>>  parser.expr();
>>  RefAST t = parser.getAST();
>>  ...
>
>You probably forgot to set the ASTFactory:
>
>	ASTFactory ast_factory;
>
>	parser.initializeASTFactory(ast_factory);
>	parser.setASTFactory(&ast_factory);
>
>Cheers,
>Ric

Ah, yes... perfect!  Thank you very much for the quick response.


-- 
--John Gruenenfelder    Research Assistant, UMass Amherst student
                        Systems Manager, MKS Imaging Technology, LLC.
Try Weasel Reader for PalmOS  --  http://gutenpalm.sf.net
"This is the most fun I've had without being drenched in the blood
of my enemies!"
        --Sam of Sam & Max
From ric.klaren at gmail.com  Sun Aug 27 04:47:36 2006
From: ric.klaren at gmail.com (Ric Klaren)
Date: Sun Aug 27 04:49:30 2006
Subject: [antlr-interest] Performance of ANTLR-generated lexer/parsers
In-Reply-To: <97b85e750608231259t4a91e79cia1f689ab6bf1874f@mail.gmail.com>
References: <97b85e750608231259t4a91e79cia1f689ab6bf1874f@mail.gmail.com>
Message-ID: <44F18658.7000801@gmail.com>

Charles Felstead wrote:
> Now what really surprised us is the speed of the parsers. We were expecting
> the ANTLR-generated parser to be much faster than the Xerces-based parser.
> After all, the ANTLR parser is specific to that one type of file I'm
> parsing
> whereas the Xerces is generic. Turns out the Xerces parser, is about 15-25%
> faster than the ANTLR one??!
> 
> So, my question is, can I flip some switches or configure the
> ANTLR-generated parser to improve the performance??

As Loring suggested using a flex lexer will probably get you a good
improvement. Another thing is to look critically at your grammar.
Depending on how you solve things in antlr things will be slow.

The most important rule of thumb is to shun syntactic predicates like
the plague (the construct with the '=>'). If you have one of these in
the lexer in the wrong spot then you can forget about any performance.

Cheers,

Ric

PS the antlr v3 C++ codegen is progressing but not ready yet. Hope to
get a lexing/parsing version out in the coming few weeks.

From antlr-list at arizona-software.ch  Sun Aug 27 19:19:48 2006
From: antlr-list at arizona-software.ch (Jean Bovet)
Date: Sun Aug 27 19:19:56 2006
Subject: [antlr-interest] ANTLRWorks 1.0b1 (source code + plugin for
	IntelliJ)
Message-ID: <C138C971-09A0-41A0-B841-C2BAC4B66480@arizona-software.ch>

Hello,

ANTLRWorks 1.0b1 is now available for download (thanks Terence for  
ANTLR 3.0b4!):

http://www.antlr.org/works/index.html

This version has some interesting new features:
- ANTLRWorks is now integrated into IntelliJ (use the IntelliJ plugin  
manager to install it)
- the debugger has detachable panels
- new syntax coloring mechanism that is way better than the old one  
(real-time)
- the source code is available!

The ANTLRWorks jar has everything you need including the latest  
version of ANTLR 3.0b4 and StringTemplate 2.3b10.

Enjoy!

Jean

*** Release notes ****

Version 1.0b1 - 08/26/06

- new real-time syntax coloring
- IntelliJ plugin integration
- improved debugger UI with detachable panels
- improved speed when checking grammar (delay creation of error paths)
- prefs: can specify now ANTLR 3 classpath
- handle NonRegularDecisionMessage errors
- display Out Of Memory error
- rules are sorted in the debugger input dialog
- do not analyze the grammar when debugging remotely
- mark the grammar as dirty if the file is modified outside ANTLRWorks
- resize view when graphic elements are moved (DFA decision, etc)
- toggle buttons in toolbar are now correctly selected/deselected
- list have now a white background on Windows/Linux
- source code available (BSD license)
- fixed a bug that would prevent small error paths from being  
displayed in the syntax diagram
- fixed a bug where performing some menu commands would failed on  
Windows/Linux (mostly cut and paste)
- fixed a bug where dialogs would not be displayed in the same screen  
as the parent frame in multi-screen environment
- fixed a bug that would prevent decision DFA to be displayed if the  
first token of a rule was not in the same line as the colon
- fixed a bug where a path with white space in it could make the  
compilation to fail
From francis.andre at easynet.fr  Mon Aug 28 00:21:56 2006
From: francis.andre at easynet.fr (Francis ANDRE)
Date: Mon Aug 28 00:22:19 2006
Subject: [antlr-interest] ANTLR276: Make visible the antlr.LLkParser.trace
	function
Message-ID: <005d01c6ca72$a57a0e40$6400a8c0@LAPTOP016>

Hi

I would like to add some new information on the trace generated by the parser but the trace function is private. WOuld it be possible to change its visibility to protected or public?

Rgds

Francis
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060828/583d22bf/attachment.html
From serefarikan at kurumsalteknoloji.com  Mon Aug 28 01:09:17 2006
From: serefarikan at kurumsalteknoloji.com (=?UTF-8?B?xZ5lcmVmIEFyxLFrYW4=?=)
Date: Mon Aug 28 01:09:58 2006
Subject: [antlr-interest] About the html grammar (and debugging)
Message-ID: <44F2A4AD.3050401@kurumsalteknoloji.com>

Hi there,
I have been taking a look that the html grammar in the grammars section, 
and the example html page that comes with it. It seems that the grammar 
can't parse the test page. I have checked it out and the error is 
related to meta tags in the head of the html file.
However I could not see anyting wrong with the grammar? This has also 
led to a desperate search for a good method for debugging the generated 
parser other than walking the code. Even if the code is fine, I'd really 
like a better method that shows me the tokens waiting in the lexer and 
such. There is a plugin for eclipse, but I can't say I am satisfied with 
it. I have also failed to use the -debug switch, since I get a 
"java.lang.ClassNotFoundException: antlr.parseview.ParseView" error.
So any comments on html grammar and debugging in general would be very 
much appreciated
Best Regards
Seref Arikan


From prashant.deva at gmail.com  Mon Aug 28 04:04:30 2006
From: prashant.deva at gmail.com (Prashant Deva)
Date: Mon Aug 28 04:04:36 2006
Subject: [antlr-interest] About the html grammar (and debugging)
In-Reply-To: <44F2A4AD.3050401@kurumsalteknoloji.com>
References: <44F2A4AD.3050401@kurumsalteknoloji.com>
Message-ID: <41fed8f80608280404v5dccf934h8a5a2c694da6d277@mail.gmail.com>

For debugging antlr grammar look at -
ANTLR Studio ( available at http://www.placidsystems.com)

If you dont want to buy it, you can always use the evaluation version
just for some debugging.

-- 
Prashant Deva
Creator, ANTLR Studio
Founder, Placid Systems, www.placidsystems.com

On 8/28/06, ?eref Ar?kan <serefarikan@kurumsalteknoloji.com> wrote:
>
> Hi there,
> I have been taking a look that the html grammar in the grammars section,
> and the example html page that comes with it. It seems that the grammar
> can't parse the test page. I have checked it out and the error is
> related to meta tags in the head of the html file.
> However I could not see anyting wrong with the grammar? This has also
> led to a desperate search for a good method for debugging the generated
> parser other than walking the code. Even if the code is fine, I'd really
> like a better method that shows me the tokens waiting in the lexer and
> such. There is a plugin for eclipse, but I can't say I am satisfied with
> it. I have also failed to use the -debug switch, since I get a
> "java.lang.ClassNotFoundException: antlr.parseview.ParseView" error.
> So any comments on html grammar and debugging in general would be very
> much appreciated
> Best Regards
> Seref Arikan
>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060828/5b98bb49/attachment.html
From serefarikan at kurumsalteknoloji.com  Mon Aug 28 04:46:21 2006
From: serefarikan at kurumsalteknoloji.com (=?ISO-8859-9?Q?=DEeref_Ar=FDkan?=)
Date: Mon Aug 28 04:46:50 2006
Subject: [antlr-interest] About the html grammar (and debugging)
In-Reply-To: <41fed8f80608280404v5dccf934h8a5a2c694da6d277@mail.gmail.com>
References: <44F2A4AD.3050401@kurumsalteknoloji.com>
	<41fed8f80608280404v5dccf934h8a5a2c694da6d277@mail.gmail.com>
Message-ID: <44F2D78D.2030008@kurumsalteknoloji.com>

Hi there,
I have downloaded it, and it looks mostly fine, however, I'd like to 
learn how to use the -debug switch in antlr.
Regards
Seref

Prashant Deva wrote:
> For debugging antlr grammar look at -
> ANTLR Studio ( available at http://www.placidsystems.com)
>
> If you dont want to buy it, you can always use the evaluation version 
> just for some debugging.
>
> -- 
> Prashant Deva
> Creator, ANTLR Studio
> Founder, Placid Systems, www.placidsystems.com 
> <http://www.placidsystems.com>
>
> On 8/28/06, * ?eref Ar?kan* <serefarikan@kurumsalteknoloji.com 
> <mailto:serefarikan@kurumsalteknoloji.com>> wrote:
>
>     Hi there,
>     I have been taking a look that the html grammar in the grammars
>     section,
>     and the example html page that comes with it. It seems that the
>     grammar
>     can't parse the test page. I have checked it out and the error is
>     related to meta tags in the head of the html file.
>     However I could not see anyting wrong with the grammar? This has also
>     led to a desperate search for a good method for debugging the
>     generated
>     parser other than walking the code. Even if the code is fine, I'd
>     really
>     like a better method that shows me the tokens waiting in the lexer and
>     such. There is a plugin for eclipse, but I can't say I am
>     satisfied with
>     it. I have also failed to use the -debug switch, since I get a
>     " java.lang.ClassNotFoundException: antlr.parseview.ParseView" error.
>     So any comments on html grammar and debugging in general would be very
>     much appreciated
>     Best Regards
>     Seref Arikan
>
>
>
>
>


From jarrod at vertigrated.com  Mon Aug 28 11:07:10 2006
From: jarrod at vertigrated.com (jarrod roberson)
Date: Mon Aug 28 11:07:13 2006
Subject: [antlr-interest] Parsing Binary Files with ANTLR V3.x? Any
	examples?
In-Reply-To: <993CA851-9FCF-4465-997F-4A2BBF1AD410@cs.usfca.edu>
References: <2389d4730608091108m33669645l4d3a6f5c4b5f3060@mail.gmail.com>
	<993CA851-9FCF-4465-997F-4A2BBF1AD410@cs.usfca.edu>
Message-ID: <2389d4730608281107x24809c28xbf23f9a0651f1446@mail.gmail.com>

On 8/9/06, Terence Parr <parrt@cs.usfca.edu> wrote:
>
> On Aug 9, 2006, at 11:08 AM, jarrod roberson wrote:
>
> > anyone have any examples on how to parse binary files with ANTLR V3?
> > I have looked everywhere and can't find anything substaintial.
>
> I have not tried yet, but you'll probably need a new stream other
> than CharStream.  ANTLRByteStream perhaps.
>
> Then, just use unicode '\u00xx' chars in your lexer.


thanks for the reply, but that really make any sense to me.

anyone have a concrete example, no matter how contrived?

my basic header I am trying to parse looks something like this

wfs!<byte><byte><unsigned long><unsigned long> . . . etc.
From ric.klaren at gmail.com  Mon Aug 28 12:56:50 2006
From: ric.klaren at gmail.com (Ric Klaren)
Date: Mon Aug 28 12:56:54 2006
Subject: [antlr-interest] About the html grammar (and debugging)
In-Reply-To: <44F2D78D.2030008@kurumsalteknoloji.com>
References: <44F2A4AD.3050401@kurumsalteknoloji.com>
	<41fed8f80608280404v5dccf934h8a5a2c694da6d277@mail.gmail.com>
	<44F2D78D.2030008@kurumsalteknoloji.com>
Message-ID: <bc607a4e0608281256p71c4530fgbd582e2a19384e52@mail.gmail.com>

Hi,

On 8/28/06, ?eref Ar?kan <serefarikan@kurumsalteknoloji.com> wrote:
> Hi there,
> I have downloaded it, and it looks mostly fine, however, I'd like to
> learn how to use the -debug switch in antlr.

The -debug switch may not be usable anymore due to parseview not being
maintained anymore... There's an updated version of parseview at:

http://pts14043.pts.nl/antlr/parseview-2.7.1.zip

The parseview homepage is at:

http://www.javadude.com/tools/parseview/

The above maybe still works no idea.. don't ask me I've never used it.

There's a number of -trace switches to antlr which can help in debugging:

  -traceLexer        have lexer rules call traceIn/traceOut.
  -traceParser       have parser rules call traceIn/traceOut.
  -traceTreeParser   have tree parser rules call traceIn/traceOut.

You can override the methods used in tracing to tweak the output.

Cheers,

Ric
From johng at as.arizona.edu  Mon Aug 28 16:37:38 2006
From: johng at as.arizona.edu (John Gruenenfelder)
Date: Mon Aug 28 16:38:10 2006
Subject: [antlr-interest] Trouble with nondeterminism
Message-ID: <20060828233738.GA20511@as.arizona.edu>

I keeping with my "starting simple" plan, I've been adding bits to my simple
parser as I get the hang of ANTLR.  The many examples on the Net are also
helping a great deal.

But...  I'm having trouble trying to have my lexer recognize both int and
double number types.  I've tried a few different examples all ending in
similar ANTLR messages.  It looks like this:

Constant
    :   INT
    |   DOUBLE
    ;

INT
    :   ('0' | '1'..'9' ('0'..'9')*) ;

DOUBLE
    :   ('0'..'9')+ '.' ('0'..'9')* (Exponent)?
    |   '.' ('0'..'9')+ (Exponent)?
    |   ('0'..'9')+ Exponent
    |   ('0'..'9')+ (Exponent)?
    ;

protected
Exponent
    :   ('e'|'E') ('+'|'-')? ('0'..'9')+ ;


Now, I understand that very clearly and it *seems* to make sense.  But when I
run it through ANTLR, I get:

opc.g: warning:lexical nondeterminism between rules Constant and INT upon
opc.g:     k==1:'0'..'9'
opc.g:     k==2:<end-of-token>,'0'..'9'
opc.g:     k==3:<end-of-token>,'0'..'9'
opc.g: warning:lexical nondeterminism between rules Constant and DOUBLE upon
opc.g:     k==1:'.','0'..'9'
opc.g:     k==2:<end-of-token>,'.','0'..'9','E','e'
opc.g:     k==3:<end-of-token>,'+','-','.','0'..'9','E','e'
opc.g: warning:lexical nondeterminism between rules INT and DOUBLE upon
opc.g:     k==1:'0'..'9'
opc.g:     k==2:<end-of-token>,'0'..'9'
opc.g:     k==3:<end-of-token>,'0'..'9'
opc.g:181: warning:lexical nondeterminism between alts 1 and 2 of block upon
opc.g:181:     k==1:'0'..'9'
opc.g:181:     k==2:<end-of-token>,'0'..'9'
opc.g:181:     k==3:<end-of-token>,'0'..'9'
opc.g:214: warning:lexical nondeterminism between alts 1 and 3 of block upon
opc.g:214:     k==1:'0'..'9'
opc.g:214:     k==2:'0'..'9'
opc.g:214:     k==3:'0'..'9','E','e'
opc.g:214: warning:lexical nondeterminism between alts 1 and 4 of block upon
opc.g:214:     k==1:'0'..'9'
opc.g:214:     k==2:'0'..'9'
opc.g:214:     k==3:<end-of-token>,'0'..'9','E','e'
opc.g:214: warning:lexical nondeterminism between alts 3 and 4 of block upon
opc.g:214:     k==1:'0'..'9'
opc.g:214:     k==2:'0'..'9','E','e'
opc.g:214:     k==3:'+','-','0'..'9','E','e'

I see that and it also makes sense, since ANTLR is kind enough to tell me just
where the lexer will get confused.

I think my troubles stem from prior experience with tools like bison/flex and
now working with a recursive decent parser like ANTLR.  There's something I'm
just not "getting"...  For example, maybe these are warnings I don't need to
worry about, not unlike the occasional shift/reduce conflict one might
encounter with bison?  Or maybe I *do* need to worry about them...

I would greatly appreceiate any help in clearing up my confusion.  I'm sure
it's not that difficult a task.  Thanks again.


-- 
--John Gruenenfelder    Research Assistant, UMass Amherst student
                        Systems Manager, MKS Imaging Technology, LLC.
Try Weasel Reader for PalmOS  --  http://gutenpalm.sf.net
"This is the most fun I've had without being drenched in the blood
of my enemies!"
        --Sam of Sam & Max
From Ivo.Spaleny at bsp.cz  Mon Aug 28 18:17:46 2006
From: Ivo.Spaleny at bsp.cz (=?iso-8859-2?B?U3DhbGVu/SBJdm8=?=)
Date: Mon Aug 28 18:17:38 2006
Subject: [antlr-interest] Trouble with nondeterminism
In-Reply-To: <20060828233738.GA20511@as.arizona.edu>
Message-ID: <A0C698600C277342A6A369521C1895C32F24C6@pssserver.bsp.cz>

Hi,

Sub-rule

  ('0'..'9')+ (Exponent)?

can be splitted into:

  ('0' | '1'..'9' ('0'..'9')*) // duplicity of INT token
| ('0'..'9')+ Exponent         // duplicity of an alternative DOUBLE branch 
| '0' ('0'..'9')+              // the unique piece of information in this sub-rule

In ANTLR point of view, nondeterministic input probably results in deterministic output. ANTLR disables alternatives. But isn't it better to be sure; if "1" is DOUBLE or INT token finally?

Best regards,

Ivo Spaleny


-----Original Message-----
From: antlr-interest-bounces@antlr.org [mailto:antlr-interest-bounces@antlr.org] On Behalf Of John Gruenenfelder
Sent: Tuesday, August 29, 2006 1:38 AM
To: antlr-interest@antlr.org
Subject: [antlr-interest] Trouble with nondeterminism

I keeping with my "starting simple" plan, I've been adding bits to my simple
parser as I get the hang of ANTLR.  The many examples on the Net are also
helping a great deal.

But...  I'm having trouble trying to have my lexer recognize both int and
double number types.  I've tried a few different examples all ending in
similar ANTLR messages.  It looks like this:

Constant
    :   INT
    |   DOUBLE
    ;

INT
    :   ('0' | '1'..'9' ('0'..'9')*) ;

DOUBLE
    :   ('0'..'9')+ '.' ('0'..'9')* (Exponent)?
    |   '.' ('0'..'9')+ (Exponent)?
    |   ('0'..'9')+ Exponent
    |   ('0'..'9')+ (Exponent)?
    ;

protected
Exponent
    :   ('e'|'E') ('+'|'-')? ('0'..'9')+ ;


Now, I understand that very clearly and it *seems* to make sense.  But when I
run it through ANTLR, I get:

opc.g: warning:lexical nondeterminism between rules Constant and INT upon
opc.g:     k==1:'0'..'9'
opc.g:     k==2:<end-of-token>,'0'..'9'
opc.g:     k==3:<end-of-token>,'0'..'9'
opc.g: warning:lexical nondeterminism between rules Constant and DOUBLE upon
opc.g:     k==1:'.','0'..'9'
opc.g:     k==2:<end-of-token>,'.','0'..'9','E','e'
opc.g:     k==3:<end-of-token>,'+','-','.','0'..'9','E','e'
opc.g: warning:lexical nondeterminism between rules INT and DOUBLE upon
opc.g:     k==1:'0'..'9'
opc.g:     k==2:<end-of-token>,'0'..'9'
opc.g:     k==3:<end-of-token>,'0'..'9'
opc.g:181: warning:lexical nondeterminism between alts 1 and 2 of block upon
opc.g:181:     k==1:'0'..'9'
opc.g:181:     k==2:<end-of-token>,'0'..'9'
opc.g:181:     k==3:<end-of-token>,'0'..'9'
opc.g:214: warning:lexical nondeterminism between alts 1 and 3 of block upon
opc.g:214:     k==1:'0'..'9'
opc.g:214:     k==2:'0'..'9'
opc.g:214:     k==3:'0'..'9','E','e'
opc.g:214: warning:lexical nondeterminism between alts 1 and 4 of block upon
opc.g:214:     k==1:'0'..'9'
opc.g:214:     k==2:'0'..'9'
opc.g:214:     k==3:<end-of-token>,'0'..'9','E','e'
opc.g:214: warning:lexical nondeterminism between alts 3 and 4 of block upon
opc.g:214:     k==1:'0'..'9'
opc.g:214:     k==2:'0'..'9','E','e'
opc.g:214:     k==3:'+','-','0'..'9','E','e'

I see that and it also makes sense, since ANTLR is kind enough to tell me just
where the lexer will get confused.

I think my troubles stem from prior experience with tools like bison/flex and
now working with a recursive decent parser like ANTLR.  There's something I'm
just not "getting"...  For example, maybe these are warnings I don't need to
worry about, not unlike the occasional shift/reduce conflict one might
encounter with bison?  Or maybe I *do* need to worry about them...

I would greatly appreceiate any help in clearing up my confusion.  I'm sure
it's not that difficult a task.  Thanks again.


-- 
--John Gruenenfelder    Research Assistant, UMass Amherst student
                        Systems Manager, MKS Imaging Technology, LLC.
Try Weasel Reader for PalmOS  --  http://gutenpalm.sf.net
"This is the most fun I've had without being drenched in the blood
of my enemies!"
        --Sam of Sam & Max
From johng at as.arizona.edu  Mon Aug 28 18:46:28 2006
From: johng at as.arizona.edu (John Gruenenfelder)
Date: Mon Aug 28 18:47:13 2006
Subject: [antlr-interest] Trouble with nondeterminism
In-Reply-To: <A0C698600C277342A6A369521C1895C32F24C6@pssserver.bsp.cz>
References: <20060828233738.GA20511@as.arizona.edu>
	<A0C698600C277342A6A369521C1895C32F24C6@pssserver.bsp.cz>
Message-ID: <20060829014628.GA22774@as.arizona.edu>

On Tue, Aug 29, 2006 at 03:17:46AM +0200, Sp?len? Ivo wrote:
>Hi,
>
>Sub-rule
>
>  ('0'..'9')+ (Exponent)?
>
>can be splitted into:
>
>  ('0' | '1'..'9' ('0'..'9')*) // duplicity of INT token
>| ('0'..'9')+ Exponent         // duplicity of an alternative DOUBLE branch 
>| '0' ('0'..'9')+              // the unique piece of information in this sub-rule
>
>In ANTLR point of view, nondeterministic input probably results in deterministic output. ANTLR disables alternatives. But isn't it better to be sure; if "1" is DOUBLE or INT token finally?
>
>Best regards,
>
>Ivo Spaleny

Hi,

Okay, that certainly makes sense.  I guess my question is what is the best way
to resolve these problems with common left prefixes, as one gets with
different numerical types.

After re-reading the section in the reference manual about predicates, I have
to following which generates no warnings from ANTLR:

Constant
    :   ( ('0'..'9')+ '.') => ('0'..'9')+ '.' ('0'..'9')* (Exponent)?
            { $setType(DOUBLE); }
    |   '.' ('0'..'9')+ (Exponent)?
            { $setType(DOUBLE); }
    |   ( ('0'..'9')+ ('e' | 'E')) => ('0'..'9')+ Exponent
            { $setType(DOUBLE); }
    |   ('0' | ( '1'..'9' ('0'..'9')* ))
            { $setType(INT); }
    ;

Is that a "good" method for dealing with this problem?  I must also say that
even after reading that section and hacking together the above rules, I still
don't really understand how these predicate rules help ANTLR do its job.  It
still must grab the characters one at a time.  How do the predicates make the
task easier or, at the very least, unambiguous?


-- 
--John Gruenenfelder    Research Assistant, UMass Amherst student
                        Systems Manager, MKS Imaging Technology, LLC.
Try Weasel Reader for PalmOS  --  http://gutenpalm.sf.net
"This is the most fun I've had without being drenched in the blood
of my enemies!"
        --Sam of Sam & Max
From pradeep_koolkarni at yahoo.com  Tue Aug 29 03:17:21 2006
From: pradeep_koolkarni at yahoo.com (pradeep kulkarni)
Date: Tue Aug 29 03:17:26 2006
Subject: [antlr-interest] Giving error while reducing rule
Message-ID: <20060829101721.67127.qmail@web50611.mail.yahoo.com>

hi , 
I have written parser to parse select statement .Facing one problem there. Following rule is not getting reduced.

displayed_column: column_name
                   | expr

column_name: (a_dot_b_id | keyword);

expr  : function LP (variable)* RP;

function : a_dot_b_id;

a_dot_b_id : id DOT a_dot_b_id;

id :  NQ_ID | DQ_ID

input : select a, a.b() from dual;
 
 ERROR 
 line 1:14: expecting "from", found '('
          Len = 6 -- Col = 1 -- name = select
 
 i tried to use syntactic perdicates but not working . 

displayed_column: column_name
                    | expr
At the time of recsing this rule its always taking first predicate not choosing secoding predicate if a_dot_b_id is followed by ' (' (LP).  My requirement is   on input stream a.b() something like appears then it should choose expr rule.

thanks in advance .

Pradeep

 		
---------------------------------
How low will we go? Check out Yahoo! Messenger?s low  PC-to-Phone call rates.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060829/ab05d992/attachment.html
From ric.klaren at gmail.com  Tue Aug 29 04:21:08 2006
From: ric.klaren at gmail.com (Ric Klaren)
Date: Tue Aug 29 04:21:13 2006
Subject: [antlr-interest] Trouble with nondeterminism
In-Reply-To: <20060829014628.GA22774@as.arizona.edu>
References: <20060828233738.GA20511@as.arizona.edu>
	<A0C698600C277342A6A369521C1895C32F24C6@pssserver.bsp.cz>
	<20060829014628.GA22774@as.arizona.edu>
Message-ID: <bc607a4e0608290421j53e66100jb19644627c5c5d62@mail.gmail.com>

On 8/29/06, John Gruenenfelder <johng@as.arizona.edu> wrote:
> Okay, that certainly makes sense.  I guess my question is what is the best way
> to resolve these problems with common left prefixes, as one gets with
> different numerical types.

Left factoring is the solution. (or using predicates but that's a only
if nothing else helps solution)

One thing to keep in mind with lexers is that the lexer is made up of
a big automatically generated nextToken rule that gives an alternative
for all the rules in the lexer. (Hence the ambiguity warnings between
int/double)

> After re-reading the section in the reference manual about predicates, I have
> to following which generates no warnings from ANTLR:
>
> Constant
>     :   ( ('0'..'9')+ '.') => ('0'..'9')+ '.' ('0'..'9')* (Exponent)?
>             { $setType(DOUBLE); }
>     |   '.' ('0'..'9')+ (Exponent)?
>             { $setType(DOUBLE); }
>     |   ( ('0'..'9')+ ('e' | 'E')) => ('0'..'9')+ Exponent
>             { $setType(DOUBLE); }
>     |   ('0' | ( '1'..'9' ('0'..'9')* ))
>             { $setType(INT); }
>     ;
>
> Is that a "good" method for dealing with this problem?

It works... but for every invocation of the constant rule it will for
the first alternative read input untill ( ('0'..'9')+ '.') => .. is
satisfied or failed. In the succes case it will rollback the input and
enter the first alternative. In the failed case it will attempt to
match the '.' for the 2nd alternative if that does not work it will
try the predicate ( ('0'..'9')+ ('e' | 'E')) => .. read input untill
the predicate fails or succeeds. If it succeeds it will roll back the
input and enter the alternative. If it fails it will rollback the
input and enter the last alternative.

=> introduces a trial and error run of the input (or backtracking).
E.g. it's very expensive in terms of efficiency. In terms of
readability or speed of implementing it's pretty efficient ;)

The other solution to this problem is to left factor the rule:

Constant:
   { $setType(INT); /* int untill proven otherwise */ }
   ('0' | ( '1'..'9' ('0'..'9')* ))
   (
         (  '.' ('0'..'9')* (Exponent)? )
         { $setType(DOUBLE); }
      |  Exponent
         { $setType(DOUBLE); }
   )?
   |   '.' ('0'..'9')+ (Exponent)?
      { $setType(DOUBLE); }
   ;

This should do the trick I think (unless I made a type/thinko)

Left factoring usually leads to less readable code. But it's a lot
faster. In a lexer you'd want to try to have no => constructs. But
during prototyping it's quite handy.

> I must also say that
> even after reading that section and hacking together the above rules, I still
> don't really understand how these predicate rules help ANTLR do its job.  It
> still must grab the characters one at a time.  How do the predicates make the
> task easier or, at the very least, unambiguous?

One thing to understanding antlr is reading the generated code (no
worries it's quite readable). For kicks safe the code generated for
the backtracking version then generate the code for the left factored
version and compare. (or generate code with -traceLexer and then
compile and run) )

Once you get a feel for it it's really intuitive.

Cheers,

Ric
From serefarikan at kurumsalteknoloji.com  Tue Aug 29 09:27:03 2006
From: serefarikan at kurumsalteknoloji.com (Seref Arikan)
Date: Tue Aug 29 09:27:08 2006
Subject: [antlr-interest] An ambiguity question
In-Reply-To: <20060829101721.67127.qmail@web50611.mail.yahoo.com>
References: <20060829101721.67127.qmail@web50611.mail.yahoo.com>
Message-ID: <44F46AD7.3060309@kurumsalteknoloji.com>

Hi,
While taking a look at the past messages, I saw an interesting one. This 
is from Martin Traverso:

Howdy,

What is the best way to resolve the ambiguities caused by 'D' a in rule c in
the following grammar?

grammar T;
a: b ('+' b)*;
b: c ('*' c)*;
c: 'D' a
   | 'x';

Essentially, I want it to parse stuff like:

x * x + x * x
D x * x + x * x    (should parse as D ((x * x) + (x * x)) )
x + D x * x + x * x  (should parse as x + D ((x * x) + (x * x)) )
D x + D x  (should parse as D (x + D x) )
etc.

Now, Terrence has answered this one, but I'd like to ask the following:
How does the ambiguity occur?  Would someone please provide me an 
example input to the question below that will cause the problem?  A 
little explanation on this one would be great

Best Regards
Seref Arikan



-- 
No virus found in this outgoing message.
Checked by AVG Free Edition.
Version: 7.1.405 / Virus Database: 268.11.6/430 - Release Date: 8/28/2006

From cekvenich at gmail.com  Tue Aug 29 14:31:27 2006
From: cekvenich at gmail.com (netsql)
Date: Tue Aug 29 14:31:32 2006
Subject: [antlr-interest] help wanted: sf bay area
Message-ID: <4b1b8c090608291431v5a45227ep148f1d46b02e4e32@mail.gmail.com>

If you are interested in parsers and live in San Francisco Bay Area, we are
looking for full time people, please send you resume to
v.cekvenich at yahoo.com and I can call you to tell you more.

:-)
.V
VP Eng. (Hiring Manager)
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060829/47bace6c/attachment.html
From johng at as.arizona.edu  Tue Aug 29 16:05:57 2006
From: johng at as.arizona.edu (John Gruenenfelder)
Date: Tue Aug 29 16:06:56 2006
Subject: [antlr-interest] Trouble with nondeterminism
In-Reply-To: <bc607a4e0608290421j53e66100jb19644627c5c5d62@mail.gmail.com>
References: <20060828233738.GA20511@as.arizona.edu>
	<A0C698600C277342A6A369521C1895C32F24C6@pssserver.bsp.cz>
	<20060829014628.GA22774@as.arizona.edu>
	<bc607a4e0608290421j53e66100jb19644627c5c5d62@mail.gmail.com>
Message-ID: <20060829230557.GA23317@as.arizona.edu>

On Tue, Aug 29, 2006 at 01:21:08PM +0200, Ric Klaren wrote:
>>
>>Is that a "good" method for dealing with this problem?
>
>It works... but for every invocation of the constant rule it will for
>the first alternative read input untill ( ('0'..'9')+ '.') => .. is
>satisfied or failed. In the succes case it will rollback the input and
>enter the first alternative. In the failed case it will attempt to
>match the '.' for the 2nd alternative if that does not work it will
>try the predicate ( ('0'..'9')+ ('e' | 'E')) => .. read input untill
>the predicate fails or succeeds. If it succeeds it will roll back the
>input and enter the alternative. If it fails it will rollback the
>input and enter the last alternative.
>
>=> introduces a trial and error run of the input (or backtracking).
>E.g. it's very expensive in terms of efficiency. In terms of
>readability or speed of implementing it's pretty efficient ;)

Ohhh... it's like a bright light just went on in my head.  :)
This explanation really clears predicates up very nicely.  I definitely get it
now.

>The other solution to this problem is to left factor the rule:
>
>Constant:
>  { $setType(INT); /* int untill proven otherwise */ }
>  ('0' | ( '1'..'9' ('0'..'9')* ))
>  (
>        (  '.' ('0'..'9')* (Exponent)? )
>        { $setType(DOUBLE); }
>     |  Exponent
>        { $setType(DOUBLE); }
>  )?
>  |   '.' ('0'..'9')+ (Exponent)?
>     { $setType(DOUBLE); }
>  ;
>
>This should do the trick I think (unless I made a type/thinko)
>
>Left factoring usually leads to less readable code. But it's a lot
>faster. In a lexer you'd want to try to have no => constructs. But
>during prototyping it's quite handy.

And this example clears up the other half of my confusion.

Many thanks for taking the time to explain this.  It really has been a huge
help in my understanding of ANTLR and its method of operation.


-- 
--John Gruenenfelder    Research Assistant, UMass Amherst student
                        Systems Manager, MKS Imaging Technology, LLC.
Try Weasel Reader for PalmOS  --  http://gutenpalm.sf.net
"This is the most fun I've had without being drenched in the blood
of my enemies!"
        --Sam of Sam & Max
From T.Heiber at pilz.de  Tue Aug 29 23:30:23 2006
From: T.Heiber at pilz.de (Timo Heiber)
Date: Tue Aug 29 23:30:38 2006
Subject: [antlr-interest] Antwort: antlr-interest Digest, Vol 21, Issue 56
In-Reply-To: <20060829162709.3FADFDCE30@www.antlr.org>
Message-ID: <OF3EB8F5E8.09478F4E-ONC12571DA.00229DA1-C12571DA.0023BF07@pilz.de>

Seref,

your last example actually illustrates the ambiguity problem quite nicely:

"D x + D x  (should parse as D (x + D x) )"

D (x + D x) can be obtained by applying the following sequence of parser
rules:

a
-> b
-> c
-> 'D' a
-> 'D' b '+' b
-> 'D' c '+' c
-> 'D' 'x' '+' 'D' a
-> 'D' 'x' '+' 'D' b
-> 'D' 'x' '+' 'D' c
-> 'D' 'x' '+' 'D' x

But you can get the same by applying an alternative sequence of rules:

a
-> b '+' b
-> c '+' c
-> 'D' a '+' 'D' a
-> 'D' b '+' 'D' b
-> 'D' 'x' '+' 'D' 'x'

Hope this helps.

      - Timo


> ------------------------------
>
> Message: 7
> Date: Tue, 29 Aug 2006 19:27:03 +0300
> From: Seref Arikan <serefarikan@kurumsalteknoloji.com>
> Subject: [antlr-interest] An ambiguity question
> To: pradeep kulkarni <pradeep_koolkarni@yahoo.com>
> Cc: antlr-interest@antlr.org
> Message-ID: <44F46AD7.3060309@kurumsalteknoloji.com>
> Content-Type: text/plain; charset=ISO-8859-1; format=flowed
>
> Hi,
> While taking a look at the past messages, I saw an interesting one. This
> is from Martin Traverso:
>
> Howdy,
>
> What is the best way to resolve the ambiguities caused by 'D' a in rule c
in
> the following grammar?
>
> grammar T;
> a: b ('+' b)*;
> b: c ('*' c)*;
> c: 'D' a
>    | 'x';
>
> Essentially, I want it to parse stuff like:
>
> x * x + x * x
> D x * x + x * x    (should parse as D ((x * x) + (x * x)) )
> x + D x * x + x * x  (should parse as x + D ((x * x) + (x * x)) )
> D x + D x  (should parse as D (x + D x) )
> etc.
>
> Now, Terrence has answered this one, but I'd like to ask the following:
> How does the ambiguity occur?  Would someone please provide me an
> example input to the question below that will cause the problem?  A
> little explanation on this one would be great
>
> Best Regards
> Seref Arikan
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20060830/91ec0329/attachment.html
From ewbank at gmail.com  Wed Aug 30 08:51:14 2006
From: ewbank at gmail.com (Bryan Ewbank)
Date: Wed Aug 30 08:51:18 2006
Subject: [antlr-interest] Traversing a tree without rebuilding it
In-Reply-To: <44F08E46.3020407@gmx.de>
References: <44F08E46.3020407@gmx.de>
Message-ID: <dd3a065f0608300851r51dc75d5wd61748264ca49250@mail.gmail.com>

In v2 ANTLR, in the options section for the class extending
TreeParser, add the option:
    builtAST = false;
This will suppress the construction of the output tree (and greating
speed processing :-)

On 8/26/06, Oliver Fischer <obf@gmx.de> wrote:
> Hello,
>
> I am writing a small educational compiler, which should be able to
> perfom some optimisations as removing unused variables...
>
> Hence I have to perform some tests on the tree generated by my parser.
> It seems so, that a TreeParser can not traverse a tree without
> destroying the input tree.
>
> Is it possible only to traverse a given tree without rebuilding it? It
> is important to me to keep the input tree unmodified by the TreeParser.
>
> Regards,
>
> Oliver
>
>
From asmith at moncons.co.uk  Thu Aug 31 04:24:50 2006
From: asmith at moncons.co.uk (Montebello)
Date: Thu Aug 31 04:26:58 2006
Subject: [antlr-interest] ANTLRWorks1.0b1 user friendliness
Message-ID: <44F6C702.2060704@moncons.co.uk>

Hi Ter and Jean,

Firstly, thanks for a very good tool and prompt responses!

I think that there are some minor improvements that could be made to its
 use-ability. These are:
(a) Restore previous window sizes and positions on start up or add an
option to choose this behaviour to the Preferences. (This might  be the
most difficult to implement of these suggestions. My OS is Windows 2KPro.)
(b) Increase the options for the choice of file(s) to be loaded on start
up. At the least add the "File last saved" to the Preferences options
and preferably an option for "All files loaded when shut down" as well.
(c) Remove any status line message when the console itself is cleared -
particularly any red error message.
(d) Add a confirmatory "OK" to the present console message and a green
status line message when a Grammar (or other) check is passed or
completed. (In combination with the need for (c) this is the most
annoying deficiency to me.)

The improvements in the latest version were definitely in the right
direction,
Andrew Smith
From ewbank at gmail.com  Thu Aug 31 05:00:58 2006
From: ewbank at gmail.com (Bryan Ewbank)
Date: Thu Aug 31 05:01:02 2006
Subject: [antlr-interest] Performance of ANTLR-generated lexer/parsers
In-Reply-To: <44F18658.7000801@gmail.com>
References: <97b85e750608231259t4a91e79cia1f689ab6bf1874f@mail.gmail.com>
	<44F18658.7000801@gmail.com>
Message-ID: <dd3a065f0608310500q6775fedcu19dd66a646dedbb8@mail.gmail.com>

Wanted to echo and reinforce Ric's statement here.  We're using 2.7.6 and C++,
and had to purge all "=>" before performance was anywhere near acceptable.

Another way to improve performance is to have any and all TreeParser's be tree
walkers, rather than tree generators -- in the options section of the
TreeParser, add "buildAST=false;". You can still manipulate the AST, but any
transformations are IN PLACE, meaning you need to be aware that there is only
one tree.

We've found that "buildAST=true" is a good place to establish a working
prototype, then use "buildAST=false" and make it work.

- Bryan Ewbank


On 8/27/06, Ric Klaren <ric.klaren@gmail.com> wrote:
> The most important rule of thumb is to shun syntactic predicates like the
> plague (the construct with the '=>'). If you have one of these in the lexer
> in the wrong spot then you can forget about any performance.
>
> Cheers,
>
> Ric
From dave at badgers-in-foil.co.uk  Thu Aug 31 08:57:59 2006
From: dave at badgers-in-foil.co.uk (David Holroyd)
Date: Thu Aug 31 08:58:05 2006
Subject: [antlr-interest] Why isn't Token an interface?
Message-ID: <20060831155759.GA1583@badgers-in-foil.co.uk>

...it's not that this is a problem for me at the moment, but the Token
class seems to be begging to become an interface.

Just out of interest, why does this class have the slightly odd
structure that it does?  


ta,
dave

-- 
http://david.holroyd.me.uk/
From parrt at cs.usfca.edu  Thu Aug 31 09:29:20 2006
From: parrt at cs.usfca.edu (Terence Parr)
Date: Thu Aug 31 09:29:23 2006
Subject: [antlr-interest] Why isn't Token an interface?
In-Reply-To: <20060831155759.GA1583@badgers-in-foil.co.uk>
References: <20060831155759.GA1583@badgers-in-foil.co.uk>
Message-ID: <5AEBEAD4-415D-4DC1-9C4F-AA8466C666DE@cs.usfca.edu>


On Aug 31, 2006, at 8:57 AM, David Holroyd wrote:

> ...it's not that this is a problem for me at the moment, but the Token
> class seems to be begging to become an interface.
>
> Just out of interest, why does this class have the slightly odd
> structure that it does?

Can you be more specific?

Thanks :)
Ter

From timothyjwashington at yahoo.ca  Thu Aug 31 10:28:07 2006
From: timothyjwashington at yahoo.ca (Timothy Washington)
Date: Thu Aug 31 10:28:09 2006
Subject: [antlr-interest] Recognising XML in a grammar
Message-ID: <20060831172807.30932.qmail@web30303.mail.mud.yahoo.com>


Hello there. I am new to ANTLR and parser generators
in general, so I hope you'll forgive what might seem a
simple question. I want to know how my parser can
recognise an XML block inside of my grammar. 

GRAMMAR
I want to take as an example, the xml grammar file
'$ANTLR_2.7.6/examples/java/xml/xml.g' in antlr. I'm
writing a grammar that can contain xml (with
namespaces and declarations) as a token. So a command
could look like this for example:
create      
	(entry 
		(
			<?xml version='1.0' encoding='UTF-8'?>
			<debit xmlns='com/interrupt/bookkeeping/account'
amount='100.00'>,
			<?xml version='1.0' encoding='UTF-8'?>
			<credit xmlns='com/interrupt/bookkeeping/account'
amount='100.00'>
		)
	)


IMPORTING .g FILES
I want to write a grammar that recognises all the
tokens in this command, including the raw XML. How
could I use the grammar definitions in 'xml.g', in my
own grammar file. For starters, I believe you use the
'importVocab' grammar option. 
Class MyParser extends Parser 
options { ??? importVocab=V; ?}


RECOGNISING XML BLOCKS
But what I really want to know is how my parser can
recognise a block of XML inside of my command. With
the said 'xml.g' grammar, I can recognise start and
end tags and cdata and so on. But I just want to
recognise an entire XML block and pass it as a token
to some command. My first guess was to create a
grammar that recognises a start and end tag and all
nested tags within (and may or may not have an xml
declaration). So I tried to write the grammar in
fig.1, but ran into errors in fig.2.

class BookkeepingExprLexer extends Lexer;
options {
	importVocab=XMLLexer; 
}

TOKEN_LITERAL:	( 
	STARTTAG 
		( PI | COMMENT | STARTTAG | ENDTAG | PCDATA |
CDATABLOCK )* 
	ENDTAG 
) { System.out.println("TOKEN LITERAL"); }; 
fig.1 

$ java antlr.Tool grammar/bookkeeping.g
ANTLR Parser Generator   Version 2.7.6 (2005-12-22)  
1989-2005
error: Lexer rule STARTTAG is not defined
error: Lexer rule PI is not defined
error: Lexer rule COMMENT is not defined
error: Lexer rule ENDTAG is not defined
error: Lexer rule PCDATA is not defined
error: Lexer rule CDATABLOCK is not defined
grammar/bookkeeping.g:15:41: no definition of rule
mSTARTTAG
grammar/bookkeeping.g:0:0: warning:Alternate omitted
due to empty prediction set
grammar/bookkeeping.g:15:41: no definition of rule
mSTARTTAG
grammar/bookkeeping.g:15:41: Rule 'mSTARTTAG' is not
defined
grammar/bookkeeping.g:16:51: no definition of rule mPI
grammar/bookkeeping.g:16:56: no definition of rule
mCOMMENT
grammar/bookkeeping.g:16:66: no definition of rule
mSTARTTAG
grammar/bookkeeping.g:16:77: no definition of rule
mENDTAG
grammar/bookkeeping.g:16:86: no definition of rule
mPCDATA
grammar/bookkeeping.g:16:95: no definition of rule
mCDATABLOCK
grammar/bookkeeping.g:17:41: no definition of rule
mENDTAG
grammar/bookkeeping.g:17:41: no definition of rule
mENDTAG
grammar/bookkeeping.g:17:41: no definition of rule
mENDTAG
grammar/bookkeeping.g:17:41: no definition of rule
mENDTAG
grammar/bookkeeping.g:17:41: no definition of rule
mENDTAG
grammar/bookkeeping.g:17:41: no definition of rule
mENDTAG
grammar/bookkeeping.g:16:51: warning:Alternate omitted
due to empty prediction set
grammar/bookkeeping.g:16:56: warning:Alternate omitted
due to empty prediction set
grammar/bookkeeping.g:16:66: warning:Alternate omitted
due to empty prediction set
grammar/bookkeeping.g:16:77: warning:Alternate omitted
due to empty prediction set
grammar/bookkeeping.g:16:86: warning:Alternate omitted
due to empty prediction set
grammar/bookkeeping.g:16:95: warning:Alternate omitted
due to empty prediction set
grammar/bookkeeping.g:17:41: Rule 'mENDTAG' is not
defined
Exiting due to errors.
fig.2 


THE PROBLEM
For this specific problem, is my grammar incorrect, or
have I not correctly pulled in the XML grammar
definitions from 'xml.g'? Also, Is there a better way
of recognising an XML block inside of my grammar. 


Thanks for any help. 
Tim


__________________________________________________
Do You Yahoo!?
Tired of spam?  Yahoo! Mail has the best spam protection around 
http://mail.yahoo.com 
From ilia at obnovlenie.ru  Thu Aug 31 13:58:12 2006
From: ilia at obnovlenie.ru (Ilia Kantor)
Date: Thu Aug 31 13:58:49 2006
Subject: [antlr-interest] newline in Antlr3
Message-ID: <200609010058.12477.ilia@obnovlenie.ru>


I'm converting Antlr2 grammar to Antlr v3 (thanks, Terrence).

But somehow lexer misses line number... And newline() call from Antlr2 is not 
working.


------------- target -----
grammar a;

output ruleO { something
 like { bracketed; } test
}

rule ruleR {
        blabla
}

------------------  output ( line nums are wrong ) ------- 
Line 1 pos 0 type 12: 

Line 2 pos 0 type 9: grammar
Line 2 pos 7 type 12:  
Line 2 pos 8 type 9: a
Line 2 pos 9 type 10: ;
Line 2 pos 10 type 12: 

Line 3 pos 0 type 12: 

Line 4 pos 0 type 9: output
Line 4 pos 6 type 12:  
Line 4 pos 7 type 9: ruleO
Line 4 pos 12 type 12:  
Line 4 pos 13 type 4: {
Line 4 pos 14 type 6:  something
 like { bracketed; } test
}

rule ruleR {
	blabla
}

---------- lexer grammar -----------

lexer grammar MainLexer;

@header {
	package grammar.main;
}


@members {
	Integer bracketLevel = 0;
}

BRACKET_OPEN : '{' { bracketLevel++; };
BRACKET_CLOSE : '}' { bracketLevel--; };

ANY: {bracketLevel>0}?=> (
	(~('{' | '}') |
	'{' { bracketLevel++; } |
	'}' { bracketLevel--; }
	)+
	) 
    ;

GENERIC_ID : {bracketLevel==0}?=> ( LETTER | '_' ) (NAMECHAR)* ;

DC: {bracketLevel==0}?=> ';';

fragment NAMECHAR
    : LETTER | DIGIT | '.' | '-' | '_' | ':'
    ;

fragment DIGIT
    :    '0'..'9'
    ;

fragment LETTER
    : 'a'..'z'
    | 'A'..'Z'
    ;

WS  :  {bracketLevel==0}?=>
       (' '|'\r'|'\t'|'\u000C'|'\n' ) {channel=99;}
    ;


P.S a minor question: how to recieve token mnemo NAME, not numeric code (for 
debug) ?




From kroepke at classdump.org  Thu Aug 31 14:32:29 2006
From: kroepke at classdump.org (Kay Roepke)
Date: Thu Aug 31 14:32:35 2006
Subject: [antlr-interest] newline in Antlr3
In-Reply-To: <200609010058.12477.ilia@obnovlenie.ru>
References: <200609010058.12477.ilia@obnovlenie.ru>
Message-ID: <F0A37FAF-5E08-4A95-A0C2-C0B7FE88B4EF@classdump.org>

Hi!

On 31. Aug 2006, at 22:58 Uhr, Ilia Kantor wrote:

> But somehow lexer misses line number... And newline() call from  
> Antlr2 is not
> working.

It seems that your ANY rule just chews through until EOF. That's why  
the it's only counting four lines.
It also appears that you have a leading newline in your test file.

newline() doesn't exist anymore, ANTLR now does automatic line  
counting on \n.

HTH,

Kay
-- 
Kay R?pke <kroepke@classdump.org>
classdump Software
Key fingerprint = A849 0F2C C322 4022 379E  8661 7E1B FE0D 4CD2 A6D0



From ilia at obnovlenie.ru  Thu Aug 31 15:08:18 2006
From: ilia at obnovlenie.ru (Ilia Kantor)
Date: Thu Aug 31 15:08:59 2006
Subject: [antlr-interest] newline in Antlr3
In-Reply-To: <F0A37FAF-5E08-4A95-A0C2-C0B7FE88B4EF@classdump.org>
References: <200609010058.12477.ilia@obnovlenie.ru>
	<F0A37FAF-5E08-4A95-A0C2-C0B7FE88B4EF@classdump.org>
Message-ID: <200609010208.18781.ilia@obnovlenie.ru>


Hmmm indeed.. I just want ANY rule to read all nested brackets, like
{ ..{..}. }

How you'd recommend to implement it ?

> Hi!
>
> On 31. Aug 2006, at 22:58 Uhr, Ilia Kantor wrote:
> > But somehow lexer misses line number... And newline() call from
> > Antlr2 is not
> > working.
>
> It seems that your ANY rule just chews through until EOF. That's why
> the it's only counting four lines.
> It also appears that you have a leading newline in your test file.
>
> newline() doesn't exist anymore, ANTLR now does automatic line
> counting on \n.
>
> HTH,
>
> Kay
From kroepke at classdump.org  Thu Aug 31 15:13:04 2006
From: kroepke at classdump.org (Kay Roepke)
Date: Thu Aug 31 15:13:13 2006
Subject: [antlr-interest] newline in Antlr3
In-Reply-To: <200609010208.18781.ilia@obnovlenie.ru>
References: <200609010058.12477.ilia@obnovlenie.ru>
	<F0A37FAF-5E08-4A95-A0C2-C0B7FE88B4EF@classdump.org>
	<200609010208.18781.ilia@obnovlenie.ru>
Message-ID: <659A78AB-4467-4F4C-B8AD-FD507191A956@classdump.org>


On 1. Sep 2006, at 0:08 Uhr, Ilia Kantor wrote:

> How you'd recommend to implement it ?

Oh, I'm sorry, I should've actually said that, too ;)

try this:

ANY: {bracketLevel>0}?=> (
	(options { greedy=false; } :
	~('{' | '}') |
	'{' { bracketLevel++; } |
	'}' { bracketLevel--; }
	)+
	)
     ;

cheers,
-k
-- 
Kay R?pke <kroepke@classdump.org>
classdump Software
Key fingerprint = A849 0F2C C322 4022 379E  8661 7E1B FE0D 4CD2 A6D0



From parrt at cs.usfca.edu  Thu Aug 31 15:16:59 2006
From: parrt at cs.usfca.edu (Terence Parr)
Date: Thu Aug 31 15:17:03 2006
Subject: [antlr-interest] newline in Antlr3
In-Reply-To: <200609010208.18781.ilia@obnovlenie.ru>
References: <200609010058.12477.ilia@obnovlenie.ru>
	<F0A37FAF-5E08-4A95-A0C2-C0B7FE88B4EF@classdump.org>
	<200609010208.18781.ilia@obnovlenie.ru>
Message-ID: <9E666557-A8AB-4533-8C31-33AD4B876FEE@cs.usfca.edu>


On Aug 31, 2006, at 3:08 PM, Ilia Kantor wrote:

>
> Hmmm indeed.. I just want ANY rule to read all nested brackets, like
> { ..{..}. }
>
> How you'd recommend to implement it ?

HI.

"Use the stack, Luke"

BLOCK : '{' (BLOCK | ~'{')* '}' ;

Ter

From kroepke at classdump.org  Thu Aug 31 15:21:13 2006
From: kroepke at classdump.org (Kay Roepke)
Date: Thu Aug 31 15:21:22 2006
Subject: [antlr-interest] newline in Antlr3
In-Reply-To: <9E666557-A8AB-4533-8C31-33AD4B876FEE@cs.usfca.edu>
References: <200609010058.12477.ilia@obnovlenie.ru>
	<F0A37FAF-5E08-4A95-A0C2-C0B7FE88B4EF@classdump.org>
	<200609010208.18781.ilia@obnovlenie.ru>
	<9E666557-A8AB-4533-8C31-33AD4B876FEE@cs.usfca.edu>
Message-ID: <A05EE863-A935-4485-8ADC-B38C6736F78E@classdump.org>


On 1. Sep 2006, at 0:16 Uhr, Terence Parr wrote:

> "Use the stack, Luke"

"Yes, father" :D

-k

p.s. couldn't resist...
From parrt at cs.usfca.edu  Thu Aug 31 17:27:24 2006
From: parrt at cs.usfca.edu (Terence Parr)
Date: Thu Aug 31 17:27:29 2006
Subject: [antlr-interest] newline in Antlr3
In-Reply-To: <9E666557-A8AB-4533-8C31-33AD4B876FEE@cs.usfca.edu>
References: <200609010058.12477.ilia@obnovlenie.ru>
	<F0A37FAF-5E08-4A95-A0C2-C0B7FE88B4EF@classdump.org>
	<200609010208.18781.ilia@obnovlenie.ru>
	<9E666557-A8AB-4533-8C31-33AD4B876FEE@cs.usfca.edu>
Message-ID: <69B31DF3-A722-47F8-874A-916E96731C64@cs.usfca.edu>


On Aug 31, 2006, at 3:16 PM, Terence Parr wrote:

>
> On Aug 31, 2006, at 3:08 PM, Ilia Kantor wrote:
>
>>
>> Hmmm indeed.. I just want ANY rule to read all nested brackets, like
>> { ..{..}. }
>>
>> How you'd recommend to implement it ?
>
> HI.
>
> "Use the stack, Luke"
>
> BLOCK : '{' (BLOCK | ~'{')* '}' ;

ooops!

BLOCK : '{' (BLOCK | ~('{'|'}'))* '}' ;

Ter
From sohail at taggedtype.net  Thu Aug 31 20:56:47 2006
From: sohail at taggedtype.net (Sohail Somani)
Date: Thu Aug 31 20:57:07 2006
Subject: [antlr-interest] newline in Antlr3
In-Reply-To: <A05EE863-A935-4485-8ADC-B38C6736F78E@classdump.org>
References: <200609010058.12477.ilia@obnovlenie.ru>
	<F0A37FAF-5E08-4A95-A0C2-C0B7FE88B4EF@classdump.org>
	<200609010208.18781.ilia@obnovlenie.ru>
	<9E666557-A8AB-4533-8C31-33AD4B876FEE@cs.usfca.edu>
	<A05EE863-A935-4485-8ADC-B38C6736F78E@classdump.org>
Message-ID: <1157083007.3364.2.camel@localhost.localdomain>

On Fri, 2006-09-01 at 00:21 +0200, Kay Roepke wrote:
> On 1. Sep 2006, at 0:16 Uhr, Terence Parr wrote:
> 
> > "Use the stack, Luke"
> 
> "Yes, father" :D

I think it was obi-wan who said that :)

