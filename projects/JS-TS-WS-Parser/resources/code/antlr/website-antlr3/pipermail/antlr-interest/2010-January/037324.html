<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [antlr-interest] First and Last Token of a Rule
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20First%20and%20Last%20Token%20of%20a%20Rule&In-Reply-To=%3C4B50E600.6090005%40bahj.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="037327.html">
   <LINK REL="Next"  HREF="037325.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[antlr-interest] First and Last Token of a Rule</H1>
    <B>Zachary Palmer</B> 
    <A HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20First%20and%20Last%20Token%20of%20a%20Rule&In-Reply-To=%3C4B50E600.6090005%40bahj.com%3E"
       TITLE="[antlr-interest] First and Last Token of a Rule">zep_antlr at bahj.com
       </A><BR>
    <I>Fri Jan 15 14:02:40 PST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="037327.html">[antlr-interest] Fortran lexer problem
</A></li>
        <LI>Next message: <A HREF="037325.html">[antlr-interest] First and Last Token of a Rule
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#37324">[ date ]</a>
              <a href="thread.html#37324">[ thread ]</a>
              <a href="subject.html#37324">[ subject ]</a>
              <a href="author.html#37324">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>All,

I think this is a pretty simple operation, but I have no idea how to 
execute it.  Suppose I'm in some action code and have a reference to the 
parser.  Is there a way for me to obtain the most recently used token?  
How about the token that started the most recent grammar rule?

For instance, consider the following grammar (using a Java target language):

foo: 'a' bar* 'd' { doStuff(); };
bar: ('b' | 'c') { doStuff(); };

Let's assume we are feeding this grammar the string &quot;abcd&quot;.  In that 
case, doStuff is called three times: once after the token 'b' is matched 
in the bar rule, once after the token 'c' is matched in the bar rule, 
and once after the tokens 'a' through 'd' are matched in the foo rule.  
I would like, from within the body of the doStuff method, to obtain the 
first and last token of each rule matched.  So, for instance, if my 
doStuff method looked like this:

void doStuff() {
    Token first = ...; // first token of the current rule
    Token last = ...; // token most recently used
    System.out.println(first.getText() + &quot;, &quot; + last.getText());
}

then the output to the above grammar when provided the input &quot;abcd&quot; 
should be

b,b
c,c
a,d

This is, of course, a representative example; the real situation is a 
bit more complicated.  The catch is that I don't want to add any 
arguments to the doStuff method or do anything else that would require 
me to change every rule in this 3,000 line grammar.  Is there a way that 
I can get the first token of the current rule and the most recently used 
token without tweaking every single grammar rule?

Many thanks for reading!

Zachary Palmer
</PRE>









<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="037327.html">[antlr-interest] Fortran lexer problem
</A></li>
	<LI>Next message: <A HREF="037325.html">[antlr-interest] First and Last Token of a Rule
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#37324">[ date ]</a>
              <a href="thread.html#37324">[ thread ]</a>
              <a href="subject.html#37324">[ subject ]</a>
              <a href="author.html#37324">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.antlr.org/mailman/listinfo/antlr-interest">More information about the antlr-interest
mailing list</a><br>
</body></html>
