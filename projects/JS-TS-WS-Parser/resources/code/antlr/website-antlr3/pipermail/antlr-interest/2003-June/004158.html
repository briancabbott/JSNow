<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [antlr-interest] Re: Using multiple parsers -- newbie questio n
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:antlr-interest%40antlr.org?Subject=%5Bantlr-interest%5D%20Re%3A%20Using%20multiple%20parsers%20--%20newbie%20questio%20n&In-Reply-To=72C9789739C4214096AE945753B11EA32A5D41%40mypxmail04.bco-home.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="004156.html">
   <LINK REL="Next"  HREF="004157.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[antlr-interest] Re: Using multiple parsers -- newbie questio n</H1>
    <B>Matt Benson</B> 
    <A HREF="mailto:antlr-interest%40antlr.org?Subject=%5Bantlr-interest%5D%20Re%3A%20Using%20multiple%20parsers%20--%20newbie%20questio%20n&In-Reply-To=72C9789739C4214096AE945753B11EA32A5D41%40mypxmail04.bco-home.com"
       TITLE="[antlr-interest] Re: Using multiple parsers -- newbie questio n">gudnabrsam at yahoo.com
       </A><BR>
    <I>Thu Jun 12 09:28:41 PDT 2003</I>
    <P><UL>
        <LI>Previous message: <A HREF="004156.html">[antlr-interest] Re: Using multiple parsers -- newbie questio
	n
</A></li>
        <LI>Next message: <A HREF="004157.html">[antlr-interest] Re: XML parsing
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4158">[ date ]</a>
              <a href="thread.html#4158">[ thread ]</a>
              <a href="subject.html#4158">[ subject ]</a>
              <a href="author.html#4158">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Monty, how is it you turn everything into a plug for
the gcc grammar?!  ;)


--- <A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">mzukowski at yci.com</A> wrote:
&gt;<i> Excellent idea.  It's really why ANTLR has &quot;grammar
</I>&gt;<i> subclassing.&quot;  By the
</I>&gt;<i> way the gcc grammar uses subclassing if you want a
</I>&gt;<i> huge example of it.
</I>&gt;<i> <A HREF="http://www.codetransform.com/gcc.html.">http://www.codetransform.com/gcc.html.</A>
</I>&gt;<i> 
</I>&gt;<i> Monty
</I>&gt;<i> 
</I>&gt;<i> -----Original Message-----
</I>&gt;<i> From: Matt Benson [mailto:<A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">gudnabrsam at yahoo.com</A>] 
</I>&gt;<i> Sent: Thursday, June 12, 2003 9:10 AM
</I>&gt;<i> To: <A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">antlr-interest at yahoogroups.com</A>
</I>&gt;<i> Subject: Re: [antlr-interest] Re: Using multiple
</I>&gt;<i> parsers -- newbie question
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> I think the answer would be to put the common parts
</I>&gt;<i> of
</I>&gt;<i> the parser grammar in a base parser and extend that.
</I>&gt;<i> 
</I>&gt;<i> You could declare all the rules of the base parser
</I>&gt;<i> class to be protected just for peace of mind, as
</I>&gt;<i> well.
</I>&gt;<i> 
</I>&gt;<i> -Matt
</I>&gt;<i> 
</I>&gt;<i> --- biz_morland &lt;<A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">biz_morland at yahoo.com</A>&gt; wrote:
</I>&gt;<i> &gt; Hi all,
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; The parser I'm developing is part of a calculator
</I>&gt;<i> &gt; program that
</I>&gt;<i> &gt; analyzes text like: 2+3^3 and contains rules that
</I>&gt;<i> &gt; determine the order 
</I>&gt;<i> &gt; in which an expression is parsed --&gt; (2+3)^3 or
</I>&gt;<i> &gt; 2+(3^3) .
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; I had to create two different parsers because the
</I>&gt;<i> &gt; rules may differ
</I>&gt;<i> &gt; slightly depending on the &quot;mode&quot; the calculator
</I>&gt;<i> may
</I>&gt;<i> &gt; be in. I 
</I>&gt;<i> &gt; emphasize &quot;slightly&quot; because both parsers are 95%
</I>&gt;<i> &gt; the same, they 
</I>&gt;<i> &gt; differ in just a single rule.
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; I noticed that no matter which parser was called
</I>&gt;<i> by
</I>&gt;<i> &gt; the &quot;if&quot;
</I>&gt;<i> &gt; statement in my Java program (that is, no matter
</I>&gt;<i> &gt; which mode my 
</I>&gt;<i> &gt; calculator was in), the above expression would
</I>&gt;<i> &gt; always be parsed just 
</I>&gt;<i> &gt; one way regardless of mode. I had each parser in
</I>&gt;<i> its
</I>&gt;<i> &gt; own grammar 
</I>&gt;<i> &gt; file. It seemed that the parser that was preferred
</I>&gt;<i> &gt; by the program 
</I>&gt;<i> &gt; only depended on which grammar file I _last_
</I>&gt;<i> &gt; saved/compiled. Having 
</I>&gt;<i> &gt; an &quot;if&quot; statement in the Java program seemed to
</I>&gt;<i> make
</I>&gt;<i> &gt; no difference.
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; Out of desperation I followed the &quot;bad&quot; way, which
</I>&gt;<i> &gt; seems like a blunt
</I>&gt;<i> &gt; way of fixing the problem. But it worked so I
</I>&gt;<i> can't
</I>&gt;<i> &gt; complain. However 
</I>&gt;<i> &gt; the second way seems interesting, if I have time
</I>&gt;<i> at
</I>&gt;<i> &gt; the end of this 
</I>&gt;<i> &gt; project I will try to implement it. I'll probably
</I>&gt;<i> &gt; have to do some 
</I>&gt;<i> &gt; extra reading about the commands you mentioned.
</I>&gt;<i> But
</I>&gt;<i> &gt; at least it now 
</I>&gt;<i> &gt; seems possible to implement 2 or more parsers.
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; Thanks!
</I>&gt;<i> &gt; Greg
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; --- In <A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">antlr-interest at yahoogroups.com</A>, &quot;antlrlist&quot;
</I>&gt;<i> &lt;<A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">antlrlist at y...</A>&gt;
</I>&gt;<i> &gt; wrote:
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt; Hello Greg,
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt; You didn't mention the difference between
</I>&gt;<i> &gt; ExpressionParser_1 and
</I>&gt;<i> &gt; &gt; ExpressionParser_2 nor how did you detected that
</I>&gt;<i> &gt; &quot;both analizers
</I>&gt;<i> &gt; &gt; where the same&quot;.
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt; However I see where your problem might be: you
</I>&gt;<i> &gt; might be having
</I>&gt;<i> &gt; &gt; problems with token vocabularies if
</I>&gt;<i> &gt; ExpressionParser_1 or
</I>&gt;<i> &gt; &gt; ExpressionParser_2 define tokens in the token
</I>&gt;<i> &gt; section or if they
</I>&gt;<i> &gt; have 
</I>&gt;<i> &gt; &gt; unnamed tokens (they have strings in the rules,
</I>&gt;<i> &gt; like
</I>&gt;<i> &gt; &gt; while: &quot;while&quot; ... ;).
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt; There are two ways of solving this: a bad one
</I>&gt;<i> and
</I>&gt;<i> &gt; a good one.
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt; The bad one consists in renaming your lexers and
</I>&gt;<i> &gt; treeparsers, so
</I>&gt;<i> &gt; &gt; you'd get
</I>&gt;<i> &gt; &gt;  - &quot;expression_1.g&quot; containing:
</I>&gt;<i> &gt; ExpressionParser_1,
</I>&gt;<i> &gt; &gt; ExpressionLexer_1, and  ExpressionTreeWalker_1.
</I>&gt;<i> &gt; &gt;  - &quot;expression_2.g&quot; contains:
</I>&gt;<i> ExpressionParser_2,
</I>&gt;<i> &gt; ExpressionLexer_2
</I>&gt;<i> &gt; &gt; and ExpressionTreeWalker_2.
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt; This solution won't probably match your needs,
</I>&gt;<i> so
</I>&gt;<i> &gt; you'll have to
</I>&gt;<i> &gt; &gt; implement the &quot;good one&quot;.
</I>&gt;<i> &gt; &gt; &lt;p&gt;
</I>&gt;<i> &gt; &gt; The good one consists on defining each analizer
</I>&gt;<i> in
</I>&gt;<i> &gt; one separated
</I>&gt;<i> &gt; &gt; file, and using grammar inheritance in the
</I>&gt;<i> &gt; parsers. So you'd get:
</I>&gt;<i> &gt; &gt;  - &quot;expressionLexer.g&quot; containing
</I>&gt;<i> ExpressionLexer
</I>&gt;<i> &gt; &gt;  - &quot;expressionParser1.g&quot; containing
</I>&gt;<i> &gt; ExpressionParser1
</I>&gt;<i> &gt; &gt;  - &quot;expressionParser2.g&quot; containing
</I>&gt;<i> &gt; ExpressionParser2
</I>&gt;<i> &gt; &gt;  - &quot;expressionTreeParser.g&quot; containing
</I>&gt;<i> &gt; ExpressionTreeParser
</I>&gt;<i> &gt; &gt; &lt;p&gt;
</I>&gt;<i> &gt; &gt; When you write a set of analyzers in the same
</I>&gt;<i> &gt; file, ANTLR deals
</I>&gt;<i> &gt; with 
</I>&gt;<i> &gt; &gt; vocabulary sharing authomatically. If you write
</I>&gt;<i> &gt; them in separate
</I>&gt;<i> &gt; &gt; files, you'll have to share vocabularies
</I>&gt;<i> manually
</I>&gt;<i> &gt; (see &quot;Token
</I>&gt;<i> &gt; &gt; vocabularies&quot; on antlr docs).
</I>&gt;<i> &gt; &gt; &lt;p&gt;
</I>&gt;<i> &gt; &gt; In order to do this, you must:
</I>&gt;<i> &gt; &gt;  - Copy/paste each analizer's definition in each
</I>&gt;<i> &gt; grammar file.
</I>&gt;<i> &gt; &gt;  - The lexer should need to export its
</I>&gt;<i> vocabulary
</I>&gt;<i> &gt; with the
</I>&gt;<i> &gt; &gt; exportVocab option. Give the vocab a name like
</I>&gt;<i> &gt; &quot;lexer&quot;
</I>&gt;<i> &gt; &gt; (exportVocab=lexer;).
</I>&gt;<i> &gt; &gt;  - In ExpressionParser1 you shoud importVocab
</I>&gt;<i> the
</I>&gt;<i> &gt; Lexer's
</I>&gt;<i> &gt; vocabulary 
</I>&gt;<i> &gt; &gt; (importVocab=lexer;)and exportVocab the new
</I>&gt;<i> &gt; vocabulary
</I>&gt;<i> &gt; &gt; (exportVocab=parser1;).
</I>&gt;<i> &gt; &gt;  - ExpressionParser2 should be defined as a
</I>&gt;<i> &gt; derived grammar of
</I>&gt;<i> &gt; &gt; ExpressionParser1. This is, instead of being
</I>&gt;<i> &gt; &quot;class
</I>&gt;<i> &gt; ExpressionParser2 
</I>&gt;<i> &gt; &gt; extends Parser&quot; it will be declared like &quot;class
</I>&gt;<i> &gt; ExpressionParser2
</I>&gt;<i> &gt; &gt; extends ExpressionParser1&quot;. You'll also have to
</I>&gt;<i> &gt; compile
</I>&gt;<i> &gt; &gt; expressionParser2.g with the command line &quot;java
</I>&gt;<i> &gt; antlr.Tool -glib
</I>&gt;<i> &gt; &gt; expressionParser1.g expressionParser2.g&quot; (see
</I>&gt;<i> &gt; &quot;grammar inheritance&quot;
</I>&gt;<i> &gt; &gt; on the docs). Grammar inheritance allows you to
</I>&gt;<i> &gt; &quot;import&quot; the rules
</I>&gt;<i> &gt; of 
</I>&gt;<i> &gt; &gt; ExpParser1 in ExpParser2, so you only have to
</I>&gt;<i> &gt; write the ones that
</I>&gt;<i> &gt; &gt; change.
</I>&gt;<i> &gt; &gt;  - ExpressionParser2 should import the vocab of
</I>&gt;<i> &gt; *ExpressionParser1*
</I>&gt;<i> &gt; &gt; (importVocab=parser1;) and export its own vocab
</I>&gt;<i> &gt; exportVocab=parser2;).
</I>&gt;<i> &gt; &gt;  - ExpressionTreeParser should import
</I>&gt;<i> &gt; ExpressionParser2's vocab
</I>&gt;<i> &gt; &gt; (importVocab=parser2).
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt; Tell me if this helps you
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt; Enrique
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt; --- In <A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">antlr-interest at yahoogroups.com</A>,
</I>&gt;<i> &gt; <A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">mzukowski at y...</A> wrote:
</I>&gt;<i> &gt; &gt; &gt; I'd say try to step through it with a
</I>&gt;<i> debugger.
</I>&gt;<i> &gt; I don't see any
</I>&gt;<i> &gt; &gt; obvious
</I>&gt;<i> 
</I>=== message truncated ===


__________________________________
Do you Yahoo!?
Yahoo! Calendar - Free online calendar with sync to Outlook(TM).
<A HREF="http://calendar.yahoo.com">http://calendar.yahoo.com</A>

 

Your use of Yahoo! Groups is subject to <A HREF="http://docs.yahoo.com/info/terms/">http://docs.yahoo.com/info/terms/</A> 


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="004156.html">[antlr-interest] Re: Using multiple parsers -- newbie questio
	n
</A></li>
	<LI>Next message: <A HREF="004157.html">[antlr-interest] Re: XML parsing
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4158">[ date ]</a>
              <a href="thread.html#4158">[ thread ]</a>
              <a href="subject.html#4158">[ subject ]</a>
              <a href="author.html#4158">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.antlr.org/mailman/listinfo/antlr-interest">More information about the antlr-interest
mailing list</a><br>
</body></html>
