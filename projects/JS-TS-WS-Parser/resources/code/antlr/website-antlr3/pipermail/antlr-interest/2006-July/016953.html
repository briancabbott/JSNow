<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [antlr-interest] Re: tree grammar help
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:antlr-interest%40antlr.org?Subject=%5Bantlr-interest%5D%20Re%3A%20tree%20grammar%20help&In-Reply-To=626f78830607200343r52eeb85dn72ebac72cbd4e0ee%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="016941.html">
   <LINK REL="Next"  HREF="016954.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[antlr-interest] Re: tree grammar help</H1>
    <B>Bans VGLab</B> 
    <A HREF="mailto:antlr-interest%40antlr.org?Subject=%5Bantlr-interest%5D%20Re%3A%20tree%20grammar%20help&In-Reply-To=626f78830607200343r52eeb85dn72ebac72cbd4e0ee%40mail.gmail.com"
       TITLE="[antlr-interest] Re: tree grammar help">bans.vglab at gmail.com
       </A><BR>
    <I>Thu Jul 20 03:57:40 PDT 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="016941.html">[antlr-interest] Determining a finite number of characters and
	getting tokens
</A></li>
        <LI>Next message: <A HREF="016954.html">[antlr-interest] Strange report on console
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16953">[ date ]</a>
              <a href="thread.html#16953">[ thread ]</a>
              <a href="subject.html#16953">[ subject ]</a>
              <a href="author.html#16953">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello Michael

I hope you are trying to walk an AST generated by SQL.

I have few suggestions; you may follow any or more that's convenient to you:

1. while parsing, make the DOT as parent using ^ operator. That'll make the
AST easier to walk. In general, it's true for any operator.

2. You should make use of Heterogeneous parsing. This allows you to abstract
most of the information in the node itself, which is done at  the time of
parsing. In your case, the aspects like &quot;Qualifer&quot; and &quot;alias&quot; can be put
inside a COLUM_NODE at the time of parsing. This has advantages. If tomorrow
you want to support something like &quot;Catalog1.Schema1.Tab1.Col1&quot;, your tree
parser will not be affected. The qualifier aspect within the COLUM_NODE will
abstract this information, which can be evolved anytime later.

3. Don't treat AST as the regular Syntax Tree (what we studied in Aho
Ulman's dragon book, I guess). An ideal AST removes unnecessary keywords
like &quot;AS&quot; while parsing. It should only capture the relevant components. The
relation between these components should be manifested with appropriates
edges in the tree. This eases tree-parsing a lot, in terms of
tims-space-complexities and coding.

-Sujeet Banerjee
SMTS
Persistent Systems Private Limited.


On 7/14/06, <A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">michael.pflug at thomson.com</A> &lt; <A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">michael.pflug at thomson.com</A>&gt; wrote:
&gt;<i>
</I>&gt;<i>  I have a tree grammar with the rule:
</I>&gt;<i>
</I>&gt;<i> : tableName=identifier DOT columnName=identifier  ((LITERAL_as)?
</I>&gt;<i> alias=identifier)?
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> We are trying to make the first identifier with DOT optional like this:
</I>&gt;<i>
</I>&gt;<i> : (tableName=identifier DOT)? columnName=identifier  ((LITERAL_as)?
</I>&gt;<i> alias=identifier)?
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> The generation passes, but generates a bad IF statement.  _t.getType() can
</I>&gt;<i> not equal SQL_IDENTIFIER and DOT at the same time
</I>&gt;<i>
</I>&gt;<i> It looks like this:
</I>&gt;<i>
</I>&gt;<i> *if ((_t.getType()==SQL_IDENTIFIER) &amp;&amp; (_t.getType()==DOT))* {
</I>&gt;<i>
</I>&gt;<i>                                     tableName=identifier(_t);
</I>&gt;<i>
</I>&gt;<i>                                     _t = _retTree;
</I>&gt;<i>
</I>&gt;<i>                                     AST tmp16_AST_in = (AST)_t;
</I>&gt;<i>
</I>&gt;<i>                                     match(_t,DOT);
</I>&gt;<i>
</I>&gt;<i>                                     _t = _t.getNextSibling();
</I>&gt;<i>
</I>&gt;<i>                         }
</I>&gt;<i>
</I>&gt;<i>                         else if ((_t.getType()==SQL_IDENTIFIER) &amp;&amp;
</I>&gt;<i> (_tokenSet_0.member(_t.getType()))) {
</I>&gt;<i>
</I>&gt;<i>                         }
</I>&gt;<i>
</I>&gt;<i>                         else {
</I>&gt;<i>
</I>&gt;<i>                                     throw new NoViableAltException(_t);
</I>&gt;<i>
</I>&gt;<i>                         }
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Any ideas on a grammar that would work?
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Thanks.
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://www.antlr.org/pipermail/antlr-interest/attachments/20060720/23714439/attachment.html">http://www.antlr.org/pipermail/antlr-interest/attachments/20060720/23714439/attachment.html</A>
</PRE>








<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="016941.html">[antlr-interest] Determining a finite number of characters and
	getting tokens
</A></li>
	<LI>Next message: <A HREF="016954.html">[antlr-interest] Strange report on console
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16953">[ date ]</a>
              <a href="thread.html#16953">[ thread ]</a>
              <a href="subject.html#16953">[ subject ]</a>
              <a href="author.html#16953">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.antlr.org/mailman/listinfo/antlr-interest">More information about the antlr-interest
mailing list</a><br>
</body></html>
