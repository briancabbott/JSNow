<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [antlr-interest] ANTLR 2: single-line comment lexing with no newline
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20ANTLR%202%3A%20single-line%20comment%20lexing%20with%20no%0A%20newline&In-Reply-To=%3C20070308202456.91AB21906EB%40www.antlr.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="019635.html">
   <LINK REL="Next"  HREF="019637.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[antlr-interest] ANTLR 2: single-line comment lexing with no newline</H1>
    <B>Gavin Lambert</B> 
    <A HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20ANTLR%202%3A%20single-line%20comment%20lexing%20with%20no%0A%20newline&In-Reply-To=%3C20070308202456.91AB21906EB%40www.antlr.org%3E"
       TITLE="[antlr-interest] ANTLR 2: single-line comment lexing with no newline">antlr at mirality.co.nz
       </A><BR>
    <I>Thu Mar  8 12:24:45 PST 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="019635.html">[antlr-interest] ANTLR 2: single-line comment lexing with no newline
</A></li>
        <LI>Next message: <A HREF="019637.html">[antlr-interest] ANTLR 2: single-line comment lexing with no	newline
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19636">[ date ]</a>
              <a href="thread.html#19636">[ thread ]</a>
              <a href="subject.html#19636">[ subject ]</a>
              <a href="author.html#19636">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>At 08:03 9/03/2007, Matt Benson wrote:
 &gt;I have the following lexer rules (can't remember how
 &gt;much of them are copied vs. original).  My intent is,
 &gt;as implied by my subject line, to recognize a
 &gt;single-line comment at the end of the file--an old
 &gt;problem.  I am seeing ANTLR spin forever when it hits
 &gt;the comment with these rules.  Can anyone see what
 &gt;might be wrong?  Rules follow.
[...]
 &gt;// Single-line comments
 &gt;SL_COMMENT
 &gt;	:	&quot;//&quot;
 &gt;		(~('\n'|'\r'))* (NL)?
 &gt;		{$setType(Token.SKIP);}
 &gt;	;

My first thought is that since you've made NL optional and 
permitted just about anything before it, it's doing the greediest 
possible match first (the entire file) and working its way back, 
spinning for ages.

Try either making NL not optional, or using NL|EOF (also not 
optional).

</PRE>










<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="019635.html">[antlr-interest] ANTLR 2: single-line comment lexing with no newline
</A></li>
	<LI>Next message: <A HREF="019637.html">[antlr-interest] ANTLR 2: single-line comment lexing with no	newline
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19636">[ date ]</a>
              <a href="thread.html#19636">[ thread ]</a>
              <a href="subject.html#19636">[ subject ]</a>
              <a href="author.html#19636">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.antlr.org/mailman/listinfo/antlr-interest">More information about the antlr-interest
mailing list</a><br>
</body></html>
