<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [antlr-interest] Is this the best way to have an ordered series of optional tokens with a minimum size?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20Is%20this%20the%20best%20way%20to%20have%20an%20ordered%20series%20of%0A%20optional%20tokens%20with%20a%20minimum%20size%3F&In-Reply-To=%3CCADMraz1Qwv2k3Qfk7EyfxOuVcpTbUf%2BnMAXbNP37L3tY_-h-wA%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="044779.html">
   <LINK REL="Next"  HREF="044783.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[antlr-interest] Is this the best way to have an ordered series of optional tokens with a minimum size?</H1>
    <B>Alex Chaphiv</B> 
    <A HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20Is%20this%20the%20best%20way%20to%20have%20an%20ordered%20series%20of%0A%20optional%20tokens%20with%20a%20minimum%20size%3F&In-Reply-To=%3CCADMraz1Qwv2k3Qfk7EyfxOuVcpTbUf%2BnMAXbNP37L3tY_-h-wA%40mail.gmail.com%3E"
       TITLE="[antlr-interest] Is this the best way to have an ordered series of optional tokens with a minimum size?">achaphiv at gmail.com
       </A><BR>
    <I>Sat Jun 23 15:07:36 PDT 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="044779.html">[antlr-interest] newbie's question on writing template rewrite	rule
</A></li>
        <LI>Next message: <A HREF="044783.html">[antlr-interest] Problem with C target
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#44782">[ date ]</a>
              <a href="thread.html#44782">[ thread ]</a>
              <a href="subject.html#44782">[ subject ]</a>
              <a href="author.html#44782">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

I have a working solution, but I'm wondering if I can represent the
following in a smaller grammar.

I have a series of ISO 3166 country codes that must come in order:
Here's the defined tokens:

ABW:'ABW'; AFG:'AFG'; AGO:'AGO'; AIA:'AIA'; ALA:'ALA'; ALB:'ALB';
AND:'AND'; ANT:'ANT'; ARE:'ARE'; ARG:'ARG'; ARM:'ARM'; ASM:'ASM'; ATA:'ATA';
ATF:'ATF'; ATG:'ATG'; AUS:'AUS'; AUT:'AUT'; AZE:'AZE'; BDI:'BDI'; BEL:'BEL';
BEN:'BEN'; BFA:'BFA'; BGD:'BGD'; BGR:'BGR'; BHR:'BHR'; BHS:'BHS'; BIH:'BIH';
(over 200 of these)


So now I want them to come in order and there can at most one of each
option:

          countriesInOrder:

    ABW? AFG? AGO? AIA? ALA? ALB? AND? ANT? ARE? ARG? ARM? ASM? ATA? ATF?
ATG?
    AUS? AUT? AZE? BDI? BEL? BEN? BFA? BGD? BGR? BHR? BHS? BIH? BLM? BLR?
BLZ?
    BMU? BOL? BRA? BRB? BRN? BTN? BVT? BWA? CAF? CAN? CCK? CHE? CHL? CHN?
CIV?
    (and so on)

This is fine, but I now at least 2 countries must appear, so I use the
following:

atLeast2CountriesInOrder:
    (country country) =&gt; countriesInOrder
    | INVALID_UNKNOWN_TOKEN // this part seems especially wrong to me

country:

ABW|AFG|AGO|AIA|ALA|ALB|AND|ANT|ARE|ARG|ARM|ASM|ATA|ATF|ATG|AUS|AUT|AZE|BDI

 |BEL|BEN|BFA|BGD|BGR|BHR|BHS|BIH|BLM|BLR|BLZ|BMU|BOL|BRA|BRB|BRN|BTN|BVT|BWA

 |CAF|CAN|CCK|CHE|CHL|CHN|CIV|CMR|COD|COG|COK|COL|COM|CPV|CRI|CUB|CXR|CYM|CYP
   (and so on)

// defined way at bottom after all other tokens and should never occur
INVALID_UNKNOWN_TOKEN: ('A'..'Z')+;

Now I have to do this 5+ more times for similar lists of tokens.  It seems
like an awful lot of duplication and I'm concerned about the use of
INVALID_UNKNOWN_TOKEN.

So it there a better way?
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="044779.html">[antlr-interest] newbie's question on writing template rewrite	rule
</A></li>
	<LI>Next message: <A HREF="044783.html">[antlr-interest] Problem with C target
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#44782">[ date ]</a>
              <a href="thread.html#44782">[ thread ]</a>
              <a href="subject.html#44782">[ subject ]</a>
              <a href="author.html#44782">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.antlr.org/mailman/listinfo/antlr-interest">More information about the antlr-interest
mailing list</a><br>
</body></html>
