<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [antlr-interest] C-Target $label.text / toString  malfunction
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20C-Target%20%24label.text%20/%20toString%20%20malfunction&In-Reply-To=%3C20070331203535.81B7B1906DF%40www.antlr.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="020018.html">
   <LINK REL="Next"  HREF="020019.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[antlr-interest] C-Target $label.text / toString  malfunction</H1>
    <B>Gavin Lambert</B> 
    <A HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20C-Target%20%24label.text%20/%20toString%20%20malfunction&In-Reply-To=%3C20070331203535.81B7B1906DF%40www.antlr.org%3E"
       TITLE="[antlr-interest] C-Target $label.text / toString  malfunction">antlr at mirality.co.nz
       </A><BR>
    <I>Sat Mar 31 13:35:17 PDT 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="020018.html">[antlr-interest] C-Target $label.text / toString malfunction
</A></li>
        <LI>Next message: <A HREF="020019.html">[antlr-interest] Get rule text only if rule was applied
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20021">[ date ]</a>
              <a href="thread.html#20021">[ thread ]</a>
              <a href="subject.html#20021">[ subject ]</a>
              <a href="author.html#20021">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>At 04:25 1/04/2007, Tobias Pape wrote:
 &gt;unaryPattern returns [ pASTPattern p ]
 &gt;   : s=unarySelector
 &gt;     { $p = (pASTPattern) ASTUnaryPattern_new((char *) $s.text-
 &gt; &gt;chars); }
 &gt;   ;
 &gt;
 &gt;binaryPattern returns [ pASTPattern p  ]
 &gt;   : s=binarySelector v=argument
 &gt;     { $p = (pASTPattern) ASTBinaryPattern_new((char *) $s.text- 

 &gt; &gt;chars, v.v); }
 &gt;   ;

I don't think you're allowed to upcast like that in the C-language 
parsers.  At least not if 'ASTBinaryPattern' inherits from 
ASTPattern, anyway, rather than simply being an ASTPattern with a 
different constructor (in which case you probably don't need the 
cast).  Inheritance is usually faked via containment and you're 
not going to get the compiler's help to convert pointers, so 
unless the structure is laid out in a very specific way then 
you're going to end up with an invalid pointer.

</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="020018.html">[antlr-interest] C-Target $label.text / toString malfunction
</A></li>
	<LI>Next message: <A HREF="020019.html">[antlr-interest] Get rule text only if rule was applied
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20021">[ date ]</a>
              <a href="thread.html#20021">[ thread ]</a>
              <a href="subject.html#20021">[ subject ]</a>
              <a href="author.html#20021">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.antlr.org/mailman/listinfo/antlr-interest">More information about the antlr-interest
mailing list</a><br>
</body></html>
