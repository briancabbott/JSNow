<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [antlr-interest] Lazy load of CommonTokenStream??
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20Lazy%20load%20of%20CommonTokenStream%3F%3F&In-Reply-To=%3C291F1DD3-E04E-421F-9603-0975F3511EE7%40martin-probst.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="030088.html">
   <LINK REL="Next"  HREF="030102.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[antlr-interest] Lazy load of CommonTokenStream??</H1>
    <B>Martin Probst</B> 
    <A HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20Lazy%20load%20of%20CommonTokenStream%3F%3F&In-Reply-To=%3C291F1DD3-E04E-421F-9603-0975F3511EE7%40martin-probst.com%3E"
       TITLE="[antlr-interest] Lazy load of CommonTokenStream??">mail at martin-probst.com
       </A><BR>
    <I>Mon Aug 18 05:35:00 PDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="030088.html">[antlr-interest] Lazy load of CommonTokenStream??
</A></li>
        <LI>Next message: <A HREF="030102.html">[antlr-interest] Lazy load of CommonTokenStream??
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#30109">[ date ]</a>
              <a href="thread.html#30109">[ thread ]</a>
              <a href="subject.html#30109">[ subject ]</a>
              <a href="author.html#30109">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>&gt;&gt;<i> CommonTokenStream buffers all tokens up when it is first used.
</I>&gt;&gt;<i> Unfortunately, size() does not trigger filling the buffer which seems
</I>&gt;&gt;<i> like a bug. I see no reason why it shouldn't fill the buffer, that  
</I>&gt;&gt;<i> is.
</I>&gt;<i>
</I>&gt;<i> I agree. In fact this might well be more intuitive, however we should
</I>&gt;<i> think about any performance impact as this might be the reason it does
</I>&gt;<i> not do this - in the C runtime I can take care of this by flipping
</I>&gt;<i> functions after the first call, but you can't hack that in Java.
</I>
If you are concerned about the performance of these simple checks, why  
not make the TokenStream tokenize the whole input document within the  
constructor?

I know it feels a bit weird for a Java programmer to do much work in  
the constructor, but if you write a class and about every method call  
first checks if the object is correctly initialized, and the object is  
certain to be used (no benefit from lazy loading or similar), then why  
not initialize it properly in the constructor and be done with it?

That would also make the code in CommonTokenStream a lot simpler in  
many places.

Regards,
Martin
</PRE>


































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="030088.html">[antlr-interest] Lazy load of CommonTokenStream??
</A></li>
	<LI>Next message: <A HREF="030102.html">[antlr-interest] Lazy load of CommonTokenStream??
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#30109">[ date ]</a>
              <a href="thread.html#30109">[ thread ]</a>
              <a href="subject.html#30109">[ subject ]</a>
              <a href="author.html#30109">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.antlr.org/mailman/listinfo/antlr-interest">More information about the antlr-interest
mailing list</a><br>
</body></html>
