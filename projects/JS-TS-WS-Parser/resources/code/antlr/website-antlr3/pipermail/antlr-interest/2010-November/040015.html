<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [antlr-interest] Antlr 3.2 C-target lexer/parser in exe works,	crashes in library
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20Antlr%203.2%20C-target%20lexer/parser%20in%20exe%20works%2C%0A%09crashes%20in%20library&In-Reply-To=%3C0cf301cb810b%24d5188b50%247f49a1f0%24%40temporal-wave.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="040014.html">
   <LINK REL="Next"  HREF="040016.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[antlr-interest] Antlr 3.2 C-target lexer/parser in exe works,	crashes in library</H1>
    <B>Jim Idle</B> 
    <A HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20Antlr%203.2%20C-target%20lexer/parser%20in%20exe%20works%2C%0A%09crashes%20in%20library&In-Reply-To=%3C0cf301cb810b%24d5188b50%247f49a1f0%24%40temporal-wave.com%3E"
       TITLE="[antlr-interest] Antlr 3.2 C-target lexer/parser in exe works,	crashes in library">jimi at temporal-wave.com
       </A><BR>
    <I>Wed Nov 10 11:16:52 PST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="040014.html">[antlr-interest] Antlr 3.2 C-target lexer/parser in exe works, crashes in library
</A></li>
        <LI>Next message: <A HREF="040016.html">[antlr-interest] Antlr 3.2 C-target lexer/parser in exe works, crashes in library
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#40015">[ date ]</a>
              <a href="thread.html#40015">[ thread ]</a>
              <a href="subject.html#40015">[ subject ]</a>
              <a href="author.html#40015">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I can't find the log in this, but I think that you are complicating it by
trying to use autoconf. First just try building the library manually. The
ANTLR build invokes the misguided and convoluted libtool to build the DLL
because autoconf expects that, but you can just make the .so file yourself.
Also check the ldd for your library etc. I don't really have time to go
through all your autoconf stuff, but I doubt that there is a bug in the
ANTLR stuff as lots of people are using shared objects on everything from
Linux to AIX, including myself.

Check the link options are the same as the ANTLR build and that your
LD_LIBRARY_PATH is correct and so on.

Jim

&gt;<i> -----Original Message-----
</I>&gt;<i> From: Joost Kraaijeveld [mailto:<A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">jrkraaijeveld at gmail.com</A>]
</I>&gt;<i> Sent: Wednesday, November 10, 2010 10:58 AM
</I>&gt;<i> To: Jim Idle
</I>&gt;<i> Cc: <A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">antlr-interest at antlr.org</A>
</I>&gt;<i> Subject: Re: [antlr-interest] Antlr 3.2 C-target lexer/parser in exe
</I>&gt;<i> works, crashes in library
</I>&gt;<i> 
</I>&gt;<i> Hi Jim,
</I>&gt;<i> 
</I>&gt;<i> On 10/11/10 18:58, Jim Idle wrote:
</I>&gt;<i> &gt; Keep going with valgrind, but this is either that you are releasing
</I>&gt;<i> &gt; and then reusing your input file or have not allocated enough memory
</I>&gt;<i> &gt; or something similar. Look at the output of valgrind closely as it is
</I>&gt;<i> &gt; probably telling you what you are doing wrong.
</I>&gt;<i> 
</I>&gt;<i> I am sorry to say but valgrind is not telling anyting: with valgrind
</I>&gt;<i> the program runs OK and it just mentions that there are a lot of memory
</I>&gt;<i> leaks which seems reasonable because I do not release anything (nor
</I>&gt;<i> allocate allocate anything with new or malloc for that part). I also do
</I>&gt;<i> not release or reuse the input file.
</I>&gt;<i> 
</I>&gt;<i> Actually the program does not contain much code that is written by
</I>&gt;<i> myself. The grammar has some calls to functions embedded that just
</I>&gt;<i> print the thing that are recognised. And is in calling one of the 4
</I>&gt;<i> functions that the program crashes.
</I>&gt;<i> 
</I>&gt;<i> I really think that there is a hidden &quot;you should know this when you
</I>&gt;<i> embed antlr in a library&quot; thing that I am not aware of or that there is
</I>&gt;<i> something else ( I don't like to shout bug :-))
</I>&gt;<i> 
</I>&gt;<i> I attached my valgrind log and again mention
</I>&gt;<i> <A HREF="http://trac.askesis.nl/downloads/AntlrProblem.tar.bz2">http://trac.askesis.nl/downloads/AntlrProblem.tar.bz2</A> in the hope that
</I>&gt;<i> you can help me to find the problem.
</I>&gt;<i> 
</I>&gt;<i> TIA
</I>&gt;<i> 
</I>&gt;<i> --
</I>&gt;<i> Met vriendelijke groeten,
</I>&gt;<i> 
</I>&gt;<i> Joost Kraaijeveld
</I>&gt;<i> Askesis B.V.
</I>&gt;<i> Molukkenstraat 14
</I>&gt;<i> 6524NB Nijmegen
</I>&gt;<i> tel: 024-3888063 / 06-51855277
</I>&gt;<i> fax: 024-3608416
</I>&gt;<i> web: www.askesis.nl
</I>
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="040014.html">[antlr-interest] Antlr 3.2 C-target lexer/parser in exe works, crashes in library
</A></li>
	<LI>Next message: <A HREF="040016.html">[antlr-interest] Antlr 3.2 C-target lexer/parser in exe works, crashes in library
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#40015">[ date ]</a>
              <a href="thread.html#40015">[ thread ]</a>
              <a href="subject.html#40015">[ subject ]</a>
              <a href="author.html#40015">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.antlr.org/mailman/listinfo/antlr-interest">More information about the antlr-interest
mailing list</a><br>
</body></html>
