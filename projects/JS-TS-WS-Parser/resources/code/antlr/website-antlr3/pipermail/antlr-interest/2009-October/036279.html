<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [antlr-interest] Lexer for a grammar similar to a template engine
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20Lexer%20for%20a%20grammar%20similar%20to%20a%20template%20engine&In-Reply-To=%3Cd2d18a10910110307n6e2942bfs7cbc36e1ad168618%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="036275.html">
   <LINK REL="Next"  HREF="036280.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[antlr-interest] Lexer for a grammar similar to a template engine</H1>
    <B>Joan Pujol</B> 
    <A HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20Lexer%20for%20a%20grammar%20similar%20to%20a%20template%20engine&In-Reply-To=%3Cd2d18a10910110307n6e2942bfs7cbc36e1ad168618%40mail.gmail.com%3E"
       TITLE="[antlr-interest] Lexer for a grammar similar to a template engine">joanpujol at gmail.com
       </A><BR>
    <I>Sun Oct 11 03:07:43 PDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="036275.html">[antlr-interest] MSBUILD/Vs2008 &gt; [OT 80/20]
</A></li>
        <LI>Next message: <A HREF="036280.html">[antlr-interest] Lexer for a grammar similar to a template engine
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#36279">[ date ]</a>
              <a href="thread.html#36279">[ thread ]</a>
              <a href="subject.html#36279">[ subject ]</a>
              <a href="author.html#36279">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi ,

I'm trying to do a grammar to parse expressions in a document in a
template engine basis.
The expressions are enclosed in ${}  (for example ${name}) and can be
in an enclosed in arbitrary document content.

Ideally what I need from the parser for input:   Hello ${name}.  Would
be similar to:

OTHER ^EXPR(ID)

I've tried that grammar but it doesn't works. If I enter an input that
contains $ or { in enters in an infinite bucle:

Grammar:
----
OTHER:	(
	    {input.LA(1)!='$' &amp;&amp; input.LA(2)!='{'}? . 	
	)+;
	
ID  :	('a'..'z'|'A'..'Z'|'_') ('a'..'z'|'A'..'Z'|'0'..'9'|'_')*
    ;
	
line	: (OTHER
	  | expr )*;

expr	: '${' ID '}';
---

I'm sure I'm missing some basic concept but have passed more than
three or four years from my last antlr parser and I've to refresh my
parsing abilities.
Some one can orient me of how to solve that? or what I'm doing wrong?

Can I do that in one parser or is better to use one parser to separate
arbitrary content of expressions and then use another parser for the
expressions?

A lot of thanks in advance,


-- 
Joan Jes&#250;s Pujol Espinar
<A HREF="http://www.joanpujol.cat">http://www.joanpujol.cat</A>
<A HREF="http://lujop.deviantart.com">http://lujop.deviantart.com</A>
</PRE>





<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="036275.html">[antlr-interest] MSBUILD/Vs2008 &gt; [OT 80/20]
</A></li>
	<LI>Next message: <A HREF="036280.html">[antlr-interest] Lexer for a grammar similar to a template engine
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#36279">[ date ]</a>
              <a href="thread.html#36279">[ thread ]</a>
              <a href="subject.html#36279">[ subject ]</a>
              <a href="author.html#36279">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.antlr.org/mailman/listinfo/antlr-interest">More information about the antlr-interest
mailing list</a><br>
</body></html>
