<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [antlr-interest] Re: How much abstraction would you recommend? (funny misspelling corrected :)
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:antlr-interest%40antlr.org?Subject=%5Bantlr-interest%5D%20Re%3A%20How%20much%20abstraction%20would%20you%20recommend%3F%20%28funny%20misspelling%20corrected%20%3A%29&In-Reply-To=a00ans%2B8tfo%40eGroups.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000356.html">
   <LINK REL="Next"  HREF="000354.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[antlr-interest] Re: How much abstraction would you recommend? (funny misspelling corrected :)</H1>
    <B>Andreas Rueckert</B> 
    <A HREF="mailto:antlr-interest%40antlr.org?Subject=%5Bantlr-interest%5D%20Re%3A%20How%20much%20abstraction%20would%20you%20recommend%3F%20%28funny%20misspelling%20corrected%20%3A%29&In-Reply-To=a00ans%2B8tfo%40eGroups.com"
       TITLE="[antlr-interest] Re: How much abstraction would you recommend? (funny misspelling corrected :)">a_rueckert at gmx.net
       </A><BR>
    <I>Sat Dec 22 02:27:56 PST 2001</I>
    <P><UL>
        <LI>Previous message: <A HREF="000356.html">[antlr-interest] Re: How much abstraction would use recommend?
</A></li>
        <LI>Next message: <A HREF="000354.html">[antlr-interest] antlr-mode 2.1; Emacs major mode for ANTLR grammar files
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#359">[ date ]</a>
              <a href="thread.html#359">[ thread ]</a>
              <a href="subject.html#359">[ subject ]</a>
              <a href="author.html#359">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi!

On Fre, 21 Dez 2001 jsrs701 wrote:

--&lt;snip&gt;--
 
&gt;<i> Howdy, Andreas,
</I>&gt;<i> 
</I>&gt;<i> I hope I'm not completely misunderstanding the point of your project, 
</I>&gt;<i> but I'd say you should DEFINITELY hide the classfile details from the 
</I>&gt;<i> user.  The .class file format is obnoxious.  You can't even execute 
</I>&gt;<i> it in place without doing a lot of preprocessing!  Ugh!
</I>
The problem with this is, that you get a classfile parser, that does some
complex preprocessing and is therefore not very well suited as a example for
binary parsing. That was one of the things, I wanted to use it for.
On the other hand, the example won't make any sense to you, if you don't have a
clue about the classfile format, anyway.

That's a example of the current code:
=======================================
// Info on the main class
class_info!
{ short class_info_index = 0; }         // A index of a entry in the constant pool.
        : class_info_index=u2
          {
            ShortAST class_info = (ShortAST)getConstant((int)class_info_index &amp; 0xffff);
            String class_name = getConstant(class_info.getShortValue());
            #class_info = #[CLASS_NAME, class_name];
          }
        ;       
=======================================
getConstant(int index) gets a entry from the constant pool. The class_info in
the classfile holds a index to a class_info structure in the constant pool. The
class_info structure holds a index to a UTF8 String constant in the pool. I
dereference both and create a AST node, that holds the class_name directly. Is
this easy enough to understand? Maybe add more comments to explain the details?

&gt;<i> If your project isn't too proprietary, can you publish your class 
</I>&gt;<i> file parser?  Ter's been wanting one to throw around for years.
</I>
I know. One of the reasons why I wanted to do this. He helped the ArgoUML
project a lot with his work, so I thought we should give something back. I want
to assign the copyright for the 2 parser to Ter, so he could include it in the
Antlr release. Some other code, that should be used in a ArgoUML reverse
engineering framework have to be under BSD, so they can be included in the Argo
release. I'm thinking about a dual license for the rest. GPL-like for non
commercial use, but a different license for commercial use, so some money could
be made that could go to a ArgoUML foundation to promote the use of Argo.

&gt;<i> Good luck,
</I>
Thanks! But things look good, that something will come out of this. I'm too far
to drop the project now. Jars are already parsed and some stuff shows up in
Argo, even if it's not complete yet.

Ciao,
Andreas

 

Your use of Yahoo! Groups is subject to <A HREF="http://docs.yahoo.com/info/terms/">http://docs.yahoo.com/info/terms/</A> 

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000356.html">[antlr-interest] Re: How much abstraction would use recommend?
</A></li>
	<LI>Next message: <A HREF="000354.html">[antlr-interest] antlr-mode 2.1; Emacs major mode for ANTLR grammar files
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#359">[ date ]</a>
              <a href="thread.html#359">[ thread ]</a>
              <a href="subject.html#359">[ subject ]</a>
              <a href="author.html#359">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.antlr.org/mailman/listinfo/antlr-interest">More information about the antlr-interest
mailing list</a><br>
</body></html>
