<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [antlr-interest] Need help with an address parser
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:antlr-interest%40antlr.org?Subject=%5Bantlr-interest%5D%20Need%20help%20with%20an%20address%20parser&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="016691.html">
   <LINK REL="Next"  HREF="016693.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[antlr-interest] Need help with an address parser</H1>
    <B>Jeff Bergman</B> 
    <A HREF="mailto:antlr-interest%40antlr.org?Subject=%5Bantlr-interest%5D%20Need%20help%20with%20an%20address%20parser&In-Reply-To="
       TITLE="[antlr-interest] Need help with an address parser">jbergmanster at gmail.com
       </A><BR>
    <I>Thu Jun 22 13:55:18 PDT 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="016691.html">[antlr-interest] Re: tree --&gt; tree transformation
</A></li>
        <LI>Next message: <A HREF="016693.html">[antlr-interest] Re: [antlr-dev] Hitting method size limit
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16692">[ date ]</a>
              <a href="thread.html#16692">[ thread ]</a>
              <a href="subject.html#16692">[ subject ]</a>
              <a href="author.html#16692">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I am trying to build an address parser but I am having problems.  The
grammar seems to choke on my streetDesignator and streetDesignatorLong in
the Parser section.  I tried putting these in the lexer but fared no
better.  I am not sure how to handle these.  I need them to be separated
because I have to eventually convert the long version to the abbreviated
designators when parsing the address.


options {
    language = &quot;CSharp&quot;;
}

class AddressParser extends Parser;
options {
    buildAST = true;    // uses CommonAST by default
}

address
    :    poBox | simpleStreetAddress
    ;

poBox: &quot;PO&quot; boxDesignator NUMBER
    ;

simpleStreetAddress: NUMBER  (IDENT |  streetDesignatorLong |
directionDesignator)+ (streetDesignator | streetDesignatorLong )
(directionDesignator)? (unitDesignator (NUMBER  | IDENT)? )?
;


boxDesignator: &quot;BOX&quot;;

unitDesignator :
  (&quot;APT&quot; |
  &quot;BASE&quot; |
  &quot;BLDG&quot; |
  &quot;BSMT&quot; |
  &quot;DEPT&quot; |
  &quot;FL&quot; |
  &quot;FRNT&quot; |
  &quot;HNGR&quot; |
  &quot;LBBY&quot; |
  &quot;LOT&quot; |
  &quot;LOWR&quot; |
  &quot;OFC&quot; |
  &quot;PH&quot; |
  &quot;PIER&quot; |
  &quot;POB&quot; |
  &quot;REAR&quot; |
  &quot;RM&quot; |
  &quot;SIDE&quot; |
  &quot;SLIP&quot; |
  &quot;SPC&quot; |
  &quot;STE&quot; |
  &quot;STOP&quot; |
  &quot;TRLR&quot; |
  &quot;UNIT&quot; |
  &quot;UPPR&quot;)
;

 directionDesignator:
    (&quot;E&quot; |
    &quot;N&quot; |
    &quot;NE&quot; |
    &quot;NW&quot; |
    &quot;S&quot; |
    &quot;SE&quot; |
    &quot;SW&quot; |
    &quot;W&quot;)
;


streetDesignator:
 &quot;ALY&quot; |
  &quot;ANX&quot; |
  &quot;ARC&quot; |
  &quot;AVE&quot; |
  &quot;BCH&quot; |
  &quot;BG&quot; |
  &quot;BGS&quot; |
  &quot;BLF&quot; |
  &quot;BLFS&quot; |
  &quot;BLVD&quot; |
  &quot;BND&quot; |
  &quot;BR&quot; |
  &quot;BRG&quot; |
  &quot;BRK&quot; |
  &quot;BRKS&quot; |
  &quot;BTM&quot; |
  &quot;BYP&quot; |
  &quot;BYU&quot; |
  &quot;CIR&quot; |
  &quot;CIRS&quot; |
  &quot;CLB&quot; |
  &quot;CLF&quot; |
  &quot;CLFS&quot; |
  &quot;CMN&quot; |
  &quot;COR&quot; |
  &quot;CORS&quot; |
  &quot;CP&quot; |
  &quot;CPE&quot; |
  &quot;CRES&quot; |
  &quot;CRK&quot; |
  &quot;CRSE&quot; |
  &quot;CRST&quot; |
  &quot;CSWY&quot; |
  &quot;CT&quot; |
  &quot;CTR&quot; |
  &quot;CTRS&quot; |
  &quot;CTS&quot; |
  &quot;CURV&quot; |
  &quot;CV&quot; |
  &quot;CVS&quot; |
  &quot;CYN&quot; |
  &quot;DL&quot; |
  &quot;DM&quot; |
  &quot;DR&quot; |
  &quot;DRS&quot; |
  &quot;DV&quot; |
  &quot;EST&quot; |
  &quot;ESTS&quot; |
  &quot;EXPY&quot; |
  &quot;EXT&quot; |
  &quot;EXTS&quot; |
  &quot;FALL&quot; |
  &quot;FLD&quot; |
  &quot;FLDS&quot; |
  &quot;FLS&quot; |
  &quot;FLT&quot; |
  &quot;FLTS&quot; |
  &quot;FRD&quot; |
  &quot;FRDS&quot; |
  &quot;FRG&quot; |
  &quot;FRGS&quot; |
  &quot;FRK&quot; |
  &quot;FRKS&quot; |
  &quot;FRST&quot; |
  &quot;FRY&quot; |
  &quot;FT&quot; |
  &quot;FWY&quot; |
  &quot;GDN&quot; |
  &quot;GDNS&quot; |
  &quot;GLN&quot; |
  &quot;GLNS&quot; |
  &quot;GRN&quot; |
  &quot;GRNS&quot; |
  &quot;GRV&quot; |
  &quot;GRVS&quot; |
  &quot;GTWY&quot; |
  &quot;HBR&quot; |
  &quot;HBRS&quot; |
  &quot;HL&quot; |
  &quot;HLS&quot; |
  &quot;HOLW&quot; |
  &quot;HTS&quot; |
  &quot;HVN&quot; |
  &quot;HWY&quot; |
  &quot;INLT&quot; |
  &quot;IS&quot; |
  &quot;ISLE&quot; |
  &quot;ISS&quot; |
  &quot;JCT&quot; |
  &quot;JCTS&quot; |
  &quot;KNL&quot; |
  &quot;KNLS&quot; |
  &quot;KY&quot; |
  &quot;KYS&quot; |
  &quot;LAND&quot; |
  &quot;LCK&quot; |
  &quot;LCKS&quot; |
  &quot;LDG&quot; |
  &quot;LF&quot; |
  &quot;LGT&quot; |
  &quot;LGTS&quot; |
  &quot;LK&quot; |
  &quot;LKS&quot; |
  &quot;LN&quot; |
  &quot;LNDG&quot; |
  &quot;LOOP&quot; |
  &quot;MALL&quot; |
  &quot;MDW&quot; |
  &quot;MDWS&quot; |
  &quot;MEWS&quot; |
  &quot;ML&quot; |
  &quot;MLS&quot; |
  &quot;MNR&quot; |
  &quot;MNRS&quot; |
  &quot;MSN&quot; |
  &quot;MT&quot; |
  &quot;MTN&quot; |
  &quot;MTNS&quot; |
  &quot;MTWY&quot; |
  &quot;NCK&quot; |
  &quot;OPAS&quot; |
  &quot;ORCH&quot; |
  &quot;OVAL&quot; |
  &quot;PARK&quot; |
  &quot;PASS&quot; |
  &quot;PATH&quot; |
  &quot;PIKE&quot; |
  &quot;PKWY&quot; |
  &quot;PL&quot; |
  &quot;PLN&quot; |
  &quot;PLNS&quot; |
  &quot;PLZ&quot; |
  &quot;PNE&quot; |
  &quot;PNES&quot; |
  &quot;PR&quot; |
  &quot;PRT&quot; |
  &quot;PRTS&quot; |
  &quot;PSGE&quot; |
  &quot;PT&quot; |
  &quot;PTS&quot; |
  &quot;RADL&quot; |
  &quot;RAMP&quot; |
  &quot;RD&quot; |
  &quot;RDG&quot; |
  &quot;RDGS&quot; |
  &quot;RDS&quot; |
  &quot;RIV&quot; |
  &quot;RNCH&quot; |
  &quot;ROW&quot; |
  &quot;RPD&quot; |
  &quot;RPDS&quot; |
  &quot;RR&quot; |
  &quot;RST&quot; |
  &quot;RTE&quot; |
  &quot;RUE&quot; |
  &quot;RUN&quot; |
  &quot;SHL&quot; |
  &quot;SHLS&quot; |
  &quot;SHR&quot; |
  &quot;SHRS&quot; |
  &quot;SKWY&quot; |
  &quot;SMT&quot; |
  &quot;SPG&quot; |
  &quot;SPGS&quot; |
  &quot;SPUR&quot; |
  &quot;SQ&quot; |
  &quot;SQS&quot; |
  &quot;ST&quot; |
  &quot;STA&quot; |
  &quot;STRA&quot; |
  &quot;STRM&quot; |
  &quot;STS&quot; |
  &quot;TER&quot; |
  &quot;TPKE&quot; |
  &quot;TRAK&quot; |
  &quot;TRCE&quot; |
  &quot;TRFY&quot; |
  &quot;TRL&quot; |
  &quot;TRWY&quot; |
  &quot;TUNL&quot; |
  &quot;UN&quot; |
  &quot;UNS&quot; |
  &quot;UPAS&quot; |
  &quot;VIA&quot; |
  &quot;VIS&quot; |
  &quot;VL&quot; |
  &quot;VLG&quot; |
  &quot;VLGS&quot; |
  &quot;VLY&quot; |
  &quot;VLYS&quot; |
  &quot;VW&quot; |
  &quot;VWS&quot; |
  &quot;WALK&quot; |
  &quot;WALL&quot; |
  &quot;WAY&quot; |
  &quot;WAYS&quot; |
  &quot;WL&quot; |
  &quot;WLS&quot; |
  &quot;XING&quot; |
  &quot;XRD&quot; |

;
streetDesignatorLong:
 &quot;ALLEY&quot; |
  &quot;ANNEX&quot; |
  &quot;ARCADE&quot; |
  &quot;AVENUE&quot; |
  &quot;BEACH&quot; |
  &quot;BURG&quot; |
  &quot;BURGS&quot; |
  &quot;BLUFF&quot; |
  &quot;BLUFFS&quot; |
  &quot;BOULEVARD&quot; |
  &quot;BEND&quot; |
  &quot;BRANCH&quot; |
  &quot;BRIDGE&quot; |
  &quot;BROOK&quot; |
  &quot;BROOKS&quot; |
  &quot;BOTTOM&quot; |
  &quot;BYPASS&quot; |
  &quot;BAYOU&quot; |
  &quot;BAYOO&quot; |
  &quot;CIRCLE&quot; |
  &quot;CIRCLES&quot; |
  &quot;CLUB&quot; |
  &quot;CLIFF&quot; |
  &quot;CLIFFS&quot; |
  &quot;COMMON&quot; |
  &quot;CORNER&quot; |
  &quot;CORNERS&quot; |
  &quot;CAMP&quot; |
  &quot;CAPE&quot; |
  &quot;CRESCENT&quot; |
  &quot;CREEK&quot; |
  &quot;COURSE&quot; |
  &quot;CREST&quot; |
  &quot;CAUSEWAY&quot; |
  &quot;COURT&quot; |
  &quot;CENTER&quot; |
  &quot;CENTERS&quot; |
  &quot;COURTS&quot; |
  &quot;CURVE&quot; |
  &quot;COVE&quot; |
  &quot;COVES&quot; |
  &quot;CANYON&quot; |
  &quot;DALE&quot; |
  &quot;DAM&quot; |
  &quot;DRIVE&quot; |
  &quot;DRIVES&quot; |
  &quot;DIVIDE&quot; |
  &quot;ESTATE&quot; |
  &quot;ESTATES&quot; |
  &quot;EXPRESSWAY&quot; |
  &quot;EXTENSION&quot; |
  &quot;EXTENSIONS&quot; |
  &quot;FIELD&quot; |
  &quot;FIELDS&quot; |
  &quot;FALLS&quot; |
  &quot;FLAT&quot; |
  &quot;FLATS&quot; |
  &quot;FORD&quot; |
  &quot;FORDS&quot; |
  &quot;FORGE&quot; |
  &quot;FORGES&quot; |
  &quot;FORK&quot; |
  &quot;FORKS&quot; |
  &quot;FOREST&quot; |
  &quot;FERRY&quot; |
  &quot;FORT&quot; |
  &quot;FREEWAY&quot; |
  &quot;GARDEN&quot; |
  &quot;GARDENS&quot; |
  &quot;GLEN&quot; |
  &quot;GLENS&quot; |
  &quot;GREEN&quot; |
  &quot;GREENS&quot; |
  &quot;GROVE&quot; |
  &quot;GROVES&quot; |
  &quot;GATEWAY&quot; |
  &quot;HARBOR&quot; |
  &quot;HARBORS&quot; |
  &quot;HILL&quot; |
  &quot;HILLS&quot; |
  &quot;HOLLOW&quot; |
  &quot;HEIGHTS&quot; |
  &quot;HAVEN&quot; |
  &quot;HIGHWAY&quot; |
  &quot;INLET&quot; |
  &quot;ISLAND&quot; |
  &quot;ISLANDS&quot; |
  &quot;JUNCTION&quot; |
  &quot;JUNCTIONS&quot; |
  &quot;KNOLL&quot; |
  &quot;KNOLLS&quot; |
  &quot;KEY&quot; |
  &quot;KEYS&quot; |
  &quot;LOCK&quot; |
  &quot;LOCKS&quot; |
  &quot;LODGE&quot; |
  &quot;LOAF&quot; |
  &quot;LIGHT&quot; |
  &quot;LIGHTS&quot; |
  &quot;LAKE&quot; |
  &quot;LAKES&quot; |
  &quot;LANE&quot; |
  &quot;LANDING&quot; |
  &quot;MEADOW&quot; |
  &quot;MEADOWS&quot; |
  &quot;MILL&quot; |
  &quot;MILLS&quot; |
  &quot;MANOR&quot; |
  &quot;MANORS&quot; |
  &quot;MISSION&quot; |
  &quot;MOUNT&quot; |
  &quot;MOUNTAIN&quot; |
  &quot;MOUNTAINS&quot; |
  &quot;MOTORWAY&quot; |
  &quot;NECK&quot; |
  &quot;OVERPASS&quot; |
  &quot;ORCHARD&quot; |
  &quot;PARKS&quot; |
  &quot;PARKWAY&quot; |
  &quot;PARKWAYS&quot; |
  &quot;PLACE&quot; |
  &quot;PLAIN&quot; |
  &quot;PLAINS&quot; |
  &quot;PLAZA&quot; |
  &quot;PINE&quot; |
  &quot;PINES&quot; |
  &quot;PRAIRIE&quot; |
  &quot;PORT&quot; |
  &quot;PORTS&quot; |
  &quot;PASSAGE&quot; |
  &quot;POINT&quot; |
  &quot;POINTS&quot; |
  &quot;RADIAL&quot; |
  &quot;ROAD&quot; |
  &quot;RIDGE&quot; |
  &quot;RIDGES&quot; |
  &quot;ROADS&quot; |
  &quot;RIVER&quot; |
  &quot;RANCH&quot; |
  &quot;RAPID&quot; |
  &quot;RAPIDS&quot; |
  &quot;RURAL ROUTE&quot; |
  &quot;REST&quot; |
  &quot;ROUTE&quot; |
  &quot;SHOAL&quot; |
  &quot;SHOALS&quot; |
  &quot;SHORE&quot; |
  &quot;SHORES&quot; |
  &quot;SKYWAY&quot; |
  &quot;SUMMIT&quot; |
  &quot;SPRING&quot; |
  &quot;SPRINGS&quot; |
  &quot;SPUR(S)&quot; |
  &quot;SQUARE&quot; |
  &quot;SQUARES&quot; |
  &quot;STREET&quot; |
  &quot;STATION&quot; |
  &quot;STRAVENUE&quot; |
  &quot;STREAM&quot; |
  &quot;STREETS&quot; |
  &quot;TERRACE&quot; |
  &quot;TURNPIKE&quot; |
  &quot;TRACK&quot; |
  &quot;TRACE&quot; |
  &quot;TRAFFICWAY&quot; |
  &quot;TRAIL&quot; |
  &quot;THROUGHWAY&quot; |
  &quot;TUNNEL&quot; |
  &quot;UNION&quot; |
  &quot;UNIONS&quot; |
  &quot;UNDERPASS&quot; |
  &quot;VIADUCT&quot; |
  &quot;VISTA&quot; |
  &quot;VILLE&quot; |
  &quot;VILLAGE&quot; |
  &quot;VILLAGES&quot; |
  &quot;VALLEY&quot; |
  &quot;VALLEYS&quot; |
  &quot;VIEW&quot; |
  &quot;VIEWS&quot; |
  &quot;WELL&quot; |
  &quot;WELLS&quot; |
  &quot;CROSSING&quot;
  ;




class AddressLexer extends Lexer;
options {
    k=10;
    testLiterals=false;
}
tokens
{
    ADDRESSDESIGNATORLONG;
}

WS    :    (' '
    |    '\t'
    |   '\f'
    |    '\n'
    |    '\r')
        { _ttype = Token.SKIP; }
    ;


protected
DIGIT
    :    '0'..'9'
    ;
protected
CHAR
    :    'A'..'Z'
    ;

NUMBER    :    (DIGIT)+ ('/' (DIGIT)+ )? (  ('-' ( (CHAR)+ | (DIGIT)+ ) )
|<i>  (CHAR {$setType(IDENT);} )*    )
</I>    ;




IDENT
  options {testLiterals=true;}
  : (CHAR) ( CHAR |'-'|'0'..'9')*
  ;
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://www.antlr.org/pipermail/antlr-interest/attachments/20060622/97346c11/attachment-0001.html">http://www.antlr.org/pipermail/antlr-interest/attachments/20060622/97346c11/attachment-0001.html</A>
</PRE>






<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="016691.html">[antlr-interest] Re: tree --&gt; tree transformation
</A></li>
	<LI>Next message: <A HREF="016693.html">[antlr-interest] Re: [antlr-dev] Hitting method size limit
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16692">[ date ]</a>
              <a href="thread.html#16692">[ thread ]</a>
              <a href="subject.html#16692">[ subject ]</a>
              <a href="author.html#16692">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.antlr.org/mailman/listinfo/antlr-interest">More information about the antlr-interest
mailing list</a><br>
</body></html>
