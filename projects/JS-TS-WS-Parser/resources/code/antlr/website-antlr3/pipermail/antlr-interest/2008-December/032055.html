<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [antlr-interest] C target difficulties
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20C%20target%20difficulties&In-Reply-To=%3CBLU106-W56FAFB0C6A3E6B5C3729E6ECF30%40phx.gbl%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="032054.html">
   <LINK REL="Next"  HREF="032060.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[antlr-interest] C target difficulties</H1>
    <B>M. C.</B> 
    <A HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20C%20target%20difficulties&In-Reply-To=%3CBLU106-W56FAFB0C6A3E6B5C3729E6ECF30%40phx.gbl%3E"
       TITLE="[antlr-interest] C target difficulties">thats_me23 at live.nl
       </A><BR>
    <I>Thu Dec 18 04:48:20 PST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="032054.html">[antlr-interest] Antwort: Single quote and MismatchedTokenException
</A></li>
        <LI>Next message: <A HREF="032060.html">[antlr-interest] C target difficulties
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#32055">[ date ]</a>
              <a href="thread.html#32055">[ thread ]</a>
              <a href="subject.html#32055">[ subject ]</a>
              <a href="author.html#32055">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
Hi all,
 
 
I have been working with ANTLR for some weeks now, but I'm having some difficulties getting the generated code to work.
 
I'm using ANTLRworks 1.2.2 under Fedora linux 8. and installed the runtime library &quot;libantlr3c-3.1.1&quot;, which works perfectly. 
 
I generate code for the C target, and made my own main.c using the example on the ANTLR website, this code compiles well without errors (and some warnings about not used variables, but that isn't harmfull I guess)
 
Whats the problem then? Well I've got a question about the section just above the main, &quot;int ANTLR3_CDECL&quot; what is it good for? when I comment this part out, the source compiles well, but if I don't it generates the following error:
 
&quot;main.c:8: Warning: two or more data types in declaration specifiers&quot;
 
Then I've got a somewhat more serious problem, my code hangs when feeding an input file. I checked with some printf statements where it hangs, but it doesn't do anything after the  &quot; psr = testParserNew(tstream); &quot; line. The program doesn't shutdown, but also doesn't do anything else. 
 
And is  psr-&gt;program(psr);  the right way to invoke the parser? 
So that the outputs I made in the .g file (like detecting a number and then printf(&quot;number found&quot;); actually get printed in the terminal?
 
I've been trying things for some time now, but really can't find the problem. Does someone else maybe know what i'm doing wrong?
 
Thanx in advance!!
 
 
Here is a copy of my main.c
---------------------------------------
 
#include &quot;testLexer.h&quot;#include &quot;testParser.h&quot;
int  ANTLR3_CDECL
int main(int argc, char *argv[]){    pANTLR3_UINT8           fName;  // filename in char 8 format    pANTLR3_INPUT_STREAM    input;  // input stream    ptestLexer lxr;    pANTLR3_COMMON_TOKEN_STREAM     tstream;    ptestParser psr;
    if (argc &lt; 2 || argv[1] == NULL)    {        fName   =(pANTLR3_UINT8)&quot;./input&quot;;    }    else    {                fName   = (pANTLR3_UINT8)argv[1];    }
    input       = antlr3AsciiFileStreamNew(fName);
    if ( input == NULL)    {            fprintf(stderr, &quot;Failed to open file %s\n&quot;, (char *)fName);            exit(1);    }
   lxr      = testLexerNew(input);        // CLexerNew is generated by ANTLR
    if ( lxr == NULL )    {            fprintf(stderr, &quot;Unable to create the lexer due to malloc() failure1\n&quot;);            exit(1);    }
   tstream = antlr3CommonTokenStreamSourceNew(ANTLR3_SIZE_HINT, TOKENSOURCE(lxr));
    if (tstream == NULL)    {        fprintf(stderr, &quot;Out of memory trying to allocate token stream\n&quot;);        exit(1);    }
    psr     = testParserNew(tstream);  // CParserNew is generated by ANTLR3
 
// SOFTWARE HANGS HERE........
 
 
    if (psr == NULL)    {        fprintf(stderr, &quot;Out of memory trying to allocate parser\n&quot;);        exit(ANTLR3_ERR_NOMEM);    }
    psr-&gt;program(psr);                                    
-----------------------------------------------------
 
_________________________________________________________________
Download de nieuwste emoticons voor in je Messenger
<A HREF="http://www.msnmessengerexperience.nl/chuck/">http://www.msnmessengerexperience.nl/chuck/</A>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://www.antlr.org/pipermail/antlr-interest/attachments/20081218/26c8ed7d/attachment.html">http://www.antlr.org/pipermail/antlr-interest/attachments/20081218/26c8ed7d/attachment.html</A> 
</PRE>










<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="032054.html">[antlr-interest] Antwort: Single quote and MismatchedTokenException
</A></li>
	<LI>Next message: <A HREF="032060.html">[antlr-interest] C target difficulties
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#32055">[ date ]</a>
              <a href="thread.html#32055">[ thread ]</a>
              <a href="subject.html#32055">[ subject ]</a>
              <a href="author.html#32055">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.antlr.org/mailman/listinfo/antlr-interest">More information about the antlr-interest
mailing list</a><br>
</body></html>
