<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [antlr-interest] Stack overflow problem with C++
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:antlr-interest%40antlr.org?Subject=%5Bantlr-interest%5D%20Stack%20overflow%20problem%20with%20C%2B%2B&In-Reply-To=bc607a4e05071900249b9b5dd%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="013106.html">
   <LINK REL="Next"  HREF="013111.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[antlr-interest] Stack overflow problem with C++</H1>
    <B>Jorg Halker</B> 
    <A HREF="mailto:antlr-interest%40antlr.org?Subject=%5Bantlr-interest%5D%20Stack%20overflow%20problem%20with%20C%2B%2B&In-Reply-To=bc607a4e05071900249b9b5dd%40mail.gmail.com"
       TITLE="[antlr-interest] Stack overflow problem with C++">jogi1978 at gmx.de
       </A><BR>
    <I>Tue Jul 19 09:14:37 PDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="013106.html">[antlr-interest] Stack overflow problem with C++
</A></li>
        <LI>Next message: <A HREF="013111.html">[antlr-interest] Stack overflow problem with C++
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13110">[ date ]</a>
              <a href="thread.html#13110">[ thread ]</a>
              <a href="subject.html#13110">[ subject ]</a>
              <a href="author.html#13110">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi!

Okay, i tried it with linux (feodora core 2) and gcc (v3.2.2). It looks like
that the stack is larger there. So if i count until 150000 i have the same
problem with linux and gcc: segmentation fault/stack overflow. But if i set
up a parser which parses a file and creates an ast with the same amount of
ast nodes like the loop from the code snippet does, everything is fine and
the program exits well.

Is it intended that the loop creates objects on the stack?? am i wrong if i
think that the stack should not overflow because the objects should be
created on the heap?? 

Thank you!

Joerg

&gt;<i> -----Original Message-----
</I>&gt;<i> From: Ric Klaren [mailto:<A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">ric.klaren at gmail.com</A>] 
</I>&gt;<i> Sent: Tuesday, July 19, 2005 9:24 AM
</I>&gt;<i> To: Jorg Halker
</I>&gt;<i> Cc: <A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">antlr-interest at antlr.org</A>
</I>&gt;<i> Subject: Re: [antlr-interest] Stack overflow problem with C++
</I>&gt;<i> 
</I>&gt;<i> On 7/19/05, Jorg Halker &lt;<A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">jogi1978 at gmx.de</A>&gt; wrote:
</I>&gt;<i> &gt; If i run the following code i get a stack overflow error:
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; ****************************************
</I>&gt;<i> &gt; #include &lt;antlr/CommonAST.hpp&gt;
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; using namespace antlr;
</I>&gt;<i> &gt; using namespace std;
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; int main(int argc, char * * argv)
</I>&gt;<i> &gt; {
</I>&gt;<i> &gt;         RefCommonAST first = RefCommonAST( new CommonAST());
</I>&gt;<i> &gt;         RefCommonAST current = first;
</I>&gt;<i> &gt;         for (unsigned int counter = 0; counter &lt; 9000; ++counter)
</I>&gt;<i> &gt;         {
</I>&gt;<i> &gt;                 current-&gt;setNextSibling(RefAST( new CommonAST()));
</I>&gt;<i> &gt;                 current = current-&gt;getNextSibling();
</I>&gt;<i> &gt;         }
</I>&gt;<i> &gt; }
</I>&gt;<i> &gt; ****************************************
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; It looks like a problem with the destructor of CommonAST or 
</I>&gt;<i> its base 
</I>&gt;<i> &gt; classes. The error occours if 'first' runs out of the scope.
</I>&gt;<i> &gt; If i create a parser that parses an input file into the same AST 
</I>&gt;<i> &gt; scheme, everything works fine. But if i create a copy of 
</I>&gt;<i> the AST from 
</I>&gt;<i> &gt; the parser i run into the same problem.
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; What's wrong? The code snippet should not produce an stack overflow 
</I>&gt;<i> &gt; error, am i right?
</I>&gt;<i> 
</I>&gt;<i> Nope it shouldn't (and it doesn't on a number of machines I have acces
</I>&gt;<i> to) Which leads to the question:  What antlr version? What 
</I>&gt;<i> OS? What compiler?
</I>&gt;<i> 
</I>&gt;<i> Cheers,
</I>&gt;<i> 
</I>&gt;<i> Ric
</I>&gt;<i> 
</I>
</PRE>








<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="013106.html">[antlr-interest] Stack overflow problem with C++
</A></li>
	<LI>Next message: <A HREF="013111.html">[antlr-interest] Stack overflow problem with C++
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13110">[ date ]</a>
              <a href="thread.html#13110">[ thread ]</a>
              <a href="subject.html#13110">[ subject ]</a>
              <a href="author.html#13110">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.antlr.org/mailman/listinfo/antlr-interest">More information about the antlr-interest
mailing list</a><br>
</body></html>
