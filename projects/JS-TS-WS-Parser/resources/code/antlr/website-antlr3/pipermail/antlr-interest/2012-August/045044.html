<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [antlr-interest] Help on gated semantic predicate
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20Help%20on%20gated%20semantic%20predicate&In-Reply-To=%3C50265B39.90403%40gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="045041.html">
   <LINK REL="Next"  HREF="045042.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[antlr-interest] Help on gated semantic predicate</H1>
    <B>Kieran Simpson</B> 
    <A HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20Help%20on%20gated%20semantic%20predicate&In-Reply-To=%3C50265B39.90403%40gmail.com%3E"
       TITLE="[antlr-interest] Help on gated semantic predicate">kierans777 at gmail.com
       </A><BR>
    <I>Sat Aug 11 06:16:41 PDT 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="045041.html">[antlr-interest]  Help on gated semantic predicate
</A></li>
        <LI>Next message: <A HREF="045042.html">[antlr-interest] Bug: String constant is too big in Parser generated by ANTLR v4
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#45044">[ date ]</a>
              <a href="thread.html#45044">[ thread ]</a>
              <a href="subject.html#45044">[ subject ]</a>
              <a href="author.html#45044">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Yep, I've had the problem too.  The way I got around it was much in the 
vein of Andrews post, moving the &quot;decision&quot; into a parser rule (and thus 
the Parser class).  By having the parser &quot;cast&quot; the token it overcomes 
this shortcoming of the lexer.  For example:

id: MASK | ID;

Since MASK is really a subset of the characters than an ID can be, an id 
parser rule can consume either token, and the caller of the id rule will 
know that the input was matched correctly (semantically you got an ID 
with bit of syntactic trickery).

HTH.

Cheers,

On 11/08/12 4:23 AM, Andrew Mains wrote:
&gt;<i> Francis,
</I>&gt;<i>
</I>&gt;<i> The problem here is that both MASK and ID are lexer rules, not parser
</I>&gt;<i> rules. As you probably know, even though you are using a combined
</I>&gt;<i> grammar, the lexer and parser still compile down to separate Java
</I>&gt;<i> classes. Since the lexer provides tokens for the parser, it necessarily
</I>&gt;<i> executes its rules before the parser
</I>&gt;<i> sees a single token. Furthermore, rules defined first in the lexer have
</I>&gt;<i> precedence over those defined later, so the lexer will match MASK
</I>&gt;<i> instead of ID.
</I>&gt;<i>
</I>&gt;<i> Therefore, the lexer matches MASK before start is even called, giving
</I>&gt;<i> the behavior you observed.
</I>&gt;<i>
</I>&gt;<i> If mask were a parser rule instead of a lexer rule, it would act as you
</I>&gt;<i> expected.
</I>&gt;<i>
</I>&gt;<i> Hope this helps!
</I>&gt;<i>
</I>&gt;<i> Andrew
</I>&gt;<i>
</I>&gt;<i> On 08/09/2012 12:00 PM, <A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">antlr-interest-request at antlr.org</A> wrote:
</I>&gt;&gt;<i> start : ID;
</I>&gt;&gt;<i> MASK : {false}?=&gt;( 'A' | 'B');
</I>&gt;&gt;<i> VARIABLE : 'A'..'Z';
</I>&gt;&gt;<i> ID : ('a'..'z'|'A'..'Z'|'_')
</I>&gt;&gt;<i> ('a'..'z'|'A'..'Z'|'0'..'9'|'_')*;
</I>&gt;&gt;<i> WS : ( ' ' | '\t' | '\r' | '\n' )+ {
</I>&gt;&gt;<i> $channel=HIDDEN; } ;
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I></PRE>






<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="045041.html">[antlr-interest]  Help on gated semantic predicate
</A></li>
	<LI>Next message: <A HREF="045042.html">[antlr-interest] Bug: String constant is too big in Parser generated by ANTLR v4
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#45044">[ date ]</a>
              <a href="thread.html#45044">[ thread ]</a>
              <a href="subject.html#45044">[ subject ]</a>
              <a href="author.html#45044">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.antlr.org/mailman/listinfo/antlr-interest">More information about the antlr-interest
mailing list</a><br>
</body></html>
