<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [antlr-interest] ANTLR version 2.X to ANTLR version 3.X (the horror,	the horror)
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20ANTLR%20version%202.X%20to%20ANTLR%20version%203.X%20%28the%20horror%2C%0A%09the%20horror%29&In-Reply-To=%3C7f8924df0808071941x52edecf1mbaf44a1e0ad8b076%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="029737.html">
   <LINK REL="Next"  HREF="029745.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[antlr-interest] ANTLR version 2.X to ANTLR version 3.X (the horror,	the horror)</H1>
    <B>Ian Kaplan</B> 
    <A HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20ANTLR%20version%202.X%20to%20ANTLR%20version%203.X%20%28the%20horror%2C%0A%09the%20horror%29&In-Reply-To=%3C7f8924df0808071941x52edecf1mbaf44a1e0ad8b076%40mail.gmail.com%3E"
       TITLE="[antlr-interest] ANTLR version 2.X to ANTLR version 3.X (the horror,	the horror)">iank at bearcave.com
       </A><BR>
    <I>Thu Aug  7 19:41:35 PDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="029737.html">[antlr-interest] ANTLR v2,v3
</A></li>
        <LI>Next message: <A HREF="029745.html">[antlr-interest] ANTLR version 2.X to ANTLR version 3.X (the horror, the horror)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#29738">[ date ]</a>
              <a href="thread.html#29738">[ thread ]</a>
              <a href="subject.html#29738">[ subject ]</a>
              <a href="author.html#29738">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>  As part of a research project at the Lawrence Livermore National Lab, I
have implemented a graph database query language parser using ANTLR (my
personal motto is &quot;Death to SPARQL&quot;).  The ANTLR 2.X parser consists of an
ANTLR lexer (scanner) and and ANTLR grammar rules with semantic actions
(Java code) that builds data structures as a result of the parse.  The
language is simple enough that abstract syntax trees are not really
necessary.

  I have long been a fan of ANTLR and when Terence's book came out, I bought
a copy.  I spent most of the day struggling to convert about 2,000 lines of
comments and grammar for the query language from 2.X to 3.X.  It has been a
frustrating experience.  I have poured over the book and any documentation
that I can find on antlr.org.  My initial impression was that there were not
that many differences between ANTLR 2.X and 3.X.  This does not seem to be
the case, at least for my grammar which consists of a lot of embedded Java.

  More examples which semantic actions (Java code) would be very helpful.
It took me some time, for example, to understand that the

  @init{
  }
  @after{
   }

  Blocks follow each other (I do note the example on page 144 of the book).


  My 2.X code has syntax like this:

      t:TOKEN   (for example t:LPAREN)

  I then reference t.getFile(), t.getLine() and t.getColumn() in my Java
code.  I have not figured out yet how to do this in 3.X.  I'd be grateful
for any pointers.

  My 2.X code also had grammar like

  tokens {
     ADJACENCY = &quot;adjacency&quot;;
    PATTERN = &quot;pattern&quot;;
  }

  These are reserved words in the query language.  I really don't like the
habit in the example code of using quoted strings like 'adjacency' in the
grammar rules.

   I actually found what seemed to be 3.X examples using the above tokens
syntax.  However, it doesn't seem to work.  The proper form seems to be:

  tokens {
      ADJACENCY : 'adjacency';
     PATTERN : 'pattern';
  }

  As noted in the 2.X to 3.X documentation, there's no built in way to
create case insensitivity without overriding the scanner input stream.

  The good news is that there's documentation, but for some reason with
ANTLR there never seems to be enough documentation to make the initial
learning curve anything but painful.

  I noticed that the person who maintains the 2.X C++ grammar is looking for
someone to take it over since they don't want to deal with the conversion to
ANTLR 3.X.  I can't say I blame them.   My grammar is a lot smaller and it's
going to be at least a two day slog with a fair amount of frustration.

  In addition to the fact that the 2.X grammar is obsolete, I'm doing the
conversion because I am hoping that the LL(*) will avoid left factoring my
grammar into a less clear form.  I hope that I am not disappointed.

  Ian
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://www.antlr.org/pipermail/antlr-interest/attachments/20080807/2e6dc04e/attachment.html">http://www.antlr.org/pipermail/antlr-interest/attachments/20080807/2e6dc04e/attachment.html</A> 
</PRE>











<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="029737.html">[antlr-interest] ANTLR v2,v3
</A></li>
	<LI>Next message: <A HREF="029745.html">[antlr-interest] ANTLR version 2.X to ANTLR version 3.X (the horror, the horror)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#29738">[ date ]</a>
              <a href="thread.html#29738">[ thread ]</a>
              <a href="subject.html#29738">[ subject ]</a>
              <a href="author.html#29738">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.antlr.org/mailman/listinfo/antlr-interest">More information about the antlr-interest
mailing list</a><br>
</body></html>
