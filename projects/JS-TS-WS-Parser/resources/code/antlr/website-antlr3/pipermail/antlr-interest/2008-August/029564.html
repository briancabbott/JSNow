<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [antlr-interest] Help required with altering the structure of a	statement
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20Help%20required%20with%20altering%20the%20structure%20of%20a%0A%09statement&In-Reply-To=%3CAE0A511AB227724A912139BAF4BBAC7103FE36CF%40cssvrex001.carsales.office%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="029567.html">
   <LINK REL="Next"  HREF="029568.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[antlr-interest] Help required with altering the structure of a	statement</H1>
    <B>Varun Bhargava</B> 
    <A HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20Help%20required%20with%20altering%20the%20structure%20of%20a%0A%09statement&In-Reply-To=%3CAE0A511AB227724A912139BAF4BBAC7103FE36CF%40cssvrex001.carsales.office%3E"
       TITLE="[antlr-interest] Help required with altering the structure of a	statement">varun.bhargava at carsales.com.au
       </A><BR>
    <I>Sun Aug  3 23:13:31 PDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="029567.html">[antlr-interest] Help with integrating ANTLR3 with Visual Studio 2008
</A></li>
        <LI>Next message: <A HREF="029568.html">[antlr-interest] Rewrite separators to root nodes.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#29564">[ date ]</a>
              <a href="thread.html#29564">[ thread ]</a>
              <a href="subject.html#29564">[ subject ]</a>
              <a href="author.html#29564">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi All,

 

I have a task to substitute some placeholders in a statement with
parameters values that the user can select from a UI. Here's an example
of what I want

 

SELECT id from mytable WHERE (a = 23 AND (b = @PARAM1 OR d = 34) OR e =
44)

 

I need to substitute @PARAM1 with the actual value that the user selects
from a UI and replace it in the WHERE clause, then regenerate the
statement.

 

If @PARAM1 is NULL then I need to remove the comparison clause (b =
@PARAM1) and regenerate the query which should now look like the
following.

 

SELECT id from mytable WHERE (a = 23 AND (d = 34) OR e = 44)

 

 

Here is the pseudocode of what I have thought :

 

1.	Iterate the nodes and when the node is a placeholder, replace it
with the value
2.	If the value that will replace the parameter is NULL then mark
the comparison to be deleted from the tree
3.	Find the dangling instances of ANDs and Ors after NULL
comparison nodes have been deleted 

 

I am an absolute beginner to ANTLR but just can't figure out how to do
the above without using a heap of if's and else's and dirty code. I've
been told this is trivial for ANTLR. Can someone please help me out on
how I can achieve this?

 

Rewrite rules? StringTemplates? I just can't find any good examples to
get me started.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://www.antlr.org/pipermail/antlr-interest/attachments/20080804/4aa224d9/attachment.html">http://www.antlr.org/pipermail/antlr-interest/attachments/20080804/4aa224d9/attachment.html</A> 
</PRE>










<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="029567.html">[antlr-interest] Help with integrating ANTLR3 with Visual Studio 2008
</A></li>
	<LI>Next message: <A HREF="029568.html">[antlr-interest] Rewrite separators to root nodes.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#29564">[ date ]</a>
              <a href="thread.html#29564">[ thread ]</a>
              <a href="subject.html#29564">[ subject ]</a>
              <a href="author.html#29564">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.antlr.org/mailman/listinfo/antlr-interest">More information about the antlr-interest
mailing list</a><br>
</body></html>
