<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [antlr-interest] Problem with C target output on example C	grammar
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20Problem%20with%20C%20target%20output%20on%20example%20C%0A%09grammar&In-Reply-To=%3Ca4806f3c42c85847bc9611b74af11e8a%40temporal-wave.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="027558.html">
   <LINK REL="Next"  HREF="027578.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[antlr-interest] Problem with C target output on example C	grammar</H1>
    <B>Jim Idle</B> 
    <A HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20Problem%20with%20C%20target%20output%20on%20example%20C%0A%09grammar&In-Reply-To=%3Ca4806f3c42c85847bc9611b74af11e8a%40temporal-wave.com%3E"
       TITLE="[antlr-interest] Problem with C target output on example C	grammar">jimi at temporal-wave.com
       </A><BR>
    <I>Wed Apr  2 09:41:04 PDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="027558.html">[antlr-interest] Problem with C target output on example C	grammar
</A></li>
        <LI>Next message: <A HREF="027578.html">[antlr-interest] Problem with C target output on example C	grammar
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27572">[ date ]</a>
              <a href="thread.html#27572">[ thread ]</a>
              <a href="subject.html#27572">[ subject ]</a>
              <a href="author.html#27572">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>

&gt;<i> -----Original Message-----
</I>&gt;<i> From: <A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">antlr-interest-bounces at antlr.org</A> [mailto:antlr-interest-
</I>&gt;<i> <A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">bounces at antlr.org</A>] On Behalf Of Kamil Burzynski
</I>&gt;<i> 
</I>&gt;<i> Well, the thing is that it is natural way of doing in C++. In pure C
</I>&gt;<i> returning struct by value is rarely used, I agree. But in C++ (and Java
</I>&gt;<i> in fact), returning objects by value is much more common. Especially in
</I>&gt;<i> my case - when the object was smart pointer itself. These entities are
</I>&gt;<i> *meant* to be passed as value. And since they point to (usually)
</I>&gt;<i> non-trivial class, you cannot reduce them away by returning a bunch of
</I>&gt;<i> struct members at once.
</I>
If they are pointers, then they can be assign NULL so it should not be an issue, but as I said, if you use more than one element then you won't get the issue, so at worst, you could add a dummy int to the returns clause. Can you give me an example, other than struct, which you do not need to return, of something that you cannot because it cannot be assigned to NULL? I think, after a bit of looking, that I can avoid initializing the single return element, but something nags at the back of my mind about this. I would like to have an example of something that cannot be done that a user actually wants to do, so I can see if I can make it work. Thanks.

&gt;<i> Yeah, I am not familiar enough with antlr yet and do not know what tree
</I>&gt;<i> parsing is for, gotta read more about it. Unfortunately I did not found
</I>&gt;<i> any good documentation about it on antlr.org, maybe I was not looking
</I>&gt;<i> carefully enough.
</I>
Best thing is to just buy yourself a copy of the reference book:
<A HREF="http://www.pragprog.com/titles/tpantlr">http://www.pragprog.com/titles/tpantlr</A>

There is a lot of great information in there on how to do all sorts of things.

&gt;<i> &gt; However, the answer to your problem is that the rule already
</I>&gt;<i> &gt; returns a struct if you have more than one return value, so if you
</I>&gt;<i> &gt; have just one element in your struct, then don't use the struct. If
</I>&gt;<i> 
</I>&gt;<i> But if you have object as in Java, you cannot return all its members
</I>&gt;<i> separately, that would make no sense.
</I>
Would you want to return an object by value? Surely it will be by reference? However, as I said, if this really is the case, then add a dummy flag to the return for the moment, while I look in to it.

&gt;<i> &gt; So, I think that we have reduced all your problems to the one
</I>&gt;<i> &gt; grammar error, one user error, one user misunderstanding and zero
</I>&gt;<i> &gt; problems with the C target, so I don't think you need to be concerned
</I>&gt;<i> &gt; about the C runtime :-)
</I>&gt;<i> 
</I>&gt;<i> Not so easy ;) There is one grammar error indeed. I do not know which
</I>&gt;<i> problem you are thinking about my error, 
</I>
The fact that you did not relink your main program with a new .so and therefore got a segmentation violation when trying to run the binary with it. I explained that i n a previous eamil.

&gt;<i> In my other email I also indicated other error which are purely related
</I>&gt;<i> to
</I>&gt;<i> C runtime, I think: when rule uses 2 scopes, first of them is not
</I>&gt;<i> accessible.
</I>
This was just that you did not relink the main executable with your library I believe. If not, then can you provide an example as I did not see anything in the prior emails. It might be there of course, but I didn't see anything else?

Jim



</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="027558.html">[antlr-interest] Problem with C target output on example C	grammar
</A></li>
	<LI>Next message: <A HREF="027578.html">[antlr-interest] Problem with C target output on example C	grammar
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27572">[ date ]</a>
              <a href="thread.html#27572">[ thread ]</a>
              <a href="subject.html#27572">[ subject ]</a>
              <a href="author.html#27572">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.antlr.org/mailman/listinfo/antlr-interest">More information about the antlr-interest
mailing list</a><br>
</body></html>
