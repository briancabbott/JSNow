<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [antlr-interest] Implement a for loop in the tree grammar
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20Implement%20a%20for%20loop%20in%20the%20tree%20grammar&In-Reply-To=%3C000001cc7896%24154913c0%243fdb3b40%24%40ch%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="042697.html">
   <LINK REL="Next"  HREF="042699.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[antlr-interest] Implement a for loop in the tree grammar</H1>
    <B>Marius Meier</B> 
    <A HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20Implement%20a%20for%20loop%20in%20the%20tree%20grammar&In-Reply-To=%3C000001cc7896%24154913c0%243fdb3b40%24%40ch%3E"
       TITLE="[antlr-interest] Implement a for loop in the tree grammar">mariusmeier at hispeed.ch
       </A><BR>
    <I>Wed Sep 21 12:38:45 PDT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="042697.html">[antlr-interest] Parsing CSS accurately and fast
</A></li>
        <LI>Next message: <A HREF="042699.html">[antlr-interest] Unexpected text
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#42698">[ date ]</a>
              <a href="thread.html#42698">[ thread ]</a>
              <a href="subject.html#42698">[ subject ]</a>
              <a href="author.html#42698">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello everybody

 

I am trying to implement a for-loop in my Math parser but it doesn't really
work.

I have some problem with seeking the input to the right destination in the
tree which

was generated by the parser. Following tree grammar describes the for-loop:

 

 

enterForLoop

                @init { int mark = 0; }

                :               ^('for' assignStat c=condExpr incStat[true]
block) {

 
input.Seek($c.start.TokenStartIndex);

                                                object condResult =
condExpr();

                                                

                                                /*ForLoopSymbol symbol = new
ForLoopSymbol(&quot;forLoop&quot;, _CurrentScope);

 
_CurrentScope.DefineSymbol(symbol);

                                                _CurrentScope = symbol;

                                                incStat(true); // Doesn't
work this way

                                                input.Release(mark);*/

                                }

                ;

                                

exitForLoop

                :               /*'for' {

                                                _CurrentScope =
_CurrentScope.EnclosingScope;

                                }*/

                ;

 

                

condExpr returns [bool value]

                :               ^('&lt;' ID INT) { 

                                                Symbol symbol =
globalTable.ResolveSymbol($ID.text);

                                                

                                                if(symbol != null) {

                                                                if(symbol is
VariableSymbol) {

 
if(((VariableSymbol)symbol).SymType.Equals(&quot;int&quot;)) {

 
$value=(int)((VariableSymbol)symbol).Value &lt; int.Parse($INT.text); 

 
} else if(((VariableSymbol)symbol).SymType.Equals(&quot;float&quot;)) {

 
$value=(float)((VariableSymbol)symbol).Value &lt; int.Parse($INT.text); 

 
}

                                                                }

                                                } else {

 
Console.WriteLine(&quot;Undefined variable: &quot; + $ID.text + &quot; (&quot; + $ID.line + &quot;:&quot;
+ $ID.pos + &quot;)&quot;);

                                        } 

                                }

                |              ^('&gt;' ID INT) {

                                                Symbol symbol =
globalTable.ResolveSymbol($ID.text);

                                                

                                                if(symbol != null) {

                                                                if(symbol is
VariableSymbol) {

 
if(((VariableSymbol)symbol).SymType.Equals(&quot;int&quot;)) {

 
$value=(int)((VariableSymbol)symbol).Value &gt; int.Parse($INT.text); 

 
} else if(((VariableSymbol)symbol).SymType.Equals(&quot;float&quot;)) {

 
$value=(float)((VariableSymbol)symbol).Value &gt; int.Parse($INT.text); 

 
} 

                                                                }

                                                } else {

 
Console.WriteLine(&quot;Undefined variable: &quot; + $ID.text + &quot; (&quot; + $ID.line + &quot;:&quot;
+ $ID.pos + &quot;)&quot;);

                                        } 

                                }

                ;

 

I tried to jump to the conditional expression of the for loop. But I don't
get there in

the tree node stream.

Can anybody help me to get it right? I tried a few times with different
options but

I don't get anywhere. I'm just beginning to learn ANTLR.

 

Greetings

</PRE>






<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="042697.html">[antlr-interest] Parsing CSS accurately and fast
</A></li>
	<LI>Next message: <A HREF="042699.html">[antlr-interest] Unexpected text
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#42698">[ date ]</a>
              <a href="thread.html#42698">[ thread ]</a>
              <a href="subject.html#42698">[ subject ]</a>
              <a href="author.html#42698">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.antlr.org/mailman/listinfo/antlr-interest">More information about the antlr-interest
mailing list</a><br>
</body></html>
