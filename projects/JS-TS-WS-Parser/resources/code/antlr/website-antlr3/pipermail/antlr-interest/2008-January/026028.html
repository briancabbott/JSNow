<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [antlr-interest] Code generation weirdness?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20Code%20generation%20weirdness%3F&In-Reply-To=%3Cc8c997f40801291702j71be4a73tdbd6758f0814675e%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="026027.html">
   <LINK REL="Next"  HREF="026045.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[antlr-interest] Code generation weirdness?</H1>
    <B>Darien Hager</B> 
    <A HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20Code%20generation%20weirdness%3F&In-Reply-To=%3Cc8c997f40801291702j71be4a73tdbd6758f0814675e%40mail.gmail.com%3E"
       TITLE="[antlr-interest] Code generation weirdness?">darien.hager at etelos-inc.com
       </A><BR>
    <I>Tue Jan 29 17:02:08 PST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="026027.html">[antlr-interest] Using antlr under C#
</A></li>
        <LI>Next message: <A HREF="026045.html">[antlr-interest] Using antlr under C#
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26028">[ date ]</a>
              <a href="thread.html#26028">[ thread ]</a>
              <a href="subject.html#26028">[ subject ]</a>
              <a href="author.html#26028">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Very much a newbie experimenting here, so apologies for imprecision and
misunderstandings in advance.

I'm using AntlrWorks 1.16, and the generated code for Python breaks
when combined with the JSON grammar on the wiki. Interpreter/Debugger does
fine.

It appears that a python class named &quot;object&quot; is created in jsonParser.py,
matching the grammar's rule of the same name.  (Not the AST tree label,
that's all upper-case)

The problem is that choosing the name &quot;object&quot; is probably a bad idea for
many reasons, and things blow up.
_______
Traceback (most recent call last):
File &quot;jsonParser.py&quot;, line 44, in &lt;module&gt;
class jsonParser(Parser):
File &quot;jsonParser.py&quot;, line 593, in jsonParser
class array_return(object):
TypeError: Error when calling the metaclass bases
function() argument 1 must be code, not str
_______

Changing the grammar's AST tree label to &quot;j_object&quot; fixes the problems.

Is there a reason that these generated classnames don't have some sort of
default prefix for language safety? Could such a thing be reasonably
implemented? It seems like a big pitfall that grammar rule names can
collide with target language keywords.
It's possible that there was some warning about this kind of bug and I
missed it...


-- 
Darien Hager
Developer
Etelos, Inc.
<A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">darien at etelos.com</A>

<A HREF="http://www.etelos.com">http://www.etelos.com</A>
&quot;Revolutionizing the way applications are developed, distributed and
consumed.&quot;

This e-mail message, including attachments, may contain confidential
information for the sole use of the intended recipient(s). If you are not
the intended recipient, then this is notice that any use, disclosure,
dissemination, distribution or copying is strictly prohibited. If you have
received this message in error please contact the sender by reply mail and
destroy all copies of the original message.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://www.antlr.org/pipermail/antlr-interest/attachments/20080129/0745b495/attachment.html">http://www.antlr.org/pipermail/antlr-interest/attachments/20080129/0745b495/attachment.html</A> 
</PRE>










<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="026027.html">[antlr-interest] Using antlr under C#
</A></li>
	<LI>Next message: <A HREF="026045.html">[antlr-interest] Using antlr under C#
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26028">[ date ]</a>
              <a href="thread.html#26028">[ thread ]</a>
              <a href="subject.html#26028">[ subject ]</a>
              <a href="author.html#26028">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.antlr.org/mailman/listinfo/antlr-interest">More information about the antlr-interest
mailing list</a><br>
</body></html>
