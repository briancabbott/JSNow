<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [antlr-interest] Common token vocabulary
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20Common%20token%20vocabulary&In-Reply-To=%3CCC5AA2BB.1EF4C%25rich%40dreambox.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="045113.html">
   <LINK REL="Next"  HREF="045109.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[antlr-interest] Common token vocabulary</H1>
    <B>Richard Knox</B> 
    <A HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20Common%20token%20vocabulary&In-Reply-To=%3CCC5AA2BB.1EF4C%25rich%40dreambox.com%3E"
       TITLE="[antlr-interest] Common token vocabulary">rich at dreambox.com
       </A><BR>
    <I>Wed Aug 22 14:53:04 PDT 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="045113.html">[antlr-interest] Performance problem with $text in ANTLR 3.1
</A></li>
        <LI>Next message: <A HREF="045109.html">[antlr-interest] Common token vocabulary
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#45108">[ date ]</a>
              <a href="thread.html#45108">[ thread ]</a>
              <a href="subject.html#45108">[ subject ]</a>
              <a href="author.html#45108">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I have an ANTLR based application that parses either of two variations of a target language. The two variations have a mostly common vocabulary. There are around 200 tokens in common and less than 10 specific to one variations or the other. I want to token types for the common vocabulary tokens to be the same for both language variations so that I can reference token types in custom Java code that is used by both variations.

I had a solution working with ANTLR 3.1 that put the common tokens in a base vocabulary lexer grammar. The base vocabulary grammar was imported into combined lexer/parse grammars, one for each language variation. ANTLR 3.1 generated token types in the order the token appeared, so the common vocabulary tokens had the same types in both language variations. The variation specific tokens were then assigned larger numbers.

I'm currently attempting to upgrade this to ANTLR 3.4, and have run into a problem. ANTLR 3.4 seems to alpha sort the tokens by name before assigning token types. This mixes variation specific tokens with common vocabulary tokens, and the type numbers no longer match for the common tokens.

Is there a better way to accomplish this in ANTLR 3.4? Thanks.

-rich
</PRE>





<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="045113.html">[antlr-interest] Performance problem with $text in ANTLR 3.1
</A></li>
	<LI>Next message: <A HREF="045109.html">[antlr-interest] Common token vocabulary
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#45108">[ date ]</a>
              <a href="thread.html#45108">[ thread ]</a>
              <a href="subject.html#45108">[ subject ]</a>
              <a href="author.html#45108">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.antlr.org/mailman/listinfo/antlr-interest">More information about the antlr-interest
mailing list</a><br>
</body></html>
