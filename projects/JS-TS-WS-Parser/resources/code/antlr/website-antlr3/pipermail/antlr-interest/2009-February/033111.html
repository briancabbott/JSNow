<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [antlr-interest] antlr-interest Digest, Vol 51, Issue 26
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20antlr-interest%20Digest%2C%20Vol%2051%2C%20Issue%2026&In-Reply-To=%3Cf7372f920902261520y75645502t11eece654386646c%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="033134.html">
   <LINK REL="Next"  HREF="033113.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[antlr-interest] antlr-interest Digest, Vol 51, Issue 26</H1>
    <B>Bill Cox</B> 
    <A HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20antlr-interest%20Digest%2C%20Vol%2051%2C%20Issue%2026&In-Reply-To=%3Cf7372f920902261520y75645502t11eece654386646c%40mail.gmail.com%3E"
       TITLE="[antlr-interest] antlr-interest Digest, Vol 51, Issue 26">bill at qswtools.com
       </A><BR>
    <I>Thu Feb 26 15:20:12 PST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="033134.html">[antlr-interest] Rewriting in non tree grammar
</A></li>
        <LI>Next message: <A HREF="033113.html">[antlr-interest] Java Parser to analyze C++ language syntax
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#33111">[ date ]</a>
              <a href="thread.html#33111">[ thread ]</a>
              <a href="subject.html#33111">[ subject ]</a>
              <a href="author.html#33111">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Re: [antlr-interest] request for comments on language
On Thu, Feb 26, 2009 at 12:00 PM,  &lt;<A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">antlr-interest-request at antlr.org</A>&gt; wrote:
&gt;<i> Send antlr-interest mailing list submissions to
</I>&gt;<i>        <A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">antlr-interest at antlr.org</A>
</I>&gt;<i>
</I>&gt;<i> To subscribe or unsubscribe via the World Wide Web, visit
</I>&gt;<i>        <A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">http://www.antlr.org/mailman/listinfo/antlr-interest</A>
</I>&gt;<i> or, via email, send a message with subject or body 'help' to
</I>&gt;<i>        <A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">antlr-interest-request at antlr.org</A>
</I>&gt;<i>
</I>&gt;<i> You can reach the person managing the list at
</I>&gt;<i>        <A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">antlr-interest-owner at antlr.org</A>
</I>&gt;<i>
</I>&gt;<i> When replying, please edit your Subject line so it is more specific
</I>&gt;<i> than &quot;Re: Contents of antlr-interest digest...&quot;
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Today's Topics:
</I>&gt;<i>
</I>&gt;<i>   1. Re: if..else in StringTemplate (Terence Parr)
</I>&gt;<i>   2. Re: request for comments on language implementation (Andy Tripp)
</I>&gt;<i>   3. Re: request for comments on language implementation (Terence Parr)
</I>&gt;<i>   4. Re: request for comments on language implementation
</I>&gt;<i>      (Michael Bedward)
</I>&gt;<i>   5. Changed output path in ANTLRWorks: Cannot find    tokens file
</I>&gt;<i>      &lt;unset-dir&gt; / X.tokens (Joern Gebhardt)
</I>&gt;<i>   6. Re: request for comments on language implementation
</I>&gt;<i>      (Andreas Meyer)
</I>&gt;<i>   7. Re: request for comments on language implementation (Andy Tripp)
</I>&gt;<i>   8. Manipulating text in the lexer (Sam Barnett-Cormack)
</I>&gt;<i>   9. Re: request for comments on language implementation
</I>&gt;<i>      (Andreas Meyer)
</I>&gt;<i>  10. Error reporting with DebugListener attached (Indhu Bharathi)
</I>&gt;<i>  11. Re: Changed output path in ANTLRWorks: Cannot find        tokens
</I>&gt;<i>      file &lt;unset-dir&gt; / X.tokens (Joern Gebhardt)
</I>&gt;<i>  12. Manipulating text in the lexer (Sam Barnett-Cormack)
</I>&gt;<i>  13. common tokens (Robert Soule)
</I>&gt;<i>  14. Backtracking vs Lookahead (Andreas Meyer)
</I>&gt;<i>  15. Re: Manipulating text in the lexer (Indhu Bharathi)
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> ----------------------------------------------------------------------
</I>&gt;<i>
</I>&gt;<i> Message: 1
</I>&gt;<i> Date: Wed, 25 Feb 2009 13:29:23 -0800
</I>&gt;<i> From: Terence Parr &lt;<A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">parrt at cs.usfca.edu</A>&gt;
</I>&gt;<i> Subject: Re: [antlr-interest] if..else in StringTemplate
</I>&gt;<i> To: YingAnnie &lt;<A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">yimm8369 at hotmail.com</A>&gt;
</I>&gt;<i> Cc: <A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">antlr-interest at antlr.org</A>
</I>&gt;<i> Message-ID: &lt;<A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">956F67BC-F769-48A7-B8C5-8B49D8E545EC at cs.usfca.edu</A>&gt;
</I>&gt;<i> Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> On Feb 24, 2009, at 6:48 PM, YingAnnie wrote:
</I>&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Hi everyone,
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I want to use if else in the StringTemplateGroup,if (x =&quot;org&quot;) print
</I>&gt;&gt;<i> 1234 else print 5678, but &lt;if(x==&quot;org&quot;)&gt; doesnot work.
</I>&gt;<i>
</I>&gt;<i> Correct. ST does not allow you to do any logic computations in the
</I>&gt;<i> view. You must do the computation in the model and pass the result to
</I>&gt;<i> the template.
</I>&gt;<i>
</I>&gt;<i>  this philosophy is explained in a number of places on the website
</I>&gt;<i> and the wiki.
</I>&gt;<i>
</I>&gt;<i> Ter
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> ------------------------------
</I>&gt;<i>
</I>&gt;<i> Message: 2
</I>&gt;<i> Date: Wed, 25 Feb 2009 17:02:52 -0500
</I>&gt;<i> From: Andy Tripp &lt;<A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">antlr at jazillian.com</A>&gt;
</I>&gt;<i> Subject: Re: [antlr-interest] request for comments on language
</I>&gt;<i>        implementation
</I>&gt;<i> To: Andreas Meyer &lt;<A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">andreas.meyer at smartshift.de</A>&gt;
</I>&gt;<i> Cc: <A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">antlr-interest at antlr.org</A>
</I>&gt;<i> Message-ID: &lt;<A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">49A5C00C.1000704 at jazillian.com</A>&gt;
</I>&gt;<i> Content-Type: text/plain; charset=ISO-8859-1; format=flowed
</I>&gt;<i>
</I>&gt;<i> Hi Andreas,
</I>&gt;<i>
</I>&gt;<i> Andreas Meyer wrote:
</I>&gt;&gt;<i> Hi!
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Your mail was addressed to Michael, but I hope it's ok to answer
</I>&gt;&gt;<i> nonetheless:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I would consider hand-written code to walk an AST harmful. Maybe there
</I>&gt;&gt;<i> are cases where it is useful, but walking a dynamically typed tree like
</I>&gt;&gt;<i> this looks like a maintenance nightmare to me.
</I>&gt;<i>
</I>&gt;<i> I've found it much easier to do &quot;hand-written&quot; AST transformations.
</I>&gt;<i> For example, to find cases like &quot;x+0&quot; and replace with just &quot;x&quot;, you'd
</I>&gt;<i> have something like:
</I>&gt;<i>
</I>&gt;<i> List&lt;AST&gt; pluses = root.findAncestorsOfType(MyTokenTypes.PLUS);
</I>&gt;<i> for (AST ast: plusses) {
</I>&gt;<i>        if (ast.getChildCount() == 2
</I>&gt;<i>            &amp;&amp; ast.getSecondChild().getType() == MyTokenTypes.INTEGER
</I>&gt;<i>            &amp;&amp; ast.getSecondChild().getText().equals(&quot;0&quot;)) {
</I>&gt;<i>                ast.replaceMyself(ast.getFirstChild());  // replace &quot;x+0&quot; with just &quot;x&quot;
</I>&gt;<i>        }
</I>&gt;<i> }
</I>&gt;<i>
</I>&gt;<i> Isn't this simpler than the ANTLR treewalker equivalent?
</I>&gt;<i> Especially since whoever takes over this code when you leave will likely
</I>&gt;<i> already know Java but not know ANTLR?
</I>&gt;<i>
</I>&gt;<i> It's maintainable because later, when you want to also replace &quot;x*1&quot; with just &quot;x&quot;, and a few
</I>&gt;<i> other similar patterns, you can make this into a generic function:
</I>&gt;<i>
</I>&gt;<i> void replaceIdentity(MyTokenType type, String value, AST root) {
</I>&gt;<i>        List&lt;AST&gt; asts = root.findAncestorsOfType(type);
</I>&gt;<i>        for (AST ast: plusses) {
</I>&gt;<i>                if (ast.getChildCount() == 2
</I>&gt;<i>                    &amp;&amp; ast.getSecondChild().getType() == MyTokenTypes.INTEGER
</I>&gt;<i>                    &amp;&amp; ast.getSecondChild().getText().equals(&quot;0&quot;)) {
</I>&gt;<i>                        ast.replaceMyself(ast.getFirstChild());  // replace &quot;x OP VALUE&quot; with just &quot;x&quot;
</I>&gt;<i>                }
</I>&gt;<i>        }
</I>&gt;<i> }
</I>
I also like this style (in the generic form) very much.  I find it
very readable/
maintainable.  Is there anything in your tree building process that guarantees
that the literal zero is the second child?  It seems to me that for
full generality
you would also need to check the first child for zero.

Also, is the AST guaranteed to be a binary tree?  In one code generator that I
built, the arguments to an 'add' operator node were strung in a list,
from widest to narrowest.  Similarly for the multiply node.
</PRE>











<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="033134.html">[antlr-interest] Rewriting in non tree grammar
</A></li>
	<LI>Next message: <A HREF="033113.html">[antlr-interest] Java Parser to analyze C++ language syntax
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#33111">[ date ]</a>
              <a href="thread.html#33111">[ thread ]</a>
              <a href="subject.html#33111">[ subject ]</a>
              <a href="author.html#33111">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.antlr.org/mailman/listinfo/antlr-interest">More information about the antlr-interest
mailing list</a><br>
</body></html>
