<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [antlr-interest] BUG: Constant (literal) token is	incorrectly	assumed to be present in AST rewrite
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20BUG%3A%20Constant%20%28literal%29%20token%20is%0A%09incorrectly%09assumed%20to%20be%20present%20in%20AST%20rewrite&In-Reply-To=%3C20080814125825.120396wwaxg2yxg0%40horde.verrech.net%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="029946.html">
   <LINK REL="Next"  HREF="029947.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[antlr-interest] BUG: Constant (literal) token is	incorrectly	assumed to be present in AST rewrite</H1>
    <B>Raphael Reitzig</B> 
    <A HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20BUG%3A%20Constant%20%28literal%29%20token%20is%0A%09incorrectly%09assumed%20to%20be%20present%20in%20AST%20rewrite&In-Reply-To=%3C20080814125825.120396wwaxg2yxg0%40horde.verrech.net%3E"
       TITLE="[antlr-interest] BUG: Constant (literal) token is	incorrectly	assumed to be present in AST rewrite">r_reitzi at cs.uni-kl.de
       </A><BR>
    <I>Thu Aug 14 03:58:25 PDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="029946.html">[antlr-interest] BUG: Constant (literal) token is incorrectly	assumed to be present in AST rewrite
</A></li>
        <LI>Next message: <A HREF="029947.html">[antlr-interest] Unnecessary Mac meta-files in 3.1 distribution
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#29955">[ date ]</a>
              <a href="thread.html#29955">[ thread ]</a>
              <a href="subject.html#29955">[ subject ]</a>
              <a href="author.html#29955">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Austin!

Thou shalt not use string literals in parser rules! 't'll lead thee to  
chaos and madness!

Introduce Tokens for that. The other guys told you how (lexer token  
for the rule '?', imaginary token for the tree one)

Reagards

Raphael

&quot;Austin Hastings&quot; &lt;<A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">Austin_Hastings at Yahoo.com</A>&gt; wrote (Thu Aug 14  
03:06:49 2008):

&gt;<i> Howdy,
</I>&gt;<i>
</I>&gt;<i> I have a C-like grammar with this entry:
</I>&gt;<i>
</I>&gt;<i> conditional_expr
</I>&gt;<i>    : logical_or ( '?' expression ':' conditional_expr )?
</I>&gt;<i>       -&gt; ^( '?' logical_or expression? conditional_expr?)
</I>&gt;<i>    ;
</I>&gt;<i>
</I>&gt;<i> I am using antlr v3.1. In this case, the generated code assumes that  
</I>&gt;<i> the rewrite-rule's '?' token is the same as the possibly-nonexistent  
</I>&gt;<i> '?' in the matching rule, and tries to dereference the &quot;stream&quot; that  
</I>&gt;<i> would contain that token, if it were present.
</I>&gt;<i>
</I>&gt;<i> In the case where no conditional expression is present, the rewrite  
</I>&gt;<i> should collapse into ^( '?' logical_or )
</I>&gt;<i>
</I>&gt;<i> I suspect that there's a better way to handle this particular  
</I>&gt;<i> rewrite scenario. I'd like to hear it.
</I>&gt;<i>
</I>&gt;<i> At the same time, this is pretty clearly a bug: antlr is confusing  
</I>&gt;<i> two tokens that look the same, but one of which doesn't exist.
</I>&gt;<i>
</I>&gt;<i> =Austin
</I>&gt;<i>
</I>&gt;<i>
</I>


----------------------------------------------------------------
This message was sent using IMP, the Internet Messaging Program.
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 191 bytes
Desc: PGP Digital Signature
Url : <A HREF="http://www.antlr.org/pipermail/antlr-interest/attachments/20080814/7acfffbb/attachment.bin">http://www.antlr.org/pipermail/antlr-interest/attachments/20080814/7acfffbb/attachment.bin</A> 
</PRE>










































































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="029946.html">[antlr-interest] BUG: Constant (literal) token is incorrectly	assumed to be present in AST rewrite
</A></li>
	<LI>Next message: <A HREF="029947.html">[antlr-interest] Unnecessary Mac meta-files in 3.1 distribution
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#29955">[ date ]</a>
              <a href="thread.html#29955">[ thread ]</a>
              <a href="subject.html#29955">[ subject ]</a>
              <a href="author.html#29955">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.antlr.org/mailman/listinfo/antlr-interest">More information about the antlr-interest
mailing list</a><br>
</body></html>
