<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [antlr-interest] Type discovery for operator overloading?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20Type%20discovery%20for%20operator%20overloading%3F&In-Reply-To=%3Ce794390806131940v5985104el8a1bb445cfd2976c%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="028677.html">
   <LINK REL="Next"  HREF="028673.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[antlr-interest] Type discovery for operator overloading?</H1>
    <B>C. Mundi</B> 
    <A HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20Type%20discovery%20for%20operator%20overloading%3F&In-Reply-To=%3Ce794390806131940v5985104el8a1bb445cfd2976c%40mail.gmail.com%3E"
       TITLE="[antlr-interest] Type discovery for operator overloading?">cmundi at gmail.com
       </A><BR>
    <I>Fri Jun 13 19:40:36 PDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="028677.html">[antlr-interest] automated completion - choosing matching	productions and the next token
</A></li>
        <LI>Next message: <A HREF="028673.html">[antlr-interest] Type discovery for operator overloading?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#28672">[ date ]</a>
              <a href="thread.html#28672">[ thread ]</a>
              <a href="subject.html#28672">[ subject ]</a>
              <a href="author.html#28672">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi.  Thanks again to tparr and all the great people who make antlr fun =and=
useful!

I'm getting a bit -- ok, a lot -- out of my depth here.  Literature
citations and examples are equally welcome.

I would like to create a DSL with a funny idea of 'multiplication' and the
field(s) on which it operates.

p = 3             // an &quot;integer&quot; assignment in my language
y = 'yeah! '   // a &quot;string&quot; assignment

q = 2 * p
print q          // gives 6

r = p * y
print &quot;She loves me -- &quot; + r   // gives &quot;She loves me -- yeah! yeah! yeah!&quot;

s = y * p
print s       // gives &quot;yeah! yeah! yeah!&quot;

There are two ideas in play here.  First, the multiplication operator has
been overloaded in my &quot;string&quot; class to understand

     ^( MULTIPLY INTEGER STRING )

as well as the familiar

     ^( MULTIPLY  INTEGER  INTEGER )

That does not seem too mysterious to me.

Now in my calculus, multiplication over pairs of one integer and one string
is commutative.  So my tree-walker has to recognize the equivalence of

     ^( MULTIPLY STRING INTEGER )

and

     ^( MULTIPLY INTEGER STRING )

But it seems to me that simply overloading the &quot;left-multiply&quot; method for
both strings and integers is wholly inadequate, because the multiplication
must take into account not only the type of the left-argument, but also the
type of the right-argument, to determine what to do and what type to
return.  This is evident from the fact that 2*3 and 2*'foo' return entirely
different types, but 2*'foo' and 'foo'*2 return the same type (and value in
this case).

How does one approach this?  It seems to me that the answer lies in the
translation output, not in ANTLR itself.  Nonetheless, I am hoping that
perhaps ANTLR provides some tools to support such situations.  I was
thinking LL(2) with a semantic predicate peeking ahead to determine the type
of the second operand.  Am I on the right track here?  Or should I go back
to monkey finishing school?

Three possibilities, none excluding another, occur to me:

1. There is an obvious way to do this, if only I had taken the right classes
at university.
2. There is a non-obvious way to factor this &quot;dynamically typed&quot; grammar
into simpler concepts, which has eluded me.
3. I'm going to groan when someone points out the answer in a FAQ or the
ANTLR book.

Thanks,
c. mundi
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://www.antlr.org/pipermail/antlr-interest/attachments/20080613/e56c4b7c/attachment.html">http://www.antlr.org/pipermail/antlr-interest/attachments/20080613/e56c4b7c/attachment.html</A> 
</PRE>















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="028677.html">[antlr-interest] automated completion - choosing matching	productions and the next token
</A></li>
	<LI>Next message: <A HREF="028673.html">[antlr-interest] Type discovery for operator overloading?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#28672">[ date ]</a>
              <a href="thread.html#28672">[ thread ]</a>
              <a href="subject.html#28672">[ subject ]</a>
              <a href="author.html#28672">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.antlr.org/mailman/listinfo/antlr-interest">More information about the antlr-interest
mailing list</a><br>
</body></html>
