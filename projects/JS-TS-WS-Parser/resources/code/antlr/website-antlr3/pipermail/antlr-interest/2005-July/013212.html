<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [antlr-interest] Re: Custom error recovery
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:antlr-interest%40antlr.org?Subject=%5Bantlr-interest%5D%20Re%3A%20Custom%20error%20recovery&In-Reply-To=dd3a065f05072703457454265f%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="013201.html">
   <LINK REL="Next"  HREF="013218.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[antlr-interest] Re: Custom error recovery</H1>
    <B>Martin Olsson</B> 
    <A HREF="mailto:antlr-interest%40antlr.org?Subject=%5Bantlr-interest%5D%20Re%3A%20Custom%20error%20recovery&In-Reply-To=dd3a065f05072703457454265f%40mail.gmail.com"
       TITLE="[antlr-interest] Re: Custom error recovery">mnemo at minimum.se
       </A><BR>
    <I>Wed Jul 27 18:14:42 PDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="013201.html">[antlr-interest] Cust error recovery
</A></li>
        <LI>Next message: <A HREF="013218.html">[antlr-interest] Re: Custom error recovery
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13212">[ date ]</a>
              <a href="thread.html#13212">[ thread ]</a>
              <a href="subject.html#13212">[ subject ]</a>
              <a href="author.html#13212">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>First off, thank you Bryan and Alexey for your replies -- I'm slowing
working this stuff out now.

 &gt; Do you really want to do this, or do you want to have only certain
 &gt; productions be the &quot;stopping point&quot; for error recovery?
 &gt;
 &gt; For example, do you want to &quot;skip to semicolon&quot;, or &quot;recover at
 &gt; &lt;statement&gt;&quot;?  The first is somewhat complex in ANTLR, the second is
 &gt; very straightforward using options in the parser section to disable
 &gt; default error recovery, and in particular rules to enable default
 &gt; error recovery.

I'm not sure I understand the difference between the two alternatives
above. What I would like it to do is something like the following..
Suppose my source contains this:

int a;
print &quot;hello&quot;;
int var1, var2, var3;
int x = 1+1;
nondatatype whatever not valid tokens;
int c;
int more, vars;

So when the parser runs into line 4 in the source snippet it will 
generate some sort of syntax error and I would like it to &quot;just ignore 
the rest of the line, ie skip until it finds the SEMICOLON token/char&quot;. 
Of course, this is only within functions but the language I parse doesnt 
have anything but include directives outside of functions so this is a 
very small problem.

Earlier this morning I looked at the parser source generated by ANTLR 
but to be honest, I don't really understand that much of it. I 
understand all the small parts, but I have difficulties understanding 
the wider perspective -- how all the pieces work together etc.

In particular I'm not really sure I understand the default syntax error
recovery strategy used by ANTLR. Maybe someone could explain it in plain
english, that would be great.

---

Also, while thinking about this recovery stuff I came up with another
fancy feature that I would like to implement if possible. I'm building 
an Eclipse plugin and in Eclipse syntax errors are typically underlined 
by a red squiggly line. For instance if I type this in Java:

int var blah;

Then Eclipse would recognize that &quot;blah&quot; isn't really expected, and it
would underline the &quot;blah&quot; part with an error saying something like 
&quot;this was an unexpected token&quot;.

So, is it possible to have ANTLR provide the information required to
implement this? I tried earlier today to do this (this was a little bit 
of a longshot I guess):

public void reportError(RecognitionException e) {
   try {
     Token errorToken = LT(0);
   } catch (TokenStreamException e) { /* ignored for now */ }
   editor.displayError(e.getMessage(), e.getLine(),
                       e.getColumn(), errorToken.getLength());
}

The problem with this approach was that the Token class apparently does
not have a getLength() method -- thus I didn't get this experiment very
far.

I'm not really sure what token LT(0) returns so I don't know if it even
could have worked had there been a getLength() method. The idea was of
course to have Eclipse place its red underlining starting at the column
(on the specified line) and extending for length-chars ahead.

Have anyone else does something like this before? i.e. investigating the
length of the token or word of whatever that appeared instead of the
expected token?



Regards,
martin
</PRE>






<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="013201.html">[antlr-interest] Cust error recovery
</A></li>
	<LI>Next message: <A HREF="013218.html">[antlr-interest] Re: Custom error recovery
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13212">[ date ]</a>
              <a href="thread.html#13212">[ thread ]</a>
              <a href="subject.html#13212">[ subject ]</a>
              <a href="author.html#13212">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.antlr.org/mailman/listinfo/antlr-interest">More information about the antlr-interest
mailing list</a><br>
</body></html>
