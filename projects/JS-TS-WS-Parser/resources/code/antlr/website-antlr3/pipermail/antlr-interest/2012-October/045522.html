<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [antlr-interest] Preserve source code comments
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20Preserve%20source%20code%20comments&In-Reply-To=%3C1350642971.37773.YahooMailNeo%40web171204.mail.ir2.yahoo.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="045521.html">
   <LINK REL="Next"  HREF="045524.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[antlr-interest] Preserve source code comments</H1>
    <B>Stanislas Rusinsky</B> 
    <A HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20Preserve%20source%20code%20comments&In-Reply-To=%3C1350642971.37773.YahooMailNeo%40web171204.mail.ir2.yahoo.com%3E"
       TITLE="[antlr-interest] Preserve source code comments">rusinskystanislas at yahoo.fr
       </A><BR>
    <I>Fri Oct 19 03:36:11 PDT 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="045521.html">[antlr-interest] Preserve source code comments
</A></li>
        <LI>Next message: <A HREF="045524.html">[antlr-interest] Preserve source code comments
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#45522">[ date ]</a>
              <a href="thread.html#45522">[ thread ]</a>
              <a href="subject.html#45522">[ subject ]</a>
              <a href="author.html#45522">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>A twisted issue indeed, one I also faced, as the comment handling had to be added after the fact.

We translate 2 million LoC, and the result has to have comment quite near the original position in the translated version.

We developed something in-house that looks backwards and forwards on key nodes, checks nearby comments with precedence rules (checking for newlines, commas, ...) attaches them to the most relevant node and marks comments as processed.

I recommend you to read this blogpost on an implementation:&#160;<A HREF="http://meri-stuff.blogspot.be/2012/09/tackling-comments-in-antlr-compiler.html">http://meri-stuff.blogspot.be/2012/09/tackling-comments-in-antlr-compiler.html</A>



________________________________
 De&#160;: Jim Idle &lt;<A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">jimi at temporal-wave.com</A>&gt;
&#192;&#160;: 
Cc&#160;: <A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">antlr-interest at antlr.org</A> 
Envoy&#233; le : Vendredi 19 octobre 2012 6h08
Objet&#160;: Re: [antlr-interest] Preserve source code comments
 
It's a thorny problem. Your assumptions (and you have to make some) about
which comment belongs to which piece of code will always get you in to
trouble in the end.

But, as most programmers don&#8217;t use comments, perhaps you can ignore the
issue ;)

Jim

-----Original Message-----
From: <A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">antlr-interest-bounces at antlr.org</A>
[mailto:<A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">antlr-interest-bounces at antlr.org</A>] On Behalf Of Juancarlo A&#241;ez
Sent: Friday, October 19, 2012 10:53 AM
To: Terence Parr
Cc: <A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">antlr-interest at antlr.org</A>
Subject: Re: [antlr-interest] Preserve source code comments

Terrence,

This is what hidden channels are for :)
&gt;<i>
</I>&gt;<i> <A HREF="http://www.antlr.org/wiki/pages/viewpage.action?pageId=557063">http://www.antlr.org/wiki/pages/viewpage.action?pageId=557063</A>
</I>&gt;<i>
</I>
That would work.

How do I recover the current token index? Mmm. this.input.index() ?

-- 
Juancarlo *A&#241;ez*

List: <A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">http://www.antlr.org/mailman/listinfo/antlr-interest</A>
Unsubscribe:
<A HREF="http://www.antlr.org/mailman/options/antlr-interest/your-email-address">http://www.antlr.org/mailman/options/antlr-interest/your-email-address</A>

List: <A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">http://www.antlr.org/mailman/listinfo/antlr-interest</A>
Unsubscribe: <A HREF="http://www.antlr.org/mailman/options/antlr-interest/your-email-address">http://www.antlr.org/mailman/options/antlr-interest/your-email-address</A>
</PRE>





<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="045521.html">[antlr-interest] Preserve source code comments
</A></li>
	<LI>Next message: <A HREF="045524.html">[antlr-interest] Preserve source code comments
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#45522">[ date ]</a>
              <a href="thread.html#45522">[ thread ]</a>
              <a href="subject.html#45522">[ subject ]</a>
              <a href="author.html#45522">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.antlr.org/mailman/listinfo/antlr-interest">More information about the antlr-interest
mailing list</a><br>
</body></html>
