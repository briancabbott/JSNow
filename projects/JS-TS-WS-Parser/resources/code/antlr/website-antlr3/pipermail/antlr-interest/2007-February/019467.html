<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [antlr-interest] adding content at end of	rulewithTokenRewriteStream
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20adding%20content%20at%20end%20of%0A%09rulewithTokenRewriteStream&In-Reply-To=%3C20070223172751.GA4350%40badgers-in-foil.co.uk%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="019464.html">
   <LINK REL="Next"  HREF="019468.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[antlr-interest] adding content at end of	rulewithTokenRewriteStream</H1>
    <B>David Holroyd</B> 
    <A HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20adding%20content%20at%20end%20of%0A%09rulewithTokenRewriteStream&In-Reply-To=%3C20070223172751.GA4350%40badgers-in-foil.co.uk%3E"
       TITLE="[antlr-interest] adding content at end of	rulewithTokenRewriteStream">dave at badgers-in-foil.co.uk
       </A><BR>
    <I>Fri Feb 23 09:27:51 PST 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="019464.html">[antlr-interest] adding content at end of	rulewithTokenRewriteStream
</A></li>
        <LI>Next message: <A HREF="019468.html">[antlr-interest] adding content at end	ofrulewithTokenRewriteStream
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19467">[ date ]</a>
              <a href="thread.html#19467">[ thread ]</a>
              <a href="subject.html#19467">[ subject ]</a>
              <a href="author.html#19467">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Fri, Feb 23, 2007 at 05:22:41PM +0100, Jean Marc Vanel wrote:
&gt;<i> ....
</I>&gt;<i> &gt; &gt; name_or_pointer
</I>&gt;<i> &gt; &gt; @init {
</I>&gt;<i> &gt; &gt;     tokens = (TokenRewriteStream)input;
</I>&gt;<i> &gt; &gt; }
</I>&gt;<i> &gt; &gt;     	:	NAME (star='*')?
</I>&gt;<i> &gt; &gt; 		{ tokens.insertAfter( star.stop, &quot; == after '*' ===&quot; );
</I>&gt;<i> }
</I>&gt;<i> &gt; &gt; 	;
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; Maybe put the action inside the (...)? so that it only executes if
</I>&gt;<i> &gt; there is a star present?
</I>&gt;<i> 
</I>&gt;<i> [Jean-Marc Vanel] Sure that would prevent the NullPointerException.
</I>&gt;<i> 
</I>&gt;<i> But my goal here is to add something after the end of the rule
</I>&gt;<i> &quot;name_or_pointer&quot;, independently of the presence or absence of '*' .
</I>
Oops, sorry.  So how about this, in the rule that uses name_or_pointer:

  np=name_or_pointer { tokens.insertAfter($np.tree.stop, ...); }

i.e. if there's some chance that bits of syntax will be missing, hoist
the insertion code up high enough in the grammar that there's guaranteed
to be some subtree with real tokens present to work on.

?

ta,
dave

-- 
<A HREF="http://david.holroyd.me.uk/">http://david.holroyd.me.uk/</A>
</PRE>










<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="019464.html">[antlr-interest] adding content at end of	rulewithTokenRewriteStream
</A></li>
	<LI>Next message: <A HREF="019468.html">[antlr-interest] adding content at end	ofrulewithTokenRewriteStream
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19467">[ date ]</a>
              <a href="thread.html#19467">[ thread ]</a>
              <a href="subject.html#19467">[ subject ]</a>
              <a href="author.html#19467">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.antlr.org/mailman/listinfo/antlr-interest">More information about the antlr-interest
mailing list</a><br>
</body></html>
