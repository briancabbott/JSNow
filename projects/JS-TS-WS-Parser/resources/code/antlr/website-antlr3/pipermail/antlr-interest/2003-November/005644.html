<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [antlr-interest] antlr 3 unicode support
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:antlr-interest%40antlr.org?Subject=%5Bantlr-interest%5D%20antlr%203%20unicode%20support&In-Reply-To=20031122155656.A20601%40cs.utwente.nl">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="005635.html">
   <LINK REL="Next"  HREF="005623.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[antlr-interest] antlr 3 unicode support</H1>
    <B>Pete Forman</B> 
    <A HREF="mailto:antlr-interest%40antlr.org?Subject=%5Bantlr-interest%5D%20antlr%203%20unicode%20support&In-Reply-To=20031122155656.A20601%40cs.utwente.nl"
       TITLE="[antlr-interest] antlr 3 unicode support">pete.forman at westerngeco.com
       </A><BR>
    <I>Mon Nov 24 03:20:54 PST 2003</I>
    <P><UL>
        <LI>Previous message: <A HREF="005635.html">[antlr-interest] antlr 3 unicode support
</A></li>
        <LI>Next message: <A HREF="005623.html">[antlr-interest] #( root children ) syntax change proposal?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5644">[ date ]</a>
              <a href="thread.html#5644">[ thread ]</a>
              <a href="subject.html#5644">[ subject ]</a>
              <a href="author.html#5644">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>At 2003-11-22 15:56 +0100, Ric Klaren wrote:
&gt;<i>Hi,
</I>&gt;<i>
</I>&gt;<i>On Fri, Nov 21, 2003 at 01:06:14AM -0500, Tom Moog wrote:
</I>&gt;<i> &gt; Just to remind you java guys thinking about lexing unicode:
</I>&gt;<i> &gt; unicode doesn't stop at 2**16.  It extends up to 0x10ffff if you
</I>&gt;<i> &gt; want to include music symbols, Babylonian, math style letters,
</I>&gt;<i> &gt; and so on.  For java xml parsers this means using the low order
</I>&gt;<i> &gt; ten bits from two adjacent 16 bit words (surrogate pairs) to
</I>&gt;<i> &gt; reach things above 2**16.
</I>&gt;<i>
</I>&gt;<i>Hmmm this would mean that we would have to deal with unicode decoding
</I>&gt;<i>ourselves in the lexer? And use 32 bit values for the tokens/strings.
</I>&gt;<i>
</I>&gt;<i>So far for C++ I was only looking at making the backend wchar/wstring
</I>&gt;<i>aware, although extending up from there would not be hard with
</I>&gt;<i>templates.
</I>
In Java you still need to handle Unicode yourself.  JDK 1.4 is aligned
with Unicode 3.0 which was the last 16 bit (BMP only) version.  You
can get some extra mileage by treating the chars as UTF-16.  That
works if you skip over decoding surrogates and assume that they are
paired correctly.  A bit more effort is needed to discriminate
syntactically within plane 1+.

In C++ wchar_t/wstring may be 8, 16 or 32 bits depending on the
implementation.  To guarantee the width you'd need to roll your own
basic_string&lt;int32_t&gt; or use a library like ICU.  ICU4C has similar
constraints to Java: UnicodeStrings have two elements for each code
point outside plane 0.  It is up to the programmer to maintain
correctness of UTF-16.

-- 
Pete Forman                -./\.-  Disclaimer: This post is originated
WesternGeco                  -./\.-   by myself and does not represent
<A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">pete.forman at westerngeco.com</A>    -./\.-   opinion of Schlumberger, Baker
<A HREF="http://petef.port5.com">http://petef.port5.com</A>          -./\.-   Hughes or their divisions.


 

Your use of Yahoo! Groups is subject to <A HREF="http://docs.yahoo.com/info/terms/">http://docs.yahoo.com/info/terms/</A> 


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="005635.html">[antlr-interest] antlr 3 unicode support
</A></li>
	<LI>Next message: <A HREF="005623.html">[antlr-interest] #( root children ) syntax change proposal?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5644">[ date ]</a>
              <a href="thread.html#5644">[ thread ]</a>
              <a href="subject.html#5644">[ subject ]</a>
              <a href="author.html#5644">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.antlr.org/mailman/listinfo/antlr-interest">More information about the antlr-interest
mailing list</a><br>
</body></html>
