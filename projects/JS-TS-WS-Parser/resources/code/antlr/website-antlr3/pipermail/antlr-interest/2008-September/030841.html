<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [antlr-interest] C parser - tree generation - memory problem
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20C%20parser%20-%20tree%20generation%20-%20memory%20problem&In-Reply-To=%3C48DB6785.2090509%40silasvalley.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="030840.html">
   <LINK REL="Next"  HREF="030842.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[antlr-interest] C parser - tree generation - memory problem</H1>
    <B>Heinrich du Toit</B> 
    <A HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20C%20parser%20-%20tree%20generation%20-%20memory%20problem&In-Reply-To=%3C48DB6785.2090509%40silasvalley.com%3E"
       TITLE="[antlr-interest] C parser - tree generation - memory problem">heinrich at silasvalley.com
       </A><BR>
    <I>Thu Sep 25 03:27:17 PDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="030840.html">[antlr-interest] &quot;Coarse grained&quot; errors in antlr
</A></li>
        <LI>Next message: <A HREF="030842.html">[antlr-interest] C parser - tree generation - memory problem
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#30841">[ date ]</a>
              <a href="thread.html#30841">[ thread ]</a>
              <a href="subject.html#30841">[ subject ]</a>
              <a href="author.html#30841">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi

MY code kept on giving segfaults..
So I traced it..

in antlr3commontree.c:
function newPool: ( around line 99)

basicly the ANTLR3_CALLOC there to create a new pool fails after a while..
Runs out of memory :(
But If you print out factory-&gt;thisPool then it runs very high.. high 
enough to flood a GB or 2..



anyways this causes segfault in newPoolTree.

segfault happens usually on this line:
    tree-&gt;baseTree.super    = tree;


Not sure how to fix but I'm suprised the thing runs out of memory :(
I'm guessing it has todo with the way backtrace or memoize is implemented?

Attached is the .g grammer file..
And also the testme.txt file on which this things segfaults itself.

btw. using cygwin


thanks for any help..
-H

-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: Ctree.g
Url: <A HREF="http://www.antlr.org/pipermail/antlr-interest/attachments/20080925/162be43b/attachment.pl">http://www.antlr.org/pipermail/antlr-interest/attachments/20080925/162be43b/attachment.pl</A> 
-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: testme.txt
Url: <A HREF="http://www.antlr.org/pipermail/antlr-interest/attachments/20080925/162be43b/attachment.txt">http://www.antlr.org/pipermail/antlr-interest/attachments/20080925/162be43b/attachment.txt</A> 
</PRE>




<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="030840.html">[antlr-interest] &quot;Coarse grained&quot; errors in antlr
</A></li>
	<LI>Next message: <A HREF="030842.html">[antlr-interest] C parser - tree generation - memory problem
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#30841">[ date ]</a>
              <a href="thread.html#30841">[ thread ]</a>
              <a href="subject.html#30841">[ subject ]</a>
              <a href="author.html#30841">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.antlr.org/mailman/listinfo/antlr-interest">More information about the antlr-interest
mailing list</a><br>
</body></html>
