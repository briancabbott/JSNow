<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [antlr-interest] ANTLR3 vcab import exception
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:antlr-interest%40antlr.org?Subject=%5Bantlr-interest%5D%20ANTLR3%20vcab%20import%20exception&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="013990.html">
   <LINK REL="Next"  HREF="013992.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[antlr-interest] ANTLR3 vcab import exception</H1>
    <B>Jim Idle</B> 
    <A HREF="mailto:antlr-interest%40antlr.org?Subject=%5Bantlr-interest%5D%20ANTLR3%20vcab%20import%20exception&In-Reply-To="
       TITLE="[antlr-interest] ANTLR3 vcab import exception">jimi at temporal-wave.com
       </A><BR>
    <I>Tue Oct 18 14:15:37 PDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="013990.html">[antlr-interest] ANTLR3 vcab import exception
</A></li>
        <LI>Next message: <A HREF="013992.html">[antlr-interest] question on greedy matching 
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13991">[ date ]</a>
              <a href="thread.html#13991">[ thread ]</a>
              <a href="subject.html#13991">[ subject ]</a>
              <a href="author.html#13991">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I got that abort to go away once I realized that I had somehow deleted the word &quot;tree&quot; from:
 
tree grammar blah;
 
However I am not sure that this is the correct error message to get for that ;-)
 
I also not that a rule such as:
 
:<i> &quot;format&quot; EQ STRING
</I> 
Does not define the token &quot;format&quot; for export to the tree grammar. Maybe this is just a TBD, but it look like the thing to do is either define imaginary tokens for all such elements and rewrite them OR define such things in the lexer and use tokens in the grammar.  Perhaps this is intentional, perhaps a TBD?
 
Jim
 

________________________________

From: <A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">antlr-interest-bounces at antlr.org</A> on behalf of Jim Idle
Sent: Tue 10/18/2005 1:43 PM
To: Oliver Zeigermann
Cc: ANTLR Interest
Subject: RE: [antlr-interest] ANTLR3 vcab import exception





________________________________

From: <A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">antlr-interest-bounces at antlr.org</A> on behalf of Oliver Zeigermann
Sent: Tue 10/18/2005 1:15 PM
Cc: ANTLR Interest
Subject: Re: [antlr-interest] ANTLR3 vcab import exception



2005/10/18, Terence Parr &lt;<A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">parrt at cs.usfca.edu</A>&gt;:
&gt;<i>
</I>&gt;<i> On Oct 18, 2005, at 12:50 PM, Jim Idle wrote:
</I>&gt;<i>
</I>&gt;<i> &gt; Anyone got any thoughts on this (ANTLR 3 built from source code as
</I>&gt;<i> &gt; of Sunday evening, JDK 1.5 Update 5)
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; problem reading token vocabulary file cmql.tokens:
</I>&gt;<i> &gt; java.lang.NullPointerException
</I>&gt;<i> &gt; org.antlr.tool.AssignTokenTypesWalker.importTokenVocab(Unknown Source)
</I>&gt;<i> &gt; org.antlr.tool.AssignTokenTypesWalker.option(Unknown Source)
</I>&gt;<i> &gt; org.antlr.tool.AssignTokenTypesWalker.optionsSpec(Unknown Source)
</I>&gt;<i> &gt; org.antlr.tool.AssignTokenTypesWalker.grammarSpec(Unknown Source)
</I>&gt;<i> &gt; org.antlr.tool.AssignTokenTypesWalker.grammar(Unknown Source)
</I>&gt;<i> &gt; org.antlr.tool.Grammar.setGrammarContent(Unknown Source)
</I>&gt;<i> &gt; org.antlr.Tool.process(Unknown Source)
</I>&gt;<i> &gt; org.antlr.Tool.main(Unknown Source)
</I>&gt;<i>
</I>&gt;<i> I wonder why it says &quot;unknown source&quot;?  Perhaps 1.5 can't read
</I>&gt;<i> old .class files completely?  That would be odd...if you can get me a
</I>&gt;<i> line number i'll look it up ;)
</I>
This is most likely because the sources have been compiled without
debug and/or line number options.


Indeed, that is why the unknownsource is there. The exception is being thrown from the code in generated by assign.types.g (at least, according to grep that is the only place it could be thrown). The antrl.jar is built compeltely from scratch using jdk 1.5 and there are no 1.4 classes around because I don't have that jdk loaded.

I will have to rebuild but I will have to setup the project to build it again and so on as I am on the road with my laptop and blah blah blah. Trying to simplify the grammar to see if it goes away. I would also try with the last antlr.jar you produced, but the problem there is that it produces code tha won't compile so I am a bit stuck. This jar has a fix to java.stg that casts adaptor.create() to &lt;&lt;ASTLabelType&gt;&gt; (or whatever the parameter is), which fixes the defualt tree building stuff when ASTLabelType=CommonTree... or at least, I thought it did ;-)

Is the following (example simplified) tree stuff expected to work right now?

:<i> &quot;KEYWORD&quot; STRING -&gt; ^(&quot;KEYWORD&quot; STRING)
</I>;

Somehow there must be a strange token or somethign in there, or at least something it does not like, but because I forgot to turn on the debug option for the jar I built, it is hard for me to trace of course. Here are the tokens in case it helps. BTW - do you wantt this type of stuff sent here, or do you prefer an email direct via the feedback web page? I don't mind either way of course.

$ sort -n -k2 -t= cmql.tokens
QUERY=4
DICTSPEC=5
DICTELEMENT=6
DICTNAME=7
DICTHEADING=8
DICTATTRSPEC=9
TERMINALSPEC=10
PRINTERSPEC=11
OUTPUTSPEC=12
QUERYBODY=13
QUERYSPECS=14
FILENAME=15
COMMAND=16
PROCESSOR=17
SORTED=18
TYPEIDLIST=19
TYPEITEMSTREAM=20
TYPEDATASTREAM=21
STATEMENT=22
CONNECTIVES=23
SELECTTO=24
SAVING=25
SELECTFACTOR=26
LBRACE=27
RBRACE=28
EQ=29
STRING=30
SEMI=31
WORD=32
ATTRIBUTEVALUE=33













</PRE>







<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="013990.html">[antlr-interest] ANTLR3 vcab import exception
</A></li>
	<LI>Next message: <A HREF="013992.html">[antlr-interest] question on greedy matching 
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13991">[ date ]</a>
              <a href="thread.html#13991">[ thread ]</a>
              <a href="subject.html#13991">[ subject ]</a>
              <a href="author.html#13991">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.antlr.org/mailman/listinfo/antlr-interest">More information about the antlr-interest
mailing list</a><br>
</body></html>
