<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [antlr-interest] C++ version, == nullAST
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:antlr-interest%40antlr.org?Subject=%5Bantlr-interest%5D%20C%2B%2B%20version%2C%20%3D%3D%20nullAST&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000052.html">
   <LINK REL="Next"  HREF="000054.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[antlr-interest] C++ version, == nullAST</H1>
    <B>Ken Lidster</B> 
    <A HREF="mailto:antlr-interest%40antlr.org?Subject=%5Bantlr-interest%5D%20C%2B%2B%20version%2C%20%3D%3D%20nullAST&In-Reply-To="
       TITLE="[antlr-interest] C++ version, == nullAST">ken at synergex.com
       </A><BR>
    <I>Thu Oct  4 13:37:52 PDT 2001</I>
    <P><UL>
        <LI>Previous message: <A HREF="000052.html">[antlr-interest] RE: C++ version, == nullAST
</A></li>
        <LI>Next message: <A HREF="000054.html">[antlr-interest] RFC: slight change in ! semantics
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#51">[ date ]</a>
              <a href="thread.html#51">[ thread ]</a>
              <a href="subject.html#51">[ subject ]</a>
              <a href="author.html#51">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Rusian,

I agree that there are better ways to do this. I was just answering your
original question on why that specific implementation required the nullAST
entry and its various references. It sounds like something along the lines
of your design would allow cleaner code.

Ken

-----Original Message-----
From: Ruslan Zasukhin [mailto:<A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">sunshine at public.kherson.ua</A>]
Sent: Wednesday, October 03, 2001 11:47 PM
To: <A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">antlr-interest at yahoogroups.com</A>
Subject: Re: [antlr-interest] C++ version, == nullAST


on 10/4/01 1:24, Ken Lidster at <A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">ken at synergex.com</A> wrote:

&gt;<i> Ruslan,
</I>&gt;<i> 
</I>&gt;<i> I haven't worked with this code for a couple of years, but I believe this
</I>&gt;<i> relates to the reference counting. First, I seem to recall that in this
</I>&gt;<i> particular smart pointer implementation the only way to 'release' an
</I>&gt;<i> associated address (actually, a private, encapsulating, reference counted,
</I>&gt;<i> pointer object) was by either assigning another smart pointer to it, or
</I>via
&gt;<i> destruction when the smart pointer object goes out of scope. Thus,
</I>equating
&gt;<i> the empty nullAST object was an explicit release of the associated
</I>pointer.
&gt;<i> 
</I>&gt;<i> Second, I believe the default extractor for the base reference class
</I>&gt;<i> (template RefCount&lt;T&gt; I think) was the address of the encapsulated pointer
</I>&gt;<i> object, or zero if there was nothing. Since there wasn't an explicit
</I>&gt;<i> clearing method and, as you noted, all of the releases were accomplished
</I>via
&gt;<i> an equate to nullAST, the 'someAST == nullAST' had to be used to determine
</I>&gt;<i> if someAST was &quot;empty&quot;.
</I>&gt;<i> 
</I>&gt;<i> I remember thinking back then that I would have preferred (as I mentioned
</I>&gt;<i> above) something like an explicit clear() or empty() method. The operation
</I>&gt;<i> 'someAST.clear()' seems more intuitive to me than 'someAST = nullAST'.
</I>This
&gt;<i> would also have allowed 'someAST == 0', or even '!someAST' to be true when
</I>&gt;<i> the smart pointer was empty. But, what we had worked and there were
</I>&gt;<i> deadlines to be met. You know how that goes, I'm sure.
</I>
Okay, Ken I see.

But again with my implementation of Ref count pointers via classes
Sharable and SharablePtr&lt;T&gt; there is no above problems at all.

I can assign and test usual NULL with no problems in my code.
So if Ric accept my class he will be able remove nullAST at all.

-- 
Best regards,
Ruslan Zasukhin

-------------------------
Paradigma.

e-mail: <A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">ruslan at paradigmasoft.com</A>
web   : <A HREF="http://www.paradigmasoft.com">http://www.paradigmasoft.com</A>

To subscribe to the Valentina mail list
send a letter to <A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">valentina-on at lists.macserve.net</A>



 

Your use of Yahoo! Groups is subject to <A HREF="http://docs.yahoo.com/info/terms/">http://docs.yahoo.com/info/terms/</A> 


 

Your use of Yahoo! Groups is subject to <A HREF="http://docs.yahoo.com/info/terms/">http://docs.yahoo.com/info/terms/</A> 

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000052.html">[antlr-interest] RE: C++ version, == nullAST
</A></li>
	<LI>Next message: <A HREF="000054.html">[antlr-interest] RFC: slight change in ! semantics
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#51">[ date ]</a>
              <a href="thread.html#51">[ thread ]</a>
              <a href="subject.html#51">[ subject ]</a>
              <a href="author.html#51">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.antlr.org/mailman/listinfo/antlr-interest">More information about the antlr-interest
mailing list</a><br>
</body></html>
