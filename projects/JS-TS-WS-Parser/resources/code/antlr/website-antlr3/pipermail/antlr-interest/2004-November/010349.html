<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [antlr-interest] Re: Translators Should Use Tree Grammars
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:antlr-interest%40antlr.org?Subject=%5Bantlr-interest%5D%20Re%3A%20Translators%20Should%20Use%20Tree%20Grammars&In-Reply-To=cnu6mt%2Bahop%40eGroups.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="010334.html">
   <LINK REL="Next"  HREF="010361.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[antlr-interest] Re: Translators Should Use Tree Grammars</H1>
    <B>Anakreon</B> 
    <A HREF="mailto:antlr-interest%40antlr.org?Subject=%5Bantlr-interest%5D%20Re%3A%20Translators%20Should%20Use%20Tree%20Grammars&In-Reply-To=cnu6mt%2Bahop%40eGroups.com"
       TITLE="[antlr-interest] Re: Translators Should Use Tree Grammars">anakreonmejdi at yahoo.gr
       </A><BR>
    <I>Tue Nov 23 01:51:01 PST 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="010334.html">[antlr-interest] Re: Translators Should Use Tree Grammars
</A></li>
        <LI>Next message: <A HREF="010361.html">[antlr-interest] Re: Translators Should Use Tree Grammars
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10349">[ date ]</a>
              <a href="thread.html#10349">[ thread ]</a>
              <a href="subject.html#10349">[ subject ]</a>
              <a href="author.html#10349">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
&gt;<i> Anakreon,
</I>&gt;<i> 
</I>&gt;<i> I spent a couple of hours trying to figure out how your stuff works.
</I>The codebase is large. I have extensive docs on how the translator is
implemented but is in Greek. 
&gt;<i> It looks to me like you've got tree_js.g (251 lines) for your
</I>&gt;<i> Jscript treewalker grammar. You've got tree_js_php.act
</I>&gt;<i> containing two things: supporting classes (the first 1481 lines),
</I>&gt;<i> plus the actual code that would normally be embedded
</I>&gt;<i> in the grammar (the remaining 827 lines). And somehow you
</I>&gt;<i> automatically stuff that code into the .g file before
</I>I use annotation, a tool which is available from antlr site.
Inside the grammar a placeholder for the action code looks like this:
&lt;code_here&gt; and in an other file the actual code is inserted like this:
@code_here : //Java code 
The two files are merged before antlr is called.
&gt;<i> using ANTLR on it? And then you've got 9200 lines of
</I>&gt;<i> xml (tests/js_*.xml)
</I>Those are just test cases. The AST generated by the Parser and the TreeParser
are saved in a file when I'm certain that the result is OK.
When I change the grammar, I compare the EAST generated from those 2 phases
with the stored EAST in the files. This process is automated with JUnit and
a custom TestCase class. 
&gt;<i> that appears to specify how to translate specific AST structures.
</I>&gt;<i> (they appear to contain transformation logic, yet their in
</I>&gt;<i> the 'test' directory...are they part of the program, or some
</I>&gt;<i> sort of test case?)
</I>The xml which contain transformation logic are in the objects
directory.
&gt;<i> Also, could you give a small example of some more complex 
</I>&gt;<i> transformation? I didn't see anything in the code you posted
</I>&gt;<i> other than very simple syntactic changes (for example, nothing
</I>&gt;<i> that would have to look at other places in the AST).
</I>The post was about transformation of syntactic structures.
The class definition of JScript was transformed into an equivalent
syntactic structure of PHP.
If by complex transformation you mean method calls 
(because the transformation I posted is really complex) I'll demonstrate
a transformation of an ActiveX call:
Code from tests/sources/response.asp
 &lt;%
Response.Buffer = true
Response.CacheControl = &quot;Public&quot;
cache = Response.CacheControl
Response.ContentType = &quot;text/plain&quot;
cType = Response.ContentType
a = Response.isClientConnected
Response.status = &quot;Some Status&quot;
Response.pics = &quot;pics&quot;
Response.Expires = &quot;123&quot;
Response.ExpiresAbsolute = &quot;12/2/2004&quot;
Response.addHeader &quot;MyHeader&quot;, &quot;HeaderValue&quot;
Response.AppendToLog &quot;This is my message&quot;
Response.Clear()
Response.Clear
Response.end
Response.End()
Response.Flush
Response.Flush()
Response.redirect &quot;Some url&quot;
Response.write(html)
Response.write html &amp; &quot;&lt;br&gt;&quot;
Response.Cookies(&quot;A&quot;) = &quot;Value&quot;
Response.Cookies(&quot;A&quot;)(&quot;B&quot;) = &quot;Other value&quot;
%&gt;
Code generated by command:./run.sh tests/sources/response.asp . -s
&lt;?php
ob_start();
session_cache_limiter(&quot;Public&quot;);
$cache = session_cache_limiter();
header(&quot;Content-type: &quot; . &quot;text/plain&quot;);
$cType = $_SERVER[&quot;CONTENT_TYPE&quot;];
$a = connection_status() == 0;
header(&quot;Status: &quot; . &quot;Some Status&quot;);
header(&quot;pics-label: &quot; . &quot;pics&quot;);
header(&quot;Expires: &quot; . gmdate(&quot;D, d M Y H:i:s&quot;, time() + &quot;123&quot;) . &quot;GMT&quot;);
header(&quot;Expires: &quot; . &quot;12/2/2004&quot;);
header(&quot;MyHeader&quot; . &quot;: &quot; . &quot;HeaderValue&quot;);
error_log(&quot;This is my message&quot;);
ob_clean();
ob_clean();
ob_flush_end();
exit();
ob_flush_end();
exit();
ob_flush();
ob_flush();
header(&quot;Location: &quot; . &quot;Some url&quot;);
print($html);
print($html . &quot;&lt;br&gt;&quot;);
set_cookie(&quot;A&quot;, &quot;Value&quot;);
set_cookie(&quot;A&quot; . &quot;[&quot; . &quot;B&quot; . &quot;]&quot;, &quot;Other value&quot;);
?&gt;

An other complex transformation could be the test case tests/sources/string.asp
which tests the translation of the String built-in object of Jscript.

If you need more info send a mail.
In case the antlr list is not interested on this issue, send email to my address
only.

Anakreon


 
Yahoo! Groups Links

&lt;*&gt; To visit your group on the web, go to:
    <A HREF="http://groups.yahoo.com/group/antlr-interest/">http://groups.yahoo.com/group/antlr-interest/</A>

&lt;*&gt; To unsubscribe from this group, send an email to:
    <A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">antlr-interest-unsubscribe at yahoogroups.com</A>

&lt;*&gt; Your use of Yahoo! Groups is subject to:
    <A HREF="http://docs.yahoo.com/info/terms/">http://docs.yahoo.com/info/terms/</A>
 



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="010334.html">[antlr-interest] Re: Translators Should Use Tree Grammars
</A></li>
	<LI>Next message: <A HREF="010361.html">[antlr-interest] Re: Translators Should Use Tree Grammars
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10349">[ date ]</a>
              <a href="thread.html#10349">[ thread ]</a>
              <a href="subject.html#10349">[ subject ]</a>
              <a href="author.html#10349">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.antlr.org/mailman/listinfo/antlr-interest">More information about the antlr-interest
mailing list</a><br>
</body></html>
