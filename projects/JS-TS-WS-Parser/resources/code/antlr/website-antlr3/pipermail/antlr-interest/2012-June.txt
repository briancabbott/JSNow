From kierans777 at gmail.com  Fri Jun  1 04:17:43 2012
From: kierans777 at gmail.com (Kieran Simpson)
Date: Fri, 01 Jun 2012 21:17:43 +1000
Subject: [antlr-interest] possible ANTLR logos
In-Reply-To: <32b9fbacc6aae3c68ece1f853ad7b541@mail.gmail.com>
References: <15A2468F-8D99-4A9A-AD8D-7DC26FC32E2E@cs.usfca.edu>	<6B458D23F5D4A24ABCDB3C78EA97393B02AFFFE1@EXCH-VIRTUAL.aerotechad.com>	<2B943440-E277-42D9-A050-F4987251EA5D@cs.usfca.edu>
	<32b9fbacc6aae3c68ece1f853ad7b541@mail.gmail.com>
Message-ID: <4FC8A4D7.8080304@gmail.com>

I'm inclined to agree.

Cheers,

On 23/07/64 5:59 AM, Jim Idle wrote:
> 4B3E is my vote but modified so that the NTLR are in black. Then use the
> stylized A in the red button everywhere there is a capital A
>
> Jim
>
> -----Original Message-----
> From: antlr-interest-bounces at antlr.org
> [mailto:antlr-interest-bounces at antlr.org] On Behalf Of Terence Parr
> Sent: Thursday, May 31, 2012 4:59 AM
> To: ANTLR Interest
> Subject: Re: [antlr-interest] possible ANTLR logos
>
> damn mailman. please see here:
>
> http://antlr.org/download/logoholik_antlr_04b3_revision.jpg
>
> and one i did by putting ANTLR underneath in smaller letters:
>
> http://antlr.org/download/antlr-under-logo.png
>
> Ter
> On May 30, 2012, at 12:43 PM, Justin Murray wrote:
>
>> Hi Ter,
>>
>> I don't see any logos, seems that your attachments/links didn't make
>> it into the email.
>>
>> - Justin
>>
>> On 5/30/2012 3:09 PM, Terence Parr wrote:
>>> Hi, I'm working on a logo for antlr. trying to narrow it down. any of
> these grab you?  I'm for sure going with the A in red circle but what
> about other placement stuff? I tried one myself using his graphics with a
> small "ANTLR" under:
>>>
>>>
>>>
>>> Here are the others to consider:
>>>
>>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>>> Unsubscribe:
>>> http://www.antlr.org/mailman/options/antlr-interest/your-email-addres
>>> s
>>
>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>> Unsubscribe:
>> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>

From parrt at cs.usfca.edu  Fri Jun  1 07:40:03 2012
From: parrt at cs.usfca.edu (Terence Parr)
Date: Fri, 1 Jun 2012 07:40:03 -0700
Subject: [antlr-interest] ANTLR logos complete
Message-ID: <E6FA948B-3540-4773-920D-E7BBAB5E166C@cs.usfca.edu>

hi,

final versions:

http://antlr.org/download/antlr-logos.jpg

doing ST one too.

Ter

From oliver.zeigermann at gmail.com  Fri Jun  1 09:03:13 2012
From: oliver.zeigermann at gmail.com (Oliver Zeigermann)
Date: Fri, 1 Jun 2012 18:03:13 +0200
Subject: [antlr-interest] ANTLR logos complete
In-Reply-To: <E6FA948B-3540-4773-920D-E7BBAB5E166C@cs.usfca.edu>
References: <E6FA948B-3540-4773-920D-E7BBAB5E166C@cs.usfca.edu>
Message-ID: <CABJr57D2Egi8iVnAnNoP2KDfw4CDioR8C14X3v7c0Yp1=YHYkw@mail.gmail.com>

+1

2012/6/1 Terence Parr <parrt at cs.usfca.edu>:
> hi,
>
> final versions:
>
> http://antlr.org/download/antlr-logos.jpg
>
> doing ST one too.
>
> Ter
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address

From ygnhzeus at gmail.com  Mon Jun  4 05:05:38 2012
From: ygnhzeus at gmail.com (=?GB2312?B?RmVsaXgu0Ow=?=)
Date: Mon, 4 Jun 2012 20:05:38 +0800
Subject: [antlr-interest] sdfdsf
Message-ID: <CAPmhLM3ceLPfOfzhDbdtJa4x6cnoB51ky9dK6zS6HegjRqbZRw@mail.gmail.com>

sdf

From ygnhzeus at gmail.com  Mon Jun  4 05:14:16 2012
From: ygnhzeus at gmail.com (=?GB2312?B?RmVsaXgu0Ow=?=)
Date: Mon, 4 Jun 2012 20:14:16 +0800
Subject: [antlr-interest] How to deal with this kind of situation?
Message-ID: <CAPmhLM0Gtr=y=zB5BP3W2UhgXNQrnU8sCNZdOxxjFU_qRo9HHQ@mail.gmail.com>

Hi,all, here is the gramma:

columnName (',' columnName)* -> ^(SM_TOK columnName)

I want the output ast of "A,B" to have multiple SM_TOK , like : (SM_TOK A)
(SM_TOK B)

But,currently,I only have: (SM_TOK A)

It seems that 'B' will be ignored.

Can anyone help me to fix this gramma?

From Stefan.Maetje at esd-electronics.com  Mon Jun  4 08:17:35 2012
From: Stefan.Maetje at esd-electronics.com (=?UTF-8?B?U3RlZmFuIE3DpHRqZQ==?=)
Date: Mon, 04 Jun 2012 17:17:35 +0200
Subject: [antlr-interest] How to deal with this kind of situation?
In-Reply-To: <CAPmhLM0Gtr=y=zB5BP3W2UhgXNQrnU8sCNZdOxxjFU_qRo9HHQ@mail.gmail.com>
References: <CAPmhLM0Gtr=y=zB5BP3W2UhgXNQrnU8sCNZdOxxjFU_qRo9HHQ@mail.gmail.com>
Message-ID: <4FCCD18F.2000401@esd-electronics.com>

Am 04.06.2012 14:14, schrieb Felix.?:
> Hi,all, here is the gramma:
>
> columnName (',' columnName)* ->  ^(SM_TOK columnName)
>
> I want the output ast of "A,B" to have multiple SM_TOK , like : (SM_TOK A)
> (SM_TOK B)
>
> But,currently,I only have: (SM_TOK A)
>
> It seems that 'B' will be ignored.
>
> Can anyone help me to fix this gramma?

Use something like:

columnName (',' columnName)* ->  ^(SM_TOK columnName)+

Please note the '+' sign I added to your rewrite rule.


If you want to have something like

^(SM_TOK A B)

instead use

columnName (',' columnName)* ->  ^(SM_TOK columnName+)

Please observe the different position of '+' here.

Best regards,
	Stefan

From espina.edgar at gmail.com  Mon Jun  4 13:20:25 2012
From: espina.edgar at gmail.com (Edgar Espina)
Date: Mon, 4 Jun 2012 17:20:25 -0300
Subject: [antlr-interest] Help with {{Mustache}} expressions
Message-ID: <CAGWJpGY1Nt5b1jobWZfVjjjHH6vt3+08xBVKCMJBAE+3pAhHfg@mail.gmail.com>

Hi Guys,

 I'm trying to implement a Mustache
<http://mustache.github.com/>/Handlebars<http://handlebarsjs.com/>
template
engine using ANTLR. I've almost everything done, except for one thing that
I couldn't find a way to do it.

 Basically, I've to remove lines from the final output if a section/comment
have blanks (spaces or new lines) at the beginning or end.

 Sections looks like: {{#section}}{{/name}}
 Comments looks like: {{!Ignore me}}


 Given: "Hello {{#person}}{{name}}{{/person}}!" will be: "Hello World!"
(This one is working), but

 Given: "Hello*\n*{{#person}}*\n*{{name}}*\n*{{/person}}*\n*" it should be:
"Hello\nWorld!\n" 2nd and 3th lines were removed

 Given: "Hello*\n\t*{{!Ignore me}}*\n*World!" it should be "Hello\nWorld!"


 I appreciated any kind of help.

Thanks


https://raw.github.com/edgarespina/handlebars.java/master/src/main/resources/com/github/edgarespina/handlerbars/parser/HandlebarsLexer.g

https://raw.github.com/edgarespina/handlebars.java/master/src/main/resources/com/github/edgarespina/handlerbars/parser/HandlebarsParser.g


-- 
edgar

From jay23jack at gmail.com  Mon Jun  4 21:49:54 2012
From: jay23jack at gmail.com (Jie Li)
Date: Mon, 4 Jun 2012 21:49:54 -0700
Subject: [antlr-interest] How to fix the ambiguous grammar
Message-ID: <CALY2=u6wREy9cB+jyFhowAtT5ReKLeZECWcQ-pjYf0xQ6tWaXg@mail.gmail.com>

Hi all,

I'm new to antlr and struggling to fix the grammar like below:

a:   A
    | A B ;

But this grammar doesn't support "A B" as it complains it expects the end
character after "A". If I switch the order of this grammar, e.g. "A B"
comes before "A", then it doesn't support "A" as it complains it expects
"B" after "A".

Then I tried:

a:  A
   | A {input.LT(1).getText().equals("B")}? B;

It does work for both rules now. But I wonder if there is some more elegant
way?

Thanks,
Jie Li

From parrt at cs.usfca.edu  Mon Jun  4 21:57:24 2012
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon, 4 Jun 2012 21:57:24 -0700
Subject: [antlr-interest] How to fix the ambiguous grammar
In-Reply-To: <CALY2=u6wREy9cB+jyFhowAtT5ReKLeZECWcQ-pjYf0xQ6tWaXg@mail.gmail.com>
References: <CALY2=u6wREy9cB+jyFhowAtT5ReKLeZECWcQ-pjYf0xQ6tWaXg@mail.gmail.com>
Message-ID: <0B25B1FD-68E8-45A9-9719-C85A142A83F6@cs.usfca.edu>

It sounds like you have backtracking turned on and that whichever rule calls 'a' has B following the reference to 'a'. When it can't figure out what to do with an ambiguity it picks the 1st match.
Ter
On Jun 4, 2012, at 9:49 PM, Jie Li wrote:

> Hi all,
> 
> I'm new to antlr and struggling to fix the grammar like below:
> 
> a:   A
>    | A B ;
> 
> But this grammar doesn't support "A B" as it complains it expects the end
> character after "A". If I switch the order of this grammar, e.g. "A B"
> comes before "A", then it doesn't support "A" as it complains it expects
> "B" after "A".
> 
> Then I tried:
> 
> a:  A
>   | A {input.LT(1).getText().equals("B")}? B;
> 
> It does work for both rules now. But I wonder if there is some more elegant
> way?
> 
> Thanks,
> Jie Li
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address


From jay23jack at gmail.com  Mon Jun  4 22:18:00 2012
From: jay23jack at gmail.com (Jie Li)
Date: Mon, 4 Jun 2012 22:18:00 -0700
Subject: [antlr-interest] How to fix the ambiguous grammar
In-Reply-To: <0B25B1FD-68E8-45A9-9719-C85A142A83F6@cs.usfca.edu>
References: <CALY2=u6wREy9cB+jyFhowAtT5ReKLeZECWcQ-pjYf0xQ6tWaXg@mail.gmail.com>
	<0B25B1FD-68E8-45A9-9719-C85A142A83F6@cs.usfca.edu>
Message-ID: <CALY2=u4U2VfxS1vPHnCTJfzCxyRR5zsw-NcBn+mNwSm+SAM9Zw@mail.gmail.com>

Thanks Ter. Do you mean I should turn the backbracking off? If I can't, do
you have any suggestion?

Jie

On Mon, Jun 4, 2012 at 9:57 PM, Terence Parr <parrt at cs.usfca.edu> wrote:

> It sounds like you have backtracking turned on and that whichever rule
> calls 'a' has B following the reference to 'a'. When it can't figure out
> what to do with an ambiguity it picks the 1st match.
> Ter
> On Jun 4, 2012, at 9:49 PM, Jie Li wrote:
>
> > Hi all,
> >
> > I'm new to antlr and struggling to fix the grammar like below:
> >
> > a:   A
> >    | A B ;
> >
> > But this grammar doesn't support "A B" as it complains it expects the end
> > character after "A". If I switch the order of this grammar, e.g. "A B"
> > comes before "A", then it doesn't support "A" as it complains it expects
> > "B" after "A".
> >
> > Then I tried:
> >
> > a:  A
> >   | A {input.LT(1).getText().equals("B")}? B;
> >
> > It does work for both rules now. But I wonder if there is some more
> elegant
> > way?
> >
> > Thanks,
> > Jie Li
> >
> > List: http://www.antlr.org/mailman/listinfo/antlr-interest
> > Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>
>

From j.prabawa at gmail.com  Tue Jun  5 08:35:07 2012
From: j.prabawa at gmail.com (Jesse Prabawa)
Date: Tue, 5 Jun 2012 23:35:07 +0800
Subject: [antlr-interest] undefined reference to `antlr3AsciiFileStreamNew'
	in compiling for c target
Message-ID: <CABu72iqk3nL=PWybomeFRCLPYzuUgu0rTv1hQZFhO2tOy-6DoQ@mail.gmail.com>

Hi,

Im trying to build a c++ lexer from the c++ grammar and files provided at
http://www.antlr.org/grammar/1295920686207/antlr3.2_cpp_parser4.1.0.zip

but when I compile the produced lexer and parser c files, I get the
following error:

$ g++ CPP_grammar_Lexer.c cpp_full_prog.cpp -o cpp_full_prog -I . -I
/usr/local/include/ -I antlr_include/ -I antlr_src/ -L /usr/local/lib/
-lantlr3c
/tmp/ccbK10NA.o: In function `mComment(CPP_grammar_Lexer_Ctx_struct*)':
CPP_grammar_Lexer.c:(.text+0xb611): undefined reference to
`deferredNewline()'
/tmp/ccbK10NA.o: In function `mSpace(CPP_grammar_Lexer_Ctx_struct*)':
CPP_grammar_Lexer.c:(.text+0xbadb): undefined reference to `tab()'
/tmp/ccbK10NA.o: In function
`mEndOfContinuedLine(CPP_grammar_Lexer_Ctx_struct*)':
CPP_grammar_Lexer.c:(.text+0xbfd5): undefined reference to
`deferredNewline()'
/tmp/ccbK10NA.o: In function
`mLineDirective(CPP_grammar_Lexer_Ctx_struct*)':
CPP_grammar_Lexer.c:(.text+0x11902): undefined reference to
`process_line_directive(char const*, char const*)'
/tmp/ccbK10NA.o: In function `mWhitespace(CPP_grammar_Lexer_Ctx_struct*)':
CPP_grammar_Lexer.c:(.text+0x123c0): undefined reference to
`deferredNewline()'
/tmp/ccbK10NA.o: In function `mID(CPP_grammar_Lexer_Ctx_struct*)':
CPP_grammar_Lexer.c:(.text+0x133a9): undefined reference to
`deferredNewline()'
CPP_grammar_Lexer.c:(.text+0x13764): undefined reference to
`deferredNewline()'
CPP_grammar_Lexer.c:(.text+0x13b6a): undefined reference to
`deferredNewline()'
/tmp/cccO28aR.o: In function `main':
cpp_full_prog.cpp:(.text+0x171): undefined reference to
`antlr3AsciiFileStreamNew'
cpp_full_prog.cpp:(.text+0x24c): undefined reference to
`CPP_grammar_ParserNew'
collect2: ld returned 1 exit status

I've already installed the c runtime library from
http://www.antlr.org/download/C/libantlr3c-3.4.tar.gz and as you can see
above, I've already included all that I can think of for g++.

I think I may be missing something very simple. Any help would be
appreciated.

Thanks,

Jesse

From parrt at cs.usfca.edu  Tue Jun  5 09:10:45 2012
From: parrt at cs.usfca.edu (Terence Parr)
Date: Tue, 5 Jun 2012 09:10:45 -0700
Subject: [antlr-interest] How to fix the ambiguous grammar
In-Reply-To: <CALY2=u4U2VfxS1vPHnCTJfzCxyRR5zsw-NcBn+mNwSm+SAM9Zw@mail.gmail.com>
References: <CALY2=u6wREy9cB+jyFhowAtT5ReKLeZECWcQ-pjYf0xQ6tWaXg@mail.gmail.com>
	<0B25B1FD-68E8-45A9-9719-C85A142A83F6@cs.usfca.edu>
	<CALY2=u4U2VfxS1vPHnCTJfzCxyRR5zsw-NcBn+mNwSm+SAM9Zw@mail.gmail.com>
Message-ID: <2AA182B8-4B20-4652-B0A5-CF3A2856D2BD@cs.usfca.edu>

Easiest thing to do is simply reorder those alternatives if you want 'a'  to match A B not A.
T
On Jun 4, 2012, at 10:18 PM, Jie Li wrote:

> Thanks Ter. Do you mean I should turn the backbracking off? If I can't, do
> you have any suggestion?
> 
> Jie
> 
> On Mon, Jun 4, 2012 at 9:57 PM, Terence Parr <parrt at cs.usfca.edu> wrote:
> 
>> It sounds like you have backtracking turned on and that whichever rule
>> calls 'a' has B following the reference to 'a'. When it can't figure out
>> what to do with an ambiguity it picks the 1st match.
>> Ter
>> On Jun 4, 2012, at 9:49 PM, Jie Li wrote:
>> 
>>> Hi all,
>>> 
>>> I'm new to antlr and struggling to fix the grammar like below:
>>> 
>>> a:   A
>>>   | A B ;
>>> 
>>> But this grammar doesn't support "A B" as it complains it expects the end
>>> character after "A". If I switch the order of this grammar, e.g. "A B"
>>> comes before "A", then it doesn't support "A" as it complains it expects
>>> "B" after "A".
>>> 
>>> Then I tried:
>>> 
>>> a:  A
>>>  | A {input.LT(1).getText().equals("B")}? B;
>>> 
>>> It does work for both rules now. But I wonder if there is some more
>> elegant
>>> way?
>>> 
>>> Thanks,
>>> Jie Li
>>> 
>>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>>> Unsubscribe:
>> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>> 
>> 
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address


From jay23jack at gmail.com  Tue Jun  5 09:26:52 2012
From: jay23jack at gmail.com (Jie Li)
Date: Tue, 5 Jun 2012 09:26:52 -0700
Subject: [antlr-interest] How to fix the ambiguous grammar
In-Reply-To: <2AA182B8-4B20-4652-B0A5-CF3A2856D2BD@cs.usfca.edu>
References: <CALY2=u6wREy9cB+jyFhowAtT5ReKLeZECWcQ-pjYf0xQ6tWaXg@mail.gmail.com>
	<0B25B1FD-68E8-45A9-9719-C85A142A83F6@cs.usfca.edu>
	<CALY2=u4U2VfxS1vPHnCTJfzCxyRR5zsw-NcBn+mNwSm+SAM9Zw@mail.gmail.com>
	<2AA182B8-4B20-4652-B0A5-CF3A2856D2BD@cs.usfca.edu>
Message-ID: <CALY2=u4nf=60vt5G7QQK1fDX1deAT6sQQ7G1fwi7adtY_oXBmw@mail.gmail.com>

I'm afraid I need 'a' to match both "A" and "A B", so I tried

a:  A
   | A {input.LT(1).getText().equals("B")}? B;

which works though it doesn't look nice. Do you have any better idea?

Jie

On Tue, Jun 5, 2012 at 9:10 AM, Terence Parr <parrt at cs.usfca.edu> wrote:

> Easiest thing to do is simply reorder those alternatives if you want 'a'
>  to match A B not A.
> T
> On Jun 4, 2012, at 10:18 PM, Jie Li wrote:
>
> > Thanks Ter. Do you mean I should turn the backbracking off? If I can't,
> do
> > you have any suggestion?
> >
> > Jie
> >
> > On Mon, Jun 4, 2012 at 9:57 PM, Terence Parr <parrt at cs.usfca.edu> wrote:
> >
> >> It sounds like you have backtracking turned on and that whichever rule
> >> calls 'a' has B following the reference to 'a'. When it can't figure out
> >> what to do with an ambiguity it picks the 1st match.
> >> Ter
> >> On Jun 4, 2012, at 9:49 PM, Jie Li wrote:
> >>
> >>> Hi all,
> >>>
> >>> I'm new to antlr and struggling to fix the grammar like below:
> >>>
> >>> a:   A
> >>>   | A B ;
> >>>
> >>> But this grammar doesn't support "A B" as it complains it expects the
> end
> >>> character after "A". If I switch the order of this grammar, e.g. "A B"
> >>> comes before "A", then it doesn't support "A" as it complains it
> expects
> >>> "B" after "A".
> >>>
> >>> Then I tried:
> >>>
> >>> a:  A
> >>>  | A {input.LT(1).getText().equals("B")}? B;
> >>>
> >>> It does work for both rules now. But I wonder if there is some more
> >> elegant
> >>> way?
> >>>
> >>> Thanks,
> >>> Jie Li
> >>>
> >>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> >>> Unsubscribe:
> >> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
> >>
> >>
> >
> > List: http://www.antlr.org/mailman/listinfo/antlr-interest
> > Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>
>

From parrt at cs.usfca.edu  Tue Jun  5 15:37:56 2012
From: parrt at cs.usfca.edu (Terence Parr)
Date: Tue, 5 Jun 2012 15:37:56 -0700
Subject: [antlr-interest] How to fix the ambiguous grammar
In-Reply-To: <CALY2=u4nf=60vt5G7QQK1fDX1deAT6sQQ7G1fwi7adtY_oXBmw@mail.gmail.com>
References: <CALY2=u6wREy9cB+jyFhowAtT5ReKLeZECWcQ-pjYf0xQ6tWaXg@mail.gmail.com>
	<0B25B1FD-68E8-45A9-9719-C85A142A83F6@cs.usfca.edu>
	<CALY2=u4U2VfxS1vPHnCTJfzCxyRR5zsw-NcBn+mNwSm+SAM9Zw@mail.gmail.com>
	<2AA182B8-4B20-4652-B0A5-CF3A2856D2BD@cs.usfca.edu>
	<CALY2=u4nf=60vt5G7QQK1fDX1deAT6sQQ7G1fwi7adtY_oXBmw@mail.gmail.com>
Message-ID: <4E2FA4ED-85CE-4A30-B7A8-A61459E1EE75@cs.usfca.edu>

a : A B | A ;
On Jun 5, 2012, at 9:26 AM, Jie Li wrote:

> I'm afraid I need 'a' to match both "A" and "A B", so I tried 
> 
> a:  A
>    | A {input.LT(1).getText().equals("B")}? B;
> 
> which works though it doesn't look nice. Do you have any better idea?
> 
> Jie
> 
> On Tue, Jun 5, 2012 at 9:10 AM, Terence Parr <parrt at cs.usfca.edu> wrote:
> Easiest thing to do is simply reorder those alternatives if you want 'a'  to match A B not A.
> T
> On Jun 4, 2012, at 10:18 PM, Jie Li wrote:
> 
> > Thanks Ter. Do you mean I should turn the backbracking off? If I can't, do
> > you have any suggestion?
> >
> > Jie
> >
> > On Mon, Jun 4, 2012 at 9:57 PM, Terence Parr <parrt at cs.usfca.edu> wrote:
> >
> >> It sounds like you have backtracking turned on and that whichever rule
> >> calls 'a' has B following the reference to 'a'. When it can't figure out
> >> what to do with an ambiguity it picks the 1st match.
> >> Ter
> >> On Jun 4, 2012, at 9:49 PM, Jie Li wrote:
> >>
> >>> Hi all,
> >>>
> >>> I'm new to antlr and struggling to fix the grammar like below:
> >>>
> >>> a:   A
> >>>   | A B ;
> >>>
> >>> But this grammar doesn't support "A B" as it complains it expects the end
> >>> character after "A". If I switch the order of this grammar, e.g. "A B"
> >>> comes before "A", then it doesn't support "A" as it complains it expects
> >>> "B" after "A".
> >>>
> >>> Then I tried:
> >>>
> >>> a:  A
> >>>  | A {input.LT(1).getText().equals("B")}? B;
> >>>
> >>> It does work for both rules now. But I wonder if there is some more
> >> elegant
> >>> way?
> >>>
> >>> Thanks,
> >>> Jie Li
> >>>
> >>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> >>> Unsubscribe:
> >> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
> >>
> >>
> >
> > List: http://www.antlr.org/mailman/listinfo/antlr-interest
> > Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
> 
> 


From jay23jack at gmail.com  Tue Jun  5 16:33:07 2012
From: jay23jack at gmail.com (Jie Li)
Date: Tue, 5 Jun 2012 16:33:07 -0700
Subject: [antlr-interest] How to fix the ambiguous grammar
In-Reply-To: <4E2FA4ED-85CE-4A30-B7A8-A61459E1EE75@cs.usfca.edu>
References: <CALY2=u6wREy9cB+jyFhowAtT5ReKLeZECWcQ-pjYf0xQ6tWaXg@mail.gmail.com>
	<0B25B1FD-68E8-45A9-9719-C85A142A83F6@cs.usfca.edu>
	<CALY2=u4U2VfxS1vPHnCTJfzCxyRR5zsw-NcBn+mNwSm+SAM9Zw@mail.gmail.com>
	<2AA182B8-4B20-4652-B0A5-CF3A2856D2BD@cs.usfca.edu>
	<CALY2=u4nf=60vt5G7QQK1fDX1deAT6sQQ7G1fwi7adtY_oXBmw@mail.gmail.com>
	<4E2FA4ED-85CE-4A30-B7A8-A61459E1EE75@cs.usfca.edu>
Message-ID: <CALY2=u6R-W2jgd88H0pPPrA+51YzyZrkWL3h8Q7=7wer5O=HpA@mail.gmail.com>

Thanks a lot! Somehow it works though it didn't.

Jie

On Tue, Jun 5, 2012 at 3:37 PM, Terence Parr <parrt at cs.usfca.edu> wrote:

> a : A B | A ;
>
> On Jun 5, 2012, at 9:26 AM, Jie Li wrote:
>
> I'm afraid I need 'a' to match both "A" and "A B", so I tried
>
> a:  A
>    | A {input.LT(1).getText().equals("B")}? B;
>
> which works though it doesn't look nice. Do you have any better idea?
>
> Jie
>
> On Tue, Jun 5, 2012 at 9:10 AM, Terence Parr <parrt at cs.usfca.edu> wrote:
>
>> Easiest thing to do is simply reorder those alternatives if you want 'a'
>>  to match A B not A.
>> T
>> On Jun 4, 2012, at 10:18 PM, Jie Li wrote:
>>
>> > Thanks Ter. Do you mean I should turn the backbracking off? If I can't,
>> do
>> > you have any suggestion?
>> >
>> > Jie
>> >
>> > On Mon, Jun 4, 2012 at 9:57 PM, Terence Parr <parrt at cs.usfca.edu>
>> wrote:
>> >
>> >> It sounds like you have backtracking turned on and that whichever rule
>> >> calls 'a' has B following the reference to 'a'. When it can't figure
>> out
>> >> what to do with an ambiguity it picks the 1st match.
>> >> Ter
>> >> On Jun 4, 2012, at 9:49 PM, Jie Li wrote:
>> >>
>> >>> Hi all,
>> >>>
>> >>> I'm new to antlr and struggling to fix the grammar like below:
>> >>>
>> >>> a:   A
>> >>>   | A B ;
>> >>>
>> >>> But this grammar doesn't support "A B" as it complains it expects the
>> end
>> >>> character after "A". If I switch the order of this grammar, e.g. "A B"
>> >>> comes before "A", then it doesn't support "A" as it complains it
>> expects
>> >>> "B" after "A".
>> >>>
>> >>> Then I tried:
>> >>>
>> >>> a:  A
>> >>>  | A {input.LT(1).getText().equals("B")}? B;
>> >>>
>> >>> It does work for both rules now. But I wonder if there is some more
>> >> elegant
>> >>> way?
>> >>>
>> >>> Thanks,
>> >>> Jie Li
>> >>>
>> >>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>> >>> Unsubscribe:
>> >> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>> >>
>> >>
>> >
>> > List: http://www.antlr.org/mailman/listinfo/antlr-interest
>> > Unsubscribe:
>> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>>
>>
>
>

From martin.vanaken at 8thcolor.com  Tue Jun  5 23:44:51 2012
From: martin.vanaken at 8thcolor.com (Martin Van Aken)
Date: Wed, 6 Jun 2012 08:44:51 +0200
Subject: [antlr-interest] Pick a ECMAScript grammar - virtual semi colon
Message-ID: <CACQyh-X1wMUEtbXoKBBYKWcX3jdqtYEg+Evfov+O8yEvzmhXqA@mail.gmail.com>

Hello all,
First of all thanks to Terence Parr and all contributors for antlr & the
impressive grammar list. It's becoming a major asset for our startup. My
question relates to ECMAScript grammars. I've seen than multiple exists,
and one of the more dreaded aspect of (ECMA|Java)Script parsing is the
"virtual semi colon" problem. I've made my first test with the one
"highlighted", from Chris Lambrou, and I am now looking at the one from
Patrick Hulsmeijer (http://research.xebic.com/es3/) that seems to manage
the "virtual semi colon" problems. My first tests with the "Lambrou"
grammar shown some problems related to whether or not I have the semi
colons.

Does anyone on this list has experience with parsing ECMAScript using antlr
(I did some search on the archives, but most posts on this topics are 2+
years old) ? If yes, with which grammar ?

Thanks,

Martin
-- 
Company website : www.8thcolor.com
Contact me on LinkedIn : http://www.linkedin.com/in/martinvanaken
Follow me on Twitter : @martinvanaken <http://twitter.com/martinvanaken>

From gebhardt-u at gmx.de  Wed Jun  6 06:00:08 2012
From: gebhardt-u at gmx.de (Uwe Gebhardt)
Date: Wed, 06 Jun 2012 15:00:08 +0200
Subject: [antlr-interest] ANTLR - Java Script Target - dormant / active?
Message-ID: <20120606130008.239640@gmx.net>

Hi,

is the Javascript still an supported target language?

Looking in the wiki

http://www.antlr.org/wiki/display/ANTLR3/ANTLR3JavaScriptTarget

I see the last update was done in 2010, on the same page
the ANTLR 3.1 / 3.2 release get mentioned.

If I look at

http://www.antlr.org/wiki/display/ANTLR3/Code+Generation+Targets

Javascript is still listed, and I find the statement
 "In sync with ANTLR3 Development"

ANTLR 
-- 
Empfehlen Sie GMX DSL Ihren Freunden und Bekannten und wir
belohnen Sie mit bis zu 50,- Euro! https://freundschaftswerbung.gmx.de

From gebhardt-u at gmx.de  Wed Jun  6 06:16:07 2012
From: gebhardt-u at gmx.de (Uwe Gebhardt)
Date: Wed, 06 Jun 2012 15:16:07 +0200
Subject: [antlr-interest] ANTLR - Java Script Target - dormant / active?
In-Reply-To: <20120606130008.239640@gmx.net>
References: <20120606130008.239640@gmx.net>
Message-ID: <20120606131607.6890@gmx.net>

Hi,

Sry for the abrupt ending, the reason was my mail program.

But hopefully the main part of my question came across.

If this is the wrong forum, it would be great, if you could
point me to the correct forum.

With kind regards
Uwe Gebhardt
 
-------- Original-Nachricht --------
> Datum: Wed, 06 Jun 2012 15:00:08 +0200
> Von: "Uwe Gebhardt" <gebhardt-u at gmx.de>
> An: antlr-interest at antlr.org
> Betreff: [antlr-interest] ANTLR - Java Script Target - dormant / active?

> Hi,
> 
> is the Javascript still an supported target language?
> 
> Looking in the wiki
> 
> http://www.antlr.org/wiki/display/ANTLR3/ANTLR3JavaScriptTarget
> 
> I see the last update was done in 2010, on the same page
> the ANTLR 3.1 / 3.2 release get mentioned.
> 
> If I look at
> 
> http://www.antlr.org/wiki/display/ANTLR3/Code+Generation+Targets
> 
> Javascript is still listed, and I find the statement
>  "In sync with ANTLR3 Development"
> 
> ANTLR 
> -- 
> Empfehlen Sie GMX DSL Ihren Freunden und Bekannten und wir
> belohnen Sie mit bis zu 50,- Euro! https://freundschaftswerbung.gmx.de
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address

-- 
Empfehlen Sie GMX DSL Ihren Freunden und Bekannten und wir
belohnen Sie mit bis zu 50,- Euro! https://freundschaftswerbung.gmx.de

From researcher0x00 at gmail.com  Wed Jun  6 06:43:21 2012
From: researcher0x00 at gmail.com (Eric)
Date: Wed, 6 Jun 2012 09:43:21 -0400
Subject: [antlr-interest] wanted: multiple result ASTs
In-Reply-To: <CAN45N111TTiYXo=kOVV2_D8dQrHtg0t6fLFw6AFJ-r=AFi7Hxg@mail.gmail.com>
References: <FA21EA835C1467498B3E0B904C9CF2020E6CB4C5@TK5EX14MBXC113.redmond.corp.microsoft.com>
	<CAN45N111TTiYXo=kOVV2_D8dQrHtg0t6fLFw6AFJ-r=AFi7Hxg@mail.gmail.com>
Message-ID: <CAN45N11+B+ZrygvOLfK-iKPS3KXkRBu145yhuRZE9cWHWOquWQ@mail.gmail.com>

Hi Scobie,

Since I often come across the answer to your question and just came across
it again, this time as a good example in a new book, I thought I would
share it here.

In "Thinking as Computation: A First Course" by Hector J. Levesque
http://www.amazon.com/Thinking-Computation-Hector-J-Levesque/dp/0262016990

Using Amazon's Look Inside feature
http://www.amazon.com/Thinking-Computation-Hector-J-Levesque/dp/0262016990/ref=zg_bs_3987_1#reader_0262016990

Take a look at Figure 8.3 on page 158.

Eric
On Wed, May 23, 2012 at 7:06 AM, Eric <researcher0x00 at gmail.com> wrote:

> Hi Scobie,
>
> I have never written a parser for natural language yet, but from working
> with Artificial Intelligence and PROLOG, that is where I would focus my
> search. In particular, PROLOG will generate multipule results for a given
> query. So if the input is ambiguios, there would be multiple ways to match
> against the rules, and the results would be each way that the PROLOG
> program matched the rules against the input.
>
> Hope that helps,
> Eric
>
>
> On Tue, May 22, 2012 at 7:59 PM, Scobie Smith (Insight Global) <
> v-scobis at microsoft.com> wrote:
>
>> I'm fairly new to ANTLR; please bear with me if this has been asked
>> before.
>>
>> I am looking for a way to have ANTLR generate multiple result trees from
>> my grammar, in order NOT to resolve ambiguity. Suppose I have a grammar
>> that is "incomplete" or ambiguous, in that for some input text, there can
>> be more than one "valid" way of parsing the input. (This is particularly
>> useful in natural language parsing.) What I would like is to have rules
>> that can collect all of these result ASTs-a list of ASTs, not just one AST.
>> At the end of a successful parse run, there would then be a list of trees.
>>
>> I know this is not a typical need, particularly with formal languages.
>> But I am looking to apply ANTLR for some natural language parsing.
>>
>> Any tips or pointers will be much appreciated. So far I do not see any
>> easy way of doing this with ANTLR, but maybe there is some way of hacking
>> in actions or the like.
>>
>> Thanks.
>> Scobie
>>
>>
>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>> Unsubscribe:
>> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>>
>
>

From manuel.pugliese87 at gmail.com  Wed Jun  6 07:02:12 2012
From: manuel.pugliese87 at gmail.com (thish87)
Date: Wed, 6 Jun 2012 07:02:12 -0700 (PDT)
Subject: [antlr-interest] cgram project
Message-ID: <1338991332836-7578177.post@n2.nabble.com>

Hi,
 i'm a student and i study cgram for my exams can i ask help for how to run
cgram.
tanks 

--
View this message in context: http://antlr.1301665.n2.nabble.com/cgram-project-tp7578177.html
Sent from the ANTLR mailing list archive at Nabble.com.

From webny23 at gmail.com  Wed Jun  6 07:14:06 2012
From: webny23 at gmail.com (Verny Quartara)
Date: Wed, 6 Jun 2012 16:14:06 +0200
Subject: [antlr-interest] antlr3 lexer: recognize single character token
Message-ID: <CAP-ipi5nP=Y3S1LWxMKmUcMFu2UrQvsX+ughqR1RVuBA7qmD9g@mail.gmail.com>

Hi everybody,
can someone explain why if I define a lexer rule like this:

A : 'A';

The lexer recognize "A" as valid, but also "A" followed by any character,
for example "Azzz" or "AK" are considered valid tokens??

This is driving me crazy, I red the documentation but at the moment I just
can't understand.
Thanks



-- 
Verny Quartara

From bkiers at gmail.com  Wed Jun  6 07:26:27 2012
From: bkiers at gmail.com (Bart Kiers)
Date: Wed, 6 Jun 2012 16:26:27 +0200
Subject: [antlr-interest] antlr3 lexer: recognize single character token
In-Reply-To: <CAP-ipi5nP=Y3S1LWxMKmUcMFu2UrQvsX+ughqR1RVuBA7qmD9g@mail.gmail.com>
References: <CAP-ipi5nP=Y3S1LWxMKmUcMFu2UrQvsX+ughqR1RVuBA7qmD9g@mail.gmail.com>
Message-ID: <CAOrgODa02o2+U_uKCPHPSHoHsv1HCvh4Ad9=h55BQ3q7zLgQQg@mail.gmail.com>

Hi Verny,

Why wouldn't the "A" from "Azzz" be tokenized as an A-token? It matches it,
after all.
If "Azzz" should be matched differently, you must define a lexer rule that
matches it, like this:

    ID : ('a'..'z' | 'A'..'Z')+;

With that rule added, "Azzz" would be tokenized as an ID-token, no matter
if the A-rule is defined before the ID-rule (ANTLR's lexer gives precedence
over rules that match more characters, only when two (or more) rules match
the same amount of characters, the rules define first will "win").

Regards,

Bart.


On Wed, Jun 6, 2012 at 4:14 PM, Verny Quartara <webny23 at gmail.com> wrote:

> Hi everybody,
> can someone explain why if I define a lexer rule like this:
>
> A : 'A';
>
> The lexer recognize "A" as valid, but also "A" followed by any character,
> for example "Azzz" or "AK" are considered valid tokens??
>
> This is driving me crazy, I red the documentation but at the moment I just
> can't understand.
> Thanks
>
>
>
> --
> Verny Quartara
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>

From parrt at cs.usfca.edu  Wed Jun  6 11:02:25 2012
From: parrt at cs.usfca.edu (Terence Parr)
Date: Wed, 6 Jun 2012 11:02:25 -0700
Subject: [antlr-interest] ANTLR - Java Script Target - dormant / active?
In-Reply-To: <20120606130008.239640@gmx.net>
References: <20120606130008.239640@gmx.net>
Message-ID: <82E284E3-54F9-40D6-998D-78747435305D@cs.usfca.edu>

hi. unfortunately I think that that target is dormant I also don't think it's up to date for 3.4
T
On Jun 6, 2012, at 6:00 AM, Uwe Gebhardt wrote:

> Hi,
> 
> is the Javascript still an supported target language?
> 
> Looking in the wiki
> 
> http://www.antlr.org/wiki/display/ANTLR3/ANTLR3JavaScriptTarget
> 
> I see the last update was done in 2010, on the same page
> the ANTLR 3.1 / 3.2 release get mentioned.
> 
> If I look at
> 
> http://www.antlr.org/wiki/display/ANTLR3/Code+Generation+Targets
> 
> Javascript is still listed, and I find the statement
> "In sync with ANTLR3 Development"
> 
> ANTLR 
> -- 
> Empfehlen Sie GMX DSL Ihren Freunden und Bekannten und wir
> belohnen Sie mit bis zu 50,- Euro! https://freundschaftswerbung.gmx.de
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address


From jimi at temporal-wave.com  Wed Jun  6 20:10:44 2012
From: jimi at temporal-wave.com (Jim Idle)
Date: Thu, 7 Jun 2012 11:10:44 +0800
Subject: [antlr-interest] Pick a ECMAScript grammar - virtual semi colon
In-Reply-To: <CACQyh-X1wMUEtbXoKBBYKWcX3jdqtYEg+Evfov+O8yEvzmhXqA@mail.gmail.com>
References: <CACQyh-X1wMUEtbXoKBBYKWcX3jdqtYEg+Evfov+O8yEvzmhXqA@mail.gmail.com>
Message-ID: <71642bc44b7e8e7037081949f9865037@mail.gmail.com>

For an example if dealing with virtual line endings, download the source
code for the JavaFX compiler and find the parser grammar. I deal with the
same issue (perhaps different conditions for the SEMI being optional) and
you should be able to steal that bit of code.

Jim

-----Original Message-----
From: antlr-interest-bounces at antlr.org
[mailto:antlr-interest-bounces at antlr.org] On Behalf Of Martin Van Aken
Sent: Wednesday, June 06, 2012 2:45 PM
To: antlr-interest at antlr.org
Subject: [antlr-interest] Pick a ECMAScript grammar - virtual semi colon

Hello all,
First of all thanks to Terence Parr and all contributors for antlr & the
impressive grammar list. It's becoming a major asset for our startup. My
question relates to ECMAScript grammars. I've seen than multiple exists,
and one of the more dreaded aspect of (ECMA|Java)Script parsing is the
"virtual semi colon" problem. I've made my first test with the one
"highlighted", from Chris Lambrou, and I am now looking at the one from
Patrick Hulsmeijer (http://research.xebic.com/es3/) that seems to manage
the "virtual semi colon" problems. My first tests with the "Lambrou"
grammar shown some problems related to whether or not I have the semi
colons.

Does anyone on this list has experience with parsing ECMAScript using
antlr (I did some search on the archives, but most posts on this topics
are 2+ years old) ? If yes, with which grammar ?

Thanks,

Martin
--
Company website : www.8thcolor.com
Contact me on LinkedIn : http://www.linkedin.com/in/martinvanaken
Follow me on Twitter : @martinvanaken <http://twitter.com/martinvanaken>

List: http://www.antlr.org/mailman/listinfo/antlr-interest
Unsubscribe:
http://www.antlr.org/mailman/options/antlr-interest/your-email-address

From danieladacruz at gmail.com  Thu Jun  7 16:52:40 2012
From: danieladacruz at gmail.com (Daniela da Cruz)
Date: Fri, 8 Jun 2012 00:52:40 +0100
Subject: [antlr-interest] C grammar for Antlrv2?
Message-ID: <CACKT26y14JJ1vjMmoXHEiMUPtXaN4tHiiCjKm2zugfS9rdcXXQ@mail.gmail.com>

Hi all,

There is anyone that knows a C grammar for Antlr v2?

Thanks
daniela

From martin.vanaken at 8thcolor.com  Thu Jun  7 23:49:57 2012
From: martin.vanaken at 8thcolor.com (Martin Van Aken)
Date: Fri, 8 Jun 2012 08:49:57 +0200
Subject: [antlr-interest] Pick a ECMAScript grammar - virtual semi colon
In-Reply-To: <71642bc44b7e8e7037081949f9865037@mail.gmail.com>
References: <CACQyh-X1wMUEtbXoKBBYKWcX3jdqtYEg+Evfov+O8yEvzmhXqA@mail.gmail.com>
	<71642bc44b7e8e7037081949f9865037@mail.gmail.com>
Message-ID: <CACQyh-V-6oGERVAOfuOsf3ERW6O_t47eQTg-D7bnmqAipmo4xA@mail.gmail.com>

Hello Jim,
Thanks for the kind help, I'll take a look there, between your work and the
existing grammar, I should be able to get something working.

Martin

On 7 June 2012 05:10, Jim Idle <jimi at temporal-wave.com> wrote:

> For an example if dealing with virtual line endings, download the source
> code for the JavaFX compiler and find the parser grammar. I deal with the
> same issue (perhaps different conditions for the SEMI being optional) and
> you should be able to steal that bit of code.
>
> Jim
>
> -----Original Message-----
> From: antlr-interest-bounces at antlr.org
> [mailto:antlr-interest-bounces at antlr.org] On Behalf Of Martin Van Aken
> Sent: Wednesday, June 06, 2012 2:45 PM
> To: antlr-interest at antlr.org
> Subject: [antlr-interest] Pick a ECMAScript grammar - virtual semi colon
>
> Hello all,
> First of all thanks to Terence Parr and all contributors for antlr & the
> impressive grammar list. It's becoming a major asset for our startup. My
> question relates to ECMAScript grammars. I've seen than multiple exists,
> and one of the more dreaded aspect of (ECMA|Java)Script parsing is the
> "virtual semi colon" problem. I've made my first test with the one
> "highlighted", from Chris Lambrou, and I am now looking at the one from
> Patrick Hulsmeijer (http://research.xebic.com/es3/) that seems to manage
> the "virtual semi colon" problems. My first tests with the "Lambrou"
> grammar shown some problems related to whether or not I have the semi
> colons.
>
> Does anyone on this list has experience with parsing ECMAScript using
> antlr (I did some search on the archives, but most posts on this topics
> are 2+ years old) ? If yes, with which grammar ?
>
> Thanks,
>
> Martin
> --
> Company website : www.8thcolor.com
> Contact me on LinkedIn : http://www.linkedin.com/in/martinvanaken
> Follow me on Twitter : @martinvanaken <http://twitter.com/martinvanaken>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>



-- 
Mobile : +32 486 899 652
Company website : www.8thcolor.com
Contact me on LinkedIn : http://www.linkedin.com/in/martinvanaken
Follow me on Twitter : @martinvanaken <http://twitter.com/martinvanaken>

From brsmoorthy at gmail.com  Sat Jun  9 01:10:41 2012
From: brsmoorthy at gmail.com (sathya moorthy)
Date: Sat, 9 Jun 2012 13:40:41 +0530
Subject: [antlr-interest] Java API for checking ambiguity in grammars using
	ANLTR
Message-ID: <CAN5X3_58JT2th78yA5FN8VUomJtXi_-nhx60BiN=Mvsxd7hUgg@mail.gmail.com>

Hi,

When i use ANTLR IDE, it suggests that the grammar is ambiguous but still i
am able to generate code using that grammar.
Is there a specific API in ANTLR which will tell whether the grammar is
ambiguous?
If the grammar is ambiguous i dont want to generate the code for that
specific file.

Regards,
Sathya

From brsmoorthy at gmail.com  Mon Jun 11 01:54:38 2012
From: brsmoorthy at gmail.com (sathya moorthy)
Date: Mon, 11 Jun 2012 14:24:38 +0530
Subject: [antlr-interest] Java API for checking ambiguity in grammars
	using ANLTR
In-Reply-To: <CAN5X3_58JT2th78yA5FN8VUomJtXi_-nhx60BiN=Mvsxd7hUgg@mail.gmail.com>
References: <CAN5X3_58JT2th78yA5FN8VUomJtXi_-nhx60BiN=Mvsxd7hUgg@mail.gmail.com>
Message-ID: <CAN5X3_6r_LRhesQ046L-P=ozQ4OLp5TK4+MxjHJ-6TvL3ey8ZA@mail.gmail.com>

Guys any help would be great
thanks
Sathya

On Sat, Jun 9, 2012 at 1:40 PM, sathya moorthy <brsmoorthy at gmail.com> wrote:

> Hi,
>
> When i use ANTLR IDE, it suggests that the grammar is ambiguous but still
> i am able to generate code using that grammar.
> Is there a specific API in ANTLR which will tell whether the grammar is
> ambiguous?
> If the grammar is ambiguous i dont want to generate the code for that
> specific file.
>
> Regards,
> Sathya
>
>

From nafur42 at gmail.com  Mon Jun 11 02:01:05 2012
From: nafur42 at gmail.com (nafur)
Date: Mon, 11 Jun 2012 11:01:05 +0200
Subject: [antlr-interest] Exploit ambiguity in tree rewriter
In-Reply-To: <4FC4A97E.2020009@gmail.com>
References: <4FC4A97E.2020009@gmail.com>
Message-ID: <4FD5B3D1.30704@gmail.com>

Hi,

I asked about this ambiguity quite a while ago. Does nobody has any idea
how to do this?

Gereon

On 05/29/2012 12:48 PM, nafur wrote:
> Hi,
> 
> I'm using tree rewriters to manipulate formulas that are represented as
> ASTs. One operation I'd like to do is: "remove any identity from a
> multiplication".
> 
> The replacement rule I'm currently working with is the following:
> 
> topdown :
> 	^( MULT (before += .)* x=. (after += .)* )
> 	{ $x.has("IDENTITY") }?
> 	-> ^( MULT $before* $after* )
> ;
> 
> As you probably see, we have some ambiguity here: before and after can
> both take arbitrarily many elements. If I take an AST like
> ^( MULT A I x ), the replacement will not match. printing some debug
> output reveals, that ANTLR will only check $x.has("IDENTITY"), i.e. will
> only try to match the last element in a multiplication.
> (That is actually not a surprise, as ANTLR issues a warning...)
> 
> Is there any way to resolve this ambiguity in a way, such that I can
> match all occurrences?
> 
> Thanks,
> Gereon

From lgcraymer at yahoo.com  Mon Jun 11 02:23:49 2012
From: lgcraymer at yahoo.com (Loring Craymer)
Date: Mon, 11 Jun 2012 02:23:49 -0700 (PDT)
Subject: [antlr-interest] Java API for checking ambiguity in grammars
	using ANLTR
In-Reply-To: <CAN5X3_6r_LRhesQ046L-P=ozQ4OLp5TK4+MxjHJ-6TvL3ey8ZA@mail.gmail.com>
References: <CAN5X3_58JT2th78yA5FN8VUomJtXi_-nhx60BiN=Mvsxd7hUgg@mail.gmail.com>
	<CAN5X3_6r_LRhesQ046L-P=ozQ4OLp5TK4+MxjHJ-6TvL3ey8ZA@mail.gmail.com>
Message-ID: <1339406629.16995.YahooMailNeo@web125506.mail.ne1.yahoo.com>

You want code generated even if the grammar is reported to be ambiguous. ?ANTLR tells you how it handles ambiguity (some alternatives are disabled); if this is not what you want, fix your grammar.

--Loring




>________________________________
> From: sathya moorthy <brsmoorthy at gmail.com>
>To: antlr-interest at antlr.org 
>Sent: Monday, June 11, 2012 1:54 AM
>Subject: Re: [antlr-interest] Java API for checking ambiguity in grammars using ANLTR
> 
>Guys any help would be great
>thanks
>Sathya
>
>On Sat, Jun 9, 2012 at 1:40 PM, sathya moorthy <brsmoorthy at gmail.com> wrote:
>
>> Hi,
>>
>> When i use ANTLR IDE, it suggests that the grammar is ambiguous but still
>> i am able to generate code using that grammar.
>> Is there a specific API in ANTLR which will tell whether the grammar is
>> ambiguous?
>> If the grammar is ambiguous i dont want to generate the code for that
>> specific file.
>>
>> Regards,
>> Sathya
>>
>>
>
>List: http://www.antlr.org/mailman/listinfo/antlr-interest
>Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>
>
>

From brsmoorthy at gmail.com  Mon Jun 11 20:13:40 2012
From: brsmoorthy at gmail.com (sathya moorthy)
Date: Tue, 12 Jun 2012 08:43:40 +0530
Subject: [antlr-interest] Java API for checking ambiguity in grammars
 using ANLTR
In-Reply-To: <1339406629.16995.YahooMailNeo@web125506.mail.ne1.yahoo.com>
References: <CAN5X3_58JT2th78yA5FN8VUomJtXi_-nhx60BiN=Mvsxd7hUgg@mail.gmail.com>
	<CAN5X3_6r_LRhesQ046L-P=ozQ4OLp5TK4+MxjHJ-6TvL3ey8ZA@mail.gmail.com>
	<1339406629.16995.YahooMailNeo@web125506.mail.ne1.yahoo.com>
Message-ID: <CAN5X3_4S5j=zmv2BKxmJdhAbXBC5Q5UQOC5GMqu3DO5vE2mWgA@mail.gmail.com>

I want to know whether the grammar is ambiguous by calling some ANTLR API
but I want to know is there such API?
The purpose is not to generate files from the grammar if it is ambiguous.

Antlr generates files even if it is ambiguous(in some cases)

On Mon, Jun 11, 2012 at 2:53 PM, Loring Craymer <lgcraymer at yahoo.com> wrote:

> You want code generated even if the grammar is reported to be ambiguous.
>  ANTLR tells you how it handles ambiguity (some alternatives are disabled);
> if this is not what you want, fix your grammar.
>
> --Loring
>
>
>   ------------------------------
> *From:* sathya moorthy <brsmoorthy at gmail.com>
> *To:* antlr-interest at antlr.org
> *Sent:* Monday, June 11, 2012 1:54 AM
> *Subject:* Re: [antlr-interest] Java API for checking ambiguity in
> grammars using ANLTR
>
> Guys any help would be great
> thanks
> Sathya
>
> On Sat, Jun 9, 2012 at 1:40 PM, sathya moorthy <brsmoorthy at gmail.com>
> wrote:
>
> > Hi,
> >
> > When i use ANTLR IDE, it suggests that the grammar is ambiguous but still
> > i am able to generate code using that grammar.
> > Is there a specific API in ANTLR which will tell whether the grammar is
> > ambiguous?
> > If the grammar is ambiguous i dont want to generate the code for that
> > specific file.
> >
> > Regards,
> > Sathya
> >
> >
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>
>
>

From stephen at perceptisys.co.uk  Tue Jun 12 00:15:19 2012
From: stephen at perceptisys.co.uk (Stephen Gaito)
Date: Tue, 12 Jun 2012 08:15:19 +0100
Subject: [antlr-interest] Java API for checking ambiguity in grammars
 using ANLTR
In-Reply-To: <CAN5X3_4S5j=zmv2BKxmJdhAbXBC5Q5UQOC5GMqu3DO5vE2mWgA@mail.gmail.com>
References: <CAN5X3_58JT2th78yA5FN8VUomJtXi_-nhx60BiN=Mvsxd7hUgg@mail.gmail.com>
	<CAN5X3_6r_LRhesQ046L-P=ozQ4OLp5TK4+MxjHJ-6TvL3ey8ZA@mail.gmail.com>
	<1339406629.16995.YahooMailNeo@web125506.mail.ne1.yahoo.com>
	<CAN5X3_4S5j=zmv2BKxmJdhAbXBC5Q5UQOC5GMqu3DO5vE2mWgA@mail.gmail.com>
Message-ID: <4FD6EC87.7070300@perceptisys.co.uk>

Sathay,

An interesting puzzle ;-)

So AntlrWorks detects ambiguous grammars in the analyze method in the
> org/antlr/works/grammar/antlr/ANTLRGrammarEngineImpl.java
class. (see:
> https://github.com/antlr/antlrworks/blob/master/src/org/antlr/works/grammar/antlr/ANTLRGrammarEngineImpl.java
 and search for "analyze" ).

It does this by setting an error listener to catch all errors coming
from the ANTLR tool's compilation of the grammar. Essentially across the
following code:
> Grammar g = getDefaultGrammar();
> ...
> List rules = g.checkAllRulesForLeftRecursion();
> ...
> if ( g.nfa==null ) {
>   g.composite.createNFAs();
> }
> g.createLookaheadDFAs();
> if(engine.isCombinedGrammar()) {
>   // If the grammar is combined, analyze also the lexer
>   if(lexerGrammar != null) {
>     lexerGrammar.composite.createNFAs();
>     lexerGrammar.createLookaheadDFAs();
>   }
> }
AntlrWorks reports the ambiguous grammar messages by looking for the
following messages/exceptions which have been caught and stored in a
list by the ErrorListener:
> private void buildError(Object o) {
>   if(o instanceof *GrammarUnreachableAltsMessage*)
>    
> errors.add(buildUnreachableAltsError((GrammarUnreachableAltsMessage)o));
>   else if(o instanceof *GrammarNonDeterminismMessage*)
>     
> errors.add(buildNonDeterministicError((GrammarNonDeterminismMessage)o));
>   else if(o instanceof *NonRegularDecisionMessage*)
>     
> errors.add(buildNonRegularDecisionError((NonRegularDecisionMessage)o));
> }
*SO....*

If you wanted to programatically check for ambiguous grammars, you could
simulate the code in this ANTLRGrammarEngineImpl class in a try { }
"block" and catch the above messages.

You could also infer this on the command line by looking at the output
of the antlr -Xdfa command.... but this is rather harder as there is no
/*explicit*/ statement that the grammar is ambiguous....

I hope this helps!

Regards,
Stephen Gaito

On 12/06/12 04:13, sathya moorthy wrote:
> I want to know whether the grammar is ambiguous by calling some ANTLR API
> but I want to know is there such API?
> The purpose is not to generate files from the grammar if it is ambiguous.
>
> Antlr generates files even if it is ambiguous(in some cases)
>
> On Mon, Jun 11, 2012 at 2:53 PM, Loring Craymer <lgcraymer at yahoo.com> wrote:
>
>> You want code generated even if the grammar is reported to be ambiguous.
>>  ANTLR tells you how it handles ambiguity (some alternatives are disabled);
>> if this is not what you want, fix your grammar.
>>
>> --Loring
>>
>>
>>   ------------------------------
>> *From:* sathya moorthy <brsmoorthy at gmail.com>
>> *To:* antlr-interest at antlr.org
>> *Sent:* Monday, June 11, 2012 1:54 AM
>> *Subject:* Re: [antlr-interest] Java API for checking ambiguity in
>> grammars using ANLTR
>>
>> Guys any help would be great
>> thanks
>> Sathya
>>
>> On Sat, Jun 9, 2012 at 1:40 PM, sathya moorthy <brsmoorthy at gmail.com>
>> wrote:
>>
>>> Hi,
>>>
>>> When i use ANTLR IDE, it suggests that the grammar is ambiguous but still
>>> i am able to generate code using that grammar.
>>> Is there a specific API in ANTLR which will tell whether the grammar is
>>> ambiguous?
>>> If the grammar is ambiguous i dont want to generate the code for that
>>> specific file.
>>>
>>> Regards,
>>> Sathya
>>>
>>>
>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>> Unsubscribe:
>> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>>
>>
>>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address

From lgcraymer at yahoo.com  Tue Jun 12 00:30:06 2012
From: lgcraymer at yahoo.com (Loring Craymer)
Date: Tue, 12 Jun 2012 00:30:06 -0700 (PDT)
Subject: [antlr-interest] Java API for checking ambiguity in grammars
	using ANLTR
In-Reply-To: <CAN5X3_4S5j=zmv2BKxmJdhAbXBC5Q5UQOC5GMqu3DO5vE2mWgA@mail.gmail.com>
References: <CAN5X3_58JT2th78yA5FN8VUomJtXi_-nhx60BiN=Mvsxd7hUgg@mail.gmail.com>
	<CAN5X3_6r_LRhesQ046L-P=ozQ4OLp5TK4+MxjHJ-6TvL3ey8ZA@mail.gmail.com>
	<1339406629.16995.YahooMailNeo@web125506.mail.ne1.yahoo.com>
	<CAN5X3_4S5j=zmv2BKxmJdhAbXBC5Q5UQOC5GMqu3DO5vE2mWgA@mail.gmail.com>
Message-ID: <1339486206.81846.YahooMailNeo@web125505.mail.ne1.yahoo.com>

My apologies, then. ?You are not interested in working grammars, only that subset for which ANTLR reports no ambiguities; I misunderstood.

Most large ANTLR grammars have ambiguities that ANTLR resolves by order precedence; you have to verify that the ambiguities are resolved correctly (that alternatives are ordered correctly). ?Eliminating ambiguities from your grammars is sometimes a quixotic quest.

--Loring



>________________________________
> From: sathya moorthy <brsmoorthy at gmail.com>
>To: Loring Craymer <lgcraymer at yahoo.com> 
>Cc: "antlr-interest at antlr.org" <antlr-interest at antlr.org> 
>Sent: Monday, June 11, 2012 8:13 PM
>Subject: Re: [antlr-interest] Java API for checking ambiguity in grammars using ANLTR
> 
>
>I want to know whether the grammar is ambiguous by calling some ANTLR API but I want to know is there such API?
>The purpose is not to generate files from the grammar if it is ambiguous.
>
>
>Antlr generates files even if it is ambiguous(in some cases)
>
>
>On Mon, Jun 11, 2012 at 2:53 PM, Loring Craymer <lgcraymer at yahoo.com> wrote:
>
>You want code generated even if the grammar is reported to be ambiguous. ?ANTLR tells you how it handles ambiguity (some alternatives are disabled); if this is not what you want, fix your grammar.
>>
>>
>>--Loring
>>
>>
>>
>>
>>
>>>________________________________
>>> From: sathya moorthy <brsmoorthy at gmail.com>
>>>To: antlr-interest at antlr.org 
>>>Sent: Monday, June 11, 2012 1:54 AM
>>>Subject: Re: [antlr-interest] Java API for checking ambiguity in grammars using ANLTR
>>> 
>>>
>>>Guys any help would be great
>>>thanks
>>>Sathya
>>>
>>>On Sat, Jun 9, 2012 at 1:40 PM, sathya moorthy <brsmoorthy at gmail.com> wrote:
>>>
>>>> Hi,
>>>>
>>>> When i use ANTLR IDE, it suggests that the grammar is ambiguous but still
>>>> i am able to generate code using that grammar.
>>>> Is there a specific API in ANTLR which will tell whether the grammar is
>>>> ambiguous?
>>>> If the grammar is ambiguous i dont want to generate the code for that
>>>> specific file.
>>>>
>>>> Regards,
>>>> Sathya
>>>>
>>>>
>>>
>>>List: http://www.antlr.org/mailman/listinfo/antlr-interest
>>>Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>>>
>>>
>>>
>
>
>

From stephen at perceptisys.co.uk  Tue Jun 12 01:21:49 2012
From: stephen at perceptisys.co.uk (Stephen Gaito)
Date: Tue, 12 Jun 2012 09:21:49 +0100
Subject: [antlr-interest] PS: Re: Java API for checking ambiguity in
 grammars using ANLTR
In-Reply-To: <4FD6EC87.7070300@perceptisys.co.uk>
References: <CAN5X3_58JT2th78yA5FN8VUomJtXi_-nhx60BiN=Mvsxd7hUgg@mail.gmail.com>
	<CAN5X3_6r_LRhesQ046L-P=ozQ4OLp5TK4+MxjHJ-6TvL3ey8ZA@mail.gmail.com>
	<1339406629.16995.YahooMailNeo@web125506.mail.ne1.yahoo.com>
	<CAN5X3_4S5j=zmv2BKxmJdhAbXBC5Q5UQOC5GMqu3DO5vE2mWgA@mail.gmail.com>
	<4FD6EC87.7070300@perceptisys.co.uk>
Message-ID: <4FD6FC1D.8070201@perceptisys.co.uk>

Sathay,

I forgot to mention that all of the important code for your actual
programmatic use is located in the org.antlr.tool package... to start
tracing through it see:
> https://github.com/antlr/antlr3/blob/master/tool/src/main/java/org/antlr/tool/Grammar.java

Again I hope this helps!

Regards,
Stephen Gaito


On 12/06/12 08:15, Stephen Gaito wrote:
> Sathay,
>
> An interesting puzzle ;-)
>
> So AntlrWorks detects ambiguous grammars in the analyze method in the
>> org/antlr/works/grammar/antlr/ANTLRGrammarEngineImpl.java
> class. (see:
>> https://github.com/antlr/antlrworks/blob/master/src/org/antlr/works/grammar/antlr/ANTLRGrammarEngineImpl.java
>  and search for "analyze" ).
>
> It does this by setting an error listener to catch all errors coming
> from the ANTLR tool's compilation of the grammar. Essentially across the
> following code:
>> Grammar g = getDefaultGrammar();
>> ...
>> List rules = g.checkAllRulesForLeftRecursion();
>> ...
>> if ( g.nfa==null ) {
>>   g.composite.createNFAs();
>> }
>> g.createLookaheadDFAs();
>> if(engine.isCombinedGrammar()) {
>>   // If the grammar is combined, analyze also the lexer
>>   if(lexerGrammar != null) {
>>     lexerGrammar.composite.createNFAs();
>>     lexerGrammar.createLookaheadDFAs();
>>   }
>> }
> AntlrWorks reports the ambiguous grammar messages by looking for the
> following messages/exceptions which have been caught and stored in a
> list by the ErrorListener:
>> private void buildError(Object o) {
>>   if(o instanceof *GrammarUnreachableAltsMessage*)
>>    
>> errors.add(buildUnreachableAltsError((GrammarUnreachableAltsMessage)o));
>>   else if(o instanceof *GrammarNonDeterminismMessage*)
>>     
>> errors.add(buildNonDeterministicError((GrammarNonDeterminismMessage)o));
>>   else if(o instanceof *NonRegularDecisionMessage*)
>>     
>> errors.add(buildNonRegularDecisionError((NonRegularDecisionMessage)o));
>> }
> *SO....*
>
> If you wanted to programatically check for ambiguous grammars, you could
> simulate the code in this ANTLRGrammarEngineImpl class in a try { }
> "block" and catch the above messages.
>
> You could also infer this on the command line by looking at the output
> of the antlr -Xdfa command.... but this is rather harder as there is no
> /*explicit*/ statement that the grammar is ambiguous....
>
> I hope this helps!
>
> Regards,
> Stephen Gaito
>
> On 12/06/12 04:13, sathya moorthy wrote:
>> I want to know whether the grammar is ambiguous by calling some ANTLR API
>> but I want to know is there such API?
>> The purpose is not to generate files from the grammar if it is ambiguous.
>>
>> Antlr generates files even if it is ambiguous(in some cases)
>>
>> On Mon, Jun 11, 2012 at 2:53 PM, Loring Craymer <lgcraymer at yahoo.com> wrote:
>>
>>> You want code generated even if the grammar is reported to be ambiguous.
>>>  ANTLR tells you how it handles ambiguity (some alternatives are disabled);
>>> if this is not what you want, fix your grammar.
>>>
>>> --Loring
>>>
>>>
>>>   ------------------------------
>>> *From:* sathya moorthy <brsmoorthy at gmail.com>
>>> *To:* antlr-interest at antlr.org
>>> *Sent:* Monday, June 11, 2012 1:54 AM
>>> *Subject:* Re: [antlr-interest] Java API for checking ambiguity in
>>> grammars using ANLTR
>>>
>>> Guys any help would be great
>>> thanks
>>> Sathya
>>>
>>> On Sat, Jun 9, 2012 at 1:40 PM, sathya moorthy <brsmoorthy at gmail.com>
>>> wrote:
>>>
>>>> Hi,
>>>>
>>>> When i use ANTLR IDE, it suggests that the grammar is ambiguous but still
>>>> i am able to generate code using that grammar.
>>>> Is there a specific API in ANTLR which will tell whether the grammar is
>>>> ambiguous?
>>>> If the grammar is ambiguous i dont want to generate the code for that
>>>> specific file.
>>>>
>>>> Regards,
>>>> Sathya
>>>>
>>>>
>>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>>> Unsubscribe:
>>> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>>>
>>>
>>>
>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address

From brsmoorthy at gmail.com  Tue Jun 12 04:04:59 2012
From: brsmoorthy at gmail.com (sathya moorthy)
Date: Tue, 12 Jun 2012 16:34:59 +0530
Subject: [antlr-interest] Java API for checking ambiguity in grammars
 using ANLTR
In-Reply-To: <4FD6EC87.7070300@perceptisys.co.uk>
References: <CAN5X3_58JT2th78yA5FN8VUomJtXi_-nhx60BiN=Mvsxd7hUgg@mail.gmail.com>
	<CAN5X3_6r_LRhesQ046L-P=ozQ4OLp5TK4+MxjHJ-6TvL3ey8ZA@mail.gmail.com>
	<1339406629.16995.YahooMailNeo@web125506.mail.ne1.yahoo.com>
	<CAN5X3_4S5j=zmv2BKxmJdhAbXBC5Q5UQOC5GMqu3DO5vE2mWgA@mail.gmail.com>
	<4FD6EC87.7070300@perceptisys.co.uk>
Message-ID: <CAN5X3_4Z4sdyddk2tBgbEDFVgvVr4zQSDtH=EuRBv7ySJ9STcQ@mail.gmail.com>

Thanks Stephen
Let me try with your suggestion and let you know.

--Sathya

On Tue, Jun 12, 2012 at 12:45 PM, Stephen Gaito
<stephen at perceptisys.co.uk>wrote:

> Sathay,
>
> An interesting puzzle ;-)
>
> So AntlrWorks detects ambiguous grammars in the analyze method in the
> > org/antlr/works/grammar/antlr/ANTLRGrammarEngineImpl.java
> class. (see:
> >
> https://github.com/antlr/antlrworks/blob/master/src/org/antlr/works/grammar/antlr/ANTLRGrammarEngineImpl.java
>  and search for "analyze" ).
>
> It does this by setting an error listener to catch all errors coming
> from the ANTLR tool's compilation of the grammar. Essentially across the
> following code:
> > Grammar g = getDefaultGrammar();
> > ...
> > List rules = g.checkAllRulesForLeftRecursion();
> > ...
> > if ( g.nfa==null ) {
> >   g.composite.createNFAs();
> > }
> > g.createLookaheadDFAs();
> > if(engine.isCombinedGrammar()) {
> >   // If the grammar is combined, analyze also the lexer
> >   if(lexerGrammar != null) {
> >     lexerGrammar.composite.createNFAs();
> >     lexerGrammar.createLookaheadDFAs();
> >   }
> > }
> AntlrWorks reports the ambiguous grammar messages by looking for the
> following messages/exceptions which have been caught and stored in a
> list by the ErrorListener:
> > private void buildError(Object o) {
> >   if(o instanceof *GrammarUnreachableAltsMessage*)
> >
> > errors.add(buildUnreachableAltsError((GrammarUnreachableAltsMessage)o));
> >   else if(o instanceof *GrammarNonDeterminismMessage*)
> >
> > errors.add(buildNonDeterministicError((GrammarNonDeterminismMessage)o));
> >   else if(o instanceof *NonRegularDecisionMessage*)
> >
> > errors.add(buildNonRegularDecisionError((NonRegularDecisionMessage)o));
> > }
> *SO....*
>
> If you wanted to programatically check for ambiguous grammars, you could
> simulate the code in this ANTLRGrammarEngineImpl class in a try { }
> "block" and catch the above messages.
>
> You could also infer this on the command line by looking at the output
> of the antlr -Xdfa command.... but this is rather harder as there is no
> /*explicit*/ statement that the grammar is ambiguous....
>
> I hope this helps!
>
> Regards,
> Stephen Gaito
>
> On 12/06/12 04:13, sathya moorthy wrote:
> > I want to know whether the grammar is ambiguous by calling some ANTLR API
> > but I want to know is there such API?
> > The purpose is not to generate files from the grammar if it is ambiguous.
> >
> > Antlr generates files even if it is ambiguous(in some cases)
> >
> > On Mon, Jun 11, 2012 at 2:53 PM, Loring Craymer <lgcraymer at yahoo.com>
> wrote:
> >
> >> You want code generated even if the grammar is reported to be ambiguous.
> >>  ANTLR tells you how it handles ambiguity (some alternatives are
> disabled);
> >> if this is not what you want, fix your grammar.
> >>
> >> --Loring
> >>
> >>
> >>   ------------------------------
> >> *From:* sathya moorthy <brsmoorthy at gmail.com>
> >> *To:* antlr-interest at antlr.org
> >> *Sent:* Monday, June 11, 2012 1:54 AM
> >> *Subject:* Re: [antlr-interest] Java API for checking ambiguity in
> >> grammars using ANLTR
> >>
> >> Guys any help would be great
> >> thanks
> >> Sathya
> >>
> >> On Sat, Jun 9, 2012 at 1:40 PM, sathya moorthy <brsmoorthy at gmail.com>
> >> wrote:
> >>
> >>> Hi,
> >>>
> >>> When i use ANTLR IDE, it suggests that the grammar is ambiguous but
> still
> >>> i am able to generate code using that grammar.
> >>> Is there a specific API in ANTLR which will tell whether the grammar is
> >>> ambiguous?
> >>> If the grammar is ambiguous i dont want to generate the code for that
> >>> specific file.
> >>>
> >>> Regards,
> >>> Sathya
> >>>
> >>>
> >> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> >> Unsubscribe:
> >> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
> >>
> >>
> >>
> > List: http://www.antlr.org/mailman/listinfo/antlr-interest
> > Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>

From richardlkenyon at gmail.com  Tue Jun 12 09:18:04 2012
From: richardlkenyon at gmail.com (Richard Kenyon)
Date: Tue, 12 Jun 2012 17:18:04 +0100
Subject: [antlr-interest] AST rewrite query
Message-ID: <CAKveRs+-CLXcMdnz=dBhQHSDgBUAgBeCTERiUC506xaEErjZPQ@mail.gmail.com>

Hi all,

I have a rule:

exp	:	term ((PLUS^ | MINUS^) term)*;

My current AST would look something like, for example,

(PLUS (term) (MINUS (term) (term)))

I would prefer to have something like

(EXP (PLUS (term) (EXP (MINUS (term) (term)))))

Essentially I want to make the EXP token the parent of any expression,
I've tried a few different approaches, but not work fully and now I'm
at a dead end. :(

From jbb at acm.org  Tue Jun 12 09:54:56 2012
From: jbb at acm.org (John B. Brodie)
Date: Tue, 12 Jun 2012 12:54:56 -0400
Subject: [antlr-interest] AST rewrite query
In-Reply-To: <CAKveRs+-CLXcMdnz=dBhQHSDgBUAgBeCTERiUC506xaEErjZPQ@mail.gmail.com>
References: <CAKveRs+-CLXcMdnz=dBhQHSDgBUAgBeCTERiUC506xaEErjZPQ@mail.gmail.com>
Message-ID: <4FD77460.9080707@acm.org>

Greetings!


On 06/12/2012 12:18 PM, Richard Kenyon wrote:
> Hi all,
>
> I have a rule:
>
> exp	:	term ((PLUS^ | MINUS^) term)*;

Just off the top of my head, untested....

exp : exp_helper -> ^(EXP exp_helper) ;

exp_helper :	term ((PLUS^ | MINUS^) term)*;


assuming the EXP is defined in your tokens{...} section

> My current AST would look something like, for example,
>
> (PLUS (term) (MINUS (term) (term)))
>
> I would prefer to have something like
>
> (EXP (PLUS (term) (EXP (MINUS (term) (term)))))
>
> Essentially I want to make the EXP token the parent of any expression,
> I've tried a few different approaches, but not work fully and now I'm
> at a dead end. :(
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address


From bkiers at gmail.com  Tue Jun 12 11:01:40 2012
From: bkiers at gmail.com (Bart Kiers)
Date: Tue, 12 Jun 2012 20:01:40 +0200
Subject: [antlr-interest] AST rewrite query
In-Reply-To: <4FD77460.9080707@acm.org>
References: <CAKveRs+-CLXcMdnz=dBhQHSDgBUAgBeCTERiUC506xaEErjZPQ@mail.gmail.com>
	<4FD77460.9080707@acm.org>
Message-ID: <CAOrgODZHTnHJM83eZZVSxpcn+KMm0v+KctuaZYvPnzM64FqGoA@mail.gmail.com>

Hi John, Richard,

On Tue, Jun 12, 2012 at 6:54 PM, John B. Brodie <jbb at acm.org> wrote:

>
> Just off the top of my head, untested....
>
> exp : exp_helper -> ^(EXP exp_helper) ;
>
> exp_helper :    term ((PLUS^ | MINUS^) term)*;
>

For an expression like 1+2-3, the following AST would be created:

    (EXP (PLUS (term) (MINUS (term) (term))))

(note the missing EXP root above MINUS)

I guess it would need to look like this:

exp : (term -> term) ( PLUS t=term  -> ^(EXP ^(PLUS $exp $t))
                     | MINUS t=term -> ^(EXP ^(MINUS $exp $t))
                     )*;

Regards,

Bart.

From remi.marechal at gmail.com  Tue Jun 12 13:10:35 2012
From: remi.marechal at gmail.com (=?ISO-8859-1?Q?R=E9mi_Mar=E9chal?=)
Date: Tue, 12 Jun 2012 22:10:35 +0200
Subject: [antlr-interest] grammar for a template library like underscore.js
Message-ID: <CAEP+w3iuU0VjSBGZg+Rb+RRhTxUbRs4WngDvt0aVD2hS5cMnVA@mail.gmail.com>

Hi

i know StringTemplate is a powerful template library but i want write my own.

i want a grammar for a template library like underscore.js style :


some text
<% some.code() %>
some other text <%= some.obj.property %> and other and other....


inspirated by xml parser tutorial we found at
http://www.antlr.org/wiki/display/ANTLR3/Parsing+XML

the difference with xml is that

my tags start with two character and not one

and my problem come when i want to define CONTENT in lexer (
equivalent to CDATA in tutorial )


in xml tutorial ~'<' work but in my case ~'<%' don't work .

a solution exists ?

here, piece of my lexer and parser


lexer grammar TemplateLexer;

@members {
boolean tagMode = false;
}

TAG_START : '<%' { tagMode = true; } ;
TAG_END :  { tagMode }?=> '%>'  { tagMode = true; } ;
CONTENT : { !tagMode }?=> ( ~'<%' )* ;


parser grammar TemplateParser;

options { output=AST; }

template : ( content | tag )* ;

tag : TAG_START script  TAG_END ;

script : ........ ;

From richardlkenyon at gmail.com  Tue Jun 12 14:06:37 2012
From: richardlkenyon at gmail.com (Richard Kenyon)
Date: Tue, 12 Jun 2012 22:06:37 +0100
Subject: [antlr-interest] AST rewrite query
In-Reply-To: <CAOrgODZHTnHJM83eZZVSxpcn+KMm0v+KctuaZYvPnzM64FqGoA@mail.gmail.com>
References: <CAKveRs+-CLXcMdnz=dBhQHSDgBUAgBeCTERiUC506xaEErjZPQ@mail.gmail.com>
	<4FD77460.9080707@acm.org>
	<CAOrgODZHTnHJM83eZZVSxpcn+KMm0v+KctuaZYvPnzM64FqGoA@mail.gmail.com>
Message-ID: <CAKveRsJbb=cG1+QQ-NuPytbWyZ5r9gd_P-Vpss9UbHMKu2ar5A@mail.gmail.com>

On 12 June 2012 19:01, Bart Kiers <bkiers at gmail.com> wrote:
> Hi John, Richard,
>
> On Tue, Jun 12, 2012 at 6:54 PM, John B. Brodie <jbb at acm.org> wrote:
>>
>>
>> Just off the top of my head, untested....
>>
>> exp : exp_helper -> ^(EXP exp_helper) ;
>>
>> exp_helper : ? ?term ((PLUS^ | MINUS^) term)*;
>
>
> For an expression like 1+2-3, the following AST would be created:
>
> ? ? (EXP (PLUS (term) (MINUS (term) (term))))
>
> (note the missing?EXP root above MINUS)
>
> I guess it would need to look like this:
>
> exp : (term -> term) ( PLUS t=term ?-> ^(EXP ^(PLUS $exp $t))
> ? ? ? ? ? ? ? ? ? ? ?| MINUS t=term -> ^(EXP ^(MINUS $exp $t))
> ? ? ? ? ? ? ? ? ? ? ?)*;
>
> Regards,
>
> Bart.

Hi John, Bart,

Both solutions are good.

Though Bart's solution happens to be closer to what I was looking for.
It's great, I don't think I have understood it yet though.

Thanks for the help,

Richard

From gebhardt-u at gmx.de  Tue Jun 12 14:09:32 2012
From: gebhardt-u at gmx.de (Uwe Gebhardt)
Date: Tue, 12 Jun 2012 23:09:32 +0200
Subject: [antlr-interest] antlrworks - has it an internal antlr inside?
Message-ID: <4FD7B00C.5050208@gmx.de>

Hi,

I am trying to add a new target language to antlr and follow the steps 
outlined in the wiki.
http://www.antlr.org/wiki/display/ANTLR3/How+to+build+an+ANTLR+code+generation+target

The wiki suggests to modify the new language template in place.

I have installed antlr, have created the folder sructure and a *.st g file.

If I call antlr from the command line for a simple grammar, I see, that 
the new language gets
recognized,  and that modifications on the target language template have 
an effect.

I also use antlrworks, which makes the stringtemplate easier to understand.

But when I try to use the "Generate Code" option in antlrworks for the 
test grammar, I get error
messages, saying, that the new language file is not found.

My question is: Has antlrworks an antlr inside, i.e. the antlr I am 
calling from the command
line is different antlr, than the   one antlrworks is using internally?

With kind regards
Uwe Gebhardt



From RBROWN at allstate.com  Tue Jun 12 15:20:36 2012
From: RBROWN at allstate.com (Brown, Rick)
Date: Tue, 12 Jun 2012 17:20:36 -0500
Subject: [antlr-interest] Oracle SQL Parser
Message-ID: <715306A1C94B734C9489B407899C45B303402D50@a0775-xpo0001-s.ad.allstate.com>

I am trying to generate an Oracle SQL parser, and came across a grammar
at http://www.antlr.org/grammar/1062280680642/MS_SQL_SELECT.html.  This
seems to work well, except that I am having trouble getting it to
properly recognize single-line comments that begin with a double dash
('--') or double-slash ('//').  Comments enclosed in /* */ pairs work
fine.  I am no grammar expert, but the problem seems to be that the
comment is not being ended at the end of a line; instead, it seems to
consider everything that follows, the entire rest of the file, as part
of the comment.  Do you think this may have something to do with the
'greedy' option?  If so, how would I rewrite the definition?

For reference, here is the comment definition:

Comment   : '--' ~('\n'|'\r')* '\r'? '\n' { $channel=HIDDEN; }   | '//'
~('\n'|'\r')* '\r'? '\n' { $channel=HIDDEN; }   | '/*' ( options
{greedy=false;} : . )* '*/' { $channel=HIDDEN; }   ; 

Thanks for your help!



From v-scobis at microsoft.com  Tue Jun 12 18:02:58 2012
From: v-scobis at microsoft.com (Scobie Smith (Insight Global))
Date: Wed, 13 Jun 2012 01:02:58 +0000
Subject: [antlr-interest] wanted: multiple result ASTs
In-Reply-To: <CAN45N11+B+ZrygvOLfK-iKPS3KXkRBu145yhuRZE9cWHWOquWQ@mail.gmail.com>
References: <FA21EA835C1467498B3E0B904C9CF2020E6CB4C5@TK5EX14MBXC113.redmond.corp.microsoft.com>
	<CAN45N111TTiYXo=kOVV2_D8dQrHtg0t6fLFw6AFJ-r=AFi7Hxg@mail.gmail.com>
	<CAN45N11+B+ZrygvOLfK-iKPS3KXkRBu145yhuRZE9cWHWOquWQ@mail.gmail.com>
Message-ID: <FA21EA835C1467498B3E0B904C9CF2020F078E4A@TK5EX14MBXC283.redmond.corp.microsoft.com>

Thanks, Eric. Prolog is certainly an interesting option, but the idea I have in mind would work well (in principle) with the non-deterministic sort of parser. I would have to make a major reorientation in architecture with Prolog. But that book looks interesting too. I have been reading Levesque's book on Knowledge Representation, which is also a good one.

From: Eric [mailto:researcher0x00 at gmail.com]
Sent: Wednesday, June 06, 2012 6:43 AM
To: Scobie Smith (Insight Global)
Cc: antlr-interest at antlr.org
Subject: Re: [antlr-interest] wanted: multiple result ASTs

Hi Scobie,

Since I often come across the answer to your question and just came across it again, this time as a good example in a new book, I thought I would share it here.

In "Thinking as Computation: A First Course" by Hector J. Levesque
http://www.amazon.com/Thinking-Computation-Hector-J-Levesque/dp/0262016990

Using Amazon's Look Inside feature
http://www.amazon.com/Thinking-Computation-Hector-J-Levesque/dp/0262016990/ref=zg_bs_3987_1#reader_0262016990

Take a look at Figure 8.3 on page 158.

Eric
On Wed, May 23, 2012 at 7:06 AM, Eric <researcher0x00 at gmail.com<mailto:researcher0x00 at gmail.com>> wrote:
Hi Scobie,

I have never written a parser for natural language yet, but from working with Artificial Intelligence and PROLOG, that is where I would focus my search. In particular, PROLOG will generate multipule results for a given query. So if the input is ambiguios, there would be multiple ways to match against the rules, and the results would be each way that the PROLOG program matched the rules against the input.

Hope that helps,
Eric

On Tue, May 22, 2012 at 7:59 PM, Scobie Smith (Insight Global) <v-scobis at microsoft.com<mailto:v-scobis at microsoft.com>> wrote:
I'm fairly new to ANTLR; please bear with me if this has been asked before.

I am looking for a way to have ANTLR generate multiple result trees from my grammar, in order NOT to resolve ambiguity. Suppose I have a grammar that is "incomplete" or ambiguous, in that for some input text, there can be more than one "valid" way of parsing the input. (This is particularly useful in natural language parsing.) What I would like is to have rules that can collect all of these result ASTs-a list of ASTs, not just one AST. At the end of a successful parse run, there would then be a list of trees.

I know this is not a typical need, particularly with formal languages. But I am looking to apply ANTLR for some natural language parsing.

Any tips or pointers will be much appreciated. So far I do not see any easy way of doing this with ANTLR, but maybe there is some way of hacking in actions or the like.

Thanks.
Scobie


List: http://www.antlr.org/mailman/listinfo/antlr-interest
Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address



From mike at 7f.com  Tue Jun 12 18:54:28 2012
From: mike at 7f.com (Michael Roberts)
Date: Tue, 12 Jun 2012 18:54:28 -0700
Subject: [antlr-interest] GLSL 4.X+ grammar?
Message-ID: <CAJ4XrpWYoMASdLi7pmfGcxA3CFo6dWRG6eiYDbqAXzy6SSjbzQ@mail.gmail.com>

I was wondering if anyone already had a GLSL (OpenGL Shading Language)
antlr grammar for a recent version of the GL specification (4.00+).
Google have one for the shader model for WebGL, but that's
the equivalent of OpenGL ES 2.0 (older) - I was looking for a more recent
full OpenGL version.

MR

From jokeserver at gmail.com  Tue Jun 12 20:34:22 2012
From: jokeserver at gmail.com (Benjamin S Wolf)
Date: Tue, 12 Jun 2012 20:34:22 -0700
Subject: [antlr-interest] Exploit ambiguity in tree rewriter
In-Reply-To: <4FD5B3D1.30704@gmail.com>
References: <4FC4A97E.2020009@gmail.com>
	<4FD5B3D1.30704@gmail.com>
Message-ID: <CAN51Nt7r56a2jBm4iPw1Y63u5X7XV-m5cChr8Z+8WWKD-qcp1w@mail.gmail.com>

The best way to accomplish this is likely to be an arbitrary action, eg.:

a : INT -> { new CommonTree(new CommonToken(FLOAT, $INT.text + ".0")) } ;

This takes an INT and returns a Tree with one node, a FLOAT token with
text that is the int plus ".0".

You'll want to make a tree via CommonTree() and add a list of children
that excludes all tokens that have IDENTITY (or add each child if it
doesn't have the identity). This means you'll be looping over all the
nodes in the MULT subtree within the action.

On Mon, Jun 11, 2012 at 2:01 AM, nafur <nafur42 at gmail.com> wrote:
> Hi,
>
> I asked about this ambiguity quite a while ago. Does nobody has any idea
> how to do this?
>
> Gereon
>
> On 05/29/2012 12:48 PM, nafur wrote:
>> Hi,
>>
>> I'm using tree rewriters to manipulate formulas that are represented as
>> ASTs. One operation I'd like to do is: "remove any identity from a
>> multiplication".
>>
>> The replacement rule I'm currently working with is the following:
>>
>> topdown :
>> ? ? ? ^( MULT (before += .)* x=. (after += .)* )
>> ? ? ? { $x.has("IDENTITY") }?
>> ? ? ? -> ^( MULT $before* $after* )
>> ;
>>
>> As you probably see, we have some ambiguity here: before and after can
>> both take arbitrarily many elements. If I take an AST like
>> ^( MULT A I x ), the replacement will not match. printing some debug
>> output reveals, that ANTLR will only check $x.has("IDENTITY"), i.e. will
>> only try to match the last element in a multiplication.
>> (That is actually not a surprise, as ANTLR issues a warning...)
>>
>> Is there any way to resolve this ambiguity in a way, such that I can
>> match all occurrences?
>>
>> Thanks,
>> Gereon
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address

From nafur42 at gmail.com  Tue Jun 12 22:07:56 2012
From: nafur42 at gmail.com (nafur)
Date: Wed, 13 Jun 2012 07:07:56 +0200
Subject: [antlr-interest] Exploit ambiguity in tree rewriter
In-Reply-To: <CAN51Nt7r56a2jBm4iPw1Y63u5X7XV-m5cChr8Z+8WWKD-qcp1w@mail.gmail.com>
References: <4FC4A97E.2020009@gmail.com> <4FD5B3D1.30704@gmail.com>
	<CAN51Nt7r56a2jBm4iPw1Y63u5X7XV-m5cChr8Z+8WWKD-qcp1w@mail.gmail.com>
Message-ID: <4FD8202C.1080300@gmail.com>

Hi,

While I'm not completely sure how this would look like, this would
somehow result in implementing the pattern matching myself, right?
As this example is a very easy one, this is no option for me. Actually,
I'm only using ANTLR because of this pattern matching...

Gereon

On 06/13/2012 05:34 AM, Benjamin S Wolf wrote:
> The best way to accomplish this is likely to be an arbitrary action, eg.:
> 
> a : INT -> { new CommonTree(new CommonToken(FLOAT, $INT.text + ".0")) } ;
> 
> This takes an INT and returns a Tree with one node, a FLOAT token with
> text that is the int plus ".0".
> 
> You'll want to make a tree via CommonTree() and add a list of children
> that excludes all tokens that have IDENTITY (or add each child if it
> doesn't have the identity). This means you'll be looping over all the
> nodes in the MULT subtree within the action.
> 
> On Mon, Jun 11, 2012 at 2:01 AM, nafur <nafur42 at gmail.com> wrote:
>> Hi,
>>
>> I asked about this ambiguity quite a while ago. Does nobody has any idea
>> how to do this?
>>
>> Gereon
>>
>> On 05/29/2012 12:48 PM, nafur wrote:
>>> Hi,
>>>
>>> I'm using tree rewriters to manipulate formulas that are represented as
>>> ASTs. One operation I'd like to do is: "remove any identity from a
>>> multiplication".
>>>
>>> The replacement rule I'm currently working with is the following:
>>>
>>> topdown :
>>>       ^( MULT (before += .)* x=. (after += .)* )
>>>       { $x.has("IDENTITY") }?
>>>       -> ^( MULT $before* $after* )
>>> ;
>>>
>>> As you probably see, we have some ambiguity here: before and after can
>>> both take arbitrarily many elements. If I take an AST like
>>> ^( MULT A I x ), the replacement will not match. printing some debug
>>> output reveals, that ANTLR will only check $x.has("IDENTITY"), i.e. will
>>> only try to match the last element in a multiplication.
>>> (That is actually not a surprise, as ANTLR issues a warning...)
>>>
>>> Is there any way to resolve this ambiguity in a way, such that I can
>>> match all occurrences?
>>>
>>> Thanks,
>>> Gereon
>>
>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address

From sidraakhalid at gmail.com  Tue Jun 12 22:13:44 2012
From: sidraakhalid at gmail.com (Sidra Khalid)
Date: Wed, 13 Jun 2012 10:13:44 +0500
Subject: [antlr-interest] antlrworks - has it an internal antlr inside?
In-Reply-To: <CAMYG882L+3CO_DBRQj6uQ8enMy-_C2CvpgakCL6WPS7jjNHPtw@mail.gmail.com>
References: <4FD7B00C.5050208@gmx.de>
	<CAMYG882L+3CO_DBRQj6uQ8enMy-_C2CvpgakCL6WPS7jjNHPtw@mail.gmail.com>
Message-ID: <CAMYG883=tUHxUB5tCGi4Ny7zoVp0sbNBH83taG385cVGrD0szA@mail.gmail.com>

Uwe ,

Yes, AntlrWorks has antlr inside, the version of antlr dependent  upon
which version of antlrworks you are using. For example , AntlrWorks 1.4.3
has built-in Antlr 3.4 and StringTemplate 3.2.1 and 4.0.4. You can see the
version details in help menu of antlr works.

The first question is which version of antlr you are using  from the
command line and what is the version of AntlrWorks you are using.

So read choose the AntlrWorks carefully.


Thanks,
Sidra


On Wed, Jun 13, 2012 at 2:09 AM, Uwe Gebhardt <gebhardt-u at gmx.de> wrote:

> Hi,
>
> I am trying to add a new target language to antlr and follow the steps
> outlined in the wiki.
>
> http://www.antlr.org/wiki/display/ANTLR3/How+to+build+an+ANTLR+code+generation+target
>
> The wiki suggests to modify the new language template in place.
>
> I have installed antlr, have created the folder sructure and a *.st g file.
>
> If I call antlr from the command line for a simple grammar, I see, that
> the new language gets
> recognized,  and that modifications on the target language template have
> an effect.
>
> I also use antlrworks, which makes the stringtemplate easier to understand.
>
> But when I try to use the "Generate Code" option in antlrworks for the
> test grammar, I get error
> messages, saying, that the new language file is not found.
>
> My question is: Has antlrworks an antlr inside, i.e. the antlr I am
> calling from the command
> line is different antlr, than the   one antlrworks is using internally?
>
> With kind regards
> Uwe Gebhardt
>
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>

From jokeserver at gmail.com  Tue Jun 12 22:35:12 2012
From: jokeserver at gmail.com (Benjamin S Wolf)
Date: Tue, 12 Jun 2012 22:35:12 -0700
Subject: [antlr-interest] Exploit ambiguity in tree rewriter
In-Reply-To: <4FD8202C.1080300@gmail.com>
References: <4FC4A97E.2020009@gmail.com> <4FD5B3D1.30704@gmail.com>
	<CAN51Nt7r56a2jBm4iPw1Y63u5X7XV-m5cChr8Z+8WWKD-qcp1w@mail.gmail.com>
	<4FD8202C.1080300@gmail.com>
Message-ID: <CAN51Nt5HReGK5YdCL8d1h_ovQwaDfxtsuT_PTijV1ReH8bdG+Q@mail.gmail.com>

If I were programming this for a Python target, I'd guess it would
look something like:

topdown : ^( MULT (arg+=.)* )
    -> { filter_out_identities(MULT, $arg) };

with a function filter_out_identities defined in a header somewhere:

def filter_out_identities(node, nodes):
    tree = CommonTree(node)
    tree.addChildren(n for n in nodes if not n.has("IDENTITY"))
    return tree

I'm not sure what you really want to do. You were asking how to remove
all of a token from a list, and you gave an example that indicated you
had a function "has" that would let you check whether a token was an
identity, and you're matching against every token. Sorry if I
misunderstood that.

If you only have one token that could be an identity, then you could
do something like:

topdown : ^( MULT (a+=~IDENTITY)* (IDENTITY* b+=~IDENTITY*)* IDENTITY*
    -> ^( MULT a* b* );

and no actions are required.

You might even be able to do

^( MULT ( IDENTITY | a+=~IDENTITY )* ) -> ^( MULT a* )

This is based on my understanding of parser rules; I'm not sure how
different it would be for tree parser rules.

On Tue, Jun 12, 2012 at 10:07 PM, nafur <nafur42 at gmail.com> wrote:
> Hi,
>
> While I'm not completely sure how this would look like, this would
> somehow result in implementing the pattern matching myself, right?
> As this example is a very easy one, this is no option for me. Actually,
> I'm only using ANTLR because of this pattern matching...
>
> Gereon
>
> On 06/13/2012 05:34 AM, Benjamin S Wolf wrote:
>> The best way to accomplish this is likely to be an arbitrary action, eg.:
>>
>> a : INT -> { new CommonTree(new CommonToken(FLOAT, $INT.text + ".0")) } ;
>>
>> This takes an INT and returns a Tree with one node, a FLOAT token with
>> text that is the int plus ".0".
>>
>> You'll want to make a tree via CommonTree() and add a list of children
>> that excludes all tokens that have IDENTITY (or add each child if it
>> doesn't have the identity). This means you'll be looping over all the
>> nodes in the MULT subtree within the action.
>>
>> On Mon, Jun 11, 2012 at 2:01 AM, nafur <nafur42 at gmail.com> wrote:
>>> Hi,
>>>
>>> I asked about this ambiguity quite a while ago. Does nobody has any idea
>>> how to do this?
>>>
>>> Gereon
>>>
>>> On 05/29/2012 12:48 PM, nafur wrote:
>>>> Hi,
>>>>
>>>> I'm using tree rewriters to manipulate formulas that are represented as
>>>> ASTs. One operation I'd like to do is: "remove any identity from a
>>>> multiplication".
>>>>
>>>> The replacement rule I'm currently working with is the following:
>>>>
>>>> topdown :
>>>> ? ? ? ^( MULT (before += .)* x=. (after += .)* )
>>>> ? ? ? { $x.has("IDENTITY") }?
>>>> ? ? ? -> ^( MULT $before* $after* )
>>>> ;
>>>>
>>>> As you probably see, we have some ambiguity here: before and after can
>>>> both take arbitrarily many elements. If I take an AST like
>>>> ^( MULT A I x ), the replacement will not match. printing some debug
>>>> output reveals, that ANTLR will only check $x.has("IDENTITY"), i.e. will
>>>> only try to match the last element in a multiplication.
>>>> (That is actually not a surprise, as ANTLR issues a warning...)
>>>>
>>>> Is there any way to resolve this ambiguity in a way, such that I can
>>>> match all occurrences?
>>>>
>>>> Thanks,
>>>> Gereon
>>>
>>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>>> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address

From cbodogai at gmail.com  Tue Jun 12 23:49:30 2012
From: cbodogai at gmail.com (Corina Herman)
Date: Wed, 13 Jun 2012 09:49:30 +0300
Subject: [antlr-interest] output unparsed code
Message-ID: <CAFv+3GCC9NKtk5ThaJxvL7dK0uF_2ZX1iuKN=W2ZqW03zteW=g@mail.gmail.com>

Hello everybody!

I'm new to ANTRL and I'm trying to define a grammar for some specific
sentences and outputed as tree in C sharp. My problem is that when the
parser receives a phrase that doesn't fit to any rules I defined it simply
stops, I would like to go further meaning to output the line as it is
without transformation and going to the next sentence in the input.

I tried to add in my grammar at the end something like this, meaning no
matter what else it gets to put an unknown node in the tree but it's not
working.
unknown : .* EOL -> ^(UNKNOWN);

I also tried to figured out (with no succes) a way to complete this task in
generated lexer and parser.

Can you give me a hint or what should I do? Thank you in advance.

Corina Herman

From jimi at temporal-wave.com  Wed Jun 13 01:13:58 2012
From: jimi at temporal-wave.com (Jim Idle)
Date: Wed, 13 Jun 2012 16:13:58 +0800
Subject: [antlr-interest] output unparsed code
In-Reply-To: <CAFv+3GCC9NKtk5ThaJxvL7dK0uF_2ZX1iuKN=W2ZqW03zteW=g@mail.gmail.com>
References: <CAFv+3GCC9NKtk5ThaJxvL7dK0uF_2ZX1iuKN=W2ZqW03zteW=g@mail.gmail.com>
Message-ID: <8e4e940e085301511c7f7481d9919a10@mail.gmail.com>

firstrule: body EOF ;



Will force ANTLR to keep going, but I doubt that you will have much success
with .* EOL as the .* will make any rule with optional trailing tokens
immediately preceding the EOL ambiguous. However, if you put that at the
end, you might make it work given that you are including the EOL



firstrule: body* EOF ;



body

: b1part1 b1part2 b1part3? cleaneol

| b2part1 b2part2 cleaneol

;



cleaneol

: ( t=. {System.out.println($t.text); /* or something */})* EOL

;



Depending on your rules, you might be able to do  (body? cleaneol)* EOF and
take cleaneol out of body.



Jim



-----Original Message-----
From: antlr-interest-bounces at antlr.org [mailto:
antlr-interest-bounces at antlr.org] On Behalf Of Corina Herman
Sent: Wednesday, June 13, 2012 2:50 PM
To: antlr-interest at antlr.org
Subject: [antlr-interest] output unparsed code



Hello everybody!



I'm new to ANTRL and I'm trying to define a grammar for some specific
sentences and outputed as tree in C sharp. My problem is that when the
parser receives a phrase that doesn't fit to any rules I defined it simply
stops, I would like to go further meaning to output the line as it is
without transformation and going to the next sentence in the input.



I tried to add in my grammar at the end something like this, meaning no
matter what else it gets to put an unknown node in the tree but it's not
working.

unknown : .* EOL -> ^(UNKNOWN);



I also tried to figured out (with no succes) a way to complete this task in
generated lexer and parser.



Can you give me a hint or what should I do? Thank you in advance.



Corina Herman



List: http://www.antlr.org/mailman/listinfo/antlr-interest

Unsubscribe:
http://www.antlr.org/mailman/options/antlr-interest/your-email-address

From nafur42 at gmail.com  Wed Jun 13 01:18:00 2012
From: nafur42 at gmail.com (nafur)
Date: Wed, 13 Jun 2012 10:18:00 +0200
Subject: [antlr-interest] Exploit ambiguity in tree rewriter
In-Reply-To: <CAN51Nt5HReGK5YdCL8d1h_ovQwaDfxtsuT_PTijV1ReH8bdG+Q@mail.gmail.com>
References: <4FC4A97E.2020009@gmail.com> <4FD5B3D1.30704@gmail.com>
	<CAN51Nt7r56a2jBm4iPw1Y63u5X7XV-m5cChr8Z+8WWKD-qcp1w@mail.gmail.com>
	<4FD8202C.1080300@gmail.com>
	<CAN51Nt5HReGK5YdCL8d1h_ovQwaDfxtsuT_PTijV1ReH8bdG+Q@mail.gmail.com>
Message-ID: <4FD84CB8.1010101@gmail.com>

Hi,

Ok, I guess I have to somehow redefine the nature of the rewrite rules I
want to use:

My ASTs represent mathematical formulas and .has() checks, if this
symbol has some special mathematical property (like "is identity", "is
symmetric", "is invertible", "is orthogonal", ... I'm working with
matrices).

Thus, this example is really the simplest one. Another example is:

^( MULT (before += .)* x=. ^( POW y=. TRANSPOSE) (after += .)* )
{ $x.equals($y) && $x.has("ORTHOGONAL") }?
-> ^( MULT $before* IDENTITY $after* )

i.e.: replace any Q Q^T by the identity, if Q is orthogonal. Note that
this rule requires a comparison of whole subtrees ($x.equals($y)).

Therefore, filtering single symbols would work for my first example (I
somehow selected a quite bad example). For more complex examples, I
really want to rely on the pattern matching offered by ANTLR.

What I would like: Instead of resolving ambiguity by just choosing a
single possibility, try all of them (what makes more sense for rewrite
rules anyway).

Gereon

On 06/13/2012 07:35 AM, Benjamin S Wolf wrote:
> If I were programming this for a Python target, I'd guess it would
> look something like:
> 
> topdown : ^( MULT (arg+=.)* )
>     -> { filter_out_identities(MULT, $arg) };
> 
> with a function filter_out_identities defined in a header somewhere:
> 
> def filter_out_identities(node, nodes):
>     tree = CommonTree(node)
>     tree.addChildren(n for n in nodes if not n.has("IDENTITY"))
>     return tree
> 
> I'm not sure what you really want to do. You were asking how to remove
> all of a token from a list, and you gave an example that indicated you
> had a function "has" that would let you check whether a token was an
> identity, and you're matching against every token. Sorry if I
> misunderstood that.
> 
> If you only have one token that could be an identity, then you could
> do something like:
> 
> topdown : ^( MULT (a+=~IDENTITY)* (IDENTITY* b+=~IDENTITY*)* IDENTITY*
>     -> ^( MULT a* b* );
> 
> and no actions are required.
> 
> You might even be able to do
> 
> ^( MULT ( IDENTITY | a+=~IDENTITY )* ) -> ^( MULT a* )
> 
> This is based on my understanding of parser rules; I'm not sure how
> different it would be for tree parser rules.
> 
> On Tue, Jun 12, 2012 at 10:07 PM, nafur <nafur42 at gmail.com> wrote:
>> Hi,
>>
>> While I'm not completely sure how this would look like, this would
>> somehow result in implementing the pattern matching myself, right?
>> As this example is a very easy one, this is no option for me. Actually,
>> I'm only using ANTLR because of this pattern matching...
>>
>> Gereon
>>
>> On 06/13/2012 05:34 AM, Benjamin S Wolf wrote:
>>> The best way to accomplish this is likely to be an arbitrary action, eg.:
>>>
>>> a : INT -> { new CommonTree(new CommonToken(FLOAT, $INT.text + ".0")) } ;
>>>
>>> This takes an INT and returns a Tree with one node, a FLOAT token with
>>> text that is the int plus ".0".
>>>
>>> You'll want to make a tree via CommonTree() and add a list of children
>>> that excludes all tokens that have IDENTITY (or add each child if it
>>> doesn't have the identity). This means you'll be looping over all the
>>> nodes in the MULT subtree within the action.
>>>
>>> On Mon, Jun 11, 2012 at 2:01 AM, nafur <nafur42 at gmail.com> wrote:
>>>> Hi,
>>>>
>>>> I asked about this ambiguity quite a while ago. Does nobody has any idea
>>>> how to do this?
>>>>
>>>> Gereon
>>>>
>>>> On 05/29/2012 12:48 PM, nafur wrote:
>>>>> Hi,
>>>>>
>>>>> I'm using tree rewriters to manipulate formulas that are represented as
>>>>> ASTs. One operation I'd like to do is: "remove any identity from a
>>>>> multiplication".
>>>>>
>>>>> The replacement rule I'm currently working with is the following:
>>>>>
>>>>> topdown :
>>>>>       ^( MULT (before += .)* x=. (after += .)* )
>>>>>       { $x.has("IDENTITY") }?
>>>>>       -> ^( MULT $before* $after* )
>>>>> ;
>>>>>
>>>>> As you probably see, we have some ambiguity here: before and after can
>>>>> both take arbitrarily many elements. If I take an AST like
>>>>> ^( MULT A I x ), the replacement will not match. printing some debug
>>>>> output reveals, that ANTLR will only check $x.has("IDENTITY"), i.e. will
>>>>> only try to match the last element in a multiplication.
>>>>> (That is actually not a surprise, as ANTLR issues a warning...)
>>>>>
>>>>> Is there any way to resolve this ambiguity in a way, such that I can
>>>>> match all occurrences?
>>>>>
>>>>> Thanks,
>>>>> Gereon
>>>>
>>>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>>>> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address

From bkiers at gmail.com  Wed Jun 13 01:29:37 2012
From: bkiers at gmail.com (Bart Kiers)
Date: Wed, 13 Jun 2012 10:29:37 +0200
Subject: [antlr-interest] Oracle SQL Parser
In-Reply-To: <715306A1C94B734C9489B407899C45B303402D50@a0775-xpo0001-s.ad.allstate.com>
References: <715306A1C94B734C9489B407899C45B303402D50@a0775-xpo0001-s.ad.allstate.com>
Message-ID: <CAOrgODY+Z1nVRw3OfAsAwnRD+UbMrsm4GrdnmoR6bgEf-U6VXA@mail.gmail.com>

On Wed, Jun 13, 2012 at 12:20 AM, Brown, Rick <RBROWN at allstate.com> wrote:

> ... but the problem seems to be that the
> comment is not being ended at the end of a line; instead, it seems to
> consider everything that follows, the entire rest of the file, as part
> of the comment. ...
>

I don't see anything wrong with the rule. The Comment rule has 3
alternatives:

Comment
  :  '--' ~('\n'|'\r')* '\r'? '\n' { $channel=HIDDEN;
}                         // alternative 1
  |  '//' ~('\n'|'\r')* '\r'? '\n' { $channel=HIDDEN;
}                         // alternative 2
  |  '/*' ( options {greedy=false;} : . )* '*/' { $channel=HIDDEN; }  //
alternative 3
  ;

Alternative 1 and 2 must end with a line break, and alternative 3 must end
with '*/'.

Could you tell how you came to the conclusion that there's a problem with
the rule? Do you have input that gets tokenized incorrectly? If so, could
you send it to the list as well?

Regards,

Bart.

From ibre5041 at ibrezina.net  Wed Jun 13 03:27:04 2012
From: ibre5041 at ibrezina.net (Ivan Brezina)
Date: Wed, 13 Jun 2012 12:27:04 +0200
Subject: [antlr-interest] OT: Re:  Oracle SQL Parser
In-Reply-To: <715306A1C94B734C9489B407899C45B303402D50@a0775-xpo0001-s.ad.allstate.com>
References: <715306A1C94B734C9489B407899C45B303402D50@a0775-xpo0001-s.ad.allstate.com>
Message-ID: <20120613122704.5itn0rn70kgsccss@webmail.kamm.cz>

Quoting "Brown, Rick" <RBROWN at allstate.com>:

> I am trying to generate an Oracle SQL parser, and came across a grammar
> at http://www.antlr.org/grammar/1062280680642/MS_SQL_SELECT.html.  This
> seems to work well, except that I am having trouble getting it to
> properly recognize single-line comments that begin with a double dash
> ('--') or double-slash ('//').  Comments enclosed in /* */ pairs work
> fine.  I am no grammar expert, but the problem seems to be that the
> comment is not being ended at the end of a line; instead, it seems to
> consider everything that follows, the entire rest of the file, as part
> of the comment.  Do you think this may have something to do with the
> 'greedy' option?  If so, how would I rewrite the definition?
>

If you're really looking for Oracle SQL&#8194;parser, maybe you should start
with the "current"&#8194;one.

Look at Alexandre's project:
https://github.com/porcelli/plsql-parser

In the subdirectory tests, you'll find some fancy stuff.

Ivan




----------------------------------------------------------------
This message was sent using IMP, the Internet Messaging Program.


From cbodogai at gmail.com  Wed Jun 13 04:52:40 2012
From: cbodogai at gmail.com (Corina Herman)
Date: Wed, 13 Jun 2012 14:52:40 +0300
Subject: [antlr-interest] output unparsed code
Message-ID: <CAFv+3GDGOcwfiNh4SLim+22nQWtTt4b2+YNHcQ99XEcx6J2zKQ@mail.gmail.com>

Hello

Thank you Jim for your answer. Unfortunally the situation is more complex.
I have embedded rules. Similar to if statement in a common language. The
body of the if statement can contain also other if statements. And I would
like to catch rules nonparsable in every level of this kind of arhitecture.
With .* EOL it works on the first level, but if I try to add this unknown
rule as content of an if statement is not working, I believe it cannot
determine the closing of the if because it was catched by that . operator.
Any ideas?

Corina Herman

From Mark.Gressett at sas.com  Wed Jun 13 12:07:42 2012
From: Mark.Gressett at sas.com (Mark Gressett)
Date: Wed, 13 Jun 2012 19:07:42 +0000
Subject: [antlr-interest] Problem with template rewrite, List return value
Message-ID: <AAE27BAA90501B448B07E07DB873EB6E07E71550@MERCMBX13R.na.SAS.com>

Hi all,

Using ANTLR V3.1, I'm trying to rewrite something like
aFunction(anObject, arg1, arg2, arg3)
to
anObject.aFunction(arg1, arg2, arg3)

My grammar recognizes a function call as
function_call : ID arg_list;

arg_list returns [List listValues]:
'(' vals+=expression? (',' vals+=expression)* ')'{$listValues = $vals;}

I have arg_list return a List so that I can manipulate the list values at the function_call level. expression has no return value.

When I execute the example above, listValues contains 4 nulls, the result of adding expression_return.getTemplate(). expression_return.getTemplate() returns member st, which is never assigned a value, so retains default value, null.

I know there must be a way to return template text for the expressions in the arg list without adding return values throughout the parser. What am I missing?

Thanks,
Mark

From webny23 at gmail.com  Thu Jun 14 01:40:21 2012
From: webny23 at gmail.com (Verny Quartara)
Date: Thu, 14 Jun 2012 10:40:21 +0200
Subject: [antlr-interest] java.util.NoSuchElementException: can't look
 backwards more than one token in this stream
Message-ID: <CAP-ipi4kAxhvigrfsKqrp013MPYKBqUG9tK4XPd=2X8La8h4kw@mail.gmail.com>

Hi everybody,
I'm getting a strange error in my tree grammar.
The AST is correctly generated by the parser.
When I try to walk the tree, I get

java.util.NoSuchElementException: can't look backwards more than one token
in this stream

Before moving into the details of the grammar, can anyone explain me under
which conditions is this exception thrown? Perhaps I can solve it by my own
with some suggestion.

Thank you

Regards

-- 
Verny Quartara

From bkiers at gmail.com  Thu Jun 14 02:17:08 2012
From: bkiers at gmail.com (Bart Kiers)
Date: Thu, 14 Jun 2012 11:17:08 +0200
Subject: [antlr-interest] java.util.NoSuchElementException: can't look
 backwards more than one token in this stream
In-Reply-To: <CAP-ipi4kAxhvigrfsKqrp013MPYKBqUG9tK4XPd=2X8La8h4kw@mail.gmail.com>
References: <CAP-ipi4kAxhvigrfsKqrp013MPYKBqUG9tK4XPd=2X8La8h4kw@mail.gmail.com>
Message-ID: <CAOrgODahsiumZ4Y9rxF-Br0_ven64zqNg7JnnMXVJ9McfAF7OQ@mail.gmail.com>

Hi Verny,

This (usually?) happens when the tree grammar and parser grammar don't
match.

Regards,

Bart.


On Thu, Jun 14, 2012 at 10:40 AM, Verny Quartara <webny23 at gmail.com> wrote:

> Hi everybody,
> I'm getting a strange error in my tree grammar.
> The AST is correctly generated by the parser.
> When I try to walk the tree, I get
>
> java.util.NoSuchElementException: can't look backwards more than one token
> in this stream
>
> Before moving into the details of the grammar, can anyone explain me under
> which conditions is this exception thrown? Perhaps I can solve it by my own
> with some suggestion.
>
> Thank you
>
> Regards
>
> --
> Verny Quartara
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>

From bkiers at gmail.com  Thu Jun 14 02:54:00 2012
From: bkiers at gmail.com (Bart Kiers)
Date: Thu, 14 Jun 2012 11:54:00 +0200
Subject: [antlr-interest] Oracle SQL Parser
In-Reply-To: <715306A1C94B734C9489B407899C45B30340314E@a0775-xpo0001-s.ad.allstate.com>
References: <715306A1C94B734C9489B407899C45B303402D50@a0775-xpo0001-s.ad.allstate.com>
	<CAOrgODY+Z1nVRw3OfAsAwnRD+UbMrsm4GrdnmoR6bgEf-U6VXA@mail.gmail.com>
	<715306A1C94B734C9489B407899C45B30340314E@a0775-xpo0001-s.ad.allstate.com>
Message-ID: <CAOrgODbSDUvMjwUscF+1qgoNnPjBtKybwUW=9dcp_AE-iQgNFw@mail.gmail.com>

Hi Rick,

You can test the fact that the comments work by running the following
grammar through ANTLRWorks' debugger:

grammar T;

parse
 : select EOF
 ;

select
 : Select column=Id From table=Id {System.out.println("column=" +
$column.text + ", table=" + $table.text);}
 ;

Select : 'select';
>From   : 'from';
Id     : ('a'..'z' | 'A'..'Z')+;

Comment
 : '--' ~('\n'|'\r')* '\r'? '\n' { $channel=HIDDEN; }
 | '//' ~('\n'|'\r')* '\r'? '\n' { $channel=HIDDEN; }
 | '/*' ( options {greedy=false;} : . )* '*/' { $channel=HIDDEN; }
 ;

Space
 : (' ' | '\t' | '\r' | '\n')+ {skip();}
 ;

Simply press CTRL+D in ANTLRWorks and use the following input to debug
(also make sure ANTLRWorks starts with the 'parse' rule!):

select
// comment 1
dt
-- comment 2
from
/* comment 3 */
dual

You will then see the following output (you need to select the "output" tab
to see it):

column=dt, table=dual

Regards,

Bart.


On Wed, Jun 13, 2012 at 9:31 PM, Brown, Rick <RBROWN at allstate.com> wrote:

> **
> Bart,
>
> Thanks very much for the reply!  To provide some more context, I am trying
> to parse Oracle SQL files using a combination of PowerShell and a parser
> from a project by MacroScope.  The basic approach I am using is described
> in this article: http://sev17.com/2010/04/parsing-sql-for-table-names/.
>
> The MacroScope parser is based on Anltr3, and the project includes the
> grammar file as well as the generated parser and lexer files.  I
> contacted MacroScope, and they confirmed that they did not include support
> for comments at all in their implementation (it is rather old).  So, I set
> about trying to find a replacement Oracle SQL grammar file that included
> comments, which led me to the file I mentioned in my original post.
>
> I am generating the lexer and parser files using the above grammar, and
> then adding them to the build of the MacroScope parser.  I then use the
> resulting MacroScope classes in a PowerShell script to extract the names
> of the tables and columns in a given sql file.
>
> Here are a few examples of what happens when I use this method for parsing
> a sql file:  The first file looks like this:
>
> select sysdate dt
> /* This is a comment */
>   from dual
>
> Running my PowerShell/MacroScope script, I get the column name as 'dt'
> and the table name as 'dual', which is what I would expect.
>
> If I run the same script using this sql file:
>
> select sysdate dt
> // This is a comment
>   from dual
>
> I get the column name as 'dt', but I do not get any table name.
>
> If I run the script using this sql file:
>
> -- This is a comment
> select sysdate dt from dual
>
> The script generates an error indicating that there is no data to parse.
>
> My assumption is that everything after the start of the comment is being
> included as part of the comment, all the way through the end of the file,
> rather than stopping at the end of the line.  Again, I am not an expert, so
> this is only my assumption based on the behavior I am seeing.  It could
> be that the problem is something else entirely, but it seems odd that the
> multi-line style of comments (/* */) is processed correctly, but the
> single-line style (// or --) is not.
>
> Thanks again for your help!
>
> ~ Rick
>
>  ------------------------------
> *From:* Bart Kiers [mailto:bkiers at gmail.com]
> *Sent:* Wednesday, June 13, 2012 3:30 AM
> *To:* Brown, Rick
> *Cc:* antlr-interest at antlr.org
> *Subject:* Re: [antlr-interest] Oracle SQL Parser
>
>  On Wed, Jun 13, 2012 at 12:20 AM, Brown, Rick <RBROWN at allstate.com>wrote:
>
>> ... but the problem seems to be that the
>> comment is not being ended at the end of a line; instead, it seems to
>> consider everything that follows, the entire rest of the file, as part
>> of the comment. ...
>>
>
> I don't see anything wrong with the rule. The Comment rule has 3
> alternatives:
>
> Comment
>   :  '--' ~('\n'|'\r')* '\r'? '\n' { $channel=HIDDEN;
> }                         // alternative 1
>   |  '//' ~('\n'|'\r')* '\r'? '\n' { $channel=HIDDEN;
> }                         // alternative 2
>   |  '/*' ( options {greedy=false;} : . )* '*/' { $channel=HIDDEN; }  //
> alternative 3
>   ;
>
> Alternative 1 and 2 must end with a line break, and alternative 3 must end
> with '*/'.
>
> Could you tell how you came to the conclusion that there's a problem with
> the rule? Do you have input that gets tokenized incorrectly? If so, could
> you send it to the list as well?
>
> Regards,
>
> Bart.
>

From Stefan.Maetje at esd-electronics.com  Thu Jun 14 03:00:09 2012
From: Stefan.Maetje at esd-electronics.com (=?ISO-8859-1?Q?Stefan_M=E4tje?=)
Date: Thu, 14 Jun 2012 12:00:09 +0200
Subject: [antlr-interest] Exploit ambiguity in tree rewriter
In-Reply-To: <4FD84CB8.1010101@gmail.com>
References: <4FC4A97E.2020009@gmail.com> <4FD5B3D1.30704@gmail.com>
	<CAN51Nt7r56a2jBm4iPw1Y63u5X7XV-m5cChr8Z+8WWKD-qcp1w@mail.gmail.com>
	<4FD8202C.1080300@gmail.com>
	<CAN51Nt5HReGK5YdCL8d1h_ovQwaDfxtsuT_PTijV1ReH8bdG+Q@mail.gmail.com>
	<4FD84CB8.1010101@gmail.com>
Message-ID: <4FD9B629.5000201@esd-electronics.com>

Hi nafur,

from what I've read in this thread till now I got the impression that 
you've structured your AST in a way that counteracts your goals.

I'll try to give a simple example to get us on common ground. I will 
refer here only to simple scalar multiplication with an expression like 
this:

"5 * 3 * 1 * 2 * 4"

As far as I understand from your writings you would build an AST like 
the following from this input

"^(MULT 5 3 1 2 4)

and try to match it with a rule like this

topdown :
     ^( MULT (before += .)* x=. (after += .)* )
         { $x.has("IDENTITY") }?
     ->  ^( MULT $before* $after* )
;

How should ANTLR generated code distribute the tokens from the AST to 
your variables "before", "x" and "after"? You're not giving ANTLR any 
hint about it. I guess you would end up with:
before: "5 3 1 2"
x:      "4"
after:  ""	// empty

And you must to have "x" assigned the "1" to make your code work.

Doing expression evaluation and simplification is done differently with 
ANTLR and leads to ASTs that combine two operands with one operator that 
can then be simplified in a straightforward manner.

A more appropriate AST structure for the before mentioned input would be 
this recursive structure:

^(* ^(* ^(* ^(* 5 3) 1) 2) 4)

In a "pretty printed" style it would appear like this.

^(*
     ^(*
         ^(*
             ^(*
                 5
                 3
             )
             1
         )
         2
     )
     4
)

This way you have only to deal with an operator and two operands in one 
rule. A bare bones example (not working) looks like this:

bottomup:
	expr
	;

expr:
	^(* a=expr b=INT {$b.text()== "1"}?)	->	$a
	^(* a=INT {$a.text()== "1"}? b=expr)	->	$b
	;

This way you can now match special things in the AST and act on them 
testing some properties of the trees. You can see the simplification 
that the result of "expr" is one of the operands if one of the others is 
a literal "1".

For a better explanation and an example look at
http://www.antlr.org/wiki/display/~admin/2008/11/30/Example+tree+rewriting+with+patterns


I hope I did not misunderstand what you want to do.

Stefan


Am 13.06.2012 10:18, schrieb nafur:
> Hi,
>
> Ok, I guess I have to somehow redefine the nature of the rewrite rules I
> want to use:
>
> My ASTs represent mathematical formulas and .has() checks, if this
> symbol has some special mathematical property (like "is identity", "is
> symmetric", "is invertible", "is orthogonal", ... I'm working with
> matrices).
>
> Thus, this example is really the simplest one. Another example is:
>
> ^( MULT (before += .)* x=. ^( POW y=. TRANSPOSE) (after += .)* )
> { $x.equals($y)&&  $x.has("ORTHOGONAL") }?
> ->  ^( MULT $before* IDENTITY $after* )
>
> i.e.: replace any Q Q^T by the identity, if Q is orthogonal. Note that
> this rule requires a comparison of whole subtrees ($x.equals($y)).
>
> Therefore, filtering single symbols would work for my first example (I
> somehow selected a quite bad example). For more complex examples, I
> really want to rely on the pattern matching offered by ANTLR.
>
> What I would like: Instead of resolving ambiguity by just choosing a
> single possibility, try all of them (what makes more sense for rewrite
> rules anyway).
>
> Gereon
>
> On 06/13/2012 07:35 AM, Benjamin S Wolf wrote:
>> If I were programming this for a Python target, I'd guess it would
>> look something like:
>>
>> topdown : ^( MULT (arg+=.)* )
>>      ->  { filter_out_identities(MULT, $arg) };
>>
>> with a function filter_out_identities defined in a header somewhere:
>>
>> def filter_out_identities(node, nodes):
>>      tree = CommonTree(node)
>>      tree.addChildren(n for n in nodes if not n.has("IDENTITY"))
>>      return tree
>>
>> I'm not sure what you really want to do. You were asking how to remove
>> all of a token from a list, and you gave an example that indicated you
>> had a function "has" that would let you check whether a token was an
>> identity, and you're matching against every token. Sorry if I
>> misunderstood that.
>>
>> If you only have one token that could be an identity, then you could
>> do something like:
>>
>> topdown : ^( MULT (a+=~IDENTITY)* (IDENTITY* b+=~IDENTITY*)* IDENTITY*
>>      ->  ^( MULT a* b* );
>>
>> and no actions are required.
>>
>> You might even be able to do
>>
>> ^( MULT ( IDENTITY | a+=~IDENTITY )* ) ->  ^( MULT a* )
>>
>> This is based on my understanding of parser rules; I'm not sure how
>> different it would be for tree parser rules.
>>
>> On Tue, Jun 12, 2012 at 10:07 PM, nafur<nafur42 at gmail.com>  wrote:
>>> Hi,
>>>
>>> While I'm not completely sure how this would look like, this would
>>> somehow result in implementing the pattern matching myself, right?
>>> As this example is a very easy one, this is no option for me. Actually,
>>> I'm only using ANTLR because of this pattern matching...
>>>
>>> Gereon
>>>
>>> On 06/13/2012 05:34 AM, Benjamin S Wolf wrote:
>>>> The best way to accomplish this is likely to be an arbitrary action, eg.:
>>>>
>>>> a : INT ->  { new CommonTree(new CommonToken(FLOAT, $INT.text + ".0")) } ;
>>>>
>>>> This takes an INT and returns a Tree with one node, a FLOAT token with
>>>> text that is the int plus ".0".
>>>>
>>>> You'll want to make a tree via CommonTree() and add a list of children
>>>> that excludes all tokens that have IDENTITY (or add each child if it
>>>> doesn't have the identity). This means you'll be looping over all the
>>>> nodes in the MULT subtree within the action.
>>>>
>>>> On Mon, Jun 11, 2012 at 2:01 AM, nafur<nafur42 at gmail.com>  wrote:
>>>>> Hi,
>>>>>
>>>>> I asked about this ambiguity quite a while ago. Does nobody has any idea
>>>>> how to do this?
>>>>>
>>>>> Gereon
>>>>>
>>>>> On 05/29/2012 12:48 PM, nafur wrote:
>>>>>> Hi,
>>>>>>
>>>>>> I'm using tree rewriters to manipulate formulas that are represented as
>>>>>> ASTs. One operation I'd like to do is: "remove any identity from a
>>>>>> multiplication".
>>>>>>
>>>>>> The replacement rule I'm currently working with is the following:
>>>>>>
>>>>>> topdown :
>>>>>>        ^( MULT (before += .)* x=. (after += .)* )
>>>>>>        { $x.has("IDENTITY") }?
>>>>>>        ->  ^( MULT $before* $after* )
>>>>>> ;
>>>>>>
>>>>>> As you probably see, we have some ambiguity here: before and after can
>>>>>> both take arbitrarily many elements. If I take an AST like
>>>>>> ^( MULT A I x ), the replacement will not match. printing some debug
>>>>>> output reveals, that ANTLR will only check $x.has("IDENTITY"), i.e. will
>>>>>> only try to match the last element in a multiplication.
>>>>>> (That is actually not a surprise, as ANTLR issues a warning...)
>>>>>>
>>>>>> Is there any way to resolve this ambiguity in a way, such that I can
>>>>>> match all occurrences?
>>>>>>
>>>>>> Thanks,
>>>>>> Gereon
>>>>>
>>>>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>>>>> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>

From nafur42 at gmail.com  Thu Jun 14 04:59:43 2012
From: nafur42 at gmail.com (nafur)
Date: Thu, 14 Jun 2012 13:59:43 +0200
Subject: [antlr-interest] Exploit ambiguity in tree rewriter
In-Reply-To: <4FD9B629.5000201@esd-electronics.com>
References: <4FC4A97E.2020009@gmail.com> <4FD5B3D1.30704@gmail.com>
	<CAN51Nt7r56a2jBm4iPw1Y63u5X7XV-m5cChr8Z+8WWKD-qcp1w@mail.gmail.com>
	<4FD8202C.1080300@gmail.com>
	<CAN51Nt5HReGK5YdCL8d1h_ovQwaDfxtsuT_PTijV1ReH8bdG+Q@mail.gmail.com>
	<4FD84CB8.1010101@gmail.com> <4FD9B629.5000201@esd-electronics.com>
Message-ID: <4FD9D22F.2040305@gmail.com>

Hi,

I already thought about this, but this yields new problems. If I build
my ASTs like this, I have to take care of all possible multiplications.

To match A B I have to match ^(* A B), ^(* A ^(* B ...)), ^(* ^(* ... A)
B), ^(* ^(* ... A) ^(* B ... )).

As I will at some point go for rules that match more than two factors,
this does not seem like a real option to me...

Gereon

On 06/14/2012 12:00 PM, Stefan M?tje wrote:
> Hi nafur,
> 
> from what I've read in this thread till now I got the impression that
> you've structured your AST in a way that counteracts your goals.
> 
> I'll try to give a simple example to get us on common ground. I will
> refer here only to simple scalar multiplication with an expression like
> this:
> 
> "5 * 3 * 1 * 2 * 4"
> 
> As far as I understand from your writings you would build an AST like
> the following from this input
> 
> "^(MULT 5 3 1 2 4)
> 
> and try to match it with a rule like this
> 
> topdown :
>     ^( MULT (before += .)* x=. (after += .)* )
>         { $x.has("IDENTITY") }?
>     ->  ^( MULT $before* $after* )
> ;
> 
> How should ANTLR generated code distribute the tokens from the AST to
> your variables "before", "x" and "after"? You're not giving ANTLR any
> hint about it. I guess you would end up with:
> before: "5 3 1 2"
> x:      "4"
> after:  ""    // empty
> 
> And you must to have "x" assigned the "1" to make your code work.
> 
> Doing expression evaluation and simplification is done differently with
> ANTLR and leads to ASTs that combine two operands with one operator that
> can then be simplified in a straightforward manner.
> 
> A more appropriate AST structure for the before mentioned input would be
> this recursive structure:
> 
> ^(* ^(* ^(* ^(* 5 3) 1) 2) 4)
> 
> In a "pretty printed" style it would appear like this.
> 
> ^(*
>     ^(*
>         ^(*
>             ^(*
>                 5
>                 3
>             )
>             1
>         )
>         2
>     )
>     4
> )
> 
> This way you have only to deal with an operator and two operands in one
> rule. A bare bones example (not working) looks like this:
> 
> bottomup:
>     expr
>     ;
> 
> expr:
>     ^(* a=expr b=INT {$b.text()== "1"}?)    ->    $a
>     ^(* a=INT {$a.text()== "1"}? b=expr)    ->    $b
>     ;
> 
> This way you can now match special things in the AST and act on them
> testing some properties of the trees. You can see the simplification
> that the result of "expr" is one of the operands if one of the others is
> a literal "1".
> 
> For a better explanation and an example look at
> http://www.antlr.org/wiki/display/~admin/2008/11/30/Example+tree+rewriting+with+patterns
> 
> 
> 
> I hope I did not misunderstand what you want to do.
> 
> Stefan
> 
> 
> Am 13.06.2012 10:18, schrieb nafur:
>> Hi,
>>
>> Ok, I guess I have to somehow redefine the nature of the rewrite rules I
>> want to use:
>>
>> My ASTs represent mathematical formulas and .has() checks, if this
>> symbol has some special mathematical property (like "is identity", "is
>> symmetric", "is invertible", "is orthogonal", ... I'm working with
>> matrices).
>>
>> Thus, this example is really the simplest one. Another example is:
>>
>> ^( MULT (before += .)* x=. ^( POW y=. TRANSPOSE) (after += .)* )
>> { $x.equals($y)&&  $x.has("ORTHOGONAL") }?
>> ->  ^( MULT $before* IDENTITY $after* )
>>
>> i.e.: replace any Q Q^T by the identity, if Q is orthogonal. Note that
>> this rule requires a comparison of whole subtrees ($x.equals($y)).
>>
>> Therefore, filtering single symbols would work for my first example (I
>> somehow selected a quite bad example). For more complex examples, I
>> really want to rely on the pattern matching offered by ANTLR.
>>
>> What I would like: Instead of resolving ambiguity by just choosing a
>> single possibility, try all of them (what makes more sense for rewrite
>> rules anyway).
>>
>> Gereon
>>
>> On 06/13/2012 07:35 AM, Benjamin S Wolf wrote:
>>> If I were programming this for a Python target, I'd guess it would
>>> look something like:
>>>
>>> topdown : ^( MULT (arg+=.)* )
>>>      ->  { filter_out_identities(MULT, $arg) };
>>>
>>> with a function filter_out_identities defined in a header somewhere:
>>>
>>> def filter_out_identities(node, nodes):
>>>      tree = CommonTree(node)
>>>      tree.addChildren(n for n in nodes if not n.has("IDENTITY"))
>>>      return tree
>>>
>>> I'm not sure what you really want to do. You were asking how to remove
>>> all of a token from a list, and you gave an example that indicated you
>>> had a function "has" that would let you check whether a token was an
>>> identity, and you're matching against every token. Sorry if I
>>> misunderstood that.
>>>
>>> If you only have one token that could be an identity, then you could
>>> do something like:
>>>
>>> topdown : ^( MULT (a+=~IDENTITY)* (IDENTITY* b+=~IDENTITY*)* IDENTITY*
>>>      ->  ^( MULT a* b* );
>>>
>>> and no actions are required.
>>>
>>> You might even be able to do
>>>
>>> ^( MULT ( IDENTITY | a+=~IDENTITY )* ) ->  ^( MULT a* )
>>>
>>> This is based on my understanding of parser rules; I'm not sure how
>>> different it would be for tree parser rules.
>>>
>>> On Tue, Jun 12, 2012 at 10:07 PM, nafur<nafur42 at gmail.com>  wrote:
>>>> Hi,
>>>>
>>>> While I'm not completely sure how this would look like, this would
>>>> somehow result in implementing the pattern matching myself, right?
>>>> As this example is a very easy one, this is no option for me. Actually,
>>>> I'm only using ANTLR because of this pattern matching...
>>>>
>>>> Gereon
>>>>
>>>> On 06/13/2012 05:34 AM, Benjamin S Wolf wrote:
>>>>> The best way to accomplish this is likely to be an arbitrary
>>>>> action, eg.:
>>>>>
>>>>> a : INT ->  { new CommonTree(new CommonToken(FLOAT, $INT.text +
>>>>> ".0")) } ;
>>>>>
>>>>> This takes an INT and returns a Tree with one node, a FLOAT token with
>>>>> text that is the int plus ".0".
>>>>>
>>>>> You'll want to make a tree via CommonTree() and add a list of children
>>>>> that excludes all tokens that have IDENTITY (or add each child if it
>>>>> doesn't have the identity). This means you'll be looping over all the
>>>>> nodes in the MULT subtree within the action.
>>>>>
>>>>> On Mon, Jun 11, 2012 at 2:01 AM, nafur<nafur42 at gmail.com>  wrote:
>>>>>> Hi,
>>>>>>
>>>>>> I asked about this ambiguity quite a while ago. Does nobody has
>>>>>> any idea
>>>>>> how to do this?
>>>>>>
>>>>>> Gereon
>>>>>>
>>>>>> On 05/29/2012 12:48 PM, nafur wrote:
>>>>>>> Hi,
>>>>>>>
>>>>>>> I'm using tree rewriters to manipulate formulas that are
>>>>>>> represented as
>>>>>>> ASTs. One operation I'd like to do is: "remove any identity from a
>>>>>>> multiplication".
>>>>>>>
>>>>>>> The replacement rule I'm currently working with is the following:
>>>>>>>
>>>>>>> topdown :
>>>>>>>        ^( MULT (before += .)* x=. (after += .)* )
>>>>>>>        { $x.has("IDENTITY") }?
>>>>>>>        ->  ^( MULT $before* $after* )
>>>>>>> ;
>>>>>>>
>>>>>>> As you probably see, we have some ambiguity here: before and
>>>>>>> after can
>>>>>>> both take arbitrarily many elements. If I take an AST like
>>>>>>> ^( MULT A I x ), the replacement will not match. printing some debug
>>>>>>> output reveals, that ANTLR will only check $x.has("IDENTITY"),
>>>>>>> i.e. will
>>>>>>> only try to match the last element in a multiplication.
>>>>>>> (That is actually not a surprise, as ANTLR issues a warning...)
>>>>>>>
>>>>>>> Is there any way to resolve this ambiguity in a way, such that I can
>>>>>>> match all occurrences?
>>>>>>>
>>>>>>> Thanks,
>>>>>>> Gereon
>>>>>>
>>>>>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>>>>>> Unsubscribe:
>>>>>> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>>>>>>
>>
>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>> Unsubscribe:
>> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>>

From Mark.Gressett at sas.com  Thu Jun 14 09:36:19 2012
From: Mark.Gressett at sas.com (Mark Gressett)
Date: Thu, 14 Jun 2012 16:36:19 +0000
Subject: [antlr-interest] Problem with template rewrite,
	List return value
Message-ID: <AAE27BAA90501B448B07E07DB873EB6E07E71B62@MERCMBX13R.na.SAS.com>

This problem is addressed here: http://www.antlr.org/pipermail/antlr-interest/2011-March/041070.html

My follow-on question is, am I barking up the wrong tree with 1-pass template rewrite?

From Stefan.Maetje at esd-electronics.com  Thu Jun 14 10:10:30 2012
From: Stefan.Maetje at esd-electronics.com (Stefan =?iso-8859-1?b?TeR0amU=?= (U-Boot Mail))
Date: Thu, 14 Jun 2012 19:10:30 +0200
Subject: [antlr-interest] Exploit ambiguity in tree rewriter
In-Reply-To: <4FD9D22F.2040305@gmail.com> (from nafur42@gmail.com on Thu Jun
	14 13:59:43 2012)
Message-ID: <1339693830.13927.2@esd-s7>

Am 14.06.2012 13:59:43 schrieb(en) nafur:
> Hi,
> 
> I already thought about this, but this yields new problems. If I build
> my ASTs like this, I have to take care of all possible multiplications.

I don't think so. Because the expr rule in my bare bones example is applied 
recursively and from the bottom of the tree up multiple(!) times by the 
bottomup rule all it needs to take care for is one operator and two operands 
(either of them could be an "expr" expression).

> To match A B I have to match ^(* A B), ^(* A ^(* B ...)), ^(* ^(* ... A) B), 
> ^(* ^(* ... A) ^(* B ... )).

Yes, at first they look as a lot of variants but it always boils down to a
^(* aExpr bExpr). Please really have a look at the examples for expression 
evaluation on the ANTLR website. And use the link to the Wiki I provided.

Have a look at the example AST I suggested below:

^(* ^(* ^(* ^(* 5 3) 1) 2) 4)

ANTLR will match and apply the expr rule 4 times to this AST in this manner:

1. match: ^(* 5 3)        ->  ^(* 5 3)
2. match: ^(* ^(* 5 3) 1) ->  ^(* 5 3) // real rewrite propagetes only this up
3. match  ^(* ^(* 5 3) 2) ->  ^(* ^(* 5 3) 2)  // no change
4. match  ^(* ^(* ^(* 5 3) 2) 4)  -> ^(* ^(* ^(* 5 3) 2) 4)

The 1 has vanished as expected and only 3 multiplications are left.

> As I will at some point go for rules that match more than two factors,
> this does not seem like a real option to me...

What kind of operators do you have that take more than two operands? I
can't imagine a use case at the moment.

Stefan

> Gereon
> 
> On 06/14/2012 12:00 PM, Stefan M?tje wrote:
> > Hi nafur,
> > 
> > from what I've read in this thread till now I got the impression that
> > you've structured your AST in a way that counteracts your goals.
> > 
> > I'll try to give a simple example to get us on common ground. I will
> > refer here only to simple scalar multiplication with an expression like
> > this:
> > 
> > "5 * 3 * 1 * 2 * 4"
> > 
> > As far as I understand from your writings you would build an AST like
> > the following from this input
> > 
> > "^(MULT 5 3 1 2 4)
> > 
> > and try to match it with a rule like this
> > 
> > topdown :
> >     ^( MULT (before += .)* x=. (after += .)* )
> >         { $x.has("IDENTITY") }?
> >     ->  ^( MULT $before* $after* )
> > ;
> > 
> > How should ANTLR generated code distribute the tokens from the AST to
> > your variables "before", "x" and "after"? You're not giving ANTLR any
> > hint about it. I guess you would end up with:
> > before: "5 3 1 2"
> > x:      "4"
> > after:  ""    // empty
> > 
> > And you must to have "x" assigned the "1" to make your code work.
> > 
> > Doing expression evaluation and simplification is done differently with
> > ANTLR and leads to ASTs that combine two operands with one operator that
> > can then be simplified in a straightforward manner.
> > 
> > A more appropriate AST structure for the before mentioned input would be
> > this recursive structure:
> > 
> > ^(* ^(* ^(* ^(* 5 3) 1) 2) 4)
> > 
> > In a "pretty printed" style it would appear like this.
> > 
> > ^(*
> >     ^(*
> >         ^(*
> >             ^(*
> >                 5
> >                 3
> >             )
> >             1
> >         )
> >         2
> >     )
> >     4
> > )
> > 
> > This way you have only to deal with an operator and two operands in one
> > rule. A bare bones example (not working) looks like this:
> > 
> > bottomup:
> >     expr
> >     ;
> > 
> > expr:
> >     ^(* a=expr b=INT {$b.text()== "1"}?)    ->    $a
> >     ^(* a=INT {$a.text()== "1"}? b=expr)    ->    $b
> >     ;
> > 
> > This way you can now match special things in the AST and act on them
> > testing some properties of the trees. You can see the simplification
> > that the result of "expr" is one of the operands if one of the others is
> > a literal "1".
> > 
> > For a better explanation and an example look at
> > http://www.antlr.org/wiki/display/~admin/2008/11/30/Example+tree+rewriting
> +with+patterns
> > 
> > 
> > 
> > I hope I did not misunderstand what you want to do.
> > 
> > Stefan
> > 
> > 
> > Am 13.06.2012 10:18, schrieb nafur:
> >> Hi,
> >>
> >> Ok, I guess I have to somehow redefine the nature of the rewrite rules I
> >> want to use:
> >>
> >> My ASTs represent mathematical formulas and .has() checks, if this
> >> symbol has some special mathematical property (like "is identity", "is
> >> symmetric", "is invertible", "is orthogonal", ... I'm working with
> >> matrices).
> >>
> >> Thus, this example is really the simplest one. Another example is:
> >>
> >> ^( MULT (before += .)* x=. ^( POW y=. TRANSPOSE) (after += .)* )
> >> { $x.equals($y)&&  $x.has("ORTHOGONAL") }?
> >> ->  ^( MULT $before* IDENTITY $after* )
> >>
> >> i.e.: replace any Q Q^T by the identity, if Q is orthogonal. Note that
> >> this rule requires a comparison of whole subtrees ($x.equals($y)).
> >>
> >> Therefore, filtering single symbols would work for my first example (I
> >> somehow selected a quite bad example). For more complex examples, I
> >> really want to rely on the pattern matching offered by ANTLR.
> >>
> >> What I would like: Instead of resolving ambiguity by just choosing a
> >> single possibility, try all of them (what makes more sense for rewrite
> >> rules anyway).
> >>
> >> Gereon
> >>
> >> On 06/13/2012 07:35 AM, Benjamin S Wolf wrote:
> >>> If I were programming this for a Python target, I'd guess it would
> >>> look something like:
> >>>
> >>> topdown : ^( MULT (arg+=.)* )
> >>>      ->  { filter_out_identities(MULT, $arg) };
> >>>
> >>> with a function filter_out_identities defined in a header somewhere:
> >>>
> >>> def filter_out_identities(node, nodes):
> >>>      tree = CommonTree(node)
> >>>      tree.addChildren(n for n in nodes if not n.has("IDENTITY"))
> >>>      return tree
> >>>
> >>> I'm not sure what you really want to do. You were asking how to remove
> >>> all of a token from a list, and you gave an example that indicated you
> >>> had a function "has" that would let you check whether a token was an
> >>> identity, and you're matching against every token. Sorry if I
> >>> misunderstood that.
> >>>
> >>> If you only have one token that could be an identity, then you could
> >>> do something like:
> >>>
> >>> topdown : ^( MULT (a+=~IDENTITY)* (IDENTITY* b+=~IDENTITY*)* IDENTITY*
> >>>      ->  ^( MULT a* b* );
> >>>
> >>> and no actions are required.
> >>>
> >>> You might even be able to do
> >>>
> >>> ^( MULT ( IDENTITY | a+=~IDENTITY )* ) ->  ^( MULT a* )
> >>>
> >>> This is based on my understanding of parser rules; I'm not sure how
> >>> different it would be for tree parser rules.
> >>>
> >>> On Tue, Jun 12, 2012 at 10:07 PM, nafur<nafur42 at gmail.com>  wrote:
> >>>> Hi,
> >>>>
> >>>> While I'm not completely sure how this would look like, this would
> >>>> somehow result in implementing the pattern matching myself, right?
> >>>> As this example is a very easy one, this is no option for me. Actually,
> >>>> I'm only using ANTLR because of this pattern matching...
> >>>>
> >>>> Gereon
> >>>>
> >>>> On 06/13/2012 05:34 AM, Benjamin S Wolf wrote:
> >>>>> The best way to accomplish this is likely to be an arbitrary
> >>>>> action, eg.:
> >>>>>
> >>>>> a : INT ->  { new CommonTree(new CommonToken(FLOAT, $INT.text +
> >>>>> ".0")) } ;
> >>>>>
> >>>>> This takes an INT and returns a Tree with one node, a FLOAT token with
> >>>>> text that is the int plus ".0".
> >>>>>
> >>>>> You'll want to make a tree via CommonTree() and add a list of children
> >>>>> that excludes all tokens that have IDENTITY (or add each child if it
> >>>>> doesn't have the identity). This means you'll be looping over all the
> >>>>> nodes in the MULT subtree within the action.
> >>>>>
> >>>>> On Mon, Jun 11, 2012 at 2:01 AM, nafur<nafur42 at gmail.com>  wrote:
> >>>>>> Hi,
> >>>>>>
> >>>>>> I asked about this ambiguity quite a while ago. Does nobody has
> >>>>>> any idea
> >>>>>> how to do this?
> >>>>>>
> >>>>>> Gereon
> >>>>>>
> >>>>>> On 05/29/2012 12:48 PM, nafur wrote:
> >>>>>>> Hi,
> >>>>>>>
> >>>>>>> I'm using tree rewriters to manipulate formulas that are
> >>>>>>> represented as
> >>>>>>> ASTs. One operation I'd like to do is: "remove any identity from a
> >>>>>>> multiplication".
> >>>>>>>
> >>>>>>> The replacement rule I'm currently working with is the following:
> >>>>>>>
> >>>>>>> topdown :
> >>>>>>>        ^( MULT (before += .)* x=. (after += .)* )
> >>>>>>>        { $x.has("IDENTITY") }?
> >>>>>>>        ->  ^( MULT $before* $after* )
> >>>>>>> ;
> >>>>>>>
> >>>>>>> As you probably see, we have some ambiguity here: before and
> >>>>>>> after can
> >>>>>>> both take arbitrarily many elements. If I take an AST like
> >>>>>>> ^( MULT A I x ), the replacement will not match. printing some debug
> >>>>>>> output reveals, that ANTLR will only check $x.has("IDENTITY"),
> >>>>>>> i.e. will
> >>>>>>> only try to match the last element in a multiplication.
> >>>>>>> (That is actually not a surprise, as ANTLR issues a warning...)
> >>>>>>>
> >>>>>>> Is there any way to resolve this ambiguity in a way, such that I can
> >>>>>>> match all occurrences?
> >>>>>>>
> >>>>>>> Thanks,
> >>>>>>> Gereon
> >>>>>>
> >>>>>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> >>>>>> Unsubscribe:
> >>>>>> http://www.antlr.org/mailman/options/antlr-interest/your-email-
> address
> >>>>>>
> >>
> >> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> >> Unsubscribe:
> >> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
> >>
> 
> 




From mangelo.mailing at gmail.com  Thu Jun 14 10:29:34 2012
From: mangelo.mailing at gmail.com (Michael Angelo)
Date: Thu, 14 Jun 2012 13:29:34 -0400
Subject: [antlr-interest] Using generated Java Lexer and Parser
Message-ID: <CAAN08rG36v5eVQ=JLBDhBdU05NevhxG9vv-STHkJxuXQWQ0cjw@mail.gmail.com>

I've written a quick grammar to parse SQL. It doesn't have to give me every
gory detail of the query. I just need it broken down into sections so that
I can modify the where clause and then reassemble it.

When I run the interpreter in the eclipse plug-in, everything looks great!

My question is how do I use the generated java class to do what I need to
do? The only thing that I've come up with that remotely comes close to what
I need it a series of:

parser.comsumeUntil(tokenStream, Parser.FOLLOW...) and then
CommonTree tree = parser.tables().getTree()

This doesn't seem the best approach to me.

Any help would be greatly appreciated!!

Thanks!!

Mike

From bkiers at gmail.com  Thu Jun 14 23:24:30 2012
From: bkiers at gmail.com (Bart Kiers)
Date: Fri, 15 Jun 2012 08:24:30 +0200
Subject: [antlr-interest] Oracle SQL Parser
In-Reply-To: <715306A1C94B734C9489B407899C45B303458C8C@a0775-xpo0001-s.ad.allstate.com>
References: <715306A1C94B734C9489B407899C45B303402D50@a0775-xpo0001-s.ad.allstate.com>
	<CAOrgODY+Z1nVRw3OfAsAwnRD+UbMrsm4GrdnmoR6bgEf-U6VXA@mail.gmail.com>
	<715306A1C94B734C9489B407899C45B30340314E@a0775-xpo0001-s.ad.allstate.com>
	<CAOrgODbSDUvMjwUscF+1qgoNnPjBtKybwUW=9dcp_AE-iQgNFw@mail.gmail.com>
	<715306A1C94B734C9489B407899C45B303458C8C@a0775-xpo0001-s.ad.allstate.com>
Message-ID: <CAOrgODYL9wXjpjk9n_+VBVWjdP9M3N5RC+AM9HTBFNYWMhDcTA@mail.gmail.com>

Hi Rick,

You're welcome.
I took the liberty to CC the list for you.

Cheers,

Bart.


On Fri, Jun 15, 2012 at 12:18 AM, Brown, Rick <RBROWN at allstate.com> wrote:

> **
> Hi Bart,
>
> Thanks again for the reply, and thanks for taking the time to create a
> test grammar using the "comment" definition.  As you ably demonstrate, the
> grammar is fine, so I did some more digging to find the problem.  It turns
> out to be related to my PowerShell script.  I was using the Get-Content
> cmdlet to obtain the text from a sql file.  However, this cmdlet does not
> preserve newlines; it in fact creates an array of strings, one for each
> line of text.  When this is passed to the parser, the parser ends up seeing
> just one long string, with no newlines included, so the end of the comment
> is never found until it reaches end-of-file.
>
> The fix was to change this line:
>    $sql = Get-Content $sqlFileName
>
> to this line:
>    $sql = [system.io.file]::readalltext($sqlFileName)
>
> and everything now works fine.
>
> Thank you very much for your help!
>
> ~ Rick
>
> p.s. I would post this response to the group, but I am not sure how to
> properly send the email in a way that will associate it as being a response
> to a particular message.  Do I just use the same Subject line above and
> send it, or do I need to do something else?
>
>  ------------------------------
> *From:* Bart Kiers [mailto:bkiers at gmail.com]
> *Sent:* Thursday, June 14, 2012 4:54 AM
> *To:* Brown, Rick
> *Cc:* antlr-interest at antlr.org interest
>
> *Subject:* Re: [antlr-interest] Oracle SQL Parser
>
> Hi Rick,
>
> You can test the fact that the comments work by running the following
> grammar through ANTLRWorks' debugger:
>
> grammar T;
>
> parse
>  : select EOF
>  ;
>
> select
>  : Select column=Id From table=Id {System.out.println("column=" +
> $column.text + ", table=" + $table.text);}
>  ;
>
> Select : 'select';
> From   : 'from';
> Id     : ('a'..'z' | 'A'..'Z')+;
>
> Comment
>  : '--' ~('\n'|'\r')* '\r'? '\n' { $channel=HIDDEN; }
>  | '//' ~('\n'|'\r')* '\r'? '\n' { $channel=HIDDEN; }
>  | '/*' ( options {greedy=false;} : . )* '*/' { $channel=HIDDEN; }
>  ;
>
> Space
>  : (' ' | '\t' | '\r' | '\n')+ {skip();}
>  ;
>
> Simply press CTRL+D in ANTLRWorks and use the following input to debug
> (also make sure ANTLRWorks starts with the 'parse' rule!):
>
> select
> // comment 1
> dt
> -- comment 2
> from
> /* comment 3 */
> dual
>
> You will then see the following output (you need to select the "output"
> tab to see it):
>
> column=dt, table=dual
>
> Regards,
>
> Bart.
>
>
> On Wed, Jun 13, 2012 at 9:31 PM, Brown, Rick <RBROWN at allstate.com> wrote:
>
>> **
>> Bart,
>>
>> Thanks very much for the reply!  To provide some more context, I am
>> trying to parse Oracle SQL files using a combination of PowerShell and a
>> parser from a project by MacroScope.  The basic approach I am using is
>> described in this article:
>> http://sev17.com/2010/04/parsing-sql-for-table-names/.
>>
>> The MacroScope parser is based on Anltr3, and the project includes the
>> grammar file as well as the generated parser and lexer files.  I
>> contacted MacroScope, and they confirmed that they did not include support
>> for comments at all in their implementation (it is rather old).  So, I set
>> about trying to find a replacement Oracle SQL grammar file that included
>> comments, which led me to the file I mentioned in my original post.
>>
>> I am generating the lexer and parser files using the above grammar, and
>> then adding them to the build of the MacroScope parser.  I then use the
>> resulting MacroScope classes in a PowerShell script to extract the names
>> of the tables and columns in a given sql file.
>>
>> Here are a few examples of what happens when I use this method for
>> parsing a sql file:  The first file looks like this:
>>
>> select sysdate dt
>> /* This is a comment */
>>   from dual
>>
>> Running my PowerShell/MacroScope script, I get the column name as 'dt'
>> and the table name as 'dual', which is what I would expect.
>>
>> If I run the same script using this sql file:
>>
>> select sysdate dt
>> // This is a comment
>>   from dual
>>
>> I get the column name as 'dt', but I do not get any table name.
>>
>> If I run the script using this sql file:
>>
>> -- This is a comment
>> select sysdate dt from dual
>>
>> The script generates an error indicating that there is no data to parse.
>>
>> My assumption is that everything after the start of the comment is being
>> included as part of the comment, all the way through the end of the file,
>> rather than stopping at the end of the line.  Again, I am not an expert, so
>> this is only my assumption based on the behavior I am seeing.  It could
>> be that the problem is something else entirely, but it seems odd that the
>> multi-line style of comments (/* */) is processed correctly, but the
>> single-line style (// or --) is not.
>>
>> Thanks again for your help!
>>
>> ~ Rick
>>
>>  ------------------------------
>> *From:* Bart Kiers [mailto:bkiers at gmail.com]
>> *Sent:* Wednesday, June 13, 2012 3:30 AM
>> *To:* Brown, Rick
>> *Cc:* antlr-interest at antlr.org
>> *Subject:* Re: [antlr-interest] Oracle SQL Parser
>>
>>   On Wed, Jun 13, 2012 at 12:20 AM, Brown, Rick <RBROWN at allstate.com>wrote:
>>
>>> ... but the problem seems to be that the
>>> comment is not being ended at the end of a line; instead, it seems to
>>> consider everything that follows, the entire rest of the file, as part
>>> of the comment. ...
>>>
>>
>> I don't see anything wrong with the rule. The Comment rule has 3
>> alternatives:
>>
>> Comment
>>   :  '--' ~('\n'|'\r')* '\r'? '\n' { $channel=HIDDEN;
>> }                         // alternative 1
>>   |  '//' ~('\n'|'\r')* '\r'? '\n' { $channel=HIDDEN;
>> }                         // alternative 2
>>   |  '/*' ( options {greedy=false;} : . )* '*/' { $channel=HIDDEN; }  //
>> alternative 3
>>   ;
>>
>> Alternative 1 and 2 must end with a line break, and alternative 3 must
>> end with '*/'.
>>
>> Could you tell how you came to the conclusion that there's a problem with
>> the rule? Do you have input that gets tokenized incorrectly? If so, could
>> you send it to the list as well?
>>
>> Regards,
>>
>> Bart.
>>
>
>

From jimi at temporal-wave.com  Fri Jun 15 01:40:52 2012
From: jimi at temporal-wave.com (Jim Idle)
Date: Fri, 15 Jun 2012 16:40:52 +0800
Subject: [antlr-interest] [antlr-dev] Including whitespace in AST
In-Reply-To: <4196C6E3-8E80-4C0D-950B-F6ED6706FACD@lischke-online.de>
References: <8913F290-5F31-4F61-95B5-E33920A21978@lischke-online.de>
	<d60142ca96cc45d6f2e65e0fddc079f2@mail.gmail.com>
	<4196C6E3-8E80-4C0D-950B-F6ED6706FACD@lischke-online.de>
Message-ID: <fc5042f36e67afb535778ca57c8d0a96@mail.gmail.com>

If you want to see them as tokens in the tree, then after the tree is
produced by the parser, iterate through the tokens and set all the
whitespace tokens back to the default channel.



This is easier to deal with if your whitespace is:

WS: (? ? | ?\t?)+;



And not one WS token per character. However you will still need to have WS?
all over your tree grammar to handle it.



Jim



*From:* Mike Lischke [mailto:mike at lischke-online.de]
*Sent:* Friday, June 15, 2012 2:30 PM
*To:* Jim Idle
*Subject:* Re: [antlr-dev] Including whitespace in AST





Jim,



thanks for your answer.



Each tree node will tell you the starting and ending token (the tokens that
get what the node represents). Hidden tokens (rather than skipped tokens)
are still within the span, but the parser does not see them. So, if you
want the whitespace, you will need to access the tokens directly using code
at the point in the tree walk where you need to see it.



That's what I considered option B: during the tree walk use the token
stream to get hidden tokens. Not as elegant as it could be but an
acceptable solution I think.



Mike
-- 
www.soft-gems.net

From asicaddress at gmail.com  Fri Jun 15 15:13:41 2012
From: asicaddress at gmail.com (A Z)
Date: Fri, 15 Jun 2012 17:13:41 -0500
Subject: [antlr-interest] Forcing the lexer to never error
Message-ID: <CAP86aOcf1BRXASoSqGXcajKeDBkfLGMVtJusXqB3XaV6PTeW1w@mail.gmail.com>

Hello all,

  This is all using ANTLR 3.4 with the C target. I'm trying to modify
my lexer grammar to never trigger a lexer error but instead emit a
special token, INVALID. So far I've done this by adding all invalid
sequences of characters to a special rule INVALID.

ASCOLCOLAS                 : '*::*';

INVALID :
 ...
 | '*:'
 | '*::';

This works but it gets tedious for certain complex lexer rules. For
instance the rule for a line directive is as follows:

DIR_LINE :
  'line'  SLSpace+ DecDigits SLSpace+ StrChars SLSpace+ DecDigits SLSpace* '\n'

To handle this I'd have to add a fairly complex alternative to the INVALID rule

INVALID:
  ...
 | 'line'
  (
    ~SLSpace
  | SLSpace+
   (
     ~DecDigits
   | DecDigits ...
   )
  )

I also tried adding alternatives to the DIR_LINE rule instead.
Unfortunately ANTLR sometimes fails to generate the code in this case,
even after letting it run for several minutes. I also don't have a way
to set the token type to INVALID. ANTLR places the token type
assignment after any lexer rules actions, overriding my changes.

DIR_LINE :
  'line'
  (
    SLSpace+
    (
      DecDigits
      (
       ...
      |
      )
    | ~DecDigits {LEXSTATE->type = INVALID;} //This gets ignored in the C code
    )
  | ~SLSpace {ctx->lineError();}
  )



My first question is, are there performance issues caused by adding
the separate INVALID rule as opposed to alternative in existing rules?
My understanding is yes since lookahead is needed to determine whether
REALNUM or INVALID should be entered, for instance.

Secondly, is there a way to force the token type based on a rule action?

Thanks

From v-scobis at microsoft.com  Fri Jun 15 22:02:23 2012
From: v-scobis at microsoft.com (Scobie Smith (Insight Global))
Date: Sat, 16 Jun 2012 05:02:23 +0000
Subject: [antlr-interest] emitting multiple tokens (INDENT/DEDENT)
Message-ID: <FA21EA835C1467498B3E0B904C9CF2020F07DED9@TK5EX14MBXC283.redmond.corp.microsoft.com>

I know this has come up before. It is discussed in TDAR p. 109ff (which BTW is incorrect), and there is a FAQ page about (also faulty). But I have yet to see a serious working answer for how to get this to work in the real world, in particular with the C# port of ANTLR 3. So far I have gone pretty far beyond all those examples and have gone into the source code to see if I can figure out what I am missing. Maybe someone here can advise. Here is my problem.

I am trying to parse input that is similar to Python, where statement blocks are defined by indentation. Statement lines have \n (EOL) as termination. The top-level statements comprise just a list, but blocks of substatements are statement "blocks". A block is just more indented statements--not preceded by COLON + NEWLINE, as is found in Python and followed in all the ANTLR Python examples. I will go back to those examples again next, since those evidently really work and seem not quite to follow TDAR and the FAQ.

Note: I'm not sure I can expect anyone to spend his time poring over this. But maybe someone out there who has gotten this to work cleanly has some tip or other. Thanks in advance for anything. I've just wasted days. This grammar represents the most recent iteration, which actually is probably worse that my previous attempts....


grammar MyFile;

options {
    language=CSharp3;
    TokenLabelType=CommonToken;
    output=AST;
    ASTLabelType=CommonTree;
}

tokens {
       ROOT;
       STATEMENT_NODE;
       DEDENT;
       BLOCK;
}

@lexer::namespace{ MyFile }
@parser::namespace{ MyFile }

@lexer::header {
using System;
}

@lexer::members {
/// <summary>
/// Gets or sets the length of the current level of indentation.
/// </summary>
int CurrentIndent = 0;
}

@lexer::init {
CurrentIndent = 0;
}

@parser::header {
using System;
}

///////////////////////////////////////////////////////////////////////////////
// Parser Rules
///////////////////////////////////////////////////////////////////////////////
public
myfile: statement+ EOF -> ^(CONFIG_ROOT statement+) ;

statement: // Two cases: no block (just a list of terms), or list of terms followed by a block.
       term_list EOL* (EOL | EOF) -> ^(STATEMENT_NODE term_list)
       | term_list EOL+ statement_block EOL* (EOL | EOF) -> ^(STATEMENT_NODE term_list statement_block)
       ;

statement_block: INDENT statement+ DEDENT -> ^(BLOCK statement+)
       // Note: A block might be followed by a zero-indent statement, which closes the block.
       // But INDENT will not detect this or emit a DEDENT, because emitting there is triggered by ' '+ (can't do ' '*).
       // So, we need to detect the start of a top-level statement and test the CurrentIndent level, emitting DETENTs as needed.
// For now, I am not testing that case.
       ;

term_list: term+ ;

term: Token ;

///////////////////////////////////////////////////////////////////////////////
// Lexer Rules
///////////////////////////////////////////////////////////////////////////////

// See TDAR p. 109ff.
// Check the amount of indentation (initial spaces on line).
// Translate indentation into INDENT/DEDENT tokens, to mimic bracketing.
// Put this rule first before whitespace, etc., so whitespace indents are caught.
INDENT:
{ CharPositionInLine == 0 }?=> ( ' ' )+
{
       // Emit INDENT and DEDENT tokens in place of the initial indentation spaces.
       // Note: TDAR p. 110: If you do not emit a token manually (using Emit()),
       // then base.NextToken() will emit one for you.
       // But for safety and clarify, I am here making sure to Emit (or Skip) manually for all cases.
       int indent = Text.Length;
       if (indent > CurrentIndent)
       {
              Emit(new CommonToken(INDENT, "INDENT"));
       }
       else if (indent < CurrentIndent)
       {
              // Insert DEDENT tokens now, to back out of the nested blocks.
              int backout = CurrentIndent - indent;
              for (int i=0; i < backout; i++)
              {
                     Emit(new CommonToken(DEDENT, "DEDENT"));
              }
       }
       else // Same indent, so just ignore this indentation--since we are also skipping all whitespace.
       {
              Skip();
       }
       CurrentIndent = indent;
}
;

WS: ' ' { Skip(); } ;
EOL: '\n' ;

Token: Char+ ;
fragment Char: ~(' '|'\t'|'\r'|EOL) ;


Ok, that's the combined grammar. I also overrode the Emit() and NextToken() methods, so as to maintain a queue for the DEDENTs. This is in the lexer partial class:
        private Queue<IToken> tokenQueue = new Queue<IToken>();

        public override void Emit(IToken token)
        {
            base.Emit(token); // Or: this.state.token = token;
            tokenQueue.Enqueue(token);
        }

        public override IToken NextToken()
        {
            IToken tok = base.NextToken();
            // If the queue is empty, there are no more input tokens: we are at the end of file.
            // But at this point we might be in an indented block and need to return dedent tokens.
            // Therefore, emit as many dedents as necessary and then emit the EOF.
            // Note: The emits must be in order and before the return, to put them on the queue, from which they are returned.
            if (tokenQueue.Count == 0)
            {
                // Check the current indentation, in order to emit leftover DEDENT tokens.
                // This occurs (only) when the last statement in the input is indented, so that we end
                // with non-zero indentation. (If the last statement was top-level/indent 0, then there
                // should be a DEDENT before that, not here at the end of file.)
                if (this.CurrentIndent > 0)
                {
                    while (this.CurrentIndent > 0)
                    {
                        Emit(new CommonToken(DEDENT, "DEDENT"));
                        this.CurrentIndent--;
                    }
                }
                else
                {
                    IToken eof = new CommonToken((ICharStream)input, CharStreamConstants.EndOfFile, TokenChannels.Default, input.Index, input.Index);
                    eof.Line = Line;
                    eof.CharPositionInLine = CharPositionInLine;

                    Emit(tok);
                }
            }
            return tokenQueue.Dequeue();
        }

And my C# test string is just this, which fails on unexpected 'b2', even though the DEDENT was there before it:
           string s =
@"a1 line
b1 alpha
  c1 beta
b2 gamma
";

Or even this, which fails on unexpected DEDENT immediately after "c1 beta" (the first of two DEDENTS):
            string s =
@"a1 line
b1 alpha
  c1 beta
";

I am getting the notion that the parser checks for what tokens are there BEFORE the inserted DEDENTs are seen. But I have yet to delve into the parser enough to find that.

I have to say that it be help if either this feature were not advertised for ANTLR, or a lot more documentation were available to do it right. TDAR on this just lures you in. If I had known how much of a hack would this would be, I would have started out four days ago doing it with two passes.

S. Smith





From jimi at temporal-wave.com  Sat Jun 16 00:58:09 2012
From: jimi at temporal-wave.com (Jim Idle)
Date: Sat, 16 Jun 2012 15:58:09 +0800
Subject: [antlr-interest] Forcing the lexer to never error
In-Reply-To: <CAP86aOcf1BRXASoSqGXcajKeDBkfLGMVtJusXqB3XaV6PTeW1w@mail.gmail.com>
References: <CAP86aOcf1BRXASoSqGXcajKeDBkfLGMVtJusXqB3XaV6PTeW1w@mail.gmail.com>
Message-ID: <9589fa4e52b7678f310a35ea0a13aedb@mail.gmail.com>

You just want one rule as the last rule:

INVALID : . ;

Jim

-----Original Message-----
From: antlr-interest-bounces at antlr.org
[mailto:antlr-interest-bounces at antlr.org] On Behalf Of A Z
Sent: Saturday, June 16, 2012 6:14 AM
To: antlr-interest at antlr.org
Subject: [antlr-interest] Forcing the lexer to never error

Hello all,

  This is all using ANTLR 3.4 with the C target. I'm trying to modify my
lexer grammar to never trigger a lexer error but instead emit a special
token, INVALID. So far I've done this by adding all invalid sequences of
characters to a special rule INVALID.


ASCOLCOLAS                 : '*::*';

INVALID :
 ...
 | '*:'
 | '*::';

This works but it gets tedious for certain complex lexer rules. For
instance the rule for a line directive is as follows:

DIR_LINE :
  'line'  SLSpace+ DecDigits SLSpace+ StrChars SLSpace+ DecDigits SLSpace*
'\n'

To handle this I'd have to add a fairly complex alternative to the INVALID
rule

INVALID:
  ...
 | 'line'
  (
    ~SLSpace
  | SLSpace+
   (
     ~DecDigits
   | DecDigits ...
   )
  )

I also tried adding alternatives to the DIR_LINE rule instead.
Unfortunately ANTLR sometimes fails to generate the code in this case,
even after letting it run for several minutes. I also don't have a way to
set the token type to INVALID. ANTLR places the token type assignment
after any lexer rules actions, overriding my changes.

DIR_LINE :
  'line'
  (
    SLSpace+
    (
      DecDigits
      (
       ...
      |
      )
    | ~DecDigits {LEXSTATE->type = INVALID;} //This gets ignored in the C
code
    )
  | ~SLSpace {ctx->lineError();}
  )



My first question is, are there performance issues caused by adding the
separate INVALID rule as opposed to alternative in existing rules?
My understanding is yes since lookahead is needed to determine whether
REALNUM or INVALID should be entered, for instance.

Secondly, is there a way to force the token type based on a rule action?

Thanks

List: http://www.antlr.org/mailman/listinfo/antlr-interest
Unsubscribe:
http://www.antlr.org/mailman/options/antlr-interest/your-email-address

From v-scobis at microsoft.com  Sat Jun 16 03:18:58 2012
From: v-scobis at microsoft.com (Scobie Smith (Insight Global))
Date: Sat, 16 Jun 2012 10:18:58 +0000
Subject: [antlr-interest] emitting multiple tokens (INDENT/DEDENT)
In-Reply-To: <FA21EA835C1467498B3E0B904C9CF2020F07DED9@TK5EX14MBXC283.redmond.corp.microsoft.com>
References: <FA21EA835C1467498B3E0B904C9CF2020F07DED9@TK5EX14MBXC283.redmond.corp.microsoft.com>
Message-ID: <FA21EA835C1467498B3E0B904C9CF2020F07DF47@TK5EX14MBXC283.redmond.corp.microsoft.com>

Well, after writing that lengthy question, I have solved the problem myself, though it took me until 3:15am Saturday morning. :)
Everyone may now stand down.

And what was the problem? I had an extra EOF at the end of a alternative:
statement: // Two cases: no block (just a list of terms), or list of terms followed by a block, but there will not be one there:
       ......
       | term_list EOL+ statement_block EOL* (EOL | EOF) -> ^(STATEMENT_NODE term_list statement_block)
       ;

Thanks for being there, antlr-interest. At least writing the question out helped me think through it.

-----Original Message-----
From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-bounces at antlr.org] On Behalf Of Scobie Smith (Insight Global)
Sent: Friday, June 15, 2012 10:02 PM
To: antlr-interest at antlr.org
Subject: [antlr-interest] emitting multiple tokens (INDENT/DEDENT)

I know this has come up before. It is discussed in TDAR p. 109ff (which BTW is incorrect), and there is a FAQ page about (also faulty). But I have yet to see a serious working answer for how to get this to work in the real world, in particular with the C# port of ANTLR 3. So far I have gone pretty far beyond all those examples and have gone into the source code to see if I can figure out what I am missing. Maybe someone here can advise. Here is my problem.

I am trying to parse input that is similar to Python, where statement blocks are defined by indentation. Statement lines have \n (EOL) as termination. The top-level statements comprise just a list, but blocks of substatements are statement "blocks". A block is just more indented statements--not preceded by COLON + NEWLINE, as is found in Python and followed in all the ANTLR Python examples. I will go back to those examples again next, since those evidently really work and seem not quite to follow TDAR and the FAQ.

Note: I'm not sure I can expect anyone to spend his time poring over this. But maybe someone out there who has gotten this to work cleanly has some tip or other. Thanks in advance for anything. I've just wasted days. This grammar represents the most recent iteration, which actually is probably worse that my previous attempts....


grammar MyFile;

options {
    language=CSharp3;
    TokenLabelType=CommonToken;
    output=AST;
    ASTLabelType=CommonTree;
}

tokens {
       ROOT;
       STATEMENT_NODE;
       DEDENT;
       BLOCK;
}

@lexer::namespace{ MyFile }
@parser::namespace{ MyFile }

@lexer::header {
using System;
}

@lexer::members {
/// <summary>
/// Gets or sets the length of the current level of indentation.
/// </summary>
int CurrentIndent = 0;
}

@lexer::init {
CurrentIndent = 0;
}

@parser::header {
using System;
}

///////////////////////////////////////////////////////////////////////////////
// Parser Rules
///////////////////////////////////////////////////////////////////////////////
public
myfile: statement+ EOF -> ^(CONFIG_ROOT statement+) ;

statement: // Two cases: no block (just a list of terms), or list of terms followed by a block.
       term_list EOL* (EOL | EOF) -> ^(STATEMENT_NODE term_list)
       | term_list EOL+ statement_block EOL* (EOL | EOF) -> ^(STATEMENT_NODE term_list statement_block)
       ;

statement_block: INDENT statement+ DEDENT -> ^(BLOCK statement+)
       // Note: A block might be followed by a zero-indent statement, which closes the block.
       // But INDENT will not detect this or emit a DEDENT, because emitting there is triggered by ' '+ (can't do ' '*).
       // So, we need to detect the start of a top-level statement and test the CurrentIndent level, emitting DETENTs as needed.
// For now, I am not testing that case.
       ;

term_list: term+ ;

term: Token ;

///////////////////////////////////////////////////////////////////////////////
// Lexer Rules
///////////////////////////////////////////////////////////////////////////////

// See TDAR p. 109ff.
// Check the amount of indentation (initial spaces on line).
// Translate indentation into INDENT/DEDENT tokens, to mimic bracketing.
// Put this rule first before whitespace, etc., so whitespace indents are caught.
INDENT:
{ CharPositionInLine == 0 }?=> ( ' ' )+
{
       // Emit INDENT and DEDENT tokens in place of the initial indentation spaces.
       // Note: TDAR p. 110: If you do not emit a token manually (using Emit()),
       // then base.NextToken() will emit one for you.
       // But for safety and clarify, I am here making sure to Emit (or Skip) manually for all cases.
       int indent = Text.Length;
       if (indent > CurrentIndent)
       {
              Emit(new CommonToken(INDENT, "INDENT"));
       }
       else if (indent < CurrentIndent)
       {
              // Insert DEDENT tokens now, to back out of the nested blocks.
              int backout = CurrentIndent - indent;
              for (int i=0; i < backout; i++)
              {
                     Emit(new CommonToken(DEDENT, "DEDENT"));
              }
       }
       else // Same indent, so just ignore this indentation--since we are also skipping all whitespace.
       {
              Skip();
       }
       CurrentIndent = indent;
}
;

WS: ' ' { Skip(); } ;
EOL: '\n' ;

Token: Char+ ;
fragment Char: ~(' '|'\t'|'\r'|EOL) ;


Ok, that's the combined grammar. I also overrode the Emit() and NextToken() methods, so as to maintain a queue for the DEDENTs. This is in the lexer partial class:
        private Queue<IToken> tokenQueue = new Queue<IToken>();

        public override void Emit(IToken token)
        {
            base.Emit(token); // Or: this.state.token = token;
            tokenQueue.Enqueue(token);
        }

        public override IToken NextToken()
        {
            IToken tok = base.NextToken();
            // If the queue is empty, there are no more input tokens: we are at the end of file.
            // But at this point we might be in an indented block and need to return dedent tokens.
            // Therefore, emit as many dedents as necessary and then emit the EOF.
            // Note: The emits must be in order and before the return, to put them on the queue, from which they are returned.
            if (tokenQueue.Count == 0)
            {
                // Check the current indentation, in order to emit leftover DEDENT tokens.
                // This occurs (only) when the last statement in the input is indented, so that we end
                // with non-zero indentation. (If the last statement was top-level/indent 0, then there
                // should be a DEDENT before that, not here at the end of file.)
                if (this.CurrentIndent > 0)
                {
                    while (this.CurrentIndent > 0)
                    {
                        Emit(new CommonToken(DEDENT, "DEDENT"));
                        this.CurrentIndent--;
                    }
                }
                else
                {
                    IToken eof = new CommonToken((ICharStream)input, CharStreamConstants.EndOfFile, TokenChannels.Default, input.Index, input.Index);
                    eof.Line = Line;
                    eof.CharPositionInLine = CharPositionInLine;

                    Emit(tok);
                }
            }
            return tokenQueue.Dequeue();
        }

And my C# test string is just this, which fails on unexpected 'b2', even though the DEDENT was there before it:
           string s =
@"a1 line
b1 alpha
  c1 beta
b2 gamma
";

Or even this, which fails on unexpected DEDENT immediately after "c1 beta" (the first of two DEDENTS):
            string s =
@"a1 line
b1 alpha
  c1 beta
";

I am getting the notion that the parser checks for what tokens are there BEFORE the inserted DEDENTs are seen. But I have yet to delve into the parser enough to find that.

I have to say that it be help if either this feature were not advertised for ANTLR, or a lot more documentation were available to do it right. TDAR on this just lures you in. If I had known how much of a hack would this would be, I would have started out four days ago doing it with two passes.

S. Smith





List: http://www.antlr.org/mailman/listinfo/antlr-interest
Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address



From asicaddress at gmail.com  Sat Jun 16 07:35:42 2012
From: asicaddress at gmail.com (A Z)
Date: Sat, 16 Jun 2012 09:35:42 -0500
Subject: [antlr-interest] Forcing the lexer to never error
In-Reply-To: <9589fa4e52b7678f310a35ea0a13aedb@mail.gmail.com>
References: <CAP86aOcf1BRXASoSqGXcajKeDBkfLGMVtJusXqB3XaV6PTeW1w@mail.gmail.com>
	<9589fa4e52b7678f310a35ea0a13aedb@mail.gmail.com>
Message-ID: <CAP86aOe_2u4t6-i_4-6LCRTR7QrcbshFqvP3kCPz76RFmCi2xw@mail.gmail.com>

Thanks for the response.

I tried this but it doesn't give the expected behavior. The lexer
still generates exceptions for certain character sequences.

On 6/16/12, Jim Idle <jimi at temporal-wave.com> wrote:
> You just want one rule as the last rule:
>
> INVALID : . ;
>
> Jim
>
> -----Original Message-----
> From: antlr-interest-bounces at antlr.org
> [mailto:antlr-interest-bounces at antlr.org] On Behalf Of A Z
> Sent: Saturday, June 16, 2012 6:14 AM
> To: antlr-interest at antlr.org
> Subject: [antlr-interest] Forcing the lexer to never error
>
> Hello all,
>
>   This is all using ANTLR 3.4 with the C target. I'm trying to modify my
> lexer grammar to never trigger a lexer error but instead emit a special
> token, INVALID. So far I've done this by adding all invalid sequences of
> characters to a special rule INVALID.
>
>
> ASCOLCOLAS                 : '*::*';
>
> INVALID :
>  ...
>  | '*:'
>  | '*::';
>
> This works but it gets tedious for certain complex lexer rules. For
> instance the rule for a line directive is as follows:
>
> DIR_LINE :
>   'line'  SLSpace+ DecDigits SLSpace+ StrChars SLSpace+ DecDigits SLSpace*
> '\n'
>
> To handle this I'd have to add a fairly complex alternative to the INVALID
> rule
>
> INVALID:
>   ...
>  | 'line'
>   (
>     ~SLSpace
>   | SLSpace+
>    (
>      ~DecDigits
>    | DecDigits ...
>    )
>   )
>
> I also tried adding alternatives to the DIR_LINE rule instead.
> Unfortunately ANTLR sometimes fails to generate the code in this case,
> even after letting it run for several minutes. I also don't have a way to
> set the token type to INVALID. ANTLR places the token type assignment
> after any lexer rules actions, overriding my changes.
>
> DIR_LINE :
>   'line'
>   (
>     SLSpace+
>     (
>       DecDigits
>       (
>        ...
>       |
>       )
>     | ~DecDigits {LEXSTATE->type = INVALID;} //This gets ignored in the C
> code
>     )
>   | ~SLSpace {ctx->lineError();}
>   )
>
>
>
> My first question is, are there performance issues caused by adding the
> separate INVALID rule as opposed to alternative in existing rules?
> My understanding is yes since lookahead is needed to determine whether
> REALNUM or INVALID should be entered, for instance.
>
> Secondly, is there a way to force the token type based on a rule action?
>
> Thanks
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>

From jimi at temporal-wave.com  Sun Jun 17 03:11:22 2012
From: jimi at temporal-wave.com (Jim Idle)
Date: Sun, 17 Jun 2012 18:11:22 +0800
Subject: [antlr-interest] Forcing the lexer to never error
In-Reply-To: <CAP86aOe_2u4t6-i_4-6LCRTR7QrcbshFqvP3kCPz76RFmCi2xw@mail.gmail.com>
References: <CAP86aOcf1BRXASoSqGXcajKeDBkfLGMVtJusXqB3XaV6PTeW1w@mail.gmail.com>
	<9589fa4e52b7678f310a35ea0a13aedb@mail.gmail.com>
	<CAP86aOe_2u4t6-i_4-6LCRTR7QrcbshFqvP3kCPz76RFmCi2xw@mail.gmail.com>
Message-ID: <b20e163a0de47f4466da08ac11970aae@mail.gmail.com>

Then it means that your lexer rules are not able to cope with the
unexpected input. You need to code your rules so that they can accept bad
input and report it, or perhaps override the error handler and take some
kind of recovery action.

Jim

-----Original Message-----
From: A Z [mailto:asicaddress at gmail.com]
Sent: Saturday, June 16, 2012 10:36 PM
To: Jim Idle
Cc: antlr-interest at antlr.org
Subject: Re: [antlr-interest] Forcing the lexer to never error

Thanks for the response.

I tried this but it doesn't give the expected behavior. The lexer still
generates exceptions for certain character sequences.

On 6/16/12, Jim Idle <jimi at temporal-wave.com> wrote:
> You just want one rule as the last rule:
>
> INVALID : . ;
>
> Jim
>
> -----Original Message-----
> From: antlr-interest-bounces at antlr.org
> [mailto:antlr-interest-bounces at antlr.org] On Behalf Of A Z
> Sent: Saturday, June 16, 2012 6:14 AM
> To: antlr-interest at antlr.org
> Subject: [antlr-interest] Forcing the lexer to never error
>
> Hello all,
>
>   This is all using ANTLR 3.4 with the C target. I'm trying to modify
> my lexer grammar to never trigger a lexer error but instead emit a
> special token, INVALID. So far I've done this by adding all invalid
> sequences of characters to a special rule INVALID.
>
>
> ASCOLCOLAS                 : '*::*';
>
> INVALID :
>  ...
>  | '*:'
>  | '*::';
>
> This works but it gets tedious for certain complex lexer rules. For
> instance the rule for a line directive is as follows:
>
> DIR_LINE :
>   'line'  SLSpace+ DecDigits SLSpace+ StrChars SLSpace+ DecDigits
> SLSpace* '\n'
>
> To handle this I'd have to add a fairly complex alternative to the
> INVALID rule
>
> INVALID:
>   ...
>  | 'line'
>   (
>     ~SLSpace
>   | SLSpace+
>    (
>      ~DecDigits
>    | DecDigits ...
>    )
>   )
>
> I also tried adding alternatives to the DIR_LINE rule instead.
> Unfortunately ANTLR sometimes fails to generate the code in this case,
> even after letting it run for several minutes. I also don't have a way
> to set the token type to INVALID. ANTLR places the token type
> assignment after any lexer rules actions, overriding my changes.
>
> DIR_LINE :
>   'line'
>   (
>     SLSpace+
>     (
>       DecDigits
>       (
>        ...
>       |
>       )
>     | ~DecDigits {LEXSTATE->type = INVALID;} //This gets ignored in
> the C code
>     )
>   | ~SLSpace {ctx->lineError();}
>   )
>
>
>
> My first question is, are there performance issues caused by adding
> the separate INVALID rule as opposed to alternative in existing rules?
> My understanding is yes since lookahead is needed to determine whether
> REALNUM or INVALID should be entered, for instance.
>
> Secondly, is there a way to force the token type based on a rule action?
>
> Thanks
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>

From ygnhzeus at gmail.com  Tue Jun 19 06:20:00 2012
From: ygnhzeus at gmail.com (=?GB2312?B?RmVsaXgu0Ow=?=)
Date: Tue, 19 Jun 2012 21:20:00 +0800
Subject: [antlr-interest] ANTLR tree walker , multiple times return....
Message-ID: <CAPmhLM15=Ty2V9osJQvjQR0eL3=_Z-izg0gsC1QLXPpyWwOymw@mail.gmail.com>

Hi,all .

I have a tree walker like this:

function:
    ^(FUNCTION_TOK fcname=IDENTIFIER param=functionParameters*){
        a_param_arrayList.add(param);
    }
;

functionParameters returns [Object sth]:
    ^(PARAM_TOK value=IDENTIFIER){ sth = $value.getText();}
;

This is a simple scenario,I just want to add the parameters to an
arraylist, but the code above(*a_param_arrayList.add(param)*) will only
collects the first parameter and ignores the
others.But*functionParameters* actually
parases multiple parameters.

Does anyone know how to fix this tree walker? Thanks very much!

From mangelo.mailing at gmail.com  Tue Jun 19 06:54:20 2012
From: mangelo.mailing at gmail.com (Michael Angelo)
Date: Tue, 19 Jun 2012 09:54:20 -0400
Subject: [antlr-interest] ANTLR tree walker , multiple times return....
In-Reply-To: <CAPmhLM15=Ty2V9osJQvjQR0eL3=_Z-izg0gsC1QLXPpyWwOymw@mail.gmail.com>
References: <CAPmhLM15=Ty2V9osJQvjQR0eL3=_Z-izg0gsC1QLXPpyWwOymw@mail.gmail.com>
Message-ID: <CAAN08rFB_CK7mFEv==q8fvS8_kTMo3MYjO9E65Bmr3FmxDRrkQ@mail.gmail.com>

I'm pretty sure that I had a similar problem to yours. Its matching the
first parameter where the others are separated by ',' correct?

I'm parsing SQL so its not exactly the same, but very close when I have a
function in place of a table. Here is how I got mine to work:

  t='table' '(' func=IDENT '(' arguments ')' ')' alias
  {
     Table tbl = new Table($t.text + "(" + $func.text + "(" +
$arguments.text + ")" + ")", $alias.text);
     tables.add(tbl);
  }
  ;

arguments
:
  argument (',' argument)*
;

argument
:
  '?' | '\u0027' '\u0027' | '\u0027' ',' '\u0027'
;

The 'u0027' are the single quote characters. I wouldn't think you need
that, but I'm hoping there is a pattern in here for you.

Let me know if this helps!!

Mike



On Tue, Jun 19, 2012 at 9:20 AM, Felix.? <ygnhzeus at gmail.com> wrote:

> Hi,all .
>
> I have a tree walker like this:
>
> function:
>    ^(FUNCTION_TOK fcname=IDENTIFIER param=functionParameters*){
>        a_param_arrayList.add(param);
>    }
> ;
>
> functionParameters returns [Object sth]:
>    ^(PARAM_TOK value=IDENTIFIER){ sth = $value.getText();}
> ;
>
> This is a simple scenario,I just want to add the parameters to an
> arraylist, but the code above(*a_param_arrayList.add(param)*) will only
> collects the first parameter and ignores the
> others.But*functionParameters* actually
> parases multiple parameters.
>
> Does anyone know how to fix this tree walker? Thanks very much!
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>

From jimi at temporal-wave.com  Tue Jun 19 08:58:44 2012
From: jimi at temporal-wave.com (Jim Idle)
Date: Tue, 19 Jun 2012 23:58:44 +0800
Subject: [antlr-interest] ANTLR tree walker , multiple times return....
In-Reply-To: <CAPmhLM15=Ty2V9osJQvjQR0eL3=_Z-izg0gsC1QLXPpyWwOymw@mail.gmail.com>
References: <CAPmhLM15=Ty2V9osJQvjQR0eL3=_Z-izg0gsC1QLXPpyWwOymw@mail.gmail.com>
Message-ID: <D4396A6E-CE5D-4782-AD3D-31802D51112B@temporal-wave.com>

= gives the current parameter
+= accumulates a list of them

Should be obvious from there?

Jim

On Jun 19, 2012, at 9:20 PM, Felix.? <ygnhzeus at gmail.com> wrote:

> Hi,all .
> 
> I have a tree walker like this:
> 
> function:
>    ^(FUNCTION_TOK fcname=IDENTIFIER param=functionParameters*){
>        a_param_arrayList.add(param);
>    }
> ;
> 
> functionParameters returns [Object sth]:
>    ^(PARAM_TOK value=IDENTIFIER){ sth = $value.getText();}
> ;
> 
> This is a simple scenario,I just want to add the parameters to an
> arraylist, but the code above(*a_param_arrayList.add(param)*) will only
> collects the first parameter and ignores the
> others.But*functionParameters* actually
> parases multiple parameters.
> 
> Does anyone know how to fix this tree walker? Thanks very much!
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address

From bradjcox at gmail.com  Wed Jun 20 03:48:20 2012
From: bradjcox at gmail.com (Brad Cox)
Date: Wed, 20 Jun 2012 06:48:20 -0400
Subject: [antlr-interest] Antlr3 in Eclipse and Maven?
Message-ID: <CAH2etF5MhfzMVfxY0+ngtmTfJBKfz0kz4fhetLAb263UEYuvWA@mail.gmail.com>

I've an antlr3 grammar that compiles fine in AntlrWorks. I'm trying to load
it into Eclipse with Maven to start work on the non-grammar bits.

Problem is it won't compile in either. Error flags are on the first line,
grammar ...;, and nothing I've tried will remove them. Somehow antlr2 is
getting involved in the compile step.

The dependency list shows antlr-runtime-3.2.jar and stringtemplate-3.2.jar
now. Previously there was an antlr2 jar that I've explicitly excluded.
Didn't make a difference.

My best guess is that the antlr3 maven plugin is launching antlr2, not
antlr3, but I have no visibility into what that plugin is doing.

<groupId>org.antlr</groupId>
<artifactId>antlr3-maven-plugin</artifactId>
<version>3.1.3-1</version

There's also likely confusion over which eclipse plugin I should be using.
After some searching I removed everything but the one from certiv, but no
joy.

Could someone point me to a known-to-work reference? Thanks!

From jimi at temporal-wave.com  Wed Jun 20 04:05:04 2012
From: jimi at temporal-wave.com (Jim Idle)
Date: Wed, 20 Jun 2012 19:05:04 +0800
Subject: [antlr-interest] Antlr3 in Eclipse and Maven?
In-Reply-To: <CAH2etF5MhfzMVfxY0+ngtmTfJBKfz0kz4fhetLAb263UEYuvWA@mail.gmail.com>
References: <CAH2etF5MhfzMVfxY0+ngtmTfJBKfz0kz4fhetLAb263UEYuvWA@mail.gmail.com>
Message-ID: <5fad0d88143479e6ddd6b55683ff75d9@mail.gmail.com>

You are probably using the wrong Maven plugin. Find the docs in the wiki
and it will tell you the correct name,

JIm

-----Original Message-----
From: antlr-interest-bounces at antlr.org
[mailto:antlr-interest-bounces at antlr.org] On Behalf Of Brad Cox
Sent: Wednesday, June 20, 2012 6:48 PM
To: Terence Parr; ANTLR interest; stringtemplate-interest at antlr.org List
Subject: [antlr-interest] Antlr3 in Eclipse and Maven?

I've an antlr3 grammar that compiles fine in AntlrWorks. I'm trying to
load it into Eclipse with Maven to start work on the non-grammar bits.

Problem is it won't compile in either. Error flags are on the first line,
grammar ...;, and nothing I've tried will remove them. Somehow antlr2 is
getting involved in the compile step.

The dependency list shows antlr-runtime-3.2.jar and stringtemplate-3.2.jar
now. Previously there was an antlr2 jar that I've explicitly excluded.
Didn't make a difference.

My best guess is that the antlr3 maven plugin is launching antlr2, not
antlr3, but I have no visibility into what that plugin is doing.

<groupId>org.antlr</groupId>
<artifactId>antlr3-maven-plugin</artifactId>
<version>3.1.3-1</version

There's also likely confusion over which eclipse plugin I should be using.
After some searching I removed everything but the one from certiv, but no
joy.

Could someone point me to a known-to-work reference? Thanks!

List: http://www.antlr.org/mailman/listinfo/antlr-interest
Unsubscribe:
http://www.antlr.org/mailman/options/antlr-interest/your-email-address

From bradjcox at gmail.com  Wed Jun 20 04:13:09 2012
From: bradjcox at gmail.com (Brad Cox)
Date: Wed, 20 Jun 2012 07:13:09 -0400
Subject: [antlr-interest] Antlr3 in Eclipse and Maven?
In-Reply-To: <5fad0d88143479e6ddd6b55683ff75d9@mail.gmail.com>
References: <CAH2etF5MhfzMVfxY0+ngtmTfJBKfz0kz4fhetLAb263UEYuvWA@mail.gmail.com>
	<5fad0d88143479e6ddd6b55683ff75d9@mail.gmail.com>
Message-ID: <CAH2etF58cPYDeTanqosCDxCPsmU_JejA9UVAQGUR-9yTejNkSA@mail.gmail.com>

 I'm using it exactly as in the wiki.

> <plugin>
>
>   <groupId>org.antlr</groupId>
>
>   <artifactId>antlr3-maven-plugin</artifactId>
>
>   <version>3.1.3-1</version>
>
>   <executions>
>
>   <execution>
>
>    <configuration>
>
>    <phase>generate-sources</phase>
>
>    <goals>
>
>     <goal>antlr3</goal>
>
>    </goals>
>
>    <conversionTimeout>10000</conversionTimeout>
>
>    <debug>true</debug>
>
>    <dfa>false</dfa>
>
>    <nfa>false</nfa>
>
>    <excludes>
>
>     <exclude />
>
>    </excludes>
>
>    <includes>
>
>     <include />
>
>    </includes>
>
>    <messageFormat>antlr</messageFormat>
>
>    <printGrammar>false</printGrammar>
>
>    <profile>false</profile>
>
>    <report>true</report>
>
>    <sourceDirectory>src/main/antlr3</sourceDirectory>
>
>    <libDirectory>src/main/antlr3/imports</libDirectory>
>
>    <outputDirectory>target/generated-sources/antlr3</outputDirectory>
>
>    <trace>false</trace>
>
>    <verbose>true</verbose>
>
>    </configuration>
>
>   </execution>
>
>   </executions>
>
>  </plugin>
>
>From the log it looks like the plugin is not being launched except right
after a clean:

------------------------------------------------------------------------
> [INFO] Building Xacml-Antlr 1.0-SNAPSHOT
> [INFO]
> ------------------------------------------------------------------------
> [INFO]
> [INFO] --- maven-resources-plugin:2.4.3:resources (default-resources) @
> Xacml-Antlr ---
> [INFO] Using 'UTF-8' encoding to copy filtered resources.
> [INFO] Copying 1 resource
> [INFO]
> [INFO] --- maven-compiler-plugin:2.3.2:compile (default-compile) @
> Xacml-Antlr ---
> [INFO] Nothing to compile - all classes are up to date
> [INFO]
> [INFO] --- maven-resources-plugin:2.4.3:testResources
> (default-testResources) @ Xacml-Antlr ---
> [INFO] Using 'UTF-8' encoding to copy filtered resources.
> [INFO] skip non existing resourceDirectory
> /Users/Brad/Dropbox/Xacml-Antlr/src/test/resources
> [INFO]
> [INFO] --- maven-compiler-plugin:2.3.2:testCompile (default-testCompile) @
> Xacml-Antlr ---
> [INFO] No sources to compile
> [INFO]
> [INFO] --- maven-surefire-plugin:2.12:test (default-test) @ Xacml-Antlr ---
> [INFO] Tests are skipped.
> [INFO]
> [INFO] --- maven-jar-plugin:2.3.1:jar (default-jar) @ Xacml-Antlr ---
> [INFO] Building jar:
> /Users/Brad/Dropbox/Xacml-Antlr/target/Xacml-Antlr-1.0-SNAPSHOT.jar
> [INFO] META-INF/maven/Xacml/Xacml-Antlr/pom.xml already added, skipping
> [INFO] META-INF/maven/Xacml/Xacml-Antlr/pom.properties already added,
> skipping
> [INFO]
> [INFO] --- maven-install-plugin:2.3.1:install (default-install) @
> Xacml-Antlr ---
> [INFO] Installing
> /Users/Brad/Dropbox/Xacml-Antlr/target/Xacml-Antlr-1.0-SNAPSHOT.jar to
> /Users/Brad/.m2/repository/Xacml/Xacml-Antlr/1.0-SNAPSHOT/Xacml-Antlr-1.0-SNAPSHOT.jar
> [INFO] Installing /Users/Brad/Dropbox/Xacml-Antlr/pom.xml to
> /Users/Brad/.m2/repository/Xacml/Xacml-Antlr/1.0-SNAPSHOT/Xacml-Antlr-1.0-SNAPSHOT.pom
> [INFO]
> ------------------------------------------------------------------------
> [INFO] BUILD SUCCESS
> [INFO]
> ------------------------------------------------------------------------


On Wed, Jun 20, 2012 at 7:05 AM, Jim Idle <jimi at temporal-wave.com> wrote:

> You are probably using the wrong Maven plugin. Find the docs in the wiki
> and it will tell you the correct name,
>
> JIm
>
> -----Original Message-----
> From: antlr-interest-bounces at antlr.org
> [mailto:antlr-interest-bounces at antlr.org] On Behalf Of Brad Cox
> Sent: Wednesday, June 20, 2012 6:48 PM
> To: Terence Parr; ANTLR interest; stringtemplate-interest at antlr.org List
> Subject: [antlr-interest] Antlr3 in Eclipse and Maven?
>
> I've an antlr3 grammar that compiles fine in AntlrWorks. I'm trying to
> load it into Eclipse with Maven to start work on the non-grammar bits.
>
> Problem is it won't compile in either. Error flags are on the first line,
> grammar ...;, and nothing I've tried will remove them. Somehow antlr2 is
> getting involved in the compile step.
>
> The dependency list shows antlr-runtime-3.2.jar and stringtemplate-3.2.jar
> now. Previously there was an antlr2 jar that I've explicitly excluded.
> Didn't make a difference.
>
> My best guess is that the antlr3 maven plugin is launching antlr2, not
> antlr3, but I have no visibility into what that plugin is doing.
>
> <groupId>org.antlr</groupId>
> <artifactId>antlr3-maven-plugin</artifactId>
> <version>3.1.3-1</version
>
> There's also likely confusion over which eclipse plugin I should be using.
> After some searching I removed everything but the one from certiv, but no
> joy.
>
> Could someone point me to a known-to-work reference? Thanks!
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>



-- 
Cell: 703-594-1883
Blog: http://bradjcox.blogspot.com
Web: http://virtualschool.edu
Manassas VA 20111

From jimi at temporal-wave.com  Wed Jun 20 04:20:10 2012
From: jimi at temporal-wave.com (Jim Idle)
Date: Wed, 20 Jun 2012 19:20:10 +0800
Subject: [antlr-interest] Antlr3 in Eclipse and Maven?
In-Reply-To: <CAH2etF58cPYDeTanqosCDxCPsmU_JejA9UVAQGUR-9yTejNkSA@mail.gmail.com>
References: <CAH2etF5MhfzMVfxY0+ngtmTfJBKfz0kz4fhetLAb263UEYuvWA@mail.gmail.com>
	<5fad0d88143479e6ddd6b55683ff75d9@mail.gmail.com>
	<CAH2etF58cPYDeTanqosCDxCPsmU_JejA9UVAQGUR-9yTejNkSA@mail.gmail.com>
Message-ID: <180e98ca41c5a5caef7f02957cb3a8d0@mail.gmail.com>

Do you want that version? However, what is the association in Eclipse with
.g files?



Jim



*From:* Brad Cox [mailto:bradjcox at gmail.com]
*Sent:* Wednesday, June 20, 2012 7:13 PM
*To:* Jim Idle
*Cc:* Terence Parr; ANTLR interest; stringtemplate-interest at antlr.org
*Subject:* Re: [antlr-interest] Antlr3 in Eclipse and Maven?



I'm using it exactly as in the wiki.

<plugin>

<groupId>org.antlr</groupId>

<artifactId>antlr3-maven-plugin</artifactId>

<version>3.1.3-1</version>

<executions>

<execution>

<configuration>

<phase>generate-sources</phase>

<goals>

<goal>antlr3</goal>

</goals>

<conversionTimeout>10000</conversionTimeout>

<debug>true</debug>

<dfa>false</dfa>

<nfa>false</nfa>

<excludes>

<exclude />

</excludes>

<includes>

<include />

</includes>

<messageFormat>antlr</messageFormat>

<printGrammar>false</printGrammar>

<profile>false</profile>

<report>true</report>

<sourceDirectory>src/main/antlr3</sourceDirectory>

<libDirectory>src/main/antlr3/imports</libDirectory>

<outputDirectory>target/generated-sources/antlr3</outputDirectory>

<trace>false</trace>

<verbose>true</verbose>

</configuration>

</execution>

</executions>

</plugin>

>From the log it looks like the plugin is not being launched except right
after a clean:



------------------------------------------------------------------------
[INFO] Building Xacml-Antlr 1.0-SNAPSHOT
[INFO]
------------------------------------------------------------------------
[INFO]
[INFO] --- maven-resources-plugin:2.4.3:resources (default-resources) @
Xacml-Antlr ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] Copying 1 resource
[INFO]
[INFO] --- maven-compiler-plugin:2.3.2:compile (default-compile) @
Xacml-Antlr ---
[INFO] Nothing to compile - all classes are up to date
[INFO]
[INFO] --- maven-resources-plugin:2.4.3:testResources
(default-testResources) @ Xacml-Antlr ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] skip non existing resourceDirectory
/Users/Brad/Dropbox/Xacml-Antlr/src/test/resources
[INFO]
[INFO] --- maven-compiler-plugin:2.3.2:testCompile (default-testCompile) @
Xacml-Antlr ---
[INFO] No sources to compile
[INFO]
[INFO] --- maven-surefire-plugin:2.12:test (default-test) @ Xacml-Antlr ---
[INFO] Tests are skipped.
[INFO]
[INFO] --- maven-jar-plugin:2.3.1:jar (default-jar) @ Xacml-Antlr ---
[INFO] Building jar:
/Users/Brad/Dropbox/Xacml-Antlr/target/Xacml-Antlr-1.0-SNAPSHOT.jar
[INFO] META-INF/maven/Xacml/Xacml-Antlr/pom.xml already added, skipping
[INFO] META-INF/maven/Xacml/Xacml-Antlr/pom.properties already added,
skipping
[INFO]
[INFO] --- maven-install-plugin:2.3.1:install (default-install) @
Xacml-Antlr ---
[INFO] Installing
/Users/Brad/Dropbox/Xacml-Antlr/target/Xacml-Antlr-1.0-SNAPSHOT.jar to
/Users/Brad/.m2/repository/Xacml/Xacml-Antlr/1.0-SNAPSHOT/Xacml-Antlr-1.0-SNAPSHOT.jar
[INFO] Installing /Users/Brad/Dropbox/Xacml-Antlr/pom.xml to
/Users/Brad/.m2/repository/Xacml/Xacml-Antlr/1.0-SNAPSHOT/Xacml-Antlr-1.0-SNAPSHOT.pom
[INFO]
------------------------------------------------------------------------
[INFO] BUILD SUCCESS
[INFO]
------------------------------------------------------------------------



On Wed, Jun 20, 2012 at 7:05 AM, Jim Idle <jimi at temporal-wave.com> wrote:

You are probably using the wrong Maven plugin. Find the docs in the wiki
and it will tell you the correct name,

JIm


-----Original Message-----
From: antlr-interest-bounces at antlr.org
[mailto:antlr-interest-bounces at antlr.org] On Behalf Of Brad Cox
Sent: Wednesday, June 20, 2012 6:48 PM
To: Terence Parr; ANTLR interest; stringtemplate-interest at antlr.org List
Subject: [antlr-interest] Antlr3 in Eclipse and Maven?

I've an antlr3 grammar that compiles fine in AntlrWorks. I'm trying to
load it into Eclipse with Maven to start work on the non-grammar bits.

Problem is it won't compile in either. Error flags are on the first line,
grammar ...;, and nothing I've tried will remove them. Somehow antlr2 is
getting involved in the compile step.

The dependency list shows antlr-runtime-3.2.jar and stringtemplate-3.2.jar
now. Previously there was an antlr2 jar that I've explicitly excluded.
Didn't make a difference.

My best guess is that the antlr3 maven plugin is launching antlr2, not
antlr3, but I have no visibility into what that plugin is doing.

<groupId>org.antlr</groupId>
<artifactId>antlr3-maven-plugin</artifactId>
<version>3.1.3-1</version

There's also likely confusion over which eclipse plugin I should be using.
After some searching I removed everything but the one from certiv, but no
joy.

Could someone point me to a known-to-work reference? Thanks!

List: http://www.antlr.org/mailman/listinfo/antlr-interest
Unsubscribe:
http://www.antlr.org/mailman/options/antlr-interest/your-email-address





-- 
Cell: 703-594-1883
Blog: http://bradjcox.blogspot.com
Web: http://virtualschool.edu
Manassas VA 20111

From bradjcox at gmail.com  Wed Jun 20 04:23:03 2012
From: bradjcox at gmail.com (Brad Cox)
Date: Wed, 20 Jun 2012 07:23:03 -0400
Subject: [antlr-interest] Antlr3 in Eclipse and Maven?
In-Reply-To: <180e98ca41c5a5caef7f02957cb3a8d0@mail.gmail.com>
References: <CAH2etF5MhfzMVfxY0+ngtmTfJBKfz0kz4fhetLAb263UEYuvWA@mail.gmail.com>
	<5fad0d88143479e6ddd6b55683ff75d9@mail.gmail.com>
	<CAH2etF58cPYDeTanqosCDxCPsmU_JejA9UVAQGUR-9yTejNkSA@mail.gmail.com>
	<180e98ca41c5a5caef7f02957cb3a8d0@mail.gmail.com>
Message-ID: <CAH2etF7gZUgCJaYf7tmS5TPLJq5ZaCj94up2VUTu+G03wEto=A@mail.gmail.com>

I'm easy; I just want whatever version WORKS. And that's the one specified
in the wiki. Open with defaults to Antlr editor. Is that what you mean?

On Wed, Jun 20, 2012 at 7:20 AM, Jim Idle <jimi at temporal-wave.com> wrote:

> Do you want that version? However, what is the association in Eclipse with
> .g files?
>
>
>
> Jim
>
>
>
> *From:* Brad Cox [mailto:bradjcox at gmail.com]
> *Sent:* Wednesday, June 20, 2012 7:13 PM
> *To:* Jim Idle
> *Cc:* Terence Parr; ANTLR interest; stringtemplate-interest at antlr.org
> *Subject:* Re: [antlr-interest] Antlr3 in Eclipse and Maven?
>
>
>
> I'm using it exactly as in the wiki.
>
> <plugin>
>
> <groupId>org.antlr</groupId>
>
> <artifactId>antlr3-maven-plugin</artifactId>
>
> <version>3.1.3-1</version>
>
> <executions>
>
> <execution>
>
> <configuration>
>
> <phase>generate-sources</phase>
>
> <goals>
>
> <goal>antlr3</goal>
>
> </goals>
>
> <conversionTimeout>10000</conversionTimeout>
>
> <debug>true</debug>
>
> <dfa>false</dfa>
>
> <nfa>false</nfa>
>
> <excludes>
>
> <exclude />
>
> </excludes>
>
> <includes>
>
> <include />
>
> </includes>
>
> <messageFormat>antlr</messageFormat>
>
> <printGrammar>false</printGrammar>
>
> <profile>false</profile>
>
> <report>true</report>
>
> <sourceDirectory>src/main/antlr3</sourceDirectory>
>
> <libDirectory>src/main/antlr3/imports</libDirectory>
>
> <outputDirectory>target/generated-sources/antlr3</outputDirectory>
>
> <trace>false</trace>
>
> <verbose>true</verbose>
>
> </configuration>
>
> </execution>
>
> </executions>
>
> </plugin>
>
> >From the log it looks like the plugin is not being launched except right
> after a clean:
>
>
>
> ------------------------------------------------------------------------
> [INFO] Building Xacml-Antlr 1.0-SNAPSHOT
> [INFO]
> ------------------------------------------------------------------------
> [INFO]
> [INFO] --- maven-resources-plugin:2.4.3:resources (default-resources) @
> Xacml-Antlr ---
> [INFO] Using 'UTF-8' encoding to copy filtered resources.
> [INFO] Copying 1 resource
> [INFO]
> [INFO] --- maven-compiler-plugin:2.3.2:compile (default-compile) @
> Xacml-Antlr ---
> [INFO] Nothing to compile - all classes are up to date
> [INFO]
> [INFO] --- maven-resources-plugin:2.4.3:testResources
> (default-testResources) @ Xacml-Antlr ---
> [INFO] Using 'UTF-8' encoding to copy filtered resources.
> [INFO] skip non existing resourceDirectory
> /Users/Brad/Dropbox/Xacml-Antlr/src/test/resources
> [INFO]
> [INFO] --- maven-compiler-plugin:2.3.2:testCompile (default-testCompile) @
> Xacml-Antlr ---
> [INFO] No sources to compile
> [INFO]
> [INFO] --- maven-surefire-plugin:2.12:test (default-test) @ Xacml-Antlr ---
> [INFO] Tests are skipped.
> [INFO]
> [INFO] --- maven-jar-plugin:2.3.1:jar (default-jar) @ Xacml-Antlr ---
> [INFO] Building jar:
> /Users/Brad/Dropbox/Xacml-Antlr/target/Xacml-Antlr-1.0-SNAPSHOT.jar
> [INFO] META-INF/maven/Xacml/Xacml-Antlr/pom.xml already added, skipping
> [INFO] META-INF/maven/Xacml/Xacml-Antlr/pom.properties already added,
> skipping
> [INFO]
> [INFO] --- maven-install-plugin:2.3.1:install (default-install) @
> Xacml-Antlr ---
> [INFO] Installing
> /Users/Brad/Dropbox/Xacml-Antlr/target/Xacml-Antlr-1.0-SNAPSHOT.jar to
>
> /Users/Brad/.m2/repository/Xacml/Xacml-Antlr/1.0-SNAPSHOT/Xacml-Antlr-1.0-SNAPSHOT.jar
> [INFO] Installing /Users/Brad/Dropbox/Xacml-Antlr/pom.xml to
>
> /Users/Brad/.m2/repository/Xacml/Xacml-Antlr/1.0-SNAPSHOT/Xacml-Antlr-1.0-SNAPSHOT.pom
> [INFO]
> ------------------------------------------------------------------------
> [INFO] BUILD SUCCESS
> [INFO]
> ------------------------------------------------------------------------
>
>
>
> On Wed, Jun 20, 2012 at 7:05 AM, Jim Idle <jimi at temporal-wave.com> wrote:
>
> You are probably using the wrong Maven plugin. Find the docs in the wiki
> and it will tell you the correct name,
>
> JIm
>
>
> -----Original Message-----
> From: antlr-interest-bounces at antlr.org
> [mailto:antlr-interest-bounces at antlr.org] On Behalf Of Brad Cox
> Sent: Wednesday, June 20, 2012 6:48 PM
> To: Terence Parr; ANTLR interest; stringtemplate-interest at antlr.org List
> Subject: [antlr-interest] Antlr3 in Eclipse and Maven?
>
> I've an antlr3 grammar that compiles fine in AntlrWorks. I'm trying to
> load it into Eclipse with Maven to start work on the non-grammar bits.
>
> Problem is it won't compile in either. Error flags are on the first line,
> grammar ...;, and nothing I've tried will remove them. Somehow antlr2 is
> getting involved in the compile step.
>
> The dependency list shows antlr-runtime-3.2.jar and stringtemplate-3.2.jar
> now. Previously there was an antlr2 jar that I've explicitly excluded.
> Didn't make a difference.
>
> My best guess is that the antlr3 maven plugin is launching antlr2, not
> antlr3, but I have no visibility into what that plugin is doing.
>
> <groupId>org.antlr</groupId>
> <artifactId>antlr3-maven-plugin</artifactId>
> <version>3.1.3-1</version
>
> There's also likely confusion over which eclipse plugin I should be using.
> After some searching I removed everything but the one from certiv, but no
> joy.
>
> Could someone point me to a known-to-work reference? Thanks!
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>
>
>
>
>
> --
> Cell: 703-594-1883
> Blog: http://bradjcox.blogspot.com
> Web: http://virtualschool.edu
> Manassas VA 20111
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>



-- 
Cell: 703-594-1883
Blog: http://bradjcox.blogspot.com
Web: http://virtualschool.edu
Manassas VA 20111

From jimi at temporal-wave.com  Wed Jun 20 04:29:29 2012
From: jimi at temporal-wave.com (Jim Idle)
Date: Wed, 20 Jun 2012 19:29:29 +0800
Subject: [antlr-interest] Antlr3 in Eclipse and Maven?
In-Reply-To: <CAH2etF7gZUgCJaYf7tmS5TPLJq5ZaCj94up2VUTu+G03wEto=A@mail.gmail.com>
References: <CAH2etF5MhfzMVfxY0+ngtmTfJBKfz0kz4fhetLAb263UEYuvWA@mail.gmail.com>
	<5fad0d88143479e6ddd6b55683ff75d9@mail.gmail.com>
	<CAH2etF58cPYDeTanqosCDxCPsmU_JejA9UVAQGUR-9yTejNkSA@mail.gmail.com>
	<180e98ca41c5a5caef7f02957cb3a8d0@mail.gmail.com>
	<CAH2etF7gZUgCJaYf7tmS5TPLJq5ZaCj94up2VUTu+G03wEto=A@mail.gmail.com>
Message-ID: <0282f1a6a2aaca2fa47e9d931898dfba@mail.gmail.com>

Yes ? I don?t know where that Editor comes from but I doubt that it is up
to date. If you do run as->maven install, does the project compile? I
suspect that the editor is just incorrect and you need to treat it like an
normal text file.







*From:* Brad Cox [mailto:bradjcox at gmail.com]
*Sent:* Wednesday, June 20, 2012 7:23 PM
*To:* Jim Idle
*Cc:* ANTLR interest
*Subject:* Re: [antlr-interest] Antlr3 in Eclipse and Maven?



I'm easy; I just want whatever version WORKS. And that's the one specified
in the wiki. Open with defaults to Antlr editor. Is that what you mean?

On Wed, Jun 20, 2012 at 7:20 AM, Jim Idle <jimi at temporal-wave.com> wrote:

Do you want that version? However, what is the association in Eclipse with
.g files?



Jim



*From:* Brad Cox [mailto:bradjcox at gmail.com]
*Sent:* Wednesday, June 20, 2012 7:13 PM
*To:* Jim Idle
*Cc:* Terence Parr; ANTLR interest; stringtemplate-interest at antlr.org
*Subject:* Re: [antlr-interest] Antlr3 in Eclipse and Maven?




I'm using it exactly as in the wiki.

<plugin>

<groupId>org.antlr</groupId>

<artifactId>antlr3-maven-plugin</artifactId>

<version>3.1.3-1</version>

<executions>

<execution>

<configuration>

<phase>generate-sources</phase>

<goals>

<goal>antlr3</goal>

</goals>

<conversionTimeout>10000</conversionTimeout>

<debug>true</debug>

<dfa>false</dfa>

<nfa>false</nfa>

<excludes>

<exclude />

</excludes>

<includes>

<include />

</includes>

<messageFormat>antlr</messageFormat>

<printGrammar>false</printGrammar>

<profile>false</profile>

<report>true</report>

<sourceDirectory>src/main/antlr3</sourceDirectory>

<libDirectory>src/main/antlr3/imports</libDirectory>

<outputDirectory>target/generated-sources/antlr3</outputDirectory>

<trace>false</trace>

<verbose>true</verbose>

</configuration>

</execution>

</executions>

</plugin>

>From the log it looks like the plugin is not being launched except right
after a clean:



------------------------------------------------------------------------
[INFO] Building Xacml-Antlr 1.0-SNAPSHOT
[INFO]
------------------------------------------------------------------------
[INFO]
[INFO] --- maven-resources-plugin:2.4.3:resources (default-resources) @
Xacml-Antlr ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] Copying 1 resource
[INFO]
[INFO] --- maven-compiler-plugin:2.3.2:compile (default-compile) @
Xacml-Antlr ---
[INFO] Nothing to compile - all classes are up to date
[INFO]
[INFO] --- maven-resources-plugin:2.4.3:testResources
(default-testResources) @ Xacml-Antlr ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] skip non existing resourceDirectory
/Users/Brad/Dropbox/Xacml-Antlr/src/test/resources
[INFO]
[INFO] --- maven-compiler-plugin:2.3.2:testCompile (default-testCompile) @
Xacml-Antlr ---
[INFO] No sources to compile
[INFO]
[INFO] --- maven-surefire-plugin:2.12:test (default-test) @ Xacml-Antlr ---
[INFO] Tests are skipped.
[INFO]
[INFO] --- maven-jar-plugin:2.3.1:jar (default-jar) @ Xacml-Antlr ---
[INFO] Building jar:
/Users/Brad/Dropbox/Xacml-Antlr/target/Xacml-Antlr-1.0-SNAPSHOT.jar
[INFO] META-INF/maven/Xacml/Xacml-Antlr/pom.xml already added, skipping
[INFO] META-INF/maven/Xacml/Xacml-Antlr/pom.properties already added,
skipping
[INFO]
[INFO] --- maven-install-plugin:2.3.1:install (default-install) @
Xacml-Antlr ---
[INFO] Installing
/Users/Brad/Dropbox/Xacml-Antlr/target/Xacml-Antlr-1.0-SNAPSHOT.jar to
/Users/Brad/.m2/repository/Xacml/Xacml-Antlr/1.0-SNAPSHOT/Xacml-Antlr-1.0-SNAPSHOT.jar
[INFO] Installing /Users/Brad/Dropbox/Xacml-Antlr/pom.xml to
/Users/Brad/.m2/repository/Xacml/Xacml-Antlr/1.0-SNAPSHOT/Xacml-Antlr-1.0-SNAPSHOT.pom
[INFO]
------------------------------------------------------------------------
[INFO] BUILD SUCCESS
[INFO]
------------------------------------------------------------------------



On Wed, Jun 20, 2012 at 7:05 AM, Jim Idle <jimi at temporal-wave.com> wrote:

You are probably using the wrong Maven plugin. Find the docs in the wiki
and it will tell you the correct name,

JIm


-----Original Message-----
From: antlr-interest-bounces at antlr.org
[mailto:antlr-interest-bounces at antlr.org] On Behalf Of Brad Cox
Sent: Wednesday, June 20, 2012 6:48 PM
To: Terence Parr; ANTLR interest; stringtemplate-interest at antlr.org List
Subject: [antlr-interest] Antlr3 in Eclipse and Maven?

I've an antlr3 grammar that compiles fine in AntlrWorks. I'm trying to
load it into Eclipse with Maven to start work on the non-grammar bits.

Problem is it won't compile in either. Error flags are on the first line,
grammar ...;, and nothing I've tried will remove them. Somehow antlr2 is
getting involved in the compile step.

The dependency list shows antlr-runtime-3.2.jar and stringtemplate-3.2.jar
now. Previously there was an antlr2 jar that I've explicitly excluded.
Didn't make a difference.

My best guess is that the antlr3 maven plugin is launching antlr2, not
antlr3, but I have no visibility into what that plugin is doing.

<groupId>org.antlr</groupId>
<artifactId>antlr3-maven-plugin</artifactId>
<version>3.1.3-1</version

There's also likely confusion over which eclipse plugin I should be using.
After some searching I removed everything but the one from certiv, but no
joy.

Could someone point me to a known-to-work reference? Thanks!

List: http://www.antlr.org/mailman/listinfo/antlr-interest
Unsubscribe:
http://www.antlr.org/mailman/options/antlr-interest/your-email-address





--
Cell: 703-594-1883
Blog: http://bradjcox.blogspot.com
Web: http://virtualschool.edu
Manassas VA 20111

List: http://www.antlr.org/mailman/listinfo/antlr-interest
Unsubscribe:
http://www.antlr.org/mailman/options/antlr-interest/your-email-address





-- 
Cell: 703-594-1883
Blog: http://bradjcox.blogspot.com
Web: http://virtualschool.edu
Manassas VA 20111

From bradjcox at gmail.com  Wed Jun 20 04:31:07 2012
From: bradjcox at gmail.com (Brad Cox)
Date: Wed, 20 Jun 2012 07:31:07 -0400
Subject: [antlr-interest] Antlr3 in Eclipse and Maven?
In-Reply-To: <CAH2etF7gZUgCJaYf7tmS5TPLJq5ZaCj94up2VUTu+G03wEto=A@mail.gmail.com>
References: <CAH2etF5MhfzMVfxY0+ngtmTfJBKfz0kz4fhetLAb263UEYuvWA@mail.gmail.com>
	<5fad0d88143479e6ddd6b55683ff75d9@mail.gmail.com>
	<CAH2etF58cPYDeTanqosCDxCPsmU_JejA9UVAQGUR-9yTejNkSA@mail.gmail.com>
	<180e98ca41c5a5caef7f02957cb3a8d0@mail.gmail.com>
	<CAH2etF7gZUgCJaYf7tmS5TPLJq5ZaCj94up2VUTu+G03wEto=A@mail.gmail.com>
Message-ID: <CAH2etF4Nmmdx+Gj0uAGSMjQ7BYZnKB7jq2f4wWoZam0NAp97iA@mail.gmail.com>

It seems the maven problem is that the plugin isn't launching, neither
during mvn install or mvn-generate-sources. I've never seen this before.
Anybody got a clue?

I've attached the whole pom. Could someone try it out?

On Wed, Jun 20, 2012 at 7:23 AM, Brad Cox <bradjcox at gmail.com> wrote:

> I'm easy; I just want whatever version WORKS. And that's the one specified
> in the wiki. Open with defaults to Antlr editor. Is that what you mean?
>
>
> On Wed, Jun 20, 2012 at 7:20 AM, Jim Idle <jimi at temporal-wave.com> wrote:
>
>> Do you want that version? However, what is the association in Eclipse with
>> .g files?
>>
>>
>>
>> Jim
>>
>>
>>
>> *From:* Brad Cox [mailto:bradjcox at gmail.com]
>> *Sent:* Wednesday, June 20, 2012 7:13 PM
>> *To:* Jim Idle
>> *Cc:* Terence Parr; ANTLR interest; stringtemplate-interest at antlr.org
>> *Subject:* Re: [antlr-interest] Antlr3 in Eclipse and Maven?
>>
>>
>>
>> I'm using it exactly as in the wiki.
>>
>> <plugin>
>>
>> <groupId>org.antlr</groupId>
>>
>> <artifactId>antlr3-maven-plugin</artifactId>
>>
>> <version>3.1.3-1</version>
>>
>> <executions>
>>
>> <execution>
>>
>> <configuration>
>>
>> <phase>generate-sources</phase>
>>
>> <goals>
>>
>> <goal>antlr3</goal>
>>
>> </goals>
>>
>> <conversionTimeout>10000</conversionTimeout>
>>
>> <debug>true</debug>
>>
>> <dfa>false</dfa>
>>
>> <nfa>false</nfa>
>>
>> <excludes>
>>
>> <exclude />
>>
>> </excludes>
>>
>> <includes>
>>
>> <include />
>>
>> </includes>
>>
>> <messageFormat>antlr</messageFormat>
>>
>> <printGrammar>false</printGrammar>
>>
>> <profile>false</profile>
>>
>> <report>true</report>
>>
>> <sourceDirectory>src/main/antlr3</sourceDirectory>
>>
>> <libDirectory>src/main/antlr3/imports</libDirectory>
>>
>> <outputDirectory>target/generated-sources/antlr3</outputDirectory>
>>
>> <trace>false</trace>
>>
>> <verbose>true</verbose>
>>
>> </configuration>
>>
>> </execution>
>>
>> </executions>
>>
>> </plugin>
>>
>> >From the log it looks like the plugin is not being launched except right
>> after a clean:
>>
>>
>>
>> ------------------------------------------------------------------------
>> [INFO] Building Xacml-Antlr 1.0-SNAPSHOT
>> [INFO]
>> ------------------------------------------------------------------------
>> [INFO]
>> [INFO] --- maven-resources-plugin:2.4.3:resources (default-resources) @
>> Xacml-Antlr ---
>> [INFO] Using 'UTF-8' encoding to copy filtered resources.
>> [INFO] Copying 1 resource
>> [INFO]
>> [INFO] --- maven-compiler-plugin:2.3.2:compile (default-compile) @
>> Xacml-Antlr ---
>> [INFO] Nothing to compile - all classes are up to date
>> [INFO]
>> [INFO] --- maven-resources-plugin:2.4.3:testResources
>> (default-testResources) @ Xacml-Antlr ---
>> [INFO] Using 'UTF-8' encoding to copy filtered resources.
>> [INFO] skip non existing resourceDirectory
>> /Users/Brad/Dropbox/Xacml-Antlr/src/test/resources
>> [INFO]
>> [INFO] --- maven-compiler-plugin:2.3.2:testCompile (default-testCompile) @
>> Xacml-Antlr ---
>> [INFO] No sources to compile
>> [INFO]
>> [INFO] --- maven-surefire-plugin:2.12:test (default-test) @ Xacml-Antlr
>> ---
>> [INFO] Tests are skipped.
>> [INFO]
>> [INFO] --- maven-jar-plugin:2.3.1:jar (default-jar) @ Xacml-Antlr ---
>> [INFO] Building jar:
>> /Users/Brad/Dropbox/Xacml-Antlr/target/Xacml-Antlr-1.0-SNAPSHOT.jar
>> [INFO] META-INF/maven/Xacml/Xacml-Antlr/pom.xml already added, skipping
>> [INFO] META-INF/maven/Xacml/Xacml-Antlr/pom.properties already added,
>> skipping
>> [INFO]
>> [INFO] --- maven-install-plugin:2.3.1:install (default-install) @
>> Xacml-Antlr ---
>> [INFO] Installing
>> /Users/Brad/Dropbox/Xacml-Antlr/target/Xacml-Antlr-1.0-SNAPSHOT.jar to
>>
>> /Users/Brad/.m2/repository/Xacml/Xacml-Antlr/1.0-SNAPSHOT/Xacml-Antlr-1.0-SNAPSHOT.jar
>> [INFO] Installing /Users/Brad/Dropbox/Xacml-Antlr/pom.xml to
>>
>> /Users/Brad/.m2/repository/Xacml/Xacml-Antlr/1.0-SNAPSHOT/Xacml-Antlr-1.0-SNAPSHOT.pom
>> [INFO]
>> ------------------------------------------------------------------------
>> [INFO] BUILD SUCCESS
>> [INFO]
>> ------------------------------------------------------------------------
>>
>>
>>
>> On Wed, Jun 20, 2012 at 7:05 AM, Jim Idle <jimi at temporal-wave.com> wrote:
>>
>> You are probably using the wrong Maven plugin. Find the docs in the wiki
>> and it will tell you the correct name,
>>
>> JIm
>>
>>
>> -----Original Message-----
>> From: antlr-interest-bounces at antlr.org
>> [mailto:antlr-interest-bounces at antlr.org] On Behalf Of Brad Cox
>> Sent: Wednesday, June 20, 2012 6:48 PM
>> To: Terence Parr; ANTLR interest; stringtemplate-interest at antlr.org List
>> Subject: [antlr-interest] Antlr3 in Eclipse and Maven?
>>
>> I've an antlr3 grammar that compiles fine in AntlrWorks. I'm trying to
>> load it into Eclipse with Maven to start work on the non-grammar bits.
>>
>> Problem is it won't compile in either. Error flags are on the first line,
>> grammar ...;, and nothing I've tried will remove them. Somehow antlr2 is
>> getting involved in the compile step.
>>
>> The dependency list shows antlr-runtime-3.2.jar and stringtemplate-3.2.jar
>> now. Previously there was an antlr2 jar that I've explicitly excluded.
>> Didn't make a difference.
>>
>> My best guess is that the antlr3 maven plugin is launching antlr2, not
>> antlr3, but I have no visibility into what that plugin is doing.
>>
>> <groupId>org.antlr</groupId>
>> <artifactId>antlr3-maven-plugin</artifactId>
>> <version>3.1.3-1</version
>>
>> There's also likely confusion over which eclipse plugin I should be using.
>> After some searching I removed everything but the one from certiv, but no
>> joy.
>>
>> Could someone point me to a known-to-work reference? Thanks!
>>
>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>> Unsubscribe:
>> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>>
>>
>>
>>
>>
>> --
>> Cell: 703-594-1883
>> Blog: http://bradjcox.blogspot.com
>> Web: http://virtualschool.edu
>> Manassas VA 20111
>>
>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>> Unsubscribe:
>> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>>
>
>
>
> --
> Cell: 703-594-1883
> Blog: http://bradjcox.blogspot.com
> Web: http://virtualschool.edu
> Manassas VA 20111
>
>


-- 
Cell: 703-594-1883
Blog: http://bradjcox.blogspot.com
Web: http://virtualschool.edu
Manassas VA 20111

From bradjcox at gmail.com  Wed Jun 20 04:48:12 2012
From: bradjcox at gmail.com (Brad Cox)
Date: Wed, 20 Jun 2012 07:48:12 -0400
Subject: [antlr-interest] Antlr3 in Eclipse and Maven?
In-Reply-To: <CAH2etF4Nmmdx+Gj0uAGSMjQ7BYZnKB7jq2f4wWoZam0NAp97iA@mail.gmail.com>
References: <CAH2etF5MhfzMVfxY0+ngtmTfJBKfz0kz4fhetLAb263UEYuvWA@mail.gmail.com>
	<5fad0d88143479e6ddd6b55683ff75d9@mail.gmail.com>
	<CAH2etF58cPYDeTanqosCDxCPsmU_JejA9UVAQGUR-9yTejNkSA@mail.gmail.com>
	<180e98ca41c5a5caef7f02957cb3a8d0@mail.gmail.com>
	<CAH2etF7gZUgCJaYf7tmS5TPLJq5ZaCj94up2VUTu+G03wEto=A@mail.gmail.com>
	<CAH2etF4Nmmdx+Gj0uAGSMjQ7BYZnKB7jq2f4wWoZam0NAp97iA@mail.gmail.com>
Message-ID: <CAH2etF7jHwKQBEuiJBiVE7_TM90OvoPAsqwzmT=xjiKz4JP8jA@mail.gmail.com>

A clue? Running maven from the command line like this DOES at least compile
.g to .java but that's hardly a practical workaround:

mvn org.antlr:antlr3-maven-plugin:3.1.3-1:antlr

[INFO] Scanning for projects...
> [INFO]
>
> [INFO]
> ------------------------------------------------------------------------
> [INFO] Building Xacml-Antlr 1.0-SNAPSHOT
> [INFO]
> ------------------------------------------------------------------------
> [INFO]
> [INFO] --- antlr3-maven-plugin:3.1.3-1:antlr (default-cli) @ Xacml-Antlr
> ---
> [INFO] ANTLR: Processing source directory
> /Users/Brad/Dropbox/Xacml-Antlr/src/main/antlr3
> ANTLR Parser Generator  Version 3.1.3 Mar 17, 2009 19:23:44
> my/Xacml.g
> [INFO]
> ------------------------------------------------------------------------
> [INFO] BUILD SUCCESS


which suggests a plugin bug, probably in its handling
of <goal>antlr3</goal>. I don't think maven has an antlr3 goal so its not
firing the plugin.

On Wed, Jun 20, 2012 at 7:31 AM, Brad Cox <bradjcox at gmail.com> wrote:

> It seems the maven problem is that the plugin isn't launching, neither
> during mvn install or mvn-generate-sources. I've never seen this before.
> Anybody got a clue?
>
> I've attached the whole pom. Could someone try it out?
>
>
> On Wed, Jun 20, 2012 at 7:23 AM, Brad Cox <bradjcox at gmail.com> wrote:
>
>> I'm easy; I just want whatever version WORKS. And that's the one
>> specified in the wiki. Open with defaults to Antlr editor. Is that what you
>> mean?
>>
>>
>> On Wed, Jun 20, 2012 at 7:20 AM, Jim Idle <jimi at temporal-wave.com> wrote:
>>
>>> Do you want that version? However, what is the association in Eclipse
>>> with
>>> .g files?
>>>
>>>
>>>
>>> Jim
>>>
>>>
>>>
>>> *From:* Brad Cox [mailto:bradjcox at gmail.com]
>>> *Sent:* Wednesday, June 20, 2012 7:13 PM
>>> *To:* Jim Idle
>>> *Cc:* Terence Parr; ANTLR interest; stringtemplate-interest at antlr.org
>>> *Subject:* Re: [antlr-interest] Antlr3 in Eclipse and Maven?
>>>
>>>
>>>
>>> I'm using it exactly as in the wiki.
>>>
>>> <plugin>
>>>
>>> <groupId>org.antlr</groupId>
>>>
>>> <artifactId>antlr3-maven-plugin</artifactId>
>>>
>>> <version>3.1.3-1</version>
>>>
>>> <executions>
>>>
>>> <execution>
>>>
>>> <configuration>
>>>
>>> <phase>generate-sources</phase>
>>>
>>> <goals>
>>>
>>> <goal>antlr3</goal>
>>>
>>> </goals>
>>>
>>> <conversionTimeout>10000</conversionTimeout>
>>>
>>> <debug>true</debug>
>>>
>>> <dfa>false</dfa>
>>>
>>> <nfa>false</nfa>
>>>
>>> <excludes>
>>>
>>> <exclude />
>>>
>>> </excludes>
>>>
>>> <includes>
>>>
>>> <include />
>>>
>>> </includes>
>>>
>>> <messageFormat>antlr</messageFormat>
>>>
>>> <printGrammar>false</printGrammar>
>>>
>>> <profile>false</profile>
>>>
>>> <report>true</report>
>>>
>>> <sourceDirectory>src/main/antlr3</sourceDirectory>
>>>
>>> <libDirectory>src/main/antlr3/imports</libDirectory>
>>>
>>> <outputDirectory>target/generated-sources/antlr3</outputDirectory>
>>>
>>> <trace>false</trace>
>>>
>>> <verbose>true</verbose>
>>>
>>> </configuration>
>>>
>>> </execution>
>>>
>>> </executions>
>>>
>>> </plugin>
>>>
>>> >From the log it looks like the plugin is not being launched except right
>>> after a clean:
>>>
>>>
>>>
>>> ------------------------------------------------------------------------
>>> [INFO] Building Xacml-Antlr 1.0-SNAPSHOT
>>> [INFO]
>>> ------------------------------------------------------------------------
>>> [INFO]
>>> [INFO] --- maven-resources-plugin:2.4.3:resources (default-resources) @
>>> Xacml-Antlr ---
>>> [INFO] Using 'UTF-8' encoding to copy filtered resources.
>>> [INFO] Copying 1 resource
>>> [INFO]
>>> [INFO] --- maven-compiler-plugin:2.3.2:compile (default-compile) @
>>> Xacml-Antlr ---
>>> [INFO] Nothing to compile - all classes are up to date
>>> [INFO]
>>> [INFO] --- maven-resources-plugin:2.4.3:testResources
>>> (default-testResources) @ Xacml-Antlr ---
>>> [INFO] Using 'UTF-8' encoding to copy filtered resources.
>>> [INFO] skip non existing resourceDirectory
>>> /Users/Brad/Dropbox/Xacml-Antlr/src/test/resources
>>> [INFO]
>>> [INFO] --- maven-compiler-plugin:2.3.2:testCompile (default-testCompile)
>>> @
>>> Xacml-Antlr ---
>>> [INFO] No sources to compile
>>> [INFO]
>>> [INFO] --- maven-surefire-plugin:2.12:test (default-test) @ Xacml-Antlr
>>> ---
>>> [INFO] Tests are skipped.
>>> [INFO]
>>> [INFO] --- maven-jar-plugin:2.3.1:jar (default-jar) @ Xacml-Antlr ---
>>> [INFO] Building jar:
>>> /Users/Brad/Dropbox/Xacml-Antlr/target/Xacml-Antlr-1.0-SNAPSHOT.jar
>>> [INFO] META-INF/maven/Xacml/Xacml-Antlr/pom.xml already added, skipping
>>> [INFO] META-INF/maven/Xacml/Xacml-Antlr/pom.properties already added,
>>> skipping
>>> [INFO]
>>> [INFO] --- maven-install-plugin:2.3.1:install (default-install) @
>>> Xacml-Antlr ---
>>> [INFO] Installing
>>> /Users/Brad/Dropbox/Xacml-Antlr/target/Xacml-Antlr-1.0-SNAPSHOT.jar to
>>>
>>> /Users/Brad/.m2/repository/Xacml/Xacml-Antlr/1.0-SNAPSHOT/Xacml-Antlr-1.0-SNAPSHOT.jar
>>> [INFO] Installing /Users/Brad/Dropbox/Xacml-Antlr/pom.xml to
>>>
>>> /Users/Brad/.m2/repository/Xacml/Xacml-Antlr/1.0-SNAPSHOT/Xacml-Antlr-1.0-SNAPSHOT.pom
>>> [INFO]
>>> ------------------------------------------------------------------------
>>> [INFO] BUILD SUCCESS
>>> [INFO]
>>> ------------------------------------------------------------------------
>>>
>>>
>>>
>>> On Wed, Jun 20, 2012 at 7:05 AM, Jim Idle <jimi at temporal-wave.com>
>>> wrote:
>>>
>>> You are probably using the wrong Maven plugin. Find the docs in the wiki
>>> and it will tell you the correct name,
>>>
>>> JIm
>>>
>>>
>>> -----Original Message-----
>>> From: antlr-interest-bounces at antlr.org
>>> [mailto:antlr-interest-bounces at antlr.org] On Behalf Of Brad Cox
>>> Sent: Wednesday, June 20, 2012 6:48 PM
>>> To: Terence Parr; ANTLR interest; stringtemplate-interest at antlr.org List
>>> Subject: [antlr-interest] Antlr3 in Eclipse and Maven?
>>>
>>> I've an antlr3 grammar that compiles fine in AntlrWorks. I'm trying to
>>> load it into Eclipse with Maven to start work on the non-grammar bits.
>>>
>>> Problem is it won't compile in either. Error flags are on the first line,
>>> grammar ...;, and nothing I've tried will remove them. Somehow antlr2 is
>>> getting involved in the compile step.
>>>
>>> The dependency list shows antlr-runtime-3.2.jar and
>>> stringtemplate-3.2.jar
>>> now. Previously there was an antlr2 jar that I've explicitly excluded.
>>> Didn't make a difference.
>>>
>>> My best guess is that the antlr3 maven plugin is launching antlr2, not
>>> antlr3, but I have no visibility into what that plugin is doing.
>>>
>>> <groupId>org.antlr</groupId>
>>> <artifactId>antlr3-maven-plugin</artifactId>
>>> <version>3.1.3-1</version
>>>
>>> There's also likely confusion over which eclipse plugin I should be
>>> using.
>>> After some searching I removed everything but the one from certiv, but no
>>> joy.
>>>
>>> Could someone point me to a known-to-work reference? Thanks!
>>>
>>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>>> Unsubscribe:
>>> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>>>
>>>
>>>
>>>
>>>
>>> --
>>> Cell: 703-594-1883
>>> Blog: http://bradjcox.blogspot.com
>>> Web: http://virtualschool.edu
>>> Manassas VA 20111
>>>
>>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>>> Unsubscribe:
>>> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>>>
>>
>>
>>
>> --
>> Cell: 703-594-1883
>> Blog: http://bradjcox.blogspot.com
>> Web: http://virtualschool.edu
>> Manassas VA 20111
>>
>>
>
>
> --
> Cell: 703-594-1883
> Blog: http://bradjcox.blogspot.com
> Web: http://virtualschool.edu
> Manassas VA 20111
>
>


-- 
Cell: 703-594-1883
Blog: http://bradjcox.blogspot.com
Web: http://virtualschool.edu
Manassas VA 20111

From webny23 at gmail.com  Wed Jun 20 05:06:51 2012
From: webny23 at gmail.com (Verny Quartara)
Date: Wed, 20 Jun 2012 14:06:51 +0200
Subject: [antlr-interest] Antlr3 in Eclipse and Maven?
In-Reply-To: <CAH2etF5MhfzMVfxY0+ngtmTfJBKfz0kz4fhetLAb263UEYuvWA@mail.gmail.com>
References: <CAH2etF5MhfzMVfxY0+ngtmTfJBKfz0kz4fhetLAb263UEYuvWA@mail.gmail.com>
Message-ID: <CAP-ipi6DgDMPysv2nS3G4660YKBemyed+cUV8cf6JDjaevd5mQ@mail.gmail.com>

I post my working configuration, hoping that helps.
My grammar compiles fine in both AntlrWorks and Maven.
I putted my .g files in src/main/antlr3 and the gunit tests in
src/test/gunit.

Bye

<plugin>
                <groupId>org.antlr</groupId>
                <artifactId>antlr3-maven-plugin</artifactId>
                <version>3.4</version>
                <executions>
                    <execution>
                        <goals>
                            <goal>antlr</goal>
                        </goals>
                    </execution>
                </executions>
            </plugin>
            <plugin>
                <groupId>org.antlr</groupId>
                <artifactId>maven-gunit-plugin</artifactId>
                <version>3.4</version>
                <executions>
                    <execution>
                        <id>maven-gunit-plugin</id>
                        <phase>generate-test-sources</phase>
                        <goals>
                            <goal>gunit</goal>
                        </goals>
                    </execution>
                </executions>
            </plugin>


2012/6/20 Brad Cox <bradjcox at gmail.com>

> I've an antlr3 grammar that compiles fine in AntlrWorks. I'm trying to load
> it into Eclipse with Maven to start work on the non-grammar bits.
>
> Problem is it won't compile in either. Error flags are on the first line,
> grammar ...;, and nothing I've tried will remove them. Somehow antlr2 is
> getting involved in the compile step.
>
> The dependency list shows antlr-runtime-3.2.jar and stringtemplate-3.2.jar
> now. Previously there was an antlr2 jar that I've explicitly excluded.
> Didn't make a difference.
>
> My best guess is that the antlr3 maven plugin is launching antlr2, not
> antlr3, but I have no visibility into what that plugin is doing.
>
> <groupId>org.antlr</groupId>
> <artifactId>antlr3-maven-plugin</artifactId>
> <version>3.1.3-1</version
>
> There's also likely confusion over which eclipse plugin I should be using.
> After some searching I removed everything but the one from certiv, but no
> joy.
>
> Could someone point me to a known-to-work reference? Thanks!
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>



-- 
Verny Quartara

From bradjcox at gmail.com  Wed Jun 20 05:15:20 2012
From: bradjcox at gmail.com (Brad Cox)
Date: Wed, 20 Jun 2012 08:15:20 -0400
Subject: [antlr-interest] Antlr3 in Eclipse and Maven?
In-Reply-To: <CAP-ipi6DgDMPysv2nS3G4660YKBemyed+cUV8cf6JDjaevd5mQ@mail.gmail.com>
References: <CAH2etF5MhfzMVfxY0+ngtmTfJBKfz0kz4fhetLAb263UEYuvWA@mail.gmail.com>
	<CAP-ipi6DgDMPysv2nS3G4660YKBemyed+cUV8cf6JDjaevd5mQ@mail.gmail.com>
Message-ID: <CAH2etF4nmYwtR+Qyh2m2NYK+x9o2B5W7YQzFrr9yEhzA7vB2jg@mail.gmail.com>

Thanks! The new version number did the trick. The wiki instructions are
just broken.

And I still don't have a solution to why the grammar statement still isn't
recognized.

That revealed a problem I've seen all along in the generated lexer code...
the _type variable is never declared. Accepting the eclipse quick fix
(declare local variable) clears the problem. But the code generator should
have done this without having to repair it by hand.

Failed to execute goal
> org.apache.maven.plugins:maven-compiler-plugin:2.3.2:compile
> (default-compile) on project Xacml-Antlr: Compilation failure: Compilation
> failure:
> [ERROR]
> /Users/Brad/Dropbox/Xacml-Antlr/target/generated-sources/antlr3/my/XacmlLexer.java:[3239,29]
> cannot find symbol
> [ERROR] symbol  : variable _type
> [ERROR] location: class my.XacmlLexer
> [ERROR]
> /Users/Brad/Dropbox/Xacml-Antlr/target/generated-sources/antlr3/my/XacmlLexer.java:[3246,29]
> cannot find symbol
> [ERROR] symbol  : variable _type
> [ERROR] location: class my.XacmlLexer
> [ERROR]
> /Users/Brad/Dropbox/Xacml-Antlr/target/generated-sources/antlr3/my/XacmlLexer.java:[3314,21]
> cannot find symbol
> [ERROR] symbol  : variable _type
> [ERROR] location: class my.XacmlLexer
> [ERROR]
> /Users/Brad/Dropbox/Xacml-Antlr/target/generated-sources/antlr3/my/XacmlLexer.java:[3403,29]
> cannot find symbol
> [ERROR] symbol  : variable _type
> [ERROR] location: class my.XacmlLexer
> [ERROR]
> /Users/Brad/Dropbox/Xacml-Antlr/target/generated-sources/antlr3/my/XacmlLexer.java:[3412,28]
> cannot find symbol
> [ERROR] symbol  : variable _type
> [ERROR] location: class my.XacmlLexer
> [ERROR]
> /Users/Brad/Dropbox/Xacml-Antlr/target/generated-sources/antlr3/my/XacmlLexer.java:[3419,28]
> cannot find symbol
> [ERROR] symbol  : variable _type
> [ERROR] location: class my.XacmlLexer


On Wed, Jun 20, 2012 at 8:06 AM, Verny Quartara <webny23 at gmail.com> wrote:

> I post my working configuration, hoping that helps.
> My grammar compiles fine in both AntlrWorks and Maven.
> I putted my .g files in src/main/antlr3 and the gunit tests in
> src/test/gunit.
>
> Bye
>
> <plugin>
>                 <groupId>org.antlr</groupId>
>                 <artifactId>antlr3-maven-plugin</artifactId>
>                 <version>3.4</version>
>                 <executions>
>                     <execution>
>                         <goals>
>                             <goal>antlr</goal>
>                         </goals>
>                     </execution>
>                 </executions>
>             </plugin>
>             <plugin>
>                 <groupId>org.antlr</groupId>
>                 <artifactId>maven-gunit-plugin</artifactId>
>                 <version>3.4</version>
>                 <executions>
>                     <execution>
>                         <id>maven-gunit-plugin</id>
>                         <phase>generate-test-sources</phase>
>                         <goals>
>                             <goal>gunit</goal>
>                         </goals>
>                     </execution>
>                 </executions>
>             </plugin>
>
>
> 2012/6/20 Brad Cox <bradjcox at gmail.com>
>
>>  I've an antlr3 grammar that compiles fine in AntlrWorks. I'm trying to
>> load
>> it into Eclipse with Maven to start work on the non-grammar bits.
>>
>> Problem is it won't compile in either. Error flags are on the first line,
>> grammar ...;, and nothing I've tried will remove them. Somehow antlr2 is
>> getting involved in the compile step.
>>
>> The dependency list shows antlr-runtime-3.2.jar and stringtemplate-3.2.jar
>> now. Previously there was an antlr2 jar that I've explicitly excluded.
>> Didn't make a difference.
>>
>> My best guess is that the antlr3 maven plugin is launching antlr2, not
>> antlr3, but I have no visibility into what that plugin is doing.
>>
>> <groupId>org.antlr</groupId>
>> <artifactId>antlr3-maven-plugin</artifactId>
>> <version>3.1.3-1</version
>>
>> There's also likely confusion over which eclipse plugin I should be using.
>> After some searching I removed everything but the one from certiv, but no
>> joy.
>>
>> Could someone point me to a known-to-work reference? Thanks!
>>
>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>> Unsubscribe:
>> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>>
>
>
>
> --
> Verny Quartara
>
>


-- 
Cell: 703-594-1883
Blog: http://bradjcox.blogspot.com
Web: http://virtualschool.edu
Manassas VA 20111

From gudnabrsam at gmail.com  Wed Jun 20 09:08:41 2012
From: gudnabrsam at gmail.com (Matt Benson)
Date: Wed, 20 Jun 2012 11:08:41 -0500
Subject: [antlr-interest] Code generation advice
Message-ID: <CAE9L6G14rUs648wUj3BNUMnpvxyGVDAmw6igg7jQJ4+8oBDQdg@mail.gmail.com>

Hi all,
  In the Java ecosystem embedded DSLs have become increasingly popular
over the past several years.  In my opinion the primary drawback to
these is the painful task of their creation.  For this reason I want
to experiment with the generation of Java interfaces from EBNF-style
grammars to see what I can accomplish, in true Dr. Terence Parr "why
program by hand in 5 days..." fashion.  I have explored, for example,
xtext, but the process of going from its meta-grammar to EDSL code is
non-obvious.  I'm open to other suggestions if anyone has any, but in
the meantime I'm looking at ANTLR 4 and/or 3-based approaches.  It
would seem most appropriate to use the ANTLR 4 meta-grammar, from
which point I would seem to have the following options:

* Implement a custom code generation target for ANTLR 4
* Use ANTLRMorph with the ANTLR 3-based ANTLR 4 meta-grammar

It might well be the case that these differ only in the manner in
which the output stringtemplates are provided.  Does anyone have any
opinions on which approach is to be preferred?  Failing that, I am
willing to entertain aspersions cast on, or less likely, advocations
in favor of, my sanity in conceiving this endeavor.

Thanks in advance for any input,
Matt

From researcher0x00 at gmail.com  Wed Jun 20 11:14:04 2012
From: researcher0x00 at gmail.com (Eric)
Date: Wed, 20 Jun 2012 14:14:04 -0400
Subject: [antlr-interest] Code generation advice
In-Reply-To: <CAE9L6G14rUs648wUj3BNUMnpvxyGVDAmw6igg7jQJ4+8oBDQdg@mail.gmail.com>
References: <CAE9L6G14rUs648wUj3BNUMnpvxyGVDAmw6igg7jQJ4+8oBDQdg@mail.gmail.com>
Message-ID: <CAN45N11NYH-QmOEis3DKTp2EeqWJAZUmQ02tU8emhAx4NNHVOA@mail.gmail.com>

Ok, I'm curious as to what you are trying to do. It sounds like something I
once tinkered with but since I did not understand your exact goal I could
be totally wrong.

The only part that I understood as part of the goal was "generation of Java
interfaces from EBNF-style grammars". Are you trying to generate Java
interfaces from a grammar for other languages or interface languages such
as C++, CORBA, etc.?

Eric


On Wed, Jun 20, 2012 at 12:08 PM, Matt Benson <gudnabrsam at gmail.com> wrote:

> Hi all,
>  In the Java ecosystem embedded DSLs have become increasingly popular
> over the past several years.  In my opinion the primary drawback to
> these is the painful task of their creation.  For this reason I want
> to experiment with the generation of Java interfaces from EBNF-style
> grammars to see what I can accomplish, in true Dr. Terence Parr "why
> program by hand in 5 days..." fashion.  I have explored, for example,
> xtext, but the process of going from its meta-grammar to EDSL code is
> non-obvious.  I'm open to other suggestions if anyone has any, but in
> the meantime I'm looking at ANTLR 4 and/or 3-based approaches.  It
> would seem most appropriate to use the ANTLR 4 meta-grammar, from
> which point I would seem to have the following options:
>
> * Implement a custom code generation target for ANTLR 4
> * Use ANTLRMorph with the ANTLR 3-based ANTLR 4 meta-grammar
>
> It might well be the case that these differ only in the manner in
> which the output stringtemplates are provided.  Does anyone have any
> opinions on which approach is to be preferred?  Failing that, I am
> willing to entertain aspersions cast on, or less likely, advocations
> in favor of, my sanity in conceiving this endeavor.
>
> Thanks in advance for any input,
> Matt
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>

From gudnabrsam at gmail.com  Wed Jun 20 11:49:35 2012
From: gudnabrsam at gmail.com (Matt Benson)
Date: Wed, 20 Jun 2012 13:49:35 -0500
Subject: [antlr-interest] Code generation advice
In-Reply-To: <CAN45N11NYH-QmOEis3DKTp2EeqWJAZUmQ02tU8emhAx4NNHVOA@mail.gmail.com>
References: <CAE9L6G14rUs648wUj3BNUMnpvxyGVDAmw6igg7jQJ4+8oBDQdg@mail.gmail.com>
	<CAN45N11NYH-QmOEis3DKTp2EeqWJAZUmQ02tU8emhAx4NNHVOA@mail.gmail.com>
Message-ID: <CAE9L6G0Uie1coB6MfQxb3AtZu9scvf09UQLhTk8bUPdGRL-Yng@mail.gmail.com>

What I want to do is make it easier to write an EDSL by having it
specified like any other grammar, generating Java interfaces to
represent the grammar's various rules, as well as basic
implementations of these, which I expect will accumulate "tokens"
extracted from method arguments specified in fluent fashion.  In fact,
spelling it out here makes it sound as though it might be just as
reasonable for the end result of a series of calls upon the
implementation of this EDSL interface to create a (parse?) tree, which
could then be walked to resolve the final result of such a series of
method invocations.  This would have the benefit that such a tree
walker (parse, AST, what-have-you) would be equally applicable to a
tree generated from a "normal" ANTLR-generated Java Parser
implementation.

Is that more clear?

Thanks for your interest,
Matt

On Wed, Jun 20, 2012 at 1:14 PM, Eric <researcher0x00 at gmail.com> wrote:
> Ok, I'm curious as to what you are trying to do. It sounds like something I
> once tinkered with but since I did not understand your exact goal I could be
> totally wrong.
>
> The only part that I understood as part of the goal was "generation of Java
> interfaces from EBNF-style grammars". Are you trying to generate Java
> interfaces from a grammar for other languages or interface languages such as
> C++, CORBA, etc.?
>
> Eric
>
>
>
> On Wed, Jun 20, 2012 at 12:08 PM, Matt Benson <gudnabrsam at gmail.com> wrote:
>>
>> Hi all,
>> ?In the Java ecosystem embedded DSLs have become increasingly popular
>> over the past several years. ?In my opinion the primary drawback to
>> these is the painful task of their creation. ?For this reason I want
>> to experiment with the generation of Java interfaces from EBNF-style
>> grammars to see what I can accomplish, in true Dr. Terence Parr "why
>> program by hand in 5 days..." fashion. ?I have explored, for example,
>> xtext, but the process of going from its meta-grammar to EDSL code is
>> non-obvious. ?I'm open to other suggestions if anyone has any, but in
>> the meantime I'm looking at ANTLR 4 and/or 3-based approaches. ?It
>> would seem most appropriate to use the ANTLR 4 meta-grammar, from
>> which point I would seem to have the following options:
>>
>> * Implement a custom code generation target for ANTLR 4
>> * Use ANTLRMorph with the ANTLR 3-based ANTLR 4 meta-grammar
>>
>> It might well be the case that these differ only in the manner in
>> which the output stringtemplates are provided. ?Does anyone have any
>> opinions on which approach is to be preferred? ?Failing that, I am
>> willing to entertain aspersions cast on, or less likely, advocations
>> in favor of, my sanity in conceiving this endeavor.
>>
>> Thanks in advance for any input,
>> Matt
>>
>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>> Unsubscribe:
>> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>
>

From scott at javadude.com  Wed Jun 20 12:31:06 2012
From: scott at javadude.com (Scott Stanchfield)
Date: Wed, 20 Jun 2012 15:31:06 -0400
Subject: [antlr-interest] Code generation advice
In-Reply-To: <CAE9L6G0Uie1coB6MfQxb3AtZu9scvf09UQLhTk8bUPdGRL-Yng@mail.gmail.com>
References: <CAE9L6G14rUs648wUj3BNUMnpvxyGVDAmw6igg7jQJ4+8oBDQdg@mail.gmail.com>
	<CAN45N11NYH-QmOEis3DKTp2EeqWJAZUmQ02tU8emhAx4NNHVOA@mail.gmail.com>
	<CAE9L6G0Uie1coB6MfQxb3AtZu9scvf09UQLhTk8bUPdGRL-Yng@mail.gmail.com>
Message-ID: <CAN_KjYnrwQ4wJxZXy1VPWF7+MrFtS7bMBSSE3wncrVdE5PMBjQ@mail.gmail.com>

Have you taken a look at xtext ( http://www.eclipse.org/Xtext/) It uses a
grammar similar to antlr to generate model interfaces/classes, a
syntax-highlighting editor (optional, but very useful), persistence manager
and other doodads. Under the covers it uses antlr to do the actual parsing.

xtext is intended for DSL definition and is rather mature, too.

As a really short example (from the xtext site):

grammar org.xtext.example.mydsl.MyDsl
    with org.eclipse.xtext.common.Terminals

generate myDsl "http://www.xtext.org/example/mydsl/MyDsl"

Model:
    greetings+=Greeting*;

Greeting:
    'Hello' name=ID '!';

would generate a Model class that has a property greetings which is a list
of Greeting instances, and a Greeting class that has a name property.

I don't know if it fits exactly what you're looking for, but it's worth
taking a look.
-- Scott

----------------------------------------
Scott Stanchfield
http://javadude.com


On Wed, Jun 20, 2012 at 2:49 PM, Matt Benson <gudnabrsam at gmail.com> wrote:

> What I want to do is make it easier to write an EDSL by having it
> specified like any other grammar, generating Java interfaces to
> represent the grammar's various rules, as well as basic
> implementations of these, which I expect will accumulate "tokens"
> extracted from method arguments specified in fluent fashion.  In fact,
> spelling it out here makes it sound as though it might be just as
> reasonable for the end result of a series of calls upon the
> implementation of this EDSL interface to create a (parse?) tree, which
> could then be walked to resolve the final result of such a series of
> method invocations.  This would have the benefit that such a tree
> walker (parse, AST, what-have-you) would be equally applicable to a
> tree generated from a "normal" ANTLR-generated Java Parser
> implementation.
>
> Is that more clear?
>
> Thanks for your interest,
> Matt
>
> On Wed, Jun 20, 2012 at 1:14 PM, Eric <researcher0x00 at gmail.com> wrote:
> > Ok, I'm curious as to what you are trying to do. It sounds like
> something I
> > once tinkered with but since I did not understand your exact goal I
> could be
> > totally wrong.
> >
> > The only part that I understood as part of the goal was "generation of
> Java
> > interfaces from EBNF-style grammars". Are you trying to generate Java
> > interfaces from a grammar for other languages or interface languages
> such as
> > C++, CORBA, etc.?
> >
> > Eric
> >
> >
> >
> > On Wed, Jun 20, 2012 at 12:08 PM, Matt Benson <gudnabrsam at gmail.com>
> wrote:
> >>
> >> Hi all,
> >>  In the Java ecosystem embedded DSLs have become increasingly popular
> >> over the past several years.  In my opinion the primary drawback to
> >> these is the painful task of their creation.  For this reason I want
> >> to experiment with the generation of Java interfaces from EBNF-style
> >> grammars to see what I can accomplish, in true Dr. Terence Parr "why
> >> program by hand in 5 days..." fashion.  I have explored, for example,
> >> xtext, but the process of going from its meta-grammar to EDSL code is
> >> non-obvious.  I'm open to other suggestions if anyone has any, but in
> >> the meantime I'm looking at ANTLR 4 and/or 3-based approaches.  It
> >> would seem most appropriate to use the ANTLR 4 meta-grammar, from
> >> which point I would seem to have the following options:
> >>
> >> * Implement a custom code generation target for ANTLR 4
> >> * Use ANTLRMorph with the ANTLR 3-based ANTLR 4 meta-grammar
> >>
> >> It might well be the case that these differ only in the manner in
> >> which the output stringtemplates are provided.  Does anyone have any
> >> opinions on which approach is to be preferred?  Failing that, I am
> >> willing to entertain aspersions cast on, or less likely, advocations
> >> in favor of, my sanity in conceiving this endeavor.
> >>
> >> Thanks in advance for any input,
> >> Matt
> >>
> >> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> >> Unsubscribe:
> >> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
> >
> >
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>

From mangelo.mailing at gmail.com  Wed Jun 20 12:34:02 2012
From: mangelo.mailing at gmail.com (Michael Angelo)
Date: Wed, 20 Jun 2012 15:34:02 -0400
Subject: [antlr-interest] ANTLR tree walker , multiple times return....
In-Reply-To: <D4396A6E-CE5D-4782-AD3D-31802D51112B@temporal-wave.com>
References: <CAPmhLM15=Ty2V9osJQvjQR0eL3=_Z-izg0gsC1QLXPpyWwOymw@mail.gmail.com>
	<D4396A6E-CE5D-4782-AD3D-31802D51112B@temporal-wave.com>
Message-ID: <CAAN08rFmb_4LQnkjoVTA4kBiovdLvvaJjL_YyYKxWw2UqGkFHQ@mail.gmail.com>

I've seen a few of you mention '=' and '+=' operators in the grammar, but I
can't find any docs on them.

Can I get a quick rundown of these?

Thanks!


On Tue, Jun 19, 2012 at 11:58 AM, Jim Idle <jimi at temporal-wave.com> wrote:

> = gives the current parameter
> += accumulates a list of them
>
> Should be obvious from there?
>
> Jim
>
> On Jun 19, 2012, at 9:20 PM, Felix.? <ygnhzeus at gmail.com> wrote:
>
> > Hi,all .
> >
> > I have a tree walker like this:
> >
> > function:
> >    ^(FUNCTION_TOK fcname=IDENTIFIER param=functionParameters*){
> >        a_param_arrayList.add(param);
> >    }
> > ;
> >
> > functionParameters returns [Object sth]:
> >    ^(PARAM_TOK value=IDENTIFIER){ sth = $value.getText();}
> > ;
> >
> > This is a simple scenario,I just want to add the parameters to an
> > arraylist, but the code above(*a_param_arrayList.add(param)*) will only
> > collects the first parameter and ignores the
> > others.But*functionParameters* actually
> > parases multiple parameters.
> >
> > Does anyone know how to fix this tree walker? Thanks very much!
> >
> > List: http://www.antlr.org/mailman/listinfo/antlr-interest
> > Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>

From researcher0x00 at gmail.com  Wed Jun 20 12:36:12 2012
From: researcher0x00 at gmail.com (Eric)
Date: Wed, 20 Jun 2012 15:36:12 -0400
Subject: [antlr-interest] Code generation advice
In-Reply-To: <CAE9L6G0Uie1coB6MfQxb3AtZu9scvf09UQLhTk8bUPdGRL-Yng@mail.gmail.com>
References: <CAE9L6G14rUs648wUj3BNUMnpvxyGVDAmw6igg7jQJ4+8oBDQdg@mail.gmail.com>
	<CAN45N11NYH-QmOEis3DKTp2EeqWJAZUmQ02tU8emhAx4NNHVOA@mail.gmail.com>
	<CAE9L6G0Uie1coB6MfQxb3AtZu9scvf09UQLhTk8bUPdGRL-Yng@mail.gmail.com>
Message-ID: <CAN45N11CKQiHWUhyvoo4exwQQzUw8ZtGeN95GV-bw5-=fOGvOA@mail.gmail.com>

On Wed, Jun 20, 2012 at 2:49 PM, Matt Benson <gudnabrsam at gmail.com> wrote:

> What I want to do is make it easier to write an EDSL by having it
> specified like any other grammar, generating Java interfaces to
> represent the grammar's various rules, as well as basic
> implementations of these, which I expect will accumulate "tokens"
> extracted from method arguments specified in fluent fashion.  In fact,
> spelling it out here makes it sound as though it might be just as
> reasonable for the end result of a series of calls upon the
> implementation of this EDSL interface to create a (parse?) tree, which
> could then be walked to resolve the final result of such a series of
> method invocations.  This would have the benefit that such a tree
> walker (parse, AST, what-have-you) would be equally applicable to a
> tree generated from a "normal" ANTLR-generated Java Parser
> implementation.
>
> Is that more clear?
>

Did Scott get it right with Xtext?


>
> Thanks for your interest,
> Matt
>
> On Wed, Jun 20, 2012 at 1:14 PM, Eric <researcher0x00 at gmail.com> wrote:
> > Ok, I'm curious as to what you are trying to do. It sounds like
> something I
> > once tinkered with but since I did not understand your exact goal I
> could be
> > totally wrong.
> >
> > The only part that I understood as part of the goal was "generation of
> Java
> > interfaces from EBNF-style grammars". Are you trying to generate Java
> > interfaces from a grammar for other languages or interface languages
> such as
> > C++, CORBA, etc.?
> >
> > Eric
> >
> >
> >
> > On Wed, Jun 20, 2012 at 12:08 PM, Matt Benson <gudnabrsam at gmail.com>
> wrote:
> >>
> >> Hi all,
> >>  In the Java ecosystem embedded DSLs have become increasingly popular
> >> over the past several years.  In my opinion the primary drawback to
> >> these is the painful task of their creation.  For this reason I want
> >> to experiment with the generation of Java interfaces from EBNF-style
> >> grammars to see what I can accomplish, in true Dr. Terence Parr "why
> >> program by hand in 5 days..." fashion.  I have explored, for example,
> >> xtext, but the process of going from its meta-grammar to EDSL code is
> >> non-obvious.  I'm open to other suggestions if anyone has any, but in
> >> the meantime I'm looking at ANTLR 4 and/or 3-based approaches.  It
> >> would seem most appropriate to use the ANTLR 4 meta-grammar, from
> >> which point I would seem to have the following options:
> >>
> >> * Implement a custom code generation target for ANTLR 4
> >> * Use ANTLRMorph with the ANTLR 3-based ANTLR 4 meta-grammar
> >>
> >> It might well be the case that these differ only in the manner in
> >> which the output stringtemplates are provided.  Does anyone have any
> >> opinions on which approach is to be preferred?  Failing that, I am
> >> willing to entertain aspersions cast on, or less likely, advocations
> >> in favor of, my sanity in conceiving this endeavor.
> >>
> >> Thanks in advance for any input,
> >> Matt
> >>
> >> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> >> Unsubscribe:
> >> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
> >
> >
>

From gudnabrsam at gmail.com  Wed Jun 20 12:44:03 2012
From: gudnabrsam at gmail.com (Matt Benson)
Date: Wed, 20 Jun 2012 14:44:03 -0500
Subject: [antlr-interest] Code generation advice
In-Reply-To: <CAN_KjYnrwQ4wJxZXy1VPWF7+MrFtS7bMBSSE3wncrVdE5PMBjQ@mail.gmail.com>
References: <CAE9L6G14rUs648wUj3BNUMnpvxyGVDAmw6igg7jQJ4+8oBDQdg@mail.gmail.com>
	<CAN45N11NYH-QmOEis3DKTp2EeqWJAZUmQ02tU8emhAx4NNHVOA@mail.gmail.com>
	<CAE9L6G0Uie1coB6MfQxb3AtZu9scvf09UQLhTk8bUPdGRL-Yng@mail.gmail.com>
	<CAN_KjYnrwQ4wJxZXy1VPWF7+MrFtS7bMBSSE3wncrVdE5PMBjQ@mail.gmail.com>
Message-ID: <CAE9L6G377LXa5YNg6JznFJ=V6jrupLOpG6BqMjAYiQXAK5HDKw@mail.gmail.com>

Hi, Scott--and thanks for ANTLREclipse, which (never having moved past
v2) I still use.  ;)  Actually, embedded in my original email was the
fact that I have looked at xtext and making it do what I'm looking for
is at least an endeavor whose HOWTO is non-obvious.  AFAICT, its focus
is on parsing a DSL into a Java model:  well and good, but I know how
to do that with ANTLR.  Xtext might well make this job easier, but in
my case, I want more or less to bypass the idea of parsing a DSL and
simply use the same meta-grammar to describe an embedded DSL whose
rules are actually invoked as Java methods.  Possibly xtext *can* do
this, but so far its documentation is quite obtuse to me, and I have
yet to see anything in its examples that suggests that it would give
me a leg up on this particular task.

@Eric:  your question is answered ;)

Regards,
Matt

On Wed, Jun 20, 2012 at 2:31 PM, Scott Stanchfield <scott at javadude.com> wrote:
> Have you taken a look at xtext ( http://www.eclipse.org/Xtext/) It uses a
> grammar similar to antlr to generate model interfaces/classes, a
> syntax-highlighting editor (optional, but very useful), persistence manager
> and other doodads. Under the covers it uses antlr to do the actual parsing.
>
> xtext is intended for DSL definition and is rather mature, too.
>
> As a really short example (from the xtext site):
>
> grammar?org.xtext.example.mydsl.MyDsl
> ? ??with?org.eclipse.xtext.common.Terminals
>
> generate?myDsl?"http://www.xtext.org/example/mydsl/MyDsl"
>
> Model:
> ????greetings+=Greeting*;
>
> Greeting:
> ????'Hello'?name=ID?'!';
>
> would generate a Model class that has a property greetings which is a list
> of Greeting instances, and a Greeting class that has a name property.
>
> I don't know if it fits exactly what you're looking for, but it's worth
> taking a look.
> -- Scott
>
> ----------------------------------------
> Scott Stanchfield
> http://javadude.com
>
>
>
> On Wed, Jun 20, 2012 at 2:49 PM, Matt Benson <gudnabrsam at gmail.com> wrote:
>>
>> What I want to do is make it easier to write an EDSL by having it
>> specified like any other grammar, generating Java interfaces to
>> represent the grammar's various rules, as well as basic
>> implementations of these, which I expect will accumulate "tokens"
>> extracted from method arguments specified in fluent fashion. ?In fact,
>> spelling it out here makes it sound as though it might be just as
>> reasonable for the end result of a series of calls upon the
>> implementation of this EDSL interface to create a (parse?) tree, which
>> could then be walked to resolve the final result of such a series of
>> method invocations. ?This would have the benefit that such a tree
>> walker (parse, AST, what-have-you) would be equally applicable to a
>> tree generated from a "normal" ANTLR-generated Java Parser
>> implementation.
>>
>> Is that more clear?
>>
>> Thanks for your interest,
>> Matt
>>
>> On Wed, Jun 20, 2012 at 1:14 PM, Eric <researcher0x00 at gmail.com> wrote:
>> > Ok, I'm curious as to what you are trying to do. It sounds like
>> > something I
>> > once tinkered with but since I did not understand your exact goal I
>> > could be
>> > totally wrong.
>> >
>> > The only part that I understood as part of the goal was "generation of
>> > Java
>> > interfaces from EBNF-style grammars". Are you trying to generate Java
>> > interfaces from a grammar for other languages or interface languages
>> > such as
>> > C++, CORBA, etc.?
>> >
>> > Eric
>> >
>> >
>> >
>> > On Wed, Jun 20, 2012 at 12:08 PM, Matt Benson <gudnabrsam at gmail.com>
>> > wrote:
>> >>
>> >> Hi all,
>> >> ?In the Java ecosystem embedded DSLs have become increasingly popular
>> >> over the past several years. ?In my opinion the primary drawback to
>> >> these is the painful task of their creation. ?For this reason I want
>> >> to experiment with the generation of Java interfaces from EBNF-style
>> >> grammars to see what I can accomplish, in true Dr. Terence Parr "why
>> >> program by hand in 5 days..." fashion. ?I have explored, for example,
>> >> xtext, but the process of going from its meta-grammar to EDSL code is
>> >> non-obvious. ?I'm open to other suggestions if anyone has any, but in
>> >> the meantime I'm looking at ANTLR 4 and/or 3-based approaches. ?It
>> >> would seem most appropriate to use the ANTLR 4 meta-grammar, from
>> >> which point I would seem to have the following options:
>> >>
>> >> * Implement a custom code generation target for ANTLR 4
>> >> * Use ANTLRMorph with the ANTLR 3-based ANTLR 4 meta-grammar
>> >>
>> >> It might well be the case that these differ only in the manner in
>> >> which the output stringtemplates are provided. ?Does anyone have any
>> >> opinions on which approach is to be preferred? ?Failing that, I am
>> >> willing to entertain aspersions cast on, or less likely, advocations
>> >> in favor of, my sanity in conceiving this endeavor.
>> >>
>> >> Thanks in advance for any input,
>> >> Matt
>> >>
>> >> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>> >> Unsubscribe:
>> >> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>> >
>> >
>>
>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>> Unsubscribe:
>> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>
>

From researcher0x00 at gmail.com  Wed Jun 20 12:54:09 2012
From: researcher0x00 at gmail.com (Eric)
Date: Wed, 20 Jun 2012 15:54:09 -0400
Subject: [antlr-interest] Code generation advice
In-Reply-To: <CAE9L6G377LXa5YNg6JznFJ=V6jrupLOpG6BqMjAYiQXAK5HDKw@mail.gmail.com>
References: <CAE9L6G14rUs648wUj3BNUMnpvxyGVDAmw6igg7jQJ4+8oBDQdg@mail.gmail.com>
	<CAN45N11NYH-QmOEis3DKTp2EeqWJAZUmQ02tU8emhAx4NNHVOA@mail.gmail.com>
	<CAE9L6G0Uie1coB6MfQxb3AtZu9scvf09UQLhTk8bUPdGRL-Yng@mail.gmail.com>
	<CAN_KjYnrwQ4wJxZXy1VPWF7+MrFtS7bMBSSE3wncrVdE5PMBjQ@mail.gmail.com>
	<CAE9L6G377LXa5YNg6JznFJ=V6jrupLOpG6BqMjAYiQXAK5HDKw@mail.gmail.com>
Message-ID: <CAN45N138GTDP=XFQ21BC0BPza9fa=85c+WvVWOC-cYZzN-zE9A@mail.gmail.com>

Hi Matt,

It is now making much more sense.

How do you plan on ensuring the grammar is not ambiguious?
Will the grammar have to conform to one of the Chomsky hierarchies?  See:
http://en.wikipedia.org/wiki/Chomsky_hierarchy
It sounds like when you are done you be recreating PROLOG's Definite Clause
Grammar.
See: http://en.wikipedia.org/wiki/Definite_clause_grammar

Eric

On Wed, Jun 20, 2012 at 3:44 PM, Matt Benson <gudnabrsam at gmail.com> wrote:

> Hi, Scott--and thanks for ANTLREclipse, which (never having moved past
> v2) I still use.  ;)  Actually, embedded in my original email was the
> fact that I have looked at xtext and making it do what I'm looking for
> is at least an endeavor whose HOWTO is non-obvious.  AFAICT, its focus
> is on parsing a DSL into a Java model:  well and good, but I know how
> to do that with ANTLR.  Xtext might well make this job easier, but in
> my case, I want more or less to bypass the idea of parsing a DSL and
> simply use the same meta-grammar to describe an embedded DSL whose
> rules are actually invoked as Java methods.  Possibly xtext *can* do
> this, but so far its documentation is quite obtuse to me, and I have
> yet to see anything in its examples that suggests that it would give
> me a leg up on this particular task.
>
> @Eric:  your question is answered ;)
>
> Regards,
> Matt
>
> On Wed, Jun 20, 2012 at 2:31 PM, Scott Stanchfield <scott at javadude.com>
> wrote:
> > Have you taken a look at xtext ( http://www.eclipse.org/Xtext/) It uses
> a
> > grammar similar to antlr to generate model interfaces/classes, a
> > syntax-highlighting editor (optional, but very useful), persistence
> manager
> > and other doodads. Under the covers it uses antlr to do the actual
> parsing.
> >
> > xtext is intended for DSL definition and is rather mature, too.
> >
> > As a really short example (from the xtext site):
> >
> > grammar org.xtext.example.mydsl.MyDsl
> >     with org.eclipse.xtext.common.Terminals
> >
> > generate myDsl "http://www.xtext.org/example/mydsl/MyDsl"
> >
> > Model:
> >     greetings+=Greeting*;
> >
> > Greeting:
> >     'Hello' name=ID '!';
> >
> > would generate a Model class that has a property greetings which is a
> list
> > of Greeting instances, and a Greeting class that has a name property.
> >
> > I don't know if it fits exactly what you're looking for, but it's worth
> > taking a look.
> > -- Scott
> >
> > ----------------------------------------
> > Scott Stanchfield
> > http://javadude.com
> >
> >
> >
> > On Wed, Jun 20, 2012 at 2:49 PM, Matt Benson <gudnabrsam at gmail.com>
> wrote:
> >>
> >> What I want to do is make it easier to write an EDSL by having it
> >> specified like any other grammar, generating Java interfaces to
> >> represent the grammar's various rules, as well as basic
> >> implementations of these, which I expect will accumulate "tokens"
> >> extracted from method arguments specified in fluent fashion.  In fact,
> >> spelling it out here makes it sound as though it might be just as
> >> reasonable for the end result of a series of calls upon the
> >> implementation of this EDSL interface to create a (parse?) tree, which
> >> could then be walked to resolve the final result of such a series of
> >> method invocations.  This would have the benefit that such a tree
> >> walker (parse, AST, what-have-you) would be equally applicable to a
> >> tree generated from a "normal" ANTLR-generated Java Parser
> >> implementation.
> >>
> >> Is that more clear?
> >>
> >> Thanks for your interest,
> >> Matt
> >>
> >> On Wed, Jun 20, 2012 at 1:14 PM, Eric <researcher0x00 at gmail.com> wrote:
> >> > Ok, I'm curious as to what you are trying to do. It sounds like
> >> > something I
> >> > once tinkered with but since I did not understand your exact goal I
> >> > could be
> >> > totally wrong.
> >> >
> >> > The only part that I understood as part of the goal was "generation of
> >> > Java
> >> > interfaces from EBNF-style grammars". Are you trying to generate Java
> >> > interfaces from a grammar for other languages or interface languages
> >> > such as
> >> > C++, CORBA, etc.?
> >> >
> >> > Eric
> >> >
> >> >
> >> >
> >> > On Wed, Jun 20, 2012 at 12:08 PM, Matt Benson <gudnabrsam at gmail.com>
> >> > wrote:
> >> >>
> >> >> Hi all,
> >> >>  In the Java ecosystem embedded DSLs have become increasingly popular
> >> >> over the past several years.  In my opinion the primary drawback to
> >> >> these is the painful task of their creation.  For this reason I want
> >> >> to experiment with the generation of Java interfaces from EBNF-style
> >> >> grammars to see what I can accomplish, in true Dr. Terence Parr "why
> >> >> program by hand in 5 days..." fashion.  I have explored, for example,
> >> >> xtext, but the process of going from its meta-grammar to EDSL code is
> >> >> non-obvious.  I'm open to other suggestions if anyone has any, but in
> >> >> the meantime I'm looking at ANTLR 4 and/or 3-based approaches.  It
> >> >> would seem most appropriate to use the ANTLR 4 meta-grammar, from
> >> >> which point I would seem to have the following options:
> >> >>
> >> >> * Implement a custom code generation target for ANTLR 4
> >> >> * Use ANTLRMorph with the ANTLR 3-based ANTLR 4 meta-grammar
> >> >>
> >> >> It might well be the case that these differ only in the manner in
> >> >> which the output stringtemplates are provided.  Does anyone have any
> >> >> opinions on which approach is to be preferred?  Failing that, I am
> >> >> willing to entertain aspersions cast on, or less likely, advocations
> >> >> in favor of, my sanity in conceiving this endeavor.
> >> >>
> >> >> Thanks in advance for any input,
> >> >> Matt
> >> >>
> >> >> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> >> >> Unsubscribe:
> >> >>
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
> >> >
> >> >
> >>
> >> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> >> Unsubscribe:
> >> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
> >
> >
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>

From scott at javadude.com  Wed Jun 20 13:03:45 2012
From: scott at javadude.com (Scott Stanchfield)
Date: Wed, 20 Jun 2012 16:03:45 -0400
Subject: [antlr-interest] Code generation advice
In-Reply-To: <CAE9L6G377LXa5YNg6JznFJ=V6jrupLOpG6BqMjAYiQXAK5HDKw@mail.gmail.com>
References: <CAE9L6G14rUs648wUj3BNUMnpvxyGVDAmw6igg7jQJ4+8oBDQdg@mail.gmail.com>
	<CAN45N11NYH-QmOEis3DKTp2EeqWJAZUmQ02tU8emhAx4NNHVOA@mail.gmail.com>
	<CAE9L6G0Uie1coB6MfQxb3AtZu9scvf09UQLhTk8bUPdGRL-Yng@mail.gmail.com>
	<CAN_KjYnrwQ4wJxZXy1VPWF7+MrFtS7bMBSSE3wncrVdE5PMBjQ@mail.gmail.com>
	<CAE9L6G377LXa5YNg6JznFJ=V6jrupLOpG6BqMjAYiQXAK5HDKw@mail.gmail.com>
Message-ID: <CAN_KjYmWZULgDbXm+btcrh-CPJ_x5y6mZ4vCY41-S1RaWx3Lbw@mail.gmail.com>

I think I see now what you're looking for (I think you're talking about an
internal DSL though, assuming your use of EDSL means "external DSL").

xtext won't do that... it's really for parsing external DSLs and loading
the data into a model.

So if I understand what you're looking for, it could be used to define
something like SQLiteQueryBuilder:

  Cursor c = new SQLiteQueryBuilder()
                          .setTables(tables)
                          .appendWhere(whereClause)
                          .query(...);

using a grammar kinda like

SQLiteQueryBuilder
  : setTables appendWhere query
  ;

setTables[String[] tables]
  : {set tables property} ;

appendWhere[String where]
  : {set where clause} ;

query[...]
  : {run query}
  ;

Is that kinda on the track you're thinking?

-- Scott

----------------------------------------
Scott Stanchfield
http://javadude.com


On Wed, Jun 20, 2012 at 3:44 PM, Matt Benson <gudnabrsam at gmail.com> wrote:

> Hi, Scott--and thanks for ANTLREclipse, which (never having moved past
> v2) I still use.  ;)  Actually, embedded in my original email was the
> fact that I have looked at xtext and making it do what I'm looking for
> is at least an endeavor whose HOWTO is non-obvious.  AFAICT, its focus
> is on parsing a DSL into a Java model:  well and good, but I know how
> to do that with ANTLR.  Xtext might well make this job easier, but in
> my case, I want more or less to bypass the idea of parsing a DSL and
> simply use the same meta-grammar to describe an embedded DSL whose
> rules are actually invoked as Java methods.  Possibly xtext *can* do
> this, but so far its documentation is quite obtuse to me, and I have
> yet to see anything in its examples that suggests that it would give
> me a leg up on this particular task.
>
> @Eric:  your question is answered ;)
>
> Regards,
> Matt
>
> On Wed, Jun 20, 2012 at 2:31 PM, Scott Stanchfield <scott at javadude.com>
> wrote:
> > Have you taken a look at xtext ( http://www.eclipse.org/Xtext/) It uses
> a
> > grammar similar to antlr to generate model interfaces/classes, a
> > syntax-highlighting editor (optional, but very useful), persistence
> manager
> > and other doodads. Under the covers it uses antlr to do the actual
> parsing.
> >
> > xtext is intended for DSL definition and is rather mature, too.
> >
> > As a really short example (from the xtext site):
> >
> > grammar org.xtext.example.mydsl.MyDsl
> >     with org.eclipse.xtext.common.Terminals
> >
> > generate myDsl "http://www.xtext.org/example/mydsl/MyDsl"
> >
> > Model:
> >     greetings+=Greeting*;
> >
> > Greeting:
> >     'Hello' name=ID '!';
> >
> > would generate a Model class that has a property greetings which is a
> list
> > of Greeting instances, and a Greeting class that has a name property.
> >
> > I don't know if it fits exactly what you're looking for, but it's worth
> > taking a look.
> > -- Scott
> >
> > ----------------------------------------
> > Scott Stanchfield
> > http://javadude.com
> >
> >
> >
> > On Wed, Jun 20, 2012 at 2:49 PM, Matt Benson <gudnabrsam at gmail.com>
> wrote:
> >>
> >> What I want to do is make it easier to write an EDSL by having it
> >> specified like any other grammar, generating Java interfaces to
> >> represent the grammar's various rules, as well as basic
> >> implementations of these, which I expect will accumulate "tokens"
> >> extracted from method arguments specified in fluent fashion.  In fact,
> >> spelling it out here makes it sound as though it might be just as
> >> reasonable for the end result of a series of calls upon the
> >> implementation of this EDSL interface to create a (parse?) tree, which
> >> could then be walked to resolve the final result of such a series of
> >> method invocations.  This would have the benefit that such a tree
> >> walker (parse, AST, what-have-you) would be equally applicable to a
> >> tree generated from a "normal" ANTLR-generated Java Parser
> >> implementation.
> >>
> >> Is that more clear?
> >>
> >> Thanks for your interest,
> >> Matt
> >>
> >> On Wed, Jun 20, 2012 at 1:14 PM, Eric <researcher0x00 at gmail.com> wrote:
> >> > Ok, I'm curious as to what you are trying to do. It sounds like
> >> > something I
> >> > once tinkered with but since I did not understand your exact goal I
> >> > could be
> >> > totally wrong.
> >> >
> >> > The only part that I understood as part of the goal was "generation of
> >> > Java
> >> > interfaces from EBNF-style grammars". Are you trying to generate Java
> >> > interfaces from a grammar for other languages or interface languages
> >> > such as
> >> > C++, CORBA, etc.?
> >> >
> >> > Eric
> >> >
> >> >
> >> >
> >> > On Wed, Jun 20, 2012 at 12:08 PM, Matt Benson <gudnabrsam at gmail.com>
> >> > wrote:
> >> >>
> >> >> Hi all,
> >> >>  In the Java ecosystem embedded DSLs have become increasingly popular
> >> >> over the past several years.  In my opinion the primary drawback to
> >> >> these is the painful task of their creation.  For this reason I want
> >> >> to experiment with the generation of Java interfaces from EBNF-style
> >> >> grammars to see what I can accomplish, in true Dr. Terence Parr "why
> >> >> program by hand in 5 days..." fashion.  I have explored, for example,
> >> >> xtext, but the process of going from its meta-grammar to EDSL code is
> >> >> non-obvious.  I'm open to other suggestions if anyone has any, but in
> >> >> the meantime I'm looking at ANTLR 4 and/or 3-based approaches.  It
> >> >> would seem most appropriate to use the ANTLR 4 meta-grammar, from
> >> >> which point I would seem to have the following options:
> >> >>
> >> >> * Implement a custom code generation target for ANTLR 4
> >> >> * Use ANTLRMorph with the ANTLR 3-based ANTLR 4 meta-grammar
> >> >>
> >> >> It might well be the case that these differ only in the manner in
> >> >> which the output stringtemplates are provided.  Does anyone have any
> >> >> opinions on which approach is to be preferred?  Failing that, I am
> >> >> willing to entertain aspersions cast on, or less likely, advocations
> >> >> in favor of, my sanity in conceiving this endeavor.
> >> >>
> >> >> Thanks in advance for any input,
> >> >> Matt
> >> >>
> >> >> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> >> >> Unsubscribe:
> >> >>
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
> >> >
> >> >
> >>
> >> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> >> Unsubscribe:
> >> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
> >
> >
>

From gudnabrsam at gmail.com  Wed Jun 20 13:13:19 2012
From: gudnabrsam at gmail.com (Matt Benson)
Date: Wed, 20 Jun 2012 15:13:19 -0500
Subject: [antlr-interest] Code generation advice
In-Reply-To: <CAN_KjYmWZULgDbXm+btcrh-CPJ_x5y6mZ4vCY41-S1RaWx3Lbw@mail.gmail.com>
References: <CAE9L6G14rUs648wUj3BNUMnpvxyGVDAmw6igg7jQJ4+8oBDQdg@mail.gmail.com>
	<CAN45N11NYH-QmOEis3DKTp2EeqWJAZUmQ02tU8emhAx4NNHVOA@mail.gmail.com>
	<CAE9L6G0Uie1coB6MfQxb3AtZu9scvf09UQLhTk8bUPdGRL-Yng@mail.gmail.com>
	<CAN_KjYnrwQ4wJxZXy1VPWF7+MrFtS7bMBSSE3wncrVdE5PMBjQ@mail.gmail.com>
	<CAE9L6G377LXa5YNg6JznFJ=V6jrupLOpG6BqMjAYiQXAK5HDKw@mail.gmail.com>
	<CAN_KjYmWZULgDbXm+btcrh-CPJ_x5y6mZ4vCY41-S1RaWx3Lbw@mail.gmail.com>
Message-ID: <CAE9L6G1D+huQOrzREaVTrUoQi36o2mOf9+fiDzYZyDOXynGdpA@mail.gmail.com>

I'm using "E" to mean "Embedded."  "Embedded DSL" seems to turn up a
lot of hits on Google, but a rose by any other name... your
query-building example is in the neighborhood, yes.

Matt

On Wed, Jun 20, 2012 at 3:03 PM, Scott Stanchfield <scott at javadude.com> wrote:
> I think I see now what you're looking for (I think you're talking about an
> internal DSL though, assuming your use of EDSL means "external DSL").
>
> xtext won't do that... it's really for parsing external DSLs and loading the
> data into a model.
>
> So if I understand what you're looking for, it could be used to define
> something like SQLiteQueryBuilder:
>
> ? Cursor c = new SQLiteQueryBuilder()
> ? ? ? ? ? ? ? ? ? ? ? ? ? .setTables(tables)
> ? ? ? ? ? ? ? ? ? ? ? ? ??.appendWhere(whereClause)
> ? ? ? ? ? ? ? ? ? ? ? ? ??.query(...);
>
> using a grammar kinda like
>
> SQLiteQueryBuilder
> ? : setTables appendWhere query
> ? ;
>
> setTables[String[] tables]
> ? : {set tables property} ;
>
> appendWhere[String where]
> ? : {set where clause} ;
>
> query[...]
> ? : {run query}
> ? ;
>
> Is that kinda on the track you're thinking?
>
> -- Scott
>
> ----------------------------------------
> Scott Stanchfield
> http://javadude.com
>
>
> On Wed, Jun 20, 2012 at 3:44 PM, Matt Benson <gudnabrsam at gmail.com> wrote:
>>
>> Hi, Scott--and thanks for ANTLREclipse, which (never having moved past
>> v2) I still use. ?;) ?Actually, embedded in my original email was the
>> fact that I have looked at xtext and making it do what I'm looking for
>> is at least an endeavor whose HOWTO is non-obvious. ?AFAICT, its focus
>> is on parsing a DSL into a Java model: ?well and good, but I know how
>> to do that with ANTLR. ?Xtext might well make this job easier, but in
>> my case, I want more or less to bypass the idea of parsing a DSL and
>> simply use the same meta-grammar to describe an embedded DSL whose
>> rules are actually invoked as Java methods. ?Possibly xtext *can* do
>> this, but so far its documentation is quite obtuse to me, and I have
>> yet to see anything in its examples that suggests that it would give
>> me a leg up on this particular task.
>>
>> @Eric: ?your question is answered ;)
>>
>> Regards,
>> Matt
>>
>> On Wed, Jun 20, 2012 at 2:31 PM, Scott Stanchfield <scott at javadude.com>
>> wrote:
>> > Have you taken a look at xtext ( http://www.eclipse.org/Xtext/) It uses
>> > a
>> > grammar similar to antlr to generate model interfaces/classes, a
>> > syntax-highlighting editor (optional, but very useful), persistence
>> > manager
>> > and other doodads. Under the covers it uses antlr to do the actual
>> > parsing.
>> >
>> > xtext is intended for DSL definition and is rather mature, too.
>> >
>> > As a really short example (from the xtext site):
>> >
>> > grammar?org.xtext.example.mydsl.MyDsl
>> > ? ??with?org.eclipse.xtext.common.Terminals
>> >
>> > generate?myDsl?"http://www.xtext.org/example/mydsl/MyDsl"
>> >
>> > Model:
>> > ????greetings+=Greeting*;
>> >
>> > Greeting:
>> > ????'Hello'?name=ID?'!';
>> >
>> > would generate a Model class that has a property greetings which is a
>> > list
>> > of Greeting instances, and a Greeting class that has a name property.
>> >
>> > I don't know if it fits exactly what you're looking for, but it's worth
>> > taking a look.
>> > -- Scott
>> >
>> > ----------------------------------------
>> > Scott Stanchfield
>> > http://javadude.com
>> >
>> >
>> >
>> > On Wed, Jun 20, 2012 at 2:49 PM, Matt Benson <gudnabrsam at gmail.com>
>> > wrote:
>> >>
>> >> What I want to do is make it easier to write an EDSL by having it
>> >> specified like any other grammar, generating Java interfaces to
>> >> represent the grammar's various rules, as well as basic
>> >> implementations of these, which I expect will accumulate "tokens"
>> >> extracted from method arguments specified in fluent fashion. ?In fact,
>> >> spelling it out here makes it sound as though it might be just as
>> >> reasonable for the end result of a series of calls upon the
>> >> implementation of this EDSL interface to create a (parse?) tree, which
>> >> could then be walked to resolve the final result of such a series of
>> >> method invocations. ?This would have the benefit that such a tree
>> >> walker (parse, AST, what-have-you) would be equally applicable to a
>> >> tree generated from a "normal" ANTLR-generated Java Parser
>> >> implementation.
>> >>
>> >> Is that more clear?
>> >>
>> >> Thanks for your interest,
>> >> Matt
>> >>
>> >> On Wed, Jun 20, 2012 at 1:14 PM, Eric <researcher0x00 at gmail.com> wrote:
>> >> > Ok, I'm curious as to what you are trying to do. It sounds like
>> >> > something I
>> >> > once tinkered with but since I did not understand your exact goal I
>> >> > could be
>> >> > totally wrong.
>> >> >
>> >> > The only part that I understood as part of the goal was "generation
>> >> > of
>> >> > Java
>> >> > interfaces from EBNF-style grammars". Are you trying to generate Java
>> >> > interfaces from a grammar for other languages or interface languages
>> >> > such as
>> >> > C++, CORBA, etc.?
>> >> >
>> >> > Eric
>> >> >
>> >> >
>> >> >
>> >> > On Wed, Jun 20, 2012 at 12:08 PM, Matt Benson <gudnabrsam at gmail.com>
>> >> > wrote:
>> >> >>
>> >> >> Hi all,
>> >> >> ?In the Java ecosystem embedded DSLs have become increasingly
>> >> >> popular
>> >> >> over the past several years. ?In my opinion the primary drawback to
>> >> >> these is the painful task of their creation. ?For this reason I want
>> >> >> to experiment with the generation of Java interfaces from EBNF-style
>> >> >> grammars to see what I can accomplish, in true Dr. Terence Parr "why
>> >> >> program by hand in 5 days..." fashion. ?I have explored, for
>> >> >> example,
>> >> >> xtext, but the process of going from its meta-grammar to EDSL code
>> >> >> is
>> >> >> non-obvious. ?I'm open to other suggestions if anyone has any, but
>> >> >> in
>> >> >> the meantime I'm looking at ANTLR 4 and/or 3-based approaches. ?It
>> >> >> would seem most appropriate to use the ANTLR 4 meta-grammar, from
>> >> >> which point I would seem to have the following options:
>> >> >>
>> >> >> * Implement a custom code generation target for ANTLR 4
>> >> >> * Use ANTLRMorph with the ANTLR 3-based ANTLR 4 meta-grammar
>> >> >>
>> >> >> It might well be the case that these differ only in the manner in
>> >> >> which the output stringtemplates are provided. ?Does anyone have any
>> >> >> opinions on which approach is to be preferred? ?Failing that, I am
>> >> >> willing to entertain aspersions cast on, or less likely, advocations
>> >> >> in favor of, my sanity in conceiving this endeavor.
>> >> >>
>> >> >> Thanks in advance for any input,
>> >> >> Matt
>> >> >>
>> >> >> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>> >> >> Unsubscribe:
>> >> >>
>> >> >> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>> >> >
>> >> >
>> >>
>> >> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>> >> Unsubscribe:
>> >> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>> >
>> >
>
>

From researcher0x00 at gmail.com  Wed Jun 20 13:16:24 2012
From: researcher0x00 at gmail.com (Eric)
Date: Wed, 20 Jun 2012 16:16:24 -0400
Subject: [antlr-interest] Code generation advice
In-Reply-To: <CAN45N138GTDP=XFQ21BC0BPza9fa=85c+WvVWOC-cYZzN-zE9A@mail.gmail.com>
References: <CAE9L6G14rUs648wUj3BNUMnpvxyGVDAmw6igg7jQJ4+8oBDQdg@mail.gmail.com>
	<CAN45N11NYH-QmOEis3DKTp2EeqWJAZUmQ02tU8emhAx4NNHVOA@mail.gmail.com>
	<CAE9L6G0Uie1coB6MfQxb3AtZu9scvf09UQLhTk8bUPdGRL-Yng@mail.gmail.com>
	<CAN_KjYnrwQ4wJxZXy1VPWF7+MrFtS7bMBSSE3wncrVdE5PMBjQ@mail.gmail.com>
	<CAE9L6G377LXa5YNg6JznFJ=V6jrupLOpG6BqMjAYiQXAK5HDKw@mail.gmail.com>
	<CAN45N138GTDP=XFQ21BC0BPza9fa=85c+WvVWOC-cYZzN-zE9A@mail.gmail.com>
Message-ID: <CAN45N13GWPyuiVpaLr7Y6mSo_Q_HV3bhCLtTWecLr44G0rmaBw@mail.gmail.com>

Hi Matt,

Here is a summary of what I understand that you want. Please correct me
where I am wrong.

You want to create a grammar, the mother grammar for lack of something that
would be confusing, for creating other DSL grammars.

As an example the mother grammar would be ANTLR or some variant of ANTLR,
and the DSL grammar would be any grammar the user is intending to create.
Let's say the DSL grammar is for DOT files, yes I know there really is a
DOT file grammar created by ANTLR.

So using your mother grammar, the user would define the DOT grammar. Now
comes the big difference; instead of using the DOT grammar as an input to
ANTLR, you would use the DOT grammar to generate Java Interfaces that can
be called by the end program. I am not sure of what happens between the
call to the Java interface and the output of the call, but the point is
that you are not using ANTLR, but going straight from a call based on
grammar rule as a Java interface to some ouput such as an AST.

Eric



On Wed, Jun 20, 2012 at 3:54 PM, Eric <researcher0x00 at gmail.com> wrote:

> Hi Matt,
>
> It is now making much more sense.
>
> How do you plan on ensuring the grammar is not ambiguious?
> Will the grammar have to conform to one of the Chomsky hierarchies?  See:
> http://en.wikipedia.org/wiki/Chomsky_hierarchy
> It sounds like when you are done you be recreating PROLOG's Definite
> Clause Grammar.
> See: http://en.wikipedia.org/wiki/Definite_clause_grammar
>
> Eric
>
> On Wed, Jun 20, 2012 at 3:44 PM, Matt Benson <gudnabrsam at gmail.com> wrote:
>
>> Hi, Scott--and thanks for ANTLREclipse, which (never having moved past
>> v2) I still use.  ;)  Actually, embedded in my original email was the
>> fact that I have looked at xtext and making it do what I'm looking for
>> is at least an endeavor whose HOWTO is non-obvious.  AFAICT, its focus
>> is on parsing a DSL into a Java model:  well and good, but I know how
>> to do that with ANTLR.  Xtext might well make this job easier, but in
>> my case, I want more or less to bypass the idea of parsing a DSL and
>> simply use the same meta-grammar to describe an embedded DSL whose
>> rules are actually invoked as Java methods.  Possibly xtext *can* do
>> this, but so far its documentation is quite obtuse to me, and I have
>> yet to see anything in its examples that suggests that it would give
>> me a leg up on this particular task.
>>
>> @Eric:  your question is answered ;)
>>
>> Regards,
>> Matt
>>
>> On Wed, Jun 20, 2012 at 2:31 PM, Scott Stanchfield <scott at javadude.com>
>> wrote:
>> > Have you taken a look at xtext ( http://www.eclipse.org/Xtext/) It
>> uses a
>> > grammar similar to antlr to generate model interfaces/classes, a
>> > syntax-highlighting editor (optional, but very useful), persistence
>> manager
>> > and other doodads. Under the covers it uses antlr to do the actual
>> parsing.
>> >
>> > xtext is intended for DSL definition and is rather mature, too.
>> >
>> > As a really short example (from the xtext site):
>> >
>> > grammar org.xtext.example.mydsl.MyDsl
>> >     with org.eclipse.xtext.common.Terminals
>> >
>> > generate myDsl "http://www.xtext.org/example/mydsl/MyDsl"
>> >
>> > Model:
>> >     greetings+=Greeting*;
>> >
>> > Greeting:
>> >     'Hello' name=ID '!';
>> >
>> > would generate a Model class that has a property greetings which is a
>> list
>> > of Greeting instances, and a Greeting class that has a name property.
>> >
>> > I don't know if it fits exactly what you're looking for, but it's worth
>> > taking a look.
>> > -- Scott
>> >
>> > ----------------------------------------
>> > Scott Stanchfield
>> > http://javadude.com
>> >
>> >
>> >
>> > On Wed, Jun 20, 2012 at 2:49 PM, Matt Benson <gudnabrsam at gmail.com>
>> wrote:
>> >>
>> >> What I want to do is make it easier to write an EDSL by having it
>> >> specified like any other grammar, generating Java interfaces to
>> >> represent the grammar's various rules, as well as basic
>> >> implementations of these, which I expect will accumulate "tokens"
>> >> extracted from method arguments specified in fluent fashion.  In fact,
>> >> spelling it out here makes it sound as though it might be just as
>> >> reasonable for the end result of a series of calls upon the
>> >> implementation of this EDSL interface to create a (parse?) tree, which
>> >> could then be walked to resolve the final result of such a series of
>> >> method invocations.  This would have the benefit that such a tree
>> >> walker (parse, AST, what-have-you) would be equally applicable to a
>> >> tree generated from a "normal" ANTLR-generated Java Parser
>> >> implementation.
>> >>
>> >> Is that more clear?
>> >>
>> >> Thanks for your interest,
>> >> Matt
>> >>
>> >> On Wed, Jun 20, 2012 at 1:14 PM, Eric <researcher0x00 at gmail.com>
>> wrote:
>> >> > Ok, I'm curious as to what you are trying to do. It sounds like
>> >> > something I
>> >> > once tinkered with but since I did not understand your exact goal I
>> >> > could be
>> >> > totally wrong.
>> >> >
>> >> > The only part that I understood as part of the goal was "generation
>> of
>> >> > Java
>> >> > interfaces from EBNF-style grammars". Are you trying to generate Java
>> >> > interfaces from a grammar for other languages or interface languages
>> >> > such as
>> >> > C++, CORBA, etc.?
>> >> >
>> >> > Eric
>> >> >
>> >> >
>> >> >
>> >> > On Wed, Jun 20, 2012 at 12:08 PM, Matt Benson <gudnabrsam at gmail.com>
>> >> > wrote:
>> >> >>
>> >> >> Hi all,
>> >> >>  In the Java ecosystem embedded DSLs have become increasingly
>> popular
>> >> >> over the past several years.  In my opinion the primary drawback to
>> >> >> these is the painful task of their creation.  For this reason I want
>> >> >> to experiment with the generation of Java interfaces from EBNF-style
>> >> >> grammars to see what I can accomplish, in true Dr. Terence Parr "why
>> >> >> program by hand in 5 days..." fashion.  I have explored, for
>> example,
>> >> >> xtext, but the process of going from its meta-grammar to EDSL code
>> is
>> >> >> non-obvious.  I'm open to other suggestions if anyone has any, but
>> in
>> >> >> the meantime I'm looking at ANTLR 4 and/or 3-based approaches.  It
>> >> >> would seem most appropriate to use the ANTLR 4 meta-grammar, from
>> >> >> which point I would seem to have the following options:
>> >> >>
>> >> >> * Implement a custom code generation target for ANTLR 4
>> >> >> * Use ANTLRMorph with the ANTLR 3-based ANTLR 4 meta-grammar
>> >> >>
>> >> >> It might well be the case that these differ only in the manner in
>> >> >> which the output stringtemplates are provided.  Does anyone have any
>> >> >> opinions on which approach is to be preferred?  Failing that, I am
>> >> >> willing to entertain aspersions cast on, or less likely, advocations
>> >> >> in favor of, my sanity in conceiving this endeavor.
>> >> >>
>> >> >> Thanks in advance for any input,
>> >> >> Matt
>> >> >>
>> >> >> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>> >> >> Unsubscribe:
>> >> >>
>> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>> >> >
>> >> >
>> >>
>> >> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>> >> Unsubscribe:
>> >> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>> >
>> >
>>
>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>> Unsubscribe:
>> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>>
>
>

From gudnabrsam at gmail.com  Wed Jun 20 13:34:42 2012
From: gudnabrsam at gmail.com (Matt Benson)
Date: Wed, 20 Jun 2012 15:34:42 -0500
Subject: [antlr-interest] Code generation advice
In-Reply-To: <CAN45N13GWPyuiVpaLr7Y6mSo_Q_HV3bhCLtTWecLr44G0rmaBw@mail.gmail.com>
References: <CAE9L6G14rUs648wUj3BNUMnpvxyGVDAmw6igg7jQJ4+8oBDQdg@mail.gmail.com>
	<CAN45N11NYH-QmOEis3DKTp2EeqWJAZUmQ02tU8emhAx4NNHVOA@mail.gmail.com>
	<CAE9L6G0Uie1coB6MfQxb3AtZu9scvf09UQLhTk8bUPdGRL-Yng@mail.gmail.com>
	<CAN_KjYnrwQ4wJxZXy1VPWF7+MrFtS7bMBSSE3wncrVdE5PMBjQ@mail.gmail.com>
	<CAE9L6G377LXa5YNg6JznFJ=V6jrupLOpG6BqMjAYiQXAK5HDKw@mail.gmail.com>
	<CAN45N138GTDP=XFQ21BC0BPza9fa=85c+WvVWOC-cYZzN-zE9A@mail.gmail.com>
	<CAN45N13GWPyuiVpaLr7Y6mSo_Q_HV3bhCLtTWecLr44G0rmaBw@mail.gmail.com>
Message-ID: <CAE9L6G3gtysgHp1T4G5Bh8MkHmhP1yCNqzaObRAd_-CEcTSxJA@mail.gmail.com>

Eric,
  I think you've pretty much summed it up.  :)  The reason I thought
to yet use ANTLR is, e.g. if this is done as a custom ANTLR code
target, I should get a lot of stuff done for me for free with regard
to processing the mother, or meta, grammar into a model of a grammar,
e.g. org.antlr.v4.tool.Grammar.

I still have to get through your other references telling me just a
few of the many things I don't know.  ;)

Matt

On Wed, Jun 20, 2012 at 3:16 PM, Eric <researcher0x00 at gmail.com> wrote:
> Hi Matt,
>
> Here is a summary of what I understand that you want. Please correct me
> where I am wrong.
>
> You want to create a grammar, the mother grammar for lack of something that
> would be confusing, for creating other DSL grammars.
>
> As an example the mother grammar would be ANTLR or some variant of ANTLR,
> and the DSL grammar would be any grammar the user is intending to create.
> Let's say the DSL grammar is for DOT files, yes I know there really is a DOT
> file grammar created by ANTLR.
>
> So using your mother grammar, the user would define the DOT grammar. Now
> comes the big difference; instead of using the DOT grammar as an input to
> ANTLR, you would use the DOT grammar to generate Java Interfaces that can be
> called by the end program. I am not sure of what happens between the call to
> the Java interface and the output of the call, but the point is that you are
> not using ANTLR, but going straight from a call based on grammar rule as a
> Java interface?to some ouput such as an AST.
>
> Eric
>
>
>
>
> On Wed, Jun 20, 2012 at 3:54 PM, Eric <researcher0x00 at gmail.com> wrote:
>>
>> Hi Matt,
>>
>> It is now making much more sense.
>>
>> How do you plan on ensuring the grammar is not ambiguious?
>> Will the grammar have to conform to one of the Chomsky hierarchies?? See:
>> http://en.wikipedia.org/wiki/Chomsky_hierarchy
>> It sounds like when you are done you be recreating PROLOG's Definite
>> Clause Grammar.
>> See: http://en.wikipedia.org/wiki/Definite_clause_grammar
>>
>> Eric
>>
>> On Wed, Jun 20, 2012 at 3:44 PM, Matt Benson <gudnabrsam at gmail.com> wrote:
>>>
>>> Hi, Scott--and thanks for ANTLREclipse, which (never having moved past
>>> v2) I still use. ?;) ?Actually, embedded in my original email was the
>>> fact that I have looked at xtext and making it do what I'm looking for
>>> is at least an endeavor whose HOWTO is non-obvious. ?AFAICT, its focus
>>> is on parsing a DSL into a Java model: ?well and good, but I know how
>>> to do that with ANTLR. ?Xtext might well make this job easier, but in
>>> my case, I want more or less to bypass the idea of parsing a DSL and
>>> simply use the same meta-grammar to describe an embedded DSL whose
>>> rules are actually invoked as Java methods. ?Possibly xtext *can* do
>>> this, but so far its documentation is quite obtuse to me, and I have
>>> yet to see anything in its examples that suggests that it would give
>>> me a leg up on this particular task.
>>>
>>> @Eric: ?your question is answered ;)
>>>
>>> Regards,
>>> Matt
>>>
>>> On Wed, Jun 20, 2012 at 2:31 PM, Scott Stanchfield <scott at javadude.com>
>>> wrote:
>>> > Have you taken a look at xtext ( http://www.eclipse.org/Xtext/) It uses
>>> > a
>>> > grammar similar to antlr to generate model interfaces/classes, a
>>> > syntax-highlighting editor (optional, but very useful), persistence
>>> > manager
>>> > and other doodads. Under the covers it uses antlr to do the actual
>>> > parsing.
>>> >
>>> > xtext is intended for DSL definition and is rather mature, too.
>>> >
>>> > As a really short example (from the xtext site):
>>> >
>>> > grammar?org.xtext.example.mydsl.MyDsl
>>> > ? ??with?org.eclipse.xtext.common.Terminals
>>> >
>>> > generate?myDsl?"http://www.xtext.org/example/mydsl/MyDsl"
>>> >
>>> > Model:
>>> > ????greetings+=Greeting*;
>>> >
>>> > Greeting:
>>> > ????'Hello'?name=ID?'!';
>>> >
>>> > would generate a Model class that has a property greetings which is a
>>> > list
>>> > of Greeting instances, and a Greeting class that has a name property.
>>> >
>>> > I don't know if it fits exactly what you're looking for, but it's worth
>>> > taking a look.
>>> > -- Scott
>>> >
>>> > ----------------------------------------
>>> > Scott Stanchfield
>>> > http://javadude.com
>>> >
>>> >
>>> >
>>> > On Wed, Jun 20, 2012 at 2:49 PM, Matt Benson <gudnabrsam at gmail.com>
>>> > wrote:
>>> >>
>>> >> What I want to do is make it easier to write an EDSL by having it
>>> >> specified like any other grammar, generating Java interfaces to
>>> >> represent the grammar's various rules, as well as basic
>>> >> implementations of these, which I expect will accumulate "tokens"
>>> >> extracted from method arguments specified in fluent fashion. ?In fact,
>>> >> spelling it out here makes it sound as though it might be just as
>>> >> reasonable for the end result of a series of calls upon the
>>> >> implementation of this EDSL interface to create a (parse?) tree, which
>>> >> could then be walked to resolve the final result of such a series of
>>> >> method invocations. ?This would have the benefit that such a tree
>>> >> walker (parse, AST, what-have-you) would be equally applicable to a
>>> >> tree generated from a "normal" ANTLR-generated Java Parser
>>> >> implementation.
>>> >>
>>> >> Is that more clear?
>>> >>
>>> >> Thanks for your interest,
>>> >> Matt
>>> >>
>>> >> On Wed, Jun 20, 2012 at 1:14 PM, Eric <researcher0x00 at gmail.com>
>>> >> wrote:
>>> >> > Ok, I'm curious as to what you are trying to do. It sounds like
>>> >> > something I
>>> >> > once tinkered with but since I did not understand your exact goal I
>>> >> > could be
>>> >> > totally wrong.
>>> >> >
>>> >> > The only part that I understood as part of the goal was "generation
>>> >> > of
>>> >> > Java
>>> >> > interfaces from EBNF-style grammars". Are you trying to generate
>>> >> > Java
>>> >> > interfaces from a grammar for other languages or interface languages
>>> >> > such as
>>> >> > C++, CORBA, etc.?
>>> >> >
>>> >> > Eric
>>> >> >
>>> >> >
>>> >> >
>>> >> > On Wed, Jun 20, 2012 at 12:08 PM, Matt Benson <gudnabrsam at gmail.com>
>>> >> > wrote:
>>> >> >>
>>> >> >> Hi all,
>>> >> >> ?In the Java ecosystem embedded DSLs have become increasingly
>>> >> >> popular
>>> >> >> over the past several years. ?In my opinion the primary drawback to
>>> >> >> these is the painful task of their creation. ?For this reason I
>>> >> >> want
>>> >> >> to experiment with the generation of Java interfaces from
>>> >> >> EBNF-style
>>> >> >> grammars to see what I can accomplish, in true Dr. Terence Parr
>>> >> >> "why
>>> >> >> program by hand in 5 days..." fashion. ?I have explored, for
>>> >> >> example,
>>> >> >> xtext, but the process of going from its meta-grammar to EDSL code
>>> >> >> is
>>> >> >> non-obvious. ?I'm open to other suggestions if anyone has any, but
>>> >> >> in
>>> >> >> the meantime I'm looking at ANTLR 4 and/or 3-based approaches. ?It
>>> >> >> would seem most appropriate to use the ANTLR 4 meta-grammar, from
>>> >> >> which point I would seem to have the following options:
>>> >> >>
>>> >> >> * Implement a custom code generation target for ANTLR 4
>>> >> >> * Use ANTLRMorph with the ANTLR 3-based ANTLR 4 meta-grammar
>>> >> >>
>>> >> >> It might well be the case that these differ only in the manner in
>>> >> >> which the output stringtemplates are provided. ?Does anyone have
>>> >> >> any
>>> >> >> opinions on which approach is to be preferred? ?Failing that, I am
>>> >> >> willing to entertain aspersions cast on, or less likely,
>>> >> >> advocations
>>> >> >> in favor of, my sanity in conceiving this endeavor.
>>> >> >>
>>> >> >> Thanks in advance for any input,
>>> >> >> Matt
>>> >> >>
>>> >> >> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>>> >> >> Unsubscribe:
>>> >> >>
>>> >> >> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>>> >> >
>>> >> >
>>> >>
>>> >> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>>> >> Unsubscribe:
>>> >> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>>> >
>>> >
>>>
>>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>>> Unsubscribe:
>>> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>>
>>
>

From bradjcox at gmail.com  Wed Jun 20 16:27:14 2012
From: bradjcox at gmail.com (Brad Cox)
Date: Wed, 20 Jun 2012 19:27:14 -0400
Subject: [antlr-interest] [stringtemplate-interest] Antlr3 in Eclipse
	and Maven?
In-Reply-To: <CADVp3v_mvdZ-QN3y36U70PwCftCwY9iowW2QzBpGoSdzkZuk3Q@mail.gmail.com>
References: <CAH2etF5MhfzMVfxY0+ngtmTfJBKfz0kz4fhetLAb263UEYuvWA@mail.gmail.com>
	<5fad0d88143479e6ddd6b55683ff75d9@mail.gmail.com>
	<CADVp3v8AV2UArqMb7kMyhAePoOzTi1ZUquYGKc-5w_FZJbSMhw@mail.gmail.com>
	<CADVp3v_mvdZ-QN3y36U70PwCftCwY9iowW2QzBpGoSdzkZuk3Q@mail.gmail.com>
Message-ID: <CAH2etF6Y3Z4CzbQ08dG67t_CteBDe=rJdL068jL0M_=QjAP3PQ@mail.gmail.com>

Thanks for the help but I'm gonna bail and try to get my head around xtext.
This is too flakey to count on. Reliable eclipse/maven integration is
essential; parsing is just a tiny fragment of what I need to do.

On Wed, Jun 20, 2012 at 6:48 PM, Barrie Treloar <baerrach at gmail.com> wrote:

> (Apologies Jim, reply doesn't do the expected thing, needed reply all).
>
> ---------- Forwarded message ----------
> From: Barrie Treloar <baerrach at gmail.com>
> Date: Thu, Jun 21, 2012 at 8:17 AM
> Subject: Re: [stringtemplate-interest] [antlr-interest] Antlr3 in
> Eclipse and Maven?
> To: Jim Idle <jimi at temporal-wave.com>
>
>
> On Wed, Jun 20, 2012 at 8:35 PM, Jim Idle <jimi at temporal-wave.com> wrote:
> [del]
> > The dependency list shows antlr-runtime-3.2.jar and
> stringtemplate-3.2.jar
> > now. Previously there was an antlr2 jar that I've explicitly excluded.
> > Didn't make a difference.
> >
> > My best guess is that the antlr3 maven plugin is launching antlr2, not
> > antlr3, but I have no visibility into what that plugin is doing.
> >
> > <groupId>org.antlr</groupId>
> > <artifactId>antlr3-maven-plugin</artifactId>
> > <version>3.1.3-1</version
> >
> > There's also likely confusion over which eclipse plugin I should be
> using.
> > After some searching I removed everything but the one from certiv, but no
> > joy.
>
> Run mvn -X and read the output carefully.
> I'd save it to a file for inspection.
>
> You should be able to clearly see the incorrect versions being used
> and who are the culprits.
>
> Either fix your pom because you have specified the wrong ones,
> or you need to use dependencyManagement to exclude the incorrect
> dependency from the offending plugin/artifact and then re-provide the
> version you want.
>
> I can't help with the eclipse plugin stuff.
> I've only looked for an eclipse plugin for StringTemplate, ANTLR
> grammar was sufficiently simple an Eclipse text editor was fine.
>



-- 
Cell: 703-594-1883
Blog: http://bradjcox.blogspot.com
Web: http://virtualschool.edu
Manassas VA 20111

From jimi at temporal-wave.com  Wed Jun 20 18:39:13 2012
From: jimi at temporal-wave.com (Jim Idle)
Date: Thu, 21 Jun 2012 09:39:13 +0800
Subject: [antlr-interest] Antlr3 in Eclipse and Maven?
In-Reply-To: <CAH2etF4nmYwtR+Qyh2m2NYK+x9o2B5W7YQzFrr9yEhzA7vB2jg@mail.gmail.com>
References: <CAH2etF5MhfzMVfxY0+ngtmTfJBKfz0kz4fhetLAb263UEYuvWA@mail.gmail.com>
	<CAP-ipi6DgDMPysv2nS3G4660YKBemyed+cUV8cf6JDjaevd5mQ@mail.gmail.com>
	<CAH2etF4nmYwtR+Qyh2m2NYK+x9o2B5W7YQzFrr9yEhzA7vB2jg@mail.gmail.com>
Message-ID: <7405abc7ac75ae1bf95d9f77814a97d0@mail.gmail.com>

The wiki instructions are fine and the output you see on the web page is
from maven. However you should really be using 3.4 anyway of course - the
only thing I would change on the wiki page is the version number. BTW -
you don't need to override the default options with the default values -
that is probably something to do with why that version of the plugin did
not work for you. When trying to work out why something is going  wrong,
start with the simplest configuration - don't dive in with the most
complex and then accuse the documentation of being incorrect.

Antlr has nothing to do with the Eclipse editors - the Eclipse editor is
no doubt trying to deal with ANTLR 2.

If you have an undeclared _type variable in your generated lexer in 3.4,
then though it is possible there is a bug in the lexer, I think that it is
more likely that you are trying to do something in the lexer that is
forbidden but is not caught at analysis time - perhaps you are trying to
change token types in a fragment rule or something like that.

We won't be able to tell unless you show the rule that generates the
undeclared _type variable. Declaring a _type variable manually is very
unlikely to be the correct fix. I think that your lexer is just broken.

Jim



-----Original Message-----
From: antlr-interest-bounces at antlr.org
[mailto:antlr-interest-bounces at antlr.org] On Behalf Of Brad Cox
Sent: Wednesday, June 20, 2012 8:15 PM
To: Verny Quartara
Cc: ANTLR interest
Subject: Re: [antlr-interest] Antlr3 in Eclipse and Maven?

Thanks! The new version number did the trick. The wiki instructions are
just broken.

And I still don't have a solution to why the grammar statement still isn't
recognized.

That revealed a problem I've seen all along in the generated lexer code...
the _type variable is never declared. Accepting the eclipse quick fix
(declare local variable) clears the problem. But the code generator should
have done this without having to repair it by hand.

Failed to execute goal
> org.apache.maven.plugins:maven-compiler-plugin:2.3.2:compile
> (default-compile) on project Xacml-Antlr: Compilation failure:
> Compilation
> failure:
> [ERROR]
> /Users/Brad/Dropbox/Xacml-Antlr/target/generated-sources/antlr3/my/Xac
> mlLexer.java:[3239,29]
> cannot find symbol
> [ERROR] symbol  : variable _type
> [ERROR] location: class my.XacmlLexer
> [ERROR]
> /Users/Brad/Dropbox/Xacml-Antlr/target/generated-sources/antlr3/my/Xac
> mlLexer.java:[3246,29]
> cannot find symbol
> [ERROR] symbol  : variable _type
> [ERROR] location: class my.XacmlLexer
> [ERROR]
> /Users/Brad/Dropbox/Xacml-Antlr/target/generated-sources/antlr3/my/Xac
> mlLexer.java:[3314,21]
> cannot find symbol
> [ERROR] symbol  : variable _type
> [ERROR] location: class my.XacmlLexer
> [ERROR]
> /Users/Brad/Dropbox/Xacml-Antlr/target/generated-sources/antlr3/my/Xac
> mlLexer.java:[3403,29]
> cannot find symbol
> [ERROR] symbol  : variable _type
> [ERROR] location: class my.XacmlLexer
> [ERROR]
> /Users/Brad/Dropbox/Xacml-Antlr/target/generated-sources/antlr3/my/Xac
> mlLexer.java:[3412,28]
> cannot find symbol
> [ERROR] symbol  : variable _type
> [ERROR] location: class my.XacmlLexer
> [ERROR]
> /Users/Brad/Dropbox/Xacml-Antlr/target/generated-sources/antlr3/my/Xac
> mlLexer.java:[3419,28]
> cannot find symbol
> [ERROR] symbol  : variable _type
> [ERROR] location: class my.XacmlLexer


On Wed, Jun 20, 2012 at 8:06 AM, Verny Quartara <webny23 at gmail.com> wrote:

> I post my working configuration, hoping that helps.
> My grammar compiles fine in both AntlrWorks and Maven.
> I putted my .g files in src/main/antlr3 and the gunit tests in
> src/test/gunit.
>
> Bye
>
> <plugin>
>                 <groupId>org.antlr</groupId>
>                 <artifactId>antlr3-maven-plugin</artifactId>
>                 <version>3.4</version>
>                 <executions>
>                     <execution>
>                         <goals>
>                             <goal>antlr</goal>
>                         </goals>
>                     </execution>
>                 </executions>
>             </plugin>
>             <plugin>
>                 <groupId>org.antlr</groupId>
>                 <artifactId>maven-gunit-plugin</artifactId>
>                 <version>3.4</version>
>                 <executions>
>                     <execution>
>                         <id>maven-gunit-plugin</id>
>                         <phase>generate-test-sources</phase>
>                         <goals>
>                             <goal>gunit</goal>
>                         </goals>
>                     </execution>
>                 </executions>
>             </plugin>
>
>
> 2012/6/20 Brad Cox <bradjcox at gmail.com>
>
>>  I've an antlr3 grammar that compiles fine in AntlrWorks. I'm trying
>> to load it into Eclipse with Maven to start work on the non-grammar
>> bits.
>>
>> Problem is it won't compile in either. Error flags are on the first
>> line, grammar ...;, and nothing I've tried will remove them. Somehow
>> antlr2 is getting involved in the compile step.
>>
>> The dependency list shows antlr-runtime-3.2.jar and
>> stringtemplate-3.2.jar now. Previously there was an antlr2 jar that
I've explicitly excluded.
>> Didn't make a difference.
>>
>> My best guess is that the antlr3 maven plugin is launching antlr2,
>> not antlr3, but I have no visibility into what that plugin is doing.
>>
>> <groupId>org.antlr</groupId>
>> <artifactId>antlr3-maven-plugin</artifactId>
>> <version>3.1.3-1</version
>>
>> There's also likely confusion over which eclipse plugin I should be
using.
>> After some searching I removed everything but the one from certiv,
>> but no joy.
>>
>> Could someone point me to a known-to-work reference? Thanks!
>>
>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>> Unsubscribe:
>> http://www.antlr.org/mailman/options/antlr-interest/your-email-addres
>> s
>>
>
>
>
> --
> Verny Quartara
>
>


--
Cell: 703-594-1883
Blog: http://bradjcox.blogspot.com
Web: http://virtualschool.edu
Manassas VA 20111

List: http://www.antlr.org/mailman/listinfo/antlr-interest
Unsubscribe:
http://www.antlr.org/mailman/options/antlr-interest/your-email-address

From bradjcox at gmail.com  Thu Jun 21 04:08:34 2012
From: bradjcox at gmail.com (Brad Cox)
Date: Thu, 21 Jun 2012 07:08:34 -0400
Subject: [antlr-interest] Antlr3 in Eclipse and Maven?
In-Reply-To: <7405abc7ac75ae1bf95d9f77814a97d0@mail.gmail.com>
References: <CAH2etF5MhfzMVfxY0+ngtmTfJBKfz0kz4fhetLAb263UEYuvWA@mail.gmail.com>
	<CAP-ipi6DgDMPysv2nS3G4660YKBemyed+cUV8cf6JDjaevd5mQ@mail.gmail.com>
	<CAH2etF4nmYwtR+Qyh2m2NYK+x9o2B5W7YQzFrr9yEhzA7vB2jg@mail.gmail.com>
	<7405abc7ac75ae1bf95d9f77814a97d0@mail.gmail.com>
Message-ID: <CAH2etF7QUoMjF8rGa=GWOpge_XOqXwhVrHQ1G7_SBp=4rMcC0g@mail.gmail.com>

On Wed, Jun 20, 2012 at 9:39 PM, Jim Idle <jimi at temporal-wave.com> wrote:

> The wiki instructions are fine and the output you see on the web page is
> from maven. However you should really be using 3.4 anyway of course -


Fine? Of course? How would anyone know that when the wiki doesn't mention
versions, just a link to a  example with the wrong version number? Of
course you "should" but will anyone know that? Quote from
http://www.antlr.org/antlr3-maven-plugin/examples/simple.html

If your grammar files are organized into the default locations as described
in the introduction <http://www.antlr.org/antlr3-maven-plugin/index.html>,
then configuring the pom.xml file for your project is as simple as adding
this to it

<plugins>
<plugin>
    <groupId>org.antlr</groupId>
    <artifactId>antlr3-maven-plugin</artifactId>
    <version>3.1.3-1</version>
    <executions>
        <execution>
            <goals>
                <goal>antlr</goal>
            </goals>
        </execution>
    </executions>
</plugin>
...
</plugins>


I fixed the lexer problem and maven builds work now, but I still don't have
a clue about how to get the eclipse editor working.

From swathiv at zinniasystems.com  Thu Jun 21 04:24:08 2012
From: swathiv at zinniasystems.com (Swathi V)
Date: Thu, 21 Jun 2012 16:54:08 +0530
Subject: [antlr-interest] Antlr3 in Eclipse and Maven?
In-Reply-To: <CAH2etF7QUoMjF8rGa=GWOpge_XOqXwhVrHQ1G7_SBp=4rMcC0g@mail.gmail.com>
References: <CAH2etF5MhfzMVfxY0+ngtmTfJBKfz0kz4fhetLAb263UEYuvWA@mail.gmail.com>
	<CAP-ipi6DgDMPysv2nS3G4660YKBemyed+cUV8cf6JDjaevd5mQ@mail.gmail.com>
	<CAH2etF4nmYwtR+Qyh2m2NYK+x9o2B5W7YQzFrr9yEhzA7vB2jg@mail.gmail.com>
	<7405abc7ac75ae1bf95d9f77814a97d0@mail.gmail.com>
	<CAH2etF7QUoMjF8rGa=GWOpge_XOqXwhVrHQ1G7_SBp=4rMcC0g@mail.gmail.com>
Message-ID: <CAKYno58Pu-3HLBB7dhJXUfv5RLXEkH5KJkxc=w-Dp5GpzpTCAg@mail.gmail.com>

Hi Brad,
ANTLR is awesome :) I had used it a year back for an open source project
based on Hadoop :)
Just in case you have issues using it, I would like to suggest few links.
Hope you find them useful.
Getting Started:
http://femgeekz.blogspot.in/2012/06/getting-started-with-antlrbasics.html
Setting as external tool in Eclipse:
http://femgeekz.blogspot.in/2012/06/antlr-as-external-tool-in-eclipse-on.html
For maven integration :

<dependency>

			<groupId>org.antlr</groupId>

			<artifactId>antlr-runtime</artifactId>

			<version>3.1.3</version>

		</dependency>

		
	</dependencies>

	<build>

		<plugins>

		<plugin>

				<groupId>org.antlr</groupId>

				<artifactId>antlr3-maven-plugin</artifactId>

				<version>3.1.3-1</version>

				<executions>

					<execution>

					<configuration>

				<outputDirectory>src/main/java</outputDirectory>


					</configuration>

						<goals>

							<goal>antlr</goal>

						</goals>

					</execution>

				</executions>

			</plugin>


This worked fine for me.

Please check once :)

Thank You.

Regards,
Swathi.V.
Zinnia Systems
Blog URL : http://femgeekz.blogspot.com



On Thu, Jun 21, 2012 at 4:38 PM, Brad Cox <bradjcox at gmail.com> wrote:

> On Wed, Jun 20, 2012 at 9:39 PM, Jim Idle <jimi at temporal-wave.com> wrote:
>
> > The wiki instructions are fine and the output you see on the web page is
> > from maven. However you should really be using 3.4 anyway of course -
>
>
> Fine? Of course? How would anyone know that when the wiki doesn't mention
> versions, just a link to a  example with the wrong version number? Of
> course you "should" but will anyone know that? Quote from
> http://www.antlr.org/antlr3-maven-plugin/examples/simple.html
>
> If your grammar files are organized into the default locations as described
> in the introduction <http://www.antlr.org/antlr3-maven-plugin/index.html>,
> then configuring the pom.xml file for your project is as simple as adding
> this to it
>
> <plugins>
> <plugin>
>    <groupId>org.antlr</groupId>
>    <artifactId>antlr3-maven-plugin</artifactId>
>     <version>3.1.3-1</version>
>     <executions>
>        <execution>
>            <goals>
>                <goal>antlr</goal>
>            </goals>
>        </execution>
>    </executions>
> </plugin>
> ...
> </plugins>
>
>
> I fixed the lexer problem and maven builds work now, but I still don't have
> a clue about how to get the eclipse editor working.
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>

From jimi at temporal-wave.com  Thu Jun 21 05:07:34 2012
From: jimi at temporal-wave.com (Jim Idle)
Date: Thu, 21 Jun 2012 20:07:34 +0800
Subject: [antlr-interest] Antlr3 in Eclipse and Maven?
In-Reply-To: <CAH2etF7QUoMjF8rGa=GWOpge_XOqXwhVrHQ1G7_SBp=4rMcC0g@mail.gmail.com>
References: <CAH2etF5MhfzMVfxY0+ngtmTfJBKfz0kz4fhetLAb263UEYuvWA@mail.gmail.com>
	<CAP-ipi6DgDMPysv2nS3G4660YKBemyed+cUV8cf6JDjaevd5mQ@mail.gmail.com>
	<CAH2etF4nmYwtR+Qyh2m2NYK+x9o2B5W7YQzFrr9yEhzA7vB2jg@mail.gmail.com>
	<7405abc7ac75ae1bf95d9f77814a97d0@mail.gmail.com>
	<CAH2etF7QUoMjF8rGa=GWOpge_XOqXwhVrHQ1G7_SBp=4rMcC0g@mail.gmail.com>
Message-ID: <5BA95ECF-8CBB-4608-B8BB-D150CD9F6E88@temporal-wave.com>

How you know is that you use the Maven browser in eclipse to find the latest version. Or you use maven dependency updated and ask it to update to the latest version. Or you simply delete the version number when editing them pin in eclipse then press ctrl+space and it tells you. Or you take out the version altogether and watch and see that maven uses the latest, then you add the version back in. Or you infer that because the maven plugin version follows the antlr tool version and deduce that there must be a version 3.4. Or you use the maven artifact search engine. or you use your own local nexus repo...

"Of course" means that when starting a new project you would usually start with latest toolsets unless contra-indicated because of backward compatibility with some other component. But it is also something of a throw-way in English vernacular.  

please share how you fixed your lexer so that the fix is in the archives for others. 

Cheers. 

Jim

On Jun 21, 2012, at 7:08 PM, Brad Cox <bradjcox at gmail.com> wrote:

> On Wed, Jun 20, 2012 at 9:39 PM, Jim Idle <jimi at temporal-wave.com> wrote:
> The wiki instructions are fine and the output you see on the web page is
> from maven. However you should really be using 3.4 anyway of course - 
> 
> Fine? Of course? How would anyone know that when the wiki doesn't mention versions, just a link to a  example with the wrong version number? Of course you "should" but will anyone know that? Quote from http://www.antlr.org/antlr3-maven-plugin/examples/simple.html
> 
> If your grammar files are organized into the default locations as described in the introduction, then configuring the pom.xml file for your project is as simple as adding this to it
> <plugins>
> <plugin>
>     <groupId>org.antlr</groupId>
>     <artifactId>antlr3-maven-plugin</artifactId>
>     <version>3.1.3-1</version>
>     <executions>
>         <execution>
>             <goals>
>                 <goal>antlr</goal>
>             </goals>
>         </execution>
>     </executions>
> </plugin>
> ...
> </plugins>
> 
> I fixed the lexer problem and maven builds work now, but I still don't have a clue about how to get the eclipse editor working. 

From bradjcox at gmail.com  Thu Jun 21 05:24:19 2012
From: bradjcox at gmail.com (Brad Cox)
Date: Thu, 21 Jun 2012 08:24:19 -0400
Subject: [antlr-interest] Antlr3 in Eclipse and Maven?
In-Reply-To: <5BA95ECF-8CBB-4608-B8BB-D150CD9F6E88@temporal-wave.com>
References: <CAH2etF5MhfzMVfxY0+ngtmTfJBKfz0kz4fhetLAb263UEYuvWA@mail.gmail.com>
	<CAP-ipi6DgDMPysv2nS3G4660YKBemyed+cUV8cf6JDjaevd5mQ@mail.gmail.com>
	<CAH2etF4nmYwtR+Qyh2m2NYK+x9o2B5W7YQzFrr9yEhzA7vB2jg@mail.gmail.com>
	<7405abc7ac75ae1bf95d9f77814a97d0@mail.gmail.com>
	<CAH2etF7QUoMjF8rGa=GWOpge_XOqXwhVrHQ1G7_SBp=4rMcC0g@mail.gmail.com>
	<5BA95ECF-8CBB-4608-B8BB-D150CD9F6E88@temporal-wave.com>
Message-ID: <CAH2etF62eMPF6P9TZkrfyDzcW3igEzR-hPoE2H+RRDKJSyAoRA@mail.gmail.com>

On Thu, Jun 21, 2012 at 8:07 AM, Jim Idle <jimi at temporal-wave.com> wrote:

> How you know is that you use the Maven browser in eclipse to find the
> latest version.
>

Isn't that expecting a bit much of someone trying to get to hello world?
Why push that on the user? Why not just fix the bloody wiki as I asked?

From nafur42 at gmail.com  Thu Jun 21 08:36:12 2012
From: nafur42 at gmail.com (nafur)
Date: Thu, 21 Jun 2012 17:36:12 +0200
Subject: [antlr-interest] Exploit ambiguity in tree rewriter
In-Reply-To: <1339693830.13927.2@esd-s7>
References: <1339693830.13927.2@esd-s7>
Message-ID: <4FE33F6C.5050509@gmail.com>

Hi,

Here are two examples for more complex replacements:

Q * Q^T (where Q is any subtree) -> I
A x = b (where x is any subtree) -> x = VAR (new variable)

As I have to find such a pattern (Q Q^T) no matter where it occurs
within an arbitrarily shaped multiplication, the recursive construction
does not seem like an option to me.

How would you implement this rule?

Gereon

On 06/14/2012 07:10 PM, Stefan M?tje (U-Boot Mail) wrote:
> Am 14.06.2012 13:59:43 schrieb(en) nafur:
>> Hi,
>>
>> I already thought about this, but this yields new problems. If I build
>> my ASTs like this, I have to take care of all possible multiplications.
> 
> I don't think so. Because the expr rule in my bare bones example is applied 
> recursively and from the bottom of the tree up multiple(!) times by the 
> bottomup rule all it needs to take care for is one operator and two operands 
> (either of them could be an "expr" expression).
> 
>> To match A B I have to match ^(* A B), ^(* A ^(* B ...)), ^(* ^(* ... A) B), 
>> ^(* ^(* ... A) ^(* B ... )).
> 
> Yes, at first they look as a lot of variants but it always boils down to a
> ^(* aExpr bExpr). Please really have a look at the examples for expression 
> evaluation on the ANTLR website. And use the link to the Wiki I provided.
> 
> Have a look at the example AST I suggested below:
> 
> ^(* ^(* ^(* ^(* 5 3) 1) 2) 4)
> 
> ANTLR will match and apply the expr rule 4 times to this AST in this manner:
> 
> 1. match: ^(* 5 3)        ->  ^(* 5 3)
> 2. match: ^(* ^(* 5 3) 1) ->  ^(* 5 3) // real rewrite propagetes only this up
> 3. match  ^(* ^(* 5 3) 2) ->  ^(* ^(* 5 3) 2)  // no change
> 4. match  ^(* ^(* ^(* 5 3) 2) 4)  -> ^(* ^(* ^(* 5 3) 2) 4)
> 
> The 1 has vanished as expected and only 3 multiplications are left.
> 
>> As I will at some point go for rules that match more than two factors,
>> this does not seem like a real option to me...
> 
> What kind of operators do you have that take more than two operands? I
> can't imagine a use case at the moment.
> 
> Stefan
> 
>> Gereon
>>
>> On 06/14/2012 12:00 PM, Stefan M?tje wrote:
>>> Hi nafur,
>>>
>>> from what I've read in this thread till now I got the impression that
>>> you've structured your AST in a way that counteracts your goals.
>>>
>>> I'll try to give a simple example to get us on common ground. I will
>>> refer here only to simple scalar multiplication with an expression like
>>> this:
>>>
>>> "5 * 3 * 1 * 2 * 4"
>>>
>>> As far as I understand from your writings you would build an AST like
>>> the following from this input
>>>
>>> "^(MULT 5 3 1 2 4)
>>>
>>> and try to match it with a rule like this
>>>
>>> topdown :
>>>     ^( MULT (before += .)* x=. (after += .)* )
>>>         { $x.has("IDENTITY") }?
>>>     ->  ^( MULT $before* $after* )
>>> ;
>>>
>>> How should ANTLR generated code distribute the tokens from the AST to
>>> your variables "before", "x" and "after"? You're not giving ANTLR any
>>> hint about it. I guess you would end up with:
>>> before: "5 3 1 2"
>>> x:      "4"
>>> after:  ""    // empty
>>>
>>> And you must to have "x" assigned the "1" to make your code work.
>>>
>>> Doing expression evaluation and simplification is done differently with
>>> ANTLR and leads to ASTs that combine two operands with one operator that
>>> can then be simplified in a straightforward manner.
>>>
>>> A more appropriate AST structure for the before mentioned input would be
>>> this recursive structure:
>>>
>>> ^(* ^(* ^(* ^(* 5 3) 1) 2) 4)
>>>
>>> In a "pretty printed" style it would appear like this.
>>>
>>> ^(*
>>>     ^(*
>>>         ^(*
>>>             ^(*
>>>                 5
>>>                 3
>>>             )
>>>             1
>>>         )
>>>         2
>>>     )
>>>     4
>>> )
>>>
>>> This way you have only to deal with an operator and two operands in one
>>> rule. A bare bones example (not working) looks like this:
>>>
>>> bottomup:
>>>     expr
>>>     ;
>>>
>>> expr:
>>>     ^(* a=expr b=INT {$b.text()== "1"}?)    ->    $a
>>>     ^(* a=INT {$a.text()== "1"}? b=expr)    ->    $b
>>>     ;
>>>
>>> This way you can now match special things in the AST and act on them
>>> testing some properties of the trees. You can see the simplification
>>> that the result of "expr" is one of the operands if one of the others is
>>> a literal "1".
>>>
>>> For a better explanation and an example look at
>>> http://www.antlr.org/wiki/display/~admin/2008/11/30/Example+tree+rewriting
>> +with+patterns
>>>
>>>
>>>
>>> I hope I did not misunderstand what you want to do.
>>>
>>> Stefan
>>>
>>>
>>> Am 13.06.2012 10:18, schrieb nafur:
>>>> Hi,
>>>>
>>>> Ok, I guess I have to somehow redefine the nature of the rewrite rules I
>>>> want to use:
>>>>
>>>> My ASTs represent mathematical formulas and .has() checks, if this
>>>> symbol has some special mathematical property (like "is identity", "is
>>>> symmetric", "is invertible", "is orthogonal", ... I'm working with
>>>> matrices).
>>>>
>>>> Thus, this example is really the simplest one. Another example is:
>>>>
>>>> ^( MULT (before += .)* x=. ^( POW y=. TRANSPOSE) (after += .)* )
>>>> { $x.equals($y)&&  $x.has("ORTHOGONAL") }?
>>>> ->  ^( MULT $before* IDENTITY $after* )
>>>>
>>>> i.e.: replace any Q Q^T by the identity, if Q is orthogonal. Note that
>>>> this rule requires a comparison of whole subtrees ($x.equals($y)).
>>>>
>>>> Therefore, filtering single symbols would work for my first example (I
>>>> somehow selected a quite bad example). For more complex examples, I
>>>> really want to rely on the pattern matching offered by ANTLR.
>>>>
>>>> What I would like: Instead of resolving ambiguity by just choosing a
>>>> single possibility, try all of them (what makes more sense for rewrite
>>>> rules anyway).
>>>>
>>>> Gereon
>>>>
>>>> On 06/13/2012 07:35 AM, Benjamin S Wolf wrote:
>>>>> If I were programming this for a Python target, I'd guess it would
>>>>> look something like:
>>>>>
>>>>> topdown : ^( MULT (arg+=.)* )
>>>>>      ->  { filter_out_identities(MULT, $arg) };
>>>>>
>>>>> with a function filter_out_identities defined in a header somewhere:
>>>>>
>>>>> def filter_out_identities(node, nodes):
>>>>>      tree = CommonTree(node)
>>>>>      tree.addChildren(n for n in nodes if not n.has("IDENTITY"))
>>>>>      return tree
>>>>>
>>>>> I'm not sure what you really want to do. You were asking how to remove
>>>>> all of a token from a list, and you gave an example that indicated you
>>>>> had a function "has" that would let you check whether a token was an
>>>>> identity, and you're matching against every token. Sorry if I
>>>>> misunderstood that.
>>>>>
>>>>> If you only have one token that could be an identity, then you could
>>>>> do something like:
>>>>>
>>>>> topdown : ^( MULT (a+=~IDENTITY)* (IDENTITY* b+=~IDENTITY*)* IDENTITY*
>>>>>      ->  ^( MULT a* b* );
>>>>>
>>>>> and no actions are required.
>>>>>
>>>>> You might even be able to do
>>>>>
>>>>> ^( MULT ( IDENTITY | a+=~IDENTITY )* ) ->  ^( MULT a* )
>>>>>
>>>>> This is based on my understanding of parser rules; I'm not sure how
>>>>> different it would be for tree parser rules.
>>>>>
>>>>> On Tue, Jun 12, 2012 at 10:07 PM, nafur<nafur42 at gmail.com>  wrote:
>>>>>> Hi,
>>>>>>
>>>>>> While I'm not completely sure how this would look like, this would
>>>>>> somehow result in implementing the pattern matching myself, right?
>>>>>> As this example is a very easy one, this is no option for me. Actually,
>>>>>> I'm only using ANTLR because of this pattern matching...
>>>>>>
>>>>>> Gereon
>>>>>>
>>>>>> On 06/13/2012 05:34 AM, Benjamin S Wolf wrote:
>>>>>>> The best way to accomplish this is likely to be an arbitrary
>>>>>>> action, eg.:
>>>>>>>
>>>>>>> a : INT ->  { new CommonTree(new CommonToken(FLOAT, $INT.text +
>>>>>>> ".0")) } ;
>>>>>>>
>>>>>>> This takes an INT and returns a Tree with one node, a FLOAT token with
>>>>>>> text that is the int plus ".0".
>>>>>>>
>>>>>>> You'll want to make a tree via CommonTree() and add a list of children
>>>>>>> that excludes all tokens that have IDENTITY (or add each child if it
>>>>>>> doesn't have the identity). This means you'll be looping over all the
>>>>>>> nodes in the MULT subtree within the action.
>>>>>>>
>>>>>>> On Mon, Jun 11, 2012 at 2:01 AM, nafur<nafur42 at gmail.com>  wrote:
>>>>>>>> Hi,
>>>>>>>>
>>>>>>>> I asked about this ambiguity quite a while ago. Does nobody has
>>>>>>>> any idea
>>>>>>>> how to do this?
>>>>>>>>
>>>>>>>> Gereon
>>>>>>>>
>>>>>>>> On 05/29/2012 12:48 PM, nafur wrote:
>>>>>>>>> Hi,
>>>>>>>>>
>>>>>>>>> I'm using tree rewriters to manipulate formulas that are
>>>>>>>>> represented as
>>>>>>>>> ASTs. One operation I'd like to do is: "remove any identity from a
>>>>>>>>> multiplication".
>>>>>>>>>
>>>>>>>>> The replacement rule I'm currently working with is the following:
>>>>>>>>>
>>>>>>>>> topdown :
>>>>>>>>>        ^( MULT (before += .)* x=. (after += .)* )
>>>>>>>>>        { $x.has("IDENTITY") }?
>>>>>>>>>        ->  ^( MULT $before* $after* )
>>>>>>>>> ;
>>>>>>>>>
>>>>>>>>> As you probably see, we have some ambiguity here: before and
>>>>>>>>> after can
>>>>>>>>> both take arbitrarily many elements. If I take an AST like
>>>>>>>>> ^( MULT A I x ), the replacement will not match. printing some debug
>>>>>>>>> output reveals, that ANTLR will only check $x.has("IDENTITY"),
>>>>>>>>> i.e. will
>>>>>>>>> only try to match the last element in a multiplication.
>>>>>>>>> (That is actually not a surprise, as ANTLR issues a warning...)
>>>>>>>>>
>>>>>>>>> Is there any way to resolve this ambiguity in a way, such that I can
>>>>>>>>> match all occurrences?
>>>>>>>>>
>>>>>>>>> Thanks,
>>>>>>>>> Gereon
>>>>>>>>
>>>>>>>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>>>>>>>> Unsubscribe:
>>>>>>>> http://www.antlr.org/mailman/options/antlr-interest/your-email-
>> address
>>>>>>>>
>>>>
>>>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>>>> Unsubscribe:
>>>> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>>>>
>>
>>
> 
> 
> 

From bradjcox at gmail.com  Thu Jun 21 09:49:50 2012
From: bradjcox at gmail.com (Brad Cox)
Date: Thu, 21 Jun 2012 12:49:50 -0400
Subject: [antlr-interest] Non-LL(*) conflict distinguishing integer and
	double
Message-ID: <CAH2etF6auiVPt579SEBOxiF_yN2CZecAhaAJoDjgTm+rD2FFjQ@mail.gmail.com>

Could someone help me find the conflict here? I'm pretty sure its
complaining about NNNN vs NNNN.NNNN but danged if I can see it.

A pruned-down fragment of the real grammar:

grammar Frag;

options
{
//  backtrack=true;
//  memoize = true;
  output=AST;
}
tokens
{
ABS_TOK='abs';
 ACTION_TOK='action';
ALLOF_TOK='allOf';
ALLOFALL_TOK='allOfAll';
 ALLOFANY_TOK='allOfAny';
ANYOF_TOK='anyOf';
ANYOFALL_TOK='anyOfAll';
 ANYOFANY_TOK='anyOfAny' ;
ANYURI_TOK= 'anyUriExpr';
ATLEASTONEMENBEROF_TOK='atLeastOneMemberOf';
 BAG_TOK='bag';
BASE64_TOK= 'base64Expr';
BOOL_TOK= 'boolean';
 CONCATENATE_TOK='concatenate';
DATE_TOK= 'dateExpr';
DATETIME_TOK= 'dateTimeExpr';
 DAYTIMEDURATION_TOK= 'dayTimeDurationExpr';
DECIMAL_TOK='decimal';
 DENY_TOK = 'deny';
DEREF_TOK='deref';
DOUBLE_TOK= 'double';
 ENVIRONMENT_TOK='environment';
FALSE_TOK='false';
FLR_TOK='flr';
 HEXBINARY_TOK= 'hexBinaryExpr';
INTEGER_TOK= 'integerExpr';
 INTERSECTION_TOK='intersection';
ISIN_TOK= 'isIn';
MAP_TOK='map';
 MOD_TOK='mod';
NODECOUNT_TOK='nodeCount';
NODEEQUAL_TOK='nodeEqual';
 NODEMATCH_TOK='nodeMatch';
NOF_TOK='nof';
NORMALIZESPACE_TOK='normalizeSpace' ;
 NORMALIZETOLOWERCASE_TOK='normalizeToLowerCase' ;
NOT_TOK='not';
 ONEANDONLY_TOK='oneAndOnly';
PERMIT_TOK='permit';
RANGEOP_TOK='rangeOp';
 REGEXMATCH_TOK='regexpMatch';
RESOURCE_TOK='resource';
RFC822NAME_TOK= 'rfc822NameExpr';
 RND_TOK='rnd';
SETEQUALS_TOK='setEquals';
SIZE_TOK='size';
 STRING_TOK= 'stringExpr';
SUBJECT_TOK='subject';
SUBSET_TOK='subset';
 TIME_TOK= 'timeExpr';
TRUE_TOK='true';
UNION_TOK='union';
 X500NAME_TOK= 'x500NameExpr';
YEARMONTHDURATION_TOK= 'yearMonthDurationExpr';
 IF_TOK='if';
}

boolExpr
: TRUE_TOK
 | FALSE_TOK
| BOOL_TOK '(' ATTRIBUTE ')'
| '(' ( integerExpr | doubleExpr) ( '==' | '>=' | '>' | '<' | '<=' ) (
integerExpr | doubleExpr) ')'
 ;

integerExpr
: INTEGER_CONSTANT
| INTEGER_TOK '(' stringExpr ')'
// | '(' integerExpr ( '+' | '-' | '*' | '/' ) integerExpr ')'
| (MOD_TOK | ABS_TOK ) '(' integerExpr ')'
 | SIZE_TOK '(' anyBag ')'
| NODECOUNT_TOK '(' stringExpr ')'
 ;

integerBag
: INTEGER_TOK STRING_LIST
| BAG_TOK '(' integerExpr ( ',' integerExpr)+ ')'
 | INTERSECTION_TOK '(' integerBag ',' integerBag ')'
| UNION_TOK '(' integerBag ',' integerBag ')'
 ;

doubleExpr
: DOUBLE_CONSTANT
| DOUBLE_TOK '(' stringExpr ')'
// | '(' doubleExpr ( '+' | '-' | '*' | '/') doubleExpr ')'
| ( MOD_TOK | ABS_TOK | RND_TOK | FLR_TOK ) '(' doubleExpr ')'
 ;

doubleBag
: DOUBLE_TOK STRING_LIST
| BAG_TOK '(' doubleExpr ( ',' doubleExpr)+ ')'
 /*
| INTERSECTION_TOK '(' dayTimeDurationBag ',' dayTimeDurationBag ')'
 | UNION_TOK '(' dayTimeDurationBag ',' dayTimeDurationBag ')'
 */
;
stringExpr
: STRING_CONSTANT
 | ATTRIBUTE
| (NORMALIZESPACE_TOK | NORMALIZETOLOWERCASE_TOK) '(' stringExpr ')'
 | CONCATENATE_TOK '(' stringExpr ',' stringExpr ')'
;

anyBag
: ( doubleBag | integerBag )
;

COMMENT
 : '//' ~('\n'|'\r')* '\r'? '\n' {$channel=HIDDEN;}
| '/*' ( options {greedy=false;} : . )* '*/' {$channel=HIDDEN;}
 ;
WHITESPACE
: ( ' ' | '\t' | '\r' | '\n' )+ {$channel=HIDDEN;}
 | COMMENT
;

fragment ATTRIBUTE
: ( SUBJECT_TOK | RESOURCE_TOK | ACTION_TOK | ENVIRONMENT_TOK) ('.'
IDENTIFIER )+
 ;

fragment IDENTIFIER
: ('a'..'z'|'A'..'Z'|'_') ('a'..'z'|'A'..'Z'|'0'..'9'|'_')*
 ;

fragment STRING_LIST
: '(' STRING_CONSTANT ( ',' STRING_CONSTANT )* ')'
 ;

fragment STRING_CONSTANT
: '"' ( ESC_SEQ | ~('\\'|'"') )* '"'
 ;

fragment INTEGER_CONSTANT
: (DIGIT)+
 ;

fragment DOUBLE_CONSTANT
: INTEGER_CONSTANT? '.' INTEGER_CONSTANT? EXPONENT
// | INTEGER_CONSTANT EXPONENT
;

fragment DIGIT
: '0'..'9'
;
fragment EXPONENT
 : ('e'|'E') ('+'|'-')? ('0'..'9')+
;

fragment ESC_SEQ
: '\\' ('b'|'t'|'n'|'f'|'r'|'\"'|'\''|'\\')
// | UNICODE_ESC
| OCTAL_ESC
 ;

fragment OCTAL_ESC
: '\\' ('0'..'3') ('0'..'7') ('0'..'7')
 | '\\' ('0'..'7') ('0'..'7')
| '\\' ('0'..'7')
 ;
/*
fragment UNICODE_ESC
: '\\' 'u' HEX_DIGIT HEX_DIGIT HEX_DIGIT HEX_DIGIT
 ;
*/
fragment SIGN
: ('+'|'-')
 ;

fragment CHAR
: '\'' ( ESC_SEQ | ~('\''|'\\') ) '\''
 ;

From parrt at cs.usfca.edu  Thu Jun 21 10:25:35 2012
From: parrt at cs.usfca.edu (Terence Parr)
Date: Thu, 21 Jun 2012 10:25:35 -0700
Subject: [antlr-interest] Non-LL(*) conflict distinguishing integer and
	double
In-Reply-To: <CAH2etF6auiVPt579SEBOxiF_yN2CZecAhaAJoDjgTm+rD2FFjQ@mail.gmail.com>
References: <CAH2etF6auiVPt579SEBOxiF_yN2CZecAhaAJoDjgTm+rD2FFjQ@mail.gmail.com>
Message-ID: <1EBB75AC-D015-41D3-96B1-10CD785736EA@cs.usfca.edu>

Have you tried using AW's ambiguity viewer? it shows the ambiguous paths through the syntax diagram.
T
On Jun 21, 2012, at 9:49 AM, Brad Cox wrote:

> Could someone help me find the conflict here? I'm pretty sure its complaining about NNNN vs NNNN.NNNN but danged if I can see it.
> 
> A pruned-down fragment of the real grammar:
> 
> grammar Frag;
> 
> options
> {
> //  backtrack=true;
> //  memoize = true;
>   output=AST;
> }
> tokens
> {
> 	ABS_TOK='abs';
> 	ACTION_TOK='action';
> 	ALLOF_TOK='allOf';
> 	ALLOFALL_TOK='allOfAll';
> 	ALLOFANY_TOK='allOfAny';
> 	ANYOF_TOK='anyOf';
> 	ANYOFALL_TOK='anyOfAll';
> 	ANYOFANY_TOK='anyOfAny' ;
> 	ANYURI_TOK= 'anyUriExpr';
> 	ATLEASTONEMENBEROF_TOK='atLeastOneMemberOf';
> 	BAG_TOK='bag';
> 	BASE64_TOK= 'base64Expr';
> 	BOOL_TOK= 'boolean';
> 	CONCATENATE_TOK='concatenate';
> 	DATE_TOK= 'dateExpr';
> 	DATETIME_TOK= 'dateTimeExpr';
> 	DAYTIMEDURATION_TOK= 'dayTimeDurationExpr';
> 	DECIMAL_TOK='decimal';
> 	DENY_TOK = 'deny';
> 	DEREF_TOK='deref';
> 	DOUBLE_TOK= 'double';
> 	ENVIRONMENT_TOK='environment';
> 	FALSE_TOK='false';
> 	FLR_TOK='flr';
> 	HEXBINARY_TOK= 'hexBinaryExpr';
> 	INTEGER_TOK= 'integerExpr';
> 	INTERSECTION_TOK='intersection';
> 	ISIN_TOK= 'isIn';
> 	MAP_TOK='map';
> 	MOD_TOK='mod';
> 	NODECOUNT_TOK='nodeCount';
> 	NODEEQUAL_TOK='nodeEqual';
> 	NODEMATCH_TOK='nodeMatch';
> 	NOF_TOK='nof';
> 	NORMALIZESPACE_TOK='normalizeSpace' ;
> 	NORMALIZETOLOWERCASE_TOK='normalizeToLowerCase' ;
> 	NOT_TOK='not';
> 	ONEANDONLY_TOK='oneAndOnly';
> 	PERMIT_TOK='permit';
> 	RANGEOP_TOK='rangeOp';
> 	REGEXMATCH_TOK='regexpMatch';
> 	RESOURCE_TOK='resource';
> 	RFC822NAME_TOK= 'rfc822NameExpr';
> 	RND_TOK='rnd';
> 	SETEQUALS_TOK='setEquals';
> 	SIZE_TOK='size';
> 	STRING_TOK= 'stringExpr';
> 	SUBJECT_TOK='subject';
> 	SUBSET_TOK='subset';
> 	TIME_TOK= 'timeExpr';
> 	TRUE_TOK='true';
> 	UNION_TOK='union';
> 	X500NAME_TOK= 'x500NameExpr';
> 	YEARMONTHDURATION_TOK= 'yearMonthDurationExpr';
> 	IF_TOK='if';
> }
> 
> boolExpr
> 	: TRUE_TOK
> 	| FALSE_TOK
> 	| BOOL_TOK '(' ATTRIBUTE ')'
> 	| '(' ( integerExpr | doubleExpr) ( '==' | '>=' | '>' | '<' | '<=' ) ( integerExpr | doubleExpr) ')'
> 	;
> 
> integerExpr
> 	: INTEGER_CONSTANT
> 	| INTEGER_TOK '(' stringExpr ')'
> // 	| '(' integerExpr ( '+' | '-' | '*' | '/' ) integerExpr ')'
> 	| (MOD_TOK | ABS_TOK ) '(' integerExpr ')'
> 	| SIZE_TOK '(' anyBag ')'
> 	| NODECOUNT_TOK '(' stringExpr ')'
> 	;
> 
> integerBag
> 	: INTEGER_TOK STRING_LIST
> 	| BAG_TOK '(' integerExpr ( ',' integerExpr)+ ')'
> 	| INTERSECTION_TOK '(' integerBag ',' integerBag	')'
> 	| UNION_TOK '(' integerBag ',' integerBag	')'
> 	;
> 
> doubleExpr
> 	: DOUBLE_CONSTANT
> 	| DOUBLE_TOK '(' stringExpr ')'
> // 	| '(' doubleExpr ( '+' | '-' | '*' | '/') doubleExpr ')'
> 	| ( MOD_TOK | ABS_TOK | RND_TOK | FLR_TOK ) '(' doubleExpr	')'
> 	;
> 
> doubleBag
> 	: DOUBLE_TOK STRING_LIST
> 	| BAG_TOK '(' doubleExpr ( ',' doubleExpr)+ ')'
> 	/*
> 	| INTERSECTION_TOK '(' dayTimeDurationBag ',' dayTimeDurationBag	')'
> 	| UNION_TOK '(' dayTimeDurationBag ',' dayTimeDurationBag	')'
> 	*/
> 	;
> stringExpr
> 	: STRING_CONSTANT
> 	| ATTRIBUTE
> 	| (NORMALIZESPACE_TOK | NORMALIZETOLOWERCASE_TOK) '(' stringExpr ')'
> 	| CONCATENATE_TOK '(' stringExpr ',' stringExpr ')'
> 	;
> 
> anyBag
> 	: ( doubleBag | integerBag )
> 	;
> 
> COMMENT
> 	: '//' ~('\n'|'\r')* '\r'? '\n' {$channel=HIDDEN;}
> 	| '/*' ( options {greedy=false;} : . )* '*/' {$channel=HIDDEN;}
> 	;
> WHITESPACE
> 	: ( ' ' | '\t' | '\r' 		| '\n' )+ {$channel=HIDDEN;}
> 	| COMMENT
> 	;
> 
> fragment ATTRIBUTE
> 	: ( SUBJECT_TOK	| RESOURCE_TOK | ACTION_TOK | ENVIRONMENT_TOK) ('.' IDENTIFIER )+
> 	;
> 
> fragment IDENTIFIER
> 	: ('a'..'z'|'A'..'Z'|'_') ('a'..'z'|'A'..'Z'|'0'..'9'|'_')*
> 	;
> 
> fragment STRING_LIST
> 	: '(' STRING_CONSTANT ( ',' STRING_CONSTANT )* ')'
> 	;
> 
> fragment STRING_CONSTANT
> 	:	'"' ( ESC_SEQ | ~('\\'|'"') )* '"'
> 	;
> 
> fragment INTEGER_CONSTANT
> 	:	(DIGIT)+
> 	;
> 
> fragment DOUBLE_CONSTANT
> 	:	INTEGER_CONSTANT? '.' INTEGER_CONSTANT? EXPONENT
> //	|	 INTEGER_CONSTANT EXPONENT
> 	;
> 
> fragment DIGIT
> 	: '0'..'9'
> 	;
> fragment EXPONENT
> 	: ('e'|'E') ('+'|'-')? ('0'..'9')+
> 	;
> 
> fragment ESC_SEQ
> 		:	 '\\' ('b'|'t'|'n'|'f'|'r'|'\"'|'\''|'\\')
> //		|	 UNICODE_ESC
> 		|	 OCTAL_ESC
> 		;
> 
> fragment OCTAL_ESC
> 		:	 '\\' ('0'..'3') ('0'..'7') ('0'..'7')
> 		|	 '\\' ('0'..'7') ('0'..'7')
> 		|	 '\\' ('0'..'7')
> 		;
> /*
> fragment UNICODE_ESC
> 		:	 '\\' 'u' HEX_DIGIT HEX_DIGIT HEX_DIGIT HEX_DIGIT
> 		;
> */
> fragment SIGN
> 		:	 ('+'|'-')
> 		;
> 
> fragment CHAR
> 	:	'\'' ( ESC_SEQ | ~('\''|'\\') ) '\''
> 	;
> 


From bradjcox at gmail.com  Thu Jun 21 10:40:28 2012
From: bradjcox at gmail.com (Brad Cox)
Date: Thu, 21 Jun 2012 13:40:28 -0400
Subject: [antlr-interest] Non-LL(*) conflict distinguishing integer and
	double
In-Reply-To: <1EBB75AC-D015-41D3-96B1-10CD785736EA@cs.usfca.edu>
References: <CAH2etF6auiVPt579SEBOxiF_yN2CZecAhaAJoDjgTm+rD2FFjQ@mail.gmail.com>
	<1EBB75AC-D015-41D3-96B1-10CD785736EA@cs.usfca.edu>
Message-ID: <CAH2etF4S2LndUCRngyeqcJ6XU=kivfq7PjqKkjMw8nJ6iaKZGw@mail.gmail.com>

Hi Terrence. Yep, that isolated it to a integer-double conflict. Trying to
isolate it further from there. Next msg solved it so i'm good now.

On Thu, Jun 21, 2012 at 1:25 PM, Terence Parr <parrt at cs.usfca.edu> wrote:

> Have you tried using AW's ambiguity viewer? it shows the ambiguous paths
> through the syntax diagram.
> T
>
>

From woodzltc at gmail.com  Thu Jun 21 18:30:15 2012
From: woodzltc at gmail.com (woodzltc zhou)
Date: Thu, 21 Jun 2012 18:30:15 -0700
Subject: [antlr-interest] newbie's question on writing template rewrite rule
Message-ID: <CALeG9p_+AsGAHCsU9H0cQHbcebXHKuXtfe07hhUqmU+F+naOFg@mail.gmail.com>

Hello all,

I am a newbie to ANTLR, a great tool in my opinion! Here is a question
on how to write template rewrite rule for such kind of rule:

classTopLevelScope
   :   ^(CLASS_TOP_LEVEL_SCOPE classScopeDeclarations*)

I want to insert something fixed between CLASS_TOP_LEVEL_SCOPE and
classScopeDeclarations*, what should I do?

I wrote something as follows:

classTopLevelScope
   :   ^(CLASS_TOP_LEVEL_SCOPE classScopeDeclarations*) ->
embed(arg1={$CLASS_TOP_LEVEL_SCOPE.text},
arg2={$classScopeDeclarations.text})

embed(arg1, arg2) ::= <<
$arg1$
blabla
blabla
$arg2$
>>

It does insert what I want. But it also drop all the stuff at the two
sides. I guess I am wrong with what I gave as arg1 and arg2. Anyone
can give me some suggestions? Thanks a lot!

Best
- Wu

From srinivasan.karthikeyan.pitchai at oracle.com  Thu Jun 21 20:50:21 2012
From: srinivasan.karthikeyan.pitchai at oracle.com (srinivasan karthikeyan pitchai)
Date: Fri, 22 Jun 2012 09:20:21 +0530
Subject: [antlr-interest] newbie's question on writing template rewrite
 rule
In-Reply-To: <CALeG9p_+AsGAHCsU9H0cQHbcebXHKuXtfe07hhUqmU+F+naOFg@mail.gmail.com>
References: <CALeG9p_+AsGAHCsU9H0cQHbcebXHKuXtfe07hhUqmU+F+naOFg@mail.gmail.com>
Message-ID: <4FE3EB7D.6050305@oracle.com>

Hi Wu,
Is CLASS_TOP_LEVEL_SCOPE a virtual token, ie a token that was not part 
of the original source token stream, that you created to create the 
subtree?  If yes, then you have 2 choices, you can either base the 
virtual token on a real token that would have a text or you can give a 
text to the virtual token at  the time of construction.  This would 
ensure that $CLASS_TOP_LEVEL_SCOPE.text has some value that can be 
produced in the output.   Try replacing  $classScopeDeclarations.text  
with $classScopeDeclarations.st provided that you are already have a 
template rewrite rule for classScopeDeclarations rule.

-Vasan

On 6/22/2012 7:00 AM, woodzltc zhou wrote:
> Hello all,
>
> I am a newbie to ANTLR, a great tool in my opinion! Here is a question
> on how to write template rewrite rule for such kind of rule:
>
> classTopLevelScope
>     :   ^(CLASS_TOP_LEVEL_SCOPE classScopeDeclarations*)
>
> I want to insert something fixed between CLASS_TOP_LEVEL_SCOPE and
> classScopeDeclarations*, what should I do?
>
> I wrote something as follows:
>
> classTopLevelScope
>     :   ^(CLASS_TOP_LEVEL_SCOPE classScopeDeclarations*) ->
> embed(arg1={$CLASS_TOP_LEVEL_SCOPE.text},
> arg2={$classScopeDeclarations.text})
>
> embed(arg1, arg2) ::=<<
> $arg1$
> blabla
> blabla
> $arg2$
> It does insert what I want. But it also drop all the stuff at the two
> sides. I guess I am wrong with what I gave as arg1 and arg2. Anyone
> can give me some suggestions? Thanks a lot!
>
> Best
> - Wu
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address

From jimi at temporal-wave.com  Thu Jun 21 21:24:48 2012
From: jimi at temporal-wave.com (Jim Idle)
Date: Fri, 22 Jun 2012 12:24:48 +0800
Subject: [antlr-interest] Antlr3 in Eclipse and Maven?
In-Reply-To: <CAH2etF62eMPF6P9TZkrfyDzcW3igEzR-hPoE2H+RRDKJSyAoRA@mail.gmail.com>
References: <CAH2etF5MhfzMVfxY0+ngtmTfJBKfz0kz4fhetLAb263UEYuvWA@mail.gmail.com>
	<CAP-ipi6DgDMPysv2nS3G4660YKBemyed+cUV8cf6JDjaevd5mQ@mail.gmail.com>
	<CAH2etF4nmYwtR+Qyh2m2NYK+x9o2B5W7YQzFrr9yEhzA7vB2jg@mail.gmail.com>
	<7405abc7ac75ae1bf95d9f77814a97d0@mail.gmail.com>
	<CAH2etF7QUoMjF8rGa=GWOpge_XOqXwhVrHQ1G7_SBp=4rMcC0g@mail.gmail.com>
	<5BA95ECF-8CBB-4608-B8BB-D150CD9F6E88@temporal-wave.com>
	<CAH2etF62eMPF6P9TZkrfyDzcW3igEzR-hPoE2H+RRDKJSyAoRA@mail.gmail.com>
Message-ID: <d0d7d03260d115dbf8e640b20d84e009@mail.gmail.com>

I think you are in the wrong job ? stop being a wanker and work things out
for yourself. How is working out that there is a newer version of something
causing problems for the user. Helping people on here is mostly a rewarding
experience.. then sometimes there are assholes like you.



Jim



*From:* Brad Cox [mailto:bradjcox at gmail.com]
*Sent:* Thursday, June 21, 2012 8:24 PM
*To:* Jim Idle
*Cc:* ANTLR interest
*Subject:* Re: [antlr-interest] Antlr3 in Eclipse and Maven?



On Thu, Jun 21, 2012 at 8:07 AM, Jim Idle <jimi at temporal-wave.com> wrote:

How you know is that you use the Maven browser in eclipse to find the
latest version.



Isn't that expecting a bit much of someone trying to get to hello world?
Why push that on the user? Why not just fix the bloody wiki as I asked?

From woodzltc at gmail.com  Thu Jun 21 22:42:44 2012
From: woodzltc at gmail.com (woodzltc zhou)
Date: Thu, 21 Jun 2012 22:42:44 -0700
Subject: [antlr-interest] newbie's question on writing template rewrite
	rule
In-Reply-To: <4FE3EB7D.6050305@oracle.com>
References: <CALeG9p_+AsGAHCsU9H0cQHbcebXHKuXtfe07hhUqmU+F+naOFg@mail.gmail.com>
	<4FE3EB7D.6050305@oracle.com>
Message-ID: <CALeG9p-0J4yKJ6f5i-qMMJcRiuZ4JZTDusdAb2VZVq-ZGpxyPg@mail.gmail.com>

Thank you, Vasan!

Yes. Your guessing is right. CLASS_TOP_LEVEL_SCOPE is a virtual token.
With your advice, I can make the first problem right.

But I am still have problem with the second one. I don't have any
template rewrite rule for classScopeDeclarations, so do I have any
other options to make the it right? I only want to insert something
just after the class header definition. What I want to achieve right
now is to change:

public class HelloWorld {

  static int x = 1;

  public static void main(String args[]){

    System.out.println("Hello,world!" + y);

  }

}

to something like this:

public class HelloWorld {

  private class Verticle extends java.lang.Object {
        public Verticle nextV;
        public Verticle permV;
  }
  static int x = 1;

  public static void main(String args[]){

    System.out.println("Hello,world!" + y);

  }

}

I tried to add new template rewrite rule for classScopeDeclarations, as follows:

classScopeDeclarations
    :   ^(CLASS_INSTANCE_INITIALIZER block) ->
classScopeDeclarations(arg={$text})
    |   ^(CLASS_STATIC_INITIALIZER block) -> classScopeDeclarations(arg={$text})
    |   ^(FUNCTION_METHOD_DECL modifierList genericTypeParameterList?
type IDENT formalParameterList arrayDeclaratorList? throwsClause?
block?) -> classScopeDeclarations(arg={$text})
    |   ^(VOID_METHOD_DECL modifierList genericTypeParameterList?
IDENT formalParameterList throwsClause? block?) ->
classScopeDeclarations(arg={$text})
    |   ^(VAR_DECLARATION modifierList type variableDeclaratorList) ->
classScopeDeclarations(arg={$text})
    |   ^(CONSTRUCTOR_DECL modifierList genericTypeParameterList?
formalParameterList throwsClause? block) ->
classScopeDeclarations(arg={$text})
    |   typeDeclaration -> classScopeDeclarations(arg={$typeDeclaration.st})

typeDeclaration(arg={$text}) ::= <<
$arg$
>>

It still does not work right. The source after the modification is:

public class HelloWorld {

  private class Verticle extends java.lang.Object {
        public Verticle nextV;
        public Verticle permV;
  }

  public static void main(String args[]){

    System.out.println("Hello,world!" + y);

  }

}

Somehow, the variable definition "  static int x = 1;" is droped.

Can you point me what is wrong in this case? I am using the grammers
at http://www.antlr.org/grammar/1207932239307/Java1_5Grammars.

Thanks a lot!

Best,
- Wu


On Thu, Jun 21, 2012 at 8:50 PM, srinivasan karthikeyan pitchai
<srinivasan.karthikeyan.pitchai at oracle.com> wrote:
> Hi Wu,
> Is CLASS_TOP_LEVEL_SCOPE a virtual token, ie a token that was not part
> of the original source token stream, that you created to create the
> subtree? ?If yes, then you have 2 choices, you can either base the
> virtual token on a real token that would have a text or you can give a
> text to the virtual token at ?the time of construction. ?This would
> ensure that $CLASS_TOP_LEVEL_SCOPE.text has some value that can be
> produced in the output. ? Try replacing ?$classScopeDeclarations.text
> with $classScopeDeclarations.st provided that you are already have a
> template rewrite rule for classScopeDeclarations rule.
>
> -Vasan
>
> On 6/22/2012 7:00 AM, woodzltc zhou wrote:
>> Hello all,
>>
>> I am a newbie to ANTLR, a great tool in my opinion! Here is a question
>> on how to write template rewrite rule for such kind of rule:
>>
>> classTopLevelScope
>> ? ? : ? ^(CLASS_TOP_LEVEL_SCOPE classScopeDeclarations*)
>>
>> I want to insert something fixed between CLASS_TOP_LEVEL_SCOPE and
>> classScopeDeclarations*, what should I do?
>>
>> I wrote something as follows:
>>
>> classTopLevelScope
>> ? ? : ? ^(CLASS_TOP_LEVEL_SCOPE classScopeDeclarations*) ->
>> embed(arg1={$CLASS_TOP_LEVEL_SCOPE.text},
>> arg2={$classScopeDeclarations.text})
>>
>> embed(arg1, arg2) ::=<<
>> $arg1$
>> blabla
>> blabla
>> $arg2$
>> It does insert what I want. But it also drop all the stuff at the two
>> sides. I guess I am wrong with what I gave as arg1 and arg2. Anyone
>> can give me some suggestions? Thanks a lot!
>>
>> Best
>> - Wu
>>
>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address

From bradjcox at gmail.com  Fri Jun 22 03:03:23 2012
From: bradjcox at gmail.com (Brad Cox)
Date: Fri, 22 Jun 2012 06:03:23 -0400
Subject: [antlr-interest] Antlr3 in Eclipse and Maven?
In-Reply-To: <d0d7d03260d115dbf8e640b20d84e009@mail.gmail.com>
References: <CAH2etF5MhfzMVfxY0+ngtmTfJBKfz0kz4fhetLAb263UEYuvWA@mail.gmail.com>
	<CAP-ipi6DgDMPysv2nS3G4660YKBemyed+cUV8cf6JDjaevd5mQ@mail.gmail.com>
	<CAH2etF4nmYwtR+Qyh2m2NYK+x9o2B5W7YQzFrr9yEhzA7vB2jg@mail.gmail.com>
	<7405abc7ac75ae1bf95d9f77814a97d0@mail.gmail.com>
	<CAH2etF7QUoMjF8rGa=GWOpge_XOqXwhVrHQ1G7_SBp=4rMcC0g@mail.gmail.com>
	<5BA95ECF-8CBB-4608-B8BB-D150CD9F6E88@temporal-wave.com>
	<CAH2etF62eMPF6P9TZkrfyDzcW3igEzR-hPoE2H+RRDKJSyAoRA@mail.gmail.com>
	<d0d7d03260d115dbf8e640b20d84e009@mail.gmail.com>
Message-ID: <CAH2etF7oiTBjgF-YQeTR951bG00ePnnYo96VLULBb5BGsDALtw@mail.gmail.com>

Terrence, FYI. Please consider word with your minions about what supporting
new users means.

On Fri, Jun 22, 2012 at 12:24 AM, Jim Idle <jimi at temporal-wave.com> wrote:

> I think you are in the wrong job ? stop being a wanker and work things out
> for yourself. How is working out that there is a newer version of something
> causing problems for the user. Helping people on here is mostly a rewarding
> experience.. then sometimes there are assholes like you.
>
>
>
> Jim
>
>
>
> *From:* Brad Cox [mailto:bradjcox at gmail.com]
> *Sent:* Thursday, June 21, 2012 8:24 PM
> *To:* Jim Idle
> *Cc:* ANTLR interest
> *Subject:* Re: [antlr-interest] Antlr3 in Eclipse and Maven?
>
>
>
> On Thu, Jun 21, 2012 at 8:07 AM, Jim Idle <jimi at temporal-wave.com> wrote:
>
> How you know is that you use the Maven browser in eclipse to find the
> latest version.
>
>
>
> Isn't that expecting a bit much of someone trying to get to hello world?
> Why push that on the user? Why not just fix the bloody wiki as I asked?
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>



-- 
Cell: 703-594-1883
Blog: http://bradjcox.blogspot.com
Web: http://virtualschool.edu
Manassas VA 20111

From jimi at temporal-wave.com  Fri Jun 22 04:00:55 2012
From: jimi at temporal-wave.com (Jim Idle)
Date: Fri, 22 Jun 2012 19:00:55 +0800
Subject: [antlr-interest] Antlr3 in Eclipse and Maven?
In-Reply-To: <CAH2etF7oiTBjgF-YQeTR951bG00ePnnYo96VLULBb5BGsDALtw@mail.gmail.com>
References: <CAH2etF5MhfzMVfxY0+ngtmTfJBKfz0kz4fhetLAb263UEYuvWA@mail.gmail.com>
	<CAP-ipi6DgDMPysv2nS3G4660YKBemyed+cUV8cf6JDjaevd5mQ@mail.gmail.com>
	<CAH2etF4nmYwtR+Qyh2m2NYK+x9o2B5W7YQzFrr9yEhzA7vB2jg@mail.gmail.com>
	<7405abc7ac75ae1bf95d9f77814a97d0@mail.gmail.com>
	<CAH2etF7QUoMjF8rGa=GWOpge_XOqXwhVrHQ1G7_SBp=4rMcC0g@mail.gmail.com>
	<5BA95ECF-8CBB-4608-B8BB-D150CD9F6E88@temporal-wave.com>
	<CAH2etF62eMPF6P9TZkrfyDzcW3igEzR-hPoE2H+RRDKJSyAoRA@mail.gmail.com>
	<d0d7d03260d115dbf8e640b20d84e009@mail.gmail.com>
	<CAH2etF7oiTBjgF-YQeTR951bG00ePnnYo96VLULBb5BGsDALtw@mail.gmail.com>
Message-ID: <61BE4A3C-097D-4E5F-A067-836B5519B4AC@temporal-wave.com>

In however many years it is that I have been a minion of Ter I think I have become annoyed with only 3 people. One was a misunderstanding easily cleared up, one was mentally unstable, and one is not worth polluting the ANTLR mailing list with unless it is a little entertainment for ANTLR users who otherwise have quite serious jobs. 

Writing good parsers is not a trivial task. It is not surprising that you need a little help and generally you will get it. But could I please request that you re-read your own posts and try to be the person reading them and not sending them. Trivially saying things like "this is too unstable" but then still asking for help anyway is not your best  strategy. 

So let me be somewhat magnanimous here and tell you that I do realize the docs are a little out of date and I will update them this weekend all being well. 

Additionally, there has been some nice work done on Eclipse integration but like all of us, the authors have day jobs and cannot always keep pace. Contributors need a little respect (not too much) and patience to keep going, not spite. 

So, please record what you did to fix your lexer issue so that others may benefit. 

Jim

On Jun 22, 2012, at 6:03 PM, Brad Cox <bradjcox at gmail.com> wrote:

> Terrence, FYI. Please consider word with your minions about what supporting
> new users means.
> 
> On Fri, Jun 22, 2012 at 12:24 AM, Jim Idle <jimi at temporal-wave.com> wrote:
> 
>> I think you are in the wrong job ? stop being a wanker and work things out
>> for yourself. How is working out that there is a newer version of something
>> causing problems for the user. Helping people on here is mostly a rewarding
>> experience.. then sometimes there are assholes like you.
>> 
>> 
>> 
>> Jim
>> 
>> 
>> 
>> *From:* Brad Cox [mailto:bradjcox at gmail.com]
>> *Sent:* Thursday, June 21, 2012 8:24 PM
>> *To:* Jim Idle
>> *Cc:* ANTLR interest
>> *Subject:* Re: [antlr-interest] Antlr3 in Eclipse and Maven?
>> 
>> 
>> 
>> On Thu, Jun 21, 2012 at 8:07 AM, Jim Idle <jimi at temporal-wave.com> wrote:
>> 
>> How you know is that you use the Maven browser in eclipse to find the
>> latest version.
>> 
>> 
>> 
>> Isn't that expecting a bit much of someone trying to get to hello world?
>> Why push that on the user? Why not just fix the bloody wiki as I asked?
>> 
>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>> Unsubscribe:
>> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>> 
> 
> 
> 
> -- 
> Cell: 703-594-1883
> Blog: http://bradjcox.blogspot.com
> Web: http://virtualschool.edu
> Manassas VA 20111
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address

From achaphiv at gmail.com  Sat Jun 23 15:07:36 2012
From: achaphiv at gmail.com (Alex Chaphiv)
Date: Sat, 23 Jun 2012 18:07:36 -0400
Subject: [antlr-interest] Is this the best way to have an ordered series of
 optional tokens with a minimum size?
Message-ID: <CADMraz1Qwv2k3Qfk7EyfxOuVcpTbUf+nMAXbNP37L3tY_-h-wA@mail.gmail.com>

Hi,

I have a working solution, but I'm wondering if I can represent the
following in a smaller grammar.

I have a series of ISO 3166 country codes that must come in order:
Here's the defined tokens:

ABW:'ABW'; AFG:'AFG'; AGO:'AGO'; AIA:'AIA'; ALA:'ALA'; ALB:'ALB';
AND:'AND'; ANT:'ANT'; ARE:'ARE'; ARG:'ARG'; ARM:'ARM'; ASM:'ASM'; ATA:'ATA';
ATF:'ATF'; ATG:'ATG'; AUS:'AUS'; AUT:'AUT'; AZE:'AZE'; BDI:'BDI'; BEL:'BEL';
BEN:'BEN'; BFA:'BFA'; BGD:'BGD'; BGR:'BGR'; BHR:'BHR'; BHS:'BHS'; BIH:'BIH';
(over 200 of these)


So now I want them to come in order and there can at most one of each
option:

          countriesInOrder:

    ABW? AFG? AGO? AIA? ALA? ALB? AND? ANT? ARE? ARG? ARM? ASM? ATA? ATF?
ATG?
    AUS? AUT? AZE? BDI? BEL? BEN? BFA? BGD? BGR? BHR? BHS? BIH? BLM? BLR?
BLZ?
    BMU? BOL? BRA? BRB? BRN? BTN? BVT? BWA? CAF? CAN? CCK? CHE? CHL? CHN?
CIV?
    (and so on)

This is fine, but I now at least 2 countries must appear, so I use the
following:

atLeast2CountriesInOrder:
    (country country) => countriesInOrder
    | INVALID_UNKNOWN_TOKEN // this part seems especially wrong to me

country:

ABW|AFG|AGO|AIA|ALA|ALB|AND|ANT|ARE|ARG|ARM|ASM|ATA|ATF|ATG|AUS|AUT|AZE|BDI

 |BEL|BEN|BFA|BGD|BGR|BHR|BHS|BIH|BLM|BLR|BLZ|BMU|BOL|BRA|BRB|BRN|BTN|BVT|BWA

 |CAF|CAN|CCK|CHE|CHL|CHN|CIV|CMR|COD|COG|COK|COL|COM|CPV|CRI|CUB|CXR|CYM|CYP
   (and so on)

// defined way at bottom after all other tokens and should never occur
INVALID_UNKNOWN_TOKEN: ('A'..'Z')+;

Now I have to do this 5+ more times for similar lists of tokens.  It seems
like an awful lot of duplication and I'm concerned about the use of
INVALID_UNKNOWN_TOKEN.

So it there a better way?

From a.moderacja at gmail.com  Sun Jun 24 03:21:58 2012
From: a.moderacja at gmail.com (Borneq)
Date: Sun, 24 Jun 2012 12:21:58 +0200
Subject: [antlr-interest] Problem with C target
Message-ID: <CANyn1kG0Tk3JTYOM+F_y7sBG9=SZ4e1oe8WKv=M2M98xQo+WMw@mail.gmail.com>

I try compile example simplecTreeParser with C target and runtime.
First, I create code-blocks project, but is error:
C:\projnie\Antlr\C\antlr\include\antlr3defs.h|132|error: expected '=',
',', ';', 'asm' or '__attribute__' before 'ANTLR3_BOOLEAN'|
Second, I try Visual Studio Express. I open C.sln This compiler uses
XML files from C\vsrulefiles. Error is at file
antlr3treeparser.targets.
How can compile C sample? What means files in foler vsrulefiles?

From a.moderacja at gmail.com  Sun Jun 24 06:55:28 2012
From: a.moderacja at gmail.com (Borneq)
Date: Sun, 24 Jun 2012 15:55:28 +0200
Subject: [antlr-interest] Problem with C target
In-Reply-To: <CANyn1kG0Tk3JTYOM+F_y7sBG9=SZ4e1oe8WKv=M2M98xQo+WMw@mail.gmail.com>
References: <CANyn1kG0Tk3JTYOM+F_y7sBG9=SZ4e1oe8WKv=M2M98xQo+WMw@mail.gmail.com>
Message-ID: <CANyn1kHn0VUt4+ZHbjQt-EHciRTW_HiqPpAHodCoU1ktRciCrA@mail.gmail.com>

2012/6/24 Borneq <a.moderacja at gmail.com>:
> Second, I try Visual Studio Express. I open C.sln This compiler uses
> XML files from C\vsrulefiles. Error is at file
> antlr3treeparser.targets.

I make new project on Visual Studio Express, project has been compiled
but application is not properly initialized

From martin.potthast at uni-weimar.de  Sun Jun 24 07:16:34 2012
From: martin.potthast at uni-weimar.de (Martin Potthast)
Date: Sun, 24 Jun 2012 16:16:34 +0200
Subject: [antlr-interest] Tree grammar generated for the C runtime reports a
 syntax error where Java doesn't
Message-ID: <CAGEtS-AfjpVDuFSOnz563P8c5=FMS3BK-sguNvqguTKXD5GHtg@mail.gmail.com>

Dear everyone,

I am currently developing a simple grammar for a regex-like language
that involves a tree grammar. When I debug the tree grammar in Java
using ANTLRworks it seems to work fine. However, once I generate C
code, some inputs would fail reporting the syntax error:
    -unknown source-(0)  : error 1 : Unexpected node, at offset 0,
near DOWN : syntax error...

This might hint at a bug in the C runtime, though I'm not entirely
sure about that. Anyway, since I'm at my wits end about this, I was
wondering whether one of you can help me.

Attached you will find the grammars, their generated C code, and a
text rig. I am using the latest stable release ANTLRworks 1.4.3 and
the latest C runtime libantlr3c-3.4.tar.gz, compiled with the 64 bit
flag.

Clues:
- The offending input is as simple as "[a]" (excluding the quotes).
- The input "[?]" works, the only difference being that the question
mark is a single node in the tree grammar whereas other possibilities
may have an arbitrary number of sub-trees, as indicated by the
wildcards.
- The grammar distinguishes between bracketed expressions that involve
a whitespace and those that don't. Again, the input "[a b]" fails in
C, but not in Java.

I'd be very happy if anyone would help me.

Martin


PS: On a minor note, when regenerating the C code from the grammars
you will notice that RegexWord.c won't compile because one function
contains a line referring to a variable "stream_" that should be
"stream_unit2" in my case. This is a known bug, and after changing the
variable name as indicated, the generated code compiles.


-- 
Martin Potthast
Bauhaus-Universit?t Weimar
www.webis.de? ---? www.netspeak.org
-------------- next part --------------
A non-text attachment was scrubbed...
Name: grammar.zip
Type: application/zip
Size: 55082 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20120624/c9474b61/attachment.zip 

From dean.sheehan at me.com  Sun Jun 24 10:55:58 2012
From: dean.sheehan at me.com (Dean Sheehan)
Date: Sun, 24 Jun 2012 18:55:58 +0100
Subject: [antlr-interest] Question on embedding other languages (grammars)
Message-ID: <8DFC87E7-D234-4C44-AD95-DC3CA9EA04EE@me.com>

Hi ANTLR Interest,

I was wondering how I would go about embedding one language within another.

For example, if I have a grammar developed for language X but I want to be able to embed segments of another language that I do not want to be parsed or processed by ANTLR at this stage, basically just receive a string of unprocessed text for passing off to something else to look at, how might I go about that?

Consider the classic case of wanting to embedded some SQL in a piece of Javav code (just an example). I have the grammar for Java and all of the parsing and processing behind that but I also have a SQL interpreter. I want to be able to write something like:

void foo ( ) {
	int a = 5;
	sql {
		insert into table x ...
	} sql
}

The 'sql {' and '} sql' start and end tokens would be part of the 'extended' Java grammar but the stuff between is just text that I want to extract to pass off to a SQL interpreter.

Obviously I could do simple things like define a grammar than has 'sql {' STRING '} sql' but that wouldn't account for the STRING having newlines, white space etc.

Thanks for any pointers.

cheers,
- Dean



From jimi at temporal-wave.com  Sun Jun 24 21:00:00 2012
From: jimi at temporal-wave.com (Jim Idle)
Date: Mon, 25 Jun 2012 12:00:00 +0800
Subject: [antlr-interest] Tree grammar generated for the C runtime
 reports a syntax error where Java doesn't
In-Reply-To: <CAGEtS-AfjpVDuFSOnz563P8c5=FMS3BK-sguNvqguTKXD5GHtg@mail.gmail.com>
References: <CAGEtS-AfjpVDuFSOnz563P8c5=FMS3BK-sguNvqguTKXD5GHtg@mail.gmail.com>
Message-ID: <9d597c872eaec8d1b2a6feffb67c9301@mail.gmail.com>

This means that your tree grammar does not reflect the tree that you are
building in some way. The only differences in behavior I have seen in this
kind of thing is the known bug you mention and that sometimes because of the
lack of exceptions, there needs to be an extra top level rule to make sure
that errors that occur at the top node in the tree are reported (this can
also apply to some parser grammars). Also, I think that the treatment of
wildcards in the C runtime is no longer quite the same as in the Java
version.

In such cases as this, I use the debugger and just follow the C code. It
would seem that as your input causes the error to be thrown very early in
the tree walk that this should be easy to track down. But before doing that,
I would produce the .dot file for a failing tree and then use graphviz to
compare it to the tree produced by Java to make sure that they are the same.
See many past emails for instructions on doing this (antlr.markmail.org)

Jim

-----Original Message-----
From: antlr-interest-bounces at antlr.org
[mailto:antlr-interest-bounces at antlr.org] On Behalf Of Martin Potthast
Sent: Sunday, June 24, 2012 10:17 PM
To: antlr-interest at antlr.org
Subject: [antlr-interest] Tree grammar generated for the C runtime reports a
syntax error where Java doesn't

Dear everyone,

I am currently developing a simple grammar for a regex-like language that
involves a tree grammar. When I debug the tree grammar in Java using
ANTLRworks it seems to work fine. However, once I generate C code, some
inputs would fail reporting the syntax error:
    -unknown source-(0)  : error 1 : Unexpected node, at offset 0, near DOWN
: syntax error...

This might hint at a bug in the C runtime, though I'm not entirely sure
about that. Anyway, since I'm at my wits end about this, I was wondering
whether one of you can help me.

Attached you will find the grammars, their generated C code, and a text rig.
I am using the latest stable release ANTLRworks 1.4.3 and the latest C
runtime libantlr3c-3.4.tar.gz, compiled with the 64 bit flag.

Clues:
- The offending input is as simple as "[a]" (excluding the quotes).
- The input "[?]" works, the only difference being that the question mark is
a single node in the tree grammar whereas other possibilities may have an
arbitrary number of sub-trees, as indicated by the wildcards.
- The grammar distinguishes between bracketed expressions that involve a
whitespace and those that don't. Again, the input "[a b]" fails in C, but
not in Java.

I'd be very happy if anyone would help me.

Martin


PS: On a minor note, when regenerating the C code from the grammars you will
notice that RegexWord.c won't compile because one function contains a line
referring to a variable "stream_" that should be "stream_unit2" in my case.
This is a known bug, and after changing the variable name as indicated, the
generated code compiles.


--
Martin Potthast
Bauhaus-Universit?t Weimar
www.webis.de  ---  www.netspeak.org

From jimi at temporal-wave.com  Sun Jun 24 21:00:44 2012
From: jimi at temporal-wave.com (Jim Idle)
Date: Mon, 25 Jun 2012 12:00:44 +0800
Subject: [antlr-interest] Question on embedding other languages
	(grammars)
In-Reply-To: <8DFC87E7-D234-4C44-AD95-DC3CA9EA04EE@me.com>
References: <8DFC87E7-D234-4C44-AD95-DC3CA9EA04EE@me.com>
Message-ID: <92c3ae4a127f2e63eefc0d2fcecd463c@mail.gmail.com>

Look up "Island grammars" and follow the example in the downloadable
examples. That should get you going.

Jim

-----Original Message-----
From: antlr-interest-bounces at antlr.org
[mailto:antlr-interest-bounces at antlr.org] On Behalf Of Dean Sheehan
Sent: Monday, June 25, 2012 1:56 AM
To: antlr-interest at antlr.org
Subject: [antlr-interest] Question on embedding other languages (grammars)

Hi ANTLR Interest,

I was wondering how I would go about embedding one language within
another.

For example, if I have a grammar developed for language X but I want to be
able to embed segments of another language that I do not want to be parsed
or processed by ANTLR at this stage, basically just receive a string of
unprocessed text for passing off to something else to look at, how might I
go about that?

Consider the classic case of wanting to embedded some SQL in a piece of
Javav code (just an example). I have the grammar for Java and all of the
parsing and processing behind that but I also have a SQL interpreter. I
want to be able to write something like:

void foo ( ) {
	int a = 5;
	sql {
		insert into table x ...
	} sql
}

The 'sql {' and '} sql' start and end tokens would be part of the
'extended' Java grammar but the stuff between is just text that I want to
extract to pass off to a SQL interpreter.

Obviously I could do simple things like define a grammar than has 'sql {'
STRING '} sql' but that wouldn't account for the STRING having newlines,
white space etc.

Thanks for any pointers.

cheers,
- Dean



List: http://www.antlr.org/mailman/listinfo/antlr-interest
Unsubscribe:
http://www.antlr.org/mailman/options/antlr-interest/your-email-address

From Mark.Gressett at sas.com  Mon Jun 25 08:57:21 2012
From: Mark.Gressett at sas.com (Mark Gressett)
Date: Mon, 25 Jun 2012 15:57:21 +0000
Subject: [antlr-interest] Template rewrite of assignment to List set
	function call
Message-ID: <AAE27BAA90501B448B07E07DB873EB6E07E81F84@MERCMBX18D.na.SAS.com>

Hi all,

Using ANTLR V3.1, I'm trying to rewrite something like
x = y = z = a+1;
to
x.put(y.put(z.put(a+1)));

My grammar recognizes assignment right at the top of the expression rules
assignment_expression
      :     logical_or_expression (OP_EQ logical_or_expression)*
      ;

Much further down, I recognize array dereference
id_expression
      :     ID
      |     ID LBRACKET additive_expression RBRACKET
      ;

I'm trying to get by with simple template rewrite, leaving the base grammar unchanged. Any ideas about how to proceed?

Am I going to have to construct an AST and walk it to achieve this rewrite?

Thanks,
Mark

From Mark.Gressett at sas.com  Mon Jun 25 09:17:56 2012
From: Mark.Gressett at sas.com (Mark Gressett)
Date: Mon, 25 Jun 2012 16:17:56 +0000
Subject: [antlr-interest] Template rewrite of assignment to List set
 function call
Message-ID: <AAE27BAA90501B448B07E07DB873EB6E07E81F99@MERCMBX18D.na.SAS.com>

Sorry, left out the hard part.

I'm trying to rewrite *array element* assignment to list syntax.

So the example should read something like
x[1] = y[2] = z = a+1
translates to
x.put(1, y.put(2, z=a+1))

Getting the array element reference back up the tree is what is (mainly) thwarting me.


From researcher0x00 at gmail.com  Tue Jun 26 07:57:31 2012
From: researcher0x00 at gmail.com (Eric)
Date: Tue, 26 Jun 2012 10:57:31 -0400
Subject: [antlr-interest] Is www.antlr.org down?
Message-ID: <CAN45N12JbkWK6nS9b5WL=5pLYqiORMeEGvHiQP5X3eXK5=9rpA@mail.gmail.com>

Hi all,

I am unable to reach www.antlr.org and was wondering if others have the
same problem.

Remember that Ter pays for site out of his pocket and takes his personal
time to maintain it.
As such I just want to reiterate my appreciation for what Ter does for us
and the effort he puts in for the site.

Thanks, Eric

From parrt at cs.usfca.edu  Tue Jun 26 09:16:11 2012
From: parrt at cs.usfca.edu (Terence Parr)
Date: Tue, 26 Jun 2012 09:16:11 -0700
Subject: [antlr-interest] Is www.antlr.org down?
In-Reply-To: <CAN45N12JbkWK6nS9b5WL=5pLYqiORMeEGvHiQP5X3eXK5=9rpA@mail.gmail.com>
References: <CAN45N12JbkWK6nS9b5WL=5pLYqiORMeEGvHiQP5X3eXK5=9rpA@mail.gmail.com>
Message-ID: <68E9B107-7545-4EC2-9D54-55140EA65F9F@cs.usfca.edu>

hi. sorry. tomcat/confluence wiki combo likes to get wedged every few weeks. even after killing jira. oh well.  back up.
Ter
On Jun 26, 2012, at 7:57 AM, Eric wrote:

> Hi all,
> 
> I am unable to reach www.antlr.org and was wondering if others have the
> same problem.
> 
> Remember that Ter pays for site out of his pocket and takes his personal
> time to maintain it.
> As such I just want to reiterate my appreciation for what Ter does for us
> and the effort he puts in for the site.
> 
> Thanks, Eric
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address


From atalay at udel.edu  Tue Jun 26 09:26:54 2012
From: atalay at udel.edu (Murat Atalay)
Date: Tue, 26 Jun 2012 09:26:54 -0700
Subject: [antlr-interest] Antlr Parser
In-Reply-To: <CAFBENeHVi6nK7GCEOseZm09ruR605U-=ndO88YAMvWJ+ds5V4A@mail.gmail.com>
References: <CAFBENeHVi6nK7GCEOseZm09ruR605U-=ndO88YAMvWJ+ds5V4A@mail.gmail.com>
Message-ID: <CAFBENeHd+A3JuOMUCVg68zN5DY-ZmVF4tXdDy1BDMGd1EUZ6qQ@mail.gmail.com>

Hello,

I am currently working on a project requires parsing a structure as such;

Group x
     {
          var1 = "abc"
          Group y
               {
                     var2 = "def"
               }
     }

I want it to print out a structure for CPP language using the tree walkers.
But also I would like it to allocate memory for the groups and the
variables and give me an header node that I can access everything from it,
when walker is done. Such as;

struct Group{
   string var1;
   Group* pchild;
}          //looking for the header node for such list.

I have already written a parser and tree grammar for it. I've been using
Visual Studio but I had some problems putting C code inside my tree
grammar. Now i'm using Eclipse to do it and my parser and tree grammar
works fine. But I still need to put them in a big list.

I was wondering what would you suggest me. At the end I will need CPP code
that I can compile or put in to my project.

Please find my .g files in attach. Please note that, it's outputting JAVA
code since I am using Eclipse at the moment. I would like it to be work on
Visual Studio.

Thank you for your time.
Murat Atalay
-------------- next part --------------
A non-text attachment was scrubbed...
Name: APAWalker.g
Type: application/octet-stream
Size: 607 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20120626/ad36cd9f/attachment.obj 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: APA.g
Type: application/octet-stream
Size: 2057 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20120626/ad36cd9f/attachment-0001.obj 

From ivan.bludov at gmail.com  Tue Jun 26 09:33:58 2012
From: ivan.bludov at gmail.com (Ivan Bludov)
Date: Tue, 26 Jun 2012 20:33:58 +0400
Subject: [antlr-interest] Rewrite issue
Message-ID: <CAJN5NKAF6MRiXLPcTrenW8OOoisNPx_wuUgFOPvHBW9XZ7NObQ@mail.gmail.com>

Hi, Guys
I'm playing with rewrite feature of ANTLR. So I have a real SQL
grammar and I'm trying to do something like that.

-------------------------------------------------------------
1)
non_join_query_expression
	options {k=1;}
	:	(	(non_join_query_term -> non_join_query_term)
		|	(
		 	joined_table  ( op = UNION | EXCEPT ) ( ALL | DISTINCT )? (
corresponding_spec  )? query_term  ->
		 	joined_table  $op DISTINCT CORRESPONDING  query_term
			)
		)
		(
			( op = UNION | EXCEPT ) ( ALL | DISTINCT )? ( corresponding_spec
)? query_term ->
			$non_join_query_expression $op DISTINCT CORRESPONDING  query_term
		)*
	;

As an example I try force to set DISTINCT and CORRESPONDING  specs in
all cases even they were not noticed.
I have to different behaviors:
a) it's easy to insert CORRESPONDING even it was noticed in a query.
b) But rewriting fails if DISTINCT was not specified ( ALL or nothing
was specified).

Exception in thread "main"
org.antlr.runtime.tree.RewriteEmptyStreamException: token DISTINCT
	at org.antlr.runtime.tree.RewriteRuleElementStream._next(RewriteRuleElementStream.java:157)
	at org.antlr.runtime.tree.RewriteRuleTokenStream.nextNode(RewriteRuleTokenStream.java:58)
	at sql.parser.Sql_parser_Sql_query.non_join_query_expression(Sql_parser_Sql_query.java:17466)
	at sql.parser.Sql_parser_Sql_query.query_expression_body(Sql_parser_Sql_query.java:16400)
	at sql.parser.Sql_parser_Sql_query.query_expression(Sql_parser_Sql_query.java:15266)
	at sql.parser.Sql_parser.query_expression(Sql_parser.java:1468)
	at sql.parser.Sql_query_debuger.main(Sql_query_debuger.java:23)

Tell me please how should I force to set DISTINCT spec.

---------------------------------------------------------
2) I use following code to debug

	public static void main(String[] args) throws Exception {

		System.out.println("begin");
		InputStream stream = new FileInputStream(new
File("SQL_samples/test5")); // defaults to ISO-1
		ANTLRInputStream inputStream = new ANTLRInputStream(stream);
		Sql_lexer lexer = new Sql_lexer(inputStream);
		
//		CommonTokenStream tokenStream = new CommonTokenStream(lexer);
		TokenRewriteStream tokenStream = new TokenRewriteStream(lexer);

		
		Sql_parser parser = new Sql_parser(tokenStream);
		System.out.println("query_expression");
		Sql_parser_Sql_query.query_expression_return result =
parser.query_expression();

		System.out.println("parsed");
		
		
		
		// pull out the tree and cast it
		Tree t = (Tree)result.getTree();
		System.out.println(t.toStringTree()); // print out the tree
		
		System.out.println("tree");
		
		System.out.println(tokenStream.toString()); // print out the tree
		
		System.out.println("rewited");
		
		System.out.println("exit");
		System.exit(0);
	}


I copy this code from some example. But there is something wrong :
		System.out.println(t.toStringTree());
prints rewrited query and
                 System.out.println(tokenStream.toString());
prints input query.

But I consider that it should be vice versa. Could you comment it?

---------------------------------------------------------
3) Could you please say how can I rewrite query to get the folowing:

			( op = UNION | EXCEPT ) ( ALL | DISTINCT )? ( corresponding_spec
)? query_term ->
			$non_join_query_expression $op DISTINCT CORRESPONDING
"blah-blah-blah" query_term // blah-blah-blah

?


____________
Best regards
Ivan

From famalamine at gmail.com  Tue Jun 26 11:46:49 2012
From: famalamine at gmail.com (Fama Diagne)
Date: Tue, 26 Jun 2012 14:46:49 -0400
Subject: [antlr-interest] ASTFrame for ANTLR3
Message-ID: <CAJJqpZRqi4OBJHu394Yo7FYg3yX10KkwPV4M1JWKmjYDVkHBSA@mail.gmail.com>

Hi All,

I'm working  with ANTLR v3 and i want to know if there is an equivalent of
ASTFrame in this version. I want to display a tree parser but the solution
i found only works with the version 2.

Thanks for your help!

From fridi70 at gmx.de  Tue Jun 26 14:22:15 2012
From: fridi70 at gmx.de (fridi)
Date: Tue, 26 Jun 2012 23:22:15 +0200
Subject: [antlr-interest] Grammar problem with ~
Message-ID: <4FEA2807.80603@gmx.de>

Hi all,

I have a grammar that I have to extend in order to meet changes in the 
files we have to parse.
There is a code (which can be an int or a letter followed by int ) that 
is followed by a description.

i.e.

     3007508   This is the description of the code
     3024400   A/B bla bla bla & bla
     A1234       This is another description
     B4711        asdf ghjz-kk with Test w/o

I am interested in the code only and I tried something like

in parser
(
     INT REST
)+

in lexer

REST
   :
   ~('\n' | '\r')
   ;

which works  for some instances with the code as int, but not for a code 
that starts with a letter because my rule for REST now consumes other 
tokens.
I have used the "all except NL" approach for some other comments to read 
until NL, but there was always a constant string at the beginning of the 
line so that the rule didn't consume any other part of my text. I think 
that REST is to common and it might kill my other rules.

Is there any other way to parse the descriptions?

Any help is very appreciated,

   fridi



From sajnamismail at gmail.com  Tue Jun 26 23:53:06 2012
From: sajnamismail at gmail.com (ssUser)
Date: Tue, 26 Jun 2012 23:53:06 -0700 (PDT)
Subject: [antlr-interest] Prevent rulePostProcessing
Message-ID: <1340779986262-7578286.post@n2.nabble.com>

Hi, 

Is there a way that I can prevent rulePostProcessing from happening? I dont
want to modify the auto generated scripts to do this. Basically I want the
returned tree to always have the root node even if it is a tree with a
single node. Meaning I would like the ^(nil X) to remain as ^(nil X) and not
be processed to X. Can this be done from the grammar itself? 

Also, is it possible to change the text of the default nil root to anything
else? I understand the nil root has a text 'null' and that this gets added
by antlr for flat trees. Can I set this from the grammar itself so that
getText gives me something I have set instead of null? 

Thanks
SS

--
View this message in context: http://antlr.1301665.n2.nabble.com/Prevent-rulePostProcessing-tp7578286.html
Sent from the ANTLR mailing list archive at Nabble.com.

From mttdgf at gmail.com  Wed Jun 27 05:18:21 2012
From: mttdgf at gmail.com (Mark Taylor)
Date: Wed, 27 Jun 2012 07:18:21 -0500
Subject: [antlr-interest] npe in
	AssignTokenTypesBehavior.aliasTokenIDsAndLiterals
Message-ID: <CAK_-e8saCZkm_8wGLsroAML3mcCVHJ-eaPC3KQNG3z332ryLUQ@mail.gmail.com>

Hi,

It appears the tokens 'up' and 'down' are invalid somehow. The input
below gives the following exception 'down', I believe the same thing
happens for 'up'.  This is using antlr-3.4-complete.jar

input:

grammar test_down;

tokens {
       //WHILE = 'while';
       DOWN = 'down';
}

//test : WHILE;
test : DOWN;


c:\nbprojects\antlr>java -jar antlr-3.4-complete.jar test_down.g
error(10):  internal error: test_down.g : java.lang.NullPointerException
org.antlr.tool.AssignTokenTypesBehavior.aliasTokenIDsAndLiterals(AssignTokenTypesBehavior.java:281)
org.antlr.tool.AssignTokenTypesBehavior.defineTokens(AssignTokenTypesBehavior.java:216)
org.antlr.tool.CompositeGrammar.assignTokenTypes(CompositeGrammar.java:346)
org.antlr.Tool.process(Tool.java:462)
org.antlr.Tool.main(Tool.java:93)

From researcher0x00 at gmail.com  Wed Jun 27 06:32:05 2012
From: researcher0x00 at gmail.com (Eric)
Date: Wed, 27 Jun 2012 09:32:05 -0400
Subject: [antlr-interest] npe in
	AssignTokenTypesBehavior.aliasTokenIDsAndLiterals
In-Reply-To: <CAK_-e8saCZkm_8wGLsroAML3mcCVHJ-eaPC3KQNG3z332ryLUQ@mail.gmail.com>
References: <CAK_-e8saCZkm_8wGLsroAML3mcCVHJ-eaPC3KQNG3z332ryLUQ@mail.gmail.com>
Message-ID: <CAN45N10uSz2o1_+G4NMnF2UyKj6BoWd8fYbdr50qi-Nn2ek+5A@mail.gmail.com>

Hi Mark,

Are you aware that the tokens UP and DOWN are predefined for ANTLR and used
for trees?

See: http://www.antlr.org/api/Java/_token_8java-source.html#l00036  :)

Eric

On Wed, Jun 27, 2012 at 8:18 AM, Mark Taylor <mttdgf at gmail.com> wrote:

> Hi,
>
> It appears the tokens 'up' and 'down' are invalid somehow. The input
> below gives the following exception 'down', I believe the same thing
> happens for 'up'.  This is using antlr-3.4-complete.jar
>
> input:
>
> grammar test_down;
>
> tokens {
>       //WHILE = 'while';
>       DOWN = 'down';
> }
>
> //test : WHILE;
> test : DOWN;
>
>
> c:\nbprojects\antlr>java -jar antlr-3.4-complete.jar test_down.g
> error(10):  internal error: test_down.g : java.lang.NullPointerException
>
> org.antlr.tool.AssignTokenTypesBehavior.aliasTokenIDsAndLiterals(AssignTokenTypesBehavior.java:281)
>
> org.antlr.tool.AssignTokenTypesBehavior.defineTokens(AssignTokenTypesBehavior.java:216)
> org.antlr.tool.CompositeGrammar.assignTokenTypes(CompositeGrammar.java:346)
> org.antlr.Tool.process(Tool.java:462)
> org.antlr.Tool.main(Tool.java:93)
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>

From atalay at udel.edu  Wed Jun 27 09:10:50 2012
From: atalay at udel.edu (Murat Atalay)
Date: Wed, 27 Jun 2012 09:10:50 -0700
Subject: [antlr-interest] ANTLR generated C files AST issue
Message-ID: <CAFBENeFd_Gow-0koFu1Nezb4FG2ydvhVENPNSnGhsYfJjZg-_g@mail.gmail.com>

Hi Everyone,

I have written a grammar file to produce C files and outputting to AST. I
have a problem with printing the child nodes. tree.getChild(tree, int) does
not return the child its suppose to return(there is random stuff in it).
So, made a copy of the project and run it with eclipse. I can go through
everything just fine with it. I am using visual studio 2010. I was
wondering if anyone would have the same issue before.

Regards,
Murat

From ibre5041 at ibrezina.net  Wed Jun 27 15:17:40 2012
From: ibre5041 at ibrezina.net (Ivan Brezina)
Date: Thu, 28 Jun 2012 00:17:40 +0200
Subject: [antlr-interest] Rewrite issue
In-Reply-To: <CAJN5NKAF6MRiXLPcTrenW8OOoisNPx_wuUgFOPvHBW9XZ7NObQ@mail.gmail.com>
References: <CAJN5NKAF6MRiXLPcTrenW8OOoisNPx_wuUgFOPvHBW9XZ7NObQ@mail.gmail.com>
Message-ID: <4FEB8684.9040003@ibrezina.net>

On 06/26/2012 06:33 PM, Ivan Bludov wrote:
> Hi, Guys
> I'm playing with rewrite feature of ANTLR. So I have a real SQL
> grammar and I'm trying to do something like that.
>
> -------------------------------------------------------------
> 1)
> non_join_query_expression
> 	options {k=1;}
> 	:	(	(non_join_query_term -> non_join_query_term)
> 		|	(
> 		 	joined_table  ( op = UNION | EXCEPT ) ( ALL | DISTINCT )? (
> corresponding_spec  )? query_term  ->
> 		 	joined_table  $op DISTINCT CORRESPONDING  query_term
> 			)
> 		)
> 		(
> 			( op = UNION | EXCEPT ) ( ALL | DISTINCT )? ( corresponding_spec
> )? query_term ->
> 			$non_join_query_expression $op DISTINCT CORRESPONDING  query_term
> 		)*
> 	;
>
>

maybe my answer is off-topic, but anyway.
the word "UNION" is optional therefore the "op" should be optional too.

1st rewrite
->  ^('SOME ROOT TOKEN' joined_table $op? DISTINCT? CORRESPONDING? 
query_term)

2nd rewrite

-> ^('SOME ROOT TOKEN' $non_join_query_expression $op? DISTINCT? CORRESPONDING?  query_term



From andrei.plet at empolis.com  Thu Jun 28 04:20:19 2012
From: andrei.plet at empolis.com (Andrei Plet)
Date: Thu, 28 Jun 2012 13:20:19 +0200
Subject: [antlr-interest] rule, that consider token, follow the match token
Message-ID: <BA8C65D790CE6E4EBBA53ED3CBEAE84B0129C417665E@EXMBOX5.hosting.inetserver.de>

Hi all,

I'm new to antlr and try fix follow problem.

I need a rule that match characters, depend on token, follow the 'main' token.

OP_AND : ('A'|'a') ('N'|'n') ('D'|'d');
TEXT   : ('a'..'z'|'A'..'Z')+;
PLUS   : '+';

The rule OP_AND should match only, if after the input 'and' isn't a '+', so

'and'  --> should match rule OP_AND
'and+' --> should match 2 rules: the rule TEXT 'and' and rule PLUS '+'

Thanks in advance
Andrei

From bkiers at gmail.com  Thu Jun 28 04:46:49 2012
From: bkiers at gmail.com (Bart Kiers)
Date: Thu, 28 Jun 2012 13:46:49 +0200
Subject: [antlr-interest] rule, that consider token,
	follow the match token
In-Reply-To: <BA8C65D790CE6E4EBBA53ED3CBEAE84B0129C417665E@EXMBOX5.hosting.inetserver.de>
References: <BA8C65D790CE6E4EBBA53ED3CBEAE84B0129C417665E@EXMBOX5.hosting.inetserver.de>
Message-ID: <CAOrgODbZZgvS=62qd+6NjmkKgzVo-HdeHR-h+ueRgXFrefcCzg@mail.gmail.com>

On Thu, Jun 28, 2012 at 1:20 PM, Andrei Plet <andrei.plet at empolis.com>wrote:

> ...
> OP_AND : ('A'|'a') ('N'|'n') ('D'|'d');
> TEXT   : ('a'..'z'|'A'..'Z')+;
> PLUS   : '+';
>
> The rule OP_AND should match only, if after the input 'and' isn't a '+', so
>
> 'and'  --> should match rule OP_AND
> 'and+' --> should match 2 rules: the rule TEXT 'and' and rule PLUS '+'
>
>
I wouldn't do that in the lexer, but something like this instead:

OP_AND : ('A'|'a') ('N'|'n') ('D'|'d');
TEXT   : ('a'..'z'|'A'..'Z')+;
PLUS   : '+';

any_text : OP_AND | TEXT;
add_expr : any_text PLUS any_text;

Regards,

Bart.

From andrei.plet at empolis.com  Thu Jun 28 07:16:55 2012
From: andrei.plet at empolis.com (Andrei Plet)
Date: Thu, 28 Jun 2012 16:16:55 +0200
Subject: [antlr-interest] rule, that consider token,
 follow the match token
In-Reply-To: <CAOrgODbZZgvS=62qd+6NjmkKgzVo-HdeHR-h+ueRgXFrefcCzg@mail.gmail.com>
References: <BA8C65D790CE6E4EBBA53ED3CBEAE84B0129C417665E@EXMBOX5.hosting.inetserver.de>
	<CAOrgODbZZgvS=62qd+6NjmkKgzVo-HdeHR-h+ueRgXFrefcCzg@mail.gmail.com>
Message-ID: <BA8C65D790CE6E4EBBA53ED3CBEAE84B0129C422299F@EXMBOX5.hosting.inetserver.de>

Bart;

Thanks for fast response.
Your solution works fine.

Thanks and kind regards
Andrei

Von: Bart Kiers [mailto:bkiers at gmail.com]
Gesendet: Donnerstag, 28. Juni 2012 13:47
An: Andrei Plet
Cc: antlr-interest at antlr.org
Betreff: Re: [antlr-interest] rule, that consider token, follow the match token


On Thu, Jun 28, 2012 at 1:20 PM, Andrei Plet <andrei.plet at empolis.com<mailto:andrei.plet at empolis.com>> wrote:
...
OP_AND : ('A'|'a') ('N'|'n') ('D'|'d');
TEXT   : ('a'..'z'|'A'..'Z')+;
PLUS   : '+';

The rule OP_AND should match only, if after the input 'and' isn't a '+', so

'and'  --> should match rule OP_AND
'and+' --> should match 2 rules: the rule TEXT 'and' and rule PLUS '+'

I wouldn't do that in the lexer, but something like this instead:

OP_AND : ('A'|'a') ('N'|'n') ('D'|'d');
TEXT   : ('a'..'z'|'A'..'Z')+;
PLUS   : '+';

any_text : OP_AND | TEXT;
add_expr : any_text PLUS any_text;

Regards,

Bart.


From burton.samograd at markit.com  Thu Jun 28 09:17:54 2012
From: burton.samograd at markit.com (Burton Samograd)
Date: Thu, 28 Jun 2012 12:17:54 -0400
Subject: [antlr-interest] Skipping sections of the input stream
Message-ID: <D2A5C7470D67A54FACE86B838946D49D14E47332BD@NJ4MSGSCR02.markit.partners>

Hello,

We have a grammar that parses files similar to the following:

SECTION "name1" {
      SUBSECTION "subs1" {
     }
     ... // subs2, subs3, etc
}

SECTION "name2" {
      SUBSECTION "subs1" {
     }
     ... // subs2, subs3, etc
}
// more SECTIONS

We allow the user to specify which section of the file that is relevant to the computation they are running.

It has been requested that we only parse the section that has been specified by the user.  I am thinking that
a strategy where we have a rule like:

section: SECTION quoted_string {
    // if quoted_string != requested_section
    // skip entire section by matching { and } parens
    }
    | SECTION quoted_string LCURLY subsection* RCURLY -> ...
    ;

First off, is what I would like to do possible and is my approach reasonable using anltr?  If it is, can I skip over and
discard large sections of the input stream like I have outlined above?

--
Burton Samograd

________________________________
This e-mail, including accompanying communications and attachments, is strictly confidential and only for the intended recipient. Any retention, use or disclosure not expressly authorised by Markit is prohibited. This email is subject to all waivers and other terms at the following link: http://www.markit.com/en/about/legal/email-disclaimer.page

Please visit http://www.markit.com/en/about/contact/contact-us.page? for contact information on our offices worldwide.

From burton.samograd at markit.com  Thu Jun 28 09:34:15 2012
From: burton.samograd at markit.com (Burton Samograd)
Date: Thu, 28 Jun 2012 12:34:15 -0400
Subject: [antlr-interest] Skipping sections of the input stream
In-Reply-To: <C2FAD899-A121-4676-B11E-B9F1263D5E5D@lischke-online.de>
References: <D2A5C7470D67A54FACE86B838946D49D14E47332BD@NJ4MSGSCR02.markit.partners>
	<C2FAD899-A121-4676-B11E-B9F1263D5E5D@lischke-online.de>
Message-ID: <D2A5C7470D67A54FACE86B838946D49D14E47332C0@NJ4MSGSCR02.markit.partners>

I simplified my example and we actually have two top level section types which I think would greatly
Increase the complexity of a splitter and require making a baby parser to parse quite a bit of the input
structure before passing it to the actual parser.

Not an impossible task, but I think if it could be done completely in the grammar using the standard input
stream it wouldn't create such a dependency between the baby parser and the actual parser unless you
can suggest a better way to do the splitting.

--
Burton Samograd

-----Original Message-----
From: Mike Lischke [mailto:mike at lischke-online.de]
Sent: Thursday, June 28, 2012 10:27 AM
To: Burton Samograd
Subject: Re: [antlr-interest] Skipping sections of the input stream


Burton,

> It has been requested that we only parse the section that has been
> specified by the user.  I am thinking that a strategy where we have a rule like:
>
> section: SECTION quoted_string {
>    // if quoted_string != requested_section
>    // skip entire section by matching { and } parens
>    }
>    | SECTION quoted_string LCURLY subsection* RCURLY -> ...
>    ;
>
> First off, is what I would like to do possible and is my approach
> reasonable using anltr?  If it is, can I skip over and discard large sections of the input stream like I have outlined above?


It might simplify things a lot (and make it much faster) if you would run your input through a splitter, which takes out anything unwanted and only feed the relevant text to the parser. Skipping over some text considering quotes etc. is simple stuff and can be extremely fast in a (relatively) simple loop.

Mike
--
www.soft-gems.net



This e-mail, including accompanying communications and attachments, is strictly confidential and only for the intended recipient. Any retention, use or disclosure not expressly authorised by Markit is prohibited. This email is subject to all waivers and other terms at the following link: http://www.markit.com/en/about/legal/email-disclaimer.page

Please visit http://www.markit.com/en/about/contact/contact-us.page? for contact information on our offices worldwide.

From burton.samograd at markit.com  Thu Jun 28 14:11:07 2012
From: burton.samograd at markit.com (Burton Samograd)
Date: Thu, 28 Jun 2012 17:11:07 -0400
Subject: [antlr-interest] Skipping sections of the input stream
In-Reply-To: <D2A5C7470D67A54FACE86B838946D49D14E47332C0@NJ4MSGSCR02.markit.partners>
References: <D2A5C7470D67A54FACE86B838946D49D14E47332BD@NJ4MSGSCR02.markit.partners>
	<C2FAD899-A121-4676-B11E-B9F1263D5E5D@lischke-online.de>
	<D2A5C7470D67A54FACE86B838946D49D14E47332C0@NJ4MSGSCR02.markit.partners>
Message-ID: <D2A5C7470D67A54FACE86B838946D49D14E4733306@NJ4MSGSCR02.markit.partners>

I figured out a way to do what I was thinking using a chunk of code like so:

sectiona: SECTIONA name {
       if ($name.text->chars != expectedName) {
                      // consumeUntilSet for SECTIONA || SECTIONB
                      // throw SKIP_SECTION_EXCEPTION
      }
    }  LCURLY subsectiona* RCURLY -> ...
     ;
    [ SKIP_SECTION_EXCEPTION] {
        PSRSTATE->error = ANTLR3_FALSE;
        PSRSTATE->failed = ANTLR3_FALSE;
    }

Sent to the list  for future reference.

--
Burton Samograd

-----Original Message-----
From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-bounces at antlr.org] On Behalf Of Burton Samograd
Sent: Thursday, June 28, 2012 10:34 AM
To: Mike Lischke
Cc: antlr-interest at antlr.org
Subject: Re: [antlr-interest] Skipping sections of the input stream

I simplified my example and we actually have two top level section types which I think would greatly Increase the complexity of a splitter and require making a baby parser to parse quite a bit of the input structure before passing it to the actual parser.


Not an impossible task, but I think if it could be done completely in the grammar using the standard input stream it wouldn't create such a dependency between the baby parser and the actual parser unless you can suggest a better way to do the splitting.

--
Burton Samograd

-----Original Message-----
From: Mike Lischke [mailto:mike at lischke-online.de]
Sent: Thursday, June 28, 2012 10:27 AM
To: Burton Samograd
Subject: Re: [antlr-interest] Skipping sections of the input stream


Burton,

> It has been requested that we only parse the section that has been
> specified by the user.  I am thinking that a strategy where we have a rule like:
>
> section: SECTION quoted_string {
>    // if quoted_string != requested_section
>    // skip entire section by matching { and } parens
>    }
>    | SECTION quoted_string LCURLY subsection* RCURLY -> ...
>    ;
>
> First off, is what I would like to do possible and is my approach
> reasonable using anltr?  If it is, can I skip over and discard large sections of the input stream like I have outlined above?


It might simplify things a lot (and make it much faster) if you would run your input through a splitter, which takes out anything unwanted and only feed the relevant text to the parser. Skipping over some text considering quotes etc. is simple stuff and can be extremely fast in a (relatively) simple loop.

Mike
--
www.soft-gems.net



This e-mail, including accompanying communications and attachments, is strictly confidential and only for the intended recipient. Any retention, use or disclosure not expressly authorised by Markit is prohibited. This email is subject to all waivers and other terms at the following link: http://www.markit.com/en/about/legal/email-disclaimer.page

Please visit http://www.markit.com/en/about/contact/contact-us.page? for contact information on our offices worldwide.

List: http://www.antlr.org/mailman/listinfo/antlr-interest
Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address

This e-mail, including accompanying communications and attachments, is strictly confidential and only for the intended recipient. Any retention, use or disclosure not expressly authorised by Markit is prohibited. This email is subject to all waivers and other terms at the following link: http://www.markit.com/en/about/legal/email-disclaimer.page

Please visit http://www.markit.com/en/about/contact/contact-us.page? for contact information on our offices worldwide.

From mailing at tam.si  Fri Jun 29 03:26:01 2012
From: mailing at tam.si (Matej Mailing)
Date: Fri, 29 Jun 2012 12:26:01 +0200
Subject: [antlr-interest] UTF-8, charVocabulary in options in 3.3
Message-ID: <CAF44DZf03c2QLo3Pxxr9waHyp4=qPaOzOgBAb54ocHMh0EpLfw@mail.gmail.com>

Hi,

I am new to antlr but already have an issue. I have an input file that
contains some UTF-8 characters (like U+0161 -
http://www.fileformat.info/info/unicode/char/161/index.htm) and I am
using ANTLRFileStream(inputfile, "UTF-8") to get the input which is in
UTF-8 as it should be. However, when I do
"RES      : '\u0161' ;"

it never matches - I get input1 line 1:0 no viable alternative at
character '?' message.

When I add the following segment to the grammar file:

"options
{
           charVocabulary='\u0000'..'\uFFFE';
}"

I get an error:
"internal error:  : java.lang.Error: Error parsing grammar.g: '\uFFFE'
not expected ';'"
...
error(100): grammar.g:5:24: syntax error: antlr: grammar.g:5:24:
expecting SEMI, found '..'
error(133): grammar.g:3:1: illegal option charVocabulary"

I have been googling around for quite some time and none of the
solutions seems to be working. What am I doing wrong?

Thanks a lot for any ideas in advance.

BR,
Matej

From bkiers at gmail.com  Fri Jun 29 05:06:13 2012
From: bkiers at gmail.com (Bart Kiers)
Date: Fri, 29 Jun 2012 14:06:13 +0200
Subject: [antlr-interest] UTF-8, charVocabulary in options in 3.3
In-Reply-To: <CAF44DZf03c2QLo3Pxxr9waHyp4=qPaOzOgBAb54ocHMh0EpLfw@mail.gmail.com>
References: <CAF44DZf03c2QLo3Pxxr9waHyp4=qPaOzOgBAb54ocHMh0EpLfw@mail.gmail.com>
Message-ID: <CAOrgODbBKzO-ZciN=DAFZax8GtLuzzo-tb1PZ1MG6_svc-rbUw@mail.gmail.com>

On Fri, Jun 29, 2012 at 12:26 PM, Matej Mailing <mailing at tam.si> wrote:

> Hi,
>
> I am new to antlr but already have an issue. I have an input file that
> contains some UTF-8 characters (like U+0161 -
> http://www.fileformat.info/info/unicode/char/161/index.htm) and I am
> using ANTLRFileStream(inputfile, "UTF-8") to get the input which is in
> UTF-8 as it should be. However, when I do
> "RES      : '\u0161' ;"
>
> it never matches - I get input1 line 1:0 no viable alternative at
> character '?' message.
>
> When I add the following segment to the grammar file:
>
> "options
> {
>           charVocabulary='\u0000'..'\uFFFE';
> }"
>
> I get an error:
> "internal error:  : java.lang.Error: Error parsing grammar.g: '\uFFFE'
> not expected ';'"
> ...
> error(100): grammar.g:5:24: syntax error: antlr: grammar.g:5:24:
> expecting SEMI, found '..'
> error(133): grammar.g:3:1: illegal option charVocabulary"
>
> I have been googling around for quite some time and none of the
> solutions seems to be working. What am I doing wrong?
>
>
charVocabulary is an (old) ANTLR v2 option, ANTLR v3 doesn't need it: v3
accepts the range 0x0000..0xFFFF by default. So remove the option
charVocabular.

My guess is that you didn't safe the input file containing 0x0161 properly
(I'm guessing it's saved as plain ASCII). Make sure you safe it as
Unicode/UTF-xx

Regards,

Bart.

From cristiano at defaveri.com.br  Fri Jun 29 11:20:01 2012
From: cristiano at defaveri.com.br (cristiano at defaveri.com.br)
Date: Fri, 29 Jun 2012 15:20:01 -0300
Subject: [antlr-interest] AST Transformation advice
Message-ID: <205fb8414389818b6a8bcc0a09686a11@defaveri.com.br>

  

Hi All, 

I'm working on a AST transformation from a DSL to
JPAQL-like and before going deeper on the code I'd like to some advice
about the best approach using antlr3.x. 

My approach has being : 

a)
Parse the DSL and build the AST, 

b) Walk AST and transform source
AST(a) to JPAQL-like AST(b) and 

c) Walk JPAQL-like AST and generate
target code (using StringTemplate) 

Since the target AST(b) is not very
similar to the source one(a) and needs some external mapping translation
also, my doubt is how much ANTLR 3.x can help me on this transformation
using rewriting rules. My current code is inserting actions in the rules
to populate a semantic model and transform the AST by hand (insert,
remove, moving nodes) - tough work. However, I'm not very very very
confortable with this code and I'd like some advice whether this is the
better approach I can reach now or I could make more successive
transformations using some ANTLR feature itself.  

Thank you in
advance. 

Best regards, 

Cristiano 

  

From mailing at tam.si  Sat Jun 30 02:54:14 2012
From: mailing at tam.si (Matej Mailing)
Date: Sat, 30 Jun 2012 11:54:14 +0200
Subject: [antlr-interest] UTF-8, charVocabulary in options in 3.3
In-Reply-To: <CAOrgODbBKzO-ZciN=DAFZax8GtLuzzo-tb1PZ1MG6_svc-rbUw@mail.gmail.com>
References: <CAF44DZf03c2QLo3Pxxr9waHyp4=qPaOzOgBAb54ocHMh0EpLfw@mail.gmail.com>
	<CAOrgODbBKzO-ZciN=DAFZax8GtLuzzo-tb1PZ1MG6_svc-rbUw@mail.gmail.com>
Message-ID: <CAF44DZdObgaZu8x_sjV=e=-x5yu7hZzxpiRPOtEaezYCqT-AoQ@mail.gmail.com>

Hi,

I have edited the input file with Putty in a Linux console and the
session encoding set to UTF-8. Now I have created the file also with
Notepad++, also set the encoding to UTF-8 and I have the same
behaviour. Is there an easy way to print out ANTLRFileStream? I
suspect that I am looking for the wrong character code in the grammar
file ...

TIA,
Matej




2012/6/29 Bart Kiers <bkiers at gmail.com>:
> On Fri, Jun 29, 2012 at 12:26 PM, Matej Mailing <mailing at tam.si> wrote:
>>
>> Hi,
>>
>> I am new to antlr but already have an issue. I have an input file that
>> contains some UTF-8 characters (like U+0161 -
>> http://www.fileformat.info/info/unicode/char/161/index.htm) and I am
>> using ANTLRFileStream(inputfile, "UTF-8") to get the input which is in
>> UTF-8 as it should be. However, when I do
>> "RES ? ? ?: '\u0161' ;"
>>
>> it never matches - I get input1 line 1:0 no viable alternative at
>> character '?' message.
>>
>> When I add the following segment to the grammar file:
>>
>> "options
>> {
>> ? ? ? ? ? charVocabulary='\u0000'..'\uFFFE';
>> }"
>>
>> I get an error:
>> "internal error: ?: java.lang.Error: Error parsing grammar.g: '\uFFFE'
>> not expected ';'"
>> ...
>> error(100): grammar.g:5:24: syntax error: antlr: grammar.g:5:24:
>> expecting SEMI, found '..'
>> error(133): grammar.g:3:1: illegal option charVocabulary"
>>
>> I have been googling around for quite some time and none of the
>> solutions seems to be working. What am I doing wrong?
>>
>
> charVocabulary is an (old) ANTLR v2 option, ANTLR v3 doesn't need it: v3
> accepts the range 0x0000..0xFFFF by default. So remove the option
> charVocabular.
>
> My guess is that you didn't safe the input file containing 0x0161 properly
> (I'm guessing it's saved as plain ASCII). Make sure you safe it as
> Unicode/UTF-xx
>
> Regards,
>
> Bart.
>

From v-scobis at microsoft.com  Sat Jun 30 22:39:21 2012
From: v-scobis at microsoft.com (Scobie Smith (Insight Global))
Date: Sun, 1 Jul 2012 05:39:21 +0000
Subject: [antlr-interest] referencing subrule result in embedded action (C#
	port)
Message-ID: <FA21EA835C1467498B3E0B904C9CF2020F085EA8@TK5EX14MBXC285.redmond.corp.microsoft.com>

I have a question about referencing an element in an action embedded in a rule. I am using the C# port of ANTLR 3.



In a word, can references to elements be references to subrule results, or must references be only to tokens?



This rule works:



string

@init { StringBuilder sb = new StringBuilder(); }

: ( (tok=String) { sb.Append($tok.Text); } )+ -> { new CommonTree(new CommonToken(STRING, sb.ToString())) }

;



String: OtherCharacter+ ;

fragment OtherCharacter: ~('~'|'\t'|'\r') ;



It collects the text of multiple String tokens into one new token.

** Note that $tok refers to a token (String). **



But this rule does not:



string

@init { StringBuilder sb = new StringBuilder(); }

: ( tok=(String | Integer) { sb.Append($tok.Text); } )+ -> { new CommonTree(new CommonToken(STRING, sb.ToString())) }

;



Integer: Digit+ ;

String: OtherCharacter+ ;

fragment OtherCharacter: ~(SEP|'\t'|'\r'|EOL|Digit) ;

fragment Digit: ('0' .. '9' ) ;



It attempts to collect the text of multiple String OR Integer tokens into one new token.

For instance, input "foo123bar" will tokenize as three tokens, "foo", "123", "bar", and the rule will create one "foo123bar" token.

** Note that $tok refers to the result of a subrule (String | Integer). **

At run-time, the tok variable in the parser is always null. In fact, there is no statement in the generated parser that assigns a value to $tok.



So, I am wondering if references to elements must be to tokens only--referencing a subrule's result is incorrect. (But the grammar allows it.)

[The example/description in TDAR p. 137 (action embedded in a rule, inside * cardinality) references tokens, not subrules.]

Or generally I am wondering what I'm doing wrong in the second rule.



Thanks in advance for any tips or insight about this.



Scobie









