<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [antlr-interest] Memory requirements of C runtime when backtracking
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20Memory%20requirements%20of%20C%20runtime%20when%20backtracking&In-Reply-To=%3C20110504142006.v91r23bxcggcss8w%40webmail.kamm.cz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="041561.html">
   <LINK REL="Next"  HREF="041546.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[antlr-interest] Memory requirements of C runtime when backtracking</H1>
    <B>Ivan Brezina</B> 
    <A HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20Memory%20requirements%20of%20C%20runtime%20when%20backtracking&In-Reply-To=%3C20110504142006.v91r23bxcggcss8w%40webmail.kamm.cz%3E"
       TITLE="[antlr-interest] Memory requirements of C runtime when backtracking">ibre5041 at ibrezina.net
       </A><BR>
    <I>Wed May  4 05:20:06 PDT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="041561.html">[antlr-interest] rules that takes rules as arguments
</A></li>
        <LI>Next message: <A HREF="041546.html">[antlr-interest] Memory requirements of C runtime when	backtracking
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#41541">[ date ]</a>
              <a href="thread.html#41541">[ thread ]</a>
              <a href="subject.html#41541">[ subject ]</a>
              <a href="author.html#41541">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi all
doing some unit test of Oracle SQL grammar I'm facing problems with  
memory requirements when parsing input having many parenthesis.

In general the grammar can have three types of statements which can be  
enclosed in parens.

1. value expression like (A),(1+2).
For an sql_expression there is set of rules using numerical operator
sql_expression -&gt; expr_add -&gt; expr_mul -&gt; expr_sign -&gt; expr_pow -&gt; expr_paren

2. logical expression like (A &gt; 2) or (A is null)
For an condition expression there is a set of rules using locical operator
sql_condition -&gt; condition_or -&gt; condition_and -&gt; condition_not -&gt;  
condition_paren

3. a subquery. It is an sql statement enclosed in parenthesis
like (SELECT * FROM dual).

These 3 types can by combined in many ways.
For example ((SELECT count(1) from dual) &gt; 1)

While testing if found queries - probably generated by some evil sick robot -
whose require more than 8B of RAM to parse even they are quite short

For example:
SELECT *
FROM TABLE1, TABLE2
WHERE
(
  (
   (
    (
     (
      (
       (
        (
         (
  	 (
  	  (
  	   (
  	    (
  	     (
  	      (
	       ( TABLE2.DT = '2' ) OR ( TABLE2.DT = '3' )
   	      ) AND ( TABLE2.CODE &lt; 9 )
   	     ) AND ( TABLE2.WH = 'XXX' )
   	    ) AND ( TABLE1.ID = '0000001' )
   	   ) AND ( ( TABLE1.ATTR_1 IS NULL ) OR ( TABLE1._ATTR1 = '*' ) )
   	  ) AND ( ( TABLE1.ATTR_2 IS NULL ) OR ( TABLE1._ATTR2 = '*' ) )
   	 ) AND ( ( TABLE1.ATTR_3 IS NULL ) OR ( TABLE1._ATTR3 = '*' ) )
      	) AND ( ( TABLE1.ATTR_4 IS NULL ) OR ( TABLE1._ATTR4 = '*' ) )
        ) AND ( ( TABLE1.ATTR_5 IS NULL ) OR ( TABLE1._ATTR5 = '*' ) )
       ) AND ( ( TABLE2.TYPE IS NULL ) OR ( TABLE2.TYPE = '*' ) )
      ) AND ( ( TABLE2.NBR IS NULL ) OR ( TABLE2.NBR = '*' ) )
     ) AND ( ( TABLE2.STAT = '01' ) OR ( TABLE2.STAT = '*' ) )
    ) AND ( ( TABLE2.ORGN IS NULL ) OR ( TABLE2.ORGN = '*' ) )
   ) AND ( TABLE2.NBR = '00000000' )
  ) AND ( TABLE2.PO IS NULL )
)

Both value expression and condition expression rules do backtracking.
In the example above every parenthesis nesting doubles memory requirements.

Are there any ways how to reduce/monitor memory requirements?
What exactly is remembered when backtracking?
I tried to add some syntactic predicates into value/conditional expression
but it usually led to failure of other tests.

thx Ivan




----------------------------------------------------------------
This message was sent using IMP, the Internet Messaging Program.

</PRE>





<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="041561.html">[antlr-interest] rules that takes rules as arguments
</A></li>
	<LI>Next message: <A HREF="041546.html">[antlr-interest] Memory requirements of C runtime when	backtracking
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#41541">[ date ]</a>
              <a href="thread.html#41541">[ thread ]</a>
              <a href="subject.html#41541">[ subject ]</a>
              <a href="author.html#41541">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.antlr.org/mailman/listinfo/antlr-interest">More information about the antlr-interest
mailing list</a><br>
</body></html>
