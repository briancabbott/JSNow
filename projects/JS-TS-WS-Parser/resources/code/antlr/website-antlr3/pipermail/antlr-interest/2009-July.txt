From damien.cassou at gmail.com  Wed Jul  1 00:23:40 2009
From: damien.cassou at gmail.com (Damien Cassou)
Date: Wed, 1 Jul 2009 09:23:40 +0200
Subject: [antlr-interest] Collecting disparate subtrees into one tree?
In-Reply-To: <748117.36536.qm@web33303.mail.mud.yahoo.com>
References: <748117.36536.qm@web33303.mail.mud.yahoo.com>
Message-ID: <6ac749c10907010023h1c8f4f1vb0272d2ff9c77055@mail.gmail.com>

On Wed, Jul 1, 2009 at 2:02 AM, J. Stephen Riley
Silber<jsrs701 at yahoo.com> wrote:
> Here's a question for you.? (Apologies if this is explained somewhere; I
> haven't found it yet.)? Suppose I have a language where I have procedures
> and functions (Oh! Pascal!), such as this:
>
> ??? procedure a() { ... }
> ??? function x() { ... }
> ??? procedure b() { ... }
> ??? function y() { ... }
> ??? procedure c() { ... }
> ??? function z() { ... }
>
> Now suppose, when I'm emitting the final representation, I want to group the
> procs and funcs together--I'm thinking I should somehow rewrite the tree to
> get it looking like this simplified version:
>
> ??? ^( CODE ^( PROCS a b c ) ^( FUNCS x y z ) )
>
> Is there a clever way, in tree-rewriting syntax, to attach a subtree as a
> child of a completely unrelated node?

doesn't something like this work?

code: procs* funcs*
  -> ^(CODE ^(PROCS procs*) ^(FUNCS funcs*))

-- 
Damien Cassou
http://damiencassou.seasidehosting.st

"Lambdas are relegated to relative obscurity until Java makes them
popular by not having them." James Iry

From carter_cheng at yahoo.com  Wed Jul  1 02:17:32 2009
From: carter_cheng at yahoo.com (Carter Cheng)
Date: Wed, 1 Jul 2009 02:17:32 -0700 (PDT)
Subject: [antlr-interest] missing attribute access with c runtime
Message-ID: <982445.76317.qm@web50102.mail.re2.yahoo.com>


Hi,

I have been trying to build a compiler with the c runtime (an old project which I am relooking at) but I could not get ANTLR 3.1.3 to accept the following rules:

formals returns [std::vector< std::pair<Type*, Symbol> > v]
	: f0=formal { v.push_back($f0.var); } (COMMA f1=formal { v.push_back($f1); } )*

formal returns [std::pair<Type*, Symbol> p]
	: type Ident {p.first = $type; p.second = (char*)$Ident.text->chars; }

What is the correct attribute to access the return value?

Thanks in advance.


      

From elnur.j at gmail.com  Wed Jul  1 03:27:11 2009
From: elnur.j at gmail.com (Elnur Cabarov)
Date: Wed, 1 Jul 2009 15:27:11 +0500
Subject: [antlr-interest] Java Cross Referencing Tool (Alpha Release) issue
Message-ID: <cb604c710907010327u578fe0daoacbbea047f2f7660@mail.gmail.com>

Hello

I've downloaded your Java Cross Referencing Tool (Alpha
Release)<http://www.antlr.org/share/1073500619580/JavaCrossRef.zip>,
but is seems to be in older grammar version. Have anyone got an updated
version that can be compiled with ANTLR v3 (I've failed to email author) or
any ideas, I can do conversion myself.

Thanks a lot in advance

-- 
Elnur Cabarov
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090701/6dc6e506/attachment.html 

From johan at sikanda.be  Wed Jul  1 04:47:02 2009
From: johan at sikanda.be (Johan Cockx)
Date: Wed, 1 Jul 2009 13:47:02 +0200
Subject: [antlr-interest] How can I selectively avoid tokenization?
In-Reply-To: <AC732412-861E-4416-8E04-B9F62E01CE75@temporal-wave.com>
References: <dc07c6b0906250019g7f2a0b7brf14ad02642349638@mail.gmail.com> 
	<E62D4201-617E-4298-A550-20C355E62217@temporal-wave.com>
	<dc07c6b0906260018q7401af7bn8f4d12dea14730ce@mail.gmail.com> 
	<AC732412-861E-4416-8E04-B9F62E01CE75@temporal-wave.com>
Message-ID: <dc07c6b0907010447w19192e36kdf92176af9bcf00f@mail.gmail.com>

Hi  Jim,

I have tried to use gated semantic predicates but I still can't find a
solution.

First,  I added a flag 'in_expression' to the lexer and set it true on '$<'
and false on '>'.

Then,  I use a predicate for the string token as in:

STRING :  {in_expression}?=> QUOTE ~QUOTE* QUOTE
fragment QUOTE : '"'

Next,  I need to make sure that anything present in the text to be ignored
can be tokenized.
How do I do that? If I add a token like:

OTHER : . ;

it matches everything,  including letters of an identifier! (and I get no
ambiguity warning from Antlr?)
If I add a predicate as in:

OTHER :            {!in_expression}?=> . ;

things get worse,  because now I get 'No viable alternative' errors on any
identifier in an expression.

Here is a simplified grammar that I am using to experiment:

@lexer::members {
    private Boolean in_expression = false;
}

top : token* EOF;

token
  : BEGIN_EXPRESSION   { System.err.println("BEGIN_EXPRESSION"); }
  | ID                 { System.err.println("ID: " + $ID.text); }
  | STRING             { System.err.println("STRING: " + $STRING.text); }
  | END_EXPRESSION     { System.err.println("END_EXPRESSION"); }
  | OTHER              { System.err.println("OTHER: " + $OTHER.text); }
  ;

BEGIN_EXPRESSION : '$<' { in_expression = true; };
ID :               ('A..Z' | 'a..z')+ ;
STRING :           {in_expression}?=> '"' ~'"'* '"';
END_EXPRESSION :   '>'   { in_expression = false; };
OTHER :            {!in_expression}?=> . ;

On Fri, Jun 26, 2009 at 2:23 PM, Jim Idle <jimi at temporal-wave.com> wrote:

> Gated semantic predicates on the string literals.
>
> Jim
>
>
>
> On Jun 26, 2009, at 2:18 AM, Johan Cockx <johan at sikanda.be> wrote:
>
> Hi Jim,
>
> Thanks for the suggestion.
>
> However, it doesn't solve the problem.
>
> One token in my expressions is a quoted string.  The text to be ignored may
> also contain quotes,  but these should be ignored,  so that '$<' after an
> ignored quote is recognized.
>
> If I let the lexer tokenize the text to be ignored and then just ignore
> these tokens,
> it will recognize the quote as the start of a quoted string token and
> happily add the '$<' to the quoted string,  instead of recognizing it as a
> token.
>
> I think I need to completely avoid tokenizing the text to be ignored,  but
> I don't know how to do this.
>
> All suggestions are very welcome.
>
> Regards, Johan
>
> On Thu, Jun 25, 2009 at 6:05 PM, Jim Idle < <jimi at temporal-wave.com>
> jimi at temporal-wave.com> wrote:
>
>> Create a Boolean member variable and default it to off. Turn it on web you
>> hit $< and off when you get >
>>
>> In your tokens call skip() if the variable is false. Make sure you cater
>> for locations that $< is not significant.
>>
>> Jim
>>
>>
>> On Jun 25, 2009, at 2:19 AM, Johan Cockx < <johan at sikanda.be>
>> johan at sikanda.be> wrote:
>>
>>  Hi,
>>>
>>> In my current project,  I need to recognize and parse expressions marked
>>> by $<...> (where '...' represents the omitted expression) in an arbitrary
>>> text (not containing $<).
>>>
>>> How can I tell the (Antlr-generated) lexer to ignore text outside the
>>> $<...> marks?
>>>
>>> I have tried to recognize each chunk of text between the marks as a
>>> single (large) token,  but that causes all sorts of problems and doesn't
>>> seem to be the right way to go.
>>>
>>> Can anyone point me in a better direction?
>>>
>>> Thanks,
>>> Johan
>>>
>>> List: <http://www.antlr.org/mailman/listinfo/antlr-interest>
>>> http://www.antlr.org/mailman/listinfo/antlr-interest
>>> Unsubscribe:
>>> <http://www.antlr.org/mailman/options/antlr-interest/your-email-address>
>>> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>>>
>>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090701/f7483f4a/attachment.html 

From jsrs701 at yahoo.com  Wed Jul  1 05:00:21 2009
From: jsrs701 at yahoo.com (J. Stephen Riley Silber)
Date: Wed, 1 Jul 2009 05:00:21 -0700 (PDT)
Subject: [antlr-interest] Collecting disparate subtrees into one tree?
Message-ID: <957348.74621.qm@web33307.mail.mud.yahoo.com>



Hi Damien,

> doesn't something like this work?
> 
> code: procs* funcs*
> ? -> ^(CODE ^(PROCS procs*) ^(FUNCS funcs*))
> 

I don't think it would, because it still requires that procs be grouped together in the source code, as well as funcs.  Something like

    code: (proc | func)*

would be more accurate, but then I still have my same tree problem.

Though your idea did trigger some vague notion in my brain meaties that maybe I can do a combo top-down and bottom-up visitor to bubble procs and funcs apart...  I'll have to think about this.

Other ideas?

--S

From jared.bunting at peachjean.com  Wed Jul  1 05:06:32 2009
From: jared.bunting at peachjean.com (jared.bunting at peachjean.com)
Date: Wed, 1 Jul 2009 12:06:32 +0000
Subject: [antlr-interest] Collecting disparate subtrees into one tree?
Message-ID: <1082864229-1246449998-cardhu_decombobulator_blackberry.rim.net-2037700114-@bxe1049.bisx.prod.on.blackberry>

It's been awhile since I've written grammars, but what about:

code: (proc | func)*
? -> ^(CODE ^(PROCS proc*) ^(FUNCS func*))

I seem to recall that this works fairly well...

------Original Message------
From: J. Stephen Riley Silber
Sender: antlr-interest-bounces at antlr.org
To: Damien Cassou
Cc: antlr-interest at antlr.org
Subject: Re: [antlr-interest] Collecting disparate subtrees into one tree?
Sent: Jul 1, 2009 7:00 AM



Hi Damien,

> doesn't something like this work?
> 
> code: procs* funcs*
> ? -> ^(CODE ^(PROCS procs*) ^(FUNCS funcs*))
> 

I don't think it would, because it still requires that procs be grouped together in the source code, as well as funcs.  Something like

    code: (proc | func)*

would be more accurate, but then I still have my same tree problem.

Though your idea did trigger some vague notion in my brain meaties that maybe I can do a combo top-down and bottom-up visitor to bubble procs and funcs apart...  I'll have to think about this.

Other ideas?

--S

List: http://www.antlr.org/mailman/listinfo/antlr-interest
Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address


Sent via BlackBerry by AT&T

From gustaf.j at gmail.com  Wed Jul  1 07:37:04 2009
From: gustaf.j at gmail.com (Gustaf Johansson)
Date: Wed, 1 Jul 2009 16:37:04 +0200
Subject: [antlr-interest] Code too large, java error
Message-ID: <5f59a7210907010737u3f3646b1q48aeb5d52ff197ea@mail.gmail.com>

> Gustaf Johansson wrote:
> > Hello,
> >
> > I have implemented the grammar for a fairly complex language, using
> > it's BNF definition as base.
> > (Basically just reformatting the syntax to match Antlr).
> >
> > Now this worked fine although the generated java code got pretty
> > large, ~60?000 lines in the parser and ~7?500 in the lexer.
> >
> > Now there has arrived a new revision of the language and i started to
> > implement the additions and changes and thats where i hit the wall.
> >
> > Using just plain Antlr and generate a non-debug version works as
> > before, but in AntlrWorks when generating a debug version i get:
> >
> > [12:56:12] C:\antlr\output\ExtendedParser.java:15: code too large
> > [12:56:12] ? ? public static final String[] tokenNames = new String[] {
> > [12:56:12] ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?^
> > [12:56:12] 1 error
> >
> > The debug versions are ~85?500 lines in the parser and ~7?800 lines in
> > the lexer.
> >
> > If i comment out the "tokenNames" and "ruleNames" string and the
> > "getTokenNames" function it compiles and runs, but id rather not do
> > this manually each time i compile.
> You need to split your grammar into a number of component parts and use
> import. This generates separate classes and you won't get the problem.
> However, Works is not yet dealing with imports perfectly so while you
> can edit and so on, you will need to debug remotely from Works.
>
> Jim

Thanks alot for the info Jim!
After some search on the antlr wiki i found:
http://www.antlr.org/wiki/display/ANTLR3/Composite+Grammars which is
what i need :).

As you said Works seems to have some problems with imports though,
basically it only produces valid syntax check on the root node.
Hopefully this will get fixed in a later version, but i can live
without the syntax check.

My problem is that Works is really slow when there are lots of errors,
so what i would like to know is; if there are some "hidden" setting in
Works to disable the syntax and grammar check?
This also affects remote debugging and gets really annoying after a while.

BR Gustaf

From dermot_oneill at hotmail.com  Wed Jul  1 07:57:26 2009
From: dermot_oneill at hotmail.com (Dermot ONeill)
Date: Wed, 1 Jul 2009 14:57:26 +0000
Subject: [antlr-interest] Code too large, java error
In-Reply-To: <4A4A2ADC.8010408@temporal-wave.com>
References: <5f59a7210906300426p548dd9e7p73f824a4b68dbcc8@mail.gmail.com>
	<4A4A2ADC.8010408@temporal-wave.com>
Message-ID: <COL118-W1541FC1C0DFE78198A2A6A982E0@phx.gbl>


Hi Gustaf,
I encountered this problem as well.Javac pointed to tokenNames being too long, but after a bit of messing around it looked like it was due to the overall size of the static initialization in the generated java files. 
In my case there where thousands of FOLLOW_... static final vars defined at the end of the generated Java file.public static final BitSet FOLLOW_ ... 

I wrote a post processing script to pull these out into a separate interface(s) , and then brought them back in by "implementing" those interfaces.This allowed Javac to build.
I set this up in ant as well.http://dermotoneill.blogspot.com/2009/07/antlr3-can-generate-very-large-java.html

Wont work with AntlrWorks, but may be of some use.Regards,Dermot.
> Date: Tue, 30 Jun 2009 08:10:20 -0700
> From: jimi at temporal-wave.com
> CC: antlr-interest at antlr.org
> Subject: Re: [antlr-interest] Code too large, java error
> 
> Gustaf Johansson wrote:
> > Hello,
> >
> > I have implemented the grammar for a fairly complex language, using 
> > it's BNF definition as base.
> > (Basically just reformatting the syntax to match Antlr).
> >
> > Now this worked fine although the generated java code got pretty 
> > large, ~60?000 lines in the parser and ~7?500 in the lexer.
> >
> > Now there has arrived a new revision of the language and i started to 
> > implement the additions and changes and thats where i hit the wall.
> >
> > Using just plain Antlr and generate a non-debug version works as 
> > before, but in AntlrWorks when generating a debug version i get:
> >
> > [12:56:12] C:\antlr\output\ExtendedParser.java:15: code too large
> > [12:56:12]     public static final String[] tokenNames = new String[] {
> > [12:56:12]                                  ^
> > [12:56:12] 1 error
> >
> > The debug versions are ~85?500 lines in the parser and ~7?800 lines in 
> > the lexer.
> >
> > If i comment out the "tokenNames" and "ruleNames" string and the 
> > "getTokenNames" function it compiles and runs, but id rather not do 
> > this manually each time i compile.
> You need to split your grammar into a number of component parts and use 
> import. This generates separate classes and you won't get the problem. 
> However, Works is not yet dealing with imports perfectly so while you 
> can edit and so on, you will need to debug remotely from Works.
> 
> Jim
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address

_________________________________________________________________
See all the ways you can stay connected to friends and family
http://www.microsoft.com/windows/windowslive/default.aspx
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090701/145b7a4d/attachment.html 

From jimi at temporal-wave.com  Wed Jul  1 10:04:02 2009
From: jimi at temporal-wave.com (Jim Idle)
Date: Wed, 01 Jul 2009 10:04:02 -0700
Subject: [antlr-interest] missing attribute access with c runtime
In-Reply-To: <982445.76317.qm@web50102.mail.re2.yahoo.com>
References: <982445.76317.qm@web50102.mail.re2.yahoo.com>
Message-ID: <4A4B9702.4090300@temporal-wave.com>

Carter Cheng wrote:
> Hi,
>
> I have been trying to build a compiler with the c runtime (an old project which I am relooking at) but I could not get ANTLR 3.1.3 to accept the following rules:
>
> formals returns [std::vector< std::pair<Type*, Symbol> > v]
> 	: f0=formal { v.push_back($f0.var); } (COMMA f1=formal { v.push_back($f1); } )*
>
> formal returns [std::pair<Type*, Symbol> p]
> 	: type Ident {p.first = $type; p.second = (char*)$Ident.text->chars; }
>
> What is the correct attribute to access the return value?
>
> Thanks in advance.
>
>
>       
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>   
ANTLR does not accept elements for the returns that are as complicated 
as this I am afraid, the argument parser is relatively simple. Try a 
typedef instead. Also remember that the return is a struct which 
contains the tree and any returns parameters so you must return pointers 
to things.

Jim

From benblo+ANTLR at gmail.com  Wed Jul  1 10:54:40 2009
From: benblo+ANTLR at gmail.com (Benoit Fouletier)
Date: Wed, 1 Jul 2009 19:54:40 +0200
Subject: [antlr-interest] hidden tokens and v3
Message-ID: <b02eee6b0907011054u4ea94defp904a3adbb8afadce@mail.gmail.com>

I thought I had figured everything regarding token streams after reading this
wonderful article <http://www.antlr2.org/doc/streams.html>... until I
realized it concerns v2, and much has changed in v3! Is there a more
up-to-date version/equivalent somewhere?

I'm (still) struggling like crazy trying to convert the preserveWhiteSpace
example from v2 to v3, and the whole antlr.CommonHiddenStreamToken,
antlr.CommonASTWithHiddenTokens, getHiddenAfter(), etc... puzzles me.

Overall, I don't really understand why we still have access to antlr.*
classes, when the v3 doc only mentions org.antlr.runtime.*... some classes
of the v2 doc still exist, other don't... or have I not found the right doc?

Also, I find it very hard to find info on how to switch to v3 (the
'migrating' article concentrates on grammar syntax but says very little
regarding the classes & usecase changes).

Cheers,

     Ben
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090701/018a8e15/attachment.html 

From jimi at temporal-wave.com  Wed Jul  1 11:53:45 2009
From: jimi at temporal-wave.com (Jim Idle)
Date: Wed, 01 Jul 2009 11:53:45 -0700
Subject: [antlr-interest] Code too large, java error
In-Reply-To: <5f59a7210907010737u3f3646b1q48aeb5d52ff197ea@mail.gmail.com>
References: <5f59a7210907010737u3f3646b1q48aeb5d52ff197ea@mail.gmail.com>
Message-ID: <4A4BB0B9.9050605@temporal-wave.com>

An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090701/5b49c365/attachment.html 

From antlr at mirality.co.nz  Wed Jul  1 13:16:43 2009
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Thu, 02 Jul 2009 08:16:43 +1200
Subject: [antlr-interest] Collecting disparate subtrees into one  tree?
In-Reply-To: <1082864229-1246449998-cardhu_decombobulator_blackberry.rim
	.net-2037700114-@bxe1049.bisx.prod.on.blackberry>
References: <1082864229-1246449998-cardhu_decombobulator_blackberry.rim.net-2037700114-@bxe1049.bisx.prod.on.blackberry>
Message-ID: <20090701201702.9CA4F34184DD@www.antlr.org>

At 00:06 2/07/2009, jared.bunting at peachjean.com wrote:
 >It's been awhile since I've written grammars, but what about:
 >
 >code: (proc | func)*
 >  -> ^(CODE ^(PROCS proc*) ^(FUNCS func*))
 >
 >I seem to recall that this works fairly well...

And if it doesn't, you can try the more explicit variant:

code : (p+=proc | f+=func)*
   -> ^(CODE ^(PROCS $p*) ^(FUNCS $f*))
   ;

(Or leave out the PROCS/FUNCS nodes if you just want to reorder 
the procedures/functions without actually grouping them in a 
subtree.)


From patrick133t at yahoo.com  Wed Jul  1 15:39:22 2009
From: patrick133t at yahoo.com (Patrick Higgins)
Date: Wed, 1 Jul 2009 15:39:22 -0700 (PDT)
Subject: [antlr-interest] Jira issue ANTLR-378
Message-ID: <106464.61426.qm@web65605.mail.ac4.yahoo.com>


Has anyone taken a look at http://www.antlr.org/jira/browse/ANTLR-378 yet? I converted the PL/SQL grammar at http://www.antlr.org/grammar/1209225566284/PLSQL3.g to Java (after applying the fixes mentioned at http://markmail.org/message/mf724z2pfe5rpdrh) and found that it does not parse all of our PL/SQL source properly.

When I try to use the debugger in ANTLRWorks v1.2.3, I find that this grammar triggers the same exception as issue ANTLR-378.

I'll try tracking this down if no one has looked at it yet, but I'm not sure how far I'll get.

Does anyone have other suggestions for how to debug a grammar of the complexity of the PL/SQL grammar without using the ANTLRWorks debugger?

Thanks,
Patrick


From parrt at cs.usfca.edu  Wed Jul  1 16:38:37 2009
From: parrt at cs.usfca.edu (Terence Parr)
Date: Wed, 1 Jul 2009 16:38:37 -0700
Subject: [antlr-interest] Jira issue ANTLR-378
In-Reply-To: <106464.61426.qm@web65605.mail.ac4.yahoo.com>
References: <106464.61426.qm@web65605.mail.ac4.yahoo.com>
Message-ID: <F46E4666-877D-4A7E-BD7B-17E3F4CA1636@cs.usfca.edu>

Hi. i'm swamped but try to add description attribute to evalPredicate  
template (in Java.stg or Dbg.stg I think)
Ter
On Jul 1, 2009, at 3:39 PM, Patrick Higgins wrote:

>
> Has anyone taken a look at http://www.antlr.org/jira/browse/ 
> ANTLR-378 yet? I converted the PL/SQL grammar at http://www.antlr.org/grammar/1209225566284/PLSQL3.g 
>  to Java (after applying the fixes mentioned at http://markmail.org/message/mf724z2pfe5rpdrh) 
>  and found that it does not parse all of our PL/SQL source properly.
>
> When I try to use the debugger in ANTLRWorks v1.2.3, I find that  
> this grammar triggers the same exception as issue ANTLR-378.
>
> I'll try tracking this down if no one has looked at it yet, but I'm  
> not sure how far I'll get.
>
> Does anyone have other suggestions for how to debug a grammar of the  
> complexity of the PL/SQL grammar without using the ANTLRWorks  
> debugger?
>
> Thanks,
> Patrick
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address


From tnurkkala at cse.taylor.edu  Wed Jul  1 21:57:44 2009
From: tnurkkala at cse.taylor.edu (Tom Nurkkala)
Date: Wed, 1 Jul 2009 23:57:44 -0500
Subject: [antlr-interest] Python Version Stable?
Message-ID: <1DB8365B-5951-4020-8074-C4D1A8CF011D@cse.taylor.edu>

I'm fixing to write a compiler for a query and mapping language for  
use in a cloud computing platform.  I would like to use ANTLR v3 with  
a Python target for this work.  Can anyone report recent experience  
targeting Python for an industrial-strength ANTLR project?

thanks,
tom.
--
Tom Nurkkala, PhD
Associate Professor
Computer Science & Engineering
Taylor University
tnurkkala at cse.taylor.edu


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090701/8b7d881f/attachment.html 

From gustaf.j at gmail.com  Thu Jul  2 00:45:07 2009
From: gustaf.j at gmail.com (Gustaf Johansson)
Date: Thu, 2 Jul 2009 09:45:07 +0200
Subject: [antlr-interest] Code too large, java error
In-Reply-To: <4A4BB0B9.9050605@temporal-wave.com>
References: <5f59a7210907010737u3f3646b1q48aeb5d52ff197ea@mail.gmail.com>
	<4A4BB0B9.9050605@temporal-wave.com>
Message-ID: <5f59a7210907020045s34483a2dtc0b73c2d60a32aa7@mail.gmail.com>

On Wed, Jul 1, 2009 at 8:53 PM, Jim Idle<jimi at temporal-wave.com> wrote:
> Gustaf Johansson wrote:
>
> Gustaf Johansson wrote:
>
>
> Hello,
>
> I have implemented the grammar for a fairly complex language, using
> it's BNF definition as base.
> (Basically just reformatting the syntax to match Antlr).
>
> Now this worked fine although the generated java code got pretty
> large, ~60?000 lines in the parser and ~7?500 in the lexer.
>
> Now there has arrived a new revision of the language and i started to
> implement the additions and changes and thats where i hit the wall.
>
> Using just plain Antlr and generate a non-debug version works as
> before, but in AntlrWorks when generating a debug version i get:
>
> [12:56:12] C:\antlr\output\ExtendedParser.java:15: code too large
> [12:56:12] ? ? public static final String[] tokenNames = new String[] {
> [12:56:12] ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?^
> [12:56:12] 1 error
>
> The debug versions are ~85?500 lines in the parser and ~7?800 lines in
> the lexer.
>
> If i comment out the "tokenNames" and "ruleNames" string and the
> "getTokenNames" function it compiles and runs, but id rather not do
> this manually each time i compile.
>
>
> You need to split your grammar into a number of component parts and use
> import. This generates separate classes and you won't get the problem.
> However, Works is not yet dealing with imports perfectly so while you
> can edit and so on, you will need to debug remotely from Works.
>
> Jim
>
>
> Thanks alot for the info Jim!
> After some search on the antlr wiki i found:
> http://www.antlr.org/wiki/display/ANTLR3/Composite+Grammars
>  which is
> what i need :).
>
> As you said Works seems to have some problems with imports though,
> basically it only produces valid syntax check on the root node.
> Hopefully this will get fixed in a later version, but i can live
> without the syntax check.
>
> My problem is that Works is really slow when there are lots of errors,
> so what i would like to know is; if there are some "hidden" setting in
> Works to disable the syntax and grammar check?
> This also affects remote debugging and gets really annoying after a while.
>
> BR Gustaf
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>
>
> I have noticed it being slow with lots of errors using open JDK, but using
> Sun JDK it seems to be a lot better. I think that Jean is working on all the
> composite grammar stuff though. You might try his beta version.
>
> Jim
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>
>

Thanks for the suggestion, i was using Works 1.3b and after a switch
to 1.2.3 i have no more delays (using Sun JDK 1.6.0_13) so perhaps
something is broken in the new beta release.
/Gustaf

From gustaf.j at gmail.com  Thu Jul  2 01:09:00 2009
From: gustaf.j at gmail.com (Gustaf Johansson)
Date: Thu, 2 Jul 2009 10:09:00 +0200
Subject: [antlr-interest] Ambiguous grammar or Antlr?
Message-ID: <5f59a7210907020109r5b8c22c2wcf6c9fec4be7c51d@mail.gmail.com>

I have a complex grammar (900 lines) that parses incorrectly sometimes.
The grammar is basically just an Antlr transformation of the ETSI
defined TTCN3 BNF.

Here is a snippet from my grammar (modified for simplicity):

  assignment: ref '=' exp ';'? ;
  ref: ('a' .. 'z' | '_') ('.' ('a' .. 'z' | '_'))* ;
  exp: addExp ('+' addExp)* ;
  ... "a lot of math exps of different precedences"
  unaryExp: ('-' | '+')? primary ;
  primary: opCall | value | '(' exp ')' ;
  opCall: "this is a quite complex rule"
  value: INT | ref ;

Now if i parse:
  v_some_var = v_some_other_var;

I get:
  line x:y no viable alternative at input ';'

I suppose its because it expects '(' following a opCall-name or
something, though im not sure.

If i change the definition of primary to:
  primary: value | opCall | '(' exp ')' ;

It parses correctly.
I have backtrack and memoize set to true.

I just dont understand why Antlr wont even try the second option in
the 'primary' rule, before reporting an error, this seems wrong to me.
Could someone please shed some light on this for me?

Best Regards Gustaf

From broad07 at gmail.com  Thu Jul  2 03:19:50 2009
From: broad07 at gmail.com (Jennifer Smith)
Date: Thu, 2 Jul 2009 11:19:50 +0100
Subject: [antlr-interest] It's very interesting!
Message-ID: <31fee2ba0907020319t62c7bf2ev1381c4939794f710@mail.gmail.com>

Hi,

My friend recommends me a very special website.


 http://www.hlch.info


 Maybe someone here is interested in it.

Apologize for those people who are not interested in it.


Regards,
Jennifer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090702/341c0aa4/attachment.html 

From sven.van.echelpoel at empolis.com  Thu Jul  2 05:50:46 2009
From: sven.van.echelpoel at empolis.com (Sven Van Echelpoel)
Date: Thu, 02 Jul 2009 14:50:46 +0200
Subject: [antlr-interest] Zermans can zav a bright idea azwell
Message-ID: <1246539046.6390.3.camel@cartman>

http://www.time.com/time/world/article/0,8599,1907182,00.html?xid=rss-topstories


From mpenningroth at cincom.com  Thu Jul  2 07:35:01 2009
From: mpenningroth at cincom.com (Penningroth, Mark)
Date: Thu, 2 Jul 2009 10:35:01 -0400
Subject: [antlr-interest] Question about preserving spaces in quoted strings
Message-ID: <6418CC03D0FB1943A464E1FEFB3ED46B145F5250@im01>

I have the following in my grammar:

 

sqcon

            : '\'' ( options {greedy=false;} : .)* '\''

;

 

The intent is to get a single text node with everything between the sing
quotes.

 

When I parse 'Los Angeles'  I lose the space .

 

I have been struggling quite a bit with quoted strings...

 

Any ideas?

 

 

 

Software Engineering Manager

Advanced Technology Group

Cincom Systems

 

phone: (513)612-2300

fax: (513)612-2000

http://www.cincom.com <http://www.cincom.com/> 

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090702/5a2fe54f/attachment.html 

From james.abley at gmail.com  Thu Jul  2 08:38:27 2009
From: james.abley at gmail.com (James Abley)
Date: Thu, 2 Jul 2009 16:38:27 +0100
Subject: [antlr-interest] code translation
In-Reply-To: <b02eee6b0906240246se450ac5vac80abd60035d34c@mail.gmail.com>
References: <b02eee6b0906240246se450ac5vac80abd60035d34c@mail.gmail.com>
Message-ID: <23fce8e60907020838w55b0e42m6c9c5ff19c9072ee@mail.gmail.com>

2009/6/24 Benoit Fouletier <benblo+ANTLR at gmail.com>:
> Hi!
> Newbie to ANTLR here, hello all =).
> I'm trying to make a translator from Unity's JavaScript?(sometimes called
> UnityScript)?to C#. This particular JS implementation is made to compile to
> IL and run on Mono. It's actually based on Boo, the grammar was written
> by?Rodrigo B. de Oliveira?with ANTLR (don't know which version).
> So the 2 languages are?very?similar, they don't differ in principle, only in
> syntax. I've already achieved a lot with regular expressions but that just
> doesn't seem like the right tool for the job.
> 90% of?the differences are in variable & function declaration, the core is
> the same.
> Basically, I need to translate this:
>
> function MyFunction(i : int, b : boolean) : String
> {
> ?? ?return i + " " + b;
> }
>
> to this:
>
> private string MyFunction(int i, boolean b)
> {
> ?? ?return i + " " + b;
> }
>
> I have access to the compiled lexer & parser (but not the original grammar).
> I've tried to go through the token stream and manually rearrange the
> declarations (which works but again, doesn't feel like the best way to do
> it).
> The thing is, I want to retain comments & formatting during translation, but
> the lexer doesn't give me the hidden tokens* (and anyway my little fiddlings
> would probably explode!).
> Also, I don't need a complete compiler: all the code I want to translate
> already compiles so I know it's valid.
>
> It seems to me like my needs are fairly simple (!), but I don't know what
> approach to take.?If I were to rewrite the grammar (or just modify the
> ECMAScript grammar?found here), are there ways to define translate rules, in
> the fashion of regex replacement??Or should I be able to get away with using
> the compiled lexer I have?
>
> Sorry my post is so long, I hope I've made the context clear. Cheers =),
>
> ??????? Ben
>
> * I've read the?token streams?article in the v2 docs (it's not in the v3
> docs, is it still valid?), which is very informative... unfortunately when I
> setTokenCreator to a hidden stream, I don't get anything more.
> Here's my loop:
> UnityScriptLexer lexer = new UnityScriptLexer(file);
> lexer.setTokenCreator(new
> antlr.CommonHiddenStreamToken.CommonHiddenStreamTokenCreator());
>
> antlr.IHiddenStreamToken token;
> while ((token = (antlr.IHiddenStreamToken)lexer.nextToken()).Type != EOF)
> {
> ??? if (token.getHiddenBefore() != null)
> ??? ??? LogToken(token.getHiddenBefore());???// this never happens
>
> ??? LogToken(token);
>
> ??? if (token.getHiddenAfter() != null)
> ??? ??? LogToken(token.getHiddenAfter());????// this never happens
> }
> LogToken() just outputs to the console.
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>

http://www.antlr.org/wiki/display/ST/Language+Translation+Using+ANTLR+and+StringTemplate

That seems to be ANTLR 2. but relevant. You would need a grammar
though, rather than just the compiled lexer and parser.

The new book is supposed to contain information around this sort of
request. Ter might be able to tell more about that.

http://www.pragprog.com/titles/tpdsl/language-design-patterns

Cheers,

James

From jimi at temporal-wave.com  Thu Jul  2 08:45:41 2009
From: jimi at temporal-wave.com (Jim Idle)
Date: Thu, 02 Jul 2009 08:45:41 -0700
Subject: [antlr-interest] Ambiguous grammar or Antlr?
In-Reply-To: <5f59a7210907020109r5b8c22c2wcf6c9fec4be7c51d@mail.gmail.com>
References: <5f59a7210907020109r5b8c22c2wcf6c9fec4be7c51d@mail.gmail.com>
Message-ID: <4A4CD625.6050007@temporal-wave.com>

Gustaf Johansson wrote:
> I have a complex grammar (900 lines) that parses incorrectly sometimes.
> The grammar is basically just an Antlr transformation of the ETSI
> defined TTCN3 BNF.
>
> Here is a snippet from my grammar (modified for simplicity):
>
>   assignment: ref '=' exp ';'? ;
>   ref: ('a' .. 'z' | '_') ('.' ('a' .. 'z' | '_'))* ;
>   exp: addExp ('+' addExp)* ;
>   ... "a lot of math exps of different precedences"
>   unaryExp: ('-' | '+')? primary ;
>   primary: opCall | value | '(' exp ')' ;
>   opCall: "this is a quite complex rule"
>   value: INT | ref ;
>
> Now if i parse:
>   v_some_var = v_some_other_var;
>
> I get:
>   line x:y no viable alternative at input ';'
>
> I suppose its because it expects '(' following a opCall-name or
> something, though im not sure.
>
> If i change the definition of primary to:
>   primary: value | opCall | '(' exp ')' ;
>
> It parses correctly.
> I have backtrack and memoize set to true.
>
> I just dont understand why Antlr wont even try the second option in
> the 'primary' rule, before reporting an error, this seems wrong to me.
> Could someone please shed some light on this for me?
>   
Basically, your backtrack and memoize are getting in the way of you 
seeing the issues in your grammar. A good tests would be to turn those 
options off and see what ANTLR is telling you about conflicts. 
Sometimes, the order of the alts is important and you might need to 
shift them around in primary.

However, unless this is a quick and dirty parser to do something once in 
a while, copying that normative specification for a language directly 
into ANTLR with backtrack=true is rarely going to work well I am afraid. 
Even with backtracking, you still need to know something about LL(k) and 
parsing etc, and switching on backtrack mode will hide all your 
problems. It also means, as you have found out, that in the event of a 
syntax error, you cannot determine much  about the location of your error.

Basically, you will need to left factor at least some parts of your 
grammar. In this case, if you have something like:

| ID
| ID '(' expr ')'
| ID something else

and (probably more complicated than that is your issue), then look to do:

| ID (  '(' expr
         | something
      )?

and so on.

In your position, I would turn off backtracking and either start again 
from scratch, starting with expression and gradually building up. This 
won't be as bad as it sounds because you can do a lot of copy and 
pasting I woudl bet.

Jim

From jimi at temporal-wave.com  Thu Jul  2 08:52:34 2009
From: jimi at temporal-wave.com (Jim Idle)
Date: Thu, 02 Jul 2009 08:52:34 -0700
Subject: [antlr-interest] Question about preserving spaces in quoted
	strings
In-Reply-To: <6418CC03D0FB1943A464E1FEFB3ED46B145F5250@im01>
References: <6418CC03D0FB1943A464E1FEFB3ED46B145F5250@im01>
Message-ID: <4A4CD7C2.5090702@temporal-wave.com>

An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090702/b0a91461/attachment.html 

From jbb at acm.org  Thu Jul  2 08:54:21 2009
From: jbb at acm.org (John B. Brodie)
Date: Thu, 02 Jul 2009 11:54:21 -0400
Subject: [antlr-interest] Question about preserving spaces in quoted
 strings
In-Reply-To: <6418CC03D0FB1943A464E1FEFB3ED46B145F5250@im01>
References: <6418CC03D0FB1943A464E1FEFB3ED46B145F5250@im01>
Message-ID: <1246550061.13744.6.camel@gecko.home.org>

Greetings!

On Thu, 2009-07-02 at 10:35 -0400, Penningroth, Mark wrote:
> I have the following in my grammar:
>
> sqcon
>             : '\'' ( options {greedy=false;} : .)* '\''
> ;
>
> The intent is to get a single text node with everything between the
> sing quotes.
>
> When I parse ?Los Angeles?  I lose the space .

your sqcon rule is a Parser rule (because it begins with a lower case
letter).

have you tried making it a Lexer rule? by up-casing (at least) the first
letter.

and note that when you make it into a Lexer rule, the text of the token
will include the leading and trailing quotes, so you may need to
substring them away.

Hope this helps
   -jbb



From benblo+ANTLR at gmail.com  Thu Jul  2 09:43:00 2009
From: benblo+ANTLR at gmail.com (Benoit Fouletier)
Date: Thu, 2 Jul 2009 18:43:00 +0200
Subject: [antlr-interest] code translation
In-Reply-To: <23fce8e60907020838w55b0e42m6c9c5ff19c9072ee@mail.gmail.com>
References: <b02eee6b0906240246se450ac5vac80abd60035d34c@mail.gmail.com> 
	<23fce8e60907020838w55b0e42m6c9c5ff19c9072ee@mail.gmail.com>
Message-ID: <b02eee6b0907020943s53461f49x8e4d86c2f0a1b81a@mail.gmail.com>

Thanks James!
Yes, I'm going the "rewrite the whole grammar" route. I'd really like to use
v3 though (to benefit from ANTLRWorks), and I'm really struggling to sort
out through all the v2 info... a LOT has changed and doesn't apply, and
converting is a mess if you don't know both v2 and v3 really well.

Anyway... the translation itself is relatively straightforward, ANTLR is
amazing for that!, but preserving comments & formatting is killing me. The
best resources I found were all in v2, and much seems to have changed
(the token
stream filtering/splitting <http://www.antlr2.org/doc/streams.html>, and the
"hidden channel" helpers are gone). I understand v3 is supposed to be more
generic & flexible (multiple channels instead of just "hidden or not"), but
I just don't understand what the intended way is for a translation scenario.

        Ben


On Thu, Jul 2, 2009 at 5:38 PM, James Abley <james.abley at gmail.com> wrote:

> 2009/6/24 Benoit Fouletier <benblo+ANTLR at gmail.com<benblo%2BANTLR at gmail.com>
> >:
> > Hi!
> > Newbie to ANTLR here, hello all =).
> > I'm trying to make a translator from Unity's JavaScript (sometimes called
> > UnityScript) to C#. This particular JS implementation is made to compile
> to
> > IL and run on Mono. It's actually based on Boo, the grammar was written
> > by Rodrigo B. de Oliveira with ANTLR (don't know which version).
> > So the 2 languages are very similar, they don't differ in principle, only
> in
> > syntax. I've already achieved a lot with regular expressions but that
> just
> > doesn't seem like the right tool for the job.
> > 90% of the differences are in variable & function declaration, the core
> is
> > the same.
> > Basically, I need to translate this:
> >
> > function MyFunction(i : int, b : boolean) : String
> > {
> >     return i + " " + b;
> > }
> >
> > to this:
> >
> > private string MyFunction(int i, boolean b)
> > {
> >     return i + " " + b;
> > }
> >
> > I have access to the compiled lexer & parser (but not the original
> grammar).
> > I've tried to go through the token stream and manually rearrange the
> > declarations (which works but again, doesn't feel like the best way to do
> > it).
> > The thing is, I want to retain comments & formatting during translation,
> but
> > the lexer doesn't give me the hidden tokens* (and anyway my little
> fiddlings
> > would probably explode!).
> > Also, I don't need a complete compiler: all the code I want to translate
> > already compiles so I know it's valid.
> >
> > It seems to me like my needs are fairly simple (!), but I don't know what
> > approach to take. If I were to rewrite the grammar (or just modify the
> > ECMAScript grammar found here), are there ways to define translate rules,
> in
> > the fashion of regex replacement? Or should I be able to get away with
> using
> > the compiled lexer I have?
> >
> > Sorry my post is so long, I hope I've made the context clear. Cheers =),
> >
> >         Ben
> >
> > * I've read the token streams article in the v2 docs (it's not in the v3
> > docs, is it still valid?), which is very informative... unfortunately
> when I
> > setTokenCreator to a hidden stream, I don't get anything more.
> > Here's my loop:
> > UnityScriptLexer lexer = new UnityScriptLexer(file);
> > lexer.setTokenCreator(new
> > antlr.CommonHiddenStreamToken.CommonHiddenStreamTokenCreator());
> >
> > antlr.IHiddenStreamToken token;
> > while ((token = (antlr.IHiddenStreamToken)lexer.nextToken()).Type != EOF)
> > {
> >     if (token.getHiddenBefore() != null)
> >         LogToken(token.getHiddenBefore());   // this never happens
> >
> >     LogToken(token);
> >
> >     if (token.getHiddenAfter() != null)
> >         LogToken(token.getHiddenAfter());    // this never happens
> > }
> > LogToken() just outputs to the console.
> >
> > List: http://www.antlr.org/mailman/listinfo/antlr-interest
> > Unsubscribe:
> > http://www.antlr.org/mailman/options/antlr-interest/your-email-address
> >
>
>
> http://www.antlr.org/wiki/display/ST/Language+Translation+Using+ANTLR+and+StringTemplate
>
> That seems to be ANTLR 2. but relevant. You would need a grammar
> though, rather than just the compiled lexer and parser.
>
> The new book is supposed to contain information around this sort of
> request. Ter might be able to tell more about that.
>
> http://www.pragprog.com/titles/tpdsl/language-design-patterns
>
> Cheers,
>
> James
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090702/f443f342/attachment.html 

From parrt at cs.usfca.edu  Thu Jul  2 09:51:48 2009
From: parrt at cs.usfca.edu (Terence Parr)
Date: Thu, 2 Jul 2009 09:51:48 -0700
Subject: [antlr-interest] code translation
In-Reply-To: <b02eee6b0907020943s53461f49x8e4d86c2f0a1b81a@mail.gmail.com>
References: <b02eee6b0906240246se450ac5vac80abd60035d34c@mail.gmail.com>
	<23fce8e60907020838w55b0e42m6c9c5ff19c9072ee@mail.gmail.com>
	<b02eee6b0907020943s53461f49x8e4d86c2f0a1b81a@mail.gmail.com>
Message-ID: <93794F24-2EEB-409B-9A95-F60F04F130A3@cs.usfca.edu>


On Jul 2, 2009, at 9:43 AM, Benoit Fouletier wrote:
> Anyway... the translation itself is relatively straightforward,  
> ANTLR is amazing for that!, but preserving comments & formatting is  
> killing me. The best resources I found were all in v2, and much  
> seems to have changed (the token stream filtering/splitting, and the  
> "hidden channel" helpers are gone).

Really?  $channel = HIDDEN doesn't work in lexer?

Ter
>  I understand v3 is supposed to be more generic & flexible (multiple  
> channels instead of just "hidden or not"), but I just don't  
> understand what the intended way is for a translation scenario.
>
>         Ben
>
>
> On Thu, Jul 2, 2009 at 5:38 PM, James Abley <james.abley at gmail.com>  
> wrote:
> 2009/6/24 Benoit Fouletier <benblo+ANTLR at gmail.com>:
> > Hi!
> > Newbie to ANTLR here, hello all =).
> > I'm trying to make a translator from Unity's JavaScript (sometimes  
> called
> > UnityScript) to C#. This particular JS implementation is made to  
> compile to
> > IL and run on Mono. It's actually based on Boo, the grammar was  
> written
> > by Rodrigo B. de Oliveira with ANTLR (don't know which version).
> > So the 2 languages are very similar, they don't differ in  
> principle, only in
> > syntax. I've already achieved a lot with regular expressions but  
> that just
> > doesn't seem like the right tool for the job.
> > 90% of the differences are in variable & function declaration, the  
> core is
> > the same.
> > Basically, I need to translate this:
> >
> > function MyFunction(i : int, b : boolean) : String
> > {
> >     return i + " " + b;
> > }
> >
> > to this:
> >
> > private string MyFunction(int i, boolean b)
> > {
> >     return i + " " + b;
> > }
> >
> > I have access to the compiled lexer & parser (but not the original  
> grammar).
> > I've tried to go through the token stream and manually rearrange the
> > declarations (which works but again, doesn't feel like the best  
> way to do
> > it).
> > The thing is, I want to retain comments & formatting during  
> translation, but
> > the lexer doesn't give me the hidden tokens* (and anyway my little  
> fiddlings
> > would probably explode!).
> > Also, I don't need a complete compiler: all the code I want to  
> translate
> > already compiles so I know it's valid.
> >
> > It seems to me like my needs are fairly simple (!), but I don't  
> know what
> > approach to take. If I were to rewrite the grammar (or just modify  
> the
> > ECMAScript grammar found here), are there ways to define translate  
> rules, in
> > the fashion of regex replacement? Or should I be able to get away  
> with using
> > the compiled lexer I have?
> >
> > Sorry my post is so long, I hope I've made the context clear.  
> Cheers =),
> >
> >         Ben
> >
> > * I've read the token streams article in the v2 docs (it's not in  
> the v3
> > docs, is it still valid?), which is very informative...  
> unfortunately when I
> > setTokenCreator to a hidden stream, I don't get anything more.
> > Here's my loop:
> > UnityScriptLexer lexer = new UnityScriptLexer(file);
> > lexer.setTokenCreator(new
> > antlr.CommonHiddenStreamToken.CommonHiddenStreamTokenCreator());
> >
> > antlr.IHiddenStreamToken token;
> > while ((token = (antlr.IHiddenStreamToken)lexer.nextToken()).Type ! 
> = EOF)
> > {
> >     if (token.getHiddenBefore() != null)
> >         LogToken(token.getHiddenBefore());   // this never happens
> >
> >     LogToken(token);
> >
> >     if (token.getHiddenAfter() != null)
> >         LogToken(token.getHiddenAfter());    // this never happens
> > }
> > LogToken() just outputs to the console.
> >
> > List: http://www.antlr.org/mailman/listinfo/antlr-interest
> > Unsubscribe:
> > http://www.antlr.org/mailman/options/antlr-interest/your-email-address
> >
>
> http://www.antlr.org/wiki/display/ST/Language+Translation+Using+ANTLR+and+StringTemplate
>
> That seems to be ANTLR 2. but relevant. You would need a grammar
> though, rather than just the compiled lexer and parser.
>
> The new book is supposed to contain information around this sort of
> request. Ter might be able to tell more about that.
>
> http://www.pragprog.com/titles/tpdsl/language-design-patterns
>
> Cheers,
>
> James
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090702/5a137865/attachment.html 

From mpenningroth at cincom.com  Thu Jul  2 12:27:47 2009
From: mpenningroth at cincom.com (Penningroth, Mark)
Date: Thu, 2 Jul 2009 15:27:47 -0400
Subject: [antlr-interest] Question about preserving spaces in quoted
	strings
In-Reply-To: <1246550061.13744.6.camel@gecko.home.org>
References: <6418CC03D0FB1943A464E1FEFB3ED46B145F5250@im01>
	<1246550061.13744.6.camel@gecko.home.org>
Message-ID: <6418CC03D0FB1943A464E1FEFB3ED46B145F55B1@im01>

I am still confused.

Everything I try seems to break something else.

I have a grammar and a tree grammar.

When I print out the tree I see the whitespace that is embedded in my
string.

I can't figure out what I have to do either in the tree construction, or
the tree walker to get to the hidden token channel.

Here is a snippet of the grammar that produces the tree grammar:


mdx_statement
	:	
	'MDX(' mdxs=mdx_stmt ')' -> ^(MDX_FUNC $mdxs)
	;
	
mdx_stmt 
	:	 dqcon -> dqcon;
dqcon
	: '"'
	(  (~'"')=>
	   (   ('\\')=>'\\'.
	   | .
	   )
	 )*
	 '"';
WS : (' '|'\t'|'\n'|'\r')+ {$channel=HIDDEN;} ;

When I parse something like:

MDX("a g g g g g g gggggggggggggggggggggggggx")

And then print the tree I see this:

(MDX_FUNC " a g g g g g g gggggggggggggggggggggggggx ")

In my tree grammar I have this (I left out some things, but you get the
idea):

@after {
   statements.Add($select_statement::stmt);
   if ($mdxs.text != null) {
      $select_statement::stmt.TheMDX = $mdxs.text;
   }
}
	^(MDX_FUNC mdxs=mdx_stmt)
	;
mdx
	: dqcon 
	;

I get an empty string.  I know there is something I a missing.  In the
debugger I see the input text.  Is there a simple way I can get the
string representation of the node?  

Thanks,
  Mark
-----Original Message-----
From: John B. Brodie [mailto:jbb at acm.org] 
Sent: Thursday, July 02, 2009 11:54 AM
To: Penningroth, Mark
Cc: antlr-interest at antlr.org
Subject: Re: [antlr-interest] Question about preserving spaces in quoted
strings

Greetings!

On Thu, 2009-07-02 at 10:35 -0400, Penningroth, Mark wrote:
> I have the following in my grammar:
>
> sqcon
>             : '\'' ( options {greedy=false;} : .)* '\''
> ;
>
> The intent is to get a single text node with everything between the
> sing quotes.
>
> When I parse 'Los Angeles'  I lose the space .

your sqcon rule is a Parser rule (because it begins with a lower case
letter).

have you tried making it a Lexer rule? by up-casing (at least) the first
letter.

and note that when you make it into a Lexer rule, the text of the token
will include the leading and trailing quotes, so you may need to
substring them away.

Hope this helps
   -jbb



From antlr at mirality.co.nz  Thu Jul  2 12:52:25 2009
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Fri, 03 Jul 2009 07:52:25 +1200
Subject: [antlr-interest] Question about preserving spaces in quoted
 strings
In-Reply-To: <6418CC03D0FB1943A464E1FEFB3ED46B145F55B1@im01>
References: <6418CC03D0FB1943A464E1FEFB3ED46B145F5250@im01>
	<1246550061.13744.6.camel@gecko.home.org>
	<6418CC03D0FB1943A464E1FEFB3ED46B145F55B1@im01>
Message-ID: <20090702195243.BA69934184D4@www.antlr.org>

At 07:27 3/07/2009, Penningroth, Mark wrote:
 >dqcon
 >	: '"'
 >	(  (~'"')=>
 >	   (   ('\\')=>'\\'.
 >	   | .
 >	   )
 >	)*
 >	'"';

Like you were already told, this should be a lexer rule:

DQTEXT
   : '"' ('\\' . | ~('\\' | '"'))* '"'
   ;


From jimi at temporal-wave.com  Thu Jul  2 12:58:32 2009
From: jimi at temporal-wave.com (Jim Idle)
Date: Thu, 02 Jul 2009 12:58:32 -0700
Subject: [antlr-interest] Question about preserving spaces in
	quoted	strings
In-Reply-To: <6418CC03D0FB1943A464E1FEFB3ED46B145F55B1@im01>
References: <6418CC03D0FB1943A464E1FEFB3ED46B145F5250@im01>	<1246550061.13744.6.camel@gecko.home.org>
	<6418CC03D0FB1943A464E1FEFB3ED46B145F55B1@im01>
Message-ID: <4A4D1168.9030504@temporal-wave.com>

An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090702/fc9cea72/attachment.html 

From mpenningroth at cincom.com  Thu Jul  2 13:14:28 2009
From: mpenningroth at cincom.com (Penningroth, Mark)
Date: Thu, 2 Jul 2009 16:14:28 -0400
Subject: [antlr-interest] Question about preserving spaces in quoted
	strings
In-Reply-To: <EM03R3Bz6h1xR63a99S00003f27@em03.cincom.com>
References: <6418CC03D0FB1943A464E1FEFB3ED46B145F5250@im01>
	<1246550061.13744.6.camel@gecko.home.org>
	<6418CC03D0FB1943A464E1FEFB3ED46B145F55B1@im01>
	<EM03R3Bz6h1xR63a99S00003f27@em03.cincom.com>
Message-ID: <6418CC03D0FB1943A464E1FEFB3ED46B145F55F7@im01>

When I make it a lexer rule I have other issues with my grammar.  

These were working before:

Contents of file: C:\OLAP_TO_RELATIONAL\TestINP\bigcond.txt

SELECT "[Measures].[Unit Sales]" ,
   "[Store].[Store Name]_PROP_[Store Manager]",
   "[Store].[Store Name]_PROP_[Store Type]",
   "[Product].[Product Name]",
   "[Store].[Store Name]"
FROM "Store"
WHERE "[Measures].[Unit Sales]" > 10 AND
  "[Store].[Store Name]_PROP_[Store Type]" = "Supermarket" AND
  "[Store].[Store Name]_PROP_[Store Sqft]" > 30000


 End of file: C:\OLAP_TO_RELATIONAL\TestINP\bigcond.txt
line 1:7 no viable alternative at input '"[Measures].[Unit Sales]"'
line 2:3 no viable alternative at input '"[Store].[Store
Name]_PROP_[Store Manag
er]"'
line 3:3 no viable alternative at input '"[Store].[Store
Name]_PROP_[Store Type]
"'
line 4:3 no viable alternative at input '"[Product].[Product Name]"'
line 5:3 no viable alternative at input '"[Store].[Store Name]"'
line 6:5 no viable alternative at input '"Store"'

That is why I attempted to use a production rule.

I had tried lexer rule first.

I have other rules that may start with a double quote but do not allow
the same characters as DQTEXT.

I am still confused by the resulting tree of my original attempt.

(MDX_FUNC " a g g g g g g gggggggggggggggggggggggggx ")

was printed by ToStringTree(), but when I loop through all the children
hanging off the MDX_FUNC node, I only see 10 children (ie none of the
spaces).  The Children property must be filtering out the hidden
channel.

Thanks,
  For the suggestions


-----Original Message-----
From: Gavin Lambert [mailto:antlr at mirality.co.nz] 
Sent: Thursday, July 02, 2009 3:52 PM
To: Penningroth, Mark; John B. Brodie
Cc: antlr-interest at antlr.org
Subject: Re: [antlr-interest] Question about preserving spaces in quoted
strings

At 07:27 3/07/2009, Penningroth, Mark wrote:
 >dqcon
 >	: '"'
 >	(  (~'"')=>
 >	   (   ('\\')=>'\\'.
 >	   | .
 >	   )
 >	)*
 >	'"';

Like you were already told, this should be a lexer rule:

DQTEXT
   : '"' ('\\' . | ~('\\' | '"'))* '"'
   ;


From benblo+ANTLR at gmail.com  Thu Jul  2 13:50:10 2009
From: benblo+ANTLR at gmail.com (Benoit Fouletier)
Date: Thu, 2 Jul 2009 22:50:10 +0200
Subject: [antlr-interest] code translation
In-Reply-To: <93794F24-2EEB-409B-9A95-F60F04F130A3@cs.usfca.edu>
References: <b02eee6b0906240246se450ac5vac80abd60035d34c@mail.gmail.com> 
	<23fce8e60907020838w55b0e42m6c9c5ff19c9072ee@mail.gmail.com> 
	<b02eee6b0907020943s53461f49x8e4d86c2f0a1b81a@mail.gmail.com> 
	<93794F24-2EEB-409B-9A95-F60F04F130A3@cs.usfca.edu>
Message-ID: <b02eee6b0907021350w17d7fd3cjda14e3e1db4a0670@mail.gmail.com>

On Thu, Jul 2, 2009 at 6:51 PM, Terence Parr <parrt at cs.usfca.edu> wrote:

>
> On Jul 2, 2009, at 9:43 AM, Benoit Fouletier wrote:
>
> Anyway... the translation itself is relatively straightforward, ANTLR is
> amazing for that!, but preserving comments & formatting is killing me. The
> best resources I found were all in v2, and much seems to have changed (the token
> stream filtering/splitting <http://www.antlr2.org/doc/streams.html>, and
> the "hidden channel" helpers are gone).
>
>
> Really?  $channel = HIDDEN doesn't work in lexer?
>

Oh yes it works, but I haven't found a convenient way to dump it back out. I
was talking about the whole CommonHiddenToken, ASTWithHiddenTokenStream,
etc, and getHiddenBefore/After, those are gone (right?).

I ended up doing it manually like so:

private void dumpHidden(Tree p)
{
 Token t = ((CommonTree)p).token;
dumpHidden(t);
}

private void dumpHidden(int start)
{
CommonTokenStream tokens = InstrMain.tokens;
for (int i = start; i < tokens.size(); i++)
 {
Token t = tokens.get(i);
if (t.getChannel() == HIDDEN)
 System.out.print(t.getText());
else
break;
 }
}


Works, but tedious... feels like a regression!

Also the "token stream specification" hints at ways to automatically get all
hidden tokens from a specific tree, but I haven't figured out how (of even
if it's actually been implemented in v3).

I'm nearly through converting the preserveWithSpace example to v3 (my only
problem is the manual callDumpInstrumentation, in v2 it took the original
tree as argument, in v3 no argument but it doesn't rewind the tree so the
original call cannot continue).
I'm not sure I'm making any sense (pretty late here ;), I'll try and post
the complete code tomorrow (btw does this list accept attachments?).

      Ben



>
> Ter
>
>  I understand v3 is supposed to be more generic & flexible (multiple
> channels instead of just "hidden or not"), but I just don't understand what
> the intended way is for a translation scenario.
>
>         Ben
>
>
> On Thu, Jul 2, 2009 at 5:38 PM, James Abley <james.abley at gmail.com> wrote:
>
>> 2009/6/24 Benoit Fouletier <benblo+ANTLR at gmail.com<benblo%2BANTLR at gmail.com>
>> >:
>> > Hi!
>> > Newbie to ANTLR here, hello all =).
>> > I'm trying to make a translator from Unity's JavaScript (sometimes
>> called
>> > UnityScript) to C#. This particular JS implementation is made to compile
>> to
>> > IL and run on Mono. It's actually based on Boo, the grammar was written
>> > by Rodrigo B. de Oliveira with ANTLR (don't know which version).
>> > So the 2 languages are very similar, they don't differ in principle,
>> only in
>> > syntax. I've already achieved a lot with regular expressions but that
>> just
>> > doesn't seem like the right tool for the job.
>> > 90% of the differences are in variable & function declaration, the core
>> is
>> > the same.
>> > Basically, I need to translate this:
>> >
>> > function MyFunction(i : int, b : boolean) : String
>> > {
>> >     return i + " " + b;
>> > }
>> >
>> > to this:
>> >
>> > private string MyFunction(int i, boolean b)
>> > {
>> >     return i + " " + b;
>> > }
>> >
>> > I have access to the compiled lexer & parser (but not the original
>> grammar).
>> > I've tried to go through the token stream and manually rearrange the
>> > declarations (which works but again, doesn't feel like the best way to
>> do
>> > it).
>> > The thing is, I want to retain comments & formatting during translation,
>> but
>> > the lexer doesn't give me the hidden tokens* (and anyway my little
>> fiddlings
>> > would probably explode!).
>> > Also, I don't need a complete compiler: all the code I want to translate
>> > already compiles so I know it's valid.
>> >
>> > It seems to me like my needs are fairly simple (!), but I don't know
>> what
>> > approach to take. If I were to rewrite the grammar (or just modify the
>> > ECMAScript grammar found here), are there ways to define translate
>> rules, in
>> > the fashion of regex replacement? Or should I be able to get away with
>> using
>> > the compiled lexer I have?
>> >
>> > Sorry my post is so long, I hope I've made the context clear. Cheers =),
>> >
>> >         Ben
>> >
>> > * I've read the token streams article in the v2 docs (it's not in the v3
>> > docs, is it still valid?), which is very informative... unfortunately
>> when I
>> > setTokenCreator to a hidden stream, I don't get anything more.
>> > Here's my loop:
>> > UnityScriptLexer lexer = new UnityScriptLexer(file);
>> > lexer.setTokenCreator(new
>> > antlr.CommonHiddenStreamToken.CommonHiddenStreamTokenCreator());
>> >
>> > antlr.IHiddenStreamToken token;
>> > while ((token = (antlr.IHiddenStreamToken)lexer.nextToken()).Type !=
>> EOF)
>> > {
>> >     if (token.getHiddenBefore() != null)
>> >         LogToken(token.getHiddenBefore());   // this never happens
>> >
>> >     LogToken(token);
>> >
>> >     if (token.getHiddenAfter() != null)
>> >         LogToken(token.getHiddenAfter());    // this never happens
>> > }
>> > LogToken() just outputs to the console.
>> >
>> > List: http://www.antlr.org/mailman/listinfo/antlr-interest
>> > Unsubscribe:
>> > http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>> >
>>
>>
>> http://www.antlr.org/wiki/display/ST/Language+Translation+Using+ANTLR+and+StringTemplate
>>
>> That seems to be ANTLR 2. but relevant. You would need a grammar
>> though, rather than just the compiled lexer and parser.
>>
>> The new book is supposed to contain information around this sort of
>> request. Ter might be able to tell more about that.
>>
>> http://www.pragprog.com/titles/tpdsl/language-design-patterns
>>
>> Cheers,
>>
>> James
>>
>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>> Unsubscribe:
>> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>>
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090702/0d8c0210/attachment.html 

From antlr at mirality.co.nz  Thu Jul  2 14:05:56 2009
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Fri, 03 Jul 2009 09:05:56 +1200
Subject: [antlr-interest] Question about preserving spaces in quoted
 strings
In-Reply-To: <6418CC03D0FB1943A464E1FEFB3ED46B145F55F7@im01>
References: <6418CC03D0FB1943A464E1FEFB3ED46B145F5250@im01>
	<1246550061.13744.6.camel@gecko.home.org>
	<6418CC03D0FB1943A464E1FEFB3ED46B145F55B1@im01>
	<EM03R3Bz6h1xR63a99S00003f27@em03.cincom.com>
	<6418CC03D0FB1943A464E1FEFB3ED46B145F55F7@im01>
Message-ID: <20090702210608.03CAC34184D4@www.antlr.org>

At 08:14 3/07/2009, Penningroth, Mark wrote:
 >line 1:7 no viable alternative at input '"[Measures].[Unit
 >Sales]"'

You need to change the grammar at this point to be expecting a 
DQTEXT instead of whatever it is now, and remove any other 
double-quote matching from your grammar.

Remember that the lexer runs up front without any context, and 
produces tokens from your input.  There should be no ambiguity 
between lexer rules; don't try to make contextual decisions 
(including checking for characters that are valid in some cases 
but not others) until at least the parser level.

You will often find this process easier if you ensure that none of 
your parser rules use 'string constants like this' -- all that 
ends up doing anyway is creating a lexer rule.  It's better to be 
explicit about this; not only do you get a better-named token that 
way, but it's also easier to see possible conflicts between your 
lexer rules.


From parrt at cs.usfca.edu  Thu Jul  2 14:51:28 2009
From: parrt at cs.usfca.edu (Terence Parr)
Date: Thu, 2 Jul 2009 14:51:28 -0700
Subject: [antlr-interest] code translation
In-Reply-To: <b02eee6b0907021350w17d7fd3cjda14e3e1db4a0670@mail.gmail.com>
References: <b02eee6b0906240246se450ac5vac80abd60035d34c@mail.gmail.com>
	<23fce8e60907020838w55b0e42m6c9c5ff19c9072ee@mail.gmail.com>
	<b02eee6b0907020943s53461f49x8e4d86c2f0a1b81a@mail.gmail.com>
	<93794F24-2EEB-409B-9A95-F60F04F130A3@cs.usfca.edu>
	<b02eee6b0907021350w17d7fd3cjda14e3e1db4a0670@mail.gmail.com>
Message-ID: <2C9AC3E1-D5DA-4513-A7D8-C4C2D40503B5@cs.usfca.edu>

token stream .toString(x,y) print all tokens even hidden ones.  must  
be something in the API.
Ter
On Jul 2, 2009, at 1:50 PM, Benoit Fouletier wrote:

> On Thu, Jul 2, 2009 at 6:51 PM, Terence Parr <parrt at cs.usfca.edu>  
> wrote:
>
> On Jul 2, 2009, at 9:43 AM, Benoit Fouletier wrote:
>> Anyway... the translation itself is relatively straightforward,  
>> ANTLR is amazing for that!, but preserving comments & formatting is  
>> killing me. The best resources I found were all in v2, and much  
>> seems to have changed (the token stream filtering/splitting, and  
>> the "hidden channel" helpers are gone).
>
> Really?  $channel = HIDDEN doesn't work in lexer?
>
> Oh yes it works, but I haven't found a convenient way to dump it  
> back out. I was talking about the whole CommonHiddenToken,  
> ASTWithHiddenTokenStream, etc, and getHiddenBefore/After, those are  
> gone (right?).
>
> I ended up doing it manually like so:
>
> private void dumpHidden(Tree p)
> {
> 	Token t = ((CommonTree)p).token;
> 	dumpHidden(t);
> }
>
> private void dumpHidden(int start)
> {
> 	CommonTokenStream tokens = InstrMain.tokens;
> 	for (int i = start; i < tokens.size(); i++)
> 	{
> 		Token t = tokens.get(i);
> 		if (t.getChannel() == HIDDEN)
> 			System.out.print(t.getText());
> 		else
> 			break;
> 	}
> }
>
> Works, but tedious... feels like a regression!
>
> Also the "token stream specification" hints at ways to automatically  
> get all hidden tokens from a specific tree, but I haven't figured  
> out how (of even if it's actually been implemented in v3).
>
> I'm nearly through converting the preserveWithSpace example to v3  
> (my only problem is the manual callDumpInstrumentation, in v2 it  
> took the original tree as argument, in v3 no argument but it doesn't  
> rewind the tree so the original call cannot continue).
> I'm not sure I'm making any sense (pretty late here ;), I'll try and  
> post the complete code tomorrow (btw does this list accept  
> attachments?).
>
>       Ben
>
>
>
> Ter
>>  I understand v3 is supposed to be more generic & flexible  
>> (multiple channels instead of just "hidden or not"), but I just  
>> don't understand what the intended way is for a translation scenario.
>>
>>         Ben
>>
>>
>> On Thu, Jul 2, 2009 at 5:38 PM, James Abley <james.abley at gmail.com>  
>> wrote:
>> 2009/6/24 Benoit Fouletier <benblo+ANTLR at gmail.com>:
>> > Hi!
>> > Newbie to ANTLR here, hello all =).
>> > I'm trying to make a translator from Unity's JavaScript  
>> (sometimes called
>> > UnityScript) to C#. This particular JS implementation is made to  
>> compile to
>> > IL and run on Mono. It's actually based on Boo, the grammar was  
>> written
>> > by Rodrigo B. de Oliveira with ANTLR (don't know which version).
>> > So the 2 languages are very similar, they don't differ in  
>> principle, only in
>> > syntax. I've already achieved a lot with regular expressions but  
>> that just
>> > doesn't seem like the right tool for the job.
>> > 90% of the differences are in variable & function declaration,  
>> the core is
>> > the same.
>> > Basically, I need to translate this:
>> >
>> > function MyFunction(i : int, b : boolean) : String
>> > {
>> >     return i + " " + b;
>> > }
>> >
>> > to this:
>> >
>> > private string MyFunction(int i, boolean b)
>> > {
>> >     return i + " " + b;
>> > }
>> >
>> > I have access to the compiled lexer & parser (but not the  
>> original grammar).
>> > I've tried to go through the token stream and manually rearrange  
>> the
>> > declarations (which works but again, doesn't feel like the best  
>> way to do
>> > it).
>> > The thing is, I want to retain comments & formatting during  
>> translation, but
>> > the lexer doesn't give me the hidden tokens* (and anyway my  
>> little fiddlings
>> > would probably explode!).
>> > Also, I don't need a complete compiler: all the code I want to  
>> translate
>> > already compiles so I know it's valid.
>> >
>> > It seems to me like my needs are fairly simple (!), but I don't  
>> know what
>> > approach to take. If I were to rewrite the grammar (or just  
>> modify the
>> > ECMAScript grammar found here), are there ways to define  
>> translate rules, in
>> > the fashion of regex replacement? Or should I be able to get away  
>> with using
>> > the compiled lexer I have?
>> >
>> > Sorry my post is so long, I hope I've made the context clear.  
>> Cheers =),
>> >
>> >         Ben
>> >
>> > * I've read the token streams article in the v2 docs (it's not in  
>> the v3
>> > docs, is it still valid?), which is very informative...  
>> unfortunately when I
>> > setTokenCreator to a hidden stream, I don't get anything more.
>> > Here's my loop:
>> > UnityScriptLexer lexer = new UnityScriptLexer(file);
>> > lexer.setTokenCreator(new
>> > antlr.CommonHiddenStreamToken.CommonHiddenStreamTokenCreator());
>> >
>> > antlr.IHiddenStreamToken token;
>> > while ((token =  
>> (antlr.IHiddenStreamToken)lexer.nextToken()).Type != EOF)
>> > {
>> >     if (token.getHiddenBefore() != null)
>> >         LogToken(token.getHiddenBefore());   // this never happens
>> >
>> >     LogToken(token);
>> >
>> >     if (token.getHiddenAfter() != null)
>> >         LogToken(token.getHiddenAfter());    // this never happens
>> > }
>> > LogToken() just outputs to the console.
>> >
>> > List: http://www.antlr.org/mailman/listinfo/antlr-interest
>> > Unsubscribe:
>> > http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>> >
>>
>> http://www.antlr.org/wiki/display/ST/Language+Translation+Using+ANTLR+and+StringTemplate
>>
>> That seems to be ANTLR 2. but relevant. You would need a grammar
>> though, rather than just the compiled lexer and parser.
>>
>> The new book is supposed to contain information around this sort of
>> request. Ter might be able to tell more about that.
>>
>> http://www.pragprog.com/titles/tpdsl/language-design-patterns
>>
>> Cheers,
>>
>> James
>>
>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>>
>>
>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>
>


From patrick133t at yahoo.com  Thu Jul  2 14:59:02 2009
From: patrick133t at yahoo.com (Patrick Higgins)
Date: Thu, 2 Jul 2009 14:59:02 -0700 (PDT)
Subject: [antlr-interest] Jira issue ANTLR-378
In-Reply-To: <F46E4666-877D-4A7E-BD7B-17E3F4CA1636@cs.usfca.edu>
References: <106464.61426.qm@web65605.mail.ac4.yahoo.com>
	<F46E4666-877D-4A7E-BD7B-17E3F4CA1636@cs.usfca.edu>
Message-ID: <818048.4400.qm@web65602.mail.ac4.yahoo.com>

I've created the attached patch for issue ANTLR-378. The patch works for me, though I've only tested the changes for a grammar with "language=Java". I didn't find anything on the ANTLR page describing how to submit patches, so I am sending it here. Is there a better way? I also was unable to get maven to run the test suite, so I'm not sure if this patch introduces regressions or not.

--Patrick


----- Original Message ----
From: Terence Parr <parrt at cs.usfca.edu>
To: Patrick Higgins <patrick133t at yahoo.com>
Cc: antlr-interest at antlr.org
Sent: Wednesday, July 1, 2009 5:38:37 PM
Subject: Re: [antlr-interest] Jira issue ANTLR-378

Hi. i'm swamped but try to add description attribute to evalPredicate template (in Java.stg or Dbg.stg I think)
Ter
On Jul 1, 2009, at 3:39 PM, Patrick Higgins wrote:

> 
> Has anyone taken a look at http://www.antlr.org/jira/browse/ANTLR-378 yet? I converted the PL/SQL grammar at http://www.antlr.org/grammar/1209225566284/PLSQL3.g to Java (after applying the fixes mentioned at http://markmail.org/message/mf724z2pfe5rpdrh) and found that it does not parse all of our PL/SQL source properly.
> 
> When I try to use the debugger in ANTLRWorks v1.2.3, I find that this grammar triggers the same exception as issue ANTLR-378.
> 
> I'll try tracking this down if no one has looked at it yet, but I'm not sure how far I'll get.
> 
> Does anyone have other suggestions for how to debug a grammar of the complexity of the PL/SQL grammar without using the ANTLRWorks debugger?
> 
> Thanks,
> Patrick
> 
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
-------------- next part --------------
A non-text attachment was scrubbed...
Name: ANTLR-378.patch
Type: application/octet-stream
Size: 8112 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20090702/849aeff6/attachment.obj 

From parrt at cs.usfca.edu  Thu Jul  2 15:50:32 2009
From: parrt at cs.usfca.edu (Terence Parr)
Date: Thu, 2 Jul 2009 15:50:32 -0700
Subject: [antlr-interest] Jira issue ANTLR-378
In-Reply-To: <818048.4400.qm@web65602.mail.ac4.yahoo.com>
References: <106464.61426.qm@web65605.mail.ac4.yahoo.com>
	<F46E4666-877D-4A7E-BD7B-17E3F4CA1636@cs.usfca.edu>
	<818048.4400.qm@web65602.mail.ac4.yahoo.com>
Message-ID: <664A8234-DD93-4F38-B6CD-C206E99C8FBC@cs.usfca.edu>

thanks...added to jira.
T
On Jul 2, 2009, at 2:59 PM, Patrick Higgins wrote:

> I've created the attached patch for issue ANTLR-378. The patch works  
> for me, though I've only tested the changes for a grammar with  
> "language=Java". I didn't find anything on the ANTLR page describing  
> how to submit patches, so I am sending it here. Is there a better  
> way? I also was unable to get maven to run the test suite, so I'm  
> not sure if this patch introduces regressions or not.
>
> --Patrick
>
>
> ----- Original Message ----
> From: Terence Parr <parrt at cs.usfca.edu>
> To: Patrick Higgins <patrick133t at yahoo.com>
> Cc: antlr-interest at antlr.org
> Sent: Wednesday, July 1, 2009 5:38:37 PM
> Subject: Re: [antlr-interest] Jira issue ANTLR-378
>
> Hi. i'm swamped but try to add description attribute to  
> evalPredicate template (in Java.stg or Dbg.stg I think)
> Ter
> On Jul 1, 2009, at 3:39 PM, Patrick Higgins wrote:
>
>>
>> Has anyone taken a look at http://www.antlr.org/jira/browse/ 
>> ANTLR-378 yet? I converted the PL/SQL grammar at http://www.antlr.org/grammar/1209225566284/PLSQL3.g 
>>  to Java (after applying the fixes mentioned at http://markmail.org/message/mf724z2pfe5rpdrh) 
>>  and found that it does not parse all of our PL/SQL source properly.
>>
>> When I try to use the debugger in ANTLRWorks v1.2.3, I find that  
>> this grammar triggers the same exception as issue ANTLR-378.
>>
>> I'll try tracking this down if no one has looked at it yet, but I'm  
>> not sure how far I'll get.
>>
>> Does anyone have other suggestions for how to debug a grammar of  
>> the complexity of the PL/SQL grammar without using the ANTLRWorks  
>> debugger?
>>
>> Thanks,
>> Patrick
>>
>>
>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
> <ANTLR-378.patch>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address


From g.r.vansickle at att.net  Thu Jul  2 22:47:30 2009
From: g.r.vansickle at att.net (Gary R. Van Sickle)
Date: Fri, 3 Jul 2009 00:47:30 -0500
Subject: [antlr-interest] Ambiguous grammar or Antlr?
In-Reply-To: <4A4CD625.6050007@temporal-wave.com>
References: <5f59a7210907020109r5b8c22c2wcf6c9fec4be7c51d@mail.gmail.com>
	<4A4CD625.6050007@temporal-wave.com>
Message-ID: <4A75D13F00664DC8BA09F05E16D47DF5@DFW5RB41>

Jim Idle wrote:

[snip] 
> Even with backtracking, you still need to know something 
> about LL(k) and parsing etc, and switching on backtrack mode 
> will hide all your problems. It also means, as you have found 
> out, that in the event of a syntax error, you cannot 
> determine much  about the location of your error.
> 
> Basically, you will need to left factor at least some parts 
> of your grammar. In this case, if you have something like:
> 
> | ID
> | ID '(' expr ')'
> | ID something else
> 
> and (probably more complicated than that is your issue), then 
> look to do:
> 
> | ID (  '(' expr
>          | something
>       )?
> 
> and so on.

But isn't the whole point of LL(*) to eliminate the need to do exactly this
sort of left-factoring?  Section 11.3 of Ter's book gives essentially the
former as an example of why LL(*) makes it so you don't have to do a manual
refactoring such as the latter.  In fact, that section makes the argument
that one should *not* do the left-factoring manually, if for no other reason
than to maintain the readability of the grammar.

-- 
Gary R. Van Sickle
 


From lgcraymer at yahoo.com  Thu Jul  2 23:44:26 2009
From: lgcraymer at yahoo.com (Loring Craymer)
Date: Thu, 2 Jul 2009 23:44:26 -0700 (PDT)
Subject: [antlr-interest] Ambiguous grammar or Antlr?
In-Reply-To: <4A75D13F00664DC8BA09F05E16D47DF5@DFW5RB41>
References: <5f59a7210907020109r5b8c22c2wcf6c9fec4be7c51d@mail.gmail.com>
	<4A4CD625.6050007@temporal-wave.com>
	<4A75D13F00664DC8BA09F05E16D47DF5@DFW5RB41>
Message-ID: <217735.38713.qm@web55902.mail.re3.yahoo.com>


Don't believe everything you read--excessive optimism is the developer's friend, and Ter was in the full throes of developing ANTLR when he wrote TDAR.  Refactoring is a normal (and usually critical) part of grammar development; Jim was offering good advice.

--Loring


----- Original Message ----
> From: Gary R. Van Sickle <g.r.vansickle at att.net>
> To: antlr-interest at antlr.org
> Sent: Thursday, July 2, 2009 10:47:30 PM
> Subject: Re: [antlr-interest] Ambiguous grammar or Antlr?
> 
> Jim Idle wrote:
> 
> [snip] 
> > Even with backtracking, you still need to know something 
> > about LL(k) and parsing etc, and switching on backtrack mode 
> > will hide all your problems. It also means, as you have found 
> > out, that in the event of a syntax error, you cannot 
> > determine much  about the location of your error.
> > 
> > Basically, you will need to left factor at least some parts 
> > of your grammar. In this case, if you have something like:
> > 
> > | ID
> > | ID '(' expr ')'
> > | ID something else
> > 
> > and (probably more complicated than that is your issue), then 
> > look to do:
> > 
> > | ID (  '(' expr
> >          | something
> >       )?
> > 
> > and so on.
> 
> But isn't the whole point of LL(*) to eliminate the need to do exactly this
> sort of left-factoring?  Section 11.3 of Ter's book gives essentially the
> former as an example of why LL(*) makes it so you don't have to do a manual
> refactoring such as the latter.  In fact, that section makes the argument
> that one should *not* do the left-factoring manually, if for no other reason
> than to maintain the readability of the grammar.
> 
> -- 
> Gary R. Van Sickle
> 
> 
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: 
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address



      

From antlr at mirality.co.nz  Fri Jul  3 03:52:02 2009
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Fri, 03 Jul 2009 22:52:02 +1200
Subject: [antlr-interest] Ambiguous grammar or Antlr?
In-Reply-To: <4A75D13F00664DC8BA09F05E16D47DF5@DFW5RB41>
References: <5f59a7210907020109r5b8c22c2wcf6c9fec4be7c51d@mail.gmail.com>
	<4A4CD625.6050007@temporal-wave.com>
	<4A75D13F00664DC8BA09F05E16D47DF5@DFW5RB41>
Message-ID: <20090703105213.4B7F1341841A@www.antlr.org>

At 17:47 3/07/2009, Gary R. Van Sickle wrote:
 >But isn't the whole point of LL(*) to eliminate the need to do
 >exactly this sort of left-factoring?  Section 11.3 of Ter's
 >book gives essentially the former as an example of why LL(*)
 >makes it so you don't have to do a manual refactoring such
 >as the latter.

ANTLR v3 is *much* better at dealing with left-commonality than v2 
was, but it's still not perfect.  And the parser is better at it 
than the lexer.

But regardless, an LL(1)-safe lexer/parser will always give you 
better performance than something that requires a higher k, so 
left-factoring is usually beneficial anyway.

The main feature of LL(*) in ANTLR is that it automatically 
decides on an alt-by-alt basis what to set k to; it chooses the 
minimum it thinks it can get away with (unlike in v2, where you 
had to work it out yourself, or more commonly just set it at the 
global level and live with the performance loss).  Unfortunately, 
loops confuse it, and if the grammar isn't factored properly then 
it can sometimes choose too low a value.


From Sebastian.Zarnekow at itemis.de  Fri Jul  3 06:59:25 2009
From: Sebastian.Zarnekow at itemis.de (Sebastian Zarnekow)
Date: Fri, 3 Jul 2009 15:59:25 +0200
Subject: [antlr-interest] Lexer options in composite grammar
Message-ID: <049A4466-7176-4972-A2B8-EBFB781D3158@itemis.de>

Hi,

is it possible to define lexer options in a composite grammar? I tried  
to find something about this in The Definite ANTLR Reference, but  
didn't succeed.

I'ld like to enable backtracking for the lexer, because currently the  
parser fails to distinguish between three keywords when two of them  
are together a prefix of the third one. I can imagine, that a lexer  
that does backtracking will solve this issue.

Regards,
Sebastian


From parrt at cs.usfca.edu  Fri Jul  3 09:39:25 2009
From: parrt at cs.usfca.edu (Terence Parr)
Date: Fri, 3 Jul 2009 09:39:25 -0700
Subject: [antlr-interest] Ambiguous grammar or Antlr?
In-Reply-To: <217735.38713.qm@web55902.mail.re3.yahoo.com>
References: <5f59a7210907020109r5b8c22c2wcf6c9fec4be7c51d@mail.gmail.com>
	<4A4CD625.6050007@temporal-wave.com>
	<4A75D13F00664DC8BA09F05E16D47DF5@DFW5RB41>
	<217735.38713.qm@web55902.mail.re3.yahoo.com>
Message-ID: <E2707EBB-69B5-4209-AE73-D43BAC02121B@cs.usfca.edu>


On Jul 2, 2009, at 11:44 PM, Loring Craymer wrote:
> Don't believe everything you read--excessive optimism is the  
> developer's friend, and Ter was in the full throes of developing  
> ANTLR when he wrote TDAR.

bullshit.

>  Refactoring is a normal (and usually critical) part of grammar  
> development; Jim was offering good advice.

not bullshit



From parrt at cs.usfca.edu  Fri Jul  3 11:00:03 2009
From: parrt at cs.usfca.edu (Terence Parr)
Date: Fri, 3 Jul 2009 11:00:03 -0700
Subject: [antlr-interest] Lexer options in composite grammar
In-Reply-To: <049A4466-7176-4972-A2B8-EBFB781D3158@itemis.de>
References: <049A4466-7176-4972-A2B8-EBFB781D3158@itemis.de>
Message-ID: <4AFF47BA-FB57-4604-AA34-492BD83A205E@cs.usfca.edu>

hi. it's a known bug. see bug list.
Ter
On Jul 3, 2009, at 6:59 AM, Sebastian Zarnekow wrote:

> Hi,
>
> is it possible to define lexer options in a composite grammar? I tried
> to find something about this in The Definite ANTLR Reference, but
> didn't succeed.
>
> I'ld like to enable backtracking for the lexer, because currently the
> parser fails to distinguish between three keywords when two of them
> are together a prefix of the third one. I can imagine, that a lexer
> that does backtracking will solve this issue.
>
> Regards,
> Sebastian
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address


From cmundi at gmail.com  Fri Jul  3 18:03:46 2009
From: cmundi at gmail.com (C. Mundi)
Date: Fri, 3 Jul 2009 18:03:46 -0700
Subject: [antlr-interest] Minor notes on sources for CSharp
Message-ID: <e794390907031803r5a11d908mc15cff5fb19c8ffb@mail.gmail.com>

I just moved up to 3.1.3.  Since I started with a fresh tarball, this
provided an opportunity to take some minor notes which might help others.
Based on experience with some earlier releases, I expected to find a lot
more.  I actually found very little.  (Yeah!  Awesome job!)

(1) TreeVisitor.cs does not include the BSD license.  This seems like an
oversight, but is it actually on purpose?

(2) The XML summary for CommonTree.SetUnknownTokenBoundaries contains a
less-than symbol which fools Mono's C#.
     This may very well be a defect in either Mono or the C# standard;
wahtever the case, it's easy to avoid once noticed.
     It's only a warning anyway.

(3) For .NET the compiler directives expect the strong-naming keys to be two
levels above the directory containing the solution file.
     By contrast, for NANT the comiler directives expect the keys to be
where they actually are -- with the solution file.
     Maybe there Is there a reason for this?

For what its worth I did this using Mono.  (I use Visual Studio at work ,
but not at home.)

If there is a more appropriate forum for notes like this, please tell me.

Carlos
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090703/16859688/attachment.html 

From tommy.nordgren at comhem.se  Sun Jul  5 07:54:24 2009
From: tommy.nordgren at comhem.se (Tommy Nordgren)
Date: Sun, 5 Jul 2009 16:54:24 +0200
Subject: [antlr-interest] Building Objective C Runtime and Xcode Plugin
Message-ID: <ECAC280C-40DC-49A5-A05C-F3C64C178F81@comhem.se>

How do you build the Runtime framework for Objective C?
The file ANTLRLexer.m refers to several undefined identifiers, causing  
compilations to fail.
Also, there are many warnings for the other files in the project.
	Also the .pbxproj file inside the .xcodeproj is readonly, causing a  
warning when the project is closed.
Another point: The classes need to implement the finalize method, to  
properly clean up under Garbage Collection.
-------------------------------------
This sig is dedicated to the advancement of Nuclear Power
Tommy Nordgren
tommy.nordgren at comhem.se





From bbain at atlassian.com  Sun Jul  5 22:10:13 2009
From: bbain at atlassian.com (Brenden Bain)
Date: Mon, 6 Jul 2009 15:10:13 +1000
Subject: [antlr-interest] Maven2 ANTLRv3 Errors
Message-ID: <00FC5A2F-9564-441A-85FB-0D6B121010E5@atlassian.com>

Hello,

We are having trouble with the "antlr3-maven-plugin". It does this:

> [INFO] [antlr3:antlr {execution: default}]
> [INFO] ANTLR: Processing source directory /Users/bbain/src/atlassian/ 
> jira/src/grammar
> ANTLR Parser Generator  Version 3.1.3 Mar 17, 2009 19:23:44
> error(10):  internal error:  : java.io.FileNotFoundException: / 
> xxxxxxx/src/grammar/null/Test.g (No such file or directory)
> java.io.FileInputStream.open(Native Method)
> java.io.FileInputStream.<init>(FileInputStream.java:106)
> java.io.FileInputStream.<init>(FileInputStream.java:66)
> java.io.FileReader.<init>(FileReader.java:41)
> org.antlr.tool.GrammarSpelunker.parse(GrammarSpelunker.java:79)
> org.antlr.Tool.sortGrammarFiles(Tool.java:525)
> org.antlr.Tool.process(Tool.java:383)
> org.antlr.mojo.antlr3.Antlr3Mojo.execute(Antlr3Mojo.java:372)
> org 
> .apache 
> .maven 
> .plugin.DefaultPluginManager.executeMojo(DefaultPluginManager.java: 
> 451)
> org 
> .apache 
> .maven 
> .lifecycle 
> .DefaultLifecycleExecutor.executeGoals(DefaultLifecycleExecutor.java: 
> 558)
> org 
> .apache 
> .maven 
> .lifecycle 
> .DefaultLifecycleExecutor 
> .executeGoalWithLifecycle(DefaultLifecycleExecutor.java:499)
> org 
> .apache 
> .maven 
> .lifecycle 
> .DefaultLifecycleExecutor.executeGoal(DefaultLifecycleExecutor.java: 
> 478)
> org 
> .apache 
> .maven 
> .lifecycle 
> .DefaultLifecycleExecutor 
> .executeGoalAndHandleFailures(DefaultLifecycleExecutor.java:330)
> org 
> .apache 
> .maven 
> .lifecycle 
> .DefaultLifecycleExecutor 
> .executeTaskSegments(DefaultLifecycleExecutor.java:291)
> org 
> .apache 
> .maven 
> .lifecycle 
> .DefaultLifecycleExecutor.execute(DefaultLifecycleExecutor.java:142)
> org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:336)
> org.apache.maven.DefaultMaven.execute(DefaultMaven.java:129)
> org.apache.maven.cli.MavenCli.main(MavenCli.java:287)
> sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
> sun 
> .reflect 
> .NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
> sun 
> .reflect 
> .DelegatingMethodAccessorImpl 
> .invoke(DelegatingMethodAccessorImpl.java:25)
> java.lang.reflect.Method.invoke(Method.java:585)
> org.codehaus.classworlds.Launcher.launchEnhanced(Launcher.java:315)
> org.codehaus.classworlds.Launcher.launch(Launcher.java:255)
> org.codehaus.classworlds.Launcher.mainWithExitCode(Launcher.java:430)
> org.codehaus.classworlds.Launcher.main(Launcher.java:375)

The problem is that our grammar to within the root  of the  
"sourceDirectory". Here is our mvn configuration:

> <plugin>
>    <groupId>org.antlr</groupId>
>    <artifactId>antlr3-maven-plugin</artifactId>
>    <version>3.1.3-1</version>
>    <executions>
>        <execution>
>            <phase>generate-sources</phase>
>            <goals>
>                <goal>antlr</goal>
>            </goals>
>            <configuration>
>                <sourceDirectory>src/grammar</sourceDirectory>
>            </configuration>
>        </execution>
>    </executions>
> </plugin>

The Antlr3Mojo.findSourceSubdir does not take into account when the  
grammar file is in the root of the sourceDirectory and will return  
"null/Test.g". Any chance of getting this fixed?

Thanks,
Brenden.

From antlr at systemstart.net  Mon Jul  6 04:47:49 2009
From: antlr at systemstart.net (alexander)
Date: Mon, 06 Jul 2009 13:47:49 +0200
Subject: [antlr-interest] stringtemplate & tree walkers
In-Reply-To: <068CF8FD-C1E6-4423-B0ED-78A0F5FBBC43@cs.usfca.edu>
References: <068CF8FD-C1E6-4423-B0ED-78A0F5FBBC43@cs.usfca.edu>
Message-ID: <4A51E465.4060201@systemstart.net>

hi.

>On Jun 16, 2009, at 9:59 AM, Arnulf Heller wrote:

>> hi there,
>>
>> are there any complex examples of tree walkers emitting
>> stringtemplates?

>The source of antlr itself :)

>Ter

can you give a more detailed location for this? my lazyness prevents me
from reading *all* the sources of antlr ;)

i want to emit an xml-dialect from a tree-walker/grammar and i can't
find a good start.

thanks in advance

alexander


From linlin.xie at siemens.com  Mon Jul  6 09:37:05 2009
From: linlin.xie at siemens.com (Xie, Linlin)
Date: Mon, 6 Jul 2009 18:37:05 +0200
Subject: [antlr-interest] how to exit parser?
Message-ID: <79118B9FE8CE8E49B0D71964A79CB6470283FBAF@dekomplm002.net.plm.eds.com>

Hi Jim,

 

I would like to exit the parser upon some errors. How can I do it with
the C version of antlr?

 

Thanks!

Regards,

Linlin

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090706/f1e29512/attachment.html 

From jimi at temporal-wave.com  Mon Jul  6 12:04:29 2009
From: jimi at temporal-wave.com (Jim Idle)
Date: Mon, 06 Jul 2009 12:04:29 -0700
Subject: [antlr-interest] Maven2 ANTLRv3 Errors
In-Reply-To: <00FC5A2F-9564-441A-85FB-0D6B121010E5@atlassian.com>
References: <00FC5A2F-9564-441A-85FB-0D6B121010E5@atlassian.com>
Message-ID: <4A524ABD.60906@temporal-wave.com>

An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090706/46f6bbee/attachment.html 

From jimi at temporal-wave.com  Mon Jul  6 12:07:23 2009
From: jimi at temporal-wave.com (Jim Idle)
Date: Mon, 06 Jul 2009 12:07:23 -0700
Subject: [antlr-interest] how to exit parser?
In-Reply-To: <79118B9FE8CE8E49B0D71964A79CB6470283FBAF@dekomplm002.net.plm.eds.com>
References: <79118B9FE8CE8E49B0D71964A79CB6470283FBAF@dekomplm002.net.plm.eds.com>
Message-ID: <4A524B6B.3030703@temporal-wave.com>

An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090706/c1154b00/attachment.html 

From parrt at cs.usfca.edu  Mon Jul  6 15:22:36 2009
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon, 6 Jul 2009 15:22:36 -0700
Subject: [antlr-interest] stringtemplate & tree walkers
In-Reply-To: <4A51E465.4060201@systemstart.net>
References: <068CF8FD-C1E6-4423-B0ED-78A0F5FBBC43@cs.usfca.edu>
	<4A51E465.4060201@systemstart.net>
Message-ID: <5F0762A3-5E98-404D-AB45-26B3717B6D2B@cs.usfca.edu>

well, sure. :)  Here's a better pointer: grep for  
StringTemplateGroup.  Should be in key places and in  
CodeGenerator.java :)
Ter
On Jul 6, 2009, at 4:47 AM, alexander wrote:

> hi.
>
>> On Jun 16, 2009, at 9:59 AM, Arnulf Heller wrote:
>
>>> hi there,
>>>
>>> are there any complex examples of tree walkers emitting
>>> stringtemplates?
>
>> The source of antlr itself :)
>
>> Ter
>
> can you give a more detailed location for this? my lazyness prevents  
> me
> from reading *all* the sources of antlr ;)
>
> i want to emit an xml-dialect from a tree-walker/grammar and i can't
> find a good start.
>
> thanks in advance
>
> alexander
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address


From parrt at cs.usfca.edu  Mon Jul  6 15:39:54 2009
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon, 6 Jul 2009 15:39:54 -0700
Subject: [antlr-interest] stringtemplate & tree walkers
In-Reply-To: <5F0762A3-5E98-404D-AB45-26B3717B6D2B@cs.usfca.edu>
References: <068CF8FD-C1E6-4423-B0ED-78A0F5FBBC43@cs.usfca.edu>
	<4A51E465.4060201@systemstart.net>
	<5F0762A3-5E98-404D-AB45-26B3717B6D2B@cs.usfca.edu>
Message-ID: <A6749D1F-8C68-4B55-B088-B93E27A5AD59@cs.usfca.edu>

also codegen.g
On Jul 6, 2009, at 3:22 PM, Terence Parr wrote:

> well, sure. :)  Here's a better pointer: grep for
> StringTemplateGroup.  Should be in key places and in
> CodeGenerator.java :)
> Ter
> On Jul 6, 2009, at 4:47 AM, alexander wrote:
>
>> hi.
>>
>>> On Jun 16, 2009, at 9:59 AM, Arnulf Heller wrote:
>>
>>>> hi there,
>>>>
>>>> are there any complex examples of tree walkers emitting
>>>> stringtemplates?
>>
>>> The source of antlr itself :)
>>
>>> Ter
>>
>> can you give a more detailed location for this? my lazyness prevents
>> me
>> from reading *all* the sources of antlr ;)
>>
>> i want to emit an xml-dialect from a tree-walker/grammar and i can't
>> find a good start.
>>
>> thanks in advance
>>
>> alexander
>>
>>
>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address


From antlr.fan at googlemail.com  Tue Jul  7 03:03:57 2009
From: antlr.fan at googlemail.com (Bob Night)
Date: Tue, 7 Jul 2009 11:03:57 +0100
Subject: [antlr-interest] operator inside a string
Message-ID: <1a1f14b10907070303u28d88594gbafae5d1f11a7cb6@mail.gmail.com>

Hi!
I have a following grammar. Most of the time it works fine. The problem
begins when I try to parse a string like this one:

"test_input OPERATOR another_test_input"

The operator inside quotes is still recognized as a OPERATOR token, while
I'd like it to be recognized as a WORD token that is part of the quote.

grammar test;
start_rule    :    expr (OPERATOR expr)* EOF;
expr    :  quote | WORD;
quote   :    '"' WORD+ '"';
OPERATOR : 'OPERATOR';
WORD     :    ('a'..'z'|'A'..'Z')+;

Any suggestions?

Thanks for any help,
Bob
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090707/77b3bca9/attachment.html 

From safisce at gmail.com  Tue Jul  7 06:10:38 2009
From: safisce at gmail.com (Safiye Celik)
Date: Tue, 7 Jul 2009 16:10:38 +0300
Subject: [antlr-interest] parse tree construction after left recursion
	removal
Message-ID: <bbf7e7d50907070610l6d3d7c90x2ce914eb3c2471a5@mail.gmail.com>

Hi,
I have a rule and its tree construction such below:
a : b | c! a c! | a d^ a
I apply left recursion removal algorithm and convert above rule to below two
rules:
a : b a' | c a c a'
a' : (d a a')?
But now, I cannot create the parse tree I want. That's, I want "a : a d a"
rule in the first case, to have 'd' as the root of the two 'a's. But in the
two-rule case after the left recursion removal, I cannot provide this tree.
What should I do to remove left recursion, but also provide the tree I need?
I would be glad if you have an idea and share it with me.


-- 
-safiye
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090707/d161a0a5/attachment.html 

From antlr at mirality.co.nz  Tue Jul  7 06:34:33 2009
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Wed, 08 Jul 2009 01:34:33 +1200
Subject: [antlr-interest] parse tree construction after left recursion
 removal
In-Reply-To: <bbf7e7d50907070610l6d3d7c90x2ce914eb3c2471a5@mail.gmail.co
 m>
References: <bbf7e7d50907070610l6d3d7c90x2ce914eb3c2471a5@mail.gmail.com>
Message-ID: <20090707133446.116623418442@www.antlr.org>

At 01:10 8/07/2009, Safiye Celik wrote:
>I have a rule and its tree construction such below:
>a : b | c! a c! | a d^ a
[...]
>What should I do to remove left recursion, but also provide the 
>tree I need?

Try this:

a : (b | c! a c!) (d^ a)? ;

Or this:

e : b | c! a c! ;
a : e (d^ e)* ;

(The recursion in the c alt is ok at parse time.  But it might 
make things difficult for you in the tree parser.  Could be 
helpful to insert an imaginary root at that point.)


From antlr at mirality.co.nz  Tue Jul  7 06:38:48 2009
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Wed, 08 Jul 2009 01:38:48 +1200
Subject: [antlr-interest] operator inside a string
In-Reply-To: <1a1f14b10907070303u28d88594gbafae5d1f11a7cb6@mail.gmail.co
 m>
References: <1a1f14b10907070303u28d88594gbafae5d1f11a7cb6@mail.gmail.com>
Message-ID: <20090707133907.CC95B3418442@www.antlr.org>

At 22:03 7/07/2009, Bob Night wrote:
>I have a following grammar. Most of the time it works fine. The 
>problem begins when I try to parse a string like this one:
>
>"test_input OPERATOR another_test_input"
>
>The operator inside quotes is still recognized as a OPERATOR 
>token, while I'd like it to be recognized as a WORD token that is 
>part of the quote.
>
>grammar test;
>start_rule    :    expr (OPERATOR expr)* EOF;
>expr    :  quote | WORD;
>quote   :    '"' WORD+ '"';
>OPERATOR : 'OPERATOR';
>WORD     :    ('a'..'z'|'A'..'Z')+;

Unless the intent of this grammar is specifically to break the 
strings into WORDs, then you should probably change quote into a 
lexer rule like so:

   QUOTE : '"' (~'"')* '"' ;

This will produce a single QUOTE token for the entire quoted text 
(including the quotes themselves), regardless of whether the text 
contains keywords, symbols, or other things that aren't valid 
WORDs (like digits).


From jsrs701 at yahoo.com  Tue Jul  7 06:44:01 2009
From: jsrs701 at yahoo.com (J. Stephen Riley Silber)
Date: Tue, 7 Jul 2009 06:44:01 -0700 (PDT)
Subject: [antlr-interest] Collecting disparate subtrees into one  tree?
Message-ID: <720447.37567.qm@web33305.mail.mud.yahoo.com>


And if it doesn't, you can try the more explicit variant:

code : (p+=proc | f+=func)*
? -> ^(CODE ^(PROCS $p*) ^(FUNCS $f*))
? ;

(Or leave out the PROCS/FUNCS nodes if you just want to reorder the procedures/functions without actually grouping them in a subtree.)
The Real World interfered for a bit, so it took me a while to try this out, but it worked like a champ.? Thanks, Gavin!

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090707/d6a26c5a/attachment.html 

From jsrs701 at yahoo.com  Tue Jul  7 17:51:17 2009
From: jsrs701 at yahoo.com (J. Stephen Riley Silber)
Date: Tue, 7 Jul 2009 17:51:17 -0700 (PDT)
Subject: [antlr-interest] ANTLRWorks question
Message-ID: <631056.95643.qm@web33307.mail.mud.yahoo.com>

Hi gang,

(BTW, is there a different mailing list for ANTLRWorks questions?)

If not, I'm having a bit of trouble with breakpoint debugging.? I saw an item in a version's release notes saying that you could set a breakpoint on the input text or in the grammar.? I figured out how to do the input text, but I can't figure out how to set the breakpoint in the grammar.

Is there a page somewhere that talks about this?? If not, can someone give me a hint as to how to do this?

Thanks much,
--S
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090707/653ded16/attachment.html 

From bbain at atlassian.com  Tue Jul  7 18:40:10 2009
From: bbain at atlassian.com (Brenden Bain)
Date: Wed, 8 Jul 2009 11:40:10 +1000
Subject: [antlr-interest] Do Lexer rules allow catch?
Message-ID: <D5DE8AB6-B69F-4948-8D5F-ABBA410C439D@atlassian.com>

Hello,

Should it possible to add "catch" elements to lexer rules?

Consider the following with a Lexer rule:

> INT:
>    '0'..'9'+
>    ;
>    catch [RecognitionException e]
>    {
>        System.out.println("Houston, we've had a problem.");
>    }

When I try to process the grammar I get the following exception (also  
attached):

> java.util.NoSuchElementException: no such attribute: exceptions in  
> template context [lexerRule]
> org 
> .antlr 
> .stringtemplate.StringTemplate.rawSetAttribute(StringTemplate.java: 
> 647)
> org 
> .antlr 
> .stringtemplate.StringTemplate.setAttribute(StringTemplate.java:508)
> org 
> .antlr 
> .stringtemplate.StringTemplate.setAttribute(StringTemplate.java:590)
> org 
> .antlr 
> .stringtemplate.StringTemplate.setAttribute(StringTemplate.java:551)
> org 
> .antlr 
> .grammar 
> .v2.CodeGenTreeWalker.exceptionHandler(CodeGenTreeWalker.java:1479)
> org 
> .antlr 
> .grammar.v2.CodeGenTreeWalker.exceptionGroup(CodeGenTreeWalker.java: 
> 1150)
> org.antlr.grammar.v2.CodeGenTreeWalker.rule(CodeGenTreeWalker.java: 
> 849)
> org.antlr.grammar.v2.CodeGenTreeWalker.rules(CodeGenTreeWalker.java: 
> 588)
> org 
> .antlr 
> .grammar.v2.CodeGenTreeWalker.grammarSpec(CodeGenTreeWalker.java:530)
> org 
> .antlr.grammar.v2.CodeGenTreeWalker.grammar(CodeGenTreeWalker.java: 
> 312)
> org.antlr.codegen.CodeGenerator.genRecognizer(CodeGenerator.java:429)
> org.antlr.Tool.generateRecognizer(Tool.java:607)
> org.antlr.Tool.process(Tool.java:484)
> org.antlr.Tool.main(Tool.java:91)

Thanks,
Brenden.

-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: error.txt
Url: http://www.antlr.org/pipermail/antlr-interest/attachments/20090708/4b942b7c/attachment.txt 
-------------- next part --------------


From asalh at mindspring.com  Tue Jul  7 19:53:59 2009
From: asalh at mindspring.com (Bryan S Follins)
Date: Tue, 7 Jul 2009 19:53:59 -0700
Subject: [antlr-interest] Python
Message-ID: <009c01c9ff77$57ed2440$07c76cc0$@com>

Can ANTLRWorks be configured to use Python?

 

Bryan

 

"When you have eliminated the impossible, whatever remains, however
improbable, must be the truth."

--Sherlock Holmes from Sir Arthur Conan Doyle's The Sign of Four.

 

I AM an information warrior...

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090707/c70eeb9c/attachment.html 

From asalh at mindspring.com  Tue Jul  7 20:14:08 2009
From: asalh at mindspring.com (Bryan S Follins)
Date: Tue, 7 Jul 2009 20:14:08 -0700
Subject: [antlr-interest] ANTLRWorks 2.77 to 3.0
Message-ID: <00aa01c9ff7a$28e418e0$7aac4aa0$@com>

I have WinXP 2003 Home edition.  I already have ANTLRWorks 2.77 on my
computer with appropriate classpaths.  Can I upload 3.0 to my computer
without making any major reconfigurations?

 

Bryan

 

"When you have eliminated the impossible, whatever remains, however
improbable, must be the truth."

--Sherlock Holmes from Sir Arthur Conan Doyle's The Sign of Four.

 

I AM an information warrior...

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090707/dcdd4b8d/attachment.html 

From asalh at mindspring.com  Tue Jul  7 22:50:53 2009
From: asalh at mindspring.com (Bryan S Follins)
Date: Tue, 7 Jul 2009 22:50:53 -0700
Subject: [antlr-interest] Novice
Message-ID: <00ca01c9ff90$0e2af6c0$2a80e440$@com>

I am a grad student taking a programming languages class in which I use
ANTLRWorks.  How, as a novice, would ANTLRWorks affect me in day to day
life??

 

Bryan

 

"When you have eliminated the impossible, whatever remains, however
improbable, must be the truth."

--Sherlock Holmes from Sir Arthur Conan Doyle's The Sign of Four.

 

I AM an information warrior...

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090707/ec9d1163/attachment.html 

From antlr at mirality.co.nz  Wed Jul  8 02:59:15 2009
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Wed, 08 Jul 2009 21:59:15 +1200
Subject: [antlr-interest] operator inside a string
In-Reply-To: <1a1f14b10907080231p7cb96b9fnc99390bcc67d96a9@mail.gmail.co
 m>
References: <1a1f14b10907070303u28d88594gbafae5d1f11a7cb6@mail.gmail.com>
	<4a534ffb.1b02be0a.3cc1.ffffacd6SMTPIN_ADDED@mx.google.com>
	<1a1f14b10907080231p7cb96b9fnc99390bcc67d96a9@mail.gmail.com>
Message-ID: <20090708095928.115043418442@www.antlr.org>

At 21:31 8/07/2009, Bob Night wrote:
>Thanks! That solved my problem.
>
>But to be honest I still don't understand what causes the change 
>of behaviour.

Maybe you need to read the book :)  Or possibly just the wiki.

Lexer rules start with an uppercase letter.  Parser rules start 
with a lowercase letter.  Lexer rules turn characters into 
tokens.  Parser rules turn tokens into trees, or generate 
templated output, or carry out other actions.

The spaces were disappearing because they were turning into WS 
tokens (which were hidden), since to the parser, all lexer rules 
are equal.  By making a lexer rule that outputs a single token, it 
preserves everything in the quotes regardless of any other lexer 
rules.


From jeroen.v.schagen at gmail.com  Wed Jul  8 03:33:04 2009
From: jeroen.v.schagen at gmail.com (Jeroen van Schagen)
Date: Wed, 8 Jul 2009 12:33:04 +0200
Subject: [antlr-interest] Type-checking and compiling a language with import
	constructs
Message-ID: <cabba3130907080333i18ff870fyce6090911d123f85@mail.gmail.com>

Hello,

Currently I'm working on the implementation of a mark-up DSL using ANTLR.
This language makes use of module definitions and import constructs. What
would be the optimal approach to loading contents of dependent modules in my
AST?

The parser grammar is as follows:
module:         'module' moduleId ( imprt | site | function )* 'end' EOF ;
moduleId:      IDENTIFIER ( '.' IDENTIFIER )* ;
imprt:             'import' moduleId ';' ;

Thanks in advance!
Jeroen
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090708/fefdd8f1/attachment.html 

From gustaf.j at gmail.com  Wed Jul  8 04:59:08 2009
From: gustaf.j at gmail.com (Gustaf Johansson)
Date: Wed, 8 Jul 2009 13:59:08 +0200
Subject: [antlr-interest] Implementation decision help
Message-ID: <5f59a7210907080459u2fea16e1k828d590d67472288@mail.gmail.com>

Hello!

I am trying to implement the ETSI TTCN-3 BNF into Antlr.
The major part is done and working as it should but there are some
quirks which i don't know how to solve.

I have rules like this:
stm : stmGroup1 | stmGroup2 ... | stmGroupX;

And all/some of these stmGroup's can start with the same type of
token, but they are distinguishable by some token along the line
further down the parse tree.

I have tried to solve this by using backtrack=true which didn't work.

My current solution is a specific order of the stmGroup's and a few
syntactic predicates. But i don't like this solution since i don't
know if it will work for all possible input (the grammar is really
complex).

Basically what i want to accomplish is make Antlr try all of the rules
in "stm" and only report error if none of them matches. Currently it
reports errors even though a rule later in the list will match the
input completely, just because the rule reporting the error matches it
partly.

The only solution other then syntactic predicates and backtrack i can
think of is to combine the stmGroup's into a rule which has truly
distinctive paths depending on the next token.
Is this the way to do it?
It will require a huge amount of work since all the stmGroup's are
quite large and complex themselves. Also it will make the grammar
almost unreadable.



An example of a problematic rule is:
http://www.trex.informatik.uni-goettingen.de/trac/wiki/ttcn-3_4.0.4#FunctionStatement

These are two parts of that problem:
-> ConfigurationStatements -> StartTCStatement
-> TimerStatements -> StartTimerStatement

PS. backtrack is not used at all in the grammar.

BR Gustaf

From lgcraymer at yahoo.com  Wed Jul  8 06:02:49 2009
From: lgcraymer at yahoo.com (Loring Craymer)
Date: Wed, 8 Jul 2009 06:02:49 -0700 (PDT)
Subject: [antlr-interest] Implementation decision help
In-Reply-To: <5f59a7210907080459u2fea16e1k828d590d67472288@mail.gmail.com>
References: <5f59a7210907080459u2fea16e1k828d590d67472288@mail.gmail.com>
Message-ID: <888931.33765.qm@web55901.mail.re3.yahoo.com>


Grammars like this one have usually been developed with LR tools (yacc, bison, ...) and have been right-factored.  What you want is to left-factor the grammar (not just inline the stmtXX bodies as you describe, but also extract new rules to avoid having single large rules.  ANTLRWorks can help.

I also suggest writing a BNF translator to do the initial grammar conversion.  Such translators tend to be quite small (100-300 lines) and are a lot less work than doing the initial conversion by hand.

--Loring



----- Original Message ----
> From: Gustaf Johansson <gustaf.j at gmail.com>
> To: antlr-interest at antlr.org
> Sent: Wednesday, July 8, 2009 4:59:08 AM
> Subject: [antlr-interest] Implementation decision help
> 
> Hello!
> 
> I am trying to implement the ETSI TTCN-3 BNF into Antlr.
> The major part is done and working as it should but there are some
> quirks which i don't know how to solve.
> 
> I have rules like this:
> stm : stmGroup1 | stmGroup2 ... | stmGroupX;
> 
> And all/some of these stmGroup's can start with the same type of
> token, but they are distinguishable by some token along the line
> further down the parse tree.
> 
> I have tried to solve this by using backtrack=true which didn't work.
> 
> My current solution is a specific order of the stmGroup's and a few
> syntactic predicates. But i don't like this solution since i don't
> know if it will work for all possible input (the grammar is really
> complex).
> 
> Basically what i want to accomplish is make Antlr try all of the rules
> in "stm" and only report error if none of them matches. Currently it
> reports errors even though a rule later in the list will match the
> input completely, just because the rule reporting the error matches it
> partly.
> 
> The only solution other then syntactic predicates and backtrack i can
> think of is to combine the stmGroup's into a rule which has truly
> distinctive paths depending on the next token.
> Is this the way to do it?
> It will require a huge amount of work since all the stmGroup's are
> quite large and complex themselves. Also it will make the grammar
> almost unreadable.
> 
> 
> 
> An example of a problematic rule is:
> http://www.trex.informatik.uni-goettingen.de/trac/wiki/ttcn-3_4.0.4#FunctionStatement
> 
> These are two parts of that problem:
> -> ConfigurationStatements -> StartTCStatement
> -> TimerStatements -> StartTimerStatement
> 
> PS. backtrack is not used at all in the grammar.
> 
> BR Gustaf
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: 
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address



      

From gustaf.j at gmail.com  Wed Jul  8 06:59:44 2009
From: gustaf.j at gmail.com (Gustaf Johansson)
Date: Wed, 8 Jul 2009 15:59:44 +0200
Subject: [antlr-interest] Implementation decision help
In-Reply-To: <888931.33765.qm@web55901.mail.re3.yahoo.com>
References: <5f59a7210907080459u2fea16e1k828d590d67472288@mail.gmail.com>
	<888931.33765.qm@web55901.mail.re3.yahoo.com>
Message-ID: <5f59a7210907080659j7a5878fo95057136a57057df@mail.gmail.com>

Thanks for the input Loring,

For the initial conversion I suppose you mean BNF syntax -> Antlr syntax?
That is already done, and was done semi automatic :)

As for the right-factored part, im not sure how to do that with these
problematic rules.
Its easy in a basic example as:
x: ID dot
    | ID comma;
to
x: ID (dot | comma);

But when the difference is 3 rules or more down the grammar it gets
quite hard to get it right.
And i also lose the nice groupings that the grammar has as it is.

Example this rule:
http://www.trex.informatik.uni-goettingen.de/trac/wiki/ttcn-3_4.0.4#CommunicationStatements
Was obviously right-factored and ive left-factored that one but doing
so i got a large rule, which is hard to read and maintain:

communicationStatements:	anyKeyword portKeyword dot (portReceiveOp |
portTriggerOp | portGetCallOp | portGetReplyOp | portCatchOp |
portCheckOp)
				| allKeyword portKeyword dot (portClearOp | portStartOp |
portStopOp | portHaltOp)
				| port dot (portSendOp | portCallOp (portCallBody)? | portReplyOp
| portRaiseOp | portReceiveOp | portTriggerOp | portGetCallOp |
portGetReplyOp | portCatchOp | portCheckOp | portClearOp | portStartOp
| portStopOp | portHaltOp);


And doing the same for the statement rule will make it huge and
probably erroneous.
I don't know if there is some better way than my solution, if so
please enlighten me!

Any help on how to left-factor correctly would be really appreciated.

BR Gustaf

On Wed, Jul 8, 2009 at 3:02 PM, Loring Craymer<lgcraymer at yahoo.com> wrote:
>
> Grammars like this one have usually been developed with LR tools (yacc, bison, ...) and have been right-factored. ?What you want is to left-factor the grammar (not just inline the stmtXX bodies as you describe, but also extract new rules to avoid having single large rules. ?ANTLRWorks can help.
>
> I also suggest writing a BNF translator to do the initial grammar conversion. ?Such translators tend to be quite small (100-300 lines) and are a lot less work than doing the initial conversion by hand.
>
> --Loring
>
>
>
> ----- Original Message ----
>> From: Gustaf Johansson <gustaf.j at gmail.com>
>> To: antlr-interest at antlr.org
>> Sent: Wednesday, July 8, 2009 4:59:08 AM
>> Subject: [antlr-interest] Implementation decision help
>>
>> Hello!
>>
>> I am trying to implement the ETSI TTCN-3 BNF into Antlr.
>> The major part is done and working as it should but there are some
>> quirks which i don't know how to solve.
>>
>> I have rules like this:
>> stm : stmGroup1 | stmGroup2 ... | stmGroupX;
>>
>> And all/some of these stmGroup's can start with the same type of
>> token, but they are distinguishable by some token along the line
>> further down the parse tree.
>>
>> I have tried to solve this by using backtrack=true which didn't work.
>>
>> My current solution is a specific order of the stmGroup's and a few
>> syntactic predicates. But i don't like this solution since i don't
>> know if it will work for all possible input (the grammar is really
>> complex).
>>
>> Basically what i want to accomplish is make Antlr try all of the rules
>> in "stm" and only report error if none of them matches. Currently it
>> reports errors even though a rule later in the list will match the
>> input completely, just because the rule reporting the error matches it
>> partly.
>>
>> The only solution other then syntactic predicates and backtrack i can
>> think of is to combine the stmGroup's into a rule which has truly
>> distinctive paths depending on the next token.
>> Is this the way to do it?
>> It will require a huge amount of work since all the stmGroup's are
>> quite large and complex themselves. Also it will make the grammar
>> almost unreadable.
>>
>>
>>
>> An example of a problematic rule is:
>> http://www.trex.informatik.uni-goettingen.de/trac/wiki/ttcn-3_4.0.4#FunctionStatement
>>
>> These are two parts of that problem:
>> -> ConfigurationStatements -> StartTCStatement
>> -> TimerStatements -> StartTimerStatement
>>
>> PS. backtrack is not used at all in the grammar.
>>
>> BR Gustaf
>>
>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>> Unsubscribe:
>> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>
>
>
>
>

From jimi at temporal-wave.com  Wed Jul  8 07:16:30 2009
From: jimi at temporal-wave.com (Jim Idle)
Date: Wed, 8 Jul 2009 07:16:30 -0700
Subject: [antlr-interest] Implementation decision help
In-Reply-To: <5f59a7210907080459u2fea16e1k828d590d67472288@mail.gmail.com>
References: <5f59a7210907080459u2fea16e1k828d590d67472288@mail.gmail.com>
Message-ID: <91586D70-EF9E-41E3-B896-65DEC3FD0CEC@temporal-wave.com>



On Jul 8, 2009, at 4:59 AM, Gustaf Johansson <gustaf.j at gmail.com> wrote:

> Hello!
>
> I am trying to implement the ETSI TTCN-3 BNF into Antlr.
> The major part is done and working as it should but there are some
> quirks which i don't know how to solve.
>
> I have rules like this:
> stm : stmGroup1 | stmGroup2 ... | stmGroupX;
>
> And all/some of these stmGroup's can start with the same type of
> token, but they are distinguishable by some token along the line
> further down the parse tree.
>
> I have tried to solve this by using backtrack=true which didn't work.
>
> My current solution is a specific order of the stmGroup's and a few
> syntactic predicates. But i don't like this solution since i don't
> know if it will work for all possible input (the grammar is really
> complex).
>
> Basically what i want to accomplish is make Antlr try all of the rules
> in "stm" and only report error if none of them matches. Currently it
> reports errors even though a rule later in the list will match the
> input completely, just because the rule reporting the error matches it
> partly.
>
> The only solution other then syntactic predicates and backtrack i can
> think of is to combine the stmGroup's into a rule which has truly
> distinctive paths depending on the next token.
> Is this the way to do it?

Yes.

> It will require a huge amount of work since all the stmGroup's are
> quite large and complex themselves. Also it will make the grammar
> almost unreadable.

I think you will find that it doesn't result in an readable grammar in  
fact. Formatting is your friend here.

I keep trying to influence people to practice by presenting an  
approach to writing such grammars. But I think people basically  
download Works and start typing. There are lots of posts about left  
factoring, not using backtrack and so on. Basically the normative spec  
is rarely written with the parser programmer in mind and you must  
interpolate.

Generally you can get backtrack to work as you want but with terrible  
error messages. If you can't then I would suggest starting again and  
use the recommended incremental approach to building grammars. You  
already have a lexer so you can cut and paste parser pieces until you  
get it correct.


Jim

>
>
>
> An example of a problematic rule is:
> http://www.trex.informatik.uni-goettingen.de/trac/wiki/ttcn-3_4.0.4#FunctionStatement
>
> These are two parts of that problem:
> -> ConfigurationStatements -> StartTCStatement
> -> TimerStatements -> StartTimerStatement
>
> PS. backtrack is not used at all in the grammar.
>
> BR Gustaf
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address

From gustaf.j at gmail.com  Wed Jul  8 07:44:19 2009
From: gustaf.j at gmail.com (Gustaf Johansson)
Date: Wed, 8 Jul 2009 16:44:19 +0200
Subject: [antlr-interest] Implementation decision help
In-Reply-To: <91586D70-EF9E-41E3-B896-65DEC3FD0CEC@temporal-wave.com>
References: <5f59a7210907080459u2fea16e1k828d590d67472288@mail.gmail.com>
	<91586D70-EF9E-41E3-B896-65DEC3FD0CEC@temporal-wave.com>
Message-ID: <5f59a7210907080744v64fe8e4epea4a185ddf221d91@mail.gmail.com>

On Wed, Jul 8, 2009 at 4:16 PM, Jim Idle<jimi at temporal-wave.com> wrote:
>
>
> On Jul 8, 2009, at 4:59 AM, Gustaf Johansson <gustaf.j at gmail.com> wrote:
>
>> Hello!
>>
>> I am trying to implement the ETSI TTCN-3 BNF into Antlr.
>> The major part is done and working as it should but there are some
>> quirks which i don't know how to solve.
>>
>> I have rules like this:
>> stm : stmGroup1 | stmGroup2 ... | stmGroupX;
>>
>> And all/some of these stmGroup's can start with the same type of
>> token, but they are distinguishable by some token along the line
>> further down the parse tree.
>>
>> I have tried to solve this by using backtrack=true which didn't work.
>>
>> My current solution is a specific order of the stmGroup's and a few
>> syntactic predicates. But i don't like this solution since i don't
>> know if it will work for all possible input (the grammar is really
>> complex).
>>
>> Basically what i want to accomplish is make Antlr try all of the rules
>> in "stm" and only report error if none of them matches. Currently it
>> reports errors even though a rule later in the list will match the
>> input completely, just because the rule reporting the error matches it
>> partly.
>>
>> The only solution other then syntactic predicates and backtrack i can
>> think of is to combine the stmGroup's into a rule which has truly
>> distinctive paths depending on the next token.
>> Is this the way to do it?
>
> Yes.
>
>> It will require a huge amount of work since all the stmGroup's are
>> quite large and complex themselves. Also it will make the grammar
>> almost unreadable.
>
> I think you will find that it doesn't result in an readable grammar in fact.
> Formatting is your friend here.
>
You mean it will be readable i suppose.

> I keep trying to influence people to practice by presenting an approach to
> writing such grammars. But I think people basically download Works and start
> typing. There are lots of posts about left factoring, not using backtrack
> and so on. Basically the normative spec is rarely written with the parser
> programmer in mind and you must interpolate.
>
I want the parser grammar to differ from the spec as little as
possible so its easy to add changes aso for other people.

> Generally you can get backtrack to work as you want but with terrible error
> messages. If you can't then I would suggest starting again and use the
> recommended incremental approach to building grammars. You already have a
> lexer so you can cut and paste parser pieces until you get it correct.
>
This is what ive done, i had backtrack on at first, which you
suggested me to remove and then redo the grammar.

Ive done that and have 12 rules that currently have syntactic
predicates in order to remove:
"Decision can match x using multiple alts..." warnings and
"non-LL(*) recursion" errors.

So i just want to know the correct way to get those right as well,
without using syntactic predicates if possible.


As you have stated, my next move will be to left-factor the statements
rule and format it nicely if possible.

Thanks for the help!

/Gustaf

>
> Jim
>
>>
>>
>>
>> An example of a problematic rule is:
>>
>> http://www.trex.informatik.uni-goettingen.de/trac/wiki/ttcn-3_4.0.4#FunctionStatement
>>
>> These are two parts of that problem:
>> -> ConfigurationStatements -> StartTCStatement
>> -> TimerStatements -> StartTimerStatement
>>
>> PS. backtrack is not used at all in the grammar.
>>
>> BR Gustaf
>>
>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>> Unsubscribe:
>> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>

From antlr at systemstart.net  Wed Jul  8 07:50:21 2009
From: antlr at systemstart.net (alexander)
Date: Wed, 08 Jul 2009 16:50:21 +0200
Subject: [antlr-interest] stringtemplate & tree walkers
In-Reply-To: <A6749D1F-8C68-4B55-B088-B93E27A5AD59@cs.usfca.edu>
References: <068CF8FD-C1E6-4423-B0ED-78A0F5FBBC43@cs.usfca.edu>
	<4A51E465.4060201@systemstart.net>
	<5F0762A3-5E98-404D-AB45-26B3717B6D2B@cs.usfca.edu>
	<A6749D1F-8C68-4B55-B088-B93E27A5AD59@cs.usfca.edu>
Message-ID: <4A54B22D.80600@systemstart.net>

sorry to bother again ...

i downloaded antlr's sources and a
grep -r "output \?= \?template" `find -name *.g*`

to find any grammars with output=template results in one reference, 
which is commented out:
./tool/src/main/antlr/org/antlr/grammar/v3/ActionTranslator.g:  // 
output=template;  TODO: can we make tokens return templates somehow?

Terence Parr schrieb:
> also codegen.g
do you mean
tool/src/main/antlr2/org/antlr/grammar/v2/codegen.g ?

there is no output using the -> operator :(

however, i was able to get things started(jihaaa).

now i'm looking for a nice solution for something like this:
somerule
     : a=something (b=maybe)?
         -> sometemplate(a={$a.st}, b={$b.st})
     ;
here the b is optional, if it's not there b.st will raise a npe.

should i surround this with if-then? or is there a simpler solution?

thanks in advance.

alexander

> On Jul 6, 2009, at 3:22 PM, Terence Parr wrote:
> 
>> well, sure. :)  Here's a better pointer: grep for
>> StringTemplateGroup.  Should be in key places and in
>> CodeGenerator.java :)
>> Ter
>> On Jul 6, 2009, at 4:47 AM, alexander wrote:
>>
>>> hi.
>>>
>>>> On Jun 16, 2009, at 9:59 AM, Arnulf Heller wrote:
>>>
>>>>> hi there,
>>>>>
>>>>> are there any complex examples of tree walkers emitting
>>>>> stringtemplates?
>>>
>>>> The source of antlr itself :)
>>>
>>>> Ter
>>>
>>> can you give a more detailed location for this? my lazyness prevents
>>> me
>>> from reading *all* the sources of antlr ;)
>>>
>>> i want to emit an xml-dialect from a tree-walker/grammar and i can't
>>> find a good start.
>>>
>>> thanks in advance
>>>
>>> alexander
>>>
>>>
>>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>>> Unsubscribe: 
>>> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>>
>>
>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>> Unsubscribe: 
>> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
> 
> 


From jimi at temporal-wave.com  Wed Jul  8 08:47:49 2009
From: jimi at temporal-wave.com (Jim Idle)
Date: Wed, 08 Jul 2009 08:47:49 -0700
Subject: [antlr-interest] stringtemplate & tree walkers
In-Reply-To: <4A54B22D.80600@systemstart.net>
References: <068CF8FD-C1E6-4423-B0ED-78A0F5FBBC43@cs.usfca.edu>	<4A51E465.4060201@systemstart.net>	<5F0762A3-5E98-404D-AB45-26B3717B6D2B@cs.usfca.edu>	<A6749D1F-8C68-4B55-B088-B93E27A5AD59@cs.usfca.edu>
	<4A54B22D.80600@systemstart.net>
Message-ID: <4A54BFA5.3080100@temporal-wave.com>

An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090708/9bd9ba7b/attachment.html 

From david-sarah at jacaranda.org  Wed Jul  8 12:14:14 2009
From: david-sarah at jacaranda.org (David-Sarah Hopwood)
Date: Wed, 08 Jul 2009 20:14:14 +0100
Subject: [antlr-interest] Fragment tokens are not generated by emit() --
	breaks setting TokenLabelType
Message-ID: <4A54F006.10309@jacaranda.org>

In order to change the token type (so that I can associate another
field with each token), I have overridden emit() in my lexer as shown
below:

grammar Jacaranda;

options {
  TokenLabelType = JacarandaToken;
  language = Java;
}

@lexer::members {
  private String SV = null;

  // See <http://www.antlr.org/wiki/pages/viewpage.action?pageId=1844>.
  public Token emit() {
    JacarandaToken token = new JacarandaToken(input, state.type,
      state.channel, state.tokenStartCharIndex, getCharIndex()-1);
    token.setLine(state.tokenStartLine);
    token.setText(state.text);
    token.setCharPositionInLine(state.tokenStartCharPositionInLine);

    // Transfer the last SV computed by the lexer to the token object.
    token.SV = SV; SV = null;

    emit(token);
    return token;
  }
}

The problem is that the generated code has compilation errors because
not all creation of token objects goes through emit(); there are some
direct uses of 'new CommonToken(...)':

org\jacaranda\verifier\JacarandaLexer.java:4006: incompatible types
found   : org.antlr.runtime.CommonToken
required: org.jacaranda.verifier.JacarandaToken
  d = new CommonToken(input, Token.INVALID_TOKEN_TYPE,
          Token.DEFAULT_CHANNEL, dStart1982, getCharIndex()-1);
      ^

The errors seem to occur in lexer rules where a child rule that is
a fragment is given a name (whether or not that name is used in an
action), for example:

  fragment Foo : d=DecimalDigit ;
  fragment DecimalDigit : '0'..'9' ;

If I remove the option 'TokenLabelType = JacarandaToken', the code
compiles, but this would just be hiding the problem, since I would like
all token objects to be of type JacarandaToken, including those that
are created temporarily for fragments.

As it happens, I can work around this by removing all instances of
named child fragments in my grammar, but I thought I'd report the
bug/limitation here anyway.

-- 
David-Sarah Hopwood  ?  http://davidsarah.livejournal.com


From behdad.forghani at samsarasol.com  Wed Jul  8 13:08:44 2009
From: behdad.forghani at samsarasol.com (Behdad Forghani)
Date: Wed, 08 Jul 2009 16:08:44 -0400
Subject: [antlr-interest] Novice
Message-ID: <4A54FCCC.4020207@samsarasol.com>

It depends on the language.


In my case, the dependencies would be circular and it was possible that 
the two modules referenced each other. What I did was, I parsed each 
module separately, made a hash table of modules and their identifier. In 
the second pass, I imported the symbols from modules that was imported 
into the hash table of the importing module and then issued errors if 
the references could not been resolved.

This does not work, if you want to do type checking on the fly, or in 
case of C imports that you need to know the type identifiers before hand.


---
Hello,

Currently I'm working on the implementation of a mark-up DSL using ANTLR.
This language makes use of module definitions and import constructs. What
would be the optimal approach to loading contents of dependent modules in my
AST?

The parser grammar is as follows:
module:         'module' moduleId ( imprt | site | function )* 'end' EOF ;
moduleId:      IDENTIFIER ( '.' IDENTIFIER )* ;
imprt:             'import' moduleId ';' ;

Thanks in advance!
Jeroen

From behdad.forghani at samsarasol.com  Wed Jul  8 13:16:14 2009
From: behdad.forghani at samsarasol.com (Behdad Forghani)
Date: Wed, 08 Jul 2009 16:16:14 -0400
Subject: [antlr-interest] String Template question
Message-ID: <4A54FE8E.4070907@samsarasol.com>

Hi,

I have a  question regarding templates. I have spent a lot of time to get the syntax right with no success. I cannot get the syntax of calling a template within a template to work.
I expected the syntax to be:
<template(<arg>)>
I.e.,
if the first template is:
template1(arg1) ::= "... <arg1> ..."

Then for the second template to call the first template, the syntax would be:
template2(arg) :: <<
...
<template1(<arg>)>
...
>>

This does not seem to work.


I want to declare a C structure. The typename may not be present. I.e., 
sometimes it is struct {} x; and sometimes it is struct y {} x;. So, in 
the string template I have:

struct(typename) ::="struct <typename>"

Now I want to define a template to call struct.  I expected the 
following to work, but it doesn't:

headerFileStruct(typename, fieldname) ::= <<
  <struct(<typename>)> {
   int length;
 } fieldname;
>>

I have tried <struct(typename)>, <struct<$typename$>> and any possiblity 
that I could think of with now luck.

Another question, jsut to doublecheck, is there a way to trace and debug 
stringtemplates? Not that this would have helped with not knowing the 
syntax.

Thanks for your help and providing Antlr.


Behdad


From parrt at cs.usfca.edu  Wed Jul  8 13:34:10 2009
From: parrt at cs.usfca.edu (Terence Parr)
Date: Wed, 8 Jul 2009 13:34:10 -0700
Subject: [antlr-interest] String Template question
In-Reply-To: <4A54FE8E.4070907@samsarasol.com>
References: <4A54FE8E.4070907@samsarasol.com>
Message-ID: <F60168C6-04EA-4EF9-BE83-3472DC713032@cs.usfca.edu>

Hi. try either <struct(typename="yourStructObject"> or  
<yourStructObject:struct()>
Ter
On Jul 8, 2009, at 1:16 PM, Behdad Forghani wrote:

> Hi,
>
> I have a  question regarding templates. I have spent a lot of time  
> to get the syntax right with no success. I cannot get the syntax of  
> calling a template within a template to work.
> I expected the syntax to be:
> <template(<arg>)>
> I.e.,
> if the first template is:
> template1(arg1) ::= "... <arg1> ..."
>
> Then for the second template to call the first template, the syntax  
> would be:
> template2(arg) :: <<
> ...
> <template1(<arg>)>
> ...
>>>
>
> This does not seem to work.
>
>
> I want to declare a C structure. The typename may not be present.  
> I.e.,
> sometimes it is struct {} x; and sometimes it is struct y {} x;. So,  
> in
> the string template I have:
>
> struct(typename) ::="struct <typename>"
>
> Now I want to define a template to call struct.  I expected the
> following to work, but it doesn't:
>
> headerFileStruct(typename, fieldname) ::= <<
>  <struct(<typename>)> {
>   int length;
> } fieldname;
>>>
>
> I have tried <struct(typename)>, <struct<$typename$>> and any  
> possiblity
> that I could think of with now luck.
>
> Another question, jsut to doublecheck, is there a way to trace and  
> debug
> stringtemplates? Not that this would have helped with not knowing the
> syntax.
>
> Thanks for your help and providing Antlr.
>
>
> Behdad
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address


From parrt at cs.usfca.edu  Wed Jul  8 13:32:47 2009
From: parrt at cs.usfca.edu (Terence Parr)
Date: Wed, 8 Jul 2009 13:32:47 -0700
Subject: [antlr-interest] stringtemplate & tree walkers
In-Reply-To: <4A54B22D.80600@systemstart.net>
References: <068CF8FD-C1E6-4423-B0ED-78A0F5FBBC43@cs.usfca.edu>
	<4A51E465.4060201@systemstart.net>
	<5F0762A3-5E98-404D-AB45-26B3717B6D2B@cs.usfca.edu>
	<A6749D1F-8C68-4B55-B088-B93E27A5AD59@cs.usfca.edu>
	<4A54B22D.80600@systemstart.net>
Message-ID: <61F5576D-74E4-414C-A04C-1131127C2BF1@cs.usfca.edu>

oh crap. ANTLR v3 uses antlr v2 for codegen.g.  crud. ok,  Here's one  
that i'm puttinginto book.  source is free at publisher's site so i  
can push out; description is only in book though ;) This is totally  
not cleaned up yet but it should give you some hints. It walks a C  
subset AST and spits it back out as C.

Ter
-------------- next part --------------
A non-text attachment was scrubbed...
Name: ast-st.tar
Type: application/x-tar
Size: 87557 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20090708/277ac312/attachment.tar 
-------------- next part --------------



On Jul 8, 2009, at 7:50 AM, alexander wrote:

> sorry to bother again ...
>
> i downloaded antlr's sources and a
> grep -r "output \?= \?template" `find -name *.g*`
>
> to find any grammars with output=template results in one reference,
> which is commented out:
> ./tool/src/main/antlr/org/antlr/grammar/v3/ActionTranslator.g:  //
> output=template;  TODO: can we make tokens return templates somehow?
>
> Terence Parr schrieb:
>> also codegen.g
> do you mean
> tool/src/main/antlr2/org/antlr/grammar/v2/codegen.g ?
>
> there is no output using the -> operator :(
>
> however, i was able to get things started(jihaaa).
>
> now i'm looking for a nice solution for something like this:
> somerule
>     : a=something (b=maybe)?
>         -> sometemplate(a={$a.st}, b={$b.st})
>     ;
> here the b is optional, if it's not there b.st will raise a npe.
>
> should i surround this with if-then? or is there a simpler solution?
>
> thanks in advance.
>
> alexander
>
>> On Jul 6, 2009, at 3:22 PM, Terence Parr wrote:
>>
>>> well, sure. :)  Here's a better pointer: grep for
>>> StringTemplateGroup.  Should be in key places and in
>>> CodeGenerator.java :)
>>> Ter
>>> On Jul 6, 2009, at 4:47 AM, alexander wrote:
>>>
>>>> hi.
>>>>
>>>>> On Jun 16, 2009, at 9:59 AM, Arnulf Heller wrote:
>>>>
>>>>>> hi there,
>>>>>>
>>>>>> are there any complex examples of tree walkers emitting
>>>>>> stringtemplates?
>>>>
>>>>> The source of antlr itself :)
>>>>
>>>>> Ter
>>>>
>>>> can you give a more detailed location for this? my lazyness  
>>>> prevents
>>>> me
>>>> from reading *all* the sources of antlr ;)
>>>>
>>>> i want to emit an xml-dialect from a tree-walker/grammar and i  
>>>> can't
>>>> find a good start.
>>>>
>>>> thanks in advance
>>>>
>>>> alexander
>>>>
>>>>
>>>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>>>> Unsubscribe:
>>>> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>>>
>>>
>>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>>> Unsubscribe:
>>> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>>
>>
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address


From jimi at temporal-wave.com  Wed Jul  8 14:28:36 2009
From: jimi at temporal-wave.com (Jim Idle)
Date: Wed, 08 Jul 2009 14:28:36 -0700
Subject: [antlr-interest] Fragment tokens are not generated by emit()
 --	breaks setting TokenLabelType
In-Reply-To: <4A54F006.10309@jacaranda.org>
References: <4A54F006.10309@jacaranda.org>
Message-ID: <4A550F84.8020001@temporal-wave.com>

David-Sarah Hopwood wrote:
> In order to change the token type (so that I can associate another
> field with each token), I have overridden emit() in my lexer as shown
> below:
>
> grammar Jacaranda;
>
> options {
>   TokenLabelType = JacarandaToken;
>   language = Java;
> }
>
> @lexer::members {
>   private String SV = null;
>
>   // See <http://www.antlr.org/wiki/pages/viewpage.action?pageId=1844>.
>   public Token emit() {
>     JacarandaToken token = new JacarandaToken(input, state.type,
>       state.channel, state.tokenStartCharIndex, getCharIndex()-1);
>     token.setLine(state.tokenStartLine);
>     token.setText(state.text);
>     token.setCharPositionInLine(state.tokenStartCharPositionInLine);
>
>     // Transfer the last SV computed by the lexer to the token object.
>     token.SV = SV; SV = null;
>
>     emit(token);
>     return token;
>   }
> }
>
> The problem is that the generated code has compilation errors because
> not all creation of token objects goes through emit(); there are some
> direct uses of 'new CommonToken(...)':
>
> org\jacaranda\verifier\JacarandaLexer.java:4006: incompatible types
> found   : org.antlr.runtime.CommonToken
> required: org.jacaranda.verifier.JacarandaToken
>   d = new CommonToken(input, Token.INVALID_TOKEN_TYPE,
>           Token.DEFAULT_CHANNEL, dStart1982, getCharIndex()-1);
>       ^
>
> The errors seem to occur in lexer rules where a child rule that is
> a fragment is given a name (whether or not that name is used in an
> action), for example:
Yes, I think you are correct.

The solution is either that return types of fragments in lexerRuleRef() 
template, should be known to be CommonToken or that the hard coded new 
CommonToken should use the template's labelType. Probably the latter, 
but fragment labels are really for using the token to determine the 
start and end of fragments spans and so on, rather than emit()'ing them, 
so perhaps not.

However, if you separate the lexer and parser, and use TokenLabelType 
only in the parser grammar, then I think it would work as you require, 
even with labeled fragment rules.

Jim



From jimi at temporal-wave.com  Wed Jul  8 15:46:07 2009
From: jimi at temporal-wave.com (Jim Idle)
Date: Wed, 08 Jul 2009 15:46:07 -0700
Subject: [antlr-interest] Fragment tokens are not generated by emit()
 --	breaks setting TokenLabelType
In-Reply-To: <4A54F006.10309@jacaranda.org>
References: <4A54F006.10309@jacaranda.org>
Message-ID: <4A5521AF.8070703@temporal-wave.com>

David-Sarah Hopwood wrote:
> In order to change the token type (so that I can associate another
> field with each token), I have overridden emit() in my lexer as shown
> below:
>
> grammar Jacaranda;
>
> options {
>   TokenLabelType = JacarandaToken;
>   language = Java;
> }
>
> @lexer::members {
>   private String SV = null;
>
>   // See <http://www.antlr.org/wiki/pages/viewpage.action?pageId=1844>.
>   public Token emit() {
>     JacarandaToken token = new JacarandaToken(input, state.type,
>       state.channel, state.tokenStartCharIndex, getCharIndex()-1);
>     token.setLine(state.tokenStartLine);
>     token.setText(state.text);
>     token.setCharPositionInLine(state.tokenStartCharPositionInLine);
>
>     // Transfer the last SV computed by the lexer to the token object.
>     token.SV = SV; SV = null;
>
>     emit(token);
>     return token;
>   }
> }
>
> The problem is that the generated code has compilation errors because
> not all creation of token objects goes through emit(); there are some
> direct uses of 'new CommonToken(...)':
>
> org\jacaranda\verifier\JacarandaLexer.java:4006: incompatible types
> found   : org.antlr.runtime.CommonToken
> required: org.jacaranda.verifier.JacarandaToken
>   d = new CommonToken(input, Token.INVALID_TOKEN_TYPE,
>           Token.DEFAULT_CHANNEL, dStart1982, getCharIndex()-1);
>       ^
>   
Fixed (in Java target so far) by: http://www.antlr.org/jira/browse/ANTLR-398

Jim

From parrt at cs.usfca.edu  Wed Jul  8 15:46:58 2009
From: parrt at cs.usfca.edu (Terence Parr)
Date: Wed, 8 Jul 2009 15:46:58 -0700
Subject: [antlr-interest] stringtemplate & tree walkers
In-Reply-To: <61F5576D-74E4-414C-A04C-1131127C2BF1@cs.usfca.edu>
References: <068CF8FD-C1E6-4423-B0ED-78A0F5FBBC43@cs.usfca.edu>
	<4A51E465.4060201@systemstart.net>
	<5F0762A3-5E98-404D-AB45-26B3717B6D2B@cs.usfca.edu>
	<A6749D1F-8C68-4B55-B088-B93E27A5AD59@cs.usfca.edu>
	<4A54B22D.80600@systemstart.net>
	<61F5576D-74E4-414C-A04C-1131127C2BF1@cs.usfca.edu>
Message-ID: <8E3887D6-F2CD-4C5A-A899-7DAB0974BE47@cs.usfca.edu>

ooops. that's ast-st-tar.gz (i compressed it). I do the following a  
mistake

$ tar cvfz ast-st.tar ast-st

Should have .tar.gz extension

Ter

On Jul 8, 2009, at 1:32 PM, Terence Parr wrote:

> oh crap. ANTLR v3 uses antlr v2 for codegen.g.  crud. ok,  Here's  
> one that i'm puttinginto book.  source is free at publisher's site  
> so i can push out; description is only in book though ;) This is  
> totally not cleaned up yet but it should give you some hints. It  
> walks a C subset AST and spits it back out as C.
>
> Ter
> <ast-st.tar>
>
>
> On Jul 8, 2009, at 7:50 AM, alexander wrote:
>
>> sorry to bother again ...
>>
>> i downloaded antlr's sources and a
>> grep -r "output \?= \?template" `find -name *.g*`
>>
>> to find any grammars with output=template results in one reference,
>> which is commented out:
>> ./tool/src/main/antlr/org/antlr/grammar/v3/ActionTranslator.g:  //
>> output=template;  TODO: can we make tokens return templates somehow?
>>
>> Terence Parr schrieb:
>>> also codegen.g
>> do you mean
>> tool/src/main/antlr2/org/antlr/grammar/v2/codegen.g ?
>>
>> there is no output using the -> operator :(
>>
>> however, i was able to get things started(jihaaa).
>>
>> now i'm looking for a nice solution for something like this:
>> somerule
>>    : a=something (b=maybe)?
>>        -> sometemplate(a={$a.st}, b={$b.st})
>>    ;
>> here the b is optional, if it's not there b.st will raise a npe.
>>
>> should i surround this with if-then? or is there a simpler solution?
>>
>> thanks in advance.
>>
>> alexander
>>
>>> On Jul 6, 2009, at 3:22 PM, Terence Parr wrote:
>>>
>>>> well, sure. :)  Here's a better pointer: grep for
>>>> StringTemplateGroup.  Should be in key places and in
>>>> CodeGenerator.java :)
>>>> Ter
>>>> On Jul 6, 2009, at 4:47 AM, alexander wrote:
>>>>
>>>>> hi.
>>>>>
>>>>>> On Jun 16, 2009, at 9:59 AM, Arnulf Heller wrote:
>>>>>
>>>>>>> hi there,
>>>>>>>
>>>>>>> are there any complex examples of tree walkers emitting
>>>>>>> stringtemplates?
>>>>>
>>>>>> The source of antlr itself :)
>>>>>
>>>>>> Ter
>>>>>
>>>>> can you give a more detailed location for this? my lazyness  
>>>>> prevents
>>>>> me
>>>>> from reading *all* the sources of antlr ;)
>>>>>
>>>>> i want to emit an xml-dialect from a tree-walker/grammar and i  
>>>>> can't
>>>>> find a good start.
>>>>>
>>>>> thanks in advance
>>>>>
>>>>> alexander
>>>>>
>>>>>
>>>>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>>>>> Unsubscribe:
>>>>> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>>>>
>>>>
>>>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>>>> Unsubscribe:
>>>> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>>>
>>>
>>
>>
>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address


From asalh at mindspring.com  Wed Jul  8 19:34:08 2009
From: asalh at mindspring.com (Bryan S Follins)
Date: Wed, 8 Jul 2009 19:34:08 -0700
Subject: [antlr-interest] Questions
In-Reply-To: <4A5521AF.8070703@temporal-wave.com>
References: <4A54F006.10309@jacaranda.org> <4A5521AF.8070703@temporal-wave.com>
Message-ID: <003701ca003d$bc8f3f70$35adbe50$@com>

Hello All,

Can ANTLRWorks be configured to work with Python?

Can I upgrade from ANTLRWorks 2.77 to 3.0 without having to reconfigure my
computer?  I have WinXP 2003 Home Edition.

As a beginning programmer, how would I use ANTLR or ANTLRWorks?  Where would
I most likey come into contact with ANTLR or ANTLRWorks?

Bryan



From sylvain_gregory at bah.com  Thu Jul  9 04:47:19 2009
From: sylvain_gregory at bah.com (Sylvain, Gregory [USA])
Date: Thu, 9 Jul 2009 07:47:19 -0400
Subject: [antlr-interest] Null Pointer Exception from valid gUnit test
 (ANTLR 3.1.3 and gnuit-1.0.4)
In-Reply-To: <mailman.1.1247079601.18487.antlr-interest@antlr.org>
References: <mailman.1.1247079601.18487.antlr-interest@antlr.org>
Message-ID: <825E1B6D-3BEB-4399-9B75-43FB79BF2878@mimectl>

Hi,

I've been trying to complete some unit testing of a grammar, and I keep getting Null Pointer Exceptions from valid gUnit tests.  (The unit test strings work fine from the Interpreter in Eclipse (ANTLR IDE) and ANTLRWorks).  Is this is a known bug, or am I just doing something obviously wrong.

Thanks for any clues here,
Greg
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090709/bc267843/attachment.html 

From anderwalker1983 at googlemail.com  Thu Jul  9 04:49:25 2009
From: anderwalker1983 at googlemail.com (Andrew Walker)
Date: Thu, 9 Jul 2009 12:49:25 +0100
Subject: [antlr-interest] tree walking
Message-ID: <5bffd4860907090449v19b309c1x2b27d8c50a0a0c1@mail.gmail.com>

Hi!
How in the tree grammar can I match the expression like this one:
expr : (INT -> INT) ('+' i=INT -> ^('+' $expr $i) )* ;
or this one:
expr : INT ('+' ^ INT)* ;

I've look through the book but it doesn't cover this part.

Cheers,
Andrew
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090709/ce37742c/attachment.html 

From jeroen.v.schagen at gmail.com  Thu Jul  9 06:16:58 2009
From: jeroen.v.schagen at gmail.com (jeroen.v.schagen at gmail.com)
Date: Thu, 09 Jul 2009 13:16:58 +0000
Subject: [antlr-interest] Type-checking and compiling a language with
	import constructs
In-Reply-To: <cabba3130907080333i18ff870fyce6090911d123f85@mail.gmail.com>
Message-ID: <0015174c1b8ea4698f046e45ab56@google.com>

After some digging I've found a tutorial in v2.7:  
http://www.ibm.com/developerworks/aix/library/au-c_plusplus_antlr/index.html.  
However, while implementing the preprocessor I noticed that the  
antlr.TokenStreamSelector add input stream requires a antlr.TokenStream,  
but the org.antlr.runtime.Lexer inherits from antlr.runtime.TokenStream.  
Now I'ma bit puzzled why there are two different TokenStream classes. Is  
this purely a migration issue that is waiting to be resolved, or should I  
use some other facility for multiple token streams?

On Jul 8, 2009 12:33pm, Jeroen van Schagen <jeroen.v.schagen at gmail.com>  
wrote:
> Hello,

> Currently I'm working on the implementation of a mark-up DSL using ANTLR.  
> This language makes use of module definitions and import constructs. What  
> would be the optimal approach to loading contents of dependent modules in  
> my AST?


> The parser grammar is as follows:
> module: 'module' moduleId ( imprt | site | function )* 'end' EOF ;
> moduleId: IDENTIFIER ( '.' IDENTIFIER )* ;
> imprt: 'import' moduleId ';' ;


> Thanks in advance!
> Jeroen

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090709/c77ddf40/attachment.html 

From dave at tridecap.com  Thu Jul  9 07:14:06 2009
From: dave at tridecap.com (Dave Dutcher)
Date: Thu, 9 Jul 2009 09:14:06 -0500
Subject: [antlr-interest] Questions
In-Reply-To: <003701ca003d$bc8f3f70$35adbe50$@com>
References: <4A54F006.10309@jacaranda.org> <4A5521AF.8070703@temporal-wave.com>
	<003701ca003d$bc8f3f70$35adbe50$@com>
Message-ID: <1EB0557AD97E42498967E90F394C92C4@tridecap.com>

> -----Original Message-----
> From: Bryan S Follins
> 
> Hello All,
> 
> Can ANTLRWorks be configured to work with Python?
> 
> Can I upgrade from ANTLRWorks 2.77 to 3.0 without having to 
> reconfigure my computer?  I have WinXP 2003 Home Edition.
> 
> As a beginning programmer, how would I use ANTLR or 
> ANTLRWorks?  Where would I most likey come into contact with 
> ANTLR or ANTLRWorks?
> 
> Bryan


You can edit a Python outputing grammar in ANTLRWorks, and features like
graphing your rules will still work, but the debugger does not work with
Python.

I think you are getting the version numbers between Antlr and AntlrWorks
confused.

To install AntlrWorks just download the jar file
http://www.antlr.org/download/antlrworks-1.2.3.jar, and you should be able
to double click it to run the app.  (If you already have a java runtime
installed.)

Antlr is a parser/translator generator.  You use it when you need to write
your own language (metalinguistic abstraction), parse a domain specific
language somebody else wrote, analyze source code, or parse a complicated
data format.

Dave



From parrt at cs.usfca.edu  Thu Jul  9 11:39:36 2009
From: parrt at cs.usfca.edu (Terence Parr)
Date: Thu, 9 Jul 2009 11:39:36 -0700
Subject: [antlr-interest] tree walking
In-Reply-To: <5bffd4860907090449v19b309c1x2b27d8c50a0a0c1@mail.gmail.com>
References: <5bffd4860907090449v19b309c1x2b27d8c50a0a0c1@mail.gmail.com>
Message-ID: <B9AB4458-5C3A-45E8-84F4-E2A5983511FA@cs.usfca.edu>

Hi Andrew, I'm pretty sure it does. TDAR not LDP, that is.

expr : ^('+' expr expr) | INT ;

is what you want in the tree grammar.
Ter
On Jul 9, 2009, at 4:49 AM, Andrew Walker wrote:

> Hi!
> How in the tree grammar can I match the expression like this one:
> expr : (INT -> INT) ('+' i=INT -> ^('+' $expr $i) )* ;
> or this one:
> expr : INT ('+' ^ INT)* ;
>
> I've look through the book but it doesn't cover this part.
>
> Cheers,
> Andrew
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address


From david-sarah at jacaranda.org  Thu Jul  9 13:17:12 2009
From: david-sarah at jacaranda.org (David-Sarah Hopwood)
Date: Thu, 09 Jul 2009 21:17:12 +0100
Subject: [antlr-interest] Fragment and error tokens are not generated by
 emit() -- breaks setting TokenLabelType
In-Reply-To: <4A550F84.8020001@temporal-wave.com>
References: <4A54F006.10309@jacaranda.org> <4A550F84.8020001@temporal-wave.com>
Message-ID: <4A565048.5090800@jacaranda.org>

Jim Idle wrote:
> David-Sarah Hopwood wrote:
>> In order to change the token type (so that I can associate another
>> field with each token), I have overridden emit() in my lexer as shown
>> below:
[snipped]
>> The problem is that the generated code has compilation errors because
>> not all creation of token objects goes through emit(); there are some
>> direct uses of 'new CommonToken(...)':
>>
>> org\jacaranda\verifier\JacarandaLexer.java:4006: incompatible types
>> found   : org.antlr.runtime.CommonToken
>> required: org.jacaranda.verifier.JacarandaToken
>>   d = new CommonToken(input, Token.INVALID_TOKEN_TYPE,
>>           Token.DEFAULT_CHANNEL, dStart1982, getCharIndex()-1);
>>       ^
>>
>> The errors seem to occur in lexer rules where a child rule that is
>> a fragment is given a name (whether or not that name is used in an
>> action), for example: [snipped]
>
> Yes, I think you are correct.
> 
> The solution is either that return types of fragments in lexerRuleRef() 
> template, should be known to be CommonToken or that the hard coded new 
> CommonToken should use the template's labelType.

The latter assumes that the labelType has a constructor with
signature (CharStream input, int type, int channel, int start, int stop),
and makes it inconvenient for token creation to make use of any other
lexer state (since the lexer object is not passed into the token
constructor).

> Probably the latter, 
> but fragment labels are really for using the token to determine the 
> start and end of fragments spans and so on, rather than emit()'ing them, 
> so perhaps not.
> 
> However, if you separate the lexer and parser, and use TokenLabelType 
> only in the parser grammar, then I think it would work as you require, 
> even with labeled fragment rules.

Unfortunately not. I've since found other cases in which a CommonToken
gets placed on the token stream (e.g. due to a parse error), and then
the generated code for the parser (not lexer) fails at runtime when it
attempts to cast it to a JacarandaToken. This is much harder to work
around, because of the cast being in generated parser code. For the time
being, I've stopped using the TokenLabelType option and decided to live
with the tokens being a mixture of JacarandaToken and CommonToken, but
that's not an ideal solution.


// parser rule
unreservedIdentifier
  : id=Identifier^ { ... }
  ;


// generated parser code
JacarandaToken id=null;
...
// line 2003:
id=(JacarandaToken)match(input,Identifier,FOLLOW_Identifier_in_unreservedIdentifier3071);


// when used to parse input where Identifier is missing:
line 1:0 [unreservedIdentifier] missing Identifier at [@0,0:4='throw',<27>,1:0]
java.lang.ClassCastException: org.antlr.runtime.CommonToken cannot be cast
to org.jacaranda.verifier.JacarandaToken
        at
org.jacaranda.verifier.JacarandaParser.unreservedIdentifier(JacarandaParser.java:2003)


So, it seems like the only workable fix that would maintain compatibility
with the emit() recipe given in
<http://www.antlr.org/wiki/pages/viewpage.action?pageId=1844>, is to
eliminate all instances of 'new CommonToken(...)' from generated code,
and have all token objects created via emit(). Or else the recipe
could be changed to create all tokens via a factory method:

lexer::@members {
  public Token createToken(CharStream input, int type, int channel,
                           int start, int stop) {
    return new MyToken(input, type, channel, start, stop);
  }
}

(with the default emit() using this method, of course).

-- 
David-Sarah Hopwood  ?  http://davidsarah.livejournal.com


From nvivo.misc at gmail.com  Thu Jul  9 13:50:12 2009
From: nvivo.misc at gmail.com (Natan)
Date: Thu, 09 Jul 2009 17:50:12 -0300
Subject: [antlr-interest] Interpreter exceptions?
Message-ID: <4A565804.8030801@gmail.com>

Hi,

I'm still learning AntLr, but something is bothering me, maybe someone 
here can explain this.

Given a very simple test grammar like:

prog
    :    STRING;

STRING
    :    '"' ( '\"' | ~('"') )* '"';


I debug using "test" as input, and it works fine and shows me a tree 
like: root -> prog -> "test"

But from the interpreter, it shows me: <grammar X> -> prog -> 
MismatchedTokenException(-1!=4)
and the console says:

[17:27:48] Interpreting...
[17:27:48] problem matching token at 1:2 MismatchedTokenException(116!=34)
[17:27:48] problem matching token at 1:3 MismatchedTokenException(101!=34)
[17:27:48] problem matching token at 1:4 MismatchedTokenException(115!=34)
[17:27:48] problem matching token at 1:5 MismatchedTokenException(116!=34)
[17:27:48] problem matching token at 1:6 NoViableAltException('?'@[()* 
loopback of 11:8: ( '\"' | ~ ( '"' ) )*])

I am aware that the debug and interpreter trees are not the same, and 
that the interpreter does not support some things like actions etc, but 
still this simple syntax should work right?

Actually, I was trying to create a more complex grammar, until I started 
to see these exceptions. Made me crazy for days until I realized the 
actual compiled code was working fine.

So, is this because the interpreter is not the same as the code 
generated by antlr?
Or do I need to add something to my grammar to be able to test inputs 
using the interpreter?
Or the interpreter is in beta stage and I should not believe anything it 
says for now?

Thanks!

From david-sarah at jacaranda.org  Thu Jul  9 13:51:12 2009
From: david-sarah at jacaranda.org (David-Sarah Hopwood)
Date: Thu, 09 Jul 2009 21:51:12 +0100
Subject: [antlr-interest] Fragment tokens are not generated by emit() --
 breaks setting TokenLabelType
In-Reply-To: <4A5521AF.8070703@temporal-wave.com>
References: <4A54F006.10309@jacaranda.org> <4A5521AF.8070703@temporal-wave.com>
Message-ID: <4A565840.8090908@jacaranda.org>

Jim Idle wrote:
> David-Sarah Hopwood wrote:
>> [...] The problem is that the generated code has compilation errors because
>> not all creation of token objects goes through emit(); there are some
>> direct uses of 'new CommonToken(...)':
>>
>> org\jacaranda\verifier\JacarandaLexer.java:4006: incompatible types
>> found   : org.antlr.runtime.CommonToken
>> required: org.jacaranda.verifier.JacarandaToken
>>   d = new CommonToken(input, Token.INVALID_TOKEN_TYPE,
>>           Token.DEFAULT_CHANNEL, dStart1982, getCharIndex()-1);
>>       ^
>
> Fixed (in Java target so far) by: http://www.antlr.org/jira/browse/ANTLR-398

Now that's impressive. I love open-source projects that are responsive to
bug-reports.


At <http://www.antlr.org/hudson/job/ANTLR_Tool/323/changes>, there doesn't
seem to be a way to browse the changes on-line. Are there any plans to
allow that, or have I missed a way to do it already?

-- 
David-Sarah Hopwood  ?  http://davidsarah.livejournal.com


From jimi at temporal-wave.com  Thu Jul  9 13:51:14 2009
From: jimi at temporal-wave.com (Jim Idle)
Date: Thu, 09 Jul 2009 13:51:14 -0700
Subject: [antlr-interest] Fragment and error tokens are not generated by
 emit() -- breaks setting TokenLabelType
In-Reply-To: <4A565048.5090800@jacaranda.org>
References: <4A54F006.10309@jacaranda.org> <4A550F84.8020001@temporal-wave.com>
	<4A565048.5090800@jacaranda.org>
Message-ID: <4A565842.7060408@temporal-wave.com>

An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090709/cf78be6f/attachment.html 

From jimi at temporal-wave.com  Thu Jul  9 14:57:49 2009
From: jimi at temporal-wave.com (Jim Idle)
Date: Thu, 9 Jul 2009 14:57:49 -0700
Subject: [antlr-interest] Fragment tokens are not generated by emit() --
	breaks setting TokenLabelType
In-Reply-To: <4A565840.8090908@jacaranda.org>
References: <4A54F006.10309@jacaranda.org> <4A5521AF.8070703@temporal-wave.com>
	<4A565840.8090908@jacaranda.org>
Message-ID: <E5AD6990-B037-43CB-A0C3-44DAD15876F3@temporal-wave.com>

See the fisheye source browser, or download the source tarball from  
Hudson, or request a perforce login by emailing here or the developers  
list.

Jim

On Jul 9, 2009, at 1:51 PM, David-Sarah Hopwood <david-sarah at jacaranda.org 
 > wrote:

> Jim Idle wrote:
>> David-Sarah Hopwood wrote:
>>> [...] The problem is that the generated code has compilation  
>>> errors because
>>> not all creation of token objects goes through emit(); there are  
>>> some
>>> direct uses of 'new CommonToken(...)':
>>>
>>> org\jacaranda\verifier\JacarandaLexer.java:4006: incompatible types
>>> found   : org.antlr.runtime.CommonToken
>>> required: org.jacaranda.verifier.JacarandaToken
>>>  d = new CommonToken(input, Token.INVALID_TOKEN_TYPE,
>>>          Token.DEFAULT_CHANNEL, dStart1982, getCharIndex()-1);
>>>      ^
>>
>> Fixed (in Java target so far) by: http://www.antlr.org/jira/browse/ANTLR-398
>
> Now that's impressive. I love open-source projects that are  
> responsive to
> bug-reports.
>
>
> At <http://www.antlr.org/hudson/job/ANTLR_Tool/323/changes>, there  
> doesn't
> seem to be a way to browse the changes on-line. Are there any plans to
> allow that, or have I missed a way to do it already?
>
> -- 
> David-Sarah Hopwood  ?  http://davidsarah.livejournal.com
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address

From parrt at antlr.org  Thu Jul  9 18:50:12 2009
From: parrt at antlr.org (Terence Parr)
Date: Thu, 9 Jul 2009 18:50:12 -0700
Subject: [antlr-interest] ST feature proposal
Message-ID: <F23CAE6F-0460-4C05-87B1-FDB9D1180E9E@antlr.org>

Howdy, I think Jim Idle brought up that sometimes you want to format  
your templates without screwing up the output. I just added a feature  
proposal:

http://www.antlr.org/jira/browse/ST-57

Example:

"start of a string<\\>
           <some very long expression in ST><\\>
           <followed by another very long expression>"

ST would ignore the newline and any indentation.

I can easily slip this in for 3.2.1 release, which I guess will be the  
book release

Ter

From lgcraymer at yahoo.com  Thu Jul  9 19:14:15 2009
From: lgcraymer at yahoo.com (Loring Craymer)
Date: Thu, 9 Jul 2009 19:14:15 -0700 (PDT)
Subject: [antlr-interest] ST feature proposal
In-Reply-To: <F23CAE6F-0460-4C05-87B1-FDB9D1180E9E@antlr.org>
References: <F23CAE6F-0460-4C05-87B1-FDB9D1180E9E@antlr.org>
Message-ID: <234440.52847.qm@web55907.mail.re3.yahoo.com>


Hmm--could you make this "either output a \ or escape a newline" for <\\>?  The lack of a way to output a \ from ST is annoying and escaping newlines is rather minimal functionality for a lexeme.

--Loring



----- Original Message ----
> From: Terence Parr <parrt at antlr.org>
> To: String Template <stringtemplate-interest at antlr.org>
> Cc: antlr-interest ANTLR <antlr-interest at antlr.org>
> Sent: Thursday, July 9, 2009 6:50:12 PM
> Subject: [antlr-interest] ST feature proposal
> 
> Howdy, I think Jim Idle brought up that sometimes you want to format  
> your templates without screwing up the output. I just added a feature  
> proposal:
> 
> http://www.antlr.org/jira/browse/ST-57
> 
> Example:
> 
> "start of a string<\\>
>           <\\>
>           "
> 
> ST would ignore the newline and any indentation.
> 
> I can easily slip this in for 3.2.1 release, which I guess will be the  
> book release
> 
> Ter
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: 
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address



      

From gwlist at grahamwideman.com  Thu Jul  9 19:19:17 2009
From: gwlist at grahamwideman.com (Graham Wideman)
Date: Thu, 09 Jul 2009 19:19:17 -0700
Subject: [antlr-interest] ST feature proposal
In-Reply-To: <F23CAE6F-0460-4C05-87B1-FDB9D1180E9E@antlr.org>
Message-ID: <4.1.20090709190822.067e2c88@grahamwideman.com>

Hi Ter,

Idea looks attractive to me. Comments:

> Perhaps we need another special symbol that means 
> allow me to do a newline and it didn't the next line,
> but don't put it into the output.

"it didn't"  probably = "indent"?

So basically, the double-backslash expression means ignore subsequent whitespace that matches some pattern, probably:

    [space or tab]* newline [space or tab]*

... or did you intend more like:

    [space or tab or newline]*

...following which could be another expression, or non-whitespace string.

Issue: Might there be occasions where you actually want to retain a space before what follows, and if so what do you do about that? I'm not *sure* this is a problem, just noting it.

Perhaps could have optional space suffixed to the double-backslash expression?

Ie: 
<\\>  vs 
<\\ >

My 2 cents

-- Graham


From gustaf.j at gmail.com  Fri Jul 10 01:37:18 2009
From: gustaf.j at gmail.com (Gustaf Johansson)
Date: Fri, 10 Jul 2009 10:37:18 +0200
Subject: [antlr-interest] Get code in constructor (Java target)
Message-ID: <5f59a7210907100137i37bd4a23ia3fde13c3aa97bf4@mail.gmail.com>

Hello,

I have a global hashmap that i want to initialize in the constructor.
Currently i use a null check upon usage and initalize if null, but
this seems like a performance waste when the constructor could be
used.

I tried the @init and have checked the book but im unable to find any
reference to how to do this.
Is it currently possible to place arbitrary code in the constructors?

Best Regards Gustaf

From antlr at mirality.co.nz  Fri Jul 10 04:23:45 2009
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Fri, 10 Jul 2009 23:23:45 +1200
Subject: [antlr-interest] Interpreter exceptions?
In-Reply-To: <4A565804.8030801@gmail.com>
References: <4A565804.8030801@gmail.com>
Message-ID: <20090710113545.843343418431@www.antlr.org>

At 08:50 10/07/2009, Natan wrote:
 >STRING
 >    :    '"' ( '\"' | ~('"') )* '"';

ANTLR parses backslashes as escape sequences.  So you really 
should be using this instead:

STRING
   : '"' ( '\\' '"' | ~'"' )* '"'
   ;

 >I am aware that the debug and interpreter trees are not the 
same,
 >and that the interpreter does not support some things like
 >actions etc, but still this simple syntax should work right?

I've usually found the interpreter to be unreliable even without 
getting into actions and predicates.  It's usually best to just 
pretend it doesn't exist, and use a combination of the debugger, 
unit tests, and the main code instead.


From jeroen.v.schagen at gmail.com  Fri Jul 10 04:53:44 2009
From: jeroen.v.schagen at gmail.com (Jeroen van Schagen)
Date: Fri, 10 Jul 2009 13:53:44 +0200
Subject: [antlr-interest] Type-checking and compiling a language with
	import constructs
In-Reply-To: <0015174c1b8ea4698f046e45ab56@google.com>
References: <cabba3130907080333i18ff870fyce6090911d123f85@mail.gmail.com>
	<0015174c1b8ea4698f046e45ab56@google.com>
Message-ID: <cabba3130907100453j2dde6880s47f098cd4ca76f15@mail.gmail.com>

My problem is nearly solved, I just got one little problem left with tree
construction. External file can now be parsed based on the import
directive(s).

*modules:        module*
                -> ^( module );

module:         'module' moduleId ( imprt | site | function )* 'end'
                -> ^( 'module' moduleId imprt* site* function* 'end' ) ;

moduleId returns [String path = ""] @after { $path += ".wae"; } :
            e=IDCON { $path += e.getText(); }
**            **( '.' e=IDCON { $path += "/" + e.getText(); } )*
                -> ^( IDCON ( '.' IDCON )* ) ;

imprt:            'import' id=moduleId ';'
                -> ^( 'import' moduleId ';' ^({ parseImport($id.path) }) ) ;

@parser::members {
    private CommonTree parseImport(String path) throws RecognitionException
{
        try {
            CharStream is = new ANTLRFileStream(path);
            WaebricLexer lexer = new WaebricLexer(is);
            CommonTokenStream tokens = new CommonTokenStream(lexer);
                  WaebricParser parser = new WaebricParser(tokens);
                  return (CommonTree) parser.module().getTree();
              } catch(java.io.IOException e) { return new CommonTree(); } //
Invalid directives are ignored
    }
}*

Resulting in an example output of: (module imprt (import moddef ; *(module
moddef end)*) end)
However my desired output is: (module imprt (import moddef ;) end) *(module
moddef end)*

Are there any features in ANTLR allowing me to lift a tree node in the
hierarchy?

On Thu, Jul 9, 2009 at 3:16 PM, <jeroen.v.schagen at gmail.com> wrote:

> After some digging I've found a tutorial in v2.7:
> http://www.ibm.com/developerworks/aix/library/au-c_plusplus_antlr/index.html.
> However, while implementing the preprocessor I noticed that the
> antlr.TokenStreamSelector add input stream requires a antlr.TokenStream, but
> the org.antlr.runtime.Lexer inherits from antlr.runtime.TokenStream. Now I'm
> a bit puzzled why there are two different TokenStream classes. Is this
> purely a migration issue that is waiting to be resolved, or should I use
> some other facility for multiple token streams?
>
>
> On Jul 8, 2009 12:33pm, Jeroen van Schagen <jeroen.v.schagen at gmail.com>
> wrote:
> > Hello,
> >
> > Currently I'm working on the implementation of a mark-up DSL using ANTLR.
> This language makes use of module definitions and import constructs. What
> would be the optimal approach to loading contents of dependent modules in my
> AST?
> >
> >
> > The parser grammar is as follows:
> > module:         'module' moduleId ( imprt | site | function )* 'end' EOF
> ;
> > moduleId:      IDENTIFIER ( '.' IDENTIFIER )* ;
> > imprt:             'import' moduleId ';' ;
> >
> >
> > Thanks in advance!
> > Jeroen
> >
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090710/d7f75f08/attachment.html 

From carter_cheng at yahoo.com  Fri Jul 10 05:46:38 2009
From: carter_cheng at yahoo.com (Carter Cheng)
Date: Fri, 10 Jul 2009 05:46:38 -0700 (PDT)
Subject: [antlr-interest] compiling from sources other than files with the C
	runtime (std::string)
Message-ID: <404357.90728.qm@web50111.mail.re2.yahoo.com>


Hi,

I was wondering if I could get some help with a question concerning using some of the C runtime structures. I am curious how you would for example use the ANTLRxxz functions and structures to parse from something like a std::string. 

Thanks in advance,

Carter.


      

From parrt at antlr.org  Fri Jul 10 11:40:50 2009
From: parrt at antlr.org (Terence Parr)
Date: Fri, 10 Jul 2009 11:40:50 -0700
Subject: [antlr-interest] ST feature proposal
In-Reply-To: <234440.52847.qm@web55907.mail.re3.yahoo.com>
References: <F23CAE6F-0460-4C05-87B1-FDB9D1180E9E@antlr.org>
	<234440.52847.qm@web55907.mail.re3.yahoo.com>
Message-ID: <042418A5-6AFD-4307-B210-77DF576C240F@antlr.org>


On Jul 9, 2009, at 7:14 PM, Loring Craymer wrote:

>
> Hmm--could you make this "either output a \ or escape a newline" for  
> <\\>?  The lack of a way to output a \ from ST is annoying and  
> escaping newlines is rather minimal functionality for a lexeme.

Doesn't \ work outside of template expression?

Ter

From parrt at cs.usfca.edu  Fri Jul 10 11:42:26 2009
From: parrt at cs.usfca.edu (Terence Parr)
Date: Fri, 10 Jul 2009 11:42:26 -0700
Subject: [antlr-interest] ST feature proposal
In-Reply-To: <4.1.20090709190822.067e2c88@grahamwideman.com>
References: <4.1.20090709190822.067e2c88@grahamwideman.com>
Message-ID: <B7181365-75E1-4C67-A745-EBFECB79A21D@cs.usfca.edu>

Hi Graham, yep, i wonder if we need both "ignore newline" and "ignore  
newline and indentation".  Actually, Ignore \n without ignoring  
whitespace doesn't make any sense because without a \n there is no  
indentation ;)

I think <\\> should work just fine and would be very helpful.

Ter

On Jul 9, 2009, at 7:19 PM, Graham Wideman wrote:

> Hi Ter,
>
> Idea looks attractive to me. Comments:
>
>> Perhaps we need another special symbol that means
>> allow me to do a newline and it didn't the next line,
>> but don't put it into the output.
>
> "it didn't"  probably = "indent"?
>
> So basically, the double-backslash expression means ignore  
> subsequent whitespace that matches some pattern, probably:
>
>    [space or tab]* newline [space or tab]*
>
> ... or did you intend more like:
>
>    [space or tab or newline]*
>
> ...following which could be another expression, or non-whitespace  
> string.
>
> Issue: Might there be occasions where you actually want to retain a  
> space before what follows, and if so what do you do about that? I'm  
> not *sure* this is a problem, just noting it.
>
> Perhaps could have optional space suffixed to the double-backslash  
> expression?
>
> Ie:
> <\\>  vs
> <\\ >
>
> My 2 cents
>
> -- Graham
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address


From gwlist at grahamwideman.com  Fri Jul 10 12:49:00 2009
From: gwlist at grahamwideman.com (Graham Wideman)
Date: Fri, 10 Jul 2009 12:49:00 -0700
Subject: [antlr-interest] ST feature proposal
In-Reply-To: <B7181365-75E1-4C67-A745-EBFECB79A21D@cs.usfca.edu>
References: <4.1.20090709190822.067e2c88@grahamwideman.com>
	<4.1.20090709190822.067e2c88@grahamwideman.com>
Message-ID: <4.1.20090710124835.01e85be8@grahamwideman.com>

Hi Ter,

At 7/10/2009 11:42 AM, Terence Parr wrote:
>Hi Graham, yep, i wonder if we need both "ignore newline" and "ignore  
>newline and indentation".  Actually, Ignore \n without ignoring  
>whitespace doesn't make any sense because without a \n there is no  
>indentation ;)
>I think <\\> should work just fine and would be very helpful.

I agree that having separate "ignore newline" and "ignore whitespace" is not useful, because once you've decided that you want the line/column positioning of a chunk of ST input text to serve input text aesthetics rather than specifying output then neither line nor column of the input text in that neighborhood is relevant to the output.

That said, there's still a need to address the two points I raised:

1. What is the extent of "ignore newlines and whitespace": 
  -- just one line, or 
  -- all up to next non-whitespace?

2. How to specify what whitespace (if any) that you *do* want in the output at the location of the <\\>.

-- Graham

From gerald at certiv.net  Fri Jul 10 13:20:17 2009
From: gerald at certiv.net (Gerald Rosenberg)
Date: Fri, 10 Jul 2009 13:20:17 -0700
Subject: [antlr-interest] ST feature proposal
In-Reply-To: <4.1.20090710124835.01e85be8@grahamwideman.com>
References: <4.1.20090709190822.067e2c88@grahamwideman.com>
	<4.1.20090709190822.067e2c88@grahamwideman.com>
	<4.1.20090710124835.01e85be8@grahamwideman.com>
Message-ID: <200907102022.n6AKMNJZ023458@zinc.newtechlaw.com>

At 12:49 PM 7/10/2009, Graham Wideman wrote:
>Hi Ter,
>
>At 7/10/2009 11:42 AM, Terence Parr wrote:
> >Hi Graham, yep, i wonder if we need both "ignore newline" and "ignore
> >newline and indentation".  Actually, Ignore \n without ignoring
> >whitespace doesn't make any sense because without a \n there is no
> >indentation ;)
> >I think <\\> should work just fine and would be very helpful.
>
>I agree that having separate "ignore newline" and "ignore 
>whitespace" is not useful, because once you've decided that you want 
>the line/column positioning of a chunk of ST input text to serve 
>input text aesthetics rather than specifying output then neither 
>line nor column of the input text in that neighborhood is relevant 
>to the output.
>
>That said, there's still a need to address the two points I raised:
>
>1. What is the extent of "ignore newlines and whitespace":
>   -- just one line, or
>   -- all up to next non-whitespace?
>
>2. How to specify what whitespace (if any) that you *do* want in the 
>output at the location of the <\\>.

Given that ST tends to preserve whitespace, the least change rule 
would be to preserve any whitespace immediately prior to the <\\> and 
consume all whitespace immediately after.

If there were some reason to want to ignore a whitespace sequence, 
followed immediately by a whitespace sequence *not* to be ignored, a 
second instance of <\\> could be used as a whitespace ignore 
terminator.  But, are there real circumstances where this is needed? 


From sylvain_gregory at bah.com  Fri Jul 10 13:28:48 2009
From: sylvain_gregory at bah.com (Sylvain, Gregory [USA])
Date: Fri, 10 Jul 2009 16:28:48 -0400
Subject: [antlr-interest] Proper handling of newlines with gUnit???? (was:
 Null Pointer Exception from valid gUnit test)...
In-Reply-To: <mailman.1.1247166001.23860.antlr-interest@antlr.org>
References: <mailman.1.1247166001.23860.antlr-interest@antlr.org>
Message-ID: <A529CD893DE9BE4F8C753EA29B97527C08C9A15D@ASHBMBX03.resource.ds.bah.com>

 

Seeing that no one had a reply to my earlier query, I assume something got lost in the message or I am just being stupid.

I like to assume the former :-)

I have been able to unit test the lexer, but the parser is giving me problems.  Like I said, I am able to run the exact same text strings through the interpreter and everything works fine.  But when I include the same strings in the .gunit file itself (with either dbl. quotes or dbl. angle brackets, '"' or '<<' & '>>') or include the test in a separate input file, the unit tests fails!

I'm suspecting that it may be the way gunit is handling multiple newlines?  The grammar defines a EOL as follows:

EOL	: ( CRCRLF | CRLF | LF ) ;
fragment CRCRLF : '\r\r\n' ;
fragment CRLF : '\r\n' ;
fragment LF : '\n' ;


With the CRCRLF form of newline being the most prevelant.

Any ideas about how to get these unit tests to work via gunit?  

Thanks in advance, any clues would be appreciated.
Greg

-----Original Message-----
Message: 10
Date: Thu, 9 Jul 2009 07:47:19 -0400
From: "Sylvain, Gregory [USA]" <sylvain_gregory at bah.com>
Subject: [antlr-interest] Null Pointer Exception from valid gUnit test
	(ANTLR 3.1.3 and gnuit-1.0.4)
To: "antlr-interest at antlr.org" <antlr-interest at antlr.org>
Message-ID: <825E1B6D-3BEB-4399-9B75-43FB79BF2878 at mimectl>
Content-Type: text/plain; charset="iso-8859-1"

Hi,

I've been trying to complete some unit testing of a grammar, and I keep getting Null Pointer Exceptions from valid gUnit tests.  (The unit test strings work fine from the Interpreter in Eclipse (ANTLR IDE) and ANTLRWorks).  Is this is a known bug, or am I just doing something obviously wrong.

Thanks for any clues here,
Greg
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090709/bc267843/attachment-0001.html 

------------------------------

From parrt at cs.usfca.edu  Fri Jul 10 14:46:41 2009
From: parrt at cs.usfca.edu (Terence Parr)
Date: Fri, 10 Jul 2009 14:46:41 -0700
Subject: [antlr-interest] ST feature proposal
In-Reply-To: <200907102022.n6AKMNJZ023458@zinc.newtechlaw.com>
References: <4.1.20090709190822.067e2c88@grahamwideman.com>
	<4.1.20090709190822.067e2c88@grahamwideman.com>
	<4.1.20090710124835.01e85be8@grahamwideman.com>
	<200907102022.n6AKMNJZ023458@zinc.newtechlaw.com>
Message-ID: <CC0D750A-4FAD-4993-8B68-59E599904731@cs.usfca.edu>

Hi Guys, yep, I believe that it should consume from <\\> to the next  
non-whitespace character as if none of that existed.

Ter


From antlr at mirality.co.nz  Fri Jul 10 15:16:51 2009
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Sat, 11 Jul 2009 10:16:51 +1200
Subject: [antlr-interest] Proper handling of newlines with gUnit????
 (was: Null Pointer Exception from valid gUnit test)...
In-Reply-To: <A529CD893DE9BE4F8C753EA29B97527C08C9A15D@ASHBMBX03.resourc
	e.ds.bah.com>
References: <mailman.1.1247166001.23860.antlr-interest@antlr.org>
	<A529CD893DE9BE4F8C753EA29B97527C08C9A15D@ASHBMBX03.resource.ds.bah.com>
Message-ID: <20090710221703.44C993418151@www.antlr.org>

At 08:28 11/07/2009, Sylvain, Gregory [USA] wrote:
 >I'm suspecting that it may be the way gunit is handling multiple 

 >newlines?  The grammar defines a EOL as follows:
 >
 >EOL	: ( CRCRLF | CRLF | LF ) ;
 >fragment CRCRLF : '\r\r\n' ;
 >fragment CRLF : '\r\n' ;
 >fragment LF : '\n' ;

I don't have a direct answer to your question, but you could try 
rewriting that rule like this and see if it helps:

EOL : ('\r' '\r'?)? '\n' ;


From haluongvn at gmail.com  Fri Jul 10 19:54:08 2009
From: haluongvn at gmail.com (Ha Luong)
Date: Fri, 10 Jul 2009 19:54:08 -0700
Subject: [antlr-interest] How to get the inner ${identifier}.text
Message-ID: <61577c8f0907101954g25ab23dcwab7395756153b594@mail.gmail.com>

Hi all,

I couldn't get the inner ${identifier}.text, and the grammar as follow:

q1_1a_bk
     (time_phrase)?
     {
         System.out.println($prep_time.text);
     }
      '\?';

time_phrase
    :    prep_time time;

prep_time :
        'trong' |
        'sau';

time    : ('n\\u0103m')? DecimalLiteral  ;

Please help me how I can get the $prep_time.text.

Thank you very much,
Ha
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090710/3ac632e5/attachment.html 

From antlr at mirality.co.nz  Fri Jul 10 20:27:39 2009
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Sat, 11 Jul 2009 15:27:39 +1200
Subject: [antlr-interest] How to get the inner ${identifier}.text
In-Reply-To: <61577c8f0907101954g25ab23dcwab7395756153b594@mail.gmail.co
 m>
References: <61577c8f0907101954g25ab23dcwab7395756153b594@mail.gmail.com>
Message-ID: <20090711032751.E07B43418431@www.antlr.org>

At 14:54 11/07/2009, Ha Luong wrote:
>q1_1a_bk
>      (time_phrase)?
>      {
>          System.out.println($prep_time.text);
>      }
>       '\?';
>
>time_phrase
>     :    prep_time time;

You can either use a scope or return values for this.  Here's an 
example for using return values:

q1_1a_bk
   : (t=time_phrase { System.out.println($t.prep); })?
     '\?'
   ;

time_phrase returns [String prep]
   : prep_time time { $prep = $prep_time.text; }
   ;


From david-sarah at jacaranda.org  Fri Jul 10 22:11:52 2009
From: david-sarah at jacaranda.org (David-Sarah Hopwood)
Date: Sat, 11 Jul 2009 06:11:52 +0100
Subject: [antlr-interest] Get code in constructor (Java target)
In-Reply-To: <5f59a7210907100137i37bd4a23ia3fde13c3aa97bf4@mail.gmail.com>
References: <5f59a7210907100137i37bd4a23ia3fde13c3aa97bf4@mail.gmail.com>
Message-ID: <4A581F18.8000106@jacaranda.org>

Gustaf Johansson wrote:
> Hello,
> 
> I have a global hashmap that i want to initialize in the constructor.

If you declare an instance field with an initializer, or use a
'static {...}' block, Java will effectively copy that initializer or
block into all constructors.

For example:

@parser::members {
  private Map<KeyType, ValueType> map = initMap();
}

or

@parser::members {
  private Map<KeyType, ValueType> map;

  static {
    map = new HashMap<KeyType, ValueType>();
    ...
  }
}

-- 
David-Sarah Hopwood  ?  http://davidsarah.livejournal.com


From gwlist at grahamwideman.com  Fri Jul 10 22:27:22 2009
From: gwlist at grahamwideman.com (Graham Wideman)
Date: Fri, 10 Jul 2009 22:27:22 -0700
Subject: [antlr-interest] ST feature proposal
In-Reply-To: <200907102022.n6AKMNJZ023458@zinc.newtechlaw.com>
References: <4.1.20090710124835.01e85be8@grahamwideman.com>
	<4.1.20090709190822.067e2c88@grahamwideman.com>
	<4.1.20090709190822.067e2c88@grahamwideman.com>
	<4.1.20090710124835.01e85be8@grahamwideman.com>
Message-ID: <4.1.20090710222321.01e85be8@grahamwideman.com>

Gerald rightly observed that...

>Given that ST tends to preserve whitespace, the least change rule 
>would be to preserve any whitespace immediately prior to the <\\> 

... and also the whitespace preceding the <\\> is easy to see. So this indeed seems to satisfy the issue of how to specify whitespace to include.

> and consume all whitespace immediately after.

... I think that makes sense too.

-- Graham



From parrt at cs.usfca.edu  Sat Jul 11 09:26:47 2009
From: parrt at cs.usfca.edu (Terence Parr)
Date: Sat, 11 Jul 2009 09:26:47 -0700
Subject: [antlr-interest] ST feature proposal
In-Reply-To: <4.1.20090710222321.01e85be8@grahamwideman.com>
References: <4.1.20090710124835.01e85be8@grahamwideman.com>
	<4.1.20090709190822.067e2c88@grahamwideman.com>
	<4.1.20090709190822.067e2c88@grahamwideman.com>
	<4.1.20090710124835.01e85be8@grahamwideman.com>
	<4.1.20090710222321.01e85be8@grahamwideman.com>
Message-ID: <C96014AA-EAF0-48A1-B231-6A646E64AA83@cs.usfca.edu>

got this working. it's like a comment; all done in the lexer. looks nice
Ter
On Jul 10, 2009, at 10:27 PM, Graham Wideman wrote:

> Gerald rightly observed that...
>
>> Given that ST tends to preserve whitespace, the least change rule
>> would be to preserve any whitespace immediately prior to the <\\>
>
> ... and also the whitespace preceding the <\\> is easy to see. So  
> this indeed seems to satisfy the issue of how to specify whitespace  
> to include.
>
>> and consume all whitespace immediately after.
>
> ... I think that makes sense too.
>
> -- Graham
>
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address


From carter_cheng at yahoo.com  Sat Jul 11 09:36:12 2009
From: carter_cheng at yahoo.com (Carter Cheng)
Date: Sat, 11 Jul 2009 09:36:12 -0700 (PDT)
Subject: [antlr-interest] Correct way to pass arguments with ANTLR
Message-ID: <198261.33786.qm@web50103.mail.re2.yahoo.com>


I have been having some difficulties getting a rule which looks somewhat as follows to work with ANTLR 3.1.3 and the C runtime. I am not sure if I am passing the parameter in question correctly. The rule is as follows-

exp	: p=primary (selector[p])*
        ;

The error I am getting is this:

lpcParser.c: In function ?void synpred23_lpc_fragment(lpcParser_Ctx_struct*)?:
lpcParser.c:10684: error: ?p? was not declared in this scope

Thanks in advance,

Carter.


      

From parrt at cs.usfca.edu  Sat Jul 11 10:43:46 2009
From: parrt at cs.usfca.edu (Terence Parr)
Date: Sat, 11 Jul 2009 10:43:46 -0700
Subject: [antlr-interest] Correct way to pass arguments with ANTLR
In-Reply-To: <198261.33786.qm@web50103.mail.re2.yahoo.com>
References: <198261.33786.qm@web50103.mail.re2.yahoo.com>
Message-ID: <A39B791E-C923-4CD1-86D3-6B5FFA324970@cs.usfca.edu>

$p?
Ter
On Jul 11, 2009, at 9:36 AM, Carter Cheng wrote:

>
> I have been having some difficulties getting a rule which looks  
> somewhat as follows to work with ANTLR 3.1.3 and the C runtime. I am  
> not sure if I am passing the parameter in question correctly. The  
> rule is as follows-
>
> exp	: p=primary (selector[p])*
>        ;
>
> The error I am getting is this:
>
> lpcParser.c: In function ?void  
> synpred23_lpc_fragment(lpcParser_Ctx_struct*)?:
> lpcParser.c:10684: error: ?p? was not declared in this scope
>
> Thanks in advance,
>
> Carter.
>
>
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address


From carter_cheng at yahoo.com  Sat Jul 11 11:44:47 2009
From: carter_cheng at yahoo.com (Carter Cheng)
Date: Sat, 11 Jul 2009 11:44:47 -0700 (PDT)
Subject: [antlr-interest] Correct way to pass arguments with ANTLR
In-Reply-To: <A39B791E-C923-4CD1-86D3-6B5FFA324970@cs.usfca.edu>
Message-ID: <336372.71922.qm@web50109.mail.re2.yahoo.com>


Hi Terence,

Thanks for the reply. I managed to work around the problem by do this-

unary returns [exp::Exp* e]	
	: p=primary { $e = $p.e; }  (s=selector[e] { $e = $s.e;} )* 
        ;

I tried $p as well and it ANTLR doesnt seem to accept it.

Carter. 

--- On Sat, 7/11/09, Terence Parr <parrt at cs.usfca.edu> wrote:

> From: Terence Parr <parrt at cs.usfca.edu>
> Subject: Re: [antlr-interest] Correct way to pass arguments with ANTLR
> To: "Carter Cheng" <carter_cheng at yahoo.com>
> Cc: antlr-interest at antlr.org
> Date: Saturday, July 11, 2009, 10:43 AM
> $p?
> Ter
> On Jul 11, 2009, at 9:36 AM, Carter Cheng wrote:
> 
> > 
> > I have been having some difficulties getting a rule
> which looks somewhat as follows to work with ANTLR 3.1.3 and
> the C runtime. I am not sure if I am passing the parameter
> in question correctly. The rule is as follows-
> > 
> > exp??? : p=primary (selector[p])*
> >? ? ? ? ;
> > 
> > The error I am getting is this:
> > 
> > lpcParser.c: In function ?void
> synpred23_lpc_fragment(lpcParser_Ctx_struct*)?:
> > lpcParser.c:10684: error: ?p? was not declared in
> this scope
> > 
> > Thanks in advance,
> > 
> > Carter.
> > 
> > 
> > 
> > 
> > List: http://www.antlr.org/mailman/listinfo/antlr-interest
> > Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
> 
> 


      

From nvivo.misc at gmail.com  Sun Jul 12 07:27:10 2009
From: nvivo.misc at gmail.com (Natan)
Date: Sun, 12 Jul 2009 11:27:10 -0300
Subject: [antlr-interest] Interpreter exceptions?
In-Reply-To: <4a572791.0902be0a.4f47.184dSMTPIN_ADDED@mx.google.com>
References: <4A565804.8030801@gmail.com>
	<4a572791.0902be0a.4f47.184dSMTPIN_ADDED@mx.google.com>
Message-ID: <4A59F2BE.5010700@gmail.com>

Gavin Lambert wrote:
> I've usually found the interpreter to be unreliable even without 
> getting into actions and predicates.  It's usually best to just 
> pretend it doesn't exist, and use a combination of the debugger, unit 
> tests, and the main code instead.

I wasn't sure if this was something in my setup, if I was doing 
something wrong...

I'm now using only the Run/Debug commands to test, and errors now 
started to make sense =)

Thanks!

From carter_cheng at yahoo.com  Sun Jul 12 07:55:18 2009
From: carter_cheng at yahoo.com (Carter Cheng)
Date: Sun, 12 Jul 2009 07:55:18 -0700 (PDT)
Subject: [antlr-interest] Correct way to pass arguments with ANTLR
In-Reply-To: <336372.71922.qm@web50109.mail.re2.yahoo.com>
Message-ID: <575053.51119.qm@web50101.mail.re2.yahoo.com>


Actually this still isnt working. Is what I have legal ANTLR 3.1.3 code? I am getting the following error-

lpcParser.c: In function ?void synpred49_lpc_fragment(lpcParser_Ctx_struct*)?:
lpcParser.c:13341: error: ?e? was not declared in this scope


Generated by the following predicate block-

// $ANTLR start synpred49_lpc
static void synpred49_lpc_fragment(plpcParser ctx ) 
{
	exp::Exp* s;
	#undef	RETURN_TYPE_s
	#define	RETURN_TYPE_s exp::Exp*

	s = NULL;

    // /home/carter/sorrows-working5/sorrows/trunk/src/compiler/lpc.g:248:31: (s= selector[e] )
    // /home/carter/sorrows-working5/sorrows/trunk/src/compiler/lpc.g:248:31: s= selector[e]
    {
        FOLLOWPUSH(FOLLOW_selector_in_synpred49_lpc1550);
        s=selector(ctx, e);

        FOLLOWPOP();
        if  (HASEXCEPTION())
        {
            goto rulesynpred49_lpcEx;
        }
        if (HASFAILED())
        {
            return ;
        }

    }

I am not sure how best to fix this. Any advice would be appreciated. Thanks in advance,

Carter.


--- On Sat, 7/11/09, Carter Cheng <carter_cheng at yahoo.com> wrote:

> From: Carter Cheng <carter_cheng at yahoo.com>
> Subject: Re: [antlr-interest] Correct way to pass arguments with ANTLR
> To: "Terence Parr" <parrt at cs.usfca.edu>
> Cc: antlr-interest at antlr.org
> Date: Saturday, July 11, 2009, 11:44 AM
> 
> Hi Terence,
> 
> Thanks for the reply. I managed to work around the problem
> by do this-
> 
> unary returns [exp::Exp* e]??? 
> ??? : p=primary { $e = $p.e; }?
> (s=selector[e] { $e = $s.e;} )* 
> ? ? ? ? ;
> 
> I tried $p as well and it ANTLR doesnt seem to accept it.
> 
> Carter. 
> 
> --- On Sat, 7/11/09, Terence Parr <parrt at cs.usfca.edu>
> wrote:
> 
> > From: Terence Parr <parrt at cs.usfca.edu>
> > Subject: Re: [antlr-interest] Correct way to pass
> arguments with ANTLR
> > To: "Carter Cheng" <carter_cheng at yahoo.com>
> > Cc: antlr-interest at antlr.org
> > Date: Saturday, July 11, 2009, 10:43 AM
> > $p?
> > Ter
> > On Jul 11, 2009, at 9:36 AM, Carter Cheng wrote:
> > 
> > > 
> > > I have been having some difficulties getting a
> rule
> > which looks somewhat as follows to work with ANTLR
> 3.1.3 and
> > the C runtime. I am not sure if I am passing the
> parameter
> > in question correctly. The rule is as follows-
> > > 
> > > exp??? : p=primary (selector[p])*
> > >? ? ? ? ;
> > > 
> > > The error I am getting is this:
> > > 
> > > lpcParser.c: In function ?void
> > synpred23_lpc_fragment(lpcParser_Ctx_struct*)?:
> > > lpcParser.c:10684: error: ?p? was not
> declared in
> > this scope
> > > 
> > > Thanks in advance,
> > > 
> > > Carter.
> > > 
> > > 
> > > 
> > > 
> > > List: http://www.antlr.org/mailman/listinfo/antlr-interest
> > > Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
> > 
> > 
> 
> 
> ? ? ? 
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
> 


      

From jimi at temporal-wave.com  Sun Jul 12 08:39:22 2009
From: jimi at temporal-wave.com (Jim Idle)
Date: Sun, 12 Jul 2009 08:39:22 -0700
Subject: [antlr-interest] Correct way to pass arguments with ANTLR
In-Reply-To: <575053.51119.qm@web50101.mail.re2.yahoo.com>
References: <575053.51119.qm@web50101.mail.re2.yahoo.com>
Message-ID: <D75FD294-AC6B-4090-9361-CDE813395E23@temporal-wave.com>

Your predicates are hoisted and so you do not have access to the local  
parameter. Search the list archives and  you will see how to use  
scopes for this. Just assign the value to a scope variable and use  
that in your predicate.

Jim

On Jul 12, 2009, at 7:55 AM, Carter Cheng <carter_cheng at yahoo.com>  
wrote:

>
> Actually this still isnt working. Is what I have legal ANTLR 3.1.3  
> code? I am getting the following error-
>
> lpcParser.c: In function ?void synpred49_lpc_fragment(lpcParser_Ctx_ 
> struct*)?:
> lpcParser.c:13341: error: ?e? was not declared in this scope
>
>
> Generated by the following predicate block-
>
> // $ANTLR start synpred49_lpc
> static void synpred49_lpc_fragment(plpcParser ctx )
> {
>    exp::Exp* s;
>    #undef    RETURN_TYPE_s
>    #define    RETURN_TYPE_s exp::Exp*
>
>    s = NULL;
>
>    // /home/carter/sorrows-working5/sorrows/trunk/src/compiler/lpc.g: 
> 248:31: (s= selector[e] )
>    // /home/carter/sorrows-working5/sorrows/trunk/src/compiler/lpc.g: 
> 248:31: s= selector[e]
>    {
>        FOLLOWPUSH(FOLLOW_selector_in_synpred49_lpc1550);
>        s=selector(ctx, e);
>
>        FOLLOWPOP();
>        if  (HASEXCEPTION())
>        {
>            goto rulesynpred49_lpcEx;
>        }
>        if (HASFAILED())
>        {
>            return ;
>        }
>
>    }
>
> I am not sure how best to fix this. Any advice would be appreciated.  
> Thanks in advance,
>
> Carter.
>
>
> --- On Sat, 7/11/09, Carter Cheng <carter_cheng at yahoo.com> wrote:
>
>> From: Carter Cheng <carter_cheng at yahoo.com>
>> Subject: Re: [antlr-interest] Correct way to pass arguments with  
>> ANTLR
>> To: "Terence Parr" <parrt at cs.usfca.edu>
>> Cc: antlr-interest at antlr.org
>> Date: Saturday, July 11, 2009, 11:44 AM
>>
>> Hi Terence,
>>
>> Thanks for the reply. I managed to work around the problem
>> by do this-
>>
>> unary returns [exp::Exp* e]
>>     : p=primary { $e = $p.e; }
>> (s=selector[e] { $e = $s.e;} )*
>>         ;
>>
>> I tried $p as well and it ANTLR doesnt seem to accept it.
>>
>> Carter.
>>
>> --- On Sat, 7/11/09, Terence Parr <parrt at cs.usfca.edu>
>> wrote:
>>
>>> From: Terence Parr <parrt at cs.usfca.edu>
>>> Subject: Re: [antlr-interest] Correct way to pass
>> arguments with ANTLR
>>> To: "Carter Cheng" <carter_cheng at yahoo.com>
>>> Cc: antlr-interest at antlr.org
>>> Date: Saturday, July 11, 2009, 10:43 AM
>>> $p?
>>> Ter
>>> On Jul 11, 2009, at 9:36 AM, Carter Cheng wrote:
>>>
>>>>
>>>> I have been having some difficulties getting a
>> rule
>>> which looks somewhat as follows to work with ANTLR
>> 3.1.3 and
>>> the C runtime. I am not sure if I am passing the
>> parameter
>>> in question correctly. The rule is as follows-
>>>>
>>>> exp    : p=primary (selector[p])*
>>>>         ;
>>>>
>>>> The error I am getting is this:
>>>>
>>>> lpcParser.c: In function ?void
>>> synpred23_lpc_fragment(lpcParser_Ctx_struct*)?:
>>>> lpcParser.c:10684: error: ?p? was not
>> declared in
>>> this scope
>>>>
>>>> Thanks in advance,
>>>>
>>>> Carter.
>>>>
>>>>
>>>>
>>>>
>>>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>>>> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>>>
>>>
>>
>>
>>
>>
>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>>
>
>
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address

From weiyi.ud at gmail.com  Sun Jul 12 11:20:53 2009
From: weiyi.ud at gmail.com (Gmail)
Date: Sun, 12 Jul 2009 14:20:53 -0400
Subject: [antlr-interest] how to catch line and column information
Message-ID: <6E8C3061-11FC-4548-98D8-F59D993CC014@gmail.com>

hi everyone,

I have a question about storing the position information(start/end  
line and start/end column for every token) in Antlr grammar. I  
searched the internet and it seemed that a common approach was to  
extend an existing Antlr token class to add some extra fields, such as  
endLine and endColumn. However, to do this, the method  
setTokenObjectClass(String) must be called to let the lexer know that  
we want to use a customized token class. My question is, I can't find  
this method in the Lexer class. And since the generated class extends  
Lexer, I can't call the setTokenObjectClass method from the generated  
Lexer class. Did I make any mistake or miss anything I should know? If  
anyone can share some ideas about this issue, I would be grateful.  
Thanks!
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090712/7a7c659e/attachment.html 

From jenncooper84 at yahoo.co.uk  Mon Jul 13 02:35:00 2009
From: jenncooper84 at yahoo.co.uk (Jennifer Cooper)
Date: Mon, 13 Jul 2009 09:35:00 +0000 (GMT)
Subject: [antlr-interest] two part operators
Message-ID: <759739.85691.qm@web24611.mail.ird.yahoo.com>

Hi everyone!
I've just started using antlr and come upon a problem. T try to make lexer recognize two different operators: OP and OP NOT. I want to treat both of them as binary operators and not to treat NOT as unary operator.  My current solution is:

op_expr 
    :    expr (OP^ not_expr)* 
    ; 
not_expr 
    :    expr 
    |       NOT^ expr  
    ;

but this one obviously doesn't treat NOT as part of the binary OP NOT operator.

Any clues?

Cheers,
Jennifer


      
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090713/8fb0f2ae/attachment.html 

From jsrs701 at yahoo.com  Mon Jul 13 04:58:32 2009
From: jsrs701 at yahoo.com (J. Stephen Riley Silber)
Date: Mon, 13 Jul 2009 04:58:32 -0700 (PDT)
Subject: [antlr-interest] two part operators
Message-ID: <816112.32554.qm@web33306.mail.mud.yahoo.com>

I might not be understanding how you want them both to be binary operators.? But what if you have two different tokens for each operator, eg. 'X' and 'X NOT', and treat them as different operators?

--- On Mon, 7/13/09, Jennifer Cooper <jenncooper84 at yahoo.co.uk> wrote:

From: Jennifer Cooper <jenncooper84 at yahoo.co.uk>
Subject: [antlr-interest] two part operators
To: antlr-interest at antlr.org
Date: Monday, July 13, 2009, 2:35 AM

Hi everyone!
I've just started using antlr and come upon a problem. T try to make lexer recognize two different operators: OP and OP NOT. I want to treat both of them as binary operators and not to treat NOT as unary operator.? My current solution is:

op_expr

??? :??? expr (OP^ not_expr)*

??? ;

not_expr

??? :??? expr

??? |?????? NOT^ expr?

??? ;

but this one obviously doesn't treat NOT as part of the binary OP NOT operator.

Any clues?

Cheers,
Jennifer







      
-----Inline Attachment Follows-----


List: http://www.antlr.org/mailman/listinfo/antlr-interest
Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090713/47553648/attachment.html 

From jimi at temporal-wave.com  Mon Jul 13 09:10:15 2009
From: jimi at temporal-wave.com (Jim Idle)
Date: Mon, 13 Jul 2009 09:10:15 -0700
Subject: [antlr-interest] two part operators
In-Reply-To: <759739.85691.qm@web24611.mail.ird.yahoo.com>
References: <759739.85691.qm@web24611.mail.ird.yahoo.com>
Message-ID: <4A5B5C67.9030006@temporal-wave.com>

An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090713/f77e98d8/attachment.html 

From jimi at temporal-wave.com  Mon Jul 13 09:14:06 2009
From: jimi at temporal-wave.com (Jim Idle)
Date: Mon, 13 Jul 2009 09:14:06 -0700
Subject: [antlr-interest] how to catch line and column information
In-Reply-To: <6E8C3061-11FC-4548-98D8-F59D993CC014@gmail.com>
References: <6E8C3061-11FC-4548-98D8-F59D993CC014@gmail.com>
Message-ID: <4A5B5D4E.7050802@temporal-wave.com>

An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090713/0fad6947/attachment.html 

From joe.peterson at intel.com  Mon Jul 13 10:33:51 2009
From: joe.peterson at intel.com (Peterson, Joe)
Date: Mon, 13 Jul 2009 10:33:51 -0700
Subject: [antlr-interest] Composite grammars and "no start rule" warning
Message-ID: <BCF80163639E9F4296FC4B208F99BA47F9E95A34@orsmsx504.amr.corp.intel.com>

Howdy,

I have a question about how to eliminate the "no start rule" warning when using a composite grammar.

I've had to make a change to my grammar recently that requires me to use a rule in a file that I use elsewhere. The rule is in a separate file and I want to keep that to make it easier to maintain. Because I have two locations that I need to use it, I wind up with the warning: warning(138): another_file.g:0:0: grammar another_file: no start rule (no rule can obviously be followed by EOF).

Now, I want to figure out how to reuse the rule in a separate file without this warning. Below is a super stripped version of the files with the names changed to protect confidentiality. (And a lot of white space removed.)

The only way I've found to eliminate it to create a single rule to call the common rule.  For example, in the below, I could add a rule "common_list" in main.g and then change all the list references to common_list.  That is not a very satisfactory solution to me.  Is there another way?

-JEEP

//Main.g
grammar main;
options {    language = C; }
import a_file, another_file;
unit  : list? group;
// can add: common_list : list here, but seems no so good to me
HRM : 'Hrm';
SIGH : 'Sigh' ;
KEYWORD : 'Keyword' ;
ITEMS : 'Items' ;
SEMICOLON : ';'  ;

////
// a_file.g
parser grammar a_file;
group : section list? section2+  ;
section  : HRM    ;
section2   : SIGH ;

////
// another_file.g
parser grammar another_file;
list: stmt+;
stmt : KEYWORD items SEMICOLON;
items: ITEMS;
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090713/bf2bda1b/attachment.html 

From jimi at temporal-wave.com  Mon Jul 13 10:42:41 2009
From: jimi at temporal-wave.com (Jim Idle)
Date: Mon, 13 Jul 2009 10:42:41 -0700
Subject: [antlr-interest] Composite grammars and "no start rule" warning
In-Reply-To: <BCF80163639E9F4296FC4B208F99BA47F9E95A34@orsmsx504.amr.corp.intel.com>
References: <BCF80163639E9F4296FC4B208F99BA47F9E95A34@orsmsx504.amr.corp.intel.com>
Message-ID: <4A5B7211.80103@temporal-wave.com>

An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090713/963997b4/attachment.html 

From ToddStevenson at ge.com  Mon Jul 13 10:46:59 2009
From: ToddStevenson at ge.com (Stevenson, Todd (GE Healthcare, consultant))
Date: Mon, 13 Jul 2009 13:46:59 -0400
Subject: [antlr-interest] I'm trying to suppress warnings in Java generated
	code
Message-ID: <93BD0000E4D72D458F0E8CDE6BA971A80D19C6CF@CINMLVEM11.e2k.ad.ge.com>

I want to use the '@SuppressWarnings' annotation in my generated Java
code but have been unable to make it work.  I followed the suggestion
that was in the FAQ listing on Antlr Wiki, but it did not work.  
 
I am using Antlr in Eclipse.  I have a copy of antlr that I downloaded
from antlr.org but Eclipse is using maven to get its copy of antlr.jar
 
It may not see the Java.stg that is on my machine because it is in a
different path than the antlr.jar that I referencing in eclipse.  How do
I know which java.stg is being used by my application?  Will antlr work
if it can't find a java.stg file at all?
 
thanks.
 
 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090713/2cf7a52e/attachment.html 

From antlr at mirality.co.nz  Mon Jul 13 13:51:48 2009
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Tue, 14 Jul 2009 08:51:48 +1200
Subject: [antlr-interest] Composite grammars and "no start rule" warning
In-Reply-To: <BCF80163639E9F4296FC4B208F99BA47F9E95A34@orsmsx504.amr.cor
	p.intel.com>
References: <BCF80163639E9F4296FC4B208F99BA47F9E95A34@orsmsx504.amr.corp.intel.com>
Message-ID: <20090713205159.DE0EE34184A1@www.antlr.org>

At 05:33 14/07/2009, Peterson, Joe wrote:
>I've had to make a change to my grammar recently that requires me 
>to use a rule in a file that I use elsewhere. The rule is in a 
>separate file and I want to keep that to make it easier to 
>maintain. Because I have two locations that I need to use it, I 
>wind up with the warning: warning(138): another_file.g:0:0: 
>grammar another_file: no start rule (no rule can obviously be 
>followed by EOF).
[...]
>import a_file, another_file;
>unit  : list? group;

If you're only using a_file and another_file from this grammar, 
then changing unit to:

   unit : list? group EOF;

ought to do the trick.

If you are using another_file from other contexts (or if the above 
doesn't work), then you could try defining a throwaway rule in 
another_file.g:

another_start : list EOF;

(Don't actually call it, unless you're actually trying to use 
another_file.g as your top-level grammar somewhere else.) 


From joe.peterson at intel.com  Mon Jul 13 14:06:22 2009
From: joe.peterson at intel.com (Peterson, Joe)
Date: Mon, 13 Jul 2009 14:06:22 -0700
Subject: [antlr-interest] Composite grammars and "no start rule" warning
In-Reply-To: <6e9f17bd-d220-4651-914f-90b1e90358ef@orsmsx601.amr.corp.intel.com>
References: <BCF80163639E9F4296FC4B208F99BA47F9E95A34@orsmsx504.amr.corp.intel.com>
	<6e9f17bd-d220-4651-914f-90b1e90358ef@orsmsx601.amr.corp.intel.com>
Message-ID: <BCF80163639E9F4296FC4B208F99BA47F9E95E30@orsmsx504.amr.corp.intel.com>

> If you are using another_file from other contexts (or if the above
> doesn't work), then you could try defining a throwaway rule in
> another_file.g:

> another_start : list EOF;

Ah, yeah, I could do this one. I remember either reading about this or doing this before. Today, it didn't occur to me to write code that will never be tested. My code coverage shouldn't suffer too much and I like this better than using a single rule to call into the file every time.

The other options won't work because I do use it elsewhere and it doesn't actually end with EOF. (The grammar is broken into 12 files.)

Thanks,
-JEEP

From troy.daniels at baesystems.com  Mon Jul 13 15:10:00 2009
From: troy.daniels at baesystems.com (Daniels, Troy (US SSA))
Date: Mon, 13 Jul 2009 18:10:00 -0400
Subject: [antlr-interest] Composite grammars and "no start rule" warning
Message-ID: <7t2aa4$3sqrhq@dmzms99802.na.baesystems.com>



> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of Peterson, Joe
> Sent: Monday, July 13, 2009 5:06 PM
> To: Gavin Lambert; antlr-interest at antlr.org
> Subject: Re: [antlr-interest] Composite grammars and "no start rule"
> warning
> 
> > If you are using another_file from other contexts (or if the above
> > doesn't work), then you could try defining a throwaway rule in
> > another_file.g:
> 
> > another_start : list EOF;
> 
> Ah, yeah, I could do this one. I remember either reading about this or
> doing this before. Today, it didn't occur to me to write code that
will
> never be tested. My code coverage shouldn't suffer too much and I like
> this better than using a single rule to call into the file every time.
> 

It's probably better from a style point of view to call the rule
something like __prevent_compiler_warnings.  That makes it obvious that
you're not expecting to have the rule called.

Troy


From dnagir at gmail.com  Tue Jul 14 09:43:54 2009
From: dnagir at gmail.com (Dmitiry Nagirnyak)
Date: Wed, 15 Jul 2009 02:43:54 +1000
Subject: [antlr-interest] Parsing HAML - significant and insignificant
	whitespaces
Message-ID: <73ee720a0907140943v19c7ac1m3a48b4b14673e7ba@mail.gmail.com>

Hi,

I am researching possibility to parse HAML syntax to port it to .NET. There
is project call NHAML but uses Regular Expressions instead of regular
parser.
While it is working great it has certain limitations.

So people start thinking about a real parser. And years ago I did some wotks
with ANTLR and have chance to revisit it.

My question is about whitespaces.
In NHAML whitespaces are significant at the beginning of line.

What I would like to have is this (star* for whitespace):

%A
**%B
****%B1
****%B2
**%C
****%C1

It would correspond to the tree sam type of tree (A in the root; B,C -
second level nodes, B1,B22, C1 - third level nodes).

It would be easy if the whitespaces would always be indented at the sane
number (here 2).
But this should be configurable. And even more, instead of whitespaces there
might be tabs. But let's skip this for now.

So grammar like this (just a quick draft) won't satisfy that:
nhaml    :    line*
    ;
line    :    indent? rule
    ;
indent    :    WS WS indent? // How to consume different number of WSs
depending on provided settings?
    ;
rule    :    ~WS (~NL)*
    ;

So the actual question is in rule "indent".
If I don't know required number of matches of WS during development, how can
I write grammar for that?

Cheers,
Dmitriy Nagirnyak.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090715/7ea49af4/attachment.html 

From nvlassopoulos at gmail.com  Tue Jul 14 09:57:23 2009
From: nvlassopoulos at gmail.com (Nick Vlassopoulos)
Date: Tue, 14 Jul 2009 17:57:23 +0100
Subject: [antlr-interest] Parsing HAML - significant and insignificant
	whitespaces
In-Reply-To: <73ee720a0907140943v19c7ac1m3a48b4b14673e7ba@mail.gmail.com>
References: <73ee720a0907140943v19c7ac1m3a48b4b14673e7ba@mail.gmail.com>
Message-ID: <1419225d0907140957m44e79982y3b796a4150d6bd8@mail.gmail.com>

Hi Dmitiry,

I am not sure if this is what you are looking for, but you might want to
have a look
on how the python grammar handles identation.
See for example:
http://www.antlr.org/grammar/1200715779785/Python.g

Best Regards,

Nikos


On Tue, Jul 14, 2009 at 5:43 PM, Dmitiry Nagirnyak <dnagir at gmail.com> wrote:

> Hi,
>
> I am researching possibility to parse HAML syntax to port it to .NET. There
> is project call NHAML but uses Regular Expressions instead of regular
> parser.
> While it is working great it has certain limitations.
>
> So people start thinking about a real parser. And years ago I did some
> wotks with ANTLR and have chance to revisit it.
>
> My question is about whitespaces.
> In NHAML whitespaces are significant at the beginning of line.
>
> What I would like to have is this (star* for whitespace):
>
> %A
> **%B
> ****%B1
> ****%B2
> **%C
> ****%C1
>
> It would correspond to the tree sam type of tree (A in the root; B,C -
> second level nodes, B1,B22, C1 - third level nodes).
>
> It would be easy if the whitespaces would always be indented at the sane
> number (here 2).
> But this should be configurable. And even more, instead of whitespaces
> there might be tabs. But let's skip this for now.
>
> So grammar like this (just a quick draft) won't satisfy that:
> nhaml    :    line*
>     ;
> line    :    indent? rule
>     ;
> indent    :    WS WS indent? // How to consume different number of WSs
> depending on provided settings?
>     ;
> rule    :    ~WS (~NL)*
>     ;
>
> So the actual question is in rule "indent".
> If I don't know required number of matches of WS during development, how
> can I write grammar for that?
>
> Cheers,
> Dmitriy Nagirnyak.
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090714/3179115a/attachment.html 

From nvlassopoulos at gmail.com  Tue Jul 14 10:02:49 2009
From: nvlassopoulos at gmail.com (Nick Vlassopoulos)
Date: Tue, 14 Jul 2009 18:02:49 +0100
Subject: [antlr-interest] Parsing HAML - significant and insignificant
	whitespaces
In-Reply-To: <1419225d0907140957m44e79982y3b796a4150d6bd8@mail.gmail.com>
References: <73ee720a0907140943v19c7ac1m3a48b4b14673e7ba@mail.gmail.com>
	<1419225d0907140957m44e79982y3b796a4150d6bd8@mail.gmail.com>
Message-ID: <1419225d0907141002j64f652c3v6362fd5fe88b3475@mail.gmail.com>

Sorry for reposting, but I copied the wrong link,

http://www.antlr.org/grammar/1078018002577/python.tar.gz

Nikos



On Tue, Jul 14, 2009 at 5:57 PM, Nick Vlassopoulos
<nvlassopoulos at gmail.com>wrote:

> Hi Dmitiry,
>
> I am not sure if this is what you are looking for, but you might want to
> have a look
> on how the python grammar handles identation.
> See for example:
> http://www.antlr.org/grammar/1200715779785/Python.g
>
> Best Regards,
>
> Nikos
>
>
> On Tue, Jul 14, 2009 at 5:43 PM, Dmitiry Nagirnyak <dnagir at gmail.com>wrote:
>
>> Hi,
>>
>> I am researching possibility to parse HAML syntax to port it to .NET.
>> There is project call NHAML but uses Regular Expressions instead of regular
>> parser.
>> While it is working great it has certain limitations.
>>
>> So people start thinking about a real parser. And years ago I did some
>> wotks with ANTLR and have chance to revisit it.
>>
>> My question is about whitespaces.
>> In NHAML whitespaces are significant at the beginning of line.
>>
>> What I would like to have is this (star* for whitespace):
>>
>> %A
>> **%B
>> ****%B1
>> ****%B2
>> **%C
>> ****%C1
>>
>> It would correspond to the tree sam type of tree (A in the root; B,C -
>> second level nodes, B1,B22, C1 - third level nodes).
>>
>> It would be easy if the whitespaces would always be indented at the sane
>> number (here 2).
>> But this should be configurable. And even more, instead of whitespaces
>> there might be tabs. But let's skip this for now.
>>
>> So grammar like this (just a quick draft) won't satisfy that:
>> nhaml    :    line*
>>     ;
>> line    :    indent? rule
>>     ;
>> indent    :    WS WS indent? // How to consume different number of WSs
>> depending on provided settings?
>>     ;
>> rule    :    ~WS (~NL)*
>>     ;
>>
>> So the actual question is in rule "indent".
>> If I don't know required number of matches of WS during development, how
>> can I write grammar for that?
>>
>> Cheers,
>> Dmitriy Nagirnyak.
>>
>>
>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>> Unsubscribe:
>> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>>
>>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090714/0fd37575/attachment.html 

From asalh at mindspring.com  Tue Jul 14 14:10:11 2009
From: asalh at mindspring.com (Bryan S Follins)
Date: Tue, 14 Jul 2009 14:10:11 -0700
Subject: [antlr-interest] Simple code with a simple problem
Message-ID: <026a01ca04c7$79c46ec0$6d4d4c40$@com>

I tried creating a simple grammar in ANTLR Works as follows:

 

grammar T;

 

r              :               'call' ID ';'
(System.out.println('invoke '+$ID.text););

ID            :               'a'..'z'+;

WS         :               ('  ' | '\n' | '\r')+ ($channel=HIDDEN;);

 

 

 

 

I got the following error:

 

"Cannot generate the code because error (7): cannot find or open file
C:\Documentsand Settings\Owner\MyDocuments\5135\Summer5135\.g"

 

By the way I deleted the  .g file and tried to regenerate the code, but I
get the same error.  The last time I looked my paths were set up right.  I
know I must be doing something wrong that is simple to correct. Can someone
help me out on this?

 

Bryan

 

 

"When you have eliminated the impossible, whatever remains, however
improbable, must be the truth."

--Sherlock Holmes from Sir Arthur Conan Doyle's The Sign of Four.

 

I AM an information warrior...

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090714/9817fda0/attachment.html 

From asalh at mindspring.com  Tue Jul 14 15:00:40 2009
From: asalh at mindspring.com (Bryan S Follins)
Date: Tue, 14 Jul 2009 15:00:40 -0700
Subject: [antlr-interest] Simple code with a simple problem
In-Reply-To: <026a01ca04c7$79c46ec0$6d4d4c40$@com>
References: <026a01ca04c7$79c46ec0$6d4d4c40$@com>
Message-ID: <029201ca04ce$871e1470$955a3d50$@com>

Found my generation error.  I was using () instead of {} for the java code.
Generation is good. However, it still does not debug the code.  

 

When I run the debugger I get: "Compiler failed with result code 1."   Does
anyone know that means?

 

 

From: antlr-interest-bounces at antlr.org
[mailto:antlr-interest-bounces at antlr.org] On Behalf Of Bryan S Follins
Sent: Tuesday, July 14, 2009 14:10
To: antlr-interest at antlr.org
Subject: [antlr-interest] Simple code with a simple problem

 

I tried creating a simple grammar in ANTLR Works as follows:

 

grammar T;

 

r              :               'call' ID ';'
(System.out.println('invoke '+$ID.text););

ID            :               'a'..'z'+;

WS         :               ('  ' | '\n' | '\r')+ ($channel=HIDDEN;);

 

 

 

 

I got the following error:

 

"Cannot generate the code because error (7): cannot find or open file
C:\Documentsand Settings\Owner\MyDocuments\5135\Summer5135\.g"

 

By the way I deleted the  .g file and tried to regenerate the code, but I
get the same error.  The last time I looked my paths were set up right.  I
know I must be doing something wrong that is simple to correct. Can someone
help me out on this?

 

Bryan

 

 

"When you have eliminated the impossible, whatever remains, however
improbable, must be the truth."

--Sherlock Holmes from Sir Arthur Conan Doyle's The Sign of Four.

 

I AM an information warrior...

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090714/8707372a/attachment.html 

From parrt at cs.usfca.edu  Tue Jul 14 15:05:33 2009
From: parrt at cs.usfca.edu (Terence Parr)
Date: Tue, 14 Jul 2009 15:05:33 -0700
Subject: [antlr-interest] Simple code with a simple problem
In-Reply-To: <029201ca04ce$871e1470$955a3d50$@com>
References: <026a01ca04c7$79c46ec0$6d4d4c40$@com>
	<029201ca04ce$871e1470$955a3d50$@com>
Message-ID: <8275EC1B-25D5-4D7C-960F-A0FF5D05021E@cs.usfca.edu>

  are you sure that the file name is called T.g in AW?
T
On Jul 14, 2009, at 3:00 PM, Bryan S Follins wrote:

> Found my generation error.  I was using () instead of {} for the  
> java code.  Generation is good. However, it still does not debug the  
> code.
>
> When I run the debugger I get: ?Compiler failed with result code  
> 1.?   Does anyone know that means?
>
>
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-bounces at antlr.org 
> ] On Behalf Of Bryan S Follins
> Sent: Tuesday, July 14, 2009 14:10
> To: antlr-interest at antlr.org
> Subject: [antlr-interest] Simple code with a simple problem
>
> I tried creating a simple grammar in ANTLR Works as follows:
>
> grammar T;
>
> r              :               'call' ID  
> ';'              (System.out.println('invoke '+$ID.text););
> ID            :               'a'..'z'+;
> WS         :               ('  ' | '\n' | '\r')+ ($channel=HIDDEN;);
>
>
>
>
> I got the following error:
>
> ?Cannot generate the code because error (7): cannot find or open  
> file C:\Documentsand Settings\Owner\MyDocuments\5135\Summer5135\.g?
>
> By the way I deleted the  .g file and tried to regenerate the code,  
> but I get the same error.  The last time I looked my paths were set  
> up right.  I know I must be doing something wrong that is simple to  
> correct. Can someone help me out on this?
>
> Bryan
>
>
> "When you have eliminated the impossible, whatever remains, however  
> improbable, must be the truth."
> --Sherlock Holmes from Sir Arthur Conan Doyle's The Sign of Four.
>
> I AM an information warrior...
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address


From tnurkkala at cse.taylor.edu  Tue Jul 14 15:09:19 2009
From: tnurkkala at cse.taylor.edu (Tom Nurkkala)
Date: Tue, 14 Jul 2009 17:09:19 -0500
Subject: [antlr-interest] Simple code with a simple problem
In-Reply-To: <029201ca04ce$871e1470$955a3d50$@com>
References: <026a01ca04c7$79c46ec0$6d4d4c40$@com>
	<029201ca04ce$871e1470$955a3d50$@com>
Message-ID: <AD9ED579-64B1-421A-A76D-045709CD4E83@cse.taylor.edu>


On Tue/14-Jul, at 5:00 PM, Bryan S Follins wrote:

> Found my generation error.  I was using () instead of {} for the  
> java code.  Generation is good. However, it still does not debug the  
> code.
>
> When I run the debugger I get: ?Compiler failed with result code  
> 1.?   Does anyone know that means?


I copied your grammar into ANTLRWorks and changed both actions to use  
curly braces instead of parens.  Under the interpreter, I parsed "call  
foo;" against rule 'r' and it worked fine.  The parse tree follows.

tom.



--
Tom Nurkkala, PhD
Associate Professor
Computer Science & Engineering
Taylor University
tnurkkala at cse.taylor.edu

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090714/f14a88f5/attachment.html 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: pastedGraphic.png
Type: image/png
Size: 6585 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20090714/f14a88f5/attachment.png 

From asalh at mindspring.com  Tue Jul 14 15:17:43 2009
From: asalh at mindspring.com (Bryan S Follins)
Date: Tue, 14 Jul 2009 15:17:43 -0700
Subject: [antlr-interest] Simple code with a simple problem
In-Reply-To: <AD9ED579-64B1-421A-A76D-045709CD4E83@cse.taylor.edu>
References: <026a01ca04c7$79c46ec0$6d4d4c40$@com>
	<029201ca04ce$871e1470$955a3d50$@com>
	<AD9ED579-64B1-421A-A76D-045709CD4E83@cse.taylor.edu>
Message-ID: <02a901ca04d0$e8f046d0$bad0d470$@com>

Tom, 

I tried that,  I went to Debug.  As a matter of fact I tried highlighting
both the "text" and "file" radio buttons while using start rule "r" and it
gave me an error "Compiler failed with result code 1."

 

From: Tom Nurkkala [mailto:tnurkkala at cse.taylor.edu] 
Sent: Tuesday, July 14, 2009 15:09
To: Bryan S Follins
Cc: antlr-interest at antlr.org
Subject: Re: [antlr-interest] Simple code with a simple problem

 

 

On Tue/14-Jul, at 5:00 PM, Bryan S Follins wrote:





Found my generation error.  I was using () instead of {} for the java code.
Generation is good. However, it still does not debug the code. 

 

When I run the debugger I get: "Compiler failed with result code 1."   Does
anyone know that means?

 

 

I copied your grammar into ANTLRWorks and changed both actions to use curly
braces instead of parens.  Under the interpreter, I parsed "call foo;"
against rule 'r' and it worked fine.  The parse tree follows.

 

tom.

 



 

--

Tom Nurkkala, PhD

Associate Professor

Computer Science & Engineering

Taylor University

tnurkkala at cse.taylor.edu

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090714/76b826f5/attachment.html 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: image/png
Size: 6585 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20090714/76b826f5/attachment.png 

From asalh at mindspring.com  Tue Jul 14 15:26:13 2009
From: asalh at mindspring.com (Bryan S Follins)
Date: Tue, 14 Jul 2009 15:26:13 -0700
Subject: [antlr-interest] Simple code with a simple problem
In-Reply-To: <AD9ED579-64B1-421A-A76D-045709CD4E83@cse.taylor.edu>
References: <026a01ca04c7$79c46ec0$6d4d4c40$@com>
	<029201ca04ce$871e1470$955a3d50$@com>
	<AD9ED579-64B1-421A-A76D-045709CD4E83@cse.taylor.edu>
Message-ID: <000601ca04d2$18bec840$4a3c58c0$@com>

Pasted below is the error description I get when I look at the console after
getting  "Compiler failed with result code 1."

 

C:\Documents and Settings\Owner\My
Documents\5135\Summer5135\output\TParser.java:84: unclosed character literal

[15:23:22]             System.out.println('invoke
'+(ID1!=null?ID1.getText():null));

[15:23:22]                                ^

[15:23:22] C:\Documents and Settings\Owner\My
Documents\5135\Summer5135\output\TParser.java:84: ';' expected

[15:23:22]             System.out.println('invoke
'+(ID1!=null?ID1.getText():null));

[15:23:22]                                  ^

[15:23:22] C:\Documents and Settings\Owner\My
Documents\5135\Summer5135\output\TParser.java:84: unclosed character literal

[15:23:22]             System.out.println('invoke
'+(ID1!=null?ID1.getText():null));

[15:23:22]                                        ^

[15:23:22] C:\Documents and Settings\Owner\My
Documents\5135\Summer5135\output\TParser.java:84: ';' expected

[15:23:22]             System.out.println('invoke
'+(ID1!=null?ID1.getText():null));

[15:23:22]                                          ^

[15:23:22] C:\Documents and Settings\Owner\My
Documents\5135\Summer5135\output\TParser.java:84: not a statement

[15:23:22]             System.out.println('invoke
'+(ID1!=null?ID1.getText():null));

[15:23:22]                                                    ^

[15:23:22] C:\Documents and Settings\Owner\My
Documents\5135\Summer5135\output\TParser.java:84: ';' expected

[15:23:22]             System.out.println('invoke
'+(ID1!=null?ID1.getText():null));

[15:23:22]
^

[15:23:22] 6 errors

[15:23:41] C:\Documents and Settings\Owner\My
Documents\5135\Summer5135\output\TParser.java:84: unclosed character literal

[15:23:41]             System.out.println('invoke
'+(ID1!=null?ID1.getText():null));

[15:23:41]                                ^

[15:23:41] C:\Documents and Settings\Owner\My
Documents\5135\Summer5135\output\TParser.java:84: ';' expected

[15:23:41]             System.out.println('invoke
'+(ID1!=null?ID1.getText():null));

[15:23:41]                                  ^

[15:23:41] C:\Documents and Settings\Owner\My
Documents\5135\Summer5135\output\TParser.java:84: unclosed character literal

[15:23:41]             System.out.println('invoke
'+(ID1!=null?ID1.getText():null));

[15:23:41]                                        ^

[15:23:41] C:\Documents and Settings\Owner\My
Documents\5135\Summer5135\output\TParser.java:84: ';' expected

[15:23:41]             System.out.println('invoke
'+(ID1!=null?ID1.getText():null));

[15:23:41]                                          ^

[15:23:41] C:\Documents and Settings\Owner\My
Documents\5135\Summer5135\output\TParser.java:84: not a statement

[15:23:41]             System.out.println('invoke
'+(ID1!=null?ID1.getText():null));

[15:23:41]                                                    ^

[15:23:41] C:\Documents and Settings\Owner\My
Documents\5135\Summer5135\output\TParser.java:84: ';' expected

[15:23:41]             System.out.println('invoke
'+(ID1!=null?ID1.getText():null));

[15:23:41]
^

[15:23:41] 6 errors

[15:23:42] C:\Documents and Settings\Owner\My
Documents\5135\Summer5135\output\__Test__.java:12: cannot find symbol

[15:23:42] symbol  : class TParser

[15:23:42] location: class __Test__

[15:23:42]         TParser g = new TParser(tokens, 49100, null);

[15:23:42]         ^

[15:23:42] C:\Documents and Settings\Owner\My
Documents\5135\Summer5135\output\__Test__.java:12: cannot find symbol

[15:23:42] symbol  : class TParser

[15:23:42] location: class __Test__

[15:23:42]         TParser g = new TParser(tokens, 49100, null);

[15:23:42]                         ^

[15:23:42] 2 errors

[15:24:04] C:\Documents and Settings\Owner\My
Documents\5135\Summer5135\output\TParser.java:84: unclosed character literal

[15:24:04]             System.out.println('invoke
'+(ID1!=null?ID1.getText():null));

[15:24:04]                                ^

[15:24:04] C:\Documents and Settings\Owner\My
Documents\5135\Summer5135\output\TParser.java:84: ';' expected

[15:24:04]             System.out.println('invoke
'+(ID1!=null?ID1.getText():null));

[15:24:04]                                  ^

[15:24:05] C:\Documents and Settings\Owner\My
Documents\5135\Summer5135\output\TParser.java:84: unclosed character literal

[15:24:05]             System.out.println('invoke
'+(ID1!=null?ID1.getText():null));

[15:24:05]                                        ^

[15:24:05] C:\Documents and Settings\Owner\My
Documents\5135\Summer5135\output\TParser.java:84: ';' expected

[15:24:05]             System.out.println('invoke
'+(ID1!=null?ID1.getText():null));

[15:24:05]                                          ^

[15:24:05] C:\Documents and Settings\Owner\My
Documents\5135\Summer5135\output\TParser.java:84: not a statement

[15:24:05]             System.out.println('invoke
'+(ID1!=null?ID1.getText():null));

[15:24:05]                                                    ^

[15:24:05] C:\Documents and Settings\Owner\My
Documents\5135\Summer5135\output\TParser.java:84: ';' expected

[15:24:05]             System.out.println('invoke
'+(ID1!=null?ID1.getText():null));

[15:24:05]
^

[15:24:05] 6 errors

[15:24:06] C:\Documents and Settings\Owner\My
Documents\5135\Summer5135\output\__Test__.java:12: cannot find symbol

[15:24:06] symbol  : class TParser

[15:24:06] location: class __Test__

[15:24:06]         TParser g = new TParser(tokens, 49100, null);

[15:24:06]         ^

[15:24:06] C:\Documents and Settings\Owner\My
Documents\5135\Summer5135\output\__Test__.java:12: cannot find symbol

[15:24:06] symbol  : class TParser

[15:24:06] location: class __Test__

[15:24:06]         TParser g = new TParser(tokens, 49100, null);

[15:24:06]                         ^

[15:24:06] 2 errors 

 

From: Tom Nurkkala [mailto:tnurkkala at cse.taylor.edu] 
Sent: Tuesday, July 14, 2009 15:09
To: Bryan S Follins
Cc: antlr-interest at antlr.org
Subject: Re: [antlr-interest] Simple code with a simple problem

 

 

On Tue/14-Jul, at 5:00 PM, Bryan S Follins wrote:





Found my generation error.  I was using () instead of {} for the java code.
Generation is good. However, it still does not debug the code. 

 

When I run the debugger I get: "Compiler failed with result code 1."   Does
anyone know that means?

 

 

I copied your grammar into ANTLRWorks and changed both actions to use curly
braces instead of parens.  Under the interpreter, I parsed "call foo;"
against rule 'r' and it worked fine.  The parse tree follows.

 

tom.

 



 

--

Tom Nurkkala, PhD

Associate Professor

Computer Science & Engineering

Taylor University

tnurkkala at cse.taylor.edu

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090714/b104bf94/attachment.html 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: image/png
Size: 6585 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20090714/b104bf94/attachment.png 

From asalh at mindspring.com  Tue Jul 14 15:28:13 2009
From: asalh at mindspring.com (Bryan S Follins)
Date: Tue, 14 Jul 2009 15:28:13 -0700
Subject: [antlr-interest] Simple code with a simple problem
In-Reply-To: <AD9ED579-64B1-421A-A76D-045709CD4E83@cse.taylor.edu>
References: <026a01ca04c7$79c46ec0$6d4d4c40$@com>
	<029201ca04ce$871e1470$955a3d50$@com>
	<AD9ED579-64B1-421A-A76D-045709CD4E83@cse.taylor.edu>
Message-ID: <000d01ca04d2$6036fc60$20a4f520$@com>

I have to go out for about 90 minutes, so if I don't answer, I'm not
ignoring anyone.  I'm appreciating all the help I'm getting. Thanks.

 

 

From: Tom Nurkkala [mailto:tnurkkala at cse.taylor.edu] 
Sent: Tuesday, July 14, 2009 15:09
To: Bryan S Follins
Cc: antlr-interest at antlr.org
Subject: Re: [antlr-interest] Simple code with a simple problem

 

 

On Tue/14-Jul, at 5:00 PM, Bryan S Follins wrote:





Found my generation error.  I was using () instead of {} for the java code.
Generation is good. However, it still does not debug the code. 

 

When I run the debugger I get: "Compiler failed with result code 1."   Does
anyone know that means?

 

 

I copied your grammar into ANTLRWorks and changed both actions to use curly
braces instead of parens.  Under the interpreter, I parsed "call foo;"
against rule 'r' and it worked fine.  The parse tree follows.

 

tom.

 



 

--

Tom Nurkkala, PhD

Associate Professor

Computer Science & Engineering

Taylor University

tnurkkala at cse.taylor.edu

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090714/9c2369ec/attachment.html 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: image/png
Size: 6585 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20090714/9c2369ec/attachment.png 

From tnurkkala at cse.taylor.edu  Tue Jul 14 15:59:46 2009
From: tnurkkala at cse.taylor.edu (Tom Nurkkala)
Date: Tue, 14 Jul 2009 17:59:46 -0500
Subject: [antlr-interest] Simple code with a simple problem
In-Reply-To: <02a901ca04d0$e8f046d0$bad0d470$@com>
References: <026a01ca04c7$79c46ec0$6d4d4c40$@com>
	<029201ca04ce$871e1470$955a3d50$@com>
	<AD9ED579-64B1-421A-A76D-045709CD4E83@cse.taylor.edu>
	<02a901ca04d0$e8f046d0$bad0d470$@com>
Message-ID: <0E7D94C2-F150-4059-994F-7DDA90F67859@cse.taylor.edu>


On Tue/14-Jul, at 5:17 PM, Bryan S Follins wrote:

> Tom,
> I tried that,  I went to Debug.  As a matter of fact I tried  
> highlighting both the ?text? and ?file? radio buttons while using  
> start rule ?r? and it gave me an error ?Compiler failed with result  
> code 1.?

You need to change the quotes in the println statement to be double,  
rather than single, quotes (per Java).

Also, it looks like the "space" alternative in your WS rule has two  
spaces between the quotes.  You probably only want one.

tom.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090714/e7b71bd8/attachment.html 

From asalh at mindspring.com  Tue Jul 14 17:38:12 2009
From: asalh at mindspring.com (Bryan S Follins)
Date: Tue, 14 Jul 2009 17:38:12 -0700
Subject: [antlr-interest] Simple code with a simple problem
In-Reply-To: <0E7D94C2-F150-4059-994F-7DDA90F67859@cse.taylor.edu>
References: <026a01ca04c7$79c46ec0$6d4d4c40$@com>
	<029201ca04ce$871e1470$955a3d50$@com>
	<AD9ED579-64B1-421A-A76D-045709CD4E83@cse.taylor.edu>
	<02a901ca04d0$e8f046d0$bad0d470$@com>
	<0E7D94C2-F150-4059-994F-7DDA90F67859@cse.taylor.edu>
Message-ID: <004801ca04e4$88b75010$9a25f030$@com>

Changing the quotes on the println statement worked.  Thanks a bunch Tom.

 

Bryan

 

 

 

From: Tom Nurkkala [mailto:tnurkkala at cse.taylor.edu] 
Sent: Tuesday, July 14, 2009 16:00
To: Bryan S Follins
Cc: antlr-interest at antlr.org
Subject: Re: [antlr-interest] Simple code with a simple problem

 

 

On Tue/14-Jul, at 5:17 PM, Bryan S Follins wrote:





Tom,

I tried that,  I went to Debug.  As a matter of fact I tried highlighting
both the "text" and "file" radio buttons while using start rule "r" and it
gave me an error "Compiler failed with result code 1."

 

You need to change the quotes in the println statement to be double, rather
than single, quotes (per Java).

 

Also, it looks like the "space" alternative in your WS rule has two spaces
between the quotes.  You probably only want one.

 

tom.

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090714/7829d744/attachment.html 

From hakan.eryargi at gmail.com  Wed Jul 15 02:20:18 2009
From: hakan.eryargi at gmail.com (hakan eryargi)
Date: Wed, 15 Jul 2009 12:20:18 +0300
Subject: [antlr-interest] forcing parenthesis (no precedence)
Message-ID: <440de1810907150220k633ccdcas69549840c3d6daec@mail.gmail.com>

hello,

i want to create a grammar for simple expressions and AND, OR
statements. AND's and OR's have no precedence, so i want the user to
explicitly use parenthesis if AND's and OR's mixed. how can i define
such a grammar ?

for example these are valid:
EXP
EXP & EXP
EXP | EXP | EXP
EXP & (EXP | EXP)
(EXP | EXP) & (EXP | EXP)

these are not:
EXP & EXP | EXP
EXP | EXP & EXP | EXP

please note i'm a newbea so handle with care :)

thanks,
hakan

From m.bagni at marcobagni.com  Wed Jul 15 02:26:13 2009
From: m.bagni at marcobagni.com (Marco Bagni)
Date: Wed, 15 Jul 2009 11:26:13 +0200
Subject: [antlr-interest] Legal Document Parsing. Can ANTLR help?
Message-ID: <bf8eaa70b23c9f152e3265535f92a30a.squirrel@webmail.marcobagni.com>


HI,

I have the need to perform a syntactical parsing of various legal documents
with the result to identify and extract each article and sub-paragraph.

The documents are text like:

Act. 123 Bla Bla Bla

Art. 1
(Article title)

Article body with sub paragraph (at most three levels of sub
paragraph identified by numbers (1, 2, 3...) and letters (a, b,
c...) and roman literals (i, ii, iii, vi, etc.)

Unfortunately the real life is a bit tougher than this, i.e. in some
documents you have the string Art. in others Article; sometimes the
Article title is present sometimes not, and so on.

Do you think that ANTLR can help in generating a parser that identifies
and extracts the parts of the legal documents labelling  each part with
the proper hierarchical structure?

So far I am doing a prototype in PERL but taking into account all the
possible variations that can be found in the plethora of documents I have
to "ingest" it seems a quite cumbersome activity to code all the
exceptions.

Thanks for your support.

Regards

Marco Bagni



From nvlassopoulos at gmail.com  Wed Jul 15 02:46:14 2009
From: nvlassopoulos at gmail.com (Nick Vlassopoulos)
Date: Wed, 15 Jul 2009 10:46:14 +0100
Subject: [antlr-interest] Parsing HAML - significant and insignificant
	whitespaces
In-Reply-To: <73ee720a0907141651s713d9da2u704896bd84aa67f3@mail.gmail.com>
References: <73ee720a0907140943v19c7ac1m3a48b4b14673e7ba@mail.gmail.com>
	<1419225d0907140957m44e79982y3b796a4150d6bd8@mail.gmail.com>
	<1419225d0907141002j64f652c3v6362fd5fe88b3475@mail.gmail.com>
	<73ee720a0907141651s713d9da2u704896bd84aa67f3@mail.gmail.com>
Message-ID: <1419225d0907150246w78054eacxe62c9f051c67338e@mail.gmail.com>

Hi Dmitiry,

I am not quite sure about this, but I think that something like the
following

grammar Foo;
options {output = AST;}

prog    :    line*
    ;

line    :    (ident)* rule^ LF;

ident    :    WS;


rule    :    RULE;

RULE    :    'rule';
LF    :    '\n' '\r'?;
WS    :    ' ';

would generate an AST where each "rule" comes after a list of "idents"
(spaces in the case above).
So, when you are walking through the tree, you could count the number of
"ident" children before a rule.
I am not sure that this would cover your case (since I am a beginner in "the
ways of ANTLR").

Hope this helps!

Nikos

On Wed, Jul 15, 2009 at 12:51 AM, Dmitiry Nagirnyak <dnagir at gmail.com>wrote:

> Hi Nick,
>
> Thanks. It shows some useful techniques.
> Main thing there is LEADING_WS.
>
> But it doesn't demonstrate how to choose different rule based on
> identation.
>
> For example something like this would do the job:
> indent    :    LEADING_WS rule ;
> LEADING_WS :   (' ')*
>         {
>           if ( 0 == (getColumn() % sizeOfIndent)) {
>             // We have matched the indent size - need to generate the node
> and follow on the indents
>             // HOW TO 1: Add node to AST here?
>             // HOW TO 2: Execute another rule?
>           } // Otherwise consume the spaces
>         }
>     ;
>
> How those HOW TOs can be done?
>
> Cheers,
> Dmitriy.
> 2009/7/15 Nick Vlassopoulos <nvlassopoulos at gmail.com>
>
> Sorry for reposting, but I copied the wrong link,
>>
>> http://www.antlr.org/grammar/1078018002577/python.tar.gz
>>
>> Nikos
>>
>>
>>
>>
>> On Tue, Jul 14, 2009 at 5:57 PM, Nick Vlassopoulos <
>> nvlassopoulos at gmail.com> wrote:
>>
>>> Hi Dmitiry,
>>>
>>> I am not sure if this is what you are looking for, but you might want to
>>> have a look
>>> on how the python grammar handles identation.
>>> See for example:
>>> http://www.antlr.org/grammar/1200715779785/Python.g
>>>
>>> Best Regards,
>>>
>>> Nikos
>>>
>>>
>>>   On Tue, Jul 14, 2009 at 5:43 PM, Dmitiry Nagirnyak <dnagir at gmail.com>wrote:
>>>
>>>>  Hi,
>>>>
>>>> I am researching possibility to parse HAML syntax to port it to .NET.
>>>> There is project call NHAML but uses Regular Expressions instead of regular
>>>> parser.
>>>> While it is working great it has certain limitations.
>>>>
>>>> So people start thinking about a real parser. And years ago I did some
>>>> wotks with ANTLR and have chance to revisit it.
>>>>
>>>> My question is about whitespaces.
>>>> In NHAML whitespaces are significant at the beginning of line.
>>>>
>>>> What I would like to have is this (star* for whitespace):
>>>>
>>>> %A
>>>> **%B
>>>> ****%B1
>>>> ****%B2
>>>> **%C
>>>> ****%C1
>>>>
>>>> It would correspond to the tree sam type of tree (A in the root; B,C -
>>>> second level nodes, B1,B22, C1 - third level nodes).
>>>>
>>>> It would be easy if the whitespaces would always be indented at the sane
>>>> number (here 2).
>>>> But this should be configurable. And even more, instead of whitespaces
>>>> there might be tabs. But let's skip this for now.
>>>>
>>>> So grammar like this (just a quick draft) won't satisfy that:
>>>> nhaml    :    line*
>>>>     ;
>>>> line    :    indent? rule
>>>>     ;
>>>> indent    :    WS WS indent? // How to consume different number of WSs
>>>> depending on provided settings?
>>>>     ;
>>>> rule    :    ~WS (~NL)*
>>>>     ;
>>>>
>>>> So the actual question is in rule "indent".
>>>> If I don't know required number of matches of WS during development, how
>>>> can I write grammar for that?
>>>>
>>>> Cheers,
>>>> Dmitriy Nagirnyak.
>>>>
>>>>
>>>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>>>> Unsubscribe:
>>>> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>>>>
>>>>
>>>
>>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090715/bea1d795/attachment.html 

From jsrs701 at yahoo.com  Wed Jul 15 04:08:02 2009
From: jsrs701 at yahoo.com (J. Stephen Riley Silber)
Date: Wed, 15 Jul 2009 04:08:02 -0700 (PDT)
Subject: [antlr-interest] Parsing HAML - significant and insignificant
	whitespaces
In-Reply-To: <73ee720a0907140943v19c7ac1m3a48b4b14673e7ba@mail.gmail.com>
Message-ID: <480281.58550.qm@web33302.mail.mud.yahoo.com>

Hi,

In cases like this, I prefer not to jump through the parsing hoops that Python-style whitespace requires.? Instead, I write a preprocessor (in Perl, usually) that adds extra tokens to the source file, making the whitespace irrelevant again.

To modify your example, I would take

%A
??? %B
??????? %B1
??????? %B2
??? %C
??????? %C1

and add something (perhaps curly braces?) to indicate opening and closing a node:

%A {

??? %B {

??????? %B1

??????? %B2
??? }

??? %C {

??????? %C1
????
}
}

(It's a very easy hack.? Significant indentation makes for easy preprocessors, too. :-) 

For this format it's extremely simple to write an ANTLR grammar.? And of course the extra tokens are throw-away: they needn't be represented in the final AST at all.

--S

--- On Tue, 7/14/09, Dmitiry Nagirnyak <dnagir at gmail.com> wrote:

From: Dmitiry Nagirnyak <dnagir at gmail.com>
Subject: [antlr-interest] Parsing HAML - significant and insignificant whitespaces
To: antlr-interest at antlr.org
Date: Tuesday, July 14, 2009, 9:43 AM

Hi,

I am researching possibility to parse HAML syntax to port it to .NET. There is project call NHAML but uses Regular Expressions instead of regular parser.
While it is working great it has certain limitations.


So people start thinking about a real parser. And years ago I did some wotks with ANTLR and have chance to revisit it.

My question is about whitespaces.
In NHAML whitespaces are significant at the beginning of line.


What I would like to have is this (star* for whitespace):

%A
**%B
****%B1
****%B2
**%C
****%C1

It would correspond to the tree sam type of tree (A in the root; B,C - second level nodes, B1,B22, C1 - third level nodes).


It would be easy if the whitespaces would always be indented at the sane number (here 2).
But this should be configurable. And even more, instead of whitespaces there might be tabs. But let's skip this for now.


So grammar like this (just a quick draft) won't satisfy that:
nhaml??? :??? line*??? 
??? ;
line??? :??? indent? rule
??? ;
indent??? :??? WS WS indent? // How to consume different number of WSs depending on provided settings?

??? ;
rule??? :??? ~WS (~NL)*
??? ;

So the actual question is in rule "indent".
If I don't know required number of matches of WS during development, how can I write grammar for that?

Cheers,

Dmitriy Nagirnyak.


-----Inline Attachment Follows-----


List: http://www.antlr.org/mailman/listinfo/antlr-interest
Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090715/91cd11c5/attachment.html 

From tommy.nordgren at comhem.se  Wed Jul 15 06:15:42 2009
From: tommy.nordgren at comhem.se (Tommy Nordgren)
Date: Wed, 15 Jul 2009 15:15:42 +0200
Subject: [antlr-interest] Legal Document Parsing. Can ANTLR help?
In-Reply-To: <bf8eaa70b23c9f152e3265535f92a30a.squirrel@webmail.marcobagni.com>
References: <bf8eaa70b23c9f152e3265535f92a30a.squirrel@webmail.marcobagni.com>
Message-ID: <F9B547E3-DDEA-4007-B7AF-0833B8BC1298@comhem.se>


On Jul 15, 2009, at 11:26 AM, Marco Bagni wrote:

>
> HI,
>
> I have the need to perform a syntactical parsing of various legal  
> documents
> with the result to identify and extract each article and sub- 
> paragraph.
>
> The documents are text like:
>
> Act. 123 Bla Bla Bla
>
> Art. 1
> (Article title)
>
> Article body with sub paragraph (at most three levels of sub
> paragraph identified by numbers (1, 2, 3...) and letters (a, b,
> c...) and roman literals (i, ii, iii, vi, etc.)
>
> Unfortunately the real life is a bit tougher than this, i.e. in some
> documents you have the string Art. in others Article; sometimes the
> Article title is present sometimes not, and so on.
>
> Do you think that ANTLR can help in generating a parser that  
> identifies
> and extracts the parts of the legal documents labelling  each part  
> with
> the proper hierarchical structure?
>
> So far I am doing a prototype in PERL but taking into account all the
> possible variations that can be found in the plethora of documents I  
> have
> to "ingest" it seems a quite cumbersome activity to code all the
> exceptions.
>
> Thanks for your support.
>
> Regards
>
> Marco Bagni
>
>

	You can probably not use ANTLR or indeed any other parser generator  
for this purpose.
Parser generators are for computer languages - not natural languages.
-----------------------------------
See the amazing new SF reel: Invasion of the man eating cucumbers from  
outer space.
On congratulations for a fantastic parody, the producer replies :  
"What parody?"

Tommy Nordgren
tommy.nordgren at comhem.se




From paul.bouche at nsn.com  Wed Jul 15 06:32:08 2009
From: paul.bouche at nsn.com (=?ISO-8859-1?Q?=22Paul_Bouch=E9_=28NSN=29=22?=)
Date: Wed, 15 Jul 2009 15:32:08 +0200
Subject: [antlr-interest] Legal Document Parsing. Can ANTLR help?
In-Reply-To: <bf8eaa70b23c9f152e3265535f92a30a.squirrel@webmail.marcobagni.com>
References: <bf8eaa70b23c9f152e3265535f92a30a.squirrel@webmail.marcobagni.com>
Message-ID: <4A5DDA58.6070504@nsn.com>

I think you should run ANTLR in scanner mode (I think this is what it is 
called, that means only input you specify is parsed and other input is 
ignored).

Marco Bagni schrieb:
> HI,
>
> I have the need to perform a syntactical parsing of various legal documents
> with the result to identify and extract each article and sub-paragraph.
>
> The documents are text like:
>
> Act. 123 Bla Bla Bla
>
> Art. 1
> (Article title)
>
> Article body with sub paragraph (at most three levels of sub
> paragraph identified by numbers (1, 2, 3...) and letters (a, b,
> c...) and roman literals (i, ii, iii, vi, etc.)
>
> Unfortunately the real life is a bit tougher than this, i.e. in some
> documents you have the string Art. in others Article; sometimes the
> Article title is present sometimes not, and so on.
>
> Do you think that ANTLR can help in generating a parser that identifies
> and extracts the parts of the legal documents labelling  each part with
> the proper hierarchical structure?
>
> So far I am doing a prototype in PERL but taking into account all the
> possible variations that can be found in the plethora of documents I have
> to "ingest" it seems a quite cumbersome activity to code all the
> exceptions.
>
> Thanks for your support.
>
> Regards
>
> Marco Bagni
>
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>   


-- 
Paul Bouch?
Voice: +49 30 590080-1284
 
Nokia Siemens Networks GmbH & Co. KG, An den Treptowers 1, 12435 Berlin, Germany
Sitz der Gesellschaft: M?nchen / Registered office: Munich
Registergericht: M?nchen / Commercial registry: Munich, HRA 88537
WEEE-Reg.-Nr.: DE 52984304

Pers?nlich haftende Gesellschafterin / General Partner: Nokia Siemens Networks Management GmbH
Gesch?ftsleitung / Board of Directors: Lydia Sommer, Olaf Horsthemke
Vorsitzender des Aufsichtsrats / Chairman of supervisory board: Lauri Kivinen
Sitz der Gesellschaft: M?nchen / Registered office: Munich
Registergericht: M?nchen / Commercial registry: Munich, HRB 163416


From sseshadri at leapfrogsystems.com  Wed Jul 15 06:51:45 2009
From: sseshadri at leapfrogsystems.com (Surender Seshadri)
Date: Wed, 15 Jul 2009 09:51:45 -0400
Subject: [antlr-interest] IF Else  Statment to call different Rule
References: <EF81E157CDBB9D4083D954FBD3AA3DFE18CA3F@leap-sbs2.LeapFrogSystems.local>
Message-ID: <EF81E157CDBB9D4083D954FBD3AA3DFE18CA41@leap-sbs2.LeapFrogSystems.local>

Hi ,
Can some one please help me in correcting this grammar ASAP . I want to call different rule based on the Version I get from the input .The following code works but not sure if this is the right way to do this in ANTLR - Thanks 

callVersionTemplate
  //THERE IS  A BETTER WAY TO DO 
  : { isValidVersion }? => (ALPHANUMERIC)* 
    {
        if (myVersion..equalsIgnoreCase("1.0")) 
        { 
         ruleVersion1();
        }
	else if(myVersion.trim().equalsIgnoreCase("2.0"))
        {
           ruleVersion2();
        }
      }
  ;



  ruleVersion1:  { System.out.println("Inside  ruleVersion1" );};

  ruleVersion2:  { System.out.println("Inside  ruleVersion1");};




-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090715/5819830c/attachment.html 

From paul.bouche at nsn.com  Wed Jul 15 07:30:18 2009
From: paul.bouche at nsn.com (=?ISO-8859-1?Q?=22Paul_Bouch=E9_=28NSN=29=22?=)
Date: Wed, 15 Jul 2009 16:30:18 +0200
Subject: [antlr-interest] Legal Document Parsing. Can ANTLR help?
In-Reply-To: <F9B547E3-DDEA-4007-B7AF-0833B8BC1298@comhem.se>
References: <bf8eaa70b23c9f152e3265535f92a30a.squirrel@webmail.marcobagni.com>
	<F9B547E3-DDEA-4007-B7AF-0833B8BC1298@comhem.se>
Message-ID: <4A5DE7FA.8060206@nsn.com>

Tommy Nordgren schrieb:
> On Jul 15, 2009, at 11:26 AM, Marco Bagni wrote:
>
>   
>> HI,
>>
>> I have the need to perform a syntactical parsing of various legal  
>> documents
>> with the result to identify and extract each article and sub- 
>> paragraph.
>>
>> The documents are text like:
>>
>> Act. 123 Bla Bla Bla
>>
>> Art. 1
>> (Article title)
>>
>> Article body with sub paragraph (at most three levels of sub
>> paragraph identified by numbers (1, 2, 3...) and letters (a, b,
>> c...) and roman literals (i, ii, iii, vi, etc.)
>>
>> Unfortunately the real life is a bit tougher than this, i.e. in some
>> documents you have the string Art. in others Article; sometimes the
>> Article title is present sometimes not, and so on.
>>
>> Do you think that ANTLR can help in generating a parser that  
>> identifies
>> and extracts the parts of the legal documents labelling  each part  
>> with
>> the proper hierarchical structure?
>>
>> So far I am doing a prototype in PERL but taking into account all the
>> possible variations that can be found in the plethora of documents I  
>> have
>> to "ingest" it seems a quite cumbersome activity to code all the
>> exceptions.
>>
>> Thanks for your support.
>>
>> Regards
>>
>> Marco Bagni
>>
>>
>>     
>
> 	You can probably not use ANTLR or indeed any other parser generator  
> for this purpose.
> Parser generators are for computer languages - not natural languages.
> -----------------------------------
> See the amazing new SF reel: Invasion of the man eating cucumbers from  
> outer space.
> On congratulations for a fantastic parody, the producer replies :  
> "What parody?"
>   
Well I once worked for a hotel booking company and they (ab)used a spam 
filter to automatically categorize all kinds of input hotels made into 
their systems.
> Tommy Nordgren
> tommy.nordgren at comhem.se
>
>
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>   


-- 
Paul Bouch?
Voice: +49 30 590080-1284
 
Nokia Siemens Networks GmbH & Co. KG, An den Treptowers 1, 12435 Berlin, Germany
Sitz der Gesellschaft: M?nchen / Registered office: Munich
Registergericht: M?nchen / Commercial registry: Munich, HRA 88537
WEEE-Reg.-Nr.: DE 52984304

Pers?nlich haftende Gesellschafterin / General Partner: Nokia Siemens Networks Management GmbH
Gesch?ftsleitung / Board of Directors: Lydia Sommer, Olaf Horsthemke
Vorsitzender des Aufsichtsrats / Chairman of supervisory board: Lauri Kivinen
Sitz der Gesellschaft: M?nchen / Registered office: Munich
Registergericht: M?nchen / Commercial registry: Munich, HRB 163416

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090715/8ad9abb7/attachment.html 

From jimi at temporal-wave.com  Wed Jul 15 08:17:55 2009
From: jimi at temporal-wave.com (Jim Idle)
Date: Wed, 15 Jul 2009 08:17:55 -0700
Subject: [antlr-interest] forcing parenthesis (no precedence)
In-Reply-To: <440de1810907150220k633ccdcas69549840c3d6daec@mail.gmail.com>
References: <440de1810907150220k633ccdcas69549840c3d6daec@mail.gmail.com>
Message-ID: <4A5DF323.2030106@temporal-wave.com>

hakan eryargi wrote:
> hello,
>
> i want to create a grammar for simple expressions and AND, OR
> statements. AND's and OR's have no precedence, so i want the user to
> explicitly use parenthesis if AND's and OR's mixed. how can i define
> such a grammar ?
>   
Just steal the expression tree from something like Java.g, remove the 
things you don't need and make AND and OR tokens the same precedence in 
the same way that '+' and '=-' are.

In general stealing rules from the example grammars (see the download 
section) will get you a long way!

Jim

From jimi at temporal-wave.com  Wed Jul 15 08:37:42 2009
From: jimi at temporal-wave.com (Jim Idle)
Date: Wed, 15 Jul 2009 08:37:42 -0700
Subject: [antlr-interest] Legal Document Parsing. Can ANTLR help?
In-Reply-To: <bf8eaa70b23c9f152e3265535f92a30a.squirrel@webmail.marcobagni.com>
References: <bf8eaa70b23c9f152e3265535f92a30a.squirrel@webmail.marcobagni.com>
Message-ID: <4A5DF7C6.6030907@temporal-wave.com>

Marco Bagni wrote:
> HI,
>
> I have the need to perform a syntactical parsing of various legal documents
> with the result to identify and extract each article and sub-paragraph.
>
> The documents are text like:
>
> Act. 123 Bla Bla Bla
>
> Art. 1
> (Article title)
>
> Article body with sub paragraph (at most three levels of sub
> paragraph identified by numbers (1, 2, 3...) and letters (a, b,
> c...) and roman literals (i, ii, iii, vi, etc.)
>
> Unfortunately the real life is a bit tougher than this, i.e. in some
> documents you have the string Art. in others Article; sometimes the
> Article title is present sometimes not, and so on.
>
> Do you think that ANTLR can help in generating a parser that identifies
> and extracts the parts of the legal documents labelling  each part with
> the proper hierarchical structure?
>   
I think that a filtering lexer is what you need for this as there is no 
real parsing task here. Though to be honest you might find that awk is 
good for this. Look at the FuzzyJava.g example (see download page).

However;

lexer grammar Articles
options {filter=true;}

@lexer:members {
 int levelCount;
 String levels[10];
 String title;
}

REFERENCE
      : ARTICLE LEVELS TITLE
        {
          System.out.println("Title : " + title);
          // Etc
        }
      ;

fragment ARTICLE
: ('A'|'a') ('R'|'r') ('T'|'t')
     (
         '.'
       | ('i'|'I') ('c'|'C') ('l'|'L') ('e'|'E')
       |
     )
   WS*
    {
         levelCount = 0;
         title = "";
    }

;

LEVELS
   : (LEVEL {levelCount++} )+ ;

LEVEL
 : (
      ('0'..'9')+
    | 'a'..'z'
   )
    { levels[levelCount] = $text; }
   WS*
  ;


TITLE : ~('\n'|'\r')*
               { title = $text; }
      ;

WS : ' ' |  '\t';


Should get you started  - I just typed this in so check it of course ;-).

Jim

From jimi at temporal-wave.com  Wed Jul 15 08:40:35 2009
From: jimi at temporal-wave.com (Jim Idle)
Date: Wed, 15 Jul 2009 08:40:35 -0700
Subject: [antlr-interest] Legal Document Parsing. Can ANTLR help?
In-Reply-To: <F9B547E3-DDEA-4007-B7AF-0833B8BC1298@comhem.se>
References: <bf8eaa70b23c9f152e3265535f92a30a.squirrel@webmail.marcobagni.com>
	<F9B547E3-DDEA-4007-B7AF-0833B8BC1298@comhem.se>
Message-ID: <4A5DF873.5070808@temporal-wave.com>

An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090715/c475ade0/attachment.html 

From andrew.bradnan at gmail.com  Wed Jul 15 09:17:29 2009
From: andrew.bradnan at gmail.com (Andrew Bradnan)
Date: Wed, 15 Jul 2009 09:17:29 -0700
Subject: [antlr-interest] could not even do k=1 for decision NNn;
	reason: timed out
Message-ID: <8a5e9b780907150917q56e07af4ubae54346f2859b2f@mail.gmail.com>

Is there an easy way to figure out what NNN rule is, that ANTLR is stuck on?

Thanks,
-- 
/Andrew
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090715/6cb2ad6b/attachment.html 

From coddbotherer at googlemail.com  Wed Jul 15 05:30:55 2009
From: coddbotherer at googlemail.com (Artemus Ward)
Date: Wed, 15 Jul 2009 13:30:55 +0100
Subject: [antlr-interest] Am I doing something wrong or is this a bug?
Message-ID: <157c5c5c0907150530j772ae6a9l9298b54301d7c09a@mail.gmail.com>

I've just run into something funny using ANTLRworks.  The debugger
seems to be discarding a character from my input; in this case it is
discarding the N from "NULL" (see the attached screenshot).

Art
-------------- next part --------------
A non-text attachment was scrubbed...
Name: antlr.PNG
Type: image/png
Size: 102663 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20090715/631b1988/attachment-0001.png 

From coddbotherer at googlemail.com  Wed Jul 15 09:48:18 2009
From: coddbotherer at googlemail.com (Artemus Ward)
Date: Wed, 15 Jul 2009 17:48:18 +0100
Subject: [antlr-interest] Am I doing something wrong or is this a bug?
	(Followup)
Message-ID: <157c5c5c0907150948y2762e917s37bb1f6e10b9c425@mail.gmail.com>

Turns out I'd accidentally mangled a token definition in my very large
grammar.  So please ignore my question.

Art

From jimi at temporal-wave.com  Wed Jul 15 10:42:38 2009
From: jimi at temporal-wave.com (Jim Idle)
Date: Wed, 15 Jul 2009 10:42:38 -0700
Subject: [antlr-interest] could not even do k=1 for decision NNn;
 reason: timed out
In-Reply-To: <8a5e9b780907150917q56e07af4ubae54346f2859b2f@mail.gmail.com>
References: <8a5e9b780907150917q56e07af4ubae54346f2859b2f@mail.gmail.com>
Message-ID: <4A5E150E.3080402@temporal-wave.com>

An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090715/2a0982d9/attachment.html 

From jskier at netezza.com  Wed Jul 15 13:50:33 2009
From: jskier at netezza.com (John Skier)
Date: Wed, 15 Jul 2009 16:50:33 -0400
Subject: [antlr-interest] Issue with Missing header file in dist 3.1.3:
	antlr3config.h
Message-ID: <C683AB49.184E6%jskier@netezza.com>

I'm trying to learn Antlr. I'm attempting to exercise the hoisted predicates
code in C . The code is failing due to a missing header file.

I've downloaded the latest runtime 3.1.3, but it does not contain the header
either.  Any suggestions.

Here is the error:
In /Users/jskier/Documents/libantlr3c-3.1.3/include/antlr3defs.h:217:26:
error: antlr3config.h: No such file or directory

Thanks,

John


From jimi at temporal-wave.com  Wed Jul 15 14:06:18 2009
From: jimi at temporal-wave.com (Jim Idle)
Date: Wed, 15 Jul 2009 14:06:18 -0700
Subject: [antlr-interest] Issue with Missing header file in dist 3.1.3:
 antlr3config.h
In-Reply-To: <C683AB49.184E6%jskier@netezza.com>
References: <C683AB49.184E6%jskier@netezza.com>
Message-ID: <4A5E44CA.7010402@temporal-wave.com>

John Skier wrote:
> I'm trying to learn Antlr. I'm attempting to exercise the hoisted predicates
> code in C . The code is failing due to a missing header file.
>
> I've downloaded the latest runtime 3.1.3, but it does not contain the header
> either.  Any suggestions.
>
> Here is the error:
> In /Users/jskier/Documents/libantlr3c-3.1.3/include/antlr3defs.h:217:26:
> error: antlr3config.h: No such file or directory
>   
You read the building guide in the API documentation right?

Ran:

configure, make, sudo make install

Looks to me like you did not and are trying to include the files 
directly from the expanded tar you downloaded. Please read the build 
instructions in the API documentation - that's what it is there for.

Jim

From jsrs701 at yahoo.com  Wed Jul 15 15:38:36 2009
From: jsrs701 at yahoo.com (J. Stephen Riley Silber)
Date: Wed, 15 Jul 2009 15:38:36 -0700 (PDT)
Subject: [antlr-interest] Printing weirdness in tree filters
Message-ID: <536070.89034.qm@web33302.mail.mud.yahoo.com>

Howdy,

Is there any reason that the default downup() prints out all the transformations it makes?? Is this perhaps something that will be turned into an option in 3.2?? (The default implementation is more than adequate, except for that little detail.)

--S
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090715/d01c9d55/attachment.html 

From parrt at cs.usfca.edu  Wed Jul 15 16:40:52 2009
From: parrt at cs.usfca.edu (Terence Parr)
Date: Wed, 15 Jul 2009 16:40:52 -0700
Subject: [antlr-interest] Printing weirdness in tree filters
In-Reply-To: <536070.89034.qm@web33302.mail.mud.yahoo.com>
References: <536070.89034.qm@web33302.mail.mud.yahoo.com>
Message-ID: <0E942CBE-58FB-4500-A0C8-3E25E6EDA8E7@cs.usfca.edu>

a mistke; i fixed in my source tree ;)
T
On Jul 15, 2009, at 3:38 PM, J. Stephen Riley Silber wrote:

> Howdy,
>
> Is there any reason that the default downup() prints out all the  
> transformations it makes?  Is this perhaps something that will be  
> turned into an option in 3.2?  (The default implementation is more  
> than adequate, except for that little detail.)
>
> --S
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address


From lgcraymer at yahoo.com  Wed Jul 15 18:51:25 2009
From: lgcraymer at yahoo.com (Loring Craymer)
Date: Wed, 15 Jul 2009 18:51:25 -0700 (PDT)
Subject: [antlr-interest] Legal Document Parsing. Can ANTLR help?
In-Reply-To: <bf8eaa70b23c9f152e3265535f92a30a.squirrel@webmail.marcobagni.com>
References: <bf8eaa70b23c9f152e3265535f92a30a.squirrel@webmail.marcobagni.com>
Message-ID: <79671.10874.qm@web55904.mail.re3.yahoo.com>


I did this sort of thing a number of years back, using PCCTS (ANTLR 1).  At the time, I needed to parse the specification document that defined the spacecraft control language for Cassini.  The trick to parsing structured text is to recognize structure on top of a formatting language.  For the Cassini spacecraft instance, I used RTF as the formatting language.  I first wrote an RTF recognizer, then duplicated many of the rules and added the document structure recognition to the duplicates.  Then I inserted syntactic predicates as in

header :  (structuredHeader)? structuredHeader
             | textHeader
            ;

to distinguish between interesting (structured) features and random text to be ignored.

I also had to do a little work to ignore formatting commands that I had no interest in.  I did that with another very small ANTLR grammar that built a symbol table for the various formatting commands with information on which commands to skip (using sempreds) and which to process.

This approach worked quite well and should work for your problem.

--Loring



----- Original Message ----
> From: Marco Bagni <m.bagni at marcobagni.com>
> To: antlr-interest at antlr.org
> Sent: Wednesday, July 15, 2009 2:26:13 AM
> Subject: [antlr-interest] Legal Document Parsing. Can ANTLR help?
> 
> 
> HI,
> 
> I have the need to perform a syntactical parsing of various legal documents
> with the result to identify and extract each article and sub-paragraph.
> 
> The documents are text like:
> 
> Act. 123 Bla Bla Bla
> 
> Art. 1
> (Article title)
> 
> Article body with sub paragraph (at most three levels of sub
> paragraph identified by numbers (1, 2, 3...) and letters (a, b,
> c...) and roman literals (i, ii, iii, vi, etc.)
> 
> Unfortunately the real life is a bit tougher than this, i.e. in some
> documents you have the string Art. in others Article; sometimes the
> Article title is present sometimes not, and so on.
> 
> Do you think that ANTLR can help in generating a parser that identifies
> and extracts the parts of the legal documents labelling  each part with
> the proper hierarchical structure?
> 
> So far I am doing a prototype in PERL but taking into account all the
> possible variations that can be found in the plethora of documents I have
> to "ingest" it seems a quite cumbersome activity to code all the
> exceptions.
> 
> Thanks for your support.
> 
> Regards
> 
> Marco Bagni
> 
> 
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: 
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address



      

From hakan.eryargi at gmail.com  Wed Jul 15 23:57:54 2009
From: hakan.eryargi at gmail.com (hakan eryargi)
Date: Thu, 16 Jul 2009 09:57:54 +0300
Subject: [antlr-interest] forcing parenthesis (no precedence)
In-Reply-To: <440de1810907150220k633ccdcas69549840c3d6daec@mail.gmail.com>
References: <440de1810907150220k633ccdcas69549840c3d6daec@mail.gmail.com>
Message-ID: <440de1810907152357q2873b2b0va38b956a399316f6@mail.gmail.com>

thank you but i can't get it. simply making AND's and OR's have same
precedence doesnt force user to use parenthesizes. expression is
simply evaluated from left to right ?

regards,
hakan

Just steal the expression tree from something like Java.g, remove the
things you don't need and make AND and OR tokens the same precedence in
the same way that '+' and '=-' are.

In general stealing rules from the example grammars (see the download
section) will get you a long way!

On Wed, Jul 15, 2009 at 12:20 PM, hakan eryargi<hakan.eryargi at gmail.com> wrote:
> hello,
>
> i want to create a grammar for simple expressions and AND, OR
> statements. AND's and OR's have no precedence, so i want the user to
> explicitly use parenthesis if AND's and OR's mixed. how can i define
> such a grammar ?
>
> for example these are valid:
> EXP
> EXP & EXP
> EXP | EXP | EXP
> EXP & (EXP | EXP)
> (EXP | EXP) & (EXP | EXP)
>
> these are not:
> EXP & EXP | EXP
> EXP | EXP & EXP | EXP
>
> please note i'm a newbea so handle with care :)
>
> thanks,
> hakan
>

From gokul007 at gmail.com  Thu Jul 16 03:14:55 2009
From: gokul007 at gmail.com (Gokulakannan Somasundaram)
Date: Thu, 16 Jul 2009 15:44:55 +0530
Subject: [antlr-interest] Reg Multi-line comments
Message-ID: <9362e74e0907160314o1334535fsa19a346e4524fb44@mail.gmail.com>

Hi,
   I am trying to filter out multi-line comments, for which i am using the
following Token definition (provided in antlr.org)
ML_COMMENT
    :    '/*' ( options { greedy = false; } : .* ) '*/' { skip(); };

But i intend to provide a informative error message, when EOF occurs without
any '*/'.  Can someone help me on how to achieve this? I am trying out lot
of things, but nothing seems to work and i seem to missing some basic
fact/knowledge.

Thanks,
Gokul.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090716/b9f652cb/attachment.html 

From m.bagni at marcobagni.com  Thu Jul 16 04:25:18 2009
From: m.bagni at marcobagni.com (Marco Bagni)
Date: Thu, 16 Jul 2009 13:25:18 +0200
Subject: [antlr-interest] Legal Document Parsing. Can ANTLR help?
In-Reply-To: <79671.10874.qm@web55904.mail.re3.yahoo.com>
References: <bf8eaa70b23c9f152e3265535f92a30a.squirrel@webmail.marcobagni.com>
	<79671.10874.qm@web55904.mail.re3.yahoo.com>
Message-ID: <59fdd545b76a371d254a9db1693d2cda.squirrel@webmail.marcobagni.com>

Dear all,

thanks a lot for your prompt and very exhaustive support and suggestions.

I thin that I will begin giving a look at the Natural Language Tools
maintaining, in the meantime, my pragmatical approach that is to develop
some tests in PERL (I already have done a parser-ingestor for a kind of
legal document structure and it works as a lightning).

I think that we can consider this thread close, so far!

Thank you again.

Marco Bagni


From micha-1 at fantasymail.de  Thu Jul 16 04:35:00 2009
From: micha-1 at fantasymail.de (Michael)
Date: Thu, 16 Jul 2009 13:35:00 +0200
Subject: [antlr-interest] Reg Multi-line comments
In-Reply-To: <9362e74e0907160314o1334535fsa19a346e4524fb44@mail.gmail.com>
References: <9362e74e0907160314o1334535fsa19a346e4524fb44@mail.gmail.com>
Message-ID: <200907161335.00504.micha-1@fantasymail.de>

Am Thursday 16 July 2009 12:14:55 schrieb Gokulakannan Somasundaram:
> Hi,
>    I am trying to filter out multi-line comments, for which i am using the
> following Token definition (provided in antlr.org)
> ML_COMMENT
>
>     :    '/*' ( options { greedy = false; } : .* ) '*/' { skip(); };
>

I have done it like this:
in the lexer I added a member openComment:

@member {
	boolean openComment = false;

	//override nextToken:
	@Override
	public Token nextToken() {
		Token t = super.nextToken();
		if (t == Token.EOF_TOKEN && openComment) {
			System.err.println("gotcha!");
		}
		return t;
	}

}


change your comment rule :

ML_COMMENT
@init { openComment = true: }
    :    '/*' ( options { greedy = false; } : .* ) '*/' { openComment = false; 
skip(); };




don't know if this is nice, but it works :-)
 Michael


From antlr at mirality.co.nz  Thu Jul 16 04:48:27 2009
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Thu, 16 Jul 2009 23:48:27 +1200
Subject: [antlr-interest] forcing parenthesis (no precedence)
In-Reply-To: <440de1810907152357q2873b2b0va38b956a399316f6@mail.gmail.co
 m>
References: <440de1810907150220k633ccdcas69549840c3d6daec@mail.gmail.com>
	<440de1810907152357q2873b2b0va38b956a399316f6@mail.gmail.com>
Message-ID: <20090716114838.A04263418433@www.antlr.org>

At 18:57 16/07/2009, hakan eryargi wrote:
 >thank you but i can't get it. simply making AND's and OR's have
 >same precedence doesnt force user to use parenthesizes.
 >expression is simply evaluated from left to right ?

Just parse it as normal, but put some code into the tree parser to 
detect cases you want to consider invalid and raise an error.

 From the sounds of it, it should be easy to detect; eg. if you're 
on an OR root and either the left or right expression is an AND 
root, then it's invalid.


From gokul007 at gmail.com  Thu Jul 16 04:56:38 2009
From: gokul007 at gmail.com (Gokulakannan Somasundaram)
Date: Thu, 16 Jul 2009 17:26:38 +0530
Subject: [antlr-interest] Reg Multi-line comments
In-Reply-To: <9362e74e0907160314o1334535fsa19a346e4524fb44@mail.gmail.com>
References: <9362e74e0907160314o1334535fsa19a346e4524fb44@mail.gmail.com>
Message-ID: <9362e74e0907160456v1074f510g546975f8d273b462@mail.gmail.com>

After doing a little bit of research, i think this is my finding. The only
information, i can derive from AntLR infrastructure would be that it was
expecting a '*' but met with an EOF. There is no way i would be able to find
out that this '*' for the LEXER token ML_COMMENT.  My analysis is based on
the following

This is the grammar, i used

*grammar Expr1;

@lexer::members {
    //@Override
    public String getErrorMessage(RecognitionException me,String[]
tokenNames_)
    {
        String tokenName="<unknown>";
        if( me instanceof MismatchedTokenException )
        {
            System.out.println(state.type);
            System.out.println(ML_COMMENT);
            if(state.type == ML_COMMENT)
            {
                System.out.println("First Breakthrough");
            }
        }
        System.out.println(me);
        me.printStackTrace();
        return tokenName;
    }
}

ML_COMMENT
    :    '/*' ( options { greedy = false; } : .* ) '*/' { skip(); };



ml_comment
    :    ('\r\n')* { System.out.println("Success"); }
    ;*

when i entered
*/*
123
Ctrl-Z

i got
0
4
MismatchedTokenException(-1!=42)
MismatchedTokenException(-1!=42)
        at org.antlr.runtime.Lexer.match(Lexer.java:167)
        at Expr1Lexer.mML_COMMENT(Expr1Lexer.java:119)
        at Expr1Lexer.mTokens(Expr1Lexer.java:161)
        at org.antlr.runtime.Lexer.nextToken(Lexer.java:84)
        at
org.antlr.runtime.CommonTokenStream.fillBuffer(CommonTokenStream.java
:95)
        at org.antlr.runtime.CommonTokenStream.LT
(CommonTokenStream.java:238)
        at org.antlr.runtime.CommonTokenStream.LA
(CommonTokenStream.java:300)
        at Expr1Parser.ml_comment(Expr1Parser.java:45)
        at Main.main(Main.java:13)
line 3:0 <unknown>
Success
*
But in mML_COMMENT function, the token being parsed is never saved as a
state. It is saved only after the token is parsed complete.

   * // $ANTLR start "ML_COMMENT"
    public final void mML_COMMENT() throws RecognitionException {
        try {
            int _type = ML_COMMENT;
            int _channel = DEFAULT_TOKEN_CHANNEL;
            // Expr1.g:24:2: ( '/*' ( options {greedy=false; } : ( . )* )
'*/' )
            // Expr1.g:24:4: '/*' ( options {greedy=false; } : ( . )* ) '*/'
            {
            match("/*");

            // Expr1.g:24:9: ( options {greedy=false; } : ( . )* )
            // Expr1.g:24:41: ( . )*
            {
            // Expr1.g:24:41: ( . )*
            loop1:
            do {
                int alt1=2;
                int LA1_0 = input.LA(1);

                if ( (LA1_0=='*') ) {
                    int LA1_1 = input.LA(2);

                    if ( (LA1_1=='/') ) {
                        alt1=2;
                    }
                    else if ( ((LA1_1>='\u0000' && LA1_1<='.')||(LA1_1>='0'
&& LA1_1<='\uFFFF')) ) {
                        alt1=1;
                    }


                }
                else if ( ((LA1_0>='\u0000' && LA1_0<=')')||(LA1_0>='+' &&
LA1_0<='\uFFFF')) ) {
                    alt1=1;
                }


                switch (alt1) {
                case 1 :
                    // Expr1.g:24:41: .
                    {
                    matchAny();

                    }
                    break;

                default :
                    break loop1;
                }
            } while (true);


            }

            match("*/");    //This is where the error occurs

             skip();

            }

            state.type = _type;
            state.channel = _channel;
        }
        finally {
        }
    }
*

Since state is saved after that point, i won't be able to get the state with
the help of overriding functions. So i think the only option is match the
token which finds out the error and throw an exception(should be a user
defined one, which can't be caught by AntLR infra) from inside.

*ML_COMMENT_ERR
    :    '/*' (  (~('*/'))* ) {  System.out.println("Throw the Required
Error here"); }
    ;*

It works. But i think it would be nice if we have the lexer with the extra
information on which token it is parsing right now. Like

state.type_being_parsed = _type; at the top of the function.


Please let me know, whether my approach is correct.

Thanks,
Gokul.



On Thu, Jul 16, 2009 at 3:44 PM, Gokulakannan Somasundaram <
gokul007 at gmail.com> wrote:

> Hi,
>    I am trying to filter out multi-line comments, for which i am using the
> following Token definition (provided in antlr.org)
> ML_COMMENT
>     :    '/*' ( options { greedy = false; } : .* ) '*/' { skip(); };
>
> But i intend to provide a informative error message, when EOF occurs
> without any '*/'.  Can someone help me on how to achieve this? I am trying
> out lot of things, but nothing seems to work and i seem to missing some
> basic fact/knowledge.
>
> Thanks,
> Gokul.
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090716/d542e2d8/attachment.html 

From gokul007 at gmail.com  Thu Jul 16 05:08:25 2009
From: gokul007 at gmail.com (Gokulakannan Somasundaram)
Date: Thu, 16 Jul 2009 17:38:25 +0530
Subject: [antlr-interest] Reg Multi-line comments
In-Reply-To: <200907161335.00504.micha-1@fantasymail.de>
References: <9362e74e0907160314o1334535fsa19a346e4524fb44@mail.gmail.com>
	<200907161335.00504.micha-1@fantasymail.de>
Message-ID: <9362e74e0907160508k4afd1eddsc4a4b1a8a2cbcc70@mail.gmail.com>

Thanks.. I think it looks good atleast to me.. But i think  i would go with
using @init part, but instead of overriding the nextToken, i will override
the getErrorMessage() function. I just feel that compairson for every
nextToken call might be slightly costly.

But thanks for the solution.

Gokul.

On Thu, Jul 16, 2009 at 5:05 PM, Michael <micha-1 at fantasymail.de> wrote:

> Am Thursday 16 July 2009 12:14:55 schrieb Gokulakannan Somasundaram:
> > Hi,
> >    I am trying to filter out multi-line comments, for which i am using
> the
> > following Token definition (provided in antlr.org)
> > ML_COMMENT
> >
> >     :    '/*' ( options { greedy = false; } : .* ) '*/' { skip(); };
> >
>
> I have done it like this:
> in the lexer I added a member openComment:
>
> @member {
>        boolean openComment = false;
>
>        //override nextToken:
>        @Override
>        public Token nextToken() {
>                Token t = super.nextToken();
>                if (t == Token.EOF_TOKEN && openComment) {
>                        System.err.println("gotcha!");
>                }
>                return t;
>        }
>
> }
>
>
> change your comment rule :
>
> ML_COMMENT
> @init { openComment = true: }
>    :    '/*' ( options { greedy = false; } : .* ) '*/' { openComment =
> false;
> skip(); };
>
>
>
>
> don't know if this is nice, but it works :-)
>  Michael
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090716/9714bffe/attachment.html 

From micha-1 at fantasymail.de  Thu Jul 16 05:19:08 2009
From: micha-1 at fantasymail.de (Michael)
Date: Thu, 16 Jul 2009 14:19:08 +0200
Subject: [antlr-interest] Reg Multi-line comments
In-Reply-To: <9362e74e0907160508k4afd1eddsc4a4b1a8a2cbcc70@mail.gmail.com>
References: <9362e74e0907160314o1334535fsa19a346e4524fb44@mail.gmail.com>
	<200907161335.00504.micha-1@fantasymail.de>
	<9362e74e0907160508k4afd1eddsc4a4b1a8a2cbcc70@mail.gmail.com>
Message-ID: <200907161419.08864.micha-1@fantasymail.de>

Am Thursday 16 July 2009 14:08:25 schrieb Gokulakannan Somasundaram:
> Thanks.. I think it looks good atleast to me.. But i think  i would go with
> using @init part, but instead of overriding the nextToken, i will override
> the getErrorMessage() function. I just feel that compairson for every
> nextToken call might be slightly costly.
>

I thought that too,  but after profiling my app with the java interactive 
profiler (jip) I saw that the cost for nextToken was under 0.02% compared to 
the total runtime.

cheers
 Michael


From hakan.eryargi at gmail.com  Thu Jul 16 05:21:36 2009
From: hakan.eryargi at gmail.com (hakan eryargi)
Date: Thu, 16 Jul 2009 15:21:36 +0300
Subject: [antlr-interest] forcing parenthesis (no precedence)
In-Reply-To: <4a5f1396.0f02be0a.5dd8.ffffd4fdSMTPIN_ADDED@mx.google.com>
References: <440de1810907150220k633ccdcas69549840c3d6daec@mail.gmail.com>
	<440de1810907152357q2873b2b0va38b956a399316f6@mail.gmail.com>
	<4a5f1396.0f02be0a.5dd8.ffffd4fdSMTPIN_ADDED@mx.google.com>
Message-ID: <440de1810907160521w6eb822ey31837e2025b02a4a@mail.gmail.com>

i will really appreciate a simple sample if possible :)

On Thu, Jul 16, 2009 at 2:48 PM, Gavin Lambert<antlr at mirality.co.nz> wrote:
> At 18:57 16/07/2009, hakan eryargi wrote:
>>thank you but i can't get it. simply making AND's and OR's have
>>same precedence doesnt force user to use parenthesizes.
>>expression is simply evaluated from left to right ?
>
> Just parse it as normal, but put some code into the tree parser to detect
> cases you want to consider invalid and raise an error.
>
> From the sounds of it, it should be easy to detect; eg. if you're on an OR
> root and either the left or right expression is an AND root, then it's
> invalid.
>
>

From jimi at temporal-wave.com  Thu Jul 16 05:22:51 2009
From: jimi at temporal-wave.com (Jim Idle)
Date: Thu, 16 Jul 2009 05:22:51 -0700
Subject: [antlr-interest] Reg Multi-line comments
In-Reply-To: <9362e74e0907160456v1074f510g546975f8d273b462@mail.gmail.com>
References: <9362e74e0907160314o1334535fsa19a346e4524fb44@mail.gmail.com>
	<9362e74e0907160456v1074f510g546975f8d273b462@mail.gmail.com>
Message-ID: <A60EFF0A-62E7-4F37-834A-A5E460591E6A@temporal-wave.com>

This an FAQ really. I beleive I have nswered it mire than once on the  
list, but:

MLB : '/*' ( options { greedy = false; } : .* )
( '*/' | { print error message }
{ skip(); }
;

You might need EOF rather just empty alt.

You could also use:

( {!(input.LA(1) == '*' && input.LA(2) == '/')}?=> .)*

And similar variations, which are probably better.

Jim
On Jul 16, 2009, at 4:56 AM, Gokulakannan Somasundaram <gokul007 at gmail.com 
 > wrote:

> After doing a little bit of research, i think this is my finding.  
> The only information, i can derive from AntLR infrastructure would  
> be that it was expecting a '*' but met with an EOF. There is no way  
> i would be able to find out that this '*' for the LEXER token  
> ML_COMMENT.  My analysis is based on the following
>
> This is the grammar, i used
>
> grammar Expr1;
>
> @lexer::members {
>     //@Override
>     public String getErrorMessage(RecognitionException me,String[]  
> tokenNames_)
>     {
>         String tokenName="<unknown>";
>         if( me instanceof MismatchedTokenException )
>         {
>             System.out.println(state.type);
>             System.out.println(ML_COMMENT);
>             if(state.type == ML_COMMENT)
>             {
>                 System.out.println("First Breakthrough");
>             }
>         }
>         System.out.println(me);
>         me.printStackTrace();
>         return tokenName;
>     }
> }
>
> ML_COMMENT
>     :    '/*' ( options { greedy = false; } : .* ) '*/' { skip(); };
>
>
>
> ml_comment
>     :    ('\r\n')* { System.out.println("Success"); }
>     ;
>
> when i entered
> /*
> 123
> Ctrl-Z
>
> i got
> 0
> 4
> MismatchedTokenException(-1!=42)
> MismatchedTokenException(-1!=42)
>         at org.antlr.runtime.Lexer.match(Lexer.java:167)
>         at Expr1Lexer.mML_COMMENT(Expr1Lexer.java:119)
>         at Expr1Lexer.mTokens(Expr1Lexer.java:161)
>         at org.antlr.runtime.Lexer.nextToken(Lexer.java:84)
>         at org.antlr.runtime.CommonTokenStream.fillBuffer 
> (CommonTokenStream.java
> :95)
>         at org.antlr.runtime.CommonTokenStream.LT 
> (CommonTokenStream.java:238)
>         at org.antlr.runtime.CommonTokenStream.LA 
> (CommonTokenStream.java:300)
>         at Expr1Parser.ml_comment(Expr1Parser.java:45)
>         at Main.main(Main.java:13)
> line 3:0 <unknown>
> Success
>
> But in mML_COMMENT function, the token being parsed is never saved  
> as a state. It is saved only after the token is parsed complete.
>
>     // $ANTLR start "ML_COMMENT"
>     public final void mML_COMMENT() throws RecognitionException {
>         try {
>             int _type = ML_COMMENT;
>             int _channel = DEFAULT_TOKEN_CHANNEL;
>             // Expr1.g:24:2: ( '/*' ( options {greedy=false; } :  
> ( . )* ) '*/' )
>             // Expr1.g:24:4: '/*' ( options {greedy=false; } : ( . ) 
> * ) '*/'
>             {
>             match("/*");
>
>             // Expr1.g:24:9: ( options {greedy=false; } : ( . )* )
>             // Expr1.g:24:41: ( . )*
>             {
>             // Expr1.g:24:41: ( . )*
>             loop1:
>             do {
>                 int alt1=2;
>                 int LA1_0 = input.LA(1);
>
>                 if ( (LA1_0=='*') ) {
>                     int LA1_1 = input.LA(2);
>
>                     if ( (LA1_1=='/') ) {
>                         alt1=2;
>                     }
>                     else if ( ((LA1_1>='\u0000' && LA1_1<='.')|| 
> (LA1_1>='0' && LA1_1<='\uFFFF')) ) {
>                         alt1=1;
>                     }
>
>
>                 }
>                 else if ( ((LA1_0>='\u0000' && LA1_0<=')')|| 
> (LA1_0>='+' && LA1_0<='\uFFFF')) ) {
>                     alt1=1;
>                 }
>
>
>                 switch (alt1) {
>                 case 1 :
>                     // Expr1.g:24:41: .
>                     {
>                     matchAny();
>
>                     }
>                     break;
>
>                 default :
>                     break loop1;
>                 }
>             } while (true);
>
>
>             }
>
>             match("*/");    //This is where the error occurs
>
>              skip();
>
>             }
>
>             state.type = _type;
>             state.channel = _channel;
>         }
>         finally {
>         }
>     }
>
>
> Since state is saved after that point, i won't be able to get the  
> state with the help of overriding functions. So i think the only  
> option is match the token which finds out the error and throw an  
> exception(should be a user defined one, which can't be caught by  
> AntLR infra) from inside.
>
> ML_COMMENT_ERR
>     :    '/*' (  (~('*/'))* ) {  System.out.println("Throw the  
> Required Error here"); }
>     ;
>
> It works. But i think it would be nice if we have the lexer with the  
> extra information on which token it is parsing right now. Like
>
> state.type_being_parsed = _type; at the top of the function.
>
>
> Please let me know, whether my approach is correct.
>
> Thanks,
> Gokul.
>
>
>
> On Thu, Jul 16, 2009 at 3:44 PM, Gokulakannan Somasundaram <gokul007 at gmail.com 
> > wrote:
> Hi,
>    I am trying to filter out multi-line comments, for which i am  
> using the following Token definition (provided in antlr.org)
> ML_COMMENT
>     :    '/*' ( options { greedy = false; } : .* ) '*/' { skip(); };
>
> But i intend to provide a informative error message, when EOF occurs  
> without any '*/'.  Can someone help me on how to achieve this? I am  
> trying out lot of things, but nothing seems to work and i seem to  
> missing some basic fact/knowledge.
> ' ( options {greedy=false;} : . )* '|>' ;
> Thanks,
> Gokul.
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090716/b4b5ae9c/attachment.html 

From micha-1 at fantasymail.de  Thu Jul 16 05:34:41 2009
From: micha-1 at fantasymail.de (Michael)
Date: Thu, 16 Jul 2009 14:34:41 +0200
Subject: [antlr-interest] Reg Multi-line comments
In-Reply-To: <A60EFF0A-62E7-4F37-834A-A5E460591E6A@temporal-wave.com>
References: <9362e74e0907160314o1334535fsa19a346e4524fb44@mail.gmail.com>
	<9362e74e0907160456v1074f510g546975f8d273b462@mail.gmail.com>
	<A60EFF0A-62E7-4F37-834A-A5E460591E6A@temporal-wave.com>
Message-ID: <200907161434.41109.micha-1@fantasymail.de>

Am Thursday 16 July 2009 14:22:51 schrieb Jim Idle:
> This an FAQ really. I beleive I have nswered it mire than once on the
> list, but:
>
> MLB : '/*' ( options { greedy = false; } : .* )
> ( '*/' | { print error message }
> { skip(); }
> ;
>
> You might need EOF rather just empty alt.

I tried that too and it gives an error:

lexer grammar C;

MLB : '/*' ( options { greedy = false; } : .* )
( '*/' | EOF { print error message } )
{ skip(); }
;


error(201): C.g:3:44: The following alternatives can never be matched: 1

with and without the EOF

 Michael


From kintar1900 at gmail.com  Thu Jul 16 05:57:52 2009
From: kintar1900 at gmail.com (Alec Lanter)
Date: Thu, 16 Jul 2009 07:57:52 -0500
Subject: [antlr-interest] A question about dynamic grammar
Message-ID: <1730142e0907160557j30c82355pd0f11111de8eff29@mail.gmail.com>

Hello, everyone.
I've only recently started using ANTLR, and I love the way it takes a lot of
the drudge work out of simple recognizers.  I'm having a little trouble with
more complex tasks, though, and I was hoping someone could offer advice.

I have an old project that did command parsing for an interactive fiction
game.  The parser is written by hand, and deals with rules that I'm having a
very hard time translating to ANTLR.  One such example:  In a room, there
are three monkeys, all in a cage.  One of the monkeys is "monkey
from Madagascar".  The syntax for the "take" command is "take <noun> from
<noun>".  The hand-coded parser handles the ambiguity of the command "take
monkey from Madagascar from cage" by identifying "from" as a literal
separator in the verb rule and considering all possible ways the input could
be split around it.  So, it ends up checking the options:

   - "take"(verb) "monkey"(noun) "from"(literal) "Madagascar from
   cage"(noun)
   - "take"(verb) "monkey from Madagascar"(noun) "from"(literal)
   "cage"(noun)

The parser finds that only one of those constructions results in two valid
nouns, so it uses that interpretation when it invokes the verb.

I've been using the Pragmatic Programmers Definitive ANTLR Reference to try
and help myself along, and I've had some success with semantic predicates,
but I'm completely failing to understand how I can get ANTLR to perform the
lookahead necessary to recognize that there are two ways the input can be
parsed.  I've got grammar rules set up that successfully parse sentences
like "take monkey from cage" and "go north" by using lookup tables of verbs
and nouns in the predicates, but that falls apart when a noun has whitespace
in the name, causing it to be broken into multiple tokens.

Any advice?  I'm pretty sure the solution is sitting there in black and
white in the book, but the discussion on LL(*) and semantic predicates is a
little too abstract for me to handle this early in my experience with ANTLR.

Thanks,

-- Alec Lanter
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090716/46133546/attachment.html 

From benblo+ANTLR at gmail.com  Thu Jul 16 07:10:13 2009
From: benblo+ANTLR at gmail.com (Benoit Fouletier)
Date: Thu, 16 Jul 2009 16:10:13 +0200
Subject: [antlr-interest] partial tree rewrites
Message-ID: <b02eee6b0907160710r7eb83c7bn61fcfbcbf8897300@mail.gmail.com>

I'm trying to simplify a rule from:
 VAR ID ASSIGN INT
 -> VAR ID COLON TYPE["int"] ASSIGN INT
| VAR ID ASSIGN StringValue
 -> VAR ID COLON TYPE["string"] ASSIGN StringValue

to something like:

 (VAR ID -> VAR ID)
 (
ASSIGN INT
-> COLON TYPE["int"] ASSIGN INT
 | ASSIGN StringValue
-> COLON TYPE["string"] ASSIGN StringValue
 )

Do I have the syntax wrong, or are partial rewrites simply not possible?

    Ben
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090716/c8a112a4/attachment.html 

From stuart.dootson at gmail.com  Thu Jul 16 07:30:54 2009
From: stuart.dootson at gmail.com (Stuart Dootson)
Date: Thu, 16 Jul 2009 15:30:54 +0100
Subject: [antlr-interest]  forcing parenthesis (no precedence)
In-Reply-To: <8b56cad40907160710t42ccae97jfabe01159fe78204@mail.gmail.com>
References: <440de1810907150220k633ccdcas69549840c3d6daec@mail.gmail.com>
	<440de1810907152357q2873b2b0va38b956a399316f6@mail.gmail.com>
	<4a5f1396.0f02be0a.5dd8.ffffd4fdSMTPIN_ADDED@mx.google.com>
	<440de1810907160521w6eb822ey31837e2025b02a4a@mail.gmail.com>
	<8b56cad40907160710t42ccae97jfabe01159fe78204@mail.gmail.com>
Message-ID: <8b56cad40907160730m479d8c6o8cb09a8f2bb4eefa@mail.gmail.com>

On Thu, Jul 16, 2009 at 1:21 PM, hakan eryargi <hakan.eryargi at gmail.com> wrote:
>
> i will really appreciate a simple sample if possible :)

Simple grammar that mimics the Ada approach:

grammar test;

program  :   expression EOF
         ;

expression
         :  primary ( ('AND' primary ) + | ( 'OR' primary ) +)
         ;

primary  :  VARIABLE
         |  'TRUE'
         |  'FALSE'
         |  '(' expression ')'
         ;

VARIABLE :  'a'..'z' +
         ;

First time I've really used AntlrWorks and Antlr 3 to write and
(informally) test a grammar (I've only really used Antlr 2 before) -
very cool. Kudos to Ter and Jean!!!

Stuart Dootson

From david-sarah at jacaranda.org  Thu Jul 16 07:48:21 2009
From: david-sarah at jacaranda.org (David-Sarah Hopwood)
Date: Thu, 16 Jul 2009 15:48:21 +0100
Subject: [antlr-interest] forcing parenthesis (no precedence)
In-Reply-To: <440de1810907152357q2873b2b0va38b956a399316f6@mail.gmail.com>
References: <440de1810907150220k633ccdcas69549840c3d6daec@mail.gmail.com>
	<440de1810907152357q2873b2b0va38b956a399316f6@mail.gmail.com>
Message-ID: <4A5F3DB5.5050401@jacaranda.org>

hakan eryargi wrote:
> thank you but i can't get it. simply making AND's and OR's have same
> precedence doesnt force user to use parentheses.

Try this:

  tokens {
    OR     = '|';
    AND    = '&';
    LPAREN = '(';
    RPAREN = ')';
  }

  expr
    : primaryExpr ((OR^ primaryExpr)+ | (AND^ primaryExpr)+)?
    ;

  primaryExpr
    : LPAREN expr^ RPAREN
    | simpleExpr
    ;

-- 
David-Sarah Hopwood  ?  http://davidsarah.livejournal.com


From david-sarah at jacaranda.org  Thu Jul 16 07:55:38 2009
From: david-sarah at jacaranda.org (David-Sarah Hopwood)
Date: Thu, 16 Jul 2009 15:55:38 +0100
Subject: [antlr-interest] forcing parenthesis (no precedence)
In-Reply-To: <8b56cad40907160730m479d8c6o8cb09a8f2bb4eefa@mail.gmail.com>
References: <440de1810907150220k633ccdcas69549840c3d6daec@mail.gmail.com>	<440de1810907152357q2873b2b0va38b956a399316f6@mail.gmail.com>	<4a5f1396.0f02be0a.5dd8.ffffd4fdSMTPIN_ADDED@mx.google.com>	<440de1810907160521w6eb822ey31837e2025b02a4a@mail.gmail.com>	<8b56cad40907160710t42ccae97jfabe01159fe78204@mail.gmail.com>
	<8b56cad40907160730m479d8c6o8cb09a8f2bb4eefa@mail.gmail.com>
Message-ID: <4A5F3F6A.5010201@jacaranda.org>

Stuart Dootson wrote:
> On Thu, Jul 16, 2009 at 1:21 PM, hakan eryargi <hakan.eryargi at gmail.com> wrote:
>> i will really appreciate a simple sample if possible :)
> 
> Simple grammar that mimics the Ada approach:
> 
> grammar test;
> 
> program  :   expression EOF
>          ;
> 
> expression
>          :  primary ( ('AND' primary ) + | ( 'OR' primary ) +)
>          ;

This doesn't allow a single <primary> that does not use AND/OR as an
<expression>. You want something like:

  expression
           :  primary ( ('AND' primary ) + | ( 'OR' primary ) +)?
           ;

(It's also preferable to declare all of the tokens, as in my other reply.)

> primary  :  VARIABLE
>          |  'TRUE'
>          |  'FALSE'
>          |  '(' expression ')'
>          ;
> 
> VARIABLE :  'a'..'z' +
>          ;

-- 
David-Sarah Hopwood  ?  http://davidsarah.livejournal.com


From david-sarah at jacaranda.org  Thu Jul 16 09:16:25 2009
From: david-sarah at jacaranda.org (David-Sarah Hopwood)
Date: Thu, 16 Jul 2009 17:16:25 +0100
Subject: [antlr-interest] Reg Multi-line comments
In-Reply-To: <9362e74e0907160314o1334535fsa19a346e4524fb44@mail.gmail.com>
References: <9362e74e0907160314o1334535fsa19a346e4524fb44@mail.gmail.com>
Message-ID: <4A5F5259.1070504@jacaranda.org>

Gokulakannan Somasundaram wrote:
> Hi,
>    I am trying to filter out multi-line comments, for which i am using the
> following Token definition (provided in antlr.org)
> ML_COMMENT
>     :    '/*' ( options { greedy = false; } : .* ) '*/' { skip(); };
> 
> But i intend to provide a informative error message, when EOF occurs without
> any '*/'.  Can someone help me on how to achieve this? I am trying out lot
> of things, but nothing seems to work and i seem to missing some basic
> fact/knowledge.

This is a special case of the more general issue of knowing what rule(s)
you are in when an error occurs. This information is available in the
"rule invocation stack". Override the following methods in your lexer:

lexer::members {
  public String getErrorMessage(RecognitionException e,
                                String[] tokenNames) {
    List stack = getRuleInvocationStack(e, this.getClass().getName());

    // The top-level token rule is almost always at position 1 in the
    // stack, after "mTokens".
    // .substring(1) strips the "m" prepended to lexer rule names.
    String rule = stack.size() < 2 ? "" :
      "in " + stack.get(1).toString().substring(1) + ": ";

    return rule + super.getErrorMessage(e, tokenNames);
  }

  public String getTokenErrorDisplay(Token t) {
    return t.toString();
  }
}

Now you will get error messages something like:

  line 1:5 in ML_COMMENT: mismatched character '<EOF>' expecting '*'

(I name the rules so that they are more human-friendly; alternatively
you can map them to localised strings easily enough.)

The same approach can be used in the parser, although in that case the
rule that is most human-relevant is less likely to be at position 1 in
the invocation stack. See section 10 of 'The Definitive ANTLR Reference'
for more information, or for an alternative approach using 'paraphrases'.

-- 
David-Sarah Hopwood  ?  http://davidsarah.livejournal.com


From vincedupuis at hotmail.com  Thu Jul 16 11:23:38 2009
From: vincedupuis at hotmail.com (Vincent Dupuis)
Date: Thu, 16 Jul 2009 14:23:38 -0400
Subject: [antlr-interest] Understand the stringtemplate integration
Message-ID: <SNT116-W2266461D15DCE9E152D338B6210@phx.gbl>



Hi,

I've been using antlr for couple of years to do code generators for c++.

Before, to generate the output I was embedding the code to format the output directly in the grammar file.

Now, I would like to use stringtemplate to gives the programmer the flexibility to writes it's own output format using template files.
So the parser puts its output in predefined templates.

I'm in front of 2 problems:

First, a parser rule can only generate one template. Like this :

transition
    :    'on' IDENT ('if' a+=identList)? b+=action
        -> transition(tname={$IDENT.text}, conditions={$a}, actions={$b})
    ;

I would like also to generate a second template like this:
        -> event(ename={$IDENT.text})

for the same rule above.

How can I achieve that?


Second, when the template file is missing a template definition, an exception is thrown.
It can happen that the programmer (user) doesn't need all templates, is there a way to not thrown these exception rather than putting empty templates?


Thanks you,

Vincent



_________________________________________________________________
Attention ? tous les Humains. Nous sommes vos photos. Lib?rez-nous de vos disques durs.
http://go.microsoft.com/?linkid=9666050
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090716/5ead449d/attachment.html 

From gxs213 at case.edu  Thu Jul 16 11:41:49 2009
From: gxs213 at case.edu (Gang Shu)
Date: Thu, 16 Jul 2009 14:41:49 -0400
Subject: [antlr-interest] Want to construct a Control Flow Graph of the Java
	source code
Message-ID: <002e01ca0645$14e54400$3eafcc00$@edu>

 

Hey,

Is there any toolset I can use to construct a Control Flow Graph of the Java
source code? Thanks!

 

I have already obtained an AST from ANTLR for Java source code. And what I
really want is construct a Control Flow Graph of the code. 

Is there any toolset in the ANTLR for this goal? Thanks a lot for your
looking.

 

Best,

Gang 

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090716/4693b5c6/attachment.html 

From gerald at certiv.net  Thu Jul 16 12:03:00 2009
From: gerald at certiv.net (Gerald Rosenberg)
Date: Thu, 16 Jul 2009 12:03:00 -0700
Subject: [antlr-interest] Want to construct a Control Flow Graph of the
 Java source code
In-Reply-To: <002e01ca0645$14e54400$3eafcc00$@edu>
References: <002e01ca0645$14e54400$3eafcc00$@edu>
Message-ID: <200907161909.n6GJ9gnV010903@zinc.newtechlaw.com>

At 11:41 AM 7/16/2009, you wrote:
>Hey,
>Is there any toolset I can use to construct a Control Flow Graph of 
>the Java source code? Thanks!
>
>I have already obtained an AST from ANTLR for Java source code. And 
>what I really want is construct a Control Flow Graph of the code.
>Is there any toolset in the ANTLR for this goal? Thanks a lot for 
>your looking.

Are you looking for a graph of the actual parser flow executed in 
evaluating an input text to produce the AST?

If so, AntlrDT (www.certiv.net) can do this. 


From david-sarah at jacaranda.org  Thu Jul 16 12:32:44 2009
From: david-sarah at jacaranda.org (David-Sarah Hopwood)
Date: Thu, 16 Jul 2009 20:32:44 +0100
Subject: [antlr-interest] Reg Multi-line comments
In-Reply-To: <4A5F5259.1070504@jacaranda.org>
References: <9362e74e0907160314o1334535fsa19a346e4524fb44@mail.gmail.com>
	<4A5F5259.1070504@jacaranda.org>
Message-ID: <4A5F805C.5020000@jacaranda.org>

David-Sarah Hopwood wrote:
[...]
> This is a special case of the more general issue of knowing what rule(s)
> you are in when an error occurs. This information is available in the
> "rule invocation stack". Override the following methods in your lexer:
> 
> lexer::members {
>   public String getErrorMessage(RecognitionException e,
>                                 String[] tokenNames) {
>     List stack = getRuleInvocationStack(e, this.getClass().getName());
> 
>     // The top-level token rule is almost always at position 1 in the
>     // stack, after "mTokens".
>     // .substring(1) strips the "m" prepended to lexer rule names.
>     String rule = stack.size() < 2 ? "" :
>       "in " + stack.get(1).toString().substring(1) + ": ";
> 
>     return rule + super.getErrorMessage(e, tokenNames);
>   }
> 
>   public String getTokenErrorDisplay(Token t) {
>     return t.toString();
>   }
> }

Actually the override of getTokenErrorDisplay is not needed and will
result in more cryptic error messages; overriding getErrorMessage as
above should be sufficient.

-- 
David-Sarah Hopwood  ?  http://davidsarah.livejournal.com


From gokul007 at gmail.com  Thu Jul 16 12:34:06 2009
From: gokul007 at gmail.com (Gokulakannan Somasundaram)
Date: Fri, 17 Jul 2009 01:04:06 +0530
Subject: [antlr-interest] Reg Multi-line comments
In-Reply-To: <4A5F5259.1070504@jacaranda.org>
References: <9362e74e0907160314o1334535fsa19a346e4524fb44@mail.gmail.com>
	<4A5F5259.1070504@jacaranda.org>
Message-ID: <9362e74e0907161234q4fcae229x94a00de27b171e73@mail.gmail.com>

Actually there is a comment like this before the source code of the
function.

    /** A more general version of getRuleInvocationStack where you can
     *  pass in, for example, a RecognitionException to get it's rule
     *  stack trace.  This routine is shared with all recognizers, hence,
     *  static.
     *
     *  TODO: move to a utility class or something; weird having lexer call
this
     */
    public static List getRuleInvocationStack(Throwable e,
                                              String recognizerClassName)


It more or less sounds to me that lexer should not call this. When i observe
the source code, i see that your approach may not be possible, because the
token to be tried out never gets saved anywhere. But let me check this.

Thanks,
Gokul.

On Thu, Jul 16, 2009 at 9:46 PM, David-Sarah Hopwood <
david-sarah at jacaranda.org> wrote:

> Gokulakannan Somasundaram wrote:
> > Hi,
> >    I am trying to filter out multi-line comments, for which i am using
> the
> > following Token definition (provided in antlr.org)
> > ML_COMMENT
> >     :    '/*' ( options { greedy = false; } : .* ) '*/' { skip(); };
> >
> > But i intend to provide a informative error message, when EOF occurs
> without
> > any '*/'.  Can someone help me on how to achieve this? I am trying out
> lot
> > of things, but nothing seems to work and i seem to missing some basic
> > fact/knowledge.
>
> This is a special case of the more general issue of knowing what rule(s)
> you are in when an error occurs. This information is available in the
> "rule invocation stack". Override the following methods in your lexer:
>
> lexer::members {
>  public String getErrorMessage(RecognitionException e,
>                                String[] tokenNames) {
>    List stack = getRuleInvocationStack(e, this.getClass().getName());
>
>    // The top-level token rule is almost always at position 1 in the
>    // stack, after "mTokens".
>    // .substring(1) strips the "m" prepended to lexer rule names.
>    String rule = stack.size() < 2 ? "" :
>      "in " + stack.get(1).toString().substring(1) + ": ";
>
>    return rule + super.getErrorMessage(e, tokenNames);
>  }
>
>  public String getTokenErrorDisplay(Token t) {
>    return t.toString();
>  }
> }
>
> Now you will get error messages something like:
>
>  line 1:5 in ML_COMMENT: mismatched character '<EOF>' expecting '*'
>
> (I name the rules so that they are more human-friendly; alternatively
> you can map them to localised strings easily enough.)
>
> The same approach can be used in the parser, although in that case the
> rule that is most human-relevant is less likely to be at position 1 in
> the invocation stack. See section 10 of 'The Definitive ANTLR Reference'
> for more information, or for an alternative approach using 'paraphrases'.
>
> --
> David-Sarah Hopwood  ?  http://davidsarah.livejournal.com
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090717/69b59bf6/attachment.html 

From antlr at mirality.co.nz  Thu Jul 16 12:53:14 2009
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Fri, 17 Jul 2009 07:53:14 +1200
Subject: [antlr-interest] partial tree rewrites
In-Reply-To: <b02eee6b0907160710r7eb83c7bn61fcfbcbf8897300@mail.gmail.co
 m>
References: <b02eee6b0907160710r7eb83c7bn61fcfbcbf8897300@mail.gmail.com>
Message-ID: <20090716195328.35BBF3418433@www.antlr.org>

At 02:10 17/07/2009, Benoit Fouletier wrote:
>(VAR ID -> VAR ID)
>(
>ASSIGN INT
>->COLON TYPE["int"] ASSIGN INT
>|ASSIGN StringValue
>->COLON TYPE["string"] ASSIGN StringValue
>)
>
>Do I have the syntax wrong, or are partial rewrites simply not 
>possible?

A rewrite always sets the output of the entire rule.  You cannot 
use it for only part of the rule.  This is important for iterative 
rules which need to build up a nested chain of nodes.

(A workaround is to move the bit that you want to do a partial 
rewrite for into a subrule.)


From antlr at mirality.co.nz  Thu Jul 16 12:58:13 2009
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Fri, 17 Jul 2009 07:58:13 +1200
Subject: [antlr-interest] Reg Multi-line comments
In-Reply-To: <200907161434.41109.micha-1@fantasymail.de>
References: <9362e74e0907160314o1334535fsa19a346e4524fb44@mail.gmail.com>
	<9362e74e0907160456v1074f510g546975f8d273b462@mail.gmail.com>
	<A60EFF0A-62E7-4F37-834A-A5E460591E6A@temporal-wave.com>
	<200907161434.41109.micha-1@fantasymail.de>
Message-ID: <20090716195822.EC1B13418433@www.antlr.org>

At 00:34 17/07/2009, Michael wrote:
 >> MLB : '/*' ( options { greedy = false; } : .* )
 >> ( '*/' | { print error message }
 >> { skip(); }
 >> ;
 >>
 >> You might need EOF rather just empty alt.
 >
 >I tried that too and it gives an error:

The problem here is that with the end text potentially empty the 
wildcard will consume all input.  You need to use Jim's suggested 
replacement for the wildcard as well in order to limit the scope.

Or another alternative replacement:

MLB : '/*' (~'*' | '*' ~'/')*
       ( '*/' | { print error message }
       { skip(); }
   ;

You *might* need to change ~'*' above to ~('*' | EOF), but I think 
it's ok as is.


From benblo+ANTLR at gmail.com  Thu Jul 16 13:30:24 2009
From: benblo+ANTLR at gmail.com (Benoit Fouletier)
Date: Thu, 16 Jul 2009 22:30:24 +0200
Subject: [antlr-interest] partial tree rewrites
In-Reply-To: <4a5f8538.2a02be0a.26b4.2f6cSMTPIN_ADDED@mx.google.com>
References: <b02eee6b0907160710r7eb83c7bn61fcfbcbf8897300@mail.gmail.com> 
	<4a5f8538.2a02be0a.26b4.2f6cSMTPIN_ADDED@mx.google.com>
Message-ID: <b02eee6b0907161330r32dd23eelf422720fe5b886ef@mail.gmail.com>

On Thu, Jul 16, 2009 at 9:53 PM, Gavin Lambert <antlr at mirality.co.nz> wrote:

> At 02:10 17/07/2009, Benoit Fouletier wrote:
>
>> (VAR ID -> VAR ID)
>> (
>> ASSIGN INT
>> ->COLON TYPE["int"] ASSIGN INT
>> |ASSIGN StringValue
>> ->COLON TYPE["string"] ASSIGN StringValue
>> )
>>
>> Do I have the syntax wrong, or are partial rewrites simply not possible?
>>
>
> A rewrite always sets the output of the entire rule.  You cannot use it for
> only part of the rule.  This is important for iterative rules which need to
> build up a nested chain of nodes.
>

Ah, makes sense!


> (A workaround is to move the bit that you want to do a partial rewrite for
> into a subrule.)
>

Thanks I'll do that. It's simple and maybe even more elegant than the syntax
I had in mind.
BTW, should I mark these kind of subrule as fragments? I don't really get
when to use fragment.

Anyway thanks!

        Ben
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090716/16c7a5b4/attachment.html 

From antlr at mirality.co.nz  Thu Jul 16 13:58:37 2009
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Fri, 17 Jul 2009 08:58:37 +1200
Subject: [antlr-interest] partial tree rewrites
In-Reply-To: <b02eee6b0907161330r32dd23eelf422720fe5b886ef@mail.gmail.co
 m>
References: <b02eee6b0907160710r7eb83c7bn61fcfbcbf8897300@mail.gmail.com>
	<4a5f8538.2a02be0a.26b4.2f6cSMTPIN_ADDED@mx.google.com>
	<b02eee6b0907161330r32dd23eelf422720fe5b886ef@mail.gmail.com>
Message-ID: <20090716205849.0BE47341847E@www.antlr.org>

At 08:30 17/07/2009, Benoit Fouletier wrote:
>BTW, should I mark these kind of subrule as fragments? I don't 
>really get when to use fragment.

No, fragment applies only to lexer rules (with an initial 
capital); it makes them non-toplevel rules.  To put it another 
way, every lexer rule that does *not* use fragment is a candidate 
output token.  (And in general, a non-fragment lexer rule should 
not call another non-fragment lexer rule, as that suggests 
ambiguity.)


From asalh at mindspring.com  Thu Jul 16 16:22:17 2009
From: asalh at mindspring.com (Bryan S Follins)
Date: Thu, 16 Jul 2009 16:22:17 -0700
Subject: [antlr-interest] Getting the hang of this
In-Reply-To: <20090716205849.0BE47341847E@www.antlr.org>
References: <b02eee6b0907160710r7eb83c7bn61fcfbcbf8897300@mail.gmail.com>	<4a5f8538.2a02be0a.26b4.2f6cSMTPIN_ADDED@mx.google.com>	<b02eee6b0907161330r32dd23eelf422720fe5b886ef@mail.gmail.com>
	<20090716205849.0BE47341847E@www.antlr.org>
Message-ID: <023d01ca066c$42e5ee00$c8b1ca00$@com>


OK...The following is ANTLR Code

grammar T;

r	:	'call' ID ';'	{System.out.println("invoke "+$ID.text);};
ID	:	'a'..'z'+;
WS	:	(' ' | '\n' | '\r')+ {$channel=HIDDEN;};


Lets say, in addition, I wanted to add some code that also give me a
numerical password, how would I do it?  In other words, after entering text
for a name to be compiled, what code could I use to let me enter a number in
ANTLRWorks?


From asalh at mindspring.com  Thu Jul 16 17:14:06 2009
From: asalh at mindspring.com (Bryan S Follins)
Date: Thu, 16 Jul 2009 17:14:06 -0700
Subject: [antlr-interest] ANTLRWorks GUI
Message-ID: <024701ca0673$81cb7200$85625600$@com>

Does anyone know of a site where I can go to get some practice on coding in
the ANTLRWorks GUI?

 

"When you have eliminated the impossible, whatever remains, however
improbable, must be the truth."

--Sherlock Holmes from Sir Arthur Conan Doyle's The Sign of Four.

 

I AM an information warrior...

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090716/384206d0/attachment.html 

From asalh at mindspring.com  Thu Jul 16 17:43:16 2009
From: asalh at mindspring.com (Bryan S Follins)
Date: Thu, 16 Jul 2009 17:43:16 -0700
Subject: [antlr-interest] Getting the hang of this
In-Reply-To: <023d01ca066c$42e5ee00$c8b1ca00$@com>
References: <b02eee6b0907160710r7eb83c7bn61fcfbcbf8897300@mail.gmail.com>	<4a5f8538.2a02be0a.26b4.2f6cSMTPIN_ADDED@mx.google.com>	<b02eee6b0907161330r32dd23eelf422720fe5b886ef@mail.gmail.com>	<20090716205849.0BE47341847E@www.antlr.org>
	<023d01ca066c$42e5ee00$c8b1ca00$@com>
Message-ID: <025201ca0677$932c0150$b98403f0$@com>

Or in other words, how can I add a rule to the code below which would allow
me to enter a number (like a zip code?)

-----Original Message-----
From: antlr-interest-bounces at antlr.org
[mailto:antlr-interest-bounces at antlr.org] On Behalf Of Bryan S Follins
Sent: Thursday, July 16, 2009 16:22
To: 'antlr-interest'
Subject: [antlr-interest] Getting the hang of this


OK...The following is ANTLR Code

grammar T;

r	:	'call' ID ';'	{System.out.println("invoke "+$ID.text);};
ID	:	'a'..'z'+;
WS	:	(' ' | '\n' | '\r')+ {$channel=HIDDEN;};


Lets say, in addition, I wanted to add some code that also give me a
numerical password, how would I do it?  In other words, after entering text
for a name to be compiled, what code could I use to let me enter a number in
ANTLRWorks?


List: http://www.antlr.org/mailman/listinfo/antlr-interest
Unsubscribe:
http://www.antlr.org/mailman/options/antlr-interest/your-email-address


From asalh at mindspring.com  Thu Jul 16 22:24:41 2009
From: asalh at mindspring.com (Bryan S Follins)
Date: Thu, 16 Jul 2009 22:24:41 -0700
Subject: [antlr-interest] Getting the hang of this
In-Reply-To: <025201ca0677$932c0150$b98403f0$@com>
References: <b02eee6b0907160710r7eb83c7bn61fcfbcbf8897300@mail.gmail.com>	<4a5f8538.2a02be0a.26b4.2f6cSMTPIN_ADDED@mx.google.com>	<b02eee6b0907161330r32dd23eelf422720fe5b886ef@mail.gmail.com>	<20090716205849.0BE47341847E@www.antlr.org>
	<023d01ca066c$42e5ee00$c8b1ca00$@com>
	<025201ca0677$932c0150$b98403f0$@com>
Message-ID: <026301ca069e$e2cf8250$a86e86f0$@com>

Is anyone out there?

-----Original Message-----
From: Bryan S Follins [mailto:asalh at mindspring.com] 
Sent: Thursday, July 16, 2009 17:43
To: 'Bryan S Follins'; 'antlr-interest'
Subject: RE: [antlr-interest] Getting the hang of this

Or in other words, how can I add a rule to the code below which would allow
me to enter a number (like a zip code?)

-----Original Message-----
From: antlr-interest-bounces at antlr.org
[mailto:antlr-interest-bounces at antlr.org] On Behalf Of Bryan S Follins
Sent: Thursday, July 16, 2009 16:22
To: 'antlr-interest'
Subject: [antlr-interest] Getting the hang of this


OK...The following is ANTLR Code

grammar T;

r	:	'call' ID ';'	{System.out.println("invoke "+$ID.text);};
ID	:	'a'..'z'+;
WS	:	(' ' | '\n' | '\r')+ {$channel=HIDDEN;};


Lets say, in addition, I wanted to add some code that also give me a
numerical password, how would I do it?  In other words, after entering text
for a name to be compiled, what code could I use to let me enter a number in
ANTLRWorks?


List: http://www.antlr.org/mailman/listinfo/antlr-interest
Unsubscribe:
http://www.antlr.org/mailman/options/antlr-interest/your-email-address


From david-sarah at jacaranda.org  Thu Jul 16 22:33:32 2009
From: david-sarah at jacaranda.org (David-Sarah Hopwood)
Date: Fri, 17 Jul 2009 06:33:32 +0100
Subject: [antlr-interest] Reg Multi-line comments
In-Reply-To: <9362e74e0907161234q4fcae229x94a00de27b171e73@mail.gmail.com>
References: <9362e74e0907160314o1334535fsa19a346e4524fb44@mail.gmail.com>	
	<4A5F5259.1070504@jacaranda.org>
	<9362e74e0907161234q4fcae229x94a00de27b171e73@mail.gmail.com>
Message-ID: <4A600D2C.9090001@jacaranda.org>

Gokulakannan Somasundaram wrote:
> Actually there is a comment like this before the source code of the
> function.
> 
>     /** A more general version of getRuleInvocationStack where you can
>      *  pass in, for example, a RecognitionException to get it's rule
>      *  stack trace.  This routine is shared with all recognizers, hence,
>      *  static.
>      *
>      *  TODO: move to a utility class or something; weird having lexer call
>      *  this */
>     public static List getRuleInvocationStack(Throwable e,
>                                               String recognizerClassName)
> 
> 
> It more or less sounds to me that lexer should not call this.

The recipe in section 10.2 of 'The Definitive ANTLR Reference' does so,
therefore it's a supported API, not internal. Moving it would break all
lexers using that recipe.

Calling the static version of this method rather than the instance
version (with no arguments) is correct: if you don't obtain the stack
from the RecognitionException that is passed to getErrorMessage, then
the relevent lexer rule will no longer be on the current stack in some
cases.

> When i observe
> the source code, i see that your approach may not be possible, because the
> token to be tried out never gets saved anywhere. But let me check this.

It is possible because the implementation uses a stack trace to determine
which lexer methods were on the call stack when the RecognitionException
was thrown, and so no explicit state is needed. In any case, I tested this
code before posting; it works.

-- 
David-Sarah Hopwood  ?  http://davidsarah.livejournal.com


From asalh at mindspring.com  Thu Jul 16 23:10:48 2009
From: asalh at mindspring.com (Bryan S Follins)
Date: Thu, 16 Jul 2009 23:10:48 -0700
Subject: [antlr-interest] Tom,  a question
Message-ID: <026401ca06a5$54b6d840$fe2488c0$@com>

Tom,

 

How can I add a rule to the code below which would allow me to enter a
number (like a zip code?)

 

I can already enter letters.

 

OK...The following is ANTLR Code

 

grammar T;

 

r     :     'call' ID ';'     {System.out.println("invoke "+$ID.text);};

ID    :     'a'..'z'+;

WS    :     (' ' | '\n' | '\r')+ {$channel=HIDDEN;};

 

Bryan

 

"When you have eliminated the impossible, whatever remains, however
improbable, must be the truth."

--Sherlock Holmes from Sir Arthur Conan Doyle's The Sign of Four.

 

I AM an information warrior...

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090716/eda3e708/attachment.html 

From hakan.eryargi at gmail.com  Thu Jul 16 23:26:46 2009
From: hakan.eryargi at gmail.com (hakan eryargi)
Date: Fri, 17 Jul 2009 09:26:46 +0300
Subject: [antlr-interest] forcing parenthesis (no precedence)
In-Reply-To: <4A5F3F6A.5010201@jacaranda.org>
References: <440de1810907150220k633ccdcas69549840c3d6daec@mail.gmail.com>
	<440de1810907152357q2873b2b0va38b956a399316f6@mail.gmail.com>
	<4a5f1396.0f02be0a.5dd8.ffffd4fdSMTPIN_ADDED@mx.google.com>
	<440de1810907160521w6eb822ey31837e2025b02a4a@mail.gmail.com>
	<8b56cad40907160710t42ccae97jfabe01159fe78204@mail.gmail.com>
	<8b56cad40907160730m479d8c6o8cb09a8f2bb4eefa@mail.gmail.com>
	<4A5F3F6A.5010201@jacaranda.org>
Message-ID: <440de1810907162326n6e37d4a1pcaf406b17a4d18c1@mail.gmail.com>

thank you all. this effectively solved my problem :)

On Thu, Jul 16, 2009 at 5:55 PM, David-Sarah
Hopwood<david-sarah at jacaranda.org> wrote:
> Stuart Dootson wrote:
>> On Thu, Jul 16, 2009 at 1:21 PM, hakan eryargi <hakan.eryargi at gmail.com> wrote:
>>> i will really appreciate a simple sample if possible :)
>>
>> Simple grammar that mimics the Ada approach:
>>
>> grammar test;
>>
>> program ?: ? expression EOF
>> ? ? ? ? ?;
>>
>> expression
>> ? ? ? ? ?: ?primary ( ('AND' primary ) + | ( 'OR' primary ) +)
>> ? ? ? ? ?;
>
> This doesn't allow a single <primary> that does not use AND/OR as an
> <expression>. You want something like:
>
> ?expression
> ? ? ? ? ? : ?primary ( ('AND' primary ) + | ( 'OR' primary ) +)?
> ? ? ? ? ? ;
>
> (It's also preferable to declare all of the tokens, as in my other reply.)
>
>> primary ?: ?VARIABLE
>> ? ? ? ? ?| ?'TRUE'
>> ? ? ? ? ?| ?'FALSE'
>> ? ? ? ? ?| ?'(' expression ')'
>> ? ? ? ? ?;
>>
>> VARIABLE : ?'a'..'z' +
>> ? ? ? ? ?;
>
> --
> David-Sarah Hopwood ?? ?http://davidsarah.livejournal.com
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>

From will at tribbey.net  Fri Jul 17 02:02:31 2009
From: will at tribbey.net (William Tribbey)
Date: Fri, 17 Jul 2009 05:02:31 -0400
Subject: [antlr-interest] ANTLR Newbie Questions
Message-ID: <52e3c4e00907170202vc1c7d6cmb1eb42353cf9d0b@mail.gmail.com>

Hi Everybody, I am new to ANTLR. I have my freshly-delivered ANTLR reference
and I am climbing the learning curve.
My initial purpose for learning ANTLR is to parse Java source files and
dissect the methods within each class, including
the method bodies. I am interested in which methods call which methods.

I do have one question at the moment. Do I need to aim for some sort of AST
analysis for this chore or do I just need suitable
actions? Of the existing Java grammars posted on the ANTLR site, would there
be one considered a better choice for
this task than others?

Thanks for any pointers,

Will Tribbey
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090717/d36fcb34/attachment.html 

From cyron_16 at yahoo.com  Fri Jul 17 07:44:19 2009
From: cyron_16 at yahoo.com (Sorin Fagateanu)
Date: Fri, 17 Jul 2009 07:44:19 -0700 (PDT)
Subject: [antlr-interest] Modifing a grammar to skip the block of a function
Message-ID: <1247841859032-3275782.post@n2.nabble.com>


Hi,


I've run into a problem that despite my best attempts over the last couple
of days, i can't solve myself. I have an action script grammar(AS3.g) taken
from the metaas project and a compilation unit (an .as file) I only need to
process the fields and the methods.My problem is that I can not rely very
much on the parsing of elements in a methodDeclaration code block so I
decided to cut the code block. My scope is that i could have a :
function myFunction():int {
  write everything here blah blah !@#%$^....
  {
     write more stuff here
     here goes other recursive code blocks
  }
  etc...
}
and parse it correctly.

I have followed the examples of multiple-line comments but no success. I
tried to make a lexer that accepts every char words but gives my error when
parsing that on the start of the file it recognize a EVERCHARWORD instead of
specific token needed(PACKAGE for my case),which if i think of that is very
normal ,and all sort of ideas,putting recursive rules and recursive lexers
but did not help me.

I wonder what would be the best aproach to do this and I am asking kindly
for your guidance or at least some hints with how and with what to start.

Thank you in advance,
Sorin
-- 
View this message in context: http://n2.nabble.com/Modifing-a-grammar-to-skip-the-block-of-a-function-tp3275782p3275782.html
Sent from the ANTLR mailing list archive at Nabble.com.

From dave at tridecap.com  Fri Jul 17 08:21:07 2009
From: dave at tridecap.com (Dave Dutcher)
Date: Fri, 17 Jul 2009 10:21:07 -0500
Subject: [antlr-interest] Getting the hang of this
In-Reply-To: <026301ca069e$e2cf8250$a86e86f0$@com>
References: <b02eee6b0907160710r7eb83c7bn61fcfbcbf8897300@mail.gmail.com>	<4a5f8538.2a02be0a.26b4.2f6cSMTPIN_ADDED@mx.google.com>	<b02eee6b0907161330r32dd23eelf422720fe5b886ef@mail.gmail.com>	<20090716205849.0BE47341847E@www.antlr.org><023d01ca066c$42e5ee00$c8b1ca00$@com><025201ca0677$932c0150$b98403f0$@com>
	<026301ca069e$e2cf8250$a86e86f0$@com>
Message-ID: <E143D6C6AC2F4C93A2AD48514E22E11D@tridecap.com>


It sounds like you are trying to get somebody to answer your homework
questions for you.  Have you even tried going to www.antlr.org and reading
the tutorials and docs?


Dave
 

> -----Original Message-----
> From: antlr-interest-bounces at antlr.org 
> [mailto:antlr-interest-bounces at antlr.org] On Behalf Of Bryan S Follins
> Sent: Friday, July 17, 2009 12:25 AM
> To: 'antlr-interest'
> Subject: Re: [antlr-interest] Getting the hang of this
> 
> Is anyone out there?
> 
> -----Original Message-----
> From: Bryan S Follins [mailto:asalh at mindspring.com]
> Sent: Thursday, July 16, 2009 17:43
> To: 'Bryan S Follins'; 'antlr-interest'
> Subject: RE: [antlr-interest] Getting the hang of this
> 
> Or in other words, how can I add a rule to the code below 
> which would allow me to enter a number (like a zip code?)
> 
> -----Original Message-----
> From: antlr-interest-bounces at antlr.org
> [mailto:antlr-interest-bounces at antlr.org] On Behalf Of Bryan S Follins
> Sent: Thursday, July 16, 2009 16:22
> To: 'antlr-interest'
> Subject: [antlr-interest] Getting the hang of this
> 
> 
> OK...The following is ANTLR Code
> 
> grammar T;
> 
> r	:	'call' ID ';'	{System.out.println("invoke 
> "+$ID.text);};
> ID	:	'a'..'z'+;
> WS	:	(' ' | '\n' | '\r')+ {$channel=HIDDEN;};
> 
> 
> Lets say, in addition, I wanted to add some code that also 
> give me a numerical password, how would I do it?  In other 
> words, after entering text for a name to be compiled, what 
> code could I use to let me enter a number in ANTLRWorks?
> 
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
> 
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: 
> http://www.antlr.org/mailman/options/antlr-interest/your-email
> -address


From hugo.pcd at gmail.com  Fri Jul 17 08:34:23 2009
From: hugo.pcd at gmail.com (Hugo Picado)
Date: Fri, 17 Jul 2009 16:34:23 +0100
Subject: [antlr-interest] Multiple evaluations of the same tree
Message-ID: <3c2632090907170834r1118ecc7h9c9d791fbb70d3e8@mail.gmail.com>

Hi everyone,

I'm brand new to ANTLR. I didn't find any doubt similar.

Imagine a parser which the first rule is "prog", the output option is AST. I
created a tree walker to perform the tree evaluation but I need to evaluate
the same tree in a loop such as:

CommonTreeNodeStream nodes = new CommonTreeNodeStream(t);
LangWalker evaluator = new LangWalker(nodes);
for(int i = 0; i < 10000; i++)
        evaluator.rule();
end

As I understood, ANTLR consumes the stream so after the first
evaluator.rule() there is nothing more to consume and the code above
generates a null pointer exception (am I correct?). Is there any direct way
to solve this without having to recreate the tree (i.e. putting the first
two lines inside the loop) on each iteraction?

Best regards,
Hugo.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090717/d665a634/attachment.html 

From benblo+ANTLR at gmail.com  Fri Jul 17 08:41:55 2009
From: benblo+ANTLR at gmail.com (Benoit Fouletier)
Date: Fri, 17 Jul 2009 17:41:55 +0200
Subject: [antlr-interest] parser cannot find symbol UP
Message-ID: <b02eee6b0907170841h2a175e27rf84003d8305ab069@mail.gmail.com>

I'm building an AST and introduced a ^() rule for the first time, got this
compile error:

*translatorParser.java:476: cannot find symbol
symbol  : variable UP
location: class translatorParser
                else if ( (LA5_1==UP) ) {
                                  ^
1 error*


Errr... whaaat? I thought UP and DOWN were builtin.I have
backtrack=true, dunno if that changes anything.

     Ben
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090717/6e6fc7a7/attachment.html 

From tnurkkala at cse.taylor.edu  Fri Jul 17 08:51:12 2009
From: tnurkkala at cse.taylor.edu (Tom Nurkkala)
Date: Fri, 17 Jul 2009 10:51:12 -0500
Subject: [antlr-interest] Tom,  a question
In-Reply-To: <026401ca06a5$54b6d840$fe2488c0$@com>
References: <026401ca06a5$54b6d840$fe2488c0$@com>
Message-ID: <74FE3A32-751D-424A-8288-3BB54816317A@cse.taylor.edu>


On Fri/17-Jul, at 1:10 AM, Bryan S Follins wrote:

> Tom,
>
> How can I add a rule to the code below which would allow me to enter  
> a number (like a zip code?)

To accept a simple string of numbers, you can do something equivalent  
to ID for alphabetic tokens:

ZIP	:	'0'..'9'+

Then you'd ned to add ZIP somewhere on the right-hand side of a rule.

tom.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090717/959e9a00/attachment.html 

From asalh at mindspring.com  Fri Jul 17 09:31:33 2009
From: asalh at mindspring.com (Bryan S Follins)
Date: Fri, 17 Jul 2009 09:31:33 -0700
Subject: [antlr-interest] Getting the hang of this
In-Reply-To: <E143D6C6AC2F4C93A2AD48514E22E11D@tridecap.com>
References: <b02eee6b0907160710r7eb83c7bn61fcfbcbf8897300@mail.gmail.com>	<4a5f8538.2a02be0a.26b4.2f6cSMTPIN_ADDED@mx.google.com>	<b02eee6b0907161330r32dd23eelf422720fe5b886ef@mail.gmail.com>	<20090716205849.0BE47341847E@www.antlr.org><023d01ca066c$42e5ee00$c8b1ca00$@com><025201ca0677$932c0150$b98403f0$@com>
	<026301ca069e$e2cf8250$a86e86f0$@com>
	<E143D6C6AC2F4C93A2AD48514E22E11D@tridecap.com>
Message-ID: <030b01ca06fc$0c38ba50$24aa2ef0$@com>

It sounds like you are wrong.  This is a practice grammar that was given to
us in a lecture. It was not for a grade. It was for practice. What I am
trying to do is expound on teaching myself the  grammar, or, in other words
teach myself. Look, as you may have already discovered, I am a beginner.  I
am not going to get on this site to ask someone to do my homework problems.
I am actually trying to learn something. I am sorry if I disturbed the
computer gods.

-----Original Message-----
From: Dave Dutcher [mailto:dave at tridecap.com] 
Sent: Friday, July 17, 2009 08:21
To: 'Bryan S Follins'; 'antlr-interest'
Subject: RE: [antlr-interest] Getting the hang of this


It sounds like you are trying to get somebody to answer your homework
questions for you.  Have you even tried going to www.antlr.org and reading
the tutorials and docs?


Dave
 

> -----Original Message-----
> From: antlr-interest-bounces at antlr.org 
> [mailto:antlr-interest-bounces at antlr.org] On Behalf Of Bryan S Follins
> Sent: Friday, July 17, 2009 12:25 AM
> To: 'antlr-interest'
> Subject: Re: [antlr-interest] Getting the hang of this
> 
> Is anyone out there?
> 
> -----Original Message-----
> From: Bryan S Follins [mailto:asalh at mindspring.com]
> Sent: Thursday, July 16, 2009 17:43
> To: 'Bryan S Follins'; 'antlr-interest'
> Subject: RE: [antlr-interest] Getting the hang of this
> 
> Or in other words, how can I add a rule to the code below 
> which would allow me to enter a number (like a zip code?)
> 
> -----Original Message-----
> From: antlr-interest-bounces at antlr.org
> [mailto:antlr-interest-bounces at antlr.org] On Behalf Of Bryan S Follins
> Sent: Thursday, July 16, 2009 16:22
> To: 'antlr-interest'
> Subject: [antlr-interest] Getting the hang of this
> 
> 
> OK...The following is ANTLR Code
> 
> grammar T;
> 
> r	:	'call' ID ';'	{System.out.println("invoke 
> "+$ID.text);};
> ID	:	'a'..'z'+;
> WS	:	(' ' | '\n' | '\r')+ {$channel=HIDDEN;};
> 
> 
> Lets say, in addition, I wanted to add some code that also 
> give me a numerical password, how would I do it?  In other 
> words, after entering text for a name to be compiled, what 
> code could I use to let me enter a number in ANTLRWorks?
> 
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
> 
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: 
> http://www.antlr.org/mailman/options/antlr-interest/your-email
> -address


From sokorac at gmail.com  Fri Jul 17 14:28:06 2009
From: sokorac at gmail.com (Stanislav Sokorac)
Date: Fri, 17 Jul 2009 17:28:06 -0400
Subject: [antlr-interest] Better recovery from a mismatched token desired
Message-ID: <f6be20450907171428g568e9e4bm8ee8bbc40a255952@mail.gmail.com>

I have a simple grammar (pasted below) for a language that allows two types
of statements: let or int, where int declares a variable, and let assigns to
it. A "program" is a collection of these statements wrapped in begin/end
tokens.

My problems is that when ANTLR encounters a token other than 'int' or 'let'
as the first word of the statement, it pops out of its statement loop and
reports a token mismatch -- "mismatch input 'something' expecting 'end'",
and then proceeds to consume all tokens until 'end'. All statements
subsequent to the mismatched one are not parsed, and I would like to have
the rest of the file analyzed.

It seems that even if I override the recovery method and consume up to a
semicolon, it'll try to match up the next token with 'end' and fail again,
as it's no longer even looking for statements. How do I keep the parser
inside the statement loop when it detects a mismatched token?

Here's my sample input:

begin
int a;
let a=3;
double c;
let c =4;
end

(I'd like to see let c=4; parsed, even though 'double c;' is an invalid
statement)

Here's my simple grammar:

grammar test;

program    :    'begin' statement* 'end' EOF;
statement    :    'let' ID '=' NUMBER ';' | 'int' ID ';';

NUMBER    :    ('0'..'9')+;
ID  :    ('a'..'z'|'A'..'Z'|'_') ('a'..'z'|'A'..'Z'|'0'..'9'|'_')*;
WS  :   ( ' ' | '\t' | '\r' | '\n') {$channel=HIDDEN;};
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090717/caad1e17/attachment.html 

From lgcraymer at yahoo.com  Fri Jul 17 18:07:46 2009
From: lgcraymer at yahoo.com (Loring Craymer)
Date: Fri, 17 Jul 2009 18:07:46 -0700 (PDT)
Subject: [antlr-interest] Getting the hang of this
In-Reply-To: <030b01ca06fc$0c38ba50$24aa2ef0$@com>
References: <b02eee6b0907160710r7eb83c7bn61fcfbcbf8897300@mail.gmail.com>
	<4a5f8538.2a02be0a.26b4.2f6cSMTPIN_ADDED@mx.google.com>
	<b02eee6b0907161330r32dd23eelf422720fe5b886ef@mail.gmail.com>
	<20090716205849.0BE47341847E@www.antlr.org><023d01ca066c$42e5ee00$c8b1ca00$@com><025201ca0677$932c0150$b98403f0$@com>
	<026301ca069e$e2cf8250$a86e86f0$@com>
	<E143D6C6AC2F4C93A2AD48514E22E11D@tridecap.com>
	<030b01ca06fc$0c38ba50$24aa2ef0$@com>
Message-ID: <360183.19001.qm@web55902.mail.re3.yahoo.com>


Bryan--

Relax.  People here are always willing to help, but intolerant of anyone who isn't interested in carrying their own weight.  Anyone asking about toy problems is assumed to be a student looking to bypass the learning process.  I suggest following Dave's advice on reading the tutorials, then asking again with a more challenging problem.  I think that you will find this a much more responsive group.

--Loring



----- Original Message ----
> From: Bryan S Follins <asalh at mindspring.com>
> To: Dave Dutcher <dave at tridecap.com>; antlr-interest <antlr-interest at antlr.org>
> Sent: Friday, July 17, 2009 9:31:33 AM
> Subject: Re: [antlr-interest] Getting the hang of this
> 
> It sounds like you are wrong.  This is a practice grammar that was given to
> us in a lecture. It was not for a grade. It was for practice. What I am
> trying to do is expound on teaching myself the  grammar, or, in other words
> teach myself. Look, as you may have already discovered, I am a beginner.  I
> am not going to get on this site to ask someone to do my homework problems.
> I am actually trying to learn something. I am sorry if I disturbed the
> computer gods.
> 
> -----Original Message-----
> From: Dave Dutcher [mailto:dave at tridecap.com] 
> Sent: Friday, July 17, 2009 08:21
> To: 'Bryan S Follins'; 'antlr-interest'
> Subject: RE: [antlr-interest] Getting the hang of this
> 
> 
> It sounds like you are trying to get somebody to answer your homework
> questions for you.  Have you even tried going to www.antlr.org and reading
> the tutorials and docs?
> 
> 
> Dave
> 
> 
> > -----Original Message-----
> > From: antlr-interest-bounces at antlr.org 
> > [mailto:antlr-interest-bounces at antlr.org] On Behalf Of Bryan S Follins
> > Sent: Friday, July 17, 2009 12:25 AM
> > To: 'antlr-interest'
> > Subject: Re: [antlr-interest] Getting the hang of this
> > 
> > Is anyone out there?
> > 
> > -----Original Message-----
> > From: Bryan S Follins [mailto:asalh at mindspring.com]
> > Sent: Thursday, July 16, 2009 17:43
> > To: 'Bryan S Follins'; 'antlr-interest'
> > Subject: RE: [antlr-interest] Getting the hang of this
> > 
> > Or in other words, how can I add a rule to the code below 
> > which would allow me to enter a number (like a zip code?)
> > 
> > -----Original Message-----
> > From: antlr-interest-bounces at antlr.org
> > [mailto:antlr-interest-bounces at antlr.org] On Behalf Of Bryan S Follins
> > Sent: Thursday, July 16, 2009 16:22
> > To: 'antlr-interest'
> > Subject: [antlr-interest] Getting the hang of this
> > 
> > 
> > OK...The following is ANTLR Code
> > 
> > grammar T;
> > 
> > r    :    'call' ID ';'    {System.out.println("invoke 
> > "+$ID.text);};
> > ID    :    'a'..'z'+;
> > WS    :    (' ' | '\n' | '\r')+ {$channel=HIDDEN;};
> > 
> > 
> > Lets say, in addition, I wanted to add some code that also 
> > give me a numerical password, how would I do it?  In other 
> > words, after entering text for a name to be compiled, what 
> > code could I use to let me enter a number in ANTLRWorks?
> > 
> > 
> > List: http://www.antlr.org/mailman/listinfo/antlr-interest
> > Unsubscribe:
> > http://www.antlr.org/mailman/options/antlr-interest/your-email-address
> > 
> > 
> > List: http://www.antlr.org/mailman/listinfo/antlr-interest
> > Unsubscribe: 
> > http://www.antlr.org/mailman/options/antlr-interest/your-email
> > -address
> 
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: 
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address



      

From michael.bedward at gmail.com  Fri Jul 17 18:12:11 2009
From: michael.bedward at gmail.com (Michael Bedward)
Date: Sat, 18 Jul 2009 11:12:11 +1000
Subject: [antlr-interest] Multiple evaluations of the same tree
In-Reply-To: <3c2632090907170834r1118ecc7h9c9d791fbb70d3e8@mail.gmail.com>
References: <3c2632090907170834r1118ecc7h9c9d791fbb70d3e8@mail.gmail.com>
Message-ID: <e24c4c270907171812u275a2ca0oc0a8f8f8568aaa06@mail.gmail.com>

Hello Hugo,

Try this:

BufferedTreeNodeStream nodes = new BufferedTreeNodeStream(myTree);
LangWalker evaluator = new LangWalker(nodes);
for(int i = 0; i < 10000; i++)
         evaluator.rule();
         evaluator.reset();
end

Hope this helps,

Michael

From asalh at mindspring.com  Fri Jul 17 18:39:55 2009
From: asalh at mindspring.com (Bryan S Follins)
Date: Fri, 17 Jul 2009 18:39:55 -0700
Subject: [antlr-interest] Getting the hang of this
In-Reply-To: <360183.19001.qm@web55902.mail.re3.yahoo.com>
References: <b02eee6b0907160710r7eb83c7bn61fcfbcbf8897300@mail.gmail.com>
	<4a5f8538.2a02be0a.26b4.2f6cSMTPIN_ADDED@mx.google.com>
	<b02eee6b0907161330r32dd23eelf422720fe5b886ef@mail.gmail.com>
	<20090716205849.0BE47341847E@www.antlr.org><023d01ca066c$42e5ee00$c8b1ca00$@com><025201ca0677$932c0150$b98403f0$@com>
	<026301ca069e$e2cf8250$a86e86f0$@com>
	<E143D6C6AC2F4C93A2AD48514E22E11D@tridecap.com>
	<030b01ca06fc$0c38ba50$24aa2ef0$@com>
	<360183.19001.qm@web55902.mail.re3.yahoo.com>
Message-ID: <002501ca0748$aa9c7320$ffd55960$@com>

Loring

Thanks for the advice.  But Tom helped. He taught instead of judged. Just
like people are intolerant about those who don't carry their own weight, I'm
intolerant about being judged all the time.  I'll say it again, I am
pursuing an MS in computer science. I'm trying to get my degree online,
which means distance learning. I also have a liberal arts background. So, I
see, and comprehend a little differently. I have to work, like I'm sure most
of you do.  Sometimes I might ask a question, and it make take 24 hours to
get an answer. I can understand that, but it doesn't help the learning
process. I'm sure you may have come upon a situation once upon a time where
some tutoring advice may work a little better than reading something. Let me
ask you a question. If you are really stomped on a problem, and you sit
there and try and try again for six, seven, or eight hours without a
solution, knowing your time is limited, what would be the proper course of
action? I mean, without cheating.  I would think it would be go to a talk
group like this where someone may be able to explain it to you. I go to
links all the time to find documentation, trust me.  It's just that
sometimes, I might need a little extra help.  This morning someone took
about 30 minutes to help, and in solving one problem, they helped me to
solve many others.

I know there are people around who just want people to do their work for
them.  I'm not one of those.  I'm also a teacher like some in this group, so
I also understand the importance of patience and not being quick to judge.

I figure if I learn something, I might be able to pass it on to someone in
my situation.  

Also, I have a question for you, what exactly are "toy" problems? It may be
that one man's meat is another man's problem. I'm sure that everybody had to
start learning somewhere, and somewhere along the line they had "toy"
problems.  I guess the ol' saying "there is no such thing as a stupid
question" does not work all the time after all.

And, what type of student wants to bypass the learning process??  I
understand there are some, but it's not me.

Bryan

-----Original Message-----
From: Loring Craymer [mailto:lgcraymer at yahoo.com] 
Sent: Friday, July 17, 2009 18:08
To: Bryan S Follins; Dave Dutcher; antlr-interest
Subject: Re: [antlr-interest] Getting the hang of this


Bryan--

Relax.  People here are always willing to help, but intolerant of anyone who
isn't interested in carrying their own weight.  Anyone asking about toy
problems is assumed to be a student looking to bypass the learning process.
I suggest following Dave's advice on reading the tutorials, then asking
again with a more challenging problem.  I think that you will find this a
much more responsive group.

--Loring



----- Original Message ----
> From: Bryan S Follins <asalh at mindspring.com>
> To: Dave Dutcher <dave at tridecap.com>; antlr-interest
<antlr-interest at antlr.org>
> Sent: Friday, July 17, 2009 9:31:33 AM
> Subject: Re: [antlr-interest] Getting the hang of this
> 
> It sounds like you are wrong.  This is a practice grammar that was given
to
> us in a lecture. It was not for a grade. It was for practice. What I am
> trying to do is expound on teaching myself the  grammar, or, in other
words
> teach myself. Look, as you may have already discovered, I am a beginner.
I
> am not going to get on this site to ask someone to do my homework
problems.
> I am actually trying to learn something. I am sorry if I disturbed the
> computer gods.
> 
> -----Original Message-----
> From: Dave Dutcher [mailto:dave at tridecap.com] 
> Sent: Friday, July 17, 2009 08:21
> To: 'Bryan S Follins'; 'antlr-interest'
> Subject: RE: [antlr-interest] Getting the hang of this
> 
> 
> It sounds like you are trying to get somebody to answer your homework
> questions for you.  Have you even tried going to www.antlr.org and reading
> the tutorials and docs?
> 
> 
> Dave
> 
> 
> > -----Original Message-----
> > From: antlr-interest-bounces at antlr.org 
> > [mailto:antlr-interest-bounces at antlr.org] On Behalf Of Bryan S Follins
> > Sent: Friday, July 17, 2009 12:25 AM
> > To: 'antlr-interest'
> > Subject: Re: [antlr-interest] Getting the hang of this
> > 
> > Is anyone out there?
> > 
> > -----Original Message-----
> > From: Bryan S Follins [mailto:asalh at mindspring.com]
> > Sent: Thursday, July 16, 2009 17:43
> > To: 'Bryan S Follins'; 'antlr-interest'
> > Subject: RE: [antlr-interest] Getting the hang of this
> > 
> > Or in other words, how can I add a rule to the code below 
> > which would allow me to enter a number (like a zip code?)
> > 
> > -----Original Message-----
> > From: antlr-interest-bounces at antlr.org
> > [mailto:antlr-interest-bounces at antlr.org] On Behalf Of Bryan S Follins
> > Sent: Thursday, July 16, 2009 16:22
> > To: 'antlr-interest'
> > Subject: [antlr-interest] Getting the hang of this
> > 
> > 
> > OK...The following is ANTLR Code
> > 
> > grammar T;
> > 
> > r    :    'call' ID ';'    {System.out.println("invoke 
> > "+$ID.text);};
> > ID    :    'a'..'z'+;
> > WS    :    (' ' | '\n' | '\r')+ {$channel=HIDDEN;};
> > 
> > 
> > Lets say, in addition, I wanted to add some code that also 
> > give me a numerical password, how would I do it?  In other 
> > words, after entering text for a name to be compiled, what 
> > code could I use to let me enter a number in ANTLRWorks?
> > 
> > 
> > List: http://www.antlr.org/mailman/listinfo/antlr-interest
> > Unsubscribe:
> > http://www.antlr.org/mailman/options/antlr-interest/your-email-address
> > 
> > 
> > List: http://www.antlr.org/mailman/listinfo/antlr-interest
> > Unsubscribe: 
> > http://www.antlr.org/mailman/options/antlr-interest/your-email
> > -address
> 
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: 
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address



      


From antlr at mirality.co.nz  Fri Jul 17 19:00:05 2009
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Sat, 18 Jul 2009 14:00:05 +1200
Subject: [antlr-interest] Getting the hang of this
In-Reply-To: <002501ca0748$aa9c7320$ffd55960$@com>
References: <b02eee6b0907160710r7eb83c7bn61fcfbcbf8897300@mail.gmail.com>
	<4a5f8538.2a02be0a.26b4.2f6cSMTPIN_ADDED@mx.google.com>
	<b02eee6b0907161330r32dd23eelf422720fe5b886ef@mail.gmail.com>
	<20090716205849.0BE47341847E@www.antlr.org>
	<023d01ca066c$42e5ee00$c8b1ca00$@com>
	<025201ca0677$932c0150$b98403f0$@com>
	<026301ca069e$e2cf8250$a86e86f0$@com>
	<E143D6C6AC2F4C93A2AD48514E22E11D@tridecap.com>
	<030b01ca06fc$0c38ba50$24aa2ef0$@com>
	<360183.19001.qm@web55902.mail.re3.yahoo.com>
	<002501ca0748$aa9c7320$ffd55960$@com>
Message-ID: <20090718020018.F16C53418484@www.antlr.org>

At 13:39 18/07/2009, Bryan S Follins wrote:
 >Sometimes I might ask a question, and it make take 24 hours to
 >get an answer. I can understand that, but it doesn't help the
 >learning process.

When you repost the same question four times within six hours, it 
tends to annoy people.  When that question is one that can be 
trivially answered through experimentation, reading the wiki, or 
reading the book, it tends to annoy them more.  When you don't 
show any evidence of having tried any of those things, it annoys 
them a lot.  That's just the way these sorts of group collectives 
work.

http://catb.org/esr/faqs/smart-questions.html

(Don't just dismiss this, read that page through.  In particular 
it tells you how to frame your questions in ways that tend to make 
people more helpful in response.)


From jimi at temporal-wave.com  Fri Jul 17 20:36:44 2009
From: jimi at temporal-wave.com (Jim Idle)
Date: Fri, 17 Jul 2009 17:36:44 -1000
Subject: [antlr-interest] Better recovery from a mismatched token desired
In-Reply-To: <f6be20450907171428g568e9e4bm8ee8bbc40a255952@mail.gmail.com>
References: <f6be20450907171428g568e9e4bm8ee8bbc40a255952@mail.gmail.com>
Message-ID: <97AAFA73-5487-40C0-AB5C-93476F3F2A41@temporal-wave.com>

You need to either:

A) carefully rejiggering your grammar so that the follow set does not  
end up being END

B) create an empty rule with an @init that consumes to the followset  
and so resyncs tobwhat you want because the followset of the empty  
rulemis the first set of your loop element. Look at the JavaFX  
compiler for an example that is easy enough to follow.

Jim

On Jul 17, 2009, at 11:28 AM, Stanislav Sokorac <sokorac at gmail.com>  
wrote:

> I have a simple grammar (pasted below) for a language that allows  
> two types of statements: let or int, where int declares a variable,  
> and let assigns to it. A "program" is a collection of these  
> statements wrapped in begin/end tokens.
>
> My problems is that when ANTLR encounters a token other than 'int'  
> or 'let' as the first word of the statement, it pops out of its  
> statement loop and reports a token mismatch -- "mismatch input  
> 'something' expecting 'end'", and then proceeds to consume all  
> tokens until 'end'. All statements subsequent to the mismatched one  
> are not parsed, and I would like to have the rest of the file  
> analyzed.
>
> It seems that even if I override the recovery method and consume up  
> to a semicolon, it'll try to match up the next token with 'end' and  
> fail again, as it's no longer even looking for statements. How do I  
> keep the parser inside the statement loop when it detects a  
> mismatched token?
>
> Here's my sample input:
>
> begin
> int a;
> let a=3;
> double c;
> let c =4;
> end
>
> (I'd like to see let c=4; parsed, even though 'double c;' is an  
> invalid statement)
>
> Here's my simple grammar:
>
> grammar test;
>
> program    :    'begin' statement* 'end' EOF;
> statement    :    'let' ID '=' NUMBER ';' | 'int' ID ';';
>
> NUMBER    :    ('0'..'9')+;
> ID  :    ('a'..'z'|'A'..'Z'|'_') ('a'..'z'|'A'..'Z'|'0'..'9'|'_')*;
> WS  :   ( ' ' | '\t' | '\r' | '\n') {$channel=HIDDEN;};
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address

From tnurkkala at cse.taylor.edu  Fri Jul 17 22:15:03 2009
From: tnurkkala at cse.taylor.edu (Tom Nurkkala)
Date: Sat, 18 Jul 2009 00:15:03 -0500
Subject: [antlr-interest] Getting the hang of this
In-Reply-To: <002501ca0748$aa9c7320$ffd55960$@com>
References: <b02eee6b0907160710r7eb83c7bn61fcfbcbf8897300@mail.gmail.com>
	<4a5f8538.2a02be0a.26b4.2f6cSMTPIN_ADDED@mx.google.com>
	<b02eee6b0907161330r32dd23eelf422720fe5b886ef@mail.gmail.com>
	<20090716205849.0BE47341847E@www.antlr.org><023d01ca066c$42e5ee00$c8b1ca00$@com><025201ca0677$932c0150$b98403f0$@com>
	<026301ca069e$e2cf8250$a86e86f0$@com>
	<E143D6C6AC2F4C93A2AD48514E22E11D@tridecap.com>
	<030b01ca06fc$0c38ba50$24aa2ef0$@com>
	<360183.19001.qm@web55902.mail.re3.yahoo.com>
	<002501ca0748$aa9c7320$ffd55960$@com>
Message-ID: <C2A94940-F29B-4D58-B582-8F4B56FE3136@cse.taylor.edu>


On Fri/17-Jul, at 8:39 PM, Bryan S Follins wrote:

> Also, I have a question for you, what exactly are "toy" problems?

Don't take the phrase "toy problem" as necessarily pejorative.  It's a  
common phrase that simply refers to a small instance of a problem that  
can be used to debug one's thinking or coding.  Not only do we all use  
small problems when we're learning, but also much further down the  
road to explore a new feature or configuration or algorithm or  
language or whatever.  Just the other day, I created an ANTLR grammar  
called DebugThinking.g, which contained a toy problem that helped me  
get a handle on a much more complex problem I was trying to address.   
Toys can be good!

tom.


From luiscubal at gmail.com  Sat Jul 18 12:51:27 2009
From: luiscubal at gmail.com (=?UTF-8?Q?Lu=C3=ADs_Reis?=)
Date: Sat, 18 Jul 2009 20:51:27 +0100
Subject: [antlr-interest] Problem coding Antlr grammar for strings
Message-ID: <c121c9b90907181251w33145f18x83ca9aa564419f99@mail.gmail.com>

I am coding an Antlr grammar which matches strings.
My first attempt was:

doc    :    STRINGCONST;

STRINGCONST
    :    ('@"' ( options {greedy=false;} : . )* '"') //Accepts lots of
stuff, including newlines
    |    ('"' (
            (
                '\\' ('\\' | '"' | 'n' | 't' | OCTALCHAR)
            ) | (
                ~('"'|'\\'|LINEBREAK)
            )
        )* '"')
    ;

Which matches correctly "", "\\" and "\na" but fails for "abc"(with
MismatchedTokenException).
However, I can not understand *why* it fails for "abc"!
It gets even weirder since

STRINGCONST
    :    ('@"' ( options {greedy=false;} : . )* '"') //Accepts lots of
stuff, including newlines
    |    ('"' (
            (
                '\\' ('\\' | '"' | 'n' | 't' | OCTALCHAR)
            ) | (
                ~('"'|'\\'|LINEBREAK)
            )
        )+ '"')
    ;

works perfectly. What's happening here? What am I missing?
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090718/413478cc/attachment.html 

From antlr at mirality.co.nz  Sat Jul 18 16:04:02 2009
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Sun, 19 Jul 2009 11:04:02 +1200
Subject: [antlr-interest] Problem coding Antlr grammar for strings
In-Reply-To: <c121c9b90907181251w33145f18x83ca9aa564419f99@mail.gmail.co
 m>
References: <c121c9b90907181251w33145f18x83ca9aa564419f99@mail.gmail.com>
Message-ID: <20090718230416.5F49B3418151@www.antlr.org>

At 07:51 19/07/2009, Lu??s Reis wrote:
>STRINGCONST
>   : ('@"' ( options {greedy=false;} : . )* '"') 
> //Accepts lots of stuff, including newlines
>   | ('"' (
>     (
>       '\\' ('\\' | '"' | 'n' | 't' | OCTALCHAR)
>     ) | (
>       ~('"'|'\\'|LINEBREAK)
>     )
>   )* '"')
>   ;
>
>Which matches correctly "", "\\" and "\na" but 
>fails for "abc"(with MismatchedTokenException).
>However, I can not understand *why* it fails for "abc"!

Best guess: it's LINEBREAK's fault.  Within a ~ 
block you can only use sets (alternatives of 
single characters).  Most likely, you've defined 
LINEBREAK as a sequence (can match two 
characters, if it sees '\r\n'; possibly even more 
if you've used a * or +).  This subtly breaks the 
~ operation in strange ways.

Try replacing LINEBREAK above with '\r'|'\n' and 
see if that helps.

(Another possibility you should consider is to 
actually accept linebreaks in the non-@ strings 
at lexing time, but then raise an error at 
parse/tree-parse time that it's not valid to have 
a line-break in there.)

Also: if you're trying to match C#-like strings 
then you'll need to modify the first alt a bit to 
support escaped quotes. 


From parrt at cs.usfca.edu  Sat Jul 18 16:53:56 2009
From: parrt at cs.usfca.edu (Terence Parr)
Date: Sat, 18 Jul 2009 16:53:56 -0700
Subject: [antlr-interest] parser cannot find symbol UP
In-Reply-To: <b02eee6b0907170841h2a175e27rf84003d8305ab069@mail.gmail.com>
References: <b02eee6b0907170841h2a175e27rf84003d8305ab069@mail.gmail.com>
Message-ID: <23B1A692-0C27-47B9-B31D-8E412EF9D002@cs.usfca.edu>

tree grammar?
T
On Jul 17, 2009, at 8:41 AM, Benoit Fouletier wrote:

> I'm building an AST and introduced a ^() rule for the first time,  
> got this compile error:
>
> translatorParser.java:476: cannot find symbol
> symbol  : variable UP
> location: class translatorParser
>                 else if ( (LA5_1==UP) ) {
>                                   ^
> 1 error
>
> Errr... whaaat? I thought UP and DOWN were builtin.
> I have backtrack=true, dunno if that changes anything.
>
>      Ben
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address


From jsrs701 at yahoo.com  Sat Jul 18 17:06:30 2009
From: jsrs701 at yahoo.com (J. Stephen Riley Silber)
Date: Sat, 18 Jul 2009 17:06:30 -0700 (PDT)
Subject: [antlr-interest] Filtering peer nodes in a tree
Message-ID: <790374.7440.qm@web33305.mail.mud.yahoo.com>

Hi gang,

I'm having a bit of trouble with a tree filter.? I'm trying to take ASSIGN trees like this:

^( ASSIGN ID expr )

and merge them together whenever they are adjacent to each other in a tree under a BLOCK node.? So, bigger example:

^( BLOCK
??? ^( foo ... )
??? ^( ASSIGN ID expr )
??? ^( ASSIGN ID expr )
??? ^( bar ... )
?)

would become

^( BLOCK
??? ^( foo ... )
??? ^( ASSIGN ID expr ID expr )
??? ^( bar ... )
?)

I tried using a rule like ^( BLOCK .* ASSIGN ASSIGN .* ), but that didn't seem to work.

Any suggestions?

--S
??? 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090718/520f4663/attachment.html 

From parrt at cs.usfca.edu  Sat Jul 18 17:08:23 2009
From: parrt at cs.usfca.edu (Terence Parr)
Date: Sat, 18 Jul 2009 17:08:23 -0700
Subject: [antlr-interest] Filtering peer nodes in a tree
In-Reply-To: <790374.7440.qm@web33305.mail.mud.yahoo.com>
References: <790374.7440.qm@web33305.mail.mud.yahoo.com>
Message-ID: <F0A2DD62-E619-4F85-B098-E764EAA9144E@cs.usfca.edu>


On Jul 18, 2009, at 5:06 PM, J. Stephen Riley Silber wrote:

> Hi gang,
>
> I'm having a bit of trouble with a tree filter.  I'm trying to take  
> ASSIGN trees like this:
>
> ^( ASSIGN ID expr )
>
> and merge them together whenever they are adjacent to each other in  
> a tree under a BLOCK node.  So, bigger example:
>
> ^( BLOCK
>     ^( foo ... )
>     ^( ASSIGN ID expr )
>     ^( ASSIGN ID expr )
>     ^( bar ... )
>  )
>
> would become
>
> ^( BLOCK
>     ^( foo ... )
>     ^( ASSIGN ID expr ID expr )
>     ^( bar ... )
>  )
>
> I tried using a rule like ^( BLOCK .* ASSIGN ASSIGN .* ), but that  
> didn't seem to work.

I've recently discovered that .* on the end doesn't seem to work too  
well. I think I tried .+ or was it .* followed by UP...no, i think it  
was ~UP*. I need to fix this.
Ter

From jsrs701 at yahoo.com  Sun Jul 19 01:41:23 2009
From: jsrs701 at yahoo.com (J. Stephen Riley Silber)
Date: Sun, 19 Jul 2009 01:41:23 -0700 (PDT)
Subject: [antlr-interest] Filtering peer nodes in a tree
In-Reply-To: <F0A2DD62-E619-4F85-B098-E764EAA9144E@cs.usfca.edu>
Message-ID: <353811.64464.qm@web33301.mail.mud.yahoo.com>

?
> I tried using a rule like ^( BLOCK .* ASSIGN ASSIGN .* ), but that didn't seem to work.

I've recently discovered that .* on the end doesn't seem to work too well. I think I tried .+ or was it .* followed by UP...no, i think it was ~UP*. I need to fix this.
Ter
I just tried all of those, to no avail.? Is this a legit bug?? Am I on the right track for trying to detect similar siblings?

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090719/d059f3ca/attachment.html 

From luiscubal at gmail.com  Sun Jul 19 03:39:44 2009
From: luiscubal at gmail.com (=?UTF-8?Q?Lu=C3=ADs_Reis?=)
Date: Sun, 19 Jul 2009 11:39:44 +0100
Subject: [antlr-interest] Problem coding Antlr grammar for strings
In-Reply-To: <4a6254ee.1002be0a.40a7.2189SMTPIN_ADDED@mx.google.com>
References: <c121c9b90907181251w33145f18x83ca9aa564419f99@mail.gmail.com> 
	<4a6254ee.1002be0a.40a7.2189SMTPIN_ADDED@mx.google.com>
Message-ID: <c121c9b90907190339l67e22e7em5acd71075be4f689@mail.gmail.com>

2009/7/19 Gavin Lambert <antlr at mirality.co.nz>

> At 07:51 19/07/2009, Lu??s Reis wrote:
>
>> STRINGCONST
>>  : ('@"' ( options {greedy=false;} : . )* '"') //Accepts lots of stuff,
>> including newlines
>>  | ('"' (
>>    (
>>      '\\' ('\\' | '"' | 'n' | 't' | OCTALCHAR)
>>    ) | (
>>      ~('"'|'\\'|LINEBREAK)
>>    )
>>  )* '"')
>>  ;
>>
>> Which matches correctly "", "\\" and "\na" but fails for "abc"(with
>> MismatchedTokenException).
>> However, I can not understand *why* it fails for "abc"!
>>
>
> Best guess: it's LINEBREAK's fault.  Within a ~ block you can only use sets
> (alternatives of single characters).  Most likely, you've defined LINEBREAK
> as a sequence (can match two characters, if it sees '\r\n'; possibly even
> more if you've used a * or +).  This subtly breaks the ~ operation in
> strange ways.
>
> Try replacing LINEBREAK above with '\r'|'\n' and see if that helps.
>
> (Another possibility you should consider is to actually accept linebreaks
> in the non-@ strings at lexing time, but then raise an error at
> parse/tree-parse time that it's not valid to have a line-break in there.)
>
> Also: if you're trying to match C#-like strings then you'll need to modify
> the first alt a bit to support escaped quotes.
>

I am using

fragment LINEBREAK
    :    '\u000D'
    |    '\n'
        ;

and that problem still persists... The diagram on the right of ANTLRWorks'
interpreter shows
MismatchedTokenException(-1!=11)
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090719/956971be/attachment.html 

From antlr at mirality.co.nz  Sun Jul 19 03:55:50 2009
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Sun, 19 Jul 2009 22:55:50 +1200
Subject: [antlr-interest] Problem coding Antlr grammar for strings
In-Reply-To: <c121c9b90907190339l67e22e7em5acd71075be4f689@mail.gmail.co
 m>
References: <c121c9b90907181251w33145f18x83ca9aa564419f99@mail.gmail.com>
	<4a6254ee.1002be0a.40a7.2189SMTPIN_ADDED@mx.google.com>
	<c121c9b90907190339l67e22e7em5acd71075be4f689@mail.gmail.com>
Message-ID: <20090719105604.DD93D3418484@www.antlr.org>

At 22:39 19/07/2009, Lu??s Reis wrote:
>and that problem still persists... The diagram 
>on the right of ANTLRWorks' interpreter shows 
>MismatchedTokenException(-1!=11)

-1 means EOF, which means that something is 
consuming to the end of the file.

What happens when you run it through the 
debugger, or via real code?  The interpreter 
often can't be trusted.


From luiscubal at gmail.com  Sun Jul 19 04:31:50 2009
From: luiscubal at gmail.com (=?UTF-8?Q?Lu=C3=ADs_Reis?=)
Date: Sun, 19 Jul 2009 12:31:50 +0100
Subject: [antlr-interest] Problem coding Antlr grammar for strings
In-Reply-To: <4a62fbc4.0102be0a.2a1d.ffffa79bSMTPIN_ADDED@mx.google.com>
References: <c121c9b90907181251w33145f18x83ca9aa564419f99@mail.gmail.com> 
	<4a6254ee.1002be0a.40a7.2189SMTPIN_ADDED@mx.google.com>
	<c121c9b90907190339l67e22e7em5acd71075be4f689@mail.gmail.com> 
	<4a62fbc4.0102be0a.2a1d.ffffa79bSMTPIN_ADDED@mx.google.com>
Message-ID: <c121c9b90907190431q21b77f45n97f7d10f4b59e25@mail.gmail.com>

2009/7/19 Gavin Lambert <antlr at mirality.co.nz>

> At 22:39 19/07/2009, Lu??s Reis wrote:
>
>> and that problem still persists... The diagram on the right of ANTLRWorks'
>> interpreter shows MismatchedTokenException(-1!=11)
>>
>
> -1 means EOF, which means that something is consuming to the end of the
> file.
>
> What happens when you run it through the debugger, or via real code?  The
> interpreter often can't be trusted.
>
>
When I run it via real code, it works. Is this an interpreter bug?
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090719/079efd20/attachment.html 

From parrt at cs.usfca.edu  Sun Jul 19 09:40:30 2009
From: parrt at cs.usfca.edu (Terence Parr)
Date: Sun, 19 Jul 2009 09:40:30 -0700
Subject: [antlr-interest] Filtering peer nodes in a tree
In-Reply-To: <353811.64464.qm@web33301.mail.mud.yahoo.com>
References: <353811.64464.qm@web33301.mail.mud.yahoo.com>
Message-ID: <B84ED349-3691-48D0-8D75-AC4B522C3D0F@cs.usfca.edu>

that is meant to work...i have some debugging to do it looks like in  
the patternmatching with .* :(
T
On Jul 19, 2009, at 1:41 AM, J. Stephen Riley Silber wrote:

>
> > I tried using a rule like ^( BLOCK .* ASSIGN ASSIGN .* ), but that  
> didn't seem to work.
>
> I've recently discovered that .* on the end doesn't seem to work too  
> well. I think I tried .+ or was it .* followed by UP...no, i think  
> it was ~UP*. I need to fix this.
> Ter
> I just tried all of those, to no avail.  Is this a legit bug?  Am I  
> on the right track for trying to detect similar siblings?
>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090719/4887f160/attachment.html 

From hakan.eryargi at gmail.com  Sun Jul 19 10:04:20 2009
From: hakan.eryargi at gmail.com (hakan eryargi)
Date: Sun, 19 Jul 2009 20:04:20 +0300
Subject: [antlr-interest] rewriting tree such that children are at same level
Message-ID: <440de1810907191004j3f9669d1jb81955dae82fe568@mail.gmail.com>

hello,

below is the main part of my grammar. it's ok but it creates an AST
from expression

a & b & c  -> (& (& a b) c) : an AND node with children c and another
AND node with children a and b

but i want: (& a b c) : an AND node with tree children

how can i make that with a rewrite rule ?

i've found following post in mail list but didnt helped me much :/
http://markmail.org/message/ed3ncmfimu3xnczt

program :
	expression EOF!
	;

expression
	: primary ((AND^ primary)+ | (OR^ primary)+)?
	;

primary	:	
	VARIABLE
	| LPAREN! expression RPAREN!
	;

thanks,
hakan

From jimi at temporal-wave.com  Sun Jul 19 10:47:51 2009
From: jimi at temporal-wave.com (Jim Idle)
Date: Sun, 19 Jul 2009 07:47:51 -1000
Subject: [antlr-interest] rewriting tree such that children are at same
	level
In-Reply-To: <440de1810907191004j3f9669d1jb81955dae82fe568@mail.gmail.com>
References: <440de1810907191004j3f9669d1jb81955dae82fe568@mail.gmail.com>
Message-ID: <18BE06D6-005F-40D0-A0FF-BA3A4729443F@temporal-wave.com>

Not sure WHY you would want that buy it is just:

p+=primary (AND p+=primary)* -> ^(AND $p+)

Jim

On Jul 19, 2009, at 7:04 AM, hakan eryargi <hakan.eryargi at gmail.com>  
wrote:

> hello,
>
> below is the main part of my grammar. it's ok but it creates an AST
> from expression
>
> a & b & c  -> (& (& a b) c) : an AND node with children c and another
> AND node with children a and b
>
> but i want: (& a b c) : an AND node with tree children
>
> how can i make that with a rewrite rule ?
>
> i've found following post in mail list but didnt helped me much :/
> http://markmail.org/message/ed3ncmfimu3xnczt
>
> program :
>    expression EOF!
>    ;
>
> expression
>    : primary ((AND^ primary)+ | (OR^ primary)+)?
>    ;
>
> primary    :
>    VARIABLE
>    | LPAREN! expression RPAREN!
>    ;
>
> thanks,
> hakan
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address

From hakan.eryargi at gmail.com  Sun Jul 19 11:02:51 2009
From: hakan.eryargi at gmail.com (hakan eryargi)
Date: Sun, 19 Jul 2009 21:02:51 +0300
Subject: [antlr-interest] rewriting tree such that children are at same
	level
In-Reply-To: <18BE06D6-005F-40D0-A0FF-BA3A4729443F@temporal-wave.com>
References: <440de1810907191004j3f9669d1jb81955dae82fe568@mail.gmail.com>
	<18BE06D6-005F-40D0-A0FF-BA3A4729443F@temporal-wave.com>
Message-ID: <440de1810907191102m379d85ecvebbf43b809f632b5@mail.gmail.com>

well, i know both trees evaluate to same result, but i want it this
way for human readability.  this will be used for defining requirments
and later will be presented in a gui. and i guess it's easier to debug
this way..

so you mean writing experssion as: (just postponing OR for now)

expression
       p+=primary (AND p+=primary)* -> ^(AND $p+)
       ;

i get an RewriteEmptyStreamException
Exception in thread "main"
org.antlr.runtime.tree.RewriteEmptyStreamException: token AND
       at org.antlr.runtime.tree.RewriteRuleElementStream._next(RewriteRuleElementStream.java:158)
       at org.antlr.runtime.tree.RewriteRuleTokenStream.nextNode(RewriteRuleTokenStream.java:58)
       at tmp.parser.testParser.expression(testParser.java:232)
       at tmp.parser.testParser.program(testParser.java:104)
       at tmp.parser.TestParser.main(TestParser.java:24)

On Sun, Jul 19, 2009 at 8:47 PM, Jim Idle<jimi at temporal-wave.com> wrote:
> Not sure WHY you would want that buy it is just:
>
> p+=primary (AND p+=primary)* -> ^(AND $p+)
>
> Jim
>
> On Jul 19, 2009, at 7:04 AM, hakan eryargi <hakan.eryargi at gmail.com> wrote:
>
>> hello,
>>
>> below is the main part of my grammar. it's ok but it creates an AST
>> from expression
>>
>> a & b & c ?-> (& (& a b) c) : an AND node with children c and another
>> AND node with children a and b
>>
>> but i want: (& a b c) : an AND node with tree children
>>
>> how can i make that with a rewrite rule ?
>>
>> i've found following post in mail list but didnt helped me much :/
>> http://markmail.org/message/ed3ncmfimu3xnczt
>>
>> program :
>> ? expression EOF!
>> ? ;
>>
>> expression
>> ? : primary ((AND^ primary)+ | (OR^ primary)+)?
>> ? ;
>>
>> primary ? ?:
>> ? VARIABLE
>> ? | LPAREN! expression RPAREN!
>> ? ;
>>
>> thanks,
>> hakan
>>
>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>> Unsubscribe:
>> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>

From hugo.pcd at gmail.com  Sun Jul 19 11:10:48 2009
From: hugo.pcd at gmail.com (Hugo Picado)
Date: Sun, 19 Jul 2009 19:10:48 +0100
Subject: [antlr-interest] Multiple evaluations of the same tree
In-Reply-To: <e24c4c270907171812u275a2ca0oc0a8f8f8568aaa06@mail.gmail.com>
References: <3c2632090907170834r1118ecc7h9c9d791fbb70d3e8@mail.gmail.com>
	<e24c4c270907171812u275a2ca0oc0a8f8f8568aaa06@mail.gmail.com>
Message-ID: <3c2632090907191110i7d1ed69aoe16ac22b151674ba@mail.gmail.com>

Hi Michael,

It worked great, thanks for the answer.

Regards,
Hugo.

On Sat, Jul 18, 2009 at 2:12 AM, Michael Bedward
<michael.bedward at gmail.com>wrote:

> Hello Hugo,
>
> Try this:
>
> BufferedTreeNodeStream nodes = new BufferedTreeNodeStream(myTree);
> LangWalker evaluator = new LangWalker(nodes);
> for(int i = 0; i < 10000; i++)
>         evaluator.rule();
>          evaluator.reset();
> end
>
> Hope this helps,
>
> Michael
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090719/68a21937/attachment.html 

From jbb at acm.org  Sun Jul 19 11:22:01 2009
From: jbb at acm.org (John B. Brodie)
Date: Sun, 19 Jul 2009 14:22:01 -0400
Subject: [antlr-interest] rewriting tree such that children are at same
 level
In-Reply-To: <440de1810907191102m379d85ecvebbf43b809f632b5@mail.gmail.com>
References: <440de1810907191004j3f9669d1jb81955dae82fe568@mail.gmail.com>
	<18BE06D6-005F-40D0-A0FF-BA3A4729443F@temporal-wave.com>
	<440de1810907191102m379d85ecvebbf43b809f632b5@mail.gmail.com>
Message-ID: <1248027721.17182.9.camel@gecko.home.org>

Greetings!

On Sun, 2009-07-19 at 21:02 +0300, hakan eryargi wrote:
> well, i know both trees evaluate to same result, but i want it this
> way for human readability.  this will be used for defining requirments
> and later will be presented in a gui. and i guess it's easier to debug
> this way..
> 
> so you mean writing experssion as: (just postponing OR for now)
> 
> expression
>        p+=primary (AND p+=primary)* -> ^(AND $p+)
>        ;
> 

Jim forgot to take into account that the AND phrases may be missing,
which is why you get the empty exception when no AND is in the input
stream.

So I think your original rule of:

expression : primary ( (AND^ primary)+ | (OR^ primary)+ )? ;

should be something like this (untested):

expression : 
   p+=primary ( ( /*empty*/ -> primary /* or maybe $p or $p+ */ )
              | ( (AND p+=primary)+ -> ^(AND $p+) )
              | ( (OR p+=primary)+ -> ^(OR $p+) )
              ) ;

> i get an RewriteEmptyStreamException
> Exception in thread "main"
> org.antlr.runtime.tree.RewriteEmptyStreamException: token AND
>        at org.antlr.runtime.tree.RewriteRuleElementStream._next(RewriteRuleElementStream.java:158)
>        at org.antlr.runtime.tree.RewriteRuleTokenStream.nextNode(RewriteRuleTokenStream.java:58)
>        at tmp.parser.testParser.expression(testParser.java:232)
>        at tmp.parser.testParser.program(testParser.java:104)
>        at tmp.parser.TestParser.main(TestParser.java:24)
> 
> On Sun, Jul 19, 2009 at 8:47 PM, Jim Idle<jimi at temporal-wave.com> wrote:
> > Not sure WHY you would want that buy it is just:
> >
> > p+=primary (AND p+=primary)* -> ^(AND $p+)
> >
> > Jim
> >
> > On Jul 19, 2009, at 7:04 AM, hakan eryargi <hakan.eryargi at gmail.com> wrote:
> >
> >> hello,
> >>
> >> below is the main part of my grammar. it's ok but it creates an AST
> >> from expression
> >>
> >> a & b & c  -> (& (& a b) c) : an AND node with children c and another
> >> AND node with children a and b
> >>
> >> but i want: (& a b c) : an AND node with tree children
> >>
> >> how can i make that with a rewrite rule ?
> >>
> >> i've found following post in mail list but didnt helped me much :/
> >> http://markmail.org/message/ed3ncmfimu3xnczt
> >>
> >> program :
> >>   expression EOF!
> >>   ;
> >>
> >> expression
> >>   : primary ((AND^ primary)+ | (OR^ primary)+)?
> >>   ;
> >>
> >> primary    :
> >>   VARIABLE
> >>   | LPAREN! expression RPAREN!
> >>   ;
> >>
> >> thanks,
> >> hakan
> >>
> >> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> >> Unsubscribe:
> >> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
> >
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address



From hakan.eryargi at gmail.com  Sun Jul 19 11:43:10 2009
From: hakan.eryargi at gmail.com (hakan eryargi)
Date: Sun, 19 Jul 2009 21:43:10 +0300
Subject: [antlr-interest] rewriting tree such that children are at same
	level
In-Reply-To: <1248027721.17182.9.camel@gecko.home.org>
References: <440de1810907191004j3f9669d1jb81955dae82fe568@mail.gmail.com>
	<18BE06D6-005F-40D0-A0FF-BA3A4729443F@temporal-wave.com>
	<440de1810907191102m379d85ecvebbf43b809f632b5@mail.gmail.com>
	<1248027721.17182.9.camel@gecko.home.org>
Message-ID: <440de1810907191143g4d7ff79drb3fc6127fc3e9fbe@mail.gmail.com>

thank you both. it seems ok now :)

so that p+ means keep a list of primary (or whatever) and add primary
to that list at '= primary' points

On Sun, Jul 19, 2009 at 9:22 PM, John B. Brodie<jbb at acm.org> wrote:
> Greetings!
>
> On Sun, 2009-07-19 at 21:02 +0300, hakan eryargi wrote:
>> well, i know both trees evaluate to same result, but i want it this
>> way for human readability. ?this will be used for defining requirments
>> and later will be presented in a gui. and i guess it's easier to debug
>> this way..
>>
>> so you mean writing experssion as: (just postponing OR for now)
>>
>> expression
>> ? ? ? ?p+=primary (AND p+=primary)* -> ^(AND $p+)
>> ? ? ? ?;
>>
>
> Jim forgot to take into account that the AND phrases may be missing,
> which is why you get the empty exception when no AND is in the input
> stream.
>
> So I think your original rule of:
>
> expression : primary ( (AND^ primary)+ | (OR^ primary)+ )? ;
>
> should be something like this (untested):
>
> expression :
> ? p+=primary ( ( /*empty*/ -> primary /* or maybe $p or $p+ */ )
> ? ? ? ? ? ? ?| ( (AND p+=primary)+ -> ^(AND $p+) )
> ? ? ? ? ? ? ?| ( (OR p+=primary)+ -> ^(OR $p+) )
> ? ? ? ? ? ? ?) ;
>
>> i get an RewriteEmptyStreamException
>> Exception in thread "main"
>> org.antlr.runtime.tree.RewriteEmptyStreamException: token AND
>> ? ? ? ?at org.antlr.runtime.tree.RewriteRuleElementStream._next(RewriteRuleElementStream.java:158)
>> ? ? ? ?at org.antlr.runtime.tree.RewriteRuleTokenStream.nextNode(RewriteRuleTokenStream.java:58)
>> ? ? ? ?at tmp.parser.testParser.expression(testParser.java:232)
>> ? ? ? ?at tmp.parser.testParser.program(testParser.java:104)
>> ? ? ? ?at tmp.parser.TestParser.main(TestParser.java:24)
>>
>> On Sun, Jul 19, 2009 at 8:47 PM, Jim Idle<jimi at temporal-wave.com> wrote:
>> > Not sure WHY you would want that buy it is just:
>> >
>> > p+=primary (AND p+=primary)* -> ^(AND $p+)
>> >
>> > Jim
>> >
>> > On Jul 19, 2009, at 7:04 AM, hakan eryargi <hakan.eryargi at gmail.com> wrote:
>> >
>> >> hello,
>> >>
>> >> below is the main part of my grammar. it's ok but it creates an AST
>> >> from expression
>> >>
>> >> a & b & c ?-> (& (& a b) c) : an AND node with children c and another
>> >> AND node with children a and b
>> >>
>> >> but i want: (& a b c) : an AND node with tree children
>> >>
>> >> how can i make that with a rewrite rule ?
>> >>
>> >> i've found following post in mail list but didnt helped me much :/
>> >> http://markmail.org/message/ed3ncmfimu3xnczt
>> >>
>> >> program :
>> >> ? expression EOF!
>> >> ? ;
>> >>
>> >> expression
>> >> ? : primary ((AND^ primary)+ | (OR^ primary)+)?
>> >> ? ;
>> >>
>> >> primary ? ?:
>> >> ? VARIABLE
>> >> ? | LPAREN! expression RPAREN!
>> >> ? ;
>> >>
>> >> thanks,
>> >> hakan
>> >>
>> >> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>> >> Unsubscribe:
>> >> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>> >
>>
>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>
>
>

From asalh at mindspring.com  Sun Jul 19 12:10:11 2009
From: asalh at mindspring.com (Bryan S Follins)
Date: Sun, 19 Jul 2009 12:10:11 -0700
Subject: [antlr-interest] Can never be matched
In-Reply-To: <440de1810907191143g4d7ff79drb3fc6127fc3e9fbe@mail.gmail.com>
References: <440de1810907191004j3f9669d1jb81955dae82fe568@mail.gmail.com>	<18BE06D6-005F-40D0-A0FF-BA3A4729443F@temporal-wave.com>	<440de1810907191102m379d85ecvebbf43b809f632b5@mail.gmail.com>	<1248027721.17182.9.camel@gecko.home.org>
	<440de1810907191143g4d7ff79drb3fc6127fc3e9fbe@mail.gmail.com>
Message-ID: <000901ca08a4$8a073f70$9e15be50$@com>

I'm almost done with a lesson grammar but I ran into a problem   I get an
error referencing the TOKEN RULE,  which is on Line 17 (TOKEN : ID)  It also
references Line 20, where there is a blank before SEPERATOR.  

The error reads: error (line)20.1: groupassign.g(file name) (line)17:8:  The
following alternatives can never be matched: 2,3

Does anyone know what that error code means?

Code is below:

grammar groupassign;
@header{
import java.util.HashMap;
}
@members{
HashMap memory = new HashMap();
}

prog                       :               WS         
                                |              COMMENT
                                |              TOKEN;
                                
WS                         :               (' '|'\t'|'\n'|'\r\n')+{skip();};
COMMENT                         :               '//'
                                                {~('\n'|'\r'|'\r\n'))*
('\n'|'\r'|'\r\n'('\n')?)
                                                {$setType(Token.SKIP};
newline();};
TOKEN                  :               ID            
                                |              KEYWORD
                                |              LITERAL
                                |              SEPERATOR
                                |              OPERATOR;
ID                            :               (LETTER| DIGIT) (LETTER)*;
LETTER                  :               ('a'..'z'|'A'..'Z')+;
DIGIT                     :               ('0'..'9')+;
KEYWORD                           :
('boolean'|'else'|'if'|'int'|'main'|'void'|'while'|'print');
LITERAL                                :               BOOLEAN 
                                |              INTEGER;
INTEGER              :               DIGIT
                                |              INTEGER DIGIT;
SEPERATOR        :               ('('|')'|'{'|'}'|';'|',');
BOOLEAN            :               ('true'|'false');
OPERATOR          :
('='|'+'|'-'|'*'|'/'|'<'|'<='|'>'|'>='|'=='|'!='|'&&'|'||'|'!');
                                

                                


                                
                                




From jbb at acm.org  Sun Jul 19 12:38:07 2009
From: jbb at acm.org (John B. Brodie)
Date: Sun, 19 Jul 2009 15:38:07 -0400
Subject: [antlr-interest] Can never be matched
In-Reply-To: <000901ca08a4$8a073f70$9e15be50$@com>
References: <440de1810907191004j3f9669d1jb81955dae82fe568@mail.gmail.com>
	<18BE06D6-005F-40D0-A0FF-BA3A4729443F@temporal-wave.com>
	<440de1810907191102m379d85ecvebbf43b809f632b5@mail.gmail.com>
	<1248027721.17182.9.camel@gecko.home.org>
	<440de1810907191143g4d7ff79drb3fc6127fc3e9fbe@mail.gmail.com>
	<000901ca08a4$8a073f70$9e15be50$@com>
Message-ID: <1248032287.21739.11.camel@gecko.home.org>

On Sun, 2009-07-19 at 12:10 -0700, Bryan S Follins wrote:
> I'm almost done with a lesson grammar but I ran into a problem   I get an
> error referencing the TOKEN RULE,  which is on Line 17 (TOKEN : ID)  It also
> references Line 20, where there is a blank before SEPERATOR.  
> 
> The error reads: error (line)20.1: groupassign.g(file name) (line)17:8:  The
> following alternatives can never be matched: 2,3

The set of strings that can be recognized by your ID rule overlaps with
the set of strings that can be recognized by your KEYWORD rule (e.g.
their set intersection is not empty). Thus the alternative 2 of the
TOKENS rule will never be matched - because any string it would match is
also matched by ID (in alt 1).

The same reasoning applies for LITERAL and ID. The LITERAL in alt 3 of
TOKEN will never match because of the (IHMO strange) way you have
defined ID, usually an identifier must begin with a letter and usuallly
a string like 01234 is not considered an identifier, yet you permit....

Hope this helps
   -jbb

> 
> Does anyone know what that error code means?
> 
> Code is below:
> 
> grammar groupassign;
> @header{
> import java.util.HashMap;
> }
> @members{
> HashMap memory = new HashMap();
> }
> 
> prog                       :               WS         
>                                 |              COMMENT
>                                 |              TOKEN;
>                                 
> WS                         :               (' '|'\t'|'\n'|'\r\n')+{skip();};
> COMMENT                         :               '//'
>                                                 {~('\n'|'\r'|'\r\n'))*
> ('\n'|'\r'|'\r\n'('\n')?)
>                                                 {$setType(Token.SKIP};
> newline();};
> TOKEN                  :               ID            
>                                 |              KEYWORD
>                                 |              LITERAL
>                                 |              SEPERATOR
>                                 |              OPERATOR;
> ID                            :               (LETTER| DIGIT) (LETTER)*;
> LETTER                  :               ('a'..'z'|'A'..'Z')+;
> DIGIT                     :               ('0'..'9')+;
> KEYWORD                           :
> ('boolean'|'else'|'if'|'int'|'main'|'void'|'while'|'print');
> LITERAL                                :               BOOLEAN 
>                                 |              INTEGER;
> INTEGER              :               DIGIT
>                                 |              INTEGER DIGIT;
> SEPERATOR        :               ('('|')'|'{'|'}'|';'|',');
> BOOLEAN            :               ('true'|'false');
> OPERATOR          :
> ('='|'+'|'-'|'*'|'/'|'<'|'<='|'>'|'>='|'=='|'!='|'&&'|'||'|'!');
>                                 
> 
>                                 
> 
> 
>                                 
>                                 
> 
> 
> 



From luiscubal at gmail.com  Sun Jul 19 13:22:54 2009
From: luiscubal at gmail.com (=?UTF-8?Q?Lu=C3=ADs_Reis?=)
Date: Sun, 19 Jul 2009 21:22:54 +0100
Subject: [antlr-interest] ANTLRWorks adds junk characters at the end of file
Message-ID: <c121c9b90907191322o57763dbq36d6e3b5e5096aa6@mail.gmail.com>

When opening a file with ANTLRWorks, it automatically adds one(or more) junk
character to the end of the file.
Attempting to compile that file with those junk characters causes an
"unexpected char: 0x0" error.
Is there any way to avoid having those characters added?

If I remove those characters, close the file and reopen it, they are added
once again.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090719/7343140b/attachment.html 

From patrick133t at yahoo.com  Sun Jul 19 13:45:09 2009
From: patrick133t at yahoo.com (Patrick Higgins)
Date: Sun, 19 Jul 2009 13:45:09 -0700 (PDT)
Subject: [antlr-interest] Can never be matched
In-Reply-To: <000901ca08a4$8a073f70$9e15be50$@com>
References: <440de1810907191004j3f9669d1jb81955dae82fe568@mail.gmail.com>
	<18BE06D6-005F-40D0-A0FF-BA3A4729443F@temporal-wave.com>
	<440de1810907191102m379d85ecvebbf43b809f632b5@mail.gmail.com>
	<1248027721.17182.9.camel@gecko.home.org>
	<440de1810907191143g4d7ff79drb3fc6127fc3e9fbe@mail.gmail.com>
	<000901ca08a4$8a073f70$9e15be50$@com>
Message-ID: <560773.81135.qm@web65610.mail.ac4.yahoo.com>


I don't know what your grammar is supposed to be doing, but from the looks of it, there's a lot of confusion and unfortunately I wouldn't say that you're "almost done".

Are you using ANTLR because your course asks you to specifically use it and you have some examples and explanations of how to use it, or does your course not specify any particular tool and you're just using ANTLR as a tool to understand grammars? I ask this because of your INTEGER rule. The way you have defined it is not optimal for ANTLR and makes me think you grabbed it from a grammar that was not intended for use with ANTLR.

Your token for DIGIT and INTEGER will actually match the same input. Can you take a look at it and explain why?

The general problem I see is that you seem to be confused about what should be lexer rules and what should be parser rules, and ANTLR makes it a little confusing (although convenient) by allowing both in a single file. That bit of confusion is also what makes me suspect you've been looking at some grammars that were not designed for ANTLR.

Do you not have access to a professor, TA, or even a book to gain an understanding of the basics?



----- Original Message ----
From: Bryan S Follins <asalh at mindspring.com>
To: John B. Brodie <jbb at acm.org>
Cc: antlr-interest at antlr.org
Sent: Sunday, July 19, 2009 1:10:11 PM
Subject: [antlr-interest] Can never be matched

I'm almost done with a lesson grammar but I ran into a problem   I get an
error referencing the TOKEN RULE,  which is on Line 17 (TOKEN : ID)  It also
references Line 20, where there is a blank before SEPERATOR.  

The error reads: error (line)20.1: groupassign.g(file name) (line)17:8:  The
following alternatives can never be matched: 2,3

Does anyone know what that error code means?

Code is below:

grammar groupassign;
@header{
import java.util.HashMap;
}
@members{
HashMap memory = new HashMap();
}

prog                       :               WS        
                                |              COMMENT
                                |              TOKEN;
                                
WS                         :               (' '|'\t'|'\n'|'\r\n')+{skip();};
COMMENT                         :               '//'
                                                {~('\n'|'\r'|'\r\n'))*
('\n'|'\r'|'\r\n'('\n')?)
                                                {$setType(Token.SKIP};
newline();};
TOKEN                  :               ID            
                                |              KEYWORD
                                |              LITERAL
                                |              SEPERATOR
                                |              OPERATOR;
ID                            :               (LETTER| DIGIT) (LETTER)*;
LETTER                  :               ('a'..'z'|'A'..'Z')+;
DIGIT                     :               ('0'..'9')+;
KEYWORD                           :
('boolean'|'else'|'if'|'int'|'main'|'void'|'while'|'print');
LITERAL                                :               BOOLEAN 
                                |              INTEGER;
INTEGER              :               DIGIT
                                |              INTEGER DIGIT;
SEPERATOR        :               ('('|')'|'{'|'}'|';'|',');
BOOLEAN            :               ('true'|'false');
OPERATOR          :
('='|'+'|'-'|'*'|'/'|'<'|'<='|'>'|'>='|'=='|'!='|'&&'|'||'|'!');
                                

                                


                                
                                




List: http://www.antlr.org/mailman/listinfo/antlr-interest
Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address


From david-sarah at jacaranda.org  Sun Jul 19 14:06:45 2009
From: david-sarah at jacaranda.org (David-Sarah Hopwood)
Date: Sun, 19 Jul 2009 22:06:45 +0100
Subject: [antlr-interest] rewriting tree such that children are at same
 level
In-Reply-To: <440de1810907191004j3f9669d1jb81955dae82fe568@mail.gmail.com>
References: <440de1810907191004j3f9669d1jb81955dae82fe568@mail.gmail.com>
Message-ID: <4A638AE5.6010908@jacaranda.org>

hakan eryargi wrote:
> hello,
> 
> below is the main part of my grammar. it's ok but it creates an AST
> from expression
> 
> a & b & c  -> (& (& a b) c) : an AND node with children c and another
> AND node with children a and b
> 
> but i want: (& a b c) : an AND node with tree children
> 
> how can i make that with a rewrite rule ?
> 
> i've found following post in mail list but didnt helped me much :/
> http://markmail.org/message/ed3ncmfimu3xnczt
> 
> program :
> 	expression EOF!
> 	;
> 
> expression
> 	: primary ((AND^ primary)+ | (OR^ primary)+)?
> 	;

Change this to (tested):

  expression
        : primary (                -> primary
                  | (AND primary)+ -> ^(AND primary+)
                  | (OR  primary)+ -> ^(OR  primary+)
                  )
        ;

This works because the 'primary+' on the right-hand-side of
each '->' includes all primary nodes matched in the overall
production.

The other replies you got suggesting to use += may also work,
but the solution above is simpler; normally you only need to
use += if you need to refer to the list of nodes in an action.

Jim Idle wrote:
> Not sure WHY you would want that buy it is just:
> 
> p+=primary (AND p+=primary)* -> ^(AND $p+)

I assume that the solution still needs to satisfy the requirement
in the recent thread with subject "forcing parenthesis":
<http://www.antlr.org/pipermail/antlr-interest/2009-July/035196.html>
<http://www.antlr.org/pipermail/antlr-interest/2009-July/035248.html>

-- 
David-Sarah Hopwood  ?  http://davidsarah.livejournal.com




From asalh at mindspring.com  Sun Jul 19 14:27:39 2009
From: asalh at mindspring.com (Bryan S Follins)
Date: Sun, 19 Jul 2009 14:27:39 -0700
Subject: [antlr-interest] Can never be matched
In-Reply-To: <560773.81135.qm@web65610.mail.ac4.yahoo.com>
References: <440de1810907191004j3f9669d1jb81955dae82fe568@mail.gmail.com>
	<18BE06D6-005F-40D0-A0FF-BA3A4729443F@temporal-wave.com>
	<440de1810907191102m379d85ecvebbf43b809f632b5@mail.gmail.com>
	<1248027721.17182.9.camel@gecko.home.org>
	<440de1810907191143g4d7ff79drb3fc6127fc3e9fbe@mail.gmail.com>
	<000901ca08a4$8a073f70$9e15be50$@com>
	<560773.81135.qm@web65610.mail.ac4.yahoo.com>
Message-ID: <002801ca08b7$be2eb590$3a8c20b0$@com>

Sorry group, perhaps I should have made myself clear.  This code is just
skeleton.  I just wanted to be sure I was on the right track.  I have to add
my actions later.

-----Original Message-----
From: Patrick Higgins [mailto:patrick133t at yahoo.com] 
Sent: Sunday, July 19, 2009 13:45
To: Bryan S Follins
Cc: antlr-interest at antlr.org
Subject: Re: [antlr-interest] Can never be matched


I don't know what your grammar is supposed to be doing, but from the looks
of it, there's a lot of confusion and unfortunately I wouldn't say that
you're "almost done".

Are you using ANTLR because your course asks you to specifically use it and
you have some examples and explanations of how to use it, or does your
course not specify any particular tool and you're just using ANTLR as a tool
to understand grammars? I ask this because of your INTEGER rule. The way you
have defined it is not optimal for ANTLR and makes me think you grabbed it
from a grammar that was not intended for use with ANTLR.

Your token for DIGIT and INTEGER will actually match the same input. Can you
take a look at it and explain why?

The general problem I see is that you seem to be confused about what should
be lexer rules and what should be parser rules, and ANTLR makes it a little
confusing (although convenient) by allowing both in a single file. That bit
of confusion is also what makes me suspect you've been looking at some
grammars that were not designed for ANTLR.

Do you not have access to a professor, TA, or even a book to gain an
understanding of the basics?



----- Original Message ----
From: Bryan S Follins <asalh at mindspring.com>
To: John B. Brodie <jbb at acm.org>
Cc: antlr-interest at antlr.org
Sent: Sunday, July 19, 2009 1:10:11 PM
Subject: [antlr-interest] Can never be matched

I'm almost done with a lesson grammar but I ran into a problem   I get an
error referencing the TOKEN RULE,  which is on Line 17 (TOKEN : ID)  It also
references Line 20, where there is a blank before SEPERATOR.  

The error reads: error (line)20.1: groupassign.g(file name) (line)17:8:  The
following alternatives can never be matched: 2,3

Does anyone know what that error code means?

Code is below:

grammar groupassign;
@header{
import java.util.HashMap;
}
@members{
HashMap memory = new HashMap();
}

prog                       :               WS        
                                |              COMMENT
                                |              TOKEN;
                                
WS                         :               (' '|'\t'|'\n'|'\r\n')+{skip();};
COMMENT                         :               '//'
                                                {~('\n'|'\r'|'\r\n'))*
('\n'|'\r'|'\r\n'('\n')?)
                                                {$setType(Token.SKIP};
newline();};
TOKEN                  :               ID            
                                |              KEYWORD
                                |              LITERAL
                                |              SEPERATOR
                                |              OPERATOR;
ID                            :               (LETTER| DIGIT) (LETTER)*;
LETTER                  :               ('a'..'z'|'A'..'Z')+;
DIGIT                     :               ('0'..'9')+;
KEYWORD                           :
('boolean'|'else'|'if'|'int'|'main'|'void'|'while'|'print');
LITERAL                                :               BOOLEAN 
                                |              INTEGER;
INTEGER              :               DIGIT
                                |              INTEGER DIGIT;
SEPERATOR        :               ('('|')'|'{'|'}'|';'|',');
BOOLEAN            :               ('true'|'false');
OPERATOR          :
('='|'+'|'-'|'*'|'/'|'<'|'<='|'>'|'>='|'=='|'!='|'&&'|'||'|'!');
                                

                                


                                
                                




List: http://www.antlr.org/mailman/listinfo/antlr-interest
Unsubscribe:
http://www.antlr.org/mailman/options/antlr-interest/your-email-address


From hakan.eryargi at gmail.com  Sun Jul 19 15:42:55 2009
From: hakan.eryargi at gmail.com (hakan eryargi)
Date: Mon, 20 Jul 2009 01:42:55 +0300
Subject: [antlr-interest] rewriting tree such that children are at same
	level
In-Reply-To: <4A638AE5.6010908@jacaranda.org>
References: <440de1810907191004j3f9669d1jb81955dae82fe568@mail.gmail.com>
	<4A638AE5.6010908@jacaranda.org>
Message-ID: <440de1810907191542p3ff3547fkeb276407f3bf6a48@mail.gmail.com>

thanks. that's clearly simpler and better for this case :)

On Mon, Jul 20, 2009 at 12:06 AM, David-Sarah
Hopwood<david-sarah at jacaranda.org> wrote:
> hakan eryargi wrote:
>> hello,
>>
>> below is the main part of my grammar. it's ok but it creates an AST
>> from expression
>>
>> a & b & c ?-> (& (& a b) c) : an AND node with children c and another
>> AND node with children a and b
>>
>> but i want: (& a b c) : an AND node with tree children
>>
>> how can i make that with a rewrite rule ?
>>
>> i've found following post in mail list but didnt helped me much :/
>> http://markmail.org/message/ed3ncmfimu3xnczt
>>
>> program :
>> ? ? ? expression EOF!
>> ? ? ? ;
>>
>> expression
>> ? ? ? : primary ((AND^ primary)+ | (OR^ primary)+)?
>> ? ? ? ;
>
> Change this to (tested):
>
> ?expression
> ? ? ? ?: primary ( ? ? ? ? ? ? ? ?-> primary
> ? ? ? ? ? ? ? ? ?| (AND primary)+ -> ^(AND primary+)
> ? ? ? ? ? ? ? ? ?| (OR ?primary)+ -> ^(OR ?primary+)
> ? ? ? ? ? ? ? ? ?)
> ? ? ? ?;
>
> This works because the 'primary+' on the right-hand-side of
> each '->' includes all primary nodes matched in the overall
> production.
>
> The other replies you got suggesting to use += may also work,
> but the solution above is simpler; normally you only need to
> use += if you need to refer to the list of nodes in an action.
>
> Jim Idle wrote:
>> Not sure WHY you would want that buy it is just:
>>
>> p+=primary (AND p+=primary)* -> ^(AND $p+)
>
> I assume that the solution still needs to satisfy the requirement
> in the recent thread with subject "forcing parenthesis":
> <http://www.antlr.org/pipermail/antlr-interest/2009-July/035196.html>
> <http://www.antlr.org/pipermail/antlr-interest/2009-July/035248.html>
>
> --
> David-Sarah Hopwood ?? ?http://davidsarah.livejournal.com
>
>
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>

From orzechowski.michal at gmail.com  Sun Jul 19 17:18:10 2009
From: orzechowski.michal at gmail.com (Michal Orzechowski)
Date: Mon, 20 Jul 2009 02:18:10 +0200
Subject: [antlr-interest] Exceptions handling, Line and Char Position
Message-ID: <7b9367f50907191718p2d5f72cfka9cfacbc45866597@mail.gmail.com>

Exceptions handling, Line and Char stream Position

Hi all,

I've written a tree parsing rule, and have few doubts concerning nice
exceptions handling.

I have such thing working:
def_tags	
	: (a=ID {db.tags.register($ID.text);})*
	;
	catch[DatabaseAbstractException e] {
	reportDatabaseError(e,$a);
	tryToRecover(e);
	}

And I would like it to look like this:

def_tags	
	: (ID {db.tags.register($ID.text);})*
	;
	catch[DatabaseAbstractException e] {
	reportDatabaseError(e);
	tryToRecover(e);
	}

Method 'reportDatabaseError' is member of tree parser.
Method register throws TagAlreadyDefinedException, which inherits from
DatabaseAbstractException.

In first rule, I nicely print line and char position of the error
using token reference '$a' passed to method 'reportDatabaseError'.
In second rule I would like to get last matched token from 'input'
'InStream' available from my tree parser and then get from it all
necessary data for nice error info.

Is it possible to do it like that?

I have been studying RecognitionException source code for some
answers, but it occurs to me that RecognitionExceptions are thrown
before 'consume' method is invoked on the stream, thus mismatched
token is still available through LT(1) method. In my case token ID is
successfully matched and consumed, and after that 'register' throws an
exception.

http://www.antlr.org/api/Java/_recognition_exception_8java-source.html

Thanks for help in advance,
Michal

From hakan.eryargi at gmail.com  Sun Jul 19 18:04:06 2009
From: hakan.eryargi at gmail.com (hakan eryargi)
Date: Mon, 20 Jul 2009 04:04:06 +0300
Subject: [antlr-interest] accessing lexer sub tokens from a rule
Message-ID: <440de1810907191804n1925d618vbf87a2870abb48f3@mail.gmail.com>

hello,

is it possible to access sub tokens of lexer from a rule ? (sorry for
stupid naming) at the bottom is part of my grammar. i want to re-write
primary rule something like:

primary	:	
	a=ABILITY -> ABILITY<ReqNode.A>[$a.scope, $a.id, ($a.INTEGER | $a.FLOAT)? ]
	| LPAREN! expression RPAREN!
	;

of course i can parse ability in ReqNode.A constructor for my needs
but ability is already parsed by lexer so using it seems wiser. but
how ?

i tried to make ability a rule but generated code couldnt parse my
input complaining about no viable alternative. i'm not sure why, and
also i'm not sure if making ability a rule makes sense. ie: it sounds
like a lexical rule rather than parsing rule

thanks,
hakan


primary	:	
	ABILITY -> ABILITY <ReqNode.A>
	| LPAREN! expression RPAREN!
	;
	
	
ABILITY	:
	SCOPE WS? COLON WS? ID WS? (COLON WS? (INTEGER | FLOAT))?;	
	
ID	:
	('a'..'z' | 'A'..'A') ('a'..'z' | 'A'..'A' | DIGIT | '_' )*
	;

fragment SCOPE
	: /* only query scopes*/
	'b' /* building */
	| 'l' /* cell */
	| 't' /* slot */
	| 'c' /* city */
	| 'u' /* user */
	| 'a' /* any */
	;

From sadie at kind.ocn.ne.jp  Sun Jul 19 22:37:26 2009
From: sadie at kind.ocn.ne.jp (sunao furukawa)
Date: Mon, 20 Jul 2009 14:37:26 +0900
Subject: [antlr-interest] How to debug tree grammar??
Message-ID: <9D23A17EC9A3439CA9EE77B75281E2A8@sunaoPC>

Hello! My name is Sunao Furukawa.
I am Japanese.Sorry,I can speak English a little.
I use ANTLRWorks1.2.3.but I cannot debug tree grammar file T1.g.

1.I generated E3.tokens and E3Lexer.java and E3Parser.java from E3.g in 
ANTLRWorks.
2.I generated and compiled T1.g(T1.java,T1.tokens),and E3.tokens and 
E3Lexer.java and E3Parser.java
  by debug.
3.I compiled TestE.java.
4.I started ANTLRWorks debug remote in localhost port 49153.
5.I executed [java TestE],and standard input [a=1 (CRLF) a+2*3 (CRLF) 
(Ctrl-C)].

But I could not debug T1.g and below, error occur.
(ASSIGN a 1)
line 0:-1 mismatched input '<EOF>' expecting NEWLINE
<mismatched token: [@-1,0:0='<no text>',<-1>,0:-1], resync=a+2*3>
java.net.BindException: Address already in use: JVM_Bind
java.net.BindException: Address already in use: JVM_Bind
 at java.net.PlainSocketImpl.socketBind(Native Method)
 at java.net.PlainSocketImpl.bind(Unknown Source)
 at java.net.ServerSocket.bind(Unknown Source)
 at java.net.ServerSocket.<init>(Unknown Source)
 at java.net.ServerSocket.<init>(Unknown Source)
 at 
org.antlr.runtime.debug.DebugEventSocketProxy.handshake(DebugEventSocketProxy.java:75)
 at T1.<init>(T1.java:55)
 at T1.<init>(T1.java:47)
 at __Test__.main(__Test__.java:17)
Exception in thread "main" java.lang.NullPointerException
 at 
org.antlr.runtime.debug.DebugEventSocketProxy.transmit(DebugEventSocketProxy.java:116)
 at 
org.antlr.runtime.debug.DebugEventSocketProxy.exitRule(DebugEventSocketProxy.java:130)
 at T1.prog(T1.java:154)
 at __Test__.main(__Test__.java:19)

I use Windows Vista Home Basic sp1.IP adress is private(dhcp).
Please tell me how to correct it and debug tree grammar.
below E3.g and T1.g and TestE.java.

--------------------------------------------------------------------------------------------------
<E3.g>
grammar E3;

options{
 output = AST;
 ASTLabelType = CommonTree;
}

tokens{
 ASSIGN; ALU_ADD; ALU_SUB; ALU_MUL; ALU_DIV;
}

prog
 : (
   statement
  { if ($statement.tree != null) 
System.out.println($statement.tree.toStringTree());}
   )+

 ;
statement
 : expression NEWLINE!
 | IDENTIFIER '=' expression NEWLINE
  -> ^(ASSIGN IDENTIFIER expression)
 | NEWLINE!
 ;
expression
 : product (aop^ product)*
 ;
aop
 : '+'
  -> ALU_ADD
 | '-'
  -> ALU_SUB
 ;
product
 : factor (pop^ factor)*
 ;
pop
 : '*'
  -> ALU_MUL
 | '/'
  -> ALU_DIV
 ;
factor
 : IDENTIFIER
 | CONSTANT
 | '('! expression ')'!
 ;

IDENTIFIER :   ('a'..'z'|'A'..'Z')+ ;
CONSTANT :   '0'..'9'+ ;
NEWLINE  :   '\r'? '\n' ;
WS  :   (' '|'\t')+ {skip();} ;
-------------------------------------------------------------------------------------
<T1.g>
tree grammar T1;

options{
 tokenVocab=E3;
 ASTLabelType = CommonTree;
}

@header {
import java.util.HashMap;
}

@members {
HashMap memory = new HashMap();
}

prog : statement+ ;

statement
 : e=expression
  { System.out.println($e.value); }
 | ^(ASSIGN id=IDENTIFIER e=expression)
  { memory.put($id.text, new Integer($e.value)); }
 ;
expression returns [int value]
 : ^(ALU_ADD a=expression b=expression)
  {$value = $a.value + $b.value;}
 | ^(ALU_SUB a=expression b=expression)
  {$value = $a.value - $b.value;}
 | ^(ALU_MUL a=expression b=expression)
  {$value = $a.value * $b.value;}
 | ^(ALU_DIV a=expression b=expression)
  {$value = $a.value / $b.value;}
 | IDENTIFIER
  {
  Integer v = (Integer)memory.get($IDENTIFIER.text);
  if (v != null) $value = v.intValue();
  else System.err.println("undefined variable " + $IDENTIFIER.text);
  }
 | CONSTANT
  { $value = Integer.parseInt($CONSTANT.text); }
 ;
------------------------------------------------------------------------------------
<TestE.java>
import java.io.*;
import org.antlr.runtime.ANTLRInputStream;
import org.antlr.runtime.CommonTokenStream;
import org.antlr.runtime.tree.CommonTree;
import org.antlr.runtime.tree.CommonTreeNodeStream;

public class TestE {
    public static void main(String[] args) throws Exception {
        ANTLRInputStream input = new ANTLRInputStream(System.in);
        E3Lexer lexer = new E3Lexer(input);
        CommonTokenStream tokens = new CommonTokenStream(lexer);
        E3Parser parser = new E3Parser(tokens);
        E3Parser.prog_return r = parser.prog();

        CommonTree t = (CommonTree)r.getTree();
        CommonTreeNodeStream nodes = new CommonTreeNodeStream(t);
        T1 walker = new T1(nodes);
        walker.prog();
    }
}
--------------------------------------------------------------------------------------



From sadie at kind.ocn.ne.jp  Mon Jul 20 01:30:46 2009
From: sadie at kind.ocn.ne.jp (sunao furukawa)
Date: Mon, 20 Jul 2009 17:30:46 +0900
Subject: [antlr-interest] How to debug tree grammar??
In-Reply-To: <9D23A17EC9A3439CA9EE77B75281E2A8@sunaoPC>
References: <9D23A17EC9A3439CA9EE77B75281E2A8@sunaoPC>
Message-ID: <D5A3C1704D48404CB6BFD741F548276D@sunaoPC>

This is self-follow message.
> 1.I generated E3.tokens and E3Lexer.java and E3Parser.java from E3.g in
> ANTLRWorks.
> 2.I generated and compiled T1.g(T1.java,T1.tokens),and E3.tokens and
> E3Lexer.java and E3Parser.java
>  by debug.
This 2 ask me input [a=1 (CRLF) a+2*3 (CRLF)] .
when next file is executed ,error occur,
Test program __Test__.class is executed(java __Test__)
 (ASSIGN a 1)
 (ALU_ADD a (ALU_MUL 2 3))
 java.net.BindException: Address already in use: JVM_Bind
 java.net.BindException: Address already in use: JVM_Bind
 at java.net.PlainSocketImpl.socketBind(Native Method)
 at java.net.PlainSocketImpl.bind(Unknown Source)
 at java.net.ServerSocket.bind(Unknown Source)
 at java.net.ServerSocket.<init>(Unknown Source)
 at java.net.ServerSocket.<init>(Unknown Source)
 at
 org.antlr.runtime.debug.DebugEventSocketProxy.handshake(DebugEventSocketProxy.java:75) at T1.<init>(T1.java:55) at T1.<init>(T1.java:47) at __Test__.main(__Test__.java:17) Exception in thread "main" java.lang.NullPointerException at org.antlr.runtime.debug.DebugEventSocketProxy.transmit(DebugEventSocketProxy.java:116) at org.antlr.runtime.debug.DebugEventSocketProxy.exitRule(DebugEventSocketProxy.java:130) at T1.prog(T1.java:154) at __Test__.main(__Test__.java:19)


From elnur.j at gmail.com  Mon Jul 20 04:59:18 2009
From: elnur.j at gmail.com (Elnur Cabarov)
Date: Mon, 20 Jul 2009 16:59:18 +0500
Subject: [antlr-interest] hidden channel constant issue
Message-ID: <cb604c710907200459v6cc56204u2e02d9875a5e60cc@mail.gmail.com>

Hello,

When working with Java target I specify hidden channel as { $channel =
HIDDEN; }
but with C# target have to change it to  { $channel = Hidden; }

Don't constant names have to be the same for maximum compatibility?

-- 
Elnur Cabarov
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090720/5a2b6224/attachment.html 

From benblo+ANTLR at gmail.com  Mon Jul 20 05:48:48 2009
From: benblo+ANTLR at gmail.com (Benoit Fouletier)
Date: Mon, 20 Jul 2009 14:48:48 +0200
Subject: [antlr-interest] hidden channel constant issue
In-Reply-To: <cb604c710907200459v6cc56204u2e02d9875a5e60cc@mail.gmail.com>
References: <cb604c710907200459v6cc56204u2e02d9875a5e60cc@mail.gmail.com>
Message-ID: <b02eee6b0907200548o4562b5f7g6aaf578316d9e8f9@mail.gmail.com>

I know that wasn't the point of your post, but I think you can work around
by adding this:
@members {
public static int HIDDEN = Hidden;
}

Improves compatibility... at the cost of adding an header, granted.

     Ben


On Mon, Jul 20, 2009 at 1:59 PM, Elnur Cabarov <elnur.j at gmail.com> wrote:

> Hello,
>
> When working with Java target I specify hidden channel as { $channel =
> HIDDEN; }
> but with C# target have to change it to  { $channel = Hidden; }
>
> Don't constant names have to be the same for maximum compatibility?
>
> --
> Elnur Cabarov
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090720/b284747b/attachment.html 

From elnur.j at gmail.com  Mon Jul 20 06:31:52 2009
From: elnur.j at gmail.com (Elnur Cabarov)
Date: Mon, 20 Jul 2009 18:31:52 +0500
Subject: [antlr-interest] Rule methods are private (CSharp3 target)
Message-ID: <cb604c710907200631y194b67f8h1f9d491d4bb4f77d@mail.gmail.com>

Hi

I use Antlr executable by Sam Harwell, but rule methods for CSharp3 target
are private, so I can't call them externally

-- 
Elnur Cabarov
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090720/8024a8c1/attachment.html 

From maxtefan at gmail.com  Mon Jul 20 09:25:49 2009
From: maxtefan at gmail.com (Stefan Ottosson)
Date: Mon, 20 Jul 2009 18:25:49 +0200
Subject: [antlr-interest] problem with a simple list rewriter
Message-ID: <78c6d48f0907200925v69111fa5t3ac13b00f501a6c2@mail.gmail.com>

Hi,

I've been experimenting with a simple rewriter. The AST construction works
fine and does what I expect, but there must be something about the
interaction between Antlr and Stringtemplate that I don't understand despite
reading the Antlr book, because I can't get even simple things to do what I
want.

Here is an example I've simplified so much there's hardly anything left. I
just want to rewrite (1 2 3) into [1, 2, 3], but the elements disappear on
the way. I was under the impression that it was enough to specify the
rewrites I wanted to make and leave everything else alone with rewrite=true,
so why are the elements null?

Please help me out by explaining or pointing me to some passage in the book
or documentation. I'm very grateful for any help. Thank you.


The input:
(1 2 3)

The output:
     tree=(List 1 2 3)
     body=[null, null, null]
     []

-----------

grammar Example;
options { output=AST; }

tokens {
    List;
}

cu:
        expr+
    ;

expr:
        INT
    |   ID
    |   list
    ;

list:
        '(' expr* ')' -> ^(List expr*)
    ;

..
---------------------

tree grammar Gen;

options {
    tokenVocab=Example;
    ASTLabelType=CommonTree;
    output=template;
    rewrite=true;
}

cu:
        expr+
    ;

expr:
        INT
    |   ID
    |   list
    ;

list:
        ^(List body+=expr*)

        {
            System.out.println("body=" + $body.toString());
        }

        -> list(exprs={$body})
    ;

-----

list(exprs) ::=
<<
[<exprs; separator=", ">]
>>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090720/606ba3fa/attachment.html 

From nvlassopoulos at gmail.com  Mon Jul 20 10:32:34 2009
From: nvlassopoulos at gmail.com (Nick Vlassopoulos)
Date: Mon, 20 Jul 2009 18:32:34 +0100
Subject: [antlr-interest] Parsing HAML - significant and insignificant
	whitespaces
In-Reply-To: <73ee720a0907200622g79f3e67m61bcff4bf5b51075@mail.gmail.com>
References: <73ee720a0907140943v19c7ac1m3a48b4b14673e7ba@mail.gmail.com>
	<1419225d0907140957m44e79982y3b796a4150d6bd8@mail.gmail.com>
	<1419225d0907141002j64f652c3v6362fd5fe88b3475@mail.gmail.com>
	<73ee720a0907141651s713d9da2u704896bd84aa67f3@mail.gmail.com>
	<1419225d0907150246w78054eacxe62c9f051c67338e@mail.gmail.com>
	<73ee720a0907200622g79f3e67m61bcff4bf5b51075@mail.gmail.com>
Message-ID: <1419225d0907201032i5aab083fh4a2caa3b8fff1b86@mail.gmail.com>

Hi Dmitiry,

Maybe you're looking for something like the following then?

------------------------------------------
grammar Foo;
options {
    output = Java;
}
@members{
    int ind;
}
prog    :    line*
    ;
line    @init{  ind = 0; }
    :    (ident)* rule LF { System.out.println("Identation " + ind); };

ident    :    WS { ind++; };
rule    :    RULE;

RULE    :    'rule';
LF    :    '\n' '\r'?;
WS    :    ' ';
------------------------------------------

Although I am not sure that this will work in all cases and it might need
some extra cases for tabs and so
on. Personally, I would probably go for Stephen's solution (i.e. writing a
simple preprocessor), as I think
it provides a more "safe" approach.

Nikos.

On Mon, Jul 20, 2009 at 2:22 PM, Dmitiry Nagirnyak <dnagir at gmail.com> wrote:

> Hi,
>
> Nick I think this will generally work.
> So I can traverse the AST and decide what to do with the whitespace.
>
> But I still believe there should be some option to choose a rule
> dynamically. Anybody knows that?
>
>
> To Nick: I don't think I want to do preprocessing. ANTR should be capable
> of doing it.
>
>
> Cheers,
> Dmitriy.
>
> 2009/7/15 Nick Vlassopoulos <nvlassopoulos at gmail.com>
>
>> Hi Dmitiry,
>>
>> I am not quite sure about this, but I think that something like the
>> following
>>
>> grammar Foo;
>> options {output = AST;}
>>
>> prog    :    line*
>>     ;
>>
>> line    :    (ident)* rule^ LF;
>>
>> ident    :    WS;
>>
>>
>> rule    :    RULE;
>>
>> RULE    :    'rule';
>> LF    :    '\n' '\r'?;
>> WS    :    ' ';
>>
>> would generate an AST where each "rule" comes after a list of "idents"
>> (spaces in the case above).
>> So, when you are walking through the tree, you could count the number of
>> "ident" children before a rule.
>> I am not sure that this would cover your case (since I am a beginner in
>> "the ways of ANTLR").
>>
>> Hope this helps!
>>
>> Nikos
>>
>>
>> On Wed, Jul 15, 2009 at 12:51 AM, Dmitiry Nagirnyak <dnagir at gmail.com>wrote:
>>
>>> Hi Nick,
>>>
>>> Thanks. It shows some useful techniques.
>>> Main thing there is LEADING_WS.
>>>
>>> But it doesn't demonstrate how to choose different rule based on
>>> identation.
>>>
>>> For example something like this would do the job:
>>> indent    :    LEADING_WS rule ;
>>> LEADING_WS :   (' ')*
>>>         {
>>>           if ( 0 == (getColumn() % sizeOfIndent)) {
>>>             // We have matched the indent size - need to generate the
>>> node and follow on the indents
>>>             // HOW TO 1: Add node to AST here?
>>>             // HOW TO 2: Execute another rule?
>>>           } // Otherwise consume the spaces
>>>         }
>>>     ;
>>>
>>> How those HOW TOs can be done?
>>>
>>> Cheers,
>>> Dmitriy.
>>> 2009/7/15 Nick Vlassopoulos <nvlassopoulos at gmail.com>
>>>
>>> Sorry for reposting, but I copied the wrong link,
>>>>
>>>> http://www.antlr.org/grammar/1078018002577/python.tar.gz
>>>>
>>>> Nikos
>>>>
>>>>
>>>>
>>>>
>>>> On Tue, Jul 14, 2009 at 5:57 PM, Nick Vlassopoulos <
>>>> nvlassopoulos at gmail.com> wrote:
>>>>
>>>>> Hi Dmitiry,
>>>>>
>>>>> I am not sure if this is what you are looking for, but you might want
>>>>> to have a look
>>>>> on how the python grammar handles identation.
>>>>> See for example:
>>>>> http://www.antlr.org/grammar/1200715779785/Python.g
>>>>>
>>>>> Best Regards,
>>>>>
>>>>> Nikos
>>>>>
>>>>>
>>>>>   On Tue, Jul 14, 2009 at 5:43 PM, Dmitiry Nagirnyak <dnagir at gmail.com
>>>>> > wrote:
>>>>>
>>>>>>  Hi,
>>>>>>
>>>>>> I am researching possibility to parse HAML syntax to port it to .NET.
>>>>>> There is project call NHAML but uses Regular Expressions instead of regular
>>>>>> parser.
>>>>>> While it is working great it has certain limitations.
>>>>>>
>>>>>> So people start thinking about a real parser. And years ago I did some
>>>>>> wotks with ANTLR and have chance to revisit it.
>>>>>>
>>>>>> My question is about whitespaces.
>>>>>> In NHAML whitespaces are significant at the beginning of line.
>>>>>>
>>>>>> What I would like to have is this (star* for whitespace):
>>>>>>
>>>>>> %A
>>>>>> **%B
>>>>>> ****%B1
>>>>>> ****%B2
>>>>>> **%C
>>>>>> ****%C1
>>>>>>
>>>>>> It would correspond to the tree sam type of tree (A in the root; B,C -
>>>>>> second level nodes, B1,B22, C1 - third level nodes).
>>>>>>
>>>>>> It would be easy if the whitespaces would always be indented at the
>>>>>> sane number (here 2).
>>>>>> But this should be configurable. And even more, instead of whitespaces
>>>>>> there might be tabs. But let's skip this for now.
>>>>>>
>>>>>> So grammar like this (just a quick draft) won't satisfy that:
>>>>>> nhaml    :    line*
>>>>>>     ;
>>>>>> line    :    indent? rule
>>>>>>     ;
>>>>>> indent    :    WS WS indent? // How to consume different number of WSs
>>>>>> depending on provided settings?
>>>>>>     ;
>>>>>> rule    :    ~WS (~NL)*
>>>>>>     ;
>>>>>>
>>>>>> So the actual question is in rule "indent".
>>>>>> If I don't know required number of matches of WS during development,
>>>>>> how can I write grammar for that?
>>>>>>
>>>>>> Cheers,
>>>>>> Dmitriy Nagirnyak.
>>>>>>
>>>>>>
>>>>>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>>>>>> Unsubscribe:
>>>>>> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>>>>>>
>>>>>>
>>>>>
>>>>
>>>
>>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090720/907805b4/attachment.html 

From david-sarah at jacaranda.org  Mon Jul 20 11:48:52 2009
From: david-sarah at jacaranda.org (David-Sarah Hopwood)
Date: Mon, 20 Jul 2009 19:48:52 +0100
Subject: [antlr-interest] How to debug grammars on Vista (was: How to
 debug tree grammar??)
In-Reply-To: <9D23A17EC9A3439CA9EE77B75281E2A8@sunaoPC>
References: <9D23A17EC9A3439CA9EE77B75281E2A8@sunaoPC>
Message-ID: <4A64BC14.9030409@jacaranda.org>

sunao furukawa wrote:
[...]
> 4.I started ANTLRWorks debug remote in localhost port 49153.
> 5.I executed [java TestE],and standard input [a=1 (CRLF) a+2*3 (CRLF) 
> (Ctrl-C)].
> 
> But I could not debug T1.g and below, error occur.
> (ASSIGN a 1)
> line 0:-1 mismatched input '<EOF>' expecting NEWLINE
> <mismatched token: [@-1,0:0='<no text>',<-1>,0:-1], resync=a+2*3>
> java.net.BindException: Address already in use: JVM_Bind
[...]
> I use Windows Vista Home Basic sp1.IP adress is private(dhcp).

I found that the default port 49153 could not be used on Vista. You
need to override it:

 - in the ANTLRWorks preferences (File menu | Preferences | Debugger tab),
   set 'Default local port' to an unused port number. I used 48000.

   If you need to use remote debugging (where the debugged process is
   launched separately from ANTLRWorks), also add -debug to the ANTLR
   options in the General tab.

 - pass this port number into the E3Parser, e.g.:

> public class TestE {
      private static final int DEBUGGER_PORT = 48000;

>     public static void main(String[] args) throws Exception {
>         ANTLRInputStream input = new ANTLRInputStream(System.in);
>         E3Lexer lexer = new E3Lexer(input);
>         CommonTokenStream tokens = new CommonTokenStream(lexer);

          E3Parser parser = new E3Parser(tokens, DEBUGGER_PORT,
                                         new RecognizerSharedState());

>         E3Parser.prog_return r = parser.prog();
> 
>         CommonTree t = (CommonTree)r.getTree();
>         CommonTreeNodeStream nodes = new CommonTreeNodeStream(t);
>         T1 walker = new T1(nodes);
>         walker.prog();
>     }
> }

This is not dependent on the grammar being a tree grammar.

-- 
David-Sarah Hopwood  ?  http://davidsarah.livejournal.com


From antlr at mirality.co.nz  Mon Jul 20 12:42:49 2009
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Tue, 21 Jul 2009 07:42:49 +1200
Subject: [antlr-interest] Rule methods are private (CSharp3 target)
In-Reply-To: <cb604c710907200631y194b67f8h1f9d491d4bb4f77d@mail.gmail.co
 m>
References: <cb604c710907200631y194b67f8h1f9d491d4bb4f77d@mail.gmail.com>
Message-ID: <20090720194259.AC68A3418494@www.antlr.org>

At 01:31 21/07/2009, Elnur Cabarov wrote:
>I use Antlr executable by Sam Harwell, but rule methods for 
>CSharp3 target are private, so I can't call them externally

Have you tried putting "public" in front of the rules you want to 
be callable?  (This doesn't make any difference to the Java 
target, but it's possible it does for CSharp3.  I haven't checked 
though.)


From hakan.eryargi at gmail.com  Mon Jul 20 13:27:23 2009
From: hakan.eryargi at gmail.com (hakan eryargi)
Date: Mon, 20 Jul 2009 23:27:23 +0300
Subject: [antlr-interest] accessing lexer sub tokens from a rule
In-Reply-To: <440de1810907191804n1925d618vbf87a2870abb48f3@mail.gmail.com>
References: <440de1810907191804n1925d618vbf87a2870abb48f3@mail.gmail.com>
Message-ID: <440de1810907201327g48a68d65g93b5d24cfd75690c@mail.gmail.com>

after some re-thought, i've realized that ability should be a parser
rule rather than a lexer rule. i've also realized why antlr couldnt
parse my expression: all SCOPE tokens also match ID tokens. i guess i
was trying to make antlr do some task which indeed must be handled in
application logic. so i removed SCOPE token, put ID in place of it,
and after lots of struggling with syntax, all seems ok now.  it works
beatifully with rest of the application. below is relevant modified
parts.

thanks to all who helped :)
hakan

reqExpression
	:reqPrimary ( /* empty */ -> reqPrimary
                 	| (AND reqPrimary)+ -> ^(AND<ReqNode.And> reqPrimary+)
                 	| (COMMA reqPrimary)+ -> ^(COMMA<ReqNode.And> reqPrimary+)
                 	
                 	| (OR  reqPrimary)+ -> ^(OR<ReqNode.Or>  reqPrimary+)
                 	)
       	;

reqPrimary	:	
	ability -> ability
	| NOT ability -> ^(NOT<ReqNode.Not> ability)
	| LPAREN reqExpression RPAREN -> reqExpression
	| NOT LPAREN reqExpression RPAREN -> ^(NOT<ReqNode.Not> reqExpression)
	;
	
	
ability	:
	s=ID COLON p=PERSISTENT? name=ID (COLON (intValue=INTEGER |
floatValue=FLOAT))?
	-> ^(ABILITY<ReqNode.A>[$p, $s, $name, $intValue, $floatValue] ID ID
INTEGER? FLOAT?)
	;

On Mon, Jul 20, 2009 at 4:04 AM, hakan eryargi<hakan.eryargi at gmail.com> wrote:
> hello,
>
> is it possible to access sub tokens of lexer from a rule ? (sorry for
> stupid naming) at the bottom is part of my grammar. i want to re-write
> primary rule something like:
>
> primary :
> ? ? ? ?a=ABILITY -> ABILITY<ReqNode.A>[$a.scope, $a.id, ($a.INTEGER | $a.FLOAT)? ]
> ? ? ? ?| LPAREN! expression RPAREN!
> ? ? ? ?;
>
> of course i can parse ability in ReqNode.A constructor for my needs
> but ability is already parsed by lexer so using it seems wiser. but
> how ?
>
> i tried to make ability a rule but generated code couldnt parse my
> input complaining about no viable alternative. i'm not sure why, and
> also i'm not sure if making ability a rule makes sense. ie: it sounds
> like a lexical rule rather than parsing rule
>
> thanks,
> hakan
>
>
> primary :
> ? ? ? ?ABILITY -> ABILITY <ReqNode.A>
> ? ? ? ?| LPAREN! expression RPAREN!
> ? ? ? ?;
>
>
> ABILITY :
> ? ? ? ?SCOPE WS? COLON WS? ID WS? (COLON WS? (INTEGER | FLOAT))?;
>
> ID ? ? ?:
> ? ? ? ?('a'..'z' | 'A'..'A') ('a'..'z' | 'A'..'A' | DIGIT | '_' )*
> ? ? ? ?;
>
> fragment SCOPE
> ? ? ? ?: /* only query scopes*/
> ? ? ? ?'b' /* building */
> ? ? ? ?| 'l' /* cell */
> ? ? ? ?| 't' /* slot */
> ? ? ? ?| 'c' /* city */
> ? ? ? ?| 'u' /* user */
> ? ? ? ?| 'a' /* any */
> ? ? ? ?;
>

From oehrstroem at gmail.com  Tue Jul 21 01:03:17 2009
From: oehrstroem at gmail.com (Fredrik Ohrstrom)
Date: Tue, 21 Jul 2009 10:03:17 +0200
Subject: [antlr-interest] A small surprising change in behaviour between
	antlr 3.1.2 and 3.1.3
Message-ID: <8d80b1570907210103n50b91bbesfc29e8cb3cc2641c@mail.gmail.com>

If you execute:

java -cp antlr-3.1.2.jar org.antlr.Tool MyGrammar.g3

everything works fine. but if you execute:

java -cp antlr-3.1.3.jar org.antlr.Tool MyGrammar.g3

nothing happens, no Java files are produced, no error
messages are printed. Though it does complain
if the grammar contains errors.

Apparently 3.1.3 cares about the file suffix, I have
to rename MyGrammar.g3 to MyGrammar.g,
then it works. This is not so intuitive, caused me
a bit of a headache when I tried to upgrade to 3.1.3.
:-)

//Fredrik

From dnagir at gmail.com  Tue Jul 21 04:45:44 2009
From: dnagir at gmail.com (Dmitiry Nagirnyak)
Date: Tue, 21 Jul 2009 21:45:44 +1000
Subject: [antlr-interest] Parsing HAML - significant and insignificant
	whitespaces
In-Reply-To: <1419225d0907201032i5aab083fh4a2caa3b8fff1b86@mail.gmail.com>
References: <73ee720a0907140943v19c7ac1m3a48b4b14673e7ba@mail.gmail.com>
	<1419225d0907140957m44e79982y3b796a4150d6bd8@mail.gmail.com>
	<1419225d0907141002j64f652c3v6362fd5fe88b3475@mail.gmail.com>
	<73ee720a0907141651s713d9da2u704896bd84aa67f3@mail.gmail.com>
	<1419225d0907150246w78054eacxe62c9f051c67338e@mail.gmail.com>
	<73ee720a0907200622g79f3e67m61bcff4bf5b51075@mail.gmail.com>
	<1419225d0907201032i5aab083fh4a2caa3b8fff1b86@mail.gmail.com>
Message-ID: <73ee720a0907210445t2624c10csfc0750f757f48879@mail.gmail.com>

Hi Nick,

All these things are options.
But it seems there's no way to dynamycally choose rules in ANTLR. Right?
Like I posted on 15 Jul.

Anyway, thanks everybody for the help.

Cheers.
2009/7/21 Nick Vlassopoulos <nvlassopoulos at gmail.com>

> Hi Dmitiry,
>
> Maybe you're looking for something like the following then?
>
> ------------------------------------------
> grammar Foo;
> options {
>     output = Java;
> }
> @members{
>     int ind;
> }
> prog    :    line*
>     ;
> line    @init{  ind = 0; }
>     :    (ident)* rule LF { System.out.println("Identation " + ind); };
>
> ident    :    WS { ind++; };
> rule    :    RULE;
>
> RULE    :    'rule';
> LF    :    '\n' '\r'?;
> WS    :    ' ';
> ------------------------------------------
>
> Although I am not sure that this will work in all cases and it might need
> some extra cases for tabs and so
> on. Personally, I would probably go for Stephen's solution (i.e. writing a
> simple preprocessor), as I think
> it provides a more "safe" approach.
>
> Nikos.
>
>
> On Mon, Jul 20, 2009 at 2:22 PM, Dmitiry Nagirnyak <dnagir at gmail.com>wrote:
>
>> Hi,
>>
>> Nick I think this will generally work.
>> So I can traverse the AST and decide what to do with the whitespace.
>>
>> But I still believe there should be some option to choose a rule
>> dynamically. Anybody knows that?
>>
>>
>> To Nick: I don't think I want to do preprocessing. ANTR should be capable
>> of doing it.
>>
>>
>> Cheers,
>> Dmitriy.
>>
>> 2009/7/15 Nick Vlassopoulos <nvlassopoulos at gmail.com>
>>
>>> Hi Dmitiry,
>>>
>>> I am not quite sure about this, but I think that something like the
>>> following
>>>
>>> grammar Foo;
>>> options {output = AST;}
>>>
>>> prog    :    line*
>>>     ;
>>>
>>> line    :    (ident)* rule^ LF;
>>>
>>> ident    :    WS;
>>>
>>>
>>> rule    :    RULE;
>>>
>>> RULE    :    'rule';
>>> LF    :    '\n' '\r'?;
>>> WS    :    ' ';
>>>
>>> would generate an AST where each "rule" comes after a list of "idents"
>>> (spaces in the case above).
>>> So, when you are walking through the tree, you could count the number of
>>> "ident" children before a rule.
>>> I am not sure that this would cover your case (since I am a beginner in
>>> "the ways of ANTLR").
>>>
>>> Hope this helps!
>>>
>>> Nikos
>>>
>>>
>>> On Wed, Jul 15, 2009 at 12:51 AM, Dmitiry Nagirnyak <dnagir at gmail.com>wrote:
>>>
>>>> Hi Nick,
>>>>
>>>> Thanks. It shows some useful techniques.
>>>> Main thing there is LEADING_WS.
>>>>
>>>> But it doesn't demonstrate how to choose different rule based on
>>>> identation.
>>>>
>>>> For example something like this would do the job:
>>>> indent    :    LEADING_WS rule ;
>>>> LEADING_WS :   (' ')*
>>>>         {
>>>>           if ( 0 == (getColumn() % sizeOfIndent)) {
>>>>             // We have matched the indent size - need to generate the
>>>> node and follow on the indents
>>>>             // HOW TO 1: Add node to AST here?
>>>>             // HOW TO 2: Execute another rule?
>>>>           } // Otherwise consume the spaces
>>>>         }
>>>>     ;
>>>>
>>>> How those HOW TOs can be done?
>>>>
>>>> Cheers,
>>>> Dmitriy.
>>>> 2009/7/15 Nick Vlassopoulos <nvlassopoulos at gmail.com>
>>>>
>>>> Sorry for reposting, but I copied the wrong link,
>>>>>
>>>>> http://www.antlr.org/grammar/1078018002577/python.tar.gz
>>>>>
>>>>> Nikos
>>>>>
>>>>>
>>>>>
>>>>>
>>>>> On Tue, Jul 14, 2009 at 5:57 PM, Nick Vlassopoulos <
>>>>> nvlassopoulos at gmail.com> wrote:
>>>>>
>>>>>> Hi Dmitiry,
>>>>>>
>>>>>> I am not sure if this is what you are looking for, but you might want
>>>>>> to have a look
>>>>>> on how the python grammar handles identation.
>>>>>> See for example:
>>>>>> http://www.antlr.org/grammar/1200715779785/Python.g
>>>>>>
>>>>>> Best Regards,
>>>>>>
>>>>>> Nikos
>>>>>>
>>>>>>
>>>>>>   On Tue, Jul 14, 2009 at 5:43 PM, Dmitiry Nagirnyak <
>>>>>> dnagir at gmail.com> wrote:
>>>>>>
>>>>>>>  Hi,
>>>>>>>
>>>>>>> I am researching possibility to parse HAML syntax to port it to .NET.
>>>>>>> There is project call NHAML but uses Regular Expressions instead of regular
>>>>>>> parser.
>>>>>>> While it is working great it has certain limitations.
>>>>>>>
>>>>>>> So people start thinking about a real parser. And years ago I did
>>>>>>> some wotks with ANTLR and have chance to revisit it.
>>>>>>>
>>>>>>> My question is about whitespaces.
>>>>>>> In NHAML whitespaces are significant at the beginning of line.
>>>>>>>
>>>>>>> What I would like to have is this (star* for whitespace):
>>>>>>>
>>>>>>> %A
>>>>>>> **%B
>>>>>>> ****%B1
>>>>>>> ****%B2
>>>>>>> **%C
>>>>>>> ****%C1
>>>>>>>
>>>>>>> It would correspond to the tree sam type of tree (A in the root; B,C
>>>>>>> - second level nodes, B1,B22, C1 - third level nodes).
>>>>>>>
>>>>>>> It would be easy if the whitespaces would always be indented at the
>>>>>>> sane number (here 2).
>>>>>>> But this should be configurable. And even more, instead of
>>>>>>> whitespaces there might be tabs. But let's skip this for now.
>>>>>>>
>>>>>>> So grammar like this (just a quick draft) won't satisfy that:
>>>>>>> nhaml    :    line*
>>>>>>>     ;
>>>>>>> line    :    indent? rule
>>>>>>>     ;
>>>>>>> indent    :    WS WS indent? // How to consume different number of
>>>>>>> WSs depending on provided settings?
>>>>>>>     ;
>>>>>>> rule    :    ~WS (~NL)*
>>>>>>>     ;
>>>>>>>
>>>>>>> So the actual question is in rule "indent".
>>>>>>> If I don't know required number of matches of WS during development,
>>>>>>> how can I write grammar for that?
>>>>>>>
>>>>>>> Cheers,
>>>>>>> Dmitriy Nagirnyak.
>>>>>>>
>>>>>>>
>>>>>>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>>>>>>> Unsubscribe:
>>>>>>> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>>>>>>>
>>>>>>>
>>>>>>
>>>>>
>>>>
>>>
>>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090721/4603644e/attachment.html 

From elnur.j at gmail.com  Tue Jul 21 04:53:28 2009
From: elnur.j at gmail.com (Elnur Cabarov)
Date: Tue, 21 Jul 2009 16:53:28 +0500
Subject: [antlr-interest] Rule methods are private (CSharp3 target)
In-Reply-To: <4a64c8c3.0c02be0a.4fec.0b42SMTPIN_ADDED@mx.google.com>
References: <cb604c710907200631y194b67f8h1f9d491d4bb4f77d@mail.gmail.com> 
	<4a64c8c3.0c02be0a.4fec.0b42SMTPIN_ADDED@mx.google.com>
Message-ID: <cb604c710907210453v61bbfe60xe284c44a51bec6d4@mail.gmail.com>

Yes, it helped, thank you,
though I seem that generated code must be maximum similar between target
languages, especially between so alike Java and C#


On Tue, Jul 21, 2009 at 12:42 AM, Gavin Lambert <antlr at mirality.co.nz>wrote:

> At 01:31 21/07/2009, Elnur Cabarov wrote:
>
>> I use Antlr executable by Sam Harwell, but rule methods for CSharp3 target
>> are private, so I can't call them externally
>>
>
> Have you tried putting "public" in front of the rules you want to be
> callable?  (This doesn't make any difference to the Java target, but it's
> possible it does for CSharp3.  I haven't checked though.)
>
>


-- 
Elnur Cabarov
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090721/1305b39f/attachment.html 

From elnur.j at gmail.com  Tue Jul 21 04:59:47 2009
From: elnur.j at gmail.com (Elnur Cabarov)
Date: Tue, 21 Jul 2009 16:59:47 +0500
Subject: [antlr-interest] hidden channel constant issue
Message-ID: <cb604c710907210459k6e2205acx692d1061986eb82e@mail.gmail.com>

You are right Ben,  thanks

-- 
Elnur Cabarov
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090721/6dfc67b8/attachment.html 

From david-sarah at jacaranda.org  Tue Jul 21 07:07:01 2009
From: david-sarah at jacaranda.org (David-Sarah Hopwood)
Date: Tue, 21 Jul 2009 15:07:01 +0100
Subject: [antlr-interest] Parsing HAML - significant and insignificant
 whitespaces
In-Reply-To: <73ee720a0907210445t2624c10csfc0750f757f48879@mail.gmail.com>
References: <73ee720a0907140943v19c7ac1m3a48b4b14673e7ba@mail.gmail.com>	<1419225d0907140957m44e79982y3b796a4150d6bd8@mail.gmail.com>	<1419225d0907141002j64f652c3v6362fd5fe88b3475@mail.gmail.com>	<73ee720a0907141651s713d9da2u704896bd84aa67f3@mail.gmail.com>	<1419225d0907150246w78054eacxe62c9f051c67338e@mail.gmail.com>	<73ee720a0907200622g79f3e67m61bcff4bf5b51075@mail.gmail.com>	<1419225d0907201032i5aab083fh4a2caa3b8fff1b86@mail.gmail.com>
	<73ee720a0907210445t2624c10csfc0750f757f48879@mail.gmail.com>
Message-ID: <4A65CB85.9080807@jacaranda.org>

Dmitiry Nagirnyak wrote:
> Hi Nick,
> 
> All these things are options.
> But it seems there's no way to dynamically choose rules in ANTLR. Right?

Well, gated semantic predicates can be used to do that.
I'm not sure that really helps here, though, or would be any simpler than
Nick or Stephen's solutions.

-- 
David-Sarah Hopwood  ?  http://davidsarah.livejournal.com


From vincedupuis at hotmail.com  Tue Jul 21 08:33:57 2009
From: vincedupuis at hotmail.com (Vincent Dupuis)
Date: Tue, 21 Jul 2009 11:33:57 -0400
Subject: [antlr-interest] Help on template rewrite
Message-ID: <SNT116-W5713631AE506E2A89920B1B61A0@phx.gbl>


Hi,

I need help on how to rewrite a rule to a fill a template with a list of tokens.

The rule:

identList
    : i+=IDENT (',' i+=IDENT)*
    -> identifierList(identifiers={$i})
    ;

returns:

[@17,102:106='ident1',<4>,10:17][@19,109:112='ident2',<4>,10:24]

when using <identifiers> in a template group.

How can I do it properly?



_________________________________________________________________
Attention ? tous les Humains. Nous sommes vos photos. Lib?rez-nous de vos disques durs.
http://go.microsoft.com/?linkid=9666050
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090721/1a722251/attachment.html 

From luiscubal at gmail.com  Tue Jul 21 09:58:22 2009
From: luiscubal at gmail.com (=?UTF-8?Q?Lu=C3=ADs_Reis?=)
Date: Tue, 21 Jul 2009 17:58:22 +0100
Subject: [antlr-interest] EarlyExitException Problem
Message-ID: <c121c9b90907210958j3d1f9736s11ede48bbf473a74@mail.gmail.com>

Hello, I had a grammar written in Antlr 3 and I am getting
EarlyExitExceptions.
This grammar attempts to match things like:

"[1..3]", "[ 1 .. 3]", "[ 1 .. x ]", "[x..1]", etc.

However, when provided  "[1..3]", it exits with an EarlyExitException.
line 1:3 required (...)+ loop did not match anything at character '.'
MismatchedTokenException(5!=7)
line 1:5 mismatched input ']' expecting TO

I believe it is a problem related to float parsing. The remaining examples
are parsed properly.
How do I prevent this problem?

I managed to simplify the grammar and reduce it to the following(the
original grammar is a lot more complex since it has support for other
statements):

//GRAMMAR STARTS HERE
grammar MyGrammarName;

options{
    backtrack = true;
    output = AST;
}

tokens{
    LARRAY = '[';
    RARRAY = ']';
    DOT = '.';
    TO = '..'; //I've tried declaring TO before DOT, declaring TO as a
separate rule and several variations.
}

@header{

package javapackage;

}

@lexer::header{

package javapackage;

}

test    :    LARRAY exp TO exp RARRAY;

exp    :    WORD|constant;

constant:    INTCONST|FLOATCONST;

WORD    :    ALPHA ALPHADIGIT*;

fragment ALPHA
    :    ('a'..'z')|('A'..'Z')|'_';

fragment ALPHADIGIT
    :    ALPHA|DIGIT;

FLOATCONST
    :
        (DIGIT+ ('e'|'E') '-'? DIGIT+)
    |        (DIGIT* DOT DIGIT+ (('e'|'E') '-'? DIGIT+)?)
    ;

INTCONST:    (NONZERODIGIT DIGIT*);

fragment NONZERODIGIT
    :    '1'..'9';

fragment DIGIT
    :    '0'|NONZERODIGIT;


IGNORED    :    (WS|LINEBREAK)+
        { $channel = HIDDEN; };

fragment LINEBREAK
    :    '\u000D'
    |    '\n'
        ;

fragment WS : (' ' | '\t' | '\f')+;
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090721/c8277dc7/attachment.html 

From parrt at cs.usfca.edu  Tue Jul 21 11:07:18 2009
From: parrt at cs.usfca.edu (Terence Parr)
Date: Tue, 21 Jul 2009 11:07:18 -0700
Subject: [antlr-interest] Help on template rewrite
In-Reply-To: <SNT116-W5713631AE506E2A89920B1B61A0@phx.gbl>
References: <SNT116-W5713631AE506E2A89920B1B61A0@phx.gbl>
Message-ID: <E52EB7A4-1D5A-45A4-BBD3-0CC48558E3B0@cs.usfca.edu>

ST calls toString on the token list.

<identifiers:{ t | <t.name>}>

  is probably more what you want
T
On Jul 21, 2009, at 8:33 AM, Vincent Dupuis wrote:

> Hi,
>
> I need help on how to rewrite a rule to a fill a template with a  
> list of tokens.
>
> The rule:
>
> identList
>     : i+=IDENT (',' i+=IDENT)*
>     -> identifierList(identifiers={$i})
>     ;
>
> returns:
>
> [@17,102:106='ident1',<4>,10:17][@19,109:112='ident2',<4>,10:24]
>
> when using <identifiers> in a template group.
>
> How can I do it properly?
>
>
>
> Attention ? tous les Humains. Nous sommes vos photos. Lib?rez-nous  
> de vos disques durs.
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address


From jimi at temporal-wave.com  Tue Jul 21 11:09:20 2009
From: jimi at temporal-wave.com (Jim Idle)
Date: Tue, 21 Jul 2009 08:09:20 -1000
Subject: [antlr-interest] Help on template rewrite
In-Reply-To: <SNT116-W5713631AE506E2A89920B1B61A0@phx.gbl>
References: <SNT116-W5713631AE506E2A89920B1B61A0@phx.gbl>
Message-ID: <9340B63D-5C58-4B1D-8072-3B22EC1B406D@temporal-wave.com>

You are acumuating the tokens, which is fine but in the template you  
need <it.text>

Or create the template manually and set the formal parameter as you go.

$st = %identifierList();

Etc...

Jim

On Jul 21, 2009, at 5:33 AM, Vincent Dupuis <vincedupuis at hotmail.com>  
wrote:

> Hi,
>
> I need help on how to rewrite a rule to a fill a template with a  
> list of tokens.
>
> The rule:
>
> identList
>     : i+=IDENT (',' i+=IDENT)*
>     -> identifierList(identifiers={$i})
>     ;
>
> returns:
>
> [@17,102:106='ident1',<4>,10:17][@19,109:112='ident2',<4>,10:24]
>
> when using <identifiers> in a template group.
>
> How can I do it properly?
>
>
>
> Attention ? tous les Humains. Nous sommes vos photos. Lib?rez-nous d 
> e vos disques durs.
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090721/2f2dee2b/attachment.html 

From sharwell at pixelminegames.com  Tue Jul 21 11:30:12 2009
From: sharwell at pixelminegames.com (Sam Harwell)
Date: Tue, 21 Jul 2009 13:30:12 -0500
Subject: [antlr-interest] Rule methods are private (CSharp3 target)
In-Reply-To: <20090720194259.AC68A3418494@www.antlr.org>
References: <cb604c710907200631y194b67f8h1f9d491d4bb4f77d@mail.gmail.com>
	<20090720194259.AC68A3418494@www.antlr.org>
Message-ID: <86403CA0939415448BCCB83855EFE09AA68424@Bloodymary.ironwillgames.com>

That's correct. Unless I reverted at some point, the C# port of ANTLR
generates code for the Java target the same way (it has a very slightly
altered template). The Java version of the tool allows but ignores the
public, protected, and private rule modifiers. All I did was implement
their support. :)

Sam

-----Original Message-----
From: antlr-interest-bounces at antlr.org
[mailto:antlr-interest-bounces at antlr.org] On Behalf Of Gavin Lambert
Sent: Monday, July 20, 2009 2:43 PM
To: Elnur Cabarov; antlr-interest at antlr.org
Subject: Re: [antlr-interest] Rule methods are private (CSharp3 target)

At 01:31 21/07/2009, Elnur Cabarov wrote:
>I use Antlr executable by Sam Harwell, but rule methods for 
>CSharp3 target are private, so I can't call them externally

Have you tried putting "public" in front of the rules you want to 
be callable?  (This doesn't make any difference to the Java 
target, but it's possible it does for CSharp3.  I haven't checked 
though.)


List: http://www.antlr.org/mailman/listinfo/antlr-interest
Unsubscribe:
http://www.antlr.org/mailman/options/antlr-interest/your-email-address

From antlr at mirality.co.nz  Tue Jul 21 12:36:14 2009
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Wed, 22 Jul 2009 07:36:14 +1200
Subject: [antlr-interest] EarlyExitException Problem
In-Reply-To: <c121c9b90907210958j3d1f9736s11ede48bbf473a74@mail.gmail.co
 m>
References: <c121c9b90907210958j3d1f9736s11ede48bbf473a74@mail.gmail.com>
Message-ID: <20090721193629.BDC083418152@www.antlr.org>

At 04:58 22/07/2009, Lu??s Reis wrote:
>Hello, I had a grammar written in Antlr 3 and I 
>am getting EarlyExitExceptions.
>This grammar attempts to match things like:
>
>"[1..3]", "[ 1 .. 3]", "[ 1 .. x ]", "[x..1]", etc.
>
>However, when provided?  "[1..3]", it exits with 
>an EarlyExitException.
>line 1:3 required (...)+ loop did not match 
>anything at character '.'
>MismatchedTokenException(5!=7)
>line 1:5 mismatched input ']' expecting TO

<<http://www.antlr.org/wiki/display/ANTLR3/Lexer+grammar+for+floating+point,+dot,+range,+time+specs>http://www.antlr.org/wiki/display/ANTLR3/Lexer+grammar+for+floating+point,+dot,+range,+time+specs>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090722/08683dab/attachment.html 

From harsha.nagesh at thomsonreuters.com  Tue Jul 21 21:46:04 2009
From: harsha.nagesh at thomsonreuters.com (harsha.nagesh at thomsonreuters.com)
Date: Wed, 22 Jul 2009 10:16:04 +0530
Subject: [antlr-interest] using RandomPhrase feature
In-Reply-To: <86403CA0939415448BCCB83855EFE09AA68424@Bloodymary.ironwillgames.com>
References: <cb604c710907200631y194b67f8h1f9d491d4bb4f77d@mail.gmail.com><20090720194259.AC68A3418494@www.antlr.org>
	<86403CA0939415448BCCB83855EFE09AA68424@Bloodymary.ironwillgames.com>
Message-ID: <E741D6A94F287C419F762FF383660E4303447FAE@TFINKABANMBX12.ERF.THOMSON.COM>

I am playing with the RandomPhrase feature in antlr to generate random
phrases based on a grammar. Infact I took the Expr grammar on antlr
website to try out this feature. Firstly I had to bump up the heap size
to more than 512mb to get any output from the program. After that I did
get a few expressions generated and sometimes it simply exited without
printing anything (perhaps the expression generated just matched NEWLINE
in the Expr grammar). Sometimes it went out of memory.

I am wondering if anybody has suggestions on how to control the behavior
of this feature ? Perhaps feed our own lexical tokens to the generator
and control the length of the expression ?

Thanks
Harsha

From Arjun.Khandelwal at mastek.com  Tue Jul 21 22:13:07 2009
From: Arjun.Khandelwal at mastek.com (Arjun Khandelwal)
Date: Wed, 22 Jul 2009 10:43:07 +0530
Subject: [antlr-interest] ANTLR based content assist
Message-ID: <999154A00D558C4AB94B786ADE505380335BBDC0B5@ind-pne1mbx001.mastek.com>

Hi,
I am working on a small textual DSL which is kind of a small subset of Java in the sense it has only relational, conditional, arithmetic operations which are very much like those in Java.
I have just learnt the basics of ANTLR (skimmed thru the definitive guide. It's brilliant!!!) and wrote the basic grammar for the language. (Copied most of it from Java.g ;-))

I need to provide content assist for the editor which is one of the major reasons I decided to give ANTLR a try (we already had grammar defined in JavaCC and simple editor based on it) .I am looking up to the ANTLR generated parser for helping me with this.
Has anybody developed content assist (autocompletion) based on ANTLR? How easy or difficult would it be? Would I need to do too much tweaking with ANTLR to get this working?

I saw the FAQ entry "How to get the list of valid options for next" but couldn't make out much from it :-(. How do I get the string token or rule represented by the bitset that I get on accessing the follow stack?

How do I proceed with this?
Even a clue or pointers would certainly help.

Regards,
-Arjun.

MASTEK LTD.
Making a valuable difference
Mastek in NASSCOM's 'India Top 20' Software Service Exporters List.
In the US, we're called MAJESCOMASTEK

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Opinions expressed in this e-mail are those of the individual and not that of Mastek Limited, unless specifically indicated to that effect. Mastek Limited does not accept any responsibility or liability for it. This e-mail and attachments (if any) transmitted with it are confidential and/or privileged and solely for the use of the intended person or entity to which it is addressed. Any review, re-transmission, dissemination or other use of or taking of any action in reliance upon this information by persons or entities other than the intended recipient is prohibited. This e-mail and its attachments have been scanned for the presence of computer viruses. It is the responsibility of the recipient to run the virus check on e-mails and attachments before opening them. If you have received this e-mail in error, kindly delete this e-mail from desktop and server.
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090722/6fb0b085/attachment.html 

From oehrstroem at gmail.com  Wed Jul 22 03:06:31 2009
From: oehrstroem at gmail.com (Fredrik Ohrstrom)
Date: Wed, 22 Jul 2009 12:06:31 +0200
Subject: [antlr-interest] Help with discarding lexer tokens....
Message-ID: <8d80b1570907220306o48703310va41abd10eafdc866@mail.gmail.com>

I would like to ignore certain tokens found at the lexer level.
For example: my example source code is sprinkled with tokens
like [remove] and I want to prevent these to be seen by the parser.

This could easily be done with sed, but this is not an options since
I use TokenRewriteStream to reconstruct the full source with
modifications and the [remove] tokens must be there.

Unfortunately there is a lookahead conflict with other valid
sequences like [ret] and the following grammar does not work:

grammar Test;
cmd :  (CMD suffix? )* ;
suffix : '[' CMD ']'  ;
CMD : 'a'..'z'+ 	;
DISCARD : '[remove]' { $channel=HIDDEN; } ;
WS : (' '|'\t'|'\r'|'\n')+ { $channel=HIDDEN; } ;

Fire it up in antlrworks or use antlr-3.1.3 standalone with the Java
program supplied
at the end of the email. Try to parse:

alfa[x] beta[remove] gamma[ret]

[x] is properly parsed. [remove] is properly lexed and discarded.
But [ret] causes the lexer to enter DISCARD and fail. I have tried
k=4, syntactic predicates, semantic predicates to no avail.

Also, the failed lex messes up the token rewrite stream
so that it does not reconstruct the original stream as
[re is simply dropped, which results in broken source.

I did finally stumble upon a solution, but it is ugly.

grammar Test;
cmd	:  (CMD suffix? )* ;
suffix : LB CMD RB ;
CMD :	'a'..'z'+ ;
LB
    : '[' { if (input.LA(1)=='r' &&
                input.LA(2)=='e' &&
                input.LA(3)=='m' &&
                input.LA(4)=='o' &&
                input.LA(5)=='v' &&
                input.LA(6)=='e' &&
                input.LA(7)==']') {
                   match("remove]");
                   $channel=HIDDEN;
               }
          }
    ;
RB : ']' ;
WS :   (' '|'\t'|'\r'|'\n')+ { $channel=HIDDEN; } ;

Is there a correct way to do it?

Thanks!

Fredrik ?hrstr?m

----------------------------------------------

import java.io.*;
import org.antlr.runtime.*;

public class Test
{
   public static void main(String... args)
   {
      try {
         StringBuffer b = new StringBuffer();
         String line = null;
         BufferedReader input = new BufferedReader(new FileReader(args[0]));
         for (;;) {
            line = input.readLine();
            if (line==null) break;
            b.append(line);
         }
         String d = b.toString();
         System.out.println("Parsing\n>"+d+"<\n");
         CharStream cs = new ANTLRStringStream(d);
         TestLexer lexer = new TestLexer(cs);
         TokenRewriteStream rew = new TokenRewriteStream(lexer);
         TestParser parser = new TestParser(rew);
         parser.cmd();

         System.out.println("Done parsing\n>"+rew.toString()+"<\n");
      } catch (Exception e) {
         e.printStackTrace();
      }
   }
}

From williamstw at gmail.com  Wed Jul 22 08:06:48 2009
From: williamstw at gmail.com (Tim Williams)
Date: Wed, 22 Jul 2009 11:06:48 -0400
Subject: [antlr-interest] wildcard string in grammar
Message-ID: <499888440907220806t5f059a2bi9a3e29682e23b2e9@mail.gmail.com>

I need to support wild cards of the form:

a) a*pp?e
b) *pple
c) a?p*
d) appl?

I've worked it out to be:

WILD_STRING: (('a'..'z'|'A'..'Z')* ('*'|'?') ('a'..'z'|'A'..'Z')*)+

This generates the warning "Decision can match input
('a'..'z'|'A'..'Z') using multiple alternatives 1,2 disabling
alternative(s) 2."  When compiled, it seems to "work" even with the
warning.  I *think* I understand that the ambiguity arises from the
fact that after ('*'|'?') has matched, either one of the char patterns
might be selected.  With all my test input it appears to work fine.
I'm wondering if there's an unambiguous way to encode such a pattern
though?

Thanks,
--tim

From thikone at gmail.com  Wed Jul 22 08:56:52 2009
From: thikone at gmail.com (Andrew Haritonkin)
Date: Wed, 22 Jul 2009 17:56:52 +0200
Subject: [antlr-interest] Language Design Patterns and incremental parsing
Message-ID: <a382aa010907220856y19b91b64i1c712921b6b8c07@mail.gmail.com>

Hello Ter,

Language Design Patterns is very nice book, even in beta version. I
love it - just what I needed after ANTLR  book... Thank you for that.

I remember there was a talk about incremental parsing option for ANTLR
3. It started with Prashant Deva when he implemented it for his ANTLR
Studio plug-in for Eclipse. In his blog he said that it was planned
for ANTLR 3 release, then for ANTLR 3.1. And you mentioned it once
here that you plan to write a paper with Prashant about incremental
top-down parsing. But I couldn't find any news about that.

There is not much information could be found about incremental parsing
and most of them (or all of them), are related to LR parser. It seems
like it's not very known topic. Or maybe it's not needed so much? On
the other hand, Language Design Patterns is mostly about LL parser.
And I think discussing this topic in this book for LL parser would add
a great value to it.

Of course, there is always something more to ask and you never can
have it all... right?

Any comments? Can you share your opinion about this topic and how
important it is?

Thank you,
Andrew

From stefika at gmail.com  Wed Jul 22 09:59:54 2009
From: stefika at gmail.com (Andreas Stefik)
Date: Wed, 22 Jul 2009 09:59:54 -0700
Subject: [antlr-interest] Language Design Patterns and incremental
	parsing
In-Reply-To: <1332b72e0907220959u2a6d200dka484d039e7fe6584@mail.gmail.com>
References: <a382aa010907220856y19b91b64i1c712921b6b8c07@mail.gmail.com>
	<1332b72e0907220959u2a6d200dka484d039e7fe6584@mail.gmail.com>
Message-ID: <1332b72e0907220959l3e6ab920icb7cab1462b635f1@mail.gmail.com>

Andrew,

So far as I understand it, where incremental parsing comes in really handy
is when you have something continually reparsing a file. In my case, I use
ANTLR to parse a custom programming language, which is then integrated into
the NetBeans platform. The NetBeans parser, by default, continually reparses
the source as the user types to try and determine whether there are errors
in what the user is typing. It then generates visual feedback on the fly
(e.g., little red squiggly lines), depending upon if there are errors.

In practice, even with a non-incremental parser, this generally works fine
for 1 file (the user can only type in one at a time), but since everything
is done in real time, you want to the minimum amount of computation done
while the user is typing so that the visual (and in my case, aural, since my
language is for blind children), feedback to be as fluid and consistent as
possible. Since ANTLR is not incremental, I currently have NetBeans wipe the
build information for the file every time it requests a re-parse (which
happens often!!), and then ask ANTLR to do it from scratch. It would be nice
though, if ANTLR could only update the pieces of code the user was typing
in, as it would, in theory at least, be much faster.

In my case though, there are a few things I'm not sure how I would handle
yet if ANTLR were incremental.

1. How would the different phases of my VM interact (e.g., would the tree
walker also incrementally change?)

2. Would I be able to figure out how to modify my post-ANTLR compiler phases
if ANTLR were incremental?

I'm sure there are solutions to questions like these, and I highly support
incremental parsing for ANTLR, if it's feasible, but so far as I understand
it, it's a pretty tricky technology.

Andreas
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090722/ecd7c3a6/attachment.html 

From parrt at cs.usfca.edu  Wed Jul 22 12:28:41 2009
From: parrt at cs.usfca.edu (Terence Parr)
Date: Wed, 22 Jul 2009 12:28:41 -0700
Subject: [antlr-interest] using RandomPhrase feature
In-Reply-To: <E741D6A94F287C419F762FF383660E4303447FAE@TFINKABANMBX12.ERF.THOMSON.COM>
References: <cb604c710907200631y194b67f8h1f9d491d4bb4f77d@mail.gmail.com><20090720194259.AC68A3418494@www.antlr.org>
	<86403CA0939415448BCCB83855EFE09AA68424@Bloodymary.ironwillgames.com>
	<E741D6A94F287C419F762FF383660E4303447FAE@TFINKABANMBX12.ERF.THOMSON.COM>
Message-ID: <01861B91-9ECE-436C-8DF0-F27822C93317@cs.usfca.edu>


On Jul 21, 2009, at 9:46 PM, <harsha.nagesh at thomsonreuters.com> <harsha.nagesh at thomsonreuters.com 
 > wrote:

> I am playing with the RandomPhrase feature in antlr to generate random
> phrases based on a grammar. Infact I took the Expr grammar on antlr
> website to try out this feature. Firstly I had to bump up the heap  
> size
> to more than 512mb to get any output from the program. After that I  
> did
> get a few expressions generated and sometimes it simply exited without
> printing anything (perhaps the expression generated just matched  
> NEWLINE
> in the Expr grammar). Sometimes it went out of memory.

It is only a prototype. Unfortunately, it uses the stack to dig down  
deeper into the state machine. This will only work for so long of a  
string before it explodes stack. :(

Ter
>
> I am wondering if anybody has suggestions on how to control the  
> behavior
> of this feature ? Perhaps feed our own lexical tokens to the generator
> and control the length of the expression ?
>
> Thanks
> Harsha
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address


From parrt at cs.usfca.edu  Wed Jul 22 12:31:20 2009
From: parrt at cs.usfca.edu (Terence Parr)
Date: Wed, 22 Jul 2009 12:31:20 -0700
Subject: [antlr-interest] Language Design Patterns and incremental
	parsing
In-Reply-To: <a382aa010907220856y19b91b64i1c712921b6b8c07@mail.gmail.com>
References: <a382aa010907220856y19b91b64i1c712921b6b8c07@mail.gmail.com>
Message-ID: <E39C6614-D754-43C2-AC6F-2119195CC33A@cs.usfca.edu>

hi Andrew,

Well, Prashant and I have been discussing this for years now. After  
talking to the netbeans and javafx teams as well, I've come to the  
conclusion it's not the best use of my time. It's a really hard  
problem (and least the lexer is; parser is easy incrementally) and  
computers are fast enough now that is just not worth me going crazy  
over it.  Sorry to say...you should be fine though; we're talking  
about an O(n) process fortunately.

  glad you like the LDP book!
Ter
On Jul 22, 2009, at 8:56 AM, Andrew Haritonkin wrote:

> Hello Ter,
>
> Language Design Patterns is very nice book, even in beta version. I
> love it - just what I needed after ANTLR  book... Thank you for that.
>
> I remember there was a talk about incremental parsing option for ANTLR
> 3. It started with Prashant Deva when he implemented it for his ANTLR
> Studio plug-in for Eclipse. In his blog he said that it was planned
> for ANTLR 3 release, then for ANTLR 3.1. And you mentioned it once
> here that you plan to write a paper with Prashant about incremental
> top-down parsing. But I couldn't find any news about that.
>
> There is not much information could be found about incremental parsing
> and most of them (or all of them), are related to LR parser. It seems
> like it's not very known topic. Or maybe it's not needed so much? On
> the other hand, Language Design Patterns is mostly about LL parser.
> And I think discussing this topic in this book for LL parser would add
> a great value to it.
>
> Of course, there is always something more to ask and you never can
> have it all... right?
>
> Any comments? Can you share your opinion about this topic and how
> important it is?
>
> Thank you,
> Andrew
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address


From antlr at mirality.co.nz  Wed Jul 22 12:58:15 2009
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Thu, 23 Jul 2009 07:58:15 +1200
Subject: [antlr-interest] wildcard string in grammar
In-Reply-To: <499888440907220806t5f059a2bi9a3e29682e23b2e9@mail.gmail.co
 m>
References: <499888440907220806t5f059a2bi9a3e29682e23b2e9@mail.gmail.com>
Message-ID: <20090722195846.CE0B03418151@www.antlr.org>

At 03:06 23/07/2009, Tim Williams wrote:
 >WILD_STRING: (('a'..'z'|'A'..'Z')* ('*'|'?')
 >('a'..'z'|'A'..'Z')*)+
 >
 >This generates the warning "Decision can match input
 >('a'..'z'|'A'..'Z') using multiple alternatives 1,2 disabling
 >alternative(s) 2."

WILD_STRING
   : ('a'..'z'|'A'..'Z')*
     (
       ('*'|'?')
       ('a'..'z'|'A'..'Z')*
     )+
   ;

This might end up being ambiguous with an ID-style rule, though, 
since the lexer doesn't always look far enough ahead to deal with 
distinguishing characters after loops.


From asalh at mindspring.com  Wed Jul 22 17:27:04 2009
From: asalh at mindspring.com (Bryan S Follins)
Date: Wed, 22 Jul 2009 17:27:04 -0700
Subject: [antlr-interest] A question on Mr. Parr's book--Page 45
In-Reply-To: <002801ca08b7$be2eb590$3a8c20b0$@com>
References: <440de1810907191004j3f9669d1jb81955dae82fe568@mail.gmail.com>	<18BE06D6-005F-40D0-A0FF-BA3A4729443F@temporal-wave.com>	<440de1810907191102m379d85ecvebbf43b809f632b5@mail.gmail.com>	<1248027721.17182.9.camel@gecko.home.org>	<440de1810907191143g4d7ff79drb3fc6127fc3e9fbe@mail.gmail.com>	<000901ca08a4$8a073f70$9e15be50$@com>	<560773.81135.qm@web65610.mail.ac4.yahoo.com>
	<002801ca08b7$be2eb590$3a8c20b0$@com>
Message-ID: <000d01ca0b2c$4db67470$e9235d50$@com>

Chap 3, page 45:

There is a snippet of code that reads:

prog:	stat+

stat:	expr NEWLINE
    |	ID '=' expr NEWLINE
    | NEWLINE
    ; 

If I attempt to make a small grammar to test this, like the following:

Grammar P;

prog:	stat+

stat:	expr NEWLINE
    |	ID '=' expr NEWLINE
    | NEWLINE
    ; 

Will the grammar work in ANTLR Works?  When I try, I get "reference to
undefined rule: expr."  How do I
correct that error?


From parrt at cs.usfca.edu  Wed Jul 22 17:28:20 2009
From: parrt at cs.usfca.edu (Terence Parr)
Date: Wed, 22 Jul 2009 17:28:20 -0700
Subject: [antlr-interest] A question on Mr. Parr's book--Page 45
In-Reply-To: <000d01ca0b2c$4db67470$e9235d50$@com>
References: <440de1810907191004j3f9669d1jb81955dae82fe568@mail.gmail.com>	<18BE06D6-005F-40D0-A0FF-BA3A4729443F@temporal-wave.com>	<440de1810907191102m379d85ecvebbf43b809f632b5@mail.gmail.com>	<1248027721.17182.9.camel@gecko.home.org>	<440de1810907191143g4d7ff79drb3fc6127fc3e9fbe@mail.gmail.com>	<000901ca08a4$8a073f70$9e15be50$@com>	<560773.81135.qm@web65610.mail.ac4.yahoo.com>
	<002801ca08b7$be2eb590$3a8c20b0$@com>
	<000d01ca0b2c$4db67470$e9235d50$@com>
Message-ID: <2D465F1E-2BA7-49F4-822F-2F67E01758EE@cs.usfca.edu>

Hi Bryan, you need to define rule expr. :)
Ter
On Jul 22, 2009, at 5:27 PM, Bryan S Follins wrote:

> Chap 3, page 45:
>
> There is a snippet of code that reads:
>
> prog:	stat+
>
> stat:	expr NEWLINE
>    |	ID '=' expr NEWLINE
>    | NEWLINE
>    ;
>
> If I attempt to make a small grammar to test this, like the following:
>
> Grammar P;
>
> prog:	stat+
>
> stat:	expr NEWLINE
>    |	ID '=' expr NEWLINE
>    | NEWLINE
>    ;
>
> Will the grammar work in ANTLR Works?  When I try, I get "reference to
> undefined rule: expr."  How do I
> correct that error?
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address


From sokorac at gmail.com  Wed Jul 22 17:34:14 2009
From: sokorac at gmail.com (Stanislav Sokorac)
Date: Wed, 22 Jul 2009 20:34:14 -0400
Subject: [antlr-interest] Help with discarding lexer tokens....
In-Reply-To: <8d80b1570907220306o48703310va41abd10eafdc866@mail.gmail.com>
References: <8d80b1570907220306o48703310va41abd10eafdc866@mail.gmail.com>
Message-ID: <f6be20450907221734n389c0641v61ef8b5128522f7e@mail.gmail.com>

The way I'd do is to first make suffix a lexer rule, and then move it down
below the DISCARD rule so that it can still match:

grammar Test;
cmd :  (CMD SUFFIX? )* ;
CMD : 'a'..'z'+         ;
DISCARD : '[remove]' { $channel=HIDDEN; } ;
SUFFIX : '[' CMD ']'  ;
WS : (' '|'\t'|'\r'|'\n')+ { $channel=HIDDEN; } ;

This works for your example.

Stan

On Wed, Jul 22, 2009 at 6:06 AM, Fredrik Ohrstrom <oehrstroem at gmail.com>wrote:

> I would like to ignore certain tokens found at the lexer level.
> For example: my example source code is sprinkled with tokens
> like [remove] and I want to prevent these to be seen by the parser.
>
> This could easily be done with sed, but this is not an options since
> I use TokenRewriteStream to reconstruct the full source with
> modifications and the [remove] tokens must be there.
>
> Unfortunately there is a lookahead conflict with other valid
> sequences like [ret] and the following grammar does not work:
>
> grammar Test;
> cmd :  (CMD suffix? )* ;
> suffix : '[' CMD ']'  ;
> CMD : 'a'..'z'+         ;
> DISCARD : '[remove]' { $channel=HIDDEN; } ;
> WS : (' '|'\t'|'\r'|'\n')+ { $channel=HIDDEN; } ;
>
> Fire it up in antlrworks or use antlr-3.1.3 standalone with the Java
> program supplied
> at the end of the email. Try to parse:
>
> alfa[x] beta[remove] gamma[ret]
>
> [x] is properly parsed. [remove] is properly lexed and discarded.
> But [ret] causes the lexer to enter DISCARD and fail. I have tried
> k=4, syntactic predicates, semantic predicates to no avail.
>
> Also, the failed lex messes up the token rewrite stream
> so that it does not reconstruct the original stream as
> [re is simply dropped, which results in broken source.
>
> I did finally stumble upon a solution, but it is ugly.
>
> grammar Test;
> cmd     :  (CMD suffix? )* ;
> suffix : LB CMD RB ;
> CMD :   'a'..'z'+ ;
> LB
>    : '[' { if (input.LA(1)=='r' &&
>                input.LA(2)=='e' &&
>                input.LA(3)=='m' &&
>                input.LA(4)=='o' &&
>                input.LA(5)=='v' &&
>                input.LA(6)=='e' &&
>                input.LA(7)==']') {
>                   match("remove]");
>                   $channel=HIDDEN;
>               }
>          }
>    ;
> RB : ']' ;
> WS :   (' '|'\t'|'\r'|'\n')+ { $channel=HIDDEN; } ;
>
> Is there a correct way to do it?
>
> Thanks!
>
> Fredrik ?hrstr?m
>
> ----------------------------------------------
>
> import java.io.*;
> import org.antlr.runtime.*;
>
> public class Test
> {
>   public static void main(String... args)
>   {
>      try {
>         StringBuffer b = new StringBuffer();
>         String line = null;
>         BufferedReader input = new BufferedReader(new FileReader(args[0]));
>         for (;;) {
>            line = input.readLine();
>            if (line==null) break;
>            b.append(line);
>         }
>         String d = b.toString();
>         System.out.println("Parsing\n>"+d+"<\n");
>         CharStream cs = new ANTLRStringStream(d);
>         TestLexer lexer = new TestLexer(cs);
>         TokenRewriteStream rew = new TokenRewriteStream(lexer);
>         TestParser parser = new TestParser(rew);
>         parser.cmd();
>
>         System.out.println("Done parsing\n>"+rew.toString()+"<\n");
>      } catch (Exception e) {
>         e.printStackTrace();
>      }
>   }
> }
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090722/ae02d24b/attachment.html 

From sokorac at gmail.com  Wed Jul 22 17:38:31 2009
From: sokorac at gmail.com (Stanislav Sokorac)
Date: Wed, 22 Jul 2009 20:38:31 -0400
Subject: [antlr-interest] Better recovery from a mismatched token desired
In-Reply-To: <97AAFA73-5487-40C0-AB5C-93476F3F2A41@temporal-wave.com>
References: <f6be20450907171428g568e9e4bm8ee8bbc40a255952@mail.gmail.com>
	<97AAFA73-5487-40C0-AB5C-93476F3F2A41@temporal-wave.com>
Message-ID: <f6be20450907221738n19f912f1uef8690c94442807b@mail.gmail.com>

Thanks, Jim. I looked at the JavaFX grammar, and I like how they did that.
It's a neat way to achieve what I'm trying to do.

I'm not sure I understand option A, though. Since 'end' needs to be at the
end of the program, it will almost always be in the follow set after a
semi-colon. What kind of jiggering could I do to avoid that?

Stan

On Fri, Jul 17, 2009 at 11:36 PM, Jim Idle <jimi at temporal-wave.com> wrote:

> You need to either:
>
> A) carefully rejiggering your grammar so that the follow set does not end
> up being END
>
> B) create an empty rule with an @init that consumes to the followset and so
> resyncs tobwhat you want because the followset of the empty rulemis the
> first set of your loop element. Look at the JavaFX compiler for an example
> that is easy enough to follow.
>
> Jim
>
>
> On Jul 17, 2009, at 11:28 AM, Stanislav Sokorac <sokorac at gmail.com> wrote:
>
>  I have a simple grammar (pasted below) for a language that allows two
>> types of statements: let or int, where int declares a variable, and let
>> assigns to it. A "program" is a collection of these statements wrapped in
>> begin/end tokens.
>>
>> My problems is that when ANTLR encounters a token other than 'int' or
>> 'let' as the first word of the statement, it pops out of its statement loop
>> and reports a token mismatch -- "mismatch input 'something' expecting
>> 'end'", and then proceeds to consume all tokens until 'end'. All statements
>> subsequent to the mismatched one are not parsed, and I would like to have
>> the rest of the file analyzed.
>>
>> It seems that even if I override the recovery method and consume up to a
>> semicolon, it'll try to match up the next token with 'end' and fail again,
>> as it's no longer even looking for statements. How do I keep the parser
>> inside the statement loop when it detects a mismatched token?
>>
>> Here's my sample input:
>>
>> begin
>> int a;
>> let a=3;
>> double c;
>> let c =4;
>> end
>>
>> (I'd like to see let c=4; parsed, even though 'double c;' is an invalid
>> statement)
>>
>> Here's my simple grammar:
>>
>> grammar test;
>>
>> program    :    'begin' statement* 'end' EOF;
>> statement    :    'let' ID '=' NUMBER ';' | 'int' ID ';';
>>
>> NUMBER    :    ('0'..'9')+;
>> ID  :    ('a'..'z'|'A'..'Z'|'_') ('a'..'z'|'A'..'Z'|'0'..'9'|'_')*;
>> WS  :   ( ' ' | '\t' | '\r' | '\n') {$channel=HIDDEN;};
>>
>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>> Unsubscribe:
>> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090722/36a16280/attachment.html 

From david-sarah at jacaranda.org  Wed Jul 22 20:42:30 2009
From: david-sarah at jacaranda.org (David-Sarah Hopwood)
Date: Thu, 23 Jul 2009 04:42:30 +0100
Subject: [antlr-interest] Help with discarding lexer tokens....
In-Reply-To: <8d80b1570907220306o48703310va41abd10eafdc866@mail.gmail.com>
References: <8d80b1570907220306o48703310va41abd10eafdc866@mail.gmail.com>
Message-ID: <4A67DC26.5070606@jacaranda.org>

Fredrik Ohrstrom wrote:
> I would like to ignore certain tokens found at the lexer level.
> For example: my example source code is sprinkled with tokens
> like [remove] and I want to prevent these to be seen by the parser.
[...]
> I did finally stumble upon a solution, but it is ugly.
> 
> grammar Test;
> cmd	:  (CMD suffix? )* ;
> suffix : LB CMD RB ;

  suffix : LB c=CMD RB
    { if ($c != null && $c.text.equals("remove")) $channel = HIDDEN; } ;

> CMD :	'a'..'z'+ ;

  LB : '[' ;

> RB : ']' ;
> WS :   (' '|'\t'|'\r'|'\n')+ { $channel=HIDDEN; } ;

-- 
David-Sarah Hopwood  ?  http://davidsarah.livejournal.com


From asalh at mindspring.com  Wed Jul 22 21:29:28 2009
From: asalh at mindspring.com (Bryan S Follins)
Date: Wed, 22 Jul 2009 21:29:28 -0700
Subject: [antlr-interest] Invalid char literal
Message-ID: <003a01ca0b4e$2ad3aaf0$807b00d0$@com>

Does anyone know what the error "syntax error: invalid char literal" means?

 

"When you have eliminated the impossible, whatever remains, however
improbable, must be the truth."

--Sherlock Holmes from Sir Arthur Conan Doyle's The Sign of Four.

 

I AM an information warrior...

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090722/bdbceb8d/attachment.html 

From krsnapraveen4 at gmail.com  Thu Jul 23 00:03:03 2009
From: krsnapraveen4 at gmail.com (Krishna Praveen M. R.)
Date: Thu, 23 Jul 2009 00:03:03 -0700
Subject: [antlr-interest] Antlr NetBeans support!
In-Reply-To: <mailman.12669.1248327121.3218.antlr-interest@antlr.org>
References: <mailman.12669.1248327121.3218.antlr-interest@antlr.org>
Message-ID: <532996ed0907230003g7c5f8999q8d46c378dd6e8125@mail.gmail.com>

Hello Everyone:

I am an Electrical Engineer but I need to ANTLR for my project, developing
an algorithm, I have discovered that it a wonderful tool!
I need ANTLR support in NetBeans to materialize this algorithm.

I followed the instructions given on this page (to the T) :

http://www.antlr.org/wiki/display/ANTLR3/Integration+with+Development+Environments#IntegrationwithDevelopmentEnvironments-InstallandAddSupporttoProject

by I am getting errors in the build.xml :

My build.xml looks like this:
-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
<?xml version="1.0" encoding="UTF-8"?>
<!-- You may freely edit this file. See commented blocks below for -->
<!-- some examples of how to customize the build. -->
<!-- (If you delete it and reopen the project it will be recreated.) -->
<!-- By default, only the Clean and Build commands use this build script.
-->
<!-- Commands such as Run, Debug, and Test only use this build script if -->
<!-- the Compile on Save feature is turned off for the project. -->
<!-- You can turn off the Compile on Save (or Deploy on Save) setting -->
<!-- in the project's Project Properties dialog box.-->
<project name="MyAntlrProject" default="default" basedir=".">
    <description>Builds, tests, and runs the project
MyAntlrProject.</description>
    <import file="nbproject/build-impl.xml"/>
    <!--

    There exist several targets which are by default empty and which can be
    used for execution of your tasks. These targets are usually executed
    before and after some main targets. They are:

      -pre-init:                 called before initialization of project
properties
      -post-init:                called after initialization of project
properties
      -pre-compile:              called before javac compilation
      -post-compile:             called after javac compilation
      -pre-compile-single:       called before javac compilation of single
file
      -post-compile-single:      called after javac compilation of single
file
      -pre-compile-test:         called before javac compilation of JUnit
tests
      -post-compile-test:        called after javac compilation of JUnit
tests
      -pre-compile-test-single:  called before javac compilation of single
JUnit test
      -post-compile-test-single: called after javac compilation of single
JUunit test
      -pre-jar:                  called before JAR building
      -post-jar:                 called after JAR building
      -post-clean:               called after cleaning build products

    (Targets beginning with '-' are not intended to be called on their own.)

    Example of inserting an obfuscator after compilation could look like
this:

        <target name="-post-compile">
            <obfuscate>
                <fileset dir="${build.classes.dir}"/>
            </obfuscate>
        </target>

    For list of available properties check the imported
    nbproject/build-impl.xml file.


    Another way to customize the build is by overriding existing main
targets.
    The targets of interest are:

      -init-macrodef-javac:     defines macro for javac compilation
      -init-macrodef-junit:     defines macro for junit execution
      -init-macrodef-debug:     defines macro for class debugging
      -init-macrodef-java:      defines macro for class execution
      -do-jar-with-manifest:    JAR building (if you are using a manifest)
      -do-jar-without-manifest: JAR building (if you are not using a
manifest)
      run:                      execution of project
      -javadoc-build:           Javadoc generation
      test-report:              JUnit report generation

    An example of overriding the target for project execution could look
like this:

        <target name="run" depends="MyAntlrProject-impl.jar">
            <exec dir="bin" executable="launcher.exe">
                <arg file="${dist.jar}"/>
            </exec>
        </target>

    Notice that the overridden target depends on the jar target and not only
on
    the compile target as the regular run target does. Again, for a list of
available
    properties which you can use, check the target you are overriding in the
    nbproject/build-impl.xml file.

    -->
    <property name="antlr.libdir" location="D:\antlr-3.1.2\antlr-3.1.2\lib"
/>
    <property name="antlr.tooldir" location="D:\antlr-3.1.2\antlr-3.1.2\lib"
/>
    <property name="antlr.runtimedir"
location="D:\antlr-3.1.2\antlr-3.1.2\lib" />


    <patternset id="antlr.libs">
        <include name="stringtemplate-3.1.jar" />
        <include name="antlr277.jar" />
    </patternset>

    <patternset id="antlr.tool">
        <include name="antlr-3.1.2.jar" />
    </patternset>

    <patternset id="antlr.runtime">
        <include name="antlr-runtime-3.1.2.jar" />
    </patternset>

    <path id="antlr.path">
        <fileset dir="${antlr.tooldir}" casesensitive="yes">
            <patternset refid="antlr.tool" />
        </fileset>

        <fileset dir="${antlr.runtimedir}" casesensitive="yes">
            <patternset refid="antlr.runtime" />
        </fileset>

        <fileset dir="${antlr.libdir}" casesensitive="yes">
            <patternset refid="antlr.libs" />
        </fileset>
    </path>


    <target name="-pre-init">
        <taskdef resource="net/sf/antcontrib/antlib.xml"/>
    </target>


    <target name="-post-clean">
        <fileset id="antlr.grammars" dir="${src.dir}" includes="**/*.g"/>

        <pathconvert property="antlr.clean.files" pathsep=','
refid="antlr.grammars">
            <compositemapper>
                <globmapper
from="${basedir}${file.separator}${src.dir}${file.separator}*.g"
                    to="*.tokens"/>
                <globmapper
from="${basedir}${file.separator}${src.dir}${file.separator}*.g"
                    to="*Parser.java"/>
                <globmapper
from="${basedir}${file.separator}${src.dir}${file.separator}*.g"
                    to="*Lexer.java"/>
                <chainedmapper>
                    <globmapper
from="${basedir}${file.separator}${src.dir}${file.separator}*.g"
                        to="*.g"/>
                    <compositemapper>
                        <regexpmapper from="(([^/]*/)*).*\.g"
                            to="\1__Test__.java" handledirsep="true"/>
                        <regexpmapper from="(([^/]*/)*).*\.g"
                            to="\1__Test___input.txt" handledirsep="true"/>
                    </compositemapper>
                </chainedmapper>
            </compositemapper>
        </pathconvert>
        <pathconvert property="antlr.clean.dirs" pathsep=','
refid="antlr.grammars">
            <chainedmapper>
                <globmapper
from="${basedir}${file.separator}${src.dir}${file.separator}*.g"
                    to="*.g"/>
                <compositemapper>
                    <regexpmapper from="(([^/]*/)*).*\.g"
                        to="\1classes/**/*" handledirsep="true"/>
                    <regexpmapper from="(([^/]*/)*).*\.g"
                        to="\1classes" handledirsep="true"/>
                </compositemapper>
            </chainedmapper>
        </pathconvert>

        <if>
            <not>
                <equals arg1="${antlr.clean.files}" arg2=""/>
            </not>
            <then>
                <echo level="info">Cleaning ANTLR- and ANTLRWorks-generated
files (if any exist):${line.separator}</echo>
                <delete quiet="true" verbose="true">
                    <FileSet dir="${src.dir}"
includes="${antlr.clean.files}" excludes="${src.dir}"/>
                </delete>
            </then>
        </if>
        <if>
            <not>
                <equals arg1="${antlr.clean.dirs}" arg2=""/>
            </not>
            <then>
                <echo level="info">Cleaning ANTLRWorks-generated directories
(if any exist):${line.separator}</echo>
                <delete quiet="true" verbose="true" includeemptydirs="true">
                    <FileSet dir="${src.dir}" includes="${antlr.clean.dirs}"
excludes="${src.dir}"/>
                </delete>
            </then>
        </if>
    </target>


    <target name="-pre-compile-single">
        <basename property="javac.includes.base" file="${javac.includes}"/>
        <if>
            <equals arg1="${javac.includes.base}" arg2="*"/>
            <then>
                <for param="antlr.target">
                    <path>
                        <fileset dir="${src.dir}"
includes="${javac.includes}.g"/>
                    </path>
                    <sequential>
                        <antlr:antlr3
xmlns:antlr="antlib:org/apache/tools/ant/antlr"
                            target="@{antlr.target}">
                            <classpath>
                                <path refid="antlr.path" />
                            </classpath>
                        </antlr:antlr3>
                    </sequential>
                </for>
            </then>
        </if>
    </target>


    <target name="-pre-compile">
        <for param="antlr.target">
            <path>
                <fileset dir="${src.dir}" includes="**/*.g"/>
            </path>
            <sequential>
                <antlr:antlr3
xmlns:antlr="antlib:org/apache/tools/ant/antlr"
                    target="@{antlr.target}">
                    <classpath>
                        <path refid="antlr.path" />
                    </classpath>
                </antlr:antlr3>
            </sequential>
        </for>
    </target>


</project>
-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

The errors that I am getting are:

Could not load definitions from resource net/sf/antcontrib/antlib.xml. It
could not be found.
init:
deps-clean:
C:\Users\Krishna
Praveen\Documents\NetBeansProjects\MyAntlrProject\build.xml:148: Problem:
failed to create task or type if
Cause: The name is undefined.
Action: Check the spelling.
Action: Check that any custom tasks/types have been declared.
Action: Check that any <presetdef>/<macrodef> declarations have taken place.
BUILD FAILED (total time: 0 seconds)
-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

I also tried following what was given here:

http://wiki.netbeans.org/AntlrInNetBeansJavaApplication

I don't get any errors but the .java files not are created, it simply makes
a JAR file.

I really appreciate any help!!

Thank You.
Krishna!
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090723/e2c677e0/attachment.html 

From nikolaz at ukr.net  Thu Jul 23 01:37:11 2009
From: nikolaz at ukr.net (nikolaz at ukr.net)
Date: Thu, 23 Jul 2009 11:37:11 +0300
Subject: [antlr-interest] gUnit-to-jUnit and gUnit-maven problem. Correct
	tests throws exceptions after translation to jUnit
Message-ID: <E1MTtnb-000CMD-LL@ffe1.ukr.net>

Good afternoon!  
  
There is a problem with gUnit-to-jUnit code generation. Some generated tests breaks with exception. (The same problem is when gUnit is executed through maven)  
  
There is a simple example in attachments.  
It consists of grammar and gUnit test. When test is executed by internal gUnit interpreter it runs fine. When test is converted to jUnit test or executed by maven, some tests breaks with InvalidInputException.  
This problem is encounted only with some texts when input is wrong and "fail" result is expected, like this:  
  
//------------------- supertypes  
supertypes:  
"> NS3:P at ar entType1, ns:parentype2" FAIL  
  
  
In example archive there are two folders:  
'maven' - is a Maven2 project showing test error;  
'manual' - is a folder with the same grammar and gUnit test with readme how to manualy run test by gUnit interpreter. In this case tests are passed fine.  
____________________________  
WBR, Nikolay Zamosenchuk
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090723/aa407f69/attachment.html 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/zip
Size: 6066 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20090723/aa407f69/attachment.zip 

From gustaf.j at gmail.com  Thu Jul 23 02:19:50 2009
From: gustaf.j at gmail.com (Gustaf Johansson)
Date: Thu, 23 Jul 2009 11:19:50 +0200
Subject: [antlr-interest] Get code in constructor (Java target)
In-Reply-To: <4A581F18.8000106@jacaranda.org>
References: <5f59a7210907100137i37bd4a23ia3fde13c3aa97bf4@mail.gmail.com>
	<4A581F18.8000106@jacaranda.org>
Message-ID: <5f59a7210907230219j5f1a3495w757c7b5990a102@mail.gmail.com>

On Sat, Jul 11, 2009 at 7:11 AM, David-Sarah
Hopwood<david-sarah at jacaranda.org> wrote:
> Gustaf Johansson wrote:
>> Hello,
>>
>> I have a global hashmap that i want to initialize in the constructor.
>
> If you declare an instance field with an initializer, or use a
> 'static {...}' block, Java will effectively copy that initializer or
> block into all constructors.
>
> For example:
>
> @parser::members {
> ?private Map<KeyType, ValueType> map = initMap();
> }

This works perfectly, thanks alot for the info.

>
> or
>
> @parser::members {
> ?private Map<KeyType, ValueType> map;
>
> ?static {
> ? ?map = new HashMap<KeyType, ValueType>();
> ? ?...
> ?}
> }

This does not work though, since the map is in a non-static context
and as such cant be accessed from a static context.

It would work to use a instance initializer block however (by skipping
the static keyword).

For example:

{
  map = new HashMap<KeyType, ValueType>();
  ...
}
>
> --
> David-Sarah Hopwood ?? ?http://davidsarah.livejournal.com
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>

Best Regards Gustaf

From antlr at mirality.co.nz  Thu Jul 23 02:39:39 2009
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Thu, 23 Jul 2009 21:39:39 +1200
Subject: [antlr-interest] Invalid char literal
In-Reply-To: <003a01ca0b4e$2ad3aaf0$807b00d0$@com>
References: <003a01ca0b4e$2ad3aaf0$807b00d0$@com>
Message-ID: <20090723093952.02E613418479@www.antlr.org>

At 16:29 23/07/2009, Bryan S Follins wrote:
>Does anyone know what the error "syntax error: invalid char 
>literal" means?

It means that you have something in 'quotes' in your grammar that 
isn't valid.

Most likely, you've put in a Unicode character.  ANTLR grammars 
are currently parsed by ANTLR v2, which can't cope with Unicode 
input (unlike the lexers v3 generates, which can).

You need to escape any Unicode characters in the grammar with a 
\uNNNN sequence.


From nikolaz at ukr.net  Tue Jul 21 05:16:52 2009
From: nikolaz at ukr.net (nikolaz at ukr.net)
Date: Tue, 21 Jul 2009 15:16:52 +0300
Subject: [antlr-interest] gUnit-to-jUnit and gUnit-maven problem.
Message-ID: <E1MTEH6-0005rP-TE@ffe16.ukr.net>

Good afternoon!  
  
There is a problem with gUnit-to-jUnit code generation. Some generated tests breaks with exception. (The same problem is when gUnit is executed through maven)  
  
Here is a simple example (also in attachments):  
?http://rapidshare.com/files/258306953/gUnit.zip.html  
It consists of grammar and gUnit test. When test is executed by internal gUnit interpreter it runs fine. When test is converted to jUnit test or executed by maven, some tests breaks with InvalidInputException.  
This problem is encounted only with some texts when input is wrong and "fail" result is expected, like this:  
  
//------------------- supertypes  
supertypes:  
"> NS3:P at ar entType1, ns:parentype2" FAIL  
  
  
In example archive there are two folders:  
'maven' - is a Maven2 project showing test error;  
'manual' - is a folder with the same grammar and gUnit test with readme how to manualy run test by gUnit interpreter. In this case tests are passed fine.  
____________________________  
WBR, Nikolay Zamosenchuk  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090721/322f592a/attachment-0001.html 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/zip
Size: 1792768 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20090721/322f592a/attachment-0001.zip 

From thikone at gmail.com  Thu Jul 23 08:57:04 2009
From: thikone at gmail.com (Andrew Haritonkin)
Date: Thu, 23 Jul 2009 17:57:04 +0200
Subject: [antlr-interest] Language Design Patterns and incremental
	parsing
In-Reply-To: <1332b72e0907220959u2a6d200dka484d039e7fe6584@mail.gmail.com>
References: <a382aa010907220856y19b91b64i1c712921b6b8c07@mail.gmail.com>
	<1332b72e0907220959u2a6d200dka484d039e7fe6584@mail.gmail.com>
Message-ID: <a382aa010907230857x627f9cccia85a962295ec68b4@mail.gmail.com>

Hello Andreas,

1. It depends on which steps you have to repeat and which you can
simply refresh. You can make lexer incremental, this could save half
of the time. You can also make parser incremental which produces AST
and then use it for computations. Otherwise, if you have embedded
actions in parser rules then it would be hard to make it incremental,
if not impossible.

2. If you use AST from the parser, then you just change the way you
get it. Instead of rebuilding it each time you will just refresh it
and re-run your tree walker. Tree walker part is already
non-incremental and will be exactly the same as before.

Let's think about white spaces. What difference would it make if you
type one space more between two words (provided that language is not
sensitive to white spaces)? Instead of re-parsing the whole text you
could just adjust tokens' start and end positions and you are pretty
much done. The same can be done with comments.

Andrew

On Wed, Jul 22, 2009 at 6:59 PM, Andreas Stefik<stefika at gmail.com> wrote:
> Andrew,
>
> So far as I understand it, where incremental parsing comes in really handy
> is when you have something continually reparsing a file. In my case, I use
> ANTLR to parse a custom programming language, which is then integrated into
> the NetBeans platform. The NetBeans parser, by default, continually reparses
> the source as the user types to try and determine whether there are errors
> in what the user is typing. It then generates visual feedback on the fly
> (e.g., little red squiggly lines), depending upon if there are errors.
>
> In practice, even with a non-incremental parser, this generally works fine
> for 1 file (the user can only type in one at a time), but since everything
> is done in real time, you want to the minimum amount of computation done
> while the user is typing so that the visual (and in my case, aural, since my
> language is for blind children), feedback to be as fluid and consistent as
> possible. Since ANTLR is not incremental, I currently have NetBeans wipe the
> build information for the file every time it requests a re-parse (which
> happens often!!), and then ask ANTLR to do it from scratch. It would be nice
> though, if ANTLR could only update the pieces of code the user was typing
> in, as it would, in theory at least, be much faster.
>
> In my case though, there are a few things I'm not sure how I would handle
> yet if ANTLR were incremental.
>
> 1. How would the different phases of my VM interact (e.g., would the tree
> walker also incrementally change?)
>
> 2. Would I be able to figure out how to modify my post-ANTLR compiler phases
> if ANTLR were incremental?
>
> I'm sure there are solutions to questions like these, and I highly support
> incremental parsing for ANTLR, if it's feasible, but so far as I understand
> it, it's a pretty tricky technology.
>
> Andreas
>
>
>
> On Wed, Jul 22, 2009 at 8:56 AM, Andrew Haritonkin <thikone at gmail.com>
> wrote:
>>
>> Hello Ter,
>>
>> Language Design Patterns is very nice book, even in beta version. I
>> love it - just what I needed after ANTLR ?book... Thank you for that.
>>
>> I remember there was a talk about incremental parsing option for ANTLR
>> 3. It started with Prashant Deva when he implemented it for his ANTLR
>> Studio plug-in for Eclipse. In his blog he said that it was planned
>> for ANTLR 3 release, then for ANTLR 3.1. And you mentioned it once
>> here that you plan to write a paper with Prashant about incremental
>> top-down parsing. But I couldn't find any news about that.
>>
>> There is not much information could be found about incremental parsing
>> and most of them (or all of them), are related to LR parser. It seems
>> like it's not very known topic. Or maybe it's not needed so much? On
>> the other hand, Language Design Patterns is mostly about LL parser.
>> And I think discussing this topic in this book for LL parser would add
>> a great value to it.
>>
>> Of course, there is always something more to ask and you never can
>> have it all... right?
>>
>> Any comments? Can you share your opinion about this topic and how
>> important it is?
>>
>> Thank you,
>> Andrew
>>
>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>> Unsubscribe:
>> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>
>

From jimi at temporal-wave.com  Thu Jul 23 09:38:04 2009
From: jimi at temporal-wave.com (Jim Idle)
Date: Thu, 23 Jul 2009 06:38:04 -1000
Subject: [antlr-interest] Better recovery from a mismatched token desired
In-Reply-To: <f6be20450907221738n19f912f1uef8690c94442807b@mail.gmail.com>
References: <f6be20450907171428g568e9e4bm8ee8bbc40a255952@mail.gmail.com>
	<97AAFA73-5487-40C0-AB5C-93476F3F2A41@temporal-wave.com>
	<f6be20450907221738n19f912f1uef8690c94442807b@mail.gmail.com>
Message-ID: <62FB5980-A0BE-4AD9-AA6F-39C255A64215@temporal-wave.com>



On Jul 22, 2009, at 2:38 PM, Stanislav Sokorac <sokorac at gmail.com>  
wrote:

> Thanks, Jim. I looked at the JavaFX grammar, and I like how they did  
> that. It's a neat way to achieve what I'm trying to do.
>


Whoever did that was extremely handsome and clever.

> I'm not sure I understand option A, though. Since 'end' needs to be  
> at the end of the program, it will almost always be in the follow  
> set after a semi-colon. What kind of jiggering could I do to avoid  
> that?

Maybe none. I would have to see your grammar. However the END should  
be in the top level rule and compounds lower down. Or you could  
manually create the resync method.

Jim

>
> Stan
>
> On Fri, Jul 17, 2009 at 11:36 PM, Jim Idle <jimi at temporal-wave.com>  
> wrote:
> You need to either:
>
> A) carefully rejiggering your grammar so that the follow set does  
> not end up being END
>
> B) create an empty rule with an @init that consumes to the followset  
> and so resyncs tobwhat you want because the followset of the empty  
> rulemis the first set of your loop element. Look at the JavaFX  
> compiler for an example that is easy enough to follow.
>
> Jim
>
>
> On Jul 17, 2009, at 11:28 AM, Stanislav Sokorac <sokorac at gmail.com>  
> wrote:
>
> I have a simple grammar (pasted below) for a language that allows  
> two types of statements: let or int, where int declares a variable,  
> and let assigns to it. A "program" is a collection of these  
> statements wrapped in begin/end tokens.
>
> My problems is that when ANTLR encounters a token other than 'int'  
> or 'let' as the first word of the statement, it pops out of its  
> statement loop and reports a token mismatch -- "mismatch input  
> 'something' expecting 'end'", and then proceeds to consume all  
> tokens until 'end'. All statements subsequent to the mismatched one  
> are not parsed, and I would like to have the rest of the file  
> analyzed.
>
> It seems that even if I override the recovery method and consume up  
> to a semicolon, it'll try to match up the next token with 'end' and  
> fail again, as it's no longer even looking for statements. How do I  
> keep the parser inside the statement loop when it detects a  
> mismatched token?
>
> Here's my sample input:
>
> begin
> int a;
> let a=3;
> double c;
> let c =4;
> end
>
> (I'd like to see let c=4; parsed, even though 'double c;' is an  
> invalid statement)
>
> Here's my simple grammar:
>
> grammar test;
>
> program    :    'begin' statement* 'end' EOF;
> statement    :    'let' ID '=' NUMBER ';' | 'int' ID ';';
>
> NUMBER    :    ('0'..'9')+;
> ID  :    ('a'..'z'|'A'..'Z'|'_') ('a'..'z'|'A'..'Z'|'0'..'9'|'_')*;
> WS  :   ( ' ' | '\t' | '\r' | '\n') {$channel=HIDDEN;};
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090723/11e94bb6/attachment.html 

From thikone at gmail.com  Thu Jul 23 10:27:53 2009
From: thikone at gmail.com (Andrew Haritonkin)
Date: Thu, 23 Jul 2009 19:27:53 +0200
Subject: [antlr-interest] Language Design Patterns and incremental
	parsing
In-Reply-To: <E39C6614-D754-43C2-AC6F-2119195CC33A@cs.usfca.edu>
References: <a382aa010907220856y19b91b64i1c712921b6b8c07@mail.gmail.com>
	<E39C6614-D754-43C2-AC6F-2119195CC33A@cs.usfca.edu>
Message-ID: <a382aa010907231027x56ad062fsb45d6ca8caad4ef7@mail.gmail.com>

Hi Ter,

Thanks for the insights.

Interesting... so, the lexer could be hardest part, good to know. It
seems incremental parsing is both, a very complex problem and not so
needed feature. Of course, computers become faster and faster, but why
work for one month to buy a new computer when you can spend years
trying to optimize it for the old one? ;-)

ANTLR is already good enough and besides I'm not so far to think about
optimization yet. Just thought that this topic is lost somewhere. I'm
very interested in it because I'm building an IDE as my home project.
And there it really makes the difference. Well, if you are lucky,
parser would have complexity O(n). And if re-parse is done after each
typed in character, then for file n characters long complexity would
be O(n*(n-1)/2) = O(n^2). But usually for comprehensive computer
language parser has bigger complexity. And therefore, parsing or not
parsing each time is a very big difference.

But even if it's hard to implement, could be there some paper or
chapter in the book. There is one existing implementation - ANTLR
Studio plug-in. Or that can only come together with new ANTLR version
that implements that? What about incremental parser only, without
lexer? If it's easily done, why not write about it?

Andrew

On Wed, Jul 22, 2009 at 9:31 PM, Terence Parr<parrt at cs.usfca.edu> wrote:
> hi Andrew,
>
> Well, Prashant and I have been discussing this for years now. After talking
> to the netbeans and javafx teams as well, I've come to the conclusion it's
> not the best use of my time. It's a really hard problem (and least the lexer
> is; parser is easy incrementally) and computers are fast enough now that is
> just not worth me going crazy over it. ?Sorry to say...you should be fine
> though; we're talking about an O(n) process fortunately.
>
> ?glad you like the LDP book!
> Ter
> On Jul 22, 2009, at 8:56 AM, Andrew Haritonkin wrote:
>
>> Hello Ter,
>>
>> Language Design Patterns is very nice book, even in beta version. I
>> love it - just what I needed after ANTLR ?book... Thank you for that.
>>
>> I remember there was a talk about incremental parsing option for ANTLR
>> 3. It started with Prashant Deva when he implemented it for his ANTLR
>> Studio plug-in for Eclipse. In his blog he said that it was planned
>> for ANTLR 3 release, then for ANTLR 3.1. And you mentioned it once
>> here that you plan to write a paper with Prashant about incremental
>> top-down parsing. But I couldn't find any news about that.
>>
>> There is not much information could be found about incremental parsing
>> and most of them (or all of them), are related to LR parser. It seems
>> like it's not very known topic. Or maybe it's not needed so much? On
>> the other hand, Language Design Patterns is mostly about LL parser.
>> And I think discussing this topic in this book for LL parser would add
>> a great value to it.
>>
>> Of course, there is always something more to ask and you never can
>> have it all... right?
>>
>> Any comments? Can you share your opinion about this topic and how
>> important it is?
>>
>> Thank you,
>> Andrew
>>
>> List: http://www.antlr.org/mailman/listinfo/antlr-interest
>> Unsubscribe:
>> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>
>

From antlr at mirality.co.nz  Thu Jul 23 12:43:45 2009
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Fri, 24 Jul 2009 07:43:45 +1200
Subject: [antlr-interest] Language Design Patterns and incremental
 parsing
In-Reply-To: <a382aa010907231027x56ad062fsb45d6ca8caad4ef7@mail.gmail.co
 m>
References: <a382aa010907220856y19b91b64i1c712921b6b8c07@mail.gmail.com>
	<E39C6614-D754-43C2-AC6F-2119195CC33A@cs.usfca.edu>
	<a382aa010907231027x56ad062fsb45d6ca8caad4ef7@mail.gmail.com>
Message-ID: <20090723194402.BC76D3418479@www.antlr.org>

At 05:27 24/07/2009, Andrew Haritonkin wrote:
 >Interesting... so, the lexer could be hardest part, good to 
know.
 >It seems incremental parsing is both, a very complex problem
 >and not so needed feature.
[...]
 >ANTLR is already good enough and besides I'm not so far to think 

 >about optimization yet. Just thought that this topic is lost
 >somewhere.  I'm very interested in it because I'm building an
 >IDE as my home project.

You might be interested in this blog entry (and neighbouring 
ones):
   <http://blog.280z28.org/archives/2008/10/21/>http://blog.280z28.org/archives/2008/10/21/ 


It's a discussion of how to integrate an ANTLR-based lexer/parser 
into the Visual Studio IDE.  While it doesn't directly cover how 
to do incremental lexing, it does discuss some issues that arise 
when the lexer is being used incrementally.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090724/2ad35123/attachment.html 

From stefika at gmail.com  Thu Jul 23 13:36:41 2009
From: stefika at gmail.com (Andreas Stefik)
Date: Thu, 23 Jul 2009 13:36:41 -0700
Subject: [antlr-interest] Language Design Patterns and incremental
	parsing
In-Reply-To: <20090723194402.BC76D3418479@www.antlr.org>
References: <a382aa010907220856y19b91b64i1c712921b6b8c07@mail.gmail.com>
	<E39C6614-D754-43C2-AC6F-2119195CC33A@cs.usfca.edu>
	<a382aa010907231027x56ad062fsb45d6ca8caad4ef7@mail.gmail.com>
	<20090723194402.BC76D3418479@www.antlr.org>
Message-ID: <1332b72e0907231336o27783e15vded32b3c0e5eee69@mail.gmail.com>

Similarly, here's one for NetBeans:

http://wiki.netbeans.org/New_Language_Support_Tutorial_Antlr

Andreas

On Thu, Jul 23, 2009 at 12:43 PM, Gavin Lambert <antlr at mirality.co.nz>wrote:

>  At 05:27 24/07/2009, Andrew Haritonkin wrote:
> >Interesting... so, the lexer could be hardest part, good to know.
> >It seems incremental parsing is both, a very complex problem
> >and not so needed feature.
> [...]
> >ANTLR is already good enough and besides I'm not so far to think
> >about optimization yet. Just thought that this topic is lost
> >somewhere.  I'm very interested in it because I'm building an
> >IDE as my home project.
>
> You might be interested in this blog entry (and neighbouring ones):
>   http://blog.280z28.org/archives/2008/10/21/
>
> It's a discussion of how to integrate an ANTLR-based lexer/parser into the
> Visual Studio IDE.  While it doesn't directly cover how to do incremental
> lexing, it does discuss some issues that arise when the lexer is being used
> incrementally.
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090723/35d93430/attachment.html 

From bjg at modelsoftware.com  Thu Jul 23 13:53:33 2009
From: bjg at modelsoftware.com (Bart J. Geraci)
Date: Thu, 23 Jul 2009 15:53:33 -0500
Subject: [antlr-interest] specialStateTransition() in Java-generated lexer
Message-ID: <4A68CDCD.1080500@modelsoftware.com>

When ANTLR generates my lexer, I get this method:

***********

@Override
public int specialStateTransition(int s, IntStream _input)
   throws NoViableAltException {
   IntStream input = _input;
   int _s = s;
   switch (s) {
     case 0:
     int LA26_16 = input.LA(1);
     s = -1;
     if ((LA26_16 == '\"')) {
           s = 77;
     } else if (((LA26_16 >= '\u0000' && LA26_16 <= '\t')
         || (LA26_16 >= '\u000B' && LA26_16 <= '\f')
         || (LA26_16 >= '\u000E' && LA26_16 <= '!')
         || (LA26_16 >= '#' && LA26_16 <= '\u2027')
         || (LA26_16 >= '\u202A' && LA26_16 <= '\uFFFF'))) {
       s = 36;
     }

     if (s >= 0)
       return s;
     break;
   }
   NoViableAltException nvae =
     new NoViableAltException(getDescription(), 26, _s, input);
     error(nvae);
     throw nvae;
}

***********
What strikes me is that the method argument "s" is modified and 
returned. There is a similarly named local variable "_s" that is 
assigned, but is not modified.

Is this correct or should some of these "s" be "_s" ?
-- 
-bj-
Bart J. Geraci
bjg at modelsoftware.com

From cummings at kjchome.homeip.net  Thu Jul 23 14:22:58 2009
From: cummings at kjchome.homeip.net (Kevin J. Cummings)
Date: Thu, 23 Jul 2009 17:22:58 -0400
Subject: [antlr-interest] specialStateTransition() in Java-generated
	lexer
In-Reply-To: <4A68CDCD.1080500@modelsoftware.com>
References: <4A68CDCD.1080500@modelsoftware.com>
Message-ID: <4A68D4B2.6030305@kjchome.homeip.net>

On 07/23/2009 04:53 PM, Bart J. Geraci wrote:
> When ANTLR generates my lexer, I get this method:
>
> ***********
>
> @Override
> public int specialStateTransition(int s, IntStream _input)
>     throws NoViableAltException {
>     IntStream input = _input;
>     int _s = s;
>     switch (s) {
>       case 0:
>       int LA26_16 = input.LA(1);
>       s = -1;
>       if ((LA26_16 == '\"')) {
>             s = 77;
>       } else if (((LA26_16>= '\u0000'&&  LA26_16<= '\t')
>           || (LA26_16>= '\u000B'&&  LA26_16<= '\f')
>           || (LA26_16>= '\u000E'&&  LA26_16<= '!')
>           || (LA26_16>= '#'&&  LA26_16<= '\u2027')
>           || (LA26_16>= '\u202A'&&  LA26_16<= '\uFFFF'))) {
>         s = 36;
>       }
>
>       if (s>= 0)
>         return s;
>       break;
>     }
>     NoViableAltException nvae =
>       new NoViableAltException(getDescription(), 26, _s, input);
>       error(nvae);
>       throw nvae;
> }
>
> ***********
> What strikes me is that the method argument "s" is modified and
> returned. There is a similarly named local variable "_s" that is
> assigned, but is not modified.
>
> Is this correct or should some of these "s" be "_s" ?

Bart,
	The only usage of "s" after the "_s = s" assignment, are assignments to 
"s" itself, which reflect a value depending on the if statements inside 
the switch.  If you assigned a positive value to s, return it. 
Otherwise (I assume s is still -1) you break out of the switch 
statement.  In which case (pun intended), since you are about to throw 
an exception, it contains the saved input value _s.  So, the code looks 
good to me.....

-- 
Kevin J. Cummings
kjchome at rcn.com
cummings at kjchome.homeip.net
cummings at kjc386.framingham.ma.us
Registered Linux User #1232 (http://counter.li.org)

From david-sarah at jacaranda.org  Thu Jul 23 14:39:54 2009
From: david-sarah at jacaranda.org (David-Sarah Hopwood)
Date: Thu, 23 Jul 2009 22:39:54 +0100
Subject: [antlr-interest] Help with discarding lexer tokens....
In-Reply-To: <4A67DC26.5070606@jacaranda.org>
References: <8d80b1570907220306o48703310va41abd10eafdc866@mail.gmail.com>
	<4A67DC26.5070606@jacaranda.org>
Message-ID: <4A68D8AA.9060606@jacaranda.org>

David-Sarah Hopwood wrote:
> Fredrik Ohrstrom wrote:
>> I would like to ignore certain tokens found at the lexer level.
>> For example: my example source code is sprinkled with tokens
>> like [remove] and I want to prevent these to be seen by the parser.
> [...]
>> I did finally stumble upon a solution, but it is ugly.
>>
>> grammar Test;
>> cmd	:  (CMD suffix? )* ;
>> suffix : LB CMD RB ;
> 
>   suffix : LB c=CMD RB
>     { if ($c != null && $c.text.equals("remove")) $channel = HIDDEN; } ;

Sorry, setting $channel only makes sense in a lexer rule, so this won't
work as written.

Rather than using the explicit test above, I think it is probably more
elegant to declare "[remove]" in the tokens block (which gives it precedence
over other rules that it would otherwise be ambiguous with), like this:

  grammar Test;

  tokens {
    REMOVE: '[remove]';
  }

  // should probably rename this rule for clarity
  cmd : (Cmd Suffix?)* ;

  Remove : REMOVE { $channel = HIDDEN; } ;

  Suffix : '[' CMD ']' ;

  Cmd : CMD ;

  fragment CMD : ('a'..'z')+ ;

  WS : (' '|'\t'|'\r'|'\n')+ { $channel=HIDDEN; } ;

This allows whitespace between Cmd and Suffix, or between multiple
Suffixes. It wasn't clear from your original post whether you want
to allow whitespace there or not.

> Thanks! But as I wrote in the other email, suffix is
> unfortunately really complicated and occurs in
> several different places in the parser.

Given the correction above, is there still a problem?
Suffix could be made arbitrarily complicated and used in any number
of places.

-- 
David-Sarah Hopwood  ?  http://davidsarah.livejournal.com


From antlr at mirality.co.nz  Thu Jul 23 14:39:36 2009
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Fri, 24 Jul 2009 09:39:36 +1200
Subject: [antlr-interest] specialStateTransition() in Java-generated
 lexer
In-Reply-To: <4A68D4B2.6030305@kjchome.homeip.net>
References: <4A68CDCD.1080500@modelsoftware.com>
	<4A68D4B2.6030305@kjchome.homeip.net>
Message-ID: <20090723214038.EB6BD3418448@www.antlr.org>

At 09:22 24/07/2009, Kevin J. Cummings wrote:
 >	The only usage of "s" after the "_s = s" assignment, are
 >assignments to "s" itself, which reflect a value depending
 >on the if statements inside the switch.  If you assigned a
 >positive value to s, return it.
 >Otherwise (I assume s is still -1) you break out of the switch
 >statement.  In which case (pun intended), since you are about to 

 >throw an exception, it contains the saved input value _s.  So,
 >the code looks good to me.....

Although it would have made more sense to alter the local variable 
and leave the parameter alone.  So, correct, yes, but "good" might 
be a bit of a stretch... :)


From cummings at kjchome.homeip.net  Thu Jul 23 16:09:50 2009
From: cummings at kjchome.homeip.net (Kevin J. Cummings)
Date: Thu, 23 Jul 2009 19:09:50 -0400
Subject: [antlr-interest] specialStateTransition() in Java-generated
 lexer
In-Reply-To: <200907232218.n6NMHBBA010351@kjc386.framingham.ma.us>
References: <4A68CDCD.1080500@modelsoftware.com>
	<4A68D4B2.6030305@kjchome.homeip.net>
	<200907232218.n6NMHBBA010351@kjc386.framingham.ma.us>
Message-ID: <4A68EDBE.6040507@kjchome.homeip.net>

On 07/23/2009 05:39 PM, Gavin Lambert wrote:
> At 09:22 24/07/2009, Kevin J. Cummings wrote:
>  > The only usage of "s" after the "_s = s" assignment, are
>  >assignments to "s" itself, which reflect a value depending
>  >on the if statements inside the switch. If you assigned a
>  >positive value to s, return it.
>  >Otherwise (I assume s is still -1) you break out of the switch
>  >statement. In which case (pun intended), since you are about to
>  >throw an exception, it contains the saved input value _s. So,
>  >the code looks good to me.....
>
> Although it would have made more sense to alter the local variable and
> leave the parameter alone. So, correct, yes, but "good" might be a bit
> of a stretch... :)

Maybe, but leaving the parameter in a register ties up that register 
(and it might still be spilled anyways), depends on the complexity of 
the code and the intelligence of the optimizers and code generators. 
B^)  From the viewpoint of readability, Gavin is probably right.

-- 
Kevin J. Cummings
kjchome at rcn.com
cummings at kjchome.homeip.net
cummings at kjc386.framingham.ma.us
Registered Linux User #1232 (http://counter.li.org)

From ivo.kondapaneni at rcware.eu  Fri Jul 24 07:21:19 2009
From: ivo.kondapaneni at rcware.eu (Ivo Kondapaneni)
Date: Fri, 24 Jul 2009 16:21:19 +0200
Subject: [antlr-interest] how to put lexer rules syntactic check
In-Reply-To: <eeba210e0907240719x42fc27dcqe57ce3d9076c4fb7@mail.gmail.com>
References: <eeba210e0907240719x42fc27dcqe57ce3d9076c4fb7@mail.gmail.com>
Message-ID: <eeba210e0907240721o244be0a6gf78fe4a11684fb39@mail.gmail.com>

Hi everyone,

during creation of lexer for our language I have run across one trouble. My
lexer rules looks as follows:

Special_PERIOD    :    '.';
Special_DOUBLE_PERIOD    :    '..';

//
fragment DIGIT
    :     '0'..'9';
//
fragment FIXEDPOINTNUMBER
    :    INTEGERNUMBER Special_PERIOD INTEGERNUMBER;

fragment INTEGERNUMBER
    :     DIGIT ('_'? DIGIT)*;
//
Literal_INTEGER
    :    INTEGERNUMBER;

Literal_REAL
    :    FIXEDPOINTNUMBER ( 'e' ('+'|'-')? INTEGERNUMBER )?;

and lexer generated from these throws MismatchedRange exception during
parsing of input like:

"1234.." or "1234. something",

because it automatically choose to start with Literal_REAL instead of
Literal_INTEGER and it fails when it comes to the second period (or anything
which differs from a digit). I have tried to put there an syntactic
predicate to real and integer rules, but that obviously didn't worked,
because there is always only one possibility how to expand.

To summarize, I would like to parse string "1234.." to "Literal_INTEGER
Special_DOUBLE_PERIOD" tokens

So, have anyone an idea, how to solve it in lexer definition?

Thanks in advance.

-- 
Ivo Kondapaneni
program?tor
Energocentrum Plus, s.r.o.

Mobile: +420 739 074 964

http://energocentrum.cz, http://rcware.eu
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090724/1cf71711/attachment.html 

From jimi at temporal-wave.com  Fri Jul 24 10:10:57 2009
From: jimi at temporal-wave.com (Jim Idle)
Date: Fri, 24 Jul 2009 07:10:57 -1000
Subject: [antlr-interest] how to put lexer rules syntactic check
In-Reply-To: <eeba210e0907240721o244be0a6gf78fe4a11684fb39@mail.gmail.com>
References: <eeba210e0907240719x42fc27dcqe57ce3d9076c4fb7@mail.gmail.com>
	<eeba210e0907240721o244be0a6gf78fe4a11684fb39@mail.gmail.com>
Message-ID: <2A402979-5E77-4EC9-AAA0-FA5C2B2BAB0A@temporal-wave.com>

This is an FAQ answered again only yesterday or the day before. Look  
on the wiki for the article on how to lex for integer, floating point  
and range.

Jim

On Jul 24, 2009, at 4:21 AM, Ivo Kondapaneni  
<ivo.kondapaneni at rcware.eu> wrote:

> Hi everyone,
>
> during creation of lexer for our language I have run across one  
> trouble. My lexer rules looks as follows:
>
> Special_PERIOD    :    '.';
> Special_DOUBLE_PERIOD    :    '..';
>
> //
> fragment DIGIT
>     :     '0'..'9';
> //
> fragment FIXEDPOINTNUMBER
>     :    INTEGERNUMBER Special_PERIOD INTEGERNUMBER;
>
> fragment INTEGERNUMBER
>     :     DIGIT ('_'? DIGIT)*;
> //
> Literal_INTEGER
>     :    INTEGERNUMBER;
>
> Literal_REAL
>     :    FIXEDPOINTNUMBER ( 'e' ('+'|'-')? INTEGERNUMBER )?;
>
> and lexer generated from these throws MismatchedRange exception  
> during parsing of input like:
>
> "1234.." or "1234. something",
>
> because it automatically choose to start with Literal_REAL instead  
> of Literal_INTEGER and it fails when it comes to the second period  
> (or anything which differs from a digit). I have tried to put there  
> an syntactic predicate to real and integer rules, but that obviously  
> didn't worked, because there is always only one possibility how to  
> expand.
>
> To summarize, I would like to parse string "1234.." to  
> "Literal_INTEGER  Special_DOUBLE_PERIOD" tokens
>
> So, have anyone an idea, how to solve it in lexer definition?
>
> Thanks in advance.
>
> -- 
> Ivo Kondapaneni
> program?tor
> Energocentrum Plus, s.r.o.
>
> Mobile: +420 739 074 964
>
> http://energocentrum.cz, http://rcware.eu
>
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090724/f8642f63/attachment.html 

From samuelgoto at gmail.com  Fri Jul 24 12:17:43 2009
From: samuelgoto at gmail.com (sgoto)
Date: Fri, 24 Jul 2009 12:17:43 -0700
Subject: [antlr-interest] source code formatter
Message-ID: <820a80710907241217s48cc6316ld5591be6c56ae7e5@mail.gmail.com>

Hi,
   I am having a hard time using tree grammars for source code
formatting/beautifier for language X. Are tree grammars actually meant to
help me with source code formatting or am I better off with depth first
visitors ?

   By reading Terrence's post about how translators should use tree grammars
makes me want to use it, it seems to be addressing the issues I have with
visitors for translators, but I am not sure if it will help me much with
formatters.

   ideas ?

-- 
f u cn rd ths u cn b a gd prgmr !
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090724/52afa74d/attachment.html 

From lgcraymer at yahoo.com  Sat Jul 25 02:22:35 2009
From: lgcraymer at yahoo.com (Loring Craymer)
Date: Sat, 25 Jul 2009 02:22:35 -0700 (PDT)
Subject: [antlr-interest] source code formatter
In-Reply-To: <820a80710907241217s48cc6316ld5591be6c56ae7e5@mail.gmail.com>
References: <820a80710907241217s48cc6316ld5591be6c56ae7e5@mail.gmail.com>
Message-ID: <156264.37294.qm@web55903.mail.re3.yahoo.com>

You need to combine a tree walker with StringTemplate for output.  The tree walker can reflect high-level semantic concepts in its productions (declarations, method/function calls, etc.) that the depth first visitor cannot.  StringTemplate helps in rearranging tokens, adding syntactic sugar, etc. and your templates can be organized to suit the productions of the tree walker.

--Loring




>
>From: sgoto <samuelgoto at gmail.com>
>To: antlr-interest at antlr.org
>Sent: Friday, July 24, 2009 12:17:43 PM
>Subject: [antlr-interest] source code formatter
>
>Hi,
>
>
>   I am having a hard time using tree grammars for source code formatting/beautifier for language X. Are tree grammars actually meant to help me with source code formatting or am I better off with depth first visitors ?
>
>
>   By reading Terrence's post about how translators should use tree grammars makes me want to use it, it seems to be addressing the issues I have with visitors for translators, but I am not sure if it will help me much with formatters.
>
>
>   ideas ?
>
>-- 
>f u cn rd ths u cn b a gd prgmr !
>


      
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090725/0000d165/attachment.html 

From oehrstroem at gmail.com  Sat Jul 25 11:08:20 2009
From: oehrstroem at gmail.com (Fredrik Ohrstrom)
Date: Sat, 25 Jul 2009 20:08:20 +0200
Subject: [antlr-interest] source code formatter
In-Reply-To: <820a80710907241217s48cc6316ld5591be6c56ae7e5@mail.gmail.com>
References: <820a80710907241217s48cc6316ld5591be6c56ae7e5@mail.gmail.com>
Message-ID: <8d80b1570907251108g3237e130nc672188659b89036@mail.gmail.com>

I think you should have a look at TokenRewriteStream as well.
It depends on what you are going to do.

//Fredrik

2009/7/24 sgoto <samuelgoto at gmail.com>:
> Hi,
> ?? I am having a hard time using tree grammars for source code
> formatting/beautifier for language X. Are tree grammars actually meant to
> help me with source code formatting or am I better off with depth first
> visitors ?
>
> ?? By reading Terrence's post about how translators should use tree grammars
> makes me want to use it, it seems to be addressing the issues I have with
> visitors for translators, but I am not sure if it will help me much with
> formatters.
> ?? ideas ?
> --
> f u cn rd ths u cn b a gd prgmr !
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>
>

From david-sarah at jacaranda.org  Sat Jul 25 12:48:47 2009
From: david-sarah at jacaranda.org (David-Sarah Hopwood)
Date: Sat, 25 Jul 2009 20:48:47 +0100
Subject: [antlr-interest] Feature request: output to any Appendable object
	from TokenRewriteStream
Message-ID: <4A6B619F.7050602@jacaranda.org>

It would be convenient to be able to direct the output of TokenRewriteStream
to any Appendable object, rather than just to a String. This would avoid
unnecessary copying when constructing output that includes the rewritten
text, but may include more than one "program", or text from another
source.

The implementation would be really simple -- add or change the following
methods in TokenRewriteStream:

  public String toString(String programName, int start, int end) {
      return appendTo(new StringBuilder(), programName, start, end)
        .toString();
  }

  public Appendable appendTo(Appendable buf) {
      return appendTo(buf, MIN_TOKEN_INDEX, size()-1);
  }

  public Appendable appendTo(Appendable buf, String programName) {
      return appendTo(buf, programName, MIN_TOKEN_INDEX, size()-1);
  }

  public Appendable appendTo(Appendable buf, int start, int end) {
      return appendTo(buf, DEFAULT_PROGRAM_NAME, start, end);
  }

  public Appendable appendTo(Appendable buf, String programName,
                             int start, int end) {
      // implementation of existing toString(programName, start, end)
      // method, but without "StringBuffer buf = new StringBuffer();",
      // and returning buf.
  }

  public String toOriginalString(int start, int end) {
      return appendOriginalTo(new StringBuilder(), start, end).toString();
  }

  public Appendable appendOriginalTo(Appendable buf) {
      return appendOriginalTo(buf, MIN_TOKEN_INDEX, size()-1);
  }

  public Appendable appendOriginalTo(Appendable buf, int start, int end) {
      for (int i=start; i>=MIN_TOKEN_INDEX && i<=end && i<tokens.size(); i++) {
          buf.append(get(i).getText());
      }
      return buf;
  }

-- 
David-Sarah Hopwood  ?  http://davidsarah.livejournal.com


From gokul007 at gmail.com  Sat Jul 25 13:43:03 2009
From: gokul007 at gmail.com (Gokulakannan Somasundaram)
Date: Sun, 26 Jul 2009 02:13:03 +0530
Subject: [antlr-interest] Reg Multi-line comments
In-Reply-To: <4A600D2C.9090001@jacaranda.org>
References: <9362e74e0907160314o1334535fsa19a346e4524fb44@mail.gmail.com>
	<4A5F5259.1070504@jacaranda.org>
	<9362e74e0907161234q4fcae229x94a00de27b171e73@mail.gmail.com>
	<4A600D2C.9090001@jacaranda.org>
Message-ID: <9362e74e0907251343q4b6ce1c3m10b24cca598fab22@mail.gmail.com>

Hi David-Sarah Hopwood,
                     Sorry i missed your post and failed to reply.
                     Yes this solution works well in Java. But the problem
is that i am trying to do in C++(C), and this is not possible there. So i am
introducing the state information with the  Nevertheless, it is a very
thoughtful solution and thanks for helping me out.

Thanks,
Gokul.


On Fri, Jul 17, 2009 at 11:03 AM, David-Sarah Hopwood <
david-sarah at jacaranda.org> wrote:

> Gokulakannan Somasundaram wrote:
> > Actually there is a comment like this before the source code of the
> > function.
> >
> >     /** A more general version of getRuleInvocationStack where you can
> >      *  pass in, for example, a RecognitionException to get it's rule
> >      *  stack trace.  This routine is shared with all recognizers, hence,
> >      *  static.
> >      *
> >      *  TODO: move to a utility class or something; weird having lexer
> call
> >      *  this */
> >     public static List getRuleInvocationStack(Throwable e,
> >                                               String recognizerClassName)
> >
> >
> > It more or less sounds to me that lexer should not call this.
>
> The recipe in section 10.2 of 'The Definitive ANTLR Reference' does so,
> therefore it's a supported API, not internal. Moving it would break all
> lexers using that recipe.
>
> Calling the static version of this method rather than the instance
> version (with no arguments) is correct: if you don't obtain the stack
> from the RecognitionException that is passed to getErrorMessage, then
> the relevent lexer rule will no longer be on the current stack in some
> cases.
>
> > When i observe
> > the source code, i see that your approach may not be possible, because
> the
> > token to be tried out never gets saved anywhere. But let me check this.
>
> It is possible because the implementation uses a stack trace to determine
> which lexer methods were on the call stack when the RecognitionException
> was thrown, and so no explicit state is needed. In any case, I tested this
> code before posting; it works.
>
> --
> David-Sarah Hopwood  ?  http://davidsarah.livejournal.com
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090726/0bdeffc0/attachment.html 

From tommy.nordgren at comhem.se  Sun Jul 26 07:31:05 2009
From: tommy.nordgren at comhem.se (Tommy Nordgren)
Date: Sun, 26 Jul 2009 16:31:05 +0200
Subject: [antlr-interest] Can antlr 3.1 tree grammars generate trees?
Message-ID: <5F7CAB7B-1AAD-487D-920A-FEDF119427E1@comhem.se>

I think the heading says it all.
-----------------------------------
See the amazing new SF reel: Invasion of the man eating cucumbers from  
outer space.
On congratulations for a fantastic parody, the producer replies :  
"What parody?"

Tommy Nordgren
tommy.nordgren at comhem.se





From tommy.nordgren at comhem.se  Sun Jul 26 09:20:30 2009
From: tommy.nordgren at comhem.se (Tommy Nordgren)
Date: Sun, 26 Jul 2009 18:20:30 +0200
Subject: [antlr-interest] Can antlr 3.1 tree grammars generate trees?
In-Reply-To: <5F7CAB7B-1AAD-487D-920A-FEDF119427E1@comhem.se>
References: <5F7CAB7B-1AAD-487D-920A-FEDF119427E1@comhem.se>
Message-ID: <167C5CCE-4C90-4A97-8C83-598A42B44CAB@comhem.se>


On Jul 26, 2009, at 4:31 PM, Tommy Nordgren wrote:

> I think the heading says it all.

	Sorry! Should have checked the 3.1 release notes. The answer is YES
---------------------------------
How many National Democrats does it take to change a light bulb?
108: 8 who smashes the rest of the light bulbs, and 100 to blame a  
zionist world conspiracy for the darkness
--------------------------
Tommy Nordgren
tommy.nordgren at comhem.se




From jimi at temporal-wave.com  Sun Jul 26 09:53:34 2009
From: jimi at temporal-wave.com (Jim Idle)
Date: Sun, 26 Jul 2009 06:53:34 -1000
Subject: [antlr-interest] Can antlr 3.1 tree grammars generate trees?
In-Reply-To: <5F7CAB7B-1AAD-487D-920A-FEDF119427E1@comhem.se>
References: <5F7CAB7B-1AAD-487D-920A-FEDF119427E1@comhem.se>
Message-ID: <93A64C78-A5B5-4F08-B3E0-AEF1945DCF90@temporal-wave.com>

Yes

On Jul 26, 2009, at 4:31 AM, Tommy Nordgren <tommy.nordgren at comhem.se>  
wrote:

> I think the heading says it all.
> -----------------------------------
> See the amazing new SF reel: Invasion of the man eating cucumbers from
> outer space.
> On congratulations for a fantastic parody, the producer replies :
> "What parody?"
>
> Tommy Nordgren
> tommy.nordgren at comhem.se
>
>
>
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address

From parrt at cs.usfca.edu  Sun Jul 26 11:04:05 2009
From: parrt at cs.usfca.edu (Terence Parr)
Date: Sun, 26 Jul 2009 11:04:05 -0700
Subject: [antlr-interest] Feature request: output to any Appendable
	object from TokenRewriteStream
In-Reply-To: <4A6B619F.7050602@jacaranda.org>
References: <4A6B619F.7050602@jacaranda.org>
Message-ID: <8DF40A54-6B7C-4E6B-B8B6-3A64A8DB9F97@cs.usfca.edu>

added:

http://www.antlr.org/jira/browse/ANTLR-402

Ter
On Jul 25, 2009, at 12:48 PM, David-Sarah Hopwood wrote:

> It would be convenient to be able to direct the output of  
> TokenRewriteStream
> to any Appendable object, rather than just to a String. This would  
> avoid
> unnecessary copying when constructing output that includes the  
> rewritten
> text, but may include more than one "program", or text from another
> source.
>
> The implementation would be really simple -- add or change the  
> following
> methods in TokenRewriteStream:
>
>  public String toString(String programName, int start, int end) {
>      return appendTo(new StringBuilder(), programName, start, end)
>        .toString();
>  }
>
>  public Appendable appendTo(Appendable buf) {
>      return appendTo(buf, MIN_TOKEN_INDEX, size()-1);
>  }
>
>  public Appendable appendTo(Appendable buf, String programName) {
>      return appendTo(buf, programName, MIN_TOKEN_INDEX, size()-1);
>  }
>
>  public Appendable appendTo(Appendable buf, int start, int end) {
>      return appendTo(buf, DEFAULT_PROGRAM_NAME, start, end);
>  }
>
>  public Appendable appendTo(Appendable buf, String programName,
>                             int start, int end) {
>      // implementation of existing toString(programName, start, end)
>      // method, but without "StringBuffer buf = new StringBuffer();",
>      // and returning buf.
>  }
>
>  public String toOriginalString(int start, int end) {
>      return appendOriginalTo(new StringBuilder(), start,  
> end).toString();
>  }
>
>  public Appendable appendOriginalTo(Appendable buf) {
>      return appendOriginalTo(buf, MIN_TOKEN_INDEX, size()-1);
>  }
>
>  public Appendable appendOriginalTo(Appendable buf, int start, int  
> end) {
>      for (int i=start; i>=MIN_TOKEN_INDEX && i<=end &&  
> i<tokens.size(); i++) {
>          buf.append(get(i).getText());
>      }
>      return buf;
>  }
>
> -- 
> David-Sarah Hopwood  ?  http://davidsarah.livejournal.com
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address


From james.robson at ymail.com  Sun Jul 26 21:52:23 2009
From: james.robson at ymail.com (James Robson)
Date: Sun, 26 Jul 2009 21:52:23 -0700 (PDT)
Subject: [antlr-interest] Excaping quotation characters in quoted strings -
	javascript target
Message-ID: <985360.57538.qm@web43509.mail.sp1.yahoo.com>

HI, I'm trying to allow escape sequencs in quoted strings  using the java script target.

I've a similar implementation using the Java Target which works without any problems. It seems that the ext is not available when using the javascirpt target.

Does anyone know how this could be solved for the javascript target?

Below are the lexer rules:


TEXT        
@init{var lBuf = "";}
    :   
           QUOTATION_MARK
           ( escaped=ESC {lBuf = lBuf.concat(this.getText());} | 
             normal=~(QUOTATION_MARK|'\\'|'\n'|'\r')     {lBuf = lBuf.concat(String.fromCharCode(normal));} )* 
           QUOTATION_MARK    
           {this.setText("\"".concat(lBuf, "\""));}
    ;

fragment
ESC
    :   '\\'
        (       'n'    {this.setText("\n");}
        |       'r'    {this.setText("\r");}
        |       't'    {this.setText("\t");}
        |       'b'    {this.setText("\b");}
        |       'f'    {this.setText("\f");}
        |       '"'    {this.setText("\\\"");}
        |       '\''   {this.setText("\'");}
        |       '\\'   {this.setText("\\");}
        )
    ;

QUOTATION_MARK
  : '"'
  ;



      ____________________________________________________________________________________
Access Yahoo!7 Mail on your mobile. Anytime. Anywhere.
Show me how: http://au.mobile.yahoo.com/mail
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090726/b3b491b2/attachment.html 

From james.robson at ymail.com  Sun Jul 26 22:05:11 2009
From: james.robson at ymail.com (James Robson)
Date: Sun, 26 Jul 2009 22:05:11 -0700 (PDT)
Subject: [antlr-interest] Excaping quotation characters in quoted
	strings - javascript target
In-Reply-To: <985360.57538.qm@web43509.mail.sp1.yahoo.com>
References: <985360.57538.qm@web43509.mail.sp1.yahoo.com>
Message-ID: <471196.68941.qm@web43512.mail.sp1.yahoo.com>

Don't worry I've solved the problem. It was my lack of JavaScript knowledge..



________________________________
From: James Robson <james.robson at ymail.com>
To: antlr-interest at antlr.org
Sent: Monday, 27 July, 2009 2:52:23 PM
Subject: [antlr-interest] Excaping quotation characters in quoted strings - javascript target


HI, I'm trying to allow escape sequencs in quoted strings  using the java script target.

I've a similar implementation using the Java Target which works without any problems. It seems that the ext is not available when using the javascirpt target.

Does anyone know how this could be solved for the javascript target?

Below are the lexer rules:


TEXT        
@init{var lBuf = "";}
    :   
           QUOTATION_MARK
           ( escaped=ESC {lBuf = lBuf.concat(this.getText());} | 
             normal=~(QUOTATION_MARK|'\\'|'\n'|'\r')     {lBuf = lBuf.concat(String.fromCharCode(normal));} )* 
           QUOTATION_MARK    
           {this.setText("\"".concat(lBuf, "\""));}
    ;

fragment
ESC
    :   '\\'
        (       'n'    {this.setText("\n");}
        |       'r'    {this.setText("\r");}
        |       't'    {this.setText("\t");}
        |       'b'    {this.setText("\b");}
        |       'f'    {this.setText("\f");}
        |       '"'    {this.setText("\\\"");}
        |       '\''   {this.setText("\'");}
        |       '\\'   {this.setText("\\");}
        )
    ;

QUOTATION_MARK
  : '"'
  ;

________________________________
 Access Yahoo!7 Mail on your mobile. Anytime. Anywhere. Show me how.


      ____________________________________________________________________________________
Access Yahoo!7 Mail on your mobile. Anytime. Anywhere.
Show me how: http://au.mobile.yahoo.com/mail
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090726/71bb8505/attachment.html 

From swetha.s87 at gmail.com  Mon Jul 27 04:20:13 2009
From: swetha.s87 at gmail.com (swetha swetha)
Date: Mon, 27 Jul 2009 12:20:13 +0100
Subject: [antlr-interest] error(133)
Message-ID: <91be5a010907270420s76c111dek66d6e51d63a65c81@mail.gmail.com>

For my dissertation, i have to use an old grammar file which was developed
using antlr 2 version, i am having problems with the grammar rules.

declation
            :     A=type B=declation1
                {#declation = #(A, B);}
declationbit!
            :     A=declationname (SYMEQUALS! B=declationstring)?
                {#declationbit = #([VIRDEC, "declaration"], ([NOTHING,
"head"], A),([NOTHING, "body"], B));}
            ;
    here VIRDEC and NOTHING are the tokens. I cant understand what should be
changed in the braces {} inorder to be able to run in antlr v3.It would be
better if you can explain what that means.
Thankyou.

My second doubt is that when i try to debug the grammar, it gives me a
warning and error of number 133 and the error message is as follows:

*[12:02:20] Checking Grammar...
[12:02:27] warning(149): Dfa.g:0:0: rewrite syntax or operator with no
output option; setting output=AST
[12:03:47] warning(149): Dfa.g:0:0: rewrite syntax or operator with no
output option; setting output=AST
[12:03:47] warning(149): F:\Documents and
Settings\naveen\Desktop\proj\Dfa.g:0:0: rewrite syntax or operator with no
output option; setting output=AST
[12:03:47] warning(149): Dfa__.g:0:0: rewrite syntax or operator with no
output option; setting output=AST
[12:03:47] error(133): Dfa__.g:0:0: illegal option output
.

can you please fix this bug. i am receiving this error irrespective of using
the output option =AST, even though i remove the option,it gives me the same
error.

Thankyou

Swetha
*
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090727/77ce31af/attachment.html 

From will at tribbey.net  Mon Jul 27 06:59:39 2009
From: will at tribbey.net (William Tribbey)
Date: Mon, 27 Jul 2009 09:59:39 -0400
Subject: [antlr-interest] tips on grammar subrules
Message-ID: <52e3c4e00907270659h502a73a0lbc0ab4278b789a95@mail.gmail.com>

Hello Everyone,

I am hoping someone can set me straight on values from subrules.
I am working with the Java 1.5  grammar done by Terence Parr that
I downloaded from the grammar page. I have Terence's book, which
has been very helpful, and I am having fun doing my work.

At one point I am trying to capture the import statements in a class
file. I am working with this rule:


importDeclaration
   :   'import' 'static'? qualifiedName ('.' '*')? ';'

I can tell whether the import is static and get the qualifiedName value
easily
doing this:

importDeclaration
   :   'import' s='static'? name=qualifiedName ('.' '*')? ';'

Of course, I have some actions and I am using some scope variables to save
these values. I would also like to get the .* if present, but so far I have
only been
able to do that with something like this:

importDeclaration
    :   'import' s='static'? name=qualifiedName ('.' '*'
{$importDeclaration::star=true;})? ';'

This works but feels a tad kludgy to me, so I am wondering what am I missing
to do this
as neatly as possible.

Any hints appreciated.

Will Tribbey
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090727/c0cf7f8e/attachment.html 

From rob_dougan at sympatico.ca  Mon Jul 27 08:17:23 2009
From: rob_dougan at sympatico.ca (Rob Dougan)
Date: Mon, 27 Jul 2009 15:17:23 +0000
Subject: [antlr-interest] Implementing Nested Scopes in C#
Message-ID: <BLU125-W18E29F3A553FD0DE5EC08787140@phx.gbl>


I am writing a simple C-like interpreter (blocks, expressions, variable declarations, function calls). I would like to use a tree-grammar to generate the walker.

The target language is c# (csharp2), i am using ANTLR 3.1.3. ANTLRWorks 1.2.3.

 

I bought a copy of Terrence's book on Language design patterns, and i was working through the "Symbol Table for Nested Scopes" example and I realized that the current version of the c# target doesn't have tree filters.

 

I would like to create a scope tree, and push a local scope when I enter a block ("{" ), declare vars, resolve refs etc, in that scope, then pop the scope  when i leave the block("}") in accordance with the pattern.

 

In the absence of the filter capability, do I use the classical way of deriving a tree grammar from the lex/parser grammar (via rewrites)? I am working on this now and i seem to be able to recognize the BLOCK on the way down, but not on the way up (but that could just be my rule writing, i am a newbie).

 

Is this the right approach? 

 

any help/suggestions/experiences would be appreciated, thank-you.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090727/dc82fb7c/attachment.html 

From mtgardn at sandia.gov  Mon Jul 27 08:29:14 2009
From: mtgardn at sandia.gov (Gardner, Michael T)
Date: Mon, 27 Jul 2009 09:29:14 -0600
Subject: [antlr-interest] Parser Generator Error
In-Reply-To: <C206288F-4410-4E72-A7FC-6DD838D938CA@antlr.org>
References: <20090709230842.2D31F3418451@www.antlr.org>
	<A706A184-FD3A-4BEC-BCED-A5F1BE960BE1@antlr.org>
	<F9F38212E2D77948B1CD89D239A7C07B10EBC8A8C9@ES01SNLNT.srn.sandia.gov>
	<EB3D6030-A64D-455D-9979-60C66084A8D7@antlr.org>
	<F9F38212E2D77948B1CD89D239A7C07B10EBC8A8EB@ES01SNLNT.srn.sandia.gov>
	<A9F24076-B203-4260-A37A-A6D4BB168FEB@antlr.org>
	<F9F38212E2D77948B1CD89D239A7C07B10EBC8A8F2@ES01SNLNT.srn.sandia.gov>
	<BB581B27-0CE3-4570-8885-0308C7089FF9@antlr.org>
	<F9F38212E2D77948B1CD89D239A7C07B10EBD2C40A@ES01SNLNT.srn.sandia.gov>
	<BCA1786B-FDD3-4016-9849-A4CCF6914E34@antlr.org>
	<F9F38212E2D77948B1CD89D239A7C07B10EBD2C972@ES01SNLNT.srn.sandia.gov>
	<C206288F-4410-4E72-A7FC-6DD838D938CA@antlr.org>
Message-ID: <F9F38212E2D77948B1CD89D239A7C07B10EBD2CC6D@ES01SNLNT.srn.sandia.gov>

In looking at the Tree Interpreter grammar as described in chapter 9 of "Language Design Patterns", I note that AntlrWorks warns of an if-then-else ambiguity when checking the grammar file (Pie.g).  Being new to ANTLR, I thought I would try resolving the ambiguity so that the warning goes away.  I referred to "The Definitive ANTLR Reference", chap 12, p305.  I implemented a modified if statement in the Pie.g grammar file as follows:

statement
	:	structDefinition
	|	qid '=' expr NL				-> ^('=' qid expr)
	|	'return' expr NL  			-> ^('return' expr)
	|	'print' expr NL	 			-> ^('print' expr)
	|	ifstat					-> ifstat
	|	'while' expr slist			-> ^('while' expr slist)
	|	call NL					-> call
	|	NL						->
	;


ifstat
	options 
	{ backtrack = true;}
	:	'if' expr c=slist 'else' el=slist 	-> ^('if' expr $c $el)
	|	'if' expr d=slist  			-> ^('if' expr $d )
	;

Using AntlrWorks, the grammar now checks fine and yields no warnings on code generation, BUT, the ANTLR-generated PieParser code will not compile!  Here's the error message:

Compiling 20 source files to D:\Projects\Sandbox\ParserGenerators\Tools\Antlr\ReferenceBooks\LanguageDesignPatterns\Projects\TreeInterpX\build\classes
D:\Projects\Sandbox\ParserGenerators\Tools\Antlr\ReferenceBooks\LanguageDesignPatterns\Projects\TreeInterpX\src\PieParser.java:493: cannot find symbol
symbol  : variable fs
location: class PieParser
              currentScope = new LocalScope(fs);
D:\Projects\Sandbox\ParserGenerators\Tools\Antlr\ReferenceBooks\LanguageDesignPatterns\Projects\TreeInterpX\src\PieParser.java:503: cannot find symbol
symbol  : variable fs
location: class PieParser
                              fs.blockAST = (slist18!=null?((PieAST)slist18.tree):null);
                              ^
Note: D:\Projects\Sandbox\ParserGenerators\Tools\Antlr\ReferenceBooks\LanguageDesignPatterns\Projects\TreeInterpX\src\Interpreter.java uses unchecked or unsafe operations.
Note: Recompile with -Xlint:unchecked for details.

Indeed, there is no declaration of an fs (FunctionSymbol) in scope.  Has this error been identified previously?  Is there a patch to fix this in ANTLR?  Are there any problems or side effects with just ignoring the error as you suggested in the book?  Does anyone have a working definition of the if-then-else statement that does not generate AntlrWorks warnings, compiles cleanly (in Java), and works?

Michael T. Gardner


From will at tribbey.net  Mon Jul 27 09:15:16 2009
From: will at tribbey.net (William Tribbey)
Date: Mon, 27 Jul 2009 12:15:16 -0400
Subject: [antlr-interest] tips on grammar subrules
In-Reply-To: <52e3c4e00907270659h502a73a0lbc0ab4278b789a95@mail.gmail.com>
References: <52e3c4e00907270659h502a73a0lbc0ab4278b789a95@mail.gmail.com>
Message-ID: <52e3c4e00907270915l1fa6a771ne2f37d0388f9d7ab@mail.gmail.com>

Well, as I went back to the book and searched some sections, I decided to
change the action I was using for the subrule from this

importDeclaration
 :   'import' s='static'? name=qualifiedName ('.' '*'
{$importDeclaration::star=true;})? ';'

to this

importDeclaration
 :?? 'import' s='static'? name=qualifiedName ('.' s='*')? ';'

which does allow me simply to check the existence of the .* suffix by checking
the nullity of the text value for s.

This does remove a few lines of code and does the job, but if if
anyone has another
suggestion I would like to hear it, if only to learn.


Will Tribbey

From jimi at temporal-wave.com  Mon Jul 27 10:06:23 2009
From: jimi at temporal-wave.com (Jim Idle)
Date: Mon, 27 Jul 2009 07:06:23 -1000
Subject: [antlr-interest] Excaping quotation characters in quoted
	strings - javascript target
In-Reply-To: <985360.57538.qm@web43509.mail.sp1.yahoo.com>
References: <985360.57538.qm@web43509.mail.sp1.yahoo.com>
Message-ID: <57CA7B9C-9A88-4618-BA7B-6D1A487E2A9E@temporal-wave.com>

It is probably the code in JavaScriptTarget.java that deals with  
converting ANTLR escapes to the trget language. Copy the methods from  
Target.java. Is nyone maintaining this target?

Jim

On Jul 26, 2009, at 6:52 PM, James Robson <james.robson at ymail.com>  
wrote:

> HI, I'm trying to allow escape sequencs in quoted strings  using the  
> java script target.
>
> I've a similar implementation using the Java Target which works  
> without any problems. It seems that the ext is not available when  
> using the javascirpt target.
>
> Does anyone know how this could be solved for the javascript target?
>
> Below are the lexer rules:
>
>
> TEXT
> @init{var lBuf = "";}
>     :
>            QUOTATION_MARK
>            ( escaped=ESC {lBuf = lBuf.concat(this.getText());} |
>              normal=~(QUOTATION_MARK|'\\'|'\n'|'\r')     {lBuf =  
> lBuf.concat(String.fromCharCode(normal));} )*
>            QUOTATION_MARK
>            {this.setText("\"".concat(lBuf, "\""));}
>     ;
>
> fragment
> ESC
>     :   '\\'
>         (       'n'    {this.setText("\n");}
>         |       'r'    {this.setText("\r");}
>         |       't'    {this.setText("\t");}
>         |       'b'    {this.setText("\b");}
>         |       'f'    {this.setText("\f");}
>         |       '"'    {this.setText("\\\"");}
>         |       '\''   {this.setText("\'");}
>         |       '\\'   {this.setText("\\");}
>         )
>     ;
>
> QUOTATION_MARK
>   : '"'
>   ;
>
> Access Yahoo!7 Mail on your mobile. Anytime. Anywhere. Show me how.
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090727/943b7517/attachment.html 

From oehrstroem at gmail.com  Mon Jul 27 10:10:50 2009
From: oehrstroem at gmail.com (Fredrik Ohrstrom)
Date: Mon, 27 Jul 2009 19:10:50 +0200
Subject: [antlr-interest] Help with discarding lexer tokens....
In-Reply-To: <4A68D8AA.9060606@jacaranda.org>
References: <8d80b1570907220306o48703310va41abd10eafdc866@mail.gmail.com>
	<4A67DC26.5070606@jacaranda.org> <4A68D8AA.9060606@jacaranda.org>
Message-ID: <8d80b1570907271010w4fbf8308y787eb0a40e6e9dfb@mail.gmail.com>

I tried explicit tokens as well, but it still uses too little lookahead.
I did finally solve it in a reasonable way, i.e. the grammar
stays unchanged, and I can add any number of weird discard rules.
:-)

grammar Test;
cmd :  (CMD suffix? )* ;
suffix : '[' CMD ']'  ;
CMD : 'a'..'z'+ ;
DISCARD : { (input.LA(1)=='[' &&
                      input.LA(2)=='r' &&
                      input.LA(3)=='e' &&
                      input.LA(4)=='m &&
                      input.LA(5)=='o' &&
                      input.LA(6)=='v' &&
                      input.LA(7)=='e &&
                      input.LA(8)==']') } ?=> '[remove]' { $channel=HIDDEN; } ;
WS : (' '|'\t'|'\r'|'\n')+ { $channel=HIDDEN; } ;

Thanks!

2009/7/23 David-Sarah Hopwood <david-sarah at jacaranda.org>:
> David-Sarah Hopwood wrote:
>> Fredrik Ohrstrom wrote:
>>> I would like to ignore certain tokens found at the lexer level.
>>> For example: my example source code is sprinkled with tokens
>>> like [remove] and I want to prevent these to be seen by the parser.
>> [...]
>>> I did finally stumble upon a solution, but it is ugly.
>>>
>>> grammar Test;
>>> cmd ?: ?(CMD suffix? )* ;
>>> suffix : LB CMD RB ;
>>
>> ? suffix : LB c=CMD RB
>> ? ? { if ($c != null && $c.text.equals("remove")) $channel = HIDDEN; } ;
>
> Sorry, setting $channel only makes sense in a lexer rule, so this won't
> work as written.
>
> Rather than using the explicit test above, I think it is probably more
> elegant to declare "[remove]" in the tokens block (which gives it precedence
> over other rules that it would otherwise be ambiguous with), like this:
>
> ?grammar Test;
>
> ?tokens {
> ? ?REMOVE: '[remove]';
> ?}
>
> ?// should probably rename this rule for clarity
> ?cmd : (Cmd Suffix?)* ;
>
> ?Remove : REMOVE { $channel = HIDDEN; } ;
>
> ?Suffix : '[' CMD ']' ;
>
> ?Cmd : CMD ;
>
> ?fragment CMD : ('a'..'z')+ ;
>
> ?WS : (' '|'\t'|'\r'|'\n')+ { $channel=HIDDEN; } ;
>
> This allows whitespace between Cmd and Suffix, or between multiple
> Suffixes. It wasn't clear from your original post whether you want
> to allow whitespace there or not.
>
>> Thanks! But as I wrote in the other email, suffix is
>> unfortunately really complicated and occurs in
>> several different places in the parser.
>
> Given the correction above, is there still a problem?
> Suffix could be made arbitrarily complicated and used in any number
> of places.
>
> --
> David-Sarah Hopwood ?? ?http://davidsarah.livejournal.com
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>

From martin_mamo at hotmail.com  Mon Jul 27 12:03:53 2009
From: martin_mamo at hotmail.com (Martin Mamo)
Date: Mon, 27 Jul 2009 20:03:53 +0100
Subject: [antlr-interest] version 2 to version 3 antrl grammar conversion
Message-ID: <COL111-W7AACD75E0FCE519D30B8293140@phx.gbl>


 I have a version 2 antlr grammar. How do I convert it to work with 
 version 3? Is much work required? Is a tool available?

 Thanks
 Martin



_________________________________________________________________
Windows Live Messenger: Happy 10-Year Anniversary?get free winks and emoticons.
http://clk.atdmt.com/UKM/go/157562755/direct/01/
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090727/fa7e0a00/attachment.html 

From james.abley at gmail.com  Mon Jul 27 14:41:53 2009
From: james.abley at gmail.com (James Abley)
Date: Mon, 27 Jul 2009 22:41:53 +0100
Subject: [antlr-interest] version 2 to version 3 antrl grammar conversion
In-Reply-To: <COL111-W7AACD75E0FCE519D30B8293140@phx.gbl>
References: <COL111-W7AACD75E0FCE519D30B8293140@phx.gbl>
Message-ID: <23fce8e60907271441j3c71ccd8o5801d6149c8ff3e4@mail.gmail.com>

2009/7/27 Martin Mamo <martin_mamo at hotmail.com>

>   I have a version 2 antlr grammar. How do I convert it to work with
>  version 3? Is much work required? Is a tool available?
>
>  Thanks
>  Martin
>


There's the wiki [1].  I'm not aware of any tool that could help.

Cheers,

James

[1]
http://www.antlr.org/wiki/display/ANTLR3/Migrating+from+ANTLR+2+to+ANTLR+3
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090727/8d145119/attachment.html 

From parrt at cs.usfca.edu  Mon Jul 27 16:12:13 2009
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon, 27 Jul 2009 16:12:13 -0700
Subject: [antlr-interest] version 2 to version 3 antrl grammar conversion
In-Reply-To: <23fce8e60907271441j3c71ccd8o5801d6149c8ff3e4@mail.gmail.com>
References: <COL111-W7AACD75E0FCE519D30B8293140@phx.gbl>
	<23fce8e60907271441j3c71ccd8o5801d6149c8ff3e4@mail.gmail.com>
Message-ID: <3021624B-5380-4EC7-8FFD-021181563C87@cs.usfca.edu>

v2v3 is available but a bit off
Ter
On Jul 27, 2009, at 2:41 PM, James Abley wrote:

>
>
> 2009/7/27 Martin Mamo <martin_mamo at hotmail.com>
>  I have a version 2 antlr grammar. How do I convert it to work with
>  version 3? Is much work required? Is a tool available?
>
>  Thanks
>  Martin
>
>
> There's the wiki [1].  I'm not aware of any tool that could help.
>
> Cheers,
>
> James
>
> [1] http://www.antlr.org/wiki/display/ANTLR3/Migrating+from+ANTLR+2+to+ANTLR+3
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address


From tho at catglobe.com  Tue Jul 28 01:22:52 2009
From: tho at catglobe.com (Duy Tho Nguyen)
Date: Tue, 28 Jul 2009 15:22:52 +0700
Subject: [antlr-interest] Question about Composite grammar
Message-ID: <4A6EB55C.60903@catglobe.com>

Currently , i have a problem with my grammar file ( Code too big ) so 
that i decide to split my grammar file in to some 2 smaller ones. It 
seemed to me that import function does not support more than 1 lexer 
grammar file
If i put like this :
import lexer_file_1,lexer_file_2;
it raise an error when generate code :

/
java.lang.ArrayIndexOutOfBoundsException: 3
    at org.antlr.tool.Rule.trackRuleReferenceInAlt(Rule.java:283)
    at org.antlr.tool.Grammar.altReferencesRule(Grammar.java:1867)
    at 
org.antlr.grammar.v2.DefineGrammarItemsWalker.atom(DefineGrammarItemsWalker.java:2096)
    at 
org.antlr.grammar.v2.DefineGrammarItemsWalker.element(DefineGrammarItemsWalker.java:1717)
    at 
org.antlr.grammar.v2.DefineGrammarItemsWalker.alternative(DefineGrammarItemsWalker.java:1571)
    at 
org.antlr.grammar.v2.DefineGrammarItemsWalker.block(DefineGrammarItemsWalker.java:1201)
    at 
org.antlr.grammar.v2.DefineGrammarItemsWalker.rule(DefineGrammarItemsWalker.java:924)
    at 
org.antlr.grammar.v2.DefineGrammarItemsWalker.rules(DefineGrammarItemsWalker.java:576)
    at 
org.antlr.grammar.v2.DefineGrammarItemsWalker.grammarSpec(DefineGrammarItemsWalker.java:361)
    at 
org.antlr.grammar.v2.DefineGrammarItemsWalker.grammar(DefineGrammarItemsWalker.java:148)
    at org.antlr.tool.Grammar.defineGrammarSymbols(Grammar.java:665)
    at 
org.antlr.tool.CompositeGrammar.defineGrammarSymbols(CompositeGrammar.java:351)
    at org.antlr.tool.Grammar.setGrammarContent(Grammar.java:578)
    at 
org.antlr.works.grammar.antlr.ANTLRGrammarEngineImpl.createNewGrammar(Unknown 
Source)
    at 
org.antlr.works.grammar.antlr.ANTLRGrammarEngineImpl.createLexerGrammar(Unknown 
Source)
    at 
org.antlr.works.grammar.antlr.ANTLRGrammarEngineImpl.createGrammars(Unknown 
Source)
    at 
org.antlr.works.grammar.antlr.ANTLRGrammarEngineImpl.analyze(Unknown Source)
    at org.antlr.works.grammar.engine.GrammarEngineImpl.analyze(Unknown 
Source)
    at org.antlr.works.debugger.local.DBLocal.analyzeGrammar(Unknown Source)
    at 
org.antlr.works.debugger.local.DBLocal.generateAndCompileGrammar(Unknown 
Source)
    at org.antlr.works.debugger.local.DBLocal.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)

/Does anyone get this problem before ? Please help me with it . If you 
need some more detail , please ask me .

Kinds regard
/
/
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090728/476a5a48/attachment.html 

From andy.grove at codefutures.com  Tue Jul 28 05:21:25 2009
From: andy.grove at codefutures.com (Andy Grove)
Date: Tue, 28 Jul 2009 06:21:25 -0600
Subject: [antlr-interest] Handling HASEXCEPTION / HASFAILURE
Message-ID: <E22BC4E3-B290-4328-8E38-1A344BA2B4F6@codefutures.com>

Because the C version of ANTLR does not support @after actions, I have  
implemented the equivalent in my grammar by placing a block of code at  
the end of my rule. For example:

whereClause
@init { sse.pushCall(sse.WHERECLAUSE); }
	:
	(
	WHERE
		c = searchCondition
      )
      { sse.popCall(); } <-- @after action
	;

I noticed that this @after action was not running for some of my input  
data, so I added debug logging to the generated parser code and found  
that one of the calls to the HASEXCEPTION macro is returning true and  
the parser is finishing at that point.

How am I supposed to detect if an exception like this has occurred and  
how do I find out what is causing the exception?

Thanks,

Andy.




-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090728/cb5c2881/attachment.html 

From jimi at temporal-wave.com  Tue Jul 28 10:35:42 2009
From: jimi at temporal-wave.com (Jim Idle)
Date: Tue, 28 Jul 2009 07:35:42 -1000
Subject: [antlr-interest] Question about Composite grammar
In-Reply-To: <4A6EB55C.60903@catglobe.com>
References: <4A6EB55C.60903@catglobe.com>
Message-ID: <009BB768-3121-4AAB-AB97-AE350B9A98E6@temporal-wave.com>

This is a bug but it happens when you reference a token somewhere that  
has no definition. You have to manually work out what the token is and  
define it or do what I do and debug it. We have talked about the fix  
but it is a bit tricky foe other reasons and has not been done yet.

It could be a side effect of multiple lexer files but if you need to  
spilt your lexer then there is likely a design issue I would think.

Jim

On Jul 27, 2009, at 10:22 PM, Duy Tho Nguyen <tho at catglobe.com> wrote:

> Currently , i have a problem with my grammar file ( Code too big )  
> so that i decide to split my grammar file in to some 2 smaller ones.  
> It seemed to me that import function does not support more than 1  
> lexer grammar file
> If i put like this :
> import lexer_file_1,lexer_file_2;
> it raise an error when generate code :
>
>
> java.lang.ArrayIndexOutOfBoundsException: 3
>     at org.antlr.tool.Rule.trackRuleReferenceInAlt(Rule.java:283)
>     at org.antlr.tool.Grammar.altReferencesRule(Grammar.java:1867)
>     at org.antlr.grammar.v2.DefineGrammarItemsWalker.atom 
> (DefineGrammarItemsWalker.java:2096)
>     at org.antlr.grammar.v2.DefineGrammarItemsWalker.element 
> (DefineGrammarItemsWalker.java:1717)
>     at org.antlr.grammar.v2.DefineGrammarItemsWalker.alternative 
> (DefineGrammarItemsWalker.java:1571)
>     at org.antlr.grammar.v2.DefineGrammarItemsWalker.block 
> (DefineGrammarItemsWalker.java:1201)
>     at org.antlr.grammar.v2.DefineGrammarItemsWalker.rule 
> (DefineGrammarItemsWalker.java:924)
>     at org.antlr.grammar.v2.DefineGrammarItemsWalker.rules 
> (DefineGrammarItemsWalker.java:576)
>     at org.antlr.grammar.v2.DefineGrammarItemsWalker.grammarSpec 
> (DefineGrammarItemsWalker.java:361)
>     at org.antlr.grammar.v2.DefineGrammarItemsWalker.grammar 
> (DefineGrammarItemsWalker.java:148)
>     at org.antlr.tool.Grammar.defineGrammarSymbols(Grammar.java:665)
>     at org.antlr.tool.CompositeGrammar.defineGrammarSymbols 
> (CompositeGrammar.java:351)
>     at org.antlr.tool.Grammar.setGrammarContent(Grammar.java:578)
>     at  
> org.antlr.works.grammar.antlr.ANTLRGrammarEngineImpl.createNewGrammar 
> (Unknown Source)
>     at  
> org.antlr.works.grammar.antlr.ANTLRGrammarEngineImpl.createLexerGrammar( 
> Unknown Source)
>     at  
> org.antlr.works.grammar.antlr.ANTLRGrammarEngineImpl.createGrammars 
> (Unknown Source)
>     at org.antlr.works.grammar.antlr.ANTLRGrammarEngineImpl.analyze 
> (Unknown Source)
>     at org.antlr.works.grammar.engine.GrammarEngineImpl.analyze 
> (Unknown Source)
>     at org.antlr.works.debugger.local.DBLocal.analyzeGrammar(Unknown  
> Source)
>     at  
> org.antlr.works.debugger.local.DBLocal.generateAndCompileGrammar 
> (Unknown Source)
>     at org.antlr.works.debugger.local.DBLocal.run(Unknown Source)
>     at java.lang.Thread.run(Unknown Source)
>
> Does anyone get this problem before ? Please help me with it . If  
> you need some more detail , please ask me .
>
> Kinds regard
>
>
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090728/e598c40b/attachment.html 

From jimi at temporal-wave.com  Tue Jul 28 10:40:57 2009
From: jimi at temporal-wave.com (Jim Idle)
Date: Tue, 28 Jul 2009 07:40:57 -1000
Subject: [antlr-interest] Handling HASEXCEPTION / HASFAILURE
In-Reply-To: <E22BC4E3-B290-4328-8E38-1A344BA2B4F6@codefutures.com>
References: <E22BC4E3-B290-4328-8E38-1A344BA2B4F6@codefutures.com>
Message-ID: <9CBF7C17-C1A9-4B33-8759-B4214DBF5C79@temporal-wave.com>

The calling rule will make a call to the error message routines so  
check your stack there. But really you should parse, build a tree then  
do this in the tree walk and you won't have the issue.

Jim

On Jul 28, 2009, at 2:21 AM, Andy Grove <andy.grove at codefutures.com>  
wrote:

> Because the C version of ANTLR does not support @after actions, I  
> have implemented the equivalent in my grammar by placing a block of  
> code at the end of my rule. For example:
>
> whereClause
> @init { sse.pushCall(sse.WHERECLAUSE); }
> 	:
> 	(
> 	WHERE
> 		c = searchCondition
>      )
>      { sse.popCall(); } <-- @after action
> 	;
>
> I noticed that this @after action was not running for some of my  
> input data, so I added debug logging to the generated parser code  
> and found that one of the calls to the HASEXCEPTION macro is  
> returning true and the parser is finishing at that point.
>
> How am I supposed to detect if an exception like this has occurred  
> and how do I find out what is causing the exception?
>
> Thanks,
>
> Andy.
>
>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090728/bd9c921b/attachment.html 

From kshaw at kendallshaw.com  Tue Jul 28 14:37:34 2009
From: kshaw at kendallshaw.com (Kendall Shaw)
Date: Tue, 28 Jul 2009 14:37:34 -0700
Subject: [antlr-interest] rule return value not declared
Message-ID: <8763dcmqu9.fsf@pokey.kendallshaw.com>

Hi,

This is a toy example, but it shows a problem I'm having. Is it a bug,
or am I doing something wrong? I want to use the text matched by
expr_sub to modify objects created by actions in that rule, so I do
that in the expr rule ($e.text). The result is that the return
attribute "list" is not declared in the resulting parser:


grammar test;

tokens {
    THING = 'thing' ;
    LP = '(' ;
    RP = ')' ;
    OR = '|' ;
}
@header {
import java.util.ArrayList;
import java.util.List;
}
expr[List<List<String>> ll]
    : e=expr_sub { $e.list.add($e.text); ll.add($e.list); }
    ;

expr_sub returns [List<String> list]
    @init { list = new ArrayList<String>(); }
    : (t=thingy { list.add($t.name); })+
    ;

thingy returns [String name]
    @init { name = ""; }
    : THING LP (NAME { name = $NAME.text; })? RP
    ;

NAME : ('a'..'z')+ ;


The code generated for expr_sub, see that "list" is not declared:


    public static class expr_sub_return extends ParserRuleReturnScope {
        public List<String> list;
    };

    // $ANTLR start "expr_sub"
    // test.g:17:1: expr_sub returns [List<String> list] : (t= thingy )+ ;
    public final testParser.expr_sub_return expr_sub() throws RecognitionException {
        testParser.expr_sub_return retval = new testParser.expr_sub_return();
        retval.start = input.LT(1);

        String t = null;


         list = new ArrayList<String>(); 
        try {
            // test.g:19:5: ( (t= thingy )+ )
            // test.g:19:7: (t= thingy )+
            {
            // test.g:19:7: (t= thingy )+
            int cnt1=0;
            loop1:
            do {
                int alt1=2;
                int LA1_0 = input.LA(1);

                if ( (LA1_0==THING) ) {
                    alt1=1;
                }


                switch (alt1) {
            	case 1 :
            	    // test.g:19:8: t= thingy
            	    {
            	    pushFollow(FOLLOW_thingy_in_expr_sub109);
            	    t=thingy();

            	    state._fsp--;

            	     list.add(t); 

            	    }
            	    break;

            	default :
            	    if ( cnt1 >= 1 ) break loop1;
                        EarlyExitException eee =
                            new EarlyExitException(1, input);
                        throw eee;
                }
                cnt1++;
            } while (true);


            }

            retval.stop = input.LT(-1);

        }
        catch (RecognitionException re) {
            reportError(re);
            recover(input,re);
        }
        finally {
        }
        return retval;
    }

From tnurkkala at cse.taylor.edu  Tue Jul 28 16:13:28 2009
From: tnurkkala at cse.taylor.edu (Tom Nurkkala)
Date: Tue, 28 Jul 2009 18:13:28 -0500
Subject: [antlr-interest] Token tip
Message-ID: <0DB5DD6A-208C-4D01-B91C-560298993747@cse.taylor.edu>

Quick tip if you are working with multiple grammars, say T.g (a lexer/ 
parser) and W.g (a tree grammar):

It's possible for the T.tokens and W.tokens file to get out of sync if  
you are renaming tokens.  If a token used by both grammars is called  
TKN, it will be defined to have different values in the two tokens  
files (e.g., TKN=7 in one file and TKN=22 in the other).  If you use  
ANTLRWorks (you should -- it's glorious!), you'll find that it will  
highlight the mismatched token with the wavy red underline.

The simplest solution is to simply delete both token files and re-run  
ANTLR on both grammars.  All better.

tom,


From sadie at kind.ocn.ne.jp  Wed Jul 29 00:10:18 2009
From: sadie at kind.ocn.ne.jp (sunao furukawa)
Date: Wed, 29 Jul 2009 16:10:18 +0900
Subject: [antlr-interest] About AST construction and rewriting for tree
	parsers?
Message-ID: <A1BEE88B36EA4095A7CD6B4C3B410970@sunaoPC>

Hello Everybody!
I looked at ANTLR 3.1 Release Notes.
I cannot understand AST construction and rewriting for tree parsers.
If option rewrite=true is done,Can I build new ASTs from existing ASTs. 
Please tell me how to build new ASTs from existing ASTs.



From michael.bedward at gmail.com  Wed Jul 29 00:45:54 2009
From: michael.bedward at gmail.com (Michael Bedward)
Date: Wed, 29 Jul 2009 17:45:54 +1000
Subject: [antlr-interest] About AST construction and rewriting for tree
	parsers?
In-Reply-To: <A1BEE88B36EA4095A7CD6B4C3B410970@sunaoPC>
References: <A1BEE88B36EA4095A7CD6B4C3B410970@sunaoPC>
Message-ID: <e24c4c270907290045x493f71co525075321455363b@mail.gmail.com>

Hi,

There are some fairly simple examples of tree rewriting in my Jiffle
language grammars:

http://code.google.com/p/jai-tools/source/browse/#svn/trunk/jiffle/src/main/antlr3/jaitools/jiffle/parser

Jiffle.g is the initial lexer / parser grammar.
The various MorphX.g files plus VarClassifier.g and MakeRuntime.g all
do bits of AST rewriting.

Hope this helps,

Michael

From antlr at mirality.co.nz  Wed Jul 29 01:37:42 2009
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Wed, 29 Jul 2009 20:37:42 +1200
Subject: [antlr-interest] rule return value not declared
In-Reply-To: <8763dcmqu9.fsf@pokey.kendallshaw.com>
References: <8763dcmqu9.fsf@pokey.kendallshaw.com>
Message-ID: <20090729084331.057B03418386@www.antlr.org>

At 09:37 29/07/2009, Kendall Shaw wrote:
 >The result is that the return attribute "list" is not
 >declared in the resulting parser:
[...]
 >    @init { list = new ArrayList<String>(); }
 >    : (t=thingy { list.add($t.name); })+

You should be using $list here.


From bergschloss at ukr.net  Wed Jul 29 02:15:32 2009
From: bergschloss at ukr.net (Sergiy Karpenko)
Date: Wed, 29 Jul 2009 12:15:32 +0300
Subject: [antlr-interest] gUnit FAIL-tests and exception hanling
Message-ID: <E1MW5G0-000Iwq-1k@ffe1.ukr.net>

Good day    I have a question.    For example, I make a parser grammar and gUnit tests for it.    gUnit also contains FAIL-test, such as    rule:    "any text" FAIL    It works well, but when I make excaption hadling    ?- override emitErrorMessage(String msg) , or displayRecognitionError(..)    ?- all FAIL-tests fail.    Research shows that gUnit listen System.err ?stream to check test.    Is there any decisions except next one?    - leave System.err.println(msg); in?emitErrorMessage;    - redirect?System.err stream before call parsers;    Thanks  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090729/ac3704c3/attachment.html 

From martin_mamo at hotmail.com  Wed Jul 29 04:19:22 2009
From: martin_mamo at hotmail.com (Martin Mamo)
Date: Wed, 29 Jul 2009 12:19:22 +0100
Subject: [antlr-interest] version 2 to version 3 antrl grammar conversion
In-Reply-To: <3021624B-5380-4EC7-8FFD-021181563C87@cs.usfca.edu>
References: <COL111-W7AACD75E0FCE519D30B8293140@phx.gbl>
	<23fce8e60907271441j3c71ccd8o5801d6149c8ff3e4@mail.gmail.com> 
	<3021624B-5380-4EC7-8FFD-021181563C87@cs.usfca.edu>
Message-ID: <COL111-W12C728EE89ACBDF8747A0693120@phx.gbl>


Thanks for your replies. Do you know where I can download the tool v2v3 from?

Regards
Martin

> From: parrt at cs.usfca.edu
> To: james.abley at gmail.com
> Date: Mon, 27 Jul 2009 16:12:13 -0700
> CC: antlr-interest at antlr.org
> Subject: Re: [antlr-interest] version 2 to version 3 antrl grammar conversion
> 
> v2v3 is available but a bit off
> Ter
> On Jul 27, 2009, at 2:41 PM, James Abley wrote:
> 
> >
> >
> > 2009/7/27 Martin Mamo <martin_mamo at hotmail.com>
> >  I have a version 2 antlr grammar. How do I convert it to work with
> >  version 3? Is much work required? Is a tool available?
> >
> >  Thanks
> >  Martin
> >
> >
> > There's the wiki [1].  I'm not aware of any tool that could help.
> >
> > Cheers,
> >
> > James
> >
> > [1] http://www.antlr.org/wiki/display/ANTLR3/Migrating+from+ANTLR+2+to+ANTLR+3
> >
> > List: http://www.antlr.org/mailman/listinfo/antlr-interest
> > Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address
> 
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address

_________________________________________________________________
Windows Live Messenger: Happy 10-Year Anniversary?get free winks and emoticons.
http://clk.atdmt.com/UKM/go/157562755/direct/01/
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090729/288d9955/attachment.html 

From benblo+ANTLR at gmail.com  Wed Jul 29 07:40:50 2009
From: benblo+ANTLR at gmail.com (Benoit Fouletier)
Date: Wed, 29 Jul 2009 16:40:50 +0200
Subject: [antlr-interest] semantic predicates using rule parameters
Message-ID: <b02eee6b0907290740q3ca3c934w7f7cb401ba69f8a9@mail.gmail.com>

How come this is valid...
*rule[Boolean condition]*
* **:** **a*
* **->** **{condition}?** **IMAGINARY a*
* **->** **a*
* **|** **b*
* **;*

... but this isn't?

*rule[Boolean condition]*
* **:** **{condition}?*
* **a*
* **->** **IMAGINARY a*
* **|** **b*
* **;*

How can I work around it? I'm having a hard time understanding how to pass
values around...

     Ben

PS: for the second version I get a "cannot find symbol" error...
[16:39:32] symbol  : variable condition
[16:39:32] location: class translatorParser
[16:39:32]         if ( !(evalPredicate(condition,"condition")) ) {
[16:39:32]                              ^
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090729/900f526e/attachment.html 

From williamstw at gmail.com  Wed Jul 29 08:25:27 2009
From: williamstw at gmail.com (Tim Williams)
Date: Wed, 29 Jul 2009 11:25:27 -0400
Subject: [antlr-interest] Simple Tree Rewrite help
Message-ID: <499888440907290825u31ce02fepacae90252136ff50@mail.gmail.com>

I'm trying to get a tree rewrite version of something like this:

query:  LPAREN! expr (OR_TOK^ expr)+ RPAREN!;

This seems to do what I want, but I need a tree rewrite version so
that I can send something other than OR_TOK as the root, namely an
normalized "OR" token.  I've tried:

-> ^(OR expr expr)+;

with no luck.

Any help appreciated,

Thanks,
--tim

From williamstw at gmail.com  Wed Jul 29 08:38:47 2009
From: williamstw at gmail.com (Tim Williams)
Date: Wed, 29 Jul 2009 11:38:47 -0400
Subject: [antlr-interest] Simple Tree Rewrite help
In-Reply-To: <499888440907290825u31ce02fepacae90252136ff50@mail.gmail.com>
References: <499888440907290825u31ce02fepacae90252136ff50@mail.gmail.com>
Message-ID: <499888440907290838k3c51459eoc52e299002a9d64b@mail.gmail.com>

Answering my own question, kinda.  Here's what works[1], still
noodling through exactly *why* it works:)

query: LPAREN (expr->expr) ((OR_TOK e=expr) -> ^(OR $query $e))+ RPAREN


--tim

[1] - p174, TDAR

On Wed, Jul 29, 2009 at 11:25 AM, Tim Williams<williamstw at gmail.com> wrote:
> I'm trying to get a tree rewrite version of something like this:
>
> query: ?LPAREN! expr (OR_TOK^ expr)+ RPAREN!;
>
> This seems to do what I want, but I need a tree rewrite version so
> that I can send something other than OR_TOK as the root, namely an
> normalized "OR" token. ?I've tried:
>
> -> ^(OR expr expr)+;
>
> with no luck.
>
> Any help appreciated,
>
> Thanks,
> --tim
>

From jimi at temporal-wave.com  Wed Jul 29 10:07:55 2009
From: jimi at temporal-wave.com (Jim Idle)
Date: Wed, 29 Jul 2009 07:07:55 -1000
Subject: [antlr-interest] Simple Tree Rewrite help
In-Reply-To: <499888440907290825u31ce02fepacae90252136ff50@mail.gmail.com>
References: <499888440907290825u31ce02fepacae90252136ff50@mail.gmail.com>
Message-ID: <897D53A4-3D0D-4841-AF9B-2B5089354666@temporal-wave.com>

Just change the type of the token and don't use rewrites. It is  
simpler that way (assuming you add comments! ;)


(t=OR_TOK^ { $t.type = OR; } ...


Jim

On Jul 29, 2009, at 5:25 AM, Tim Williams <williamstw at gmail.com> wrote:

> I'm trying to get a tree rewrite version of something like this:
>
> query:  LPAREN! expr (OR_TOK^ expr)+ RPAREN!;
>
> This seems to do what I want, but I need a tree rewrite version so
> that I can send something other than OR_TOK as the root, namely an
> normalized "OR" token.  I've tried:
>
> -> ^(OR expr expr)+;
>
> with no luck.
>
> Any help appreciated,
>
> Thanks,
> --tim
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address

From kshaw at kendallshaw.com  Wed Jul 29 10:25:19 2009
From: kshaw at kendallshaw.com (Kendall Shaw)
Date: Wed, 29 Jul 2009 10:25:19 -0700
Subject: [antlr-interest] rule return value not declared
In-Reply-To: <20090729084330.D04B41C1353A3@c1mailgw43.amadis.com> (Gavin
	Lambert's message of "Wed\, 29 Jul 2009 20\:37\:42 +1200")
References: <8763dcmqu9.fsf@pokey.kendallshaw.com>
	<20090729084330.D04B41C1353A3@c1mailgw43.amadis.com>
Message-ID: <87iqhbl7uo.fsf@pokey.kendallshaw.com>

Gavin Lambert <antlr at mirality.co.nz> writes:

> At 09:37 29/07/2009, Kendall Shaw wrote:
>>The result is that the return attribute "list" is not
>>declared in the resulting parser:
> [...]
>>    @init { list = new ArrayList<String>(); }
>>    : (t=thingy { list.add($t.name); })+
>
> You should be using $list here.

Thanks. It's odd that it works in all of my other rules without the '$'.

From rse+antlr-interest at engelschall.com  Wed Jul 29 14:07:45 2009
From: rse+antlr-interest at engelschall.com (Ralf S. Engelschall)
Date: Wed, 29 Jul 2009 23:07:45 +0200
Subject: [antlr-interest] Scanning Perl-style quoted strings
	q{foo{bar}quux}?!
Message-ID: <20090729210745.GA9258@engelschall.com>

To a small ANTLR-based expression language I would like to add
Perl-style quoted strings:

    q{foo{bar}quux}
    q(foo(bar)quux)
    q!foo/bar/quux!

For those who don't know these constructs: it is a variant of
non-interpolating strings where one doesn't have to quote the quote
character. And in case of one of the open/close pairs of quote
characters ("(" + ")", "<" + ">", "[" + "]" and "{" + "}") one can even
nest them without escaping (as long as there as the nesting is correct,
i.e., equal number of open and close characters).

Remains the question: what is the best way to implement this in ANTLR 3?

Although my general knowledge about parsing is good, I'm not an ANTLR
expert. Hence, my naive and best attempt with ANTLR current is (trying
to leverage ANTLR predicates):

QSTRING    @init { int n = 0; }
           : 'q'
             ( options { greedy=false; }:
               open=('<'|'{'|'['|'('|'/'|'!')
               ( { (   $open == '<' && input.LT(1) == '<'
                    || $open == '{' && input.LT(1) == '{'
                    || $open == '[' && input.LT(1) == '['
                    || $open == '(' && input.LT(1) == '(')
                 }? . { n++; }
               | { (   $open == '<' && input.LT(1) == '>'
                    || $open == '{' && input.LT(1) == '}'
                    || $open == '[' && input.LT(1) == ']'
                    || $open == '(' && input.LT(1) == ')') && n > 0
                 }? . { n--; }
               | { (   $open == '<' && input.LT(1) != '>'
                    || $open == '{' && input.LT(1) != '}'
                    || $open == '[' && input.LT(1) != ']'
                    || $open == '(' && input.LT(1) != ')'
                    ||                 input.LT(1) != $open)
                 }? .
               )*
               ( { $open == '<' }?         '>'
               | { $open == '{' }?         '}'
               | { $open == '[' }?         ']'
               | { $open == '(' }?         ')'
               | { input.LT(1) == $open }? .
               )
             )
           ;

The ANTLR 3.1.3 generation process is happy about this, but the
resulting Java code cannot be compiled because some symbols are not
available:

| $ make
| [generate] SCLLexer.java SCLParser.java <- SCL.g
| [compile] SCLLexer.class <- SCLLexer.java
| SCLLexer.java:2210: cannot find symbol
| symbol  : variable open
| location: class SCLLexer.DFA11
|                         if ( (( (   open == '<' && input.LT(1) == '<'
|                                     ^
| SCLLexer.java:2210: cannot find symbol
| symbol  : method LT(int)
| location: interface org.antlr.runtime.IntStream
|                         if ( (( (   open == '<' && input.LT(1) == '<'
|                                                         ^
| SCLLexer.java:2211: cannot find symbol

The reason seems to be because ANTLR puts some of the stuff into an
own Java class (for a sub-DFA?) and this cannot access the "open" and
"input" variables. Is there a workaround?

But ok, perhaps I'm totally wrong with my whole solution attempt at
all. Perhaps those ANTLR semantic predicates would not even work the
way I expect them to work. Perhaps there is a lot easier approach in
scanning and recognizing those Perl-style quoted strings. Has anybody
any hints? Perhaps scanning the input tokens with an embedded Java-only
loop construct?
                                       Ralf S. Engelschall
                                       rse at engelschall.com
                                       www.engelschall.com


From david-sarah at jacaranda.org  Wed Jul 29 15:03:54 2009
From: david-sarah at jacaranda.org (David-Sarah Hopwood)
Date: Wed, 29 Jul 2009 23:03:54 +0100
Subject: [antlr-interest] rule return value not declared
In-Reply-To: <87iqhbl7uo.fsf@pokey.kendallshaw.com>
References: <8763dcmqu9.fsf@pokey.kendallshaw.com>	<20090729084330.D04B41C1353A3@c1mailgw43.amadis.com>
	<87iqhbl7uo.fsf@pokey.kendallshaw.com>
Message-ID: <4A70C74A.9000506@jacaranda.org>

Kendall Shaw wrote:
> Gavin Lambert <antlr at mirality.co.nz> writes:
>> At 09:37 29/07/2009, Kendall Shaw wrote:
>>> The result is that the return attribute "list" is not
>>> declared in the resulting parser:
>> [...]
>>>    @init { list = new ArrayList<String>(); }
>>>    : (t=thingy { list.add($t.name); })+
>> You should be using $list here.
> 
> Thanks. It's odd that it works in all of my other rules without the '$'.

ANTLR (at least the Java target) declares a variable corresponding to each
named child of a rule, with the same name. This is probably a bad idea
since the semantics of referring to that variable are undocumented and
usually not what you want, but it does not cause an error.

-- 
David-Sarah Hopwood  ?  http://davidsarah.livejournal.com


From david-sarah at jacaranda.org  Wed Jul 29 15:36:53 2009
From: david-sarah at jacaranda.org (David-Sarah Hopwood)
Date: Wed, 29 Jul 2009 23:36:53 +0100
Subject: [antlr-interest] Scanning Perl-style quoted
	strings	q{foo{bar}quux}?!
In-Reply-To: <20090729210745.GA9258@engelschall.com>
References: <20090729210745.GA9258@engelschall.com>
Message-ID: <4A70CF05.1090205@jacaranda.org>

Ralf S. Engelschall wrote:
> To a small ANTLR-based expression language I would like to add
> Perl-style quoted strings:
> 
>     q{foo{bar}quux}
>     q(foo(bar)quux)
>     q!foo/bar/quux!
> 
> For those who don't know these constructs: it is a variant of
> non-interpolating strings where one doesn't have to quote the quote
> character. And in case of one of the open/close pairs of quote
> characters ("(" + ")", "<" + ">", "[" + "]" and "{" + "}") one can even
> nest them without escaping (as long as there as the nesting is correct,
> i.e., equal number of open and close characters).

(I'm assuming, without knowing Perl very well, that only the delimiters
that appear on the "outside" have to nest, e.g. q{foo[{bar}quux} is valid.)

> Remains the question: what is the best way to implement this in ANTLR 3?

Remember that lexer rules can be recursive, so you don't have to explicitly
keep track of nesting depth. The following approach (untested) is more
declarative, and incidentally avoids the problem you encountered:

QSTRING
  : 'q' ( AngleQS | BraceQS | BrackQS | ParenQS | SlashQS | BangQS ) ;

fragment AngleQS
  : '<' ( AngleQS | ~('<' | '>') )* '>' ;

fragment BraceQS
  : '{' ( BraceQS | ~('{' | '}') )* '}' ;

fragment BrackQS
  : '[' ( BrackQS | ~('[' | ']') )* ']' ;

fragment ParenQS
  : '[' ( ParenQS | ~('[' | ']') )* ']' ;

fragment SlashQS
  : '/' ( SlashQS | ~'/' )* '/' ;

fragment BangQS
  : '!' ( BangQS | ~'!' )* '!' ;

-- 
David-Sarah Hopwood  ?  http://davidsarah.livejournal.com


From david-sarah at jacaranda.org  Wed Jul 29 16:05:10 2009
From: david-sarah at jacaranda.org (David-Sarah Hopwood)
Date: Thu, 30 Jul 2009 00:05:10 +0100
Subject: [antlr-interest] Scanning Perl-style
 quoted	strings	q{foo{bar}quux}?! [correction]
In-Reply-To: <4A70CF05.1090205@jacaranda.org>
References: <20090729210745.GA9258@engelschall.com>
	<4A70CF05.1090205@jacaranda.org>
Message-ID: <4A70D5A6.1010909@jacaranda.org>

David-Sarah Hopwood wrote:
> Ralf S. Engelschall wrote:
>> To a small ANTLR-based expression language I would like to add
>> Perl-style quoted strings:
[...]
>> Remains the question: what is the best way to implement this in ANTLR 3?
> 
> Remember that lexer rules can be recursive, so you don't have to explicitly
> keep track of nesting depth. The following approach (untested) is more
> declarative, and incidentally avoids the problem you encountered:
> 
> QSTRING
>   : 'q' ( AngleQS | BraceQS | BrackQS | ParenQS | SlashQS | BangQS ) ;
> 
> fragment AngleQS
>   : '<' ( AngleQS | ~('<' | '>') )* '>' ;
> 
> fragment BraceQS
>   : '{' ( BraceQS | ~('{' | '}') )* '}' ;
> 
> fragment BrackQS
>   : '[' ( BrackQS | ~('[' | ']') )* ']' ;
> 
> fragment ParenQS
>   : '[' ( ParenQS | ~('[' | ']') )* ']' ;

This should be
    : '(' ( ParenQS | ~('(' | ')') )* ')' ;
of course.

> fragment SlashQS
>   : '/' ( SlashQS | ~'/' )* '/' ;
> 
> fragment BangQS
>   : '!' ( BangQS | ~'!' )* '!' ;

-- 
David-Sarah Hopwood  ?  http://davidsarah.livejournal.com


From parrt at cs.usfca.edu  Wed Jul 29 16:14:16 2009
From: parrt at cs.usfca.edu (Terence Parr)
Date: Wed, 29 Jul 2009 16:14:16 -0700
Subject: [antlr-interest] OOPS 2010 Call for Papers
Message-ID: <A1E5F69D-2FB4-4186-85A4-64209695DD9C@cs.usfca.edu>


                     OOPS 2010 Call for Papers

              Object-Oriented Programming Languages and Systems

                      http://oops.disi.unige.it/OOPS10

     Special Track at the 25th ACM Symposium on Applied Computing, SAC  
2010

                     http://www.acm.org/conferences/sac/sac2010

                          Sierre and Lausanne, Switzerland

                                March 22 - 26, 2010

- Important Dates (deadlines are strict)

September 08, 2009: Full Paper Submission

October 19, 2009: Notification of paper acceptance/rejection

November 02, 2009: Camera-ready copies of accepted papers

- Track Co-Chairs

Davide Ancona (davide at disi.unige.it)
DISI, University of Genova, Italy

Alex Buckley (Alex.Buckley at Sun.COM)
Sun Microsystems, USA

Andy Kellens (akellens at vub.ac.be)
Vrije Universiteit Brussel, Belgium

- Program Committee

    * Suad Alagic, University of Southern Maine, USA
    * Curtis Clifton, Rose-Hulman Inst. of Tech., USA
    * Pascal Costanza, Vrije Universiteit Brussel, Belgium
    * Antonio Cunei, Ecole Polytechnique f?d?rale de Lausanne,  
Switzerland
    * Dino Distefano, Queen Mary University of London, UK
    * Sophia Drossopoulou, Imperial College, UK
    * Erik Ernst, University of Aarhus, Denmark
    * Stephan Hermann, Technische Universit?t Berlin, Germany
    * Atsushi Igarashi, Kyoto University, Japan
    * Jakko J?rvi, Texas A&M University, USA
    * Doug Lea, Suny Oswego, USA
    * Francesco Logozzo, Microsoft Research, USA
    * Jeremy Manson, Google, USA
    * Oscar Nierstratz, University of Bern, Switzerland
    * Jacques Noy?, ?cole des Mines de Nantes, France
    * Manuel Oriol, University of York, UK
    * Terence Parr, University of San Francisco, USA
    * David Ungar, IBM Research Almaden, USA
    * Mirko Viroli, University of Bologna, Italy

- SAC 2010

For the past twenty-four years, the ACM Symposium on Applied Computing  
(SAC)
has been a primary gathering forum for applied computer scientists,  
computer
engineers, software engineers, and application developers from around  
the world.
SAC 2010 is sponsored by the ACM Special Interest Group on Applied  
Computing (SIGAPP),
and is hosted by University of Applied Sciences, Western Switzerland  
(HES-SO) and
Ecole Polytechnique f?d?rale de Lausanne (EPFL), Switzerland.

- OOPS Track

The object-oriented (OO) paradigm is extensively used to
design and implement today's large scale software systems.
However, existing OO languages and platforms need to evolve
to better support features like interoperability, software
reuse, dynamic software adaptation, efficiency on multicore
hardware, security, and safety. The aim of OOPS is to foster
the development of extensions to existing OO languages and
platforms, as well as the design and implementation of new
languages and platforms embracing and enhancing the
object-oriented paradigm.
Particularly of interest for OOPS are papers that provide
a thorough analysis covering most of the following aspects:
theory, design, implementation, applicability, performance
evaluation, and comparison/integration with existing constructs and
mechanisms.

The specific topics of interest for the OOPS track include, but are
not limited to, the following:

   * Language design and implementation
   * Type systems, static analysis, formal methods
   * Integration with other paradigms
   * Aspects, components, and modularity
   * Reflection, meta-programming			
   * Databases and persistence			
   * Distributed, concurrent or parallel systems	
   * Interoperability, versioning and software adaptation

- Submission Instructions

Prospective papers should be submitted in pdf format using the eCMS (http://sac.cs.iupui.edu/sac2010 
).

All papers should represent original and previously unpublished works  
that are currently not under review
in any conference or journal. Both basic and applied research papers  
are welcome.

Hardcopy and fax submissions will not be accepted. Submission of the  
same paper to multiple tracks is not allowed.
The author(s) name(s) and address(es) must not appear in the body of  
the paper, and self-reference should be in
the third person. This is to facilitate a blind review process. The  
format of the paper must adhere to the
sig-alternate style (available at http://www.acm.org/conferences/sac/sac2010/downloads10.htm) 
. The paper should not
exceed 8 pages according to the above style; please note that this is  
the same page limit as for the final version.
However, for camera-ready papers exceeding 5 pages each additional  
page will be charged 80 USD.

Papers that fail to comply with length limitations risk rejection. All  
papers must be submitted by September 08, 2009.
For more information please visit the SAC 2010 Website at http://www.acm.org/conferences/sac/sac2010 
.


- Proceedings and special issue

Accepted full papers will be published by ACM in the annual conference  
proceedings. Accepted poster papers
will be published as extended 2-page abstracts in the same proceedings.

Please note that full registration is required for papers and posters  
to be included in the conference proceedings
and CD. Student registration is only intended to encourage student  
attendance and does not cover inclusion of papers/posters
in the conference proceedings.

Finally, following the tradition of the past OOPS editions, after the  
conference some of the accepted papers will be selected
for publication in a journal special issue.

From gsnyder2007 at gmail.com  Wed Jul 29 17:28:49 2009
From: gsnyder2007 at gmail.com (Glenn Snyder)
Date: Wed, 29 Jul 2009 20:28:49 -0400
Subject: [antlr-interest] Fwd: Bug in tree.py, how to submit defects on ANTLR
In-Reply-To: <e98f37f00907281051p2d4198c8k7304481745ba5754@mail.gmail.com>
References: <e98f37f00907281051p2d4198c8k7304481745ba5754@mail.gmail.com>
Message-ID: <e98f37f00907291728m4662f1dag6149a1c576491dec@mail.gmail.com>

Hi,
Jim suggested I send this issue to the list. If any follow-up is required
please contact me directly. Thanks.

regards,

Glenn Snyder
gsnyder2007 at gmail.com

---------- Forwarded message ----------
From: Glenn Snyder <gsnyder2007 at gmail.com>
Date: Tue, Jul 28, 2009 at 1:51 PM
Subject: Bug in tree.py, how to submit defects on ANTLR
To: Jim Idle <jimi at temporal-wave.com>, jimi at idle.ws


Jim,
I believe I have uncovered a defect in ANTLR v3.1.2 Python API in the
getAncestors() method call. I receive the following error when attempting to
use the method,

File
"/Library/Python/2.5/site-packages/antlr_python_runtime-3.1.2-py2.5.egg/antlr3/tree.py",
line 909, in getAncestors
    if selfgetParent() is None:
NameError: global name 'selfgetParent' is not defined

I opened tree.py and went to line 909 and, obviously, there should be a "."
(dot) in between "self" and "getParent()". After inserting the "." the code
worked as expected.

I tried to search the ANTLR defect database (found at
http://www.antlr.org/jira/secure/Dashboard.jspa) using a keyword of
"getAncestors" and didn't locate any issues. Is there a way I can submit a
defect (and the fix?)? It wasn't apparent that I could submit new issues.
Let me know how I can help.

-- 
regards,

Glenn Snyder
508-397-0420
http://www.linkedin.com/in/glennasnyder




-- 
regards,

Glenn Snyder
508-397-0420
http://www.linkedin.com/in/glennasnyder
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090729/bbab1d15/attachment.html 

From rse+antlr-interest at engelschall.com  Thu Jul 30 01:13:18 2009
From: rse+antlr-interest at engelschall.com (Ralf S. Engelschall)
Date: Thu, 30 Jul 2009 10:13:18 +0200
Subject: [antlr-interest] Scanning Perl-style quoted
	strings	q{foo{bar}quux}?!
In-Reply-To: <4A70CF05.1090205@jacaranda.org>
References: <20090729210745.GA9258@engelschall.com>
	<4A70CF05.1090205@jacaranda.org>
Message-ID: <20090730081318.GA61954@engelschall.com>

On Wed, Jul 29, 2009, David-Sarah Hopwood wrote:

> [...]
> (I'm assuming, without knowing Perl very well, that only the delimiters
> that appear on the "outside" have to nest, e.g. q{foo[{bar}quux} is valid.)

Yes, exactly. Only the "X" in qX...X have to nest correctly. Anything
between is talen as-is.

> > Remains the question: what is the best way to implement this in ANTLR 3?
>
> Remember that lexer rules can be recursive, so you don't have to explicitly
> keep track of nesting depth. The following approach (untested) is more
> declarative, and incidentally avoids the problem you encountered:
>
> QSTRING
>   : 'q' ( AngleQS | BraceQS | BrackQS | ParenQS | SlashQS | BangQS ) ;
>
> fragment AngleQS
>   : '<' ( AngleQS | ~('<' | '>') )* '>' ;
>
> fragment BraceQS
>   : '{' ( BraceQS | ~('{' | '}') )* '}' ;
>
> fragment BrackQS
>   : '[' ( BrackQS | ~('[' | ']') )* ']' ;
>
> fragment ParenQS
>   : '[' ( ParenQS | ~('[' | ']') )* ']' ;
>
> fragment SlashQS
>   : '/' ( SlashQS | ~'/' )* '/' ;
>
> fragment BangQS
>   : '!' ( BangQS | ~'!' )* '!' ;

Hmmmm.... interesting approach. Many thanks for the hint about the
recursion possibility in lexer rules.

Remains just the problem that although the opening/closing characters
are the fixed set of 4 pairs, the "/" and "!" were just examples.
Actually any other punctuation character can be used, also for instance
q%...%, q=....=, etc. But here the semantic predicates can help again, I
think. My current solution is now:

                    /* Perl-style quoted string */
QSTRING             : 'q' (QS_ANGLE | QS_BRACE | QS_BRACK | QS_PAREN | QS_OTHER);
fragment QS_ANGLE   : '<' (('\\' '<') => '\\' '<' | QS_ANGLE | ~('<' | '>'))* '>';
fragment QS_BRACE   : '{' (('\\' '{') => '\\' '{' | QS_BRACE | ~('{' | '}'))* '}';
fragment QS_BRACK   : '[' (('\\' '[') => '\\' '[' | QS_BRACK | ~('[' | '}'))* ']';
fragment QS_PAREN   : '(' (('\\' '(') => '\\' '(' | QS_PAREN | ~('(' | ')'))* ')';
fragment QS_OTHER_CH: ~('<'|'>'|'{'|'}'|'['|']'|'('|')'|'a'..'z'|'A'..'Z'|'0'..'9');
fragment QS_OTHER   : delimiter=QS_OTHER_CH
                      ( '\\' { input.LT(1) == $delimiter.text.charAt(0) }? => .
                      |      { input.LT(1) != $delimiter.text.charAt(0) }? => .
                      )*
                      { input.LT(1) == $delimiter.text.charAt(0) }? => .;

This already correctly recognizes all qX...X constructs. I now just have
to filter out the escape sequences and remove the leading qX and the
trailing X...
                                       Ralf S. Engelschall
                                       rse at engelschall.com
                                       www.engelschall.com


From andy.grove at codefutures.com  Thu Jul 30 07:40:36 2009
From: andy.grove at codefutures.com (Andy Grove)
Date: Thu, 30 Jul 2009 08:40:36 -0600
Subject: [antlr-interest] Handling HASEXCEPTION / HASFAILURE
In-Reply-To: <9CBF7C17-C1A9-4B33-8759-B4214DBF5C79@temporal-wave.com>
References: <E22BC4E3-B290-4328-8E38-1A344BA2B4F6@codefutures.com>
	<9CBF7C17-C1A9-4B33-8759-B4214DBF5C79@temporal-wave.com>
Message-ID: <D8916B96-655A-4A09-A087-CE602ACD77E5@codefutures.com>

Jim,

Thanks. Could you point me in the direction of the documentation for  
setting up these error message routines. I could not find anything on  
the ANTLR web site about this (apart from Java specific information).

Thanks,

Andy.



On Jul 28, 2009, at 11:40 AM, Jim Idle wrote:

> The calling rule will make a call to the error message routines so  
> check your stack there. But really you should parse, build a tree  
> then do this in the tree walk and you won't have the issue.
>
> Jim
>
> On Jul 28, 2009, at 2:21 AM, Andy Grove <andy.grove at codefutures.com>  
> wrote:
>
>> Because the C version of ANTLR does not support @after actions, I  
>> have implemented the equivalent in my grammar by placing a block of  
>> code at the end of my rule. For example:
>>
>> whereClause
>> @init { sse.pushCall(sse.WHERECLAUSE); }
>> 	:
>> 	(
>> 	WHERE
>> 		c = searchCondition
>>      )
>>      { sse.popCall(); } <-- @after action
>> 	;
>>
>> I noticed that this @after action was not running for some of my  
>> input data, so I added debug logging to the generated parser code  
>> and found that one of the calls to the HASEXCEPTION macro is  
>> returning true and the parser is finishing at that point.
>>
>> How am I supposed to detect if an exception like this has occurred  
>> and how do I find out what is causing the exception?
>>
>> Thanks,
>>
>> Andy.
>>
>>
>>
>>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090730/14ddb0aa/attachment.html 

From rse+antlr-interest at engelschall.com  Thu Jul 30 10:26:43 2009
From: rse+antlr-interest at engelschall.com (Ralf S. Engelschall)
Date: Thu, 30 Jul 2009 19:26:43 +0200
Subject: [antlr-interest] Scanning Perl-style quoted
	strings	q{foo{bar}quux}?!
In-Reply-To: <20090730081318.GA61954@engelschall.com>
References: <20090729210745.GA9258@engelschall.com>
	<4A70CF05.1090205@jacaranda.org>
	<20090730081318.GA61954@engelschall.com>
Message-ID: <20090730172643.GA94507@engelschall.com>

On Thu, Jul 30, 2009, Ralf S. Engelschall wrote:

> [...]
> My current solution is now:
>
>                     /* Perl-style quoted string */
> QSTRING             : 'q' (QS_ANGLE | QS_BRACE | QS_BRACK | QS_PAREN | QS_OTHER);
> fragment QS_ANGLE   : '<' (('\\' '<') => '\\' '<' | QS_ANGLE | ~('<' | '>'))* '>';
> fragment QS_BRACE   : '{' (('\\' '{') => '\\' '{' | QS_BRACE | ~('{' | '}'))* '}';
> fragment QS_BRACK   : '[' (('\\' '[') => '\\' '[' | QS_BRACK | ~('[' | '}'))* ']';
> fragment QS_PAREN   : '(' (('\\' '(') => '\\' '(' | QS_PAREN | ~('(' | ')'))* ')';
> fragment QS_OTHER_CH: ~('<'|'>'|'{'|'}'|'['|']'|'('|')'|'a'..'z'|'A'..'Z'|'0'..'9');
> fragment QS_OTHER   : delimiter=QS_OTHER_CH
>                       ( '\\' { input.LT(1) == $delimiter.text.charAt(0) }? => .
>                       |      { input.LT(1) != $delimiter.text.charAt(0) }? => .
>                       )*
>                       { input.LT(1) == $delimiter.text.charAt(0) }? => .;
>
> This already correctly recognizes all qX...X constructs. I now just have
> to filter out the escape sequences and remove the leading qX and the
> trailing X...

After many attempts to add the escape character filtering I now also
have a solution for this:

                  /* Perl-style quoted string */
QSTRING           @init { StringBuilder sb = new StringBuilder(); }
                  : 'q'
                    ( '<' QS_ANGLE[sb] '>'
                    | '{' QS_BRACE[sb] '}'
                    | '[' QS_BRACK[sb] ']'
                    | '(' QS_PAREN[sb] ')'
                    | QS_OTHER[sb]
                    )                                        { setText(sb.toString()); }
                  ;
fragment QS_ANGLE [StringBuilder sb]
                  : ( ('\\' '<') => '\\' c='<'               { sb.appendCodePoint($c); }
                    | ('\\' '>') => '\\' c='>'               { sb.appendCodePoint($c); }
                    | c='<'                                  { sb.appendCodePoint($c); }
                      QS_ANGLE[sb]
                      c='>'                                  { sb.appendCodePoint($c); }
                    | c=~('<' | '>')                         { sb.appendCodePoint($c); }
                    )*
                  ;
fragment QS_BRACE [StringBuilder sb]
                  : ( ('\\' '{') => '\\' c='{'               { sb.appendCodePoint($c); }
                    | ('\\' '}') => '\\' c='}'               { sb.appendCodePoint($c); }
                    | c='{'                                  { sb.appendCodePoint($c); }
                      QS_BRACE[sb]
                      c='}'                                  { sb.appendCodePoint($c); }
                    | c=~('{' | '}')                         { sb.appendCodePoint($c); }
                    )*
                  ;
fragment QS_BRACK [StringBuilder sb]
                  : ( ('\\' '[') => '\\' c='['               { sb.appendCodePoint($c); }
                    | ('\\' ']') => '\\' c=']'               { sb.appendCodePoint($c); }
                    | c='['                                  { sb.appendCodePoint($c); }
                      QS_BRACE[sb]
                      c=']'                                  { sb.appendCodePoint($c); }
                    | c=~('[' | ']')                         { sb.appendCodePoint($c); }
                    )*
                  ;
fragment QS_PAREN [StringBuilder sb]
                  : ( ('\\' '(') => '\\' c='('               { sb.appendCodePoint($c); }
                    | ('\\' ')') => '\\' c=')'               { sb.appendCodePoint($c); }
                    | c='('                                  { sb.appendCodePoint($c); }
                      QS_BRACE[sb]
                      c=')'                                  { sb.appendCodePoint($c); }
                    | c=~('(' | ')')                         { sb.appendCodePoint($c); }
                    )*
                  ;
fragment QS_OTHER [StringBuilder sb]
                  : d=('!'|'"'|'#'|'$'|'%'|'&'
                      |'\''|'*'|'+'|','|'-'|'.'|'/'
                      |':'|';'|'='|'?'|'@'|'\\'|'^'
                      |'_'|'`'|'|'|'~'
                      )
                    ( { input.LT(1) == '\\' &&
                        input.LT(2) == $d     }? => '\\' c=. { sb.appendCodePoint($c); }
                    | { input.LT(1) != $d     }? =>      c=. { sb.appendCodePoint($c); }
                    )*
                    { input.LT(1) == $d }? => .
                  ;

This now is the most complete ANTLR lexical rule set for parsing
Perl-style q/.../ constructs. Unfortunately, it is no longer really
short and concise, but it now seems to finally work as expected.

Thanks for all the help.
                                       Ralf S. Engelschall
                                       rse at engelschall.com
                                       www.engelschall.com


From jimi at temporal-wave.com  Thu Jul 30 11:09:18 2009
From: jimi at temporal-wave.com (Jim Idle)
Date: Thu, 30 Jul 2009 08:09:18 -1000
Subject: [antlr-interest] Handling HASEXCEPTION / HASFAILURE
In-Reply-To: <D8916B96-655A-4A09-A087-CE602ACD77E5@codefutures.com>
References: <E22BC4E3-B290-4328-8E38-1A344BA2B4F6@codefutures.com>
	<9CBF7C17-C1A9-4B33-8759-B4214DBF5C79@temporal-wave.com>
	<D8916B96-655A-4A09-A087-CE602ACD77E5@codefutures.com>
Message-ID: <2D00C4C0-FD0D-47F9-B2CD-78D3D072D355@temporal-wave.com>

Search the list. Something like "displayRecognitionError C" and read  
the API docs for C and displayRecognitionError.

Jim

On Jul 30, 2009, at 4:40 AM, Andy Grove <andy.grove at codefutures.com>  
wrote:

> Jim,
>
> Thanks. Could you point me in the direction of the documentation for  
> setting up these error message routines. I could not find anything  
> on the ANTLR web site about this (apart from Java specific  
> information).
>
> Thanks,
>
> Andy.
>
>
>
> On Jul 28, 2009, at 11:40 AM, Jim Idle wrote:
>
>> The calling rule will make a call to the error message routines so  
>> check your stack there. But really you should parse, build a tree  
>> then do this in the tree walk and you won't have the issue.
>>
>> Jim
>>
>> On Jul 28, 2009, at 2:21 AM, Andy Grove  
>> <andy.grove at codefutures.com> wrote:
>>
>>> Because the C version of ANTLR does not support @after actions, I  
>>> have implemented the equivalent in my grammar by placing a block  
>>> of code at the end of my rule. For example:
>>>
>>> whereClause
>>> @init { sse.pushCall(sse.WHERECLAUSE); }
>>> 	:
>>> 	(
>>> 	WHERE
>>> 		c = searchCondition
>>>      )
>>>      { sse.popCall(); } <-- @after action
>>> 	;
>>>
>>> I noticed that this @after action was not running for some of my  
>>> input data, so I added debug logging to the generated parser code  
>>> and found that one of the calls to the HASEXCEPTION macro is  
>>> returning true and the parser is finishing at that point.
>>>
>>> How am I supposed to detect if an exception like this has occurred  
>>> and how do I find out what is causing the exception?
>>>
>>> Thanks,
>>>
>>> Andy.
>>>
>>>
>>>
>>>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090730/99d95ada/attachment.html 

From rob_dougan at sympatico.ca  Thu Jul 30 11:48:29 2009
From: rob_dougan at sympatico.ca (Rob Dougan)
Date: Thu, 30 Jul 2009 18:48:29 +0000
Subject: [antlr-interest] Approach to Multiple Passes using Tree Grammars
 without Filters (C#)?
Message-ID: <BLU125-W12C6B06FBCA0D373A4D2B087130@phx.gbl>


Antlr 3.1.3 does not have tree filters.

 

Pass 1: lex/parse produces AST,

 

I would like to do multi-pass processing on AST produced in first pass.

 

Pass 2: Tree grammar A (AST): variable defs, build symbol table etc

Pass 3: Tree grammar B (AST): static type checking etc.

Pass 4: Tree grammar C (AST): execute

 

If i do not have tree filters, do I have copy the tree grammar three times and modify the actions to accomplish the task?
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090730/cb4cbedd/attachment.html 

From jimi at temporal-wave.com  Thu Jul 30 12:54:09 2009
From: jimi at temporal-wave.com (Jim Idle)
Date: Thu, 30 Jul 2009 09:54:09 -1000
Subject: [antlr-interest] Approach to Multiple Passes using Tree
	Grammars without Filters (C#)?
In-Reply-To: <BLU125-W12C6B06FBCA0D373A4D2B087130@phx.gbl>
References: <BLU125-W12C6B06FBCA0D373A4D2B087130@phx.gbl>
Message-ID: <908069FA-85E5-4EA4-87A1-40781ED907DD@temporal-wave.com>

I create an interface which handles all information from all rules  
then create the separate classes implementing that interface. The tree  
walker then calls against the interface and the driver program  
installs the relevant class. This works very well and requires only  
one copy of the tree grammar. If you rewrite the AST you may need two  
grammars.

In general do not put anything but interface calls in actions.

Jim

On Jul 30, 2009, at 8:48 AM, Rob Dougan <rob_dougan at sympatico.ca> wrote:

> Antlr 3.1.3 does not have tree filters.
>
> Pass 1: lex/parse produces AST,
>
> I would like to do multi-pass processing on AST produced in first  
> pass.
>
> Pass 2: Tree grammar A (AST): variable defs, build symbol table etc
> Pass 3: Tree grammar B (AST): static type checking etc.
> Pass 4: Tree grammar C (AST): execute
>
> If i do not have tree filters, do I have copy the tree grammar three  
> times and modify the actions to accomplish the task?
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address

From sharwell at pixelminegames.com  Thu Jul 30 13:37:57 2009
From: sharwell at pixelminegames.com (Sam Harwell)
Date: Thu, 30 Jul 2009 15:37:57 -0500
Subject: [antlr-interest] Approach to Multiple Passes using Tree
	Grammars without Filters (C#)?
In-Reply-To: <BLU125-W12C6B06FBCA0D373A4D2B087130@phx.gbl>
References: <BLU125-W12C6B06FBCA0D373A4D2B087130@phx.gbl>
Message-ID: <86403CA0939415448BCCB83855EFE09AA68480@Bloodymary.ironwillgames.com>

Simply using a tree grammar won't alter the input tree. If you want
customizable actions, use something like this:

 

tokenSpec

        :       TOKEN_REF {TrackToken($TOKEN_REF);}

        ;

 

Then in your helper file (which you can create since the tree grammar
class is declared partial in code), create a virtual stub method that
"handles" things:

 

protected virtual void TrackToken(CommonTree tokenRef)

{

}

 

Then you can derive classes from the tree parser and override methods as
needed to provide the required functionality. In the C# port of the
ANTLR tool, this exact method is used to implement the functionality for
the AssignTokenTypesWalker tree parser (the lines above are actually
taken from it).

 

Sam

 

From: antlr-interest-bounces at antlr.org
[mailto:antlr-interest-bounces at antlr.org] On Behalf Of Rob Dougan
Sent: Thursday, July 30, 2009 1:48 PM
To: ANTLR Interest
Subject: [antlr-interest] Approach to Multiple Passes using Tree
Grammars without Filters (C#)?

 

Antlr 3.1.3 does not have tree filters.
 
Pass 1: lex/parse produces AST,
 
I would like to do multi-pass processing on AST produced in first pass.
 
Pass 2: Tree grammar A (AST): variable defs, build symbol table etc
Pass 3: Tree grammar B (AST): static type checking etc.
Pass 4: Tree grammar C (AST): execute
 
If i do not have tree filters, do I have copy the tree grammar three
times and modify the actions to accomplish the task?

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090730/68eb301b/attachment.html 

From tommy.nordgren at comhem.se  Thu Jul 30 19:16:31 2009
From: tommy.nordgren at comhem.se (Tommy Nordgren)
Date: Fri, 31 Jul 2009 04:16:31 +0200
Subject: [antlr-interest] Fixing a Tree -> Tree transformation problem
Message-ID: <F364BE1D-9006-44CB-9776-429BA08CD414@comhem.se>

Hi all. I have the following rule in my tree to tree rewrite grammar.
method_decl : ^(ATTRIBUTE type_decl ID .) -> ^(ATTRIBUTE type_decl ID )
	| 	^(METHOD returntype ID formal_parameter_list .) -> ^(METHOD  
returntype ID formal_parameter_list )
	;

For some reason, the part of the input tree matched by '.'   remains  
in the output tree. How do I fix this?
-----------------------------------
See the amazing new SF reel: Invasion of the man eating cucumbers from  
outer space.
On congratulations for a fantastic parody, the producer replies :  
"What parody?"

Tommy Nordgren
tommy.nordgren at comhem.se




From tommy.nordgren at comhem.se  Thu Jul 30 19:37:05 2009
From: tommy.nordgren at comhem.se (Tommy Nordgren)
Date: Fri, 31 Jul 2009 04:37:05 +0200
Subject: [antlr-interest] [fixed] Fixing a Tree -> Tree transformation
	problem
In-Reply-To: <F364BE1D-9006-44CB-9776-429BA08CD414@comhem.se>
References: <F364BE1D-9006-44CB-9776-429BA08CD414@comhem.se>
Message-ID: <EF6E9D8F-1E73-4242-90FC-9DA00F9B4623@comhem.se>


On Jul 31, 2009, at 4:16 AM, Tommy Nordgren wrote:

> Hi all. I have the following rule in my tree to tree rewrite grammar.
> method_decl : ^(ATTRIBUTE type_decl ID .) -> ^(ATTRIBUTE type_decl  
> ID )
> 	| 	^(METHOD returntype ID formal_parameter_list .) -> ^(METHOD
> returntype ID formal_parameter_list )
> 	;
>
> For some reason, the part of the input tree matched by '.'   remains
> in the output tree. How do I fix this?


	When experimenting some further, I found that the problem could be  
fixed by addin
rewrite = true                 to the options section.
-------------------------------------------
Engineers supporting greenpeace: Comparable to Afroamericans who wants  
to join the Ku Klux Klan
----------------------------------------
Tommy Nordgren
tommy.nordgren at comhem.se




From everfall at hotmail.com  Thu Jul 30 22:17:19 2009
From: everfall at hotmail.com (Andrew Chalmers)
Date: Fri, 31 Jul 2009 05:17:19 +0000
Subject: [antlr-interest] Test cases that work under Java target fail under
	CSharp2 target
Message-ID: <SNT103-W54407756D57174934627D3CC100@phx.gbl>


Hi,

   Are there any differences or known issues with the CSharp2 target that cause it to behave differently to the "equivalent" Java target generated lexer and parser?
 
   I'm asking because my grammar, which works on 105 of 105 test cases when I use the Java target, fails on 6 of 105 test cases when I use the CSharp2 target.
 
   I'm not using actions or anything target language-specific.
 
   Using AntlrWorks' integrated and remote debuggers and my limited knowledge, I've got one lead right now: I've noticed that the Java version logs LT(1) events for each token, so that as the parser pulls tokens from an input stream:
 
      A B C
 
   I see LT(1) 'A' then LT(1) 'B' then LT(1) 'C'. That seems right to me.
 
   But when the problematic test cases are parsed in the CSharp2 target, I see LT(1) 'A' and then for some reason the next LT(1) sees 'C', not 'B'. This seems wrong.
 
   I'm new to Antlr - does this point to an issue with the generated lexer or the parser? What's next troubleshooting step would you suggest?
 
   Happy to respond with specifics of the grammar and the error messages if you think they'd be useful.
 
Thanks in advance,
Andrew
_________________________________________________________________
View photos of singles in your area Click Here
http://a.ninemsn.com.au/b.aspx?URL=http%3A%2F%2Fdating%2Eninemsn%2Ecom%2Eau%2Fsearch%2Fsearch%2Easpx%3Fexec%3Dgo%26tp%3Dq%26gc%3D2%26tr%3D1%26lage%3D18%26uage%3D55%26cl%3D14%26sl%3D0%26dist%3D50%26po%3D1%26do%3D2%26trackingid%3D1046138%26r2s%3D1&_t=773166090&_r=Hotmail_Endtext&_m=EXT
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090731/7e9d1b93/attachment.html 

From everfall at hotmail.com  Thu Jul 30 23:13:40 2009
From: everfall at hotmail.com (Andrew Chalmers)
Date: Fri, 31 Jul 2009 06:13:40 +0000
Subject: [antlr-interest] Solved (my fault!) Test cases that work under Java
 target fail under CSharp2 target
Message-ID: <SNT103-W39C83FEC2C6EF8E7661AEDCC100@phx.gbl>


This turned out to be my fault, not a discrepancy between the CSharp2 and Java targets. And it's probably a funny story (from the outside, at least :-) ), so I'll record it here.

 

While getting started with antlr a few weeks back, I tried a few approaches to setting up my input stream, lexer and parser.

 

I remember having trouble ensuring that the parser correctly ignored whitespace tokens, and experimenting with a few calls before getting the desired result. I guess it was about then that I inserted this line:

 

   var cts = new CommonTokenStream(); // fine...

 

   cts.DiscardTokenType(Token.HIDDEN_CHANNEL); // not fine.

 

While I guessed that DiscardTokenType would discard a class of tokens based on the assigned channel, it was actually just discarding all occurrences of whatever token happened be arbitrarily assigned internal reference number 99 (the value of Token.HIDDEN_CHANNEL) in this particular revision of my lexer definition.

 

Sigh.

 

That explains about two weeks' worth of weird behaviour where seemingly trivial modifications to the grammar introduced or resolved parse errors that I just could not reconcile with my grammar definition.

 

It also explains why things worked just fine when running in AntlrWorks under the Java target - unlike _my_ setup code, the AntlrWorks test harness probably doesn't randomly throw away tokens from the input stream :-).

 

Regards,

Andrew

 

---- original message below -----

Hi,

   Are there any differences or known issues with the CSharp2 target that cause it to behave differently to the "equivalent" Java target generated lexer and parser?
 
   I'm asking because my grammar, which works on 105 of 105 test cases when I use the Java target, fails on 6 of 105 test cases when I use the CSharp2 target.
 
   I'm not using actions or anything target language-specific.
 
   Using AntlrWorks' integrated and remote debuggers and my limited knowledge, I've got one lead right now: I've noticed that the Java version logs LT(1) events for each token, so that as the parser pulls tokens from an input stream:
 
      A B C
 
   I see LT(1) 'A' then LT(1) 'B' then LT(1) 'C'. That seems right to me.
 
   But when the problematic test cases are parsed in the CSharp2 target, I see LT(1) 'A' and then for some reason the next LT(1) sees 'C', not 'B'. This seems wrong.
 
   I'm new to Antlr - does this point to an issue with the generated lexer or the parser? What's next troubleshooting step would you suggest?
 
   Happy to respond with specifics of the grammar and the error messages if you think they'd be useful.
 
Thanks in advance,
Andrew



_________________________________________________________________
What goes online, stays online Check the daily blob for the latest on what's happening around the web
http://windowslive.ninemsn.com.au/blog.aspx
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090731/e75a1287/attachment.html 

From thomas.jackson.iii at gmail.com  Fri Jul 31 07:38:49 2009
From: thomas.jackson.iii at gmail.com (Thomas Jackson)
Date: Fri, 31 Jul 2009 10:38:49 -0400
Subject: [antlr-interest] Using ANTLR to expand C Macros
Message-ID: <4A7301F9.8060000@gmail.com>

Maybe kinda off topic, but does anyone know of any project to expand C 
macros in code?  I figured someone must have used the ANTLR C Grammar to 
do this, but so far my searches have been unsuccessful.

From nvlassopoulos at gmail.com  Fri Jul 31 08:10:38 2009
From: nvlassopoulos at gmail.com (Nick Vlassopoulos)
Date: Fri, 31 Jul 2009 16:10:38 +0100
Subject: [antlr-interest] Using ANTLR to expand C Macros
In-Reply-To: <4A7301F9.8060000@gmail.com>
References: <4A7301F9.8060000@gmail.com>
Message-ID: <1419225d0907310810n5c4cd4a1v4f084c2a1530e14d@mail.gmail.com>

Hi Thomas,

I am not sure if this is what you are looking for, but there is a C
preprocessor in the example
grammars (http://www.antlr.org/grammar/1166665121622/Cpp.tar). I think the
parts you are looking
for are in the macroDefine, macroExecution (CppTree.g) and in the
getExpansion method in
"FunctionMacro.java"

Hope this helps,

Nikos

On Fri, Jul 31, 2009 at 3:38 PM, Thomas Jackson <
thomas.jackson.iii at gmail.com> wrote:

> Maybe kinda off topic, but does anyone know of any project to expand C
> macros in code?  I figured someone must have used the ANTLR C Grammar to
> do this, but so far my searches have been unsuccessful.
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe:
> http://www.antlr.org/mailman/options/antlr-interest/your-email-address
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090731/9524a331/attachment.html 

From scott at indosoft.com  Fri Jul 31 09:31:55 2009
From: scott at indosoft.com (Scott Van Wart)
Date: Fri, 31 Jul 2009 13:31:55 -0300
Subject: [antlr-interest] Parsing quoted phrases and non-quoted keywords
Message-ID: <4A731C7B.5090302@indosoft.com>

So it's my first grammar I've written from scratch and I'm having a few 
difficulties picking up quoted strings and non-quoted keywords.  Here's 
a sample input:

    Google[+Keyword1 Keyword2 -Keyword3] Yahoo["Phrase 1" +"Phrase 2" 
-"Phrase 3"] Keyword4 "Phrase 4"

So hypothetically this could be used as a multi-search-engine search 
sort of thing (don't get caught up on it though because it's not at all 
what I'm using it for :).

I'm having two issues with it, one of them is functional, the other is 
more grammar file maintenance related.  (3) is just a bonus question.  
I'm hoping these are newbie questions because if they're not I'm 
probably over my head and need to do some more reading:

1) When antlr gives me the quoted string, I lose the whitespace 
associated with it, which is significant for me only in a quoted 
string.  "foo     bar" becomes <">, <foo>, <bar> and <">.  So if I'm 
searching, say, a database, and the amount of whitespace is significant 
in a column (not that this isn't a silly idea), then I'm out of luck.
2) In order to also catch non-quoted expressions, I have to specify all 
terminal tokens in a catch-all rule, surrounded by the negation ~ 
token.  So if I later add a token to the grammar I have to remember to 
add it to this catch-all rule as well.
3) Can I safely add the $channel=HIDDEN option to the DOUBLE_QUOTE token 
so I don't see those at all?

Here's my grammar, followed by a few more comments:

  grammar search;

  /* Google[+Keyword1 Keyword2 -Keyword3] Yahoo["Phrase 1" +"Phrase 2" 
-"Phrase 3"] Keyword4 "Phrase 4" */

  tokens {
    INCLUSION='+';
    EXCLUSION='-';
    DOUBLE_QUOTE='"';
    LEFT_SQB='[';
    RIGHT_SQB=']';
  }

  advanced_search : ( attribute_search | keyword_search )+ ;

  attribute_label : quoted_value | NQUOTED_VALUE ;

  WS : ( ' ' | '\r' | '\t' | '\u000C' | '\n' )+ { $channel=HIDDEN; } ;
/* I took the above from 
http://www.antlr.org/wiki/display/ANTLR3/Grammars in the "Lexer Rules" 
subsection.

  attribute_search : attribute_label LEFT_SQB attribute_value_spec+ 
RIGHT_SQB ;

  keyword_search : quoted_value | NQUOTED_VALUE ;

  attribute_value_spec : ( inclusion_exclusion? attribute_value ) ;

  inclusion_exclusion : ( INCLUSION | EXCLUSION ) ;

  attribute_value : quoted_value | NQUOTED_VALUE ;

  quoted_value : DOUBLE_QUOTE ( options {greedy=false;} : . )* 
DOUBLE_QUOTE ;
/* The above is based on the comment lexer rule section from the 
examples in the "EBNFs" section in 
http://www.antlr.org/wiki/display/ANTLR3/Quick+Starter+on+Parser+Grammars+-+No+Past+Experience+Required 
*/

  NQUOTED_VALUE :    ~( INCLUSION | EXCLUSION | DOUBLE_QUOTE | LEFT_SQB 
| RIGHT_SQB | ' ' | '\r' | '\t' | '\u000C' | '\n' )* ;


I've tried a number of different things for (2), such as putting .* for 
NQUOTED_VALUE, but I get the unmatchable alternative errors (which I 
still haven't wrapped my head around).  I'm also a little scared to 
touch the quoted_value rule definition to try and fix (1) because it's 
working pretty well now if I ignore the issue :).

Thanks,
  Scott


From dkichler at carmanah.com  Fri Jul 31 12:33:09 2009
From: dkichler at carmanah.com (Dave Kichler)
Date: Fri, 31 Jul 2009 12:33:09 -0700
Subject: [antlr-interest] ANTLRWorks not producing RecognitionError
	reports/messages?
Message-ID: <D16A141D82E6A0438A1ABA770D4F87DE01C944@cti005.carmanahtech.carmanahcorp.com>

I have noticed some strange behaviour in ANTLRWorks recently.  This has
only started happening in the past week and has pretty much baffled me.
It seems as though ANTLRWorks is no longer printing out reported errors
during debug.  When encountering a mismatched, unviable alt or other
recognition exception, the expected behaviour is to report the error to
the console, similar to:

line 3:1 extraneous input 't' expecting NEWLINE

 

When I first started using ANTLRWorks, I would regularly test my grammar
by running the debug feature to ensure it would recognize and report
such syntax errors and it did.  Now, after nothing notable has changed
(only minor edits to the grammar), ANTLRWorks no longer reports these
error messages to the 'output' debug console even though a recognition
exception can clearly be seen while tracing through both the event stack
and parse tree.  What is more strange, when I generate the code and test
the parser class within Eclipse, the expected syntax error messages are
printed to the console.  

 

I attempted to troubleshoot this issue for an afternoon and have now
turned to the community to see whether anyone else has experienced
strange behaviour such as this from ANTLRWorks or what might be causing
it.  I have not changed anything in the way the grammar handles errors
and the standard catch clause should simply report and recover from the
error.  This happens in Eclipse but not in ANTLR debug.  Anyone seen
anything like this?

 

Dave

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20090731/754af847/attachment.html 

From antlr at mirality.co.nz  Fri Jul 31 13:21:14 2009
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Sat, 01 Aug 2009 08:21:14 +1200
Subject: [antlr-interest] Parsing quoted phrases and non-quoted keywords
In-Reply-To: <4A731C7B.5090302@indosoft.com>
References: <4A731C7B.5090302@indosoft.com>
Message-ID: <20090731202136.B8FB134184A7@www.antlr.org>

At 04:31 1/08/2009, Scott Van Wart wrote:
 >1) When antlr gives me the quoted string, I lose the whitespace
 >associated with it, which is significant for me only in a quoted 

 >string.  "foo     bar" becomes <">, <foo>, <bar> and <">.  So if 

 >I'm searching, say, a database, and the amount of whitespace is
 >significant in a column (not that this isn't a silly idea), then 

 >I'm out of luck.
[...]
 >    DOUBLE_QUOTE='"';

Remove this.

 >  quoted_value : DOUBLE_QUOTE ( options {greedy=false;} : . )*
 >DOUBLE_QUOTE ;

Make this a lexer rule (QUOTED_VALUE).  See the example string 
rule in the wiki.

 >  NQUOTED_VALUE :    ~( INCLUSION | EXCLUSION | DOUBLE_QUOTE |
 >LEFT_SQB
 >| RIGHT_SQB | ' ' | '\r' | '\t' | '\u000C' | '\n' )* ;

You must at least use + here, not *.  (It's very very bad to 
create a lexer rule that can successfully match zero characters.)

Another alternative here is to just use this instead:

   OTHER: . ;

You can't use a loop, though (without doing something similar to 
what you already had), otherwise it will consume things that you 
want as other tokens as well.  The downside of this is that it 
will generate a token for each character rather than grouping 
them.

You could mitigate this by defining more tokens for specific types 
of things you're expecting (operators, sequences of alphanumeric 
characters, etc).


From hanasaki at gmail.com  Fri Jul 31 15:20:54 2009
From: hanasaki at gmail.com (hanasaki jiji)
Date: Fri, 31 Jul 2009 17:20:54 -0500
Subject: [antlr-interest] Help with compile errors in generated source
Message-ID: <3cfcba890907311520t49c3ad36g51cfab98c02e0caf@mail.gmail.com>

Hello all... I plugged antlr into maven and ran in netbeans 6.7 and
the source produced is generating compile errors as below.  Any
thoughts as to what is the cause and resolution?  The grammar is the
JSON grammar downloaded from the antlr site.

Thanks,

plugin in maven
           <plugin>
                <groupId>org.codehaus.mojo</groupId>
                <artifactId>antlr3-maven-plugin</artifactId>
                <version>1.0</version>
                <executions>
                    <execution>
                        <goals>
                            <goal>antlr</goal>
                        </goals>
                    </execution>
                </executions>
            </plugin>

///
Compiling 3 source files to ....../parser/target/classes
[ERROR]Mojo:
[ERROR]    org.apache.maven.plugins:maven-compiler-plugin:2.0.2:compile
[ERROR]FAILED for project:
[ERROR]    com.mycompany:parserHTTP:jar:1.0-SNAPSHOT
[ERROR]Reason:
[ERROR]....../parser/target/generated-sources/antlr/JSONParser.java:[97,12]
cannot find symbol
[ERROR]symbol  : variable _fsp
[ERROR]location: class org.xerial.json.impl.JSONParser
[ERROR]....../parser/target/generated-sources/antlr/JSONParser.java:[142,12]
cannot find symbol
[ERROR]symbol  : variable _fsp
[ERROR]location: class org.xerial.json.impl.JSONParser
[ERROR]....../parser/target/generated-sources/antlr/JSONParser.java:[211,20]
cannot find symbol
[ERROR]symbol  : variable _fsp
[ERROR]location: class org.xerial.json.impl.JSONParser
[ERROR]....../parser/target/generated-sources/antlr/JSONParser.java:[235,25]
cannot find symbol
[ERROR]symbol  : variable _fsp
[ERROR]location: class org.xerial.json.impl.JSONParser
[ERROR]....../parser/target/generated-sources/antlr/JSONParser.java:[277,65]
cannot find symbol
[ERROR]symbol  : method next()
[ERROR]location: class org.antlr.runtime.tree.RewriteRuleSubtreeStream
[ERROR]....../parser/target/generated-sources/antlr/JSONParser.java:[342,12]
cannot find symbol
[ERROR]symbol  : variable _fsp
[ERROR]location: class org.xerial.json.impl.JSONParser
[ERROR]....../parser/target/generated-sources/antlr/JSONParser.java:[363,54]
cannot find symbol
[ERROR]symbol  : method next()
[ERROR]location: class org.antlr.runtime.tree.RewriteRuleTokenStream
[ERROR]....../parser/target/generated-sources/antlr/JSONParser.java:[364,53]
cannot find symbol
[ERROR]symbol  : method next()
[ERROR]location: class org.antlr.runtime.tree.RewriteRuleSubtreeStream
[ERROR]....../parser/target/generated-sources/antlr/JSONParser.java:[427,12]
cannot find symbol
[ERROR]symbol  : variable _fsp
[ERROR]location: class org.xerial.json.impl.JSONParser
[ERROR]....../parser/target/generated-sources/antlr/JSONParser.java:[451,17]
cannot find symbol
[ERROR]symbol  : variable _fsp
[ERROR]location: class org.xerial.json.impl.JSONParser
[ERROR]....../parser/target/generated-sources/antlr/JSONParser.java:[489,57]
cannot find symbol
[ERROR]symbol  : method next()
[ERROR]location: class org.antlr.runtime.tree.RewriteRuleSubtreeStream
[ERROR]....../parser/target/generated-sources/antlr/JSONParser.java:[628,62]
cannot find symbol
[ERROR]symbol  : method next()
[ERROR]location: class org.antlr.runtime.tree.RewriteRuleTokenStream
[ERROR]....../parser/target/generated-sources/antlr/JSONParser.java:[664,63]
cannot find symbol
[ERROR]symbol  : method next()
[ERROR]location: class org.antlr.runtime.tree.RewriteRuleTokenStream
[ERROR]....../parser/target/generated-sources/antlr/JSONParser.java:[700,62]
cannot find symbol
[ERROR]symbol  : method next()
[ERROR]location: class org.antlr.runtime.tree.RewriteRuleTokenStream
[ERROR]....../parser/target/generated-sources/antlr/JSONParser.java:[718,20]
cannot find symbol
[ERROR]symbol  : variable _fsp
[ERROR]location: class org.xerial.json.impl.JSONParser
[ERROR]....../parser/target/generated-sources/antlr/JSONParser.java:[731,20]
cannot find symbol
[ERROR]symbol  : variable _fsp
[ERROR]location: class org.xerial.json.impl.JSONParser
[ERROR]....../parser/target/generated-sources/antlr/JSONLexer.java:[66,16]
cannot find symbol
[ERROR]symbol  : variable type
[ERROR]location: class org.xerial.json.impl.JSONLexer
[ERROR]....../parser/target/generated-sources/antlr/JSONLexer.java:[84,16]
cannot find symbol
[ERROR]symbol  : variable type
[ERROR]location: class org.xerial.json.impl.JSONLexer
[ERROR]....../parser/target/generated-sources/antlr/JSONLexer.java:[102,16]
cannot find symbol
[ERROR]symbol  : variable type
[ERROR]location: class org.xerial.json.impl.JSONLexer
[ERROR]....../parser/target/generated-sources/antlr/JSONLexer.java:[120,16]
cannot find symbol
[ERROR]symbol  : variable type
[ERROR]location: class org.xerial.json.impl.JSONLexer
[ERROR]....../parser/target/generated-sources/antlr/JSONLexer.java:[138,16]
cannot find symbol
[ERROR]symbol  : variable type
[ERROR]location: class org.xerial.json.impl.JSONLexer
[ERROR]....../parser/target/generated-sources/antlr/JSONLexer.java:[156,16]
cannot find symbol
[ERROR]symbol  : variable type
[ERROR]location: class org.xerial.json.impl.JSONLexer
[ERROR]....../parser/target/generated-sources/antlr/JSONLexer.java:[191,16]
cannot find symbol
[ERROR]symbol  : variable type
[ERROR]location: class org.xerial.json.impl.JSONLexer
[ERROR]....../parser/target/generated-sources/antlr/JSONLexer.java:[210,16]
cannot find symbol
[ERROR]symbol  : variable type
[ERROR]location: class org.xerial.json.impl.JSONLexer
[ERROR]....../parser/target/generated-sources/antlr/JSONLexer.java:[229,16]
cannot find symbol
[ERROR]symbol  : variable type
[ERROR]location: class org.xerial.json.impl.JSONLexer
[ERROR]....../parser/target/generated-sources/antlr/JSONLexer.java:[723,13]
cannot find symbol
[ERROR]symbol  : variable channel
[ERROR]location: class org.xerial.json.impl.JSONLexer
[ERROR]....../parser/target/generated-sources/antlr/JSONLexer.java:[727,16]
cannot find symbol
[ERROR]symbol  : variable type
[ERROR]location: class org.xerial.json.impl.JSONLexer
[ERROR]....../parser/target/generated-sources/antlr/JSONLexer.java:[771,16]
cannot find symbol
[ERROR]symbol  : variable type
[ERROR]location: class org.xerial.json.impl.JSONLexer
[ERROR]....../parser/target/generated-sources/antlr/JSONLexer.java:[789,16]
cannot find symbol
[ERROR]symbol  : variable type
[ERROR]location: class org.xerial.json.impl.JSONLexer
[ERROR]....../parser/target/generated-sources/antlr/JSONLexer.java:[859,16]
cannot find symbol
[ERROR]symbol  : variable type
[ERROR]location: class org.xerial.json.impl.JSONLexer

From kshaw at kendallshaw.com  Fri Jul 31 16:31:09 2009
From: kshaw at kendallshaw.com (Kendall Shaw)
Date: Fri, 31 Jul 2009 16:31:09 -0700
Subject: [antlr-interest] change token type?
Message-ID: <87ws5obfb6.fsf@pokey.kendallshaw.com>

Here's my non-working toy grammar:

grammar test;

tokens {
    CAT = 'cat' ;
    LP = '(' ;
    RP = ')' ;
}

them
    : (cat)=> cat
    | NAME
    ;

cat : CAT LP RP ;

NAME : 'a'..'z'+ ;

The lexer insists that "cat" is a CAT instead of a NAME. In the real
grammar, all keywords can also be identifiers. How can this be done?
None of the examples I've seen so far really fit this case.

I tried:

cat : c:CAT {if(!input.LT(1).getText().equals("[")) c.setType(NAME);} LP RP ;

but that doesn't seem to work.



From cummings at kjchome.homeip.net  Fri Jul 31 16:56:47 2009
From: cummings at kjchome.homeip.net (Kevin J. Cummings)
Date: Fri, 31 Jul 2009 19:56:47 -0400
Subject: [antlr-interest] change token type?
In-Reply-To: <87ws5obfb6.fsf@pokey.kendallshaw.com>
References: <87ws5obfb6.fsf@pokey.kendallshaw.com>
Message-ID: <4A7384BF.30909@kjchome.homeip.net>

On 07/31/2009 07:31 PM, Kendall Shaw wrote:
> Here's my non-working toy grammar:
> 
> grammar test;
> 
> tokens {
>     CAT = 'cat' ;
>     LP = '(' ;
>     RP = ')' ;
> }
> 
> them
>     : (cat)=> cat
>     | NAME
>     ;

Have you tried:

them : (CAT LP)=> cat
     | name;

name : NAME
     | CAT;

> cat : CAT LP RP ;
> 
> NAME : 'a'..'z'+ ;
> 
> The lexer insists that "cat" is a CAT instead of a NAME. In the real
> grammar, all keywords can also be identifiers. How can this be done?
> None of the examples I've seen so far really fit this case.
> 
> I tried:
> 
> cat : c:CAT {if(!input.LT(1).getText().equals("[")) c.setType(NAME);} LP RP ;
> 
> but that doesn't seem to work.
> 
> 
> 
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address


-- 
Kevin J. Cummings
kjchome at rcn.com
cummings at kjchome.homeip.net
cummings at kjc386.framingham.ma.us
Registered Linux User #1232 (http://counter.li.org)

From jared.bunting at peachjean.com  Fri Jul 31 17:00:52 2009
From: jared.bunting at peachjean.com (jared.bunting at peachjean.com)
Date: Sat, 1 Aug 2009 00:00:52 +0000
Subject: [antlr-interest] Help with compile errors in generated source
In-Reply-To: <3cfcba890907311520t49c3ad36g51cfab98c02e0caf@mail.gmail.com>
References: <3cfcba890907311520t49c3ad36g51cfab98c02e0caf@mail.gmail.com>
Message-ID: <88076795-1249084882-cardhu_decombobulator_blackberry.rim.net-434628311-@bxe1049.bisx.prod.on.blackberry>

Try using groupId org.antlr - the maven plugin is now hosted by the antlr project and the codehaus one is obsolete.

-Jared
Sent via BlackBerry by AT&T

-----Original Message-----
From: hanasaki jiji <hanasaki at gmail.com>

Date: Fri, 31 Jul 2009 17:20:54 
To: <antlr-interest at antlr.org>
Subject: [antlr-interest] Help with compile errors in generated source


Hello all... I plugged antlr into maven and ran in netbeans 6.7 and
the source produced is generating compile errors as below.  Any
thoughts as to what is the cause and resolution?  The grammar is the
JSON grammar downloaded from the antlr site.

Thanks,

plugin in maven
           <plugin>
                <groupId>org.codehaus.mojo</groupId>
                <artifactId>antlr3-maven-plugin</artifactId>
                <version>1.0</version>
                <executions>
                    <execution>
                        <goals>
                            <goal>antlr</goal>
                        </goals>
                    </execution>
                </executions>
            </plugin>

///
Compiling 3 source files to ....../parser/target/classes
[ERROR]Mojo:
[ERROR]    org.apache.maven.plugins:maven-compiler-plugin:2.0.2:compile
[ERROR]FAILED for project:
[ERROR]    com.mycompany:parserHTTP:jar:1.0-SNAPSHOT
[ERROR]Reason:
[ERROR]....../parser/target/generated-sources/antlr/JSONParser.java:[97,12]
cannot find symbol
[ERROR]symbol  : variable _fsp
[ERROR]location: class org.xerial.json.impl.JSONParser
[ERROR]....../parser/target/generated-sources/antlr/JSONParser.java:[142,12]
cannot find symbol
[ERROR]symbol  : variable _fsp
[ERROR]location: class org.xerial.json.impl.JSONParser
[ERROR]....../parser/target/generated-sources/antlr/JSONParser.java:[211,20]
cannot find symbol
[ERROR]symbol  : variable _fsp
[ERROR]location: class org.xerial.json.impl.JSONParser
[ERROR]....../parser/target/generated-sources/antlr/JSONParser.java:[235,25]
cannot find symbol
[ERROR]symbol  : variable _fsp
[ERROR]location: class org.xerial.json.impl.JSONParser
[ERROR]....../parser/target/generated-sources/antlr/JSONParser.java:[277,65]
cannot find symbol
[ERROR]symbol  : method next()
[ERROR]location: class org.antlr.runtime.tree.RewriteRuleSubtreeStream
[ERROR]....../parser/target/generated-sources/antlr/JSONParser.java:[342,12]
cannot find symbol
[ERROR]symbol  : variable _fsp
[ERROR]location: class org.xerial.json.impl.JSONParser
[ERROR]....../parser/target/generated-sources/antlr/JSONParser.java:[363,54]
cannot find symbol
[ERROR]symbol  : method next()
[ERROR]location: class org.antlr.runtime.tree.RewriteRuleTokenStream
[ERROR]....../parser/target/generated-sources/antlr/JSONParser.java:[364,53]
cannot find symbol
[ERROR]symbol  : method next()
[ERROR]location: class org.antlr.runtime.tree.RewriteRuleSubtreeStream
[ERROR]....../parser/target/generated-sources/antlr/JSONParser.java:[427,12]
cannot find symbol
[ERROR]symbol  : variable _fsp
[ERROR]location: class org.xerial.json.impl.JSONParser
[ERROR]....../parser/target/generated-sources/antlr/JSONParser.java:[451,17]
cannot find symbol
[ERROR]symbol  : variable _fsp
[ERROR]location: class org.xerial.json.impl.JSONParser
[ERROR]....../parser/target/generated-sources/antlr/JSONParser.java:[489,57]
cannot find symbol
[ERROR]symbol  : method next()
[ERROR]location: class org.antlr.runtime.tree.RewriteRuleSubtreeStream
[ERROR]....../parser/target/generated-sources/antlr/JSONParser.java:[628,62]
cannot find symbol
[ERROR]symbol  : method next()
[ERROR]location: class org.antlr.runtime.tree.RewriteRuleTokenStream
[ERROR]....../parser/target/generated-sources/antlr/JSONParser.java:[664,63]
cannot find symbol
[ERROR]symbol  : method next()
[ERROR]location: class org.antlr.runtime.tree.RewriteRuleTokenStream
[ERROR]....../parser/target/generated-sources/antlr/JSONParser.java:[700,62]
cannot find symbol
[ERROR]symbol  : method next()
[ERROR]location: class org.antlr.runtime.tree.RewriteRuleTokenStream
[ERROR]....../parser/target/generated-sources/antlr/JSONParser.java:[718,20]
cannot find symbol
[ERROR]symbol  : variable _fsp
[ERROR]location: class org.xerial.json.impl.JSONParser
[ERROR]....../parser/target/generated-sources/antlr/JSONParser.java:[731,20]
cannot find symbol
[ERROR]symbol  : variable _fsp
[ERROR]location: class org.xerial.json.impl.JSONParser
[ERROR]....../parser/target/generated-sources/antlr/JSONLexer.java:[66,16]
cannot find symbol
[ERROR]symbol  : variable type
[ERROR]location: class org.xerial.json.impl.JSONLexer
[ERROR]....../parser/target/generated-sources/antlr/JSONLexer.java:[84,16]
cannot find symbol
[ERROR]symbol  : variable type
[ERROR]location: class org.xerial.json.impl.JSONLexer
[ERROR]....../parser/target/generated-sources/antlr/JSONLexer.java:[102,16]
cannot find symbol
[ERROR]symbol  : variable type
[ERROR]location: class org.xerial.json.impl.JSONLexer
[ERROR]....../parser/target/generated-sources/antlr/JSONLexer.java:[120,16]
cannot find symbol
[ERROR]symbol  : variable type
[ERROR]location: class org.xerial.json.impl.JSONLexer
[ERROR]....../parser/target/generated-sources/antlr/JSONLexer.java:[138,16]
cannot find symbol
[ERROR]symbol  : variable type
[ERROR]location: class org.xerial.json.impl.JSONLexer
[ERROR]....../parser/target/generated-sources/antlr/JSONLexer.java:[156,16]
cannot find symbol
[ERROR]symbol  : variable type
[ERROR]location: class org.xerial.json.impl.JSONLexer
[ERROR]....../parser/target/generated-sources/antlr/JSONLexer.java:[191,16]
cannot find symbol
[ERROR]symbol  : variable type
[ERROR]location: class org.xerial.json.impl.JSONLexer
[ERROR]....../parser/target/generated-sources/antlr/JSONLexer.java:[210,16]
cannot find symbol
[ERROR]symbol  : variable type
[ERROR]location: class org.xerial.json.impl.JSONLexer
[ERROR]....../parser/target/generated-sources/antlr/JSONLexer.java:[229,16]
cannot find symbol
[ERROR]symbol  : variable type
[ERROR]location: class org.xerial.json.impl.JSONLexer
[ERROR]....../parser/target/generated-sources/antlr/JSONLexer.java:[723,13]
cannot find symbol
[ERROR]symbol  : variable channel
[ERROR]location: class org.xerial.json.impl.JSONLexer
[ERROR]....../parser/target/generated-sources/antlr/JSONLexer.java:[727,16]
cannot find symbol
[ERROR]symbol  : variable type
[ERROR]location: class org.xerial.json.impl.JSONLexer
[ERROR]....../parser/target/generated-sources/antlr/JSONLexer.java:[771,16]
cannot find symbol
[ERROR]symbol  : variable type
[ERROR]location: class org.xerial.json.impl.JSONLexer
[ERROR]....../parser/target/generated-sources/antlr/JSONLexer.java:[789,16]
cannot find symbol
[ERROR]symbol  : variable type
[ERROR]location: class org.xerial.json.impl.JSONLexer
[ERROR]....../parser/target/generated-sources/antlr/JSONLexer.java:[859,16]
cannot find symbol
[ERROR]symbol  : variable type
[ERROR]location: class org.xerial.json.impl.JSONLexer

List: http://www.antlr.org/mailman/listinfo/antlr-interest
Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address

From michael.bedward at gmail.com  Fri Jul 31 17:18:23 2009
From: michael.bedward at gmail.com (Michael Bedward)
Date: Sat, 1 Aug 2009 10:18:23 +1000
Subject: [antlr-interest] Help with compile errors in generated source
In-Reply-To: <88076795-1249084882-cardhu_decombobulator_blackberry.rim.net-434628311-@bxe1049.bisx.prod.on.blackberry>
References: <3cfcba890907311520t49c3ad36g51cfab98c02e0caf@mail.gmail.com>
	<88076795-1249084882-cardhu_decombobulator_blackberry.rim.net-434628311-@bxe1049.bisx.prod.on.blackberry>
Message-ID: <e24c4c270907311718u56490d48q3f6024bc8772ef10@mail.gmail.com>

Here's a fragment of the pom.xml that I use...

    <build>
        <plugins>
            <plugin>
                <groupId>org.antlr</groupId>
                <artifactId>antlr3-maven-plugin</artifactId>
                <version>3.1.3-1</version>
                <executions>
                    <execution>
                        <goals>
                            <goal>antlr</goal>
                        </goals>
                    </execution>
                </executions>
            </plugin>

            <!-- other plugins -->
        </plugins>
    </build>

    <dependencies>
        <dependency>
            <groupId>org.antlr</groupId>
            <artifactId>antlr</artifactId>
            <version>3.1.3</version>
        </dependency>

        <!-- other dependencies -->

    </dependencies>

From kshaw at kendallshaw.com  Fri Jul 31 17:20:59 2009
From: kshaw at kendallshaw.com (Kendall Shaw)
Date: Fri, 31 Jul 2009 17:20:59 -0700
Subject: [antlr-interest] change token type?
In-Reply-To: <4A7384BF.30909@kjchome.homeip.net> (Kevin J. Cummings's message
	of "Fri\, 31 Jul 2009 19\:56\:47 -0400")
References: <87ws5obfb6.fsf@pokey.kendallshaw.com>
	<4A7384BF.30909@kjchome.homeip.net>
Message-ID: <878wi4qt90.fsf@pokey.kendallshaw.com>

"Kevin J. Cummings" <cummings at kjchome.homeip.net> writes:

> On 07/31/2009 07:31 PM, Kendall Shaw wrote:
>> Here's my non-working toy grammar:
>> 
>> grammar test;
>> 
>> tokens {
>>     CAT = 'cat' ;
>>     LP = '(' ;
>>     RP = ')' ;
>> }
>> 
>> them
>>     : (cat)=> cat
>>     | NAME
>>     ;
>
> Have you tried:
>
> them : (CAT LP)=> cat
>      | name;
>
> name : NAME
>      | CAT;

Thanks! I had tried something like the name rule there from the FAQ,
but I missed that it was a parser rule, and got ambiguity errors.

Kendall

From jimi at temporal-wave.com  Fri Jul 31 18:16:56 2009
From: jimi at temporal-wave.com (Jim Idle)
Date: Fri, 31 Jul 2009 18:16:56 -0700
Subject: [antlr-interest] Help with compile errors in generated source
In-Reply-To: <3cfcba890907311520t49c3ad36g51cfab98c02e0caf@mail.gmail.com>
References: <3cfcba890907311520t49c3ad36g51cfab98c02e0caf@mail.gmail.com>
Message-ID: <CEE77130-2163-4FB3-974F-2295E0366E7C@temporal-wave.com>

See : http://www.antlr.org/antlr3-maven-plugin/index.html
Jim

On Jul 31, 2009, at 3:20 PM, hanasaki jiji <hanasaki at gmail.com> wrote:

> Hello all... I plugged antlr into maven and ran in netbeans 6.7 and
> the source produced is generating compile errors as below.  Any
> thoughts as to what is the cause and resolution?  The grammar is the
> JSON grammar downloaded from the antlr site.
>
> Thanks,
>
> plugin in maven
>           <plugin>
>                <groupId>org.codehaus.mojo</groupId>
>                <artifactId>antlr3-maven-plugin</artifactId>
>                <version>1.0</version>
>                <executions>
>                    <execution>
>                        <goals>
>                            <goal>antlr</goal>
>                        </goals>
>                    </execution>
>                </executions>
>            </plugin>
>
> ///
> Compiling 3 source files to ....../parser/target/classes
> [ERROR]Mojo:
> [ERROR]    org.apache.maven.plugins:maven-compiler-plugin: 
> 2.0.2:compile
> [ERROR]FAILED for project:
> [ERROR]    com.mycompany:parserHTTP:jar:1.0-SNAPSHOT
> [ERROR]Reason:
> [ERROR]....../parser/target/generated-sources/antlr/JSONParser.java: 
> [97,12]
> cannot find symbol
> [ERROR]symbol  : variable _fsp
> [ERROR]location: class org.xerial.json.impl.JSONParser
> [ERROR]....../parser/target/generated-sources/antlr/JSONParser.java: 
> [142,12]
> cannot find symbol
> [ERROR]symbol  : variable _fsp
> [ERROR]location: class org.xerial.json.impl.JSONParser
> [ERROR]....../parser/target/generated-sources/antlr/JSONParser.java: 
> [211,20]
> cannot find symbol
> [ERROR]symbol  : variable _fsp
> [ERROR]location: class org.xerial.json.impl.JSONParser
> [ERROR]....../parser/target/generated-sources/antlr/JSONParser.java: 
> [235,25]
> cannot find symbol
> [ERROR]symbol  : variable _fsp
> [ERROR]location: class org.xerial.json.impl.JSONParser
> [ERROR]....../parser/target/generated-sources/antlr/JSONParser.java: 
> [277,65]
> cannot find symbol
> [ERROR]symbol  : method next()
> [ERROR]location: class org.antlr.runtime.tree.RewriteRuleSubtreeStream
> [ERROR]....../parser/target/generated-sources/antlr/JSONParser.java: 
> [342,12]
> cannot find symbol
> [ERROR]symbol  : variable _fsp
> [ERROR]location: class org.xerial.json.impl.JSONParser
> [ERROR]....../parser/target/generated-sources/antlr/JSONParser.java: 
> [363,54]
> cannot find symbol
> [ERROR]symbol  : method next()
> [ERROR]location: class org.antlr.runtime.tree.RewriteRuleTokenStream
> [ERROR]....../parser/target/generated-sources/antlr/JSONParser.java: 
> [364,53]
> cannot find symbol
> [ERROR]symbol  : method next()
> [ERROR]location: class org.antlr.runtime.tree.RewriteRuleSubtreeStream
> [ERROR]....../parser/target/generated-sources/antlr/JSONParser.java: 
> [427,12]
> cannot find symbol
> [ERROR]symbol  : variable _fsp
> [ERROR]location: class org.xerial.json.impl.JSONParser
> [ERROR]....../parser/target/generated-sources/antlr/JSONParser.java: 
> [451,17]
> cannot find symbol
> [ERROR]symbol  : variable _fsp
> [ERROR]location: class org.xerial.json.impl.JSONParser
> [ERROR]....../parser/target/generated-sources/antlr/JSONParser.java: 
> [489,57]
> cannot find symbol
> [ERROR]symbol  : method next()
> [ERROR]location: class org.antlr.runtime.tree.RewriteRuleSubtreeStream
> [ERROR]....../parser/target/generated-sources/antlr/JSONParser.java: 
> [628,62]
> cannot find symbol
> [ERROR]symbol  : method next()
> [ERROR]location: class org.antlr.runtime.tree.RewriteRuleTokenStream
> [ERROR]....../parser/target/generated-sources/antlr/JSONParser.java: 
> [664,63]
> cannot find symbol
> [ERROR]symbol  : method next()
> [ERROR]location: class org.antlr.runtime.tree.RewriteRuleTokenStream
> [ERROR]....../parser/target/generated-sources/antlr/JSONParser.java: 
> [700,62]
> cannot find symbol
> [ERROR]symbol  : method next()
> [ERROR]location: class org.antlr.runtime.tree.RewriteRuleTokenStream
> [ERROR]....../parser/target/generated-sources/antlr/JSONParser.java: 
> [718,20]
> cannot find symbol
> [ERROR]symbol  : variable _fsp
> [ERROR]location: class org.xerial.json.impl.JSONParser
> [ERROR]....../parser/target/generated-sources/antlr/JSONParser.java: 
> [731,20]
> cannot find symbol
> [ERROR]symbol  : variable _fsp
> [ERROR]location: class org.xerial.json.impl.JSONParser
> [ERROR]....../parser/target/generated-sources/antlr/JSONLexer.java: 
> [66,16]
> cannot find symbol
> [ERROR]symbol  : variable type
> [ERROR]location: class org.xerial.json.impl.JSONLexer
> [ERROR]....../parser/target/generated-sources/antlr/JSONLexer.java: 
> [84,16]
> cannot find symbol
> [ERROR]symbol  : variable type
> [ERROR]location: class org.xerial.json.impl.JSONLexer
> [ERROR]....../parser/target/generated-sources/antlr/JSONLexer.java: 
> [102,16]
> cannot find symbol
> [ERROR]symbol  : variable type
> [ERROR]location: class org.xerial.json.impl.JSONLexer
> [ERROR]....../parser/target/generated-sources/antlr/JSONLexer.java: 
> [120,16]
> cannot find symbol
> [ERROR]symbol  : variable type
> [ERROR]location: class org.xerial.json.impl.JSONLexer
> [ERROR]....../parser/target/generated-sources/antlr/JSONLexer.java: 
> [138,16]
> cannot find symbol
> [ERROR]symbol  : variable type
> [ERROR]location: class org.xerial.json.impl.JSONLexer
> [ERROR]....../parser/target/generated-sources/antlr/JSONLexer.java: 
> [156,16]
> cannot find symbol
> [ERROR]symbol  : variable type
> [ERROR]location: class org.xerial.json.impl.JSONLexer
> [ERROR]....../parser/target/generated-sources/antlr/JSONLexer.java: 
> [191,16]
> cannot find symbol
> [ERROR]symbol  : variable type
> [ERROR]location: class org.xerial.json.impl.JSONLexer
> [ERROR]....../parser/target/generated-sources/antlr/JSONLexer.java: 
> [210,16]
> cannot find symbol
> [ERROR]symbol  : variable type
> [ERROR]location: class org.xerial.json.impl.JSONLexer
> [ERROR]....../parser/target/generated-sources/antlr/JSONLexer.java: 
> [229,16]
> cannot find symbol
> [ERROR]symbol  : variable type
> [ERROR]location: class org.xerial.json.impl.JSONLexer
> [ERROR]....../parser/target/generated-sources/antlr/JSONLexer.java: 
> [723,13]
> cannot find symbol
> [ERROR]symbol  : variable channel
> [ERROR]location: class org.xerial.json.impl.JSONLexer
> [ERROR]....../parser/target/generated-sources/antlr/JSONLexer.java: 
> [727,16]
> cannot find symbol
> [ERROR]symbol  : variable type
> [ERROR]location: class org.xerial.json.impl.JSONLexer
> [ERROR]....../parser/target/generated-sources/antlr/JSONLexer.java: 
> [771,16]
> cannot find symbol
> [ERROR]symbol  : variable type
> [ERROR]location: class org.xerial.json.impl.JSONLexer
> [ERROR]....../parser/target/generated-sources/antlr/JSONLexer.java: 
> [789,16]
> cannot find symbol
> [ERROR]symbol  : variable type
> [ERROR]location: class org.xerial.json.impl.JSONLexer
> [ERROR]....../parser/target/generated-sources/antlr/JSONLexer.java: 
> [859,16]
> cannot find symbol
> [ERROR]symbol  : variable type
> [ERROR]location: class org.xerial.json.impl.JSONLexer
>
> List: http://www.antlr.org/mailman/listinfo/antlr-interest
> Unsubscribe: http://www.antlr.org/mailman/options/antlr-interest/your-email-address

From scott at indosoft.com  Fri Jul 31 18:57:24 2009
From: scott at indosoft.com (Scott Van Wart)
Date: Fri, 31 Jul 2009 22:57:24 -0300
Subject: [antlr-interest] Parsing quoted phrases and non-quoted keywords
In-Reply-To: <200907312021.n6VKLa4P016588@mail.indosoft.com>
References: <4A731C7B.5090302@indosoft.com>
	<200907312021.n6VKLa4P016588@mail.indosoft.com>
Message-ID: <4A73A104.80602@indosoft.com>

Fantastic, thanks very much for your help!  My quoted string rule used 
to be a parser rule but I thought I could separate out the quotes in the 
parser rather than in my own Java code.  Yay for laziness. (more inline 
comments below)

Gavin Lambert wrote:
> Another alternative here is to just use this instead:
>
>   OTHER: . ;
Now just to check my understanding, I thought I'd try a non-greedy loop 
to see what error it would give me (I assumed it would give an error 
since you didn't mention it as a viable solution :):

    OTHER: ( options { greedy = false; } : . )+;

Which gave me "The following alternatives can never be matched: 1".  
Since the rule doesn't have some kind of terminating token (like '/*' ( 
options { greedy = false; } : . )* '*/') and it won't look at other 
rules to find out when to stop, the greedy match won't match anything at 
all.  Is that the right understanding?  Why then wouldn't it always 
match a single character due to the '+' being 1 or more matches?

Thanks again! Got it working perfectly.

- Scott


