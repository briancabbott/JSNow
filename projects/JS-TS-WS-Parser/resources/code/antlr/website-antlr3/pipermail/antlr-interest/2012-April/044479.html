<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [antlr-interest] parsing preprocessed C file
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20parsing%20preprocessed%20C%20file&In-Reply-To=%3CBB22F3B4-589B-4C74-857E-B639E44CAF89%40UDel.Edu%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="044476.html">
   <LINK REL="Next"  HREF="044480.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[antlr-interest] parsing preprocessed C file</H1>
    <B>Stephen Siegel</B> 
    <A HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20parsing%20preprocessed%20C%20file&In-Reply-To=%3CBB22F3B4-589B-4C74-857E-B639E44CAF89%40UDel.Edu%3E"
       TITLE="[antlr-interest] parsing preprocessed C file">siegel at udel.edu
       </A><BR>
    <I>Thu Apr 19 07:00:23 PDT 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="044476.html">[antlr-interest] Interest in CUDA Target?
</A></li>
        <LI>Next message: <A HREF="044480.html">[antlr-interest] ANTLR C target FAQ
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#44479">[ date ]</a>
              <a href="thread.html#44479">[ thread ]</a>
              <a href="subject.html#44479">[ subject ]</a>
              <a href="author.html#44479">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I want to parse a C file that has already gone through the C preprocessor.  My question is, how do I get my parser to associate the correct files and line numbers to each token?

I found this question and an answer in one of the FAQs (<A HREF="http://www.antlr.org/wiki/display/ANTLR3/FAQ+-+C+Target">http://www.antlr.org/wiki/display/ANTLR3/FAQ+-+C+Target</A>):

------------------------------------- begin quote -------------------------------------

One way is to follow this path:

	&#8226; Derive your own token from CommonToken and add file number field to it;
	&#8226; Get the lexer to produce those tokens and the parser to accept them;
	&#8226; Build a file table in the lexer and refer to it in error messages;
	&#8226; Keep track of current file in the lexer in case you need error messages from thelexer;
	&#8226; Keep track of current line number in the inferred file by setting it in your PPLINE rule then incrementing it in your NEWLINE rule;
	&#8226; Set the line and file number at the end of each rule (or override the nextToken stuff to set this automatically);
Start down that path and you will see the best way for your requirements.

In the C target there are user fields for storing such additional information so you can do the same thing as deriving a token.

-------------------------------------- end quote --------------------------------------

I was wondering if anyone has actually done this, and can share the result?   Or, are there any examples around that do any of the things above that might help me figure out how to do this?

I'm using the Java target.
Thanks.

</PRE>





<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="044476.html">[antlr-interest] Interest in CUDA Target?
</A></li>
	<LI>Next message: <A HREF="044480.html">[antlr-interest] ANTLR C target FAQ
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#44479">[ date ]</a>
              <a href="thread.html#44479">[ thread ]</a>
              <a href="subject.html#44479">[ subject ]</a>
              <a href="author.html#44479">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.antlr.org/mailman/listinfo/antlr-interest">More information about the antlr-interest
mailing list</a><br>
</body></html>
