<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [antlr-interest] ANTLR 3.0 tree construction proposal
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:antlr-interest%40antlr.org?Subject=%5Bantlr-interest%5D%20ANTLR%203.0%20tree%20construction%20proposal&In-Reply-To=c548335d25a9297a19a8d7a7a9ef71ff%40cs.usfca.edu">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="011066.html">
   <LINK REL="Next"  HREF="011068.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[antlr-interest] ANTLR 3.0 tree construction proposal</H1>
    <B>John D. Mitchell</B> 
    <A HREF="mailto:antlr-interest%40antlr.org?Subject=%5Bantlr-interest%5D%20ANTLR%203.0%20tree%20construction%20proposal&In-Reply-To=c548335d25a9297a19a8d7a7a9ef71ff%40cs.usfca.edu"
       TITLE="[antlr-interest] ANTLR 3.0 tree construction proposal">johnm-antlr at non.net
       </A><BR>
    <I>Tue Feb  1 15:24:26 PST 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="011066.html">[antlr-interest] Throwing exceptions from rules.
</A></li>
        <LI>Next message: <A HREF="011068.html">[antlr-interest] ANTLR 3.0 tree construction proposal
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11067">[ date ]</a>
              <a href="thread.html#11067">[ thread ]</a>
              <a href="subject.html#11067">[ subject ]</a>
              <a href="author.html#11067">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Re:  ^^

It's about time!  :-)

I don't like the change of semantics for ^ but I must agree with the
argument that ^^ makes more sense for the rule root and ^ for the local
root.


Re:  -&gt;

Definitely better than =&gt;.


Re:  Tree rewrites

(A) Getting rid of the e.g., #(...) is good by me.

(B) I'm concerned by the need to repeat the arguments in the RHS such as in:

decl : &quot;var&quot; (ID ':' type ';')+ -&gt; ^(&quot;var&quot; ^(':' ID type)+) ;

What happens when there's two &quot;var&quot;s?  Which &quot;var&quot; is going to be used as
the basis on the RHS?

Heck, what about typos?

[Yes, I understand that they can be explicitly labeled -- I'm asking about
these &quot;simple&quot; cases.]

(C) I haven't used Loring's stuff so I'm going to re-read his comments in
this thread and think about them.


Re: Imaginary Nodes

I find the LPAREN[] utterly distasteful and expect that it will cause hard
to see errors.


Re: Actions in rewrite rules

You need to expand/clarify that section in your document.


Re: Rewrite specs in subrules

No, I don't buy either of your arguments.

I think it's more clear and controllable to (finally) support labelling the
subrules.  The subrule rewrites are then constrained to be bound to the
label which is used in the overall rewrite rule for the rule.


Re: Attribute integration

As I've noted previously, I don't like the co-mingling of the dynamic
attributes and the local attributes.  I think it's important that those
separate but related constructions appear distinct from each other.


Re: Rewrite dependent on semantics

(A) I like the use of semantic predicates for this.

(B) Is it just me or is the ? at the end of the semantic predicates
ridiculously hard to see?  I'd love to see that move to be a prefix, i.e.,:
  ?{...}
The left edge is (with any non-insane formatting convention) always easier
for humans to scan and parse.


Re: Other Issues that I didn't see addressed in your blog...

(A) Payload games

Hmm... Don't we need to support the ability to treat the payload as e.g., a
list of payloads?  I.e., I'd like the first payload in the AST node to be
the e.g., Token but then I want to add annotations that are tied to that
node (rather than building e.g., a map).


(B) Tree to tree transformations basics

Basic question: is anything that you're thinking of doing going to make it
(a) easier, clearer, etc. or (b) more confusing, harder, etc. in the
multiple tree-to-tree phases?


(C) Tree surgery

Moving beyond the simplistic cases in (A), all of the interesting work
being done in tree tranforms is real surgery of the tree.  I.e.,
transformations which take place across a number of rules working in
conjunction.

A couple of areas that come immediately to mind are the need for labelled
subrules and being able to pass (and use) trees (aka tree fragments) around
in dynamic attributes (both down/inherited and up/synthesized) and as
parameters/return values.


(D) Error handling

You haven't gone into how the error handling would work with this.


Thanks,
	John
</PRE>










<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="011066.html">[antlr-interest] Throwing exceptions from rules.
</A></li>
	<LI>Next message: <A HREF="011068.html">[antlr-interest] ANTLR 3.0 tree construction proposal
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11067">[ date ]</a>
              <a href="thread.html#11067">[ thread ]</a>
              <a href="subject.html#11067">[ subject ]</a>
              <a href="author.html#11067">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.antlr.org/mailman/listinfo/antlr-interest">More information about the antlr-interest
mailing list</a><br>
</body></html>
