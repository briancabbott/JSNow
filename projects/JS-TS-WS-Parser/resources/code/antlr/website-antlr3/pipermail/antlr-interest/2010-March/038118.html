<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [antlr-interest] FailedPredicateException leads to infinite	loop - bug in the Lexer?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20FailedPredicateException%20leads%20to%20infinite%0A%09loop%20-%20bug%20in%20the%20Lexer%3F&In-Reply-To=%3Cg2w1c0448551003311213s8b52026o11cf40c1a273a08e%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="038117.html">
   <LINK REL="Next"  HREF="038084.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[antlr-interest] FailedPredicateException leads to infinite	loop - bug in the Lexer?</H1>
    <B>Cliff Hudson</B> 
    <A HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20FailedPredicateException%20leads%20to%20infinite%0A%09loop%20-%20bug%20in%20the%20Lexer%3F&In-Reply-To=%3Cg2w1c0448551003311213s8b52026o11cf40c1a273a08e%40mail.gmail.com%3E"
       TITLE="[antlr-interest] FailedPredicateException leads to infinite	loop - bug in the Lexer?">cliff.s.hudson at gmail.com
       </A><BR>
    <I>Wed Mar 31 12:13:57 PDT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="038117.html">[antlr-interest] FailedPredicateException leads to infinite	loop - bug in the Lexer?
</A></li>
        <LI>Next message: <A HREF="038084.html">[antlr-interest] C example error
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#38118">[ date ]</a>
              <a href="thread.html#38118">[ thread ]</a>
              <a href="subject.html#38118">[ subject ]</a>
              <a href="author.html#38118">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>So I ended up doing something I think a little similar to this, except that
I get START_TAG followed by UNEXPECTED rather than the other way around - I
could probably fix this by having an action which tosses the appropriate
token or something.  I have managed to keep all modes strictly in the lexer
though, and it is now tolerant of every syntax error I've thrown at it.

Thanks for the assistance.

On Wed, Mar 31, 2010 at 11:27 AM, Ron Burk &lt;<A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">ronburk at gmail.com</A>&gt; wrote:

&gt;<i> &gt; My question is then what is
</I>&gt;<i> &gt; the appropriate way to construct the lexer such that it will recover
</I>&gt;<i> &gt; gracefully from that invalid input and NOT go into the infinite loop
</I>&gt;<i> state
</I>&gt;<i> &gt; caused by the thrown exception?
</I>&gt;<i>
</I>&gt;<i> Personally, I try to keep &quot;modes&quot; in the lexer and
</I>&gt;<i> out of the parser. I probably would have had the
</I>&gt;<i> lexer looking past any initial '&lt;' to distinguish the
</I>&gt;<i> various types of things it presages (especially
</I>&gt;<i> since the XML spec seems to make that relatively
</I>&gt;<i> easy). So, for example, this:
</I>&gt;<i>
</I>&gt;<i> &gt; &lt;Program&gt;&lt;&lt;/Program&gt;
</I>&gt;<i>
</I>&gt;<i> would have returned a token stream like:
</I>&gt;<i>
</I>&gt;<i> TK_START_TAG
</I>&gt;<i> TK_IDENT
</I>&gt;<i> TK_GT
</I>&gt;<i> TK_ILLEGAL
</I>&gt;<i> TK_END_TAG
</I>&gt;<i> TK_IDENT
</I>&gt;<i> TK_GT
</I>&gt;<i>
</I>&gt;<i> I would keep modes like CDATA in the lexer.
</I>&gt;<i> YMMV, many ways to skin a cat, etc.
</I>&gt;<i>
</I></PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="038117.html">[antlr-interest] FailedPredicateException leads to infinite	loop - bug in the Lexer?
</A></li>
	<LI>Next message: <A HREF="038084.html">[antlr-interest] C example error
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#38118">[ date ]</a>
              <a href="thread.html#38118">[ thread ]</a>
              <a href="subject.html#38118">[ subject ]</a>
              <a href="author.html#38118">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.antlr.org/mailman/listinfo/antlr-interest">More information about the antlr-interest
mailing list</a><br>
</body></html>
