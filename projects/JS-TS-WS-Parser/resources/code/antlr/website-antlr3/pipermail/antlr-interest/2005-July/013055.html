<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> Fwd: [antlr-interest] How to set filename in parser
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:antlr-interest%40antlr.org?Subject=Fwd%3A%20%5Bantlr-interest%5D%20How%20to%20set%20filename%20in%20parser&In-Reply-To=bc607a4e05071400267318d285%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="013066.html">
   <LINK REL="Next"  HREF="013057.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>Fwd: [antlr-interest] How to set filename in parser</H1>
    <B>Ric Klaren</B> 
    <A HREF="mailto:antlr-interest%40antlr.org?Subject=Fwd%3A%20%5Bantlr-interest%5D%20How%20to%20set%20filename%20in%20parser&In-Reply-To=bc607a4e05071400267318d285%40mail.gmail.com"
       TITLE="Fwd: [antlr-interest] How to set filename in parser">ric.klaren at gmail.com
       </A><BR>
    <I>Thu Jul 14 00:27:12 PDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="013066.html">[antlr-interest] generating root nodes in tree parser
</A></li>
        <LI>Next message: <A HREF="013057.html">Fwd: [antlr-interest] How to set filename in parser
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13055">[ date ]</a>
              <a href="thread.html#13055">[ thread ]</a>
              <a href="subject.html#13055">[ subject ]</a>
              <a href="author.html#13055">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>hmmm more coffee....

---------- Forwarded message ----------
From: Ric Klaren &lt;<A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">ric.klaren at gmail.com</A>&gt;
Date: Jul 14, 2005 9:26 AM
Subject: Re: [antlr-interest] How to set filename in parser
To: shmuel siegel &lt;<A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">antlr at shmuelhome.mine.nu</A>&gt;


On 7/13/05, shmuel siegel &lt;<A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">antlr at shmuelhome.mine.nu</A>&gt; wrote:
&gt;<i> My grammar parses the output of a c preprocessor. It interprets the
</I>&gt;<i> #line directives so that syntax errors can be easily tracked back to the
</I>&gt;<i> original file. My lexer sets the filename and linenumber parameters
</I>&gt;<i> appropriately and then treats the directive like a single line comment.
</I>&gt;<i> This works fine for the lexer; when an error occurs, the proper error
</I>&gt;<i> message is printed. But the parser never finds out about this
</I>&gt;<i> resequencing, so syntactical errors at the parser level do not reflect
</I>&gt;<i> the original file information. Short of overriding the various match
</I>&gt;<i> routines, is there any simple way to propagate the #line information
</I>&gt;<i> from the lexer to the parser?
</I>
If I recall right working example code is available in
<A HREF="http://sourceforge.net/projects/antlraux/">http://sourceforge.net/projects/antlraux/</A>

If you set the line info correct in the lexer inputstate then tokens
should be created with the right line/column information. I don't
recall of the top of my head if CommonToken had a filename attribute.
You might have to make a custom token class and override makeToken in
the lexer to put the filename in the token as well.

After that you may have to override reportError and friends in the
parser not sure about that though.

Cheers,

Ric
</PRE>

















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="013066.html">[antlr-interest] generating root nodes in tree parser
</A></li>
	<LI>Next message: <A HREF="013057.html">Fwd: [antlr-interest] How to set filename in parser
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13055">[ date ]</a>
              <a href="thread.html#13055">[ thread ]</a>
              <a href="subject.html#13055">[ subject ]</a>
              <a href="author.html#13055">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.antlr.org/mailman/listinfo/antlr-interest">More information about the antlr-interest
mailing list</a><br>
</body></html>
