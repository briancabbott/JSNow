<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [antlr-interest] Problem with Tree Parser
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:antlr-interest%40antlr.org?Subject=%5Bantlr-interest%5D%20Problem%20with%20Tree%20Parser&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="012177.html">
   <LINK REL="Next"  HREF="012181.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[antlr-interest] Problem with Tree Parser</H1>
    <B>Steven Robenalt</B> 
    <A HREF="mailto:antlr-interest%40antlr.org?Subject=%5Bantlr-interest%5D%20Problem%20with%20Tree%20Parser&In-Reply-To="
       TITLE="[antlr-interest] Problem with Tree Parser">sarobenalt at yahoo.com
       </A><BR>
    <I>Mon May 16 15:46:09 PDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="012177.html">[antlr-interest] ANTLR2005 workshop status
</A></li>
        <LI>Next message: <A HREF="012181.html">[antlr-interest] Problem with Tree Parser
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12180">[ date ]</a>
              <a href="thread.html#12180">[ thread ]</a>
              <a href="subject.html#12180">[ subject ]</a>
              <a href="author.html#12180">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi all,

I'm having trouble with a tree parser that I'm just
starting to build based on the Standard C parser. I'm
using the GnuCTreeWalker/GnuCEmitter as the starting
point, but this particular problem doesn't seem to be
related to the grammar itself.

In brief, I am attempting to parse a simple (no
preprocessor directives) header file containing only
structure declarations. The parser generates what
appears to be a complete and valid AST using automatic
AST generation. The tree parser is then applied to
simply convert the parse tree back to an equivalent
declaration. 

After all of the field declarations in the structure
have been emitted, The tree parser halts with a
ClassCastException when it encounters an ASTNULLType
node and tries to typecast it to a TNode:
 
     return (TNode)_t; 

where _t is ASTNULLType at this point in the parse.
Unfortunately, although ASTNULLType and TNode both
have a common ancestor interface, the classes are not
compatible for a type cast to TNode. This doesn't
appear to me to be related to the grammar, but rather
with the TNode class as related to a built-in ANTLR
type. I would appreciate hearing from anyone who may
have encountered this problem, particularly if you
have done any useful work with the example C grammar.
In particular, I would like to know if there is a
workaround or if I need to add something to the
grammar file to handle this situation.

I could post the grammar file, etc. but it would be
easier to use the posted example C grammar directly to
parse a struct declaration since I really haven't
deviated from it significantly at this point in the
process.

Thanks for any help you can offer,
- Steve Robenalt
<A HREF="http://www.antlr.org/mailman/listinfo/antlr-interest">sarobenalt at yahoo.com</A>


</PRE>





















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="012177.html">[antlr-interest] ANTLR2005 workshop status
</A></li>
	<LI>Next message: <A HREF="012181.html">[antlr-interest] Problem with Tree Parser
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12180">[ date ]</a>
              <a href="thread.html#12180">[ thread ]</a>
              <a href="subject.html#12180">[ subject ]</a>
              <a href="author.html#12180">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.antlr.org/mailman/listinfo/antlr-interest">More information about the antlr-interest
mailing list</a><br>
</body></html>
