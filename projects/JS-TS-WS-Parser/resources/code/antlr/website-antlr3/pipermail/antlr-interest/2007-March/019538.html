<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [antlr-interest] DoubleLinkedTree
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20DoubleLinkedTree&In-Reply-To=%3C20070301180555.GA15875%40badgers-in-foil.co.uk%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="019534.html">
   <LINK REL="Next"  HREF="019554.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[antlr-interest] DoubleLinkedTree</H1>
    <B>David Holroyd</B> 
    <A HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20DoubleLinkedTree&In-Reply-To=%3C20070301180555.GA15875%40badgers-in-foil.co.uk%3E"
       TITLE="[antlr-interest] DoubleLinkedTree">dave at badgers-in-foil.co.uk
       </A><BR>
    <I>Thu Mar  1 10:05:56 PST 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="019534.html">[antlr-interest] DoubleLinkedTree
</A></li>
        <LI>Next message: <A HREF="019554.html">[antlr-interest] DoubleLinkedTree
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19538">[ date ]</a>
              <a href="thread.html#19538">[ thread ]</a>
              <a href="subject.html#19538">[ subject ]</a>
              <a href="author.html#19538">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Thu, Mar 01, 2007 at 05:07:38PM +0100, Alexander G?ngel wrote:
&gt;<i> Can anybody give me hint how to get DoublelinkTrees  to work?
</I>
You have to tell the Parser to use a TreeAdapter implementation that
you've created that can construct and manipulate the custom class that
you've implemented.

'ASTLabelType' only controls the creation of local variable
declarations, and typecasting in the generated parser code, I think.

Sorry I've I've missunderstood, or you are already doing this.


&gt;<i> Alexander G?ngel schrieb:
</I>&gt;<i> &gt; The exception comes when call the parser.Rule
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; 19        CharStream input = new ANTLRFileStream(args[0]);
</I>&gt;<i> &gt; 20        oclLexer lex = new oclLexer(input);
</I>&gt;<i> &gt; 21        CommonTokenStream tokens = new CommonTokenStream(lex);
</I>&gt;<i> &gt; 22
</I>&gt;<i> &gt; 23        oclParser parser = new oclParser(tokens);
</I>&gt;<i> &gt; 24        oclParser.start_return r = parser.start();
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Exception in thread &quot;main&quot; java.lang.ClassCastException:
</I>&gt;<i> &gt; org.antlr.runtime.tree.CommonTree
</I>&gt;<i> &gt;     at ocl_parser.oclParser.ocl(oclParser.java:186)
</I>&gt;<i> &gt;     at ocl_parser.oclParser.start(oclParser.java:122)
</I>&gt;<i> &gt;     at tests.ImBaumsuchen.main(ImBaumsuchen.java:24)
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; (oclParser.java:122)
</I>&gt;<i> &gt; 117        try {
</I>&gt;<i> &gt; 118            // src/ocl_parser/ocl.g:102:9: ( ocl -&gt; ^( OCL ocl ) )
</I>&gt;<i> &gt; 119            // src/ocl_parser/ocl.g:102:9: ocl
</I>&gt;<i> &gt; 120            {
</I>&gt;<i> &gt; 121            pushFollow(FOLLOW_ocl_in_start193);
</I>&gt;<i> &gt; 122            ocl1=ocl();
</I>&gt;<i> &gt; 123            _fsp--;
</I>&gt;<i> &gt; 124            if (failed) return retval;
</I>&gt;<i> &gt; 125            if ( backtracking==0 ) list_ocl.add(ocl1.getTree());
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; (oclParser.java:186)
</I>&gt;<i> &gt; 182        try {
</I>&gt;<i> &gt; 183            // src/ocl_parser/ocl.g:105:2: ( ( package_decl | context
</I>&gt;<i> &gt; )+ )
</I>&gt;<i> &gt; 184            // src/ocl_parser/ocl.g:105:2: ( package_decl | context )+
</I>&gt;<i> &gt; 185            {
</I>&gt;<i> &gt; 186            root_0 = (OclAst)adaptor.nil();
</I>&gt;<i> &gt; 187
</I>&gt;<i> &gt; 188            // src/ocl_parser/ocl.g:105:2: ( package_decl | context )+
</I>&gt;<i> &gt; 189            int cnt1=0;
</I>&gt;<i> &gt; 190            loop1:
</I>&gt;<i> &gt; 191            do {
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; I tried to make myAst extend DoublelinkTree or Commontree both with same
</I>&gt;<i> &gt; effect
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; when I use Commontree in my Grammar everything works fine.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Alexander
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Terence Parr schrieb:
</I>&gt;<i> &gt;   
</I>&gt;<i> &gt;&gt; Where does it get the exception?  Is it for the UP and DOWN nodes?
</I>&gt;<i> &gt;&gt; Ter
</I>&gt;<i> &gt;&gt; On Feb 20, 2007, at 2:50 AM, Alexander G?ngel wrote:
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;     
</I>&gt;<i> &gt;&gt;&gt; Can Somebody give me a hint how to use DoubleLinkTrees.
</I>&gt;<i> &gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt; I tried it this way:
</I>&gt;<i> &gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt; I have
</I>&gt;<i> &gt;&gt;&gt; ASTLabelType=MyAst; in my V3 Grammar
</I>&gt;<i> &gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt; I created a Class MyAst extends DoubleLinkTree
</I>&gt;<i> &gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt; I Implemented the Abstract functions from BaseTree like in CommonTree
</I>&gt;<i> &gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt; but when I try to use the Grammar I get Exception in thread &quot;main&quot;
</I>&gt;<i> &gt;&gt;&gt; java.lang.ClassCastException: org.antlr.runtime.tree.CommonTree
</I>
-- 
<A HREF="http://david.holroyd.me.uk/">http://david.holroyd.me.uk/</A>
</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="019534.html">[antlr-interest] DoubleLinkedTree
</A></li>
	<LI>Next message: <A HREF="019554.html">[antlr-interest] DoubleLinkedTree
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19538">[ date ]</a>
              <a href="thread.html#19538">[ thread ]</a>
              <a href="subject.html#19538">[ subject ]</a>
              <a href="author.html#19538">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.antlr.org/mailman/listinfo/antlr-interest">More information about the antlr-interest
mailing list</a><br>
</body></html>
