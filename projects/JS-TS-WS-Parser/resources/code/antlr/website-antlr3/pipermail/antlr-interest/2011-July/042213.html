<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [antlr-interest] Deciphering the TreeWalker error message ...
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20Deciphering%20the%20TreeWalker%20error%20message%20...&In-Reply-To=%3C4E292AE4.9080402%40oracle.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="042197.html">
   <LINK REL="Next"  HREF="042183.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[antlr-interest] Deciphering the TreeWalker error message ...</H1>
    <B>srinivasan karthikeyan pitchai</B> 
    <A HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20Deciphering%20the%20TreeWalker%20error%20message%20...&In-Reply-To=%3C4E292AE4.9080402%40oracle.com%3E"
       TITLE="[antlr-interest] Deciphering the TreeWalker error message ...">srinivasan.karthikeyan.pitchai at oracle.com
       </A><BR>
    <I>Fri Jul 22 00:46:44 PDT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="042197.html">[antlr-interest] Deciphering the TreeWalker error message ...
</A></li>
        <LI>Next message: <A HREF="042183.html">[antlr-interest] Deciphering the TreeWalker error message ...
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#42213">[ date ]</a>
              <a href="thread.html#42213">[ thread ]</a>
              <a href="subject.html#42213">[ subject ]</a>
              <a href="author.html#42213">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Folks,
I take on board the unanimous input that the tree grammar rule should 
start with TOKEN.

However what keeps me puzzled is that, inspite of having all my rules 
intact and just slightly rejigging my alternatives make the tree grammar 
parse the input tree perfectly fine.  I am able to parse huge SQL of 
about 160 lines with many many expressions fine!

Also  wouldn't the following expression

^(^(SUB_EXPR A) B)

simply mean that we have a simple list of subtree followed by a node B 
that is rooted at a nil node?

I was under the impression that the above syntax is valid as

1.  There is a mention of tree simulation  like
^( nil ^(VARDEF int i) ^(VARDEF int j) )

in page 167/372  in the chapter &quot;Proper AST Structure&quot; in Definitive 
ANTLR Reference.

2. ANTLR doesn't report any error while compiling.

3. The grammar works for most test cases involving expression.

Thanks,
Vasan



On 7/21/2011 10:06 PM, Kevin J. Cummings wrote:
&gt;<i> On 07/21/2011 02:48 AM, Gary Miller wrote:
</I>&gt;&gt;<i> 3.
</I>&gt;&gt;<i> rule :
</I>&gt;&gt;<i>    ^(subrule otherrule)
</I>&gt;&gt;<i> ;
</I>&gt;&gt;<i> Just looks wrong.
</I>&gt;<i> I am under the impression that a treewalker rule should be rooted in a
</I>&gt;<i> TOKEN, not a subtree.  The few treewalker grammars I have written always
</I>&gt;<i> have rules that look like ^(TOKEN some other rules or TOKENS)
</I>&gt;<i> If a subrule reference is not allowed to be the root of the tree being
</I>&gt;<i> parsed, I would have thought that ANTLR would have issued an error when
</I>&gt;<i> the tree grammar was run through ANTLR....
</I>&gt;<i>
</I>&gt;<i> I could be wrong with my assumption here, but I have never gotten into
</I>&gt;<i> trouble by assuming it (so far).
</I>&gt;<i>
</I>&gt;<i> Often this involves me collapsing my treewalker rules together.  For
</I>&gt;<i> example, if I have 12 parse rules to accurately describe precidence in
</I>&gt;<i> an expression, my treegrammar might have 12 alternations, one for each
</I>&gt;<i> possibly different rooted TOKEN when walking them.  This makes my
</I>&gt;<i> treegrammars (much) smaller than my parser grammars.
</I>&gt;<i>
</I>&gt;&gt;<i> If you inline (expand) out what you have written you would get
</I>&gt;&gt;<i> compoundExpression
</I>&gt;&gt;<i> : ^((SUB_EXPR ^(PAREN_SCLAR_EXPRESSION sclarExpression+) conversion_clause )
</I>&gt;&gt;<i> ;
</I>&gt;&gt;<i> The ^(( is impossible
</I>&gt;&gt;<i> Make all you start tree look like ^(TOKEN ...)
</I>&gt;&gt;<i> ^(sign sse=sclarSubExpression) therefore also look wrong.
</I>&gt;<i> Yes, treegrammar rules can refer to other rules, but the rooted
</I>&gt;<i> expressions: ^() should be rooted with TOKENs.
</I>&gt;<i>
</I></PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="042197.html">[antlr-interest] Deciphering the TreeWalker error message ...
</A></li>
	<LI>Next message: <A HREF="042183.html">[antlr-interest] Deciphering the TreeWalker error message ...
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#42213">[ date ]</a>
              <a href="thread.html#42213">[ thread ]</a>
              <a href="subject.html#42213">[ subject ]</a>
              <a href="author.html#42213">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.antlr.org/mailman/listinfo/antlr-interest">More information about the antlr-interest
mailing list</a><br>
</body></html>
