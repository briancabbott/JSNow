From antlr at klaashofstra.com  Thu Sep  1 06:43:10 2005
From: antlr at klaashofstra.com (Klaas Hofstra)
Date: Thu Sep  1 06:42:19 2005
Subject: [antlr-interest] nondeterminism question
Message-ID: <200509011543.10878.antlr@klaashofstra.com>

Hi,

I encountered a nondeterminism warning but when I look at my grammar I don't 
see the reason.

When I check the generated code I see exactly what I expect. However, I must 
be missing something because I get this warning:

warning:nondeterminism between alts 1 and 2 of block upon
     k==1:LPAREN

The warning point to the "integer" line in this rule:

typeDef
    : "signed"
    | "unsigned"
    | "float"
    | ("integer" ( LPAREN! range RPAREN! )? )      <= warning on this line
    ;

Selected parts of the rest of the grammar are shown below:

-----------------------------------

range 
    : expression DOTDOT! expression
    ;

expression
/* 
 standard (C like) expression grammar with an added bitIndex and 
 bitSlice operator as shown below
*/


postFixExpression
    : (primaryExpression | (LPAREN! expression RPAREN!)) (
      (bitIndexExpression) => bitIndexExpression
    | bitSliceExpression 
    | arrayIndexExpression
     )?
    ;

arrayIndexExpression
    : LBRACKET! logicalExpression RBRACKET!
    ;

bitIndexExpression
    : LPAREN! logicalExpression RPAREN!
    ;

bitSliceExpression
    : LPAREN! logicalExpression DOTDOT! logicalExpression RPAREN!
    ;


-----------------------------------

I hope someone can explain to me why I get this warning so I can fix my 
grammar.

Thanks in advance,

Klaas
From antlr at shmuelhome.mine.nu  Thu Sep  1 06:57:20 2005
From: antlr at shmuelhome.mine.nu (shmuel siegel)
Date: Thu Sep  1 06:59:13 2005
Subject: [antlr-interest] nondeterminism question
In-Reply-To: <200509011543.10878.antlr@klaashofstra.com>
References: <200509011543.10878.antlr@klaashofstra.com>
Message-ID: <431708C0.3090209@shmuelhome.mine.nu>

Klaas Hofstra wrote:

>Hi,
>
>I encountered a nondeterminism warning but when I look at my grammar I don't 
>see the reason.
>
>When I check the generated code I see exactly what I expect. However, I must 
>be missing something because I get this warning:
>
>warning:nondeterminism between alts 1 and 2 of block upon
>     k==1:LPAREN
>
>The warning point to the "integer" line in this rule:
>
>typeDef
>    : "signed"
>    | "unsigned"
>    | "float"
>    | ("integer" ( LPAREN! range RPAREN! )? )      <= warning on this line
>    ;
>
>Selected parts of the rest of the grammar are shown below:
>
>-----------------------------------
>
>range 
>    : expression DOTDOT! expression
>    ;
>
>expression
>/* 
> standard (C like) expression grammar with an added bitIndex and 
> bitSlice operator as shown below
>*/
>
>
>postFixExpression
>    : (primaryExpression | (LPAREN! expression RPAREN!)) (
>      (bitIndexExpression) => bitIndexExpression
>    | bitSliceExpression 
>    | arrayIndexExpression
>     )?
>    ;
>
>arrayIndexExpression
>    : LBRACKET! logicalExpression RBRACKET!
>    ;
>
>bitIndexExpression
>    : LPAREN! logicalExpression RPAREN!
>    ;
>
>bitSliceExpression
>    : LPAREN! logicalExpression DOTDOT! logicalExpression RPAREN!
>    ;
>
>
>-----------------------------------
>
>I hope someone can explain to me why I get this warning so I can fix my 
>grammar.
>
>Thanks in advance,
>
>Klaas
>
>  
>
I am guessing at the structure of expression but it seems to me that 
range, and therefore the line in question, can't distinguish between a 
grouped expression and a bitSpliceExpression. Does changing k, the 
lookahead, value help.


-- 
No virus found in this outgoing message.
Checked by AVG Anti-Virus.
Version: 7.0.344 / Virus Database: 267.10.18/86 - Release Date: 8/31/2005

From antlr at klaashofstra.com  Thu Sep  1 09:08:12 2005
From: antlr at klaashofstra.com (Klaas Hofstra)
Date: Thu Sep  1 09:07:12 2005
Subject: [antlr-interest] nondeterminism question
In-Reply-To: <431708C0.3090209@shmuelhome.mine.nu>
References: <200509011543.10878.antlr@klaashofstra.com>
	<431708C0.3090209@shmuelhome.mine.nu>
Message-ID: <200509011808.12255.antlr@klaashofstra.com>

Shmuel,

Thanks for your reply!

>I am guessing at the structure of expression
I added the complete expression grammar below.
>[..] but it seems to me that  
>range, and therefore the line in question, can't distinguish between a 
>grouped expression and a bitSpliceExpression. Does changing k, the 
>lookahead, value help.

When you say 'grouped expression', do you mean 'LPAREN expression RPAREN' ?

Because bitSliceExpression can only follow a 'primaryExpression' or 'LPAREN 
expression RPAREN!' I thought it could be distinguised from a grouped 
expression. Am I missing something?

I changed k to 3. This resulted in the following warning at the same line as 
before:

warning:nondeterminism between alts 1 and 2 of block upon
  k==1:LPAREN
  k==2:ID,LPAREN,INT,REAL,PLUS,MINUS,"not","cast"
  k==3:ID,LT,GT,LPAREN,LBRACKET,INT,REAL,"signed","unsigned","float",
            "integer","enum",DOTDOT,"and","or","nand","nor","xor","xnor",
            EQUALS,NOT_EQUALS,GTE,LTE,"sll","srl","sla","sra","rol","ror",
            PLUS,MINUS,TIMES,DIV,"mod","not","cast"

Looking at the above warning, I guess there is a problem with the expressions 
in 'range' but I don't get why.

Anyone?

TIA,

Klaas
-----------------------------------

typeDef
? ? : "signed"
? ? | "unsigned"
? ? | "float"
? ? | ("integer" ( LPAREN! range RPAREN! )? ) ? ? ?<= warning on this line
? ? ;

range 
? ? : expression DOTDOT! expression
? ? ;

expression
    : logicalExpression
    ;

logicalExpression
    : relationalExpression ((AND^ | OR^ | NAND^ | NOR^ | XOR^ | XNOR^) 
relationalExpression)*
    ;

relationalExpression
    : shiftExpression ((EQUALS^ | NOT_EQUALS^ | GT^ | GTE^ | LT^ | LTE^) 
shiftExpression)*
    ;

shiftExpression
    : addExpression ((SLL^ | SRL^ | SLA^ | SRA^ | ROL^ | ROR^) addExpression)*
    ;

addExpression
    : mulExpression ((PLUS^ | MINUS^) mulExpression)*
    ;

mulExpression
    : unaryExpression ((TIMES^ | DIV^ | MOD^) unaryExpression)*
    ;

unaryExpression
    : postFixExpression
    | PLUS^ unaryExpression
    | MINUS^ unaryExpression
    | NOT^ unaryExpression
    | "cast"! (typeSpec | ID) unaryExpression
    ;

postFixExpression
    : (primaryExpression | (LPAREN! expression RPAREN!)) (
      (bitIndexExpression) => bitIndexExpression
    | bitSliceExpression 
    | arrayIndexExpression
     )?
    ;

arrayIndexExpression
    : LBRACKET! logicalExpression RBRACKET!
    ;

bitIndexExpression
    : LPAREN! logicalExpression RPAREN!
    ;

bitSliceExpression
    : LPAREN! logicalExpression DOTDOT! logicalExpression RPAREN!
    ;

primaryExpression
    : ID | INT | REAL 
    ;

-----------------------------------
From lucianaleal2002 at yahoo.com.br  Thu Sep  1 12:06:51 2005
From: lucianaleal2002 at yahoo.com.br (Luciana Nunes Leal)
Date: Thu Sep  1 12:06:54 2005
Subject: [antlr-interest] How can I generate output with ANTLR?
Message-ID: <20050901190651.53370.qmail@web33302.mail.mud.yahoo.com>

Skipped content of type multipart/alternative-------------- next part --------------
class LNCParser extends Parser;

options {
        k=10; // needed for newline junk
	buildAST=true;
}

tokens {
	// -- LNC Keyword tokens --
        IF = "if";
        IF_NOT = "if not";
        ELSE = "else";
        FOR_EACH = "for each";
        FOR_ALL = "for all";
        WHEN = "when";
        AND = "and";
        OR = "or";
        EQUAL = "equal";
        NOT_EQUAL = "not equal to";
        EQUAL_OR_GREATER_THAN = "equal or greater than";
        GREATER_THAN          = "greater than";
        EQUAL_OR_LOWER_THAN   = "equal or lower than";
        LOWER_THAN            = "lower than";
        IS = "is";
        ARE = "are";
        TO = "to";
        NOT = "not";
        THAN = "than";
}

if_not : IF NOT;

equal : EQUAL TO ;

not_equal : NOT EQUAL TO;

equal_or_greater_than : EQUAL OR GREATER THAN;

greater_than : GREATER THAN;

equal_or_lower_than : EQUAL OR LOWER THAN;

lower_than : LOWER THAN;

rule : (sentence DOT)+ NEWLINE;

sentence : ( (when {System.out.println("when");} COMMA statement ((COMMA | AND) statement)* )
          | (for_clause COMMA statement ((COMMA | AND) statement)*)
          | (if_clause COMMA statement ((COMMA | AND) statement)*)
          | (if_not_clause statement ((COMMA | AND) statement)*)
          )
          ;

when : WHEN condicao 
      ;

condicao : alpha_numeric verb ( (equal | not_equal | equal_or_greater_than | greater_than | equal_or_lower_than | lower_than) {System.out.println("==");} ) alpha_numeric
          ;

verb : IS | ARE
      ;

alpha_numeric : CHARACTER (DIGIT | CHARACTER)*
               ;

for_clause: (FOR_EACH | FOR_ALL) collection
     ;

collection: alpha_numeric
            ;

if_clause: IF condicao
    ;

if_not_clause: ELSE
        ;

statement: alpha_numeric
           ;

class LNCLexer extends Lexer;

options {
        k=10; // needed for newline junk
        charVocabulary='\u0000'..'\u007F'; // allow ascii
}

CHARACTER             : ('a'..'z'|'A'..'Z')+;
COMMA                 : ',';
DOT                   : ".";
DIGIT                 : ('0'..'9');
WS                    : ( ' ' | '\t')
                        {$setType(Token.SKIP);} ;
NEWLINE               : ("\r\n") | ("\n") | ("\r") 
                 ;


From canfield at computer.org  Thu Sep  1 12:51:05 2005
From: canfield at computer.org (Bill Canfield)
Date: Thu Sep  1 12:43:46 2005
Subject: [antlr-interest] Re: nondeterminism question
In-Reply-To: <20050901190004.8D98EDCC63@www.antlr.org>
References: <20050901190004.8D98EDCC63@www.antlr.org>
Message-ID: <43175BA9.2030006@computer.org>

Hi Klaas:

I haven't looked at your grammar in detail, but be aware that ANTLR uses 
"linear approximate" lookahead.  In a nutshell, you might have an 
unambiguous grammar that looks ambiguous to ANTLR because it took a 
shortcut in calculating the rule.  Higher values of k tend to produce 
more of these false ambiguities.

Here's a note on it in the ANTLR docs:

http://www.antlr.org/doc/options.html#_bb4

When I've had a situation like this, I just factor the rule until I get 
ANTLR to behave :-).

Bill

Klaas Hofstra wrote:

> When you say 'grouped expression', do you mean 'LPAREN expression RPAREN' ?
> 
> Because bitSliceExpression can only follow a 'primaryExpression' or 'LPAREN 
> expression RPAREN!' I thought it could be distinguised from a grouped 
> expression. Am I missing something?
> 
> I changed k to 3. This resulted in the following warning at the same line as 
> before:
> 
> warning:nondeterminism between alts 1 and 2 of block upon
>   k==1:LPAREN
>   k==2:ID,LPAREN,INT,REAL,PLUS,MINUS,"not","cast"
>   k==3:ID,LT,GT,LPAREN,LBRACKET,INT,REAL,"signed","unsigned","float",
>             "integer","enum",DOTDOT,"and","or","nand","nor","xor","xnor",
>             EQUALS,NOT_EQUALS,GTE,LTE,"sll","srl","sla","sra","rol","ror",
>             PLUS,MINUS,TIMES,DIV,"mod","not","cast"
> 
> Looking at the above warning, I guess there is a problem with the expressions 
> in 'range' but I don't get why.
> 
> Anyone?
> 

From ersin_er at yahoo.com  Fri Sep  2 01:15:33 2005
From: ersin_er at yahoo.com (Ersin Er)
Date: Fri Sep  2 01:15:37 2005
Subject: [antlr-interest] Nondeterminism problem again
Message-ID: <20050902081533.91829.qmail@web60918.mail.yahoo.com>

Hi,

I get a nondeterminism warning for the following grammar:

Parser:
...
( (SP)* ss_base )?
( SEP (SP)* ss_specificExclusions  )?
...

Lexer:

SP: ' ';
SEP: ',';

The warning message is: 

156:27: warning:nondeterminism between alts 1 and 2 of block upon
...
:156:27:     k==1:SP
:156:27:     k==2:SP
:156:27:     k==3:SP
...
and line 156 corresponds to line containing "( (SP)* ss_base )?".

When I remove line "157", it does not complain.

How does it cause a nondeterminism and how can I solve it?

Thanks in advance.

-- Ersin

__________________________________________________
Do You Yahoo!?
Tired of spam?  Yahoo! Mail has the best spam protection around 
http://mail.yahoo.com 
From antlr at klaashofstra.com  Fri Sep  2 06:31:35 2005
From: antlr at klaashofstra.com (Klaas Hofstra)
Date: Fri Sep  2 06:30:36 2005
Subject: [antlr-interest] Re: nondeterminism question
In-Reply-To: <43175BA9.2030006@computer.org>
References: <20050901190004.8D98EDCC63@www.antlr.org>
	<43175BA9.2030006@computer.org>
Message-ID: <200509021531.36070.antlr@klaashofstra.com>

On Thursday 01 September 2005 21:51, Bill Canfield wrote:
> Hi Klaas:
>
> I haven't looked at your grammar in detail, but be aware that ANTLR uses
> "linear approximate" lookahead.  In a nutshell, you might have an
> unambiguous grammar that looks ambiguous to ANTLR because it took a
> shortcut in calculating the rule.  Higher values of k tend to produce
> more of these false ambiguities.
>
> Here's a note on it in the ANTLR docs:
>
> http://www.antlr.org/doc/options.html#_bb4
>
> When I've had a situation like this, I just factor the rule until I get
> ANTLR to behave :-).
>
> Bill

Bill, thanks for your answer. 

In order to check whether I had a problem with "linear approximate" lookahead, 
I first simplified the typeSpec by replacing 'range' by 'INT DOTDOT INT'. 
(this does not get rid of the warning about LPAREN).

typeDef
? ? : "signed"
? ? | "unsigned"
? ? | "float"
? ? | ("integer" ( LPAREN! INT DOTDOT! INT RPAREN! )? ) ? ? ?<= warning
? ? ;

I found that I don't get a warning when I remove typeSpec from the 'cast' line 
in unarayExpression (which renders grammar unusable) 

unaryExpression
? ? : postFixExpression
? ? | PLUS^ unaryExpression
? ? | MINUS^ unaryExpression
? ? | NOT^ unaryExpression
? ? | "cast"! (typeSpec | ID) unaryExpression
? ? ;

I don't understand why this solves the LPAREN warning. Below I posted the 
generated code (Python) for unaryExpression in edited form. 

For the cast branch the choice between 'typeSpec' and 'ID' is also 
unambiguous, so why does removing typeSpec help?

Are there tools that can help me find the problem in the grammar?

Cheers,
Klaas

------------------------------------------------

def unaryExpression(self): 
    la1 = self.LA(1)
    if la1 and la1 in [ID,LPAREN,INT,REAL,STRING]:
        self.postFixExpression()
    elif la1 and la1 in [PLUS]:
        self.match(PLUS)
        self.unaryExpression()
    elif la1 and la1 in [MINUS]:
        self.match(MINUS)
        self.unaryExpression()
    elif la1 and la1 in [NOT]:
        self.match(NOT)
        self.unaryExpression()
    elif la1 and la1 in [LITERAL_cast]:
        self.match(LITERAL_cast)
        la1 = self.LA(1)
        if la1 and la1 in [LITERAL_signed, LITERAL_unsigned, LITERAL_real, 
LITERAL_integer, LITERAL_enum]:
            self.typeSpec()
        elif la1 and la1 in [ID]:
            self.match(ID)
            
        self.unaryExpression()

------------------------------------------------
From loic.lefevre at bnpparibas.com  Fri Sep  2 06:58:42 2005
From: loic.lefevre at bnpparibas.com (loic.lefevre@bnpparibas.com)
Date: Fri Sep  2 06:58:50 2005
Subject: [antlr-interest] Questions about Syntax Diagram Generator 2 Build
	1.5
Message-ID: <OFDE4F354B.B2697FE4-ONC1257070.004BD6A6-C1257070.004CC956@bnpparibas.com>

Hello,
Do you know if a newer version of this tool is available?

And if I have some feedbacks, who can I contact?

Thanks in advance,
Lo?c



This message and any attachments (the "message") is
intended solely for the addressees and is confidential. 
If you receive this message in error, please delete it and 
immediately notify the sender. Any use not in accord with 
its purpose, any dissemination or disclosure, either whole 
or partial, is prohibited except formal approval. The internet
can not guarantee the integrity of this message. 
BNP PARIBAS (and its subsidiaries) shall (will) not 
therefore be liable for the message if modified. 

                ---------------------------------------------

Ce message et toutes les pieces jointes (ci-apres le 
"message") sont etablis a l'intention exclusive de ses 
destinataires et sont confidentiels. Si vous recevez ce 
message par erreur, merci de le detruire et d'en avertir 
immediatement l'expediteur. Toute utilisation de ce 
message non conforme a sa destination, toute diffusion 
ou toute publication, totale ou partielle, est interdite, sauf 
autorisation expresse. L'internet ne permettant pas 
d'assurer l'integrite de ce message, BNP PARIBAS (et ses
filiales) decline(nt) toute responsabilite au titre de ce 
message, dans l'hypothese ou il aurait ete modifie.
From Kurt.E.McCall at nasa.gov  Fri Sep  2 08:45:29 2005
From: Kurt.E.McCall at nasa.gov (McCall, Kurt)
Date: Fri Sep  2 08:45:35 2005
Subject: [antlr-interest] Installation: configure and ORACLE
Message-ID: <EAFC0B8AFC4E3B42934CECA5232E45DD027C0FF1@msecho2.msfc.nasa.gov>

Hi,

A coworker of mine is attempting to install ANTLR on a Cygwin platform.
"configure" terminates with this error message:

configure: creating ./config.status
config.status: creating W
config.status: error: cannot find input file: \WIN\ORAWIN\ORACLE.INI

Why does ANTLR require Oracle?  Can the search for Oracle be disabled?

Thanks,
Kurt

-------------------------------------
Kurt McCall
Modeling and Simulation Branch / EV43
NASA MSFC
(256) 961-4501

What's the difference between a Bad Golfer and a Bad Skydiver?
A Bad Golfer goes, Whack, Dang!
A Bad Skydiver goes Dang! Whack




-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20050902/23caf3cb/attachment.html
From omuyelijah at yahoo.com  Sat Sep  3 04:23:39 2005
From: omuyelijah at yahoo.com (OMUYE ELIJAH)
Date: Sat Sep  3 04:23:42 2005
Subject: [antlr-interest] CANT RUN ANTLR ON MY SYSTEM
Message-ID: <20050903112339.15662.qmail@web51608.mail.yahoo.com>

I have somewhat successfully installed antlr-2.7.5 on my system but find it difficult 2 run the simple parsing data program described by Terence Parr.
After compiling the file T.g using (all output files are in the myantlrp folder in the root of c:)
 
java antlr.Tool -o C:\myantlrp C:\myantlrp\T.g
 
and further compiling with (at d command prompt)
 
javac C:\myantlrp\*.java
 
and running d Main class resulting 4rm it, the display at the comand prompt is
 
Exception in thread "main" java.lang.NoclassDefFound : Main
 
Can anyone help me with resolving this problem?


EZAGA ELIJAH OMUYE.

		
---------------------------------
 Start your day with Yahoo! - make it your home page 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20050903/1b029fd8/attachment.html
From ewbank at gmail.com  Sat Sep  3 05:50:13 2005
From: ewbank at gmail.com (Bryan Ewbank)
Date: Sat Sep  3 05:50:17 2005
Subject: [antlr-interest] How can I generate output with ANTLR?
In-Reply-To: <20050901190651.53370.qmail@web33302.mail.mud.yahoo.com>
References: <20050901190651.53370.qmail@web33302.mail.mud.yahoo.com>
Message-ID: <dd3a065f05090305507f547bbc@mail.gmail.com>

Luciana asked:
> I would like to know how can I generate output. For example: if anyone 
> writes "a is equal to b", I would like to generate "a == b". 

It looks like you are very close;  you have "is equal to" generate
"==".  If everything is this direct, then you can simply have the
identifiers generate their names and you're done.

I think you should just keep doing what you are doing - perhaps start
with a simpler grammar that just recognizes "a equals b" (and nothing
else), the better to understand ANTLR in isolation from your problem.

Once you are able to process "a equals b", you can start to focus on
the problem (language recognition), rather than the tools you will be
using (ANTLR).

Remember that ANTLR just provides a framework for parsing a language,
for walking and manipulating parse trees, and for performing
user-specied actions when particular patterns (sequences, for parsing;
tree shapes, for tree parsers). are detected.  It is up to you to
figure out what actions are needed.

In your case, it sounds like it's "generate the equivalent java" - and
your grammar already has some of that in it.
From ric.klaren at gmail.com  Sat Sep  3 05:59:56 2005
From: ric.klaren at gmail.com (Ric Klaren)
Date: Sat Sep  3 05:57:50 2005
Subject: [antlr-interest] Installation: configure and ORACLE
In-Reply-To: <EAFC0B8AFC4E3B42934CECA5232E45DD027C0FF1@msecho2.msfc.nasa.gov>
References: <EAFC0B8AFC4E3B42934CECA5232E45DD027C0FF1@msecho2.msfc.nasa.gov>
Message-ID: <43199E4C.2010209@gmail.com>

McCall, Kurt wrote:
> A coworker of mine is attempting to install ANTLR on a Cygwin platform.
> "configure" terminates with this error message:
> 
> configure: creating ./config.status
> config.status: creating W
> config.status: error: cannot find input file: \WIN\ORAWIN\ORACLE.INI
> 
> Why does ANTLR require Oracle?  Can the search for Oracle be disabled?

This must be something bleeding in from the environment where it's
installed. There's no oracle references in the antlr. I could expect a
problem with quoting in the configure script but with just this
information I can't tell. I run configure regularly on a recent-ish
Mingw install without trouble.

Cheers,

Ric
From parrt at cs.usfca.edu  Sat Sep  3 14:34:06 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Sat Sep  3 14:34:10 2005
Subject: [antlr-interest] CANT RUN ANTLR ON MY SYSTEM
In-Reply-To: <20050903112339.15662.qmail@web51608.mail.yahoo.com>
References: <20050903112339.15662.qmail@web51608.mail.yahoo.com>
Message-ID: <4A28072E-3BD6-4241-AECE-0445BD5AB024@cs.usfca.edu>

Hi, what you have is a Java usage issue.  You most likely need to  
learn about the CLASSPATH.  It's a strange system for Java.  My  
course notes will help:

http://www.cs.usfca.edu/~parrt/course/601/lectures/java.tools.html

Terence

On Sep 3, 2005, at 4:23 AM, OMUYE ELIJAH wrote:

> I have somewhat successfully installed antlr-2.7.5 on my system but  
> find it difficult 2 run the simple parsing data program described  
> by Terence Parr.
> After compiling the file T.g using (all output files are in the  
> myantlrp folder in the root of c:)
>
> java antlr.Tool -o C:\myantlrp C:\myantlrp\T.g
>
> and further compiling with (at d command prompt)
>
> javac C:\myantlrp\*.java
>
> and running d Main class resulting 4rm it, the display at the  
> comand prompt is
>
> Exception in thread "main" java.lang.NoclassDefFound : Main
>
> Can anyone help me with resolving this problem?
>
>
> EZAGA ELIJAH OMUYE.
>
> Start your day with Yahoo! - make it your home page

--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com

From point14 at magma.ca  Sun Sep  4 10:18:40 2005
From: point14 at magma.ca (Martin d Anjou)
Date: Sun Sep  4 10:17:12 2005
Subject: [antlr-interest] c++ error reporting in 2.7.5
Message-ID: <Pine.LNX.4.63.0509041252180.9367@ordimartin.mda.zapto.org>

Hi,

Can someone point me to a complete C++ example of how to do proper error 
reporting in antlr 2.7.5? Idealy, I need something that reports the rule 
during which the exception occured, the actual token, the expected token, 
the line number and the line of code being parsed.

Do I need to add a catch in each rule or can I do something more global?

I make it sound like I'm lazy... I'm actually working on it, but I just 
thought I'd ask...

Thanks,
Martin

From jr.williams at tiscali.co.uk  Sun Sep  4 10:27:32 2005
From: jr.williams at tiscali.co.uk (John Williams)
Date: Sun Sep  4 10:24:13 2005
Subject: [antlr-interest] Problem linking C++ generated parser
Message-ID: <431B2E84.4010607@tiscali.co.uk>

I have a requirement to build a parser in both Java and C++ under 
Windows and Linux and Antlr 2.7.5 seems to be the answer. My first 
attempts have been in Windows 2000, the generated Java is fine. My 
problem is the generated C++ source files. Compilation is fine but 
linking is the problem. I have tried cygwin, mingw and Visual C++ (V6) 
but all cases I am encountering linker problems. Am I right in assuming 
the ".a" file should be used in cygwin and the .lib in VC? To save 
wasting time posting the error messages, is there a known problem with 
linking Antlr generated C++ files?

Thanks for any help you can give.

John
From sohail at taggedtype.net  Sun Sep  4 13:54:32 2005
From: sohail at taggedtype.net (Sohail Somani)
Date: Sun Sep  4 13:54:39 2005
Subject: [antlr-interest] Problem linking C++ generated parser
In-Reply-To: <431B2E84.4010607@tiscali.co.uk>
References: <431B2E84.4010607@tiscali.co.uk>
Message-ID: <1125867272.15010.4.camel@localhost.localdomain>

On Sun, 2005-04-09 at 18:27 +0100, John Williams wrote:
> I have a requirement to build a parser in both Java and C++ under 
> Windows and Linux and Antlr 2.7.5 seems to be the answer. My first 
> attempts have been in Windows 2000, the generated Java is fine. My 
> problem is the generated C++ source files. Compilation is fine but 
> linking is the problem. I have tried cygwin, mingw and Visual C++ (V6) 
> but all cases I am encountering linker problems. Am I right in assuming 
> the ".a" file should be used in cygwin and the .lib in VC? To save 
> wasting time posting the error messages, is there a known problem with 
> linking Antlr generated C++ files?

Why not post the linking error? I'm sure its something quite simple.

From jr.williams at tiscali.co.uk  Sun Sep  4 15:58:56 2005
From: jr.williams at tiscali.co.uk (John Williams)
Date: Sun Sep  4 15:55:37 2005
Subject: [antlr-interest] Problem linking C++ generated parser
Message-ID: <431B7C30.7080801@tiscali.co.uk>

I have a requirement to build a parser in both Java and C++ under 
Windows and Linux and Antlr 2.7.5 seems to be the answer. My first 
attempts have been in Windows 2000, the generated Java is fine. My 
problem is the generated C++ source files. Compilation is fine but 
linking is the problem. I have tried cygwin, mingw and Visual C++ (V6) 
but all cases I am encountering linker problems. It was suggested by 
Sohail Somani in replying to my first post that I include the errors.

Below are the commands I used with cygwin in attempting to compile/link 
the C++ generated by antlr. The source grammar was the "calc" example 
supplied with antlr.

antlr calc.g
g++ -c *.cpp
g++ -o calc.exe Main.o CalcLexer.o CalcParser.o CalcTreeWalker.o -lantlr 
-lstdc++

The linking produced many "undefined" errors, to many to include here so 
I've abstracted a few of them.

undefined reference to `std::basic_string<char, std::char_traits<char>, 
std::allocator<char> >::_S_empty_rep_storage'
undefined reference to `std::__default_alloc_template<true, 
0>::allocate(unsigned int)'
undefined reference to `std::__default_alloc_template<true, 
0>::deallocate(void*, unsigned int)'
undefined reference to `std::__default_alloc_template<true, 
0>::allocate(unsigned int)'
undefined reference to `std::__default_alloc_template<true, 
0>::deallocate(void*, unsigned int)'
undefined reference to `std::basic_string<char, std::char_traits<char>, 
std::allocator<char> >::_S_empty_rep_storage'
undefined reference to `std::__default_alloc_template<true, 
0>::deallocate(void*, unsigned int)'
undefined reference to `std::__default_alloc_template<true, 
0>::allocate(unsigned int)'
undefined reference to `std::__default_alloc_template<true, 
0>::deallocate(void*, unsigned int)'
undefined reference to `std::basic_string<char, std::char_traits<char>, 
std::allocator<char> >::_S_empty_rep_storage'
undefined reference to `std::__default_alloc_template<true, 
0>::deallocate(void*, unsigned int)'
undefined reference to `std::basic_string<char, std::char_traits<char>, 
std::allocator<char> >::_S_empty_rep_storage'
undefined reference to `std::__default_alloc_template<true, 
0>::allocate(unsigned int)'
undefined reference to `std::__default_alloc_template<true, 
0>::deallocate(void*, unsigned int)'

They were generated by object modules in 
"/usr/lib/gcc/i686-pc-cygwin/3.4.4/../../../libantlr.a". Can anyone 
suggest what I am doing wrong?

Thanks for any help

John
From Ayende at ayende.com  Sun Sep  4 16:56:18 2005
From: Ayende at ayende.com (Ayende Rahien)
Date: Sun Sep  4 15:56:06 2005
Subject: [antlr-interest] Beginner problem
Message-ID: <20050904225604.858B0DCC9A@www.antlr.org>

First, I?m a complete beginner in both antlr and parsing.

Second, I want to build a pre processor that would recognize the following:

 

Code block: anything inside a <% %>

Text block: anything else.

 

The idea is to transform the input to so the <% %> would be gone and the
text would be properly set in:

output ?text? 

 

My (na?ve) start is:

 

CODE_BLOCK

            :           CODE_START TEXT_BLOCK CODE_END

            ;

            

CODE_START

            :           "<%"

            ;

 

CODE_END

            :           "%>"

            ;

 

TEXT_BLOCK

            :           ~("<%")

            ;

 

This fails, but I?m not sure how I can fix this. I read some of the
documentation on the site, and I?m afraid I can?t see a solution.

(I know that it?s very easy to do this with custom code, but the idea is
that the moment I?ve code block and text blocks, I can start transforming
them by more complex rules.)

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20050905/23e46c1b/attachment.html
From ric.klaren at gmail.com  Sun Sep  4 16:32:59 2005
From: ric.klaren at gmail.com (Ric Klaren)
Date: Sun Sep  4 16:30:59 2005
Subject: [antlr-interest] Problem linking C++ generated parser
In-Reply-To: <431B7C30.7080801@tiscali.co.uk>
References: <431B7C30.7080801@tiscali.co.uk>
Message-ID: <431B842B.3000308@gmail.com>

John Williams wrote:
> I have a requirement to build a parser in both Java and C++ under
> Windows and Linux and Antlr 2.7.5 seems to be the answer. My first
> attempts have been in Windows 2000, the generated Java is fine. My
> problem is the generated C++ source files. Compilation is fine but
> linking is the problem. I have tried cygwin, mingw and Visual C++ (V6)
> but all cases I am encountering linker problems. It was suggested by
> Sohail Somani in replying to my first post that I include the errors.
> 
> Below are the commands I used with cygwin in attempting to compile/link
> the C++ generated by antlr. The source grammar was the "calc" example
> supplied with antlr.
> 
> antlr calc.g
> g++ -c *.cpp
> g++ -o calc.exe Main.o CalcLexer.o CalcParser.o CalcTreeWalker.o -lantlr
> -lstdc++

Make sure to build the libantlr.a and the examples with the same version
of g++, due to abi changes incompatabilities may arise. The -lstdc++
should not be necessary on a correctly installed gcc.

What version of Cygwin are you using? What steps did you do to install
antlr?

Cheers,

Ric
From darthia at gmail.com  Mon Sep  5 03:21:01 2005
From: darthia at gmail.com (=?ISO-8859-1?Q?Jos=E9_Mar=EDa_Garc=EDa_Rodr=EDguez?=)
Date: Mon Sep  5 03:21:04 2005
Subject: [antlr-interest] Beginner problem
In-Reply-To: <20050904225604.858B0DCC9A@www.antlr.org>
References: <20050904225604.858B0DCC9A@www.antlr.org>
Message-ID: <87ca5852050905032151053f3b@mail.gmail.com>

It seems that you are using a lexer to parse your code blocks. I think
the way to do what you want is to use a lexer that recognise your
tokens (i.e. "<%", "%>" and any other string) and then a parser where
you put the rules to separate the code blocks from text ones.

Please read the docs carefully, and feel free to ask if you have more
questions :)

Regards

-- 
Jos? Mar?a Garc?a Rodr?guez 


2005/9/5, Ayende Rahien <Ayende@ayende.com>:
>  
>  
> 
> First, I'm a complete beginner in both antlr and parsing. 
> 
> Second, I want to build a pre processor that would recognize the following: 
> 
>   
> 
> Code block: anything inside a <% %> 
> 
> Text block: anything else. 
> 
>   
> 
> The idea is to transform the input to so the <% %> would be gone and the
> text would be properly set in: 
> 
> output "text" 
> 
>   
> 
> My (na?ve) start is: 
> 
>   
> 
> CODE_BLOCK 
> 
>             :           CODE_START TEXT_BLOCK CODE_END 
> 
>             ; 
> 
>             
> 
> CODE_START 
> 
>             :           "<%" 
> 
>             ; 
> 
>   
> 
> CODE_END 
> 
>             :           "%>" 
> 
>             ; 
> 
>   
> 
> TEXT_BLOCK 
> 
>             :           ~("<%") 
> 
>             ; 
> 
>   
> 
> This fails, but I'm not sure how I can fix this. I read some of the
> documentation on the site, and I'm afraid I can't see a solution. 
> 
> (I know that it's very easy to do this with custom code, but the idea is
> that the moment I've code block and text blocks, I can start transforming
> them by more complex rules.)
From tommy.nordgren at chello.se  Mon Sep  5 05:57:47 2005
From: tommy.nordgren at chello.se (Tommy Nordgren)
Date: Mon Sep  5 05:57:53 2005
Subject: [antlr-interest] Writing an antlr code generator
Message-ID: <DE95CCE5-CE6F-4BCA-8FD8-817082EDBDA7@chello.se>

How do i implement an Antlr code generator to support a new language?


"Home is not where you are born, but where your heart finds peace" -
Tommy Nordgren, "The dying old crone"

From antlr at klaashofstra.com  Mon Sep  5 11:01:46 2005
From: antlr at klaashofstra.com (Klaas Hofstra)
Date: Mon Sep  5 11:00:40 2005
Subject: [antlr-interest] Re: nondeterminism question
In-Reply-To: <200509021531.36070.antlr@klaashofstra.com>
References: <20050901190004.8D98EDCC63@www.antlr.org>
	<43175BA9.2030006@computer.org>
	<200509021531.36070.antlr@klaashofstra.com>
Message-ID: <200509052001.46675.antlr@klaashofstra.com>

Hi all,

Just to let you all know, Bill pointed out the solution to my problem. By 
adding "options {greedy=true;}" to my typeDef rule as shown below, all was 
well again in parser land.

typeDef
 ? ? : "signed"
 ? ? | "unsigned"
 ? ? | "float"
 ? ? | ("integer" ( options {greedy=true;} : LPAREN! INT DOTDOT! INT 
RPAREN! )? ) ? ? 
 ? ? ;

These nondeterminism problems can be quite baffling for the novice antlr user. 
Wouldn't the wiki be a great place to educate users about the peculiarities 
of "linear approximate" lookahead? 

Cheers,

Klaas
From ric.klaren at gmail.com  Mon Sep  5 11:29:34 2005
From: ric.klaren at gmail.com (Ric Klaren)
Date: Mon Sep  5 11:27:30 2005
Subject: [antlr-interest] Writing an antlr code generator
In-Reply-To: <DE95CCE5-CE6F-4BCA-8FD8-817082EDBDA7@chello.se>
References: <DE95CCE5-CE6F-4BCA-8FD8-817082EDBDA7@chello.se>
Message-ID: <431C8E8E.70106@gmail.com>

Tommy Nordgren wrote:
> How do i implement an Antlr code generator to support a new language?

For antlr 2 it basically boils down to copying one of the
antlr/<target>Codegenerator.java files and the action lexer stuff in
antlr/actions/<target>/ depending on what language you have to also use
some other stuff maybe just check the other codegenerators for how
things got solved. Next to the codegenerator you'll probably need some
support library code as well. Most of the other backends use pretty
direct ports of the java support library.

For antlr3 there's templates you can copy/modify to generate code. No
docs for it though since it's still a moving target. Still need to
update the C codegen since the last few changes in the java target.

HTH,

Ric
From listmail at vivistar.com  Mon Sep  5 15:16:38 2005
From: listmail at vivistar.com (Jonathan Hess)
Date: Mon Sep  5 15:16:42 2005
Subject: [antlr-interest] configure and make vs .svn
Message-ID: <43238FB4-C5FF-482E-A825-E618BE0E7D3C@vivistar.com>

[I suspect this has been asked before but couldn't find the list  
search function...]

Hello,

I've imported antlr 2.7.5 into our subversion repository.   
Unfortunately, a simple checkout (complete with .svn sub directories)  
of antlr won't successfully do a simple make (after ./configure -- 
with-javac=javac).  Error is:

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
Unable to compile ANTLR grammar file(s)
/ordept/devish/apps/vis/trunk/dev/srclibs/thirdparty/antlr/antlr/../ 
antlr/antlr.g
Reason(s):
(a) there's no /ordept/devish/apps/vis/trunk/dev/srclibs/thirdparty/ 
antlr/antlr/antlr.jar
(b) there's no /ordept/devish/apps/vis/trunk/dev/srclibs/thirdparty/ 
antlr/antlr.jar
(c) there's no /ordept/devish/apps/vis/trunk/dev/srclibs/thirdparty/ 
antlr/lib/antlr.jar
(d) options --with-antlr-jar --with-antlr-cmd not applied
      or value given is not correct.
You may resolve this problem by setting environment variable
$ANTLR_JAR.
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

If I do an export (w/o .svn sub directories) of antlr, the

     ./configure --with-javac=javac
     make

sequence functions as expected.

Except for the .svn sub directories, there are no differences between  
the two cases.

I'm guessing those extra directories are confusing some Makefile's or  
possibly the configure.

Any work known work arounds?


, Jonathan Hess


From mark.kattenbelt at gmail.com  Tue Sep  6 10:39:43 2005
From: mark.kattenbelt at gmail.com (Mark Kattenbelt)
Date: Tue Sep  6 10:39:48 2005
Subject: [antlr-interest] Problem linking C++ generated parser
In-Reply-To: <431B7C30.7080801@tiscali.co.uk>
References: <431B7C30.7080801@tiscali.co.uk>
Message-ID: <431DD45F.3010200@gmail.com>

John Williams wrote:

> I have a requirement to build a parser in both Java and C++ under 
> Windows and Linux and Antlr 2.7.5 seems to be the answer. My first 
> attempts have been in Windows 2000, the generated Java is fine. My 
> problem is the generated C++ source files. Compilation is fine but 
> linking is the problem. I have tried cygwin, mingw and Visual C++ (V6) 
> but all cases I am encountering linker problems. It was suggested by 
> Sohail Somani in replying to my first post that I include the errors.
>
> Below are the commands I used with cygwin in attempting to 
> compile/link the C++ generated by antlr. The source grammar was the 
> "calc" example supplied with antlr.
>
> antlr calc.g
> g++ -c *.cpp
> g++ -o calc.exe Main.o CalcLexer.o CalcParser.o CalcTreeWalker.o 
> -lantlr -lstdc++
>
> The linking produced many "undefined" errors, to many to include here 
> so I've abstracted a few of them.
>
> undefined reference to `std::basic_string<char, 
> std::char_traits<char>, std::allocator<char> >::_S_empty_rep_storage'
> undefined reference to `std::__default_alloc_template<true, 
> 0>::allocate(unsigned int)'
> undefined reference to `std::__default_alloc_template<true, 
> 0>::deallocate(void*, unsigned int)'
> undefined reference to `std::__default_alloc_template<true, 
> 0>::allocate(unsigned int)'
> undefined reference to `std::__default_alloc_template<true, 
> 0>::deallocate(void*, unsigned int)'
> undefined reference to `std::basic_string<char, 
> std::char_traits<char>, std::allocator<char> >::_S_empty_rep_storage'
> undefined reference to `std::__default_alloc_template<true, 
> 0>::deallocate(void*, unsigned int)'
> undefined reference to `std::__default_alloc_template<true, 
> 0>::allocate(unsigned int)'
> undefined reference to `std::__default_alloc_template<true, 
> 0>::deallocate(void*, unsigned int)'
> undefined reference to `std::basic_string<char, 
> std::char_traits<char>, std::allocator<char> >::_S_empty_rep_storage'
> undefined reference to `std::__default_alloc_template<true, 
> 0>::deallocate(void*, unsigned int)'
> undefined reference to `std::basic_string<char, 
> std::char_traits<char>, std::allocator<char> >::_S_empty_rep_storage'
> undefined reference to `std::__default_alloc_template<true, 
> 0>::allocate(unsigned int)'
> undefined reference to `std::__default_alloc_template<true, 
> 0>::deallocate(void*, unsigned int)'
>
> They were generated by object modules in 
> "/usr/lib/gcc/i686-pc-cygwin/3.4.4/../../../libantlr.a". Can anyone 
> suggest what I am doing wrong?
>
> Thanks for any help
>
> John
>
I get pretty much the same errors when building in mingw (via dev-cpp) I 
cannot seem to build the library in the same program, but have managed 
in another mingw install, though a slightly different version.

If you manage to solve it perhaps you could help me out with explaining 
how, or if someone knows a step by step guide of how to build antlr 
solutions in dev-cpp that would be lovely too.

Cheers,

Mark

From ric.klaren at gmail.com  Tue Sep  6 11:37:27 2005
From: ric.klaren at gmail.com (Ric Klaren)
Date: Tue Sep  6 11:35:24 2005
Subject: [antlr-interest] Problem linking C++ generated parser
In-Reply-To: <431DD45F.3010200@gmail.com>
References: <431B7C30.7080801@tiscali.co.uk> <431DD45F.3010200@gmail.com>
Message-ID: <431DE1E7.20706@gmail.com>

Mark Kattenbelt wrote:
> I get pretty much the same errors when building in mingw (via dev-cpp) I
> cannot seem to build the library in the same program, but have managed
> in another mingw install, though a slightly different version.
> 
> If you manage to solve it perhaps you could help me out with explaining
> how, or if someone knows a step by step guide of how to build antlr
> solutions in dev-cpp that would be lovely too.

First make sure you have no old .o or .a files around.

cd <antlr-distro>/lib/cpp
g++ -I. -c src/*.cpp
rm dll.o
ar ruv libantlr.a *.o
ranlib libantlr.a

This should get you a library that's compatible with your compiler.

cd <antlr-distro>/examples/cpp/calc
antlr calc.g

(or java -classpath <path-to-antlr.jar>/antlr.jar antlr.Tool calc.g add
extra classpath entries were needed sometimes rt.jar from the jdk/jre is
necessary)

g++ -o calc Calc*.cpp Main.cpp -I. -I../../../lib/cpp -L../../../lib/cpp
-lantlr

calc.exe < test.in
 ( + 3 ( * 4 5 ) )
value is 23

If this doesn't work then your mingw/dev-cpp/gcc/g++ installation is
broken. Above all make sure to remove any old .o files. Due to name
mangling changes in various g++'s you can't link objects of certain
g++'s together. e.g. you get link errors.

You can track stuff like it down with tools like
nm -C <objectfile|libraryfile>

That should get you a listing of all the defined symbols in an object
file using the default demangling scheme for you g++ installation. If
you get discrepancies between your object files (from the example) and
the antlr library then you know you're in trouble. (check the manpages)

Some gotchas:
- stale .o files in your build
- mix objects of different g++ versions.
- linking order is significant
- link with g++ *not* with ld
- don't specify -lstdc++ g++ does this automatically if it's correctly
installed. Depending on architecture and installation you may grab an
incorrect library. Check the g++ manpage for the various -print-xx
options that give you the spots where gcc expects to get files/linkers from.

HTH,

Ric
From mark.kattenbelt at gmail.com  Tue Sep  6 12:40:50 2005
From: mark.kattenbelt at gmail.com (Mark Kattenbelt)
Date: Tue Sep  6 12:40:54 2005
Subject: [antlr-interest] Problem linking C++ generated parser
In-Reply-To: <431DE1E7.20706@gmail.com>
References: <431B7C30.7080801@tiscali.co.uk> <431DD45F.3010200@gmail.com>
	<431DE1E7.20706@gmail.com>
Message-ID: <431DF0C2.50408@gmail.com>

Ric Klaren wrote:

>Mark Kattenbelt wrote:
>  
>
>>I get pretty much the same errors when building in mingw (via dev-cpp) I
>>cannot seem to build the library in the same program, but have managed
>>in another mingw install, though a slightly different version.
>>
>>If you manage to solve it perhaps you could help me out with explaining
>>how, or if someone knows a step by step guide of how to build antlr
>>solutions in dev-cpp that would be lovely too.
>>    
>>
>
>First make sure you have no old .o or .a files around.
>
>cd <antlr-distro>/lib/cpp
>g++ -I. -c src/*.cpp
>rm dll.o
>ar ruv libantlr.a *.o
>ranlib libantlr.a
>
>This should get you a library that's compatible with your compiler.
>
>cd <antlr-distro>/examples/cpp/calc
>antlr calc.g
>
>(or java -classpath <path-to-antlr.jar>/antlr.jar antlr.Tool calc.g add
>extra classpath entries were needed sometimes rt.jar from the jdk/jre is
>necessary)
>
>g++ -o calc Calc*.cpp Main.cpp -I. -I../../../lib/cpp -L../../../lib/cpp
>-lantlr
>
>calc.exe < test.in
> ( + 3 ( * 4 5 ) )
>value is 23
>
>If this doesn't work then your mingw/dev-cpp/gcc/g++ installation is
>broken. Above all make sure to remove any old .o files. Due to name
>mangling changes in various g++'s you can't link objects of certain
>g++'s together. e.g. you get link errors.
>
>You can track stuff like it down with tools like
>nm -C <objectfile|libraryfile>
>
>That should get you a listing of all the defined symbols in an object
>file using the default demangling scheme for you g++ installation. If
>you get discrepancies between your object files (from the example) and
>the antlr library then you know you're in trouble. (check the manpages)
>
>Some gotchas:
>- stale .o files in your build
>- mix objects of different g++ versions.
>- linking order is significant
>- link with g++ *not* with ld
>- don't specify -lstdc++ g++ does this automatically if it's correctly
>installed. Depending on architecture and installation you may grab an
>incorrect library. Check the g++ manpage for the various -print-xx
>options that give you the spots where gcc expects to get files/linkers from.
>
>HTH,
>
>Ric
>

Cheers for that Ric!

I've managed to compile the libantlr.a with dev-cpp by just making a new 
project (static lib) including the antlr-2.7.5/lib/cpp/ in the include 
dirs, and changing the output file. For some reason this didn't work 
before. Also it didn't won't work unless I did recompile, but I only 
need it compiled once.
My project compiled fine with this library. So finally I'm on my way here!

I do think perhaps a bit more explanation in the documentation of antlr 
would have helped! I'm not at all a c++ guru so it's easy to get stuck.

Cheers though,

Mark
From vidar at hawkis.com  Tue Sep  6 12:43:26 2005
From: vidar at hawkis.com (Vidar =?iso-8859-1?q?H=E5kestad?=)
Date: Tue Sep  6 12:43:31 2005
Subject: [antlr-interest] How do I find */
Message-ID: <200509062143.26406.vidar@hawkis.com>

Hello, Interest
I'm trying to split Java documentary comments and Java code into two separate 
lexers (as hinted in the 'ANTLR Specification: Token Streams' section).

What I want to accomplish is to make the sub-parser/lexer (for the JavaDoc) to 
just hand me the full block as is. No parsing is needed, I just want the 
documentary comment with stars and all (except maybe without the entry and 
exit tokens (i.e. /** and */)).

In my JavaSrcLexer, I have the following start of the ML_COMMENT:
ML_COMMENT
	: "/*" ~'*'
             etc
to avoid any problems with ambiguity. Then the actual documentary comment 
starts with:
JAVADOC_OPEN
	: "/**" {selector.push("srclexer");}
	;

and in the javadoc parser rule in JavaSrcParser:
javadoc
	:  JAVADOC_OPEN
		{
			// Create a (sub) parser to handle the javadoc comment
			//
			JavaDocParser jdocparser = new JavaDocParser(getInputState());
			jdocparser.content();
		}
	;

I have created a separate lexer for the actual documentary comment;
JavaDocLexer, where I have the following end rule for a documentary block:

JAVADOC_CLOSE
	: "*/" {selector.pop();} // Pops the stream back to JavaSrcLexer/Parser
	;

This scheme seems to work as far as invoking the JavaDocParser's content rule, 
but when I try to keep the internals of the original ML_COMMENT rule (from 
the original Java Lexer rules), which looks like this:

DOC_CONTENT
	:
		(	/*	'\r' '\n' can be matched in one alternative or by matching
				'\r' in one iteration and '\n' in another. I am trying to
				handle any flavor of newline that comes in, but the language
				that allows both "\r\n" and "\r" and "\n" to all be valid
				newline is ambiguous. Consequently, the resulting grammar
				must be ambiguous. I'm shutting this warning off.
			 */
			options {
				generateAmbigWarnings=false;
			}
		:
			{ LA(2)!='/' }? '*'
		|	'\r' '\n'		{newline();}
		|	'\r'			{newline();}
		|	'\n'			{newline();}
		|	~('*'|'\n'|'\r')
		)*
	;

called from the production (in JavaDocParser)
content
	: javaDoc:DOC_CONTENT
		{
			System.err.println("Content of block is "+javaDoc.getText());
		}
	;

I get errors as soon as any character is found. I suspect that the content 
rule for the internals for a comment should be quite different. The question 
is how it should be? To me it should accept any character sequence until the 
*/ pattern is found (and the consume that as well before letting the main 
parser/lexer regain control).

So how do I find the whole content of the documentary comment, i.e. stop 
parsing in the JavaDocParser/Lexer as soon as I see the "*/" token?

Any ideas to get me started?

Regards
Vidar
From jr.williams at tiscali.co.uk  Tue Sep  6 14:03:32 2005
From: jr.williams at tiscali.co.uk (John Williams)
Date: Tue Sep  6 14:00:00 2005
Subject: [antlr-interest] Problem linking C++ generated parser
Message-ID: <431E0424.1030802@tiscali.co.uk>

Mark Kattenbelt wrote:

> John Williams wrote:
>
>> I have a requirement to build a parser in both Java and C++ under 
>> Windows and Linux and Antlr 2.7.5 seems to be the answer. My first 
>> attempts have been in Windows 2000, the generated Java is fine. My 
>> problem is the generated C++ source files. Compilation is fine but 
>> linking is the problem. I have tried cygwin, mingw and Visual C++ 
>> (V6) but all cases I am encountering linker problems. It was 
>> suggested by Sohail Somani in replying to my first post that I 
>> include the errors.
>>
>> Below are the commands I used with cygwin in attempting to 
>> compile/link the C++ generated by antlr. The source grammar was the 
>> "calc" example supplied with antlr.
>>
>> antlr calc.g
>> g++ -c *.cpp
>> g++ -o calc.exe Main.o CalcLexer.o CalcParser.o CalcTreeWalker.o 
>> -lantlr -lstdc++
>>
>> The linking produced many "undefined" errors, to many to include here 
>> so I've abstracted a few of them.
>>
>> undefined reference to `std::basic_string<char, 
>> std::char_traits<char>, std::allocator<char> >::_S_empty_rep_storage'
>> undefined reference to `std::__default_alloc_template<true, 
>> 0>::allocate(unsigned int)'
>> undefined reference to `std::__default_alloc_template<true, 
>> 0>::deallocate(void*, unsigned int)'
>> undefined reference to `std::__default_alloc_template<true, 
>> 0>::allocate(unsigned int)'
>> undefined reference to `std::__default_alloc_template<true, 
>> 0>::deallocate(void*, unsigned int)'
>> undefined reference to `std::basic_string<char, 
>> std::char_traits<char>, std::allocator<char> >::_S_empty_rep_storage'
>> undefined reference to `std::__default_alloc_template<true, 
>> 0>::deallocate(void*, unsigned int)'
>> undefined reference to `std::__default_alloc_template<true, 
>> 0>::allocate(unsigned int)'
>> undefined reference to `std::__default_alloc_template<true, 
>> 0>::deallocate(void*, unsigned int)'
>> undefined reference to `std::basic_string<char, 
>> std::char_traits<char>, std::allocator<char> >::_S_empty_rep_storage'
>> undefined reference to `std::__default_alloc_template<true, 
>> 0>::deallocate(void*, unsigned int)'
>> undefined reference to `std::basic_string<char, 
>> std::char_traits<char>, std::allocator<char> >::_S_empty_rep_storage'
>> undefined reference to `std::__default_alloc_template<true, 
>> 0>::allocate(unsigned int)'
>> undefined reference to `std::__default_alloc_template<true, 
>> 0>::deallocate(void*, unsigned int)'
>>
>> They were generated by object modules in 
>> "/usr/lib/gcc/i686-pc-cygwin/3.4.4/../../../libantlr.a". Can anyone 
>> suggest what I am doing wrong?
>>
>> Thanks for any help
>>
>> John
>>
> I get pretty much the same errors when building in mingw (via dev-cpp) 
> I cannot seem to build the library in the same program, but have 
> managed in another mingw install, though a slightly different version.
>
> If you manage to solve it perhaps you could help me out with 
> explaining how, or if someone knows a step by step guide of how to 
> build antlr solutions in dev-cpp that would be lovely too.
>
> Cheers,
>
> Mark
>
>
At Ric Klaren's suggestion in this thread I downloaded the sources 
provided for cygwin users on the download page and then rebuilt the 
antlr/libraries.  My problems have now disappeared and I can use antlr 
to generate parsers using C++ and JAVA. I was using the cygwin binaries 
downloaded off antlr's download site. As Ric says, they must have been 
generated using an older version of gcc. I have not yet tried mingw but 
will try it soon.

The only steps I followed using cygwin  were:

1. Install the antlr sources for cygwin
2. Run the "configure" script
   (./configure --with-cxx=g++ --enable-java --enable-cxx)
3. Do a "make install"
   (make install)

I'm not sure if the configure options are required but it worked OK.

John
From vidar at hawkis.com  Tue Sep  6 14:13:06 2005
From: vidar at hawkis.com (Vidar =?iso-8859-1?q?H=E5kestad?=)
Date: Tue Sep  6 14:13:08 2005
Subject: [antlr-interest] How do I find */
In-Reply-To: <200509062143.26406.vidar@hawkis.com>
References: <200509062143.26406.vidar@hawkis.com>
Message-ID: <200509062313.06197.vidar@hawkis.com>

Found documentation on this in 'Lexical analyzis with ANTLR', chapter 
'Nongreedy Lexer Subrules', so I tried the following in my JavaDocLexer:
DOC_CONTENT
    :  // Note: Nothing here, as the '/**' gets eaten by the outer lexer.
    (options {generateAmbigWarnings=false;}
        :   { LA(2)!='/' }? '*'    // as long as */ is not found?
        |   '\r' '\n'    {newline();}
        |   '\r'         {newline();}  // Retain lineshifts
        |   '\n'         {newline();}
        |	.  // dot == any character
    )*
    "*/"
    {
       	selector.pop();
    }
    ;

Then trying to parse /** */, would give me
line 13:5: expecting DOC_CONTENT, found '*/'

Which is not expected (by me) at all.
This is the only lexer rule at the moment. And the lexer contains only one 
rule calling this lexer rule.

I also tried the greedy = false; within the options field which didn't work 
either.

Vidar

On Tuesday 06 September 2005 21:43, Vidar H?kestad wrote:
> Hello, Interest
> I'm trying to split Java documentary comments and Java code into two
> separate lexers (as hinted in the 'ANTLR Specification: Token Streams'
> section).
>
> What I want to accomplish is to make the sub-parser/lexer (for the JavaDoc)
> to just hand me the full block as is. No parsing is needed, I just want the
> documentary comment with stars and all (except maybe without the entry and
> exit tokens (i.e. /** and */)).
>
> In my JavaSrcLexer, I have the following start of the ML_COMMENT:
> ML_COMMENT
>
> 	: "/*" ~'*'
>
>              etc
> to avoid any problems with ambiguity. Then the actual documentary comment
> starts with:
> JAVADOC_OPEN
>
> 	: "/**" {selector.push("srclexer");}
>
> 	;
>
> and in the javadoc parser rule in JavaSrcParser:
> javadoc
>
> 	:  JAVADOC_OPEN
>
> 		{
> 			// Create a (sub) parser to handle the javadoc comment
> 			//
> 			JavaDocParser jdocparser = new JavaDocParser(getInputState());
> 			jdocparser.content();
> 		}
> 	;
>
> I have created a separate lexer for the actual documentary comment;
> JavaDocLexer, where I have the following end rule for a documentary block:
>
> JAVADOC_CLOSE
>
> 	: "*/" {selector.pop();} // Pops the stream back to JavaSrcLexer/Parser
>
> 	;
>
> This scheme seems to work as far as invoking the JavaDocParser's content
> rule, but when I try to keep the internals of the original ML_COMMENT rule
> (from the original Java Lexer rules), which looks like this:
>
> DOC_CONTENT
>
> 		(	/*	'\r' '\n' can be matched in one alternative or by matching
> 				'\r' in one iteration and '\n' in another. I am trying to
> 				handle any flavor of newline that comes in, but the language
> 				that allows both "\r\n" and "\r" and "\n" to all be valid
> 				newline is ambiguous. Consequently, the resulting grammar
> 				must be ambiguous. I'm shutting this warning off.
> 			 */
> 			options {
> 				generateAmbigWarnings=false;
> 			}
>
> 			{ LA(2)!='/' }? '*'
>
> 		|	'\r' '\n'		{newline();}
> 		|	'\r'			{newline();}
> 		|	'\n'			{newline();}
> 		|	~('*'|'\n'|'\r')
>
> 		)*
> 	;
>
> called from the production (in JavaDocParser)
> content
>
> 	: javaDoc:DOC_CONTENT
>
> 		{
> 			System.err.println("Content of block is "+javaDoc.getText());
> 		}
> 	;
>
> I get errors as soon as any character is found. I suspect that the content
> rule for the internals for a comment should be quite different. The
> question is how it should be? To me it should accept any character sequence
> until the */ pattern is found (and the consume that as well before letting
> the main parser/lexer regain control).
>
> So how do I find the whole content of the documentary comment, i.e. stop
> parsing in the JavaDocParser/Lexer as soon as I see the "*/" token?
>
> Any ideas to get me started?
>
> Regards
> Vidar
From antlr at klaashofstra.com  Wed Sep  7 13:01:54 2005
From: antlr at klaashofstra.com (Klaas Hofstra)
Date: Wed Sep  7 13:00:45 2005
Subject: [antlr-interest] ANTLR 2.7.5 Python version bug report
In-Reply-To: <431B2E84.4010607@tiscali.co.uk>
References: <431B2E84.4010607@tiscali.co.uk>
Message-ID: <200509072201.54373.antlr@klaashofstra.com>

antlr.py line 2426:

    def getTokenNames():
        return tokenNames

should be:

    def getTokenNames(self):
        return self.tokenNames

Cheers,
Klaas

P.S. I found this bug with pychecker.
From Kurt.E.McCall at nasa.gov  Wed Sep  7 13:28:39 2005
From: Kurt.E.McCall at nasa.gov (McCall, Kurt)
Date: Wed Sep  7 13:28:54 2005
Subject: [antlr-interest] Segmentation Fault under Cygwin 1.5.18-1
Message-ID: <EAFC0B8AFC4E3B42934CECA5232E45DD027C14D3@msecho2.msfc.nasa.gov>

Here is a gdb stack trace after a mystifying segmentation fault in my C++
ANTLR parser running under Cygwin 1.5.18.1.  It seems to be crashing the in
the Cygwin dll.   Does this look familiar to anyone?  The ANTLR version is
2.7.5.

Program received signal SIGSEGV, Segmentation fault.
0x610aaee9 in setstate () from /usr/bin/cygwin1.dll
(gdb) where
#0  0x610aaee9 in setstate () from /usr/bin/cygwin1.dll
#1  0x6104ed0a in lsearch () from /usr/bin/cygwin1.dll
#2  0x610844ff in cygwin1!aclcheck () from /usr/bin/cygwin1.dll
#3  0x006159cc in antlr::TokenRef::getRef ()
    at /usr/lib/gcc/i686-pc-cygwin/3.4.4/include/c++/limits:673
#4  0x00624628 in antlr::CommonToken::factory ()
    at /usr/lib/gcc/i686-pc-cygwin/3.4.4/include/c++/limits:673
#5  0x00649db6 in antlr::CharScanner::makeToken (this=0x6e1ddf0, t=4)
    at /opt/antlr-2.7.5/include/antlr/CharScanner.hpp:495
#6  0x0057a294 in ExprLexer::mSEMI (this=0x6e1ddf0, _createToken=true)
    at ExprLexer.cpp:444
#7  0x00578470 in ExprLexer::nextToken (this=0x6e1ddf0) at ExprLexer.cpp:99
#8  0x0062320c in antlr::TokenBuffer::fill ()
    at /usr/lib/gcc/i686-pc-cygwin/3.4.4/include/c++/limits:673
#9  0x00623401 in antlr::TokenBuffer::LA ()
    at /usr/lib/gcc/i686-pc-cygwin/3.4.4/include/c++/limits:673
#10 0x0064ede5 in antlr::LLkParser::LA (this=0x6ecccb0, i=2)
    at /opt/antlr-2.7.5/include/antlr/LLkParser.hpp:46
#11 0x005862e8 in ExprParser::primary_expression (this=0x6ecccb0)
    at ExprParser.cpp:1179
< Rest of Stack Trace not shown  >

-------------------------------------
Kurt McCall
Modeling and Simulation Branch / EV43
NASA MSFC
(256) 961-4501






-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20050907/abea5680/attachment.html
From Kurt.E.McCall at nasa.gov  Wed Sep  7 13:40:06 2005
From: Kurt.E.McCall at nasa.gov (McCall, Kurt)
Date: Wed Sep  7 13:40:17 2005
Subject: [antlr-interest] RE: Segmentation Fault under Cygwin 1.5.18-1
Message-ID: <EAFC0B8AFC4E3B42934CECA5232E45DD027C14DD@msecho2.msfc.nasa.gov>

By the way, we are using a version of libantlr.a that we compiled, not the
pre-compiled Cygwin version on the ANTLR download page. 

> _____________________________________________ 
> From: 	McCall, Kurt  
> Sent:	Wednesday, September 07, 2005 3:29 PM
> To:	ANTLR (antlr-interest@antlr.org)
> Cc:	Adams, Warren; McCall, Kurt
> Subject:	Segmentation Fault under Cygwin 1.5.18-1
> 
> Here is a gdb stack trace after a mystifying segmentation fault in my C++
> ANTLR parser running under Cygwin 1.5.18.1.  It seems to be crashing the
> in the Cygwin dll.   Does this look familiar to anyone?  The ANTLR version
> is 2.7.5.
> 
> Program received signal SIGSEGV, Segmentation fault.
> 0x610aaee9 in setstate () from /usr/bin/cygwin1.dll
> (gdb) where
> #0  0x610aaee9 in setstate () from /usr/bin/cygwin1.dll
> #1  0x6104ed0a in lsearch () from /usr/bin/cygwin1.dll
> #2  0x610844ff in cygwin1!aclcheck () from /usr/bin/cygwin1.dll
> #3  0x006159cc in antlr::TokenRef::getRef ()
>     at /usr/lib/gcc/i686-pc-cygwin/3.4.4/include/c++/limits:673
> #4  0x00624628 in antlr::CommonToken::factory ()
>     at /usr/lib/gcc/i686-pc-cygwin/3.4.4/include/c++/limits:673
> #5  0x00649db6 in antlr::CharScanner::makeToken (this=0x6e1ddf0, t=4)
>     at /opt/antlr-2.7.5/include/antlr/CharScanner.hpp:495
> #6  0x0057a294 in ExprLexer::mSEMI (this=0x6e1ddf0, _createToken=true)
>     at ExprLexer.cpp:444
> #7  0x00578470 in ExprLexer::nextToken (this=0x6e1ddf0) at
> ExprLexer.cpp:99
> #8  0x0062320c in antlr::TokenBuffer::fill ()
>     at /usr/lib/gcc/i686-pc-cygwin/3.4.4/include/c++/limits:673
> #9  0x00623401 in antlr::TokenBuffer::LA ()
>     at /usr/lib/gcc/i686-pc-cygwin/3.4.4/include/c++/limits:673
> #10 0x0064ede5 in antlr::LLkParser::LA (this=0x6ecccb0, i=2)
>     at /opt/antlr-2.7.5/include/antlr/LLkParser.hpp:46
> #11 0x005862e8 in ExprParser::primary_expression (this=0x6ecccb0)
>     at ExprParser.cpp:1179
> < Rest of Stack Trace not shown  >
> 
> -------------------------------------
> Kurt McCall
> Modeling and Simulation Branch / EV43
> NASA MSFC
> (256) 961-4501
> 
> 
> 
> 
> 
> 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20050907/ca5c133a/attachment.html
From point14 at magma.ca  Thu Sep  8 06:09:16 2005
From: point14 at magma.ca (Martin d Anjou)
Date: Thu Sep  8 06:07:21 2005
Subject: [antlr-interest] LL(*) questions
Message-ID: <Pine.LNX.4.63.0509080847190.17717@ordimartin.mda.zapto.org>

Hi,

How does LL(*) work in ANTLR v3? Does it travel down the grammar to find 
the terminals that disambiguate the alternatives and use them at runtime 
as lookaheads? Or as predicates?

What is the runtime cost of LL(*) vs. predicates vs. higher k (k for the 
rule not for entire grammar)?

Thanks,
Martin
From mjl at nova.edu  Thu Sep  8 07:39:06 2005
From: mjl at nova.edu (Michael Laszlo)
Date: Thu Sep  8 07:36:19 2005
Subject: [antlr-interest] heteroAST example
Message-ID: <005001c5b483$15fa5550$3d373489@GSCIS.NOVA.EDU>

 
The heteroAST example runs perfectly for me under some java systems (sdk1.4.1_01). But on other systems (jdk1.5.0_04,sdk1.4.2_06) I get this error:

C:\j2sdk1.4.2_06\antlr-2.7.5\heteroAST>java Main
4;
exception: java.lang.IllegalArgumentException: Invalid class or can't make instance, INTNode
java.lang.IllegalArgumentException: Invalid class or can't make instance, INTNode
        at antlr.ASTFactory.createUsingCtor(ASTFactory.java:251)
        at antlr.ASTFactory.create(ASTFactory.java:210)
        at CalcParser.atom(CalcParser.java:138)
        at CalcParser.mexpr(CalcParser.java:102)
        at CalcParser.expr(CalcParser.java:66)
        at Main.main(Main.java:12)

It seems to be due an InvocationTargetException thrown by ASTFactory.createUsingCTor() when it attempts to create an instance of INTNode using reflection: the specific call is 

t = (AST)ctor.newInstance(new Object[]{token}); 

In turn, it appears that token.getText returns "<no text>"; that is, it never picked up the value from the lexer. So the INTNode constructor fails when it attempts to parse the token's text as an int.

I would guess that my problem is due to an error in my Java system configuration, but I haven't been able to find it. Maybe someone can point me in the right direction.

Thanks.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20050908/4113ad94/attachment.html
From ric.klaren at gmail.com  Thu Sep  8 09:43:32 2005
From: ric.klaren at gmail.com (Ric Klaren)
Date: Thu Sep  8 09:42:32 2005
Subject: [antlr-interest] Segmentation Fault under Cygwin 1.5.18-1
In-Reply-To: <EAFC0B8AFC4E3B42934CECA5232E45DD027C14D3@msecho2.msfc.nasa.gov>
References: <EAFC0B8AFC4E3B42934CECA5232E45DD027C14D3@msecho2.msfc.nasa.gov>
Message-ID: <43206A34.3040703@gmail.com>

McCall, Kurt wrote:
> Here is a gdb stack trace after a mystifying segmentation fault in my C++
> ANTLR parser running under Cygwin 1.5.18.1.  It seems to be crashing the in
> the Cygwin dll.   Does this look familiar to anyone?  The ANTLR version is
> 2.7.5.

It can be anything. Are you using some custom token type ? Did you check
the initialization of the parser/lexer?

Cheers,

Ric
From Kurt.E.McCall at nasa.gov  Thu Sep  8 13:34:53 2005
From: Kurt.E.McCall at nasa.gov (McCall, Kurt)
Date: Thu Sep  8 13:35:04 2005
Subject: [antlr-interest] Segmentation Fault under Cygwin 1.5.18-1
Message-ID: <EAFC0B8AFC4E3B42934CECA5232E45DD027C16B6@msecho2.msfc.nasa.gov>


Ric,  I am not using a custom token type, and the parser initialized
correctly.  I don't think it is an ANTLR problem, but a problem in the way
Cygwin handles ANTLR, especially since it crashes in the Cygwin DLL.  The
entire program runs correctly if you compile under Cygwin with the
-mno_cygwin option, which causes it to link with different libraries and run
in a DOS window rather than a UNIX-like window. I was just hoping that some
Cygwin user would recognize the symptoms.

Kurt


From: Ric Klaren [mailto:ric.klaren@gmail.com] 
Subject: Re: [antlr-interest] Segmentation Fault under Cygwin 1.5.18-1

McCall, Kurt wrote:
> Here is a gdb stack trace after a mystifying segmentation fault in my 
> C++ ANTLR parser running under Cygwin 1.5.18.1.  It seems to be crashing
the in
> the Cygwin dll.   Does this look familiar to anyone?  The ANTLR version is
> 2.7.5.

It can be anything. Are you using some custom token type ? Did you check the
initialization of the parser/lexer?

Cheers,

Ric
From oliver.zeigermann at gmail.com  Fri Sep  9 06:19:41 2005
From: oliver.zeigermann at gmail.com (Oliver Zeigermann)
Date: Fri Sep  9 06:19:44 2005
Subject: [antlr-interest] Multipel lexer modes in ANTLR 3
Message-ID: <9da4f4520509090619a5a27ca@mail.gmail.com>

Folks,

does anyone know what is the official way to have multiple lexing
modes in ANTLR 3? Shall I handle it as described in example island
grammars? Or maybe using semanic predicates?

Thanks in advance for any hints and cheers

Oliver
From oliver.zeigermann at gmail.com  Fri Sep  9 09:12:54 2005
From: oliver.zeigermann at gmail.com (Oliver Zeigermann)
Date: Fri Sep  9 09:12:58 2005
Subject: [antlr-interest] ANTLR 3: Problem with static DFA class generation
Message-ID: <9da4f45205090909127d862fbc@mail.gmail.com>

Folks,

I have a problem with code looking like this:

lexer grammar XMLLexer;
{
    boolean tagMode = false;
}

TAG_START_OPEN : { !tagMode }? '<' { tagMode = true; } ;
TAG_END_OPEN : { !tagMode }? "</" { tagMode = true; } ;

....


The generated code does not work, as the inner static DFA classes try
to access tagMode oif the outer class to check the semantic predicate
which of course does not work.

Writing it this way does work, but that's silly isn't it?

lexer grammar XMLLexer;
{
    public static boolean tagMode = false;
}

TAG_START_OPEN : { !XMLLexer.tagMode }? '<' { XMLLexer.tagMode = true; } ;
TAG_END_OPEN : { !XMLLexer.tagMode }? "</" { XMLLexer.tagMode = true; } ;

...

I am willing to adjust the templates and know how to do that, but what
should they look like? Any ideas?

Oliver
From mark.venbrux at gmail.com  Wed Sep  7 05:34:31 2005
From: mark.venbrux at gmail.com (Mark Venbrux)
Date: Fri Sep  9 09:14:03 2005
Subject: [antlr-interest] performance issue with skip functionality in
	generated Java parser for binary data
Message-ID: <fa6015a205090705346b749d03@mail.gmail.com>

Hi,
First of all: ANTLR is great. Especially with the Eclipse plug-in.
So I tried something difficult to start with. Namely: parsing binary IsoBox 
files. 
This is a file structure with no explicit separators, so you need to 
interpret length fields to parse the structure.
The media content is just a lot of data, so I would like to skip it. But 
performance for big files collapses completely.
 I use the following function to skip data:
 
* private void skipData(int length)
{
InputBuffer buf = getInputBuffer(); 
try {
buf.fill(length);
for (int i = 0; i < length; i++) {
buf.consume();
}
setColumn(getColumn()+length);
} catch (CharStreamException e) {
// TODO Auto-generated catch block
e.printStackTrace();
} 
}
*

*Isthere a more optimal way to skip data that one is not interested in?
* 

 -- 
Mvg,

Mark
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20050907/e553d1cc/attachment.html
From oliver.zeigermann at gmail.com  Fri Sep  9 09:21:54 2005
From: oliver.zeigermann at gmail.com (Oliver Zeigermann)
Date: Fri Sep  9 09:21:58 2005
Subject: [antlr-interest] ANTLR 3: No way to specify member variables for
	embedded lexer
Message-ID: <9da4f45205090909212f8bce9c@mail.gmail.com>

If you have a combined lexer/parser grammar there seems to be no way
to specify additional member variables for the lexer like this:

grammar XML;
{

    boolean textMode = false;
}

This is possible only if you split the grammar. Any better solutions?

Oliver
From oliver.zeigermann at gmail.com  Fri Sep  9 09:26:43 2005
From: oliver.zeigermann at gmail.com (Oliver Zeigermann)
Date: Fri Sep  9 09:26:45 2005
Subject: [antlr-interest] ANTLR 3: Problem with separated lexer / parser
Message-ID: <9da4f452050909092617391371@mail.gmail.com>

When lexer and parser are specified in different files I find no way
to tell the parser to use the token vocabulary of the lexer. Doing
something like this

grammar XMLParser;
options {
    tokenVocab=XMLLexer;
}


where the lexer is called XMLLexer sort of seems to work, but ANTLR
still complains like this

xmlParser.g:10:38: no lexer rule corresponding to token: VALUE
xmlParser.g:25:20: no lexer rule corresponding to token: PCDATA

which makes me suspicious that maybe it only worked incidentally.

Any hints?

Oliver
From c0123 at web.de  Fri Sep  9 13:32:37 2005
From: c0123 at web.de (Claudius Heitz)
Date: Fri Sep  9 13:32:40 2005
Subject: [antlr-interest] question concerning ANTLR java grammar (again)
Message-ID: <1045447626@web.de>



Hi,

I used the current java grammar (http://www.antlr.org/grammar/1109874324096/java1.5.zip) and noticed that it accepts code that isn't allowed in Java.

I show it on a small example:

public class E {
	public static void main(String[] args) {
		java.lang.String;
		new ChildOfInner();
	}
}

The wrong thing on that is the expression: java.lang.String;

Eclipse tells: "Syntax error.  Insert "AssignmentOperator ArrayInitializer" to complete expression"

Because Eclipse doesn't accept it,  I suppose this isn't legal java code.
But the ANTLR java grammar accepts it as an expression.

Is this a bug?
If yes, is it already known?


Thanks for answering!

Regards
Claudius

______________________________________________________________
Verschicken Sie romantische, coole und witzige Bilder per SMS!
Jetzt bei WEB.DE FreeMail: http://f.web.de/?mc=021193

From ewbank at gmail.com  Fri Sep  9 16:57:26 2005
From: ewbank at gmail.com (Bryan Ewbank)
Date: Fri Sep  9 16:57:29 2005
Subject: [antlr-interest] tree transformation in Parser PLEASE
In-Reply-To: <20050826131653.GA15877@informatik.uni-bonn.de>
References: <20050824164121.69121.qmail@web26504.mail.ukl.yahoo.com>
	<20050826131653.GA15877@informatik.uni-bonn.de>
Message-ID: <dd3a065f05090916575fa749e@mail.gmail.com>

Speaking just for me, I simply had to delete a weeks worth of mailing
list stuff (vacation)...

You have this:
    #( = A #( = B #( = C 4 ) ) )
And you want to replace it with this:
    #( = C 4 ) #( = B 4 ) #( = A 4 )

The hard part, from an ANTLR point of view, is knowing that you must
duplicate the node containing the constant.

Generally, in a following TreeParser, you can do this as shown below. 
There may be errors (I didn't test this), but it should be close to
what you need.  Note that I'm using C++ in my actions; if you're using
Java, your actions will be different.

// wrap resulting list of EQUALS nodes with a single root node
parent_rule
: xform_rule { ## = #( #[ROOT,"ROOT"], ## ); }
;

// flatten cascading EQUALS into a sequence of EQUALS nodes
xform_rule
returns [ RefAST r ]
    : #( EQUALS id
             ( c:constant
                    // node at the bottom of the EQUALS cascade
                    { r = #c; }
             | r=x:xform_rule
                    {
                        // intermediate node; convert to flattened
node.  the constant value
                        // is copied in this operation to avoid
destroying the tree...
                        ## = #( #[EQUALS,"="], #id, COPY(r) );
                        ##->setNextSibling(#x);
                    }
             ) // end of alternative
       )  // end of #EQUALS
;
From ewbank at gmail.com  Fri Sep  9 16:59:19 2005
From: ewbank at gmail.com (Bryan Ewbank)
Date: Fri Sep  9 16:59:21 2005
Subject: [antlr-interest] AST address
In-Reply-To: <BAY104-F11AD4F8BB79E30476EC39DA5A10@phx.gbl>
References: <BAY104-F11AD4F8BB79E30476EC39DA5A10@phx.gbl>
Message-ID: <dd3a065f05090916593d797563@mail.gmail.com>

What's your target language?  You can always take the address in C++,
though you might not get what you expect if the AST structures are
complex (e.g., multiple inheritance will drive you crazy :-)


On 8/31/05, Clara Fdz de Castro <superserranas@hotmail.com> wrote:
> 
>  
>   Hi, 
>   
>   I need to find the address where a variable have been stored in an AST
> generated by antlr, in order to programming ensambly code. 
>   
>   
>  Do you have any suggestion? 
>   
>  I would really appreciate if could help me, 
>   
> Clara
From ewbank at gmail.com  Fri Sep  9 18:30:02 2005
From: ewbank at gmail.com (Bryan Ewbank)
Date: Fri Sep  9 18:30:09 2005
Subject: [antlr-interest] simple confusion
In-Reply-To: <430D8A83.9010000@berkeley.edu>
References: <430D8A83.9010000@berkeley.edu>
Message-ID: <dd3a065f050909183066646701@mail.gmail.com>

The nondeterminism is because, given a sequence of '\n' characters, it
is possible to match it with one LINE_TERMINATOR for the entire
sequence, or one LINE_TERMINATOR for each '\n' in the sequence.  ANTLR
uses a "longest match", so it will consume the sequence with one
LINE_TERMINATOR; however, it will also warn you about the problem in
case you didn't intend this.  The purpose of this option, and the
"greedy=true" option, are (as you surmise) to silence the warnings.

On 8/25/05, Brien Colwell <bcolwell@berkeley.edu> wrote:
> Hi all,
> 
> I am having some trouble with a seemingly simple rule.
> 
> protected
> LINE_TERMINATOR
> ... ( '\n' | ... ) +
> ;
> This rule attempts to match as many of these four characters as it can.
> ANTLR is giving strange non-determinism errors about it. Does it seem
> fundamentally flawed to anyone? Also, I have observed that the option
> set does not always silence non-determinism warnings.
From open.zone at virgin.net  Sat Sep 10 05:21:42 2005
From: open.zone at virgin.net (Micheal J)
Date: Sat Sep 10 05:06:54 2005
Subject: [antlr-interest] question concerning ANTLR java grammar (again)
In-Reply-To: <1045447626@web.de>
Message-ID: <000f01c5b602$34682f00$6802a8c0@hercules>

> Hi,
> 
> I used the current java grammar 
> (http://www.antlr.org/grammar/1109874324096/ja> va1.5.zip) and 
> noticed that it accepts code that isn't 
> allowed in Java.
> 
> I show it on a small example:
> 
> public class E {
> 	public static void main(String[] args) {
> 		java.lang.String;
> 		new ChildOfInner();
> 	}
> }
> 
> The wrong thing on that is the expression: java.lang.String;
> 
> Eclipse tells: "Syntax error.  Insert "AssignmentOperator 
> ArrayInitializer" to complete expression"
> 
> Because Eclipse doesn't accept it,  I suppose this isn't 
> legal java code. But the ANTLR java grammar accepts it as an 
> expression.
> 
> Is this a bug?

No.

> If yes, is it already known?

Yes. The ANTLR grammar is a parser for the java language not a full java
front end (it lacks symbol tables, type-checking etc). 

You can use it to build a full front end that will catch this kind of error
during it's type resolution/checking/binding phase.

Micheal

From parrt at cs.usfca.edu  Sat Sep 10 10:25:04 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Sat Sep 10 10:25:10 2005
Subject: [antlr-interest] LL(*) questions
In-Reply-To: <Pine.LNX.4.63.0509080847190.17717@ordimartin.mda.zapto.org>
References: <Pine.LNX.4.63.0509080847190.17717@ordimartin.mda.zapto.org>
Message-ID: <FAEC732A-41BB-4B94-866C-1583328D7995@cs.usfca.edu>


On Sep 8, 2005, at 6:09 AM, Martin d Anjou wrote:
> Hi,
>
> How does LL(*) work in ANTLR v3? Does it travel down the grammar to  
> find the terminals that disambiguate the alternatives and use them  
> at runtime as lookaheads? Or as predicates?

Hooray!  I have like 2 hours to work on ANTLR 3 and can answer a  
question or two.

Ok, ANTLR v3 uses static grammar analysis just like ANTLR v1 and v2.   
THe only difference is that I will look arbitrarily ahead instead of  
a fixed k to resolve parsing decisions.

> What is the runtime cost of LL(*) vs. predicates vs. higher k (k  
> for the rule not for entire grammar)?

LL(*) degenerates to LL(k) for a fixed k automatically and whenever  
possible.  Give me an LL(2) grammar and ANTLR v3 will generate an LL 
(2) parser.  For most grammars requiring arbitrary lookahead, the  
amount of lookahead is only infinite in theory.  In practice it's  
like LL(5) or something.  Again the parser tunes itself from LL(1) to  
LL(*) even within the same decision!

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com

From parrt at cs.usfca.edu  Sat Sep 10 10:25:40 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Sat Sep 10 10:25:44 2005
Subject: [antlr-interest] Multipel lexer modes in ANTLR 3
In-Reply-To: <9da4f4520509090619a5a27ca@mail.gmail.com>
References: <9da4f4520509090619a5a27ca@mail.gmail.com>
Message-ID: <3B0403D4-00B7-4F62-AF0D-1B8E281D1C1F@cs.usfca.edu>


On Sep 9, 2005, at 6:19 AM, Oliver Zeigermann wrote:

> Folks,
>
> does anyone know what is the official way to have multiple lexing
> modes in ANTLR 3? Shall I handle it as described in example island
> grammars? Or maybe using semanic predicates?

Hi Oliver, you can use predicates or you can use multiple lexer  
objects just like in the island grammar example.

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com

From parrt at cs.usfca.edu  Sat Sep 10 10:44:16 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Sat Sep 10 10:44:23 2005
Subject: [antlr-interest] ANTLR 3: Problem with static DFA class generation
In-Reply-To: <9da4f45205090909127d862fbc@mail.gmail.com>
References: <9da4f45205090909127d862fbc@mail.gmail.com>
Message-ID: <AE756421-BC60-47EF-BA22-C6403686D6F9@cs.usfca.edu>


On Sep 9, 2005, at 9:12 AM, Oliver Zeigermann wrote:

> Folks,
>
> I have a problem with code looking like this:
>
> lexer grammar XMLLexer;
> {
>     boolean tagMode = false;
> }
>
> TAG_START_OPEN : { !tagMode }? '<' { tagMode = true; } ;
> TAG_END_OPEN : { !tagMode }? "</" { tagMode = true; } ;

Yes, this is intended behavior though not desirable!  I spent hours  
trying (twice!) to come up with a convenient and efficient means to  
passing the "this" pointer around in the DFAs so that they would not  
be static.  I can't remember the issues now.  Originally, it was  
because I had separated the cyclic DFAs into bytecodes rather than  
java source code.

No matter what, if you have a ref to a parameter in a predicate that  
will end up in a cyclic DFA, it will not be visible!  There is  
absolutely no way around this.  You can generate an arbitrary DFA in  
java code without using ptrs to objects.  Many people have try to  
show me some try-finally stuff that will do arbitrary gotos but I  
always show a backwards jump that isn't possible.

I'm very open to suggestions, but at the moment I'll be forced to  
define the semantics of predicates to not allow parameters (even  
though they will work for non-cyclic DFAs).  This is highly  
undesirable!  Heh, wait!  What if I computed the value first and then  
passed to the DFA!!!!???  THe value cannot change during the DFA  
execution so the value would be the same!  So I would compute the  
predicate(s) first and then pass a vector of results to the DFA.   
This means that for cyclic DFAs, all predicates are evaluated (mostly  
unnecessarily) but they are not allowed to have side-effects so this  
is ok.

Interesting!  The following rule needs a cyclic DFA to see past the  
DOT*:

a[int x] : {x!=0}? DOT* ID | {x>=0}? DOT* SEMI ;

I would generate a DFA that looked like this:

boolean[] pred34 = {x!=0, x>=0};
int alt34 = DFA34.predict(input, pred34);

Holy crap!  That might work. :)

Actually, don't forget though that hoisting makes parameters unusable  
also.

a[int x] : {x!=0}? ID ;

If {x!=0}? gets hoisted into another decision it won't compile.   
Officially then only values visible to the class are valid, though in  
most cases even parameters would work if I can figure out the pre- 
evaluation thing.

Adding to the "blog":

http://www.antlr.org/blog/antlr3/lookahead.tml

[yes, I still need to convert my TML "blog" to the antlr wiki]

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com

From parrt at cs.usfca.edu  Sat Sep 10 10:45:47 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Sat Sep 10 10:45:53 2005
Subject: [antlr-interest] tree transformation in Parser PLEASE
In-Reply-To: <20050826131653.GA15877@informatik.uni-bonn.de>
References: <20050824164121.69121.qmail@web26504.mail.ukl.yahoo.com>
	<20050826131653.GA15877@informatik.uni-bonn.de>
Message-ID: <D99564D9-7C7A-4302-BDE8-464EE12492AD@cs.usfca.edu>

On Aug 26, 2005, at 6:16 AM, Gregor Pardella wrote:
>> Hello,
>>
>> maybe someone is able to help me - I become desperate.
>>
>> My parser is able to parse a statement like this one:
>>
>>   a = b = c = 4;
>>
>> and it generates a tree that looks like:
>>
>> <ROOT>
>> |_ =
>>    |_ a
>>    |_ =
>>       |_ b
>>       |_ =
>>          |_ c
>>          |_ 4

Hi Gregor,

What does your construction rule look like?  It should be:

assignment: ID EQUALS^ expr ;

or some such thing.

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com

From parrt at cs.usfca.edu  Sat Sep 10 10:47:05 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Sat Sep 10 10:47:10 2005
Subject: [antlr-interest] performance issue with skip functionality in
	generated Java parser for binary data
In-Reply-To: <fa6015a205090705346b749d03@mail.gmail.com>
References: <fa6015a205090705346b749d03@mail.gmail.com>
Message-ID: <18950E41-CE0F-4004-920B-F7284F6342F4@cs.usfca.edu>


On Sep 7, 2005, at 5:34 AM, Mark Venbrux wrote:

> Hi,
> First of all: ANTLR is great. Especially with the Eclipse plug-in.
> So I tried something difficult to start with. Namely: parsing  
> binary IsoBox files.
> This is a file structure with no explicit separators, so you need  
> to interpret length fields to parse the structure.
> The media content is just a lot of data, so I would like to skip  
> it. But performance for big files collapses completely.

Have you tried using a random access file and making the input stream  
itself simply skip forward with a seek?  Then antlr wouldn't care and  
could just do consume()s :)

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com

From parrt at cs.usfca.edu  Sat Sep 10 10:50:03 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Sat Sep 10 10:50:05 2005
Subject: [antlr-interest] ANTLR 3: No way to specify member variables for
	embedded lexer
In-Reply-To: <9da4f45205090909212f8bce9c@mail.gmail.com>
References: <9da4f45205090909212f8bce9c@mail.gmail.com>
Message-ID: <5D7A6C1E-8864-439A-A4DE-5A967A2DAB48@cs.usfca.edu>

On Sep 9, 2005, at 9:21 AM, Oliver Zeigermann wrote:
> If you have a combined lexer/parser grammar there seems to be no way
> to specify additional member variables for the lexer like this:
>
> grammar XML;
> {
>
>     boolean textMode = false;
> }
>
> This is possible only if you split the grammar. Any better solutions?

I have spent a LONG time trying to figure out what to do here.  We  
really need a solution that allows a combined grammar to push  
instance variables to the lexer object.  I considered the named  
action thing we use for C++ headers:

header "X" {
   action for output location X
}

Should we do something similar?  There is no keyword though and this  
is wacky:

"lexer" {
   boolean textMode = false;
}

perhaps

action "lexer" {
   boolean textMode = false;
}

or perhaps we should have

fields "lexer" {
   boolean textMode = false;
}

or something to make it more explicit.  what about methods in there?   
Is there a more generic term?  Maybe "action" is the right term. Hmm...

We definitely need a solution here.

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com

From parrt at cs.usfca.edu  Sat Sep 10 10:51:42 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Sat Sep 10 10:51:49 2005
Subject: [antlr-interest] ANTLR 3: Problem with separated lexer / parser
In-Reply-To: <9da4f452050909092617391371@mail.gmail.com>
References: <9da4f452050909092617391371@mail.gmail.com>
Message-ID: <28C3BE0D-C148-483A-9618-27C26E10A460@cs.usfca.edu>


On Sep 9, 2005, at 9:26 AM, Oliver Zeigermann wrote:

> When lexer and parser are specified in different files I find no way
> to tell the parser to use the token vocabulary of the lexer. Doing
> something like this
>
> grammar XMLParser;
> options {
>     tokenVocab=XMLLexer;
> }

Yep, I made it a one-way street.

> where the lexer is called XMLLexer sort of seems to work, but ANTLR
> still complains like this
>
> xmlParser.g:10:38: no lexer rule corresponding to token: VALUE
> xmlParser.g:25:20: no lexer rule corresponding to token: PCDATA
>
> which makes me suspicious that maybe it only worked incidentally.
>
> Any hints?

You have previously generated the lexer and so the vocab file  
exists.  Since you called the XMLParser a combined grammar it is  
properly warning you that have not defined lexer rules. :)  Try:

parser grammar XMLParser;
options {
     tokenVocab=XMLLexer;
}

and joy shall be yours! (I hope) ;)

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com

From harsha.nagesh at csfb.com  Sat Sep 10 11:38:34 2005
From: harsha.nagesh at csfb.com (Nagesh, Harsha)
Date: Sat Sep 10 11:38:47 2005
Subject: [antlr-interest] Parser rule writing question
Message-ID: <FDFBED0CBC3CA04BB7F633CC85ADDA5B15AAD58E@enyc12p32001.corpny.csfb.com>


Hi,

   I am trying to write some transformer for which I have a rule as below

mainRule
   :
   expr relationalOperator expr

relationalOperator
    :
      ASSIGNEQUAL | NOTEQUAL1 | NOTEQUAL2 
    ;

where ASSIGNEQUAL, NOTEQUAL1 and NOTEQUAL2 are defined as lexical tokens in the lexers

ASSIGNEQUAL : '=' ;
NOTEQUAL1 : "<>" ;
NOTEQUAL2 : "!=" ;

I want to change the relationalOperator to return back a string to the calling rule MainRule 
where I want to append the operator to a string that I am constructing. One way that I could achieve
this was by changing the rule as

relationalOperator1 returns [string rl=""]
    :
      rel1:ASSIGNEQUAL { rl = (rel1.getText());} | rel2:NOTEQUAL1 { rl = (rel2.getText());}
      | rel3:NOTEQUAL2 { rl = (rel3.getText());}
    ;

But this is quite dirty. When I inspected the generated code by antlr, I am thinking that there should
Be a way to specify something on the lines
  
relationalOperator1 returns [string rl=""]
    :
      rel:ASSIGNEQUAL | rel:NOTEQUAL1 | rel:NOTEQUAL2 
      { rl = (rel.getText());}
    ;

Can anybody tell me if this is possible as this is much more elegant than having to write rules for
Every terminal in a rule ? My intuition says this can be done, but I could not get it to work as
Antlr complained of rel already ebing used, etc. The generated code has this in different parts of the
switch case, so I am not sure why this is a problem.

The second issue is
- If I turn the buildAST=true and generate Csharp code, the generated code has an unreachable 
Statement (related to the AST). How can I fix it ?

Thanks,
Harsha





==============================================================================
Please access the attached hyperlink for an important electronic communications disclaimer: 

http://www.csfb.com/legal_terms/disclaimer_external_email.shtml

==============================================================================
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20050910/c21bf4f1/attachment.html
From parrt at cs.usfca.edu  Sat Sep 10 12:32:09 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Sat Sep 10 12:32:14 2005
Subject: [antlr-interest] ANTLR3 grammar problem
In-Reply-To: <200508061345.56807.marco.ladermann@gmx.de>
References: <200508061345.56807.marco.ladermann@gmx.de>
Message-ID: <85383A9C-A6C4-42C2-9718-B05B2D866A86@cs.usfca.edu>


On Aug 6, 2005, at 4:45 AM, Marco Ladermann wrote:
> While playing around with ANTLR3 I found the following problem in a  
> lexer rule
> (combined grammar PGNParser.g). From the definition of a comment in  
> the PGN
> (Portable Game Notation) for chess games:
>
> COMMENT_STRING:
>     '{'
>             (  ~( '}' ) )*
>     '}'
> ;
>
> this is generated into the PGNParser.lexer.g file (line 24)
>
> COMMENT_STRING : '{' (~ )* '}' ;

I have fixed this; it will appear in next v3 release :)

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com

From tommy.nordgren at chello.se  Sat Sep 10 13:05:19 2005
From: tommy.nordgren at chello.se (Tommy Nordgren)
Date: Sat Sep 10 13:05:25 2005
Subject: [antlr-interest] Where can I find Antlr 3?
Message-ID: <1BFFC843-1F9D-4CE6-A427-B521623D7168@chello.se>


-------------------------------------
This sig is dedicated to the advancement of Nuclear Power
Tommy Nordgren
tommy.nordgren@chello.se



From parrt at cs.usfca.edu  Sat Sep 10 13:25:11 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Sat Sep 10 13:25:14 2005
Subject: [antlr-interest] Where can I find Antlr 3?
In-Reply-To: <1BFFC843-1F9D-4CE6-A427-B521623D7168@chello.se>
References: <1BFFC843-1F9D-4CE6-A427-B521623D7168@chello.se>
Message-ID: <A1820972-4C9F-4DCB-AB55-33C6B767D30A@cs.usfca.edu>

Check:

http://www.antlr.org/download

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com

From oliver.zeigermann at gmail.com  Sat Sep 10 14:45:05 2005
From: oliver.zeigermann at gmail.com (Oliver Zeigermann)
Date: Sat Sep 10 14:45:10 2005
Subject: [antlr-interest] ANTLR 3: Problem with separated lexer / parser
In-Reply-To: <28C3BE0D-C148-483A-9618-27C26E10A460@cs.usfca.edu>
References: <9da4f452050909092617391371@mail.gmail.com>
	<28C3BE0D-C148-483A-9618-27C26E10A460@cs.usfca.edu>
Message-ID: <9da4f45205091014452777352c@mail.gmail.com>

2005/9/10, Terence Parr <parrt@cs.usfca.edu>:
> 
> On Sep 9, 2005, at 9:26 AM, Oliver Zeigermann wrote:
> 
> > When lexer and parser are specified in different files I find no way
> > to tell the parser to use the token vocabulary of the lexer. Doing
> > something like this
> >
> > grammar XMLParser;
> > options {
> >     tokenVocab=XMLLexer;
> > }
> 
> Yep, I made it a one-way street.
> 
> > where the lexer is called XMLLexer sort of seems to work, but ANTLR
> > still complains like this
> >
> > xmlParser.g:10:38: no lexer rule corresponding to token: VALUE
> > xmlParser.g:25:20: no lexer rule corresponding to token: PCDATA
> >
> > which makes me suspicious that maybe it only worked incidentally.
> >
> > Any hints?
> 
> You have previously generated the lexer and so the vocab file
> exists.  Since you called the XMLParser a combined grammar it is
> properly warning you that have not defined lexer rules. :)  Try:
> 
> parser grammar XMLParser;
> options {
>      tokenVocab=XMLLexer;
> }
> 
> and joy shall be yours! (I hope) ;)

Cool, that makes sense and actually worked for me. 

Thanks :)

Oliver
From oliver.zeigermann at gmail.com  Sat Sep 10 15:01:00 2005
From: oliver.zeigermann at gmail.com (Oliver Zeigermann)
Date: Sat Sep 10 15:01:03 2005
Subject: [antlr-interest] ANTLR 3: Problem with static DFA class generation
In-Reply-To: <AE756421-BC60-47EF-BA22-C6403686D6F9@cs.usfca.edu>
References: <9da4f45205090909127d862fbc@mail.gmail.com>
	<AE756421-BC60-47EF-BA22-C6403686D6F9@cs.usfca.edu>
Message-ID: <9da4f452050910150128a9ae0d@mail.gmail.com>

2005/9/10, Terence Parr <parrt@cs.usfca.edu>:
> I would generate a DFA that looked like this:
> 
> boolean[] pred34 = {x!=0, x>=0};
> int alt34 = DFA34.predict(input, pred34);

Sounds like a good solution to me. 

> Actually, don't forget though that hoisting makes parameters unusable
> also.
> 
> a[int x] : {x!=0}? ID ;
> 
> If {x!=0}? gets hoisted into another decision it won't compile.
> Officially then only values visible to the class are valid, though in
> most cases even parameters would work if I can figure out the pre-
> evaluation thing.

Only allowing non local values makes sense to me. 

I know this is sick, but a problem I had with ANTLR 2.x as well are
semantic actions for which it may be desirable to have them executed
in prediction mode as well, as other parts in the same rule rely on
the value being set. I had a solution for ANTLR 2.x, but maybe this is
so weird we should simply forget about...

Anyway, thanks a lot for spending so much time on my problems :)

Oliver
From oliver.zeigermann at gmail.com  Sat Sep 10 15:16:50 2005
From: oliver.zeigermann at gmail.com (Oliver Zeigermann)
Date: Sat Sep 10 15:16:52 2005
Subject: [antlr-interest] ANTLR 3: Problem with static DFA class generation
In-Reply-To: <AE756421-BC60-47EF-BA22-C6403686D6F9@cs.usfca.edu>
References: <9da4f45205090909127d862fbc@mail.gmail.com>
	<AE756421-BC60-47EF-BA22-C6403686D6F9@cs.usfca.edu>
Message-ID: <9da4f452050910151623ce405f@mail.gmail.com>

2005/9/10, Terence Parr <parrt@cs.usfca.edu>:
> No matter what, if you have a ref to a parameter in a predicate that
> will end up in a cyclic DFA, it will not be visible!  There is
> absolutely no way around this.  You can generate an arbitrary DFA in
> java code without using ptrs to objects.  Many people have try to
> show me some try-finally stuff that will do arbitrary gotos but I
> always show a backwards jump that isn't possible.

Maybe I am missing something obvious, but why not making the inner
classes non-static? This way you have the implied this pointer and can
simply access the fields of the enclosing class.

This actually worked for me!!!

Turning something like

        alt10 = DFA10.predict(input);
to
        alt10 = new DFA10().predict(input);

and

        public static int predict(IntStream input) throws RecognitionException {
to
        public int predict(IntStream input) throws RecognitionException {

and

        static DFA.State s17 = new DFA.State() {{alt=2;}};
to
        DFA.State s17 = new DFA.State() {{alt=2;}};

and finally

    static class DFA10 extends DFA {
to
    class DFA10 extends DFA {


Not very elegant, but seems to work. Anything I am missing?

Thanks and cheers

Oliver
From harsha.nagesh at csfb.com  Sat Sep 10 16:28:27 2005
From: harsha.nagesh at csfb.com (Nagesh, Harsha)
Date: Sat Sep 10 16:28:46 2005
Subject: [antlr-interest] Need an an example of intermediate level to learn
Message-ID: <FDFBED0CBC3CA04BB7F633CC85ADDA5B15AAD590@enyc12p32001.corpny.csfb.com>


Hi,

   Can somebody please point me to an antlr based example with reasonably
complicated rules of parser action/language transformation ?

I have gone through ALL the calculator examples, the CSV to HTML convertor
and a couple of others which I could get from the beginners section of
antlr.org. But I am unable to find more conplicated rules and parser action
and the online documentation is too abstract. Learning by example is far
easier. 

Also, if the mailing list archive could be searched it would make life much
simpler.

Thanks for your help,
Harsha

==============================================================================
Please access the attached hyperlink for an important electronic communications disclaimer: 

http://www.csfb.com/legal_terms/disclaimer_external_email.shtml

==============================================================================

From parrt at cs.usfca.edu  Sat Sep 10 17:34:28 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Sat Sep 10 17:34:33 2005
Subject: [antlr-interest] ANTLR 3: Problem with static DFA class generation
In-Reply-To: <9da4f452050910151623ce405f@mail.gmail.com>
References: <9da4f45205090909127d862fbc@mail.gmail.com>
	<AE756421-BC60-47EF-BA22-C6403686D6F9@cs.usfca.edu>
	<9da4f452050910151623ce405f@mail.gmail.com>
Message-ID: <1E87C0F7-1780-4B16-B4FC-2D2AFB89EDE6@cs.usfca.edu>


On Sep 10, 2005, at 3:16 PM, Oliver Zeigermann wrote:

> 2005/9/10, Terence Parr <parrt@cs.usfca.edu>:
>
>> No matter what, if you have a ref to a parameter in a predicate that
>> will end up in a cyclic DFA, it will not be visible!  There is
>> absolutely no way around this.  You can generate an arbitrary DFA in
>> java code without using ptrs to objects.  Many people have try to
>> show me some try-finally stuff that will do arbitrary gotos but I
>> always show a backwards jump that isn't possible.
>>
>
> Maybe I am missing something obvious, but why not making the inner
> classes non-static? This way you have the implied this pointer and can
> simply access the fields of the enclosing class.
>
> This actually worked for me!!!
>
> Turning something like
>
>         alt10 = DFA10.predict(input);
> to
>         alt10 = new DFA10().predict(input);

Hi Oliver,

Yep, I was opposed to creating that memory on each invocation, but  
now that I think about it, it would be not that bad for parsers as  
cyclic DFAs are uncommon.  However, the lexer would get crushed.  Can  
u imagine creating and extra object for every token?

There was a reason that I simply didn't pass in the "this" pointer as  
a parameter.  can't remember why.  Maybe it was because I couldn't  
see inside the code and figure out what variables had to have "this."  
prepended.  There was some really good reason I didn't do this.   
Sorry I can't remember.  Maybe my code has a comment...

Ter
From monty at codetransform.com  Sat Sep 10 18:51:40 2005
From: monty at codetransform.com (Monty Zukowski)
Date: Sat Sep 10 18:51:47 2005
Subject: [antlr-interest] Need an an example of intermediate level to learn
In-Reply-To: <FDFBED0CBC3CA04BB7F633CC85ADDA5B15AAD590@enyc12p32001.corpny.csfb.com>
References: <FDFBED0CBC3CA04BB7F633CC85ADDA5B15AAD590@enyc12p32001.corpny.csfb.com>
Message-ID: <0D9E1187-E23A-4C36-B232-4DE4D7253B38@codetransform.com>

Check out the C grammar on antlr.org.  Reasonably complicated, but it  
doesn't do any particular translations if that's what you're after.   
Look into the other contributed examples too.

Monty

On Sep 10, 2005, at 4:28 PM, Nagesh, Harsha wrote:

>
> Hi,
>
>    Can somebody please point me to an antlr based example with  
> reasonably
> complicated rules of parser action/language transformation ?
>
> I have gone through ALL the calculator examples, the CSV to HTML  
> convertor
> and a couple of others which I could get from the beginners section of
> antlr.org. But I am unable to find more conplicated rules and  
> parser action
> and the online documentation is too abstract. Learning by example  
> is far
> easier.
>
> Also, if the mailing list archive could be searched it would make  
> life much
> simpler.
>
> Thanks for your help,
> Harsha
>
> ====================================================================== 
> ========
> Please access the attached hyperlink for an important electronic  
> communications disclaimer:
>
> http://www.csfb.com/legal_terms/disclaimer_external_email.shtml
>
> ====================================================================== 
> ========
>
>
>
>

From vaphel at op.pl  Sun Sep 11 13:53:27 2005
From: vaphel at op.pl (vaphel@op.pl)
Date: Sun Sep 11 13:53:46 2005
Subject: [antlr-interest] Problem with addASTChild method
Message-ID: <20050911205335Z4870353-7366+797@kps5.test.onet.pl>

Hello,
 
I try to implement a tree parser which after every appearance of some token type (e.g. 25) add SEMIcolon. I did it in this way like on example below, but it not work. What may be wrong?
 
start_rule: #("top" (q:.
{
 if (#q.getType() == 25 )
 {
  AST plus_AST = #[SEMI];
  astFactory.addASTChild(currentAST, plus_AST);
 }
}
)*
);

Thank for helping me.
Regards,
Vaphel
From demakov at ispras.ru  Sun Sep 11 23:44:32 2005
From: demakov at ispras.ru (Alexey Demakov)
Date: Sun Sep 11 23:44:39 2005
Subject: [antlr-interest] Parser rule writing question
References: <FDFBED0CBC3CA04BB7F633CC85ADDA5B15AAD58E@enyc12p32001.corpny.csfb.com>
Message-ID: <00fd01c5b765$6ee57ac0$8cc79553@marlboro>

Parser rule writing questionHi,

You can use LT(k) for k-th next token and LA(k) for type of k-th next token:

relationalOperator  returns [String rel=null]
    : { rel = LT(1).getText(); }
      ( ASSIGNEQUAL | NOTEQUAL1 | NOTEQUAL2 )
    ; 

Regards,
Alexey

-----
Alexey Demakov
TreeDL: Tree Description Language: http://treedl.sourceforge.net
RedVerst Group: http://www.unitesk.com


  ----- Original Message ----- 
  From: Nagesh, Harsha 
  To: 'antlr-interest@antlr.org' 
  Sent: Saturday, September 10, 2005 10:38 PM
  Subject: [antlr-interest] Parser rule writing question




  Hi, 

     I am trying to write some transformer for which I have a rule as below 

  mainRule 
     : 
     expr relationalOperator expr 

  relationalOperator 
      : 
        ASSIGNEQUAL | NOTEQUAL1 | NOTEQUAL2 
      ; 

  where ASSIGNEQUAL, NOTEQUAL1 and NOTEQUAL2 are defined as lexical tokens in the lexers 

  ASSIGNEQUAL : '=' ; 
  NOTEQUAL1 : "<>" ; 
  NOTEQUAL2 : "!=" ; 

  I want to change the relationalOperator to return back a string to the calling rule MainRule 
  where I want to append the operator to a string that I am constructing. One way that I could achieve 
  this was by changing the rule as 

  relationalOperator1 returns [string rl=""] 
      : 
        rel1:ASSIGNEQUAL { rl = (rel1.getText());} | rel2:NOTEQUAL1 { rl = (rel2.getText());} 
        | rel3:NOTEQUAL2 { rl = (rel3.getText());} 
      ; 

  But this is quite dirty. When I inspected the generated code by antlr, I am thinking that there should 
  Be a way to specify something on the lines 
    
  relationalOperator1 returns [string rl=""] 
      : 
        rel:ASSIGNEQUAL | rel:NOTEQUAL1 | rel:NOTEQUAL2 
        { rl = (rel.getText());} 
      ; 

  Can anybody tell me if this is possible as this is much more elegant than having to write rules for 
  Every terminal in a rule ? My intuition says this can be done, but I could not get it to work as 
  Antlr complained of rel already ebing used, etc. The generated code has this in different parts of the 
  switch case, so I am not sure why this is a problem. 

  The second issue is 
  - If I turn the buildAST=true and generate Csharp code, the generated code has an unreachable 
  Statement (related to the AST). How can I fix it ? 

  Thanks, 
  Harsha 





  ==============================================================================
  Please access the attached hyperlink for an important electronic communications disclaimer: 

  http://www.csfb.com/legal_terms/disclaimer_external_email.shtml

  ==============================================================================

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20050912/bceaf12a/attachment.html
From demakov at ispras.ru  Mon Sep 12 00:23:44 2005
From: demakov at ispras.ru (Alexey Demakov)
Date: Mon Sep 12 00:23:48 2005
Subject: [antlr-interest] Need an an example of intermediate level to learn
References: <FDFBED0CBC3CA04BB7F633CC85ADDA5B15AAD590@enyc12p32001.corpny.csfb.com>
Message-ID: <012d01c5b76a$e8e8e280$8cc79553@marlboro>

Hi,

Whould you like to look at my parser?
It is for rather simple language
(BNF: http://cvs.sourceforge.net/viewcvs.py/treedl/TreeDL/treedl/src/bnf/TreeDL.bnf?view=markup )
(ANTLR lexer/parser: http://cvs.sourceforge.net/viewcvs.py/treedl/TreeDL/treedl/src/java/com/unitesk/atp/treedl/TDL.g?view=markup )
Almost all parser rules are simple, however there are some lookaheads.
Parser rules create nodes of strictly-typed heterogenous tree.
Nodes are created using factory to be able to cancel tree creation after syntax errors.
The most complicated part is embedded blocks written in different language.
These blocks are analyzed by lexers specified in input program itself
(like ANTLR 'language' file option)
(Default ANTLR lexer for embedded code:
http://cvs.sourceforge.net/viewcvs.py/treedl/TreeDL/treedl/src/java/com/unitesk/atp/treedl/CODE.g?view=markup )
So, token stream switching (multiplexing) is used.
Real examples written in this language: http://treedl.sourceforge.net/examples.html
I think that this example can be understood after learning of ANTLR basics.
And it should be useful - many questions in this list I answered simple copy/paste some parts of this lexers/parser :)
There are not many comments/descriptions but I hope code is self-documented.
In any case, you can mail me any questions about it.

Regards,
Alexey

-----
Alexey Demakov
TreeDL: Tree Description Language: http://treedl.sourceforge.net
RedVerst Group: http://www.unitesk.com

----- Original Message ----- 
From: "Nagesh, Harsha" <harsha.nagesh@csfb.com>
To: <antlr-interest@antlr.org>
Sent: Sunday, September 11, 2005 3:28 AM
Subject: [antlr-interest] Need an an example of intermediate level to learn


>
> Hi,
>
>    Can somebody please point me to an antlr based example with reasonably
> complicated rules of parser action/language transformation ?
>
> I have gone through ALL the calculator examples, the CSV to HTML convertor
> and a couple of others which I could get from the beginners section of
> antlr.org. But I am unable to find more conplicated rules and parser action
> and the online documentation is too abstract. Learning by example is far
> easier.
>
> Also, if the mailing list archive could be searched it would make life much
> simpler.
>
> Thanks for your help,
> Harsha
>
> ==============================================================================
> Please access the attached hyperlink for an important electronic communications disclaimer:
>
> http://www.csfb.com/legal_terms/disclaimer_external_email.shtml
>
> ==============================================================================
>

From pardella at informatik.uni-bonn.de  Mon Sep 12 01:26:53 2005
From: pardella at informatik.uni-bonn.de (Gregor Pardella)
Date: Mon Sep 12 01:26:59 2005
Subject: [antlr-interest] tree transformation in Parser 
In-Reply-To: <D99564D9-7C7A-4302-BDE8-464EE12492AD@cs.usfca.edu>
References: <20050824164121.69121.qmail@web26504.mail.ukl.yahoo.com>
	<20050826131653.GA15877@informatik.uni-bonn.de>
	<D99564D9-7C7A-4302-BDE8-464EE12492AD@cs.usfca.edu>
Message-ID: <20050912082653.GA27918@informatik.uni-bonn.de>

hello ter,

On Sat, Sep 10, 2005 at 10:45:47AM -0700, Terence Parr wrote:
> Hi Gregor,
> 
> What does your construction rule look like?  It should be:
> 
> assignment: ID EQUALS^ expr ;
> 
> or some such thing.

My expression rules are standard rules for expression, mean:
expression:
  assignment_expr (ASSIGN^ assignment_expr)? ;

assignment_expr:
  next_expr (NEXT_OP^ next_expr)?

etc....

in the last expression definition ID is declared.

But I solved it the hard way:
I count the ASSIGNs and if I match 2 or more I flat the tree by hand 
after the expression rule and return my flattened tree.

I think it is not the best solution (so if anybody has some ideas :)) 
but it works.

CODE:
else if (assignCount > 1) {
CommonAST child = null, sibling = e_AST;
Stack assignStack = new Stack();
assignStack.Push(e_AST);

CommonAST prep = (CommonAST) astFactory.dupTree(e_AST);
prep.removeChildren();

CommonAST constant = (CommonAST) astFactory.create(new Token(INT));
constant.setText("1");

CommonAST plusnode = (CommonAST) astFactory.create(new Token(PLUS));
plusnode.setText("+");
	
CommonAST minusnode = (CommonAST) astFactory.create(new Token(MINUS));
minusnode.setText("-");

CommonAST changeNode;
CommonAST workingNode;

while (((child = (CommonAST) sibling.getFirstChild()) != null)
&& ((sibling = (CommonAST) child.getNextSibling()) != null))
{
	if (sibling.getText().Equals("++"))
	{
	workingNode = (CommonAST) astFactory.dupTree(plusnode);
	changeNode = (CommonAST) astFactory.dupTree(sibling.getFirstChild());
	sibling = (CommonAST) astFactory.dupTree(prep);
	sibling.setFirstChild(astFactory.dupTree(changeNode));
	workingNode.setFirstChild(astFactory.dupTree(changeNode));
	workingNode.addChild(constant);
	sibling.getFirstChild().setNextSibling(workingNode);
	}
	if (sibling.getText().Equals("--"))
	{
	workingNode = (CommonAST) astFactory.dupTree(minusnode);
	changeNode = (CommonAST) astFactory.dupTree(sibling.getFirstChild());
	sibling = (CommonAST) astFactory.dupTree(prep);
	sibling.setFirstChild(astFactory.dup(changeNode));
	workingNode.setFirstChild(astFactory.dup(changeNode));
	workingNode.addChild(constant);
	sibling.getFirstChild().setNextSibling(workingNode);
	}
	if (sibling.getText().Equals("="))
		assignStack.Push(sibling);
}
CommonAST multiassign = (CommonAST) astFactory.create(new Token(MULTIASSIGN));
multiassign.setText("===");
astFactory.makeASTRoot(currentAST, (AST) multiassign);

Stack fertig = new Stack();
CommonAST _null = (CommonAST) assignStack.Pop();
CommonAST node;

fertig.Push(astFactory.dupTree(_null));
_null = null;

while (assignStack.Count > 0)
{
node = (CommonAST) astFactory.dupTree(((CommonAST) fertig.Peek()).getFirstChild());
_null = (CommonAST) assignStack.Pop();
_null.getFirstChild().setNextSibling(node);
fertig.Push(astFactory.dupTree(_null));
_null = null;
}
		
multiassign.setFirstChild((CommonAST)fertig.Pop());
while (fertig.Count > 0)
	multiassign.addChild((CommonAST) fertig.Pop());

returnAST = currentAST.root;
}


Gregor

-- 
From oliver.zeigermann at gmail.com  Mon Sep 12 03:04:47 2005
From: oliver.zeigermann at gmail.com (Oliver Zeigermann)
Date: Mon Sep 12 03:04:50 2005
Subject: [antlr-interest] ANTLR 3: Problem with static DFA class generation
In-Reply-To: <1E87C0F7-1780-4B16-B4FC-2D2AFB89EDE6@cs.usfca.edu>
References: <9da4f45205090909127d862fbc@mail.gmail.com>
	<AE756421-BC60-47EF-BA22-C6403686D6F9@cs.usfca.edu>
	<9da4f452050910151623ce405f@mail.gmail.com>
	<1E87C0F7-1780-4B16-B4FC-2D2AFB89EDE6@cs.usfca.edu>
Message-ID: <9da4f45205091203045523c71c@mail.gmail.com>

2005/9/11, Terence Parr <parrt@cs.usfca.edu>:
> 
> On Sep 10, 2005, at 3:16 PM, Oliver Zeigermann wrote:
> 
> > 2005/9/10, Terence Parr <parrt@cs.usfca.edu>:
> >
> >> No matter what, if you have a ref to a parameter in a predicate that
> >> will end up in a cyclic DFA, it will not be visible!  There is
> >> absolutely no way around this.  You can generate an arbitrary DFA in
> >> java code without using ptrs to objects.  Many people have try to
> >> show me some try-finally stuff that will do arbitrary gotos but I
> >> always show a backwards jump that isn't possible.
> >>
> >
> > Maybe I am missing something obvious, but why not making the inner
> > classes non-static? This way you have the implied this pointer and can
> > simply access the fields of the enclosing class.
> >
> > This actually worked for me!!!
> >
> > Turning something like
> >
> >         alt10 = DFA10.predict(input);
> > to
> >         alt10 = new DFA10().predict(input);
> 
> Hi Oliver,
> 
> Yep, I was opposed to creating that memory on each invocation, but
> now that I think about it, it would be not that bad for parsers as
> cyclic DFAs are uncommon.  However, the lexer would get crushed.  Can
> u imagine creating and extra object for every token?

No, you are right, creating an extra object would be a bad idea.
Instead one should rather have a sinle instance for each DFA

like 
class XMLLexer extends Lexer {
...
private dfa10 = new DFA10();
...

alt10 = dfa10.predict(input);
 
and things will work.

> There was a reason that I simply didn't pass in the "this" pointer as
> a parameter.  can't remember why.  Maybe it was because I couldn't
> see inside the code and figure out what variables had to have "this."
> prepended.  There was some really good reason I didn't do this.

Sorry, I guess I haven't made myself quite clear. There is no need to
prepend "this" to any variable or explicitly passing any pointers if
the DFA classes are non-static inner classes. You can simply access
all variables of the enclosing class. It simply works.

I will try if I can adjust the templats to show what I mean.

Oliver
From oliver.zeigermann at gmail.com  Mon Sep 12 03:41:45 2005
From: oliver.zeigermann at gmail.com (Oliver Zeigermann)
Date: Mon Sep 12 03:41:50 2005
Subject: [antlr-interest] ANTLR 3: Problem with static DFA class generation
In-Reply-To: <9da4f45205091203045523c71c@mail.gmail.com>
References: <9da4f45205090909127d862fbc@mail.gmail.com>
	<AE756421-BC60-47EF-BA22-C6403686D6F9@cs.usfca.edu>
	<9da4f452050910151623ce405f@mail.gmail.com>
	<1E87C0F7-1780-4B16-B4FC-2D2AFB89EDE6@cs.usfca.edu>
	<9da4f45205091203045523c71c@mail.gmail.com>
Message-ID: <9da4f452050912034161736a7f@mail.gmail.com>

The attached patch for Java.stg (org/antlr/codegen/templates/) will
make the below lexer fragment work:

lexer grammar XMLLexer;
{
   boolean tagMode = false;
}

TAG_START_OPEN : { !tagMode }? '<' { tagMode = true; } ;
TAG_END_OPEN : { !tagMode }? "</" { tagMode = true; } ;

....

It simple makes all DFA code non static to allow full access to the
outer class' (Lexer) fields. The part that creates a single DFA per
decision and lexer like this:

class XMLLexer extends Lexer {

...

private dfa10 = new DFA10();

...

alt10 = dfa10.predict(input);

...

}

is missing, as it requires changes not only to the template. 

Anyway, hopefully this is sufficient to make my point clear.

Oliver
-------------- next part --------------
A non-text attachment was scrubbed...
Name: Java.stg.diff
Type: application/octet-stream
Size: 2116 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20050912/8d856ff9/Java.stg-0001.obj
From oliver.zeigermann at gmail.com  Mon Sep 12 05:56:54 2005
From: oliver.zeigermann at gmail.com (Oliver Zeigermann)
Date: Mon Sep 12 05:56:59 2005
Subject: [antlr-interest] ANTLR 3: Bug in codegen.g
Message-ID: <9da4f45205091205566db32e08@mail.gmail.com>

In codegen.g, rule atom the attribute "label" is set for
lexerStringRef, charRef and lexerRuleRef while there is no attribute
label for these rules. This causes an error upon generation.

Obvious solution: either remove code that sets "label" (already done
at certain parts of rule atom) or add attribute "label" to the
templates.

Oliver
From oliver.zeigermann at gmail.com  Mon Sep 12 06:39:10 2005
From: oliver.zeigermann at gmail.com (Oliver Zeigermann)
Date: Mon Sep 12 06:39:13 2005
Subject: [antlr-interest] Re: ANTLR 3: Bug in codegen.g
In-Reply-To: <9da4f45205091205566db32e08@mail.gmail.com>
References: <9da4f45205091205566db32e08@mail.gmail.com>
Message-ID: <9da4f4520509120639455bd795@mail.gmail.com>

Modifying template lexerRuleRef in Java.stg
(org/antlr/codegen/templates/) to this

lexerRuleRef(label,rule,args) ::= <<
<if(label)>
int <label>Start = getCharIndex();<\n>
m<rule>(<args>);<\n>
Token <label> = new CommonToken(input, Token.INVALID_TOKEN_TYPE,
Token.DEFAULT_CHANNEL, <label>Start, getCharIndex()-1);<\n>
<else>
m<rule>(<args>);<\n>
<endif>
>>

allowed me to have labled lexer fragments like

name=GENERIC_ID

...

fragment GENERIC_ID     : ... ;

Oliver


2005/9/12, Oliver Zeigermann <oliver.zeigermann@gmail.com>:
> In codegen.g, rule atom the attribute "label" is set for
> lexerStringRef, charRef and lexerRuleRef while there is no attribute
> label for these rules. This causes an error upon generation.
> 
> Obvious solution: either remove code that sets "label" (already done
> at certain parts of rule atom) or add attribute "label" to the
> templates.
> 
> Oliver
>
From oliver.zeigermann at gmail.com  Mon Sep 12 07:29:38 2005
From: oliver.zeigermann at gmail.com (Oliver Zeigermann)
Date: Mon Sep 12 07:29:45 2005
Subject: [antlr-interest] ANTLR 3: Lexer problem
Message-ID: <9da4f45205091207297bdfc986@mail.gmail.com>

Again me - I am pretty sure to start bothering ;)

Anyway, any idea why this lexer grammar 

ELEMENT
    : "<t>"
            (ELEMENT
            | (options {greedy=true;} : ~'<')*
            )*
      "</t>"      
    ;

fails to parse this

<t>Huhu</t>

while this works ok:

ELEMENT
    : "<t>"
            (ELEMENT
            | ~'<'
            )*
      "</t>"      
    ;

The second grammar is not suitable for me as I want text (everything,
not starting with '>') to be reported in a bunch, and not as single
characters. And - of course - this is not my real grammar, but a
simplified version of it.

Oliver
From oliver.zeigermann at gmail.com  Mon Sep 12 07:32:40 2005
From: oliver.zeigermann at gmail.com (Oliver Zeigermann)
Date: Mon Sep 12 07:32:43 2005
Subject: [antlr-interest] Re: ANTLR 3: Lexer problem
In-Reply-To: <9da4f45205091207297bdfc986@mail.gmail.com>
References: <9da4f45205091207297bdfc986@mail.gmail.com>
Message-ID: <9da4f45205091207323392b0e7@mail.gmail.com>

Forgot to mention, the problem is that the end tag "</t>" can not be
parsed as the generated lexer upon seing '<' predicts a second "<t>"
and chokes when it sees the '/'.

Oliver

2005/9/12, Oliver Zeigermann <oliver.zeigermann@gmail.com>:
> Again me - I am pretty sure to start bothering ;)
> 
> Anyway, any idea why this lexer grammar
> 
> ELEMENT
>     : "<t>"
>             (ELEMENT
>             | (options {greedy=true;} : ~'<')*
>             )*
>       "</t>"
>     ;
> 
> fails to parse this
> 
> <t>Huhu</t>
> 
> while this works ok:
> 
> ELEMENT
>     : "<t>"
>             (ELEMENT
>             | ~'<'
>             )*
>       "</t>"
>     ;
> 
> The second grammar is not suitable for me as I want text (everything,
> not starting with '>') to be reported in a bunch, and not as single
> characters. And - of course - this is not my real grammar, but a
> simplified version of it.
> 
> Oliver
>
From mail at martin-probst.com  Mon Sep 12 07:50:10 2005
From: mail at martin-probst.com (Martin Probst)
Date: Mon Sep 12 07:50:18 2005
Subject: [antlr-interest] Re: ANTLR 3: Lexer problem
In-Reply-To: <9da4f45205091207323392b0e7@mail.gmail.com>
References: <9da4f45205091207297bdfc986@mail.gmail.com>
	<9da4f45205091207323392b0e7@mail.gmail.com>
Message-ID: <1126536611.31478.14.camel@localhost.localdomain>

Hi,

are you sure it's a good idea to do this XML parsing in the lexer? It
should be really trivial in the parser (as XML is indeed more or less
trivial to parse). Is there a specific reason to do so?

If you increase your Lexer's k to 2 this should (theoretically) work. If
it doesn't, I would opt for a bug in ANTLR.

Martin

On Mon, 2005-09-12 at 16:32 +0200, Oliver Zeigermann wrote:
> Forgot to mention, the problem is that the end tag "</t>" can not be
> parsed as the generated lexer upon seing '<' predicts a second "<t>"
> and chokes when it sees the '/'.
> 
> Oliver
> 
> 2005/9/12, Oliver Zeigermann <oliver.zeigermann@gmail.com>:
> > Again me - I am pretty sure to start bothering ;)
> > 
> > Anyway, any idea why this lexer grammar
> > 
> > ELEMENT
> >     : "<t>"
> >             (ELEMENT
> >             | (options {greedy=true;} : ~'<')*
> >             )*
> >       "</t>"
> >     ;
> > 
> > fails to parse this
> > 
> > <t>Huhu</t>
> > 
> > while this works ok:
> > 
> > ELEMENT
> >     : "<t>"
> >             (ELEMENT
> >             | ~'<'
> >             )*
> >       "</t>"
> >     ;
> > 
> > The second grammar is not suitable for me as I want text (everything,
> > not starting with '>') to be reported in a bunch, and not as single
> > characters. And - of course - this is not my real grammar, but a
> > simplified version of it.
> > 
> > Oliver
> >
> 

From oliver.zeigermann at gmail.com  Mon Sep 12 07:58:12 2005
From: oliver.zeigermann at gmail.com (Oliver Zeigermann)
Date: Mon Sep 12 07:58:15 2005
Subject: [antlr-interest] Re: ANTLR 3: Lexer problem
In-Reply-To: <1126536611.31478.14.camel@localhost.localdomain>
References: <9da4f45205091207297bdfc986@mail.gmail.com>
	<9da4f45205091207323392b0e7@mail.gmail.com>
	<1126536611.31478.14.camel@localhost.localdomain>
Message-ID: <9da4f45205091207587f115a0c@mail.gmail.com>

Hi Martin!

2005/9/12, Martin Probst <mail@martin-probst.com>:
> are you sure it's a good idea to do this XML parsing in the lexer? It
> should be really trivial in the parser (as XML is indeed more or less
> trivial to parse). Is there a specific reason to do so?

Why not? ;) Besides, AFAIK an XML parser in ANTLR isn't actually
trivial. You would at least need sematic predicates (somehow
incomplete in ANTLR 3), or more than one grammar.

Any better ideas?

> If you increase your Lexer's k to 2 this should (theoretically) work. If
> it doesn't, I would opt for a bug in ANTLR.

How do you set the lookahead in ANTLR 3?

Oliver
From mail at martin-probst.com  Mon Sep 12 08:53:30 2005
From: mail at martin-probst.com (Martin Probst)
Date: Mon Sep 12 08:53:34 2005
Subject: [antlr-interest] Re: ANTLR 3: Lexer problem
In-Reply-To: <9da4f45205091207587f115a0c@mail.gmail.com>
References: <9da4f45205091207297bdfc986@mail.gmail.com>
	<9da4f45205091207323392b0e7@mail.gmail.com>
	<1126536611.31478.14.camel@localhost.localdomain>
	<9da4f45205091207587f115a0c@mail.gmail.com>
Message-ID: <1126540410.31478.22.camel@localhost.localdomain>

Hi,

> > are you sure it's a good idea to do this XML parsing in the lexer? It
> > should be really trivial in the parser (as XML is indeed more or less
> > trivial to parse). Is there a specific reason to do so?
> 
> Why not? ;) Besides, AFAIK an XML parser in ANTLR isn't actually
> trivial. You would at least need sematic predicates (somehow
> incomplete in ANTLR 3), or more than one grammar.
> 
> Any better ideas?

Well, you'll only need semantic predicates for matching the open/close
tags, but in your case it's limited to a finite set of element types,
isn't it? Otherwise your Lexer wouldn't work too, would it?

Apart from that I've found that ANTLR's strength is not necessarily
within XML, it's quite good for complex grammars, but if you only want
to parse XML there are a lot of high-quality, highly-optimized products
for that. Maybe you can just create a token that contains all of the XML
stuff and then parse the .getText() of that using Xerces or whatever?

> 
> > If you increase your Lexer's k to 2 this should (theoretically) work. If
> > it doesn't, I would opt for a bug in ANTLR.
> 
> How do you set the lookahead in ANTLR 3?

Well, if that isn't a nice question for Terence ;-)

Seriously I don't know, I'm using ANTLR 2.x - we have an existing parser
that works nicely with ANTLR 2.x and in a database environment you don't
change your components just for fun ;-)

Martin

From vaphel at op.pl  Tue Sep 13 00:38:13 2005
From: vaphel at op.pl (Vaphel)
Date: Tue Sep 13 00:38:35 2005
Subject: [antlr-interest] Problem with addASTChild method
Message-ID: <20050913073820Z1135109-2509+220@ps2.test.onet.pl>

Hello,

I try to implement a tree parser which after every appearance of some token type (e.g. 25) add SEMIcolon. I did it in this way like on example below, but it not work. What may be wrong?
  
start_rule: #("top" (q:.
{
 if (#q.getType() == 25 )
 {
   AST plus_AST = #[SEMI];
   astFactory.addASTChild(currentAST, plus_AST);
  }
}
)*
);

Thank for helping me.
Regards,
Vaphel


Wiadomo?? wys?ana przez program DRACO ORGANIZER http://www.dshome.pl

From antlr at klaashofstra.com  Tue Sep 13 02:10:15 2005
From: antlr at klaashofstra.com (Klaas Hofstra)
Date: Tue Sep 13 02:10:13 2005
Subject: [antlr-interest] parsing include files, filename info in treewalker
In-Reply-To: <20050913073820Z1135109-2509+220@ps2.test.onet.pl>
References: <20050913073820Z1135109-2509+220@ps2.test.onet.pl>
Message-ID: <200509131110.15179.antlr@klaashofstra.com>

Hi,

I've had a look at the includeFile example in order to give me an idea about 
handling input files that have an #include like functionality. 

If I understand correctly, filename + line + column will be available at the 
parsing and lexing stage so error messages can give the location of the 
problem in the input. 

In the treewalker however, the nodes only have line + column info so when I 
come across an error in the walker stage and want to print an error message, 
I can't give the file in which the error occurred.

Does anyone know how  to solve this elegantly?

Cheers,
Klaas
From dzubi at users.sourceforge.net  Tue Sep 13 05:23:53 2005
From: dzubi at users.sourceforge.net (=?UTF-8?B?IkRhbmllbCBadWJlcmLDvGhsZXIi?=)
Date: Tue Sep 13 05:23:59 2005
Subject: [antlr-interest] Lexer problem: distinguish between TIC and
	CHAR_LITERAL
Message-ID: <330b703961add04c822492580a8af3db@zubinet.org>

Hi 

I have a problem with the Ada Grammer.
In some cases the Lexer matches a CHARACTER_LITERAL instead of a single
TIC. These are the two rules:

TIC : { LA(3)!='\'' }? '\'' ;

CHARACTER_LITERAL : { LA(3)=='\'' }? "'" . "'" ;

The character literal is defined as two tics with one character in between.
To decide if a tic is a TIC or the beginning of a CHARACTER_LITERAL, we
check if at LA(3) follows another tic or not.
This works generally quite fine, but not with the following code fragment: 

new String'('b' & Second_Char);

here we have a TIC followed by a parenthesis and a CHARACTER_LITERAL.
Obviously the Lexer can't recognize that.

I'd be grateful for any pointer how to solve this problem.

Thanks and cheers,
Daniel

From mail at martin-probst.com  Tue Sep 13 06:44:56 2005
From: mail at martin-probst.com (Martin Probst)
Date: Tue Sep 13 06:45:03 2005
Subject: [antlr-interest] Lexer problem: distinguish between TIC and
	CHAR_LITERAL
In-Reply-To: <330b703961add04c822492580a8af3db@zubinet.org>
References: <330b703961add04c822492580a8af3db@zubinet.org>
Message-ID: <1126619096.16819.13.camel@localhost.localdomain>

Hi,

> The character literal is defined as two tics with one character in
> between.
> To decide if a tic is a TIC or the beginning of a CHARACTER_LITERAL,
> we check if at LA(3) follows another tic or not.

If this is the definition of your language, then this is (IMHO) just a
case of the language being ambiguous. How should the parser/lexer tell
what the user wants? In this case it's quite obvious (one case giving an
error, another one not), but I think that you might find places where
it's not that easy.
> 
> new String'('b' & Second_Char);

If there is a certain restriction on where tics may occur and where they
are disallowed, then you can probably write a stateful lexer working
around the problem. But the much nicer solution would of course be a
more sound definition of the lexical structure, avoiding these
ambiguities.

Martin
> 

From adenis at bristol.ca  Tue Sep 13 07:17:42 2005
From: adenis at bristol.ca (denis, alexis)
Date: Tue Sep 13 07:17:54 2005
Subject: Fw: [antlr-interest] Compiling Simple grammar with Visual C++ 6 using
	ANTLR 2.7.5
Message-ID: <A93344061C44D71199B60002B35EBA3502455244@mail.bal>

Sorry to bother everybody with this again but any help would be appreciated.

-----Original Message-----
From: denis, alexis [mailto:adenis@bristol.ca]
Sent: Wednesday, August 31, 2005 11:44 AM
To: 'antlr-interest@antlr.org'
Subject: [antlr-interest] Compiling Simple grammar with Visual C++ 6 using
ANTLR 2.7.5



Hello, 

I just wanted to mention first that the ANTLR library and the grammar
compile fine with ANTLR version 2.7.4. 

When compiling the ANTLR 2.7.5 C++ library, I had to change a few things.
The main problem was the following lines: 
1. std::min is not defined, had to change it to std::_MIN 
2. Visual C++ 6 doesn't handle the static const initialization: 
            static const size_t MIN_TOKEN_INDEX = 0; 
        static const char* DEFAULT_PROGRAM_NAME; 
        static const int PROGRAM_INIT_SIZE = 100; 
   I had a look in other files and there is a conditional compile for static
const that are replaced by enums. I did just that for the two ints but
couldn't for the constant char pointer. I redeclared the pointer char
pointer without const.

3. There were some methods returning void but were assigned a return value
and the compiler complained about that. I just removed the return
statements.

                void toStream( ANTLR_USE_NAMESPACE(std)ostream& out ) const
{ 
                  return toStream( out, MIN_TOKEN_INDEX,
getTokenStreamSize()); 
                    } 
        changed to: 
                   void toStream( ANTLR_USE_NAMESPACE(std)ostream& out )
const { 
                   toStream( out, MIN_TOKEN_INDEX, getTokenStreamSize()); 
                    } 

Once I got the library to compile, I tried compiling a simple grammar and I
got the following errors: 

At compile time: 

MyExprParser.cpp 
MyExprParser.cpp(162) : error C2065: 'recover' : undeclared identifier 
relates to the line: 
        catch (ANTLR_USE_NAMESPACE(antlr)RecognitionException& ex) { 
                reportError(ex); 
                recover(ex,_tokenSet_5); 
        } 

I just create an empty macro for that function but then I get some link time
errors: 

main.obj : error LNK2001: unresolved external symbol "public: virtual void
__thiscall antlr::CharScanner::panic(void)"
(?panic@CharScanner@antlr@@UAEXXZ)

MyExprLexer.obj : error LNK2001: unresolved external symbol "public: virtual
void __thiscall antlr::CharScanner::panic(void)"
(?panic@CharScanner@antlr@@UAEXXZ)

main.obj : error LNK2001: unresolved external symbol "public: virtual void
__thiscall antlr::CharScanner::panic(class std::basic_string<char,struct
std::char_traits<char>,class std::allocator<char> > const &)"
(?panic@CharScanner@antlr@@UAEXABV?$bas

ic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@@Z) 
MyExprLexer.obj : error LNK2001: unresolved external symbol "public: virtual
void __thiscall antlr::CharScanner::panic(class
std::basic_string<char,struct std::char_traits<char>,class
std::allocator<char> > const &)" (?panic@CharScanner@antlr@@UAEXA

BV?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@@Z) 
MyExprLexer.obj : error LNK2001: unresolved external symbol "class
antlr::RefCount<class antlr::Token> antlr::nullToken"
(?nullToken@antlr@@3V?$RefCount@VToken@antlr@@@1@A)

MyExprParser.obj : error LNK2001: unresolved external symbol "class
antlr::RefCount<class antlr::Token> antlr::nullToken"
(?nullToken@antlr@@3V?$RefCount@VToken@antlr@@@1@A)

MyExprParser.obj : error LNK2001: unresolved external symbol "public:
virtual void __thiscall antlr::Parser::panic(void)"
(?panic@Parser@antlr@@UAEXXZ)

MyExprParser.obj : error LNK2001: unresolved external symbol "public:
__thiscall antlr::NoViableAltException::NoViableAltException(class
antlr::RefCount<class antlr::Token>,class std::basic_string<char,struct
std::char_traits<char>,class std::alloca

tor<char> > const &)"
(??0NoViableAltException@antlr@@QAE@V?$RefCount@VToken@antlr@@@1@ABV?$basic_
string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@@Z)

MyExprParser.obj : error LNK2001: unresolved external symbol "public: class
antlr::RefCount<class antlr::Token> __thiscall
antlr::TokenBuffer::LT(unsigned int)"
(?LT@TokenBuffer@antlr@@QAE?AV?$RefCount@VToken@antlr@@@2@I@Z)

Debug/mytree_expr.exe : fatal error LNK1120: 6 unresolved externals 

Any help? 

Alexis 

----------------------------------------------------------------------
"Confidentiality Disclaimer:  This message and the documents attached is
intended for the addressee(s) only and may contain privileged, private or
confidential information.  Unauthorized review, disclosure, dissemination,
distribution, duplication or other  use of this information is strictly
prohibited.  If you have received this message in error, please notify the
sender immediately via telephone or return email.  Please, then delete the
original email and all copies from your system, servers, backups and
archives".
----------------------------------------------------------------------

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20050913/d2e9784a/attachment.html
From ric.klaren at gmail.com  Tue Sep 13 07:34:13 2005
From: ric.klaren at gmail.com (Ric Klaren)
Date: Tue Sep 13 07:34:15 2005
Subject: Fw: [antlr-interest] Compiling Simple grammar with Visual C++ 6
	using ANTLR 2.7.5
In-Reply-To: <A93344061C44D71199B60002B35EBA3502455244@mail.bal>
References: <A93344061C44D71199B60002B35EBA3502455244@mail.bal>
Message-ID: <bc607a4e0509130734150122d2@mail.gmail.com>

Try a snapshot from http://pts14043.pts.nl/antlr/

Also compile libary and project with the same compiler and compile options.

Cheers,

Ric
From c0123 at web.de  Tue Sep 13 08:50:12 2005
From: c0123 at web.de (Claudius Heitz)
Date: Tue Sep 13 08:50:18 2005
Subject: [antlr-interest] question concerning ANTLR java grammar (again)
Message-ID: <1049721309@web.de>


Hi,

Thanks for the answer.

> The ANTLR grammar is a parser for the java language not a full java
> front end (it lacks symbol tables, type-checking etc). 
> 
> You can use it to build a full front end that will catch this kind of error
> during it's type resolution/checking/binding phase.

I think, the expression   "java.lang.String;"
is probably already recognizable as a syntactic error.

But I suppose that it's much easier to recognize it with a full java front end.

So is there a free available full front end for the java language which does type resolution/checking/binding?

Thanks in advance!

Regards
Claudius


"Micheal J" <open.zone@virgin.net> schrieb am 10.09.05 14:07:17:
> 
> > Hi,
> > 
> > I used the current java grammar 
> > (http://www.antlr.org/grammar/1109874324096/ja> va1.5.zip) and 
> > noticed that it accepts code that isn't 
> > allowed in Java.
> > 
> > I show it on a small example:
> > 
> > public class E {
> > 	public static void main(String[] args) {
> > 		java.lang.String;
> > 		new ChildOfInner();
> > 	}
> > }
> > 
> > The wrong thing on that is the expression: java.lang.String;
> > 
> > Eclipse tells: "Syntax error.  Insert "AssignmentOperator 
> > ArrayInitializer" to complete expression"
> > 
> > Because Eclipse doesn't accept it,  I suppose this isn't 
> > legal java code. But the ANTLR java grammar accepts it as an 
> > expression.
> > 
> > Is this a bug?
> 
> No.
> 
> > If yes, is it already known?
> 
> Yes. The ANTLR grammar is a parser for the java language not a full java
> front end (it lacks symbol tables, type-checking etc). 
> 
> You can use it to build a full front end that will catch this kind of error
> during it's type resolution/checking/binding phase.
> 
> Micheal
> 


______________________________________________________________
Verschicken Sie romantische, coole und witzige Bilder per SMS!
Jetzt bei WEB.DE FreeMail: http://f.web.de/?mc=021193

From demakov at ispras.ru  Tue Sep 13 08:55:20 2005
From: demakov at ispras.ru (Alexey Demakov)
Date: Tue Sep 13 08:55:25 2005
Subject: [antlr-interest] question concerning ANTLR java grammar (again)
References: <1049721309@web.de>
Message-ID: <029f01c5b87b$8b7165c0$8cc79553@marlboro>

We're developing such Java front end, but semantics checking is not yet available.
It's open-source: https://sourceforge.net/project/showfiles.php?group_id=120633&package_id=156476

Regards,
Alexey

-----
Alexey Demakov
TreeDL: Tree Description Language: http://treedl.sourceforge.net
RedVerst Group: http://www.unitesk.com


----- Original Message ----- 
From: "Claudius Heitz" <c0123@web.de>
To: <antlr-interest@antlr.org>
Sent: Tuesday, September 13, 2005 7:50 PM
Subject: RE: [antlr-interest] question concerning ANTLR java grammar (again)


> 
> Hi,
> 
> Thanks for the answer.
> 
> > The ANTLR grammar is a parser for the java language not a full java
> > front end (it lacks symbol tables, type-checking etc). 
> > 
> > You can use it to build a full front end that will catch this kind of error
> > during it's type resolution/checking/binding phase.
> 
> I think, the expression   "java.lang.String;"
> is probably already recognizable as a syntactic error.
> 
> But I suppose that it's much easier to recognize it with a full java front end.
> 
> So is there a free available full front end for the java language which does type resolution/checking/binding?
> 
> Thanks in advance!
> 
> Regards
> Claudius
> 
> 
> "Micheal J" <open.zone@virgin.net> schrieb am 10.09.05 14:07:17:
> > 
> > > Hi,
> > > 
> > > I used the current java grammar 
> > > (http://www.antlr.org/grammar/1109874324096/ja> va1.5.zip) and 
> > > noticed that it accepts code that isn't 
> > > allowed in Java.
> > > 
> > > I show it on a small example:
> > > 
> > > public class E {
> > > public static void main(String[] args) {
> > > java.lang.String;
> > > new ChildOfInner();
> > > }
> > > }
> > > 
> > > The wrong thing on that is the expression: java.lang.String;
> > > 
> > > Eclipse tells: "Syntax error.  Insert "AssignmentOperator 
> > > ArrayInitializer" to complete expression"
> > > 
> > > Because Eclipse doesn't accept it,  I suppose this isn't 
> > > legal java code. But the ANTLR java grammar accepts it as an 
> > > expression.
> > > 
> > > Is this a bug?
> > 
> > No.
> > 
> > > If yes, is it already known?
> > 
> > Yes. The ANTLR grammar is a parser for the java language not a full java
> > front end (it lacks symbol tables, type-checking etc). 
> > 
> > You can use it to build a full front end that will catch this kind of error
> > during it's type resolution/checking/binding phase.
> > 
> > Micheal
> > 
> 
> 
> ______________________________________________________________
> Verschicken Sie romantische, coole und witzige Bilder per SMS!
> Jetzt bei WEB.DE FreeMail: http://f.web.de/?mc=021193
> 
From oliver.zeigermann at gmail.com  Tue Sep 13 09:56:24 2005
From: oliver.zeigermann at gmail.com (Oliver Zeigermann)
Date: Tue Sep 13 09:56:28 2005
Subject: [antlr-interest] ANTLR 3: Howto? / Multiple lexers feeding one
	parser / EOM
Message-ID: <9da4f45205091309561fe8a85a@mail.gmail.com>


From hdeshmane at montalvosystems.com  Tue Sep 13 15:11:27 2005
From: hdeshmane at montalvosystems.com (Harsh Deshmane)
Date: Tue Sep 13 15:12:05 2005
Subject: [antlr-interest] 2 questions
Message-ID: <200509131511.27710.hdeshmane@montalvosystems.com>

Hi,

I have two questions:
a. How do you search the archives of the mailing list ?
b. for the grammar, I need to specifically capture patterns that start from 
the first character of the line, how do I do that ?

for example, 

M43blah  xx yy zz

Here, the letter "M" in the first location is important.
Similarly for other key"letters" 
In regular expressions, it would be "^M" that I am looking for..

thanks for any help.
-harsh

From mail at martin-probst.com  Tue Sep 13 15:45:27 2005
From: mail at martin-probst.com (Martin Probst)
Date: Tue Sep 13 15:45:38 2005
Subject: [antlr-interest] 2 questions
In-Reply-To: <200509131511.27710.hdeshmane@montalvosystems.com>
References: <200509131511.27710.hdeshmane@montalvosystems.com>
Message-ID: <1126651527.15355.2.camel@localhost.localdomain>

Hi,
you can have your Lexer return a token on line endings, e.g.
LINEENDING:
  '\n';
and then just match that token in your rule. Or you can of course use
regular expressions ... ;-)

Not necessarily about this, but I really have the impression that many
people who are asking questions on this list would probably be better
off with some regular expressions ...

Martin

Am Dienstag, den 13.09.2005, 15:11 -0700 schrieb Harsh Deshmane:
> Hi,
> 
> I have two questions:
> a. How do you search the archives of the mailing list ?
> b. for the grammar, I need to specifically capture patterns that start from 
> the first character of the line, how do I do that ?
> 
> for example, 
> 
> M43blah  xx yy zz
> 
> Here, the letter "M" in the first location is important.
> Similarly for other key"letters" 
> In regular expressions, it would be "^M" that I am looking for..
> 
> thanks for any help.
> -harsh
> 
> 

From hdeshmane at montalvosystems.com  Tue Sep 13 15:51:24 2005
From: hdeshmane at montalvosystems.com (Harsh Deshmane)
Date: Tue Sep 13 15:52:00 2005
Subject: [antlr-interest] 2 questions
In-Reply-To: <1126651527.15355.2.camel@localhost.localdomain>
References: <200509131511.27710.hdeshmane@montalvosystems.com>
	<1126651527.15355.2.camel@localhost.localdomain>
Message-ID: <200509131551.24660.hdeshmane@montalvosystems.com>

Hi Martin,

thanks for the help.

-harsh
On Tuesday 13 September 2005 15:45, Martin Probst wrote:
> Hi,
> you can have your Lexer return a token on line endings, e.g.
> LINEENDING:
>   '\n';
> and then just match that token in your rule. Or you can of course use
> regular expressions ... ;-)
>
> Not necessarily about this, but I really have the impression that many
> people who are asking questions on this list would probably be better
> off with some regular expressions ...
>
> Martin
>
> Am Dienstag, den 13.09.2005, 15:11 -0700 schrieb Harsh Deshmane:
> > Hi,
> >
> > I have two questions:
> > a. How do you search the archives of the mailing list ?
> > b. for the grammar, I need to specifically capture patterns that start
> > from the first character of the line, how do I do that ?
> >
> > for example,
> >
> > M43blah  xx yy zz
> >
> > Here, the letter "M" in the first location is important.
> > Similarly for other key"letters"
> > In regular expressions, it would be "^M" that I am looking for..
> >
> > thanks for any help.
> > -harsh
From demakov at ispras.ru  Wed Sep 14 00:11:54 2005
From: demakov at ispras.ru (Alexey Demakov)
Date: Wed Sep 14 00:11:59 2005
Subject: [antlr-interest] 2 questions
References: <200509131511.27710.hdeshmane@montalvosystems.com>
Message-ID: <006f01c5b8fb$967095b0$8cc79553@marlboro>

b. You can check current column position in lexer rule:

START_LINE_TOKEN : { getColumn() == 1 }? "M43blah" ;

Regards,
Alexey

-----
Alexey Demakov
TreeDL: Tree Description Language: http://treedl.sourceforge.net
RedVerst Group: http://www.unitesk.com

----- Original Message ----- 
From: "Harsh Deshmane" <hdeshmane@montalvosystems.com>
To: <antlr-interest@antlr.org>
Sent: Wednesday, September 14, 2005 2:11 AM
Subject: [antlr-interest] 2 questions


> Hi,
> 
> I have two questions:
> a. How do you search the archives of the mailing list ?
> b. for the grammar, I need to specifically capture patterns that start from 
> the first character of the line, how do I do that ?
> 
> for example, 
> 
> M43blah  xx yy zz
> 
> Here, the letter "M" in the first location is important.
> Similarly for other key"letters" 
> In regular expressions, it would be "^M" that I am looking for..
> 
> thanks for any help.
> -harsh
> 
From oliver.schalch at wyona.com  Wed Sep 14 08:31:47 2005
From: oliver.schalch at wyona.com (Oliver Schalch)
Date: Wed Sep 14 08:31:55 2005
Subject: [antlr-interest] wiki syntax
Message-ID: <43284263.3070902@wyona.com>

Hi all,

I'm looking for a wikisyntax example, like we know it all with this 
tokes !,!!,*..., does anybody already made something in that direction 
or any examples? I'm quite new to Antlr and still a bit confused :)

Thanks



-- 
Oliver Schalch                           oliver.schalch@wyona.com
Wyona Inc.  -   Open Source Content Management   -   Apache Lenya
http://www.wyona.com                      http://lenya.apache.org
-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/x-pkcs7-signature
Size: 3484 bytes
Desc: S/MIME Cryptographic Signature
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20050914/6b100109/smime.bin
From mjl at nova.edu  Wed Sep 14 11:45:43 2005
From: mjl at nova.edu (Michael Laszlo)
Date: Wed Sep 14 11:42:44 2005
Subject: [antlr-interest] avoiding nondeterminism warning
Message-ID: <012b01c5b95c$87875410$3d373489@GSCIS.NOVA.EDU>

In my parser class I include a literal in the token section:

tokens {
    VAR="var";
}

Also, my lexer includes the rule:

ID:  LETTER (LETTER|DIGIT)* 

and antlr.Tool runs without warning as expected. Fine.

However, now I want to perform an action whenever VAR is scanned so I add this rule to my lexer:

VAR: "var" { inVarDefinition = true; };

This time, antlr.Tool warns about nondeterminism between ID and VAR. I understand the reason for the warning, and the resulting program still works (VAR is matched in preference to ID). But is there a clean way to associate actions with literals while avoiding the nondeterminism warning?

Thanks, Michael
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20050914/38626922/attachment.html
From parrt at cs.usfca.edu  Wed Sep 14 12:05:51 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Wed Sep 14 12:05:54 2005
Subject: [antlr-interest] wiki syntax
In-Reply-To: <43284263.3070902@wyona.com>
References: <43284263.3070902@wyona.com>
Message-ID: <26835783-D681-44E6-8F53-C31E577BD3E6@cs.usfca.edu>


On Sep 14, 2005, at 8:31 AM, Oliver Schalch wrote:

> Hi all,
>
> I'm looking for a wikisyntax example, like we know it all with this  
> tokes !,!!,*..., does anybody already made something in that  
> direction or any examples? I'm quite new to Antlr and still a bit  
> confused :)

Hi Oliver,

I have TML == Terence's Markup Language

http://www.antlr.org/TML/index.tml

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com

From parrt at cs.usfca.edu  Wed Sep 14 12:06:33 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Wed Sep 14 12:06:37 2005
Subject: [antlr-interest] avoiding nondeterminism warning
In-Reply-To: <012b01c5b95c$87875410$3d373489@GSCIS.NOVA.EDU>
References: <012b01c5b95c$87875410$3d373489@GSCIS.NOVA.EDU>
Message-ID: <722588DB-0334-4CD3-AF71-1C2259558817@cs.usfca.edu>


On Sep 14, 2005, at 11:45 AM, Michael Laszlo wrote:

> In my parser class I include a literal in the token section:
>
> tokens {
>     VAR="var";
> }
>
> Also, my lexer includes the rule:
>
> ID:  LETTER (LETTER|DIGIT)*
>
> and antlr.Tool runs without warning as expected. Fine.
>
> However, now I want to perform an action whenever VAR is scanned so  
> I add this rule to my lexer:
>
> VAR: "var" { inVarDefinition = true; };

Instead, add the action in ID with an IF in front to check to see if  
it's "var". :)

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com

From parrt at cs.usfca.edu  Wed Sep 14 12:07:21 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Wed Sep 14 12:07:24 2005
Subject: [antlr-interest] I can see the light at the end of the tunnel
Message-ID: <B1FD4B7C-9679-4ACC-BFC4-17E79580FCC7@cs.usfca.edu>

Howdy,

I'm hopefully coming out of the huge work phase at the start of the  
semester...now I need to start preparing for the ANTLR2005 workshop  
(late October), but that means I will be doing some antlr stuff :)

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com

From dragonoe at mcmaster.ca  Wed Sep 14 12:53:13 2005
From: dragonoe at mcmaster.ca (Olivier Dragon)
Date: Wed Sep 14 14:01:39 2005
Subject: [antlr-interest] Non-reserved keywords (again)
In-Reply-To: <42FA12B7.2080504@codetransform.com>
References: <20050810131516.GA4145@dragon.homelinux.org>
	<42FA12B7.2080504@codetransform.com>
Message-ID: <20050914195313.GA19067@dragon.homelinux.org>

On Wed, Aug 10, 2005 at 07:44:07AM -0700, Monty Zukowski wrote:
> Olivier Dragon wrote:
> > I have search long and far to see if anyone had had the same problem I'm
> > having with a language that does not reserve keywords, like SQL and in
> > my case Fortran. I have found many people with the problem, yet no
> > useful solutions. The two main ones I found were
> > 
> > http://www.jguru.com/faq/view.jsp?EID=140
> > and
> > http://www.antlr.org/pipermail/antlr-interest/2002-June/001486.html
> > I have no idea how to execute the first one, that is create a custom
> > token class and have ANTLR actually use it.
> 
> Search through the example code, there should be one that does this.  If
> not, I know the C parser does.
>
> You may also get some mileage out of my parser filter approach.  See
> http://www.codetransform.com/filterexample.html

I found the examples you were talking about, but I think my problem is
much larger than that. The first link above and your parser filter
approach won't work. The problem with the first one is that I have many
rules that start with an identifier, which means I end up with the same
hoistering problem as using a wrapper rule.

No matter what I do I end up with a very large number of non-determinism
problems, which can't be resolved simply.

I thought of not testing literals in my identifier lexer rule, and then
for each NAME (my ID rule) have a syntactic predicate to check if the
text of the NAME token is the one I want. But this causes the same
non-determinism issues as having a keyword rule as mentioned in the
second link above.

The only way for me to fix this problem "The Right Way(tm)" would be to
use Martin's proposition of a stateful lexer... but I hate to think
about this one :o)

Right now I'm making the assumption on input that the code was written
"sanely" without using reserved keywords as identifiers. The only
problem I've encountered so far is the FORTRAN intrinsic function REAL()
which clashes with the type specification REAL for floating points. To
fix this I added a parser rule that was (NAME | "real"). It would be
nice however to be able to resolve this issue entirely without
exceptions.

> ANTLR 3 will be way easier dealing with unreserved keywords.  I doubt if
> the latest preview is stable enough for real use yet.

I don't need production stability, and Terence seems relatively fast at
correcting bugs. I'm using ANTLR for my master's research project. What
would be an issue for me is to have to completely redo a lot of the work
I've done so far (grammar, tree parser, and a fair amount of tree
transformation Java code). Another showstopper is the ANTLRv3
documentation which appears to be scarce... There are some of Terence's
notes in the wiki but nothing substantial, interspersed with a lot of
thinking and design speculations.

If ANTLRv3 does indeed makes this simple and it's not too much work for
me to port my grammars then I may consider it.

Thanks for your help!

-Olivier

-- 
          __-/|    ? ?     |\-__
     __--/  /  \   (^^)   /  \  \--__
  _-/   /   /  /\ / ( )  /\  \   \   \-_
 /  /   /  /  /  (   ^^ ~  \  \  \   \  \
 / Oli Dragon    ( dragonoe@mcmaster.ca \
/  B.Eng. Sfwr   (     )    \    \  \    \
/  /  /    /__--_ (   ) __--__\    \  \  \
|  /  /  _/        \_ \_       \_  \  \  |
 \/  / _/            \_ \_       \_ \  \/
  \_/ /                -\_\        \ \_/
    \/                    )         \/
                        *~
        ___--<***************>--___
       [http://dragon.homelinux.org]
        ~~~--<***************>--~~~
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 189 bytes
Desc: Digital signature
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20050914/bee642e9/attachment.bin
From j_f_oleary at yahoo.com  Wed Sep 14 15:09:10 2005
From: j_f_oleary at yahoo.com (Jay O'Leary)
Date: Wed Sep 14 15:09:13 2005
Subject: [antlr-interest] non-determinism error
Message-ID: <20050914220910.57659.qmail@web50904.mail.yahoo.com>

Hello:
 
I'm new to ANTLR and I'm trying to construct a very simple grammar that can parse a string in the form "A / B C /D" to produce a boolean query.  The twist is that if A,B, C, or D is in the form <city>,<stateabbrev>  (eg: orlando, FL)  I have to handle that specially.
 
I'm starting with a very simple lexer to handle WORDS, COMMAS, AND SLASH and a very simple parser which will print out the tokens.
 
However, when I compile the grammar file, I get the error:
foo.g:3: warning:nondeterminism between alts 1 and 2 of block upon
foo.g:3:     k==1:"FL",WORD
 
I have tried various predicates to work around the conflict to no avail.
 
Also, if I have a string such as "a b / c d / e" the whole string is parsed.
However, as soon as I add a state abbreviation such as "a b / FL c d / e" everything after and including the state abbreviation seems to get swallowed up.
 
I realize this is a "newbie" question but if anyone could point me in the right direction, I would greatly appreciate it. 
 
Thanks,
Jay
 
GRAMMAR FILE BEGINS HERE:
=========================
class P extends Parser; 
expr 
     : subexpr (slash subexpr)* 
     | subexpr
     ; 
subexpr
     : word (word)* {System.out.println("in subexpr");}
     | subexpr2
     ;
subexpr2
     : stateabbrev
     ;
stateabbrev
     : "FL" {System.out.println("in state abbrev");}
     ;
word 
     : w:WORD {System.out.println("token: "+w.getText());}
        ;
slash
    : s:SLASH {System.out.println("slash: "+s.getText());}
    ;

class L extends Lexer; 
options {
 k=2;
}

SLASH: ('/');
WORD
    : ( 'a'..'z' | 'A'..'Z' | '0'..'9' | '\'' | '-')+ 
    ; 
COMMA: ( ',')
     ;
// whitespace 
WS : (
     ' '
     | '\t' 
     | '\r' '\n' { newline(); } 
     | '\n' { newline(); } ) 
     {$setType(Token.SKIP);} //ignore this token 
    ; 
 

		
---------------------------------
Yahoo! for Good
 Click here to donate to the Hurricane Katrina relief effort. 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20050914/ed0c5f29/attachment.html
From oliver.schalch at wyona.com  Wed Sep 14 15:28:52 2005
From: oliver.schalch at wyona.com (Oliver Schalch)
Date: Wed Sep 14 15:28:57 2005
Subject: [antlr-interest] wiki syntax
In-Reply-To: <26835783-D681-44E6-8F53-C31E577BD3E6@cs.usfca.edu>
References: <43284263.3070902@wyona.com>
	<26835783-D681-44E6-8F53-C31E577BD3E6@cs.usfca.edu>
Message-ID: <4328A424.3030407@wyona.com>

Terence Parr said the following on 14.09.2005 21:05:

 >
 > On Sep 14, 2005, at 8:31 AM, Oliver Schalch wrote:
 >
 >> Hi all,
 >>
 >> I'm looking for a wikisyntax example, like we know it all with this 
  tokes !,!!,*..., does anybody already made something in that 
direction or any examples? I'm quite new to Antlr and still a bit 
confused :)
 >
 >
 >
 > Hi Oliver,
 >
 > I have TML == Terence's Markup Language
 >
 > http://www.antlr.org/TML/index.tml


Thanks, I just saw it after I send that Mail :/.
I'll look tomorrow at it, maybe its *just* what I'm looking for...

But I guess I have to rewrite it, that it generates XML...


Greets
Oli
-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/x-pkcs7-signature
Size: 3484 bytes
Desc: S/MIME Cryptographic Signature
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20050915/b4995f63/smime.bin
From dragonoe at mcmaster.ca  Wed Sep 14 15:44:39 2005
From: dragonoe at mcmaster.ca (Olivier Dragon)
Date: Wed Sep 14 15:41:29 2005
Subject: [antlr-interest] Performing an action based on alternative result
Message-ID: <20050914224439.GA19664@dragon.homelinux.org>

Hi,

I'd like to be able to define a single label for many alternatives and
then use the result in an action. Something like this:

foobar :
(
	t:"function" |
	t:"subroutine" |
	t:"program"
)
{ doSomethingWith(t) ; }

But ANTLR gives me an error "Label 't' has already been defined". Is
there an easy way to do this so that I don't have to specify different
label for each alternative and the same action for each as well?

Thanks,

-Olivier

-- 
          __-/|    ? ?     |\-__
     __--/  /  \   (^^)   /  \  \--__
  _-/   /   /  /\ / ( )  /\  \   \   \-_
 /  /   /  /  /  (   ^^ ~  \  \  \   \  \
 / Oli Dragon    ( dragonoe@mcmaster.ca \
/  B.Eng. Sfwr   (     )    \    \  \    \
/  /  /    /__--_ (   ) __--__\    \  \  \
|  /  /  _/        \_ \_       \_  \  \  |
 \/  / _/            \_ \_       \_ \  \/
  \_/ /                -\_\        \ \_/
    \/                    )         \/
                        *~
        ___--<***************>--___
       [http://dragon.homelinux.org]
        ~~~--<***************>--~~~
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 189 bytes
Desc: Digital signature
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20050914/3a1954c8/attachment-0001.bin
From gevik at xs4all.nl  Wed Sep 14 15:44:23 2005
From: gevik at xs4all.nl (Gevik babakhani)
Date: Wed Sep 14 15:44:24 2005
Subject: [antlr-interest] newbe question about ANTLR
Message-ID: <200509142244.j8EMiK9n039019@smtp-vbr3.xs4all.nl>

Dear All,

 

Sorry to bother you about this.

I would like to learn to create a grammar file to parse an INI file like:

 

[section]

Key=value

 

This would be is my first ANTRL learning project. Is anyone interested to
assist me?

 

Regards,

Gevik.

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20050915/2a17246f/attachment.html
From mail at martin-probst.com  Wed Sep 14 23:32:14 2005
From: mail at martin-probst.com (Martin Probst)
Date: Wed Sep 14 23:32:19 2005
Subject: [antlr-interest] Performing an action based on alternative result
In-Reply-To: <20050914224439.GA19664@dragon.homelinux.org>
References: <20050914224439.GA19664@dragon.homelinux.org>
Message-ID: <1126765934.6572.2.camel@localhost.localdomain>

Hi,

> foobar :
> (
> 	t:"function" |
> 	t:"subroutine" |
> 	t:"program"
> )
> { doSomethingWith(t) ; }
> 
> But ANTLR gives me an error "Label 't' has already been defined". Is
> there an easy way to do this so that I don't have to specify different
> label for each alternative and the same action for each as well?

Not as far as I know. The standard way of doing this is:

foobar { AST t = null }:
	t1:"function" { t = t1; } |
	t2:"subroutine" { t = t2; } |
	...

Albeit the ability to re-declare AST identifiers would be nice to have,
this is a very common annoyance. It can also help you avoid nasty errors
though ...

Martin

From demakov at ispras.ru  Wed Sep 14 23:33:07 2005
From: demakov at ispras.ru (Alexey Demakov)
Date: Wed Sep 14 23:33:13 2005
Subject: [antlr-interest] non-determinism error
References: <20050914220910.57659.qmail@web50904.mail.yahoo.com>
Message-ID: <008101c5b9bf$55b40380$8cc79553@marlboro>

Hi,

rule

expr : subexpr (slash subexpr)* 
     | subexpr
     ; 

is ambigious because both alternatives start with the same non-terminal.
So, ANTLR can't decide which one should be used. Try to extract common parts
of alternatives to the front of alternative:

expr : subexpr rule1 | subexpr rules2 ; 

becomes

expr : subexpr ( rule1 | rule2 ) ;

Moreover, in this case the empty sequence can be matched by both alternatives again
because * means zero or more. So, the second alternative is excessive.
Th? correct rule:

expr : subexpr (slash subexpr)* ;

Regards,
Alexey

-----
Alexey Demakov
TreeDL: Tree Description Language: http://treedl.sourceforge.net
RedVerst Group: http://www.unitesk.com

 
  ----- Original Message ----- 
  From: Jay O'Leary 
  To: antlr-interest@antlr.org 
  Sent: Thursday, September 15, 2005 2:09 AM
  Subject: [antlr-interest] non-determinism error


  Hello:

  I'm new to ANTLR and I'm trying to construct a very simple grammar that can parse a string in the form "A / B C /D" to produce a boolean query.  The twist is that if A,B, C, or D is in the form <city>,<stateabbrev>  (eg: orlando, FL)  I have to handle that specially.

  I'm starting with a very simple lexer to handle WORDS, COMMAS, AND SLASH and a very simple parser which will print out the tokens.

  However, when I compile the grammar file, I get the error:
  foo.g:3: warning:nondeterminism between alts 1 and 2 of block upon
  foo.g:3:     k==1:"FL",WORD

  I have tried various predicates to work around the conflict to no avail.

  Also, if I have a string such as "a b / c d / e" the whole string is parsed.
  However, as soon as I add a state abbreviation such as "a b / FL c d / e" everything after and including the state abbreviation seems to get swallowed up.

  I realize this is a "newbie" question but if anyone could point me in the right direction, I would greatly appreciate it. 

  Thanks,
  Jay
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20050915/4d2a435e/attachment.html
From demakov at ispras.ru  Wed Sep 14 23:37:52 2005
From: demakov at ispras.ru (Alexey Demakov)
Date: Wed Sep 14 23:37:57 2005
Subject: [antlr-interest] Performing an action based on alternative result
References: <20050914224439.GA19664@dragon.homelinux.org>
Message-ID: <00ac01c5b9bf$ff4e70b0$8cc79553@marlboro>

Hi,

Once again :)

foobar 
{ Token t = null; }
:
{ t = LT(1); }
(
 "function" |
 "subroutine" |
 "program"
)
{ doSomethingWith(t) ; }

LT(k) returns k-th next token.

Regards,
Alexey

-----
Alexey Demakov
TreeDL: Tree Description Language: http://treedl.sourceforge.net
RedVerst Group: http://www.unitesk.com


----- Original Message ----- 
From: "Olivier Dragon" <dragonoe@mcmaster.ca>
To: "ANTLR Interest" <antlr-interest@antlr.org>
Sent: Thursday, September 15, 2005 2:44 AM
Subject: [antlr-interest] Performing an action based on alternative result

Hi,

I'd like to be able to define a single label for many alternatives and
then use the result in an action. Something like this:

foobar :
(
 t:"function" |
 t:"subroutine" |
 t:"program"
)
{ doSomethingWith(t) ; }

But ANTLR gives me an error "Label 't' has already been defined". Is
there an easy way to do this so that I don't have to specify different
label for each alternative and the same action for each as well?

Thanks,

-Olivier

From oliver.schalch at wyona.com  Wed Sep 14 23:59:31 2005
From: oliver.schalch at wyona.com (Oliver Schalch)
Date: Wed Sep 14 23:59:39 2005
Subject: [antlr-interest] TML
Message-ID: <43291BD3.5090103@wyona.com>

Hiho,

It seems that the tml-0.1.tar.gz on the antlr website is missing:
http://www.antlr.org/download/tml-0.1.tar.gz doesent work for me.
Any could email or send a alternative link where I can download it?

Thanks
Oliver



-- 
Oliver Schalch                           oliver.schalch@wyona.com
Wyona Inc.  -   Open Source Content Management   -   Apache Lenya
http://www.wyona.com                      http://lenya.apache.org
-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/x-pkcs7-signature
Size: 3484 bytes
Desc: S/MIME Cryptographic Signature
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20050915/fce34ffe/smime.bin
From oliver.zeigermann at gmail.com  Thu Sep 15 02:12:03 2005
From: oliver.zeigermann at gmail.com (Oliver Zeigermann)
Date: Thu Sep 15 02:12:10 2005
Subject: [antlr-interest] TML
In-Reply-To: <43291BD3.5090103@wyona.com>
References: <43291BD3.5090103@wyona.com>
Message-ID: <9da4f4520509150212569d2454@mail.gmail.com>

It works for me...

Oliver

2005/9/15, Oliver Schalch <oliver.schalch@wyona.com>:
> Hiho,
> 
> It seems that the tml-0.1.tar.gz on the antlr website is missing:
> http://www.antlr.org/download/tml-0.1.tar.gz doesent work for me.
> Any could email or send a alternative link where I can download it?
> 
> Thanks
> Oliver
> 
> 
> 
> --
> Oliver Schalch                           oliver.schalch@wyona.com
> Wyona Inc.  -   Open Source Content Management   -   Apache Lenya
> http://www.wyona.com                      http://lenya.apache.org
> 
> 
>
From oliver.schalch at wyona.com  Thu Sep 15 04:33:49 2005
From: oliver.schalch at wyona.com (Oliver Schalch)
Date: Thu Sep 15 04:34:02 2005
Subject: [antlr-interest] TML
In-Reply-To: <9da4f4520509150212569d2454@mail.gmail.com>
References: <43291BD3.5090103@wyona.com>
	<9da4f4520509150212569d2454@mail.gmail.com>
Message-ID: <43295C1D.8090700@wyona.com>

Oliver Zeigermann said the following on 15.09.2005 11:12:
> It works for me...

Strange, with crappy Internet Explorer it works,
I guess my Firefox is sick :(

Cheers
Oli

-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/x-pkcs7-signature
Size: 3484 bytes
Desc: S/MIME Cryptographic Signature
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20050915/cbe48a0f/smime-0001.bin
From dcaton at shorelinesoftware.com  Thu Sep 15 05:54:16 2005
From: dcaton at shorelinesoftware.com (Don Caton)
Date: Thu Sep 15 05:54:41 2005
Subject: [antlr-interest] Performing an action based on alternative result
In-Reply-To: <20050914224439.GA19664@dragon.homelinux.org>
Message-ID: <1126789374.15141@mx9.mysite4now.com>

Olivier:

In addition to the other answers you received, I think that creating another
rule is often the simplest way to do this, especially when rules begin to
get complicated.

  foobar
     : t:foobar2
  { doSomethingWith( t ); };

  foobar2
     : "function" | "subroutine" | "program"
     ;

Don  

> -----Original Message-----
> From: antlr-interest-bounces@antlr.org 
> [mailto:antlr-interest-bounces@antlr.org] On Behalf Of Olivier Dragon
> Sent: Wednesday, September 14, 2005 6:45 PM
> To: ANTLR Interest
> Subject: [antlr-interest] Performing an action based on 
> alternative result
> 
> Hi,
> 
> I'd like to be able to define a single label for many 
> alternatives and then use the result in an action. Something 
> like this:
> 
> foobar :
> (
> 	t:"function" |
> 	t:"subroutine" |
> 	t:"program"
> )
> { doSomethingWith(t) ; }
> 
> But ANTLR gives me an error "Label 't' has already been 
> defined". Is there an easy way to do this so that I don't 
> have to specify different label for each alternative and the 
> same action for each as well?
> 
> Thanks,
> 
> -Olivier


From mjl at nova.edu  Thu Sep 15 08:39:19 2005
From: mjl at nova.edu (Michael Laszlo)
Date: Thu Sep 15 08:36:33 2005
Subject: [antlr-interest] manual tree construction
Message-ID: <003d01c5ba0b$afd44d60$3d373489@GSCIS.NOVA.EDU>

My parser includes the rules below for declarations that look like this:
    var a = 2, b = 3+4;


decl_statement SEMI!
 : "var"! ID DEC_ASSIGN^ expr (DEC_COMMA^ var_decl)*
 ;
 
var_decl!     // construct these subtrees manually
 : ID DEC_ASSIGN expr { #var_decl = #(DEC_ASSIGN ID expr); }
 ;

antlr.Tool gives me this error message:
ANTLR Parser Generator   Version 2.7.5 (20050128)   1989-2005 jGuru.com
calc.g:35:27: Syntax error in action: calc.g:35:27: expecting ')', found 'I'
Exiting due to errors.

This error message flags the second reference to ID in the var_decl rule. The documentation (ANTLR Tree Construction) suggests that this should work.

I'm using heterogeneous trees, and am basically trying to construct a tree that looks like this:
#(DEC_COMMA #(DEC_ASSIGN ID expr) #(DEC_ASSIGN ID expr)). Here DEC_COMMA serves as the backbone for the subtrees for the variable bindings.

Any thoughts? Thanks, Michael


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20050915/d2a19d03/attachment.html
From madcapmaggie at yahoo.com  Thu Sep 15 08:47:11 2005
From: madcapmaggie at yahoo.com (Peggy Fieland)
Date: Thu Sep 15 08:47:16 2005
Subject: [antlr-interest] TML
In-Reply-To: <43295C1D.8090700@wyona.com>
Message-ID: <20050915154711.44487.qmail@web30213.mail.mud.yahoo.com>

I'm using Firefox (on LINUX) and the link works fine
for me.

--- Oliver Schalch <oliver.schalch@wyona.com> wrote:

> Oliver Zeigermann said the following on 15.09.2005
> 11:12:
> > It works for me...
> 
> Strange, with crappy Internet Explorer it works,
> I guess my Firefox is sick :(
> 
> Cheers
> Oli
> 
> 

From monty at codetransform.com  Thu Sep 15 08:56:51 2005
From: monty at codetransform.com (Monty Zukowski)
Date: Thu Sep 15 08:56:57 2005
Subject: [antlr-interest] manual tree construction
In-Reply-To: <003d01c5ba0b$afd44d60$3d373489@GSCIS.NOVA.EDU>
References: <003d01c5ba0b$afd44d60$3d373489@GSCIS.NOVA.EDU>
Message-ID: <7C3607B9-D918-4208-810C-3353EC25CFD7@codetransform.com>


On Sep 15, 2005, at 8:39 AM, Michael Laszlo wrote:

> My parser includes the rules below for declarations that look like  
> this:
>     var a = 2, b = 3+4;
>
>
> decl_statement SEMI!
>  : "var"! ID DEC_ASSIGN^ expr (DEC_COMMA^ var_decl)*
>  ;
>
> var_decl!     // construct these subtrees manually
>  : ID DEC_ASSIGN expr { #var_decl = #(DEC_ASSIGN ID expr); }
>  ;
>
> antlr.Tool gives me this error message:
> ANTLR Parser Generator   Version 2.7.5 (20050128)   1989-2005  
> jGuru.com
> calc.g:35:27: Syntax error in action: calc.g:35:27: expecting ')',  
> found 'I'
> Exiting due to errors.
> This error message flags the second reference to ID in the var_decl  
> rule. The documentation (ANTLR Tree Construction) suggests that  
> this should work.
>
> I'm using heterogeneous trees, and am basically trying to construct  
> a tree that looks like this:
> #(DEC_COMMA #(DEC_ASSIGN ID expr) #(DEC_ASSIGN ID expr)). Here  
> DEC_COMMA serves as the backbone for the subtrees for the variable  
> bindings.
>

Use labels.  When you use #(TOKEN ...) ANTLR thinks you are building  
a node, not a tree.

i:ID d:DEC_ASSIGN expr { #var_decl = #(i d expr); }


Monty
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20050915/bb229d89/attachment.html
From dzubi at users.sourceforge.net  Thu Sep 15 10:11:56 2005
From: dzubi at users.sourceforge.net (Daniel Zuberbuehler)
Date: Thu Sep 15 10:12:00 2005
Subject: [antlr-interest] Lexer problem: distinguish between TIC and
	CHAR_LITERAL
In-Reply-To: <1126619096.16819.13.camel@localhost.localdomain>
References: <330b703961add04c822492580a8af3db@zubinet.org>
	<1126619096.16819.13.camel@localhost.localdomain>
Message-ID: <200509151911.56664.dzubi@users.sourceforge.net>

Hi

thanks for your answer.
The concerning language is Ada95. There must be a way to correctly identify 
the tics/character literals, or else how would the Ada compilers work?

Is the following possible with AntLR?
If the Lexer finds a tic, it checks if the previews token was an identifier 
token. If so, it must be a TIC token, it can't be the beginning of a 
character literal.
I have not the slightest idea how to implement that :(

Daniel


On Tuesday 13 September 2005 15:44, you wrote:
> Hi,
>
> > The character literal is defined as two tics with one character in
> > between.
> > To decide if a tic is a TIC or the beginning of a CHARACTER_LITERAL,
> > we check if at LA(3) follows another tic or not.
>
> If this is the definition of your language, then this is (IMHO) just a
> case of the language being ambiguous. How should the parser/lexer tell
> what the user wants? In this case it's quite obvious (one case giving an
> error, another one not), but I think that you might find places where
> it's not that easy.
>
> > new String'('b' & Second_Char);
>
> If there is a certain restriction on where tics may occur and where they
> are disallowed, then you can probably write a stateful lexer working
> around the problem. But the much nicer solution would of course be a
> more sound definition of the lexical structure, avoiding these
> ambiguities.
>
> Martin
From mjl at nova.edu  Thu Sep 15 11:08:56 2005
From: mjl at nova.edu (Michael Laszlo)
Date: Thu Sep 15 11:05:57 2005
Subject: [antlr-interest] manual tree construction
Message-ID: <005a01c5ba20$8e2311f0$3d373489@GSCIS.NOVA.EDU>

Still fails for the same reason: expecting ')', found 'd'. Also note that antlr supports the use of unlabeled token references if the token is unique within the scope of the alternative.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20050915/a59f4fef/attachment.html
From monty at codetransform.com  Thu Sep 15 13:06:11 2005
From: monty at codetransform.com (Monty Zukowski)
Date: Thu Sep 15 13:06:53 2005
Subject: [antlr-interest] manual tree construction
In-Reply-To: <005a01c5ba20$8e2311f0$3d373489@GSCIS.NOVA.EDU>
References: <005a01c5ba20$8e2311f0$3d373489@GSCIS.NOVA.EDU>
Message-ID: <4329D433.3040003@codetransform.com>

Michael Laszlo wrote:
> Still fails for the same reason: expecting ')', found 'd'. Also note
> that antlr supports the use of unlabeled token references if the token
> is unique within the scope of the alternative.

Ack, I've been away too long.  You need commas, eg:

#( #[LITERAL_for, "for"], #e1, #e2, #e3, #s );

Cheers,

Monty
From parrt at cs.usfca.edu  Thu Sep 15 18:17:21 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Thu Sep 15 18:17:24 2005
Subject: [antlr-interest] ANTLR2005 workshop reminder
Message-ID: <E7004FB3-D793-4E3A-B67F-83D8A0BB4DB9@cs.usfca.edu>

Howdy,

Just a reminder that the ANTLR workshop is coming up next month;  
hosted at BEA Systems downtown San Francisco Oct 20-21, 2005:

http://www.cs.usfca.edu/ANTLR2005.shtml

We still have a few slots if people want to come :)

Regards,
Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com

From ncuomo at gmail.com  Thu Sep 15 18:18:57 2005
From: ncuomo at gmail.com (Nicola Cuomo)
Date: Thu Sep 15 18:19:50 2005
Subject: [antlr-interest] Problem with an underline and semantic action
Message-ID: <9165062.20050916031857@gmail.com>

Hi,
   I'm a antlr newby trying to make a translator.

After  reading  the  manual  and looking at the examples on the site i
still have a lot of problem/question.

So let's start :)

First problem

I've this grammar:

-------------------------------------------------------------------
options
{
        language = "Cpp";
}

class TestParser extends Parser;

options 
{
        buildAST = false;
        k = 3;
}

spec
        : UNDERLINE CONST_IDENT
        ;


class TestLexer extends Lexer;

options 
{
        charVocabulary='\u0000'..'\u00ff';
        k = 3;                  
}

tokens
{
        UNDERLINE               = "under_line";
}

/* Whitespaces */
WS
  : ( ' '
    | '\t'
    | '\f'

    // handle newlines
    | ( "\r\n"  // DOS/Windows
        | '\r'    // Macintosh
        | '\n'    // Unix
                        )
      { newline(); }
    )
    { $setType(antlr::Token::SKIP); }
  ;

COMMENT
  : "%" (~('\n'|'\r'))*
    { $setType(antlr::Token::SKIP); }
  ;
  
CONST_IDENT
  options { testLiterals=true; }
        : ('a'..'z') ('a'..'z'|'A'..'Z'|'0'..'9')*
        ;
-------------------------------------------------------------------

It's a test that should parse something like "under_line a123123"

When i execute the program i get

$ ./main
under_line a123123
line 1:1: expecting "under_line", found 'under'
Parse exception: line 1:6: unexpected char: '_'

It  seem  to stop looking for char when it hit the underline returning
the  "under"  token  and  breaking  the parse. My first thought was to
extend the charVocabulary but i've no clue on how to do it.

charVocabulary='\u0000'..'\u00ff';  shouldn't  already include all the
ascii character??

charVocabulary='\u0000'..'\ufffe';  like  someone suggested on this ml
for  a similar problem doesn't work in Cpp mode "warning: underline.g:
Vocabularies  of  this  size  still  experimental in C++ mode" and the
following compilation fail.

The "Second problem" is about semantic action:

I've the following grammar piece
-----
formula
        : expression (EQUAL|LESST) expression
        ;
expression
        : CONST_IDENT
        | VAR_IDENT (PRIME)?
         ... and so on ...
        ;
-----

I  would  like  to  get all the string that match the first expression
rule in formula.

I've written something like:

-----
formula
        : exp:expression (EQUAL|LESST) expression { std::cout << exp->getText() << std::endl; }
        ;
expression
        : CONST_IDENT
        | VAR_IDENT (PRIME)?
        ... and so on ...
        ;
-----

But the compilation fail saying that no exp is defined. From what i've
seen  it seem to work with terminal token like EQUAL.
There's a way to get all the text of a matching rule without having to
build it from the "subexpression"?

Sorry for my english :)

Thanks for the answer :P
-- 
 Nicola                          mailto:ncuomo@gmail.com

From parrt at cs.usfca.edu  Thu Sep 15 18:33:26 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Thu Sep 15 18:33:31 2005
Subject: [antlr-interest] ANTLR 3: Problem with static DFA class generation
In-Reply-To: <9da4f452050912034161736a7f@mail.gmail.com>
References: <9da4f45205090909127d862fbc@mail.gmail.com>
	<AE756421-BC60-47EF-BA22-C6403686D6F9@cs.usfca.edu>
	<9da4f452050910151623ce405f@mail.gmail.com>
	<1E87C0F7-1780-4B16-B4FC-2D2AFB89EDE6@cs.usfca.edu>
	<9da4f45205091203045523c71c@mail.gmail.com>
	<9da4f452050912034161736a7f@mail.gmail.com>
Message-ID: <9FD7E6BF-DE9F-4239-86F7-D91AC5A25FF7@cs.usfca.edu>

On Sep 12, 2005, at 3:41 AM, Oliver Zeigermann wrote:

> The attached patch for Java.stg (org/antlr/codegen/templates/) will
> make the below lexer fragment work:
>
> lexer grammar XMLLexer;
> {
>    boolean tagMode = false;
> }
>
> TAG_START_OPEN : { !tagMode }? '<' { tagMode = true; } ;
> TAG_END_OPEN : { !tagMode }? "</" { tagMode = true; } ;

Your example appears right and I can't remember why I left as  
static.  I will try your trick out and run all my unit tests to see  
what happens.

I'd like the jury to note, however, that to change everything all you  
had to do was alter the templates.  No code.  Hooray!  The dream is  
alive ;)

> class XMLLexer extends Lexer {
>
> ...
>
> private dfa10 = new DFA10();
>
> ...
>
> alt10 = dfa10.predict(input);

Boy, that sure looks fine...driving me crazy wondering what I was  
thinking before!

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com

From parrt at cs.usfca.edu  Thu Sep 15 18:35:46 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Thu Sep 15 18:35:52 2005
Subject: [antlr-interest] ANTLR 3: Lexer problem
In-Reply-To: <9da4f45205091207297bdfc986@mail.gmail.com>
References: <9da4f45205091207297bdfc986@mail.gmail.com>
Message-ID: <90D19893-2F8E-4F43-867B-12BBCD11BFF8@cs.usfca.edu>


On Sep 12, 2005, at 7:29 AM, Oliver Zeigermann wrote:

> Again me - I am pretty sure to start bothering ;)

Not yet! ;)

> Anyway, any idea why this lexer grammar
>
> ELEMENT
>     : "<t>"
>             (ELEMENT
>             | (options {greedy=true;} : ~'<')*
>             )*
>       "</t>"
>     ;
>
> fails to parse this
>
> <t>Huhu</t>

I think that you have two optional things there.  The overall (...)*  
and the not less than loop.  Try (...)+ on the ~'<'.

Does antlr complain?

Ter
  --
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com

From parrt at cs.usfca.edu  Thu Sep 15 18:36:59 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Thu Sep 15 18:37:05 2005
Subject: [antlr-interest] Re: ANTLR 3: Lexer problem
In-Reply-To: <1126540410.31478.22.camel@localhost.localdomain>
References: <9da4f45205091207297bdfc986@mail.gmail.com>
	<9da4f45205091207323392b0e7@mail.gmail.com>
	<1126536611.31478.14.camel@localhost.localdomain>
	<9da4f45205091207587f115a0c@mail.gmail.com>
	<1126540410.31478.22.camel@localhost.localdomain>
Message-ID: <D2D97BDC-C700-43EE-BA1E-6E94C26285C2@cs.usfca.edu>


On Sep 12, 2005, at 8:53 AM, Martin Probst wrote:
>> How do you set the lookahead in ANTLR 3?
>>
>
> Well, if that isn't a nice question for Terence ;-)

ANTLR automatically throttles up from LL(1) to infinite lookahead  
when necessary. :)  Unless there is a bug. ;)

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com

From sohail at taggedtype.net  Thu Sep 15 20:23:01 2005
From: sohail at taggedtype.net (Sohail Somani)
Date: Thu Sep 15 20:23:06 2005
Subject: [antlr-interest] #antlr
Message-ID: <1126840982.9023.2.camel@localhost.localdomain>

I wonder, have any of you considered starting an official channel on freenode? It would be cool.

Sohail

From darthia at gmail.com  Thu Sep 15 23:37:26 2005
From: darthia at gmail.com (=?ISO-8859-1?Q?Jos=E9_Mar=EDa_Garc=EDa_Rodr=EDguez?=)
Date: Thu Sep 15 23:37:29 2005
Subject: [antlr-interest] Problem with an underline and semantic action
In-Reply-To: <9165062.20050916031857@gmail.com>
References: <9165062.20050916031857@gmail.com>
Message-ID: <87ca585205091523373fa66d4e@mail.gmail.com>

Your first problem is that the rule:

CONST_IDENT
   options { testLiterals=true; }
         : ('a'..'z') ('a'..'z'|'A'..'Z'|'0'..'9')*
         ;

is the one which has to recognise your "under_line" literal. But that
rule doesn't recognise the '_' character, so you need to add this
character to the rule itself. As you said there isn't any problem with
your charVocabulary. So your rule would be the following:

CONST_IDENT
   options { testLiterals=true; }
         : ('a'..'z') ('a'..'z'|'A'..'Z'|'0'..'9'|'_')*
         ;

About yor second problem I'm sorry but I have never used C++ with
ANTLR (actually, I have hardly ever used C++ ;-)

HTH

-- 
Jos? Mar?a Garc?a Rodr?guez 


2005/9/16, Nicola Cuomo <ncuomo@gmail.com>:
> Hi,
>    I'm a antlr newby trying to make a translator.
> 
> After  reading  the  manual  and looking at the examples on the site i
> still have a lot of problem/question.
> 
> So let's start :)
> 
> First problem
> 
> I've this grammar:
> 
> -------------------------------------------------------------------
> options
> {
>         language = "Cpp";
> }
> 
> class TestParser extends Parser;
> 
> options
> {
>         buildAST = false;
>         k = 3;
> }
> 
> spec
>         : UNDERLINE CONST_IDENT
>         ;
> 
> 
> class TestLexer extends Lexer;
> 
> options
> {
>         charVocabulary='\u0000'..'\u00ff';
>         k = 3;
> }
> 
> tokens
> {
>         UNDERLINE               = "under_line";
> }
> 
> /* Whitespaces */
> WS
>   : ( ' '
>     | '\t'
>     | '\f'
> 
>     // handle newlines
>     | ( "\r\n"  // DOS/Windows
>         | '\r'    // Macintosh
>         | '\n'    // Unix
>                         )
>       { newline(); }
>     )
>     { $setType(antlr::Token::SKIP); }
>   ;
> 
> COMMENT
>   : "%" (~('\n'|'\r'))*
>     { $setType(antlr::Token::SKIP); }
>   ;
> 
> CONST_IDENT
>   options { testLiterals=true; }
>         : ('a'..'z') ('a'..'z'|'A'..'Z'|'0'..'9')*
>         ;
> -------------------------------------------------------------------
> 
> It's a test that should parse something like "under_line a123123"
> 
> When i execute the program i get
> 
> $ ./main
> under_line a123123
> line 1:1: expecting "under_line", found 'under'
> Parse exception: line 1:6: unexpected char: '_'
> 
> It  seem  to stop looking for char when it hit the underline returning
> the  "under"  token  and  breaking  the parse. My first thought was to
> extend the charVocabulary but i've no clue on how to do it.
> 
> charVocabulary='\u0000'..'\u00ff';  shouldn't  already include all the
> ascii character??
> 
> charVocabulary='\u0000'..'\ufffe';  like  someone suggested on this ml
> for  a similar problem doesn't work in Cpp mode "warning: underline.g:
> Vocabularies  of  this  size  still  experimental in C++ mode" and the
> following compilation fail.
> 
> The "Second problem" is about semantic action:
> 
> I've the following grammar piece
> -----
> formula
>         : expression (EQUAL|LESST) expression
>         ;
> expression
>         : CONST_IDENT
>         | VAR_IDENT (PRIME)?
>          ... and so on ...
>         ;
> -----
> 
> I  would  like  to  get all the string that match the first expression
> rule in formula.
> 
> I've written something like:
> 
> -----
> formula
>         : exp:expression (EQUAL|LESST) expression { std::cout << exp->getText() << std::endl; }
>         ;
> expression
>         : CONST_IDENT
>         | VAR_IDENT (PRIME)?
>         ... and so on ...
>         ;
> -----
> 
> But the compilation fail saying that no exp is defined. From what i've
> seen  it seem to work with terminal token like EQUAL.
> There's a way to get all the text of a matching rule without having to
> build it from the "subexpression"?
> 
> Sorry for my english :)
> 
> Thanks for the answer :P
> --
>  Nicola                          mailto:ncuomo@gmail.com
> 
>
From gevik at xs4all.nl  Fri Sep 16 00:31:14 2005
From: gevik at xs4all.nl (Gevik babakhani)
Date: Fri Sep 16 00:31:14 2005
Subject: [antlr-interest] ANTLR EBNF tutorial
Message-ID: <200509160731.j8G7VAAB035534@smtp-vbr13.xs4all.nl>

Dear All,

 

Is there any good EBNF tutorial for ANTLR?

 

Thanx

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20050916/2524f8da/attachment.html
From mail at martin-probst.com  Fri Sep 16 01:19:07 2005
From: mail at martin-probst.com (Martin Probst)
Date: Fri Sep 16 01:19:14 2005
Subject: [antlr-interest] Lexer problem: distinguish between TIC and
	CHAR_LITERAL
In-Reply-To: <200509151911.56664.dzubi@users.sourceforge.net>
References: <330b703961add04c822492580a8af3db@zubinet.org>
	<1126619096.16819.13.camel@localhost.localdomain>
	<200509151911.56664.dzubi@users.sourceforge.net>
Message-ID: <1126858747.7821.6.camel@localhost.localdomain>

Hi,

> thanks for your answer.
> The concerning language is Ada95. There must be a way to correctly identify 
> the tics/character literals, or else how would the Ada compilers work?

They probably have a stateful lexer. Sometimes these differences come
just because they are using a different parsing strategy, e.g. an LALR
parser (yacc/bison).

> Is the following possible with AntLR?
> If the Lexer finds a tic, it checks if the previews token was an identifier 
> token. If so, it must be a TIC token, it can't be the beginning of a 
> character literal.
> I have not the slightest idea how to implement that :(

That's possible. Just store a boolean flag in your Lexer at the
beginning:
{
  boolean afterIdentifier = false;
}

And then set the flag to true/false according to the last token, e.g.
ID: ... { afterIdentifier = true; };
And have your TIC rule only fire if it's true:
TIC: { afterIdentifier }? ...;
Don't forget to set the flag off after all the other tokens.

For stateful Lexers with ANTLR it's usually nicer to have all rules of
the Lexer being protected and then have one big NEXT rule that looks
like this:

NEXT:
  { state == FOO }? ATOKEN { $setType(ATOKEN)
  | {state == bar }? BTOKEN { $setType(BTOKEN) }
  ..
but that might be overkill for you.

Martin

From dzubi at users.sourceforge.net  Fri Sep 16 03:05:41 2005
From: dzubi at users.sourceforge.net (=?UTF-8?B?IkRhbmllbCBadWJlcmLDvGhsZXIi?=)
Date: Fri Sep 16 03:05:45 2005
Subject: [antlr-interest] Solved: Lexer problem: distinguish between TIC
	and CHAR_LITERAL
In-Reply-To: <8b56cad40509160005794c5055@mail.gmail.com>
References: <330b703961add04c822492580a8af3db@zubinet.org>
	<1126619096.16819.13.camel@localhost.localdomain>
	<200509151911.56664.dzubi@users.sourceforge.net>
	<8b56cad40509160005794c5055@mail.gmail.com>
Message-ID: <ca043d2aa743a76744508f32ae4ba638@zubinet.org>

Woohoo! It works! :)
Now I feel like having a beer or two (unfourtunately that would not give a
good impression of mine at the office ;)

Martin and Stuart, thanks a lot for your tips, you saved me a lot of time!

Cheers, Daniel

From topor at web.de  Fri Sep 16 03:09:09 2005
From: topor at web.de (Augustinus Topor)
Date: Fri Sep 16 03:09:13 2005
Subject: [antlr-interest] segmentation fault on calling consume() in C++
Message-ID: <1809180@web.de>


Hello,
I have a simple test grammar only accepting "test" as input.
I turned of the creation of the default error handler.
Entering a character sequence different to "test" results in an exception.
So far so good.
But when I try to call consume() in the catch block to continue parsing after
the characters not recognized, I get a segmentation fault. Adding a rule
matching all other characters solves the problem but leads to lots of
ambiguity warnings(when using more substantial grammars).
Does anyone has another solution? Thanks in advance,
Augustinus Topor

I'm using ANTLR version 2.7.5 on Linux.

______________________________________________________________
Verschicken Sie romantische, coole und witzige Bilder per SMS!
Jetzt bei WEB.DE FreeMail: http://f.web.de/?mc=021193

From craig at palantir.co.za  Fri Sep 16 04:32:38 2005
From: craig at palantir.co.za (Craig Main)
Date: Fri Sep 16 04:33:10 2005
Subject: [antlr-interest] Solved: Lexer problem: distinguish between
	TICand CHAR_LITERAL
In-Reply-To: <ca043d2aa743a76744508f32ae4ba638@zubinet.org>
Message-ID: <20050916113306.E8D6EDCC2B@www.antlr.org>

Why stop at two?

-----Original Message-----
From: antlr-interest-bounces@antlr.org
[mailto:antlr-interest-bounces@antlr.org] On Behalf Of "Daniel Zuberb?hler"
Sent: 16 September 2005 12:06 PM
To: Stuart Dootson; Martin Probst
Cc: <antlr-interest@antlr.org> 
Subject: Re: [antlr-interest] Solved: Lexer problem: distinguish between
TICand CHAR_LITERAL

Woohoo! It works! :)
Now I feel like having a beer or two (unfourtunately that would not give a
good impression of mine at the office ;)

Martin and Stuart, thanks a lot for your tips, you saved me a lot of time!

Cheers, Daniel



From oliver.zeigermann at gmail.com  Fri Sep 16 04:34:51 2005
From: oliver.zeigermann at gmail.com (Oliver Zeigermann)
Date: Fri Sep 16 04:34:54 2005
Subject: [antlr-interest] ANTLR 3 tree construction really *rocks*!
Message-ID: <9da4f4520509160434683dd7b8@mail.gmail.com>

After all my frustrating bug reports I just wanted to share my
pleasure with the ANTLR tree construction and tree walker features!
They really rock!

Synatx is really simple and intuitive, took me 10 minutes to learn it
just from the examples without documentation.

Great thing also is that the syntax for tree construction is analogous
to tree walkter syntax.

Additionally, you finally can have a full tree as the root of another
tree, not only a token. Makes certain things soooo easy!

Thanks for that :)

Oliver
From scott at javadude.com  Fri Sep 16 05:13:04 2005
From: scott at javadude.com (Scott Stanchfield)
Date: Fri Sep 16 05:14:04 2005
Subject: [antlr-interest] ANTLR EBNF tutorial
In-Reply-To: <200509160731.j8G7VAAB035534@smtp-vbr13.xs4all.nl>
Message-ID: <200509161209.j8GC98x7001202@s2.eroute.net>

Try my ANTLR 2.x tutorial at http://javadude.com/articles
 
-- Scott


  _____  

From: antlr-interest-bounces@antlr.org
[mailto:antlr-interest-bounces@antlr.org] On Behalf Of Gevik babakhani
Sent: Friday, September 16, 2005 3:31 AM
To: antlr-interest@antlr.org
Subject: [antlr-interest] ANTLR EBNF tutorial



Dear All,

 

Is there any good EBNF tutorial for ANTLR?

 

Thanx

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20050916/8c10d827/attachment.html
From ray at soartech.com  Fri Sep 16 05:21:20 2005
From: ray at soartech.com (David Ray)
Date: Fri Sep 16 05:21:23 2005
Subject: [antlr-interest] Import vocab from different directory
In-Reply-To: <20050916081914.E7675DCD3D@www.antlr.org>
References: <20050916081914.E7675DCD3D@www.antlr.org>
Message-ID: <432AB8C0.90709@soartech.com>

Is there a way to import a vocabulary from a different directory. I have 
a tree parser that I'm using for code generation, but it needs to 
reference the vocabulary of the parser which is in a different package.

Thanks,
Dave Ray

From stuart.dootson at gmail.com  Fri Sep 16 05:24:27 2005
From: stuart.dootson at gmail.com (Stuart Dootson)
Date: Fri Sep 16 05:24:30 2005
Subject: [antlr-interest] Solved: Lexer problem: distinguish between TIC
	and CHAR_LITERAL
In-Reply-To: <ca043d2aa743a76744508f32ae4ba638@zubinet.org>
References: <330b703961add04c822492580a8af3db@zubinet.org>
	<1126619096.16819.13.camel@localhost.localdomain>
	<200509151911.56664.dzubi@users.sourceforge.net>
	<8b56cad40509160005794c5055@mail.gmail.com>
	<ca043d2aa743a76744508f32ae4ba638@zubinet.org>
Message-ID: <8b56cad405091605244c9a151f@mail.gmail.com>

On 9/16/05, "Daniel Zuberb?hler" <dzubi@users.sourceforge.net> wrote:
> Woohoo! It works! :)
> Now I feel like having a beer or two (unfourtunately that would not give a
> good impression of mine at the office ;)
> 
> Martin and Stuart, thanks a lot for your tips, you saved me a lot of time!
> 
> Cheers, Daniel

Cool! You actually prompted me to go back & look at the Ada grammar I
wrote (for use with a parser generator called Visual Parse++) back in
1998 & I realise that it wouldn't parse the case you gave
successfully. Don't think I'll bother going back and fixing it though
:-)

Stuart Dootson
From gevik at xs4all.nl  Fri Sep 16 05:44:22 2005
From: gevik at xs4all.nl (Gevik babakhani)
Date: Fri Sep 16 05:44:22 2005
Subject: [antlr-interest] JavaCC to ANTLR format.
Message-ID: <200509161244.j8GCiIkC090973@smtp-vbr13.xs4all.nl>

Dear All,

 

Does anyone know any way to convert the JavaCC grammer (*.jj files) to
ANTLER grammer.

 

Thanx,

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20050916/c7018cd3/attachment.html
From mjl at nova.edu  Fri Sep 16 06:19:18 2005
From: mjl at nova.edu (Michael Laszlo)
Date: Fri Sep 16 06:19:23 2005
Subject: [antlr-interest] manual tree construction
Message-ID: <200509161319.j8GDJI9o017815@S4.acast.nova.edu>

Thanks Monty. This works:

var_decl!
 : ID DEC_ASSIGN e:expr { #var_decl = #(ID, DEC_ASSIGN, e); }
 ;

It seems necessary to reference expr by label or the resulting parser
doesn't compile.

The example I modeled it on (from ANTLR Tree Construction) doesn't include
commas:

begin!
    :   INT PLUS i:INT
        { #begin = #(PLUS INT i); }
    ;

(I'm too accustomed to comma-less Scheme lists.)

When I send to this archive, the note is not placed at the proper level in
response to your message.  I think some setting in Outlook Express truncates
the email's subject line.



From mail at martin-probst.com  Fri Sep 16 06:57:15 2005
From: mail at martin-probst.com (Martin Probst)
Date: Fri Sep 16 06:57:23 2005
Subject: [antlr-interest] OT: threading layout (was: manual tree
	construction)
In-Reply-To: <200509161319.j8GDJI9o017815@S4.acast.nova.edu>
References: <200509161319.j8GDJI9o017815@S4.acast.nova.edu>
Message-ID: <1126879035.6570.5.camel@localhost.localdomain>

Hi,

> When I send to this archive, the note is not placed at the proper level in
> response to your message.  I think some setting in Outlook Express truncates
> the email's subject line.

Grouping emails to threads in email clients is not done using compares
on the topic but rather a reference to the parent message ID in the
email. Any proper email client is capable of setting and interpreting
these references, but of course Microsoft failed to write a proper email
application. Try Mozilla Thunderbird, it comes with a lot of other
bonuses.

Martin

From mjl at nova.edu  Fri Sep 16 07:38:25 2005
From: mjl at nova.edu (Michael Laszlo)
Date: Fri Sep 16 07:38:29 2005
Subject: [antlr-interest] OT: threading layout (was: manual tree construction)
Message-ID: <200509161438.j8GEcPrk021027@S4.acast.nova.edu>

nks, will look into Thunderbird.

I transcribed the rule incorrectly in my previous post. It should be:

var_decl!
  :	ID DEC_ASSIGN e:expr { #var_decl = #(DEC_ASSIGN, ID, e); }
  ;



From monty at codetransform.com  Fri Sep 16 08:11:50 2005
From: monty at codetransform.com (Monty Zukowski)
Date: Fri Sep 16 08:12:13 2005
Subject: [antlr-interest] manual tree construction
In-Reply-To: <200509161319.j8GDJI9o017815@S4.acast.nova.edu>
References: <200509161319.j8GDJI9o017815@S4.acast.nova.edu>
Message-ID: <432AE0B6.6000008@codetransform.com>

Michael Laszlo wrote:
> Thanks Monty. This works:
> 
> var_decl!
>  : ID DEC_ASSIGN e:expr { #var_decl = #(ID, DEC_ASSIGN, e); }
>  ;
> 
> It seems necessary to reference expr by label or the resulting parser
> doesn't compile.
> 
> The example I modeled it on (from ANTLR Tree Construction) doesn't include
> commas:
> 
> begin!
>     :   INT PLUS i:INT
>         { #begin = #(PLUS INT i); }
>     ;
> 
> (I'm too accustomed to comma-less Scheme lists.)

In fact, tree grammars are written that way too, it's easy to get confused.

Monty
From lucianaleal2002 at yahoo.com.br  Fri Sep 16 09:04:59 2005
From: lucianaleal2002 at yahoo.com.br (Luciana Nunes Leal)
Date: Fri Sep 16 09:05:03 2005
Subject: [antlr-interest] ANTLR Works - syntax diagram
Message-ID: <20050916160459.11092.qmail@web33308.mail.mud.yahoo.com>

Hi,
 
I download the installation of AntlrWorks from http://www.antlr.org/works/index.html. This tool provides a functionality of syntax diagram that I think very interesting.
 
As example, I opened the grammar of Java (java.g, available at http://www.antlr.org/grammar/java) to see the the syntax diagram, but nothing  appears. 
 
Can anybody help me with this, please?
 
Thanks, Luciana.

__________________________________________________
Converse com seus amigos em tempo real com o Yahoo! Messenger 
http://br.download.yahoo.com/messenger/ 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20050916/e8e23ff4/attachment.html
From oliver.zeigermann at gmail.com  Fri Sep 16 09:28:30 2005
From: oliver.zeigermann at gmail.com (Oliver Zeigermann)
Date: Fri Sep 16 09:28:34 2005
Subject: [antlr-interest] ANTLR 3: Lexer problem
In-Reply-To: <90D19893-2F8E-4F43-867B-12BBCD11BFF8@cs.usfca.edu>
References: <9da4f45205091207297bdfc986@mail.gmail.com>
	<90D19893-2F8E-4F43-867B-12BBCD11BFF8@cs.usfca.edu>
Message-ID: <9da4f45205091609284064f122@mail.gmail.com>

2005/9/16, Terence Parr <parrt@cs.usfca.edu>:
> > Anyway, any idea why this lexer grammar
> >
> > ELEMENT
> >     : "<t>"
> >             (ELEMENT
> >             | (options {greedy=true;} : ~'<')*
> >             )*
> >       "</t>"
> >     ;
> >
> > fails to parse this
> >
> > <t>Huhu</t>
> 
> I think that you have two optional things there.  The overall (...)*
> and the not less than loop.  Try (...)+ on the ~'<'.
> 
> Does antlr complain?

Oh, well, you are right! Switching to (...)+ fixes this! Thanks!

Oliver
From ewbank at gmail.com  Fri Sep 16 12:07:28 2005
From: ewbank at gmail.com (Bryan Ewbank)
Date: Fri Sep 16 12:07:31 2005
Subject: [antlr-interest] Anyone tried to remove ref nodes from C++ library
	and code?
Message-ID: <dd3a065f050916120777e51a1f@mail.gmail.com>

Has anyone had success (even limited) at removing the RefAST
intermediate class in ANTLR 2.xx?

I'm exploring ways to simplify the internal representation and reduce
memory pressure, and this seems an obvious choice.

Thank you,
- Bryan
From prashant.deva at gmail.com  Fri Sep 16 12:25:30 2005
From: prashant.deva at gmail.com (Prashant Deva)
Date: Fri Sep 16 12:25:34 2005
Subject: [antlr-interest] Who wants to try ANTLR Studio?
Message-ID: <41fed8f8050916122557cacbeb@mail.gmail.com>

I am looking for someone to test ANTLR Studio.

You will need eclipse 3.1 and java 5.

I would like to test it out on a mac and linux machine and on a loew
end config , arnd 1.4 ghz.

If you are interested please mail me. The beta version will expire after 7 days.

PRASHANT
From chris at lotuscat.com  Fri Sep 16 13:17:43 2005
From: chris at lotuscat.com (Chris Black)
Date: Fri Sep 16 12:28:03 2005
Subject: [antlr-interest] Import vocab from different directory
In-Reply-To: <432AB8C0.90709@soartech.com>
References: <20050916081914.E7675DCD3D@www.antlr.org>
	<432AB8C0.90709@soartech.com>
Message-ID: <432B2867.20907@lotuscat.com>

David Ray wrote:

> Is there a way to import a vocabulary from a different directory. I 
> have a tree parser that I'm using for code generation, but it needs to 
> reference the vocabulary of the parser which is in a different package.
>
> Thanks,
> Dave Ray
>
I do something similar with common lexers for CSV and TSV shared between 
more specific parsers and tree parsers in different directories. Since I 
use ant for building my antlr grammars, I just added a copy task into my 
parser targets that copies the *TokenTypes.txt from the common lexer dir 
into the parser dir before the parser antlr task. I realize this isn't 
exactly importing a vocab from a different directory, but it is a 
workaround that works fine for me.

Chris
From prashant.deva at gmail.com  Fri Sep 16 12:38:38 2005
From: prashant.deva at gmail.com (Prashant Deva)
Date: Fri Sep 16 12:38:50 2005
Subject: [antlr-interest] Import vocab from different directory
In-Reply-To: <432AB8C0.90709@soartech.com>
References: <20050916081914.E7675DCD3D@www.antlr.org>
	<432AB8C0.90709@soartech.com>
Message-ID: <41fed8f805091612382c53fbb6@mail.gmail.com>

> Is there a way to import a vocabulary from a different directory. 
No.

PRASHANT

On 9/16/05, David Ray <ray@soartech.com> wrote:
> Is there a way to import a vocabulary from a different directory. I have
> a tree parser that I'm using for code generation, but it needs to
> reference the vocabulary of the parser which is in a different package.
> 
> Thanks,
> Dave Ray
> 
>
From parrt at cs.usfca.edu  Fri Sep 16 12:54:49 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Fri Sep 16 12:54:56 2005
Subject: [antlr-interest] ANTLR Works - syntax diagram
In-Reply-To: <20050916160459.11092.qmail@web33308.mail.mud.yahoo.com>
References: <20050916160459.11092.qmail@web33308.mail.mud.yahoo.com>
Message-ID: <0AC2B8B4-4DFE-4F9A-A4C9-FB35DDB2E9D3@cs.usfca.edu>


On Sep 16, 2005, at 9:04 AM, Luciana Nunes Leal wrote:

> Hi,
>
> I download the installation of AntlrWorks from http://www.antlr.org/ 
> works/index.html. This tool provides a functionality of syntax  
> diagram that I think very interesting.
>
> As example, I opened the grammar of Java (java.g, available at  
> http://www.antlr.org/grammar/java) to see the the syntax diagram,  
> but nothing  appears.
>
> Can anybody help me with this, please?
>
Hi.  Sure, just use the new java.g grammar within the examples-v3  
tarball on the download site.

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com

From ray at soartech.com  Fri Sep 16 14:08:34 2005
From: ray at soartech.com (David Ray)
Date: Fri Sep 16 14:09:20 2005
Subject: [antlr-interest] Import vocab from different directory
In-Reply-To: <432B2867.20907@lotuscat.com>
References: <20050916081914.E7675DCD3D@www.antlr.org>
	<432AB8C0.90709@soartech.com> <432B2867.20907@lotuscat.com>
Message-ID: <432B3452.4090704@soartech.com>

Thanks. That was my backup plan if there wasn't a more elegant way to 
handle it.

Dave

Chris Black wrote:
> David Ray wrote:
> 
>> Is there a way to import a vocabulary from a different directory. I 
>> have a tree parser that I'm using for code generation, but it needs to 
>> reference the vocabulary of the parser which is in a different package.
>>
>> Thanks,
>> Dave Ray
>>
> I do something similar with common lexers for CSV and TSV shared between 
> more specific parsers and tree parsers in different directories. Since I 
> use ant for building my antlr grammars, I just added a copy task into my 
> parser targets that copies the *TokenTypes.txt from the common lexer dir 
> into the parser dir before the parser antlr task. I realize this isn't 
> exactly importing a vocab from a different directory, but it is a 
> workaround that works fine for me.
> 
> Chris
From hdeshmane at montalvosystems.com  Fri Sep 16 17:06:06 2005
From: hdeshmane at montalvosystems.com (Harsh Deshmane)
Date: Fri Sep 16 17:06:51 2005
Subject: [antlr-interest] 2 questions
In-Reply-To: <006f01c5b8fb$967095b0$8cc79553@marlboro>
References: <200509131511.27710.hdeshmane@montalvosystems.com>
	<006f01c5b8fb$967095b0$8cc79553@marlboro>
Message-ID: <200509161706.06850.hdeshmane@montalvosystems.com>

Hi Alexey,

thanks for your suggestion. I used it to finish (at least a little) of my 
grammar file( a very basic netlist parser).

When I tried to compile in C++, I found the compiler complaining of
undefined function "getColumn() "
I have checked that the function exists and is defined in Token.hpp
and that Token.o is archived into libantlr.a.

I tried to explicitly call antlr::Token::getColumn(), but it's a virtual 
function and const, so it requires an object to be called.
IF LLKParser is not inheriting this function, how is it to be called ?

What else can I do to debug this problem ?

Oh, I also followed Ric's instructions on compiling libantlr.a and
ran the example calc program. It works fine.

thanks,
-harsh

SpiceParser.cpp: In member function `void SpiceParser::subckt()':
SpiceParser.cpp:122: `getColumn' undeclared (first use this function)
SpiceParser.cpp:122: (Each undeclared identifier is reported only once for 
each
   function it appears in.)



On Wednesday 14 September 2005 00:11, Alexey Demakov wrote:
> b. You can check current column position in lexer rule:
>
> START_LINE_TOKEN : { getColumn() == 1 }? "M43blah" ;
>
> Regards,
> Alexey
>
> -----
> Alexey Demakov
> TreeDL: Tree Description Language: http://treedl.sourceforge.net
> RedVerst Group: http://www.unitesk.com
>
> ----- Original Message -----
> From: "Harsh Deshmane" <hdeshmane@montalvosystems.com>
> To: <antlr-interest@antlr.org>
> Sent: Wednesday, September 14, 2005 2:11 AM
> Subject: [antlr-interest] 2 questions
>
> > Hi,
> >
> > I have two questions:
> > a. How do you search the archives of the mailing list ?
> > b. for the grammar, I need to specifically capture patterns that start
> > from the first character of the line, how do I do that ?
> >
> > for example,
> >
> > M43blah  xx yy zz
> >
> > Here, the letter "M" in the first location is important.
> > Similarly for other key"letters"
> > In regular expressions, it would be "^M" that I am looking for..
> >
> > thanks for any help.
> > -harsh
From prashant.deva at gmail.com  Fri Sep 16 20:11:38 2005
From: prashant.deva at gmail.com (Prashant Deva)
Date: Fri Sep 16 20:11:40 2005
Subject: [antlr-interest] Re: Who wants to try ANTLR Studio?
In-Reply-To: <41fed8f8050916122557cacbeb@mail.gmail.com>
References: <41fed8f8050916122557cacbeb@mail.gmail.com>
Message-ID: <41fed8f8050916201166ede979@mail.gmail.com>

For everyone who wants to know what ANTLR Studio does -

Goto www.antlrstudio.com and check out the videos :)

PRASHANT

On 9/17/05, Prashant Deva <prashant.deva@gmail.com> wrote:
> I am looking for someone to test ANTLR Studio.
> 
> You will need eclipse 3.1 and java 5.
> 
> I would like to test it out on a mac and linux machine and on a loew
> end config , arnd 1.4 ghz.
> 
> If you are interested please mail me. The beta version will expire after 7 days.
> 
> PRASHANT
>
From vidar at hawkis.com  Sat Sep 17 04:03:37 2005
From: vidar at hawkis.com (Vidar =?iso-8859-1?q?H=E5kestad?=)
Date: Sat Sep 17 04:03:47 2005
Subject: [antlr-interest] Could antlr understand (group)3
Message-ID: <200509171303.37912.vidar@hawkis.com>

Is it possible for antlr to understand a digit as a group operator in addition 
to *, ? and +? This would help in situations where a specific number of 
elements are known.
For example in CSS, a color value may be specified with either three or six 
hex numbers. It would be shorter to write

HEX
  : '0'..'9' | 'a'..'f' | 'A'..'F'
  ;

COLOR
  :  '#' ((HEX)3 | (HEX)6)
  ;

instead of

COLOR
  : '#' ((HEX HEX HEX) | (HEX HEX HEX HEX HEX HEX))
  ;

Vidar
From prashant.deva at gmail.com  Sat Sep 17 04:34:30 2005
From: prashant.deva at gmail.com (Prashant Deva)
Date: Sat Sep 17 04:34:32 2005
Subject: [antlr-interest] Could antlr understand (group)3
In-Reply-To: <200509171303.37912.vidar@hawkis.com>
References: <200509171303.37912.vidar@hawkis.com>
Message-ID: <41fed8f80509170434501abc6d@mail.gmail.com>

No.

On 9/17/05, Vidar H?kestad <vidar@hawkis.com> wrote:
> Is it possible for antlr to understand a digit as a group operator in addition
> to *, ? and +? This would help in situations where a specific number of
> elements are known.
> For example in CSS, a color value may be specified with either three or six
> hex numbers. It would be shorter to write
> 
> HEX
>   : '0'..'9' | 'a'..'f' | 'A'..'F'
>   ;
> 
> COLOR
>   :  '#' ((HEX)3 | (HEX)6)
>   ;
> 
> instead of
> 
> COLOR
>   : '#' ((HEX HEX HEX) | (HEX HEX HEX HEX HEX HEX))
>   ;
> 
> Vidar
>
From tommy.nordgren at chello.se  Sat Sep 17 05:49:29 2005
From: tommy.nordgren at chello.se (Tommy Nordgren)
Date: Sat Sep 17 05:48:55 2005
Subject: [antlr-interest] Antlr lexers - implementing Here documents
Message-ID: <B000534B-DA6A-4E01-B8CC-0BFACDFF672E@chello.se>

For an application I need to implement a token similar to here  
documents in bash and perl.
Each token is introduced by a special symbol, and an identifier. The  
token is ended by the
start identifier occuring by itself on a line.
Everything after the introducing identifier, and before the  
terminating identifier should be copied
verbatim to the generated token.
Like this:
<<ENDRULE
"This should be copied verbatim"
ENDRULE

After this pattern occurs in the input, a token should be generated  
with the content "This should be copied verbatim",
and an appropriate token code.

Any ideas, folks, on how to implement this?

"Home is not where you are born, but where your heart finds peace" -
Tommy Nordgren, "The dying old crone"

From ewbank at gmail.com  Sat Sep 17 06:15:33 2005
From: ewbank at gmail.com (Bryan Ewbank)
Date: Sat Sep 17 06:15:38 2005
Subject: [antlr-interest] Could antlr understand (group)3
In-Reply-To: <41fed8f80509170434501abc6d@mail.gmail.com>
References: <200509171303.37912.vidar@hawkis.com>
	<41fed8f80509170434501abc6d@mail.gmail.com>
Message-ID: <dd3a065f0509170615351aa56b@mail.gmail.com>

No, there's no way to specify a specific number of repetitions;
however, it might be easier to write this way:

   protected HEX : '0'..'9'|'a'..'f'|'A'..'F';
   protected HEX3 : HEX HEX HEX;
   COLOR : '#' HEX3 ( HEX3 )? ;

Of course, this way would allow better detect/reject of illegal COLOR
groups (pardon my syntax; no manual handy):

   COLOR
   { int color = 0; }
   : '#' (HEX { count++; } )+
      {
          if (count != 3 && count != 6) { error bad COLOR; }
      }
   ;


On 9/17/05, Vidar H?kestad <vidar@hawkis.com> wrote:
> Is it possible for antlr to understand a digit as a group operator in addition
> to *, ? and +? This would help in situations where a specific number of
> elements are known.
> For example in CSS, a color value may be specified with either three or six
> hex numbers. It would be shorter to write
>
> HEX
>   : '0'..'9' | 'a'..'f' | 'A'..'F'
>   ;
>
> COLOR
>   :  '#' ((HEX)3 | (HEX)6)
>   ;
>
> instead of
>
> COLOR
>   : '#' ((HEX HEX HEX) | (HEX HEX HEX HEX HEX HEX))
>   ;
From ewbank at gmail.com  Sat Sep 17 06:23:32 2005
From: ewbank at gmail.com (Bryan Ewbank)
Date: Sat Sep 17 06:23:34 2005
Subject: [antlr-interest] Antlr lexers - implementing Here documents
In-Reply-To: <B000534B-DA6A-4E01-B8CC-0BFACDFF672E@chello.se>
References: <B000534B-DA6A-4E01-B8CC-0BFACDFF672E@chello.se>
Message-ID: <dd3a065f05091706236b63e0bd@mail.gmail.com>

Consider a second lexer that drops into "eat a line" mode, and a
parser that just eats lines until the /line/ matches the identifier in
question.  This is similar to the model for javadoc and other such
comment-parsing scanners.  Something like the following, in the
parser:
///
///  result is tree node with many children: #( "<<" ( LINE )* )
///
heredoc:
{ string terminator; }
   "<<"^
   id:IDENTIFIER!
   {
      terminator = id->getText();
      /**** switch to "eat-a-line" lexer here ****/
   }
   ( { LT(1)->getText() != terminator }? LINE )*
   { /*** switch back to prior lexer ***/ }
   eod:IDENTIFIER!
   { /*** make sure "eod" identifier matches, if you're paranoid ***/ }
   ;

On 9/17/05, Tommy Nordgren <tommy.nordgren@chello.se> wrote:
> For an application I need to implement a token similar to here
> documents in bash and perl.
> Each token is introduced by a special symbol, and an identifier. The
> token is ended by the
> start identifier occuring by itself on a line.
> Everything after the introducing identifier, and before the
> terminating identifier should be copied
> verbatim to the generated token.
> Like this:
> <<ENDRULE
> "This should be copied verbatim"
> ENDRULE
> 
> After this pattern occurs in the input, a token should be generated
> with the content "This should be copied verbatim",
> and an appropriate token code.
> 
> Any ideas, folks, on how to implement this?
> 
> "Home is not where you are born, but where your heart finds peace" -
> Tommy Nordgren, "The dying old crone"
> 
>
From parrt at cs.usfca.edu  Sat Sep 17 15:21:17 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Sat Sep 17 15:21:21 2005
Subject: [antlr-interest] ANTLR 3: Problem with static DFA class generation
In-Reply-To: <9da4f452050912034161736a7f@mail.gmail.com>
References: <9da4f45205090909127d862fbc@mail.gmail.com>
	<AE756421-BC60-47EF-BA22-C6403686D6F9@cs.usfca.edu>
	<9da4f452050910151623ce405f@mail.gmail.com>
	<1E87C0F7-1780-4B16-B4FC-2D2AFB89EDE6@cs.usfca.edu>
	<9da4f45205091203045523c71c@mail.gmail.com>
	<9da4f452050912034161736a7f@mail.gmail.com>
Message-ID: <A8858BA3-F1A0-4FEC-95ED-307901A428C4@cs.usfca.edu>


On Sep 12, 2005, at 3:41 AM, Oliver Zeigermann wrote:
> It simple makes all DFA code non static to allow full access to the
> outer class' (Lexer) fields. The part that creates a single DFA per
> decision and lexer like this:
>
> class XMLLexer extends Lexer {
>
> ...
>
> private dfa10 = new DFA10();
>
> ...
>
> alt10 = dfa10.predict(input);
>
> ...
>
> }

Ok, I think figured out why I didn't want to do this before.  There  
is a bunch of state construction "new" operations that go on when you  
say new DFA10().  I only wanted them to occur once as they are  
expensive.  I somehow missed the obvious reuse of the outermost DFA  
object; here you are using dfa10 to create DFA10 just once.  In this  
way, we only create the DFA states once like with static, but the  
inner classes have an implied "this" pointer and can see the instance  
variables of the outer Lexer object.   I like it!

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com

From amohombe at yahoo.com  Sun Sep 18 04:12:16 2005
From: amohombe at yahoo.com (Ahmed Mohombe)
Date: Sun Sep 18 04:14:30 2005
Subject: [antlr-interest] Download Page Imporvement!
Message-ID: <dgji2h$n9u$1@sea.gmane.org>

Hi,

Could you please improve the actual download page?
At the moment it's very confusing and chaotic.

A simple solution for the beginning could be to add the timestamp.
A second step could be to and one more column with very short description (only a few words), cause
in many cases it's not clear what the package name represents or to what other package relates the
specific version.

Thanks in advance,

Ahmed.

From amohombe at yahoo.com  Sun Sep 18 04:59:18 2005
From: amohombe at yahoo.com (Ahmed Mohombe)
Date: Sun Sep 18 05:01:29 2005
Subject: [antlr-interest] Is there a public VCS repository for ANTLR?
Message-ID: <dgjkqo$t2v$1@sea.gmane.org>

Hi,

Is there a public VCS repository for ANTLR (especially for ANTLR 3 and ANTLRWorks?).
(CVS or SVN)?
I can't find any link or hint in this direction on antlr.org.

Thanks in advance,

Ahmed.

From gevik at xs4all.nl  Sun Sep 18 06:57:08 2005
From: gevik at xs4all.nl (Gevik Babakhani)
Date: Sun Sep 18 06:57:13 2005
Subject: [antlr-interest] ANTLR with .NET 2.0 Beta
Message-ID: <200509181357.j8IDv7tb098385@smtp-vbr14.xs4all.nl>

Dear All,

 

I have successfully compiled the ANTLR 2.7.5 with Visual Studio 2005 / .NET
2.0 Beta 2

As expected everything worked fine.

 

Regards,

Gevik.

 

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20050918/3a047876/attachment.html
From iloncar.ml at gmail.com  Sun Sep 18 12:52:07 2005
From: iloncar.ml at gmail.com (=?ISO-8859-2?Q?Ivica_Lon=E8ar?=)
Date: Sun Sep 18 12:52:10 2005
Subject: [antlr-interest] 2 questions
In-Reply-To: <200509131511.27710.hdeshmane@montalvosystems.com>
References: <200509131511.27710.hdeshmane@montalvosystems.com>
Message-ID: <31b11eec05091812526459fff4@mail.gmail.com>

On 9/14/05, Harsh Deshmane <hdeshmane@montalvosystems.com> wrote:
> Hi,
> 
> I have two questions:
> a. How do you search the archives of the mailing list ?
> 

For recent posts (since may) you can use il-antlr-interest google group.
From hdeshmane at montalvosystems.com  Sun Sep 18 18:57:54 2005
From: hdeshmane at montalvosystems.com (Harsh Deshmane)
Date: Sun Sep 18 18:58:46 2005
Subject: [antlr-interest] 2 questions
In-Reply-To: <200509161706.06850.hdeshmane@montalvosystems.com>
References: <200509131511.27710.hdeshmane@montalvosystems.com>
	<006f01c5b8fb$967095b0$8cc79553@marlboro>
	<200509161706.06850.hdeshmane@montalvosystems.com>
Message-ID: <200509181857.54570.hdeshmane@montalvosystems.com>


Hi,

I have a small doubt. 
I can see getColumn example being used in a java context. (columns)
also in python (columns). However, 
I don't see a "columns" directory under examples for cpp.
Has anyone used it for c++ code development? Did you need
to include any specific header files ?

thanks for any help!
-harsh


From oliver.zeigermann at gmail.com  Mon Sep 19 02:22:15 2005
From: oliver.zeigermann at gmail.com (Oliver Zeigermann)
Date: Mon Sep 19 02:22:19 2005
Subject: [antlr-interest] ANTLR 3: Problem with static DFA class generation
In-Reply-To: <A8858BA3-F1A0-4FEC-95ED-307901A428C4@cs.usfca.edu>
References: <9da4f45205090909127d862fbc@mail.gmail.com>
	<AE756421-BC60-47EF-BA22-C6403686D6F9@cs.usfca.edu>
	<9da4f452050910151623ce405f@mail.gmail.com>
	<1E87C0F7-1780-4B16-B4FC-2D2AFB89EDE6@cs.usfca.edu>
	<9da4f45205091203045523c71c@mail.gmail.com>
	<9da4f452050912034161736a7f@mail.gmail.com>
	<A8858BA3-F1A0-4FEC-95ED-307901A428C4@cs.usfca.edu>
Message-ID: <9da4f45205091902223a5239c1@mail.gmail.com>

2005/9/18, Terence Parr <parrt@cs.usfca.edu>:
> 
> On Sep 12, 2005, at 3:41 AM, Oliver Zeigermann wrote:
> > It simple makes all DFA code non static to allow full access to the
> > outer class' (Lexer) fields. The part that creates a single DFA per
> > decision and lexer like this:
> >
> > class XMLLexer extends Lexer {
> >
> > ...
> >
> > private dfa10 = new DFA10();
> >
> > ...
> >
> > alt10 = dfa10.predict(input);
> >
> > ...
> >
> > }
> 
> Ok, I think figured out why I didn't want to do this before.  There
> is a bunch of state construction "new" operations that go on when you
> say new DFA10().  I only wanted them to occur once as they are
> expensive.  I somehow missed the obvious reuse of the outermost DFA
> object; here you are using dfa10 to create DFA10 just once.  In this
> way, we only create the DFA states once like with static, but the
> inner classes have an implied "this" pointer and can see the instance
> variables of the outer Lexer object.   I like it!

Yes, that's right! My patch does not include the above single
construction, as this would have required a bit more than changing a
template, though. But I am pretty sure that you know how to do this...

Oliver
From gevik at xs4all.nl  Mon Sep 19 02:31:30 2005
From: gevik at xs4all.nl (Gevik babakhani)
Date: Mon Sep 19 02:31:33 2005
Subject: [antlr-interest] ANTLR with .NET 2.0 Beta
In-Reply-To: <20050919092622.8FBAE1C0038F@mwinf0804.wanadoo.fr>
Message-ID: <200509190931.j8J9VUbq085701@smtp-vbr3.xs4all.nl>

Hi,

 

I have opened the project is VS 2005.

- VS 2005 opens the project and asks you to convert it.

- Then you see the antlr.runtime and ast.frame dlls.

- There is also a java parser project in the same solution that you can
remove. This is not needed for creating the antlr  dlls.

- Hit <CTLR><SHIFT><B> and it shoud compile without any error or warnings.

 

Regards,

Gevik.

 

 

  _____  

From: Thierry Frey [mailto:thierry.frey@publimation.com] 
Sent: Monday, September 19, 2005 11:26 AM
To: 'Gevik Babakhani'
Cc: 'Thierry Frey'
Subject: RE: [antlr-interest] ANTLR with .NET 2.0 Beta

 

Hello,

 

I would be interested in doing the same. Is it straightforward or are there
any issues?

 

Regards,

Thierry

 

  _____  

De : antlr-interest-bounces@antlr.org
[mailto:antlr-interest-bounces@antlr.org] De la part de Gevik Babakhani
Envoy? : dimanche 18 septembre 2005 15:57
? : antlr-interest@antlr.org
Objet : [antlr-interest] ANTLR with .NET 2.0 Beta

Dear All,

 

I have successfully compiled the ANTLR 2.7.5 with Visual Studio 2005 / .NET
2.0 Beta 2

As expected everything worked fine.

 

Regards,

Gevik.

 

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20050919/72127e32/attachment.html
From geiroves at online.no  Mon Sep 19 04:20:03 2005
From: geiroves at online.no (Geir Ove Skjaervik)
Date: Mon Sep 19 04:20:16 2005
Subject: [antlr-interest] Requesting ANTLRHashString.getString() Method !
Message-ID: <000001c5bd0c$16cda400$bc00a8c0@rexii>

Hello,
 
I am using ANTLR tp build my own little language, and using the Tree
Walker to execute it. I wan to get a list of all the defined Literals
(commands). ANTLR keeps track of this in the Literals Table which it
keeps in the CharScanner.literals  Hashtable.  So, I can enumerate over
the keys in the literals Hashtable and get all the ANTLRHashString
instances. However, there is NO simple getter method to get the Name
(String) of the Literal defined !
 
I added this simple method to ANTLRHashString:
 
   public String getString() {
     return s;
    }
 
 
 
I thought this simple modification would be useful to more users, so why
not add this simple non-intrusive getter in the next 2.7.x Udpate,
Please ?
 
regards

Geir Ove Skjaervik

Objective Software Solutions
Norway
Phone: Int+907-48-869
Fax: Int+47-6988-5947
E-mail: objective.software@online.no
WEB:  <http://www.objective.no/> http://www.objective.no 

 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20050919/6ee428c0/attachment.html
From oliver.zeigermann at gmail.com  Mon Sep 19 04:21:10 2005
From: oliver.zeigermann at gmail.com (Oliver Zeigermann)
Date: Mon Sep 19 04:21:17 2005
Subject: [antlr-interest] ANTLR 3: Problem with static DFA class generation
In-Reply-To: <9da4f45205091902223a5239c1@mail.gmail.com>
References: <9da4f45205090909127d862fbc@mail.gmail.com>
	<AE756421-BC60-47EF-BA22-C6403686D6F9@cs.usfca.edu>
	<9da4f452050910151623ce405f@mail.gmail.com>
	<1E87C0F7-1780-4B16-B4FC-2D2AFB89EDE6@cs.usfca.edu>
	<9da4f45205091203045523c71c@mail.gmail.com>
	<9da4f452050912034161736a7f@mail.gmail.com>
	<A8858BA3-F1A0-4FEC-95ED-307901A428C4@cs.usfca.edu>
	<9da4f45205091902223a5239c1@mail.gmail.com>
Message-ID: <9da4f4520509190421346b701c@mail.gmail.com>

OK, I created patches for the new Java.stg, DFA.java (optional - makes
predicat non-static) and finally a small one for Codegenerator.java.
Using them will generate the code below.

Oliver

2005/9/19, Oliver Zeigermann <oliver.zeigermann@gmail.com>:
> 2005/9/18, Terence Parr <parrt@cs.usfca.edu>:
> >
> > On Sep 12, 2005, at 3:41 AM, Oliver Zeigermann wrote:
> > > It simple makes all DFA code non static to allow full access to the
> > > outer class' (Lexer) fields. The part that creates a single DFA per
> > > decision and lexer like this:
> > >
> > > class XMLLexer extends Lexer {
> > >
> > > ...
> > >
> > > private dfa10 = new DFA10();
> > >
> > > ...
> > >
> > > alt10 = dfa10.predict(input);
> > >
> > > ...
> > >
> > > }
> >
> > Ok, I think figured out why I didn't want to do this before.  There
> > is a bunch of state construction "new" operations that go on when you
> > say new DFA10().  I only wanted them to occur once as they are
> > expensive.  I somehow missed the obvious reuse of the outermost DFA
> > object; here you are using dfa10 to create DFA10 just once.  In this
> > way, we only create the DFA states once like with static, but the
> > inner classes have an implied "this" pointer and can see the instance
> > variables of the outer Lexer object.   I like it!
> 
> Yes, that's right! My patch does not include the above single
> construction, as this would have required a bit more than changing a
> template, though. But I am pretty sure that you know how to do this...
> 
> Oliver
>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: Java.stg.diff
Type: application/octet-stream
Size: 5117 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20050919/0f46111d/Java.stg-0001.obj
-------------- next part --------------
A non-text attachment was scrubbed...
Name: DFA.java.diff
Type: application/octet-stream
Size: 306 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20050919/0f46111d/DFA.java-0001.obj
-------------- next part --------------
A non-text attachment was scrubbed...
Name: CodeGenerator.java.diff
Type: application/octet-stream
Size: 569 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20050919/0f46111d/CodeGenerator.java-0001.obj
From gevik at xs4all.nl  Mon Sep 19 07:06:43 2005
From: gevik at xs4all.nl (Gevik babakhani)
Date: Mon Sep 19 07:06:48 2005
Subject: [antlr-interest] Please advice about float
Message-ID: <200509191406.j8JE6h8P035623@smtp-vbr6.xs4all.nl>

Dear all,

 

I would like to parse integers and simple floats without exponents. Is this
the correct grammar?

 

class MyLexer extends Lexer;

options {

            k=2;

}

                                                                        

NUMBER          :           INT ((FLOAT)?)

                        ;

protected

FLOAT              : ('.' INT)

                        ;

protected

INT                   :           (DIGIT)+

                        ;

 


protected                                               

DIGIT                :           '0'..'9'

                        ;

 

WS     :

    (' ' 

    | '\t' 

    | '\r' '\n' { newline(); } 

    | '\n'      { newline(); }

    ) 

    { $setType(Token.SKIP); } 

  ;

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20050919/2787c1c6/attachment.html
From adenis at bristol.ca  Mon Sep 19 07:30:57 2005
From: adenis at bristol.ca (denis, alexis)
Date: Mon Sep 19 07:31:07 2005
Subject: [antlr-interest] Please advice about float
Message-ID: <A93344061C44D71199B60002B35EBA3502455256@mail.bal>

Hi,
 
I'm no expert in grammars but I'd say a float is an (INT'.'INT) and a NUMBER
is a FLOAT or an INT.
 
Alexis

-----Original Message-----
From: Gevik babakhani [mailto:gevik@xs4all.nl]
Sent: Monday, September 19, 2005 9:07 AM
To: antlr-interest@antlr.org
Subject: [antlr-interest] Please advice about float



Dear all,

 

I would like to parse integers and simple floats without exponents. Is this
the correct grammar?

 

class MyLexer extends Lexer;

options {

            k=2;

}

                                                                        

NUMBER          :           INT ((FLOAT)?)

                        ;

protected

FLOAT              : ('.' INT)

                        ;

protected

INT                   :           (DIGIT)+

                        ;

 


protected                                               

DIGIT                :           '0'..'9'

                        ;

 

WS     :

    (' ' 

    | '\t' 

    | '\r' '\n' { newline(); } 

    | '\n'      { newline(); }

    ) 

    { $setType(Token.SKIP); } 

  ;


-------------------------------------------------------------------------------------------------------------------
"Confidentiality Disclaimer:  This message and the documents attached is
intended for the addressee(s) only and may contain privileged, private or
confidential information.  Unauthorized review, disclosure, dissemination,
distribution, duplication or other  use of this information is strictly
prohibited.  If you have received this message in error, please notify the
sender immediately via telephone or return email.  Please, then delete the
original email and all copies from your system, servers, backups and
archives".
------------------------------------------------------------------------------------------------------------------

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20050919/ef7b06a4/attachment.html
From parrt at cs.usfca.edu  Mon Sep 19 07:48:02 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Sep 19 07:48:06 2005
Subject: [antlr-interest] ANTLR 3: Problem with static DFA class generation
In-Reply-To: <9da4f45205091902223a5239c1@mail.gmail.com>
References: <9da4f45205090909127d862fbc@mail.gmail.com>
	<AE756421-BC60-47EF-BA22-C6403686D6F9@cs.usfca.edu>
	<9da4f452050910151623ce405f@mail.gmail.com>
	<1E87C0F7-1780-4B16-B4FC-2D2AFB89EDE6@cs.usfca.edu>
	<9da4f45205091203045523c71c@mail.gmail.com>
	<9da4f452050912034161736a7f@mail.gmail.com>
	<A8858BA3-F1A0-4FEC-95ED-307901A428C4@cs.usfca.edu>
	<9da4f45205091902223a5239c1@mail.gmail.com>
Message-ID: <CA5283F3-8EDD-4080-915F-64FB2F532F6A@cs.usfca.edu>


On Sep 19, 2005, at 2:22 AM, Oliver Zeigermann wrote:
>>>
>>> class XMLLexer extends Lexer {
>>>
>>> ...
>>>
>>> private dfa10 = new DFA10();
>>>
>>> ...
>>>
>>> alt10 = dfa10.predict(input);
>>>
>>> ...
>>>
>>> }
>>>
>>
> Yes, that's right! My patch does not include the above single
> construction, as this would have required a bit more than changing a
> template, though. But I am pretty sure that you know how to do this...

Actually, should only require a template chnage.  The list of DFAs is  
known to the overall lexer template and so it can apply a small  
template to each DFA, generating the private reused instance. :)

Hooray.

Ter
From oliver.zeigermann at gmail.com  Mon Sep 19 08:26:40 2005
From: oliver.zeigermann at gmail.com (Oliver Zeigermann)
Date: Mon Sep 19 08:26:45 2005
Subject: [antlr-interest] ANTLR 3: Problem with static DFA class generation
In-Reply-To: <CA5283F3-8EDD-4080-915F-64FB2F532F6A@cs.usfca.edu>
References: <9da4f45205090909127d862fbc@mail.gmail.com>
	<AE756421-BC60-47EF-BA22-C6403686D6F9@cs.usfca.edu>
	<9da4f452050910151623ce405f@mail.gmail.com>
	<1E87C0F7-1780-4B16-B4FC-2D2AFB89EDE6@cs.usfca.edu>
	<9da4f45205091203045523c71c@mail.gmail.com>
	<9da4f452050912034161736a7f@mail.gmail.com>
	<A8858BA3-F1A0-4FEC-95ED-307901A428C4@cs.usfca.edu>
	<9da4f45205091902223a5239c1@mail.gmail.com>
	<CA5283F3-8EDD-4080-915F-64FB2F532F6A@cs.usfca.edu>
Message-ID: <9da4f4520509190826736da05e@mail.gmail.com>

2005/9/19, Terence Parr <parrt@cs.usfca.edu>:
> 
> On Sep 19, 2005, at 2:22 AM, Oliver Zeigermann wrote:
> >>>
> >>> class XMLLexer extends Lexer {
> >>>
> >>> ...
> >>>
> >>> private dfa10 = new DFA10();
> >>>
> >>> ...
> >>>
> >>> alt10 = dfa10.predict(input);
> >>>
> >>> ...
> >>>
> >>> }
> >>>
> >>
> > Yes, that's right! My patch does not include the above single
> > construction, as this would have required a bit more than changing a
> > template, though. But I am pretty sure that you know how to do this...
> 
> Actually, should only require a template chnage.  The list of DFAs is
> known to the overall lexer template and so it can apply a small
> template to each DFA, generating the private reused instance. :)

Well, I had to add more than a template change as seen in my patch I
sent. But just a few lines in CodeGenerator.

Maybe you have a better solution?!

Oliver
From ewbank at gmail.com  Mon Sep 19 09:36:36 2005
From: ewbank at gmail.com (Bryan Ewbank)
Date: Mon Sep 19 09:36:39 2005
Subject: [antlr-interest] Please advice about float
In-Reply-To: <A93344061C44D71199B60002B35EBA3502455256@mail.bal>
References: <A93344061C44D71199B60002B35EBA3502455256@mail.bal>
Message-ID: <dd3a065f05091909368197c22@mail.gmail.com>

The original looks okay to me as a way to parse integers or simple
floats.  The problem with proposed change:
   NUMBER : (INT '.' INT) | INT ;
is that it is ambiguous under LL, whereas the original:
   NUMBER : INT ('.' INT)? ;
is not - it has been left-factored.

Note that it does not allow .019, but requires the leading zero before
the dot: 0.019.

- Bryan


On 9/19/05, denis, alexis <adenis@bristol.ca> wrote:
> I'm no  expert in grammars but I'd say a float is an (INT'.'INT) and a NUMBER is
> a  FLOAT or an INT. 
>
> -----Original Message-----
> From: Gevik babakhani    [mailto:gevik@xs4all.nl]
>
> NUMBER             :           INT    ((FLOAT)?)   ;
> FLOAT                 : ('.' INT)   ;   
> INT                      : (DIGIT)+ ;   
> DIGIT                   : '0'..'9'  ;
From mark.kattenbelt at gmail.com  Mon Sep 19 10:27:59 2005
From: mark.kattenbelt at gmail.com (Mark Kattenbelt)
Date: Mon Sep 19 10:28:04 2005
Subject: [antlr-interest] Please advice about float
In-Reply-To: <200509191406.j8JE6h8P035623@smtp-vbr6.xs4all.nl>
References: <200509191406.j8JE6h8P035623@smtp-vbr6.xs4all.nl>
Message-ID: <432EF51F.5010806@gmail.com>

My solution:

REAL_OR_INT
    : ( INT '.' ) => REAL { $setType(REAL); }
    | ('-' INT '.' ) => REAL { $setType(REAL); }
    | INT { $setType(INT); }
    ;

protected INT options { paraphrase = "a constant integer"; }
    : ('0' .. '9')+
    ;

protected REAL options { paraphrase = "a floating point value"; }
    : ('-')? INT '.' INT
    ;

Hope it helps,

Mark Kattenbelt

> Dear all,
>
>  
>
> I would like to parse integers and simple floats without exponents. Is 
> this the correct grammar?
>
>  
>
> class MyLexer extends Lexer;
>
> options {
>
>             k=2;
>
> }
>
>                                                                        
>
> NUMBER          :           INT ((FLOAT)?)
>
>                         ;
>
> protected
>
> FLOAT              : ('.' INT)
>
>                         ;
>
> protected
>
> INT                   :           (DIGIT)+
>
>                         ;
>
>                                                 
>                                                                                                 
>
>
> protected                                              
>
> DIGIT                :           '0'..'9'
>
>                         ;
>
>  
>
> WS     :
>
>     (' '
>
>     | '\t'
>
>     | '\r' '\n' { newline(); }
>
>     | '\n'      { newline(); }
>
>     )
>
>     { $setType(Token.SKIP); }
>
>   ;
>

From ewbank at gmail.com  Mon Sep 19 11:06:02 2005
From: ewbank at gmail.com (Bryan Ewbank)
Date: Mon Sep 19 11:06:07 2005
Subject: [antlr-interest] Please advice about float
In-Reply-To: <432EF51F.5010806@gmail.com>
References: <200509191406.j8JE6h8P035623@smtp-vbr6.xs4all.nl>
	<432EF51F.5010806@gmail.com>
Message-ID: <dd3a065f0509191106594eee15@mail.gmail.com>

Yes, and that works too; because I write in C++, I avoid "=>"
predicates because they incur a thrown exception - very expensive in
C++ - and in this case you don't really need it.

For java, I understand exceptions are not expensive, so this would
perhaps work as well.

On 9/19/05, Mark Kattenbelt <mark.kattenbelt@gmail.com> wrote:
> My solution:
> 
> REAL_OR_INT
>     : ( INT '.' ) => REAL { $setType(REAL); }
>     | ('-' INT '.' ) => REAL { $setType(REAL); }
>     | INT { $setType(INT); }
>     ;
> 
> protected INT options { paraphrase = "a constant integer"; }
>     : ('0' .. '9')+
>     ;
> 
> protected REAL options { paraphrase = "a floating point value"; }
>     : ('-')? INT '.' INT
>     ;
> 
> Hope it helps,
> 
> Mark Kattenbelt
From mail at martin-probst.com  Mon Sep 19 11:55:01 2005
From: mail at martin-probst.com (Martin Probst)
Date: Mon Sep 19 11:55:09 2005
Subject: [antlr-interest] Please advice about float
In-Reply-To: <dd3a065f0509191106594eee15@mail.gmail.com>
References: <200509191406.j8JE6h8P035623@smtp-vbr6.xs4all.nl>
	<432EF51F.5010806@gmail.com>
	<dd3a065f0509191106594eee15@mail.gmail.com>
Message-ID: <1127156101.16245.3.camel@localhost.localdomain>

Hi,

> Yes, and that works too; because I write in C++, I avoid "=>"
> predicates because they incur a thrown exception - very expensive in
> C++ - and in this case you don't really need it. 

Well, not _that_ expensive, but still very expensive. Especially as
( .. ) => also requires that the tokens/characters in the brackets are
being parsed two times. So you get two times the parsing plus an
exception for no good reason.

Martin

From mark.kattenbelt at gmail.com  Mon Sep 19 12:42:35 2005
From: mark.kattenbelt at gmail.com (Mark Kattenbelt)
Date: Mon Sep 19 12:42:40 2005
Subject: [antlr-interest] Please advice about float
In-Reply-To: <dd3a065f0509191106594eee15@mail.gmail.com>
References: <200509191406.j8JE6h8P035623@smtp-vbr6.xs4all.nl>	<432EF51F.5010806@gmail.com>
	<dd3a065f0509191106594eee15@mail.gmail.com>
Message-ID: <432F14AB.20608@gmail.com>

I understand your point and agree that perhaps the implication is not 
ideal. However in my parser I want to sometimes parse INT's and other 
times REAL's and not NUMBER's that can be either.

So how do I avoid using => but still having the benefit of having the 
actual INT and REAL token. Is that possible in Geviks original lexer? 
I'm a bit unsure. I do remember being stuck on this before.

Surely this is a common problem, unless of course I'm being stupid and 
see a problem where there isn't one.

Mark

>Yes, and that works too; because I write in C++, I avoid "=>"
>predicates because they incur a thrown exception - very expensive in
>C++ - and in this case you don't really need it.
>
>For java, I understand exceptions are not expensive, so this would
>perhaps work as well.
>
>On 9/19/05, Mark Kattenbelt <mark.kattenbelt@gmail.com> wrote:
>  
>
>>My solution:
>>
>>REAL_OR_INT
>>    : ( INT '.' ) => REAL { $setType(REAL); }
>>    | ('-' INT '.' ) => REAL { $setType(REAL); }
>>    | INT { $setType(INT); }
>>    ;
>>
>>protected INT options { paraphrase = "a constant integer"; }
>>    : ('0' .. '9')+
>>    ;
>>
>>protected REAL options { paraphrase = "a floating point value"; }
>>    : ('-')? INT '.' INT
>>    ;
>>
>>Hope it helps,
>>
>>Mark Kattenbelt
>>    
>>
>
>  
>

From mail at martin-probst.com  Mon Sep 19 13:11:35 2005
From: mail at martin-probst.com (Martin Probst)
Date: Mon Sep 19 13:11:43 2005
Subject: [antlr-interest] Please advice about float
In-Reply-To: <432F14AB.20608@gmail.com>
References: <200509191406.j8JE6h8P035623@smtp-vbr6.xs4all.nl>
	<432EF51F.5010806@gmail.com>
	<dd3a065f0509191106594eee15@mail.gmail.com>
	<432F14AB.20608@gmail.com>
Message-ID: <1127160695.16245.8.camel@localhost.localdomain>

Hi,

> I understand your point and agree that perhaps the implication is not 
> ideal. However in my parser I want to sometimes parse INT's and other 
> times REAL's and not NUMBER's that can be either.

You can set the type of a token within the rule, e.g.:

NUMBER:
  INT ( FLOATPART { $setType(FLOAT);})?

FLOATPART:
  '.' INT { $setType(FLOAT); }

So if you just have an INT, then the corresponding token will be a
NUMBER, but if it goes on into the FLOATPART parentheses the type will
be set to FLOAT. I made the rule FLOATPART public with a type setter so
that it's also possible to parse ".5" as a FLOAT.

Martin


From prashant.deva at gmail.com  Tue Sep 20 06:51:15 2005
From: prashant.deva at gmail.com (Prashant Deva)
Date: Tue Sep 20 06:51:19 2005
Subject: [antlr-interest] Re: Who wants to try ANTLR Studio?
In-Reply-To: <41fed8f8050916201166ede979@mail.gmail.com>
References: <41fed8f8050916122557cacbeb@mail.gmail.com>
	<41fed8f8050916201166ede979@mail.gmail.com>
Message-ID: <41fed8f805092006515856a0f8@mail.gmail.com>

I am still looking for someone with a mac :)

PRASHANT

On 9/17/05, Prashant Deva <prashant.deva@gmail.com> wrote:
> For everyone who wants to know what ANTLR Studio does -
> 
> Goto www.antlrstudio.com and check out the videos :)
> 
> PRASHANT
> 
> On 9/17/05, Prashant Deva <prashant.deva@gmail.com> wrote:
> > I am looking for someone to test ANTLR Studio.
> >
> > You will need eclipse 3.1 and java 5.
> >
> > I would like to test it out on a mac and linux machine and on a loew
> > end config , arnd 1.4 ghz.
> >
> > If you are interested please mail me. The beta version will expire after 7 days.
> >
> > PRASHANT
> >
>
From oliver.zeigermann at gmail.com  Tue Sep 20 09:05:26 2005
From: oliver.zeigermann at gmail.com (Oliver Zeigermann)
Date: Tue Sep 20 09:05:30 2005
Subject: [antlr-interest] ANTLR 3: Clueless about DFA prediction
Message-ID: <9da4f45205092009056b65592e@mail.gmail.com>

I simply do not understand the DFA based predicion for this very
simple lexer grammar:

TEXT : (~'<')+ ;
TAG : (~'>')+ ;

I have attached the generated DFA as a GIF which reads like the TAG
rule is predicated if *anywhere in the future input* there is an '<'
to be found. This certainly was not my intention...

Reading

http://www.antlr.org/blog/antlr3/lookahead.tml

(and actually understand most bits, but not all) and looking at the
NFAs (also attached) for each rule I simply do not understand why the
DFA looks the way it does.

Can anyone explain?

Thanks in advance

Oliver
-------------- next part --------------
A non-text attachment was scrubbed...
Name: XMLLexer_dec-3.gif
Type: image/gif
Size: 3643 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20050920/12703684/XMLLexer_dec-3.gif
-------------- next part --------------
A non-text attachment was scrubbed...
Name: TAG.gif
Type: image/gif
Size: 3857 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20050920/12703684/TAG.gif
-------------- next part --------------
A non-text attachment was scrubbed...
Name: TEXT.gif
Type: image/gif
Size: 3736 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20050920/12703684/TEXT.gif
From hdeshmane at montalvosystems.com  Tue Sep 20 09:37:56 2005
From: hdeshmane at montalvosystems.com (Harsh Deshmane)
Date: Tue Sep 20 09:38:52 2005
Subject: [antlr-interest] grammar question
Message-ID: <200509200937.56380.hdeshmane@montalvosystems.com>


Hi,

I have a simple grammar question-

for spice syntax, a transistor is defined as

Mname term1 term2 term3 term4 

name can be 


NAME_IDENTIFIER
        options {testLiterals=true; }
        :
        ('0'..'9'|'a'..'z'|'_'| '$' |'#'|'[' |']'|'%'|'+'|'-'|'/'|'<'|'>')+
        ;

(LT(1)->getColumn() == 1) "M" gives me token at the first column ?
However, if I try to specify

M<name> by

"M"(NAME_IDENTIFIER)+
or
"M"(STRING)+
or
(M(STRING)+)

or any such construct, I get the parser expecting M to be the first token
and then followed by the STRING or IDENTIFIER as the second token.

How can I define "M<anything>" ?

For my case,
syntax like
M term1 term2 term3 term4

passes, but I need
Mname term1 ..
 to pass.

thanks,
-harsh

From claudius at heitz.info  Fri Sep  9 13:29:41 2005
From: claudius at heitz.info (Claudius Heitz)
Date: Tue Sep 20 09:58:18 2005
Subject: [antlr-interest] question concerning ANTLR java grammar
Message-ID: <1045434862@web.de>


Hi,

I used the current java grammar (http://www.antlr.org/grammar/1109874324096/java1.5.zip) and noticed that it accepts code that isn't allowed in Java.

I show it on a small example:

public class E {
	public static void main(String[] args) {
		java.lang.String;
		new ChildOfInner();
	}
}

The wrong thing on that is the expression: java.lang.String;

Eclipse tells: "Syntax error.  Insert "AssignmentOperator ArrayInitializer" to complete expression"

Because Eclipse doesn't accept it,  I suppose this isn't legal java code.
But the ANTLR java grammar accepts it as an expression.

Is this a bug?
If yes, is it already known?


Thanks for answering!

Regards
Claudius


______________________________________________________________________
XXL-Speicher, PC-Virenschutz, Spartarife & mehr: Nur im WEB.DE Club!		
Jetzt gratis testen! http://freemail.web.de/home/landingpad/?mc=021130

From Jagboy at pacbell.net  Sat Sep 10 07:44:03 2005
From: Jagboy at pacbell.net (Ray Livingston)
Date: Tue Sep 20 09:58:29 2005
Subject: [antlr-interest] How the heck do you make this work on Windows?
Message-ID: <20050910144648.E2B52DCC29@www.antlr.org>

I've tried downloading the "stand-alone" Win32 executable, downloading the
jar, downloading various versions, and I can't for the life of me make
AntlrWorks actually work.  Can someone explain to me step-by-step how to
make this work?  I have, only once, gotten the GUI to come up, but it didn't
work correctly, refusing to create the syntax diagram, and throwing up an
unintelligible error message when I tried to do almost anything else, like
compiling or debugging.  Shouldn't this be as easy as copy this file to
here, and run it?  What am I missing?
 
Regards,
Ray L.
 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20050910/12558306/attachment.html
From scmikes at ugs.com  Mon Sep 12 07:36:30 2005
From: scmikes at ugs.com (Schneider, Michael)
Date: Tue Sep 20 09:58:31 2005
Subject: [antlr-interest] Grammer request:  OGL  HLSL
Message-ID: <49199579A2BB32438A7572AF3DBB2FB50B94B7E9@uscimplm001.net.plm.eds.com>

I did a google search, and a site search with no luck.
 
Does anyone have an OGL HLSL (Open Geometry Language, High Level Shader Lanague)  grammer?
 
Thanks,
Mike 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20050912/f2652e14/attachment.html
From mrosgood at yahoo.com  Wed Sep 14 13:38:42 2005
From: mrosgood at yahoo.com (Jason Aaron Osgood)
Date: Tue Sep 20 09:58:34 2005
Subject: [antlr-interest] Tree Parser vs XPath
Message-ID: <20050914203842.55341.qmail@web54115.mail.yahoo.com>

Hi Terr, Everybody-


I've got another goofy idea.  I think all those marshalling and O/R
tools are mightily overwraught.  I want something a lot easier and
lighter.  

I don't know what to call my idea.  "Event triggering streaming parser"
is the best I've come up with.  So I'll describe how I'd like it to
work:

 - Read XML document
 - Fire SAX events
 - Streaming (no in-memory representation)
 - Some XPaths for pattern matching
 - Fire an event (e.g. call a method) whenever there's a match
 - Use templates and stuff for sub-patterns (selecting rulesets)

That's my ideal.  Right now, I'm using SAXON's XSLT and my own
extensions, which just wrap JDBC.  It's tremendously ugly and a pain in
the ass to debug.  But the cool part is I go directly from XML to JDBC
with no intermediate marshalling.  It's pretty fast.

I've been reading up on streaming XPath, XQuery, transducers and the
like.  I don't quite grasp the ideas yet.  But what I've gathered thus
far is that everyone's reading in XML and then emitting XML.  It
shouldn't be *too hard* something to do method calls instead.

However.  I don't want to reinvent.  Much.  Whatever I do, it has to be
easy to customize.  Some users seem to be able to kinda grasp XPath. 
But expecting them to learn ANLTR is expecting too much.  Also, say I
was to blend XPath with method calls.  Pretty soon my new language
would start looking an awful lot like ANTLR, no?

So I've got some questions.

What's the formal difference between ANTLR Tree Parser and XPath?  I
know they're both languages.  Tree Parser is LL(k), right?  What is
XPath?

ANTLR's grammar is like a super-EBNF, right?  Couldn't the rules also
be expressed as XPath-like queries?

Wouldn't it be cool if Parser and Tree Parser permitted streaming?


Cheers, Jason Aaron Osgood / Seattle WA

zappini.blogspot.com
From new_open_close at yahoo.com  Thu Sep 15 06:51:54 2005
From: new_open_close at yahoo.com (None None)
Date: Tue Sep 20 09:58:36 2005
Subject: [antlr-interest] lexical nondeterminism
Message-ID: <20050915135154.80292.qmail@web32614.mail.mud.yahoo.com>

This might be in the FAQ, but I haven't seen it.  A
few months ago I started to look at antlr and had a
lexical problem.  I haven't had a chance to look at
again until today, but when I tried some of the
suggestions they didn't work.  If anyone could point
me in the correct direction it would be much
appreciated.

I have a file called dms.g that contains the
following:

class TestLexer extends Lexer;

options {
          k=10;
        }

protected LATLON : DMS "," DMS | FLOAT "," FLOAT;
protected DMS    : DIGIT DIGIT (DIGIT)? ":" DIGIT
DIGIT ":" DIGIT DIGIT "." DIGIT;
protected FLOAT  : (SIGN)? (DIGIT)+ ( "." (DIGIT)* )?;
protected SIGN   : "+" | "-";
protected DIGIT  : '0'..'9';


When I run "antlr dms.g" I get the following output

ANTLR Parser Generator   Version 2.7.5 (20050615)  
1989-2005 jGuru.com
dms.g:7: warning:lexical nondeterminism between alts 1
and 2 of block upon
dms.g:7:     k==1:'0'..'9'
dms.g:7:     k==2:'0'..'9'
dms.g:7:     k==3:'0'..'9'
dms.g:7:     k==4:'0'..'9'
dms.g:7:     k==5:'0'..'9'
dms.g:7:     k==6:'0'..'9'
dms.g:7:     k==7:'0'..'9'
dms.g:7:     k==8:'0'..'9'
dms.g:7:     k==9:'.','0'..'9'
dms.g:7:     k==10:'.','0'..'9'


It seems to me that by the 3rd or 4th token the ":"
the lexer should be able to tell which production (DMS
or FLOAT) was being constructed.  The thing puzzles me
is that if the DMS rule is changed to:

protected DMS    : DIGIT DIGIT DIGIT ":" DIGIT DIGIT
":" DIGIT DIGIT "." DIGIT;

antlr is happy and doesn't issue any errors!

Thanks in advance.

 


	
		
______________________________________________________ 
Yahoo! for Good 
Donate to the Hurricane Katrina relief effort. 
http://store.yahoo.com/redcross-donate3/ 

From dragonoe at univmail.cis.mcmaster.ca  Thu Sep 15 15:22:27 2005
From: dragonoe at univmail.cis.mcmaster.ca (O.E. Dragon)
Date: Tue Sep 20 09:58:37 2005
Subject: [antlr-interest] Performing an action based on alternative result
In-Reply-To: <1126789374.15141@mx9.mysite4now.com>
Message-ID: <web-104052488@cgpsrv2.cis.mcmaster.ca>

On Thu, 15 Sep 2005 08:54:16 -0400
 "Don Caton" <dcaton@shorelinesoftware.com> wrote:
>   foobar
>      : t:foobar2
>   { doSomethingWith( t ); };
> 
>   foobar2
>      : "function" | "subroutine" | "program"
>      ;

I really like your solution (not that I hated the others ;). It's
simple and elegant, and best of all it doesn't make use of LT() or
target language actions which I prefer to leave out of a grammar, as
much as possible.

In a somewhat related problem, I'm in need for a tree parser that
achieves something similar. The problem I'm having is that you can
neither specify alternate root nodes nor use a non-terminal (rule) as a
root node. Is there a way to cope with the code duplication ensuing
other that would be better than only putting the common children in a
sub-rule?

Thanks for your help (all who replied). I really appreciate it!

-Olivier
From prashant.deva at gmail.com  Tue Sep 20 10:52:01 2005
From: prashant.deva at gmail.com (Prashant Deva)
Date: Tue Sep 20 10:52:04 2005
Subject: [antlr-interest] grammar question
In-Reply-To: <200509200937.56380.hdeshmane@montalvosystems.com>
References: <200509200937.56380.hdeshmane@montalvosystems.com>
Message-ID: <41fed8f8050920105233988deb@mail.gmail.com>

Try using a syntactic proedicate.

Something like -

MID  :  ("M" STRING) => M (STRING)+
;

PRASHANT
      

On 9/20/05, Harsh Deshmane <hdeshmane@montalvosystems.com> wrote:
> 
> Hi,
> 
> I have a simple grammar question-
> 
> for spice syntax, a transistor is defined as
> 
> Mname term1 term2 term3 term4
> 
> name can be
> 
> 
> NAME_IDENTIFIER
>         options {testLiterals=true; }
>         :
>         ('0'..'9'|'a'..'z'|'_'| '$' |'#'|'[' |']'|'%'|'+'|'-'|'/'|'<'|'>')+
>         ;
> 
> (LT(1)->getColumn() == 1) "M" gives me token at the first column ?
> However, if I try to specify
> 
> M<name> by
> 
> "M"(NAME_IDENTIFIER)+
> or
> "M"(STRING)+
> or
> (M(STRING)+)
> 
> or any such construct, I get the parser expecting M to be the first token
> and then followed by the STRING or IDENTIFIER as the second token.
> 
> How can I define "M<anything>" ?
> 
> For my case,
> syntax like
> M term1 term2 term3 term4
> 
> passes, but I need
> Mname term1 ..
>  to pass.
> 
> thanks,
> -harsh
> 
>
From tmoog at polhode.com  Tue Sep 20 10:54:25 2005
From: tmoog at polhode.com (Tom Moog)
Date: Tue Sep 20 10:54:31 2005
Subject: [antlr-interest] Tree Parser vs XPath
In-Reply-To: <20050914203842.55341.qmail@web54115.mail.yahoo.com>
References: <20050914203842.55341.qmail@web54115.mail.yahoo.com>
Message-ID: <Pine.NEB.4.63.0509201348400.17419@panix5.panix.com>


Dan Suciu of the Univ of Washington has been doing 
work in this area.  In some cases there are axis
restrictions in order to achieve streaming.

http://www.cs.washington.edu/homes/suciu/XMLTK/

It may now be located at sourceforge.

Some of the ideas in this paper influenced the
design of a streaming xpath engine in a project
at my employer (Sarvega).


From parrt at cs.usfca.edu  Tue Sep 20 11:06:59 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Tue Sep 20 11:07:05 2005
Subject: [antlr-interest] ANTLR 3: Clueless about DFA prediction
In-Reply-To: <9da4f45205092009056b65592e@mail.gmail.com>
References: <9da4f45205092009056b65592e@mail.gmail.com>
Message-ID: <E1D1A095-6BB2-4629-AE23-974D5072D635@cs.usfca.edu>

On Sep 20, 2005, at 9:05 AM, Oliver Zeigermann wrote:

> I simply do not understand the DFA based predicion for this very
> simple lexer grammar:
>
> TEXT : (~'<')+ ;
> TAG : (~'>')+ ;
>
> I have attached the generated DFA as a GIF which reads like the TAG
> rule is predicated if *anywhere in the future input* there is an '<'
> to be found. This certainly was not my intention...

Hi Oliver, thanks for finding this!  It is a bug in my IntervalSet  
code I think.  If I change the characters to be adjacent, I get a  
different DFA!!!!  The following generates a proper DFA:

TEXT : (~'r')+ ;
TAG : (~'s')+ ;

whereas this one does not:

TEXT : (~'r')+ ;
TAG : (~'t')+ ;

Here is the prediction DFA for the first one with contiguous chars:
-------------- next part --------------
A non-text attachment was scrubbed...
Name: t2_dec-3.pdf
Type: application/pdf
Size: 14198 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20050920/9fb757ab/t2_dec-3-0001.pdf
-------------- next part --------------

Note that ANTLR stops the analysis when it uniquely predicts which  
alt will win--it does not create a DFA to actually match the input.   
So, you'll note that states 2 and 3 do not have loops on them.  Also,  
the EOT option is like an else clause and effectively is the 's' arc  
here.

Keep up the great work, Oliver!!!!  I'm adding this as a unit test  
and tracking down the issue with the IntervalSets...

Woohoo!  Can't wait for the workshop.

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com

From mail at martin-probst.com  Tue Sep 20 11:19:00 2005
From: mail at martin-probst.com (Martin Probst)
Date: Tue Sep 20 11:19:15 2005
Subject: [antlr-interest] grammar question
In-Reply-To: <41fed8f8050920105233988deb@mail.gmail.com>
References: <200509200937.56380.hdeshmane@montalvosystems.com>
	<41fed8f8050920105233988deb@mail.gmail.com>
Message-ID: <1127240340.22021.9.camel@localhost.localdomain>

Hi,

On Tue, 2005-09-20 at 23:22 +0530, Prashant Deva wrote:
> Try using a syntactic proedicate.
> 
> Something like -
> 
> MID  :  ("M" STRING) => M (STRING)+
> ;

Uh, try the same not using a syntactic predicate:

MID: "M" NAME_IDENTIFIER;

Martin

From mail at martin-probst.com  Tue Sep 20 11:26:16 2005
From: mail at martin-probst.com (Martin Probst)
Date: Tue Sep 20 11:26:36 2005
Subject: [antlr-interest] Tree Parser vs XPath
In-Reply-To: <20050914203842.55341.qmail@web54115.mail.yahoo.com>
References: <20050914203842.55341.qmail@web54115.mail.yahoo.com>
Message-ID: <1127240776.22021.11.camel@localhost.localdomain>

Hi,

there is something not using SAX but rather DOM here:
http://www.asciiarmor.com/blog/default/2005/07/05/DAX_Checkedin.txt

The nice part about it is the use of Java 1.5 annotations.

Martin

From prashant.deva at gmail.com  Tue Sep 20 13:57:20 2005
From: prashant.deva at gmail.com (Prashant Deva)
Date: Tue Sep 20 13:57:24 2005
Subject: [antlr-interest] grammar question
In-Reply-To: <1127240340.22021.9.camel@localhost.localdomain>
References: <200509200937.56380.hdeshmane@montalvosystems.com>
	<41fed8f8050920105233988deb@mail.gmail.com>
	<1127240340.22021.9.camel@localhost.localdomain>
Message-ID: <41fed8f8050920135763a28644@mail.gmail.com>

> Uh, try the same not using a syntactic predicate:
> 
> MID: "M" NAME_IDENTIFIER;
I thought he already used that and failed ;)

PRASHANT

On 9/20/05, Martin Probst <mail@martin-probst.com> wrote:
> Hi,
> 
> On Tue, 2005-09-20 at 23:22 +0530, Prashant Deva wrote:
> > Try using a syntactic proedicate.
> >
> > Something like -
> >
> > MID  :  ("M" STRING) => M (STRING)+
> > ;
> 
> Uh, try the same not using a syntactic predicate:
> 
> MID: "M" NAME_IDENTIFIER;
> 
> Martin
> 
>
From parrt at cs.usfca.edu  Tue Sep 20 14:13:11 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Tue Sep 20 14:13:14 2005
Subject: [antlr-interest] ANTLR 3: Clueless about DFA prediction
In-Reply-To: <E1D1A095-6BB2-4629-AE23-974D5072D635@cs.usfca.edu>
References: <9da4f45205092009056b65592e@mail.gmail.com>
	<E1D1A095-6BB2-4629-AE23-974D5072D635@cs.usfca.edu>
Message-ID: <1B8798D8-B0B4-4C4F-8231-63DD0CE1990E@cs.usfca.edu>

On Sep 20, 2005, at 11:06 AM, Terence Parr wrote:
> On Sep 20, 2005, at 9:05 AM, Oliver Zeigermann wrote:
>> I simply do not understand the DFA based predicion for this very
>> simple lexer grammar:
>>
>> TEXT : (~'<')+ ;
>> TAG : (~'>')+ ;
>>
>> I have attached the generated DFA as a GIF which reads like the TAG
>> rule is predicated if *anywhere in the future input* there is an '<'
>> to be found. This certainly was not my intention...
>>
>
> Hi Oliver, thanks for finding this!  It is a bug in my IntervalSet  
> code I think.  If I change the characters to be adjacent, I get a  
> different DFA!!!!

Wow!  Turns out there was a bug in my subtract and intersection code  
for IntervalSet.  BTW, in case you've never tried, building an  
IntervalSet is nontrivial!  BitSets are trivial in comparison.  Here  
is the new correct DFA:

-------------- next part --------------
A non-text attachment was scrubbed...
Name: t_dec-3.pdf
Type: application/pdf
Size: 14193 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20050920/4efc43ed/t_dec-3.pdf
-------------- next part --------------

New unit tests for IntervalSet and DFA conversion.  All pass green.

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com

From oliver.zeigermann at gmail.com  Tue Sep 20 15:02:59 2005
From: oliver.zeigermann at gmail.com (Oliver Zeigermann)
Date: Tue Sep 20 15:03:03 2005
Subject: [antlr-interest] ANTLR 3: Clueless about DFA prediction
In-Reply-To: <1B8798D8-B0B4-4C4F-8231-63DD0CE1990E@cs.usfca.edu>
References: <9da4f45205092009056b65592e@mail.gmail.com>
	<E1D1A095-6BB2-4629-AE23-974D5072D635@cs.usfca.edu>
	<1B8798D8-B0B4-4C4F-8231-63DD0CE1990E@cs.usfca.edu>
Message-ID: <9da4f45205092015025d0260eb@mail.gmail.com>

Cool! Your DFA looks much better! Any chance to get the corrected code?

Oliver


2005/9/20, Terence Parr <parrt@cs.usfca.edu>:
> On Sep 20, 2005, at 11:06 AM, Terence Parr wrote:
> > On Sep 20, 2005, at 9:05 AM, Oliver Zeigermann wrote:
> >> I simply do not understand the DFA based predicion for this very
> >> simple lexer grammar:
> >>
> >> TEXT : (~'<')+ ;
> >> TAG : (~'>')+ ;
> >>
> >> I have attached the generated DFA as a GIF which reads like the TAG
> >> rule is predicated if *anywhere in the future input* there is an '<'
> >> to be found. This certainly was not my intention...
> >>
> >
> > Hi Oliver, thanks for finding this!  It is a bug in my IntervalSet
> > code I think.  If I change the characters to be adjacent, I get a
> > different DFA!!!!
> 
> Wow!  Turns out there was a bug in my subtract and intersection code
> for IntervalSet.  BTW, in case you've never tried, building an
> IntervalSet is nontrivial!  BitSets are trivial in comparison.  Here
> is the new correct DFA:
> 
> 
> 
> 
> New unit tests for IntervalSet and DFA conversion.  All pass green.
> 
> Ter
> --
> CS Professor & Grad Director, University of San Francisco
> Creator, ANTLR Parser Generator, http://www.antlr.org
> Cofounder, http://www.jguru.com
> 
> 
> 
> 
>
From gevik at xs4all.nl  Tue Sep 20 15:16:09 2005
From: gevik at xs4all.nl (Gevik babakhani)
Date: Tue Sep 20 15:16:11 2005
Subject: [antlr-interest] Antlr Studio is cool.
Message-ID: <200509202216.j8KMG8FB001579@smtp-vbr1.xs4all.nl>

I was looking at the AntlrStudio (http://www.antlrstudio.com/). This thing
is so cooool that I think the difficulty of writing and testing Lexers and
Parsers with antlr will be a thing of the past.

Not convinced yet? Just check http://www.antlrstudio.com/videos/videos.htm

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20050921/329f7a69/attachment-0001.html
From parrt at cs.usfca.edu  Tue Sep 20 15:25:48 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Tue Sep 20 15:25:52 2005
Subject: [antlr-interest] ANTLR 3: Clueless about DFA prediction
In-Reply-To: <9da4f45205092015025d0260eb@mail.gmail.com>
References: <9da4f45205092009056b65592e@mail.gmail.com>
	<E1D1A095-6BB2-4629-AE23-974D5072D635@cs.usfca.edu>
	<1B8798D8-B0B4-4C4F-8231-63DD0CE1990E@cs.usfca.edu>
	<9da4f45205092015025d0260eb@mail.gmail.com>
Message-ID: <0F747AC4-94D0-4BE1-A893-06333135E4E9@cs.usfca.edu>


On Sep 20, 2005, at 3:02 PM, Oliver Zeigermann wrote:

> Cool! Your DFA looks much better! Any chance to get the corrected  
> code?

Sure. :)  I'll send you the new IntervalSet.java directly as I won't  
push a new ANTLR v3 release for a little bit.

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com

From scott at javadude.com  Tue Sep 20 15:43:41 2005
From: scott at javadude.com (Scott Stanchfield)
Date: Tue Sep 20 15:48:27 2005
Subject: [antlr-interest] Tree Parser vs XPath
In-Reply-To: <20050914203842.55341.qmail@web54115.mail.yahoo.com>
References: <20050914203842.55341.qmail@web54115.mail.yahoo.com>
Message-ID: <29014.65.114.139.158.1127256221.squirrel@www.javadude.com>

Have you taken a look at ANTXR, my XML parser using (slightly modified)
ANTLR grammars?

See http://javadude.com/tools/antxr

Sounds like it's kinda along the lines of what you're thinking of...

-- Scott

From amohombe at yahoo.com  Wed Sep 21 03:05:59 2005
From: amohombe at yahoo.com (Ahmed Mohombe)
Date: Wed Sep 21 03:12:00 2005
Subject: [antlr-interest] Re: Antlr Studio is cool.
In-Reply-To: <200509202216.j8KMG8FB001579@smtp-vbr1.xs4all.nl>
References: <200509202216.j8KMG8FB001579@smtp-vbr1.xs4all.nl>
Message-ID: <dgrbaa$8gd$1@sea.gmane.org>

> I was looking at the AntlrStudio (http://www.antlrstudio.com/). This 
> thing is so cooool that I think the difficulty of writing and testing 
> Lexers and Parsers with antlr will be a thing of the past. 
> Not convinced yet? Just check http://www.antlrstudio.com/videos/videos.htm
No, not at all - on the contrary.
Eh? Videos without downloadable betas/alphas or whatever? What's the point?

Shall be released soon since months? (it was "in a few days" for long time :) ).

IMHO: vaporware till this very moment.

Oh, yeah, and the best: it will be commercial after everyone believed the
contrary :) - just read the author's blog.

Ahmed.
P.S. Don't get me wrong, but many users are totally disappointed about this 'move'.
It was strange from the beginning that there was no download link - only videos.

From gevik at xs4all.nl  Wed Sep 21 03:24:24 2005
From: gevik at xs4all.nl (Gevik babakhani)
Date: Wed Sep 21 03:24:27 2005
Subject: [antlr-interest] Re: Antlr Studio is cool.
In-Reply-To: <dgrbaa$8gd$1@sea.gmane.org>
Message-ID: <200509211024.j8LAOMDp026465@smtp-vbr4.xs4all.nl>

I have requested a download from the author for testing and evaluating and I
have received a copy. The author also says that if you want a tryout, you
should drop him an e-mail.

I understand why this may not be en opensource project somehow. I wish it
would though. Anyway...

I am very much found of this tool up until now.



> -----Original Message-----
> From: antlr-interest-bounces@antlr.org [mailto:antlr-interest-
> bounces@antlr.org] On Behalf Of Ahmed Mohombe
> Sent: Wednesday, September 21, 2005 12:06 PM
> To: antlr-interest@antlr.org
> Subject: [antlr-interest] Re: Antlr Studio is cool.
> 
> > I was looking at the AntlrStudio (http://www.antlrstudio.com/). This
> > thing is so cooool that I think the difficulty of writing and testing
> > Lexers and Parsers with antlr will be a thing of the past.
> > Not convinced yet? Just check
> http://www.antlrstudio.com/videos/videos.htm
> No, not at all - on the contrary.
> Eh? Videos without downloadable betas/alphas or whatever? What's the
> point?
> 
> Shall be released soon since months? (it was "in a few days" for long time
> :) ).
> 
> IMHO: vaporware till this very moment.
> 
> Oh, yeah, and the best: it will be commercial after everyone believed the
> contrary :) - just read the author's blog.
> 
> Ahmed.
> P.S. Don't get me wrong, but many users are totally disappointed about
> this 'move'.
> It was strange from the beginning that there was no download link - only
> videos.


From gt54-antlr at cyconix.com  Wed Sep 21 03:38:06 2005
From: gt54-antlr at cyconix.com (Paul Johnson)
Date: Wed Sep 21 03:38:14 2005
Subject: [antlr-interest] Re: Antlr Studio is cool.
In-Reply-To: <200509211024.j8LAOMDp026465@smtp-vbr4.xs4all.nl>
References: <200509211024.j8LAOMDp026465@smtp-vbr4.xs4all.nl>
Message-ID: <4331380E.7070408@cyconix.com>

Gevik babakhani wrote:
> I have requested a download from the author for testing and evaluating and I
> have received a copy. The author also says that if you want a tryout, you
> should drop him an e-mail.

With a 7-day licence, and no indication of future pricing? What's the point?

From gevik at xs4all.nl  Wed Sep 21 04:02:52 2005
From: gevik at xs4all.nl (Gevik babakhani)
Date: Wed Sep 21 04:02:53 2005
Subject: [antlr-interest] Re: Antlr Studio is cool.
In-Reply-To: <4331380E.7070408@cyconix.com>
Message-ID: <200509211102.j8LB2npb008722@smtp-vbr3.xs4all.nl>

I just think this is a very good app. It makes it easy to write antlr
parser.

> -----Original Message-----
> From: antlr-interest-bounces@antlr.org [mailto:antlr-interest-
> bounces@antlr.org] On Behalf Of Paul Johnson
> Sent: Wednesday, September 21, 2005 12:38 PM
> To: ANTLR Interest
> Subject: Re: [antlr-interest] Re: Antlr Studio is cool.
> 
> Gevik babakhani wrote:
> > I have requested a download from the author for testing and evaluating
> and I
> > have received a copy. The author also says that if you want a tryout,
> you
> > should drop him an e-mail.
> 
> With a 7-day licence, and no indication of future pricing? What's the
> point?


From amohombe at yahoo.com  Wed Sep 21 04:15:08 2005
From: amohombe at yahoo.com (Ahmed Mohombe)
Date: Wed Sep 21 04:18:31 2005
Subject: [antlr-interest] Re: Antlr Studio is cool.
In-Reply-To: <200509211024.j8LAOMDp026465@smtp-vbr4.xs4all.nl>
References: <dgrbaa$8gd$1@sea.gmane.org>
	<200509211024.j8LAOMDp026465@smtp-vbr4.xs4all.nl>
Message-ID: <dgrfbs$l19$1@sea.gmane.org>

> I have requested a download from the author for testing and evaluating and I
> have received a copy. The author also says that if you want a tryout, you
> should drop him an e-mail.
So I (we users) should 'ask' to be 'allowed' to do the test work for a commercial
product? And than you get 7 days for that?
Sorry I don't play by these rules.

I'm willing to help testing commercial products (and I did with many), but the process
should be user friendly,direct and sincere from the beginning.

Besides, I think ANTRLWorks it's great and has a bigger potentials since it's
not dependent on an IDE.

That's why I asked about where is the ANTLR CVS repository.
I would be also interested in helping improving it, and
I think many users here would do the same if they would have access.

Ahmed.

From gevik at xs4all.nl  Wed Sep 21 04:34:59 2005
From: gevik at xs4all.nl (Gevik babakhani)
Date: Wed Sep 21 04:35:01 2005
Subject: [antlr-interest] Re: Antlr Studio is cool.
In-Reply-To: <dgrfbs$l19$1@sea.gmane.org>
Message-ID: <200509211134.j8LBYvau071988@smtp-vbr1.xs4all.nl>

ANTRLWorks? Is this something new?

> -----Original Message-----
> From: antlr-interest-bounces@antlr.org [mailto:antlr-interest-
> bounces@antlr.org] On Behalf Of Ahmed Mohombe
> Sent: Wednesday, September 21, 2005 1:15 PM
> To: antlr-interest@antlr.org
> Subject: [antlr-interest] Re: Antlr Studio is cool.
> 
> > I have requested a download from the author for testing and evaluating
> and I
> > have received a copy. The author also says that if you want a tryout,
> you
> > should drop him an e-mail.
> So I (we users) should 'ask' to be 'allowed' to do the test work for a
> commercial
> product? And than you get 7 days for that?
> Sorry I don't play by these rules.
> 
> I'm willing to help testing commercial products (and I did with many), but
> the process
> should be user friendly,direct and sincere from the beginning.
> 
> Besides, I think ANTRLWorks it's great and has a bigger potentials since
> it's
> not dependent on an IDE.
> 
> That's why I asked about where is the ANTLR CVS repository.
> I would be also interested in helping improving it, and
> I think many users here would do the same if they would have access.
> 
> Ahmed.


From kroepke at dolphin-services.de  Wed Sep 21 04:41:08 2005
From: kroepke at dolphin-services.de (Kay Roepke)
Date: Wed Sep 21 04:41:14 2005
Subject: [antlr-interest] Re: Antlr Studio is cool.
In-Reply-To: <200509211134.j8LBYvau071988@smtp-vbr1.xs4all.nl>
References: <200509211134.j8LBYvau071988@smtp-vbr1.xs4all.nl>
Message-ID: <45757A3E-A29B-48D0-97A6-51724BBA8E7A@dolphin-services.de>


On 21. Sep 2005, at 13:34 Uhr, Gevik babakhani wrote:

> ANTRLWorks? Is this something new?
>

Google is your friend:
http://www.antlr.org/works/

Regards,

Kay
From amohombe at yahoo.com  Wed Sep 21 04:40:40 2005
From: amohombe at yahoo.com (Ahmed Mohombe)
Date: Wed Sep 21 04:45:10 2005
Subject: [antlr-interest] Re: Antlr Studio is cool.
In-Reply-To: <200509211134.j8LBYvau071988@smtp-vbr1.xs4all.nl>
References: <dgrfbs$l19$1@sea.gmane.org>
	<200509211134.j8LBYvau071988@smtp-vbr1.xs4all.nl>
Message-ID: <dgrgro$pki$1@sea.gmane.org>

> ANTRLWorks? Is this something new?
It's an IDE for ANTLR3 in early stage.
You can find it on the www.antlr.org download page (even if the page it's a little messy).
I think version EA3 is the last as of this moment.
You can find more details about ANTLR3 and the IDE on this list,
and on the site (even if the menu links are not that suggesting).
ANTLR3 seems to improve greatly many things over 2.x.x .

Ahmed.

From scott at javadude.com  Wed Sep 21 05:27:33 2005
From: scott at javadude.com (Scott Stanchfield)
Date: Wed Sep 21 05:28:21 2005
Subject: [antlr-interest] Re: Antlr Studio is cool.
In-Reply-To: <dgrbaa$8gd$1@sea.gmane.org>
Message-ID: <200509211223.j8LCMqx6031984@s2.eroute.net>

As far as I recall, Prashant never said it would be free. The "video-only"
previews were just to demonstrate what he was doing and gauge interest. 

RE "testing a commercial product", have you never heard of public betas?
Many many many commercial products have public betas, and some even ask that
you pay to participate (the M$ office betas, for example).

Absolutely nothing wrong with this, so please chill...

Prashant has chatted with me about price possibilities, and he's looking to
keep it inexpensive. I told him it's a very niche market and that he may not
sell many unless the price is very low, and even then he probably wouldn't
sell many.

I think you should view it more as a "payware" tool than a commercial
product (as he's not doing this as a business).

I do recommend that if you think ANTLRStudio may be potentially useful that
you send a note to Prashant stating what you would be willing to pay for a
tool like that, as it may help him set a price.

Later,
-- Scott


From gevik at xs4all.nl  Wed Sep 21 05:49:45 2005
From: gevik at xs4all.nl (Gevik babakhani)
Date: Wed Sep 21 05:49:46 2005
Subject: [antlr-interest] Re: Antlr Studio is cool.
In-Reply-To: <200509211223.j8LCMqx6031984@s2.eroute.net>
Message-ID: <200509211249.j8LCngAB063855@smtp-vbr4.xs4all.nl>

Totally agree :)

> -----Original Message-----
> From: antlr-interest-bounces@antlr.org [mailto:antlr-interest-
> bounces@antlr.org] On Behalf Of Scott Stanchfield
> Sent: Wednesday, September 21, 2005 2:28 PM
> To: antlr-interest@antlr.org
> Subject: RE: [antlr-interest] Re: Antlr Studio is cool.
> 
> As far as I recall, Prashant never said it would be free. The "video-only"
> previews were just to demonstrate what he was doing and gauge interest.
> 
> RE "testing a commercial product", have you never heard of public betas?
> Many many many commercial products have public betas, and some even ask
> that
> you pay to participate (the M$ office betas, for example).
> 
> Absolutely nothing wrong with this, so please chill...
> 
> Prashant has chatted with me about price possibilities, and he's looking
> to
> keep it inexpensive. I told him it's a very niche market and that he may
> not
> sell many unless the price is very low, and even then he probably wouldn't
> sell many.
> 
> I think you should view it more as a "payware" tool than a commercial
> product (as he's not doing this as a business).
> 
> I do recommend that if you think ANTLRStudio may be potentially useful
> that
> you send a note to Prashant stating what you would be willing to pay for a
> tool like that, as it may help him set a price.
> 
> Later,
> -- Scott
> 


From gt54-antlr at cyconix.com  Wed Sep 21 05:56:10 2005
From: gt54-antlr at cyconix.com (Paul Johnson)
Date: Wed Sep 21 05:56:19 2005
Subject: [antlr-interest] Re: Antlr Studio is cool.
In-Reply-To: <200509211223.j8LCMqx6031984@s2.eroute.net>
References: <200509211223.j8LCMqx6031984@s2.eroute.net>
Message-ID: <4331586A.8000000@cyconix.com>

Scott Stanchfield wrote:
> As far as I recall, Prashant never said it would be free. The "video-only"
> previews were just to demonstrate what he was doing and gauge interest. 
> 
> RE "testing a commercial product", have you never heard of public betas?
> Many many many commercial products have public betas, and some even ask that
> you pay to participate (the M$ office betas, for example).
> 
> Absolutely nothing wrong with this, so please chill...

I have no problem with commercial software. The problems, as far as I'm 
concerned, are:

1) the beta expires after 7 days. This is hardly long enough to install 
it, let alone find out if it does anything useful.

2) No-one's going to evaluate a beta of commercial software without some 
idea of what it'll cost if it works.

From gevik at xs4all.nl  Wed Sep 21 05:58:26 2005
From: gevik at xs4all.nl (Gevik babakhani)
Date: Wed Sep 21 05:58:29 2005
Subject: [antlr-interest] Re: Antlr Studio is cool.
In-Reply-To: <4331586A.8000000@cyconix.com>
Message-ID: <200509211258.j8LCwNIv084162@smtp-vbr11.xs4all.nl>

Perhaps Parshat can shed some light on this.


> -----Original Message-----
> From: antlr-interest-bounces@antlr.org [mailto:antlr-interest-
> bounces@antlr.org] On Behalf Of Paul Johnson
> Sent: Wednesday, September 21, 2005 2:56 PM
> Cc: antlr-interest@antlr.org
> Subject: Re: [antlr-interest] Re: Antlr Studio is cool.
> 
> Scott Stanchfield wrote:
> > As far as I recall, Prashant never said it would be free. The "video-
> only"
> > previews were just to demonstrate what he was doing and gauge interest.
> >
> > RE "testing a commercial product", have you never heard of public betas?
> > Many many many commercial products have public betas, and some even ask
> that
> > you pay to participate (the M$ office betas, for example).
> >
> > Absolutely nothing wrong with this, so please chill...
> 
> I have no problem with commercial software. The problems, as far as I'm
> concerned, are:
> 
> 1) the beta expires after 7 days. This is hardly long enough to install
> it, let alone find out if it does anything useful.
> 
> 2) No-one's going to evaluate a beta of commercial software without some
> idea of what it'll cost if it works.


From scott at javadude.com  Wed Sep 21 06:13:11 2005
From: scott at javadude.com (Scott Stanchfield)
Date: Wed Sep 21 06:13:51 2005
Subject: [antlr-interest] Re: Antlr Studio is cool.
In-Reply-To: <4331586A.8000000@cyconix.com>
Message-ID: <200509211308.j8LD8Sx6030093@s2.eroute.net>

> I have no problem with commercial software. The problems, as 
> far as I'm concerned, are:
> 
> 1) the beta expires after 7 days. This is hardly long enough 
> to install it, let alone find out if it does anything useful.

I'll agree with that. Should be a bit longer...


> 2) No-one's going to evaluate a beta of commercial software 
> without some idea of what it'll cost if it works.

I don't agree with that; I've seen plenty of people jump into public betas
of games and other commercial software without knowing the price.

You can make some assumptions about the price range, though.

Think about comparative products -- most of the M$ developer "standard"
products are around $100, but have more function than ANTLRStudio. (I bought
C# standard for around that I think). Most shareware asks $20-40, some a wee
bit more. I'd think he'll probably land around there, but I don't know for
sure. If he goes higher I don't think people will bite, but that's my
opinion.

I've sent in $20-$40 on several shareware in the past...
-- Scott


From amohombe at yahoo.com  Wed Sep 21 07:02:17 2005
From: amohombe at yahoo.com (Ahmed Mohombe)
Date: Wed Sep 21 07:11:08 2005
Subject: [antlr-interest] Re: Antlr Studio is cool.
In-Reply-To: <200509211223.j8LCMqx6031984@s2.eroute.net>
References: <dgrbaa$8gd$1@sea.gmane.org>
	<200509211223.j8LCMqx6031984@s2.eroute.net>
Message-ID: <dgrp59$mbj$1@sea.gmane.org>

> As far as I recall, Prashant never said it would be free. The "video-only"
> previews were just to demonstrate what he was doing and gauge interest. 
This was the impression letted to me and to many others I talked to.


> RE "testing a commercial product", have you never heard of public betas?
> Many many many commercial products have public betas, and some even ask that
> you pay to participate (the M$ office betas, for example).
Who said thy can serve as a model. They have a monopol situation and can impose everything,
and who has enough free time might will play with.

> Absolutely nothing wrong with this, so please chill...
Just because it's legal, it doesn't mean it's moral or fair. Don't get me wrong, I'm talking
about M$ :). I really dislike this kind of 'tactics' also when others try to copy them :).

> Prashant has chatted with me about price possibilities, and he's looking to
> keep it inexpensive. 
Well, than this explains why you don't have the impression that it would be free :).
Everyone else thought this.

> I told him it's a very niche market and that he may not
> sell many unless the price is very low, and even then he probably wouldn't
> sell many.
I also told him this when he made the annoucement on his blog.

> I think you should view it more as a "payware" tool than a commercial
> product (as he's not doing this as a business).
On his blog he stated exactly the contrary.

Ahmed.

From kroepke at dolphin-services.de  Wed Sep 21 07:22:56 2005
From: kroepke at dolphin-services.de (Kay Roepke)
Date: Wed Sep 21 07:23:04 2005
Subject: [antlr-interest] Re: Antlr Studio is cool.
In-Reply-To: <dgrp59$mbj$1@sea.gmane.org>
References: <dgrbaa$8gd$1@sea.gmane.org>
	<200509211223.j8LCMqx6031984@s2.eroute.net>
	<dgrp59$mbj$1@sea.gmane.org>
Message-ID: <AA05BF79-6B89-4BD6-92FA-ABD36B1F0EA7@dolphin-services.de>


On 21. Sep 2005, at 16:02 Uhr, Ahmed Mohombe wrote:

>> Prashant has chatted with me about price possibilities, and he's  
>> looking to
>> keep it inexpensive.
>>
> Well, than this explains why you don't have the impression that it  
> would be free :).
> Everyone else thought this.
>
>
>> I told him it's a very niche market and that he may not
>> sell many unless the price is very low, and even then he probably  
>> wouldn't
>> sell many.
>>
> I also told him this when he made the annoucement on his blog.
>
>
>> I think you should view it more as a "payware" tool than a commercial
>> product (as he's not doing this as a business).
>>
> On his blog he stated exactly the contrary.

I don't understand the fuss. If Prashant has the feeling he want to  
sell his work rather than give it away for
free, then that is his decision, isn't it?
After all, developing software is quite a bit of work - and if it  
works well, and helps me to get my job done
more quickly with less hassle, then why shouldn't I pay for it?
IMHO that is one downside of all this opensource hype - there's no  
moral obligation to give away your
work for free at all. That's precisely the reason that a lot of  
people don't like the GPL, for that matter.

But I digress...:-)

Kay
From parrt at cs.usfca.edu  Wed Sep 21 09:53:54 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Wed Sep 21 09:53:57 2005
Subject: [antlr-interest] depot access to ANTLR v3
Message-ID: <2190807D-5961-4730-9521-3CFD5189D0F0@cs.usfca.edu>

Howdy,

Anybody wanting to get instant updates to ANTLR v3, just email me  
directly.  I'll set up a perforce (readonly) account for you.  I'll  
need to know your machine name, your user name on that machine, and a  
full path to a directory where you want the root of the ANTLR code  
tree to appear.

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com

From jose.sanleandro at ventura24.es  Wed Sep 21 11:31:00 2005
From: jose.sanleandro at ventura24.es (Jose San Leandro)
Date: Wed Sep 21 11:31:11 2005
Subject: [antlr-interest] Re: Antlr Studio is cool.
In-Reply-To: <AA05BF79-6B89-4BD6-92FA-ABD36B1F0EA7@dolphin-services.de>
References: <dgrbaa$8gd$1@sea.gmane.org> <dgrp59$mbj$1@sea.gmane.org>
	<AA05BF79-6B89-4BD6-92FA-ABD36B1F0EA7@dolphin-services.de>
Message-ID: <200509212031.01369.jose.sanleandro@ventura24.es>

> I don't understand the fuss. If Prashant has the feeling he want to
> sell his work rather than give it away for
> free, then that is his decision, isn't it?
> After all, developing software is quite a bit of work - and if it
> works well, and helps me to get my job done
> more quickly with less hassle, then why shouldn't I pay for it?
> IMHO that is one downside of all this opensource hype - there's no
> moral obligation to give away your
> work for free at all. That's precisely the reason that a lot of
> people don't like the GPL, for that matter.
>
> But I digress...:-)
>
> Kay

Well, that is not the difference between open source and free software, 
between OSI-compliant and GPL-compliant licenses. It has nothing to do with 
pricing models.
Anyhow, I'm one of those who are willing to pay for good software, but not at 
the price of my freedom and the ones who could eventually use my 
contributions on it.
For me, first is freedom, second is price. If someone develop a tool like 
ANTLR Studio, I'm initially interested, until I notice the author doesn't 
think I deserve the rights I don't want to "give away".
The sad thing about these kind of discussions is the fact that both opinions 
are considered equally acceptable, even when one approach cares about people 
and the other just doesn't consider it, by using 
"monetary"/"real-life"/"non-comunist" arguments.

At this point, I cannot end without asking Terence a question I'm sure he has 
answered many times (sorry for that): Why isn't ANTLR GPLed?
From parrt at cs.usfca.edu  Wed Sep 21 11:51:26 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Wed Sep 21 11:51:31 2005
Subject: [antlr-interest] Why ANTLR is not GPL
In-Reply-To: <200509212031.01369.jose.sanleandro@ventura24.es>
References: <dgrbaa$8gd$1@sea.gmane.org> <dgrp59$mbj$1@sea.gmane.org>
	<AA05BF79-6B89-4BD6-92FA-ABD36B1F0EA7@dolphin-services.de>
	<200509212031.01369.jose.sanleandro@ventura24.es>
Message-ID: <C1C4AF39-251C-49AF-8207-1CCB13F17FAC@cs.usfca.edu>

On Sep 21, 2005, at 11:31 AM, Jose San Leandro wrote:
> At this point, I cannot end without asking Terence a question I'm  
> sure he has
> answered many times (sorry for that): Why isn't ANTLR GPLed?

Hi Jose,

Richard Stallman asked me the exact same question in 1995. ;)

It all comes down to the fact that I want people to be able to do  
anything they want with my software including selling it to others.   
I just don't care as long as I get credit (the currency of academics)  
and you don't blame me when it erases your harddrive and/or all life  
on this planet. :)

I don't want people to avoid using my work because they cannot extend  
it without giving it back to the community.  This would essentially  
means that businesses would be much less likely to use my software.   
I want the most leeway possible for people so that there is no excuse  
not to use ANTLR (unless of course it sucks) ;)

[no general discussion of merit of GPL etc.. please.  I have made my  
decision to use BSD for ANTLR v3 etc... and it's final]

Regards,
Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com

From kroepke at dolphin-services.de  Wed Sep 21 14:03:13 2005
From: kroepke at dolphin-services.de (Kay Roepke)
Date: Wed Sep 21 14:03:19 2005
Subject: Licenses etc. (was: Re: [antlr-interest] Re: Antlr Studio is cool.)
In-Reply-To: <200509212031.01369.jose.sanleandro@ventura24.es>
References: <dgrbaa$8gd$1@sea.gmane.org> <dgrp59$mbj$1@sea.gmane.org>
	<AA05BF79-6B89-4BD6-92FA-ABD36B1F0EA7@dolphin-services.de>
	<200509212031.01369.jose.sanleandro@ventura24.es>
Message-ID: <269C31FF-DEE2-495C-963B-7AF9D5661203@dolphin-services.de>


On 21. Sep 2005, at 20:31 Uhr, Jose San Leandro wrote:

> The sad thing about these kind of discussions is the fact that both  
> opinions
> are considered equally acceptable, even when one approach cares  
> about people
> and the other just doesn't consider it, by using
> "monetary"/"real-life"/"non-comunist" arguments.

Well, I originally meant that I can understand one's desire to make  
(some) money out
of one's own work. I didn't want to praise one or the other pricing  
model.

The GPL-thing just crossed my mind, as it always does when I thing  
about open source software.
Then I couldn't refrain from typing... :-)
For what it's worth, I totally agree with Terence's arguments. That's  
exactly how I feel
about these things...

Regards,

Kay
From prashant.deva at gmail.com  Wed Sep 21 15:24:47 2005
From: prashant.deva at gmail.com (Prashant Deva)
Date: Wed Sep 21 15:24:50 2005
Subject: [antlr-interest] Price of Antlr Studio
Message-ID: <41fed8f805092115243c92581e@mail.gmail.com>

The price of ANTLR Studio for a single user license would be -

49$

For all those who are against the commercialization of ANTLR Studio-

I dont know why you guys are against commercial software. I think
commercial is the best way to develop a software, especially one like
an IDE . NO,I *DO NOT* think free, open source, gpled software is the
best way to develop software. I think money is a good motive to
develop software and if possible I would really like to make money by
doing so than in any other way. Yes, i do think money motivates one to
develop software. You do tend to give something a higher priority if
you get paid for it. And if you give a higher priority to something it
does turn out better.  I do think ANTLR would a far better software
and there would be far earlier releases of it if we all paid Terence
500$ each time we downloaded it. (No offense meant Terence. Please
dont take this in the wrong way.)

Take for example eclipse itself. Sure its free, but the developers who
develop it are paid highly by IBM to sit and code, cause it serves IBM
in their strategy for software services which makes them money
eventually. They dont give eclipse for free cause they like you and
care for you.

As i have already mentioned before i want to make the best IDE for
ANTLR and and i dont think i can do that by giving it for free. If you
can please go ahead and make one.

Someone mentioned something about 'freedom'.  Hell, its an IDE , what
freedom do you want other than to use it? If you want to develop on
top of it maybe in the next version i can put in an interface for
plugins.
Of course, if by freedom you mean that you take the source , change it
a wee bit and add your name to it, then NO , you cant do that and i
would not want you to do that either.

PRASHANT
From scott at javadude.com  Wed Sep 21 15:29:06 2005
From: scott at javadude.com (Scott Stanchfield)
Date: Wed Sep 21 15:34:41 2005
Subject: [Fwd: Re: [antlr-interest] Re: Antlr Studio is cool.]
Message-ID: <16742.65.114.139.158.1127341746.squirrel@www.javadude.com>

(I missed the list for some reason...)

---------------------------- Original Message ----------------------------
Subject: Re: [antlr-interest] Re: Antlr Studio is cool.
From:    "Scott Stanchfield" <scott@javadude.com>
Date:    Wed, September 21, 2005 6:27 pm
To:      "Ahmed Mohombe" <amohombe@yahoo.com>
--------------------------------------------------------------------------

>> As far as I recall, Prashant never said it would be free. The
>> "video-only"
>> previews were just to demonstrate what he was doing and gauge interest.
> This was the impression letted to me and to many others I talked to.

In other words, if I don't say right from the start it's not free, it
*has* to be free?

Sheesh...

I made the same assumption upfront, and when he told me has was charging
for it I didn't even think twice about it. Totally within his right, and
there is absolutely nothing wrong with it.

That said, I suspect fewer people will use it because they can't leech it,
or because their so-called "morals" won't let them.

Not to get on a GPL diatribe, but I think it's a load of crap. If someone
wants to donate their work to others, that's cool. If someone wants to try
and recoup a little money for their time writing it, that's cool as well.

>> RE "testing a commercial product", have you never heard of public
betas? Many many many commercial products have public betas, and some
even ask that
>> you pay to participate (the M$ office betas, for example).
> Who said thy can serve as a model.

(I assume "they" instead of "thy")

I did. They exist (and have a right to). Just because you don't like their
approach doesn't make it invalid; it just means you don't agree with them,
and that's only a problem for people with that opinion.


>> Absolutely nothing wrong with this, so please chill...
> Just because it's legal, it doesn't mean it's moral or fair. Don't get
me wrong, I'm talking
> about M$ :). I really dislike this kind of 'tactics' also when others
try to copy them :).

I did *not* say Prashant was copying these "tactics". I don't feel these
*are "tactics". It's a business model that worked for them.

If you don't want to pay for it, then don't. Noone said you have to.

What if I said "it's immoral to *expect* all software to be free"? Does
that make it immoral? Of course not. Claiming "it's immoral to charge for
software" is just as nonsensical.

Later,
-- Scott



From sven at efftinge.de  Wed Sep 21 15:36:23 2005
From: sven at efftinge.de (Sven Efftinge)
Date: Wed Sep 21 15:39:34 2005
Subject: [antlr-interest] Price of Antlr Studio
In-Reply-To: <41fed8f805092115243c92581e@mail.gmail.com>
References: <41fed8f805092115243c92581e@mail.gmail.com>
Message-ID: <4331E067.7020605@efftinge.de>

Prashant Deva wrote:

>The price of ANTLR Studio for a single user license would be -
>
>49$
>  
>
I'll take one! :-)

Sven
From prashant.deva at gmail.com  Wed Sep 21 15:45:05 2005
From: prashant.deva at gmail.com (Prashant Deva)
Date: Wed Sep 21 15:45:10 2005
Subject: [antlr-interest] Re: Price of Antlr Studio
In-Reply-To: <41fed8f805092115243c92581e@mail.gmail.com>
References: <41fed8f805092115243c92581e@mail.gmail.com>
Message-ID: <41fed8f8050921154565ca43bd@mail.gmail.com>

Some people will probably now email me saying its not in the 'spirit'
of ANTLR which is free to make an IDE which is commercial.

Well yes, even i think that it is wrong that i have to pay for my
computer,cell phone, table , chair , bed, etc. I think all those
people are evil bastards who dont work their ass off day and night to
provide me free stuff.

If you want to enjoy the freedom and the spirit of free software you
can try the other plugins for antlr that exist(no offence meant to
their developers whatsoever), but if you want a kick ass IDE that will
make write grammars easy and almost trivial use ANTLR Studio :)

And stop comparing to ANTLR Works. Thats for antlr 3 which wont be out
for another year.

PRASHANT


On 9/22/05, Prashant Deva <prashant.deva@gmail.com> wrote:
> The price of ANTLR Studio for a single user license would be -
>
> 49$
>
> For all those who are against the commercialization of ANTLR Studio-
>
> I dont know why you guys are against commercial software. I think
> commercial is the best way to develop a software, especially one like
> an IDE . NO,I *DO NOT* think free, open source, gpled software is the
> best way to develop software. I think money is a good motive to
> develop software and if possible I would really like to make money by
> doing so than in any other way. Yes, i do think money motivates one to
> develop software. You do tend to give something a higher priority if
> you get paid for it. And if you give a higher priority to something it
> does turn out better.  I do think ANTLR would a far better software
> and there would be far earlier releases of it if we all paid Terence
> 500$ each time we downloaded it. (No offense meant Terence. Please
> dont take this in the wrong way.)
>
> Take for example eclipse itself. Sure its free, but the developers who
> develop it are paid highly by IBM to sit and code, cause it serves IBM
> in their strategy for software services which makes them money
> eventually. They dont give eclipse for free cause they like you and
> care for you.
>
> As i have already mentioned before i want to make the best IDE for
> ANTLR and and i dont think i can do that by giving it for free. If you
> can please go ahead and make one.
>
> Someone mentioned something about 'freedom'.  Hell, its an IDE , what
> freedom do you want other than to use it? If you want to develop on
> top of it maybe in the next version i can put in an interface for
> plugins.
> Of course, if by freedom you mean that you take the source , change it
> a wee bit and add your name to it, then NO , you cant do that and i
> would not want you to do that either.
>
> PRASHANT
>
From antlr at shmuelhome.mine.nu  Wed Sep 21 16:06:28 2005
From: antlr at shmuelhome.mine.nu (shmuel siegel)
Date: Wed Sep 21 16:06:17 2005
Subject: [antlr-interest] Price of Antlr Studio
In-Reply-To: <41fed8f805092115243c92581e@mail.gmail.com>
References: <41fed8f805092115243c92581e@mail.gmail.com>
Message-ID: <4331E774.1050402@shmuelhome.mine.nu>

Prashant Deva wrote:
> 
> For all those who are against the commercialization of ANTLR Studio-
> I dont know why you guys are against commercial software. I think
> commercial is the best way to develop a software, especially one like
> an IDE.

I have found this discussion highly perplexing. I too was surprised to 
find out that ANTLR Studio was for a fee and I probably won't be buying 
it. But let's see. Who has been hurt that he has a right to be 
resentful. I can think of two categories of people, those that freely 
contributed ideas to help make ANTLR Studio better and the owner of this 
forum who finds that his assets were used for someone elses profit. If 
neither of these groups are complaining why is anybody else?

As far as the price or terms of the beta test, if you don't like them, 
don't participate. You have lost nothing.


-- 
No virus found in this outgoing message.
Checked by AVG Anti-Virus.
Version: 7.0.344 / Virus Database: 267.11.3/107 - Release Date: 9/20/2005



-- 
No virus found in this outgoing message.
Checked by AVG Anti-Virus.
Version: 7.0.344 / Virus Database: 267.11.3/107 - Release Date: 9/20/2005

From gevik at xs4all.nl  Wed Sep 21 16:06:57 2005
From: gevik at xs4all.nl (Gevik babakhani)
Date: Wed Sep 21 16:06:57 2005
Subject: [antlr-interest] Price of Antlr Studio
In-Reply-To: <41fed8f805092115243c92581e@mail.gmail.com>
Message-ID: <200509212306.j8LN6sR7055906@smtp-vbr13.xs4all.nl>

For what it can do. I think $49 is very reasonable price :)

> -----Original Message-----
> From: antlr-interest-bounces@antlr.org [mailto:antlr-interest-
> bounces@antlr.org] On Behalf Of Prashant Deva
> Sent: Thursday, September 22, 2005 12:25 AM
> To: ANTLR Interest
> Subject: [antlr-interest] Price of Antlr Studio
> 
> The price of ANTLR Studio for a single user license would be -
> 
> 49$
> 
> For all those who are against the commercialization of ANTLR Studio-
> 
> I dont know why you guys are against commercial software. I think
> commercial is the best way to develop a software, especially one like
> an IDE . NO,I *DO NOT* think free, open source, gpled software is the
> best way to develop software. I think money is a good motive to
> develop software and if possible I would really like to make money by
> doing so than in any other way. Yes, i do think money motivates one to
> develop software. You do tend to give something a higher priority if
> you get paid for it. And if you give a higher priority to something it
> does turn out better.  I do think ANTLR would a far better software
> and there would be far earlier releases of it if we all paid Terence
> 500$ each time we downloaded it. (No offense meant Terence. Please
> dont take this in the wrong way.)
> 
> Take for example eclipse itself. Sure its free, but the developers who
> develop it are paid highly by IBM to sit and code, cause it serves IBM
> in their strategy for software services which makes them money
> eventually. They dont give eclipse for free cause they like you and
> care for you.
> 
> As i have already mentioned before i want to make the best IDE for
> ANTLR and and i dont think i can do that by giving it for free. If you
> can please go ahead and make one.
> 
> Someone mentioned something about 'freedom'.  Hell, its an IDE , what
> freedom do you want other than to use it? If you want to develop on
> top of it maybe in the next version i can put in an interface for
> plugins.
> Of course, if by freedom you mean that you take the source , change it
> a wee bit and add your name to it, then NO , you cant do that and i
> would not want you to do that either.
> 
> PRASHANT


From prashant.deva at gmail.com  Wed Sep 21 16:08:54 2005
From: prashant.deva at gmail.com (Prashant Deva)
Date: Wed Sep 21 16:08:56 2005
Subject: [antlr-interest] Price of Antlr Studio
In-Reply-To: <4331E774.1050402@shmuelhome.mine.nu>
References: <41fed8f805092115243c92581e@mail.gmail.com>
	<4331E774.1050402@shmuelhome.mine.nu>
Message-ID: <41fed8f80509211608588c28b9@mail.gmail.com>

> As far as the price or terms of the beta test, if you don't like them,
> don't participate. You have lost nothing.

There is no price for using the beta ;)

PRASHANT

On 9/22/05, shmuel siegel <antlr@shmuelhome.mine.nu> wrote:
> Prashant Deva wrote:
> >
> > For all those who are against the commercialization of ANTLR Studio-
> > I dont know why you guys are against commercial software. I think
> > commercial is the best way to develop a software, especially one like
> > an IDE.
>
> I have found this discussion highly perplexing. I too was surprised to
> find out that ANTLR Studio was for a fee and I probably won't be buying
> it. But let's see. Who has been hurt that he has a right to be
> resentful. I can think of two categories of people, those that freely
> contributed ideas to help make ANTLR Studio better and the owner of this
> forum who finds that his assets were used for someone elses profit. If
> neither of these groups are complaining why is anybody else?
>
> As far as the price or terms of the beta test, if you don't like them,
> don't participate. You have lost nothing.
>
>
> --
> No virus found in this outgoing message.
> Checked by AVG Anti-Virus.
> Version: 7.0.344 / Virus Database: 267.11.3/107 - Release Date: 9/20/2005
>
>
>
> --
> No virus found in this outgoing message.
> Checked by AVG Anti-Virus.
> Version: 7.0.344 / Virus Database: 267.11.3/107 - Release Date: 9/20/2005
>
>
From tristan.stark at quipoz.com  Wed Sep 21 16:10:05 2005
From: tristan.stark at quipoz.com (Tristan Stark)
Date: Wed Sep 21 16:10:13 2005
Subject: [antlr-interest] Price of Antlr Studio
Message-ID: <418BA6D5AEB4EF4481EB17FEB9A48ED216652C@xeon04.quipoz.com>

What a pack of whingers.

Great work Prashant, I'm well impressed.

T
From matthew.ford at forward.com.au  Wed Sep 21 16:11:36 2005
From: matthew.ford at forward.com.au (Matthew Ford)
Date: Wed Sep 21 16:11:43 2005
Subject: [antlr-interest] Price of Antlr Studio
References: <41fed8f805092115243c92581e@mail.gmail.com>
Message-ID: <000e01c5bf01$d10315c0$2605000a@notebook>


----- Original Message ----- 
From: "Prashant Deva" <prashant.deva@gmail.com>
To: "ANTLR Interest" <antlr-interest@antlr.org>
Sent: Thursday, September 22, 2005 8:24 AM
Subject: [antlr-interest] Price of Antlr Studio


> The price of ANTLR Studio for a single user license would be -
>
> 49$
>

That's fine with me but I will probably wait until Antlr 3.0 is out.
Having been a self employed programmer for many years I am all in favour of
people paying for software.

matthew

From ewbank at gmail.com  Wed Sep 21 16:21:26 2005
From: ewbank at gmail.com (Bryan Ewbank)
Date: Wed Sep 21 16:21:29 2005
Subject: [antlr-interest] Price of Antlr Studio
In-Reply-To: <000e01c5bf01$d10315c0$2605000a@notebook>
References: <41fed8f805092115243c92581e@mail.gmail.com>
	<000e01c5bf01$d10315c0$2605000a@notebook>
Message-ID: <dd3a065f050921162130a7672d@mail.gmail.com>

I'm honestly surprised that there's a cost here. When ideas were being
collected, there was no mention of that detail when asking for feedback,
suggestions, etc. Now to find out that it is a for-profit venture is
puzzling.

No, I'm not annoyed/offended/etc. Free software or commercial - whatever. As
I said, I'm just very surprised at the history and the support. Not a slap
in the face, certainly, but puzzling.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20050921/081c6833/attachment.html
From ewbank at gmail.com  Wed Sep 21 16:28:43 2005
From: ewbank at gmail.com (Bryan Ewbank)
Date: Wed Sep 21 16:28:45 2005
Subject: [antlr-interest] Why ANTLR is not GPL
In-Reply-To: <C1C4AF39-251C-49AF-8207-1CCB13F17FAC@cs.usfca.edu>
References: <dgrbaa$8gd$1@sea.gmane.org> <dgrp59$mbj$1@sea.gmane.org>
	<AA05BF79-6B89-4BD6-92FA-ABD36B1F0EA7@dolphin-services.de>
	<200509212031.01369.jose.sanleandro@ventura24.es>
	<C1C4AF39-251C-49AF-8207-1CCB13F17FAC@cs.usfca.edu>
Message-ID: <dd3a065f05092116281ea328d5@mail.gmail.com>

FWIW, I wouldn't have considered using ANTLR if it were GPL'ed. The fact
that it (and it's generated code) are BSD'd made our legal department very
happy - GPL and LGPL make 'em twitch :-)

I, for one, say "thank you terence".

On 9/21/05, Terence Parr <parrt@cs.usfca.edu> wrote:
>
> I don't want people to avoid using my work because they cannot extend
> it without giving it back to the community. This would essentially
> means that businesses would be much less likely to use my software.
> I want the most leeway possible for people so that there is no excuse
> not to use ANTLR (unless of course it sucks) ;)
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20050921/4d318c36/attachment.html
From prashant.deva at gmail.com  Wed Sep 21 16:30:35 2005
From: prashant.deva at gmail.com (Prashant Deva)
Date: Wed Sep 21 16:30:37 2005
Subject: [antlr-interest] Price of Antlr Studio
In-Reply-To: <dd3a065f050921162130a7672d@mail.gmail.com>
References: <41fed8f805092115243c92581e@mail.gmail.com>
	<000e01c5bf01$d10315c0$2605000a@notebook>
	<dd3a065f050921162130a7672d@mail.gmail.com>
Message-ID: <41fed8f805092116305770eb9d@mail.gmail.com>

> I'm honestly surprised that there's a cost here.  When ideas were being
> collected, there was no mention of that detail when asking for feedback,
> suggestions, etc.  Now to find out that it is a for-profit venture is
> puzzling.

>From now on anyone who posts a question on the mailing list is
required to explicitly mention whether the replies to it would be used
in a commercial product or not.
Only the free ones will be answered and if you got a for-profit
venture behind it then you will be required to pay for the answers.
All ideas, feedbacks, suggestions will be given to free projects only.
For - profit ventures are illegal and banned from anything related to
ANTLR.

(What was the smiley for sarcasm?)

PRASHANT

On 9/22/05, Bryan Ewbank <ewbank@gmail.com> wrote:
> I'm honestly surprised that there's a cost here.  When ideas were being
> collected, there was no mention of that detail when asking for feedback,
> suggestions, etc.  Now to find out that it is a for-profit venture is
> puzzling.
>
>  No, I'm not annoyed/offended/etc.  Free software or commercial - whatever.
> As I said, I'm just very surprised at the history and the support.  Not a
> slap in the face, certainly, but puzzling.
>
From prashant.deva at gmail.com  Wed Sep 21 17:31:27 2005
From: prashant.deva at gmail.com (Prashant Deva)
Date: Wed Sep 21 17:31:30 2005
Subject: [antlr-interest] ANTLR Studio beta handouts paused
Message-ID: <41fed8f805092117313384b3c3@mail.gmail.com>

I have encountered a critical bug in antlr studio. the beta handouts
are currently paused.

To everyone who has mailed me regarding the beta-
Thanks a ton for your support :)

I will post when i fix the bug and if i extend the beta period.

The existing testers obviously can continue to evaluate AS and tell me
if they face any problems :)

PRASHANT
From sohail at taggedtype.net  Wed Sep 21 20:25:24 2005
From: sohail at taggedtype.net (Sohail Somani)
Date: Wed Sep 21 20:25:14 2005
Subject: [antlr-interest] depot access to ANTLR v3
In-Reply-To: <2190807D-5961-4730-9521-3CFD5189D0F0@cs.usfca.edu>
References: <2190807D-5961-4730-9521-3CFD5189D0F0@cs.usfca.edu>
Message-ID: <1127359524.9190.5.camel@localhost.localdomain>

On Wed, 2005-21-09 at 09:53 -0700, Terence Parr wrote:
> Howdy,
> 
> Anybody wanting to get instant updates to ANTLR v3, just email me  
> directly.  I'll set up a perforce (readonly) account for you.  I'll  
> need to know your machine name, your user name on that machine, and a  
> full path to a directory where you want the root of the ANTLR code  
> tree to appear.

I've never used perforce but why in the name of all holy compilers would
the server need to know all this information?

From teddemc at yahoo.com  Wed Sep 21 21:49:47 2005
From: teddemc at yahoo.com (Matthew Tedder)
Date: Wed Sep 21 21:49:51 2005
Subject: [antlr-interest] Why ANTLR is not GPL
In-Reply-To: <dd3a065f05092116281ea328d5@mail.gmail.com>
Message-ID: <20050922044947.14958.qmail@web52901.mail.yahoo.com>

Although I am generally a strong advocate of GPLing software, I also agree that BSD is a better choice for something like ANTLR.  I might still use it otherwise, but the incentive would be less, depending.
 
I have some advice though, for the IDE to make more money than by selling per user license fees.  GPL the IDE and keep an iron fist on maintainership.  The GPL will ensure mass distribution and in the Help->About (if not other places) advertise your consulting services to in developing/debugging/whatever projects for end user organizations.
 
Every company I am aware of that used this model turned a quick and consistently growing profit, such as Cygnus Solutions (before Red Hat bought them out).
 
The GPL facilates the following:
(1) Massive global publicity and distribution (Got marketing money/expertise?)
(2) Enters into use in organizations skipping right past normal procurement barriers
(3) Incentive exists for others to share their improvements, making a better product
(4) Customers can still make modifications for their own use, so long as they don't redistribute

 
Otherwise popularity will be an up-hill battle requiring your own marketing dollars to get popularized.  You most likely won't make much and your IDE won't come to much.  I must have seen it a million times... If you don't believe it, look at TheKompany's products line.
 
Indeed the most selfless of open sourcers are those who license BSD/MIT, etc.  The GPL model I mention is guerella marketing, one of very few effective ways for a little guy to muscle his way into big markets.
 
Matthew

Bryan Ewbank <ewbank@gmail.com> wrote:
FWIW, I wouldn't have considered using ANTLR if it were GPL'ed.  The fact that it (and it's generated code) are BSD'd made our legal department very happy - GPL and LGPL make 'em twitch :-)

I, for one, say "thank you terence".

On 9/21/05, Terence Parr <parrt@cs.usfca.edu> wrote: I don't want people to avoid using my work because they cannot extend
it without giving it back to the community.  This would essentially 
means that businesses would be much less likely to use my software.
I want the most leeway possible for people so that there is no excuse
not to use ANTLR (unless of course it sucks) ;)



__________________________________________________
Do You Yahoo!?
Tired of spam?  Yahoo! Mail has the best spam protection around 
http://mail.yahoo.com 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20050921/08e0358c/attachment.html
From mail at martin-probst.com  Wed Sep 21 23:51:35 2005
From: mail at martin-probst.com (Martin Probst)
Date: Wed Sep 21 23:51:42 2005
Subject: [antlr-interest] depot access to ANTLR v3
In-Reply-To: <1127359524.9190.5.camel@localhost.localdomain>
References: <2190807D-5961-4730-9521-3CFD5189D0F0@cs.usfca.edu>
	<1127359524.9190.5.camel@localhost.localdomain>
Message-ID: <1127371895.9512.1.camel@localhost.localdomain>

> > I'll  
> > need to know your machine name, your user name on that machine, and a  
> > full path to a directory where you want the root of the ANTLR code  
> > tree to appear.
> 
> I've never used perforce but why in the name of all holy compilers would
> the server need to know all this information?

That's because of the way Perforce works. The server keeps information
about the state of the client to speed up updates, manage changelists
etc. It's quite a nice system, though not really suitable for OpenSource
development and anonymous read only access.

Martin

From Anthony.Youngman at eca-international.com  Thu Sep 22 01:47:16 2005
From: Anthony.Youngman at eca-international.com (Anthony Youngman)
Date: Thu Sep 22 01:47:21 2005
Subject: Licenses etc. (was: Re: [antlr-interest] Re: Antlr Studio is
	cool.)
Message-ID: <C7FE35004D40FD45AA342991B88CE40401290015@lnml1.eca-international.local>

The thing with the GPL is that it does NOT prevent an author selling his
own work. If Prashant wants to sell Antlr Studio, that is his moral
right.

What the GPL does (and is intended to do) is stop *you* selling *my*
work (and cutting me out of the loop).

Somebody mentioned "freedoms". I'm sorry, but an author deserves the
freedom to do what he will with his own work. If you don't like that,
you have the freedom not to use his work.

As for Ter's stance, my little project is LGPL and possibly GPL, but
that's because it's "infrastructure", and as such others can build on it
without getting bitten by the "derivative work" clause. So others will
be able to freely distribute it, and ship their stuff with it.

Cheers,
Wol 

-----Original Message-----
From: antlr-interest-bounces@antlr.org
[mailto:antlr-interest-bounces@antlr.org] On Behalf Of Kay Roepke
Sent: 21 September 2005 22:03
To: Jose San Leandro
Cc: antlr-interest@antlr.org
Subject: Licenses etc. (was: Re: [antlr-interest] Re: Antlr Studio is
cool.)


On 21. Sep 2005, at 20:31 Uhr, Jose San Leandro wrote:

> The sad thing about these kind of discussions is the fact that both  
> opinions
> are considered equally acceptable, even when one approach cares  
> about people
> and the other just doesn't consider it, by using
> "monetary"/"real-life"/"non-comunist" arguments.

Well, I originally meant that I can understand one's desire to make  
(some) money out
of one's own work. I didn't want to praise one or the other pricing  
model.

The GPL-thing just crossed my mind, as it always does when I thing  
about open source software.
Then I couldn't refrain from typing... :-)
For what it's worth, I totally agree with Terence's arguments. That's  
exactly how I feel
about these things...

Regards,

Kay

* ************************************************************************ *

This transmission is intended for the named recipient only. It may contain private and confidential information. If this has come to you in error you must not act on anything disclosed in it, nor must you copy it, modify it, disseminate it in any way, or show it to anyone. Please e-mail the sender to inform us of the transmission error or telephone ECA International immediately and delete the e-mail from your information system.

Telephone numbers for ECA International offices are: Sydney +61 (0)2 8272 5300, Hong Kong + 852 2121 2388, London +44 (0)20 7351 5000 and New York +1 212 582 2333.

* ************************************************************************ *

From Anthony.Youngman at eca-international.com  Thu Sep 22 01:54:03 2005
From: Anthony.Youngman at eca-international.com (Anthony Youngman)
Date: Thu Sep 22 01:54:07 2005
Subject: [antlr-interest] Price of Antlr Studio
Message-ID: <C7FE35004D40FD45AA342991B88CE40401290016@lnml1.eca-international.local>

Ter has consistently said he wants Antlr to be widely used, and has
deliberately chosen the BSD licence so that it can be used in commercial
products ...

So whether Antlr Studio is free- or pay-ware, I think it's a safe
assumption that he approves.

So if Ter approves, what right do the rest of us have to whinge (and I
suspect the majority of Antlr contributors concur with Ter - they
wouldn't have contributed otherwise).

Cheers,
Wol

-----Original Message-----
From: antlr-interest-bounces@antlr.org
[mailto:antlr-interest-bounces@antlr.org] On Behalf Of Prashant Deva
Sent: 22 September 2005 00:31
To: Bryan Ewbank
Cc: ANTLR Interest
Subject: Re: [antlr-interest] Price of Antlr Studio

> I'm honestly surprised that there's a cost here.  When ideas were
being
> collected, there was no mention of that detail when asking for
feedback,
> suggestions, etc.  Now to find out that it is a for-profit venture is
> puzzling.

>From now on anyone who posts a question on the mailing list is
required to explicitly mention whether the replies to it would be used
in a commercial product or not.
Only the free ones will be answered and if you got a for-profit
venture behind it then you will be required to pay for the answers.
All ideas, feedbacks, suggestions will be given to free projects only.
For - profit ventures are illegal and banned from anything related to
ANTLR.

(What was the smiley for sarcasm?)

PRASHANT


* ************************************************************************ *

This transmission is intended for the named recipient only. It may contain private and confidential information. If this has come to you in error you must not act on anything disclosed in it, nor must you copy it, modify it, disseminate it in any way, or show it to anyone. Please e-mail the sender to inform us of the transmission error or telephone ECA International immediately and delete the e-mail from your information system.

Telephone numbers for ECA International offices are: Sydney +61 (0)2 8272 5300, Hong Kong + 852 2121 2388, London +44 (0)20 7351 5000 and New York +1 212 582 2333.

* ************************************************************************ *

From jose.sanleandro at ventura24.es  Thu Sep 22 02:06:19 2005
From: jose.sanleandro at ventura24.es (Jose San Leandro)
Date: Thu Sep 22 02:06:32 2005
Subject: [antlr-interest] Price of Antlr Studio
In-Reply-To: <41fed8f805092115243c92581e@mail.gmail.com>
References: <41fed8f805092115243c92581e@mail.gmail.com>
Message-ID: <200509221106.20735.jose.sanleandro@ventura24.es>

Hi Prashant,

The last thing I want is to bother anybody.
I just feel many of you miss the key point. I's not about whether anybody can 
download it at no extra cost. It's not about commercial vs free.
I personally find uninteresting if you develop ANTLR Studio aiming to make 
money or not. It's your decision, which doesn't affect me but my wallet (I 
probably should be more used to pay regardless of the license). That is what 
*commercial* means. However, it's good you have found a motivation to develop 
a tool to help the ANTLR community.

However, if I get your software, having paid for it or not, and I notice that 
I don't have access to the source code, and that you force me to accept a 
EULA which restricts almost everything I can do with your software, then some 
people would have no option but to reject it. That is what *free* means. 
There's no need to accept unacceptable rules, even though we're used to. The 
author gets an illussion of "protection" by legally restricting and 
physically difficulting other uses of his software.

If you make it commercial, and *free*, then I would keep an eye open on your 
IDE, and even offer you my help eventually. If you make it commercial but 
*not free*, then, for me, ANTLR Studio doesn't exist.

One last thing, please don't get confused by Copyright and licenses. Nobody 
has the right to claim himself as the author of ANTLR Studio. You write it, 
you are the Copyright owner.

Greetings,

On Thursday 22 September 2005 00:24, Prashant Deva wrote:
> The price of ANTLR Studio for a single user license would be -
>
> 49$
>
> For all those who are against the commercialization of ANTLR Studio-
>
> I dont know why you guys are against commercial software. I think
> commercial is the best way to develop a software, especially one like
> an IDE . NO,I *DO NOT* think free, open source, gpled software is the
> best way to develop software. I think money is a good motive to
> develop software and if possible I would really like to make money by
> doing so than in any other way. Yes, i do think money motivates one to
> develop software. You do tend to give something a higher priority if
> you get paid for it. And if you give a higher priority to something it
> does turn out better.  I do think ANTLR would a far better software
> and there would be far earlier releases of it if we all paid Terence
> 500$ each time we downloaded it. (No offense meant Terence. Please
> dont take this in the wrong way.)
>
> Take for example eclipse itself. Sure its free, but the developers who
> develop it are paid highly by IBM to sit and code, cause it serves IBM
> in their strategy for software services which makes them money
> eventually. They dont give eclipse for free cause they like you and
> care for you.
>
> As i have already mentioned before i want to make the best IDE for
> ANTLR and and i dont think i can do that by giving it for free. If you
> can please go ahead and make one.
>
> Someone mentioned something about 'freedom'.  Hell, its an IDE , what
> freedom do you want other than to use it? If you want to develop on
> top of it maybe in the next version i can put in an interface for
> plugins.
> Of course, if by freedom you mean that you take the source , change it
> a wee bit and add your name to it, then NO , you cant do that and i
> would not want you to do that either.
>
> PRASHANT

-- 
-----BEGIN GEEK CODE BLOCK-----
Version: 3.1
d? s+:+ !a c++ UL+++ P+ L+++ E+++ W++ N+ K- w--- PS++ PE- Y++ PGP++
X+ R tv-- b+++ DI++ D++ G- e+++ h--- r+++ y+++
------END GEEK CODE BLOCK------
From amohombe at yahoo.com  Thu Sep 22 02:14:59 2005
From: amohombe at yahoo.com (Ahmed Mohombe)
Date: Thu Sep 22 02:18:40 2005
Subject: [antlr-interest] Re: depot access to ANTLR v3
In-Reply-To: <2190807D-5961-4730-9521-3CFD5189D0F0@cs.usfca.edu>
References: <2190807D-5961-4730-9521-3CFD5189D0F0@cs.usfca.edu>
Message-ID: <dgtsmm$jd5$1@sea.gmane.org>

> Anybody wanting to get instant updates to ANTLR v3, just email me  
> directly.  I'll set up a perforce (readonly) account for you.  I'll  
> need to know your machine name, your user name on that machine, and a  
> full path to a directory where you want the root of the ANTLR code  tree 
> to appear.
(Unfortunately) nowadays most of use use more than one computer and don't
have(and can't have) a fixed IP address.

Isn't there any other way? e.g. mirroring to a public CVS with rsync or
some other solution?

Thanks in advance,

Ahmed.

From Anthony.Youngman at eca-international.com  Thu Sep 22 02:24:04 2005
From: Anthony.Youngman at eca-international.com (Anthony Youngman)
Date: Thu Sep 22 02:24:10 2005
Subject: [antlr-interest] Price of Antlr Studio
Message-ID: <C7FE35004D40FD45AA342991B88CE40401290018@lnml1.eca-international.local>

Hi Jose,

By "free", do you mean "gratis"? That's what I understand - if I mean
"libre" I always write "Free". Is that half the confusion here?

By the way, Prashant, (not that I plan to buy it) will Antlr Studio be
"open"? Again, I distinguish between "open" and "Open". To me, "open"
means "you've bought a copy, it comes with source, but copyright
applies".

Back to Jose, who said anything about a EULA? If Prashant is happy to
make Studio "open", would you be happy?

Cheers,
Wol 

-----Original Message-----
From: antlr-interest-bounces@antlr.org
[mailto:antlr-interest-bounces@antlr.org] On Behalf Of Jose San Leandro
Sent: 22 September 2005 10:06
To: antlr-interest@antlr.org; Prashant Deva
Subject: Re: [antlr-interest] Price of Antlr Studio

Hi Prashant,

The last thing I want is to bother anybody.
I just feel many of you miss the key point. I's not about whether
anybody can 
download it at no extra cost. It's not about commercial vs free.
I personally find uninteresting if you develop ANTLR Studio aiming to
make 
money or not. It's your decision, which doesn't affect me but my wallet
(I 
probably should be more used to pay regardless of the license). That is
what 
*commercial* means. However, it's good you have found a motivation to
develop 
a tool to help the ANTLR community.

However, if I get your software, having paid for it or not, and I notice
that 
I don't have access to the source code, and that you force me to accept
a 
EULA which restricts almost everything I can do with your software, then
some 
people would have no option but to reject it. That is what *free* means.

There's no need to accept unacceptable rules, even though we're used to.
The 
author gets an illussion of "protection" by legally restricting and 
physically difficulting other uses of his software.

If you make it commercial, and *free*, then I would keep an eye open on
your 
IDE, and even offer you my help eventually. If you make it commercial
but 
*not free*, then, for me, ANTLR Studio doesn't exist.

One last thing, please don't get confused by Copyright and licenses.
Nobody 
has the right to claim himself as the author of ANTLR Studio. You write
it, 
you are the Copyright owner.

Greetings,

On Thursday 22 September 2005 00:24, Prashant Deva wrote:
> The price of ANTLR Studio for a single user license would be -
>
> 49$
>
> For all those who are against the commercialization of ANTLR Studio-
>
> I dont know why you guys are against commercial software. I think
> commercial is the best way to develop a software, especially one like
> an IDE . NO,I *DO NOT* think free, open source, gpled software is the
> best way to develop software. I think money is a good motive to
> develop software and if possible I would really like to make money by
> doing so than in any other way. Yes, i do think money motivates one to
> develop software. You do tend to give something a higher priority if
> you get paid for it. And if you give a higher priority to something it
> does turn out better.  I do think ANTLR would a far better software
> and there would be far earlier releases of it if we all paid Terence
> 500$ each time we downloaded it. (No offense meant Terence. Please
> dont take this in the wrong way.)
>
> Take for example eclipse itself. Sure its free, but the developers who
> develop it are paid highly by IBM to sit and code, cause it serves IBM
> in their strategy for software services which makes them money
> eventually. They dont give eclipse for free cause they like you and
> care for you.
>
> As i have already mentioned before i want to make the best IDE for
> ANTLR and and i dont think i can do that by giving it for free. If you
> can please go ahead and make one.
>
> Someone mentioned something about 'freedom'.  Hell, its an IDE , what
> freedom do you want other than to use it? If you want to develop on
> top of it maybe in the next version i can put in an interface for
> plugins.
> Of course, if by freedom you mean that you take the source , change it
> a wee bit and add your name to it, then NO , you cant do that and i
> would not want you to do that either.
>
> PRASHANT

-- 
-----BEGIN GEEK CODE BLOCK-----
Version: 3.1
d? s+:+ !a c++ UL+++ P+ L+++ E+++ W++ N+ K- w--- PS++ PE- Y++ PGP++
X+ R tv-- b+++ DI++ D++ G- e+++ h--- r+++ y+++
------END GEEK CODE BLOCK------

* ************************************************************************ *

This transmission is intended for the named recipient only. It may contain private and confidential information. If this has come to you in error you must not act on anything disclosed in it, nor must you copy it, modify it, disseminate it in any way, or show it to anyone. Please e-mail the sender to inform us of the transmission error or telephone ECA International immediately and delete the e-mail from your information system.

Telephone numbers for ECA International offices are: Sydney +61 (0)2 8272 5300, Hong Kong + 852 2121 2388, London +44 (0)20 7351 5000 and New York +1 212 582 2333.

* ************************************************************************ *

From amohombe at yahoo.com  Thu Sep 22 02:19:47 2005
From: amohombe at yahoo.com (Ahmed Mohombe)
Date: Thu Sep 22 02:31:30 2005
Subject: [antlr-interest] Re: Download Page Imporvement!
In-Reply-To: <dgji2h$n9u$1@sea.gmane.org>
References: <dgji2h$n9u$1@sea.gmane.org>
Message-ID: <dgtsvk$k6u$1@sea.gmane.org>

> Could you please improve the actual download page?
> At the moment it's very confusing and chaotic.
Sorry, but only now I realized that somehow I was always looking at this page:
http://www.antlr.org/download/

and it's totally different from this one:

http://www.antlr.org/download.html

:).

So of course, that is a "directory listing" page and it's not optimal :).

Ahmed.

From mail at martin-probst.com  Thu Sep 22 02:44:47 2005
From: mail at martin-probst.com (Martin Probst)
Date: Thu Sep 22 03:16:17 2005
Subject: [antlr-interest] Price of Antlr Studio
In-Reply-To: <C7FE35004D40FD45AA342991B88CE40401290018@lnml1.eca-international.local>
References: <C7FE35004D40FD45AA342991B88CE40401290018@lnml1.eca-international.local>
Message-ID: <1127382287.7656.1.camel@localhost.localdomain>

> By "free", do you mean "gratis"? That's what I understand - if I mean
> "libre" I always write "Free". Is that half the confusion here?

It's always the same problem ... why can't you English guys get a proper
language? *ducks*

Martin

From Anthony.Youngman at eca-international.com  Thu Sep 22 03:30:45 2005
From: Anthony.Youngman at eca-international.com (Anthony Youngman)
Date: Thu Sep 22 03:30:49 2005
Subject: [antlr-interest] Price of Antlr Studio
Message-ID: <C7FE35004D40FD45AA342991B88CE40401290019@lnml1.eca-international.local>

OYYYY !!!!

Us English *do* have a proper language - it's the Americans who think
they speak English that are the problem !!!

*ducks even quicker*

Cheers,
Wol

-----Original Message-----
From: Martin Probst [mailto:mail@martin-probst.com] 
Sent: 22 September 2005 10:45
To: Anthony Youngman
Cc: Jose San Leandro; antlr-interest@antlr.org; Prashant Deva
Subject: RE: [antlr-interest] Price of Antlr Studio

> By "free", do you mean "gratis"? That's what I understand - if I mean
> "libre" I always write "Free". Is that half the confusion here?

It's always the same problem ... why can't you English guys get a proper
language? *ducks*

Martin


* ************************************************************************ *

This transmission is intended for the named recipient only. It may contain private and confidential information. If this has come to you in error you must not act on anything disclosed in it, nor must you copy it, modify it, disseminate it in any way, or show it to anyone. Please e-mail the sender to inform us of the transmission error or telephone ECA International immediately and delete the e-mail from your information system.

Telephone numbers for ECA International offices are: Sydney +61 (0)2 8272 5300, Hong Kong + 852 2121 2388, London +44 (0)20 7351 5000 and New York +1 212 582 2333.

* ************************************************************************ *

From scott at javadude.com  Thu Sep 22 05:20:29 2005
From: scott at javadude.com (Scott Stanchfield)
Date: Thu Sep 22 05:21:01 2005
Subject: [antlr-interest] Price of Antlr Studio
In-Reply-To: <C7FE35004D40FD45AA342991B88CE40401290018@lnml1.eca-international.local>
Message-ID: <200509221215.j8MCFcx6028810@s2.eroute.net>

[RE "open" etc]

<shaking head>

Geez folks.

If you don't like the terms, *don't use it*. The terms aren't yours to make;
they're Prashant's.

Why does it *really* matter if he provides source? How many people *really*
read it? Does it make the tool itself any better or worse? No.

Evaluate the tool on what *really matters*:
* is it useful to you?
* does it make you more productive?
* does it actually work?

I used PCCTS when it first came out without ever looking at the source. I
needed a good tool for a compiler class. I had been using lex/yacc and found
it hard to debug my generated app.

Because it and ANTLR are open, I can extend it (which is nice), but that
wasn't why I used it. If it were closed source, I still would have used it
because it's a good tool.

Same for Eclipse. I use it because it's a good tool. Plugins are nice (and
easier to develop b/c eclipse is open), but nearly all of the folks I know
who use eclipse have never looked at the source nor even care to. Good tool.
That's all that matters. The rest is icing.

-- Scott


From scott at javadude.com  Thu Sep 22 05:25:36 2005
From: scott at javadude.com (Scott Stanchfield)
Date: Thu Sep 22 05:26:06 2005
Subject: [antlr-interest] Price of Antlr Studio
In-Reply-To: <C7FE35004D40FD45AA342991B88CE40401290016@lnml1.eca-international.local>
Message-ID: <200509221220.j8MCKhx6031394@s2.eroute.net>

Well said!
-- Scott 

> -----Original Message-----
> From: antlr-interest-bounces@antlr.org 
> [mailto:antlr-interest-bounces@antlr.org] On Behalf Of 
> Anthony Youngman
> 
> Ter has consistently said he wants Antlr to be widely used, 
> and has deliberately chosen the BSD licence so that it can be 
> used in commercial products ...
> 
> So whether Antlr Studio is free- or pay-ware, I think it's a 
> safe assumption that he approves.
> 
> So if Ter approves, what right do the rest of us have to 
> whinge (and I suspect the majority of Antlr contributors 
> concur with Ter - they wouldn't have contributed otherwise).


From nbsherid at secsme.org.au  Thu Sep 22 06:13:17 2005
From: nbsherid at secsme.org.au (Nigel Sheridan-Smith)
Date: Thu Sep 22 06:13:07 2005
Subject: Licenses etc. (was: Re: [antlr-interest] Re: Antlr Studio iscool.)
In-Reply-To: <C7FE35004D40FD45AA342991B88CE40401290015@lnml1.eca-international.local>
Message-ID: <000001c5bf77$66034170$0500a8c0@nigel>



> -----Original Message-----
> From: antlr-interest-bounces@antlr.org [mailto:antlr-interest-
> bounces@antlr.org] On Behalf Of Anthony Youngman
> Sent: Thursday, 22 September 2005 6:47 PM
> To: Kay Roepke; Jose San Leandro
> Cc: antlr-interest@antlr.org
> Subject: RE: Licenses etc. (was: Re: [antlr-interest] Re: Antlr Studio
> iscool.)
> 
> What the GPL does (and is intended to do) is stop *you* selling *my*
> work (and cutting me out of the loop).
> 

Actually, my understanding was that the GPL allowed anyone to sell the
software at cost, but prevented derivative code from being redistributed
under any license except the GPL. You are free to modify the code for your
own purposes, but you cannot redistribute it to anyone else (at profit, or
at no cost) unless you can provide them the source code for the
modifications upon request. This guarantees the "freedom" of all of the
users, who will always have access to the source code for the original
product, and all derivative products that are redistributed.

As for whether AntlrStudio should be commercial, open-source, etc: I had an
inkling that it might have been targeted as commercial software as Prashant
never made a statement about the license either way. Given that videos were
used to promote the product (rather than an alpha- or beta-release, like
many open-source products) suggested to me that it probably wasn't going to
be open-source, unless Prashant was holding out until a full version was
completed. It doesn't disturb me at all about they way this was approached,
although it might have helped to know upfront what his intentions were.

If it performs a useful function at a low cost, then some people will
undoubtedly see value in purchasing it. Specialistic software usually sells
for a lot more money (but perhaps, also does a lot more at the same time).

Nigel

--
Nigel Sheridan-Smith
PhD research student

Faculty of Engineering
University of Technology, Sydney
Phone: 02 9514 7946
Fax: 02 9514 2435


From Anthony.Youngman at eca-international.com  Thu Sep 22 06:30:49 2005
From: Anthony.Youngman at eca-international.com (Anthony Youngman)
Date: Thu Sep 22 06:30:54 2005
Subject: Licenses etc. (was: Re: [antlr-interest] Re: Antlr Studio iscool.)
Message-ID: <C7FE35004D40FD45AA342991B88CE4040129001C@lnml1.eca-international.local>

That may be its *effect* (preventing derivative code from being
redistributed
under any license except the GPL), but that's not what - in law -
actually happens (nor does it have anything to do with the GPL's aims,
either :-).

If I combine my code with somebody else's GPL code, then the only way I
can distribute the resulting product is to provide my code under the GPL
too. There's nothing to stop me selling *my code only* under a different
licence and, indeed, I could get round this GPL thingy by providing my
code only as a patchset, and under a licence of my choice. In that case,
my customers would have to apply my patch to the GPL source and, because
they had no right to redistribute my code, they would be unable to
distribute the resulting patched product (they have broken no rules by
creating the product, but the requirements for them to distribute are
mutually incompatible, so they can't distribute).

As you say, though, this is the cleverness of the GPL, in that it
*guarantees* that users will always have the source of their products
and will also mostly have the right to modify and fix them (in my
scenario, they might not have the right to modify my code).

The GPL is a very clever licence. It's also very tricky to understand
correctly :-). I've been hit many times by clue-sticks and think I now
do understand it ... but I'm sure someone will have good cause to hit me
with another clue-stick at some point.

The problem is that the GPL's aims are often misunderstood, what it
achieves is often misunderstood, and the way it achieves it is often
misunderstood. And as they say on Groklaw, "law is like programming.
details are important".

Oh - and read the GPL - you said "the GPL allowed anyone to sell the
software at cost". If you read the GPL you will find it *ex*plicitly
allows you to sell the software at *any* cost *you* *like*. It's
economics that says you're unlikely to find many customers if you charge
a thousand dollars, not the GPL. As I said, the detail is important :-)

Cheers,
Wol

-----Original Message-----
From: antlr-interest-bounces@antlr.org
[mailto:antlr-interest-bounces@antlr.org] On Behalf Of Nigel
Sheridan-Smith
Sent: 22 September 2005 14:13
To: antlr-interest@antlr.org
Subject: RE: Licenses etc. (was: Re: [antlr-interest] Re: Antlr Studio
iscool.)



> -----Original Message-----
> From: antlr-interest-bounces@antlr.org [mailto:antlr-interest-
> bounces@antlr.org] On Behalf Of Anthony Youngman
> Sent: Thursday, 22 September 2005 6:47 PM
> To: Kay Roepke; Jose San Leandro
> Cc: antlr-interest@antlr.org
> Subject: RE: Licenses etc. (was: Re: [antlr-interest] Re: Antlr Studio
> iscool.)
> 
> What the GPL does (and is intended to do) is stop *you* selling *my*
> work (and cutting me out of the loop).
> 

Actually, my understanding was that the GPL allowed anyone to sell the
software at cost, but prevented derivative code from being redistributed
under any license except the GPL. You are free to modify the code for
your
own purposes, but you cannot redistribute it to anyone else (at profit,
or
at no cost) unless you can provide them the source code for the
modifications upon request. This guarantees the "freedom" of all of the
users, who will always have access to the source code for the original
product, and all derivative products that are redistributed.


* ************************************************************************ *

This transmission is intended for the named recipient only. It may contain private and confidential information. If this has come to you in error you must not act on anything disclosed in it, nor must you copy it, modify it, disseminate it in any way, or show it to anyone. Please e-mail the sender to inform us of the transmission error or telephone ECA International immediately and delete the e-mail from your information system.

Telephone numbers for ECA International offices are: Sydney +61 (0)2 8272 5300, Hong Kong + 852 2121 2388, London +44 (0)20 7351 5000 and New York +1 212 582 2333.

* ************************************************************************ *

From christopher.d.schultz at comcast.net  Thu Sep 22 06:55:06 2005
From: christopher.d.schultz at comcast.net (Christopher Schultz)
Date: Thu Sep 22 06:53:47 2005
Subject: [antlr-interest] Price of Antlr Studio
In-Reply-To: <C7FE35004D40FD45AA342991B88CE40401290016@lnml1.eca-international.local>
References: <C7FE35004D40FD45AA342991B88CE40401290016@lnml1.eca-international.local>
Message-ID: <4332B7BA.7040703@comcast.net>

Anthony,

> Ter has consistently said he wants Antlr to be widely used, and has
> deliberately chosen the BSD licence so that it can be used in commercial
> products ...

The GPL has no prohibitions about use in commercial software. You can
sell your software all you like. But, you also have to give it away.
That may not make a whole lot of sense to you, but it sure does to a
company like Red Hat.

If you are talking about "GPL" as the specific GPL license (and not the
LGPL), then you're right: it's "viral". However, if you mean GPL as a
term to mean "A Gnu-Style Licence", then you're wrong: the LGPL isn't
viral. You can feel free to sell software that uses LGPL'd components,
and you don't have to give away your source or binaries.

Here's my two cents on the license of ANTLR: I would have preferred that
Terrence require mods to be given back to the community. He (and others)
have spend a ton of time and energy building this product that is both
libre and gratis and I think that the entire community would benefit
from 3rd-party additions. If Terrence won't put them into the core ANTLR
distro, they can be offered as add-ons or they can even fork the code.

I just hate it when people make blanket statements like Gnu licenses
prohibit commercial development. :(

Anyway, I'm off my soapbox.

-chris
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 254 bytes
Desc: OpenPGP digital signature
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20050922/dff30810/signature.bin
From Anthony.Youngman at eca-international.com  Thu Sep 22 07:10:21 2005
From: Anthony.Youngman at eca-international.com (Anthony Youngman)
Date: Thu Sep 22 07:10:25 2005
Subject: [antlr-interest] Price of Antlr Studio
Message-ID: <C7FE35004D40FD45AA342991B88CE4040129001D@lnml1.eca-international.local>

Christopher,

There's a big difference between Red Hat Linux (where RH's fraction of
ownership is minimal), and Antlr where Ter owns maybe half. And again,
moving on to TT and MySQL where they own (or control) 100%.

Note also, that with Red Hat, TT and MySQL, if you're not the copyright
owner you're making money on applications or services, not on the
product itself. Ter want wants people to be able to make money from
Antlr itself.

I didn't say "GNU *prohibits* commercial development". I said "BSD
*allows* commercial development". And you have to admit, GNU makes
earning money *from* *the* *product* *itself* pretty much commercially
impossible. That's just the way things pan out in practice. And from
what I can tell, that's not what Ter wants. As I said, my project will
be (L)GPL, because I don't want people profiting from the *product*
*itself*.

Cheers,
Wol

-----Original Message-----
From: Christopher Schultz [mailto:christopher.d.schultz@comcast.net] 
Sent: 22 September 2005 14:55
To: Anthony Youngman
Cc: Prashant Deva; ANTLR Interest
Subject: Re: [antlr-interest] Price of Antlr Studio

Anthony,

> Ter has consistently said he wants Antlr to be widely used, and has
> deliberately chosen the BSD licence so that it can be used in
commercial
> products ...

The GPL has no prohibitions about use in commercial software. You can
sell your software all you like. But, you also have to give it away.
That may not make a whole lot of sense to you, but it sure does to a
company like Red Hat.

If you are talking about "GPL" as the specific GPL license (and not the
LGPL), then you're right: it's "viral". However, if you mean GPL as a
term to mean "A Gnu-Style Licence", then you're wrong: the LGPL isn't
viral. You can feel free to sell software that uses LGPL'd components,
and you don't have to give away your source or binaries.

Here's my two cents on the license of ANTLR: I would have preferred that
Terrence require mods to be given back to the community. He (and others)
have spend a ton of time and energy building this product that is both
libre and gratis and I think that the entire community would benefit
from 3rd-party additions. If Terrence won't put them into the core ANTLR
distro, they can be offered as add-ons or they can even fork the code.

I just hate it when people make blanket statements like Gnu licenses
prohibit commercial development. :(

Anyway, I'm off my soapbox.

-chris

* ************************************************************************ *

This transmission is intended for the named recipient only. It may contain private and confidential information. If this has come to you in error you must not act on anything disclosed in it, nor must you copy it, modify it, disseminate it in any way, or show it to anyone. Please e-mail the sender to inform us of the transmission error or telephone ECA International immediately and delete the e-mail from your information system.

Telephone numbers for ECA International offices are: Sydney +61 (0)2 8272 5300, Hong Kong + 852 2121 2388, London +44 (0)20 7351 5000 and New York +1 212 582 2333.

* ************************************************************************ *

From prashant.deva at gmail.com  Thu Sep 22 08:39:13 2005
From: prashant.deva at gmail.com (Prashant Deva)
Date: Thu Sep 22 08:39:18 2005
Subject: [antlr-interest] ANTLR Studio license issues
Message-ID: <41fed8f805092208399947b3d@mail.gmail.com>

1.)  Why isnt ANTLR Studio GPLed?

Some people are saying that there is nothing in GPL that does not
allow you to charge for your product.

Yes, that is true, but it also says that you gotta distribute the
source along for free.

Now even a bonehead can conclude that if you can get the source code
for free then you would rather just download it and compile it
yourself than pay for the software. after all it takes only a minute
to compile. So NO, get this clear, if your software is GPLd , it
CANNOT be sold. Especially one like an IDE.

That said some parts of ANTLR Studio do come under the Sun Public
License and source will be provided with them. Specifically the
AntlrStudio.Lexer_1.0.0.jar distributed with the beta is under SPL.
You can download the source even now from netbeans site.

2.) Why dont i give the IDE for free and charge for services? Doesnt
redhat use the same business model?

There is a difference between providing support for an IDE and
providing it for and Operating System.
Also AS has from the begining been designed such that you can
instantly start using it ful fledged without reading any manuals or
requiring any support. If you watch the videos you will see it says -
Time to learn ANTLR Studio - 0 minutes.

So if you have used Eclipse before you should get started with using
AS right away. There is nothing new to learn. No new keyboard
shortcuts, etc. You dont need to modify your code for use with the
debugger. Hell, you dont even need to press Ctrl+Space to auto
complete!

All the people who have got the beta version have been able to use
without requiring any help from me ( aside from the bugs they
encountered).

3.) Somebody said something like giving the software away with GPL
allows the small guy to gain advantage in the market.

I will correct you on this. Yes, it does so, but only when the the
small guy is competing in a *large* market. The market for language
tools is small, very small and i wont be surpised if ANTLR Studio soon
becomes the leaading tool in the market.

4.) Some guys are saying that ANTLR should have been GPLed so that all
tools for it would be GPL and that i am *selling* the work of Terence!

This really is the craziest message i have got. NO, I am NOT selling
Terence's work! ANTLR is still free and can be downloaded free of cost
from antlr.org. ANTLR Studio has been designed from the ground up by
me and me alone.

The reason why ANTLR is not GPL is cause then every program that uses
it would need to be GPLed and Terence certainly doesnt want that.

I had a talk with Terence regarding ANTLR Studio going commercial and
he told me that he was perfectly fine with it.

PRASHANT
From sebastian.mies at gmx.net  Thu Sep 22 09:12:15 2005
From: sebastian.mies at gmx.net (Sebastian Mies)
Date: Thu Sep 22 09:12:05 2005
Subject: [antlr-interest] ANTLR Studio license issues
In-Reply-To: <41fed8f805092208399947b3d@mail.gmail.com>
References: <41fed8f805092208399947b3d@mail.gmail.com>
Message-ID: <1268746368.20050922181215@gmx.net>

Hi Prashant,

it's ok to sell software. So I don't really follow
this discussion anymore.

Another question:
It would be nice to have an evaluation copy of AS, rather than only
videos. Will there be one?
I know that it is difficult to publish a eval version in an java
environment since it can be easily cracked, decompiled or whatsoever..
Maybe a limited version with a little more features than the
antlreclipse plugin and a time limit would do it.

Any plans?

Sebastian.

PD> 1.)  Why isnt ANTLR Studio GPLed?

PD> Some people are saying that there is nothing in GPL that does not
PD> allow you to charge for your product.

PD> Yes, that is true, but it also says that you gotta distribute the
PD> source along for free.

PD> Now even a bonehead can conclude that if you can get the source code
PD> for free then you would rather just download it and compile it
PD> yourself than pay for the software. after all it takes only a minute
PD> to compile. So NO, get this clear, if your software is GPLd , it
PD> CANNOT be sold. Especially one like an IDE.

PD> That said some parts of ANTLR Studio do come under the Sun Public
PD> License and source will be provided with them. Specifically the
PD> AntlrStudio.Lexer_1.0.0.jar distributed with the beta is under SPL.
PD> You can download the source even now from netbeans site.

PD> 2.) Why dont i give the IDE for free and charge for services? Doesnt
PD> redhat use the same business model?

PD> There is a difference between providing support for an IDE and
PD> providing it for and Operating System.
PD> Also AS has from the begining been designed such that you can
PD> instantly start using it ful fledged without reading any manuals or
PD> requiring any support. If you watch the videos you will see it says -
PD> Time to learn ANTLR Studio - 0 minutes.

PD> So if you have used Eclipse before you should get started with using
PD> AS right away. There is nothing new to learn. No new keyboard
PD> shortcuts, etc. You dont need to modify your code for use with the
PD> debugger. Hell, you dont even need to press Ctrl+Space to auto
PD> complete!

PD> All the people who have got the beta version have been able to use
PD> without requiring any help from me ( aside from the bugs they
PD> encountered).

PD> 3.) Somebody said something like giving the software away with GPL
PD> allows the small guy to gain advantage in the market.

PD> I will correct you on this. Yes, it does so, but only when the the
PD> small guy is competing in a *large* market. The market for language
PD> tools is small, very small and i wont be surpised if ANTLR Studio soon
PD> becomes the leaading tool in the market.

PD> 4.) Some guys are saying that ANTLR should have been GPLed so that all
PD> tools for it would be GPL and that i am *selling* the work of Terence!

PD> This really is the craziest message i have got. NO, I am NOT selling
PD> Terence's work! ANTLR is still free and can be downloaded free of cost
PD> from antlr.org. ANTLR Studio has been designed from the ground up by
PD> me and me alone.

PD> The reason why ANTLR is not GPL is cause then every program that uses
PD> it would need to be GPLed and Terence certainly doesnt want that.

PD> I had a talk with Terence regarding ANTLR Studio going commercial and
PD> he told me that he was perfectly fine with it.

PD> PRASHANT




From jose.sanleandro at ventura24.es  Thu Sep 22 09:32:12 2005
From: jose.sanleandro at ventura24.es (Jose San Leandro)
Date: Thu Sep 22 09:32:23 2005
Subject: [antlr-interest] ANTLR Studio license issues
In-Reply-To: <41fed8f805092208399947b3d@mail.gmail.com>
References: <41fed8f805092208399947b3d@mail.gmail.com>
Message-ID: <200509221832.13771.jose.sanleandro@ventura24.es>

On Thursday 22 September 2005 17:39, Prashant Deva wrote:
> 1.)  Why isnt ANTLR Studio GPLed?
>
> Some people are saying that there is nothing in GPL that does not
> allow you to charge for your product.
>
> Yes, that is true, but it also says that you gotta distribute the
> source along for free.
>
> Now even a bonehead can conclude that if you can get the source code
> for free then you would rather just download it and compile it
> yourself than pay for the software. after all it takes only a minute
> to compile. So NO, get this clear, if your software is GPLd , it
> CANNOT be sold. Especially one like an IDE.

Well, I sold a GPLed tool for 12k $ recently. The customer had a problem, it 
fixes it, and now the customer is willing to pay for more features.

> That said some parts of ANTLR Studio do come under the Sun Public
> License and source will be provided with them. Specifically the
> AntlrStudio.Lexer_1.0.0.jar distributed with the beta is under SPL.
> You can download the source even now from netbeans site.
>
> 2.) Why dont i give the IDE for free and charge for services? Doesnt
> redhat use the same business model?
>
> There is a difference between providing support for an IDE and
> providing it for and Operating System.
> Also AS has from the begining been designed such that you can
> instantly start using it ful fledged without reading any manuals or
> requiring any support. If you watch the videos you will see it says -
> Time to learn ANTLR Studio - 0 minutes.
>
> So if you have used Eclipse before you should get started with using
> AS right away. There is nothing new to learn. No new keyboard
> shortcuts, etc. You dont need to modify your code for use with the
> debugger. Hell, you dont even need to press Ctrl+Space to auto
> complete!
>
> All the people who have got the beta version have been able to use
> without requiring any help from me ( aside from the bugs they
> encountered).
>
> 3.) Somebody said something like giving the software away with GPL
> allows the small guy to gain advantage in the market.
>
> I will correct you on this. Yes, it does so, but only when the the
> small guy is competing in a *large* market. The market for language
> tools is small, very small and i wont be surpised if ANTLR Studio soon
> becomes the leaading tool in the market.
>
> 4.) Some guys are saying that ANTLR should have been GPLed so that all
> tools for it would be GPL and that i am *selling* the work of Terence!
>
> This really is the craziest message i have got. NO, I am NOT selling
> Terence's work! ANTLR is still free and can be downloaded free of cost
> from antlr.org. ANTLR Studio has been designed from the ground up by
> me and me alone.
>
> The reason why ANTLR is not GPL is cause then every program that uses
> it would need to be GPLed and Terence certainly doesnt want that.
>
> I had a talk with Terence regarding ANTLR Studio going commercial and
> he told me that he was perfectly fine with it.

This seems to be *pragmatic* vs *moral*. Some recent post said that the only 
thing that matters is the "usefulness" of the software. Maybe that is too 
ambitious. I find that point of view respectful, but weak. In some sense, I'm 
also pragmatic. I use only Free software because it provides me the warranty 
that I will never regret: everything I learn, whatever customizations I do, 
will help me improving the way I use the tool. Non-free software doesn't 
allow me to improve my skills but using their rules: papers and keyboard 
shortcuts, at most.
I once used a tool called Together. I should had used Emacs since the 
beginning, despite all the features Together had. Me as a professional cannot 
afford going back and forward.

But anyway, if GPL makes it more difficult to make money, do you think 
"closing" it will give you better results? I wish you luck, but it's not 
about the GPL: you just don't care enough about the "4 freedoms" of ANTLR 
Studio customers. You just discard thinking about that *moral* stuff unless 
you got your monetary compensation. I hope you'd reconsider it should you get 
rich ;).

Regards,

> PRASHANT
From prashant.deva at gmail.com  Thu Sep 22 09:36:33 2005
From: prashant.deva at gmail.com (Prashant Deva)
Date: Thu Sep 22 09:36:35 2005
Subject: [antlr-interest] ANTLR Studio license issues
In-Reply-To: <1268746368.20050922181215@gmx.net>
References: <41fed8f805092208399947b3d@mail.gmail.com>
	<1268746368.20050922181215@gmx.net>
Message-ID: <41fed8f80509220936233fb97d@mail.gmail.com>

Yes, a trial version will be available when the final version of ANTLR
Studio is released :)

PRASHANT

On 9/22/05, Sebastian Mies <sebastian.mies@gmx.net> wrote:
> Hi Prashant,
>
> it's ok to sell software. So I don't really follow
> this discussion anymore.
>
> Another question:
> It would be nice to have an evaluation copy of AS, rather than only
> videos. Will there be one?
> I know that it is difficult to publish a eval version in an java
> environment since it can be easily cracked, decompiled or whatsoever..
> Maybe a limited version with a little more features than the
> antlreclipse plugin and a time limit would do it.
>
> Any plans?
>
> Sebastian.
>
> PD> 1.)  Why isnt ANTLR Studio GPLed?
>
> PD> Some people are saying that there is nothing in GPL that does not
> PD> allow you to charge for your product.
>
> PD> Yes, that is true, but it also says that you gotta distribute the
> PD> source along for free.
>
> PD> Now even a bonehead can conclude that if you can get the source code
> PD> for free then you would rather just download it and compile it
> PD> yourself than pay for the software. after all it takes only a minute
> PD> to compile. So NO, get this clear, if your software is GPLd , it
> PD> CANNOT be sold. Especially one like an IDE.
>
> PD> That said some parts of ANTLR Studio do come under the Sun Public
> PD> License and source will be provided with them. Specifically the
> PD> AntlrStudio.Lexer_1.0.0.jar distributed with the beta is under SPL.
> PD> You can download the source even now from netbeans site.
>
> PD> 2.) Why dont i give the IDE for free and charge for services? Doesnt
> PD> redhat use the same business model?
>
> PD> There is a difference between providing support for an IDE and
> PD> providing it for and Operating System.
> PD> Also AS has from the begining been designed such that you can
> PD> instantly start using it ful fledged without reading any manuals or
> PD> requiring any support. If you watch the videos you will see it says -
> PD> Time to learn ANTLR Studio - 0 minutes.
>
> PD> So if you have used Eclipse before you should get started with using
> PD> AS right away. There is nothing new to learn. No new keyboard
> PD> shortcuts, etc. You dont need to modify your code for use with the
> PD> debugger. Hell, you dont even need to press Ctrl+Space to auto
> PD> complete!
>
> PD> All the people who have got the beta version have been able to use
> PD> without requiring any help from me ( aside from the bugs they
> PD> encountered).
>
> PD> 3.) Somebody said something like giving the software away with GPL
> PD> allows the small guy to gain advantage in the market.
>
> PD> I will correct you on this. Yes, it does so, but only when the the
> PD> small guy is competing in a *large* market. The market for language
> PD> tools is small, very small and i wont be surpised if ANTLR Studio soon
> PD> becomes the leaading tool in the market.
>
> PD> 4.) Some guys are saying that ANTLR should have been GPLed so that all
> PD> tools for it would be GPL and that i am *selling* the work of Terence!
>
> PD> This really is the craziest message i have got. NO, I am NOT selling
> PD> Terence's work! ANTLR is still free and can be downloaded free of cost
> PD> from antlr.org. ANTLR Studio has been designed from the ground up by
> PD> me and me alone.
>
> PD> The reason why ANTLR is not GPL is cause then every program that uses
> PD> it would need to be GPLed and Terence certainly doesnt want that.
>
> PD> I had a talk with Terence regarding ANTLR Studio going commercial and
> PD> he told me that he was perfectly fine with it.
>
> PD> PRASHANT
>
>
>
>
>
From teddemc at yahoo.com  Thu Sep 22 22:09:39 2005
From: teddemc at yahoo.com (Matthew Tedder)
Date: Thu Sep 22 22:09:45 2005
Subject: [antlr-interest] Selling GPL'd Software--Fully Compensated
In-Reply-To: <200509221832.13771.jose.sanleandro@ventura24.es>
Message-ID: <20050923050939.802.qmail@web52904.mail.yahoo.com>


You can also sell a binary of ANTLR Studio GPL
licensed for say $49 a copy but provide the source
code for no less than say a $40,000 fee.  This is the
model TheKompany uses with its GPL'd software.

Richard Stallman didn't like it much, but he agreed it
was legal.

Again, I strongly recommend just giving it away using
it as an advertising for your services
making/enhancing compilers for customers.  You will
definitely make more money this way than with a
commercial, per-user license.  Show me one company
that failed to make profitability using this model?  

Matthew

--- Jose San Leandro <jose.sanleandro@ventura24.es>
wrote:

> On Thursday 22 September 2005 17:39, Prashant Deva
> wrote:
> > 1.)  Why isnt ANTLR Studio GPLed?
> >
> > Some people are saying that there is nothing in
> GPL that does not
> > allow you to charge for your product.
> >
> > Yes, that is true, but it also says that you gotta
> distribute the
> > source along for free.
> >
> > Now even a bonehead can conclude that if you can
> get the source code
> > for free then you would rather just download it
> and compile it
> > yourself than pay for the software. after all it
> takes only a minute
> > to compile. So NO, get this clear, if your
> software is GPLd , it
> > CANNOT be sold. Especially one like an IDE.
> 
> Well, I sold a GPLed tool for 12k $ recently. The
> customer had a problem, it 
> fixes it, and now the customer is willing to pay for
> more features.
> 
> > That said some parts of ANTLR Studio do come under
> the Sun Public
> > License and source will be provided with them.
> Specifically the
> > AntlrStudio.Lexer_1.0.0.jar distributed with the
> beta is under SPL.
> > You can download the source even now from netbeans
> site.
> >
> > 2.) Why dont i give the IDE for free and charge
> for services? Doesnt
> > redhat use the same business model?
> >
> > There is a difference between providing support
> for an IDE and
> > providing it for and Operating System.
> > Also AS has from the begining been designed such
> that you can
> > instantly start using it ful fledged without
> reading any manuals or
> > requiring any support. If you watch the videos you
> will see it says -
> > Time to learn ANTLR Studio - 0 minutes.
> >
> > So if you have used Eclipse before you should get
> started with using
> > AS right away. There is nothing new to learn. No
> new keyboard
> > shortcuts, etc. You dont need to modify your code
> for use with the
> > debugger. Hell, you dont even need to press
> Ctrl+Space to auto
> > complete!
> >
> > All the people who have got the beta version have
> been able to use
> > without requiring any help from me ( aside from
> the bugs they
> > encountered).
> >
> > 3.) Somebody said something like giving the
> software away with GPL
> > allows the small guy to gain advantage in the
> market.
> >
> > I will correct you on this. Yes, it does so, but
> only when the the
> > small guy is competing in a *large* market. The
> market for language
> > tools is small, very small and i wont be surpised
> if ANTLR Studio soon
> > becomes the leaading tool in the market.
> >
> > 4.) Some guys are saying that ANTLR should have
> been GPLed so that all
> > tools for it would be GPL and that i am *selling*
> the work of Terence!
> >
> > This really is the craziest message i have got.
> NO, I am NOT selling
> > Terence's work! ANTLR is still free and can be
> downloaded free of cost
> > from antlr.org. ANTLR Studio has been designed
> from the ground up by
> > me and me alone.
> >
> > The reason why ANTLR is not GPL is cause then
> every program that uses
> > it would need to be GPLed and Terence certainly
> doesnt want that.
> >
> > I had a talk with Terence regarding ANTLR Studio
> going commercial and
> > he told me that he was perfectly fine with it.
> 
> This seems to be *pragmatic* vs *moral*. Some recent
> post said that the only 
> thing that matters is the "usefulness" of the
> software. Maybe that is too 
> ambitious. I find that point of view respectful, but
> weak. In some sense, I'm 
> also pragmatic. I use only Free software because it
> provides me the warranty 
> that I will never regret: everything I learn,
> whatever customizations I do, 
> will help me improving the way I use the tool.
> Non-free software doesn't 
> allow me to improve my skills but using their rules:
> papers and keyboard 
> shortcuts, at most.
> I once used a tool called Together. I should had
> used Emacs since the 
> beginning, despite all the features Together had. Me
> as a professional cannot 
> afford going back and forward.
> 
> But anyway, if GPL makes it more difficult to make
> money, do you think 
> "closing" it will give you better results? I wish
> you luck, but it's not 
> about the GPL: you just don't care enough about the
> "4 freedoms" of ANTLR 
> Studio customers. You just discard thinking about
> that *moral* stuff unless 
> you got your monetary compensation. I hope you'd
> reconsider it should you get 
> rich ;).
> 
> Regards,
> 
> > PRASHANT
> 



		
__________________________________ 
Yahoo! Mail - PC Magazine Editors' Choice 2005 
http://mail.yahoo.com
From gt54-antlr at cyconix.com  Fri Sep 23 01:29:32 2005
From: gt54-antlr at cyconix.com (Paul Johnson)
Date: Fri Sep 23 01:29:39 2005
Subject: Licenses etc. (was: Re: [antlr-interest] Re: Antlr Studio is
	cool.)
In-Reply-To: <C7FE35004D40FD45AA342991B88CE40401290015@lnml1.eca-international.local>
References: <C7FE35004D40FD45AA342991B88CE40401290015@lnml1.eca-international.local>
Message-ID: <4333BCEC.3040604@cyconix.com>

Anthony Youngman wrote:
> The thing with the GPL is that it does NOT prevent an author selling his
> own work. If Prashant wants to sell Antlr Studio, that is his moral
> right.
> 
> What the GPL does (and is intended to do) is stop *you* selling *my*
> work (and cutting me out of the loop).

Not quite - you can charge whatever you want for GPL'ed work, whoever 
wrote it. The GPL has nothing to do with money. Two quotes:

> When we speak of free software, we are referring to freedom, not price.

> You may charge a fee for the physical act of transferring a copy, and
> you may at your option offer warranty protection in exchange for a
> fee.

Note that the second quote refers to any GPL'ed software - not, for 
example, your own work or your derivative of a GPL'ed work. There is no 
definition of what a fee is, and no statement that it should be 
'reasonable'.

The GPL has many problems, not the least of which is the definition of a 
'derivative' work. It's not clear at what point you become obliged to 
distribute a copy of your own source code if you include any GPL'ed 
source in your code. That's why real-world commercial organisations 
don't like it. A second issue is that, if you do charge a lot of money 
to distribute your own (or someone else's) work, then there's nothing to 
stop a third party also distributing that work for gratis.

IMHO, the GPL is simply a religious manifesto, and is a pile of crock. 
Ter has cut right through this with his own licence, which is a model of 
simplicity and clarity. I would love to know what happened in that phone 
conversation with Richard Stallman...

From Anthony.Youngman at eca-international.com  Fri Sep 23 01:46:21 2005
From: Anthony.Youngman at eca-international.com (Anthony Youngman)
Date: Fri Sep 23 01:47:26 2005
Subject: Licenses etc. (was: Re: [antlr-interest] Re: Antlr Studio iscool.)
Message-ID: <C7FE35004D40FD45AA342991B88CE40401290020@lnml1.eca-international.local>

I said that you can't *sell* my work. You said you can *charge* for my
work. Where's the conflict?

And as for the "definition of derivative", that's not the GPL's problem.
If, LEGALLY, your work is a derivative of a GPL work, then the GPL
applies. Because the GPL is a *licence*, then the meaning of the word
"derivative" is whatever your government says it is, and it's not in the
GPL's interest to try to (re)define it.

As for what happened with the phone call with RMS, I guess Ter said "I
know what the GPL does, and it's not what I want". I can't see RMS
having a problem with that ...

Cheers,
Wol

-----Original Message-----
From: antlr-interest-bounces@antlr.org
[mailto:antlr-interest-bounces@antlr.org] On Behalf Of Paul Johnson
Sent: 23 September 2005 09:30
To: antlr-interest@antlr.org
Subject: Re: Licenses etc. (was: Re: [antlr-interest] Re: Antlr Studio
iscool.)

Anthony Youngman wrote:
> The thing with the GPL is that it does NOT prevent an author selling
his
> own work. If Prashant wants to sell Antlr Studio, that is his moral
> right.
> 
> What the GPL does (and is intended to do) is stop *you* selling *my*
> work (and cutting me out of the loop).

Not quite - you can charge whatever you want for GPL'ed work, whoever 
wrote it. The GPL has nothing to do with money. Two quotes:

> When we speak of free software, we are referring to freedom, not
price.

> You may charge a fee for the physical act of transferring a copy, and
> you may at your option offer warranty protection in exchange for a
> fee.

Note that the second quote refers to any GPL'ed software - not, for 
example, your own work or your derivative of a GPL'ed work. There is no 
definition of what a fee is, and no statement that it should be 
'reasonable'.

The GPL has many problems, not the least of which is the definition of a

'derivative' work. It's not clear at what point you become obliged to 
distribute a copy of your own source code if you include any GPL'ed 
source in your code. That's why real-world commercial organisations 
don't like it. A second issue is that, if you do charge a lot of money 
to distribute your own (or someone else's) work, then there's nothing to

stop a third party also distributing that work for gratis.

IMHO, the GPL is simply a religious manifesto, and is a pile of crock. 
Ter has cut right through this with his own licence, which is a model of

simplicity and clarity. I would love to know what happened in that phone

conversation with Richard Stallman...


* ************************************************************************ *

This transmission is intended for the named recipient only. It may contain private and confidential information. If this has come to you in error you must not act on anything disclosed in it, nor must you copy it, modify it, disseminate it in any way, or show it to anyone. Please e-mail the sender to inform us of the transmission error or telephone ECA International immediately and delete the e-mail from your information system.

Telephone numbers for ECA International offices are: Sydney +61 (0)2 8272 5300, Hong Kong + 852 2121 2388, London +44 (0)20 7351 5000 and New York +1 212 582 2333.

* ************************************************************************ *

From mjl at nova.edu  Fri Sep 23 09:10:59 2005
From: mjl at nova.edu (Michael Laszlo)
Date: Fri Sep 23 09:11:09 2005
Subject: [antlr-interest] booleans in interpreters
Message-ID: <200509231610.j8NGAxUq015588@S4.acast.nova.edu>

In my lexer code, my ID pattern picks out keywords and literals.
For example:

ID:	LETTER (LETTER|DIGIT)* {
	...		
	// primitive literals
	else if (getText().equals("true")) { $setType(BOOLEAN); }
	else if (getText().equals("false")) { $setType(BOOLEAN); }
	}

My parser includes this code:

tokens {
	BOOLEAN<AST=BooleanNode>;
	...
}

My intention is to build a true and a false instance of the 
BooleanNode class. The BooleanNode constructor uses getText()
to distinguish the two cases.

However, antlr.Tools complains about nondeterminisms between
rules BOOLEAN and ID. 

I've noticed that if I include an assignment clause in the 
tokens declarations, things work fine. Something like:

tokens {
	BOOLEAN_TRUE="true"<AST=BooleanNode>;
	BOOLEAN_FALSE="false"<AST=BooleanNode>;
	...
}

However, it shouldn't be necessary to define distinct token types
for true and false. 

Any suggestions?

Thanks, Michael



From jmcclain at tcshealthcare.com  Fri Sep 23 10:06:14 2005
From: jmcclain at tcshealthcare.com (John MccLain)
Date: Fri Sep 23 10:04:45 2005
Subject: [antlr-interest] Building grammars
Message-ID: <JMEOIPJEDGMHCIOMBHLIGEMOELAA.jmcclain@tcshealthcare.com>


I cant even get started with a translator till I build the grammar - and
that is what I am having trouble with.
I want to build the grammar (or pretty close to it)  for powerscript - the
powerbuilder language. I know that it is loosely based on Basic, but am
having trouble writing it. My questions are:

1) is there a tutorial on writing grammars out there?
2) is there a Basic langugage grammar out there?
3) does any one have the powerscript grammar that they would be willing to
share?

John McClain
Senior Software Engineer
TCS Healthcare
jmcclain@tcshealthcare.com
(530)886-1700x235
"Skepticism is the first step toward truth"

From teddemc at yahoo.com  Fri Sep 23 11:07:02 2005
From: teddemc at yahoo.com (Matthew Tedder)
Date: Fri Sep 23 11:07:05 2005
Subject: Licenses etc. (was: Re: [antlr-interest] Re: Antlr Studio is
	cool.)
In-Reply-To: <4333BCEC.3040604@cyconix.com>
Message-ID: <20050923180702.88018.qmail@web52912.mail.yahoo.com>

Paul et al,

  Indeed, "derrivative work" is defined by legal
precident.  Trying to redefine this term would only
serve the lengthen the GPL creating more potential for
different interpretations.

  It's very simple, for the right to include GPL'd
code into your own code, you must in exchange make
your code GPL licensed.  Many commercial organizations
also like this clause, such as for electronic
transaction protocols in the financial industry.  It
has largely stopped a culture of embrace and extend,
and forced firms to compete on merit, not attempt to
monopolize (at least in this one respect).  Note that
you can bundle GPL'd software, but you cannot mix
actually source code with your own.

  While some software developers don't understand the
GPL, the GPL and BSD licenses are nevertheless the
most widely known software license in existence.  Due
to this uniformity, these two licenses bring far more
assurance than any others in existance.  Companies
(and people) who think it's confusing can have those
opinions, but they are far better known and understood
than any others... To deny that is ignorance.

  And about the "viral GPL" FUD, if you mistakenly
include GPL'd code in your code and try to license
your code incompatibly with the GPL, it does not make
your code automatically GPL'd.  The GPL says it simply
terminates your right to use the GPL'd code.  You must
stop shipping it.  Comparatively, what would happen if
any company A discovered that company B included some
of their proprietary code into their product?  The
viral argument is also rediculous because it couldn't
do that legally, anyway.

  So stop bashing the GPL... Especially when you
demonstrate a blatant lack of understanding of it. 

  I am not bashing Terrance's choice of BSD.  It's
good choice, as far as I am concerned.

Matthew

--- Paul Johnson <gt54-antlr@cyconix.com> wrote:

> Anthony Youngman wrote:
> > The thing with the GPL is that it does NOT prevent
> an author selling his
> > own work. If Prashant wants to sell Antlr Studio,
> that is his moral
> > right.
> > 
> > What the GPL does (and is intended to do) is stop
> *you* selling *my*
> > work (and cutting me out of the loop).
> 
> Not quite - you can charge whatever you want for
> GPL'ed work, whoever 
> wrote it. The GPL has nothing to do with money. Two
> quotes:
> 
> > When we speak of free software, we are referring
> to freedom, not price.
> 
> > You may charge a fee for the physical act of
> transferring a copy, and
> > you may at your option offer warranty protection
> in exchange for a
> > fee.
> 
> Note that the second quote refers to any GPL'ed
> software - not, for 
> example, your own work or your derivative of a
> GPL'ed work. There is no 
> definition of what a fee is, and no statement that
> it should be 
> 'reasonable'.
> 
> The GPL has many problems, not the least of which is
> the definition of a 
> 'derivative' work. It's not clear at what point you
> become obliged to 
> distribute a copy of your own source code if you
> include any GPL'ed 
> source in your code. That's why real-world
> commercial organisations 
> don't like it. A second issue is that, if you do
> charge a lot of money 
> to distribute your own (or someone else's) work,
> then there's nothing to 
> stop a third party also distributing that work for
> gratis.
> 
> IMHO, the GPL is simply a religious manifesto, and
> is a pile of crock. 
> Ter has cut right through this with his own licence,
> which is a model of 
> simplicity and clarity. I would love to know what
> happened in that phone 
> conversation with Richard Stallman...
> 
> 


__________________________________________________
Do You Yahoo!?
Tired of spam?  Yahoo! Mail has the best spam protection around 
http://mail.yahoo.com 
From monty at codetransform.com  Fri Sep 23 11:31:29 2005
From: monty at codetransform.com (Monty Zukowski)
Date: Fri Sep 23 11:31:50 2005
Subject: [antlr-interest] Building grammars
In-Reply-To: <JMEOIPJEDGMHCIOMBHLIGEMOELAA.jmcclain@tcshealthcare.com>
References: <JMEOIPJEDGMHCIOMBHLIGEMOELAA.jmcclain@tcshealthcare.com>
Message-ID: <43344A01.1070408@codetransform.com>

> 1) is there a tutorial on writing grammars out there?

Check out Ter's tutorials for his classes.
http://www.cs.usfca.edu/~parrt/course/652/index.html

> 2) is there a Basic langugage grammar out there?

Yeah, check the Maverick project, also look through the grammars on
antlr.org

> 3) does any one have the powerscript grammar that they would be willing to
> share?

Nope, sorry.

Monty
From gt54-antlr at cyconix.com  Fri Sep 23 12:13:17 2005
From: gt54-antlr at cyconix.com (Paul Johnson)
Date: Fri Sep 23 12:24:49 2005
Subject: Licenses etc. (was: Re: [antlr-interest] Re: Antlr Studio is
	cool.)
In-Reply-To: <20050923180702.88018.qmail@web52912.mail.yahoo.com>
References: <20050923180702.88018.qmail@web52912.mail.yahoo.com>
Message-ID: <433453CD.2090406@cyconix.com>

Matthew Tedder wrote:
> Paul et al,
> 
>   Indeed, "derrivative work" is defined by legal
> precident.  Trying to redefine this term would only
> serve the lengthen the GPL creating more potential for
> different interpretations.

Chapter and verse? Or even a single reference? What about the issue of 
'linking' in general, and dynamic linking? What if the source code is 
changed? Defined by legal precedent in what country?

I'm aware of only one test of the GPL and the definition of a 
'derivative' work, and that was Progress Software vs. MySQL, in a US 
court. In that case, on the matter of derivative works, the judge stated 
that "the matter is one of fair dispute". Hardly conclusive. If you have 
any more precedents, especially non-US ones, then I would be very 
pleased to hear about them.

>   So stop bashing the GPL... Especially when you
> demonstrate a blatant lack of understanding of it. 

What?

From parrt at cs.usfca.edu  Fri Sep 23 13:00:35 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Fri Sep 23 13:00:40 2005
Subject: [antlr-interest] please: no more license / GPL discussions
Message-ID: <A74DD5BB-F8EE-476B-891D-196E5A018EF4@cs.usfca.edu>

Thanks folks!
Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com

From parrt at cs.usfca.edu  Fri Sep 23 18:54:27 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Fri Sep 23 18:54:34 2005
Subject: [antlr-interest] ANTLR 3: Problem with static DFA class generation
In-Reply-To: <9da4f4520509190421346b701c@mail.gmail.com>
References: <9da4f45205090909127d862fbc@mail.gmail.com>
	<AE756421-BC60-47EF-BA22-C6403686D6F9@cs.usfca.edu>
	<9da4f452050910151623ce405f@mail.gmail.com>
	<1E87C0F7-1780-4B16-B4FC-2D2AFB89EDE6@cs.usfca.edu>
	<9da4f45205091203045523c71c@mail.gmail.com>
	<9da4f452050912034161736a7f@mail.gmail.com>
	<A8858BA3-F1A0-4FEC-95ED-307901A428C4@cs.usfca.edu>
	<9da4f45205091902223a5239c1@mail.gmail.com>
	<9da4f4520509190421346b701c@mail.gmail.com>
Message-ID: <78EBB066-363C-47C3-B522-0E67C164F823@cs.usfca.edu>

Hi.  Without altering the code generator *code*, I was easily able to  
change the output to have nonstatic cyclic DFAs thanks to the power  
of StringTemplate. :)

Originally, the parser template had a "hole" for the cyclic DFAs:

<cyclicDFAs>

Aside from removing the "static" keyword everywhere, I added the  
following line in front that applied a template to the DFAs:

     <! define a singleton instance for each cyclic DFA !>
     <cyclicDFAs:{dfa | protected DFA<dfa.decisionNumber>  
dfa<dfa.decisionNumber> = new DFA<dfa.decisionNumber>();}>

which generates a bunch of singletons:

     protected DFA3 dfa3 = new DFA3();
     protected DFA4 dfa4 = new DFA4();
     ...

in addition to the cyclic DFAs.

The list of DFAs is actually a list of templates so I can ask for  
their attributes no problem.  Nothing is converted to string until  
the last minute.  Notice the really great SmallTalk-inspired syntax  
of that template application:

<attributeList:{ iteratorVar | template}>

That was added in StringTemplate 2.2 :)

Anyway, all my unit tests pass, but I'll try to add some more to see  
if they compile ok and can access instance variables.

Thanks for the inspiration Oliver!

Ter

On Sep 19, 2005, at 4:21 AM, Oliver Zeigermann wrote:

> OK, I created patches for the new Java.stg, DFA.java (optional - makes
> predicat non-static) and finally a small one for Codegenerator.java.
> Using them will generate the code below.
>
> Oliver
>
> 2005/9/19, Oliver Zeigermann <oliver.zeigermann@gmail.com>:
>
>> 2005/9/18, Terence Parr <parrt@cs.usfca.edu>:
>>
>>>
>>> On Sep 12, 2005, at 3:41 AM, Oliver Zeigermann wrote:
>>>
>>>> It simple makes all DFA code non static to allow full access to the
>>>> outer class' (Lexer) fields. The part that creates a single DFA per
>>>> decision and lexer like this:
>>>>
>>>> class XMLLexer extends Lexer {
>>>>
>>>> ...
>>>>
>>>> private dfa10 = new DFA10();
>>>>
>>>> ...
>>>>
>>>> alt10 = dfa10.predict(input);
>>>>
>>>> ...
>>>>
>>>> }
>>>>
>>>
>>> Ok, I think figured out why I didn't want to do this before.  There
>>> is a bunch of state construction "new" operations that go on when  
>>> you
>>> say new DFA10().  I only wanted them to occur once as they are
>>> expensive.  I somehow missed the obvious reuse of the outermost DFA
>>> object; here you are using dfa10 to create DFA10 just once.  In this
>>> way, we only create the DFA states once like with static, but the
>>> inner classes have an implied "this" pointer and can see the  
>>> instance
>>> variables of the outer Lexer object.   I like it!
>>>
>>
>> Yes, that's right! My patch does not include the above single
>> construction, as this would have required a bit more than changing a
>> template, though. But I am pretty sure that you know how to do  
>> this...
>>
>> Oliver
>>
>>
>> <Java.stg.diff>
>> <DFA.java.diff>
>> <CodeGenerator.java.diff>
>

--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com

From oliver.zeigermann at gmail.com  Sat Sep 24 03:18:52 2005
From: oliver.zeigermann at gmail.com (Oliver Zeigermann)
Date: Sat Sep 24 03:18:56 2005
Subject: [antlr-interest] ANTLR 3: Problem with static DFA class generation
In-Reply-To: <78EBB066-363C-47C3-B522-0E67C164F823@cs.usfca.edu>
References: <9da4f45205090909127d862fbc@mail.gmail.com>
	<AE756421-BC60-47EF-BA22-C6403686D6F9@cs.usfca.edu>
	<9da4f452050910151623ce405f@mail.gmail.com>
	<1E87C0F7-1780-4B16-B4FC-2D2AFB89EDE6@cs.usfca.edu>
	<9da4f45205091203045523c71c@mail.gmail.com>
	<9da4f452050912034161736a7f@mail.gmail.com>
	<A8858BA3-F1A0-4FEC-95ED-307901A428C4@cs.usfca.edu>
	<9da4f45205091902223a5239c1@mail.gmail.com>
	<9da4f4520509190421346b701c@mail.gmail.com>
	<78EBB066-363C-47C3-B522-0E67C164F823@cs.usfca.edu>
Message-ID: <9da4f452050924031815b10e30@mail.gmail.com>

Wow! That is really impressive! StringTemplate is even more powerful
than I thought!

What making method predict in org.antlr.runtime.DFA non-static as
well? Just for consistency?

Anyway, again, thanks for fixing this :)

Oliver

2005/9/24, Terence Parr <parrt@cs.usfca.edu>:
> Hi.  Without altering the code generator *code*, I was easily able to
> change the output to have nonstatic cyclic DFAs thanks to the power
> of StringTemplate. :)
>
> Originally, the parser template had a "hole" for the cyclic DFAs:
>
> <cyclicDFAs>
>
> Aside from removing the "static" keyword everywhere, I added the
> following line in front that applied a template to the DFAs:
>
>      <! define a singleton instance for each cyclic DFA !>
>      <cyclicDFAs:{dfa | protected DFA<dfa.decisionNumber>
> dfa<dfa.decisionNumber> = new DFA<dfa.decisionNumber>();}>
>
> which generates a bunch of singletons:
>
>      protected DFA3 dfa3 = new DFA3();
>      protected DFA4 dfa4 = new DFA4();
>      ...
>
> in addition to the cyclic DFAs.
>
> The list of DFAs is actually a list of templates so I can ask for
> their attributes no problem.  Nothing is converted to string until
> the last minute.  Notice the really great SmallTalk-inspired syntax
> of that template application:
>
> <attributeList:{ iteratorVar | template}>
>
> That was added in StringTemplate 2.2 :)
>
> Anyway, all my unit tests pass, but I'll try to add some more to see
> if they compile ok and can access instance variables.
>
> Thanks for the inspiration Oliver!
>
> Ter
>
> On Sep 19, 2005, at 4:21 AM, Oliver Zeigermann wrote:
>
> > OK, I created patches for the new Java.stg, DFA.java (optional - makes
> > predicat non-static) and finally a small one for Codegenerator.java.
> > Using them will generate the code below.
> >
> > Oliver
> >
> > 2005/9/19, Oliver Zeigermann <oliver.zeigermann@gmail.com>:
> >
> >> 2005/9/18, Terence Parr <parrt@cs.usfca.edu>:
> >>
> >>>
> >>> On Sep 12, 2005, at 3:41 AM, Oliver Zeigermann wrote:
> >>>
> >>>> It simple makes all DFA code non static to allow full access to the
> >>>> outer class' (Lexer) fields. The part that creates a single DFA per
> >>>> decision and lexer like this:
> >>>>
> >>>> class XMLLexer extends Lexer {
> >>>>
> >>>> ...
> >>>>
> >>>> private dfa10 = new DFA10();
> >>>>
> >>>> ...
> >>>>
> >>>> alt10 = dfa10.predict(input);
> >>>>
> >>>> ...
> >>>>
> >>>> }
> >>>>
> >>>
> >>> Ok, I think figured out why I didn't want to do this before.  There
> >>> is a bunch of state construction "new" operations that go on when
> >>> you
> >>> say new DFA10().  I only wanted them to occur once as they are
> >>> expensive.  I somehow missed the obvious reuse of the outermost DFA
> >>> object; here you are using dfa10 to create DFA10 just once.  In this
> >>> way, we only create the DFA states once like with static, but the
> >>> inner classes have an implied "this" pointer and can see the
> >>> instance
> >>> variables of the outer Lexer object.   I like it!
> >>>
> >>
> >> Yes, that's right! My patch does not include the above single
> >> construction, as this would have required a bit more than changing a
> >> template, though. But I am pretty sure that you know how to do
> >> this...
> >>
> >> Oliver
> >>
> >>
> >> <Java.stg.diff>
> >> <DFA.java.diff>
> >> <CodeGenerator.java.diff>
> >
>
> --
> CS Professor & Grad Director, University of San Francisco
> Creator, ANTLR Parser Generator, http://www.antlr.org
> Cofounder, http://www.jguru.com
>
>
From virtualaspirin at yahoo.com  Sat Sep 24 07:02:29 2005
From: virtualaspirin at yahoo.com (Akhilesh Mritunjai)
Date: Sat Sep 24 07:02:31 2005
Subject: [antlr-interest] Java code generator memory optimization
Message-ID: <20050924140230.26117.qmail@web30813.mail.mud.yahoo.com>

Hi everybody

Sorry have been totally out of touch lately. (Deepest
apologies to you, Terence).

I have been able to reduce memory requirement for my
AST tree generated by parser by upto 25% by using
intern() function of String class to get reference of
an string object from internal JVM string pool.

Changes required are:

Function CommonAST.setText(String text_)

- text = text_
+ text = text_.intern()

Obviously it was a hack. Proper way to do it is to
modify lexer code and use "new
String(char[]).intern()" where we do just "new
String(...)".

String.intern() has been present since JDK1.2 so it
shouldn't pose compatibility problems.

Secondly, I still push forward inclusion of an option
"useDupTree" in tree parser. This will call dupTree()
rather than dup() on current node when option
"buildAST" is true. This allows me to make stages that
do pure tree-to-tree transformations with no
side-effects, with just wring grammar for nodes of
interest rather than entire tree.

Thanks
- Akhilesh


		
__________________________________ 
Yahoo! Mail - PC Magazine Editors' Choice 2005 
http://mail.yahoo.com
From scott at javadude.com  Sat Sep 24 07:56:30 2005
From: scott at javadude.com (Scott Stanchfield)
Date: Sat Sep 24 07:57:01 2005
Subject: [antlr-interest] Java code generator memory optimization
In-Reply-To: <20050924140230.26117.qmail@web30813.mail.mud.yahoo.com>
Message-ID: <200509241451.j8OEpHx6026591@s2.eroute.net>

Be careful with that...

If your program is short-lived, it's generally fine.

If your program lives a long time (like on a server), it's very very bad, as
strings that are interned are never GC'd. Over time, you can essentially
leak rarely or singularly-used strings. (The more unique strings you have,
the more memory use with no way to reclaim...)

Be careful...
-- Scott 

> -----Original Message-----
> From: antlr-interest-bounces@antlr.org 
> [mailto:antlr-interest-bounces@antlr.org] On Behalf Of 
> Akhilesh Mritunjai
> Sent: Saturday, September 24, 2005 10:02 AM
> To: antlr-interest@antlr.org
> Subject: [antlr-interest] Java code generator memory optimization
> 
> Hi everybody
> 
> Sorry have been totally out of touch lately. (Deepest 
> apologies to you, Terence).
> 
> I have been able to reduce memory requirement for my AST tree 
> generated by parser by upto 25% by using
> intern() function of String class to get reference of an 
> string object from internal JVM string pool.
> 
> Changes required are:
> 
> Function CommonAST.setText(String text_)
> 
> - text = text_
> + text = text_.intern()
> 
> Obviously it was a hack. Proper way to do it is to modify 
> lexer code and use "new String(char[]).intern()" where we do 
> just "new String(...)".
> 
> String.intern() has been present since JDK1.2 so it shouldn't 
> pose compatibility problems.
> 
> Secondly, I still push forward inclusion of an option 
> "useDupTree" in tree parser. This will call dupTree() rather 
> than dup() on current node when option "buildAST" is true. 
> This allows me to make stages that do pure tree-to-tree 
> transformations with no side-effects, with just wring grammar 
> for nodes of interest rather than entire tree.
> 
> Thanks
> - Akhilesh
> 
> 
> 		
> __________________________________
> Yahoo! Mail - PC Magazine Editors' Choice 2005 http://mail.yahoo.com
> 


From mail at martin-probst.com  Sat Sep 24 08:46:05 2005
From: mail at martin-probst.com (Martin Probst)
Date: Sat Sep 24 08:46:15 2005
Subject: [antlr-interest] Java code generator memory optimization
In-Reply-To: <200509241451.j8OEpHx6026591@s2.eroute.net>
References: <200509241451.j8OEpHx6026591@s2.eroute.net>
Message-ID: <1127576765.8950.2.camel@localhost.localdomain>

Hi,

> If your program lives a long time (like on a server), it's very very bad, as
> strings that are interned are never GC'd. 

And it gets even worse if you just take it from a String which is a
substring. E.g. longString.substring(5,10).intern() will in some VMs
make the whole character array from the long string intern'd, e.g.
unavailable to GC. The only thing you should do is new
String(longstring.substring(...)).intern(), as this forces a copy of the
character array.

Martin

From parrt at cs.usfca.edu  Sat Sep 24 14:34:19 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Sat Sep 24 14:34:23 2005
Subject: [antlr-interest] ANTLR 3: Problem with static DFA class generation
In-Reply-To: <9da4f452050924031815b10e30@mail.gmail.com>
References: <9da4f45205090909127d862fbc@mail.gmail.com>
	<AE756421-BC60-47EF-BA22-C6403686D6F9@cs.usfca.edu>
	<9da4f452050910151623ce405f@mail.gmail.com>
	<1E87C0F7-1780-4B16-B4FC-2D2AFB89EDE6@cs.usfca.edu>
	<9da4f45205091203045523c71c@mail.gmail.com>
	<9da4f452050912034161736a7f@mail.gmail.com>
	<A8858BA3-F1A0-4FEC-95ED-307901A428C4@cs.usfca.edu>
	<9da4f45205091902223a5239c1@mail.gmail.com>
	<9da4f4520509190421346b701c@mail.gmail.com>
	<78EBB066-363C-47C3-B522-0E67C164F823@cs.usfca.edu>
	<9da4f452050924031815b10e30@mail.gmail.com>
Message-ID: <563648D7-F581-4724-9576-721D331125C5@cs.usfca.edu>


On Sep 24, 2005, at 3:18 AM, Oliver Zeigermann wrote:

> Wow! That is really impressive! StringTemplate is even more powerful
> than I thought!
>
> What making method predict in org.antlr.runtime.DFA non-static as
> well? Just for consistency?

Hi :)

it looks nonstatic to me:

/** The overall cyclic DFA chunk; contains all the DFA states */
cyclicDFA(className,decisionNumber,states,description) ::= <<
class DFA<decisionNumber> extends DFA {
     public int predict(IntStream input) throws RecognitionException {
         return predict(input, s0);
     }
     <states>
}
 >>

maybe sync again :)

Ter
>
> Anyway, again, thanks for fixing this :)
>
> Oliver
>
> 2005/9/24, Terence Parr <parrt@cs.usfca.edu>:
>
>> Hi.  Without altering the code generator *code*, I was easily able to
>> change the output to have nonstatic cyclic DFAs thanks to the power
>> of StringTemplate. :)
>>
>> Originally, the parser template had a "hole" for the cyclic DFAs:
>>
>> <cyclicDFAs>
>>
>> Aside from removing the "static" keyword everywhere, I added the
>> following line in front that applied a template to the DFAs:
>>
>>      <! define a singleton instance for each cyclic DFA !>
>>      <cyclicDFAs:{dfa | protected DFA<dfa.decisionNumber>
>> dfa<dfa.decisionNumber> = new DFA<dfa.decisionNumber>();}>
>>
>> which generates a bunch of singletons:
>>
>>      protected DFA3 dfa3 = new DFA3();
>>      protected DFA4 dfa4 = new DFA4();
>>      ...
>>
>> in addition to the cyclic DFAs.
>>
>> The list of DFAs is actually a list of templates so I can ask for
>> their attributes no problem.  Nothing is converted to string until
>> the last minute.  Notice the really great SmallTalk-inspired syntax
>> of that template application:
>>
>> <attributeList:{ iteratorVar | template}>
>>
>> That was added in StringTemplate 2.2 :)
>>
>> Anyway, all my unit tests pass, but I'll try to add some more to see
>> if they compile ok and can access instance variables.
>>
>> Thanks for the inspiration Oliver!
>>
>> Ter
>>
>> On Sep 19, 2005, at 4:21 AM, Oliver Zeigermann wrote:
>>
>>
>>> OK, I created patches for the new Java.stg, DFA.java (optional -  
>>> makes
>>> predicat non-static) and finally a small one for Codegenerator.java.
>>> Using them will generate the code below.
>>>
>>> Oliver
>>>
>>> 2005/9/19, Oliver Zeigermann <oliver.zeigermann@gmail.com>:
>>>
>>>
>>>> 2005/9/18, Terence Parr <parrt@cs.usfca.edu>:
>>>>
>>>>
>>>>>
>>>>> On Sep 12, 2005, at 3:41 AM, Oliver Zeigermann wrote:
>>>>>
>>>>>
>>>>>> It simple makes all DFA code non static to allow full access  
>>>>>> to the
>>>>>> outer class' (Lexer) fields. The part that creates a single  
>>>>>> DFA per
>>>>>> decision and lexer like this:
>>>>>>
>>>>>> class XMLLexer extends Lexer {
>>>>>>
>>>>>> ...
>>>>>>
>>>>>> private dfa10 = new DFA10();
>>>>>>
>>>>>> ...
>>>>>>
>>>>>> alt10 = dfa10.predict(input);
>>>>>>
>>>>>> ...
>>>>>>
>>>>>> }
>>>>>>
>>>>>>
>>>>>
>>>>> Ok, I think figured out why I didn't want to do this before.   
>>>>> There
>>>>> is a bunch of state construction "new" operations that go on when
>>>>> you
>>>>> say new DFA10().  I only wanted them to occur once as they are
>>>>> expensive.  I somehow missed the obvious reuse of the outermost  
>>>>> DFA
>>>>> object; here you are using dfa10 to create DFA10 just once.  In  
>>>>> this
>>>>> way, we only create the DFA states once like with static, but the
>>>>> inner classes have an implied "this" pointer and can see the
>>>>> instance
>>>>> variables of the outer Lexer object.   I like it!
>>>>>
>>>>>
>>>>
>>>> Yes, that's right! My patch does not include the above single
>>>> construction, as this would have required a bit more than  
>>>> changing a
>>>> template, though. But I am pretty sure that you know how to do
>>>> this...
>>>>
>>>> Oliver
>>>>
>>>>
>>>> <Java.stg.diff>
>>>> <DFA.java.diff>
>>>> <CodeGenerator.java.diff>
>>>>
>>>
>>>
>>
>> --
>> CS Professor & Grad Director, University of San Francisco
>> Creator, ANTLR Parser Generator, http://www.antlr.org
>> Cofounder, http://www.jguru.com
>>
>>
>

--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com

From virtualaspirin at yahoo.com  Sat Sep 24 14:46:33 2005
From: virtualaspirin at yahoo.com (Akhilesh Mritunjai)
Date: Sat Sep 24 14:46:37 2005
Subject: [antlr-interest] Java code generator memory optimization
In-Reply-To: <1127576765.8950.2.camel@localhost.localdomain>
Message-ID: <20050924214633.88275.qmail@web30805.mail.mud.yahoo.com>


Yep, it can if the program is a long running one and
assigns a lot of different identifiers to a node (and
thus intern'ing them).

However, in a typical compiler (like in my case), a
source program is taken in which there are some
identifier declarations and a LOT of identifier
references. The statistical analysis done by me tell
that in case of a detailed homogenous AST, the leaf
nodes representing identifiers and constants comprise
of upto 40% of total nodes.

The lexer creates a new string for each identifier
token from char stream, essentially creating several
string objects with identical strings. In case of
lexer, even the char array in strings is not shared.
These string objects and char arrays in them account
for upto 40% of total memory used by program.

So I refine my argument with inputs given, and say
that  unless a lexer is being used as part of a long
running program, running on a JVM that somehow doesn't
yield intern'ed strings to GC, the lexer should create
intern'ed token text strings.

What does everybody think ?

PS: It never occurred to me that intern'ed strings are
never GC'ed. There is no excuse for that kind of poor
implementation today when Java provides support for
weak references since 1.2. But if it is true, lexer
can do with a string pool rather than creating
millions of identical string objects.

- Akhilesh

--- Martin Probst <mail@martin-probst.com> wrote:

> Hi,
> 
> > If your program lives a long time (like on a
> server), it's very very bad, as
> > strings that are interned are never GC'd. 
> 
> And it gets even worse if you just take it from a
> String which is a
> substring. E.g. longString.substring(5,10).intern()
> will in some VMs
> make the whole character array from the long string
> intern'd, e.g.
> unavailable to GC. The only thing you should do is
> new
> String(longstring.substring(...)).intern(), as this
> forces a copy of the
> character array.
> 
> Martin
> 
> 



		
__________________________________ 
Yahoo! Mail - PC Magazine Editors' Choice 2005 
http://mail.yahoo.com
From parrt at cs.usfca.edu  Sat Sep 24 15:05:52 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Sat Sep 24 15:05:57 2005
Subject: [antlr-interest] Java code generator memory optimization
In-Reply-To: <20050924214633.88275.qmail@web30805.mail.mud.yahoo.com>
References: <20050924214633.88275.qmail@web30805.mail.mud.yahoo.com>
Message-ID: <80265E8E-F66B-4D21-A2D3-E0CB9519235C@cs.usfca.edu>

On Sep 24, 2005, at 2:46 PM, Akhilesh Mritunjai wrote:
> What does everybody think ?

Hi :)

In the ANTLR v3 version, I have tokens point at the start/stop index  
into a single char buffer that has the entire input text (well, that  
is the default anyway).  So, you have a duplicates still in the sense  
that all references to identifier "salary" are not shared, but at  
least there are not multiple copies as there are now by default. :)   
If your file is 1M, it's probably pretty big and that's just not  
enough memory to worry about this days.  Wow, I remember when my 16k  
machine was great! ;)  Anybody remember which processor was 1.077 mhz  
by the way?  ;)  I noted the other day that the Apollo space shot  
computer back in the 60s had about that speed for the flight control  
computer.  The entire source for the flight control software is on  
the web...how did I get off on this topic?  oh well, my first coca  
cola in a while...too much sugar. ;)

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com

From parrt at cs.usfca.edu  Sat Sep 24 17:04:46 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Sat Sep 24 17:04:51 2005
Subject: [antlr-interest] Re: lexer labels in v3
In-Reply-To: <9da4f4520509120639455bd795@mail.gmail.com>
References: <9da4f45205091205566db32e08@mail.gmail.com>
	<9da4f4520509120639455bd795@mail.gmail.com>
Message-ID: <C3AEE4CB-84BF-4D46-97C8-DBD694673A58@cs.usfca.edu>

Oliver, nice work.  Labels on lexer fragment rule refs now work great:

lexer grammar T;

A : 'a' x=B y="void" z='x' ;

fragment
B : 'b' ;

It still works, but is slightly inefficient when B is not a fragment.

I added similar stuff to char and string refs.  Note that labelling a  
string should be a token label

x="void"

should define x as a Token right whereas

c='x'

has label c as an int?

Another difference is that labels will be unique to the alternative  
as they can have different types.  In parser/tree parser rules,  
everything is one type: Token or AST so I collect and put labels at  
the start of the rule so you can ref them like this:

( x:A | x:B )
{print x;}

pretty handy.  Are you ok with the inconsistency?  It's rare to label  
stuff in the lexer so this is probably ok.

The code block for A is (comment auto generated):

         // t.g:3:5: 'a' x= B y= "void" z= 'x'
         {
         match('a');
         int xStart = getCharIndex();
         mB();
         Token x = new CommonToken(input, Token.INVALID_TOKEN_TYPE,  
Token.DEFAULT_CHANNEL, xStart, getCharIndex()-1);

         int yStart = getCharIndex();
         match("void");
         Token y = new CommonToken(input, Token.INVALID_TOKEN_TYPE,  
Token.DEFAULT_CHANNEL, yStart, getCharIndex()-1);

         int z = input.LA(1);
         match('x');
         }

Oh, wildcard labels work too :)

Ter

On Sep 12, 2005, at 6:39 AM, Oliver Zeigermann wrote:

> Modifying template lexerRuleRef in Java.stg
> (org/antlr/codegen/templates/) to this
>
> lexerRuleRef(label,rule,args) ::= <<
> <if(label)>
> int <label>Start = getCharIndex();<\n>
> m<rule>(<args>);<\n>
> Token <label> = new CommonToken(input, Token.INVALID_TOKEN_TYPE,
> Token.DEFAULT_CHANNEL, <label>Start, getCharIndex()-1);<\n>
> <else>
> m<rule>(<args>);<\n>
> <endif>
>
>>>
>>>
>
> allowed me to have labled lexer fragments like
>
> name=GENERIC_ID
>
> ...
>
> fragment GENERIC_ID     : ... ;
>
> Oliver
>
>
> 2005/9/12, Oliver Zeigermann <oliver.zeigermann@gmail.com>:
>
>> In codegen.g, rule atom the attribute "label" is set for
>> lexerStringRef, charRef and lexerRuleRef while there is no attribute
>> label for these rules. This causes an error upon generation.
>>
>> Obvious solution: either remove code that sets "label" (already done
>> at certain parts of rule atom) or add attribute "label" to the
>> templates.
>>
>> Oliver
>>
>

--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com

From tommy.nordgren at chello.se  Sat Sep 24 19:18:05 2005
From: tommy.nordgren at chello.se (Tommy Nordgren)
Date: Sat Sep 24 19:18:11 2005
Subject: [antlr-interest] Objective C code generator for Antlr
Message-ID: <2AEE69E8-A15F-4FE1-9E3F-45F179ADACB4@chello.se>

Do anyone have an objective C code generator for the Antlr parser  
generator,
that he is willing to share?
-------------------------------------
This sig is dedicated to the advancement of Nuclear Power
Tommy Nordgren
tommy.nordgren@chello.se



From oliver.zeigermann at gmail.com  Sun Sep 25 03:50:10 2005
From: oliver.zeigermann at gmail.com (Oliver Zeigermann)
Date: Sun Sep 25 09:30:18 2005
Subject: [antlr-interest] ANTLR 3: Problem with static DFA class generation
In-Reply-To: <563648D7-F581-4724-9576-721D331125C5@cs.usfca.edu>
References: <9da4f45205090909127d862fbc@mail.gmail.com>
	<1E87C0F7-1780-4B16-B4FC-2D2AFB89EDE6@cs.usfca.edu>
	<9da4f45205091203045523c71c@mail.gmail.com>
	<9da4f452050912034161736a7f@mail.gmail.com>
	<A8858BA3-F1A0-4FEC-95ED-307901A428C4@cs.usfca.edu>
	<9da4f45205091902223a5239c1@mail.gmail.com>
	<9da4f4520509190421346b701c@mail.gmail.com>
	<78EBB066-363C-47C3-B522-0E67C164F823@cs.usfca.edu>
	<9da4f452050924031815b10e30@mail.gmail.com>
	<563648D7-F581-4724-9576-721D331125C5@cs.usfca.edu>
Message-ID: <9da4f45205092503509dccb98@mail.gmail.com>

2005/9/24, Terence Parr <parrt@cs.usfca.edu>:
>
> On Sep 24, 2005, at 3:18 AM, Oliver Zeigermann wrote:
>
> > Wow! That is really impressive! StringTemplate is even more powerful
> > than I thought!
> >
> > What making method predict in org.antlr.runtime.DFA non-static as
> > well? Just for consistency?
>
> Hi :)
>
> it looks nonstatic to me:
>
> /** The overall cyclic DFA chunk; contains all the DFA states */
> cyclicDFA(className,decisionNumber,states,description) ::= <<
> class DFA<decisionNumber> extends DFA {
>      public int predict(IntStream input) throws RecognitionException {
>          return predict(input, s0);
>      }
>      <states>
> }
>  >>
>
> maybe sync again :)

You got me wrong. I was talking about the predict method of
org.antlr.runtime.DFA, i.e. the one DFA<decisionNumber> extends.

Oliver
From virtualaspirin at yahoo.com  Sun Sep 25 08:25:10 2005
From: virtualaspirin at yahoo.com (Akhilesh Mritunjai)
Date: Sun Sep 25 09:37:48 2005
Subject: [antlr-interest] Java code generator memory optimization
In-Reply-To: <80265E8E-F66B-4D21-A2D3-E0CB9519235C@cs.usfca.edu>
Message-ID: <20050925152510.5381.qmail@web30815.mail.mud.yahoo.com>

Hi Terence

My comments inline:

--- Terence Parr <parrt@cs.usfca.edu> wrote:
> In the ANTLR v3 version, I have tokens point at the
> start/stop index  
> into a single char buffer that has the entire input
> text (well, that  
> is the default anyway).  So, you have a duplicates
> still in the sense  
> that all references to identifier "salary" are not
> shared, but at  
> least there are not multiple copies as there are now
> by default. :)   

afaik, thats how the current one works too. Lexer
makes strings from chars it gets from input stream. So
for every identifier in stream you get entirely
different string objects with separate char arrays. Of
course, they won't be duplicated more than they occur
in input stream... and there is no sharing at all and
won't be with that approach in v3.0

> If your file is 1M, it's probably pretty big and
> that's just not  
> enough memory to worry about this days.  Wow, I

Um... The certification for mine will happen on an
input file set around 37 MB in size, and then some
people out there must be doing continuous stream
parsing.

The current suggestion comes from my observation of
processing an 8MB automatically generated sadist
pathological example made by me for which the parse
tree contains total of 5.7M nodes... 40% are
identifier subtree nodes and every one has a string
object. I intern'ed the node texts and, bam!!, it
saved me 150MB of memory  :)

Uh, I dunno how to put it, but somehow Terence, you
seem to underestimate the reach, potential and
influence of all the kickass tools you've made. I did
a lot of research and will have a solid testimony once
I complete this thing... one being making difference
between product ending in success or a sad failure.

> remember when my 16k  
> machine was great! ;)  Anybody remember which
> processor was 1.077 mhz  

God I'm young... my first was a 640k, 16 something MHz
on which I learnt BASIC and MSDOS 3.3 & 5.0 more than
a decade back :)

- Akhilesh


__________________________________________________
Do You Yahoo!?
Tired of spam?  Yahoo! Mail has the best spam protection around 
http://mail.yahoo.com 
From oliver.zeigermann at gmail.com  Sun Sep 25 04:57:03 2005
From: oliver.zeigermann at gmail.com (Oliver Zeigermann)
Date: Sun Sep 25 10:06:08 2005
Subject: [antlr-interest] Re: lexer labels in v3
In-Reply-To: <C3AEE4CB-84BF-4D46-97C8-DBD694673A58@cs.usfca.edu>
References: <9da4f45205091205566db32e08@mail.gmail.com>
	<9da4f4520509120639455bd795@mail.gmail.com>
	<C3AEE4CB-84BF-4D46-97C8-DBD694673A58@cs.usfca.edu>
Message-ID: <9da4f452050925045768c89b1@mail.gmail.com>

Thanks, works great for me and the inconsistency is rather natural, I guess :)

Oliver

2005/9/25, Terence Parr <parrt@cs.usfca.edu>:
> Oliver, nice work.  Labels on lexer fragment rule refs now work great:
>
> lexer grammar T;
>
> A : 'a' x=B y="void" z='x' ;
>
> fragment
> B : 'b' ;
>
> It still works, but is slightly inefficient when B is not a fragment.
>
> I added similar stuff to char and string refs.  Note that labelling a
> string should be a token label
>
> x="void"
>
> should define x as a Token right whereas
>
> c='x'
>
> has label c as an int?
>
> Another difference is that labels will be unique to the alternative
> as they can have different types.  In parser/tree parser rules,
> everything is one type: Token or AST so I collect and put labels at
> the start of the rule so you can ref them like this:
>
> ( x:A | x:B )
> {print x;}
>
> pretty handy.  Are you ok with the inconsistency?  It's rare to label
> stuff in the lexer so this is probably ok.
>
> The code block for A is (comment auto generated):
>
>          // t.g:3:5: 'a' x= B y= "void" z= 'x'
>          {
>          match('a');
>          int xStart = getCharIndex();
>          mB();
>          Token x = new CommonToken(input, Token.INVALID_TOKEN_TYPE,
> Token.DEFAULT_CHANNEL, xStart, getCharIndex()-1);
>
>          int yStart = getCharIndex();
>          match("void");
>          Token y = new CommonToken(input, Token.INVALID_TOKEN_TYPE,
> Token.DEFAULT_CHANNEL, yStart, getCharIndex()-1);
>
>          int z = input.LA(1);
>          match('x');
>          }
>
> Oh, wildcard labels work too :)
>
> Ter
>
> On Sep 12, 2005, at 6:39 AM, Oliver Zeigermann wrote:
>
> > Modifying template lexerRuleRef in Java.stg
> > (org/antlr/codegen/templates/) to this
> >
> > lexerRuleRef(label,rule,args) ::= <<
> > <if(label)>
> > int <label>Start = getCharIndex();<\n>
> > m<rule>(<args>);<\n>
> > Token <label> = new CommonToken(input, Token.INVALID_TOKEN_TYPE,
> > Token.DEFAULT_CHANNEL, <label>Start, getCharIndex()-1);<\n>
> > <else>
> > m<rule>(<args>);<\n>
> > <endif>
> >
> >>>
> >>>
> >
> > allowed me to have labled lexer fragments like
> >
> > name=GENERIC_ID
> >
> > ...
> >
> > fragment GENERIC_ID     : ... ;
> >
> > Oliver
> >
> >
> > 2005/9/12, Oliver Zeigermann <oliver.zeigermann@gmail.com>:
> >
> >> In codegen.g, rule atom the attribute "label" is set for
> >> lexerStringRef, charRef and lexerRuleRef while there is no attribute
> >> label for these rules. This causes an error upon generation.
> >>
> >> Obvious solution: either remove code that sets "label" (already done
> >> at certain parts of rule atom) or add attribute "label" to the
> >> templates.
> >>
> >> Oliver
> >>
> >
>
> --
> CS Professor & Grad Director, University of San Francisco
> Creator, ANTLR Parser Generator, http://www.antlr.org
> Cofounder, http://www.jguru.com
>
>
From parrt at cs.usfca.edu  Sun Sep 25 11:20:14 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Sun Sep 25 11:20:19 2005
Subject: [antlr-interest] Objective C code generator for Antlr
In-Reply-To: <2AEE69E8-A15F-4FE1-9E3F-45F179ADACB4@chello.se>
References: <2AEE69E8-A15F-4FE1-9E3F-45F179ADACB4@chello.se>
Message-ID: <7811AD24-563A-402C-A261-E28287AC65C8@cs.usfca.edu>


On Sep 24, 2005, at 7:18 PM, Tommy Nordgren wrote:

> Do anyone have an objective C code generator for the Antlr parser  
> generator,
> that he is willing to share?

Hi Tommy, the current ANTLR 2.x does not have one, though the XCode  
folks at apple would like one. ;)  The v3 version will have one  
almost certainly as it's so easy to build new targets (as opposed to  
the v2 version).  Ric Klaren built a basic C target in 2 days.  v3 is  
still in development.  One of my grad students, Jean Bovet, is a big  
Objective-C fan and may end up building a target ;)

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com

From parrt at cs.usfca.edu  Sun Sep 25 11:31:37 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Sun Sep 25 11:31:42 2005
Subject: [antlr-interest] Java code generator memory optimization
In-Reply-To: <20050925152510.5381.qmail@web30815.mail.mud.yahoo.com>
References: <20050925152510.5381.qmail@web30815.mail.mud.yahoo.com>
Message-ID: <018A0E55-40A6-4653-8EE1-E14FDEA530F8@cs.usfca.edu>


On Sep 25, 2005, at 8:25 AM, Akhilesh Mritunjai wrote:

> Hi Terence
>
> My comments inline:
>
> --- Terence Parr <parrt@cs.usfca.edu> wrote:
>
>> In the ANTLR v3 version, I have tokens point at the
>> start/stop index
>> into a single char buffer that has the entire input
>> text (well, that
>> is the default anyway).  So, you have a duplicates
>> still in the sense
>> that all references to identifier "salary" are not
>> shared, but at
>> least there are not multiple copies as there are now
>> by default. :)
>>
>
> afaik, thats how the current one works too.

Current CommonToken makes a new String object from a buffer, which  
must make a copy as that buffer is overwritten next token (needs new  
char array).  it does not point into the buffer with indexes as does v3.

> Lexer
> makes strings from chars it gets from input stream. So
> for every identifier in stream you get entirely
> different string objects with separate char arrays.

Yes.  New one will point into one buffer; no separate char arrays.

> Of
> course, they won't be duplicated more than they occur
> in input stream... and there is no sharing at all and
> won't be with that approach in v3.0

hooray!

>> If your file is 1M, it's probably pretty big and
>> that's just not
>> enough memory to worry about this days.  Wow, I
>>
>
> Um... The certification for mine will happen on an
> input file set around 37 MB in size, and then some
> people out there must be doing continuous stream
> parsing.

Yes, it can handle the continuous (but not by default) and 37MB is  
teeny still really.  I have 2G on my box. ;)

> The current suggestion comes from my observation of
> processing an 8MB automatically generated sadist
> pathological example made by me for which the parse
> tree contains total of 5.7M nodes... 40% are
> identifier subtree nodes and every one has a string
> object. I intern'ed the node texts and, bam!!, it
> saved me 150MB of memory  :)

Nice!  Some folks have suggested making the Token object also the  
tree node, which will further factor things out.  ANTLR v3 can do  
this no sweat as I assume absolutely nothing about the type of a tree  
node.  You pass me an "adaptor" that tells me how to add children and  
navigate :)

> Uh, I dunno how to put it, but somehow Terence, you
> seem to underestimate the reach, potential and
> influence of all the kickass tools you've made. I did

Wow!  Hooray!  Thanks...the next version is gonna kick so much ass it  
will reach around and kick my own ass ;)  Ha hah hahah!  I'm hoping  
to have it "ready for student abuse" in January.

> a lot of research and will have a solid testimony once
> I complete this thing... one being making difference
> between product ending in success or a sad failure.

That's awesome...can't wait to hear the results (good or bad).

>> remember when my 16k
>> machine was great! ;)  Anybody remember which
>> processor was 1.077 mhz
>>
>
> God I'm young... my first was a 640k, 16 something MHz
> on which I learnt BASIC and MSDOS 3.3 & 5.0 more than
> a decade back :)

That's pretty good.  Some folks "became conscious" on 128M machines. ;)

BTW, the 1.077mhz machine was the 6502 in the apple II. :)

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com

From parrt at cs.usfca.edu  Sun Sep 25 13:36:11 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Sun Sep 25 13:36:14 2005
Subject: [antlr-interest] evaluation of predicates in lexer
Message-ID: <53EDA533-8F0A-4F38-92EB-24ED7E9B0937@cs.usfca.edu>

Howdy, added a bunch of stuff on the evaluation of sem preds in the  
lexer for ANTLR v3:

http://www.antlr.org/blog/antlr3/lookahead.tml

Highlights a tough problem in terms of what predicates mean; ANTLR  
only uses predicates when it has insufficient syntactic information.   
The evaluation of predicates seems to conflict with matching the  
longest string.

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com

From tommy.nordgren at chello.se  Sun Sep 25 16:08:09 2005
From: tommy.nordgren at chello.se (Tommy Nordgren)
Date: Sun Sep 25 16:08:14 2005
Subject: [antlr-interest] Linkink error with C++ parser
Message-ID: <0C7B9D67-B432-40D7-AB6E-20F5E1620F41@chello.se>

I've implemented a test parser with antlr 2.7.5
For some reason, I get many linker errors, with symbols not found in  
the antlr C++
library. Is there a bug in the 2.7.5 build system?
-------------------------------------
This sig is dedicated to the advancement of Nuclear Power
Tommy Nordgren
tommy.nordgren@chello.se



From Anthony.Youngman at eca-international.com  Mon Sep 26 04:28:09 2005
From: Anthony.Youngman at eca-international.com (Anthony Youngman)
Date: Mon Sep 26 04:28:14 2005
Subject: Licenses etc. (was: Re: [antlr-interest] Re: Antlr Studio iscool.)
Message-ID: <C7FE35004D40FD45AA342991B88CE40401290025@lnml1.eca-international.local>

I believe "derivative work" is defined by the Berne Convention.

And yes, I agree with you that the matter is very confusing. However,
that is the fault of the politicians for failing to be clear about what
is, by its very nature, a difficult subject. But basically, if you use
part of a GPL'd work in your own program, then your program is a
derivative. You *may* get away with "fair use", and you will always get
away with "but it's for my own use" (because the GPL says you can), but
if you try to distribute your work you may get into trouble.

And I'm afraid I have to agree with Matthew as to your failure to
understand the GPL. A crucial first step is to comprehend the difference
between a *contract* (which, notwithstanding the L in the acronym, is
what EVERY click-through EULA is) and a *licence*.

If you have to say "I agree", then it's not a licence. Despite what
monied interests would have you believe. That's why you can break a
EULA, but you can't break the GPL. You break the law, instead.

Cheers,
Wol

-----Original Message-----
From: antlr-interest-bounces@antlr.org
[mailto:antlr-interest-bounces@antlr.org] On Behalf Of Paul Johnson
Sent: 23 September 2005 20:13
To: ANTLR Interest
Subject: Re: Licenses etc. (was: Re: [antlr-interest] Re: Antlr Studio
iscool.)

Matthew Tedder wrote:
> Paul et al,
> 
>   Indeed, "derrivative work" is defined by legal
> precident.  Trying to redefine this term would only
> serve the lengthen the GPL creating more potential for
> different interpretations.

Chapter and verse? Or even a single reference? What about the issue of 
'linking' in general, and dynamic linking? What if the source code is 
changed? Defined by legal precedent in what country?

I'm aware of only one test of the GPL and the definition of a 
'derivative' work, and that was Progress Software vs. MySQL, in a US 
court. In that case, on the matter of derivative works, the judge stated

that "the matter is one of fair dispute". Hardly conclusive. If you have

any more precedents, especially non-US ones, then I would be very 
pleased to hear about them.

>   So stop bashing the GPL... Especially when you
> demonstrate a blatant lack of understanding of it. 

What?


* ************************************************************************ *

This transmission is intended for the named recipient only. It may contain private and confidential information. If this has come to you in error you must not act on anything disclosed in it, nor must you copy it, modify it, disseminate it in any way, or show it to anyone. Please e-mail the sender to inform us of the transmission error or telephone ECA International immediately and delete the e-mail from your information system.

Telephone numbers for ECA International offices are: Sydney +61 (0)2 8272 5300, Hong Kong + 852 2121 2388, London +44 (0)20 7351 5000 and New York +1 212 582 2333.

* ************************************************************************ *

From kim at tinker.com  Sun Sep 25 00:56:07 2005
From: kim at tinker.com (Kim Shrier)
Date: Mon Sep 26 12:06:03 2005
Subject: [antlr-interest] Re: Objective C code generator for Antlr
In-Reply-To: <2AEE69E8-A15F-4FE1-9E3F-45F179ADACB4@chello.se>
References: <2AEE69E8-A15F-4FE1-9E3F-45F179ADACB4@chello.se>
Message-ID: <1FD0E845-54F0-42F4-A24B-3A7F2DF5BED7@tinker.com>

There is an Objective C code generator for Antlr in the Gnustep  
project.  It is
in dev-libs/gsantlr.  I contributed some patches about 4 years ago  
that made it
work with Antlr 2.7.1.  I haven't kept up with it so I don't know if  
it works
with the latest release.

Kim

On Sep 24, 2005, at 8:18 PM, Tommy Nordgren wrote:

> Do anyone have an objective C code generator for the Antlr parser  
> generator,
> that he is willing to share?
> -------------------------------------
> This sig is dedicated to the advancement of Nuclear Power
> Tommy Nordgren
> tommy.nordgren@chello.se
>
>
>
> _______________________________________________
> Do not post admin requests to the list. They will be ignored.
> Objc-language mailing list      (Objc-language@lists.apple.com)
> Help/Unsubscribe/Update your Subscription:
> http://lists.apple.com/mailman/options/objc-language/kim%40tinker.com
>
> This email sent to kim@tinker.com
>
>

--
  Kim Shrier - principal, Shrier and Deihl - mailto:kim@tinker.com
Remote Unix Network Admin, Security, Internet Software Development
   Tinker Internet Services - Superior FreeBSD-based Web Hosting
                      http://www.tinker.com/


From darthia at gmail.com  Mon Sep 26 14:13:31 2005
From: darthia at gmail.com (=?ISO-8859-1?Q?Jos=E9_Mar=EDa_Garc=EDa_Rodr=EDguez?=)
Date: Mon Sep 26 14:13:34 2005
Subject: [antlr-interest] booleans in interpreters
In-Reply-To: <200509231610.j8NGAxUq015588@S4.acast.nova.edu>
References: <200509231610.j8NGAxUq015588@S4.acast.nova.edu>
Message-ID: <87ca585205092614136079e16d@mail.gmail.com>

It seems right to me using your second approach, because, actually,
"true" and "false" are keywords (literals, I mean), so if it works, go
on :)

Regards,
--
Jos? Mar?a Garc?a Rodr?guez

2005/9/23, Michael Laszlo <mjl@nova.edu>:
> In my lexer code, my ID pattern picks out keywords and literals.
> For example:
>
> ID:     LETTER (LETTER|DIGIT)* {
>         ...
>         // primitive literals
>         else if (getText().equals("true")) { $setType(BOOLEAN); }
>         else if (getText().equals("false")) { $setType(BOOLEAN); }
>         }
>
> My parser includes this code:
>
> tokens {
>         BOOLEAN<AST=BooleanNode>;
>         ...
> }
>
> My intention is to build a true and a false instance of the
> BooleanNode class. The BooleanNode constructor uses getText()
> to distinguish the two cases.
>
> However, antlr.Tools complains about nondeterminisms between
> rules BOOLEAN and ID.
>
> I've noticed that if I include an assignment clause in the
> tokens declarations, things work fine. Something like:
>
> tokens {
>         BOOLEAN_TRUE="true"<AST=BooleanNode>;
>         BOOLEAN_FALSE="false"<AST=BooleanNode>;
>         ...
> }
>
> However, it shouldn't be necessary to define distinct token types
> for true and false.
>
> Any suggestions?
>
> Thanks, Michael
From ncuomo at gmail.com  Mon Sep 26 20:29:46 2005
From: ncuomo at gmail.com (Nicola Cuomo)
Date: Mon Sep 26 20:45:15 2005
Subject: [antlr-interest] Problem with semanic action
Message-ID: <983407134.20050927052946@gmail.com>

Hi again i've another problem :)

I've the following grammar piece (semantic action removed)

---
structuredMessage returns[Message *rmsg]
        : bm1=basicMessage (PAIR bm2=basicMessage )*
        ;

basicMessage returns[Message *rmsg]
        : VAR_IDENT (PRIME)?
        | CONST_IDENT
        | VAR_IDENT LPAREN structuredMessage RPAREN
        ;
---

Message is a tree like structure

struct Message
{
        int type;
        
        string value;
        
        Message *op1;
        Message *op2;
};

Using  semantic  action I can make and fill a Message structure in the
basicMessage role the problem is with the structuredMessage role.

In  my idea the subrole identified by bm1 should go into the op1 field
of  the  returned  Message structure and the subrole identified by bm2
should  go into the op2 field.

For  a message like (the "." is PAIR) A1.A2.A3 the structure should be
like (ASCII art incoming :)
   |
  / \
A1  / \
  A2  A3

The problem is that the role iterate the star part making difficult to
build a tree like structure.

So i was wondering how i can fill the Message structure?

The action i've written was something like

structuredMessage returns[Message *rmsg]
{
        Message *tbasicMessage = NULL;
        Message *tbasicMessages = NULL;
        Message *tmsg = NULL;
}
        : tbasicMessage=basicMessage 
                {  
                        tmsg = new Message;
                        tmsg->op1 = tbasicMessage;
                        tmsg->op2 = NULL;
                        rmsg = tmsg;
                }
                (PAIRING tbasicMessages=basicMessage
                {  
                        tmsg = new Message;
                        tmsg->op1 = tbasicMessage;
                        tmsg->op2 = tbasicMessages;
                        rmsg = tmsg;
                } )*
        ;
        
I really don't know what to do :(
        
Regards
-- 
 Nicola                          mailto:ncuomo@gmail.com

From gt54-antlr at cyconix.com  Tue Sep 27 00:54:50 2005
From: gt54-antlr at cyconix.com (Paul Johnson)
Date: Tue Sep 27 00:54:59 2005
Subject: [antlr-interest] Spam and Pipermail archives
Message-ID: <4338FACA.7070008@cyconix.com>

I've just started getting spam to this address. According to Google, 
this address only appears in the Antlr Pipermail archives, with the '@' 
replaced by " at ".

This is a free address, so it's not a problem for me, but others will be 
using more important addresses. Is there a simple way to scrub future 
archived posts? Or do we have to live with it?

Thanks

Paul

From jan.deklerck at hoerbiger.com  Tue Sep 27 06:01:54 2005
From: jan.deklerck at hoerbiger.com (jan.deklerck@hoerbiger.com)
Date: Tue Sep 27 15:02:15 2005
Subject: [antlr-interest] Re: c# code generation with Visual Studio .NET
Message-ID: <OF0A65B857.8DAD2D04-ONC1257089.0046956B-C1257089.004713CE@hoerbiger.com>

Dear Mr Patrik Suzzi,

Re : 
Cpp 2 Csharp translator 

Can you give more info about that ?
Do you have a working prototype ?

Regards,

Jan Deklerck, Ing
Development Engineer


HOERBIGER Drivetrain Mechatronics
Exit 7, Autobaan 20
B-8210 Loppem
Tel.: +32 (0)50 55 69 73
Fax: +32 (0)50 28 80 69
jan.deklerck@hoerbiger.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20050927/6714a43d/attachment.html
From sohail at taggedtype.net  Tue Sep 27 22:10:38 2005
From: sohail at taggedtype.net (Sohail Somani)
Date: Tue Sep 27 22:10:15 2005
Subject: [antlr-interest] Comments/newlines
Message-ID: <1127884238.11037.1.camel@localhost.localdomain>

How would you define a lexer to tokenize the following so that the
grammar rules use EOL?

x = y // some comment
// some comment
x = y

I want to parse both obviously language statement as IDENTIFIER EQ
IDENTIFIER EOL

I hope this makes sense!

Thanks

Sohail

From sohail at taggedtype.net  Tue Sep 27 22:19:12 2005
From: sohail at taggedtype.net (Sohail Somani)
Date: Tue Sep 27 22:18:49 2005
Subject: [antlr-interest] Comments/newlines
Message-ID: <1127884753.11037.3.camel@localhost.localdomain>

Apologies if this is a repost.

How would you define a lexer to tokenize the following so that the
grammar rules use EOL?

x = y // some comment
// some comment
x = y

I want to parse both obviously language statement as IDENTIFIER EQ
IDENTIFIER EOL

I hope this makes sense!

Thanks

Sohail

From oliver.zeigermann at gmail.com  Wed Sep 28 04:22:34 2005
From: oliver.zeigermann at gmail.com (Oliver Zeigermann)
Date: Wed Sep 28 04:22:39 2005
Subject: [antlr-interest] ANTLR 3: Ant Build script
Message-ID: <9da4f45205092804223bdb1c6d@mail.gmail.com>

Folks,

for anyone interesting in building ANTLR 3 from source, I have
attached a very simple ant build script. You will have to adjust
build.properties to at least point to your stringtemplate.jar which
should be at least version 2.2. You will also need ANTLR 2.7.5 either
in your classpath or in the lib directory of ant.

Cheers

Oliver
-------------- next part --------------
A non-text attachment was scrubbed...
Name: build.xml
Type: text/xml
Size: 2466 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20050928/5e5080eb/build.xml
-------------- next part --------------
A non-text attachment was scrubbed...
Name: build.properties
Type: application/octet-stream
Size: 161 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20050928/5e5080eb/build.obj
From craig at palantir.co.za  Thu Sep 29 04:03:05 2005
From: craig at palantir.co.za (Craig Main)
Date: Thu Sep 29 04:03:25 2005
Subject: [antlr-interest] Walking the tree to write code,
Message-ID: <20050929110320.F195EDC75C@www.antlr.org>

Hi,

 

I would like you know how you guys would handle the problem of trying to
walk an AST to reproduce the original source code.

I am planning a development in which we attempt to represent a script
graphically.

 

I think it makes sense to have the graphic display change the AST, and have
that generate the underlying code. Does that make sense, or would you
recommend a different approach.

 

Regards

Craig.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20050929/c7da2799/attachment.html
From lucianaleal2002 at yahoo.com.br  Thu Sep 29 07:26:51 2005
From: lucianaleal2002 at yahoo.com.br (Luciana Nunes Leal)
Date: Thu Sep 29 07:26:53 2005
Subject: [antlr-interest] Acentuation in grammar
Message-ID: <20050929142651.24653.qmail@web33302.mail.mud.yahoo.com>

Hi,
 
My grammar can contain characters like ?, ?, ?, ?, ?. 
 

When my grammar is like below and I run antlr.Tool, I see the error below.

 

grammar:

CHARACTER : ('a'..'z'| OxE1 | OxE9 | OxED | OxF3 | OxFA )+ ;

 
error:
ANTLR Parser Generator   Version 2.7.5 (20050128)   1989-2005 jGuru.com
error: Lexer rule OxE1 is not defined
error: Lexer rule OxE9 is not defined
error: Lexer rule OxED is not defined
error: Lexer rule OxF3 is not defined
error: Lexer rule OxFA is not defined
..\src\lnc.g:99:36: no definition of rule mOxE1
..\src\lnc.g:99:43: no definition of rule mOxE9
..\src\lnc.g:99:50: no definition of rule mOxED
..\src\lnc.g:99:57: no definition of rule mOxF3
..\src\lnc.g:99:64: no definition of rule mOxFA
..\src\lnc.g:99:36: no definition of rule mOxE1
..\src\lnc.g:99:43: no definition of rule mOxE9
..\src\lnc.g:99:50: no definition of rule mOxED
..\src\lnc.g:99:57: no definition of rule mOxF3
..\src\lnc.g:99:64: no definition of rule mOxFA
..\src\lnc.g:99:36: warning:Alternate omitted due to empty prediction set
..\src\lnc.g:99:43: warning:Alternate omitted due to empty prediction set
..\src\lnc.g:99:50: warning:Alternate omitted due to empty prediction set
..\src\lnc.g:99:57: warning:Alternate omitted due to empty prediction set
..\src\lnc.g:99:64: warning:Alternate omitted due to empty prediction set
Exiting due to errors.
 
Is there another way that I can permit acentuation?
 
Thanks, Luciana.

		
---------------------------------
 Novo Yahoo! Messenger com voz: liga??es, Yahoo! Avatars, novos emoticons e muito mais. Instale agora!
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20050929/080a0c61/attachment.html
From michael.sielemann at asdl.gatech.edu  Tue Sep 27 16:26:15 2005
From: michael.sielemann at asdl.gatech.edu (Michael Sielemann)
Date: Thu Sep 29 11:56:43 2005
Subject: [antlr-interest] Conceptual problem with look ahead
Message-ID: <20050927232616.6DB5CDCC21@www.antlr.org>


Hi everybody,

I mostly finished writing the lexer for my first grammar right now and came
across something, which points me at a conceptual misunderstanding. I read
the related FAQ entries but could not figure this out. I would be happy to
receive any input you guys might have on this.

In my lexer, I have the following rule for multi-line comments in C/C++
fashion (it's basically the rule from the C grammar at
http://www.antlr.org/grammar/cgram/grammars/StdCParser.g).


COMMENTML : "/*"
            ( { LA(2) != '/' }? '*'
              | ( '\r' ('\n')?)
              | ~( '*'| '\r' | '\n' )
            )*
            "*/"                      {$setType(Token.SKIP);}
            ;


If I set k=2 for this lexer, ANTLR tells me that the choices are ambiguous:

ANTLR Parser Generator   Version 2.7.5 (20050201)   1989-2005 jGuru.com
lexical nondeterminism upon
k==1:'*'
k==2:'/'
between alt 1 and exit branch of block

When I set k to three, everything is fine.

My understanding is that the look-ahead length for lexers exactly
corresponds to characters. Alternative one checks whether a star would be
okay by looking at the following character - is it a dash or not. The exit
branch is "*/" if I am not mistaken. As these two constructs only look at
the next two characters, I expected everything to be fine. But obviously it
isn't. Even with the "anything can follow" concept I don't really get this.
The problem might be that I am not a CS guy but come from engineering, but
anyway....


Thank you very much for your help,

Michael


PS: One short second question concerning the lexers. If I want to refer to
the single quote ' as a single character in ANTLR, is the escape 
sequence '\'' okay? I think that it is not a classical C escape sequence but
it seems to be what corresponds best. Thanks.


From parrt at cs.usfca.edu  Thu Sep 29 12:03:39 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Thu Sep 29 12:03:44 2005
Subject: [antlr-interest] wiki removed
Message-ID: <7F2F9EE3-1A21-4BD9-845F-B874A6FDBC55@cs.usfca.edu>

Hi...the wicky started causing problems; probably the emailing  
archiving feature...caused the site to run out of memory or  
something...i've turned off until I can investigate. :(  booo...

well, not that we were using it anyway ;)  seems we'd have to  
wholesale switch to get activity over there...

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com

From oliver.wraight at brooks.com  Thu Sep 29 12:07:26 2005
From: oliver.wraight at brooks.com (Wraight, Oliver)
Date: Thu Sep 29 12:07:34 2005
Subject: [antlr-interest] Problem with semanic action
Message-ID: <B0EF51D84DDEEF4D9F7D485485751F6C04BF21@mail-brooks5.brooks.com>

I'm not sure if I fully understand your problem, but at first glance I'd
guess the solution would be not to use "(PAIR basicMessage)*" in
structuredMessage, but "(PAIR structuredMessage)?" instead.

ie:
structuredMessage returns[Message *rmsg]
{
    Message *bm1 = NULL;
    Message *sm2 = NULL;
}
    : bm1=basicMessage (PAIR sm2=structuredMessage)?
        {
            rmsg = new Message;
            rmsg->op1 = bm1;
            rmsg->op2 = sm2;
        }
    ;

Hope this helps,

Oliver

-----Original Message-----
From: antlr-interest-bounces@antlr.org
[mailto:antlr-interest-bounces@antlr.org] On Behalf Of Nicola Cuomo
Sent: 27 September 2005 04:30
To: antlr-interest@antlr.org
Subject: [antlr-interest] Problem with semanic action

Hi again i've another problem :)

I've the following grammar piece (semantic action removed)

---
structuredMessage returns[Message *rmsg]
        : bm1=basicMessage (PAIR bm2=basicMessage )*
        ;

basicMessage returns[Message *rmsg]
        : VAR_IDENT (PRIME)?
        | CONST_IDENT
        | VAR_IDENT LPAREN structuredMessage RPAREN
        ;
---

Message is a tree like structure

struct Message
{
        int type;
        
        string value;
        
        Message *op1;
        Message *op2;
};

Using  semantic  action I can make and fill a Message structure in the
basicMessage role the problem is with the structuredMessage role.

In  my idea the subrole identified by bm1 should go into the op1 field
of  the  returned  Message structure and the subrole identified by bm2
should  go into the op2 field.

For  a message like (the "." is PAIR) A1.A2.A3 the structure should be
like (ASCII art incoming :)
   |
  / \
A1  / \
  A2  A3

The problem is that the role iterate the star part making difficult to
build a tree like structure.

So i was wondering how i can fill the Message structure?

The action i've written was something like

structuredMessage returns[Message *rmsg]
{
        Message *tbasicMessage = NULL;
        Message *tbasicMessages = NULL;
        Message *tmsg = NULL;
}
        : tbasicMessage=basicMessage 
                {  
                        tmsg = new Message;
                        tmsg->op1 = tbasicMessage;
                        tmsg->op2 = NULL;
                        rmsg = tmsg;
                }
                (PAIRING tbasicMessages=basicMessage
                {  
                        tmsg = new Message;
                        tmsg->op1 = tbasicMessage;
                        tmsg->op2 = tbasicMessages;
                        rmsg = tmsg;
                } )*
        ;
        
I really don't know what to do :(
        
Regards
-- 
 Nicola                          mailto:ncuomo@gmail.com


_____________________________________________________________________
This email has been scanned by the MessageLabs Email Security System.

_____________________________________________________________________
This email message, including any attachments, may contain confidential and proprietary information for the sole use of the intended recipient.  If you are not the intended recipient, you are hereby notified that any use, copying or dissemination of this message is strictly prohibited.  If you received this message in error, please notify Brooks Automation, Inc. immediately by reply email or by calling Brooks US Headquarters at +1 978-262-2400. Then delete this message from your system, without making any copy or distribution.  Thank you.
From david at crlf.net  Thu Sep 29 12:46:20 2005
From: david at crlf.net (David Maxwell)
Date: Thu Sep 29 12:44:31 2005
Subject: [antlr-interest] C++ beginner questions
Message-ID: <20050929194619.GB1216@mail>


Hi list,

I've just started using Antlr, and while I appreciate the concepts, I'm
finding it very frustrating.

Any pointers people have that would help with the following issues would
be great:

1) Is there a list of Java -> C++ equivalent methods?

i.e.
	$setType(Token.SKIP); 
	
	--> _ttype = ANTLR_USE_NAMESPACE(antlr)Token::SKIP;

Almost all of the tutorials target Java, and it's often not clear to me
how to get the same effect in C++.


2) Are there any examples targetting C++ that do NOT use the AST
funcionality?

The AST tools sound great - but right now I just want a lex/yacc
replacement with multi-token lookahead. The types of things you want to
do in the parsing stage are quite different if you're not building ASTs,
and I can't find examples to get me started. (Yes, I've looked in
examples/cpp/*)

For example, I can't find even a single instance of using a token's
text, in a C++ example. Reading the generated C++ doesn't make it any
clearer either.

I've labelled tokens in the _Paser_ and used ->getText() there, but in
the _Lexer_ it doesn't work for me. The label ends up becoming a goto
target label, and not an object with a getText() method. Even with gdb
on the generated program, I can't find any variable that holds the
token's text.


3) The documentation plays a bit fast and loose with the term 'antlr'.
i.e. "Antlr keeps track of the column position of tokens for you" -

Well, no, but the _Lexer_ antlr produces does so. Now, it's not a great
example, because we could have an argument about what column position
should mean in the context of the Parser - but regardless, it would be
nice to have a list of which Functions are applicable in which contexts.
Using getColumn() in the Parser led to some wasted time for me, before
I thought about the Parser/Lexer split in the .g file for a bit.


4) Is there any equivalent to the Lex/Yacc documentation 'How to resolve
shift/reduce conflicts' - for how to address lexical nondeterminisms in
antlr?

For example, I've noticed that rule order in the Lexer DOES matter, but
I can't find any documentation about how to order rules to get the
desired results. I've just been following 'most specific first', but
I'd appreciate a more precise answer.


I'll probably have more questions as I do more, but that's enough for
now ;-)

Thanks,

							David

From monty at codetransform.com  Thu Sep 29 12:48:41 2005
From: monty at codetransform.com (Monty Zukowski)
Date: Thu Sep 29 12:49:03 2005
Subject: [antlr-interest] wiki removed
In-Reply-To: <7F2F9EE3-1A21-4BD9-845F-B874A6FDBC55@cs.usfca.edu>
References: <7F2F9EE3-1A21-4BD9-845F-B874A6FDBC55@cs.usfca.edu>
Message-ID: <433C4519.8020609@codetransform.com>

Terence Parr wrote:
> Hi...the wicky started causing problems; probably the emailing 
> archiving feature...caused the site to run out of memory or 
> something...i've turned off until I can investigate. :(  booo...
> 
> well, not that we were using it anyway ;)  seems we'd have to  wholesale
> switch to get activity over there...

It would be fun to have a wiki up for the conference though.  Gives us
something to do when we get bored of listening to how great V3 is :)

Monty
From michael.sielemann at asdl.gatech.edu  Thu Sep 29 12:59:17 2005
From: michael.sielemann at asdl.gatech.edu (Michael Sielemann)
Date: Thu Sep 29 12:59:20 2005
Subject: [antlr-interest] Re: Conceptual problem with look ahead --- Skip
	this email
Message-ID: <20050929195918.5CC19DCC46@www.antlr.org>



Hi list,
On Tuesday I tried to sign up for the ANTLR list and asked this question.
For some reason I only got the confirmation email today however. After
replying I got accepted and my old email sent out.

Consequently I ask you to ignore it --- I somewhat figured an answer out and
finished the lexer and parser today (including the ambiguities). The ASTs
are next.

Thanks,

Michael





-----Original Message-----
From: Michael Sielemann [mailto:michael.sielemann@asdl.gatech.edu] 
Sent: Tuesday, September 27, 2005 7:26 PM
To: 'antlr-interest@antlr.org'
Subject: Conceptual problem with look ahead


Hi everybody,

I mostly finished writing the lexer for my first grammar right now and came
across something, which points me at a conceptual misunderstanding. I read
the related FAQ entries but could not figure this out. I would be happy to
receive any input you guys might have on this.

In my lexer, I have the following rule for multi-line comments in C/C++
fashion (it's basically the rule from the C grammar at
http://www.antlr.org/grammar/cgram/grammars/StdCParser.g).


COMMENTML : "/*"
            ( { LA(2) != '/' }? '*'
              | ( '\r' ('\n')?)
              | ~( '*'| '\r' | '\n' )
            )*
            "*/"                      {$setType(Token.SKIP);}
            ;


If I set k=2 for this lexer, ANTLR tells me that the choices are ambiguous:

ANTLR Parser Generator   Version 2.7.5 (20050201)   1989-2005 jGuru.com
lexical nondeterminism upon
k==1:'*'
k==2:'/'
between alt 1 and exit branch of block

When I set k to three, everything is fine.

My understanding is that the look-ahead length for lexers exactly
corresponds to characters. Alternative one checks whether a star would be
okay by looking at the following character - is it a dash or not. The exit
branch is "*/" if I am not mistaken. As these two constructs only look at
the next two characters, I expected everything to be fine. But obviously it
isn't. Even with the "anything can follow" concept I don't really get this.
The problem might be that I am not a CS guy but come from engineering, but
anyway....


Thank you very much for your help,

Michael


PS: One short second question concerning the lexers. If I want to refer to
the single quote ' as a single character in ANTLR, is the escape 
sequence '\'' okay? I think that it is not a classical C escape sequence but
it seems to be what corresponds best. Thanks.


From michael.sielemann at asdl.gatech.edu  Thu Sep 29 13:58:28 2005
From: michael.sielemann at asdl.gatech.edu (Michael Sielemann)
Date: Thu Sep 29 13:58:31 2005
Subject: [antlr-interest] Syntax error "simplemodel.mo:syntax error:
	<AST>:9:16:"
Message-ID: <20050929205829.598FCDC75F@www.antlr.org>



Hi everybody,
I am writing a parser to access some key information about models written in
this language Modelica.

I wrote the lexer and the parser so far and everything is going fine. After
bringing everything together the program doesn't throw any exceptions
however. Instead, it writes things like

    simplemodel.mo:syntax error: <AST>:9:16:

to the console. In http://www.antlr.org/doc/err.html or
http://www.jguru.com/faq/topicindex.jsp?topic=ANTLR I did not find an
answer. Google did not help either.

I am writing this for Python.

Does anyone know the reason for this? Below, I copied the console output
that leads to this.

Thanks, Michael






____



E:\antlr>antlr-2.7.5.exe modelica22parser\modelica22parser.g
ANTLR Parser Generator   Version 2.7.5 (20050201)   1989-2005 jGuru.com

E:\antlr>antlr-2.7.5.exe modelica22lexer\modelica22lexer.g
ANTLR Parser Generator   Version 2.7.5 (20050201)   1989-2005 jGuru.com

E:\antlr>d:\Python24\python.exe
ActivePython 2.4 Build 243 (ActiveState Corp.) based on
Python 2.4 (#60, Nov 30 2004, 09:34:21) [MSC v.1310 32 bit (Intel)] on win32
Type "help", "copyright", "credits" or "license" for more information.
>>> import Modelica22Lexer
>>> import Modelica22Parser
>>> L = Modelica22Lexer.Lexer("simplemodel.mo")
>>> P = Modelica22Parser.Parser(L)
>>> P.setFilename(L.getFilename())
>>> try:
...     P.stored_definition()
... except antlr.ANTLRException, ex:
...     print "*** errors while parsing ***"
...     import sys
...     sys.exit(1)
...
simplemodel.mo:syntax error: <AST>:9:16:
simplemodel.mo:syntax error: <AST>:10:16:
simplemodel.mo:syntax error: <AST>:11:15:
simplemodel.mo:syntax error: <AST>:12:16:
simplemodel.mo:syntax error: <AST>:13:16:
simplemodel.mo:syntax error: <AST>:14:15:
simplemodel.mo:syntax error: <AST>:15:16:
>>> ast = P.getAST()
>>> print "List: " + ast.toStringList()
List:  model circuit Resistor R1 R ( = 10 ) Capacitor C C ( = 0.01 )
Resistor R2 R ( = 100 ) Inductor L L ( = 0.1 ) VsourceAC AC Ground G
equation
>>>

From jimi at temporal-wave.com  Thu Sep 29 14:38:39 2005
From: jimi at temporal-wave.com (Jim Idle)
Date: Thu Sep 29 14:38:42 2005
Subject: [antlr-interest] Java code generator memory optimization
Message-ID: <B36CCC332A32904F8FA3DE134A23533615BD47@wavemachine.temporal-wave.com>



> -----Original Message-----
> > God I'm young... my first was a 640k, 16 something MHz
> > on which I learnt BASIC and MSDOS 3.3 & 5.0 more than
> > a decade back :)
> 
> That's pretty good.  Some folks "became conscious" on 128M machines.
;)
> 
> BTW, the 1.077mhz machine was the 6502 in the apple II. :)
> 

Bloody luxury! I had t'Sinclair Cambridge wi' t'Hex Pad and an 8 digit
LED display, to type in t'Z80 machine code directly mate. That's what I
had to start with! And I had to build me own power supply and lick
t'gravel on Clive Sinclair's driveway to get ROM updates. Bloody Apple
II's - bloody luxury. And you try telling that t'ut kids o' today! 
From gbr at newtechlaw.com  Thu Sep 29 15:29:11 2005
From: gbr at newtechlaw.com (Gerald B. Rosenberg)
Date: Thu Sep 29 15:27:59 2005
Subject: [antlr-interest] Java code generator memory optimization
In-Reply-To: <B36CCC332A32904F8FA3DE134A23533615BD47@wavemachine.tempora
	l-wave.com>
Message-ID: <4.3.2.7.2.20050929150023.0ae76b58@pop3.newtechlaw.com>

At 02:38 PM 9/29/2005, you wrote:

> > -----Original Message-----
> > > God I'm young... my first was a 640k, 16 something MHz
> > > on which I learnt BASIC and MSDOS 3.3 & 5.0 more than
> > > a decade back :)
> >
> > That's pretty good.  Some folks "became conscious" on 128M machines.
>;)
> >
> > BTW, the 1.077mhz machine was the 6502 in the apple II. :)
> >
>
>Bloody luxury! I had t'Sinclair Cambridge wi' t'Hex Pad and an 8 digit
>LED display, to type in t'Z80 machine code directly mate. That's what I
>had to start with! And I had to build me own power supply and lick
>t'gravel on Clive Sinclair's driveway to get ROM updates. Bloody Apple
>II's - bloody luxury. And you try telling that t'ut kids o' today!

Bull.  Yours was the luxury!  I wire-wrapped my first 8080 system with just 
4Kbytes of 750ns memory.  The 8224 crystal was not stable above 700KHz.  I 
had to build an 8207 UVEProm programmer (and power supplies) and write my 
own boot monitor just to get the thing to run!

The Cambridge was a Z80A-based system that came with a Basic 
interpreter.  Anyone who worked with the real (original) Z80 knows that it 
came with an errata sheet that was as thick as the programmer's manual.  I 
think I still have it.  Now that was a programming challenge.

Try and top that you old softy!!

;-)
----
Gerald B. Rosenberg, Esq.
NewTechLaw
285 Hamilton Avenue, Suite 520
Palo Alto, CA  94301-2576

650.325.2100  (office)  /  650.703.1724  (cell)
650.325.2107  (facsimile)

www.newtechlaw.com


CONFIDENTIALITY NOTICE:  This email message (including any attachments) is 
being sent by an attorney, is for the sole use of the intended recipient, 
and may contain confidential and privileged information.  Any unauthorized 
review, use, disclosure or distribution is prohibited.  If you are not the 
intended recipient, please contact the sender immediately by reply e-mail 
and delete all copies of this message and any attachments without retaining 
a copy. 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20050929/20f58604/attachment-0001.html
From ewbank at gmail.com  Thu Sep 29 16:26:02 2005
From: ewbank at gmail.com (Bryan Ewbank)
Date: Thu Sep 29 16:26:05 2005
Subject: [antlr-interest] Comments/newlines
In-Reply-To: <1127884238.11037.1.camel@localhost.localdomain>
References: <1127884238.11037.1.camel@localhost.localdomain>
Message-ID: <dd3a065f0509291626eabd584@mail.gmail.com>

Given your sample file, is EOL by itself an acceptable statement, or
is this an error?

One way to parse the comments is to consume from "//" up to, but not
including, the next EOL character.  Or, use the EOL token to consume a
literal EOL with an optional preceeding "//" style comment.


> x = y // some comment
> // some comment
> x = y
>
> I want to parse both obviously language statement as
>     IDENTIFIER EQ IDENTIFIER EOL
From ewbank at gmail.com  Thu Sep 29 16:39:45 2005
From: ewbank at gmail.com (Bryan Ewbank)
Date: Thu Sep 29 16:39:47 2005
Subject: [antlr-interest] C++ beginner questions
In-Reply-To: <20050929194619.GB1216@mail>
References: <20050929194619.GB1216@mail>
Message-ID: <dd3a065f0509291639cadb993@mail.gmail.com>

Hi David,

There is a small but thriving C++ contingent here :-)

On 9/29/05, David Maxwell <david@crlf.net> wrote:
> 1) Is there a list of Java -> C++ equivalent methods?

There was none I could find, but in general if you replace "." with
"->" for function calls you are dead on.  Likewise, replace "." with
"::" for data members is a pretty good guess.  For your example, I
seem to remember that $setType(Token::SKIP) works okay -- but I use a
lex-based scanner, as in one of the C++ examples (seach for
example/c++/*.l for guidance :-)

> Almost all of the tutorials target Java, and it's often not clear to me
> how to get the same effect in C++.

This has been an issue for me to; I'm sure there are some workarounds
that I've done in C++ that could be done more elegantly, but it
works...

> 2) Are there any examples targetting C++ that do NOT use the AST
> funcionality?

Not as far as I know.  You might reconsider using a tree to split
"parse" from "operate"; I've found it a very powerful model even when
replacing a yacc product.

> For example, I can't find even a single instance of using a token's
> text, in a C++ example. Reading the generated C++ doesn't make it any
> clearer either.
>
> I've labelled tokens in the _Paser_ and used ->getText() there, but in
> the _Lexer_ it doesn't work for me. The label ends up becoming a goto
> target label, and not an object with a getText() method. Even with gdb
> on the generated program, I can't find any variable that holds the
> token's text.

I think you can use "#tokenname" in the lexer, but I have to again
shrug here, as I use lex.

> 4) Is there any equivalent to the Lex/Yacc documentation 'How to resolve
> shift/reduce conflicts' - for how to address lexical nondeterminisms in
> antlr?
>
> For example, I've noticed that rule order in the Lexer DOES matter, but
> I can't find any documentation about how to order rules to get the
> desired results. I've just been following 'most specific first', but
> I'd appreciate a more precise answer.

Focusing on the "yacc" side of this, I have been very generous with
"greedy=true" in my grammar; it's not always needed - in fact, I seem
to remember it's the default behavior(?) - but it always clears up
what's going on.

The key thing to resolve conflicts is to eliminate duplicate left
prefixes from your rules.  You can't simple take a yacc grammar and
throw it at ANTLR (LALR -> LL; ugh).  Common left-prefixes will cause
you grief, especially coming from yacc.  I seem to recall being unable
to see that type of problem for several days/weeks.  I've been a happy
antlr user now for about a year, and I would prefer not to go back
(but my boss has other ideas :-).

> I'll probably have more questions as I do more, but that's enough for
> now ;-)

This is the place; welcome to our little corner of the web!
From davmac at deakin.edu.au  Thu Sep 29 16:59:35 2005
From: davmac at deakin.edu.au (Davin McCall)
Date: Thu Sep 29 16:58:32 2005
Subject: [antlr-interest] Conceptual problem with look ahead
In-Reply-To: <20050927232616.6DB5CDCC21@www.antlr.org>
References: <20050927232616.6DB5CDCC21@www.antlr.org>
Message-ID: <433C7FE7.3050105@deakin.edu.au>

Hi,

You have a semantic check - "{ LA(2) != '/' }?" - but antlr does not 
take this in to account when checking for determinism. Note that your 
"~( '*' | '\r' | '\n' )" combination allows slashes. So, there is 
non-determinism for the sequence "*/" - does it match "*" followed by 
"/" as part of the in-comment character sequence, or does it match "*/" 
(the comment end)?

I'd suggest to change to:

COMMENTML : "/*"
            ( '*' ~( '/' )
              | ( '\r' ('\n')?)
              | ~( '*'| '\r' | '\n' )
            )*
            "*/"                      {$setType(Token.SKIP);}
            ;

(Haven't tested this, but I think it should work).

Davin


Michael Sielemann wrote:
> Hi everybody,
>
> I mostly finished writing the lexer for my first grammar right now and came
> across something, which points me at a conceptual misunderstanding. I read
> the related FAQ entries but could not figure this out. I would be happy to
> receive any input you guys might have on this.
>
> In my lexer, I have the following rule for multi-line comments in C/C++
> fashion (it's basically the rule from the C grammar at
> http://www.antlr.org/grammar/cgram/grammars/StdCParser.g).
>
>
> COMMENTML : "/*"
>             ( { LA(2) != '/' }? '*'
>               | ( '\r' ('\n')?)
>               | ~( '*'| '\r' | '\n' )
>             )*
>             "*/"                      {$setType(Token.SKIP);}
>             ;
>
>
> If I set k=2 for this lexer, ANTLR tells me that the choices are ambiguous:
>
> ANTLR Parser Generator   Version 2.7.5 (20050201)   1989-2005 jGuru.com
> lexical nondeterminism upon
> k==1:'*'
> k==2:'/'
> between alt 1 and exit branch of block
>
> When I set k to three, everything is fine.
>
> My understanding is that the look-ahead length for lexers exactly
> corresponds to characters. Alternative one checks whether a star would be
> okay by looking at the following character - is it a dash or not. The exit
> branch is "*/" if I am not mistaken. As these two constructs only look at
> the next two characters, I expected everything to be fine. But obviously it
> isn't. Even with the "anything can follow" concept I don't really get this.
> The problem might be that I am not a CS guy but come from engineering, but
> anyway....
>
>
> Thank you very much for your help,
>
> Michael
>
>
> PS: One short second question concerning the lexers. If I want to refer to
> the single quote ' as a single character in ANTLR, is the escape 
> sequence '\'' okay? I think that it is not a classical C escape sequence but
> it seems to be what corresponds best. Thanks.
>
>
>   


-- 
Davin McCall, Research Programmer
Deakin University, Burwood, Australia.
Phone: 03 9251 7045 International: +61 3 9251 7045
Email: Davin.McCall@deakin.edu.au
Website: http://www.deakin.edu.au
Deakin University CRICOS Provider Code 00113B (Vic)

From jimi at temporal-wave.com  Thu Sep 29 20:06:06 2005
From: jimi at temporal-wave.com (Jim Idle)
Date: Thu Sep 29 20:06:10 2005
Subject: [antlr-interest] Java code generator memory optimization
References: <4.3.2.7.2.20050929150023.0ae76b58@pop3.newtechlaw.com>
Message-ID: <B36CCC332A32904F8FA3DE134A23533608A470@wavemachine.temporal-wave.com>

Now then now then now then! I had the pre-cursor to the Sinclair Cambridge that had a BASIC interpreter. You are thinking of much more luxurious state-of-the-art than the original, probably one of them new fangled rich man's ZX80s or ZX81s. 
 
No, no, no, no. no! No BASIC interpreter there mate... not unless you count the one I wrote in 240 bytes of pure Z80 (not A) by using all the hidden instructions for IH that they forgot to delete. No... wait I am pretty sure it was 110 bytes, AND I didn't use t'top bit. I also gave it away in hand written hex on the back of beer mats, so long as you were willing to buy me enough beers to get t'beer mats because we couldn't afford beer mats in Yorkshire... in fact we couldn't afford the beer either. Nor the shoe leather to walk tut pub. Not that you'd get there anyway mind, because there were no street lights because we couldn't afford t'electric. In fact I had to power t'machine by dangling a some copper pipe (stolen of course) out o t'window when it rained, which it always did, and anyway we didn't have any glass in, in fact we didn't have any windows... <fades into oblivion>
 
And they PAY Eric for this sort of stuff!
 
Jim

 
________________________________

From: antlr-interest-bounces@antlr.org on behalf of Gerald B. Rosenberg
Sent: Thu 9/29/2005 3:29 PM
To: antlr-interest@antlr.org
Subject: RE: [antlr-interest] Java code generator memory optimization


At 02:38 PM 9/29/2005, you wrote:



	> -----Original Message-----
	> > God I'm young... my first was a 640k, 16 something MHz
	> > on which I learnt BASIC and MSDOS 3.3 & 5.0 more than
	> > a decade back :)
	> 
	> That's pretty good.  Some folks "became conscious" on 128M machines.
	;)
	> 
	> BTW, the 1.077mhz machine was the 6502 in the apple II. :)
	> 
	
	Bloody luxury! I had t'Sinclair Cambridge wi' t'Hex Pad and an 8 digit
	LED display, to type in t'Z80 machine code directly mate. That's what I
	had to start with! And I had to build me own power supply and lick
	t'gravel on Clive Sinclair's driveway to get ROM updates. Bloody Apple
	II's - bloody luxury. And you try telling that t'ut kids o' today! 


Bull.  Yours was the luxury!  I wire-wrapped my first 8080 system with just 4Kbytes of 750ns memory.  The 8224 crystal was not stable above 700KHz.  I had to build an 8207 UVEProm programmer (and power supplies) and write my own boot monitor just to get the thing to run!

The Cambridge was a Z80A-based system that came with a Basic interpreter.  Anyone who worked with the real (original) Z80 knows that it came with an errata sheet that was as thick as the programmer's manual.  I think I still have it.  Now that was a programming challenge.

Try and top that you old softy!!

;-)
----
Gerald B. Rosenberg, Esq.
NewTechLaw
285 Hamilton Avenue, Suite 520
Palo Alto, CA  94301-2576

650.325.2100  (office)  /  650.703.1724  (cell)
650.325.2107  (facsimile)

www.newtechlaw.com <http://www.newtechlaw.com/> 


CONFIDENTIALITY NOTICE:  This email message (including any attachments) is being sent by an attorney, is for the sole use of the intended recipient, and may contain confidential and privileged information.  Any unauthorized review, use, disclosure or distribution is prohibited.  If you are not the intended recipient, please contact the sender immediately by reply e-mail and delete all copies of this message and any attachments without retaining a copy. 
From jimi at temporal-wave.com  Thu Sep 29 20:07:18 2005
From: jimi at temporal-wave.com (Jim Idle)
Date: Thu Sep 29 20:08:28 2005
Subject: [antlr-interest] ANTLR 3: Ant Build script
References: <9da4f45205092804223bdb1c6d@mail.gmail.com>
Message-ID: <B36CCC332A32904F8FA3DE134A23533608A471@wavemachine.temporal-wave.com>

I have a netbeans 4.1 project definition if anyone is interested too. Just ask and I will ignore your request for a couple of weeks, then recycle it as fire lighters and send you it.

________________________________

From: antlr-interest-bounces@antlr.org on behalf of Oliver Zeigermann
Sent: Wed 9/28/2005 4:22 AM
To: ANTLR Interest
Subject: [antlr-interest] ANTLR 3: Ant Build script



Folks,

for anyone interesting in building ANTLR 3 from source, I have
attached a very simple ant build script. You will have to adjust
build.properties to at least point to your stringtemplate.jar which
should be at least version 2.2. You will also need ANTLR 2.7.5 either
in your classpath or in the lib directory of ant.

Cheers

Oliver


From sohail at taggedtype.net  Thu Sep 29 22:48:28 2005
From: sohail at taggedtype.net (Sohail Somani)
Date: Thu Sep 29 22:47:59 2005
Subject: [antlr-interest] Comments/newlines
In-Reply-To: <dd3a065f0509291626eabd584@mail.gmail.com>
References: <1127884238.11037.1.camel@localhost.localdomain>
	<dd3a065f0509291626eabd584@mail.gmail.com>
Message-ID: <1128059308.8668.1.camel@localhost.localdomain>

On Thu, 2005-29-09 at 19:26 -0400, Bryan Ewbank wrote:
> Given your sample file, is EOL by itself an acceptable statement, or
> is this an error?
> 
> One way to parse the comments is to consume from "//" up to, but not
> including, the next EOL character.  Or, use the EOL token to consume a
> literal EOL with an optional preceeding "//" style comment.
> 

Hi Bryan,

The grammar does allow for statements of (EOL)*. What I'm doing is
setting the type of SL_COMMENT to EOL.

I dont particularly like this method. Can you give me an example of a
single line comment lexer rule that will consume all but EOL?

Thanks

> 
> > x = y // some comment
> > // some comment
> > x = y
> >
> > I want to parse both obviously language statement as
> >     IDENTIFIER EQ IDENTIFIER EOL

From gkarandeep at gmail.com  Thu Sep 29 23:15:34 2005
From: gkarandeep at gmail.com (karan g)
Date: Thu Sep 29 23:15:37 2005
Subject: [antlr-interest] handling quoted string
Message-ID: <de7bd35f0509292315o11ba72efg4912084710c82a5d@mail.gmail.com>

Hello,
I have a problem regarding handling of quoted strings. I shall elaborate my
problem and the requirements associated with it.

I have a key-value pair 'param=value'
value can be a..z|0..9|' '|'\t'|'.'|'$'|'@'|'#'|'\'|'/'

value can be enclosed in double quotes though it is not compulsary.
ie. valid scenarios for value are "abc" or "ab c" or abc etc..
invalid scenarios here could be "abc or "ab"c etc...
In other words, if the quote appears in the input, then it should be at the
beginning and at the end.

For this a straight forward lexer rule can be written. However, my
requirement here is that the value should be stored and I should be able to
throw an userdefined exception with the input given.

I have attempted a lexer rule which throws a Token stream exception when the
quoted string encounters an invalid scenario . Here I would like a way that
I catch that exception and throw my user defined exception with the exact
input given. I was not able to store the exact input before I sent the value
to lexer rule.

Please suggest me all the possible solutions.

Thanks,
karan
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20050930/cdc81262/attachment.html
From gt54-antlr at cyconix.com  Fri Sep 30 01:33:26 2005
From: gt54-antlr at cyconix.com (Paul Johnson)
Date: Fri Sep 30 01:33:34 2005
Subject: [antlr-interest] C++ beginner questions
In-Reply-To: <20050929194619.GB1216@mail>
References: <20050929194619.GB1216@mail>
Message-ID: <433CF856.5020801@cyconix.com>

David Maxwell wrote:

> The AST tools sound great - but right now I just want a lex/yacc
> replacement with multi-token lookahead. The types of things you want to
> do in the parsing stage are quite different if you're not building ASTs,
> and I can't find examples to get me started. (Yes, I've looked in
> examples/cpp/*)

There's a massive learning curve, especially for C++. If you really only 
want multi-token lookahead, and you've already got yacc code, and you 
want minimal changes...

then try bison. :O

From heuer at semagia.com  Fri Sep 30 05:12:16 2005
From: heuer at semagia.com (Lars Heuer)
Date: Fri Sep 30 05:06:45 2005
Subject: [antlr-interest] Comments/newlines
In-Reply-To: <1127884753.11037.3.camel@localhost.localdomain>
References: <1127884753.11037.3.camel@localhost.localdomain>
Message-ID: <1689405756.20050930141216@semagia.com>

Hi Sohail,

> How would you define a lexer to tokenize the following so that the
> grammar rules use EOL?

> x = y // some comment
> // some comment
> x = y

Maybe this works:

      COMMENT : "//" (~('\r'|'\n'))+ {$setType(Token.SKIP);}
      ;

      EOL : ('\r')? '\n' {newline();}
      ;

Best regards,
Lars
-- 
http://semagia.com

From Bharath.Sundararaman at starthis.com  Fri Sep 30 07:54:02 2005
From: Bharath.Sundararaman at starthis.com (Bharath Sundararaman)
Date: Fri Sep 30 07:54:07 2005
Subject: [antlr-interest] Overriding ANTLR exceptions
Message-ID: <510542BD19D5A3418E7B1E265982FA970186B8@mail.starthis.com>

Greets, everybody.

 

For custom error reporting in ANTLR, when I turn off default error
handling and attach my custom exception to a rule, should my custom
exception extend ANTLRException? It appears to me that I don't need to.
Is there any examples available for custom error reporting/handling?

 

Thanks!

 

Bharath.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20050930/1ee6984c/attachment.html
From canfield at computer.org  Fri Sep 30 08:53:29 2005
From: canfield at computer.org (Bill Canfield)
Date: Fri Sep 30 08:43:11 2005
Subject: [antlr-interest] Re: C++ beginner questions
In-Reply-To: <20050930120648.90006DCCE5@www.antlr.org>
References: <20050930120648.90006DCCE5@www.antlr.org>
Message-ID: <433D5F79.4070908@computer.org>

> There is a small but thriving C++ contingent here :-)
> 

OK, I'll stand up and be counted for that.  I can answer a couple of 
David's questions.

>>Almost all of the tutorials target Java, and it's often not clear to me
>>how to get the same effect in C++.

As Bryan noted, most things work almost the same.  To get the text of a 
token, use $getText within the action.  ANTLR will replace it with the 
appropriate code when it generates C++.

I'm doing a parser that builds its own structures instead of using ANTLR 
ASTs.  Here's a snippet (from the lexer) that shows some of the stuff in 
action:

> IDENTIFIER
>   :
>     (SimpleID
>     | EscapedID)
>     { if ($getText.find("PATHPULSE$") == 0) {
>         $setType(PATHPULSE);
>       }
>       IdToken *id = new IdToken(_ttype, $getText, getInputFileName(),
>         getLine(), getColumn());
>       $setToken(id);
>     }
>   ;

IdToken is declared like "class IdToken : public antlr::CommonToken".

>>4) Is there any equivalent to the Lex/Yacc documentation 'How to resolve
>>shift/reduce conflicts' - for how to address lexical nondeterminisms in
>>antlr?
>>

First try "greedy=true", like Bryan said.  Another possibility is to 
explicitly code the lookahead yourself by using a semantic predicate. 
Here's an example:

>   |
>     { (LA(1) == IDENTIFIER && LA(2) == COLON && LA(3) == LITERAL_begin)
>       || LA(1) == LITERAL_begin }?
>     stmt = generate_module_block

Syntactic predicates can also remove ambiguity, but *avoid* them as much 
as possible.  They're a real performance dog, they rely on throwing 
exceptions.

And of course, you can factor the rules to truly eliminate the 
nondeterminism.  It's more art than science.

Bill
From madcapmaggie at yahoo.com  Fri Sep 30 09:08:19 2005
From: madcapmaggie at yahoo.com (Peggy Fieland)
Date: Fri Sep 30 09:08:23 2005
Subject: [antlr-interest] C++ beginner questions
In-Reply-To: <dd3a065f0509291639cadb993@mail.gmail.com>
Message-ID: <20050930160819.36078.qmail@web30210.mail.mud.yahoo.com>

C++ Lexer its $getText. For example:

IDENT: (ID_START_LETTER) (ID_LETTER)*
{
 std::string s = $getText;
       $setText( LowerCase(s) ); }
resolving ambiguities:  syntactic or semantic
predicates

in lexer:

IDENT:
  (BOOLEAN!) => BOOLEAN  { $setType(BOOLEAN); }
...


ML_COMMENT
	:	'/' '*'
	
options {
				generateAmbigWarnings=false;
			}
		:
			{ LA(2)!='/' }? '*'
		|	'\r' '\n'		{newline();}
		|	'\r'			{newline();}
		|	'\n'			{newline();}
		|	~('*'|'\n'|'\r')
		)*
		'*' '/'
		{ _ttype = ANTLR_USE_NAMESPACE(antlr)Token::SKIP; }
	

...

in parser similarly.  More gory details upon request.

Peggy



From teddemc at yahoo.com  Fri Sep 30 10:26:49 2005
From: teddemc at yahoo.com (Matthew Tedder)
Date: Fri Sep 30 10:26:51 2005
Subject: [antlr-interest] C++ beginner questions
In-Reply-To: <20050930160819.36078.qmail@web30210.mail.mud.yahoo.com>
Message-ID: <20050930172649.58246.qmail@web52915.mail.yahoo.com>



These are owesome.. I am printing them out for my own
exploits, as soon as I have time again.

Once I finally got a basic java based antlr thingy
running, I started looking at c++ and I am still
trembling a little at the thought.  But I know I'll
have to learn to make any practical use of antlr.

It sure would be nice if somebody could write-up a
step-by-step tutorial for antlr in C++ on a simple
language like say:

---
stmt:
declare { IDENT } as { number | string }
IDENT = input
output IDENT
IDENT = string_expression
IDENT = number_expression
If condition Then stmt [ Els stmt ]

string_expression:
STR_LIT | string_expression + string_expression

number_expression:
NUM_LIT | number_expression + number_expression
---

I also keep scratching my head thinking, "What's the
point of compilers implemented in Java?".  It's neat
but pretty much in the same way that the ASCII client
for Doom was neat. I guess they must be using it for
business rules engines where the data processing
workloads are light.. That's the only thing I can
think  of..

Matthew

--- Peggy Fieland <madcapmaggie@yahoo.com> wrote:

> C++ Lexer its $getText. For example:
> 
> IDENT: (ID_START_LETTER) (ID_LETTER)*
> {
>  std::string s = $getText;
>        $setText( LowerCase(s) ); }
> resolving ambiguities:  syntactic or semantic
> predicates
> 
> in lexer:
> 
> IDENT:
>   (BOOLEAN!) => BOOLEAN  { $setType(BOOLEAN); }
> ...
> 
> 
> ML_COMMENT
> 	:	'/' '*'
> 	
> options {
> 				generateAmbigWarnings=false;
> 			}
> 		:
> 			{ LA(2)!='/' }? '*'
> 		|	'\r' '\n'		{newline();}
> 		|	'\r'			{newline();}
> 		|	'\n'			{newline();}
> 		|	~('*'|'\n'|'\r')
> 		)*
> 		'*' '/'
> 		{ _ttype = ANTLR_USE_NAMESPACE(antlr)Token::SKIP;
> }
> 	
> 
> ...
> 
> in parser similarly.  More gory details upon
> request.
> 
> Peggy
> 
> 
> 
> 



		
__________________________________ 
Yahoo! Mail - PC Magazine Editors' Choice 2005 
http://mail.yahoo.com
From ncuomo at gmail.com  Fri Sep 30 10:38:27 2005
From: ncuomo at gmail.com (Nicola Cuomo)
Date: Fri Sep 30 10:45:13 2005
Subject: [antlr-interest] C++ beginner questions
In-Reply-To: <20050930160819.36078.qmail@web30210.mail.mud.yahoo.com>
References: <dd3a065f0509291639cadb993@mail.gmail.com>
	<20050930160819.36078.qmail@web30210.mail.mud.yahoo.com>
Message-ID: <1971701424.20050930193827@gmail.com>

Hi,  i'm  also  using  C++  with  antrl  and some examples can surelly
clarify it's use

Friday, September 30, 2005, 6:08:19 PM, Peggy Fieland wrote:
> C++ Lexer its $getText. For example:

> IDENT: (ID_START_LETTER) (ID_LETTER)*
> {
>  std::string s = $getText;
>        $setText( LowerCase(s) ); }
> resolving ambiguities:  syntactic or semantic
> predicates

It's possible to do that also in the parser??

---
spec
        : zum (zum)* { std::cout << $getText << std::endl; }
        ;

zum
        : UNDERLINE CONST_IDENT 
        ;
---

Compiling this give me the error

underline.g: In member function `void TestParser::spec()':
underline.g:20: error: `text' undeclared (first use this function)
underline.g:20: error: (Each undeclared identifier is reported only once for
   each function it appears in.)
underline.g:20: error: `_begin' undeclared (first use this function)

As  far  as  construction own type during parsing i'm getting on using
returns/passing role parameter something like that:

variableListInit returns [list<VariableInit> rinitVariable]
{ 
        VariableInit tvariableInit;
        VariableInit tvariableInits;
}
  : tvariableInit=variableInit { rinitVariable.push_back( tvariableInit ); }
        (COMMA tvariableInits=variableInit { rinitVariable.push_back( tvariableInits ); } )*
  ;

variableInit returns [VariableInit rvariableInit]
{
        string texpression1;
        string texpression2;
        
}
        : texpression1=expression EQUAL texpression2=expression
        { rvariableInit.name = texpression1;  rvariableInit.value = texpression2;} 
        ;

and it seem to work.
-- 
 Nicola                            mailto:ncuomo@gmail.com

From madcapmaggie at yahoo.com  Fri Sep 30 11:50:20 2005
From: madcapmaggie at yahoo.com (Peggy Fieland)
Date: Fri Sep 30 11:50:22 2005
Subject: [antlr-interest] Acentuation in grammar
In-Reply-To: <20050929142651.24653.qmail@web33302.mail.mud.yahoo.com>
Message-ID: <20050930185020.9418.qmail@web30215.mail.mud.yahoo.com>

enter them as 
'\u0xe1' | '\u0xe9' ...



--- Luciana Nunes Leal <lucianaleal2002@yahoo.com.br>
wrote:

> Hi,
>  
> My grammar can contain characters like ?, ?, ?, ?,
> ?. 
>  
> 
> When my grammar is like below and I run antlr.Tool,
> I see the error below.
> 
>  
> 
> grammar:
> 
> CHARACTER : ('a'..'z'| OxE1 | OxE9 | OxED | OxF3 |
> OxFA )+ ;
> 
>  
> error:
> ANTLR Parser Generator   Version 2.7.5 (20050128)  
> 1989-2005 jGuru.com
> error: Lexer rule OxE1 is not defined
> error: Lexer rule OxE9 is not defined
> error: Lexer rule OxED is not defined
> error: Lexer rule OxF3 is not defined
> error: Lexer rule OxFA is not defined
> ..\src\lnc.g:99:36: no definition of rule mOxE1
> ..\src\lnc.g:99:43: no definition of rule mOxE9
> ..\src\lnc.g:99:50: no definition of rule mOxED
> ..\src\lnc.g:99:57: no definition of rule mOxF3
> ..\src\lnc.g:99:64: no definition of rule mOxFA
> ..\src\lnc.g:99:36: no definition of rule mOxE1
> ..\src\lnc.g:99:43: no definition of rule mOxE9
> ..\src\lnc.g:99:50: no definition of rule mOxED
> ..\src\lnc.g:99:57: no definition of rule mOxF3
> ..\src\lnc.g:99:64: no definition of rule mOxFA
> ..\src\lnc.g:99:36: warning:Alternate omitted due to
> empty prediction set
> ..\src\lnc.g:99:43: warning:Alternate omitted due to
> empty prediction set
> ..\src\lnc.g:99:50: warning:Alternate omitted due to
> empty prediction set
> ..\src\lnc.g:99:57: warning:Alternate omitted due to
> empty prediction set
> ..\src\lnc.g:99:64: warning:Alternate omitted due to
> empty prediction set
> Exiting due to errors.
>  
> Is there another way that I can permit acentuation?
>  
> Thanks, Luciana.
> 
> 		
> ---------------------------------
>  Novo Yahoo! Messenger com voz: liga??es, Yahoo!
> Avatars, novos emoticons e muito mais. Instale
agora!

From dzubi at users.sourceforge.net  Fri Sep 30 14:21:09 2005
From: dzubi at users.sourceforge.net (Daniel Zuberbuehler)
Date: Fri Sep 30 14:21:07 2005
Subject: [antlr-interest] How to read line/col from testLiteralsTable() ?
Message-ID: <200509302321.10274.dzubi@users.sourceforge.net>

Hi

I want to call a method every time the lexer matches a token in the literal 
table. So I override the testLiteralsTable() method. I first call 
super.testLiteralsTable() and check, if it was a match. If so, I call my 
method.
But for that method call, I need the line and col value of the keyword. 
Unfourtunately I see in the source of the generated lexer that makeToken() is 
called after testLiteralsTable(), so I can't query the token for those 
values. I also can't read the tokenStartColumn/tokenStartLine fields of the 
inputstate, as those are protected, and the CharScanner offers no methods to 
access those fields.
Is there any way to get those values? Or do you see a better approach?

Thanks and cheers,
Daniel Zuberb?hler
From cabird at gmail.com  Fri Sep 30 16:57:50 2005
From: cabird at gmail.com (Christian Bird)
Date: Fri Sep 30 16:57:53 2005
Subject: [antlr-interest] bad generated code?
Message-ID: <e1d90f48050930165719c6bf25@mail.gmail.com>

Hi all,
I'm somewhat new to antlr, but I think I've run into a problem that
could be a bug.  If it's not, could someone help me determine what is
wrong?  I'm writing an antlr treeparser to traverse an AST created by
a parser.  I've tried to minimalize the treeparser grammar as much as
possible while still having the generated code exhibit the "bug" .

 zimport :
	#("import"
		(name ARROW complexNameList SEMI |
		"all" identifier SEMI) )
	;

complexNameList :complexName (COMMA complexName)*
	;

complexName :identifier (DOT identifier)+
	;

name :identifier
	| complexName
	;

identifier :ID
	;

The parser will never successfully take the "identifier" branch
through the "name" rule.  Instead it says "unexpected AST node: foo"
where foo is parsed by the lexer as an ID.  I looked at the java code
for name and it looks like this:

	public final void name(AST _t) throws RecognitionException {
		
		traceIn("name",_t);
		try { // debugging
			AST name_AST_in = (_t == ASTNULL) ? null : (AST)_t;
			
			try {      // for error handling
				if (_t==null) _t=ASTNULL;
				if ((_t.getType()==ID) && (_t.getType()==ARROW)) {
					identifier(_t);
					_t = _retTree;
				}
				else if ((_t.getType()==ID) && (_t.getType()==DOT)) {
					complexName(_t);
					_t = _retTree;
				}
				else {
					throw new NoViableAltException(_t);
				}
				
			}
			catch (RecognitionException ex) {
				reportError(ex);
				if (_t!=null) {_t = _t.getNextSibling();}
			}
			_retTree = _t;
		} finally { // debugging
			traceOut("name",_t);
		}
	}

This seems wrong.  I'm looking at the if branch for calling the
identifier rule and it looks like:

if ((_t.getType()==ID) && (_t.getType()==ARROW)) {
    identifier(_t);
    _t = _retTree;


How can the test in the if ever evaluate to true?  I see that ARROW is
in the follow-set for identifier so it seems to me that the code
should test the type of _t's SIBLING against ARROW, but not _t itself.
 Anyone every run into something like this?  Does it seem like a bug? 
Can anyone suggest a workaround?  Thanks!

I'm using antlr 2.7.5 and java 1.5.  I can attach all of the code if
needed, but this is a treeparser that extends another treeparser that
parses a tree created by a parser that gets it's tokens from a lexer. 
That's four different (and not short) files.  I appreciate any help!

-- Chris

--
Christian Bird
From monty at codetransform.com  Fri Sep 30 17:40:35 2005
From: monty at codetransform.com (Monty Zukowski)
Date: Fri Sep 30 17:40:21 2005
Subject: [antlr-interest] bad generated code?
In-Reply-To: <e1d90f48050930165719c6bf25@mail.gmail.com>
References: <e1d90f48050930165719c6bf25@mail.gmail.com>
Message-ID: <B01ACA7D-C3D9-4723-AC24-4BF009EDA53E@codetransform.com>


On Sep 30, 2005, at 4:57 PM, Christian Bird wrote:
>
>  zimport :
>     #("import"
>         (name ARROW complexNameList SEMI |
>         "all" identifier SEMI) )
>     ;

It does seem like a code gen bug.  I would recommend breaking this up  
into another rule if you can:

zimport: #("import" importSuffix)
importSuffix: name ARROW complexNameList SEMI
                        | "all" identifier SEMI
                        ;

See if that still triggers the problem.

Monty
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20050930/6faaa107/attachment.html
From cabird at gmail.com  Fri Sep 30 17:48:23 2005
From: cabird at gmail.com (Christian Bird)
Date: Fri Sep 30 17:48:26 2005
Subject: [antlr-interest] bad generated code?
In-Reply-To: <B01ACA7D-C3D9-4723-AC24-4BF009EDA53E@codetransform.com>
References: <e1d90f48050930165719c6bf25@mail.gmail.com>
	<B01ACA7D-C3D9-4723-AC24-4BF009EDA53E@codetransform.com>
Message-ID: <e1d90f4805093017483f7f93e5@mail.gmail.com>

Good suggestion, but unfortunately the code generated for name is
still the same.  I don't understand antlr could ever generate code
that looks like:

if ((_t.getType()==A) && (_t.getType()==B)) {}

When A is not the same as B.  I'm guessing, however, that a treeparser
generator is more complicated to write and probably not as often
used/tested by antlr users as a normal parser generator (most people
I've talked to here at UC Davis only use it for parsers and lexers,
not AST traversals).

Any other ideas?  I appreciate your taking a look at it.

-- Chris

On 9/30/05, Monty Zukowski <monty@codetransform.com> wrote:
>
>
> On Sep 30, 2005, at 4:57 PM, Christian Bird wrote:
>
>  zimport :
>     #("import"
>         (name ARROW complexNameList SEMI |
>         "all" identifier SEMI) )
>     ;
> It does seem like a code gen bug.  I would recommend breaking this up into
> another rule if you can:
>
> zimport: #("import" importSuffix)
> importSuffix: name ARROW complexNameList SEMI
>                        | "all" identifier SEMI
>                        ;
>
> See if that still triggers the problem.
>
> Monty


--
Christian Bird
cabird@gmail.com
From monty at codetransform.com  Fri Sep 30 17:57:16 2005
From: monty at codetransform.com (Monty Zukowski)
Date: Fri Sep 30 17:57:01 2005
Subject: [antlr-interest] bad generated code?
In-Reply-To: <e1d90f4805093017483f7f93e5@mail.gmail.com>
References: <e1d90f48050930165719c6bf25@mail.gmail.com>
	<B01ACA7D-C3D9-4723-AC24-4BF009EDA53E@codetransform.com>
	<e1d90f4805093017483f7f93e5@mail.gmail.com>
Message-ID: <E1B7100A-9005-4D81-B310-A354D1FFE77C@codetransform.com>

I dunno.  Try putting parenthesis around the two alternatives?

Monty

On Sep 30, 2005, at 5:48 PM, Christian Bird wrote:

> Good suggestion, but unfortunately the code generated for name is
> still the same.  I don't understand antlr could ever generate code
> that looks like:
>
> if ((_t.getType()==A) && (_t.getType()==B)) {}
>
> When A is not the same as B.  I'm guessing, however, that a treeparser
> generator is more complicated to write and probably not as often
> used/tested by antlr users as a normal parser generator (most people
> I've talked to here at UC Davis only use it for parsers and lexers,
> not AST traversals).
>
> Any other ideas?  I appreciate your taking a look at it.
>
> -- Chris
>
> On 9/30/05, Monty Zukowski <monty@codetransform.com> wrote:
>
>>
>>
>> On Sep 30, 2005, at 4:57 PM, Christian Bird wrote:
>>
>>  zimport :
>>     #("import"
>>         (name ARROW complexNameList SEMI |
>>         "all" identifier SEMI) )
>>     ;
>> It does seem like a code gen bug.  I would recommend breaking this  
>> up into
>> another rule if you can:
>>
>> zimport: #("import" importSuffix)
>> importSuffix: name ARROW complexNameList SEMI
>>                        | "all" identifier SEMI
>>                        ;
>>
>> See if that still triggers the problem.
>>
>> Monty
>>
>
>
> --
> Christian Bird
> cabird@gmail.com
>
>
>

From cabird at gmail.com  Fri Sep 30 18:30:05 2005
From: cabird at gmail.com (Christian Bird)
Date: Fri Sep 30 18:30:08 2005
Subject: [antlr-interest] bad generated code?
In-Reply-To: <E1B7100A-9005-4D81-B310-A354D1FFE77C@codetransform.com>
References: <e1d90f48050930165719c6bf25@mail.gmail.com>
	<B01ACA7D-C3D9-4723-AC24-4BF009EDA53E@codetransform.com>
	<e1d90f4805093017483f7f93e5@mail.gmail.com>
	<E1B7100A-9005-4D81-B310-A354D1FFE77C@codetransform.com>
Message-ID: <e1d90f48050930183068253af2@mail.gmail.com>

That didn't seem to work either.  I tried using a syntactic predicate:

name :
	(ID DOT) => complexName
	| (ID ~DOT) => identifier
	;

and adding a rule that changes the followset of name:

aname :
	name SEMI;

But the code still has issues:

boolean synPredMatched98 = false;
if (((_t.getType()==ID) && (_t.getType()==SEMI||_t.getType()==ARROW))) {
	AST __t98 = _t;
	synPredMatched98 = true;
	inputState.guessing++;
	try {
		{
		AST tmp63_AST_in = (AST)_t;
		match(_t,ID);
		_t = _t.getNextSibling();
		AST tmp64_AST_in = (AST)_t;
		matchNot(_t,DOT);
		_t = _t.getNextSibling();
		}
	}
	catch (RecognitionException pe) {
		synPredMatched98 = false;
	}
	_t = __t98;
	inputState.guessing--;
}
if ( synPredMatched98 ) {
	identifier(_t);
	_t = _retTree;
}
else {
	throw new NoViableAltException(_t);
}


Oh well...

-- Chris

On 9/30/05, Monty Zukowski <monty@codetransform.com> wrote:
> I dunno.  Try putting parenthesis around the two alternatives?
>
> Monty
>
> On Sep 30, 2005, at 5:48 PM, Christian Bird wrote:
>
> > Good suggestion, but unfortunately the code generated for name is
> > still the same.  I don't understand antlr could ever generate code
> > that looks like:
> >
> > if ((_t.getType()==A) && (_t.getType()==B)) {}
> >
> > When A is not the same as B.  I'm guessing, however, that a treeparser
> > generator is more complicated to write and probably not as often
> > used/tested by antlr users as a normal parser generator (most people
> > I've talked to here at UC Davis only use it for parsers and lexers,
> > not AST traversals).
> >
> > Any other ideas?  I appreciate your taking a look at it.
> >
> > -- Chris
> >
> > On 9/30/05, Monty Zukowski <monty@codetransform.com> wrote:
> >
> >>
> >>
> >> On Sep 30, 2005, at 4:57 PM, Christian Bird wrote:
> >>
> >>  zimport :
> >>     #("import"
> >>         (name ARROW complexNameList SEMI |
> >>         "all" identifier SEMI) )
> >>     ;
> >> It does seem like a code gen bug.  I would recommend breaking this
> >> up into
> >> another rule if you can:
> >>
> >> zimport: #("import" importSuffix)
> >> importSuffix: name ARROW complexNameList SEMI
> >>                        | "all" identifier SEMI
> >>                        ;
> >>
> >> See if that still triggers the problem.
> >>
> >> Monty
> >>
> >
> >
> > --
> > Christian Bird
> > cabird@gmail.com
> >
> >
> >
>
>


--
Christian Bird
cabird@gmail.com
From cabird at gmail.com  Fri Sep 30 18:59:30 2005
From: cabird at gmail.com (Christian Bird)
Date: Fri Sep 30 18:59:33 2005
Subject: [antlr-interest] bad generated code?
In-Reply-To: <e1d90f48050930183068253af2@mail.gmail.com>
References: <e1d90f48050930165719c6bf25@mail.gmail.com>
	<B01ACA7D-C3D9-4723-AC24-4BF009EDA53E@codetransform.com>
	<e1d90f4805093017483f7f93e5@mail.gmail.com>
	<E1B7100A-9005-4D81-B310-A354D1FFE77C@codetransform.com>
	<e1d90f48050930183068253af2@mail.gmail.com>
Message-ID: <e1d90f48050930185939389f0a@mail.gmail.com>

In case anyone cares, I tracked down the problem in the source.  Here
is the lookahead code generator from JavaCodeGenerator.java:

    private String lookaheadString(int k) {
        if (grammar instanceof TreeWalkerGrammar) {
            return "_t.getType()";
        }
        return "LA(" + k + ")";
    }

Note that if it's a tree walker, k isn't examined at all. My solution
(though I'm not sure that it's always NullPointerException safe) is
this:

    private String lookaheadString(int k) {
        if (grammar instanceof TreeWalkerGrammar) {
            System.out.println("k is " + Integer.toString(k) );
            String retStr = "_t";
            while (k > 1) {
                retStr += ".getNextSibling()";
                k--;
            }
            retStr += ".getType()";
            return retStr;
        }
        return "LA(" + k + ")";
    }

A quick recompile and that seems to do the trick.  It's possible that
the check for getNextSibling could run off the end of the list and
generate a NullPointerException, but in my grammar I know that the
places where lookahead two is required, there's gauranteed to be a
next sibling.

Terrence,
Any chance that this or something similar and safer (I'm not too
familiar with the codebase) could make it into 2.7.6?  I know that
it's probably not often that a tree parser needs k > 1, but (at least
in my case) it can occur.  Thanks.

-- Chris

On 9/30/05, Christian Bird <cabird@gmail.com> wrote:
> That didn't seem to work either.  I tried using a syntactic predicate:
>
> name :
>         (ID DOT) => complexName
>         | (ID ~DOT) => identifier
>         ;
>
> and adding a rule that changes the followset of name:
>
> aname :
>         name SEMI;
>
> But the code still has issues:
>
> boolean synPredMatched98 = false;
> if (((_t.getType()==ID) && (_t.getType()==SEMI||_t.getType()==ARROW))) {
>         AST __t98 = _t;
>         synPredMatched98 = true;
>         inputState.guessing++;
>         try {
>                 {
>                 AST tmp63_AST_in = (AST)_t;
>                 match(_t,ID);
>                 _t = _t.getNextSibling();
>                 AST tmp64_AST_in = (AST)_t;
>                 matchNot(_t,DOT);
>                 _t = _t.getNextSibling();
>                 }
>         }
>         catch (RecognitionException pe) {
>                 synPredMatched98 = false;
>         }
>         _t = __t98;
>         inputState.guessing--;
> }
> if ( synPredMatched98 ) {
>         identifier(_t);
>         _t = _retTree;
> }
> else {
>         throw new NoViableAltException(_t);
> }
>
>
> Oh well...
>
> -- Chris
>
> On 9/30/05, Monty Zukowski <monty@codetransform.com> wrote:
> > I dunno.  Try putting parenthesis around the two alternatives?
> >
> > Monty
> >
> > On Sep 30, 2005, at 5:48 PM, Christian Bird wrote:
> >
> > > Good suggestion, but unfortunately the code generated for name is
> > > still the same.  I don't understand antlr could ever generate code
> > > that looks like:
> > >
> > > if ((_t.getType()==A) && (_t.getType()==B)) {}
> > >
> > > When A is not the same as B.  I'm guessing, however, that a treeparser
> > > generator is more complicated to write and probably not as often
> > > used/tested by antlr users as a normal parser generator (most people
> > > I've talked to here at UC Davis only use it for parsers and lexers,
> > > not AST traversals).
> > >
> > > Any other ideas?  I appreciate your taking a look at it.
> > >
> > > -- Chris
> > >
> > > On 9/30/05, Monty Zukowski <monty@codetransform.com> wrote:
> > >
> > >>
> > >>
> > >> On Sep 30, 2005, at 4:57 PM, Christian Bird wrote:
> > >>
> > >>  zimport :
> > >>     #("import"
> > >>         (name ARROW complexNameList SEMI |
> > >>         "all" identifier SEMI) )
> > >>     ;
> > >> It does seem like a code gen bug.  I would recommend breaking this
> > >> up into
> > >> another rule if you can:
> > >>
> > >> zimport: #("import" importSuffix)
> > >> importSuffix: name ARROW complexNameList SEMI
> > >>                        | "all" identifier SEMI
> > >>                        ;
> > >>
> > >> See if that still triggers the problem.
> > >>
> > >> Monty
> > >>
> > >
> > >
> > > --
> > > Christian Bird
> > > cabird@gmail.com
> > >
> > >
> > >
> >
> >
>
>
> --
> Christian Bird
> cabird@gmail.com
>


--
Christian Bird
cabird@gmail.com
From monty at codetransform.com  Fri Sep 30 19:26:53 2005
From: monty at codetransform.com (Monty Zukowski)
Date: Fri Sep 30 19:27:06 2005
Subject: [antlr-interest] bad generated code?
In-Reply-To: <e1d90f48050930185939389f0a@mail.gmail.com>
References: <e1d90f48050930165719c6bf25@mail.gmail.com>
	<B01ACA7D-C3D9-4723-AC24-4BF009EDA53E@codetransform.com>
	<e1d90f4805093017483f7f93e5@mail.gmail.com>
	<E1B7100A-9005-4D81-B310-A354D1FFE77C@codetransform.com>
	<e1d90f48050930183068253af2@mail.gmail.com>
	<e1d90f48050930185939389f0a@mail.gmail.com>
Message-ID: <CC67D26D-0558-42B8-BDAF-F0EB186EAF8D@codetransform.com>

Tree parsers have to be k=1 because they are actually two dimensional  
and it gets too weird to allow k>1.  Syntactic predicates should  
work, though.

You might even try this with 2.7.4.  This seems pretty basic to get  
wrong.  I wonder if it is a newly introduced bug.

Monty


On Sep 30, 2005, at 6:59 PM, Christian Bird wrote:

> In case anyone cares, I tracked down the problem in the source.  Here
> is the lookahead code generator from JavaCodeGenerator.java:
>
>     private String lookaheadString(int k) {
>         if (grammar instanceof TreeWalkerGrammar) {
>             return "_t.getType()";
>         }
>         return "LA(" + k + ")";
>     }
>
> Note that if it's a tree walker, k isn't examined at all. My solution
> (though I'm not sure that it's always NullPointerException safe) is
> this:
>
>     private String lookaheadString(int k) {
>         if (grammar instanceof TreeWalkerGrammar) {
>             System.out.println("k is " + Integer.toString(k) );
>             String retStr = "_t";
>             while (k > 1) {
>                 retStr += ".getNextSibling()";
>                 k--;
>             }
>             retStr += ".getType()";
>             return retStr;
>         }
>         return "LA(" + k + ")";
>     }
>
> A quick recompile and that seems to do the trick.  It's possible that
> the check for getNextSibling could run off the end of the list and
> generate a NullPointerException, but in my grammar I know that the
> places where lookahead two is required, there's gauranteed to be a
> next sibling.
>
> Terrence,
> Any chance that this or something similar and safer (I'm not too
> familiar with the codebase) could make it into 2.7.6?  I know that
> it's probably not often that a tree parser needs k > 1, but (at least
> in my case) it can occur.  Thanks.
>
> -- Chris
>
> On 9/30/05, Christian Bird <cabird@gmail.com> wrote:
>
>> That didn't seem to work either.  I tried using a syntactic  
>> predicate:
>>
>> name :
>>         (ID DOT) => complexName
>>         | (ID ~DOT) => identifier
>>         ;
>>
>> and adding a rule that changes the followset of name:
>>
>> aname :
>>         name SEMI;
>>
>> But the code still has issues:
>>
>> boolean synPredMatched98 = false;
>> if (((_t.getType()==ID) && (_t.getType()==SEMI||_t.getType() 
>> ==ARROW))) {
>>         AST __t98 = _t;
>>         synPredMatched98 = true;
>>         inputState.guessing++;
>>         try {
>>                 {
>>                 AST tmp63_AST_in = (AST)_t;
>>                 match(_t,ID);
>>                 _t = _t.getNextSibling();
>>                 AST tmp64_AST_in = (AST)_t;
>>                 matchNot(_t,DOT);
>>                 _t = _t.getNextSibling();
>>                 }
>>         }
>>         catch (RecognitionException pe) {
>>                 synPredMatched98 = false;
>>         }
>>         _t = __t98;
>>         inputState.guessing--;
>> }
>> if ( synPredMatched98 ) {
>>         identifier(_t);
>>         _t = _retTree;
>> }
>> else {
>>         throw new NoViableAltException(_t);
>> }
>>
>>
>> Oh well...
>>
>> -- Chris
>>
>> On 9/30/05, Monty Zukowski <monty@codetransform.com> wrote:
>>
>>> I dunno.  Try putting parenthesis around the two alternatives?
>>>
>>> Monty
>>>
>>> On Sep 30, 2005, at 5:48 PM, Christian Bird wrote:
>>>
>>>
>>>> Good suggestion, but unfortunately the code generated for name is
>>>> still the same.  I don't understand antlr could ever generate code
>>>> that looks like:
>>>>
>>>> if ((_t.getType()==A) && (_t.getType()==B)) {}
>>>>
>>>> When A is not the same as B.  I'm guessing, however, that a  
>>>> treeparser
>>>> generator is more complicated to write and probably not as often
>>>> used/tested by antlr users as a normal parser generator (most  
>>>> people
>>>> I've talked to here at UC Davis only use it for parsers and lexers,
>>>> not AST traversals).
>>>>
>>>> Any other ideas?  I appreciate your taking a look at it.
>>>>
>>>> -- Chris
>>>>
>>>> On 9/30/05, Monty Zukowski <monty@codetransform.com> wrote:
>>>>
>>>>
>>>>>
>>>>>
>>>>> On Sep 30, 2005, at 4:57 PM, Christian Bird wrote:
>>>>>
>>>>>  zimport :
>>>>>     #("import"
>>>>>         (name ARROW complexNameList SEMI |
>>>>>         "all" identifier SEMI) )
>>>>>     ;
>>>>> It does seem like a code gen bug.  I would recommend breaking this
>>>>> up into
>>>>> another rule if you can:
>>>>>
>>>>> zimport: #("import" importSuffix)
>>>>> importSuffix: name ARROW complexNameList SEMI
>>>>>                        | "all" identifier SEMI
>>>>>                        ;
>>>>>
>>>>> See if that still triggers the problem.
>>>>>
>>>>> Monty
>>>>>
>>>>>
>>>>
>>>>
>>>> --
>>>> Christian Bird
>>>> cabird@gmail.com
>>>>
>>>>
>>>>
>>>>
>>>
>>>
>>>
>>
>>
>> --
>> Christian Bird
>> cabird@gmail.com
>>
>>
>
>
> --
> Christian Bird
> cabird@gmail.com
>
>
>

From cabird at gmail.com  Fri Sep 30 20:04:53 2005
From: cabird at gmail.com (Christian Bird)
Date: Fri Sep 30 20:04:55 2005
Subject: [antlr-interest] bad generated code?
In-Reply-To: <CC67D26D-0558-42B8-BDAF-F0EB186EAF8D@codetransform.com>
References: <e1d90f48050930165719c6bf25@mail.gmail.com>
	<B01ACA7D-C3D9-4723-AC24-4BF009EDA53E@codetransform.com>
	<e1d90f4805093017483f7f93e5@mail.gmail.com>
	<E1B7100A-9005-4D81-B310-A354D1FFE77C@codetransform.com>
	<e1d90f48050930183068253af2@mail.gmail.com>
	<e1d90f48050930185939389f0a@mail.gmail.com>
	<CC67D26D-0558-42B8-BDAF-F0EB186EAF8D@codetransform.com>
Message-ID: <e1d90f4805093020043709bcb@mail.gmail.com>

I get why they have to be lookahead 1.  In my case, I know that all
the places that need lookahead 2 only look at the "same level" of the
tree.  That is, there's not subtrees at those locations.  In general
though, I see why the problem is a difficult one.  There should at
least be a check so that if the code generator is asked to do
lookahead > 1 for a treeparser it generates an exception or error with
the rule that caused the issue.  In my case I was looking all over my
grammar and eventually looked through the source.

On a tangent: I'm not so convinced that treeparsers are actually
working in two dimensions.  In reality, a treeparser simply does an
pre-order traversal of the AST trying to match tokens, right?  There
are many applications in computer science where a "2-dimensional" tree
is turned into linear sequence of "things" (in this case tokens, both
real and imaginary).  XML, for instance is a tree turned into a linear
sequence of tokens with special tokens to indicate where subtrees
start and end.  If I add two tokens, one designating that a new
subtree is beginning (BEGIN) and one designating that the current
subtree is ending (END) then the following rule:

rule1 : #(A #(B C D) E F);

can be translated into

rule2: A BEGIN B BEGIN C D END E F END;

I could create a token generator that does a pre-order traversal of
the tree spitting back tokens to a standard parser that knows about
BEGIN and AND and it's essentially the same thing as a tree parser. 
In this case it shouldn't be tough to do arbitrary lookahead, right? 
Sorry for the over-analysis.  A fellow grad-student here at Davis is a
tree-nut (HAHA) and I must have been around him a little too much
lately.

-- Chris





On 9/30/05, Monty Zukowski <monty@codetransform.com> wrote:
> Tree parsers have to be k=1 because they are actually two dimensional
> and it gets too weird to allow k>1.  Syntactic predicates should
> work, though.
>
> You might even try this with 2.7.4.  This seems pretty basic to get
> wrong.  I wonder if it is a newly introduced bug.
>
> Monty
>
>
> On Sep 30, 2005, at 6:59 PM, Christian Bird wrote:
>
> > In case anyone cares, I tracked down the problem in the source.  Here
> > is the lookahead code generator from JavaCodeGenerator.java:
> >
> >     private String lookaheadString(int k) {
> >         if (grammar instanceof TreeWalkerGrammar) {
> >             return "_t.getType()";
> >         }
> >         return "LA(" + k + ")";
> >     }
> >
> > Note that if it's a tree walker, k isn't examined at all. My solution
> > (though I'm not sure that it's always NullPointerException safe) is
> > this:
> >
> >     private String lookaheadString(int k) {
> >         if (grammar instanceof TreeWalkerGrammar) {
> >             System.out.println("k is " + Integer.toString(k) );
> >             String retStr = "_t";
> >             while (k > 1) {
> >                 retStr += ".getNextSibling()";
> >                 k--;
> >             }
> >             retStr += ".getType()";
> >             return retStr;
> >         }
> >         return "LA(" + k + ")";
> >     }
> >
> > A quick recompile and that seems to do the trick.  It's possible that
> > the check for getNextSibling could run off the end of the list and
> > generate a NullPointerException, but in my grammar I know that the
> > places where lookahead two is required, there's gauranteed to be a
> > next sibling.
> >
> > Terrence,
> > Any chance that this or something similar and safer (I'm not too
> > familiar with the codebase) could make it into 2.7.6?  I know that
> > it's probably not often that a tree parser needs k > 1, but (at least
> > in my case) it can occur.  Thanks.
> >
> > -- Chris
> >
> > On 9/30/05, Christian Bird <cabird@gmail.com> wrote:
> >
> >> That didn't seem to work either.  I tried using a syntactic
> >> predicate:
> >>
> >> name :
> >>         (ID DOT) => complexName
> >>         | (ID ~DOT) => identifier
> >>         ;
> >>
> >> and adding a rule that changes the followset of name:
> >>
> >> aname :
> >>         name SEMI;
> >>
> >> But the code still has issues:
> >>
> >> boolean synPredMatched98 = false;
> >> if (((_t.getType()==ID) && (_t.getType()==SEMI||_t.getType()
> >> ==ARROW))) {
> >>         AST __t98 = _t;
> >>         synPredMatched98 = true;
> >>         inputState.guessing++;
> >>         try {
> >>                 {
> >>                 AST tmp63_AST_in = (AST)_t;
> >>                 match(_t,ID);
> >>                 _t = _t.getNextSibling();
> >>                 AST tmp64_AST_in = (AST)_t;
> >>                 matchNot(_t,DOT);
> >>                 _t = _t.getNextSibling();
> >>                 }
> >>         }
> >>         catch (RecognitionException pe) {
> >>                 synPredMatched98 = false;
> >>         }
> >>         _t = __t98;
> >>         inputState.guessing--;
> >> }
> >> if ( synPredMatched98 ) {
> >>         identifier(_t);
> >>         _t = _retTree;
> >> }
> >> else {
> >>         throw new NoViableAltException(_t);
> >> }
> >>
> >>
> >> Oh well...
> >>
> >> -- Chris
> >>
> >> On 9/30/05, Monty Zukowski <monty@codetransform.com> wrote:
> >>
> >>> I dunno.  Try putting parenthesis around the two alternatives?
> >>>
> >>> Monty
> >>>
> >>> On Sep 30, 2005, at 5:48 PM, Christian Bird wrote:
> >>>
> >>>
> >>>> Good suggestion, but unfortunately the code generated for name is
> >>>> still the same.  I don't understand antlr could ever generate code
> >>>> that looks like:
> >>>>
> >>>> if ((_t.getType()==A) && (_t.getType()==B)) {}
> >>>>
> >>>> When A is not the same as B.  I'm guessing, however, that a
> >>>> treeparser
> >>>> generator is more complicated to write and probably not as often
> >>>> used/tested by antlr users as a normal parser generator (most
> >>>> people
> >>>> I've talked to here at UC Davis only use it for parsers and lexers,
> >>>> not AST traversals).
> >>>>
> >>>> Any other ideas?  I appreciate your taking a look at it.
> >>>>
> >>>> -- Chris
> >>>>
> >>>> On 9/30/05, Monty Zukowski <monty@codetransform.com> wrote:
> >>>>
> >>>>
> >>>>>
> >>>>>
> >>>>> On Sep 30, 2005, at 4:57 PM, Christian Bird wrote:
> >>>>>
> >>>>>  zimport :
> >>>>>     #("import"
> >>>>>         (name ARROW complexNameList SEMI |
> >>>>>         "all" identifier SEMI) )
> >>>>>     ;
> >>>>> It does seem like a code gen bug.  I would recommend breaking this
> >>>>> up into
> >>>>> another rule if you can:
> >>>>>
> >>>>> zimport: #("import" importSuffix)
> >>>>> importSuffix: name ARROW complexNameList SEMI
> >>>>>                        | "all" identifier SEMI
> >>>>>                        ;
> >>>>>
> >>>>> See if that still triggers the problem.
> >>>>>
> >>>>> Monty
> >>>>>
> >>>>>
> >>>>
> >>>>
> >>>> --
> >>>> Christian Bird
> >>>> cabird@gmail.com
> >>>>
> >>>>
> >>>>
> >>>>
> >>>
> >>>
> >>>
> >>
> >>
> >> --
> >> Christian Bird
> >> cabird@gmail.com
> >>
> >>
> >
> >
> > --
> > Christian Bird
> > cabird@gmail.com
> >
> >
> >
>
>


--
Christian Bird
cabird@gmail.com
