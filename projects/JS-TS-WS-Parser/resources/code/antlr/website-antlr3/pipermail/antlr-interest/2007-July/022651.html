<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [antlr-interest] Can @init code throw Java exceptions?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20Can%20%40init%20code%20throw%20Java%20exceptions%3F&In-Reply-To=%3C200707192212.22518.vbar%40comp.cz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="022648.html">
   <LINK REL="Next"  HREF="022646.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[antlr-interest] Can @init code throw Java exceptions?</H1>
    <B>Vaclav Barta</B> 
    <A HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20Can%20%40init%20code%20throw%20Java%20exceptions%3F&In-Reply-To=%3C200707192212.22518.vbar%40comp.cz%3E"
       TITLE="[antlr-interest] Can @init code throw Java exceptions?">vbar at comp.cz
       </A><BR>
    <I>Thu Jul 19 13:12:21 PDT 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="022648.html">[antlr-interest] Can @init code throw Java exceptions?
</A></li>
        <LI>Next message: <A HREF="022646.html">[antlr-interest] Help: A simple string template question..
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22651">[ date ]</a>
              <a href="thread.html#22651">[ thread ]</a>
              <a href="subject.html#22651">[ subject ]</a>
              <a href="author.html#22651">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Thursday 19 July 2007 21:18, Jim Idle wrote:
&gt;<i> I would suggest that perhaps what you want here is:
</I>&gt;<i>
</I>&gt;<i> sourceFile
</I>&gt;<i> @init {
</I>&gt;<i>  	DocumentBuilderFactory factory;
</I>&gt;<i>  	DocumentBuilder builder;
</I>&gt;<i> 	// What is document?
</I>@members {
	Document document;
}

where Document is org.w3c.dom.Document .

&gt;<i> }
</I>&gt;<i>  	: {
</I>&gt;<i>
</I>&gt;<i>  		factory = DocumentBuilderFactory.newInstance();
</I>&gt;<i>  		builder = factory.newDocumentBuilder();
</I>&gt;<i> 		document = builder.newDocument();
</I>&gt;<i> 	  }
</I>&gt;<i>
</I>&gt;<i> 		assignments rules
</I>&gt;<i>  	;
</I>Well, I might want that, but I'll have to get it past the compiler first...

    [javac] Compiling 1 source file to /home/vb/antlr/antmaker/classes
    [javac] /home/vb/antlr/antmaker/src/Dumper.java:58: unreported exception 
javax.xml.parsers.ParserConfigurationException; must be caught or declared to 
be thrown
    [javac]                     builder = factory.newDocumentBuilder();

(IOW the same problem as in my original version).

&gt;<i> In general though, I feel it is asking for trouble to put much of any
</I>&gt;<i> code directly in the grammar. Better to provide the rule with a
</I>&gt;<i> &quot;codegen&quot; object of some sort:
</I>Well, I'm skimping on custom classes by using XML, but obviously I'll still 
need some code to build it, which must go somewhere, so why not directly into 
the grammar? This is supposed to be a simple example, really... :-)

&gt;<i> sourceFile[ myCodeGenClassInterface cgIn]
</I>If I had a myCodeGenClass(es), I'd build a typed tree directly from the parser 
rules and wouldn't bother with a tree grammar at all (I actually did just 
that in my production project) - but the purpose of the exercise above is 
exactly to discover the delights of using a tree grammar... So far, I'm 
hard-pressed to find any. :-/

 	Bye
 		Vasek
</PRE>








<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="022648.html">[antlr-interest] Can @init code throw Java exceptions?
</A></li>
	<LI>Next message: <A HREF="022646.html">[antlr-interest] Help: A simple string template question..
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22651">[ date ]</a>
              <a href="thread.html#22651">[ thread ]</a>
              <a href="subject.html#22651">[ subject ]</a>
              <a href="author.html#22651">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.antlr.org/mailman/listinfo/antlr-interest">More information about the antlr-interest
mailing list</a><br>
</body></html>
