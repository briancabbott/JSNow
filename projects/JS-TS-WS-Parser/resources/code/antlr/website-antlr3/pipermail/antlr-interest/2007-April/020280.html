<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [antlr-interest] Using ! operator in lexer rules
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20Using%20%21%20operator%20in%20lexer%20rules&In-Reply-To=%3CD18618BA-266E-491A-B774-450DFC4FB37A%40wincent.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="020279.html">
   <LINK REL="Next"  HREF="020300.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[antlr-interest] Using ! operator in lexer rules</H1>
    <B>Wincent Colaiuta</B> 
    <A HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20Using%20%21%20operator%20in%20lexer%20rules&In-Reply-To=%3CD18618BA-266E-491A-B774-450DFC4FB37A%40wincent.com%3E"
       TITLE="[antlr-interest] Using ! operator in lexer rules">win at wincent.com
       </A><BR>
    <I>Wed Apr 18 23:56:04 PDT 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="020279.html">[antlr-interest] Can lex token return value?
</A></li>
        <LI>Next message: <A HREF="020300.html">[antlr-interest] Using ! operator in lexer rules
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20280">[ date ]</a>
              <a href="thread.html#20280">[ thread ]</a>
              <a href="subject.html#20280">[ subject ]</a>
              <a href="author.html#20280">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>This[1] wonderful ANTLR 2 tutorial shows the use of a ! operator in  
lexer rules to omit characters from a token's text value:

CHARLIT : '\''! . '\''! ; // enclosing quotes omitted

I've tried this in ANTLR 3 and the operator seems to have no effect  
at all. The new Definitive ANTLR Reference shows many examples using  
the operator, but only in the context of parser rules which output  
AST nodes.

As an example, I have an escaped backslash token. I want it to  
recognize the \\ sequence in the input stream and emit a token whose  
text value is just \. The only way I've found to do this is to  
manually invoke setText from within an action:

ESCAPED_BACKSLASH : BACKSLASH BACKSLASH { setText(&quot;\\&quot;); };

The simpler alternative doesn't work:

ESCAPED_BACKSLASH : BACKSLASH! BACKSLASH;

Likewise for literals:

ESCAPED_BACKSLASH : '\\'! '\\';

So is it correct that the ! operator no longer works in lexer rules  
in ANTLR 3, or am I missing something here?

Cheers,
Wincent

[1] &lt;<A HREF="http://javadude.com/articles/antlrtut/">http://javadude.com/articles/antlrtut/</A>&gt;

</PRE>














<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="020279.html">[antlr-interest] Can lex token return value?
</A></li>
	<LI>Next message: <A HREF="020300.html">[antlr-interest] Using ! operator in lexer rules
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20280">[ date ]</a>
              <a href="thread.html#20280">[ thread ]</a>
              <a href="subject.html#20280">[ subject ]</a>
              <a href="author.html#20280">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.antlr.org/mailman/listinfo/antlr-interest">More information about the antlr-interest
mailing list</a><br>
</body></html>
