<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [antlr-interest] Rule for ISO 8601 - Duration Standar
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20Rule%20for%20ISO%208601%20-%20Duration%20Standar&In-Reply-To=%3C20081216183715.1E8FF11EB4D%40www.antlr.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="032005.html">
   <LINK REL="Next"  HREF="032006.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[antlr-interest] Rule for ISO 8601 - Duration Standar</H1>
    <B>Gavin Lambert</B> 
    <A HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20Rule%20for%20ISO%208601%20-%20Duration%20Standar&In-Reply-To=%3C20081216183715.1E8FF11EB4D%40www.antlr.org%3E"
       TITLE="[antlr-interest] Rule for ISO 8601 - Duration Standar">antlr at mirality.co.nz
       </A><BR>
    <I>Tue Dec 16 10:37:03 PST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="032005.html">[antlr-interest] Rule for ISO 8601 - Duration Standar
</A></li>
        <LI>Next message: <A HREF="032006.html">[antlr-interest] Problems defining StringLiteral processing in	a grammar
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#32009">[ date ]</a>
              <a href="thread.html#32009">[ thread ]</a>
              <a href="subject.html#32009">[ subject ]</a>
              <a href="author.html#32009">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>At 00:52 17/12/2008, Javier Gomez Escribano wrote:
&gt;<i>I'm trying to parse a &quot;duration string&quot; which is in format ISO 
</I>&gt;<i>8601:
</I>&gt;<i>PnnYnnMnnDTnnHnnMnnS (P1Y0M27DT11H9M11S)
</I>&gt;<i>where nn are numbers.
</I>&gt;<i>(A reference to ISO 8601 for durations... 
</I>&gt;<i><A HREF="http://en.wikipedia.org/wiki/ISO_8601">http://en.wikipedia.org/wiki/ISO_8601</A>)
</I>&gt;<i>
</I>&gt;<i>The problem is that I have to put a white space between letters 
</I>&gt;<i>and numbers. And it is something I'd like to avoid.
</I>&gt;<i>
</I>&gt;<i>Here is part of my code
</I>&gt;<i>
</I>&gt;<i>duration    :    (P_TOKEN (year=number Y_TOKEN)? (month=number 
</I>&gt;<i>M_TOKEN)? (day=number D_TOKEN)?)?(T_TOKEN (hour=number H_TOKEN)? 
</I>&gt;<i>(min=number M_TOKEN)? (sec=number S_TOKEN)?)? -&gt; ^(YEAR $year)? 
</I>&gt;<i>^(MONTH $month)? ^(DAY $day)? ^(HOUR $hour)? ^(MINUTE $min)? 
</I>&gt;<i>^(SECOND $sec)?    ;
</I>
You should make this a lexer rule, to recognise the entire thing 
as a single token.  (Trying to use invididual letters as tokens 
like you're doing here quickly leads to complications.)

After that you can still split it up again in the parser for AST 
generation; just manually parse it at that point.  This will also 
let you produce better error messages in the cases of bad 
structure or out of range values.

</PRE>








<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="032005.html">[antlr-interest] Rule for ISO 8601 - Duration Standar
</A></li>
	<LI>Next message: <A HREF="032006.html">[antlr-interest] Problems defining StringLiteral processing in	a grammar
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#32009">[ date ]</a>
              <a href="thread.html#32009">[ thread ]</a>
              <a href="subject.html#32009">[ subject ]</a>
              <a href="author.html#32009">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.antlr.org/mailman/listinfo/antlr-interest">More information about the antlr-interest
mailing list</a><br>
</body></html>
