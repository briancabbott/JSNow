<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [antlr-interest] ANTLR Peak Memory Issue
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20ANTLR%20Peak%20Memory%20Issue&In-Reply-To=%3CF7A8F4A85B0A084884A3448703D1F397F83E14BC%40MAILIN2.global.cadence.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="043858.html">
   <LINK REL="Next"  HREF="043866.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[antlr-interest] ANTLR Peak Memory Issue</H1>
    <B>Manu Chopra</B> 
    <A HREF="mailto:antlr-interest%40antlr.org?Subject=Re:%20%5Bantlr-interest%5D%20ANTLR%20Peak%20Memory%20Issue&In-Reply-To=%3CF7A8F4A85B0A084884A3448703D1F397F83E14BC%40MAILIN2.global.cadence.com%3E"
       TITLE="[antlr-interest] ANTLR Peak Memory Issue">mchopra at cadence.com
       </A><BR>
    <I>Wed Jan 18 22:27:35 PST 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="043858.html">[antlr-interest] [stringtemplate-interest] anybody care to	comment on bitbucket.org?
</A></li>
        <LI>Next message: <A HREF="043866.html">[antlr-interest] ANTLR Peak Memory Issue
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#43860">[ date ]</a>
              <a href="thread.html#43860">[ thread ]</a>
              <a href="subject.html#43860">[ subject ]</a>
              <a href="author.html#43860">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>We are writing a parser using ANTLR, however find unusually high peak memory. Some key points:
*       We use ANTLR C target. Our application is C++.
*       There are no references to $text etc. We directly use token start and end pointers to form string ourselves, where required.
*       Grammar is LL(2).
*       We observe that the token structure itself is bulky 264 bytes or something on 64 bit platform.
*       Further, looks like that ANTLR is tokenizing entire source upfront. This with large token size leads to almost peak memory even before real parsing begins.
*       I went thru some of the earlier posts on the forum and see idea of partitioning the source file lexically and process in parts. Problem is that even sections of the source, which can be lexically identified, are large enough to give us memory problem.

Can you suggest options we can explore to reduce peak the memory? Is there a token stream implementation which keeps only some constant number of tokens in memory as oppose to all?

I also understand that active development work is going on with ANTLR 4.x:
*       Can you share some information on its likely availability of C/C++ target? Approximate time frame is good.
*       If token size going to be smaller in 4.x?
*       Will it still demand that all text be tokenized upfront?

Thank you,
-Manu.


</PRE>





































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="043858.html">[antlr-interest] [stringtemplate-interest] anybody care to	comment on bitbucket.org?
</A></li>
	<LI>Next message: <A HREF="043866.html">[antlr-interest] ANTLR Peak Memory Issue
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#43860">[ date ]</a>
              <a href="thread.html#43860">[ thread ]</a>
              <a href="subject.html#43860">[ subject ]</a>
              <a href="author.html#43860">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.antlr.org/mailman/listinfo/antlr-interest">More information about the antlr-interest
mailing list</a><br>
</body></html>
